# StackOverflow 问答 15732000-15732999

# facebook - 离线时如何通过facebook graph api发布给用户提要

> ID：15732008
> 
> 赞同：1
> 
> 时间：2013-03-31T17:00:38.337
> 
> 标签：facebook, facebook-graph-api

我创建了具有 publish_stream 权限的应用程序，现在我可以在他使用我的应用程序时在用户墙上发布，但是当他离线时，我如何使用图形 api 浏览器在他的墙上发布图像或状态更新，这给了我错误。

# php - 会话保护 3

> ID：15732011
> 
> 赞同：0
> 
> 时间：2013-03-31T17:00:49.967
> 
> 标签：php, session, passwords, password-protection

我正在一点一点地创建一个网页，测试部分网页创意。我想学习如何会话保护页面。我已经对页面进行了密码保护，但是任何人都可以通过输入 url 来访问该页面。我想会话保护我的页面，所以没有人可以做到这一点。我有三个页面：index.html，它具有发送password.php的表单，password.php，它使用“if statments”确保密码和用户名是正确的（这里是“if statment”）

```
 if ($username == 'mgmb99'){
    if ($password == 'mgmb91mas'){
    header('Location: youhere.php');
    } else {
    echo 'your username or password is wrong.<a href="http://www.passwordtest.comze.com"> go back to login page </a>';
    }} else {
    echo 'your username or password is wrong.<a href="http://www.passwordtest.comze.com"> go back to login page </a>';
    }; 
```

，以及登录后的页面 youhere.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:12:18.203

网上有很多很好的例子。但是会话限制（和数据库）最好使用盐键或哈希。

所以基本上你拿一个 id/username 和一段随机文本，并（例如）用 sha1 对其进行哈希处理。

```
sha1($[your username].'completely random piece of text') 
```

这将为您提供一个 40 个字符的字符串，如果您有用户名和随机文本，您可以复制该字符串。所以：

if($SESSION['id'] == sha1($[your username].'completely random piece of text')) { // 现在你知道用户名是正确的 }

基本上就是这样。它确实有一些更多的技巧。但永远不要在会话中放入任何对任何人都有意义的东西。因此，只需在会话中使用公共 ID（不是用户 ID）以及散列数据。

一个简单会话的例子在这里（没有检查它，但它很好开始）：[http ://www.webdesign.org/web-programming/php/password-protect.11092.html](http://www.webdesign.org/web-programming/php/password-protect.11092.html)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:19:56.843

```
do like this
<?php
session_start();
if ($username == `enter code here`)
{
    if ($password == `mgmb91mas`)
    {
      $_SESSION[`id`]='Secret code';
      header(`Location:page.php`);
    }
?>
and check that id in the next page at start like below
<?php
session_start();
if($_SESSION['id']!='Secret code')
{
header('Location:inde.php');
}
?> 
```

# xcode - 一个单元如何测试依赖网络的操作？

> ID：15732013
> 
> 赞同：4
> 
> 时间：2013-03-31T17:00:51.320
> 
> 标签：xcode, unit-testing, network-programming, octest

我的一些应用程序从互联网上获取数据。我正在养成编写单元测试的习惯，并且我怀疑如果我为从互联网返回的值编写测试，我会遇到延迟和/或可靠性问题。

测试“位于 Web 请求另一端”的数据的有效方法是什么？

我正在使用 Xcode 附带的库存单元测试工具包，但这个问题理论上适用于任何测试框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:08:12.330

`Unit`test 专门针对你的类的业务逻辑。不会有延迟、可靠性等，因为您将使用一些模拟对象来模拟您实际交互的内容。
您所描述的是某种形式的`integration`测试，并且对于 OP 来说似乎不是您的意图。
您应该通过模拟而不是真正访问网络、远程数据库等来“掩盖”另一端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:07:21.643

其中：

*   在请求中引入人为延迟
*   使用同一网络上的另一台机器或至少另一个 VM
*   测试连接失败（通过连接到不存在的服务器或物理切断连接
*   测试不完整的数据（连接可以中途切断）
*   测试重复数据（如果应用程序认为它不成功，它可能会尝试多次提交请求 - 在某些情况下可能会导致数据丢失）

所有这些都应该正常失败（在服务器端或客户端）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T17:40:28.503

我在 freenode.net 上的#macdev IRC 频道上向可敬的人提出了这个问题，我得到了一些非常好的答案。

Mike Ash（来自[mikeash.com](http://mikeash.com)）建议在我的应用程序中实现一个本地 Web 服务器。对于复杂的情况，我可能会这样做。但是，我只是使用`initWithContentsOfURL:(NSURL *)url`了`NSData`.

对于更简单的情况，mike 说另一种方法是将 base64 编码的虚拟数据直接传递给 NSData 初始化程序。（使用`data://dummyDataEncodedAsBase64GoesAfterTheDataProtocolThingy`。）

同样，“alistra”建议使用指向包含模拟数据的文件的本地文件 URL。

# ruby-on-rails - 使用 Capistrano 部署时出现 psych.rb 错误“在此上下文中不允许映射”

> ID：15732014
> 
> 赞同：8
> 
> 时间：2013-03-31T17:00:52.143
> 
> 标签：ruby-on-rails, capistrano

我正在尝试将 Rails 应用程序部署到 CentOS 6/nginx/passenger 服务器，但 cap deploy:cold 给了我一个错误。这是部署输出的相关部分：

```
 * 2013-03-31 17:49:59 executing `deploy:assets:update_asset_mtimes'
  * executing "[ -e /home/appuser/apps/britaincares/shared/assets/manifest.yml ] && cat /home/appuser/apps/britaincares/shared/assets/manifest.yml || echo"
    servers: ["www.britaincares.co.uk"]
    [www.britaincares.co.uk] executing command
    command finished in 303ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/appuser/apps/britaincares/releases/20130331164733; true"
    servers: ["www.britaincares.co.uk"]
    [www.britaincares.co.uk] executing command
 ** [out :: www.britaincares.co.uk] /home/appuser/.bashrc: eval: line 26: syntax error: unexpected end of file
    command finished in 932ms
/Users/chriswickett/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): mapping values are not allowed in this context at line 1 column 28 (Psych::SyntaxError)
    from /Users/chriswickett/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
    from /Users/chriswickett/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/psych.rb:151:in `parse'
    from /Users/chriswickett/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/psych.rb:127:in `load'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/recipes/deploy/assets.rb:63:in `block (3 levels) in load'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:138:in `instance_eval'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:138:in `invoke_task_directly'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/callback.rb:38:in `call'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:141:in `block in trigger'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:141:in `each'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:141:in `trigger'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:23:in `invoke_task_directly_with_callbacks'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/callback.rb:38:in `call'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:141:in `block in trigger'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:141:in `each'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:141:in `trigger'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:27:in `invoke_task_directly_with_callbacks'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/namespaces.rb:191:in `method_missing'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/namespaces.rb:110:in `block in define_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/recipes/deploy.rb:229:in `block (3 levels) in load'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:56:in `transaction'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/namespaces.rb:191:in `method_missing'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/recipes/deploy.rb:228:in `block (2 levels) in load'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:138:in `instance_eval'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:138:in `invoke_task_directly'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/namespaces.rb:191:in `method_missing'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/namespaces.rb:110:in `block in define_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/recipes/deploy.rb:517:in `block (2 levels) in load'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:138:in `instance_eval'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:138:in `invoke_task_directly'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:46:in `block in execute_requested_actions'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:45:in `each'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:45:in `execute_requested_actions'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/cli/help.rb:19:in `execute_requested_actions_with_help'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:34:in `execute!'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:14:in `execute'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/gems/capistrano-2.14.2/bin/cap:4:in `<top (required)>'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374/bin/cap:19:in `load'
    from /Users/chriswickett/.rvm/gems/ruby-1.9.3-p374 
```

导轨 3.2.1。

提到的 manifest.yml 文件包含“jquery.min.map”——这就是“不允许映射”部分所指的吗？如果是这样，我不知道如何阻止 jQuery 尝试包含此地图文件。

我已经尝试通过各种在线验证器将 manifest.yml 文件的上下文放入 - 效果很好。据我所知，没有缺少空格或制表符。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-19T10:09:39.983

[我遇到了这个问题，并按照这里](https://github.com/capistrano/capistrano/issues/451 "Capistrano issue #451")的建议删除了我的`.json`清单文件（实际上，他们建议重命名它们，但这对我不起作用）。`myapp/shared/assets`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T11:39:11.240

我解决了这个问题。之所以调用 Psych，是因为 Capistrano 中的文件`deploy/assets.rb`使用`YAML.load`.

它正在加载的变量是命令行 cat 命令的“捕获”，并且由于 my`.bashrc`中有语法错误，它正在捕获该错误的输出并将其传递给`YAML.load`. 修复`.bashrc`了错误，一切都很好！

# javascript - 使用 require.js 在 chrome 扩展中调试内容脚本时遇到问题

> ID：15732017
> 
> 赞同：3
> 
> 时间：2013-03-31T17:01:04.577
> 
> 标签：javascript, google-chrome-extension, requirejs

要在内容脚本中加载模块，我使用以下代码（来源[http://prezi.com/rodnyr5awftr/requirejs-in-chrome-extensions/](http://prezi.com/rodnyr5awftr/requirejs-in-chrome-extensions/)）：

```
require.load = function (context, moduleName, url) {
    var xhr;
    xhr = new XMLHttpRequest();
    xhr.open("GET", chrome.extension.getURL(url) + '?r=' + new Date().getTime(), true);
    xhr.onreadystatechange = function (e) {
        if (xhr.readyState === 4 && xhr.status === 200) {
            eval(xhr.responseText);
            context.completeLoad(moduleName)
        }
    };
    xhr.send(null);
}; 
```

通过 Chrome 控制台进行调试时会出现问题。每当我的一个模块中出现错误时，它只会报告匿名函数中发生的错误，但不会通知我该模块中的哪个 require.js 模块或行发生了错误，而是始终指向返回中的 eval 行上面的脚本。

由于很多人在使用带有 chrome 扩展的 require.js 时似乎在使用上述代码的不同变体，因此必须有一种简单的方法可以在调试控制台中获取更多信息，我只是不知道那是什么:)。

谢谢你的帮助！！

**更新 4/1：**将上面的 eval() 语句更改为使用 Function() 似乎已经解决了问题，因为 chrome 控制台添加了附加信息。（这项工作的功劳归于这个[问题](https://stackoverflow.com/questions/6684046/javascript-eval-method)）。

我意识到这两个功能不是完全可以互换的（见[这个问题](https://stackoverflow.com/questions/4599857/is-eval-and-new-function-the-same-thing)）。如果有人知道在上面的代码中使用 Function() 而不是 eval() 的任何陷阱，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:13:52.700

你可以换行

```
 eval(xhr.responseText); 
```

经过

```
 eval(xhr.responseText + "\n//@ sourceURL=" + url); 
```

这样，您将在原始 url 下的源代码面板中看到所有已评估的代码。

# c# - 为什么分配给 ObservableCollection 不会破坏 CollectionChanged 订阅者列表？

> ID：15732019
> 
> 赞同：0
> 
> 时间：2013-03-31T17:01:07.443
> 
> 标签：c#, variable-assignment, observablecollection, inotifycollectionchanged

我有一个 ObservableCollection，我需要通过重新加载按钮来替换它。在尝试这个过程中，我发现即使变量“myCollection”在“ReLoadData”中被取消（参见下面的代码示例）并分配了一个新的 ObservableCollection，但我没有向其 CollectionChanged 成员添加任何事件处理程序，CollectionChanged 事件也会触发：

```
 public partial class MainWindow : Window
    {
        private ObservableCollection<string> myCollection = 
           new ObservableCollection<string>();

        public MainWindow()
        {
           InitializeComponent();

           myCollection.CollectionChanged += new    
           System.Collections.Specialized.NotifyCollectionChangedEventHandler(
           myCollection_CollectionChanged);
        }

        //Invoked in button click handler:
        private void ReLoadData()
        {
           ObservableCollection<string> newCollection =
              new ObservableCollection<string>();

           //Filling newCollection with stuff...

           //Marks old collection for the garbage collector
           myCollection = null;
           myCollection = newCollection;          
        }

        void myCollection_CollectionChanged(
           object sender,   
           System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
        {
           //Set breakpoint on statement or one of the braces.
        }

        private void AddItem(object sender, RoutedEventArgs args)
        {

           //Why does the following fire CollectionChanged
           //although myCollection was nullified in
           //ReLoadAuctionData() before?
           myCollection.Add("AddedItem");

        }

   } 
```

我怀疑这可能与赋值运算符在 C# 中的实现方式有关，但据我所知，它不能在 C# 中被覆盖，所以我不知道如何解释上述行为......有谁知道这个?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:48:11.350

（来自评论）

> 我怀疑谁在“填充”收藏 - 仍然与旧的“收藏”有关

即不管`INotifyCollectionChanged, that's just for inside collection`- 你仍然需要'通知'任何'订阅者''整个'集合已经改变 - 并且使用 INotifyPropertyChanged - 即在那个'取消'（这是不必要的顺便说一句。）`you need to call OnPropertyChanged("Collection") or whatever is named`。

# clojurescript - clojurescript：触摸事件和 Domina

> ID：15732028
> 
> 赞同：2
> 
> 时间：2013-03-31T17:02:13.267
> 
> 标签：clojurescript

我无法从 Domina 的 touchstart 事件中获取 'touch' 或 'changedTouches' 列表。

这是我的 :require 东西：

```
(ns myproj
  (:require-macros [hiccups.core :as h])
  (:require [domina :as dom]
        [hiccups.runtime :as hiccupsrt]
        [domina.events :as ev]
        [cljs.reader :refer [read-string]]
        [wsosc :as wo]
        [clojure.browser.repl :as repl]
        )) 
```

这是我的 touchstart 事件处理程序：

```
(defn touchstart [evt]
  ; store event in an atom for repl access
  (swap! de (fn [x] evt))
  ; print something to html to show a result (no console on the phone)
  (dom/set-text! (dom/by-id "result") (str "blah" evt))
  ; hopefully someday extract touch coordinates here.
   (let [rct (.getBoundingClientRect (dom/by-id "osccanvas"))
         ;touchlist1 (get evt "changedTouches")
         ;touchlist2 (.changedTouches evt)
         ;touchlist3 (.-changedTouches evt)
         ;kies (keys evt)]
         wat (:type evt)             ; this works
         ;wat (ev/raw-event evt)     ; this works
         ;touchlist (.-changedTouches evt)]
         ;touch (.item touchlist 1)]
         ]
  (dom/set-text! (dom/by-id "result") (str "touchstart touch:" wat)))) 
```

'de' 是我试图用于调试的原子。我能够从事件中获取 :type ，仅此而已。除了 ev/raw-event 之外，几乎所有其他注释的东西都不起作用。raw-event 返回一个从 repl 中相当难以破解的对象，至少对我来说是这样。如果我换！de 与 raw-event 它看起来像这样：

```
ClojureScript:myproj>@de
#<[object Object]> 
```

我不知道如何从中提取信息，它似乎对 (keys x) 或 (.keys x) 等内容反应迟钝。

同样奇怪的是我可以在上面的函数中调用 (:type evt)，但是如果我将 evt 分配给 de，我就不能对 repl 处的 'de' 原子做同样的事情，即 (:type @de ）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T14:55:57.267

好吧，在经历了很多挫折之后，我终于得到了工作。事实证明，有很多层在起作用，我并没有真正意识到（也不想知道！）。主要的是 domina 触摸事件对象中没有触摸信息 - 甚至在 domina 获取事件之前就被剥离了。就像这样：

原始浏览器事件 -> google 闭包库 -> domina 库 -> 我的代码

而谷歌闭包（不是clojure，它的javascript）库实际上会去除触摸信息，所以它在我得到的事件对象中不可用。谢谢，谷歌。但是，原始事件仍然可以访问，它仅向下两层。代码如下所示：

```
(defn touchstart [evt]
   (let [wat (ev/raw-event evt)
         touches (.-changedTouches (.getBrowserEvent wat))
         touch (.item touches 0)
        ]
   (domousedown (.-clientX touch) (.-clientY touch))
  )) 
```

所以我使用 Domina 的 raw-event 函数来获取事件的 google 闭包版本（'wat'）。但这也没有触摸信息。我必须使用 getBrowserEvent 再上一层，然后我可以调用这里记录的 changedTouches 方法：

[https://developer.mozilla.org/en-US/docs/DOM/TouchEvent](https://developer.mozilla.org/en-US/docs/DOM/TouchEvent)

最后一个难题是首先检测是否存在触摸屏，因此我可以为此设置正确的事件函数。这个非clojure hack可以完成这项工作：

```
(if (js* "'ontouchstart' in window")
   <set up touch events>
   <set up non-touch events>) 
```

我在这里尝试了 clojure 语法的各种排列，但似乎没有什么对我有用。对这方面的建议持开放态度。

# python - Python中“round”函数的行为

> ID：15732032
> 
> 赞同：6
> 
> 时间：2013-03-31T17:02:27.043
> 
> 标签：python, python-3.x, rounding

谁能解释一下这段代码：

```
>>> round(0.45, 1)
0.5
>>> round(1.45, 1)
1.4
>>> round(2.45, 1)
2.5
>>> round(3.45, 1)
3.5
>>> round(4.45, 1)
4.5
>>> round(5.45, 1)
5.5
>>> round(6.45, 1)
6.5
>>> round(7.45, 1)
7.5
>>> round(8.45, 1)
8.4
>>> round(9.45, 1)
9.4 
```

**更新**

我想这是因为浮动表示。我对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T17:09:19.450

你说的对。没有一个数字可以精确表示。在某些情况下，小数部分严格大于`0.45`，在某些情况下严格小于：

```
In [4]: ['%.20f' % val for val in (0.45, 1.45, 2.45, 3.45, 4.45, 5.45, 6.45, 7.45, 8.45, 9.45)]
Out[4]: 
['0.45000000000000001110',
 '1.44999999999999995559',
 '2.45000000000000017764',
 '3.45000000000000017764',
 '4.45000000000000017764',
 '5.45000000000000017764',
 '6.45000000000000017764',
 '7.45000000000000017764',
 '8.44999999999999928946',
 '9.44999999999999928946'] 
```

这解释了看似不一致的舍入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:03:55.070

正如 NPE 所说，十进制数的二进制表示不准确，所以你可以从四舍五入中得到奇怪的行为，解决这个问题的模块是十进制， [这是官方文档](http://docs.python.org/3.3/library/decimal.html)

# r - rm 和垃圾收集包装器

> ID：15732033
> 
> 赞同：0
> 
> 时间：2013-03-31T17:02:34.083
> 
> 标签：r, garbage-collection, wrapper

我将如何创建一个名为的函数，该函数`rm2`接收未知数量的对象，删除它们，然后运行`gc()`？

我已经尝试了可能的事情，但无法弄清楚。

```
rm2 <- function(...){
  #files <- list(...)
  #files <- list(deparse(substitute(...)))
  #rm(list = files)
  rm(...)
  capture.output(gc(),file='NUL')
} 
```

我会很感激。

另外，让我们尽量不要提出`gc()`投诉。我发现它确实有助于为我的主机操作系统释放 RAM :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:39:27.590

一个简单的选择是像`rm`它自己一样做，并使用`...`来自匹配的调用（from `match.call`）。这给出了一个符号列表，然后我使用 . 将其转换为字符向量`sapply`。`rm`然后将此向量作为参数传递给`list`。最后我们只返回输出`gc`：

```
rm2 <- function(...) {
  dots <- match.call(expand.dots = FALSE)$...
  dots <- sapply(dots, as.character)
  rm(list = dots, envir = globalenv())
  gc()
}

> ls()
[1] "pred" "reg4" "rm2"  "tenv" "x"    "y"   
> rm2(x, y)
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 226670 12.2     467875   25   350000 18.7
Vcells 357248  2.8     905753    7   867363  6.7
> ls()
[1] "pred" "reg4" "rm2"  "tenv" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:18:51.850

不确定，但也许是这样：

```
rm2 <- function(...) {
    x <- substitute(...())
    Trim <- function (x) gsub("\\s+$", "", x)
    z <- Trim(unlist(lapply(x, function(y) as.character(y))))
    rm(list=z, envir =  .GlobalEnv)
    capture.output(gc())
} 
```

PS use `NULL`not`'NUL'`尽管默认是使用`NULL`任何方式，因此没有必要包含它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-31T21:31:58.713

怎么样：

```
rm2 <- function(...) {
    Call <- match.call(expand.dots = TRUE)
    Call[[1L]] <- as.name("rm")
    eval.parent(Call)
    gc(verbose = FALSE, reset = TRUE)
    NULL
} 
```

第一部分基于`write.csv`功能。然后你`gc`使用详细设置`FALSE`来防止打印信息。最后函数返回`NULL`（没有它，它会打印`gc`出内存清理摘要的结果）。

# ajax - JSONP 传递 api 密钥

> ID：15732034
> 
> 赞同：2
> 
> 时间：2013-03-31T17:02:45.793
> 
> 标签：ajax, rest, jsonp, cosm, xively

我有一个 arduino 将传感器数据上传到 cosm.com。我在本地 Web 服务器上创建了一个简单的网页来查询 cosm.com API 并打印出值。

问题是，如果我没有在另一个选项卡中登录 cosm.com，我会收到此弹出窗口。

![在此处输入图像描述](https://i.stack.imgur.com/VHWSM.png)

解决方案是将我的公钥传递给 cosm.com，但我在这里有点不知所措。

该文档提供了如何在 curl 中执行此操作的示例，而不是 javascript

```
curl --request GET --header "X-ApiKey: -Ux_JTwgP-8pje981acMa5811-mSAKxpR3VRUHRFQ3RBUT0g" https://api.cosm.com/v2/feeds/120687/datastreams/sensor_reading 
```

如何将我的密钥传递到 url？：

```
function getJson() {
$.ajax({
    type:'GET',
    url:"https://api.cosm.com/v2/feeds/120687/datastreams/sensor_reading",

//This line isn't working
    data:"X-ApiKey: -Ux_JTwgP-8pje981acMa5811-mSAKxpR3VRUHRFQ3RBUT0g",

    success:function(feed) {

     var currentSensorValue = feed.current_value;
      $('#rawData').html( currentSensorValue );
    },
    dataType:'jsonp'
});
} 
```

*更新：* 这一定是可能的，因为 hurl.it 能够查询 api [http://www.hurl.it/hurls/75502ac851ebc7e195aa26c62718f58fecc4a341/47ad3b36639001c3a663e716ccdf3840352645f1](http://www.hurl.it/hurls/75502ac851ebc7e195aa26c62718f58fecc4a341/47ad3b36639001c3a663e716ccdf3840352645f1)

*更新 2：* 虽然我从来没有得到这个工作，但我确实找到了解决方法。Cosm 有自己的 javascript 库，可以满足我的需求。

[http://cosm.github.com/cosm-js/](http://cosm.github.com/cosm-js/) [http://jsfiddle.net/spuder/nvxQ2/5/](http://jsfiddle.net/spuder/nvxQ2/5/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T17:05:47.593

您需要将其作为标题发送，而不是作为查询字符串发送，所以试试这个：

```
function getJson() {
  $.ajax({
    type:'GET',
    url:"https://api.cosm.com/v2/feeds/120687/datastreams/sensor_reading",
    headers:{"X-ApiKey": "-Ux_JTwgP-8pje981acMa5811-mSAKxpR3VRUHRFQ3RBUT0g"},
    success:function(feed) {
     var currentSensorValue = feed.current_value;
      $('#rawData').html( currentSensorValue );
    },
    dataType:'jsonp'
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:26:37.570

[使用CosmJS](http://cosm.github.com/cosm-js/)应该更容易让它工作。它是官方支持的库，提供 Cosm API 的完整覆盖。

# eclipse - 在 Eclipse 中为 Blackberry 使用 .NET WCF 服务

> ID：15732037
> 
> 赞同：0
> 
> 时间：2013-03-31T17:03:09.357
> 
> 标签：eclipse, wcf, blackberry

是否可以在 Eclipse for Blackberry 中使用 .NET WCF 服务？

现在已经努力了 4 天，但没有运气我在尝试使用 Java ME 3.2 为我的 WCF 生成 java Stub 类时遇到困难，因为我的 WCF 包含 .NET List 作为参数，并且由于未知原因 Java ME 无法生成这些存根我 ：（

为什么？有什么见解吗？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:10:13.963

您可以更改/检查几件事：

*   更改您的合同以使用跨平台有效的类型。将您的 .net 列表更改为数组。
*   不要直接返回列表。创建一个返回对象，该对象具有一个具有列表的属性。
*   确保您使用的是与调用平台兼容的 WCF 配置，例如基本的 http 绑定。
*   确保打开 wsdl 生成
*   确保您的服务正在运行

您应该首先从 .net 客户端测试您的服务，以确保它是一个兼容性问题。

如果你有类似的东西：

```
 public myItems[] GetData(); 
```

尝试;

```
 [OperationContract]
  public myResponse GetData();

  [DataContract]
  public class myResponse()
  {
      [Datamember]
      myItems[] items { get; set; }
  } 
```

# ruby-on-rails - Heroku 自定义域 - 如何让它没有人知道它正在转发？

> ID：15732043
> 
> 赞同：1
> 
> 时间：2013-03-31T17:03:47.000
> 
> 标签：ruby-on-rails, http-headers

我有一个具有正常 Heroku 名称的应用程序 (my-app433.heroku.com)

我添加了自定义域 (www.mywebsite.com)

这是简单的“带掩码转发”（`www.mywebsite.com`指向`my-app433.heroku.com`- 就像 Heroku 建议的那样）。

但是当我去的时候我不喜欢这样`www.mywebsite.com`- http 标头说`302 Found - my-app433.heroku.com`然后给出所有内容。

有没有办法隐藏它正在转发的事实？

（我想得到一个简单`200Ok`的好像`www.mywebsite.com`是直接域）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:45:19.713

除非你有理由不这样做，否则我会从“使用屏蔽转发”切换到使用[DNS 中的 CNAME 记录](https://devcenter.heroku.com/articles/custom-domains#dns-setup)将流量直接发送到 Heroku 。

如果您想比较，这就是我在[我的网站](http://www.toxinless.com)上的做法：

```
> nslookup www.toxinless.com
...
www.toxinless.com   canonical name = toxinless.herokuapp.com.
...

> curl http://www.toxinless.com -I
...
HTTP/1.1 200 OK
... 
```

# hibernate - 具有 ID 的嵌入式实体

> ID：15732045
> 
> 赞同：0
> 
> 时间：2013-03-31T17:03:52.597
> 
> 标签：hibernate, jakarta-ee, jboss7.x

我创建了一个抽象实体类，它定义了两个具体的子类：

```
@Entity(name="Zone")
@DiscriminatorColumn(name="type",
                     discriminatorType=DiscriminatorType.STRING,
                     length=10)
@Table(name="grZones")
public abstract class ZoneEntity extends AbstractEntity {

    @Id
    public String getIdent() ...

    @Entity(name="RootZone")
    @DiscriminatorValue(value="root")
    public static class RootZone extends ZoneEntity { ... }

    @Entity(name="Subzone")
    @DiscriminatorValue(value="subzone")
    public static class Subzone extends ZoneEntity { ... }
} 
```

另一个引用抽象区域类的类：

```
@Entity(name="Device")
@Table(name="grDevices")
public class DeviceEntity {

    public DeviceEntity() { }

    @Id
    @XmlTransient
    public Long getID() { ... }

    @JoinColumn(name = "parent", updatable = true, nullable = false)
    public ZoneEntity getParent() { ... }
} 
```

在部署类型（Jboss-7.1.1）我得到以下异常：

```
Caused by: org.hibernate.MappingException: Could not determine type for: com.graphicreports.amun.habitat.ZoneEntity, at table: grDevices, for columns: [org.hibernate.mapping.Column(parent)]
    at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:304)
    at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:288)
    at org.hibernate.mapping.Property.isValid(Property.java:216)
    at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:467) 
```

是否需要在某处添加一些注释才能使其正常工作，或者我是否必须重新考虑我的数据库结构？

非常感谢史蒂夫

# c# - 想要在 byte[] 中上传和检索图像和任何其他格式文件到我的 sql server 数据库中

> ID：15732047
> 
> 赞同：1
> 
> 时间：2013-03-31T17:04:22.267
> 
> 标签：c#, asp.net, ado.net

保存文件信息：

```
string[] fileStream = File.ReadAllBytes(files[1]);
FileInfo fileinfo = new FileInfo(files[1]);
string fileName = Path.GetFileNameWithoutExtension(files[1]);
string extension = Path.GetExtension(files[1]); 
```

将 object[,] 插入数据库：

```
rowData[0, 0] = "@cvTitle";
rowData[0, 1] = fileName;
rowData[1, 0] = "@cvData";
rowData[1, 1] = fileStream;
rowData[2, 0] = "@recieveDate";
rowData[2, 1] = DateTime.Now;
rowData[3, 0] = "@cvSize";
rowData[3, 1] = fileinfo.Length;
rowData[4, 0] = "@fileTypeID";
rowData[4, 1] = extension.ToString(); 
```

但它没有以正确的格式上传。

以及如何在不更改文件的情况下从数据库中获取相同的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:31:24.477

您的代码不起作用的原因是您使用的是 string[] 而不是 byte[]，这是 ReadAllBytes 命令的返回类型。

```
byte[] fileBytes = File.ReadAllBytes(files[1]); // assuming files[1] is a string pointing to the file with a relative/absolute path
FileInfo info = new FileInfo(files[1]);
string name = Path.GetFileNameWithoutExtension(files[1]);
string extension = Path.GetExtension(files[1]); 
```

对于您的其他问题：

```
byte[] fileBytes = rowData[1, 1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:31:24.833

你有字符串数组而不是字节数组

您上传图片的更新代码

```
byte[] fileStream = File.ReadAllBytes(files[1]);
FileInfo fileinfo = new FileInfo(files[1]);
string fileName = Path.GetFileNameWithoutExtension(files[1]);
string extension = Path.GetExtension(files[1]); 
```

用于检索图像

```
DataTable dt = new DataTable();
SqlDataAdapter da = new SqlDataAdapter();
SqlCommand cmd = new SqlCommand("Your query", Your Connection);
cmd.CommandType = CommandType.text;
da.SelectCommand = cmd;
cmd.ExecuteNonQuery();
da.Fill(dt); 
```

希望对你有帮助

# jquery - 当浏览器失焦时，jQuery 计时器暂停

> ID：15732050
> 
> 赞同：1
> 
> 时间：2013-03-31T17:04:31.660
> 
> 标签：jquery

我在 Chrome 和 Mozilla 中遇到了这个问题，而 IE 工作正常。当我最小化浏览器或打开一个新选项卡并在该选项卡上工作一段时间时，计时器会暂停，但如果 Web 应用程序再次成为焦点，则会再次恢复。我通过时间的差异知道这一点，例如大约一分钟左右后，当我返回 Web 应用程序时，只有一秒钟左右的时间过去了。我不知道是什么导致了这个问题。

这是我使用的 jQuery 片段，计时器可以从这里下载[http://code.google.com/p/jquery-timer/](http://code.google.com/p/jquery-timer/)

```
 var countdownTimer, countdownCurrent;
    $(document).ready(function () {
        countdownCurrent = $('#ctl00_MainContent_example2submit').val() * 100;
        countdownTimer = $.timer(function () {
            var min = parseInt(countdownCurrent / 6000);
            var sec = parseInt(countdownCurrent / 100) - (min * 60);
            var micro = pad(countdownCurrent - (sec * 100) - (min * 6000), 2);
            var output = "00"; if (min > 0) { output = pad(min, 2); }
            $('.countdowntime').html(output + ":" + pad(sec, 2) + ":" + micro);
            if (countdownCurrent == 0) {
                $('#ctl00_MainContent_btnNext').click();

            } else {
                countdownCurrent -= 7;
                if (countdownCurrent < 0) { countdownCurrent = 0; }
            }
        }, 70, true);

        $('#example2submit').bind('keyup', function (e) { if (e.keyCode == 13) { countdownReset(); } });

    });

    function CheckIfOptionSelected() {

        var vFlag = true;
        var radioButton1 = document.forms[0].elements['ctl00_MainContent_rdBtnListOptions_0'];
        var radioButton2 = document.forms[0].elements['ctl00_MainContent_rdBtnListOptions_1'];
        var radioButton3 = document.forms[0].elements['ctl00_MainContent_rdBtnListOptions_2'];
        var radioButton4 = document.forms[0].elements['ctl00_MainContent_rdBtnListOptions_3'];

        if (radioButton1.checked == false && radioButton2.checked == false && radioButton3.checked == false && radioButton4.checked == false && countdownCurrent > 0) {
            vFlag = false;
        }

        else {
            countdownReset();
            vFlag = true;
        }
        return vFlag;
    }

    function countdownReset() {
        var newCount = parseInt($('#ctl00_MainContent_example2submit').val()) * 100;
        if (newCount > 0) { countdownCurrent = newCount; }
        countdownTimer.stop().once();
                }

    // Padding function
    function pad(number, length) {
        var str = '' + number;
        while (str.length < length) { str = '0' + str; }
        return str;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:26:50.530

我看了一下那个 jQuery timer 插件，我不太喜欢这段代码。对于一个简单的任务来说，这似乎是不必要的复杂。像这样的代码不会激发信心：

```
if(typeof func == 'object') {
    var paramList = ['autostart', 'time'];
    for(var arg in paramList) {if(func[paramList[arg]] != undefined) {eval(paramList[arg] + " = func[paramList[arg]]");}};
    func = func.action;
} 
```

重新格式化，添加了一些急需的换行符和注释：

```
if(typeof func == 'object') {
    var paramList = ['autostart', 'time'];
    // Never use for..in to iterate over an array
    for(var arg in paramList) {
        if(func[paramList[arg]] != undefined) {
            // What does this eval code do and why?
            eval(paramList[arg] + " = func[paramList[arg]]");
        }
    };
    func = func.action;
} 
```

如果您需要一个可以工作的计时器，为什么不采用更简单的方法并直接使用浏览器的`setInterval()`or`setTimeout()`呢？如果您需要知道已经过去了多少时间，请使用`+new Date`以毫秒为单位获取当前时间并根据需要减去。

这是一个测试页面，显示页面加载后的秒数。它是纯原生 HTML 和 JavaScript 代码，我认为它应该适用于所有浏览器。特别是，当 IE 最小化时，它按预期工作。您可以将此作为一个简单而可靠的解决方案的起点：

```
<!DOCTYPE html>

<html>
<head>
    <title>Time Test</title>
</head>
<body>

    <code>
        This page has been open for
        <span id="timeOpen">0</span>
        seconds
    </code>

    <script>
        var timeStart = +new Date;
        setInterval( function() {
            var timeNow = +new Date;
            var secondsOpen = ( timeNow - timeStart ) / 1000;
            document.getElementById('timeOpen').innerHTML =
                Math.floor( secondsOpen );
        }, 250 );
    </script>

</body>
</html> 
```

这是[小提琴](http://jsfiddle.net/geary/unNZk/)中的代码。

# ios - 在多选IOS期间取消选择表视图行时的通知

> ID：15732052
> 
> 赞同：0
> 
> 时间：2013-03-31T17:04:36.060
> 
> 标签：ios, uitableview, delegates

我有一个启用了多选的表格视图。我想在选择表格行时调用 web 服务，在取消选择时调用不同的 web 服务。我注意到在表视图选择中调用了 didSelectRowAtindexPath 但在取消选择时没有调用。当取消选择表视图中的行时，有什么方法可以触发事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:45:40.067

请参阅 UITableViewDelegate 方法[tableView:didDeselectRowAtIndexPath:](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006942-CH3-SW19)和[tableView:willDeselectRowAtIndexPath:](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006942-CH3-SW10)。

# facebook-apps - 为什么我的评论应用程序仅适用于某些 Blogger 帖子？

> ID：15732054
> 
> 赞同：1
> 
> 时间：2013-03-31T17:04:38.703
> 
> 标签：facebook-apps, blogger, facebook-comments

该应用程序运行良好……然后我将 Blogger 模板中的应用程序代码重新安装到 Blogger 评论框下方……现在只有一些页面有 Facebook 插件……不知道为什么。帮助？网站是 wwnrockport .com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T11:12:18.227

它可能有助于检查。[一起使用 Facebook Yahoo 和 Google+ 评论系统](http://mhskp786.blogspot.com/2013/11/enable-facebook-comments-without.html)

# java - Spring security - 在用户创建和登录时使用不同的 SALT

> ID：15732055
> 
> 赞同：0
> 
> 时间：2013-03-31T17:04:41.440
> 
> 标签：java, spring-security, spring-data-neo4j

我再次面临与 Spring Security 相同的问题：“密码与存储值不匹配”。

我在我的图表中导入了 4 个帐户（我正在使用 SpringData/Neo4J）和我的自定义`GraphPopulator`类，并尝试使用一个（“fbiville”/“s3cret”）登录。

认证配置如下：

```
<beans:bean id="encoder" class="org.springframework.security.crypto.password.StandardPasswordEncoder">
    <beans:constructor-arg value="******" />
</beans:bean>

<beans:bean id="userService" class="com.lateralthoughts.devinlove.service.LoginService" />

<authentication-manager>
    <authentication-provider user-service-ref="userService">
        <password-encoder ref="encoder" />
    </authentication-provider>
</authentication-manager> 
```

负责持久化帐户的类部分基于自定义的 SpringData 存储库实现：

```
class PersonRepositoryImpl implements PersonRepositoryCustom {

    private final PasswordEncoder passwordEncoder;
    private final Neo4jOperations template;

    @Autowired
    public PersonRepositoryImpl(PasswordEncoder passwordEncoder,
                            Neo4jOperations template) {

        this.passwordEncoder = passwordEncoder;
        this.template = template;
    }

    @Override
    @Transactional
    public void persist(Person person) {
        person.setPassword(passwordEncoder.encode(person.getPassword()));
        template.save(person);
    }
} 
```

最后，登录流程配置如下：

```
<http auto-config='true' use-expressions='true' realm="devinlove: love is just another algorithm">
    <form-login   login-page="/login"
                  default-target-url="/"
                  authentication-failure-url="/login" />
    <intercept-url pattern="/login" access="isAnonymous()" />
    <intercept-url pattern="/**" access="hasRole('USER')" />
</http> 
```

我在帐户创建和用户登录尝试时调试了 StandardPasswordEncoder，我注意到盐不匹配，这显然会导致身份验证错误。

如果您想重现问题，可以克隆[存储库。](https://github.com/LateralThoughts/DevInLove/tree/wip_spring_secu/sources)

提前致谢 ！

罗尔夫

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T09:42:08.603

您需要使用`org.springframework.security.authentication.encoding.PasswordEncoder`实现，而不是`org.springframework.security.crypto.password.PasswordEncoder`.

所以你可以简单地使用如下：

```
<authentication-manager>
    <authentication-provider user-service-ref="userService">
        <password-encoder hash="sha" base64="true">
            <!--Single salt - the very same as you are using in `encoder` instance-->
            <salt-source system-wide="********"/>
        </password-encoder>
    </authentication-provider>
</authentication-manager> 
```

请注意，这将与`@Autowired`属性一起正常工作，尽管不应该存在`@Qualifier`并且 bean 必须只表示一次。

它公开了此类接口的实现：`org.springframework.security.authentication.encoding.PasswordEncoder`和`org.springframework.security.authentication.dao.SaltSource`.

因此，在您的特定情况下，它如下所示：

```
class PersonRepositoryImpl implements PersonRepositoryCustom {

    private final PasswordEncoder passwordEncoder;
    private final Neo4jOperations template;

    @Autowired
    public PersonRepositoryImpl(PasswordEncoder passwordEncoder,
                                SaltSource saltSource
                                Neo4jOperations template) {

        this.passwordEncoder = passwordEncoder;
        this.saltSource = saltSource;
        this.template = template;
    }

    @Override
    @Transactional
    public void persist(Person person) {
        person.setPassword(passwordEncoder.encode(person.getPassword(), saltSource));
        template.save(person);
    }
} 
```

# ruby-on-rails - 有没有办法从 Rails 控制器获取路由范围

> ID：15732059
> 
> 赞同：0
> 
> 时间：2013-03-31T17:05:03.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以我在 Rails 中有一个多态控制器，我的问题是，有没有办法让我获得请求者的范围。例如，路线是`/users/1/messages`，请求转到`MessagesController`，在该控制器中，有没有办法获取`users`路线的一部分？或者在这种情况下，它也可能`admin`是其他东西。

我不能只设置一个 if 语句结构，因为在这种情况下，`POST '/users/1/messages' 是发送给用户的消息，可能来自管理员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:23:28.297

通常你应该放置一个类型字段（例如`messagable_type`），一个消息实例具有相应的类（例如`User`），并且 id 字段（例如`messagable_id`）将指向用户的 id。所以你可以问一个消息实例：

```
 message.messagable
 => user 
```

它将返回用户实例。

如果您有一个网址，例如：`/users/1/messages`并且您想使用它：

```
def load_messagable
  resource, id = request.path.split('/')[1,2]
  @messagable = resource.singularize.classify.constantize.find(id)
end 
```

这是 Ryan Bates 在本集中给出的解决方案：[http ://railscasts.com/episodes/154](http://railscasts.com/episodes/154)

# php - 在组合框 PHP 中打印关联数组

> ID：15732060
> 
> 赞同：-2
> 
> 时间：2013-03-31T17:05:08.597
> 
> 标签：php, mysql

我试图打印这个数组，但它不起作用……组合框是空的。如何在组合框中仅打印名称的属性，同时在选项值中获取 NumClient？

在我的数据库中是包含 30 条记录的客户表，然后我想获取 id(NumClient) 和 name(Name) 并将它们放在组合框中，但我只想打印 Name 和 id(NumClient) 并且我想将其添加到带有属性值的选项标签中，例如

```
<option value="$array["NumClient"]">$array["Name"]</option>
<option value="1">Layana</option> 
```

有任何想法吗？

```
<?php

$conn = mysql_connect("localhost", "root","") or die(mysql_error());
$db = mysql_select_db("bd_musique") or die(mysql_error());

$query="SELECT * from client";

$result = mysql_query($query) or die(mysql_error());

echo $query;

$array=array();

$i=0;
while ($rows = mysql_fetch_array($result)){
    $array=array($i,"NumClient"=>$rows["NumClient"], "Name"=>$rows["Name"]);
    $i++;
}

mysql_close($conn);

?>
 <select class="input-small" name="Client">
  <?php
    foreach($array as $b){
    print("<option value='$array[$b]['NumClient']'>".$array[$b]["Name"]."</option>"."  <br>");
    }           
   ?>
      /*    
       foreach($array as $cle=> $b){
       echo("<option value='$b'>".$cle.$b."</option>"."<br>");
        }
*/

</select> 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:20:46.033

为什么不这样，而不是拥有 3 个不同的数组，您可以使用循环来检索结果集

```
while ($rows = mysql_fetch_array($result)){
    $array[] = array(
       'NumClient' => $rows["NumClient"],
       'Name' => $rows["Name"]
    );
}

//Print output
print '<select'>;
foreach($array as $value) {
   print("<option value={$value['NumClient']}>{$value['Name']}</option>");
}
print '</select>'; 
```

这可以解决问题，在字符串 "" 中使用 {} 允许您打印对象/数组

**更新**

我做了一个本地测试，这是代码

```
$array[] = array(
   'NumClient' => 1,
   'Name' => 'Juan'
);

$array[] = array(
   'NumClient' => 2,
   'Name' => 'Luis'
);

$array[] = array(
   'NumClient' => 3,
   'Name' => 'Maria'
);

print '<select>';
foreach($array as $value) {
   print("<option value='{$value['NumClient']}'>{$value['Name']}</option>");
}
print '</select>'; 
```

这是实际输出！[Rendered combobox][1]

请确保，要查看您的数据源，也许您之前正在做其他事情

这是生成的图像 i.stack.imgur.com/ilL6y.png

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:13:44.940

这是解决方案，最后我做到了：

```
<?php
    $conn = mysql_connect("localhost", "root", "");
    mysql_select_db("dbmusique", $conn);

    $query = "SELECT * from client";
    $result = mysql_query($query, $conn) or die(mysql_error());
    $num= mysql_num_rows($result); 

    if ($num> 0) {
     while ($row = mysql_fetch_assoc($result)) {
        $array[] = array(
           'NumClient' => $row["NumClient"],
           'Name' => $row["Name"]
        );
     }
    }
    ?>  

<form name="form" action="next.php" method="get">
        <select name="numClient">
        <?php
        foreach($array as $value) {
          print("<option value=\"{$value['NumClient']}\">{$value['Name']}</option>");
        }
        ?>
        </select>
        <input type="submit" value="Send" />
</form> 
```

下一个.php：

```
<?php
$NumClient=$_GET["numClient"];
echo $NumClient;
?> 
```

# java - 在 Android 应用程序中包含一个 Jar

> ID：15732063
> 
> 赞同：0
> 
> 时间：2013-03-31T17:05:30.443
> 
> 标签：java, android, jar, import

我想在我的 Android 包中包含一个 jar。

不幸的是，我无法让它工作。我遵循了几个解释，例如[这个](https://stackoverflow.com/questions/7285306/setting-up-google-api-java-client-developing-environment/7370807#7370807)，但我仍然得到`NoClassDefFoundError`s - 在运行时，构建，编译，安装项目工作没有错误。

大多数答案似乎已经过时。如何使用当前的 Eclipse、ADT 和 Android 版本解决这个问题？像在普通 Java 项目中一样将它们添加到 Java 构建路径并没有帮助。

所有帮助表示赞赏。

我试过的

*   将它们放入一个文件夹并包含到项目中[[屏幕截图]](http://s14.directupload.net/images/130331/n3wenzv2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:56:41.927

你两件事，错误将得到修复

1.  右键单击项目->选择属性->转到Java构建路径->从顶部选择第三个选项卡，即“库”->单击添加Jar->选择您的Jar

2.  右键单击项目--> 选择属性--> 转到 Java 构建路径--> 从顶部选择第四个选项卡，即“订购和导出”--> 选择（检查框）你的 Jar。

如需更多帮助，请查看此[链接](http://mukeshyadav4u.blogspot.in/2012/06/noclassdeffounderror-after-updating-adt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:16:01.820

将你的 jars 添加到 libs 文件夹中。自动将这些 JAR 添加到您的编译时构建路径中。更重要的是，它将 JAR 的内容放入您的 APK 文件中，因此它们将成为您运行时构建路径的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:07:41.803

将 jar 放入名为“libs”的文件夹中（应该位于项目的根目录中。然后将其添加到 java 构建路径中。

如果这不起作用试试这个：

1.  您的项目 -> 右键单击​​ -> 导入 -> 文件系统 -> yourjar.jar
2.  您的项目 -> 右键单击​​ -> 属性 -> Java 构建路径 -> 库 -> 添加 Jar -> yourjar.ja

# xml - XSL：计算同名元素的值

> ID：15732065
> 
> 赞同：1
> 
> 时间：2013-03-31T17:05:34.050
> 
> 标签：xml, xslt, xslt-2.0

我是 XSL 的新手，希望能在处理如下结构的文件方面提供任何帮助：

```
<UniML>
<student>
    <name>Salvatore</name>
        <m value="1">
            <i value="17.5">Balliol College</i>
            <i value="3">Kellogg College</i>
            <i value="2.88">Balliol College</i>
            <i value="32.9">Kellogg College</i>
            <i value="15.75">Balliol College</i>
        </m>
        <m value="5">
            <i value="26.25">Kellogg College</i>
            <i value="8.75">Balliol College</i>
        </m>
</student>

<student>
    <name>Karl</name>
        <m value="1">
            <i value="10.5">Balliol College</i>
            <i value="4.7">Kellogg College</i>
            <i value="2.25">Balliol College</i>
            <i value="12.6">Kellogg College</i>
        </m>
        <m value="5">
            <i value="3.75">Kellogg College</i>
            <i value="1.25">Balliol College</i>
        </m>
</student>

<student>
    <name>Serenella</name>
        <m value="1">
            <i value="4">Kellogg College</i>
            <i value="3.84">Balliol College</i>
            <i value="14.100000000000001">Kellogg College</i>
            <i value="6.75">Balliol College</i>
        </m>
        <m value="5">
            <i value="20.25">Kellogg College</i>
            <i value="42.75">Balliol College</i>
            <i value="11.25">Kellogg College</i>
            <i value="3.75">Balliol College</i>
        </m>
</student> 
```

编辑：我想计算每个大学的每个学生 m1*(i1+i2+...)+m5*(i1+i2+...) 的总分，输出采用 XHTML 格式，结构如下：

Salvatore: Balliol 分数 = 1*(17.5+2.88+17.75)+5*(8.8.75), Kellogg 分数 = Karl: Balliol 分数 =, Kellogg 分数 =

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:35:12.170

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kIByVal" match="i" use="."/>

 <xsl:template match=
  "i[not(generate-id()=generate-id(key('kIByVal',.)[1]))]"/>

 <xsl:template match="i">
  <college name="{.}" total="{sum(key('kIByVal',.)/@value)}"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<student>
    <name>Salvatore</name>
    <m value="1">
    <i value="17.5">Balliol College</i>
    <i value="3">Kellogg College</i>
    <i value="2.88">Balliol College</i>
    </m>
</student> 
```

**产生了想要的正确结果：**

```
<college name="Balliol College" total="20.38"/>
<college name="Kellogg College" total="3"/> 
```

* * *

**二、如果您想保留文档的结构并仅“汇总” `<I>`s ：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kIByVal" match="i" use="."/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "i[not(generate-id()=generate-id(key('kIByVal',.)[1]))]"/>

 <xsl:template match="i">
  <i value="{sum(key('kIByVal',.)/@value)}"><xsl:apply-templates/></i>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会再次产生正确的结果**：

```
<student>
   <name>Salvatore</name>
   <m value="1">
      <i value="20.38">Balliol College</i>
      <i value="3">Kellogg College</i>
   </m>
</student> 
```

**说明**：

1.  使用**[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

2.  在第二个转换中覆盖**[身份规则。](http://www.dpawson.co.uk/xsl/sect2/identity.html)**

* * *

**更新**：

在评论中，OP 增加了一个新要求：每所大学必须有 per/student 值，并且每个对应的值`i`必须乘以“权重”——其 parent 的值`m`。

**这是一个 XSLT 2.0 解决方案——它比两遍 XSLT 1.0 解决方案更容易编写**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kIByVal" match="i" use="."/>
 <xsl:key name="kStudentByCollege" match="student"
  use="m/i"/>
 <xsl:key name="kCollegePerStudentPerM" match="i"
  use="concat(generate-id(../..),'+',generate-id(..),'+',.)"/>

 <xsl:template match=
  "i[not(generate-id()=generate-id(key('kIByVal',.)[1]))]"/>

 <xsl:template match="i">
  <college name="{.}">
   <xsl:apply-templates mode="college" select=
    "key('kStudentByCollege', .)">
    <xsl:with-param name="pCollegeName" select="."/>
   </xsl:apply-templates>
  </college>
 </xsl:template>

 <xsl:template match="student" mode="college">
  <xsl:param name="pCollegeName"/>

  <student name="{name}">
    <xsl:sequence select=
     "sum(m/(@value*sum(key('kCollegePerStudentPerM',
                            concat(generate-id(..),'+',
                                   generate-id(.),'+',$pCollegeName)
                            )/@value
                         )
             )
          )"/>
  </student>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于新提供的 XML 文档时：**

```
<UniML>
    <student>
        <name>Salvatore</name>
        <m value="1">
            <i value="17.5">Balliol College</i>
            <i value="3">Kellogg College</i>
            <i value="2.88">Balliol College</i>
            <i value="32.9">Kellogg College</i>
            <i value="15.75">Balliol College</i>
        </m>
        <m value="5">
            <i value="26.25">Kellogg College</i>
            <i value="8.75">Balliol College</i>
        </m>
    </student>
    <student>
        <name>Karl</name>
        <m value="1">
            <i value="10.5">Balliol College</i>
            <i value="4.7">Kellogg College</i>
            <i value="2.25">Balliol College</i>
            <i value="12.6">Kellogg College</i>
        </m>
        <m value="5">
            <i value="3.75">Kellogg College</i>
            <i value="1.25">Balliol College</i>
        </m>
    </student>
    <student>
        <name>Serenella</name>
        <m value="1">
            <i value="4">Kellogg College</i>
            <i value="3.84">Balliol College</i>
            <i value="14.100000000000001">Kellogg College</i>
            <i value="6.75">Balliol College</i>
        </m>
        <m value="5">
            <i value="20.25">Kellogg College</i>
            <i value="42.75">Balliol College</i>
            <i value="11.25">Kellogg College</i>
            <i value="3.75">Balliol College</i>
        </m>
    </student>
</UniML> 
```

**产生了想要的正确结果：**

```
<college name="Balliol College">
   <student name="Salvatore">79.88</student>
   <student name="Karl">19</student>
   <student name="Serenella">243.09</student>
</college>
<college name="Kellogg College">
   <student name="Salvatore">167.15</student>
   <student name="Karl">36.05</student>
   <student name="Serenella">175.6</student>
</college> 
```

# javascript - html里动画

> ID：15732066
> 
> 赞同：2
> 
> 时间：2013-03-31T17:05:36.677
> 
> 标签：javascript, jquery, html, frameworks

我想复制我在最近的网页模板中看到的效果（[这里](http://livedemo00.template-help.com/wt_43437/#!/page_find)是链接）。在此模板中，当您单击菜单栏上的链接时，它的内容会出现在某种背景位置变化中。有没有什么框架可以做这些模板？他们是怎么做的，有什么参考吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:30:43.140

我认为他们使用这个插件：

[http://keith-wood.name/backgroundPos.html](http://keith-wood.name/backgroundPos.html)

查看他们页面的来源可以发现：

```
include('js/jquery.easing.js');
include('js/jquery.backgroundpos.min.js');
include('js/superfish.js');
include('js/switcher.js');
include('js/forms.js');
include('js/googleMap.js');
include('js/jquery.mousewheel.js');
include('js/uScroll.js');
include('js/jquery.color.js');
include('js/jquery.cycle.all.min.js');
include("js/preloadIMG.js");
include('js/MathUtils.js');
include('js/jquery.transform-0.9.3.min.js');
include('js/bg.js'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:40:35.290

回答你的第二个问题他们是如何做到的？

在 chrome 中，如果您检查任何菜单元素，您将看到它们在“li”元素中使用了两个“div”，它们具有不同的 css，当您移动鼠标时，它们会更改 div 的位置（顶部属性在样式）。我有这个小提琴中行为的示例实现。虽然我不确定他们使用的是哪个插件。我会试着找出来

[http://jsfiddle.net/CQs7Q/1/](http://jsfiddle.net/CQs7Q/1/)

的HTML

```
<ul>
    <li>
        <div class="first">Settings</div>
        <div class="second">Settings</div>
    </li>
</ul> 
```

Javascript

```
$(function() {
    $("li div.first").mouseover(function() {
        $(this).animate({"top":-20})
        $(this).next(".second").animate({"top":-20})
        //$(this).css("top","-20px").next(".second").css("top","-20px");
    })
    $("li div.second").mouseout(function() {
        $(this).animate({"top":0})
        $(this).prev(".first").animate({"top":0})

    })
}) 
```

CSS

```
ul {
    width:100%;
    background-color:black;
    color:white;
    list-style:none;
    height:20px;
}

ul li {
    display:inline-block;
    width:100px;
    height:20px;
    overflow:hidden;
    position:relative;
}
ul li div {
    position:relative;
    height:20px;
}
ul li div.first {
    background-color:red;
    color:white;
} 
```

希望能帮助到你 ！

# css - 适配 CSS 滑出面板示例

> ID：15732068
> 
> 赞同：1
> 
> 时间：2013-03-31T17:05:44.620
> 
> 标签：css

我正在尝试从[这里](http://css-tricks.com/off-canvas-menu-with-css-target/)改编一个出色的滑出式面板示例。

改编代码在[这里](http://codepen.io/jetpacmonkey/pen/ktIJz)

我喜欢为隐藏/展开状态设置不同的图标（例如隐藏时的 >，展开时的 <）。是否可以通过更改上面的代码。最终我可能会使用[Font-Awesome 的图标](http://fortawesome.github.com/Font-Awesome/#)

谢谢。

## 编辑：

为了清楚地了解原始版本的更改，我计划使用的代码不使用相同的标记。这是为了避免妨碍历史。请使用版本[http://codepen.io/jetpacmonkey/pen/ktIJz](http://codepen.io/jetpacmonkey/pen/ktIJz)

```
<header class="main-header">
    <label for="main-nav-check" class="toggle-menu">
      ☰
    </label>

    <h1>cssPanelMenu</h1>
  </header> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:10:54.940

您可以使用伪元素 (IE8+)。将图标替换为`span`with 类`.icon`，然后`:before`根据复选框是否选中来连接样式以显示内容。

[演示](http://codepen.io/Tyriar/pen/nJGfj)

**HTML**

```
<label for="main-nav-check" class="toggle-menu">
  <span class="icon"></span>
</label> 
```

**CSS**

```
#main-nav-check:checked ~ .page-wrap .icon:before {
  content:"<";
}

#main-nav-check ~ .page-wrap .icon:before {
  content:">";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:09:25.770

只是改变：

```
<a href="#main-nav" class="open-menu">
  ☰
</a>
<a href="#" class="close-menu">
  ☰
</a> 
```

对此：

```
<a href="#main-nav" class="open-menu">
  >
</a>
<a href="#" class="close-menu">
  <
</a> 
```

演示：[http ://codepen.io/anon/pen/nImtd](http://codepen.io/anon/pen/nImtd)

# knockout.js - 下拉列表中填充了 Breeze 枚举（服务器端）提供的选项

> ID：15732072
> 
> 赞同：9
> 
> 时间：2013-03-31T17:06:08.477
> 
> 标签：knockout.js, breeze, durandal

我用 durandal/breeze 开发了一个 asp.net mvc 解决方案。

我有一个下拉列表，其中列表是从 Entity Framework Code First 提供的枚举中填充的。这是模型服务器端：

```
public enum EnumCategory
{
    Cat1,
    Cat2,
    Cat3,
    Cat4
} 
```

这是使用此枚举的表：

```
public class Transport
{
    [Key]
    public int Id { get; set; }
    public EnumCategory Category { get; set; }
    ...
} 
```

**我的问题：**如何检索枚举服务器端的这些值以便能够填充我的下拉客户端？我是否必须像这样在客户端手动创建一个新数组：

```
 var categories = [
    { id: '' , description: '' },
    { id: 'Cat1', description: 'Category 1' },
    { id: 'Cat2', description: 'Category 2' },
    { id: 'Cat3', description: 'Category 3' },
    { id: 'Cat4', description: 'Category 4' }]; 
```

我的视图显示这个下拉列表是这样的：

```
<select data-bind="options: $root.categories,
                   optionsText: 'description',
                   optionsValue: 'id',
                   value: category,
                   validationOptions: { errorElementClass: 'input-validation-error' },
                   valueUpdate: 'afterkeydown'">
 </select> 
```

对我来说，必须重新创建客户端的值列表似乎是多余的，因为我们已经拥有服务器端的值列表。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:45:01.927

你是对的，对于服务器上定义的枚举，必须在客户端重复枚举定义是多余的。理想情况下，微风元数据应该包括构成 Enum 类型的各个枚举值。

不幸的是，我们还没有到达那里。但这是一个非常合理的功能。您能否将其添加到[微风用户语音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)中。我们非常重视这些建议，以决定接下来要开发哪些功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:10:05.683

这是您可以考虑的一个选项，尽管它根本不使用 Breeze :-(，我还没有采用 Breeze，所以不确定它如何在这里帮助我们。

此示例使用标准 WebAPI 控制器将时区列表填充到淘汰 V/VM 上的下拉列表中。

控制器：

```
public class LookupController : ApiController
{
    public IEnumerable GetTimezones()
    {
        return TimeZoneInfo.GetSystemTimeZones().Select(tz => new {tz.Id, tz.DisplayName}).ToArray();
    } 
} 
```

控制器的输出（抱歉格式化，但它基本上是 Id、Name 对，很像您的类别列表）：

> [{ Id: "Dateline Standard Time", DisplayName: "(UTC-12:00) International Date Line West" }, { Id: "UTC-11", DisplayName: "(UTC-11:00) Co-ordinated Universal Time-11" }, { Id: "夏威夷标准时间", DisplayName: "(UTC-10:00) Hawaii" }, { Id: "阿拉斯加标准时间", DisplayName: "(UTC-09:00) Alaska" }, { Id: "太平洋标准时间 (墨西哥)", DisplayName: "(UTC-08:00) Baja California" }, { Id: "太平洋标准时间", DisplayName: "(UTC-08:00) 太平洋时间（美国和加拿大）“}，{ ID：“美国山区标准时间”，显示名称：“（UTC-07:00）亚利桑那州”}，....等

来自视图模型的片段：

```
$.ajax({
        url: '/api/lookup/timezones',
        context: this
    }).done(function(result) {
        // load timezones
        timezones(result); // timezones is a ko.observableArray
        // set the default time zone
        timezone('Eastern Standard Time'); // timezone is a ko.observable
    }); 
```

风景：

```
<select class="span6" data-bind="options: timezones, optionsText: 'DisplayName', optionsValue: 'Id', value: timezone"></select> 
```

这给了我一个由服务器对象填充的表单的下拉列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T17:30:21.227

同时，作为一种解决方法，您可以从元数据中创建全局“枚举”，如下所示：

```
manager.fetchMetadata()
    .then(function (data) {

        // extract all enums als global objects
        ko.utils.arrayForEach(data.schema.enumType, function (c) {
            window[c.name] = {};
            ko.utils.arrayForEach(c.member, function (m) {
                window[c.name][m.name] = m.value;
            });
        });

}); 
```

因此，如果您有一个名为“Status”的枚举，您现在将拥有一个可以调用的全局对象：

```
var currentStatus = Status.Done; //returns the value as defined in the server side enum 
```

然后这些也可以绑定到下拉列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T03:37:23.743

使用@JohnPapa 的 SPA 课程中的一些概念，您能否在 Breeze 控制器上公开操作，如下所示：

```
[HttpGet]
    public object Categories()
    {
        var categories =  Enum.GetNames(typeof(EnumCategory)
        return categories;
    } 
```

*编辑：意识到我使用了 GetValues（它将返回 int 值）而不是 GetNames

然后在您的视图模型（或数据上下文服务）中：

```
var categories = EntityQuery.from('Categories')
           .using(manager).execute() 
```

# asp.net-mvc - 捕获对内容文件夹中文件的请求以使用控制器操作进行处理

> ID：15732073
> 
> 赞同：2
> 
> 时间：2013-03-31T17:06:13.773
> 
> 标签：asp.net-mvc

我有一个必须使用的第三方小部件库。这个库有一个硬编码的文件字符串。是否可以通过路由拦截此请求？我的尝试看起来像这样：

```
routes.MapRoute(name: "ribbonbar",
                url: "Content/Ribbon/Scripts/Ribbon.Tabs.foo",
                defaults: new { controller = "Ribbon", action = "Index" }); 
```

但我只有一个 404。这是不可能的还是我弄混了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T17:09:49.307

是的，这是可能的。您需要将以下处理程序添加到您的 web.config 以确保此请求通过托管管道和您的路由：

```
<system.webServer>
    <handlers>
        ...
        <add 
            name="MyCustomhandler" 
            path="Content/Ribbon/Scripts/Ribbon.Tabs.foo" 
            verb="GET" 
            type="System.Web.Handlers.TransferRequestHandler" 
            preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
</system.webServer> 
```

然后您可以使用以下控制器操作来处理此请求：

```
public class RibbonController
{
    // GET Content/Ribbon/Scripts/Ribbon.Tabs.foo
    public ActionResult Index()
    {
        var file = Server.MapPath("~/App_Data/foo.bar");
        return File(file, "application/foo-bar");
    }
} 
```

您还可以为`Content/Ribbon/Scripts/*`来自同一控制器操作的所有请求提供服务：

```
<system.webServer>
    <handlers>
        ...
        <add 
            name="MyCustomhandler" 
            path="Content/Ribbon/Scripts/*" 
            verb="GET" 
            type="System.Web.Handlers.TransferRequestHandler" 
            preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
</system.webServer> 
```

和这样的路线：

```
routes.MapRoute(
    name: "ribbonbar",
    url: "Content/Ribbon/Scripts/{name}",
    defaults: new { controller = "Ribbon", action = "Index" }
); 
```

用这样的动作：

```
public class RibbonController
{
    // GET Content/Ribbon/Scripts/*
    public ActionResult Index(string name)
    {
        ...
    }
} 
```

除了使用特定的处理程序，您还可以为所有请求启用托管模块，如下所示：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    ...
</system.webServer> 
```

但我不建议您启用此选项，因为现在所有请求都将通过托管管道，即使是来自可能对应用程序性能产生负面影响的静态资源的请求。最好只为选定的 url 选择性地启用此功能。

# ios - UIImageView 逐步加载图像

> ID：15732077
> 
> 赞同：0
> 
> 时间：2013-03-31T17:06:23.117
> 
> 标签：ios, uiimageview, uiimage

我想要的最终效果，是这样的。随着设备从服务器接收数据，图像逐渐加载

![渐进式加载效果](https://i.stack.imgur.com/OJr72.gif)

目前我正在做这样的事情

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [overallData appendData:data];
    self.imageView.image = [UIImage imageWithData:overallData];
} 
```

这是有效的，但它会消耗所有的内存，触发器`MemoryWarning`和应用程序有时会崩溃。更不用说`<Error>: ImageIO: JPEG Corrupt JPEG data: premature end of data segment`每次运行上面的代码时都会显示这个错误，但我认为这不是一个大问题。

有人对优化有更好的想法吗？否则我将不得不删除这个效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:25:21.017

我认为您在表格视图缩略图中使用相同的大图像，您最好将图像下载为在 NScache 中保存数据，将图像裁剪为表格视图中的缩略图显示，在完整图像视图中不要裁剪仅显示完整图像缓存内存，

如果您在表格视图中使用全尺寸图像，应用程序将消耗大量内存

# ruby-on-rails - 我应该如何实现 Invoice 模型？

> ID：15732079
> 
> 赞同：0
> 
> 时间：2013-03-31T17:06:41.860
> 
> 标签：ruby-on-rails

我正在制作一个发票应用程序。最明显的模型是 Invoice，它有 date、client_id、user_id 等。然而，Invoice 可以有一个或多个行项目，它们加起来就是总发票金额。每个行项目都有描述、费率和数量。创建另一个模型“LineItem”是否有意义，或者是否有更简单的方法将所有内容保留在 Invoice 模型中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:10:55.940

为了规范您的数据库表，您需要有两个不同的表，如您所说。否则它将不符合关系数据库的规范化规则，您可以查看信息[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization) .

因此，使用两个表：Invoice 和 LineItem。并且您需要在 LineItem 表中放置一个外键，引用 Invoice 表 Id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:14:36.473

我肯定会实现一个 InvoiceItem 模型。Items 是程序中的一种对象，可以进行操作，因此最好将它们分开到另一个表中。

```
class Invoice << ActiveRecord::Base
  has_many :invoice_items
end

class InvoiceItem << ActiveRecord::Base
  belongs_to :invoice
end 
```

然后确保 InvoiceItem 有一个“invoice_id”字段

# php - 无法选择表.. php & mysql

> ID：15732080
> 
> 赞同：-2
> 
> 时间：2013-03-31T17:06:46.437
> 
> 标签：php, mysql

我创建了一个表格，当填写表格后点击提交按钮时，这些详细信息应插入 DB TABLE。但是我知道代码有什么问题，它正在回显“无法选择表”。我的代码如下：

```
<?php

if ( isset ( $_POST['submit'] ) ) 
{
mysql_connect("localhost","root","1234");
mysql_select_db("my_db")or die( "Unable to select database</span></p>");

$name1 = $_POST['name1'];
$email = $_POST['email'];
$password = $_POST['password'];
$confirmpassword = $_POST['confirmpassword'];
$gender = $_POST['gender'];
$place = $_POST['place'];
$college = $_POST['college'];

$result=MYSQL_QUERY("INSERT INTO USERS3 (id,name1,email,password,confirmpassword,gender,college,place)".
"VALUES ('NULL', '$name1', '$email', '$password', '$confirmpassword', '$gender', '$place', '$college')")or die( "<p><span style=\"color: red;\">Unable to select table</span></p>");
mysql_close();

echo "<p><span style=\"color: red;\">Thank You;</span></p>"; 
}

else
{
// close php so we can put in our code
?>

<form id="form1" action="" method="post">
Name:
<input type="text" name="name1" /><br/>
E-mail:
<input type="text" name="email" /><br/>
Password:
<input type="password" name="password" /><br/>
Confirm Password:
<input type="password" name="confirmpassword" /><br/>
Gender:
<input type="radio" name="gender" />
Male
<input type="radio" name="gender" />
Female
<br/>
Location:
<input type="text" name="place" /><br/>
College:
<input type="text" name="college" /><br/>
<input id="submit1" class="submit" type="submit" name="submit" value="Submit"/><br/>
<input type="reset" value="reset" />
</form>

<?php
} //close the else statement
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:15:45.463

如果 'id' 是一个自动增量字段，你不应该为它传递任何值——数据库会处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:17:04.140

一切看起来都很好。唯一的问题可能是：

表名可能不正确。特别是，我怀疑您正确的表名`users3`不是 `USERS3`.

理想的检查方法是：

**在$result=**之前添加以下语句......

```
echo "INSERT INTO USERS3 (id,name1,email,password,confirmpassword,gender,college,place)".
"VALUES ('NULL', '$name1', '$email', '$password', '$confirmpassword', '$gender', '$place', '$college')"; 
```

**运行/加载**页面。

无论是打印的 -**复制它**。

转到**phpmyadmin**并选择**SQL** Tab。粘贴您在上一步中复制的内容并运行它。

phpmyadmin 将显示确切的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:13:29.780

PHP 不识别带有大写字母的函数。使用小写字符：

```
mysql_query( "INSERT INTO USERS3 ( id, name1, email, 
        `password`, confirmpassword, gender, college, place)
    VALUES ('NULL', '$name1', '$email', 
        '$password', '$confirmpassword', '$gender', '$place', 
        '$college')") or die( "<p><span style=\"color: red;\">Unable to select table</span></p>");
mysql_close(); 
```

# php - 无法查看包含 XML 作为值的已解析 JSON 文件中的内容

> ID：15732081
> 
> 赞同：0
> 
> 时间：2013-03-31T17:06:49.497
> 
> 标签：php, xml, json

我有一个这样的 JSON 文件：

**测试.json**

```
{
    "barcode": {
        "message": "<?xml version=\"1.0\" encoding = \"utf-8?\"><PrintLetterBarcodeData name=\"ABCD \" gender=\"FEMALE\" yob=\"1964\"/>",
        "format": "PKBarcodeFormatQR",
        "messageEncoding": "iso-8859-1"
    }
} 
```

和这样的 PHP 文件：

**测试.php**

```
<?php

$JSON = file_get_contents('test.json');
$json_object = json_decode($JSON);
print_r($json_object);

?> 
```

我正在尝试读取“条形码”下键“消息”的值。我得到一个空字符串。这是我打印对象时得到的结果。

> stdClass 对象 ( [barcode] => stdClass 对象 ( [message] => [format] => PKBarcodeFormatQR [messageEncoding] => iso-8859-1 ) )

JSON 很好，消息有 XML 内容。我需要阅读 PHP 中的 XML 内容。请让我知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:44:52.457

引用对象中的消息可以正常工作：

```
echo $json->barcode->message; 
```

不过，阅读您的问题，我认为您并没有明确说明您的问题是什么。如果您在 PHP 中读取 XML 对象时遇到问题，那是因为您的 XML 无效。声明中有一个错字 - 请参阅下面的前后：

```
<?xml version=\"1.0\" encoding = \"utf-8?\">
<?xml version=\"1.0\" encoding = \"utf-8?\"?>
                                           ^
                                           Missing character 
```

为了完整性...然后您可以简单地使用[`simplexml_load_string`](http://php.net/manual/en/function.simplexml-load-string.php)将消息对象解析为 PHP 变量并引用属性，如下所示：

```
$json = json_decode($json);
$xml = simplexml_load_string($json->barcode->message);
echo $xml['name'].' '. $xml['gender'].' '. $xml['yob']; 
```

[工作示例](http://ideone.com/OkuVSt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:11:14.363

这是您在 json_decode 中使用第二个可选参数的地方：http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

```
<?php

$JSON = file_get_contents('test.json');
$json_object = json_decode($JSON, true);
print_r($json_object);
echo $json_object['barcode']['message'];

?> 
```

# ios - 在 OpenGL ES 中绘制一个非常高分辨率的纹理对象（球体）

> ID：15732082
> 
> 赞同：10
> 
> 时间：2013-03-31T17:06:52.980
> 
> 标签：ios, opengl-es

我在 OpenGL ES 中绘制行星，并遇到了一些有趣的性能问题。一般的问题是：如何最好地在球体上渲染“非常详细”的纹理？

（保证球体；我对特定于球体的优化感兴趣）

基本情况：

*   窗口约为。2048 x 1536（例如 iPad3）
*   地球的纹理贴图为 24,000 x 12,000 像素（美国一半大小的区域适合屏幕的整个宽度）
*   地球仪显示在从放大（美国填充屏幕）到缩小（整个地球可见）的所有位置
*   我需要至少 3 个纹理层（1 个用于行星表面，1 个用于昼夜差异，1 个用于用户界面（突出不同区域）
*   一些图层是动画的（即它们必须在运行时快速加载和删除它们的纹理）

限制：

*   高端平板电脑仅限于 4096x4096 纹理
*   高端平板电脑仅限于 8 个同时纹理单元

问题：

*   总共是 5 亿像素的纹理数据
*   分割成更小的纹理效果不好，因为设备只有 8 个单元；只有一个纹理层，我可以分成 8 个纹理单元，所有纹理都小于 4096x4096 - 但只允许一个层
*   将图层渲染为单独的几何体效果不佳，因为它们需要使用片段着色器进行混合

...目前，我唯一听起来可行的想法是：

1.  将球体拆分为 NxM“球体”并将每个球体渲染为单独的几何体
2.  缩小时使用 mipmap 渲染低分辨率纹理
3.  ...在放大时依靠简单的剔除来切除大部分，并且在无法剔除时使用 mipmapping 使用较小的（呃）纹理

...但似乎应该有更简单的方法/更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:51:01.603

似乎没有办法将如此巨大的纹理放入移动 GPU 的内存中，即使在 iPad 3 中也是如此。

所以你必须流式传输纹理数据。你需要的东西叫做*clipmap*（由具有扩展megatexture技术的id软件普及）。

请在此处阅读有关此内容，有描述技术的文档的链接：[http ://en.wikipedia.org/wiki/Clipmap](http://en.wikipedia.org/wiki/Clipmap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T08:53:07.510

这在 ES 中不容易做到，因为还没有虚拟纹理扩展。您基本上需要实现虚拟纹理（一些 ES 设备实现 ARB_texture_array）并以尽可能低的分辨率（取决于视图）为您的球体流式传输。这样，可以在片段着色器中完成所有操作，不需要几何细分。有关如何实施的详细信息，请参阅[此演示文稿（和论文）。](http://mrelusive.com/publications/presentations/2012_siggraph/Virtual_Texturing_in_Software_and_Hardware_final.pdf)

如果您进行数学计算，则根本不可能实时流式传输 1 GB（24,000 x 12,000 像素 x 4 B）。这也是一种浪费，因为用户永远无法同时看到所有内容。

# c# - 搜索有缺陷的错误处理结构（正则表达式、解析器等）的有效方法

> ID：15732083
> 
> 赞同：1
> 
> 时间：2013-03-31T17:06:55.980
> 
> 标签：c#, regex, parsing, exception-handling, error-handling

我想搜索数以千计的 c# 代码文件，以找到任何损坏的块，其中异常可能被隐藏起来并被简单地消灭。我需要一些能够找到与此类似的结构的正则表达式：

```
catch{}, catch(Exception e){}, try{}finally{}, ... 
```

...包括换行符、多余的空格等。

`catch`对不包含例如“ *log* ”短语（可能表示任何类型的日志记录尝试）的语句的进一步分析将更有帮助 - 可能会揭示更多令人不安的地方：

```
catch(Exception){
    var x = ..
    // some other code without "log" phrase, which could indicate any error logging
} 
```

问候

# ruby-on-rails-3 - 为所有用户重置“记住我”cookie

> ID：15732092
> 
> 赞同：1
> 
> 时间：2013-03-31T17:08:18.747
> 
> 标签：ruby-on-rails-3, devise

在我的 Rails 应用程序上，我想强制所有用户在下次访问该站点时登录，而不是被记住。我知道我必须删除一个 cookie，但要删除哪个以及如何执行此操作？

我正在使用 rails 3.2 并设计 2.2.1。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:54:59.290

使用设计`sign_out`函数，并在您的应用程序控制器中构建一个私有方法，在发出请求时强制它。在你的`ApplicationController`

```
class ApplicationController < ActionController::Base

  before_filter :force_sign_out!

  private # avoid interference

  def force_sign_out!
    if user_signed_in?
       sign_out(current_user)
    end
  end
end 
```

你甚至可以在你的`before_filter`

```
before_filter do
  if # conditions
    force_sign_out!
  end
end 
```

希望这可以帮助！

-布赖恩

# python - plone4.2.5 ubuntu12.10 64bit “错误：root：未找到哈希 sha512 的代码。”

> ID：15732093
> 
> 赞同：1
> 
> 时间：2013-03-31T17:08:27.540
> 
> 标签：python, ubuntu-12.10, hashlib

我正在尝试在 Ubuntu 12.10 64 位机器上安装 Plone 4.2.5。但是得到：

> “错误：root：找不到哈希 sha512 的代码。”，带有“./install.sh 独立”

# 错误日志

```
$ ./install.sh standalone
Stand-Alone Zope Instance selected

Detailed installation log being written to /home/criticalboot/Downloads/Plone-4.2.5-UnifiedInstaller/install.log

Rootless install method chosen. Will install for use by system user criticalboot

Installing Plone 4.2.5 at /home/criticalboot/Plone

Python found at /home/criticalboot/Plone/Python-2.7/bin/python; Skipping Python install.
Found existing buildout cache at /home/criticalboot/Plone/buildout-cache; skipping step.
Generating random password ...

ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/home/criticalboot/Plone/Python-2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/criticalboot/Plone/Python-2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/home/criticalboot/Plone/Python-2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/criticalboot/Plone/Python-2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/home/criticalboot/Plone/Python-2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/criticalboot/Plone/Python-2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/home/criticalboot/Plone/Python-2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/criticalboot/Plone/Python-2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha512 
```

# html - $_GET textarea 丢失 HTML 字符

> ID：15732096
> 
> 赞同：0
> 
> 时间：2013-03-31T17:08:46.110
> 
> 标签：html, forms, get

这可能是一个非常简单的问题，但我无法在任何地方找到答案！

我有一个带有这样的 textarea 字段的自我提交表单

```
<textarea name="desc" wrap="1" cols="64" rows="5"></textarea> 
```

当我在 textarea 字段中输入 HTML 字符并点击提交按钮时，HTML 字符被剥离，我看不到它在做什么！

$_GET 变量的 HTML 会自动剥离吗？

例如，如果我在文本区域中输入“[strong]Just[/strong] a test”，并像这样回显“desc”的内容

```
echo(print_r($_GET)); 
```

我看到 $_GET['desc'] 包含 'Just a test' 而不是 '[strong]Just[/strong] a test'。

这是正常的吗？如果是这样，有没有办法保留 HTML，以便我可以将其存储在数据库中？

我在我的代码中使用角括号'<>'而不是方括号'[]'，但是如果我在这里使用它们，这个论坛会转换它们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:16:18.340

使用 CDATA

> `A CDATA section starts with "<![CDATA[" and ends with "]]>"`

来源：[http ://www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:18:33.850

你也在哪里打印数据？网络将解析 html，如果您不查看页面源代码，您只会看到非 html 部分。

但是，您应该使用`print html_entities($_GET['desc'])`正确编码的 html 内容打印出内容，以便打印而不是解析。

# java - 访问同一个文件

> ID：15732097
> 
> 赞同：0
> 
> 时间：2013-03-31T17:08:57.647
> 
> 标签：java, javascript, jquery

我有一种情况，我使用 java 以编程方式写入文本文件，同时我使用 jQuery 从同一个文件中读取。

我面临的问题是，只要通过 java 将内容写入文本文件，jQuery 就无法找到更新的内容。

我用谷歌搜索了很多，但我发现的唯一结果是针对 java 和 java 处理，而不是针对 java 和 javascript（即客户端和服务器端）

我不确定这是否可能。

更多关于这个问题：

我使用 java 将爬取结果写入文件，并尝试使用 javascript（jQuery.post() 方法）显示相同的结果。

**JAVA**

一个多线程的爬虫程序，它爬取一个网站并执行一些功能。我正在尝试使用与爬行发生时相同的 java 程序将一些内容写入文本文件。我写的内容主要是关于正在调用哪个线程以及正在爬取的当前链接是什么的详细信息。

我在文本文件中写这个的原因是我需要在 UI 中显示输出，以便查看 UI 的人会理解发生了什么。

写作按预期完美地发生。

**JAVASCRIPT (jQuery)**

这使用

```
jQuery.get or post ("sample.txt", function (result) {
                  $("#someID").html(result);
                  }); 
```

它通常从文本文件中读取，但是当 java 和 javascript 都试图访问文件时，是 java 占主导地位，将 javascript 抛在后面，因此 jQuery 无法在更新内容发生时获取更新的内容。

我想这个解释足以让人们理解我的问题到底是什么！

总的来说，java 和 javascript 试图同时访问同一个文件。于是就出现了这个问题。

任何帮助表示赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:42:02.177

我认为该文件已缓存。最简单的事情是通过不同的 url 请求文件。尝试类似的东西`"sample.txt?rnd="+Math.rand()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:44:07.330

可能存在同步问题，您的数据将被损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:00:16.480

我有一个问题，是否必须使用 Ajax 来完成？我想你正试图弄清楚

[阿贾克斯推拉](http://swerl.tudelft.nl/twiki/pub/Main/TechnicalReports/TUD-SERG-2007-016.pdf)

这不是很容易做到，我不会真的推荐它。但是，有一种更好的技术叫做[websocket](http://www.html5rocks.com/en/tutorials/websockets/basics/)。所以你可以做的是，客户端可以向服务器提交请求以将数据写入文件，然后服务器可以将更新的内容发送回客户端。此外，这比通过大量 HTTP 请求实现相同目标要好得多。

此外，如果您想要跨浏览器兼容性，请查看[http://socket.io/](http://socket.io/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:01:05.157

感谢所有试图帮助我的人。我终于想出了一个解决方案。我不是使用 jquery post 直接从文件中读取，而是使用另一个 jsp 文件来读取文件内容并在屏幕上使用 out.println 打印，然后我使用 jQuery post 来获取该 jsp 文件写入的内容。因此避免了同步问题。

这里有更多关于我的解释：

早些时候我有

```
java program -> Text File <- javascript (jQuery post) // Resulted in synchronization problem where in javascript was not able to access the updated content. 
```

现在

```
java program -> Text file <- JSP file <- javascript (jQuery post) // Avoided the synchronization problem as that file is accessed by the same server side language. After that jQuery reads the content printed by JSP page. 
```

经过多次更改，终于想出了一个很好的工作解决方案。

谢谢大家。

# git - 在 SVN 和 Git 中的分支之间切换

> ID：15732099
> 
> 赞同：0
> 
> 时间：2013-03-31T17:09:01.227
> 
> 标签：git, svn, version-control, branching-and-merging

在 SVN（或 Git）中，假设您位于通过签出分支 A 创建的工作副本目录中。现在，我需要工作并提交到分支 B。

在 SVN 中，我可以使用`svn switch B`and 在 Git 中，我可以使用`git checkout B`来切换到分支 B。

但是，我总是害怕这种切换操作；所以，我最终创建了一个新的工作副本，当我需要在许多分支上工作时，我最终会得到许多过时的工作目录。

我的问题是在不同分支之间切换相同的工作副本是否完全安全。SVN 或 Git 是否保留了属于另一个分支的任何文件，或者他们真的清理并切换到新分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:48:08.960

分支之间的切换是安全的操作。我只看到一个问题：如果您的工作副本中有很多修改过的文件。您可能需要执行合并，否则您修改的文件将被删除。因此，如果您有很多修改过的文件，最好在新文件夹中签出新的早午餐。

# python - 使用 @permalink 和 get_absolute_url() 时的 NoReverseMatch

> ID：15732100
> 
> 赞同：2
> 
> 时间：2013-03-31T17:09:08.620
> 
> 标签：python, django

我知道这似乎是许多解决方案的常见问题，但即使在尝试了我遇到的每个解决方案之后，我仍然遇到这个问题。

楷模：

```
class Category(models.Model):
name = models.CharField(max_length=50)
slug = models.SlugField(max_length=50, unique=True,
                        help_text='Unique value for product page URL, created form name.')
description = models.TextField()
is_active = models.BooleanField(default=True)
meta_keywords = models.CharField("Meta Keywords",max_length=255, 
                                 help_text='Comma-delimited set of SEO keywords for meta tag')
meta_description = models.CharField("Meta Description", max_length=255,
                                    help_text='Content for description meta tag')
created_at = models.DateTimeField(auto_now_add=True)
updated_at = models.DateTimeField(auto_now=True)

class Meta:
    db_table = 'categories'
    ordering = ['name']
    verbose_name_plural = 'Categories'

def __unicode__(self):
    return self.name

@models.permalink
def get_absolute_url(self):
    #return ('catalog.views.show_category',(),{'category_slug' : str(self.slug)})
    return ('catalog_category', (), { 'category_slug' : str(self.slug) }) 
```

意见：

```
def index(request, template_name="catalog/index.html"):
    page_title = 'Anime and Manga'
    return render_to_response(template_name, locals(), context_instance=RequestContext(request))

def show_category(request, category_slug, template_name="catalog/category.html"):
    c = get_object_or_404(Category, slug=category_slug)
    products = c.product_set.all()
    page_title = c.name
    meta_keywords = c.meta_keywords
    meta_description = c.meta_description
    return render_to_response(template_name, locals(), context_instance=RequestContext(request)) 
```

网址：

```
urlpatterns = patterns('catalog.views', 
                   (r'^$', 'index', { 'template_name':'catalog/index.html' },  'catalog_home'),
                   (r'^category/(?P<category_slug>[-\W]+)/$', 'show_category', 
                    {'template_name':'catalog/category.html'}, 'catalog_category'), 
```

当我进入外壳并尝试：

> 反向（'catalog_home'）

...它返回：

> '/'

...哪个是对的。但是，当我尝试：

> 反向（'catalog_category'，kwargs={'category_slug':'action'}

...它返回：

> NoReverseMatch：未找到带有参数“（）”和关键字参数“{'category_slug'：'action'}'的'catalog_category'的反向。

尽管我在这里输入了代码示例，但我的真实代码中的缩进是正确的，因此永久链接位于 Category Class 下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T17:31:58.677

你`\W`在你的正则表达式中使用了，这意味着“**除**字母数字之外的任何字符”。我想你的意思是`\w`。

# git - 重命名本地不存在的远程分支

> ID：15732101
> 
> 赞同：0
> 
> 时间：2013-03-31T17:09:17.243
> 
> 标签：git, bitbucket

我对 git 比较陌生。我使用 bitbucket 作为我的远程存储库。在尝试将我的所有分支转换为标签之后，我的情况有点混乱。我处于一个状态，在 bitbucket 上我有与分支同名的标签。我想删除无关的远程分支。

在本地，我有我想要的：

```
> git branch
* master

> git tag
1.1.0
1.2.0
1.3.0
1.3.1
1.3.2
2.0.1 
```

到现在为止还挺好。

但是，在 bitbucket 上，我有：

分支机构：

```
1.1.0
1.2.0
1.3.0
1.3.1
1.3.2
2.0.1
master 
```

标签：

```
1.1.0
1.2.0
1.3.0
1.3.1
1.3.2
2.0.1 
```

我想删除除master之外的所有远程分支。我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-16T05:40:53.183

```
git branch -m old_branch new_branch         # Rename branch locally    
git push origin :old_branch                 # Delete the old branch    
git push --set-upstream origin new_branch   # Push the new branch, set local branch to track the new remote 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:40:04.093

要删除远程对象，您无需向其推送任何内容——例如，

```
git push origin :master 
```

将删除远程存储库中名为“master”的任何内容。

现在的事实是，这里的“master”只是该引用的全名“refs/heads/master”的*快捷方式。*标签位于“refs/tags”命名空间中，因此如果您碰巧在远程存储库中同时有一个分支和一个名为“foo”的标签，您可以使用要删除的对象的全名来消除任何歧义。

[`gitrevisions(7)`手册页](https://www.kernel.org/pub/software/scm/git/docs/gitrevisions.html)中描述了血淋淋的细节。

因此，要删除除 master 之外的所有远程分支，您必须执行以下操作：

```
git push origin :refs/heads/1.1.0 :refs/heads/1.2.0 ... 
```

您可以尝试通过使用一点 shell hack 来减少这种乏味：

```
$ ( while read b; do echo :refs/heads/$b; done | xargs git push origin )
1.1.0
1.2.0
1.3.0
1.3.1
1.3.2
2.0.1
^D 
```

（此处的 ^D 表示按下`ctrl-d`以指示子外壳的输入结束）。

* * *

PS顺便说一句，我认为由于Git在获取时支持通配符refspecs，例如

```
git fetch origin '+refs/heads/*:refs/heads/*' 
```

这也适用于推动。但似乎没有——至少

```
git push origin ':refs/tags/*' 
```

Git 1.8.1 似乎不适用于我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:41:35.773

删除远程分支/标签的语法是：

```
git push REMOTE_NAME :BRANCH_NAME 
```

如果标签或分支具有相同的名称，我不确定它们是否具有偏好。

所以更具体地说，您可以使用`refs/heads`refspec 说明符指定它是一个分支：

```
git push REMOTE_NAME :refs/heads/BRANCH_NAME 
```

假设您的遥控器名为`origin`，此命令应删除您提到的所有分支：

```
for branch_name in 1.1.0 1.2.0 1.3.0 1.3.1 1.3.2 2.0.1; do
    git push origin :refs/heads/$branch_name
done 
```

# clojure - Clojure with-local-vars 不创建线程本地绑定？

> ID：15732102
> 
> 赞同：1
> 
> 时间：2013-03-31T17:09:18.157
> 
> 标签：clojure

在文档中`with-local-var`

```
varbinding=> symbol init-expr

Executes the exprs in a context in which the symbols are bound to
vars with per-thread bindings to the init-exprs. The symbols refer
to the var objects themselves, and must be accessed with var-get and
var-set 
```

但是为什么`thread-local?`返回false？

```
user=> (with-local-vars [x 1] (thread-bound? #'x))
false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:07:30.800

因为，在您的示例中，`x`是对包含`var`. `#'x`是 的简写`(var x)`，它将 x 解析为当前命名空间中的全局变量。由于`with-local-vars`不影响*全局* `x`，因此`thread-bound?`返回`false`。

您需要使用`x`(not `(var x)`) 来引用`var`创建者`with-local-vars`。例如：

```
(def x 1)

(with-local-vars [x 2]
  (println (thread-bound? #'x))
  (println (thread-bound? x))) 
```

输出：

```
false
true 
```

另外，请注意`with-local-vars`不会动态重新绑定`x`. `x`仅在词法上绑定到`with-local-vars`块内的新 var。如果你调用一个引用的函数，`x`它将引用全局的`x`。

如果要动态重新绑定`x`，则需要使用`binding`并使其`x`动态：

```
(def ^:dynamic x 1)

(defn print-x []
  (println x))

(with-local-vars [x 2]
  (print-x)) ;; This will print 1

(binding [x 2]
  (print-x)) ;; This will print 2 
```

# iphone - 为什么尝试使用 drawRect 绘制彩色圆圈时颜色是透明的？

> ID：15732103
> 
> 赞同：2
> 
> 时间：2013-03-31T17:09:19.027
> 
> 标签：iphone, ios, cocoa-touch

我正在尝试在 UIView 中绘制一个简单的圆圈。我知道我可以用 QuartzCore 做到这一点，但我想使用 drawRect 方法：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextAddEllipseInRect(ctx, rect);
    CGContextSetFillColor(ctx, CGColorGetComponents([[UIColor greenColor] CGColor]));
    CGContextFillPath(ctx);
} 
```

当我设置`[UIColor whiteColor]`. 当`[UIColor whiteColor]`视图变得透明时..

为什么当颜色为白色时视图变得透明？我怎样才能画一个白色的圆圈？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:38:44.100

`CGContextSetFillColor`用于说明第二个参数的文档如下：

> 一组强度值，描述要设置的颜色。数组元素的数量必须等于当前填充颜色空间中的组件数量，加上 alpha 值的附加组件。

来自`greenColor`RGB 颜色空间。但`whiteColor`不是。所以你最终在使用时传递了错误数量的颜色分量`whiteColor`。

一个更简单的解决方案是替换：

```
CGContextSetFillColor(ctx, CGColorGetComponents([[UIColor greenColor] CGColor])); 
```

和：

```
[[UIColor greenColor] set]; 
```

或者：

```
[[UIColor whiteColor] set]; 
```

更新：

如果您真的想要 Core Graphics，另一种选择是：

```
CGContextSetFillColorWithColor(ctx, [UIColor greenColor].CGColor); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:47:14.037

由于色彩空间不匹配，您遇到了问题。默认情况下，您要绘制的上下文具有 RBGA 颜色空间，这需要输入四个分量（红色、蓝色、绿色、alpha）。但是当你用 [UIColor whiteColor] 创建一个 UIColor 时，这个颜色是用一个灰度颜色空间创建的，它只给你两个分量（白色，alpha）。因此，将一种颜色空间的值插入到不同的颜色空间会导致意想不到的后果。

因此，您要么需要使用 CGContextSetFillColorSpace() 将上下文的颜色空间更改为灰度颜色空间...

或者您可以简单地使用更简单的方法 CGContextSetFillColorWithColor() ，它接受任何颜色空间的 CGColor 并应用于上下文，而不管 CGColor 的颜色空间如何。

```
- (void) drawRect:(CGRect)rect {
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextAddEllipseInRect(ctx, rect);
    CGContextSetFillColorWithColor(ctx, [UIColor whiteColor].CGColor);
    CGContextFillPath(ctx);
} 
```

# mysql - 删除 field1 和 field2 相同的重复项

> ID：15732105
> 
> 赞同：2
> 
> 时间：2013-03-31T17:09:20.923
> 
> 标签：mysql

我有一张像

```
productId retailerId
1 2
1 2
1 4
1 6
1 8
1 8
2 3
2 6
2 6 
```

现在，我需要删除重复项。我已经想出了如何在一个字段相同时删除重复项。但是我需要删除两个字段相同的重复项，例如`1 2`,`1 8`和。`2 6`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:16:04.293

使用mysql的多表[`DELETE`](http://dev.mysql.com/doc/refman/5.1/en/delete.html)语法如下：

```
delete mytable
from mytable
join mytable t
on t.productId = mytable.productId
and t.retailerId = mytable.retailerId
and t.id < mytable.id 
```

看到这个在[SQLFiddle](http://sqlfiddle.com/#!2/ad858c/1)上运行。

请注意，我假设您也有一个 id 列。

### 编辑：

由于没有`id`列，最简单的方法是将所需数据复制到临时表中，删除所有数据，然后将其复制回来，如下所示：

```
CREATE TEMPORARY TABLE temptable
SELECT DISTINCT productId, retailerId
FROM mytable;
DELEYE FROM mytable;
INSERT INTO mytable
SELECT *
FROM temptable; 
```

# reporting-services - Syncfusion WPF ReportWriter - 如何设置 ReportParameters

> ID：15732109
> 
> 赞同：1
> 
> 时间：2013-03-31T17:09:32.480
> 
> 标签：reporting-services, report, rdlc, rdl, syncfusion

我正在将一些报告从 SSRS 迁移到 Syncfusions 的报告。但是，我似乎无法将参数传递给 WPF ReportWriter。

我正在使用这段代码：

```
ReportWriter reportWriter = new ReportWriter(reportPath);

List<ReportParameter> parms = new List<ReportParameter>();
parms.Add(new ReportParameter() { Name = "OrderId", Values = { "23456" }, Labels = { "test" } });

reportWriter.SetParameters(parms);
reportWriter.Save(@"c:\rdl\paul.pdf", WriterFormat.PDF); 
```

它完全忽略了参数，并做自己的事情。没有样本显示这一点，并且文档基本上不存在。也许其他人有这方面的经验？

谢谢，

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T09:47:41.590

此问题已在 syncfusion 最新版本中得到解决。

谢谢 ，

拉加万

# charts - 在 Crystal Reports 的标题中的图表中运行总计

> ID：15732111
> 
> 赞同：0
> 
> 时间：2013-03-31T17:09:46.367
> 
> 标签：charts, crystal-reports, cumulative-sum

我可以将图表放在标题部分，并将 RT 作为“显示值”并让它正确计算 RT？

RT 在图表之前运行，但 RT 是在第 3 次通过时计算的，就像在运行标题部分之后的图表一样。

事情似乎奏效了

对这一切有点困惑。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:38:52.583

不，除了页脚或详细信息部分之外，您不能在任何地方可靠地使用运行总计。通常，RT 是在打印过程中计算的，也就是说，在报表呈现的很晚的时候。使用打印时变量/公式也是如此。它们可能会在报告中显示一个值，但数据基本上没有意义。

但是您*可以*在标题中使用基本的汇总功能，例如`Sum()`或`Count()`。

# php - IMDB API 到 php 变量

> ID：15732114
> 
> 赞同：2
> 
> 时间：2013-03-31T17:10:20.093
> 
> 标签：php, json, api

你好 stackoverflow 用户。我需要从 Open Movie Database API 中提取一些电影信息。他们没有关于如何使用他们的 API 的文档，所以我很困惑。我在 PHP 中创建的站点需要从他们的 api 中提取一些变量或字符串，具体取决于我在表单中输入的 imdb ID。这是我到目前为止得到的代码。这给了我：“ [http://www.omdbapi.com/?i=tt1092026](http://www.omdbapi.com/?i=tt1092026) ”。但我需要获取他们 API 的字符串并将它们转换为变量，以便以后可以在表单中使用它们。我该怎么做呢？请帮忙。谢谢！:D

```
<form action="?action=grab" method="post">
<input placeholder="tt1092026" type="text" name="id" id="id">
<input type="submit" class="button" value="Grab Movie">
</form>
<?php if ($_GET[action] == "grab") { ?>
<h9>
<?php
$id = $_POST["id"];
$url = "http://www.omdbapi.com/?i=$id";
echo $url;

?>
</h9>
<?php }; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:20:59.873

您需要解码响应并将其分配给变量（全部在 PHP 中）。

```
<?php
$id = $_POST["id"];
$url = file_get_contents("http://www.omdbapi.com/?i=$id");
$json = json_decode($url, true); //This will convert it to an array
$movie_title = $json['Title'];
$movie_year = $json['Year'];
//and so on... 
```

然后当你需要回应它们时：

```
echo $movie_title; 
```

或者

```
echo "The movie '$movie_title' was made in $movie_year."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:21:07.530

我认为 TMDB 是一个更好的 API。[http://www.themoviedb.org](http://www.themoviedb.org) 他们在这里有很好的文档：http: [//docs.themoviedb.apiary.io](http://docs.themoviedb.apiary.io)

我在我自己的网络应用程序中使用它，它就像一个魅力。

# python - 带有日期时间计算字符串的 Python SQLITE3 SELECT 查询不起作用

> ID：15732120
> 
> 赞同：4
> 
> 时间：2013-03-31T17:11:02.047
> 
> 标签：python, sqlite

我有一个带有名为 的表的 SQLite3 DB，`TEST_TABLE`如下所示：

```
("ID" TEXT,"DATE_IN" DATE,"WEEK_IN" number); 
```

表中有 2 个条目：

```
1|2012-03-25|13
2|2013-03-25|13 
```

我正在尝试编写一个返回今年第 13 周的 ID 的查询。我想明年再次使用该程序，所以我不能将“2013”​​硬编码为年份。

我使用 datetime 计算了今年的值，创建了一个`datetime.date`内容如下的对象：“2013-01-01”。然后我将其转换为字符串：

```
this_year = (datetime.date(datetime.date.today().isocalendar()[0], 1, 1))
test2 = ("'"+str(this_year)+"'") 
```

然后我查询了 SQLite DB：

```
cursr = con.cursor()
con.text_factory = str
cursr.execute("""select ID from TEST_TABLE where WEEK_IN = 13 and DATE_IN > ? """,[test2])

result = cursr.fetchall()
print result

[('1',), ('2',)] 
```

这将返回 ID 1 和 2，但这并不好，因为 ID 1 的年份为“2012”。

奇怪的是，如果我不使用 datetime 作为字符串，而是手动创建 var，它可以正常工作。

```
test2 = ('2013-01-01')

cursr.execute("""select ID from TEST_TABLE where WEEK_IN = 13 and DATE_IN > ? """,[test2])
result = cursr.fetchall()
print result
[('2',)] 
```

那么，当我通过 datetime 创建字符串时，为什么查询不能正常工作呢？字符串就是字符串，对吧？那么我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:23:50.600

不要将其转换`this_year`为字符串，只需将其保留为`datetime.date`对象：

```
this_year = DT.date(DT.date.today().year,1,1) 
```

* * *

```
import sqlite3
import datetime as DT

this_year = (DT.date(DT.date.today().isocalendar()[0], 1, 1))
# this_year = ("'"+str(this_year)+"'")
# this_year = DT.date(DT.date.today().year,1,1)
with sqlite3.connect(':memory:') as conn:
    cursor = conn.cursor()
    sql = '''CREATE TABLE TEST_TABLE
        ("ID" TEXT,
        "DATE_IN" DATE,
        "WEEK_IN" number)
    '''
    cursor.execute(sql)
    sql = 'INSERT INTO TEST_TABLE(ID, DATE_IN, WEEK_IN) VALUES (?,?,?)'
    cursor.executemany(sql, [[1,'2012-03-25',13],[2,'2013-03-25',13],])
    sql = 'SELECT ID FROM TEST_TABLE where WEEK_IN = 13 and DATE_IN > ?'
    cursor.execute(sql, [this_year])
    for row in cursor:
        print(row) 
```

产量

```
(u'2',) 
```

* * *

当您编写参数化 SQL 并使用`cursor.execute`. 因此，您不需要（或不想）自己手动引用参数。

所以

```
this_year = str(this_year) 
```

代替

```
this_year = ("'"+str(this_year)+"'") 
```

也可以，但如上所示，这两行都是不必要的，因为`sqlite3`也会接受`datetime`对象作为参数。

也有效。

由于 sqlite3 自动给参数加引号，所以当你手动添加引号时，最后一个参数会得到两组引号。SQL最终比较

```
In [59]: '2012-03-25' > "'2013-01-01'"
Out[59]: True 
```

这就是为什么两行都（错误地）返回的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:24:01.603

我相信这是因为您如何在`test2`变量中创建日期。

在第一个示例中，当您使用 时`datetime module`，您不小心引入了额外的引号：

```
>>> import datetime
>>> this_year = datetime.date(datetime.date.today().isocalendar()[0], 1, 1)
>>> test2 = "'" + str(this_year) + "'"
>>> print test2
"'2013-01-01'" 
```

但是，在您的第二个示例中，您仅设置`test2`为等于有效的日期。

```
>>> test2 = '2013-01-01'
'2013-01-01' 
```

要修复它，只需将您的第一个示例修改为如下所示：

```
this_year = datetime.date(datetime.date.today().isocalendar()[0], 1, 1)
test2 = str(this_year) 
```

作为旁注，请注意我已经删除了变量周围的括号，因为它们是多余的。

# javascript - 用图像替换默认收音机

> ID：15732127
> 
> 赞同：0
> 
> 时间：2013-03-31T17:11:28.437
> 
> 标签：javascript, jquery

我想在这里实现两件事。1：我试图在单击单选按钮时显示内容 2：我试图用图像替换默认单选按钮

我本可以完全消除收音机的想法，只用图像进行点击显示，但最终的任务是捕捉用户的输入并以电子邮件的形式发送。我在这个问题中排除了那部分。我的解决方案在 chrome 中运行良好，但在 IE 8 中我无法显示内容。在 IE 9 中它可以工作

这是我目前的尝试：

JavaScript：

```
 $(function(){

  var options = $('#options').find('input');
    options.click(function(){
      var id = "opt" + $(this).val();
      $(".optDivs").hide();
      $("#" + id).show();

    });

  var selections = $('#selections').find('input');

    selections.click(function(){
      var id = "opt" + $(this).val();
      $(".slctDivs").hide();
      $("#" + id).show();

    });

  }); 
```

html:

```
<html><head>    
<style>
    #one{
        position:absolute;
        left:-99999999;
    }
</style>
</head>
<body>

    <div id="options">
        <div class="opt1">
            <input type="radio" name="primary" id="one" value="1"> 
            <label for="one"><img width="50px" src="http://gfxlovers.com/smilies/imgs/smiling/smiling025_2.gif"></label>
        </div>
      <div class="opt2"><input type="radio" name="primary" value="2"> Option 1</div>
      <div class="opt3"><input type="radio" name="primary" value="3"> Option 1</div>
    </div>

    <div id="opt1" class="optDivs" style="display:none;">content option 1</div>
    <div id="opt2" class="optDivs" style="display:none;">content option 2</div>
    <div id="opt3" class="optDivs" style="display:none;">content option 3</div>

    <div id="selections">
      <div class="opt4"><input type="radio" name="secondary" value="4"> Option 2</div>
      <div class="opt5"><input type="radio" name="secondary" value="5"> Option 2</div>
      <div class="opt6"><input type="radio" name="secondary" value="6"> Option 2</div>
    </div>

    <div id="opt4" class="slctDivs" style="display:none;">content option 5</div>
    <div id="opt5" class="slctDivs" style="display:none;">content option 6</div>
    <div id="opt6" class="slctDivs" style="display:none;">content option 7</div>

<div id="chrome_hitahintpanel" style="opacity: 0; display: none;"><input id="chrome_hitahintinput" type="text"></div><div id="chrome_hintswindow"></div><div id="chrome_linksearchpanel" style="opacity: 0; display: none;"><input id="chrome_linksearchinput" type="text"></div></body></html> 
```

[您可以在这里](http://soumghosh.com/otherProjects/Kemail/testForRadio.html)看到它托管和工作。

知道我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:15:29.337

您应该使用 CSS 隐藏单选元素并显示图像。然后，您应该在 jquery（或类似的）中捕获图像以检查是否单击了其中一个图像。如果是：向相应的单选元素添加一个检查属性。

# c# - 如何在 C# 中将字符串项添加到枚举中？

> ID：15732147
> 
> 赞同：-2
> 
> 时间：2013-03-31T17:13:21.433
> 
> 标签：c#

我已使用枚举类型数据类型在 Windows 窗体 c# 的组合框中添加字符串元素，但在其中添加元素时出现错误。错误是 ("Identifier Expected") 我的代码是

```
public enum EducationG
        {
            ("Bachelor of Arts (B.A)"),
            ("Bachelor of Arts (Bachelor of Education (B.A. B.Ed)")],
            ("Bachelor of Arts (Bachelor of Law (B.A.B.L)"),
            ("Bachelor of Arts (Bachelor of Law (B.A.LLB)"),
            ("Bachelor of Ayurvedic Medicine and Surgery (B.A.M.S)"),
            ("Bachelor of Applied Sciences (B.A.S)"),
            ("Bachelor of Audiology and Speech Language Pathology (B.A.S.L.P)"),
            ("Bachelor of Architecture (B.Arch)"),
            ("Bachelor of Business Administration (B.B.A)"),
            ("Bachelor of Business Administration (Bachelor of Law (B.B.A LL.B)"),
            ("Bachelor of Business Management (B.B.M)"),
            ("Bachelor of Business Studies (B.B.S)"),
            ("Bachelor of Computer Applications (B.C.A)"),
            ("Bachelor of Communication Journalism (B.C.J)"),
            ("Bachelor of Computer Science (B.C.S)")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:15:34.723

你不能这样做，但你可以这样做：

```
public enum EducationG
{
    [Description("Bachelor of Arts (B.A)")]
    BachelorOfArtsBA,

    ...
} 
```

您可以使用以下方法将枚举转换为字符串：

```
var enumValue = EducationG.BachelorOfArtsBA;
var attrs = (DescriptionAttribute[])typeof(EducationG)
    .GetField(enumValue.ToString())
    .GetCustomAttributes(typeof(DescriptionAttribute));
var stringValue = attrs[0].Description; 
```

将字符串转换回枚举更具挑战性：

```
var stringValue = ...
var enumValue = 
    from f in typeof(EducationG).GetFields(BindingFlags.Static)
    from d in (DescriptionAttribute[])f.GetCustomAttributes(typeof(DescriptionAttribute))
    where d.Description == stringValue
    select f.GetValue(null); 
```

无论如何，这个解决方案可能比您的特定问题更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:15:42.737

枚举不包含字符串。[文档](http://msdn.microsoft.com/en-gb/library/sbbt4032.aspx)是这样描述它们的：

> enum 关键字用于声明一个枚举，一种由一组称为枚举数列表的命名常量组成的独特类型。每个枚举类型都有一个底层类型，它可以是除 char 之外的任何整数类型。枚举元素的默认基础类型是 int。默认情况下，第一个枚举器的值为 0，并且每个后续枚举器的值都增加 1。

也许您正在寻找的是一个字符串数组。

```
string[] EducationG = {
    "Bachelor of Arts (B.A)",
    "Bachelor of Arts (Bachelor of Education (B.A. B.Ed)",
    ....
} 
```

如果您只想将一堆字符串添加到组合框中，那么字符串数组就可以了。但是如果你真的需要一个枚举，那么你会想要声明一个`enum`并找到一种在枚举值和字符串名称之间进行映射的方法。该`Description`属性可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:19:02.883

请参阅链接 [emun(C#)](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx)中的示例，代码可能类似于：

```
public enum EducationG {SomeName, SomeOtherName}; 
```

正如您将在链接中注意到的那样，您还可以向枚举添加默认值和标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T17:47:01.310

您还可以使用`List<string>`如下所示的 a：

```
var educationGrades = new List<string> 
{ 
    "Bachelor of Arts (B.A)", 
    "Bachelor of Arts (Bachelor of Education (B.A. B.Ed)", 
    ... 
    "Bachelor of Computer Science (B.C.S)"
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-30T11:40:05.940

像这样使用字符串和justcode

```
private void edulvlcb_SelectedIndexChanged(object sender, EventArgs e)
        {

                   combobox.Items.Clear();
            foreach (string ug in Classname.stringname)
                combobox.Items.Add(ug);
    } 
```

它必须工作

# oracle11g - 创建包 sqlplus

> ID：15732150
> 
> 赞同：3
> 
> 时间：2013-03-31T17:13:32.813
> 
> 标签：oracle11g, sqlplus

我正在尝试从以下过程创建一个包

```
CREATE OR REPLACE PROCEDURE insert_rows
(pl_deptno dept.deptno%TYPE, pl_dname dept.dname%TYPE, pl_loc dept.loc%TYPE
) AS
BEGIN
INSERT INTO dept 
(deptno,dname,loc) 
values ( pl_deptno,pl_dname,pl_loc);
commit;
end insert_rows;
/ 
```

到目前为止，这是我的包 sec，它创建得很好

```
create or replace package fpf 
is
procedure insert_rows
   (p_deptno IN dept.deptno%TYPE,
    p_dname IN dept.dname%TYPE,
    p_loc IN dept.loc%TYPE);
end fpf;
/ 
```

但是，当我创建包体时，我得到编译错误，有什么想法吗？

```
create or replace package body fpf
as
procedure insert_rows
   (p_deptno IN dept.deptno%TYPE,
    p_dname IN dept.dname%TYPE,
    p_loc IN dept.loc%TYPE)
as
BEGIN
INSERT INTO dept 
(deptno,dname,loc) 
values ( pl_deptno,pl_dname,pl_loc);
end insert_rows;
end fpf;
/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T01:24:00.080

当你得到编译错误时，你会想看看你收到了什么错误。在 SQL*Plus 中，您可以使用命令执行此操作`show errors`

```
SQL> create or replace package body fpf
  2  as
  3  procedure insert_rows
  4     (p_deptno IN dept.deptno%TYPE,
  5      p_dname IN dept.dname%TYPE,
  6      p_loc IN dept.loc%TYPE)
  7  as
  8  BEGIN
  9  INSERT INTO dept
 10  (deptno,dname,loc)
 11  values ( pl_deptno,pl_dname,pl_loc);
 12  end insert_rows;
 13  end fpf;
 14  /

Warning: Package Body created with compilation errors.

SQL> sho err
Errors for PACKAGE BODY FPF:

LINE/COL ERROR
-------- -----------------------------------------------------------------
9/1      PL/SQL: SQL Statement ignored
11/29    PL/SQL: ORA-00984: column not allowed here 
```

这些错误告诉您编译器认为第 11 行第 29 列的关键字是列名，并且在您的代码中此时不允许使用列名。第 11 行第 29 列是`pl_loc`标识符。据推测，您并不打算将其作为对列名的引用。据推测，您打算将其用作参数的名称。但是 Oracle 不会将该标识符识别为参数。这是因为您的参数未命名`p_loc`（`pl_loc`请注意 extra `l`）。

如果您更正所有三个参数的名称，则代码会编译

```
Wrote file afiedt.buf

  1  create or replace package body fpf
  2  as
  3  procedure insert_rows
  4     (p_deptno IN dept.deptno%TYPE,
  5      p_dname IN dept.dname%TYPE,
  6      p_loc IN dept.loc%TYPE)
  7  as
  8  BEGIN
  9  INSERT INTO dept
 10  (deptno,dname,loc)
 11  values ( p_deptno,p_dname,p_loc);
 12  end insert_rows;
 13* end fpf;
SQL> /

Package body created. 
```

# android - Android 在不活动期间卸载数据文件

> ID：15732151
> 
> 赞同：0
> 
> 时间：2013-03-31T17:13:35.827
> 
> 标签：android

我有一个测验应用程序，它从 plist 文件加载问题数据库。当应用程序新加载时，它会运行一个线程来加载问题文件。

在一些不活动之后，当您再次打开应用程序并尝试运行新测验时，它不会加载任何问题。

我想它是操作系统用来清理一些内存的某种垃圾收集器，它正在完成它的工作，所以没关系。

但是你会推荐什么来重新加载文件？我在考虑覆盖 savedInstanceState？

这是启动屏幕和加载程序的组合，是第一个运行的活动

```
public class SplashScreen extends Activity {
    /** Called when the activity is first created. **/
    ProgressDialog dialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new LoadViewTask().execute();
    }

    private class LoadViewTask extends AsyncTask<Void, Integer, Void>{  
      //Before running code in separate thread  
        @Override  
        protected void onPreExecute(){  
            dialog = new ProgressDialog(SplashScreen.this);
            dialog.setMessage("Loading...");
            dialog.setTitle("Loading File");
            dialog.setIndeterminate(true);
            dialog.setCancelable(false);
            dialog.show();
        }  

        //The code to be executed in a background thread.  
        @Override  
        protected Void doInBackground(Void... params){   
            try{  
                //Get the current thread's token  
                synchronized (this){  
                    QuestionsLoader.getInstance(SplashScreen.this);                     
                }     
            }  
            catch (Exception e){  
                e.printStackTrace();  
                Log.d("TAG", "exception" + e);
            }
            return null;  
        }  

        //Update the progress  
        @Override  
        protected void onProgressUpdate(Integer... values){  
        }   

        //after executing the code in the thread  
        @Override  
        protected void onPostExecute(Void result){  
        dialog.dismiss();
        Intent i = new Intent("com.project.AnActivity");
        startActivity(i); 
        finish(); //Finish the splash screen
        }  

    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:15:18.483

SplashScreen 是一项活动吗？如果是这样，您不应该尝试保留对它的引用。

Android 在需要时销毁活动以释放内存。何时发生这种情况是不确定的，您不应干预该机制。它不使用垃圾收集器来执行此操作（它会破坏 Activity 的进程），因此如果您持有对它的引用，您将泄漏整个 Activity，这是不好的。您会在 Play 商店中看到许多具有此特定错误或其变体的应用程序。只需旋转设备 5 或 10 次，应用程序就会因内存不足而崩溃。

没有看到代码，不可能知道，但通常正确的方法是加载外部资源`onResume()`或稍后加载，以便无论 Activity 是新实例（例如`onCreate()`已被调用）还是返回前台的同一实例，它们都可用。

如果无论活动是否被销毁，您都需要保持某些状态，请将其保存（通常保存到`SharedPreferences`）中`onPause()`并检索到`onResume()`.

# linux - -ll gcc 的标志是什么？

> ID：15732155
> 
> 赞同：6
> 
> 时间：2013-03-31T17:14:03.820
> 
> 标签：linux, gcc, compiler-flags

我正在尝试编译一个有`-ll`标志但 gcc 找不到的程序。真正的图书馆`l`之后是什么，或者这是一个错字？`-l`在 google 上很难找到有关此的信息。这样的术语是“模糊的”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T17:16:49.063

`-ll`表示链接到[Solaris 的 libl lex 库](http://docs.oracle.com/cd/E23824_01/html/821-1464/libl-3lib.html)（在 中可用`/usr/lib/libl.so`）。

（该`-l`选项采用库的名称，减去`lib`前缀和文件扩展名。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-17T18:31:34.223

就我而言，`flex`默认情况下**没有**安装`libfl`库（使用 Linux Mint）

所以我不得不`libfl-dev`单独安装库

```
sudo apt install libfl-dev 
```

并包括一个`-lfl`选项，而不是`-ll`在命令行中，如

```
gcc myfile.c -lfl -o myfile 
```

# mysql - 需要加载图片然后插入mysql

> ID：15732156
> 
> 赞同：0
> 
> 时间：2013-03-31T17:14:16.960
> 
> 标签：mysql, file, input

我正在尝试使用 MySQL 查询加载要上传的图像（玩家）的名称。我正在使用输入类型='文件'。

```
$sele_players = "SELECT name FROM PLAYERS WHERE nom_team='team'";
$sele_players = mysql_query( $sele_players, $link );

echo "<FORM METHOD='POST'>";
echo "<TABLE>";
while( $row = mysql_fetch_assoc( $sele_players ) )
{
    echo "<TR><TD>".$row['name']."</TD><TD><INPUT type='file' name='{$row['name']}'> </TD></TR>"; 
} 
```

从 MySQL 查询中，我收到大约 50 个条目。但我不想上传*所有*球员的照片。我不知道如何将我从数据库中获得的名称与输入类型文件浏览的图像名称链接起来。我需要一个知道可以在提交表单之前调用的图像名称（通过输入文件上传）的函数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:25:40.673

您正在呼叫`nombre`，但它不在您的列列表中。您需要像这样添加它：

```
SELECT nombre ... 
```

如果`nombre`是别名，那么它看起来像：

```
SELECT name AS nombre ... 
```

# mysql - MySQL查询基于其他表中的多个列从1个表中获取多个值

> ID：15732161
> 
> 赞同：1
> 
> 时间：2013-03-31T17:14:38.220
> 
> 标签：mysql

我有这个表结构（让我们称之为这个表`teams`）：

```
id | player1 | player2 | player3
1  | 13      | 25      | 50 
```

而这个（让我们称之为这个表`players`）：

```
id | pts
13 | 5
25 | 10
50 | 12 
```

有没有办法编写一个查询来`pts`从表中的一行中获取每个玩家的值`teams`？

例如，如果我想获取`pts`player1 的值，我会执行以下操作：

```
select teams.id,players.pts from teams left join players on teams.player1=players.id 
```

我需要同时为所有 3 名玩家执行此操作（实际上，有 18 名玩家，而不是 3 名 - 但同样的原则应该有效）。

我知道我可以遍历它们，但这似乎不是最佳解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:29:42.300

我认为一个更好的主意是具有以下结构：

**团队**

```
team_id | name
----------------
1       | Team 1
2       | Team 2
3       | Team 3 
```

**球员**

```
player_id | pts
---------------
1         | 10
2         | 5
3         | 25 
```

**team_players_xrefs**

```
team_id | player_id
-------------------
1       | 1
1       | 2
2       | 3 
```

然后使用以下查询：

```
SELECT
  player_id,
  pts
FROM
  teams_players_xrefs
INNER JOIN
  players USING (player_id)
WHERE
  team_id = 1 
```

要得到以下结果：

```
player_id | pts
---------------
1         | 10
2         | 5 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/a8d6e/2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:17:17.277

```
SELECT
  player1.pts AS player1_pts,
  player2.pts AS player2_pts,
  player3.pts AS player3_pts
FROM
  teams
  LEFT JOIN players AS player1 ON team.player1=player1.id
  LEFT JOIN players AS player2 ON team.player2=player2.id
  LEFT JOIN players AS player3 ON team.player3=player3.id
WHERE
   ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T17:30:36.943

您可以为每个玩家离开加入`players`表，这会起作用，但并不是一个理想的解决方案。不幸的是，由于您的表结构是您能做的最好的。

最好创建一个映射表，将球队与球员进行映射。例如：

```
CREATE TABLE teams
(
  id INT,
  PRIMARY KEY(id)
 );

CREATE TABLE team_players
(
  team_id INT,
  player_id INT
) 
```

这将允许您通过 team_id 查询并轻松返回该团队中的所有玩家。

# actionscript-3 - 如何在 as3 中为我的角色获得速度

> ID：15732162
> 
> 赞同：0
> 
> 时间：2013-03-31T17:14:53.197
> 
> 标签：actionscript-3

我正在尝试制作一个传送游戏，而我的角色需要有一些速度和重力，有人知道我需要多少总和才能完成这个吗？

到目前为止，这是我的代码：

```
var char = this.addChild(new Char());
char.width = 20;
char.height = 20;
char.x = startPos.x;  //startPos is an invisible movieclip that I can move around to     make the starting position
char.y = startPos.y;        // accurate
var vx:Number = 0;
var vt:Number = 0;

stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);

function keyDownHandler (e:KeyboardEvent):void {
    switch (e.keyCode)  {
        case Keyboard.UP:
        char.y = char.y - 5   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:13:09.077

如果你的 char 只需要上升，那么下面的代码就可以完成这项工作。

但如果它需要向各个方向移动，则需要大量高级代码。跟随[各个方向的移动角色。](https://stackoverflow.com/questions/5844565/having-trouble-moving-a-character-in-as3/5844754#5844754)

这是满足您需求的快速解决方案。

```
var gravity:Number = 2;

var velocity:Number = 1.1;

var move:Boolean = false;

function moveChar(e:Event):void
{
   if(move)
   {
       gravity *= velocity; 
       char.y -= gravity; // move char
   }
}
char.addEventListener(Event.ENTER_FRAME, moveChar, false, 0, true);

//Keyboard events
function keyDownHandler (e:KeyboardEvent):void
{
    switch (e.keyCode) 
    {
        case Keyboard.UP:
        move = true;
    }
}
stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);

function keyUpHandler (e:KeyboardEvent):void
{
    move = false;
    gravity = 2;
}
stage.addEventListener(KeyboardEvent.KEY_UP, keyUpHandler); 
```

# ruby - 输入是单词数组 - 输出应该是组合字谜的数组数组。

> ID：15732163
> 
> 赞同：1
> 
> 时间：2013-03-31T17:14:56.570
> 
> 标签：ruby

我是新手，我不知道从这里去哪里。

```
def combine_anagrams(words)
    a1 = []
    words.sort do |x, y|
        a = x.downcase.chars.sort.join
        b = y.downcase.chars.sort.join
        if a == b
            a1.push(x,y)
        end
    end
end

x = ['cars', 'for', 'potatoes', 'racs', 'four', 'scar', 'creams', 'scream']
combine_anagrams(x) 
```

我在数组中使用了 sort 方法，因为它是我发现的唯一可以让我将数组的两个元素传递给它以进行比较的方法。非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:33:05.567

```
x.group_by{|s| s.downcase.chars.sort}.values
# => [["cars", "racs", "scar"], ["for"], ["potatoes"], ["four"], ["creams", "scream"]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:18:11.203

查看 上的文档`combination`。[http://www.ruby-doc.org/core-2.0/Array.html#method-i-combination](http://www.ruby-doc.org/core-2.0/Array.html#method-i-combination)

尝试这样的事情（*未经测试*）

```
def combine_anagrams(words)
    a1 = []
    words.combination(2).each do |x, y|
        a = x.downcase.chars.sort.join
        b = y.downcase.chars.sort.join
        if a == b
            a1.push(x,y)
        end
    end
end

x = ['cars', 'for', 'potatoes', 'racs', 'four', 'scar', 'creams', 'scream']
combine_anagrams(x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:39:16.273

如果您希望对***所有可能的***字谜进行分组，您可能不想一次只比较两个元素。您是否打算省略只有一个项目的字谜（例如，在您的示例中为“for”）？因此，您可能应该使用一次迭代每个元素的不同函数。

**事后**

我认为@sawa 的想法是正确的。它结合了您尝试实现的正确性和 Ruby 的简洁性。

# windows - 为什么这个masm汇编代码不能在循环中工作，代码第一次完美运行但在循环中不起作用

> ID：15732164
> 
> 赞同：0
> 
> 时间：2013-03-31T17:15:05.167
> 
> 标签：windows, assembly, masm, masm32

嘿，我已经使用 masm 2 周了，我正在尝试逐行读取包含文件路径的文本文件

```
example of text file
C:\a.rar
C:\a.txt
C:\a.png 
```

然后我想读入文件路径的全部内容并得到文件路径的md5校验和

下面的代码第一次完美运行（第一个消息框是文件路径，第二个是文件内容，第三个是 md5 校验和）

但是在第一个循环之后它读取第二个文件路径但无法读取第二个文件的内容然后崩溃，因为它没有任何 md5 校验和。

不重置某些东西或不关闭某些东西一定是一个简单的错误，但我花了大约 20 个小时在这上面，但无法让它工作

例如下面的代码在一个按钮中，当你按下按钮时，这就是它应该做的

```
message box C:\a.rar
message box "contents of file"
message box 44644af7515bc4870d44fa688684798
message box C:\a.txt
message box "contents of file"
message box 6057f13c496ecf7fd777ceb9e79ae285
message box C:\a.png
message box "contents of file"
message box 01654ab48d84f484z446ba48453cb48 
```

但这就是发生的事情

```
message box C:\a.rar
message box "contents of file"
message box 44644af7515bc4870d44fa688684798
message box C:\a.txt
blank contents cant read the contents of the file on loop (this is the problem)
message box blank because it cant md5 no contents 
```

碰撞

有人可以帮忙吗

```
LOCAL Buffer3  :DWORD

invoke CreateFile, ADDR filestoscan, GENERIC_READ, 0, 0,OPEN_EXISTING, 0, 0
mov hFile, eax

invoke GetFileSize,hFile,NULL
mov Byteforstreamreader,eax
streamreader2:
.if Byteforstreamreader != 0
invoke ReadFile, hFile, ADDR Buffer2,1, ADDR BytesWritten, 0
.if Buffer2 == 13

invoke CreateFile, ADDR StringBuffer, GENERIC_READ, 0, 0,OPEN_EXISTING, 0, 0
mov hFile2, eax

invoke GetFileSize,hFile2,NULL
mov Bytes,eax

invoke ReadFile, hFile2, ADDR FileBuffer,Bytes, ADDR BytesWritten, 0
invoke CloseHandle,hFile2

invoke MessageBoxA, NULL, addr StringBuffer, offset BoxCaption, NULL
invoke MessageBoxA, NULL, addr FileBuffer, offset BoxCaption, NULL

invoke MD5_Startup
invoke MD5_Init, offset ctxt
invoke MD5_Read, offset ctxt, offset FileBuffer, Bytes
invoke MD5_Digest, offset ctxt, offset filehash
invoke MD52String, offset filehash, offset strn, 1

invoke MessageBoxA, NULL, addr strn, offset BoxCaption, NULL

mov FileBuffer,0
mov StringBuffer,0
dec Byteforstreamreader
jmp streamreader2
.endif
mov eax,offset Buffer2
mov Buffer3,eax

invoke lstrcat,ADDR StringBuffer,addr Buffer2

dec Byteforstreamreader
jmp streamreader2
.endif
.if Byteforstreamreader == 0
invoke CloseHandle,hFile
.endif

.data
filestoscan      db "myfiles.txt",0
FileBuffer        DB 50000 DUP(?)
Bytes dd ?
Bytes2 dd ?
BytesWritten dd ?
BytesWritten3 dd ?
hFile dd ?
hFile2 dd ?

.data ?
hFile dd ?
Byteforstreamreader dd ?  
BytesWritten2 dd ?
StringBuffer DB 100 DUP(?)
Buffer2  db 500 dup (?)
ctxt db 1000 dup (?)
filehash db 1000 dup (?)
strn db 33 dup(?) ; use dw for unicode 
```

作为一个附带问题，如果有人可以回答，我认为必须在文件缓冲区上保留 50000 字节以便我可以打开一个 50000 字节或更小的文件，这似乎是不对的。我如何在不保留所有内存的情况下打开任何文件大小，因为其中一些文件可能是 100 mb 或更多

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:10:31.137

`streamreader2`这是您的循环的一个带注释的版本：

```
streamreader2:
.if Byteforstreamreader != 0
    invoke ReadFile, hFile, ADDR Buffer2,1, ADDR BytesWritten, 0

    ; check for end-of-line (CR)
    .if Buffer2 == 13

        ; open the file named in Buffer2 and 
        ; do a bunch of stuff to it to get the MD5
        ;
        ; ...

        mov FileBuffer,0
        mov StringBuffer,0
        dec Byteforstreamreader
        jmp streamreader2
    .endif

    ; I don't know what the purpose of these two lines are
    mov eax,offset Buffer2
    mov Buffer3,eax

    ; append the character just read from hFile to StringBuffer
    invoke lstrcat,ADDR StringBuffer,addr Buffer2

    dec Byteforstreamreader
    jmp streamreader2
.endif 
```

`hFile`因此，除了 13 (CR) 之外，不会对读取的字符进行特殊处理。但是，我认为该文件中的行结尾很有可能是 CRLF，因此当打开下一个文件时，名称的开头将有一个 LF 控制字符。所以`CreateFile`or`fopen`调用将无法打开文件。

# ruby - Ruby 1.9.1 'socket' 模块

> ID：15732166
> 
> 赞同：0
> 
> 时间：2013-03-31T17:15:28.697
> 
> 标签：ruby, sockets

我在编写简单的聊天应用程序时遇到问题。一切正常，突然间我得到了这个：

```
test.rb:3:in `<main>': uninitialized constant UDPsocket (NameError) 
```

我写了一些测试代码来找出问题所在`

```
require 'socket'

socket = UDPsocket.new 'localhost', 4900 
```

我仍然得到这个错误（即使来自这个简单的代码）

我在 Ubuntu 10.04 和 Ruby 1.9.1（由 apt 安装）上工作，我的 irb 版本是 0.9.5。有趣的是，但在 irb 上它似乎工作得很好。我已经看到了一些关于这个的问题，显然大多数人对此没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:25:05.807

该类`UDPSocket`以大写字母命名`S`。

# iphone - 更改颜色替换的亮度

> ID：15732168
> 
> 赞同：9
> 
> 时间：2013-03-31T17:15:31.057
> 
> 标签：iphone, objective-c, opencv, image-processing, core-graphics

我正在用用户选择的颜色替换图像中的某些颜色。我正在使用 OpenCV 进行颜色替换。

简而言之，我已经描述了我从哪里获得帮助以及我得到了什么。

1.  [如何更改图像中的特定颜色？](https://stackoverflow.com/questions/8046643/how-to-change-a-particular-color-in-an-image) 我已经按照上述链接的答案执行了该步骤或采取了基本思路。在该链接的正确答案中，那个人告诉您只需要更改色调即可进行颜色替换。

2.  之后，我遇到了类似于 [iPhone 应用程序图像中的颜色替换](https://stackoverflow.com/questions/15082025/color-replacement-in-image-for-iphone-application)的问题（即，对于完全是初学者的人来说，这是很好的颜色替换代码）
    ，我认为我也需要更改“饱和度”。

现在我遇到了类似的问题

**“当我的源图像太亮（即亮度高）并且我用一些深色替换颜色时，替换图像中的颜色看起来很亮而不是暗，因为看起来替换的颜色与我们使用的颜色不匹配替代品”**

发生这种情况是因为我没有考虑更换时的亮度。在这里我被卡住了改变亮度的公式或想法是什么？

假设我用目标颜色的亮度替换图像的亮度，那么它看起来像平面替换，图像将失去它的实际阴影或边缘。

**编辑：**
当我考虑替换源（即要处理的像素）的亮度时，我面临一个问题。让我根据我的应用程序的场景进行解释。

例如，我正在更改汽车的颜色（如 whiteAngl 解释），之后我将擦除新颜色汽车的一小部分。我再次对擦除部分进行重新着色，但现在发生的是擦除后完成的颜色和擦除前的颜色不匹配，因为这两次我都得到不同的亮度，因为我要处理的像素都发生了变化，并且由于亮度输出颜色改变。如何克服这个问题

任何帮助将不胜感激

![彩色图像](https://i.stack.imgur.com/QJzi6.png) ![删除了几个部分](https://i.stack.imgur.com/V8fMo.png) ![重新着色](https://i.stack.imgur.com/289j5.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T00:11:27.180

没有看到你尝试过的代码，很难猜出你做错了什么。为了用一个具体的例子向你展示这是如何做到的，让我们改变这辆车难看的蓝色：

![在此处输入图像描述](https://i.stack.imgur.com/cx7An.jpg)

这个简短的 Python 脚本展示了我们如何使用 HSV 颜色空间更改颜色：

```
import cv2
orig = cv2.imread("original.jpg")
hsv = cv2.cvtColor(orig, cv2.COLOR_BGR2HSV)
hsv[:,:,0] += 100
bgr = cv2.cvtColor(hsv, cv2.COLOR_HSV2BGR)
cv2.imwrite('changed.jpg', bgr) 
```

你得到： ![在此处输入图像描述](https://i.stack.imgur.com/m6wQu.jpg)

在[wikipedia](http://en.wikipedia.org/wiki/HSL_and_HSV)上，您会看到色调介于 0 到 360 度之间，但对于 OpenCV 中的值，请参阅[文档](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)。您会看到我为图像中每个像素的色调添加了 100。我猜您想更改图像一部分的颜色，但您可能从上面的脚本中得到了这个想法。

以下是如何获得所要求的深红色汽车。首先我们得到红色的： ![红牌](https://i.stack.imgur.com/QpEV8.jpg)

我试图保持金属感的深红色： ![深红色的车](https://i.stack.imgur.com/EwqG1.jpg)

正如我所说，您用来改变颜色光线的方程式取决于您想要为对象使用的材料。在这里，我想出了一个快速而肮脏的方程式来保留汽车的金属材料。此脚本从第一个浅蓝色汽车图像生成上述深红色汽车图像：

```
import cv2
orig = cv2.imread("original.jpg")
hls = cv2.cvtColor(orig, cv2.COLOR_BGR2HLS)
hls[:,:,0] += 80 # change color from blue to red, hue
for i in range(1,50): # 50 times reduce lightness 
 # select indices where lightness is greater than 0 (black) and less than very bright 
 # 220-i*2 is there to reduce lightness of bright pixel fewer number of times (than 50 times), 
 # so in the first iteration we don't reduce lightness of pixels which have lightness >= 200, in the second iteration we don't touch pixels with lightness >= 198 and so on
 ind = (hls[:,:,1] > 0) & (hls[:,:,1] < (220-i*2))
 # from the lightness of the selected pixels we subtract 1, using trick true=1 false=0
 # so the selected pixels get darker
 hls[:,:,1] -= ind
bgr = cv2.cvtColor(hls, cv2.COLOR_HLS2BGR)
cv2.imwrite('changed.jpg', bgr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T03:55:58.783

你是对的：只改变色调根本不会改变亮度（或者由于一些感知效果非常弱），你想要的也是改变亮度。正如您所提到的，将亮度设置为目标亮度会丢失所有像素值（您只会看到饱和度的变化）。下一个是什么 ？

您可以做的是更改像素的色调**并**尝试匹配**平均**亮度。为此，只需计算`B`要处理的所有像素的平均亮度，然后将所有亮度值乘以目标颜色`Bt/B`的`Bt`亮度。

这样做将匹配色调（由于第一步）和由于第二步而导致的亮度，同时保留边缘（因为您只修改了平均亮度）。

这是直方图匹配的一种特殊情况，在这里，您的目标直方图只有一个值（目标颜色），因此只有平均值才能以合理的方式匹配。

如果您正在寻找您的赏金请求中所述的“可靠来源”，我是哈佛的博士后，今年将在 Siggraph 上发表一篇关于颜色直方图匹配的论文；）。

# haskell - 在目录上执行通配符模块导入？

> ID：15732173
> 
> 赞同：3
> 
> 时间：2013-03-31T17:15:48.540
> 
> 标签：haskell, blaze-html

如果我在一个名为 的目录中有一堆模块`Views`，我想用`import Views.*`. 相反，据我所知，当前的 haskell 习惯用法是创建一个`Views.hs`导入所有这些文件的文件。

我的用例：

我正在用[Scotty](https://github.com/xich/scotty/)构建一个网络应用程序。我的视图是用 blaze-html 编写的，我像这样导入和渲染它们：

```
import Views.Posts.Index

scotty 3000 $ do
  get "/" $ do
    posts <- getPosts
    blaze $ Views.Posts.Index.render posts 
```

因此，如果我有 10 个视图，我需要显式地导入每个视图......当我创建一个视图时，我需要一个新的导入才能使用它。将此与小胡子进行比较：

```
scotty 3000 $ do
  get "/" $ do
    mustache "views/posts/index" 
```

# javascript - 困惑的新手：js表单验证内联

> ID：15732175
> 
> 赞同：0
> 
> 时间：2013-03-31T17:15:51.677
> 
> 标签：javascript, html

我构建了一个需要使用 JavaScript 验证的表单。我尝试使用这篇文章但无法复制结果：[inline javascript form validation](https://stackoverflow.com/questions/841119/inline-javascript-form-validation)

到目前为止，我已经用我的代码创建了一个 JSBin，包括 CSS 和 JS 文件：http: [//jsbin.com/oligol/1/edit](http://jsbin.com/oligol/1/edit)

这是我的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<head>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
 <title>xxx</title>
 <meta http-equiv="Content-Language" content="en-us" />
  <meta http-equiv="imagetoolbar" content="no" />

  <meta name="MSSmartTagsPreventParsing" content="true" />

 <meta name="description" content="" />

 <meta name="keywords" content="" />   

 <style type="text/css" media="all">@import "css/master.css";</style>  <style type="text/css" media="all">@import "css/master.css";</style>
<script src="contact.js" type="text/javascript">
</script>
</head>

<body>

<div id="page-container">     

<div id="header"> <img src="images/header.jpg" width="900" height="243" />
</div>

  <div id="main-nav"> 
    <ul id="navlist">
    <li id="active"><a href="index.html" >HOME</a></li>
    <li><a href="req.html">REQUIREMENTS</a></li>
    <li><a href="Links.html">LINKS</a></li>
    <li><a href="feedback.html">TESTIMONIALS</a></li>
    <li><a href="contact.html" id="current">CONTACT US</a></li>

    </ul>
  </div>
  <p>&nbsp;</p>

<div id="content"> 
 <p><p><p>xxxxxxx welcomes all correspondence.<br /> 
   Please use the form below for any questions, feedback and suggestions.<br />
   or call &nbsp; <strong><em>xxx xxx </em> &nbsp;&nbsp;xxx.xxx.7009 </strong><br />
   All information is confidential<br />
 <!--  <b>* required fields</b>-->

<form onSubmit="return checkForm(); method="post" action="xxx@gmail.com" >
 <fieldset><strong>* required fields</strong>
 <legend>Contact Form</legend>

 <label for="name"> Name :  <span class="required"></span></label>

 <div class="input">
   <input type="text" name="txtName" id="name" size="30" /><span class="message"></span>
 </div>

 <div class="error" id="emailError"> 
      Required: Please enter your email address 
    </div> 
    <div class="error" id="emailError2"> 
      This doesn't look like a real email address, please check and reenter 
    </div> 
      <label for="FieldData2"><strong> E-mail 
 address * :</strong> 
 </label>

 <div class="input">
 <input type="text" name="FieldData1" id="FieldData2" value="" size="30" /><span class="message"></span>
 </div> 

 <label for="comments"> <strong>Message * :</strong>
 </label><span class="message"></span>

 <div class="input">

 <textarea name="Message" id="message" margin-left="20px"
 margin-bottom="20px" rows="18" cols="40">
 </textarea>

  <input type="submit" value="Send Message" name="submit" >

 </div>

 </fieldset>
 </form>
 </div> 

 <div id="footer"> 

    <p>Copyrights 2013 xxx xxx &nbsp;|&nbsp; Web Design by xxx</p>
</div>

</body>
</html> 
```

这是我的 CSS：

```
@charset "UTF-8";
/* CSS Document */

html, body {
    margin: 0;
    padding: 0;
}

body {
    font-family: Arial, Helvetica, Verdana, sans-serif;
    font-size: 14px;
    background-image: url(../images/backgrd.jpg);   
}

.hidden {
    display: none;
}

#page-container {
    width: 900px;
    margin: auto;
}

#containerdiv { float: left; position: relative; } 
.cornerimage { position: absolute; top: 0; left: 0; } 

#main-nav {
    margin-top: -142px;
    height: 40px;
}

#navlist {
    margin-left: 290px;
    padding:0;
    text-align: left;
}

#navlist ul, #navlist li {
margin: 0;
padding: 0;
color: #000000;
font-family: Arial, Helvetica, Verdana, sans-serif;
font-weight:bold;
font-size: 16px;
display: inline;
list-style-type: none;
}

#navlist a:link, #navlist a:visited {
    line-height: 20px;
    margin: 0 10px 0 10px;
    text-decoration: none;
    color: #CDCDCD;
}

#navlist a:link#current, #navlist a:visited#current,
#navlist a:hover {
    border-bottom: 3px solid #000000;
    padding-bottom: 2px;
    background: clear;
    color: #000000;
}

#header {
    height: 243px;
    background: #CDCDCD;
    }

#sidebar-a {
    float: right;
    width: 181px;
    height: 441px;
}

#ftcredits {
    text-align: left;
    padding: 5px 0 5px 0;
    font-family:Tahome, Arial, Helvetica, Sans-serif;
    font-size: 11px;
    color: #5d3b28;
}

#ftcredits a:link, a:visited {
    color: #666633;
    text-decoration: none;

}

#ftcredits a:hover {
    color: #db6d16;
}

#content {
    padding-left: 70px;
    padding-right: 10px;
    background: #CDCDCD;
    overflow: hidden;   
}

#footer { 
    font-family:Tahome, Arial, Helvetica, Sans-serif;
    font-size: 11px;
    color: #333333;
    background: #CDCDCD;
    padding: 1px 20px;
    line-height: 13px;
    border-top: 2px solid #5d3b28;
}

#footer a {
    color: #003366;
    text-decoration: underline; 
}

#footer a:hover {
    color: #003366;
}

h1 {color: #801F18;
    font-family: Arial, Helvetica, Verdana, sans-serif;
    font-size: 21px;
    font-weight: bold;
    text-align: center;
    padding-bottom: 15px;
}

h2 {
    color: #801F18;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    padding-bottom: 15px;
}

h5 {
    font-size: 15px;
    color: #663333;
    line-height:150%
}

exc {
    font-size: 17px;
    color: #000000;
    line-height:150%
}

p {
    line-height:150%
}

h3 {
    color: #666633;
    font-family: Arial, Helvetica, Verdana, sans-serif;
font-size: 11px;
height: 350px;
margin-top: -350px;
margin-left: 460px;
}

hr {
    width: 100%;
    border-top: 2px solid #333333;
    border-bottom: 0;
    float: left;
    line-height: 13px;
}
.double_column_list li {float:left; width:50%;
}

fieldset{ padding:10px;
          width:600px;
}
label {width:170px;
       float:left;
       text-align:right;
       clear:both;
       margin-bottom:20px;
    }

.input {width:350px;
      float:left;
      margin-left:10px;
      }

error{
    }

#content a {
    color: #003366;
    text-decoration: underline;
    }

#content h2 {
    margin: 0;
    padding: 0;
    padding-bottom: 15px;
}

#content p {
    margin: 0;
    padding: 0;
    line-height:150%;
    padding-bottom: 15px;
}
.container1 {
    display: inline;
  float: left;
    width: 320px;
    height:200px;
    padding: 10px;
    margin-bottom: 20px;
     -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    border: 1px solid #black;
    zoom: 100%;
    background-color: rgba(83,85,89,0.3);
}

.container2 {
    width: 320px;
    height:200px;
    padding: 10px;
    margin-left: 50px;
    margin-bottom: 20px;
    display: inline;
  float: left;
    /*-moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    border: 1px solid #black;
    zoom: 100%;
    background-color: rgba(83,85,89,0.3);*/

} 
```

这是我的 JS：

```
 function checkForm() {
  hideAllErrors();
  var formIsValid =
    /*showErrorAndFocusIf('FieldData0', isEmpty, 'nameError')*/
    /*&&*/ showErrorAndFocusIf('FieldData2', isEmpty, 'emailError');
    showErrorAndFocusIf('FieldData2', isAnInvalidEmail, 'emailError2');
    /*&& showErrorAndFocusIf('FieldData3', isEmpty, 'categoryError')*/
     showErrorAndFocusIf('FieldData1', isEmpty, 'messageError');

  /* For debugging, lets prevent the form from submitting. */
  if (formIsValid) {
    alert("Valid form!");
    return false;
  }

  return formIsValid;
}

function showErrorAndFocusIf(fieldId, predicate, errorId) {
  var field = document.getElementById(fieldId);
  if (predicate(field)) {
    document.getElementById(errorId).style.display = 'inline';
    if (field.select) {
      field.select();
    }
    field.focus();
    return false;
  }

  return true;
}

function isEmpty(field) {
  return field.value == '';
}

function isAnInvalidEmail(field) {
  var email = field.value;

  var ok = "1234567890qwertyuiop[]asdfghjklzxcvbnm.@-_QWERTYUIOPASDFGHJKLZXCVBNM";

  for(i = 0; i < email.length; i++){
    if(ok.indexOf(email.charAt(i)) < 0) {
      return true;
    }
  }

  re = /(@.*@)|(\.\.)|(^\.)|(^@)|(@$)|(\.$)|(@\.)/;
  re_two = /^.+\@(\[?)[a-zA-Z0-9\-\.]+\.([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
  return re.test(email) || !re_two.test(email);
}

function hideAllErrors() {
  /*document.getElementById("nameError").style.display = "none"*/
  document.getElementById("emailError").style.display = "none";
  document.getElementById("emailError2").style.display = "none";
  /*document.getElementById("categoryError").style.display = "none"*/
  document.getElementById("messageError").style.display = "none";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:57:09.433

几点：

您的 HTML 无效，您应该使用[W3C Validator](http://validator.w3.org/)之类的工具来检查您的 HTML。

您的元素名称和 ID 不一致。例如，您的“姓名”字段名为“txtName”，但 ID 为“name”，您的“电子邮件地址”字段名为“FieldData **1** ”，但 ID 为“FieldData **2** ”。使用一致且合理的名称，以便 HTML 和 JavaScript 易于编写和理解。

您通过删除`checkForm`函数中的 AND 运算符 (&&) 破坏了 JavaScript。该`showErrorAndFocusIf`函数返回一个布尔值，当指定字段有效时为真。调用的返回值应该针对所有验证约束进行组合，以确定整个表单是否已通过验证。

最后，JavaScript 中使用的字段 ID 和错误消息与 HTML 不匹配。JavaScript 使用 DOM 的`getElementById`函数来检索对字段的引用和 HTML 中的错误消息，因此您必须确保 id 匹配才能使代码正常工作。

我已经在新的 JSBin 中纠正了这些问题：http: [//jsbin.com/otinoz/2/edit](http://jsbin.com/otinoz/2/edit)

# iphone - iOS 的室内导航硬件/软件要求

> ID：15732181
> 
> 赞同：3
> 
> 时间：2013-03-31T17:16:44.967
> 
> 标签：iphone, ios, wifi, hardware, indoor-positioning-system

我正在为我的大学开发导航系统作为某种研究活动。我正在使用 SVGKit 来显示平面图。现在我需要为导航和跟踪提供用户定位服务。所以这是我的问题：

1) 我是否需要在大学安装一些特殊的硬件（例如 Cisco MSE，或者一些更便宜的类似物），或者我可以将一些软件/技术应用到我们当前的硬件上来确定服务器端用户位置？如果我这样做，我需要什么设备？我的意思是，整个大学一个单元，或者每层一个单元，或者什么？

2)

> Q：为什么Redpin iPhone客户端不符合iPhone SDK协议？答：Apple 不提供公共 API 来检索 WiFi 数据。为了让 iPhone 客户端正常工作，我们必须使用私有 API，这是 iPhone SDK 协议所不允许的。

(c) [http://redpin.org/faq.html](http://redpin.org/faq.html)

是不是意味着RedPin在AppStore中不被接受，所以我不能使用？

3) [Navizon ITS](http://www.navizon.com/product-navizon-indoor-triangulation-system)是否需要除标准路由器之外的某些特定硬件设备？

谢谢大家，希望大家能给我更好的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T10:13:44.233

室内定位是一个非常广阔的领域，有许多不同的解决方案可用，它们都使用不同的硬件/软件组合。有些不需要特定的硬件来工作，有些则需要非常昂贵的基础设施才能到位。最后，这一切都取决于您要达到的准确性。以下是最常用的解决方案，我按使用的技术类型对它们进行了排序：

1.  **Wifi**：这里使用了两种主要技术，三边测量和指纹识别。如果您的 uni 已经部署了接入点 (AP)，则两者都不需要特定的硬件。三边测量将信号强度转换为距离，然后相交圆圈（几乎与 GPS 完全相同）。一般来说，这具有较差的准确性，您需要知道 AP 的确切位置才能使其工作。指纹识别是一种模式匹配技术，您首先构建环境的无线地图，然后将测量结果与该地图进行匹配。
2.  **蓝牙**：与上述相同的技术可用于蓝牙节点。当然，蓝牙节点比 Wifi 少，因此您可能需要部署一些额外的节点才能使其足够准确。与 Wifi 相同的精度（大约 5 米）
3.  **航位推算**：使用加速度计、陀螺仪和指南针来计算用户的航向速度。需要通过另一种绝对定位技术定期进行初始化和校准。容易发生漂移，因此精度会随着时间的推移而迅速下降。好处是它非常便宜，不需要额外的硬件或初始调查阶段。
4.  **UWB**：基于飞行时间测量的非常精确的技术。发射器和接收器都需要昂贵的硬件。你可以用这个达到厘米精度，但这可能不是你想要的

这仍然是一个研究领域，所以要找到合适的东西并不容易。我建议联系你大学的 IT 部门，如果他们运行 Cisco 系统，我知道其中一些提供某种定位功能，但我没有太多细节。

至于您的 iPhone 问题，任何访问私有 API 以访问 Wifi 测量的应用程序都将被 App Store 拒绝，因此您将无法发布任何依赖 Wifi 的内容。你仍然可以将它用于研究目的，你只需要自己弄清楚代码，因为没有官方文档（虽然有一些非官方的文档）

祝你好运！

# r - 在 R 和 Stata 中输入值

> ID：15732183
> 
> 赞同：0
> 
> 时间：2013-03-31T17:16:52.593
> 
> 标签：r, stata

我有一个数据集，我称之为`sam.data`：

```
dput(sam.data)
structure(list(idn = c(1L, 2L, 3L, 4L, 5L, 6L, 66L, 62L, 7L, 
81L, 68L, 72L), n1 = c(1L, 2L, 3L, 4L, 5L, 6L, 6L, 6L, 7L, 7L, 
7L, 7L), x = c(9.95228, 11.4186, 10.3735, 10.5453, 10.7364, 9.85219, 
9.73307, 9.86304, 9.74097, 9.57359, 9.70899, 9.75185)), .Names = c("idn", 
"n1", "x"), row.names = c(NA, 12L), class = "data.frame")

sam.data

    idn n1     x
1    1  1  9.95228
2    2  2 11.41860
3    3  3 10.37350
4    4  4 10.54530
5    5  5 10.73640
6    6  6  9.85219
7   66  6  9.73307
8   62  6  9.86304
9    7  7  9.74097
10  81  7  9.57359
11  68  7  9.70899
12  72  7  9.75185 
```

对于`idn`不等于`n1`，我想创建一个新变量`y`，它的值`x`对应于`n1`，否则我希望将其分配为缺失。

预期输出应如下所示：

```
 idn n1        x        y
1    1  1  9.95228  
2    2  2 11.41860 
3    3  3 10.37350 
4    4  4 10.54530 
5    5  5 10.73640 
6    6  6  9.85219 
7   66  6  9.73307  9.85219
8   62  6  9.86304  9.85219
9    7  7  9.74097 
10  81  7  9.57359  9.74097
11  68  7  9.70899  9.74097
12  72  7  9.75185  9.74097 
```

我能够在 R 中生成一个接近的解决方案：

```
library(plyr)
sam.data2<-ddply(sam.data,.(n1),transform, y=x[which.min(idn)])
sam.data2
 sam.data2
   idn n1        x        y
1    1  1  9.95228  9.95228
2    2  2 11.41860 11.41860
3    3  3 10.37350 10.37350
4    4  4 10.54530 10.54530
5    5  5 10.73640 10.73640
6    6  6  9.85219  9.85219
7   66  6  9.73307  9.85219
8   62  6  9.86304  9.85219
9    7  7  9.74097  9.74097
10  81  7  9.57359  9.74097
11  68  7  9.70899  9.74097
12  72  7  9.75185  9.74097 
```

但是，我希望有一个更优雅的解决方案。

我也在寻找Stata的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:27:10.803

我不知道您想要什么，但只需使用您的输出，您可以通过查看 x 等于 y 的位置并将其替换为`""`：

```
sam.data2$y[sam.data2$x == sam.data2$y] <- ""
sam.data2

## > sam.data2
##    idn n1        x       y
## 1    1  1  9.95228        
## 2    2  2 11.41860        
## 3    3  3 10.37350        
## 4    4  4 10.54530        
## 5    5  5 10.73640        
## 6    6  6  9.85219        
## 7   66  6  9.73307 9.85219
## 8   62  6  9.86304 9.85219
## 9    7  7  9.74097        
## 10  81  7  9.57359 9.74097
## 11  68  7  9.70899 9.74097
## 12  72  7  9.75185 9.74097 
```

解决这个问题的方法很少，取决于你想用它做什么，取决于采取哪种方法。如果纯粹是为了美观，那么上面的内容很简单，但现在该列是字符而不是数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T17:40:46.040

`by` 从基本包中使用的另一个选项。

```
dat$y <- unlist(by(dat,dat$n1,  FUN=    
      function(x){
        res <- ifelse(x$idn==x$n1,
               NA,
               x$x[which.min(x$idn)])
        })) 
```

请注意，这里的结果与所需的输出略有不同，因为我使用的是 NA（数字）而不是字符串。

```
 idn n1        x       y
1    1  1  9.95228      NA
2    2  2 11.41860      NA
3    3  3 10.37350      NA
4    4  4 10.54530      NA
5    5  5 10.73640      NA
6    6  6  9.85219      NA
7   66  6  9.73307 9.85219
8   62  6  9.86304 9.85219
9    7  7  9.74097      NA
10  81  7  9.57359 9.74097
11  68  7  9.70899 9.74097
12  72  7  9.75185 9.74097 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T20:58:23.110

斯塔解决方案：

```
capture net install xfill, from(http://www.sealedenvelope.com/)
bys n1: gen y2=x/(idn==n1) 
xfill y2, i(n1) 
replace y2=. if n1==idn 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T17:21:21.290

Stata代码可能只是

```
sort n1, stable
by n1: gen y2 = x[1] if idn != n1 
```

（这是修改后的建议。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-30T13:28:00.313

@Nick 的 Stata 解决方案实际上可以在一行中使用`bysort`：

```
clear

input idn n1 x y
1  1  9.95228  9.95228
2  2 11.41860 11.41860
3  3 10.37350 10.37350
4  4 10.54530 10.54530
5  5 10.73640 10.73640
6  6  9.85219  9.85219
66  6  9.73307  9.85219
62  6  9.86304  9.85219
7  7  9.74097  9.74097
81  7  9.57359  9.74097
68  7  9.70899  9.74097
72  7  9.75185  9.74097
end

bysort n1: gen y2 = x[1] if idn != n1

list

     +----------------------------------------+
     | idn   n1         x         y        y2 |
     |----------------------------------------|
  1\. |   1    1   9.95228   9.95228         . |
  2\. |   2    2   11.4186   11.4186         . |
  3\. |   3    3   10.3735   10.3735         . |
  4\. |   4    4   10.5453   10.5453         . |
  5\. |   5    5   10.7364   10.7364         . |
     |----------------------------------------|
  6\. |   6    6   9.85219   9.85219         . |
  7\. |  66    6   9.73307   9.85219   9.85219 |
  8\. |  62    6   9.86304   9.85219   9.85219 |
  9\. |   7    7   9.74097   9.74097         . |
 10\. |  81    7   9.57359   9.74097   9.74097 |
     |----------------------------------------|
 11\. |  68    7   9.70899   9.74097   9.74097 |
 12\. |  72    7   9.75185   9.74097   9.74097 |
     +----------------------------------------+ 
```

# javascript - Angular JS：在提交之前验证表单字段

> ID：15732184
> 
> 赞同：37
> 
> 时间：2013-03-31T17:16:52.730
> 
> 标签：javascript, angularjs, validation

我正在构建一个带有两步表单的 Angular JS 应用程序。它实际上只是一个表单，但使用 JavaScript 隐藏第一个面板并在用户单击“下一步”按钮并继续执行步骤 2 时显示第二个面板。我在步骤 1 中的某些字段上设置了“必需”验证，但显然，当用户单击“下一步”按钮时，它们不会得到验证......当在第 2 步结束时单击“提交”按钮时，它们会得到验证。

当单击“下一步”按钮时，有什么方法可以告诉 Angular 验证表单中的这些字段？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-31T21:24:19.613

我建议使用子表单。AngularJS 支持将一个表单放入另一个表单中，有效性从下层形式传播到上层形式；

这是示例：[http ://plnkr.co/edit/SruBmlGZZtbwiU8cktAp?p=preview](http://plnkr.co/edit/SruBmlGZZtbwiU8cktAp?p=preview)

这是一些代码，因此您可以掌握这个想法：

```
 <form name='myform' ng-init="step = 1">
    <div ng-show="step==1">
      <h3>Step 1: Enter some general info</h3>
      <div ng-form='step1form'>
        Name: <input ng-model="name" required>
      </div>
      <button ng-disabled="!step1form.$valid" ng-click="step = 2">Next</button>
    </div>

    <div ng-show="step==2">
      <h3>Step 2: Final info</h3>
      <div ng-form="step2form">
          Phone: <input ng-model="phone" required>
      </div>
      <button  ng-click="step = 1">Prev</button>
      <button ng-disabled="!myform.$valid" ng-click="submit()">Submit</button>
    </div>
    <div>
      Validation status:
      <div> Whole form valid? {{myform.$valid}} </div>
      <div> Step1 valid? {{step1form.$valid}} </div>
      <div> Step2 valid? {{step2form.$valid}} </div>
    </div>
  </form> 
```

# ruby-on-rails - Rails 服务器不在 Rubymine 中工作，但在终端中工作？

> ID：15732186
> 
> 赞同：2
> 
> 时间：2013-03-31T17:17:01.377
> 
> 标签：ruby-on-rails, ruby, rubymine

我正在运行 Ubuntu 12.04 `rvm env`：

```
export PATH ; PATH="/home/wojtek/.rvm/gems/ruby-1.9.3-p392/bin:/home/wojtek/.rvm/gems/ruby-    1.9.3-p392@global/bin:/home/wojtek/.rvm/rubies/ruby-1.9.3-    p392/bin:/home/wojtek/.rvm/bin:$PATH"
export rvm_env_string ; rvm_env_string='ruby-1.9.3-p392'
export rvm_path ; rvm_path='/home/wojtek/.rvm'
export rvm_ruby_string ; rvm_ruby_string='ruby-1.9.3-p392'
unset rvm_gemset_name
export RUBY_VERSION ; RUBY_VERSION='ruby-1.9.3-p392'
export GEM_HOME ; GEM_HOME='/home/wojtek/.rvm/gems/ruby-1.9.3-p392'
export GEM_PATH ; GEM_PATH='/home/wojtek/.rvm/gems/ruby-1.9.3-    p392:/home/wojtek/.rvm/gems/ruby-1.9.3-p392@global'
export MY_RUBY_HOME ; MY_RUBY_HOME='/home/wojtek/.rvm/rubies/ruby-1.9.3-p392'
export IRBRC ; IRBRC='/home/wojtek/.rvm/rubies/ruby-1.9.3-p392/.irbrc'
unset MAGLEV_HOME
unset RBXOPT 
```

当尝试在 RubyMine 5.0.2 中启动应用程序时，我得到：

```
/home/wojtek/.rvm/rubies/ruby-1.9.3-p392/bin/ruby     /home/wojtek/workspace/quotes/script/rails server -b 0.0.0.0 -p 3000 -e development
/home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/spec_set.rb:92:in `block in materialize': Could not find i18n-0.6.1 in any of the sources (Bundler::GemNotFound)
from /home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/spec_set.rb:85:in `map!'
from /home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/spec_set.rb:85:in `materialize'
from /home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/definition.rb:114:in `specs'
from /home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/definition.rb:159:in `specs_for'
from /home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/definition.rb:148:in `requested_specs'
from /home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/environment.rb:18:in `requested_specs'
from /home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:13:in `setup'
from /home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler.rb:120:in `setup'
from /home/wojtek/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/setup.rb:17:in `<top (required)>'
from /home/wojtek/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/wojtek/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require'

Process finished with exit code 1 
```

当我在终端中运行相同的命令行时，它工作正常：

```
/home/wojtek/.rvm/rubies/ruby-1.9.3-p392/bin/ruby /home/wojtek/workspace/quotes/script/rails server -b 0.0.0.0 -p 3000 -e development 
```

任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T18:23:28.360

1.  转到`Settings -> Ruby SDK and gems`并选择`Ruby1.9.3_orsomething_[global]`（这`[global]`是重要的部分）`Ruby SDK`。
2.  运行`Tools -> Bundler -> Install`。

不知道为什么，但它奏效了。

# html - 我应该在 2013 年用 HTML5 编码我的网站吗？

> ID：15732187
> 
> 赞同：2
> 
> 时间：2013-03-31T17:17:03.980
> 
> 标签：html, css

我已经开始学习和研究 HTML5，大约 6 年前我才研究过 HTML 经典，但我一直没有走得太远。我想建立一个网站并将其发布到万维网。我现在应该坚持使用 HTML4 吗？还是我应该直接跳入 HTML5？

我已阅读并了解许多新元素不受支持，但我觉得输入过时的标签有点愚蠢。2013 年是否更支持 HTML5 元素？

现在从 5 开始会更好吗，因为未来是 HTML5？我也开始做 CSS3，我认为它会比 CSS2 更让我受益。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:00:10.693

如果你有时间，我建议你读一读“关于 html5 的真相”。

Html5 可以这么说提供了很多新的东西。但市场的现实是一堆东西，要么只是简单地在少数浏览器上工作，而其他东西已经存在多年，只是被包含在所谓的 html5 品牌下。

还要记住，ie8 仍然代表着 ie 领域的一大块蛋糕，并且在未来几年内都会如此。最后，这一切都归结为您的项目目标受众是什么，以及您愿意牺牲或允许牺牲多少百分比的用户。

[Caniuse.com](http://caniuse.com/)应该对您有用，并且了解何时以及如何使用 polyfills。

我自己管理一个大网站，它使用一堆 html5、css3 和响应式设计，从手机到平板电脑再到台式机，在 ie7 中也能正常工作。

但是说嘿让我们用 html5 编码是不够的，而是需要大量的反思和妥协才能到达那里。

所以实际上我的答案是：尽可能多地使用优雅降级的css3部分。html5 中你认为不可或缺的部分......在你有一个备用 polyfill 的情况下。其余的......在加入流行语潮流之前思考 20 次。

最后，您甚至不必在 html4/5 或 css2/3 之间进行选择。您可以轻松地混合和匹配两者......因为后者只是建立在前者的基础上。只要你知道你在做什么，为什么。

但是，是的，学习吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:24:31.730

您应该使用符合您网站要求的语言对您的网站进行编码。

我的意思是，如果您提议的网站将包含 html 5 的功能，那么您应该用 html 5 编写它。

您最有可能使用 html 4 实现相同或类似的效果，但是当 html 5 内置了可以帮助您的功能时，为什么还要费心呢。

无论如何，我个人会使用 html 5，因为您基本上是在未来几年内对您的项目进行验证。

也使用 CSS3，但只需检查浏览器中规则的可用性。

希望这有帮助。

# java - 调整大小时如何避免Java窗口闪烁与边框？

> ID：15732189
> 
> 赞同：0
> 
> 时间：2013-03-31T17:17:06.453
> 
> 标签：java, swing, resize, flicker, window-resize

```
import javax.swing.*;

public class Main {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createMainWindow();
            }
        });
    }

    private static void createMainWindow() {
        JFrame mainFrame = new JFrame("Flicker Teste");
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.add(new MainPanel());
        mainFrame.pack();
        mainFrame.setSize(400, 400);
        mainFrame.setVisible(true);
    }
} 
```

主.java

```
import javax.swing.*;
import java.awt.*;

public class MainPanel extends JPanel {
    public MainPanel() {
        setBorder(BorderFactory.createLineBorder(Color.red)); //If I comment this line the diagonal is streteched on the border.
        setBackground(Color.green);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawLine(0, 0, 5000, 5000);
    }
} 
```

主面板.java

这两个文件是重现调整大小闪烁错误的代码。当您快速调整大小时，边框会重复，导致可怕的闪烁。如果没有边框，则重复与窗口边缘接触的对角线的最后一个像素，就好像“空白边框”由重复边缘处的像素组成。

有人知道如何阻止这种可怕的闪烁吗？我已经搜索了解决方案，但我没有找到任何解决方案。

# java - 如何在 JPanel 数组中使用 JCheckbox 数组

> ID：15732194
> 
> 赞同：1
> 
> 时间：2013-03-31T17:17:39.827
> 
> 标签：java, swing, jpanel, layout-manager, jcheckbox

我使用了**Hovercraft Full Of Eels**中的代码，并对其进行了一些操作，以获得我想要的编号。现在看起来不错，我可以读取状态，但我不知道如何使用表单上的按钮操作各个复选框。有人可以帮忙吗？

```
package and.lotto;
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.*;

@SuppressWarnings("serial")
public class NewLotto extends JPanel {
   public static final int GRID_PANEL_ROWS = 3;
   public static final int GRID_PANEL_COLS = 4;
   public static final int PANELS = 12;
   public static final int BOXES = 12;
   private static final int GAP = 1;
   private CheckBoxGrid[] checkBoxGrid = new CheckBoxGrid[PANELS];

   public NewLotto() {
      setLayout(new GridLayout(GRID_PANEL_ROWS, GRID_PANEL_COLS, GAP, GAP));
      for (int rows = 0; rows < BOXES; rows++) {
            checkBoxGrid[rows] = new CheckBoxGrid(rows,0);
            add(checkBoxGrid[rows]);
         }
   }

   private static void createAndShowGui() {
      NewLotto mainPanel = new NewLotto();
      ButtonPanel buttons = new ButtonPanel();

      JFrame frame = new JFrame("Lotto");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.setLayout(new BorderLayout());
      frame.add(buttons,BorderLayout.NORTH);
      frame.add(mainPanel, BorderLayout.SOUTH);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();

         }
      });
   }
}
@SuppressWarnings("serial")
class ButtonPanel extends JPanel {
    JButton generate;
    JButton clear;
    private ActionListener actionListener = new MyButtonListener();

    public ButtonPanel(){
        generate = new JButton("Generate numbers");
        generate.addActionListener(actionListener);
        clear = new JButton("Clear All");
        clear.addActionListener(actionListener);
        add(generate);
        add(clear);
    }

    private class MyButtonListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println("Testing");

        }

    }
}

@SuppressWarnings("serial")
class CheckBoxGrid extends JPanel {
   private static final int CHECK_BOXES = 35;
   private static final int CHECK_BOX_COLS = 6;
   private static final int CHECK_BOX_ROWS = 6;
   private static final int GAP = -5;
   private JCheckBox[] checkBoxes = new JCheckBox[CHECK_BOXES];
   private int gridIndex;
   private ItemListener itemListener = new MyCheckBoxListener();
   private int row;
   private int col;

   public CheckBoxGrid(int row, int col) {
      this.row = row;
      this.col = col;
      gridIndex = row + col + 1;
      setBorder(BorderFactory.createTitledBorder(String.valueOf(gridIndex)));
      setLayout(new GridLayout(CHECK_BOX_ROWS, CHECK_BOX_COLS, GAP, GAP));

      for (int cbRow = 0; cbRow < checkBoxes.length; cbRow++) { 
            JCheckBox checkBox = new JCheckBox();
            checkBox.addItemListener(itemListener);
            add(checkBox);
            checkBox.setRolloverEnabled(false);
            checkBox.setRequestFocusEnabled(false);
            checkBoxes[cbRow] = checkBox;
      }
      checkBoxes[0].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red01.png")));
      checkBoxes[0].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red01sel.png")));

      checkBoxes[1].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red02.png")));
      checkBoxes[1].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red02sel.png")));

      checkBoxes[2].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red03.png")));
      checkBoxes[2].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red03sel.png")));

      checkBoxes[3].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red04.png")));
      checkBoxes[3].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red04sel.png")));

      checkBoxes[4].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red05.png")));
      checkBoxes[4].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red05sel.png")));

      checkBoxes[5].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red06.png")));
      checkBoxes[5].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red06sel.png")));

      checkBoxes[6].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red07.png")));
      checkBoxes[6].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red07sel.png")));

      checkBoxes[7].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red08.png")));
      checkBoxes[7].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red08sel.png")));

      checkBoxes[8].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red09.png")));
      checkBoxes[8].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red09sel.png")));

      checkBoxes[9].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red10.png")));
      checkBoxes[9].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red10sel.png")));

      checkBoxes[10].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red11.png")));
      checkBoxes[10].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red11sel.png")));

      checkBoxes[11].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red12.png")));
      checkBoxes[11].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red12sel.png")));

      checkBoxes[12].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red13.png")));
      checkBoxes[12].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red13sel.png")));

      checkBoxes[13].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red14.png")));
      checkBoxes[13].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red14sel.png")));

      checkBoxes[14].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red15.png")));
      checkBoxes[14].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red15sel.png")));

      checkBoxes[15].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red16.png")));
      checkBoxes[15].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red16sel.png")));

      checkBoxes[16].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red17.png")));
      checkBoxes[16].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red17sel.png")));

      checkBoxes[17].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red18.png")));
      checkBoxes[17].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red18sel.png")));

      checkBoxes[18].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red19.png")));
      checkBoxes[18].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red19sel.png")));

      checkBoxes[19].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red20.png")));
      checkBoxes[19].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red20sel.png")));

      checkBoxes[20].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red21.png")));
      checkBoxes[20].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red21sel.png")));

      checkBoxes[21].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red22.png")));
      checkBoxes[21].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red22sel.png")));

      checkBoxes[22].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red23.png")));
      checkBoxes[22].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red23sel.png")));

      checkBoxes[23].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red24.png")));
      checkBoxes[23].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red24sel.png")));

      checkBoxes[24].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red25.png")));
      checkBoxes[24].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red25sel.png")));

      checkBoxes[25].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red26.png")));
      checkBoxes[25].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red26sel.png")));

      checkBoxes[26].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red27.png")));
      checkBoxes[26].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red27sel.png")));

      checkBoxes[27].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red28.png")));
      checkBoxes[27].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red28sel.png")));

      checkBoxes[28].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red29.png")));
      checkBoxes[28].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red29sel.png")));

      checkBoxes[29].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red30.png")));
      checkBoxes[29].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red30sel.png")));

      checkBoxes[30].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red31.png")));
      checkBoxes[30].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red31sel.png")));

      checkBoxes[31].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red32.png")));
      checkBoxes[31].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red32sel.png")));

      checkBoxes[32].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red33.png")));
      checkBoxes[32].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red33sel.png")));

      checkBoxes[33].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red34.png")));
      checkBoxes[33].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red34sel.png")));

      checkBoxes[34].setIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red35.png")));
      checkBoxes[34].setSelectedIcon(new ImageIcon(NewLotto.class.getResource("/and/lotto/img/red35sel.png")));
   }

   private class MyCheckBoxListener implements ItemListener {

      @Override
      public void itemStateChanged(ItemEvent itemEvt) {
         JCheckBox source = (JCheckBox) itemEvt.getSource();
         boolean selected = source.isSelected();
         int cbRow = -1;

         for (int r = 0; r < checkBoxes.length; r++) {
              if (source.equals(checkBoxes[r])) {
                  cbRow = r;  
              }
         }

         String text = String.format("Grid %d, selected: %b, at %d", 
               (row + col + 1), selected, cbRow);
         System.out.println(text);
      }

   }

} 
```

这是原始问题：

我正在尝试创建一个包含 12 个 JPanel 的数组的布局，每个 JPanel 包含一个包含 35 个 JCheckbox 的数组。我遇到的问题是，尽管面板和复选框在表单上都显示良好，但我无法访问各个复选框的属性。这是我使用的部分代码：

```
JPanel panel_south = new JPanel();
contentPane.add(panel_south, BorderLayout.SOUTH);
panel_south.setLayout(new GridLayout(3, 4, 1, 1));

for(Integer i =0; i<12;i++){
     Integer title = i+1;
     EtchedBorder border = new EtchedBorder(EtchedBorder.LOWERED, null, null);
     TitledBorder titled = new TitledBorder(border,title.toString());
     row[i] = new JPanel();
     row[i].setBorder(titled);
     row[i].setLayout(new GridLayout(6, 6, -6, -5));
     panel_south.add(row[i]);
     JCheckBox[] rad = new JCheckBox[35];

     for (int j = 0;j<35;j++){
    rad[j] = new JCheckBox();
    row[i].add(rad[j]);
     } 
```

当我尝试在 for 循环中使用这样的行时：

行[i].rad[j].setSelected(true);

我收到错误： *rad 无法解决* 我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:37:20.947

您应该重构包含 JTextField 网格的 JPanel，为此创建一个单独的类，该类接受一个数字作为其索引，并包含 JCheckBox 网格或 JTable。

例如，

```
import java.awt.GridLayout;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.*;

@SuppressWarnings("serial")
public class CheckBoxGridMain extends JPanel {
   public static final int GRID_PANEL_ROWS = 3;
   public static final int GRID_PANEL_COLS = 4;
   private static final int GAP = 1;
   private CheckBoxGrid[][] checkBoxGrid = new CheckBoxGrid[GRID_PANEL_ROWS][GRID_PANEL_COLS];

   public CheckBoxGridMain() {
      setLayout(new GridLayout(GRID_PANEL_ROWS, GRID_PANEL_COLS, GAP, GAP));
      for (int row = 0; row < checkBoxGrid.length; row++) {
         for (int col = 0; col < checkBoxGrid[row].length; col++) {
            checkBoxGrid[row][col] = new CheckBoxGrid(row, col);
            add(checkBoxGrid[row][col]);
         }
      }
   }

   private static void createAndShowGui() {
      CheckBoxGridMain mainPanel = new CheckBoxGridMain();

      JFrame frame = new JFrame("CheckBox Grid");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

@SuppressWarnings("serial")
class CheckBoxGrid extends JPanel {
   private static final int CHECK_BOX_ROWS = 6;
   private static final int CHECK_BOX_COLS = 6;
   private static final int GAP = -5;
   private JCheckBox[][] checkBoxes = new JCheckBox[CHECK_BOX_ROWS][CHECK_BOX_COLS];
   private int gridIndex;
   private ItemListener itemListener = new MyCheckBoxListener();
   private int row;
   private int col;

   public CheckBoxGrid(int row, int col) {
      this.row = row;
      this.col = col;
      gridIndex = row + col + 1;
      setBorder(BorderFactory.createTitledBorder(String.valueOf(gridIndex)));
      setLayout(new GridLayout(CHECK_BOX_ROWS, CHECK_BOX_COLS, GAP, GAP));

      for (int cbRow = 0; cbRow < checkBoxes.length; cbRow++) {
         for (int cbCol = 0; cbCol < checkBoxes[cbRow].length; cbCol++) {
            JCheckBox checkBox = new JCheckBox();
            checkBox.addItemListener(itemListener);
            add(checkBox);
            checkBoxes[cbRow][cbCol] = checkBox;
         }
      }
   }

   private class MyCheckBoxListener implements ItemListener {

      @Override
      public void itemStateChanged(ItemEvent itemEvt) {
         JCheckBox source = (JCheckBox) itemEvt.getSource();
         boolean selected = source.isSelected();
         int cbRow = -1;
         int cbCol = -1;
         for (int r = 0; r < checkBoxes.length; r++) {
            for (int c = 0; c < checkBoxes[r].length; c++) {
               if (source.equals(checkBoxes[r][c])) {
                  cbRow = r;
                  cbCol = c;
               }
            }
         }

         String text = String.format("Grid %d, selected: %b, at [%d, %d]", 
               (row + col + 1), selected, cbCol, cbRow); // corrected row/col order
         System.out.println(text);
      }

   }

} 
```

哪个显示
![在此处输入图像描述](https://i.stack.imgur.com/7DUYe.jpg)

# java - 从视图返回时 Session 属性返回 null

> ID：15732195
> 
> 赞同：0
> 
> 时间：2013-03-31T17:17:43.763
> 
> 标签：java, spring, jsp, spring-mvc

我目前正在尝试将搜索条件属性保存到两个页面之间的会话：搜索页面和编辑页面。目标是保存三个变量：sYear、submission、collectionPeriod。我将这些添加到下面的“搜索”屏幕控制器中的会话中：

`request.getSession().setAttribute("sYearSave", sYear); request.getSession().setAttribute("submissionSave", submission); request.getSession().setAttribute("collectionPeriodSave", collectionPeriod);`

在编辑屏幕控制器中，我将布尔值设置`isFromEditScreen`为`true.`This is 所以我知道我来自编辑屏幕。我确实打印出变量，并且在编辑控制器屏幕中正确地获取了值。

```
request.getSession().setAttribute("isFromEditScreen", new Boolean(true));
    sYearSave = (String)request.getSession().getAttribute("sYearSave");
    collectionPeriodSave = (String)request.getSession().getAttribute("collectionPeriodSave");
    submissionSave = (String)request.getSession().getAttribute("submissionSave"); 
```

但问题是当我使用后退按钮返回搜索屏幕时，搜索条件`sYearSave, collectionPeriodSave, and submissionSave`值返回`NULL.`由于某种原因，`isFromEditScreen`布尔值工作正常并返回`true.`它实际上进入语句但搜索条件返回`null.`搜索控制器代码如下：

```
if (isFromEditScreen != null && isFromEditScreen == true) {
        System.out.println("Inside isFromEditScreen ==== true");
        sYear = (String)request.getSession().getAttribute("sYearSave");
        collectionPeriod = (String)request.getSession().getAttribute("collectionPeriodSave");
        submission = (String)request.getSession().getAttribute("submissionSave");

        sYearSave = (String)request.getSession().getAttribute("sYearSave");
        collectionPeriodSave = (String)request.getSession().getAttribute("collectionPeriodSave");
        submissionSave = (String)request.getSession().getAttribute("submissionSave");

        System.out.println("sYearSave ==== " + sYearSave);
        System.out.println("submissionSave ==== " + submissionSave);
        System.out.println("collectionPeriodSave ==== " + collectionPeriodSave);
        System.out.println("isFromEditScreen set in else ==== " + isFromEditScreen);
        } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:00:36.547

如果您使用的是 Spring MVC（如问题标签所示），为什么不尝试使用 SessionAttributes 注释并使用 Spring 的 ModelAndView API？还要确保属性名称在整个应用程序中是唯一的。

```
@RequestMapping("view-name")
@SessionAttributes( { "isFromEditScreen" })
public class YourController {

...

    @RequestMapping
    public ModelAndView display() {

        ModelAndView modelAndView = new ModelAndView("view-name");
        modelAndView.addObject("isFromEditScreen", new Boolean(true));
        return modelAndView;
    }

...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:52:45.220

我的会话属性被覆盖。被忽略的错误。

# c++ - 为什么这个向量分配不起作用？

> ID：15732196
> 
> 赞同：1
> 
> 时间：2013-03-31T17:18:02.377
> 
> 标签：c++, stdvector, assignment-operator, copy-assignment

类似问题：

*   [STL 向量 reserve() 和 copy()](https://stackoverflow.com/questions/1128535/stl-vector-reserve-and-copy)
*   [std::vector reserve() 和 push_back() 比 resize() 和数组索引快，为什么？](https://stackoverflow.com/questions/1461276/stdvector-reserve-and-push-back-is-faster-than-resize-and-array-index-w)
*   [std::vector::resize() 与 std::vector::reserve()](https://stackoverflow.com/questions/13029299/stdvectorresize-vs-stdvectorreserve)

* * *

```
#include <vector>
#include <iostream>

using namespace std;

int main() {
  vector<vector<int> > vvi;
  vvi.resize(1);
  vvi[0].reserve(1);
  vvi[0][0] = 1;

  vector<int> vi = vvi[0];

  cout << vi[0]; // cout << vvi[0][0]; works

  return 0;
} 
```

这给了我一个段错误，我不知道为什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T17:19:15.607

```
 vvi[0].reserve(1);
 vvi[0][0] = 1; 
```

你需要`resize`，不是`reserve`。

`i`访问`i>=v.size()`未定义行为的元素。`reserve`影响`capacity`，不是`size`。

如果我要进入实际方面，我可能会推测您可能会成功完成任务`vvi[0][0] = 1;`（至少在发布模式下）。但主要的实际问题在这里

```
vector<int> vi = vvi[0]; 
```

问题是`vvi[0]`' 的大小为 0，因此`vi`' 的内部数组大小为 0，与`vvi[0]`' 的容量无关。这就是我认为你得到段错误的地方，在你之后

```
cout << vi[0]; // cout << vvi[0][0]; works 
```

但这都是猜测。你的问题的正确答案是这个

```
vvi[0].reserve(1);
vvi[0][0] = 1; 
```

已经有未定义的行为，不需要进一步考虑。

# css - 图像效果，CSS

> ID：15732197
> 
> 赞同：1
> 
> 时间：2013-03-31T17:18:10.083
> 
> 标签：css

我正在尝试重新创建一种在用户滚动时显示图像不同部分的方法。这个页面上有几个例子：[http ://apps.npr.org/unfit-for-work/?src=longreads&buffer_share=be155&utm_source=buffer](http://apps.npr.org/unfit-for-work/?src=longreads&buffer_share=be155&utm_source=buffer)

它是如何工作的？这是我到目前为止提取的内容：

```
h3#image1 {
    background-image: url(story1/1.png);
    display: block;
    padding: 40px 0;
}

html.backgroundsize .wallpaper { 
    background: center center fixed no-repeat;
    background-size: cover;
    -webkit-background-size: cover;
} 
```

和 HTML：

```
<h3 id="image1" class="wallpaper">Something</h3> 
```

但仅此一项只会给它一个背景。滚动经过背景时，背景不会滚动并显示图像的不同部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:32:01.620

`background: center center fixed no-repeat`有`fixed`附件而不是`scroll`附件。`scroll`滚动页面时将移动背景图像，以便图像“在滚动过去时不会滚动并显示图像的不同部分”。使用`fixed`under`background:`或 as`background-attachment: fixed;`将允许背景图像“在滚动经过时显示图像的不同部分”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T17:46:19.900

看起来效果是围绕 <section> 元素构建的

**HTML**

```
<section>
      <h3 id="hale-county" class="wallpaper">One In Four</h3>
      ...
</section> 
```

**CSS**

```
//background image definition
h3#hale-county {
    background-image: url(../img/hale-county-bus-152.jpg);
}

// wallpaper class is assigned to every h3 element within section
html.backgroundsize .wallpaper {
  ////// THIS PROPERTY IS IMPORTANT FOR THE EFFECT
  background: center center fixed no-repeat;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}

@media only all and (max-device-width: 1024px) {
  html.backgroundsize .wallpaper { 
    background-attachment: scroll;
  }
} 
```

# php - Zend Framework 2 将变量传递给模型

> ID：15732201
> 
> 赞同：5
> 
> 时间：2013-03-31T17:18:29.757
> 
> 标签：php, zend-framework2, models, multilingual

我目前正在开发一个多语言网站。对于多语言部分，我使用翻译器/poedit。我将所选语言存储在会话中。它工作正常。

模块.php：

```
public function onBootstrap(MvcEvent $e)
{
    // ...

    $session = new Container('base');

    if ($session->language !== NULL) {
        $e->getApplication()->getServiceManager()->get('translator')->setLocale($session->language);
    }
} 
```

在控制器中设置语言的操作：

```
public function setLanguageAction()
{
    $language = $this->params()->fromRoute('language');

    if (isset($this->languages[$language])) {

        $session = new Container('base');

        if ($language == 'en') {
            $session->language = NULL;
        } else {
            $session->language = $language;
        }
    }

    return $this->redirect()->toRoute('home');
} 
```

在 module.config.php 中，默认语言环境设置为 en。

正如我所说，一切正常，除了一件事。

我也在数据库中存储了一些与语言相关的数据，所以在我的模型中我需要知道当前的语言是什么。模型中的其他目的也需要当前语言。

所以我在每个模型的构造函数中包含以下代码：

```
$session = new Container('base');

if ($session->language !== NULL) {
    $this->language = $session->language;
} else {
    $this->language = 'default';
} 
```

我认为这不是最好的解决方案。我有太多的模型总是包含这个代码。

我想知道是否有一种解决方案可以将 $language 变量自动传递给我的所有模型，例如从 Module.php / getServiceConfig 函数：

```
public function getServiceConfig()
{        
    $session = new Container('base');

    return array(
        'factories' => array(
            'Application\Model\SomeThing' => function($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $c = new SomeThing($dbAdapter);
                $c->language = $session->language;
                return $c;
            }
        )
    );
} 
```

当然这是行不通的，但是能够做类似这样的事情会很棒，或者更通用的解决方案，没有必要将当前语言的值分配给工厂数组中每个模型的语言变量（例如，模型的通用引导程序，可以在一个地方为所有模型完成此分配）。

我的问题有解决方案吗？

谢谢您的帮助！

米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T19:08:40.200

如果您不想将语言注入到所有模型中，那么我至少可以想到另一种方法。

您可以使用初始化程序。初始化程序基本上允许您对通过服务管理器获取的服务执行初始化任务。因此，要使用这种方法，您必须通过服务管理器获取您的模型（至少是需要该语言的模型）。如果您需要注入任何依赖项，这就像将它们添加为可调用对象或工厂一样简单。关于初始化器的更多信息，你可以阅读[我写的关于服务管理器的文章](http://codingexplained.com/coding/php/zend-framework/zend-framework-2-service-manager)（向下滚动到关于初始化器的部分）。

因此，您可以做的是让您的模型实现一个接口，例如`LanguageAwareInterface`.

```
namespace User\Model;

interface LanguageAwareInterface {
    /**
    * Gets the language
    *
    * @return string
    */
    public function getLanguage();

    /**
    * Sets the language
    *
    * @param string $language
    */
    public function setLanguage($language);
} 
```

然后，您可以在模型中执行以下操作。

```
namespace User\Model;

class MyModel implements \User\Model\LanguageAwareInterface {
    /**
    * @var string $language The current language
    */
    protected $language;

    /**
    * Gets the language
    *
    * @return string
    */
    public function getLanguage() {
        return $this->language;
    }

    /**
    * Sets the language
    *
    * @param string $language
    */
    public function setLanguage($language) {
        $this->language = $language;
    }
} 
```

如果您愿意，您甚至可以创建一个具有上述代码的抽象基模型类，或者如果您想避免扩展一个类，可以编写一个简单的 trait。然后你的模型每个都可以扩展这个基类，但这取决于你的模型实际需要多少与当前语言一起工作。

现在为初始化程序。在我的文章中，我有一个如何通过方法调用添加它的示例，但您可能希望在配置文件中执行此操作（`Application`如果您使用 Zend Skeleton 应用程序，可能在模块中）。`Module`您可以从方法中的模块类返回一个数组（或指向配置文件）`getServiceConfig()`，也可以将其添加到键`YourModule/config/module.config.php`下的文件中`service_manager`。官方文档没有给出任何例子；事实上，初始化器是唯一缺少的东西。但是，它应该可以工作。

```
return array(
    /* Other configuration here */

    'service_manager' => array(
        'initializers' => array(
            'language' => function($service, $sm) {
                // $service is the service that is being fetched from the service manager
                // $sm is the service manager instance
                if ($service instanceof \User\Model\LanguageAwareInterface) {
                    $session = new \Zend\Session\Container('base');

                    if ($session->language === null) {
                        // Fetch default language from configuration
                        $config = $sm->get('Config');

                        $session->language = $config['translator']['locale'];
                    }

                    $service->setLanguage($session->language);
                }
            },
        ),
    ),
); 
```

上面的初始化程序检查从服务管理器获取的每个对象，看它是否实现了我们在上面创建的接口。如果是这样，则可以注入语言。在我的示例中，我检查它是否在会话中设置，如果没有，则从配置中获取它。您可能需要根据您的确切需求调整逻辑。请注意，初始化程序将在*每个*从服务管理器获取对象的时间，因此它确实增加了一点开销。然而，这并不重要，因为我们只是在服务未实现接口时进行简单的类型检查。另外，服务默认是共享的，这意味着一个服务只会被实例化一次；随后对同一服务的请求将重用先前实例化的请求。这有助于进一步限制开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T00:12:58.097

我想您可以首先在您想要的任何模块的 Module.php 中的服务管理器中注册您的会话模型，以便它在全球范围内可用，并在您需要访问会话时随时使用此服务。

```
public function getServiceConfig()
{        
    return array(
        'factories' => array(
            'AppSession' => function($sm) {
                  $session = new \Path\To\Session();
                  $session->doSomething();
                  return $session;
            }
        )
    );
} 
```

当您在服务管理器中的整个应用程序中注册各种模型时，然后注入您的会话服务。

```
public function getServiceConfig()
{        
    return array(
        'factories' => array(
            'Application\Model\SomeThing' => function($sm) {
                $c = new SomeThing();
                // You will have to create the set and get functions.
                $c->setDbAdapterService($sm->get('Zend\Db\Adapter\Adapter'));
                $c->setSessionService($sm->get('AppSession'));
                return $c;
            }
        )
    );
} 
```

在您的控制器上，从一开始就注入会话可能更有意义，以便会话准备好并等待您。

在你的 module.config.php...

```
return array(
    'controllers' => array(
        'factories' => array(
            'Application\Controller\Something' => function ($sm) {
                $locator = $sm->getServiceLocator();
                $c = new Application\Controller\SomethingController();
                $c->setSessionService($locator->get('AppSession'));
                return $c;
            },
        ),
    ),
    'router' => array(
        'routes' => array(
            'myroute' => array(
                'type' => 'Zend\Mvc\Router\Http\Segment',
                'options' => array(
                    'route' => '[/:action]',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Something',
                        'action'     => 'index',
                    ),
                ),
            ),
        ),
    ),
); 
```

# css - 带引导程序的滑出面板

> ID：15732211
> 
> 赞同：9
> 
> 时间：2013-03-31T17:19:16.073
> 
> 标签：css, twitter-bootstrap

[我使用 twitter 引导程序，并尝试在这里](http://codepen.io/Tyriar/pen/nJGfj)做类似的事情（滑出面板）。我已经看到了`nav-collapse`非常相似的效果，除了它从上方下降并且只出现在特定屏幕尺寸以下。希望现有代码可以使用效果如

[http://codepen.io/Tyriar/pen/nJGfj](http://codepen.io/Tyriar/pen/nJGfj)

可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-18T03:51:04.537

我以前使用过名为 SnapJS 的基于 Javascript 的插件： [https ://github.com/jakiestfu/Snap.js/](https://github.com/jakiestfu/Snap.js/)

这里有一些有用的实现演示：http: [//jakiestfu.github.io/Snap.js/demo/apps/default.html](http://jakiestfu.github.io/Snap.js/demo/apps/default.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-04T01:26:02.817

这看起来很像您需要的，并且与 Bootstrap 3.0 兼容： [https ://github.com/stevepeak/bump](https://github.com/stevepeak/bump)

这是一个很老的问题，但为了谷歌搜索，我认为它可能很好。

# php - 在 PHP 中解析一堆 JSON 对象

> ID：15732215
> 
> 赞同：0
> 
> 时间：2013-03-31T17:19:38.660
> 
> 标签：php, json, parsing

我想在 PHP 中解析以下一堆 JSON 对象。但在某种程度上，这是行不通的。

```
[
{"latitute":16.8045558404827,"longitude":36.9140487536788,
    "missionid":0,"status":0,"waypointid":0},
{"latitute":-14.093939943107658,"longitude":21.093734242022038,
    "missionid":0,"status":0,"waypointid":0}
] 
```

.

```
$obj = json_decode($_POST["waypoints"]);

foreach ($json->items as $item) {

    echo($item->{'longitude'});
    echo($item->{'latitude'});
    echo($item->{'missionid'});
    $query="INSERT INTO dio.wpoint (longitude, latitude, missionid, status, ) VALUES ("$item->{'longitude'}.","$item->{'latitude'}.",41)";
    mysql_query($query);    

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:22:34.937

据我所知，Mysql 不允许尾随逗号。

```
INSERT INTO dio.wpoint (longitude, latitude, missionid, status, ) 
```

应该

```
INSERT INTO dio.wpoint (longitude, latitude, missionid, status) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:21:21.837

您在 foreach 循环中使用`$json`as 变量，而不是`$obj`. 您也不需要引用该成员`items`，因为它在您的 JSON 中不存在。

在查询中，只有三个值存在，而应该有四个与列名匹配 - 我不确定您在查询中到底想要什么值，但我做出了有根据的猜测。

```
$obj = json_decode($_POST["waypoints"]);

foreach ($obj as $item) {
    echo $item->{'longitude'};
    echo $item->{'latitude'};
    echo $item->{'missionid'};

    $query="INSERT INTO dio.wpoint (longitude, latitude, missionid, status)
            VALUES (" . $item->{'longitude'} . ", " .
                        $item->{'latitude'} . ", " .
                        $item->{'missionid'} . ", " .
                        $item->{'status'} .
                   ")";
    mysql_query($query);    
} 
```

如评论中所述，拼写存在一些不一致之处，应予以修复。根据您的 PHP 版本，`mysql_query`可能已弃用，因此值得研究替代方案，例如[MySQLi](http://www.php.net/manual/en/book.mysqli.php)和[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)。您的查询也可能容易受到 SQL 注入的影响，请阅读[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)应该提供指导。

# scala - scala中的else语句中的if语句？

> ID：15732220
> 
> 赞同：0
> 
> 时间：2013-03-31T17:20:09.760
> 
> 标签：scala

我在下面有一个方法（注意我已经简化以使问题更简单）

```
def getMyInt(flag1: Boolean, flag2: Boolean): Int = {
  if (flag1) 0;
  else {
    if (flag2) 1;
    if (flag2) 2;
  } 
```

}

问题是即使内部`if`表达式返回 Ints，`else`包装的也会返回`Unit`。因此我得到：

```
Multiple markers at this line
- type mismatch; found : Unit 
 required: Int 
```

有小费吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T17:30:50.757

您可以尝试包装`flag1`并`flag2`在其`Tuple`上进行模式匹配。

```
def getMyInt(flag1: Boolean, flag2: Boolean): Int = (flag1, flag2) match {
  case (true, _) => 0
  case (_, true) => 1
  //Other cases
} 
```

此外，作为参数的控制标志[闻起来很有趣](https://en.wikipedia.org/wiki/Code_smell)。Martin Fowler 有[一篇](http://martinfowler.com/bliki/FlagArgument.html)关于重构标志参数的文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T17:29:14.293

如果您的内部 else 语句中的 if 语句均不适用，则不会返回任何内容。将您的代码更改为如下所示，它将编译：

```
def getMyInt(flag1: Boolean, flag2: Boolean): Int = if (flag1) 0
  else {
    if (flag2) 1
    else 2
  } 
```

我更改了内部 else 中的第二个 if 语句，因为两次 if flag2 没有意义。

# aiml - AIML：没有得到正确的答案

> ID：15732222
> 
> 赞同：2
> 
> 时间：2013-03-31T17:20:22.143
> 
> 标签：aiml

我正在尝试学习 AIML，但无法理解我哪里出错了：

```
<aiml>
    <category>
        <pattern>I LIKE * ROME</pattern>
        <template>
            I love talking about 
            <set name="topic">rome</set>
            too!
            <random>
                <li>Did you know that slaves made up 40% of the population of Ancient Rome?</li>
                <li>Did you know the Colosseum could sit 250'000 people?</li>
            </random>
        </template>
    </category>
    <topic name="rome">
        <category>
            <pattern>No *</pattern>
            <that>Did you know that slaves made up 40% of the population of Ancient Rome?</that>
            <template>So I've taught you something!</template>
        </category>
    </topic>
</aiml> 
```

第一部分工作正常，如果我输入类似：“我喜欢罗马的历史”，我会得到预期的默认答案和随机答案之一。

但是，如果他给我“奴隶”随机答案，而我说“不，我不知道”，他不会给我“所以我教过你一些东西”的答案”。他从某个地方得到答案else 在他的代码中，但考虑到我已经设置了“主题”和 <that> 标签，我已经非常具体并且希望得到我的自定义答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T02:36:38.887

有

```
<pattern>No _</pattern> 
```

在您的目标文件中的某些位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T05:10:34.620

标签的使用`<that>`是你的瓶颈。对于一张图片的价值，我在初始模板中更改了您的回复，并且它起作用了。

关于机器人的第二次回复。如果使用它，那么 rome 主题中的类别将永远不会起作用，因为`<that>`标签中的 40$'ers 必须是机器人的最后响应。

聊天机器人的回复可能有些混乱。之前话题总是改成“罗马”，但为了让话题“罗马”中的模式起作用，聊天机器人不得不谈论 40% 的人。我只是将两者结合以获得相同的结果。

另请注意，标签中的问号`<that>`没有放在那里。机器人会将其剥离并存储剩余的结果。

```
<?xml version="1.0" encoding="UTF-8"?>
<aiml>
<category>
  <pattern>I LIKE * ROME</pattern>
  <template>
    <random>
      <li>Did you know that slaves made up 40% of the population of Ancient <set name="topic">Rome</set>?</li>
      <li>Did you know the Colosseum in could sit 250'000 people?</li>
    </random>
  </template>
</category>
<topic name="rome">
  <category>
    <pattern>No *</pattern>
    <that>Did you know that slaves made up 40% of the population of Ancient Rome</that>
    <template>
      So I've taught you something!
    </template>
  </category>
</topic>
</aiml> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-16T12:27:59.220

您可以在标签中使用通配符 ( `*`) `<that>`，因此您只能匹配机器人的部分答案（例如“你知道奴隶组成了吗”）。

另请注意，该主题可以在`<think>`标签内设置，该标签不显示其内容。

我用 Python AIML 解释器测试了以下代码。它按预期工作，但是当主题名称和内容`<that>`和`<pattern>`标签为小写时，它不起作用。

```
<aiml>
<category>
    <pattern>I LIKE * ROME</pattern>
    <template>
        I love talking about Rome too!
        <think><set name="topic">ROME</set></think>
        <random>
            <li>Did you know that slaves made up 40 of the population of Ancient Rome?</li>
            <li>Did you know the Colosseum could sit 250'000 people?</li>
        </random>
    </template>
</category>
<topic name="ROME">
    <category>
        <pattern>NO</pattern>
        <that>* DID YOU KNOW THAT SLAVES MADE UP *</that>
        <template>So I've taught you something!</template>
    </category>
</topic>
</aiml> 
```

# ruby-on-rails-3.2 - 找不到或无法读取要导入的文件：foundation/foundation-global

> ID：15732224
> 
> 赞同：3
> 
> 时间：2013-03-31T17:20:23.967
> 
> 标签：ruby-on-rails-3.2, sass, zurb-foundation

我无法让它与 sass 文件中的任何导入文件一起使用，即使使用 activeadmin( `File to import not found or unreadable: active_admin/mixins`)

奇怪的是，在我的应用程序资产目录中没有名为基础的目录，当我安装 gem 并按照文档生成文件时，也没有 active_admin。

```
Syntax error: File to import not found or unreadable: foundation/foundation-global.
              Load paths:
                /Users/me/app/assets/stylesheets
                /Library/Ruby/Gems/1.8/gems/compass-0.12.2/frameworks/blueprint/stylesheets
                /Library/Ruby/Gems/1.8/gems/compass-0.12.2/frameworks/compass/stylesheets
                Compass::SpriteImporter 
```

还有一件事是，因为它可以帮助解决这个问题，我正在使用 RVM。很奇怪，`/usr/local/rvm/gems/ruby-1.9.3-head`当我回显 $GEM_PATH 时，我实际上有 gem 路径，但错误在上面显示了不同的 gem 路径。

这是我的应用程序中的 Gemfile：

```
group :assets do
  gem 'compass'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'zurb-foundation', '~> 4.0.4'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

gem 'activeadmin' 
```

有没有人可以告诉我这里发生了什么？我已经和它一起生活了几个星期。由于我无法修复它，因此每次重新启动服务器或每次更改 sass 文件时都必须删除`foundation_and_overrides.css`and 。`active_admin.css`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:20:53.677

您只需要添加到您的 Compass config.rb 中：

```
 require "zurb-foundation" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T19:45:35.957

`bundle install`从您的项目目录（具有 的目录）中运行`Gemfile`。

## 更新 2013-04-01

Bundler 创建了一组单独的 gem。您的项目似乎没有意识到这一点。

尝试做`bundle uninstall`，`Gemfile`远离项目并在全球范围内安装 gems。如果您的项目开始工作，那么您就会知道问题出在哪里。

[RVM 的GemSets](https://rvm.io/gemsets/)也可以维护一组单独的 gem 。请也检查一下。

## 更新 2013-04-01 #2

请以您自己`which ruby`和`which compass`运行您的应用程序的用户的身份运行。这是一个如何在 Linux 上执行此操作的示例，在 Mac 上应该类似：

```
sudo su -ls /bin/bash www-data
which ruby
which compass 
```

请对此问题发表评论，并为您的用户和 Web 应用程序用户提供结果。

## 更新 2013-04-02

尝试使用`compass-rails`gem 而不是`compass`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-09T07:56:14.013

我遇到了同样的问题并在这里找到了解决方案：

[https://stackoverflow.com/a/18803119/661471](https://stackoverflow.com/a/18803119/661471)

引用该答案：

> 这是运行 rails g foundation:install 时使用的基础版本与您安装的版本不同的结果。Foundation-global 不再作为foundation_and_overrides.scss 的一部分导入。

# java - 删除字符串中的制表符

> ID：15732236
> 
> 赞同：0
> 
> 时间：2013-03-31T17:21:18.503
> 
> 标签：java, string, tabs, formatting

我需要格式化这个`String`：

```
"public class geo {
    public static void main(String[] args) {
        if (true) {
           System.out.print("Yes");
            if (false) {
                System.out.prinln("DSadaDSa");
                x = 4;
                blahblah();
            }
        }
    }
}" 
```

得到之间的一切：

```
"public class geo {
    public static void main(String[] args) {

    }
}" 
```

所以在这个例子中，我想要得到的字符串是：

```
"if (true) {
    System.out.print("Yes");
    if (false) {
        System.out.prinln("DSadaDSa");
        x = 4;
        blahblah();
    }
}" 
```

目前我通过用空字符串替换我不想要的字符序列来做这件事有点混乱，但最后`String`我留下了

```
 "if (true) {
        System.out.print("Yes");
        if (false) {
            System.out.prinln("DSadaDSa");
            x = 4;
            blahblah();
        }
    }" 
```

每行仍然有前导标签。

有没有一种简单的方法可以删除这些选项卡，以便`String`有效地将它们向左移动一个选项卡宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:24:19.533

你熟悉 String 类的`trim()`方法吗？

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim())

从文档：

> ... 返回字符串的副本，省略前导和尾随空格 ...

我相信这将适用于您的情况。您可以建立在 Jakob 所写的基础上，而不是`lines[i]=lines[i].substring(/*...*/);`简单地做`lines[i] = lines[i].trim();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:24:48.327

试试这个：

```
String s=what you already have;

//split the string into lines
String[] lines=s.split("\n");

//cut off the beginning of each one
for(int i=0;i<lines.length;i++)
    lines[i]=lines[i].substring(/*1, 2, 4, or 8 depending on tab formatting*/);
return s; 
```

# button - 我想使用两个或更多具有不同功能的按钮。怎么做？

> ID：15732242
> 
> 赞同：0
> 
> 时间：2013-03-31T17:22:11.347
> 
> 标签：button, assembly, pic

我想让 2 个或更多按钮等待按下。

例如，增加或减少 7 段显示中的值。Button1 递增，Button2 递减该值。对于下面的代码，我可以减少或增加它，但不能同时做。

对于一个按钮，我这样做的方式是：

PROCESS2: ;SW09 & SW11 的功能

.....................

```
 BTFSC   PORTB,7       This line is to understand whether we pressed button or not.        

    GOTO    PROCESS2      We cant go below until the button pressed 

    CALL    UP        ;Up increments the value which will be shown in the 7-segment-display.

    BTFSS   PORTB,7

    GOTO    $-1 
```

那么如何为多个按钮做到这一点。算法是什么？其背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:41:24.637

我不知道它是否必须使用汇编程序，但在 C 中这很简单。

假设 BUTTON1 和 BUTTON2 在其他地方定义为输入引脚并且它们具有上拉电阻，您可以尝试：

```
void checkIncrement(void)
{
    if (BUTTON1 == 0) {
        while (BUTTON1 == 0) DelayMs(1); // software debounce
        increment(); // call the increment function
    }
}

void checkDecrement(void)
{
    if (BUTTON2 == 0) {
        while (BUTTON2 == 0) DelayMs(1);
        decrement();
    }
}

int main(void)
{
    // your main loop
    while (1)
    {
        checkIncrement();
        checkDecrement();

        // do something else if none of the buttons are pressed
    }
} 
```

如果需要汇编程序，您可以尝试编译并查看汇编程序清单以了解它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-19T02:40:12.003

我不熟悉 PIC 程序集，但我记得 MCS51 程序集，也许这不是根据您的问题，但可以用作参考。

我假设按钮工作为低电平有效（当按下按钮时，按钮端口将被拉低或按钮端口将在按下按钮时接地）。

```
 button1 EQU P1.0 ; Port1 bit0 as button1 (input)
    button2 EQU P1.1 ; Port1 bit1 as button2 (input)
    led     EQU P2   ; Port2 bit 0 until 8 as led (output)

    ORG  00H      
    mov A,#7FH       ; init led value 7FH = 0111 1111B
    mov R0,A
main:

btn1sts:
    jb button1, btn2sts  ;if button1 not pressed then check button2 status
    jnb button1, $       ;wait until button 1 is released
    inc R0               ;A value only increases after the button1 is released.
    sjmp process:

btn2sts:
    jb button2, btn1sts  ;if button2 not pressed then check button1 status
    jnb button2, $       ;wait until button 2 is released
    dec R0               ;A value only decreases after the button2 is released.

process:
   mov A, R0        
   mov led, A       ;show A value in P2 (led).
   ljmp main:       ;goto main 
```

# freebase - 在 Freebase MQL 中获取 /common/topic/description

> ID：15732247
> 
> 赞同：2
> 
> 时间：2013-03-31T17:22:48.140
> 
> 标签：freebase, mql

再会，

如何在 Freebase 中获取主题文本描述？例如，我询问有关切尔诺贝利灾难的 MQL 查询：

```
[{
  "type": "/common/topic",
  "description": null,
  "mid": "/m/07q37w"
}] 
```

但获得空描述。同时我可以在 Freebase 页面看到非空描述：[http ://www.freebase.com/m/07q37w](http://www.freebase.com/m/07q37w)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:52:00.903

`/common/topic/description`是一个不能通过 MQL 访问的伪属性。您可以按如下方式使用主题 API：

[https://www.googleapis.com/freebase/v1/topic/m/07q37w?filter=/common/topic/description](https://www.googleapis.com/freebase/v1/topic/m/07q37w?filter=/common/topic/description)

# php - WAMP 中显示的 PHP 代码

> ID：15732249
> 
> 赞同：0
> 
> 时间：2013-03-31T17:22:54.333
> 
> 标签：php, wamp

我尝试设置 xampp 3 小时。放弃了这一点，使用 wamp 获得了更多的成功，但 php 代码无法编译。

我的 www 文件夹中有 index.htm 和 header.php。

index.htm 代码：

```
<?php include('header.php');?>

<body>
    <h1>This is a header</h1>
    <p>this is a paragraph</p>

</body>
</html> 
```

header.php 代码

```
<?php
    echo "<!doctype html><html lang='en'><head><title>PAGETITLE</title></head>";
?> 
```

php 代码显示而不是编译。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:25:01.817

您不能`<?php include('header.php');?>`在 HTML (.htm) 文件中使用，因此请将扩展名更改为 .php，它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:27:02.000

`.html`PHP 在文件中不起作用。它仅适用于`.php`文件，或`.php, .phtml, .php4 .php3, .php5, .phps`

# relational-database - 归一化为 3NF

> ID：15732253
> 
> 赞同：0
> 
> 时间：2013-03-31T17:23:19.553
> 
> 标签：relational-database, normalization

```
Item_ID   Valuer   Company   value
99       Jon Lane  Lite As  3000
99       Ray dell  Hatches   3500
99       Grace Red  Webb      3000
99       Hell Sim  Chris     4000 
```

我将`item_Id`and`Valuer`作为（复合）主键。

帮助我正常化到 3nf。这不是家庭作业，而是我正在努力提高我的正常化技能的事情。发现大多数表格很容易标准化，但这个有我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:32:36.997

评估数据库设计所在的 NF 需要了解适用的 FD。那些在哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:19:38.237

根据给定的数据，我可以起草如下的 FD：

(item_Id,Valuer) -> (company,value)

由于 (item_Id,Valuer) 是 PKey ，它也是 Super key 。

所以它满足了 FD X-> AX 应该是 SKey 的 3nf 约束。

所以它在3NF中。

# macos - 将本地公式注入 brew

> ID：15732257
> 
> 赞同：1
> 
> 时间：2013-03-31T17:23:56.837
> 
> 标签：macos, homebrew, dependency-management

我有一个依赖复杂的项目，我想让其他开发人员更容易抓住它们。我有一个`Capfile`, `Gemfile`, `Guardfile`, `Procfile`, 和`Rakefile`，所以我想......为什么不`Brewfile`为克隆项目的 mac 开发人员管理系统级包依赖项呢？

我希望制作一个本地公式，它只是一个依赖项列表，例如：

```
# Brewfile
require 'formula'

class DeveloperProject < Formula
  depends_on 'mongodb'
  depends_on 'postgresql'
  depends_on 'solr'
  depends_on 'phantomjs'
end 
```

第一次检查 repo 的开发人员可以`brew install developer_project`，并且随着依赖项的变化，他们可以`brew update developer_project`.

问题是，我的 brew-fu 不够好，无法弄清楚如何让 brew 识别这个公式，而不需要在某个地方为它创建一个完整的存储库。

起初我以为我可以尝试以某种方式传入文件路径：

```
brew install /Users/me/Projects/DeveloperProject/Brewfile 
```

然后我想我可能能够模拟一个水龙头，而不必托管一个实际的仓库，以进行适当的备用公式源管理：

```
mkdir -c /usr/local/Library/Taps/local-tap/Formula/
ln -s \
  /Users/me/Projects/DeveloperProject/Brewfile \
  /usr/local/Library/Taps/local-tap/Formula/developer_project.rb
brew install developer_project 
```

然后我想我可以将它符号链接到我的公式中，尽管它会导致脆性`brew update`：

```
ln -s \
  /Users/me/Projects/DeveloperProject/Brewfile \
  /usr/local/Library/Formula/developer_project.rb
brew install developer_project 
```

我找不到一种方法来完成这些工作，而且每种方法都感觉越来越老套。有没有办法用 brew 做到这一点而不会像存储库一样嘎嘎作响？否则，有没有办法像远程公式源一样成功嘎嘎？我是否错过了为项目制作 brew manifest 的现有方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:01:47.217

您可以使用 URL 安装任意公式，但不能使用文件名。因此，如果您将该`brew install /Users/me/...`命令中的路径转换为`file://`​​URL，您可能可以简单地使其工作，而无需维护 repo 或 tap 或类似的东西。

请注意，要让它自动更新内容，您需要在公式中明确输入版本号，并在每次依赖项更改时对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:18:51.790

看来我不是第一个有[这个想法](https://github.com/andrew/brewdler)的人！Brewdler 不支持特定的水龙头或任何东西，但它对我有用。

# ruby-on-rails - Rails 3 STI 模型中的意外回调行为

> ID：15732262
> 
> 赞同：0
> 
> 时间：2013-03-31T17:24:45.570
> 
> 标签：ruby-on-rails, ruby, polymorphism, associations, sti

无法弄清楚为什么会发生这种情况：

```
class Foo < ActiveRecord::Base
  belongs_to :belongable, :polymorphic => true

  def after_save 
    if belongable.kind_of?(User)
      send(:some_method)
    end
  end
end

class Bar < Foo

  def some_method
    #Do something
  end
end

class Group < ActiveRecord::Base
  has_many :belongings, :as => :belongable
end

class User < ActiveRecord::Base
  has_many :belongings, :as => :belongable
end 
```

“Bar”类是从 Foo 继承的 STI 模型（Foo 具有“类型”属性）。组和用户都可以有很多条。

以下按预期工作（未调用 some_method）：

```
g = Group.create
g.belongings << Bar.new
g.save 
```

以下调用 some_method：

```
Group.first.belongings.first.update_attributes(:attr => :val) 
```

如何/为什么？！一旦关联已经存在，为什么不评估“after_save”回调中的条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:35:06.423

`Group.create.belongings << Bar.new`从不将 Bar 保存到数据库中。所以`after_save`永远不会被调用。第二个示例使用`update_attributes`which 确实保存到数据库。这就是它触发的原因`after_save`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:22:40.513

这是 STI 和多态性的混合。你的 Foo 模型应该有belongable_type 和belongable_id 属性。

我不能完全将其击落，但是将您的比较更改为这个应该可以：

```
belongable_type == "User" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:40:53.447

“some_method”不能称为“更新”... :-/

AR 对象已经定义了一个名为 update ( [http://apidock.com/rails/ActiveRecord/Persistence/update](http://apidock.com/rails/ActiveRecord/Persistence/update) ) 的方法，并且当您调用“update_attributes”时会调用此方法。

# objective-c - 比较两个数组忽略顺序

> ID：15732279
> 
> 赞同：6
> 
> 时间：2013-03-31T17:26:17.370
> 
> 标签：objective-c, cocoa-touch, comparison, nsarray

在类`NSArray`中，有一个方法`isEqualToArray:`可以比较两个数组并指示它们是否匹配。

我有两个数组，它们的元素顺序不同。例如：

```
NSMutableArray* arr1 = [@[@"one", @"two", @"three"] mutableCopy];
NSMutableArray* arr2 = [@[@"three", @"one", @"two"] mutableCopy];

BOOL same = [arr1 isEqualToArray:arr2];
NSLog(@"%d", same); 
```

在上面的示例中，即使`arr1`和`arr2`具有相同的元素，`isEqualToArray:`也会返回`NO`。如何在不遍历`for`/`while`循环中的每个元素的情况下比较上面提到的两个数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T17:27:20.767

使用`NSSet`然后比较。

```
NSSet *set1=[NSSet setWithArray:arr1];
NSSet *set2=[NSSet setWithArray:arr2];

BOOL same=[set1 isEqualToSet:set2]; 
```

编辑：

如果您在 arr1 和 arr2 中有重复项，请使用：

```
NSCountedSet *set1=[NSCountedSet setWithArray:arr1];
NSCountedSet *set2=[NSCountedSet setWithArray:arr2];

BOOL same=[set1 isEqualToSet:set2]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T17:33:26.537

我建议您对两个数组进行排序，并将结果与​​您尝试过的方法进行比较。

# sql-server - 两个值之间的内连接

> ID：15732280
> 
> 赞同：8
> 
> 时间：2013-03-31T17:26:41.147
> 
> 标签：sql-server, join, operators, inner-join

我目前正在尝试填充我的事实表，但在填充所需的时间 ID 时遇到了问题。时间维度已完全填充且完整。基本上在时间维度上，每一行是一个 15 分钟的周期。事实表正在填充有关调用的详细信息。在临时呼叫表中，我有呼叫的开始和结束时间。

我想通过在时间开始时加入临时表上的维度来填充事实表，并且当维度中的 time_Start 介于临时的开始时间和结束时间之间时。我已经使用 = 运行了下面的查询运算符，但它似乎不起作用，当我应该期待更多像 4000 时，它只拉出 100 行。我可以使用 BETWEEN 而不是 = 吗？

```
INNER JOIN Time_Dim ON incoming_measure.StartTimeDate = Time_Start
WHERE Time_Start BETWEEN incoming_measure.StartTimeDate AND incoming_measure.EndTimeDate 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T17:29:51.217

**编辑：**

您的加入不正确。您的加入格式应为：

```
Select column from table A
INNER JOIN table b on
    A.column = B.column
INNER JOIN table c on
    B.column = c.column
Where B.column Between start_date AND end_date 
```

您可以使用`<`and`>`运算符

此外，因为使用格式`sqlserver`很重要`yyyy-mm-dd`

```
INNER JOIN Time_Dim ON incoming_measure.StartTimeDate = Time_Start
WHERE Time_Start > incoming_measure.StartTimeDate AND Time_Start < incoming_measure.EndTimeDate 
```

你也可以使用`Between`

```
INNER JOIN Time_Dim ON incoming_measure.StartTimeDate = Time_Start
WHERE Time_Start Between incoming_measure.StartTimeDate AND incoming_measure.EndTimeDate 
```

# javascript - Ember.js - 管理异步事件和回调

> ID：15732285
> 
> 赞同：2
> 
> 时间：2013-03-31T17:27:16.030
> 
> 标签：javascript, ember.js

我没有使用 Ember Data，并且在我的模型中有一个 ajax 调用来从远程源中提取数据。从 API 成功接收数据后，我想根据类别对其进行排序/过滤。我的计划是，一旦我从 Model 中得到数据，我就可以通过控制器来管理数据的过滤状态。

我的问题是，因为在模型中获取数据是异步的，所以我不能完全调用控制器中的方法来过滤/排序要在模板中显示的数据。

我的代码的相关部分，在下面和[我的 jsfiddle](http://jsfiddle.net/rushi/q9dDJ)中。在我的模板迭代中，`issue_list`我可以轻松地显示信息。但是，我想遍历`categorized_issues`数组......而且我不知道`issue_list`数组何时*真正*设置，所以我可以调用`categorize`IssuesController 的方法。

```
// Default Route for /issues
App.IssuesIndexRoute = Ember.Route.extend({
    setupController: function() {
        var issues = App.Issue.all(25);
        this.controllerFor('issues').processIssues(issues);
    }
});

// Model
App.Issue = Ember.Object.extend({});
App.Issue.reopenClass({
    // Fetch all issues from the ajax endpoint. 
    // Won't work on the JS fiddle
    all: function() {                
        var issues = [];
        $.ajax({
            url: "http://localhost:3000/issues.json",
            dataType: 'json',
        }).then(function(response) {
            response.issues.forEach(function(issue) {           
                issues.addObject(App.Issue.create(issue));
            }, this);
        });

        return issues;
    },
});

// Controller
App.IssuesController = Ember.ArrayController.extend({
    issue_list: [],
    categorized_issues : {"open":[], "closed": []},

    processIssues: function(issues) {
        this.set('issue_list', issues);
        return issues;
    },

    categorize: function() {
        var self = this;
        this.issue_list.forEach(function(i) {
            // Based on the issue open or closed status
            if (i.status == "open") {
                self.categorized_issues["open"].addObject(i);
            } else {
                self.categorized_issues["closed"].addObject(i);
            }
        });
    },
}); 
```

所以我的计划是：

1.  从模型中获取数据
2.  根据数据在控制器中的状态（打开或关闭）重新分类数据。
3.  在模板中显示此新数据。

我似乎可以做到这一点。关于如何去做的任何想法？

```
DEBUG: ------------------------------- 
DEBUG: Ember.VERSION : 1.0.0-rc.2
DEBUG: Handlebars.VERSION : 1.0.0-rc.3
DEBUG: jQuery.VERSION : 1.9.1
DEBUG: ------------------------------- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:30:02.007

一个简单的解决方案是**声明`categorize()`为观察者**：

```
App.IssuesController = Ember.ArrayController.extend({
    issue_list: [],
    categorized_issues : {"open":[], "closed": []},

    processIssues: function(issues) {
        this.set('issue_list', issues);
        return issues;
    },

    categorize: function() {
        var self = this;
        // clear the arrays to avoid redundant objects in the arrays
        self.get("categorized_issues.open").clear();
        self.get("categorized_issues.closed").clear();

        this.issue_list.forEach(function(i) {
            // Based on the issue open or closed status
            if (i.status == "open") {
                self.get("categorized_issues.open").addObject(i);
            } else {
                self.get("categorized_issues.closed").addObject(i);
            }
        });
    }.observes("issue_list.@each"),
}); 
```

这意味着观察者会在数组的每次更改时被触发。在大多数情况下，这可能不会出现性能问题。为了确保`categorize`只运行一次**，如果你使用它会更好`Ember.run.once`：**

```
App.IssuesController = Ember.ArrayController.extend({
    issue_list: [],
    categorized_issues : {"open":[], "closed": []},

    processIssues: function(issues) {
        this.set('issue_list', issues);
        return issues;
    },
    issueListObserver : function(){
        Ember.run.once(this, this.categorize);
    }.observes('issue_list.@each'),

    categorize: function() {
        var self = this;
        // clear the arrays to avoid redundant objects in the arrays
        self.get("categorized_issues.open").clear();
        self.get("categorized_issues.closed").clear();

        this.issue_list.forEach(function(i) {
            // Based on the issue open or closed status
            if (i.status == "open") {
                self.get("categorized_issues.open").addObject(i);
            } else {
                self.get("categorized_issues.closed").addObject(i);
            }
        });
    }
}); 
```

# database - 如何查看 .odb 数据库文件中包含的“数据”文件？

> ID：15732287
> 
> 赞同：0
> 
> 时间：2013-03-31T17:27:27.053
> 
> 标签：database, openoffice.org

我正在尝试从 .odb 数据库文件中提取数据。为此，起初我解压缩了 .odb 文件，然后尝试读取来自此解压缩文件的“数据”文件。但我猜在阅读过程中存在编码问题。我得到一些无意义的符号。据我搜索，这个文件可能是一个二进制文件。顺便说一句，我看不到“数据”文件的扩展名。我想知道如何读取文件以提取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-20T01:06:47.570

我是巴西人，我看到这个问题没有答案。我是 python 用户，我这样做了：

尝试打开包含数据库 *.odb 的文件

___________________________一个文件.py________________________

```
import sys, zipfile
myfile = zipfile.ZipFile(yourfile.odb)
listoffiles = myfile.infolist()

for s in listoffiles:

    if s.orig_filename == "database/data":
        print(bh.decode("utf-8", "ignore")) 
```

_____________________________________________________________

我的表很简单，但它可能会有所帮助。

我从几个网站上找到了这个连接部分。如您所见，odb 文件只是一个压缩文件，其中包含一个 xml 文件，该文件包含一个表信息“content.xml”，但只有表信息。数据库的内容在数据库/数据中。值存储在这里。您可以在 python 上使用 decode 进行解码。

也感谢[http://www.linuxjournal.com/](http://www.linuxjournal.com/)，我是否找到了一些脚本

# ruby-on-rails - 使用 rvm 的 Ruby 版本冲突

> ID：15732290
> 
> 赞同：0
> 
> 时间：2013-03-31T17:27:55.130
> 
> 标签：ruby-on-rails, ruby, rvm, version

我有一些红宝石版本的冲突。当我`ruby -v`在我的终端（在 osx 中）运行时，我得到了`1.8.7 version`. 我尝试使用此命令升级 ruby​​ 版本，安装 rvm `curl -L https://get.rvm.io | bash -s stable --autolibs=3 --rails`。然后我尝试运行`rvm install ruby-1.9.3-p362`，我被告知 rvm 不是找到的命令。所以我跑了`source /Users/host/.rvm/scripts/rvm install ruby-1.9.3-p362`，这行得通，当我在 bash 中运行时`ruby -v`，我得到了`ruby 2.0.0`. 但这似乎与我当前的终端会话有关，因为当我`ruby -v`在另一个会话中运行时，我总是得到`1.8.7 version`. 如何在我的`.bash_profile`（或其他地方）设置正确版本的 ruby​​（和 rails）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:00:01.027

RVM 允许在单个 *nix 机器上安装多个版本的 ruby​​。每个 ruby​​ 版本都有点像另一个版本的沙盒。第一次，您需要指定 ruby​​ 的默认版本。这仅在第一次需要。

```
rvm use 1.9.3-p290 --default 
```

要切换到另一个版本，只需键入：

```
rvm use 1.9.2 
```

Rails 只是一颗宝石。要充分利用 RVM，请创建一个 gemset 并在一个 gemset 中安装一个 ruby​​ 版本的所有 gem。即每个 ruby​​ 版本一个 gemset。这就像：

```
rvm gemset create my_gem_set
Gemset 'my_gem_set' created.

rvm gemset use my_gem_set 
```

您还可以使用项目目录中的 .rvmrc 文件来“加载”您的应用程序所需的 gem。每个项目有一个 .rvmrc。您可以参考 rvm.io 获取有关 rvmrc 的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T01:24:46.307

[您需要在终端模拟器中启用登录 shell，这里是如何在 gnome-terminal https://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)中设置它的示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:00:06.853

您应该通过 rvm 设置默认 ruby​​：[https ://rvm.io/rubies/default/](https://rvm.io/rubies/default/)

```
rvm --default use <ruby_version> 
```

# excel - sumif 某些列的值基于其他列

> ID：15732296
> 
> 赞同：1
> 
> 时间：2013-03-31T17:28:18.523
> 
> 标签：excel, spreadsheet, excel-2010

我为我的工作创建了时间日志：为了更好地说明，我附上了如下图片：

![在此处输入图像描述](https://i.stack.imgur.com/fDq3r.png)

其中 start 和 end 是我在 A 列中启动特定任务的时间，delta 是 End 和 Start 中的值之间的差异。

在下一张表中，我创建了我在每个标准上花费了多少时间的摘要，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/8mkTC.png)

现在我遇到的问题是：

1）我在汇总表的小时字段中的公式是这样的：

```
=sumif('Time spent'!$A$2:$A$100,A3,'Time spent'!$D$2:$D$100) 
```

我如何才能使今天输入的条目的值上升？我想要这个功能的原因是为了让我可以看到我今天的表现。

我在 Google Doc 上有这个，但我也想知道如何在 Excel 中完成这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:42:54.187

在 Excel 中，从 2007 版开始，您可以使用该`SUMIFS`函数 - 它允许多个条件。在您的情况下，语法为：

```
=SUMIFS('花费时间'!$D$2:$D$100,'花费时间'!$A$2:$A$100,A3,'花费时间'!$E$2:$E$100,TODAY())

```

在 Excel 2003 中，您可以使用以下命令执行此操作`SUMPRODUCT`：

```
=SUMPRODUCT('花费时间'!$D$2:$D$100*('花费时间'!$A$2:$A$100=A3)*('花费时间'!$E$2:$E$100=TODAY() ))

```

# opencv - Haar Cascade 与 Hog 检测

> ID：15732298
> 
> 赞同：14
> 
> 时间：2013-03-31T17:28:22.223
> 
> 标签：opencv, image-processing, object-detection

我已经使用**OpenCV**工作了几天，我有一个项目，我应该从天空中检测*汽车*和*人类。*

所以这是我的**输入**：

*   天空中的*移动*摄像机（嵌入在四轴飞行器上）将捕获帧。
*   我应该检测的一组对象（人和汽车）

这是我的**输出**：

*   检测由矩形或某些轮廓勾勒出的对象

基于此，我的问题如下：您会建议在**Haar Cascade**和**Hog Detection**之间选择哪一个，为什么？还是别的？

非常感谢您的回答

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-09T18:10:11.990

HOG 通常比 Haar 更适合人类检测。我只有这方面的经验，所以我想我会对此提供一些意见。然而，HOG 的局限性在于，人必须在屏幕上的“完美”区域内。太近了，它不会检测到人。太远了，它不会检测到人类。

我在 HOG 上的运气比 Haar 好。哈尔给了我太多误报。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-18T12:06:30.880

我一直在尝试使用 HAAR 来检测人类，结果发现误报太多了。我认为 HAAR 只适用于面部或眼睛检测。

由于您的相机在天空中，因此图像中的人非常小并且具有全身形状。HOG会是更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-21T05:19:58.087

您需要更改 HAAR 级联中的比例因子和最小邻居，这对于所有图像都不相同。所以最好用HOG。

# vim - vim 如何在命令提示符下输入多个命令

> ID：15732302
> 
> 赞同：2
> 
> 时间：2013-03-31T17:28:41.467
> 
> 标签：vim, command-line, ex

我应该如何在 vim 的命令提示符下将以下内容作为单个字符串输入

```
:let v:errmsg = ""  
:silent! /\cend of .*project gutenberg  
:if v:errmsg != ""  
:echo "Not found"  
:endif 
```

这不起作用，不会打印消息。

```
:let v:errmsg = ""|:silent! /\cend of .*project gutenberg|:if v:errmsg != ""|:echo "Not found"|:endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:30:44.963

好吧，问题是您正在进行的正常搜索。范围搜索看到 | 作为其参数的一部分，因此它不能用于输入另一个命令。因此，将其包装到 :exe 调用中，如下所示：

```
let v:errmsg = ""|exe 'sil! /\cend of .*project gutenberg'|if v:errmsg != ""|echo "Not found"|endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:29:42.987

在您的情况下，范围搜索可能不是最佳选择。您可以使用

```
if !search('\cend of .*project gutenberg') | echo 'Not found' | endif 
```

如果您可以不更新最后的搜索模式。

# android - 如何判断在 onClick() 中单击了哪个按钮

> ID：15732307
> 
> 赞同：5
> 
> 时间：2013-03-31T17:29:15.527
> 
> 标签：android, android-widget

我在 Android 应用中有多个按钮。我想知道在 Java 代码中单击了哪个按钮。据我所知，这是通过这样的单一方法完成的：

```
public void onClick(View view) {
    // Do something
} 
```

在该方法中，您必须确定单击了哪个按钮。那是对的吗？

如果是这样，我怎么知道哪个被点击了？我确实有 findViewById() 返回的各种 Button 对象。我只是不知道如何使用它们来判断单击了哪个按钮。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T17:35:05.440

在您的活动类中实现 View 的 OnClickListner。覆盖点击方法。

```
 Button b1= (Button) findViewById(R.id.button1);
//find your button id defined in your xml. 

b1.setOnClickListener(this);
// You have button OnClickListener implemented in your activity class.
//this refers to your activity context. 
```

我使用了敬酒消息。

[http://developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

```
 Toast.makeText(MainActivity.this,"button1", 1000).show();
 //display a toast using activity context ,text and duration 
```

使用 switch case，您可以检查单击了哪个按钮。

在您的 onClick 方法中。

```
switch(v.getId())  //get the id of the view clicked. (in this case button)
{
case R.id.button1 : // if its button1
    //do something
    break;
} 
```

这是完整的代码。

```
public class MainActivity extends Activity implements OnClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button b1= (Button) findViewById(R.id.button1);
    Button b2= (Button) findViewById(R.id.button2);
    Button b3= (Button) findViewById(R.id.button3);
    b1.setOnClickListener(this);
    b2.setOnClickListener(this);
    b3.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId())
    {
    case R.id.button1 :
        Toast.makeText(MainActivity.this,"button1", 1000).show();
        break;
    case R.id.button2 :
        Toast.makeText(MainActivity.this,"button2", 1000).show();
        break;
    case R.id.button3 :
        Toast.makeText(MainActivity.this,"button3", 1000).show();
        break;  

    }

}
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T17:35:14.097

有不同的方法来处理这个。有了你目前拥有的，你可以使用

```
 public void onClick(View view) {
    // Do something
    view.getId();
} 
```

这将返回`android:id`您的`xml`. 您可以使用`switch`语句来比较这些值以决定要做什么并打开`id`. 你也可以`onClick()`在你`xml`的每个`button`.

```
<Button
    ...
    android:onClick="functionName"/> 
```

然后在你的java代码中你可以拥有

```
public void functionName(View view) {
        // Do something
    } 
```

`view`单击此处将是您`button`在`onClick`您的`xml`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T17:32:50.580

> 如果是这样，我怎么知道哪个被点击了？

老朋友**切换**将帮助您实现目标：

```
public void onClick(View view) {
   switch (view.getId()) {
      case R.id.btn1:
         // do your stuff for btn1
      break;
      case R.id.btn2:
         // do your stuff for btn2
      break;
      ...
   }
} 
```

**说明：**每个小部件都有，因此您可以通过上面写的 in 开关`ID`简单地处理单击了哪个 Button 。`ID`

`view.getId()`小部件的返回`ID`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-31T17:46:50.537

您还可以为每个按钮使用匿名内部类：

```
Button b1= (Button) findViewById(R.id.button1);
Button b2= (Button) findViewById(R.id.button2);

b1.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        // button 1 was clicked!
    }
});
b2.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        // button 2 was clicked!
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-20T11:39:51.643

您可以使用`ButterKnife`库（[http://jakewharton.github.io/butterknife/](http://jakewharton.github.io/butterknife/)）：

```
//Fragment
@InjectView(R.id.dialog_userinput)
public EditText userinput;

@InjectView(R.id.dialog_passinput)
public EditText passinput;

@OnClick(R.id.dialog_login)
public void login(View view) {
    //do stuff
    this.dismiss();
}

@OnClick(R.id.dialog_cancel)
public void cancel(View view) {
    //do stuff
    this.dismiss();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.dialog_layout, container);
    ButterKnife.inject(this, view);
    return view;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-06T17:37:27.070

```
implements 

    public class ProgramsFiles extends AppCompatActivity implements View.OnClickListener {

       public void onClick(View view) {
            switch (view.getId()) {
               case R.id.btnA:
                 //ExampleA
                   break;
               case R.id.btnB:
                //ExampleB
               break;      
    }
}
} 
```

# c - 手动设置函数地址 gcc

> ID：15732308
> 
> 赞同：0
> 
> 时间：2013-03-31T17:29:24.243
> 
> 标签：c, gcc, embedded, ld, nm

我有一个用于嵌入式系统的工作二进制文件。现在我想为它写一个补丁。补丁将被加载到主程序下方的 RAM 中，然后将从主程序中调用。问题是如何告诉 gcc 使用将从补丁中使用的某些函数的手动设置地址。换句话说：旧代码具有功能`sin()`，我可以使用 nm 找出`sin()`旧代码中的地址。我的修补代码将使用`sin()`（或来自主程序的其他东西），我想告诉 gcc（或者可能是 ld 或其他东西）在`sin()`链接修补代码时使用函数的静态地址。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:41:50.477

问题是您会替换所有对`sin()`修补代码的原始函数的引用。这将要求运行时系统包含用于解析引用的*所有*目标代码数据，并且原始代码是可修改的（例如，不在 ROM 中）。

Windriver 的 RTOS VxWorks 可以做一些接近你所建议的事情；这样做的方式*是*您使用“部分链接”（GNU 链接器选项`-r`）来生成带有将在运行时解析的链接的目标文件 - 这允许使用未解析的链接创建目标文件 - 即不完整的可执行文件。VxWorks 本身包含一个加载器和运行时“链接器”，可以动态加载部分链接的目标文件并解析引用。*但是，加载的目标文件必须完全可以使用已加载的目标代码解析 - 因此没有循环依赖关系，在您的示例中，您必须重新加载/重新启动系统，以便之前*`sin()`加载包含的目标文件*那些引用它的，否则只有那些之后加载的才会使用新的实现。*

 *因此，如果您要使用 VxWorks（或具有类似功能的操作系统），解决方案可能很简单，否则您必须实现自己的加载器/链接器，这当然是可能的，但并非易事。

另一种可能更简单的可能性是通过变量中保存的指针让所有代码调用函数，以便在运行时解析所有调用（或至少所有可能要替换的调用）。您必须加载补丁，然后修改`sin()`函数的指针，以便此后的所有调用都对新函数进行。这种方法的问题是你要么必须*先验*您以后可能想要替换哪些函数，或者以这种方式调用所有函数（这在内存方面可能非常昂贵。对于这个解决方案来说，拥有某种允许您标记函数的预处理器或代码生成器可能会很有用这将是“动态”的，并且可以自动生成指针和调用代码。例如，您可以这样编写代码：

```
__dynamic void myFunction( void ) ;

...

myFunction() ; 
```

并且您的自定义预处理器将生成：

```
void myFunction( void ) ;
void (*__dynamic_myFunction)(void) = myFunction() ;

...

__dynamic_myFunction() ; 
```

那么您的补丁/加载程序代码将使用替换函数的地址重新分配 myFunctionDyn。

您可以生成仅包含 __dynamic_xxxxx 符号的名称和地址的“动态符号表”，并将其包含在您的应用程序中，以便加载程序可以通过将 xxxxx 名称与加载的目标文件中的符号匹配来更改 __dynamic_xxxxx 变量 - 如果您加载一个普通的二进制文件，但是您必须向加载程序提供链接信息 - 即要重新分配哪个 __dynamic_xxxxx 变量以及要分配给它的地址。*

# java - 将变量从线程传递到单独的数组列表

> ID：15732312
> 
> 赞同：0
> 
> 时间：2013-03-31T17:29:40.263
> 
> 标签：java, class, variables

我对java很陌生，目前还没有学到很多东西，但是我有一个问题。

我正在尝试将在线程中运行的变量传递给另一个 java 类。

在我正在运行的客户端线程中：

```
UserReg UR = new UserReg();
UR.addUser(userID); 
```

在我得到的单独的java类中：

```
import java.util.ArrayList;

public class UserReg {

    ArrayList userList = new ArrayList();

    void addUser (String UserID) {   
        userList.add(UserID);
        System.out.println(userList);  
    }  
} 
```

我遇到的问题是，每次运行新线程时，它都会覆盖数组列表并且不会添加到其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:32:13.453

那是因为它与此有关：

```
UserReg UR = new UserReg();
UR.addUser(userID); 
```

每次，它都会初始化 the`userReg`并因此初始化`ArrayList`内部。

您可能会做的是（暂时但不是一个体面的解决方案）会使`userList`静态

# javascript - 在 Ajax 警报中显示 Rails 错误消息

> ID：15732316
> 
> 赞同：0
> 
> 时间：2013-03-31T17:29:49.077
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

使用 Rails 3.2。我想知道如何将错误从 Rails 推送到 Ajax 警报中。这是我的代码：

```
# posts_controller.rb
def update
  @post = Post.find(params[:id])

  if @post.update_attributes(params[:name] => params[:value])
    render :nothing => true
  else
    render :text => @post.errors.full_messages[0], :status => :unprocessable_entity
  end
end

# _form.html.erb
$("#status_buttons button").click(function() {
  $.ajax({
    type: 'POST',
    url: "<%= post_path(@trip) %>",
    data: { _method: 'PUT', name: this.name, value: this.value },
    error: function() {
      alert(" *****************Rails error message here**********************");
    }
  });
}); 
```

常规验证错误消息应出现在`alert()`. 任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:34:40.213

一种确定方法是将至少 3 个参数传递给回调函数，并检查控制台（或警报）是否有任何参数传递了错误。

```
error: function(a,b,c) {
  alert('a contains ' + a);
  alert('b contains ' + b);
  alert('c contains ' + c);
} 
```

其中之一应该包含错误消息:) 祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:34:44.040

```
error: function( jqXHR, textStatus, errorThrown ) { ... 
```

# c++ - 从 " 符号之间的字符串中获取子字符串 // C++ Builder

> ID：15732320
> 
> 赞同：0
> 
> 时间：2013-03-31T17:30:04.343
> 
> 标签：c++, string, load, substring, c++builder

我对以下任务有疑问。我需要将其他程序的输出 txt 数据加载到我的程序中，并在其中搜索以下字符串：

“智”：97.92716217041016，

尤其是数值（97.92 ...）。"," 符号是其他导出值之间的分隔符。

我试图在 c++ builder 中通过以下方式处理这个问题：
1\. 读取文件
2\. 将行加载为字符串
3\. 找到 zhi 的位置
4\. 将 6 添加到位置 - 这将指向数字
5\. 删除新指针
6 之前的所有内容。删除 15 个字符后的所有内容

我知道必须有一些更简单的方法，但我是 C++ 的初学者。

有人可以指导我使用什么函数来查找“zhi”: 和 , 之间的数字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:56:38.890

用于`std::getline`将文件作为`std::string`类型读取。
用于`string::find`获取文本之后的位置`"zhi":`。
用于`string::find`获取 ',' 的位置。
用于`string::substr`获取两个位置之间的字符串的副本。

请记住，在中间修改文件是很困难的，尤其是当您必须删除或插入更多字符时。

修改文件的传统方法是：
1\. 将原始文件中所有未更改的内容复制到新文件中。
2\. 将更改的文本写入新文件。
3\. 将剩余未更改的文本写入新文件。
4\. 关闭所有文件。

# text-editor - 将php代码添加到目录中的html文件

> ID：15732321
> 
> 赞同：-3
> 
> 时间：2013-03-31T17:30:14.487
> 
> 标签：text-editor

我需要在一些 html 文件中添加一个 php 代码块（html 文件由 php 处理），假设我有这行代码：

```
<?php echo "hello world"; ?> 
```

我想将该块添加到所有 .html 文件中，就在几个域的 public_html 文件夹中的关闭“body”标记之前：

```
/home/domainA/public_html
/home/domainB/public_html
/home/domainC/public_html 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:36:55.710

这就是方法。. .

```
<html>
   <head>
   </head>
   <body>
     <p>
        <?php echo "hello world" ?>
     </p>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:36:14.643

实现这一点的最佳方法是将块放入部分并在主文件中调用它。例如：

```
//partial.phtml
<?php echo "hello world"; ?>

//main.phtml
<body>
<?php
echo $this->partial('partial.phtml');
?>
</body> 
```

调用部分将取决于您使用的 PHP 框架。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:58:56.127

使用该`find`命令定位`.html`指定目录中的所有文件，然后使用`sed`自动操作文件。**[确保在尝试这样的事情之前创建一个备份，这被称为搜索和销毁](http://catb.org/jargon/html/S/search-and-destroy-mode.html)****是有原因的！**

```
find /home/domainA/public_html  /home/domainB/public_html \
     /home/domainC/public_html  -name '*.html'            \
     -exec sed -i 's|</body>|<?php echo "hello world"; ?>|' '{}' ';' 
```

# c++ - 在 cygwin 上使用 cmake 链接到 Boost 文件系统时出错

> ID：15732329
> 
> 赞同：3
> 
> 时间：2013-03-31T17:31:12.417
> 
> 标签：c++, boost, cygwin, cmake

我正在使用 cmake 2.8.9、g++ 3.4.4 和 Boost 1.50。在 Windows 8 64 位上的 Cygwin 中。这是我收到的错误消息。

> 链接 CXX 可执行文件 RayTracer.exe CMakeFiles/RayTracer.dir/Ray_Tracer.cpp.o:Ray_Tracer.cpp:(.text+0x89c): undefined reference to `boost::system::generic_category()' CMakeFiles/RayTracer.dir/Ray_Tracer.cpp.o:Ray_Tracer.cpp:(.text+0x8a6): undefined reference to`boost::system::generic_category()' CMakeFiles/RayTracer.dir/Ray_Tracer。 cpp.o:Ray_Tracer.cpp:(.text+0x8b0): undefined reference to `boost::system::system_category()' /usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: CMakeFiles/RayTracer.dir/Ray_Tracer.cpp.o: bad reloc address 0xb in section` .text$_ZN5boost6system14error_categoryD1Ev[boost::system::error_category::~error_category()]' collect2: ld 返回 1 退出状态 CMakeFiles/RayTracer.dir /build.make:94: 目标 `RayTracer.exe' failed make[2]: *** [RayTracer.exe] Error 1 CMakeFiles/Makefile2:64: recipe for target` CMakeFiles/RayTracer.dir/all' 的配方失败 make[1]: *** [CMakeFiles/RayTracer.dir/all] 错误 2 Makefile:75: 目标 `all' 的配方失败 make: *** [全部] 错误 2

从我所见，通常的问题是无法链接升压系统库，但我确保这样做。这是我的 CMakeLists.txt 文件的相关部分：

```
#Edit: cmake can't find the static libraries on cygwin, so I'm setting this to false for now.
SET(Boost_USE_STATIC_LIBS FALSE)

FIND_PACKAGE(Boost 1.50 REQUIRED date_time program_options thread filesystem system unit_test_framework)
IF(${Boost_FOUND})
  INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIR})
ENDIF()
add_executable(RayTracer
    Ray_Tracer.cpp
)
target_link_libraries(RayTracer ${Boost_PROGRAM_OPTIONS_LIBRARIES}) 
```

这是我的 .cpp 文件中触发错误的行：

```
#include <boost/filesystem.hpp> 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:39:59.660

您需要告诉链接器链接 Boost.Filesystem 和 Boost.System 库。

你可以做：

```
target_link_libraries(RayTracer
                      ${Boost_PROGRAM_OPTIONS_LIBRARIES}
                      ${Boost_FILESYSTEM_LIBRARIES}
                      ${Boost_SYSTEM_LIBRARIES}
                      ) 
```

或者，如果您只想链接`find_package(Boost...)`调用中指定的所有库，您可以执行以下操作：

```
target_link_libraries(RayTracer ${Boost_LIBRARIES}) 
```

有关`FindBoost`CMake 模块的更多详细信息，请参阅[文档](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aFindBoost "CMake v2.8.10 文档")或运行：

```
cmake --help-module FindBoost 
```

# android - 使用 parcelable 解组异常

> ID：15732330
> 
> 赞同：1
> 
> 时间：2013-03-31T17:31:14.770
> 
> 标签：android, parcelable

我尝试传递一个带有整数数组列表的可打包对象，但是当 android 尝试读取可打包对象时出现错误

```
 03-31 19:20:12.484: E/AndroidRuntime(21448): Caused by: java.lang.RuntimeException: Parcel android.os.Parcel@4172c410: Unmarshalling unknown type code 7602291 at offset 192
03-31 19:20:12.484: E/AndroidRuntime(21448):    at android.os.Parcel.readValue(Parcel.java:2032)
03-31 19:20:12.484: E/AndroidRuntime(21448):    at android.os.Parcel.readListInternal(Parcel.java:2235)
03-31 19:20:12.484: E/AndroidRuntime(21448):    at android.os.Parcel.readList(Parcel.java:1531) 
```

这是我的可包裹对象

```
public class Country implements Parcelable {

    private String name;
    private int id;
    private List<Integer> listTest;

     public Country () {
            super();
            listTest= new ArrayList<Integer>();
        }

    public Country (String name, int id, List <Integer> listTest) {
        super();
        this.name= name;
        this.id=id;
        this.listTest= listTest;
    }

public Country (Parcel in) {

        this.name= in.readString();
        this.id= in.readInt();
        in.readList(listTest,Integer.class.getClassLoader());//error here

    }

    //getters,setters

    public static final Parcelable.Creator<Country > CREATOR = new Parcelable.Creator<Country>()
            {
                @Override
                public Country createFromParcel(Parcel source)
                {
                    return new Country (source);
                }

                @Override
                public Country [] newArray(int size)
                {
                return new Country [size];
                }
            };

@Override
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(name);
    dest.writeInt(id);
    dest.writeList(listTest);

} 
```

}

我检查了我的列表，它只包含整数，所以我不知道这个错误来自哪里

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:08:04.247

我改变

```
in.readList(listTest,List.class.getClassLoader()); 
```

我没有错误。

# java - LinkedList 的 add(int, E) 的 O(1) 复杂度如何？

> ID：15732334
> 
> 赞同：29
> 
> 时间：2013-03-31T17:31:35.747
> 
> 标签：链表, java, linked-list, big-o, time-complexity

从[链表](/questions/tagged/linked-list "显示标记为“链表”的问题")标签维基摘录：

> 链表是一种数据结构，其中元素包含对下一个（也可以是前一个）元素的引用。链表**在任何位置提供 O(1) 的插入和删除**，O(1) 的列表连接，在前面（和可选的后面）位置的 O(1) 访问以及 O(1) 的下一个元素访问。随机访问具有 O(N) 复杂度并且通常未实现。

^(（强调我的）)

读到这里我很惊讶——列表如何*插入*一个比简单地*读取*该索引更复杂的随机索引？

所以我查看[了`java.util.LinkedList`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/LinkedList.java). [`add(int, E)`方法](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/LinkedList.java#LinkedList.add%28int%2Cjava.lang.Object%29)是：

```
public void add(int index, E element) {
    addBefore(element, (index==size ? header : entry(index)));
} 
```

该[`addBefore(E, Entry<E>`方法](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/LinkedList.java#LinkedList.addBefore%28java.lang.Object%2Cjava.util.LinkedList.Entry%29)只是指针重新分配，但也有[`entry(int)`方法](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/LinkedList.java#LinkedList.entry%28int%29)：

```
if (index < 0 || index >= size)
        throw new IndexOutOfBoundsException("Index: "+index+
                                            ", Size: "+size);
    Entry<E> e = header;
    if (index < (size >> 1)) {
        for (int i = 0; i <= index; i++)
            e = e.next;
    } else {
        for (int i = size; i > index; i--)
            e = e.previous;
    }
    return e;
} 
```

即使使用半尺寸优化，`for`这里的循环（一个或另一个）在我看来似乎是一个死的赠品，这种方法（因此`add(int, E)`）在 O(n) 时间的最小最坏情况下运行，而且肯定不是恒定的时间。

我错过了什么？我误解了大 O 符号吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-31T17:40:27.267

这是因为您正在阅读的文章将“获取该索引”视为单独的操作。本文假设您已经在您希望执行 add(int, E) 的索引处。

总结：

**插入或删除操作 = O(1)**

**^(在第 n个)索引处查找节点= O(n)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T17:35:16.143

好吧，它们确实支持在任意位置进行恒定时间插入——但**前提是**您碰巧有一个指向列表条目的指针，在该列表条目之后或之前要插入一些东西。当然，如果您只有索引，这将不起作用，但这不是您通常在优化代码中所做的。

在 Java 中，您也可以这样做，但[只能使用列表迭代器](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/LinkedList.java#768)。

与 arraylists 相比，链表的这个属性是它们最大的优势——例如，如果你想从聊天室的用户列表中删除一个用户，你可以在 user 中存储一个指向用户在用户列表中的位置的指针，以便，当他想离开房间时，可以作为一个`O(1)`操作来执行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T17:42:35.127

将新节点**链接**到任何节点的操作是 O(1)，但**查找**（有助于循环）相关索引的操作肯定是 O(n)。

没有魔法;)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-31T17:42:36.510

你引用的wiki页面说：

> O(1) 在任意*位置插入和移除*

然后你问：

> 读到这个我很惊讶——列表如何插入随机*索引*

这里存在混淆：术语*位置*和*索引*没有被用来表示相同的东西。wiki 讨论的是迭代器或指针，而不是索引。

# c# - ASP.NET MVC 中的数据库上下文和返回动态结果集

> ID：15732340
> 
> 赞同：9
> 
> 时间：2013-03-31T17:32:24.850
> 
> 标签：c#, asp.net-mvc-3, entity-framework, asp.net-mvc-4

在 MVC 4 和 EF 5 中，我想运行动态查询。

```
var returndata = Context.Database.SqlQuery(Type, strsql, null); 
```

我不知道，它将返回和命名多少个字段。根据这个结果，我想制作将在视图中显示的表格结构。

问题：我应该作为类型传递什么？

我的查询返回以下结果：

第 1 场、第 2 场、第 3 场、第 4 场、第 5 场

第 1 行...

第2行..

感谢任何建议。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-31T17:51:57.393

您可以使用原始 SQL 查询，因为 EF 不支持：

```
private static IEnumerable<object[]> Read(DbDataReader reader)
{
    while (reader.Read())
    {
        var values = new List<object>();
        for (int i = 0; i < reader.FieldCount; i++)
        {
            values.Add(reader.GetValue(i));
        }
        yield return values.ToArray();
    }
} 
```

进而：

```
public ActionResult Index()
{
    using (var ctx = new UsersContext())
    using (var cmd = ctx.Database.Connection.CreateCommand())
    {
        ctx.Database.Connection.Open();
        cmd.CommandText = "SELECT * FROM UserProfile";
        using (var reader = cmd.ExecuteReader())
        {
            var model = Read(reader).ToList();
            return View(model);
        }
    }
} 
```

最后在你看来：

```
@model IEnumerable<object[]>
<table>
    <tbody>
        @foreach (var row in Model)
        {
            <tr>
                @foreach (var column in row)
                {
                    <td>@column</td>
                }
            </tr>
        }
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-09T09:02:17.107

此方法将数据从 SQL select（带参数）加载到行列表中，其中每一行是列的字典（键是列名）。

```
private static List<Dictionary<string, object>> LoadData(string sqlSelect, params object[] sqlParameters)
{
    var table = new List<Dictionary<string, object>>();
    using (var ctx = new DbEntities())
    {
        ctx.Database.Connection.Open();
        using (var cmd = ctx.Database.Connection.CreateCommand())
        {
            cmd.CommandText = sqlSelect;
            foreach (var param in sqlParameters)
                cmd.Parameters.Add(param);
            using (var reader = cmd.ExecuteReader())
            {
                while (reader.Read())
                {
                    var row = new Dictionary<string, object>();
                    for (int i = 0; i < reader.FieldCount; i++)
                        row[reader.GetName(i)] = reader[i];
                    table.Add(row);
                }
            }
        }
    }
    return table;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-05T14:29:39.300

最后，我使用“Mortalus”和 ExpandoObject 对象建议的 TypeBuilder 选项。它现在几乎没有性能开销。

从“Mortalus”答案中获取 Typebuilder 代码，然后我根据我的要求编写代码，如下所示。

```
List<Dictionary<string, object>> expandolist = new List<Dictionary<string, object>>();

foreach (var item in returndata)
  {
  IDictionary<string, object> expando = new ExpandoObject();
  foreach (PropertyDescriptor propertyDescriptor in TypeDescriptor.GetProperties(item))
     {
      var obj = propertyDescriptor.GetValue(item);
      expando.Add(propertyDescriptor.Name, obj);
     }
     expandolist.Add(new Dictionary<string, object>(expando));
  }

  return expandolist; 
```

所以现在，我有来自动态对象的“字典”对象。并使用它，您可以在设计时轻松工作，而不是等到运行时使用“动态”对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T18:08:25.963

在不知道返回的类型的情况下，我认为您可能不走运。

如果您知道它可能属于哪些模式，则可以在`try { } catch () { }`与您的其他动态查询中的这些参数匹配的接口上使用一些 's，但这似乎有点痛苦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T18:16:39.163

不幸的是，除非 EF 知道对象的`Type`.

如果这对您真的有必要，我认为您最好的选择是退回到`ADO.NET`and `DataTable`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T18:21:29.803

我最近偶然发现了这个例子：

[http://www.markzhou.com/blog/post/2011/06/02/Use-dynamic-type-in​​-Entity-Framework-41-SqlQuery()-method.aspx](http://www.markzhou.com/blog/post/2011/06/02/Use-dynamic-type-in-Entity-Framework-41-SqlQuery%28%29-method.aspx)

我没有时间自己测试它，但似乎可以通过一些额外的工作来构造动态类型。

简而言之，你会想做这样的事情：

```
 TypeBuilder builder = Program.CreateTypeBuilder(
                "MyDynamicAssembly", "MyModule", "MyType");
  Program.CreateAutoImplementedProperty(builder, "name", typeof(string));
  Program.CreateAutoImplementedProperty(builder, "type", typeof(string));
  Program.CreateAutoImplementedProperty(builder, "id", typeof(int));

  Type resultType = builder.CreateType();
  dynamic queryResult = context.Database.SqlQuery(
                    resultType, "SELECT * FROM sys.sysobjects"); 
```

`TypeBuilder`在我附上的帖子中详细描述了哪里。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-24T06:20:58.130

Darin Dimitrov 的类似帖子，但它返回 DataTable

```
public DataTable QueryToTable(Entities db, string queryText, SqlParameter[] parametes)
        {
            using ( DbDataAdapter adapter = new SqlDataAdapter())
            {
                adapter.SelectCommand = db.Database.Connection.CreateCommand();
                adapter.SelectCommand.CommandText = queryText;
                if (parametes != null)
                    adapter.SelectCommand.Parameters.AddRange(parametes);
                DataTable table = new DataTable();
                adapter.Fill(table);
                return table;
            }
        } 
```

采用

```
SqlParameter[] parametes = new[]
                {
                    new SqlParameter("date_from", dateFrom)
                };

DataTable tab = QueryToTable(new Entities(), 
               "Select *  From SomeTable Where ADate >= @date_from", parametes); 
```

MS SQL Server 示例

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-01T14:28:38.073

添加到 Petr Voborník 的答案，动态查询，我添加了 ResultSet 的动态插入，我的应用程序对整个数据库的所有表进行动态查询，一次一个块，然后将动态结果插入远程数据库，使用 Always Encrypted (此处省略）。传递一个 sb 命令和参数对象。

```
 public void StoreData(DbContext dbContext, Dictionary<string, string> columnInfo, List<Dictionary<string, object>> multiInsertObj, string tableName)
    {
        _ctx = dbContext;
        _columnInfo = columnInfo;
        var sb = new StringBuilder();
        sb.Append(BuildSqlCommand(tableName, columnInfo, multiInsertObj.Count));
        ExecuteSqlCommand(sb, GetParamsObject(columnInfo, multiInsertObj));
    }

    private static StringBuilder BuildSqlCommand(string tableName, Dictionary<string, string> variableInfo, int variableCount)
    {
        //Build sql command
        var sb = new StringBuilder();
        sb.Append("INSERT INTO dbo." + tableName + "(");
        foreach (var variable in variableInfo)
        {
            sb.Append(variable.Key);
            sb.Append(", ");
        }
        sb.Append("SystemNumber, ");
        sb.Remove(sb.Length - 2, 2).Append(") VALUES ");
        for (var i = 0; i < variableCount; i++)
        {
            sb.Append("(");
            foreach (var name in variableInfo.Keys)
            {
                sb.Append("@" + name + "_" + i + ",");
            }
            sb.Append("@SystemNumber" + "_" + i + ",");
            sb.Remove(sb.Length - 1, 1).Append("),");
        }
        sb.Remove(sb.Length - 1, 1);
        return sb;
    }

    private static object[] GetParamsObject(Dictionary<string, string> columnInfo, List<Dictionary<string, object>> multiInsertObj)
    {
        var variableCount = multiInsertObj.Count;
        var rowCount = multiInsertObj[0].Keys.Count;
        var objectLength = (rowCount + 1) * variableCount;
        var variableDataTypes = columnInfo.Values.ToList();
        var paramObj = new object[objectLength];
        var j = 0;
        var i = 0;
        foreach (var row in multiInsertObj)
        {
            var k = 0;
            foreach (var data in row)
            {
                var sb = new StringBuilder();
                sb.Append("@");
                sb.Append(data.Key);
                sb.Append("_" + i);
                paramObj[j] = new SqlParameter(sb.ToString(), SetSqlDataType(variableDataTypes[k])) { Direction = Input, Value = data.Value };
                j++;
                k++;
            }
            paramObj[j] = new SqlParameter(("@SystemNumber" + "_" + i), SetSqlDataType("int")) { Direction = Input, Value = _systemNumber };
            i++;
            j++;
        }
        return paramObj;
    }

    private static void ExecuteSqlCommand(StringBuilder sb, params object[] sqlParameters)
    {
        using (_ctx)
        {
            _ctx.Database.Connection.Open();
            using (var cmd = _ctx.Database.Connection.CreateCommand())
            {
                cmd.CommandText = sb.ToString();
                foreach (var param in sqlParameters)
                    cmd.Parameters.Add(param);
                try
                {
                    cmd.ExecuteNonQuery();
                }
                catch (Exception e)
                {
                    Console.WriteLine(e);
                    throw;
                }
            }
        }
    } 
```

# backbone.js - 这个在backbone.js 控制器中的奇怪行为

> ID：15732341
> 
> 赞同：0
> 
> 时间：2013-03-31T17:32:34.670
> 
> 标签：backbone.js, backbone-routing

是的，我是 JS 的新手，也是backbonejs 的新手。

现在让我们深入研究这个问题。

我在backbonejs Controller中**有一个非常奇怪的行为。**

这是我的控制器的代码

```
var controller = Backbone.Controller.extend( {
    _index: null,

    routes: {
        "": "index"                   
    },

    initialize: function(options){

        var self = this;
        if (this._index === null){

            $.getJSON('data/album1.json',function(data) {
                 //this line is working self._index is being set
                 self._index = new sphinx.views.IndexView({model: self._photos});
            });
            Backbone.history.loadUrl();   
        }

    },

    index: function() {
         //this line is not working
         //here THIS is pointing to a different object
         //rather than it was available through THIS in initialize method
        this._index.render();
    }

}); 
```

这是文件末尾用于启动控制器的行。

```
removeFallbacks();
gallery = new controller;
Backbone.history.start(); 
```

现在，我错过了一些东西。但是什么？？？如果这是错误的方式，那么正确的方式是什么？我需要从**index方法访问我从****initialize**方法设置的属性。

 **看起来**index**方法的调用者函数正在改变它的范围。我需要保留它的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:59:57.503

您必须将路由操作指定到主干路由而不是控制器。在路由器内部是您要初始化控制器和视图的地方。

此外，没有方法 Backbone.history.loadURL()。我认为您应该改用 Backbone.history.start() 然后在路由器实例中调用导航，例如 router.navigate('state or URL');

```
var myApp = Backbone.Router.extend( {
    _index: null,

    routes: {
        "": "index"                   
    },

    initialize: function(options){
        //Initialize your app here
        this.myApp = new myApp();
        //Initialize your views here
        this.myAppViews = new myAppView(/* args */);

        var self = this;
        if (this._index === null){

            $.getJSON('data/album1.json',function(data) {
                 //this line is working self._index is being set
                 self._index = new sphinx.views.IndexView({model: self._photos});
            });
            Backbone.history.loadUrl(); //Change this to Backbone.history.start();
        }

    },

    // Route actions
    index: function() {
        this._index.render();
    }
}); 
```**

# php - Html 多选项目 已选问题

> ID：15732342
> 
> 赞同：1
> 
> 时间：2013-03-31T17:32:37.883
> 
> 标签：php, html

我有一个包含多个选择项的表单。我可以选择多个项目。但是，如果我用 PHP 错误地输入了表单的其他字段，我该如何选择我最初选择的那些项目？

```
<select name="interest[]" class="tr5" multiple="multiple">
<option value="">Select..</option>
<option value="art">Art</option>
<option value="litteratures">Litteratures</option>
<option value="business" >Business</option>    
<option value="internet" >Internet</option>    
</select> 
```

我可以在没有**多个标签**的情况下使用 php 做到这一点。

```
<option value="internet" <?php if(isset($_POST['interest']) && $_POST['interest'] == 
"internet") echo 'selected = "selected"';?>>Internet</option> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:35:54.497

你可以这样做

```
<option value="internet" <?php if(isset($_POST['interest']) &&
in_array("internet",$_POST['interest'])) echo 'selected = "selected"';?>>Internet</option> 
```

# api-key - 文件选择器 API 密钥

> ID：15732343
> 
> 赞同：3
> 
> 时间：2013-03-31T17:32:41.383
> 
> 标签：api-key, filepicker

我想问一个新手问题。通过在 JavaScript 中设置 API 密钥，任何人都可以阅读源代码并自由使用密钥吗？

已编辑 >>

提取 jsFiddle 代码，

```
filepicker.setKey('8PbzrhP9Tr2r6wPlSqzS');

/* Unsecured */

/*
filepicker.pick(function(fpfile){
   console.log(fpfile);
});

filepicker.read(fpfile, function(contents){
    console.log(contents);  
})
*/

var fpfile = {'url': 'https://www.filepicker.io/api/file/KW9EJhYtS6y48Whm2S6D'};
var policy = 'eyJoYW5kbGUiOiJLVzlFSmhZdFM2eTQ4V2htMlM2RCIsImV4cGlyeSI6MTUwODE0MTUwNH0=';
var signature = '4098f262b9dba23e4766ce127353aaf4f37fde0fd726d164d944e031fd862c18';

filepicker.read(fpfile, {policy: policy, signature:signature}, function(contents){
    console.log(contents);  
})

filepicker.pick({policy: policy, signature:signature}, function(fpfile){
   console.log(fpfile);
}); 
```

它如何防止任何人仅使用密钥从我的帐户上传或读取/下载文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:15:12.617

因为浏览器端的 javascript 始终是公开可读的，所以您的 API 密钥对其他人是可见的。除了简单的 url/主机名检查之外，为了增加对 API 密钥的保护，您可以使用我们提供的丰富的基于策略的安全 API：[https ://developers.filepicker.io/docs/security/](https://developers.filepicker.io/docs/security/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:49:16.553

Java 字节码只需少量工作即可轻松逆转。如果您需要它，请使用 TLS 从网站中提取它并将其存储在 RAM 中，或者至少使用密码进行异或

# php - 如何制作 Array2XML

> ID：15732345
> 
> 赞同：1
> 
> 时间：2013-03-31T17:32:55.133
> 
> 标签：php, xml, xml-parsing, rss

我在尝试更改标签的地方做了这段代码`<linkfoto></linkfoto> per tag <enclosure url="urlofpicturefromoriginalsite">`

这个 rss 来自[rss uol](http://www3.uol.com.br/xml/midiaindoor/internacional.xml)

这是我的代码'

```
<?php

include 'Array2XML.php';
$doc = new DOMDocument();
$doc->load('http://www3.uol.com.br/xml/midiaindoor/internacional.xml');
$arrFeeds = array();
foreach ($doc->getElementsByTagName('item') as $node) {
$itemRSS = array ( 
'channel' => $node->getElementsByTagName('channel')->nodeValue,
 'title' => $node->getElementsByTagName('title')->nodeValue,
    'description' => $node->getElementsByTagName('description')->item(0)->nodeValue,
  'enclosure' => array(
        '@attributes' => array(
            'height' => '100',
            'width' => '100',
            'url' => $node->getElementsByTagName('linkfoto')->nodeValue,

        )
        ),

 //'linkfoto' => $node->getElementsByTagName('linkfoto')->item(0)->nodeValue,
 //'enclosure' => array($node->getElementsByTagName('linkfoto')->item(0)->nodeValue),
 //'attributes' => array(
 //'url' => array($node->getElementsByTagName     ('linkfoto')->nodeValue),
 //'url' => array('@cdata' => $node->getElementsByTagName('linkfoto')->item(0)->nodeValue),
                    //'type' => 'image-jpeg',
                    //'width' => '1024',
                    //'height' => '768'
                //  )
                 //),
//'creditfoto' => $node->getElementsByTagName('linkfoto')->item(0)->nodeValue,
  'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue
  );
  array_push($arrFeeds, $itemRSS);
  }

  $xml = new SimpleXMLElement("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><rss version=\"2.0 \"></rss>");

 array_to_xml($arrFeeds,$xml);

  $xml->asXML("testefile.xml");

 function array_to_xml(array $arr, SimpleXMLElement $xml)
  {
  foreach ($arr as $k => $v) {
    is_array($v)
        ? array_to_xml($v, $xml->addChild($k))
        : $xml->addChild($k, $v);
  }
  return $xml;
  }
   ?>' 
```

但返回一个质量

```
 '<?xml version="1.0" encoding="ISO-8859-1"?>
  <rss version="2.0"><0><channel/><title/><description>Com a presença de milhares de fiéis, Francisco celebra no Vaticano a primeira missa da Ressurreição como papa</description><enclosure><@attributes><height>100</height><width>100</width><url/></@attributes></enclosure><date/></0><1><channel/><title/><description>Em resposta ao regime norte-coreano, Coreia do Sul fará manobras militares em conjunto com os EUA em abril</description><enclosure><@attributes><height>100</height><width>100</width><url/></@attributes></enclosure><date/></1></rss>' 
```

没有类似的`国际RSS DirectPoint pt-br

```
 <item>
                    <title>Internacional></title>

                    <description>Justiça eslovaca troca sentença de pena de morte ao agente nazista László Csatáry, 97, pela de prisão perpétua</description>

                                                <enclosure url="http://imguol.com/2012/07/18/18jul2012---o-criminoso-de-guerra-nazista-mais-procurado-do-mundo-o-hungaro-laszlo-csatary-97-deixou-a-procuradoria-de-budapeste-na-hungria-apos-o-ministerio-publico-ter-ordenado-a-sua-prisao-1342626431731_1024x768.jpg"  type="image/jpeg" width="1024" height="768"/>

                    <creditfoto><![CDATA[Bea Kallos/AP]]></creditfoto>
                    <pubdate>28/03/2013</pubdate>
                </item>

                <item>
                    <title><![CDATA[Internacional]]></title>

                    <description>Papa Francisco celebra missa em reformatório em Roma e lava pés de 12 detentos, incluindo uma jovem muçulmana></description>

                                                <enclosure url="http://imguol.com/2013/03/28/28mar2013---papa-francisco-beija-o-pe-de-jovem-detento-depois-de-lava-lo-durante-missa-no-presidio-de-casal-del-marmo-em-roma-o-papa-lavou-os-pes-de-12-detentos-incluindo-de-duas-garotas-1364498118757_1024x768.jpg"  type="image/jpeg" width="1024" height="768"/>

                    <creditfoto><![CDATA[Osservatore Romano/AFP]]></creditfoto>
                    <pubdate>28/03/2013</pubdate>
                </item>

</channel>
 </rss> 
```

`有人帮我做这个吗？

这是我的第一个代码:(

# extjs - ExtJS 无限网格中的一百万行（奇怪的效果）

> ID：15732348
> 
> 赞同：2
> 
> 时间：2013-03-31T17:33:02.830
> 
> 标签：extjs

`ExtJS infinite grid`我已经用[这个例子](http://dev.sencha.com/deploy/ext-4.0.1/examples/grid/infinite-scroll.js)做了一个应用程序。

我的应用程序从数据库接收数据。

它与少量行（100000）完美配合。

但是现在一个数据库包含一百万行。我观察到一个奇怪的效果：数据没有完全加载。每次网格显示不同的行数（最大 859176）。但我需要从数据库中加载所有行。

有谁知道如何解决这个问题？

我的代码：

```
Ext.require ([
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.util.*',
    'Ext.grid.plugin.BufferedRenderer'
]);

Ext.onReady(function () {

    Ext.define('DoctorsList', {
        extend: 'Ext.data.Model',
        fields: [
            'id', 'fio', 'specialization', 'photo'
        ],
        idProperty: 'id'
    });

    var store = Ext.create('Ext.data.Store', {
        id: 'store',
        model: 'DoctorsList',
        buffered: true,
        pageSize: 100,
        proxy: {
            type: 'ajax',
            url: 'get_doctors.jsp',
            reader: {
                root: 'data',
                totalProperty: 'total'
            }
        },
        autoLoad: true
    });

    Ext.create('Ext.grid.Panel', {
        height: 600,
        title: 'Doctor\'s list',
        collapsible: true,
        store: store,
        columns: [
        {
            text: 'ID',
            dataIndex: 'id',
            width: 50,
            sortable: true
        },
        {
            text: 'Full name',
            dataIndex: 'fio',
            width: 300,
            sortable: true
        },
        {
            text: 'Specialization',
            dataIndex: 'specialization',
            width: 150,
            sortable: true
        },
        {
            text: 'Photo',
            dataIndex: 'photo',
            width: 100,
            sortable: false,
            renderer: function(value) {
                return '<img width="100" src="images/' + value + '" />';
            }
        }
        ],
        renderTo: 'doctors-list'
    });

}); 
```

添加：

[在这里](http://postimg.org/image/54yx546hn/)，您可以看到对 get_doctors.jsp 的最后请求和响应。您可以注意到，“总计”字段的编号为 1005000，但最后一行的 ID 为 423165。[这](http://postimg.org/image/t1uja5a07/)是 MS SQL 数据库选择屏幕。您可以在那里看到已使用的表总共有 1005000 行。

补充 2：这个 bug 出现在 Firefox 和 IE8 中，但它没有出现在 Opera、Google Chrome 和 Safari 中。

谢谢！

# c++ - C++ 加载程序锁定错误

> ID：15732352
> 
> 赞同：0
> 
> 时间：2013-03-31T17:33:20.997
> 
> 标签：c++, dll, hook

我正在编写\编译一个（当前）只导出一个空白函数的 DLL。源代码：

DLLMain.cpp-

```
LIBRARYEXPORT LRESULT CALLBACK KeyboardProc(
int code,
WPARAM wParam,
LPARAM lParam
){

    return 0;

} 
```

到目前为止一切都很好，这是我的 DLLMain.h-

```
using namespace std;

#include <iostream>
#include <fstream>
#include <string>
#include <Windows.h>
#define LIBRARYEXPORT __declspec(dllexport)

LIBRARYEXPORT LRESULT CALLBACK KeyboardProc(
    int code,
    WPARAM wParam,
    LPARAM lParam
); 
```

我计划使用这个 DLL 和 windows 挂钩来检测按键，但是当我从一个单独的可执行文件调用 LoadLibrary 时，它返回一个运行时错误说

“DLL 'C:\Users\Orin\Documents\Visual Studio 2010\Projects\winmain\Debug\winmain.dll' 正在尝试在 OS Loader 锁内进行托管执行。不要尝试在 DllMain 或图像初始化函数内运行托管代码，因为这样做会导致应用程序挂起。”

太好了，但问题是：我的 KeyboardProc 函数中根本没有运行任何代码，我什至没有 DllMain 例程

我尝试过的（但没有奏效）：

*   在项目属性中禁用 CLR
*   删除我的“DllMain”例程
*   声明函数时使用“#pragma unmanaged”

非常感谢您的建议和评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:01:58.910

**找到答案：**

使用 Visual Studio 时，不得选择 CLR 库项目。而是使用“Win32 项目”模板。我不敢相信我错过了！

# c++ - C++ 模板化构造函数：它们会阻止推断某些类型吗？

> ID：15732356
> 
> 赞同：3
> 
> 时间：2013-03-31T17:33:43.123
> 
> 标签：c++, templates, constructor

如果我有类似的代码

```
struct Foo
{
    template<class T>
    Foo(T arg) { }
}; 
```

这是否会阻止`T`成为`const`,`volatile`或参考？

同样，如果我有

```
struct Bar
{
    template<class T>
    Bar(T const volatile &arg) { }
}; 
```

这是否意味着`T`永远不会是`const`,`volatile`或参考？

本质上，这是否意味着*必须*推断构造函数模板参数，即不能指定为推断值以外的任何值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:41:00.180

是的，当您调用构造函数模板时，您不能显式指定模板参数。

因为您从不直接调用它，而总是通过强制转换或声明隐式调用它。

您只能在显式特化或实例化时指定它们。这不是真的有用，但可能

```
// explicit instantiation
template Bar::Bar<const int>(const int); 
```

# css - CSS - 如果最后一个文本不合适，则将其包装到另一行

> ID：15732360
> 
> 赞同：0
> 
> 时间：2013-03-31T17:33:51.433
> 
> 标签：css, line-breaks, word-wrap

我在 4 段的最后有一个链接。就像是：

```
Here is my text, and it's just an example of text to show
And I am wanting to wrap the last bit of text, which happens
to be a link, but I need the link to either stay on the line
that is the available width and not break to another line,
unless it can't fit left-aligned on that line like this
http://mylink.com 
```

因此，在 HTML 中的实际代码如下：

```
<p>Here is my text, and it's just an example of text to show
And I am wanting to wrap the last bit of text, which happens
to be a link, but I need the link to either stay on the line
that is the available width and not break to another line,
unless it can't fit left-aligned on that line like this<br />
<a href="http://mylink.com">http://mylink.com</a></p> 
```

我在`<br />`这里使用，但我不想使用`<br />`，因为屏幕会捕获实际显示的文本量，有时它可能看起来像这样：

```
Here is my text, and it's just an example of text to show And I am wanting to wrap
the last bit of text, which happens to be a link, but I need the link to either stay
on the line that is the available width and not break to another line, unless it can't 
fit left-aligned on that line like this
http://mylink.com 
```

因此，在上述情况下，我需要它不使用`<br />`标签来分解它，而应该像这样呈现：

```
Here is my text, and it's just an example of text to show And I am wanting to wrap
the last bit of text, which happens to be a link, but I need the link to either stay
on the line that is the available width and not break to another line, unless it can't 
fit left-aligned on that line like this http://mylink.com 
```

这可以通过 CSS 实现吗？也许一些`text-align`价值，或者为了在完全不使用`<br />`标签的情况下完成这一点而做的其他事情？但是，如果链接可以自然地放在行上，那么它不应该向下移动到下一行。相反，它应该保持在那条线上。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:22:23.573

一些浏览器将您 URL 中的斜杠解释为允许破坏您的*单词*的字符，而其他浏览器则不会。您需要做的就是调整链接的空白属性

[http://jsfiddle.net/Msc4S/](http://jsfiddle.net/Msc4S/)

```
a {
    white-space: pre;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:36:34.530

根据需要使用此 html：

```
<p>Here is my text, and it's just an example of text to show
And I am wanting to wrap the last bit of text, which happens
to be a link, but I need the link to either stay on the line
that is the available width and not break to another line,
unless it can't fit left-aligned on that line like this
<a href="http://mylink.com">http://mylink.com</a></p> 
```

但是将它添加到 CSS 中。

```
a {
    display: block;
} 
```

但是，这将`a`在任何地方出现新行，因此您必须使用此 CSS 进行更多指定

```
p a {
    display: block;
} 
```

这是 jsfiddle 示例[http://jsfiddle.net/vzmtB/](http://jsfiddle.net/vzmtB/)（不使用 using `p a`）和[http://jsfiddle.net/vzmtB/1/](http://jsfiddle.net/vzmtB/1/)（使用 using `p a`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:55:34.987

我认为默认的无中断自动换行已经做到了。当某些东西不适合行时它会移动到下一行，但如果它可以适合则不会移动到下一行。您需要定义父元素的宽度，其中文本将适合。[检查这个小提琴。](http://jsfiddle.net/qfVUq/1/)

```
nothing you need to do in css. 
```

# vb.net - 尝试捕获异常未显示消息框并捕获错误

> ID：15732361
> 
> 赞同：0
> 
> 时间：2013-03-31T17:33:55.253
> 
> 标签：vb.net

试图在计算器中捕捉除以零的异常并且它不起作用，不确定我哪里出错了？

```
Private Sub btnEqual_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnEqual.Click

    If lblOperator.Text = "+" Then
        txtAnswer.Text = Val(txtNumberOne.Text) + Val(txtNumberTwo.Text)
    ElseIf lblOperator.Text = "-" Then
        txtAnswer.Text = Val(txtNumberOne.Text) - Val(txtNumberTwo.Text)
    ElseIf lblOperator.Text = "x" Then
        txtAnswer.Text = Val(txtNumberOne.Text) * Val(txtNumberTwo.Text)
    ElseIf lblOperator.Text = "/" Then
        Try
            txtAnswer.Text = Val(txtNumberOne.Text) / Val(txtNumberTwo.Text)
        Catch ex As Exception When Val(txtNumberTwo.Text = 0)
            MessageBox.Show("You cannot divdide by zero")
        End Try
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:46:23.353

用浮点数除以零返回 Infinity、-Infinity 或 NaN，而不是引发异常。请参阅文档：http: [//msdn.microsoft.com/en-us/library/25bswc76.aspx](http://msdn.microsoft.com/en-us/library/25bswc76.aspx)

# java - 尝试对计时器进行编程，以便用户只能在一定时间内输入单词

> ID：15732362
> 
> 赞同：1
> 
> 时间：2013-03-31T17:33:57.270
> 
> 标签：java, timer

我正在尝试制作一个只能输入 10 秒单词的游戏。我试图创建一个多线程解决方案，但它不能正常工作。

```
class timer extends Thread{//thread
public void run(){
    for(int i=10;i>=0;i--){
        System.out.print(i+" ");
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}
} 
```

主要方法：

```
 timer t=new timer();
            t.start();
            while () {//not sure what to put in my while statement
                System.out.print("Guess a word on the board! ");
                if(test.CheckGame(scan.next())==true){
                    System.out.print("Good job! ");
                }
                else    
                    System.out.print("Guess again! ");
            } 
```

本质上，在线程运行 10 秒并终止后，我希望它返回一个 break 语句，以便程序离开 while 循环。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:45:44.973

将您的代码更改为此

```
timer t=new timer();
t.start();
while (t.isAlive()) {//not sure what to put in my while statement
    System.out.print("Guess a word on the board! ");
    if(test.CheckGame(scan.next())==true){
        System.out.print("Good job! ");
    }
    else    
        System.out.print("Guess again! ");
} 
```

一旦 run 函数退出，t.isAlive 将为 false。您可能还需要传递计时器对象并检查对象的 isAlive()，具体取决于 CheckGame 的工作方式。这是为了使输入不能在 10 秒后无限期地输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:06:30.810

Here is a simple Demo that would let you to know how to use [`java.util.Timer` .](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)

```
import java.util.Timer;
import java.util.TimerTask;
import java.util.Scanner;
class Tester 
{
    static long i = 0;
    public static void main(String[] args) throws Exception
    {
        Scanner scanner = new Scanner(System.in);
        System.out.println("You have only 10 seconds to find the result");
        System.out.println("What is the value of : 111111 X 111111 ");
        Timer timer = new Timer("Timer");
        timer.schedule(new TimerTask()
        {
            public void run()
            {
                if (i == 12345654321L)
                {
                    System.out.println("Congrats!! you guessed the write answer :)");
                }
                else
                {
                    System.out.println("Sorry Time is over. You couldn't guess the correct answer.");
                }
                System.exit(0);
            }
        },10 * 1000 , 1);
        while (true)
        {
            i = scanner.nextLong(); 
            if ( i == 12345654321L)
            {
                System.out.println("Congrats!! you guessed the write answer :)");
                System.exit(0);
            }
            else
            {
                System.out.println("Try next  guess :");
            }
        }
    }
} 
```

**EDIT**

Since I don't have your all code so I am posting here the solution for your answer on my basic assumption. Don't use Thread. Instead use `java.util.Timer`. Your code would look as follows:

```
static String input=" ";//created a static variable input to take input 
public static void main(String st[])
{
    Timer timer = new Timer("Timer");
    timer.schedule(new TimerTask()
    {
        public void run()
        {
            if (test.CheckGame(input))
            {
                System.out.println("Congrats!! you guessed the write answer :)");
            }
            else
            {
                System.out.println("Sorry Time is over. You couldn't guess the correct answer.");
            }
            System.exit(0);
        }
    },10 * 1000 , 1);//waits for 10 seconds
    while (true) 
    {
        System.out.print("Guess a word on the board! ");
        input = scan.next();
        if(test.CheckGame(input))
        {
            System.out.print("Good job! ");
            System.exit(0);
        }
        else
        {
            System.out.println("Bad Guess. Try again ");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:39:59.440

您可以有一个共享布尔值，您的线程和主线程以同步方式共享。

定时器可以如下；

```
class timer extends Thread{//thread
private Object lock = new Object(); // a lock used by both your thread and main to access stop boolean
private boolean stop = false;
public void setStop() // your thread calls this method in order to set stop
{
   synchronized(lock) {
   stop = true;
   }
}

public boolean getStop() // main calls this to see if thread told main to stop.
{
   boolean _stop;
   synchronized(lock) {
   _stop = stop;
   }
   return _stop;
}
public void run(){
    for(int i=10;i>=0;i--){
        System.out.print(i+" ");
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        setStop();
    }
}
} 
```

你的主要可能如下：

```
timer t=new timer();
            t.start();
            while (!t.getStop()) {// calls getStop to see if other thread told main to stop
                System.out.print("Guess a word on the board! ");
                if(test.CheckGame(scan.next())==true){
                    System.out.print("Good job! ");
                }
                else    
                    System.out.print("Guess again! ");
            }
            t.join(); // to make sure main terminates after the termination of other thread 
```

# jquery - JQuery Mobile 触发器创建

> ID：15732364
> 
> 赞同：0
> 
> 时间：2013-03-31T17:34:11.767
> 
> 标签：jquery, jquery-mobile

我已将标头注入到我的 DOM 中，我希望 JQM 呈现标头：

```
<div data-role="page" id="start">
    <div data-role="header" class="header">
        <h1>TEST</h1>
    </div>
</div> 
```

我打电话

> $('body').trigger('create')

但这不会更新 HTML，并且标题无法正确呈现。

我究竟做错了什么？

如果我为按钮执行此操作，则效果很好：

```
<div data-role="page" id="start">
    <a class="mybutton" href="javascript:;" data-role="button" id="uid-1">TEST</a>
</div> 
```

> $('body').trigger('create') 更新为：

```
<div data-role="page" data-url="mypage" id="start" data-url="start" tabindex="0"
    class="ui-page ui-body-c ui-page-active" style="min-height: 620px;">
    <a
        class="mybutton ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c"
        href="javascript:;" data-role="button" id="uid-1"
        data-corners="true" data-shadow="true" data-iconshadow="true"
        data-wrapperels="span" data-theme="c"><span class="ui-btn-inner"><span
            class="ui-btn-text">TEST</span></span></a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:58:26.113

**更新：**

由于您将项目动态注入页面，请使用

```
.trigger('pagecreate') 
```

以增强整页内容。

# java - 将图标添加到 JTree

> ID：15732365
> 
> 赞同：0
> 
> 时间：2013-03-31T17:34:28.733
> 
> 标签：java, swing, icons, jtree, renderer

如何将图标添加到 JTree。我想为根添加不同的图标，为根的叶子添加不同的图标，与叶子的叶子不同。

我正在实现一个 Jtree 来向用户显示用户的相册以及特定相册中的照片。所以三种不同类型的图标..

# c++ - OpenGL gl*Pointer 函数是做什么的

> ID：15732366
> 
> 赞同：0
> 
> 时间：2013-03-31T17:34:37.753
> 
> 标签：c++, function, opengl

我到处寻找 gl*Pointer 函数的确切作用，即`glColorPointer`, `glNormalPointer`, `glTexCoordPointer`, `glVertexPointer`。我发现的任何内容都不足以描述他们操纵的内容 - 我发现的所有内容都描述了他们如何操纵*它*，这无济于事。

基本上，如果OpenGL是一个创建和操作对象的接口，并且每个对象都有多个函数来操作它，那么仅仅一个函数引用是非常不够的。必须有对象的描述。我一直无法找到。

有人可以准确描述它们的用途吗？

编辑：

嘿，不要把我当成一个完整的 N00B ;-) 对不起，我不清楚 - 当我说对象时，我的意思是抽象的 - 非常抽象。事实上，我将任何具有状态和方法的事物归类为对象——因此 gl*Pointer 函数*设置*了 glDraw* 函数使用的状态。我只是好奇这个状态到底是什么。

编辑：

这是我一直在使用[的 OpenGL 函数参考。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374211(v=vs.85).aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:06:54.740

# javascript - JavaScript 素数生成器

> ID：15732370
> 
> 赞同：4
> 
> 时间：2013-03-31T17:34:55.053
> 
> 标签：javascript

我正在尝试编写一个 JavaScript 素数生成器，它列出了 1 到 100 之间的每个素数。我知道这是一个常见的编程练习，并且网络上有大量的解决方案。我的问题是为什么我的解决方案会导致一个空数组？这是代码：

```
var primeNumbers = [];
for (var x=2; x<101; x++)
    if (x%2 === 0) 
    {
        break;
    }
    else 
    {
        for (var y=2; y<101; y++) 
        {
            if (x/y > 1) 
            {
                break;
            }
            else 
            {
                primeNumbers.push(x);
            }
        }
    }
};
console.log(primeNumbers); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T17:36:20.193

因为你要做的第一件事就是 break if `x % 2 === 0`。这是真的。 `break`将退出循环。我想你想要`continue`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T18:01:53.497

**问题 1：**您在 时中断`x%2 === 0`，因此您立即退出循环。反转条件，直接在循环中输入代码：

替换这个：

```
if (x%2 === 0) {
  break;
}
else { 
```

和：

```
if (x%2 !== 0) { 
```

**问题 2：**如果`x/y > 1`. 这与条件相同`x > y`，因此总是会立即退出内部循环。而是使内部循环从 2 到 1 小于 1 运行`x`：

```
 for (var y=2; y<x; y++) { 
```

**问题 3：**`x`您应该使用模运算符：而不是除以`y`和比较一`x%y`。如果结果为零，则`x`不是素数。

**问题 4：**您在内循环中添加素数，因此您将多次得到大多数数字，而不仅仅是一次素数。

您需要添加一个变量来跟踪内部循环中发生的事情。如果内部循环中的所有检查*都不*为零，那么您可以添加`x`到素数列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-17T19:21:05.680

您不必在限制之前测试每个数字，您只需测试在该数字之前找到的素数。如果您要查找 1 到 10 之间的所有素数，例如，当您测试 7 时，您应该测试

```
7%2 === 0 false
7%3 === 0 false
7%5 === 0 false 
```

超过 7 是一个素数，你的素数数组应该是

```
[0,1,2,3,5,7] 
```

如您所见，我没有测试 4 因为 4 不是质数。这是你要测试的数字 8

```
8%2 === 0 true > return false 
```

而且您不必进行更多测试，因为您已经知道它不是质数。所以最终的解决方案应该是

```
function getPrimes(x){
        var ar = [];
        for (var counter = 0; counter <= x; counter++) {
            var notPrime = false;
            for (var i = 2; i <= ar.length && !notPrime; i++) {
                if (counter%ar[i]===0) {
                    notPrime = true;
                }
            }
            if (notPrime === false) ar.push(counter);
        }
        console.log(ar)
    }
    getPrimes(250); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-09T13:49:03.240

```
var funPrimeNumber=function(val){

 var iniX=2;
 var iniY=2;
 var flag=1;
 while(iniX<val){
            iniY=2; 
            flag=1;
                 while(iniY<iniX){
                     if(iniX%iniY==0){
                         //NOT PRIME NUMBER 
                         flag=0;
                     } 
                 iniY++;
                }

                 if(flag==1){
                    //PRIME NUMBER 
                    document.write(iniX + ", ");
                 }
        iniX++;          
      }
} 
```

有趣的素数（100）；

# java - javax.swing.text.BadLocationException 异常不断打开

> ID：15732379
> 
> 赞同：0
> 
> 时间：2013-03-31T17:35:33.130
> 
> 标签：java, exception, netbeans, exception-handling

在我输入时，每隔几秒钟左右就会出现此异常：

![在此处输入图像描述](https://i.stack.imgur.com/MWL3u.png)

显示详细资料：

![在此处输入图像描述](https://i.stack.imgur.com/HNSbu.png)

我唯一能想到我改变的是两件事：

1.  JavaDocs 的注释。
2.  完成后关闭所有 PreparedStatements 和 ResultSet 的代码。

它只发生在一个班级中，但实际上每隔几秒钟就会弹出一次。它刚刚开始这样做。知道为什么吗？

OS X - Netbeans 7.3 Beta 2 - Java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:42:56.343

尝试重新打开和关闭 NetBeans？

# sql - SQLite ROLLUP 查询

> ID：15732381
> 
> 赞同：0
> 
> 时间：2013-03-31T17:35:38.383
> 
> 标签：sql, sqlite

我正在尝试在我的数据库中获取每月余额的摘要。该表具有以下字段

```
tran_date 

type (Income or Expense)

amount 
```

我可以检索每个月每种类型的总和，但想要整个月的总和。这是我当前的查询：

```
SELECT DISTINCT strftime('%m%Y', tran_date), type, SUM(amount) FROM tran WHERE exclude = 0 GROUP BY tran_date, type 
```

这返回

```
032013  Income  100

032013  Expense  200 
```

我想要一行的摘要，在这个例子中是 032013 -100。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:48:46.627

只需使用正确的`group by`. 这使用条件聚合，假设您想要“收入 - 费用”：

```
SELECT strftime('%m%Y', tran_date), type,
       SUM(case when type = 'Income' then amount when type = 'Expense' then - amount end)
FROM tran WHERE exclude = 0
GROUP BY tran_date; 
```

如果您只想要全部金额，那么这更容易：

```
SELECT strftime('%m%Y', tran_date), type,
       SUM(amount)
FROM tran WHERE exclude = 0
GROUP BY tran_date; 
```

您的原始查询返回类型行，因为“类型”在`group by`子句中。

此外，`distinct`（几乎）从不需要`group by`.

# r - Rpart 变量被指定为适合的不同类型？

> ID：15732383
> 
> 赞同：0
> 
> 时间：2013-03-31T17:35:46.643
> 
> 标签：r

我使用 rpart 制作了一个分类树。数据有 10 列，均已正确标记。其中五列包含信息，例如“星期三”形式的星期几，其他五列包含数值。

我可以使用 Rpart 成功制作一棵树，但是当我尝试运行数据的测试集，甚至是制作树的训练集时，我收到一堆警告，说包含字符的变量已更改为一个因子，然后出现一个错误，指出这些相同的变量被指定为与拟合不同的类型。

有人知道怎么修这个东西吗？

我的相关代码应该是

```
library(rpart)
#read data into info
info <- data.frame(info)
set.seed(30198)
train_ind <- sample(1:2000, 1500)
training_data_info <- info[train_ind, ]
test_data_info <- info[-train_ind, ]
training_data_info <- data.frame(training_data_info)
test_data_info <- data.frame(test_data_info)
tree <- rpart(info ~ ., data = training_data_info, method = "class")
info.test.fit <- predict(tree, newdata=test_data_info) #this is where it goes wrong 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:15:57.153

您不能在`rpart`合适的情况下使用字符向量。您必须将它们编码为因子。该代码为您执行此操作，但随后您遇到了一个问题，即测试数据完全有可能与`levels`用于拟合树的训练数据具有不同的集合。

错误源于使用这两行：

```
training_data_info <- data.frame(training_data_info)
test_data_info <- data.frame(test_data_info) 
```

这些是多余的，对象已经是数据帧。所有这一切都是从整个数据集中删除那些在训练或测试数据集中缺失的级别。这就是错误的来源。尝试没有这两条线，你应该很高兴。

# c - 复共轭将matlab转置为C

> ID：15732384
> 
> 赞同：0
> 
> 时间：2013-03-31T17:35:46.743
> 
> 标签：c, matlab, fft, translate

我正在尝试将以下 matlab 代码转换为 c

```
cX = (fft(inData, fftSize) / fftSize);
Power_X = (cX*cX')/50; 
```

问题：

1.  为什么将 fft（fftSize 复杂元素数组）的结果除以 fftSize？
2.  我完全不确定如何将复杂的共轭变换转换为 c，我只是不明白那条线的作用。

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:17:40.247

```
1\. Why divide the results of fft (array of fftSize complex elements) by fftSize? 
```

因为合成 fft 的“能量”（平方和）随着 fft 中点数的增加而增加。除以点数“N”对其进行归一化，使得 fft 的平方和等于原始信号的平方和。

```
2\. I'm not sure at all how to convert the complex conjugate transform to c, I just don't understand what that line does. 
```

这就是实际计算平方和的方法。很容易验证 cX*cX' = sum(abs(cX)^2)，其中 cX' 是共轭转置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T18:31:31.973

1.  理想情况下，离散傅里叶变换 (DFT) 纯粹是一种旋转，因为它在不同的坐标系中返回相同的矢量（即，它在采样时间用频率而不是音量来描述相同的信号）。然而，DFT 通常实现为快速傅里叶变换 (FFT) 的方式，这些值以各种方式相加，需要乘以 1/N 以保持比例不变。

    通常，这些乘法从 FFT 中省略以节省计算时间，并且因为许多应用程序不关心尺度变化。无论规模如何，生成的 FFT 数据仍然包含所需的数据和关系，因此省略乘法不会导致任何问题。此外，校正乘法有时可以与应用程序中的其他操作相结合，因此单独执行它们没有意义。（例如，如果应用程序执行 FFT、进行一些操作并执行逆 FFT，则组合乘法可以在该过程中执行一次，而不是在 FFT 中执行一次，在逆 FFT 中执行一次。）

2.  我不熟悉 Matlab 语法，但是，如果[Stuart 的答案](https://stackoverflow.com/a/15732800/298225)是正确的，`cX*cX'`即计算数组中值大小的平方和，那么我看不到执行 FFT 的意义。您应该能够以相同的方式直接计算总能量`iData`；变换只是一个不改变能量的坐标变换，除了上面描述的缩放。

# travis-ci - 我无法理解我的 travis 构建有什么问题

> ID：15732394
> 
> 赞同：4
> 
> 时间：2013-03-31T17:37:16.393
> 
> 标签：travis-ci

我第一次玩 travis-ci，遇到了一个让我困惑的错误。

下面是我的 .travis.yml ，它在 linted 时进行验证。

```
language: node_js
node_js:
  - 0.8

after_script:
  - echo "Hello World" 
```

以下是我的 travis 构建输出：

```
$ git clone --depth=50 --branch=master git://github.com/iancrowther/travis-experiment.git iancrowther/travis-experiment
Cloning into 'iancrowther/travis-experiment'...
remote: Counting objects: 27, done.
remote: Compressing objects: 100% (21/21), done.
remote: Total 27 (delta 2), reused 20 (delta 0)
Receiving objects: 100% (27/27), done.
Resolving deltas: 100% (2/2), done.
$ cd iancrowther/travis-experiment
git.2
$ git checkout -qf xxx
$ nvm use 0.8
Now using node v0.8.22
$ node --version
v0.8.22
$ npm --version
1.2.14
$ make test
make: *** No rule to make target `test'.  Stop.
The command "make test" exited with 2.
after_script
$ echo "Hello World"
Hello World
Done. Your build exited with 1. 
```

如何防止make文件被执行？

任何帮助都会很棒，我似乎无法找到文档中解释的错误

伊恩

附言。有没有人有任何关于样式代码指南的链接？

**更新** @User 重新格式化问题时，他们添加了以下评论：“使用 {} 按钮使代码可见”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T20:15:06.117

更改`after_script`为`script`

看看这个`.travis.yml`：

```
before_install:
 - sudo apt-get update -qq
 - sudo apt-get install -qq python3.2 python2.7

python:
 - "2.7"

script: ./run_build.sh 
```

最后一行是重要的。

script 是运行测试的命令。

before 是使测试能够运行的东西，而 after 是要清理的东西。这与您从单元测试中可能知道的模式相同。设置、测试、拆卸

由于 Travis 没有找到 a`script:`我猜它需要一个默认选项进行测试。

# java - 确定两个字符串是否匹配的递归方法。匹配过程应该允许“通配符”。一个“@”和一个“*”

> ID：15732396
> 
> 赞同：0
> 
> 时间：2013-03-31T17:37:23.373
> 
> 标签：java, string, recursion

下面代码中的递归方法 match(String x, String y) 将确定两个字符串是否匹配。匹配过程应该允许“通配符”。'@' 字符将与任何其他单个字符匹配，'*' 字符将与任何类型的 0 个或多个字符匹配。

到目前为止，这就是我得到的：

```
public static boolean match(String x, String y) {

    int len = x.length() < y.length() ? x.length() : y.length();

    if (len == 0 && x.length() > 0)
        return false;
    else if (len == 0 && y.length() > 0)
        return true;

    for (int i = 0; i < len;)
    {
        int v1 = x.charAt(i);
        int v2 = y.charAt(i);

        if (v1 == v2)
            return match(x.substring(1, x.length()),
                             y.substring(1, y.length()));
        else
            return false;
    }

    return false; 

} 
```

任何帮助或指导将不胜感激。更具体地说，我如何使用递归来实现通配符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:29:56.750

看看这个。第一个想法，可以改进。

```
public static boolean match(String regex, String input) {
    return match(regex.toCharArray(), input.toCharArray(), regex.length() - 1, input.length() - 1);
}

private static boolean match(char[] regex, char[] input, int regexPosition, int inputPosition) {
    if (regexPosition < 0 || inputPosition < 0) {
        return false;
    }
    if (regexPosition == 0 && inputPosition == 0) {
        return true;
    }
    if (regex[regexPosition] == input[inputPosition] || regex[regexPosition] == '@') {
        return match(regex, input, regexPosition - 1, inputPosition - 1);
    }
    if (regex[regexPosition] == '*') {
        if (regex[regexPosition - 1] == '@') {
            /* @* => @ matter of taste. Sure there are counter examples. */
            return match(regex, input, regexPosition - 2, inputPosition - 1);
        }
        final int newInputPosition = String.valueOf(input).lastIndexOf(regex[regexPosition - 1]);
        if (newInputPosition >= 0) {
            return match(regex, input, regexPosition - 1, newInputPosition);
        }
    }
    return false;
} 
```

# unix - 创建 backup.sh 的 unix shell 脚本

> ID：15732398
> 
> 赞同：0
> 
> 时间：2013-03-31T17:37:38.873
> 
> 标签：unix

如何编写一个名为“backup.sh”的 shell 脚本，它接受一个参数，即文件名/目录。

创建它的备份副本，并在其名称后附加 .bak。成功时显示消息。

如果文件/目录不存在，则显示正确的消息。

我做到了这一点。请帮我解决这个问题

```
#!/bin/sh
#create_backup.sh
And add a .bak
bak="${backup.sh}.bak"
if [ "$#" -eq 0 ]
then 
        exit 1;
    echo "File Succesfully backuped"
fi
cp ${1} "${1}.back"
echo "File is not found "
exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:43:24.547

```
#!/bin/bash -e
directory=$1
cp -r $directory $directory.bak
echo "Success" 
```

带有路径/错误代码/等的明显警告

# ios - 为什么不分配这些 NSString 实例变量？

> ID：15732399
> 
> 赞同：2
> 
> 时间：2013-03-31T17:37:43.243
> 
> 标签：ios, objective-c

第一次在这里发帖。我之前正在阅读一个 Objective-C 教程，我看到他们制作了几个 NSString 实例变量，如下所示：

```
@implementation MyViewController {
NSString *stringOne;
NSString *stringTwo;
NSString *stringThree;
NSString *stringFour;
NSString *stringFive;
} 
```

然后像这样在 ViewDidLoad 中简单地使用它们：

```
- (void)viewDidLoad
{
[super viewDidLoad];

stringOne = @"Hello.";
stringTwo = @"Goodbye.";
stringThree = @"Can't think of anything else to say.";
stringFour = @"Help...";
stringFive = @"Pheww, done.";
} 
```

他们是如何在不实例化字符串的情况下做到这一点的？为什么这行得通？当然，您必须`stringOne = [NSString stringFromString:@"Hello."];`先正确分配和初始化对象，然后才能简单地执行`stringOne= @"Hello.";`.

对不起，如果这是一个愚蠢的问题，但我发现这些小事把我扔了。

谢谢，迈克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T17:44:53.437

来自[Apple 字符串编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/CreatingStrings.html)：

> ## 创建字符串
> 
> 在源代码中创建字符串对象的最简单方法是使用 Objective-C 的 @"..." 构造：

```
NSString *temp = @"Contrafibularity"; 
```

> 请注意，以这种方式创建字符串常量时，您应该使用 UTF-8 字符。这样的对象是在编译时创建的，并且存在于程序的整个执行过程中。编译器使此类对象常量在每个模块的基础上都是唯一的，并且它们永远不会被释放。您也可以像执行任何其他字符串一样将消息直接发送到字符串常量：

```
BOOL same = [@"comparison" isEqualToString:myString]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T17:41:24.043

`@"Hello"`编译器已经为您分配和初始化了 类似的字符串常量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T18:22:11.947

实际上这可以说是“语法糖”。还有一些其他类型的 NS 对象可以在没有分配或格式化的情况下创建。例如：

```
NSNumber *intNumber1 = @42;
NSNumber *intNumber2 = [NSNumber numberWithInt:42];

NSNumber *doubleNumber1 = @3.1415926;
NSNumber *doubleNumber2 = [NSNumber numberWithDouble:3.1415926];

NSNumber *charNumber1 = @'A';
NSNumber *charNumber2 = [NSNumber numberWithChar:'A'];

NSNumber *boolNumber1 = @YES;
NSNumber *boolNumber2 = [NSNumber numberWithBool:YES];

NSNumber *unsignedIntNumber1 = @256u;
NSNumber *unsignedIntNumber2 = [NSNumber numberWithUnsignedInt:256u];

NSNumber *floatNumber1 = @2.718f;
NSNumber *floatNumber2 = [NSNumber numberWithFloat:2.718f];

// an array with string and number literals
NSArray *array1 = @[@"foo", @42, @"bar", @3.14];

// and the old way
NSArray *array2 = [NSArray arrayWithObjects:@"foo", 
                                            [NSNumber numberWithInt:42], 
                                            @"bar", 
                                            [NSNumber numberWithDouble:3.14], 
                                            nil];

// a dictionary literal
NSDictionary *dictionary1 = @{ @1: @"red", @2: @"green", @3: @"blue" };

// old style
NSDictionary *dictionary2 = [NSDictionary dictionaryWithObjectsAndKeys:@"red", @1, 
                                                                       @"green", @2, 
                                                                       @"blue", @3, 
                                                                       nil]; 
```

有关更多信息，请参阅“[奇妙之处：新的 Objective-C 文字语法](http://blog.ablepear.com/2012/02/something-wonderful-new-objective-c.html)”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-31T18:53:45.993

只要记住这个基本的东西：-

```
NSString *string = ... 
```

这是一个指向对象的指针，“不是对象”！

因此，语句：`NSString *string = @"Hello";`将对象的地址分配给`@"Hello"`指针`string`。

`@"Hello"`被编译器解释为常​​量字符串，编译器自己为其分配内存。

同样，声明

```
NSObject *myObject = somethingElse; 
```

将地址分配`somethingElse`给指针`myObject`，并且`somethingElse`应该已经分配和初始化。

因此，语句：在特定内存位置`NSObject *myObject = [[NSObject alloc] init];`分配和初始化对象，并将其地址分配给.`NSObject``myObject`

因此，`myObject`包含内存中对象的地址，例如：0x4324234。

只要看到我们没有写`"Hello"`but `@"Hello"`，字符串文字前的这个 @ 符号告诉编译器这是一个对象，它返回地址。

我希望这能回答您的问题并消除您的疑虑。:)

# javascript - 在简单的 html5 网页中无法识别 Jquery

> ID：15732401
> 
> 赞同：0
> 
> 时间：2013-03-31T17:37:49.203
> 
> 标签：javascript, html

我整个下午都在寻找解决方案，但我没有找到。我正在编写一个 HTML5 网页，使用 jquery 和 css。我正在尝试实现非常简单的下拉菜单（我在[这里](http://wabism.com/jquery-drop-down-menu-tutorial/)找到了教程），但它对我不起作用。我已经将此代码从本文复制粘贴到本地 html 文件并在浏览器中打开它，它工作得很好，就像我想实现菜单一样，但是当我尝试在我的网页中实现相同的代码时它不起作用。

我在控制台日志中显示了两个错误：（SyntaxError: function statement requires a name - jquery.js: row 2072）然后在这个错误之后我得到了（ReferenceError: $ is not defined - index.html row 15，其中 $出现符号）。

我一直在寻找很多，但我没有找到任何有用的东西可能对我有帮助。如果我在 jquery 脚本声明中可能有问题，我也检查了很多次，但没关系。我不知道为什么这个简单的代码在我的应用程序中不起作用，但在外部代码中它工作得很好。我也尝试在脚本标签上插入语言和文本类型，但是如果我将脚本标签留空，我也没有工作。我使用最新的 Mozilla Firefox 浏览器。

这是我的应用程序代码：

```
 <!DOCTYPE html>
<html>
<head>
    <title>Test title</title>
    <link rel="stylesheet" type="text/css" href="css/layout.css">
    <link rel="stylesheet" type="text/css" href="css/skin/default.css">

    <script src="script/jquery.js" type="text/javascript"></script>
    <script src="script/video.js" type="text/javascript"></script>
    <script src="script/picture.js" type="text/javascript"></script>
    <script src="script/ApplicationController.js" type="text/javascript"></script>

    <script>
        $("body").ready(function() {
            $(".dropdown").hover(function() {
                $(this).find(".sub_navigation").slideToggle();
            });
        });
    </script>
</head>
<body onload="onApplicationLoad()">
    <div id="header">
        <a href="http://www.notreallink.fail/" target="_blank"><img id="logo" src="images/logo.png"  alt="Logo" width="200" height="38" /></a>
        <div id="verticalHeaderLine"></div>

        <div id="headerMenu">            
            <ul id="navigation">
                <li class="dropdown"> <button id="Login" class="button" title="Edit Login">Login</button>
                    <ul class="sub_navigation">
                        <li><button id="test" class="button" title="Edit Test">Test</button></li>
                        <li><button id="test1" class="button" title="Edit Test">Test 1</button></li>
                        <li><button id="test2" class="button" title="Edit Test">Test 2</button></li>
                    </ul>
                </li>
            </ul>

        </div>
    </div>
</body>
</html> 
```

这是一个与菜单相关的CSS：

```
ul {
    margin:0;
    padding:0;
    list-style-type:none;
    min-width:200px;
}

ul#navigation {
    float:left;
}

ul#navigation li {
    float:left;
    min-width:200px;
}

ul.sub_navigation {
    position:absolute;
    display:none;
}

ul.sub_navigation li {
    clear:both;
} 
```

如果有人知道我做错了什么，如果他能如此友善地告诉我我做错了什么，我会非常高兴。

问候， 达哈卡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T17:39:12.647

`$("body").ready(function() {`应该是`$(document).ready(function() {`

通常最好让 Google 为您托管 jQuery。有关完整说明，请参阅[http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)。将您对 jQuery 的引用替换为

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script> 
```

`<body><html>`此外，在您的文档末尾，您有`</body></html>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:52:02.743

```
 jQuery(document).ready(function($) {
        $(".dropdown").hover(function() {
            $(this).find(".sub_navigation").slideToggle();
        });
    }); 
```

试试这个看看是否有冲突或根本没有加载 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:43:32.077

我认为没有找到jquery。尝试将此添加到您的`<head></head>`.

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`

这是谷歌托管的 jquery。如果您可以访问互联网，它至少应该解决您的第一个问题

# java - 未检测到 JMenu 项操作侦听器

> ID：15732403
> 
> 赞同：0
> 
> 时间：2013-03-31T17:38:01.230
> 
> 标签：java, swing, actionlistener, jmenu, jmenuitem

我正在为一个学校项目制作一个图书馆数据库，但我的菜单有点问题。所以主要问题是在我写的Action Listener方法中

```
(e.getSource()==m1Frame1) 
```

我的程序没有检测到菜单项并给我一个错误。我已经在网上查看了多个教程等，但似乎找不到任何方法来修复它并使其能够在单击特定项目时发生特定操作。任何有关此问题的帮助/解决方案将不胜感激。

```
import javax.swing.*;
import java.awt.Graphics;
import java.awt.Toolkit;
import java.awt.event.*;
import javax.swing.JFrame;
import java.awt.event.ActionEvent;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JTextField;
import javax.swing.JPasswordField;
import javax.swing.JOptionPane;
import java.awt.event.*;
import javax.swing.Icon;
import java.awt.*;
import javax.swing.JLabel;
import javax.swing.ImageIcon;
import javax.swing.JPanel;
import java.awt.Color;

public class m1 extends JFrame {
    JPanel pane = new JPanel();

    JFrame a = new JFrame("Main Frame");
    JFrame b = new JFrame("Sub Frame");

    JButton checkOutButton = new JButton("check");
    JButton returnButton = new JButton("return");

    JMenu mb2 = new JMenu("Books");
    // mb2.setForeground(Color.white);
    JMenu open = new JMenu("Students");
// open.setForeground(Color.white);

    public m1() {

        JMenuBar mb;
        mb = new JMenuBar() {
            public void paintComponent(Graphics g) {
                g.drawImage(Toolkit.getDefaultToolkit().getImage("G:"), 0, 0, this);
            }
        };

        setSize(400, 400);
        setBackground(Color.BLACK);
        setTitle("Screen 2");
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        mb.add(open);

        JMenuItem m1Frame1 = new JMenuItem("Create");
        JMenuItem m1Frame2 = new JMenuItem("Delete");
        JMenu m1Frame3 = new JMenu("Look-Up");
        JMenuItem m1Frame4 = new JMenuItem("Check Fine");
        JMenuItem m1Frame5 = new JMenuItem("Check Borrowed Books");
        JMenuItem subM1 = new JMenuItem("Name");
        JMenuItem subM2 = new JMenuItem("Student #");

        open.add(m1Frame1);
        open.add(m1Frame2);
        open.add(m1Frame3);
        open.add(m1Frame4);
        open.add(m1Frame5);

        m1Frame3.add(subM1);
        m1Frame3.add(subM2);

        mb.add(mb2);

        JMenuItem m2Frame1 = new JMenuItem("Create");
        JMenuItem m2Frame2 = new JMenuItem("Delete");
        JMenu m2Frame3 = new JMenu("Look-Up");
        JMenuItem subB1 = new JMenuItem("Title");
        JMenuItem subB2 = new JMenuItem("Author");
        JMenuItem subB3 = new JMenuItem("Category");
        JMenuItem subB4 = new JMenuItem("ISBN");
        JMenuItem m2Frame4 = new JMenuItem("Compare Star Rating");
        JMenuItem m2Frame5 = new JMenuItem("Check If Checked Out");
        JMenuItem m2Frame6 = new JMenuItem("Lost Book");

        mb2.add(m2Frame1);
        mb2.add(m2Frame2);
        mb2.add(m2Frame3);
        mb2.add(m2Frame4);
        mb2.add(m2Frame5);
        mb2.add(m2Frame6);

        m2Frame3.add(subB1);
        m2Frame3.add(subB2);
        m2Frame3.add(subB3);
        m2Frame3.add(subB4);

        a.setJMenuBar(mb);

        a.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        a.setSize(1280, 720);
        a.setVisible(true);
        b.setSize(600, 400);

        m handler = new m();

        pane.add(checkOutButton);
        pane.add(returnButton);
        add(pane);
        checkOutButton.setVisible(false);
        returnButton.setVisible(false);
        checkOutButton.setBounds(60, 440, 220, 30);
        returnButton.setBounds(60, 404, 100, 50);
        checkOutButton.addActionListener(handler);
        returnButton.addActionListener(handler);
    }

    public class m implements ActionListener, ItemListener {

        public void actionPerformed(ActionEvent e) {
             (e.getSource() == m1Frame1) {
                a.setVisible(false);
                setVisible(true);
                checkOutButton.setVisible(true);
                returnButton.setVisible(true);
            }
        }

        public void itemStateChanged(ItemEvent e) {
        }
    }

    public static void main(String[] args) {
        m1 aa = new m1();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:49:55.440

好的，您的代码存在一些问题，但我将讨论回答您问题的两个细节：

1）您没有将动作侦听器添加到代码中的任何 MenuItems 中。当我使用 addActionListener(handler) 将您的处理程序添加到 MenuItems 时；它开始触发。

2）您将处理程序作为 actionListener 添加到两个不可见的按钮（并且您还有其他布局问题）

# java - 在 Java 中使用 Scala 2.10.1 值类型

> ID：15732404
> 
> 赞同：9
> 
> 时间：2013-03-31T17:38:14.380
> 
> 标签：java, scala, compiler-errors, value-type

我正在将我的 2.9.* 项目更新到 2.10。我有几个基本类型（角度、长度等）的类，它们似乎是值类型的完美候选者。不幸的是，我使用这些类型的 Java 代码没有编译，我不知道为什么。我已将其简化为一组非常简单的代码。任何建议将不胜感激。

**角度类定义（scala）**

```
package com.example.units

class Angle(val radians : Double) extends AnyVal
{
  def degrees = radians * 180.0 / math.Pi
}

object Angle
{
  val Zero = new Angle(0)
} 
```

**角度测试用例（痛苦地用 Java 编写）**

```
package com.example.units;

import junit.framework.Assert;
import org.junit.Test;

public class AngleTest
{
    @Test
    public static void TestZero()
    {
        Angle a = Angle.Zero();
        Assert.assertEquals(a.degrees(), 0, 1E-9);

    }

} 
```

当我编译时，我得到这个错误：

```
AngleTest.java:19 incompatible types
found :double
required: com.example.units.Angle
Angle a = Angle.Zero();

            ^ 
```

在我看来，Angle.Zero 好像是作为双精度返回的，而不是角度。我尝试添加 box/unbox 方法，但继续收到相同的错误。再次，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T18:03:31.177

Scala 编译器将值类转换为未装箱的类型，从而消除了它们的运行时成本。检查编译的类文件`Angle`，你会看到：

```
public static double Zero(); 
```

所以从 Java 的角度来看，Angle.Zero 返回一个双精度值；它不知道 Scala 值类的语义。

Angle 自己的方法，例如`degrees`，被编译为 a) 一个静态扩展方法，它接受未装箱的值 ( `double`) b) 一个实例方法：

```
public static double degrees$extension(double);
public double degrees(); 
```

这意味着后者仍然可以`Angle`在 Java 中的实例上调用：

```
Angle a = new Angle(0);
Assert.assertEquals(a.degrees(), 0, 1E-9); 
```

# mysql - 使用 distinct 只检索指定字段的一行

> ID：15732406
> 
> 赞同：0
> 
> 时间：2013-03-31T17:38:31.017
> 
> 标签：mysql

```
SELECT SUBSTRING(m.content,1,20) as content, 
       m.viewed, m.sent_date, 
       u.username 
FROM message m 
INNER JOIN user u 
ON u.userid = m.message_from
WHERE m.message_to = :userid 
```

我对这个查询的问题是它从同一个用户名中选择了多行。我只希望它为每个用户名选择一行。

我相信我为此使用了 DISTINCT？

我无法让它工作，有人可以帮助我！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:39:41.053

```
SELECT SUBSTRING(m.content,1,20) as content, m.viewed, m.sent_date, u.username 
FROM message m INNER JOIN user u ON u.userid = m.message_from
WHERE m.message_to = :userid GROUP BY u.userid 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T17:53:47.387

是的！你可以在你的用户名中使用 distinct

```
SELECT Distinct( u.username ), SUBSTRING(m.content,1,20) as content, 
       m.viewed, m.sent_date           
FROM message m 
INNER JOIN user u 
ON u.userid = m.message_from
WHERE m.message_to = :userid 
```

# mysql - 如何获得数据库条目的正确“版本”？

> ID：15732415
> 
> 赞同：0
> 
> 时间：2013-03-31T17:39:33.663
> 
> 标签：mysql

**更新：问题精炼，我仍然需要帮助！**

**我有以下表结构：**

表`reports`：

```
ID |       time | title | (extra columns)
 1 | 1364762762 |   xxx | ... 
```

`object`具有以下结构的多个表

```
ID | objectID |       time | title | (extra columns)
 1 |        1 | 1222222222 | ...   | ...
 2 |        2 | 1333333333 | ...   | ...
 3 |        3 | 1444444444 | ...   | ...
 4 |        1 | 1555555555 | ...   | ... 
```

在对象表中，在对象更新时插入具有相同 objectID 的新版本，以便旧版本仍然可用。例如，查看条目`objectID = 1`

在报告表中，a`report`被插入但从未更新/编辑。

**我想要做的是以下几点：**

对于表中的每个条目`reports`，我希望能够查询*所有*对象的状态，就像它们在`report`创建时一样。

例如，让我们看一下上面 ID 为 1 的示例报告。在创建它时（请参阅`time`列），objectID 1 的当前版本是 ID 为 1 的条目（当时不存在条目 ID 4）。ObjectID 2 也存在于它的当前版本中，条目 ID 为 2。

**我不确定如何实现这一目标。**

我可以使用按时间列选择对象版本的查询：

```
SELECT *
FROM (
    SELECT *
    FROM   objects
    WHERE  time < [reportTime]
    ORDER BY time DESC
)
GROUP BY objectID 
```

让我们不谈论这个查询的性能，只是为了明确我想要做什么。我的问题是时间列的比较。我认为这不是确保我获得正确的对象版本的好方法，因为系统时间可能会*“出于任何原因”*更改，并且时间列中会包含错误的数据，这会导致错误的结果。

这样做的另一种方法是什么？我考虑过不为此使用时间列，而是使用我知道跨数据库表的插入顺序的**GLOBAL增量值。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:43:41.200

如果您正在插入对象的新版本，而您的问题是`time`列（我假设您正在使用此列来对哪个新版本进行排序）；我建议您`auto-incremental ID`为版本使用一列。最终，即使该`time`值对您来说不可靠，`ID`它也会。因为它总是在增加。所以更高的ID，更新的版本。

# python - ValueError：需要超过 2123 个值

> ID：15732419
> 
> 赞同：0
> 
> 时间：2013-03-31T17:40:11.763
> 
> 标签：python, z3, smt, constraint-programming

我正在尝试运行一个非常大的 Z3 python 程序，如以下示例：

```
 S,   (cl_3,cl_39,cl_11, me_32,m_59,m_81 …………) = EnumSort('S',['cl_3','cl_39','cl_11','me_32','me_59','me_81', …………..])
#########################################  
def fun(h1 , h2):
    conds = [
    (cl_3, me_32),
    (cl_39, me_59),
    (cl_11, me_81),
    ...
    ]
    and_conds = (And(h1==a, h2==b) for a,b in conds)
    return Or(*and_conds)

#######################################
def fun2(m1 , m2):
    conds = [
    (cl_3, me_32),
    (cl_39, me_59),
    (cl_11, me_81),
    ...
    ]
    and_conds = (And(m1==a, m2==b) for a,b in conds)
    return Or(*and_conds)
#######################################
def fun3(y1 , y2):
    conds = [
    (cl_3, me_32),
    (cl_39, me_59),
    (cl_11, me_81),
    ...
    ]
    and_conds = (And(y1==a, y2==b) for a,b in conds)
    return Or(*and_conds) 
```

我使用了一个集合约束来检索匹配的模型；将根据函数参数检索匹配的模型，如下所示：

```
s = Solver()
x1 = Const('x1', S)
x2 = Const('x2', S)
x3 = Const('x3', S)

s.add(fun(x1,x2))
s.add(fun2(x2,x3)
.
.
.
s.add(fun3(x3,x1)

print s.check()
print s.model() 
```

但是，我收到以下错误

```
ValueError: need more than 2123 values to unpack 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:15:31.893

这不是好的编码习惯：

```
S, (cl_3, cl_39, cl_11, me_32, m_59, m_81...) = EnumSort(...) 
```

与其定义数百个这样的命名变量，不如使用名称列表、值列表，并构建一个 dict 来映射它们：

```
names = ['cl_3', 'cl_39'...] # don't write this list by hand, if you can avoid it
# eg.: ['cl_{}'.format(i) for i in range(50)] + ['m_{}'.format(i) for i...]

S, values = EnumSort('S', names)

if len(names) != len(values):
    raise Exception('...')

name_to_value = dict(zip(names, values))

# then you can use name_to_value['cl_3'] and so on 
```

# xslt - XPATH 表达式获取数据类型 QName 的 XML 属性的本地名称和命名空间

> ID：15732422
> 
> 赞同：3
> 
> 时间：2013-03-31T17:40:30.287
> 
> 标签：xslt, xpath

我想按照 w3schools 中的以下示例使用 XSLT 显示 XML 文档：http: [//www.w3schools.com/xml/xml_xsl.asp](http://www.w3schools.com/xml/xml_xsl.asp)。打开 XML 文档时，将在浏览器中完成 XSLT 到 HTML 的转换。

现在，我遇到了困难 a) 获取本地名称和 2) 在两个单独的表达式中获取 QName 类型的属性内容的名称空间。

**例子**

```
<service xmlns:ns3="http://www.mycompany.com/" name="ns3:PersonService">
    <serviceInterface name="ns3:PersonServiceInterface">
         <operation>...</operation>
</serviceInterface> 
```

**问题**

1.  什么 XPATH 表达式将**PersonService**作为属性*名称*的内容返回？`<xsl:value-of select="@name"/>`返回**ns3:PersonService**但我不想要命名空间前缀。
2.  什么 XPATH 表达式将返回**[http://www.mycompany.com/](http://www.mycompany.com/)**作为属性*名称*的命名空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:44:25.027

> 1.什么XPATH表达式会返回PersonService作为属性名的内容？

**假设它`service`是顶部元素的子元素（您尚未提供完整且格式正确的 XML 文档），请使用**：

```
substring-after(/*/service/@name, ':') 
```

> 2.什么 XPATH 表达式会返回[http://www.mycompany.com/](http://www.mycompany.com/)作为属性名称的命名空间？

**在与上述相同的假设下，使用：**

```
/*/service/namespace::*[name() = substring-before(../@name, ':')] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:value-of select="substring-after(/*/service/@name, ':')"/>
============
  <xsl:value-of select=
   "/*/service/namespace::*[name() = substring-before(../@name, ':')]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**此 XSLT 转换，当应用于以下 XML 文档**（提供的，但已完成）时：

```
<t>
    <service xmlns:ns3="http://www.mycompany.com/"
             name="ns3:PersonService">
        <serviceInterface name="ns3:PersonServiceInterface">
            <operation>...</operation>
        </serviceInterface>
    </service>
</t> 
```

**计算两个 XPath 表达式并将这些计算的结果复制到输出：**

```
PersonService
============
http://www.mycompany.com/ 
```

# sencha-touch - sencha touch 2 中的模态视图

> ID：15732424
> 
> 赞同：2
> 
> 时间：2013-03-31T17:40:33.703
> 
> 标签：sencha-touch

我试图在我的应用程序中将视图显示为“模态”。主应用程序是一个选项卡面板，当用户执行某个操作时，我想在此选项卡面板上弹出一个视图。我知道在本机 iOS 上，您可以通过将视图作为模式推送来做到这一点，但我如何在 Sencha 中做到这一点？

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T18:17:05.267

你可以这样做：

```
Ext.define('MyApp.controller.MyController4', {
    extend: 'Ext.app.Controller',

    config: {
        control: {
            "button#mybutton": {
                tap: 'onMybuttonTap'
            }
        }
    },

    onMybuttonTap: function(button, e, options) {
        Ext.Viewport.add({xtype:'modalpanel'});
    }
}); 
```

意见：

```
Ext.define('MyApp.view.ModaPanel', {
extend: 'Ext.Panel',
alias: 'widget.modalpanel',

config: {
    centered: true,
    height: 300,
    html: 'Cool Story Bro....',
    itemId: 'modalPanel',
    width: 300,
    hideOnMaskTap: true,
    modal: true,
    scrollable: true,
    hideAnimation: {
        type: 'popOut',
        duration: 200,
        easing: 'ease-out'
    },
    showAnimation: {
        type: 'popIn',
        duration: 200,
        easing: 'ease-out'
    },
    items: [
        {
            xtype: 'toolbar',
            docked: 'top',
            title: 'Blah Blah'
        }
    ]
}

});

Ext.define('MyApp.view.MyTabPanel', {
extend: 'Ext.tab.Panel',

config: {
    items: [
        {
            xtype: 'container',
            title: 'Tab 1',
            items: [
                {
                    xtype: 'button',
                    itemId: 'mybutton',
                    text: 'MyButton10'
                }
            ]
        },
        {
            xtype: 'container',
            title: 'Tab 2'
        },
        {
            xtype: 'container',
            title: 'Tab 3'
        }
    ]
}

}); 
```

**编辑：**`actionsheet`如果这不是您想要 的，您可能正在寻找。请参阅 Sencha Touch [Kitchensink](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/overlays)了解不同类型的覆盖物。

# javascript - 谷歌地图模式问题

> ID：15732427
> 
> 赞同：10
> 
> 时间：2013-03-31T17:40:43.597
> 
> 标签：javascript, jquery, google-maps, twitter-bootstrap, modal-dialog

我正在尝试将谷歌地图显示到 Twitter 引导模式中。当用户第一次单击按钮时`Show map`，他能够成功地看到地图，因为我正在生成地图`onclick()`功能，但是当他关闭模式并重新打开它时，地图无法正确显示并且地图的 90% 部分变为灰色，如下所示

![在此处输入图像描述](https://i.stack.imgur.com/xgXEF.png)

我什至尝试了这种解决方法，删除地图绑定的整个 div 并重新生成它，但是这个技巧不起作用，请让我知道如何解决我的问题。

以下是我调用显示地图的 onclick 事件的 js 函数

```
function mapp()
{

//google.maps.event.trigger(map, "resize");
  //$("#map_google_canvas").empty();
$("#map_google_canvas").remove();

$("#crmap").append("<div id='map_google_canvas'></div>")

    var myOptions = {
        center: new google.maps.LatLng(54, -2),
        zoom: 6,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_google_canvas"), myOptions);

        var addressArray = new Array("London, United Kingdom", "London Road, Brentwood, United Kingdom", "Brentwood, United Kingdom");

    var geocoder = new google.maps.Geocoder();

    var markerBounds = new google.maps.LatLngBounds();

    for (var i = 0; i < addressArray.length; i++) {
        geocoder.geocode({
            'address': addressArray[i]
        }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });
                markerBounds.extend(results[0].geometry.location);
                map.fitBounds(markerBounds);
            } else {
                alert("Geocode was not successful for the following reason: " + status);
            }
        });
    }

} 
```

请帮助，

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-28T11:33:29.993

我遇到过同样的问题。但我发现模态显示事件存在问题。因为它不适用于某些版本的问题，所以我只是按照引导模式文档来实现它。

Bootstrap 模态图问题解决方案：

```
$(document).ready(function(){
  $('#locationMap').on('shown.bs.modal', function(){
    google.maps.event.trigger(map, 'resize');
    map.setCenter(new google.maps.LatLng(-33.8688, 151.2195));
  });
}); 
```

最后这对我有用，它可以帮助某人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-07T19:21:21.173

我正在使用 Angular，而刚刚对我有用的`ui.bootstrap.collapse` **AngularUI**指令是使用超时。该指令与 modals 存在相同的问题，因为直到新视图完全加载后才定义地图大小，并且地图显示为灰色区域。我所做的是将此代码添加到打开折叠内容的按钮中。也许您可以使用打开模式的按钮使其适应您的情况。

```
window.setTimeout(function () {
    google.maps.event.trigger(map, 'resize')
}, 0); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-03T19:27:18.760

如果您使用的是 bootstrap 3，则必须这样做：

```
function showMap() {
        var mapOptions = {
            zoom: 12,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map"),
            mapOptions);
        $('#mapmodal').on('shown.bs.modal', function () {
              google.maps.event.trigger(map, 'resize');
              map.setCenter(new google.maps.LatLng(54, -2));
            });
        $('#mapmodal').modal("show");
} 
```

还要确保您没有为 img - 标签设置任何最大宽度或最大高度值。如果您在 css 样式表中这样做，请将其放在它的末尾：

```
#map img{
    max-width:none;
    max-height:none;
} 
```

我不确定是否有必要，但为保存地图的 div 设置一个高度值应该是一件好事：

```
<div id="map" style="height:400px"></div> 
```

我从几个stackoverflow讨论中组装了这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-03T07:49:45.357

由于您正在将地图加载到尚未定义的宽度元素中，因此您有此解决方案。

使用 latlong 初始化地图后，您应该在 google.maps 上触发调整大小事件

```
$('.modal').on('shown', function () {
  // also redefine center
  map.setCenter(new google.maps.LatLng(54, -2));
  google.maps.event.trigger(map, 'resize');
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-16T09:51:02.913

如果你使用 Angular，你应该使用**$timeout**而不是**setTimeout**。包装一个 $timeout 设置为 0 的函数将确保包装的函数在当前执行上下文完成后执行。在您的情况下，Google Maps API 只会在模式和保存地图的元素完全呈现后重新绘制地图。您不会看到任何灰色区域。

```
$timeout(function () {
    google.maps.event.trigger(map, 'resize');
    map.setCenter(new google.maps.LatLng(53.5085011, -6.2154598););
}, 0); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-16T22:21:52.933

可以使用and`visibility:hidden`代替and 。这对我有用。您甚至可以为此编辑模式的 CSS。`visibility:visible``display:none``display:block`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-01T18:53:03.970

感谢 user1012181 的回答，我解决了这个问题。我个人也很喜欢这种纯 CSS 解决方案。

```
div#myModalMap.modal.fade.in{    
    visibility: visible;
}

div#myModalMap.modal.fade{
    display: block;
    visibility: hidden;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-12T06:08:53.890

我也遇到了这个问题，并想出了这个简单的解决方案。

等到您的模态完全加载，然后在 map 函数上设置 timeOut 事件。

```
$('#MyModal').on('loaded.bs.modal',function(e){
   setTimeOut(GoogleMap,500);
}); 
```

我非常确定它在所有情况下都会奏效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-10T08:23:20.407

嗯，这就是上面的答案如何帮助，但我不得不使用调用 main 函数`onclick`。

```
<span data-target="#enlargeModal"data-toggle="modal" onclick="newMap()" class="fa fa-expand r"></span>

function newMap() 
```

{

功能显示地图（）{

```
//your map function 
```

}

```
 $('#enlargeModal').on('shown.bs.modal', function () {
          var center = fullmap.getCenter();
          google.maps.event.trigger(fullmap, 'resize');
          fullmap.setCenter(center);
    }); 
```

显示地图（）; }

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-14T04:15:12.103

我将使用 uiGmapIsReady 等待 dom 准备好然后强制调整地图大小：

```
uiGmapIsReady.promise().then(function () {
    var map = $scope.map.control.getGMap();
    google.maps.event.trigger(map, 'resize');
});
```

# perl - 在 Perl 中编码 Windows-1250 的问题

> ID：15732430
> 
> 赞同：0
> 
> 时间：2013-03-31T17:40:54.993
> 
> 标签：perl, encoding

我有一个用 Windows-1250 编码的文本文件。我正在使用 Windows 7 EN。

我想在 Perl 代码中用 print 逐行遍历这个文件。在控制台中，我看不到变音符号。

你能给我任何解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:11:00.983

这取决于您要对文本做什么，但在许多情况下，可以根据编码独立编码。无论如何，如果您将输出重定向到文件并且结果正常（阅读：可以在 Windows 1250 模式下使用正确的字体由文本编辑器打开显示），那么您的代码不是问题。

另一件事是您希望在控制台中看到 CE 字符。为此，您需要执行以下操作：

*   将您的控制台窗口设置为使用能够显示它们的字体（您可能需要安装这种字体，我不记得 Win 7 中的正确方法）

*   使用命令将控制台设置为 Windows-1250 模式`chcp 1250`

请注意，这与您使用查看器或编辑器查看字符所需的操作基本相同。除了许多编辑器能够自己检测编码（有时甚至是正确的）并选择正确的字体之外，控制台通常需要您的帮助。

您的问题可能与[此处已解决](https://stackoverflow.com/questions/9905740/incorrect-encoding-after-redirecting-dir-output-to-a-file/9906184#9906184)的问题类似。我还建议阅读我在那里引用[的另一篇文章。](https://stackoverflow.com/questions/1259084/what-encoding-code-page-is-cmd-exe-using)

# javascript - 带有 jQ uery 的 javascript - 如何更改特定的文本

> ID：15732432
> 
> 赞同：0
> 
> 时间：2013-03-31T17:40:59.543
> 
> 标签：javascript, jquery, text, selector

我如何通过 javascript 和 jQuery 更改给定的 HTML 代码：

```
<div> <strong> unimportant text here </strong> important text here </div> 
```

目标是在`<div> .... important text here </div>`不触及...的情况下更改文本

```
<strong> unimportant text here </strong> 
```

...部分

例子：

*此处为*不重要的文字 * 此处*为重要且已更改的文字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:44:54.137

**[jsFiddle 演示](http://jsfiddle.net/33udc/1)**

这需要访问父 div。我不确定您希望如何访问它，但例如，我将使用`id`.

```
<div id="d"> <strong> unimportant text here </strong> important text here </div> 
```

这允许以内部元素为目标。您应该只使用子字符串来选择文本的后半部分

```
var AllText = $('#d').text();
var StrongElementText = $('#d strong').text();
var ImportantText = AllText.substr(StrongElementText.length); 
```

*编辑*

由于无法直接定位元素，必须对其进行推断（这可能导致目标碰撞）

**[使用推断目标的 jsFiddle 演示](http://jsfiddle.net/33udc/3/)**

```
$('div strong').each(function(){
 var AllText = this.parentNode.innerText;
 this.parentNode.innerText += " And Changed";
 var StrongElementText = this.innerText;
 var ImportantText = AllText.substr(StrongElementText.length);
 c[0].innerHTML += ImportantText + "<br>";//shows output
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:46:07.800

```
<div> 
    <strong> unimportant text here </strong> 
    <span id="changeText">important text here</span>
</div>

$('#changeText').text= "I CHANGE THE TEXT"; 
```

# c++ - '< >' 未在此范围内声明

> ID：15732437
> 
> 赞同：0
> 
> 时间：2013-03-31T17:41:34.820
> 
> 标签：c++

我想独立重载`operator+`以连接 2 个双链列表。我的想法是从第一个列表中获取第一个元素的地址，从第二个列表中获取第一个元素的地址。

在`DoubleChainedList`课堂上，除了构造函数、析构函数和接下来的 4 个工作正常的方法外，我创建了一个名为的方法`get_prim`，它应该让我从指定列表中获取第一个元素的地址。然后，使用`get_current`我想在第一个列表中移动直到它结束的方法，同时在第三个列表中添加元素，然后将相同的原则应用于第二个列表。

但我有一个问题，我明白了

```
'get_prim' was not declared in this scope 
```

和

```
'get_current' was not declared in this scope 
```

当我编译时，在粗体标记的行（参见下面的代码）处。我错过了什么？

```
#include <iostream>
#include <stdlib.h>
using namespace std;

//Create node class
class Node
{
private:
    float value;         
    Node *back;        
    Node *next;       
public:
    Node *set_value (Node *x, float element) { x->value=element; return x; }
    float get_value (Node *x) { return x->value; }
    Node *set_back (Node *x) { return x->back; }
    Node *set_next (Node *x) { return x->next; }
    Node *set_back_nod (Node *x, Node *y) { x->back=y; return x; }
    Node *set_next_nod (Node *x, Node *y) { x->next=y; return x; }
    void next_to_2next (Node *x) { x->next=x->next->next; }
    void next_back_to_origins (Node *x) { x->next->back=x; }
};

//Create list class
class DoubleChainedList : public Node
{
private:
    Node *prim;       
    Node *ultim;    
public:
    DoubleChainedList() { prim=NULL; ultim=prim; }           //Constructor
    ~DoubleChainedList();                                    //Destructor
    void insert_back(float element);                         //Inserts an element at the end of the list
    void delete_element_from_position(int delete_position);  //Deletes from the list the element whose position is equal to "delete_position"
    void show_left_right();                                  //Shows the list from the first element to the last one
    void show_right_left();                                  //Shows the list from the last element to the first one
    Nod *get_prim (DoubleChainedList myList) { return this->prim; };    //Intended to obtain the address of the first element from "myList"
    Nod *get_current (Node *x) { return set_next(x); };                  //Intended to move me through the list
};

DoubleChainedList operator+ (DoubleChainedList myList1, DoubleChainedList myList2)
{
    DoubleChainedList myList3;
    Nod *current1,*current2;
    current1=get_prim(myList1); // ERROR OVER HERE!
    current2=get_prim(myList2);
    cout<<get_value(current1)<<" "; // ERROR OVER HERE!
    cout<<get_value(current2)<<" ";
    return myList3;
}

int main()
{
    int i,number_elem_myList1,number_elem_myList2,element;
    DoubleChainedList myList1,myList2,myList3;
    cin>>number_elem_myList1;
    for (i=0;i<number_elem_myList1;i++)
    {
        cin>>element;
        myList1.insert_back(element);
    }
    cin>>number_elem_myList2;
    for (i=0;i<number_elem_myList2;i++)
    {
        cin>>element;
        myList2.insert_back(element);
    }
    myList3=myList1+myList2;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:46:39.030

如果您实现`operator+=`为成员函数，则可以访问其他列表的变量。

我会实现`operator+=`，然后遍历另一个列表，将另一个列表的节点附加到这个列表中。

并将另一个列表作为`const &`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:12:36.123

用例如`someObject.function(...)`or调用的函数`someObject->function(...)`（其中`someObject`分别是一个对象或指向某个具有`function(...)`函数的类的对象的指针）可以直接访问`someObject`.

因此，作为类成员的函数不需要将该类的对象作为参数传递，除非您想在该函数中使用 2 个对象。

的函数`Node`应该看起来更像：

```
void set_value (float element) { value = element; }
float get_value () { return value; }
Node *set_back () { return back; }
Node *set_next () { return next; }
void set_back_nod (Node *y) { back = y; }
void set_next_nod (Node *y) { next = y; }
void next_to_2next () { next = next->next; }
void next_back_to_origins () { next->back = this; } 
```

另外，`get_prim`：

```
Node *get_prim() { return prim; }; 
```

然后导致`operator+`看起来更像：（`const &`正如托马斯建议的那样）

```
DoubleChainedList operator+ (const DoubleChainedList &myList1,
                             const DoubleChainedList &myList2)
{
    DoubleChainedList myList3;
    Node *current1, *current2;
    current1 = myList1.get_prim();
    current2 = myList2.get_prim();
    cout << current1->get_value() << " ";
    cout << current2->get_value() << " ";
    // ...
    return myList3;
} 
```

按照托马斯的建议使用`operator+=`可能也是一个更好的主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:16:08.570

修改程序如下，但还是有问题。如果我尝试在“operator+”过程之外显示列表，我会得到“Segmentation fault”（当我调试程序时，它立即发生在该指令之后：“myList3=myList1+myList2;”）。如果我在该过程中显示它，一切都很好。我认为这是因为“return”语句而发生的，并且因为我返回了一个临时对象，该对象在“operator+”过程结束后将不再存在，但我不知道如何解决这个问题。

```
#include <iostream>
using namespace std;

//Create node class
class Node
{
private:
    float value;         
    Node *back;        
    Node *next;       
public:
    Node *set_value (float element) { value=element; return this; }
    float get_value () { return value; }
    Node *set_back () { return back; }
    Node *set_next () { return next; }
    Nod *set_back_node (Node *y) { back=y; return this; }
    Nod *set_next_node (Node *y) { next=y; return this; }
    void next_to_2next () { next=next->next; }
    void next_back_to_origins () { next->back=this; }
};

//Create list class
class DoubleChainedList : public Node
{
private:
    Node *prim;       
    Node *ultim;    
public:
    DoubleChainedList() { prim=NULL; ultim=prim; }           //Constructor
    ~DoubleChainedList();                                    //Destructor
    void insert_back(float element);                         //Inserts an element at the end of the list
    void delete_element_from_position(int delete_position);  //Deletes from the list the element whose position is equal to "delete_position"
    void show_left_right();                                  //Shows the list from the first element to the last one
    void show_right_left();                                  //Shows the list from the last element to the first one
    Node *get_prim () { return prim; }                       //Intended to obtain the address of the first element from a list
};

DoubleChainedList operator+ (DoubleChainedList myList1, DoubleChainedList myList2)
{
    DoubleChainedList myList3;
    Node *current1,*current2,*current3;
    current1=myList1.get_prim();
    current2=myList2.get_prim();
    while ((current1!=NULL)||(current2!=NULL))
    {
        if (current1!=NULL)
        {
            myList3.insert_back(current1->get_value());
            current1=current1->set_next();
        }
        else
            if (current2!=NULL)
            {
                myList3.insert_back(current2->get_value());
                current2=current2->set_next();
            }
    }
    //myList3.show_left_right();
    //cout<<endl;
    //myList3.show_right_left();
    return myList3;
}

int main()
{
    int i,number_elem_myList1,number_elem_myList2,element;
    DoubleChainedList myList1,myList2,myList3;
    cin>>nr_elem_lista1;
    for (i=0;i<number_elem_myList1;i++)
    {
        cin>>element;
        myList1.insert_back(element);
    }
    cin>>number_elem_myList2;
    for (i=0;i<number_elem_myList2;i++)
    {
        cin>>element;
        myList2.insert_back(element);
    }
    myList3=myList1+myList2;
    myList3.show_left_right();
    myList3.show_right_left();
    return 0;
} 
```

@Dukeling 如您所说修改了“Node”类的方法（当然还有必要的程序），也可以。

如果有人感兴趣，我可以发布完整的代码，但它有 200 多行、变量/日期、程序/方法的名称以及一些用罗马尼亚语（我的自然语言）写的评论，对于新手来说会更难明白它。

# python - 字典理解错误

> ID：15732438
> 
> 赞同：1
> 
> 时间：2013-03-31T17:41:37.413
> 
> 标签：python, dictionary, dictionary-comprehension

我正在尝试创建一个简单的字典，每个字母后面都有一个数字（从 1 到 26），如下所示`{'a': 1, 'b': 2, 'c': 3, ...}`：我想尝试使用字典理解来做到这一点，所以我做了：

```
from string import lowercase
d = {s:i for s in lowercase for i in range(1, 27)} 
```

但是，这会导致：`{'a': 26, 'b': 26, 'c': 26, ...}`。我认为这是因为它遍历小写的每个值，将其分配给 1，然后是 2，然后是 3（对于每个值）以 26 结尾。只有 26 个键，因为因为它是字典，所以它不会有两个键相同的字母（所以它在最后将它们全部覆盖为 26）。我不知道如何解决这个问题，所以如果我能得到关于如何实际做到这一点的指导，那就太好了。

我让它使用`dict()`和`zip()`:工作`dict(zip(lowercase, range(1, 27)))`。但是，我想知道如何使用字典理解来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T17:43:55.053

与[`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)：

```
{s: i for i, s in enumerate(lowercase, 1)} 
```

# jquery - 将值和文本从 SELECT/OPTION 传递到另一个 SELECT/OPTION jQuery

> ID：15732439
> 
> 赞同：0
> 
> 时间：2013-03-31T17:41:38.060
> 
> 标签：jquery

我试图在选择时克隆一个选项并将其传递到另一个表单中。

我想做什么？我正在构建一个邮件脚本，您可以在其中通过添加或删除表单中的选项来处理 2-3 个表单来选择您的接收者。

Form1 已经有了值。

Form2 需要来自 form1 的值，这就是问题所在。

我怎样才能以最好的方式做到这一点？

这是我到目前为止得到的：

```
$('.valj_grupp_email').change(function() {
    $('.add_button').click(function(){
        $('.valj_grupp_email').find(":selected").text().insertAfter('.valda_grupper_email');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:30:02.763

HTML

```
<select id="sel1" multiple size="4">
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
</select>
<select id="sel2" multiple size="4">
    <option value="dummy">Dummy</option>
</select>
<br>
<input type="button" id="doBtn" value="do it"> 
```

JS

```
$('#doBtn').click(function () {
    $('#sel1 option:selected').each(function () {
        $("<option/>").
        val($(this).val()).
        text($(this).text()).
        appendTo("#sel2");
    });
}); 
```

工作jsfiddle：http: [//jsfiddle.net/wnNfc](http://jsfiddle.net/wnNfc)

# html - 来自 png 文件的一部分的背景图像

> ID：15732440
> 
> 赞同：0
> 
> 时间：2013-03-31T17:41:53.017
> 
> 标签：html, css, background, background-image

我有这张图片：

![在此处输入图像描述](https://i.stack.imgur.com/zvynm.png)

如何将 .png 文件的一部分用作图像？我想将上部用于我的课程`<a class="non_check">`，将下部用于我的`<a class="checked">`课程作为背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:43:55.687

您将要使用 CSS 图像精灵。使用图像精灵，您可以只显示您想要使用的图像部分。

例如：

```
a.checked {
    width: 20px;
    height: 20px;
    display: block;
    background:url('image_here.png') 0px -20px;
}

a.unchecked {
    width: 20px;
    height: 20px;
    display: block;
    background:url('image_here.png') 0px 0px;
} 
```

*   该`background`属性定义将成为 div 的背景的图像。
*   图片链接后面的数字定义了位置（第一个数字是`left`，第二个数字是`top`）。

## [JS 小提琴示例](http://jsfiddle.net/sHDP5/2/)

[CSS Sprites：它们是什么，为什么它们很酷，以及如何使用它们](http://css-tricks.com/css-sprites/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:46:00.367

您需要一个图像高度一半的图层（如 DIV 或 SPAN）。您将图像放置在背景中，并通过设置背景位置，您可以将图像部分移动到视图中或移出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:46:48.733

您将为此使用背景位置：悬停。像这样的东西：

```
.checkbox {
background:#ffffff url('checkbox.png') no-repeat 0 0;}
width:23px
height:21px;
}

.checkbox:hover {
background:#ffffff url('checkbox.png') no-repeat 0 21px;}
width:23px
height:21px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T17:49:21.187

您应该使用适当的 CSS。您可以组合固定`width`的 and`height`和`background`,`background-position`属性，如下所示：

```
.checkbox
{
    width: 23px;
    height: 42px;

    background: url(checkbox-icons.png);
}

.checkbox.unchecked
{
    background-position: 0 0;
}

.checkbox.checked
{
    background-position: 0 -21px;
} 
```

固定大小仅导致所需的背景矩形可见，并且通过更改`background-position`属性，您可以准确定义它应该是哪个片段。

# c - 如何减少程序的堆大小以查看它在内存不足时的行为？

> ID：15732441
> 
> 赞同：4
> 
> 时间：2013-03-31T17:41:57.470
> 
> 标签：c, malloc

我目前正在编写一个在各个地方分配内存的程序。我有兴趣了解当堆内存不足时我的程序的行为，即当 malloc() 返回 NULL 时。

是否有一个编译器选项可以让我将堆大小设置为非常小的值，这样我就可以立即看到发生了什么？我正在使用 gcc 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:49:07.960

您可以像这样指定堆栈和堆大小：

```
gcc -Wl,--stack=xxxxx -Wl,--heap=yyyyy ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T17:44:53.687

至少如果在 Linux 上您可以`ulimit -m <max mem>`在运行程序之前使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T17:45:11.673

编译为 32 位并通过保留大块内存来耗尽虚拟地址空间（您不需要提交 - 只需保留（这些是 Windows 术语，我确信它们具有 Linux 等效项）。

Windows 也有可用于限制内存的作业对象，但这种简单的`VirtualAlloc`技术可能会奏效。

关于它的好处是您可以动态更改限制，也许使用计时器，在随机时间一次又一次地对程序施加压力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T17:47:01.247

用您自己的代码替换`malloc`＆friends来模拟条件怎么样？我不确定最好的方法，也许`LD_PRELOAD`会起作用（[这里有一些示例代码](http://www.cs.cmu.edu/afs/cs/academic/class/15213-s03/src/interposition/mymalloc.c)）。

# javascript - 如何使用时尚的用户脚本或 javascript 来删除这个 html 元素？

> ID：15732446
> 
> 赞同：6
> 
> 时间：2013-03-31T17:42:11.200
> 
> 标签：javascript, html, userscripts

在我访问的网站上，我想通过编写脚本从页面中删除广告链接。我将如何删除`<a href-"ad">ad</a>`页面元素？我想最好的方法是使用 javascript，并使用 tampermonkey chrome 扩展来运行脚本。否则，使用时尚和 css 脚本。

```
<div class=main>
    <h2>Title</h2>
    <div class=stuff>
    //bunch of other stuff
    </div>
    <a href="ad.com">ad</a>

</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T17:45:58.227

为此，我制作了一个名为**Js-Injector**的 chrome 扩展。它可以从 github 上的[https://github.com/shahverdy/JS-Injector](https://github.com/shahverdy/JS-Injector)获得。不幸的是，由于美国对我的国家实施制裁，我无法在 Chrome 网上应用店中部署它。为此目的，有一些扩展示例，您可以轻松地使用它。

在**Js-Injector**中，您可以为您的网站添加以下代码：

```
$(function(){
    $("a[href='ad.com']").remove();
}) 
```

**编辑**：还有一些其他的扩展，比如 Tampermonkey 可用。但是在选择合适的扩展时应该考虑一些重要的问题：

*   Js-Injector 真的好用
*   Js-Injector 具有可用于您的脚本的导入/导出功能。
*   有一些预定义的示例，因此您可以选择使用它们而无需编写任何代码。
*   Js-Injector 真的很轻。
*   Js-Injector 在自己的范围内为每个网站运行脚本，因此它不会消耗那么多 RAM/CPU

# php - 如何从 .dll 文件生成 .php 文件以完成代码？

> ID：15732449
> 
> 赞同：2
> 
> 时间：2013-03-31T17:42:49.113
> 
> 标签：php, mongodb, netbeans, code-completion, pecl

基本上我刚刚成功安装了 MongoDB，它是 PHP 扩展。我想在我的 IDE 中为 MongoDB php 库使用代码完成，而我得到的最接近答案的是一些关于 PDT 和 Eclipse 的内容。我哪儿也去不了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T03:34:24.540

好的，经过大量搜索后，我找到了一些可以帮助我做到这一点的代码！我将在此处包含代码供其他人使用，以防 git 存储库发生问题。您所要做的就是将要存根的类和函数写入这些数组中以完成代码`$functions = array();` `$classes = array();` [https://gist.github.com/ralphschindler/4757829](https://gist.github.com/ralphschindler/4757829)

```
<?php

define('T', '    ');
define('N', PHP_EOL);

$functions = array();
$classes = array();
$constant_prefix = 'X_';

$php = '<?php' . N;
$php .= '/**' . N . ' * Generated stub file for code completion purposes' . N . ' */';
$php .= N . N;

foreach (get_defined_constants() as $cname => $cvalue) {
    if (strpos($cname, $constant_prefix) === 0) {
        $php .= 'define(\'' . $cname . '\', ' . $cvalue . ');' . N;
    }
}

$php .= N;

foreach ($functions as $function) {
    $refl = new ReflectionFunction($function);
    $php .= 'function ' . $refl->getName() . '(';
    foreach ($refl->getParameters() as $i => $parameter) {
        if ($i >= 1) {
            $php .= ', ';
        }
        if ($typehint = $parameter->getClass()) {
            $php .= $typehint->getName() . ' ';
        }
        $php .= '$' . $parameter->getName();
        if ($parameter->isDefaultValueAvailable()) {
            $php .= ' = ' . $parameter->getDefaultValue();
        }
    }
    $php .= ') {}' . N;
}

$php .= N;

foreach ($classes as $class) {
    $refl = new ReflectionClass($class);
    $php .= 'class ' . $refl->getName();
    if ($parent = $refl->getParentClass()) {
        $php .= ' extends ' . $parent->getName();
    }
    $php .= N . '{' . N;
    foreach ($refl->getProperties() as $property) {
        $php .= T . '$' . $property->getName() . ';' . N;
    }
    foreach ($refl->getMethods() as $method) {
        if ($method->isPublic()) {
            if ($method->getDocComment()) {
                $php .= T . $method->getDocComment() . N;                
            }
            $php .= T . 'public function ';
            if ($method->returnsReference()) {
                $php .= '&';
            }
            $php .= $method->getName() . '(';
            foreach ($method->getParameters() as $i => $parameter) {
                if ($i >= 1) {
                    $php .= ', ';
                }
                if ($parameter->isArray()) {
                    $php .= 'array ';
                }
                if ($typehint = $parameter->getClass()) {
                    $php .= $typehint->getName() . ' ';
                }
                $php .= '$' . $parameter->getName();
                if ($parameter->isDefaultValueAvailable()) {
                    $php .= ' = ' . $parameter->getDefaultValue();
                }
            }
            $php .= ') {}' . N;
        }
    }
    $php .= '}';
}

echo $php . N; 
```

# floating-point - 为什么OpenCL内核调用sin而不是cos的浮点异常？

> ID：15732450
> 
> 赞同：3
> 
> 时间：2013-03-31T17:42:55.033
> 
> 标签：floating-point, opencl

我的 OpenCL 内核抛出了一个浮点异常。我已将其简化为我认为导致问题的行。

如果我更换线路

```
acc.x += sin(distSqr); 
```

和

```
acc.x += cos(distSqr); 
```

或者

```
acc.x += sqrt(distSqr); 
```

要不就

```
acc.x += (distSqr); 
```

内核运行良好。为什么？注意：我的全球工作规模可以被我的本地工作规模整除。

谢谢。

这是内核：

```
__kernel void compute_forces(
                      __global float3 *x3a,
                      __global float3 *p3a,
                      __global float3 *x3b,
                      __global float3 *p3b,
                      __global float3 *f3a,
                      float dt,
                      float qQa,
                      float qQb,
                      float qma,
                      float qmb,
                      int n0a,
                      int n1a,
                      int n0b,
                      int n1b,
                      float xmin,
                      float ymin,
                      float epsSqr,
                      float force_fac,
                        __local float3 *localx
                      )
{

//we are going to compute the force between parts (n0a-n1a) and (n0b-n1b)
//Each particle loads the particle in the current block into local memory, so
unsigned int tid = get_local_id(0);
unsigned int gid = get_global_id(0);

unsigned int ninter=0;

// position of this work-item
float3 myPos = x3a[gid];
float3 acc = (float3)(0.0f, 0.0f, 0.0f);

    // Synchronize to make sure data is available for processing
    barrier(CLK_LOCAL_MEM_FENCE);

    for(int j = 0; j < 2; ++j)
    {

        float3 r=-myPos;
        float distSqr = r.x * r.x;

        // accumulate effect of all particles
        acc.x += sin(distSqr);

        ninter++;

    }//j

    // Synchronize so that next tile can be loaded
    barrier(CLK_LOCAL_MEM_FENCE);

f3a[gid]+=acc;
f3a[gid].x=(float)ninter;

} 
```

我称内核为：

```
err=clSetKernelArg(k_compute_forces, 0, sizeof(_x3), &_x3);
err=clSetKernelArg(k_compute_forces, 1, sizeof(_p3), &_p3);
err=clSetKernelArg(k_compute_forces, 2, sizeof(_x3), &_x3);
err=clSetKernelArg(k_compute_forces, 3, sizeof(_p3), &_p3);
err=clSetKernelArg(k_compute_forces, 4, sizeof(_f3), &_f3);
err=clSetKernelArg(k_compute_forces, 5, sizeof(dt_float), &dt_float);
err=clSetKernelArg(k_compute_forces, 6, sizeof(qQa), &qQa);
err=clSetKernelArg(k_compute_forces, 7, sizeof(qQb), &qQb);
err=clSetKernelArg(k_compute_forces, 8, sizeof(qma), &qma);
err=clSetKernelArg(k_compute_forces, 9, sizeof(qmb), &qmb);
    err=clSetKernelArg(k_compute_forces,10, sizeof(n0a), &n0a);
    err=clSetKernelArg(k_compute_forces,11, sizeof(n1a), &n1a);
    err=clSetKernelArg(k_compute_forces,12, sizeof(n0b), &n0b);
    err=clSetKernelArg(k_compute_forces,13, sizeof(n1b), &n1b);
err=clSetKernelArg(k_compute_forces,14, sizeof(xmin_float), &xmin_float);
err=clSetKernelArg(k_compute_forces,15, sizeof(ymin_float), &ymin_float);
err=clSetKernelArg(k_compute_forces,16, sizeof(epsSqr), &epsSqr);
err=clSetKernelArg(k_compute_forces,17, sizeof(force_fac), &force_fac);
err=clSetKernelArg(k_compute_forces,18, parts_per_block*sizeof(cl_float3),NULL);

    err=clEnqueueNDRangeKernel(queue, k_compute_forces, work_dim, NULL, global_work_size, local_work_size, 0, NULL, &k_compute_forces_completion); 
```

编辑：我认为 sin 函数不能处理小于约 1.0e-12 的浮点数，因为该行：

```
acc.x += sin(1.0e-12); 
```

运行良好，但

```
acc.x += sin(1.0e-13); 
```

引发异常。这似乎表明正在调用 sin_half 而不是 sin...我想知道这是否是优化的替代品。

如果我在上述行之前添加一个 printf 语句

```
printf("distSqr=%g\n",distSqr); 
```

然后错误从“浮点异常”变为有关“divisionErrorHandler”的内容（尽管由于输出文本混乱而难以辨认）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:05:40.650

由于 sin(x) 似乎不适用于 x 的小值，我怀疑 Nvidia 驱动程序正在用 native_sin(x) 替换它，它评估为直接在硬件中实现的函数，但可能不是那个准确或支持全范围的数字。我建议在对 clBuildProgram 的调用中添加构建选项“-cl-opt-disable”，因为这应该禁用所有优化，告诉我们编译器优化是否有问题。

# iphone - 删除 UITableViewCell 时显示进度 HUD

> ID：15732460
> 
> 赞同：0
> 
> 时间：2013-03-31T17:43:43.140
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我正在尝试删除一段`UITableViewCell`时间显示进度 HUD（在本例中为 MBProgressHUD）。这是必要的，因为要删除的核心数据实体相对较大。当我运行此代码时，我收到以下错误消息：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新 (2) 后现有节中包含的行数必须等于该节中包含的行数更新前的节 (2)，加上或减去从该节插入或删除的行数（0 插入，1 删除），加上或减去移入或移出该节的行数（0 移入，0 移动出去）。'

正在执行的代码是：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {

        [self.tableView beginUpdates];

        [SVProgressHUD showWithStatus:@"Deleting..." maskType:SVProgressHUDMaskTypeGradient];

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

            Garden *gardenToDelete = [self.fetchedResultsController objectAtIndexPath:indexPath];
            NSLog(@"Deleting garden '%@'", gardenToDelete.gardenName);
            [self.managedObjectContext deleteObject:gardenToDelete];
            [self.managedObjectContext save:nil];

            dispatch_async(dispatch_get_main_queue(), ^{

                NSLog(@"Dismissing progress HUD");
                NSLog(@"delete animation");
                NSLog(@"deleting row");

                  [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                  NSLog(@"performFetch");
                  [self performFetch];
                  [SVProgressHUD dismiss];
                });

        });

        [self.tableView endUpdates];
    }   
} 
```

当它运行时，我看到 HUD 出现，然后应用程序继续挂起。我确信这与我的多任务处理结构有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:49:39.540

managedObjectContext 不是线程安全的。您需要为每个线程创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:16:04.987

当您第一次调用`dispatch_async`时，您将分离该线程并允许该方法继续执行。这意味着`[self.tableView endUpdates];`之前被调用`[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];`

相反，当你重新进入主线程时`[self.tableView beginUpdates];`，将你的调用`[self.tableView endUpdates];`放在你的第二个调用中。`dispatch_async`

# mobile-safari - 移动溢出：滚动和溢出滚动：触摸//防止视口“反弹”

> ID：15732466
> 
> 赞同：32
> 
> 时间：2013-03-31T17:44:04.150
> 
> 标签：mobile-safari, overflow, viewport

在移动设备上（Safari、webviews、任何地方）， `overflow:scroll`并`overflow-scrolling: touch`提供非常流畅的滚动，这很酷。

但是，它使页面“反弹”（下面圈出的区域），当您不使用它时情况并非如此，但这会使体验变得不那么“原生”（更简单地说，据我所知关于它的意见，绝对没有用）

有没有办法防止它发生？

![那种suxx](https://i.stack.imgur.com/sStZr.jpg)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-20T15:36:16.313

这里有一篇很棒的博客文章：

[http://www.kylejlarson.com/blog/2011/fixed-elements-and-scrolling-divs-in-ios-5/](http://www.kylejlarson.com/blog/2011/fixed-elements-and-scrolling-divs-in-ios-5/)

连同这里的演示：

[http://www.kylejlarson.com/files/iosdemo/](http://www.kylejlarson.com/files/iosdemo/)

总之，您可以在包含主要内容的 div 上使用以下内容：

```
.scrollable {
    position: absolute;
    top: 50px;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: scroll;
    -webkit-overflow-scrolling: touch;
} 
```

我认为您正在描述的问题是，当您尝试在已经位于顶部的 div 内向上滚动时，它会向上滚动页面而不是向上滚动 div，并在页面顶部产生反弹效果。我想你的问题是问如何摆脱这个？

为了解决这个问题，作者建议您使用[ScrollFix](https://github.com/joelambert/ScrollFix)自动增加可滚动 div 的高度。

还值得注意的是，您可以使用以下内容来防止用户向上滚动，例如在导航元素中：

```
document.addEventListener('touchmove', function(event) {
   if(event.target.parentNode.className.indexOf('noBounce') != -1 
|| event.target.className.indexOf('noBounce') != -1 ) {
    event.preventDefault(); }
}, false); 
```

不幸的是，ScrollFix 仍然存在一些问题（例如，使用表单字段时），但 ScrollFix 上的问题列表是寻找替代方案的好地方。[本期](https://github.com/joelambert/scrollfix/issues/2)讨论了一些替代方法。

博文中也提到了其他替代方案，即[Scrollability](http://joehewitt.github.com/scrollability/)和[iScroll](http://cubiq.org/iscroll)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-16T12:07:43.357

我已经设法找到一种 CSS 解决方法来防止视口反弹。关键是将内容包装在 3 个 div 中，并对其应用 -webkit-touch-overflow:scroll。最终 div 的最小高度应为 101%。此外，您应该在代表设备尺寸的 body 标签上明确设置固定宽度/高度。我在 body 上添加了一个红色背景，以表明它是现在弹跳的内容，而不是移动 safari 视口。

下面的源代码和这里是一个 plunker（这也已在 iOS7 GM 上测试过）。[http://embed.plnkr.co/NCOFoY/preview](http://embed.plnkr.co/NCOFoY/preview)

如果您打算在 iPhone 5 上将其作为全屏应用程序运行，请将高度修改为 1136px（当 apple-mobile-web-app-status-bar-style 设置为 'black-translucent' 或设置为 ' 时为 1096px黑色的'）。920x 是考虑到移动 safari 的 chrome 后视口的高度）。

```
<!doctype html>
<html>

<head>
    <meta name="viewport" content="initial-scale=0.5,maximum-scale=0.5,minimum-scale=0.5,user-scalable=no" />
    <style>
        body { width: 640px; height: 920px; overflow: hidden; margin: 0; padding: 0; background: red; }
        .no-bounce { width: 100%; height: 100%; overflow-y: scroll; -webkit-overflow-scrolling: touch; }
        .no-bounce > div { width: 100%; height: 100%; overflow-y: scroll; -webkit-overflow-scrolling: touch; }
        .no-bounce > div > div { width: 100%; min-height: 101%; font-size: 30px; }
        p { display: block; height: 50px; }
    </style>
</head>

<body>

    <div class="no-bounce">
        <div>
            <div>
                <h1>Some title</h1>
                <p>item 1</p>
                <p>item 2</p>
                <p>item 3</p>
                <p>item 4</p>
                <p>item 5</p>
                <p>item 6</p>
                <p>item 7</p>
                <p>item 8</p>
                <p>item 9</p>
                <p>item 10</p>
                <p>item 11</p>
                <p>item 12</p>
                <p>item 13</p>
                <p>item 14</p>
                <p>item 15</p>
                <p>item 16</p>
                <p>item 17</p>
                <p>item 18</p>
                <p>item 19</p>
                <p>item 20</p>
            </div>
        </div>
    </div>

</body>

</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-24T23:46:23.563

你可以试试

```
$('*').not('#div').bind('touchmove', false); 
```

如有必要，添加

```
$('#div').bind('touchmove'); 
```

请注意，除了#div 之外的所有内容都是固定的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-17T15:54:53.157

这个答案似乎已经过时了，不适合现在的单页应用程序。[就我而言，由于这篇文章](https://www.bram.us/2016/05/02/prevent-overscroll-bounce-in-ios-mobilesafari-pure-css/) 提出了一个简单但有效的解决方案，我找到了解决方案：

```
html,
body {
  position: fixed;
  overflow: hidden;
}
```

**如果您的身体是滚动容器，则此解决方案不适用。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-20T13:25:56.913

```
body {
  position: fixed;
  height: 100%;
} 
```

# testing - 什么被认为是在 akka 中测试语义竞争条件的“最佳实践”？

> ID：15732474
> 
> 赞同：0
> 
> 时间：2013-03-31T17:44:35.070
> 
> 标签：testing, concurrency, akka, actor, race-condition

考虑以下演员：

```
class Stateful(worker: ActorRef) extends Actor {
   val queue = // immutable queue with details
   def receive = {
      case NewJob(details) => worker ! details
      case JobRejection(details) if sender == worker => // enqueue
      case JobRequest if sender == worker => // dequeue and send to worker
   }
} 
```

这个简单的actor将所有工作转发给它的底层worker。如果工人太忙，他会拒绝这份工作，并且该工作会被排入队列以备后用。在某个时候，工作人员完成并从队列中请求另一个作业，依此类推。

为了测试这个演员，我传递了一个拒绝第一份工作的假工人，所以我可以测试它是否真的在队列中（有一个`GetJobs`消息，队列是不可变的，所以不用担心）。工作被拒绝后，我`scheduleOnce`用.`JobRequest``delay``100 millis`

现在我从我的测试套件发送作业，使用该`scheduleOnce`技术稍等片刻，然后发送 GetJobs 消息。如果我很幸运，这份工作正在排队。我重复该过程，这次队列应该再次为空。有时确实如此。

有没有更好的方法来控制时间？因为基本上有三个延迟，我必须手动调整。并且在添加了另外几个这样的测试之后，不能保证这种调整可以在不同的机器上运行，甚至在我的机器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:02:17.393

不要使用假工人，而是使用[TestProbe](http://doc.akka.io/api/akka/2.0.5/akka/testkit/TestProbe.html)。然后，您可以在探针上使用标准的 TestKit 方法，并让探针将消息发送回参与者`Stateful`。

请参阅参考手册中[有关使用探针的部分。](http://doc.akka.io/docs/akka/2.0.5/scala/testing.html#Using_Multiple_Probe_Actors)

# semantic-web - [Freebase]：查找节点之间的关系

> ID：15732477
> 
> 赞同：2
> 
> 时间：2013-03-31T17:44:41.227
> 
> 标签：semantic-web, freebase, mql

我是 Freebase 的新手，我一直试图找到 2 个节点之间的关系但没有成功。

例如，我想找出现实生活中存在的 Lewis Hamilton(/en/lewis_hamilton) 和一级方程式 (/en/formula_one) 之间是否存在联系，但我似乎找不到。

我尝试了以下 MQL 代码，以及交替的 ID：

1)

```
[{ 
 "type" : "/type/link", 
 "source" : { "id" : "/en/lewis_hamilton" }, 
 "master_property" : null, 
 "target" : { "id" : "/en/formula_one" }, 
 "target_value" : null 
}] 
```

2)

```
{
  "id":"/en/lewis_hamilton",
  "/type/reflect/any_master":[{
    "link":null,
    "name":null
  }],
  "/type/reflect/any_reverse":[{
    "link":null,
    "name":null
  }],
  "/type/reflect/any_value":[{
    "link":null,
    "value":null
  }]
} 
```

我也无法使用他们的几个可以做到这一点的应用程序，因为它每次都返回**“超出用户速率限制” 。**应用程序是：

1.  [http://between.freebaseapps.com](http://between.freebaseapps.com)
2.  [http://shortestpath.freebaseapps.com](http://shortestpath.freebaseapps.com)

你们有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T19:58:05.967

您提供的查询是正确的，只是它们只查看相隔一个链接的关系。令人惊讶的是，目前还没有从刘易斯汉密尔顿到 Freebase 一级方程式的道路。如果有，它可能看起来像这样：

```
/en/lewis_hamilton → /type/object/type → /base/formula1/formula_1_driver
/base/formula1/formula_1_driver → /type/type/domain → /base/formula1
/base/formula1 → /freebase/domain_profile/equivalent_topic → /en/formula_one 
```

Freebase 不支持递归查询，因此没有好的方法可以找到主题之间的这些多链接路径。您尝试的应用程序通过生成具有越来越多的嵌套子查询的查询来模拟递归。不幸的是，它们已经过时，并且缺少正确的 API 密钥以立即正常运行。这些嵌套查询如下所示：

```
{
  "id": "/en/lewis_hamilton",
  "name": null,
  "/type/reflect/any_master": [{
    "link": {
      "master_property": null,
      "target": {
        "id": null,
        "name": null,
        "/type/reflect/any_master": [{
          "link": {
            "master_property": null,
            "target": {
              "id": "//base/formula1",
              "name": null
            }
          },
          "name": null
        }]
      }
    },
    "name": null
  }]
} 
```

这类查询可能需要很长时间才能运行，如果在[Freebase 数据转储](https://developers.google.com/freebase/data)上本地运行可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:03:29.777

Freebase 现在只返回 503，所以尝试起来有点困难，但是

*   Freebaseapps 上的所有应用程序都是开源的，因此查看您找到的应用程序的源代码应该会给您一些很好的提示。应用程序目录位于[https://www.freebase.com/apps](https://www.freebase.com/apps)（但现在不呈现）

*   只需单击一下即可克隆 Freebaseapps 上的所有应用程序。当谷歌切换到新的 API 时，几乎所有在该基础设施上编写的应用程序都停止工作，如果他们多年没有被关注，开发人员不太可能修复它们，但你可能可以通过 a) 克隆来让感兴趣的应用程序工作他们，b) 注册 API 密钥和 c) 将该 API 密钥添加到克隆的应用程序。

# jquery - 当下一个容器向右浮动时，jeditable 字段会跳出 div

> ID：15732479
> 
> 赞同：0
> 
> 时间：2013-03-31T17:44:48.973
> 
> 标签：jquery, css, jeditable

我有两个主要的 div #left 和 #right，它们位于另一个 #content div 中，彼此相邻。#left 包含一个可编辑字段。#right 浮动在右侧。

单击 jeditable 字段时，它会跳到#content 下方。你可以在这里试试（点击“kala”）：http: [//jsfiddle.net/BuDLC/14/](http://jsfiddle.net/BuDLC/14/)

如果我从#right 中删除浮动，该字段将按预期工作，即。输入字段出现在可编辑 div 的顶部。

HTML：

```
<div id="content">
   <div id="right">
       right
   </div>
   <div id="left">
       <div class="edit">Kala</div>
    </div>
</div> 
```

CSS：

```
body {
    background: gray;
    height: 100%;
}

.edit {
    border-bottom-style: dotted;
    border-bottom-color: lightgray;
    border-bottom-width: 1px;
    background: green;
}

.edit form,                                                                                                                        
.edit input {
    margin: inherit;
    padding: inherit;
    font: inherit;
    color: inherit;
    background: inherit;
    border: none;

}

#content {
    width: 300px;
    height: 100px;
}

#right {
   float: right;
   width: 100px;
   background-color: khaki;
}

#left {
     width: auto;
     min-width: 150px;
     background-color: blue;
}

#right, #left {
     height: 100%;   
} 
```

请 MTV，拉皮条我的 HTML/CSS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:58:15.290

很高兴你找到了一些有用的东西。如果您对问题的根本原因感兴趣，那是因为输入框的默认宽度为 300 像素。将 150 的宽度传递给可编辑扩展器可以解决此问题：

```
$(".edit").editable("http://x.y.z/some/url", {width : 150} ); 
```

[可编辑宽度初始化小提琴](http://jsfiddle.net/L4SNc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:37:17.447

我找到了：我只需要添加

```
margin-right: 100px; 
```

向左。我昨天晚上都在为此苦苦挣扎，显然我只需要在这里问它：D

# ruby-on-rails - 带有 field_for 的 Nested_form_for 不起作用

> ID：15732483
> 
> 赞同：0
> 
> 时间：2013-03-31T17:45:02.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的看法是

```
<h3> Register New Items </h3>
<div class="row">
<div class="span2 offset4">
    <%= nested_form_for @item_category, :url => items_path, :method => :post, :html => { :class => "item_category"} do |f| %>
        <div><%= f.label :item_name %>
        <%= f.text_field :item_name %></div>
        </br>

        <div>
            <%= f.fields_for :item_companies do |f| %>
                  <%= f.label :company_name %>
                <%= f.text_field :company_name %>

     </div>
     </br>

     <%= f.fields_for :item_weights do |f| %>
            <div>
                    <%= f.label :weight %>
                    <%= f.text_field :weight %>
            </div>
            </br>
            <div>
                    <%= f.label :price %>
                    <%= f.text_field :price %>
            </div>
    <%end%>
    <%end%>

    <div><%= f.submit "Submit" %></div>
    <% end %>
</div> 
```

和控制器

```
def new
  @item_category = ItemCategory.new
  item_company = @item_category.item_companies.build
  item_company.item_weights.build 
end 
```

当我在`create`操作中应用调试器并且我看到了的值 `params[:item_category]`并生成了`{"item_name"=>"iname", "item_companies_attributes"=>{"0"=>{"company_name"=>"cname", "item_weights_attributes"=>{"0"=>{"weight"=>"20kg", "price"=>"100"}}}}}`

```
ItemCategory.new(params[:item_category]) 
```

产生的错误

```
ActiveModel::MassAssignmentSecurity::Error Exception: Can't mass-assign protected attributes: item_companies_attributes. 
```

我错在哪里以及如何使用它在三个表中保存价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:55:01.737

您似乎忘记在模型中添加这段代码`ItemCategory`：

```
attr_accessible :item_companies_attributes 
```

这将允许您设置这些属性。

# ruby-on-rails - 狂欢分类群关系

> ID：15732484
> 
> 赞同：1
> 
> 时间：2013-03-31T17:45:06.850
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord, spree

目标：显示分类单元内另一个分类的分类单元

我所拥有的：Taxanomy1 'Categories' 分类单元 [吉他、小提琴、钢琴] Taxanomy2 '品牌' 分类单元 [Yamaha、Samick、PROEL]

产品兼具：品类和品牌

任务1：当我在分类显示页面上时，我想展示@products 拥有的品牌

任务2：当我在品牌页面时，我想显示当前品牌产品的类别

对不起，如果我的解释不够清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:02:13.787

```
taxon_id = 558398765 # "Current" Taxon
brand_taxonomy_id = 854451436 # Your "Brand" Taxonomy
sql_query  = <<-SQL
SELECT DISTINCT "spree_products_taxons"."taxon_id" FROM "spree_products_taxons" WHERE "spree_products_taxons"."product_id" IN (
  SELECT "spree_products"."id" FROM "spree_products"
  INNER JOIN "spree_products_taxons" ON "spree_products"."id" = "spree_products_taxons"."product_id"
  WHERE "spree_products_taxons"."taxon_id" = #{taxon_id}
)
SQL
taxon_ids = ActiveRecord::Base.connection.execute(sql_query).to_a.map {|tp| tp['taxon_id']}
Taxon.where(id: taxon_ids, taxonomy_id: brand_taxonomy_id).all # All "Brand" taxons for all products in your "Current" Taxon 
```

Task2 相同，将最后一行更改为：

```
Taxon.where(id: taxon_ids, taxonomy_id: category_taxonomy_id).all # All "Category" taxons for all products in your "Brand" Taxon 
```

# c# - 学习在 Winforms 中拖放按钮

> ID：15732485
> 
> 赞同：0
> 
> 时间：2013-03-31T17:45:08.600
> 
> 标签：c#, winforms, drag-and-drop

我目前正在尝试学习如何在 C# winforms 中使用拖放功能。我在网上找到了一些非常简洁的教程和文档，但没有一个能帮助我找到解决当前问题的方法。

把我的设计目标分解成一个简单的例子——我基本上有一个分成两半的窗口窗体。左半边有常规的 ol' 按钮控件，而右半边没有。我的目标是能够从左侧拖动一个按钮并将其放在右侧。这样做会使左侧的按钮变灰，并且按钮现在显示在右侧。它不必显示在右侧的任何位置 - 如果需要，它可以出现在预设位置。我只想能够从左到右复制按钮。

现在，话虽如此 - 任何人都可以想到文档，教程或其他任何可能有助于引导我走上正确轨道以弄清楚如何做到这一点的东西吗？到目前为止，我发现我需要事件来拾取和放下它，但除此之外，我有些不知所措！

通常我会尝试在我的问题中提供更多细节，但由于此时程序实际上没有其他内容，我没有太多代码可以展示！很抱歉这个有点模糊的问题！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:24:56.170

请参阅[演练：在 Windows 窗体中执行拖放操作](https://msdn.microsoft.com/en-us/library/za0zx9y0.aspx)

* * *

编辑：将链接更改为英文版

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T11:58:13.527

查看此拖放演练：http: [//msdn.microsoft.com/en-us/library/za0zx9y0.aspx](http://msdn.microsoft.com/en-us/library/za0zx9y0.aspx) [英语]

# jquery - 我在哪里放置 jquery 来触发 Rails 中的点击事件？

> ID：15732487
> 
> 赞同：2
> 
> 时间：2013-03-31T17:45:18.067
> 
> 标签：jquery, ruby-on-rails

我下载了一个在 jquery 中完成的 datepicker 插件。格式如下：

```
$('#date-picker').datepicker('show') 
```

当我从控制台运行此命令时，一切正常。

但是，我不确定将其放在哪里，以便当页面加载并且有人单击文本框时，会出现日期选择器。我试着把它放在 application.js 但没有运气。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:48:46.267

确保把它放在里面`$(document).ready`：

```
$(document).ready(function() {
  $('#date-picker').datepicker('show');
}); 
```

编辑：

```
$(document).ready(function() {
  $('your-input-box-selector').click(function() {
    $('#date-picker').datepicker('show');
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:04:03.710

好吧，我建议您使用`.class`而不是`#id`表示法，因为 id 表示法应该是唯一的，如果您希望它是 a `datepicker`，则必须每次都添加 id ，如果您使用类名进行操作，那么维护起来会容易得多，而且您不需要不需要在 js 中做更多的工作：

```
$(document).ready(function() {
   $('.date-picker').datepicker('show');
}); 
```

# python - 如何拆分 numpy.loadtxt 返回的一维数组

> ID：15732491
> 
> 赞同：0
> 
> 时间：2013-03-31T17:45:37.097
> 
> 标签：python, arrays, csv, numpy, import

我正在使用以下代码从 csv 文件中读取数组。

```
na_orders = np.loadtxt(orders_file, delimiter=',', skiprows=0,dtype='i4,i4,i4,S5,S4,f4') 
```

这返回一维

```
[(2011, 1, 10, 'A', 'B', 1500.0) (2011, 1, 13, 'A', 'S', 1500.0)
 (2011, 1, 13, 'I', 'B', 4000.0) (2011, 1, 26, 'G', 'B', 1000.0)
 (2011, 2, 2, 'X', 'S', 4000.0) (2011, 2, 10, 'X', 'B', 4000.0)
 (2011, 3, 3, 'G', 'S', 1000.0) (2011, 3, 3, 'I', 'S', 2200.0)
 (2011, 6, 3, 'I', 'S', 3300.0) (2011, 5, 3, 'I', 'B', 1500.0)
 (2011, 6, 10, 'AL', 'B', 1200.0) (2011, 8, 1, 'G', 'B', 55.0)
 (2011, 8, 1, 'G', 's', 55.0) (2011, 12, 20, 'A', 'S', 1200.0)] 
```

我想要一个二维数组，它将每个元素分成不同的列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:52:21.897

使用`dtype=object`构造函数：

```
>>> import numpy as np
>>> l = [(2011, 1, 10, 'A', 'B', 1500.0), ..., (2011, 12, 20, 'A', 'S', 1200.0),]
>>> a = np.array(l, dtype='object')
>>> a
array([[2011, 1, 10, A, B, 1500.0],
...
       [2011, 12, 20, A, S, 1200.0]], dtype=object)
>>> a.shape
(14, 6)
>>> sum(a[:, -1])
26510.0 
```

这样的数组不会像原始值数组那样有效，但它会支持 numpy 数组通常支持的所有操作，同时仍然在不同的列中提供不同的类型。

# python - 试图修复我的功能

> ID：15732496
> 
> 赞同：0
> 
> 时间：2013-03-31T17:45:56.823
> 
> 标签：python, loops

我正在处理一个函数，我必须返回一个元组，其中第一个参数是最大数字的 str，第二个参数是 int 列表。这是示例以及我为该函数编写的内容：

> > > 投票(['G', 'G', 'N', 'G', 'C']) ('G', [1, 3, 0, 1]) """

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:58:06.000

您必须将最大值的位置映射到正确的一方：

```
parties = ['NDP', 'Green', 'Liberal', 'CPC']
winning_party = parties[total.index(max(total))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:10:09.037

尝试使用`Counter`来计算每个元素获得了多少票。例如：

```
from collections import Counter
...
vote_count = Counter(votes_list)
int_list = vote_count.values() # value is [1, 3, 1]
winners = vote_count.most_common() # value is [('G', 3), ('C', 1), ('N', 1)] 
```

如您所见，`Counter`它有一个界面，既可以为您提供每个元素的投票数，也可以按投票的降序为您提供所有元素。

# typo3 - 在typo3 6.0.2 中为直接邮件设置调度程序

> ID：15732500
> 
> 赞同：0
> 
> 时间：2013-03-31T17:46:06.097
> 
> 标签：typo3, newsletter

请问我不知道如何在直接邮件typo3 6.0.2 中自动调用邮件引擎有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:42:34.097

一些可能有助于进入它的基础知识：

调度程序允许您在服务器上仅设置一个 cron 作业，并从后端轻松管理各种重复任务（而不是为每个任务设置一个 cron 作业）。

第 1 步：您在服务器上设置一个 cron 作业，不时启动调度程序。请参阅您的主机以获取有关如何执行此操作的信息以及路径的调度程序手册。确保为 php.ini 设置正确的路径。例如，这个 cron 每 5 分钟命中一次。

第 2 步：在调度程序模块中，您现在可以通过单击左上角的“新项目”图标来添加任务。此处仅显示系统和扩展提供的任务。如果安装了 direct_mail，您将找到直接邮件邮件队列任务。添加它。在这里，您可以输入任务运行的频率。您可以使用 seconds 或 crontab 语法。当然，它不能比主调度程序运行得更频繁，因此并非所有组合都有意义：如果调度程序每 5 分钟运行一次，您就不能每 3 分钟推送一次 direct_mail 邮件队列。

第 3 步：如果它不起作用，请查看路径

第 4 步：添加更多调度程序任务，例如自动更新扩展存储库等。

链接： - 调度程序和 direct_mail 都有详细的手册。在扩展模块中获取它们。- 关于 direct_mail 的好教程[http://blog.undkonsorten.com/typo3-newsletter-direct-mail-subscription](http://blog.undkonsorten.com/typo3-newsletter-direct-mail-subscription)（德语，像许多 TYPO3 资源一样）

# c++ - 是临时的 l 值吗？

> ID：15732504
> 
> 赞同：6
> 
> 时间：2013-03-31T17:46:18.680
> 
> 标签：c++

为什么 main 中的第一行可以编译，而第二行没有？我认为两者都是临时的，但一个被视为 l 值，另一个则不是..

```
class complex
{
   public:
     complex() : r(0),i(0) {}
     complex(double r_, double i_) : r(r_), i(i_)
    {

    }

  private:
    double r;
    double i;
 };

int main()
{
   complex(2,2) = complex(1,2);
   char() = char(2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:13:37.790

在类类型上，赋值运算符是成员函数。也就是说，`a = b`只是`a.operator=(b)`. 在临时对象上调用成员函数是完全可以的。

请注意，在 C++ 中，术语*左值*与赋值的左侧无关。正如您的示例所示，分配给类类型的右值是非常好的。此外，有些左值是您无法分配的，例如数组和/或常量，尤其是字符串文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:01:09.447

如果您不创建赋值运算符，编译器将为您创建一个。这意味着您创建两个临时对象，并将一个分配给另一个，然后它们都被丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:25:50.373

不，第二个不是暂时的。临时是具有（大部分是有限的）生命周期的东西，并且在其生命周期内有一个存储区域。

A`char()`没有这些。因此，禁止分配此类表达式。从语言的角度来看，这项作业修改了什么还不清楚。以后会 `2`相等`0`吗？

# awk - 模式 1 唯一且模式 2 具有最高值的输出行

> ID：15732507
> 
> 赞同：0
> 
> 时间：2013-03-31T17:46:26.817
> 
> 标签：awk

我想使用 sed 或 awk 命令仅打印列表中在模式 1 方面唯一且模式 2 具有最高值的行。输入是文件名列表，这些文件名是特定模型的软件版本。型号和软件版本都包含在文件名中。花样是这样的：

`a,b_x.y.z_`或者 `a,b_x.y_`

模式 1 是`a,b`（型号） 模式 2 是`x.y.z`（软件版本）

对于`a,b`我想找到的每个独特版本的最新版本`x.y.z`或`x.y`

注意我不想按创建或修改的时间等进行搜索……这必须通过软件版本和型号的字符串来完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:15:47.863

就像@shellter 说的那样`sed`真的不适合这个。我会使用`awk`或类似的东西。对于版本号，每个子号都需要进行数字比较。你可以尝试这样的事情：

```
 awk '
      BEGIN{
        FS=OFS="_"
      }
      { 
        # Use "." to split current and version numbers into field arrays
        m=split($2,New,/\./)
        n=split(Version[$1],Current,/\./)

        # loop from 1 through the highest number of fields (whichever of the two versions contains the most fields)
        for(i=1; i<=(m>n?m:n); i++) { 

          # they are unequal no need to compare further fields, if the new one is higher then replace.
          if(New[i]!=Current[i]){
            if(New[i]>Current[i]) Version[$1]=$2
            next
          }
        }
      } 
      END{
        for(i in Version)print i,Version[i]
      }
    ' file 
```

* * *

我做了一些修改以打印最后一部分并忽略比较中的目录树。看看这是否有效：

```
awk -F_ '
  { 
    # save current record
    p=$0
    # remove directory info
    sub(/.*\//,x)
    # Use "." to split current and version numbers into array
    m=split($2,New,/\./)
    n=split(Version[$1],Current,/\./)

    # loop from 1 through the highest number of fields (whichever of the two versions contains the most fields)
    for(i=1; i<=(m>n?m:n); i++) { 

      # they are unequal no need to compare further fields, if the new one is higher then replace.
      if(New[i]!=Current[i]) {
        if(New[i]>Current[i]) {
          Version[$1]=$2
          Line[$1]=p
        }
        next
      }
    }
  } 
  END{
    for(i in Version)print Line[i]
  }
'  file 
```

# c++ - NDIS 原型样例和以太网桥

> ID：15732509
> 
> 赞同：0
> 
> 时间：2013-03-31T17:46:38.637
> 
> 标签：c++, windows-7-x64, ndis

我试图使用 WDK for Win 7 中给出的 NDIS 原型示例在两个以太网适配器之间编写一个测试桥接。到目前为止，刚刚构建了驱动程序和原型测试。现在我想知道如何继续？有没有办法一次只绑定几个适配器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:23:46.110

NDIS 协议自动绑定到*所有*支持的适配器。所以你不需要做额外的工作来让 NDISPROT 通过两个以太网 NIC 绑定。

构建驱动程序后，您需要做的就是：

1.  安装驱动程序（`INetCfgClassSetup::Install`如 bindview 示例中所示使用；或者对于临时实验，NIC 属性 GUI 有一个**Add...**按钮，可让您使用 GUI 安装协议）。
2.  启动驱动程序服务（使用`StartService`API；或用于临时实验，`net start ndisprot`即可）。

就是这样。NDIS 将为系统上的每个以太网 NIC 调用协议的 ProtocolBindAdpaterEx 处理程序。`NdisprotBindAdapter`此回调在示例中命名。

用于`!ndiskd.protocol`验证您的协议现在是否绑定到多个微型端口。

# vba - 计算目录中每个文档中的单词

> ID：15732514
> 
> 赞同：0
> 
> 时间：2013-03-31T17:46:55.043
> 
> 标签：vba, ms-word

我遇到了许多 VBA 的字数统计宏，但我不知道如何遍历目录中的每个“doc”文件并生成每个文件中字数的报告。我们如何生成这样的报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:20:38.957

GSerg 的意思是，您需要遍历包含文档的文件夹，打开它们并获取字数。

据我所知，如果不打开文档（即通过 VBA）而不安装额外的库，您将无法获得字数，如下所述：http: [//support.microsoft.com/kb/224351/en-us](http://support.microsoft.com/kb/224351/en-us)

但是无论如何我都不会这样做，因为根据我的经验，文件属性中的计数是不准确的，因为我相信它们使用的 Words 属性存在本文中描述的问题：http: [//support.microsoft.com /kb/291447](http://support.microsoft.com/kb/291447)

因此，如果您想获得准确的计数，我相信唯一的方法是遍历文件并打开它们，就像这样。请记住将路径名更改为您的真实路径名：

```
Sub ListWordCount()
    'In the Visual Basic Editor,
    'go to Tools -> References and check the box for
    'Microsoft Scripting Runtime to access the
    'filesystem object.

    Dim fso As Scripting.FileSystemObject
    Dim fol As Scripting.Folder
    Dim cfil As Variant
    Dim fil_1 As Scripting.File

    Dim s As String

    'The FSO isn't the fastest object in existence
    'and much slower than using the Windows API (or its
    'VB.Net namesake for that matter) but it's convenient
    'and easy to use.
    Set fso = New FileSystemObject
    Set fol = fso.GetFolder("InsertYourPathHere")
    Set cfil = fol.Files

    'Helps it run a bit faster...
    Application.ScreenUpdating = False

    For Each fil_1 In cfil

        Select Case fil_1.Type
            'Add any other types that you want to check for
            Case "Microsoft Word 97 - 2003 Document", _
             "Microsoft Word Document"

            Documents.Open FileName:=fil_1.Path

            Debug.Print fil_1.Name & vbTab & _
             ActiveDocument.Range.ComputeStatistics(wdStatisticWords) _
             & " words."

            Documents.Close savechanges:=False

        End Select

    Next

ExitPoint:
On Error Resume Next
Set fil_1 = Nothing
Set cfil = Nothing
Set fol = Nothing
Set fso = Nothing
Application.ScreenUpdating = True
Application.ScreenRefresh
On Error GoTo 0

Exit Sub

ErrorHandler:

MsgBox Err.Number & vbCr & Err.Description

Resume ExitPoint

End Sub 
```

# c# - LINQ select( x => x ) 的可能目的

> ID：15732521
> 
> 赞同：9
> 
> 时间：2013-03-31T17:47:58.070
> 
> 标签：c#, linq

我正在浏览一本关于 MVC 的书中的一些 LINQ 示例，我想知道下面的 select 调用可能有什么目的。也许这是一个错字，但我在书中的勘误表中没有看到任何提及。

```
foreach( Product p in products
    .Where( e => e.Name == productParam.Name )
    .Select( e => e ) ) {
        p.Price = productParam.Price;
} 
```

我测试了两个包含 .Select( e => e) 的示例，一个不包含且代码相同的示例。由于 Where 返回由谓词过滤的 IEnumerable，那么何时需要选择调用（使用上面的特定谓词）？它真的有什么作用吗？可以在一些奇怪的角落案例中吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T17:49:54.013

它将返回与没有它完全相同的东西，即[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx). 它实际上弊大于利，因为它执行了冗余的 O(n) 操作（循环整个列表）。

**参考**

*   [MSDN - Enumerable.Select](http://msdn.microsoft.com/en-us/library/bb548891.aspx)
*   [MSDN - Enumerable.Where](http://msdn.microsoft.com/en-AU/library/bb534803.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T17:50:35.453

> 它真的有什么作用吗？

它确实增加了整个操作的开销。实际上，它应该被删除，因为它没有任何用处。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T17:55:50.863

我认为作者只是想展示 LINQ 查询与 SQL 语句非常相似。在这种情况下，显然不需要它，因为它使用身份函数并且可以省略。但是，必须`select`在 SQL 中包含该子句。把它放在那里没有错，但绝对不需要。

虽然一般来说，进行身份选择调用并不总是一件坏事，尤其是在函数中返回查询时。这有助于为您提供要返回的集合的只读视图。但这不适用于这种情况，因为查询会立即被枚举。

# python - 基本的美丽汤帮助 - 格拉斯顿伯里阵容

> ID：15732522
> 
> 赞同：1
> 
> 时间：2013-03-31T17:48:04.207
> 
> 标签：python, beautifulsoup

我是 python 新手。我想做的是用python和美丽的汤提取今年格拉斯顿伯里音乐节宣布的所有乐队。我想将所有乐队转储到一个文本文件中，并最终根据每个艺术家的热门曲目创建一个 Spotify 播放列表。

[我想从www.efestivals.co.uk/festivals/glastonbury/2013/lineup.shtml#](http://www.efestivals.co.uk/festivals/glastonbury/2013/lineup.shtml#)中提取的艺术家列表（我实际上想在 AZ 标签上而不是在 Friday 标签上）

我曾尝试先将波段打印到终端，但我得到空白结果。这是我尝试过的

```
from bs4 import BeautifulSoup
import urllib2

#efestivals page with all glastonbury acts
url = "http://www.efestivals.co.uk/festivals/glastonbury/2013/lineup.shtml#"
page=urllib2.urlopen(url)
soup = BeautifulSoup(page.read())

bands = soup.findAll('a')
for eachband in bands:
   print eachband.string 
```

基本上，我需要帮助才能进入 AZ 选项卡并提取每个波段。我也只想要确认的乐队（那些有`img src="/img2009/lineup_confirmed.gif"`）。我对 html 不是很熟悉，但这似乎是一个合理的起点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:47:44.497

有很多方法可以解决这个问题。这只是一个似乎有效的例子：

```
from bs4 import BeautifulSoup
import urllib2 as ul

url = "http://www.efestivals.co.uk/festivals/glastonbury/2013/lineup.shtml#"
page = ul.urlopen(url)
soup = BeautifulSoup(page.read())

elements = soup.findAll('img', {'src': '/img2009/lineup_confirmed.gif'})

bands = [e.next_element.next_element.text for e in elements]

print bands[1:11] 
```

输出：

```
[u'Arctic Monkeys', u'Dizzee Rascal', u'The Vaccines', u'Kenny Rogers'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:08:55.963

要从 AZ 表中提取已确认波段的链接：

```
#!/usr/bin/env python
import re

try:
    from urllib2 import urlopen
except ImportError: # Python 3
    from urllib.request import urlopen

from bs4 import BeautifulSoup, NavigableString

def table_after_atoz(tag):
    '''Whether tag is a <table> after an element with id="LUA to Z".'''
    if tag.name == 'table' and 'TableLineupBox' in tag.get('class', ''):
        for tag in tag.previous_elements: # go back
            if not isinstance(tag, NavigableString): # skip strings
                return tag.get('id') == "LUA to Z"

def confirmed_band_links(soup):
    table = soup.find(table_after_atoz) # find A to Z table
    for tr in table.find_all('tr'): # find all rows (including nested tables)
        if tr.find('img', alt="confirmed"): # row with a confirmed band?
            yield tr.find('a', href=re.compile(r'^/festivals/bands')) # a link

def main():
    url = "http://www.efestivals.co.uk/festivals/glastonbury/2013/lineup.shtml"
    soup = BeautifulSoup(urlopen(url))
    for link in confirmed_band_links(soup):
        print("%s\t%s" % (link['href'], link.string))

main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T19:28:26.033

以下工作

```
from bs4 import BeautifulSoup
import urllib2

#efestivals page with all glasto acts
url = "http://www.efestivals.co.uk/festivals/glastonbury/2013/lineup.shtml#"
page=urllib2.urlopen(url)
soup = BeautifulSoup(page.read())

bands = soup.findAll('a', href=True)
for band in bands:
    if band['href'].startswith("/festivals/bands"):
        print band.string 
```

# directshow - 为纹理指定的格式无效

> ID：15732527
> 
> 赞同：2
> 
> 时间：2013-03-31T17:48:55.220
> 
> 标签：directshow, video-capture, bootcamp

我想使用我的 macbook 的 *Built-in iSight" 相机（我在训练营下）。

*我创建了一个使用DirectShow*图形从网络摄像头读取视频流的简单程序。这是 *Form1_Load()* 方法：

```
private void Form1_Load(object sender, EventArgs e)
{
    int hr = 0;

    _graphBuilder = (IGraphBuilder)new FilterGraph();
    Console.WriteLine("Create the VMR9 object");

    _vmr9 = (IBaseFilter)new VideoMixingRenderer9();

    Console.WriteLine("Configure the VMR9 for one stream");
    _filterConfig = (IVMRFilterConfig9)_vmr9;
    // One stream is enough for this sample
    _filterConfig.SetNumberOfStreams(1);

    _graphBuilder.AddFilter(_vmr9, "Video Mixing Renderer");

    Console.WriteLine("Change VMR9 mode to Windowless");
    hr = _filterConfig.SetRenderingMode(VMR9Mode.Windowless);
    Marshal.ThrowExceptionForHR(hr);

    _windowlessCtrl = (IVMRWindowlessControl9)_vmr9;

    Console.WriteLine("Set parent window");
    hr = _windowlessCtrl.SetVideoClippingWindow(this.Handle);
    Marshal.ThrowExceptionForHR(hr);

    Console.WriteLine("Set Aspect-Ratio");
    hr = _windowlessCtrl.SetAspectRatioMode(VMR9AspectRatioMode.None);
    Marshal.ThrowExceptionForHR(hr);

    Console.WriteLine("Set video position");
    hr = _windowlessCtrl.SetVideoPosition(null, DsRect.FromRectangle(this.ClientRectangle));
    Marshal.ThrowExceptionForHR(hr);

    Console.WriteLine("Building graph...");

    ICaptureGraphBuilder2 pBuilder = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();
    hr = pBuilder.SetFiltergraph(_graphBuilder);
    checkHR(hr, "Can't SetFiltergraph");

    Guid CLSID_WDMStreamingCaptureDevices = new Guid("{65E8773D-8F56-11D0-A3B9-00A0C9223196}"); //

    //add Built-in iSight
    IBaseFilter pBuiltiniSight = CreateFilterByName(@"Built-in iSight", CLSID_WDMStreamingCaptureDevices);
    hr = _graphBuilder.AddFilter(pBuiltiniSight, "Built-in iSight");
    checkHR(hr, "Can't add Built-in iSight to graph");

    //connect Built-in iSight and Video Renderer
    hr = _graphBuilder.ConnectDirect(GetPin(pBuiltiniSight, "Capturer"), GetPin(_vmr9, "VMR Input0"), null); // => Program hungs up!!!
    checkHR(hr, "Can't connect Built-in iSight and Video Renderer");

    Console.WriteLine("Running...");
    mediaControl = (IMediaControl)_graphBuilder;
    hr = mediaControl.Run();
    checkHR(hr, "Can't run the graph");
} 
```

*调用ConnectDirect()*方法时程序卡住了...

它用来工作。使用视频渲染器过滤器时效果很好，但我需要使用视频混合渲染器 9。

我使用*TraceSpy*来捕获以下跟踪：

```
Direct3D9: :====> ENTER: DLLMAIN(581fd9a0): Process Attach: 00000a70, tid=00000658
Direct3D9: :====> EXIT: DLLMAIN(581fd9a0): Process Attach: 00000a70
Direct3D9: (INFO) :Direct3D9 Debug Runtime selected.
Direct3D9: (INFO) :Direct3D9 Debug Runtime selected.
D3D9 Helper: Enhanced D3DDebugging disabled; Application was not compiled with D3D_DEBUG_INFO
Direct3D9: (INFO) :======================= Hal SWVP device selected
Direct3D9: (INFO) :HalDevice Driver Style b
Direct3D9: :BackBufferCount not specified, considered default 1
Direct3D9: :DoneExclusiveMode
Direct3D9: (INFO) :Using FF to PS converter
Direct3D9: (INFO) :Enabling multi-processor optimizations
Direct3D9: (WARN) :Athlon32Compiler: CPU does not meet minimum requirements
Direct3D9: (INFO) :Using P4 PSGP
Direct3D9: (INFO) :Using FF to VS converter in software vertex processing
Direct3D9: :BackBufferCount not specified, considered default 1
Direct3D9: :DoneExclusiveMode
Direct3D9: :DoneExclusiveMode
Direct3D9: (ERROR) :Invalid format specified for texture 
```

# git - git apply：错误尾随空格

> ID：15732528
> 
> 赞同：8
> 
> 时间：2013-03-31T17:48:58.130
> 
> 标签：git, patch

最近，我一直在玩 git。我正在尝试模拟将补丁应用到我的主分支，这个补丁包含一个提交，我在其中向 java 操作添加了一些注释。我使用 git 生成了补丁`format-patch`。然后我切换到我的主分支来应用补丁。执行 git apply 命令时出现以下错误：

```
path/to/my/patch/file: line x
path/to/my/patch/file: line x+1
path/to/my/patch/file: line x+2
path/to/my/patch/file: line x+3 
```

我注意到我还尝试了以下论点：`--ignore-space`，，，`ignore-whitespace`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-27T08:55:46.183

如果您不关心将尾随空格应用于您的存储库，您可以使用该标志`--whitespace=fix`来忽略错误并仍然应用

```
git apply --whitespace=fix your.patch 
```

我听说有人说默认是警告并应用补丁，但这不是我的经验，上面的解决方案似乎做了我想要的。

# c# - 页面加载时出现隐藏弹出窗口

> ID：15732529
> 
> 赞同：0
> 
> 时间：2013-03-31T17:48:58.647
> 
> 标签：c#, asp.net

我正在使用 VS 2010 开发 Web 应用程序。我使用模态弹出窗口在页面中添加/编辑一些信息，并且面板具有属性`visible = false`或样式`display: none`。

但是当页面加载时，所有弹出窗口暂时出现，然后消失。

那么如何避免页面加载时弹出窗口的出现/消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:04:51.710

Try setting up the style using javascript and call this function on OnOkScript/OnCancelScript of modal popup.

ex

function hide() { document.getElementById('<%=MyPanel.ClientID%>').style.display='none'; }

# css - 将无序列表与图像下方显示的图像和文本垂直对齐？

> ID：15732536
> 
> 赞同：0
> 
> 时间：2013-03-31T17:49:25.267
> 
> 标签：css, image, html-lists, vertical-alignment

好的，所以我需要一些帮助来将无序列表与同一元素内的图像和文本垂直对齐。图像应与其正下方的文本垂直对齐。

*这是我的代码：*

**html:**

```
<div id="sidetrans">
<ul>
<li><a data-ftrans="slide" href="slide2.html">iPhone 1&2<img alt="next"      src="images/iphone1.png" height="115" width="87" /></a></li>
<li><a data-ftrans="slide" href="">iPhone 3G<img alt="next" src="images/iphone1.png" height="115" width="87" /></a></li>
<li><a data-ftrans="slide" href="">iPhone 3GS<img alt="next" src="images/iphone1.png" height="115" width="87" /></a></li>
<li><a data-ftrans="slide" href="">iPhone 4<img alt="next" src="images/iphone1.png" height="115" width="87" /></a></li>
<li><a data-ftrans="slide" href="">iPhone4S<img alt="next" src="images/iphone1.png" height="115" width="87" /></a></li>
<li><a data-ftrans="slide" href="">iPhone5<img alt="next" src="images/iphone1.png" height="115" width="87" /></a></li>
</ul>
</div> 
```

**CSS**

```
#sidetrans {
padding-top:15px;
text-align:left;}

#sidetrans a{
padding:0; }

#sidetrans a img{
 vertical-align: text-bottom;   }

#sidetrans ul li{
display:inline;
list-style: none;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:08:54.837

希望我理解这一点。您想要图像下方的垂直和文本中的所有链接。因此，如果您对 html 进行一些更改，那将是一件好事。将文本放在图像之后，然后放置 display: block; 为图像。

```
img {
display: block;
} 
```

[检查这支笔](http://codepen.io/crazyrohila/pen/tHyDm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:38:07.340

删除此行。您不需要这些行。

```
#sidetrans ul li{
display:inline;
list-style: none;} 
```

请检查这个[http://jsbin.com/oqeteh/5/edit](http://jsbin.com/oqeteh/5/edit)

# javascript - 用内容替换 div

> ID：15732537
> 
> 赞同：0
> 
> 时间：2013-03-31T17:49:38.250
> 
> 标签：javascript, jquery

我是 javascript/jquery 的新手，我忽略了一些基本的东西。我想通过调用函数将 div 的内容替换为一些文本。绝对我尝试过的每件事都失败了。

[http://jsfiddle.net/spuder/dTGBy/](http://jsfiddle.net/spuder/dTGBy/)

html

```
<body>
<div id=test>

</div>
</body> 
```

脚本

```
$(document).ready( function()  {

   getTest();

}

function getTest() {
    $("#test").html("Hello World");
    //$('#test').replaceWith('<h2>New heading</h2>');
    //$("#test").attr("text","http://www.w3schools.com/jquery");
    //$("#test").attr("href","http://www.w3schools.com/jquery");
    //$("#test").html("New text");
    //$(".test").html("New text");
    //$("test")html.("New text");
    //$("test").update("New text");
    //document.getElementById("testSpan").innerHTML = "42";
    // $("#test").html("<b>Hello world!</b>"); 
}

//This is supposed to be super easy ^

//http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_dom_html_set
//http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_dom_attr_set
//http://www.willmaster.com/library/web-development/replace-div-content.php
//http://api.jquery.com/replaceWith/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T17:55:06.637

好的，你犯的错误：

*   没有在 JsFiddle 中包含 jQuery
*   错误地结束了你的`document.ready`
*   忘记了 div id 周围的引号

JS：

```
$(document).ready(function(){
   getTest();
});

function getTest() {
    $('#test').replaceWith('<h2>New heading</h2>');
    //$("#test").attr("text","http://www.w3schools.com/jquery");
    //$("#test").attr("href","http://www.w3schools.com/jquery");
    //$("#test").html("New text");
    //$(".test").html("New text");
    //$("test")html.("New text");
    //$("test").update("New text");
    //document.getElementById("testSpan").innerHTML = "42";
    // $("#test").html("<b>Hello world!</b>"); 
} 
```

HTML：

```
<div id="test">

</div> 
```

小提琴[http://jsfiddle.net/ajp36/1/](http://jsfiddle.net/ajp36/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:54:53.317

试试这个：

```
$(document).ready(function () {
    getTest();
}); 
```

[**在这里演示**](http://jsfiddle.net/dTGBy/2/)

# jquery - 使用 jQuery 使光标离开文本字段

> ID：15732546
> 
> 赞同：0
> 
> 时间：2013-03-31T17:49:58.847
> 
> 标签：jquery, text, input, cursor, focus

我有一个输入类型=文本的 html 表单，它在提交时启动一个自定义 js 函数。当用户点击 ENTER 时，一个 jQuery 监听器调用相同的函数。

这意味着：用户可以在按下提交按钮和按 ENTER 之间进行选择。

由于我的 js 函数让用户停留在当前页面上，因此光标在上次聚焦的文本字段中保持活动状态。所以用户可以一直按 ENTER 并启动 js 函数。当然，我可以尝试使用诸如“didEnterFunction”之类的布尔值来防止这种情况发生。但是我可以强制光标离开文本字段吗？那会更优雅。

我想象这样的事情：

```
<form method="post" onsubmit="return myJS();">
    <input type="text" name="request" />
    <input type="submit" value="OK" />
</form> 
```

和

```
function myJS() {
    // Make the cursor leave the text field "request"
    ?????

    return no; // prevent submission of the form (reload)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:03:58.743

尝试这个：

```
function myJS() {
    // Make the cursor leave the text field "request"
    $('input[type="submit"]').focus();

    return false; // prevent submission of the form (reload)
} 
```

# c++ - 带有参数的c ++构造函数作为私有成员

> ID：15732547
> 
> 赞同：0
> 
> 时间：2013-03-31T17:50:00.353
> 
> 标签：c++, parameters, constructor

很长一段时间以来，使用基本构造函数以外的东西对我来说一直是个问题。问题是这样的：

我正在使用这样的构造函数

```
Table(const std::string& LoadState)
{
    ImageManager ImgMgr;
    ImgMgr.add_resource_directory("img/");

    if (LoadState == "Menu")
    {

    }
    else if (LoadState == "CardFlip")
    {

    }
    else if (LoadState == "Game")
    {

    }
} 
```

这是为了根据您所在的游戏的第二个加载不同的图像，以确保没有加载我们不需要的任何内容。

我正在尝试将其实现到菜单对象中

```
private:
    Table LaTable("Menu"); 
```

这从来没有奏效，在私有内部初始化，我想我不明白。

我试过：私人：表LaTable；

```
constructor
{
    Table temptable("Menu");
    LaTable = temptable;
} 
```

问题在于图像显示为白色方块。

有人可以指出我如何处理这个问题的正确方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:53:48.700

如果您想创建一个对象`Table`作为类中的成员。要调用其构造函数，请使用该类的构造函数。这样做：

```
// For example for a class named Menu
class Menu
{
public:
    Menu() : LaTable("Menu") // <--- Here
    { 
    }

private:
    Table LaTable;
}; 
```

# networking - 谁能解释这个简单的服务器代码背后的评估模型？

> ID：15732550
> 
> 赞同：0
> 
> 时间：2013-03-31T17:50:41.797
> 
> 标签：networking, haskell

我可以浏览[http://therning.org/magnus/archives/698](http://therning.org/magnus/archives/698)，同时寻找一些与 Haskell 联网的示例。这可能是一个简单的例子。

虽然我可以将它用作模板并且它可以工作，但我并不完全理解语义以及如何评估代码。我可以看到是懒惰阻止了`forever $ do`块被不断评估，但是是什么迫使它被评估呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:41:56.880

懒惰在这里无关。也没有任何东西可以“阻止”主题`forever $ do`块。它被无限评估，实际上您可以将其视为`while (true)`常见命令式语言的类似物。该服务器的实现围绕`accept serv_sock`函数调用展开，程序在该函数调用上等待连接，从而同步阻塞`forever`循环执行，直到它接收到连接，执行它应该执行的操作，然后再次循环。

这一切看起来很像一个标准的命令式程序，但不同之处在于，您正在从其他指令中组合指令，而不是告诉计算机如何处理每个表达式。因此，您可以将`main`函数定义视为单个复合指令。

触发评估的原因是您为该指令分配了名称`main`和类型签名`IO ()`（在您的案例中推断出来）。通过这种方式，您告诉 Haskell 编译器将此指令视为程序的入口点，从而在程序启动时从它开始评估。

# perl - 如何在 Perl 中删除 CR LF 行尾

> ID：15732552
> 
> 赞同：5
> 
> 时间：2013-03-31T17:51:01.487
> 
> 标签：perl

我需要删除看起来像 CR LF 的行的和。

编码 - Windows-1250 Windows 7 EN

我一直在尝试咀嚼，咀嚼，将 \R 更改为没有任何变化 \r\n 等，但没有任何效果......

先感谢您

```
use strict;
$/ = "\r\n";
open FILE , "<", "file.txt" or die $!;
while (<FILE>) {
    my @line = split /,/ , $_;

    foreach my $l (@line) {
        print $l;
    }
    sleep(1);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T22:09:00.030

首先，您甚至不尝试将 CRLF 更改为 LF。你只需打印出你得到的东西。

在 Windows 系统上，Perl 将`:crlf`层添加到文件句柄中。这意味着 CRLF 在读取时更改为 LF，而 LF 在写入时更改为 CRLF。

最后一点是问题所在。默认情况下，Perl 假定您正在创建一个文本文件，但是您正在创建的内容与 Windows 上文本文件的定义不匹配。因此，您需要将输出切换为`binmode`.

仅适用于 Windows 系统的解决方案：

```
use strict;
use warnings;

binmode(STDOUT);

open(my $fh, '<', 'file.txt') or die $!;
print while <$fh>; 
```

或者，如果您希望它在任何系统上工作，

```
use strict;
use warnings;

binmode(STDOUT);

open(my $fh, '<', 'file.txt') or die $!;
while (<$fh>) { 
   s/\r?\n\z//;
   print "$_\n";
} 
```

在输入上没有 binmode，

*   在非 Windows 系统上，您将获得 CRLF for CRLF。
*   在 Windows 系统上，您将获得 LF for CRLF。
*   您将在所有系统上获得 LF for LF。

`s/\r?\n\z//`处理所有这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T03:10:07.460

如果您在 Unix 之类的命令行上，请在 shell 提示符下执行以下操作：

*   `perl -pe 's/^M//g' file.txt # ^M mean control-M, press control-v control-M, the CRLF character`*   `perl -pe 's#\r\n$#\n#g' file.txt`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T18:26:27.497

这适用于我在 Mac（Mac OS X 10.7.5，Perl 5.16.2）上：

```
#!/usr/bin/env perl
use strict;
use warnings;

while (<>)
{
    print "1: [$_]\n";
    {
        local $/ = "\r\n";
        chomp;
    }
    print "2: [$_]\n";
} 
```

样本输出：

```
$  odx x3.txt
0x0000: 6F 6E 69 6F 6E 0D 0A 73 74 61 74 65 0D 0A 6D 69   onion..state..mi
0x0010: 73 68 6D 61 73 68 0D 0A                           shmash..
0x0018:
$ perl x3.pl < x3.txt | vis -c
1: [onion^M
]
2: [onion]
1: [state^M
]
2: [state]
1: [mishmash^M
]
2: [mishmash]
$ 
```

该`odx`程序为我提供了数据文件的十六进制转储；您可以看到有 0D 0A (CRLF) 行结尾。该`vis -c`程序将控制字符（换行符和制表符除外）显示为`^M`（例如）。您可以看到原始输入包括`^M`(lines starting `1:`) 但`chomp`'d 行缺少换行符和回车符。

唯一的问题是 Windows 上的输入是文本文件还是二进制文件。如果是文本文件，I/O 系统应该自动进行 CRLF 映射。如果它是二进制文件，则不会。（Unix 在文本文件和二进制文件之间没有有意义的区别。）在 Windows 上，您可能需要调查[`binmode`](http://perldoc.perl.org/functions/binmode.html)，如页面上所述[`open`](http://perldoc.perl.org/functions/open.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T18:08:20.270

这将是 Perl 中的单行... 在 Linux 下尝试以下操作：

```
perl -0pe 's/[\r\n]//g' < file.txt
sleep 1 
```

以及 Windows 下的以下内容：

```
perl.exe -0pe "s/\015\012|\015|\012//g" < file.txt
ping 1.1.1.1 -n 1 -w 1000 > nul 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T19:59:21.313

我认为 \s* 应该工作。

```
use strict;
use warnings;

open FILE , "<", "file.txt" or die $!;

while ( my $line = <FILE> ) {

    $line =~ s{ \s* \z}{}xms;  # trim trailing whitespace of any kind

    my @columns = split /,/ , $line;

    for my $column (@columns) {

        print "$column ";
    }
    sleep(1);

    print "\n";
} 
```

# android - 播放 SoundCloud 曲目

> ID：15732553
> 
> 赞同：1
> 
> 时间：2013-03-31T17:51:11.797
> 
> 标签：android, soundcloud

我可以在我的 Android 应用程序中播放 SoundCloud 中的曲目吗？我正在尝试这段代码，但它不起作用：

```
String res = "https://api.soundcloud.com/tracks/84973999/stream?client_id=cd9d2e5604410d714e32642a4ec0eed4";

MediaPlayer mp = new MediaPlayer();
try {
        mp.setDataSource(res);
        mp.prepare();
        mp.start();
    } catch (IOException e) {

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-28T19:04:11.027

我在尝试从 Android 播放 Soundcloud 流时遇到了同样的问题。

为我解决的问题是将以下权限添加到我的 AndroidManifest.xml

```
<permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.INTERNET" />
<permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

对我来说，这是一个面对面的时刻。这是我的媒体播放器实现。

对于我的媒体播放器，我有一个实现的类

```
MediaPlayer.OnPreparedListener 
```

在该类中，我使用以下代码来设置 MediaPlayer。

```
 mMediaPlayer = new MediaPlayer();
 mMediaPlayer.setOnPreparedListener(this);
 mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    try{
        mMediaPlayer.setDataSource("http://api.soundcloud.com/tracks/7399237/stream?client_id=XXX");
    }catch (IllegalArgumentException e){
        e.printStackTrace();

    } catch (IOException e) {
        e.printStackTrace();

    }
    mMediaPlayer.prepareAsync(); 
```

在我的`onPrepared`回调中，我只是开始播放流。

```
@Override
public void onPrepared(MediaPlayer mediaPlayer) {
    mMediaPlayer.start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:05:24.087

trying adding this before you set data source

```
mp.setAudioStreamType(AudioManager.STREAM_MUSIC); 
```

there have also been issues noted when using MediaPlayer with URL redirects. You may need to resolve the redirects first, then set your datasource accordingly

To get the redirected url you can do soemthing like this using the [soundcloud java-api-wrapper](https://github.com/soundcloud/java-api-wrapper)

```
HttpResponse resp = wrapper.get(Request.to(res));
if (resp.getStatusLine().getStatusCode() == HttpStatus.SC_MOVED_TEMPORARILY) {
    final Header location = resp.getFirstHeader("Location");
    if (location != null && location.getValue() != null) {
        String redirectedStream = location.getValue();
        //...
    }
} 
```

# c# - .NET 中值类型的方法

> ID：15732556
> 
> 赞同：1
> 
> 时间：2013-03-31T17:51:55.067
> 
> 标签：c#, .net, types

我正在阅读 Jeffrey Richter 的“CLR via C#”，他建议永远不要在值类型中定义旨在改变其行为的方法，因为值类型应该是不可变的（因为装箱/拆箱费用以及有时不可预测的行为）。

那么，我们可以在自定义值类型中定义方法仅用于显示它的状态吗？

你能举出其他`Struct`需要在 a 中定义方法的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T17:58:56.827

我能想到的最好的例子就是[`DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)结构体。

`DateTime`类型上的所有实例方法都旨在通过操作当前方法（例如）或从当前方法（例如）中`AddMinutes`获取附加信息来创建新方法。它还具有多种静态方法，用于从各种输入（例如）或一般操作值（例如）创建新实例`DateTime``IsDaylightSavingsTime``FromBinary``DateTime``Compare`

没有方法可以实际修改当前实例。

# javascript - 是否可以在 Windows 桌面中使用 javascript 在客户端读取 sqlite 文件？

> ID：15732560
> 
> 赞同：0
> 
> 时间：2013-03-31T17:52:20.577
> 
> 标签：javascript, windows, sqlite, internet-explorer, google-chrome

是否可以使用 chrome 或 ie8 ,9 和 10 读取和写入本地`sqlite`文件。

我[在本地的 Javascript 中看到了这个 SQLite 数据库，](https://stackoverflow.com/questions/5244471/sqlite-database-in-javascript-locally?rq=1) 但是 html 页面上的 javascript 部分中的这段代码似乎没有创建数据库。

```
 <script type="text/javascript">

    //https://stackoverflow.com/questions/5244471/sqlite-database-in-javascript-locally?rq=1

    function createDatabase(){
        try{
            if(window.openDatabase){
                var shortName = 'db_xyz';
                var version = '1.0';
                var displayName = 'Display Information';
                var maxSize = 65536; // in bytes
                db = openDatabase(shortName, version, displayName, maxSize);
            }
        }catch(e){
            alert(e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:20:02.133

要实现这个目标，你需要两件事。

1.  您需要读取文件系统中的选定文件
2.  除非浏览器支持，否则您需要在 javascript 中实现 sqlite（可能已经实现）

在客户端存储数据有多种可选方法：

1.  本地存储
2.  会话存储
3.  曲奇饼
4.  文件缓存

在这些中，最可靠的是cookie。不好的副作用是对您网站的每个请求都会将 cookie 转发到您的 http 服务器（在 http 请求标头内），除此之外，cookie 的存储配额限制为 4kb。因此，如果您存储 2 个 cookie，则每个 2kb 或第一个 1kb 和第二个 3kb。

localStorage：Chrome 为 2.5 MB，Firefox 和 Opera 为 5 MB，Internet Explorer 为 10 MB。

好的部分：

1.  它将被存储直到它被擦除
2.  它可以在基于键值的架构上访问。`localStorage["foo"] = "bar";`

不好的部分是它只能通过 javascript 访问。

sessionStorage 与 localStorage 相同，但是一旦您关闭浏览器，它将被删除。

文件缓存就像资源黑客。您可以将包含您要存储的所有数据的唯一文件转发给用户，并让它每次都从缓存中读取。

坏的部分：

1.  达到离线存储配额后将被删除
2.  需要由您的网络服务器设置
3.  除非您可以使用它，否则这是个坏主意。

现在为什么我没有提到如何使用sql？

要在 IE 中读取文件，您只需使用 ActiveX 组件即可。这要求用户设置了低安全设置，并且用户实际上允许网站获得文件访问权限。

用于在 chrome 和其他浏览器中读取文件或支持 html5 的 IE 的替代方法：

1.  您可以通过将文件拖到浏览器窗口中来读取文件
2.  您还可以通过在文件选择框中选择文件来读取文件
3.  您可以通过插件读取文件

第三种读取文件的方法是最可靠的，但它要求用户启用 java。

通过java你可以读取文件。

现在是 sqlite 部分：

1.  你可以在 javascript 中实现 sqlite。（我不想那样做）
2.  您可以将过时的 sqlite 数据库用于 html5。（这就是你所要求的）它已被 localStorage 取代。
3.  您可以在 java 或浏览器插件中实现它。（也许更容易，但我还是更喜欢 localStorage）

也许这对你有帮助。

# cordova - phonegap 2.5.0 jqtouch 初始化失败

> ID：15732567
> 
> 赞同：0
> 
> 时间：2013-03-31T17:53:15.457
> 
> 标签：cordova, initialization, jqtouch

似乎Phonegap 2.5.0 用jQTouch 破坏了一些东西。如果在代码中我们尝试初始化 jQt（如之前的 Phonegap 版本）：

```
var jQT = new $.jQTouch({}=;

document.addEventListener("deviceready", onDeviceReady, true);

// PhoneGap is ready
function onDeviceReady() {
  dosomething();
} 
```

然后它将无法正常工作，该应用程序挂在启动画面上。顺便说一句，如果 jQTouch 初始化它是在“onDeviceReady”中完成的，那么应用程序会启动，但是“jQT”对象在代码中全局看不到，它需要在每个函数上进行初始化吗？

请帮忙，谢谢 Roob

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:03:04.750

我通过使用 ios 的 phonegap 安装中的 index.js 文件中默认提供的结构使其工作，如下所示：

```
var app = {
    initialize: function() {
        this.bindEvents();
    },

    bindEvents: function() {
        document.addEventListener('deviceready', this.onDeviceReady, false);
    },

    onDeviceReady: function() {
        app.receivedEvent('deviceready');
    },

    receivedEvent: function() {

        //jQTouch init here
        var jQT = new $.jQTouch({
            useFastTouch : true,
            touchSelector : 'a, .btn, .touch'
        });

        //Put the rest of your app in here

    }
}; 
```

希望这可以帮助！:)

*不要忘记初始化您的应用程序 - app.initialize();

# ruby-on-rails-3 - Rails .joins 不加载关联

> ID：15732568
> 
> 赞同：0
> 
> 时间：2013-03-31T17:53:24.260
> 
> 标签：ruby-on-rails-3, join, eager-loading

直升机，

我的查询：

```
@county = County.joins(:state)  
      .where("counties.slug = ? AND states.slug = ?", params[:county_slug])  
      .select('states.*, counties.*')  
      .first! 
```

从日志中，SQL 如下所示：

```
SELECT states.*, counties.* FROM "counties" INNER JOIN "states" ON "states"."id" = "counties"."state_id"  LIMIT 1 
```

我的问题是它不会急切地从关联表（状态）中加载数据，因为当我这样做时，例如，@county.state.name，它会运行另一个查询，但是，正如您从日志中看到的那样，它也已经在数据库中查询了该表中的数据。但它不会预先填充@county.state

知道如何在一个查询中从数据库中获取所有数据吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:02:34.280

我认为您需要使用`include`而不是`joins`获得急切的加载。关于差异有一个很好的 railscasts 插曲：[http](http://railscasts.com/episodes/181-include-vs-joins) ://railscasts.com/episodes/181-include-vs-joins ，特别是：

> 我们需要问的问题是“我们是否使用了任何相关模型的属性？” 在我们的例子中，答案是“是”，因为我们会针对每条评论显示用户名。这意味着我们希望在检索评论的同时获取用户，因此我们应该在这里使用 include。

# ios6 - PayPal 沙盒平台错误 589009

> ID：15732569
> 
> 赞同：0
> 
> 时间：2013-03-31T17:53:37.177
> 
> 标签：ios6, runtime-error, paypal, paypal-sandbox

我正在尝试让我的 IOS6 应用程序向 PayPal 的沙箱付款，但我正在使用的 Beta 版本似乎存在一些问题。我已经包含了 PayPal-iOS-SDK-1.0.4 并将环境配置为 PayPalEnvironmentSandbox，然后我从我的开发人员帐户中添加了凭据，如下所示：

```
if (payment.processable)
{
    [PayPalPaymentViewController setEnvironment:self.environment];
    NSString *customerId = [[[GlobalVariables sharedInstance] userAccount] objectForKey:@"email"];

    PayPalPaymentViewController *paymentViewController = [[PayPalPaymentViewController alloc]
        initWithClientId:kPayPalClientId 
        receiverEmail:kPayPalReceiverEmail
        payerId:customerId 
        payment:payment
        delegate:self];

    paymentViewController.hideCreditCardButton = !self.acceptCreditCards;
    [self presentViewController:paymentViewController animated:YES completion:nil];
} 
```

kPayPalClientId 是来自 Rest API Credentials 页面的客户端 ID，而 kPayPalReceiverEmail 是我的 PayPal 帐户（在本例中是瑞典帐户）。

但是当我在沙盒环境中运行它时，我只会收到 PLATFORM 错误 589009。但是如果我将 kPayPalReceiverEmail 更改为一个虚拟的，例如：@“YOUR_PAYPAL_EMAIL@yourdomain.com”它可以工作，但是付款不再连接到我的帐户（金额似乎是从我的买家帐户中提取的，但我的收款人帐户中没有钱）。因此，当我尝试验证付款时，它无法完成。

那么你认为这里的问题是什么？

# c++ - C ++递归传递参数内存问题

> ID：15732572
> 
> 赞同：0
> 
> 时间：2013-03-31T17:53:50.590
> 
> 标签：c++, memory-management, stack, pass-by-reference, datalog

我的代码中有一个名为“schemeList”的对象，如下所示：

```
class scheme;
class schemeList
{
    friend class scheme;
private:

    scheme * head;
    schemeList * tail;

public:
    schemeList();
    Token addScheme(vector <Token> &toAdd);
    //...other functions
}; 
```

我遇到问题的函数是“addScheme”，它应该向头部添加一个方案，或者如果头部已满，则将其添加到尾部（以链表的方式）。这是我到目前为止的功能：

```
Token schemeList::addScheme(vector<Token>& toAdd)
{
    if (head->retCloseParen() != ')')
    {
        scheme * headCopy = head;       
        Token answer = head->addScheme(toAdd);
        head = headCopy;
        return  answer;
    }
    else
    {
        //deal with tail
        schemeList * arrow = this;

        while (arrow->tail != NULL)
        {
            arrow = arrow->tail;
        }

        tail = new schemeList();

        tail->head= new scheme();
        tail->tail = NULL;

        Token answer = arrow->tail->addScheme(toAdd);
        return answer;
    }
} 
```

这适用于添加第一个方案，但第二个方案会抛出一个错误，显示“未处理的异常......”。我之前遇到过这样的问题，但我`toAdd`通过引用传递变量而不是传递整个对象来修复它。为什么这会引发错误和/或我该如何解决？

如果它使事情更清楚，一个方案是：

```
class scheme
{
    friend class identifierList;

public:
    Token * id;
    char openParen;
    char closeParen;
    identifierList * idList;

    scheme();
    //other functions
};

class identifierList
{
    friend class scheme;
public:
    Token * id;
    identifierList * next;

    identifierList(Token * inId, identifierList * inNext);
}; 
```

一个令牌是：

```
class Token
{
    friend class datalogProgram;

public:
    int lineNumber;
    string type;
    string value;

    Token(string inType, string inValue, int inLineNum);
    //other functions
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:09:44.480

*   没有给出足够的细节，尤其是导致异常的代码。你最好调查调用堆栈！
*   您是否正在初始化`head`, 和其他指针变量`NULL`- 我没有看到任何构造函数这样做。也没有任何检查（它只是`head->retCloseParen() != ')'`检查）。
*   正如 Thomas 在评论中所建议的，您应该更好地使用一些已经为您提供的容器类。

# postgresql - 如何使用 epgsql (Erlang) 连接到 PostgreSQL？

> ID：15732576
> 
> 赞同：0
> 
> 时间：2013-03-31T17:54:38.297
> 
> 标签：postgresql, erlang

我想用 Erlang 和 epgsql 运行一个简单的 PostgreSQL 查询，类似于[Erlang 和 PostgreSQL](https://stackoverflow.com/questions/10350272/erlang-and-postgresql)。我正进入（状态

```
** exception error: no match of right hand side value 
{error,
    {authentication,
        [{severity,'Ð\222Ð\220Ð\226Ð\235Ð\236'},
         {code,"28000"},
         {message,[208,191,208,190,208,187,209,140,208,183,208,190,208,178,208,176,209,130,208,181|...]},
         {file,"auth.c"},
         {line,302},
         {routine,"auth_failed"}]}} 
```

在

```
{ok, C} = pgsql:connect("localhost", 
                        "postgres", 
                        "password", 
                        [{database, "postgres"}]). 
```

我的 PostgreSQL 实例工作正常，我可以将表添加到我的数据库或运行简单的查询。但我需要用epgsql来做。此外，我无法阅读错误消息，这是我可以看到的：

```
[208,191,208,190,208,187,209,140,208,183,208,190,208,178,208,176,209,130,208,181|...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:04:28.967

我安装了egpsql，直接做了测试，确认第二个参数for`connect`是用户名，第三个是密码：

```
{ok, C} = pgsql:connect("localhost", "username", "password", [{database, "db_name"}]).
{ok, Columns, Rows} = pgsql:squery(C, "select * from myschema.mytable"). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-22T19:22:55.560

我在使用**epgsql:connect**函数时看到了类似的错误**28000 INVALID AUTHORIZATION SPECIFICATION 。**

 **我遵循了人们的建议，将 pg_hba.conf 本地方法类型更改为 trust 和 ident。但没有运气！通过创建新用户并在 psql 端授予权限来尝试。但没有运气。

```
local   all             all                                    password #trust 
```

最后，在 pg_hba.conf 文件中进行以下更新后（重新启动 postgresql 服务），它在 centos 7 上为我工作。

```
host    all             all             127.0.0.1/32            password #ident 
```**

# android - Android：动态添加视图到 ScrollView

> ID：15732577
> 
> 赞同：2
> 
> 时间：2013-03-31T17:54:42.267
> 
> 标签：android, scrollview, programmatically-created

我有一个 ScrollView，我想插入用户指定数量的 Horizo​​ntalScrollView。所以用户说他想要一个 5x5 元素的矩阵，我想插入 5 个 Horizo​​ntalScrollViews，每个有 5 个 EditText 对象。我的程序按预期添加了第一行，但其余的没有。

```
for (int i = 0; i < number; i++) {
        LinearLayout ll = new LinearLayout(this);
        ll.setLayoutParams(par2);
        HorizontalScrollView row = new HorizontalScrollView(this);
        row.setLayoutParams(par1);
        row.addView(ll);
        for (int j = 0; j < number; j++) {
            EditText txt = new EditText(this);
            txt.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            txt.setHint(i+","+j);
            ll.addView(txt);
        }
        latout_in_scrollview.addView(row);
    } 
```

任何想法为什么？谢谢！

编辑：我使用的 1:1 代码

```
LinearLayout dijkstra_rows;
FrameLayout.LayoutParams par1 = new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
LinearLayout.LayoutParams par2 = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_dijkstra);

    dijkstra_rows = (LinearLayout) findViewById(R.id.dijkstra_rows);

    Bundle extras = getIntent().getExtras();
    number = extras.getInt("vertexes");

    for (int i = 0; i < number; i++) {
        LinearLayout ll = new LinearLayout(this);
        ll.setLayoutParams(par2);
        HorizontalScrollView row = new HorizontalScrollView(this);
        row.setLayoutParams(par1);
        row.addView(ll);
        for (int j = 0; j < number; j++) {
            EditText txt = new EditText(this);
            txt.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            txt.setHint(i+","+j);
            ll.addView(txt);
        }
        dijkstra_rows.addView(row);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-22T12:45:21.650

ScrollView 只能包含一个 childView。您可以根据需要放置任何布局。我通常使用相对布局...

然后动态添加视图到相对布局

```
 viewLayout = (ViewGroup) mView.findViewById(R.id.YOUR_RELATIVE_LAYOUT_ID);
        View lastCard = viewLayout.getChildAt(viewLayout.getChildCount() - 1);

    // INFLATE YOUR NEW VIEW YOU WANT TO ADD
                CardView cardView = (CardView) 

LayoutInflater.from(getContext()).inflate(R.layout.card_nearest_stop, null);
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                    ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);

            //Set id to view
            int id = 125;
            if (lastCard != null) {
                params.addRule(RelativeLayout.BELOW, lastCard.getId());
                id = lastCard.getId() + 125;
            }
            cardView.setLayoutParams(params);
            cardView.setId(id);
            viewLayout.addView(cardView); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:06:50.063

[`ScrollView`](http://developer.android.com/reference/android/widget/ScrollView.html)是一个单元素容器。

> ScrollView 是 FrameLayout，这意味着您应该在其中放置一个包含要滚动的全部内容的子视图；这个孩子本身可能是一个具有复杂对象层次结构的布局管理器。经常使用的子元素是垂直方向的 LinearLayout，它呈现用户可以滚动浏览的顶级项目的垂直数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T19:27:31.987

您在此处添加多个 LinearLayout

```
 for (int i = 0; i < number; i++) {
        LinearLayout ll = new LinearLayout(this);
.
.
} 
```

你应该只有一个出这个循环。然后将此添加到您的滚动视图中，在循环中您可以将多个 Horizo​​ntolScrollViews 添加到此 LinearLayout

# c# - 更多 ConsoleColors 的 C# 库？

> ID：15732579
> 
> 赞同：4
> 
> 时间：2013-03-31T17:54:48.457
> 
> 标签：c#, .net, console-application, windows-console

我一直在编写控制台应用程序，并注意到控制台（例如 cmd.exe）支持 RGB 颜色，但 .NET 的“控制台”类不支持。有谁知道在 C# 中允许控制台应用程序使用 RGB 颜色的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T00:29:42.867

我找到了一个[解决方案](https://stackoverflow.com/questions/7937256/changing-text-color-in-c-sharp-console-application)，但不值得花时间和精力，这应该更容易做到，我希望在未来的 .NET 框架版本中，这个过程将得到简化。

# jsf - 从选择一个菜单 JSF 中选择自定义对象

> ID：15732584
> 
> 赞同：1
> 
> 时间：2013-03-31T17:55:09.397
> 
> 标签：jsf, jsf-2, selectonemenu

我想从选择一个菜单中选择一个自定义对象。它既不显示错误也不显示值。我该怎么办？

我的 xhtml 文档：

```
<h:panelGrid columns="2">
    <p:outputLabel value="" />
        <p:selectOneMenu id="CurrencyMenu" value="#{CurrencyMB.currency}" >
            <f:selectItem itemLabel="-- Select Currency--" itemValue="#{null}"/>
        <f:selectItems value="#{CurrencyMB.currencyList}" var="currency"  itemValue="#{currency.currencyId}" itemLabel="#{currency.currencyName}" > 
            </f:selectItems>
        <p:ajax update="currencyOut" />
        </p:selectOneMenu>
        <p:outputLabel value="Currency Id : #{CurrencyMB.currency.currencyId}" id="currencyOut" />
</h:panelGrid> 
```

我的 managedBean 类：

```
@ManagedBean(name = "CurrencyMB")
@RequestScoped
public class CurrencyManagedBean {

private Currency currency;
private List<Currency> currencyList;

public Currency getCurrency() {
        return currency;
    }

public void setCurrency(Currency currency) {
        this.currency = currency;
    }
public List<Currency> getCurrencyList() {
        currencyList = new ArrayList<Currency>();
        currencyList.addAll(getiCurrencyService().getCurrencies());
        return currencyList;
    }

public void setCurrencyList(List<Currency> currencyList) {
        this.currencyList = currencyList;
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T18:47:27.067

您正在尝试将类的 Java 对象映射`Currency`到作为 HTTP 请求参数出现的字符串。转换器旨在用于需要从其字符串表示创建对象的情况下，反之亦然，就像您面临的情况一样。

基本上有两种方法。

**1.使用转换器**。

使用这种方法，您可以将项目值定义为`Currency`对象，并使用转换器从对象创建字符串表示，然后从字符串重新创建对象。对于转换器部分，只需按照 Luiggi 指出的教程进行操作即可。基本上，您需要创建一个实现的类，`Converter`对其进行注释，`@FacesConverter("currencyConverter")`以便能够通过 id 引用转换器，例如在`converter="currencyConverter"`JSF 标记的属性中：

```
<p:selectOneMenu id="CurrencyMenu" value="#{CurrencyMB.currency}" converter="currencyConverter">
    <f:selectItems value="#{CurrencyMB.currencyList}" var="currency"  itemValue="#{currency}" itemLabel="#{currency.currencyName}" /> 
    <p:ajax update="currencyOut" />
</p:selectOneMenu> 
```

**2.利用plain `String`s（或java原始包装器）**。

使用这种方法，您可以将项目值以及用户选择绑定到`String`类型的 bean 属性，而不是实际对象。以这种方式使用它，您将不需要任何转换器，并且将为您设置字符串值：

```
<p:selectOneMenu id="CurrencyMenu" value="#{CurrencyMB.currencyName}">
    <f:selectItems value="#{CurrencyMB.currencyList}" var="currency"  itemValue="#{currency.currencyName}" itemLabel="#{currency.currencyName}" /> 
    <p:ajax update="currencyOut" />
</p:selectOneMenu> 
```

最后，值得一读的问题到答案[为什么 selectOneMenu 将 ItemLabel 发送给转换器？](https://stackoverflow.com/questions/7022965/why-selectonemenu-send-itemlabel-to-the-converter/7031334#7031334).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T08:44:24.123

您可以为您的自定义对象货币创建转换器。

第 1 步：创建一个 Converter 类并实现 javax.faces.convert.Converter 接口，重写 getAsObject 和 getAsString 方法并编写 String 到 Object 转换和 Object 到 String 转换的逻辑。

第 2 步：只需在您的转换器类中声明类似 @FacesConverter("currencyConverter") 的内容，或者如果您想在 Converter 类中使用 Spring Inject 或 Autowired Annotation，请使用 @Component("currencyConverter") 注释声明您的 Converter 类，不要使用 @ FacesConverter.And 你的转换器类应该在组件扫描包中。

第 3 步：在 Selectonemenu 中使用转换器属性声明您的转换器。

如果您还有任何问题，请参考此链接

[http://www.techpages.org/jsf/jsf-custom-object-converter-from-selectonemenu/2428/](http://www.techpages.org/jsf/jsf-custom-object-converter-from-selectonemenu/2428/)

# bash - 需要帮助编写脚本以将我的 .flac 文件分离到单独的文件夹库中

> ID：15732585
> 
> 赞同：-1
> 
> 时间：2013-03-31T17:55:11.943
> 
> 标签：bash, file-io, flac

所以我有一个充满不同文件格式的音乐文件夹，它们混合在一起。它结构良好：音乐/[艺术家姓名]/[专辑名称]，合辑位于名为“Various”的文件夹中。有些文件夹仅包含 .mp3、.m4a 或 .flac 文件，有些文件夹包含不同文件格式的专辑的多个版本。当然还有各种 .jpeg 的封面艺术，许多艺术家文件夹包含艺术家肖像的 .jpeg，还有许多杂项 .cue 和 .log 文件和其他垃圾。

我想要结束的是 .flac 文件的单独音乐文件夹，保留现有文件夹结构，将它们从现有库中删除。我也不想在我当前的库中得到空文件夹，因为专辑只是在 flac 中。在具有多种格式的专辑文件夹的情况下，我想将flacs与封面一起移动到新库中，但当然也要保留现有的封面。

我还没有找到能够处理这个问题的应用程序，但我认为一个 shell 脚本可能可以处理它。但是我对 bash 很可怜，真的不想破坏我的图书馆。

这些文件位于我可以使用 mac、windows 或 linux 访问的远程磁盘上，因此任何方法都很好。

为了完全澄清，这是我希望编码的逻辑：

1.  查找包含 .flac 文件的 /Music 的每个子目录

2.  将这些目录中的每一个（和中间父目录）全部复制到 /FLAC 中的新位置，但从副本中排除其他音频文件类型（.mp3、.m4a 等）。

3.  如果该目录除了 .flac 之外没有其他音频文件类型，请删除整个目录。如果它确实有其他音频文件，只需删除 .flac 文件。

4.  对所有 /Music 进行最后一次扫描，以删除任何本身不包含音频文件的目录或任何子目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:29:04.837

这是另一种方法：

```
find . -type f -name \*.flac -printf "%h\n" | 
sort -u | 
while read -r dirname; do
    new="../flac/$dirname"
    echo mkdir -p "$new"
    echo mv "$dirname"/*.flac "$new"
    jpgs=("$dirname"/*.jpg)
    [[ ${#jpgs[@]} -gt 0 ]] && echo cp "$dirname"/*.jpg "$new"
done 
```

*   `find`with`-printf`会打印出每个flac文件的目录名（相对于当前目录
*   `sort -u`删除重复项——现在你有一个包含 flac 文件的目录列表
*   while 循环遍历目录，在另一个目录下克隆目录层次结构（根据您的需要进行修改），移动 flac 文件，并复制 jpg 文件（如果有）。

`echo`如果您满意它对您有用，请删除这些命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:04:13.560

首先创建一个新的父文件夹，例如“MusicNew”，它应该等同于现有的“Music”文件夹。然后假设您对要复制的子文件夹和文件类型的描述，以下代码行应该可以工作。

```
IFS='\n'
for i in `find Music -mindepth 2 -maxdepth 3 -type f -name "*flac"`;
do
    echo ${i};
    newfold=`echo ${i} | sed -e 's/Music/MusicNew/g'`;
    filename=`basename ${i}`;
    fulldirpath="${newfold:0:${#newfold} - ${#filename}}";
    echo $fulldirpath/${filename};
    mkdir -p ${fulldirpath};
    mv ${i} ${fulldirpath}/;
done 
```

# php - 如何拆分从 ftp_rawlist() 获得的数组中的项目

> ID：15732586
> 
> 赞同：0
> 
> 时间：2013-03-31T17:55:19.850
> 
> 标签：php, arrays, ftp, split

我试图再次专注于我的 PHP 技能，但我似乎被困在数组的使用上。

我有一个包含 700 个项目的数组。然而，每个项目看起来像这样：

```
-rw-r--r-- 1 u37148 u37148 714513 Dec 31 23:06 01-01-13-etc.tar.gz --> ITEM 1 in array
-rw-r--r-- 1 u37148 u37148 7402504 Dec 31 23:06 01-01-13-home-bnc.tar.gz --> ITEM 2 in array
etcetera 
```

正如您在上面看到的，每个项目都具有相同的结构，并且有**9 个单独的字符串，由空格**分隔符分隔。

我**只需要提取每个项目的第 9 个字段**的代码是什么？我需要一个新数组，包括：

```
01-01-13-etc.tar.gz ; 01-01-13-home-bnc.tar.gz ; ... and so on. 
```

我可能还需要能够访问每个项目的其他字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:01:35.577

如果输入数组中的字符串始终具有相同的结构，您可以尝试以下操作：

```
$result = array();
foreach($input as $item)
    $result[] = explode(" ", $item)[8]; 
```

**更新**

根据对 fab 回答的评论，您可以尝试`preg_split`代替`explode`：

```
$result = array();
foreach($input as $item)
    $result[] = preg_split("/\s+/", $item, 9)[8]; 
```

这将通过一系列空格拆分字符串并返回正好包含 9 个项目的数组（最后一个可以包含空格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:03:27.250

您可以在空格处拆分字符串，`$parts = explode(' ', $item)`然后使用 访问第九部分，`$parts[8]`但我更喜欢正则表达式，即：

```
/^(?:.*? ){8}(.*?) / 
```

如果您退后一步，这可以使整个过程更容易。我猜你的数组是`file($someLogFile)`. 在这种情况下，您可以改为将文件读入字符串并一次获取所有文件名：

```
$log = file_get_contents($someLogFile);
preg_match_all('/^(?:.*? ){8}(.*?) /m', $log, $matches);
$fileNames = $matches[1]; 
```

## 更新

有了评论中的上下文，现在构建一个明智的解决方案要容易得多。不幸的是，FTP LIST 的输出通常不是一个简单的可解析制表符分隔结构，而是一个为人类可读性而非机器可读性而设计的 ASCII 表。

尽管如此，如果您知道格式，则可以使用捕获所有部分的正则表达式。

**例子：**

```
<?php
$ftp = ftp_connect('ftp.mozilla.org');
ftp_login($ftp, 'anonymous', '');
$rawlist = ftp_rawlist($ftp, '/');
$rawlist = join("\n", $rawlist);

preg_match_all('/^([drwx+-]{10})\s+(\d+)\s+(\w+)\s+(\w+)\s+(\d+)\s+(.{12}) (.*)$/m', $rawlist, $matches, PREG_SET_ORDER);

var_dump($matches); 
```

**输出：**

```
array(3) {
  [0]=>
  array(8) {
    [0]=>
    string(62) "-rw-r--r--    1 ftp      ftp           528 Nov 01  2007 README"
    [1]=>
    string(10) "-rw-r--r--"
    [2]=>
    string(1) "1"
    [3]=>
    string(3) "ftp"
    [4]=>
    string(3) "ftp"
    [5]=>
    string(3) "528"
    [6]=>
    string(12) "Nov 01  2007"
    [7]=>
    string(6) "README"
  }
  [1]=>
  array(8) {
    [0]=>
    string(66) "-rw-r--r--    1 ftp      ftp           561 Oct 03 15:44 index.ht
ml"
    [1]=>
    string(10) "-rw-r--r--"
    [2]=>
    string(1) "1"
    [3]=>
    string(3) "ftp"
    [4]=>
    string(3) "ftp"
    [5]=>
    string(3) "561"
    [6]=>
    string(12) "Oct 03 15:44"
    [7]=>
    string(10) "index.html"
  }
  [2]=>
  array(8) {
    [0]=>
    string(59) "drwxr-xr-x   43 ftp      ftp          4096 Aug 08  2012 pub"
    [1]=>
    string(10) "drwxr-xr-x"
    [2]=>
    string(2) "43"
    [3]=>
    string(3) "ftp"
    [4]=>
    string(3) "ftp"
    [5]=>
    string(4) "4096"
    [6]=>
    string(12) "Aug 08  2012"
    [7]=>
    string(3) "pub"
  }
} 
```

就我可以通过您的示例判断而言，该模式也应该对您有用。

# asp.net - ASP.NET Web 应用程序：使用通用数据库连接字符串时远程服务器出现 404 错误

> ID：15732590
> 
> 赞同：0
> 
> 时间：2013-03-31T17:55:38.473
> 
> 标签：asp.net, database-connection, http-status-code-404, connection-string, remote-server

我正在使用 c# asp.net 中的一个项目。当我创建用于访问数据库的单独连接字符串时，程序在本地和远程服务器中正常运行。但是当我通常在一个类中编写连接字符串并访问时那些使用对象的连接，它在本地服务器中正常工作，但在远程服务器中运行时显示“404错误”..请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:15:42.833

您是否在服务器中创建数据库？您是否在服务器中部署了所有页面？？？

检查以下链接

[http://support.microsoft.com/kb/315122](http://support.microsoft.com/kb/315122)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:21:41.960

一般来说，这听起来更像是远程服务器问题，而不是代码中的任何特定问题。远程服务器上是否已成功运行其他 ASP.NET 页面或站点？如果不是，它可能与您部署站点的方式有关，而不是与您的代码有关 - 您确定 IIS 设置为正确地为 ASP.NET 站点提供服务吗？

我将首先创建一个没有动态内容的“test.aspx”页面并尝试访问它，然后从那里继续工作。

# liferay - liferay-ui：自定义 portlet 中的讨论标记

> ID：15732591
> 
> 赞同：1
> 
> 时间：2013-03-31T17:55:45.570
> 
> 标签：liferay

我试图阻止在 jsp 页面自定义 portlet 中允许对显示的期刊文章发表评论

镶嵌 。问题是它抛出 g.ClassNotFoundException: org.apache.jsp.view_jsp 如下

```
An error occurred at line: 119 in the jsp file: /discussion.jsp
The method setClassName(String) in the type DiscussionTag is not applicable for the arguments (Class<capture#2-of ? extends JournalArticle>)
116:            id="journalCommentsPanel" persistState="<%= true %>"
117:            title='<%= LanguageUtil.get(pageContext, "Comments") %>'>
118:
119:            <liferay-ui:discussion
120:            className="<%= journal.getClass() %>"
121:            classPK="31575"
122:            formAction="www.google.com" 
```

15:57:13,540 错误 [PortletRequestDispatcherImpl:108]

```
org.apache.jasper.JasperException: java.lang.ClassNotFoundException:
org.apache.jsp.discussion_jsp
org.apache.jasper.JasperException: java.lang.ClassNotFoundException:   
org.apache.jsp.discussion_jsp 
```

这是我的讨论.jsp 页面

```
<%
WindowState windowState = null;
PortletMode portletMode = null;

PortletURL currentURLObj = null;

if (renderRequest != null) {
    windowState = renderRequest.getWindowState();
    portletMode = renderRequest.getPortletMode();
    currentURLObj = PortletURLUtil.getCurrent(renderRequest,
            renderResponse);
} else if (resourceRequest != null) {
    windowState = resourceRequest.getWindowState();
    portletMode = resourceRequest.getPortletMode();
    currentURLObj = PortletURLUtil.getCurrent(resourceRequest,
            resourceResponse);
}

String currentURL = currentURLObj.toString();

ThemeDisplay themeDisplayObject = (ThemeDisplay) request
        .getAttribute(WebKeys.THEME_DISPLAY);
//long groupId = ParamUtil.getLong(request, "groupId", scopeGroupId);
long groupId = themeDisplayObject.getScopeGroupId();

String url = PortalUtil.getCurrentURL(request);
String[] urlString = url.split("/");
String urlTitle = urlString[urlString.length - 1];
urlTitle = HttpUtil.decodeURL(urlTitle).trim();

JournalArticle journal = JournalArticleLocalServiceUtil
        .getArticleByUrlTitle(groupId, urlTitle);
 %>

<portlet:actionURL var="discussionUrl">
    <!-- <portlet:param name="jspPage" value="/discussion.jsp" /> -->
</portlet:actionURL>

<portlet:actionURL var="editGreetingURL">
    <portlet:param name="jspPage" value="/view.jsp" />
</portlet:actionURL>

<liferay-ui:panel-container extended="<%= false %>"
    id="journalCommentsPanelContainer" persistState="<%= true %>">
    <liferay-ui:panel collapsible="<%= true %>" extended="<%= true %>"
        id="journalCommentsPanel" persistState="<%= true %>"
        title='<%= LanguageUtil.get(pageContext, "Comments") %>'>
        <portlet:actionURL name="invokeTaglibDiscussion" var="discussionURL" />
        <liferay-ui:discussion 
        className="<%= JournalArticle.class.getName() %>"
        classPK="<%= journal.getArticleId() %>" 
        formAction="www.google.com"
        subject="Wall Comments"
        userId="<%= journal.getUserId() %>" />
    </liferay-ui:panel>
</liferay-ui:panel-container>

and this is my processAction method :

        PortletConfig portletConfig = getPortletConfig();
    //  System.out.println(">>>>>>>>>>>> >>>>>>>>>>>>>>> >>>>>>>>>>>>>>>>>>>> inside invoke");
         PortalClassInvoker .invoke(true, "com.liferay.portlet.messageboards.action.EditDiscussionAction",       
                          "processAction", new String[] {
                                          "org.apache.struts.action.ActionMapping",
                                          "org.apache.struts.action.ActionForm",
                                          PortletConfig.class.getName(),
                                          ActionRequest.class.getName(),
                                         ActionResponse.class.getName()
                          }, null, null, portletConfig, actionRequest, actionResponse); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:29:22.890

您的错误在第 120 行显示此代码，`className="<%= journal.getClass() %>"`但您`discussion.jsp`显示`className="<%= JournalArticle.class.getName() %>"`的是我认为的更正版本。

我认为 portlet 没有正确部署，请尝试重新部署 portlet，或者如果这无济于事，请尝试通常的做法：

1.  取消部署 portlet
2.  然后重新部署

如果这不起作用：

1.  取消部署
2.  停止服务器
3.  清除临时目录
4.  清除工作目录
5.  启动服务器
6.  部署 portlet

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T08:57:08.917

我的工作正常

**我的桌子，WallEntry。**其中 userid 是用户的 ID。

```
List<WallEntry> wallEntry= WallEntryLocalServiceUtil.findByUserId(userId);
for (int i=0;i<wallEntry.size();i++)
{
 WallEntry wallobj=wallEntry.get(i);
 long id=wallobj.getWallEntryId();
} 
```

**Portlet 操作 URL**

```
<portlet:actionURL name="discussionURL" var="discussionURL">
        <portlet:param name="myaction" value="addComments" />
 </portlet:actionURL> 
```

**liferay-ui:讨论标签**

```
<liferay-ui:discussion 
    redirect="<%= themeDisplay.getURLCurrent() %>"  
    classPK="<%= wallEntry.getWallEntryId() %>" 
    userId="<%= user.getUserId() %>" 
    className="<%= WallEntry.class.getName() %>"   
    subject="" 
    formAction="<%= discussionURL %>" 
    formName='<%= "fm"+wallEntry.getWallEntryId() %>'  
  /> 
```

**动作类**

```
public void discussionURL(ActionRequest request,ActionResponse response) 
  throws Exception 
     {
     System.out.println("Inside addDiscussion function: "+request.getParameter("myaction"));

     } 
```

可能对某人有帮助。

# objective-c - NSThread 无法加载 Selector 方法

> ID：15732596
> 
> 赞同：0
> 
> 时间：2013-03-31T17:56:15.537
> 
> 标签：objective-c, cocoa, nsthread

因此，我正在尝试连接到远程服务器以获取和显示数据。在`viewDidLoad`我使用 an`NSThread`来调用一个名为`doSomething`

```
- (void)doSomething
{        
    @autoreleasepool
    {                
        NSMutableURLRequest *httpRequest = [NSMutableURLRequest requestWithURL:someURL];
        [httpRequest setHTTPMethod:@"POST"];
        [httpRequest setValue:[NSString stringWithFormat:@"%d", httpRequestParametersClean.length] forHTTPHeaderField:@"Content-Length"];
        [httpRequest setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
        [httpRequest setHTTPBody:httpRequestParametersClean];

        (void)[[NSURLConnection alloc] initWithRequest:httpRequest delegate:self];

        for (NSString* key in response)
        {
             // loop through returned values
        }
     }
} 
```

中的代码`viewDidLoad`是

```
 [NSThread detachNewThreadSelector:@selector(someURL) toTarget:self withObject:nil]; 
```

然后我有一个`REFRESH`按钮，当点击它时`doSomething`，只需简单地说`[self doSomething]`

我的问题是，加载视图时，服务器的响应为空。在单击刷新按钮之前，我仍然没有得到任何响应。奇怪的！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:07:11.593

A `NSURLConnection`created with*异步*`initWithRequest:delegate:`工作，调用委托函数, , ... 稍后，当从服务器读取数据时。您的代码甚至没有连接，因此无论如何都不会发生任何事情。*`connection:didReceiveResponse:``connection:didReceiveData:``start`*

 *解决问题的最简单方法是使用同步版本

```
sendSynchronousRequest:returningResponse:error: 
```

的`NSURLConnection`。如果`doSomething`在单独的线程中执行，则不会阻塞 UI。

*补充：（*感谢@geowar 提到这一点。）请注意，您也可以使用基于委托的`NSURLConnection`方法。这些更灵活（参见例如[https://stackoverflow.com/a/15591636/1187415](https://stackoverflow.com/a/15591636/1187415)进行比较）。另一个不错的选择是`sendAsynchronousRequest:queue:completionHandler:`，它会自动创建一个后台线程。*

# java - Hadoop 要求输入路径位于 localhost 9000

> ID：15732597
> 
> 赞同：3
> 
> 时间：2013-03-31T17:56:17.653
> 
> 标签：java, hadoop

我正在尝试运行 Tom Whites 的第 2 章示例

当我运行命令时：

```
hadoop MaxTemperature input/ncdc/sample.txt output 
```

我得到的错误是：

```
11/12/31 18:08:28 INFO mapred.JobClient: Cleaning up the staging area hdfs://localhost:9000/tmp/hadoop-mymac/mapred/staging/mymac/.staging/job_201112311807_0001
11/12/31 18:08:28 ERROR security.UserGroupInformation: PriviledgedActionException as:mymac (auth:SIMPLE) cause:org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: hdfs://localhost:9000/user/mymac/input/ncdc/sample.txt
Exception in thread "main" org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: hdfs://localhost:9000/user/mymac/input/ncdc/sample.txt 
```

我设置错了什么？

我没有接触过他的源代码，可以在这里找到：

[https://github.com/tomwhite/hadoop-book/tree/3e/ch02](https://github.com/tomwhite/hadoop-book/tree/3e/ch02)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T19:20:23.680

您的`core-site.xml`和`hdfs-site.xml`文件配置为使用`localhost:9000`. 如果这不是您所期望的（这是我从您的帖子标题中得到的），*您*期望什么？

我们在谈论什么版本的 Hadoop？您是如何安装 Hadoop 发行版的？从您的其他问题和配置文件来看，我猜您使用的是 CHD4。如果您查看[Cloudera 的说明](https://ccp.cloudera.com/display/CDH4DOC/Installing+CDH4+on+a+Single+Linux+Node+in+Pseudo-distributed+Mode#InstallingCDH4onaSingleLinuxNodeinPseudo-distributedMode-InstallingCDH4withMRv1onaSingleLinuxNodeinPseudodistributedmode)，您能看到是否遗漏了什么吗？

在启动 Hadoop 之前，您是否格式化过 HDFS？

```
$ hadoop namenode -format 
```

那么，在启动 Hadoop 之后，除了 INFO 消息之外，你是否得到了其他信息？

您是否将输入数据复制到 HDFS 中？

```
$ hadoop dfs -put /tmp/my/input/data input 
```

最后，您可以从简单的 HDFS 命令中得到什么，例如：

```
$ hadoop dfs -ls / 
```

更新：运行字数

1.  启动并运行 HDFS。跑步`hadoop dfs -ls /`应该可以。
2.  将包含文本文件的文件夹复制到 HDFS：`hadoop dfs -put text_files input_folder`
3.  运行`hadoop dfs -ls .`以查看您的文件是否被正确复制。
4.  在您的系统上找到该`hadoop-examples-X.Y.Z.jar`文件。
5.  导航到它所在的任何目录，然后运行：

    `$ hadoop jar hadoop-examples-*.jar WordCount input_folder output_folder`.

6.  您应该会看到 MapReduce 应用程序的进度。

7.  完成后，使用 . 查看输出`hadoop dfs -cat output_folder/*`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T06:42:28.370

忘记设置也可能导致这个`JAVA_HOME`错误`etc/hadoop/hadoop-env.sh`

# azure - 如何强制 CNAME 到 Azure 中的特定文件夹？

> ID：15732602
> 
> 赞同：2
> 
> 时间：2013-03-31T17:56:39.310
> 
> 标签：azure

我有一个由 xyz 托管的域 abc.com。我使用 CNAME 将子域 games.abc.com 指向我的 Azure 网站 website.azurewebsites.net。此时一切正常。

在上述场景中。如何将子域定向到 Azure 网站的特定文件夹？例如，stapler.abc.com 应指向 website.azurewebsites.net/someFolder。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T19:56:29.447

据我所知，这对于 CNAME 记录是不可能的，因为您只能指向一条记录。

但是 Azure 确实提供了一个您可以使用的 $root 容器。

请参阅[有关根容器的 azure 文档](http://msdn.microsoft.com/en-us/library/windowsazure/ee395424.aspx)

这样做的一个缺点是您不能在 $root 容器中使用任何带有“/”的名称，这意味着如果您确实想要对分层方法进行建模，则必须使根目录中的每个文件夹都成为自己的容器（有点像痛苦但能做到）。

另一个缺点是 azure 没有为容器提供默认的 blob（据我所知）。这意味着您不能将某人定向`blob.azurewebsites.net/someFolder`到特定文件`blob.azurewebsites.net/someFile`

# java - 如何转换列表 > 成字符串[][][]？

> ID：15732603
> 
> 赞同：0
> 
> 时间：2013-03-31T17:56:42.357
> 
> 标签：java, arrays, string, multidimensional-array

这是我的代码：

```
 List<List<String[]>> myBigList=new ArrayList<List<String[]>>();
    String[] s11={"A","30"};
    String[] s12={"B","20"};
    List<String[]> l1=new ArrayList<String[]>();
    l1.add(s11);
    l1.add(s12);

    String[] s21={"B","10"};
    String[] s22={"B","20"};
    List<String[]> l2=new ArrayList<String[]>();
    l2.add(s21);
    l2.add(s22);

    String[] s31={"C","2"};
    String[] s32={"A","10"};
    String[] s33={"A","3"};
    List<String[]> l3=new ArrayList<String[]>();
    l3.add(s31);
    l3.add(s32);
    l3.add(s33);

    myBigList.add(l1);
    myBigList.add(l2); 
    myBigList.add(l3);

    String[][] test2DArr=new String[2][myBigList.size()];
myBigList.toArray(test2DArr); 
```

运行时说“[ERROR] - Uncaught exception escaped” 那么如何将 List> 转换为 String[][]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:06:21.190

如果我理解正确，这就是你想要的（或多或少）

```
List<String> list = ..;
String[] array = list.toArray(new String[list.size()]); 
```

但无论如何。你的逻辑是完全错误的，你有“数组中的数组在数组中的数组中的数组中的数组中的数组中的数组中的数组”..你明白吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T19:12:27.830

假设（这并不容易......）任何人都会面临类似的问题，转换`List<List<String[]>>`为的工作解决方案`String[][][]`是：

```
// List<List<String[]>> myBigList = new ArrayList<List<String[]>>();
String[][][] amyBigArray = new String[myBigList.size()][][];
for (int i = 0; i < myBigList.size(); i++) {
    int innerSize = myBigList.get(i).size();
    String[][] innerArray = new String[innerSize][];
    for (int j = 0; j < innerSize; j++) {
        innerArray[j] = myBigList.get(i).get(j);
    }
    amyBigArray[i] = innerArray;
} 
```

它可以打印：

```
for (String[][] strings : amyBigArray) {
    for (String[] strings3 : strings) {
        System.out.println(Arrays.toString(strings3));
    }
} 
```

并为给定的问题输入提供正确的输出：

```
[A, 30]
[B, 20]
[B, 10]
[B, 20]
[C, 2]
[A, 10]
[A, 3] 
```

# mysql - MYSQL：帮助从三个表中查询结果

> ID：15732604
> 
> 赞同：1
> 
> 时间：2013-03-31T17:56:45.120
> 
> 标签：mysql, join

我想从两个“内容”表和一个“用户”表中查询结果。

这两个主要内容文件具有相同的字段名称，但字段不同 - 因为其中一个表用于注册会员的评论，而另一个用于客人的评论。

将“widgetID”视为我试图循环浏览评论的小部件的主要标识。同样，“活动”是 0 或 1，表示它是否已被批准为可见。

table_widget: id datetime usersID message active

table_member_comments: id datetime widgetID usersID message active

table_guest_comments: id datetime widgetID usersName UsersEmail message active

表用户：

id datetime usersID fullName active

所以我一直想弄清楚的是如何同时查询这两个表以得到一个结果，用它来循环和显示成员和公众评论。

我很确定我需要做一个 JOIN，并且我已经尝试过但未能围绕正确的程序来解决问题。

我需要在此处使用我没有得到的 JOIN 进行初始 SELECT ... WHERE widgetID = ？AND u.active = '1' ORDER BY DateTime DESC LIMIT 0, 100

它在中间的该死的部分让我在这里调整。希望有人告诉我如何做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:13:08.297

连接不是这里的最佳选择，您需要使用 UNION 来组合数据而不是将其连接在一起。

例如：

```
SELECT mydata.message FROM
(
SELECT datetime, message FROM table_member_comments WHERE widgetID = 100 AND active = 1
UNTION ALL
SELECT datetime, message FROM table_guest_comments WHERE widgetID = 100 active = 1
) mydata
ORDER BY mydata.datetime ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:13:34.330

用于`UNION`将另一个查询的结果附加到同一结果集上：

```
SELECT   a.*
FROM     (
         SELECT c.message, c.datetime, u.fullName
         FROM   table_member_comments c
         JOIN   table_users u ON c.usersID = u.usersID
         WHERE  c.widgetID = ? AND c.active = 1

         UNION ALL

         SELECT message, datetime, usersName
         FROM   table_guest_comments
         WHERE  widgetID = ? AND active = 1
         ) a
ORDER BY a.datetime DESC 
LIMIT    0,100 
```

# php - 动态执行 PHP GET

> ID：15732605
> 
> 赞同：0
> 
> 时间：2013-03-31T17:56:56.920
> 
> 标签：php, javascript, ajax, variables, get

我目前有一个 php 脚本，在单击按钮时由 Javascript 加载。它会创建所有看起来像这样的 html 内容，一旦加载

```
 <ul>
    <li>
        <a href='foo.php?var=abc123'>
    </li>
    <li>
        <a href='foo.php?var=def123'>
    </li>
  </ul> 
```

因此，当单击链接时，它使用 GET 将 PHP 变量发送到同一脚本，并显示另一个结果列表。

我想要做的是，当您单击链接而不是转到带有结果的新页面时，它将它们加载到此部分下方以产生类似这样的结果（例如 treeview()：

```
 <ul>
       <li>
          <a href="#" id="abc123">abc123</a>
       </li>
           <ul>
              <li>
                   <a href="#" id="jkl123">jkl123</a>
              </li>
              <li>
                   <a href="#" id="ghi123">ghi123</a>
              </li>
         </ul>
    <li>
        <a href="#" id="def123">def123</a>
    </li>
 </ul> 
```

如果我使用静态变量，我可以让它工作，但我需要找到一种方法从点击时创建的 html 中获取变量，将其放入 javascript 函数中，以便它可以执行 PHP 脚本。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:02:06.507

听起来您将要使用`AJAX`：

```
 $.ajax({
            type: 'GET',
            url: "yoururlhere.com",
            data: {
                someparam: "somevalue",
                param2: "anothervalue"
            },
            dataType: "json",
            success: function (JSONdata, textStatus, jqXHR) {
                // do work here on success

            }
        }); 
```

您可以将其附加到单击处理程序，如下所示：

```
$("someID").on("click",function(){
event.preventDefault();
var href = $(this).attr("href");

         $.ajax({
                type: 'GET',
                url: href ,
                data: "param=value&param2=anothervalue",
                success: function (JSONdata, textStatus, jqXHR) {
                    // do work here on success

                }
            });
}); 
```

**更新：**

`HTML`与上述代码一起使用的一些示例：

```
<a id="someID" href="yoururl.php">Click me</a> 
```

# python - 如何通过 Python 控制 Enttec Open DMX USB？

> ID：15732608
> 
> 赞同：2
> 
> 时间：2013-03-31T17:57:11.623
> 
> 标签：python, python-3.x, libusb, dmx512

我想知道是否可以通过 Python shell 控制连接到 Enttec Open DMX USB 的灯。如果是，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-19T14:22:19.487

开放照明项目（以前称为[opendmx](http://www.opendmx.net)）提供[Python API](http://www.openlighting.org/ola/developer-documentation/python-api/)，作为其开放照明架构 (OLA) 的一部分，用于在 OSX 和 Linux 上使用 OpenDMX USB。如果您使用的是 Windows，那么除了 Enttec 网站上使用 FTD2XX.DLL 库的代码之外，我没有找到任何其他内容。

但是应该注意的是，不能使用普通的基于串行的库（pyserial 等）。基本上，OLA 要么需要在 Linux 上使用特殊的内核模块，要么在 Mac 或 Linux 上使用通用 FTDI 非串行内核驱动程序与 libftdi 结合使用——有关详细信息，请参阅 OpenDMX 上的设备特定[页面](http://www.openlighting.org/ola/getting-started/device-specific-configuration/#Open_DMX_USB_FTDI_RS485)。

所使用的通信和协议与 Enttec Pro 系列完全不同（可以使用简单的串行命令和类似 pyserial 的东西进行控制，尽管 OLA 也与它们通信）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-12T13:54:45.180

我知道这是一篇相当老的帖子，但是[DmxPy](https://github.com/davepaul0/DmxPy)在过去几个月里对我来说效果很好。它仅适用于 Python 2，但我知道那里有一些 Python 3 端口。

使用起来很简单。我个人在我公司的质量控制软件中使用它。虽然它只适用于 DMX（不是 RDM），但我认为它比 OLA 的 Python Wrapper 更容易使用。它也可以与我们的 ENTTEC 完美配合！

更新：这是我的 Python 3 端口：[https ://github.com/trevordavies095/DmxPy](https://github.com/trevordavies095/DmxPy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-25T13:44:59.080

我遇到了完全相同的问题，所以我为所有运行 Windows 的程序编写了一个简单的 python 程序；看看：[https ://github.com/Coronon/PyOpenDmxUsb](https://github.com/Coronon/PyOpenDmxUsb)

它使用一个 C# 服务器（因为他们的 C# 接口是唯一对我有用的）和一个 Python 客户端，并且非常易于使用。

它也**与非专业版兼容**。（专业版更容易使用，我会使用 AcceptedAnswer [但不支持普通版]）

编辑：这可能是“广告”，但我的项目是开源的并且非常易于使用，所以我相信这对其他人有用:)

# php - 字符串替换空间

> ID：15732609
> 
> 赞同：1
> 
> 时间：2013-03-31T17:57:25.403
> 
> 标签：php, regex, string

我有两个这样的字符串：

```
$a = "John, Male , Central Java";
$b = "name = John and gender= Male"; 
```

我希望这些字符串成为：

```
$a = "'John','Male','Central Java'";
$b = "username='John' and gender='Male'"; 
```

preg_replace 可以使用什么模式和替换来完成此任务？

我想创建一个这样的函数：

```
function select($what, $from, $filter) {
    $query = "SELECT $what FROM $from WHERE $filter";
    // Performing mysql query.
}

$result = select("*", "user", "username = John and gender = Male"); 
```

$查询输出：`SELECT * FROM user WHERE username = John and gender = Male`

但输出不是有效的 mysql 语法。所以我希望输出变成：

```
SELECT * FROM user WHERE username='John' and gender='Male' 
```

我还想删除符号之间的空格。

**解决方案：**

我尝试了一些模式和替换，最后我找到了解决方案。我已经创建了格式化查询字符串的函数。我还使用`&&`as`AND`和`||`as更改了字符串设置`OR`。因此，即使值字符串包含'and'或'or'，它也不会受到preg_replace的影响。

```
// Preg replace sample: -> string = string space && string = space
function format_query($qry_string) {
    // Remove spaces before and after '='.
    $qry_string = preg_replace("/(\s+\=)/", "=", $qry_string); 
    // string= string space && string= space
    $qry_string = preg_replace("/(\=\s+)/", "=", $qry_string);
    // string=string space && string=space

    // Add single quote between '=' and word than contain space after the word.
    $qry_string = preg_replace("/\=(\w+\s+)/", "='$1", $qry_string); 
    // string='string space && string=space

    // Add single quote in first and end of words that start after '=' and not contain space after the word.
    $qry_string = preg_replace("/\=(\w+)/", "='$1'", $qry_string); 
    // string='string space && string='space'

    // Add single quote in end of words before of keyword '&&' and '||'.
    $qry_string = preg_replace("/(\w+)\s+\&\&/", "$1' &&", $qry_string); 
    // string='string space' && string='space'
    $qry_string = preg_replace("/(\w+)\s+\|\|/", "$1' ||", $qry_string);

    // Replate keyword '&&' and '||' to 'and' and 'or'
    $qry_string = str_replace("&&", "AND", $qry_string);
    $qry_string = str_replace("||", "OR", $qry_string);

    return $qry_string;
}

$string = "realname = Nanang El Agung || username = sarjono && password = 123456";
echo format_query($string); 
```

输出：`realname='Nanang El Agung' OR username='sarjono' AND password='123456'`

此功能适用于`$b`上述情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:00:10.640

使用[preg_replace()](http://php.net/manual/en/function.preg-replace.php)：

```
$a = "John, Male , Central Java";
$b = "name = John and gender= Male";

$a = preg_replace('/(\w+)((\s?\w+)+)/', '\'$1$2\'', $a);
// 'John', 'Male' , 'Central Java'

$b = preg_replace('/name\s?=\s?([\w\s]+) and gender\s?=\s?([\w\s]+)/', 'username = \'$1\' AND gender = \'$2\'', $b);
// username = 'John' AND gender = 'Male' 
```

**\w** => [a-zA-Z0-9_]

**\s** => 空间

**+** => 1 个或多个字符

**?** => 0 或 1 个字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T18:03:25.497

这只是这样做，对于第一个例子，测试它。

```
<?php 

$a = "John, Male , Central Java";

foreach ((explode(",", $a)) as $one) {

echo '\''.$one.'\',';
} 
```

输出

```
'John',' Male ',' Central Java', 
```

关于 Mysql 查询，这样的事情是可行的。

```
<?php 

    $a = "John, Male , Central Java";

    foreach ((explode(",", $a)) as $one) { 
```

.

```
 function select($one) {  // will run the three statements, relatively.. 
```

.

```
 echo '\''.$one.'\',';
    } 
```

**第二个**

* * *

```
$b = "name='John' and gender='Male'";

$b = str_replace('name', 'username', $b);

foreach((explode("=",$b[1]))as $one){
echo "$b";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T18:07:37.723

第二部分是

```
function select($what, $from, $filter) {
$query = mysql_fetch_array(mysql_query("SELECT {$what} FROM {$from} WHERE {$filter}")); extract($query);
return $what;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:20:24.210

**不要这样做。**您正在尝试使用正则表达式构建 SQL 查询。您的代码（包括所有三个当前答案）将在第一个`O'Connor`走进门时中断。如果您要解决此问题并以某种方式将您的代码放到网络上，那么您将受第一个黑客的摆布，他们会尝试一系列众所周知的漏洞，直到他们找到您没有想到的极端情况。

有关完整的详细信息和构建 SQL 语句的正确方法，请参阅[此问题](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php/60496)和[此答案。](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php/60496#60496)

# playframework-2.0 - 未定义的 session() 方法，播放验证

> ID：15732610
> 
> 赞同：3
> 
> 时间：2013-03-31T17:57:33.560
> 
> 标签：playframework-2.0, play-authenticate

我正在尝试在 play-authenticate 模块的 User 模型和我的模型 - Books 之间建立关系。我正在使用 play 2.0.4，并且我已将 play-authenticate 集成到我的项目中。在我的控制器/应用程序中，我有 getLocalUser 方法：

```
public static User getLocalUser(final Session session) {
    final User localUser = User.findByAuthUserIdentity(PlayAuthenticate
            .getUser(session));
    return localUser;
} 
```

我正在尝试在我的 Books 模型中覆盖 Model 的方法来保存添加/修改图书记录的用户。

```
public void save() {
    User logged = Application.getLocalUser(session());
    if (logged != null) {
        this.createUser = logged;
        this.modifyUser = logged;
    }
    super.save();
}

public void update(Object o) {
    User logged = Application.getLocalUser(session());
    if (logged != null) {
        this.modifyUser = logged;
    }
    super.update(o);
} 
```

我这样做时得到的错误是：

*未定义 Books 类型的 session() 方法。*

我不确定这是怎么回事，因为由于我的导入，我确实可以访问控制器/应用程序方法：

*导入控制器。应用程序；*

更新： *

```
public static Result createBook() {
        Form<Book> filledForm = bookForm.bindFromRequest();

        if(filledForm.hasErrors()) {
            return badRequest(
                views.html.bookCreator.render(Book.all(), filledForm)
            );
        }
        else {
            Book.create(filledForm.get());
                    //Book.save(getLocalUser(session()));
            return redirect(routes.Application.createSuccess());
        }
    }* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:12:14.863

首先，`session()`在模型类中调用是一个非常糟糕的主意，因为如果这样做，您将创建某种循环依赖关系（表示层 -> 模型 -> 表示层）。

如果您真的想保持这种方式，只需执行以下操作：

控制器：

```
public static User getLocalUser() {
    final User localUser = User.findByAuthUserIdentity(PlayAuthenticate
            .getUser(session()));
    return localUser;
} 
```

模型：

```
public void save() {
    User logged = Application.getLocalUser();
    if (logged != null) {
        this.createUser = logged;
        this.modifyUser = logged;
    }
    super.save();
}

public void update(Object o) {
    User logged = Application.getLocalUser();
    if (logged != null) {
        this.modifyUser = logged;
    }
    super.update(o);
} 
```

但我更愿意这样做：

控制器：

```
public Result anAction() {
    ...
    save(getLocalUser(session()));
    ...
} 
```

模型：

```
public void save(final User logged) {
    if (logged != null) {
        this.createUser = logged;
        this.modifyUser = logged;
    }
    super.save();
}

public void update(Object o, final User logged) {
    if (logged != null) {
        this.modifyUser = logged;
    }
    super.update(o);
} 
```

# mysql - 耙分贝：模式：转储

> ID：15732613
> 
> 赞同：0
> 
> 时间：2013-03-31T17:58:06.327
> 
> 标签：mysql, ruby-on-rails, rake

$ rake db:schema:dump

耙中止！它说..无法在第 31 行第 11 列解析 YAML，然后在配置文件夹中提供指向环境文件的链接

> environment.rb:5 in <'top (required)'>
> 
> 任务：TOP => db:schema:dump =>environment

我所做的是将 database.yml 的适配器从 sqlite3 更改为 mysql。安装了 yaml_db gem，将套接字值添加到 /tmp/mysql.sock （不确定这是什么......只是从某处复制......我的电脑中不存在这种类型的东西）

environment.rb 有

> "#加载rails应用
> 
> 需要 File.expand_path('../application', **FILE** )
> 
> "# 初始化rails应用
> 
> Cmsapp::Application.initialize！

数据库.yml

> 开发：适配器：mysql 编码：utf8 重新连接：false 数据库：simple_cms_development 池：5 用户名：simple_cms 密码：vishesh 套接字：/tmp/mysql.sock
> 
> 测试：适配器：mysql 编码：utf8 重新连接：false 数据库：simple_cms_test 池：5 用户名：simple_cms 密码：vishesh 套接字：/tmp/mysql.sock
> 
> 生产：适配器：mysql 编码：utf8 重新连接：false 数据库：simple_cms_production 池：5 用户名：simple_cms 密码：vishesh 套接字：/tmp/mysql.sock

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:10:04.607

您是否在 gemfile 中包含了 mysql2 gem 并重新捆绑了它？还要确保 database.yml 正确缩进。

# clojure - 如何在同一台服务器上运行多个 Ring 应用程序？

> ID：15732618
> 
> 赞同：2
> 
> 时间：2013-03-31T17:58:27.240
> 
> 标签：clojure, jetty, middleware, ring

我是 Ring 的新手（以及一般的 Clojure 服务器端编程）。我有一个基于 Ring 的应用程序，它在“开发模式”下运行良好，即它可以监听`localhost:3000`并做出适当的响应。作为部署此应用程序的一部分，我想将应用程序的基本 URL 更改为类似的`myserver.com/analytics/v1`内容，例如，以前发送到的请求`localhost:3000/foo`现在应该发送到`myserver.com/analytics/v1/foo`.

我想我在这里有两个密切相关的问题：如何告诉 Ring/Jetty 只在某个不是服务器根 URL 的 URL 上监听？以及如何设置它，以便我可以添加另一个应用程序（例如，`myserver.com/analytics/v2`）而不会为第一个应用程序停机？我是否需要编写另一个 Ring 应用程序来侦听`myserver.com/`并将请求路由到我的其他应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T18:22:39.560

我目前处理这个问题的方式是让每个 Ring 应用程序在它自己的嵌入式 Jetty 实例中运行，每个都在自己的端口上侦听，例如：8080 和 8085。在服务器上我从外部阻止这些端口，所以只有 localhost 可以访问他们。

然后我设置[Nginx](http://wiki.nginx.org/Configuration)以根据子域选择正确的应用程序：

*   [http://twitter.michielborkent.nl](http://twitter.michielborkent.nl)
*   [http://tictactoe.michielborkent.nl](http://tictactoe.michielborkent.nl)

可能有更高级的设置，但对我来说，这是配置最少的设置。

这是我的 nginx.conf。如果您想了解更多配置细节，请告诉我。

```
server {    listen     80;
    server_name     twitter.michielborkent.nl;
    access_log     /var/log/twitter-service.log;

    location / {  
        proxy_pass http://localhost:8080;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        Host $http_host;
    }
}

server {    listen     80;
    server_name     tictactoe.michielborkent.nl;
    access_log     /var/log/tictactoe.log;

    location / {
        proxy_pass http://localhost:8085;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        Host $http_host;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:13:57.747

以下是我如何调整@Michiel Borkent`nginx.conf`来满足我的需求：

```
server {
    listen 80;
    server_name www.myserver.com;

    location /analytics/v1/ {
        proxy_pass http://localhost:3001/;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
    }

    location /trac/ {
        proxy_pass http://localhost:3002/trac/;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
    }
} 
```

在这种情况下，我可以将我的 Ring 应用程序设置为在端口 3001 上服务；我有 Trac 在端口 3002 上提供服务，或者我可以有另一个 Ring 应用程序或其他什么。这两个应用程序都可以从 www.myserver.com（端口 80）访问，只是在不同的路径下。

# jboss - JBoss 是否预装了很多软件工具？

> ID：15732628
> 
> 赞同：0
> 
> 时间：2013-03-31T17:59:24.193
> 
> 标签：jboss, talend

在尝试安装 Talend MDM 时，文档中说了一些相当有趣的事情：

“JBoss Application Server 预装了 Talend MDM。”

这会让我的生活变得更轻松，但我不知道他们是想说 Talend 的 JBoss 可下载版本随 Talend MDM 一起提供，还是说开源 JBoss AS 是否真的随 Talend 一起提供？

如果是这样，JBoss 预装了哪些其他简洁的软件工具，如果是这样，我如何查看列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:07:35.943

这里有一个误解。文档的意思是，作为 Talend MDM 产品的一部分，JBoss Application Server 已交付。所以 JBoss 是 Talend MDM 的一个组件（实际上是核心组件）。不是反过来。

Talend MDM 实际上取决于产品随附的 JBoss 的精确版本（甚至可能在这里或那里进行修改），因此无法将 Talend MDM 安装到不同的 JBoss 实例中。

# java - 使用 JMeter 测试套接字

> ID：15732630
> 
> 赞同：12
> 
> 时间：2013-03-31T17:59:35.027
> 
> 标签：java, sockets, automated-tests, jmeter

我想使用 JMeter 来测试通过套接字进行通信的应用程序。它是在java中完成的。在服务器中，我有典型的

```
myServerSocket = new ServerSocket(1025); 
```

对于每个连接，线程都会读取并理解一行。在客户中，我有典型的

```
clientSocket = new Socket(hostCM, 1025);
out = new PrintWriter(clientSocket.getOutputStream(), true);
out.println("some bit string here"); 
```

我想使用 JMeter 或任何其他负载测试工具同时发送大量请求并进行压力和负载测试。但我不知道如何准备考试。有可能在 JMeter 中做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T05:21:59.067

尝试使用 JMeter 的 Java 请求采样器：http: [//jmeter.apache.org/usermanual/component_reference.html#Java_Request](http://jmeter.apache.org/usermanual/component_reference.html#Java_Request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T22:55:39.107

所以这是一个很好的信息，我能够通过设置重用连接和在 TCP 采样器中设置无延迟来让我的 jmx 工作。更多信息[在这里](https://jmeterworld.wordpress.com/2009/02/19/tcp-sampler-jmeter/)。

# java - Heroku Postgres：Eclipse 入门

> ID：15732632
> 
> 赞同：0
> 
> 时间：2013-03-31T17:59:47.790
> 
> 标签：java, eclipse, postgresql, plugins, heroku

我是新手`Heroku`，正在尝试设置一个简单的试用应用程序。我已经安装了[Eclipse Heroku 插件，并在](https://devcenter.heroku.com/articles/getting-started-with-heroku-eclipse)[Eclipse IDE for Java EE Developers (Juno edition)](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr2)上运行了一个简单的 Hello Heroku 应用程序。

我现在想合并一些简单的数据库功能，可能是[Heroku PostGres](https://addons.heroku.com/heroku-postgresql)。问题是我找到的所有关于如何做到这一点的信息都是通过命令行。

我的问题是，有没有办法`PostGres`通过 Eclipse IDE 合并？我该怎么做？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:47:42.793

您应该能够直接通过[http://postgres.heroku.com](http://postgres.heroku.com)或通过[http://dashboard.heroku.com](http://dashboard.heroku.com)提供数据库。配置完成后，您可以通过从[https://postgres.heroku.com/databases](https://postgres.heroku.com/databases)选择数据库来获取数据库的配置。一旦你选择了它；它应该显示您的所有连接信息。然后，您可以进入 Eclipse 中的数据浏览器视图并创建到该数据库的新连接。

# php - 在php中使用'substr'时如何在字符串末尾添加...？

> ID：15732635
> 
> 赞同：0
> 
> 时间：2013-03-31T18:00:00.477
> 
> 标签：php, substr

我有文字，例如：

```
$str = 'Hi there bla bla'; 
```

我对 $str 使用了 substr 函数

```
substr($str, 0 , 20); 
```

我得到了全文，但如果我有更长的文本，可以说：

```
$str = "Hi there bla bla Hi there bla bla Hi there bla bla";
$substred = substr($str, 20, 21); 
```

我以为我可以用

```
if ($substred) { echo "..."; }; 
```

但它不起作用..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T18:04:37.817

1.  始终检查，如果您要剥离的字符串有这 20 个字符以防止灾难
2.  如果您检查，您可以轻松添加条件以添加`...`到您的字符串

代码：

```
if (strlen($string) > 20) {
   $string = substr($string, 0, 20) . "..."; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:04:20.440

你需要用这样的点来呼应完整的声明

```
$str = "Hi there bla bla Hi there bla bla Hi there bla bla";
$sentence = substr($str, 0, 21);
echo $sentence."...."; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:06:12.123

这是你要找的吗？您可能应该先计算它，然后回显结果。 [http://codepad.org/OFo6MG6P](http://codepad.org/OFo6MG6P)

```
<?php
$str = 'Hi there bla bla';
echo 'Original: "'.$str.'", long one: "';
substr($str, 0 , 20);
$str = "Hi there bla bla Hi there bla bla Hi there bla bla";
$substred = substr($str, 20, 21);
if (strlen($str) > 20) { echo $substred."...\""; };
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T18:07:20.143

我假设您想回显一个文本，但如果它太长，则只回显其中的一部分并添加“...”。这可能有效..

```
if (strlen("$txt")> 20){
   echo substr($txt,0,20)."...";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T18:21:39.930

这不会直接回答问题，但如果字符串打算通过 HTML 显示，则可能很有用。它可以在 CSS 中通过使用值为 ellipsis 的样式属性 text-overflow 来完成。

$str

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-10T06:18:30.753

如果您希望它采用三元逻辑的内联形式

你可以这样做：

```
$string = "Hey, Hello World"
strlen($string) < 10 ? $string : substr($string, 0, 10) . '...'; 
```

> 输出：嘿，你好...

# c# - 如何启用 MultipleActiveResultSets

> ID：15732642
> 
> 赞同：20
> 
> 时间：2013-03-31T18:00:45.887
> 
> 标签：c#, asp.net, sql

我的代码中有以下连接字符串：

```
SqlConnection conn = new SqlConnection(WebConfigurationManager.ConnectionStrings["RaiseFantasyLeagueConnectionString"].ConnectionString); 
```

我的 webconfig 看起来像这样：

```
 <connectionStrings>
<add name="RaiseFantasyLeagueConnectionString" connectionString="Data Source=MATT-PC\SQLEXPRESS;Initial Catalog=Raise;Integrated Security=True" providerName="System.Data.SqlClient"/> 
```

有人可以告诉我在哪里可以为我的连接启用 MultipleActiveResultSets 吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-31T18:10:47.473

真的很简单，只要加

```
MultipleActiveResultSets=true; 
```

因此，在您的 web.config 中以这种方式更改连接字符串：

```
connectionString="Data Source=MATT-PC\SQLEXPRESS;" + 
                 "Initial Catalog=Raise;Integrated Security=True;" + 
                 "MultipleActiveResultSets=true;" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T18:19:25.520

试试这个代码

```
<connectionStrings>
<add name="RaiseFantasyLeagueConnectionString" connectionString="Data Source=MATT-PC\SQLEXPRESS;Initial Catalog=Raise;Integrated Security=True ;MultipleActiveResultSets=True;" providerName="System.Data.SqlClient";/> 
```

必须参考这篇[Msdn文章](http://msdn.microsoft.com/en-us/library/h32h3abf.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T17:33:34.280

```
 public static class ConfigurationService
    {
        static public string ConnectionString
        {

            get
            {

                try
                {               
                    // Specify the provider name, server and database.
                    string providerName = "System.Data.SqlClient";
                    string serverName = @"192.168.1.106\SQLEXPRESS";
                    string databaseName = "MyDatabaseName";

                    // Initialize the connection string builder for the
                    // underlying provider.
                    var sqlBuilder = new SqlConnectionStringBuilder();

                    // Set the properties for the data source.
                    sqlBuilder.DataSource = serverName;
                    sqlBuilder.InitialCatalog = databaseName;
                    sqlBuilder.IntegratedSecurity = false;
                    sqlBuilder.UserID = "Bob";
                    sqlBuilder.Password = "Bob1234";
                    sqlBuilder.MultipleActiveResultSets = true;
                    sqlBuilder.ApplicationName = "EntityFramework";

                    // Build the SqlConnection connection string.
                    string providerString = sqlBuilder.ToString();

                    // Initialize the EntityConnectionStringBuilder.
                    var entityBuilder = new EntityConnectionStringBuilder();

                    //Set the provider name.
                    entityBuilder.Provider = providerName;

                    // Set the provider-specific connection string.
                    entityBuilder.ProviderConnectionString = providerString;                 

                    // Set the Metadata location.
                    entityBuilder.Metadata = @"res://*/Models.MyDatabaseNameModel.csdl|res://*/Models.MyDatabaseNameModel.ssdl|res://*/Models.MyDatabaseNameModel.msl";

                    var result = entityBuilder.ToString();
                    return result;
                }
                catch (Exception)
                {

                }

                return string.Empty;
            }

        }
    } 
```

请注意**Models.MyDatabaseNameModel中的****Models**是 您的 VS 项目的文件夹名称。

# jquery - jQuery 砌体和 CSS3

> ID：15732643
> 
> 赞同：2
> 
> 时间：2013-03-31T18:00:48.297
> 
> 标签：jquery, css, css-transitions, jquery-masonry

我如何保持砖石布局，但在当前图像中加入 CSS3 过渡？

这是我的html

```
<body>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="masonry.js"></script>
<script>
$(function () {
      $('#container').masonry({
          columnWidth: 1,
          itemSelector: 'div'
      });
});
</script>

<div id="imagetrans">
  <img class="bottom" src="images/eventbox2.png" />
  <img class="top" src="images/eventbox.png" />
</div>

<div id="logo">
</div>

<div id="container" class="clearfix masonry">

<div class="item1"><img src="images/eventbox.png"></img></div>
<div class="item4"><img src="images/forumbox.png"></img></div>
<div class="item2"><img src="images/weekbox.png"></img></div>
<div class="item2"><img src="images/weekbox.png"></img></div>
<div class="item2"><img src="images/weekbox.png"></img></div>
<div class="item2"><img src="images/weekbox.png"></img></div>
<div class="item3"><img src="images/top10box.png"></img></div>
<div class="item1"><img src="images/eventbox.png"></img></div>

</div>

</body> 
```

和 CSS

```
html {
  height:100%;
}

body {
  width:900px;
  height:100%;
  margin:0 auto;
  margin-top:100px;
  background-image: url(images/gridbg.png);
}

#logo {
}

#container > div {
    margin: 5px;

#imagetrans {
  position:relative;
  height:281px;
  width:450px;
  margin:0 auto;
}

#imagetrans img {
  position:absolute;
  left:0;
  -webkit-transition: opacity 1s ease-in-out;
  -moz-transition: opacity 1s ease-in-out;
  -o-transition: opacity 1s ease-in-out;
  transition: opacity 1s ease-in-out;
}

#imagetrans img.top:hover {
  opacity:0;
} 
```

我已经设法分别做这两个，虽然我不知道我将如何将它们连接在一起，以便在砌体中使用的图像在悬停时会转换 - 抱歉，如果不能做到这一点，我对所有人来说还是新手这。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:36:28.597

给你：http: [//jsbin.com/ifequp/2](http://jsbin.com/ifequp/2)

使用演示右上角的编辑按钮查看代码。

jQuery Masonry 不会干扰您的悬停不透明度技术，因此任务是简单地将一个放入另一个中。

下次您寻求帮助时，请在[http://jsbin.com](http://jsbin.com)上发布您的 HTML/CSS/JS 。不要粘贴您的整个网站，只粘贴您遇到问题的部分。

PS 我觉得 1s 的过渡太令人不安了。考虑将时间降低到 0.3s 左右。

# c - 打开文件时出现 SIGSEGV 错误

> ID：15732647
> 
> 赞同：1
> 
> 时间：2013-03-31T18:01:14.780
> 
> 标签：c, file, segmentation-fault

在第 42 行，我收到了信号`Program received signal SIGSEGV, Segmentation Fault`。

从我所做的研究来看，我相信这与我的指针有关，但我真的不知道是什么。

这是调试期间的调用堆栈：

```
#0 7560ECC0 strxfrm_l() (C:\windows\syswow64\msvcrt.dll:??)
#1 75665864 putwchar() (C:\windows\syswow64\msvcrt.dll:??)
#2 756658D4 msvcrt!fscanf() (C:\windows\syswow64\msvcrt.dll:??)
#3 00401494 readFile(filename=0x404024 <_Jv_RegisterClasses+4210724> "C:\\input.txt", seed=0x75601162 <onexit+53>, minSize=0x75655bc4 <msvcrt!atexit+13>, maxSize=0x401ef0 <__do_global_dtors>, count=0x28ff94) (C:\Users\xxxxx\Dropbox\School\Spring 13\Computer Sci\Project 4_Pxxxxxx\main.c:42)
#4 00401375 main() (C:\Users\xxxxx\Dropbox\School\Spring 13\Computer Sci\Project 4_Pxxxxxxxx\main.c:28) 
```

相关代码：

这是主要的（）：

```
int main()
{
    int array[4], min, max, Ans, avg, count;

    readFile("C:\\input.txt", array[0], array[1], array[2], array[3]);
    validateInput(array[0], array[1], array[2], array[3]);
    generateNumbers(array, array[0], array[1], array[2], array[3]);
    calculateStatistics(array, 4, min, max, Ans, avg);
    printReport(array, 4, array[1], count, min, max, Ans, avg);

} 
```

* * *

```
35 bool readFile(char *filename, int *seed, int *minSize, int *maxSize, int *count)
36 {
37    int readCount;
38    FILE *fp; // FILE must be ALL CAPS
39    bool status = true;
40
41    fp=fopen("input.txt", "r"); // Opens the file for reading
42    readCount = fscanf(fp, "%d %d %d %d", seed, minSize, maxSize, count);
43    if(readCount != 4)
44    {
45        printf("At least one of the supplied values is invalid.\n");
46        status = false;
47    }
48    fclose(fp); // Closes the file
49    return status;
50 } 
```

程序试图做的是打开该文件并将值传递给另一个函数以生成一个随机数数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:20:25.957

这条线

```
readFile("C:\\input.txt", array[0], array[1], array[2], array[3]); 
```

是罪魁祸首。您正在传递值而不是指向值的指针。试试这个：

```
readFile("C:\\input.txt", &array[0], &array[1], &array[2], &array[3]); 
```

# perl - 如何使用 OLE 模块处理 excel？

> ID：15732650
> 
> 赞同：3
> 
> 时间：2013-03-31T18:01:35.800
> 
> 标签：perl, excel, automation, spreadsheet, ole

朋友们，我写了一个 Perl 脚本来将一组 CSV 文件转换成电子表格格式，使用[`Spreadsheet::WriteExcel`](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel-2.38/lib/Spreadsheet/WriteExcel.pm). 经过一些研究，我得出结论，没有将列宽固定为自动调整选项的选项。

所以我正在做的是在同一个脚本中，我使用[Win32::OLE](http://search.cpan.org/~jdb/Win32-OLE-0.1709/lib/Win32/OLE.pm) 模块打开了那个 XLS 文件，在执行此操作时我收到了一条错误消息

```
Can't use an undefined value as a HASH reference 
```

对应的代码是：

```
# spread sheet creation
my $workbook  = Spreadsheet::WriteExcel->new($file_name);
# ...
my $worksheet = $workbook->add_worksheet($work_sheet_name);
# ...
$worksheet->write($rowNum, $j,$_,$default_format); 
```

在这些步骤之后，我在同一个脚本中有更多的行：

```
my $Excel = Win32::OLE->GetActiveObject('Excel.Application')
    || Win32::OLE->new('Excel.Application');
$Excel->{'Visible'} = 0;    #0 is hidden, 1 is visible
$Excel->{DisplayAlerts}=1;  #0 is hide alerts

# Open File and Worksheet
my $return_file_name="C:\\Users\\admin\\Desktop\\Report_Gen\\$file_name";
print ">>$return_file_name<<";
my $Book = $Excel->Workbooks->Open($return_file_name); # open Excel file
foreach my $Sheet (in $Book->Sheets) {
    my $LastCol = $Sheet->UsedRange->Find({What=>"*", 
        SearchDirection=>xlPrevious,
        SearchOrder=>xlByColumns})->{Column};    # mentioned error is from this line
    my $mylastcol = 'A';
    for (my $m=1;$m<$LastCol;$m++) {$mylastcol++;}
    my @columnheaders = ('A:'.$mylastcol);
    foreach my $range (@columnheaders){
        $Sheet->Columns($range)->AutoFit();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:05:54.227

> 我编写了一个 Perl 脚本，使用 Spreadsheet::WriteExcel 将一组 CSV 文件转换为电子表格格式。经过一些研究，我得出结论，没有将列宽固定为自动调整选项的选项。

Autofit 是 Excel 中的运行时选项，因此无法使用 Spreadsheet::WriteExcel 通过文件格式创建它。

但是，Spreadsheet::WriteExcel 文档包含[一个如何模拟自动调整的示例，](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel/Examples.pm#Example%3a_autofit.pl)并解释了所涉及的一些问题。

# r - 如何将多行重塑为具有多列的单行

> ID：15732653
> 
> 赞同：2
> 
> 时间：2013-03-31T18:01:56.627
> 
> 标签：r, dataframe, reshape

对于使用过包的人来说，这似乎是一个明显的问题，`reshape`但我正在尝试使用它的功能，但我无法找出正确的语法！

让我们有以下数据框，

```
df <- data.frame(matrix(1:12,ncol=3),row.names=letters[1:4])

  X1 X2 X3
a  1  5  9
b  2  6 10
c  3  7 11
d  4  8 12 
```

我们如何将行绑定到列中以获得以下结果？

```
 X1.a X2.a X3.a X1.b X2.b X3.b X1.c X2.c X3.c X1.d X2.d X3.d
     1    5    9    2    6   10    3    7   11    4    8   12 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T18:23:46.843

这也可以：

```
vec <- c(t(df))
names(vec) <- c(outer(colnames(df), rownames(df), paste, sep="."))

## > vec
## X1.a X2.a X3.a X1.b X2.b X3.b X1.c X2.c X3.c X1.d X2.d X3.d 
##    1    5    9    2    6   10    3    7   11    4    8   12 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T18:18:04.870

由于您希望将其作为向量，因此不需要`reshape`pers。您可以只`unlist`使用它，然后使用它`setNames`来相应地设置名称。

```
df.t <- as.data.frame(t(df))
vec <- unlist(df.t, use.names=FALSE) # gives a vector not matrix/data.frame
vec.names <- do.call(paste, c(expand.grid(rownames(df.t), colnames(df.t)), sep="."))
vec <- setNames(vec, vec.names)

# X1.a X2.a X3.a X1.b X2.b X3.b X1.c X2.c X3.c X1.d X2.d X3.d 
#    1    5    9    2    6   10    3    7   11    4    8   12 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T18:09:08.820

这是一个：

```
m <- melt(cbind(df, rn=rownames(df)), id.vars='rn')
cast(m, ~ rn + variable)

##   value a_X1 a_X2 a_X3 b_X1 b_X2 b_X3 c_X1 c_X2 c_X3 d_X1 d_X2 d_X3
## 1 (all)    1    5    9    2    6   10    3    7   11    4    8   12 
```

或者如 Arun 所示，`acast`给出一个矩阵（没有附加`value`列）：

```
acast(m, . ~ variable+rn)
##      X1_a X1_b X1_c X1_d X2_a X2_b X2_c X2_d X3_a X3_b X3_c X3_d
## [1,]    1    2    3    4    5    6    7    8    9   10   11   12 
```

（请注意，由于公式被翻转，排列顺序相反。）

# ruby-on-rails - 如何对 Nokogiri 节点集进行排序？

> ID：15732654
> 
> 赞同：2
> 
> 时间：2013-03-31T18:01:57.323
> 
> 标签：ruby-on-rails, ruby, xml-parsing, nokogiri

我正在使用 Nokogiri 中的 XPath 解析从 Google 联系人 API 返回的 XML。

```
def getcontact
  doc = Nokogiri::XML.parse(open(url))
  doc.xpath('//xmlns:feed/xmlns:entry[xmlns:title[node()]]')
end 
```

我的控制器是：

```
def index
  @mycontacts = getcontact.to_a.paginate(:page => params[:page], :per_page => 30)
end 
```

我的看法是：

```
<% @mycontacts.each do |c| %>
  <p> Name: <%= c.xpath('xmlns:title').text %>  Email: <%= c.xpath('gd:email/@address').text %></p>
<% end %>

<%= will_paginate @mycontacts %> 
```

我想按字母顺序按标题排序，我想知道如何去做。我读过我可以使用`sort_by`，但是如何从数组中选择标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:33:02.763

以下应该工作

```
@mycontacts.sort!{|a, b| a.xpath('xmlns:title').text <=> b.xpath('xmlns:title').text} 
```

该块告诉它根据每个对象的 .xpath('xmlns:title').text 进行比较。

# php - 当我知道实际上有 2 条记录时，只能使用 while 循环检索 1 条记录？

> ID：15732655
> 
> 赞同：0
> 
> 时间：2013-03-31T18:01:57.937
> 
> 标签：php, mysql, sql, database

我目前对数据库有一个简单的查询，它应该从我的数据库中检索 2 个不同的项目。我知道它正在查找数据库并检索，但它似乎只检索 1 条记录。

我的问题是：为什么下面的代码从数据库中提取的记录不超过 1 条？

```
<?php

include('config.php');

$sql = "SELECT * FROM sponsoredBackground ORDER BY id DESC LIMIT 3";
$retval = mysql_query( $sql, $con ); 
if(! $retval )
{
  die('Could not get data: ' . mysql_error());
}

echo "<div id=\"headerSlider\">";

while($row = mysql_fetch_array($retval))
{

?>
<div class="headerContainer" style="background: transparent url('/images/<?php echo $row['imageName']; ?>') 0 0 no-repeat;">
        <div class="headerLeftContent">
            <div class="sponsoredBackground">
                <a href="http://<?php echo $row['url']; ?>">        
                    View this Opportunity
                </a>
            </div>
            <p style="font-size:18px; color:white;">Search by Location:</p>
                <select id="location" name="location" class="selectDropDown">
                    <option>Select Location...</option>
                    <option value="AcrossScotland">Across Scotland</option>
                    <option value="Aberdeen">Aberdeen</option>
                    <option value="Aberdeenshire">Aberdeenshire</option>
                    <option value="Angus">Angus</option>
                    <option value="Argyll/Bute">Argyll And Bute</option>
                    <option value="Clackmannanshire">Clackmannanshire</option>
                    <option value="Dumfries/Galloway">Dumfries And Galloway</option>
                    <option value="Dundee">Dundee</option>
                    <option value="EastAyrshire">East Ayrshire</option>
                    <option value="EastDunbartonshire">East Dunbartonshire</option>
                    <option value="EastLothian">East Lothian</option>
                    <option value="EastRenfrewshire">East Renfrewshire</option>
                    <option value="Edinburgh">Edinburgh</option>
                    <option value="EileanSiar">Eilean Siar</option>
                    <option value="Falkirk">Falkirk</option>
                    <option value="Fife">Fife</option>
                    <option value="Glasgow">Glasgow</option>
                    <option value="Highlands">Highlands</option>
                    <option value="Inverclyde">Inverclyde</option>
                    <option value="Midlothian">Midlothian</option>
                    <option value="Moray">Moray</option>
                    <option value="NorthAyrshire">North Ayrshire</option>
                    <option value="NorthLanarkshire">North Lanarkshire</option>
                    <option value="Orkney">Orkney</option>
                    <option value="Perth/Kinross">Perth And Kinross</option>
                    <option value="Renfrewshire">Renfrewshire</option>
                    <option value="ScottishBorders">Scottish Borders</option>
                    <option value="ShetlandIslands">Shetland Islands</option>
                    <option value="SouthAyrshire">South Ayrshire</option>
                    <option value="SouthLanarkshire">South Lanarkshire</option>
                    <option value="Stirling">Stirling</option>
                    <option value="WestDunbartonshire">West Dunbartonshire</option>
                    <option value="WestLothian">West Lothian</option>
            </select>
            <p style="font-size:18px; color:white;">Search by Category:</p>
            <select id="category" name="category" class="selectDropDown">
                    <option>Select Category...</option>
                    <option value="AllCategories">All Categories</option>
                    <option value="Financial">Financial</option>
                    <option value="Administration">Business And Administration</option>
                    <option value="Care">Care</option>
                    <option value="Construction">Construction</option>
                    <option value="Creative">Creative</option>
                    <option value="Energy">Energy</option>
                    <option value="Engineering">Engineering</option>
                    <option value="Food/Drink">Food And Drink</option>
                    <option value="Hair/Beauty">Hair And Beauty</option>
                    <option value="Hospitality">Hospitality</option>
                    <option value="IT">IT</option>
                    <option value="Landbased">Landbased</option>
                    <option value="Mechanics/Transport">Motor And Transport</option>
                    <option value="Retail">Retail</option>
                    <option value="Scientific">Scientific</option>
                    <option value="Sport/Leisure">Sport And Leisure</option>
            </select>
            <p style="font-size:18px; color:white;">Search by Type:</p>
            <select id="type" class="selectDropDown">
                    <option>Select Type...</option>
                    <option value="AllTypes">All Types</option>
                    <option value="Apprenticeships">Apprenticeships</option>
                    <option value="Enterprise">Enterprise</option>
                    <option value="College">College</option>
                    <option value="University">University</option>
                    <option value="WorkExperience">Work Experience</option>
                    <option value="Voluntary">Voluntary</option>
                    <option value="Graduate">Graduate</option>
            </select>
        </div>  
        <div class="headerCenterContent">   
        </div>
        <div class="headerRightContent">
            <?php include('featuredEvents.php'); ?>
        </div>      
 </div>

<?php    
} 

echo "</div>";
echo "</div>";

echo "</body>";
echo "</html>";

?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:49:17.950

很可能`featuredEvents.php`您在页面上包含一些 sql 内容，只需仔细检查并确保它没有变量`$retval`。

# asp.net - 从更新面板将控件添加到控件集合

> ID：15732663
> 
> 赞同：1
> 
> 时间：2013-03-31T18:02:44.210
> 
> 标签：asp.net, user-controls, updatepanel, controlcollection

遵循这两个线程： [如何在 C#.NET 中创建控件数组？](https://stackoverflow.com/questions/2203049/how-can-i-create-an-array-of-controls-in-c-net) [无法访问 UpdatePanel 中的控件](https://stackoverflow.com/questions/1954366/cannot-access-the-controls-inside-an-updatepanel)

我目前有这个：

```
ControlCollection[] currentControlsInUpdatePanel = new ControlCollection[upForm.Controls.Count];
foreach (Control ctl in ((UpdatePanel)upForm).ContentTemplateContainer.Controls)
{
    currentControlsInUpdatePanel.
} 
```

currentControlsInUpdatePanel 没有添加或插入方法。为什么我发布的第一个链接允许该用户添加到他的收藏中。这就是我想做的，在我的 upForm 更新面板中找到所有控件。但我不知道如何将其添加到我的控件集合中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:12:53.340

的`UpdatePanel`子控件集合是一个特殊的集合，它只包含一个子控件：它的模板容器。然后*该*控件包含 的所有子控件`UpdatePanel`（例如 a`GridView`或`Button`）。

正如在与问题相关的其他问题中指出的那样，递归地遍历子控制树是最好的方法。然后，当您找到需要添加控件的位置时，请`Controls.Add()`在该位置调用。

我的建议是另一种方法：`<asp:PlaceHolder>`在 中放置一个控件`UpdatePanel`并为其命名并为其添加控件。访问自身的控件集合应该没有特别的优势`UpdatePanel`，然后您就不必深入研究控件的实现细节（虽然它们不太可能改变，但会使代码更难阅读）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:14:25.903

我认为这段代码没有意义。您正在创建一个 ControlCollection 对象数组并尝试在其中存储 Control 对象。此外，由于 currentControlsInUpdatePanel 对象是一个数组，因此该对象上没有可用的 Add() 方法。

如果要使用 Add() 方法，请尝试将 currentControlsInUpdatePanel 创建为 List 对象。

例子：

```
List<Control> currentControlsInUpdatePanel = new List<Control>();
foreach(Control ctl in ((UpdatePanel)upForm).ContentTemplateContainer.Controls)
{
    currentControlsInUpdatePanel.Add(ctl);
} 
```

如果要继续使用数组来存储 Control 对象，则需要使用索引值来设置数组中的对象。

例子：

```
Control[] currentControlsInUpdatePanel = new Control[((UpdatePanel)upForm).ContentTemplateContainer.Controls.Count];
for(int i = 0; i < upForm.Controls.Count; i++)
{
    currentControlsInUpdatePanel[i] = ((UpdatePanel)upForm).ContentTemplateContainer.Controls[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:14:48.923

尝试使用

```
ControlCollection collection = ((UpdatePanel)upForm).ContentTemplateContainer.Controls; 
```

这为您提供了该控件集合中的所有控件。从那里您可以使用 CopyTo 将其复制到您需要的数组中：

```
Control[] controls = new Control[collection.Length];
collection.CopyTo(controls , 0); 
```

# php - 通过 php/shell 脚本在 linux 中创建文件？

> ID：15732666
> 
> 赞同：0
> 
> 时间：2013-03-31T18:03:09.470
> 
> 标签：php, linux, bash, shell

我正在尝试创建一个 php\shell 脚本来创建一个文件。我正在使用 exec() 命令来创建 shell 和 php 本身之间的链接。我也试图从用户那里接收数据，为此我有一个链接到脚本的 php 表单页面。

```
<?php
$username = $_POST['txt_username'];
exec("sudo echo $username > file.txt");
?> 
```

根据我的研究，我发现 exec() 不接受 $_POST 或 $_GET 变量。我还尝试过extract()、getenv() 和var_dump() 等函数，以及escapeshellcmd() 和escapeshellarg()。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:43:04.343

我会这样做。

```
<?php
    file_put_contents( 'file.txt', $_POST['txt_username'] );
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T19:11:20.000

这就是你要找的吗？

```
<?php

$uname = $_POST['UserName']; 
$file_to_write = "file.txt";
$open_file = fopen($file_to_write,'w') or die ("Cant Open File");
fwrite($file_to_write, $uname);
flcose($file_to_write);

?> 
```

# c++ - C ++列出x个数（必须大于0）的所有组合，加起来为y？

> ID：15732677
> 
> 赞同：-1
> 
> 时间：2013-03-31T18:04:07.240
> 
> 标签：c++

我们如何列出加起来为 y 的 x 个数的所有组合？这些数字必须大于 0。

注意：不接受 0。我们只能添加 x 个加起来等于 y 的正数。

```
#include <string>
#include <iostream>

// Prototype.
bool Function( unsigned int in_x, unsigned int in_y );

int main() {
    // Declarations.
    unsigned int x = 0;
    unsigned int y = 0;

    // Ask for x.
    std::cout << "\nEnter x:\n";
    std::cin >> x;

    // Ask for y.
    std::cout << "\nEnter y:\n";
    std::cin >> y;

    // Begin.
    Function( x, y );

    // Notify and stop.
    std::cout << "\nDone!\n";
    std::cin.ignore();
    ::getchar();

    // Exit with success.
    return 0;
};

bool Function( unsigned int in_x, unsigned int in_y ) {
    // Error handler.
    if( in_x == 0 ) {
        return false; }

    // Generate and list...
    // *Note: 0 is not accepted. We can only add x amount of positive numbers that adds up to y.
    // How do we do it?

    return false;
}; 
```

输入和输出示例：

示例 #1：

```
Enter x:
3

Enter y:
5

//          x               |   y
0>      3   +   1   +   1   =   5
1>      2   +   2   +   1   =   5
Count = 2

Done! 
```

示例 #2：

```
Enter x:
2

Enter y:
5

//          x       |   y
0>      3   +   2   =   5
1>      4   +   1   =   5
Count = 2

Done! 
```

x 是 2。这意味着，我们的函数只能生成两个加起来等于 y 的正数，即 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:17:15.227

编辑：对于任何不清楚 OPs 问题的人。他想找出将某个正整数 n 写为 k 个正整数之和的方法的数量，其中 k 是固定的。

OP，您需要在这里进行一些自己的阅读和研究，以便您可以向我们提供您自己的一些想法。我建议你阅读...

分区 [http://en.wikipedia.org/wiki/Partition_(number_theory)](http://en.wikipedia.org/wiki/Partition_(number_theory))

和 [http://en.wikipedia.org/wiki/Memoization](http://en.wikipedia.org/wiki/Memoization)

# node.js - Express & Socket.io 路由复制/复制/共享

> ID：15732678
> 
> 赞同：1
> 
> 时间：2013-03-31T18:04:12.493
> 
> 标签：node.js, routing, express, socket.io

我正在使用 nodejs 中的 expressjs 和 socket.io。我正在研究为通过 HTTP 或通过 websockets/socket.io 发出的请求分配相同的路由处理程序。

例如：

```
var responder = function(req, res){
  req.params //<-- {id: 'something...'}
}
app.get('/foo/:id', responder);
io.on('/foo/:id', responder); 
```

socket.io 似乎没有这种类型的路由功能。有谁知道图书馆/模块可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T19:25:21.400

有几种选择。

*   如果您想继续使用[express](/questions/tagged/express "显示标记为“快递”的问题")，请查看[express.io](https://github.com/techpines/express.io)。

*   如果你不介意使用一些不同的东西，[sails](https://github.com/balderdashy/sails)也可以让你做这种事情。

（**更新**：sails 现在也使用 express）

两者都已成功用于生产。

请注意，路由也很容易自己实现。如果您查看[express 是如何做到的，](https://github.com/visionmedia/express/tree/master/lib/router)我相信您将能够找到一个符合您需求的苗条实现。

祝你好运！让我知道您最终使用了什么以及它对您的工作方式。

# javascript - Javascript：设置元素值？

> ID：15732680
> 
> 赞同：2
> 
> 时间：2013-03-31T18:04:34.037
> 
> 标签：javascript, html, label

我想设置 a 的值`<label>`，如下所示：

```
<label for="idname">Value here...</label> 
```

使用 Javascript。`for`对于属性，我已经这样做了：

```
element.setAttribute("for", "idname"); 
```

有没有类似的东西`element.setValue()`可以用来设置标签的值？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:16:42.163

**[jsFiddle 演示](http://jsfiddle.net/2G6qE/1)**

遍历标签元素以查找如下属性`for="idname"`：

```
var labels = document.getElementsByTagName("label");
for( var i = 0; i < labels.length; i++ ){
 if( labels[i].outerHTML.indexOf('for="idname"') > -1){
  var UseLabelValue = labels[i].innerHTML;
  labels[i].innerHTML = "Replace Value";
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:07:06.173

```
<label for="idname">Value here...</label>

<script>
document.getElementsByTagName('label')[0].innerHTML='new value';
</script> 
```

[https://developer.mozilla.org/ru/docs/DOM/element.innerHTML](https://developer.mozilla.org/ru/docs/DOM/element.innerHTML)

[http://javascript.info/tutorial/searching-elements-dom](http://javascript.info/tutorial/searching-elements-dom)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:06:30.033

标签没有价值。如果要设置文本，可以使用

```
element.innerHTML = "some text"; 
```

# c - Best way to send images through sockets?

> ID：15732689
> 
> 赞同：-1
> 
> 时间：2013-03-31T18:05:32.707
> 
> 标签：c, node.js

Hi guys I'm just wondering what the best way would be to send an image through sockets?

My server is in Node.JS and my client is in C.

Thanks for letting me know :X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:09:54.610

通常这些事情是通过发送内容的长度和图像的二进制内容来完成的。鉴于您正在使用 JS，您可能必须在发送之前对字符串进行 BASE64 编码，并在接收之后进行解码。

# google-app-engine - 如何将电子邮件附件存储到 GAE Blobstore？

> ID：15732693
> 
> 赞同：1
> 
> 时间：2013-03-31T18:06:24.893
> 
> 标签：google-app-engine, email, blobstore, app-engine-ndb

假设应用收到一条[带有附件](https://developers.google.com/appengine/docs/python/mail/emailmessagefields)( `mail_message.attachments`) 的消息。现在，我想将消息保存在数据存储中。我不想在那里存储附件，所以我想只保留 blobstore 密钥。我知道我可以[将文件写入 blobstore](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)。我的问题：

1.  如何从邮件附件中提取文件；
2.  如何保留原始文件名；
3.  如何在数据存储中存储 blob 密钥（考虑到一封邮件可以包含多个附件`BlobKeyProperty()`，在这种情况下似乎不起作用）。

**更新。**对于 (1) ，可以使用[以下代码：](https://stackoverflow.com/questions/10695851/receiving-email-attachments-in-app-engine-python-errors-on-unicode-text-file)

```
my_file = []
my_list = []
if hasattr(mail_message, 'attachments'):
    file_name = ""
    file_blob = ""
    for filename, filecontents in mail_message.attachments:
        file_name = filename
        file_blob = filecontents.decode()
        my_file.append(file_name)
        my_list.append(str(store_file(self, file_name, file_blob))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:41:13.857

您应该使用 NDB 而不是（旧）数据存储。在 NDB 中，您可以使用重复和结构化的重复属性来保存 BlobProperties 和文件名列表。

请参阅：[https ://developers.google.com/appengine/docs/python/ndb/properties](https://developers.google.com/appengine/docs/python/ndb/properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T11:46:26.747

这是我最终要做的：

```
class EmailHandler(webapp2.RequestHandler):
    def post(self):
        '''
        Receive incoming e-mails
        Parse message manually
        '''
        msg = email.message_from_string(self.request.body) # http://docs.python.org/2/library/email.parser.html
        for part in msg.walk():
            ctype = part.get_content_type()
            if ctype in ['image/jpeg', 'image/png']:
                image_file = part.get_payload(decode=True)
                image_file_name = part.get_filename()
                # save file to blobstore
                bs_file = files.blobstore.create(mime_type=ctype, _blobinfo_uploaded_filename=image_file_name)
                with files.open(bs_file, 'a') as f:
                    f.write(image_file)
                files.finalize(bs_file)
                blob_key = files.blobstore.get_blob_key(bs_file) 
```

`blob_key`s 在数据存储中存储为`ndb.BlobKeyProperty(repeated=True)`。

# java - Apache Commons CLI 中的 DefaultParser

> ID：15732696
> 
> 赞同：36
> 
> 时间：2013-03-31T18:06:38.993
> 
> 标签：java, command-line-interface, apache-commons

我想试用 Apache Commons CLI，并想从其网页上的“使用”部分开始。

[http://commons.apache.org/proper/commons-cli/usage.html](http://commons.apache.org/proper/commons-cli/usage.html)

现在，该示例建议创建一个`DefaultParser`，但我能找到的最接近的声音是`BasicParser`. 这是要使用的东西，我错过了什么吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-04T13:18:36.833

我用`GnuParser()`而不是，`DefaultParser()`它运作良好。

`CommandLineParser parser = new GnuParser();`

更新：在 CLI 的 1.3.1 版中，`GnuParser()`现已弃用。所以我简单地添加了

`import org.apache.commons.cli.DefaultParser;`

，现在我使用`CommandLineParser parser = new DefaultParser();`

了，一切都很好！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-17T14:24:11.400

您使用的是什么版本的 CLI？直到 1.3 快照才添加 DefaultParser。

[http://commons.apache.org/proper/commons-cli/apidocs/org/apache/commons/cli/DefaultParser.html](http://commons.apache.org/proper/commons-cli/apidocs/org/apache/commons/cli/DefaultParser.html)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-15T22:26:37.817

我在使用 commons-cli 1.2 遵循[相同的使用指南](http://commons.apache.org/proper/commons-cli/usage.html)时遇到了同样的问题，并找到了以下可用的解析器：

*   `org.apache.commons.cli.BasicParser`
*   `org.apache.commons.cli.GnuParser`
*   `org.apache.commons.cli.PosixParser`

它们都扩展了 org.apache.commons.cli.Parser 并且只实现了该`flatten`方法。您可以查看[Parser 的 javadoc](http://commons.apache.org/proper/commons-cli/javadocs/api-release/index.html?org/apache/commons/cli/Parser.html)（和实现解析器）以获取更多信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-09T11:02:02.850

这个 DefaultParser 类属于 Apache CLI 1.3，因此要使用它，您必须使用 jar varsion 1.3 更新您的类路径

# c# - 检查后代是否匹配 C#

> ID：15732701
> 
> 赞同：2
> 
> 时间：2013-03-31T18:07:08.563
> 
> 标签：c#, regex, filtering, html-agility-pack

我正在做一个项目，我基本上使用 html 敏捷包从网页中抓取内容，直到我使用下面的代码获得我需要的点头

```
foreach (HtmlNode tr in bodyNode.SelectNodes("//tr")){
    //tr.Descendants("span").Where(n => n.InnerHtml.Contains("display:none")).ToList().
    //ForEach(n => n.Remove()); ;
} 
```

因此，在每个循环之后，我都会获得类似于我在下面粘贴的内容的 html 内容

[http://pastebin.com/DLVykNXU](http://pastebin.com/DLVykNXU)

我需要做的是检查节点是否匹配。基本上我需要删除

```
<span style="display:none">what ever value here</span>
div style="display:none">what ever value here</div> 
```

以及其他一些具有不同 ID 和类名称的 div 和 Span。但是我上面写的代码似乎让我失望了，因为它删除了整个点头，而没有只删除标签中的内容并标记它自己。

如果专家可以帮助我，我将非常感激，我仍然是学习 C# 的学生，所以如果代码不完美，我很抱歉。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:10:39.450

正如你所说......你必须做一些技巧。

```
foreach (var tr in doc.DocumentNode.SelectNodes("//tr")) {
    var style = tr.SelectSingleNode(".//style");
    //Find the classes and ids with {display:none}
    var matches = Regex.Matches(style.InnerText, @"(\.|#)(.+?)\s*{\s*display\s*:\s*none");

    //Here we will store the classes & ids we'll need to remove
    List<string> classes = new List<string>();
    List<string> ids = new List<string>();

    //Storing the ids and classes
    foreach (Match m in matches) {
        var type = m.Groups[1].Value;
        if (type == ".")
        {
            classes.Add(m.Groups[2].Value);
        }
        else {
            ids.Add(m.Groups[2].Value);
        }
    }

    foreach (var n in tr.SelectNodes(".//*")) {
        if (Remove(n, classes, ids)) {
            n.Remove();
        }
    }

    var proxy = tr.SelectSingleNode("./td[2]/span").InnerText;
    var port = tr.SelectSingleNode("./td[3]").InnerText.Trim('\r', '\n', ' ');
} 
```

并有以下方法

```
//Remove the ones that have {display:none}, and the ones with the ids & classes provided.
static bool Remove(HtmlNode x, IList<string> classes, IList<string> ids) {
    var classAttr = x.GetAttributeValue("class", "");
    var idAttr = x.GetAttributeValue("id", "");
    return (x.Name == "span" && x.GetAttributeValue("style", "") == "display:none") ||
           (x.Name == "div" && x.GetAttributeValue("style", "") == "display:none") ||
           (x.Name == "span" && classes.Contains(classAttr)) ||
           (x.Name == "div" && classes.Contains(classAttr)) ||
           (x.Name == "span" && ids.Contains(idAttr)) ||
           (x.Name == "id" && ids.Contains(idAttr)) ||
           (x.Name == "style");
} 
```

`Remove`您可以在该方法中添加更多过滤器。由于您正在编写 C# 代码，因此您可以在那里检查您想要的任何内容，而不仅仅是与*XPath*表达式相关的内容。

该代码给了我以下代理列表：

```
190.199.36.220:8080
177.139.137.107:3128
103.247.23.90:8080
222.124.130.203:8080
14.140.241.242:8080
175.103.37.10:8080
110.77.183.113:3128
54.243.51.203:8118
200.90.179.90:8080
213.152.173.137:8080
187.17.212.162:8080
62.201.207.14:8080
77.123.76.178:8080
189.76.212.254:3128
89.218.224.234:9090
221.179.173.170:8080
187.84.56.42:3128
118.99.79.13:8080
211.86.157.110:3128
189.38.3.122:3128
2.135.238.178:9090
2.135.238.2:9090
122.50.38.128:3128
217.11.185.251:3128
82.200.254.2:9090
37.59.82.253:8080
83.111.38.131:3128
85.118.227.76:3128
182.30.249.13:8080
124.88.154.3:6673
111.13.87.150:80
190.85.37.90:8080
219.117.232.133:3128
211.100.47.138:8990
46.32.21.195:8080
107.18.121.126:8080
118.97.191.203:8080
119.195.32.211:3128
2.133.92.242:9090
202.164.217.18:8080
222.124.214.194:3128
79.140.17.253:3128
61.138.104.30:1080
201.45.116.138:3128
190.98.209.168:3128
190.204.222.183:8080
200.199.173.122:3128
197.159.16.58:8080
223.4.233.164:3128
212.93.195.229:3128 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:33:12.293

如果你想提取内容，它会更容易，如果你选择它

```
"//tr//span[contains(@style, 'display:none')]/text()" 
```

同样对于`span`具有特定`id`or`class`属性的 s

```
"//tr//span[@id='123']/text()" 
```

或者

```
"//tr//span[contains(@class, 'cl17')]/text()" 
```

如果你愿意，你可以结合所有这些条件

```
"//tr//span[contains(@style, 'display:none') or @id='123' or contains(@class, 'cl17')]/text()" 
```

# php - 将空输入字段验证为 smarty 中的正确值

> ID：15732706
> 
> 赞同：1
> 
> 时间：2013-03-31T18:07:42.670
> 
> 标签：php, validation, input, smarty, field

```
<td><input type="text" name="remove" value="Remove this text"></td> 
```

如何在我的模板文件中直接使用 smarty 验证。文本框的正确值为空。

我试图避免使用 Javascript，我知道我可以在模板文件或 PHP 中做到这一点。我还没有看到任何真正好的例子。

我很困惑，我会很感激一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:19:43.130

您无法使用 smarty 验证任何内容。Smarty 用于模板，这意味着：Smarty 仅用于生成输出。

如果您想检查该元素是否为空，您必须依赖 javascript 或您的服务器端语言，例如 PHP。

使用 smarty 大致按照您的方向进行任何事情的唯一方法是这样的：

```
<td>
    {if $element_not_empty}<div class="error">Please remove the text!</div>{/if}
    <input type="text" name="remove" value="Remove this text">
</td> 
```

但是，当然，变量 $element_not_empty 将由 PHP 生成，因此您将再次进行服务器端验证；）

# android - 列索引顺序 SQLite 创建表

> ID：15732713
> 
> 赞同：5
> 
> 时间：2013-03-31T18:08:23.277
> 
> 标签：android, sqlite

这是我用来创建表的查询

```
create table site_table(
   _id integer primary key autoincrement,
   name_site text,
   url text,
   login text,
   pass text
); 
```

我打电话`Cursor.getColumnNames()`并注意到列顺序是`id, login, pass, name, url`.

所以，如果我想要一个值，我必须通过 index 来获取它`Cursor.getString(index)`。在我调试之前，我一直在搞砸调用错误的索引，但现在我想知道，为什么 SQLite 会这样保存？为什么它不遵循我创建的方式`id, name_site, url, login and pass`？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T18:13:35.097

> 所以，如果我想要一个值，我必须通过索引 Cursor.getString(index) 来获取它

因此，例如出于这个原因，您应该始终使用

```
c.getString(c.getColumnIndex("ColName")); // or better getColumnIndex(CONSTANT) 
```

这种方法可以拯救我们所有人，并确保您永远不会得到错误的结果。通常建议使用这种方法，并且在单独的类中存储`COLUMN_NAMES`也是`CONSTANTS`非常非常有用和有效的做法。

**注意：**顺序取决于投影，即`select name, lastname from table`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:10:51.217

该数据按您在查询中请求的顺序排序，而不是您创建表的顺序。因此，您可能更改了查询中生成所述游标的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T18:13:03.897

光标中的列顺序取决于投影。为确保您使用正确的列索引，请使用光标`c.getString(c.getColumnIndexOrThrow("COLUMN_NAME"))`在哪里。`c`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:24:09.157

我只是亲身体验了一下：

游标的列的索引作为 a 的结果

SELECT * FROM mytable WHERE ...

查询有时（并非总是）与 SQLITE 数据库浏览器在“数据库结构”选项卡中显示为列顺序的顺序不同。因此，通过 getColumnIndex 引用列似乎是唯一安全的方法。

# android - 无法动态填充表

> ID：15732729
> 
> 赞同：0
> 
> 时间：2013-03-31T18:10:07.993
> 
> 标签：android, android-view, android-tablelayout

我正在尝试从数据库中获取数据并将其内容以表格格式放置。我在网上查找了各种教程并将我的代码构造如下，但它根本不会以表格格式显示数据。使用 TextView 时工作正常。这是我的代码，请知道我哪里出错了。没有遇到强制关闭，只是数据不会显示！

```
package com.example.callandmessagemanager;

import android.app.Activity;
import android.database.Cursor;
import android.graphics.Color;
import android.os.Bundle;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;
import android.widget.Toast;

public class ViewEncryptedMessages extends Activity{

    LinearLayout L;
    quer q;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewencryptedmessages);
        L=(LinearLayout)findViewById(R.id.LinearLayout1);
        TableLayout TL = (TableLayout)findViewById(R.id.TL);

        q = new quer(this);
        q.open();
        Cursor c1;
        c1=q.fetchAllTodos();
        long c0=1;
        int count = c1.getCount();

        if(c1!=null)
        {
            do
            {
                TextView t;

                Cursor c=q.fetchTodo(c0);
                String message = c.getString(c.getColumnIndexOrThrow(quer.KEY_MESSAGE));
                String number = c.getString(c.getColumnIndexOrThrow(quer.KEY_NUMBER));

                TableRow tr = new TableRow(this);
                TextView tv1 = new TextView(this);
                TextView tv2 = new TextView(this);
                createView(tr, tv1, message);
                createView(tr, tv2, number);
                TL.addView(tr);

                /*LayoutParams la=new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
                t=new TextView(this);
                t.setLayoutParams(la);

                t.setText(message+" \t"+number);
                L.addView(t);*/

                c0++;
            }while(c0<=c1.getCount());
            q.close();
        }
        else
        {
            q.close();
            Toast.makeText(this, "No Encrypted Messages Received yet", Toast.LENGTH_SHORT).show();
        }

    }   

    public void createView(TableRow tr, TextView t, String viewdata) {
        t.setText(viewdata);
        //adjust the porperties of the textView
        t.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        t.setTextColor(Color.DKGRAY);
        t.setBackgroundColor(Color.CYAN);
        t.setPadding(20, 0, 0, 0);
        tr.setPadding(0, 1, 0, 1);
        //tr.setBackgroundColor(Color.BLACK);
        tr.addView(t); // add TextView to row.
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:17:07.370

试试这个

在你的`createView`方法中

替换这个

`t.setLayoutParams(newLayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));`

有了这个

```
 t.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT,TableRow.LayoutParams.WRAP_CONTENT)); 
```

每当您在向 Table 添加视图时添加布局参数时，您必须确保您的布局参数是 TableRow。

# google-app-engine - XMLHttpRequest 状态 0 的哪个回调？

> ID：15732736
> 
> 赞同：0
> 
> 时间：2013-03-31T18:10:57.940
> 
> 标签：google-app-engine, google-chrome, xmlhttprequest

我偶尔会看到失败的 XMLHttpRequest.send()。从 Chrome 的网络面板中，我看到状态为 0 - 请参见下面的 .har 文件。运行 send() 的代码成功率 >99%，但非常偶尔（~1/300）它返回 0。

我的问题是：我如何抓住这个？是否有回调可以捕获它？

我目前正在使用 onload 和 onerror：

```
var xhr = new XMLHttpRequest();
xhr.onload = function(){};
xhr.onerror = function(){}; 
```

这两个都没有被调用，所以它默默地失败了。其他一些需要注意的事项：

1.  服务器日志中没有请求的证据
2.  Chrome 的控制台中没有错误消息
3.  服务器是谷歌应用引擎

这是 .har 文件输出。##=已编辑。

```
{
  "startedDateTime": "2013-03-30T23:52:20.972Z",
  "time": 97,
  "request": {
    "method": "GET",
    "url": "https://www.#######.com/project/auth_upload?to_sign=PUT%0A%0A%0A%0Ax-amz-date%3ASat%2C%2030%20Mar%202013%2023%3A52%3A20%20GMT%0A/s3.#####.com/######.mp4%3FpartNumber%3D50%26uploadId%3D#################.w--&asset_id=#############&project_id=###########",
    "httpVersion": "HTTP/1.1",
    "headers": [
      {
        "name": "Referer",
        "value": "https://www.######.com/console/###########"
      },
      {
        "name": "User-Agent",
        "value": "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22"
      }
    ],
    "queryString": [
      {
        "name": "to_sign",
        "value": "PUT%0A%0A%0A%0Ax-amz-date%3ASat%2C%2030%20Mar%202013%2023%3A52%3A20%20GMT%0A/s3.#######.com/############.mp4%3FpartNumber%3D50%26uploadId%3D##############"
      },
      {
        "name": "asset_id",
        "value": "###########"
      },
      {
        "name": "project_id",
        "value": "###############"
      }
    ],
    "cookies": [],
    "headersSize": 595,
    "bodySize": 0
  },
  "response": {
    "status": 0,
    "statusText": "",
    "httpVersion": "HTTP/1.1",
    "headers": [],
    "cookies": [],
    "content": {
      "size": 0,
      "compression": 0
    },
    "redirectURL": "",
    "headersSize": 13,
    "bodySize": 0
  },
  "cache": {},
  "timings": {
    "blocked": 0,
    "dns": -1,
    "connect": -1,
    "send": -1,
    "wait": -1,
    "receive": null,
    "ssl": -1
  }
} 
```

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:35:36.700

似乎 statusCode 0 表示即使没有发送标头也表示响应为空，这很难弄清楚，您需要自己找出来

但是您说响应没有到达您的函数是因为您正在使用事件来侦听响应`load`，`error`实际上您不应该完全依赖这两个错误，请考虑在您的请求获取之前发生超时的情况完成然后“超时”事件将被触发而不是“错误”

相反，您应该使用`readystatechange`将在请求的每次状态更改时调用的事件，您还可以跟踪与未收到响应相关的超时或错误

```
httpRequest.onreadystatechange = stateChangeHandler;

stateChangeHandler = function() {
      // The readyState can be 4 values:
      //  0 - uninitialized
      //  1 - loading
      //  2 - loaded
      //  3 - interactive
      //  4 - complete
      //
      // readyState 0 - 3 can be completely ignored by us, as they are only updates
      // about the current progress. Only on readyState 4, should we continue and
      // start checking for the response status.
      if (xmlHttpRequest.readyState != 4) {
            return;
      }

      // Check HTTP Response code
      if (xmlHttpRequest.status != 200) {
            // response is ok process it
      } else {
            // there was some error
      }
} 
```

**参考：**

1.  [https://developer.mozilla.org/en-US/docs/HTTP#HTTP_Response_Codes](https://developer.mozilla.org/en-US/docs/HTTP#HTTP_Response_Codes)
2.  [http://www.w3.org/TR/XMLHttpRequest/#event-xhr-readystatechange](http://www.w3.org/TR/XMLHttpRequest/#event-xhr-readystatechange)
3.  [http://msdn.microsoft.com/en-us//library/ms534361%28en-us,VS.85%29.aspx](http://msdn.microsoft.com/en-us//library/ms534361%28en-us,VS.85%29.aspx)
4.  [http://www.w3.org/TR/XMLHttpRequest/#the-status-attribute](http://www.w3.org/TR/XMLHttpRequest/#the-status-attribute)

# r - 输出中的四舍五入以将接近零的小量显示为零

> ID：15732738
> 
> 赞同：5
> 
> 时间：2013-03-31T18:11:38.100
> 
> 标签：r, output, rounding, precision, significant-digits

我希望我的 R 控制台的输出看起来可读。为此，我希望 R 将我所有的数字四舍五入到最接近的 N 位小数。我取得了一些成功，但它并不完全有效：

```
> options(scipen=100, digits=4)
> .000000001
[1] 0.000000001
> .1
[1] 0.1
> 1.23123123123
[1] 1.231 
```

我希望 0.000000001 显示为简单的 0。如何做到这一点？让我更具体一点：我想要对整个 R 会话进行全局修复。我意识到我可以通过四舍五入来开始修改事物，但这比简单地为整个会话设置事物的帮助要小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T01:53:58.427

查看`?options`，特别是`digits`and`scipen`选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T18:24:46.990

尝试

```
sprintf("%.4f", 0.00000001)
[1] "0.0000" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T00:46:00.437

结合 Greg Snow 和 Ricardo Saporta 已经给你的答案，得到正确答案：`options('scipen'=+20) and options('digits'=2)`，结合`round(x,4)`。

`round(x,4)`将四舍五入接近零的小数量。

要么对回归结果进行一次四舍五入并将其存储：

```
x <- round(x, 4) 
```

...否则是的，如果您不想存储其舍入值，则每次显示少量时都必须这样做。在您的情况下，既然您说接近零的小量有效地表示零，那么您为什么不四舍五入呢？

如果由于某种原因您需要同时保留精确版本和圆形版本，那么就这样做。

```
x.rounded <- round(x, 4) 
```

# javascript - 像谷歌图片预览这样的jQuery脚本

> ID：15732740
> 
> 赞同：1
> 
> 时间：2013-03-31T18:11:52.003
> 
> 标签：javascript, jquery, jquery-plugins

我正在寻找像谷歌图像预览这样的脚本（网络中的示例）。我附上了我要找的图片

![在此处输入图像描述](https://i.stack.imgur.com/xzPb1.jpg)

我花了一些时间查看这样的脚本/示例，但什么也没有。如果有人知道名字或链接，请给我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T18:27:29.987

我找到了一个脚本，但它与 Google Image 的不完全一样，但具有相同的功能。该脚本是免费的，并使用 CSS 和 JavaScript 以 HTML 编码。

![在此处输入图像描述](https://i.stack.imgur.com/lNylo.jpg)

[点击这里查看脚本](http://tympanus.net/codrops/2013/03/19/thumbnail-grid-with-expanding-preview/)

# charts - 使用highcharts的可滚动堆积柱形图？

> ID：15732741
> 
> 赞同：0
> 
> 时间：2013-03-31T18:11:55.760
> 
> 标签：charts, highcharts, scrollable, stacked

我需要创建一个堆积柱形图来显示为如下需求捕获的数据。

显示员工针对不同项目（Project1、Project2、Project3）的工作时间。

我尝试使用 Highcharts。当我尝试为图表启用可滚动功能时，由于员工数量可能更多，因此标签（员工姓名）不会显示在 X 轴上。

此外，滚动似乎不正确。

任何人都可以帮助我使此图表可滚动，并将员工姓名显示为 X 轴上的标签。

我已经分享了我到目前为止创建的图表，

[http://jsfiddle.net/sri421/Yyq5N/1/](http://jsfiddle.net/sri421/Yyq5N/1/)

代码也如下， $(function() { $('#container').highcharts('StockChart', {

```
 chart: {
        type: 'column',
        inverted:true
    },
      title: {
            text: 'Total Hours worked Vs Different Projects'
        },
      xAxis: {
            categories: ['user1', 'user2', 'user3', 'user4', 'user5','user6', 'user7', 'user8', 'user9', 'user10','user11', 'user12', 'user13', 'user14', 'user15','user16', 'user17', 'user18', 'user19', 'user20'],
             labels: {
                rotation: -45,
                align: 'right',
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }

        },
    yAxis: {
            min: 0,
            title: {
                text: 'Total Hours Worked'
            },
            stackLabels: {
                enabled: true,
                style: {
                    fontWeight: 'bold',
                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'red'
                }
            }
        },

        plotOptions: {
            column: {
                stacking: 'normal'

            }
        },
    scrollbar: {
        enabled:true

    },

    rangeSelector: {
        enabled: false
    },

    series: [{
            name: 'Project1',
            data: [5, 3, 4, 7, 2,5, 3, 4, 7, 2 ,5, 3, 4, 7, 2,5, 3, 4, 7, 2]
        }, {
            name: 'Project2',
           data: [2, 2, 3, 2, 1,5, 3, 4, 7, 2, 5, 3, 4, 7, 2,5, 3, 4, 7, 2]
        }, {
            name: 'Projecct3',
            data: [3, 4, 4, 2, 5,5, 3, 4, 7, 2, 5, 3, 4, 7, 2,5, 3, 4, 7, 2]
        }]
}); 
```

}); 谢谢， 斯里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:05:30.747

您可以使用 amCharts 制作可滚动/堆叠柱形图：http: [//jsfiddle.net/zeroin/mmmv2/](http://jsfiddle.net/zeroin/mmmv2/)

编码：

```
 AmCharts.ready(function () {
    var chartData = [
        {category:"user1", val1:1, val2:1, val3:1},
        {category:"user2", val1:2, val2:1, val3:2},
        {category:"user3", val1:1, val2:1, val3:4},
        {category:"user4", val1:2, val2:1, val3:2},
        {category:"user5", val1:1, val2:1, val3:5},
        {category:"user6", val1:2, val2:1, val3:2},
        {category:"user7", val1:1, val2:1, val3:3},
        {category:"user8", val1:2, val2:1, val3:1},
        {category:"user9", val1:1, val2:1, val3:3},
        {category:"user10", val1:2, val2:1, val3:4},
        {category:"user11", val1:1, val2:1, val3:3},
        {category:"user12", val1:2, val2:1, val3:3},
        {category:"user13", val1:1, val2:1, val3:3},
        {category:"user14", val1:2, val2:1, val3:1}
    ];

    var chart = new AmCharts.AmSerialChart();
    chart.pathToImages = "http://www.amcharts.com/lib/images/";
    chart.dataProvider = chartData;
    chart.categoryField = "category";

    var valueAxis = new AmCharts.ValueAxis();
    valueAxis.stackType = "regular";
    valueAxis.totalText = "[[total]]";
    chart.addValueAxis(valueAxis);

    var graph1 = new AmCharts.AmGraph();
    graph1.valueField = "val1";
    graph1.type = "column";
    graph1.fillAlphas = 1;
    chart.addGraph(graph1);

    var graph2 = new AmCharts.AmGraph();
    graph2.valueField = "val2";
    graph2.type = "column";
    graph2.fillAlphas = 1;
    chart.addGraph(graph2);

    var graph3 = new AmCharts.AmGraph();
    graph3.valueField = "val3";
    graph3.type = "column";
    graph3.fillAlphas = 1;
    chart.addGraph(graph3); 

    var chartScrollbar = new AmCharts.ChartScrollbar();
    chart.addChartScrollbar(chartScrollbar);

    chart.write("chartdiv");
}); 
```

# javascript - 将 HTML 分页，拆分长段落

> ID：15732742
> 
> 赞同：6
> 
> 时间：2013-03-31T18:12:02.097
> 
> 标签：javascript, jquery, html, dom

好吧，我什至不确定这是否可以用我目前的方法来完成。我正在尝试将 HTML 文档的内容放入当前视口大小的页面中。我目前正在通过遍历文档的所有元素并检查它们的顶部偏移量是否在当前页面的边界内来做到这一点，只要不是，这个偏移量就成为新页面的开始，页面边界设置为这个偏移量加上视口的高度。

我面临的问题是，通常会有一个元素（例如段落）的高度大于视口本身，因此即使算法将此元素放在新页面的开头，其内容也会溢出. 我试图找到一种方法来拆分这些元素，使第一个切片占据页面的剩余部分。

这带来了进一步的困难。即使我能找到一种方法来确定一个段落的文本有多少仍然适合页面的其余部分，而这本身已被证明非常困难，我仍然会遇到 DOM 在拆分后没有立即更新的问题段落，这会弄乱下一页的计算，或者至少迫使我打破递归，这会使算法更加复杂。

欢迎任何有关如何以第一个切片占用页面剩余空间的方式拆分段落的建议。到目前为止，这是我的代码：

**编辑：** *值得注意的是，这只适用于没有绝对定位或浮动元素的非常简单的 HTML。就我而言，这不是问题。*

```
var elementIndex = -1;
var pages = 1;
var pageBoundary = 0;
var pageBreaks = [];

function calculatePages() {
    //first page boundary is window height
    pageBoundary = $(window).height();
    //do calculations
    iterateElements($("body"));
    //print results
    console.log(pageBreaks);
}

function iterateElements(parent) {

    $.each($(parent).children(), function(i, e) {
        //increase current element index
        elementIndex = elementIndex + 1;
        //get element's top offset
        var offsetTop = $(e).offset().top;
        //get the last position that the element occupies
        var elementSpan = offsetTop + $(e).outerHeight();

        if ($(e).children().length == 0) { //only leaf nodes will be set as page breaks
            //element's start position is outside page boundary
            if (offsetTop >= pageBoundary) {
                //mark page start with red in order to visualize
                $(e).attr("style", "border-top: 1px solid red");

                //increase page count
                pages = pages + 1;
                //new page starts at element's top, next page boundary
                //is element's starting position plus the viewport's height
                pageBoundary = offsetTop + $(window).height();
                //store index of page break
                pageBreaks.push(elementIndex);
            }
            //element's start position is inside current page, but contents overflow
            else if (elementSpan >= pageBoundary) {
                //NO IDEA WHAT TO DO HERE
                //NEED A WAY TO SPLIT LARGE ELEMENTS
            }
        } 

        iterateElements(e);
    });
}

$(function() {
    calculatePages();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:16:38.230

我做过类似的事情。我采取的方法是检查页面容器的高度。如果它大于最大值，我知道元素需要移动到下一页。

如果有多个元素，我可以将最后一个元素移到下一页。

如果只有 1 个元素，则需要拆分。让我们将此元素称为 X。因此您可以在下一页中创建一个新的段落/部分，我们将其称为元素 Y。您现在可以将单词或字符从元素 X 的末尾移动到元素 Y 的开头，直到元素的高度X 适合页面。

在此之后，您可以重复下一页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:52:09.363

你可以有一个索引文件并制作框架。我知道这是老派 - 但也许？

```
 <html>
    <head>
    <title>Example for Stackoverflow</title>
    </head>
    <frameset rows="28,*,0" frameborder="0" border="0" framespacing="0">
        <frame name="topNav" src="top_nav.html" scrolling="no" noresize>
    <frameset cols="110,*,150" frameborder="0" border="0" framespacing="0">
        <frame name="menu" src="menu_1.html" marginheight="0" marginwidth="0" scrolling="auto" noresize>
        <frame name="content" src="content.html" marginheight="0" marginwidth="0" scrolling="auto" noresize>
        <frame name="related" src="related.html" marginheight="0" marginwidth="0" scrolling="auto" noresize>
    </frameset>
    <noframes>
    <p>This section (everything between the 'noframes' tags) will only be displayed if the users' browser doesn't support frames. You can provide a link to a non-frames version of the website here. Feel free to use HTML tags within this section.</p>
    </noframes>

    </frameset>
    </html> 
```

# artificial-intelligence - 模式识别和算法与神经网络

> ID：15732745
> 
> 赞同：1
> 
> 时间：2013-03-31T18:12:12.870
> 
> 标签：artificial-intelligence

我正在读一本关于大脑如何使用模式层次结构来识别和建模概念和感觉信息的书，比如写在书中的字母和单词，或物理对象，或其他类似性质的事物。但我对如何实施这样一个系统的简单版本感到有点困惑。我对此有几个问题。

*   首先，在这种情况下，模式的所有特征到底是什么？
*   在这种模式层次结构中，最基本的元素是什么？
*   有没有办法通过算法而不是神经网络来识别它们？
*   如果我编写一个程序来从一行像素中形成图案，这可能有点容易，但是我将如何使用二维像素数组来做到这一点？
*   视觉模式和数学模式之间有区别吗？
*   与图像中的特征序列相比，人们识别数字序列中的模式的方式有什么不同吗？

我真的很想得到一些帮助来理解这一点，因为我发现的大部分信息都需要我到目前为止还没有获得的出色的数学背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:32:59.553

数学模式和图像特征的识别都使用相同类型的“认知”，但您有各种不同的实现，专门针对每一个。在图像中，您正在处理像素颜色（例如：255,255,255）及其与周围像素的关系（二维数组）。

为了便于计算，大多数算法都经过以下步骤：

*   遍历每条水平线，然后遍历每条垂直线并创建一个像素差异数组（最好在 L*a*b 颜色空间中）。
*   然后通过调整一些参数，您可以隔离在 x 和 y 方向上连续的独特“对象”
*   创建对象的逻辑树及其在图像上的位置

如果您想做一些不同的事情，那么您将使用快速傅立叶变换并遵循那里的模式。如果您使用常规数字模式，则原理是相同的。

# python - 在 Python 中比较大字符串的好方法？

> ID：15732752
> 
> 赞同：3
> 
> 时间：2013-03-31T18:12:48.057
> 
> 标签：python, string, compare, beautifulsoup, match

我构建/扩展了一个 Python 网络爬虫，它通过一个站点并构建一个字典来存储它找到的内容（如果有人感兴趣，这是我使用的模板，它非常好：[http ://berrytutorials.blogspot.ca/2010/03 /simple-web-crawler-in-python-using.html](http://berrytutorials.blogspot.ca/2010/03/simple-web-crawler-in-python-using.html)）。字典比这多一点，但就这个问题而言，单个项目本质上是 form `{page_url : html}`，其中 html 是字符串形式的页面的整个 html。

爬虫被构建为不会两次索引同一页面，但模板作者指出的一个潜在问题很容易出现，因为 url 参数不同，爬虫将相同的页面识别为不同的页面。例如，www.example.com/path?param=1 和 www.example.com/path?param=2 都将被添加到字典中，因为 url 在技术上是不同的，即使每个页面的内容可能相同，或几乎相同。我能想到解决这个问题的唯一方法是在抓取完成后将存储在字典中的大量 html 字符串相互比较，看看是否有任何匹配 - 基本上只是

```
 if html_str_1 == html_str_2:
        # eliminate one of them 
```

对于每一个可能的配对。但显然这将非常耗费资源和时间。

有谁知道更好的方法来实现这一点？我还希望能够检测到几乎相同的 html，这些 html 可能仅相差几个微不足道的字符。我是 Python 新手，所以我对那里的各种库不是很熟悉。也许 BeautifulSoup 可以做这样的事情？

（注意：我知道对于我给出的示例，我可以在分析它们之前从 url 中解析出任何参数，但这只是重复 html 的一个可能原因，我想涵盖所有内容。此外，不同的参数可能会导致截然不同某些情况下的页面。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:20:23.937

创建 HTML 的[哈希值](http://docs.python.org/2/library/hashlib.html)并进行比较。我会推荐`hashlib.sha512()`。

```
In [1]: from hashlib import sha512

In [2]: html = '<p>This is a test</p>'

In [3]: sha512(html).digest()
Out[3]: '\xb4\xda\xc2\xcb\x16\xd3\\\xa1F\x8a\\\xe5-z\xc6\xd1\xf95\x0f\x13\xf6k\xb4\xfd\xb9I\xde\xf0\x8dQ\xff\xdb\x9d\xa2\x0f\x1b\x8al\xfe\xac\xce\xe4n*\xd3\xd8M\xf3E\x05\xc6\xc9\xeejV8\xf8\x9a:\x86|q\x1f\x1c' 
```

您还应该更改字典以存储哈希；

```
{page_url : (hash, html)} 
```

**编辑：**散列非常快。我创建了一个 10MB 的随机数据文件：

```
dd if=/dev/random of=random.dat bs=1M count=10 
```

阅读并散列它：

```
In [6]: with open('random.dat') as infile:
    data = infile.read()
   ...:     

In [7]: %timeit sha512(data).digest()
10 loops, best of 3: 61.5 ms per loop 
```

所以你可以在大约 60 毫秒内散列 10MB。

MD5 散列的速度是原来的两倍；

```
In [4]: %timeit md5(data).digest()
10 loops, best of 3: 24.1 ms per loop 
```

不过，发生冲突（两个不同的文本产生相同的哈希值）的可能性要大一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T18:21:25.413

使用 md5 之类的东西对 HTML 进行哈希处理，然后使用两个字典：一个将 URL 映射到内容哈希，另一个将内容哈希映射到实际内容。例如，而不是：

```
dict1[ url ] = html 
```

采用：

```
import md5

h = md5.new()
h.update(html)
k = h.hexdigest()
dict1[ url ] = k
dict2[ k ] = html 
```

这样，相同的页面将只存储一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T18:30:01.680

散列是要走的路。我会选择 MD5，因为它速度很快——这对于加密目的来说是一个缺点，但是使用昂贵的哈希（如 SHA512）进行索引只会浪费你的周期。

由于网页通常包含基于其自己的请求选项的链接（如您的示例中），并且可能是显示获取时间的时间戳，因此您需要在散列它们之前清理/规范化获取的页面。删除您认为在相同页面之间可能会有所不同的任何内容，对结果进行散列，并将其用作字典键。这样，您可以检查一个新页面是否在名义上 O(1) 时间内已知散列 - 由 python 的 dict 管理提供。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T18:22:40.590

> 有谁知道更好的方法来实现这一点？

一个理想的方法是首先

*   比较内容的大小
*   后跟一个随机的字符子集
*   其次是全部内容

> 我还希望能够检测到几乎相同的 html，这些 html 可能仅相差几个微不足道的字符。

Python 的库 difflib 对此提供支持，但它占用大量资源。

# algorithm - 确定有序数组复杂度之间的交集

> ID：15732758
> 
> 赞同：0
> 
> 时间：2013-03-31T18:13:14.477
> 
> 标签：algorithm, sorting, complexity-theory

**问题：**给定两个大小为 n 的排序数组 A[] 和 B[]，检查它们是否有非空交集（我不需要交集本身，只需要决定）

**解决方案：**在 B[] 中对 A[] 的每个元素进行二进制排序会得到 O(n lg n) 的解决方案。从头到尾迭代每个数组（做一些与 Mergesort 中的 Merge 非常相似的事情）给出 O(n) 解决方案。

我想知道是否有更好的（就复杂性而言）解决方案。我很确定没有，但我一直在寻找“嘿，如果你给我一个更好的解决方案，我可以在 o(n lg n) 中对向量进行排序，这是不可能的”--kind-of-argument

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:57:22.890

再次阅读问题 - 。`"Given two **sorted** arrays ..."`

不需要最初建议的排序，这会引导您找到`O(n)`执行类似合并排序过程的解决方案。

您不能比类似合并排序的过程做得更好，请记住，如果找到交叉点，您可以提前停止。

**如果它们没有被排序：**

从技术上讲，基于哈希映射的解决方案是`O(n)`- 将 A 中的所有元素插入哈希映射 ( `O(n)`)。`O(n)`查找 B ( )中的每个元素。

对于排序解决方案，由于您只需要一个决策，因此您只需对 A 进行排序并遍历 B，`O(log n)`在 A 中对 B 中的每个元素进行查找，并在找到项目后停止。您不会做得比 更好`O(n log n)`，但如果尽早找到匹配项，您可以减少多达一半的工作。

# c# - WPF：按钮找不到命令（多个视图模型）

> ID：15732761
> 
> 赞同：0
> 
> 时间：2013-03-31T18:13:34.237
> 
> 标签：c#, wpf, xaml, mvvm, icommand

这个问题可能很容易解决，但我在将命令从 viewModel 绑定到 xaml 视图文件时遇到了一些严重问题。您可能已经猜到，我们的应用程序基于 MVVM 设计模式，目前有 2 个窗口（2 个 XAML 文件）和 2 个视图模型（cs 文件）。

MainWindow.xaml 绑定到 MainViewModel，其中所有命令都存储为 ICommand 对象。一切正常，所有按钮都能正常工作并到达它们在 viewModel 中绑定的命令。然后，一个按钮会创建一个名为 MultipleQuizWindow.xaml 的新窗口，该窗口绑定到一个名为 MultipleQuizViewModel.cs 的新 ViewModel，但这就是有趣的开始。按钮能够找到用作标签的内容，并且看起来它也可以找到命令（运行时输出菜单中没有错误）但是当我单击按钮时没有任何反应？几乎已经尝试了所有方法，并且开始不知道为什么它可以在不执行 ICommand 的情况下找到它。这是创建新窗口的按钮的代码：

(MainViewModel.cs)

```
 public void StartQuiz() {
        MultipleQuizWindow newWindow = new MultipleQuizWindow(this);
        newWindow.Show();
    } 
```

然后调用新的 Window 并且特定的 viewModel 获取 MainViewModel 作为构造函数的参数。

MultipleQuizWindow.xaml.cs

```
 public partial class MultipleQuizWindow : Window {

    public MultipleQuizViewModel vmQuiz;

    public MultipleQuizWindow(MainViewModel mvm) {
        InitializeComponent();
        vmQuiz = new MultipleQuizViewModel(mvm);
        this.DataContext = vmQuiz;
    }
} 
```

然后是设计窗口的xaml代码：

MultipleQuizWindow.xaml

```
<Window x:Class="VocApp.View.MultipleQuizWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:view="clr-namespace:VocApp.View"
    xmlns:viewmodel="clr-namespace:VocApp.ViewModel"
    Title="MultipleQuizWindow" Height="300" Width="300">
<Grid Name="Grid1">
    <Grid.RowDefinitions>
        <RowDefinition Height="56*" />
        <RowDefinition Height="43*" />
        <RowDefinition Height="43*" />
        <RowDefinition Height="43*" />
        <RowDefinition Height="43*" />
        <RowDefinition Height="42*" />
    </Grid.RowDefinitions>
    <Button Content="{Binding Ans1}" Name="Answer1" HorizontalAlignment="Left" Margin="108,10,0,0" Grid.Row="1" VerticalAlignment="Top" Width="75" Height="22" Command="{Binding Ans1Command}"/>
    <Button Command="{Binding Ans2Command}" Content="{Binding Ans2}" Name="Answer2" HorizontalAlignment="Left" Margin="108,10,0,0" Grid.Row="2" VerticalAlignment="Top" Width="75" Height="22"/>
    <Button Command="{Binding Ans3Command}" Content="{Binding Ans3}" Name="Answer3" HorizontalAlignment="Left" Margin="108,10,0,0" Grid.Row="3" VerticalAlignment="Top" Width="75" Height="22"/>
    <Button Command="{Binding Ans4Command}" Content="{Binding Ans4}" Name="Answer4" HorizontalAlignment="Left" Margin="108,13,0,0" Grid.Row="4" VerticalAlignment="Top" Width="75" Height="22"/>
    <Button Command="{Binding StartQuizCommand}" Content="{Binding Ans5}" Name="Answer5" HorizontalAlignment="Left" Margin="108,10,0,0" Grid.Row="5" VerticalAlignment="Top" Width="75" Height="22"/>
    <TextBlock Text="{Binding Text}" Name="QuestionBox" HorizontalAlignment="Left" Margin="32,10,0,0" TextWrapping="Wrap" VerticalAlignment="Top" RenderTransformOrigin="-1.48,-0.688" Height="36" Width="220"><Run Language="da-dk" Text=""/></TextBlock>
</Grid> 
```

最后是窗口绑定的viewModel（注意它可以找到按钮绑定的内容，但不能找到ICommands）

多测验视图模型

```
public class MultipleQuizViewModel : ViewModelBase {

    internal MainViewModel mvm;

    private string ans1;
    public string Ans1 {
        get {
            return ans1;
        }
        set {
            ans1 = value;
        }
    }
    private string ans2;
    public string Ans2 {
        get {
            return ans2;
        }
        set {
            ans2 = value;
        }
    }
    private string ans3;
    public string Ans3 {
        get {
            return ans3;
        }
        set {
            ans3 = value;
        }
    }
    private string ans4;
    public string Ans4 {
        get {
            return ans4;
        }
        set {
            ans4 = value;
        }
    }
    private string ans5;
    public string Ans5 {
        get {
            return ans5;
        }
        set {
            ans5 = value;
        }
    }
    private string text;
    public string Text {
        get {
            return text;
        }
        set {
            text = value;
        }
    }
    MultipleQuiz Quiz;
    public ICommand Ans1Command { get; private set; }
    public ICommand Ans2Command { get; private set; }
    public ICommand Ans3Command { get; private set; }
    public ICommand Ans4Command { get; private set; }
    public ICommand Ans5Command { get; private set; }

    public MultipleQuizViewModel(MainViewModel mvm) {
        this.mvm = mvm;
        this.Quiz = mvm.model.GenerateQuiz() as MultipleQuiz;
        string[] words = Quiz.AllAnswers;
        text = "Please translate the word " + Quiz.word.Wordstring;
        ans1 = words[0];
        ans2 = words[1];
        ans3 = words[2];
        ans4 = words[3];
        ans5 = words[4];
        Ans1Command = new RelayCommand(Answer1);
        Ans2Command = new RelayCommand(Answer2);
        Ans3Command = new RelayCommand(Answer3);
        Ans4Command = new RelayCommand(Answer4);
        Ans5Command = new RelayCommand(Answer5);
    }

    public void Answer1() {
        text = "please work";
        if (Quiz.ansIndex == 1) {
            text = "correct!";
        }
        else {
            text = "wrong!";
        }
    }

    public void Answer2() {
        if (Quiz.ansIndex == 2) {
            text = "correct!";
        }
        else {
            text = "wrong!";
        }
    }

    public void Answer3() {
        if (Quiz.ansIndex == 3) {
            text = "correct!";
        }
        else {
            text = "wrong!";
        }
    }

    public void Answer4() {
        if (Quiz.ansIndex == 4) {
            text = "correct!";
        }
        else {
            text = "wrong!";
        }
    }

    public void Answer5() {
        if (Quiz.ansIndex == 5) {
            text = "correct!";
        }
        else {
            text = "wrong!";
        }
    }
} 
```

我知道那里有大量代码，但我真的希望有人能够告诉我出了什么问题。很明显，这些命令永远不会执行，Visual Studio 仍然能够通过 xaml 中的绑定找到它们。

该项目使用 GalaSoft 顺便说一句。

在此先感谢任何可能提供可以引导我朝着正确方向前进的小费的人:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:00:19.023

为什么要在命令方法中设置私有字段“文本”（public void Answer1）？您应该设置公共属性 Text（大写 T）并让它实现 INotifyPropertyChanged (OnPropertyChanged("Text");) 以告知视图该属性已更改。

这些命令很可能正在工作，但是由于我提到的文本问题，您没有看到 UI 更改。尝试在 Answer1() 方法中放置一个断点，看看它是否在单击按钮时被击中，如果是，则问题出在 Text 属性中。

除此之外，您的测验窗口中有错字 *Button Content="{Binding Ans1}"... 应该是 "{Binding Ans1Command}"

# android - 从数据库中调用图像和文本

> ID：15732762
> 
> 赞同：0
> 
> 时间：2013-03-31T18:13:34.823
> 
> 标签：android, database

我发现很难描述我在寻找什么。我还没有建立一个数据库。但我想做的是建立一个数据库，它会调用活动家或用户正在寻找的信息的屏幕截图。我读的越多关于android，我想学的越多，但似乎无法理解DB。

我的计划是有一个列表视图，当用户点击那里的汽车模型时，可以说列表视图将消失，并且这个新的信息页面出现供他们阅读，仅此而已。

我的问题是根据我的想法建立数据库的最佳方法是我知道新手在这里得到了很多坚持，因为不清楚他们在问什么希望我做到了谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:20:46.350

你必须更清楚你的需求......据我了解，当单击一个项目时，你需要启动一项活动。要获取汽车的文本和描述等信息，请将数据库的光标移动到单击的位置。从那里你可以从你的数据库中获取所有数据，并为下一个活动输入意图。然后在您的下一个活动中从意图中检索数据。

如果这是您想要的，那么我可以给您一些其他链接，请提供更清晰的描述。

编辑：流程是这样的

1.  使用 SimpleCursorAdapter 从数据库中填充您的列表视图。

如果您不知道如何创建数据库，请使用此[示例](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)代码项目。这[就是](http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/)您将使用 simplecursoradapter 的方式，但您将使用自己的游标来查询数据库。像：

```
Cursor cursor = db.rawQuery("Select * from tbl_name",SelectionArgs[]); 
```

1.  然后你将在 ListView 上使用 setOnItemClickListener

    listview.setOnItemClickListener(new OnItemClickListener() { @Override public void onItemClick(AdapterView parent, View view, int position, long id) { cursor.moveToPosition(position); String something = cursor.getString(cursor.getColumnIndex("something") ); String somethingelse = cursor.getString(cursor.getColumnIndex("somethingelse")); Intent nextActivity = new Intent(MainActivity.this,NextActivity.class); nextActivity.put("Key",Value);//放置你合适的具有不同键值的字符串 MainActivity.this.startActivity(nextActivity); } });

2.  然后在下一个活动中检索这些字符串，例如：

    意图 mintent = getIntent(); String something = mintent.getString("Key");//这里放你在上次活动中分配的键。最终设置你的布局视图...

# mysql - 无序的 SQL 复合主键（任一顺序的整数对必须是唯一的）

> ID：15732764
> 
> 赞同：5
> 
> 时间：2013-03-31T18:13:37.300
> 
> 标签：mysql, sql, union, composite-primary-key

我有一个带有主键 _id 的用户的 MySQL 表，我想将友谊（在其他用户的朋友列表上的可见性）表示为带有 userId 外键对的表。我在想类似的事情：

```
CREATE TABLE UserFriendships (
  userIdA INT NOT NULL,
  userIdB INT NOT NULL,
  PRIMARY KEY (userIdA, userIdB),
  FOREIGN KEY (userIdA) REFERENCES Users(_id)
  FOREIGN KEY (userIdB) REFERENCES Users(_id)
) 
```

据我了解，这将允许`(userIdA = 2, userIdB = 7)`和`(userIdA = 7, userIdB = 2)`作为不同的行插入。我想要每个友谊一行，也就是说每对 userIds 一行。

有谁知道我可以如何改善这一点？即使满足上述约束条件，要获取用户 foo 的所有朋友的列表，我也必须进行联合，例如：`SELECT userIdB AS friendUserId WHERE userIdA = foo UNION SELECT userIdA WHERE userIdB = foo`。这是完成该查询的最佳方式，还是我应该考虑更改我的架构？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T18:29:19.803

您可以使用 a`TRIGGER BEFORE INSERT`来执行业务规则：

*   `userIdA`始终是具有较低 ID`userIdB`的用户，始终是具有较高 ID 的用户

这样， (A,B) 和 (B,A) 的组合都会导致具有相同主键的相同列顺序。

```
DELIMITER |
CREATE TRIGGER enforce_friendship_id_order BEFORE INSERT ON UserFriendships
  FOR EACH ROW BEGIN
    SET @lowerId := IF(NEW.userIdA < NEW.userIdB, NEW.userIdA, NEW.userIdB);
    SET @higherId := IF(NEW.userIdA > NEW.userIdB, NEW.userIdA, NEW.userIdB);
    SET NEW.userIdA = @lowerId;
    SET NEW.userIdB = @higherId;
  END;
|
DELIMITER ; 
```

# r - 在 R 中按分位数绘图

> ID：15732766
> 
> 赞同：1
> 
> 时间：2013-03-31T18:13:40.063
> 
> 标签：r, ggplot2

我想情节`foo ~ bar`。但是，我不想查看确切的数据，我宁愿`bar`分成分位数，并`mean(foo)`为每个分位数绘图（所以我的最终绘图将有 5 个数据点）。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T18:41:12.073

```
 foo <- rnorm(100)
 bar <- rnorm(100)

  mn.foo.byQ10bar <- tapply(foo, cut(bar, quantile(bar, (0:5)/5, na.rm=TRUE)), mean)

> mn.foo.byQ5bar
 (-3.31,-0.972] (-0.972,-0.343]  (-0.343,0.317]   (0.317,0.792]    (0.792,2.71] 
     0.13977839      0.03281258     -0.18243804     -0.14242885     -0.01696712 

 plot(mn.foo.byQ5bar) 
```

这是一个相当标准的任务，Harrell 的 Hmisc 包的`cut2`函数有一个很好的 gr= 参数，让您只需为组数指定一个整数即可。我也喜欢它，因为剪切操作的间隔是左闭的，而不是 R 默认的右闭。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T18:38:02.523

您可以将很多这些行组合成更简洁的代码，但在这里它被分解了

```
# Sample Data: 
x <- 1:100;   y <- rnorm(x)

# Number Of Groups
N <- 5

# quantiles
Q.y <- quantile(y, probs=seq(0, 1, length=(N+1)))
Q.x <- quantile(x, probs=seq(0, 1, length=N))

# means of y by quantile
means.y <- c(by(y, cut(y, Q.y), mean))

# plot them 
qplot(Q.x, means.y) 
```

# python - 将 JSON 发布到 REST 服务，然后对其进行迭代

> ID：15732767
> 
> 赞同：-1
> 
> 时间：2013-03-31T18:13:42.807
> 
> 标签：python, json, flask

我有以下问题。我正在尝试将 JSON 对象发布到我拥有的 REST 服务，然后对其进行迭代以执行一些数据库操作。我在下面的代码中获取 REST 中的对象，但我不明白如何使用它。我认为“数据”是一个字符串对象，我可以做一个 json.loads(data) 但这不起作用。

```
data = request.stream.read() 
```

我正在努力实现类似

```
for dat in data:
    result = dat['someJsonAttribute'] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:16:53.487

你如何发布你的数据？您应该在请求中包含正确的 mimetype/编码。之后，您可以像读取[`request.json`](http://flask.pocoo.org/docs/api/#flask.Request.json)python 字典一样读取上传的 json。

# c++ - C++ Arena 分配器可用内存总是一半

> ID：15732768
> 
> 赞同：2
> 
> 时间：2013-03-31T18:14:12.637
> 
> 标签：c++, memory-management

```
const int size = 50000;
char pool[size];

int freeMemory(void)
{
int freemem = 0;
for(int i = 0; i < size; i++)
{
    if(pool[i] == NULL)
    {
        freemem++;
    }
    i++;
}

return freemem;
} 
```

如果我调用 freeMemory()，返回的大小始终是最初声明的大小的一半。25000 特别在这里即使我没有在池本身初始化任何东西。为什么是这样？我需要先初始化一些东西吗？

```
void initialize(void)
{
//Don't quite understand if I need to initialize something here? 
} 
```

而且我也试图避免使用 new 运算符。原因是我正在尝试手动管理池内的内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:16:22.400

因为你的 for 循环中有一个额外的`i++;`语句。所以每次迭代实际上都会增加迭代器两次，有效地让你只循环一半的时间。

删除`i++;`for 循环末尾的行。

# nltk - NLTK 和 scikit-learn 中的伯努利朴素贝叶斯结果不同

> ID：15732769
> 
> 赞同：1
> 
> 时间：2013-03-31T18:14:16.387
> 
> 标签：nltk, scikit-learn, document-classification

使用 NLTK 中的 Bernoulli Naive Bayes 算法和 scikit-learn 模块中的算法对文本（仅分为两类）进行分类时，我得到了完全不同的结果。尽管两者之间的总体准确度相当（尽管远非相同），但 I 型和 II 型错误的差异是显着的。特别是，NLTK 朴素贝叶斯分类器给出的 I 类错误多于 II 类错误，而 scikit-learn 则相反。这种“异常”似乎在不同的特征和不同的训练样本中是一致的。是否有一个原因 ？两者谁更值得信赖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:47:38.263

NLTK 没有实现伯努利朴素贝叶斯。它实现多项朴素贝叶斯，但只允许二进制特征。

# ruby-on-rails-3 - 过滤关联的多态模型

> ID：15732772
> 
> 赞同：0
> 
> 时间：2013-03-31T18:14:37.313
> 
> 标签：ruby-on-rails-3, activerecord, polymorphic-associations

我有`Favorite`允许`Entries`并由`Feeds`用户保存的模型。

```
class User < ActiveRecord::Base
   has_many :favorites
   has_many :favorite_feeds, :through =>  :favorites, :source => :favorable, :source_type => "Feed"
   has_many :favorite_entries, :through =>  :favorites, :source => :favorable, :source_type => "Entry"
 end

 class Favorite < ActiveRecord::Base
   belongs_to :user
   belongs_to :favorable, :polymorphic => true
   attr_accessible :user, :favorable
 end

 class Feed < ActiveRecord::Base
   has_many :favorites, :as => :favorable
   has_many :fans, :through => :favorites, :source => :user
 end

 class Entry < ActiveRecord::Base
   has_many :favorites, :as => :favorable
   has_many :fans, :through => :favorites, :source => :user
 end 
```

我现在需要`Entries`在页面上显示 ALL 并指示是否`current_user`已将每个添加`Entry`为`favourite`. 目前调用是从数据库`@entry.fans`中获取每个，这是低效的。`User`我需要一种过滤此调用的方法，以仅获取属于的收藏夹，`current_user`因为我不需要任何其他记录。

我可以在控制器的内存中执行此操作，但我认为有一种方法可以简单地选择s 收藏夹并使用 Active::Record`current_user`将其加入模型。`Entries`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:29:16.940

控制器：

```
@entries = Entry.all
@user_favorite_entry_ids = current_user.favorite_entries.pluck(:id) 
```

看法：

```
<% @entries.each do |entry| %>
<%= @entry.id %>: <%= @entry.id.in?(@user_favorite_entry_ids) ? 'favorite of current user' : 'not' %>
<% end %> 
```

或者，如果你真的喜欢在数据库中做事：

```
@entries = Entry.select('entries.*, count(favorites.id) as current_user_favorite').joins("left join favorites on favorites.favorable_id = entries.id and favorites.favorable_type = 'Entry' and favorites.user_id = #{current_user.id}") 
```

进而：

```
<% @entries.each do |entry| %>
  <%= @entry.id %>: <%= (@entry.current_user_favorite.to_i > 0) ? 'favorite of current user' : 'not' %>
<% end %> 
```

# mysql - MySQL/MariaDB sql/password.c 中的安全漏洞

> ID：15732775
> 
> 赞同：-4
> 
> 时间：2013-03-31T18:15:04.720
> 
> 标签：mysql, mariadb

今天在扫描我的网站时，它显示了“MySQL/MariaDB sql/password.c 中的漏洞”

我不明白这是什么，以及如何解决它。我用谷歌搜索了它，但我没有找到关于这个问题的太多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:24:17.180

指 2012 年 6 月在 MySQL 和衍生产品的某些版本中报告的漏洞。该漏洞的性质是每次尝试登录 MySQL 时有 256 分之一的机会，它会验证您的登录尝试，即使您输入错误的密码。

[http://www.iss.net/security_center/reference/vuln/MySQL_Brute_Force.htm](http://www.iss.net/security_center/reference/vuln/MySQL_Brute_Force.htm)

仅当您使用非默认编译器标志从源代码构建 MySQL 时，该漏洞才会显现。

MySQL、MariaDB 和 Percona Server 的几乎所有二进制包都是**安全**的，即它们**不**包含漏洞。

IIRC，一些用于 Ubuntu Linux 的 MySQL 版本很容易受到攻击，但这只是已知的 MySQL 二进制发行版或任何易受攻击的衍生产品。

如果您升级到版本 5.1.63、5.5.12 或 5.6.6 或每个这些分支的更高版本，则该漏洞在任何情况下都会得到修复。

* * *

回复您的评论：

您不必升级 PHP。这个特殊的错误是在 MySQL 服务器中，而不是在 PHP 中。

如果您有一个易受攻击的 MySQL Server 软件包（据我所知，只有 Ubuntu 软件包易受攻击），或者您以易受攻击的方式自己从源代码编译 MySQL Server，那么您应该将 MySQL Server 升级到至少一个我在上面列出的版本。

# java - 我需要在同一个片段中引用一个片段

> ID：15732778
> 
> 赞同：0
> 
> 时间：2013-03-31T18:15:41.967
> 
> 标签：java, android

我有一个片段，我试图从中调用一个函数。

这段代码在我的一项活动中有效，但如果可能的话，我需要在片段中使用它。

这是我正在调用的函数

```
new ActivityDumpUtil(AboutFragment.this, outfile, new ActivityDumpUtil.ActivityDumpCallback() { 
```

我知道问题是 AboutFragment.this

我如何在 AboutFragment 片段中调用它？这是扩展夏洛克片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:26:45.887

我想如果它在一个内部工作`Activity`，那么第一个参数应该是一个`Activity`，而不是一个`Fragment`。您可以通过调用来获得对 a`Activity`内部主机的引用。希望这可以帮助。`Fragment``getActivity()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:46:02.957

这`AboutFragment.this`是您正在执行的 AboutFragment 实例的引用。在 Activity 中，您需要为其提供要在 ActivityDumpUtil 的构造函数中传递的 AboutFreagment 的特定实例。FragmentManager 可能是您想要的。

# jquery - 从 jquery 滑块中获取值

> ID：15732781
> 
> 赞同：1
> 
> 时间：2013-03-31T18:15:50.300
> 
> 标签：jquery, slider

我正在创建一种注册表单，我已经使用 FORM 标签来表示名称等，我还需要滑块。我用 jquery 创建了我的滑块。有什么方法可以从这个滑块“转发”值，就像我从 FORM 标签输入中一样，用于 php 脚本？谢谢

```
<p style="text-align: center">Amount: <span id="amountDisp" style="color: #ff0000">500</span><div id="amount_slider"></div></p>

function () {
$("#amount_slider").slider({
            handle: "myhandle",
    orientation: "horizontal",
    range: false,
    min: 500,
    max: 4999,
    value: 500,
    step: 1,
            animate: true,
    change: function (event, ui) {
        $("#amount").text(ui.value);
        calculate();
    },
            slide: function (event, ui) {
        $("#amountDisp").text(ui.value);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:39:54.507

要将值发布到服务器上的 php，您需要一些在滑块更改时保存值的文本字段。您可以使用隐藏输入。在这个隐藏的输入中设置值，它将与其他表单元素一起发布。

将html更改为以下-

```
<p style="text-align: center">
   Amount: <span id="amountDisp" style="color: #ff0000">500</span>
   <div id="amount_slider"></div>
   <input type="text" id="amount_field">
</p> 
```

我没有将`hidden`输入用于演示目的并将 js 更改为 --

```
$("#amount_slider").slider({
    handle: "myhandle",
    orientation: "horizontal",
    range: false,
    min: 500,
    max: 4999,
    value: 500,
    step: 1,
    animate: true,
    change: function (event, ui) {       
        $("#amount_field").val(ui.value);
        $("#amountDisp").text(ui.value);
        calculate();
    },
     slide: function (event, ui) {
        $("#amount_field").val(ui.value);
        $("#amountDisp").text(ui.value);        
    }
}); 
```

[看演示](http://jsfiddle.net/RvEXD/3/)

**更新**

如果您使用`ajax`提交表单，您可以直接从`amountDisp`-

```
var sliderAmount = $("#amountDisp").text(); 
```

# logging - 将 Google Cloud Storage 存储分区中的日志加载到 BigQuery

> ID：15732782
> 
> 赞同：0
> 
> 时间：2013-03-31T18:15:53.050
> 
> 标签：logging, google-bigquery, google-cloud-storage

我的目标是使用 BigQuery Web 界面将我的所有（GCS 创建的）日志从 Google Cloud Storage 获取到 BigQuery。由于日志每小时创建一次，我喜欢一次将它们全部导入以进行分析。

例如 gs://logging-bucket/images.mysite.net_storage_2013_03_31_07_00_00_0001a_v0 ， gs://logging-bucket/images.mysite.net_storage_2013_03_31_07_00_00_0002a_v0 等等。

仅获取一个文件时出现此错误：

错误：

```
 Line:1 / Column:1, Expected '{' found '"'
 Line:2 / Column:1, Expected '{' found '"' 
 Line:3 / Column:1, Expected '{' found '"'
 Line:4 / Column:1, Expected '{' found '"'
 Line:5 / Column:1, Expected '{' found '"'
 Line:6 / Column:1, Expected '{' found '"'
 Line:7 / Column:1, Expected '{' found '"' 
```

我所做的是创建一个新数据集，从 gs://logging-bucket/images.mysite.net_storage_2013_03_31_07_00_00_0001a_v0 中选择数据，然后添加此架构[http://storage.googleapis.com/pub/cloud_storage_usage_schema_v0.json](http://storage.googleapis.com/pub/cloud_storage_usage_schema_v0.json)并提交。

类似的问题在这里和 Google ing 这对我没有多大帮助。

求求你了，谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:06:21.013

Can you give an example of a row? Is the data in json format or csv? From the error, it sounds like it is trying to import JSON data, but a json row shouldn't start with '"' -- it should start with '{'. Is this CSV data? If so, you should set the sourceFormat to CSV (or leave it empty) instead of NEWLINE_DELIMITED_JSON.

# c++ - 指向数组的指针未按预期工作

> ID：15732784
> 
> 赞同：0
> 
> 时间：2013-03-31T18:16:06.550
> 
> 标签：c++, arrays, pointers

我正在尝试在 C++ 中找出基于数组的队列的实现。在这一点上，我只是试图初始化一个大小取决于用户输入的数组。我有一个队列类如下：

队列.h：#include

```
using namespace std;

class Queue {

    private:
        int *ptrtoArray;
        int arraysize;
        int data;
    public:
        Queue(int size);
        Queue();
        void print();

}; 
```

队列.cpp：

```
#include "Queue.h"

Queue::Queue() {

}
Queue::Queue(int size) {
    int theQueue[size];
    arraysize = size;
    ptrtoArray = &theQueue[0];

    for (int i=0;i<size;i++) {
        theQueue[i] = -1;
    }
    cout << "(";
    for(int i=0;i<size;i++) {

        cout << ptrtoArray[i] << ",";
    }
    cout << ")" << endl;
}
void Queue::print() {
    cout << "(";
    for(int i=0;i<arraysize;i++) {
        cout << ptrtoArray[i] << ",";
    }
    cout << ")" << endl;
} 
```

主.cpp：

```
#include <iostream>
#include "Queue.h"

using namespace std;

const string prompt = "queue> "; // store prompt

Queue *queue;

void options(){
    string input; // store command entered by user
    cout << prompt; // print prompt
    cin >> input; // read in command entered by user
    int queuesize,num;
    while(input != "quit") { // repeat loop as long as user does not enter quit
        if (input == "new") { // user entered ad
            cin >> queuesize;
            queue = new Queue(queuesize);
        } else if (input == "enqueue"){ //user entered remove
        } else if (input == "dequeue"){ //user entered remove
        } else if (input == "print"){ //user entered quit
            queue->print();
        } else { // no valid command has been selected
            cout << "Error! Enter add, remove, print or quit." << endl;
        }
        cout << prompt; // repeat prompt
        cin >> input; // read new input
    }
}//options

/**
 * Main function of the program. Calls "options", which handles I/O. 
 */ 
int main() {
    options();
    return 0;
} 
```

执行代码时，构造函数中的代码一切正常，但 print 函数给出了一些奇怪的结果。

```
queue> new 5
(-1,-1,-1,-1,-1,)
queue> print
(134516760,134525184,-1081449960,4717630,134525184,)
queue> 
```

所以，此时我只想让 print() 函数告诉我数组中的每个元素都只包含 -1。我对指针的了解非常有限，所以如果你能帮助我意识到我做错了什么，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:20:12.197

你在本地范围内声明你的数组，然后在它超出范围时丢失它，但指针仍然指向它在内存中的地址，谁知道它会变成什么，正如你所发现的那样。尝试：

```
ptrToArray = (int *) malloc(sizeof(int) * size); 
```

或`new`关键字：

```
ptrToArray = new int[size]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T18:20:57.603

```
int theQueue[size];
arraysize = size;
ptrtoArray = &theQueue[0]; 
```

分配`theQueue`将在构造函数返回时释放的静态数组。您应该改为分配动态数组`new`

```
arraysize = size;
ptrtoArray = new int[size]; 
```

不要忘记在你的析构函数中删除它（如果你不再需要它，或者更早）。

* * *

**编辑**

**静止的**

```
int theQueue[size]; 
```

将在堆栈上分配。这意味着当您的函数（声明所在的位置）返回时，内存不再可访问。例如，下一个函数可以使用它来保存另一个数组。

*优势*更快，您不必显式释放它，从而避免泄漏。

**动态的**

```
ptrtoArray = new int[size]; 
```

在堆上分配。这意味着即使您超出范围，它仍将归您所有（除非您丢失指向它的指针。在这种情况下，您注定要失败）。如果您不再需要它，您可以使用

```
delete[] ptrtoArray; 
```

*优势*可以具有动态大小。超出范围可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:22:13.123

这实际上是预期的。看，指向函数范围变量的`ptrtoArray`成员，`class Queue`在程序的整个生命周期中都不可用。在这里，那是你的构造函数。所以`ptrtoArray`将指向一个完全随机的内存位置，即所谓的“野指针”

请参阅：[https](https://stackoverflow.com/a/11137525/1919302) ://stackoverflow.com/a/11137525/1919302 ，以更好地了解变量的作用域和生命周期之间的区别以及为什么您的输出是这样的。

# objective-c - 数组中的精灵

> ID：15732790
> 
> 赞同：0
> 
> 时间：2013-03-31T18:16:54.640
> 
> 标签：objective-c, cocos2d-iphone

所以对于我的游戏，我将多个精灵添加到一个数组中，我添加的精灵越多，我的游戏开始运行的速度就越快？我想我的问题是，添加这样的精灵然后在 for 循环中调用它们的属性会产生问题吗？或者是其他地方的问题。我发现添加更多“地面”精灵会增加跳跃高度、移动速度和滚动速度。我应该切换到平铺来解决这个问题吗？

```
 CCSprite *ground = [CCSprite spriteWithFile:@"testlevel 5.png"];
            [ground setPosition:ccp(520, 10)];
            [ground setScale:1.0];
            //[ground setScaleX:(2 * ground.contentSize.width)];
            [self addChild:ground z:0];
            [boxes addObject:ground];

            ground = [CCSprite spriteWithFile:@"testlevel 4.png"];
            [ground setPosition:ccp(ground.contentSize.width/2 +400, -50)];
            [ground setScale:1.0];
            //[ground setScaleX:(2 * ground.contentSize.width)];
            [self addChild:ground z:0];
            [boxes addObject:ground];

            ground = [CCSprite spriteWithFile:@"testlevel 3.png"];
            [ground setPosition:ccp(ground.contentSize.width/2 +280, -10)];
            [ground setScale:1.0];
            //[ground setScaleX:(2 * ground.contentSize.width)];
            [self addChild:ground z:0];
            [boxes addObject:ground]; 
```

上面的部分是我将图像添加到数组的地方，当我想检查我的角色精灵和地面之间的交叉点时，我使用这样的 for 循环：

```
gravity -= 2 ;

for(CCSprite *ground in boxes){

    if(CGRectIntersectsRect(_character.boundingBox, ground.boundingBox) && !jump && (_character.position.y > ground.position.y + ground.contentSize.height/2 -20) && _character.position.x > ground.position.x - ground.contentSize.width/2 && facingLeft)
    {
        _character.position = ccp(_character.position.x, ground.position.y + ground.contentSize.height/2 + _character.contentSize.height/2-.001);
        falling = NO;
        onGround = YES; 
        gravity = 0;
        if(!_moving){
            [_character setDisplayFrame:
             [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: @"1-1.png"] ];
        }
    }

    else  if(CGRectIntersectsRect(_character.boundingBox, ground.boundingBox) && !jump && (_character.position.y > ground.position.y + ground.contentSize.height/2-20) && _character.position.x < ground.position.x + ground.contentSize.width/2 && !facingLeft)
    {
        _character.position = ccp(_character.position.x, ground.position.y + ground.contentSize.height/2 + _character.contentSize.height/2-.001);
        falling = NO;
        onGround = YES;
        gravity = 0;
        if(!_moving){
            [_character setDisplayFrame:
             [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: @"1-1.png"] ];
        }
    }

    else if(CGRectIntersectsRect(_character.boundingBox, ground.boundingBox) && (targetX <= 0) && (_character.position.y +_character.contentSize.height < ground.position.y + ground.contentSize.height) && (_character.position.x > ground.position.x) && (gp.isControlling && (gp.controlQuadrant == 2 || gp.controlQuadrant == 3)))
    {
        backgroundX = 0;
        targetX = 0;

    }
    else if(CGRectIntersectsRect(_character.boundingBox, ground.boundingBox) && (_character.position.y +_character.contentSize.height < ground.position.y + ground.contentSize.height) && (_character.position.x < ground.position.x) && (gp.isControlling && (gp.controlQuadrant == 0 || gp.controlQuadrant == 1)))
    {

        backgroundX = 0;
        targetX = 0;
    }

    else
    {
        normalForce = 0;
        jump = NO;
        falling = YES;
        doubleJump = 0;
    }

   // totalForce = normalForce + gravity;
   // [_character setPosition:ccp(_character.position.x, _character.position.y+totalForce)];
       }
 totalForce = normalForce + gravity;
if(gravity == 0) {
    falling = NO;
    NSLog(@"Gravity = 0"); 
}

[_character setPosition:ccp(_character.position.x + targetX, _character.position.y + totalForce)]; 
```

}

跳跃是由一个简单的按钮控制的，它为重力增加了大约 10 的整数。我有一个计时器运行我的刻度函数，其中重力看起来像这样：

```
gravity -=1; 
```

然后我将该值添加到我的角色位置，当在盒子顶部时，重力设置为 0。玩家左/右由操纵杆控制，该操纵杆仅通过刻度功能更新速度。如果需要更多信息，请告诉我，但同样，向数组添加更多名为 ground 的精灵会因未知原因而改变速度。任何帮助将非常感激。

这是跳转的 void 函数

```
-(void)jumpTapped
{
    NSLog(@"PRESSED");
    if(!falling && onGround){
        doubleJump += 1;
        gravity += 10;
        jump = YES;
        onGround = NO;
        NSLog(@"JUMPING"); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:04:12.377

在代码中

```
} else {
    normalForce = 0;
    jump = NO;
    falling = YES;
    doubleJump = 0;
} 
```

您将跳转设置为 NO，因此如果它在循环中运行的第一个精灵并且与任何这些 if 语句不匹配，它将默认为这个。然后下一次跳转时将设置为 NO ，这会从您按下按钮时抛出您的初始值，因此，使玩家跳转的代码将永远不会运行

# android - 位置控制只工作一次

> ID：15732791
> 
> 赞同：0
> 
> 时间：2013-03-31T18:17:02.407
> 
> 标签：android, location, controls, virtual, device

Android 虚拟设备上的手动位置控制仅工作一到两次 - 之后它没有响应。我正在更改纬度和经度，它没有做任何事情，但是按钮和 TextViews 处于活动状态。我用了很长时间，它总是工作得很好。它在系统“谷歌地图”应用程序上做同样的事情。在我的应用程序中，我有：

```
public void onLocationChanged(Location location) {

    Log.w("TAG", "Location was changed"); ... 
```

但它只写一次（或最多两次）。

在真实设备上，我的应用程序运行良好。重新启动应用程序、虚拟设备、eclipse 或整个 ADB 以及 PC 也不起作用。谢谢你的任何回答。

# android - 裁剪不显示图像并且不工作 - android

> ID：15732796
> 
> 赞同：0
> 
> 时间：2013-03-31T18:17:18.537
> 
> 标签：android, crop

我正在尝试在我的 Android 平板电脑中进行裁剪，但它不起作用。

**我正在使用 Nexus 10。**

**嗯......这是我的裁剪代码：**

```
private void doCrop(){
    Intent intent = new Intent("com.android.camera.action.CROP");
    intent.setDataAndType(mImageCaptureUri, "image/*");
    List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );
    int size = list.size();
    if (size == 0) {            
        Toast.makeText(this, "Can not find image crop app", Toast.LENGTH_SHORT).show();
        return;
    } else {
        intent.setData(mImageCaptureUri);        
        intent.putExtra("outputX", 648);
        intent.putExtra("outputY", 486);
        intent.putExtra("aspectX", 1);
        intent.putExtra("aspectY", 1);
        intent.putExtra("scale", true);
        intent.putExtra("return-data", true);
        if (size == 1) {
            Intent i        = new Intent(intent);
            ResolveInfo res = list.get(0);
            i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
            startActivityForResult(i, CROP_RESULT);
        } else {
        }

    }
} 
```

**这是我询问“相机”或“画廊”的对话框：**

```
private void startDialog() {
    AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(this);
    myAlertDialog.setTitle("Selecione uma foto!");
    myAlertDialog.setMessage("Choose a source");

    myAlertDialog.setPositiveButton("Gallery", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            pictureActionIntent = new Intent(Intent.ACTION_GET_CONTENT, null);
            pictureActionIntent.setType("image/*");
            pictureActionIntent.putExtra("return-data", true);
            startActivityForResult(pictureActionIntent, GALLERY_PICTURE);
        }
    });

    myAlertDialog.setNegativeButton("Camera", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            pictureActionIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            storagePath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/tmp/android.jpg";
            pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT, storagePath);
            startActivityForResult(pictureActionIntent, CAMERA_PICTURE);
        }
    });
    myAlertDialog.show();
} 
```

**这是我的 onActivityResult：**

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Bitmap bmp;
    if (resultCode == RESULT_OK){
        switch (requestCode){
        case GALLERY_PICTURE :
            mImageCaptureUri = data.getData();
            doCrop();
        break;
        case CROP_RESULT :
            Bundle extras = data.getExtras();
            if (extras != null) {               
                bmp = extras.getParcelable("data");
                bmp = Bitmap.createScaledBitmap(bmp, 648, 486, true);
                Drawable d = new BitmapDrawable(getResources(),bmp);
                btnTitular.setCompoundDrawablesWithIntrinsicBounds(null, d, null, null);
            }
            File f = new File(mImageCaptureUri.getPath());            
            if (f.exists()) f.delete();
            Intent inten3 = new Intent(this, CadTitularActivity.class);
            startActivity(inten3);
        break;
        case CAMERA_PICTURE :
            doCrop();
        break;
        }
    }        
} 
```

**这是正在发生的事情：**

**当我从图库**中抓取图像时，会显示裁剪，但是当我单击“确定”以裁剪图像时，它什么也不做。

**当我从相机**中抓取一张照片时，它什么也没做。它只显示“加载图片”，没有任何反应。

有任何想法吗？

请记住：我使用的是 Nexus 10。我已经听说这种裁剪内容不适用于所有设备。

欢迎任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-29T23:59:56.107

我认为问题在于输出 x 和 y 的裁剪意图必须设置为 256 x 256（或更小）。

所以从这里更改代码：

```
intent.putExtra("outputX", 648);
intent.putExtra("outputY", 486); 
```

对此：

```
intent.putExtra("outputX", 256);
intent.putExtra("outputY", 256); 
```

然后它应该为你工作。

# python - 选择最大的奇数python

> ID：15732805
> 
> 赞同：6
> 
> 时间：2013-03-31T18:18:25.293
> 
> 标签：python

我正在尝试用 Python 编写一个简单的程序，计算 x、y、z 值中的最大奇数。如何让用户选择 x、y 和 z 的值？

所以程序会询问 x、y 和 z 是什么，然后说“x,y,z 是最大的奇数”或者数字都是偶数。

到目前为止我所拥有的如下。这至少是一个不错的开始吗？

```
 # This program exmamines variables x, y, and z 
  # and prints the largest odd number among them

  if x%2 !== 0 and x > y and y > z:
      print 'x is the largest odd among x, y, and z'
  elif y%2 !== 0 and y > z and z > x:
     print 'y is the largest odd among x, y, and z'
  elif z%2 !== 0 and z > y and y > x:
     print 'z is the largest odd among x, y, and z'
  elif x%2 == 0 or y%2 == 0 or z%2 == 0:
     print 'even' 
```

有了 thkang 的帖子，我现在有：

```
 # This program exmamines variables x, y, and z 
  # and prints the largest odd number among them

  if x%2 !== 0:
    if y%2 !== 0:
      if z%2 !== 0:
        if x > y and x > z: #x is the biggest odd
        elif y > z and y > x: #y is the biggest odd
        elif z > x and z > y: #z is the biggest odd

      else: #z is even
        if x > y: #x is the biggest odd
        else: #y is the biggest odd

    else: #y is even
      if z%2 != 0: #z is odd
        if x > z: #x is the biggest odd
        else: #z is the biggest odd
      else: #y,z are even and x is the biggest odd

  else: #x is even
    if y%2 != 0 and z%2 != 0; #y,z is odd
      if y > z: #y is the biggest odd
      else: #z is the biggest odd
    else: #x and y is even
      if z%2 != 0: #z is the biggest odd 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T19:19:24.797

# 方法

避免使用`if-stmts`找到最大值。使用 python 内置`max`。使用任一生成器或`filter`仅查找奇数。

使用这样的内置函数更安全/更可靠，因为它们更容易组合，代码经过良好测试，并且代码主要在 C 中执行（而不是多字节代码指令）。

# 代码

```
def find_largest_odd(*args):
    return max(arg for arg in args if arg & 1) 
```

或者：

```
def find_largest_odd(*args):
    return max(filter(lambda x: x & 1, args)) 
```

# 测试

```
>>> def find_largest_odd(*args):
...     return max(arg for arg in args if arg & 1)
... 
>>> print find_largest_odd(1, 3, 5, 7)
7
>>> print find_largest_odd(1, 2, 4, 6)
1 
```

和：

```
>>> def find_largest_odd(*args):
...     return max(filter(lambda x: x & 1, args))
>>> print find_largest_odd(1, 3, 5, 7)
7
>>> print find_largest_odd(1, 2, 4, 6)
1 
```

如果您传递一个空序列或仅提供偶数，您将获得`ValueError`：

```
>>> find_largest_odd(0)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in find_largest_odd
ValueError: max() arg is an empty sequence 
```

# 参考

*   [筛选](http://docs.python.org/2/library/functions.html#filter)
*   [最大限度](http://docs.python.org/2/library/functions.html#max)
*   [发电机](http://docs.python.org/2/tutorial/classes.html#generators)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-25T17:03:07.550

万一有人正在寻找使用条件语句的简单解决方案

```
x,y,z = 4,1,6
largest = None
if x%2:
 largest = x
if y%2:
 if y > largest:
  largest = y
if z%2:
 if z > largest:
  largest = z
if largest:
 print "largest number is" largest
else
 print "there are no odd numbers" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T18:24:34.303

```
try:
    largest = max(val for val in (x,y,z) if val % 2)
    print(largest)
except ValueError:
    print('Even') 
```

注意 that`sorted`是一个`O(n log n)`操作，while`max`是`O(n)`。对于这么短的序列，速度差异可能无关紧要，但最好使用最好的工具来完成这项工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-08T23:05:19.117

这是来自 John V. Guttag 的 Python 计算和编程简介第 2 章的手指练习。这是 MITx 的推荐文本：6.00x Introduction to Computer Science and Programming。本书是为与 Python 2.7 一起使用而编写的。

'编写一个程序，检查三个变量 x、y 和 z，并打印其中最大的奇数。如果它们都不奇怪，它应该打印一条消息。

至此，本书只介绍了变量赋值和条件分支程序以及打印函数。我知道我正在努力。为此，这是我编写的代码：

```
if x%2 == 0:
    if y%2 == 0:
        if z%2 == 0:
            print "None of them are odd"
        else:
            print z
    elif y > z or z%2 == 0:
        print y
    else:
        print z
elif y%2 == 0:
    if z%2 == 0 or x > z:
        print x
    else:
        print z
elif z%2 == 0:
    if x > y:
        print x
    else:
        print y
else:
    if x > y and x > z:
        print x
    elif y > z:
        print y
    else:
        print z 
```

它似乎适用于我尝试过的所有组合，但记住我在第三段中的观点，知道它是否可以缩短会很有用。我很欣赏它已经被回答了，但是通过提供这个答案，其他用户在搜索书中问题的答案时更有可能遇到它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-31T18:41:21.793

像这样的东西：

```
def get_max_odd(*lis):
    try:
         return sorted(i for i in lis if i%2)[-1] #IndexError if no odd item found
    except IndexError:    
         return "even"

In [8]: get_max_odd(1,2,3)
Out[8]: 3

In [9]: get_max_odd(2,4,6)
Out[9]: 'even'

In [10]: get_max_odd(2,5,6)
Out[10]: 5

In [11]: get_max_odd(2,4,6,8,9,10,20)
Out[11]: 9 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-31T18:24:08.650

最好过滤数字，然后对它们进行排序。

```
numbers = [x, y, z]

sorted_odd_nums = sorted((x for x in enumerate(numbers) if x[1]%2), 
                         key = lambda x:x[1], 
                         reverse=True)

if not sorted_odd_nums:
   # all numbers were even and filtered out.
elif sorted_odd_nums[0][0] == 0:
   # x is the biggest odd number
elif sorted_odd_nums[0][0] == 1:
   # y is the biggest odd number
elif sorted_odd_nums[0][0] == 2:
   # z is the biggest odd number 
```

# 它能做什么：

`enumerate(numbers)`返回一个对序列`(index, item)`。由于原始列表是，因此即使在过滤和排序之后`[x, y, z]`，我们也可以跟踪`x`, 。`y``z`

`(x for x in enumerate(numbers) if x[1]%2)`如果给定元组中的第二项不是偶数，则在枚举上方过滤。

`sort( ... , key=lambda x:x[1], reverse=True)`使用它们的第二个索引项目的值（即原始数字）按降序对过滤的项目进行排序。

# 用户输入

要从用户那里读取，最简单的方法是使用`raw_input`(py2) / `input`(py3k)。

```
number = int(raw_input('enter a number: ')) 
```

# 仅使用 if 语句

你必须嵌套 if 语句。像：

```
if x%2: # x is odd
  if y%2: # y is odd
    if z%2: #z is odd
      if x>y and x>z: #x is the biggest odd number
      elif y>z and y>x: #y is the biggest odd number
      elif z>x and z>y: #z is the biggest odd number

    else: #z is even
      if x>y: #x is the biggest odd number
      else: #y is the biggest odd number
  else: #y is even
    if z%2: #z is odd
... 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-26T12:56:56.043

我正在阅读 Guttag（和 Python 2.7）的同一本书。其他阅读它的人可能会意识到尚未引入列表（或切片），尽管我在我的解决方案中使用了一个（我认为它工作正常！？！）。如果您宁愿从列表的末尾而不是列表的开头进行切片，那么您实际上不需要反转列表顺序。

首先，我创建了一个空列表（lst）。但在我使用它之前，我会检查是否所有的 x、y 和 z 都不是奇数（Guttag 询问“它们是否都不奇数”）。然后，依次检查每个变量以查看其是否为奇数，如果是，则将其添加到列表中。我按降序对列表进行了排序（即最大的奇数排在前面）。然后检查以确保它至少有一个元素（打印空列表没有意义），然后打印第一个元素。

```
x,y,z = 111,45,67

lst = []
if x%2==0 and y%2==0 and z%2==0:
    print 'none of x,y or z is an odd number'
else:
    if x%2!=0:
        lst.append(x)
    if y%2!=0:
        lst.append(y)
    if z%2!=0:
        lst.append(z)
lst.sort(reverse = True)
if len(lst)!=0:
    print lst[:1] 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-03T21:24:23.263

这是我的解决方案：

```
def get_max_odd(x, y, z):
    odd_nums = []

    if x % 2 == 1:
        odd_nums.append(x)
    if y % 2 == 1:
        odd_nums.append(y)
    if z % 2 == 1:
        odd_nums.append(z)

    if odd_nums == []:
        return 'None of x, y, z are odd numbers'
    else:
        return max(odd_nums)

print(get_max_odd(120, 111, 23)) 
```

我无法仅使用书中迄今为止提供的材料来完成这项练习。事实上，我认为如果没有超过 100 行，就不可能有一个工作程序。请让我知道您是否已经找到一种方法使其仅适用于迄今为止提供的材料

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-26T08:28:30.670

在前 4 行代码中，我们要求用户输入一个数字并将该数字转换为整数

```
x = input("enter a number:")

y = input("enter another number: ")

z = input("enter another number: ")

x,y,z = int(x),int(y),int(z)

if x %2 !=0: # check whether x is odd

    if y%2 !=0: # if x is odd check y

        if z%2 != 0: # if y is odd then check z
            if x>z and x > y: # comparing the 3 numbers as all are odd to get largest
                print("x is largest")
            elif y>z:
                print("y is largest")
            else:
                print("z is largest")
        else: # if z is not an odd number then the above comparisons cannot be done #
    #so we placed this else if z is not odd then the below comparisons will be executed
            if x>z and x > y:
                print("x is largest")
            elif y>z:
                print("y is largest")
    else: # if y is also not an even and x is odd then x is largest irrespective of others
        print("x is largest")

elif y%2 != 0: # similar way if x is not odd then the above loop will not run so this gets executed when x is even

    if z%2 != 0:
        if y>z:
            print("y is largest")
    else:
        print("z is largest")
elif z%2 !=0:

    print("z is largest")
else:

    print("all the numbers are even") 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-03-29T07:57:50.623

```
def odd(x,y,z):
    l=[x,y,z]
    even=[]
    for e in l:
        if e%2!=0:
            even.append(e)
    even.sort()
    if len(even)==0:
        return(print('No odd numbers'))
    else:
        return(even[-1])

odd(1,2,3) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-07-07T13:36:40.053

根据评论，如果 x 是偶数，AfDev 和其他人的帖子将抛出 TypeError，因为它会尝试

```
if y > None: 
```

编辑：如果最高奇数为负，评论者的解决方案（初始化最大 = 0 而不是最大 = 无）也不起作用。

书中的问题假设不了解列表或循环，所以这是我的解决方案：

```
x, y, z = 2, -5, -9
largest = None

if x % 2 != 0:
    largest = x
if y % 2 != 0:
    if largest == None or y > largest: # if None it will not attempt 2nd conditional
        largest = y
if z % 2 != 0:
    if largest == None or z > largest:
        largest = z

print(largest) # prints -5 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-01-11T08:31:14.430

这是我从昨天晚上开始考虑之后写的第一个剧本。

实际上，我一直在寻找可以参考的答案，因为我经常遇到错误但找不到任何令人满意的东西，这是我的一个:)

```
x = 333312
y = 221569
z = 163678

if x%2 ==0 and y%2==0 and z%2==0:
    print "Only even numbers provided."

elif x%2==0:
    if y%2!=0 and z%2!=0:
        if y > z:
            print y
        else:
            print z
    else:
        if y%2!=0:
            print y
        if z%2!=0:
            print z

elif y%2==0:
    if x%2!=0 and z%2!=0:
        if x > z:
            print x
        else:
            print z
    else:
        if x%2!=0:
            print x
        if z%2!=0:
            print z

elif z%2==0:
    if x%2!=0 and y%2!=0:
                if x > y:
                    print x
                else:
                    print y
    else:
        if x%2!=0:
                print x
        if y%2!=0:
                print y

else:
    if x>y and x>z:
        print x
    elif y>z:
        print y   
    else:
        print z 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-10-18T00:34:11.933

我目前也在浏览这本书并遇到了这个问题。我使用了类似于上述一些解决方案的方法。但是，程序不仅打印最大值，还打印包含最大值的变量。

这里的区别在于，除了检查 if `x > y`、`x > z`等之外，程序还检查是否相等（即`x >= y`、`x >= z`等）。对于多个相等的值，程序将打印所有共享最高奇数值的变量。

> 手指练习 2.2
> 
> 编写一个程序，检查三个变量——x、y 和 z——并打印其中最大的奇数。如果它们都不奇怪，它应该打印一条消息。

```
x, y, z = 5,7,7

if x%2 == 1 or y%2 == 1 or z%2 == 1: #at least one of the variables is odd
    if x%2 == 1:
        if y%2 == 1:
            if z%2 == 1: #x, y, and z are all odd
                if x >= y and x >= z:
                    print "x =", x, "is the largest odd number!"
                if y >= x and y >=z:
                    print "y =",y, "is the largest odd number!"
                if z >= x and z >= y:
                    print "z =", z, "is the largest odd number!"
            else: #z is even, but x and y are still odd
                if x >= y:
                    print "x =", x, "is the largest odd number!"
                if y >= x:
                    print "y =",y, "is the largest odd number!"
        elif z%2 == 1: #y is even, but x and z are odd
            if x >= z:
                print "x =", x, "is the largest odd number!"
            if z >= x:
                print "z =", z, "is the largest odd number!"
        else: #x is the only odd number
            print "x = ", x, "is the largest odd number!"
    if x%2 != 1 and y %2 == 1: #x is not odd but y is odd
    #could have done an elif here. But this makes the code easier to follow
        if z%2 == 1:#z is also odd
            if y >=z:
                print "y =",y, "is the largest odd number!"
            if z >= y:
                print "z =", z, "is the largest odd number!"
        else: #z is even. Hence, y is the only odd number
            print "y =", y, "is the largest odd number!"
    if x%2 != 1 and y%2 != 1 and z%2 == 1:#z is the only odd number
        print "z =", z, "is the largest odd number!"             
else:
    print "No odd number was input!" 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-04-17T06:35:07.447

这回答了 John Guttag 教授在之前的帖子中提到的本书 Ch.02 中的最后一个手指练习。使用列表对我来说似乎很有帮助。相同的方法可以用于同一章的前面的手指练习。

```
import math

a=int(input("Enter first integer: ")) # Manual entering of ten integers#
b=int(input("Enter second integer: "))
c=int(input("Enter third integer: "))
d=int(input("Enter fourth integer: "))
e=int(input("Enter fifth integer: "))
f=int(input("Enter sixth integer: "))
g=int(input("Enter seventh integer: "))
h=int(input("Enter eighth integer: "))
i=int(input("Enter ninth integer: "))
j=int(input("Enter tenth integer: "))

master=[a,b,c,d,e,f,g,h,i,j]

def ifalleven(a): # Finding whether every integer in the list if even or not.#

    i=0
    list=[]
    while i<len(a):
        if a[i]%2==0:
            list.append(a[i])
        i=i+1
    return len(list)==len(a)

def findodd(a): # Finding the greatest odd integer on the list.#
    i=0
    list=[]
    while i<len(a):
        if a[i]%2!=0:
            list.append(a[i])
        i=i+1
    print (max(list))

def greatoddoreven(list): # Finding the greatest odd integer on the list or if none are odd, print a message to that effect.#
    if ifalleven(list)==True:
        print ('No odd numbers found!')
    else:
        findodd(list)

greatoddoreven(master) 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-10-06T18:42:26.563

我也在学习 Python 和编程。我对这个练习的回答如下。通过 John V. Guttag 的《使用 Python 进行计算和编程简介》第 2 章的手指练习。

```
x, y, z = 55, 90, 87

if x%2 == 1 and y%2 == 1 and z%2 == 1:
   if x > y and x > z:
        print (x)
   elif y > z and y >x:
        print (y)
   else:
        print (z)
else:   
    print ('none of them are odd') 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-01-02T03:56:46.530

```
num1 = 7
num2 = 16
num3 = 300
x1=0
x2=0
x3=0

if num1%2 != 0:
    x1=1
if num2%2 != 0:
    x2=1
if num3%2 != 0:
    x3=1

if (num1*x1 > num2*x2) and (num1*x1 > num3*x3):
   largest = num1
elif (num2*x2 > num1*x1) and (num2*x2 > num3*x3):
   largest = num2
elif (x3):
   largest = num3
else:
    print("no one is odd")
if(x1!=0 or x2!=0 or x3!=0):
    print("The largest odd number between",num1,",",num2,"and",num3,"is",largest) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-02-21T16:28:10.260

这个怎么回答？是不是太长了？

```
 x, y, z = eval(input('Please enter the numbers for x, y, z: '))#allows you to enter three numbers each separated by a comma
print('x =', x)#Shows you what the value of x is
print('y =', y)#Shows you what the value of y is
print('z =', z)#Shows you what the value of z is
if x%2 != 0:#Checks to see if x is odd is true 
    if y%2 != 0:#Checks to see if y is odd is true
        if z%2 != 0:#Checks to see if z is odd is true
            if x > y and x > z:# Now in this situation since all the numbers are odd, all we have to do is compare them to see which is the largest in the following lines
                print('x is the largest odd number')
            elif y > z:    
                print('y is the largest odd number')
            else:    
                print('z is the largest odd number')
        elif x > y:# we refer back to the line if z%2 != 0 and in this new situation, it is false therefore z is not odd in this case and x and y are the only odd numbers here
                print('x is the largest odd number')  # we check to see if x is the largest odd number, if x is not largest odd number then proceed to the next line      
        else: 
                print('y is the largest odd number')  # here, y is the largest odd number                                                  
    elif z%2 != 0:# refer back to the sixth line at the beginning, if y%2 = 0.In this new situation, y is not odd so the only variables we're comparing now are x and z only
        if x > z:
            print('x is the largest odd number')
        else:
            print('z is the largest odd number')
    else:
            print('x is the largest odd number')# when both y and z are not odd, by default x is the largest odd number here
elif y%2 != 0:# Refer back to the fifth line, if x%2 != 0, in this new situation, the statement if x%2 != 0 is false therefore we proceed to checking if the next variable y is odd right here
            if z%2 != 0:#Since y is odd, check to see if z is odd,
                if y > z:#then if previous statement is true check to see now if y is bigger and print('y is the largest odd number') if so
                    print('y is the largest odd number')
                else:
                    print('z is the largest odd number')# here y is not largest odd number so by default z is the largest

            else:# this line occurs when z is not odd which pretty much leaves y to be the only odd number and is therefore largest odd number by default
                print('y is the largest odd number')
elif z%2 != 0:# this line occurs when both x and y is not odd which leaves z to be the largest odd number
            print('z is the largest odd number')
else:# this line occurs when all the numbers are not odd; they are even. Remember in this program, our main objective is to determine the largest number only among the odd numbers if there are any odd numbers at all, and if there are no odd numbers we show that there are none. (We do not take into account even numbers at all since that's not what the question is about) 
    print('There are no odd numbers') 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-02-25T05:33:16.547

```
x=input('x= ')
y=input('y= ')
z=input('z= ')
largest = None
if x%2 == 0 and y%2 == 0 and z%2 == 0:
    print('none of them is odd')
else:
    if x%2 != 0:
        largest = x
    if y%2 != 0:
        if y > largest:
            largest = y
    if z%2 != 0:
        if z > largest:
            largest = z
    print(largest) 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-03-08T05:46:22.897

刚刚完成同样的问题。我的答案似乎与其他答案不同，但似乎工作正常。（或者我错过了什么？！）所以这里有一个替代方案：

仅使用 if/else：

```
 x = 4
    y = 7
    z = 7

    if x%2 and y%2 and z%2 == 1:
        if x > y and x > z:
            print x
        elif y > z:
            print y
        else:
            print z
    elif x%2 and y%2 == 1:
        if x > y:
            print x
        else:
            print y
    elif x%2 and z%2 == 1 :
        if x > z:
            print x
        else:
            print z
    elif y%2 and z%2 == 1:
        if y > z:
            print y
        else:
            print z
    elif x%2 == 1:
        print x
    elif y%2 == 1:
        print y
    elif z%2 == 1:
        print z
    else:
        print "there are no odd numbers" 
```

据我所知，它适用于负数、数字、大数……如果不告诉我！

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-09-27T11:26:47.697

这是我的“菜鸟”版本的解决方案。基本上，该问题需要根据用户输入分析所有可能的 X、Y、Z 组合（例如，一个奇数和两个偶数等情况）。

我首先消除了两个最明显的情况，即所有数字都是偶数并且至少有一个数字为零。该代码仅缺少*至少两个数字*相等的部分。其余的很简单...

肯定有一种更精细的方法来解决这个问题（有关使用排序和反向比较的更多成分变量组合的案例，请参见下文），但这是我可以通过我的 Python 基础知识完成的。

```
print('This program will find the largest odd number among the three entered.\nSo, let\'s start...\n')

x = int(input('Enter the 1st number: '))
y = int(input('Enter the 2nd number: '))
z = int(input('Enter the 3rd number: '))
strToPrint = ' is the largest odd number.'

if x==0 or y==0 or z==0:
    print('\nNo zeroes, please. Re-run the program.')
    exit()
if x % 2 == 0 and y % 2 == 0 and z % 2 == 0:
    print('\nAll numbers are even.')
elif x % 2 != 0 and y % 2 != 0 and z % 2 != 0:  # all numbers are odd; start analysis...
    if x > y and x > z:
        print(str(x) + strToPrint)
    if y > x and y > z:
        print(str(y) + strToPrint)
    if z > y and z > x:
        print(str(z) + strToPrint)
elif x % 2 != 0 and y % 2 == 0 and z % 2 == 0:  # only X is odd.
    print(str(x) + strToPrint)
elif y % 2 != 0 and x % 2 == 0 and z % 2 == 0:  # only Y is odd.
    print(str(y) + strToPrint)
elif z % 2 != 0 and x % 2 == 0 and y % 2 == 0:  # only Z is odd.
    print(str(z) + strToPrint)
elif x % 2 != 0 and y % 2 != 0 and z % 2 == 0:  # only X and Y are odd.
    if x > y:
        print(str(x) + strToPrint)
    else:
        print(str(y) + strToPrint)
elif x % 2 != 0 and y % 2 == 0 and z % 2 != 0:  # only X and Z are odd.
    if x > z:
        print(str(x) + strToPrint)
    else:
        print(str(z) + strToPrint)
elif x % 2 == 0 and y % 2 != 0 and z % 2 != 0:  # only Z and Y are odd.
    if y > z:
        print(str(y) + strToPrint)
    else:
        print(str(z) + strToPrint) 
```

下面是同一程序的“非新手”版本，适用于任何（合理的）整数，与之前的版本相比，它更短、更紧凑。我使用了一个由十个整数组成的列表仅用于演示，但该列表可以扩展。

```
int_list = [100, 2, 64, 98, 89, 25, 70, 76, 23, 5]
i = len(int_list) - 1           # we'll start from the end of a sorted (!) list
int_list.sort()                 # sort the list first

# print(int_list)               # just to check that the list is indeed sorted. You can uncomment to print the sorted list, too.

while i >= 0:                   # prevent 'out of range' error
    if int_list[i] % 2 != 0:    # check if the list item is an odd number
        break                   # since the list is sorted, break at the first occurence of an odd number
    i -= 1                      # continue reading list items if odd number isn't found

print('The largest odd number is: ' + str(int_list[i]) + ' (item #' + str(i) + ' in the sorted list)') 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-11-13T14:57:35.600

这是我的解释，我正在执行与*使用 Python 进行计算和编程简介（第 2 版，John Guttag ）一书相同的任务*

```
# edge cases 100, 2, 3 and 100,2,-3 and 2,2,2
x = 301
y = 2
z = 1

# what if the largest number is not odd? We need to discard any non-odd numbers

# if none of them are odd - go straight to else
if (x % 2 != 0) or (y % 2 != 0) or (z % 2 != 0):
    #codeblock if we have some odd numbers
    print("ok")

    # initialising the variable with one odd number, so we check each in turn
    if (x % 2 != 0):
        largest = x
    elif (y % 2 != 0):
        largest = y
    elif (z % 2 != 0):
        largest = z

    # here we check each against the largest
    # no need to check for x as we did already

    if (y % 2 != 0):
        if y > largest:
            largest = y

    if (z % 2 != 0):
        if z > largest:
            largest = z

    print("The largest odd number is:", largest)
    print("The numbers were", x, y, z)

else: 
    print("No odd number found")` 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-12-25T06:54:50.333

这是我的 Guttag 手指练习 2 的代码：

```
def is_odd(x):
    """returns True if x is odd else returns False"""
    if x % 2 != 0:
        return(True)
    else:
        return(False)

def is_even(x):
    """returns True if x is even else returns False"""
    if x % 2 == 0:
        return(True)
    else:
        return(False)

def largest_odd(x, y, z):
    """Returns the largest odd among the three given numbers"""
    if is_odd(x) and is_odd(y) and is_odd(z):
        return(max(x, y, z))
    elif is_odd(x) and is_odd(y) and is_even(z):
        return(max(x, y))
    elif is_odd(x) and is_even(y) and is_odd(z):
        return(max(x, z))
    elif is_even(x) and is_odd(y) and is_odd(z):
        return(max(y, z))
    elif is_odd(x) and is_even(y) and is_even(z):
        return(x)
    elif is_even(x) and is_odd(y) and is_even(z):
        return(y)
    elif is_even(x) and is_even(y) and is_odd(z):
        return(z)
    else:
        return("There is no odd number in the input") 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2013-10-06T04:29:00.763

假设我们不打算使用一些花哨的东西 :-) 像 python 中的 max 和 sort 函数......我认为可以肯定地说“赋值”语句是公平的游戏......我们毕竟必须赋值x、y 和 z。

因此：我创建了自己的变量，称为“最大”，初始化为零。我将该变量分配给 x,y,z 的第一个奇数（按该顺序询问）。然后我只检查剩余的值，如果每个值都大于“最大”并且也是奇数，那么我将其设为“最大”的值 - 并检查下一个值。检查完所有值后，“最大”将保存最大奇数或零的值（这意味着我从未找到奇数，因此我打印了一条消息。

这与您可以用来从用户读取任意数量（可能 10 个）值并在输入所有值后打印最大奇数的方法相同。只需对照当前“最大”值检查输入的每个值。

是的，您确实需要小心支持负奇数——您需要处理将“最大”分配给第一个奇数，无论它是否大于零。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2013-10-06T05:01:10.200

实际上，我更容易用更多的值而不是只有 3 (x,y,z) 来考虑这个问题。假设我向您展示了一个单词列表 Apple、dog、Banana、cat、monkey、Zebra、ephant... 等。假设有 26 个单词由变量 a,b,c,d,e,f...x 表示,y 和 z。

如果您需要查找以小写字母开头的“最大单词”（按字典顺序），则无需将每个单词与其他单词进行比较。我们的大脑通常不会对整个列表进行排序，然后从最后选择......好吧......我的无论如何也不会。

我只是从列表的前面开始，然后逐步完成。我第一次找到一个以小写字母开头的单词时……我记住它，然后阅读，直到我得到另一个小写单词——然后我检查哪个更大，只记住那个单词……我永远不必去回来并检查任何其他人。在名单上一通，我就完成了。在上面的列表中......我的大脑立即丢弃了“Zebra”，因为情况是错误的。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-09-13T03:36:51.193

这个问题要求从 3 个变量 -x、y 和 z 中打印出最大的奇数，因为它是第 2 章，它只描​​述了条件，我猜 ans 应该只使用条件来提供。

该程序可以通过详尽地编写所有可能的奇数或偶数组合来完成。由于有 3 个变量，并且在任何时候这些变量都可以是奇数或偶数，因此有 2^3 = 8 个组合/条件。这可以通过使用真值表来显示，但我们不使用 True 和 False，而是使用“O”表示奇数，使用“E”表示偶数。该表看起来像这个[奇偶表](http://i.stack.imgur.com/IDk6X.png)

每行都是代码中检查“奇数/均匀性”的条件。然后，在这些条件中的每一个中，您将使用嵌套条件检查哪些变量是最大的奇数。

```
x = int(input('Enter an integer: '))
y = int(input('Enter another integer: '))
z = int(input('Enter a final integer: '))

print('x is:', x)
print('y is:', y)
print('z is:', z)
print('\n')

if x % 2 == 1 and y % 2 == 1 and z % 2 == 1:
    print('First conditional triggered.')
    if x > y and x > z:
        print(x, 'is the largest odd number.')
    elif y > x and y > z:
        print(y, 'is the largest odd number.')
    elif z > x and z > y:
        print(z, 'is the largest odd number.')
    else:
        print(x, 'is the largest odd number.')
    # This else clause covers the case in which all variables are equal.
    # As such, it doesn't matter which variable you use to output the 
    # largest as all are the largest.
elif x % 2 == 1 and y % 2 == 1 and z % 2 == 0:
    print('Second conditional is triggered.')
    if x > y:
        print(x, 'is the largest odd number.')
    elif y > x:
        print(y, 'is the largest odd number.')
    else:
        print(x, 'is the largest odd number.')
elif x % 2 == 1 and y % 2 == 0 and z % 2 == 1:
    print('Third conditional is triggered.')
    if x > z:
        print(x, 'is the largest odd number.')
    elif z > x:
        print(z, 'is the largest odd number.')
    else:
        print(x, 'is the largest odd number.')
elif x % 2 == 1 and y % 2 == 0 and z % 2 == 0:
    print('Fourth conditional is triggered.')
    print(x, 'is the largest odd number.')
elif x % 2 == 0 and y % 2 == 1 and z % 2 == 1:
    print('Fifth conditional is triggered.')
    if y > z:
        print(y, 'is the largest odd number.')
    elif z > y:
        print(z, 'is the largest odd number.')
    else:
        print(y, 'is the largest odd number.')
elif x % 2 == 0 and y % 2 == 1 and z % 2 == 0:
    print('Sixth conditional is triggered.')
    print(y, 'is the largest odd number.')
elif x % 2 == 0 and y % 2 == 0 and z % 2 == 1:
    print('Seventh conditional is triggered.')
    print(z, 'is the largest odd number.')
else:
    print('Eight conditional is triggered.')
    print('There is no largest odd number as all numbers are even.') 
```

此方法适用于 3 个变量，但随着添加更多变量，所需条件的复杂性和数量会急剧上升。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-12-07T15:01:58.270

刚刚完成了这个练习，这似乎是一种有效的方法，尽管它似乎不能处理负数（虽然我认为它不应该在这个级别）：

```
x, y, z = 7, 6, 12
xo = 0
yo = 0
zo = 0

if x%2 == 0 and y%2 == 0 and z%2 == 0:
    print("None of the numbers are odd.")

if x%2 == 1:
    xo = x

if y%2 == 1:
    yo = y

if z%2 == 1:
    zo = z

if xo > yo and xo > zo:
    print(xo)

if yo > xo and yo > zo:
    print(yo)

if zo > xo and zo > yo:
    print(zo) 
```

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2015-05-11T11:53:16.913

我就是这样做的..希望它有所帮助。

```
x = 2
y =4
z=6

# Conditional program to print the smallest odd number

if x %2 == 1 or y% 2 == 1 or z% 2 == 1 : #checks if at least one is odd
    if x<y and x< z:  # checks if x is least
        print x
    elif y<z:         # x is not least,so proceeds to check if y is least
        print y
    else:
        print z       #prints z, the least number
else:
    print "None of the numbers are odd" 
```

如果您想要最大的奇数，只需反转符号即可。

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2017-09-08T06:13:25.800

我刚刚阅读了 Python 文本的开头，我很确定我找到了解决这个问题的最详尽的方法：

```
if x%2!=0 and y%2!=0 and z%2!=0 and x>y and x>z:
    print(x)
elif x%2!=0 and y%2!=0 and z%2!=0 and y>x and y>z:
    print(y)
elif x%2!=0 and y%2!=0 and z%2!=0 and z>x and z>y:
    print(z)
elif x%2==0 and y%2!=0 and z%2!=0 and y>z:
    print(y)
elif x%2==0 and y%2!=0 and z%2!=0 and z>y:
    print(z)
elif x%2!=0 and y%2!=0 and z%2==0 and y>x:
    print(y)
elif x%2!=0 and y%2!=0 and z%2==0 and x>y:
    print(x)
elif x%2!=0 and y%2==0 and z%2!=0 and x>z:
    print(x)
elif x%2!=0 and y%2==0 and z%2!=0 and z>x:
    print(z)
else:
    print('none of them are odd') 
```

# php - 获取 2 个日期（含）之间的总月数

> ID：15732814
> 
> 赞同：1
> 
> 时间：2013-03-31T18:19:31.390
> 
> 标签：php, date

我需要帮助来计算两个日期之间的月份数：

```
$date1 = "2013-01-15";
$date2 = "2013-04-15"; 
```

我需要从上述变量中​​得到: 的结果`4`，它们是`Jan`、`Feb`、`Mar`和。`Apr`

有没有一种简单的方法可以通过分解这些日期来获得结果？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:26:10.903

如果运行 php >= 5.3 试试这个：

```
$date1 = new DateTime("2013-01-15");
$date2 = new DateTime("2013-04-15");
var_dump($date1->diff($date2)->m + 1); // int(4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:26:31.420

```
$datetime1 = new DateTime('2013-01-15');
$datetime2 = new DateTime('2013-04-15');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%M%'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T18:28:13.640

```
<?php

 $d1 = new DateTime('2013-01-15');
 $d2 = new DateTime('2013-04-15');

$interval = $d2->diff($d1);

$interval = ($interval->format('%m months')) +1; 
```

?>

[http://www.php.net/manual/en/class.dateinterval.php](http://www.php.net/manual/en/class.dateinterval.php)

# php - 如何更新网站而不让它崩溃？

> ID：15732815
> 
> 赞同：11
> 
> 时间：2013-03-31T18:19:32.910
> 
> 标签：php

我需要最佳实践来更新我的网站上的一个或多个文件，而不会让它崩溃；

例如，如果我更新 Model.php 文件，上传将需要几秒钟，比如在它替换服务器上的文件之前一两秒，同时，网站会显示一些错误，即找不到 model.php，或者不完整，即使我压制错误，网站最终也会死掉。

最好的做法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T18:25:35.910

我在实践中经常使用和看到的一种做法是——

*   使用版本控制系统 (VCS)，例如 SVN 或 Git

*   在实时服务器上，将站点的 Web 根目录作为符号链接，指向包含您网站的最新版本（例如`/www/domain.com/r555`）的目录（版本号）。555

*   当发生更改时，检查对 VCS 的更改

*   有一个脚本可以检查新目录的最新修订，并带有修订名称（例如，`/www/domain.com/r556`）

*   结帐完成后，更改符号链接并使其指向`/www/domain.com/r556`.

如果您有诸如文件上传之类的动态数据以及在 VCS 中无法拥有的动态数据，则会出现一些障碍，但它们都可以在不停机的情况下得到处理。

不过，诸如数据库更改之类的事情可能仍需要某种维护模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T18:25:16.673

当您更新产品时，创建一个名为的文件夹`1.1`并将新应用程序放入其中（无论是手动还是通过某些 VCS），然后将公共 html 目录符号链接到它。切换将是瞬时的。

这不是一种不常见的方法，因为其中一个好处是如果代码有问题，管理员可以立即符号链接回`1.0`文件夹。

另一个好处是将 VCS 标记命名为与文件夹相同的名称，以便可以轻松跟踪正在使用的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T07:27:45.340

使用缓存服务器/应用程序为用户保留可用的缓存副本。[清漆](https://www.varnish-cache.org/)就是一个例子。您可以将 Varnish 设置为将内容缓存一段时间，以及在实际网站的服务器不可访问的情况下（`Model.php not found`错误和类似情况）的替代时间。

在这种情况下，如果您更新生产系统，Varnish 可以继续提供网站的缓存副本，直到后端重新启动并正常运行（无论是 2 秒还是 2 小时）。只要记住在更新后清除 Varnish 缓存，以防用户的某些东西（UI、内容等）发生变化。

所有的 Web 服务器都有一些可用的缓存功能，但 Varnish 等都是*为*缓存而设计的。

[另一种选择是在HAProxy](http://www.haproxy.org/)之类的负载均衡器后面运行同一网站的两个或多个实例。一次更新一个，HAProxy 可以将流量重定向到您当前未更新的那个。

如果您需要有关服务器级缓存或负载平衡的更多信息，请前往[服务器故障。](https://serverfault.com/)

# ruby-on-rails - 如何修复 Rails 中这种奇怪的舍入误差？

> ID：15732816
> 
> 赞同：0
> 
> 时间：2013-03-31T18:19:45.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我最近在 Rails 中遇到了这个奇怪的错误。

```
class PaymentsController < ApplicationController

  def new
    @payment = current_user.payments.build(:invoice_id => params[:invoice_id])
    @title = "Make payment" 
  end

end 
```

* * *

```
class Payment < ActiveRecord::Base

  attr_accessible :amount, :date, :invoice_id

  after_initialize :set_amount

  private

  def set_amount
    if new_record? && invoice.present?
      self.amount ||= invoice.amount_payable
    end
  end

end 
```

当我这样称呼这个动作时`invoice`......

```
<%= link_to "Make payment", new_payment_path(:invoice_id => invoice.id) %> 
```

...付款表单显示`invoice`在下拉字段中预选正确（这是正确的）。

`amount`在大约 90% 的情况下，付款的金额都是正确的。

但是，*有时*它不会填充`amount_payable`数据库中的 2 位数字，而是填充一些其他奇怪的值，例如：

87.31999999999999

（`87.32`SQLite数据库中存储的十进制类型值在哪里）

有人可以告诉我是什么导致了这个舍入错误或指出我正确的方向吗？

谢谢你的帮助。

顺便说一句，这是我的数据库架构：

```
create_table "invoices", :force => true do |t|
  t.decimal  "amount_payable", :precision => 8, :scale => 2
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T18:35:37.190

您永远不应该将 Money 存储为浮点数 --- 这里发生的是浮点运算，这对于使用金钱进行计算非常常见。

更好的一点是将所有内容存储为美分的整数。因此，您的数据库中可能有一个整数列“amount_in_cents”。

然后，为“金额”添加一个 getter/setter，以便您可以`#amount`在任何地方使用。

```
class Payment < ActiveRecord::Base

  def amount
    amount_in_cents / 100.0
  end

  def amount=(other)
    self.amount_in_cents = (other * 100).to_i
  end
end 
```

# css - 如何将社交媒体图标排成一行？

> ID：15732817
> 
> 赞同：0
> 
> 时间：2013-03-31T18:19:57.983
> 
> 标签：css

我设法将 facebook、twitter 和 g +1 社交媒体按钮连续添加到我的网站。但是当我尝试将 VK like 按钮添加到同一行时，它就在其余部分的下方。

1.  我尝试使用 CSS 对齐所有 4 个按钮，并且所有按钮都正确对齐，而 VK 按钮刚刚移位到新行。这是我尝试这样做的方法：

`#Social { text-align: center; margin-bottom: 20px;`

1.  尝试使用基本的 HTML`<center></center>`和相同的故事，前 3 个按钮确实对齐，VK 按钮转到新行。

这是VK按钮的代码： `<div id="vk_like"></div> <script type="text/javascript"> VK.Widgets.Like("vk_like", {type: "button", height: 20}); </script>`

希望你能帮我解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:24:12.360

这是因为 VK 代码将您的按钮包装在一个`div`标记中，该标记是一个块元素。要修复它，您必须`div`用 a替换`span`（保持 id 相同），或者如果这不起作用，因为 JavaScript 正在寻找具有该 id 的 div，然后按照 Robert 的建议进行操作：将 div 设置为内联显示-block 告诉浏览器渲染一个块元素，就好像它是一个内联元素一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T19:10:47.387

`#vk_like { display: inline-block; }`?

# php - 亚马逊 linux 上的 sphinx 搜索错误

> ID：15732819
> 
> 赞同：-2
> 
> 时间：2013-03-31T18:20:11.427
> 
> 标签：php, mysql, codeigniter, amazon-ec2, sphinx

1.  我已经在 Amazon Linux 上安装了 sphinx 2.0.6 版本。
2.  我已经由 root 用户运行 /usr/local/bin/searchd 。
3.  我为所有（所有索引文件、searchd.log、query.log、searchd.pid）设置了 777 权限以避免权限问题。
4.  我已经设置了 main-delta 索引。

5.  我希望在数据库中插入新记录后，应该从 php 代码更新增量索引。我想在插入后立即向用户显示这条新记录。
    为此，我使用了

6.  exec(/usr/local/bin/indexer --rotate delta_index) 在我的 php 代码中。并使用 sphinxapi 编写代码以返回此新记录。（使用 codeignitor 框架）

    $result = $this->sphinxclient->query($term,'main delta');

    但是每次我这样做时，它都会抛出一个错误：

    索引“增量”：搜索错误

7.  索引文件是在那里创建的。但搜索不起作用。
8.  我也从命令行进行了测试搜索。但是发生了以下错误

    /usr/local/bin/search --index delta test Sphinx 2.0.6-release (r3473)

    使用配置文件'/usr/local/etc/sphinx.conf'...索引'delta'：搜索错误：

9.  请问有人知道哪里出了问题吗？？？

10.  请帮助我在通过 php 在数据库上插入后如何更新索引。以及如何让狮身人面像搜索开始工作。请给我任何链接，文章，指导任何东西！

11.  提前致谢....

瑜伽士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:00:34.347

如果您希望“php”（即网络用户）能够重建索引器。最好以该用户身份运行 searchd。所以同一个用户运行 indexer 和 searchd。通常是“www-data”或“apache”之类的东西——取决于分布。

将所有 sphinx 文件设置为该用户拥有，不要在文件上设置“执行”位。

如果您在尝试运行查询时收到“index 'delta': search error”，则表明查询功能在后台使用“search”命令 - 糟糕！使用正确的 sphinxapi（即 sphinxapi.php）——如果它不起作用，请检查 getLastError/getLastWarning。

# javascript - 除了 IE，Javascript 不会在任何其他浏览器中运行。为什么？

> ID：15732822
> 
> 赞同：1
> 
> 时间：2013-03-31T18:20:21.317
> 
> 标签：javascript

我在 Firefox、android 操作系统和其他浏览器中运行时遇到问题。有谁知道为什么？我尝试了不同的解析，并且查看了一堆文档，包括[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)

```
function callNews()
{
   var url = "someUrlHere";
   var xmlhttp = new XMLHttpRequest();
   var xmlDoc = null;

for (var i = 1; i < 20; i++)
{

    xmlhttp.open("GET", url, false);
    xmlhttp.setRequestHeader('Content-Type', 'text/xml'); 
    xmlDoc = xmlhttp.responseXML;

    var url2 = xmlDoc.getElementsByTagName("link")[i].textContent;
    var newsTitle = xmlDoc.getElementsByTagName("title")[i].textContent;
    var des = xmlDoc.getElementsByTagName("description")[i].textContent;
    //var newsDate = xmlDoc.getElementsByTagName("pubDate")[i].textContent;
    document.getElementById("desc" + i).innerHTML = newsTitle + "<br /><i style=\"color:red;\">" + des + "</i><br /><a href=\"" + url2 + "\">" + url2 + "</a>" + "<br /><br />" + "<iframe src=\"https://www.facebook.com/plugins/like.php?href=http://www.website.com\"scrolling=\"no\" frameborder=\"0\"style=\"border:none; width:450px; height:80px\"></iframe>";
    xmlhttp.send();
}

document.getElementById("desc" + 1).innerHTML = "Testing";
} 
```

更新了代码...仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:38:53.407

这对我来说效果更好

```
function callNews()
{
var url = "urlGoesHere";

if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
}
else {// code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    alert("Old");
}
xmlhttp.open("GET", url, false);
xmlhttp.send();
xmlDoc = xmlhttp.responseXML;
var x = xmlDoc.getElementsByTagName("title");
var d = document.createElement("div");
var news = new Array();
var word = "";
for (var i = 0; i < x.length; i++)
{
    news[i] = "<a href=\"" + xmlDoc.getElementsByTagName("link")[i].childNodes[0].nodeValue + "\" style=\"text-decoration:none;\"  >" + xmlDoc.getElementsByTagName("title")[i].childNodes[0].nodeValue + "</a>";
    news[i] = "<b>" + news[i] + "</b><br /><em style=color:#555;> " + xmlDoc.getElementsByTagName("description")[i].childNodes[0].nodeValue + "</em>";
    word = word + " " + news[i] + "<br /><br />"
}
document.getElementById("newsUpdate0").innerHTML = word;
} 
```

# android - IBM Worklight：UI 性能

> ID：15732828
> 
> 赞同：1
> 
> 时间：2013-03-31T18:20:49.817
> 
> 标签：android, cordova, jquery-mobile, ibm-mobilefirst

我使用 jQuery Mobile 1.3 进行 Worklight 5.0.6 开发。我发现某些功能，如[过渡](http://view.jquerymobile.com/1.3.0/docs/widgets/transitions/)、[面板](http://view.jquerymobile.com/1.3.0/docs/widgets/panels/)和[弹出菜单](http://view.jquerymobile.com/1.3.0/docs/widgets/popup/)在真实设备中并不流畅（三星 Galaxy S3 和三星 Note II，Android 4.1.1）。它在显示过程中很差并且相当滞后。

由于Worklight最终使用了Phonegap框架，我使用Phonegap创建了一个相同的移动应用程序，并且性能比使用Worklight的要流畅得多......

请问我知道为什么会这样，有什么办法可以提高UI性能吗？

非常感谢。

这是测试应用程序的代码：[Worklight](https://github.com/red23rocket/Worklight)、[PhoneGap](https://github.com/red23rocket/PhoneGap)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T12:35:57.463

此问题的快速修复：

在你的`AndroidManifest.xml`

1.  将`<supports-screens ...>`节点替换为以下内容：
    `<supports-screens android:largeScreens="true" android:normalScreens="true" android:smallScreens="true" android:resizeable="true" android:anyDensity="true" />`

2.  将`<uses-sdk ...>`节点 替换为`<uses-sdk android:minSdkVersion="9"android:targetSdkVersion="17" />`并**直接** `<supports-screens>`移动到节点之后。

3.  添加`screenSize`到`android:configChange`主要活动下的属性。

4.  针对大于 3.2 的 SDK 版本构建。（点击你的 Android 项目的属性，然后点击 Android，看截图）。

尝试再次安装并运行您的 Android 应用程序。

# algorithm - 船舶和货物

> ID：15732829
> 
> 赞同：1
> 
> 时间：2013-03-31T18:20:50.997
> 
> 标签：algorithm

假设我们拥有一家出口公司，并拥有无限多艘每艘容量为 C 的船舶。我们要运送 n 个重量为 w[1...n] 的对象。我们想用最少的船来运送所有的物品。非分数的对象（你不能把它们分成几部分）。我们将应用哪种算法来获得发送所有 n 个对象所需的最少船只数量。

n 的数量级为 10^5

我的想法：

我们绝对不能贪婪。可能是两个较小的重量使船完全装满，而如果我们选择最大的重量，就会浪费很多空间。

我们也可以将其视为 0-1 背包问题，袋容量为 C，每个对象的值等于其重量。对于每艘太慢的船，我们将不得不一次又一次地使用 0-1 背包。

任何帮助表示赞赏。

# jquery - JQuery中的计时器打印一个单词..逐个字母

> ID：15732831
> 
> 赞同：-8
> 
> 时间：2013-03-31T18:20:57.020
> 
> 标签：jquery

我将如何制作一个计时器来打印“加载”一词？每秒一个字母？

示例：L 然后再过一秒然后 o 然后再过一秒然后 a..

ETC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:28:31.303

尝试这个：

```
var msg="Loading";
var index=0;
setInterval(function(){ index++;console.log(msg.substring(0,index)) },1000); 
```

# javascript - 是否可以独立运行 IE9 或 IE10 Chakra JS 引擎？

> ID：15732833
> 
> 赞同：3
> 
> 时间：2013-03-31T18:20:59.020
> 
> 标签：javascript, v8, spidermonkey, chakra

我需要在不同的 JS 引擎上运行一些基准测试，需要测量时间、CPU 和内存使用情况。我想从命令行运行我的测试。找到了一些 V8 和 SpiderMonkey 的解决方案，有什么方法可以用 Chakra 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T22:15:19.510

没有官方支持的方式来独立运行 IE9 或 IE10 Chakra 引擎。从 IE11 开始，有一个 Win32 API： http: [//www.panopticoncentral.net/2013/07/02/introducing-jsrt-embedding-javascript-on-windows/](http://www.panopticoncentral.net/2013/07/02/introducing-jsrt-embedding-javascript-on-windows/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T23:05:12.453

您可以使用 mshtml.dll 来完成。在 C# 中创建一个命令行应用程序并引用 COM 组件“Microsoft HTML 对象库”。然后创建一个新文档并导航到标题中包含此元标记的 html 文件：

```
<META content="IE=X" http-equiv="X-UA-Compatible"> 
```

其中`X`in`IE=X`是您想要的 IE 版本。这将告诉 mshtml 创建适当版本的 jscript 引擎，并且您的脚本将由该引擎执行。如果您使用 IE=11，它将使用脉轮，我相信任何超过 10 的东西都会是 jscript。

您可以使用标准的 mshtml 类来执行脚本并与 javascript 运行时交互。

# android - 将 Android 手机与 ASP.net MVC 4 应用程序连接起来的 Web 服务

> ID：15732834
> 
> 赞同：1
> 
> 时间：2013-03-31T18:21:02.693
> 
> 标签：android, asp.net-mvc, web-services, web, synchronization

我最近在 asp.net mvc4 中创建了我的应用程序，现在我想创建一个 Web 服务，用于在 Web 应用程序和 Android 手机之间同步数据。最好从什么开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:23:55.753

[Service Stack](http://www.servicestack.net)是一个很棒的库，可以帮助您使用 REST 从客户端与服务器进行通信。

# c++ - 如何在 C++ 中从头开始实现 bignum 加法/乘法

> ID：15732839
> 
> 赞同：-3
> 
> 时间：2013-03-31T18:21:27.507
> 
> 标签：c++, bignum, arbitrary-precision

我已经开始编写一个 bignum 库，其中包含一个短裤向量来表示值、一个打印函数和负数支持。但是，我找不到实现长加法的好方法，如下所示：

```
 123
+123
----
 246 
```

我拥有的没有给出段错误的最新代码是这样的：

```
void add(unsigned long long b)
    {   
        for(long long i=v.size()-1;i>=0;--i)
        {
            if((b+v[i])<10)
                v[i]+=b;
            else // Carry
                {
                    if(i==0) // 1st digit
                    {
                        v.push_front(1); // Can't be more than 1
                    }
                    else
                        v[i-1]++; // Increment digit to the left
                }

        }
    } 
```

，但带进位的加法不正确（10+1 是 21）

编辑：它被实现为一个类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:36:55.663

考虑将 11 传递给函数：
如果`vector[i]`>= 0，则`b+vector[i]`> 11，因此`b+vector[i]<10`永远不会为真。

其他几件事：

*   您正在使用`vector`and `v`，我很确定应该只有一个。

*   `i>0`应该是`i>=0`，否则循环会跳过第一个元素。

*   让每个元素代表一个数字有点矫枉过正。您可以让每个元素表示 0-65535（无符号短整数范围）。只需将下面的 10 更改为 65535。或者 0-10000 也可能有意义，因为这样分解成数字会更简单。

*   该函数不应该接受 BigNum 类的类型参数吗？

*   从第一个元素到最后一个元素的循环会更有意义。

更好的（未经测试的）`add`功能可能如下所示：

```
const int BASE = 10;
void add(unsigned long long b)
{
    for (int i = 0; b > 0 && i < v.size(); ++i)
    {
        unsigned long long val = b + v[i];
        b = val / BASE;
        v[i] = val % BASE;
    }
    // if adding more digits
    while (b > 0)
    {
        v.push_back(b % BASE);
        b /= BASE;
    }
} 
```

# java - 添加 mvc 命名空间时 Spring-MVC 不起作用

> ID：15732846
> 
> 赞同：1
> 
> 时间：2013-03-31T18:22:20.873
> 
> 标签：java, spring, spring-mvc

我的 MVC 项目在没有 mvc 命名空间的情况下完美运行，但是当添加它时......

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        ">

    <context:component-scan base-package="com.evgeni.msgdisp.controller" />

    <mvc:resources mapping="/resources/**" location="/resources/" /> 

    <bean id="templateResolver"
        class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
        <property name="prefix" value="/WEB-INF/pages/" />
        <property name="suffix" value=".html" />
        <property name="templateMode" value="HTML5" />
        <property name="cacheable" value="false" />
    </bean>

    <bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
        <property name="templateResolver" ref="templateResolver" />
    </bean>

    <bean class="org.thymeleaf.spring3.view.ThymeleafViewResolver">
        <property name="templateEngine" ref="templateEngine" />
        <property name="characterEncoding" value="UTF-8" />
    </bean>

</beans> 
```

我得到 404 并且日志说`No handler mapping found for [/node/manage]`。jsp也是一样，所以不是Thimeleaf问题。我很确定它与`xsd`版本有关。我使用 Spring 3.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:04:24.800

通过添加解决

```
<mvc:annotation-driven/> 
```

显然默认行为在使用时被覆盖

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T14:42:46.400

感谢您对“注释”的评论。

使用注释驱动时要小心，两天前我的项目不适用于资源目录，因为我将 spring 3.2.8 与 hibernate 4.2.6 混合在一起。他们使用他自己的注释集。混合这两种技术，在 servlet 配置中使用两个注解标签：

```
<mvc:annotation-driven/> in controller and views configuration
<mvc:resources mapping=" ...
...

<tx:annotation-driven/> in transacional or hibernate configuration 
```

资源映射仅适用于此标签组合，适用于不同的注释技术。

再见。

# jquery - 在桌面浏览器中加载 jQuery 脚本，但不能在移动设备中加载

> ID：15732847
> 
> 赞同：9
> 
> 时间：2013-03-31T18:22:22.933
> 
> 标签：jquery

我想在桌面浏览器中加载特定的 jQuery 脚本/函数，而不是移动浏览器。目前，该脚本在移动浏览器上运行非常缓慢，但在桌面浏览器上运行良好。

有问题的功能是一个平滑滚动插件，因此当用户单击链接时，页面会平滑滚动到同一页面上的锚点。它没有必要在移动浏览器上平滑滚动——它太慢了，而且经常不起作用。

我需要在下面的代码中添加什么以确保它仍然在桌面浏览器中正常执行，但不能在移动设备（尤其是 iPad/iPhone/iPod）中执行？

```
 <script>!window.jQuery && document.write(unescape('%3Cscript src="js/lib/jquery/jquery.js"%3E%3C/script%3E'));</script>    
<script src="js/css_browser_selector.js"></script>
<script src="js/src/jquery.smooth-scroll.js">    
</script>
<script src="js/lib/jquery.ba-bbq.js"></script>
<script>
$(document).ready(function() {
  $('a[href*="#"]').live('click', function() {
    if ( this.hash ) {
      $.bbq.pushState( '#/' + this.hash.slice(1) );
      return false;
    }
  });

  $(window).bind('hashchange', function(event) {
    var tgt = location.hash.replace(/^#\/?/,'');
    if ( document.getElementById(tgt) ) {
      $.smoothScroll({scrollTarget: '#' + tgt});
    }
  });

    $(window).trigger('hashchange');
});
 </script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T18:26:36.887

**[jsFiddle 演示](http://jsfiddle.net/vEdzG/1/)**

寻找 的存在`touch`，如果它不存在，那么您很可能正在处理桌面：

**编辑**：我原来的 try/catch 方法显然已被弃用（[https://stackoverflow.com/a/4819886/1026459](https://stackoverflow.com/a/4819886/1026459)）

```
$(document).ready(function() {
 var isDesktop = (function() {
  return !('ontouchstart' in window) // works on most browsers 
  || !('onmsgesturechange' in window); // works on ie10
 })();
 //edit, if you want to use this variable outside of this closure, or later use this:
 window.isDesktop = isDesktop;
 if( isDesktop ){ /* desktop things */ }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T18:31:59.740

您可以尝试检索用户代理并使用该信息来决定是否要包含平滑滚动脚本。另一种解决方案是检查浏览器宽度，然后决定是否要包含脚本。

```
<script>
(function ($) {
   if(is_touch_device()) {
      $.when(
         $.getScript( "/mypath/myscript1.js" ),
         $.getScript( "/mypath/myscript2.js" ),
         $.getScript( "/mypath/myscript3.js" ),
         $.Deferred(function( deferred ){
            $( deferred.resolve );
         })
      ).done(function(){
          //place your code here, the scripts are all loaded
      });
   }
})(jQuery);
</script> 
```

使用[when()](http://api.jquery.com/jQuery.when/)需要 jQuery 1.5 或更高版本，[getScript()](http://api.jquery.com/jQuery.getScript/)是在 1.0 中添加的。

*编辑*正如 travis 所说，您还可以寻找触摸事件。在这种情况下，您应该使用：

```
function is_touch_device() {
  return !!('ontouchstart' in window) // works on most browsers 
      || !!('onmsgesturechange' in window); // works on ie10
}; 
```

上面第二个 SO 答案的片段：[使用 JavaScript 检测“触摸屏”设备的最佳方法是什么？](https://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript)

# java - 在 java 中使用 AVL 树

> ID：15732849
> 
> 赞同：0
> 
> 时间：2013-03-31T18:22:25.500
> 
> 标签：java, avl-tree

我有 AVLNode 和 AVLTree 类，我有删除和插入节点的方法，我有一个打印方法。我想使用这些方法来创建 AVL 树。在输入时，我想写“添加 x”和“删除 x”。我写了这个但是当我打印什么都没有显示

```
 public static void main(String[] args) throws IOException {
    int i;
    BufferedReader scanner = new BufferedReader(new InputStreamReader(System.in));
    int n = Integer.parseInt(scanner.readLine());
    String[] words = new String[n];
    AVLTree<Integer> t = new AVLTree<Integer>();

    for (i = 0; i < n; i++) {
        String splitn = scanner.readLine();
        words[i] = (splitn.split(" ")[0]);
        int M = Integer.parseInt(splitn.split(" ")[1]);
        if (words[i] == "Add") {
            t.insert(M);
        }
        if (words[i] == "Remove") {
            t.remove(M);
        }

    }
    t.print();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:26:03.640

改变：

```
if (words[i] == "Add") 
```

到：

```
if (words[i].equals("Add")) 
```

同样的`"Remove"`情况。该`equals`方法将逐个字符地比较字符串，但`==`操作符只是检查两个字符串是否是*内存中的同一个对象*。因此，没有打印的原因是首先没有添加或删除任何内容！

# android - 如何将 Android 应用程序连接到 MySQL 数据库？

> ID：15732853
> 
> 赞同：65
> 
> 时间：2013-03-31T18:22:40.740
> 
> 标签：android, mysql

我已经建立了一个使用 mysql 数据库的网站。我想知道如何将我的应用程序连接到该数据库。

我想要实现的是我的应用程序应该请求查找已定义“ID”或名称的表。该表包含指向图像或图像名称的链接。我希望应用程序检索这些图像并将它们显示在 android 应用程序上。

有哪些方法可以做到这一点？我可以使用 PHP 开发 Android 应用程序吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-31T18:39:01.407

Android 不支持开箱即用的 MySQL。访问数据库的“正常”方式是在其前面放置一个 Restful 服务器并使用 HTTPS 协议连接到 Restful 前端。

看看[ContentProvider](http://developer.android.com/reference/android/content/ContentProvider.html)。它通常用于访问本地数据库 (SQLite)，但也可用于从任何数据存储中获取数据。

我确实建议您在本地查看所有/部分网站数据的本地副本，这样当 Android 设备没有连接时，您的应用程序仍然可以工作。如果您沿着这条路线走，那么可以使用一项服务来使两个数据库保持同步。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T18:35:18.317

一种方法是使用 webservice，只需用 PHP 或任何其他语言编写 webservice 方法。并且从您的 android 应用程序中使用 http 客户端请求和响应，您可以点击 Web 服务方法，该方法将返回您想要的任何内容。

对于 PHP 你可以像这样创建一个 web 服务。假设下面我们在服务器中有一个 php 文件。文件的路由是**yourdomain.com/api.php**

```
if(isset($_GET['api_call'])){
    switch($_GET['api_call']){
       case 'userlogin':
           //perform your userlogin task here
       break; 
    }
} 
```

现在您可以使用 Volley 或 Retrofit 向上述 PHP 脚本发送网络请求，然后，实际上 php 脚本将处理数据库操作。

在这种情况下，PHP 脚本称为 RESTful API。

您可以从本教程中学习 MySQL 的所有操作。**[执行 CRUD 的 Android MySQL 教程](https://www.simplifiedcoding.net/android-mysql-tutorial-to-perform-basic-crud-operation/)**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T18:38:18.563

是的，您可以将您的 android 应用程序连接到您的 PHP 以从您的数据库中获取结果。使用网络服务通过 ASYNC 任务和 http post 请求连接到您的后端脚本。检查此链接以获取更多信息[连接到 MySQL](http://www.helloandroid.com/tutorials/connecting-mysql-database)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-08T10:21:05.780

使用android vollley，它非常快，您可以更好地操作请求。 [使用 Volley 发送 post 请求并在 PHP 中接收](https://stackoverflow.com/questions/25948191/send-post-request-using-volley-and-receive-in-php/25948689#25948689)

基本上，您将为 php 请求（POST/GET）创建一个带有键值参数的映射，php 将执行所需的处理，并且您将以 JSON（json_encode()）的形式返回数据。然后，您可以根据需要解析 JSON，也可以使用 Google 的 GSON 让它进行解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T18:37:19.443

我可以使用 pHp 开发安卓应用吗？
是的 。对于 Web 开发，您可以使用 Phonegap。“PHP，HTML”等。
有哪些方法可以做到这一点：？
您可以在互联网上查看几个示例，这是其中之一“简单的方法”[将 Android 连接到 MySQL](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/8339-connect-android-mysql-database-tutorial.html)

# android - Android 设备上的 WebSocket 代码

> ID：15732855
> 
> 赞同：0
> 
> 时间：2013-03-31T18:22:55.233
> 
> 标签：android, websocket

我编写了小型 WebSocket 应用程序并尝试在 android 模拟器和 android 设备（android 4.0.4 版本）上运行它。

该代码在 android 模拟器中运行良好，但是当我尝试在设备上运行相同的代码时，它无法按预期工作。

下面是我的 HTML websocket 代码 -

```
 <html>
<head>
<script src="www/js/jquery-1.8.2.min.js"></script>
</head>
<body>
<script language="javascript">
// test for websocket support
$(document).ready(function(){
if ("WebSocket" in window) {
alert("Your browser does support WebSockets");
} else { // no websocket support
alert("Your browser does not appear to support WebSockets");
}
var websocket;
websocket = new WebSocket("ws://192.168.0.1:8080/SampleWebApp/WebSocketServlet");
// called once the connection is established
websocket.onopen = function(evt) {
alert("open");
};
// called upon receipt of a message
websocket.onmessage = function(evt) {
alert("message");
};
// called when an error occurs
websocket.onerror = function(evt) {
alert("error");
};        
// called when the connection is closed (by either side)
websocket.onclose = function() {
alert("close");
};
});
</script>
</body>
</html> 
```

当我在 Android 设备模拟器中运行上述代码时，我会正确获取与 WebSocket 事件相关的所有 javascript 警报消息。

但是，当我将相同的代码部署到实际的 Android 设备时，我只从上面的代码中收到一条警报消息 - “您的浏览器确实支持 WebSockets”

感谢您帮助理解为什么我在设备上运行时未触发 WebSocket 事件。

问候，普拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:50:47.177

当您在设备上运行此代码时，您是否更改了服务器 IP 地址？
你用什么浏览器？默认的 Android 浏览器不支持 WebSockets。更多在这里[http://caniuse.com/websockets](http://caniuse.com/websockets)

# gnuplot - 设置轴上数值数字的字体大小

> ID：15732856
> 
> 赞同：33
> 
> 时间：2013-03-31T18:22:55.777
> 
> 标签：gnuplot, gnu

如何为 x 轴和 y 轴上的值设置字体大小？

我环顾四周，只找到了改变`xlabel`' 大小和`ylabel`' 大小的方法，但我希望轴下方的实际数字更大。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-02-17T09:13:22.793

如果您不想更改字体，请对 bb2 的答案进行小幅阐述：

```
set xtics font ", 30" 
```

对于 yaxis 上的抽动：

```
set ytics font ", 30" 
```

同时对于两个轴：

```
set tics font ", 30" 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-31T18:27:48.220

它是：

```
set xtics font "Times-Roman, 30" 
```

# c - 为什么是 localarr==&localarr？

> ID：15732864
> 
> 赞同：1
> 
> 时间：2013-03-31T18:23:59.920
> 
> 标签：c, arrays, local, callstack, memory-address

我的意思是，为什么这会在控制台上打印相同的数字？

```
#include <stdio.h>
int main()
{
    char localarr[99];
    printf("%d\n",(int)localarr);
    printf("%d\n",(int)&localarr);
    return 0;
} 
```

我知道 localarr 的地址实际上并未存储在任何变量中。但是生成的代码可以在幕后存储它，或者当我将这样的代码传递给需要 char** 的函数时，至少 gcc 可以发出警告而不是允许段错误。为什么我们会有这种行为？

相关：为什么

```
char **ppl = &localarr; 
```

结果是：

```
error: cannot convert ‘char (*)[99]’ to ‘char**’ 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T18:26:46.587

不， `localarr`不一样 `&localarr`

*   `localarr`是第一个元素`&localarr`的地址，但是是大小为 99 的字符数组的地址。偏离路线的值是相同的，但两者在语义上是不同的。

*   `localarr`是类型`char [99]` ，而是`&localarr`类型`char (*)[99]`

因为类型`&localarr`是`char(*)[99]`你应该创建指向数组的指针，比如：

```
char(*ppl)[99] = &localarr; 
```

`ppl`对大小为 99 的字符数组的指针在哪里

`localarr`为了可视化和 下面的区别`&localarr`是我的图表：

```
 +----+----+----+---+---+----+----+----+----+----+ 
    | '1'| '2' |'3'|...............  |98  | 99 |  ...........
    +----+----+----+---+---+----+----+----+----+---+----+  
     201   202  203 ...............   210  299
      ^     ^                                         
      |     |                                         
 (localarr) (localarr + 1)                                         
    |                                         |
    |-----------------------------------------|--------
    |201                                      | 299    // 299 -201 = 98
      ^                                          ^
      |                                          |
    (&localarr)                                 (&localarr + 1) 
```

（注意：）
* `localarr + 1`以 1 个字符大小递增，其中以数组大小 `(&localarr + 1)`递增。`99`

看看这段代码及其输出：

```
int main()
{
    char localarr[99] = {'A'};
    printf("%p %p\n",localarr, &localarr);
    printf("%p %p\n",(localarr + 1), (&localarr + 1));
    printf("%c %p  %c\n",*localarr, *&localarr, **&localarr);
        return 0;
} 
```

输出：（*阅读评论*）

```
~$ ./a.out 
0x7fff41ad64b0 0x7fff41ad64b0    // same 
0x7fff41ad64b1 0x7fff41ad6513    // difference is 98, 4b1 + 62 = 513
A      0x7fff41ad64b0  A 
```

注意：`localarr`和 `&localarr`的值相同，`0x7fff41ad64b0` 但`*localarr`和 `*&localarr`的值不同：

*   `*localarr` 是第一个元素

*   `*&localarr`是第一个元素的地址 `**&localarr`是第一个元素

*   这意味着与第一个元素`*localarr` 相同`**&localarr``localarr[0]`

*   注意`0x7fff41ad6513 - 0x7fff41ad64b1 = 0x62`和 0x62 = 98 十进制

什么编译器错误消息是：

```
error: cannot convert ‘char (*)[99]’ to ‘char**’ 
                       ^                  ^ type of ppl  
                  type of &localarr 
```

[使用指向字符数组的指针](https://stackoverflow.com/questions/14189967/issue-with-pointer-to-character-array-c/14192945#14192945)阅读此问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:40:55.833

鉴于：

```
#include <stdio.h>
int main()
{
    char localarr[99];
    printf("%d\n",(int)localarr);
    printf("%d\n",(int)&localarr);
    return 0;
} 
```

的类型`localarr`是 99 的数组`char`。的类型`&localarr`是指向 99 数组的指针`char`。类型不同。但是，`localarr`退化为指向数组第一个字节的指针。您可以通过将地址加 1 来最清楚地发现差异（并转换代码以更可靠地处理类型 - 在 64 位系统上，转换为`int`截断指针）：

```
#include <inttypes.h>
#include <stdio.h>

int main(void)
{
    char localarr[99];
    printf("0x%08" PRIXPTR "\n", (uintptr_t)( localarr+0));
    printf("0x%08" PRIXPTR "\n", (uintptr_t)(&localarr+0));
    printf("0x%08" PRIXPTR "\n", (uintptr_t)( localarr+1));
    printf("0x%08" PRIXPTR "\n", (uintptr_t)(&localarr+1));
    return 0;
} 
```

示例输出：

```
0x7FFF6D12C4E0
0x7FFF6D12C4E0
0x7FFF6D12C4E1
0x7FFF6D12C543 
```

你还问：

> 为什么
> 
> ```
>  char **ppl = &localarr; 
> ```
> 
> 导致错误`cannot convert 'char (*)[99]' to 'char**'`？

如前所述， 的类型`&localarr`是指向 99 数组的指针`char`；这种类型既不一样也不可转换为`char **`，它在许多方面只是简单地呼应了错误消息所说的内容。这些类型完全不兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:58:27.807

如果您使用，您的陈述将起作用

字符 *localarr=calloc(99,sizeof(char));

现在将 localarr 的地址分配给 char ** 类型应该可以工作

# android - 活动中的按钮在方向更改时无法正常工作

> ID：15732867
> 
> 赞同：0
> 
> 时间：2013-03-31T18:24:09.423
> 
> 标签：android, android-layout

一种测试方向和布局更改的代码：

主 StartActivity 包含 3 个按钮（button1、button2、button3）和一个包含 Fragment 空间的衬垫布局。

当 button1 被点击时，fragment 会显示 fragment1；Button2 显示 fragment2 等。

**纵向**：（文件名-layout/activity_start.xml）

![在此处输入图像描述](https://i.stack.imgur.com/fJQUm.png)

**景观**：（文件名-layout-land/activity_start.xml） ![在此处输入图像描述](https://i.stack.imgur.com/VCNPQ.png)

问题：

1.  当我改变方向时，按钮的行为异常。他们在第一次点击时不起作用。只有在我单击两次之后，然后才能工作。

2.  每次更改方向时都会创建此 StartActivity。（onCreate() 中的 Toast 弹出）

我只是希望当方向改变时：布局应该相应地改变，并且像按钮这样的活动的所有组件都应该按预期工作。并且不应重新创建活动。

代码：

**开始活动.java**

```
public class StartActivity extends FragmentActivity {

    private static final String TAG = "StartActivity";
    private Fragment newFragment;
    private Button b1, b2, b3;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        try {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_start);

            Toast.makeText(this, "onCreate", Toast.LENGTH_SHORT).show();

            b1 = (Button) findViewById(R.id.button1);
            b2 = (Button) findViewById(R.id.button2);
            b3 = (Button) findViewById(R.id.button3);
            b1.setOnClickListener(buttonClickListener);
            b2.setOnClickListener(buttonClickListener);
            b3.setOnClickListener(buttonClickListener);

            FragmentManager fm = this.getSupportFragmentManager();
            FragmentTransaction ft = fm.beginTransaction();

            StartFragment startFragment = new StartFragment();
            ft.add(R.id.selectedfragment, startFragment);
            ft.commit();
        } catch (Exception e) {
            Log.e(TAG, e.toString());
        }

    }

    private OnClickListener buttonClickListener = new OnClickListener() {
        @Override
        public void onClick(View view) {
            try {
                switch (view.getId()) {
                case R.id.button1:
                    newFragment = new Fragment1();
                    break;
                case R.id.button2:
                    newFragment = new Fragment2();
                    break;
                case R.id.button3:
                    newFragment = new Fragment3();
                    break;
                default:
                    newFragment = new StartFragment();
                    break;
                }

                FragmentManager fm = getSupportFragmentManager();
                FragmentTransaction ft = fm.beginTransaction();
                ft.replace(R.id.selectedfragment, newFragment);
                ft.addToBackStack(null);
                ft.commit();

            } catch (Exception e) {
                Log.e(TAG, e.toString());
            }
        }
    };
} 
```

**Manifest.xml 部分**

```
<activity
    android:name="com.ri.fragmenttest.StartActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:56:53.193

您的根 LinearLayout 是水平的，它包含另一个垂直的 LinearLayout。

因此，您的按钮在水平排列的 LinearLayout 中堆叠在一起。

只需将内部布局更改为水平。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/Snow"
    android:orientation="horizontal"
    tools:context=".StartActivity" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="top"
        android:orientation="vertical" >      <----- HERE 
```

# vb.net - 动态配置 wcf 端点的地址部分

> ID：15732872
> 
> 赞同：0
> 
> 时间：2013-03-31T18:24:42.363
> 
> 标签：vb.net, winforms, wcf

我希望有人能给我指出一个很好的“简单”示例，最好使用 vb.net 而不是 c#，它演示了如何在 Windows 窗体应用程序中在运行时动态配置端点地址。

我有丰富的为数据库连接创建动态连接字符串的经验，但这是我第一次不得不使用 wcf，虽然我读过的内容似乎表明这是可能的，但我还没有找到一个好的、简单的工作在实践中证明理论的例子。

我正在构建的应用程序需要附带一个测试地址（链接到测试数据库），以便最终用户可以确定他们完全熟悉他们需要做什么（他们将链接到现实中的官方政府数据库，所以成功的试运行是先决条件），然后才能徒劳地使用真实的数据库。由于两者之间的唯一区别是地址，我想让它动态可配置。

我欢迎任何人就这个主题提出任何建议或指示。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:55:55.687

通过构造函数将服务 Uri 传递给服务代理

```
 var serviceProxy = new YourClient(
                new BasicHttpBinding("BasicHttpBinding_IService"),
                new EndpointAddress(new Uri("http://server:port/address"))); 
```

`YourClient`类是自动生成的，Visual Studio 在您添加对服务的引用时创建它。绑定名称应该来自您的配置文件。

* * *

已编辑：看来您的问题不仅与客户端配置有关，还与服务配置有关。您可以通过多个端点公开您的服务，您应该将其添加到配置文件中。这里是一个问题，如何[在](https://stackoverflow.com/questions/4934563/determine-which-wcf-endpoint-is-being-used-on-the-server)代码中确定客户端访问的究竟是什么端点。你可以检查这个

```
OperationContext oc = OperationContext.Current;

if(oc != null)
{
    string wasCalledOn = oc.EndpointDispatcher.EndpointAddress.Uri.ToString();
} 
```

并取决于`wasCalledOn`设置的数据库连接。

# javascript - Jasmine 的 spy throwing 不是函数错误

> ID：15732875
> 
> 赞同：3
> 
> 时间：2013-03-31T18:25:12.000
> 
> 标签：javascript, unit-testing, angularjs, jasmine

我有一个 Angular JS 应用程序，其中包含一个模块和一些服务。我的控制器使用这些服务。在 Jasmine 测试用例中，我使用 Jasmine 的`createSpy`. 以下是模拟服务：

```
beforeEach(module(function ($provide) {
    shoppingData = function () {
        getAllItems: jasmine.createSpy('getAllItems');
        addAnItem: jasmine.createSpy('addAnItem');
        removeItem: jasmine.createSpy('removeItem');
   };
   $provide.value('shoppingData', shoppingData);
})); 
```

控制器在`getAllItems`创建对象后立即调用该函数。我创建了另一个`beforeEach`创建控制器对象的块。以下是检查是否`getAllItems`被调用的测试块：

```
it("Should call getAllItems function on creation of controller", function () {
    expect(shoppingData.getAllItems).toHaveBeenCalled();
}); 
```

当我在浏览器上运行规范运行器页面时，测试失败并出现以下错误：TypeError: 'shoppingData.getAllItems' is not a function

我看到了几个类似的例子，这种测试没有任何问题。谁能指出这里缺少什么或出了什么问题？

*更新：*我[用失败的部分创建了一个 plunker](http://plnkr.co/edit/BenU8lJtICS2uNyrtjns?p=preview)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T20:26:03.003

如果这是真正的代码，这似乎是一个错字。将相应的部分更改为：

```
shoppingData = {
  getAllItems: jasmine.createSpy('getAllItems'),
  addAnItem: jasmine.createSpy('addAnItem'),
  removeItem: jasmine.createSpy('removeItem')
}; 
```

只需将函数更改为对象并更改`;`for `,`。

**更新 1：**

考虑只监视现有对象：

```
var deferred, _shoppingData;

beforeEach(module('shopping'));

beforeEach(inject(function(shoppingData, $q) {
  _shoppingData = shoppingData;
  deferred = $q.defer();
  spyOn(shoppingData, 'getAllItems').andReturn(deferred.promise);
}));

it('should have called shoppingData.getAllItems', function() {
  expect(_shoppingData.getAllItems).toHaveBeenCalled();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:03:18.103

你为什么不试试：

```
var scope, myController;

beforeEach(inject(function($rootScope, $controller) {
  scope = $rootScope.$new();
  myController = $controller.('controllerName', {
    $scope: scope,
    shoppingData: jasmine.createSpyObj('shoppingData', ['getAllItems', 'addAnItem', 'removeItem'])
  });
})); 
```

# php - 将 php.ini 加载到终端

> ID：15732878
> 
> 赞同：0
> 
> 时间：2013-03-31T18:25:33.730
> 
> 标签：php, wampserver, composer-php, git-bash, php-ini

我正在使用 Git Bash 终端、php 5.4.10、OpenServer (wamp)、windows 7

我正在尝试通过 Composer 加载一些库，但我不能，因为它说：

![在此处输入图像描述](https://i.stack.imgur.com/VfYVY.png)

有点奇怪，因为 curl 在 php 工作

![在此处输入图像描述](https://i.stack.imgur.com/qChUH.png)

但是，由于某些原因，php.ini 文件没有加载到 git bash 终端。

![在此处输入图像描述](https://i.stack.imgur.com/ttR3C.png)

为什么？如何在终端初始化 php.ini 并使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:50:54.893

在您的 phpinfo() Web 输出中查找加载的 php.ini 文件，然后使用它启动 PHP

`php -c c:\windows\apache2\php.ini`

例如。

您也可以考虑简单地将 web ini 文件复制到在命令行中查找的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T19:57:12.073

跑：

```
$ php --ini 
```

查看`php.ini`CLI 中使用了哪个（这可能与 Web 上使用的 ini 文件不同）。你应该去那个ini文件并在那里启用扩展。

# c# - 从大类列表中选择多个类的最有效方法？

> ID：15732880
> 
> 赞同：1
> 
> 时间：2013-03-31T18:25:43.580
> 
> 标签：c#, xna-4.0

基本上我正在尝试在 XNA 2D 中制作一个磁贴引擎，我目前正在使用一个大的磁贴列表（我的类保存磁贴的所有数据）并选择我的视图范围内的那些，然后将它们显示在屏幕上。

显然，我遇到的问题是，我的 Tiles 整体列表越大，我在尝试挑选范围内的 Tiles 时遇到的延迟就越多。我目前在 for 循环中使用 Linq 来选择图块，如下所示：

```
//loop from the maximum view at the top of the screen to the maximum view at the bottom
for (int height = topView; height < bottomView; height++)
{
    //loop from the maximum view to the left of the screen to the maximum view of the right
    for (int width = leftView; width < rightView; width++)
    {
        //select the tile at this grid position
        Tile t = tileList.Where(x => x.GridPosition == new Vector2(width, height)).FirstOrDefault();
        if (t != null)
        {
            //calculate the screen position and add it to the list of local tiles within range
            t.ScreenPosition = new Vector2(screenWidth * 30, screenHeight * 30);
            localList.Add(t);
        }
        else
        {
            //the tile wasn't found, add a random blank one to fill the gap.
            Tile brokenTile = new Tile(game, new Vector2(width, height), 9001);
            brokenTile.ScreenPosition = new Vector2(screenWidth * 30, screenHeight * 30);
            localList.Add(brokenTile);
        }
        //increment the screen width used to calculate the screen position
        screenWidth++;
    }
    //increment the screen height used to calculate the screen position and reset the width
    screenHeight++;
    screenWidth = 1;
} 
```

我想知道是否有一种方法可以更有效地做到这一点，理想情况下可以减少在增加“地图”的整体大小并选择范围内的这些图块时所经历的滞后。

我唯一能想到的是在加载地图时将总列表分成“块”的某种方法，并且只查看每个块以拉出瓷砖..但是我不太确定我会怎么做因为如果我需要从多个“块”中拉出节点可能会很麻烦但是任何关于这样做的好方法的帮助也会很棒！

非常感谢！:)

编辑：这里有一些截图：[http ://i.imgur.com/RJmSYYF.png 与](http://i.imgur.com/LgwB8CJ.png)[http://i.imgur.com/LgwB8CJ.png](http://i.imgur.com/RJmSYYF.png)相比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:37:31.040

可以在 k 维空间中快速找到对象的集合是 KD-Tree。

请参阅Wikipedia 和[Geometric Algorithms上的](http://www.cs.princeton.edu/~rs/AlgsDS07/17GeometricSearch.pdf)[kd 树](http://en.wikipedia.org/wiki/K-d_tree)。

我将 KD-tree 的 Java 实现移植到 C#。请参阅RoboWiki 上[的用户：Ojd/KD-Tree](http://robowiki.net/wiki/User%3aOjd/KD-Tree)。你可以在那里下载代码。

KD 树的搜索时间为**O(log n) 。**

* * *

**更新**：

您的屏幕截图显示瓷砖放置在矩形网格中。为什么不直接使用二维数组来存储您的图块？

```
Tile[,] grid = new Tile[m,n]; 
```

现在选择图块变得非常自然，因为您可以从屏幕位置计算它们在网格中的位置。像这样，您可以通过它们的 xy 索引直接访问它们，而无需在 lagre 列表中搜索它们。单个图块的访问时间是**O(1)**，即与图块的总数无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:47:15.343

我会考虑使用某种形式的[空间分区](http://en.wikipedia.org/wiki/Space_partitioning)，例如[四叉树](http://en.wikipedia.org/wiki/Quadtree)。

这意味着根据它们的位置将您的对象分配给常规大小的四边形。您将能够有效地确定哪些四边形是可见的，并且每个四边形将知道它包含哪些对象（尽管您需要在移动对象时对其进行管理）。

# c# - 限制并发产生和等待工作进程

> ID：15732881
> 
> 赞同：0
> 
> 时间：2013-03-31T18:25:45.047
> 
> 标签：c#, task-parallel-library

我有一个 C# 程序，它将一组工作项排队。对于每个工作项，我生成另一个应用程序（我无法更改）来处理该项目。此过程是相对 CPU 密集型的。我想限制此应用程序的实例数。

我考虑过使用 PLINQ：

```
Parallel.ForEach(
    workItems,
    new ParallelOptions { MaxDegreeOfParallelism = 4 },
    x => Process.Start("worker", x).WaitForExit()); 
```

但我担心的是，每个并行工作者只会用完一个线程来等待相应的进程。

我还看到 PLINQ 尝试对返回的项目进行批处理，这意味着它可能会在等待适当大小的批处理时停止。那么，也许使用单生产者/多消费者模式`BlockingCollection`会起作用吗？这样做的问题是每个并行工作者都有一个线程，这会（？）比 PLINQ 解决方案更糟糕。

鉴于上述内容已简化并且我实际上`TaskCompletionSource`（通过`Exited`事件）连接到每个工作进程，我可以使用 TPL 中的某些东西来执行此操作而不阻塞任何后台线程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:38:02.233

如果您可以在 a 中使用事件包装`Process`开始和结束：`Process.Exited``Task`

```
Task WrapExternalProcess( WorkItem workItem ) { ... } 
```

您可以使用延续来完全消除阻塞。这样的事情会做：

```
Task DoAllWork( IEnumerable<WorkItem> workItems )
{
  int THREAD_COUNT = 4;

  var bag = new ConcurrentBag<WorkItem>( workItems );
  var ce = new CountdownEvent( THREAD_COUNT );
  var tcs = new TaskCompletionSource<bool>();

  for ( int i = 0 ; i < THREAD_COUNT ; i++ ) Work( bag, ce, tcs );

  return tcs.Task;
}

void Work(
  ConcurrentBag<WorkItem> bag,
  CountdownEvent ce,
  TaskCompletionSource<bool> tcs
)
{
    WorkItem workItem;
    if ( bag.TryTake( out workItem) )
    {
        WrapExternalProcess( workItem )
          .ContinueWith( t => Work( bag, ce, tcs ) );
    }
    else // no more work
    {
        // If I'm the last thread to finish
        if ( ce.Signal() ) tcs.SetResult( true );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:42:59.400

我已经实现了以下内容：

```
var sem = new SemaphoreSlim(4);
foreach (var item in workItems)
{
    sem.Wait();

    ProcessAsync(item).ContinueWith(_ => sem.Release());
} 
```

这给了我一个单一的线程，可以同时保持有限数量的后台进程在运行。

# scala - 如何执行三等号作为否定

> ID：15732883
> 
> 赞同：1
> 
> 时间：2013-03-31T18:25:55.773
> 
> 标签：scala, testing, assert, triple-equals

我正在学习 scala，并想用`===`. 但是，我很好奇是否有办法做这样的事情：

```
assert(1 !=== 2) 
```

我已经尝试了上述`!==`，和`!(===)`

有没有办法获得描述性`===`和使用否定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T19:06:40.820

ScalaTest 没有`!==`方法（它实际上在源代码中并且被[注释掉了](https://code.google.com/p/scalatest/source/browse/trunk/src/main/scala/org/scalatest/Assertions.scala#368)）。您可以实现自己的模拟，例如：

```
// Somewhere in the codebase
class ExtendedEqualizer(left: Any) {
  def !==(right: Any) = {
    if (left != right) None
    else Some("%s equaled to %s".format(left, right))
  }
}

object TestUtil {
  implicit def convertToExtendedEqualizer(left: Any) = new ExtendedEqualizer(left)
}

// In your test class
import TestUtil.convertToExtendedEqualizer 
```

然后它变得像使用一样简单`===`：

```
assert(3 !== 2+2) 
```

请注意，这是一个简化版本，`===`它不会进行深度数组比较，也不会像 ScalaTest 那样生成很好的差异。

# ios - 自定义对象的 UIAppearance 代理

> ID：15732885
> 
> 赞同：17
> 
> 时间：2013-03-31T18:26:09.897
> 
> 标签：ios, objective-c, uiappearance

我有一个自定义对象，它继承自 NSObject。这个对象做了“一些事情”，其中之一是用一些 UIKit 对象（UILabel、UIButtons ecc ecc ...）创建一个 UIView。这个对象有一些属性，比如：textColor、font、backgroundColor...用于自定义包含的 UIKit 对象的外观。

我想为这个对象的所有创建实例自定义这个属性“一次”，我已经查看了 UIAppearance 协议。

标准 UIKit 对象已经符合 UIAppearance 协议，但我不想在所有 UILabel 或 UIButtons 上应用样式。我只想将样式应用于我的对象实例中包含的 UILabels 和 UIButtons。此外，我不能（也不想）使用 appearanceWhenContainedIn: 因为使用我的自定义对象的开发人员可能不知道其中“包含”了哪些类型的对象。

所以，我正在研究如何使我的自定义对象符合 UIAppearance 协议。

AFAIK 它必须实施

```
+ (id)appearance 
```

方法。此方法应返回一个代理对象，您可以在其中发送所有自定义项。但是，查看 UIKit 对象的外观方法，我看到返回了一个私有对象。_UIAppearance 类的对象。

所以，苹果似乎没有给我一个标准的代理对象来定制我自己的，如果我必须从头开始创建。是对的还是我失去了什么？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T20:36:57.107

经过一番研究后，我“放弃”了使用标准 Apple 对象。暂时不存在。我已经创建了自己的代理，它非常简单（现在仅适用于“外观：”）。

让我们解释一下。我想在 NSObject 子类上设置“textColor”的外观，我们称之为“FLObject”。使 FLObject 符合 UIAppearance 协议并覆盖外观方法。在这种方法中，您应该返回一个代理类（我创建的那个）：

```
+ (id)appearance
{
    return [FLAppearance appearanceForClass:[self class]];
} 
```

这个怎么运作？FLAppearance 为外观ForClass: 方法传递的每个类创建一个自身实例。如果您为同一个类调用两次，则返回相同的实例。

然后，您可以执行以下操作：

```
[[FLObject appearance] setTextColor:[UIColor redColor]]; 
```

FLAppearance 覆盖 forwardInvocation: 方法，因此它接受所有发送的方法。然后，它将所有调用放入一个数组中。当 FLObject 被初始化时，一个简单的调用

```
[(FLAppearance *)[FLAppearance appearanceForClass:[self class]] startForwarding:self]; 
```

将开始发送调用并设置外观。当然，这需要一些调整和错误检查，但我认为这是一个好的开始。

```
@interface FLAppearance ()

@property (strong, nonatomic) Class mainClass;
@property (strong, nonatomic) NSMutableArray *invocations;

@end

static NSMutableDictionary *dictionaryOfClasses = nil;

@implementation FLAppearance

// this method return the same object instance for each different class
+ (id) appearanceForClass:(Class)thisClass
{
    // create the dictionary if not exists
    // use a dispatch to avoid problems in case of concurrent calls
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        if (!dictionaryOfClasses)
            dictionaryOfClasses = [[NSMutableDictionary alloc]init];
    });

    if (![dictionaryOfClasses objectForKey:NSStringFromClass(thisClass)])
    {
        id thisAppearance = [[self alloc]initWithClass:thisClass];
        [dictionaryOfClasses setObject:thisAppearance forKey:NSStringFromClass(thisClass)];
        return thisAppearance;
    }
    else
        return [dictionaryOfClasses objectForKey:NSStringFromClass(thisClass)];
}

- (id)initWithClass:(Class)thisClass
{
    self = [self initPrivate];
    if (self) {
        self.mainClass = thisClass;
        self.invocations = [NSMutableArray array];
    }
    return self;
}

- (id)init
{
    [NSException exceptionWithName:@"InvalidOperation" reason:@"Cannot invoke init. Use appearanceForClass: method" userInfo:nil];
    return nil;
}

- (id)initPrivate
{
    if (self = [super init]) {

    }
    return self;
}

-(void)forwardInvocation:(NSInvocation *)anInvocation;
{
    // tell the invocation to retain arguments
    [anInvocation retainArguments];

    // add the invocation to the array
    [self.invocations addObject:anInvocation];
}

- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector {
    return [self.mainClass instanceMethodSignatureForSelector:aSelector];
}

-(void)startForwarding:(id)sender
{
    for (NSInvocation *invocation in self.invocations) {
        [invocation setTarget:sender];
        [invocation invoke];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-17T18:16:21.027

出于我自己项目的目的，我将所有内容收集在一起并将自定义 UIApperance 代理发布为开源项目[MZApperance](https://github.com/m1entus/MZAppearance)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-15T07:28:25.557

很好的实现，我稍微修改了代码并将类创建为`NSProxy`. 在项目中使用它我发现了内存泄漏：

例如：使用代理设置全局设置/外观，该类的每个实例永远不会达到 refCount 0，因此`dealloc`永远不会被调用。

泄漏代码：

```
-(void)forwardInvocation:(NSInvocation *)anInvocation;
{
    [...]

    // !! This will retain also the target

    [anInvocation retainArguments];

    [...]
} 
```

使固定：

```
-(void)forwardInvocation:(NSInvocation *)anInvocation
{
     [anInvocation setTarget:nil];
     [anInvocation retainArguments];

     // add the invocation to the array
     [self.invocations addObject:anInvocation];
}

-(void)startForwarding:(id)sender
{
     for (NSInvocation *invocation in self.invocations) {

         // Create a new copy of the stored invocation,
         // otherwise setting the new target, this will never be released
         // because the invocation in the array is still alive after the call

         NSInvocation *targetInvocation = [invocation copy];
         [targetInvocation setTarget:sender];
         [targetInvocation invoke];
         targetInvocation = nil;
     }
} 
```

NSInvocation 的复制类别

```
-(id)copy
{
     NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:[self methodSignature]];
     NSUInteger numberOfArguments = [[self methodSignature] numberOfArguments];

     [invocation setTarget:self.target];
     [invocation setSelector:self.selector];

     if (numberOfArguments > 2) {
         for (int i = 0; i < (numberOfArguments - 2); i++) {
             char buffer[sizeof(intmax_t)];
             [self getArgument:(void *)&buffer atIndex:i + 2];
             [invocation setArgument:(void *)&buffer atIndex:i + 2];
         }
     }

     return invocation;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T18:35:22.647

查看[http://logicalthought.co/blog/2012/10/8/uiappearance-and-custom-views](http://logicalthought.co/blog/2012/10/8/uiappearance-and-custom-views)

基本上你只需要标记你的属性，`UI_APPEARANCE_SELECTOR`只要你的类是一个子类，`UIView`它就会处理私有`_UIAppearance`类的实际售卖。

* * *

**编辑：**

您最好使用单例和一些类方法来推出自己的解决方案，而不是尝试在运行时做一些可怕的事情。它看起来不`UIAppearance`支持您的用例。

另一方面，您可以将您出售的每个对象粘贴在私有`UIView`子类中，然后改为出售该子类的实例。然后，您可以将发送给您的外观消息转发到`NSObject`您出售和使用的实例`appearanceWhenContainedIn:<your private subclass>`。不过，这可能会变得混乱，并且可能会让您所在班级的消费者感到困惑。

# mysql - INSERT ... ON DUPLICATE KEY UPDATE（要比较的两个键）

> ID：15732887
> 
> 赞同：4
> 
> 时间：2013-03-31T18:26:15.270
> 
> 标签：mysql, sql, sql-server, insert, duplicates

我想要做的只是增加第 4 列的值，如果它不存在，那么当`col0 = valuecol0 AND col2 = valuecol2`表中有一行时。否则，我当然想插入行。

```
INSERT INTO tablename (col0, col1, col2, col3) 
VALUES (valuecol0, valuecol1, valuecol2, valuecol3) 
ON DUPLICATE KEY UPDATE col3 = col3 + VALUES( col3 ); 
```

无论如何，我不知道应该如何在表中设置索引，我在[这里](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)阅读了文档中的页面，但它没有多大帮助。所以我尝试了所有四种可能的组合，但没有一种奏效！

我哪里失败了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T18:42:03.420

要生成密钥冲突，您可以使用唯一索引：

```
create unique index IX_YourTable_Col0Col2 on YourTable (col0, col2); 
```

使用此索引，您可以使用以下`on duplicate key update`语法：

```
insert into YourTable (col0, col1, col2, col3) 
values (1, 2, 1, 2) 
on duplicate key update col3 = col3 + 2; 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!2/eb9ed7/1/0)

# java - byte[] 在数据库中搞砸了

> ID：15732889
> 
> 赞同：0
> 
> 时间：2013-03-31T18:26:24.743
> 
> 标签：java, hibernate, postgresql

我有一个 SWT/Hibernate/Postgresql 应用程序，我想在我的数据库中添加一个图像作为 byte[] 并显示它。

这里是在 bean 中加载图像的相关代码。AFAIK，它工作正常。

```
InputStream is = new FileInputStream(file);
long length = file.length();
if (length > Integer.MAX_VALUE) {
    is.close();
    return false;
}
byte[] image = new byte[(int)length];
int offset = 0;
int numRead = 0;
while (offset < image.length && (numRead=is.read(image, offset, image.length-offset)) >= 0) {
    offset += numRead;
}
if (offset < image.length) {
    result = false;
}
is.close(); 
```

然后我简单地将我的 byte[] 图像设置在一个 bean 中，使用这样的休眠设置（旧版 hbm.xml）：

```
<property name="image" type="byte[]"/> 
```

和这样的数据库设置：

```
CREATE TABLE ...
(
  ...
  image bytea,
  ...
) 
```

当我在数据库中创建记录（有效）并立即使用代码在我的 SWT 应用程序中显示图像时（因此字节数组实际上是由上面的代码创建的），它工作正常并显示图像。但是当我运行我的应用程序并从我的数据库中检索记录时，图像是不可读的。我在创建时和数据库检索后记录了字节数组的内容，它们根本不一样。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:52:09.267

嗯，我觉得很愚蠢。只是为了记录，只是我使用了 pg 8.4 的驱动程序和 pg 9.1 数据库......

# database - Django 原子检查和减量

> ID：15732891
> 
> 赞同：2
> 
> 时间：2013-03-31T18:26:28.293
> 
> 标签：database, django, concurrency, locking

我有一个模型变量，我们称它为 .actions，它是一个整数。这个想法是，人们只有在还有行动的情况下才能做事。

如何检查操作是否 > 0 并随后自动减少操作？我不希望他们打负分。

```
if model.actions > 0:
  Model.objects.filter().update(actions=F('actions')-1) 
```

我认为事务不能解决这个问题，因为它们不处理锁定。[select_for_update](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-for-update)似乎解决了这个问题，但该文档也非常不清楚。它会与默认交易设置一起使用还是需要其他设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:39:38.860

我得到了这个解决方案：

```
returnValue = MyObject.objects.filter(pk=x, points__gt=0).update(points=F('points')-1) 
```

仅在满足条件时更新并为您提供返回值，您可以检查它是否发生（这意味着点是否确实大于 0）。

# objective-c - 读取 plist 文件时出错

> ID：15732898
> 
> 赞同：-4
> 
> 时间：2013-03-31T18:27:02.420
> 
> 标签：objective-c, plist

当我在 Xcode 中添加一个属性列表时，当我们按下按钮时我的应用程序崩溃了。我搜索了很多，但我没有发现错误；请帮我。这是我的 viewController.m。但是没有零变量……所以这不是问题。这是我的 plist 文件：

根（字典）（12 项）

compteur111 字符串 1 compteur222 字符串 2 compteur333 字符串 3 compteur444 字符串 4 compteur555 字符串 5 compteur666 字符串 6 name1 字符串 11 name2 字符串 12 name3 字符串 13 name4 字符串 14 name5 字符串 15 name6 字符串 16

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

//Synthétisation des propriétés
@synthesize labelValeurCompteur1;
@synthesize labelValeurCompteur2;
@synthesize labelValeurCompteur3;
@synthesize labelValeurCompteur4;
@synthesize labelValeurCompteur5;
@synthesize labelValeurCompteur6;

@synthesize nameCompteur1;
@synthesize nameCompteur2;
@synthesize nameCompteur3;
@synthesize nameCompteur4;
@synthesize nameCompteur5;
@synthesize nameCompteur6;

@synthesize compteur11;
@synthesize compteur22;
@synthesize compteur33;
@synthesize compteur44;
@synthesize compteur55;
@synthesize compteur66;

@synthesize compteur01;
@synthesize compteur02;
@synthesize compteur03;
@synthesize compteur04;
@synthesize compteur05;
@synthesize compteur06;

-(IBAction)backgroundTouched:(id)sender
{
    [labelValeurCompteur1 resignFirstResponder];
    [labelValeurCompteur2 resignFirstResponder];
    [labelValeurCompteur3 resignFirstResponder];
    [labelValeurCompteur4 resignFirstResponder];
    [labelValeurCompteur5 resignFirstResponder];
    [labelValeurCompteur6 resignFirstResponder];

    [nameCompteur1 resignFirstResponder];
    [nameCompteur2 resignFirstResponder];
    [nameCompteur3 resignFirstResponder];
    [nameCompteur4 resignFirstResponder];
    [nameCompteur5 resignFirstResponder];
    [nameCompteur6 resignFirstResponder];    
}   

-(IBAction)numeroCompteur:(id)sender
{
    NSLog(@"> numeroCompteur");

    [labelValeurCompteur1 resignFirstResponder];
    [labelValeurCompteur2 resignFirstResponder];
    [labelValeurCompteur3 resignFirstResponder];
    [labelValeurCompteur4 resignFirstResponder];
    [labelValeurCompteur5 resignFirstResponder];
    [labelValeurCompteur6 resignFirstResponder];

    [nameCompteur1 resignFirstResponder];
    [nameCompteur2 resignFirstResponder];
    [nameCompteur3 resignFirstResponder];
    [nameCompteur4 resignFirstResponder];
    [nameCompteur5 resignFirstResponder];
    [nameCompteur6 resignFirstResponder];  

int variableDebutCompteur1 = [[labelValeurCompteur1 text] intValue];
int variableDebutCompteur2 = [[labelValeurCompteur2 text] intValue];
int variableDebutCompteur3 = [[labelValeurCompteur3 text] intValue];
int variableDebutCompteur4 = [[labelValeurCompteur4 text] intValue];
int variableDebutCompteur5 = [[labelValeurCompteur5 text] intValue];
int variableDebutCompteur6 = [[labelValeurCompteur6 text] intValue];    

compteur1.value = variableDebutCompteur1;
compteur2.value = variableDebutCompteur2;
compteur3.value = variableDebutCompteur3;
compteur4.value = variableDebutCompteur4;
compteur5.value = variableDebutCompteur5;
compteur6.value = variableDebutCompteur6;

labelValeurCompteur1.text = [NSString stringWithFormat: @"%d", variableDebutCompteur1];
labelValeurCompteur2.text = [NSString stringWithFormat: @"%d", variableDebutCompteur2];
labelValeurCompteur3.text = [NSString stringWithFormat: @"%d", variableDebutCompteur3];
labelValeurCompteur4.text = [NSString stringWithFormat: @"%d", variableDebutCompteur4];
labelValeurCompteur5.text = [NSString stringWithFormat: @"%d", variableDebutCompteur5];
labelValeurCompteur6.text = [NSString stringWithFormat: @"%d", variableDebutCompteur6];

compteur11 = labelValeurCompteur1.text;
compteur22 = labelValeurCompteur2.text;
compteur33 = labelValeurCompteur3.text;
compteur44 = labelValeurCompteur4.text;
compteur55 = labelValeurCompteur5.text;
compteur66 = labelValeurCompteur6.text;    

{
    NSLog(@" - Writing DataP.plist Counters");
    NSString *error;
    NSString *rootPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *plistPath = [rootPath stringByAppendingPathComponent:@"DataP.plist"];
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects:
                               [NSArray arrayWithObjects: compteur11, compteur22, compteur33, compteur44, compteur55, compteur66, nil]
                                                          forKeys:[NSArray arrayWithObjects: @"compteur111", @"compteur222", @"compteur333", @"compteur444", @"compteur555", @"compteur666", nil]];
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict
                                                                   format:NSPropertyListXMLFormat_v1_0
                                                         errorDescription:&error];
    if(plistData) {
        [plistData writeToFile:plistPath atomically:YES];
    }
    else {
        [error release];
    }        
}

nameCompteur1.text = nameCompteur1.text;
nameCompteur2.text = nameCompteur2.text;
nameCompteur3.text = nameCompteur3.text;
nameCompteur4.text = nameCompteur4.text;
nameCompteur5.text = nameCompteur5.text;
nameCompteur6.text = nameCompteur6.text;

{
    NSLog(@" - Writing DataP.plist Labels");
    NSString *error;
    NSString *rootPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *plistPath = [rootPath stringByAppendingPathComponent:@"DataP.plist"];
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects:
                               [NSArray arrayWithObjects: compteur01, compteur02, compteur03, compteur04, compteur05, compteur06, nil]
                                                          forKeys:[NSArray arrayWithObjects: @"name1", @"name2", @"name3", @"name4", @"name5", @"name6", nil]];
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict
                                                                   format:NSPropertyListXMLFormat_v1_0
                                                         errorDescription:&error];
    if(plistData) {
        [plistData writeToFile:plistPath atomically:YES];
    }
    else {
        NSLog(@"  ! Error writeToFile:plistData:labels");
        [error release];
    }
}

NSLog(@"< numeroCompteur");
}

-(IBAction)changerValeurCompteurUn:(UIStepper *)sender
{
    int variableDebutCompteur1 = [sender value];
    [labelValeurCompteur1 setText:[NSString stringWithFormat:@"%d", (int)variableDebutCompteur1]];
}
-(IBAction)changerValeurCompteurDeux:(UIStepper *)sender
{
    int valeurCompteur2 = [sender value];
    [labelValeurCompteur2 setText:[NSString stringWithFormat:@"%d", (int)valeurCompteur2]];
}
-(IBAction)changerValeurCompteurTrois:(UIStepper *)sender
{
    int valeurCompteur3 = [sender value];
    [labelValeurCompteur3 setText:[NSString stringWithFormat:@"%d", (int)valeurCompteur3]];
}
-(IBAction)changerValeurCompteurQuatre:(UIStepper *)sender
{
    int valeurCompteur4 = [sender value];
    [labelValeurCompteur4 setText:[NSString stringWithFormat:@"%d", (int)valeurCompteur4]];
}
-(IBAction)changerValeurCompteurCinq:(UIStepper *)sender
{
    int valeurCompteur5 = [sender value];
    [labelValeurCompteur5 setText:[NSString stringWithFormat:@"%d", (int)valeurCompteur5]];
}
-(IBAction)changerValeurCompteurSix:(UIStepper *)sender
{
    int valeurCompteur6 = [sender value];
    [labelValeurCompteur6 setText:[NSString stringWithFormat:@"%d", (int)valeurCompteur6]];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"Bois.JPG"]]];

    // Do any additional setup after loading the view, typically from a nib.
    self = [super init];
    NSLog(@"> viewDidLoad");
        if (self) {
            NSString *errorDesc = nil;
            NSPropertyListFormat format;
            NSString *plistPath;
            NSString *rootPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                                      NSUserDomainMask, YES) objectAtIndex:0];
            plistPath = [rootPath stringByAppendingPathComponent:@"DataP.plist"];
            if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath]) {
                plistPath = [[NSBundle mainBundle] pathForResource:@"DataP" ofType:@"plist"];
            }
            else
                NSLog(@"  ! Error reading DataP.plist");
            NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
            NSDictionary *tempR = (NSDictionary *)[NSPropertyListSerialization
                                                  propertyListFromData:plistXML
                                                  mutabilityOption:NSPropertyListMutableContainersAndLeaves
                                                  format:&format
                                                  errorDescription:&errorDesc];
            if (!tempR) {
                NSLog(@"  ! Error reading plist: %@, format: %d", errorDesc, format);
            }
            self.compteur11 = [tempR objectForKey:@"compteur111"];
            labelValeurCompteur1.text = compteur11;
            self.compteur22 = [tempR objectForKey:@"compteur222"];
            labelValeurCompteur2.text = compteur22;
            self.compteur33 = [tempR objectForKey:@"compteur333"];
            labelValeurCompteur3.text = compteur33;
            self.compteur44 = [tempR objectForKey:@"compteur444"];
            labelValeurCompteur4.text = compteur44;
            self.compteur55 = [tempR objectForKey:@"compteur555"];
            labelValeurCompteur5.text = compteur55;
            self.compteur66 = [tempR objectForKey:@"compteur666"];
            labelValeurCompteur6.text = compteur66;

             self.compteur01 = [tempR objectForKey:@"name1"];
             nameCompteur1.text = compteur01;
             self.compteur02 = [tempR objectForKey:@"name2"];
             nameCompteur2.text = compteur02;
             self.compteur03 = [tempR objectForKey:@"name3"];
             nameCompteur3.text = compteur03;
             self.compteur04 = [tempR objectForKey:@"name4"];
             nameCompteur4.text = compteur04;
             self.compteur05 = [tempR objectForKey:@"name5"];
             nameCompteur5.text = compteur05;
             self.compteur06 = [tempR objectForKey:@"name6"];
             nameCompteur6.text = compteur06;
        }
    NSLog(@"< viewDidLoad");
}    

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

这是我的崩溃日志：

```
2013-03-31 20:08:20.723 iCounterClick[28622:c07]   ! Error reading DataP.plist
2013-03-31 20:08:21.739 iCounterClick[28622:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSDictionary initWithObjects:forKeys:]: count of objects (0) differs from count of keys (1)'
*** First throw call stack:
(0x1c96012 0x10d3e7e 0x1ca1737 0x1cc28c2 0x2214 0x10e7705 0x1b2c0 0x257a64 0x10e7705 0x1b2c0 0x1b258 0xdc021 0xdc57f 0xdb6e8 0x4acef 0x4af02 0x28d4a 0x1a698 0x1bf1df9 0x1bf1ad0 0x1c0bbf5 0x1c0b962 0x1c3cbb6 0x1c3bf44 0x1c3be1b 0x1bf07e3 0x1bf0668 0x17ffc 0x1c9d 0x1bc5 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:36:56.357

我同意**@JoshCaswell**。根据您的问题，很难理解发生了什么。

通常类似的错误是由`nil`值引起的。类似错误的示例可以从以下代码段中得出

```
[NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: myObject, nil] forKeys:[NSArray arrayWithObjects: @"myObjectKey", nil]]; 
```

如果`myObject`是的话`nil`，混蛋！您将收到一个异常，这意味着对象数组的大小为 0，而键数组的大小为 1。

**我的建议**

尝试删除一些代码并向我们展示您要加载的 plist 文件。

**我的笔记**

快速阅读您的代码，我看到了一些奇怪的东西。特别是，您为什么在`viewDidLoad`方法中使用这些行？

```
self = [super init];
NSLog(@"> viewDidLoad");
    if (self) { 
```

在初始化程序中使用它们。

`viewDidLoad`方法具有特定含义：您确定`view`与控制器相关联的已正确加载到内存中，并且您可以执行其他自定义。

**编辑**

如前所述，您不能`nil`在字典中插入对象。一个简单的测试如下：

```
if(compteur11) {
    NSLog(@"compteur11 is %@");
} else {
    NSLog(@"compteur11 is nil");
} 
```

你收到什么日志？

# javascript - 附加 DocumentFragment 会导致多少次回流？

> ID：15732900
> 
> 赞同：9
> 
> 时间：2013-03-31T18:27:11.433
> 
> 标签：javascript, html, reflow, documentfragment

Using[`DocumentFramgment`](http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-B63ED1A3)允许我们将 DOM 元素彼此附加，而不会导致[浏览器重排](https://stackoverflow.com/a/2549317/1348195)（即使用离线 DOM 树）。许多像[jQuery](http://ejohn.org/apps/workshop/adv-talk/#6)这样的库使用文档片段来提高性能。

文档片段可以具有复杂的结构。例如，假设它代表如下内容：

```
<div>
   <span>
       <a href='asd'>asd</a>
   </span>
   <span>
       <a href='asd2'>asd2</a>
   </span>
   <div>
       <div>
          Hello World
       </div>
   </div>
</div> 
```

或包含*多个*子项的文档片段：

```
<h2>Title 1</h2>
<p>Lorem ipsum.</p>
<p>Lorem ipsum.</p>
<h2>Title 2</h2>
<p>Lorem ipsum.</p>
<p>Lorem ipsum.</p> 
```

通常，当我们完成构建片段时，我们会将其附加到主 DOM 树。

当我们这样做时会发生多少次回流？它是否取决于文档片段的直接孩子的数量？

## **更新：**

我收到了来自Google Chrome 团队的[Addy Osmani的回复：](http://addyosmani.com/blog/)

> 只有一个 DOM 重排。PS：我们更倾向于将重排称为布局，因为它基本上是在页面中触发布局/重绘的事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T18:41:24.310

每次调用导致一个动作的动作时，都会发生一个 DOM 回流过程。我们可以在[这篇文章](https://developers.google.com/speed/articles/javascript-dom?hl=fr)中读到：

> 这种模式让我们可以创建多个元素并将它们插入到 DOM 中，从而触发单个回流。它使用称为 DocumentFragment 的东西。我们在 DOM 之外创建了一个 DocumentFragment（因此它是不合流的）。然后我们创建并添加多个元素。最后，我们将 DocumentFragment 中的所有元素移动到 DOM 中，但会触发一次重排。

有[多种操作](https://stackoverflow.com/questions/510213/when-does-reflow-happen-in-a-dom-environment?rq=1)会导致 DOM 重排，包括将新元素附加到文档。使用 a 的目的`DocumentFragment`是能够在单个操作中将内容附加到 DOM，从而导致单个回流过程。

根据[这篇文章](https://developers.google.com/speed/articles/reflow)，我们可以读到：

> 有时重排文档中的单个元素可能需要重排其父元素以及跟随它的任何元素。

但是，所有这些回流操作都将发生在一个**回流过程中**。

我创建了一个[小提琴](http://jsfiddle.net/ycjxm/)来证明这一点。使用 chrome 的时间轴，我们可以清楚地看到渲染发生在单个块中。

![在此处输入图像描述](https://i.stack.imgur.com/24lye.png)

# objective-c - 防止在公共接口中向 NSMutableArray 添加对象

> ID：15732902
> 
> 赞同：10
> 
> 时间：2013-03-31T18:27:29.083
> 
> 标签：objective-c, cocoa, encapsulation, declared-property

我想在公共接口中保护对 NSMutableArray 的访问

我试图通过在公共接口中将属性定义为 NSArray 并在私有接口中定义为 NSMutableArray 来做到这一点，如下所示：

```
@interface Order : NSObject
@property (readonly, strong, nonatomic) NSArray* comments;
@end

@interface Order()
@property (readwrite, strong, nonatomic) NSMutableArray* comments;
@end 
```

但这不起作用 - 所以我必须在公共接口 NSMutableArray 中定义属性：

```
@interface Order
@property (strong, nonatomic) NSMutableArray* comments;
@end 
```

目标是为 API 客户端提供对注释的只读访问权限以及`addObject:`对实现中方法的完全访问权限。

所以定义目标更清晰：

1.  客户端应该可以访问属性作为 NSArray 而不能访问突变方法。
2.  客户不应该有能力更新评论以指向新的价值。
3.  该解决方案必须在不创建额外结构和数组复制的情况下完成。

所以简单的问题是是否有可能使属性的公共定义更通用（NSArray 而不是 NSMutableArray）。

有没有其他干净的方法可以达到目标，或者我必须在任何地方使用 NSMutableArray？

**解析度**

在查看了我最初的问题和答案后，我意识到我想在公共接口中使用更通用的类 NSArray 并在实现中使用 NSMutableArray - 但对于一个属性来说这是不可能的。所以答案是不可能的。

所以我将只使用 NSMutableArray 的单个属性，而不需要任何额外的保护。

但是，如果您真的更喜欢保护而不是简单和高效，我也会选择最合适的答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T18:40:39.007

如果您只想允许客户端读取数组，则不需要公共*属性。*

只需创建一个返回私有可变数组副本的访问器方法：

```
@interface Order : NSObject
- (NSArray *)allComments;
@end

@implementation Order ()
@property (nonatomic, strong) NSMutableArray * comments;
@end

@implementation Order

@synthesize comments;

- (NSArray *)allComments
{
    return [[self comments] copy];
}

@end 
```

这种模式可以在例如`NSView`:中看到，`constraints`并且`subviews`在内部是可变的，但仅通过返回非可变数组的单个方法公开以供读取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T18:42:08.137

一种解决方案是将属性声明为只读的`NSArray`. 然后在您的实现中，基于`NSMutableArray`.

在.h中：

```
@interface Order : NSObject
@property (readonly, strong, nonatomic) NSArray* comments;
@end 
```

在他们中：

```
@interface Order()
@property (strong, nonatomic) NSMutableArray* internalComments;
@end 
```

不要合成 readonly 属性，而是编写：

```
- (NSArray *)comments {
    return [self.internalComments copy];
} 
```

在 .m 中，您可以使用 .m 完成所有操作`self.internalComments`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-04T13:11:41.370

如果您的用例可以接受，一个更清洁的解决方案是将属性声明为`NSArray`，同时使用`NSMutableArray`. 客户端可以通过简单地将数组转换为可变数组来从技术上修改数组，但您明确表示这样做是一个坏主意。

A`@property`只是两个方法的包装器，getter 和 setter，它们通常由存储变量支持。实现此解决方案的最简单方法是：

```
@interface Order : NSObject
{
    NSMutableArray *_comments;
}

@property (readonly, strong, nonatomic) NSArray *comments;

- (void)addComment:(Comment *)comment;

@end

@implementation Order
@synthesize comments=_comments; // Can be omitted if you use Xcode 4.4+

- (void)addComment:(Comment *)comment
{
    [_comments addObject:comment];
}

@end 
```

如果您希望用户能够替换整个数组 ( `order.comments = ...`)，请删除`readonly`属性上的属性并覆盖该`-setComments:`方法：

```
- (void)setComments:(NSArray *)array
{
    [_comments release]; // Can be omitted if you are using ARC
    _comments = [array mutableCopy];
} 
```

* * *

值得注意的是，由于 Objective-C 是一种动态语言，因此不可能完全阻止某人访问变量，因为如果你*真的*想在你的事情中四处寻找，你可以[直接与运行时接口](https://developer.apple.com/library/mac/documentation/cocoa/reference/objcruntimeref/Reference/reference.html)或通过他们的选择器调用方法'不应该。你真正能做的就是清楚地表明这样做是一个坏主意。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T19:02:50.373

两种解决方案：

1.  返回数组的非可变副本 - 客户端一次性获取所有评论。
2.  返回评论和个人评论的数量。

任你选择，两者都有争论，这取决于什么适合你：

```
@interface Order : NSObject

// solution one - return a copy
@property (readonly, strong, nonatomic) NSArray* comments;

// solution two - return individual comments
@property (readonly) NSUInteger commentCount;
- (id) comment:(NSUInteger)number;

@end

@interface Order()

// internal property - mutable
@property (readwrite, strong, nonatomic) NSMutableArray* privateComments;

@end

@implementation Order

// solution one - return a copy
- (NSArray *) comments            { return [self.privateComments copy]; }

// solution two - return individual comments
- (NSUInteger) commentCount       { return self.privateComents.count; }
- (id) comment:(NSUInteger)number { return self.privateComment[number]; }

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T18:28:54.113

如果您根本不希望客户端能够设置此属性，则在公共接口中将其声明为`readonly`. 如果您不希望客户端能够改变客户端可以读取的数组，则将其声明为 NSArray。同时，在你这边，你是`readwrite`和`copy`。通过成为`readwrite`您可以获取一个`mutableCopy`（这将是一个 NSMutableArray），进行更改，然后再次设置属性；通过成为`copy`您确保客户端始终看到 NSArray。

所以，客户：

```
NSArray* arr = order.comments; // ok
[arr addObject: @"ha"]; // no, can't
order.comments = someOtherArray; // no, can't 
```

内部订单：

```
NSMutableArray* marr = self.comments.mutableCopy;
[marr addObject: @"ha"];
self.comments = marr; // and it is magically turned back into an NSArray 
```*

# dbus - DBus 按需对象创建

> ID：15732905
> 
> 赞同：0
> 
> 时间：2013-03-31T18:27:40.307
> 
> 标签：dbus, qdbus

因此，DBus .service 机制允许 DBus 在请求的服务未运行时启动进程。我正在寻找类似的东西，但寻找对象。

如果我有可用的 Object_0 到 Object_9，但只想按需为 DBus 注册它们，即当有人请求对象时。路径将是已知的，因此我基本上是在寻找一种方法来“捕获”未注册的错误并在运行时动态添加对象（或提供错误，例如 Object_11 被要求） .

有推荐的方法吗？我必须认为它以前做过，但我什么也没找到。

# java - Jfugue中的乐器没有变化

> ID：15732906
> 
> 赞同：2
> 
> 时间：2013-03-31T18:27:41.120
> 
> 标签：java, jfugue

我正在运行 Jfugue 测试程序，代码如下：

```
package ge;

import org.jfugue.*;

public class GE {
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
       Player player = new Player();
       Pattern pattern = new Pattern("C D E F G A B I[MARIMBA]");
       player.play(pattern);
       System.exit(0); // If using Java 1.4 or lower
    }
} 
```

到目前为止，代码确实有效，也就是说，它编译并播放了音符。然而，我可以随心所欲地改变乐器，我总是得到钢琴音乐。

我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T20:04:44.170

您应该将仪器设置在序列的开头，而不是结尾。序列`"I[MARIMBA] C D E F G A B"`对我来说是一种马林巴乐器。

# android - 安卓：AnimationDrawable

> ID：15732909
> 
> 赞同：1
> 
> 时间：2013-03-31T18:27:56.093
> 
> 标签：android, animation, animationdrawable

```
I hope for the help. I create at first for ImageView TranslateAnimation, then as AnimationEnd I register creation of AnimationDrawable in ListenerAnimation and I start it.
ImageView MyImageView = New ImageView(this);
MyImageView.setImageResources(R.drawable.mypic1);
TranslateAnimation tr = New TranslateAnimation(0, 0, 0, 50);
tr.setFillAfter(true);
tr.setDuration(3000); 
```

MyImageView.startanimation(tr); 但我只看到第一枪。然后，如果在那之后我创建并且我将启动任何动画，例如，再次 TranslateAnimation，AnimationDrawable 完全开始。AnimationDrawable ad = New AnimationDrawable(); ad.setOneShot(true); ad.addFrame(getResources().getDrawable(R.drawable.mypic1), 500); ad.addFrame(getResources().getDrawable(R.drawable.mypic2), 500); ad.selectDrawable(0); MyImageView.setImageDrawable(ad); ad.start(); 在 AnimationDrawable 还是 Animation 之后不创建什么？在此先感谢您的帮助。

# html - 我如何在此表单旁边保留 h1 标签和 ap 标签？（引导）

> ID：15732911
> 
> 赞同：0
> 
> 时间：2013-03-31T18:28:01.090
> 
> 标签：html, css, twitter-bootstrap

我的网站上有一个[表格](http://www.invisional.com/contactus.html)。我正在尝试将文本放在它的右侧。所以像一个`h1`标签和一些段落，我已经尝试过：

```
<div class="hero-unit">
        <h1 class="text-right">Header</h1>
        <form action="sent.php" method="post" title="contact" lang="en">
            <p>Your Name:</p> <div class="control-group">
          <div class="controls">
            <div class="input-prepend">
              <span class="add-on">
                <i class="icon-user"></i>
              </span>
              <input class="span2" name="name" type="text">
            </div>
          </div>
        </div> 
```

和

```
<div class="hero-unit">
        <h1 class="text-right" style="display: inline-block;">Header</h1>
        <form action="sent.php" method="post" title="contact" lang="en">
            <p>Your Name:</p> <div class="control-group">
          <div class="controls">
            <div class="input-prepend">
              <span class="add-on">
                <i class="icon-user"></i>
              </span>
              <input class="span2" name="name" type="text">
            </div>
          </div>
        </div> 
```

有人对我有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:52:57.743

您正在使用[Bootstrap](http://twitter.github.com/bootstrap/)，因此您只需向`row`容器添加一个类，`span4`向表单添加一个类，并在表单下方添加一个`<div>`带有文本和类的新类：`span8`

```
<div class="hero-unit" class="row">
  <form ... class="span4">
    ...
  </form>

  <div class="span8">
    <h2>On the Origin of Species</h2>
    <p>On the Origin of Species, published on 24 November 1859, is a work of scientific literature by Charles Darwin which is considered to be the foundation of evolutionary biology.</h2>
  </div>
</div> 
```

当浏览器窗口足够宽时，文本将自动出现在右侧。

查看结果演示：http: [//jsbin.com/imiciv/1](http://jsbin.com/imiciv/1)

有关 Bootstrap 网格系统的更多信息，请阅读文档：

[http://twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:50:10.657

要将`p`或放置`h1`在表单的右侧，最简单的方法是将标签放置在`form`. 然后和到。`float`_`form``h1``left`

HTML：

```
<div class="hero-unit">
    <form action="sent.php" method="post" title="contact" lang="en">
        ...
    </form>
    <h1>Header</h1>
    <p>Paragraph</p>
</div> 
```

CSS：

```
form, h1, p {
    float: left;
} 
```

## [JS 小提琴示例](http://jsfiddle.net/g5SQw/1/)

# php - 无法在mysql表中插入post数组

> ID：15732916
> 
> 赞同：1
> 
> 时间：2013-03-31T18:28:13.813
> 
> 标签：php, mysql, arrays, insert

我正在尝试将包含 8 个字段的 POST 数组插入到 8 列的 mysql 表中，但是在提交表单时出现此错误：

> 错误：列计数与第 1 行的值计数不匹配

当我搜索此错误时，表示传递的数据不适合数据库表的列数，但该表有 8 列。我做错了什么？

这是我的代码：

```
<html>
<body>
<form action="" method="post">

Nombre: <input type="text" name="data[]">
Apellido: <input type="text" name="data[]"></br>
Direccion: <input type="text" name="data[]"></br>
Telefono: <input type="text" name="data[]">
Telefono 2: <input type="text" name="data[]"></br>
Email: <input type="text" name="data[]"></br>
Edad: <input type="text" name="data[]"></br>
Foto: <input type="text" name="data[]"> 
<input type="submit">

</form>

<?php

$con=mysql_connect("localhost","root","");

if (!$con){  die('Could not connect: ' . mysql_error()); }

mysql_select_db("ag_online", $con);

foreach($_POST['data'] as $d ){
    $sql = "INSERT INTO `contacts` VALUES ('', '".$d."');";
    mysql_query( $sql ); 
}

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}   
echo "1 record added";

mysql_close($con);

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:30:45.870

如果表有 8 列，则不能使用：

```
$sql = "INSERT INTO `contacts` VALUES ('', '".$d."');"; 
```

直接地。

您必须指定要插入的列：

```
$sql = "INSERT INTO `contacts` (col1, col2) VALUES ('', '".$d."');"; 
```

 **使用时**更新****

 **```
foreach($_POST['data'] as $d ){
    $sql = "INSERT INTO `contacts` VALUES ('', '".$d."');";
    mysql_query( $sql ); 
} 
```

与使用相同

```
foreach($_POST['data'] as $d ){
    $sql = "INSERT INTO `contacts` (Nombre, Apellido, Direccion, Telefono, Telefono2, Email, Edad, Foto)  VALUES ('', '".$d."');";
    mysql_query( $sql ); 
} 
```

正如你在评论中所说。

但是，当您循环播放时`$_POST['data']`，它会变成这样：

第一个循环：

```
 $sql = "INSERT INTO `contacts` (Nombre, Apellido, Direccion, Telefono, Telefono2, Email, Edad, Foto)  VALUES ('', 'FIRST_VALUE');"; 
```

第一个循环：

```
 $sql = "INSERT INTO `contacts` (Nombre, Apellido, Direccion, Telefono, Telefono2, Email, Edad, Foto)  VALUES ('', 'SECOND_VALUE');"; 
```

也就是说，你会在说你会给 8 之后尝试插入 2 个值。

您可以使用以下内容填充变量`$info`，然后执行唯一操作`insert`：

```
$info=implode(",", $_POST['data']);
$info="\"".implode("\",\"", $_POST['data'])."\""; //<--- updated answer, to have all items "wrapped" 
```

接着

```
$sql = "INSERT INTO `contacts` (Nombre, Apellido, Direccion, Telefono, Telefono2, Email, Edad, Foto)  VALUES ('', $info);"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:36:54.500

如果您试图将每一个都放在列中，那么您可能需要考虑这一点

```
$sql = "INSERT INTO `contacts` VALUES ('";
foreach($_POST['data'] as $d ){
 $sql .= $d."','";
}
 $sql = substr_replace($sql, "", -2);
 $sql .= ");";
 mysql_query( $sql ); 
```**

# c - 将数据打印到文本文件中

> ID：15732918
> 
> 赞同：0
> 
> 时间：2013-03-31T18:28:36.347
> 
> 标签：c

我想将一些值打印到包含一些数据的文本文件中。问题是我想在文本文件中已经存在的数据之后的每行末尾打印数据。

这是我的文本文件：

```
100 1 
120 2
160 6
200 7
300 6 
```

来源：

```
for(i=0; i<5; i++){
    fseek(txt, 2, SEEK_SET);
    fprintf(txt," %d\n",num[m]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T18:32:25.823

在 C 中做到这一点的唯一方法：

1.  读入每一行
2.  将您想要的数据附加到行尾，或者只是重写整行
3.  并将该行写入一个新文件。

你可以使用 sed/awk 做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:42:14.270

使用另一个文件..用“新”文件交替复制原始文件的每一行...完成后删除原始文件并将其重命名为原始文件的名称

while(fread()) { 复制到临时文件。& 将新行添加到临时文件 }

删除（原始）；重命名（临时，原始）；

# iphone - 在故事板中使用 UIPageViewController

> ID：15732919
> 
> 赞同：5
> 
> 时间：2013-03-31T18:28:37.237
> 
> 标签：iphone, ios, storyboard, uipageviewcontroller

有没有办法在情节提要中为 UIPageViewController 配置数据源、委托和视图控制器而无需编写代码？我确实在 UIPageViewController 中看到了数据源和委托的出口，但是无法在场景之间进行连接，也无法将其他控制器添加到同一场景中。

如果在 IB 中根本无法配置 UIPageViewController，那么在 Interface Builder 中拥有 UIPageViewController 的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T19:08:27.440

它在 Xcode 中是完全可配置的。您将连接`data-source`和`delegate`出口到继承适当协议（`UIPageViewControllerDataSource`和`UIPageViewControllerDelegate`）的类。

但是，您必须对这两种协议进行一些实现——通常是通过访问模型的数据。让 UIPageView 的控制器处理这两个协议是常见的，但不是必需的。作为：

```
@interface MyPageViewController : UIPageViewController
  <UITableViewDataSource,  UITTableViewDelegate>
...
@end 
```

# android - 与广播接收器一起使用的 PendingIntent 不起作用

> ID：15732920
> 
> 赞同：3
> 
> 时间：2013-03-31T18:28:38.597
> 
> 标签：android, broadcastreceiver, alarmmanager

我要注册一个 BroadcastReceiver 并向它传递一个我想在收到广播时显示的 id。

我想做的是在特定实例（即警报响起时）访问数据库条目，这就是我通过意图传递 id 的原因

```
View.OnClickListener saveHandler = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        Log.d("Insert: ", "Inserting ..");

        mContext = getApplicationContext();
        objalarmManger = (AlarmManager) getSystemService(ALARM_SERVICE);

        Intent broadcastIntent = new Intent(mContext,
                MyBroadCastReceiver.class);
        broadcastIntent.putExtra("id",22);
        PendingIntent objPI = PendingIntent.getBroadcast(mContext, 0,
                broadcastIntent, 0);

        Calendar objC = Calendar.getInstance();
        objC.set(yearData, monthData, dayData, hour, min);
        objalarmManger.set(AlarmManager.RTC_WAKEUP, objC.getTimeInMillis(),
                objPI);
    }
}; 
```

广播接收器代码是

```
public class MyBroadCastReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context arg0, Intent arg1) {

    int id = arg1.getIntExtra("id", 0);

    Toast.makeText(arg0, id, Toast.LENGTH_LONG).show();
    Log.d("Received", id + "");
} 
```

}

我看不到任何 log cat entiers，代码实现有什么问题吗？任何帮助，将不胜感激 ：）

# php - 在字符串中回显 php

> ID：15732929
> 
> 赞同：0
> 
> 时间：2013-03-31T18:29:33.240
> 
> 标签：php, arrays, string, echo

我不知道如何很好地解释它，因为我是一个 php 菜鸟，但我试图在 $meta['track']['title'] 中回显标题（我想从数据库中选择）

```
<?php
$meta['neuwsarch']['title'] = "Title";
$meta['neuwsarch']['keywords'] = "key, key2, key3";
$meta['neuwsarch']['description'] = "description";

$data = mysql_query("SELECT title FROM news WHERE seo='".$seo."' AND ID='".$ID."'");
$news = mysql_fetch_assoc($data) ;

$meta['news']['title'] = "ECHO TITLE IN HERE";
$meta['news']['keywords'] = "kwd1, kwd2, kwd3";
$meta['news']['description'] = "trackert";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:52:41.263

您可能希望遍历 MySQL 返回的结果集。

您可以将最后 3 行放在一个 while 循环中，该循环遍历从`mysql_fetch_array()`.

并且，开始使用 PDO 或 MySQLi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:18:52.497

我已经修复了它，我只是将它添加到了行的顶部：

```
$ID = intval ($_GET['ID']);
$seo =($_GET['seo']); 
```

并使用了这个：

```
$meta['news']['title'] = $news['title']; 
```

谢谢你们的回答！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:39:23.440

[echo](http://php.net/manual/en/function.echo.php)只是在屏幕上显示一个值或字符串。因此，如果您想在屏幕上显示 $news['title'] 的值，请使用 echo $news['title']。

您要做的是为数组元素 $meta['news']['title'] 分配 SQL 查询中的 'title' 值，您希望这样做：

```
$meta['news']['title'] = $news['title']; 
```

# javascript - 如何将一组重复的单选按钮映射到 Angular 控制器模型上的数组？

> ID：15732934
> 
> 赞同：2
> 
> 时间：2013-03-31T18:30:16.603
> 
> 标签：javascript, angularjs

例如，我有一个控制器，它有一个名为数组属性的控制器，我在一个带有一`'houses'`组`ng-repeat`单选按钮（真/假，或者你有什么）的表格行上使用它。模型应该在那些单选按钮上，以便选择它们中的任何一个将设置模型数组中相应项目的值？我尝试将模型设置为：

```
ng-model="array[{{$index}}]" 
```

但这没有用。我取出了`{{ }}`并只留下了文字字符串'$index'。

这在Angular中甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:20:16.763

它应该在没有花括号的情况下工作。我做了一个[Plunker](http://plnkr.co/edit/X0V05iKmx15fs91tvtmF?p=preview)。

```
$scope.houses = [true, false, true, false, false]; 
```

```
<ul>
  <li ng-repeat="house in houses">
    Checked: <input type="checkbox" ng-model="houses[$index]" />
  </li>
</ul>

{{houses}} 
```

我不明白您是否有一个复杂的对象并想要设置它的属性（即`ng-model="houses[$index].checked"`。如果是这种情况，那么您应该只使用迭代器（即`ng-model="house.checked"`），因为`house`它将遍历每个数组对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:15:08.190

实际上，对于这种特殊情况，存在一个[问题。](https://github.com/angular/angular.js/issues/305)这似乎是不可能的，单选按钮有自己的范围，因为`ng-repeat`.

有一个使用检查属性的替代解决方案：[见代码](https://gist.github.com/anonymous/970934)

# java - 访问者和策略模式中泛型的类型安全

> ID：15732935
> 
> 赞同：1
> 
> 时间：2013-03-31T18:30:22.820
> 
> 标签：java, oop, design-patterns

我正在尝试创建一个为 instanceof 对象`Visitor<T>`返回某个值的对象。`strategy`它已经有效，但我无法获得`Generics`类型安全。我在以下代码中缺少什么：

```
class Base;
class Foo extends Base;
class Bar extends Base;

interface Visitor<T> {
    T visit (Foo foo);
    T visit (Bar bar);
}

interface Strategy<T> {
    void action(T obj);
}

class FooStrategy implements Strategy<Foo> {
    @Override
    void action(Foo foo) {
        //perform strategy action on foo
    }
}

//References to generic type Strategy<T> should be parameterized
class MyVisitor implements Visitor<Strategy> {

    //References to generic type Strategy<T> should be parameterized
    @Override
    Strategy visit(Foo foo) {
        return new FooStrategy();
    }

    //References to generic type MyStrategy<T> should be parameterized
    @Override
    Strategy visit(Bar bar) {
        return new BarStrategy();
    }
} 
```

在类`MyVisitor`eclipse 中不断抱怨`Strategy<T>`应该参数化。制作这个通用构造我缺少什么`typesafe`？

**更新：**

我想像这样使用它：

```
 Visitor<Strategy> visitor = new MyVisitor();
        Strategy strat = drawable.accept(visitor);

        //use the strategy
        Base object; //may be a Foo or Bar or whatever
        strat.action(object); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:32:52.520

您可以`? extends Base`在 type 参数中添加一个以表明它是您不关心的任何类型的策略，但它必须是 Base 的子类。

```
class MyVisitor implements Visitor<Strategy<? extends Base>> {
  @Override
  Strategy<? extends Base> visit(Foo foo) {
    return new FooStrategy();
  }
  @Override
  Strategy<? extends Base> visit(Bar bar) {
    return new BarStrategy();
  }
} 
```

```
 Visitor<Strategy<? extends Base>> visitor = new MyVisitor();
    Strategy<? extends Base> strat = drawable.accept(visitor); 
```

但是，您不能调用这样的策略：

```
 //use the strategy
    Base object; //may be a Foo or Bar or whatever
    strat.action(object);  // <--- error. 
```

因为动作方法实际上有一个签名

```
<U extends Base> void action(U object); 
```

即参数的类型可能*需要*Base 的任意子类，并且可以传递给 Base 的任意子类的唯一类型是`null`.

要解决这个问题，只需让 FooStrategy 和 BarStrategy 实现`Strategy<Base>`：

```
class FooStrategy implements Strategy<Base> { void action(Base obj) { ... } }
class BarStrategy implements Strategy<Base> { void action(Base obj) { ... } }

class MyVisitor implements Visitor<Strategy<Base>> {
  @Override
  Strategy<Base> visit(Foo foo) {
    return new FooStrategy();
  }
  @Override
  Strategy<Base> visit(Bar bar) {
    return new BarStrategy();
  }
}

Visitor<Strategy<Base>> visitor = new MyVisitor();
Strategy<Base> strat = drawable.accept(visitor);

Base object;
strat.action(object); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:31:21.607

这不是访客。即使是这样，这也不是一个正确的用途。访客使用双重调度；这没有那个。

# php - 通过单击作为行标题的链接显示表的整行？

> ID：15732936
> 
> 赞同：0
> 
> 时间：2013-03-31T18:30:24.283
> 
> 标签：php

我想做的事情就像在许多新闻网站上完成的工作。假设我有一张新闻表。每条新闻都有标题和全文。所以我想在一个页面中显示新闻。我想将页面中显示的新闻限制为例如每页三个新闻（使用`limit`简单的查询）并且我只想显示标题。但我希望标题是全文新闻的链接。我的意思是当用户点击它时，会出现一个带有该新闻全文的新页面。所以我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:19:14.140

新闻标题.php：

```
 <?php
 //connection; then simple mysql_query and fetch (mysql is deprecated, so reconstruct it with another lib
 $sql = "SELECT id, news_content, news_title FROM news;";
 $result = mysql_query($sql);
 while ($row = mysql_fetch_assoc($result)) {
    ?>
  <a href="news.php?id=<?=$row['id']; ?>"><?= $row['news_title']; ?></a>
 <?php

 }   
 ?> 
```

然后创建 news.php：

```
 <?php
 //connection; then simple mysql_query and fetch (mysql is deprecated, so reconstruct it with another lib
 $sql = "SELECT id, news_content, news_title FROM news WHERE id = ". $_GET['id'] . ";";
 $result = mysql_query($sql);
 while ($row = mysql_fetch_assoc($result)) {
   ?>
 <p><?= $row['news_content']; ?>
 <?php

  }
 ?> 
```

它将为您创建带有新闻标题的超链接，指向新闻 id 并在其中显示 news_content。它将通过 ie news.php?id=5 访问 news.php

如果你明白了，你可能会改变一些东西以获得更高的安全性、干净和新鲜的代码，以及设计

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:45:05.497

您回显 $row['title'] 链接到 $row['id'] 的页面和接收 $_GET['id'] = $row['id'] 的页面，因此它回显 $row['new' ]`(SELECT`新`from news WHERE id = $_GET['id'])`

# video - WinJS 视频元素中的 HTTP 字幕

> ID：15732937
> 
> 赞同：4
> 
> 时间：2013-03-31T18:30:28.583
> 
> 标签：video, windows-runtime, html5-video, winjs

在[HTML 媒体播放示例](http://code.msdn.microsoft.com/windowsapps/Media-Playback-Sample-3bdbe7c9)中，有一段代码演示了如何为视频添加字幕：

```
 <video id="subtitleVideo" style="position: relative; z-index: auto; width: 50%;"
        src="http://ie.microsoft.com/testdrive/Videos/BehindIE9AllAroundFast/Video.mp4"
        poster="images/Win8MediaLogo.png" loop controls>
        <track id="scenario3entrack" src="media/sample-subtitle-en.vtt" kind="subtitles"
            srclang="en" default>
    </video> 
```

它工作正常，但是当我将字幕轨道 src 更改为 时`src="http://gilevskaya.com/subs.vtt"`，字幕停止工作。

提供的文件是相同的，为什么它不起作用以及如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-22T20:02:35.837

我已经在我自己的域上重新创建了这个问题。一开始没有字幕。我注意到 Visual Studio 中的 JavaScript 控制台出现错误。

> MEDIA12604：文本轨道：未知的 MIME 类型。小时=8007000b

所以我添加了 mime 类型。我的网站在 Apache 上运行。我将此行添加到`.htaccess`文件中：

> AddType text/vtt;charset=utf-8 .vtt

这将`.vtt`类型`text/vtt`设置为 并将编码设置为`utf-8`。

我相信不难找到为其他服务器添加 mime 类型的方法。

我是我的情况，我也必须将“www”添加到 url……但我认为这与服务器的设置方式有关。你可能不需要这个。

# jquery - jQuery Mobile CSS 问题

> ID：15732940
> 
> 赞同：0
> 
> 时间：2013-03-31T18:30:49.903
> 
> 标签：jquery, css, jquery-mobile

我在 jQuery mobile 中有一个页面，我在页面本身中有一些自定义的 css，但是当我通过 ajax 调用此页面时，它不会加载自定义 css。但是，如果我刷新页面，页面会使用自定义 css 加载。我怎样才能阻止这种情况发生，因为我只希望自定义 css 在页面被调用时显示。我的代码如下：

```
<!doctype html>
<html lang="en">
<head>
    <title>Player</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <style>     
        #navgroup {text-align:center;}
        #navgroup div {display:inline-block;}

            .containing-element .ui-slider-switch
        {
            width: 100%;
        }

        input.ui-slider-input {display: none;}

        .slider-shit .ui-btn
        {
            margin-left: -15px;
            margin-top: -15px;
        }

        .slider-shit .ui-slider
        {
            width: 100%;
            top: 3px;
            margin: 0;
            opacity: 1;
        }

        .slider-shit
        {
            padding: 0 20px 0 0;
        }

        .ui-slider div {
            margin:  0 15px 0 38px !important;
        }

        .ui-slider div div {
            margin:  0 !important;
        }

        #posSlider {
             display: none;           
        }

        #nextSong {
            border-right-width: 1px !important;   
            border-bottom-right-radius: inherit;
            border-top-right-radius: inherit;    
        }

        #songOptionsButton {
            position: absolute;
            bottom: 10px;
            right: 10px;
            border-left-width: 1px !important;
            border-bottom-left-radius: inherit;
            border-top-left-radius: inherit;      
        }

        .ui-header .ui-btn-icon-top .ui-btn-inner, .ui-footer .ui-btn-icon-top .ui-btn-inner {
            padding: 37px 20px 0.5em;
        }
    </style>
</head>
<body>
    <!--Player for indivdual and playlist songs-->
    <div data-role="page" data-add-back-btn="true" id="player">
        <div data-role="header" data-position="fixed">
            <h1 id="songName">Nothing Playing...</h1>
            <a href="#" id="favourite" data-role="button" data-icon="star" data-iconpos="notext" class="ui-btn-right">mark as favourite</a>
        </div>
        <div data-role="content" style="height: 100%;" id="songPicture">
        </div>
        <div data-role="footer" data-position="fixed">
            <table style="margin-left: 5px; margin-right: 5px;">
                <tr>
                    <td><p id="songCurrentpos">0:00</p></td>
                    <td width="100%" class="slider-shit"><input type="range" name="slider" id="posSlider" value="0" min="0" max="100" width="100%" data-theme="d" data-highlight="true"/></td>
                    <td><p id="songDuration">0:00</p></td>
                </tr>
            </table>
            <div id="navgroup">
                <div data-role="controlgroup" data-type="horizontal">
                    <a data-role="button" data-iconpos="top" data-icon="back" id="previousSong" data-inline="true">Previous</a>
                    <a data-role="button" data-iconpos="top" data-icon="arrow-r" id="playSong" data-inline="true">Play</a>
                    <a data-role="button" data-iconpos="top" data-icon="forward" id="nextSong" data-inline="true">Next</a>
                    <a href="#songOptionsPage" id="songOptionsButton" data-role="button" data-iconpos="top" data-icon="gear" data-iconpos="notext" data-rel="dialog" data-inline="true">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
                </div>
            </div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:21:09.127

如果我理解正确，您是在使用 ajax 将此页面加载到 DOM 中吗？如果这是真的，那么我理解你的问题。你看，当 ajax 用于页面加载时，只有 BODY 内容被加载到 DOM 中。

如果您将 css 加载到第一个 HTML 文件中或将 STYLE 块移动到 BODY 内容中，则可以解决您的问题。

这是一个如何将样式包含在 BODY 块中的示例：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>  
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <style>
        #content-test {
            background: red !important;
        }
    </style>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="index3.html#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content" id="content-test">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>  
</body>
</html> 
```

此外，我已经在我的其他答案中描述了这个问题，并提供了更多细节和几个例子： [https ://stackoverflow.com/a/15431229/1848600](https://stackoverflow.com/a/15431229/1848600)

# mysql - 按顺序从数据库中读取消息

> ID：15732941
> 
> 赞同：0
> 
> 时间：2013-03-31T18:30:59.203
> 
> 标签：mysql

我目前正在构建一个对话式消息传递系统，需要帮助从数据库中读取消息的顺序。

数据库中消息表的数据库结构如下：

消息ID | 内容 | message_from | message_to | 查看 | 已删除 | 发送日期

我想按发送顺序读出消息，但如果发送多条消息而没有回复，则不要重复用户名。

因此，如果有 3 个 message_from 到同一个 message_to，它们将被显示，然后任何响应都会在此之后出现。但正如我所说，如果同一个人有 3 条消息没有回复，我会先显示用户名，然后再显示内容。

我有以下查询，它提取发送给用户的消息。

```
SELECT f.username, t.username, m.content, m.sent_date FROM message m 
INNER JOIN user f ON f.userid = m.message_from
INNER JOIN user t ON t.userid = m.message_to
WHERE f.username = :username 
```

我已经尽力解释我需要什么，不知道我有多清楚！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:37:03.653

我会决定在显示逻辑而不是数据库逻辑中显示用户名。（即在您的 HTML 生成脚本中）

要确保结果的顺序正确，`ORDER BY m.sent_date ASC`请在 SQL 语句的末尾使用。

# c++ - MMX 与 SSE2 性能比较

> ID：15732942
> 
> 赞同：3
> 
> 时间：2013-03-31T18:31:03.563
> 
> 标签：c++, performance, sse, simd, mmx

**问题 ：**

我将 MMX 代码转换为相应的 SSE2 代码。我预计几乎 1.5x-2x 的加速。但两者都花费了完全相同的时间。为什么？

**设想：**

我正在学习 SIMD 指令集及其性能比较。我进行了一个数组操作，其中 X 和 Y 是**"char"****`Z = X^2 + Y^2`**类型的大型一维数组。X 和 Y 的值被限制为**小于 10**，因此 Z 始终**<255 (1 Byte)**。（不用担心任何溢出）。

 ******我先写了它的 C++ 代码，检查了它的时间。然后编写相应的汇编代码（~3x 加速）。然后我编写了它的 MMX 代码（~12x v/s C++）。然后我将 MMX 转换为 SSE2 代码，它的速度与 MMX 代码完全相同。从理论上讲，在 SSE2 中，与 MMX 相比，我预计加速大约 2 倍。

对于从 MMX 到 SSE2 的转换，我将所有 mmx reg 转换为 xmm reg。然后改变了几个动作指令等等。

我的 MMX 和 SSE 代码粘贴在这里：**[https](https://gist.github.com/abidrahmank/5281486)** ://gist.github.com/abidrahmank/5281486 （我不想把它们都粘贴在这里）

这些函数稍后会从 main.cpp 文件中调用，其中数组作为参数传递。

**我做了什么 ：**

1 - 我浏览了英特尔和其他网站的一些优化手册。SSE2 代码的主要问题是**16 _memory 对齐**。当我手动检查地址时，发现它们都是 16 _memory 对齐的。但是我同时使用了**MOVDQU**和**MOVDQA**，但两者都给出了相同的结果，并且与 MMX 相比没有加速。

2 - 我进入调试模式并检查每个寄存器值并执行指令。它们的执行与我想的完全一样，即占用 16 个字节并输出 16 个字节。

**资源 ：**

我在 Windows 7 和 Visual C++ 2010 中使用 Intel Core i5 处理器。

**问题 ：**

所以最后一个问题是，为什么 SSE2 代码与 MMX 代码相比没有性能提升？我在 SSE 代码中做错了吗？还是有其他解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T01:33:06.610

**哈罗德**的评论完全正确。您正在处理的数组不适合您机器上的缓存，因此您的计算完全受负载存储限制。

我对当前一代 i7 上各种缓冲区长度的计算吞吐量进行了计时，还对同一例程的吞吐量进行了计时，但除去了加载和存储之外的所有内容：

![吞吐量](https://i.stack.imgur.com/HhEQd.png)

我们在这里观察到的是，一旦缓冲区变得如此之大以至于超出了 L3 缓存，您的计算吞吐量与实现的加载/存储带宽完全匹配。这告诉我们，*您*处理数据的方式基本上没有区别（除非您将其显着变慢）；计算速度受限于处理器将数据移入/移出内存的能力。

如果您在较小的阵列上进行计时，您将看到两种实现之间的差异。******

# java - 计算正则表达式匹配

> ID：15732944
> 
> 赞同：0
> 
> 时间：2013-03-31T18:31:05.613
> 
> 标签：java, android, regex, count

我需要计算正则表达式找到声明数组的匹配项。我试过了，`.groupCount()`但这似乎不是正确的事情^^我的代码：

```
Pattern p2 = Pattern.compile("<char>(.*?)</char>");
response = response.replaceAll("[\\r\\n]+",  "");
Matcher m2 = p2.matcher(response);

String[] chars = new String[m2.groupCount()]; 
```

它应该找到 2，但说 1。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:36:21.147

`groupCount()`计算 中的捕获组`Pattern`，而不是匹配数。

我认为最简单的方法是使用可调整大小的`List`（[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)例如）来存储匹配项，然后在需要时将其转换为数组（`ArrayList.toArray()`）

# java - 使用字符串/资源而不是静态/不可更改的文本

> ID：15732945
> 
> 赞同：0
> 
> 时间：2013-03-31T18:31:06.127
> 
> 标签：java, android, nfc, ndef

我正在尝试使用我在应用程序中常用的字符串而不是文本来编写 NDef 消息。

例子：

```
@Override
    public NdefMessage createNdefMessage(NfcEvent event) {
        Time time = new Time();
        time.setToNow();
        String text = ("Beam me up!\n\n" +
                "Beam Time: " + time.format("%H:%M:%S"));
        NdefMessage msg = new NdefMessage(NdefRecord.createMime(
                "application/com.nfc.linkingmanager.beam", text.getBytes())
         /** 
```

我想写的值：

```
android:id="@+id/timeEdit 
```

代替：

```
Beam me up!\n\n" +
                "Beam Time: " + time.format("%H:%M:%S" 
```

VIEWCOUNTRY.JAVA（另一个能够引用我正在寻找的值的 Java 类：timeEdit）

```
public class ViewCountry extends Activity {

       private long rowID;
       private TextView nameTv;
       private TextView capTv;
       private TextView codeTv; 
       private TextView timeTv; 

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.view_country);

          setUpViews();
          Bundle extras = getIntent().getExtras();
          rowID = extras.getLong(CountryList.ROW_ID); 
       }

       private void setUpViews() {
           nameTv = (TextView) findViewById(R.id.nameText);
           capTv = (TextView) findViewById(R.id.capText);
           timeTv = (TextView) findViewById(R.id.timeEdit);
           codeTv = (TextView) findViewById(R.id.codeText);
       }

       @Override
       protected void onResume()
       {
          super.onResume();
          new LoadContacts().execute(rowID);
       } 

       private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
       {
          DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

          @Override
          protected Cursor doInBackground(Long... params)
          {
             dbConnector.open();
             return dbConnector.getOneContact(params[0]);
          } 

          @Override
          protected void onPostExecute(Cursor result)
          {
             super.onPostExecute(result);

             result.moveToFirst();
             // get the column index for each data item
             int nameIndex = result.getColumnIndex("name");
             int capIndex = result.getColumnIndex("cap");
             int codeIndex = result.getColumnIndex("code");
             int timeIndex = result.getColumnIndex("time");

             nameTv.setText(result.getString(nameIndex));
             capTv.setText(result.getString(capIndex));
//           timeTv.setText(result.getInt(timeIndex)); // <--- HERE WAS AN ERROR
             timeTv.setText(result.getString(timeIndex)); // time was stored as Sting all the time
             codeTv.setText(result.getString(codeIndex));

             result.close();
             dbConnector.close();
          }
       } 

       @Override
       public boolean onCreateOptionsMenu(Menu menu) 
       {
          super.onCreateOptionsMenu(menu);
          MenuInflater inflater = getMenuInflater();
          inflater.inflate(R.menu.view_country_menu, menu);
          return true;
       }

       @Override
       public boolean onOptionsItemSelected(MenuItem item) 
       {
          switch (item.getItemId())
          {
             case R.id.editItem:
                Intent addEditContact =
                   new Intent(this, AddEditDevice.class);

                addEditContact.putExtra(CountryList.ROW_ID, rowID);
                addEditContact.putExtra("name", nameTv.getText());
                addEditContact.putExtra("cap", capTv.getText());
                addEditContact.putExtra("code", codeTv.getText());
                startActivity(addEditContact); 
                return true;

             case R.id.deleteItem:
                deleteContact();
                return true;

             default:
                return super.onOptionsItemSelected(item);
          } 
       }

       private void deleteContact()
       {

          AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

          alert.setTitle(R.string.confirmTitle); 
          alert.setMessage(R.string.confirmMessage); 

          alert.setPositiveButton(R.string.delete_btn,
             new DialogInterface.OnClickListener()
             {
                public void onClick(DialogInterface dialog, int button)
                {
                   final DatabaseConnector dbConnector = 
                      new DatabaseConnector(ViewCountry.this);

                   AsyncTask<Long, Object, Object> deleteTask =
                      new AsyncTask<Long, Object, Object>()
                      {
                         @Override
                         protected Object doInBackground(Long... params)
                         {
                            dbConnector.deleteContact(params[0]); 
                            return null;
                         } 

                         @Override
                         protected void onPostExecute(Object result)
                         {
                            finish(); 
                         }
                      };

                   deleteTask.execute(new Long[] { rowID });               
                }
             }
          );

          alert.setNegativeButton(R.string.cancel_btn, null).show();
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:35:24.833

您没有显示您在代码中的哪个位置使用此方法，因此它可能比这更复杂，但总的来说：

```
public MyActivity extends Activity{

    ...
    private final TextView tvTimeStamp;   //  <--- declare it, it's class level so is available to all methods of this class
    ...

    @Override
    public void onCreate(Bundle savedInstance){

        super.onCreate(savedInstance);

        ...

        setContentView(R.layout.my_activity_layout);

        tvTimeStamp = (TextView)findViewById(R.id.timeEdit);  // <---- get a reference to it

        ...

    }

    @Override
    public NdefMessage createNdefMessage(NfcEvent event) {
        Time time = new Time();
        time.setToNow();
        String text = ("Beam me up!\n\n" +
                "Beam Time: " + time.format("%H:%M:%S"));
        NdefMessage msg = new NdefMessage(NdefRecord.createMime(
                tvTimeStamp.getText(), text.getBytes())  // <----- use it here!

   }

} 
```

要在另一个类中获取 TextView 的值，可以使用以下技术：

**一**：通过添加构造函数将TextView的值传递给构造NFC消息的类，例如

```
public class MyNfcClass{

    private String timeStamp;

    public void MyNfcClass(String timeStamp){
        this.timeStamp = timeStamp;
    }
} 
```

这样做的缺点是，如果 TextView 发生变化，您的 NFC 类将不知道。

**二**：定义接口。请参阅本教程[http://www.tutorialspoint.com/java/java_interfaces.htm](http://www.tutorialspoint.com/java/java_interfaces.htm)

**三**：当且仅当 NFC 类的生命周期等于或小于 Activity 的生命周期，然后将 TextView 的引用传递给该类。只有这样做，你才能真正了解生命周期，并且可以保证不会泄露参考。如果你不明白这一点，那就考虑一下吧；）

**四**：如果Nfc类是在另一个Activity中实例化的，从这个Activity开始（或者在一个Activity链中的某个地方，那么在用于启动Activity的Intent extras中传递值。这与选项1具有相同的缺点。

综上所述，方案 2 是首选。这是 Java 和 Android 的“方式”。

祝你好运。

# php - 在 Mac OS X 上（重新）安装 PHP

> ID：15732946
> 
> 赞同：0
> 
> 时间：2013-03-31T18:31:15.653
> 
> 标签：php, macos, homebrew

我一直在尝试在运行 10.7.5 的 Mac 上设置本地开发环境，其中包括 PHP 5.4、Symfony 和 MySql。

为此，我一直按照以下 url 中的说明在 /usr/local/bin/php 的位置使用 Homebrew 安装新版本的 PHP：http: [//justinhileman.info/article/reinstalling-php-on -mac-os-x/](http://justinhileman.info/article/reinstalling-php-on-mac-os-x/)

我不得不使用这种方法来获得 Symfony 所需的 intl 扩展。

所以，我已经安装了 PHP，但我有 3 个未解决的问题我看不到。

1) 如何更改 Apache 在其中寻找 PHP 的路径？我不知道如何找到我的 .bashrc 文件（正如贾斯汀在他的帖子中解释的那样）。如果我执行“which php”，我会看到 apache 没有查看我刚刚安装的新版本

```
 /usr/bin/php 
```

而不是 /usr/local/bin/php

2) 一旦我让 Apache 指向正确的路径，我将在哪个文件夹中实际安装 Symfony？我应该把我的 .php 文件放在哪里？

3) 解决第 1 步和第 2 步后，我将使用什么 URL 来查看这些新文件。

我是命令行新手，这比仅在 ~/me/Sites 中转储文件更令人困惑，但我正在尝试，非常感谢您的帮助。

谢谢！

# php - 带单引号的 PHP PDO sql 语句

> ID：15732948
> 
> 赞同：1
> 
> 时间：2013-03-31T18:31:23.040
> 
> 标签：php, pdo

我有一个 mysql php pdo 语句，它有单引号来调用 Mysql Geolocation“POINT”函数。

```
 $sql = "INSERT INTO userTrip 
        (userId, fromLat, fromLon, fromLoc, fromPOI,
        toLat, toLon, toLoc, toPOI,
        tripFinished, isMatched, departureTime, createdAt)
        values 
        (:user,:fromLat,:fromLon, GeomFromText('POINT(:fromLat1 :fromLon1)'),:fromPOI,:toLat,
        :toLon, GeomFromText('POINT(:toLat1 :toLon1)'),:toPOI,0,0,:departureTime,:date)";

    $stmt = $db->prepare($sql);        

    $stmt->bindParam(':user', $userId, PDO::PARAM_INT);
    $stmt->bindParam(':fromLat', $fromLat, PDO::PARAM_STR);
    $stmt->bindParam(':fromLon', $fromLon, PDO::PARAM_STR);
    $stmt->bindParam(":fromLat1", $fromLat, PDO::PARAM_STR);
    $stmt->bindParam(':fromLon1', $fromLon, PDO::PARAM_STR);
    $stmt->bindParam(':fromPOI', $fromPOI, PDO::PARAM_STR);
    $stmt->bindParam(':toLat', $toLat, PDO::PARAM_STR);
    $stmt->bindParam(':toLon', $toLon, PDO::PARAM_STR);        
    $stmt->bindParam(':toLat1', $toLat, PDO::PARAM_STR);        
    $stmt->bindParam(':toLon1', $toLon, PDO::PARAM_STR); 
    $stmt->bindParam(':toPOI', $toPOI, PDO::PARAM_STR);
    $stmt->bindParam(':departureTime', $departureTime, PDO::PARAM_STR);
    $stmt->bindParam(':date', date('Y-m-d H:i:s'), PDO::PARAM_STR); 
```

当我执行查询时，它会引发异常“PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens”即使参数的数量是正确的。我怀疑单引号会引发查询，但我需要将它们放入。我尝试使用反斜杠以及我能想到的所有其他方式来转义它们，但查询不会执行。有没有解决的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T19:11:44.413

你不需要引号。您需要将参数传递给函数。这就是准备好的语句的用途。

先定义一个值

```
$point = "POINT($fromLat $fromLon)"; 
```

然后以通常的方式准备您的查询

```
..., GeomFromText(:point), ... 
```

然后将此 $point 变量绑定到 :point 占位符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T18:52:57.590

如果您需要在 SQL 字符串中嵌入单引号，则此

```
(:user,:fromLat,:fromLon, GeomFromText('POINT(:fromLat1 :fromLon1)'),:fromPOI,:toLat, 
```

可能需要这样。

```
(:user,:fromLat,:fromLon, GeomFromText(''POINT(:fromLat1 :fromLon1)''),:fromPOI,:toLat,
-- Two single quotes                   ^^                          ^^ 
```

# c++ - C++ unordered_map 字符串与 int 键性能

> ID：15732952
> 
> 赞同：4
> 
> 时间：2013-03-31T18:31:37.017
> 
> 标签：c++, string, map, int, unordered-map

使用字符串和整数键之间的性能（如果我正在进行随机查找）是否存在显着差异？在我的特殊情况下，字符串键更方便，但有点困难，我也可以使用 int 键进行设置。我只是想知道是否值得付出额外的努力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T18:33:39.743

很明显，散列和比较字符串通常比散列和比较更昂贵`int`。

这是否对您的特定程序有任何实际意义，我们无法判断。您需要分析您的程序并自己找出答案。

我的建议是为了清晰和易于维护而编写代码，然后分析并仅优化瓶颈。

# php - 防止从不同的选择框中选择相同的选项

> ID：15732953
> 
> 赞同：6
> 
> 时间：2013-03-31T18:31:37.413
> 
> 标签：php, jquery, html

来自 W3schools 示例（不要对 W3Schools 发表任何评论，我只是将其用作示例）。选择选项如下所示：

```
<select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 
```

可以说我有两个`select`相同的选项`name`

```
<select name="name[]">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 

<select name="name[]">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 
```

现在，我想使用 jQuery 完成什么，如果有人从第一个选择中选择了一个选项.. 他/她不能从第二个选择中选择它。我怎样才能做到这一点？`Volvo`即如果在第一个选择中选择了第二个选择，我如何自动删除它？如果无法使用 jQuery，那么如何使用 PHP 来防止它呢？

我的猜测是使用`array_unique` ：

```
 foreach(array_unique($_POST['name']) as $name){
        if (!empty($name)){
               // do something
        } 
```

**[发布问题后编辑]**

这个[问题](https://stackoverflow.com/questions/4001805/prevent-multiple-selections-of-same-value?rq=1)与我的有关。但是，我不希望禁用该选项。我希望删除或隐藏该选项。另外，我想看看如何使用 PHP 来完成

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T07:24:12.800

小提琴：http: [//jsfiddle.net/jFMhP/](http://jsfiddle.net/jFMhP/)

要完成所有选择，请将 javascript 设置为：

```
$('select').change(function() {
    var myOpt = [];
    $("select").each(function () {
        myOpt.push($(this).val());
    });
    $("select").each(function () {
        $(this).find("option").prop('hidden', false);
        var sel = $(this);
        $.each(myOpt, function(key, value) {
            if((value != "") && (value != sel.val())) {
                sel.find("option").filter('[value="' + value +'"]').prop('hidden', true);
            }
        });
    });
}); 
```

这将从所有其他选择中删除选项。

**备用选项**

仅使用“命名”选择器 jsFiddle 的替代选项：http: [//jsfiddle.net/jlawrence/HUkRa/2/](http://jsfiddle.net/jlawrence/HUkRa/2/) 代码：

```
$('select[name="name[]"]').change(function() {
    var myName = '[name="name[]"]';
    var myOpt = [];
    $("select"+ myName).each(function () {
        myOpt.push($(this).val());
    });
    $("select"+ myName).each(function () {
        $(this).find("option").prop('hidden', false);
        var sel = $(this);
        $.each(myOpt, function(key, value) {
            if((value != "") && (value != sel.val())) {
                sel.find("option").filter('[value="' + value +'"]').prop('hidden', true);
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T18:44:26.600

您可以使用`hidden`属性（或简单地`.hide()`, `display: none`）暂时隐藏必要的选项，从而无法选择它：

```
var $second = $('.select-two');
$('.select-one').change(function() {
    $second.find('option').prop('hidden', false)
    .filter('[value="' + $(this).val() + '"]').prop('hidden', true);
    $(this).val() == $second.val() && $second.val('');
}); 
```

[http://jsfiddle.net/FDRE7/](http://jsfiddle.net/FDRE7/)

当然，我们也可以让它双向工作：

```
var $select = $('.select').change(function() {
    var $other = $select.not(this);
    $select.find('option').prop('hidden', false)
    .filter('[value="' + $(this).val() + '"]').prop('hidden', true);
    $(this).val() == $other.val() && $other.val('');
}); 
```

[http://jsfiddle.net/FDRE7/1/](http://jsfiddle.net/FDRE7/1/)

您可能还想在服务器端验证这些数据。在这种情况下，如果用户选择了相同的值，那么 POST 数组将如下所示：

```
Array
(
    [name] => Array
        (
            [0] => mercedes
            [1] => mercedes
        )
) 
```

所以很容易检查：

```
if ($_POST['name'][0] == $_POST['name'][1]) {
    // not allowed, redirect back
} 
```

或者

```
if (count(array_unique($_POST['name'])) == 1) {
    // not allowed, redirect back
} 
```

# http - 在 libcurl 中更改 HTTP 请求中的单个标头字段

> ID：15732957
> 
> 赞同：1
> 
> 时间：2013-03-31T18:31:50.190
> 
> 标签：http, http-headers, libcurl

我编写了一个 HTTP 客户端程序。我从另一个进程获取数据并将其添加到请求的 POST 字段中。但是 libcurl 使用内容类型作为`application/x-www-form-urlencoded`. 但我只想将内容类型更改为`binary`，我应该如何只更改`content-type`它而不需要手动更改内容长度、代理等其他字段？

```
 curl_global_init(CURL_GLOBAL_ALL);
              curl =  curl_easy_init(); 
              curl_easy_setopt(curl, CURLOPT_URL, shell_machine);  //shell_machine is xxx.xx.xx.xx:8080/xxx
              curl_easy_setopt(curl, CURLOPT_POSTFIELDS, buf);    // buf is my post data
              curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE, post_size);  // size of my                             post data

              curl_easy_setopt(curl, CURLOPT_USERAGENT, "libcurl-agent/1.0");

              res = curl_easy_perform(curl); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:38:22.403

[CURLOPT_HTTPHEADER](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTHTTPHEADER)是你的朋友。[httpcustomheader.c](http://curl.haxx.se/libcurl/c/httpcustomheader.html)示例中显示了用法。

# autocad - 正切球体 Tan,tan,tan for spheres(balls)

> ID：15732958
> 
> 赞同：1
> 
> 时间：2013-03-31T18:31:56.140
> 
> 标签：autocad, cad

如何逐步绘制半径为1、2、3、4等相切的球体。我已经很容易地在autocad中的3、4、5边的勾股三角形上绘制了半径相切的球体，即r1、r2、r3，但是如何绘制与r1、r2、r3球体相切的第4个r4球体？第 4 个球体的中心坐标是多少？所以因为我从来没有找到一个功能或软件。如果有任何用于球形包装的，请提及。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:42:27.583

我们将球体称为 S1、S2、S3 和 S4。你已经画了 S1、S2 和 S3，现在愿意画 S4。

转到由 S1、S2 和 S3 的中心形成的平面（包含你提到的那个三角形）。

在该平面上绘制 tan-tan-radii 圆，半径等于 S4，与 S1 和 S2（不是 S3）相切。标记这个圆圈的中心并将其命名为 Base-1-2。（如果需要，在该点上画一条垂直于平面的线，以便在接下来的步骤中更容易找到该点）。

在同一平面上，画一条连接 S1 和 S2 中心的线，称为 Axis-1-2。

从 Base-1-2 开始，绘制一条垂直于 Axis-1-2 结束的线。这个端点将是您接下来要乘坐的飞机的起点。

转到垂直于 Axis-1-2 并包含 Base-1-2 的平面。（使用 UCS 命令执行此操作，使用 ZAxis 选项，选择提到的原点，以及 Axis-1-2 上的某个点）

在该平面上，绘制一个以 Axis-1-2 为中心并通过 Base-1-2 的圆。

该圆圈代表与 S1 和 S2 相关的 S4 中心的所有可能位置。

现在，再次做同样的事情，现在使用 S1 和 S3 而不是 S1 和 S2。（新的 Axis-1-3、新的 Base-1-3 等等）。生成的圆将是与 S1 和 S3 相关的 S4 中心的所有可能位置。（您可以使用 S2 和 S3 第三次做同样的事情，但这不是必需的）

结果圆的交点（有两个）将是 S4 的两个可能的中心。

* * *

如果你对编程感兴趣，这里有一个我认为不错的链接（我没有测试过）

[http://through-the-interface.typepad.com/through_the_interface/2012/02/sphere-packing-in-autocad-creating-an-apollonian-packing-using-f-part-1.html](http://through-the-interface.typepad.com/through_the_interface/2012/02/sphere-packing-in-autocad-creating-an-apollonian-packing-using-f-part-1.html)

# c# - 类数组

> ID：15732960
> 
> 赞同：1
> 
> 时间：2013-03-31T18:32:08.517
> 
> 标签：c#, arrays, class, methods, random

我的程序有点问题。

我在我的程序中创建了一个这样的类：

```
class ClassA
{
    public int number = -1;

    public Random rnd = new Random();
    public void randomize()
    {
         var random = rnd;
         number = rnd.next(4)+2;
    }

} 
```

我要创建一个数组，其中每个数组都包含一个类，我是这样创建的。我将数组转移到一个新方法，以便检查它。

```
public static void Main()
{
    ClassA[,] arrayOfClass = new Class[6,6];
    ClassA classA= new Class();
    int i, j;
    for (i = 0; i < 6; i++)
    {
         for (j = 0; j < 6; j++)
         {

              classA.randomize();

              arrayOfClass[i, j] = classA;
         }
    }
    CheckClassA(arrayOfClass);
}
private void CheckClassA(ClassA[,] arrayOfClass)
{
     int i,j;
     for(i=0;i<6;i++)
     {
         for (j = 0; j < 6; j++)
         {
         Console.Writeline("Randoming : "+arrayOfClass[i,j].number);
         {
     }
} 
```

当我运行这些时，控制台只会一遍又一遍地产生相同的数字，但每次运行都不同，就像它只随机化一次然后再也不会随机化它。

我的问题是： 1\. 为什么我的程序只随机化一次并在数组的所有值上返回相同的数字？2\. 是不是我的数组传输方法不对？

我尝试使用下面的其他类型来检查我的随机化是否失败，但不是因为它返回了我预期的随机数。

```
 public static void Main()
    {
        ClassA[,] arrayOfClass = new Class[6,6];
        ClassA class= new Class();
        int i, j;
        for (i = 0; i < 6; i++)
        {
             for (j = 0; j < 6; j++)
             {

                  class.randomize();

                  arrayOfClass[i, j] = class;
                  Console.Writeline("Randoming : " + arrayOfClass[i,j].number);
             }
        }
    } 
```

任何建议和帮助都会受到重视。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:36:35.800

这个问题是因为您实际上并没有创建新`ClassA`对象，您只是对每个数组索引使用相同的对象。`ClassA`您在某些地方似乎也拼错了`Class`，我不确定它是如何编译的。将您的 Class 初始化移动到您分配给的循环中`arrayOfClass`。

```
public static void Main()
{
    ClassA[,] arrayOfClass = new ClassA[6,6];
    //ClassA classA= new Class();
    int i, j;
    for (i = 0; i < 6; i++)
    {
        for (j = 0; j < 6; j++)
        {
            classA = new ClassA();
            classA.randomize();
            arrayOfClass[i, j] = classA;
        }
    }
    CheckClassA(arrayOfClass);
} 
```

完成此操作后，您将遇到另一个问题，它们都出于非常不同的原因返回相同的数字。

* * *

它产生相同的数字，因为每个 ClassA 都是在非常接近的时间段内创建的，并且[`Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)使用相同的种子进行初始化。

这是来自 MSDN 上的[Random()](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)默认构造函数页面：

> 默认种子值来自系统时钟并且具有有限的分辨率。因此，通过调用默认构造函数连续创建的不同 Random 对象将具有相同的默认种子值，因此将产生相同的随机数集。这个问题可以通过使用单个 Random 对象来生成所有随机数来避免。您还可以通过修改系统时钟返回的种子值，然后将这个新的种子值显式提供给 Random(Int32) 构造函数来解决此问题。有关详细信息，请参阅 Random(Int32) 构造函数。

所以基本上是因为`Random`它是伪随机的，它是由一个基于系统时钟的数字初始化的。`Random`解决此问题的最佳方法是在 的所有实例之间共享相同的对象`ClassA`，方法是创建它`static`或将`Random`in 的实例传递给`randomize`方法。

这应该可以解决问题（使它`static`）：

```
class ClassA
{
    public int number = -1;

    public static Random rnd = new Random();
    public void randomize()
    {
         var random = rnd;
         number = rnd.next(4)+2;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:39:32.107

使随机对象成为静态对象，因此类的每个实例都引用它。

这是因为 C# 使用伪随机算法，其中每个下一个值都以某种方式依赖于前一个值。

对于 Random 类的无参数实例化，默认情况下它使用当前时钟值，因此您的类的每个实例都会创建具有相同起始值的 Random 对象，并向它们调用 Next() 返回相同的值，而不是将该值用于另一个 Next()这些值也是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:40:11.130

您遇到的真正问题是，对于每个条目，您的数组始终设置为相同的对象。每次迭代时都需要`new`创建一个新的 ClassA，否则只会指向最后一个 .number。

当然，这是对“每次都会使用新的 Random()”的补充，您应该像这样将其设为静态：

```
public static void Main()
{
        ClassA[,] arrayOfClass = new ClassA[6,6];
        ClassA classA;
        int i, j;
        for (i = 0; i < 6; i++)
        {
                for (j = 0; j < 6; j++)
                {
                    classA = new ClassA(); // MISSING THIS LINE CAUSED ARRAY TO ONLY HAVE LAST ENTRY
                    classA.randomize();

                    arrayOfClass[i, j] = classA;
                }
        }
        CheckClassA(arrayOfClass);
        Console.ReadLine();
    }
    private static void CheckClassA(ClassA[,] arrayOfClass)
    {
            int i,j;
            for(i=0;i<6;i++)
            {
                for (j = 0; j < 6; j++)
                {
                    Console.WriteLine("Randoming : " + arrayOfClass[i, j].number);
                }
            }
    }

     public class ClassA
     {
         public int number = -1;

         public static Random rnd = new Random();
         public void randomize()
         {
             number = rnd.Next(4) + 2;
         }

     }
} 
```

# path-finding - 具有破坏设定数量障碍物能力的最短路径

> ID：15732961
> 
> 赞同：1
> 
> 时间：2013-03-31T18:32:14.503
> 
> 标签：path-finding, dijkstra, shortest-path

我有一个编程任务，要在“扇区”中找到从 START 到 GOAL 的最短路径。您可以将扇区可视化为节点的二维数组，其中一个节点为 START，另一个节点为 GOAL。所有其他节点都是 FLAT 或 HILL。你不能越过山丘。例如：

```
 0123456789
 |----------| {S = START, G = GOAL, " " = FLAT, # = HILL}
0|S         |
1|#####     |
2|          |
3|          | 
4|          | 
5|          | 
6|          | 
7|          |
8|   #######|
9|         G|
 |----------| 
```

好的，所以我实施了 Dijkstra 算法来得出从 S 到 G 的最短路径。但是还有一个我无法弄清楚的额外问题，我希望能得到一些建议。如果它让我们找到一条更短的路径，我们将获得 5 颗炸弹来炸开 HILL。因此，对于我发布的示例扇区，我想使用 2 个炸弹来获得这样的路径：

```
 0123456789
 |----------| {S = START, G = GOAL, " " = FLAT, # = HILL, + = PATH}
0|S         |
1|#+###     | Blasted away HILL @ [1][1]
2|  +       |     4 bombs remaining
3|   +      | 
4|    +     | 
5|     +    | 
6|      +   | 
7|       +  |
8|   #####+#| Blasted away HILL @ [8][8]
9|         G|     3 bombs remaining
 |----------| 
```

用于测试程序的扇区为 100x100，并且具有厚厚的“山脉”，因此只需 5 颗炸弹，您就可以将一条直线轰向目标或任何东西。

关于如何智能地计算使用炸弹的任何想法？现在，我有一个临时实现，它只是说“如果您当前正在查看的节点是 HILL 并且您还有炸弹，请炸毁 HILL”。显然这不会削减它，但我想不出如何正确地做到这一点。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T01:08:56.287

我假设在您的第一个解决方案中，您有一个图形连接，您有一个仅连接平面空间的图形。我建议您为每个 Hill 创建高成本边缘。例如，Hill 的每个传入边都需要 100000 个单位。所有其他边的成本为 1 个单位（仅作为示例）。

在您的第一个示例中，您可以在`(0,0) -> (0,1)`成本为 100000 之间获得优势。

因此，如果累积成本大于或等于 ，则需要停止搜索（在 Dijkstra 中，如果成本为相邻节点的搜索）`(bombs + 1)*100000`。

基本思想是你的算法会尽量减少成本，而使用炸弹是非常昂贵的。自然，最短的路径会找到炸弹最少的路径。如果您在最小路径上有 5 个炸弹，那么成本将是 500000 加上穿越平坦地形的成本。

# php - php发送的电子邮件中奇怪的新行和空格

> ID：15732965
> 
> 赞同：2
> 
> 时间：2013-03-31T18:32:42.363
> 
> 标签：php

我在某些情况下（例如当他们更改密码时）向用户发送电子邮件。我有一个奇怪的问题，如下所示：我不知道为什么，但有时代码中的某处有一个新行（或样式可能被忽略）。即使我没有改变任何事情，我也会收到不同的电子邮件。一个类似的问题是字符之间有额外的空格。

```
$message = '<html><body>';
$message .= '<table class="reg_mail">';
$message .= '<tr>';
$message .= '<td class="hi" style="padding-top:10px;">';
    $message .= '<p>Hi '.$user.',</p>';
$message .= '</td>';
$message .= '</tr>';
//bla bla bla
$message .= '<tr>';
$message .= '<td class="hi" style="padding-top:10px;">';
    $message .= '<pAll rights reserved</p>';
$message .= '</td>';
$message .= '</tr>';
$message .= '</table>';
$message .= '</body></html>'; 
```

所以这基本上是电子邮件。我向我的电子邮件地址发送了两次电子邮件，在第一个中我得到了“保留所有权利”，在第二个中我得到了“保留所有权利”。到底是怎么回事？其他时候，当我在邮件中有一个包含七行的表格时，其中一行看起来似乎忽略了 `margin:0`代码。

这是一个常见问题，还是我的代码错误？

**编辑：**

发送邮件：

```
$mail_from = "donotreply@website.com";
$headers = "From: \"Website\" <$mail_from>\r\n" .
  "Reply-To: $mail_from\r\n" .
  "MIME-Version: 1.0\r\n" .
  "Content-Type: text/html; charset=utf-8\r\n";

mail($form_email,$subject,$message,$headers); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:43:38.427

您没有包含实际发送邮件的代码，但也许您忘记将消息分成 70 个字符的行？

```
$message = wordwrap($message, 70, "\r\n"); 
```

或者：`"\r\n"`手动添加到您的字符串中，例如

```
$message = '<html><body>' . "\r\n";
$message .= '<table class="reg_mail">' . "\r\n";
// ... 
```

# php - 对数组数字求和

> ID：15732969
> 
> 赞同：-1
> 
> 时间：2013-03-31T18:32:55.897
> 
> 标签：php, sum

这是我的代码：

```
 $letters = array('a','b','c', 'd', 'e');
   $replace = array( 1,  5,  10, 15 , 20);
   $text = "abd cde dee ae d" ;
   $res = array_sum(str_split(str_replace($letters, $replace, $text))) ;

  echo $res ; // this output:   40 
```

它应该输出：`157`

这意味着当我用数字替换字母时，我将它们计数为`array_sum`

它出什么问题了 ？

编辑：

```
 $letters = array('ا', 'ب','ج','د' ) ;
    $replace = array(1, 5, 10, 15 ) ;
    $text = "جا باب جب"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:42:52.493

看，这里发生的事情是字符串中的每个字符都被拆分，即`15`替换 for`d`将拆分为`1`and `5`。分别地。相反，试试这个：

```
$replace = array( '1 ',  '5 ',  '10 ', '15 ' , '20 ');
$letters = array('a','b','c', 'd', 'e');
$text = "abd cde dee ae d" ;
$res = array_sum(explode(' ', str_replace($letters, $replace, $text))) ;
echo $res ; 
```

这里发生的事情是`explode()`在给定的分隔符处分割字符串（这里是空格字符）。看到[这个](http://php.net/manual/en/function.explode.php)。

用阿拉伯字母试试这个

```
 function mb_str_split( $string ) {
     return preg_split('/(?<!^)(?!$)/u', $string );
     } 
   $res = array_sum(str_replace($letters, $replace,mb_str_split( $text))) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:42:37.920

`str_split()`按字母拆分，但如果**在**用数字替换字母后应用。这意味着，例如“20”将被拆分为“2”和“0”。

您可能想先拆分，然后在的帮助下替换字母`array_map()`

# .net - 为 WPF 创建调试窗口

> ID：15732973
> 
> 赞同：0
> 
> 时间：2013-03-31T18:33:11.617
> 
> 标签：.net, wpf, vb.net, debugging

我正在创建一个 WPF 应用程序，我的团队经常面临的一个问题是在没有安装 Visual Studio 的客户端 PC 中调试问题。所以我想创建一种“安全模式”或“调试模式”窗口。基本上，这会做的是输入所有对使用客户端 PC 的开发人员有用的事件、错误等。

只有在需要时才会调用此窗口，并且一旦打开它应该能够从应用程序中的所有其他窗口接收数据。我不想手动输入错误和事件，但我想知道是否有一些 .Net 函数可以为我做到这一点？

我猜想类似于 VS2010 中的输出对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:38:13.390

在客户端 PC 中调试问题 => 确保您的应用程序记录所有重要的内容（记录到日志文件即可，不需要窗口），或者在极端情况下您可以运行 VS 远程调试监视器并连接到它使用VS，在这种情况下，它就像在你自己的电脑上调试应用程序一样。最后一个需要与客户端电脑的网络连接，所以我会选择选项一。并且可能开始更多的单元测试，这会导致更少的错误，因此需要更少的调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:45:06.307

通常应用程序将所有内部事件记录在文件（txt、xml 等）中。如果发生一些错误，则应用程序向用户报告它，并将当前日志和错误（以及所有异常信息，如堆栈跟踪）发送给开发人员。附加功能 - 截图按钮添加评论并发送给开发人员......在你的情况下，如果开发人员可以使用客户端的电脑，你可以安装 Visual Studio 远程调试器并通过网络调试应用程序......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:48:46.850

我建议使用 log4net [http://logging.apache.org/log4net/](http://logging.apache.org/log4net/)之类的日志记录块， 这允许您在不同级别进行日志记录，例如调试、信息、错误、致命。

您可以在此处获取功能列表。 [http://logging.apache.org/log4net/release/features.html](http://logging.apache.org/log4net/release/features.html)

# javascript - MVC - 级联下拉列表 - 如何获取选定的值？

> ID：15732977
> 
> 赞同：0
> 
> 时间：2013-03-31T18:33:44.283
> 
> 标签：javascript, jquery, asp.net-mvc-4

我有一个带有级联下拉列表的视图的 MVC 应用程序。在用户在第一个下拉列表中选择了一个值之后，我有以下 Ajax 调用检索第二个下拉列表的数据：

```
function GetAutoModel(_manufacturerId) {

    var autoSellerListingId = document.getElementById("AutoSellerListingId").value;

    $.ajax({
        url: "/AutoSellerListing/GetAutoModel/",
        data: { manufacturerId: _manufacturerId, autoSellerListingId: autoSellerListingId },
        cache: false,
        type: "POST",
        success: function (data) {
            var markup = "<option value='0'>-- Select --</option>";
            for (var x = 0; x < data.length; x++) {
                markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";
            }

            $('#ModelList').html(markup).show();
        },
        error: function (reponse) {
            alert("error : " + reponse);
        }
    });
} 
```

调用以下控制器代码来提供 Ajax 调用数据：

```
[HttpPost]
public ActionResult GetAutoModel(int manufacturerId, int autoSellerListingId)
{
    int modelId = 0;

    // Get all the models associated with the target manufacturer
    List<AutoModel> modelList = this._autoLogic.GetModelListByManufacturer(manufacturerId);

    // If this is an existing listing, get the auto model Id value the seller selected.
    if (autoSellerListingId > 0)
        modelId = this._systemLogic.GetItem<AutoSellerListing>(row => row.AutoSellerListingId == autoSellerListingId).AutoModel.AutoModelId;

    // Convert all the model data to a SelectList and return it
    SelectList returnList = new SelectList(modelList, "AutoModelId", "Description", modelId);

    return Json(returnList);
} 
```

请注意控制器代码中调用的最后一个参数`new SelectList()`(modelId)。这就是我希望在 Ajax 调用中创建选择对象后将所选值设置为的值。问题是我不知道如何在客户端访问这个值。一切正常，我只是不知道如何访问选定的值，然后设置它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:38:05.423

> 问题是我不知道如何在客户端访问这个值。

您可以查看[`Selected`](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlistitem.selected.aspx)客户端上的布尔属性：

```
if (data[x].Selected) {
    markup += "<option value=" + data[x].Value + " selected=\"selected\">" + data[x].Text + "</option>";
} else {
    markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";
} 
```

# sql-server-2008 - 如何在注册模型中添加下拉列表

> ID：15732978
> 
> 赞同：0
> 
> 时间：2013-03-31T18:33:46.657
> 
> 标签：sql-server-2008, asp.net-mvc-4

// 此代码抛出一个错误，即没有类型的视图数据项 //IEnumerable for Companytype

//RegisterModel 中的当前代码

```
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [Display(Name = "Email Address")]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [Required]
    [Display(Name = "Company Name")]
    public string CompName { get; set; }

    [Required]
    [Display(Name = "Company Type")]
    public IEnumerable<SelectListItem> CompTypeList { get; set; }

    [Required]
    [Display(Name = "Total number of Branches")]
    [Range(1,10,ErrorMessage = "The {0} must be at least {1}")]
    public int TotalBranches { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [System.ComponentModel.DataAnnotations.Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }

} 
```

//当前代码在视图中

```
 <li>
            @Html.LabelFor(m => m.UserName)
            @Html.TextBoxFor(m => m.UserName)
        </li>

        <li>
            @Html.LabelFor(m => m.Email)
            @Html.TextBoxFor(m => m.Email)
        </li>

        <li>
            @Html.LabelFor(m => m.CompName)
            @Html.TextBoxFor(m => m.CompName)
        </li>

        <li>
            @Html.LabelFor(m => m.CompTypeList)
            @Html.DropDownList("Companytype","-select one-")
        </li>

        <li>
            @Html.LabelFor(m => m.TotalBranches)
            @Html.TextBoxFor(m => m.TotalBranches)
        </li>

        <li>
            @Html.LabelFor(m => m.Password)
            @Html.PasswordFor(m => m.Password)
        </li>
        <li>
            @Html.LabelFor(m => m.ConfirmPassword)
            @Html.PasswordFor(m => m.ConfirmPassword)
        </li> 
```

//AccountController 注册私有 DefaultDBEntities3 db = new DefaultDBEntities3();

```
 [AllowAnonymous]
    public ActionResult Register()
    {
        ViewBag.CompTypeList = new SelectList( "Companytype");
        return View();
    }

    protected override void Dispose(bool disposing)
    {

        db.Dispose();
        base.Dispose(disposing);
    } 
```

您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:27:07.497

选择列表项是 html.dropdownlist 帮助器的无效参数。它正在寻找一个列表。仅将数据存储在 viewbag 中，并在视图中创建选择列表，如下所示：

//控制器

```
public ActionResult Register()
{
ViewBag.CompTypeList = db.Companytype.OrderBy(y => y.Name).ToList();
return View();
} 
```

//看法

```
@Html.DropDownList("CompanyType", new SelectList(ViewBag.CompTypeList, "Id", "Name")) 
```

这将在视图中正确呈现您的下拉列表并消除您的错误。Id 是列表的值字段，Name 是要显示的字段。希望这可以帮助。

# javascript - jQuery 停止动作“中断”动画

> ID：15732979
> 
> 赞同：1
> 
> 时间：2013-03-31T18:33:48.900
> 
> 标签：javascript, jquery

我有以下代码：

```
function play_fu() {
   $( "#main_photo img" ).fadeOut(250, function() {
      //change photo with new photo ++
    }).fadeIn(-250, play_fu).delay(400); 
}

$( "#play" ).click(function() {
   $(this).hide();
   $( "#pause" ).show();

   play_fu();
});

$( "#pause" ).click(function() {
   $( "#main_photo img" ).stop(true);
   $(this).hide();
   $( "#play" ).show();
}); 
```

正如你所看到的，因为 function `play_fu`，`#main_photo img`总是动画的（一些东西被添加到它的动画队列中）。当我单击时，`pause`我希望播放最后一个动画，因此用新照片更改照片，`fadeIn`然后停止。

现在，发生的情况是新照片尚未淡入，并且动画将在单击时立即停止`pause`。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:40:56.630

它应该是

```
$( "#main_photo img" ).stop(false, true); 
```

# hibernate - 企业环境中的 Tomcat Web 服务

> ID：15732980
> 
> 赞同：0
> 
> 时间：2013-03-31T18:33:51.653
> 
> 标签：hibernate, rest, tomcat7

在 Android 项目中，我使用 spring REST lib 在**Apache Tomcat/7.0.32**上调用 jax-rs 服务。对于数据库通信，我使用的是**hibernate 3.0**。

有时 API 返回错误：**org.hibernate.exception.JDBCConnectionException: could not execute query**

我认为问题出在休眠**SessionFactory**中。

想知道如何配置 tomcat web 服务以在企业环境中使用。如何配置休眠 SessionFactory 以处理更多请求。

**休眠.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://xxxxxx:3306/databasename</property>
    <property name="connection.username">xxxx</property>
    <property name="connection.password">xxxx</property>
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.hbm2ddl.auto">update</property>
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <property name="current_session_context_class">thread</property>
    <property name="show_sql">false</property>
    <!-- Mapping files -->
    <mapping class="com.fit.model.Users"/>
    <mapping class="com.fit.model.Friends"/>
    <mapping class="com.fit.model.NewsFeed"/>
  </session-factory>
</hibernate-configuration> 
```

**HibernateUtil.java**

```
import org.hibernate.*;
import org.hibernate.cfg.*;

public class HibernateUtil {
    private static final SessionFactory sessionFactory;

    static {
        try {
            sessionFactory = new AnnotationConfiguration().configure()
                .buildSessionFactory();
        } catch (Throwable ex) {
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public static Session getSession() throws HibernateException {
        Session session = sessionFactory.openSession();
        Transaction trans = session.getTransaction();

        if (trans == null || !trans.isActive())
            session.beginTransaction();

        return session;
    }

    public static void commit(Session session) {

        if (session.getTransaction() != null) {

            try {
                session.getTransaction().commit();
            } catch (TransactionException e) {

            } finally {

                if (session != null) {
                    org.hibernate.context.ThreadLocalSessionContext.unbind(HibernateUtil.getSessionFactory());
                    session.close();
                }
            }
        }
    }

    public static void closeSession(Session session) {
        try {
            if (session != null) {
                session.close();
            }
        } catch (Exception e) {

        }
    }
} 
```

**BaseDAO.java**

```
import java.io.Serializable;
import java.lang.reflect.ParameterizedType;
import java.util.List;

import org.hibernate.Criteria;
import org.hibernate.FetchMode;
import org.hibernate.Session;
import org.hibernate.criterion.Restrictions;
import org.hibernate.transform.DistinctRootEntityResultTransformer;

public abstract class BaseDAO < T, TID extends Serializable > {
    private Class << ? > theClass;

    public BaseDAO() {
        ParameterizedType type = (ParameterizedType) getClass()
            .getGenericSuperclass();
        this.theClass = (Class << ? > ) type.getActualTypeArguments()[0];
    }

    @SuppressWarnings("unchecked")
    public T getById(TID id) {

        Session session = HibernateUtil.getSession();

        Criteria criteria = session.createCriteria(theClass);
        T obj = (T) criteria.add(Restrictions.idEq(id)).uniqueResult();

        HibernateUtil.commit(session);
        return obj;
    }

    @SuppressWarnings("unchecked")
    public TID insert(T newObj) {

        Session sesija = HibernateUtil.getSession();

        TID id = (TID) sesija.save(newObj);
        HibernateUtil.commit(sesija);
        return id;
    }

    public List < T > getAll() {
        Session session = HibernateUtil.getSession();
        List < T > all = getAll_fetchEager();
        HibernateUtil.commit(session);
        return all;
    }

    @SuppressWarnings("unchecked")
    public T getById_fetchEager(TID id, String...relations) {
        Criteria criteria = HibernateUtil.getSession().createCriteria(theClass);
        for (String s: relations)
            criteria.setFetchMode(s, FetchMode.JOIN);
        return (T) criteria.add(Restrictions.idEq(id)).uniqueResult();
    }

    @SuppressWarnings("unchecked")
    public List < T > getAll_fetchEager(String...relations) {
        Criteria criteria = HibernateUtil
            .getSession()
            .createCriteria(theClass)
            .setResultTransformer(new DistinctRootEntityResultTransformer());

        for (String s: relations)
            criteria.setFetchMode(s, FetchMode.JOIN);

        return criteria.list();
    }

    public void update(T obj) {
        Session session = HibernateUtil.getSession();
        session.update(obj);
        HibernateUtil.commit(session);
    }

    public void saveOrUpdate(T obj) {
        Session session = HibernateUtil.getSession();
        session.saveOrUpdate(obj);
        HibernateUtil.commit(session);
    }

    public void remove(T obj) {
        Session session = HibernateUtil.getSession();
        session.delete(obj);
        HibernateUtil.commit(session);
    }
} 
```

**Jax-rs 服务-登录**

```
@GET
@Produces("application/json")
@Path("login")
public Users Login(@QueryParam("username") String username, @QueryParam("password") String password) {

    Session session = null;

    try {

        String hql = "select k from Users k where k.username like :p1 and k.password like :p2";

        session = HibernateUtil.getSession();

        Query q = session.createQuery(hql).setParameter("p1", username).setParameter("p2", password);

        if (q.list().size() == 0) {
            HibernateUtil.closeSession(session);
            return new Users();
        } else {
            Users k = (Users) q.list().get(0);
            HibernateUtil.closeSession(session);
            return k;
        }

    } catch (Exception e) {
        HibernateUtil.closeSession(session);
    }
} 
```

**Tomcat日志：**

```
at com.mysql.jdbc.StatementImpl.checkClosed(StatementImpl.java:461)
at com.mysql.jdbc.StatementImpl.getMaxRows(StatementImpl.java:2216)
at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:272)
at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:209)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1682)
at org.hibernate.loader.Loader.doQuery(Loader.java:662)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:224)
at org.hibernate.loader.Loader.doList(Loader.java:2144)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2028)
at org.hibernate.loader.Loader.list(Loader.java:2023)
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:393)
at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
at com.fit.servis.Korisnik_servis.Login(Korisnik_servis.java:46)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at com.googlecode.psiprobe.Tomcat70AgentValve.invoke(Tomcat70AgentValve.java:38)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1852)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:722)
18:45:00,463 WARN JDBCExceptionReporter:71 - SQL Error: 0, SQLState: 08S01
18:45:00,463 ERROR JDBCExceptionReporter:72 - Communications link failure
The last packet successfully received from the server was 176,214 milliseconds ago. The last packet sent successfully to the server was 0 milliseconds ago.
sesija je otvorena
18:47:20,756 WARN JDBCExceptionReporter:71 - SQL Error: 0, SQLState: 08003
18:47:20,758 ERROR JDBCExceptionReporter:72 - No operations allowed after connection closed.
Exception in thread "ajp-apr-11178-exec-42"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-42"
Exception in thread "scheduler_QuartzSchedulerThread"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "scheduler_QuartzSchedulerThread"
Exception in thread "ajp-apr-11178-exec-44"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-44"
Exception in thread "ajp-apr-11178-exec-48"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-48"
Exception in thread "ajp-apr-11178-exec-49"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-49"
Exception in thread "ajp-apr-11178-exec-50"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-50"
Exception in thread "ajp-apr-11178-exec-41"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-41"
Exception in thread "ajp-apr-11178-exec-52"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-52"
Exception in thread "ajp-apr-11178-exec-47"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-47"
Exception in thread "ajp-apr-11178-exec-51"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-51"
Exception in thread "ajp-apr-11178-exec-57"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-57"
Exception in thread "ajp-apr-11178-exec-43"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-43"
Exception in thread "ajp-apr-11178-exec-59"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-59"
Exception in thread "ajp-apr-11178-exec-45"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-45"
Exception in thread "ajp-apr-11178-exec-53"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-53"
Exception in thread "ajp-apr-11178-exec-55"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-55"
Exception in thread "ajp-apr-11178-exec-56"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-56"
Exception in thread "ajp-apr-11178-exec-64"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-64"
Exception in thread "ajp-apr-11178-exec-54"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-54"
Exception in thread "ajp-apr-11178-exec-62"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-62"
Exception in thread "ajp-apr-11178-exec-60"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-60"
Exception in thread "ajp-apr-11178-exec-58"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-58"
Exception in thread "ajp-apr-11178-exec-65"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-65"
Exception in thread "ajp-apr-11178-exec-63"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-63"
Exception in thread "ajp-apr-11178-exec-67"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-67"
Exception in thread "ajp-apr-11178-exec-61"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-61"
Exception in thread "ajp-apr-11178-exec-66"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-66"
Exception in thread "ajp-apr-11178-exec-74"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-74"
Exception in thread "ajp-apr-11178-exec-75"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-75"
Exception in thread "ajp-apr-11178-exec-76"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-76"
Exception in thread "ajp-apr-11178-exec-70"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-70"
Exception in thread "ajp-apr-11178-exec-71"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-71"
Exception in thread "ajp-apr-11178-exec-72"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-72"
Exception in thread "ajp-apr-11178-exec-73"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-73"
Exception in thread "ajp-apr-11178-exec-77"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-77"
Exception in thread "ajp-apr-11178-exec-78"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-78"
Exception in thread "ajp-apr-11178-exec-79"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-79"
Exception in thread "ajp-apr-11178-exec-46"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-46"
Exception in thread "ajp-apr-11178-exec-68"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-68"
Exception in thread "ajp-apr-11178-exec-69"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-69"
Exception in thread "ajp-apr-11178-exec-80"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-80"
Exception in thread "ajp-apr-11178-exec-81"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-81"
Exception in thread "ajp-apr-11178-exec-89"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-89"
Exception in thread "ajp-apr-11178-exec-83"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-83"
Exception in thread "ajp-apr-11178-exec-84"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-84"
Exception in thread "ajp-apr-11178-exec-85"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-85"
Exception in thread "ajp-apr-11178-exec-93"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-93"
Exception in thread "ajp-apr-11178-exec-94"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-94"
Exception in thread "ajp-apr-11178-exec-88"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-88"
Exception in thread "ajp-apr-11178-exec-92"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-92"
Exception in thread "ajp-apr-11178-exec-90"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-90"
Exception in thread "ajp-apr-11178-exec-91"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-91"
Exception in thread "ajp-apr-11178-exec-95"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-95"
Exception in thread "ajp-apr-11178-exec-87"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-87"
Exception in thread "ajp-apr-11178-exec-101"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-101"
Exception in thread "ajp-apr-11178-exec-98"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-98"
Exception in thread "ajp-apr-11178-exec-100"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-100"
Exception in thread "ajp-apr-11178-exec-97"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-97"
Exception in thread "ajp-apr-11178-exec-82"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-82"
Exception in thread "ajp-apr-11178-exec-106"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-106"
Exception in thread "ajp-apr-11178-exec-103"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-103"
Exception in thread "ajp-apr-11178-exec-104"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-104"
Exception in thread "ajp-apr-11178-exec-102"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-102"
Exception in thread "ajp-apr-11178-exec-86"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-86"
Exception in thread "ajp-apr-11178-exec-107"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-107"
Exception in thread "ajp-apr-11178-exec-96"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-96"
Exception in thread "ajp-apr-11178-exec-109"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-109"
Exception in thread "ajp-apr-11178-exec-110"
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "ajp-apr-11178-exec-110"
sesija je otvorena
21:09:45,659 WARN JDBCExceptionReporter:71 - SQL Error: 0, SQLState: 08003
21:09:45,660 ERROR JDBCExceptionReporter:72 - No operations allowed after connection closed.
Mar 31, 2013 9:10:08 PM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.27 using APR version 1.4.6.
Mar 31, 2013 9:10:08 PM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
Mar 31, 2013 9:10:08 PM org.apache.catalina.core.AprLifecycleListener initializeSSL
INFO: OpenSSL successfully initialized (OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008)
Mar 31, 2013 9:10:08 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-apr-11314"]
Mar 31, 2013 9:10:08 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-apr-11178"]
Mar 31, 2013 9:10:08 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 589 ms
Mar 31, 2013 9:10:08 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Mar 31, 2013 9:10:08 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.37
Mar 31, 2013 9:10:08 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /home/harisda/appservers/apache-tomcat-7.0.37/webapps/probe.war
Mar 31, 2013 9:10:11 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /home/harisda/appservers/apache-tomcat-7.0.37/webapps/AndroidServis.war
Mar 31, 2013 9:10:12 PM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
com.fit.servis
org.codehaus.jackson.jaxrs
Mar 31, 2013 9:10:12 PM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
class com.fit.servis.Korisnik_servis
class com.fit.servis.Obavijesti_servis
Mar 31, 2013 9:10:12 PM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Provider classes found:
class org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider
class org.codehaus.jackson.jaxrs.JsonMappingExceptionMapper
class org.codehaus.jackson.jaxrs.JsonParseExceptionMapper
class org.codehaus.jackson.jaxrs.JacksonJsonProvider
Mar 31, 2013 9:10:13 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.12 02/15/2012 04:51 PM'
Mar 31, 2013 9:10:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /home/harisda/appservers/apache-tomcat-7.0.37/webapps/manager
Mar 31, 2013 9:10:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /home/harisda/appservers/apache-tomcat-7.0.37/webapps/host-manager
Mar 31, 2013 9:10:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /home/harisda/appservers/apache-tomcat-7.0.37/webapps/ROOT
Mar 31, 2013 9:10:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /home/harisda/appservers/apache-tomcat-7.0.37/webapps/docs
Mar 31, 2013 9:10:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /home/harisda/appservers/apache-tomcat-7.0.37/webapps/examples
Mar 31, 2013 9:10:13 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-apr-11314"]
Mar 31, 2013 9:10:13 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-apr-11178"]
Mar 31, 2013 9:10:13 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 5358 ms 
```

**更新：**

异常解决方案：`org.hibernate.exception.JDBCConnectionException: could not execute query`是[sql-error-0-sqlstate-08s01.html](http://make-it-open.blogspot.com/2008/12/sql-error-0-sqlstate-08s01.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T03:18:35.387

您可以按照文档中的建议使用 JTA：http: [//docs.jboss.org/hibernate/orm/3.3/reference/en/html/architecture.html#architecture-current-session](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/architecture.html#architecture-current-session)

如果您正在寻找“更多企业”的东西，我建议您使用 SessionManager 和连接池。这将为您的应用程序提供更多选择和灵活性。Spring 在这方面提供了一些不错的特性。

干杯，

# php - cURL GET topspin API - PHP

> ID：15732981
> 
> 赞同：0
> 
> 时间：2013-03-31T18:33:55.250
> 
> 标签：php, curl, get

我正在尝试与 PHP 中的 topspin API 进行交互。

在他们的网站上：

```
curl --data "auth_token=abc123&email=test@example.com&account_id=1&
acquired_by=curltest" http://api.artistlink.com/home/fans.json 
```

如何在 PHP 中执行此操作？

我试过这样的事情：

```
$str= "?auth_token=blah&email=blah@blah.com&account_id=1&
acquired_by=curltest";

$ch=curl_init();
curl_setopt($ch,CURLOPT_URL,'http://api.artistlink.com/home/fans.json'.$str);      curl_exec($ch);
curl_close($ch); 
```

但我明白了： ![在此处输入图像描述](https://i.stack.imgur.com/AljRv.png)

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:57:59.193

你需要使用`CURLOPT_POSTFIELDS`. 试试这个：

```
<?php
    $ch = curl_init('http://api.artistlink.com/home/fans.json');
    $data = "auth_token=blah&email=blah@blah.com&account_id=1&acquired_by=curltest";        
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_exec($ch);
    curl_close($ch);
?> 
```

[在这里](http://php.net/manual/en/function.curl-setopt.php)查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:38:52.050

您正在使用`HTTP_GET`而不是`HTTP_POST`Try：

```
$str = "auth_token=blah&email=blah@blah.com&account_id=1&acquired_by=curltest";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://api.artistlink.com/home/fans.json');
curl_setopt($ch, CURLOPT_POSTFIELDS, $str);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
$data = curl_exec($ch);
curl_close($ch);

$json = json_decode($data);
if (isset($json->error)) {
    echo $json->error;
} else {
    print_r($json);
} 
```

# shortcut - 通过 IShellLink 创建目录的快捷方式

> ID：15732983
> 
> 赞同：0
> 
> 时间：2013-03-31T18:33:57.197
> 
> 标签：shortcut, windows-shell

问题：我需要在 C# 中使用自定义图标创建目录的快捷方式（没有.NET API）

到目前为止，我已经完成了：在我的 C# 代码中，我正在查询 IShellLink 对象（实际上是 IShellLinkA），通过 SetPath 将其目标路径设置为`@"S:\my\myDirectory\"`（我也尝试不使用最后一个斜杠），通过 SetIconLocation 将图标设置为，而`@"S:\my\myDirectory\icon.ico, 0"`不是调用`Save(@"S:\foo.lnk", true);`重要的是，这`S:`是一个具有写访问权限的网络驱动器

我在资源管理器下获得带有正确图标的快捷方式，但双击后我收到波兰语错误消息“Windows 正在搜索文件 myDirectory，如果您知道该位置使用浏览功能”。当我右键单击快捷方式并选择属性时，我得到`"Target type: file"`. 当我在资源管理器下手动创建目录的快捷方式时，有`"Target type: directory"`

我肯定遗漏了一些明显的东西，但我花了过去 30 分钟在 Google 和 MSDN 上搜索“快捷方式/IShellLink 到目录”，但没有发现任何用处

**编辑：**根据要求发布来源：

我正在使用[这个](http://msjogren.webhost4life.com/dotnet/eng/samples/dotnet_shelllink.asp)站点的 IShellLink 实现，我的代码非常简单：

```
ShellShortcut shortcut = new ShellShortcut(@"S:\foo.lnk");
shortcut.Description = "Sample item";
shortcut.IconPath = @"S:\my\myDirectory\icon.ico";
shortcut.IconIndex = Convert.ToInt32(0);
shortcut.Path = @"S:\my\myDirectory\";
shortcut.WorkingDirectory = @"S:\my\myDirectory\";
shortcut.Save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:25:53.340

看来我需要新的眼睛：/路径名中很难看到拼写错误（l 而不是 i）...

# java - lwjgl出现楼

> ID：15732984
> 
> 赞同：-1
> 
> 时间：2013-03-31T18:34:11.777
> 
> 标签：java, opengl, lwjgl

我有了一个用 lwjgl 制作的 3d 游戏的想法。基本上，我希望当你飞到某个高度时出现瓷砖（在你周围形成某种平台），并且每个瓷砖都会在随机时间后单独消失。

我不知道如何开始编程，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:37:16.847

欢迎来到堆栈溢出！我也是新来的。如果您在问题中提供更多细节（瓷砖在哪里形成、立方体或平面等），您可能会更快地得到答案。对于我的解释，我假设您对 Java 有很好的理解。

首先，把基础打好。了解如何绘制四边形、颜色和移动相机。这里有一些非常棒的教程：[http](http://www.youtube.com/user/TheCodingUniverse/videos?view=0) ://www.youtube.com/user/TheCodingUniverse/videos?view=0 ，试试看。

对于您的图块，您可以做的一件事是为图块的 X 位置、Y 位置制作一些向量 ( [http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html) )，和 Z 位置。创建一个对这些向量进行排序并在其位置绘制四边形（图块）的函数。还要弄清楚如何让玩家降落在瓷砖上，然后在上面跳来跳去。一旦玩家接近指定的高度，就开始在玩家的位置加上随机数量的瓷砖（使用保持其位置的向量）。然后，每一帧，遍历向量中的所有元素（同时），并使得程序有很小的机会（`if(Math.random()>0.995)`）删除该图块的 X、Y 和 Z 元素。

祝你好运！

# sql-server-2008 - 根据日期过滤历史

> ID：15732985
> 
> 赞同：0
> 
> 时间：2013-03-31T18:34:15.087
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008-r2

我正在使用 SQL Server 报告工具 2008 并创建了一个如下表。

我有一个产生以下结果的数据集。基本上，每次数据库中的费用字段发生变化时，都会为该表提供当前费用的停止日期，然后为新费用提供新的生效日期。这通常会导致出现空白的停止日期。（例如 UCN 1 和 UCN 495）如果从未收取过费用，那么您也会得到一个空白的停止日期。（例如 UCN 11）

我发现如果你使用下面的年份函数作为计算字段，你会得到一个空白字段的结果为 1，然后可以使用过滤器函数包含“1”来查找所有当前费用。

```
=Year(Fields!CEASED_DATE.Value) 
```

但是在某些情况下，在这种情况下，UCN 492 没有获得新的生效日期，因此没有空白的终止日期。在一个有 40,000 条记录的数据库中，这只发生了 100 次。

我想要做的是列出数据库中的每个 UCN 及其当前充电，如果没有充电电流，则将该字段留空。基本上我想过滤掉历史。

这可能吗？

```
UCN......CEASED_DATE....EFFECTIVE_DATE.....Charge  

1........12 July 2009...11 July 2009.......Rate 3  
1.......................12 July 2009.......Rate 4  

11  

492......12 July 2009...01 January 1900....Rate 4  
492......15 July 2009...12 July 2009.......Rate 5  
492......31 July 2011...15 July 2009.......Rate 2  

495......12 April 2009..04 November 1946...Rate 2  
495.....................12 April 2009......Rate 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:16:35.483

`UCN`您可以在报告服务中仅分组的 tablix 中使用以下功能吗？

```
=max(iif(year(Fields!CEASED_DATE.Value)=1, Fields!CHARGE.Value, "")) 
```

还是在数据集中类似？

```
Select UCN,
   Max(case when ceased_date = '' then charge else '' end) current_charge
From charges
Group by UCN 
```

# pdf-generation - 制作黑匣子的最简单的 PDF 文件是什么？

> ID：15732989
> 
> 赞同：1
> 
> 时间：2013-03-31T18:35:00.267
> 
> 标签：pdf-generation, cairo

我想创建一个简单的 PDF 文件来制作一个黑匣子。我想要绝对最简单的 PDF 文件。我这样做是为了教育和分析目的。

我尝试过创建超级简单的 PS 并将 PS 转换为 PDF。我也试过用 Cairo 创建 PDF。这给了我一个 928 字节的文件，其中包含一些需要删除的无关信息，以及一个需要解码的对象`/FlateDecode`

*   有什么方法可以让 Cairo 不压缩 PDF 输出？
*   有没有办法让开罗压制`/Creator`和`/Producer`等信息？

如果做不到这一点，可以创建的最简单的 PDF 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:49:19.303

[PDF 参考](http://www.adobe.com/devnet/pdf/pdf_reference.html)包含附录 H 中各种 PDF 文件的示例。

本附录中的第一个示例显示了最小的 PDF 文件（阅读注释）。

第三个示例（简单图形示例）显示了如何绘制一个带有 1 个单位的红色边框并填充了浅蓝色的矩形。它不完全是一个黑盒子，示例中还有其他形状，但可能会提供足够的信息作为开始。

# .net - 如果文件在给定的本地文件列表中不存在，则从 FTP 下载文件

> ID：15732999
> 
> 赞同：2
> 
> 时间：2013-03-31T18:36:03.753
> 
> 标签：.net, vb.net, ftp

我有一个 FTP 服务器，我想从中下载本地目录中不存在的所有文件。

我试着做一个`For Next`，但我就是无法理解它。我尝试枚举文件，但由于对两个列表都这样做，我得到了一个错误。我认为该错误可能是由于使用本地列表中的单个枚举文件交叉检查在线文件引起的。我该如何消除这个问题？

链接到 FTPClient 类代码：

[https://docs.google.com/file/d/0BxFwEuHe1g77TEw2ckZxVUlQdGM/edit?usp=sharing](https://docs.google.com/file/d/0BxFwEuHe1g77TEw2ckZxVUlQdGM/edit?usp=sharing)

所有代码：

```
 Dim ftp As New FTPclient("ftp://www.ahpg.zxq.net", "eg", "eg")

    Dim dirList As FTPdirectory = ftp.ListDirectoryDetail("/")
    Dim result As List(Of String) = ftp.ListDirectory("/")
    For Each line As String In result
        FTPLBX.Items.Add(line)
    Next
    Dim str As String
    Dim locstr As String
    Dim res_numer As IEnumerator
    res_numer = result.GetEnumerator()
    Dim loclist As List(Of String) = New List(Of String) _
                                     (System.IO.Directory.EnumerateFiles("C:/Program Files/Business Elements/Recent Files"))
    Dim LOC_Enum As IEnumerator
    LOC_Enum = loclist.GetEnumerator
    Do While LOC_Enum.MoveNext
        locstr = (LOC_Enum.Current)
    Loop
    Do While (res_numer.MoveNext)
        str = (res_numer.Current)
    Loop

    For Each str In loclist
        If Not loclist.Contains(str) = True Then
            My.Computer.Network.DownloadFile("ftp://www.ahpg.zxq.net/ftpfiles/" & str.ToString, _
                                             "C:/Program Files/Business Elements/Recent Files/" & str.ToString, "eg", "eg")
            MessageBox.Show("Done ")
        End If
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:22:00.027

如果它对你有用，我让它更容易一些。干得好：

```
 ' Your instance of FTPClient
    Dim ftp As New FTPclient("ftp://www.ahpg.zxq.net", "eg", "eg")

    ' The path to destination folder (Local directory)
    Dim localDir As String = "C:/Program Files/Business Elements/Recent Files/"

    ' Lists all the file in the given directory of FTP server
    For Each file As FTPfileInfo In ftp.ListDirectoryDetail("/").GetFiles

        Try
            ftp.Download(file, localDir & file.Filename)

            ' The FTPClient class throws exception if the 
            ' file already exists in destination directory
        Catch e As ApplicationException
            Console.WriteLine(e.Message)
        End Try
    Next file 
```

**注意 1**：我从那里下载了[`FTPClient`](http://www.codeproject.com/Articles/11991/An-FTP-client-library-for-NET-2-0)课程，[`CodeProject`](http://www.codeproject.com/)但它与您在问题中提供的课程几乎相同。

**注意 2**：[`FTPClient`](http://www.codeproject.com/Articles/11991/An-FTP-client-library-for-NET-2-0)如果文件存在于您的目标文件夹中，它本身会引发异常。因此，您无需费心比较文件。

**注意 3**：注意*locadDir*字符串末尾的*斜杠。*否则，该文件将下载到*Business Element*文件夹。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:47:27.060

编写一个子方法，我们称之为 IsExistedInLocal 来检查来自 ftp 的文件是否已经在您的本地。如果是，请忽略并继续下一个；如果不是，请下载文件。我假设您知道所有细节，所以伪代码应该没问题

```
for each FTP_file in FTP_FilesList
  if not IsExistedInLocal(FTP_file) then
    download the file to local
  end if
next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:16:20.453

在 for 循环中，您将获取列表中的每个条目，然后检查同一个列表是否没有该元素。您的 if 条件永远不会为真，也永远不会到达 DownloadFile 语句。

```
For Each str In loclist
    If Not loclist.Contains(str) = True Then
        My.Computer.Network.DownloadFile("ftp://www.ahpg.zxq.net/ftpfiles/" & str.ToString, _
                                         "C:/Program Files/Business Elements/Recent Files/" & str.ToString, "eg", "eg")
        MessageBox.Show("Done ")
    End If
Next 
```**