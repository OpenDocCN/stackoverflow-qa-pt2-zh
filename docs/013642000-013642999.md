# StackOverflow 问答 13642000-13642999

# html - tinymce html5 编辑器

> ID：13642001
> 
> 赞同：0
> 
> 时间：2012-11-30T09:07:46.163
> 
> 标签：html, tinymce

我使用 tinymce（3.5.8 版本）编辑器作为 html5 编辑器。现在我想要添加视频和音频标签的功能。

功能 doTinyMCECleanUp(frm, id) {

var c = frm[id].value;

c = c.replace(/ </source>/gim, '');

c = c.replace(/</source>/gim, '');

// 如果 'html' 不是 'xhtml' 则注释掉

c = c.replace(/]*)>/gim, '');

frm[id].value = c;

}

tinyMCE.init({

```
 mode : "textareas",
    theme : "advanced",
    plugins : "visualblocks,inlinepopups,mediahtml5,media",
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,styleselect,justifyleft,justifycenter,justifyright,justifyfull,|,visualblocks,code,mediahtml5,media",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,
    content_css : "/js/tinymce/examples/css/content.css",
    visualblocks_default_state: true,
    extended_valid_elements : "video[*]",

    // Schema is HTML5 instead of default HTML4
    schema: "html5",

       template_external_list_url : "tinymce/examples/lists/template_list.js",
   external_link_list_url : "tinymce/examples/lists/link_list.js",
   external_image_list_url : "tinymce/examples/lists/image_list.js",
   media_external_list_url : "tinymce/examples/lists/media_list.js",

    // End container block element when pressing enter inside an empty block
    end_container_on_empty_block: true,

    // HTML5 formats
    style_formats : [
            {title : 'h1', block : 'h1'},
            {title : 'h2', block : 'h2'},
            {title : 'h3', block : 'h3'},
            {title : 'h4', block : 'h4'},
            {title : 'h5', block : 'h5'},
            {title : 'h6', block : 'h6'},
            {title : 'p', block : 'p'},
            {title : 'div', block : 'div'},
            {title : 'pre', block : 'pre'},
            {title : 'section', block : 'section', wrapper: true, merge_siblings: false},
            {title : 'article', block : 'article', wrapper: true, merge_siblings: false},
            {title : 'blockquote', block : 'blockquote', wrapper: true},
            {title : 'hgroup', block : 'hgroup', wrapper: true},
            {title : 'aside', block : 'aside', wrapper: true},
            {title : 'figure', block : 'figure', wrapper: true}
    ],

  setup : function(ed) {
  ed.onSubmit.add(function(ed, e) {
     doTinyMCECleanUp(e.target, ed.id);
  }); 
```

},

});

我用 2 个插件 mediahtml5 和媒体尝试了很多。

当我使用媒体插件时。如果我添加视频标签，它会插入带有视频标签的 flashobject。而且当我更新内容时，视频标签也会消失。我在任何 html 源代码编辑器中都看不到它。我只能看到 Flash 对象源。

当我使用 mediahtml5 插件时，我可以将视频添加到编辑器中，但看不到 html 视图源编辑器。

谁能帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:59:19.750

查看tinymce 设置valid_elements 和valid_children。Tinymce 提示与配置不匹配的 html 标签/无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:16:05.947

将“extend_valid_elements”添加到您的微型 mce 初始化中。例如：

```
$('#my_textarea').tinymce({
  ...
  extended_valid_elements: "audio[id|class|src|type|controls]",
  ...
}) 
```

上面的示例允许您在微型 mce 编辑器中插入具有所需元素属性的“音频”标签。

注意：我使用的是 tiny mce jquery 插件，但对于常规的 tiny mce 来说是一样的。

# wpf - 将成员方法添加为资源

> ID：13642006
> 
> 赞同：0
> 
> 时间：2012-11-30T09:07:57.130
> 
> 标签：wpf, resources

我正在实现一个包含 ObservableCollection 的类，并且在我的 XAML 中我有一条折线。我成功地将 XAML dataContext 绑定到此类，并将折线绑定到 Observable 集合。但是现在，当然，我面临着错误的类型转换。我找到了一个值转换器的示例，并将其添加到我的代码中，但我无法将它作为资源添加到我的 XAML 中......

整体结构是这样的

```
public class externalClass
{
    public ObservableCollection<Point> debugCh1 { get; set; }

    public void test() 
    { 
         ... performo modifications
          on debugCh1 for testing purposes...
    }

    public class PointCollectionConverter : IValueConverter
    {
        .. implements convert and cnverBack
    }
} 
```

对于 XAML

```
<Window x:Class="tester.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="277" Width="525" xmlns:my="clr-namespace:binding;assembly=binding" xmlns:my1="clr-namespace:deviceManager;assembly=deviceManager" Closing="Window_Closing">

    <Window.Resources>
        <local:PointCollectionConverter x:Key="pointCollectionConverter"/>
    </Window.Resources>

           ... The window Itself ...
        <Polyline Points="{Binding debugCh1}" />
           ...
</Window> 
```

而对于背后的 C#

```
public partial class MainWindow : Window
{ 
    private externalClass toTest;

    public MainWindow()
    {
        InitializeComponent();
        DataContext = toTest;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        toTest.test();
    }
} 
```

整个事情都很好，但对于 `<local:PointCollectionConverter..`

编译器说`The type 'local:PointCollectionConverter' was not found. Verify that you are not missing an assembly reference and that all referenced assemblies have been built.`

关于如何添加此参考的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:11:29.797

你只需要确保命名空间是对齐的。我首先将您的转换器类与`externalClass`该类分开（我不确定是否可以从 XAML 中引用类似的嵌套类）：

```
namespace MyCompany.MyProject
{
    public class PointCollectionConverter : IValueConverter
    {
        .. implements convert and cnverBack
    }
} 
```

现在您可以定义`local`xmlns 并将其链接到`MyCompany.MyProject`：

```
<Window xmlns:local="clr-namespace:MyCompany.MyProject" 
```

这样，转换器应该可以按书面形式访问。

```
<local:PointCollectionConverter x:Key="pointCollectionConverter"/> 
```

# sharepoint - 是否可以将 MMPCM 用于 SharePoint 2013？

> ID：13642007
> 
> 赞同：1
> 
> 时间：2012-11-30T09:07:59.203
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2013

我目前正在 SharePoint 2010 中使用 MMPCM。我想在 SharePoint 2013 中使用它。所以我想知道是否可以将 MMPCM 用于 SharePoint 2013。

# javascript - 在不使用 iframe 的情况下预览响应式 Web 组件

> ID：13642009
> 
> 赞同：2
> 
> 时间：2012-11-30T09:08:08.533
> 
> 标签：javascript, iframe, responsive-design, preview

我正在尝试为我的 Web 组件构建一个小型预览器。我页面上的所有内容都使用媒体查询进行响应，我正在尝试构建一个小容器，我可以在其中预览页面的一小部分。在这个容器的上方，我放置了不同屏幕宽度的切换开关。当我单击其中一个切换时，我的容器会相应地调整大小，并且里面的内容会根据媒体查询触发的内容显示。

我发现如何做到这一点的唯一方法是使用 iframe。它可以工作 - 但是总是必须将内容放在单独的文件中以链接到 iframe 的 src 是一件麻烦事。另外 - 必须将 iframe 高度设置为内容需要的任何问题。

目前：

```
<a href="javascript:$('.preview1').attr('width', '320')">320px</a> <!-- etc... -->
<div class="container">
    <iframe class="preview1" src="component1.html" seamless></iframe>
</div> 
```

有没有可能使用 javascript 在我的容器上触发不同的媒体查询？模拟屏幕调整大小？

# c++ - 指向成员函数的 C++ 指针

> ID：13642012
> 
> 赞同：0
> 
> 时间：2012-11-30T09:08:36.657
> 
> 标签：c++, class, function, pointers

我想在 C++ 中使用指向成员函数的指针，但它不起作用：

指针声明：

```
int (MY_NAMESPACE::Number::*parse_function)(string, int); 
```

指针赋值：

```
parse_function = &MY_NAMESPACE::Number::parse_number; 
```

此调用完美运行（itd 是映射元素的迭代器）：

```
printf("%s\t%p\n",itd->first.c_str(),itd->second.parse_function); 
```

但这一个不起作用：

```
int ret = (itd->second.*parse_function)(str, pts);
$ error: 'parse_function' was not declared in this scope 
```

而这个既不是

```
int ret = (itd->second.*(MY_NAMESPACE::Number::parse_function))(str, pts);
$ [location of declaration]: error: invalid use of non-static data member 'MY_NAMESPACE::Number::parse_function'
$ [location of the call]: error: from this location 
```

我不明白为什么...

提前谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:41:25.737

```
int (MY_NAMESPACE::Number::*parse_function)(string, int); 
```

这表明，`parse_function`是一个指向类的成员函数的指针`Number`。

> 此调用完美运行（itd 是映射元素的迭代器）：

`printf("%s\t%p\n",itd->first.c_str(),itd->second.parse_function);`

从这里我们可以看到`parse_function`是 的成员`itd->second`，不管这是什么。

对于这个电话

```
int ret = (itd->second.*parse_function)(str, pts); 
```

或者这个电话

```
int ret = (itd->second.*(MY_NAMESPACE::Number::parse_function))(str, pts); 
```

要成功，`itd->second`必须是 type `Number`，它可能不是。并且 parse_function 必须定义为当前或封闭范围内的变量（第一种情况）或 Number 类的静态变量（第二种情况）。

所以你需要一些并`Number`申请`parse_function`

```
Number num;
(num.*(itd->second.parse_function))(str, pts); 
```

或用指针

```
Number *pnum;
(pnum->*(itd->second.parse_function))(str, pts); 
```

**更新**：

由于`itd->second`是一个数字，你必须申请`parse_function`，它是它的**成员**，像这样

```
int ret = (itd->second.*(itd->second.parse_function))(str, pts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:18:21.333

您可以像这样定义指向函数的指针：`type(*variable)() = &function;` 例如：

```
int(*func_ptr)();
func_ptr = &myFunction; 
```

我今天早上可能只是没有意识到你的代码，但问题可能是它`parse_function`是一个指针，但你把它叫做`itd->second.*parse_function`. 用 调用指针`->*`，所以尝试做`itd->second->parse_function`.

可能无法解决任何问题，我似乎无法真正理解您的代码。发布更多信息，很难从两行代码中分辨出来。

* * *

这是一个关于如何在实际代码中使用它的示例，这个示例仅`func()`通过`cb()`使用指针和参数进行调用：

```
int func()
{
    cout << "Hello" << endl;
    return 0;
}

void cb(int(*f)())
{
    f();
}

int main()
{
    int(*f)() = &func;
    cb(f);
    return 0;
} 
```

# objective-c - NSString 格式，错误的访问

> ID：13642014
> 
> 赞同：0
> 
> 时间：2012-11-30T09:08:43.273
> 
> 标签：objective-c, ios

我在格式化字符串时得到 EXC_BAD_ACCESS。

```
NSString *object = [[NSUserDefaults standardUserDefaults] stringForKey:@"ObjectNumber"];
NSString *pin = [[NSUserDefaults standardUserDefaults] stringForKey:[NSString stringWithFormat:@"Pin%i ",object.intValue]];
NSString *msg = [NSString stringWithFormat:@"%@N", pin];

NSString *msg2 = @"0001N";

NSLog(@"Sending %@", msg);

tcpConnection *Obj = [tcpConnection alloc];
[Obj loadUpConnection:msg]; 
```

如果我使用 msg2 一切正常。但是，如果我使用 msg，即使 NSLog 正确打印 msg，它也会得到 exc_bad_access。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:16:35.237

我怀疑您的`loadUpConnection:`方法没有保留其参数。

关于objective-c，您似乎有很多东西要学习。

我担心这会让您感到困惑，而不仅仅是帮助，但是该`msg2`变量指向字符串的静态实例`"0001N"`（因为您在编译时对其进行了硬编码，系统会创建一个静态实例来使用）。这就是为什么它在使用时不会崩溃`msg2`，但在使用时会崩溃`msg`。`msg`指向一个动态分配的实例。返回给您的引用是“autoreleased”，这意味着它将在将来的某个时间点释放（通常在运行循环迭代结束时）。如果你的`loadUpConnection:`方法没有保留它的参数，那么`msg`字符串会在你尝试使用它之前被释放，从而导致`EXC_BAD_ACCESS`错误。因为`msg2`是一个静态实例，它永远不会被释放，因此它不会崩溃。

我唯一的建议是继续学习 - 拿起一本书，我推荐 Stephen Kochan 的“Programming in Objecive-C”，或 Aaron Hillegass 的“iPhone Programming A Big Nerd Ranch Guide”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:17:24.457

你必须初始化你 *Obj。

`tcpConnection *Obj = [tcpConnection alloc] init`...

# ssas - 立方体中的 SSAS Max 计算

> ID：13642015
> 
> 赞同：2
> 
> 时间：2012-11-30T09:08:53.133
> 
> 标签：ssas, max, cube

我的多维数据集中有一个产品代码维度列表和一个名为 ACV 的度量。我需要能够计算每个产品代码的最大 ACV 值。

我已经得到了下面的计算，但它返回了所有产品的 ACV 总和。

MAX([产品].[产品代码].[产品代码].成员，[措施].[ACV])

对于如何解决我的问题，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:37:05.283

如果您希望通过在数据源视图中设计的模型的粒度以半相加方式评估最大值，则应向多维数据集添加一个新度量（基于与 ACV 度量相同的源字段），并将其`AggregationFunction`属性设置为`Max`。[更多关于 SSAS 中的聚合函数](http://technet.microsoft.com/en-us/library/ms175623.aspx#AggFunction)。

# php - 使用 GD/PHP 调整大小时优化 PNG - 如何确定调色板？

> ID：13642018
> 
> 赞同：2
> 
> 时间：2012-11-30T09:09:24.723
> 
> 标签：php, image, resize, png

我在调整 PNG 大小和保持小文件大小时遇到​​了麻烦。[解决方案在这里找到](https://stackoverflow.com/questions/13257405/why-is-resized-png-image-so-much-bigger-than-original-image/13258023#comment18699153_13258023)。

然而，在调整 PNG 的大小时，我遇到了图像质量问题。据我所见，GD 使用索引的 8 位调色板，它会扭曲文本并且颜色会丢失，请参阅：

*   [原始图像](http://i48.tinypic.com/242fwk6)
*   [使用上面给出的解决方案调整大小的图像](http://i50.tinypic.com/6egcjc)
*   [调整大小的图像](http://i45.tinypic.com/qn18gg)²

²我在[stackoverflow](https://stackoverflow.com/a/2650258/1066234)中找到的调整想法：创建真彩色图像，调整它的大小，并将其复制到新图像，因此调色板是根据重新采样的结果确定的，图像质量更好，如您在[图像中看到的以上](http://i45.tinypic.com/qn18gg)。

```
// create new image
$newImageTmp = imagecreatetruecolor($newwidth,$newheight);
// we create a temporary truecolor image
// do the image resizing by copying from the original into $newImageTmp image
imagecopyresampled($newImageTmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);
// create output image
$newImage = imagecreate($newwidth,$newheight);
// copy resized truecolor image onto index-color image
imagecopy($newImage,$newImageTmp,0,0,0,0,$newwidth,$newheight);
// write image to buffer and save in variable
ob_start(); // stdout --> buffer
imagepng($newImage,NULL,6);
$newImageToSave = ob_get_contents(); // store stdout in $newImageToSave
ob_end_clean(); // clear buffer
// remove images from php buffer
imagedestroy($src);
imagedestroy($newImageTmp);
imagedestroy($newImage); 
```

问题：两种结果都不令人满意。

我很确定必须有一种方法来 1\. 确定调色板，以及 2\. 保持图像的大部分颜色，以便 3\. PNG 看起来与原始图像相似并且具有可接受的文件大小。

现在，我只看到 JPG 而不是 PNG。但是，如果您知道解决方案，如果您让我/我们知道，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:25:49.757

您只需要更换

```
 $newImage = imagecreate($newwidth,$newheight); 
```

和

```
 $newImage = imagecreatetruecolor($newwidth, $newheight); 
```

输出`$maxImgWidth = 200;`

![在此处输入图像描述](../Images/2f153f825cb6bfdcf726ca5049ed5283.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T22:10:07.003

PHP 的 GD 分支没有可用的调色板生成，因此您只能获得带有 vanialla libpng 压缩的 PNG32。

对于带有调色板的小型 PNG8，请使用 pngquant，例如[http://pngquant.org/php.html](http://pngquant.org/php.html)

然后使用 advpng 或 zopfli-png 进一步压缩它。

# java - java.lang.NoSuchMethodError 加载正确 JAR 的异常

> ID：13642021
> 
> 赞同：2
> 
> 时间：2012-11-30T09:09:56.460
> 
> 标签：java, tomcat, couchbase

我正在编写一个 Java Web 应用程序并放入 Tomcat 中运行。

当我尝试使用 JAR 中包含的方法时（我确信它包含我需要的方法），它显示：

```
java.lang.NoSuchMethodError: com.couchbase.client.CouchbaseClient.asyncGetBulk(Ljava/util/Collection;)Ljava 
```

但是我尝试通过启动tomcat `-verbose:class`，我看到以下日志：

```
[Loaded net.spy.memcached.ops.VBucketAware from file:/.../apache-tomcat-5.5.30/webapps/.../WEB-INF/lib/spymemcached-2.8.2.jar]
[Loaded net.spy.memcached.protocol.binary.SingleKeyOperationImpl from file:/.../apache-tomcat-5.5.30/webapps/.../WEB-INF/lib/spymemcached-2.8.2.jar]
[Loaded net.spy.memcached.protocol.binary.GetOperationImpl from file:/.../apache-tomcat-5.5.30/webapps/.../WEB-INF/lib/spymemcached-2.8.2.jar]
Exception in thread "Thread-2139" java.lang.NoSuchMethodError: com.couchbase.client.CouchbaseClient.asyncGetBulk(Ljava/util/Collection;)Ljava/util/concurrent/Future 
```

虽然 spymemcached-2.8.2.jar 包含该方法，所以我不明白为什么它会失败。

这就是我调用该方法的方式：

```
Future<Map<String,Object>> f = client.asyncGetBulk(key); 
```

谢谢你的帮助。

**更新1：**

通过使用@Narendra Pathai 提供的代码，我得到了以下结果

```
[
file:/.../WEB-INF/classes/,
file:/.../WEB-INF/lib/activation-1.1.jar,
file:/.../WEB-INF/lib/commons-codec-1.5.jar,
file:/.../WEB-INF/lib/commons-lang-2.2.jar,
file:/.../WEB-INF/lib/commons-logging-1.1.1.jar,
file:/.../WEB-INF/lib/couchbase-client-1.0.3.jar,
file:/.../WEB-INF/lib/jaxb-api-2.1.jar,
file:/.../WEB-INF/lib/jaxb-impl-2.1.9.jar,
file:/.../WEB-INF/lib/jettison-1.1.jar,
file:/.../WEB-INF/lib/netty-3.2.0.Final.jar,
file:/.../WEB-INF/lib/runtime-0.4.1.5.jar,
file:/.../WEB-INF/lib/spymemcached-2.8.2.jar,
file:/.../WEB-INF/lib/stax-api-1.0-2.jar,
file:/.../WEB-INF/lib/xxx_core.jar,
file:/.../WEB-INF/lib/xxx_couchbase.jar
] 
```

它们不包含具有`com.couchbase.client.CouchbaseClient.asyncGetBulk` 除 couchbase-client-1.0.3.jar 之外的路径的文件。

**更新 2：**

通过使用代码：

```
CodeSource codeSource = CouchbaseClient.class.getProtectionDomain().getCodeSource();
if (codeSource != null) {
    log.debug(codeSource.getLocation());
}

CodeSource codeSource2 = net.spy.memcached.MemcachedClient.class.getProtectionDomain().getCodeSource();
if (codeSource2 != null) {
    log.debug(codeSource2.getLocation());
} 
```

我得到了以下结果：

```
file:/.../WEB-INF/lib/couchbase-client-1.0.3.jar
file:/.../WEB-INF/lib/spymemcached-2.8.2.jar 
```

看来他们也是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:17:39.183

问题是类路径

```
public static void main(String[] args) {
            URLClassLoader classLoader = (URLClassLoader)Main.class.getClassLoader();
            System.out.println(Arrays.toString(classLoader.getURLs()));
    } 
```

在你的 Main 类中使用这个方法来找出所有 jar 依赖项是从哪里解决的。

查看类加载器是否正在加载旧版本的 jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-08T18:33:52.890

我有类似的问题，但使用我自己的库之一，但感谢@Narendra Pathai 提交的这段代码

```
 URLClassLoader classLoader = (URLClassLoader)Main.class.getClassLoader();
        System.out.println(Arrays.toString(classLoader.getURLs())); 
```

我发现类路径正在使用我的库的一些非常旧的版本。

然后我清理了构建文件夹（因为我使用的是 gradle），一切都编译并运行正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:16:53.287

可能有一个具有相同规范名称的类，它位于类路径的上层。

JVM 选择了第一个类并且没有找到需要的方法。检查您的类路径中是否有同一个库的多个版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T15:07:20.477

您是否尝试过将 Couchbase 依赖项放在 $TOMCAT_HOME/lib 中只是为了首先进行测试。

并将它们从您的 WAR 中删除

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-08T06:06:13.953

如果你用 运行你的jar `java -Dloader.path='dependency_jar_dir'`，并且有多个不同版本的jar[例如：com.a.1.1.jar,com.a.1.2.jar]，那就错了！

# html - 加载但忽略 HTML 中的 URL

> ID：13642022
> 
> 赞同：1
> 
> 时间：2012-11-30T09:10:01.903
> 
> 标签：html

在呈现 HTML 页面的其余部分之前，我需要访问一个 URL 以将用户注销（该页面需要确保用户已注销）。URL 的内容并不重要；只要我点击 URL，用户就会注销，我可以继续。

现在我通过将 URL 包含为`<LINK>`：

```
<head>
    <link rel="stylesheet" href="http://localhost:8000/accounts/logout/">
</head> 
```

这是一种合理的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:06:55.107

另一种方法是使用 JavaScript 的图像预加载功能向注销 url 发出请求。在`<head>`添加：

```
<script>
 logout = new Image(); 
 logout.src = "http://localhost:8000/accounts/logout/";
</script> 
```

这样您就不必为此滥用`<link>`标签，但这确实意味着您必须依赖 JavaScript。

# iphone - cocos2d 我希望我的图像显示一次

> ID：13642023
> 
> 赞同：1
> 
> 时间：2012-11-30T09:10:05.210
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone

我有一个应用程序 cocos2d。我希望我的图像显示一次。不是每次我都进入 cocos2d 视图。你知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:40:53.187

只需为此使用全局标志。全局创建一个布尔变量并在显示图像后将其设置为 False。并在每次进入该视图时检查此变量。如果它是假的，您可以从视图中删除该图像，或者如果您想在任何其他情况下显示该图像，则将其不透明度设置为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:55:54.143

不过，这个问题与 cocos2d 并没有明确的关系。

步骤：
1\. 当您需要显示您的图像时，检查 NSUserDefaults 中是否存在布尔值。
2\. 如果值不存在（或返回值为 FALSE），表示您可以显示您的图像。
3\. 显示图像后，在 NSUserDefaults 中为该特定键设置 TRUE 值。

完毕..！！

# git - git checkout master 意外中止

> ID：13642024
> 
> 赞同：1
> 
> 时间：2012-11-30T09:10:14.130
> 
> 标签：git, tortoisegit

当我按下 ESC 键时，我的 Tortoise Git 正在检查我的主分支。我没有意识到 Toirtoise 窗口有焦点，所以它停止了结帐。

但我的活动分支仍然不是“主人”。现在，当我再次尝试签出 master 时，它在几个文件后显示“Aborting”，然后 Tortoise 说：git 没有干净地退出（退出代码 1）。

我尝试从 .git 目录中删除 index.lock 。这有点帮助：它现在检查并覆盖一些文件，而不是立即中止，然后中止。

如何修复我的主分支，或强制它切换？我有一个远程暂存分支，可以用来从中提取最新更改。我可以从一个新的 git 存储库开始，但随后我会失去其他（本地）分支。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:55:38.707

您也可以尝试**git fsck**。（我会先“man git-fsck”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:33:34.027

也许您可以使用命令行来查看发生了什么。

尝试执行`git checkout master`然后在这里评论输出是什么。

# asp.net - 远程访问时，ASP.NET 应用程序性能计数器全部设置为 0

> ID：13642025
> 
> 赞同：2
> 
> 时间：2012-11-30T09:10:14.510
> 
> 标签：asp.net, .net, iis-7

我想使用 perfmon 远程检查 Requests/sec 计数器。在本地一切正常，但是当我想使用远程计算机查看此计数器时，我看不到任何实例，并且所有计数器都设置为 0。

远程注册表服务正在运行，权限似乎没问题。我不知道出了什么问题。我在 3 个环境中工作 - 生产/登台/测试。在生产中，我们仍在使用 .NET，我可以远程访问计数器。在暂存和测试中，我们使用的是 .NET 4.5，但存在问题。

这很奇怪，但是当我想使用本地计算机的网络地址（不是本地 127.0.0.1，但例如 10.88.2.4）访问计数器时，我看不到 :( 的计数器。

其他计数器（例如处理器）在本地和远程可见。

# html - 使用 CSS在标签内居中标签

> ID：13642026
> 
> 赞同：0
> 
> 时间：2012-11-30T09:10:23.463
> 
> 标签：html, css, button

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T09:16:33.620

添加`position:relative`到 div 和`absolute`标签

```
 a{
    position:absolute; 
    text-align:center; 
    width:100%;
    top:40%; left:0; 
    color:red; 
    font-size:25px;
}​ 
```

**[演示](http://jsfiddle.net/WKBu5/6/)**

* * *

**[演示 2](http://jsfiddle.net/WKBu5/8/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:00:36.497

```
<table>
   <tr>
      <td>
         <div align="center" style="float:left;  position:absolute;">
            <img src="xxx.png">
            <a>bla_bla1<a>
         </div>
         <div align="center" style="float:right;  position:absolute; ">
            <img src="yyy.png">
            <a>bla_bla2<a>
         </div>
      </td>
   </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:44:10.310

您也可以使用此方法*（适用于现代浏览器**）*

[http://jsfiddle.net/zW47f/](http://jsfiddle.net/zW47f/)

[http://jsfiddle.net/zW47f/1/](http://jsfiddle.net/zW47f/1/) <--发现`margin-top:-25%`受文字宽度影响，所以改成`-1em`

**CSS：**

```
/* By adding position relative, overflow hidden and float left you definitely 
   force the browser to calc it's percentage positioning based on the div 
   not the td */
td div {
    overflow: hidden;
    position: relative;
    float: left;
    clear: both; /* <-- Remove if you want your divs to display inline */
}

/* By wrapping with a span you can shift elements twice, once to the middle */
td div span {
    display: block;
    left: 50%; top: 50%;
    position: absolute;
}

/* ... and once back with an offset based on the dimensions of the text */
td div span a {
    display: block;
    position: relative;
    left: -50%; /* <-- will work for any width of text < the div's width */
    margin-top: -1em; /* <-- this will only work for single lines of text */
} 
```

**标记：**

```
<table>
  <tr>
    <td>
      <div>
        <img src="xxx.png" />
        <span><a>bla_bla1</a></span>
      </div>
      <div>
        <img src="yyy.png" />
        <span><a>bla_bla2</a></span>
      </div>
    </td>
  </tr>
</table> 
```

*** 表示我没有在 Internet Explorer 中测试过*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:24:28.447

水平对齐：

[http://jsfiddle.net/JVqfM/](http://jsfiddle.net/JVqfM/)

```
div{float:left; width:auto;}
a{display:inline-block; width:100%; text-align:center;}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T09:25:29.647

你的意思是你想要图片前面的文字？

```
div {
    position: relative;
}

a {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    text-align: center;
} 
```

演示：http: [//jsfiddle.net/aanred/AjFur/](http://jsfiddle.net/aanred/AjFur/)

# c#-4.0 - 为什么/如何通过 C# 4.0 中的动态类型进行类型转换

> ID：13642029
> 
> 赞同：1
> 
> 时间：2012-11-30T09:10:29.073
> 
> 标签：c#-4.0

我遇到了这种情况，发现下面的代码解决了这个问题。我想知道它为什么起作用。

假设我有以下情况：

```
int i = 2;
object o = (object)i;
decimal d = (decimal)o; 
```

这将因无效的强制转换异常而失败

虽然下面的代码可以工作：

```
int i = 2;
object o = (object)i;
dynamic dyn = o;
decimal d = (decimal)dyn; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:52:38.763

第一个示例中的转换失败，因为在`object`and之间没有定义转换运算符`decimal`；`o`作为具有转换运算符的类型的基础值*没有*区别，因为运行时仅使用操作数的类型。

在第二个示例中，转换`dyn`为`decimal`包括一个额外的步骤，其中 DLR`dyn`使用（我猜）它的值来计算 的基础类型。因为它使用值来确定它最终使用的类型`int`，因此可以绑定到定义的`int`转换`decimal`运算符。

# javascript - 自定义站点 xxxx.com 使用需要 IE on Desktop 消息的附加组件

> ID：13642031
> 
> 赞同：1
> 
> 时间：2012-11-30T09:10:31.063
> 
> 标签：javascript, microsoft-metro, windows-runtime

我们有需要下载插件的门户。当我们尝试在 Windows 8 Metro 模式下打开它时，它会显示切换到桌面模式的消息，因为 Metro 模式不允许加载项。它显示如下消息。

**站点 xxxx.com 使用需要在桌面上使用 IE 的附加组件。它显示三个按钮**

1.  打开
2.  不再显示此网站
3.  关

当我们单击“打开”时，它将切换到桌面模式。**通常用户倾向于不点击打开按钮**，网页会自行停止。

我得出以下结论，如果我们可以实现以下两个选项中的任何一个，我们就可以解决 Windows 8 中的模式问题。

1.  显示大弹出消息，要求用户切换到桌面模式或取消操作。Windows 不提供任何 API 来检测 Metro 模式。有没有办法做到这一点。

2.  我们可以自定义消息以使大多数用户看起来更大且更易于理解吗？

**注意：**我尝试使用屏幕大小与窗口大小，但我不知道它的长期解决方案与否

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:51:29.497

您应该检查 ActiveX 支持。看看这个答案的例子：[Detect Metro UI Version of IE](https://stackoverflow.com/questions/8751479/javascript-detect-metro-ui-version-of-ie-10)

您还应该阅读 Microsoft 的建议：http: [//msdn.microsoft.com/en-us/library/ie/hh801221 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh801221(v=vs.85).aspx)

# asp.net-mvc - Kendo Grid MVC 结合了 ajax 绑定和服务器编辑

> ID：13642040
> 
> 赞同：3
> 
> 时间：2012-11-30T09:11:03.113
> 
> 标签：asp.net-mvc, grid, kendo-ui

有没有办法结合 ajax 绑定和服务器编辑？

我希望当前的操作（例如读取、分页、排序和删除）通过 ajax 请求来完成，并通过服务器编辑来创建和更新，因为我有一个需要使用整页的复杂表单。

我尝试在自定义列中插入操作链接，但它说我不能在 ajax 绑定上使用服务器编辑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T10:39:05.613

是的，这可以通过使用`template()`和使用 Kendo 客户端模板来实现。

客户端模板基本上是在运行时在客户端上执行的 JavaScript，因此我们可以传入 Kendo UI 知道的变量，这些将是您的模型属性名称。

因此，如果您希望在每行旁边有一个链接，该链接可能链接到详细信息页面，例如，您可以：

```
#=...# - Evaluates the JavaScript code expression or a string property from the data item and outputs the result in the template.
#...# - Evaluates the JavaScript code expression inside, but doesn't output value.
#:...# - Evaluates the JavaScript code expression or a string property from the data item and outputs the result in the template which is HTML encoeded. 
```

最简单的解决方案/示例添加一个新列，如下所示：

```
columns.Template(x => null).ClientTemplate(Html.ActionLink("DisplayText", "Edit", new { Id = "id" }).ToHtmlString().Replace("id", "#=ClientPayeeCodeId#")); 
```

我创建了一个 Html Helper 来帮助我实现这一点，这样我就可以自定义 Html、集中实现等：

在剃刀视图中，我有：

```
columns.Template(x => null).ClientTemplate(Html.KendoActionLink("Foo", "Bar", "This is a Test", "Name",htmlAttributes: null, routeValues: new Dictionary<string, string>() { { "someParameter", "someValue" }, { "someParameter2", "someValue2" } })); 
```

我的扩展方法：

```
 /// <summary>
        /// This should be used in the Kendo UI ClientTemplate() Calls to generate MVC ActionLinks in a Kendo UI Grid
        /// </summary>
        /// <example>  
        /// Usage:
        /// <code> 
        /// columns.Template(x => x.Foo).ClientTemplate(Html.KendoActionLink("Index", "Home", "View Foo","Foo"));
        /// </code> 
        /// </example>
        /// <param name="action">"The Action Name of a Controller you wish to call"</param>
        /// <param name="controller">The Controller Name of a Controller you wish to call</param>
        /// <param name="linkText">Text to display to the user</param>
        /// <param name="propertyName">The property name that acts as the ID for the MVC Action</param>
        /// <param name="htmlAttributes">Additonal Html attribute to add to the anchor tag</param>
        /// <returns>A Relative Url string to the Action you wish to Call</returns>
        public static string KendoActionLink(this HtmlHelper helper, string action, string controller, string linkText, string propertyName, IDictionary<string, string> htmlAttributes, IDictionary<string,string> routeValues)
        {
            //TODO: Support for MVC RouteLink (KendoRoutLink Method) and nested grids (I think) will need to use \\#= #

            TagBuilder tag = new TagBuilder("a");

            string kendoUrl;

            //Kendo UI uses  #=variableName# to escape from from text / html to JavaScript
            if (!string.IsNullOrEmpty(propertyName))
            {
                kendoUrl = string.Format("~/{0}/{1}/#={2}#", controller, action, propertyName);
            }
            else
            {
                kendoUrl = string.Format("~/{0}/{1}", controller, action);
            }

            if (routeValues != null) // Adding the route values as query string, only kendo values for now
                kendoUrl = kendoUrl + "?" + String.Join("&", routeValues.Select(kvp => String.Format("{0}=#={1}#", HttpUtility.UrlEncode(kvp.Key), HttpUtility.UrlEncode(kvp.Value))).ToArray());

            string kendoIcon = "<span class=\"k-icon k-i-restore\"></span>";

            tag.Attributes["href"] = UrlHelper.GenerateContentUrl(kendoUrl, helper.ViewContext.HttpContext);

            tag.SetInnerText(kendoIcon + linkText);

            if (htmlAttributes != null)
            {
                foreach (KeyValuePair<string, string> attribute in htmlAttributes)
                {
                    tag.Attributes[attribute.Key] = attribute.Value;
                }
            }

            tag.AddCssClass("k-button k-button-icontext");

            return tag.ToString();
        } 
```

如果您只想要网格顶部的一个链接，请执行此操作。

```
.ToolBar(toolbar =>
        {
            toolbar.Custom().Action("Create", "SomeController").Text("<span class=\"k-icon k-i-plus\"></span> Create"); 
        }) 
```

# javascript - jQuery ajax 调用是否支持 PATCH？

> ID：13642044
> 
> 赞同：35
> 
> 时间：2012-11-30T09:11:20.137
> 
> 标签：javascript, jquery, ajax, patch

当我发送这个 ajax 请求时：

```
$.ajax({
            headers : {
                'Accept' : 'application/json',
                'Content-Type' : 'application/json'
            },
            url : 'http://localhost:8080/wutup/venues/12',
            type : 'PATCH',
            data : JSON.stringify({description: "842490812321309213801923 gonzagazors"}),
            success : function(response, textStatus, jqXhr) {
                console.log("Venue Successfully Patched!");
            },
            error : function(jqXHR, textStatus, errorThrown) {
                // log the error to the console
                console.log("The following error occured: " + textStatus, errorThrown);
            },
            complete : function() {
                console.log("Venue Patch Ran");
            }
        }); 
```

我收到此错误：

XMLHttpRequest 无法加载 http://localhost:8080/wutup/venues/12。Access-Control-Allow-Methods 不允许方法 PATCH。

但是，使用卷曲：

```
 $ curl -v -H "Accept: application/json" -H "Content-type: application/json" -X PATCH -    d' {"address": "8421 Gonzaga Ave"}'  http://localhost:8080/wutup/venues/12 

About to connect() to localhost port 8080 (#0)
Trying 127.0.0.1... connected
Connected to localhost (127.0.0.1) port 8080 (#0)
PATCH /wutup/venues/12 HTTP/1.1
User-Agent: curl/7.21.1 (i686-pc-mingw32) libcurl/7.21.1 OpenSSL/0.9.8r zlib/1.2.3
Host: localhost:8080
Accept: application/json
Content-type: application/json
Content-Length: 57

HTTP/1.1 204 No Content
Server: Apache-Coyote/1.1
Access-Control-Allow-Origin: *
Date: Fri, 30 Nov 2012 08:14:35 GMT

Connection #0 to host localhost left intact
Closing connection #0 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-01T05:10:20.330

该`$.ajax`方法*确实*支持 HTTP PATCH。

您看到的问题是该方法在选项[preflight check](http://www.w3.org/TR/cors/#resource-preflight-requests)的响应标头中`ajax`查找 PATCH 。您的响应中缺少此标头，或者此标头的值中未包含 PATCH 方法。无论哪种情况，问题都出在服务器上，而不是在您的客户端代码中。`Access-Control-Allow-Methods`

这是一个使用 Java 的示例：

```
response.addHeader("Access-Control-Allow-Methods", "GET, POST, PATCH, PUT, DELETE"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:21:08.637

会不会是你的浏览器不支持 PATCH 方法？

取自[jQuery AJAX API 文档](http://api.jquery.com/jQuery.ajax/)：

> 要发出的请求类型（“POST”或“GET”），默认为“GET”。注意：这里也可以使用其他 HTTP 请求方法，例如 PUT 和 DELETE，但并非所有浏览器都支持。

# maven - OSGi Karaf 无法解决依赖问题

> ID：13642046
> 
> 赞同：0
> 
> 时间：2012-11-30T09:11:41.810
> 
> 标签：maven, osgi

这个问题与发布的问题相似，但这有点不同。

我用过谷歌番石榴，当 maven 安装时，它给出了以下错误

```
Error executing command: Could not start bundle mvn:com.mycompany.webservices/dto/1.0.0 in feature(s) WebServicesGateway-0.0.0: Unresolved constraint in bundle 
com.mycompany.webservices.dto [224]: Unable to resolve 224.0: missing requirement [224.0] osgi.wiring.package; (&(osgi.wiring.package=com.google.common.base)(version>=13.0.0)(!(version>=14.0.0
))) 
```

当我在 pom.xml 中标记以下内容时，maven 安装工作正常。

```
<Import-Package>!com.google.common.base, 
```

但这会在运行时导致 classDEFNotFound 异常。

```
java.lang.NoClassDefFoundError: com/google/common/base/Objects 
```

我尝试将版本放入导入以限制版本号

```
<Import-Package>com.google.common.base;version="[13.0,13.0]", 
```

我试图将其限制为 12.0、11.0 和 10.0，但错误保持不变。

我检查了 maven .m2 存储库，jar 文件看起来不错。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:46:41.660

您必须将 guava 库放到您的 osgi 环境中，这将导出您的捆绑包所需的包。guava-jar 的当前版本 (13) 已准备好 osgi。只需将该 jar 放入 karaf 的部署文件夹中，就可以了。

关于您的解决方案试验：在大多数情况下，您不需要`Import-Package`在 pom 中手动设置属性 - maven bundle 插件确实为您解决了这个问题。如果一个 Import-Package like`com.google.guava`出现在你的包的清单中，这意味着你真的在你的包中使用了那个包——所以手动排除它不会解决问题。实际上，OSGi 试图`ClassNotFoundException`通过在启动捆绑包之前解决导入来保护您，您已经通过设置 import-package 属性利用了该保护机制。

# .net - 将两个模块设置为一个控制台应用程序

> ID：13642048
> 
> 赞同：0
> 
> 时间：2012-11-30T09:11:49.657
> 
> 标签：.net, vb.net

我制作了两个控制台应用程序，都为 3D CAD 程序计算数据。一个计算正常数据，另一个计算对数形式的相同数据。现在我想将两者都放在一个控制台应用程序中。用户需要在命令窗口中选择是使用普通还是对数。我尝试将这两个放在不同的子中，并使用如下的主子：

```
Module Module1
    Sub Main()
        Console.Write("Logarithmic? (yes/no):")
        While Console.ReadLine = "no"
            Call normal()
        End While
        While Console.ReadLine = "yes"
            Call log()
        End While
    End Sub 
```

这不起作用，因为它只调用了第一个子。或者有没有办法我可以调用不同的模块或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:14:26.230

您有两个单独的循环，这意味着它仅在第一个循环中检查“否”，而在第二个循环中仅检查“是”；假设你**想**循环，方法应该是（伪代码）

```
keepGoing = true;
while(keepGoing)
   line = ReadLine
   switch(line)
       case "no"
           normal();
       case "yes"
           log()
       default
           keepGoing = false 
```

# html - 设置浮动 div 的宽度以占用剩余空间

> ID：13642050
> 
> 赞同：6
> 
> 时间：2012-11-30T09:11:59.867
> 
> 标签：html, css

我想让显示字段 div 占据整个剩余宽度。现在显示字段宽度等于文本长度。怎么做？

```
.display-label {
        float:left;
        clear:left;
        min-width:160px;
}

.display-field {
        float:left;
        clear:right;
} 
```

```
<div class="display-label">Account Id</div>
<div class="display-field">30221</div>
<div class="display-label">Full Name</div>
<div class="display-field">Tomas</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:22:54.253

从 中删除浮动并清除`.display-field`。现在 .display-field div 从浏览器的左侧开始，因此您需要将所需的颜色添加到 div 以操作输出。

```
.display-label {
        float:left;
        clear:left;
        min-width:160px; 
        background:white
}

.display-field {
    background:red
}​ 
```

[**演示**](http://jsfiddle.net/WKBu5/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:33:07.843

`overflow:hidden;`是你的朋友吗？

```
 .display-label {
        float:left;         
        clear:left;         
        min-width:160px;
    }  
    .display-field {        
        overflow:hidden;
        background:#ccc;    
    } 
```

[jsfiddle 示例在这里](http://jsfiddle.net/jamessouth/bhqVM/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:55:39.067

我想你需要这个。

```
.display-label {
        float:left;
        clear:left;
        min-width:30%;
        background: red;
}

.display-field {
        float:left;
        clear:right;
        background: yellow;
        min-width:70%;
} 
```

[看现场演示](http://jsfiddle.net/Mack28/mKUH6/)

`min-width`根据您的需要进行调整。

希望它会帮助你。谢谢 ！！

# php - 使用示例 PHP 代码创建 google 驱动器文件夹时出错

> ID：13642053
> 
> 赞同：0
> 
> 时间：2012-11-30T09:12:18.570
> 
> 标签：php, google-drive-api

我一直在尝试使用此处提供的示例代码在 Google Drive 中创建 Web 可访问文件夹的新功能：[https](https://developers.google.com/drive/publish-site) ://developers.google.com/drive/publish-site 。但是，当我运行创建文件夹的代码时，未设置权限并且未返回网络链接，因为我收到以下消息：

```
PHP Fatal error:  Call to a member function getId() on a non-object in /var/www/gdrive/folder.php on line 43 
```

代码如下，全部来自样本：

```
<?php
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$client = new Google_Client();
// Get your credentials from the APIs Console
$client->setClientId('my client id');
$client->setClientSecret('my secret key');
$client->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));

$service = new Google_DriveService($client);

$authUrl = $client->createAuthUrl();

//Request authorization
print "Please visit:\n$authUrl\n\n";
print "Please enter the auth code:\n";
$authCode = trim(fgets(STDIN));

// Exchange authorization code for access token
$accessToken = $client->authenticate($authCode);
$client->setAccessToken($accessToken);

$folder = createPublicFolder($service, "webtest");

print_r $folder;

function createPublicFolder($service, $folderName) {
  $file = new Google_DriveFile();
  $file->setTitle($folderName);
  $file->setMimeType('application/vnd.google-apps.folder');

  $createdFile = $service->files->insert($file, array(
      'mimeType' => 'application/vnd.google-apps.folder',
  ));

  $permission = new Google_Permission();
  $permission->setValue('');
  $permission->setType('anyone');
  $permission->setRole('reader');

 $service->permissions->insert($createdFile->getId(), $permission);

  return $file;
}
?> 
```

我确实打印出了 $file 的内容，但它没有 webViewLink 成员，所以我猜测必须为此设置权限？任何人都知道如何修复 getId() 错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T21:44:17.377

这也发生在我身上——在 config.php 中将 'use-objects' 设置为 true。为我修好了

# c# - 使用 gsm 调制解调器从 C# 应用程序发送接收短信的基本概念

> ID：13642057
> 
> 赞同：4
> 
> 时间：2012-11-30T09:12:24.090
> 
> 标签：c#, asp.net, asp.net-mvc, sms, at-command

谁能向我解释基本概念或向我提供有关使用通过 C# 应用程序连接到 pc 的 gsm 调制解调器发送接收短信的任何文档。

我确实找到了很多源代码，但无法获得其背后的过程或算法。

一个这样的链接是here

[http://www.freestudentprojects.com/c-net-projects/send-and-receive-sms-in-net-using-gprs-modem/](http://www.freestudentprojects.com/c-net-projects/send-and-receive-sms-in-net-using-gprs-modem/)

我下载了源代码，但事情不是很清楚。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:18:23.727

您需要[**ATCommands**](http://www.developershome.com/sms/smsIntro.asp)才能与 GSM 调制解调器通信。这是一篇非常好的[**代码项目文章**](http://www.codeproject.com/Articles/38705/Send-and-Read-SMS-through-a-GSM-Modem-using-AT-Com)，用于了解演示过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:31:51.190

您可以使用 AT 命令，或者如果您使用的是 Windows 7 或 8，则可以使用 Mobile Broadband API。如果您在 Win 8 Metro 中开发，还有另一个 API。

移动宽带 API 参考在这里：http: [//msdn.microsoft.com/en-gb/library/windows/desktop/dd323269 (v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd323269(v=vs.85).aspx)

这里有一篇关于在 C# 中使用它的论文：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd323271 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323271(v=vs.85).aspx)

GSM 调制解调器的完整 3GPP AT 命令参考是 TS 27.007，它在这里：[http](http://www.3gpp.org/ftp/Specs/html-info/27007.htm) ://www.3gpp.org/ftp/Specs/html-info/27007.htm 请注意，大多数调制解调器也有制造商特定的 AT 命令，其中一些是公开的，有些不是。但是对于发送/接收 SMS 等简单程序，您可能不需要它们。

您拥有的源代码将首先以编程方式识别调制解调器连接的端口，然后它将发送 AT 命令。或者，它将识别代表调制解调器的网络适配器，并使用 Windows id 调用移动宽带 API 函数。因此，请查看这些过程的代码。顺便说一句，那是一个有趣的网站——它对我来说是新的。

# mysql - 更新行对中的一行，其中两行一起满足特定条件

> ID：13642058
> 
> 赞同：0
> 
> 时间：2012-11-30T09:12:25.153
> 
> 标签：mysql, row

如何获得具有特定规格的一对行的两个 id？

更详细：

```
id - spec1 - spec2 - spec 3
1    null    30 nov  34
2    null    30 nov  34
3    null     1 dec  35
4    75       1 dec  35 
```

我想更新具有相同日期的行的 spec3 并且没有任何行具有 spec1 的值。

在此示例中：我想更新第 1 行和第 2 行 -> 相同日期，spec1 没有值

我不想更新第 3 行和第 4 行 -> 相同日期但第 4 行具有 spec1 的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:40:26.227

您可以从此查询中获取 id

从 tbl a, tbl b 中选择 a.id id 其中 a.spec2 = b.spec2 and isnull(a.spec1) and isnull(b.spec1) and a.id != b.id;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:36:07.890

```
UPDATE my_table t1
  JOIN my_table t2
    ON t1.spec1 IS NULL
   AND t2.spec1 IS NULL
   AND t1.spec2 = t2.spec2
   AND t1.id    < t2.id
SET    t1.spec3 = 123,
       t2.spec3 = 456 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/88167/1/0)上查看。

# jquery - 在 beforeSend ajax 上暂停 setinterval 的正确方法

> ID：13642059
> 
> 赞同：1
> 
> 时间：2012-11-30T09:12:25.093
> 
> 标签：jquery, ajax, setinterval

我有这个代码。

```
 var centerTimer = 0;
    function startCenterRefresh( refreshTime,position,params ) {
        centerTimer = setInterval(function() {
            jQuery.ajax({
                type: "POST",
                url: host+"/forms/refresh-center.php",
                beforeSend:function(){ stopCenterRefresh(); },
                success: function(){console.log(1);},
                complete:function(){startCenterRefresh(refreshTime,position,params);}
            });
        },refreshTime);
    }

    function stopCenterRefresh() {
        clearInterval( centerTimer );
    } 
```

这是在ajax请求的beforeSend上暂停setInterval然后在ajax请求完成后恢复setInterval的正确方法吗？我不确定我是否达到了我对这次执行的期望。

您的想法将不胜感激和奖励。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:16:27.753

`clearInterval`不会暂停对函数的定期调用：它会删除它。因此，您在第一次通话时就完全停止了它。因此是无效的。

您可能应该做的只是`setTimeout`在成功回调中将 ajax 调用重新排队（使用）。

例如 ：

```
var call = function() {
    $.ajax({ ... }).done(function(...){
       ...
       setTimeout(call, refreshTime);
    });
}; 
```

# python - 如何将变量的值传递给python中的import语句

> ID：13642062
> 
> 赞同：4
> 
> 时间：2012-11-30T09:12:34.040
> 
> 标签：python, string, import, syntax-error, variable-assignment

我对python真的很陌生。**我正在使用 python<2.7。**我必须导入一个我一开始不知道名称的文件。实际上我必须通过命令提示符传递文件的名称，现在我已经读取了名称并存储在变量中，但我不知道如何将它传递给 import 语句。我正在尝试代码

```
str = sys.argv[lastIndex]
from "%s" import *,str 
```

但它给出了错误

```
File "IngestDataToMongo.py", line 86
from "%s" import *,str
        ^
SyntaxError: invalid syntax 
```

那么该怎么做。python <2.7也可以，因为由于某些原因，我无法更改Python的版本或安装任何运行此代码的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:16:58.120

您可以改用[`__import__()`](http://docs.python.org/2/library/functions.html#__import__)函数来导入模块。它接受变量作为其参数。

但首先，确保你真的需要那个——90% 的时间人们并不真正需要那个功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T09:18:59.667

您应该使用[importlib](http://docs.python.org/2.7/library/importlib.html?highlight=importlib#importlib)模块

```
import importlib

mdl = 'urllib'
your_module = importlib.import_module(mdl)
your_module.quote
>>> <function urllib.quote> 
```

**编辑**

感谢[Tadeck](https://stackoverflow.com/users/548696/tadeck) - 这确实适用于 python 2.7 和 3.1+

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T09:21:20.763

如果您不想导入`importlib`模块，请执行以下操作：

```
import sys
s = sys.argv[lastIndex]
def is_save(s):
    #test if s is a valid argument
    return True or False

if is_save(s):
    exec('from %s import *'%s) 
```

注意：`is_save`需要该函数以避免滥用脚本，因为`exec`(or `eval`)的使用具有[潜在危险](http://lucumr.pocoo.org/2011/2/1/exec-in-python/)。

# struts-1 - struts1 DynaActionForm ClassNotFoundException

> ID：13642065
> 
> 赞同：0
> 
> 时间：2012-11-30T09:12:41.817
> 
> 标签：struts-1

我正在学习 Apache Struts1。当我使用 DynaActionForm 时，在提交 '/login' 请求后，出现`ClassNotFoundException`错误：找不到动作“com.wi.struts.UserAction”。我的文件“struts-config.xml”：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN" "http://struts.apache.org/dtds/struts-config_1_2.dtd">
<struts-config>
    <form-beans>
        <form-bean name="UserForm" type="org.apache.struts.action.DynaActionForm">
             <form-property name="userName" type="java.lang.String"/>
             <form-property name="passWord" type="java.lang.String"/>
        </form-bean>
    </form-beans>

    <action-mappings>
        <action  path="/login"  type="com.wi.struts.UserAction" name="UserForm"  scope="session">
        <forward name="loginIn" path="index.jsp"/>
        </action>
    </action-mappings>

</struts-config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:53:17.993

您可以尝试检查已部署的应用程序 .war 或文件夹，并检查您是否正确导出了项目的所有 .class 文件。

祝你好运！

# xcode - 从表格单元项目查看控制器

> ID：13642067
> 
> 赞同：0
> 
> 时间：2012-11-30T09:12:56.277
> 
> 标签：xcode, uitableview, uiviewcontroller

目前，我有一个包含 5 个单元格的表格，每个单元格都带有标签。当一个单元格被点击它链接到一个显示信息的新视图时，我的问题是我是否必须有 5 个单独的视图控制器来显示信息？还有一种方法可以在不使用静态单元格的情况下从表格单元格推送新视图，这就是我可以使用的方法，它是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:18:39.837

例如，在您推送的（tableViewController 的）代码中，将新的 ViewController 传递给选定的行。

有关详细代码，请参阅：[在表格视图中点击单元格时推送新视图](https://stackoverflow.com/questions/5571686/push-a-new-view-when-a-cell-is-tapped-in-table-view?rq=1)

# c# - C#对字符串排序大小写字母

> ID：13642068
> 
> 赞同：4
> 
> 时间：2012-11-30T09:12:57.907
> 
> 标签：c#, string, sorting, case-sensitive

是否有一个标准功能可以让我按以下方式对大写和小写字母进行排序，或者我应该实现一个自定义比较器：

```
student
students
Student
Students 
```

例如：

```
using System;
using System.Collections.Generic;

namespace Dela.Mono.Examples
{
   public class HelloWorld
   {
      public static void Main(string[] args)
      {
         List<string> list = new List<string>();
         list.Add("student");
         list.Add("students");
         list.Add("Student");
         list.Add("Students");
         list.Sort();

         for (int i=0; i < list.Count; i++)
             Console.WriteLine(list[i]);
      }
   } 
} 
```

它将字符串排序为：

```
student
Student
students
Students 
```

如果我尝试使用`list.Sort(StringComparer.Ordinal)`，排序如下：

```
Student
Students
student
students 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:20:34.083

你的意思是在这些线上吗

```
List<string> sort = new List<string>() { "student", "Students", "students", 
                                         "Student" };
List<string> custsort=sort.OrderByDescending(st => st[0]).ThenBy(s => s.Length)
                                                         .ToList(); 
```

第一个按第一个字符排序，然后按长度排序。根据我上面提到的模式，它与您当时建议的输出相匹配，否则您将执行一些自定义比较器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:24:51.877

*我相信您想将那些以小写和大写开头的字符串分组，然后分别对它们进行排序。*

你可以做：

```
list = list.Where(r => char.IsLower(r[0])).OrderBy(r => r)
      .Concat(list.Where(r => char.IsUpper(r[0])).OrderBy(r => r)).ToList(); 
```

首先选择以小写开头的字符串，对其进行排序，然后将其与以大写开头的字符串连接（排序）。所以你的代码将是：

```
List<string> list = new List<string>();
list.Add("student");
list.Add("students");
list.Add("Student");
list.Add("Students");
list = list.Where(r => char.IsLower(r[0])).OrderBy(r => r)
      .Concat(list.Where(r => char.IsUpper(r[0])).OrderBy(r => r)).ToList();
for (int i = 0; i < list.Count; i++)
    Console.WriteLine(list[i]); 
```

和输出：

```
student
students
Student
Students 
```

# google-maps - Gmap API 结果与网站不同

> ID：13642072
> 
> 赞同：1
> 
> 时间：2012-11-30T09:13:15.353
> 
> 标签：google-maps, geocoding, zero, google-geocoder

我正在使用 Gmap 对我的应用程序中的一些地址进行地理编码。除了一个地址：3311 ESPERANZA CROSSING，Austin，United States，它运行良好。

当我通过 Gmap 客户端或服务器端请求尝试时，我得到了结果 ZERO_RESULTS ：

```
{   "results" : [],
   "status" : "ZERO_RESULTS"
} 
```

但是，当在 gmap ( [http://maps.google.fr/maps?q=3311+ESPERANZA+CROSSING,+Austin,+United+States](http://maps.google.fr/maps?q=3311%20ESPERANZA%20CROSSING,%20Austin,%20United%20States) ) 上搜索相同的地址时，就会有结果。

这怎么可能 ？

感谢你们对我的帮助。

在用于服务器端请求的链接下方： [http ://maps.googleapis.com/maps/api/geocode/json?address=3311+ESPERANZA+CROSSING,+Austin,+United+States&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=3311%20ESPERANZA%20CROSSING,%20Austin,%20United%20States&sensor=false)

在客户端请求下方：

```
var geocoder = new google.maps.Geocoder();
if (geocoder) {
        // Create the complete adress                               
    var complete_address = '3311 ESPERANZA CROSSING, Austin, United States';

    // Start request
        geocoder.geocode({ 'address': complete_address }, function (gmap_results, status) {
            console.log( gmap_results ); 
            console.log( status );
        });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:33:32.683

Google Maps 中的结果是 Places 结果，而不是来自 Geocoder。

# php - 在 MySQL 中组合结果

> ID：13642076
> 
> 赞同：1
> 
> 时间：2012-11-30T09:13:41.097
> 
> 标签：php, mysql, sql

我有这个查询：

```
$query = 
         "
         SELECT
           detail_firstN AS firstname,
           detail_lastN AS lastname
         FROM users
         WHERE
           users_id = :users_id
         "; 
```

结果将是这样的：

```
Array
(
    [firstname] => John
    [lastname] => Doe
) 
```

MySQL 中有什么方法可以让我将结果组合成只有这个输出吗？

```
Array
(
    [name] => John Doe
) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T09:14:43.800

采用`CONCAT`

```
SELECT CONCAT(detail_firstN, ' ', detail_lastN) AS Name
FROM   users
WHERE  users_id = :users_id 
```

*   [康卡特](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

或者`CONCAT_WS`

```
SELECT CONCAT_WS(' ', detail_firstN, detail_lastN) AS Name
FROM   users
WHERE  users_id = :users_id 
```

*   [CONCAT_WS](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)

**更新 1**

*   [请参阅 SQLFiddle 演示](http://sqlfiddle.com/#!2/e8b73/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:31:02.247

试试这个代码

```
<?PHP

function combine_result($array,$out_key = "name") // Deafult output key is [name]
{
    if(is_array($array))
    {
        $vals = array_values($array);
        $out  = implode(" ",$vals);
        return array($out_key=>$out);
    }
}

$array = array(
                "firstname" => "John",
                "lastname" => "Doe" );

print_r(combine_result($array)); // Array ( [name] => John Doe )

?> 
```

# android - LayoutParams 不适用于 ScrollView 中的子项

> ID：13642078
> 
> 赞同：0
> 
> 时间：2012-11-30T09:13:56.637
> 
> 标签：android, android-layout

我在扩展 ScrollView 的类中使用 LinearLayout。LinearLayout 有许多孩子，其高度在我的自定义类的覆盖 onScrollChanged() 方法中发生变化。如果滚动缓慢，一切都会完美。如果我用甩动动作快速滚动，孩子们的身高就会卷曲。我已经在覆盖的 onScrollChange() 方法中进行了日志输出，它表明未应用布局参数。

```
Log.v("myapp", "getHeight: "+mChildHolder.getChildAt(i).getHeight());
Log.v("myapp", "getLayoutParams.height "+mChildHolder.getChildAt(i).getLayoutParams().height); 
```

输出：

```
getHeight: 45
getLayoutParams.height 90 
```

为什么滚动视图不允许在投掷后应用 LayoutParams 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:51:12.550

似乎找到了解决方案。我最终在每次调用 onScrollChanged() 时调用 requestLayout()。不确定它在性能方面是否有效，但现在可以按预期工作。

# excel - Excel函数查找信息

> ID：13642082
> 
> 赞同：0
> 
> 时间：2012-11-30T09:14:12.780
> 
> 标签：excel

我有一个 Excel 工作簿，其中的工作表按月编号。每张表都有一列用于艺人、歌曲标题、权利正文。

我现在正在为每张表中的每首歌曲填写版权正文。

大多数工作表都有相同的艺术家和歌曲，并添加了一些内容。

什么功能可以让我在上一张表中查找艺人和歌名，并将其与当前表中的艺人和歌名进行比较，如果匹配，则将上一张表中的 Rights body 值填充到当前表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:19:23.583

您需要查看 VLOOKUP ( [http://office.microsoft.com/en-gb/excel-help/vlookup-HP005209335.aspx](http://office.microsoft.com/en-gb/excel-help/vlookup-HP005209335.aspx) ) 功能。

有关 YouTube 视频演示，请参见[此处](http://www.youtube.com/watch?v=wH6jPVHnc9Q)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:19:41.290

`lookup`or`vlookup`函数可能是您所追求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T12:19:55.863

如果要在数据不完全相同的列表之间进行匹配，可以使用模糊查找代码。在此处查看详细信息：[在 Excel VBA 项目中匹配相似但不精确的文本字符串](https://stackoverflow.com/questions/13291313/matching-similar-but-not-exact-text-strings-in-excel-vba-projects/13349597#13349597)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T15:57:03.947

只要您正在寻找精确匹配，VLOOKUP 就很棒。TRUE / FALSE 参数并没有真正达到您认为它服务的目的。当你在寻找非黑即白的东西时，你需要一些模糊的逻辑。

VLOOKUP 不足的一个简单示例：

*   歌曲名称 A =“贝多芬：费德里奥 op.72”
*   歌曲名称 B = “贝多芬：费德里奥作品 72”

微软发布了一个免费的 Excel 插件（与最新版本兼容），可以实现模糊的 vlook up'ing。在此处获取文件（加载项 + 文档 + 示例）：

> > [http://www.microsoft.com/en-us/download/details.aspx?id=15011](http://www.microsoft.com/en-us/download/details.aspx?id=15011)

# android - 3 个编辑文本字段的文本观察器 - 我需要根据 3 个编辑文本字段过滤结果

> ID：13642083
> 
> 赞同：0
> 
> 时间：2012-11-30T09:14:14.523
> 
> 标签：android, textwatcher

我有 3 个编辑文本字段。我对这三个都使用了文本观察器。它运作良好。这意味着，如果我在 edittext A 中键入一些内容，它会提供基于 A 的结果。在 edittext B 和 edittext C 中相同。我想获得合并的结果。我想像这样过滤结果：

如果我在国家号输入“2”，在注册号输入“3”，结果应该是这样的

## 国家编号： 注册编号： 姓名：

```
234               34           john
2890              345          xxxx
21                3            smith 
```

我将过滤后的值保存在数组列表中，并将该数组列表传递给适配器。

```
edtNationalityInfo.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            textlength = edtNationalityInfo.getText().length();

            if (textlength > 0)
                nationalFlag = true;
            else
                nationalFlag = false;

            // filtered_data.clear();
            for (int i = 0; i < data.size(); i++) {
                if (textlength <= data.get(i).get_nationalityno().length()) {
                    if (edtNationalityInfo
                            .getText()
                            .toString()
                            .equalsIgnoreCase(
                                    (String) data.get(i)
                                            .get_nationalityno()
                                            .subSequence(0, textlength))) {

                        filtered_data.add(data.get(i));
                    }
                }
            }

            lvVotersList.setAdapter(new TextWatcherAdapter(Attendance.this,
                    filtered_data));

        }
    });

edtVoterName.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            textlength = edtVoterName.getText().length();
            if (textlength > 0)
                nameFlag = true;
            else
                nameFlag = false;

            // filtered_data.clear();
            for (int i = 0; i < data.size(); i++) {
                if (textlength <= data.get(i).get_name().length()) {
                    if (edtVoterName
                            .getText()
                            .toString()
                            .equalsIgnoreCase(
                                    (String) data.get(i).get_name()
                                            .subSequence(0, textlength))) {
                        filtered_data.add(data.get(i));
                    }
                }
            }

            lvVotersList.setAdapter(new TextWatcherAdapter(Attendance.this,
                    filtered_data));
        }
    }); 
```

这是我的 ArrayList ：

```
data = new ArrayList<DataAttendance>();
filtered_data = new ArrayList<DataAttendance>(); 
```

// 我的数据模型类：

```
public class DataAttendance {

public String _id = null;
public String _serialno = null;
public String _nationalityno = null;
public String _voteCasted = null;
public String _voteCastedTime = null;
public String _name = null;

public DataAttendance() {

}

public DataAttendance(String _name, String _serialno,
        String _nationalityno, String _voteCasted, String _voteCastedTime) {
    this._name = _name;
    this._nationalityno = _nationalityno;
    this._serialno = _serialno;
    this._voteCasted = _voteCasted;
    this._voteCastedTime = _voteCastedTime;
}

public String get_id() {
    return _id;
}

public void set_id(String _id) {
    this._id = _id;
}

public String get_name() {
    return _name;
}

public void set_name(String _name) {
    this._name = _name;
}

public String get_nationalityno() {
    return _nationalityno;
}

public void set_nationalityno(String _nationalityno) {
    this._nationalityno = _nationalityno;
}

public String get_serialno() {
    return _serialno;
}

public void set_serialno(String _serialno) {
    this._serialno = _serialno;
}

public String get_voteCasted() {
    return _voteCasted;
}

public void set_voteCasted(String _voteCasted) {
    this._voteCasted = _voteCasted;
}

public String get_voteCastedTime() {
    return _voteCastedTime;
}

public void set_voteCastedTime(String _voteCastedTime) {
    this._voteCastedTime = _voteCastedTime;
} 
```

现在我越来越喜欢：

如果我在国家号输入“2”，在注册号输入“3”，结果应该是这样的

## 国家编号： 注册编号： 姓名：

```
234               434          siva
2890              345          elma
21                23           laura 
```

像这样..

希望我能在这里得到帮助..！

//------------------------------------------------ ----------------------------------

我得到了另一个数组列表的解决方案：

这里是 ：

它可能会帮助某人..

```
 edtVoterName.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            int Votertextlength = edtVoterName.getText().length();
            if (Votertextlength > 0) {
                nameFlag = true;
            } else {
                nameFlag = false;
            }

            textlength = edtVoterName.getText().length();

            if (nationalFlag == true || registerFlag == true) {

                Log.d("Attendance Flag : ",
                        " The Attendance nationalFlag == " + nationalFlag
                                + "  registerFlag ==  : " + registerFlag);

                ArrayList<DataAttendance> temp_data;
                temp_data = new ArrayList<DataAttendance>();
                textlength = edtVoterName.getText().length();
                // filtered_data.clear();
                for (int i = 0; i < filtered_data.size(); i++) {
                    if (textlength <= filtered_data.get(i).get_name()
                            .length()) {
                        if (edtVoterName
                                .getText()
                                .toString()
                                .equalsIgnoreCase(
                                        (String) filtered_data.get(i)
                                                .get_name()
                                                .subSequence(0, textlength))) {
                            temp_data.add(filtered_data.get(i));
                        }
                    }
                }
                filtered_data = temp_data;
                lvVotersList.setAdapter(new TextWatcherAdapter(
                        Attendance.this, filtered_data));
            } else {
                filtered_data.clear();
                for (int i = 0; i < data.size(); i++) {
                    if (textlength <= data.get(i).get_name()
                            .length()) {
                        if (edtVoterName
                                .getText()
                                .toString()
                                .equalsIgnoreCase(
                                        (String) data.get(i)
                                                 .get_name()
                                                .subSequence(0, textlength))) {

                            filtered_data.add(data.get(i));
                        }
                    }
                }

                lvVotersList.setAdapter(new TextWatcherAdapter(
                        Attendance.this, filtered_data));
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-31T10:00:23.033

用这个

```
@Override 
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

EditText e = new findViewById(R.id.editText);
EditText e1 = new findViewById(R.id.editText1);
EditText e2 = new findViewById(R.id.editText2);

e.addTextChangedListener(new CustomTextWatcher(e));
e.addTextChangedListener(new CustomTextWatcher(e1));
e.addTextChangedListener(new CustomTextWatcher(e2));
}

private class CustomTextWatcher implements TextWatcher {
private EditText mEditText;

public CustomTextWatcher(EditText e) { 
    mEditText = e;
}

public void beforeTextChanged(CharSequence s, int start, int count, int after) {
}

public void onTextChanged(CharSequence s, int start, int before, int count) {  
if(mEditText.getId()== R.id.editText){}
else if(mEditText.getId()== R.id.editText2){}
else{}
}

public void afterTextChanged(Editable s) {
}
} 
```

# c - 在数组的子集上调用 qsort

> ID：13642088
> 
> 赞同：1
> 
> 时间：2012-11-30T09:14:39.483
> 
> 标签：c, struct, qsort

我一直在寻找一种在 C 中对数组子集进行排序的方法，而无需将元素移动到临时数组并将它们复制回来。我可能对 qsort 有不好的理解，但我认为下面的代码应该可以工作：

```
qsort(&my_struct_arr[1],3,sizeof(my_struct),my_struct_cmp);
//my_struct_arr is a 4 element array, where i want to sort from position 1 to 3
int my_struct_cmp(const void *a, const void *b)
{
    my_struct A=*(my_struct*)a, B=*(my_struct*)b;
    if(A.x-B.x < 0.01) return A.y-B.y;
    return A.x-B.x;
}
typedef struct foo
{
    float x, y;
} my_struct; 
```

问题是，它不起作用。

**更新 1：** 好的，我知道我对这个问题并不完全清楚。我将数组从位置 1 初始化到 3，所以我有一个包含如下元素的数组：

{ { ValueFromPreviousIteration.x,ValueFromPreviousIteration.y }, {x1,y1}, {x2,y2}, {x3,y3} }

我的问题是，像上面那样调用的 qsort 将对整个数组进行排序，而我只想对它的最后 3 个元素进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:32:11.223

您的比较功能不稳定。它可以根据传递结构的顺序返回不同的结果。

考虑以下结构值：

```
my_struct m = { -3.021, 30 };
my_struct n = { 3.010, 0 };    

int main(void)
{
    int comp1 = my_struct_cmp( &m, &n);
    int comp2 = my_struct_cmp( &n, &m);

    printf( "%d %d\n", comp1, comp2);

    return 0;
} 
```

第一个比较表明`m > n`，而第二个表明`n > m`。这种行为让人迷惑`qsort()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:18:18.560

`int my_struct_cmp`返回整数。

而你又回来了`float`。它将自动转换为 int，并且可能`0`.

这就是为什么它不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:21:59.823

是否`if(A.x-B.x < 0.01)`正确？你可能想要`if(A.x-B.x < 0.0)`. 使用`0.0`代替 `0.01`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:50:00.237

我认为您需要将比较功能修改为

```
int my_struct_cmp(const void* a, const void* b)
{
    const my_struct A = *(my_struct*)a, B = *(my_struct*)b;
    return fabs(A.x - B.x) >= 0.01 ? (A.x > B.x) - (A.x < B.x) : (A.y > B.y) - (A.y < B.y);
} 
```

或（不那么便携）

```
int my_struct_cmp(const void* a, const void* b)
{
    const my_struct A = *(my_struct*)a, B = *(my_struct*)b;
    return fabs(A.x - B.x) >= 0.01 ? copysign(1, A.x - B.x) : copysign(1, A.y - B.y);
} 
```

否则，存在许多特定于平台的解决方案，用于在不执行比较的情况下确定浮点数的符号，这实际上并非易事。

这应该更快一点：

```
int my_struct_cmp(const void* a, const void* b)
{
    const my_struct *A = (my_struct*)a, *B = (my_struct*)b;
    return fabs(A->x - B->x) >= 0.01 ? (A->x > B->x) - (A->x < B->x) : (A->y > B->y) - (A->y < B->y);
} 
```

# java - Java中的日期问题

> ID：13642089
> 
> 赞同：1
> 
> 时间：2012-11-30T09:14:39.863
> 
> 标签：java, date, syntax, simpledateformat

当我使用 java 时，我遇到了日期的下一个问题。我有这个代码：

```
String dateF=anio_final+"-12-31";
System.out.println("La fecha final al principio:"+dateF);

java.util.Date f_final=null;
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-mm-dd");
f_final=formatter.parse(dateF);
System.out.println("Al final la fecha final es:"+f_final);

//=> anio_final is 2012, 
```

因此，当我打印 dateF 时，我得到 2012-12-31，但是当我执行 SimpleDateFormat 将其放在 f_final 变量上时，我得到 2012-01-31，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:16:06.800

在[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)中，一年中的月份由 表示`Uppercase M`。`Lowercase m`适用于`minute`：-

```
new SimpleDateFormat("yyyy-mm-dd"); 
```

应该： -

```
new SimpleDateFormat("yyyy-MM-dd"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:17:40.683

请参阅[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

您的模式`yyyy-mm-dd`是：年-小时-分钟-月日:-)您应该更改为

```
SimpleDateFormat formatter = new SimpleDateFormat( "yyyy-MM-dd" ); 
```

# iphone - iOS App Store 验证：无法提取代码签名权利

> ID：13642091
> 
> 赞同：0
> 
> 时间：2012-11-30T09:14:47.317
> 
> 标签：iphone, ios, build, archive

我的应用程序一切正常。我需要更改捆绑 ID，因此我将其更改为当前设置的 (com.jeffgrimes9.${PRODUCT_NAME:rfc1034identifier}) - 正是括号内的内容。我的应用程序的名称是锤头。我将捆绑包 ID 更改为 com.jeffgrimes9.locationchat，然后在尝试运行模拟器时立即将其更改回之前的值，但什么也没发生。

所以在一天结束时，它是相同的值。但是现在该应用程序根本无法运行。我试过重新启动 Xcode，重新启动 iPhone 模拟器，清除我的 DerivedData 文件夹，清理构建，将所有文件夹复制到新项目，尝试不同的捆绑 id 值，查看整个互联网......什么都没有。但是当我尝试为 App Store 提交验证我的构建时，我不断收到相同的错误消息：

“无法从您的应用程序中提取代码签名权利。请确保锤头是经过正确代码签名的有效 Mach 可执行文件。”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:23:55.463

首先尝试确保您的证书是有序的。如果是这样，问题可能是重复的 plist 文件。

如果您直接在*.plist*文件中修改了包 ID，XCode 可能已经创建了包含更改的第二个*.plist*文件。尝试找到它并删除它。确保它具有相同的值，只是您可能所做的编辑有所不同。

接下来，尝试通过转到*Targets > Get Info*并修改那里的值（而不是手动编辑*.plist*文件）来进行您之前所做的修改。[这个 SO question](https://stackoverflow.com/questions/238980/how-to-change-the-name-of-an-iphone-app)解释了要在该屏幕中修改哪些值。

# r - 对于包含 S4 类的包，推荐的包构建工作流程是什么？

> ID：13642092
> 
> 赞同：3
> 
> 时间：2012-11-30T09:15:00.150
> 
> 标签：r, rstudio, s4, roxygen2

> **可能重复：**
> [如何使用 Roxygen2 正确记录 S4 类插槽](https://stackoverflow.com/questions/7368262/how-to-properly-document-s4-class-slots-using-roxygen2)

我想构建一个包含`S4 classes`使用 R Studio 和`roxygen2`. `roxygen2`当我将几个函数引入`S4 classes`我的包时，我已经使用语法记录了我的所有函数。

现在我意识到没有开箱即用的“@slot”功能。所以我想知道我怎样才能让我的所有文档都为其他功能工作，并像[这个线程](https://stackoverflow.com/questions/7368262/how-to-properly-document-s4-class-slots-using-roxygen2)`S4 classes`中建议的那样手动记录？

或者换句话说，您会推荐哪个工作流程来构建一个包含老式函数和`S4 classes`?

编辑：您是否建议将 R Studio 构建工具配置为不创建 .Rd 文件。`roxygenize`手动然后添加信息？这仍然会导致覆盖类的手动生成的 .Rd 文件......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:39:26.977

# roxygen 和 S4 课程的一般信息

roxygen 的第一个版本有一个`@slot`标签，但该版本不再支持`roxygen2`. 所以建议不要使用那个旧版本。

至于现在，`roxygen2`对 S4 类没有真正的支持。Hadley 正在努力实现这一目标`roxygen3`（[https://github.com/hadley/roxygen3](https://github.com/hadley/roxygen3)）。如果您想试一试并感到勇敢：`roxygen3`从 github 安装并尝试开发版本。请注意，此版本最终将合并到`roxygen2`中，因此问题会及时自行解决。

# 关于您的工作流程：

我个人总是觉得结合使用 roxygen 和手动编写的 .Rd 文件是个坏主意。但如果必须，您可以使用参数将 roxygen 的输出发送到不同的目录`roxygen.dir`。这样，您可以将所需的任何内容复制回包目录，而不会覆盖手动写入的文件。

```
roxygenise("./mypackage", roxygen.dir="./myroxygendir") 
```

我要做的就是`roxygen2`按照链接到的线程中的说明为您的类编写 Rd 文件。您不必出于某种未知原因而像您认为的那样手动添加它们。您只需`#'`像往常一样使用指示 Rd 块，并使用您链接到的线程中给出的任何内容。如果您想让插槽成为一个单独的部分，您可以使用`@section`下面示例中的标签来执行此操作。

目前如何使用以下方法添加插槽的示例`roxygen2`：

```
#' The MY class
#'
#' This class blabla yadayada
#'
#'@section Slots:
#'  \describe{
#'    \item{\code{aslot}:}{Object of class \code{"numeric"}, containing 
#'whatever and a bit more}
#'    \item{\code{anotherslot}:}{Object of class \code{"character"}, containing
#' strings.}
#'  }
#'
#' @note Yes, you can add notes
#' @name MY 
#' @rdname MY
#' @aliases MY-class
#' @exportClass MY
#' @author Joris Meys
setClass("MY",
         representation=representation(aslot="numeric",
                                       anotherslot="character"
                                       ) 
```

# asp.net - IIS - 自定义 Web 服务器 - 无法在 Web 服务器上开始调试

> ID：13642093
> 
> 赞同：1
> 
> 时间：2012-11-30T09:15:00.653
> 
> 标签：asp.net, visual-studio-2010, iis, iis-7

我正在尝试使用 IIS 自定义 Web 服务器调试我的 Web 应用程序。但是我收到一个错误“无法在 Web 服务器上开始调试。调试器已附加”。但是我检查了我的进程，没有任何与此相关的进程，尝试了 iisreset 甚至重新启动了我的系统。仍然该错误显示我的系统。

我正在使用 Visual Studio 2010、IIS 7、.Net 4.0

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:28:41.273

尝试以下选项：

1.  在 Visual Studio 中按 Shift+F5，这将终止当前调试会话。然后您可以按 F5，这将启动一个新的调试会话。

2.  右键单击 Web 应用程序 -> Degug -> 启动新实例

![在此处输入图像描述](../Images/406c073d41ffd260a8df4fbd4d584241.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-08T15:25:25.050

我找到了这个线程：[Visual Studio - 无法在 Web 服务器上开始调试。Web服务器没有及时响应](http://www.aspdotnet-suresh.com/2011/12/visual-studio-unable-to-start-debugging.html) 您需要`cmd`以管理员身份执行并且：

```
> cd \
> cd Windows
> cd system32
> issreset 
```

# nhibernate - 在 msbuild 中流利的 NHibernate

> ID：13642095
> 
> 赞同：1
> 
> 时间：2012-11-30T09:15:07.730
> 
> 标签：nhibernate, msbuild, fluent-nhibernate, build-automation

我正在编写一个自动构建脚本来运行验收测试。我的应用程序使用 Fluent NHibernate。我的构建脚本应该在运行测试之前部署数据库。是否有用于从流利的映射创建数据库的 msbuild 任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:56:46.527

我编写了一个 testbaseclass，它在静态构造函数中为所有测试创建数据库和 sessionfactory。它在代码中总是更容易。

# java - JInternalFrame 未在 Netbeans 7.1.2 中使用 JFrame L&F

> ID：13642099
> 
> 赞同：0
> 
> 时间：2012-11-30T09:15:28.810
> 
> 标签：java, swing, look-and-feel, jinternalframe, nimbus

我正在使用 Netbeans 创建一个 MDI 应用程序，在外观和感觉设置为 Nimbus 的情况下，一切都按预期运行。

每当我运行应用程序时，JFrame 及其工具栏使用指定的 L&F (Nimbus)，但内部框架使用跨平台 (Metal) L&F，使应用程序看起来很破旧。

我希望内部框架使用与 JFrame 相同的 L&F。请问我该如何解决这个问题？

我试过打电话`JFrame.setdefaultlookandfeeldecorated(true)`，`SwingUtilities.updatecomponenttreeui(frame)`但他们没有解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:54:06.430

> 每当我运行应用程序时，JFrame 及其工具栏使用指定的 L&F (Nimbus)，但内部框架使用跨平台 (Metal) L&F，使应用程序看起来很破旧。

*   无法重现描述的问题

*   请阅读有关[Nimbus 外观的Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)

![在此处输入图像描述](../Images/0c2193de79b68adf1cf11a8176c9303b.png)

```
import java.awt.Dimension;
import java.awt.EventQueue;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;

public class TestInternalFrame {

    public TestInternalFrame() {
        final JInternalFrame internal = new JInternalFrame("test");
        final JInternalFrame hidden = new JInternalFrame("test");
        hidden.setBounds(1000, 1000, 1, 1);
        hidden.setVisible(true);
        internal.setVisible(true);
        internal.setBounds(0, 0, 100, 100);
        JDesktopPane pane = new JDesktopPane();
        pane.add(internal);
        pane.add(hidden);
        pane.setPreferredSize(new Dimension(10000, 10000));
        final JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.getContentPane().add(new JScrollPane(pane,
                JScrollPane.VERTICAL_SCROLLBAR_NEVER,
                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER));
        /*frame.getContentPane().add(new JButton(new AbstractAction("Show blocked dialog") {

        private static final long serialVersionUID = 1L;

        @Override
        public void actionPerformed(ActionEvent e) {
        EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
        JOptionPane.showInternalMessageDialog(hidden, "Hi 2!");
        }
        });
        JOptionPane.showInternalMessageDialog(internal, "Hi 1!");
        }
        }), BorderLayout.PAGE_END);*/
        frame.setPreferredSize(new Dimension(400, 300));
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                System.out.println(info.getName());
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (UnsupportedLookAndFeelException e) {
            // handle exception
        } catch (ClassNotFoundException e) {
            // handle exception
        } catch (InstantiationException e) {
            // handle exception
        } catch (IllegalAccessException e) {
            // handle exception
        }

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                TestInternalFrame tif = new TestInternalFrame();
            }
        });
    }
} 
```

# sharepoint - 使用 infopath/sharepoint 对多个下拉菜单进行正确的文档跟踪

> ID：13642107
> 
> 赞同：1
> 
> 时间：2012-11-30T09:16:13.390
> 
> 标签：sharepoint, sharepoint-2010, infopath

我正在使用 InfoPath 2010 为 SharePoint 2010 解决方案重新创建一个复杂的表单。表单上有一个跨多个角色的输入/输出过程，每一行都有一个单独的状态下拉菜单。

+作者

+经理

+文字处理

所以基本上每个输入/输出都有 3 个状态，在表格中每一行的末尾。三个选项是

1.  得到正式认可的
2.  进行中
3.  不适用

**有没有一种简单的方法只显示当前步骤的当前状态？我是否需要创建一个单独的状态字段来动态更新每个单独的字段？有没有一种简单的方法可以做到这一点？目前我必须在自定义视图中显示每个字段，我希望避免这种情况，特别是因为并不总是需要每个角色。**提前感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:02:36.537

尝试为您的字段使用规则，这将导致某种级联下拉。

# php - 在php中，我如何搜索目录中的所有文本文件，然后将每一行分解成一个数组

> ID：13642117
> 
> 赞同：-3
> 
> 时间：2012-11-30T09:16:48.930
> 
> 标签：php, directory

> **可能重复：**
> [使用 PHP 获取目录中所有文件的名称](https://stackoverflow.com/questions/2922954/getting-the-names-of-all-files-in-a-directory-with-php)

我正在尝试构建一个东西，我可以扫描目录中的所有 .txt 文件，然后将它们分解成一个数组，分隔符是“|”，然后将它们插入 sql DB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:21:55.877

请用你的价值观试试这个

```
$files_names="";
//path to directory to scan
$directory = "path_to_directory";

//get all text files with a .txt extension.
$files = glob($directory . "*.txt");

//print each file name
foreach($files as $files_names)
{
$files_names."|".=$files_names;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:37:59.597

你可以使用上面的答案，但简化了

```
$file_names = implode('|', glob('*.txt')); 
```

# java - GWT 任意 HTML

> ID：13642122
> 
> 赞同：0
> 
> 时间：2012-11-30T09:17:01.557
> 
> 标签：java, gwt

在 GWT 中，我如何在`onModuleLoad`方法中插入框架集和相关的嵌套框架集和框架以合并许多小程序和其他小部件和 HTML？代码片段为： public class MainEntryPoint implements EntryPoint { public void onModuleLoad() { FrameSetElement frameSet; 文档 documento = Document.get(); frameSet = documento.createFrameSetElement(); frameSet.setCols("2"); frameSet.setRows("2"); //RootPanel.get("s").add(frameSet); 它不运行，网页保持空白！任何人都可以帮助我，我是 GWT 初学者。谢谢莎莎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:40:49.220

您可以从 GWT 的[http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/dom/client/FrameSetElement.html文档开始](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/dom/client/FrameSetElement.html)

如果您发布更详细的问题，其中包含代码片段和错误信息（如果有），将会有所帮助。

# sql - 删除经理位置为美国的员工

> ID：13642136
> 
> 赞同：-4
> 
> 时间：2012-11-30T09:17:56.317
> 
> 标签：sql

如何删除经理在纽约的emp？

员工表

```
empid       name           salary          location
101          john          10000           newyork
102          pavan         25000           newyork
103          laxman        10000           ahmedabad
104          ram           15000           usa
105          arjun         30000           washington
106          gopal         12000           washington 
```

表部门列

```
empid       dept    managerid
101         a        102
102         a
103         a         102
104         b         105
105         b         
106         b         105 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:26:47.417

这将适用于某些 RDBMS，但不是全部，如果您可以告诉我们您正在使用哪个，我们可以提供更完整的解决方案

```
DELETE FROM employee 
 WHERE emp_id IN (SELECT emp_id FROM department 
                    WHERE manager_id IN 
                         (SELECT emp_id FROM employees WHERE location = "newyork")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T09:22:23.603

SQL Server 解决方案

```
delete E
  from Employee M
  join department D on D.managerid = M.empid
  join Employee E on E.empid = D.empid
 where M.location = 'usa'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T09:32:55.343

```
delete from emplyoee where empid in(
select e.empid from emplyoee  e 
left outer join emplyoee   e1 on e.empid=e1.empid
left outer join department d on d.managerid=e1.empid
where e1.location='usa'
) 
```

# c++ - 云计算框架

> ID：13642137
> 
> 赞同：2
> 
> 时间：2012-11-30T09:18:04.053
> 
> 标签：c++, hadoop, cloud, torque

是否有任何框架/库或程序可以解决创建类云环境的问题？假设我们有 m 个计算服务器和 n 个用户。

用户以某种方式连接到管理器，选择问题的参数，单击“计算”，管理器决定哪个服务器空闲，或者创建队列，将参数发送到服务器，然后从服务器获取结果并将它们发送给用户。

我找到了 TORQUE、PBS、Ganglia、Nagios，但乍一看，它们只是按计划运行一些任务，仅此而已，但它们不是交互式的。我可能是错的。

PS OpenStack、Apache CloudStack 或 OpenNebula 是否按照我的描述进行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:12:51.353

回答这个问题的最佳方法是解释您使用的术语和提到的工具。一旦你理解了这些，你会发现你需要定义当输入参数并点击“计算”按钮时你的云将解决的计算问题。

OpenStack、Apache CloudStack 和 OpenNebula 为 IaaS 提供了管理器。在 IaaS 中，分配的计算资源对应于您在数据中心中可以找到的硬件。因此，您可以请求虚拟机、存储卷和网络配置。参见[关于 IaaS 的维基百科](http://en.wikipedia.org/wiki/Infrastructure_as_a_service#Service_models)

这些工具是 CloudOS 的，因为它们提供了一个管理层，将云计算特性带入数据中心。借助云，您可以获得快速弹性、按需自助服务、可衡量的服务、资源池和广泛的网络访问（[NIST 云计算定义](http://csrc.nist.gov/publications/nistpubs/800-145/SP800-145.pdf)）。从本质上讲，像 Apache CloudStack 这样的管理器采用数据中心（资源池），并允许用户请求资源（按需自助服务）。快速处理新发布或释放资源的请求（快速弹性），用户只需为使用中的资源付费（可衡量的服务）。最后，用户通过网络访问资源（广网访问）。

相比之下，TORQUE、PBS、Ganglia、Nagios 库适合管理分配的计算资源。作为系统监视器，Nagios 和 Ganglia 会提供有关使用情况的反馈。基于此，您可能会增加或减少 IaaS 资源分配。TORQUE 和 PBS 允许跨 VM 池执行作业。因此，这些库解决了吞吐量问题，即如何确保最大化分配的资源。

现在让我们转向你的问题。您想在类似云的环境中解决“问题”。这意味着您需要能够按需分配资源的云的灵活性。但是，您还没有解释要解决的问题是什么。将 VM 分配给用户、执行任意一段 python 或执行大型分布式计算是否适合[MapReduce](http://en.wikipedia.org/wiki/MapReduce)之类的问题？

# java - ExecutorService 与任务链关闭

> ID：13642144
> 
> 赞同：2
> 
> 时间：2012-11-30T09:18:26.803
> 
> 标签：java, multithreading, executor

我有一个`ExecutorService`执行任务，它本身向 ExecutorService 提交新任务。

当我打电话时`.shutdown()`，我希望正在运行的任务仍然能够向需要完成的 ExecutorService 提交新任务。但我不希望能够从外部提交新任务到`ExecutorService`.

`ExecutorService`关闭时如何仍然允许任务提交子任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:25:05.590

调用shutdown后，不应该提交任何新任务，这是违反逻辑的。
为内部任务使用不同的执行器服务。或者为自己创建一个执行器（包装或扩展您选择的执行器），它能够检查提交者并根据其状态允许或不允许提交任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T12:57:40.423

看看`ForkJoinPool`，这也是一个`ExecutorService`。在 ForkJoinTasks 中，您可以调用`ForkJoinPool.fork()`而不是标准的`execute()`. 关闭时，仍然允许使用 fork()，而不允许使用 execute()。但是，由于行为上的各种其他差异，`ForkJoinPool`可能不适合手头的任务（多个队列而不是一个，工作窃取等）请查看此处的文档：http: [//docs.oracle.com /javase/7/docs/api/java/util/concurrent/ForkJoinPool.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)

# iphone - Cocoa Touch 中的协议与直接消息

> ID：13642146
> 
> 赞同：0
> 
> 时间：2012-11-30T09:18:35.583
> 
> 标签：iphone, objective-c, cocoa, protocols, public-method

在我的应用程序中，有些地方我必须在其他类中调用一组代码。我通常使用协议来这样做

```
// Teacher.m
@protocol TeacherProtocol
- (void)assignHomeWork;
- (void)respondToAssingment;
@end

for (Student *student in self.studentInClass) {
    [student assignHomeWork];
}

// Student.m <TeacherProtocol>
- (void)assignHomeWork {
    [self receivedAssignmentPaper];
}

// Nerd.m : Student 
- (void)assignHomeWork {
    [super assignHomeWork];
    [self listenWithAttention];
}

// Douchebag.m : Student
- (void)assignHomeWork {
    [super assignHomeWork];
    [self listenToHisIPod];
}

// Blonde.m : Student
- (void)assignHomeWork {
    [super assignHomeWork];
    [self makeUp];
} 
```

在上面的示例中，它没问题并且确实有意义。但是，在某些情况下，该类应该向另一个类发送消息，并且永远不会有任何其他类收到此消息。

```
// Room.m
- (IBAction)mainSwitchWasToggle:(id)sender {
    [self.mainLightBulb toggle];
}

// MainLightBulb.m
- (void)toggle {
    if ([self.bulb isTurnOn]) {
        [self.bulb turnOff];
    } else {
        [self.bulb turnOn];
    }
} 
```

问题是，我应该将**切换**转换为 Room 对象的协议还是将其保留为像这样的公共方法？会不会有其他影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:42:15.300

在这两种情况下，我都不会使用协议。

在第一种情况下，所有子类都是学生类的直接分层子类，因此如果您在学生标头中定义函数，则可以在其所有子类中实现或覆盖它。

如果您打算将函数添加到不是学生类的子对象的对象，我只会将其作为协议。

请参阅协议文档，页面顶部是协议有意义的简短列表：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)

# pdf-generation - 将 refman 文档的一部分创建为 pdf

> ID：13642148
> 
> 赞同：1
> 
> 时间：2012-11-30T09:18:36.613
> 
> 标签：pdf-generation, doxygen

我有一个使用 Doxygen 记录的复杂软件。

我需要创建 HTML 文档的一小部分作为要打印的用户指南。Refman 非常长，包含许多只有开发人员才感兴趣的细节。我只需要其中的一小部分作为 PDF 文件。

我找不到有关如何执行此操作的信息，我感谢有关操作方法的任何提示和有用的讨论！

# ios - 如何保护我的 iOS 应用程序不被破解？

> ID：13642153
> 
> 赞同：4
> 
> 时间：2012-11-30T09:18:41.340
> 
> 标签：ios, jailbreak, cydia, cracking

我有 0.99 美元的 iOS 应用程序，恐怕有人想破解它。如何保护我的应用免受破解？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T09:20:58.437

我实现的小类非常容易： [https ://github.com/itruf/crackify](https://github.com/itruf/crackify)

只需导入 Crackify.h 并检查：

```
BOOL cracked = [Crackify isCracked]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T09:30:10.983

这些是检查您的应用程序是否被破解的清单。

1.  检查 plist 大小
2.  检查签名者身份
3.  检查二进制文件是否加密
4.  根据包的修改日期检查 info.plist 的修改日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:22:31.117

如果它在商店里，它可能已经被破解了。我不会浪费你的时间来打击海盗，到目前为止还没有人能够做到。相反，我建议您专注于构建人们愿意付费的应用程序，或支持 iAd 的免费应用程序。

# php - 安全更改信用额度

> ID：13642160
> 
> 赞同：0
> 
> 时间：2012-11-30T09:19:08.280
> 
> 标签：php, html, mysql, pdo

好的，我有一项基本任务要完成，如果该站点无法上线，我可以完成，但因为它是我希望它是安全的，并且我当前的方法需要更好

我想要的是改变一个用户有多少信用，所以我有另一个词

但我正在使用这个

```
$query = mysql_query("SELECT * FROM UsersList WHERE Credits='$CurrentCredits'"); 
```

然后我会简单地

```
 $db = new PDO('mysql:dbname=;host=', aooza, 'Password');

     $insert = 'INSERT INTO `LIST` (`Credits`) VALUES (:NewCreditCount)';

    $statement = $db->prepare($insert);
    $statement->bindParam(':Credit', $_SESSION['Credit'], PDO::PARAM_STR);
    $statement->execute(); 
```

但是，这当然行不通，因为我的主要问题是它只是在新行上输入新的信用计数，所以没有用户，而且我不知道更好的说法

我如何让它在哪里它改变它为那一行而不是只是在国外

更新代码

```
$Credits = $_SESSION['Credits'];

 $update= 'UPDATE `PingPalooza` SET `Credits` = `Credits` - 1 WHERE `Email` = :Email LIMIT 1';

 $_SESSION['Credits']=$Credits;

 $statement = $db->prepare($update);
 $statement->bindParam(':Credits', $_SESSION['Credits'], PDO::PARAM_STR);
 $statement->bindParam(':Email', $_SESSION['Email']);
 $statement->execute(); 
```

显然这不是你给我的，但我添加了两个可变的东西只是为了尝试让它自己工作 lol lol 总是继续尝试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:27:47.363

使用`UPDATE`查询修改现有行：

```
$update= 'UPDATE `LIST` SET `Credits` = `Credits` - 1 WHERE `UserId` = :UserId LIMIT 1';

$statement = $db->prepare($update);

// you don'e need this line below if you are doing the subtraction in the query (like above)
//$statement->bindParam(':Credit', $_SESSION['Credit'], PDO::PARAM_STR);
$statement->bindParam(':UserId', $_SESSION['UserId']);
$statement->execute(); 
```

假设您的目标 UserId 在`$_SESSION['UserId']`并且您在表中的字段是`UserId`.

# java - JAX-WS、Websphere AS 8.5 和 XML 数字签名

> ID：13642167
> 
> 赞同：1
> 
> 时间：2012-11-30T09:20:06.907
> 
> 标签：java, web-services, xml-parsing, websphere, jax-ws

我正在开发一个 JAX-WS Web 服务，它必须根据 XML 数字签名规范验证传入的 SOAP 消息。我注意到一个奇怪的行为，我可以验证第一条传入的消息，但随后的消息（签名和引用）验证失败。如果我重新启动应用程序服务器（Websphere 8.5），我可以验证第一条消息。似乎应用程序服务器在我解析传入的 SOAP 消息之前对其进行了修改。修改后的 SOAP 消息在逻辑上是等效的 XML 文档，但它们的物理表示不同，并且规范化并不能解决问题。

下面是从 SOAPMessageContext 检索 SOAPMessage 并打印信封的代码。

```
@Override
public boolean handleMessage(SOAPMessageContext messageContext) {

    // get the message from the context 
    SOAPMessage message = messageContext.getMessage(); 

    // is an outgoing message?
    Boolean isOutgoing = (Boolean) messageContext.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

    if(!isOutgoing){
        // incoming message...

        // Retrieve the SOAP part of the incoming message
        SOAPPart soapPart = message.getSOAPPart();

        try {
            System.out.println(soapPart.getEnvelope().toString());
        } catch (SOAPException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        //...omissis...
     }
} 
```

以下是第一条消息的输出：

```
<?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soap:Body>
    <CommandMessage xmlns="http://www.cryptomathic.com/ckms">
        <Commands Count="1">
            <PushServerPublicKeyCommand>
                <SerialNumber>10</SerialNumber>
                <Target>COPS</Target>
                <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
                    <KeyValue>
                        <RSAKeyValue>
                            <Modulus>nnVA6qE9XnEtZPDLrtmWYfyh7nSC6R0543mwWoPFR+JtnRb6kQUXzf8fYaqyUFb3WD+57d1a9OxCzXLW4ilhe+QjrSy7zfqEQWTxkf+ajUuH3q3V/EpWqJvz4zwcxdTOkseap7skMh+zTacmViKAOm2oZAca3HQ2RwSiaYpiOTLAijnvPXieGGxBau8tlfyXZ8c+3TSRBevuiVT9Q5xBph+iT+Kk0Ay1762M3NoPJYAF3zUoaRZ95HqzmE0uuX/fJ4OAju87uvSD7V5uRW5L1LQ6vESIExZ3XmmCc6zOPSIiwBc3z+E6OZiIxoHw068qyNCdNk184X0rtw2ccl3nyQ==</Modulus>
                            <Exponent>AQAB</Exponent>
                        </RSAKeyValue>
                    </KeyValue>
                </KeyInfo>
            </PushServerPublicKeyCommand>
        </Commands>
        <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
            <SignedInfo>
                <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
                <Reference URI="">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                    <DigestValue>XKl5mK5WVr1RU95Zui14kVz4Bpo=</DigestValue>
                </Reference>
            </SignedInfo>
            <SignatureValue>NFakMv6OTJIDJowl2SabGmxSii55OuxLUoJcEIURVZKf4aqoeC03aKSY42agOnUep/Ov7ijF5rLOfrxdDsqT5TCYGaSNEaviR4LnCxFjZ5DJKHCNFuCvRQGTEKgzQFqxh9T7RpvyzuN0dh3WJvhCLMYGGZTmFqSpCpcpEU0pCcKO0U+VlwVGVK8eFrKxKYj+uo/y2p1KLpOl+BfdM/caUZ93CIS7AHgwABhQg0uW5Bg/3nuYnmtpHpoGgco0Ds+LTlUFmvInaCn8TK4tVe3TZB8s4bMnBLY1ztut4xdLL4OPRUyryV+r67H2oFnsfGrQ/GMstdcnYaM8GHm9EycjCg==</SignatureValue>
            <KeyInfo>
                <KeyValue>
                    <RSAKeyValue>
                        <Modulus>nnVA6qE9XnEtZPDLrtmWYfyh7nSC6R0543mwWoPFR+JtnRb6kQUXzf8fYaqyUFb3WD+57d1a9OxCzXLW4ilhe+QjrSy7zfqEQWTxkf+ajUuH3q3V/EpWqJvz4zwcxdTOkseap7skMh+zTacmViKAOm2oZAca3HQ2RwSiaYpiOTLAijnvPXieGGxBau8tlfyXZ8c+3TSRBevuiVT9Q5xBph+iT+Kk0Ay1762M3NoPJYAF3zUoaRZ95HqzmE0uuX/fJ4OAju87uvSD7V5uRW5L1LQ6vESIExZ3XmmCc6zOPSIiwBc3z+E6OZiIxoHw068qyNCdNk184X0rtw2ccl3nyQ==</Modulus>
                        <Exponent>AQAB</Exponent>
                    </RSAKeyValue>
                </KeyValue>
            </KeyInfo>
        </Signature>
    </CommandMessage>
</soap:Body> 
```

这是后续消息的输出：

```
<?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soap:Body>
    <CommandMessage xmlns="http://www.cryptomathic.com/ckms" xmlns:ns2="http://www.w3.org/2000/09/xmldsig#">
        <Commands Count="1">
            <PushServerPublicKeyCommand>
                <SerialNumber>10</SerialNumber>
                <Target>COPS</Target>
                <ns2:KeyInfo>
                    <ns2:KeyValue>
                        <ns2:RSAKeyValue>
                            <ns2:Modulus>nnVA6qE9XnEtZPDLrtmWYfyh7nSC6R0543mwWoPFR+JtnRb6kQUXzf8fYaqyUFb3WD+57d1a9OxCzXLW4ilhe+QjrSy7zfqEQWTxkf+ajUuH3q3V/EpWqJvz4zwcxdTOkseap7skMh+zTacmViKAOm2oZAca3HQ2RwSiaYpiOTLAijnvPXieGGxBau8tlfyXZ8c+3TSRBevuiVT9Q5xBph+iT+Kk0Ay1762M3NoPJYAF3zUoaRZ95HqzmE0uuX/fJ4OAju87uvSD7V5uRW5L1LQ6vESIExZ3XmmCc6zOPSIiwBc3z+E6OZiIxoHw068qyNCdNk184X0rtw2ccl3nyQ==</ns2:Modulus>
                            <ns2:Exponent>AQAB</ns2:Exponent>
                        </ns2:RSAKeyValue>
                    </ns2:KeyValue>
                </ns2:KeyInfo>
            </PushServerPublicKeyCommand>
        </Commands>
        <ns2:Signature>
            <ns2:SignedInfo>
                <ns2:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                <ns2:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
                <ns2:Reference URI="">
                    <ns2:Transforms>
                        <ns2:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
                        <ns2:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </ns2:Transforms>
                    <ns2:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                    <ns2:DigestValue>XKl5mK5WVr1RU95Zui14kVz4Bpo=</ns2:DigestValue>
                </ns2:Reference>
            </ns2:SignedInfo>
            <ns2:SignatureValue>NFakMv6OTJIDJowl2SabGmxSii55OuxLUoJcEIURVZKf4aqoeC03aKSY42agOnUep/Ov7ijF5rLOfrxdDsqT5TCYGaSNEaviR4LnCxFjZ5DJKHCNFuCvRQGTEKgzQFqxh9T7RpvyzuN0dh3WJvhCLMYGGZTmFqSpCpcpEU0pCcKO0U+VlwVGVK8eFrKxKYj+uo/y2p1KLpOl+BfdM/caUZ93CIS7AHgwABhQg0uW5Bg/3nuYnmtpHpoGgco0Ds+LTlUFmvInaCn8TK4tVe3TZB8s4bMnBLY1ztut4xdLL4OPRUyryV+r67H2oFnsfGrQ/GMstdcnYaM8GHm9EycjCg==</ns2:SignatureValue>
            <ns2:KeyInfo>
                <ns2:KeyValue>
                    <ns2:RSAKeyValue>
                        <ns2:Modulus>nnVA6qE9XnEtZPDLrtmWYfyh7nSC6R0543mwWoPFR+JtnRb6kQUXzf8fYaqyUFb3WD+57d1a9OxCzXLW4ilhe+QjrSy7zfqEQWTxkf+ajUuH3q3V/EpWqJvz4zwcxdTOkseap7skMh+zTacmViKAOm2oZAca3HQ2RwSiaYpiOTLAijnvPXieGGxBau8tlfyXZ8c+3TSRBevuiVT9Q5xBph+iT+Kk0Ay1762M3NoPJYAF3zUoaRZ95HqzmE0uuX/fJ4OAju87uvSD7V5uRW5L1LQ6vESIExZ3XmmCc6zOPSIiwBc3z+E6OZiIxoHw068qyNCdNk184X0rtw2ccl3nyQ==</ns2:Modulus>
                        <ns2:Exponent>AQAB</ns2:Exponent>
                    </ns2:RSAKeyValue>
                </ns2:KeyValue>
            </ns2:KeyInfo>
        </ns2:Signature>
    </CommandMessage>
</soap:Body> 
```

我总是使用 SoapUI 发送相同的消息，但正如您所见，消息在逻辑上是等效的，但在物理上是不同的。我怎样才能避免这种行为？

问候，乔瓦尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:20:46.590

IBM 的以下文档中描述了您遇到的问题以及解决方案：

[http://www-01.ibm.com/support/docview.wss?uid=swg1PK95199](http://www-01.ibm.com/support/docview.wss?uid=swg1PK95199)

# codeigniter - Arrowchat 和 Amazon 实例

> ID：13642169
> 
> 赞同：6
> 
> 时间：2012-11-30T09:20:08.873
> 
> 标签：codeigniter, amazon-web-services, chat, amazon

我有一个带有**codeigniter** **mysql**的站点，其中安装了arrowchat。该网站（比如 xyz.com）托管在亚马逊环境中。它具有用于图像上传的**S3**实现、用于静态文件服务的**CDN**实现、 用于 db 的**RDS**实现、用于邮件发送的**SES 。**有计划为该站点集成**Auto Scaling 。**我已经研究了如何在这种情况下实现箭头聊天，因为箭头聊天有模板和配置文件被缓存，因此必须对此进行一些研究以实现实例之间的缓存共享。我试过了

一个）。创建了一个**S3**存储桶并将其映射到 arrowchat 缓存文件夹 - 但它并不顺利，因为 arrowchat 库代码包含缓存目录中的文件，因此在 s3 中我们不能直接在我们的 arrowchat 代码中包含文件。

乙）。创建了一个子域**chat.xyz.com**并在该子域中安装了箭头聊天并在实例中使用它。- 除非通过一些代码修复解决了一些跨域代码问题，否则效果很好。问题是，我们必须在域和子域中管理相同的代码。

请让我知道我列出的方法是否正确。如果没有，请让我知道是否有任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T01:09:51.500

您需要`ElasticCache`在自动缩放组的所有实例之间使用和共享节点池。如果模板需要处理，您不能`amazon S3`直接使用。（特定实例上的 php 代码必须读取模板，对其进行处理并将其发送回）。伪代码：将唯一的 Key 关联到每个模板（即 data/template_name ）。当请求模板时，检查 Memcache 是否有这样的 Key。否则从`S3`缓存中读取并加载它。一旦在缓存中，所有实例都将能够使用该单个值。

# php - 具有自动更新图像的 Jquery-Ajax 自动滑块

> ID：13642170
> 
> 赞同：0
> 
> 时间：2012-11-30T09:20:08.513
> 
> 标签：php, jquery, ajax

我正在使用 jquery、ajax 和 php 来实现一堆滚动图像。它应该是图像的自动滚动器，并且图像列表正在从数据库中加载。我需要在 5 秒内更新滚动条中显示的图像。我使用 jquery 的 jCarousel 滑块实现了它。

但现在我需要在不中断滚动的情况下更新图像。

我的头在发热，我找不到它的逻辑。有任何想法吗？

# ruby-on-rails - Elastic Beanstalk Ruby/Rails 需要安装 git，所以 bundle install 可以工作.. 但不是

> ID：13642171
> 
> 赞同：42
> 
> 时间：2012-11-30T09:20:12.917
> 
> 标签：ruby-on-rails, ruby, amazon-web-services, amazon-ec2, amazon-elastic-beanstalk

我在部署我们的 Rails 应用程序时遇到问题。我创建了一个类似于 AWS 博客 howto [http://ruby.awsblog.com/post/Tx2AK2MFX0QHRIO/Deploying-Ruby-Applications-to-AWS-Elastic-上的示例的钩子Beanstalk-with-Git](http://ruby.awsblog.com/post/Tx2AK2MFX0QHRIO/Deploying-Ruby-Applications-to-AWS-Elastic-Beanstalk-with-Git)像：

```
packages:
  yum:
    git: [] 
```

即使我运行一个捆绑包来创建供应商/缓存以将所有宝石都放在那里......并且仍然得到：git：//github.com/refinery/refinerycms-search.git（在2-0-stable）没有被检查出去。请运行`bundle install`(Bundler::GitError)

任何帮助都会很好，我们试图将我们所有的应用程序转移到 EB。但看到 git 没有安装或发生了什么事。我需要它创建的 EB ec2 实例上的 git。

堆栈跟踪：

```
Error message:
git://github.com/refinery/refinerycms-search.git (at 2-0-stable) is not checked out.         Please run `bundle install` (Bundler::GitError)
Exception class:
PhusionPassenger::UnknownError
Application root:
/var/app/current
Backtrace:
#   File    Line    Location
0   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/source.rb 801 in        `rescue in load_spec_files'
1   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/source.rb 799 in   `load_spec_files'
2   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/source.rb 381 in `local_specs'
3   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/source.rb 774 in `specs'
4   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb 174 in `block in resolve'
5   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb 172 in `each'
6   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb 172 in `resolve' 
7   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb 113 in `specs'
8   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb 158 in `specs_for'
9   /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb 147 in `requested_specs'
10  /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/environment.rb    23  in `requested_specs'
11  /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb    11   in `setup'
12  /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler.rb    116 in `setup'
13  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/utils.rb    326 in `prepare_app_process'
14  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb 156 in `block in initialize_server'
15  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/utils.rb    563 in `report_app_init_status'
16  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb 154 in `initialize_server'
17  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-  1002/support/lib/phusion_passenger/abstract_server.rb    204 in `start_synchronously'
18  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb  180 in `start'
19  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb 129 in `start'
20  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb   253 in `block (2 levels) in spawn_rack_application'
21  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server_collection.rb   132 in `lookup_or_add'
22  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb   246 in `block in spawn_rack_application'
23  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server_collection.rb   82  in `block in synchronize'
24      prelude>    10:in `synchronize'
25  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server_collection.rb   79  in `synchronize'
26  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb   244 in `spawn_rack_application'
27  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb   137 in `spawn_application'
28  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager.rb    16  in `spawn_application_with_env'
29  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb   275 in `handle_spawn_application'
30  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb  357 in `server_main_loop'
31  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb  206 in `start_synchronously'
32  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/helper-scripts/passenger-spawn-server 
```

更新更多信息：我决定使用 ec2-user 登录实例，并注意到安装了 git 到目前为止我可以看到我需要的 gem抱怨..我确实注意到，当我做一个一般的宝石列表时，它不会出现......但它应该使用捆绑包。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-01T07:41:39.270

（请注意，只有在***必须****将 Git 源用于依赖项时才应使用以下解决方法。如果可以避免，建议不要从外部 Git 存储库安装依赖项。有关原因的详细信息，请参见下文。***）**

 **在带有 Passenger 的 Gemfile 中使用 Git 支持的库时，您*必须*在安装中禁用共享 gem（除了在上面列出的挂钩中安装 Git）。您可以通过在现有文件中设置`BUNDLE_DISABLE_SHARED_GEMS`Bundler 环境变量来执行此操作，如下所示：`.ebextensions/ruby.config`

```
option_settings:
  - option_name: BUNDLE_DISABLE_SHARED_GEMS
    value: "1"
  - option_name: BUNDLE_PATH
    value: "vendor/bundle"

packages:
  yum:
    git: [] 
```

禁用共享 gem 将强制所有依赖项按照变量`vendor/bundle`指定的方式供应到您的应用程序中`BUNDLE_PATH`。

请注意，只要有可能，您应该避免在您的应用程序中安装来自 Git 源的公共库。将 Git 用于库位置会给部署安装带来另一个故障点，因为 Git 存储库可能暂时不可用，甚至永久移动。另请记住，在部署中强制安装供应商会导致您的 Elastic Beanstalk 部署在具有相同依赖项的应用程序的后续部署中慢得多。这是因为库将在每次部署时重新安装，而不是利用 Elastic Beanstalk 让 Bundler 默认执行的系统范围安装。

简而言之，如果有相关库的官方 RubyGem 版本，您应该改用该版本；如果没有，您应该向库作者建议提供正式的 RubyGem 版本。

仅供参考，以前曾问过有关此 Git 问题与常规乘客/Rails 部署的类似问题：[Rails 3:Passenger can't find git gems installed by bundler](https://stackoverflow.com/questions/3605235/rails-3-passenger-cant-find-git-gems-installed-by-bundler)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-18T22:11:47.283

另一种选择是将 gem 源直接打包到您的应用程序中，然后将 bundler 指向那里。

将 gem 源复制到 vendor/gems/mygem

然后，在您的 Gemfile 中：

```
gem 'mygem', path: File.join(File.dirname(__FILE__), 'vendor', 'gems', 'mygem') 
```

在此处查看更多信息：http: [//viget.com/extend/bundler-best-practices](http://viget.com/extend/bundler-best-practices)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-01T22:52:08.870

Amazon 的 Elastic Beanstalk Ruby AMI 需要稍作调整，以允许您在不牺牲部署速度的情况下从 git 捆绑 gem，这是您使用 Capistrano 和 Heroku 开箱即用的行为。

幸运的是，Elastic Beanstalk 配置 API 可以进行必要的调整，而无需您维护自定义 AMI。

这是我用来通过 Amazon 自己的 AMI 获得所需的常规 Ruby 部署行为的 Elastic Beanstalk 配置：[https](https://github.com/gkop/elastic-beanstalk-ruby) ://github.com/gkop/elastic-beanstalk-ruby 。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-09-14T16:33:14.283

尝试接受的答案后，我发现更简单`.ebextensions/ruby.config`的配置是唯一有效的配置：

```
packages:
  yum:
    git: [] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-01T05:40:07.070

*   好的，经过大量研究和测试，我认为这与亚马逊在乘客环境值方面存在一些问题有关......
*   我能够手动运行 rails s 然后它工作正常并且所有宝石都加载了..但是如果我运行它并没有发现乘客

    捆绑包--全部

*   *--all*所以它也打包了 git gems..

*   然后它会像魅力一样运行..

*   为了能够在亚马逊使用捆绑包修复此问题的同时运行此问题，我创建了一个钩子并强制它在每次安装后运行。不是最好的方法，但有效。

注意：使用我看不到的钩子在 EB 更新上运行命令，所以我 git 添加了供应商/缓存，默认情况下它会全部上传。**

# r - 将任意格式的字符串转换为 R 中的 dd-mm-yy hh:mm:ss

> ID：13642175
> 
> 赞同：3
> 
> 时间：2012-11-30T09:20:23.317
> 
> 标签：r

我正在从 csv 文件中读取日期值。因此格式会根据 csv 的日期格式而有所不同。如何将任何日期字符串转换为 dd-mm-yyy HH:mm:ss ？

**编辑 ：**

输入格式为：

```
dd/mm/yyyy HH:mm:ss
dd/mm/yyyy
dd-mm-yyyy HH:mm:ss
dd-mm-yyyy 

mm-dd-yyyy HH:mm:ss
mm-dd-yyyy
mm/dd/yyyy

yyyy-mm-dd HH:mm:ss
yyyy-mm-dd 
```

我需要将所有这些格式转换为 dd-mm-yyyy HH:mm:ss

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-07T12:47:06.017

查看其功能的`anytime`包- 并且*不需要格式字符串*：`anytime`

 *```
> inputs <- c("12/07/2017 10:11:12", "12/07/2017", "12-07-2017 10:11:12", 
+             "07-12-2017", "2017-12-07 10:11:12", "2017-12-07")
> library(anytime)
> anytime(inputs)
[1] "2017-12-07 10:11:12 CST" "2017-12-07 00:00:00 CST"
[3] "2017-12-07 10:11:12 CST" "2017-07-12 00:00:00 CDT"
[5] "2017-12-07 10:11:12 CST" "2017-12-07 00:00:00 CST"
> 
```

*但是*，您不能满足*同时*接受dmy 和 mdy 的要求。因此*，您*需要在此处做出选择并提供*明确*的格式。

一般来说，我强烈建议避免歧义并坚持使用 ymd ISO 格式。为了方便顽固的北美习惯，`anytime`也`anydata`接受`m-d-y`订购但很危险。

同样，只有您可以判断`3-4-5`是 4 月 3 日还是 3 月 4 日，并且您需要指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:24:02.300

`as.Date()`将字符串转换为`Date`对象。您需要将其`format`参数调整为 csv 具有的特定格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-07T12:29:14.510

尝试“润滑”包。这里 A_1.csv 有两种格式。

```
Data <-read.csv("Al_1.csv") # import data
str(Data)
a = NULL # create a null object
library(lubridate)
a$Date <- mdy_hm(Data$Date) # store dd/mm/yyyy HH:mm:ss objects here
a$Price <- Data$Price # get respective values(it could by any other column)
b = NULL
b$Date <- mdy(Data$Date)
b$Price <- Data$Price

a <- as.data.frame(a)
b <- as.data.frame(b)

a <- a[is.na(a$Date)==FALSE,] # those with NA had diffrent formats remove it
b <- b[is.na(b$Date)==FALSE,]

b$Date <- as.POSIXlt(b$Date)# change your other format also to UTC

x <- rbind(a,b)
str(x)
x <- ts(x) 
```*

# android - Admob - 无法创建任何广告（admob 向导很糟糕？）

> ID：13642180
> 
> 赞同：0
> 
> 时间：2012-11-30T09:20:44.800
> 
> 标签：android, admob, ads

我正在尝试在 Admob 中创建一些广告，但在最后一步我总是得到错误：

```
There were problems with your submission 
```

但它没有指定 WHERE。我发誓，整个页面没有错误，所有字段都正确填写，字段周围没有红色形状，所有内容都符合字段下的标准，但我仍然收到此错误 - 没有任何解释。有人有同样的经历吗？这完全令人沮丧:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:30:44.397

好的，这是谷歌的错 - 经过 3 小时的尝试，我只是放手，在同一天晚上，我尝试再次保存它（没有任何更改） - 它突然起作用了。我写信给谷歌关于这个谜团，但（再次）没有成功。

但是我必须（再次！）强烈批评谷歌，他们的 admob 向导很糟糕，这不是我遇到的第一个问题。接下来的几天，我的广告遇到了很多问题——他们批准了我的广告，当我复制它（没有更改）时，它被拒绝了。保存2-3次后，通过。喜欢随机行为，或者我不知道它是什么。

**结论：我不明白这么大的公司怎么会在他们的网站、admob、android sdk、他们的文档、他们的支持团队（他们大多不回答）等中出现这种 LAME LAME LAME 错误......谷歌， 醒来！！！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:24:07.963

我在使用最新的 Google Chrome 时遇到了同样的问题……然后我尝试了 FireFox，一切正常。很奇怪 ;-）

# asp.net - 为什么 HiddenField 值与 asp.net 中的旧值连接？

> ID：13642187
> 
> 赞同：0
> 
> 时间：2012-11-30T09:21:21.943
> 
> 标签：asp.net, hidden-field

在服务器端获取隐藏字段值时，我的应用程序突然出现了一些问题。在这个突发事件之前运行的我的代码；

```
<asp:HiddenField ID="hfColumnName" runat="server" /> 
```

在我用来获取和设置其值的代码中，例如；

```
if(hfColumnName.Value == SortDirection.Ascending.ToString())
{
    //have logic to perform.
    hfColumnName.Value = SortDirection.Ascending.ToString();
}
else(hfColumnName.Value == SortDirection.Descending.ToString())
{
    //have logic to perform.
    hfColumnName.Value = SortDirection.Descending.ToString();
} 
```

下次运行此代码时，隐藏字段值包含其旧值和新值的连接值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-06T10:11:46.880

我遇到了同样的问题。根本原因是 html/asp 代码中一些不正确的标签。请确保标签正确。

[http://forums.asp.net/p/1448466/3304601.aspx#3304601](http://forums.asp.net/p/1448466/3304601.aspx#3304601)

# scala - 使用 resetLocalAttrs 时出现奇怪的错误

> ID：13642201
> 
> 赞同：1
> 
> 时间：2012-11-30T09:22:15.687
> 
> 标签：scala, macros, abstract-syntax-tree, scala-2.10, partialfunction

我编写了一个宏，它使用（宏）上下文的 resetLocalAttrs 方法。宏展开后，我收到一个奇怪的错误，我无法弄清楚发生了什么。首先，我将介绍问题。我们有两个原语：*状态*（我将表示为一个简单的 Int）和*动作*。状态代表系统的当前状态，而动作负责修改状态。动作可以是原子的或由原子动作组成。

```
trait Action {
  def andNext(action: PartialFunction[Int, Int => Action]): AndNext = AndNext(this, action)
}
case class ActionId extends Action
case class AndNext(action: Action, and: PartialFunction[Int, Int => Action]) extends Action 
```

从代码中可以看出，*AndNext*接收一个部分函数，​​因为它可以根据当时的当前状态启动一个或另一个动作。组合动作内部的原子动作可能需要序列中前一个原子动作留下的前一个状态，所以我需要用*Int => Action*保护它。

让我们测试代码，使用一个虚拟函数强制测试需要一个*Int => Action*参数：

```
def f(lifted: Int => Action) = ???
f(implicit state => ActionId() andNext { case _ => implicit state => ActionId() }) 
```

没关系，但是我正在研究 DSL，编写所有那些冗余的*隐式状态*太冗长了，必须隐藏它们才能使这段代码适合 DSL 使用。试图达到以下可爱的调用......

```
f(ActionId() andNext { case _ => ActionId() }) 
```

我已经实现了一个宏，它将动作转换为受保护的动作（记住 Int => Action）：

```
implicit def lift[T](expr: T): Int => T = macro liftImpl[T]

def liftImpl[T: c.WeakTypeTag](c: Context)(expr: c.Expr[T]): c.Expr[Int => T] = {
  import c.mirror._
  import c.universe._

  //reify(implicit state => expr.splice)
  reify(implicit state => c.Expr[T](c.resetLocalAttrs(expr.tree)).splice)
} 
```

(*) 注意宏声明中的**隐式**，它转换视图中的方法。

前者（和评论） reify 工作正常，但由于一些限制，我必须使用调用*resetLocalAttrs()*的 reify （你不想知道，这个问题变得太长:)。这个 reify 失败并出现一个奇怪的错误：

```
class Any is abstract; cannot be instantiated 
```

我在哪里尝试实例化 Any？为什么*重置*对 AST 的影响如此之大？我已经使用了很多次，它很好地重置了类型和符号。

找到问题的更好方法是什么？我一直在使用 showRaw 启用*类型*和*ids*标志，这变得相当困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:08:27.837

部分函数会产生合成匿名类，并且匿名类在 typecheck-reset-retypechecking 方面存在已知问题：[https ://issues.scala-lang.org/browse/SI-6187](https://issues.scala-lang.org/browse/SI-6187)

```
17:04 ~/Projects/Kepler_macrosnippet00/sandbox (topic/macrosnippet00)$ scalac -Ymacro-debug-lite Test.scala 
performing macro expansion Macros.lift[ActionId](ActionId.apply()) at source-/Users/xeno_by/Projects/Kepler_macrosnippet00/sandbox/Test.scala,line-11,offset=449
((implicit state) => ActionId.apply())
Function(List(ValDef(Modifiers(IMPLICIT | PARAM), newTermName("state"), TypeTree(), EmptyTree)), Apply(Select(Ident(ActionId), newTermName("apply")), List()))
performing macro expansion Macros.lift[AndNext](ActionId.apply().andNext(({
  @SerialVersionUID(0) final <synthetic> class $anonfun extends scala.runtime.AbstractPartialFunction[Int,Int => Action] with Serializable {
    def <init>(): anonymous class $anonfun = {
      $anonfun.super.<init>();
      ()
    };
    final override def applyOrElse[A1 >: Nothing <: Int, B1 >: Int => Action <: Any](x$1: A1, default: A1 => B1): B1 = (x$1: A1 @unchecked) match {
      case _ => ((implicit state: Int) => ActionId.apply())
    };
    final def isDefinedAt(x$1: Int): Boolean = (x$1: Int @unchecked) match {
      case _ => true
    }
  };
  new anonymous class $anonfun() // an anonymous class created for a partial function
}: PartialFunction[Int,Int => Action]))) at source-/Users/xeno_by/Projects/Kepler_macrosnippet00/sandbox/Test.scala,line-11,offset=421
((implicit state) => ActionId.apply().andNext(({
  final <synthetic> class $anonfun extends scala.runtime.AbstractPartialFunction[Int,Int => Action] with Serializable {
    def <init>() = {
      super.<init>();
      ()
    };
    final override def applyOrElse[A1 <: Int, B1 >: Int => Action](x$1, default) = (x$1: <type ?>) match {
      case _ => ((implicit state: Int) => ActionId.apply())
    };
    final def isDefinedAt(x$1: Int): Boolean = (x$1: Int @unchecked) match {
      case _ => true
    }
  };
  new <type ?>() // <= the problem is here: the type has been irreversibly erased by resetLocalAttrs
}: PartialFunction[Int,Int => Action]))) 
```

# c# - 从保存的 txt 文件更新画布子项

> ID：13642204
> 
> 赞同：0
> 
> 时间：2012-11-30T09:22:30.073
> 
> 标签：c#, wpf, xaml, canvas, updates

我正在尝试从 txt 文件中的 xaml 代码更新画布。我所做的是一个保存功能，可以保存围绕所有内容的画布。

然后我正在尝试创建一个加载函数来打开该 txt 文件并使用该文件中的数据更新画布。

但我的问题是它没有更新现有的画布，而是插入了一个新的画布，所以我有 2 个。

我的问题是如何修复我的加载功能，使其不添加新画布，而只添加保存的画布子项。

现在我的加载功能锁是这样的：

```
 if (userClickedOK == true)
        {
            StreamReader sR = new StreamReader(dlg.FileName);
            string text = sR.ReadToEnd();
            sR.Close();

            StringReader stringReader = new StringReader(text);
            XmlReader xmlReader = XmlReader.Create(stringReader);

            Canvas canvas1 = (Canvas)System.Windows.Markup.XamlReader.Load(xmlReader);

            parentWindow.canvas.Children.Clear(); // clear the existing children
            parentWindow.grid.Children.Add(canvas1); 
```

编辑：新代码：

```
 if (userClickedOK == true)
        {
            StreamReader sR = new StreamReader(dlg.FileName);
            string text = sR.ReadToEnd();
            sR.Close();

            StringReader stringReader = new StringReader(text);
            XmlReader xmlReader = XmlReader.Create(stringReader);

            parentWindow.canvas = (Canvas)System.Windows.Markup.XamlReader.Load(xmlReader);

            parentWindow.grid.Children.Add(parentWindow.canvas);
         } 
```

// 尼弗尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:07:42.287

我相信我确实解决了它。

```
 parentWindow.grid.Children.Remove(parentWindow.canvas);
            parentWindow.canvas = (Canvas)System.Windows.Markup.XamlReader.Load(xmlReader);
            parentWindow.grid.Children.Add(parentWindow.canvas); 
```

有了这个，我只能得到一个 Canvas，但也许这是错误的方法。

# z3 - 在没有 python 的 posix 系统上安装 Z3？

> ID：13642209
> 
> 赞同：4
> 
> 时间：2012-11-30T09:22:42.887
> 
> 标签：z3

是否可以在没有安装 python 的情况下让 Z3 在提供 posix API 的系统上运行？

我已经看到新版本 4.3 已经在构建过程中使用了 python (scripts/mk_make.py)。像 4.1 这样的旧版本呢？可以想象让它在没有 python 的情况下在 posix 上运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:54:02.040

Python 在您的系统中不可用吗？

Python 一直用于自动生成 Z3 代码库的某些部分。在第一个源代码版本中，我们已经包含了自动生成的代码。实际上，当时我们正在使用 python + sed + awk + ​​grep 的组合来生成这部分代码。第一个版本的另一个问题是 Windows (+ Visual Studio) 的构建系统与其他平台的构建系统完全不同。Linux 和 OSX 的 Makefile 源自 Visual Studio 项目文件。一些用户还开始报告 Linux 和 OSX 的构建系统存在问题。因此，为了减少这些问题并拥有统一的构建系统，我们决定使用 python（和仅 python）来：

*   自动生成代码（用于不同语言的绑定、API 日志支持等）
*   检查系统的要求
*   生成 Makefile
*   以及任何其他形式的自动化

Python 对我们来说非常有吸引力，因为它适用于大多数系统（甚至是不符合 posix 的系统）。我们可以轻松编写可移植脚本。而且，我们进行切换后，我们可以在更多平台上编译Z3。我们在 Windows、Linux（Mint、Ubuntu、Suse 等）、OSX、Cygwin 和 FreeBSD 上成功编译了它。在“不稳定”（又名正在工作的）分支中，我们甚至不再需要 autoconf，我们使用 python 来进行所有系统特定的配置。要构建 Z3，我们只需要：python、C++ 编译器（Visual Studio C++、g++ 或 clang++）、ar（在非 Windows 平台上）、make（或 nmake）。这是非常小的一组要求。默认情况下，Python 在大多数平台上都可用。

话虽如此，是否可以删除 python 要求？是的，它是，但它必须用其他东西替换 python。可以让我们执行上述所有任务的东西。`scripts`查看[http://z3.codeplex.com/SourceControl/changeset/view/0c1f2a82818a](http://z3.codeplex.com/SourceControl/changeset/view/0c1f2a82818a)的目录，我们必须将所有这些自动化脚本移植到可以在我们支持的所有平台上使用的东西。

# delphi - HWND 在 ShellExecute 中做了什么？

> ID：13642211
> 
> 赞同：6
> 
> 时间：2012-11-30T09:22:51.623
> 
> 标签：delphi

我`ShellExecute`用来做某事，第一个参数是`HWND` ，MSDN 上的[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)说：

> 用于显示 UI 或错误消息的父窗口的句柄。如果操作与窗口无关，则此值可以为 NULL。

但我发现无论哪个`HWND`值都会得到相同的结果。

例如 ：

`ShellExecute(0, 'open', 'c:\', nil, nil, SW_SHOWNORMAL);`

`ShellExecute(Self.Handle, 'open', 'c:\', nil, nil, SW_SHOWNORMAL);`

`ShellExecute(123456, 'open', 'c:\', nil, nil, SW_SHOWNORMAL);`

只是得到相同的东西（打开磁盘 C），所以我想知道使用 different 有什么用`HWND`？

顺便说一句，当'HWND = 0'时使用DeskTop的句柄？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T09:31:49.990

它`HWND`用作调用`ShellExecute`. 例如，任何错误消息对话框都将归该窗口所有。

[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#owned_windows)中描述了被拥有的窗口的含义。关键摘录：

> 拥有对一个窗口有几个限制。
> 
> *   在 z 顺序中，拥有的窗口始终位于其所有者之上。
> *   当所有者被销毁时，系统会自动销毁拥有的窗口。
> *   拥有的窗口在其所有者最小化时被隐藏。

重要的是第一个。如果您`ShellExecute`从 GUI 应用程序调用，那么您希望任何窗口都归您应用程序中当前处于活动状态的窗口所有。所以通过`MyForm.Handle`。

如果您的应用程序中没有 GUI，则传递 0。

在代码示例中，调用`ShellExecute`根本没有显示任何 UI。所以你通过什么没有什么区别。但是，如果您的调用导致显示错误对话框，那么您传递的窗口句柄将变得相关。

# ruby-on-rails - 同一个类的两个基于 foreign_key 的 has_many 关联——如何在单个方法调用中返回两个关联的结果？

> ID：13642213
> 
> 赞同：0
> 
> 时间：2012-11-30T09:22:55.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在构建一个小型应用程序，用户可以在其中发送和接收消息。每条消息都有一个`sender_id`和一个`recipient_id`（都包含用户ID）

```
# Relevant lines of User model

has_many :sent_messages, :class_name => 'Message', :foreign_key => 'sender_id'
has_many :received_messages, :class_name => 'Message', :foreign_key => 'recipient_id' 
```

我可以在我的用户模型中做什么来允许我调用`@user.all_messages`，并返回该用户发送和接收的消息？

（我使用的是 Rails 3.2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:29:42.860

```
def all_messages
   sent_messages + received_messages
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:39:45.243

`has_many`用关联是不可能的。我会这样做：

```
def all_messages
  Message.where("sender_id = ? OR recipient_id = ?", self.id, self.id)
end 
```

这样，您仍然可以将其他过滤器附加到它。

# json - wcf以JSON格式发送soap消息

> ID：13642216
> 
> 赞同：1
> 
> 时间：2012-11-30T09:23:11.770
> 
> 标签：json, wcf, soap

我对.NET技术真的很陌生。我必须实现的是一个基于soap但以JSON格式发送消息的wcf服务。我已经搜索教程好几天了，但仍然可以让它工作。你能指出我到一些有用的教程或告诉我应该注意哪些细节？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:38:18.003

使用这些链接..它会帮助你。

[wcf 视频](http://beyondrelational.com/modules/2/blogs/79/posts/11541/wcf-free-training-videos.aspx)

# python - MongoDb速度下降

> ID：13642217
> 
> 赞同：2
> 
> 时间：2012-11-30T09:23:13.020
> 
> 标签：python, mongodb, nosql

我使用 mongodb 来存储压缩的 html 文件。基本上，一个完整的 mongod 文档是这样的：

```
{'_id': 1, 'p1': data, 'p2': data2, 'p3': data3} 
```

其中数据，数据1，数据3是：`bson.binary.Binary(zlib_compressed_html)`

我有 1200 万个 id，dataX 每个平均 90KB，所以每个文档至少有 size `180KB + sizeof(_id) + some_overhead`。

总数据大小至少为 2TB。

我想注意的`'_id'`是索引。

我通过以下方式插入 mongo：

```
def _save(self, mongo_col, my_id, page, html):
    doc = mongo_col.find_one({'_id': my_id})
    key = 'p%d' % page
    success = False
    if doc is None:
        doc = {'_id': my_id, key: html}
        try:
            mongo_col.save(doc, safe=True)
            success = True
        except:
            log.exception('Exception saving to mongodb')
    else:
        try:
            mongo_col.update({'_id': my_id}, {'$set': {key: html}})
            success = True
        except:
            log.exception('Exception updating  mongodb')
    return success 
```

正如您首先看到的，我查找集合以查看是否存在带有 my_id 的文档。

如果它不存在，那么我创建它并将其保存到 mongo 否则我更新它。

上面的问题是，虽然它非常快，但在某些时候它变得非常慢。

我会给你一些数字：

当它很快时，我每 4 小时做 1.500.000，然后每 4 小时做 300.000。

我怀疑这会影响速度：

笔记

当执行将文档大小增加到超出为该文档分配的空间的更新操作时，更新操作会在磁盘上重新定位文档，并可能根据更新类型对文档字段重新排序。

`As of these driver versions, all write operations will issue a getLastError command to confirm the result of the write operation: { getLastError: 1 } Refer to the documentation on write concern in the Write Operations document for more information.`

以上来自：[http ://docs.mongodb.org/manual/applications/update/](http://docs.mongodb.org/manual/applications/update/)

我这么说是因为我们可以有以下内容：

`{'_id: 1, 'p1': some_data}, ...., {'_id': 10000000, 'p2': some_data2}, ...{'_id': N, 'p1': sd3}`

并想象我将上述 _save 方法称为：

`_save(my_collection, 1, 2, bin_compressed_html)`

然后它应该使用 _id 1 更新文档。但是，如果 mongo 站点是这种情况，因为我正在向文档添加一个密钥，它不适合并且应该重新排列文档。

可以在集合末尾移动文档，这可能在磁盘上很远。这能减慢速度吗？

还是速度变慢与集合的大小有关？

无论如何，您认为将我的结构修改为如下方式应该更有效：

`{'_id': ObjectId, 'mid': 1, 'p': 1, 'd': html}`

其中mid=my_id, p=page, d=compressed html

并修改 _save 方法只做插入？

```
def _save(self, mongo_col, my_id, page, html):
    doc = {'mid': my_id, 'p': page, 'd': html}
    success = False
    try:
        mongo_col.save(doc, safe=True)
        success = True
    except:
        log.exception('Exception saving to mongodb')
    return success 
```

这样我就避免了更新（所以在磁盘上重新排列）和一次查找（find_one），但是文档将是 3x mores，我将有 2 个索引（ _id 和 mid ）。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:33:54.797

When inserting new Documents into MongoDB, a Document can grow without moving it up to a certain point. Because the DB is analyzing the incoming Data and adds a padding to the Document. So do deal with less Document movements you can do two things:

1.  manually tweaking the padding factor

2.  preallocate space (attributes) for each document.

See [Article about Padding](http://tebros.com/2010/11/mongodb-paddingfactor-implications/) or [MongoDB Docs](http://www.mongodb.org/display/DOCS/Padding+Factor) for more Information about the padding factor.

Btw. insetad of using save for creating new documents, you should use .insert() which will throw a duplicate key error if the _id is already there (.save() will overwrite your document)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:47:13.320

如果您继续将 html 页面添加为新属性，则文档重定位可能会成为问题。将页面移动到一个新集合中，您可以简单地为它们每个添加一条记录，这真的是一个问题吗？此外，我真的不认为 MongoDB 非常适合您的用例。例如， [Redis](http://redis.io/)会更有效率。您应该注意的另一件事是为您的 _id 索引[提供足够的内存](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage)。使用 db.mongocol.stats() 检查索引大小。

# phpstorm - phpstorm move语句向上向下配置

> ID：13642218
> 
> 赞同：0
> 
> 时间：2012-11-30T09:23:16.103
> 
> 标签：phpstorm

我在 Mac 上使用 php Storm。要向上或向下移动选择（向上/向下移动语句），快捷方式是 cmd + 向上/向下。

如果您多次按此快捷方式，那很好。

但有时您只想按住快捷方式并查看选择向上或向下。（它使您免于多次键入快捷方式）。

我发现的问题是，在这种情况下，您按住快捷方式：在您按下快捷方式的那一刻和 phpstorm 明白您想要“按住快捷方式”操作的那一刻之间有太多的时间。

请问这个时间有自定义设置吗？我没找到。

# java - 如何在休眠中提交批量插入？

> ID：13642219
> 
> 赞同：5
> 
> 时间：2012-11-30T09:23:22.213
> 
> 标签：java, hibernate, commit, flush, batch-insert

我必须使用休眠将大量对象保存到数据库中。我不想一次提交所有这些，而是​​想在会话中存在 n (BATCH_SIZE) 对象时立即提交。

```
Session session = getSession();
session.setCacheMode(CacheMode.IGNORE);
for(int i=0;i<objects.length;i++){
    session.save(objects[i]);
    if( (i+1) % BATCH_SIZE == 0){
        session.flush();
        session.clear();
    }
} 
```

我会尝试类似上面的方法，但我读到它`session.flush()`不会将更改提交到数据库。这是以下代码的正确方法吗？

```
Session session = getSession();
session.setFlushMode(FlushMode.COMMIT);
session.setCacheMode(CacheMode.IGNORE);
session.beginTransaction();
for(int i=0;i<objects.length;i++){
    session.save(objects[i]);
    if( (i+1) % BATCH_SIZE == 0){
        session.getTransaction().commit();
        session.clear();
        //should I begin a new transaction for next batch of objects?
        session.beginTransaction();
    }
}
session.getTransaction().commit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T21:07:14.043

据我所知，您的解决方案是正确的。

可能只有一个问题：根据您从 SessionFactory 获取会话的方式，提交也可能会关闭您的会话，您将不得不打开一个新会话。据我所知，如果您使用 getCurrentSession() 和会话上下文“线程”，这总是会发生。如果您使用的是 openSession() 会话似乎不会被提交自动关闭。

提交事务后，您可以使用 isOpen() 方法轻松检查这一点。如果会话关闭，您必须在进一步调用 save() 之前打开一个新会话。

# windows-phone-7 - 列表项对第二次单击事件无响应

> ID：13642226
> 
> 赞同：3
> 
> 时间：2012-11-30T09:24:08.257
> 
> 标签：windows-phone-7, xaml, event-handling, listbox

在我的 Windows Phone 7 应用程序中，我有许多列表视图。每个 listViewItem 都有一个单击事件（通过在我的 xaml 中将“selectionChanged”属性设置为 listBox）。现在发生了一件非常奇怪的事情：

当我第一次点击列表框中的一个项目时，一切顺利，在这种情况下，用户会被带到另一个屏幕。当我从该屏幕返回到列表框时，我选择了相同的列表框项，但这次事件没有注册，没有任何反应......

然后我首先必须点击另一个项目，让那些甚至开火，然后我只能点击第一个项目。所以换句话说，我不能连续两次触发 listItem 的单击事件。我认为这是因为列表框上的事件处理程序显示“onSelectionChanged”，如果您选择相同的项目，则选择在技术上没有改变。

那么我可以在列表框上使用哪些其他 eventHandling 属性来注册其项目上的选择事件？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:42:57.957

AFAIK，没有这样的事件。所以，解决方法是，

在第一页的 OnNavigatedTo 事件处理程序中，将 SelectedIndex 设置为 -1

```
YourListBox.SelectedIndex = -1; 
```

在这样做的同时，对您的 Selection_Changed 处理程序进行一个小的修改

```
void Selection_Changed(...)
{
   if(YourListBox.SelectedIndex == -1)
    return;
   //rest of your code
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:39:11.930

在您的情况下， ListBox 中的 SelectedItem 是第一次设置。第二次点击同一个项目时，从技术上讲，它不是一个 SelectionChanged 事件，因此它不会触发。

在 SelectionChanged 事件结束时清除 SelectedItem 就可以了。
下面是一个可能有用的代码片段，

```
private void ListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    //
    // do your stuff here
    //

    //reset the selection of the sender (ListBox)
    (sender as ListBox).SelectedItem = null;
} 
```

# android - 安卓滚动

> ID：13642232
> 
> 赞同：0
> 
> 时间：2012-11-30T09:24:28.753
> 
> 标签：android

每个人都知道魔方是如何工作的。
是否有可能在 android 中做这样的事情：我有 5 对 5 个方形按钮。是否可以将它们旋转为魔方（2D）？如果我有这样的事情：

```
<ScrollView android:id="@+id/scrollView1"
            android:layout_width="fill_parent" android:layout_height="fill_parent"
            xmlns:android="http://schemas.android.com/apk/res/android">
    <LinearLayout android:id="@+id/linearLayout1"
                  android:layout_width="match_parent" android:layout_height="match_parent"
                  android:orientation="vertical">
        <HorizontalScrollView android:id="@+id/horizontalScrollView1"
                              android:layout_width="wrap_content" android:layout_height="wrap_content">
            <LinearLayout android:id="@+id/linearLayout2"
                          android:layout_width="match_parent" android:layout_height="match_parent"
                          android:orientation="horizontal">

            </LinearLayout>
        </HorizontalScrollView>
    </LinearLayout>
 </ScrollView> 
```

可以垂直或水平滚动线条。但我想水平滚动对象，垂直滚动对象。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:39:23.433

不，它不会那样工作。滚动滚动在 Android 上效果不佳。为了做类似的事情，我建议你制作自己的类型`ScrollView`来查看滚动方向并根据输入滚动或不滚动。

# date - 如何从 ExtJS JSonStore 访问日期类型字段？

> ID：13642234
> 
> 赞同：2
> 
> 时间：2012-11-30T09:24:35.883
> 
> 标签：date, types, extjs4, field, jsonstore

我一直在尝试使用以下代码从数据库中检索日期值和整数值：

```
var l_alsChampsMois, l_stoDonneesMois;

    try {
        l_alsChampsMois = [
          {name: "date_mois", type: "date", dateFormat: "Y-m-d"},
          {name: "indice", type: "integer"}
        ];

        l_stoDonneesMois = new Ext.data.JsonStore({
            fields: l_alsChampsMois,
            autoLoad: false,
            proxy: {
                type: "ajax",
                url: "/commun/req_sql/req_ind_per_mois.php",
                reader: {
                    type: "json",
                    root: "rows"
                },
                // some configs to use jsFiddle echo service (you will remove them)
                actionMethods: {
                    read: "POST"
                },
               extraParams: {
                    key:"test"
                }
            },
            listeners: {
                load: function(objStore, alsLignes, blnOk, objOptions) {
window.alert("Mois fin : " + objStore.getAt(0).get("date_mois"));
                }
            }
        });

    l_stoDonneesMois.load({params:            {
                                p_idsoc:    l_strIdSociete,
                                p_mois:        l_datDebut.getMonth() + 1,   
                                // getMonth renvoie 0 pour janvier, etc. 
                                p_annee:    l_datDebut.getFullYear(),
                                p_debut:    1,
                                p_etape:    1
                                } 
                            }); 
```

其中 l_strIdSociete 和 l_datDebut 是先前分配的变量，而 /commun/req_sql/req_ind_per_mois.php 是检索数据并将其转换为 JSON 的 PHP 页面。

它似乎工作正常（实际上，Firebug 告诉我负载确实检索了包含我期望它们的值的“date_mois”和“indice”的数据结构），只有 window.alert 返回未定义。如果我用“indice”替换“date_mois”，它会返回“indice”的预期值。

我尝试使用 objStore.getAt(0).getData()["date_mois"]，但无济于事。

我对此的唯一线索是Firebug显示的数据结构中的“date_mois”是一个对象，但即便如此它也不应该是未定义的，现在应该吗？我查了[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-type](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-type)并没有直接给出答案。

那么我在那里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:46:01.990

如果需要当前时间可以使用php**时间**函数（注意：它返回秒，JS使用毫秒），另一种情况需要通过**mktime**函数转换。

# java - JAVA GC 主要 GC 与次要 GC

> ID：13642241
> 
> 赞同：3
> 
> 时间：2012-11-30T09:25:06.433
> 
> 标签：java, garbage-collection

在我们对延迟敏感的应用程序中，我们有缓存数据（驻留在 TG 中）和在 YG 中消失的短期对象。我已经看到次要 GC 时间和主要 GC 时间存在显着差异。我怀疑这与相对较大的TG有关。 *谁能解释 GC 时间与 TG 大小的关系*。Minor GC 非常频繁且快速。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:38:48.473

在 YG 中的次要收集中幸存下来的对象被移动到 TG/Old 代以释放 YG 中的空间。**YG 的大小保持较小，以确保次要收集不会花费太多时间并且可以更频繁地运行**。并且在这些仍然有引用的次要 GC 对象被移动到 TG。

**所以 TG 尺寸更大，因为通常在 YG 清理中幸存下来的较大对象会移动到该段**。TG 中的清理也不会很频繁地运行，因此它可以分配更大的内存。

因此，次要 GC 会清理 YG 中的对象，但主要 GC 会清理 YG 和 TG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:35:28.130

要点是 GC 时间不是由 TG 大小决定的，而是由其中的对象数量决定的。对性能敏感的应用程序不应使用堆进行缓存。有大量支持堆外缓存的现有缓存库。

# java - 使用 Selenium 测试 Javascript

> ID：13642243
> 
> 赞同：0
> 
> 时间：2012-11-30T09:25:10.813
> 
> 标签：java, testing, selenium, web, web-testing

我正在尝试测试一个网站。我能够访问大多数网络元素，除了菜单项。

基本上有一个下拉菜单，我设法使用 Selenium 单击菜单，从而打开下拉菜单。现在我需要单击菜单中的一个元素，但菜单似乎是用 Javascript 编写的，而不是 Web 元素，所以我找不到访问菜单项的方法。

有任何想法吗？我特别需要在 Selenium 中执行此操作。

更新： - - - - - - - - - - - - - - - - - - - - - - - - -------------------------------------- 网站上的菜单可能是上下文菜单。它是使用左键单击打开的。有什么想法可以访问它的选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:32:24.140

菜单可以使用页面的 javascript 构建和操作，但它将以 html 的形式存在。您可以使用 Selenium 与此 html 进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:02:00.393

```
 WebElement dropDownListBox = driver.findElement(By.id("Menu_id")); 
                  Select clickThis = new Select(dropDownListBox);                
                  clickThis.selectByVisibleText(activity); //If you know visible text
                //clickThis.getFirstSelectedOption();  // This will auto select first option in the drop down                
               // clickThis.selectByValue(1); //if you the value of drop down list items 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:24:22.210

打开上下文菜单并不容易。到目前为止，我正在通过执行 javascript 来触发鼠标事件（没有找到其他解决方案）。这与该讨论类似： [触发右键单击](https://stackoverflow.com/questions/6250447/trigger-right-click) 或 [Selenium 2 右键单击](https://stackoverflow.com/questions/8007153/selenium-2-right-click?rq=1)

有时它很有用，如果你只是触发底层的 js 函数。大多数时候，开发人员可以给你一个入口点来调用。这将使您有可能继续构建您的测试，并且在一段时间后您实现了通过触发事件打开上下文菜单的 javascript 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:32:18.753

除了通过单击菜单并使用向上和向下箭头在 selenium 中滚动浏览项目之外，我还没有设法使用 Selenium 访问菜单项。

我使用 OpenScript 来记录/回放测试，它已经奏效了。在我的特殊情况下，我使用的网站需要设置一个标志以使其可测试。如果您在测试网站时遇到问题，您可能需要联系开发人员并询问是否设置了“自动化”标志。

# yii - 在 yii 中如何创建确认链接

> ID：13642267
> 
> 赞同：-1
> 
> 时间：2012-11-30T09:26:25.890
> 
> 标签：yii, confirmation

在 yii 中，我正在创建一个项目。我想在 yii 中创建链接，这样它将通过电子邮件发送给用户，当用户单击链接时，`actionCheck`将调用该用户的 ID。并且密码重置页面将呈现给他以插入新密码。我还想传递与链接一起生成的确认随机密钥，以便我可以检索该用户的 ID，那么如何创建此链接？我将它生成为-

```
$url='http://localhost/Project/index.php?r=User/Check&key=$key' 
```

哪里`$key`是随机生成的。当我将此链接传递给电子邮件并单击它时，它会出现错误，因为-

`"Error 403 You are not authorized to perform this action."`

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:59:13.090

在您的用户控制器中，您可以看到

```
public function accessRules()
    { ... } 
```

添加你的`actionCheck()`那里，适当的访问规则类似于下面

```
array('allow',  
'actions'=>array('action1','action2',..............,'check'),
'users'=>array('*'),
), 
```

# python - 从python的脚本调用时vi中没有颜色

> ID：13642270
> 
> 赞同：7
> 
> 时间：2012-11-30T09:26:30.820
> 
> 标签：python, vim, vi

当我使用 vi 编辑文件时：

```
vi .bashrc 
```

我有颜色。

在 python 的脚本中，我有：

```
os.system("vi .bashrc") 
```

我不。

为什么（我猜我打开了一个不同的外壳，但我不知道为什么设置不同）？以及如何解决这个问题？

我正在运行 fedora，我的 shell 是 bash。

```
vi --version 
```

给出：

```
VIM - Vi IMproved 7.3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:47:36.260

我想这是因为你有 vim 的别名，所以`vi .bashrc`从 bash 调用意味着`vim .bashrc`

`os.system`没有关于您的别名的信息，因此它调用`vi`没有颜色突出显示的编辑器

# objective-c - iOS：警告：尝试呈现 在 进行演示时

> ID：13642272
> 
> 赞同：14
> 
> 时间：2012-11-30T09:26:35.057
> 
> 标签：objective-c, ios

从图像选择器中选择图像后，我正在尝试创建模态视图控制器。我使用代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

   NSLog(@"Picker has returned");
   [self dismissModalViewControllerAnimated:YES];

   // TODO: make this all threaded?
   // crop the image to the bounds provided
   img = [info objectForKey:UIImagePickerControllerOriginalImage];
   NSLog(@"orig image size: %@", [[NSValue valueWithCGSize:img.size] description]);

   // save the image, only if it's a newly taken image:
   if([picker sourceType] == UIImagePickerControllerSourceTypeCamera){
      UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil);
   }

   // self.image_View.image=img;
   //self.image_View.contentMode = UIViewContentModeScaleAspectFit;

   ModalViewController *sampleView = [[ModalViewController alloc] init];
   [self presentModalViewController:sampleView animated:YES];
} 
```

但是，我收到警告：

```
Warning: Attempt to present <ModalViewController: 0x7561600> on <ViewController: 0x75a72e0> while a presentation is in progress! 
```

并且没有出现模态视图。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-30T09:34:49.727

```
- (void)imagePickerController:(UIImagePickerController *)picker 
didFinishPickingMediaWithInfo:(NSDictionary *)info {

     // TODO: make this all threaded?
     // crop the image to the bounds provided
     img = [info objectForKey:UIImagePickerControllerOriginalImage];
     NSLog(@"orig image size: %@", [[NSValue valueWithCGSize:img.size] description]);

     // save the image, only if it's a newly taken image:
     if ([picker sourceType] == UIImagePickerControllerSourceTypeCamera) {
         UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil);
     }

     // self.image_View.image = img;
     // self.image_View.contentMode = UIViewContentModeScaleAspectFit;

    NSLog(@"Picker has returned");
    [self dismissViewControllerAnimated:YES
                             completion:^{
                                ModalViewController *sampleView = [[ModalViewController alloc] init];
                                [self presentModalViewController:sampleView animated:YES];
                             }];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T09:32:20.800

这里发生了问题，因为您首先关闭了`UIImagePicker`，然后立即将另一个视图显示为模态视图。这就是您收到此错误的原因。

检查以下代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

 [self dismissViewControllerAnimated:NO completion:^{

     img = [info objectForKey:UIImagePickerControllerOriginalImage];
     NSLog(@"orig image size: %@", [[NSValue valueWithCGSize:img.size] description]);

     if([picker sourceType] == UIImagePickerControllerSourceTypeCamera)
     {
         UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil);
     }

     ModalViewController *sampleView = [[ModalViewController alloc] init];
    [self presentModalViewController:sampleView animated:YES];
  }];
} 
```

# zend-framework2 - 控制器中的zend framework 2基本路径访问

> ID：13642275
> 
> 赞同：4
> 
> 时间：2012-11-30T09:26:43.920
> 
> 标签：zend-framework2

我如何在 ZF 2 的控制器中调用 basePath 助手。我必须重定向到我需要基本路径的特定 url。return $this->redirect()->toUrl($basePath.'/application/rent/search');

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T18:17:35.230

这是使所有视图助手在控制器中可用的[简单方法。](https://stackoverflow.com/a/13644702/94289)因此，您应该能够使用以下内容：

```
public function someAction()
{
    $renderer = $this->serviceLocator->get('Zend\View\Renderer\RendererInterface');
    $url = $renderer->basePath('/application/rent/search');
    $redirect = $this->plugin('redirect');
    return $redirect->toUrl($url);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T17:53:53.090

完整的基本 url (http://...) 可以从控制器中确定，如下所示：

```
$event = $this->getEvent();
$request = $event->getRequest();
$router = $event->getRouter();
$uri = $router->getRequestUri();
$baseUrl = sprintf('%s://%s%s', $uri->getScheme(), $uri->getHost(), $request->getBaseUrl()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-17T23:04:42.293

尝试

```
class XxxController extends AbstractActionController
{

...

public function basePath()
{
    $basePath = $this->serviceLocator
        ->get('viewhelpermanager')
        ->get('basePath');
    return $basePath();
} 
```

在

或者

```
public function algoAction()
{
    echo $this->getRequest()->getBaseUrl();
} 
```

[http://project.com/profile](http://project.com/profile)

返回“”

[http://localhost/~limonazzo/public/profile](http://localhost/~limonazzo/public/profile)

返回 /~limonazzo/public/

# git - 不允许 Git 推送：如何解决此冲突？

> ID：13642277
> 
> 赞同：1
> 
> 时间：2012-11-30T09:26:48.463
> 
> 标签：git

```
45825ae 112 min ago Mike     fix bug        master(Blue's conflicted copy 2012-11-30)   
1ba982c 2 hours ago Mike     update doc

3fbc637 4 hours ago Mike     fix ui bug     master  
193b99e 5 hours ago Mike     fix model bug 
```

以上是我的 git repo 的简短日志。从我的项目运行 git status 显示：

```
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
nothing to commit (working directory clean) 
```

如果我运行推送，它会给我：

```
 http://localhost/myproject.git: push not permitted 
```

有任何想法吗？

编辑：当我尝试再次克隆我的项目时，它给了我：

```
fatal: Reference has invalid format: 'refs/heas/master(Blue's conflicted copy 2012-11:30)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:39:53.947

也许您使用了错误的 URL 来推送？通常您推送到 ssh URL，而 http 仅用于拉取。

如果要推送到 HTTP，则需要运行 git-http-backend，启用 http.receivepack 或使用身份验证，否则后端将拒绝推送。有关更多详细信息，请参见[手册页](https://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html)。

# google-apps-script - 正在运行的 Google Apps 脚本能否确定自己的资源 ID？

> ID：13642281
> 
> 赞同：0
> 
> 时间：2012-11-30T09:27:16.617
> 
> 标签：google-apps-script

Google Apps 脚本能否确定自己的资源 ID？如果可以，那么它可以发现它在（父母）中的哪些文件夹。

如果它只在一个文件夹中，那么它可以将该文件夹用作用于各种目的的默认文件夹。

如果它位于多个文件夹中，则资源 id 不足以真正识别脚本的启动位置，因此推论的问题是谷歌应用程序脚本能否确定启动它的文件夹的资源 id？

似乎这些将是有用的补充，也许是课堂会议，如果它不存在于我错过的某个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:52:29.700

据我所知，Google Apps 脚本中没有选项可以获取自己的资源 ID。[您应该在 Google Apps Script Issue tracker](http://code.google.com/p/google-apps-script-issues/issues/list)中提交功能请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T16:19:08.567

对于电子表格，我发现这是可行的：

`var thisFileId = SpreadsheetApp.getActive().getId();`

`var thisFile = DocsList.getFileById(thisfileId);`

# c++ - 递归：理解（子集和）包含/排除模式

> ID：13642283
> 
> 赞同：0
> 
> 时间：2012-11-30T09:27:19.190
> 
> 标签：c++, recursion, subset-sum

我需要了解这种递归是如何工作的，我了解简单的递归示例，但更高级的递归示例很难。甚至认为只有两行代码我遇到了问题……`return`语句本身。我只是对它的工作原理持空白，尤其是 and/or 运算符。任何见解都非常受欢迎。

```
 bool subsetSumExists(Set<int> & set, int target) {
      if (set.isEmpty()) {
         return target == 0;
      } else {
         int element = set.first();
         Set<int> rest = set - element;
         return subsetSumExists(rest, target)
             || subsetSumExists(rest, target - element);
         } 
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:52:08.887

递归代码通常与归约的概念相结合。一般来说，归约是一种通过某种变换将未知问题归结为已知问题的方法。

让我们看一下您的代码。您需要确定是否可以从输入数据集的元素构造给定的目标总和。如果数据集为空，则除了将目标总和与 0 进行比较外，别无他法。

否则，让我们应用减少。如果我们从集合中选择一个数字，实际上可能有 2 种可能性 - 选择的数字参与您正在寻求的总和或不参与。这里没有其他可能性（涵盖所有可能性非常重要！）。事实上，选择哪个数据元素并不重要，只要您能涵盖剩余数据的所有可能性即可。

*第一种情况*：数字不参与求和。我们可以将问题减少到一个较小的问题，数据集没有被检查的元素和相同的目标总和。

*第二种情况*：数字参与求和。我们可以将问题减少到一个较小的问题，数据集没有被检查的元素，并且请求的总和减少了数字的值。

请注意，此时您不知道这些情况是否属实。您只需继续减少它们，直到您找到可以确定答案的微不足道的空案例。

如果这两种情况中的任何一种都是正确的，那么原始问题的答案就是正确的。这正是 operator`||`所做的 - 如果它的任何操作数（两种情况的结果）为真，它将产生真。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T09:40:05.487

`||`是逻辑或。它从左到右进行评估并短路。

这意味着在表达式`A || B`中，`A`首先评估。如果是`true`，则整个表达式是`true`并且不进行进一步的评估。如果`A`是`false`,`B`被评估并且表达式得到 的值`B`。

在您的示例中，`A`是“尝试在不使用集合中的第一个元素的情况下获得相同的总和”。`B`是“使用集合中的第一个元素，这会减少总和，并尝试与元素的其余部分一起获得。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T09:41:57.410

让我们先看看算法..

*   基本情况（即递归终止的情况）是集合为空的情况。

*   否则，程序将第一个元素从集合中减去。

*   现在它将调用`subsetSumExists(rest, target)`并检查它是否为真，如果是，它将返回真，否则它将调用 `subsetSumExists(rest, target - element)`并返回它返回的任何内容。

简单来说，`subsetSumExists(rest, target - element)`只有当第一个`subsetSumExists(rest, target)`返回 false 时才会调用。

现在让我们尝试用一个小样本集 {3,5} 和总和 8 来干运行这段代码。从现在开始我将调用函数 sSE

```
sSE({3,5}, 8) => "sSE({5}, 8) || sSE({5},(8-3))"

sSE({5}, 8)   => sSE({}, 8) || sSE({}, (8-5)) 

sSE({}, 8)    => false.. now will call sSE({}, (8-5))

sSE({}, 3)    => false.. now will call sSE({5}, (8-3))

sSE({5}, 5)   => sSE({}, 5} || sSE({}, (5-5))

sSE({}, 5)    => false.. now will call sSE({}, (5-5))

sSE({}, 0)    => true.. ends here and return true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T09:41:11.767

要了解递归，您需要了解递归。要做到这一点，你需要反复思考。

在这种特殊情况下。

对于任何：`subsetSum(set, target)`

1.  如果`set`为空`target`且为0，则`subsetSum`存在

2.  否则，删除`set`. 检查是否`subdetSum(set, target)`存在或`subdetSum(set, target - removed_element)`存在（使用步骤 0）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T09:41:13.600

集合减法看起来是一种奇怪的语法，但我认为它意味着元素上的 pop()。

它通过找到所有可能的组合来“工作”，尽管它是指数级的。

在`||`语句中，LHS 是包括当前元素的总和，而 RHS 是不包括它的总和。所以你会得到，沿着指数树，每个元素的每个组合要么打开要么关闭。

顺便说一句，指数意味着如果你有 30 个元素，它将产生 2 的 30 次方，即`0x40000000`接近十亿个组合。

当然，您可能会耗尽内存。

如果它找到解决方案，它可能不会运行所有 2^N 案例。如果没有解决方案，它将始终访问它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-28T17:52:54.883

如果我为自己说话，理解问题的困难源于`||`操作员。让我们用另一种方式看一下相同代码的底部返回语句，

```
if (subsetSumExists(rest, target - element))
        return true;
if (subsetSumExists(rest, target))
        return true;

return false; 
```

# android - 如何从android中的另一个活动调用活动中的函数？

> ID：13642286
> 
> 赞同：1
> 
> 时间：2012-11-30T09:27:38.550
> 
> 标签：android, android-activity, sendmessage

我有一个关于在 android 中发送短信的问题。我有两节课。其中一个是 SendMessage.java，另一个是 SendingSms.java，我想通过 SendingSms.java 文件发送我的消息，所以里面有一个 sendSms 类，我想在 SendMessage.java 文件中使用这个 sendSms 函数，但它不能不是。此外，我可以使用 SendingSms.java 中的函数，但是当我在其中编写发送短信代码时，它不起作用。有什么问题？

这是我的 SendMessage.java 中的函数

```
public void sendMessageButton (View view)
{
    //SendingSms send = new SendingSms();       
    if(who_detail.getText().toString().length()>0 && message_text.getText().toString().length()>0 )
    {
        sendSMS(who_detail.getText().toString(), message_text.getText().toString());

    }
    else
    {
    Toast.makeText(getApplicationContext(), R.string.sendingsms_error, Toast.LENGTH_LONG).show();
    }

} 
```

这是我的 sendinSms.java

```
package com.example.stildeneme;

import android.app.Activity;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.telephony.SmsManager;
import android.widget.Toast;

public class SendingSms extends Activity {

     public void sendSMS(String telNo, String mesaj)
        {
            String SENT = "SMS_SENT";
            String DELIVERED = "SMS_DELIVERED";

            PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(SENT), 0);

            PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0, new Intent(DELIVERED), 0);

            registerReceiver(new BroadcastReceiver() {

                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    // TODO Auto-generated method stub
                    switch(getResultCode())
                    {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS Gönderildi",Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                         Toast.makeText(getBaseContext(), "Generic failure",Toast.LENGTH_SHORT).show();
                         break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                         Toast.makeText(getBaseContext(), "No service",Toast.LENGTH_SHORT).show();
                         break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU",Toast.LENGTH_SHORT).show();
                        break;                  
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off",Toast.LENGTH_SHORT).show();
                        break;
                    }
                }
            }, new IntentFilter(SENT));

            registerReceiver(new BroadcastReceiver(){
                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS iletildi",
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case Activity.RESULT_CANCELED:
                            Toast.makeText(getBaseContext(), "SMS iletilemedi",
                                    Toast.LENGTH_SHORT).show();
                            break;
                    }
                }

            }, new IntentFilter(DELIVERED));       

            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(telNo, null, mesaj, sentPI, deliveredPI);

         Toast.makeText(getApplicationContext(), telNo.toString() + " - " + mesaj.toString(), Toast.LENGTH_LONG).show();
        }

} 
```

顺便说一句，我从 SendingSms 类扩展了我的 SendMessage 类。

这是我的日志猫

```
11-30 09:48:09.613: E/AndroidRuntime(1007): FATAL EXCEPTION: main
11-30 09:48:09.613: E/AndroidRuntime(1007): java.lang.IllegalStateException: Could not execute method of the activity
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.view.View$1.onClick(View.java:2144)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.view.View.performClick(View.java:2485)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.view.View$PerformClick.run(View.java:9080)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.os.Handler.handleCallback(Handler.java:587)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.os.Looper.loop(Looper.java:123)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.app.ActivityThread.main(ActivityThread.java:3683)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at java.lang.reflect.Method.invokeNative(Native Method)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at java.lang.reflect.Method.invoke(Method.java:507)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at dalvik.system.NativeStart.main(Native Method)
11-30 09:48:09.613: E/AndroidRuntime(1007): Caused by: java.lang.reflect.InvocationTargetException
11-30 09:48:09.613: E/AndroidRuntime(1007):     at java.lang.reflect.Method.invokeNative(Native Method)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at java.lang.reflect.Method.invoke(Method.java:507)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.view.View$1.onClick(View.java:2139)
11-30 09:48:09.613: E/AndroidRuntime(1007):     ... 11 more
11-30 09:48:09.613: E/AndroidRuntime(1007): Caused by: java.lang.SecurityException: Sending SMS message: User 10048 does not have android.permission.SEND_SMS.
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.os.Parcel.readException(Parcel.java:1322)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.os.Parcel.readException(Parcel.java:1276)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at com.android.internal.telephony.ISms$Stub$Proxy.sendText(ISms.java:369)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at android.telephony.SmsManager.sendTextMessage(SmsManager.java:87)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at com.example.stildeneme.SendingSms.sendSMS(SendingSms.java:69)
11-30 09:48:09.613: E/AndroidRuntime(1007):     at com.example.stildeneme.SendMessage.sendMessageButton(SendMessage.java:76)
11-30 09:48:09.613: E/AndroidRuntime(1007):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:32:56.323

将该方法设为您将从另一个活动中访问的公共静态方法。然后将其称为 activity1.sendsms();

就是这样。如果您发布代码会为您提供更好的建议...希望这会对您有所帮助。

**嗨使用下面的代码。问题是你需要使用上下文。**

```
import android.app.Activity;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.widget.Toast;

public class SendingSms extends Activity {

    static Context context;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        context=this;

    }

     public static void sendSMS(String telNo, String mesaj)
        {
            String SENT = "SMS_SENT";
            String DELIVERED = "SMS_DELIVERED";

            PendingIntent sentPI = PendingIntent.getBroadcast(context, 0, new Intent(SENT), 0);

            PendingIntent deliveredPI = PendingIntent.getBroadcast(context, 0, new Intent(DELIVERED), 0);

            context.registerReceiver(new BroadcastReceiver() {

                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    // TODO Auto-generated method stub
                    switch(getResultCode())
                    {
                    case Activity.RESULT_OK:
                        Toast.makeText(context, "SMS Gönderildi",Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                         Toast.makeText(context, "Generic failure",Toast.LENGTH_SHORT).show();
                         break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                         Toast.makeText(context, "No service",Toast.LENGTH_SHORT).show();
                         break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(context, "Null PDU",Toast.LENGTH_SHORT).show();
                        break;                  
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(context, "Radio off",Toast.LENGTH_SHORT).show();
                        break;
                    }
                }
            }, new IntentFilter(SENT));

            context. registerReceiver(new BroadcastReceiver(){
                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(context, "SMS iletildi",
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case Activity.RESULT_CANCELED:
                            Toast.makeText(context, "SMS iletilemedi",
                                    Toast.LENGTH_SHORT).show();
                            break;
                    }
                }

            }, new IntentFilter(DELIVERED));       

            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(telNo, null, mesaj, sentPI, deliveredPI);

         Toast.makeText(context, telNo.toString() + " - " + mesaj.toString(), Toast.LENGTH_LONG).show();
        }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:18:42.233

首先在您的 sendMessage.java 中初始化该类

sendinsms sm=新的 sendinsms();

sm.sendsms(你的参数);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T09:56:37.203

首先，您缺少一个权限：

```
> Caused by: java.lang.SecurityException: Sending SMS message: User
> 10048 does not have android.permission.SEND_SMS. 
```

其次，这种方法不应该`static`——你可能有内存泄漏。

如果您 SendMessage 扩展 SendSms 您应该公开 SendSms.sendSms 方法并且它应该可以工作

你不应该使用：`static Context context;`

`context`应该是一个正常的字段。为什么你需要它:>？您可以使用`activity context`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:33:12.660

您可以通过两种方式进行：

**1.**将存在该方法的活动的上下文传递给您要调用该方法的其他活动。

**2.**第二种方法是使方法静态，然后使用类名从其他活动调用它。操作员

**例如：**

`Class_Name.method()`

# php - MySql_query 插入 null 不是 0

> ID：13642287
> 
> 赞同：-2
> 
> 时间：2012-11-30T09:27:40.327
> 
> 标签：php, mysql, insert, null

**数据库：**

> DAlanding int(11) Ja NULL

```
$DAlanding = $_POST['DAlanding '];

if ($DAlanding =="")
{
    $DAlanding =NULL;
}
$sql = "INSERT INTO cardex (DAlanding) VALUES('$DAlanding')"; 
```

但现在我需要它来约会：

> DAdate 日期 Ja NULL

```
$DAdate  = $_POST['DAdate '];

if ($DAdate  =="")
{
    $DAdate  = 'NULL';
}
$sql = "INSERT INTO cardex (DAdate) VALUES('$DAdate')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:33:35.933

为了插入`NULL`，您需要在不带引号的情况下传递它。

```
$DAlanding = isset($_POST['DAlanding']) && $_POST['DAlanding'] != '' ? "'" . $_POST['DAlanding'] . "'" : 'NULL';

$sql = "INSERT INTO cardex (DAlanding) VALUES($DAlanding)"; 
```

您应该查找 SQL 注入，因为您正在插入原始用户输入，从而创建了漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:31:14.917

将 NULL 设为字符串“NULL”。那么 SQL 将是正确的。

```
 if ($DAlanding =="")
    {
        $DAlanding ="NULL";
    }
  $sql = "INSERT INTO cardex (DAlanding) VALUES($DAlanding)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:31:52.750

`STRING`我很惊讶您在尝试将值插入`int`列时没有收到错误。
通常您会省略不想插入任何内容的列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:35:05.900

将数据类型设置为 varchar 或 char。如果我们使用 int 它会自动将 0 分配给相应的字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T09:35:08.753

试试这个

```
if ($DAdate  =="")
{
    $DAlanding= NULL;
}
else{
    $DAlanding= "'".$DAdate."'";
}

$sql = "INSERT INTO cardex (DAlanding) VALUES($DAlanding)"; 
```

在 $DAlanding 之前和之后删除 '

# flot - 在 Flot 中使用日期

> ID：13642288
> 
> 赞同：0
> 
> 时间：2012-11-30T09:27:42.177
> 
> 标签：flot

我需要帮助显示浮动图表（在类似线程中搜索对我不起作用）：

```
var graphData = [{
data: [ [1343772000*1000,130],[1343858400*1000,152]...
data: [ [1312149600*1000,202],[1312236000*1000,165]... 
```

和

```
xaxis: {
mode: "time",
timeformat: "%d.%m",
minTickSize: [1, "day"]
}, 
```

结果是…… ![在此处输入图像描述](../Images/24edb358205bc6f8a5cc86774a7dc81a.png)

如何在 x 轴上显示正确的日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:23:45.980

这取决于你的意思是正确的。

如果您谈论的是 x 轴标签格式，那么您使用的 %d.%m 时间格式会告诉 Flot 显示月份数和日期，这正是屏幕截图中显示的内容。

如果您想要月份名称而不是数字，则需要提供 'monthNames' 选项，其中包含 12 个字符串，即`["January, "February", ...]`. 然后您可以使用 %b 格式选项来使用适当的字符串。有关所有可用格式选项的更多信息，请参阅文档的[时间序列数据](https://github.com/flot/flot/blob/master/API.md#time-series-data)部分。

关于情节中间的差距，这似乎也是正确的。第一个系列中的时间戳从 2012 年 8 月开始，而第二个系列中的时间戳从 2011 年 8 月开始。如果每个系列涵盖三个月，那么人们会期望看到屏幕截图中显示的确切内容。

如果两个答案都不相关，那么您需要提供有关您的数据以及您希望看到的内容的更多信息。

# php - php中找不到文件问题

> ID：13642293
> 
> 赞同：0
> 
> 时间：2012-11-30T09:27:50.423
> 
> 标签：php, codeigniter

```
<?
header("Content-type: octet/stream");
header("Content-Transfer-Encoding: Binary");
header("Content-disposition: attachment; filename=a.mp3");
readfile("http://adstorage.jamba.net/storage/view/325/0/fa/Fairytale.mp3");
?> 
```

此代码在我的代码中运行良好，`localhost`但`File not found`在上传到我的服务器时显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:35:57.833

您是否具有读取外部文件的 PHP 权限？

这些权限在您的本地计算机和 Web 服务器上可能不同。

根据[readfile()](http://php.net/manual/en/function.readfile.php)文档：

> 如果启用了[fopen 包装器](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)，则 URL 可以用作此函数的文件名。有关如何指定文件名的更多详细信息，请参阅[fopen() 。](http://www.php.net/manual/en/function.fopen.php)请参阅[支持的协议和包装](http://www.php.net/manual/en/wrappers.php)器以获取有关各种包装器具有哪些功能的信息的链接、有关其使用的说明以及有关它们可能提供的任何预定义变量的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:32:03.467

**请设置文件权限，只有它才能正常工作.. **

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:38:12.090

我认为您发布的代码与 404 无关。您的 mp3 下载代码错误不会产生 404。

您的远程主机上的 CodeIgniter 设置可能是错误的/不同的。检查路由是否正常工作。其他控制器是否工作？

# autohotkey - Autohotkey - 虚拟键盘/自动输入

> ID：13642295
> 
> 赞同：0
> 
> 时间：2012-11-30T09:28:00.787
> 
> 标签：autohotkey

我在 Autohotkey 中有这个简单的脚本：

```
:*:teams::
(
milan
juventus
inter
roma
lazio
napoli
mantova
) 
```

当我在记事本上输入*球队*时，我的输出是球队列表（米兰、尤文图斯……）
如果我使用物理键盘输入*球队*，这个脚本对我 有用![美味佳肴](../Images/2418ef107db3ff69bd08386bcbb441fe.png)

，但如果使用虚拟键盘输入*团队*，我在记事本上没有列表：

![虚拟键盘](../Images/5fe34ba0e825f33961e3dd0069972b05.png)

如果我运行脚本自动键入*团队*

```
WinWait, *new  2 - Notepad++, 
IfWinNotActive, *new  2 - Notepad++, , WinActivate, *new  2 - Notepad++, 
WinWaitActive, *new  2 - Notepad++, 
MouseClick, left,  133,  117
Sleep, 100
Send, squadre 
```

该脚本不会用团队列表替换*团队*

为什么该脚本仅在我使用物理键盘键入时才有效？
有没有不使用物理键盘用我的脚本替换单词、句子的解决方案？

对不起，如果我是菜鸟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:29:50.733

您可以使用该`Input`命令。

```
loop {
    While !RegexMatch(strCapture, "teams$") {
        Input, strUserInput, V L1, {BackSpace}  ; V: visible, L1: Character length 1
        If ErrorLevel = Endkey:BackSpace
            strCapture := SubStr(strCapture, 1, StrLen(strUserInput) - 1) 
        else
            strCapture .= strUserInput
        ; tooltip % ErrorLevel "`n" strUserInput "`n" strCapture "`n" ; enable this to see what actually happens
    }
    SendInput,
    (Ltrim
        {Backspace 5}
        milan
        juventus
        inter
        roma
        lazio
        napoli
        mantova
    )
    strCapture := ""
} 
```

# jquery - 如何在悬停时将 div 的宽度增加 10%

> ID：13642297
> 
> 赞同：0
> 
> 时间：2012-11-30T09:28:04.997
> 
> 标签：jquery, jquery-animate

例如 200 像素到 220 像素。显然“+=10%”并没有像我预期的那样工作。这是我的代码[http://bit.ly/Wyhe32](http://bit.ly/Wyhe32)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:39:19.830

我不确定您是要设置动画还是仅在悬停时设置值。两者兼而有之。

## 动画

```
$(".gds").css({
    'backgroundColor': '#DBEAF9'
}).hover(function () {
    $(this).stop().animate({
        width: $(this).width()*1.1
    }, 350).addClass('shadow');
}, function () {
    $(this).stop().animate({
        width: ($(this).width()/110)*100
    }, 350).removeClass('shadow');
});​ 
```

## 简单的 CSS 属性更改

```
$(".gds").css({
    'backgroundColor': '#DBEAF9'
}).hover(function () {
    $(this).css('width', $(this).width()*1.1)+'px';
}, function () {
    $(this).css('width', (($(this).width()/110)*100)+'px')
    }, 350).removeClass('shadow');
});​ 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:32:04.933

获取元素的宽度并将其应用于 css 属性 Width：

```
$('.divclass').css('width',$('.divclass').width() + ((parseFloat($('.divclass').width())) / 100) * 10) + "px"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:46:25.350

```
宽度：$(this).width()*1.1
```

完全符合我的要求。谢谢你，[大卫法勒](https://stackoverflow.com/users/1318117/davidpfahler)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:33:03.667

在悬停功能的开头添加此代码：

```
var newWidth = (parseFloat($('.gds').width()) * 1.1); 
```

检查这个小提琴：http: [//jsfiddle.net/scaillerie/rKT2p/](http://jsfiddle.net/scaillerie/rKT2p/)

# ipad - 适用于 iOS 4.3 的 UISplitViewController shouldHideViewController

> ID：13642300
> 
> 赞同：0
> 
> 时间：2012-11-30T09:28:25.390
> 
> 标签：ipad, ios5, ios4, uisplitviewcontroller

我正在将我的 iPhone 应用程序转换为 iPad 并使用

```
-(BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation
{
    return NO;
} 
```

始终保持双窗格布局。不幸的是，这是在 iOS5 中引入的。我已经看到提到以编程方式为 pre-iOS 5 执行此操作，但没有设法找到任何示例代码。请问有人有什么指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:06:00.657

这个区域有点滑，因为 Apple 一直在 5.0、5.1 和 6.0 中调整拆分视图和旋转

不是翻转，但如果您可以将您的应用程序移动到需要 5.0，这将是实现您的目标的最简单方法。

如果您想自己执行此操作，则基本上需要劫持弹出框并在您自己的框架中重新实现。有一种方法叫：

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)newpopoverController 
```

在此方法中，您可以抓取 viewController 并将其存储。

然后在纵向使用时感应：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

，您需要获取详细视图并对其进行调整 - 为左侧的新框架腾出空间，您可以使用从上一个方法中获取参考的视图控制器填充该框架。

它有点杂耍。

如果您真的非常需要保持 4.3 的兼容性并且想要该功能，我建议您查看由 Matt Gemmell 开发的名为 MGSplitViewController 的开源 SplitView 控制器 - 您可以在此处找到它：[https ://github.com/mattgemmell /MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)。

他的实现非常好，不仅会为您提供该功能，还会为您提供与屏幕上的视图位置相关的其他几个选项。

现在这里是滑坡开始的地方，Matt 已经有几年没有更新代码了（尽管有一些分支已经更新了），并且随着您的应用程序向前推进，可能会变得难以维护。

如果没有别的，它确实包含完全符合您想要做的代码，因此它将是帮助您完成项目的绝佳参考。

抱歉，我无法提供完整的配方，但实际上，无论您使用它还是仅将其用作参考，该库都应该有所帮助。

祝你好运

# linux-kernel - 谁决定符号在 ARM 中的位置

> ID：13642301
> 
> 赞同：1
> 
> 时间：2012-11-30T09:28:29.250
> 
> 标签：linux-kernel, kernel, arm, embedded-linux, odroid

我正在查看 linux kerenl 中的 arch/arm/boot/compressed/head.S。

我的板子是 odroid-S，当我看到从 readelf -S arch/arm/boot/compressed/vmlinux 获得的符号表时，我看到了这些代码。

```
 LC0:  .word LC0         @ r1 
    .word   __bss_start     @ r2 
    .word   _end            @ r3 
    .word   zreladdr        @ r4 
    .word   _start          @ r5 
    .word   _got_start      @ r6 
    .word   _got_end        @ ip 
    .word   user_stack+4096     @ sp ` 
```

但是他们每个人拥有的地址没有排序。例如，LC0 值为 0000013c，但 __bss_start 为 0031a734。

谁能告诉我是什么证实了这些符号的价值？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:00:47.330

在编译操作系统或引导加载程序等软件的裸机实现时，将有一个特定于平台的[链接器脚本](http://sourceware.org/binutils/docs/ld/Scripts.html#Scripts)将指定每个部分将进入的地址。链接描述文件将根据平台的内存映射来编写。

当操作系统加载可执行文件时，加载的操作系统将读取 elf 文件中的各个部分，并确保将每个部分放入进程内存映射的正确部分。然后，操作系统加载程序将根据需要修复任何未链接的地址。

# magento - Magento Checkout - 编辑评论模板

> ID：13642306
> 
> 赞同：1
> 
> 时间：2012-11-30T09:28:45.287
> 
> 标签：magento, magento-1.7

我正在尝试在自定义主题中编辑 Checkout Review 模板，但在尝试重新排序表格列时遇到问题。

我做了以下

*   编辑了自定义主题 - app/design/frontend//default/template/checkout/onepage/review/info.phtml
*   编辑了基本主题（作为测试） - app/design/frontend/base/default/template/checkout/onepage/review/info.phtml
*   禁用所有缓存管理
*   启用模板提示但页面不呈现

我已经改变了自定义主题中的表格类，如下所示

```
<table class="data-table test" id="checkout-review-table"> 
```

我已按如下方式对自定义主题中的列重新排序，但未显示更改

```
<th rowspan="<?php echo $rowspan ?>"><?php echo $this->__('Product Name') ?></th>
<th rowspan="<?php echo $rowspan ?>" class="a-center"><?php echo $this->__('Qty')?></th>
<th colspan="<?php echo $colspan ?>" class="a-center"><?php echo $this->__('Price')?></th>
<th colspan="<?php echo $colspan ?>" class="a-center"><?php echo $this->__('Subtotal') ?></th> 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:38:41.370

您肯定在编辑正确的模板，因此为了防止混淆，您可以恢复对基本模板的所有更改并从自定义模板中的 info.phtml 的新副本开始工作。

更新

```
<thead>
    <tr>
        <th rowspan="<?php echo $rowspan ?>"><?php echo $this->__('Product Name') ?></th>
        <th colspan="<?php echo $colspan ?>" class="a-center"><?php echo $this->__('Qty') ?></th>
        <th rowspan="<?php echo $rowspan ?>" class="a-center"><?php echo $this->__('Price') ?></th>
        <th colspan="<?php echo $colspan ?>" class="a-center"><?php echo $this->__('Subtotal') ?></th>
    </tr>
    <?php if ($this->helper('tax')->displayCartBothPrices()): ?>
        <tr>
            <th class="a-right"><?php echo $this->helper('tax')->getIncExcTaxLabel(false) ?></th>
            <th><?php echo $this->helper('tax')->getIncExcTaxLabel(true) ?></th>
            <th class="a-right"><?php echo $this->helper('tax')->getIncExcTaxLabel(false) ?></th>
            <th><?php echo $this->helper('tax')->getIncExcTaxLabel(true) ?></th>
        </tr>
    <?php endif; ?>
</thead> 
```

![在此处输入图像描述](../Images/de05f8dee314c091086a00ba59c7e294.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T16:17:57.287

我之前遇到过这个问题，如果您使用的是 SagePay 或任何其他付款方式，请检查扩展文件夹，该文件夹应该有另一个 review/info.phtml 文件。这就是你要找的那个。

希望这会有所帮助，亚历克斯

# javascript - 获取元素的当前顶部位置

> ID：13642311
> 
> 赞同：1
> 
> 时间：2012-11-30T09:29:36.840
> 
> 标签：javascript, jquery, scroll, position, offset

我需要从元素（div）的顶部到窗口顶部的当前位置获取页面上元素的位置。我不希望相对于页面顶部的位置（似乎偏移量和位置正在这样做？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:31:56.853

获取父元素的偏移量，然后获取子元素的偏移量，然后从另一个中减去一个 - 繁荣你得到了你正在寻找的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:35:11.617

尝试：

```
 var top= $('#element').offset().top+ $(document).scrollTop(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:34:34.247

使用`$(element).offset().top`：

```
$(".element").offset().top; 
```

并将其应用到您的页面......祝你好运

# c# - 如何找到两个哈希集的补码

> ID：13642314
> 
> 赞同：2
> 
> 时间：2012-11-30T09:29:45.467
> 
> 标签：c#, linq

我有两个 HashSet——setA 和 setB。

1.  我们如何找到 setA 和 setB 的补集？
2.  交叉点的代码是找到交叉点的最佳方法吗？

**代码**

```
 string stringA = "A,B,A,A";
 string stringB = "C,A,B,D";

 HashSet<string> setA = new HashSet<string>(stringA.Split(',').Select(t => t.Trim()));
 HashSet<string> setB = new HashSet<string>(stringB.Split(',').Select(t => t.Trim()));

 //Intersection - Present in A and B
 HashSet<string> intersectedSet = new HashSet<string>( setA.Intersect(setB));

 //Complemenet - Present in A; but not present in B 
```

**更新**：

用于`OrdianlIgnoreCase`忽略大小写敏感性 [如何在不区分大小写模式下使用 HashSet<string>.Contains() 方法？](https://stackoverflow.com/questions/2667635/how-to-use-hashsetstring-contains-method-in-case-insensitive-mode)

**参考**：

1.  [HashSet<T> 和 List<T> 有什么区别？](https://stackoverflow.com/questions/6391738/what-is-the-difference-between-hashsett-and-listt-in-c)
2.  [多个列表与 IEnumerable.Intersect() 的交集](https://stackoverflow.com/questions/1674742/intersection-of-multiple-lists-with-ienumerable-intersect)
3.  [比较两个哈希集](https://stackoverflow.com/questions/10704812/comparing-two-hashsets)
4.  [比较两个哈希集？](https://stackoverflow.com/questions/10635923/compare-two-hashsets)
5.  [在 C# 中查找两个集合的补集的最快方法](https://stackoverflow.com/questions/2193778/quickest-way-to-find-the-complement-of-two-collections-in-c-sharp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:32:23.627

> 1 - 我们如何找到 setA 和 setB 的补集？

采用[`HashSet<T>.Except Method`](http://msdn.microsoft.com/en-us/library/vstudio/bb908036%28v=vs.90%29.aspx)

```
//Complemenet - Present in A; but not present in B
HashSet<string> ComplemenetSet = new HashSet<string>(setA.Except(setB)); 
```

尝试使用以下字符串。

```
string stringA = "A,B,A,E";
string stringB = "C,A,B,D"; 
```

ComplementSet 将包含`E`

> 2 - 交叉路口的代码是找到交叉路口的最佳方法吗？

可能是

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:33:51.347

您可以使用`Except`获得 A 或 B 的补码。要获得对称补码，请使用`SymmetricExceptWith`.

```
setA.SymmetricExceptWith(setB); 
```

请注意，这*会修改* `setA`. 要获得交集，有两种方法：`Intersect`，它创建一个新的`HashSet`，和`IntersectWith`，它修改第一个：

```
// setA and setB unchanged
HashSet<string> intersection = setA.Intersect(setB);

// setA gets modified and holds the result
setA.IntersectWith(setB); 
```

# android - Android如何计算最佳缩放级别？

> ID：13642315
> 
> 赞同：2
> 
> 时间：2012-11-30T09:29:46.363
> 
> 标签：android, dictionary, zooming

如何计算跟踪路线的缩放级别以完全适合地图（屏幕）的视图？我有根/整个轨道/在Lon/Lat位置的起点和终点，我可以用输入参数meter计算缩放级别，但是我需要设置多少米？我想在地图上显示记录的轨迹。我展示了赛道，但不适合地图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:38:11.200

您可以使用此代码段设置缩放，只需在列表中传递起始和结束地理点。如果你有超过 2 分，它也有效。

```
private void fixZoom(MapController controller, List <GeoPoint> items){

    int minLat = Integer.MAX_VALUE;
    int maxLat = Integer.MIN_VALUE;
    int minLon = Integer.MAX_VALUE;
    int maxLon = Integer.MIN_VALUE;

    for (GeoPoint item : items) 
    { 

          int lat = item.getLatitudeE6();
          int lon = item.getLongitudeE6();

          maxLat = Math.max(lat, maxLat);
          minLat = Math.min(lat, minLat);
          maxLon = Math.max(lon, maxLon);
          minLon = Math.min(lon, minLon);
     }

    controller.zoomToSpan((int) (Math.abs(maxLat - minLat) * 1.1), (int)(Math.abs(maxLon - minLon) * 1.1)); //1.1 to have some padding on the edges.
    controller.animateTo(new GeoPoint( (maxLat + minLat)/2,(maxLon + minLon)/2 )); //so the center is positioned just in the middle

} 
```

希望有帮助。

# php - 如何将 if / else if 放入数组中？

> ID：13642317
> 
> 赞同：1
> 
> 时间：2012-11-30T09:29:54.410
> 
> 标签：php, arrays, request, uri

我必须在一些网址中添加 noindex，这是我目前的代码：

```
<?php if ($metanoindex) { ?>
<meta name="robots" content="noindex,follow" />
<?php } elseif ($_SERVER['REQUEST_URI']=='/dolls/1/bestselling' ) { ?>
<meta name="robots" content="noindex,follow" />
<?php } elseif ($_SERVER['REQUEST_URI']=='/dolls/1/bestselling/30' ) { ?>
<meta name="robots" content="noindex,follow" /> 
<?php } elseif ($_SERVER['REQUEST_URI']=='/dolls/1' ) { ?>
<meta name="robots" content="noindex,follow" /> 
<?php } else { ?>
<meta name="robots" content="index,follow" />
<?php } ?> 
```

我想知道是否有一种方法可以制作一个 url 数组，而不是每次都重复“else if”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:34:12.067

尝试如下

```
<?php
    $arr = array('/dolls/1/bestselling','/dolls/1/bestselling/30','/dolls/1');
    if($metanoindex || in_array($_SERVER['REQUEST_URI'],$arr)){ ?>
      <meta name="robots" content="noindex,follow" /> 
<?php
    }
    else {
?>
      <meta name="robots" content="index,follow" />
<?php } ?> 
```

PHP 手册：[in_array()](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:35:12.063

```
$urls = array('/dolls/1/bestselling', '/dolls/1/bestselling/30', '/dolls/1');
if (in_array($_SERVER['REQUEST_URI'], $urls)) {
    // Insert meta tag here
} 
```

# php - 基于 PHP 数组的 MySQL 查询

> ID：13642319
> 
> 赞同：0
> 
> 时间：2012-11-30T09:29:58.597
> 
> 标签：php, mysql, arrays

这是我的数组：

```
array (size=2)
  100 => 
    array (size=2)
      'trade' => int 5
      'gold' => int 10
  101 => 
    array (size=2)
      'trade' => int 10
      'gold' => int 20 
```

数组的键是我想在查询中运行的用户的 ID。我发现我可能需要使用 IN，例如：

```
 SELECT * FROM `users` WHERE `id` IN (:id) 
```

(:id 在脚本中被 $id 替换)

现在当我做

```
 SELECT * FROM `users` WHERE `id` IN (100,105) 
```

（出于测试目的）它有效。

虽然它需要准备所以当我设置

```
$id = 100,101; 
```

或者

```
$id = ‘100,101’; 
```

它只显示 100 条记录。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:51:51.400

他们都错了你所做的`$id = 100,101;`，`$id = ‘100,101’;` 试试这个

```
 $id = "100,101"; 
```

或这个

```
 $id = '100,101'; 
```

甚至也可以这样做

```
 $id = 100;
    $id .= ",";
    $id .= 101 ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:37:45.463

您可以使用[implode](http://php.net/manual/en/function.implode.php)和[array_keys](http://php.net/manual/en/function.array-keys.php)：

```
"SELECT * FROM `users` WHERE `id` IN (" . implode(",", array_keys($array)) . ")" 
```

您可以通过使用 / 手动指定数组来测试：

```
$array = array(
    100 => array(
        'trade' => 5,
        'gold' => 10,
    ),
    101 => array(
        'trade' => 10,
        'gold' => 20,
    )
);

$sql = "SELECT * FROM `users` WHERE `id` IN (" . implode(",", array_keys($array)) . ")";
$result = mysqli_query($sql);

while($row = mysqli_fetch_assoc($result)){
    var_dump($row);
} 
```

它已经过实际测试并且有效。

# php - 在下拉选择中绑定表格和图表

> ID：13642320
> 
> 赞同：0
> 
> 时间：2012-11-30T09:30:02.007
> 
> 标签：php, mysql, ajax

我确实有 5 个表格和 2 个图表以及一个下拉菜单。我必须在下拉选择中绑定所有这些表格和图表。我为此使用 ajax .. 对于下拉我将代码编写为

```
<select id="userclicked"> <?php foreach($model["combouser"] as &$obj){?>
            <option value="<?php echo $obj["id"];?>" id="<?php echo $obj["id"];?>" data-id="<?php echo $obj["id"];?>"><?php echo $obj["name"]; ?></option>
            <?php }?>
    </select> 
```

我将使用的ajax如下：

```
$("#userclicked").live('click', function () {
        $.ajax({
            type: 'POST',
            url: root + "home/index/" + $(this).attr("value") + "?json",
            success: function (data) {
                ko.applyBindings(new DynamicModel(data.list), document.getElementById("listform"));
                ko.applyBindings(new DynamicModel(data.activetime), document.getElementById("listform"));

            },
            dataType: "json"
        });
        return false;
    });

    refreshMyModel(model);
}); 
```

请在这方面给我建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:02:52.703

您需要在选择标签上使用“更改”事件。像这样：

```
$("#userclicked").live('change', function () { 
```

但是请注意 .live() 函数已被弃用，您现在应该使用 .on()

# c# - RIA 服务客户端代码生成不起作用

> ID：13642322
> 
> 赞同：0
> 
> 时间：2012-11-30T09:30:17.697
> 
> 标签：c#, silverlight, wcf-ria-services

我在解决方案构建方面遇到问题。从命令行运行 msbuild 时，我可以毫无问题地编译解决方案。但是，当我在 Visual Studio 中通过 Build Solution 进行编译时，会出现编译错误。问题在于从 VS 发出构建时未完全生成 Ria 服务客户端代码。

当我只编译绑定到 Ria 服务的项目时，一切正常。

我收到很多这样的警告（从命令行编译时）：

```
Assembly 'System.Windows.Controls.Toolkit.Internals, Version=4.0.5.0, Culture=neutral, PublicKeyToken=2c5c654d367bf4a7' could not be loaded and will be ignored. 
```

您对如何让 Visual Studio 构建解决方案有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:29:10.033

项目的并发编译存在问题。更改构建顺序对此有所帮助。

# java - 将 HTML 文件解析为 DOM 树以进行提取（Java）

> ID：13642324
> 
> 赞同：2
> 
> 时间：2012-11-30T09:30:27.490
> 
> 标签：java, html, dom, xpath

所以我试图将 HTML 文件解析到 DOM 树中并通过 XPath 表达式提取节点。

我可以成功地将 HTML 解析到 DOM 树中，但是当我尝试通过 XPath 提取节点时，我什么也没得到。

请**注意**，这只是相关性的代码片段。

```
import org.cyberneko.html.parsers.DOMParser;
import org.dom4j.Document;
import org.dom4j.Node;
import org.dom4j.io.DOMReader;
import org.xml.sax.InputSource;

DOMParser parser = new DOMParser();

parser.parse(new InputSource("file:///Z:/homepage.htm"));
org.w3c.dom.Document doc = parser.getDocument();

DOMReader reader = new DOMReader();
Document document = reader.read(doc);

@SuppressWarnings("unchecked")
List<Node> nodes = document.selectNodes("//HEAD/LINK"); 
```

节点 = 0。

为了完整起见，这里是 HTML 的片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml">
    <HEAD>
        <META content="text/html;charset=UTF-8" http-equiv="Content-Type"/>
        <TITLE/>
        <LINK
            href="wcm/groups/visual/documents/webasset/####_ie_5_css.css"
            media="all" rel="stylesheet" type="text/css"/>
        <LINK
            href="wcm/groups/visual/documents/webasset/####_ie_5_5000_css.css"
            media="all" rel="stylesheet" type="text/css"/>
        <LINK
            href="wcm/groups/visual/documents/webasset/####_ie_6_css.css"
            media="all" rel="stylesheet" type="text/css"/> 
```

非常感谢一如既往，

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:32:29.537

我怀疑这是与命名空间相关的。

```
document.selectNodes("//HEAD/LINK"); 
```

应该是命名空间感知的。例如

```
document.selectNodes("//*[local-name()='HEAD']/*[local-name()='LINK']"); 
```

XPath 2.0 将允许

```
document.selectNodes("//:HEAD/:LINK"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T23:23:04.610

@BrianAgnew 是对的，您的问题与命名空间有关。

问题出在这里

```
<HTML xmlns="http://www.w3.org/1999/xhtml"> 
```

由于文档具有默认命名空间，因此`xmlns="http://www.w3.org/1999/xhtml"`您的 XPath 表达式`//HEAD/LINK`将不起作用，因为`HEAD`和`LINK` 元素都属于默认命名空间 (xmlns="http://www.w3.org/1999/xhtml")

@BrianAgnew 建议使用：

```
document.selectNodes("//*[local-name()='HEAD']/*[local-name()='LINK']"); 
```

有关为什么`local-name()`工作的更多信息，请参阅

[XPATHS 和默认命名空间](https://stackoverflow.com/questions/11345/xpaths-and-default-namespaces)以及同一线程上的[答案](https://stackoverflow.com/a/11351/587642)

还有另一种无需使用 local-name() 即可选择这些节点的方法，即为默认命名空间创建一个别名，然后在 XPath 表达式中使用它：

例如

```
 Map<String, String> namespaceUris = new HashMap<String, String>();  
    namespaceUris.put("foobar", "http://www.w3.org/1999/xhtml");  

    XPath xPath = DocumentHelper.createXPath("//foobar:HEAD/foobar:LINK");  
    xPath.setNamespaceURIs(namespaceUris);  

    @SuppressWarnings("unchecked")
    List<Nodes> selectNodes = xPath.selectNodes(document); 
```

上面我们将别名 foobar 设置`http://www.w3.org/1999/xhtml`为与默认命名空间相同的 URI ( )。这允许 xpath 表达式，例如

`//foobar:HEAD/foobar:LINK`工作，当然你可以使用任何你喜欢的别名。

这是一个使用两种方法的示例应用程序，它有点粗糙，但应该给你正确的想法

```
package org.foo.bar.foobar;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import nu.xom.Nodes;

import org.cyberneko.html.parsers.DOMParser;
import org.dom4j.Document;
import org.dom4j.DocumentHelper;
import org.dom4j.Node;
import org.dom4j.XPath;
import org.dom4j.io.DOMReader;
import org.dom4j.io.XMLWriter;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class App 
{
    public static void main( String[] args ) throws SAXException, IOException
    {

        DOMParser parser = new DOMParser();

        parser.parse(new InputSource("file:///Z:/homepage.htm"));
        org.w3c.dom.Document doc = parser.getDocument();

        DOMReader reader = new DOMReader();
        Document document = reader.read(doc);

        XMLWriter xmlWriter = new XMLWriter(System.out);
        xmlWriter.write(document);

        @SuppressWarnings("unchecked")

        List<Node> nodes = document.selectNodes("//*[local-name()='HEAD']/*[local-name()='LINK']");
        System.out.println("Number of Nodes: " +nodes.size());

        Map<String, String> namespaceUris = new HashMap<String, String>();  
        namespaceUris.put("foobar", "http://www.w3.org/1999/xhtml");  

        XPath xPath = DocumentHelper.createXPath("//foobar:HEAD/foobar:LINK");  
        xPath.setNamespaceURIs(namespaceUris);  

        @SuppressWarnings("unchecked")
        List<Nodes> selectNodes = xPath.selectNodes(document);
        System.out.println("Number of nodes: " +selectNodes.size());

    }
} 
```

这是我用来衡量的 pom

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.foo.bar</groupId>
    <artifactId>foobar</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>foobar</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>jaxen</groupId>
            <artifactId>jaxen</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>nekohtml</groupId>
            <artifactId>nekohtml</artifactId>
            <version>1.9.6.2</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

另请参阅[One Fork，如何将 Dom4J XPath 与 XML 命名空间一起使用](http://whileonefork.blogspot.co.uk/2011/01/how-to-use-dom4j-xpath-with-xml.html)，它涵盖了与您遇到的情况非常相似的情况

# mysql - MySQL，其中日期在两个时间戳之间

> ID：13642328
> 
> 赞同：-2
> 
> 时间：2012-11-30T09:30:39.060
> 
> 标签：mysql, sql

我尝试选择日期/时间之间的所有日期。不幸的是，我没有下定决心。我见过很多例子，人们试图在 ex 之间选择数据。'2012-08-27' 没有时间。我也需要时间。

这是我的查询。谁能告诉我怎么了？行日期具有时间戳作为数据类型。

```
SELECT date, points 
FROM nf_publicpoints 
WHERE date BETWEEN '2012-08-27 00:00:00' AND '2012-08-02 00:00:00' 
ORDER BY points DESC 
LIMIT 10 
```

在此先感谢 Troels

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:32:07.773

尝试使用`DATE`功能

```
WHERE DATE(date) BETWEEN '2012-08-02' AND '2012-08-27' 
```

如果你需要时间，

```
WHERE date BETWEEN '2012-08-02 00:00:00' AND '2012-08-27 23:59:59' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:36:37.727

该查询没有语法问题。我认为你只需要像这样转过你的查询：

```
SELECT date, points 
FROM nf_publicpoints 
#canged that                ||                        ||
WHERE date BETWEEN '2012-08-02 00:00:00' AND '2012-08-27 00:00:00' 
ORDER BY points DESC 
LIMIT 10 
```

时间必须按递增顺序排列，因为 8 月 27 日至 2 日之间没有时间，但 02 日至 27 日之间有时间。

希望这可以帮助

# kernel - 使用按值传递的概念从 opencl 内核调用函数

> ID：13642331
> 
> 赞同：5
> 
> 时间：2012-11-30T09:31:07.010
> 
> 标签：kernel, opencl, pass-by-value

如果我想使用传递值概念怎么办。例如：

```
void sum(int &u, int &v)
{    return u+v;  }

__kernel void testing(__global int *a, __global int *b, __global int *c)
{    int i = get_global_id(0);
     int u = max(a,b);
     int v = min(b,c);
     int x = sum(u,v);
} 
```

现在我的错误出现在“&”符号处。我无法使用按引用传递概念传递参数。该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T11:41:31.460

C 不支持通过引用传递变量，Opencl(v1.x) 内核与 C99 一样工作。您需要使用直接指针（这是按值传递）。

```
int sum(int *u, int *v)
{    return (*u)+(*v);  } 
```

OpenCL v2.x 可以编译 C++，但仍然需要驱动程序和硬件首先支持。

# iphone - 如何释放我们需要在返回语句中使用的 NSMutable 数组

> ID：13642334
> 
> 赞同：0
> 
> 时间：2012-11-30T09:31:13.217
> 
> 标签：iphone, sqlite, memory-leaks, retain, autorelease

我为我的 iPhone 应用程序使用 SQLITE 数据库

在我在数据库中的应用程序中重试数据库中的内容时，我使用了一个数组，并在数据库方法中返回该数组以用于 select 语句，

为此，我分配了一个数组，我需要释放数组，

```
NSMutableArray *allContacts = [[NSMutableArray alloc] init];
 return allContacts; 
```

如果我释放一个数组，我将如何在 return 语句中使用

反之亦然，如果我试图在返回后释放（返回后我们可以做任何事情）

请问有什么解决办法......

我们应该如何使用自动释放 NSMutable 数组

```
//Select statement for contacts
//==================================
+ (NSMutableArray*) selectAllContactsFromDB
{
      NSString *DBPath = [self copyDBFile];
      sqlite3 *contactsDB = nil;
      sqlite3_stmt *statement = nil;
      NSMutableArray *allContacts = [[NSMutableArray alloc] init];

      if (sqlite3_open([DBPath UTF8String], &contactsDB) == SQLITE_OK)
      {
            NSString *query = [NSString stringWithFormat: @"SELECT ROWID, NAME, MOBILE,  FROM CONTACTINFO"];
            if(sqlite3_prepare_v2(contactsDB, [query UTF8String], -1, &statement, NULL) == SQLITE_OK)
            {
                  while (sqlite3_step(statement) == SQLITE_ROW)
                  {
                        Contact *contact = [[Contact alloc] init];
                        contact.rowid = sqlite3_column_int(statement, 0);
                        contact.name = [NSString stringWithUTF8String:(const char*) sqlite3_column_text(statement, 1)];
                        contact.mobile = [NSString stringWithUTF8String:(const char*) sqlite3_column_text(statement, 2)];

                        [allContacts addObject:contact];
                  }
            }
            else {
                  NSLog(@"Statement not prepared");
            }
      }
      [DBPath release];
      return allContacts;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:34:52.880

当您从方法返回分配的对象时，将其作为`autoreleased`对象传递。

```
return [allContacts autorelease]; 
```

当你得到一个`autoreleased`对象时，你需要`retain`它以供进一步使用：

所以改变调用方法，如；

```
NSMutableArray *temp = [[YourClass selectAllContactsFromDB] retain]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:33:07.277

试试这样

```
NSMutableArray *allContacts = [[[NSMutableArray alloc] init] autorelease]; 
```

而且也是这样。。

```
return [allContacts autorelease]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T09:35:21.647

您可以编写返回语句 `return [allContacts autorelease];` ，也可以`ARC`在您的项目中使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T09:35:55.667

使用 ARC(Automatic Reference Counting) 或者你有一个属性作为一个可变数组并且只返回数组......

要让您开始使用 ARC，请观看：[http ://www.youtube.com/watch?v=FxuI4e_Bj58](http://www.youtube.com/watch?v=FxuI4e_Bj58)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T09:36:17.477

您将不得不使用`autorelease`：

```
return [allContacts autorelease]; 
```

这样 il 将在下次刷新自动释放池时被释放。而且您遵循了黄金法则：对于每个`alloc`, `copy`or `retain`，您必须有一个`release`or `autorelease`。

# c# - 可以像这样使用单个类吗？

> ID：13642336
> 
> 赞同：1
> 
> 时间：2012-11-30T09:31:35.420
> 
> 标签：c#, oop

我有数据要存储到文件中。数据如下：

```
 {
       "student": {
                      "FirstName": {
                                     "Initial": "Mr.",
                                     "Value": "Luis"
                                   },
                     "MiddleName": {
                                     "Initial": "Mr.",
                                     "Value": "Bruce"
                                   },
                       "LastName": "Wayne"
                 }
    } 
```

我将文件中的数据检索到学生类中：

```
 public class Student
    {
        public FirstName Firstname {get;set;}
        public MiddleName Middlename {get;set;}
        public string LastName {get;set;}
    }

    public class FirstName
   {
       public string Initial {get;set;}
       public string Value {get;set;}
   }
    public class MiddleName
   {
       public string Initial {get;set;}
       public string Value {get;set;}
   } 
```

我的问题是：**我可以建立一个如下给出的类来存储相同的信息吗？**

```
 public class Student
    {
        public NameClass Firstname {get;set;}
        public NameClass Middlename {get;set;}
        public string LastName {get;set;}
    }

    public class NameClass
   {
       public string Initial {get;set;}
       public string Value {get;set;}
   } 
```

这是正确的方法吗？还是我以前的方法更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:34:16.340

看不出有什么问题，就这样。

实际上它肯定更好，然后是之前完成的，因为您将公共信息统一在一个类中。

我想到的唯一一件事是你必须修改你的序列化`to`，并且`from`当你改变类架构时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:07:29.690

是的，它工作得很好......以下类结构已优化

```
public class Student
 {
    public NameClass Firstname {get;set;}
    public NameClass Middlename {get;set;}
    public string LastName {get;set;}
 }

 public class NameClass
{
   public string Initial {get;set;}
   public string Value {get;set;}
} 
```

# java - 用arraylist读写文本文件

> ID：13642339
> 
> 赞同：0
> 
> 时间：2012-11-30T09:31:47.943
> 
> 标签：java, io, arraylist

我在将文本文件读取到具有多种数据类型的数组列表中时遇到问题。

文件格式如下：

```
Name1 900 20

Name2 750 30

Name3 880 25

Name4 260 15 
```

我的列表格式是`name + score + age` ，我不知道如何将数据从 txt 正确存储到列表中。另外我想在添加一些数据后重写文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:33:29.460

您可以创建一个封装名称+分数+年龄的类，并创建`ArrayList`该类的一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:35:10.330

如果您的列表接受字符串：

```
BufferedReader reader = new BufferedReader(new FileReader("yourfile.txt"));
List<String> list = new ArrayList<>();
String line=null;
while((line= reader.readLine())!=null) {
list.add(line);
} 
```

但是，如果您有一个具有 name、socre 和 age 作为属性的类，并创建该类的列表并用空格分割您的文本文件，那就更好了。

```
class SomeClass {
private String name; 
private long score;
private int age;
//getters and setters for your properties

} 
```

现在您的列表将是：

```
 List<SomeClass> list = new ArrayList<>(); 
```

并从文件中读取该行后，根据空格对其进行拆分。

```
 String[] arr =line.split("\\s+");
 SomeClass obj = new SomeClass();
 obj.setName(arr[0]);
 obj.setScore(Long.parseLong(arr[1]));
 obj.setAge(Integer.parseInt((arr[2]));
 list.add(obj); 
```

# python - 连续读取python中的前3行

> ID：13642344
> 
> 赞同：0
> 
> 时间：2012-11-30T09:31:53.753
> 
> 标签：python, python-2.7, python-2.6

我有一个巨大的文件，我想从中读取前 3 行并将它们放在另一个文件*new.txt*中。之后，再读3行，但不要从头开始，应该从第4行开始读3行。

```
 1st line
 2nd line
 3rd line
 4th line
 5th line
 6th line
 7th line
 8th line
 9th line
 10th line
 .... 
```

文件 new.txt 中的第一个输出将是：

```
 1st line
 2nd line
 3rd line 
```

文件 new.txt 中的第二个输出将是：

```
4th line
5th line
6th line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:36:27.087

像这样的东西 - 请记住，`i`您可以直接使用 file-obj 而不是。

```
from itertools import islice

r = range(20)
i = iter(r)

while True:
    lines = list(islice(i, 3))
    if not lines:
        break
    print lines

[0, 1, 2]
[3, 4, 5]
[6, 7, 8]
[9, 10, 11]
[12, 13, 14]
[15, 16, 17]
[18, 19] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:37:07.553

文件是迭代器，因此您所要做的就是将输入按三个项目分组。

该[`iterttools`模块](http://docs.python.org/2/library/itertools.html)附带了一个用于对迭代器进行分组的方法：

```
from itertools import izip_longest

def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

现在您可以将输入文件行分组为三组：

```
with open(inputfilename) as infile:
    for threelines in grouper(3, infile, ''):
        with open(outputfilename, 'w') as outfile:
            outfile.write(''.join(threelines)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:42:47.037

你也可以得到光标位置 `f.tell()`

您可以将光标移动到文件中的某个位置： `f.seek()`

在这里查看：http: [//docs.python.org/2/library/stdtypes.html#file.seek](http://docs.python.org/2/library/stdtypes.html#file.seek)

# php - CakePHP 从纯文本电子邮件中删除 HTML

> ID：13642347
> 
> 赞同：1
> 
> 时间：2012-11-30T09:31:56.060
> 
> 标签：php, cakephp

当在我的应用程序中添加新文章时，我在我的 cakephp 应用程序（2.2）中使用电子邮件组件向订阅的人发送电子邮件。

我使用 TinyMCE 允许管理员用户格式化文本，这会导致一些格式化的 HTML 保存在数据库中（这很好）但是我想通过电子邮件将整篇文章以电子邮件格式发送给选择的用户，包括 html 和纯文本。文章添加。这适用于 html 版本，但是如何从纯文本版本中剥离 html，同时将其保留在 html 版本中？到目前为止，这是我的代码：

```
public function admin_add() {
    if ($this->request->is('post')) {
        $this->NewsArticle->create();
        if ($this->NewsArticle->save($this->request->data)) {

            // If is a tech alart - send email
            if ($this->request->data['NewsCategory']['NewsCategory']['0'] == '2') {

                // Email users who have opted in to webform updates
                $usersToEmail = $this->NewsArticle->query("SELECT username, tech_email FROM users WHERE tech_email = 1");

                // Loop throughh all opt'ed in users
                foreach ($usersToEmail as $user) {

                    $this->Email->template = 'newTechAlert';
                    $this->Email->from    = 'Client Area <clientarea@someurl.co.uk>';
                    $this->Email->to      = $user['users']['username'];
                    $this->Email->subject = 'New Technical Alert';
                    // Send as both HTML and Text
                                            $this->Email->sendAs = 'both';

                    // Set vars for email
                    $this->set('techAlertTitle', $this->request->data['NewsArticle']['title']);

                    ##  NEED TO STRIP THE HTML OUT FOR NONE HTML EMAILS HERE - BUT HOW???
                    $this->set('techAlertBody', $this->request->data['NewsArticle']['body']);

                    $this->set('user', $user['users']['username']);
                    $this->Email->send();

                }

            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:57:01.613

我用：

```
$this->Email->emailFormat('both');

// Convert <br> to \n
$text = preg_replace('/<br(\s+)?\/?>/i', "\n", $html);
// Remove html markup
$text = trim(strip_tags($text));
// Replace multiple (one ore more) line breaks with a single one.
$text = preg_replace("/(\r\n|\r|\n)+/", "\n", $text);

$this->Email->viewVars(compact('text', 'html')); 
```

请注意，如果您使用 foreach，则应在每次运行后重置电子邮件类以避免出现问题：

```
$this->Email->reset(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:41:48.923

您可以使用 php`strip_tags`方法 [http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

```
//HTML VERSION
$this->set('techAlertHtmlBody', $this->request->data['NewsArticle']['body']);

//PLAIN TEXT VERSION
$this->set('techAlertPlainBody', strip_tags($this->request->data['NewsArticle']['body'])); 
```

您还可以将第二个参数传递给函数以仍然允许换行符或 href 标记。

# eclipse - Eclipses 代码分析不适用于 git 项目

> ID：13642353
> 
> 赞同：0
> 
> 时间：2012-11-30T09:32:11.560
> 
> 标签：eclipse, git, code-analysis, pep8

我已经将一个 git 项目导入 Eclipse 并且我想启用 PyDev\Code Analysis\Pep8 但它似乎不起作用......我想这是因为它是一个 git 项目而不是 Eclipse 工作区中的一个项目.. 如何我可以让 Pep8 代码分析工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-23T21:12:04.893

尝试右键单击Eclipse PyDev中克隆文件夹的文件夹->设置为源文件夹成为真正的eclipse项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-04T10:05:20.537

原因是 PyDev 只会对源文件夹下的文件进行代码分析（即：在项目 PYTHONPATH 中）。

请阅读入门手册：[http://www.pydev.org/manual_101_root.html](http://www.pydev.org/manual_101_root.html)，其中详细介绍了如何正确配置 PyDev 以使其正常工作。

# openssl - TLS 1.0 版中的已完成消息

> ID：13642354
> 
> 赞同：0
> 
> 时间：2012-11-30T09:32:12.900
> 
> 标签：openssl, ssl

JKJS

谁能告诉下一行中的 seq_num 是什么？

```
HMAC_hash(MAC_write_secret, seq_num + TLSCompressed.type + TLSCompressed.version + TLSCompressed.length + TLSCompressed.fragment)); 
```

RFC 2246 是这样定义的：

```
seq_num
   The sequence number for this record. 
```

但是 TLS 记录中的序列号在哪里？这些数字是在哪里生成并分配给记录的？

JKJS
哈迪克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:56:28.817

对于完成的记录，这些序列号将为零，从那时起，每条记录都会递增。

这些不与记录一起发送，但应由实现维护并用于为每个记录生成 HMAC。如果 TLS 记录乱序到达，则 MAC 验证将失败，因为对端用于 MAC 生成的序列号与自身期望的序列号不同。

# wcf - WCF - 在 WSDL 中单击其链接时无法显示 XSD

> ID：13642355
> 
> 赞同：0
> 
> 时间：2012-11-30T09:32:13.580
> 
> 标签：wcf, iis, xsd, wsdl

我有一个 WCF 服务，可以在我的本地计算机（托管在 IIS、WIN7 中）上正常工作。通过浏览器访问服务并显示 WSDL 和包含的 XSD 没有问题。将服务迁移到服务器会导致 WSDL 仍然正确显示，但无法访问 XSD。服务本身确实有效，所以这个服务还可以，对我来说有点神秘。

那么不显示 XSD 的原因可能是什么？（这是一个 Win Server 2008 并且 WS 托管在 IIS 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:09:57.440

我以某种方式找到了如何自己解决问题的答案。我将 ApplicationPool 的身份从**ApplicationPoolIdentity 更改为 LocalSystem**。现在它可以毫无问题地显示 XSD。因此，ApplicationPoolIdentity 的权限似乎存在问题，此[链接](http://bytes.com/topic/net/answers/620108-problem-wcf-webservice-hosted-iis-6-0-a)为我指明了正确的方向。

# java - 任何只能使用 64 位 JDK 编译的示例代码

> ID：13642362
> 
> 赞同：0
> 
> 时间：2012-11-30T09:32:39.383
> 
> 标签：java, 64-bit, 32-bit

是否有任何 Java 代码结构只能在您使用 64 位 JDK 时才能编译，或者在 Java 世界中这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:40:56.240

绝对不是在编译级别。Java 编译器不知道它将在哪种 JVM 中运行，并且 .class 文件中没有任何特定于 JVM 的内容。您可能会遇到的唯一区别是在运行时，但再一次，没有 Java 构造可以识别它。您可以阅读架构系统属性，但我很确定这不是您的目标。

至于评论中的“下一个问题”，JDK 贡献了完整的 Java 堆栈，包括源代码、编译的字节码和 JVM。您已经猜到，32 位和 64 位 JDK 之间的区别在于 JVM 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:45:12.243

Java 专门设计用于保护它的用户免受平台字长等因素的影响，无论是 32 位还是 64 位。一般来说，不可能用对此敏感的语言来构造任何东西。

因此，所有用 Java 编写的代码都应该在任何平台上编译。

此外，编译器应该能够在任何平台上运行，但由于它们可以用本机代码编写，因此在技术上可能存在阻止其中一个在特定平台上运行的错误在技术上是可行的。

使用 JNI（Java 本地接口）可能会出现一些问题，但这通常是在 C/C++ 代码调用和从 Java 调用中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:44:45.670

Java 编译器不知道底层硬件。

Java Source ----> Java Compiler ------> **Bytecode (Hardware Independent)**

字节码 -------> Java 运行时 -------->**机器级代码（平台/硬件相关）**

因此，在一个硬件上运行的 Java 代码不可能在另一个硬件上运行。

第二个问题的答案是，为了为字节码创建机器级代码，**运行时**必须知道底层硬件支持哪些操作。

32 位和 64 位机器的指令不同。

# asp.net-mvc - 在 HtmlHelper 中修改模型属性元数据

> ID：13642363
> 
> 赞同：2
> 
> 时间：2012-11-30T09:32:40.333
> 
> 标签：asp.net-mvc, entity-framework, data-annotations, modelmetadata

我正在尝试创建一个自定义 HtmlHelper，它显示格式化为给定小数位数的数值。我的想法是更改 ModelMetadata.DataFormatString 属性来实现这一点。是否可以以这种方式修改模型属性的元数据属性？我该怎么做？我的尝试（如下）没有按要求格式化数字。

```
 public static MvcHtmlString FormattedNumberDisplayFor<TModel>(this HtmlHelper<TModel> html, Expression<Func<TModel, decimal?>> expression, byte decimalPlaces)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
        string format = string.Format("{{0:f{0}}}", decimalPlaces);
        metadata.DisplayFormatString = format;
        return html.DisplayFor(expression);
    } 
```

我当然可以在同一个 HtmlHelper 中以不同的方式获取格式化值，但我特别想知道是否可以在运行时动态调整模型元数据。

# ruby-on-rails - 为共享样式表创建 gem 并在 Rails 应用程序中使用它

> ID：13642365
> 
> 赞同：5
> 
> 时间：2012-11-30T09:32:44.310
> 
> 标签：ruby-on-rails, ruby, gem, stylesheet, sass

我正在尝试创建一个 gem 来放置我所有的常用样式表。我不知道如何在 Rails 应用程序中导入样式表。这是我到目前为止所做的（遵循[本指南](http://www.zurb.com/article/814/yetify-your-rails-new-foundation-gem-and-)）：

1.  我跑了`bundle gem apple_core`。

2.  我修改了 apple_core.rb 以包含一个 Rails 引擎类，如下所示：

    ```
    require "apple_core/version"

    module AppleCore
      class Engine < Rails::Engine
      end
    end 
    ```

3.  我使用创建了 apple_core 样式表目录`mkdir -p lib/apple_core/app/assets/stylesheets/apple_core`。

4.  我在 apple_core 样式表目录中创建了一个索引文件，并在其中添加了以下内容：

    ```
    /*
     *= require_self
     *= require_tree .
     */ 
    ```

5.  我在同一目录中创建了一个 test.css.scss 文件并添加：

    ```
    a
    {
      color: red;
    } 
    ```

6.  我为 gem 创建了一个 GitHub 存储库并推送它。

7.  在我的 Rails 应用程序中，我将 gem 添加到资产组中的 Gemfile。

8.  我跑了`bundle install`。

我尝试使用 将我的 gem 包含在我的一个文件中`@import "apple_core";`，但是当我尝试加载页面时收到`couldn't find file 'apple_core'`错误消息。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:36:17.820

您只需像在 rails 项目中一样镜像 gem 中的目录。所以你可以把资产放到`app/assets`,`lib/assets`和`vendor/assets`. 然后，您必须确保这些文件包含在您的 gemspec 中，例如：

```
 s.files = Dir["{app,config,db,lib,vendor}/**/*"] + ["MIT-LICENSE", "Rakefile", "Readme.md"] 
```

所以路径应该是`vendor/assets/stylesheets/apple_core`。

# mediawiki - 如何编写将在第一个标题之前添加 html 的 Mediawiki 插件 - 应该使用什么钩子？

> ID：13642368
> 
> 赞同：0
> 
> 时间：2012-11-30T09:32:58.087
> 
> 标签：mediawiki

我想在浮动框中的 Mediawiki 页面上的页面标题附近放置一些信息，但找不到应该使用什么钩子来执行此操作。

```
<!-- Question is: How to inject code here? -->
<!-- firstHeading -->
<h1 id="firstHeading" class="firstHeading">Strona główna</h1>
<!-- /firstHeading --> 
```

你能帮忙吗？我不知道应该使用什么钩子或特定方法来修改 Mediawiki 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:01:20.453

我不知道一个简单的方法来做到这一点，但它是可以实现的。

1.  您可以设置 [[MediaWiki:Tagline]] 消息。例如，请参阅[此页面](https://en.wikipedia.org/w/index.php?title=New_York_City&action=view&uselang=qqx)。您可能希望使用`&uselang=qqx`param 来启用此类消息帮助。标语允许您轻松地在 h1 附近设置内容。
2.  您可以使用客户端脚本来注入东西。这种技术实际上在 Wikipedias 上用于实现这一目标。但请记住，无法运行 JavaScript（可能包括 googlebot）的浏览器将无法看到它。
3.  写一个扩展，但这可能是一个矫枉过正。

可能还有其他方法，但我不知道它们。

# widget - 子部件在 Dojo 中不会渲染（高度为 0）

> ID：13642369
> 
> 赞同：2
> 
> 时间：2012-11-30T09:33:00.473
> 
> 标签：widget, dojo

看看这个简单的小提琴：

[http://jsfiddle.net/mercmobily/y4uG2/10/](http://jsfiddle.net/mercmobily/y4uG2/10/)

基本上我声明了一个小部件，并开始添加子小部件。有一次，我有子小部件“部分”，它是一个带有标签容器和子标签的模板化小部件。

主要小部件有：

```
'<div data-dojo-type="Section" data-dojo-props="title: \'Sub Widget\'" data-dojo-attach-point="section"></div>' + 
```

而那个“部分”小部件有：

```
 templateString: '' +
    '  <div>' +

    '    <div class="subWidget" data-dojo-type="dijit.layout.TabContainer" tabPosition: \'left-h\'" dojo-attach-point="tabCont" >' +

      '      <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="title: \'Second Widget one\'">Second Widget One</div>' +
      '      <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="title: \'Second Widget Two\'">Section Widget Two</div>' +

      '    </div>'+
    '    </div>' 
```

现在，我很难让子小部件“部分”正确渲染。在我现在的实际程序中，我玩过：

1.  做模板
2.  CSS 中的高度属性
3.  从主小部件捕获 resize() 并在子小部件中调用 resize()

（关于第（3）点，我不得不做类似的事情：

调整大小：函数（）{ this.inherited（参数）；console.log("在调用的主小部件中调整大小！"); this.settingsTab.resize(); }

在这一点上，我要疯了，因此问题是：什么是*公认*的、*正常*的和*常见的*方法来确保在你实例化主小部件时渲染子小部件？

另外，我是否需要为我曾经使用过的每个标签容器指定 height:100% ？（看起来像）

谢谢！

# 更新

我更新了小提琴。此时，我向选项卡容器添加了“高度”。在那之后，调整浏览器窗口的大小实际上可以解决问题（！）。我不太清楚为什么我需要那个高度，但是好的。

[http://jsfiddle.net/mercmobily/y4uG2/16/](http://jsfiddle.net/mercmobily/y4uG2/16/)

当用户单击“损坏的”小部件时，我还做了一个 on()，并且 - 猜猜是什么 - 运行调整大小并且它呈现得很好。

这更没有意义。为什么我自己的小部件的行为与模板中定义的有任何不同？我开始了各种各样的理论：例如，高度无法计算，因为它没有显示出来。但是，SAME 应该适用于带有子选项卡的*另一个*选项卡，在左侧标记为“复杂”！

我没主意了。不完全是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T15:16:27.210

确实有一个错字，正如 Frode 所提到的，但是如果您希望您的标签内容出现在`SubWidget`.

我建议您更正错字并使您的小部件子类化`ContentPane`，而不是`_WidgetBase`解决这个问题，因为`ContentPane`他们知道如何调整自己的大小，如下所示：

```
declare('SubWidget', [ContentPane, _TemplatedMixin, _WidgetsInTemplateMixin], {

      templateString: ''... 
```

见[http://jsfiddle.net/psoares/YwWst/](http://jsfiddle.net/psoares/YwWst/)

顺便说一下，1.8中不需要指定`widgetsInTemplate : true`。添加`_WidgetsInTemplateMixin`就够了...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:59:28.220

SubWidget 中的 templateString 有错字。难道就这么简单吗？

```
...<div style="height:100%" data-dojo-type="dijit.layout.TabContainer" tabPosition: \'left-h\'" data-dojo-attach-point="tabContainer" >'... 
```

应该是：

```
<div style="height:100%" data-dojo-type="dijit.layout.TabContainer" data-dojo-props="tabPosition: \'left-h\'" data-dojo-attach-point="tabContainer" >' 
```

这似乎在你的小提琴中起到了作用：http: [//jsfiddle.net/y4uG2/18/](http://jsfiddle.net/y4uG2/18/)

# c++ - C/C++ 为什么对二进制数据使用 unsigned char？

> ID：13642381
> 
> 赞同：56
> 
> 时间：2012-11-30T09:33:40.083
> 
> 标签：c++, c, character-encoding, bytebuffer, rawbytestring

是否真的有必要`unsigned char`像在某些处理字符编码或二进制缓冲区的库中那样使用来保存二进制数据？为了理解我的问题，请查看下面的代码 -

```
char c[5], d[5];
c[0] = 0xF0;
c[1] = 0xA4;
c[2] = 0xAD;
c[3] = 0xA2;
c[4] = '\0';

printf("%s\n", c);
memcpy(d, c, 5);
printf("%s\n", d); 
```

两个`printf's`输出都`正确，十六进制`f0 a4 ad a2`的Unicode代码点的编码在哪里。`U+24B62 ()``

 `甚至`memcpy`还正确地复制了 char 所持有的位。

有什么理由可以提倡使用 of`unsigned char`而不是 a `plain char`？

在其他相关问题`unsigned char`中突出显示，因为它是 C 规范保证没有填充的唯一（字节/最小）数据类型。但正如上面的示例所示，输出似乎不受任何填充的影响。

我已经使用 VC++ Express 2010 和 MinGW 来编译上述内容。虽然 VC 给出了警告

`warning C4309: '=' : truncation of constant value`

输出似乎没有反映这一点。

PS 这可能被标记为[是否应该有符号的字节缓冲区或无符号字符缓冲区？](https://stackoverflow.com/questions/653336/should-a-buffer-of-bytes-be-signed-or-unsigned-char-buffer?rq=1)但我的意图不同。我在问为什么`char`应该输入一些似乎可以正常工作的东西`unsigned char`？

**更新：**引用 N3337，

`Section 3.9 Types`

> 2 对于普通可复制类型 T 的任何对象（基类子对象除外），无论该对象是否拥有类型 T 的有效值，构成该对象的底层字节（1.7）都可以复制到 char 数组中或无符号字符。如果 char 或 unsigned char 数组的内容被复制回对象，则该对象随后应保持其原始值。

鉴于上述事实以及我最初的示例是在`char`默认为Intel 的机器上`signed char`，我仍然不相信是否`unsigned char`应该首选`char`。

还要别的吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-11-30T10:06:26.977

在 C 中，`unsigned char`数据类型是唯一同时具有以下三个属性的数据类型

*   它没有填充位，所有存储位都有助于数据的值
*   没有从该类型的值开始的按位运算，当转换回该类型时，会产生溢出、陷阱表示或未定义的行为
*   它可以在不违反“别名规则”的情况下对其他数据类型进行别名，即通过不同类型的指针访问相同的数据将保证看到所有修改

如果这些是您正在寻找的“二进制”数据类型的属性，那么您绝对应该使用`unsigned char`.

对于第二个属性，我们需要一个类型，即`unsigned`。`UCHAR_MAX+1`对于这些，`256`在大多数 99% 的架构中，所有转换都是用模算术定义的，这里是 modulo 。更宽值的所有转换，`unsigned char`从而仅对应于截断到最低有效字节。

其他两种字符类型通常不一样。`signed char`无论如何，是有符号的，因此不适合它的值的转换没有很好的定义。`char`不固定为已签名或未签名，但在您的代码移植到的特定平台上，即使它在您的代码上未签名，它也可能已签名。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-30T10:46:50.397

比较单个字节的内容时，您会遇到大部分问题：

```
char c[5];
c[0] = 0xff;
/*blah blah*/
if (c[0] == 0xff)
{
    printf("good\n");
}
else
{
    printf("bad\n");
} 
```

可以打印“bad”，因为根据您的编译器，c[0] 将符号扩展为 -1，这与 0xff 不同

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-30T09:46:18.090

普通`char`类型是有问题的，不应该用于字符串以外的任何东西。主要问题`char`是你不知道它是有符号还是无符号：这是实现定义的行为。这使得`char`与`int`等不同，`int`始终保证被签名。

> 虽然 VC 给出了警告......常量值的截断

它告诉您您正在尝试将 int 文字存储在 char 变量中。这可能与有符号性有关：如果您尝试在有符号字符中存储值 > 0x7F 的整数，则可能会发生意想不到的事情。形式上，这是 C 中未定义的行为，但实际上，如果尝试将结果打印为存储在（有符号）char 中的整数值，您只会得到一个奇怪的输出。

在这种特定情况下，警告应该无关紧要。

**编辑 ：**

> 在其他相关问题中，unsigned char 被突出显示，因为它是唯一（字节/最小）数据类型，C 规范保证没有填充。

理论上，除了 unsigned char 和 signed char 之外的所有整数类型都允许包含“填充位”，根据 C11 6.2.6.2：

> “对于 unsigned char 以外的无符号整数类型，对象表示的位应分为两组：值位和填充位（后者不需要任何一个）。”
> 
> “对于有符号整数类型，对象表示的位应分为三组：值位、填充位和符号位。不需要任何填充位；有符号字符不应有任何填充位。”

C 标准故意含糊不清，允许这些理论填充位，因为：

*   它允许与标准 8 位符号表不同的符号表。
*   它允许实现定义的符号和奇怪的有符号整数格式，例如一个补码或“符号和幅度”。
*   整数可能不一定使用分配的所有位。

但是，在 C 标准之外的现实世界中，以下情况适用：

*   符号表几乎肯定是 8 位（UTF8 或 ASCII）。存在一些奇怪的例外，但干净的实现在实现大于 8 位的符号表时使用标准类型**wchar_t 。**
*   符号性始终是二进制补码。
*   整数总是使用分配的所有位。

所以没有真正的理由使用 unsigned char 或 signed char 只是为了避开 C 标准中的一些理论场景。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-30T10:13:38.177

字节通常用作无符号的 8 位宽整数。

现在，char 没有指定整数的符号：在某些编译器上，char 可以是有符号的，而在其他编译器中它可能是无符号的。

如果我在您编写的代码中添加位移操作，那么我将有一个未定义的行为。添加的比较也会有意想不到的结果。

```
char c[5], d[5];
c[0] = 0xF0;
c[1] = 0xA4;
c[2] = 0xAD;
c[3] = 0xA2;
c[4] = '\0';
c[0] >>= 1; // If char is signed, will the 7th bit go to 0 or stay the same?

bool isBiggerThan0 = c[0] > 0; // FALSE if char is signed!

printf("%s\n", c);
memcpy(d, c, 5);
printf("%s\n", d); 
```

关于编译期间的警告：如果 char 是有符号的，那么您正在尝试分配值 0xf0，它不能在有符号的 char 中表示（范围 -128 到 +127），因此它将被转换为有符号的值（- 16）。

将 char 声明为 unsigned 将删除警告，并且在没有任何警告的情况下进行干净的构建总是好的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-30T09:45:34.820

普通类型的签名`char`是实现定义的，因此除非您实际处理字符数据（使用平台字符集的字符串 - 通常是 ASCII），通常最好使用`signed char`或明确指定签名`unsigned char`。

对于二进制数据，最好的选择很可能是`unsigned char`，特别是如果将对数据执行按位运算（特别是位移，对于有符号类型的行为与无符号类型的行为不同）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-30T09:44:47.953

> 我在问为什么应该输入 unsigned char 似乎与 char 一样好用的东西？

如果您做的事情在标准意义上不“正确”，那么您将依赖未定义的行为。你的编译器今天可能会按照你想要的方式来做，但你不知道它明天会做什么。你不知道 GCC 做什么或 VC++ 2012。或者即使行为取决于外部因素或调试/发布编译等。一旦你离开标准的安全路径，你可能会遇到麻烦。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-30T09:46:20.683

好吧，你怎么称呼“二进制数据”？这是一堆位，没有任何由软件的特定部分赋予它们的任何意义，这些部分称为“二进制数据”。什么是最接近的原始数据类型，它向这些位中的任何一个传达了缺乏任何特定含义的想法？我认为`unsigned char`。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-30T10:57:20.550

> 真的有必要像在某些处理字符编码或二进制缓冲区的库中那样使用 unsigned char 来保存二进制数据吗？

“真的”有必要吗？不。

不过，这是一个非常好的主意，并且有很多原因。

您的示例使用 printf，它不是类型安全的。也就是说， printf 从格式字符串而不是数据类型中获取格式提示。你可以很容易地尝试：

```
printf("%s\n", (void*)c); 
```

...结果是一样的。如果您使用 c++ iostreams 尝试相同的操作，结果会有所不同（取决于 c 的签名性）。

> 有什么理由可以提倡使用无符号字符而不是普通字符？

Signed 指定数据的最高有效位（对于 unsigned char 的第 8 位）表示符号。由于您显然不需要，您应该指定您的数据是无符号的（“符号”位代表数据，而不是其他位的符号）。`

# codeigniter - 如何使用 CodeIgniter 将上传的文件存储到文件夹中？

> ID：13642384
> 
> 赞同：1
> 
> 时间：2012-11-30T09:33:50.350
> 
> 标签：codeigniter

如何 使用 CodeIgniter将**上传文件存储到文件夹中？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:39:42.587

嘿试试这个代码公司控制器。这是当你在你的 vie 表单中点击上传按钮时的功能..

```
function sendresume()
{

    $config['upload_path'] = 'C:\xampp\htdocs\upload\application'; //path where to save in the systme
    $config['allowed_types'] = 'doc|docx|pdf'; //file types to accept while uplaoding
    $config['max_size'] = '10240';  //size limit

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());

        $this->load->view('upload', $error);
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        echo "Resume Successfully uploaded to database.............";
        $file = $data['upload_data']['full_path'];  //upload file path
            }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:02:33.477

请确保您的画廊文件夹必须与应用程序文件夹名称画廊一起位于根目录中

```
$config['upload_path']='./gallery/';
$config['allowed_types']='gif|png|jpeg|jpg';
$config['max_size']='100';
$config['max_width']='1024';
$config['max_height']='700';
$this->upload->initialize($config);
$this->upload->do_upload('upload_photo'); 
```

# c# - rtf 改变字体大小

> ID：13642387
> 
> 赞同：4
> 
> 时间：2012-11-30T09:33:51.863
> 
> 标签：c#, richtextbox, rtf

我正在尝试在 C#（Windows 窗体）应用程序的 RichTextBox 中执行编辑功能。我希望能够在脚本中选择任意数量的文本字符，然后更改目标字体特征。
我遇到的麻烦是每个字符的字体属性可能设置为不同的字体。在这种情况下，文本框会忽略我请求的事件。

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T01:16:22.420

看看这个： [为richtextbox更改字体而不丢失格式](https://stackoverflow.com/questions/16306184/changing-font-for-richtextbox-without-losing-formatting)

我认为这是同一个问题。LarsTech 的解决方案非常适合我。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-10T13:55:06.330

我有一个更改大小的代码：

```
RichTextBox1.Font.Size == new System.Drawing.Font(RichTextBox1.Font.Name, yoursize) 
```

如果您只想更改选定的文本大小：

```
RichTextBox1.SelectionFont.Size == new System.Drawing.Font(RichTextBox1.SelectionFont.Name, yoursize) 
```

希望它会有所帮助。

# java - Android - 在画布上绘制视图

> ID：13642388
> 
> 赞同：1
> 
> 时间：2012-11-30T09:33:56.590
> 
> 标签：java, android, c++, android-canvas

我尝试使用 Canvas 在 android 中绘制手指画。我已使用油漆为当前路径着色。使用撤消重做选项删除并显示路径。但撤消重做效果很好。如果我使用另一种颜色来绘制所有以前的路径都更改为当前颜色，我将使用红色进行绘制。

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.util.DisplayMetrics;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class CustomView extends View implements OnTouchListener {
    public Canvas mCanvas;
    private Path mPath;
    public Paint mPaint, mBitmapPaint;
    Bitmap mBitmap;
    Canvas canvas;
    TabletActivity tabletActivity;
    public ArrayList<Path> paths = new ArrayList<Path>();
    public ArrayList<Path> undonePaths = new ArrayList<Path>();

    private Bitmap im;

    public CustomView(Context context) {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);
        this.setOnTouchListener(this);
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(6);
        mCanvas = new Canvas();
        mPath = new Path();

        im = BitmapFactory.decodeResource(context.getResources(),
                                          R.drawable.ic_launcher);
        DisplayMetrics metrics = getContext()
                                    .getResources()
                                    .getDisplayMetrics();
        int w = metrics.widthPixels;
        int h = metrics.heightPixels;
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        // mBitmapPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC))
        // ;
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // mPath = new Path();
        // canvas.drawPath(mPath, mPaint);
        // canvas.drawColor(Color.TRANSPARENT);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        for (Path p : paths) {
            canvas.drawPath(p, mPaint);
        }
        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        undonePaths.clear();
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }

    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
            mX = x;
            mY = y;
        }
    }

    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        paths.add(mPath);
        mPath = new Path();
    }

    public void onClickUndo() {
        if (paths.size() > 0) {
            undonePaths.add(paths.remove(paths.size() - 1));
            invalidate();
        } else {

        }
    // toast the user
    }

    public void onClickRedo() {
        if (undonePaths.size() > 0) {
            paths.add(undonePaths.remove(undonePaths.size() - 1));
            invalidate();
        } else {

        }
        // toast the user
    }

    public boolean onTouch(View arg0, MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:56:02.550

正如 user603125 所说，目前您只有一个绘画对象，并且您使用该绘画绘制所有路径。请记住，在 onDraw 中，您每次都重新绘制*所有路径。*为了解决这个问题，您必须跟踪每条路径使用的颜色，例如在地图中并执行以下操作：

```
private Map<Path, Color> mPathColors = new HashMap<Path, Color>(); // map for path colors
private Color mCurrentColor; // color to paint current path with (has to be set somewhere)
...
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    for (Path p : paths) {
        mPaint.setColor(mPathColors.get(p);
        canvas.drawPath(p, mPaint);
    }
    mPaint.setColor(mCurrentColor);
    canvas.drawPath(mPath, mPaint);
} 
```

并将`touch_up()`当前颜色写入地图，如下所示：

```
private void touch_up() {
   ...
   paths.add(mPath);
   mPathColors.put(mPath, mCurrentColor);
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:08:33.307

您正在使用相同的绘制对象来绘制上一个路径以及当前路径。

```
 @Override
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    mPaint.setColor(Color.YELLOW);
    for (Path p : paths) {
        canvas.drawPath(p, mPaint);
    }
    mPaint.setColor(Color.RED);
    canvas.drawPath(mPath, mPaint);
} 
```

# jquery - 如何保护 HTTP REST API 免受恶意使用？

> ID：13642389
> 
> 赞同：1
> 
> 时间：2012-11-30T09:33:57.647
> 
> 标签：jquery, api, security, asp.net-web-api

我们正在与第 3 方一起开发 iPhone 应用程序。该应用程序将通过 HTTP 从 ASP.NET WebAPI 请求数据。大多数情况下，这些请求是只读的，没有副作用，但其中一些允许用户更改数据或发送电子邮件。如何保护 API 不被未使用我们应用的用户调用？包含一个简单的密码似乎无效，因为任何有权访问该应用程序的人都可以轻松嗅探它。

是否有标准机制或技术来防止此类问题？

**编辑：**添加一个简单的密码来请求但随后对 API 使用强制 HTTPS 是否足够？如果使用 HTTPS，也许添加密码并不能提高安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:40:04.997

一个简单的解决方案是在创建帐户时为每个用户生成一个随机 api 密钥，然后将其存储在应用程序的连接数据中。

然后，每个请求都必须使用 api 密钥进行签名。

它将允许您确保请求是从连接到您的应用程序的设备发送的，并将帮助您记录请求并了解哪个用户调用了哪个端点。

当然，如果用户在 wifi 网络上，如果您不使用 https，他可能会成为中间人的受害者，并且他的 api 密钥可能会被泄露。

如果您不希望 api 密钥在每个传出请求中“可见”，您可以传输用户 ID 和签名，该签名将是请求参数和 api 密钥的串联，散列到 md5 中。REST API 必须做同样的事情并在允许请求之前检查签名是否存在差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:23:31.820

如果您寻找重量级的 xml 解决方案，您可以使用自己的 CA 设置一些内部 PKI。并为每个用户颁发一个证书（存储在他们的手机上），然后您可以查看[XAdES](http://en.wikipedia.org/wiki/XAdES)。并为展开或封装类型签名创建验证逻辑。在过滤器中，在解析之前剥离签名，或者在给定的方法中手动执行此操作。当然还有用于传输保护的 SSL/TLS。

# matlab - MATLAB中的KNN分类-混淆矩阵和ROC？

> ID：13642390
> 
> 赞同：6
> 
> 时间：2012-11-30T09:34:01.037
> 
> 标签：matlab, knn, roc, confusion-matrix

我正在尝试使用不同的分类器（LDA、SVM、KNN）对包含两个类的数据集进行分类，并希望比较它们的性能。我通过修改先验概率为 LDA 制作了 ROC 曲线。

但是我怎样才能对 KNN 分类器做同样的事情呢？

我搜索了文档，发现了一些功能：

1.  `Class = knnclassify(Sample, Training, Group, k)`
2.  `mdl = ClassificationKNN.fit(X,Y,'NumNeighbors',i,'leaveout','On')`

我可以运行 (a) 并通过使用留一法交叉验证获得混淆矩阵，但不可能更改先验概率来生成 ROC？

我以前没有尝试过 (b)，但这会创建一个模型，您可以在其中修改 mdl.Prior。但我不知道如何获得混淆矩阵。

有没有我错过的选项或有人可以解释如何充分利用这些功能来获得 ROC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:06:39.550

这确实不是直截了当的，因为 k-nn 分类器的输出不是通过阈值化得出决策的分数，而只是基于多数票的决策。

我的建议：根据邻域中类的比率定义一个分数，然后将该分数作为阈值来计算 ROC。粗略地说，分数表示算法的确定程度；它的范围从 -1（-1 类的最大确定性）到 +1（+1 类的最大确定性）。

示例：对于 k=6，得分为

*   如果所有六个邻居都是 +1 类，则为 1；
*   -1 如果所有六个邻居都属于 -1 类；
*   0 如果将邻居的类别减半并且将邻居的类别减半，则为-1。

一旦你为每个数据点计算了这个分数，你就可以将它输入到一个标准的 ROC 函数中。

# silverlight - 调用 IsolatedStorageFile.OpenFile 时的第一次机会 FileNotFoundException

> ID：13642392
> 
> 赞同：0
> 
> 时间：2012-11-30T09:34:03.207
> 
> 标签：silverlight, isolatedstorage

在我的代码的某处，我有这一行：

```
return _store.OpenFile(path, fileMode); 
```

`fileMode`有时`FileMode.Create`有时`FileMode.Open`。_ 一切正常，我总是得到一个有效的流，如有必要，文件已正确创建。

但是，我刚刚在我的 VS 输出中发现，每次调用上述行所在的方法时，我都会收到以下消息：

> mscorlib.dll 中出现了“System.IO.FileNotFoundException”类型的第一次机会异常

创建文件时出现此错误，并且文件被覆盖（并且显然存在）时也会出现此错误。

我只是对这些错误感到好奇，因为一切都很完美。

谢谢，

**编辑：**与`new IsolatedStorageFileStream(...)`. 一切正常，但我仍然收到“第一次机会异常”消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:45:23.650

```
var isf = IsolatedStorageFile.GetUserStoreForApplication();
IsolatedStorageFileStream isfs;

if (!isf.FileExists(_filename))
    isfs = new IsolatedStorageFileStream(_filename, System.IO.FileMode.Create, isf);
else
    isfs = new IsolatedStorageFileStream(_filename, System.IO.FileMode.Open, isf);

var writer = XmlWriter.Create(isfs);
xml.Save(writer);

writer.Close();
isfs.Close();
isfs.Dispose();
isf.Dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:17:18.957

找到了答案。

这正是 VS 调试器的工作方式：对于被 {{catch}} 块捕获的每个异常，VS 输出中都会出现“第一次机会异常”消息。所以在这里，我们可以猜测，在内部，{{OpenFile}} 方法使用 try/catch 块来检查文件是否存在。

# c# - 查找屏幕共享应用程序的两个图像之间的差异

> ID：13642393
> 
> 赞同：4
> 
> 时间：2012-11-30T09:34:10.397
> 
> 标签：c#, image-comparison, screensharing, desktop-sharing

您好我正在编写一个客户端/服务器远程查看器（桌面共享）应用程序，其中桌面的屏幕截图通过套接字通过网络发送。我想通过获取两个图像之间的差异然后发送差异来减少传输的大小。另一方面，差异将与另一端的先前图像合并。

所以请任何人指导我如何完成这项工作。现在我仍然每次通过网络以编程方式发送屏幕的完整图像，而另一端的程序只显示该图像。我觉得巨大的数据正在通过网络传递，另一端的屏幕更新速度很慢。所以请告诉我如何比较两个图像并仅将差异发送到另一端的好方法。还告诉我如何将差异与另一端的实际图像合并。

1) 有很多免费代码和库可用于图像比较，但我只是不明白我应该使用哪一个，哪一个会更快进行比较。所以请指导我。

2）最重要的部分是如何仅通过网络发送差异并将差异与另一端的实际图像合并

我尝试了很多关于我的第 2 点的信息，但没有得到类似的信息。没有文章我发现谁能指导我如何仅通过网络发送差异并将差异与另一端的实际图像合并

所以我正在寻找针对我的第 2 点的深入讨论。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:32:32.917

You will have to follow three steps:

1.  **Create a difference (DIFF)** of the two consecutive images. Comparing the two images pixel per pixel will be very time consuming. You should utilize a well-established library like OpenCV; check out the Emgu CV library (http://www.emgu.com/) for .NET: [AbsDiff()](http://www.emgu.com/wiki/files/2.4.2/document/html/17b44e5d-44c9-9cc5-1418-e17c0ff64e3f.htm) should be the method you're looking for. The result will be something like DIFF = IMG2 - IMG1.
2.  Send the DIFF through the network. It's still a full image, but JPEG or PNG will utilize its full compression capability assuming it is a mainly black image, i.e. few changes. So these are actually three substeps: **Compress - Send - Decompress**.
3.  **Apply the DIFF** on the present image. The recipient can calculate the next image IMG2 = DIFF + IMG1\. This can be performed using EmguCV's [Add](http://www.emgu.com/wiki/files/2.4.2/document/html/86c38ddc-547b-3da3-8051-bb0f6934235b.htm) method.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T09:34:45.277

I know am very late responding but I found this question today

I have done some analysis on Image Differencing but the code was written for **java**. Kindly look into the below link that may come to help

[How to find rectangle of difference between two images](https://stackoverflow.com/questions/2704716/how-to-find-rectangle-of-difference-between-two-images/20116720#20116720)

The code finds differences and keeps the rectangles in a Linkedlist. You can use the linkedlist that contains the Rectangles to patch the differences on to the Base Image.

Cheers !

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-25T19:09:26.570

我的方法怎么样，我不确定它是否有用，我希望有人能暗示我正在朝着正确的方向前进。

我考虑将桌面流式传输到手机。我会使用带有网络 TCP 套接字的服务器-客户端模型。我考虑这样的模式（协议）。

**服务器：**

0)

**屏幕图像**- 表示为`unsigned char *rgba_array` **IMAGE_SIZE -> 宽度、高度**

1)

将图像大小**宽度、高度**发送给客户端。

2)

init **rgba_array**长度 <= 宽度 x 高度 x 4 字节（32 位图像）并且所有数组都归零。

0000 0000 0000 0000 0000 0000 0000 0000（示例像素 - 32 位）

3)

如果我有**新的屏幕图像（屏幕**截图？或其他方式），我会将其转换为`unsigned char *new_rgba_array`并进行**XOR**操作：

```
rgba_array XOR new_rgba_array => diff_rgba_array 
```

4)

比我只向客户发送这个`diff_rgba_array`压缩？JPEG？

5）回到服务器端的第3点）。

**客户：**

0)

获取**宽度和高度**- > init `rgba_array`with length <= width * height * 4 并将其归零

1)

得到`diff_rgba_array`表示与以前图像相比的变化并解压它？JPEG？

0011 1010 0110 0111 1110 0000 0100 0000（示例像素差异）

0 - 位表示**没有变化**

1 - 位表示**更改**为相反值

2)

将从服务器收到的更改应用`diff_rgba_array`到`rgba_array` **客户端**。我想我应该做下一个**XORing**。像这样

```
 10011101   10010101

  00001111   11111111 (XOR) 

= 10010010   01101010 
```

3)

返回到客户端的第 1 点）

# c# - 连接 GZipStreams 是否可行？

> ID：13642395
> 
> 赞同：0
> 
> 时间：2012-11-30T09:34:12.207
> 
> 标签：c#, compression, gzipstream

我构思了这个想法，将任意数量的小文本文件合并到一个带有 GZipStream 类的单个 zip 文件中。我花了几个晚上让它工作，但结果是最终的 zip 文件最终比文本文件连接在一起时更大。我隐约知道霍夫曼编码是如何工作的，所以我不知道这样做是否实用，或者是否有更好的选择。最终，我想要一个外部排序索引文件来映射每个 blob 以便快速访问。你怎么看？

```
// keep track of index current position 
long indexByteOffset = 0;
// in reality the blobs vary in size from 1k to 300k bytes
string[] originalData = { "data blob1", "data blob2", "data blob3", "data blob4" /* etc etc etc */};
// merged compressed file
BinaryWriter zipWriter = new BinaryWriter(File.Create(@"c:\temp\merged.gz"));
// keep track of begining position and size of each blob
StreamWriter indexWriter = new StreamWriter(File.Create(@"c:\temp\index.txt")); 
foreach(var blob in originalData){
    using(MemoryStream ms = new MemoryStream()){
        using(GZipStream zipper = new GZipStream(ms, CompressionMode.Compress)){
            Encoding utf8Encoder = new UTF8Encoding();
            byte[] encodeBuffer = utf8Encoder.GetBytes(blob);
            zipper.Write(encodeBuffer, 0, encodeBuffer.Length);
        }
        byte[] compressedData = ms.ToArray();
        zipWriter.Write(compressedData);
        zipWriter.Seek(0, SeekOrigin.End);
        indexWriter.WriteLine(indexByteOffset + '\t' + (indexByteOffset + compressedData.Length));
        indexByteOffset += compressedData.Length;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:43:48.970

不同的数据可以以不同的效果进行压缩。小数据通常不值得尝试压缩。一种常见的方法是允许“它是否被压缩？” 标志 - 进行推测压缩，但如果它更大，则存储原始压缩。该信息可以包含在索引中。不过，就我个人而言，我可能会倾向于选择一个文件——一个 .zip 文件，或者只是在每个文件之前将每个片段的长度包含为一个 4 字节块（或者可能是一个“varint”）**——**然后寻求第 n 个片段只是“读取长度前缀，解码为 int，寻找那么多字节，重复”的情况。您还可以保留其中的一部分用于“是否已压缩”。

但至于“是否值得压缩”：这取决于您的数据。

# ruby-on-rails - Ruby，Nokogiri：按属性值对节点集进行排序

> ID：13642397
> 
> 赞同：2
> 
> 时间：2012-11-30T09:34:27.350
> 
> 标签：ruby-on-rails, ruby, nokogiri

我想按标题值对 Nokigiri 节点集进行排序。尝试了以下代码，但排序不起作用：/有什么建议吗？

```
doc.xpath("//item").sort{|x,y| x.xpath('foo:attr[@name="title"]/@value').text <=> y.xpath('foot:attr[@name="title"]/@value').text } 
```

XML 示例：

```
<item>
  <foo:attr name="title" value="a"/>
</item>
<item>
  <foot:attr name="title" value="c"/>
</item>
<item>
  <foor:attr name="title" value="b"/>
</item> 
```

我正在寻找的输出：（节点集）

```
<item>
  <foo:attr name="title" value="a"/>
</item>
<item>
  <foot:attr name="title" value="b"/>
</item>
<item>
  <foor:attr name="title" value="c"/>
</item> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:12:21.007

如果我理解您的要求，您想删除它们，然后对数组进行排序，然后将它们添加回来：

```
xml = Nokogiri::XML.parse(data)
nodes = xml.root.css("item").remove
nodes.sort_by{ |node|
  node.css("attr")[0].attr("value"))
}.each{ |node|
  xml.root.add_child(node)
} 
```

# c# - 带有自定义标头的 Windows Phone 8 Http 请求

> ID：13642401
> 
> 赞同：3
> 
> 时间：2012-11-30T09:34:44.137
> 
> 标签：c#, http, httpwebrequest, webclient, windows-phone-8

我想从 Windows Phone 8 向 WCF 服务器发送一个 HTTP PUT 请求，并且为了识别我必须发送一个自定义标头。（假设“mycustomheader”=“abc”）

`WebClient`到目前为止我一直在使用，但`Webclient.Headers`似乎没有方法，所以除了枚举`Add`中的头之外，不可能发送头。`HttpRequestHeader`有什么办法可以做到这一点`WebClient`吗？

* * *

我看到可以使用`HttpWebRequest`类设置自定义标题，但我根本无法让它做任何事情。[我的测试代码（基本上是从http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream.aspx)复制的示例）：

```
public void dosth()
{
    HttpWebRequest wr = (HttpWebRequest)WebRequest.Create("http://mycomputer/message");
    wr.Method = "PUT";
    wr.ContentType = "application/x-www-form-urlencoded";
    wr.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), wr);
    allDone.WaitOne();
}

private static void GetRequestStreamCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
    Stream postStream = request.EndGetRequestStream(asynchronousResult);
    string postData = "{'Command': { 'RequestType' : 'Status', 'Test' : '1' }}";
    byte[] byteArray = Encoding.UTF8.GetBytes(postData);
    postStream.Write(byteArray, 0, postData.Length);
    postStream.Close();
    request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
}

private static void GetResponseCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
    HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
    Stream streamResponse = response.GetResponseStream();
    StreamReader streamRead = new StreamReader(streamResponse);
    string responseString = streamRead.ReadToEnd();
    streamResponse.Close();
    streamRead.Close();
    response.Close();
    allDone.Set();
} 
```

正如我在wireshark中看到的那样：我的电脑上没有任何东西（相同的url，一切都可以正常工作`WebClient`。除了自定义标题）。在调试中，我可以看到`GetRequestStreamCallback`被触发并运行。但它永远不会到达`GetResponseCallback`. 我发现的大多数关于此的东西都是指类似的方法`GetResponse()`似乎不可用

去这里的路是什么？是否有可能使其`HttpWebRequest`工作，或者是否有一些解决方法来设置自定义标头，`WebClient`或者是否有另一种更好的方法？

* * *

编辑：网络客户端代码：

```
WebClient wc = new WebClient();
wc.Headers[HttpRequestHeader.ContentLength] = data.Length.ToString();
wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
wc.UploadStringAsync(new Uri("http://mycomputer/message"), "PUT", data); 
```

将正确的数据发送到正确的 url。但是设置自定义标题似乎是不可能的。（甚至在标头中尝试了 \r\n ...但这是不允许的并引发异常）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:38:39.177

你在哪里设置标题？这是如何做到的：

```
request.Headers["mycustomheader"] = "abc"; 
```

# php - 使用 xdebug 进行 php 命令行调试

> ID：13642406
> 
> 赞同：1
> 
> 时间：2012-11-30T09:34:49.663
> 
> 标签：php, windows, debugging, command-line, xdebug

我是 xdebug 的新手，想知道是否可以从 Windows 命令行调试 php 脚本（应用断点）。我已经浏览了各种使用 xdebug 的示例，但他们都在谈论通过 IDE（Eclipse 或 Netbeans）进行调试。

所以我想知道这是否可以使用命令行（Windows）调试脚本。如果这是可能的，那么有人可以提供链接/ URL，提供逐步指导来实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:27:39.637

Xdebug 的 DBGp 协议相当简单。有一个可用于 Windows 的调试客户端“debugclient”，它曾经是从下载页面 (http://xdebug.org/download.php) 链接的，但似乎我忘记添加它了。它仍然可以通过[http://xdebug.org/files/debugclient-0.9.0.exe下载](http://xdebug.org/files/debugclient-0.9.0.exe)

为了使用它，您*确实*需要编写 DBGp 命令。对此的参考位于[http://xdebug.org/docs-dbgp.php](http://xdebug.org/docs-dbgp.php) - 这不是一件容易的事，但它确实有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:42:19.637

[xdebug 项目页面](http://xdebug.org/docs/remote)提到了一些客户端实现，它提到：

> Xdebug 2 与 DBGp 协议的简单命令行客户端捆绑在一起。

你试过那个吗？

# zend-framework - Zend 框架类“表”未找到错误

> ID：13642417
> 
> 赞同：0
> 
> 时间：2012-11-30T09:35:09.770
> 
> 标签：zend-framework, zend-db-table

我有基本的 zend 框架安装。我创建新的数据库表模型/表/User.php

```
<?php 

require_once 'Zend/Db/Table/Abstract.php';

class UserTable extends Zend_Db_Table_Abstract
{
    protected $_name = 'user';
} 
```

后来在 IndexController 中，我调用了表：

```
public function indexAction()
{

        $userTable = new UserTable();
} 
```

但我收到致命错误：致命错误：找不到类'UserTable'。我做错了什么？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:04:59.657

我认为问题在于命名。在 Zend 中，类是根据其名称自动加载的。

如果文件名为**User.php**，则类名应为**User**
如果文件位于**Models/Usertable.php**位置，则类名应为**Models_Usertable**

ZF 中有几种自动加载技术的方法。检查本手册[learning.autoloading.design](http://framework.zend.com/manual/1.12/en/learning.autoloading.design.html#learning.autoloading.design.naming)

# javascript - jQuery.Ajax 发布到 web 服务

> ID：13642421
> 
> 赞同：0
> 
> 时间：2012-11-30T09:35:15.330
> 
> 标签：javascript, jquery

我需要将数据发布到我的后端系统 (SAP)。我正在尝试使用以下代码：

硬编码 URL 示例：

```
 var dataString = ""
    //Add TO SAP.
     var aData =  
            jQuery.ajax({
                type: "POST",
                //contentType: "application/xml",
                url: "http://delyo001.you.local:8000/sap/bc/youconsulting/ws/rest/anonymous/z_names_post?firstname=testz&lastname=zefzef",  // for different servers cross-domain restrictions need to be handled
                data: dataString,
                //dataType: "json"

                success: function(xml) { // callback called when data is received
                    //oModel.setData(data);             // fill the received data into the JSONModel
                    alert("success to post");
                },

                error: function(xml) { // callback called when data is received
                    //oModel.setData(data);             // fill the received data into the JSONModel
                    alert("fail to  post");
                    alert(xml);
                }
            }); 
```

该网络服务通过 SOAPUI 工作。但不是通过这种方式。

谁能指导一下这段代码有什么问题。

亲切的问候，文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:57:47.493

尝试将标题设置为：

> 标头：{“内容类型”：“应用程序/x-www-form-urlencoded”}

# java - 在没有 ServletContext 的情况下使用 Guice 配置 Shiro

> ID：13642422
> 
> 赞同：3
> 
> 时间：2012-11-30T09:35:17.927
> 
> 标签：java, apache, jetty, guice, shiro

我正在使用*Guice*连接*Jetty*服务器，我想通过*Apache Shiro*添加一些安全性。

似乎 Shiro 需要配置一个*ServletContext*，但问题是我在配置时没有 ServletContext（例如在文档所述的*ServletModule*中）。*ServletContext*在*GuiceServletContextListener*中可用，但此时，我的注入器已经创建，所以安装*Shiro*模块为时已晚。

我尝试通过*Guice*提供程序（*Provider<ServletContext> ）将**ServletContext*提供给*Shiro* ，但仍然没有成功。我认为这个提供者将在创建后为 ServletContext 提供服务。这也给出了一个警告：

 **```
"com.google.inject.servlet.InternalServletModule$BackwardsCompatibleServletContextProvider get
WARNING: You are attempting to use a deprecated API (specifically, attempting to @Inject ServletContext inside an eagerly created singleton. While we allow this for backwards compatibility, be warned that this MAY have unexpected behavior if you have more than one injector (with ServletModule) running in the same JVM." 
```

创建注入器后如何安装 Shiro Web 模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:46:22.663

获取 ServletContext 的标准方法是扩展`GuiceServletContextListener`.

恕我直言，对 API 的主要监督。

[http://code.google.com/p/google-guice/issues/detail?id=603](http://code.google.com/p/google-guice/issues/detail?id=603)

这里还有一个教程：

[https://issues.apache.org/jira/browse/SHIRO-320](https://issues.apache.org/jira/browse/SHIRO-320)

（编辑：阅读评论后）您有两个选择：

1.  重构代码以仅在`GuiceServletContextListener`
2.  使用儿童注射器（棘手）

对于子注入器，只有子注入器创建的实例才会获得“Shiroed”。请记住：为子注入器创建的即时绑定将尽可能在祖先注入器中创建。

对于您的 Servlet 和过滤器，事情将按预期工作，但如果您在已经创建的 Injector 中有业务逻辑，他们将看不到 Shiro。您可以通过几种方式解决此问题...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:25:12.267

有同样的问题，并使用来自@Mircea 的信息，我所做的只是将 GuiceServletContextLister 转换为 ServletContext 换句话说

Guice.createInjector(new ShiroWebModule((ServletContext)this);

希望这会有所帮助**

# git - 只有少数提交的 Git 图表日志

> ID：13642432
> 
> 赞同：2
> 
> 时间：2012-11-30T09:35:45.797
> 
> 标签：git, logging, graph, commit

例如，我有一些提交：

*   v1.2.3（标签）
*   主（分）
*   发布/1.2（分支）
*   12345af（提交的 SHA-1）
*   ...

是否可以将图表日志链接起来，让我快速查看顺序和关系。就像是：

```
* f000000 - (master) Blabla
| ...
|\
| | ...
| * f000000 - (refs/remotes/origin/release/1.2) Blabla
| | ...
* | 12345af - Blabla
| | ...
| * f000000 - (refs/tags/v1.2.3) Blabla 
```

如何**隐藏**其他提交（与 simple 不同`git --graph --online ...`）。有`git branch --contains ...`很多帮助，但不能判断标签是在提交之前还是之后，和/或标签是否“包含”该提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:58:11.627

您是否尝试过开关“--simplify-by-decoration”？使用此开关，仅显示与分支或标签相关的提交。

# android - 如何在Android上实现识别器

> ID：13642433
> 
> 赞同：0
> 
> 时间：2012-11-30T09:35:46.250
> 
> 标签：android, voice-recognition

我的软件架构如下：
TabActivity 是一个 TabHost Activity。
它包含 2 个 ActivityGroup：AGroup 和 BGroup。
AGroup 包含 2 个活动：A1Activity 和 A2Activity。

我想在 A1Activity 中实现识别器。
我的代码如下：

```
 private static final int VOICE_RECOGNIZER_REQUEST_CODE = 0x1008;
public void Recognizera() {
        PackageManager pm = getPackageManager();
        List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);

        if(activities.size() != 0) {
            try {   
                Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
                intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "語音辨識");
                startActivityForResult(intent, VOICE_RECOGNIZER_REQUEST_CODE);
            }
            catch(Exception e) {
                e.printStackTrace();
            }
        }
}
@Override
protected void onActivityResult(int RequestCode, int ResultCode, Intent data) {
    switch(RequestCode) {
    case VOICE_RECOGNIZER_REQUEST_CODE:
        if(RequestCode == VOICE_RECOGNIZER_REQUEST_CODE && ResultCode == RESULT_OK) {
            ArrayList<String> results = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

            for(int i = 0; i < results.size(); i++) {
                System.out.println("results " + results.get(i));
            }
        }
        break;
    }
    super.onActivityResult(RequestCode, ResultCode, data);
} 
```

但它显示“未知问题”，如下图 URL。
![在此处输入图像描述](../Images/09116cfbd91aff27b024c056002d6469.png)
但在 logcat 中没有任何错误消息。
如何修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:48:07.200

发生这种情况是因为在语音识别过程中遇到了错误。参数将`ResultCode`是错误代码，[这里](http://developer.android.com/reference/android/speech/RecognizerIntent.html#RESULT_AUDIO_ERROR)的错误之一。首先找出该错误是什么，以便您可以进一步调查。

# visual-studio-2010 - 在构建后脚本中如何检查系统是 64 位还是 32 位

> ID：13642437
> 
> 赞同：1
> 
> 时间：2012-11-30T09:35:58.120
> 
> 标签：visual-studio-2010, shell, build-process, build-automation

在 Visual Studio 2010 中，在构建后脚本中，我需要将这些文件之一复制到“bin”目录：myLib32.dll 或 myLib64.dll

取决于我机器的架构。

有没有办法检查我正在使用的架构的脚本？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:05:55.240

如果您将此添加到需要该文件的项目的项目文件中，那么我认为它会满足您的需要：

它检查是否存在 syswow64 版本的程序文件 - 这在 32 位版本的 Windows 上是空的

```
<PropertyGroup>
    <OSBitness Condition="'$(ProgramW6432)' == ''">32</OSBitness>
    <OSBitness Condition="'$(ProgramW6432)' != ''">64</OSBitness>
</PropertyGroup>

<ItemGroup>
    <myLib Include="myLib$(OSBitness).dll" />
</ItemGroup>

<Target Name="AfterBuild">
    <Copy SourceFiles="@(myLib)" DestinationFolder="$(TargetDir)" />
</Target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:28:47.490

您在构建后的命令行中有 $(PlatformName) 可用，但这是您构建它的平台，不一定是您所在机器的平台。也许您可以利用 Windows 中的 PROCESSOR_ARCHITECTURE 环境变量？

# ruby - 如何检查包含的ID？

> ID：13642441
> 
> 赞同：0
> 
> 时间：2012-11-30T09:36:09.400
> 
> 标签：ruby, activerecord

我有 ActiveRecord 集合，并且我想在其中检查我的 ID。

```
@items_user_id = Item.select("DISTINCT user_id").where(:user_id => current_user.id) 
```

我检查

```
@items_user_id.include?(params[:id]) 
```

返回零

怎么了？

UPD 1：我需要什么 - param[:id] 包含项目的 id。用户只能编辑他们创建的项目。我想检查标识符池项目中的项目标识符是否是用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:42:13.400

**简而言之**：您将苹果与橙子进行比较。

**长答案**：

`@items_user_id = Item.select("DISTINCT user_id").where(:user_id => current_user.id)`此行将返回元素 `Array`。`Item`

params[:id] 可能会`String`在`Integer`数组中找不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:59:55.910

尝试从获得的数组中收集id然后检查..

```
@items_user_id.map(&:id).include?(params[:id]) 
```

确保 ids(string) 的数据类型与 params[:id] 匹配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:05:25.353

您所做的选择执行此查询：

```
SELECT DISTINCT user_id FROM items WHERE user_id = ? 
```

这将不会产生任何结果，或者会产生只有 user_id 的单行。

你真正想要的是什么？

# c# - 在 IRewriteProvider 类中使用缓存

> ID：13642444
> 
> 赞同：1
> 
> 时间：2012-11-30T09:36:21.937
> 
> 标签：c#, asp.net, caching

如何在我的 IRewriteProvider 中使用我网站的缓存？

我知道在类库中使用 HttpRuntime.Cache["Key"]，但在这种情况下，对于提供程序，缓存似乎始终为空，即使它在网站中获得了一个值。

关于如何解决这个问题有什么好的想法吗？谢谢。

# gtk - 如何复制和粘贴表格的列或行？

> ID：13642445
> 
> 赞同：0
> 
> 时间：2012-11-30T09:36:23.467
> 
> 标签：gtk, glade

我有一张表，每列重复*x*次。我可以复制并过去每个行元素*x*次，但这很乏味。有没有办法在林间空地复制和过去整个列（或行）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:07:08.563

是的：关闭 Glade，在您喜欢的编辑器中打开 XML 文件，然后复制/粘贴到那里。

# memory - CUDA：共享内存上的移位数组

> ID：13642447
> 
> 赞同：0
> 
> 时间：2012-11-30T09:36:27.843
> 
> 标签：memory, cuda, alignment, shared

我正在尝试将展平的 2D 矩阵加载到共享内存中，沿 x 移动数据，也沿 y 移动写回全局内存。因此，输入数据沿 x 和 y 移动。我有的：

```
__global__ void test_shift(float *data_old, float *data_new)

{

uint glob_index = threadIdx.x + blockIdx.y*blockDim.x;

__shared__ float VAR;
__shared__ float VAR2[NUM_THREADS];

// load from global to shared

VAR = data_old[glob_index];

// do some stuff on VAR 

if (threadIdx.x < NUM_THREADS - 1)
{
VAR2[threadIdx.x + 1] = VAR; // shift (+1) along x
}

__syncthreads();

// write to global memory

if (threadIdx.y < ny - 1)
{
glob_index = threadIdx.x + (blockIdx.y + 1)*blockDim.x; // redefine glob_index to shift along y (+1)
data_new[glob_index] = VAR2[threadIdx.x];
} 
```

对内核的调用：

```
test_shift <<< grid, block >>> (data_old, data_new); 
```

以及grid和blocks（blockDim.x等于矩阵宽度，即64）：

```
dim3 block(NUM_THREADS, 1);
dim3 grid(1, ny); 
```

我无法实现它。有人可以指出这有什么问题吗？我应该使用跨步索引还是偏移量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:05:52.820

`VAR`不应将其声明为共享，因为在当前形式中，当您从全局内存加载时，所有线程都会在彼此的数据上乱涂乱画：`VAR = data_old[glob_index];`.

您在访问时也有越界访问`VAR2[threadIdx.x + 1]`，因此您的内核永远不会完成（取决于设备的计算能力 - 1.x 设备没有严格检查共享内存访问）。

您可以通过检查对 CUDA 函数的所有调用的返回代码是否有错误来检测后者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:17:50.763

共享变量由单个块中的所有线程共享。这意味着您没有共享变量的 blockDim.y 组合，但每个块只有一个组合。

```
uint glob_index = threadIdx.x + blockIdx.y*blockDim.x;

__shared__ float VAR;
__shared__ float VAR2[NUM_THREADS];
VAR = data_old[glob_index];

if (threadIdx.x < NUM_THREADS - 1)
{
  VAR2[threadIdx.x + 1] = VAR; // shift (+1) along x
} 
```

这指示块中的所有线程将数据写入单个变量 (VAR)。接下来你没有同步，你在第二个赋值中使用这个变量。这将产生未定义的结果，因为来自第一个 warp 的线程正在从这个变量中读取，而来自第二个 warp 的线程仍在尝试在那里写一些东西。您应该将 VAR 更改为本地，或为块中的所有线程创建一个共享内存变量数组。

```
if (threadIdx.y < ny - 1)
{
  glob_index = threadIdx.x + (blockIdx.y + 1)*blockDim.x; 
  data_new[glob_index] = VAR2[threadIdx.x];
} 
```

在 VAR2[0] 中，您仍然有一些垃圾（您从未在那里写过）。threadIdx.y 在您的块中始终为零。

并避免使用 uint。他们有（或曾经有）一些性能问题。

实际上，对于这样简单的任务，您不需要使用共享内存

```
__global__ void test_shift(float *data_old, float *data_new)
{

int glob_index = threadIdx.x + blockIdx.y*blockDim.x;

float VAR;

// load from global to local
VAR = data_old[glob_index];

int glob_index_new;
// calculate only if we are going to output something
if ( (blockIdx.y < gridDim.y - 1) && ( threadIdx.x < blockDim.x - 1 ))
{
  glob_index_new = threadIdx.x + 1 + (blockIdx.y + 1)*blockDim.x;

  // do some stuff on VAR 
} else // just write 0.0 to remove garbage
{
  glob_index_new = ( (blockIdx.y == gridDim.y - 1) && ( threadIdx.x == blockDim.x - 1 ) ) ? 0 : ((blockIdx.y == gridDim.y - 1) ? threadIdx.x : (blockIdx.y)*blockDim.x );
  VAR = 0.0;
} 

// write to global memory

data_new[glob_index_new] = VAR;
} 
```

# pdf-generation - 用于创建标准 pdf 页面大小的网页尺寸

> ID：13642448
> 
> 赞同：0
> 
> 时间：2012-11-30T09:36:27.943
> 
> 标签：pdf-generation, wkhtmltopdf

我想从数据库中生成 40 页的一些报告，但首先我想生成一个包含 40 个报告的 html 文件，然后将 html 文件转换为 pdf。每个报告应该占用生成的 pdf 文档的一页。

每个 html 报告的尺寸应该是多少，以便当我转换包含 40 个报告的整个 html 页面时，每个报告恰好占据 pdf 文档的一页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:30:11.763

我只是让报告尽可能简洁，然后在每个报告之后强制分页

```
<p>This is raport 1</p>
<table>
    <tr><td>Line 1</td></tr>
    <tr><td>Line 2</td></tr>
    <tr><td>Line 3</td></tr>
</table>

<div class="EndOfRaport" style="page-break-before:always" />
<p>This is another raport</p>
<p>All is well in ponyville</p>

<div class="EndOfRaport" style="page-break-before:always" />
<p>This is a raport with a simple graph</p>
<img src="ponies.png" /> 
```

这样您就不必真正关心内容，并且可以确保每个报告都在它自己的页面上，或者如果它太长它会溢出到下一页。然后，如果需要，可以使用页眉和页脚添加与页面无关的元素。

# sphinx - 狮身人面像查询 - 正确的查询方式

> ID：13642450
> 
> 赞同：0
> 
> 时间：2012-11-30T09:36:45.643
> 
> 标签：sphinx

在我的应用程序中，我使用 MySQL 查询：

```
SELECT DISTINCT * FROM forum_topic \
        LEFT JOIN forum_post ON forum_post.id_topic = forum_topic.Id \
            WHERE MATCH (forum_post.content) AGAINST ('searching text') \
        AND !MATCH (forum_topic.topic_name) AGAINST ('searching text') \
        GROUP BY forum_topic.Id 
```

但现在我想迁移到狮身人面像。我在 DB 中创建了配置文件和表 sph_counter。现在我的配置看起来像这样：

```
source main
{
    type            = mysql
    sql_host        = localhost
    sql_user        = root
    sql_pass        =
    sql_db          = sphinx
    sql_port        = 3306  # optional, default is 3306
        sql_query_pre = SET NAMES utf8
        sql_query_pre = REPLACE INTO sph_counter SELECT 1, MAX(Id) FROM forum_post
        sql_query = SELECT * FROM forum_topic LEFT JOIN forum_post ON forum_post.id_topic = forum_topic.Id \
            WHERE forum_post.Id<=( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 )
            AND MATCH (forum_post.content) AGAINST ('searching text') \
            AND !MATCH (forum_topic.topic_name) AGAINST ('searching text')
            GROUP BY(forum_topic.Id)

    sql_attr_uint = id_topic
}

source delta : main
{
    sql_query_pre = SET NAMES utf8
    sql_query = SELECT * FROM forum_topic LEFT JOIN forum_post ON forum_post.id_topic = forum_topic.Id \
            WHERE forum_post.Id<=( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 )
            AND MATCH (forum_post.content) AGAINST ('searching text') \
            AND !MATCH (forum_topic.topic_name) AGAINST ('searching text')
            GROUP BY(forum_topic.Id)
}

index main
{
    source = main
    path = /var/data/main_sphinx
    charset_type = utf-8
}
index delta : main
{
    source = delta
    path = /var/data/delta_sphinx
    charset_type = utf-8
} 
```

这是我用 Sphinx 搜索的正确方式吗？还是我从 PHP 脚本执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:58:12.013

您没有将“查询”放在配置文件中。您希望 sphinx 索引包含您的所有文档。Sphinx 运行查询、离线和索引结果。然后，Sphinx 将针对其索引运行查询。

所以你实际上想要类似的东西

```
 sql_query = SELECT p.*,t.* FROM forum_post p INNER JOIN forum_topic p ON p.id_topic = t.Id \
        WHERE p.Id<=( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 ) 
```

不会建议 GROUP BY id_topic - 因为这意味着每个主题一个文档。这意味着 sphinx 每个线程只会看到一个帖子，因此大部分主题都无法搜索。

还移动了桌子，所以帖子是第一位的。因此 sphinx document_id - SELECT 列表中的第一列 - 是 post_id - 因为那是唯一的。

您将主题 ID 作为属性，因此如果需要，可以在 sphinx 中进行分组。

现在您可以使用此索引运行索引器，并对每个文档进行索引。

然后您对索引运行查询（例如您的“搜索文本”示例）：

```
$cl->setMatchMode(SPH_MATCH_EXTENDED);
$res = $cl->Query('@content searching text','index'); 
```

这样，您构建一个索引，然后针对它运行任意查询。

（使用@content 语法，意味着仅使用您的查询搜索内容列，即黄油，而不是搜索，然后将其从作者中排除。

# java - 在 Java 中解压缩文件时出现 ZipException

> ID：13642453
> 
> 赞同：5
> 
> 时间：2012-11-30T09:36:58.500
> 
> 标签：java, zip

我对使用 Java 处理 zip 文件完全陌生，我遇到了一个奇怪的情况。

这是我用于解压缩的方法：

```
public void unzip(File zipFile, File rootDir) throws IOException
{
    ZipFile zip = new ZipFile(zipFile);
    Enumeration<ZipEntry> entries = (Enumeration<ZipEntry>) zip.entries();

    while(entries.hasMoreElements()) {
        ZipEntry entry = entries.nextElement();
        java.io.File f = new java.io.File(rootDir, entry.getName());
        if (entry.isDirectory()) { // if its a directory, create it
            continue;
        }

        if (!f.exists()) {
            f.getParentFile().mkdirs();
            f.createNewFile();
        }

        /*BufferedInputStream bis = new BufferedInputStream(zip.getInputStream(entry)); // get the input stream
        BufferedOutputStream bos = new BufferedOutputStream(new java.io.FileOutputStream(f));
        while (bis.available() > 0) {  // write contents of 'is' to 'fos'
            bos.write(bis.read());
        }
        bos.close();
        bis.close();*/

        InputStream is = zip.getInputStream(entry);
        OutputStream os = new java.io.FileOutputStream(f);
        byte[] buf = new byte[4096];
        int r ;
        while ((r = is.read(buf)) != -1) {
            os.write(buf, 0, r);
        }
        os.close();
        is.close();
    }   
} 
```

但是，已引发 IOException 并且消息是：

信息 | 虚拟机 1 | 2012/11/30 01:58:05 | java.util.zip.ZipException：打开 zip 文件时出错

信息 | 虚拟机 1 | 2012/11/30 01:58:05 | 在 java.util.zip.ZipFile.open（本机方法）

信息 | 虚拟机 1 | 2012/11/30 01:58:05 | 在 java.util.zip.ZipFile.(ZipFile.java:127)

信息 | 虚拟机 1 | 2012/11/30 01:58:05 | 在 java.util.zip.ZipFile.(ZipFile.java:143)

有人可以帮我吗？

非常感谢。

***更新：***

我使用 Linux 作为测试环境。解压目录的权限是drwxr-xr-x –</p>

***更新02：***

通过采纳@heikkim 的建议，

我刚刚尝试在 linux 中使用 unzip 推荐，尝试手动解压缩我的文件。我有以下消息：

存档：TMA_Template.zip 警告：zipfile 注释被截断警告 [TMA_Template.zip]：zipfile 声称是多部分存档的最后一个磁盘；无论如何都尝试处理，假设所有部分已按顺序连接在一起。期待“错误”和警告......真正的多部分支持还不存在（即将推出）。错误 [TMA_Template.zip]: zipfile 中缺少 6366880279 字节（尝试处理）您已正确编译 UnZip）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:51:51.663

你可以试试这个方法：

```
private void unzip() throws IOException {
    int BUFFER = 2048;
    BufferedOutputStream dest = null;
    BufferedInputStream is = null;
    ZipEntry entry;
    ZipFile zipfile = new ZipFile("latest.zip");
    Enumeration e = zipfile.entries();
    (new File(root)).mkdir();
    while (e.hasMoreElements()) {
        entry = (ZipEntry) e.nextElement();
        //outText.setText(outText.getText() + "\nExtracting: " + entry);
        if (entry.isDirectory()) {
            (new File(root + entry.getName())).mkdir();
        } else {
            (new File(root + entry.getName())).createNewFile();
            is = new BufferedInputStream(zipfile.getInputStream(entry));
            int count;
            byte data[] = new byte[BUFFER];
            FileOutputStream fos = new FileOutputStream(root + entry.getName());
            dest = new BufferedOutputStream(fos, BUFFER);
            while ((count = is.read(data, 0, BUFFER)) != -1) {
                dest.write(data, 0, count);
            }
            dest.flush();
            dest.close();
            is.close();
        }
    }
} 
```

# debugging - kdevelop 调试器会在几个步骤后自动从进程中分离出来

> ID：13642462
> 
> 赞同：5
> 
> 时间：2012-11-30T09:37:30.843
> 
> 标签：debugging, gdb, kdevelop

我正在尝试在 Debian 6.0.6 上使用 KDevelop 4.0.1（在 KDE 4.4.5 和 gdb 7.0.1 上）调试一些 C++ 应用程序。无论我闯入代码的哪一部分，调试器都会在单步执行一些指令后自动分离。我在任何论坛上都没有找到有关此主题的任何内容。我在下面尝试了几件事。

1.  在 shell 上使用 gdb 进行调试工作得很好。
2.  尝试调试多个应用程序，但发现问题。
3.  重新安装 KDevelop 没有帮助。

我是否缺少一些可能导致此行为的配置？（我是 kdevelop 的新手）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:29:36.573

我的猜测是这与未初始化变量的漂亮打印有关。

许多修复程序已应用于 KDevelop 和 gdb，您应该考虑更新到更新的版本。

# php - 使用 PHP 对 JSON 进行分组

> ID：13642465
> 
> 赞同：0
> 
> 时间：2012-11-30T09:37:39.973
> 
> 标签：php, javascript, mysql, json

这是我的代码

```
<?php
$something = array(); 
while ($row = mysql_fetch_assoc($result)) { 
    $something[] = $row;
} 
mysql_close($con);
?>

<script type="text/javascript"> 
    some= <?php echo json_encode($something); ?>; 
</script> 
```

上面的代码会生成：

```
[{"id":"1","title":"Ray","author":"Ray","thumb":"some source","views":"10000"}] 
```

但我想生成一个像这样的json字符串：

```
[{"id":"1","title":"Ray","author":"Ray","image":{"cls":"image","thumb":"some source","views":"10000"}}] 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:41:21.267

`json_encode`编码您拥有的任何对象结构。如果您希望某些属性作为子对象，则必须在内存中创建此类对象。

例如，如果你有

```
$a = array("id"=>1, 
           "title"=>"Ray", 
           "image" => 
               array(
                 "thumb"=>"some source",
                 "cls"=>"image"
                )
           ); 
```

它将以您提到的类似方式在 json 中编码。

这意味着您必须循环遍历 mysql 结果并在之前创建新结构。然后调用 json_encode 就可以了。

# asp.net - 如何将 FormsAuthentication cookie 添加到 HttpClient HttpRequestMessage

> ID：13642466
> 
> 赞同：2
> 
> 时间：2012-11-30T09:37:42.250
> 
> 标签：asp.net, asp.net-mvc, unit-testing, asp.net-web-api, integration-testing

我正在尝试通过调用 FormsAuthentication.SetAuthCookie("someUser", false); 来验证内部集成测试。
之后我确实需要调用 WebAPI 并且不会收到未经授权的异常，因为我已经应用了授权属性。我正在使用此代码创建身份验证 cookie：

```
var cookie = FormsAuthentication.GetAuthCookie(name, rememberMe);
    var ticket = FormsAuthentication.Decrypt(cookie.Value);

    var newTicket = new FormsAuthenticationTicket(ticket.Version, ticket.Name, ticket.IssueDate, ticket.Expiration,
        ticket.IsPersistent, userData.ToJson(), ticket.CookiePath);
    var encTicket = FormsAuthentication.Encrypt(newTicket);

    /// Use existing cookie. Could create new one but would have to copy settings over...
    cookie.Value = encTicket; 
```

现在我想将此 cookie 添加到新 HttpClient 内的 HttpRequestMessage 中，并在集成测试中将其与我的常规请求一起发送。

我不知道如何将该身份验证 cookie 添加到 HttpRequestMessage ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:58:03.783

要操作 cookie，您需要使用[WebRequestHandler](http://msdn.microsoft.com/en-us/library/system.net.http.webrequesthandler.aspx)和`HttpClient`. 例如，

```
 var handler = new WebRequestHandler();
 var client = new HttpClient(handler);
 // use handler to configure request such as add cookies to send to server 
```

[CookieContainer](http://msdn.microsoft.com/en-us/library/system.net.http.httpclienthandler.cookiecontainer.aspx)属性将允许访问 cookie 集合。

另一方面，我怀疑在客户端上创建*FormsAuthentication* cookie 是否可行。客户端/服务器都需要相同的加密密钥。最好的方法是重放实际 Web API 的登录请求——很可能，它是一个带有用户凭据的登录页面的*POST 。*使用 Fiddler 等工具在浏览器上观察相同的内容，并在您的 http 客户端中构造相同的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T05:55:43.770

晚了将近 6 年，但仍然可能会有所帮助。基于此的解决方案： [https ://blogs.taiga.nl/martijn/2016/03/10/asp-net-web-api-owin-authenticated-integration-tests-without-authorization-server/](https://blogs.taiga.nl/martijn/2016/03/10/asp-net-web-api-owin-authenticated-integration-tests-without-authorization-server/)

首先，在创建 Owin TestServer 时，您必须创建 DataProtector：

```
 private readonly TestServer _testServer;
    public IDataProtector DataProtector { get; private set; }

    public Server(OwinStartup startupConfig)
    {
        _testServer = TestServer.Create(builder =>
        {
            DataProtector = builder.CreateDataProtector(
                typeof(CookieAuthenticationMiddleware).FullName, DefaultAuthenticationTypes.ApplicationCookie, "v1");

            startupConfig.Configuration(builder);
        });
    } 
```

然后像这样生成 cookie（使用上一步中创建的 DataProtector）：

```
 public string GeterateCookie()
    {
        var claims = new List<Claim>
        {
            new Claim(ClaimTypes.Role, "your-role"),
            new Claim(ClaimTypes.UserData, "user-data"),
            new Claim(ClaimTypes.Name, "your-name")
        };

        var identity = new ClaimsIdentity(claims, DefaultAuthenticationTypes.ApplicationCookie, ClaimTypes.Name, ClaimTypes.Role);

        var tdf = new TicketDataFormat(DataProtector);
        var ticket = new AuthenticationTicket(identity, new AuthenticationProperties {ExpiresUtc = DateTime.UtcNow.AddHours(1)});

        var protectedCookieValue = tdf.Protect(ticket);

        var cookie = new CookieHeaderValue("yourCookie", protectedCookieValue)
        {
            Path = "/",
            HttpOnly = true
        };

        return cookie.ToString();
    } 
```

确保设置所需的声明，根据提供给 UseCookieAuthentication 方法的设置初始化 ClaimsIdentity，并设置正确的 CookieName。

最后一步是将 CookieHeader 添加到您的请求中：

```
 public Task<HttpResponseMessage> RequestAsync(HttpRequestMessage request)
    {
        request.Headers.Add("cookie", GenerateCookie());
        return _client.SendAsync(request);
    } 
```

# mysql - 通过自定义函数对数据库中的查询结果进行排序

> ID：13642470
> 
> 赞同：1
> 
> 时间：2012-11-30T09:37:54.740
> 
> 标签：mysql, database, django, sorting

我想从数据库返回一个排序列表。我想使用的功能可能看起来像

```
(field1_value * w1 + field2_value * w2) / ( 1 + currentTime-createTime(field3_value)) 
```

这是`sort by popularity`我的应用程序的功能。

我想知道其他人是否如何在数据库中进行这种排序（比如 MySQL）

我最终将在 django 中实现这一点，但任何关于实现这一目标的总体方向/策略的评论都是最受欢迎的。

*   我是否定义了一个函数并为每个请求的行计算分数？
*   我是否为此分数留出一个字段并定期计算分数？
*   或者使用时间作为排序函数的变量看起来很糟糕？
*   其他网站如何实现“按人气排序”？

我放了时间变量，因为我希望更新的帖子得到更多关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:40:57.320

1.  > 我是否定义了一个函数并为每个请求的行计算分数？

    您可以这样做，但这不是必需的：您可以简单地将该表达式提供给您的`ORDER BY`子句（`1 + currentTime`分母的部分不会影响结果的顺序，因此我已将其删除）：

    ```
    ORDER BY (field1 * w1 + field2 * w2) / UNIX_TIMESTAMP(field3) DESC 
    ```

    或者，如果您的查询正在选择这样的评级，您可以只`ORDER BY`使用别名列名：

    ```
    ORDER BY rating 
    ```

2.  > 我是否为此分数留出一个字段并定期计算分数？

    我不知道你为什么需要定期计算（如上所述，分母的常数部分对结果的*顺序*没有影响）——但是如果你要将上述表达式的结果存储在它的自己的字段，然后执行`ORDER BY`操作会快得多（特别是如果该新字段被适当索引）。

# c++ - 断言失败 Auto_Ptr Not Deferencable

> ID：13642471
> 
> 赞同：0
> 
> 时间：2012-11-30T09:37:55.267
> 
> 标签：c++

我在 C++ 中使用 std::auto_ptr 下面是我的代码，

```
void fSample(std::auto_ptr<CFoo> pParam)
{
    CFoo* pFoo = pParam.release();
    fTodo(pFoo);
} 
```

上面的代码给了我**`Assertion failed: auto_ptr not derefencable`**运行时错误。

请指教。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:43:22.330

通过引用传递 auto_ptr。此外，不推荐使用 auto_ptr。使用 unique_ptr。

```
void fSample(std::auto_ptr<CFoo> &pParam) // <= Note the ampersand
{
    CFoo* pFoo = pParam.release();
    fTodo(pFoo);
} 
```

# git - 安装 Gitolite 时发生错误

> ID：13642474
> 
> 赞同：1
> 
> 时间：2012-11-30T09:38:02.183
> 
> 标签：git, gitolite, gitlab

我根据 [链接](http://sitaramc.github.com/gitolite/install.html#migr)指令成功下载了 Gitolite 文件。当我尝试运行 gitolite/install -ln 时，出现以下错误：

* * *

```
[root@Project1-CO mygit]# gitolite/install -ln
error: unknown option `dirty=-dt'
usage: git describe [options] <committish>*

--contains            find the tag that comes after the commit
--debug               debug search strategy on stderr
--all                 use any ref in .git/refs
--tags                use any tag in .git/refs/tags
--long                always use long format
--abbrev[=<n>]        use <n> digits to display SHA-1s
--exact-match         only output exact matches
--candidates <n>      consider <n> most recent tags (default: 10)
--match <pattern>     only consider tags matching <pattern>
--always              show abbreviated commit object as fallback 
```

* * *

请帮帮我，实际问题是什么？？？我正在使用 git 1.6.5，操作系统 Linux（32 位）（fedora - 17）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:42:32.350

你需要升级你的 git - 它很可能太旧了。在较新的 git 版本中，您缺少的`git describe` [选项 --dirty 支持。](http://www.kernel.org/pub/software/scm/git/docs/git-describe.html)

根据[gitolite site](http://sitaramc.github.com/gitolite/install.html#req)，git 必须至少是 1.6.6 版本。我会推荐 1.7.11 或 1.8。

# objective-c - UIDatePicker 不需要的行为

> ID：13642483
> 
> 赞同：-1
> 
> 时间：2012-11-30T09:38:43.013
> 
> 标签：objective-c, ios, uidatepicker

我用 Cut Down Timer 的样式创建了 UIDatePicker，然后添加了 12 分钟的间隔。它看起来像这样： ![在此处输入图像描述](../Images/2bf4fb08e000bcfa241a96fc4d5b3eaa.png)

然后我选择**1 小时 0 分钟**现在想看看选择了多少（在代码中）：

```
NSDateFormatter *dateformatter = [[NSDateFormatter alloc] init];
[dateformatter setDateFormat:@"HH:mm:ss"];
NSString *selected = [dateformatter stringFromDate:[CutdownDatePicker date]]; 
```

现在我打印一个**slected**的值，它显示**01:01:00**是 1 小时 1 分钟，但我选择了 0 分钟？

如果我选择 12、24、48 分钟，一切都很好，但如果我选择 0 分钟，它会加我 1 分钟。

请帮助解决这种不受欢迎的行为。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:30:33.067

这是一个倒计时日期选择器。不要问它`date`；这是没有意义的。求其`countDownDuration`。

# facebook - 为什么 FB Like 将错误的图像发布到 fb 墙上

> ID：13642487
> 
> 赞同：2
> 
> 时间：2012-11-30T09:38:58.083
> 
> 标签：facebook, image

[当点击 ie http://www.joanieart.com/collection.php?ix=15](http://www.joanieart.com/collection.php?ix=15)上的 fb like 按钮时，我想控制发布到 FB 的图像。

我很难让它发挥作用。阅读大量帖子但没有成功。

我试过了`meta property="og:image"`，`meta rel="image_src"`但它仍然选择了错误的图像。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:47:50.547

我不确定，但我认为元数据

```
 <meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/> 
```

是正确的解决方案。如果您已经尝试过，请尝试在此处强制刷新元数据插入页面链接[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

这是官方文档

> 您可以通过更新页面的标签来更新页面的属性。请注意，og:title 和 og:type 最初只能编辑 - 在您的页面收到 50 个赞后，标题变为固定，在您的页面收到 10,000 个赞后，类型变为固定。这些属性是固定的，以避免让已经喜欢该页面的用户感到惊讶。达到这些限制后更改标题或类型标签没有任何作用，您的页面将保留原始标题和类型。要使更改反映在 Facebook 上，您必须强制抓取您的页面。当页面的管理员单击“赞”按钮或将 URL 输入 Facebook URL Linter 时，页面会被抓取。您可以通过 cURL'ing linter 以编程方式强制抓取您的页面。

# php - php javascript alertbox 必须点击 2 次才能显示

> ID：13642492
> 
> 赞同：0
> 
> 时间：2012-11-30T09:39:41.393
> 
> 标签：php, javascript, html

我正在做的 php 是文本框一个空值它将打开一个警报框（我在这里使用 javascript）

这是我的代码

```
 <?php 
    include('config.php');

        if(isset($_POST['submit'])){
        $username=$_POST['username'];

    ?>

    <script>
        function validate(){
        if(document.forms[0].username.value==""){
          window.alert("You must enter both values");
          return false;
        }
        }
    </script>

    <?php
    }
    ?>

<html>
<div><p>Member Profile</p>
    <form action="testing.php" method="POST" onsubmit="return validate();">
    Username<br>
    <input class="user" type="text" name="username" id="username" /><br>

<input type="submit" name="submit" value="register" />
</form>
</div>

</html> 
```

问题是我必须在警报显示之前单击 2 次

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:43:16.500

这是因为脚本在 php`if(isset){}`块内，单击提交表单，生成脚本，然后第二次运行.. 试试这个设置：

```
<?php
    include ('config.php');

    if (isset($_POST['submit']))
    {
        $username = $_POST['username'];
    }
?>
<html>
    <head>
        <script>
            function validate () {
                if (document.forms[0].username.value == "") {
                    window.alert("You must enter both values");
                    return false;
                }
            }
        </script>
    </head>
    <body>
        <div>
            <p>
                Member Profile
            </p>
            <form action="testing.php" method="POST" onsubmit="return validate();">
                Username
                <br>
                <input class="user" type="text" name="username" id="username" />
                <br>

                <input type="submit" name="submit" value="register" />
            </form>
        </div>
    </body>
</html> 
```

编辑：

我已经将脚本标签移到了 head 标签内。我不确定将脚本放在外面是否有任何影响，但只是为了确保我已经移动了它。

第二次编辑：（强迫症开始了）

我添加了正文标签，不确定您是否复制并粘贴了此代码，但对我来说看起来很奇怪 :)

# reporting-services - ssrs 2008 为子组重复父组

> ID：13642497
> 
> 赞同：0
> 
> 时间：2012-11-30T09:39:54.620
> 
> 标签：reporting-services

![在此处输入图像描述](../Images/7add935ed0a9522ae3959bdc2a1554f2.png)

但我想实现这一点：

![在此处输入图像描述](../Images/e61ee847b29deea8d2c0811d7ecfe172.png)

任何想法？谢谢。年

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:14:18.880

您将“Grp”作为父组，将“Sg”作为子组，对吗？因此，在组外添加列“Grp”和“sg”并隐藏分组列。 ![在此处输入图像描述](../Images/31b4b9d728b640f3439024cfc20569f9.png)

按照上面的截图

1.  在设计窗格中添加表格
2.  首先为 3 列 OwnerID、Name 和 City 添加属性
3.  右键单击 ownerID 详细信息单元格并添加 ownerID 的父组，新组列将在此处创建为第一个突出显示的列。单击它并将子组添加为名称（将创建另一个组列）。
4.  最后隐藏两个组列。

# android - 如何在 Android cocos2d 中显示 plist 文件

> ID：13642502
> 
> 赞同：0
> 
> 时间：2012-11-30T09:40:13.277
> 
> 标签：android, android-emulator

你好，

我正在使用 cocos2d 做一个。我想使用 plist 文件显示动画。我尝试使用 plist 但我没有得到。

我的代码：

```
public class GamestartLayer1 extends CCColorLayer {

    CGSize winSize;
    CCSpriteFrameCache  cache;
    CCSpriteSheet spriteSheet;
    protected GamestartLayer1(ccColor4B color) {
        super(color);
        // TODO Auto-generated constructor stub
        winSize = CCDirector.sharedDirector().displaySize();
        CCSpriteFrameCache.sharedSpriteFrameCache().addSpriteFrames("anim_default.plist");
        spriteSheet = CCSpriteSheet.spriteSheet("anim_default.png");
        spriteSheet.setAnchorPoint(0, 0.5f);
        spriteSheet.setPosition(CGPoint.make(0, winSize.height/2));

        this.addChild(spriteSheet);
    }

    public static CCScene scene() {
        // TODO Auto-generated method stub
        CCScene scene = CCScene.node();
        CCColorLayer layer = new GamestartLayer1(ccColor4B.ccc4(255, 255, 255, 255));

        scene.addChild(layer);
        return scene;
    }
} 
```

但我正在写屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:48:58.130

您只是将帧添加到 spritesheet 并将 spritesheet 添加到图层。您需要使用类似的东西从 spritesheet 中提取帧（我习惯于 Objective-c，因此语法可能是错误的）`CCSpriteFrame frame = CCSpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName('framename');`，然后`ccanimation`从那个/那些帧创建一个 sprite 对象/

# android - 从设备卸载（！）启动服务的应用程序后，服务是否可能保留？

> ID：13642505
> 
> 赞同：0
> 
> 时间：2012-11-30T09:40:50.253
> 
> 标签：android, service, push-notification

为了更好地理解：

即使在卸载应用程序后，应用程序安装的服务是否可能仍保留在设备上？
我似乎找不到它，但即使在应用程序被卸载后，它也会显示垃圾邮件推送通知的服务附带的恶意软件。该服务是已安装的独立应用程序还是保留的真正“服务”？

关于这个问题是否在应用程序或其他服务停止后仍然存在的问题有很多。在这里，我的意思是真正从设备中卸载。

提前致谢！

[编辑：错字]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:42:21.807

如果服务在不同的 .apk 中 - 是。

如果服务在同一个 .apk 中 - 否。

# action - Facebook 错误地拒绝了 Action Tagging

> ID：13642507
> 
> 赞同：2
> 
> 时间：2012-11-30T09:40:54.683
> 
> 标签：action, facebook-opengraph, tagging

不确定这是否是发布此内容的最佳位置，但不确定我还能在哪里。

我的应用程序基本上是一个表格，他们填写该表格以进入活动的客人名单，因此他们选择活动（对象）并添加他们的详细信息以及将与他们一起的客人数量。在提交时，这会创建一个动作，即 Joe Blog 在某个活动的客人名单上。

由于与他们一起来的客人可能是他们在 Facebook 上的朋友，因此能够标记这些朋友以便他们知道他们也在客人名单上是有意义的。

然而，Facebook 拒绝了这一点，并表示......

> 您提交的操作标记属性不符合我们真实标记您与之共享体验的其他用户的要求。对于 Open Graph 操作，只能在两个用户都执行操作时使用操作标记附加属性。

据我所知，我的应用程序满足这些要求，因为被标记的人将分享经验，即 Joe Bloggs 在与朋友 1 和朋友 2 的活动的嘉宾名单上

希望来自 Facebook 的人能看到这一点并正确解释为什么它被拒绝，因为我不明白为什么（在他们的例子中）你可以和某人一起做菜谱，但不能和他们一起出现在客人名单上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:38:48.070

> 在提交时，这会创建一个动作，即 Joe Blog 在某个活动的客人名单上。
> 
> 由于与他们一起来的客人可能是他们在 Facebook 上的朋友，因此能够标记这些朋友以便他们知道他们也在客人名单上是有意义的。

没有。

动作标记应该标记在动作的*物理*位置并一起*执行*此动作的朋友。

“在客人名单上”没有实际位置，也不是你“承担”的任何事情——只是*在名单上*（所以我会质疑这是否是一个真正的“行动”，因为它不是*主动*，而是*被动*）。

[引用自文档](https://developers.facebook.com/docs/technical-guides/opengraph/tagging/#taggingpeople)：

> *“例如，你应该用它来表示，奥斯汀和罗斯在棒球场吃饭。不，奥斯汀会和罗斯一起在棒球场吃饭，因为那个人还没有采取行动。”</em>*

 *-

> 据我所知，我的应用程序满足这些要求，因为被标记的人将分享经验，即 Joe Bloggs 在与朋友 1 和朋友 2 的活动的嘉宾名单上* 

*你在这里说“<em>将*分享经验”本身就应该是一个线索——当乔和他的朋友们实际*参加*活动时，*这*可能是值得行动标记的。

对于您想要的，您应该查看[提及标记](https://developers.facebook.com/docs/technical-guides/opengraph/mention-tagging/)。

# mysql - 重复事件问题

> ID：13642511
> 
> 赞同：0
> 
> 时间：2012-11-30T09:41:09.177
> 
> 标签：mysql

我不知道是否已经发布了此类问题，但我无法在任何地方找到我的解决方案。

我正在用这种方法计算日期

```
SELECT date(DATE_ADD('2012-9-12',INTERVAL TIMESTAMPDIFF(month,'2012-9-12',now()) month)) as date; 
```

但这里有一些问题让我解释一下

这将输出**“2012-11-12”**，但这个日期已经消失，所以我希望输出大于当前日期**“2012-12-12”**

一般来说，我总是输出大于当前日期

请询问是否有任何疑问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:54:49.390

1.  由于您没有引用任何存储的数据，也许 MySQL 是这项工作的错误工具？

2.  您的表达式将*始终*返回小于或等于当前日期的日期。如果您总是希望输出*大于*当前日期，则必须在间隔中添加一个额外的月份：

    ```
    SELECT date(DATE_ADD(
             '2012-9-12',
             INTERVAL 1 + TIMESTAMPDIFF(month,'2012-9-12',now()) month
           )) as date; 
    ```

# c++ - 从 C++ 项目调用 MATLAB 或 Scilab 函数

> ID：13642513
> 
> 赞同：0
> 
> 时间：2012-11-30T09:41:11.543
> 
> 标签：c++, scilab

我正在尝试从我的 C++ 项目中访问一些[Scilab函数。](https://en.wikipedia.org/wiki/Scilab)我正在使用 Windows 7。我该怎么做。？

例如，

```
function  [r] = fun(a,b)
   r =a+b;
endfunction 
```

我如何告诉我的 C++ 项目，它应该运行 Scilab 函数“有趣”并给出参数 a=4，b=9。让我得到他们的价值？

如果有人为[MATLAB](http://en.wikipedia.org/wiki/MATLAB)这样做，我认为这将是相同的（不使用它的引擎）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:26:27.220

一个方法是使用与 MATLAB 非常相似的[Julia 。](http://julialang.org/)我不确定是否有可能编译到库中。该项目基于 LLVM，因此也许您可以生成 C 代码并将其与您的代码集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:05:53.380

You will need the Scilab runtime aside, but [call_scilab](http://help.scilab.org/docs/current/en_US/call_scilab.html) is probably what you are looking for.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:50:49.387

对于[MATLAB](http://en.wikipedia.org/wiki/MATLAB)，您可以使用[MATLAB 编译器](http://www.mathworks.com/products/compiler/)，您应该可以在 MATLAB 网站上找到一些示例。

# jsp - 找不到在“package.myBean”类型的 bean 中写入“java.lang.Integer”类型的属性“id”的方法

> ID：13642516
> 
> 赞同：2
> 
> 时间：2012-11-30T09:41:16.863
> 
> 标签：jsp, javabeans, jsp-tags

我正在使用 jsp 和 java bean 将表单元素插入到数据库表中。但是，每次我尝试使用标签设置 java bean 的整数属性时，都会出现上述错误。同时它正在为bean的字符串属性工作。

```
<jsp:setProperty name="newEmp" property="deptId" value='<%= Integer.parseInt(request.getParameter("deptId")) %>' /> 
```

如果我使用

```
<jsp:setProperty name="newEmp" property="*" /> 
```

deptId 值每次都设置为 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:04:33.823

setProperty 只能取 String 值

尝试这个

```
<jsp:setProperty name="newEmp" property="deptId" value="deptId" /> 
```

在你的bean中你可以有setter getter，它将deptID作为字符串。当你要插入数据库时​​解析它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-10T13:36:05.960

```
<jsp:setProperty name="newEmp" property="deptId" value="deptId" /> 
```

检查 bean 的 setter 方法内部传递的参数是否应该是***int***数据类型。如果它是***整数***，它将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-04T13:19:36.533

检查您的 bean 类是否省略了 setter 方法，在下面的示例代码中整数变量是可以的：

```
public int getDeptId() {
        return deptId;
    }

public class Produce {
    private String name="电吉他";
    private double price=1880.5;
    private int count=100;
    private String factoryAdd="吉林省长春市";

    public double getPrice() {
        return price;
    }

    public String getFactoryAdd() {
        return factoryAdd;
    }

    public String getName() {
        return name;
    }

    public void setCount(int count) {
        this.count = count;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getCount() {
        return count;
    }
}

<%@ page contentType="text/html;charset=UTF-8" language="java" %>

<html>
<head>
    <title>Title</title>
</head>
<body>
<jsp:useBean id="produce" class="net.cs30.Produce"></jsp:useBean>
<jsp:setProperty name="produce" property="name" value="洗衣机"/>
<jsp:setProperty name="produce" property="count" value="12306"/>
<div>
    <ul>
        <li>商品名称：&lt;jsp:getProperty name="produce" property="name"></jsp:getProperty></li>
        <li>厂址：&lt;jsp:getProperty name="produce" property="count"/></li>
    </ul>
</div>
</body>
</html> 
```

这是我输出的[屏幕截图](https://i.stack.imgur.com/df7zP.png)。

# c# - DataGridView - 使用 ContextMenu 删除项目

> ID：13642519
> 
> 赞同：0
> 
> 时间：2012-11-30T09:41:30.077
> 
> 标签：c#, winforms, datagridview, contextmenu, datasource

我目前正在开发一个`DataGridView`通过拖放存储 PDF 文件的方法。用户可以将文件添加到文件中`DataGridView`，并将 PDF 存储到容器中。

然后我想实现一个`ContextMenu`允许用户通过右键单击它并选择目标选项来打开或删除 PDF 的功能。

选项“打开”通过`HitTest(x, y)`使用`CursorPosition`.

我的问题是，当您看到“删除”按钮被放置在下面的单元`HitTest(x, y)`格中时，它将把下面的单元格传递给我，这不是我的目标。

**我试过的**

我已经通过捕获`CellContentClick`and`Click`事件进行了尝试，但是右键单击单元格不会触发这些事件。此外，通过捕获`CellMouseEnter`事件保存最后输入的单元格的选项也无法正常工作

***有没有可能知道哪个单元格被右键单击？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:50:56.310

在您的 dataGridView 中启用 Single Cell Selection 属性，然后单击上下文菜单，您可以获得选定的单元格

您可以通过

```
private void dataGridView_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        dataGridView.CurrentCell = dataGridView[e.ColumnIndex, e.RowIndex];
    }
} 
```

# d3.js - 用负值构建 D3js 面积图

> ID：13642522
> 
> 赞同：4
> 
> 时间：2012-11-30T09:41:38.280
> 
> 标签：d3.js

我们有一个带有负值的条形图示例...[带有负值的条形图](http://bl.ocks.org/2368837)

面积图有类似的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-09T18:06:08.107

这是一个古老的问题，但我认为我可以为其他登陆这里的人提供一些启示。设置 svg 区域时，只需将 y0 设置为图表 0 行位置。例如：

```
d3.svg.area()
  .x(function(d) {
    return x(d.x);
  })
 .y0(function() {
   return y(0);
 })
 .y1(function(d) {
   return y(d.y);
 }); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T01:11:01.123

当然，我根据 Mike Bostock 关于[可重用图表](http://bost.ocks.org/mike/chart/)的帖子创建了一个小提琴：http : [//jsfiddle.net/C5gYv/](http://jsfiddle.net/C5gYv/)

基本上我所做的是检查数据是正数还是负数，然后分别设置 y0 和 y1：

```
 area = d3.svg.area()
        .x(X)

    ...

        g.select(".area").attr("d",
            area.y1(function (d) {
                // the highest point
                if (d[1] <= 0) {
                    return yScale(0);
                } else {
                    return Y(d);
                }
            })
                .y0(function (d) {
                // the lowest point
                if (d[1] <= 0) {
                    return Y(d);
                } else {
                    return yScale(0);
                }
            })); 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-04T09:58:03.507

我已经更新了 @Hardbyte 的 JSFiddle，因为我认为它不合适。

这是更新的小提琴[新小提琴](http://jsfiddle.net/sachin4dotnet/C5gYv/31/)。

我改变的是 -

```
// Update the area path.
        if (showArea) {
            g.select(".area").attr("d",
            area.y1(function (d) {
                // the highest point
                return Y(d);
            })
            .y0(function (d) {
                // the lowest point
                return yScale(0);
            }));
        } 
```

# android - 如何在android应用程序中自动填充编辑文本？

> ID：13642527
> 
> 赞同：4
> 
> 时间：2012-11-30T09:42:00.833
> 
> 标签：android, android-edittext, autofill

我正在开发一个安卓应用程序。我在其中有一些产品和购买该产品的表格。在订单表格中，我有一个 Edit Text as Product（表示产品名称）。

在我的应用程序中，用户必须输入产品名称，但我想知道 EditText 字段是否可以像 Flipcart 中那样自动填充特定的产品。

有谁知道的，建议我...

提前致谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T09:46:22.667

当您想填充它时，只需调用（在本示例中从 XML 布局中读取它之后）：

```
EditText myTextBox = (EditText) findViewById(R.id.editBox);
myTextBox.setText("My Product Description"); 
```

如果您正在寻找的是他们开始输入后的自动完成，那么`AutoCompleteTextView`您最好的选择是替换 EditText 并提供自动完成功能

在 Android 开发者网站上有一个例子：http: [//developer.android.com/guide/topics/ui/controls/text.html#AutoComplete](http://developer.android.com/guide/topics/ui/controls/text.html#AutoComplete)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:47:10.170

您可以使用自动完成文本视图来建议您的所有产品名称，请参阅此示例[http://saigeethamn.blogspot.in/2010/05/auto-complete-text-view-android.html](http://saigeethamn.blogspot.in/2010/05/auto-complete-text-view-android.html)

或者您只想在应用启动时显示，使用提示

```
android:hint="@string/enterproduct" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:01:18.543

我不明白你.. Sooo。如果您想显示用户必须填写的文本，请使用提示。

```
 android:hint="Enter any Filpcart Item" 
```

或者，如果您需要自动完成文本，请使用上面的链接 @kumaand。

# python - 如何将图形从 IPython Notebook 导出到文件

> ID：13642528
> 
> 赞同：48
> 
> 时间：2012-11-30T09:42:04.327
> 
> 标签：python, matplotlib, ipython-notebook

我使用带有该`--pylab inline`选项的 IPython Notebook，因为我不希望绘图显示在不同的窗口中。现在我想将我在笔记本中看到的绘图保存为 PDF 或 PNG 文件。

一些代码示例使用

```
import matplotlib as plt

plt.savefig("figure.png") # save as png 
```

但这似乎不适用于内联模式。

当然，我可以简单地保存从浏览器生成的 PNG，但我想用一行 Python 来做到这一点。我也对 PDF 导出感兴趣。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-30T10:00:53.393

试试这个（注意文件被保存到默认的笔记本文件夹）：

```
plot(range(80))
xlabel('foo')
ylabel('bar')
legend(['myline'])
axis([0, 80, 0, 120])
savefig('sample.pdf') 
```

如果你想把`png`它改成`'sample.png'`.

请注意，`savefig()`调用应与绘图命令位于*同一笔记本单元格中。*

# php - PHP Mkdir没有递归执行？

> ID：13642529
> 
> 赞同：2
> 
> 时间：2012-11-30T09:42:11.643
> 
> 标签：php, mkdir

以下工作在 Windows 中：

```
mkdir('../my/folder/somewhere/on/the/server', 0777, true); 
```

我说的是[PHP mkdir](http://php.net/manual/en/function.mkdir.php)。

它完美地工作，并递归地创建子文件夹。但是，如果我在 linux 服务器上运行相同的命令，则不会创建文件夹。

以前我通过分解路径并一个一个地创建每个文件夹来解决这个问题。但我不想这样做，因为它应该在“resurive”标志设置为 true 的情况下工作。为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:53:07.080

对不起，但是除了`mkdir`命令本身之外肯定有一些问题。

这个小示例按预期工作，并在 Linux 上执行时为我递归创建目录：

```
#!/usr/bin/php
<?php
mkdir ('testdir/testdir2/testdir3',0777,TRUE);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:49:17.087

这是发现的东西

*   确保根路径存在
*   确保根路径可写
*   不要使用`..`总是使用真实路径...

例子

```
$fixedRoot = __DIR__;
$recusivePath = 'my/folder/somewhere/on/the/server';

if (is_writable($fixedRoot) && is_dir($fixedRoot)) {
    mkdir($fixedRoot . DIRECTORY_SEPARATOR . $recusivePath, 0, true);
} else {
    trigger_error("can write to that path");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-01T07:34:10.870

确保您的 PHP 用户（例如`www-data`）有权写入它尝试创建的任何文件夹的父文件夹。PHP 需要能够写入已经存在的最低值。

例如，在 的情况下`../my/folder/somewhere/on/the/server`，如果`../my`已经存在并且 PHP 能够写入`..`但不能写入`my`，`mkdir`则会失败。

如果您的用户是`www-data`，您可以使用`sudo chown -R www-data:www-data ../my`授予`my`其所有子文件夹的写入权限。

# php - facebook照片导入问题

> ID：13642534
> 
> 赞同：0
> 
> 时间：2012-11-30T09:42:25.630
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我制作了一个从 facebook 导入照片的应用程序。自 2012 年 2 月以来，我一直在使用它。但从最近 1 个月开始，它突然停止工作。不是将用户带到我在应用程序中提到的页面网址，而是将用户带到 facebook 登录页面。在检查时，我发现给出用户专辑列表的 facebook 链接给出了空白结果。1 个月前 facebook-php-sdk 有什么变化吗？还是Facebook身份验证的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:52:13.117

当 facebook 推出新的 php sdk 时，旧版本在 12 年 10 月自动弃用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:19:51.873

我在这个帖子里写了我的评论

单击下面的链接并浏览我的评论。也许它会帮助某人:)

[如何使用 php 将照片从 facebook 导入网站？](https://stackoverflow.com/questions/6429100/how-to-import-photos-from-facebook-into-a-website-using-php)

# macos - 如何在 64 位 Mac 机器上编译 32 位库（Mountain Lion）

> ID：13642536
> 
> 赞同：2
> 
> 时间：2012-11-30T09:42:37.253
> 
> 标签：macos, build, makefile, osx-mountain-lion, 32-bit

我想在我的 Macbook 上以 32 位编译 tesseract [http://code.google.com/p/tesseract-ocr/](http://code.google.com/p/tesseract-ocr/)。但我有一台 64 位 Mac OS Mountain Lion 机器。

有一个Makefile，我试过：

(1) $ ./configure --with-arch=i386 (2) $ $./configure --build=i386-apple-darwin --host=i386-apple-darwin --target=i386-apple-darwin

两者都没有工作。编译的库仍然是 64 位的。实际上对于 (2) 我看到，在运行 ./configure 之后，它会说“检查 i386-apple-darwin-g++ .. no”之类的内容，实际上它检查 i386 的所有内容最后都有一个“否”。但是编译成功了，只是库好像不是32位的。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:08:42.470

尝试使用 -m32 来指定在 CFLAGS 和 CXXFLAGS 中构建 32 位可执行文件。但是，10.7 和 10.8 的 MacOSX sdks 没有可链接的 32 位 i386 代码（仅 MacOSX10.6.sdk）。我建议使用 macports 在 Mac OS X 10.7+ 上安装/构建 tesseract 引擎。

# php - 浏览器中的 PHP 错误

> ID：13642538
> 
> 赞同：1
> 
> 时间：2012-11-30T09:42:47.260
> 
> 标签：php

我在下面的这段代码中遇到了问题。每当我从浏览器运行此文件时，它会在浏览器上显示相同的代码`load_file($target_url); foreach($html->find(‘a’) as $link){ echo $link->href." "; } ?>`，而不是所需的结果。我正在使用 xampp 开发一个网站。PHP 也已正确配置。

```
<?php
 include_once('/simple.php');

 $target_url = "http://www.example.com/";
 $html = new simple_html_dom();
 $html->load_file($target_url);
 foreach($html->find(‘a’) as $link){
 echo $link->href."<br />";
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:44:44.970

PHP 或您的服务器没有正确配置，因为它没有执行代码，而是简单地将其输出到浏览器。

您只看到后面的`load_file()`代码的原因是浏览器将该`>`行上的 解释为结束 HTML 标记。如果您在浏览器中查看-> 源代码，您将看到完整的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:47:15.280

由于某种原因，PHP 解析器似乎将 $html->load_file( 中的 -> 解释为好像它应该关闭 PHP 解析，从而将其余代码显示为 HTML。

它解释 -> 好像它是一个？>

服务器可能配置错误，或者某些奇怪的选项生效。

其他 PHP 文件如果不包含 -> 可能会正常工作，因此如果不使用对象

如果您的服务器上允许它们，您可以尝试替代语法：

```
<script language="php">  
echo "This is HTML script tags.";  
</script> 
```

或者 ASP 风格的语法

```
<%   
echo 'This is ASP like style';  
%> 
```

虽然丑陋它可能会解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:06:06.613

卷曲引号！卷曲引号！

他们显示该文件已被错误的程序（Word???）“处理”，因此还有另一个字符通常会被那些讨厌的软件修改，它是**DASH** (-)！您在 $html->load 中的破折号可能不是真正的破折号“-”，而是一些看起来相似的字符，例如长破折号“-”。看看区别：

```
----------
real dashes -

––––––––––
alternate dash – 
```

出于某种原因，某些解析器（ftp?webserver?php?）被这个意外的字符弄糊涂了，并输出一个 ? 反而！

还有这个 ？在 > 附近给出一个 ?> 关闭 PHP ！！！

使用适当的编辑器重写您的文件，只需删除破折号并再次写入它们即可。

# c++ - Setter 和 getter 的必要性

> ID：13642541
> 
> 赞同：1
> 
> 时间：2012-11-30T09:43:02.157
> 
> 标签：c++

这是一个新手问题。在我简单的学习石头剪刀布游戏程序中，我有单个游戏实例类。游戏实例类有几个私有成员，如总回合数、获胜数、平局数等。这些类成员仅用于公共游戏实例的类方法，用于启动和处理游戏。我应该按照良好的代码风格为我的班级成员创建特殊的私有 getter 和 setter 方法吗？在游戏处理方法中直接与类成员一起工作会更好吗？

```
class GameInstance{
    unsigned int m_totalTurns;
    unsigned int m_wins;
    unsigned int m_loses;
    unsigned int m_ties;
    int getWins() const;               // is it a bad idea?  
    int getLoses() const;              // is it a bad idea?  
    int getTotalTurns() const;         // is it a bad idea?  
    int getTies() const;               // is it a bad idea?  

    // some setters-like incrementing  // is it a bad idea?
    // same private members functions  // is it a bad idea?    
    // ....                            // is it a bad idea?  

    void finishGame();

public:
    explicit GameInstance():m_totalTurns(0), m_wins(0), m_loses(0), m_ties(0){}; 
    void startGame();
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:46:25.367

您可能会将吸气剂公开，否则没有任何意义。

对于任何 getter 或 setter，它们都是类接口的一部分。如果您不想在外部允许直接获取这些成员或设置它们，请不要公开 getter 和 setter。

对于你的，getter 可能是一个想法，setter 看起来可能是个坏主意，如果你愿意`addResult()`指定一个胜利、平局或失败，并在相关统计数据中添加一个。

作为单个 getter 的替代方法，您可能有一个“getGameStats()”，它一次性返回所有 4 个。

如果您询问的是 getter 而不是提供公共访问权限（而不是根本不提供访问权限），那么对于具有方法的类，您通常应该将所有数据成员设为私有并使用 getter，如有必要，使用 setter。调试使用它们的代码也更容易，因为您可以在访问变量的点插入断点。

在“纯数据”结构中，您可以公开成员。事实上，在这种情况下，您可能有一个“GameStats”结构，您将从 getGameStats() 函数返回。GameStats 本身只包含数字，您可以公开这些数字。但是，您的类中的 GameStats 实例应该是私有实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:46:20.600

我认为这是一个很好的方法。它隐藏了实现。编辑起来更简单。假设您有 100 个使用`getTotalTurns()`. 一天之内，您需要更改 getter 的逻辑。而且您将需要更改一个位置而不是 100 个。不要考虑性能。编译器可能会内联所有这些函数。正如@CachCow 所说，没有真正的理由将它们设为私有（setters/getters）。您可以使它们受到保护以授予派生类的访问权限。但大多数时候 getter/setter 是供公众使用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:01:25.867

如果你有单线程项目，主界面和与用户的交互都在 GameInstance 类中，则游戏过程中无需访问这些字段。游戏结束后，您可以通过 struct 将它们全部关闭：

```
struct GameInfo
{
    unsigned int m_totalTurns;
    unsigned int m_wins;
    unsigned int m_loses;
    unsigned int m_ties;
};

class GameInstance
{
private:
    GameInfo gameInfo;
public:
    GameInfo GetInfo() const;
}; 
```

这种方法仍然是安全的，但您不必编写烦人的 getter 数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:06:38.833

关于何时/为什么应该在这里使用 getter 和 setter 有一个相当好的讨论：
[SO Getters and Setters Question](https://stackoverflow.com/questions/565095/are-getters-and-setters-evil)

但它通常值得使用它们，即使它只是用于内部使用，它确保当您访问这些值时，您以统一的方式进行操作，确保在编辑它们时您遵守关于它们如何使用的规则应该修改。

基本上它有助于在大多数情况下使您的代码更清晰。

编辑：
我应该指出，在使用私有 getter 和 setter 时，它更多的是个人选择，所以没有真正的“错误”答案，除非有什么我不知道的

# c - 在网络驱动程序的 hard_xmit 中使用工作队列

> ID：13642542
> 
> 赞同：3
> 
> 时间：2012-11-30T09:43:02.027
> 
> 标签：c, linux-kernel, linux-device-driver

我们已经创建了自己的网络设备驱动程序。有一种情况，我们需要等待硬件准备就绪，然后才能在 tx 函数（使用 注册的函数`.ndo_start_xmit`）中发送任何数据。由于我们不能在原子上下文中休眠/等待，因此我们通过在 tx 函数中调度工作队列来实现一种解决方法。然后工作队列可以等待硬件准备好并发送数据。

有一个更好的方法吗？即`.ndo_start_xmit()`立即返回，但同时安排帧准备好时发送到硬件。

有关我们实施的其他信息：我们在安排工作队列之前调用`netif_stop_queue()`。`.ndo_start_xmit()`当工作队列处理程序被执行时，我们`netif_start_queue()`在将帧发送到硬件之后在它内部调用。这工作正常，但有时我们会收到此错误：

```
NOHZ: local_softirq_pending 08 
```

当然，这个过程中存在延迟，但它在我们当前的应用程序中运行良好。我们的网络芯片通过 SPI 连接到我们的处理器，并且可以像通过 SPI 一样接收以太网帧。这些以太网帧由芯片在物理介质上进一步传输。

我们在 imx233 上使用内核版本 2.6.31。

# javascript - 调整视差效果？

> ID：13642543
> 
> 赞同：0
> 
> 时间：2012-11-30T09:43:10.100
> 
> 标签：javascript, parallax

我已经四处寻找并询问了这个问题的解决方案，但到目前为止还没有运气。我希望有一个人可以帮助我。

我一直在根据我不久前找到的 [this][1] 教程研究视差效果。它做了它应该做的事情，因为所有元素都会根据您移动鼠标的位置左右移动。不过，如果可能的话，我想调整它，以便它根据鼠标的位置向左或向右平滑滚动。就像现在一样，它只有在鼠标移动时才会移动。我更愿意更改它，以便它以设定的速度连续滚动给定宽度的空间，无论是向左还是向右，这取决于鼠标相对于中心的位置。

这是我到目前为止的代码，它再次与我上面链接的教程的第一部分一样工作：

```
var headerDiv = document.getElementById("header");

var image1Div = document.getElementById("image1");
var image2Div = document.getElementById("image2");
var image3Div = document.getElementById("image3");
var image4Div = document.getElementById("image4");

var headerDivHeight;
var canStartParallax = false;
var canPositionDivsVertically = true;

// Detect if the browser is IE or not.
// If it is not IE, we assume that the browser is NS.
var IE = document.all?true:false

// If NS -- that is, !IE -- then set up for mouse capture
if (!IE) document.captureEvents(Event.MOUSEMOVE)

// Set-up to use getMouseXY function onMouseMove
document.onmousemove = getMouseXY;

// Temporary variables to hold mouse x-y pos.s
var tempX = 0;
var tempY = 0;

var objectArray = new Array();

window.onload = function()
{
    showAllOfTheContent();

    headerDivHeight = headerDiv.offsetHeight;

    fillObjectArray();
    setimage1ToTransparent();
    positionDivs();

    turnOffPreloaderDotAnimation();
    objectAnimation();
}

function showAllOfTheContent()
{
    document.getElementById("content").setAttribute("class", "");
}

function fillObjectArray()
{
    var image1X = { getX: function() {return 0.5 * windowWidth + 50} };
    var image1Y = 10;
    var image1Factor = 0.0;
    var image1Array = new Array();
    image1Array.push(image1Div, image1X, image1Y, image1Factor);
    objectArray.push(image1Array);

    var image2X = { getX: function() {return 0.5 * windowWidth - 202} }; //position div from half width of the page
    var image2Y = 0;
    var image2Factor = 0.20; //parallax shift factor, the bigger the value, the more it shift for parallax movement
    var image2Array = new Array();
    image2Array.push(image2Div, image2X, image2Y, image2Factor);
    objectArray.push(image2Array);

    var image3X = { getX: function() {return 0.5 * windowWidth - -160} };
    var image3Y = 23;
    var image3Factor = 0.60;
    var image3Array = new Array();
    image3Array.push(image3Div, image3X, image3Y, image3Factor);
    objectArray.push(image3Array);

    var image4X = { getX: function() {return 0.5 * windowWidth + 50} };
    var image4Y = 60;
    var image4Factor = 1.0;
    var image4Array = new Array();
    image4Array.push(image4Div, image4X, image4Y, image4Factor);
    objectArray.push(image4Array);

    var image5Div = document.getElementById("image5");
    var image5X = { getX: function() {return 0.5 * windowWidth + 500} };
    var image5Y = 400;
    var image5Factor = 0.85;
    var image5Array = new Array();
    image5Array.push(image5Div, image5X, image5Y, image5Factor);
    objectArray.push(image5Array);
}

// Main function to retrieve mouse x-y pos.s

function getMouseXY(e)
{
      if (IE) { // grab the x-y pos.s if browser is IE
        tempX = event.clientX + document.body.scrollLeft
        tempY = event.clientY + document.body.scrollTop
      } else {  // grab the x-y pos.s if browser is NS
        tempX = e.pageX
        tempY = e.pageY
      }  
      // catch possible negative values in NS4
      if (tempX < 0){tempX = 0}
      if (tempY < 0){tempY = 0}  

      moveDiv(tempX, tempY);

      return true
}

function moveDiv(tempXsent, tempYsent)
{
    if (canStartParallax == true)
    {
        var tempXreceived = tempXsent;
        var tempYreceived = tempYsent;

        if (tempYreceived <= headerDivHeight) //limit the mouse over area
        {
            for (var i=0;i<objectArray.length;i++)
            {
                var yourDivPositionX = objectArray[i][3] * (0.5 * windowWidth - tempXreceived) + objectArray[i][1].getX();
                objectArray[i][0].style.left = yourDivPositionX + 'px';
            }
        }
    }
}

function positionDivs()
{
    var verticalParallaxFactorMultiplyNumber = 2; //the bigger this number, the vertical gap between header object animation will be bigger too

    for (var i=0;i<objectArray.length;i++)
    {
        objectArray[i][0].style.left = objectArray[i][1].getX() + "px";

        if (canPositionDivsVertically == true)
        {
            if ((objectArray[i][0] == image2Div) || (objectArray[i][0] == image3Div) || (objectArray[i][0] == image4Div))
            {
                objectArray[i][0].style.top = objectArray[i][2] - ((1 + (verticalParallaxFactorMultiplyNumber * objectArray[i][3])) * windowHeight) + "px";
            }
            else if ((objectArray[i][0] == image1Div))
            {
                objectArray[i][0].style.top = objectArray[i][2] + "px";
            }
            else
            {
                objectArray[i][0].style.top = objectArray[i][2] + ((1 + (verticalParallaxFactorMultiplyNumber * objectArray[i][3])) * windowHeight) + "px";
            }
        }
    }
}

function setimage1ToTransparent()
{
    image1Div.style.opacity = 0;
    image1Div.style.filter = "alpha(opacity=" + 0 + ")";
}

function objectAnimation()
{
    var objectAnimationDuration = 2000;

    //animate preloader
    $(preloaderAndStringContainerDiv).stop().animate({top: (-1 * windowHeight) + "px"}, objectAnimationDuration, function() {hidePreloader()});

    for (var i=0;i<objectArray.length;i++)
    {
        if ((objectArray[i][0] == image1Div))
        {
            $(objectArray[i][0]).stop().fadeTo(objectAnimationDuration, 1);
        }
        else
        {
            if ((navigator.userAgent.match(/iPad/i) != null) || (navigator.userAgent.match(/iPhone/i) != null) || (navigator.userAgent.match(/iPod/i) != null)) //if using safari mobile device, never turn on parallax
            {
                $(objectArray[i][0]).stop().animate({top: objectArray[i][2] + "px"}, objectAnimationDuration, function() {canPositionDivsVertically = false});
            }
            else
            {
                $(objectArray[i][0]).stop().animate({top: objectArray[i][2] + "px"}, objectAnimationDuration, function() {canStartParallax = true; canPositionDivsVertically = false});
            }
        }
    }
}

function resizeHeader()
{
    positionDivs();
} 
```

有人可以给我建议吗？我真的很感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:15:33.347

目前 moveDiv 例程由 mouseXY 函数调用，该函数被设置为 mousemove 事件的处理程序。所以在你移动鼠标之前，什么都不会触发。

相反，你想使用 mousemove 来改变一些速度矢量，并使用一些触发器进入一个连续循环（我建议从 setInterval 开始），它使用这个速度矢量来调用 moveDiv。

由于您不希望在悬停移动时发生这种情况（否则当您将鼠标悬停在框上时它将首先疯狂旋转），请考虑在 mousedown 时进入循环，并在 mouseup 和 mouseout 时退出循环。

当您在此处制作动画时，请查看使用 requestAnimationFrame，这是新浏览器中支持平滑动画渲染的功能，您提供了一个重复执行的函数：

[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

对于这些方法中的任何一种，我建议您同时保留一个速度向量（由 mousemove 事件调整）和一个每帧更新的时间戳变量。您将无法预测对代码的调用之间的延迟，因此为了保持一致，您应该使用现在和最后一帧时间戳之间的增量来计算移动的距离。

# c++ - 在 C++ 代码中构建错误

> ID：13642547
> 
> 赞同：0
> 
> 时间：2012-11-30T09:43:15.767
> 
> 标签：c++

我有以下 c++ 代码，并且我在其中遇到构建错误。我无法找出错误，请任何人帮助。这是代码

```
#include<stdlib.h>
#include <iostream.h>
using namespace std;

class PropertyPortal;
class PropertyType;
class Commercial;
class Residential;
void main()
class PropertyPortal  
{
private:

        int NoOfUsers;
        int UAN;
        char* Name;

        public:
       void setNoOfUsers(int no); 
       void setUAN(int u);      
       void setName(int n); 
       int getNoOfUsers(); 
       int getUAN(); 
       char getName();
       int getPropertyInfo(); 
       //constructors of the class
       PropertyPortal(); 
       PropertyPortal(int, int, char);
       //destructor of the class
       ~PropertyPortal ();

       void setNoOfUsers(int no)
       {
                        NoOfUsers>=1;
                        }
                        void setUAN (int u);
                        {
                        NoOfUsers>=0;
                        UAN>=1;
                        Name=Null;
                        }
                        PropertyPortal (int no, int u, char* n)
                        {
                        NoOfUsers>=no;
                        UAN=u
                        Name=VU-Real-Estate;
                        }
                        PropertyPortal (int no, int u, char* n)
                        {
                        NoOfUsers>=no; 
                        UAN=u
                        Name=n;
                        }
                        void setNoOfUsers(int no)
                        void setUAN(int u)
                        void setName(char n)
                        int getNoOfUsers()
                        int getUAN()
                        char getName()    
                        int getPropertyInfo();
class PropertyType  
{
      private:
              char* City
public:
        void setCity(char c); 
        char getCity(char c); 
        void getPropertyType();
        PropertyType();
        PropertyType(char);
        ~PropertyType();
        PropertyType();
{
        City=Null
}
        PropertyType(char* cCity)
{
        City=cCity
        }
        };          
class Commercial:PropertyType     
{
private:
        int PropertyValue
public:
       void setPropertyValue();
       int getPropertyValue();
       void getPlots();
       Commercial();
       Commercial(char);
       ~Commercial();
};

class Residential:PropertyType     
private:
        int PropertyValue;
public:
       void setPropertyValue();
       int getPropertyValue();
       int getPropertyCategory();     
};
void main ()
{
cout<<"This is just a prototype of all classes";
cout<<endl;
system("PAUSE");
} 
```

我在网上遇到错误`2,32:2,10,103`请帮助我找出问题所在以及代码发生了什么。

**更新** ![在此处输入图像描述](../Images/3f9b84ac7141ce891780faf39a36a357.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:53:14.460

许多错误来自于在类中同时拥有函数声明和定义。做任何一个

```
class Foo
{
    public:
        int func();
};
int Foo::func() { return 5; } 
```

或者

```
class Foo
{
    public:
        int func() { return 5; }
}; 
```

但*不是*

```
class Foo
{
    public:
        int func();
        // ...
        int func() { return 5; }
}; 
```

我还看到您打算有两个构造函数，一个具有默认值，一个从创建者那里获取值。但是你这样做：

```
PropertyPortal (int no, int u, char* n)
{
    NoOfUsers>=no;
    UAN=u
    Name=VU-Real-Estate;
}
PropertyPortal (int no, int u, char* n)
{
    NoOfUsers>=no; 
    UAN=u
    Name=n;
} 
```

我怀疑你真的是说

```
PropertyPortal ()
{
    NoOfUsers=1;
    UAN=1;
    Name="VU-Real-Estate";
}
PropertyPortal (int no, int u, char* n)
{
    NoOfUsers=no; 
    UAN=u
    Name=strdup(n); // Remember to free() this later.
} 
```

实际上，最好将`char*`s 全部废弃，然后使用`std::string`，也许还可以阅读有关[初始化列表](http://www.parashift.com/c++-faq/init-lists.html)的信息。

# grep - 如何通过grep查找包含不同行上的两个关键字的文件？

> ID：13642549
> 
> 赞同：3
> 
> 时间：2012-11-30T09:43:16.000
> 
> 标签：grep, sh

Linux 内核源代码中有很多文件，`config/*`我想找到一个与我的开发板类似的文件。

所以我尝试：

```
egrep -l -e key1 -e key2 config/*

Sample config/file1:
    This is key1
    This is key2
Sample config/file2:
    This is key1
Sample config/file3:
    This is key2 
```

但结果要么是要么`key1`文件`key2`列表。我想要包含的结果，`key1` **或者** `key2` 是否有其他简单的 unix shell 可以生成结果？

在之前的示例中，我只想列出“file1”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-03T10:56:07.820

我的建议：

```
( grep -l key1 config/* ; grep -l key2 config/* ) |sort |uniq -c |grep '^ *2\>' |awk '{print $2}' 
```

首先`grep`打印所有包含 的文件`key1`，第二个`grep`打印所有包含`key2`，然后是 的文件`sort`，`uniq`第三个过滤器过滤*两次*`grep`列出的文件，即包含两个键。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:12:54.900

'grep -E 'pat1.*pat2|pat2.*pat1'' 是我常用的咒语。只有当这些模式以给定的顺序出现时，公理的解决方案才有效，“|” 正则表达式运算符允许搜索以任何顺序查找模式。*

# python - 手动提取列表中包含的部分字符串（解析）

> ID：13642551
> 
> 赞同：1
> 
> 时间：2012-11-30T09:43:25.830
> 
> 标签：python, list, parsing, urllib2, urllib

我知道有些模块可以完全简化此功能，但说我是从 python 的基本安装运行的（仅限标准模块），我将如何提取以下内容：

我有一个清单。此列表是网页的逐行内容。这是一个用于提供信息的模型列表（未格式化）：

```
<script>
    link = "/scripts/playlists/1/" + a.id + "/0-5417069212.asx";
<script>

"<a href="/apps/audio/?feedId=11065"><span class="px13">Eastern Metro Area Fire</span>" 
```

从上面的字符串中，我需要提取以下内容。feedId (11065)，在上面的代码中顺便说一下 a.id。“/scripts/playlists/1/”和“/0-5417069212.asx”。记住这些行中的每一行只是列表中对象的内容，我将如何提取这些数据？

以下是完整列表：

```
contents = urllib2.urlopen("http://www.radioreference.com/apps/audio/?ctid=5586") 
```

伪：

```
from urllib2 import urlopen as getpage
page_contents = getpage("http://www.radioreference.com/apps/audio/?ctid=5586")

feedID        = % in (page_contents.search() for "/apps/audio/?feedId=%")
titleID       = % in (page_contents.search() for "<span class="px13">%</span>")
playlistID    = % in (page_contents.search() for "link = "%" + a.id + "*.asx";")
asxID         = * in (page_contents.search() for "link = "*" + a.id + "%.asx";")

streamURL     = "http://www.radioreference.com/" + playlistID + feedID + asxID + ".asx" 
```

我计划将其格式化为 streamURL 应该 = ：

```
http://www.radioreference.com/scripts/playlists/1/11065/0-5417067072.asx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:02:25.193

我会用正则表达式来做到这一点。Python的`re`模块很棒！

但是，搜索包含所有页面文本的单个字符串更容易（也更快）（而不是逐行重复搜索）。如果可以，请`read()`在打开 URL 时获得的类文件对象上执行操作，而不是`readlines()`（或直接遍历文件对象）。如果你不能这样做，你可以使用`"\n".join(list_of_strings)`将这些行重新组合成一个字符串。

以下是一些适用于您的示例 URL 的代码：

```
from urllib2 import urlopen
import re

contents = urlopen("http://www.radioreference.com/apps/audio/?ctid=5586").read()

playlist_pattern = r'link = "([^"]+)" \+ a.id \+ "([^"]+\.asx)'
feed_pattern = r'href="/apps/audio/\?feedId=(\d+)"><span class="px13">([^<]+)'
pattern = playlist_pattern + ".*" + feed_pattern

playlist, asx, feed, title = re.search(pattern, contents, re.DOTALL).groups()

streamURL = "http://www.radioreference.com" + playlist + feed + asx

print title
print streamURL 
```

输出：

```
Eastern Metro Area Fire
http://www.radioreference.com/scripts/playlists/1/11065/0-5417090148.asx 
```

并非严格需要一次性完成所有匹配。如果需要，您可以使用`playlist_pattern`和`feed_pattern`分别获取两个部分。但是，将其中任何一个部分分开会有点困难，因为您将开始为某些部分遇到额外的匹配（`link = "stuff"`例如，有几个相同的部分）。

# python - 在 ZeroMQ/Tornado ioloop 或 Twisted 中使用 BluetoothSocket？

> ID：13642554
> 
> 赞同：3
> 
> 时间：2012-11-30T09:43:36.870
> 
> 标签：python, bluetooth, twisted, tornado, zeromq

我正在使用 PyBluez 通过蓝牙连接到设备。它工作得很好。该设备正在使用 SPP，我使用 BluetoothSocket (RFCOMM) 进行连接。

基本交互是：发送init命令->接收确认；发送开始命令 -> 接收连续数据；发送停止命令 -> ...

我需要能够从另一个应用程序控制应用程序：启动、停止......我在想 ZeroMQ 或者 Tornado 和 HTTP/REST ifc。

我不是很想把它做成一个多线程应用程序，因为我认为它有点过头了。我在 C#/.NET 中使用线程和它们的池进行了很多工作，但我有一种预感，这在这里并不是真正需要的。相反，我认为它会很混乱。

但是，我需要能够通过 ZeroMQ/REST/ 处理命令（例如“开始”、“停止”）......同时不断地接收数据并发送偶尔的数据包。

由于我对 Python 很陌生，我不确定如何实现这一点。我有几个想法：BluetoothSocket 可以连接到 ZeroMQ/Tornado IOLoop 吗？

我假设我可以使用 Twisted 完成几乎任何事情，但我并不真正需要 Twisted 提供的一切。如果我需要加入 Twisted，我会这样做。我实际上找到了 BluetoothSocket 的 Twisted[实现](https://github.com/proquar/twisted-stuff)。但是，我需要 Twisted 吗？

我试过使用 Tornado IOLoop。没有抛出异常，但另一方面没有数据被接收或发送：

```
def eventhandler(s, events, error = None):
    if events & ioloop.IOLoop.READ:
        print 'Socket read: %r' % s.recv(1024)
    elif events & ioloop.IOLoop.ERROR:
        print 'Socket error!'

events = ioloop.IOLoop.READ | ioloop.IOLoop.ERROR
self._loop.add_handler(self._socket.fileno(), eventhandler, events) 
```

我真的不知道我现在在做什么。我最终会找到一种方法，但需要一个关于前进方向的提示。

广泛的 Google-fu 没有找到太多有用的信息，所以我现在在这里问。

编辑：我目前正在查看“gevent”。至少看起来比 Twisted 简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:05:46.093

你应该只使用 Twisted。您真正的问题似乎是关于 Twisted 的规模和资源利用率；您是否会在应用程序中为使用它支付不合理的成本，无论是在 API 复杂性、内存、磁盘上的包大小、部署麻烦还是与您可能想要使用的其他库的冲突方面。

你不会的。

1.  API 复杂性：Twisted 的 API 很简单。与某些 FUD 不同，您无需学习数千个 API 即可有效地使用它：Twisted 的核心有一个非常精简的 API，它有几个独立的层和许多明确记录的每层之间的正式接口。如果您知道自己想知道什么（而且看起来确实如此），只要稍加指导，您就可以轻松掌握。此外，作为一个成熟的项目，社区中有很多人可以帮助您的用户跟上进度。
2.  内存使用：Twisted 一直非常小心地管理它的运行时依赖关系，并且只导入它需要的东西。加载反应器不会加载 IMAP 实现，所以只需导入您需要的内容，不用担心。
3.  包大小：[Twisted 是 2 兆字节](http://pypi.python.org/pypi/Twisted/12.2.0)。此外，如果您使用任何流行的 UNIX-y 操作系统（Linux、OS X、FreeBSD），您可能已经拥有 Twisted 操作系统包。在许多发行版上，它甚至已经安装了。
4.  部署麻烦：如果您要担心任何问题，这是要考虑的问题，但是与部署相关的问题确实非常小。“pip install Twisted”工作正常（现在，[只要你有一个 C 编译器](http://twistedmatrix.com/trac/ticket/3586)）。Twisted[可与 py2exe](https://stackoverflow.com/questions/169897/how-to-package-twisted-program-with-py2exe)、 py2app 和 Debian 打包[一起使用，其程度与 Python 中的任何东西一样](https://stackoverflow.com/questions/7275759/how-do-i-make-an-ubuntu-debian-package-for-a-twistd-twisted-plugin)。真的，任何人唯一遇到的问题就是插件系统，对于许多应用程序，你可以忽略它。
5.  图书馆冲突：你会没事的。Twisted 竭尽全力兼容任何其他事件循环库曾经提出的每一个愚蠢的想法，无论是 GUI 还是事件循环。你想使用 ZMQ 吗？ [去吧。](http://launchpad.net/txzmq) 龙卷风？ [当然，无论如何](http://cyclone.io)；整合是双向的。 [Tornado 本身就支持这种集成](http://www.tornadoweb.org/documentation/twisted.html)。想要使用 Twisted 的阻塞库，但您在主线程上并且不想阻塞？ [deferToThread](http://twistedmatrix.com/documents/current/api/twisted.internet.threads.deferToThread.html)已为您服务。想要使用阻塞库中的 Twisted 函数，并且*需要*阻塞？好的，只需[从线程进行阻塞调用](http://twistedmatrix.com/documents/current/api/twisted.internet.threads.blockingCallFromThread.html)。

我希望这能消除您对 Twisted “矫枉过正”的任何误解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:56:35.240

这是一个没有直接经验的观点，但是我做了一些研究，您在选择时需要考虑的是阻塞与非阻塞 IO。

从快速阅读来看，PyBluez 模块（库）不支持异步 IO，这意味着您最终需要深入研究库才能在 Tornado 或 Twisted 中正确处理所有读写位。

如果这是我的项目，我可能会做的是将 PyBluez 库放入它自己的线程中，然后将一些队列返回到 Tornado（我是 Tornado 粉丝）。现在只是如何将蓝牙事件传递到您的主 IOLoop 的问题。您确实有两个选择，将一个套接字连接到自己，因为 IOLoop 通常在选择中被阻塞。或者设置一个定时器，每 100 毫秒回调一次，以检查蓝牙队列上是否有任何需要处理的活动。

# c++ - 使用指针从 std::list 中删除项目

> ID：13642557
> 
> 赞同：0
> 
> 时间：2012-11-30T09:43:53.617
> 
> 标签：c++, list, pointers, stdlist

是否可以使用 .remove 并将对象作为指针从 std::list 中删除对象？

我对指针感到很困惑。例如，我有以下课程：

```
class AsteroidGen{
    public:
        std::list<Asteroid*> listAsteroids;
        void AsteroidGen::generateAsteroid(int amount, int delet);
        void AsteroidGen::DrawAsteroids();
}; 
```

那有一个指向我的小行星对象的指针列表。由于它是一个指针，我假设我可以使用指针遍历它并删除它。

在我的主类中，我创建了一个 AsteroidGen 实例并填充列表并绘制它。这一切都很好。然后我尝试从列表中删除与我的子弹相撞的项目之一：

```
bool CheckBulletCollision(Lazer lazer, AsteroidGen asteroids){
    bool collision = false;
    for each(Asteroid *c in asteroids.listAsteroids){
        Position pos = c->pos;
        float lazx = lazer.mPos.x;
        float lazy = lazer.mPos.y;
        float lazz = lazer.mPos.z;
        float distance = sqrt(pow(pos.x - lazx, 2) + pow(pos.y - lazy, 2) + pow(pos.z - lazz, 2));
        if( distance < 2.05){
            asteroids.listAsteroids.remove(c);
            lazergone = true;
            break;
        }
    }
    return collision;
} 
```

我尝试逐行浏览我的代码以查看出了什么问题，但列表项实际上并未在下一帧中删除。我可能没有正确使用指针，我仍然觉得它们很困难。

有人可以给我建议吗！告诉我是否需要添加更多代码，我认为这就足够了谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:49:59.487

您正在`AsteroidGen`按值传递给函数。这意味着制作了一个**副本**，并且该函数在本地副本上工作，该副本在函数结束时被丢弃。小行星确实从列表中删除，但从存储在*副本中的列表中删除。*

如果要修改`AsteroidGen`函数中的对象，必须通过引用传递：

```
bool CheckBulletCollision(Lazer lazer, AsteroidGen &asteroids) {
  // ... rest of code as before
} 
```

# sql - 选择查询需要作为功能

> ID：13642558
> 
> 赞同：0
> 
> 时间：2012-11-30T09:43:55.990
> 
> 标签：sql, sql-server

这是我需要作为 SQL 函数的选择查询，通过`INTSID`作为参数传递此查询返回一组记录。

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
        @query As nvarchar(max),    
        @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+ quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('tblHRIS_ChildDetails') and
               C.name not in ('intCHID', 'intsid')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name 
                         +'_'+ cast(t.rn as varchar(10)))
                    from 
                    (
                      select row_number() over(partition by intsid order by intCHID) rn
                      from tblHRIS_ChildDetails
                    ) t
                    cross apply sys.columns as C
                   where C.object_id = object_id('tblHRIS_ChildDetails') and
                         C.name not in ('intCHID', 'intsid')
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select col+''_''+cast(rn as varchar(10)) col, value
        from 
        (
            select nvrchildname,
            cast(nvrchildgender as nvarchar(250)) nvrChildGender,
            convert(nvarchar(250), dttchildDOB, 120) dttchildDOB,
            cast(nvrnominee as nvarchar(250)) nvrnominee,
            nvrchildoccupation,
             convert(nvarchar(250),  dttCreatedon, 120)  dttCreatedon,
               convert(nvarchar(250),  dttModifiedOn, 120)  dttModifiedOn,
                 convert(nvarchar(250),  nvrModifiedby, 120)  nvrModifiedby,
                                    row_number() over(partition by intsid order by intCHID) rn
          from tblHRIS_ChildDetails
          where intsid = 463
        ) x
        unpivot
        (
          value
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(value)
        for col in  ('+ @colspivot +')
      ) p'
  exec (@query) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:02:52.633

使用例如：

```
DECLARE @Site VARCHAR(1000) = '''Avonmouth'',''Lifton'''
DECLARE @Year VARCHAR(50) = '12'
DECLARE @Period VARCHAR(50) = '10'
DECLARE @Week VARCHAR(50) ='41'

DECLARE @SQL AS VARCHAR(MAX)

SELECT @SQL = 'select Production_Site, [Target],[Action],[Fail]'
SELECT @SQL = @SQL + ' from'
SELECT @SQL = @SQL + ' ('
SELECT @SQL = @SQL + ' select Production_Site, value, Period, YEAR, week'
SELECT @SQL = @SQL + ' from t_Pqe_Grocery'
SELECT @SQL = @SQL + ' unpivot ('
SELECT @SQL = @SQL + ' value'
SELECT @SQL = @SQL + ' for col in (Grocery_Packaging_And_Coding, Grocery_Measurable,'
SELECT @SQL = @SQL + ' Grocery_Appearance, Grocery_Aroma,'
SELECT @SQL = @SQL + ' Grocery_Flavour, Grocery_Texture)) unp'
SELECT @SQL = @SQL + ' ) src '
SELECT @SQL = @SQL + ' pivot '
SELECT @SQL = @SQL + ' ('
SELECT @SQL = @SQL + ' count(value)'
SELECT @SQL = @SQL + ' for value in ([Target], [Action], [Fail])'
SELECT @SQL = @SQL + ' ) piv'
SELECT @SQL = @SQL + ' where Production_Site IN (' + @Site + ') AND YEAR = ' + 
                     CONVERT(varchar(50), CONVERT(BIGINT, @Year)) + ' AND Period = ' + 
                     CONVERT(varchar(50), CONVERT(BIGINT, @Period)) + ' and Week = ' +   
                     CONVERT(varchar(50), CONVERT(BIGINT, @Week)) 
PRINT @SQL
EXECUTE (@SQL) 
```

# visual-c++ - 如何以编程方式 (C++) 将事件日志文件保存为 CSV？

> ID：13642564
> 
> 赞同：0
> 
> 时间：2012-11-30T09:44:22.683
> 
> 标签：visual-c++, windows-7, windows-xp, event-log

我想在 Windows XP 和 Windows 7 中将事件日志保存到 CSV 文件。

在 Windows XP 中，我可以手动执行此操作：我打开“事件查看器”（`EVENTVWR`或`EVENTVWR.MSC`在命令行上），然后例如右键单击“应用程序”日志，然后选择上下文菜单命令“将日志文件另存为”和“CSV（逗号分隔）（* .csv）”，我终于将日志保存在文件中。

该文件包含**所有**日志信息：它包含每个事件的**完整**格式化消息。

如果您只是启动上下文菜单命令“导出列表”，您将获得一个事件的“元数据”列表，例如`Type, Date, Time, Source, Category, Event, User, Computer`.

我浏览了 Windows XP 中可用的 API，即[Event Logging Functions (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363654%28v=vs.85%29.aspx)，我发现：

1.  `BackupEventLog`不允许我选择备份文件的格式，即它将以对我来说毫无用处的二进制格式保存。
2.  `ReadEventLog`通过结构`EVENTLOGRECORD`和说明为我提供了元数据，以便通过大量工作获取完整格式的消息：

> 事件标识符与源名称和语言标识符一起标识了一个更详细地描述事件的字符串。这些字符串用作替换字符串，并合并到消息字符串中以形成完整的消息。消息字符串包含在注册表源条目中指定的消息文件中。要从消息文件中获取适当的消息字符串，请使用 LoadLibrary 函数加载消息文件并使用 FormatMessage 函数。

现在，工作量很大：`source`进入注册表（在哪里？恐怕有多个可能的地方......）找到资源文件名，加载文件，`LoadLibrary`然后用`FormatMessage`.

我错过了什么吗？有什么捷径吗？为什么微软不给我们一个简单的 API 来备份 CSV 格式的日志？毕竟他们已经在里面写了代码`eventvwr`......

现在我有点气馁，我没有浏览自 Windows Vista 以来可用的`Evt*`API（[Windows 事件日志函数 (Windows) ）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385784%28v=vs.85%29.aspx)

# jquery - Jquery：为什么延迟不起作用？

> ID：13642566
> 
> 赞同：2
> 
> 时间：2012-11-30T09:44:26.223
> 
> 标签：jquery

我添加了延迟，但它不起作用......

```
<div id="sum"></div>рублей​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
$('#sum').html('3000').delay(3000).html('5000'); 
```

[http://jsfiddle.net/Jv8g6/](http://jsfiddle.net/Jv8g6/)

为什么延迟不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:49:04.467

[delay()](http://api.jquery.com/delay/)只影响动画队列，而[html()](http://api.jquery.com/html/)不使用该队列。

但是，您可以调用[queue()](http://api.jquery.com/queue/)并`html()`从其回调函数中调用以达到您想要的效果：

```
$("#sum").html("3000").delay(3000).queue(function() {
    $(this).html("5000").dequeue();
}); 
```

[你会在这里](http://jsfiddle.net/Jv8g6/3/)找到一个更新的小提琴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:48:26.787

`delay()`适用于存储在队列中的动作 - 例如动画。`html()`不使用队列，因此上面的代码不会像您预期的那样运行。

对于非排队操作，您将需要使用`setTimeout()`来延迟执行。尝试这个：

```
$('#sum').html('3000');
setTimeout(function() {
    $('#sum').html('5000');
}, 3000); 
```

# excel - 同一工作表中的不同细胞保护

> ID：13642569
> 
> 赞同：7
> 
> 时间：2012-11-30T09:44:32.973
> 
> 标签：excel, vba

在 Excel 工作表中，我想保护一个单元格（A1）不被编辑，另一个单元格（B1）不被格式化。这意味着用户：

*   无法编辑 A1 的值
*   可以编辑B1的值
*   无法更改 B1 的格式

“保护工作表”选项允许保护整个工作表的所有锁定单元格，因此 A1 和 B1 在锁定时将具有相同的保护级别（防止格式化或编辑）。

有没有办法为特定的单元格或范围设置单独的保护，或者至少获得相同的行为？

附加信息：

*   使用 VBA 的解决方案是可以的（尽管看起来 Worksheet.Protect 方法具有相同的限制......）
*   单元格 A1（必须阻止编辑）可以防止格式化（没关系）。
*   它应该适用于 Excel 2003。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:20:09.660

只要您没有在 vba 中检查或激活允许格式单元格，锁定就不会解决格式问题。因此，您可以简单地解锁 B1，您将无法编辑格式，只允许用户选择启用的锁定和解锁单元格。

```
Sub protectorate()

    activesheet.Range("B1").Locked = False

    With ActiveSheet
        .Protect
    End With

End Sub 
```

这将防止整个工作表上的格式和值更改，除了 B1 的值，它仍然允许您编辑 B1 的值。

# asp.net - IIS 7 ASP.NET 代码隐藏共享属性未初始化

> ID：13642571
> 
> 赞同：1
> 
> 时间：2012-11-30T09:44:38.150
> 
> 标签：asp.net, vb.net, iis-7, properties, initialization

我有一个 ASP.NET 应用程序，我最近发布到 IIS7 服务器进行测试。我对整个“应用程序发布”和 IIS 的事情完全陌生，但是工作中的人一直在帮助我，他们就像我和谷歌一样对此感到困惑。

问题在于后面代码顶部的页面属性声明之一，当我尝试访问其中一个属性时，例如 page_load，我得到一个“对象未设置为实例”异常。这只发生在共享属性上，而不是标准属性。这就是我声明我的属性的方式：

```
Public Shared Property sharedPortalController As New Aurum.Genesis.Adapter.Business.Portal.BusinessLogic.PortalControlClass

Public Shared Property sharedSelectedObjectType As String = "Hello World"
Public Shared Property sharedSelectedMessageGUID As String
Public Shared Property sharedSelectedMessageGUIDs As String()
Public Shared Property sharedXMLDocument As XmlDocument

Public Property xmlIndexCounter As Integer = 0 
```

如果我将“sharedSelectedObjectType”初始化为“Hello World”，然后将该值应用于页面加载时标签中的文本，则会引发“未设置对象...”异常，但如果我要这样做与 xmlIndexCounter 相同并将其值应用于标签，它完全没有问题并且页面将加载。仅当我尝试访问属性或与属性交互时才会发生这些错误。这就是我尝试在页面加载中与我的属性交互的方式，在本例中使用“Hello World”标签示例：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If IsPostBack = False Then

        ScriptManager.EnablePageMethods = True

        If Session("LockData") = True Then
        sharedPortalController.RecordLockUsername = Session("username")
        sharedPortalController.LockQueueRecords()
            Session("LockData") = False
        Else
            'Do Nothing
        End If

        lblWelcome.Text = lblWelcome.Text + Session("Username")
        lblDepartment.Text = "Genesis " + Session("Department") + " Department Portal"

        lblDepartment.Text = xmlIndexCounter.ToString

        ReBindGridview()
    End If

End Sub 
```

还值得注意的是，访问此页面是通过基于授权 cookie 的登录系统。登录页面在属性声明和使用方面的行为绝对正常，无论它们是否共享。成功验证用户后，登录页面执行 response.redirect 到主菜单页面，这是问题的根源。

很抱歉，我无法提供更多详细信息，纯粹是因为我对此很陌生，我真的不知道您可能需要什么进一步的详细信息，所以如果您需要任何其他信息，请务必询问并告诉我因为一开始就不知道！出于这个原因，我有一个偷偷摸摸的怀疑，这将是我错过的非常明显的事情。

任何帮助是极大的赞赏！干杯，丹

# php - 可以让表单按钮执行多项操作吗？

> ID：13642572
> 
> 赞同：0
> 
> 时间：2012-11-30T09:44:42.340
> 
> 标签：php, javascript, ajax, forms

我想知道是否可以让提交表单按钮执行多项操作。目前我正在使用自定义表单，该表单将使用 AJAX 发送到 Google 电子表格。我也在使用 Blueimp Jquery File Upload 插件。我希望的是，onsubmit 所有相关信息都可以发送到 Google 电子表格，并将上传的图像发送到我的服务器。我对任何不涉及 Blueimp Jquery Upload 的潜在解决方案持开放态度，并且我正在使用 Google 电子表格来允许多个合作者访问数据。

我对遗漏的任何细节表示歉意，因为我不精通文件上传，但请询问，我会尽力提供任何和所有相关信息。

谷歌电子表格提交代码：

```
// Handle form submission
$('form').submit(function(e) {
    var button = $('input[type=submit]', this),
        data = $(this).serialize();`

    e.preventDefault();
    if (validate($(this))) {
        button.button('loading');
        $.ajax({
            type: 'POST',
            url: formUrl,
            data: data,
            complete: function() {
                button.button('reset');
                window.location = 'index.html#new';
            }
        });
    }

    function validate(form) {
        $('.control-group').removeClass('error');
        $('input, textarea', form).each(function() {
            var tag = $(this)[0].tagName.toLowerCase(),
                type = $(this).attr('type');

            // Validate radio buttons
            if (tag === 'input' && type === 'radio') {
                var name = $(this).attr('name');
                if ($('[name="' + name + '"]:checked').length < 1) {
                    $(this).parent().parent().parent().addClass('error');
                }
            }

            // Validate text fields
            if ((tag === 'input' && type === 'text') || tag === 'textarea') {
                if ($(this).val() === '' && !$(this).parent().hasClass('radio')) {
                    $(this).parent().parent().addClass('error');
                }
            }
        });

        if ($('.control-group.error').length < 1) return true;
        $('.control-group.error').length

        $('html, body').animate({
            scrollTop: $('.control-group.error').offset().top - 20
        }, 500);

        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:20:44.510

如果您有表单提交按钮（或任何其他输入）：

```
<button href="#" id="formButton" type="button">Submit</button> 
```

使用 JavaScript，您可以在按钮上创建一个单击事件来进行表单提交：

```
$('#formButton').click(submitMultipleForms()); 
```

然后在您的函数中，您可以提交表单。每个表单都应该有一个 id：

```
function submitMultipleForms() {
       $("#form1").submit(function() { //Handler for form1 
                                     });
       $("#form2").submit(function() { //Handler for form2
                                     });
} 
```

# android - 在 Android 上使用 Wi-Fi Direct 进行客户端/对等通信

> ID：13642577
> 
> 赞同：3
> 
> 时间：2012-11-30T09:44:54.657
> 
> 标签：android, p2p, wifi-direct

我有三个 Android 设备：A、B 和 C。它们通过 Wi-Fi Direct 连接（假设 B 是组所有者）。我只有两个问题：

1.  B 可以作为客户端连接到另一个 Wi-Fi Direct 组吗？
2.  A 或 C 可以作为客户端连接到另一个 Wi-Fi Direct 组吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T15:11:36.757

两天前我已经测试了你的问题。

1.  只有当 D 不是某个组的所有者时，B 才能连接到设备 D，因此 D 将作为客户端加入 B 的组。

2.  当 A/C 作为客户端连接到 B 时，当他们尝试向某个设备 D 发送连接请求时，该请求将转发给组所有者 B 以接受连接并将 D 添加到组中。（当 D 在 B AND A/C 范围内时测试了此场景）。当 D 不在 B 范围内但在 A/C 范围内时，A/C 的请求将被取消，A/C 与 B 的连接将断开。

这就是我们在尝试了解 Wi-Fi Direct 行为时所面临的情况。

希望我对你有所帮助。如果有人测试它并知道其他东西，我会很高兴知道它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T09:08:13.887

我在从 WiFi 联盟下载的[白皮书](http://www.wi-fi.org/knowledge-center/white-papers/wi-fi-certified-wi-fi-direct%E2%84%A2-personal-portable-wi-fi%C2%AE-technology-2010)中读到了这一点：

> 并发连接和多个组。
> 
> 可以在组中同时保持 WLAN 基础设施连接的 Wi-Fi Direct 设备被视为并发设备。例如，直接连接到打印机的膝上型电脑同时使用 WLAN 连接作为并发设备运行。并发连接可能由单个无线电支持，并且可能支持不同信道上的连接。并发操作需要支持多个不同的 MAC 实体，一个用于作为 WLAN-STA 运行，一个用于作为 Wi-Fi Direct 设备运行。开发人员可以采用多种方法来实现多个 MAC 实体。例如，维护两个单独的物理 MAC 实体，每个实体都与它自己的 PHY 实体相关联，或者使用包含两个虚拟 MAC 实体的单个 PHY 实体。这些不同的方法超出了 P2P 规范的范围。并发设备可以同时参与多个组。P2P 规范没有描述这种能力的机制——实现是特定于供应商的。

* * *

因此可以连接两个组所有者，但他们都应该是并发设备。

# elasticsearch - 嵌套查询未按预期工作

> ID：13642579
> 
> 赞同：4
> 
> 时间：2012-11-30T09:45:09.790
> 
> 标签：elasticsearch, nested-query

我正在尝试使用 ElasticSearch。我在查询嵌套对象时遇到问题。

我的映射：

`curl -X GET http://localhost:9200/testt/resource/_mapping?pretty`

```
{
    "resource": {
        "properties": {
            "bib": {
                "type": "nested",
                "properties": {
                    "IssueDate": {
                        "type": "date",
                        "format": "dateOptionalTime"
                    },
                    "Title": {
                        "type": "string"
                    }
                }
            },
            "name": {
                "type": "string"
            }
        }
    }
} 
```

我有一个索引资源：

`curl -X GET http://localhost:9200/testt/resource/_search?pretty`

```
{
    "took": 1,
    "timed_out": false,
    "_shards": {
        "total": 5,
        "successful": 5,
        "failed": 0
    },
    "hits": {
        "total": 1,
        "max_score": 1.0,
        "hits": [
            {
                "_index": "testt",
                "_type": "resource",
                "_id": "1234",
                "_score": 1.0,
                "_source": {
                    "name": "SSS",
                    "bib": {
                        "Title": "XSD",
                        "IssueDate": "2012-12-19"
                    }
                }
            }
        ]
    }
} 
```

`curl -X GET http://localhost:9200/testt/resource/1234?pretty`

```
{
    "_index": "testt",
    "_type": "resource",
    "_id": "1234",
    "_version": 1,
    "exists": true,
    "_source": {
        "name": "SSS",
        "bib": {
            "Title": "XSD",
            "IssueDate": "2012-12-19"
        }
    }
} 
```

但是我无法使用查询请求找到它：

```
{
    "query": {
        "nested": {
            "path": "bib",
            "query": {
                "query_string": {
                    "query": "XSD"
                }
            }
        }
    }
} 
```

搜索：`curl -X GET http://localhost:9200/testt/resource/_search?pretty -d '{ "query" : { "nested" : {"path" : "bib", "query" : { "query_string" : {"query" : "XSD"} } } } }'`

```
{
    "took" : 1,
    "timed_out" : false,
    "_shards" : {
        "total" : 5,
        "successful" : 5,
        "failed" : 0
    },
    "hits" : {
        "total" : 0,
        "max_score" : null,
        "hits" : [ ]
    }
} 
```

我的问题是：如何使用嵌套查询来查找我的对象？我对具有`bib`包含 word的嵌套对象的对象感兴趣`XSD`。对象`1234`显然包含`XSD`，但我找不到它。你能告诉我我的查询是否正常吗？它出什么问题了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:00:02.223

`query_string`不支持它，但是如果您可以自己解析查询，则可以使用查询`multi_match`并执行以下操作：

```
{
    "query": {
        "nested": {
            "path": "bib",
            "query": {
                "multi_match": {
                    "query": "XSD",
                    "fields": ["bib.*"]
                }
            }
        }
    }
} 
```

此解决方案的一个可能问题是，如果嵌套文档中有任何数字字段，则需要将它们从字段列表中排除。可以通过为字段名称添加前缀来实现。例如，您可以将所有字符串字段重命名为以 开头`s_`，在这种情况下，您可以使用 选择所有字符串字段`"fields": ["bib.s_*"]`。

另一种可能的解决方案是使用父`_all`字段。您可以从 中排除所有父字段，`_all`并`_all`专门用于嵌套字段。`_all`默认情况下，所有嵌套字段都包含在父字段中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:54:00.227

您需要在[query_string 查询](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)中指定默认字段：

```
curl -XGET localhost:9200/testt/resource/_search -d '{ 
    "query": {
        "nested" : {
            "path" : "bib",
            "score_mode" : "avg",
            "query" : {
                "query_string" : {
                    "fields" : ["Title"],
                    "query" : "XSD"
                }
            }
        }
    }
}'; 
```

# security - 网站可以完全安全吗？

> ID：13642581
> 
> 赞同：-1
> 
> 时间：2012-11-30T09:45:17.550
> 
> 标签：security

当然，总有可能进入，我猜。

但是，您可以在保护网站方面走多远，最终安全程度如何？你能保证没有正确的授权没有人进入，或者你永远不能确定吗？

我很好奇你的答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:50:38.773

不。

人类设计的一切都可以被人类破解。正确的做法，是做**风险管理**，在哪里`risk = damage * probability`。确保您有备份，并且您可以在不破产的情况下处理闯入事件。Bruce Schneier 写了很多关于安全性以及如何正确处理它的文章。一个有价值的起点是他的博客。[你可能会对这篇文章](http://www.schneier.com/blog/archives/2012/08/five_neglects_i.html)感兴趣。

（顺便说一句，这是题外话，属于其他地方）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:28:45.477

我最近读了一本关于网络安全的书，如果您想了解更多关于安全的信息，这确实是一个很好的起点：标题是Michal Zalewski的[“Tangled Web; A Guide to Securing Modern Web Applications”](https://rads.stackoverflow.com/amzn/click/com/1593273886)

如果您想要一个答案，我认为网站默认情况下并不安全，网站周围有很多技术： - 网络服务器 - 脚本（php，javascript，多年前的小程序 java） - 数据库 - CSS，XHTML , HTML5

# java - JBoss 7.1 - struts1 - java.lang.NullPointerException

> ID：13642588
> 
> 赞同：-2
> 
> 时间：2012-11-30T09:45:51.287
> 
> 标签：java, jboss, struts

我的 jsp 页面上出现以下错误，但不知道在哪里查看。

```
 javax.servlet.ServletException: javax.servlet.jsp.JspException: java.lang.NullPointerException
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:858)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:791)
    org.apache.jsp.jsp.layout.layout_jsp._jspService(layout_jsp.java:179)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1054)
    org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:292)
    org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:268)
    org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:329)
    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:229)
    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1858)
    nl.kb.idm.selfservice.Servlet.process(Servlet.java:145)
    nl.kb.idm.selfservice.Servlet.doGet(Servlet.java:90)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    nl.kb.idm.selfservice.EncodingFilter.doFilter(EncodingFilter.java:42)
    nl.kb.idm.selfservice.CrossScriptingFilter.doFilter(CrossScriptingFilter.java:40)

root cause 

java.lang.NullPointerException
    org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    ... 
```

有人可以指出我正确的方向吗？

亲切的问候，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:52:23.380

这些类型的错误可能很难追踪。您可以做的一件事是将整个页面包装在一个异常处理程序中，如下所示：

```
<%
try {
%>

<!-- Your HTML and page logic here -->

<%
} catch(Throwable t) {
    t.printStackTrace();
}
%> 
```

确保它不会进入生产环境，因为该页面的所有异常都将进入您的标准错误，而不是您的日志。

希望有帮助！

# google-maps - 谷歌地图不会在特写中显示带有远程图像的标记

> ID：13642589
> 
> 赞同：0
> 
> 时间：2012-11-30T09:45:54.990
> 
> 标签：google-maps, cordova, google-maps-api-3

自 API 3.10 起的 Google 地图不会在特写中显示带有远程图像的标记。意思是当我放大时，我看不到图像。当我缩小时，如果我完全缩小，我可以看到图像的一部分或完整的图像。

虽然标记图像是本地文件，但每次都会显示。

查看示例：

1.  [特写镜头](https://dl.dropbox.com/u/10867328/scr/Screenshot_2012-11-30-12-36-18.png)。只看到本地文件标记

2.  [缩小](https://dl.dropbox.com/u/10867328/scr/Screenshot_2012-11-30-12-36-01.png)。可以看到图像的一部分

3.  [放大更多](https://dl.dropbox.com/u/10867328/scr/Screenshot_2012-11-30-12-36-39.png)。看到所有图像，但出现一条奇怪的垂直线

地图是从使用 phonegap 应用程序启动的。

本地和远程图像标记的代码几乎相同：

```
var image = new google.maps.MarkerImage(location.image,
            new google.maps.Size(120, 120),
            new google.maps.Point(0,0),
            new google.maps.Point(iconSize*14/32, iconSize*40/32),
            new google.maps.Size(iconSize*1, iconSize*1)
        ); //REMOTE IMAGE

var shadow = new google.maps.MarkerImage('images/marker-big-'+location.status+'.png',
            //LOCAL IMAGE
            new google.maps.Size(96, 111),
            new google.maps.Point(0,0),
            new google.maps.Point(iconSize*16/32-1, iconSize*42/32),
            new google.maps.Size(iconSize*36/32, iconSize*42/32));

localMarker = new google.maps.Marker({
            position: new google.maps.LatLng(location.latitude,location.longitude),
            title:location.text,
            map: map,
            icon: shadow,
            zIndex: index*2
        });

remoteMarker = new google.maps.Marker({
      position: new google.maps.LatLng(location.latitude,location.longitude),
            title:location.text,
            map: map,
            icon: image,
            zIndex: index*2+1
        }); 
```

旧 API 3.9 工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:32:10.363

缩放图标存在问题。尝试使用未缩放的图标。

# php - 如何删除 facebook.com 的所有 cookie？

> ID：13642591
> 
> 赞同：0
> 
> 时间：2012-11-30T09:45:59.100
> 
> 标签：php, javascript, facebook, facebook-javascript-sdk

我需要删除 Facebook 登录后创建的所有 cookie。

使用 PHP 我使用`setCookie('CookieName')`没有任何价值的方法。但它没有用。

有没有办法使用 PHP/JavaScript 删除网站的所有 cookie？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:54:53.150

您服务器上的 PHP 无法更改 facebook.com 设置的 cookie - 只有您的域设置的 cookie。在您的页面上运行的 JavaScript 也存在同样的问题。

cookie 真的是 Facebook 的吗？还是由您域上的 SDK 设置的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:52:05.783

安全策略不允许您管理其他网站的 cookie，因此现在可以从您的脚本中删除 facebook.com cookie。

如我错了请纠正我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T09:53:13.287

对不起，但我认为它不可能做你想做的事。您乱用（设置、更改或删除）您自己域中的 cookie。因此，如果您从 facebook 以外的任何地方提供服务，您将无法影响 facebook cookie。

这是关于同一问题的另一个stackoverflow线程[跨域cookie](https://stackoverflow.com/questions/1084114/cross-domain-cookies)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:59:38.410

要删除您*已经在自己的域中设置*的 cookie，您可以使用：

```
setCookie('CookieName', '', time()-3600); 
```

从[手册](http://php.net/setcookie)：

> 删除 cookie 时，您应确保过期日期已过，以触发浏览器中的删除机制。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-30T09:51:40.153

在这里查看答案

```
// unset cookies
if (isset($_SERVER['HTTP_COOKIE'])) {
    $cookies = explode(';', $_SERVER['HTTP_COOKIE']);
    foreach($cookies as $cookie) {
        $parts = explode('=', $cookie);
        $name = trim($parts[0]);
        setcookie($name, '', time()-1000);
        setcookie($name, '', time()-1000, '/');
    }
} 
```

[http://www.php.net/manual/en/function.setcookie.php#73484](http://www.php.net/manual/en/function.setcookie.php#73484)

# jquery - 为什么 .val() 总是空的（Jquery）？

> ID：13642592
> 
> 赞同：0
> 
> 时间：2012-11-30T09:46:05.093
> 
> 标签：jquery, html, input

我的输入有问题。

这是我的 html/php 代码：

```
$dotation = ($ig["dotation"]) ? $ig["dotation"]: '<input type="text" class="datepickerIG" name="igDota" size="8" value="test"/>';
            $bo .= '<tr style="background-color: black;">
                     <td class="dot">' . $dotation . '</td>
                     <td class="modif" ref="' . $ig["id"] . '"><a href="#">Modifier</a></td> 
```

这是我的js代码：

```
 var dot_cha = $(this).parent().find('.dot').val(); 
```

我的问题是，为什么 var dot_cha 总是空的？！当我使用 .html 而不是 .val 时，我是对的，那么我的错误在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:49:34.253

.val() 获取输入元素的值属性。“.dot”是一个 td，没有价值属性。

您希望 dot_cha 到底是什么？如果它是您所追求的输入，这将起作用。

```
$(this).parent().find('.datepickerIG').val(); 
```

如果它是 td 的文本 .html() 或 .text() 会给你这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:50:23.113

`val``input`检索具有此属性的标签的值和其他标签。在您的情况下，`.dot`是没有属性的表行的类`value`...所以您必须使用`.text()`or `.html()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:52:06.983

从[jQuery API 文档](http://api.jquery.com/val/)：

> .val() 方法主要用于获取表单元素的值，例如`input`,`select`和`textarea`。

`val`用于表单元素。因为`.dot`是一个`td`元素（不是表单元素）`val`在它上面使用是行不通的。要获取表单元素以外的任何元素的内容，请使用[`.html`](http://api.jquery.com/html/)或[`.text`](http://api.jquery.com/text/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:49:18.083

我会说问题是`<td>`没有值，它包含 HTML。

这就是 .html 有效而 .val 无效的原因。

您在具有值的输入上使用 .val，但`<td>`它不是输入，它只是一个 HTML 标记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T09:49:24.263

`val()`将与表单元素（例如`input`等`textarea`）一起使用，而不是与元素一起使用。

您需要获取元素的`innerHTML`or `innerText`。

就像是：

```
var dot_cha = $(this).parent().find('.dot').text(); 
```

尽管您需要确保拥有一个元素 - 因为您可能会获得一组元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T09:49:25.277

从[文档](http://api.jquery.com/val/)：

> .val() 方法主要用于获取输入、选择和文本区域等表单元素的值。在元素的情况下， .val() 方法返回一个包含每个选定选项的数组；如果未选择任何选项，则返回 null。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-30T10:02:52.347

这里的[医生](http://api.jquery.com/val/)说

> .val() 方法主要用于获取输入、选择和文本区域等表单元素的值。

你是对的 .html 有效，因为在你的情况下你有一个 td，你应该使用

```
$(".dot").html() 
```

希望能帮助到你

# javascript - jquery插件最佳结构和防止对未初始化对象的方法调用

> ID：13642593
> 
> 赞同：0
> 
> 时间：2012-11-30T09:46:11.700
> 
> 标签：javascript, jquery, function, plugins, init

你在这里看到的是我从插件开始的方式：

```
(function($){
    var methods = {
        init: function(){
            $this = this;
            alert('init '+$this.attr('id'));
        }
        ,
        show_id: function(){
            alert($this.attr('id'));
        }
    };

    var $this;
    // other vars

    $.fn.my_plug = function(method){
        var args = arguments;
        var $this = this;
        return this.each(function(){
            if (methods[method]){
                return methods[method].apply($this, Array.prototype.slice.call(args, 1));
            } else if (typeof method === 'object' || !method){
                return methods.init.apply($this, Array.prototype.slice.call(args, 0));
            } else {
                $.error('Method '+method+' does not exist!');
            }  
        });
    };
})(jQuery);

var a = true;

if (a) $('#object').my_plug(); // alerts "init object"

$('#object').my_plug('show_id'); // alerts "object"

var b = false;

if (b) $('#object_b').my_plug(); // does nothing

$('#object_b').my_plug('show_id'); // calls "show_id"-method … but $this is not defined. It should NOT call because this object is not initialized !!! 
```

在底部，您可以看到我如何调用插件方法。

第一个问题：有没有更简洁的方法来获取“this”/方法中的对象？我认为首先在插件外部定义 var，然后在插件内部，然后在 init-function 内部定义是很不酷的。有没有更清洁的方法来做到这一点？

正如您在底部看到的：我只想在 if 语句为真时调用插件。如果它是真的，那么它会调用 init。然后我调用插件的一个方法，它也可以正常工作，因为“$this”是之前定义/初始化的。但是如果 if-statment 不正确并且插件的“init”-method 没有被调用……我认为可以调用插件的方法是不合逻辑的。

所以这是问题 #2：如果对象之前没有初始化，我如何防止调用方法？如果我调用`$('#object_b').my_plug('show_id');`它不应该做任何事情，因为我们没有初始化插件。它应该只在插件被初始化或者定义了“$this”的情况下才可用。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:25:31.143

对于您的第一个问题，您不需要在插件外部声明 $this 变量。当您使用`this`范围调用方法时。`this`将在您的方法中可用。你能做的就是

```
 var methods = {
    init: function(){
        var $this = $(this);     //local to this function
        alert('init '+$this.attr('id'));
    }
    ,
    show_id: function(){
        var $this = $(this);
        alert($this.attr('id'));
    }
}; 
```

对于第二个问题，您可以在第一次调用插件时将数据附加到 dom 对象。如果插件已在此对象上初始化，您可以检查后续调用。

```
 $.fn.my_plug = function(method){
    var args = arguments;
    return this.each(function() {
        var $this = $(this),
            data = $this.data('your-plugin-inited'); //e.g.

        if (!data) {    //if no data is attached you can call init
            data = $this.data('your-plugin-inited', 1);
            return methods.init.apply($this, Array.prototype.slice.call(args, 0));
        }

        if (methods[method]){
            return methods[method].apply($this, Array.prototype.slice.call(args, 1));
        } else {
            $.error('Method '+method+' does not exist!');
        }  
    });
  } 
```

[在小提琴http://jsfiddle.net/tqvjt/6/](http://jsfiddle.net/tqvjt/6/)上查看

我会推荐 jQuery 插件模式以更深入地了解插件创作。 [http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns](http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:19:38.887

这就是我想要的（感谢所有人）：

```
(function($){
    var methods = {
        init: function(){
            alert('init '+ this.attr('id'));
            //this.my_plug('show_id'); //call from inside the plugin
        }
        ,
        show_id: function(){
            alert(this.attr('id'));
        }
    };

    $.fn.my_plug = function(method){
        var args = arguments;
        var init = 'init-my_plug';
        return this.each(function() {
            var is_init = $(this).data(init);
            if (methods[method] && is_init){
                return methods[method].apply($(this), Array.prototype.slice.call(args, 1));
            } else if (!is_init && (typeof method === 'object' || !method)){
                $(this).data(init, true);
                return methods.init.apply($(this), Array.prototype.slice.call(args, 0));
            }
        });
    };
})(jQuery);

var a = true; // if a is set to false nothing happens

if (a) $('div').my_plug();
$('div').my_plug('show_id');
$('#div3').my_plug('show_id'); // also works on only one of the divs​​​​​​​​​​ 
```

试试看：[jsfiddle](http://jsfiddle.net/ePwuR/)

做了一些改动：

*   如果其他插件使用相同的技术，数据值还必须包含插件名称以防止错误行为。
*   在第二个 if 语句中添加了“is_init”

# sql - 无法从 SQL Server Management Studio Express 访问数据库并导致机器死机？

> ID：13642598
> 
> 赞同：0
> 
> 时间：2012-11-30T09:46:21.153
> 
> 标签：sql, sql-server-2008r2-express

有时我无法通过 MSSMSE 访问 SQL Server Express（安装在同一台机器上）中的数据库。

![数据库节点不可访问！](../Images/c0d0f5b975e109937d6ed5a1012244df.png)

我必须重新启动机器才能更正此问题。

另一件事是SSMSE 的响应速度**非常慢！**Management Studio 本身非常慢，它也会降低其他应用程序的速度！在打开 SSMSE 之前，计算机工作正常，并在打开后开始冻结。[我在SQL Server 论坛](http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/4bb541d3-2370-40c6-b25c-ffbc038d0ee9/)中发现许多人表达了同样的问题。那里建议的解决方案对我不起作用！

即使唯一正在运行的应用程序是 SSMSE，也会发生这种情况。

有没有人遇到过类似的问题？更重要的是，有任何解决方案/解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:14:36.497

碰巧是硬件问题！通过“错误修复”硬盘得到解决。

# android - 无法停止/重新启动 AsyncTask

> ID：13642602
> 
> 赞同：1
> 
> 时间：2012-11-30T09:46:29.663
> 
> 标签：android, android-asynctask

请帮忙。我可以重新启动 AsyncTask。当第二次调用 updatePoi() 时，应用程序每次都会崩溃。

这是我的代码：

1.  我正在检查任务的状态并设置取消（真）。

    ```
    public void updatePoi() {
        //new RefreshMapTask().execute();
        if (refreshMapTask.getStatus() == AsyncTask.Status.RUNNING || 
            refreshMapTask.getStatus() == AsyncTask.Status.PENDING) {
                refreshMapTask.cancel(true);
            }
            refreshMapTask.execute();
        }
    } 
    ```

2.  这是我的异步任务。在 doInBackground 我写了一个休息。

    ```
    private class RefreshMapTask extends AsyncTask<Void, Void, Void> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            getMapView().getOverlays().clear();
            myPoiOverlay.clear();
            exitOverlay.clear();
        }

        @Override
        protected Void doInBackground(Void... voids) {
            Application app = (Application)getApplication();
            Log.d(TAG, "exits count = " + app.getExits().size());

            GeoPoint pointToNavigate = null;

            for (Exit exit : app.getExits()) {

                for (Poi poi : exit.getPoi()) {
                    if (isCancelled()){
                        break;
                    }
                    //some code here
                }
            }

            //small code here
            return null;
        }

        @Override
        protected void onPostExecute(Void aVoid) {
            getMapView().invalidate();
        }
    } 
    ```

编辑：将评论中的解决方案添加到问题中

```
 public void updatePoi() { 
//new RefreshMapTask().execute(); 
if (refreshMapTask.getStatus() == AsyncTask.Status.RUNNING || 
    refreshMapTask.getStatus() == AsyncTask.Status.PENDING){ 
    refreshMapTask.cancel(true);
    refreshMapTask = new RefreshMapTask();
} else { 
    refreshMapTask = new RefreshMapTask(); 
} 
refreshMapTask.execute(); 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T09:54:15.627

一个`AsyncTask`实例只能被调用一次。要进行第二次调用，您需要创建一个新实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:55:05.597

您无法*重新启动*任务。每个任务对象只能执行一次：

> 该任务只能执行一次（如果尝试第二次执行将引发异常。）

所以每次执行时都要创建一个新对象，不要使用同一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:51:22.083

尝试

```
return null; 
```

最终代码

```
@Override
protected Void doInBackground(Void... voids) {
    Application app = (Application)getApplication();
    Log.d(TAG, "exits count = " + app.getExits().size());

    GeoPoint pointToNavigate = null;

    for (Exit exit : app.getExits()) {

        for (Poi poi : exit.getPoi()) {
            if (isCancelled()){
                return null;
            }
            //some code here
        }
    }

    //small code here
    return null;
} 
```

# php - 将具有 n 项的一维数组转换为 n 维数组

> ID：13642603
> 
> 赞同：0
> 
> 时间：2012-11-30T09:46:34.700
> 
> 标签：php

如何转换这个：

```
$arr = array('item1','item2','item3','item4','...'); 
```

对此：

```
$arr2['item1']['item2']['item3']['item4']['...'] = $something; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:51:08.493

```
$arr2 = $something;
foreach (array_reverse($arr) as $key) {
    $arr2 = array($key => $arr2);
} 
```

# ruby-on-rails - Guard：默认情况下如何只运行某些组

> ID：13642604
> 
> 赞同：1
> 
> 时间：2012-11-30T09:46:34.960
> 
> 标签：ruby-on-rails, guard

我在我的 中定义了 3 个组`Guardfile`，并且我知道我可以使用该`-g`参数仅运行给定的组。

但是因为我主要想用两个特定的组运行 Guard：是否可以默认运行这些组，而不使用参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T23:38:42.373

使用它为您的**Guardfile**分配一个范围：

> 范围组：[:specs, :rake]

这样您就可以指定要运行的默认组集。在此示例中，组“rake”和“specs”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T11:07:28.533

Guard 目前无法做到这一点，但我想到了一些解决方法：

创建一个仅评估特定组的别名：

`$ alias guard=guard -g default`

现在只使用 group`default`组，但您可以覆盖它：

`$ guard -g other`

您还可以拆分您的`Guardfile`，在其中包含常用插件并将很少使用的插件提取到另一个文件中，您可以使用该文件：

`$ guard -G Otherfile`

由于我还需要更好的组管理，因此我计划扩展 Guard 以允许您`Guardfile`在交互器中定义默认组并从活动组列表中添加/删除更多组。

# python - Python 连接字符串

> ID：13642605
> 
> 赞同：-4
> 
> 时间：2012-11-30T09:46:39.393
> 
> 标签：python

我想在使用函数重命名之前将 .old 连接到文件名

这会起作用吗：

```
old =   RemoteFileName + '.out'
ftp.rename (RemoteFileName,old) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:53:58.967

是的，该代码应该可以工作。

如果值为 ，`RemoteFileName`那么`readme.txt`您的第一行将使用该值创建一个新字符串`readme.txt.out`并将其分配给变量`old`。的值`RemoteFileName`没有改变。

# oracle - 关于 Oracle 表单生成器的几个问题

> ID：13642608
> 
> 赞同：3
> 
> 时间：2012-11-30T09:46:51.590
> 
> 标签：oracle, plsql, oracleforms

我发现网上没有关于 Oracle Forms Builder 的信息，所以我会在这里询问。

1.  我创建了一个菜单表单，其中有 6 个按钮。他们都必须打开另一个表格。按钮上 open_form(???) 的语法是什么？

2.  我创建了一个表单，在其中将记录添加到子表中。但是我不希望人们能够编辑辅助键，只能从父主键列表中选择它。我怎么能这样做？

3.  这个是长的。最后一个表格我需要很多帮助 - 在父表中搜索。我在哪里可以找到这方面的任何信息。

    a) 我需要选择正在搜索的列

    b) 用复选框选择要显示的数据

    c)如果选定的列是主键列，还显示子表复选框，如果选中，将显示列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:35:58.777

1.  您可以打开表单生成器并按 F1 或帮助。然后在索引/搜索中键入 Open_Form 并复制/粘贴代码。我建议阅读 Open_Form 和 Call_Form 之间的区别。大多数时候使用 Call_Form。

2.  辅助键将是显示项目，它不会让任何用户导航到该项目。或者您可以设置 text_item 的属性 - 允许插入/更新为 false。

3.  可能您需要使用 select 语句动态创建视图或填充您的块。视图可能是更容易和最好的方法。您可以基于这些视图构建表单块并使用数据、复选框等进行操作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T15:07:12.700

1.  用于从您放置按钮的主表单调用其他表单以调用其他表单.....将其写入 WHEN-BUTTON-PRESSED 触发器 call_form('C:\Users\Messi\Desktop\school\CITIES.fmx' ); 它是那个 oracle 形式的编译文件的地址.....注意它不是 .fmb 文件地址。

# c# - 图像缓存以减少 CPU 和内存使用

> ID：13642610
> 
> 赞同：0
> 
> 时间：2012-11-30T09:47:00.810
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在开发一个具有数字时钟的 Windows 8 应用程序。我每秒都在为时钟中的数字切换图像。我正在从项目资产文件夹中检索这些图像。但我仍然认为每秒检索图像会增加 CPU 的负担。

我认为减少 CPU 负载的一种方法是切换所有数字图像的可见性。但这会导致代码非常混乱，因为我有很多图像（18）。

关于如何减少 CPU 负载的任何其他想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:22:34.177

Roy 所说的“In Memory”不是资产文件夹。在应用程序启动期间将所有图像加载到图像数组中。然后，您可以从该数组访问每个图像，这比每次从资产文件夹访问它都要快。

一种更好的方法，但稍微复杂一些，可能是将所有图像组合成 Photoshop 中的一张大图像左右。然后绘制图像的适当部分以显示每一秒。这种技术通常用于游戏中。 [http://en.wikipedia.org/wiki/Sprite_(computer_graphics](http://en.wikipedia.org/wiki/Sprite_(computer_graphics) ) [http://spritedatabase.net/tutorial_sheet.php](http://spritedatabase.net/tutorial_sheet.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:49:32.233

怎么样......只是将图像保存在内存中？

# c - 在 for 循环中使用 fork() 创建子级以使用 dup 运行 execlp() 和 2 个管道

> ID：13642612
> 
> 赞同：0
> 
> 时间：2012-11-30T09:47:06.717
> 
> 标签：c, linux, for-loop, exec, fork

我正在编写一个将运行 Linux 命令的 C 程序，例如：

> $ 猫 /etc/passwd | 切-f1 -d：| 种类

在等待孩子完成时，只有一个孩子成功终止。代码挂起显示“运行排序”

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <limits.h>

int main()
{
  int i,fd1[2],fd2[2],status,listpid[3];
  pid_t child;
  pipe(fd1);
  pipe(fd2);

  for(i=0; i< 3; i++)
  {
    printf("\ncreating child\n");
    if((child = fork()) == -1)
    {
      perror("fork");
      exit(EXIT_FAILURE);

    }
    else if(child == 0)
    {
      if(i == 0)
      {
    close(1); dup(fd1[1]);
    close(fd1[0]);
    close(fd1[1]);
    printf("\nrunning cat /etc/passwd\n");
    fflush(stdout);
    execlp("cat","cat","/etc/passwd", (char *)NULL);
    exit(EXIT_SUCCESS);

      }
      else if(i == 1)
      {
    close(0); dup(fd1[0]);
    close(fd1[1]);
    close(fd1[0]);
    close(1); dup(fd2[1]);
    close(fd2[1]);
    close(fd2[0]);
    printf("\nrunning cut -f1 -d:\n");
    fflush(stdout);
    execlp("cut","cut","-f1","-d:", (char *)NULL);
    exit(EXIT_SUCCESS);

      }
      else if(i == 2)
      {
    close(0); dup(fd2[0]);
    close(fd2[1]);
    close(fd2[0]);
    close(fd1[0]);
close(fd1[1]);
    printf("\nrunning sort\n");
    fflush(stdout);
    execlp("sort","sort", (char *)NULL);
    exit(EXIT_SUCCESS);

      }

    }
    else
    {
      listpid[i]=child;
    }

  }

  close(fd1[0]);
  close(fd1[1]);
  close(fd2[0]);
  close(fd2[1]);

  for(i = 0; i < 2; i++) 
  {
    waitpid(listpid[i], &status, 0);

    if(WIFEXITED(status)) 
    {
      printf("\n[%d] TERMINATED (Status: %d)\n",listpid[i], WEXITSTATUS(status));

    }

  }
  exit(EXIT_SUCCESS);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:06:22.600

它“挂起”的原因`sort`是等待更多输入。在输入管道关闭之前，它不会输出任何内容。*您的管道可能*有问题（您应该检查`pipe`and的返回值`dup`），但我什么也看不到。

我的猜测是`cut`它还没有退出。同样，最可能的原因是它的输入管道没有关闭。那么，它在哪里开放呢？

它不会在此`cat`过程中打开，因为没有理由不退出。

它不会在父进程中打开，因为您已经小心地关闭了所有描述符。

在这个过程中它不会打开，`cut`因为你关闭了 fd1 的写端。

这留下了`sort`进程本身：*仍然*打开了 fd1 的描述符！

因此，`sort`挂起是因为它正在等待`cut`完成，而`cut`挂起是因为它正在等待`sort`，即使 sort 永远不会向 fd1 写入任何内容。

您应该在第三个孩子中关闭 fd1，或者您应该安排每个管道仅存在于需要它们的孩子中。

无论如何，这是我的理论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:00:25.507

您需要关闭`fd1`子 2 中的管道，否则子 1 将挂起等待更多可能的输入。

作为另一个问题，您的`waitpid`循环应该有循环条件`i < 3`，而不是`i < 2`.

# django - Django 干草堆 SearchQuerySet 到 QuerySet

> ID：13642617
> 
> 赞同：6
> 
> 时间：2012-11-30T09:47:26.533
> 
> 标签：django, solr, django-queryset, django-haystack

我有一个非常通用的视图/模板来显示给定模型的查询集的内容。
我在 12 个地方使用了 12 个不同的查询集，现在我想在其中集成 haystack 搜索，但我不能，因为 SearchQuerySet 与模板中的 QuerySet 不匹配。

使用我做的普通查询集

```
{%for obj in qs%}
    {{obj.foreign_key.name }}
{%endfor%} 
```

使用 SearchQuerySet 我需要做

```
{%for obj in qs%} 
   {{obj.object.foreign_key.name}}
{%endfor%} 
```

这基本上打破了我现在知道查询集来自哪里的通用模板和视图。

我想要一种让 searchqueryset 表现得像普通查询集的方法，我知道：

*   我会输掉分数，虽然我会维持秩序
*   我需要做一个 load_all() 来获取整个对象

关于如何保持模板通用但接受 SearchQuerySet 或将 SearchQuerySet 转换为 QuerySet 的任何提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-18T15:58:03.867

我使用了一个简洁的生成器技巧，可以避免向`object`模型添加方法，并让您对 Django`QuerySet`和 Haystack使用相同的模板`SearchQuerySet`。

诀窍是将您的 SearchQuerySet 包装到生成器中。

```
# In your view...

def queryset_gen(search_qs):
    for item in search_qs:
        yield item.object  # This is the line that gets the model instance out of the Search object

qs = queryset_gen(sqs) 
```

这种方法的优点是它维护 SearchQuerySet 返回的顺序并节省计算和内存，因为您不需要创建或存储列表的另一个实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T21:35:04.327

在你的模型上添加一个名为 的方法`object`，让你的查询集表现得像 SearchQuerySet 怎么样？例如

```
class MyModel(models.Model):
    ...

    @property
    def object(self):
        return self 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-21T20:08:56.650

对于其他来这里寻找更通用的方法来处理像 QS 一样的 SQS 的人。

对于 Django Rest Framework，我需要这样的东西，所以我为 sqs -> qs 创建了以下包装器。它允许将 SQS 作为一个查询集进行处理，对迭代和切片的支持有限。

您还可以在迭代生成器函数之前调用 load_all。

```
class SearchQuerySetWrapper(object):
    """
    Decorates a SearchQuerySet object using a generator for efficient iteration
    """
    def __init__(self, qs):
        self.qs = qs

    def count(self):
        return self.qs.count()

    def __iter__(self):
        for result in self.qs:
            yield result.object

    def __getitem__( self, key):
        if isinstance(key, int) and (key >= 0 or key < self.count()):
            # return the object at the specified position
            return self.qs[key].object
        # Pass the slice/range on to the delegate
        return SearchQuerySetWrapper(self.qs[key]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T04:43:09.907

你可以像这样创建一个数组：

```
q = request.GET['q']
    results = SearchQuerySet().auto_query(q)
    obj = []
    for r in results:
        obj.append(r.object)
    return render_to_response('template.html',
        {'obj': obj ) 
```

# python - 在 Windows 7 下从 python 启动时找不到 R 包

> ID：13642618
> 
> 赞同：2
> 
> 时间：2012-11-30T09:47:26.583
> 
> 标签：python, r, windows-7, package, rscript

我尝试通过 python GUI 运行 R 脚本。

在 R 控制台下，我安装了 rgl 包。在 windows-7 中，R 在当前用户文件夹下安装包，而不是 ProgramFiles\R... 文件夹。

我有一个简单的`demo.r`脚本：

```
library('rgl')
example('plot3d') 
```

如果我使用新安装的 rgl 包和以下命令行运行 demo.r 脚本：

```
"c:\ProgramFiles\R\R..\bin\Rscript.exe" demo.r 
```

它完美地工作！

现在，如果我使用以下脚本从 python 运行它：

```
import subprocess
out = subprocess.check_output([r"c:\ProgramFiles\R\R..\bin\Rscript.exe", "demo.r"]) 
```

我收到一条错误消息，提示未找到/安装 rgl。

我检查了如果我的 demo.r 只包含一个简单的打印到屏幕命令，它可以工作。这意味着当从 python 启动时，Rscript.exe 不再知道在哪里可以找到用户文件夹下的 rgl 包。

如果我将 rgl 包文件夹从用户文件夹复制到 ProgramFiles\R... 文件夹，那么它可以工作。

有谁知道我如何指定让 python 运行 R 脚本并使用用户文件夹中的包？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:59:51.830

最好创建一个 lanucher.bat ，我想

**R_PATH** :C:/Program Files/R/R-version

**DEMO_PATH** : 你的 demo.r 路径

```
@echo off
C:
PATH R_PATH;%path%
cd DEMO_PATH
Rscript demo.R 
exit 
```

您将 launcher.bat 保存在**LAUNCHER_PATH**

现在在 python 中：

```
import subprocess
out = subprocess.check_output('LAUNCHER_PATH\launcher.bat') 
```

PS：如果您将一些参数添加到您的 python 脚本中，很容易将它们添加到您的 launcher.bat 中，而无需更改您的 python 代码

```
 Rscript demo.R arg1 arg2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T21:43:06.830

您需要`R_USER`在子进程中设置一个环境变量，R 在设置时会查看`.Library.site`：

```
import subprocess, os
my_env = os.environ.copy()
my_env["R_USER"] =  my_env["HOMEPATH"]
subprocess.check_output([r"c:\ProgramFiles\R\R..\bin\Rscript.exe", "demo.r"], env=my_env) 
```

请注意，这`my_env["HOMEPATH"]`对我有用，因为那是我的`\R\win-library\`目录所在的位置。您可能必须使用某些东西， `os.path.join(my_env["HOMEPATH"],"documents")`具体取决于您的用户库生活的位置（有关`?library`详细信息，请参见 R 中的内容）。当从任何语言（Powershell、Node 等）在子进程中启动 R 时，同样的逻辑适用

# haskell - Haskell：在不进行轮询的情况下监控文件（在 linux 中使用 inotify）

> ID：13642619
> 
> 赞同：10
> 
> 时间：2012-11-30T09:47:27.253
> 
> 标签：haskell, polling, inotify, busy-waiting

是否有一个haskell 库函数可以在不轮询的情况下监控文件？

通过轮询，我会做这样的事情：

```
monitor file mtime handler = do
    threadDelay n -- sleep `n` ns
    t <- getModificationTime file
    if t > mtime
        then handler >> monitor file t handler
        else monitor file mtime handler 
```

我想要的是一个阻塞的 getModificationTime ，它将被系统唤醒。有什么可用的吗？

如果它仅可用于 posix 系统，我会非常高兴，但越便携越好 :-)

***编辑：***我知道[hinotify](http://code.haskell.org/hinotify/README.html)，但我在 Mac 上（这就是我提到 POSIX 的原因）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T10:35:04.623

kqueue 包应该这样做：[http://hackage.haskell.org/package/kqueue](http://hackage.haskell.org/package/kqueue)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-01T17:12:25.777

有一个 GSoC 项目导致使用系统特定库的[fsnotify包，并回退到轮询。](http://hackage.haskell.org/package/fsnotify)它在 Mac 上使用[hfsevents](http://hackage.haskell.org/package/hfsevents)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-30T22:05:52.947

Sjoerd Visscher 建议的软件包就像一个魅力（使用 GHC 7.0.3 和 kqueue 0.1.2.4，Mac OS X 10.6 Snow Leopard）。

我使用它编译了一个快速示例（因为我找不到 API 文档，但在 github 上有一些示例）：

```
import Control.Concurrent.MVar
import System.KQueue.HighLevel (watchFile, EventType, Watcher)
import System.Environment (getArgs)

watch :: MVar EventType -> FilePath -> IO Watcher
watch chan file =
    let handler ev = putMVar chan ev
    in  watchFile file handler

listen :: MVar EventType -> IO ()
listen chan = takeMVar chan >>= print >> listen chan

main :: IO ()
main = do
        args <- getArgs
        chan <- newEmptyMVar
        mapM (watch chan) args
        listen chan 
```

这将创建一个小程序，您可以将文件路径作为参数传递并监视这些文件。事件通过主线程反馈`MVar`并由主线程读取，主线程基本上是由`listen`. 该程序必须被杀死，`^C`因为它被设计为永远运行。

# ios - ios App 在测试时工作，但在发布后崩溃

> ID：13642624
> 
> 赞同：4
> 
> 时间：2012-11-30T09:47:58.550
> 
> 标签：ios, xcode, cordova, crash, release

我们刚刚使用 xcode 4.5.2 发布了一个新的 iPhone 应用程序，cordova-2.2.0 测试时一切正常。但是今天发布后它立即崩溃。开始屏幕闪烁一秒钟，然后崩溃。

崩溃：-iPhone 5 (iOs 6.0.1) -iPhone 4s (iOs 6.0.1) -iPhone 4 (iOs 6.0.1)

但！适用于：-iPhone 4 (iOs 5.0) ?!?

因为从 xcode 开始时它正在工作，所以我们无法重现此错误，有什么想法吗？

这是崩溃日志的片段，您需要更多详细信息吗？

谢谢！

```
Last Exception Backtrace:
0   CoreFoundation                  0x39e0b3e2 __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x38e6495e objc_exception_throw + 26
2   CoreFoundation                  0x39e0ef2c -[NSObject(NSObject) doesNotRecognizeSelector:] + 180
3   CoreFoundation                  0x39e0d648 ___forwarding___ + 388
4   CoreFoundation                  0x39d65204 _CF_forwarding_prep_0 + 20
5   myapp                       0x0003dff4 -[CDVViewController viewDidLoad] + 1352
6   myapp                       0x000114dc -[MainViewController viewDidLoad] (MainViewController.m:62)
7   UIKit                           0x3363a544 -[UIViewController loadViewIfRequired] + 360
8   UIKit                           0x3367ad2c -[UIWindow addRootViewControllerViewIfPossible] + 60
9   UIKit                           0x33676ac8 -[UIWindow _setHidden:forced:] + 360
10  UIKit                           0x336b819c -[UIWindow makeKeyAndVisible] + 56
11  myapp                       0x00011260 -[AppDelegate application:didFinishLaunchingWithOptions:] (AppDelegate.m:108)
12  UIKit                           0x3367ba74 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 248
13  UIKit                           0x3367b5f8 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1164
14  UIKit                           0x33673806 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
15  UIKit                           0x3361bcea -[UIApplication handleEvent:withNewEvent:] + 1006
16  UIKit                           0x3361b778 -[UIApplication sendEvent:] + 68
17  UIKit                           0x3361b1ba _UIApplicationHandleEvent + 6194
18  GraphicsServices                0x39eaf5f2 _PurpleEventCallback + 586
19  CoreFoundation                  0x39de08f2 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 10
20  CoreFoundation                  0x39de0158 __CFRunLoopDoSources0 + 208
21  CoreFoundation                  0x39ddef2a __CFRunLoopRun + 642
22  CoreFoundation                  0x39d52238 CFRunLoopRunSpecific + 352
23  CoreFoundation                  0x39d520c4 CFRunLoopRunInMode + 100
24  UIKit                           0x33672440 -[UIApplication _run] + 664
25  UIKit                           0x3366f28c UIApplicationMain + 1116
26  myapp                       0x00010e92 main (main.m:32)
27  myapp                       0x00010e44 start + 36

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x39b75350 __pthread_kill + 8
1   libsystem_c.dylib               0x3310dfb2 pthread_kill + 54
2   libsystem_c.dylib               0x3314a366 abort + 90
3   libc++abi.dylib                 0x33205dda abort_message + 70
4   libc++abi.dylib                 0x33203094 default_terminate() + 20
5   libobjc.A.dylib                 0x38e64a58 _objc_terminate() + 144
6   libc++abi.dylib                 0x33203118 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x332031b0 std::terminate() + 16
8   libc++abi.dylib                 0x33204626 __cxa_rethrow + 90
9   libobjc.A.dylib                 0x38e649b0 objc_exception_rethrow + 8
10  CoreFoundation                  0x39d5229c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x39d520c4 CFRunLoopRunInMode + 100
12  UIKit                           0x33672440 -[UIApplication _run] + 664
13  UIKit                           0x3366f28c UIApplicationMain + 1116
14  myapp                       0x00010e92 main (main.m:32)
15  myapp                       0x00010e44 start + 36 
```

@Antonio 来了 viewDidLoad

```
// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void) viewDidLoad 
{
    [super viewDidLoad];

    NSString* startFilePath = [self pathForResource:self.startPage];
    NSURL* appURL  = nil;
    NSString* loadErr = nil;

    if (startFilePath == nil) {
        loadErr = [NSString stringWithFormat:@"ERROR: Start Page at '%@/%@' was not found.", self.wwwFolderName, self.startPage];
        NSLog(@"%@", loadErr);
        self.loadFromString = YES;
        appURL = nil;
    } else {
        appURL = [NSURL fileURLWithPath:startFilePath];
    }

    //// Fix the iOS 5.1 SECURITY_ERR bug (CB-347), this must be before the webView is instantiated ////

    BOOL backupWebStorage = YES;  // default value
    if ([self.settings objectForKey:@"BackupWebStorage"]) {
        backupWebStorage = [(NSNumber*)[settings objectForKey:@"BackupWebStorage"] boolValue];
    }

    if (backupWebStorage) {
        [CDVLocalStorage __verifyAndFixDatabaseLocations];
    }

    //// Instantiate the WebView ///////////////

    [self createGapView];

    ///////////////////

    NSNumber* enableLocation       = [self.settings objectForKey:@"EnableLocation"];
    NSString* enableViewportScale  = [self.settings objectForKey:@"EnableViewportScale"];
    NSNumber* allowInlineMediaPlayback = [self.settings objectForKey:@"AllowInlineMediaPlayback"];
    BOOL mediaPlaybackRequiresUserAction = YES;  // default value
    if ([self.settings objectForKey:@"MediaPlaybackRequiresUserAction"]) {
        mediaPlaybackRequiresUserAction = [(NSNumber*)[settings objectForKey:@"MediaPlaybackRequiresUserAction"] boolValue];
    }

    self.webView.scalesPageToFit = [enableViewportScale boolValue];

    /*
     * Fire up the GPS Service right away as it takes a moment for data to come back.
     */

    if ([enableLocation boolValue]) {
        [[self.commandDelegate getCommandInstance:@"Geolocation"] getLocation:nil];
    }

    /*
     * Fire up CDVLocalStorage on iOS 5.1 to work-around WebKit storage limitations, or adjust set user defaults on iOS 6.0+
     */
    if (IsAtLeastiOSVersion(@"6.0")) {
        // We don't manually back anything up in 6.0 and so we should remove any old backups.
        [CDVLocalStorage __restoreThenRemoveBackupLocations];
        [[NSUserDefaults standardUserDefaults] setBool:backupWebStorage forKey:@"WebKitStoreWebDataForBackup"];
    } else {
        if (backupWebStorage) {
            [self.commandDelegate registerPlugin:[[CDVLocalStorage alloc] initWithWebView:self.webView] withClassName:NSStringFromClass([CDVLocalStorage class])];
        } else {
            [CDVLocalStorage __restoreThenRemoveBackupLocations];
        }
    }

    /*
     * This is for iOS 4.x, where you can allow inline <video> and <audio>, and also autoplay them
     */
    if ([allowInlineMediaPlayback boolValue] && [self.webView respondsToSelector:@selector(allowsInlineMediaPlayback)]) {
        self.webView.allowsInlineMediaPlayback = YES;
    }
    if (mediaPlaybackRequiresUserAction == NO && [self.webView respondsToSelector:@selector(mediaPlaybackRequiresUserAction)]) {
        self.webView.mediaPlaybackRequiresUserAction = NO;
    }

    // UIWebViewBounce property - defaults to true
    NSNumber* bouncePreference = [self.settings objectForKey:@"UIWebViewBounce"];
    BOOL bounceAllowed = (bouncePreference==nil || [bouncePreference boolValue]); 

    // prevent webView from bouncing
    // based on UIWebViewBounce key in Cordova.plist
    if (!bounceAllowed) {
        if ([ self.webView respondsToSelector:@selector(scrollView) ]) {
            ((UIScrollView *) [self.webView scrollView]).bounces = NO;
        } else {
            for (id subview in self.webView.subviews)
                if ([[subview class] isSubclassOfClass: [UIScrollView class]])
                    ((UIScrollView *)subview).bounces = NO;
        }
    }

    ///////////////////

    if (!loadErr) {
        NSURLRequest *appReq = [NSURLRequest requestWithURL:appURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:20.0];
        [self.webView loadRequest:appReq];
    } else {
        NSString* html = [NSString stringWithFormat:@"<html><body> %@ </body></html>", loadErr];
        [self.webView loadHTMLString:html baseURL:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:08:03.087

确保存档并运行应用程序

当你在调试模式下运行它时，你会得到不同的编译，因此可能会得到不同的结果。（调试模式 = 当您从 XCode 中运行时单击运行）

另外，我感觉您正在使用 iOS 6 中已弃用的方法。（您显然收到“未定义选择器”错误，提示访问您不应该访问的方法）检查​​您使用的方法在 iOS 6 中可用。

此外，请确保您没有访问 ivars。据我所知，iOS 6 禁用了访问私有 ivars。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:59:29.940

似乎您在 viewDidLoad 中调用了 CDVViewController 无法处理的方法。最好检查您在该方法内发送到该类实例的所有消息（很可能是 self.property 或 [self something]）。

# entity-framework - 如何在drupal中定义视图模块的关系，以便我们可以加载其他链接实体的字段

> ID：13642626
> 
> 赞同：0
> 
> 时间：2012-11-30T09:48:12.920
> 
> 标签：entity-framework, drupal, views

笔记实体中已经有字段可以引用任何类型的另一个实体，因此可以将笔记链接到节点、用户、订单任何其他实体类型都保存在字段“entity”中，并且“entity_id”保持链接的 id实体。

如何为视图模块定义关系，以便我们在构建笔记视图时可以加载其他链接实体的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:50:55.187

关系在视图中的工作方式如下：

在视图的“高级”部分下，您可以通过选择有问题的参考字段（例如用户参考、节点参考等）来添加关系。在配置关系的屏幕中，您可以命名您的关系（如果您不喜欢默认名称）并选择是否要将视图限制为仅显示已填写该字段/关系的节点！

现在是好的部分：建立关系后，您会看到一堆新字段出现在您的字段列表中，以添加到您的视图中，这些字段来自引用的实体。但是，如果您从引用的实体中选择这些字段中的任何一个，则必须向视图指定它需要使用创建的关系，否则它们将只是空的：

![在此处输入图像描述](../Images/503308b12f5f3fbdd36d64c970f5481e.png)

# tomcat - 将一个 tomcat 应用程序的不安全请求重定向到安全端口，并且不重定向另一个应用程序的请求

> ID：13642631
> 
> 赞同：3
> 
> 时间：2012-11-30T09:48:56.833
> 
> 标签：tomcat, redirect

我有两个在 tomcat 7.0 下运行的 Web 应用程序

1.  https://secure.example.com:8443
2.  http://insecure.example.com:8080

它们在 server.xml 中有两个单独的“主机”记录（不同的域，不同的位置）。

**我需要第一个只能通过 HTTPS 访问。换句话说，我需要不安全的请求来保护应用程序以重定向到安全端口。但是不安全的应用程序仍然必须通过 HTTP 可用。**

*   http://insecure.example.com:8080 - 好的
*   https://secure.example.com:8443 - 好的
*   http://secure.example.com:8080 --> https://secure.example.com:8443

我知道可以在不安全的连接器（server.xml）中指定“redirectPort”，但是对任何应用程序（域）的 HTTP 请求都将被重定向到安全端口。

是否可以使用单个 tomcat 实例进行配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:26:08.253

这可以通过在 conf/server.xml 中设置单独的“服务”元素来实现。

例如你有

```
<Service name="Catalina">
  <Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" />
  <Engine name="Catalina" defaultHost="insecure.example.com">
      <Host name="insecure.example.com"  appBase="insecure" unpackWARs="true" autoDeploy="true">
      </Host>
  </Engine>
</Service> 
```

现在添加额外的服务部分

```
<Service name="SecureApps">
  <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
            keystoreFile="/usr/local/tomcat/keys/keystore.p12" keystorePass="mySecret" keystoreType="pkcs12"
           clientAuth="false" sslProtocol="TLS" />
  <Engine name="SecureEngine" defaultHost="secure.example.com">
      <Host name="secure.example.com"  appBase="secure" unpackWARs="true" autoDeploy="true">
      </Host>
  </Engine>
</Service> 
```

因此，安全应用程序将无法通过不安全的连接获得，因为 HTTP 端口由另一个服务提供服务。

关于 HTTP(8080)->HTTPS(8443) 重定向，在这种配置中可能有更好的方法，但可以在“Catalina”服务中设置第二个“Host”部分，名称为“secure.example.com” ，并部署一些包含简单 servlet 的 Web 应用程序，将任何请求重定向到指定的安全 url。

例如

web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    version="2.4">

    <display-name>Redirect to secure port</display-name>
    <description>
        This is a simple web application which redirects you to secure port
    </description>

    <servlet>
        <servlet-name>RedirectServlet</servlet-name>
        <servlet-class>com.mycompany.RedirectServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>RedirectServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

重定向Servlet.java

```
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class RedirectServlet extends HttpServlet
{
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws IOException
    {
        String url = "https://secure.example.com:8443/";

        response.sendRedirect(url);

    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException
    {
        String url = "https://secure.example.com:8443/";

        response.sendRedirect(url);

    }
} 
```

# c# - 使用 XmlReader 类解析同名元素的 XML

> ID：13642633
> 
> 赞同：7
> 
> 时间：2012-11-30T09:48:58.270
> 
> 标签：c#, xml, xmlreader

我正在重写一些使用 XmlDocument 来解析一些 XML 的代码。我想改用 XmlReader 来查看是否可以获得一些性能改进。XML 的结构如下所示：

```
<items>
   <item id="1" desc="one">
      <itemBody date="2012-11-12" />
   </item>
   <item id="2" desc="two">
      <itemBody date="2012-11-13" />
   </item>
   <item id="3" desc="three">
      <itemBody date="2012-11-14" />
   </item>
   <item id="4" desc="four">
      <itemBody date="2012-11-15" />
   </item>
</items> 
```

基本上，我需要遍历所有`<item>`元素。就像我说的，旧代码是这样工作的：

```
XmlDocument document = new XmlDocument();

// load XML into XmlDocument
document.LoadXml(xml);

// use xpath to split into individual item
string xPath = @"items/item";
XmlNodeList nodeList = document.SelectNodes(xPath);

// loop through each item
for (int nodeIndex = 0; nodeIndex < nodeList.Count; nodeIndex++)
{
    // do something with the XmlNode
    nodeList[nodeIndex];
} 
```

这很好用，但我认为使用 XmlReader 会更快。所以我写了这个：

```
XmlReader xmlReader = XmlReader.Create(new StringReader(xml));

while (xmlReader.Read())
{                       
   if (xmlReader.Name.Equals("item") && (xmlReader.NodeType == XmlNodeType.Element))
   {
      string id = xmlReader.GetAttribute("id");                 
      string desc = xmlReader.GetAttribute("desc");
      string elementXml = xmlReader.ReadOuterXml();
   }
} 
```

但是，此代码仅读取第一个`<item>`元素。ReadOuterXml() 正在打破循环。有人知道如何解决这个问题吗？或者这种类型的解析无法使用 XmlReader 进行？我必须使用 .NET 版本 2 来做到这一点 :( 所以我不能使用 LINQ。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:21:46.997

刚刚在 LinqPad 中测试了您的代码。效果很好。

```
 var xml = @"<items>
   <item id='1' desc='one' />
   <item id='2' desc='two' />
   <item id='3' desc='three' />
   <item id='4' desc='four' />
</items>";
XmlReader xmlReader = XmlReader.Create(new StringReader(xml));

while (xmlReader.Read())
{   
   if (xmlReader.Name.Equals("item") && (xmlReader.NodeType == XmlNodeType.Element))
   {
      string id = xmlReader.GetAttribute("id");              
      string desc = xmlReader.GetAttribute("desc");
      Console.WriteLine("{0} {1}", id, desc);
   }
} 
```

输出：

```
1 one
2 two
3 three
4 four 
```

也许您的 XML 有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:52:03.103

以下似乎有效： -

```
 StringBuilder xml = new StringBuilder();

        xml.Append("<items>");
        xml.Append("<item id=\"1\" desc=\"one\">");
        xml.Append("<itembody id=\"10\"/>");
        xml.Append("</item>");
        xml.Append("<item id=\"2\" desc=\"two\">");
        xml.Append("<itembody id=\"20\"/>");
        xml.Append("</item>");
        xml.Append("<item id=\"3\" desc=\"three\">");
        xml.Append("<itembody id=\"30\"/>");
        xml.Append("</item>");
        xml.Append("</items>");

        using (XmlTextReader tr = new XmlTextReader(new StringReader(xml.ToString())))
        {
            bool canRead = tr.Read();
            while (canRead)
            {
                if ((tr.Name == "item") && tr.IsStartElement())
                {
                    Console.WriteLine(tr.GetAttribute("id"));
                    Console.WriteLine(tr.GetAttribute("desc"));
                    string outerxml = tr.ReadOuterXml();
                    Console.WriteLine(outerxml);

                    canRead = (outerxml != string.Empty);
                }
                else
                {
                    canRead = tr.Read();
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:59:21.470

如果你可以使用 Linq，这里有另一种方法：

```
class Program
{
    static void Main(string[] args)
    {

        const string xml = @"<items>
                          <item id='1' desc='one'>
                            <itemBody date='2012-11-12' />
                          </item>
                          <item id='2' desc='two'>
                            <itemBody date='2012-11-13' />
                          </item>
                          <item id='3' desc='three'>
                            <itemBody date='2012-11-14' />
                          </item>
                          <item id='4' desc='four'>
                            <itemBody date='2012-11-15' />
                          </item>
                        </items>";

        var xmlReader = XmlReader.Create(new StringReader(xml));

        XElement element = XElement.Load(xmlReader, LoadOptions.SetBaseUri);

        IEnumerable<XElement> items = element.DescendantsAndSelf("item");

        foreach (var xElement in items)
        {
            string id = GetAttributeValue("id", xElement);
            string desc = GetAttributeValue("desc", xElement);
            string itemBody = GetElementValue("itemBody", "date", xElement);

            Console.WriteLine("id = {0}, desc = {1}, date = {2}", id, desc, itemBody);
        }

        Console.ReadLine();
    }

    private static string GetElementValue(string elementName, string attributeName, XElement element)
    {
        XElement xElement = element.Element(elementName);

        string value = string.Empty;

        if (xElement != null)
        {
            XAttribute xAttribute = xElement.Attribute(attributeName);

            if (xAttribute != null)
            {
                value = xAttribute.Value;
            }
        }

        return value;
    }

    private static string GetAttributeValue(string attributeName, XElement element)
    {
        XAttribute xAttribute = element.Attribute(attributeName);

        string value = string.Empty;
        if (xAttribute != null)
        {
            value = xAttribute.Value;
        }

        return value;
    }
} 
```

# java - TreeMap 如何排序

> ID：13642636
> 
> 赞同：18
> 
> 时间：2012-11-30T09:49:12.613
> 
> 标签：java, sorting, treemap

`TreeMap`排序如何？例如，您有以下地图：

```
TreeMap<String, Integer> treemap = new TreeMap<>();
treemap.put("lol", 1);
treemap.put("Marc", 2);
treemap.put("Jesper", 3);

Iterator ittwo = treemap.entrySet().iterator();
    while (ittwo.hasNext()) {
    Map.Entry pairs = (Map.Entry)ittwo.next();
    System.out.println(pairs.getKey() + " = " + pairs.getValue());
    ittwo.remove();
} 
```

这个的输出是：

```
Jesper = 3
Marc = 2
lol = 1 
```

因此，如果它不是按字母顺序排列的，那么它是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-30T09:53:11.933

它不仅按字母顺序排列，而且区分大小写。

```
TreeMap<String, Integer> treemap = new TreeMap<String, Integer>();
treemap.put("Lol", 1);
treemap.put("Marc", 2);
treemap.put("Jesper", 3);
treemap.put("lol1", 1);
treemap.put("marc1", 2);
treemap.put("jesper1", 3); 
```

输出：

```
Jesper = 3
Lol = 1
Marc = 2
jesper1 = 3
lol1 = 1
marc1 = 2 
```

因此，如果您不需要它，您可以使用自定义比较器，并以小写形式比较字符串：

```
TreeMap<String, Integer> treemap = new TreeMap<String, Integer>(new Comparator<String>() {
    public int compare(String o1, String o2) {
        return o1.toLowerCase().compareTo(o2.toLowerCase());
    }
});
treemap.put("Lol", 1);
treemap.put("Marc", 2);
treemap.put("Jesper", 3);
treemap.put("lol1", 1);
treemap.put("marc1", 2);
treemap.put("jesper1", 3); 
```

输出：

```
Jesper = 3
jesper1 = 3
Lol = 1
lol1 = 1
Marc = 2
marc1 = 2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T09:53:54.817

如[JavaDoc 中](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)所述， `TreeMap`“...根据其**键**的自然顺序进行排序...”（重点是我的）。

`l`因此，您的结果是正确的，因为小写字母在 UTF“字母表”中的大写字母*之后。*`M`

如果您希望覆盖默认行为，您可以`Comparator`向`TreeMap`构造函数提供 a。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T09:53:16.470

由于您没有`Comparator`通过构造函数传递任何内容，因此这将`TreeMap`使用其键的自然顺序构造一个新的。

在java中，自然顺序意味着`lexicographical`顺序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T09:53:24.813

你实际上得到了正确的输出。

```
J(uppercase J)>M(uppercase M)>l(lowercase l). 
```

大写字母在字典顺序上大于小写字母

# actionscript-3 - 如何从 AIR 应用程序打开和保持会话？

> ID：13642639
> 
> 赞同：0
> 
> 时间：2012-11-30T09:49:18.437
> 
> 标签：actionscript-3, apache-flex, air, flex4.6

*   如何从 AIR 应用程序打开并保持与特定 Web 服务器的会话？

到目前为止，我尝试过这种方式，但没有运气：

```
var qHeader    : URLRequestHeader = new URLRequestHeader();

            var urlRequest : URLRequest  = new URLRequest( requestTarget.text );                    
                urlRequest.method        = URLRequestMethod.POST;   
                urlRequest.data          = cookiesObject;
                //urlRequest.requestHeaders.push( qHeader );
                urlRequest.requestHeaders = new Array( "Cookie: ASP.NET_SessionId=u43mjnpuerdicmu5pjobi2dz" )

            var rr : Response = new Response();

            //URLRequestDefaults.manageCookies = true;

            var _urlLoader : URLLoader = new URLLoader();
                _urlLoader.dataFormat  = URLLoaderDataFormat.BINARY;

                _urlLoader.addEventListener( Event.COMPLETE, onReceive );
                _urlLoader.addEventListener( IOErrorEvent.IO_ERROR, onFail );

            _urlLoader.load( urlRequest ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:42:22.117

每个请求标头必须是一个`URLRequestHeader`对象。尝试这个：

```
urlRequest.requestHeaders = new Array(new URLRequestHeader("Cookie", "ASP.NET_SessionId=u43mjnpuerdicmu5pjobi2dz")); 
```

# wpf - 用户控制按钮 - 样式 - WPF

> ID：13642642
> 
> 赞同：0
> 
> 时间：2012-11-30T09:49:30.560
> 
> 标签：wpf, xaml, button, user-controls, wpf-controls

我一直在尝试创建一个用户控件库，它只是具有默认 WPF 控件的样式版本。基本上我在我做的每个项目中都使用相同风格的控件。

因此，我认为与其重新设计每个项目中的所有内容，不如创建一个用户控件库，该库将预先设置所有控件的样式。但是我似乎无法将样式应用于控件，因为它给我留下了一个空白框。

这是按钮控件的 XAML。我知道我一定是在做一些完全错误的事情，但我似乎无法在网上找到任何关于如何做到这一点的信息。

基本上我只是希望这是一个标准的 wpf 按钮，但字体为“Century Gothic”，单击时为绿色背景等。

谁能指出我正确的方向？

```
<Button x:Class="IM.WPF.Controls.imButton"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        mc:Ignorable="d"
        d:DesignHeight="23"
        d:DesignWidth="75">

  <Button.Style>
    <Style TargetType="Button"
           x:Name="imButtonStyle">
      <Setter Property="SnapsToDevicePixels"
              Value="True" />
      <Setter Property="OverridesDefaultStyle"
              Value="True" />
      <Setter Property="Content"
              Value="imButton" />
      <Setter Property="BorderBrush"
              Value="#006150" />
      <Setter Property="FontFamily"
              Value="Century Gothic" />
      <Setter Property="FontSize"
              Value="12" />
      <Setter Property="Foreground"
              Value="#006150" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <ControlTemplate.Triggers>
              <Trigger Property="IsPressed"
                       Value="True">
                <Setter Property="Background">
                  <Setter.Value>
                    <LinearGradientBrush>
                      <GradientStop Color="#006150"
                                    Offset="0" />
                      <GradientStop Color="#006150"
                                    Offset="0.5" />
                      <GradientStop Color="#006150"
                                    Offset="0.5" />
                      <GradientStop Color="#006150"
                                    Offset="0.9" />
                    </LinearGradientBrush>
                  </Setter.Value>
                </Setter>
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Button.Style>

  <Button.Background>
    <LinearGradientBrush StartPoint="0,0"
                         EndPoint="0,1">
      <GradientStop Color="White"
                    Offset="0" />
      <GradientStop Color="#E0E0E0"
                    Offset="0.5" />
      <GradientStop Color="LightGray"
                    Offset="0.5" />
      <GradientStop Color="DarkGray"
                    Offset="0.9" />
    </LinearGradientBrush>
  </Button.Background>

</Button> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:54:02.193

您将`Template`控件的设置为空模板（您的模板仅包含触发器）。这是压倒一切现有的显示逻辑。尝试将触发器设置为样式触发器。

此外，如果您所做的只是更改控件的外观，那么比对每个控件进行子类化更好（也更容易）的方法是为现有控件提供一组 Xaml 样式。这样，您就有了一个可`ResourceDictionary`应用于任何现有应用程序的可重用对象，并且您的 Xaml 不必使用大量非标准控件。您还可以选择将其打包为单独的 Xaml 文件，或将其放入可重复使用的单独程序集中。

# java - 如何横切带注释的方法和构造函数？

> ID：13642646
> 
> 赞同：7
> 
> 时间：2012-11-30T09:49:39.293
> 
> 标签：java, constructor, aop, aspectj

这就是我正在做的事情：

```
@Aspect
public class MethodLogger {
  @Around("(execution(* *(..)) || initialization(*.new(..))) && @annotation(Foo)")
  public Object wrap(ProceedingJoinPoint point) throws Throwable {
    // works fine, but only for methods
  }
} 
```

该片段工作正常，但仅适用于方法调用。这是[AspectJ maven 插件](http://mojo.codehaus.org/aspectj-maven-plugin/)在应用方面后所说的（不是在编译期间，它工作得很好）：

```
around on initialization not supported (compiler limitation) 
```

任何解决方法？我使用的是 OpenJDK 7：

```
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b06)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:19:44.253

由于技术限制，没有`around()`建议`initialization()`或`preinitialization()`切入点之类的东西。进入和退出相应连接点的时间顺序还有另一个问题。看这个例子：

```
public abstract class ApplicationBase {
    private int id = 0;

    public ApplicationBase(int id) {
        this.id = id;
    }
} 
```

```
public class Application extends ApplicationBase {
    private String name = "<unnamed>";

    public Application(int id, String name) {
        super(id);
        this.name = name;
    }

    public static void main(String[] args) {
        new Application(1, "Foo");
        new Application(2, "Bar");
    }
} 
```

```
public aspect ExecutionTimingAspect {
    private String indentText = "";

    pointcut constructorCall() :
        call(*Application*.new(..));

    pointcut constructorRelated() :
        constructorCall() ||
        initialization(*Application*.new(..)) ||
        preinitialization(*Application*.new(..)) ||
        execution(*Application*.new(..));

    after() : constructorRelated() {
        indentText = indentText.substring(2);
        System.out.println(indentText + "<< " + thisJoinPointStaticPart);
    }

    before() : constructorRelated() {
        System.out.println(indentText + ">> " + thisJoinPointStaticPart);
        indentText += "  ";
    }

    Object around() : constructorCall() {
        long startTime = System.nanoTime();
        Object result = proceed();
        System.out.println(indentText + "Constructor runtime = " + (System.nanoTime() - startTime) / 1.0e9 + " s\n");
        return result;
    }
} 
```

您将看到以下输出：

```
>> call(Application(int, String))
  >> preinitialization(Application(int, String))
  << preinitialization(Application(int, String))
  >> preinitialization(ApplicationBase(int))
  << preinitialization(ApplicationBase(int))
  >> initialization(ApplicationBase(int))
    >> execution(ApplicationBase(int))
    << execution(ApplicationBase(int))
  << initialization(ApplicationBase(int))
  >> initialization(Application(int, String))
    >> execution(Application(int, String))
    << execution(Application(int, String))
  << initialization(Application(int, String))
<< call(Application(int, String))
Constructor runtime = 0.00123172 s

>> call(Application(int, String))
  >> preinitialization(Application(int, String))
  << preinitialization(Application(int, String))
  >> preinitialization(ApplicationBase(int))
  << preinitialization(ApplicationBase(int))
  >> initialization(ApplicationBase(int))
    >> execution(ApplicationBase(int))
    << execution(ApplicationBase(int))
  << initialization(ApplicationBase(int))
  >> initialization(Application(int, String))
    >> execution(Application(int, String))
    << execution(Application(int, String))
  << initialization(Application(int, String))
<< call(Application(int, String))
Constructor runtime = 0.00103393 s 
```

你能看到派生类的预初始化是如何在其基类的预初始化之前开始和结束的吗？以及初始化如何以相反的方式工作，但是作为一个额外的复杂构造函数执行嵌入在初始化中？

也许现在您明白了，即使可以通过 测量初始化，`around()`也不会反映构造函数的整体执行时间。因此，如果您足够幸运能够拦截构造函数`call()`而不是`execution()`因为您可以访问调用代码，那么您很好，甚至可以`around()`像我在示例中所做的那样使用（顺便说一下，这不是线程安全的，但是我尽量保持简单）。如果您不能影响调用者，但只能编织被调用者，则需要使用其他技巧，例如在进入某个构造函数的预初始化时通过方面内部记账，`before()`然后在退出相同构造函数调用的初始化时通过`after()`. 即，您需要在建议执行之间保持一些内部状态。这是可能的，但有点复杂。如果您想进一步讨论这个问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:24:34.150

作为解决方法 - 您可以针对此类需求引入工厂，以应用有关其方法的建议。

# arrays - 使用变量作为数组索引

> ID：13642647
> 
> 赞同：0
> 
> 时间：2012-11-30T09:49:40.393
> 
> 标签：arrays, smarty

我有一个存储关联数组的 smarty 变量。有没有办法结合一个字符串和另一个 smarty 变量来创建索引？

示例：我要打印的数组元素是`$foo['index1']`和变量`$count = 1`. 我尝试使用打印值，`$foo.index$count`但这会导致智能语法错误（无法识别的标签）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:42:20.563

如果你在 PHP 中有这样的东西：

```
$foo['index1'] = 'aaa';
$smarty->assign('foo', $foo);
$smarty->assign('count', 1); 
```

然后你应该在 smarty 中做：

```
{assign var = "idx" value = "index"|cat:$count}
{$foo[$idx]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:32:36.363

**像这样，您可以在 foreach 中获取索引计数：**

```
{foreach from=$value item=foo key=k name=myloop}                                
{assign var=op value=$smarty.foreach.myloop.index}
index count:{$op}
{/foreach} 
```

# java - tomcat webapp如何在没有spring security的情况下切换到https并返回http

> ID：13642648
> 
> 赞同：3
> 
> 时间：2012-11-30T09:49:40.853
> 
> 标签：java, http, tomcat, web-applications, https

使用 Tomcat 7.0.32，我们有一个登录页面，默认情况下，用户通过 http 访问。我们立即将用户重定向到使用 https。
目标：用户输入凭据后，我们希望使用 http 将用户重定向到主页。

我了解安全风险——中间人、会话劫持等。

我不能使用弹簧安全——在游戏中为时已晚——发布很快就会到来，而且 https 性能很糟糕。

此外，我们的应用程序有一个“更改密码”用例——用户从主页的菜单访问“changepassword.jsp”，我想我应该使用 https 将用户重定向到“changepassword.jsp”。确认密码更改后，使用 http 再次将用户重定向回主页。想法？

如何去做 - 是否有可用的示例代码？

**更新 1**：我从
1) [http://tomcat.10.n6.nabble.com/Session-lost-when-switching-from-https-to-http-after-upgrade-to-Tomcat中了解了这个问题-6-td2105781.html](http://tomcat.10.n6.nabble.com/Session-lost-when-switching-from-https-to-http-after-upgrade-to-Tomcat-6-td2105781.html)
2) [http://tomcat.10.n6.nabble.com/how-to-auto-redirect-to-https-from-http-td2087325.html](http://tomcat.10.n6.nabble.com/how-to-auto-redirect-to-https-from-http-td2087325.html)

来自[https://forums.oracle.com/forums/thread.jspa?threadID=1394970](https://forums.oracle.com/forums/thread.jspa?threadID=1394970) (Cabir)的代码

我应该期待什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T19:46:25.933

你说“我知道 Spring Security 可以做到”，但实际上 Spring Security 并没有做任何特别的事情。它只是执行到 HTTPS 的重定向，这是您自己做的。如果您使用安全 cookie 创建会话，然后切换回 HTTP，您将丢失该会话。这在[Spring Security FAQ](http://static.springsource.org/spring-security/site/faq/faq.html#faq-tomcat-https-session)中有解释。正如它所解释的，如果您在重定向到 HTTPS 之前创建会话，那么会话 cookie 将不会被标记为安全，并将通过 HTTP 和 HTTPS 传递，从而始终保持会话。

我能想到的唯一其他选项是使用 mod_headers 或其等效项来修改`Set-Cookie`标头并删除`Secure`标志（如果存在）。[这是一个相反](https://serverfault.com/questions/235713/apache-mod-header-rule-to-change-all-cookies-to-secure)的例子，将标志添加到所有cookie。

顺便说一句，您是否尝试过[使用 HTTPS 调整网站的性能](http://blog.httpwatch.com/2009/01/15/https-performance-tuning/)？如果您的内容和用户帐户有任何真正的价值，那么您真的应该在整个应用程序中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T21:05:45.960

“会话劫持”在不同的上下文中意味着不同的事情。您正在考虑一个系统，我可以在十分钟内使用 WireShark 劫持一个会话，并且之前没有经验。我只需要获取未加密的 cookie 并将其复制到 Chrome 中。这似乎是一个太低的进入门槛。

您应该重新考虑 https 对性能的影响，这可能是[http 2.0 的必需部分](http://www.igvita.com/slides/2012/http2-spdy-devconf.pdf)（抱歉，PDF）。来自文档（第 32-33 页）：

> 在我们的生产前端机器上，SSL/TLS 占 CPU 负载的不到 1%，每个连接不到 10KB 的内存和不到 2% 的网络开销 - Adam Langley (Google)

如果性能是问题，我会花十分钟在我的服务器中配置 SPDY，而不是避免使用 https。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:56:16.307

是否可以在 Tomcat 前面放置一个 Apache HTTP 服务器？

如果您配置[反向代理](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)，您可以让 Apache 处理 SSL 流量。

通过这种方式，您可以将登录和更改密码页面的请求重定向到 HTTPS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T09:43:57.067

为什么不使用 Java 身份验证和授权服务[JAAS](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASRefGuide.html) 使用用户凭据可以使[LoginContext](http://docs.oracle.com/javase/6/docs/api/javax/security/auth/login/LoginContext.html)

LoginContext 将登录到服务器容器，登录后您可以轻松地从 HTTP 请求对象获取用户会话。通过这种方式，您可以获得用户会话，无论是 HTTP 还是 HTTPS。单击更改密码链接后，用户应被引导至安全 URL，请求对象将提供所需信息。

您可以在 JAVA API 中启用 cookie

```
CookieHandler.setDefault(new CookieManager()); 
```

或 Cookie 政策以接受所有 cookie。

`CookieManager customCookieManager = new CookieManager(); customCookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL); CookieHandler.setDefault(customCookieManager);`

# asp.net - 使用 asp.net 在中继器控件中自定义验证

> ID：13642649
> 
> 赞同：0
> 
> 时间：2012-11-30T09:49:55.513
> 
> 标签：asp.net, validation, repeater

我在转发器控件中有文本框、标签和按钮。按钮应该验证文本框。如果用户输入的数字大于 4，则会出现错误消息，并且文本框的值应根据标签框的值进行更改。

如何使用转发器内的自定义验证来验证文本框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:06:17.390

On OnItemDataBound 事件或 OnItemCreated 事件执行此代码

```
 Label lbl = (Label)e.Item.FindControl("lblId"); 
            Button btn = (Button)e.Item.FindControl("btnId");
            TextBox txt = (TextBox)e.Item.FindControl("txtId");
            CustomValidator cfv = (CustomValidator)e.Item.FindControl("cfvId");
            if (cfv != null && txt!=null&&btn!=null&&lblId!=null)
            {
                cfv.ControlToValidate = txt.ClientID;
                cfv.ClientValidationFunction = "YourFunction";
                cfv.ValidationGroup = cfv.ClientID + "ValidationGroup";
                btn.ValidationGroup = cfv.ClientID + "ValidationGroup";
                lbl.AssociatedControlID=txt.ClientID;
            }

  //javascript code on client side
  function YourFunction(sender, args)
  {
      args.IsValid=parseInt(args.Value)<=4;
      if(!args.IsValid)
         $('#'+sender.controltovalidate).val($('label:[for="'+sender.controltovalidate+'"]').text());
      return;
  } 
```

# javascript - 如何在 jquery 或 javascript 中找到 chrome 中的 activeelement

> ID：13642653
> 
> 赞同：0
> 
> 时间：2012-11-30T09:50:00.363
> 
> 标签：javascript, jquery

我想在chrome中找到activeelement如何做到这一点，在IE中我写了代码

`document.activeElement.id`

但是这个代码在 chrome 中的替换是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:56:37.530

尝试使用此 jquery 代码：

```
$(':focus') 
```

# python - 在模块之间共享资源的良好做法？

> ID：13642654
> 
> 赞同：12
> 
> 时间：2012-11-30T09:50:01.813
> 
> 标签：python, module, namespaces, globals

我正在重新组织我的代码，因此创建了新的命名空间。我正在为模块更改“静态”类（每个方法中带有 @staticmethod 的类）。这是要走的路，对吧？

问题是我对如何在这些模块之间共享资源有疑问。

假设我有一个模块，我从中进行所有与数据库的连接，当然所有类/方法都共享存储 DB 游标的变量（我正在使用 SQLite）。现在，在不同的模块中，它们也必须共享光标。

![依赖关系的图形表示](../Images/3b202bb0bd94dac28524f02b55d43e03.png)

所以，我的想法：

*   在每个模块中声明全局变量。但是全球人是邪恶的，吃掉孩子，偷走我们的工作。所以我不知道这是否是要走的路。

    ```
    '''Sub Module 1'''

    global database_cursor 
    ```

*   使用原始 database_cursor 导入“父亲”database_module 并使用如下内容：

    ```
    '''Sub Module 1'''

    db_cursor = database_module.database_cursor 
    ```

在这种情况下，第二个看起来不错，但我认为在很多情况下会导致递归导入，我想这是应该避免的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-30T10:28:41.897

你的第二种方法是要走的路。Python 导入本质上是单例的。当一个模块被多次导入时，它只会在第一次执行。随后的导入从全局中获取模块对象实例。更多关于[这里](http://docs.python.org/2/reference/simple_stmts.html#the-import-statement)。

共享的.py：

```
class Shared:
    def __init__(self):
        print("Init shared")

    def do_stuff(self, from_mod):
        print("Do stuff from {0}. I am instance {1}".format(from_mod, self))

shared = Shared() 
```

foo.py

```
import shared

shared.shared.do_stuff("foo") 
```

酒吧.py

```
import foo
import shared

shared.shared.do_stuff("bar") 
```

如果我们执行 bar.py，我们会得到：

```
>>> Init shared
>>> Do stuff from foo. I am instance <shared.Shared instance at 0x10046df38>
>>> Do stuff from bar. I am instance <shared.Shared instance at 0x10046df38> 
```

因此，在您的情况下，您可以`database_module`从任何您想要的地方进行引用，并且它只会被初始化一次，因此可以有效地共享您的连接。

# java - 单击树时如何从JTree获取节点路径？

> ID：13642655
> 
> 赞同：1
> 
> 时间：2012-11-30T09:50:03.137
> 
> 标签：java, swing, selection, jtree

我有几个节点的树，还为此创建了一个树侦听器，现在我需要在单击它时获取特定的节点路径，我已经尝试过这段代码但没有得到确切的输出有人可以帮助我吗？

```
public class FTListener implements TreeSelectionListener {

    @Override
    public void valueChanged(TreeSelectionEvent e) {
        TreePath[] tree=new TreePath[e.getNewLeadSelectionPath().getPathCount()];
        int i=0;

        tree=e.getPaths();

        for(TreePath tr:tree){
            System.out.println(tree[i]);
        i++;}

        //getPath() returns the array elements so i'm here using 
    //for loop for printing each elements. 
```

这是输出

```
[/Desktop, /home/user/Desktop, /home/user/Desktop/1302677132563_USER_MANUAL_SMS_BANKING.pdf]
[/Desktop, /home/user/Desktop, /home/user/Desktop/Lab090C .java~] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:08:25.103

做这个

```
public void valueChanged(TreeSelectionEvent e) {

    DefaultMutableTreeNode node = (DefaultMutableTreeNode)
                       tree.getLastSelectedPathComponent();

    if (node == null) {
    //since Nothing is selected.     
     return;
    }

    Object nodeObject = node.getUserObject();
    System.out.println("Selected node : " + nodeObject);
} 
```

如果您只想单选，请添加此选项

```
tree.getSelectionModel().setSelectionMode
        (TreeSelectionModel.SINGLE_TREE_SELECTION); 
```

# php - Android 图片上传脚本错误：如何修复这些错误？

> ID：13642656
> 
> 赞同：1
> 
> 时间：2012-11-30T09:50:05.577
> 
> 标签：php, android, web, upload, photo

我正在按照教程将图片从您的 Android 手机发送到网络服务器。教程在这里：

[http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/](http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/)

不幸的是，当我将 java 代码粘贴到我的文件中时，我遇到了一些错误：

```
Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(), R.drawable.a1);
// a1 cannot be resolved or is not a field 
```

还有这个：

```
String ba1 = Base64.encodeBytes(ba);
// The method encodeBytes(byte[]) is undefined for the type Base64 
```

我在评论中进一步阅读，他们说我应该用以下代码替换后面的代码：

```
String ba1 = Base64.encodeToString(ba, 0); 
```

但这仍然不起作用，说其中有一个额外的值（并且删除额外的值仍然需要我通过 Eclipse 的错误系统将一个值更改为“静态”。

我已经阅读了下面博客上的所有评论并尝试了补救措施，但似乎没有任何效果。有谁知道这个问题，或者如果我缺少一个我可以导入的库（我将如何导入它？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:01:01.083

```
Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(), R.drawable.a1); 
```

首先，您的可绘制文件夹中应该有一个名为 a1(例如 a1.png, a1.jpg, ...) 的可绘制对象。

```
String ba1 = Base64.encodeBytes(ba);
// The method encodeBytes(byte[]) is undefined for the type Base64 
```

参考这个链接，类中没有这样的方法`Base64`。 [http://developer.android.com/reference/android/util/Base64.html](http://developer.android.com/reference/android/util/Base64.html)
试试这个：

```
int flag = 0; // you can pass the default 0 = Base64.DEFAULT
String ba1 = Base64.encodeToString(ba, flag); 
```

# 3d - Z-Fighting / Z-Buffer / Away 3D 中的深度缓冲

> ID：13642658
> 
> 赞同：0
> 
> 时间：2012-11-30T09:50:22.313
> 
> 标签：3d, rendering, away3d

因此，我一直在学习如何使用 Away3D 引擎使用 Flash 开发 3D 内容，同时我正在掌握使用 Away3D 的许多技术和方法，但我现在遇到了一个问题。

![在此处输入图像描述](../Images/fe27b9b729b43166a64fdd040e042529.png)

正如您在上面看到的，我有一个带有纹理的矩形，距离其余对象 1 个单位，但是当在固定点上绕 y 轴旋转时；奇怪的事情开始发生。

我称之为z-fighting，但只有当两个物体处于完全相同的深度时才对吗？

无论哪种方式，我都需要一种方法来解决这个问题，或者一些关于使用什么或在哪里研究的指示，这个问题是我对 Away3D 不太熟悉，所以我不知道从哪里开始。

任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:20:44.140

这正是 Z-Fighting，两个对象在深度缓冲区中的深度完全相同。

A. 增加深度缓冲精度（从 16bit 到 24bit）

B. 确保您有效地使用您的深度（例如，如果您的对象在 5 .. 5000 范围内，那么使用 0.01 .. 5000 深度范围是一种浪费）

C. 在最复杂的情​​况下，您可能会分别对远处和近处的物体使用具有 2 个深度范围的 2 遍渲染。

# core-data - 在谓词中使用 CONTAINS 时 NSFetchedResultsController 崩溃

> ID：13642661
> 
> 赞同：0
> 
> 时间：2012-11-30T09:50:25.163
> 
> 标签：core-data, ios6, nspredicate

实体包含`CLPlacemark`属性。我想检查`city`字符串是否与地标的位置属性匹配。

`performFetch`当我`CONTAINS`在谓词中使用时发生崩溃。

```
predicate = [NSPredicate predicateWithFormat:@"placemark.locality CONTAINS[cd] %@", city];
[_fetchedResultsController.fetchRequest setPredicate:predicate];
        NSError *error = nil;
        if (![[self fetchedResultsController] performFetch:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:19:40.570

保存在 Core Data 中的地标不能是 a `CLPlacemark`，因为 Core Data 不支持该类型。

那么，在您的谓词中是一个具有NSString 类型`placemark`属性的 NSManagedObject吗？`locality`如果不是，则崩溃不是由于 CONTAINS 而是由于谓词试图访问`placemark.locality`不存在的属性。

因此，如果您的地标作为二进制数据类型保存在 Core Data 中，您将无法访问其组件，也无法编写引用其位置属性的谓词。

# javascript - 根据选择框值显示文本框

> ID：13642663
> 
> 赞同：0
> 
> 时间：2012-11-30T09:50:32.620
> 
> 标签：javascript, jquery

我想知道是否有人可以帮助我了解如何实现这一目标。我只想在使用javascript（inc jquery）选择选择框中的某个值时显示两个输入框。

我的选择框有这个值：

```
<select name="menu-168" class="wpcf7-validates-as-required">
<option value="Residential">Residential</option>
<option value="Commercial">Commercial</option>
</select> 
```

我的输入框有这个值：

```
<input type="text" name="text-708" value="" class="wpcf7-validates-as-required" size="40"> 
```

在伪代码中，我追求的是这样的：

```
<if select name="menu-168" value = "Commerical">
<add css property ".hidden" to input name="text-708">
</if> 
```

我的javascript知识太差了，有人介意告诉我这是怎么做的吗？这是一个带有相关 HTML 的 JSfiddle：

[http://jsfiddle.net/K9zGP/](http://jsfiddle.net/K9zGP/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:53:33.350

这是使用`jQuery`：

```
if ($("select[name='menu-168']").val() == "Commercial") {
    $("input[name='text-708']").addClass("hidden");
}​ 
```

附带说明一下，我建议您使用类而不是名称来引用 HTML 元素。类选择比属性快得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T09:55:24.503

您可以使用[`.on()`](http://api.jquery.com/on/)在选择上附加一个侦听器，以侦听更改事件。使用更改事件侦听器，您可以在有人更改所选选项时采取行动。然后，您可以[`.toggle()`](http://api.jquery.com/toggle/)根据用户在选择列表中选择的内容来显示/隐藏输入。

像这样的东西：

```
​$(function(){
    $("select[name='menu-168']").on("change", function (){           
        $("input[name='text-708']").toggle($(this).val() !== "Commercial");
    });
});​ 
```

[**工作示例**](http://jsfiddle.net/K9zGP/10/)

在此示例中，我使用属性选择器来选择您的元素，因为没有更精确的方法可以继续，但是您可以通过将 ID 添加到相关元素并将其用于选择器来获得更好的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T09:57:57.673

```
$('#menu-168').on('change', function(){
    ($this).val() = "Commericial" ? 
        $('input[name='text-708']').show() : $('input[name='text-708']').hide();
    }
}) 
```

# jquery - 如何更改横幅的宽度

> ID：13642670
> 
> 赞同：0
> 
> 时间：2012-11-30T09:51:00.743
> 
> 标签：jquery, css, width, banner

我有一个横幅，他的宽度为 100%。当我单击一个按钮时，会制作（可能使用 jQuery）横幅的宽度为 980 像素。

有谁知道帮我解决这个问题？

我尝试了这段代码，但没有奏效。：/

```
<script type="text/javascript">
$(document).ready( function() {
    $("#botao").click(function() {
        $f(.fullwidthbanner).css("width","100%");
        }).click(function() {
        $(.fullwidthbanner).css("width","980px");
    })
})
</script> 
```

元素宽度在哪个类中。全宽横幅。PS：它在样式表中。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:54:03.240

看起来您只需要做一些代码格式化...您走在正确的轨道上。

```
$(document).ready( function() {
    $("#botao").click(function() {
            $('.fullwidthbanner').css("width","980px");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:54:34.253

```
<script type="text/javascript">
$(document).ready( function() {
  $("#botao").click(function() {
     $('.fullwidthbanner').css("width","980px");
  });
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T09:55:50.467

```
<script>
$(document).ready(function() {
  $('#botao').click(function() {
     $('.fullwidthbanner').css('width', '980px');
  });
});
</script> 
```

不要忘记 jQuery 选择器中的引号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:55:29.813

你只需要写一个点击事件就像这样：对于新版本`.on`直接使用更好`.click`

[演示](http://jsfiddle.net/xaGyc/)

```
<script type="text/javascript">
$(document).ready( function() {
  $("#botao").on("click",function() {
     $(".fullwidthbanner").css("width","980px");
  });
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T10:10:46.753

请参阅 jQuery 文档[.width()](http://api.jquery.com/width/) & 。[高度（）](http://api.jquery.com/height)

**.宽度（值）**

**说明：**设置匹配元素集中每个元素的 CSS 宽度。

* * *

.宽度（**值**）

**value**一个表示像素数的整数，或一个整数以及附加的可选测量单位（作为字符串）。

```
(function() {
  var modWidth = 50;
  $("div").one('click', function () {
    $(this).width(modWidth).addClass("mod");
  modWidth -= 8;
  });
})();
​ 
```

* * *

.width（**函数（索引，宽度）**）

**function(index, width)**返回要设置的宽度的函数。接收集合中元素的索引位置和旧宽度作为参数。在函数中，this 指的是集合中的当前元素。

[这里有一个演示 JSFidle](http://jsfiddle.net/bZezzz/RSgy2/)

# javascript - 来自 Javascript VS ASP.NET 控制器的 REST 调用 REST 调用

> ID：13642677
> 
> 赞同：1
> 
> 时间：2012-11-30T09:51:13.940
> 
> 标签：javascript, asp.net-mvc, rest, controller

我是 REST 世界的新手。我正在编写一个 ASP.NET MVC 应用程序。我的要求是从客户端进行一些 REST 调用。我可以选择从 Javascript 进行这些 REST 调用，也可以在 Controller 的 C# 代码中进行。推荐哪种方法？据我了解，Controller 运行在 Web Server 上，Javascript 运行在浏览器上。如果 REST 调用是从 Web 服务器进行的，那么性能是否会下降。

有人可以建议我围绕这个的一般做法吗？是否有相同的安全问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:13:00.263

让我们考虑一下做这个服务器端的利弊

优点：

*   您可以使用服务器的力量对数据进行其他处理
*   您不会像在 ajax 中那样受到跨域限制
*   一般来说，您不必担心您的服务器能够访问资源，而在客户端上，您会受到用户网络限制、防火墙等的摆布
*   更好地控制您的 http 响应\请求生命周期

缺点：

*   您将不得不消耗更多带宽将结果数据发送到客户端。
*   您可能需要做更多的工作来利用良好的缓存实践
*   依赖于某些服务器端库\框架元素

现在，尽管我们的优点列表比缺点列表要多得多……在大多数情况下，您仍然希望在客户端上执行此操作……因为双重处理数据的问题实际上是一个非常大的问题，并且会花费你时间和金钱。

您实际上应该在服务器端执行此操作的唯一原因是您需要对数据进行大量处理，或者您无法规避 CORS（跨域）限制。

如果你只是做一些简单的事情，比如在网页上显示信息，那么客户端是更可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:57:47.690

这在很大程度上取决于您的情况。如果您简单地在页面中显示此数据而不进行任何操作，则可以从 javascript 获取它。如果您想处理这些数据，对其进行转换，将其与其他数据连接起来，我建议您在服务器上执行此操作，以便在服务器上获取此数据。

# vim - 如何更改模糊查找器弹出窗口的位置/方向？

> ID：13642679
> 
> 赞同：0
> 
> 时间：2012-11-30T09:51:20.413
> 
> 标签：vim, fuzzyfinder

我正在为vim使用[fuzzyfinder](http://www.vim.org/scripts/script.php?script_id=1984)，我希望弹出窗口在终端底部而不是顶部启动一个新窗口。此行为类似于 emacs 中的 CtrlP 插件和默认 ido-mode。我找不到任何自定义变量。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:31:19.283

你是对的，没有；您要么必须要求插件作者提供这样的选项，要么只是务实地更改源代码。（因为 FuzzyFinder 的开发似乎并不多，所以这并不是一个糟糕的选择，您也可以随时选择第一个选项。）

我认为改变必须在`~/.vim/autoload/l9/tempbuffer.vim`; 将*第二行*从：

```
function l9#tempbuffer#openScratch(bufname, filetype, lines, topleft, vertical, height, listener)
  let openCmdPrefix = (a:topleft ? 'topleft ' : '') 
```

至：

```
 let openCmdPrefix = (a:topleft ? 'botright ' : '') 
```

# java - Hibernate OneToOne 关系：无法删除子表

> ID：13642684
> 
> 赞同：1
> 
> 时间：2012-11-30T09:51:38.417
> 
> 标签：java, hibernate, mapping, one-to-one

假设我们生活在一个人只能拥有一辆车的世界中（请原谅我的蹩脚示例）

假设我有这`UserDetails`门课

```
public class UserDetails {

    @Id
    @GeneratedValue
    @Column(name = "USER_ID")
    private int id;
    @Column(name = "USER_NAME")
    private String name;
    @OneToOne
    private Vehicle vehicle;

    public Vehicle getVehicle() {
        return  vehicle;
    }

    public void setVehicle(Vehicle  vehicle) {
        this.vehicle =  vehicle;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }
} 
```

这是我的`Vehicle`课

```
@Entity
public class Vehicle {
    @Id
    @GeneratedValue
    private long vechile_id;
    private String vehicleName;
    public long getVechile_id() {
        return vechile_id;
    }
    public void setVechile_id(long vechile_id) {
        this.vechile_id = vechile_id;
    }

    public String getVehicleName() {
        return vehicleName;
    }
    public void setVehicleName(String vehicleName) {
        this.vehicleName = vehicleName;
    }   
} 
```

将其保存到数据库后它工作正常，但是当我去删除车辆表时，这个错误出现在我的工作台上

**注意**`UserDetails`和表上只有一个条目`Vehicle`。

```
ERROR 1217: Cannot delete or update a parent row: a foreign key constraint fails

SQL Statement:

drop table `hibernate`.`vehicle` 
```

怎么不让我掉表？我应该先删除 UserDetails 表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:55:10.873

如果您删除 Vehicle 表，这将使 UserDetails 表失去其参照完整性，因为车辆列的外键将指向任何地方。从 UserDetails 中删除 fk 约束或车辆列，然后您可以删除所需的表。

# windows - 文件存在的 ksh 脚本

> ID：13642685
> 
> 赞同：0
> 
> 时间：2012-11-30T09:51:38.917
> 
> 标签：windows, cygwin, ksh

对于以下代码，我总是收到“源文件不可读或不存在，请检查文件”。我在我的 Windows 机器中使用 cygwin 来运行脚本。即使文件存在于该位置，我也会收到相同的消息。我怎样才能获得更多详细信息，说明文件不可读的原因。

```
#!/bin/ksh
#
# Scanning source file for existance and readable
file_loc="abc.xml"
if [ -f "$file_loc" -a -r "$file_loc"]
then
    print "Source file read.\n"
else
    print "Source file not readable or exists, please check the file $file_loc.\n"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:12:51.607

右括号前需要一个空格：

```
if [ -f "$file_loc" -a -r "$file_loc" ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:58:38.037

```
file_loc="abc.xml" && (< ${file_loc:?}) 
```

是一种替代检查。一个优点是它针对不同的错误返回不同的消息；我们让 shell 完成所有工作。

这是如何构建的？这一行可以触发至少三种不同的消息：

`${`varname`:?` 可选消息语法将`}`检查未定义的变量，这可能表示变量名中的拼写错误。

```
(< ${file_lo:?} ) 
```

`-bash: file_lo: parameter null or not set`

`(<`filename`)` 只会尝试打开和关闭文件。

```
$ (< nonesuch ) && echo ok 
```

`-bash: nonesuch: No such file or directory`

```
$ (< /etc/shadow ) && echo ok 
```

`-bash: /etc/shadow: Permission denied`

# php - 当我在 wordpress 菜单中使用类别时，在 index.php 上设置当前页面？

> ID：13642687
> 
> 赞同：1
> 
> 时间：2012-11-30T09:51:48.650
> 
> 标签：php, css, wordpress

我在 wordpress 的主导航中使用类别。为了显示我的类别“主页”（起始页），我在 index.php 中使用了以下代码。“家”是第 4 类。

```
<?php if ( have_posts() ) : ?> <?php query_posts("cat=4"); //set cat 4 to start page ?>
            <?php /* Start the Loop */ ?> 
```

问题是当有人访问我的网站时，“主页”没有标记为当前页面。但是，如果单击“主页”，它会突出显示为当前页面。

当有人访问我的网站时，如何将类别主页设置为当前页面？我可以在上面的 php 代码中包含 css 吗？

当您单击主菜单中的链接（类别）时，在我的 css 中包含以下内容，但当有人访问网页而不单击菜单时则无效。

```
.main-navigation .current-menu-item > a,
.main-navigation .current-menu-ancestor > a,
.main-navigation .current_page_item > a,
.main-navigation .current_page_ancestor > a {
    color: #ffffff;
            background-color: #f68a1f;
} 
```

我的菜单代码如下所示（使用 wordpress 菜单）

```
<nav id="site-navigation" class="main-navigation" role="navigation">
            <h3 class="menu-toggle"><?php _e( 'Meny', 'twentytwelve' ); ?></h3>
            <div class="skip-link assistive-text"><a href="#content" title="<?php esc_attr_e( 'Skip to content', 'twentytwelve' ); ?>"><?php _e( 'Skip to content', 'twentytwelve' ); ?></a></div>
            <?php wp_nav_menu( array( 'theme_location' => 'primary', 'menu_class' => 'nav-menu' ) ); ?>
        </nav><!-- #site-navigation --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:01:55.627

不要使用 index.php，而是创建一个新的“帖子页面”页面模板，如下所述：http: [//codex.wordpress.org/Pages#A_Page_of_Posts](http://codex.wordpress.org/Pages#A_Page_of_Posts)

在该模板中，您使用`query_posts("cat=4");`代码仅显示该类别的帖子。

然后，您在 Wordpress 仪表板中创建一个新页面，将其命名为您喜欢的任何名称，并将其模板（在编辑页面上的“页面属性”块中）设置为您新创建的模板。

最后，在“设置”>“阅读”中将“首页显示”设置为“静态页面”，然后选择新创建的页面作为首页。

通过这种方式，您可以使用 Wordpress 的内置功能来创建一个包含特定类型内容的自定义页面，并且当您在该页面上时，它仍然可以识别该页面是活动的。

# c# - 避免 aspnet_compiler 运行 PreApplicationStart 方法

> ID：13642691
> 
> 赞同：24
> 
> 时间：2012-11-30T09:51:52.363
> 
> 标签：c#, asp.net, .net, aspnet-compiler

所以，我的一个网站有一个 PreApplicationStartMethod 应该在应用程序启动之前运行：

```
[assembly: PreApplicationStartMethod(typeof(ServiceStackAppHost), "Start")] 
```

此方法执行一些引导并依赖于设置的某些配置。

现在，我想编译网站作为我的自动构建过程的一部分 - 所以我调用 aspnet_compiler.exe，它失败了，因为它运行 PreApplicationStartMethod：

> AfterBuild:
> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_compiler.exe -v temp -p C:\Projects\ error ASPRUNTIME : 应用程序启动前初始化方法 Start on type RedactedNameSpace.ServiceStackAppHost 抛出异常以下错误消息：依赖项解析失败，类型=“...”

如何避免 aspnet_compiler.exe 在编译网站时调用 PreApplicationStartMethod？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-03T18:41:19.717

简短的回答是您无法阻止它运行，这是设计使然，*但*您可以解决该问题。

## 为什么 PreApplicationStart 方法在 aspnet_compiler.exe 期间运行

原因是`PreApplicationStartMethod`（或构建在它之上的[WebActivator](http://nuget.org/packages/WebActivator)）可用于实际影响编译的事情，这样如果您省略它，站点可能无法编译。

举个例子，你可以在`PreAppStart`方法中将命名空间添加到编译中，这会影响 Razor 页面的编译。

显然，当您使用 aspnet_precompiler 时，并不是每个`PreAppStart`方法都**需要**运行，但我们会运行所有方法以防万一。

## 检测你是否在 aspnet_compiler.exe 下运行

如果其中的代码在 aspnet_compiler 下中断，可能需要在`PreAppStart`方法中添加条件逻辑来检测情况并省略运行代码。

您可以查看`System.Web.Hosting.HostingEnvironment.InClientBuildManager`属性以确定您的`PreAppStart`方法是在 aspnet_compiler.exe 的上下文中`true`运行（它将在哪里），还是在运行时（它将在哪里`false`）。`InClientBuildManager`也适用于在VS内建网站，使用与aspnet_compiler.exe基本相同的代码路径。

## 尝试改用 PostStart 方法

请注意，WebActivator 也支持`PostApplicationStartMethod`，并且那些不会在 aspnet_compiler 下运行。该代码在*之后* `Application_Start`运行，因此它可能适合也可能不适合您的场景。但这可能是您的解决方案。

## aspnet_compiler.exe 调试提示

不直接相关但对调试有用：您可以将 -errorstack 传递给 aspnet_compiler.exe 以在出现错误时获得更完整的堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:40:23.620

PreApplicationStartMethod 是一个程序集属性，用于在构建过程的早期加载代码。编译器必须加载并运行此代码才能开始编译过程。PreApplicationStartMethod 类似于构建过程而不是初始化过程。因此，您可以尝试将代码放入 global.asax 中的 Application_Start 方法中！

# sql - 定义范围以覆盖数字序列中的空白 (T-SQL)

> ID：13642692
> 
> 赞同：6
> 
> 时间：2012-11-30T09:51:54.533
> 
> 标签：sql, sql-server, sql-server-2008, tsql

简化我的问题 - 我有 6 位字段，它为客户分配从 1 到 999999 的数字。大多数数字是按顺序分配的，但用户可以手动分配数字，并且此功能始终以不可预测的模式使用范围。

我们现在需要识别尚未分配的数字（简单） - 然后将其转换为多个范围（似乎很复杂）。

例如，给定以下数字已分配

```
1,2,3,4,5,
1001,1002,1003,1004,1005,
999101,999102,999103,999104,999105 
```

我需要一组结果范围，例如

```
Start  End
6      1000
1006   999100
999106 999999 
```

到目前为止，我的想法是这可能太复杂而无法在查询中编写 - 最好通过从 1 循环到 999999 并将范围添加到临时表来实现。

有兴趣听到我可以想象的想法，有几种方法。我正在使用 SQL Server 2008 R2。这是一次性练习，因此即使是非 SQL 解决方案也可能是合适的，例如，如果这在 Excel 中很容易完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:01:01.470

尝试这个

```
declare @t table (num int)

insert @t values (2),(3),(6),(7),(9),(10),(11)

select 
    MIN(number) as rangestart,
    MAX(number) as rangeend
from
(
    select *,
        ROW_NUMBER() over (order by number) -
        ROW_NUMBER() over (order by num,number) grp
    from 
    (   
        select number from master..spt_values where type='p' and number between 1 and 15 
    ) numbers 
    left join @t t
        on numbers.number = t.num       
) v
where num is null
group by grp 
```

参考： itzik ben-gan 的间隙和岛屿

创建最多 999999 的数字查询

```
select p1.number +  p2.number * 2048 as number
from 
(select * from master..spt_values where type='p' ) p1,
(select * from master..spt_values where type='p' and number<489) p2    
where p1.number +  p2.number * 2048 <=999999 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:43:28.610

```
declare @t table (num int)

insert @t values 
(2),(3),(4),(5),
(1001),(1002),(1003),(1004),(1005),
(999101),(999102),(999103),(999104),(999105)

;with cte as
(
    select num,(ROW_NUMBER() OVER(ORDER BY num)) + 1 as idx from @t
    union
    select 0 [num],1 [idx] --start boundary
    union
    select 1000000 [num],COUNT(num) + 2 [idx] from @t --end boundary
)
select c1.num + 1 [Start], c2.num - 1 [End] 
from cte c1
inner join cte c2 on c2.idx = c1.idx + 1
where c2.num != c1.num + 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:57:59.147

这是[SQLFiddle 演示](http://sqlfiddle.com/#!3/5dc19/30)

```
select 

case when max(n1)=0 then 1 else max(n1)end,
case when max(n2)=0 then 999999 else max(n2)end

from
(
select t.n+1 as n1,0 n2,
   row_number() over(order by t.n)
      +isnull((select 0 from t where n=1),1)  
      rn  
from t
left join t t2 on t.n+1=t2.n
where t2.n is null

union all 

select 0 n1, t.n-1 as n2 ,
row_number() over(order by t.n) rn 
from t
left join t t2 on t.n-1=t2.n
where t2.n is null
  and t.n>1
) t3
group by rn 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T10:34:49.193

```
create table #temp (id int)

insert into #temp (id)
values (1),(2),(3),(1000),(1001),(1002),(2000)

--drop table #temp
with cte as
(
select *, ROW_NUMBER() over(order by id) as rn
from #temp a 
)
select a.id + 1, b.id - 1
from cte a join cte b on a.rn = b.rn - 1 and a.id <> b.id -1 
```

它不包括尾部范围，例如 2001-9999

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T11:18:35.933

```
declare @t table(id int)
insert @t values
(1),(2),(3),(4),(5),(1001),(1002),(1003),(1004),(1005),
(999101),(999102),(999103),(999104),(999105)

select t1.id+1 [start], coalesce(t3.[end], 999999) [end] 
from @t t1
left join @t t2 on t1.id +1 = t2.id
cross apply
(select min(id)-1 [end] from @t where t1.id < id
) t3
where t2.id is null 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-30T10:32:26.677

if you have a table called "**kh**" for example with a column "**myval**" which is your list of integers you could try this SELECT.

```
SELECT MAX(t1.myval+1) AS 'StartRange',t3.myval-1 AS 'EndRange' 
FROM kh t1, kh t3
WHERE t1.myval+1 NOT IN (SELECT myval FROM kh t2 ORDER BY myval)
AND t3.myval-1 NOT IN (SELECT myval FROM kh t4 ORDER BY myval)
AND t1.myval < t3.myval
GROUP BY  t3.myval
ORDER BY StartRange 
```

# android - android应用在运行时添加内容

> ID：13642694
> 
> 赞同：1
> 
> 时间：2012-11-30T09:52:00.090
> 
> 标签：android, runtime, add

您好，我正在尝试构建一个包含“其他应用程序”的应用程序
，例如，我的应用程序将包含不同客户的不同应用程序。现在我想让 1 个客户可以选择只下载他的部分，但他仍然必须使用我的主应用程序。（换句话说，我不想引用另一个 APK，因为这样他就可以在不使用我的应用程序的情况下启动他的应用程序（我认为））
并且下载选项应该在运行时，否则他必须一次性下载所有内容。
我曾考虑过使用 jar 文件作为库文件，但到目前为止我发现你必须在 Eclipse 中添加它们（否则找不到它们）我还考虑过使用其中的 jar 文件构建应用程序，然后离开当我编译应用程序时，它们就出来了。然后我的客户可以在之后下载这些文件。但我猜这会导致参考错误？

所以问题是；

1.  可能吗？
2.  怎么走？

主要想法是我不想制作一个巨大的应用程序，因为我的客户只会使用他的一部分。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:51:02.857

It can be achieved in android, and some big platform apps could let the 3rd party developers to develop plugins for them. The main idea is try to create your own DexClassLoader to replace the default one, the custom DexClassLoader could load classes from apkfile.

Try to look through [this article](http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html) for details.

Same with [this question](https://stackoverflow.com/questions/1001944/android-remote-code-loading).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:24:46.000

看来这是一个很难的话题。我只能给你一点。

由于您不想制作一个庞大的应用程序，因此您必须将 CLIENT 构建为单独的 APK。但是，如果您没有在清单中将 CLIENT 的活动定义为 MAIN 和 DEFAULT，则在安装 CLIENT 应用程序后，用户无法从系统菜单（启动器）中找到 CLIENT 应用程序。您可以为 CLIENT 应用程序的活动定义一个私有意图名称，这样，只有您的主应用程序可以启动 CLIENT 应用程序的活动。

# c# - c# 子线程卡在 Thread.join()

> ID：13642699
> 
> 赞同：1
> 
> 时间：2012-11-30T09:52:09.883
> 
> 标签：c#, multithreading, static, deadlock

我们有一段以前运行良好的代码，现在它卡住了，问题似乎是运行时更新或类似的东西？

我们启动一个显示表单对话框并获取值的子线程，该值由静态类中的静态变量返回到主线程，在该语句中，线程卡住了，Visual Studio 没有说明正在发生的事情。 ..是否有另一种返回值的方法（在某些情况下有多个字符串要返回）

我们之所以需要这样做，是因为我们的软件如何执行附加程序以供工作。

示例代码：

```
public static Cons
{
   public static string inputvalue;
}
public static Funs
{
   public static string GetValueString()
   { 
       Thread threadx = new Thread(GetValueStringx);

       threadx.SetApartmentState(ApartmentState.STA);
       threadx.Start();

       if (threadx.Join(new TimeSpan(0, 3, 0)))
       {
            return ComprobarLicencia(Cons.inputvalue);
       }

       /*because the subthread is stuck the wait time (3mins) is always 
         reached and the code continues here, not getting the input value :/    */
       try
       {
           threadx.Abort();
       }
       catch
       {
       }
       return "";
   }
   public static string GetValueStringx()
   {
       WindowWrapper window = new WindowWrapper(Fun.GetForegroundWindow());
       FormInput formlicencia = new FormLicencia();
       formlicencia.ShowDialog(window);
       Cons.inputvalue = formlicencia.inputvalue; //thread gets stuck here
       /*even if i comment all the above lines and i put
         directly Cons.inputvalue="valx"; it gets stuck too :s */
   }
} 
```

最后我在[这个问题中使用](https://stackoverflow.com/questions/1314155/returning-a-value-from-thread)[这个回答](https://stackoverflow.com/a/4820936/120591)解决了它。**有什么方法可以给予该用户的信任吗？**如果不是，我会将anwser或upvotes给可以解释为什么子线程被卡住访问静态变量的人......

# java - Spring AOP 自动装配异常

> ID：13642701
> 
> 赞同：2
> 
> 时间：2012-11-30T09:52:14.393
> 
> 标签：java, spring, spring-aop, autowired

我在我的项目中使用 AspectJ。

```
@Aspect
Class FooAsspectj{
private static Logger log = LoggerFactory.getLogger(FooAsspectj.class);

@Pointcut("execution(* com.abc.Foo.getFoo(..))")
public void getFoo() { }

@Around("getFoo()")
public Object profileFoo(ProceedingJoinPoint pjp) throws Throwable {
    long start = System.currentTimeMillis();
    log.debug("Going to call the method.");
    Object output = pjp.proceed();
    log.debug("Method execution completed.");
    long elapsedTime = System.currentTimeMillis() - start;
    log.debug("Method execution time: " + elapsedTime + " milliseconds.");
    return output;

} 
```

}

```
 Class Foo{

    public void getFoo(String abc){

System.out.println("Hello Foo");
    } 
```

现在我有另一个类 UseFoo，我在其中自动装配 Foo 类

```
Class UseFoo{

@Autowired
    private Foo foo;

} 
```

我在 ApplicationContext.xml 中做了以下条目

```
<aop:aspectj-autoproxy />

<bean id="fooaspect" class="FooAsspectj" /> 
```

我收到错误

> 原因：org.springframework.beans.factory.BeanCreationException：创建名为“useFoo”的bean时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 Foo UseFoo.foo；嵌套异常是 java.lang.IllegalArgumentException: Can not set Foo field UseFoo.foo to $Proxy56

如果我删除`<bean id="fooaspect" class="FooAsspectj" />`它工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:05:59.527

这可以通过使用以下方法解决

```
 <aop:aspectj-autoproxy proxy-target-class="true"/> 
```

# python - 如何从文件中获取列表列表以更改为字典

> ID：13642702
> 
> 赞同：1
> 
> 时间：2012-11-30T09:52:15.970
> 
> 标签：python, list, dictionary, for-loop

我有一个要循环运行的文件。我的文件看起来像这样：

```
Hello Hello
A B C D
A B C D
B C D A
B C D A
C D A B
B C D A

Hello Bye
A C D B
C D A B
A C D B
D C A B 
```

我只通过再见运行一个循环，到空白行。

它应该返回：

```
 {(A, C, D, B): 2, (C, D, A, b):1, (D, C, A, B):1} 
```

有没有一种方法可以称为“全部”来添加所有排列？

我想在不使用任何导入的情况下做到这一点。

到目前为止，我的功能如下所示：

```
# input_word = Hello or Bye
def file_to_dict (file, input_word):
    new_dict = {}
    new_list = []

    flag = False
    for line in f:
        if 'Hello' in line:
            continue
        if not line.strip():
            continue
        lElts = tuple(line.split(' '))
        if lElts in dRet:
            dRet[lElts] += 1
        else:
            dRet[lElts] = 1
    return dRet 
```

有没有其他选择可以继续？

现在这给了我一个错误说：

```
ValueError: I/O operation on closed file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:01:25.283

```
read = False    
counting_dict = {}
#run through the lines in the file
for line in file:
    if read and 'Hello' not in line:
        #do as if the entry already exists
        try:
            counting_dict[tuple(line.split())] += 1
        #if not, create it
        except KeyError:
            counting_dict[tuple(line.split())] = 1
    elif 'Bye' in line:
        read = True
    #if 'Hello' is in the line but 'Bye' is not,set read to False
    else:
        read = False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:01:46.167

像这样，在 处拆分`hello Bye`，然后用于`dict.get()`向字典添加值。

```
In [17]: with open("data.txt") as f:

    spl=f.read().split("Hello Bye")

    #now spl[1] is  

    #
    #A C D B
    #C D A B
    #A C D B
    #D C A B

    #we need to now split these at '\n', or may be use `splitlines()`
    #for every line apply split, which returns ['D', 'C', 'A', 'B']
    #apply tuple() to it, to make it hashable.
    #now you can use use either defaultdict(int) or dict.get() as used below.

    dic={}                         
    for x in spl[1].split('\n'):
        if x.strip():
            key=tuple(x.split())
            dic[key]=dic.get(key,0)+1;
    print dic
   ....:     
{('D', 'C', 'A', 'B'): 1, ('A', 'C', 'D', 'B'): 2, ('C', 'D', 'A', 'B'): 1} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:11:50.013

有很多逻辑错误......我建议你看看是如何`elif`工作的

```
def f_to_dict(f):
    dRet = {}
    for line in f:
        if 'Hello' in line:
            continue
        if not line.strip():
            continue
        lElts = tuple(line.split(' '))
        if lElts in dRet:
            dRet[lElts] += 1
        else:
            dRet[lElts] = 1
    return dRet 
```

# c# - 在 webcontrol 上执行 javascript 或 C# 代码

> ID：13642706
> 
> 赞同：0
> 
> 时间：2012-11-30T09:52:24.020
> 
> 标签：c#, input, webbrowser-control

我正在使用 Visual Studio 2010 在 C# 中制作 Windows 窗体应用程序。

我想要做的是，用webbrowser控件进入一个页面，然后在输入框中插入一个值，然后提交表单。

导航部分并不难，并且已经处理好了。但我无法让文本插入工作......

问题是输入没有ID，只有名称。

在 JQuery 中，代码将如下所示：

```
$('input[name="searchstring"]').val("hoi"); 
```

但是这在 C# 代码中会是怎样的呢？（或 C# 和 Javascript / Jquery 的组合）

我已经有这个代码：

```
HtmlElementCollection playerSearchBox = webBrowserSearchPlayer.Document.GetElementsByTagName("searchstring");
playerSearchBox[0].InnerText = "hoi"; 
```

我使用该 C# 代码得到的错误如下：

> 值“0”对“索引”无效。“索引”应介于 0 和 -1 之间。参数名称：索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:17:38.960

它可以是这样的。

```
var input = webBrowserSearchPlayer.Document.GetElementsByTagName("input")
                    .Cast<HtmlElement>()
                    .FirstOrDefault(i => i.GetAttribute("name") == "searchstring"); 
```

# python - Python：转换输出并访问 HTTP

> ID：13642711
> 
> 赞同：0
> 
> 时间：2012-11-30T09:52:54.053
> 
> 标签：python, http

我有这个子流程：

```
import subprocess
subprocess.call(['/home/pi/script','-c' "echo '$OUTPUT'"]) 
```

中`$OUTPUT`，我会收到一个 URL。

1.  如何将`$OUTPUT`in 转换为字符串（URL）？
2.  如何访问 URL（只有一个数字 1-5 的网站）并将 URL 中的 Integer 获取回 Integer 变量号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:17:08.307

对于你的第一个问题，你可以使用这个：

```
# Assume cmd = the process you want to execute with its parameters
# In your case, cmd = ['/home/pi/script','-c' "echo '$OUTPUT'"]
pipe = subprocess.Popen(cmd, stdout = subprocess.PIPE)
result = pipe.stdout.read()
#=> Result contains your URL, as a String 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:17:46.387

“1\. 如何将 $OUTPUT 转换为字符串（URL）？”

就是`"echo '$OUTPUT'"`这样。然后从子进程对象的标准输出管道中读取它。（这意味着您需要使用`subprocess.Popen()`）

“2\. 如何访问 URL（是一个只有一个数字 1-5 的网站）并将 URL 中的 Integer 取回 Integer 变量号？”

使用`urllib`, 或在 Python 3 中, `http.request`.

# c# - 数据表选择表达式

> ID：13642714
> 
> 赞同：0
> 
> 时间：2012-11-30T09:53:05.173
> 
> 标签：c#, datatable

我想选择那些有重复的 gesellschaft_id。我使用了下面的代码。这是选择不同的 gesellschaft_id。如何编写选择表达式来选择该行，哪些行，gesellschaft_id 在数据表中有更多的值？

```
foreach (DataRow dr1 in table1.Rows)
        {
            DataRow[] drDup = table2.Select("('" + dr1[0].ToString() + "' = gesellschaft_id ) AND Count(gesellschaft_id)>1");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:08:59.597

你可以做这样的事情，假设第一列是你想要检查重复的那一列。这当然假设您有可用的 Linq。

```
var duplicateIds = table2.AsEnumerable()
                         .GroupBy(row = row[0])
                         .Where(x => x.Count() > 1); 
```

如果您在问题中添加更多细节，那将很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:15:12.097

这将为您提供在多行中存在`DataRow`a 的 s ：`gesellschaft_id`

```
var rowsWithADuplicateGesellschaftId = table1.Rows
    .Cast<DataRow>()
    .GroupBy(row => row["gesellschaft_id"])
    .Where(group => group.Count() > 1)
    .ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:06:33.460

```
public ArrayList FindDuplicateRows(DataTable dTable, string colName)
{
   Hashtable hTable = new Hashtable();
   ArrayList duplicateList = new ArrayList();

   //add duplicate item value in arraylist.
   foreach (DataRow drow in dTable.Rows)
   {
      if (hTable.Contains(drow[colName]))
         duplicateList.Add(drow);
      else
         hTable.Add(drow[colName], string.Empty); 
   }

      return duplicateList;
} 
```

也有用的重复查找和添加/删除链接：

[http://www.dotnetspider.com/resources/4535-Remove-duplicate-records-from-table.aspx](http://www.dotnetspider.com/resources/4535-Remove-duplicate-records-from-table.aspx)

[http://www.dotnetspark.com/kb/94-remove-duplicate-rows-value-from-datatable.aspx](http://www.dotnetspark.com/kb/94-remove-duplicate-rows-value-from-datatable.aspx)

# c# - Emgu SURF 特征匹配问题

> ID：13642718
> 
> 赞同：3
> 
> 时间：2012-11-30T09:53:09.747
> 
> 标签：c#, surf, emgucv, orb

我正在尝试使用带有 BruteForce 匹配器的 emgu SURF 和 ORB 功能来检测对象，但是得到了非常错误的结果，如下图所示。下面两张图分别是surf和orb特征匹配的结果，阈值为0.8，k=2。谁能告诉我如何解决这个问题，或者在这个场景图像中无法检测到物体（钻头）？我在 emgu 中使用示例 SURF 代码。我尝试了许多不同的阈值 k 值，但从未得到可接受的结果。代码的哪一部分可能包含错误；关键点检测、特征提取或匹配？我尝试过不同的关键点检测和特征提取方法，例如 sift、freak 和brief，但匹配结果永远不会比以下更好。请指导我。

谢谢

![SURF 特征匹配](../Images/b75d1f3a6e9365a23c8bdc74c0acc6c4.png)

![ORB 特征匹配](../Images/c42f85cc7746179a65c2a145d91423a0.png)

# java - Java - 停止 ExecutorService 中的所有任务

> ID：13642723
> 
> 赞同：7
> 
> 时间：2012-11-30T09:53:13.800
> 
> 标签：java, concurrency, executorservice

我有一些执行程序服务可以安排本地任务，例如读取文件、连接到数据库等。这些进程会进行大量的日志记录，这是基于有许多线程同时运行的事实，将它们自己的东西写入日志的事实。 .

现在，在某个时间点可以引发异常，该异常会到达捕获所有异常的 main 方法。然后我将关闭所有服务并取消每个任务，希望能阻止所有进一步的消息进入日志。不幸的是，在我关闭所有内容后，这些消息仍然出现......有什么想法吗？

更新：这是一些代码

```
public class Scheduler{

private final ExecutorService service;
private final ConcurrentMap<Object, Future<V>> cache;

...

public void shutDown() {
    service.shutdownNow();
    for (Future task : cache.values())
        task.cancel(true);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T10:11:27.487

该任务将继续运行，直到它检测到线程已被中断。调用某些系统或线程函数时可能会发生这种情况，并且您可能会抛出异常。在您的情况下，您可能需要通过调用来检查自己

`Thread.currentThread().isInterrupted()`

如果您的代码运行循环并且您希望以这种方式停止，那么这样做是一个好主意。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T10:05:43.687

当您`shutdownNow`的执行者或调用时`cancel(true)`（顺便说一下，`shutdownNow`已经取消了已经提交的任务，因此您的循环是不必要的）您的任务会被中断。

根据他们对中断的反应，他们可能会：

*   立即停止他们正在做的事情
*   一段时间后停止他们正在做的事情，因为没有定期检查中断信号
*   继续做他们正在做的事情，因为中断信号已被忽略

例如，如果您的任务运行`while(true)`循环，您可以将其替换为以下内容：

```
while(!Thread.currentThread().isInterrupted()) {
    //your code here
}
cleanup();
//and exit 
```

另一个例子：

```
for (int i = 0; i < aBigNumber; i++) {
    if (Thread.currentThread().isInterrupted()) { break; }
    //rest of the code for the loop
}
cleanup();
//and exit 
```

另一个例子，如果你调用一个抛出 InterruptedException 的方法：

```
try {
    Thread.sleep(forever); //or some blocking IO or file reading...
} catch (InterruptedException e) {
    cleanup();
    Thread.currentThread.interrupt();
    //and exit
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T09:59:52.557

Executors 支持 2 种关闭方法

**shutdown()**：启动有序关闭，其中执行先前提交的任务，但不会接受新任务。如果已经关闭，调用没有额外的效果。

**shutdownNow()**：尝试停止所有正在执行的任务，停止等待任务的处理，并返回等待执行的任务列表。除了尽最大努力停止处理正在执行的任务之外，没有任何保证。

参考：[http](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow) ://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow ()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:59:12.217

**-**尝试使用该`shutdowNow()`方法，它会关闭所有由这个 Executor throwing 启动的任务，`InterruptedException`但**不能被中断。**`IO``Synchronized operation`

 ****例如：**

```
ExecutorService executor = Executors.newFixedThreadPool();

executor.execute();

...
...

executor.shutdownNow(); 
```

**-** `cancel(true)`方法可以与**关闭特定任务的**`submit()`方法一起使用。**

# c# - 在 Windows 应用程序上使用 Enter 键进行搜索？

> ID：13642728
> 
> 赞同：-5
> 
> 时间：2012-11-30T09:53:25.300
> 
> 标签：c#, winforms

我是 c# 的新手，当用户输入要搜索的内容时，我有一个`TextBox`和一个，单击搜索按钮时会成功填充。但我担心的是搜索按钮使用 ENTER KEY 来搜索 gridview 中的数据。`gridview``Textbox``gridview`

```
private void textBox3_TextChanged(object sender, KeyPressEventArgs e1, EventArgs e) 
{
    if (e1.KeyCode == Keys.Enter) 
    { 
       string sql = "[DocEntry],[JobCardNo],[ITEMNAME],[OD] ,[PlanQty],
                      [FinalInspectionRemarks] ,[OrderDate] ,[Division]
                          WHERE JobCardNo ='" + textBox3.Text.ToString() + "'";  
       SqlDataAdapter da = new SqlDataAdapter(sql, objConn1); DataSet ds = new DataSet(); 
       objConn1.Open(); 
       da.Fill(ds, "ProductionInventoryReport"); 
       dataGridView1.DataSource = ds; //dataGridView1.DataBind();  
       dataGridView1.DataMember = "ProductionInventoryReport"; 
       objConn1.Close(); e1.Handled = true; 
     } 
 } 
```

我试过这个但没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:58:23.050

您可以使用[**AcceptButton**](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton%28v=vs.100%29.aspx)属性。**在您的构造函数**或**Form_Load**事件
中尝试以下代码。

 ****```
this.AcceptButton =  //give your search Button name here 
```

如果要*删除搜索按钮*，则可以使用以下代码：（粗略代码）

```
Button btnSearch = new Button();  //Create a New Button
btnSearch.Visible = false;         //Optional
btnSearch.Click += new EventHandler(/*Your Method name for Search*/);
this.AcceptButton = btnSearch; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:56:27.277

而不是 TextChanged 事件在[KeyPress](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)事件上执行。

首先将事件附加到文本框，无论是在设计器中还是在如下代码中：

```
textBox3.KeyPress += new System.Windows.Forms.KeyPressEventHandler(this.textBox3_KeyPress); 
```

然后

```
 private void textBox3_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar == (char)13) // enter key pressed
            { 
             //searchMethod(); 
            }
        } 
```

如果您将搜索代码提取到单独的方法中，然后针对您的搜索按钮和 KeyPress 事件调用相同的方法，则效果会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:58:19.053

```
private void textBox3_KeyDown(object sender, KeyEventArgs e) {

    if (e.KeyCode == Keys.Enter)
    {
        //Your searchMethod();
    }
} 
```****

# asp.net-mvc - ASP.NET MVC 4 重定向回索引视图

> ID：13642732
> 
> 赞同：4
> 
> 时间：2012-11-30T09:53:39.183
> 
> 标签：asp.net-mvc, indexing

马上开始：我是使用 asp.net mvc 4 的新手。

我有一个创建 excel 文件然后将其转换为 PDF 的操作。

从视图

```
@Html.ActionLink("Generate Invoice", "genInvoice", new { id = item.invoiceID }) | 
```

行动：

```
public ActionResult genInvoice(int id = 0)
    {
        var invoiceItems = from k in db.InvoiceItems
                           where k.invoiceID == id
                           select k;

        string invoiceClient = (from kk in db.Invoices
                                where kk.invoiceID == id
                                select kk.clientName).Single();

        invoiceClient = invoiceClient + "_" + DateTime.Now.ToString("ddd dd MMM yyyy hhTmm");
        string websitePath = Request.PhysicalApplicationPath;
        string pathName = websitePath + "\\" + invoiceClient ;
        generateInvoice(invoiceItems, pathName + ".xlsx", id);
        convertToPDF(pathName, invoiceClient);

//Response.AppendHeader("Content-Disposition", "attachment");

          var viewModel = new InvoiceItemAdd();
          viewModel.Invoices = db.Invoices
              .Include(i => i.InvoiceItems)
              .OrderBy(i => i.invoiceID);
        return View("Index", viewModel);
        //return RedirectToAction("Index",viewModel);

    } 
```

现在我想最终下载 PDF 文件，然后返回索引视图。它进入索引视图打印 html 等，但随后窗口保持为带有 url 的白屏：/Invoice/genInvoice/1

知道我该怎么做吗？（PDF生成后返回索引视图，也下载它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:44:24.547

对不起，我解决了白屏问题。尝试下载 PDF 时

```
//Response.AppendHeader("Content-Disposition", "inline; filename="+invoiceClient+".pdf");
            //Return File(output, "application/pdf");
            //Response.Flush();

            //Response.End(); 
```

Response.End() 没有被注释掉，我猜这停止了它。

现在的问题是如何在单独的选项卡中打开 PDF 并使用上述代码返回当前索引。

编辑：决定文件可以下载。

```
public FileResult genInvoice(int id = 0)
{
//More code
Response.AppendHeader("Content-Disposition", "attachment; filename="+pathName+".pdf");
return File(websitePath + "\\" + invoiceClient + ".pdf", "application/pdf");
} 
```

# algorithm - 如果循环体中没有发生任何事情，for循环的复杂性是多少

> ID：13642733
> 
> 赞同：3
> 
> 时间：2012-11-30T09:53:41.697
> 
> 标签：algorithm, complexity-theory

**代码：**

```
 int c = 0;
            for (int i = 0; i < n; i++)
            {
                for (int j = 0; j < n; j++)
                {
                    c = i * j;
                }
            } 
```

**时间复杂度：** O(n ² )

现在以下代码的复杂性是什么：

```
 for (int i = 0; i < n; i++)
            {
                for (int j = 0; j < n; j++)
                {
                    //c = i * j;
                    // nothing is happening inside the loop
                }
            } 
```

复杂性是否与上述相同（ O(n ² ) ）或其他？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T09:54:42.820

从理论上讲 - 是的，因为仍然存在增加`i`和`j`仍然需要发生的问题，并将它们与每次迭代中的最终值进行比较。

但是 - 编译器可能会优化它以在恒定时间内完成，并且只需设置 and 的后`i`值`j`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:31:26.757

两种复杂度都是 O(N^2)。

# facebook-opengraph - LinkedIn 和 Open Graph

> ID：13642734
> 
> 赞同：2
> 
> 时间：2012-11-30T09:53:46.877
> 
> 标签：facebook-opengraph, linkedin

我在我的网络中使用开放图形元标记。Google Plus 按钮很好，似乎可以读取标签，但linkedin 按钮没有。

我不知道 LinkedIn 是否还有其他元数据或什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T02:00:31.057

To the guys using Wordpress and having Better Security Plugin installed, you need to remove the following line in your .htaccess file under the wordpress installation folder:

```
RewriteCond %{HTTP_USER_AGENT} ^Link [NC,OR] 
```

This line is blocking the LinkedIn bots.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:14:22.460

Victor，Linkedin Scraper 存在重大问题。当您发布此内容时，它似乎有问题，并且现在仍然存在问题。他们的开发者论坛上有几个主题——但是，有人说这不是开发者的问题，因为它不使用他们的 API……只要你有正确的 OGP 设置（在[https://developer.linkedin 中描述。 com/documents/setting-display-tags-shares](https://developer.linkedin.com/documents/setting-display-tags-shares)）我不会担心的。

# jquery - 与 JSON / JSONP 斗争

> ID：13642735
> 
> 赞同：1
> 
> 时间：2012-11-30T09:53:46.757
> 
> 标签：jquery, ajax, json, jsonp

我对 JSON 善良的世界真的很陌生，并且真的很难让跨域请求工作。真的很努力:(

我的代码是：

```
$.getJSON('http://api.steampowered.com/IEconDOTA2_570/GetHeroes/v0001/?language=en_us&key=<MY KEY HERE>&callback=?', function(data) {
    alert("success");
}); 
```

据我了解，添加 &callback=? 到 url 的末尾意味着它将调用我接下来的函数，它应该会弹出一个简单的警报框。出于某种原因，这永远不会发生。在 Firebug 中查看时，我可以看到 Response 很好，并且预期的数据结果在那里......但是我的函数从未被调用。但是，如果我尝试为回调定义特定函数，我不会得到响应。真的很困惑，非常感谢任何帮助。

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:56:32.680

试试这个代码：

```
$.ajax({ url:'http://api.steampowered.com/IEconDOTA2_570/GetHeroes/v0001/?language=en_us&key=<MY KEY HERE>',
         dataType:'jsonp',
         succes:function(data) {
           alert("success");
        }
}); 
```

`$.getJSON`- 它仅适用于 json。但是`$.ajax`with`dataType:'jsonp',`会正确添加回调

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:57:22.967

您可以[`ajax()`](http://api.jquery.com/jQuery.ajax/)像这样使用该方法：

```
$.ajax({
  url: "'http://api.steampowered.com/IEconDOTA2_570/GetHeroes/v0001/?language=en_us&key=<MY KEY HERE>",
  cache: false,
  dataType: 'jsonp',
  success: function( data ){
    alert("success");
  }
}); 
```

# svn - SVN：递归加法

> ID：13642736
> 
> 赞同：40
> 
> 时间：2012-11-30T09:53:48.317
> 
> 标签：svn

我正在尝试从我的工作副本中的 SVN 文件夹中添加新的项目文件。它询问一个选项“递归”，并带有一条消息“您确定要添加***许多项目吗？” . 有人可以指导我启用此“递归”选项的用途吗？我是否应该在新添加新项目文件时启用它？

谢谢你。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-10-02T07:13:08.280

短版：**svn add * --force**是你所需要的

长版：根据[svn 添加](http://svn.gnu.org.ua/svnbook/svn.ref.svn.c.add.html)手册页

通常，命令 svn add * 将跳过任何已经在版本控制下的目录。但是，有时您可能希望在工作副本中添加每个未版本控制的对象，包括那些隐藏在更深处的对象。传递 --force 选项使 svn add recurse 到版本化目录中：

```
$ svn add * --force
A         foo.c
A         somedir/bar.c
A         otherdir/docs/baz.doc 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-02-10T09:07:34.840

如果您应该启用递归选项，首先回答您的问题：如果您复制了一个包含多个文件和嵌套文件夹的文件夹结构，那么您需要递归添加。

在命令行中，这应该适合您：

```
svn add * --depth infinity 
```

如果它不起作用，您可以尝试使用“--force”参数：

```
svn add * --force --depth infinity 
```

或者，在某些情况下，忽略属性会造成麻烦，您可能还需要使用 '--no-ignore' 才能成功：

```
svn add * --force --no-ignore --depth infinity 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-15T13:19:57.477

我不得不求助于使用我们的老朋友`find`如下：

`cd root_folder_I_want_to_checkin`

递归添加文件夹：

`find . -type d -exec svn add {} \;`

检查状态（都应显示为`A`）：

`svn status`

有些文件仍然显示状态`?`，所以我也这样做了：

`find . -type f -exec svn add {} \;`

现在`svn status`显示 all are `A`，所以现在：

`svn commit . -m 'blah blah blah.'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-21T12:35:32.300

`svn add * --force`添加 zip 文件时对我不起作用。

相反，我必须到`cd`包含 zip 文件的目录并运行`svn add .`

```
$ svn add .
A         .
A  (bin)  SOAPUI_TEST_1.zip
A  (bin)  SOAPUI_TEST_2.zip
A  (bin)  SOAPUI_TEST_3.zip
A  (bin)  SOAPUI_TEST_4.zip 
```

# asp.net-mvc - MVC 4 数据访问程序集

> ID：13642738
> 
> 赞同：2
> 
> 时间：2012-11-30T09:53:53.520
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, ef-code-first, entity-framework-5

我有一个问题，我不理解带有 EF 5 Code First 数据库的 MVC4。这是代码：

```
Ligne 193 :            if (db.Persons.Any())
Ligne 194 :            {
Ligne 195 :                var author = (from a in db.Persons
Ligne 196 :                              where a.Uid == uid
Ligne 197 :                              select a).SingleOrDefault(); 
```

错误消息在第 195 行：“Impossible de Charger le fichier ou l'assembly 'DataAccess' ou une de ses dépendances。Le fichier spécifié est introuvable。” 在法语中，这意味着“无法加载文件或程序集'DataAccess'或其依赖项之一。找不到文件”。

如您所见，我可以在第 193 行连接到数据库并检查该行是否存在于数据库中。此错误发生在某些页面上，但并非全部发生。例如，我可以在索引中列出相关的人员和“对象”，我可以创建相关的人员和对象，如公司

```
public class Person
{
    //... things
    public virtual ICollection<Company> Companies {get;set;}
} 
```

那么，你知道为什么我有这个 DataAccess 错误，为什么不是到处都有吗？

谢谢

# java - Java 应用程序在 Ubuntu 12.04 上没有收到信号

> ID：13642742
> 
> 赞同：4
> 
> 时间：2012-11-30T09:53:58.887
> 
> 标签：java, ubuntu, signals, kill, sigterm

奇怪的问题

我正在尝试在接收信号时正确关闭我的 Java 应用程序，或者通过 kill 手动发送。我尝试杀死 SIGTERM、SIGHUP、SIGINT 等，并且每次 JVM 只是停止而不调用运行时关闭挂钩时，最后都会阻止或发出在 Java 代码中创建的陷阱。

```
 Runtime.getRuntime().addShutdownHook(new Thread("Shutdown hook") {
        @Override
        public void run() {
            vd.pretendRemoveAll();
        }
    }); 
```

并在 shutdownHook 不起作用时添加了处理程序

```
 SignalHandler h = new SignalHandler() {
        @Override
        public synchronized void handle(Signal sig) {
            _logger.warn("Received signal: {}", sig);
            vd.pretendRemoveAll();
            System.exit(0);
        }
    };
    Signal.handle(new Signal("INT"), h);
    Signal.handle(new Signal("KILL"), h);
    Signal.handle(new Signal("HUP"), h);
    Signal.handle(new Signal("TERM"), h); 
```

我在 Ubuntu 12.04 上运行 Java java 版本“1.6.0_24”

> OpenJDK 运行时环境 (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
> 
> OpenJDK 64 位服务器 VM（内部版本 20.0-b12，混合模式）

我也试过用Oracle Java jdk1.6.0_37，效果一样

当我在进程中使用 strace 来查看会发生什么时，我得到：

> user@server:~/appdir$ sudo strace -v -p 32277Process 32277 附加 - 中断到 quitfutex(0x7f667f07d9d0, FUTEX_WAIT, 32278, NULL) = ? ERESTARTSYS（要重新启动）--- SIGTERM（终止）@ 0 (0) --- futex(0x7f667e2543e0, FUTEX_WAKE_PRIVATE, 1) = 1 rt_sigreturn(0x7f667e2543e0) = 202 futex(0x7f667f07d9d0, FUTEX_WAIT, 32272 附加 77 NULLIC PID以 143 退出

这个 NULLPANIC 看起来很可疑，但我不知道接下来会发生什么。

我在 Mac 上测试了该代码并且没有问题。任何想法是什么导致了问题以及如何解决这个问题？是否需要设置一些安全功能/策略？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-25T16:22:22.450

这段代码灵感来自 [http://hellotojavaworld.blogspot.fr/2010/11/runtimeaddshutdownhook.html](http://hellotojavaworld.blogspot.fr/2010/11/runtimeaddshutdownhook.html)，在 Ubuntu、jdk 1.6.30 上运行良好，如何调用 addShutdownHook 方法？您必须在 Class 实例中，而不是在静态 main 方法中。

```
public class AddShutdownHookSample {
 public void attachShutDownHook(){
  Runtime.getRuntime().addShutdownHook(new Thread() {
   @Override
   public void run() {
    System.out.println("Inside Add Shutdown Hook");
   }
  });
  System.out.println("Shut Down Hook Attached.");
 }
public static void main(String[] args) throws InterruptedException {

  AddShutdownHookSample sample = new AddShutdownHookSample();
  sample.attachShutDownHook();
        Thread.sleep(1000*60*1);
            //Print a message
  System.out.println("Last instruction of Program....");
  System.exit(0);
 }} 
```

# plsql - 如何在 oracle 中调用存储过程与每日计划作业？

> ID：13642745
> 
> 赞同：4
> 
> 时间：2012-11-30T09:54:04.747
> 
> 标签：plsql, oracle11g, job-scheduling

我是 Oracle 作业脚本的新手。我编写了一些清除程序来清除所有旧数据并保留最近 3 个月的数据...程序成功执行。当我手动调用时它也可以工作。程序如下：

```
CREATE OR REPLACE PROCEDURE Archive 
IS

       v_query varchar2(2048);
       v_tablename VARCHAR2(50);
       v_condition varchar2(50);
       TYPE cur_typ IS REF CURSOR;
       c cur_typ;
BEGIN 
    OPEN c for 'select tablename,columnname from pseb.purge_tables';
        FETCH c INTO v_tablename,v_condition;
        LOOP
           EXIT WHEN c%NOTFOUND;
           if(v_tablename ='cfw.DCTBLPERFCUMULATIVEMASTER') then
               v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB3MAINREG where cumulativeid in (select cumulativeid FROM '|| v_tablename || ' WHERE ' || v_condition||' < sysdate-90';
               execute immediate v_query;
               v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB4TODENERG where cumulativeid in (select cumulativeid FROM '|| v_tablename || ' WHERE ' || v_condition||' < sysdate-90';
               execute immediate v_query;
               v_query:='delete from cfw.DCTBLPERDFCUMULATIVEB5MAXDEMAN where cumulativeid in (select cumulativeid FROM '|| v_tablename || ' WHERE ' || v_condition||' < sysdate-90';
               execute immediate v_query;
               v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB6TODREG where cumulativeid in (select cumulativeid FROM '|| v_tablename || ' WHERE ' || v_condition||' < sysdate-90';
               execute immediate v_query;
               v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB7MAXDEMAN where cumulativeid in (select cumulativeid FROM '|| v_tablename || ' WHERE ' || v_condition||' < sysdate-90';
               execute immediate v_query;
               v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB8MAXDEMAN where cumulativeid in (select cumulativeid FROM '|| v_tablename || ' WHERE ' || v_condition||' < sysdate-90';
               execute immediate v_query;
               v_query:='delete FROM '|| v_tablename || ' WHERE ' || v_condition||' < sysdate-90';
               execute immediate v_query;
           else
           begin
               v_query:='delete FROM '|| v_tablename || ' WHERE ' || v_condition||' < sysdate-90';
               execute immediate v_query;
           end;
           end if;
       FETCH c INTO v_tablename,v_condition;
        end LOOP;
        close c;
END; --Procedure 
```

我的 JOb 脚本如下：

```
begin
  DBMS_SCHEDULER.CREATE_JOB (
     job_name           =>  'purgeproc_automation',
     job_type           =>  'STORED_PROCEDURE',
     job_action         =>  'call pseb.archive();',
     repeat_interval    =>  'FREQ=DAILY;INTERVAL=2', /* every other day */
     auto_drop          => false,
     enabled            => true,
   comments           =>  'My new job');
end;
/ 
```

作业创建成功，但作业状态为 failed ， not succeed 。背后的原因是什么？它返回以下错误：

```
ORA-06550: line 1, column 728:
PLS-00103: Encountered the symbol "PSEB" when expecting one of the following:

   := . ( @ % ;
The symbol ":=" was substituted for "PSEB" to continue. 
```

请指导我解决这个问题...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:29:08.187

天哪，你的代码看起来很复杂。首先考虑这个简化：

```
CREATE OR REPLACE PROCEDURE Archive 
IS
   v_query varchar2(2048);
BEGIN 
    FOR REC IN (select tablename,columnname condition from pseb.purge_tables)
    LOOP
       if(rec.tablename ='cfw.DCTBLPERFCUMULATIVEMASTER') then
           v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB3MAINREG where cumulativeid in (select cumulativeid FROM '|| rec.tablename || ' WHERE ' || rec.condition||' < sysdate-90';
           execute immediate v_query;
           v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB4TODENERG where cumulativeid in (select cumulativeid FROM '|| rec.tablename || ' WHERE ' || rec.condition||' < sysdate-90';
           execute immediate v_query;
           v_query:='delete from cfw.DCTBLPERDFCUMULATIVEB5MAXDEMAN where cumulativeid in (select cumulativeid FROM '|| rec.tablename || ' WHERE ' || rec.condition||' < sysdate-90';
           execute immediate v_query;
           v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB6TODREG where cumulativeid in (select cumulativeid FROM '|| rec.tablename || ' WHERE ' || rec.condition||' < sysdate-90';
           execute immediate v_query;
           v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB7MAXDEMAN where cumulativeid in (select cumulativeid FROM '|| rec.tablename || ' WHERE ' || rec.condition||' < sysdate-90';
           execute immediate v_query;
           v_query:='delete from cfw.DCTBLPERFDCUMULATIVEB8MAXDEMAN where cumulativeid in (select cumulativeid FROM '|| rec.tablename || ' WHERE ' || rec.condition||' < sysdate-90';
           execute immediate v_query;
           v_query:='delete FROM '|| rec.tablename || ' WHERE ' || rec.condition||' < sysdate-90';
           execute immediate v_query;
       else
           v_query:='delete FROM '|| rec.tablename || ' WHERE ' || rec.condition||' < sysdate-90';
           execute immediate v_query;
       end if;
    END LOOP;
END; --Procedure 
```

dbms_job.submit 的替代作业定义：

```
declare 
 jid number;
begin
dbms_job.submit(
    JOB => jid,
    WHAT => 'pseb.archive;', 
    NEXT_DATE => SYSDATE, 
    INTERVAL  => 'sysdate +2');
end;
/
commit; -- <<--added commit here 
```

检查作业的方法：

```
select * from user_jobs; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-15T18:46:10.567

从调度程序作业执行存储过程的最简单方法是更改`job_type`​​ .

休息你可以使用你自己的价值观。试试这个并回发结果。

例子：

```
job_type             => 'STORED_PROCEDURE',

job_action           => '"OWNER"."PROCEDURE_NAME"', 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:25:34.847

似乎您正在混合使用 create_job 和 create 程序的两种不同方式。请务必将您的脚本更改为以下内容：

```
begin
  DBMS_SCHEDULER.CREATE_JOB (
     job_name           =>  'purgeproc_automation',
     job_type           =>  'PLSQL_BLOCK',
     job_action         =>  'BEGIN call pseb.archive(); END;',
     repeat_interval    =>  'FREQ=DAILY;INTERVAL=2', /* every other day */
     auto_drop          => false,
     enabled            => true,
   comments           =>  'My new job');
end;
/ 
```

# encoding - 维基转储编码

> ID：13642747
> 
> 赞同：2
> 
> 时间：2012-11-30T09:54:08.420
> 
> 标签：encoding, utf-8, wiki, dump, wikimedia-dumps

我正在使用 WikiPrep 处理最新的 wiki 转储 enwiki-20121101-pages-articles.xml.bz2。而不是“使用 Parse::MediaWikiDump;” 我将其替换为“使用 MediaWiki::DumpFile::Compat;” 并对代码进行了适当的更改。然后，我跑了

```
perl wikiprep.pl -f enwiki-20121101-pages-articles.xml.bz2 
```

我有一个错误

```
enwiki-20121101-pages-articles.xml.bz2:1: parser error : Document is empty
BZh91AY&SY±H¦ÂOÿ~Ð`ÿÿÿ¿ÿÿÿ¿ÿÿÿÿÿÿÿÿÿÿ½ÿýþdß8õEnÞ¶zëJ¨Eà®mEÓP|f÷Ô
^ 
```

我猜转储中包含一些非 utf8 字符。所以我跑了

```
iconv -f utf8 -t utf8 enwiki-20121101-pages-articles.xml.bz2 
```

确实，我遇到了一些错误

```
BZh91AY&SYiconv: illegal input sequence at position 10 
```

所以，我的问题是 wiki 转储的编码格式是什么，如果我想将其转换为 utf-8，我该怎么办？或者应该如何修改 wikiprep.pl 以避免此类问题。

非常感谢

-- [已解决] 我应该先解压文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-06T11:46:37.533

您在文件的压缩 (bz2) 版本上运行 iconv，而不是在 XML 文件本身上运行。先解压。

（发布 borrible 的答案，以便这个已解决的问题不会被列为未回答。）

# java - 逐行下载文件java

> ID：13642748
> 
> 赞同：0
> 
> 时间：2012-11-30T09:54:08.657
> 
> 标签：java, bufferedreader, inputstreamreader

我知道这个问题对你们大多数人来说可能听起来很基础。我需要从服务器下载一个大文件。该文件的第一行包含一个时间标签。只有当我的时间标签与文件的时间标签不匹配时，我才想下载整个文件。为此，我使用给定的代码。但是，我不确定这是否真的可以防止文件无用地下载整个文件。

请帮帮我！

```
public String downloadString(String url,String myTime)
{
    try {
           URL url1 = new URL(url);
           URLConnection tc = url1.openConnection();
           tc.setConnectTimeout(timeout);
           tc.setReadTimeout(timeout);
           BufferedReader br = new BufferedReader(new InputStreamReader(tc.getInputStream()));
           StringBuilder sb = new StringBuilder();
           String line;
           while ((line = br.readLine()) != null) {

                    if(line.contains(myTime))
                    {
                        Log.d("TIME CHECK", "Article already updated");
                        break;
                    }
                    sb.append(line+"\n");
                }
                br.close();
                return sb.toString();
        }
    catch(Exception e)
    {
        Log.d("Error","In JSON downloading");
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:57:24.830

不，没有简单的方法可以精确控制到最后一个字节将下载的内容。即使在 Java 级别，您也涉及 a `BufferedReader`，它显然会下载比您要求的更多的内容，并对其进行缓冲。还有其他缓冲区，包括您无法控制的操作系统级别。使用 HTTP 仅下载新文件的正确技术是使用`IfModifiedSince`标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:01:00.027

您的代码不会下载整个文件，但由于`BufferedReader`默认缓冲区大小为 8192，您将至少读取那么多字符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T09:58:51.750

如果它是大小，您可以逐字节或逐块进行

```
BufferedInputStream in = new BufferedInputStream(url).openStream())
byte data[] = new byte[1024];
int count;
while((count = in.read(data,0,1024)) != -1)
{
    out.write(data, 0, count);
} 
```

请检查这个问题

[如何使用 Java 从 Internet 下载和保存文件？](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java)

# android - 在android中的Android设备之间通过蓝牙接收文本数据？

> ID：13642754
> 
> 赞同：2
> 
> 时间：2012-11-30T09:54:32.423
> 
> 标签：android, bluetooth

我正在开发一个 Android 应用程序，在该应用程序中，我需要使用蓝牙接口将文本从一台设备传输到另一台设备。问题是，我的广播接收器无法正常工作。当从一台设备发送数据时，我的接收设备的广播监听器根本不起作用。我目前正在使用以下代码：

以下代码用于连接蓝牙设备：

```
protected void connect(BluetoothDevice device) {
try {
ConfigClass.isFirstBluetoothSignal=true;
Log.d(TAG,"connect bluetooth");
// Create a Socket connection: need the server's UUID number of
// registered
Method m = device.getClass().getMethod("createRfcommSocket",
new Class[] { int.class });
socket = (BluetoothSocket) m.invoke(device, 1);
// socket=device.createRfcommSocketToServiceRecord(MY_UUID_INSECURE);
socket.connect();
Log.d(TAG, ">>Client connectted");
inputStream = socket.getInputStream();
socket.getOutputStream();
int read = -1;
final byte[] bytes = new byte[1024];
while (true) {
synchronized (obj1) {
read = inputStream.read(bytes);
//_handler.obtainMessage(RECIEVE_MESSAGE, -1, read).sendToTarget();
Log.d(TAG, "read:" + read);
if (read > 0) {
ConfigClass.isFirstBluetoothSignal=false;
final int count = read;
String str = SamplesUtils.byteToHex(bytes, count);
// Log.d(TAG, "test1:" + str);
hex = hexString.toString();
if (hex == "") {
hexString.append("<--");
} else {
if (hex.lastIndexOf("<--") < hex.lastIndexOf("-->")) {
hexString.append("\n<--");
}
}
hexString.append(str);
hex = hexString.toString();
// Log.d(TAG, "test2:" + hex);
if (hex.length() > maxlength) {
try {
hex = hex.substring(hex.length() - maxlength,
hex.length());
hex = hex.substring(hex.indexOf(" "));
hex = "<--" + hex;
hexString = new StringBuffer();
hexString.append(hex);
}catch (NullPointerException e) {
e.printStackTrace();
}
catch (Exception e) {
e.printStackTrace();
Log.e(TAG, "e", e);
}
}
_handler.post(new Runnable() {
public void run() {
Toast.makeText(getApplicationContext(), hex, Toast.LENGTH_LONG);
}
});
}
}
}
} catch (Exception e) {
ConfigClass.isFirstBluetoothSignal=false;
Log.e(TAG, ">>", e);
Toast.makeText(getBaseContext(),
getResources().getString(R.string.ioexception),
Toast.LENGTH_SHORT).show();
return;
} finally {
if (socket != null) {
try {
Log.d(TAG, ">>Client Socket Close");
socket.close();
socket = null;
// this.finish();
return;
} catch (IOException e) {
Log.e(TAG, ">>", e);
}
}
}
} 
```

下面的代码是接受传入连接：

```
public class AcceptThread extends Thread{
// The local server socket
private final BluetoothServerSocket mmServerSocket;
private String mSocketType;
private BluetoothAdapter mAdapter=BluetoothAdapter.getDefaultAdapter();

public AcceptThread(boolean secure) {
BluetoothServerSocket tmp = null;
mSocketType = secure ? "Secure":"Insecure";

// Create a new listening server socket
try {
if (secure) {
tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME_SECURE, MY_UUID_SECURE);
} else {
tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME_SECURE, MY_UUID_INSECURE);
}
} catch (IOException e) {
Log.e(TAG, "Socket Type: " + mSocketType + "listen() failed", e);
}
mmServerSocket = tmp;
}

public void run() {

//BluetoothSocket socket = null;

// Listen to the server socket if we're not connected
while (true) {
try {
// This is a blocking call and will only return on a
// successful connection or an exception
socket = mmServerSocket.accept();
//InputStream ins=socket.getInputStream();

/*BufferedReader r = new BufferedReader(new InputStreamReader(ins));
StringBuilder total = new StringBuilder();
String line;
while ((line = r.readLine()) != null) {
total.append(line);
}*/

//System.out.println("Data============================================>>>"+line);
} catch (IOException e) {
Log.e(TAG, "Socket Type: " + mSocketType + "accept() failed", e);
break;
}

// If a connection was accepted
if (socket != null) {
synchronized (SearchDeviceActivity.this) {

ConnectedThread connectedThread=new ConnectedThread(socket, device.getAddress());
connectedThread.start();
//socket.close();
break;
}
}
}

}
} 
```

以下代码用于获取传入数据：

```
private class ConnectedThread extends Thread {
private final BluetoothSocket mmSocket;
private final InputStream mmInStream;
private final OutputStream mmOutStream;

@SuppressLint({ "NewApi", "NewApi" })
public ConnectedThread(BluetoothSocket socket, String socketType) {
Log.d(TAG, "create ConnectedThread: " + socketType);
mmSocket = socket;
InputStream tmpIn = null;
OutputStream tmpOut = null;

// Get the BluetoothSocket input and output streams
try {
tmpIn = socket.getInputStream();
tmpOut = socket.getOutputStream();
} catch (IOException e) {
Log.e(TAG, "temp sockets not created", e);
}

mmInStream = tmpIn;
mmOutStream = tmpOut;
}

public void run() {
Log.i(TAG, "BEGIN mConnectedThread");
byte[] buffer = new byte[1024];
int bytes;

// Keep listening to the InputStream while connected
while (true) {
try {
// Read from the InputStream
bytes = mmInStream.read(buffer);

// Send the obtained bytes to the UI Activity
_handler.obtainMessage(SearchDeviceActivity.MESSAGE_READ, bytes, -1, buffer)
.sendToTarget();
} catch (IOException e) {
Log.e(TAG, "disconnected", e);
//connectionLost();
break;
}
}
}

/**
* Write to the connected OutStream.
* @param buffer The bytes to write
*/
@SuppressLint("NewApi")
public void write(byte[] buffer) {
try {
mmOutStream.write(buffer);

// Share the sent message back to the UI Activity
_handler.obtainMessage(SearchDeviceActivity.MESSAGE_WRITE, -1, -1, buffer)
.sendToTarget();
} catch (IOException e) {
Log.e(TAG, "Exception during write", e);
}
}

public void cancel() {
try {
mmSocket.close();
} catch (IOException e) {
Log.e(TAG, "close() of connect socket failed", e);
}
}
} 
```

# android - Android 膨胀和异步任务

> ID：13642758
> 
> 赞同：0
> 
> 时间：2012-11-30T09:54:45.267
> 
> 标签：android, inflate

我有一个布局文件。它需要在 Async 线程中充气，然后需要发送到主线程显示。但是如果我在 Activity 创建后立即给它充气。它有错误：inflateexception。

如果我在主线程中充气一次，然后在异步线程中充气。它没有错误。

这是我的代码膨胀代码：

```
View vwDragMainOrder = layoutInflate.inflate(
R.layout.pop_drag_mainorder, null); 
```

布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RadioGroup
        android:id="@+id/et_pop_drag_mainorder_exceptiontypegroup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="gone"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/et_pop_drag_mainorder_batch"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Batch goods"
            android:textSize="24sp" />

        <RadioButton
            android:id="@+id/et_pop_drag_mainorder_unshippedoffload"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="goods not put in storage "
            android:textSize="24sp" />

        <RadioButton
            android:id="@+id/et_pop_drag_mainorder_shippedoffload"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Already out kula cargo"
            android:textSize="24sp" />
    </RadioGroup>

    <LinearLayout
        android:id="@+id/ll_pop_drag_mainorder_pcsremark"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:visibility="gone"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="90dp"
            android:layout_margin="5dp"
            android:layout_height="wrap_content"
            android:text="Number note"
            android:textSize="22dp" />

        <EditText
            android:id="@+id/et_pop_drag_mainorder_pcsremark"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll_pop_drag_mainorder_remark"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:visibility="gone"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="90dp"
            android:layout_margin="5dp"
            android:layout_height="wrap_content"
            android:text="remark"
            android:textSize="22dp" />

        <EditText
            android:id="@+id/et_pop_drag_mainorder_remark"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll_pop_drag_mainorder_exception"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:visibility="gone"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="90dp"
            android:layout_margin="5dp"
            android:layout_height="wrap_content"
            android:text="Exception "
            android:textSize="22dp" />

        <EditText
            android:id="@+id/et_pop_drag_mainorder_exception"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

</LinearLayout> 
```

# android - 安卓谷歌地图

> ID：13642760
> 
> 赞同：1
> 
> 时间：2012-11-30T09:54:48.717
> 
> 标签：android, google-maps

如何通过在编辑文本中使用 android 示例中的 Google 地图获取位置**名称** 或**密码**地址作为输入来查找纬度和经度我输入城市名称或城市密码，它将显示它的纬度和经度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:06:08.757

请检查这一点，这将有助于您 [从城市名称中获取纬度和经度，](https://stackoverflow.com/questions/4873076/get-latitude-and-longitude-from-city-name)或者[如何从地址中找到纬度和经度？](https://stackoverflow.com/questions/3574644/how-can-i-find-the-latitude-and-longitude-from-address)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:12:31.513

假设存在地理编码器服务，这是一个更简单的解决方案：

```
final Geocoder geocoder = new Geocoder(this);
final String zip = "90210";
try {
  List<Address> addresses = geocoder.getFromLocationName(zipCode, 1);
  if (addresses != null && !addresses.isEmpty()) {
    Address address = addresses.get(0);
    // Use the address as needed
    String message = String.format("Latitude: %f, Longitude: %f", 
    address.getLatitude(), address.getLongitude());
    Toast.makeText(this, message, Toast.LENGTH_LONG).show();
  } else {
    // Display appropriate message when Geocoder services are not available
    Toast.makeToast(this, "Unable to geocode zipcode", Toast.LENGTH_LONG).show(); 
  }
} catch (IOException e) {
  // handle exception
} 
```

//地址

```
Geocoder coder = new Geocoder(this);
List<Address> address;

try {
    address = coder.getFromLocationName(strAddress,5);
    if (address == null) {
        return null;
    }
    Address location = address.get(0);
    location.getLatitude();
    location.getLongitude();

    p1 = new GeoPoint((int) (location.getLatitude() * 1E6),
                      (int) (location.getLongitude() * 1E6));

     return p1;
} 
```

[http://android-er.blogspot.in/2011/02/get-address-from-location-using.html](http://android-er.blogspot.in/2011/02/get-address-from-location-using.html)

# c++ - 使用委托在 C++ 类和 Objective-C 类之间进行通信？

> ID：13642767
> 
> 赞同：2
> 
> 时间：2012-11-30T09:55:25.983
> 
> 标签：c++, iphone, objective-c, ios, cocoa-touch

我有一个线程类（C++）实例正在运行。当线程完成其操作时，我想与我的 UIView 对象之一（Objective-C）进行通信。这可以通过代表来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:30:24.753

是的，为什么不呢？

在 Objective-C++ 模式（.mm 文件扩展名）下编译时，您可以自由混合 Objective-C、C 和 C++ 代码、类和对象。

只要确保在主线程上执行任何 GUI 东西。

# android - GeocoderTask 错误

> ID：13642769
> 
> 赞同：0
> 
> 时间：2012-11-30T09:55:38.527
> 
> 标签：android, google-maps, geocoding

我正在尝试关注一些有关地理编码器的项目并将其集成到我的项目中。我在行中的执行下得到一条红线， `new GeocoderTask().execute(hosname);`但我用作参考的现有项目不包含这种错误。当我按 ctr+1 时显示 3 个选项：
1：更改为 PostExcute 2.将 hosname
的类型更改为 String[]
3.Create 方法在 Geocoder Task 类型中执行“Textview”。
我使用的现有项目是使用编辑文本来获取要显示的地址的名称，而我的项目是从文本视图中引用它。我该怎么办？

```
package com.dr.droid.lee;

import java.io.IOException;
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

import android.app.Activity;
import android.graphics.Typeface;
import android.graphics.drawable.Drawable;
import android.location.Address;
import android.location.Geocoder;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class HospResult extends MapActivity {

    String hcity;
    String hregion;
    String hadd;
    String hname;
    String hcon;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        Typeface type = Typeface.createFromAsset(this.getAssets(),"MyriadPro-Bold.ttf");
        setContentView(R.layout.map);
        TextView hosname =  (TextView) findViewById(R.id.tvName);
        TextView hosreg =  (TextView) findViewById(R.id.tvRegion);
        TextView hosadd =  (TextView) findViewById(R.id.tvAddress);
        TextView hoscon =  (TextView) findViewById(R.id.tvContact);
        TextView hoscity =  (TextView) findViewById(R.id.tvCity);
        Bundle receive = getIntent().getExtras();
        hcity = receive.getString("city");
        hregion = receive.getString("region");
        hadd = receive.getString("address");
        hname = receive.getString("name");
        hcon = receive.getString("contact");
        hosname.setText(hname);
        hosreg.setText(hregion);
        hoscity.setText(hcity);
        hosadd.setText(hcon);
        hoscon.setText(hadd);
        hosname.setTypeface(type);
        hosreg.setTypeface(type);
        hosadd.setTypeface(type);
        hoscity.setTypeface(type);
        hoscon.setTypeface(type);
        MapView mv =  (MapView) findViewById(R.id.mv1);
        MapController mp = mv.getController();
        mp.setZoom(15);
        if(hosname!=null && !hosname.equals("")){
            new GeocoderTask().execute(hosname);
        }

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    // An AsyncTask class for accessing the GeoCoding Web Service
        private class GeocoderTask extends AsyncTask<String, Void, List<Address>>{

            @Override
            protected List<Address> doInBackground(String... locationName) {
                // Creating an instance of Geocoder class
                Geocoder geocoder = new Geocoder(getBaseContext());
                List<Address> addresses = null;

                try {
                    // Getting a maximum of 3 Address that matches the input text
                    addresses = geocoder.getFromLocationName(locationName[0], 3);
                } catch (IOException e) {
                    e.printStackTrace();
                }           
                return addresses;
            }

            @Override
            protected void onPostExecute(List<Address> addresses) {

                // Getting Reference to MapView of the layout activity_main
                MapView mapView = (MapView) findViewById(R.id.mv1);

                // Setting ZoomControls
                mapView.setBuiltInZoomControls(true);

                // Getting MapController for the MapView
                MapController mc = mapView.getController();
                mc.setZoom(18);

                // Getting Drawable object corresponding to a resource image
                Drawable drawable = getResources().getDrawable(R.drawable.marker);

                // Getting Overlays of the map
                List<Overlay> overlays = mapView.getOverlays();

                // Creating an ItemizedOverlay
                LocationOverlay locationOverlay = new LocationOverlay(drawable,getBaseContext());

                // Clearing the overlays
                overlays.clear();

                if(addresses==null || addresses.size()==0){
                    Toast.makeText(getBaseContext(), "No Location found", Toast.LENGTH_SHORT).show();

                    // Redraws the map to clear the overlays
                    mapView.invalidate();
                }

                // Adding Markers on Google Map for each matching address
                for(int i=0;i<addresses.size();i++){                

                    Address address = (Address) addresses.get(i);

                    // Creating an instance of GeoPoint, to display in Google Map
                    GeoPoint p = new GeoPoint(
                                              (int)(address.getLatitude()*1E6),
                                              (int)(address.getLongitude()*1E6)
                                             );

                    String addressText = String.format("%s, %s",
                            address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                            address.getCountryName());

                    // Creating an OverlayItem to mark the point
                    OverlayItem overlayItem = new OverlayItem(p, "Location",addressText);

                    // Adding the OverlayItem in the LocationOverlay
                    locationOverlay.addOverlay(overlayItem);

                    // Adding locationOverlay to the overlay
                    overlays.add(locationOverlay);

                    // Locate the first location
                    if(i==0)
                        mc.animateTo(p);                    
                }

                // Redraws the map
                mapView.invalidate();

            }       
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:01:47.693

类型`hosname`是 TextView，也许这会导致错误？

尝试执行`new GeocoderTask().execute(hosname.getText());`

# gwt - 带有 GWT 应用程序的 PDF.js 不起作用

> ID：13642772
> 
> 赞同：2
> 
> 时间：2012-11-30T09:55:48.173
> 
> 标签：gwt, pdf.js

我们有一个基于 GWT 框架的应用程序，我们希望在没有任何浏览器插件的情况下显示 PDF 文件，并且目前正在评估 PDF.js 来做到这一点。问题是，无论我做什么，我都无法在我们的 GWT 应用程序中将 PDF 文件渲染到画布上。一定要提供一些背景

1.  从服务器检索 PDF 文件票证。
2.  PDF.js 文件票证是从服务器检索的，并使用此脚本嵌入到 HTML 正文中

    ```
    var head= document.getElementsByTagName('body')[0];
    var script= document.createElement('script');
    script.type= 'text/javascript';
    script.setAttribute('charset', 'UTF-8');
    script.src=url;
    head.appendChild(script); 
    ```

3.  在视图中创建画布元素（在此处使用 googles MVP 模式），并使用上述函数对将 PDF.js 嵌入 HTML 正文的脚本进行 JSNI 调用。然后该脚本调用与 PDF.js 文件中定义的 PDFJS 类一起使用的函数。

4.  在画布上渲染 PDF 文件的功能如下：

    ```
    PDFJS.disableWorker = true; 
    PDFJS.getDocument(url).then(function getPdfHelloWorld(pdf) 
    {
        pdf.getPage(1).then(function getPageHelloWorld(page) 
        {
            var scale = 1.25;        
            var viewport = page.getViewport(scale);
            canvas.height = viewport.height;
            canvas.width = viewport.width;
            page.render({canvasContext: context, viewport: viewport});
            page.startRendering(context);
            alert("Finished rendering");  
        });
    }); 
    ```

5.  画布和上下文在 View 类中创建并传递给 javascript。

这里的问题是，在调用 JSNI 之后，我会显示所有变量的警报。浏览器显示警报，除非我发出呼叫警报（PDFJS）。这表明脚本中未识别 PDFJS 变量。这让我觉得 PDF.js 文件没有正确嵌入到视图中，或者我还缺少其他东西。

注意：我已经通过网络下载了大部分示例，其中大部分都在本地工作，即我可以修改 PDF.js 文件路径以获取本地副本，并且 HTML 仍然呈现 PDF。读取 PDFJS 变量没有问题。只有在这个 GWT 应用程序中我才看到这些问题。

有没有人知道发生了什么。您的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:54:01.663

您的问题是您正在注入脚本，因此它异步加载，但您不要等到它加载后才开始使用它。

尝试使用注入[`ScriptInjector.FromUrl`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/ScriptInjector.FromUrl.html)脚本并将其余代码放入`Callback`.`onSuccess`

`xsiframe`Ilya 提出的同步注入脚本（通过将其添加到您的 HTML 主机页面或 GWT 模块描述符 - 注意：不适用于链接器 -）当然也是一种解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T10:39:31.180

尝试添加`<script src="PDF.js"/>`您的 .gwt.xml 文件并将 PDF.js 文件放入您的[公共主管中](http://code.google.com/p/google-web-toolkit-incubator/wiki/PathsHandlingFAQ#public_files)

# php - 中和 Excel 文件中的“&”

> ID：13642778
> 
> 赞同：0
> 
> 时间：2012-11-30T09:56:04.487
> 
> 标签：php, xml, excel

问题名称可能有点混乱，所以我会尝试清除它。我有一个包含一些产品的数据库，以及一个生成 Excel xml 文件的系统，用于导出这些产品及其价格。问题是，当数据库字段中有“&”字符（通常是产品名称）时，生成的 excel 文件“格式不正确”。另一件事是，数据库非常大，一些产品名称可能包含“中性化”& 字符（例如`&amp`，或`&quot;`），但有些没有，所以我必须做一些类似 unescape 然后逃生才能得到我需要的。我已经尝试过

```
mysql_real_escape_string(htmlspecialchars($name)); 
```

但这似乎无济于事。任何帮助，将不胜感激。

编辑：也许这会有所帮助——我有一个定制的“系统”，可以将产品导出到 xls 文件。它们看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
<Worksheet ss:Name="Table1">
<Table>
<Column ss:Index="1" ss:AutoFitWidth="0" ss:Width="110"/>

<Row>    
<Cell><Data ss:Type="String">Interna sifra</Data></Cell>
<Cell><Data ss:Type="String">Sifra</Data></Cell>
<Cell><Data ss:Type="String"> Naziv</Data></Cell>
<Cell><Data ss:Type="String">MP cena</Data></Cell>
<Cell><Data ss:Type="String">VP cena</Data></Cell>
</Row>

<Row>
<Cell><Data ss:Type="String">5263</Data></Cell>
<Cell><Data ss:Type="String">03SL8733</Data></Cell>
<Cell><Data ss:Type="String">Speed Link slušalice sa mikrofonom IUNO Mono</Data></Cell>
<Cell><Data ss:Type="String">0.00</Data></Cell>
<Cell><Data ss:Type="String">733.04</Data></Cell>
</Row>

</Table>
</Worksheet>
</Workbook> 
```

除了更多的行。它们是使用 php 生成的，方法是遍历数据库记录，并将所有行回显到 ExcelXML 文件中。我希望这现在更有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:01:45.107

你好，也许用 \& 替换你的 &

```
<?php
$name = str_replace("&", "\&", $name) 
```

上次我使用 php 时，我使用了这个：

[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

我没有任何问题

# ios - 相册在 iPad2 中崩溃

> ID：13642781
> 
> 赞同：0
> 
> 时间：2012-11-30T09:56:10.527
> 
> 标签：ios, ipad, uiimagepickercontroller, uipopovercontroller

我正在展示来自 UIPopOverController 的 UIButton 的相册和相机。`iPad1`当我在运行时呈现它时，两者都可以正常工作`iOS 5.1`。

当我在`iPad2`运行时做同样的事情时`iOS 6.0`，相机工作正常，但相册崩溃，如下图所示。另请注意，该应用程序是横向应用程序。

![在此处输入图像描述](../Images/0af3a50e5830cd6cc7152b41365ffa50.png)

我使用的代码是

```
 //imgPicker.contentSizeForViewInPopover = CGSizeMake(320, 500);
self.popOver = [[UIPopoverController alloc] initWithContentViewController:picker];
popOver.delegate = self;
[self.popOver presentPopoverFromRect:importFromPhotosBtn.frame
                              inView:importFromPhotosBtn
            permittedArrowDirections:UIPopoverArrowDirectionAny
                            animated:YES]; 
```

请有人指出我出了什么问题。我被这个打了半天多。非常感谢任何及时的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:44:40.467

UIImagePicker 支持纵向模式。您的应用程序仅支持导致问题的横向模式。

**解决方案：**

1.  子类 UIImagePicker 类
2.  在子类中实现 shouldAutorotate

    ```
     - (BOOL)shouldAutorotate
    {
       return NO;
    } 
    ```

3.  使用这个子类 UIImagePicker 类来创建选择器而不是 UIImagePicker

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:03:05.723

感谢@Midhum MP 的提示，问题实际上是我展示popOver 的框架。

`popOver`尺寸是，但我是从包含 (221, 360) 作为原点的矩形中呈现的`320 x 500`，所以尺寸搞砸了（500 + 360，大于横向（768）中的 iPad ht）。

但不知道为什么它在 iPad1（iOS 5.1）中运行，而不是在 iPad2（iOS 6）中运行！

所以，我只是改变了现在工作正常的呈现矩形（这样它就不会出现这样的混乱）。它解决了这个问题。

# ios5 - 为什么 UIScrollView 的滚动会在 iOS 4.3 中触发 layoutSubViews 方法，而在 5.0 及以上版本中却没有？

> ID：13642782
> 
> 赞同：0
> 
> 时间：2012-11-30T09:56:16.750
> 
> 标签：ios5, uiscrollview, ios4, layoutsubviews

我已经自定义 UIView 来创建自定义 UI 组件。

视图的层次结构是这样的。

----自定义UIView

----------------UIScrollView

----------------------------- ScrollView 中的子视图

```
-(id)initWithFrame:(CGRect)frame{

self = [super initWithFrame:frame];

if(self){

//Allocation and Initialization of ScrollView
//...
[super addSubView:scrollView];

}
return self;
}

- (void)layoutSubviews {

    DLog(@"%@",[NSThread callStackSymbols]);
    [super layoutSubviews];

    [self reloadData];

}

//This method can be used to reload the entire control
-(void)reloadData{
//Reload the subviews of control
} 
```

当滚动视图滚动时，layoutSubviews 方法在 iOS 版本 4.3 中被调用。但是对于 4.3 (5.0 , 6.0) 以上的版本，不会调用此事件处理程序。

在我的用例中，我不希望 layoutsubviews 被调用。

如何确保在滚动时我有一个不会触发 layoutsubviews 方法的滚动视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:02:53.220

我想出的解决方案如下：

1.  在自定义视图之上添加一个容器 UIView（供参考 ScrollViewHolder）
2.  然后在视图 ScrollViewHolder 上添加 UIScrollView。

----自定义UIView

----------------另一个UIView

-------------------------------------------UIScrollView

-------------------------------------------------------- ScrollView 中的子视图

init 方法现在更改为以下内容：

```
-(id)initWithFrame:(CGRect)frame{

self = [super initWithFrame:frame];

if(self){

//Allocation and Initialization of Container View

[super addSubView:ScrollViewHolder];
//Allocation and Initialization of ScrollView
//...
[ScrollViewHolder addSubView:scrollView];

}
return self;
} 
```

# ekevent - 如何获取 ekevent EKparticipant 电子邮件？

> ID：13642786
> 
> 赞同：11
> 
> 时间：2012-11-30T09:56:33.330
> 
> 标签：ekevent

如何获取 ekevent EKparticipant 电子邮件？

EKParticipant 类没有这样的属性。

是否可以渲染原生 ios 参与者控制器以显示参与者列表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-20T19:20:02.930

我也有同样的问题，今年在 WWDC 时，我问了几位苹果工程师，他们都不知道。我问了我在排队时遇到的一个人，他得到了答案：

```
event.organizer.URL.resourceSpecifier 
```

这适用于任何 EKParticipant。我被警告不要使用描述字段，因为它可能随时改变。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-21T12:39:06.817

EKParticipant 类别：

```
import Foundation
import EventKit
import Contacts

extension EKParticipant {
    var email: String? {
        // Try to get email from inner property
        if respondsToSelector(Selector("emailAddress")), let email = valueForKey("emailAddress") as? String {
            return email
        }

        // Getting info from description
        let emailComponents = description.componentsSeparatedByString("email = ")
        if emailComponents.count > 1 {
            let email = emailComponents[1].componentsSeparatedByString(";")[0]
            return email
        }

        // Getting email from contact
        if let contact = (try? CNContactStore().unifiedContactsMatchingPredicate(contactPredicate, keysToFetch: [CNContactEmailAddressesKey]))?.first,
            let email = contact.emailAddresses.first?.value as? String {
            return email
        }

        // Getting email from URL
        if let email = URL.resourceSpecifier where !email.hasPrefix("/") {
            return email
        }

        return nil
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-13T19:25:57.927

以上解决方案都不可靠：

1.  `URL`可能类似于`/xyzxyzxyzxyz.../principal`，显然这不是电子邮件。
2.  `EKParticipant:description`可能会更改并且不再包含电子邮件。
3.  您可以将`emailAddress`选择器发送到实例，但这是未记录的，将来可能会发生变化，同时可能会导致您的应用程序被拒绝。

所以最后你需要做的是使用`EKPrincipal:ABRecordWithAddressBook`然后从那里提取电子邮件。像这样：

```
NSString *email = nil;
ABAddressBookRef book = ABAddressBookCreateWithOptions(nil, nil);
ABRecordRef record = [self.appleParticipant ABRecordWithAddressBook:book];
if (record) {
    ABMultiValueRef value = ABRecordCopyValue(record, kABPersonEmailProperty);
    if (value
        && ABMultiValueGetCount(value) > 0) {
        email = (__bridge id)ABMultiValueCopyValueAtIndex(value, 0);
    }
} 
```

请注意，调用`ABAddressBookCreateWithOptions`成本很高，因此您可能希望每个会话只调用一次。

如果您无法访问记录，请重新使用`URL.resourceSpecifier`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T02:16:04.337

另一种选择可能是查找 EKParticipant 的 URL。输出应该是 mailto URI，例如 mailto:xyz@xyz.com。这里有一些稀疏的文档：

[http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKParticipantClassRef/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKParticipantClassRef/Reference/Reference.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-22T23:30:24.513

每个 API 版本 6.0 都没有公开该属性 - 我自己正在寻找答案，除了从对象的描述中解析电子邮件地址之外，还没有找到任何其他解决方法。例子：

```
EKParticipant *organizer = myEKEvent.organizer
NSString *organizerDescription = [organizer description]; 
//(id) $18 = 0x21064740 EKOrganizer <0x2108c910> {UUID = D3E9AAAE-F823-4236-B0B8-6BC500AA642E; name = Hung Tran; email = hung@sampleemail.com; isSelf = 0} 
```

将上面的字符串解析成一个 NSDictionary 通过 key @"email" 拉取电子邮件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-13T08:19:09.533

根据[Anton Plebanovich](https://stackoverflow.com/a/41263020/1557187)的回答，我为 Apple 引入的这个虚构问题制作了这个 Swift 5 解决方案：

# 斯威夫特 5

```
private let emailSelector = "emailAddress"
extension EKParticipant {
  var email: String? {
    if responds(to: Selector(emailSelector)) {
      return value(forKey: emailSelector) as? String
    }

    let emailComponents = description.components(separatedBy: "email = ")
    if emailComponents.count > 1 {
      return emailComponents[1].components(separatedBy: ";")[0]
    }

    if let email = (url as NSURL).resourceSpecifier, !email.hasPrefix("/") {
      return email
    }

    return nil
  }
} 
```

# sql - 在 sql server 2008 中将 BIGINT 转换为 HEX

> ID：13642790
> 
> 赞同：1
> 
> 时间：2012-11-30T09:56:38.817
> 
> 标签：sql, sql-server, sql-server-2008

我有`BIGINT`数字示例 1234567891，这个数字的十六进制是 0x499602D3。我想知道如何在 SQL Server 2008 中完成这种转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:59:02.097

将 INT 转换为十六进制：

```
SELECT CONVERT(VARBINARY(8), 1234567891); 
```

将十六进制转换为 INT：

```
SELECT CONVERT(INT, 0x499602D3); 
```

`BIGINT`应该是相同的交易替换`INT`使用`BIGINT`

```
SELECT CONVERT(VARBINARY(8), CAST(2716455883 as bigint)); 
```

请参阅[http://classicasp.aspfaq.com/general/how-do-i-convert-from-hex-to-int-and-back.html](http://classicasp.aspfaq.com/general/how-do-i-convert-from-hex-to-int-and-back.html)

# dhtmlx - 如何将行跨度和列跨度应用于 Dhtmlx 网格视图中的单元格

> ID：13642791
> 
> 赞同：2
> 
> 时间：2012-11-30T09:56:38.043
> 
> 标签：dhtmlx

我的 dhtmlxgrid 视图如下所示。使用 Json 数据。

```
code    desc         Qtytype    w1  w2

Part A  Part A desc   Demand    100 200
                      issued    150 100
                       stock    200 200
                       F/C  100 250     
Part B  Part B desc   Demand    100 200
                      issued    200 100
                       stock    300 200
                        F/C     100 250 
```

我想应用 rowsapn 和 colspan 单元格级别。请任何人建议如何在单元格级别中应用 span 以使视图高于。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:33:37.970

有两种方法

a) 数据加载后，您可以使用 js api 来制作必要的 col 和 rowspans

```
grid.load("some.url", function(){
    grid.setRowspan(1,0,4) //1 - id of row 
    grid.setRowspan(1,1,4) //1 - id of row 
}); 
```

b）您可以直接在数据中定义行跨度，如果是 xml，它将是

```
<row id="1"><cell rowspan="4">Part A</cell> 
```

据我所知，类似的语法必须可用于 json，但在当前版本（3.5）中存在错误，并且仅适用于 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:23:29.370

加载数据后，您可以像这样申请

```
dfGrid.forEachRow(function(id){
if((id)%4==0)
{   
   dfGrid.forEachCell(id,function(cellObj,ind){
   if(ind <= 3){
    dfGrid.setRowspan(id,ind,4);
    }       
    });
}   
}); 
```

4 表示您需要申请多少行。3 表示应该应用多少列行跨度。

注意 - id 应该从 4 的倍数开始。根据行数，id 的值不同 ex.3 意味着 id 应该从 3 的倍数开始。

谢谢你。

# java - 使用 values.xml 设置 Android Activity 屏幕方向

> ID：13642792
> 
> 赞同：5
> 
> 时间：2012-11-30T09:56:46.547
> 
> 标签：java, android, xml

我正在尝试使用 res/values 中 XML 文件中的值设置活动屏幕方向。我想这样做是因为，或多或少，平板电脑（横向）和智能手机（纵向）都需要相同的活动。

## 第一次尝试

显现：

```
<activity android:name="..." android:screenOrientation="@string/defaultOrientation"/> 
```

配置.xml：

```
<string name="defaultOrientation">portrait</string> 
```

但是使用此设置应用程序将不会出现在设备上，并且会返回此错误：

> java.lang.NumberFormatException：无效的int：“肖像”

## 第二

好的，所以我只是将其更改为

显现：

```
<activity android:name="..." android:screenOrientation="@integer/defaultOrientation"/> 
```

配置.xml：

```
<integer name="defaultOrientation">1</integer> 
```

我使用 1 因为 ActivityInfo.SCREEN_ORIENTATION_PORTRAIT == 1。

但这也不起作用。看来我可以修改一些值，比如应用程序/活动名称，但不能修改屏幕方向？

我知道我可以通过代码解决它，但由于某种原因，我觉得这也应该可以通过 XML 值文件获得。

以某种方式可以通过 XML 值来实现它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:43:43.147

你的第二个解释对我来说也是同样的问题，我使用了你不想要的代码的解决方法。

我在 res 文件夹下添加了 4 个 values 文件夹。“价值观”、“价值观-v11”、“价值观-v14”和“价值观-sw720dp”

所有值文件夹都有“integers.xml”。

“values”和“values-v14”的值为 1，即纵向；
`<integer name="portrait_if_not_tablet">1</integer>`.

“values-v11”和“values-sw720dp”的值为 2，即用户导向；
`<integer name="portrait_if_not_tablet">2</integer>`.

在清单文件中，活动具有如下属性；
`android:screenOrientation="@integer/portrait_if_not_tablet"`.

**所有“values”、“values-v11”、“values-v14”都按预期工作，但“values-sw720dp”！**

在调试时，我意识到 Portrait_if_not_tablet 的值在带有 getResources().getInteger(R.integer.portrait_if_not_tablet) 的 sw720dp 设备（使用 API 16）上符合预期，但是当我通过 getRequestedOrientation() 检查当前方向的值时，我得到了不同的值价值。

```
int requestedOrientation = getResources().getInteger(R.integer.portrait_if_not_tablet);
int currentOrientation = getRequestedOrientation();
if (currentOrientation != requestedOrientation) {
    setRequestedOrientation(requestedOrientation);
} 
```

所以我在我的活动的 onCreate 方法上使用了一个代码块来解决这个问题。

# ios - dispatch_async 中的子视图在长时间延迟后出现

> ID：13642795
> 
> 赞同：0
> 
> 时间：2012-11-30T09:56:58.530
> 
> 标签：ios, delay, subviews, dispatch-async

我已经使用 dispatch_async 将 xml 文档的解析放入后台，我将信息放入了一个数组中，并且通过 for 循环，我将每个元素的内容分配给 UILabel（现在），问题在于输出控制台我可以看到每个元素的正确内容，但 uilabel 仅在长时间延迟后才添加。

代码：

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)

dispatch_async(kBgQueue, ^{
    NSData *xmlData = [[NSMutableData alloc] initWithContentsOfURL:url];
    NSError *error;
    GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData options:0 error:&error];
    NSArray *areaCortina = [doc nodesForXPath:@"query" error:nil];

    int i=0;
    for (GDataXMLElement *element in areaCortina) {
        NSLog(@"%@",[[element attributeForName:@"LiftName"] stringValue]); //data are shown correctly 

        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, (30+10)*i, 200, 30)];// don't appear after log
        [label setText:[[element attributeForName:@"name"] stringValue]];
        [self.view performSelectorOnMainThread:@selector(addSubview:) withObject:label waitUntilDone:YES];

        i++;
  } 
```

如您所见，我使用了 performSelectorOnMainThread 但没有使用，标签不会立即出现一次，而是仅在块结束后 10 或 15 秒后正确显示。

想法？

提前致谢

**好的编辑 1**

感谢 Shimanski Artem 的建议，我现在有了以下信息：

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)

...    

dispatch_async(kBgQueue, ^{
    NSData *xmlData = [[NSMutableData alloc] initWithContentsOfURL:url];
    NSError *error;
    GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData options:0 error:&error];
    NSArray *areaCortina = [doc nodesForXPath:@"query" error:nil];
    self.data = [[NSMutableArray alloc] init];  

    for (GDataXMLElement *element in areaCortina) {
        [self.data addObject:[[element attributeForName:@"name"] stringValue]]; 

    }
    [[NSNotificationCenter defaultCenter] postNotificationName:@"name" object:self];
 }

 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(caricaItem) name:@"name" object:nil];

 ...

} //end method

-(void) caricaItem
{
int i=0;
for (NSString * string in self.dati) {

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, (30+10)*i, 200, 30)];
    [label setText:string];

    [self.view addSubview:label];

    i++;
} 
```

}

我已经将 uilabels 的创建放在了调度之外，在 caricaItem 方法中，我已经准备好了一个充满珍贵数据的数组，但是同样的延迟......如果在 caricaItem 我使用 UITableView......

正确的方法是什么？

谢谢

# javascript - 在不同范围内累积变量

> ID：13642801
> 
> 赞同：0
> 
> 时间：2012-11-30T09:57:22.820
> 
> 标签：javascript, jquery

请看我的代码：

```
function foo() {
    var h = "start";
    $.each(some_array_of_objects, function() {
        var name = 'middle';        
        h += name;
    });
    h += "end";
    alert(h);
} 
```

我希望在我的警报中看到累积的字符串，但不是这个，而是包含很多**[object Object]**字符串的字符串。是否可以在不使用全局变量的情况下以上述方式累积**h**变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:07:22.960

无需使用 jQuery 循环遍历数组/对象，只需`for`对数组使用循环，`for-in`对对象使用循环。这将适用于您的情况：

```
//Assuming the input array is something like this:
some_array_of_objects = [[{name:'ABC'}],[{name:'I am a name'}],[{name:'Look at me!'}],[{name:'foo'}],[{name:'bar'}]]

function foo() {
    var h = "start";
    // Loop through the array.
    for(var i = 0; i < some_array_of_objects.length; i++){
        var name = some_array_of_objects[i][0].name;        
        h += name;
    }
    h += "end";
    alert(h);
}
foo(); //Returns: "startABCI am a nameLook at me!foobarend" 
```

# javascript - 运行脚本时出现书签错误

> ID：13642803
> 
> 赞同：0
> 
> 时间：2012-11-30T09:57:37.633
> 
> 标签：javascript, bookmarklet

我有代码是这个[jsFiddle](http://jsfiddle.net/DFWrw/7/)

我在同一个位置的一个名为 AutoPolicy.js 的脚本中拥有它，我试图使用一个小书签来调用它：

```
javascript: (function(){document.body.appendChild(document.createElement('script')).src='http://localhost:43911/Scripts/AutoPolicy.js';})(); 
```

当我在 chrome 中运行它时（还没有尝试过其他浏览器），我收到一个错误：

**Uncaught SyntaxError: Unexpected token ILLEGAL**抱歉 - 我似乎找不到有关该错误的更多信息。

Waat 导致了这个错误，为什么它在 jsFiddle 上运行，但在从小书签调用时却没有？

谢谢

戴维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:01:06.647

我猜`createElement`这是放错位置之后的括号（属性`src`是脚本元素而不是`document.body`）：

```
javascript: (function(){document.body.appendChild(document.createElement('script').src='http://localhost:43911/Scripts/AutoPolicy.js');})(); 
```

* * *

**编辑**

编辑代码以分离处理：

```
javascript:(function(){var%20src='http://localhost:43911/Scripts/AutoPolicy.js',s=document.createElement('script');s.src=src;document.body.appendChild(s);})(); 
```

# android - 如何在画布上画轮子？

> ID：13642807
> 
> 赞同：10
> 
> 时间：2012-11-30T09:57:53.513
> 
> 标签：android, android-canvas

我想在**画布上用****刻度线**画圆。 圆圈包含 100 个刻度。但是在 1 到 2 之间，与其他相比，子刻度的数量更多，我也想根据用户输入（圆圈旋转）**计算比例。**请帮我.. ****![在此处输入图像描述](../Images/97b62d9ed2cb5ea94ae158fe760ce9a4.png)****

 ****我试过这个[http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)

```
private void drawScale(Canvas canvas) {
        //canvas.drawOval(scaleRect, scalePaint);
        canvas.drawCircle(0.5f,0.5f, 0.49f,scalePaint);
        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        for (i = 0; i < totalNicks; ++i) {
            float y1 = scaleRect.top;
            float y2 = y1 - 0.020f;

            //canvas.drawLine(0.5f, y1, 0.5f, y2, scalePaint);

            if (i % 1 == 0) {
                int value = nickToDegree(i);
                if(value<=360)
                {
                    float y3 = 0;
                    scaleText =new Paint();
                    scaleText.setTextSize(0.035f);
                    scaleText.setColor(Color.BLACK);
                    scaleText.setTypeface(Typeface.DEFAULT_BOLD);
                    scaleText.setTextScaleX(0.8f);
                    scaleText.setTextAlign(Paint.Align.CENTER); 
                    scaleText.setStrokeWidth(0.015f);
                    scaleText.setAntiAlias(true);

                    scaleline =new Paint();
                    scaleline.setStyle(Paint.Style.FILL);
                    scaleline.setColor(Color.BLACK);
                    scaleline.setStrokeWidth(0.005f);
                    scaleline.setAntiAlias(true);   
                    switch (value) {

                    case 0:y3 = y1 - 0.120f;
                    canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                            canvas.drawText("1", 0.5f, y3 - 0.05f, scaleText);

                        break;
                    case 2:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 1/16", 0.5f, y3 - 0.015f, scaleText);

                        break;

                    case 4:y3 = y1 - 0.070f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 1/8", 0.5f, y3 - 0.015f, scaleText);

                        break;

                    case 6:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 3/16", 0.5f, y3 - 0.015f, scaleText);
                        break;

                    case 8:y3 = y1 - 0.070f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 1/4", 0.5f, y3 - 0.015f, scaleText);

                        break;
                    case 10:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 5/16", 0.5f, y3 - 0.015f, scaleText);

                        break;
                    case 12:y3 = y1 - 0.070f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 3/8", 0.5f, y3 - 0.015f, scaleText);

                        break;
                    case 14:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 7/16", 0.5f, y3 - 0.015f, scaleText);

                        break;
                    case 16:y3 = y1 - 0.070f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 1/12", 0.5f, y3 - 0.015f, scaleText);

                    break;
                    case 18:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                     canvas.drawText("1 9/16", 0.5f, y3 - 0.015f, scaleText);

                        break;
                    case 20:y3 = y1 - 0.070f;

                       canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                       canvas.drawText("1 5/8", 0.5f, y3 - 0.015f, scaleText);

                        break;
                    case 22:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 11/16", 0.5f, y3 - 0.015f, scaleText);

                        break;
                    case 24:y3 = y1 - 0.070f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 3/4", 0.5f, y3 - 0.015f, scaleText);

                        break;
                    case 26:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 13/16", 0.5f, y3 - 0.015f, scaleText);

                        break;
                    case 28:y3 = y1 - 0.070f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 7/8", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    case 30:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("1 15/16", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    case 32:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("2", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    case 34:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("2 1/4", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 36:y3 = y1 - 0.070f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("2 1/2", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 38:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("2 3/4", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 40:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("3", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 42:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("3 1/4", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 44:y3 = y1 - 0.070f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("3 1/2", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 46:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("3 3/4", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 48:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("4", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 50:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("4 1/4", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 52:y3 = y1 - 0.070f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("4 1/2", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 54:y3 = y1 - 0.030f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("4 3/4", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 56:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("5", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 60:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("6", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 64:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("7", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 68:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("8", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 71:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("9", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 74:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("10", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 77:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("11", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 80:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("12", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 82:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("13", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 84:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("14", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 86:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("15", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 89:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("20", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 92:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("25", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 94:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("30", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 96:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("35", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 98:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("40", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 101:y3 = y1 - 0.090f;
                     canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("45", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 103: 
                        y3 = y1 - 0.090f;
                        canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("50", 0.5f, y3 - 0.015f, scaleText);
                        break;
                    case 105: y3 = y1 - 0.090f;
                        canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("55", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    case 107: y3 = y1 - 0.090f;
                        canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("60", 0.5f, y3 - 0.015f, scaleText);
                    case 109:
                        y3 = y1 - 0.090f;
                        canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("65", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    case 111:
                        y3 = y1 - 0.090f;
                        canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("70", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    case 113:
                        y3 = y1 - 0.090f;
                        canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("75", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    case 115:
                        y3 = y1 - 0.090f;
                        canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("80", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    case 117:
                        y3 = y1 - 0.090f;
                        canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("85", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    case 119:
                        y3 = y1 - 0.090f;
                        canvas.drawLine(0.5f, y1, 0.5f, y3, scaleline);
                    canvas.drawText("90", 0.5f, y3 - 0.015f, scaleText);
                    break;
                    }
                }

            }

            canvas.rotate(degreesPerNick, 0.5f, 0.5f);
        }
        canvas.restore();       
    } 
```

伙计们，我还有一个问题。 ![在此处输入图像描述](../Images/9988b3f18771fee48caa3a97bc9bcdff.png)

当我转动一个轮子时。textview 应该显示在指针指向的刻度上显示的分数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:51:20.193

Try to use gesture on the canvas (or on canvas imageview) use **Gesture listeners, ScaleListener** for calculating the scale.

Link: [**Image in Canvas with touch events**](https://stackoverflow.com/questions/5743328/image-in-canvas-with-touch-events)

Other than that use **prerecorded gestures** or implement **GestureOverlayView** to detect gestures inputs for calculating the scale (little more complex)

For more Info: [**Gestures detection and canvas scale, translate and rotate**](http://android-coding.blogspot.in/2012/03/gestures-detection-and-canvas-scale.html)

Also More info on **implementing Gestures** : [**Link1**](http://www.codeproject.com/Articles/319401/Simple-Gestures-on-Android) **,** [**Link2**](https://stackoverflow.com/questions/10878829/viewpager-with-ontouch-and-onintercepttouchevent/10943050#10943050)****

# javascript - 内联复选框ajax修改数字

> ID：13642810
> 
> 赞同：0
> 
> 时间：2012-11-30T09:58:06.790
> 
> 标签：javascript, ajax, jquery

例如，我有一个这样的 html：

```
<li><label class="desc"><font color="green">Want to get email ($<span id="price">50</span>/month)</font></label>
            <input type="checkbox" checked="" id="subscribe" name="subscribe"> bla bla bla</li>

<li><label class="desc">-$30 subscribe</label>
            <input type="checkbox"  id="custom_test" name="custom_test">Please check this to add your own email</li> 
```

结构：

[复选框] 订阅（50 美元/月）文本 bla bla

[另一个复选框] 提供 -30 美元添加自己的电子邮件）

所以基本上我有一个要订阅的复选框，其中包含该订阅的价格，并且在该复选框下，如果您选中该复选框，它应该在上面的订阅中编辑内联价格 -30$ 如果检查，如果不保持不变。

我如何使用 Ajax 或某种 JQuery/JS 函数来执行此操作，以根据该跨度的 ID 和第二个复选框的 ID 进行在线编辑？

[JSfiddle](http://jsfiddle.net/kkfJF/)

提前感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:12:57.550

你知道你有绝对糟糕的非语义标记，不是吗？在做任何理智的事情之前，你需要使它有效和语义化。但是对于您目前的情况，这里是 jQuery 代码段：

```
var price = document.getElementById('price'),
    origPrice = parseInt(price.innerHTML),
    reducedPrice = parseInt(price.innerHTML) - 30;

$('#custom_test').change(function(ev) {
    if (ev.target.checked) {
        price.innerHTML = reducedPrice;
    } else {
        price.innerHTML = origPrice;
    }
});​ 
```

[JSfiddle](http://jsfiddle.net/spliter/kkfJF/32/)

在这里您可能希望如何更新您的标记：

```
<ul>
<li>
    <label class="desc main">
        Want to get email ($<span id="price">50</span>/month)
        <input type="checkbox" checked="" id="subscribe" name="subscribe">
    </label>
    Some text
</li>
<li>
    <label class="desc offer">
        -$30 subscribe
        <input type="checkbox"  id="custom_test" name="custom_test">
    </label>
    Please check this to add your own email
</li>
</ul> 
```

[JSfiddle](http://jsfiddle.net/spliter/3e2E8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:17:42.627

使用 jQuery 这就像

```
$('#custom_test').change(function(){
    if($(this).is(':checked')){
        $("#price").text($('#price').text()*1 - 30);    
    }else{
        $("#price").text($('#price').text()*1 + 30);   
    }
}); 
```

查看小提琴：http: [//jsfiddle.net/kkfJF/29/](http://jsfiddle.net/kkfJF/29/)

希望这可以帮助

# php - 如何通过相册名称 Picasa 和 Zend GData PHP 获取照片

> ID：13642812
> 
> 赞同：2
> 
> 时间：2012-11-30T09:58:14.427
> 
> 标签：php, zend-framework, picasa, zend-gdata

我无法按相册名称访问 Picasa 网络相册。我有专辑名称“我的测试专辑”。如果我使用该名称（包括空格），我会收到错误：

> 致命错误：未捕获的异常“Zend_Uri_Exception”和消息“提供的 URI 无效”

没有空格“MyTestAlbum”可以正常工作：

```
// Construct the query                      
$query = $this->photos->newAlbumQuery();
$query->setUser( "default" );
$query->setAlbumName( "MyTestAlbum" ); //This works fine 
```

这会导致错误：

```
// Construct the query                      
$query = $this->photos->newAlbumQuery();
$query->setUser( "default" );
$query->setAlbumName( "My Test Album" ); // This causes error 
```

我的问题是什么字符是不允许的，所以我可以在打电话之前把它们去掉`setAlbumName()`？

或者对更好的方法有什么建议？

谢谢伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T04:10:26.690

您只能获取与特定名称匹配的专辑列表：

```
// Find the album for the given accountId.
$albumQuery = $picasa->newAlbumQuery();
$albumQuery->setUser( $user );
$albumQuery->setAlbumName( "AlbumName" ); // No spaces.
$albumQuery->setMaxResults( 1 );

$albumId = null;

try {
  $albumFeed = $picasa->getAlbumFeed( $albumQuery );

  foreach( $albumFeed as $key => $entry ) {
    $albumId = $entry->getGphotoAlbumId();
  }
}
catch( Zend_Gdata_App_Exception $ex ) {
  // Create the album because the album name could not be found.
  $albumId = $this->createAlbum( $picasa, "AlbumName" );
} 
```

此时，`$albumId`应该是引用了一个有效的相册。

代码遍历专辑提要。您必须确保专辑名称是唯一标识的；否则代码将返回与名称匹配的多个专辑。

请注意，如果您删除相册，然后重新创建同名相册，则会出现一个错误，阻止您检索该相册。另请参阅：[列出以前删除的重新创建的专辑名称](https://stackoverflow.com/questions/16352676/list-recreated-album-names-that-were-previously-deleted)。

# javascript - 可能的清除 jquery `one` 方法

> ID：13642817
> 
> 赞同：5
> 
> 时间：2012-11-30T09:58:21.007
> 
> 标签：javascript, jquery

可以清除 jquery`one`属性吗？例如给定的html

```
 <div id="button">button</div>

    <div id="clearOneProperty">clear one property</div> 
```

和js

```
$("#button").one("click", function () {
    alert("blah");
});

$("#clearOneProperty").on("click", function () {
    // clear "one" property, that is after this event,  I want "#button"  to work again
}); 
```

演示[http://jsfiddle.net/RzzCu/2/](http://jsfiddle.net/RzzCu/2/)

那么，如果点击`#button`div，alert 只会发生一次，对吗？

我希望在单击时`#clearOneProperty`重置一个属性。这是可能的？

PS我不是在问如何用其他方式做到这一点，我很感兴趣：“可能清楚的jquery`one`方法？”。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T10:02:34.380

试试这个：

```
function bindButton() {
    $("#button").unbind('click').one("click", function() {
        alert("blah");
    });
}

bindButton();

$("#clearOneProperty").on("click", function() {
    bindButton();
}); 
```

[**更新的小提琴**](http://jsfiddle.net/RzzCu/11/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T10:07:44.013

**[一个](http://api.jquery.com/one/)**在第一次调用时取消绑定它自己，如所述“此方法的第一种形式与 .bind(), `except that the handler is unbound after its first invocation"`, **[jQuery Documentation](http://api.jquery.com/one/)** **所以你需要再次绑定它**。

**[现场演示](http://jsfiddle.net/rajaadil/RzzCu/7/)**

```
$("#button").one("click", onefunction);

function onefunction() {
    alert("blah");
}
$("#clearOneProperty").one("click", function() {       
    $("#button").one("click", onefunction);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:02:55.520

只需在函数内重新绑定它。

```
$("#button").one("click", function () {
    alert("blah");
});

$("#clearOneProperty").one("click", function () {
    $('#button').one("click", function () {
    alert("blah");
});
}); 
```

这里有一个[小提琴](http://jsfiddle.net/RzzCu/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:02:21.317

使用[unbind()](http://api.jquery.com/unbind/)方法

```
$("#button").unbind(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T10:05:31.307

尝试

```
$('#button').unbind('click'); 
```

# bash - 从 BASH 中的日志测量经过的时间

> ID：13642821
> 
> 赞同：0
> 
> 时间：2012-11-30T09:58:29.837
> 
> 标签：bash

我想检查 rsnapshot 的经过时间，目录删除过程

Rsnapshot 日志格式（我用 grep 过滤了这个）：

```
cat /var/log/rsnapshot | grep -A 1 "/bin/rm"

[21/Nov/2012:07:41:24] /bin/rm -rf /mnt/sdb/rsnapshot/daily.delete/
[21/Nov/2012:09:47:50] WARNING: /usr/local/bin/rsnapshot -v daily: completed, but with some warnings 
```

那么只有时间：

```
cat /var/log/rsnapshot | grep -A 1 "/bin/rm" | awk '{ print $1 }' | cut -b 14-21 | uniq
07:41:24
09:47:50 
```

但是我不确定如何使用 date 命令来减去时间。

请让我知道是否有更好/更有效的方法在 BASH 中执行此操作，因为我仍在学习曲线上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:35:18.780

使用具有以下语法的日期命令：

```
NEW=`date --date "$NEW_DATE" +%s`
OLD=`date --date "$OLD_DATE" +%s`
diff=$((NEW-OLD)) 
```

这会给你几秒钟的差异......然后你可以轻松地取模 60 来分隔秒、小时、分钟等。

# windows-8 - 引用另一个页面的元素 (Windows 8)

> ID：13642823
> 
> 赞同：0
> 
> 时间：2012-11-30T09:58:41.407
> 
> 标签：windows-8

我在我的 Windows 8 商店应用程序中使用 ac# flyout。当我打开我的自定义弹出（即设置）时，我想隐藏弹出下方页面中的广告。有没有办法可以在弹出页面的代码中引用此广告？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:13:23.800

最佳做法是使用附加行为（请参阅 nuget 包 winrtbehavior），您可以附加属性，当加载弹出窗口时，您可以调用命令来隐藏 adcontrol

# orchardcms - Orchard CMS - 基于来自 ContentPicker 的值进行查询

> ID：13642826
> 
> 赞同：1
> 
> 时间：2012-11-30T09:58:53.573
> 
> 标签：orchardcms, projection

编辑：改写的问题

我认为要么有错误，要么我做错了什么。

1.  我向 Blogpost 类型添加了一个字段。此字段属于 Contentpicker 类型。我称之为相关页面。
2.  然后我创建到常规页面（ContentType Page）。
3.  我创建了 4 篇博文。两篇博文将 PageOne 作为 RelatedPage 字段中的选定值。其他两个帖子在相关页面中将 PageTwo 作为选定值。
4.  现在我创建一个过滤器 ContentType 为 BlogPost 的查询。并且带有 Blog Post.Related Page 的过滤器等于 {21}（即 PageOne 的 Id）。

我希望得到结果 BlogPostOne 和 BlogPostTwo。相反，我没有得到结果。实际上，我希望从放置小部件的页面中检索 pageid 但无法使其工作，因此我将过滤器还原为预定义值而不是动态值。但就像我说的没有结果。

查询也是错误的，那我应该怎么做。或者 ContentPicker 字段的过滤器是否存在错误。

PS 我还将在 Codeplex 中提交问题。

**更新** 在 Tokenizer 中，所有包含 { } 的值都被视为标记，因此被替换。问题是 contentpicker 字段中的内容项的 Id 与荣誉一起存储。因此，当将 {21} 作为过滤器的值时，21 会被标记化，并且由于该标记没有值，因此该值变为空。跳过标记器时它可以工作（在调试时）。但是不能跳过标记器，因为存在标记是非常合法的。因此，我认为标记器或 id 存储在 contentpicker 的 contentitem 字段中的方式存在错误。我认为可以通过将内容选择器更改为存储用逗号分隔但没有荣誉的数字来解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:01:14.983

您是否尝试过使用页面的别名而不是内容 ID 作为标识符？例如“/about-us”，就像您在图层规则中所做的那样。

# c++ - 对比

> ID：13642827
> 
> 赞同：105
> 
> 时间：2012-11-30T09:58:56.813
> 
> 标签：c++, stdint, cstdint

`stdint.h`和 和有什么不一样`cstdint`？

它们都在 MSVC (Visual Studio 2010) 和 gcc-4.5.1 中可用。还都定义了`intX_t`/`uintX_t`类型（其中类型`X`的大小以字节为单位）。

*   如果两个标题中的基本原理相同（便携式类型），我必须做出哪些决定来决定其中一个？

`stdint.h`定义了没有任何命名空间的每个类型，类型`cstdint`位于`std`命名空间中。

*   是否有任何理由将定义的类型包含或不包含到`std`命名空间中？这两个标题有什么不同？

`cstdint`没有文件扩展名并使用`c`前缀，`stdint.h`使用`.h`扩展名。

*   此标头的命名约定是什么？`c`前缀表明这是一个 C 库？中缺少文件扩展名是有原因的`cstdint`吗？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-11-30T10:08:03.087

C++98 的初衷是你应该`<cstdint>`在 C++ 中使用，以避免污染全局命名空间（嗯，不是`<cstdint>`特别是，它只在 C++11 中添加，但`<c*>`通常是头文件）。

然而，实现仍然坚持将符号放入全局命名空间，C++11 批准了这种做法[*]。所以，你基本上有三个选择：

*   使用`<cstdint>`并完全限定您使用的每个整数类型，或者使用`using std::int32_t;`etc 将其带入范围（烦人，因为冗长，但它是正确的方法，就像 C++ 标准库中的任何其他符号一样）
*   使用`<stdint.h>`（因为已弃用而有点糟糕）
*   使用`<cstdint>`并假设您的实现会将符号放在全局命名空间中（非常糟糕，因为不能保证）。

在实践中，我怀疑大量烦人的代码使用最后一个选项，仅仅是因为在`<cstdint>`将符号放在全局命名空间中的实现中很容易意外地做到这一点。你应该尝试使用第一个。第二个有一个优点，它*保证*将东西放在全局命名空间中，而不是仅仅可能这样做。我认为这不是特别有用，但如果这是您的优先事项，它可能会节省一些打字时间。

还有第四个选项，有时它有时很有`#include <cstdint>`用`using namespace std;`，但有些地方你不应该把`using namespace std;`. 不同的人会有不同的想法，这些地方在哪里，但是“在头文件的顶层”比“在cpp文件的顶层”差，这比“在有限范围内”差。有些人根本不写`using namespace std;`。

[*] 这意味着允许 C++ 标准头文件将内容放在全局命名空间中，但不是必须的。因此，您必须避免与这些符号发生冲突，但您实际上不能使用它们，因为它们可能不存在。基本上，C++ 中的全局命名空间是一个雷区，尽量避免它。`using namespace std;`有人可能会争辩说，委员会已经通过实现批准了一种做法，这种做法几乎与在头文件中停留在顶层一样有害——不同之处在于实现只对 C 标准库中的符号执行此操作，而`using namespace std;`对 C++ 执行此操作-也只有符号。C 标准中有一个部分列出了为将来添加到标准中而保留的名称。将这些名称也视为保留在 C++ 全局命名空间中并不是一个完全愚蠢的想法，但这并不是必需的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-30T10:03:08.900

包括`cstdint`在 std 命名空间和*可能*在全局命名空间中导入符号名称。
包括在全局命名空间和*可能*在 std 命名空间`stdint.h`中导入符号名称。

 *C 标准库的功能也在 C++ 标准库中提供，并且作为一般命名约定，它们在 C 标准库中的相应名称前加上 c。

在 C++ 中，您应该使用：

```
#include <cstdint> 
```

`std::`
并完全限定您在 C 中使用的符号名称，您应该使用：

```
#include <stdint.h> 
```

* * *

**附件 D（规范性）兼容性特性 [depr]**规定：

**D.6 C 标准库头文件**

> 1 为了与 C 标准库和 C Unicode TR 兼容，C++ 标准库提供了 25 个 C 标头，如表 151 所示。

其中包括：

> `<assert.h> <float.h> <math.h> <stddef.h> <tgmath.h>` `<complex.h> <inttypes.h> <setjmp.h> <stdio.h> <time.h>` `<ctype.h> <iso646.h> <signal.h> <stdint.h> <uchar.h>` `<errno.h> <limits.h> <stdarg.h> <stdlib.h> <wchar.h>` `<fenv.h> <locale.h> <stdbool.h> <string.h> <wctype.h>`

并进一步，

> 2 **每个 C 头文件，每个头文件都有一个形式的名称，其`name.h`行为就像每个名称放在标准库名称空间中对应的名称`cname header`都放在全局名称空间范围内。**未指定这些名称是否首先在命名空间 std 的命名空间范围 (3.3.6) 内声明或定义，然后通过显式使用声明 (7.3.3) 注入全局命名空间范围。
> 
> 3 [ 示例：标头`<cstdlib>`确实在命名空间 std 中提供了它的声明和定义。它还可以在全局命名空间中提供这些名称。头文件`<stdlib.h>`在全局命名空间中确实提供了相同的声明和定义，就像在 C 标准中一样。它还可以在命名空间 std 中提供这些名称。—结束示例]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:03:59.773

1.  `cstdint`是 C++11 头文件，`stdint.h`是 C99 头文件（C 和 C++ 是不同的语言！）

2.  MSVC 2008 既不包含`stdint.h`也不包含`cstdint`.

3.  的实现`cstdint`大多只是简单地`#include <stdint.h>`修复了一些命名空间/语言。*

# linux - 你认为 tasklet_head 的数据结构是有线的吗？

> ID：13642829
> 
> 赞同：-2
> 
> 时间：2012-11-30T09:59:04.977
> 
> 标签：linux, kernel, interrupt

我正在阅读 tasklet 的源代码并尝试理解它。

我认为 tasklet_head 的数据结构是有线的，你是这样认为的。为什么第二个元素的数据类型是 struct tasklet_struct ** ，它只会让源代码更复杂，让人困惑，writh？我的意思是，为什么作者不使用 struct tasklet_struct *tail？也许作者太聪明了，我无法理解这种简单。如果是真的，如果你理解的话，请你给点提示。

```
398 /*
399  * Tasklets
400  */
401 struct tasklet_head
402 {
403         struct tasklet_struct *head;
404         struct tasklet_struct **tail;
405 }; 
```

完整的源代码可以在[这里找到。](http://lxr.oss.org.cn/source/kernel/softirq.c?a=arm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:34:55.180

我将回答手头的编程问题。

当然 *tail 和 **tail 是完全不同的东西，这就是为什么它是 **tail 而不是 *tail。

您将持有某种尾引用以避免遍历整个链表以在末尾添加一些东西（对于 O(1) 追加而不是 O(n)）。Tail 可以设置为特定的实例，但这种特定的实施策略是有原因的。而是指向下一个字段，它很简单：

```
new_item->next = NULL;
*tail = new_item;
tail = &(new_item->next); 
```

希望这可以帮助。

# java - Primefaces confirmDialog 在 actionListener 中什么都不做

> ID：13642830
> 
> 赞同：5
> 
> 时间：2012-11-30T09:59:05.243
> 
> 标签：java, jsf, primefaces

我有一个`comandButton`which 调用`confirmDialog`必须消除一个用户，但它从不调用它的 actionListener 中的方法。

这是代码：

```
<p:dialog id="dialogEditar" widgetVar="dialogEditar" header="#{bundle_usuarios.usuarios_titulo_edicion}" resizable="false">
    <p:panelGrid id="panelEditar"
        <p:row>
            <p:column>
                <p:commandButton id="btModificar" type="submit" actionListener="#{usuariosMB.modificarUsuario()}"
                             value="#{bundle_general.general_modificar}" update="formEditar" rendered="#{usuariosMB.permisoCtMenu}"/>
            </p:column>
            <p:column colspan="7">
                <p:commandButton id="btEliminar" type="button" onclick="confirmation.show()"
                              value="#{bundle_general.general_eliminar}"/>
            </p:column>
        </p:row>
    </p:panelGrid>
    <p:confirmDialog appendToBody="true" id="confirmDialog" message="#{bundle_usuarios.usuarios_confirma}"
                     header="#{bundle_usuarios.usuarios_titulo_confirma_eliminar}" severity="alert" widgetVar="confirmation">
        <p:commandButton id="confirm" type="submit" value="#{bundle_usuarios.usuarios_aceptar_eliminar}"
                         update="dialogEditar, formEditar" oncomplete="confirmation.hide()"
                         actionListener="#{usuariosMB.eliminarUsuario()}" rendered="#{usuariosMB.permisoCtMenu}" /> 
        <p:commandButton id="decline" value="#{bundle_usuarios.general_cancelar}" onclick="confirmation.hide()" type="button" />
    </p:confirmDialog>
</p:dialog> 
```

如果我输入相同的代码，但没有确认对话框，它会运行并删除用户而不会出现问题。

成功运行的代码如下：

```
<p:dialog id="dialogEditar" widgetVar="dialogEditar" header="#{bundle_usuarios.usuarios_titulo_edicion}" resizable="false">
    <p:panelGrid id="panelEditar"
        <p:row>
            <p:column>
                <p:commandButton id="btModificar" type="submit" actionListener="#{usuariosMB.modificarUsuario()}"
                             value="#{bundle_general.general_modificar}" update="formEditar" rendered="#{usuariosMB.permisoCtMenu}"/>
            </p:column>
            <p:column colspan="7">
                 <p:commandButton id="btEliminar" type="submit" actionListener="#{usuariosMB.eliminarUsuario()}" value="#{bundle_general.general_eliminar}" update="dialogEditar, formEditar" rendered="#{usuariosMB.permisoCtMenu}"/>
            </p:column>
        </p:row>
    </p:panelGrid>
</p:dialog> 
```

另一件事，当我单击带有 id="confirm" 的 commandButon 时，confirmDialog 永远不会消失，并且它一直被阻止在窗口中。

如果您需要更多详细信息，请告诉我需要。请问，有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:07:12.173

如果您的对话框放置在 ah:form 中，那么从该表单执行并将 ah:form 放置在对话框中是一个很好的练习。您仍然可以通过 widgetVar 访问

```
<h:form>
....
</h:form>

<p:dialog>

<h:form>
...
<p:commandButton />
<h:form>

</p:dialog> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T10:02:27.073

将命令按钮更改为普通按钮

```
<p:commandButton id="confirm" type="submit" value="Your Command Text"/> 
```

然后在点击事件上调用对话框

```
<p:commandButton id="confirm" type="button" value="Your Command Text" onclick="dialog.show()"/> 
```

`dialog`是`widget var`你的对话。

然后，您可以从确认对话框中的命令按钮执行删除操作。

看起来你已经做了这个改变。您仍然遇到同样的问题吗？

# android - 安卓打开数据库失败（预创建）

> ID：13642833
> 
> 赞同：1
> 
> 时间：2012-11-30T09:59:10.687
> 
> 标签：android, sqlite, android-sqlite

我已将我的 sqlite 数据库文件放在“assets”文件夹中，并且我编写了一个 DataManager 类来从数据库中获取数据，但是我遇到了运行时`CreateDataBase()`错误。请帮我解决问题

这是我的 Datamanager 类。我正在为 android 预创建数据库，但我正在获取文件未找到异常，请帮助我..我在下面显示了我的 Logcat。

**（数据管理器类）**

```
package com.example.applicationdatabase;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class DataBaseManager extends SQLiteOpenHelper {

    // The Android's default system path of your application database.
    //data/data/ and /databases remain the same always. The one that must be changed is com.example which represents
    //the MAIN package of your project
    private static String DB_PATH = "/data/data/com.example.applicationdatabase/databases";

    //the name of your database
    private static String DB_NAME = "database";

    private static SQLiteDatabase mDataBase;

    private static DataBaseManager sInstance = null;
    // database version    
    private static final int DATABASE_VERSION = 1;

    /**
     * Constructor Takes and keeps a reference of the passed context in order to
     * access to the application assets and resources.
     */
    private DataBaseManager() {
        super(ApplicationContextProvider.getContext(), DB_NAME, null, DATABASE_VERSION);

        try {
            createDataBase();
            openDataBase();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    /**
     * Singleton for DataBase
     *
     * @return singleton instance
     */
    public static DataBaseManager instance() {

        if (sInstance == null) {
            sInstance = new DataBaseManager();
        }
        return sInstance;
    }

    /**
     * Creates a empty database on the system and rewrites it with your own
     * database.
     *
     * @throws java.io.IOException io exception
     */
    private void createDataBase() throws IOException {

        boolean dbExist = checkDataBase();

        if (dbExist) {
            // do nothing - database already exist
        } else {

            // By calling this method an empty database will be created into
            // the default system path
            // of your application so we are gonna be able to overwrite that
            // database with our database.
            this.getReadableDatabase();

            try {    copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each
     * time you open the application.
     *
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase() {

        SQLiteDatabase checkDB = null;

        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {

            // database doesn't exist yet.

        }

        if (checkDB != null) {

            checkDB.close();

        }

        return checkDB != null;
    }

    /**
     * Copies your database from your local assets-folder to the just created
     * empty database in the system folder, from where it can be accessed and
     * handled. This is done by transfering bytestream.
     *
     * @throws java.io.IOException io exception
     */
    public void copyDataBase() throws IOException {

        // Open your local db as the input stream
        InputStream myInput =ApplicationContextProvider.getContext().getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    private void openDataBase() throws SQLException {

        // Open the database
        String myPath = DB_PATH + DB_NAME;
        mDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);
    }

    /**
     * Select method
     *
     * @param query select query
     * @return - Cursor with the results
     * @throws android.database.SQLException sql exception
     */
    public Cursor select(String query) throws SQLException {
        return mDataBase.rawQuery(query, null);
    }

    /**
     * Insert method
     *
     * @param table  - name of the table
     * @param values values to insert
     * @throws android.database.SQLException sql exception
     */
    public void insert(String table, ContentValues values) throws SQLException {
        mDataBase.insert(table, null, values);
    }

    /**
     * Delete method
     *
     * @param table - table name
     * @param where WHERE clause, if pass null, all the rows will be deleted
     * @throws android.database.SQLException sql exception
     */
    public void delete(String table, String where) throws SQLException {

        mDataBase.delete(table, where, null);

    }

    /**
     * Update method
     *
     * @param table  - table name
     * @param values - values to update
     * @param where  - WHERE clause, if pass null, all rows will be updated
     */
    public void update(String table, ContentValues values, String where) {

        mDataBase.update(table, values, where, null);

    }

    /**
     * Let you make a raw query
     *
     * @param command - the sql comand you want to run
     */
    public void sqlCommand(String command) {
        mDataBase.execSQL(command);
    }

    @Override
    public synchronized void close() {

        if (mDataBase != null)
            mDataBase.close();

        super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

} 
```

日志猫：

```
11-30 16:02:18.908: E/SQLiteLog(968): (14) cannot open file at line 30176 of [00bb9c9ce4]
11-30 16:02:18.938: E/SQLiteLog(968): (14) os_unix.c:30176: (2) open(/data/data/com.example.applicationdatabase/databasesdatabase) - 
11-30 16:02:18.948: E/SQLiteDatabase(968): Failed to open database '/data/data/com.example.applicationdatabase/databasesdatabase'.
11-30 16:02:18.948: E/SQLiteDatabase(968): android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at com.example.applicationdatabase.DataBaseManager.checkDataBase(DataBaseManager.java:102)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at com.example.applicationdatabase.DataBaseManager.createDataBase(DataBaseManager.java:69)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at com.example.applicationdatabase.DataBaseManager.<init>(DataBaseManager.java:39)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at com.example.applicationdatabase.DataBaseManager.instance(DataBaseManager.java:55)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at com.example.applicationdatabase.DBActivity.onCreate(DBActivity.java:35)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.app.Activity.performCreate(Activity.java:5104)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.os.Looper.loop(Looper.java:137)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at android.app.ActivityThread.main(ActivityThread.java:5039)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at java.lang.reflect.Method.invokeNative(Native Method)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at java.lang.reflect.Method.invoke(Method.java:511)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-30 16:02:18.948: E/SQLiteDatabase(968):  at dalvik.system.NativeStart.main(Native Method)
11-30 16:02:19.008: E/AndroidRuntime(968): FATAL EXCEPTION: main
11-30 16:02:19.008: E/AndroidRuntime(968): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.applicationdatabase/com.example.applicationdatabase.DBActivity}: java.lang.NullPointerException
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.os.Looper.loop(Looper.java:137)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.app.ActivityThread.main(ActivityThread.java:5039)
11-30 16:02:19.008: E/AndroidRuntime(968):  at java.lang.reflect.Method.invokeNative(Native Method)
11-30 16:02:19.008: E/AndroidRuntime(968):  at java.lang.reflect.Method.invoke(Method.java:511)
11-30 16:02:19.008: E/AndroidRuntime(968):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-30 16:02:19.008: E/AndroidRuntime(968):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-30 16:02:19.008: E/AndroidRuntime(968):  at dalvik.system.NativeStart.main(Native Method)
11-30 16:02:19.008: E/AndroidRuntime(968): Caused by: java.lang.NullPointerException
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:188)
11-30 16:02:19.008: E/AndroidRuntime(968):  at com.example.applicationdatabase.DataBaseManager.createDataBase(DataBaseManager.java:79)
11-30 16:02:19.008: E/AndroidRuntime(968):  at com.example.applicationdatabase.DataBaseManager.<init>(DataBaseManager.java:39)
11-30 16:02:19.008: E/AndroidRuntime(968):  at com.example.applicationdatabase.DataBaseManager.instance(DataBaseManager.java:55)
11-30 16:02:19.008: E/AndroidRuntime(968):  at com.example.applicationdatabase.DBActivity.onCreate(DBActivity.java:35)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.app.Activity.performCreate(Activity.java:5104)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
11-30 16:02:19.008: E/AndroidRuntime(968):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
11-30 16:02:19.008: E/AndroidRuntime(968):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:01:12.953

这是从 Assest 文件夹中读取数据库的工作代码。唯一的问题是它无法找到的 PATH。

我希望它可以帮助某人，如果有任何疑问请给我留言...

```
package net.learn2develop.Databases;

import java.io.IOException;

import android.app.Activity;

import android.database.Cursor;
import android.database.SQLException;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class DatabasesActivity extends Activity {

    protected static final String TAG = null;
    private Button insertButton;
    private Button updateButton;
    private Button deleteButton;
    private Button displayButton;
    boolean status = false;

    private EditText name;
    private EditText email;
    protected int value1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        DBAdapter myDbHelper = new DBAdapter(null);
        myDbHelper = new DBAdapter(this);

        insertButton = (Button) findViewById(R.id.btnInsert);
        updateButton = (Button) findViewById(R.id.btnUpdate);
        deleteButton = (Button) findViewById(R.id.btnDelete);
        displayButton = (Button) findViewById(R.id.btnDisplay);
        name = (EditText) findViewById(R.id.edit_name);
        email = (EditText) findViewById(R.id.edit_email);

        // --- inserting ------
        insertButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                if (name.getText().toString().trim().length() == 0)
                {
                    Toast msg = Toast.makeText(getBaseContext(),
                            "Please Enter Name ", Toast.LENGTH_LONG);
                    msg.show();
                }
                else if (email.getText().toString().trim().length() == 0)
                {
                    Toast msg = Toast.makeText(getBaseContext(),
                            "Please Enter Email", Toast.LENGTH_LONG);
                    msg.show();
                }
                else

                    insertRecord();
            }
        });

        // --------Deleting the Records -----------
        deleteButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                deleteRecord();
            }
        });

        // --- Displaying the Records -------
        displayButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                DisplayRecord();
            }
        });

        updateButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                if (name.getText().toString().trim().length() == 0)
                {
                    Toast msg = Toast.makeText(getBaseContext(),
                            "Please Enter Name ", Toast.LENGTH_LONG);
                    msg.show();
                }
                else if (email.getText().toString().trim().length() == 0)
                {
                    Toast msg = Toast.makeText(getBaseContext(),
                            "Please Enter Email", Toast.LENGTH_LONG);
                    msg.show();
                }
                else
                {
                    updateRecord();
                }
            }
        });

        try {
            myDbHelper.createDataBase();
        } catch (IOException ioe) {
            throw new Error("Unable to create database");
        }

        try {
            myDbHelper.openDataBase();
        } catch (SQLException sqle) {
            throw sqle;
        }

    }

    protected void DisplayRecord() {
        DBAdapter myDbHelper1 = new DBAdapter(null);
        myDbHelper1.openDataBase();
        Cursor c = myDbHelper1.getAllContacts();

        if (c.moveToFirst()) {
            do {
                DisplayContact(c);
            } while (c.moveToNext());
        }
        myDbHelper1.close();
    }

    protected void updateRecord() {

        String Name = fetchName();
        String Email = fetchEmail();

        DBAdapter myDbHelper1 = new DBAdapter(null);
        myDbHelper1.openDataBase();
        if (myDbHelper1.updateContact(1, Name, Email))
        {
            Toast msg = Toast.makeText(getBaseContext(),
                    "Update Successfully ", Toast.LENGTH_LONG);
            msg.show();
        }
        else
        {
            Toast msg = Toast.makeText(getBaseContext(),
                    "Update Failed ", Toast.LENGTH_LONG);
            msg.show();
        }
        myDbHelper1.close();

    }

    protected void deleteRecord() {
        DBAdapter myDbHelper1 = new DBAdapter(null);

        myDbHelper1.openDataBase();
        if (myDbHelper1.deleteContact(27))
        {
            Toast msg = Toast.makeText(getBaseContext(),
                    "Delete Successfully ", Toast.LENGTH_LONG);
            msg.show();
        }
        else
        {
            Toast msg = Toast.makeText(getBaseContext(),
                    "Delete Failed ", Toast.LENGTH_LONG);
            msg.show();
        }
        myDbHelper1.close();

    }

    protected void insertRecord() {
        String Name = fetchName();
        String Email = fetchEmail();

        DBAdapter myDbHelper1 = new DBAdapter(null);
        myDbHelper1.openDataBase();
        long id = myDbHelper1.insertContact(Name, Email);
        myDbHelper1.close();
        Toast msg = Toast.makeText(getBaseContext(),
                "Record: " + id + " Successfully inserted", Toast.LENGTH_LONG);
        msg.show();
        name.setText("");
        email.setText("");

    }

    public void DisplayContact(Cursor c) {
        Toast.makeText(
                this,
                "id: " + c.getString(0) + "\n" + "Name: " + c.getString(1)
                        + "\n" + "Email: " + c.getString(2), Toast.LENGTH_LONG)
                .show();
    }

    public String fetchName()
    {
        String Name = name.getText().trim().toString();
        if (Name.contentEquals(name.getHint()))
        {

            return " ";
        }
        else
        {
            return Name;
        }
    }

    public String fetchEmail()
    {
        String Email = email.getText().trim().toString();
        if (Email.contentEquals(email.getHint()))
        {
            return " ";
        }
        else
        {
            return Email;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T04:00:54.450

我和你遇到了同样的问题，我知道这个错误原因的操作。因为你没有添加写权限，你需要在manifest.xml中添加句-“”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:34:33.687

我认为这个问题来自 HoneyComb，对于早期版本我们没有问题。将代码从 onCreate() 方法移动到 onResume() 方法，并使用 AsyncTasck 进行数据库操作。我希望这能解决问题。或者只需在 DataBaseManager 中编写数据库创建语句（SQL 语句）或将 sql 查询放在任何 xml（原始文件夹内）文件中并处理 xml 文件以创建数据库。

```
public class DatabaseHelper extends SQLiteOpenHelper {

    public static final String DATABASE_NAME = "mydb.sqlite";

    protected Context context;

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 1);
        this.context = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String sqlStatement;
        try {
            InputStream in = context.getResources().openRawResource(R.raw.mydbqueries);
            DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            Document doc = builder.parse(in, null);
            NodeList statements = doc.getElementsByTagName("statement");
            for (int i=0; i<statements.getLength(); i++) {
                sqlStatement = statements.item(i).getChildNodes().item(0).getNodeValue();
                db.execSQL(sqlStatement);
            }
        } catch (Throwable t) {
        }
    }

    SQLiteDatabase sqliteDB = null;
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        onCreate(db);
    }

    public SQLiteDatabase open() throws SQLException
    {
        sqliteDB = this.getWritableDatabase();
        return sqliteDB;
    }
} 
```

## mydbqueries.xml 内容

```
<?xml version="1.0" encoding="UTF-8"?><!-- <?xml version="1.0" encoding="utf-8"?> -->
<!-- database queries -->
<sql>
<!-- Meta data table -->
<!-- <statement> CREATE TABLE "android_metadata" ("locale" TEXT DEFAULT 
    'en_US') </statement> Meta data table <statement> INSERT INTO "android_metadata" 
    VALUES('en_US') </statement> -->

<statement>
    sql statement
</statement>
</sql> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-11T08:48:01.170

当您想要访问“/data/data/YOUR-PACKAGE/databases/YOUR-DATABASE”中的数据库但在您访问之前没有任何数据库时会引发此异常。所以你必须创建你的数据库。但是怎么做？在进行任何访问之前，您必须使用以下代码：

* * *

```
SQLiteDatabase db;

db = getWritableDatabase();

if (db != null) {
    b.close();
}
copyDatabase(); 
```

# c# - OLE DB (MS Access) 中的 UPSERT 查询/语法

> ID：13642840
> 
> 赞同：0
> 
> 时间：2012-11-30T09:59:28.650
> 
> 标签：c#, sql, oledb

对于 SQL Server，我可以这样做

```
UPDATE [Table] SET b=2, c=3 WHERE a=1;
IF @@ROWCOUNT=0 
INSERT INTO [Table] (a,b,c) VALUES (1,2,3) 
```

你如何在 MS Access 上做类似的事情（使用 OleDbConnection）？

这样做我得到了

> 在 SQL 语句结束后找到的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:14:28.727

我不认为 Jet/ACE OleDB 引擎对此类问题具有等效的 T-SQL 语法。

你应该去检查记录是否存在，然后决定插入或更新。
但是，作为 Access 主要是一个单/本地用户数据库系统，您应该不会遇到很多问题，例如以下伪代码：

```
using(OleDbConnection cn = new OleDbConnection(constring))
{
     cn.Open();
     using(OleDbCommand cmd = new OleDbCommand("select count(*) from table where pkID = ?", cn);
     {
        cmd.Parameters.AddWithValue("pk", myID);
        int result = Convert.ToInt32(cmd.ExecuteScalar());
        if(result == 0)
           // do your insert command here
        else
           // do your update command here
     }
} 
```

当然，正如我所说，这没有考虑并发问题。

# c - 格式“%s”需要“char *”类型的参数，但参数 3 在 fprintf 中具有“int”类型 [-Wformat]

> ID：13642844
> 
> 赞同：1
> 
> 时间：2012-11-30T09:59:41.483
> 
> 标签：c, types, arguments, printf

我有以下方法内容：

```
FILE *file;
file = fopen("customers.dat", "w");
PList *list;
list = &customers;
fprintf(file, "%s", *(list->person.name)); 
```

fprintf 行给出的错误::

```
format '%s' expects argument of type 'char *', but argument 3 has type 'int' [-Wformat] 
```

我有以下结构：

清单：

```
typedef struct PList{
    Person person;
    struct PList *nextPerson;  //  set to NULL by default <<<<<
}PList; 
```

人：

```
typedef struct Person{
    char name[100]; // Left as "" if empty Person
    PersonID ID;
    float amountOwed;
}Person; 
```

个人编号：

```
typedef struct PersonID{
    char letter;
    int number; // 7 digits
}PersonID; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:01:01.483

删除`*`：

```
fprintf(file, "%s", *(list->person.name));
                    ^ 
```

# windows - 在构建开始之前将数据推送到詹金斯的从机

> ID：13642850
> 
> 赞同：1
> 
> 时间：2012-11-30T09:59:51.740
> 
> 标签：windows, tomcat, jenkins, master-slave

我有以下配置：

Jenkins Master - 在 windows+tomcat 上运行，Jenkins Slave - 在 gentoo 上运行

从站可以通过 ssh 访问，主站可以毫无问题地启动它。但是，不可能以其他方式启动任何连接。

问题是代码存储库在主端，似乎从站尝试在构建之前从存储库中获取并且它失败了（显然）。

我可以将数据推送到从机，但我不知道如何在构建脚本启动之前在主机端执行任何命令。另外，我不确定 SCM 轮询是在主机还是从机上启动的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:36:38.123

其中，有一个[Copy to slave 插件](https://wiki.jenkins-ci.org/display/JENKINS/Copy+To+Slave+Plugin)，可以将文件从主机推送到从机。另外，可以选择使用[从站设置插件](https://wiki.jenkins-ci.org/display/JENKINS/Slave+Setup+Plugin)在从站启动/连接时将环境和所有依赖项传播到从站。

但它似乎是如何从从机访问文件/代码存储库的概念问题。通常这些东西是由 SCM 插件处理的，只要你在 master 或任何其他机器上有一个可访问的存储库，这应该是相当简单的。我相信如果你能更好地描述那部分会有所帮助。

# php - 在 ZF2 中添加模板地图动态

> ID：13642852
> 
> 赞同：2
> 
> 时间：2012-11-30T09:59:53.220
> 
> 标签：php, zend-framework2

我必须硬编码才能添加新布局。然后我想找到一些方法在 ZF2 中添加模板映射动态。

我的 module.config.php

```
'view_manager' => array (
    'display_not_found_reason' => true,
    'display_exceptions' => true,
    'doctype' => 'HTML5',
    'not_found_template' => 'error/404',
    'exception_template' => 'error/index',
    'template_map' => array (
            'layout/layout' => __DIR__ . '/../../../template/layout/layout.phtml',
            'layout/custom' => __DIR__ . '/../../../template/layout/custom.phtml',
            'error/404' => __DIR__ . '/../../../template/error/404.phtml',
            'error/index' => __DIR__ . '/../../../template/error/index.phtml' 
    ),
    'template_path_stack' => array (
            __DIR__ . '/../view/'
    ) 
) 
```

我通过这种方式设置了新的布局

```
$e->getApplication()->getEventManager()->getSharedManager()->attach('Zend\Mvc\Controller\AbstractActionController', 'dispatch', function($e) {
    $controller = $e->getTarget();
    $controller->layout('template_name');
}, 100); 
```

请给我一些建议/样品

谢谢 ！

===================

2012 年 12 月 8 日更新：

我找到了解决方案并应用于我的“层次模板系统”

修改module.config.php

```
'template_path_stack' => array (
     __DIR__ . '/../view/',
 __DIR__ . '/../../../' //Parent folder of template path
) 
```

在 Module.php 中添加：

```
$e->getApplication()->getEventManager()->getSharedManager()->attach('Zend\Mvc\Controller\AbstractActionController', 'dispatch', function($e) {
    $controller = $e->getTarget();
    $controllerClass = get_class($controller);

    //Get routing info
    $controllerArr = explode('\\', $controllerClass);
    $currentRoute = array(
        'module' =>  strtolower($controllerArr[0]),
        'controller' => strtolower(str_replace("Controller", "", $controllerArr[2])),
        'action' => strtolower($controller->getEvent()->getRouteMatch()->getParam('action'))
    );

    //Get curr route
    $currAction = implode('/',$currentRoute);
    $currController = $currentRoute['module'] . '/' . $currentRoute['controller'];
    $currModule = $currentRoute['module'];

    //Template file location
    $templatePath = __DIR__ .'/../../template/';

    //Set template
    $template = 'layout/layout'; // Default template

    if (file_exists($templatePath . $currAction.'.phtml')) {
        $template = $currAction;
    }else if(file_exists($templatePath . $currController.'.phtml')) {
        $template = $currController;
    }else if(file_exists($templatePath . $currModule.'.phtml')) {
        $template = $currModule;
    }else{
        if($currentRoute['controller']=='admin'){
            $template = 'admin/layout'; // Admin default template
        }
    }

    $controller->layout('template/'.$template); //Pevert duplicate layout
}, 100); 
```

注意：如果您在“布局”和“视图”之间设置相同的关键变量。它将呈现重复的“布局”并且不理解您当前的视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:50:50.197

在您的控制器中，当您创建一个新的视图模型时，您可以设置您在那里创建的模板。

```
public function someAction() {
    $viewModel = new ViewModel();
    $viewModel->setTemplate('layout/custom');

    return $viewModel;
} 
```

只需确保 layout.phtml 文件位于您在 template_map 中设置的路径中

# android - 不清楚为什么会发生错误，是由于 AsyncTask 的使用不正确？

> ID：13642854
> 
> 赞同：1
> 
> 时间：2012-11-30T10:00:17.870
> 
> 标签：android, resttemplate

不清楚为什么会发生错误，是由于 AsyncTask 的使用不正确？

我现在正在开发一个 android 日历应用程序。我想要同步功能，允许用户将他们的数据同步到服务器，反之亦然。
当用户打开应用程序时，它会从服务器获取数据并将新数据更新到 android 设备上的 sqlite 数据库。
并且每当用户创建新数据时，它都会将此数据发送到服务器以更新到服务器上的数据库。
我就这样实现了我的理想。
1\. MainActivity 类做同步动作

```
public class MainActivity extends Activity {
    DataSyncTask syncTask;
    public void onCreate(Bundle savedInstanceState){
        Button insertBt = (Button) findViewById(R.id.bt_insert);

        // get data1
        Data1 data1;

        syncTask = new DataSyncTask(this);
        syncTask.syncOnStart(data1);

        insertBt.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                Data2 data2;
                // get data2

                syncTask.syncOnInsert(data2);
            }
        });
    }
} 
```

2.DataSyncTask收集asyncTask

```
public class DataSyncTask {
    Context mContext;
    public DataSyncTask(Context context){
        mContext = context;
    }

    private class SyncWhenStartTask extends AsyncTask<Data1, Integer, String>{
        protected String doInBackground(Data1... data1s){
            Object obj1 = ServerUtilities.sendDataForStep1(data1s[0]);

            Data2 data2;
            // Process Object

            Object obj2 = ServerUtilities.sendDataToInsert(data2);
            return "Success";
        }
    }

    private class SyncWhenInsertTask  extends AsyncTask<Data2, Integer, String>{
        protected String doInBackground(Data2... datas){            
            Object obj2 = ServerUtilities.sendDataToInsert(datas[0]);

            return "Success";
        }
    }

    public void syncOnStart(Data1 data1){
        new SyncWhenStartTask().execute(data1);
    }

    public void syncOnInsert(Data2 data2){
        new SyncWhenInsertTask().execute(data2);
    }
} 
```

3.ServerUtilities 类

```
public final class ServerUtilities {
    static final String SERVER_URL = "http://172.2.100.99:8080";

    public static String sendDataForStep1(Data1 data1) {
        String url = SERVER_URL + "/sendDataForStep1";
        ServerUtil<Data1, String> server = ServerUtil<Data1, String>();
        return server.post(url, data1, String.class);
    }

    public static String sendDataToInsert(Data2 data2) {
        String url = SERVER_URL + "/sendDataToInsert";
        ServerUtil<Data2, String> server = ServerUtil<Data2, String>();
        return server.post(url, data2, String.class);
    }

    private static class ServerUtil<T1, T2> {
        public T2 post(String url, T1 obj, Class<T2> returnType) {
            HttpHeaders requestHeaders = new HttpHeaders();

            // Sending a JSON or XML object i.e. "application/json" or
            // "application/xml"
            requestHeaders.setContentType(MediaType.APPLICATION_JSON);

            // Populate the Message object to serialize and headers in an
            // HttpEntity object to use for the request
            try {
                HttpEntity<T1> requestEntity = new HttpEntity<T1>(
                        object, requestHeaders);

                // Create a new RestTemplate instance
                RestTemplate restTemplate = new RestTemplate(true);

                // Make the network request, posting the message, expecting
                // a list of SyncData in response from the server
                ResponseEntity<T2> response = restTemplate
                        .exchange(url, HttpMethod.POST, requestEntity, returnType);

                if(response != null) {
                    return response.getBody();
                }
            } catch (Exception e) {
                Log.e(TAG + "-Exception", e.getMessage());  // Line 345 in logcat
            }
            return null;
        }
    }
} 
```

当我启动 MainActivity 时，它连接到服务器，获取数据，更新到 sqlite 数据库并将新数据从设备发送到服务器以更新成功，一切正常。但是当我创建一个新数据时，当执行syncTask.syncOnInsert()，它得到异常：

```
11-30 14:38:25.849: W/dalvikvm(14140): threadid=12: thread exiting with uncaught exception (group=0x40a13300)
11-30 14:38:25.869: E/AndroidRuntime(14140): FATAL EXCEPTION: AsyncTask #2
11-30 14:38:25.869: E/AndroidRuntime(14140): java.lang.RuntimeException: An error occured while executing doInBackground()
11-30 14:38:25.869: E/AndroidRuntime(14140):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at java.lang.Thread.run(Thread.java:856)
11-30 14:38:25.869: E/AndroidRuntime(14140): Caused by: java.lang.NullPointerException: println needs a message
11-30 14:38:25.869: E/AndroidRuntime(14140):    at android.util.Log.println_native(Native Method)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at android.util.Log.e(Log.java:231)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at vn.com.bip.office.smart.form.ServerUtilities$ServerUtil.post(ServerUtilities.java:345)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at vn.com.bip.office.smart.form.ServerUtilities.sendSyncData(ServerUtilities.java:283)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at vn.com.bip.office.smart.util.DataSyncTask$SyncWhenChangeOnScheduleTask.doInBackground(DataSyncTask.java:158)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at vn.com.bip.office.smart.util.DataSyncTask$SyncWhenChangeOnScheduleTask.doInBackground(DataSyncTask.java:1)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
11-30 14:38:25.869: E/AndroidRuntime(14140):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-30 14:38:25.869: E/AndroidRuntime(14140):    ... 5 more 
```

谁能解释我为什么会发生这种情况并教我如何解决这个错误。
提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:02:52.673

```
Log.e(TAG + "-Exception", e.getMessage()); 
```

`e.getMessage()`并不总是返回有效的字符串。有时它会返回`null`。这就是你的应用崩溃的原因

# javascript - 返回的事件对象覆盖父对象 - javascript，easeljs

> ID：13642856
> 
> 赞同：0
> 
> 时间：2012-11-30T10:00:19.287
> 
> 标签：javascript, oop, easeljs, createjs

我正在为 HTML5 游戏使用easeljs。

我正在从类中的方法中调用 onClick，但事件对象正在覆盖我的“this”对象，因此我无法再访问其他类方法或 var。例如我有类似的东西（显然这不是实际的代码，只是一个简单的说明）：

```
function Book(){

  this.text = "this is the text";

  this.makeText = function(){
            //Define some shapes
            var character = new Container();
            character.addChild(some shapes);
            character.onClick = this.detectClick;
  }

  this.detectClick = function(){
           alert(this.text);
  }
} 
```

所以，如果我运行它，我会收到一个未定义的警报，因为在我的 detectClick 方法中，这现在是我的事件对象。

那么如何从这个方法中调用原始文本呢？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:03:31.963

你需要我们闭包来传递对象引用

```
 var self = this;
 character.onClick = function(){ self.detectClick() }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T12:30:14.897

范围 `'this'` 是您代码中的问题。更改您的代码，如下面的代码

```
 function Book(){

  this.text = "this is the text";
  var that=this;
  this.makeText = function(){
        //Define some shapes
        var character = new Container();
        character.addChild(some shapes);
        character.onClick = that.detectClick;
 }

 this.detectClick = function(){
       alert(this.text);
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T20:31:18.240

或者使用简单的代理方法。

```
function proxy(method, scope) {
    return function() {
        return method.apply(scope, params);
    }
}
character.onclick = proxy(detectClick, this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T20:30:04.420

好的，你真正需要做的是

```
function Book(){

  this.text = "this is the text";

  this.makeText = function(){
            //Define some shapes
            var character = new Container();
            character.addChild(some shapes);
            character.onClick = this.detectClick.bind(this);
  }

  this.detectClick = function(){
           alert(this.text);
  }
} 
```

# javascript - 在html中打开同一页面中的子链接

> ID：13642858
> 
> 赞同：0
> 
> 时间：2012-11-30T10:00:23.280
> 
> 标签：javascript, html, dom-events

在 html 中，我有以下标签：

```
 <a href="javascript:void(0)"><span id=M26>2011-2012</span></a>
  <div id=c26 STYLE="display:none">

  <a href="javascript:void(0)"><span id=M27>2012-2013</span></a>
  <div id=c26 STYLE="display:none"> 
```

在单击 2011-2012 或 2012-2013 时，我想设置 div 标签的显示属性。我为此使用以下 Javascript 代码，并在 body 标记中调用 Javascript 函数。输出显示样式，显示不是对象或属性。

```
<script language="javascript">
   function clickHnadler()
   {
   var xid= document.getElementsByTagName("span");
   var xsp= xid[0].id;   
  alert("Span id is "+xsp);
  if(xsp.charAt(0)=="M")
  {
   var oC = document.all("C"& xsp.substring(1,2));
   if(oC.STYLE.display == "none")
   {
    oC.Style.Display = "";
   }
   else{
     oC.Style.Display = "none";
     }
    } 
  }
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:32:01.107

Based on what i understand from your question, I come up with this.

```
 <script type="text/javascript" src="jquery1.8.js"></script>
    <a href="javascript:void(0)" onclick="$(this).next('div').toggle()"><span id=M26>2011-2012</span></a>
    <div id=c26 STYLE="display:none">
    2011-2012 details</div>
    <br />
    <a href="javascript:void(0)" onclick="$(this).next('div').toggle()"><span id=M27>2012-2013</span></a>
    <div id=c26 STYLE="display:none">   
        2012-2013 details
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:14:31.173

你可以使用 clickHandler 有以下方式，function clickHandler(e) { window.document.links[0].handleEvent(e); }

您需要将事件空间绑定到要处理点击的元素。有关更多信息，请参阅以下链接，

[http://docs.oracle.com/cd/E19957-01/816-6409-10/evnt.htm#1009606](http://docs.oracle.com/cd/E19957-01/816-6409-10/evnt.htm#1009606)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:13:57.807

使用jQuery：

您可以在函数中传递元素或 ID：例如：

```
<a href="#" onclick="clickhandler(this)"><span id=M26>2011-2012</span></a>

function clickHnadler(element)
{
  var id = $(element > span).attr(id);
  id[0] = 'c'; //not the nicest way, maybe use a replace or something like that
  $(id).show(); //or $(id).css('display','list');
} 
```

# python - Python - 通过字典更改属性

> ID：13642863
> 
> 赞同：1
> 
> 时间：2012-11-30T10:00:39.783
> 
> 标签：python

我正在编写一个 python 脚本来将各种文件中的数据收集到具有许多属性的对象中。这些属性中的每一个基本上都可以是“ok”、“bad”或“N/A”。根据我调用脚本的参数，*哪些属性是“N/A”的变化。*

我想要做的是启动所有这些属性默认设置为“ok”的所有对象，然后将那些尚未测量的对象设置为“N/A”（由返回 N/A 列表的函数检查-属性）。（然后我从文件中收集数据以将“坏”的属性设置为“坏”。）

我以为我可以通过字典来做到这一点，但它似乎不起作用/访问属性？

```
class Myclass:
    def __init__(self, ID):
        self.ID = ID
        self.at1 = "ok"
        self.at2 = "ok"
        self.at3 = "ok"
        self.at4 = "ok"
        # there are a LOT more of these attributes

def foo(unused):
    for i in range(3):
        blurb = Myclass(i)
        unused_dic = {"at1":blurb.at1, "at2":blurb.at2,
                      "at3":blurb.at3, "at4":blurb.at4}
        for key in unused:
            unused_dic[key] = "N/A"
        print blurb.ID, blurb.at1, blurb.at2, blurb.at3, blurb.at4

unused = ["at1","at3"] # this is returned by another function
foo(unused) 
```

这个的输出是：

```
0 ok ok ok ok
1 ok ok ok ok
2 ok ok ok ok 
```

但我希望并希望：

```
0 N/A ok N/A ok
1 N/A ok N/A ok
2 N/A ok N/A ok 
```

我做错了什么，我怎么能做对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:05:03.640

您没有更改实例的属性，仅更改字典本身的属性。python中的变量不是指针；在一个地方更改字符串不会使更改在其他地方可见。

您可以使用`setattr()`动态更改实例上的属性：

```
def foo(unused):
    for i in range(3):
        blurb = Myclass(i)
        for key in unused:
           setattr(blurb, key, "N/A") 
```

但是您必须将实例*存储*在`blurb`某个地方，可以说上面的代码只是“丢球”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:10:28.437

你没有修改你的`blurb`对象。您正在从 修改值`unused_dict`。

您需要将循环更改为：

```
 for key in unused:
          if key in unused_dic:
              setattr(blurb, key, "N/A") # set attribute 'key' of object blurb to "N/A" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:12:40.527

我尝试采用更面向对象的风格；该`setattr`功能是您所需要的：

```
>>> class Myclass:
    def __init__(self, ID):
        self.ID = ID
        self.at1 = "ok"
        self.at2 = "ok"
        self.at3 = "ok"
        self.at4 = "ok"

    def __str__(self):
    return str((self.at1, self.at2, self.at3, self.at4))

    def unused(self, unused):
    for attr in unused:
            setattr(self, attr, 'N/A')
    print self

>>> unused = ["at1","at3"]
>>> for i in range(3):
    m = Myclass(i)
    m.unused(unused)

('N/A', 'ok', 'N/A', 'ok')
('N/A', 'ok', 'N/A', 'ok')
('N/A', 'ok', 'N/A', 'ok') 
```

# svn - 什么是持续集成构建健康指标？

> ID：13642864
> 
> 赞同：3
> 
> 时间：2012-11-30T10:00:47.683
> 
> 标签：svn, jenkins, continuous-integration

我想为开发团队创建报告，概述他们的持续集成构建健康状态。我们使用 SVN 作为存储库，使用 Jenkins 执行 CI 构建，因此可以获得大量信息。

除了成功构建率和构建修复率之外，您是否知道任何有用的指标可以添加到此类报告中并且可以在 Jenkins 中轻松实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:12:37.583

CI 服务器的统计数据可能是执行时间（理想情况下每次签入 1 次集成）、构建修复所需的时间以及构建红色的频率与构建总数的关系。

其他有趣的指标来评估相应的。更新将是（好的）*代码指标*（也称为软件指标），例如重复代码的百分比、每个项目各自文件的错误（以便发现可能需要重构的模块）、复杂性度量，例如循环复杂性、lint 检查、编码标准、测试覆盖率。

我刚刚用谷歌搜索的各种链接：

*   [http://www.thinkinginagile.com/2011/07/continuous-integration-build-metrics_16.html](http://www.thinkinginagile.com/2011/07/continuous-integration-build-metrics_16.html)
*   [http://www.thepragmaticarchitect.com/2006/12/15/code_metrics.html](http://www.thepragmaticarchitect.com/2006/12/15/code_metrics.html)
*   [http://www.ndepend.com/metrics.aspx](http://www.ndepend.com/metrics.aspx)

**附录**
也许您喜欢[CI 游戏](https://wiki.jenkins-ci.org/display/JENKINS/The+Continuous+Integration+Game+plugin)，它记录开发人员如何影响集成状态。

# c - 'ls' 命令在 Linux 中无法通过 C 执行

> ID：13642866
> 
> 赞同：-4
> 
> 时间：2012-11-30T10:00:55.763
> 
> 标签：c, linux

这个简单的程序应该运行命令`ls` ，但输出是 1 和 2。有人可以向我解释为什么`ls`不工作吗？

```
#include <stdio.h>
main()
{
    int pid,stat;
    if((pid=fork())==0)
      {
        execl("/bin/","ls",NULL);
        printf("1");
    exit(1);
      }
    else
      {
         wait(&stat);
         printf("2");
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:02:16.057

尝试类似：

```
execl("/bin/ls", "ls", (char*)NULL);
           ^^^^ 
```

# spring - org.springframework.beans.factory.BeanCreationException：以及 org.springframework.beans.BeanInstantiationException

> ID：13642876
> 
> 赞同：-1
> 
> 时间：2012-11-30T10:01:24.093
> 
> 标签：spring

我尝试在 spring 中进行登录和一些数据库操作（插入、删除）并帮助 jsp。我对 spring 完全陌生。我收到以下错误，如 bean 创建异常。我已将 dvd 定义为 web 中的 servlet 名称。 xml。所以我的 dvd_servlet.xml 文件如下

```
<beans.................>
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value="/"/>
    <property name="suffix" value=".jsp"/>
</bean>

<bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost:3306/DVD"/>
        <property name="username" value="root"/>
        <property name="password" value="root"/>
</bean>

<bean name="DvdController" class="DvdController" >
    <property name="dataSource" ref="dataSource"/>
</bean>
<bean name="LoginController" class="LoginController" >
    <property name="dataSource" ref="dataSource"/>
</bean>
<bean name="AccountCreationController" class="AccountCreationController" >
    <property name="dataSource" ref="dataSource"/>
</bean>
</beans> 
```

我的 LoginController 就像

```
public class LoginController implements Controller   {

     int check;
    private DataSource dataSource;
     public void setDataSource(DataSource dataSource) {
    this.dataSource=dataSource;
    }
    public DataSource getDataSource() {
    return dataSource;
    }

    JdbcTemplate jdbcTemplate=new JdbcTemplate(dataSource);
    @RequestMapping(value="/Login",method=RequestMethod.POST)
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) {                       
                String userName = request.getParameter("userName");
            String password=request.getParameter("password");
            try {
            String selectQuery=("SELECT * FROM USERDETAILS WHERE NAME='"+userName+"'AND PASSWORD='"+password+"'");
                check=jdbcTemplate.update(selectQuery,new Object[]{});  
                System.out.println(check);
                if(check!=0) {
                response.sendRedirect("DvdController");

                }
            }

            catch(IOException e) {
            e.printStackTrace();            
            }

            return new ModelAndView("failure"); 
    } 
```

我的错误如下：

org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/dvd-servlet.xml] 中定义名称为“LoginController”的 bean 创建错误：bean 的实例化失败；嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [LoginController]：构造函数抛出异常；嵌套异常是 java.lang.IllegalArgumentException：需要属性 'dataSource' org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(support:AbstractAutowireCapableBeanFactory.java):965) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory。 createBeanInstance(support:AbstractAutowireCapableBeanFactory.java):911) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory。

根本原因

org.springframework.beans.BeanInstantiationException：无法实例化bean类[LoginController]：构造函数抛出异常；嵌套异常是 java.lang.IllegalArgumentException: Property 'dataSource' is required org.springframework.beans.BeanUtils.instantiateClass(beans:BeanUtils.java):141) org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(support: SimpleInstantiationStrategy.java):74) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(support:AbstractAutowireCapableBeanFactory.java):958) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(support:AbstractAutowireCapableBeanFactory.java) :911) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean（支持：

根本原因

java.lang.IllegalArgumentException：需要属性“dataSource” org.springframework.jdbc.support.JdbcAccessor.afterPropertiesSet(support:JdbcAccessor.java):134) org.springframework.jdbc.core.JdbcTemplate.(core:JdbcTemplate.java) :164) LoginController.(LoginController.java:29) sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27 ) java.lang.reflect.Constructor.newInstance(Constructor.java:513) org.springframework.beans.BeanUtils.instantiateClass(beans:BeanUtils.java):126) org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(支持：SimpleInstantiationStrategy.java）：74) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(support:AbstractAutowireCapableBeanFactory.java):958) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(support:AbstractAutowireCapableBeanFactory.java):911) org. springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(support:AbstractAutowireCapableBeanFactory.java):485) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(support:AbstractAutowireCapableBeanFactory.java):456) org.springframework.beans。 factory.support.AbstractBeanFactory$1.getObject(support:AbstractBeanFactory.java):291) org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(support:DefaultSingletonBeanRegistry.java):222) org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(support:AbstractBeanFactory.java):288) org.springframework.beans.factory.support.AbstractBeanFactory.getBean(support:AbstractBeanFactory.java):190) org. springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(support:DefaultListableBeanFactory.java):580) org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895) org.springframework.context.support.AbstractApplicationContext.refresh (AbstractApplicationContext.java:425) org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442) org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458) org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)

请帮我清除这个！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:15:42.597

我在这里看到两个问题：

```
<bean name="LoginController" class="LoginController" >
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

LoginController 真的是完全限定的类名吗？它应该类似于 com.cy.LoginController

其次，Spring 声明 LoginController 的构造函数需要属性 dataSource。看起来 LoginController 需要数据源的构造函数注入，你正在做的是 setter 注入，所以试试这个：

而不是`<property name="dataSource" ref="dataSource/>`，写： `<constructor-arg ref="dataSource"/>`

# javascript - 如何存根茉莉模拟对象的方法？

> ID：13642884
> 
> 赞同：86
> 
> 时间：2012-11-30T10:01:39.770
> 
> 标签：javascript, jasmine

根据 Jasmine 文档，可以像这样创建模拟：

```
jasmine.createSpyObj(someObject, ['method1', 'method2', ... ]); 
```

你如何存根这些方法之一？例如，如果你想测试一个方法抛出异常时会发生什么，你会怎么做？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-11-30T15:19:17.623

正如 EricG 评论的那样，您必须使用 chain `method1`，但不能使用（或在 2.0 版中）。它将*委托给真正的实现*。`method2``andCallThrough()``and.callThrough()`

 *在这种情况下，您需要链接`and.callFake()`并传递要调用的函数（可以抛出异常或任何您想要的）：

```
var someObject = jasmine.createSpyObj('someObject', [ 'method1', 'method2' ]);
someObject.method1.and.callFake(function() {
    throw 'an-exception';
}); 
```

然后你可以验证：

```
expect(yourFncCallingMethod1).toThrow('an-exception'); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-05-17T16:52:01.417

如果您使用的是 Typescript，将方法转换为`Jasmine.Spy`. 在上面的答案中（奇怪的是我没有代表发表评论）：

```
(someObject.method1 as Jasmine.Spy).and.callFake(function() {
  throw 'an-exception';
}); 
```

我不知道我是否过度设计，因为我缺乏知识......

对于打字稿，我想要：

*   来自底层类型的智能感知
*   仅模拟函数中使用的方法的能力

我发现这很有用：

```
namespace Services {
    class LogService {
        info(message: string, ...optionalParams: any[]) {
            if (optionalParams && optionalParams.length > 0) {
                console.log(message, optionalParams);
                return;
            }

            console.log(message);
        }
    }
}

class ExampleSystemUnderTest {
    constructor(private log: Services.LogService) {
    }

    doIt() {
        this.log.info('done');
    }
}

// I export this in a common test file 
// with other utils that all tests import
const asSpy = f => <jasmine.Spy>f;

describe('SomeTest', () => {
    let log: Services.LogService;
    let sut: ExampleSystemUnderTest;

    // ARRANGE
    beforeEach(() => {
        log = jasmine.createSpyObj('log', ['info', 'error']);
        sut = new ExampleSystemUnderTest(log);
    });

    it('should do', () => {
        // ACT
        sut.doIt();

        // ASSERT
        expect(asSpy(log.error)).not.toHaveBeenCalled();
        expect(asSpy(log.info)).toHaveBeenCalledTimes(1);
        expect(asSpy(log.info).calls.allArgs()).toEqual([
            ['done']
        ]);
    });
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-06-12T17:57:14.243

**角 9**

在测试注入简单服务的组件时，使用`jasmine.createSpyObj`是理想的选择。例如：假设在我的 HomeComponent 中有一个 HomeService（注入）。HomeService 中的唯一方法是 getAddress()。创建 HomeComponent 测试套件时，我可以将组件和服务初始化为：

```
describe('Home Component', () => {
    let component: HomeComponent;
    let fixture: ComponentFixture<HomeComponent>;
    let element: DebugElement;
    let homeServiceSpy: any;
    let homeService: any;

    beforeEach(async(() => {
        homeServiceSpy = jasmine.createSpyObj('HomeService', ['getAddress']);

        TestBed.configureTestingModule({
           declarations: [HomeComponent],
           providers: [{ provide: HomeService, useValue: homeServiceSpy }]
        })
        .compileComponents()
        .then(() => {
            fixture = TestBed.createComponent(HomeComponent);
            component = fixture.componentInstance;
            element = fixture.debugElement;
            homeService = TestBed.get(HomeService);
            fixture.detectChanges();
        });
    }));

    it('should be created', () => {
        expect(component).toBeTruthy();
    });

    it("should display home address", () => { 
        homeService.getAddress.and.returnValue(of('1221 Hub Street'));
        fixture.detectChanges();

        const address = element.queryAll(By.css(".address"));

        expect(address[0].nativeNode.innerText).toEqual('1221 Hub Street');
    });
 }); 
```

这是使用`jasmine.createSpyObj`. 但是，如果您的服务有更多方法更复杂的逻辑，我会建议创建一个 mockService 而不是 createSpyObj。例如： `providers: [{ provide: HomeService, useValue: MockHomeService }]`

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-13T11:32:48.297

基于@Eric Swanson 的回答，我创建了一个更好的可读性和文档化的函数，用于我的测试。我还通过将参数键入为函数来添加一些类型安全性。

我建议将此代码放在通用测试类中的某个位置，以便您可以将其导入每个需要它的测试文件中。

```
/**
 * Transforms the given method into a jasmine spy so that jasmine functions
 * can be called on this method without Typescript throwing an error
 *
 * @example
 * `asSpy(translator.getDefaultLang).and.returnValue(null);`
 * is equal to
 * `(translator.getDefaultLang as jasmine.Spy).and.returnValue(null);`
 *
 * This function will be mostly used in combination with `jasmine.createSpyObj`, when you want
 * to add custom behavior to a by jasmine created method
 * @example
 * `const translator: TranslateService = jasmine.createSpyObj('TranslateService', ['getDefaultLang'])
 * asSpy(translator.getDefaultLang).and.returnValue(null);`
 *
 * @param {() => any} method - The method that should be types as a jasmine Spy
 * @returns {jasmine.Spy} - The newly typed method
 */
export function asSpy(method: () => any): jasmine.Spy {
  return method as jasmine.Spy;
} 
```

用法如下：

```
import {asSpy} from "location/to/the/method";

const translator: TranslateService = jasmine.createSpyObj('TranslateService', ['getDefaultLang']);
asSpy(translator.getDefaultLang).and.returnValue(null); 
```*

# javascript - 返回 true 和 setimout

> ID：13642885
> 
> 赞同：6
> 
> 时间：2012-11-30T10:01:41.907
> 
> 标签：javascript

为什么这个函数不返回`true`？

```
function test(str) {
    window.setTimeout(function() {
        if(str == 'ok') {
            return true;
        }
    }, 1000);
}

console.log(test('ok')); 
```

* * *

这不正是我想要做的。我有一个名为 test() 的函数，它在 1 秒后执行一些操作。我想在 test() 完成时执行下一个函数（所以在超时之后）。

我怎么知道我什么时候完成了测试？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T10:08:50.850

跟踪您的代码，这就是发生的事情。

1.  `test()`被调用。
2.  `setTimeout`安排一个函数在 1000 毫秒后调用。
3.  `test()`结束执行，没有执行`return`语句，所以`undefined`返回。
4.  大约 1000 毫秒后，预定的函数触发。
5.  预定的函数返回`true`无。

换句话说，它只是不能那样工作。JS 解释器不会暂停，它会在超时后继续。您不能在 JS 中暂停执行。

* * *

相反，您通常使用回调：

```
function test(str, callback) {
  window.setTimeout(function() {
    if (str === 'ok') {
      callback(true);
    }
  }, 1000);
}

// logs 'true' 1000 ms later
test('ok', function(result) {
  console.log(result);
});

// logs nothing, callback never fires
test('NOTOK!', function(result) {
  console.log(result);
}); 
```

这段代码将做更多您似乎期望的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T10:03:45.427

它不会返回`true`，因为`setTimeout`调用是异步的。此外，代码中的返回值`true`来自内部函数。

处理此类程序流的正常方法是将回调传递给异步函数。

```
function test(str, callback) {
    window.setTimeout(function() {
        callback(str == 'ok');
    }, 1000);
}

test('ok', function (result) {
    console.log(result);
}); 
```

作为第二个参数传递的函数将在执行代码`test()`时被调用。`setTimeout`回调函数的参数将告诉是否`str`是`ok`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T10:04:18.527

对于初学者来说，settimeout 是一个异步方法，因此实际函数 test() 将在 settimeout 代码运行之前完成并返回。

其次，但是，您只从 settimeout 函数而不是测试函数返回 true，因此您永远不会得到除 false 之外的任何内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T10:21:15.620

它不会返回 true，因为异步函数 setTimeout() 将在 1000 毫秒后执行，并且 console.log 将以正常方式执行，而无需等待您的“测试”函数。

# rest - 删除记录时刷新数据不会删除ListView中的项目

> ID：13642892
> 
> 赞同：1
> 
> 时间：2012-11-30T10:02:02.860
> 
> 标签：rest, refresh, sproutcore

我最近开始使用 Sproutcore，我根据指南创建了 Todo 应用程序，更改了数据存储，以便它使用用 Node.js + Express.js 编写的 RESTful Web 服务，并添加了刷新按钮。我想知道如何正确刷新数据，因为当我在两个单独的窗口中打开页面并从一个窗口中删除记录时，单击刷新后该项目不会消失。创建或更新项目时，刷新工作正常。当我单击刷新时，我会执行以下操作：

```
TodosThree.store.find(TodosThree.TODO_QUERY).refresh(); 
```

我在这里想念什么？

# mysql - MySQL 中带条件的几个 COUNT

> ID：13642893
> 
> 赞同：0
> 
> 时间：2012-11-30T10:02:10.840
> 
> 标签：mysql, count

我目前正在使用其他一些统计数据进行命中计数器，例如登录访问者的百分比等等。

到目前为止，我已经尝试了许多不同的 SQL 查询，但目前我被困在这个问题上：

```
SELECT COUNT(*) AS totalhits,
COUNT(DISTINCT ip) AS visitors,
COUNT(user_id > 0) AS hitsloggedin,
COUNT(DISTINCT ip, user_id > 0) AS visitorsloggedin
FROM db.tblhits 
```

显然这是错误的。尽管存在 user_id 为 0 的行，但我在第三个和第四个 COUNT 语句中计算了所有行。不过，前两个语句工作得很好。

我敢肯定现在有人在笑他的屁股，但这是我尝试过的。

任何朝着正确方向的轻推将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:08:17.137

如下所述：[`COUNT(***expr***)`](http://dev.mysql.com/doc/en/group-by-functions.html#function_count)

> 返回由语句检索的行中非`NULL`值的数量的计数。***`expr`***[`SELECT`](http://dev.mysql.com/doc/en/select.html)

在您的第三种情况下，当该表达式的计算结果为or***`expr`***时`user_id > 0`，它是 non- ；因此结果不是你所期望的。`NULL``TRUE``FALSE``COUNT()`

由于 MySQL 没有真正的布尔类型，而是分别使用`1`and 和`0`for `TRUE`，`FALSE`您可以简单地使用[`SUM()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_sum)代替；在其他 RDBMS 中，您必须使用[`CASE`表达式](http://dev.mysql.com/doc/en/control-flow-functions.html#operator_case)：

```
COUNT(CASE WHEN user_id > 0 THEN 1 ELSE NULL END) 
```

对于您的第四个表达式，您可以执行以下操作：

```
COUNT(DISTINCT CASE WHEN user_id > 0 THEN ip ELSE NULL END) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:05:01.000

试试这个 ：：

```
SELECT 

(Select COUNT(*) FROM db.tblhits )AS totalhits,
(select COUNT(DISTINCT ip) FROM db.tblhits) AS visitors,
(select COUNT(user_id) FROM db.tblhits where user_id>0) AS hitsloggedin,
(select COUNT(DISTINCT ip ) FROM db.tblhits where user_id > 0) AS visitorsloggedin
FROM db.tblhits 
```

# mongodb - 文档数据库：数据模型迁移

> ID：13642895
> 
> 赞同：5
> 
> 时间：2012-11-30T10:02:12.733
> 
> 标签：mongodb, ravendb, nosql

像我们大多数人一样，我来自关系数据库世界，我目前正在研究文档数据库世界的可能性。我关心的一个问题是处理数据模型随时间的变化（添加新属性、重命名属性、添加关系......）。

在关系数据库中，这通常按如下方式处理：

*   编写数据库迁移
    -> 修改数据库架构
    -> 修复现有行的数据（通常包含一些业务逻辑）

*   修改代码（ORM 更新，..）

在使用文档数据库时，我感觉对数据模型的更改要容易得多；无需更新数据库模式，主要是添加一个属性，.. 一切都“正常工作”。我想知道团队如何在现实生活中管理这种迁移，带有文档数据库的企业项目：

*   对存储在文档数据库中的类型进行更改是否有严格的政策？例如，对这种类型的每次更改都需要迁移以更新现有文档吗？
*   因此，数据模型（存储在文档 db 中的类型）和业务模型之间是否有明确的分离？

谢谢你的时间，
科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:43:21.140

With RavenDB, you can do that with patching. See: [http://ayende.com/blog/157185/awesome-ravendb-feature-of-the-day-evil-patching](http://ayende.com/blog/157185/awesome-ravendb-feature-of-the-day-evil-patching) And: [http://blog.hibernatingrhinos.com/12705/new-option-in-the-ravendb-studiondash-patching](http://blog.hibernatingrhinos.com/12705/new-option-in-the-ravendb-studiondash-patching)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:00:24.413

对于 MongoDB 中的“模式”修改，您可以采用三种通用策略。我已经看到这三个都运行良好。您将使用哪一个在很大程度上取决于您的特定用例。

首先：您可以简单地向新文档添加一个新字段，然后编写代码来处理该字段不存在的情况。例如，您可以`address`在“用户”文档中添加一个 ' ' 字段，但您必须编写客户端代码来处理该字段不存在的情况。

第二：您可以编写代码来查看现有文档并在看到“旧式”文档时对其进行更新。`name`例如，您可以使用代码检查“用户”文档中是否存在“ ”字段。如果找到该字段，它会将其拆分为“ `first_name`”和“ `sur_name`”字段、`$unset`该`name`文档中的“ ”字段以及`$set`新的“ `first_name`”和“ `sur_name`”字段到它们的计算值。

第三：您可以批量更新集合中的所有文档以使用新模式。您将编写与上面相同的代码，但不是在应用程序读取文档时懒惰地应用它，而是将其应用于集合中的所有文档。

请注意，最后一种策略可能会对性能产生影响：如果您分页了很多暂时未访问的文档，您将在 MongoDB 系统上增加额外的负载。

# php - Restful API Zend 框架 2

> ID：13642896
> 
> 赞同：0
> 
> 时间：2012-11-30T10:02:14.460
> 
> 标签：php, zend-framework2, restful-url, zend-rest, zend-rest-route

我已经想出了如何使一个简单的资源可以通过`AbstractRestfulController`. 例子：

`localhost/products`-> 列表
`localhost/products/1`-> 特殊产品

有没有办法嵌套资源？如果是这样，你会怎么做？例子：

`localhost/products/1/photos`-> 列出产品的所有照片
`localhost/products/1/photos/3124`-> 显示产品的特殊照片

（我在这个[演示文稿](http://de.slideshare.net/Wombert/designing-http-interfaces-and-restful-web-services-zendcon-2011-20111020)中作为目标头脑）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:50:34.363

您需要添加另一条路线。例如 ：

```
'products' => array(
                        'type'    => 'Literal',
                        'options' => array(
                            'route'    => '/products',
                            'defaults' => array(
                                'controller' => 'Application\Controller\ProductsRest',
                                'action'     => null
                            )
                        ),
                        'may_terminate' => true,
                        'child_routes'  => array(
                            'photos' => array(
                                'type'    => 'Segment',
                                'options' => array(
                                    'route' => '/:productId/photos'
                                )
                            ),                                
                        )
                    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T13:59:40.067

```
'products' => array(
            'type' => 'Segment',
            'options' => array(
                'route' => '/products/:productId[/photos/:photos]',
                'constraints' => array(
                    'productId' => '[0-9]*',
                    'photos' => '[0-9]*'
                ),
                'defaults' => array(
                    'controller' => 'your contrller',
                ),
            ),
        ), 
```

# c++ - boost库的GCC vtable问题

> ID：13642904
> 
> 赞同：0
> 
> 时间：2012-11-30T10:02:40.863
> 
> 标签：c++, gcc, boost

我在编译程序时遇到问题，这是我使用的 gcc 选项

```
g++ -shared -fPIC -fvisibility -L/usr/lib/x86_64-linux-gnu/  -lboost_serialization-mt -lboost_thread-mt -lboost_date_time-mt -lboost_iostreams-mt -lboost_program_options-mt -lboost_filesystem-mt -lboost_system-mt 
```

输出

```
relocation R_X86_64_32S against `vtable for boost::detail::sp_counted_base' can not be used when making a shared object; recompile with -fPIC

could not read symbols: Bad value 
```

有谁知道为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:16:19.540

使用安装 boost 库`apt-get install libboost`

如果您在安装 libboost 时遇到任何问题，请参阅[此链接](https://askubuntu.com/questions/87306/how-to-install-libboost-1-48)以澄清问题。完成此操作后，您可以使用 -fPIC 标志重新编译 boost 以解决问题。我认为警告本身有助于识别您的问题。

# java - Solr 异常 java & solr 中的初学者

> ID：13642913
> 
> 赞同：3
> 
> 时间：2012-11-30T10:02:56.330
> 
> 标签：java, apache, solr, solrj

我是 Solr 的新手，我想在 java 中使用 solrj，但我得到了例外：

```
CommonsHttpSolrServer server = new CommonsHttpSolrServer("http://localhost:8983/solr"); 
```

例外是：

线程“主”org.apache.solr.client.solrj.SolrServerException 中的异常：java.net.ConnectException：连接被拒绝：连接

我必须做什么，我想学好 solr，但我找不到适合初学者的任何博客或书籍等，如果有人知道请写

谢谢大家...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:33:27.463

当您的 Solr 实例未运行或尝试访问错误的端口时，会发生此异常。检查端口号并重新启动 Solr 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:05:50.190

我认为您的 SOLR 服务器未启动或未在端口 8983 上侦听。

# image - 我的网站加载大量图像。我需要从服务器重新调整它的大小怎么可能？

> ID：13642914
> 
> 赞同：-2
> 
> 时间：2012-11-30T10:02:55.543
> 
> 标签：image, wordpress, load

我的网站加载大量图像。我需要从服务器重新调整它的大小怎么可能？这是网站的网址：www.thefirstdrive.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:07:13.927

1.  调整图像大小并再次上传。

或者

1.  使用 imagemagick 并通过 ssh 调整图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:33:05.757

这可能是您正在寻找的

[http://wordpress.org/extend/plugins/dynamic-image-resizer/](http://wordpress.org/extend/plugins/dynamic-image-resizer/)

# mysql - 具有多个自动增量列的 Mysql 表

> ID：13642915
> 
> 赞同：3
> 
> 时间：2012-11-30T10:03:00.117
> 
> 标签：mysql, auto-increment

我有一个具有以下结构的表：

```
 id |  number |  text
----------------------
  1 |    1    |  test 
```

其中，**id**是我的主键，具有自动递增值。我也想将数字设为自动增量值。一张表中是否可以有多个自增列？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T10:15:36.097

这是不可能的。只能有一个自增列，并且必须在 MySQL 中定义为一个键。但是您可以通过使用`trigger`详细信息来执行此链接 [CREATE TRIGGER](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T10:11:19.060

```
create trigger nameTrigger before insert on tables
for each row
begin
  DECLARE newNumber unsigned default 0;
  SELECT Max(number)+1 INTO newNumber FROM myTable WHERE id = new.id;
  UPDATE myTable SET number = newNumber WHERE id = new.id;
end 
```

# java - Memcache 实现设计

> ID：13642916
> 
> 赞同：2
> 
> 时间：2012-11-30T10:03:00.963
> 
> 标签：java, caching, memcached

我正在尝试在我的 Web 应用程序中实现 memcache，只是想获得有关我正在做的事情在设计方面是否正确的建议。

我有一个 SimpleDataAccessor 类，它运行我所有的插入、更新和选择 sql 查询。所以任何必须执行的查询都在这个类的方法中执行。

所以在我有我的选择查询实现的方法中，我有一个方法可以像这样将结果集存储在 memcache 中。

**storeinMC(resultset.getJSON(),sqlquery);**

*这里的 sqlquery 是我的关键。*

此外，在运行 selectquery 之前，我会在 memcache 中检查我是否已经有该查询的结果集。

**if((字符串 res=getRSFromMC(sqlquery)==null)**

所以我尽量保持简单明了。你看到这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:23:53.167

正如 rai.skumar 正确指出的那样，您的 SQL 语句可以以不同的方式构造（例如，WHERE 子句可以包含不同顺序的相同条件等）

因此，要克服上述问题，您需要解析 SQL 并从中获取所有相关部分。然后您可以将这些片段组合成一个缓存键。

您可以查看 SQL 解析器：[ZQL](http://zql.sourceforge.net/)、[JSqlParser](http://jsqlparser.sourceforge.net/)、[Java 通用 SQL 解析器，](http://www.sqlparser.com/sql-parser-java.php)它们会从 SQL 中返回 Java 类。

另一种选择是使用[JPA](http://www.oracle.com/technetwork/articles/javaee/jpa-137156.html)而不是直接的 JDBC。例如， [Hibernate](http://www.hibernate.org/)具有出色的 JPA 支持，并且完全能够缓存您的查询。

如果你觉得更接近 JDBC，你可以使用[MyBatis](http://code.google.com/p/mybatis/)，它具有非常类似于 JDBC 的语法和缓存支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:00:05.033

考虑以下查询：

```
 String k1 = "Select * from table";   //Query1
 String k2 = "Select * from TABLE";  // Query2 ; notice TABLE is in caps 
```

上述两个 SQL 查询是相同的，将获取相同的数据。但是，如果上述查询用作 Memchached 中的键，它们将存储在不同的位置（因为 k1.equals(k2) 将返回 false）。

此外，如果您能以某种方式确保没有拼写错误或多余的空格，那么它不会非常有效，因为键/查询可能非常大。

# c - 试图找到我可以打开的最大进程数

> ID：13642917
> 
> 赞同：0
> 
> 时间：2012-11-30T10:03:01.927
> 
> 标签：c, unix

我是 C 语言的初学者。我有这个想法来编写一个程序，该程序将找到我可以打开的最大进程数。

我拿出这段代码：

```
int main() {

while (1){
    pid_t pid = fork();
    if(pid) {
        if ( pid == -1){
            fprintf(stderr,"Can't fork,error %d\n",errno);
            exit(EXIT_FAILURE);
        }else{
            int status;
            alarm(30);
            if(waitpid(pid, &status, 0)==pid) {
                alarm(0);
                // the child process complete within 30 seconds
                printf("Waiting.");
            }else {
                alarm(0);
                // the child process does not complete within 30 seconds
                printf("killed");
                kill(pid, SIGTERM);
            }
        }
    }
    else{
        alarm(30);
        printf("child");
    }
}
} 
```

问题是这个程序导致我的笔记本电脑崩溃..：-|

我假设当程序无法打开更多进程时，我会从 fork() 中得到-1，然后退出程序。好吧，它没有发生。

任何想法？我在这里想念什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:06:51.773

如果您真的想知道可以打开多少个进程，您可以使用 sysconf 调用，查找 _SC_CHILD_MAX 变量。 [在这里检查](http://www.kernel.org/doc/man-pages/online/pages/man3/sysconf.3.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T14:48:39.813

你不能“打开”一个进程。您可以*创建*它们。

**_CHILD_MAX**是一个包含 max no 值的常量。可以创建的子进程。它在*unistd.h*头文件中定义。要查询，请使用该`sysconf`功能。将 CHILD_MAX 参数传递给`sysconf`带有*SC*前缀的参数。

```
#define _POSIX_SOURCE
#define _POSIC_C_SOURCE 199309L
#include<stdio.h>
#include<unistd.h>

int main()
{
     int res;
     if((res==sysconf(_SC_CHILD_MAX))==-1)
        perror("sysconf");
     else
        printf("\nThe max number of processes that can be created is: ", CHILD_MAX);

     return 0;
} 
```

# c++ - 非常简单的 C/C++ XML 解析器

> ID：13642920
> 
> 赞同：0
> 
> 时间：2012-11-30T10:03:08.330
> 
> 标签：c++, c, xml, linux, xml-parsing

> **可能重复：**
> [我应该在 C++ 中使用什么 XML 解析器？](https://stackoverflow.com/questions/9387610/what-xml-parser-should-i-use-in-c)

Linux 平台下一般需要从本地 XML 文件中解析应用程序设置，仅此而已。

要求： 1\. 可用于商业产品 2\. 免费 3\. 易于安装（1个头文件会很棒） 4\. 易于使用 5\. 非常稳定 6\. Unicode支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:09:29.000

我认为[外籍人士](http://expat.sourceforge.net/)会做你想做的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:52:45.267

看看 boost::property_tree [http://www.boost.org/doc/libs/1_52_0/doc/html/property_tree.html](http://www.boost.org/doc/libs/1_52_0/doc/html/property_tree.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:18:13.740

我使用[Apache 的 xerces-c](http://xerces.apache.org/xerces-c/)。它从来没有给我带来任何问题，您可以在 Google 上找到一些有用的信息，例如：[Tuto1](http://www.yolinux.com/TUTORIALS/XML-Xerces-C.html)。此外，它是免费的，您可以将其用于商业产品。

# java - 正则表达式匹配字符串模式提及

> ID：13642922
> 
> 赞同：0
> 
> 时间：2012-11-30T10:03:21.007
> 
> 标签：java, regex, string

我正在使用 java，我必须使用正则表达式检查输入字符串。我是正则表达式的新手。

我在表单中输入输入。

以下是我需要写下正则表达式的示例数据。

```
LastName  FirstName

Ab.CD           BC
Ab-CFgD         Ab.CD
F'b-CF gD       BC
F'b-CF gD.      F.b-CF gD'D
Fb-CF gD'D      BC
F.b-CF gD'D     F'b-CF gD 
```

表示它包含`dot(.), Hiphen(-), And single quotes(')`在姓氏和名字之间。

我只为“姓氏，名字”写下了regexx。

```
"[a-zA-Z]+, *[a-zA-Z]+" 
```

正则表达式用于查找上表中提到的所有字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:08:35.507

`"([a-zA-Z\\.\\-\\']*),\\s*([a-zA-Z\\.\\-\\']*)"`

使用这个网站来玩正则表达式来确定什么对你有用。

[正则表达式测试站点](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:05:55.170

尝试这个： -

```
"([a-zA-Z.'-]+),[ ]*([a-zA-Z.'-]+)" 
```

**解释 ： -**

```
(            // Capture group 1
  [          // Character class
    a-zA-Z   // alphabets
    .        // a Dot
    '        // A quote
    -        // A hyphen (Should be at the end, in the middle it means a range
  ]+         // Character class close. One or more repetition
)            // Group 1 closes 
```

如您的示例中所示，您的姓氏或名字之间似乎还有一个空格。请检查是否正确。

你有`two capture groups`上面的正则表达式。这两个组都捕获`firstname`和`lastname`。您可以同时打印它们。

一个示例在一些字符串上运行：-

```
String str1 = "Ab.CD, Ab.CD";
String str2 = "F'b-CFgD., F'b-CFgD.";
String str3 = "F'b-CF gD, F'b-CF gD";

System.out.println(str1.matches("([a-zA-Z.'-]+),[ ]*([a-zA-Z.'-]+)"));  // true
System.out.println(str2.matches("([a-zA-Z.'-]+),[ ]*([a-zA-Z.'-]+)"));  // true
System.out.println(str3.matches("([a-zA-Z.'-]+),[ ]*([a-zA-Z.'-]+)"));   //false 
```

如您所见，最后一个打印错误，因为您的第三个字符串之间有一个空格。如果您还想匹配空格，请将其添加到您的角色类中。

* * *

为了确保仅以字母开头`firstname`，`lastname`您可以像这样修改您的正则表达式：-

```
"([a-zA-Z][a-zA-Z.'-]+),[ ]*([a-zA-Z][a-zA-Z.'-]+)" 
```

在两个模式的开头添加`[a-zA-Z]`，以确保第一个字符来自给定的字母范围。

# android - 无法在 Eclipse 中创建 Android 项目

> ID：13642927
> 
> 赞同：5
> 
> 时间：2012-11-30T10:03:39.910
> 
> 标签：android, eclipse

我无法在 Eclipse 中创建新的 android 项目。每当我尝试创建一个并到达向导的最后一个屏幕并点击完成按钮时，导航器窗口中会创建一个具有相同名称的空项目（只是文件夹结构）项目，但向导不会消失。

它仍然有那个完成按钮，再次点击它没有任何反应。在导航器中创建的项目应该至少有几个文件让我开始处理它。

有什么帮助吗？

我在 ubuntu 12.04 上使用 eclipse indigo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:27:46.123

尝试使用以下建议，我不确定，但可能会对您有所帮助。

1)**`Just go with default launcher image (blue smiley) instead of customizing it and it should work.`**

2）如果你已经安装了支持库>8 仍然得到错误消息

```
-->Delete the support library from the SDK manager
-->Create a new project & install the support library by clicking on "Install / Upgrade" 
```

另[请查看此答案](https://stackoverflow.com/questions/11262471/install-dependencies-not-resolved-in-adt-r20/11262706#11262706)以获取更多信息。

希望它会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:09:03.263

Fwiw，我遇到了这个问题，我最终重新安装了 eclipse 和 sdk，但我没有单独安装它们，而是安装了 bundle：http: [//developer.android.com/sdk/installing/bundle.html](http://developer.android.com/sdk/installing/bundle.html) 我没有得到这个问题了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:35:34.847

这可能是由于不正确的安装而发生的..您能否指定消息/错误，当您单击项目创建完成时显示的内容..？否则尝试在其他位置再次安装eclipse.. [安装步骤-单击此处](http://blog.markloiseau.com/2011/06/how-to-install-the-android-sdk-and-eclipse-in-ubuntu/)

# web-services - 打印 Web 服务响应

> ID：13642929
> 
> 赞同：1
> 
> 时间：2012-11-30T10:03:41.897
> 
> 标签：web-services

我正在尝试调用网络服务并打印一些响应。

当我运行此代码时，我得到带有 ID、FIRSTNAME、LASTNAME、STREET、CITY 的 XML 响应。例如，我怎样才能只打印出 CITY？

```
static int customerId = 123456;
    public static void main(String[] args) throws Exception {

        URL oracle = new URL(
                "http://www.thomas-bayer.com/sqlrest/CUSTOMER/" + customerId);
        BufferedReader in = new BufferedReader(new InputStreamReader(
                oracle.openStream()));

        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();

    } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:24:50.940

这可能是一个调整代码，但仍然可以。

```
static int customerId = 123456; 

static String str="";

public static void main(String[] args) throws Exception 
{

    URL oracle        = new URL("http://www.thomas-bayer.com/sqlrest/CUSTOMER/" + customerId);
    BufferedReader in = new BufferedReader(new InputStreamReader(
            oracle.openStream()));

    String inputLine;

    while ((inputLine = in.readLine()) != null){
            System.out.println(inputLine);
        //code change stats here
            if(inputLine.contains("<CITY>")){
                str=inputLine;
            }
        }
        String city=str.replace("<CITY>","");
       System.out.println(city.replace("</CITY>", ""));
       //code change ends here
    in.close();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:36:03.137

### 这应该是最好的一个：

通过传递键和字符串在 while 循环中调用此方法：

```
public static String getvalue(String xmlkey,String xmlstring) throws
 ParserConfigurationException, SAXException, IOException{

    System.out.println(xmlstring+"dff");
    InputStream is = new ByteArrayInputStream(xmlstring.getBytes());
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db;
    try {
        db = dbf.newDocumentBuilder();
        org.w3c.dom.Document doc = null;
        doc = db.parse(is);
        NodeList nl = doc.getElementsByTagName(xmlkey);
        if (nl != null) {
            for (int i = 0; i < nl.getLength(); i++) {
                Node item = nl.item(i);
                String name = item.getNodeName();
                String value = item.getTextContent();
                System.out.println(name+" "+value+" value and name");
            }
        }
        return value;
    } catch(Exception e) {
        e.printStackTrace();
    }

} 
```

# asp.net - Web 服务错误，“无法加载文件或程序集 'CrystalDecisions.CrystalReports.Engine'

> ID：13642931
> 
> 赞同：1
> 
> 时间：2012-11-30T10:03:46.607
> 
> 标签：asp.net, web-services, visual-studio-2008, crystal-reports

我似乎无法在网上找到任何类似的主题，所以对于这个看似基本的问题表示歉意......

我愚蠢地将水晶报告添加到生产 Visual Studio 解决方案文件内的测试项目中的测试表单中。我做了我的测试，并**从项目中删除了水晶报告**。

部分解决方案是一个网络服务，在我发布新版本之前它运行良好（因为我添加和删除了水晶报告）。现在它在实时环境中出错：

```
 Could not load file or assembly 'CrystalDecisions.CrystalReports.Engine' 
```

解决方案中根本没有提及水晶报告（我可以找到）。

Webservice 项目的参考资料（包含在全球解决方案中）： ![Web 服务参考](../Images/b2f082ff3dfdbc223439ca850e78ee8d.png)

为了减少问题的大小，我不会发布 web.config 文件，但如果您需要，请告诉我。

到底是怎么回事？为什么我的网络服务需要我的网络服务器上的水晶报告，而它与这个项目完全无关！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:53:51.730

事实证明，我在我的主要网站项目中错过了一些对水晶报告的引用。并不是说我期望这会影响我的网络服务（在同一个解决方案中完全独立的项目），但它显然做到了。

谜团已揭开。

**编辑：**

冒着听起来很愚蠢的风险，我觉得值得注意的是，我的 web 服务托管在托管主站点的 IIS 虚拟目录中的子目录中。在加载任何子站点/服务期间，IIS 显然会从父目录加载 web.config 文件。这对我来说是一个新发现。

# jquery - jQuery 可拖动占位符问题

> ID：13642932
> 
> 赞同：0
> 
> 时间：2012-11-30T10:03:49.167
> 
> 标签：jquery, draggable, jquery-ui-sortable

我有以下简单的代码：

[http://jsfiddle.net/QUBCq/](http://jsfiddle.net/QUBCq/)

您可以看到我有 3 个可以放置项目的空间，并且可以将 6 个项目中的任何一个放置到这三个空间中。

**第一个问题**-我将一个项目放在一个空格中-如果我将其删除，`space`则更改为`Dropped!`，然后我希望将其恢复为`Drop here`.

**第二个问题**- 如果这是表单的一部分，我将如何将三个空格中的每一个中的项目位置绑定到 .PHP 表单以保存到数据库中。

**第三个问题**- 你能阻止超过 1 个项目被放入一个`space`? 如果是这样，怎么做？

抱歉，我知道这是基本的东西，但我是 jQuery 的新手。

注意：我使用它来允许用户选择他们的`Top 3 items`.

干杯，

H。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:02:17.477

您好您第一个问题的答案如下

```
 $( "#droppable1" ).on( "dropout", function( event, ui ) {
                 $( "#droppable1" ).removeClass("ui-state-highlight").find( "p" )
                        .html( "Drop Here" );
   }); 
```

对于第三个问题，您可以参考这个 SO thread [jquery droppable -> Avoid multiple drops of the same object](https://stackoverflow.com/questions/9279380/jquery-droppable-avoid-multiple-drops-of-the-same-object)

希望这可以帮助。

# php - 在 php 中编写 linux 守护程序并使用 hiphop 编译以进行混淆时要考虑什么

> ID：13642933
> 
> 赞同：2
> 
> 时间：2012-11-30T10:03:49.680
> 
> 标签：php, linux, daemon, hiphop

我们想用 php 编写一个 Linux 服务并用 HIPHOP 编译它。由于我们使用 php 开始项目，我们可以在内部完成所有编程，而不是聘请 c++ 程序员等。我们很乐意坚持使用 php。执行速度与我们无关（如此），因为守护进程只是进行一些监控，但我们想关闭代码以对其进行混淆。守护进程将进行一些网络通信并记录到数据库。这是一条可行的路线吗？在另一篇文章中，有人描述了 hiphop 在编程中需要特别注意，因为并非所有 php 功能都已实现。现在还是这样吗？我很想在这里谈谈您对我们想法的总体看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:33:22.357

HIPHOP 是一个非常难以处理的野兽。它非常有限，因此具体取决于您的应用程序及其部署位置。请记住，目前它只能在 64 位架构上运行......所以如果你想在 32 位机器上部署，你会立即陷入困境。

根据应用程序的性质，您可能必须为不同的 linux 发行版构建许多不同的二进制文件。由于 HipHop 仅在 Fedora 和 CentOS 上运行良好，因此您严重限制了您的范围。一旦你离开 PHP 解释器，你就会失去操作系统之间的大量互换性（想想看：Windows、几乎所有的 Linux、所有主要的 BSD 发行版……）

还要记住，我不确定你想在多大程度上“混淆”你的代码。如果你想进行网络调用等并隐藏它们，数据包嗅探器可以非常轻松地准确地看到你与外部世界的通信方式。

同样，调试器和经验丰富的程序员将能够对二进制文件进行逆向工程，其程度可能超出您的想象。

您可能想研究诸如 Zend Encoder 或 IonCube Encoder 之类的替代方案，这将是解决问题的首选方法，但这些都是非自由选项。您可能还想研究其他编码器。

除了“监控”之外，我不确定你在做什么，所以我不能肯定地说。但是第二个选择是简单地严格限制正在客户端机器上运行的代码量（假设它们正在向服务器机器报告）并让假设在您完全控制的服务器机器处理更多处理，如果任何可能的方式。

我邀请您自己通过测试来简单地探索这个想法，因为它再次非常依赖于您的应用程序的性质以及您打算将其部署在哪里。（对于许多人来说，诸如“在哪里部署”之类的东西可能会迅速改变）。HipHop 的创建范围非常狭窄：尽可能快地运行 PHP 代码。它的设计不是为了在操作系统和 CPU 架构之间高度灵活或高度互换。请在编写依赖它的大型应用程序之前考虑这一点，并确保您完全理解使用 HipHop 的每一个含义。测试，测试，测试。

# c# - 如何在 WinRT 中使用 SharpDX 同时播放多个声音？

> ID：13642944
> 
> 赞同：1
> 
> 时间：2012-11-30T10:04:13.817
> 
> 标签：c#, windows-8, windows-runtime, sharpdx, xaudio2

我正在尝试制作乐器类型的应用程序。我遇到的问题是只有在旧声音完成后才会播放新声音。我希望能够同时播放它们。

这就是我的代码的样子：

首先，MyWave 类只保存一个音频缓冲区和一些其他信息：

```
class MyWave
{
    public AudioBuffer Buffer { get; set; }
    public uint[] DecodedPacketsInfo { get; set; }
    public WaveFormat WaveFormat { get; set; }
} 
```

在 SoundPlayer 类中：

```
 private XAudio2 xaudio;
    private MasteringVoice mvoice;
    Dictionary<string, MyWave> sounds;

    // Constructor
    public SoundPlayer()
    {
        xaudio = new XAudio2();
        xaudio.StartEngine();
        mvoice = new MasteringVoice(xaudio);
        sounds = new Dictionary<string, MyWave>();
    }

    // Reads a sound and puts it in the dictionary
    public void AddWave(string key, string filepath)
    {
        MyWave wave = new MyWave();

        var nativeFileStream = new NativeFileStream(filepath, NativeFileMode.Open, NativeFileAccess.Read, NativeFileShare.Read);
        var soundStream = new SoundStream(nativeFileStream);
        var buffer = new AudioBuffer() { Stream = soundStream, AudioBytes = (int)soundStream.Length, Flags = BufferFlags.EndOfStream };

        wave.Buffer = buffer;
        wave.DecodedPacketsInfo = soundStream.DecodedPacketsInfo;
        wave.WaveFormat = soundStream.Format;

        this.sounds.Add(key, wave);
    }

    // Plays the sound
    public void Play(string key)
    {
        if (!this.sounds.ContainsKey(key)) return;
        MyWave w = this.sounds[key];

        var sourceVoice = new SourceVoice(this.xaudio, w.WaveFormat);
        sourceVoice.SubmitSourceBuffer(w.Buffer, w.DecodedPacketsInfo);
        sourceVoice.Start();
    }
} 
```

谷歌不是很有帮助，我找不到任何有用的东西。那么如何同时播放多个声音呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:55:17.557

您必须创建（最好是池）多个 SourceVoice 实例并同时播放它们。

实际上，您当前的代码应该可以工作，不是吗？您可能希望将 StreamEnd 事件侦听器添加到 SourceVoice 以在播放完成后自行处理，并记住在调用 SourceVoice 的构造函数时启用回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-29T14:13:24.537

只需将 mciSendString 与打开和播放命令一起使用。此示例在启动时一起播放 note1.wav 和 note2.wav。

```
[System.Runtime.InteropServices.DllImport("winmm.dll")]
static extern Int32 mciSendString(string command,                                             
                                  StringBuilder buffer, 
                                  int bufferSize, 
                                  IntPtr hwndCallback);

        public frmGame()
        {
            InitializeComponent();
            DoubleBuffered = true;            
            mciSendString("open note1.wav type waveaudio  alias s1", null, 0, IntPtr.Zero);
            mciSendString("play s1", null, 0, IntPtr.Zero);
            mciSendString("open note2.wav type waveaudio  alias s2", null, 0, IntPtr.Zero);
            mciSendString("play s2", null, 0, IntPtr.Zero);
        } 
```

# maven - java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.XmlReaderContext.getResourceLoader()Lorg/springframework/core/io/ResourceLoader

> ID：13642947
> 
> 赞同：10
> 
> 时间：2012-11-30T10:04:20.843
> 
> 标签：maven, tomcat7, pom.xml, spring-3, xml-configuration

我正在 Tomcat7、JDK1.7、Maven 和其他组件上开发 Spring 应用程序。最近，我对应用程序进行了重大更改，需要切换到 Spring 3。更改后，我在部署到开发服务器时看到以下异常。该应用程序在我的本地系统上运行完美。

```
javax.servlet.ServletException: Servlet.init() for servlet amadeusAce threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)
root cause

org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/amadeusAce-servlet.xml]; nested exception is java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.XmlReaderContext.getResourceLoader()Lorg/springframework/core/io/ResourceLoader;
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:375)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:303)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:280)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:131)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:147)
    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:100)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:298)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:311)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:258)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:229)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:115)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)
root cause

java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.XmlReaderContext.getResourceLoader()Lorg/springframework/core/io/ResourceLoader;
    org.springframework.context.annotation.ComponentScanBeanDefinitionParser.configureScanner(ComponentScanBeanDefinitionParser.java:100)
    org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:83)
    org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:69)
    org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1114)
    org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1104)
    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:133)
    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:90)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:458)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:353)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:303)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:280)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:131)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:147)
    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:100)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:298)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:311)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:258)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:229)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:115)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722) 
```

我认为上述 xml 也没有任何问题，`amadeusAce-servlet.xml`因为自上次部署以来文件没有任何变化。

POM.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.ace.amadeus</groupId>
    <artifactId>AmadeusSpring</artifactId>
    <version>1.0.0</version>
    <packaging>war</packaging>
    <name>Simple CXF project using spring configuration</name>
    <repositories>
        <repository>
            <id>JBoss repository</id>
            <url>https://repository.jboss.org/nexus/content/repositories/deprecated/</url>
        </repository>
        <repository>
            <id>maven2-repository.dev.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/2/</url>
            <layout>default</layout>
        </repository>
        <repository>
            <id>java.net2</id>
            <name>Java.net</name>
            <url>https://oss.sonatype.org/content/repositories/java.net2</url>
        </repository>
    </repositories>
    <dependencies>
        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.2</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>javax.ws.rs</groupId>
            <artifactId>jsr311-api</artifactId>
            <version>0.2</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxws</artifactId>
            <version>2.1.3</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
            <version>2.1.3</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-ibatis</artifactId>
            <version>2.0.8</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.0.5.RELEASE</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springmodules</groupId>
            <artifactId>spring-modules-validation</artifactId>
            <version>0.8a</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.0.7</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.4</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.1.2</version>
        </dependency>
        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>20030825.184428</version>
        </dependency>
        <dependency>
            <groupId>commons-pool</groupId>
            <artifactId>commons-pool</artifactId>
            <version>20030825.183949</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ibatis</groupId>
            <artifactId>ibatis-sqlmap</artifactId>
            <version>2.3.4.726</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.6</version>
        </dependency>
        <dependency>
            <groupId>uk.com.robust-it</groupId>
            <artifactId>cloning</artifactId>
            <version>1.8.2</version>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.4</version>
        </dependency>
        <dependency>
            <groupId>sax</groupId>
            <artifactId>sax</artifactId>
            <version>2.0.1</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

您可以从上述资源中看到什么？我非常希望收到您的来信。谢谢你。

**编辑：**
正如下面帖子中所建议的，我找到了解决依赖关系的类路径。结果如下：

```
file:/D:/ace-amadeus-ws/AmadeusSpring/target/classes/
file:/C:/Users/pc/.m2/repository/org/apache/httpcomponents/httpclient/4.2.2/httpclient-4.2.2.jar
file:/C:/Users/pc/.m2/repository/org/apache/httpcomponents/httpcore/4.2.2/httpcore-4.2.2.jar
file:/C:/Users/pc/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar
file:/C:/Users/pc/.m2/repository/commons-codec/commons-codec/1.6/commons-codec-1.6.jar
file:/C:/Users/pc/.m2/repository/javax/ws/rs/jsr311-api/0.2/jsr311-api-0.2.jar
file:/C:/Users/pc/.m2/repository/com/sun/jersey/jersey-server/1.8/jersey-server-1.8.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-rt-frontend-jaxws/2.1.3/cxf-rt-frontend-jaxws-2.1.3.jar
file:/C:/Users/pc/.m2/repository/org/apache/geronimo/specs/geronimo-jaxws_2.1_spec/1.0/geronimo-jaxws_2.1_spec-1.0.jar
file:/C:/Users/pc/.m2/repository/org/apache/geronimo/specs/geronimo-activation_1.1_spec/1.0.2/geronimo-activation_1.1_spec-1.0.2.jar
file:/C:/Users/pc/.m2/repository/asm/asm/2.2.3/asm-2.2.3.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-api/2.1.3/cxf-api-2.1.3.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-common-utilities/2.1.3/cxf-common-utilities-2.1.3.jar
file:/C:/Users/pc/.m2/repository/org/apache/geronimo/specs/geronimo-stax-api_1.0_spec/1.0.1/geronimo-stax-api_1.0_spec-1.0.1.jar
file:/C:/Users/pc/.m2/repository/wsdl4j/wsdl4j/1.6.2/wsdl4j-1.6.2.jar
file:/C:/Users/pc/.m2/repository/xml-resolver/xml-resolver/1.2/xml-resolver-1.2.jar
file:/C:/Users/pc/.m2/repository/org/apache/ws/commons/schema/XmlSchema/1.4.2/XmlSchema-1.4.2.jar
file:/C:/Users/pc/.m2/repository/org/apache/geronimo/specs/geronimo-annotation_1.0_spec/1.1.1/geronimo-annotation_1.0_spec-1.1.1.jar
file:/C:/Users/pc/.m2/repository/org/codehaus/woodstox/wstx-asl/3.2.6/wstx-asl-3.2.6.jar
file:/C:/Users/pc/.m2/repository/org/apache/neethi/neethi/2.0.4/neethi-2.0.4.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-common-schemas/2.1.3/cxf-common-schemas-2.1.3.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-rt-core/2.1.3/cxf-rt-core-2.1.3.jar
file:/C:/Users/pc/.m2/repository/com/sun/xml/bind/jaxb-impl/2.1.7/jaxb-impl-2.1.7.jar
file:/C:/Users/pc/.m2/repository/org/apache/geronimo/specs/geronimo-javamail_1.4_spec/1.3/geronimo-javamail_1.4_spec-1.3.jar
file:/C:/Users/pc/.m2/repository/com/sun/xml/fastinfoset/FastInfoset/1.2.2/FastInfoset-1.2.2.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-rt-bindings-soap/2.1.3/cxf-rt-bindings-soap-2.1.3.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-tools-common/2.1.3/cxf-tools-common-2.1.3.jar
file:/C:/Users/pc/.m2/repository/org/apache/velocity/velocity/1.5/velocity-1.5.jar
file:/C:/Users/pc/.m2/repository/com/sun/xml/bind/jaxb-xjc/2.1.7/jaxb-xjc-2.1.7.jar
file:/C:/Users/pc/.m2/repository/org/apache/geronimo/specs/geronimo-ws-metadata_2.0_spec/1.1.2/geronimo-ws-metadata_2.0_spec-1.1.2.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-rt-databinding-jaxb/2.1.3/cxf-rt-databinding-jaxb-2.1.3.jar
file:/C:/Users/pc/.m2/repository/javax/xml/bind/jaxb-api/2.1/jaxb-api-2.1.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-rt-bindings-xml/2.1.3/cxf-rt-bindings-xml-2.1.3.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-rt-frontend-simple/2.1.3/cxf-rt-frontend-simple-2.1.3.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-rt-ws-addr/2.1.3/cxf-rt-ws-addr-2.1.3.jar
file:/C:/Users/pc/.m2/repository/javax/xml/soap/saaj-api/1.3/saaj-api-1.3.jar
file:/C:/Users/pc/.m2/repository/com/sun/xml/messaging/saaj/saaj-impl/1.3.2/saaj-impl-1.3.2.jar
file:/C:/Users/pc/.m2/repository/org/apache/cxf/cxf-rt-transports-http/2.1.3/cxf-rt-transports-http-2.1.3.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-beans/3.0.5.RELEASE/spring-beans-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-context/3.0.5.RELEASE/spring-context-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-core/3.0.5.RELEASE/spring-core-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-webmvc/3.0.5.RELEASE/spring-webmvc-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-asm/3.0.5.RELEASE/spring-asm-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-context-support/3.0.5.RELEASE/spring-context-support-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-expression/3.0.5.RELEASE/spring-expression-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-ibatis/2.0.8/spring-ibatis-2.0.8.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-dao/2.0.8/spring-dao-2.0.8.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-jdbc/2.0.8/spring-jdbc-2.0.8.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-aop/3.0.5.RELEASE/spring-aop-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring-aspects/3.0.5.RELEASE/spring-aspects-3.0.5.RELEASE.jar
file:/C:/Users/pc/.m2/repository/org/springmodules/spring-modules-validation/0.8a/spring-modules-validation-0.8a.jar
file:/C:/Users/pc/.m2/repository/commons-lang/commons-lang/2.2/commons-lang-2.2.jar
file:/C:/Users/pc/.m2/repository/commons-collections/commons-collections/3.1/commons-collections-3.1.jar
file:/C:/Users/pc/.m2/repository/commons-validator/commons-validator/1.3.0/commons-validator-1.3.0.jar
file:/C:/Users/pc/.m2/repository/oro/oro/2.0.8/oro-2.0.8.jar
file:/C:/Users/pc/.m2/repository/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar
file:/C:/Users/pc/.m2/repository/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar
file:/C:/Users/pc/.m2/repository/commons-digester/commons-digester/1.7/commons-digester-1.7.jar
file:/C:/Users/pc/.m2/repository/antlr/antlr/2.7.6/antlr-2.7.6.jar
file:/C:/Users/pc/.m2/repository/org/springframework/spring/2.0.3/spring-2.0.3.jar
file:/C:/Users/pc/.m2/repository/rhino/js/1.6R2/js-1.6R2.jar
file:/C:/Users/pc/.m2/repository/org/apache/tiles/tiles-jsp/2.0.7/tiles-jsp-2.0.7.jar
file:/C:/Users/pc/.m2/repository/org/apache/tiles/tiles-core/2.0.7/tiles-core-2.0.7.jar
file:/C:/Users/pc/.m2/repository/org/apache/tiles/tiles-api/2.0.7/tiles-api-2.0.7.jar
file:/C:/Users/pc/.m2/repository/commons-logging/commons-logging-api/1.1/commons-logging-api-1.1.jar
file:/C:/Users/pc/.m2/repository/javax/servlet/servlet-api/2.4/servlet-api-2.4.jar
file:/C:/Users/pc/.m2/repository/javax/servlet/jstl/1.1.2/jstl-1.1.2.jar
file:/C:/Users/pc/.m2/repository/taglibs/standard/1.1.2/standard-1.1.2.jar
file:/C:/Users/pc/.m2/repository/commons-dbcp/commons-dbcp/20030825.184428/commons-dbcp-20030825.184428.jar
file:/C:/Users/pc/.m2/repository/commons-pool/commons-pool/20030825.183949/commons-pool-20030825.183949.jar
file:/C:/Users/pc/.m2/repository/org/apache/ibatis/ibatis-sqlmap/2.3.4.726/ibatis-sqlmap-2.3.4.726.jar
file:/C:/Users/pc/.m2/repository/mysql/mysql-connector-java/5.1.6/mysql-connector-java-5.1.6.jar
file:/C:/Users/pc/.m2/repository/uk/com/robust-it/cloning/1.8.2/cloning-1.8.2.jar
file:/C:/Users/pc/.m2/repository/org/objenesis/objenesis/1.2/objenesis-1.2.jar
file:/C:/Users/pc/.m2/repository/commons-io/commons-io/2.4/commons-io-2.4.jar
file:/C:/Users/pc/.m2/repository/sax/sax/2.0.1/sax-2.0.1.jar 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T10:13:21.063

`java.lang.NoSuchMethodError`如果加载的 jar 出现问题，则会发生。我认为在您尝试运行此代码的系统上，已将**CLASSPATH**设置为某个路径，即`loading the older version of the jar`. 使用以下代码找出 ClassLoader 解析依赖项的路径

```
public static void main(String[] args) {
            URLClassLoader classLoader = (URLClassLoader)Main.class.getClassLoader();
            System.out.println(Arrays.toString(classLoader.getURLs()));
    } 
```

将此方法放在 Main 类中并在出现此错误的系统中执行它。它将向您显示解决依赖关系的所有路径。找出是否有任何路径具有旧版本的 jar。

希望这对您的事业有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-03T19:09:42.733

我遇到了同样的问题，在尝试通过 MyEclipse IDE 运行我的工作时遇到了以下异常。 *引起：java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.getEnvironment()Lorg/springframework/core/env/Enviroment；*

从 Java Build 路径中删除默认 Spring2 jar 后，它工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-21T18:36:25.573

我也有同样的问题。问题是**org.apache.cxf的**版本定义为2.2.3。因为甚至**org.springframework的**版本定义为4.0.0.RELEASE maven下载了org.springframework的2.x版本。因此我得到了同样的错误。改变后org.apache.cxf 版本到**2.7.x**并从.m2 中删除所有 sping2.x 错误消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-30T15:53:07.073

为我解决错误的是在我的项目中的每个 spring xml 中添加 spring-beans 的版本。例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd">

    <!-- spring stuff here -->
</beans> 
```

代替

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
    <!-- spring stuff here -->
</beans> 
```

# java - 在arraylist中搜索name并显示所有

> ID：13642948
> 
> 赞同：1
> 
> 时间：2012-11-30T10:04:20.623
> 
> 标签：java, arraylist

有没有办法搜索某个名称并将其显示为 arraylist？（比如从 hashmap 中获取密钥）

列表格式为

名称：得分-年龄

```
{A: 100 - 15, A: 200 - 16, B: 75 -11} 
```

而我想要做的是，只获取 A 的数据并显示它。

```
List<Score> scores = new ArrayList<>();
scores.add(new Score("A", 100, 15));
scores.add(new Score("A", 200, 16));
scores.add(new Score("B", 75, 11)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:09:23.513

我认为`ArrayList`你需要遍历你的列表并找到相应的`score element`并显示它。

```
List<Score> scores = new ArrayList<>();    
for(Score score : scores) {
    if (score.getName().equals("A")) {
       ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:09:28.157

循环遍历您的列表，我希望您在 Score 类中为您的属性提供一个吸气剂。调用 getName() 并检查名称是否等于输入名称。

```
List<Score> scores = new ArrayList<>();    
for(Score s: scores){
if("yourinputstr".equals(s.getName())){
System.out.println(s);//you'd have to override toString in your score class to show name, age and score 
}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:11:10.997

假设您的 Score 课程是

```
public class Score
{
   public String str1;
   public int num1;
   public int num2;
} 
```

那么你可以这样做

```
for(Score scr : scores)
{
   if(scr.str1.equals("A")) 
   {
       //do some job
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T10:13:05.600

简单地说，您可以这样做：如果在您的 Score 课程中有任何返回学生姓名的函数，那么

```
List<Score> scores = new ArrayList<>();    
for(Score score: scores){
   if(scores .getName().equals("A")){
     System.out.println(score.getName() +score.getScore() + "-" + score.getAge());
    }
} 
```

# c# - 使用 C# 在 asp.net 中的 Viewstate 中没有获得价值？

> ID：13642953
> 
> 赞同：4
> 
> 时间：2012-11-30T10:04:42.503
> 
> 标签：c#, asp.net, viewstate, asyncfileupload

我正在使用 asyncfileupload 控件上传文件，我正在以这样的视图状态获取路径：

```
protected void ProcessUpload(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    string name = System.IO.Path.GetFileName(e.FileName); 
    string dir = Server.MapPath("upload_eng/");
    string path = Path.Combine(dir, name);
    ViewState["path"] = path;
    engcertfupld.SaveAs(path);
} 
```

现在，当我尝试在 buttonclick 事件中保存该路径时，我没有获得 viewstate 的值：

```
protected void btnUpdate_Click(object sender, EventArgs e)
{
   string filepath = ViewState["path"].ToString(); // GETTING NULL in filepath
} 
```

在这个文件路径中，我得到了 null 实际上我得到了错误`NULL REFERENCE EXCEPTION`

我现在能做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:31:44.710

将 Path 值放入**[Session](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)**对象而不是 ViewState 中，如下所示：

```
protected void ProcessUpload(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{

    ....
    string path = Path.Combine(dir, name);
    Session["path"] = path;
} 
```

然后在按钮点击：

```
protected void btnUpdate_Click(object sender, EventArgs e)
{
  if (Session["path"] != null)
  {
     string filepath = (string) Session["path"];
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:26:27.520

我猜上传过程不是“真正的”回发，所以 ViewState 不会在客户端刷新，也不会包含单击 btnUpdate_Click 时的路径

您应该做的是使用 OnClientUploadComplete 客户端事件来检索上传的文件名，并将其存储在将在 btnUpdate_Click 上发布在服务器上的 HiddenField 中。

这是一个完整的示例，其中上传的文件名用于显示上传的图像而无需回发：

[http://www.aspsnippets.com/Articles/Display-image-after-upload-without-page-refresh-or-postback-using-ASP.Net-AsyncFileUpload-Control.aspx](http://www.aspsnippets.com/Articles/Display-image-after-upload-without-page-refresh-or-postback-using-ASP.Net-AsyncFileUpload-Control.aspx)

# python - python sqlite3模块中的提交行为和原子性

> ID：13642956
> 
> 赞同：8
> 
> 时间：2012-11-30T10:04:51.693
> 
> 标签：python, sqlite, commit, atomic

如果我想创建一个表并在另一个表中插入一个新条目，可以在 sqlite 模块中将其设为原子吗？

[参考http://docs.python.org/2/library/sqlite3.html](http://docs.python.org/2/library/sqlite3.html)上的文档：

> 默认情况下，sqlite3 模块在数据修改语言 (DML) 语句（即 INSERT/UPDATE/DELETE/REPLACE）之前隐式打开事务，并在非 DML、非查询语句（即除了 SELECT 或之前所提）。
> 
> 因此，如果您在事务中并发出诸如 CREATE TABLE ...、VACUUM、PRAGMA 之类的命令，则 sqlite3 模块将在执行该命令之前隐式提交。这样做有两个原因。首先是其中一些命令在事务中不起作用。另一个原因是 sqlite3 需要跟踪事务状态（如果事务处于活动状态）。

我不确定这第二段是否适用于自动启动的事务或手动和自动事务。

Sqlite 文档[http://www.sqlite.org/lang_transaction.html](http://www.sqlite.org/lang_transaction.html)告诉我们，手动事务在明确提交之前不会提交：

> 可以使用 BEGIN 命令手动启动事务。此类事务通常持续到下一个 COMMIT 或 ROLLBACK 命令。

所以假设我们有这样的事情：

```
con = sqlite3.connect(fdb) 
cur = con.cursor()

sql = 'begin transaciton'
cur.execute(sql)    

sql = 'CREATE TABLE some-table ...
cur.execute(sql)

# *** is there an implicit commit at this point ?! ***

sql = 'INSERT INTO  another-table ...
cur.execute(sql)

con.commit() 
```

这会是原子的，还是 python sqlite 在`create table`语句之后进行提交？有没有办法让它成为原子的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:20:03.810

您不能以原子方式执行此操作。`COMMIT`每当您执行语句时， Python SQLite 库都会隐式发出 a `CREATE TABLE ..`，因为 SQLite 不*支持*`CREATE TABLE ..`在事务处于活动状态时执行该语句。

您可以通过在 python 解释器和`sqlite3`命令行工具中打开数据库来测试它。发出`CREATE TABLE ..`语句后，您可以`.schema`在`sqlite3`命令行工具中运行命令并查看该语句的结果。

请注意，这意味着您在语句*之前*在事务中所做的任何事情`CREATE TABLE ..`也将被提交。换一种方式来看，`CREATE TABLE ..`语句首先提交，然后开始一个*全新*的事务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T12:04:34.590

Python SQLite3 库即使在不需要的地方也会插入自动提交。

要使您的整个事务原子化，请使用任何其他 Python SQLite 包装器，例如[APSW](http://code.google.com/p/apsw/)。

# api - 使用 Firebird API 创建数据库失败

> ID：13642957
> 
> 赞同：0
> 
> 时间：2012-11-30T10:04:52.263
> 
> 标签：api, firebird2.5

这是我的源代码示例，灵感来自 Firebird 安装目录 (C:\Program Files\Firebird\Firebird_2_5\examples) 中的代码示例：

```
AnsiString db_path = MainForm->exeFilePath + "\\results.fdb"; // C:\Projects\DBX\bin\results.fdb
if (FileExists(db_path))
{
    return;
}

HMODULE dll = LoadLibrary(L"fbclient.dll");
if (dll == NULL)
{
    throw Exception(L"Failed to load Firebird client library FBCLIENT.DLL!\r\nApplication will exit now.");
}

Pisc_dsql_execute_immediate pisc_dsql_execute_immediate = (Pisc_dsql_execute_immediate)GetProcAddress(dll, "isc_dsql_execute_immediate");
if (pisc_dsql_execute_immediate == NULL)
{
    throw Exception(L"Failed to load 'isc_dsql_execute_immediate' entry point in FBCLIENT.DLL. It seems like Firebird installation is corrupted. "
    "Contact system administrator.\r\nApplication will exit now.");
}

Pisc_commit_transaction pisc_commit_transaction = (Pisc_commit_transaction)GetProcAddress(dll, "isc_commit_transaction");
if (pisc_commit_transaction == NULL)
{
    throw Exception(L"Failed to load 'isc_commit_transaction' entry point in FBCLIENT.DLL. It seems like Firebird installation is corrupted. "
    "Contact system administrator.\r\nApplication will exit now.");
}

Pisc_detach_database pisc_detach_database = (Pisc_detach_database)GetProcAddress(dll, "isc_detach_database");
if (pisc_detach_database == NULL)
{
    throw Exception(L"Failed to load 'isc_detach_database' entry point in FBCLIENT.DLL. It seems like Firebird installation is corrupted. "
    "Contact system administrator.\r\nApplication will exit now.");
}

Pisc_sqlcode pisc_sqlcode = (Pisc_sqlcode)GetProcAddress(dll, "isc_sqlcode");
if (pisc_sqlcode == NULL)
{
    throw Exception(L"Failed to load 'isc_sqlcode' entry point in FBCLIENT.DLL. It seems like Firebird installation is corrupted. "
    "Contact system administrator.\r\nApplication will exit now.");
}

ISC_STATUS_ARRAY status;               /* status vector */
isc_db_handle   newdb = NULL;          /* database handle */
isc_tr_handle   trans = NULL;          /* transaction handle */
AnsiString create_db;
create_db.printf("CREATE DATABASE '%s'", db_path.c_str());
long sqlcode;
UnicodeString msg;

if (pisc_dsql_execute_immediate(status, &newdb, &trans, 0, create_db.c_str(), 1, NULL))
{
    // ERROR OCCURRES HERE
    sqlcode = pisc_sqlcode(status);
    msg.printf(L"Operation 'CREATE DATABASE' failed with sqlcode %ld.\r\nApplication will exit now.", sqlcode);
    throw Exception(msg.c_str());
}

pisc_commit_transaction(status, &trans);
pisc_detach_database(status, &newdb);

FreeLibrary(dll);
dll = NULL; 
```

数据库创建失败，sql 代码为 -902。目录“C:\Projects\DBX\bin\”存在且不包含名为“results.fdb”的文件。错误行为的原因是什么，我该如何避免？Firebird API是否有详细描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:37:22.200

我忘记的是用户凭据。请参阅更新的代码示例（摘录）：

```
ISC_STATUS_ARRAY status;               /* status vector */
isc_db_handle   newdb = NULL;          /* database handle */
isc_tr_handle   trans = NULL;          /* transaction handle */
AnsiString create_db;
create_db.printf("CREATE DATABASE '%s' USER '%S' PASSWORD '%S'", db_path.c_str(), MainForm->currentUser.name, MainForm->currentUser.password);
long sqlcode;
UnicodeString msg;

if (pisc_dsql_execute_immediate(status, &newdb, &trans, 0, create_db.c_str(), 1, NULL))
{
    sqlcode = pisc_sqlcode(status);
    msg.printf(L"Operation 'CREATE DATABASE' failed with sqlcode %ld.\r\nApplication will exit now.", sqlcode);
    throw Exception(msg.c_str());
} 
```

# p2 - 修剪 p2 存储库中的旧版本

> ID：13642958
> 
> 赞同：2
> 
> 时间：2012-11-30T10:04:53.683
> 
> 标签：p2, b3

我们有一个内部框架，我们通过 p2 存储库发布给下游开发人员。我们目前使用 Tycho 构建 p2 存储库，并将`mirror`目标添加到旧存储库中`tycho-p2-repository-plugin`。这很好用。

我们希望在存储库中保留大量“旧”版本的功能和插件，以避免使开发人员使用的目标平台失效，但我们也希望避免存储库无理增长，所以我们希望不时地“修剪”功能和插件的最旧版本。

但是我们该怎么做呢？我可以看到许多可能的解决方案，但在我尝试任何事情之前，我想知道是否有其他人首先尝试过这个。

我的两个建议是：

*   b3
*   带滤镜的镜子（但哪个滤镜？）

如果可以从 Tycho/Maven 运行“修剪”，那将是一个额外的好处，但这并不是一个硬性要求。

# java - shell 脚本：java 程序在 sh 启动时找不到属性文件

> ID：13642962
> 
> 赞同：0
> 
> 时间：2012-11-30T10:05:01.240
> 
> 标签：java, linux, shell, redhat

我正在 Red Hat Enterprise Linux Server 第 5 版（Tikanga）下启动一个 java 程序。

目录结构：
- bin ->sc.jar,start-sc.sh,sc-lib-all.jar
- conf->log4j-sc.properties,sc.properties

运行java程序的命令**（完美运行）**：

```
/usr/java/jdk1.6.0_37/bin/java -Xmx1024M -Dlog4j.configuration=file:../conf/log4j sc.properties -jar sc.jar -config ../conf/sc.properties 
```

如果我把它放到一个 shell 脚本中，java 程序就再也找不到 prop 文件了。shell 脚本 (start-sc.sh) 看起来像：

```
#!/bin/sh
/usr/java/jdk1.6.0_37/bin/java -Xmx1024M -Dlog4j.configuration=file:../conf/log4j-sc.properties -jar sc.jar -config ../conf/sc.properties 
```

我是 shell 脚本的新手，有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:08:42.417

感觉不错，这个版本好用吗？

```
#!/bin/sh
/usr/java/jdk1.6.0_37/bin/java -Xmx1024M -Dlog4j.configuration=file:$(pwd)/../conf/log4j-sc.properties -jar sc.jar -config $(pwd)/../conf/sc.properties 
```

编辑＃1：

在启动程序之前尝试输入以下内容：

```
echo `pwd` 
```

输出告诉您在哪里运行脚本，因此您可以检查它是否是正确的路径。

编辑#2：

试试这个脚本

```
#!/bin/bash
LOG4JCONF="/absolute/path/to/the/log4j/conf/file"
SCCONF="/absolute/path/to/the/other/conf/file"

/usr/java/jdk1.6.0_37/bin/java -Xmx1024M -Dlog4j.configuration=file:$LOG4JCONF -jar sc.jar -config $SCCONF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:16:55.153

`start-sc.sh`我猜你不是从 dir所属的 bin 目录开始你的 shell 脚本。

为了解释清楚，让我们举个例子。

说，你的脚本在这里：

```
/foo/bar/bin/start-sc.sh 
```

如果你在 /foo/bar/bin/ 下启动它，它（相对路径）应该可以工作。

但如果您从 开始脚本`/home/yourHome/someDir/`，则相对路径将指向`$PWD/../`，即`/home/yourHome/`

`cd /foo/bar/bin/`在启动 java 应用程序之前，您可以先在脚本中。或执行以下操作：

```
a=`dirname $0`
if [ $a = '.' ];then
   a=`pwd`
fi
cd $a
/usr/java/jdkxxxx/java ..... 
```

# php - php中的多线程监控进程并行处理

> ID：13642964
> 
> 赞同：0
> 
> 时间：2012-11-30T10:05:04.270
> 
> 标签：php, parallel-processing

我在 php 站点上找到了这个示例，我想运行一个命令并监视它运行的进程。请在课程代码下方找到。

```
class Process{
private $pid;
private $command;

public function __construct($cl=false){
    if ($cl != false){
        $this->command = $cl;
        $this->runCom();
    }
}
private function runCom(){
    $command = 'nohup '.$this->command.' > /dev/null 2>&1 & echo $!';
    exec($command ,$op);
    $this->pid = (int)$op[0];
}

public function setPid($pid){
    $this->pid = $pid;
}

public function getPid(){
    return $this->pid;
}

public function status(){
    $command = 'ps -p '.$this->pid;
    exec($command,$op);
    if (!isset($op[1]))return false;
    else return true;
}

public function start(){
    if ($this->command != '')$this->runCom();
    else return true;
}

public function stop(){
    $command = 'kill '.$this->pid;
    exec($command);
    if ($this->status() == false)return true;
    else return false;
} 
```

下面是我用来运行它的脚本。

```
require 'class.php';
$process = new Process('ls -al');
    // Then you can start/stop/ check status of the job.
    $process.stop();
    $process.start();
    if ($process.status()){
        echo "The process is currently running";
    }else{
        echo "The process is not running.";
    } 
```

我收到一条错误消息，提示未定义函数 start()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:27:46.833

尝试：

```
$process->start(); 
```

这是正确的 php 语法。

# c - C中同一结构的两个名称

> ID：13642965
> 
> 赞同：1
> 
> 时间：2012-11-30T10:05:21.030
> 
> 标签：c, struct, names

我想在我的 .h/.c 对中隐藏 API 的公共结构的性质，所以我只在 .h 中声明 typedef 并在 .c 中完成声明，如下所示：

## foo.h

```
typedef struct filters_s filters_t;

/* some public functions declaration using filters_t */
(...) 
```

## foo.c

```
typedef struct filters_s filter_node_t;

struct filters_s
{
  filter_node_t *children[96];

  (...)
} 
```

如您所见，filters_s 实际上是树的根节点，因此在内部，我使用的是 filter_node_t 但在外部，我不想暴露结构的“树”性质。所以，我的“问题”是理想情况下我还想为结构命名，如 filter_node_s，但我不知道这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:23:08.060

如果你想隐藏结构的实现，那么你需要一个指向结构的不透明指针。在那里，您可以将此指针传递给将获取或修改结构数据的函数。

声明将在 *.h 头文件中。并且定义将在 *.c 文件中。

*.h（头文件）中的类似内容：

```
typedef struct tag_device device_t; 
```

然后在 *.c （实现文件）中：

```
struct tag_device {
size_t id;
char *name;
};

void set_data(device_t *dev, size_t id, char *name)
{
dev->id = id;
dev->name = strdup(*name);
} 
```

然后在您的 *.c （驱动程序文件）中

```
device_t *device = malloc(sizeof *device)

set_data(device, 1, "device02345"); 
```

我刚刚输入了这个，所以它可能并不完美，因为我没有检查错误。永远记得在完成后释放内存。

希望这可以帮助

# javascript - 快速点击时未调用 AJAX 请求

> ID：13642968
> 
> 赞同：1
> 
> 时间：2012-11-30T10:05:31.430
> 
> 标签：javascript, ajax, event-handling

用例：单击锚标记时，向服务器发送该项目已被单击的信息。在这里你可以找到这个小提琴：http: [//jsfiddle.net/nXYQP/5/](http://jsfiddle.net/nXYQP/5/)

现在，当我快速单击锚标记时，我可以看到处理程序被调用的次数等于我单击的次数。但是从处理程序发送的 AJAX 请求的数量要少得多。

使用 Chrome 开发者工具检查发送的请求数。按 F12 打开开发人员工具并导航到网络选项卡，然后单击锚标记以查看它发送的请求数。

我无法推理这种行为。请给它一些光。

这是我的代码：

```
<a id="inc" href="http://www.google.com"> Click me </a>
<div id="container"> Click count will be updated here </div> 
```

Javascript代码：

```
var text = "Click no:-";
var counter = 0;

$("#inc").click(function() {
     var new_request = new XMLHttpRequest();                      
     var new_serverURL = "http://www.google.com";
     new_request.open('GET',new_serverURL,true);
     new_request.send(null);

    $("#container").html("<p>" + text + " " + counter + "</p>");
    counter++;
});​ 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:30:17.393

我敢打赌，取消`XMLHttpRequests`是离开（iframe）当前页面的结果。

由于您*不阻止*事件触发其`click`默认行为（即获取引用的文档），因此一旦当前页面卸载，所有排队的事件处理程序回调都将被取消（请记住，尽管 AJAX 调用本身是异步的，但执行事件处理程序回调不是）。

**编辑**
实际上对单个域的同时请求数量是有限制的。这个限制是由浏览器强加的，并且变化很大（2 和 6 是最常见的）。

查看[browserscope](http://www.browserscope.org/?category=network)的网络测试。

**编辑 2**
哦，顺便说一句。您可能想要使用`POST`而不是`GET`确保浏览器不会由于缓存命中而取消请求。如果你绝对需要让每次点击都计数，你应该在调用时将`async`标志设置为. 这样，所有请求都会排队并一个接一个地运行。`false``new_request.open`

快速解决：

```
var text = "Click no:-";
var counter = 0;

$("#inc").click(function() {
     var new_request = new XMLHttpRequest();

     var new_serverURL = "http://www.google.com";

     new_request.open('POST',new_serverURL,true);
     new_request.send(null);

    $("#container").html("<p>" + text + " " + ++counter + "</p>");
    // Prevent the link's default behavior
    return false;
});​ 
```

# javascript - 将现有的大型 base2 javascript 应用程序代码库转换为使用 RequireJS

> ID：13642969
> 
> 赞同：0
> 
> 时间：2012-11-30T10:05:35.213
> 
> 标签：javascript, jquery, architecture, requirejs, dependency-management

我已经在一个 javascript 应用程序上工作了很长时间，它一开始很小，我是唯一一个在做这个的人。然而，它变得相当大。我想引进另一位开发人员来加快工作。

问题是，这个应用程序只包含一个 js 文件（15000 行代码），在当前情况下在这个应用程序上一起工作会在合并我们的工作时给我带来很多痛苦（我正在使用 git）。

该应用程序建立在 Douglas Crockford 的 base2 库之上。它还使用 jQuery 进行 DOM 操作、jQuery UI、Modernizr 和其他一些。

它的结构是这样的：

```
App = {};
App.model = {};
App.view = {};
App.controller = {};

App.main = base2.Base.extend({
    // uses models, views, controllers
});

App.model.AbstractModel = base2.Base.extend({
    constructor: function(){ ... },
    someMethod: function(){ ... }
    // etc.
});

App.model.AModel = App.model.AbstractModel.extend({
    // override some method
    someMethod: function(){ ... }
}); 
```

现在我的问题是，正如标题所述：（如何）我可以使用 RequireJS 使这个应用程序模块化，由单独的文件组成，着眼于更容易与其他开发人员合作？RequireJS 是一个不错的选择还是我应该走另一条路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:15:58.250

是的，我认为这是一个很好的选择，它将提高代码的质量和可维护性。

1.  您将模块拆分为单独的文件
2.  对于每个模块，您要弄清楚其他模块之间的依赖关系是什么
3.  您更改模块中的代码，如下所示

从

```
App.model.AModel = App.model.AbstractModel.extend({
    // override some method
    someMethod: function(){ ... }
}); 
```

至

```
// I'm using shortened syntax here 
// http://requirejs.org/docs/api.html#modulenotes
define(function (require) {
  // here you are listing dependencies as local closure variables
  var AbstractModel = require('model/AbstractModel');

  var AModel = AbstractModel.extend({
    // override some method
    someMethod: function(){ ... }
  });

  // here you are returning the module
  return AModel;
}); 
```

至于像 jQuery 这样的依赖项，在 SoundCloud，我们决定将它们缩小并连接为全局变量（它们使用常规脚本标签的方式），而不将它们包装在 AMD 模块定义中。

您可能还会拥有`app.js`需要所有这些模块并启动应用程序的 main：

```
require(
  ['models/amodel', 'views/main'/*, 'more', 'modules', … */], 
  function (Amodel, Main /*, more, modules */) {
    new Main({
       model: Amodel
    });
  }
); 
```

# asp.net-mvc - 以编程方式添加 www。控制器动作的前缀

> ID：13642976
> 
> 赞同：0
> 
> 时间：2012-11-30T10:06:01.243
> 
> 标签：asp.net-mvc

是否有一种简单的方法可以使用 RedirectToAction 方法将 www 前缀添加到单个操作（或控制器）中？

我尝试使用 Redirect() 但给我一些其他问题。我认为它重新启动了会话。

**更新：**

我添加了一个实现这样的属性的类：

```
public class ExtendAttributes
{
    public class AddwwwPrefix : FilterAttribute, IAuthorizationFilter
    {
        public void OnAuthorization(AuthorizationContext filterContext)
        {

            string host = filterContext.HttpContext.Request.Url.Host;
            if (host.Contains("www."))
            {
                return; //It already contains www. so don't change it
            }
            else
            {
                host = "www." + filterContext.HttpContext.Request.Url.Host;
            }

            // redirect to HTTP  
            string url = "http://" + host + filterContext.HttpContext.Request.RawUrl;
            filterContext.Result = new RedirectResult(url);
        }
    } 
} 
```

所以我可以这样使用它：

```
[ExtendAttributes.AddwwwPrefix]
   public ActionResult MyAction()
    {
      ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:02:44.990

您可以配置 IIS 来实现这一点。

在绑定下，添加站点正在服务的所有主机名。

添加 HTTP 功能 URL 重写，并添加入站规则：

*   匹配 URL：请求的 URL 使用正则表达式匹配模式

图案：`(.*)`

*   条件匹配所有

输入 {HTTP_HOST} 与模式不匹配`^www\..*`

*   动作动作类型重定向

重定向网址：`http://(your target domain)/(R:1)`

追加查询字符串，重定向类型`Permanent (301)`

根据您的需要进行调整。

# java - Maven - 如何为每个 java 包构建一个 jar

> ID：13642977
> 
> 赞同：0
> 
> 时间：2012-11-30T10:06:01.687
> 
> 标签：java, maven, build

是否可以为项目中的每个 java 包构建一个 jar？

例如，我的包是`com.mypackage.foo, com.mypackage.bar`两个包都在一个项目中。我现在可以开始一个 Maven 构建来获得一个 foo.jar 和一个 bar.jar 吗？

感谢 4 的帮助。

**编辑：**好的，我认为您需要更多信息，为什么我要问这个。我有一个项目，它分为两部分（一个库和一个守护进程），两个部分都必须相互独立运行，所以我想为每个部分使用一个自己的 jar。我正在考虑一个“父项目”，其中包括两个部分作为模块，就像你们中的一些人建议的那样（这是更好的方式吗？）。下一点是我只有一个 git repo 我想提交整个项目。是否可以将模块项目内容放置在父项目中，`src/lib/java`或者我必须如何这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:15:59.763

为每个包创建一个项目以遵守 Maven 约定。一个简单的问题，你为什么需要这样做？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:20:38.643

[maven jar 插件](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html)可以配置为包含和排除类。所以很容易从一个包中打包所有类：

```
 <includes>
        <include>com/example/foo/*</include>
      </includes>
      <excludes>
        <exclude>com/example/foo/subfoo1/**</exclude>
        <exclude>com/example/foo/subfoo2/**</exclude>
        <!-- to exclude all packages that start with com.example.foo -->
      </excludes> 
```

但是你必须为每个单独的包编写一个 pom 文件......你可以在额外的多模块 pom 上创建，它运行所有这些模块，你甚至可以用一个小的 java 程序自动生成 pom 文件，尽管提前自动检测将进入 jar 的所有包非常具有挑战性。

* * *

[使用maven AntRun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)并定义一个`<target>`调用每个包的[jar 任务](http://ant.apache.org/manual/Tasks/jar.html)可能会更容易。

* * *

多模块结构可能是这样的：

```
./
 pom.xml
 project/
        src/...
        target/...
        pom1.xml
        pom2.xml
        pom3.xml 
```

我的理解是，所有的 java 包都驻留在同一个项目中。如果这些包位于不同的项目中，那么将它们打包在不同的 jar 中不会有任何问题——这将是默认行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:13:19.717

在 Maven 中，约定是为模块构建一个 jar，换句话说，就是从`src/main/java`. 如果您需要从每个包中构建一个 jar，这对我来说听起来有点奇怪。你可以这样做，但**不推荐**这样做，因为它会在以后导致麻烦。这是一种你从 Maven 开始的战斗，你最终会失败。

您需要配置[maven-jar-plugin](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html)：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        ...
        <configuration>
          <excludes>
            <exclude>...</exclude>
          </excludes>
          <includes>
            <include>com/mypackage/foo/**</include>
          </includes>
        </configuration>
        ...
      </plugin>
    </plugins>
  </build> 
```

# mobile - 在视口上锁定水平滚动（移动网站）

> ID：13642993
> 
> 赞同：2
> 
> 时间：2012-11-30T10:06:54.043
> 
> 标签：mobile, navigation, scroll, locking, viewport

我正在开发一个带有垂直导航的移动网站。它从左侧出现，带有一个简单的 jQuery 动画，将主要内容向右移动。（例如： http: [//i49.tinypic.com/2dc7c75.jpg](http://i49.tinypic.com/2dc7c75.jpg)）我的问题是：有什么方法（viewport meta、html、jquery ...）可以锁定水平滚动？现在当导航打开时，用户可以水平移动。我需要锁定此动作以强制用户关闭导航以再次查看主要内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T21:25:45.953

您可以只使用溢出隐藏，以便将内容暂时推到可视区域之外。

# jakarta-ee - 运行 JUnit 测试用例时无法加载应用程序上下文错误

> ID：13642999
> 
> 赞同：1
> 
> 时间：2012-11-30T10:07:17.133
> 
> 标签：jakarta-ee, junit

我正在使用 JUnit 进行 Web 服务（Springs）的单元测试。

```
@RunWith(SpringJUnit4ClassRunner.class) 
@ContextConfiguration({"classpath:WSexample/config/service/WSexample-service.xml‌"}) 
```

并且测试文件位于`WSexample/test/find/controller`位置

我正在使用上面的代码来加载一个 xml 文件。它抛出无法加载应用程序上下文错误。

> java.lang.IllegalStateException：无法在 org.springframework.test.context.support.DependencyInjectionTestExecutionListene 的 org.springframework.test.context.TestContext.getApplicationContext(TestContext.j‌​ava:308) 加载 ApplicationContext‌​r.injectDependencies(DependencyInjectionTestExecutionListener。 java:109) at org.springframework.test.context.support.DependencyInjectionTestExecutionListene‌​r.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75) at org.springframework.test.context.TestContextManager.prepareTestInstance(TestCont‌​extManager.java:321)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:08:06.823

您可能需要使用`SpringJunit4ClassRunner`and`ContextConfiguration`来加载您的上下文文件。

看看[这篇](http://lstierneyltd.com/blog/development/examples/unit-testing-spring-apps-with-runwithspringjunit4classrunner-class/)文章。

```
@RunWith(SpringJUnit4ClassRunner.class) 
@ContextConfiguration(locations={"classpath:myContext.xml"}) 
```