# StackOverflow 问答 14680000-14680999

# json - wikipedia API：将表格解析为 JSON？

> ID：14680005
> 
> 赞同：3
> 
> 时间：2013-02-04T03:36:58.987
> 
> 标签：json, api, mediawiki, wikipedia

是否可以[将此表](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes#Partial_ISO_639_table)解析为数组 JSON 中的数组？

我想要的输出是这样的：

```
[
  ["Northwest Caucasian", "Abkhaz", "аҧсуа бызшәа, аҧсшәа", "ab", "abk", "abk", "abk", "abks"], 
  [Afro-Asiatic", "Afar", "Afaraf", "aa", "aar", "aar", "aar", "aars"],
  ...
] 
```

我所拥有的最好的就是[这样](http://en.wikipedia.org/w/api.php?format=jsonfm&action=parse&page=List_of_ISO_639-1_codes&prop=sections)，[这个](http://en.wikipedia.org/w/api.php?format=jsonfm&action=parse&page=List_of_ISO_639-1_codes&prop=text)，或者[这个](http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&format=jsonfm&titles=List_of_ISO_639-1_codes)，这根本没有帮助。

我不仅需要 ISO639 表，还需要其他一些维基百科表，所以我需要一种将 wiki 表解析为 json 的通用方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T11:10:46.787

好吧，我发现最简单的方法是在 Chrome 开发者控制台中使用 Javascript

```
$('table.sortable tr').map(function() {
    return new Array($('td', this).map(function() {
        return $(this).text()
    }).slice(2, 5).get())
}).get() 
```

可惜维基百科没有提供这样的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:45:45.907

@est 谢谢，这对我帮助很大。

您还可以改进以前的代码以将结果保存为 json 字符串，只需将其包装 `JSON.stringify()`（仅限现代浏览器）

```
JSON.stringify($('table.sortable tr').map(function() {
    return new Array($('td', this).map(function() {
        return $(this).text()
    }).slice(2, 5).get())
}).get()) 
```

# java - Java - 带有 JSP/Servlet 示例的 NullPointerException？

> ID：14680008
> 
> 赞同：0
> 
> 时间：2013-02-04T03:37:13.503
> 
> 标签：java, eclipse, jsp, servlets, glassfish

多年后我试图再次进入Java。好吧，我正在使用 Eclipse IDE 和 Glassfish Server 3.1.2 从教程中制作一个 servlet 示例。该示例只是一个将数据发送到另一个.jsp 的表单。表单被发送到 servlet，servlet 在输出 .jsp 上设置一个 Java Bean。

**索引.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Encuesta de Desarrolladores</title>
</head>
<body>
   <h1>Bienvenido a la encuesta de desarrolladores!</h1>
   <p>Indica los lenguajes de programación con los que estas familiarizado</p>
   <form action="ServletController" method="post">
      <table> 
          <tr>
            <td>Nombre Completo:</td>
            <td><input type="text" name="nombreCompleto" value=""/></td>
          </tr>
          <tr>
            <td>Java:</td>
            <td><input type="checkbox" name="progLeng" value="java"/></td>
          </tr>
          <tr>
            <td>PHP:</td>
            <td><input type="checkbox" name="progLeng" value="php"/></td>
          </tr>
          <tr>
            <td>Python:</td>
            <td><input type="checkbox" name="progLeng" value="python"/></td>
          </tr>
          <tr>
            <td>Ruby:</td>
            <td><input type="checkbox" name="progLeng" value="ruby"/></td>
          </tr>
          <tr>
            <td></td>
            <td><input type="submit" value="Enviar"/></td>
          </tr>
      </table>
   </form>
</body>
</html> 
```

**ServletController.java**

```
package com.j2ee.servlet;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import com.j2ee.bean.DatosEncuesta;;

@WebServlet(name="ServletController", urlPatterns ={"/ServletController"})
public class ServletController extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public ServletController() {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        func(request, response);
    }

    protected void func(HttpServletRequest req, HttpServletResponse res)  throws ServletException, IOException
    {
        DatosEncuesta datosEncuesta = new DatosEncuesta();
        datosEncuesta.setNombreCompleto(req.getParameter("nombreCompleto"));
        datosEncuesta.setProgLeng(req.getParameterValues("progLeng"));
        req.setAttribute("datosEncuesta", datosEncuesta);
        req.getRequestDispatcher("salida.jsp").forward(req, res);
    }
} 
```

**萨利达.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Gracias!</title>
</head>
<body>
  <h2>Gracias por cubrir nuestra encuesta!</h2>
  <p>
    <jsp:getProperty name="DatosEncuesta" property="nombreCompleto" />
    Nos has indicado que estas familiarizado con los siguientes lenguajes de programación:
    <jsp:useBean id="DatosEncuesta" scope="request" class="com.j2ee.bean.DatosEncuesta" />
   </p>
    <ul>
    <%
        System.out.println("Llegue a JSP!");
        String[] lenguajesSeleccionados = DatosEncuesta.getProgLeng();
         if(lenguajesSeleccionados != null)
         {
             for(int i=0; i<lenguajesSeleccionados.length; i++){
    %>
      <li>
         <%=lenguajesSeleccionados[i] %>
      </li>
     <% }
     }%>
    </ul>
</body>
</html> 
```

我会放 java bean，但这很明显。基本上它是一个字符串和一个字符串 []（包括 getter 和 setter）。“DatosEncuesta”类型，您可以在代码中看到。

当我运行它时，由于某种原因，我得到了 NullPointerException。起初我以为是没有 web.xml，但我读到了注释的东西。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:43:44.853

尝试切换的位置`jsp:useBean and jsp:getProperty` 而且，异常跟踪将帮助人们找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:52:56.857

**jsp:useBean**和**jsp:getProperty**不是从请求对象获取值的正确方法。只需将您的 salida.jsp 替换为以下代码即可。它将打印从 index.jsp 中选择的复选框。让我知道是否还有问题。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
        pageEncoding="ISO-8859-1"%>
    <%@ page import="com.j2ee.bean.DatosEncuesta;"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Gracias!</title>
    </head>
    <body>
    <h2>Gracias por cubrir nuestra encuesta!</h2>
    <p>
    <ul>

        <%
            DatosEncuesta objects = (DatosEncuesta) request.getAttribute("datosEncuesta");
        %>

        <%
            System.out.println("Llegue a JSP!");
            String[] lenguajesSeleccionados = objects.getProgLeng();
            if (lenguajesSeleccionados != null) {
                for (int i = 0; i < lenguajesSeleccionados.length; i++) {
        %>
        <li><%=lenguajesSeleccionados[i]%></li>
        <%
            }
            }
        %>
    </ul>
</body>
</html> 
```

# jquery - Jquery 和 AJAX 只发送第一行值

> ID：14680009
> 
> 赞同：0
> 
> 时间：2013-02-04T03:37:22.703
> 
> 标签：jquery, html, ajax, grails, controller

我遇到了一些关于 JQUERY 和 AJAX 的问题。我将首先发布我的代码，

阿贾克斯：

```
 $('#edittable').live('click', function() {
        $.ajax({
            url: URL,
            data: $(this).serialize(),
            type: "POST",
            success: function(html){

                $("#edit1").html(html).dialog("open")

             });
            },

            }
        });
        return false;
    });
  }); 
```

HTML：

```
<form id="edittable">
    <div style="height: 250px; overflow: scroll; width: 100%;">
        <table id="normal">
            <g:each in="${result}">
                <tr id="btn">
                    <td width=10%>
                        ${it.ID}
                    </td>
                    <td width=25%>
                        <span id="user">
                            ${it.username}
                        </span>
                        <input type="hidden" name="editusers" id="editusers"
                                value="${it.username}" readonly>
                    </td>
                </tr>
            </g:each>
        </table>
    </div>
</form> 
```

我在这里要做的是，从表格（edittable）中检索隐藏的输入并将其发送回我的控制器。这是可行的，我的控制器检索它。但是，它只接收第一行值，即使我点击其他行，它仍然接收第一行值。任何人都知道我应该怎么做才能解决这个问题？多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:46:36.993

添加到@Barmer 答案更改 g:each 以包含索引

```
 <g:each status="i" in="${result}"> 
```

使参数名称的索引部分

```
 <input type="hidden" name="editusers[${i}]" value="${it.username}" readonly> 
```

您应该能够从参数中将值列为列表

```
 params.editusers 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:15:02.380

我不知道grails，所以我只是猜测：

```
<input type="hidden" name="editusers${it.ID}" value="{it.username}" readonly>` 
```

您还需要使表中的其他 ID 唯一。可能您首先不需要`<tr>`and`<span>`元素中的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:19:05.487

```
Use this to form data post
<script type="text/javascript">
var form_data = $('#edittable').serializeArray();
 $.ajax({
            url: URL,
            data: {post:form_data},
            type: "POST",
            success: function(html){

                $("#edit1").html(html).dialog("open")

             });
            }

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T04:24:05.680

在成功函数中使用 append 而不是 html

```
$("#edit1").append(html).dialog("open") 
```

# ruby-on-rails - 如何查看在 Heroku 暂存环境中运行的应用程序？

> ID：14680010
> 
> 赞同：0
> 
> 时间：2013-02-04T03:37:23.897
> 
> 标签：ruby-on-rails, heroku, staging

当我将我的应用程序推送到暂存环境时，我会得到不同的主 URL 吗？

我继承了别人在 Heroku 上构建和部署的应用程序。我想测试一些当前用户不会遇到的剧烈变化。在我的本地机器上看起来不错，但该应用程序有一些怪癖，使其无法在我自己的基于 nginx/passenger 的服务器上运行。所以 Heroku 就是这样。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T03:41:16.827

Heroku 应用程序本身并没有暂存环境。它可能会推动原始开发人员用作登台环境的第二个 Heroku 应用程序。在此处阅读有关在 Heroku 上管理多个环境的更多信息：

[https://devcenter.heroku.com/articles/multiple-environments](https://devcenter.heroku.com/articles/multiple-environments)

# javascript - 具有 onsubmit 功能的同一表单上的多个提交按钮

> ID：14680016
> 
> 赞同：4
> 
> 时间：2013-02-04T03:38:41.510
> 
> 标签：javascript, html

我的表单中有 3 个 sumbit 按钮，我需要根据单击的按钮执行不同的 3 个操作。所以我需要编写javascript函数来做同样的事情。我如何在 javascript 中知道单击了哪个按钮。

Javascript：

```
<script type="text/javascript" language="javascript">
function submitform(){
    //do something
} 
```

HTML：

```
form name="myform" method="get,post" onsubmit="return submitform();"
input type="submit" name="submit" value="Home"
input type="submit" name="submit" value="Reschedule"
input type="submit" name="submit" value="Cancel" 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:01:43.197

**编辑：**

您还可以有一个隐藏的输入，告诉您按下了哪个按钮，然后在服务器上处理它。单击按钮时，它将在提交之前更改该输入。

```
<input type="submit" onclick="javascript:document.getElementById('submitClicked').value='forward';return true;" id="linkName" value="Forward" />
<input type="submit" onclick="javascript:document.getElementById('submitClicked').value='back';return true;" id="back" value="Back" /> 
```

演示：http: [//jsfiddle.net/Homeliss/vperb/](http://jsfiddle.net/Homeliss/vperb/)

**注意：**演示使用 jquery 显示消息而不是发布表单，但这仅用于演示目的。解决方案是普通的javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:43:20.073

如果您可以使用 jQuery，那么这可能会容易得多。

然而，一种解决方案是从表单中删除 submitform() 并将其添加到每个提交按钮的 onclick 事件中。这样，您可以更改它以传递一个参数，指示哪个按钮调用它。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T07:17:27.633

我们可以在 html 页面中**提交****一次**表单。所以我们在一个表单中只使用一个提交按钮。但是为了调用更多的函数，我们可以使用**onClick**事件，输入类型应该是按钮。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T05:14:49.163

我有个问题。您的表单中是否还有其他输入字段？如果还有其他字段，例如文本字段，当我们在文本字段内按 Enter 时会调用哪些按钮操作？

我的建议是这样的：

```
<form name="myform" method="get,post" onsubmit="return false;">
    <input type="button" value="Home" onclick="submitform(1)" />
    <input type="button" value="Reschedule" onclick="submitform(2)" />
    <input type="button" value="Cancel" onclick="submitform(3)" />
</form> 
```

在此代码中，用户必须单击一个按钮来提交表单，并且按 Enter 不会导致执行任何操作。

# ios - 应用反馈表

> ID：14680020
> 
> 赞同：1
> 
> 时间：2013-02-04T03:39:56.800
> 
> 标签：ios, objective-c, uiwebview

我正在开发一个应用程序，其中包含一个反馈表。我打算使用 HTML/CSS 制作表单，不会将其上传到网络上。

即使它没有在线发布，它也会起作用吗？我要做的是使用 HTML/CSS 制作一个表单，然后使用 UIWebView 在应用程序中调用它的 index.html。但当然，用户需要互联网连接才能发送电子邮件。

或者，您可以就如何以其他方式填写反馈表给我一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-25T08:04:56.810

您可以使用其他 3rd 方工具来管理反馈。

Instabug ( [http://instabug.com](http://instabug.com) ) 是一个不错的选择，它不仅是文本反馈，还可以是带有屏幕截图的视觉反馈，用户可以在上面绘制，所有这些都在应用内完成。

它还会发送一份报告，其中包含设备、操作系统、用户位置、连接性等，以及发送的每个反馈。

最重要的是，它是免费的！

PS。我在@Instabug 工作，如果您需要任何帮助，请告诉我。

# java - 从 ArrayList 的当前元素和 ArrayList 的下一个元素设置属性

> ID：14680021
> 
> 赞同：0
> 
> 时间：2013-02-04T03:40:00.427
> 
> 标签：java

我有 3 个类：神经元、层、网络。

一个层包含一组神经元，一个网络包含一组层。

一个神经元具有（属性）一组输入（Double）和一个输出（Double）。

在网络类里面我有：

```
private ArrayList<Layer> layers; 
```

我想逐层循环遍历当前层神经元中的每个神经元，并将它们的单独输出设置为下一层每个神经元的输入，直到我遍历所有层为止。

现在我有以下方法尝试完成此操作：

```
public void execute(){

    //Connecting Network
    for (Layer l : layers){
        int counter = 0;
        while (counter < layers.size()){

            for (Neuron n: l.neurons ){
                neuronOfNextLayer.addInputs(neuronOfPreviousLyaer.output);
            }
            counter++;
        }
    }

} 
```

现在我将如何更换

```
neuronOfNextLayer.addInputs(neuronOfPreviousLyaer.output); 
```

循环的一部分，实际上通过层中每一层的输出并将其设置为下一层每个神经元的输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:31:17.180

我假设您已经在“神经元”类中有字段变量“输入”。

所以你可以替换代码 neuronOfNextLayer.addInputs(neuronOfPreviousLyaer.output);

和：

```
Layer nextLayer =layers.get(counter +1);
List<Neuron> nextNeuron=nextLayer.getNeurons();

nextNeuron.get(counter2).inputs=n.output;  //Counter 2 is the new counter you should keep in second for each Loop 
```

如果这对您没有帮助，请清除问题。

# android - 来自数据库创建的列表视图的 getText()

> ID：14680022
> 
> 赞同：0
> 
> 时间：2013-02-04T03:40:01.470
> 
> 标签：android, android-sdk-tools

我有一个由数据库填充的列表，我正在运行 OnItemClick() 方法。我会调用什么来从被点击的项目中获取文本？

```
public void DisplayRecord(Cursor c) {
    Cursor c1 = DBAdapter.getAllRecords();
    startManagingCursor(c1);

    String[] from = new String[] { DBAdapter.KEY_ITEM };
    int[] to = new int[] { R.id.text1 };

    SimpleCursorAdapter notes = new SimpleCursorAdapter(this, R.layout.row,
            c1, from, to);
    setListAdapter(notes);
}

@Override
public void onListItemClick(ListView l, View view, int position, long id) {
    switch (position) {
    case 0:
        //method to getText()?

        break;
    }
} 
```

**日志猫：**

```
02-03 22:34:11.174: E/AndroidRuntime(1561): FATAL EXCEPTION: main
02-03 22:34:11.174: E/AndroidRuntime(1561): java.lang.IllegalStateException: database not open
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1312)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1271)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1391)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at com.Logik.dawn.of.ages.DBAdapter.getAllRecords(DBAdapter.java:87)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at com.Logik.dawn.of.ages.Inventory.onListItemClick(Inventory.java:130)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.app.ListActivity$2.onItemClick(ListActivity.java:342)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.widget.ListView.performItemClick(ListView.java:3561)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1831)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.os.Handler.handleCallback(Handler.java:587)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.os.Looper.loop(Looper.java:143)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at android.app.ActivityThread.main(ActivityThread.java:4293)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at java.lang.reflect.Method.invokeNative(Native Method)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at java.lang.reflect.Method.invoke(Method.java:507)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-03 22:34:11.174: E/AndroidRuntime(1561):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:58:26.903

```
Cursor c = this.getContentResolver().query(DBAdapter.getAllRecords(),null,null,null,null);

@Override
public void onListItemClick(ListView l, View view, int position, long id) {                
      c.moveToPosition(position);
      String s = c.getString(c.getColumnIndex(DBAdapter.KEY_ITEM));

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:51:55.573

你可以用你的数组来做这样的事情；

```
 @Override
public void onListItemClick(ListView l, View view, int position, long id) {
   String fromtext = from[position];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T05:27:25.800

此代码用于将日期从数据库添加到 a,b(ArrayList) ，这里 a 是 Fl​​oat Arraylist，这里 b 是 Integer Array 列表

```
 public void data()
         {
    mySQLiteAdapter = new SQLiteAdapter(getActivity());
    mySQLiteAdapter.openToRead();
    Cursor c = mySQLiteAdapter.queueAll("TABLE NAME",COLUMN NAME,CONDITION);

    //************************************************add date from database
      if(c.moveToFirst())
          do {

              a.add(c.getString(0));// here a is Float Arraylist, 0 represent first column
             b.add(c.getInt(1));// here b is Integer Array list, 1 represent second column

             }
          while (c.moveToNext());
         } 
```

和 'variable.get(position)' 用于从数组列表中获取信息

```
 public void onListItemClick(ListView l, View view, int position, long id) {
     switch (position) {
      case 0:
     //method to getText()?
       xxx.SetText(a.get(position));
    break;
} 
```

# file-upload - 获取 dojo 的上传文件列表的句柄

> ID：14680023
> 
> 赞同：2
> 
> 时间：2013-02-04T03:40:03.507
> 
> 标签：file-upload, dojo

我们`dojo's` `dojox.form.uploader.FileList`在我们的应用程序中使用来显示文件上传的进度。但它显示文件的名称，默认输入扩展名。我们看不到任何隐藏它或处理它的设置。是否可以获得具有文件名、大小和扩展名的对象的句柄？你能帮助我们吗？

# xcode - XCode C/C++ 标志 Bash 脚本

> ID：14680025
> 
> 赞同：4
> 
> 时间：2013-02-04T03:40:25.953
> 
> 标签：xcode, xcode4

我试图在 XCode 上运行以下命令，将其作为 C/C++ 标志添加到我可以获得来自在我的项目的运行脚本阶段执行的 shell 脚本的内部版本号。

在另一个类似 Unix 的系统上使用 GCC 可以正常工作：

-D__BUILD_VERSION=$(cat build_number)

好的 XCode 我正在尝试使用以下内容：

-D__BUILD_VERSION=$(cat $PROJECT_DIR/build_number)

但它不起作用，我做错了什么？在 XCode 中，如何将 cat build_number 的结果分配给 __BUILD_VERSION 定义的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:16:21.383

如果您尝试在 Xcode 编译构建阶段设置该值，您可能会遇到麻烦，因为我不知道任何解释操作都发生在您尝试设置的设置方式下您尝试设置的方式他们起来。

对于自动设置版本号，我有一个更复杂的半自动版本和自动编号方案，所以我不必记住更改任何一个，或者我可以给出我想要但总是递增的版本号内部版本号，在这两种情况下，它都会将内部版本号放在 iOS 系统设置中显示的应用程序设置中的“关于”框中。

您可能不需要太多，但是有一些技巧可以获取和编写您可能会发现有用的信息，并且可能会为您的问题带来解决方案。

* * *

以下脚本的灵感来自我目前无法找到的有关如何执行此操作的堆栈溢出答案。我做了更多的工作，因为（a）我希望版本号显示在系统设置中显示的设置中；(b) Xcode 缓存 Info.plist 文件的内容，所以这样做并不像我预期的那么简单。

在编译之前的构建阶段，我运行以下命令（仅在*未选中***安装时使用运行脚本** ）

 *```
sh xolawareStashProductSettings.sh 
```

xolawareStashProductSettings.sh 的内容检查 info.plist 文件的 git 状态，如果不干净，将其暂时存放在一边以备日后恢复。

```
#!/bin/sh

#
# should be run prior to the Copy Bundle Resources step
# and prior to any version information modifier scripts

INFOPLIST_GIT_PATH=${PROJECT}/`basename ${INFOPLIST_FILE}`
echo "-- Temp Hold ${INFOPLIST_GIT_PATH} Script --"

set -e

# a fallback in case the user has made changes to the file
if [ `git status --porcelain ${INFOPLIST_GIT_PATH} ]|wc -l` -gt 0 ]; then
    echo cp -p ${INFOPLIST_GIT_PATH} ${TARGET_TEMP_DIR}
    cp -p ${INFOPLIST_GIT_PATH} ${TARGET_TEMP_DIR}
fi 
```

脚本 #2（**仅在安装时运行脚本** *未选中*）：

```
sh xolawareStashSettingsBundleRootPlist.sh 
```

xolawareStashSettingsBundleRootPlist.sh 的内容与脚本1的内容类似。

```
#!/bin/sh
#
# should be run prior to the Copy Bundle Resources step
# and prior to any version information modifier scripts

echo '-- Temp Hold Settings.bundle/Root.plist Script --'

ROOT_PLIST=${PROJECT}/Resources/Settings.bundle/Root.plist

set -e

# a fallback in case the user has made changes to the file
if [ `git status --porcelain ${ROOT_PLIST} ]|wc -l` -gt 0 ]; then
    echo cp -p ${ROOT_PLIST} ${TARGET_TEMP_DIR}
    cp -p ${ROOT_PLIST} ${TARGET_TEMP_DIR}
fi 
```

脚本 #3（**仅在安装时运行脚本已** *选中*）

```
sh xolawareIncrementProductSettingsBuildNumber.sh 
```

xolawareIncrementProductSettingsBuildNumber 的内容使用 plistbuddy 查看它是什么并将其增加一：

```
#!/bin/sh
#
# this should be prior to xolawareAboutInfoVersionInfoInSettings.sh

echo "-- Auto-Increment ${INFOPLIST_FILE} Build Version Install Script --"

PLISTBUDDYCMD="/usr/libexec/PlistBuddy -c"
CONFIGURATION_BUILD_SETTINGS_PATH=${CONFIGURATION_BUILD_DIR}/${INFOPLIST_PATH}

CFBV=$(${PLISTBUDDYCMD} "Print :CFBundleVersion" ${PRODUCT_SETTINGS_PATH})
if [[ "${CFBV}" == "" ]]; then
    echo "No build number in ${PRODUCT_SETTINGS_PATH}"
    exit 2
fi

CFBV=$(expr $CFBV + 1)

set -e
echo ${PLISTBUDDYCMD} "Set :CFBundleVersion $CFBV" "${PRODUCT_SETTINGS_PATH}"
${PLISTBUDDYCMD} "Set :CFBundleVersion $CFBV" "${PRODUCT_SETTINGS_PATH}"
echo ${PLISTBUDDYCMD} "Set :CFBundleVersion $CFBV" "${CONFIGURATION_BUILD_SETTINGS_PATH}"
${PLISTBUDDYCMD} "Set :CFBundleVersion $CFBV" "${CONFIGURATION_BUILD_SETTINGS_PATH}" 
```

脚本 #4（仅在*未选中***安装时运行脚本** ）

 *```
sh xolawareProductSettingsShortVersion-from-git.sh
sh xolawareAboutInfoVersionInfoInSettings.sh 
```

xolawareProductSettingsShortVersion-from-git 的内容有点依赖于我在 git 中适当地标记我的分支，但如果我忘记了，它将使用自上次提交以来的提交次数为我自动版本我的构建。

```
#!/bin/sh
#
# this should be run after xolawareStashSettingsBundleRootPlist.sh
# and prior to xolawareAboutInfoVersionInfoInSettings.sh

echo '-- Get Product Settings Short Version String from git describe --'

PLISTBUDDYCMD="/usr/libexec/PlistBuddy -c"
CONFIGURATION_BUILD_SETTINGS_PATH=${CONFIGURATION_BUILD_DIR}/${INFOPLIST_PATH}

CFBVS=`git describe|awk '{split($0,a,"-"); print a[1]}'`
CFBVSI=`git describe|awk '{split($0,a,"-"); print a[2]}'`
if [[ "$CFBVSI" != "" ]]; then
    CFBVS=${CFBVS}.${CFBVSI}
fi

set -e
echo ${PLISTBUDDYCMD} "Set :CFBundleShortVersionString $CFBVS" "${PRODUCT_SETTINGS_PATH}"
${PLISTBUDDYCMD} "Set :CFBundleShortVersionString $CFBVS" "${PRODUCT_SETTINGS_PATH}"
echo ${PLISTBUDDYCMD} "Set :CFBundleShortVersionString $CFBVS" "${CONFIGURATION_BUILD_SETTINGS_PATH}"
${PLISTBUDDYCMD} "Set :CFBundleShortVersionString $CFBVS" "${CONFIGURATION_BUILD_SETTINGS_PATH}" 
```

xolawareAboutInfoVersionInfoInSettings.sh 的内容将内容放在我想要的 Root.plist 中的 About 框中。它依赖于关于框是你的 settings.bundle 的 Root.plist 中的第一件事：

```
#!/bin/sh
#
# this should be invoked after xolawareStashInfoAndRootPlist.sh,
# xolawareIncrementProductSettingsBuildNumber.sh and 
# xolawareProductSettingsShortVersion-from-git.sh, and before
# the regular Copy Bundle Resources Build Phase

echo '-- Auto-Insert Version Info In System Settings Script --'

PLISTBUDDYCMD="/usr/libexec/PlistBuddy -c"
ROOT_PLIST=${PROJECT_DIR}/${PROJECT}/Resources/Settings.bundle/Root.plist

CFBSVS=`exec -c ${PLISTBUDDYCMD} "Print :CFBundleShortVersionString" ${PRODUCT_SETTINGS_PATH}`
CFBV=`exec -c ${PLISTBUDDYCMD} "Print :CFBundleVersion" ${PRODUCT_SETTINGS_PATH}`

set -e
echo ${PLISTBUDDYCMD} "Set :PreferenceSpecifiers:1:DefaultValue '${CFBSVS} (b${CFBV})'" ${ROOT_PLIST}
${PLISTBUDDYCMD} "Set :PreferenceSpecifiers:1:DefaultValue '${CFBSVS} (b${CFBV})'" ${ROOT_PLIST} 
```

在编译、链接和复制捆绑资源阶段之后还有几个清理脚本要运行

```
sh xolawareStashRestoreSettingsBundleRootPlist.sh 
```

这可能不是必需的，但我调整了 Root.plist 中的其他项目以进行发布版本，因此这会恢复调试版本的这些设置。

```
#!/bin/sh
#
# should be run as the second to last script in Build Phases, after the Copy Bundle Resources Phase

echo "-- Manual Restore $INFOPLIST_FILE Script --"

ROOT_PLIST=${PROJECT}/Resources/Settings.bundle/Root.plist

set -e

# first, see if it was stashed earlier due to uncommitted changes
if [ -e ${TARGET_TEMP_DIR}/Root.plist ]; then
    echo mv ${TARGET_TEMP_DIR}/Root.plist ${ROOT_PLIST}
    mv ${TARGET_TEMP_DIR}/Root.plist ${ROOT_PLIST}

# the better option when available: restore to the pristine state
elif [ `git status --porcelain ${ROOT_PLIST}|wc -l` -gt 0 ]; then
    echo git checkout -- ${ROOT_PLIST}
    git checkout -- ${ROOT_PLIST}
fi 
```

最后，如果我自己还没有标记该项目，则自动标记 git repo 的步骤：

```
sh xolawareProductSettings-git-commit-and-tag.sh

#!/bin/sh
#
# this should be run after xolawareAboutInfoVersionInfoInSettings.sh
# and xolawareProductSettingsShortVersion-from-git.sh

echo "-- ${INFOPLIST_FILE} git commit & tag Install Script --"

SCRIPT_VERSION=`/usr/libexec/PlistBuddy -c 'Print :CFBundleShortVersionString' ${INFOPLIST_FILE}`
SCRIPT_BUILD_NUMBER=`/usr/libexec/Plistbuddy -c 'Print :CFBundleVersion' ${INFOPLIST_FILE}`
if [ `git status --porcelain ${SCRIPT_INFO_PLIST}|wc -l` -gt 0 ]; then
    echo git commit -m '"'version ${SCRIPT_VERSION} build ${SCRIPT_BUILD_NUMBER}'"' ${INFOPLIST_FILE}
    git commit -m "version ${SCRIPT_VERSION} build ${SCRIPT_BUILD_NUMBER}" ${INFOPLIST_FILE}
fi
echo git tag -f ${SCRIPT_VERSION}
git tag -f -F /dev/null ${SCRIPT_VERSION} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:46:13.387

尝试：

```
-D__BUILD_VERSION=`cat $PROJECT_DIR/build_number` 
```

注意“反引号”——它们不是常规的单引号字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:14:48.697

一种可能是让第一个脚本将内部版本号放入环境变量中？不确定这是否会起作用，但它可能会。**

# typescript - 打字稿 - 修改 lib.d.ts

> ID：14680029
> 
> 赞同：1
> 
> 时间：2013-02-04T03:41:00.057
> 
> 标签：typescript

假设我想将以下原型添加到 String 类。

```
String.prototype.beginsWith = function (string) {
     return(this.indexOf(string) === 0);
}; 
```

我需要添加`beginWith`到 lib.d.ts 否则它将无法编译：

```
declare var String: {
    new (value?: any): String;
    (value?: any): string;
    prototype: String;
    fromCharCode(...codes: number[]): string;
    //Here
} 
```

文件被锁定，我无法编辑它。

我释放我可以 `var String: any`在通话之前声明，但我可以内置它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T07:53:12.677

您无需修改​​ lib.d.ts 而是先扩展 String 接口，然后将新方法包含到您希望扩展的对象的原型链中。

例如

```
interface String {
   beginsWith(text: string): bool;
} 
```

然后实现新功能并将其添加到原型链中

```
String.prototype.beginsWith = function (text) {
    return this.indexOf(text) === 0;
} 
```

现在您将在调用代码中获得智能感知并按预期工作。

# r - 特定时间跨度内的推文 (TwitteR)

> ID：14680036
> 
> 赞同：3
> 
> 时间：2013-02-04T03:41:49.430
> 
> 标签：r, twitter

有没有办法使用 twitteR 而不是简单地获取过去的 N 条推文（如 tweets <- UserTimeline(user, n = 1000) ）在特定时间跨度内（例如，12 月和 1 月之间）获取推文？

或者这不可能使用 TwitteR 库？（这意味着您必须使用 Excel 之类的工具按日期对大量推文进行子集化）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:29:21.027

在您使用的包中，该`searchTwitter`函数接受参数`since`和`until`，在[文档](http://cran.r-project.org/web/packages/twitteR/twitteR.pdf)中定义如下：

> **since** 如果不是 NULL，则将推文限制为自给定日期以来的推文。日期格式为 YYYY-MM-DD
> 
> **until** 如果不为 NULL，则将推文限制在给定日期之前的推文。日期格式为 YYYY-MM-DD

这就是你所追求的吗？或者，如果您想坚持使用该功能，您可以通过对您获得的对象的字段进行 `userTimeline`操作来子集您想要的日期范围（因此无需使用 Excel）。`created``status`

**编辑**`created`如果您使用以下内容，您可以如何在该字段上进行子集化`userTimeline`：

```
library(twitteR)
# get last 100 tweets from the NSF
tweets <- userTimeline('NSF', 100)
# inspect structure of first item in the status object (ie. list of results)
str(tweets[1])
List of 1
 $ :Reference class 'status' [package "twitteR"] with 10 fields
  ..$ text        : chr "From the field: Avoiding a Cartography Catastrophe:  Study recommends new tools to improve global mapping of inf... http://t.co"| __truncated__
  ..$ favorited   : logi FALSE
  ..$ replyToSN   : chr(0) 
  ..$ created     : POSIXct[1:1], format: "2013-02-05 01:43:45"
  ..$ truncated   : logi FALSE
  ..$ replyToSID  : chr(0) 
  ..$ id          : chr "298607815617036288"
  ..$ replyToUID  : chr(0) 
  ..$ statusSource: chr "<a href=\"http://twitterfeed.com\" rel=\"nofollow\">twitterfeed</a>"
  ..$ screenName  : chr "NSF"
  ..and 34 methods, of which 23 are possibly relevant:
  ..  getCreated, getFavorited, getId, getReplyToSID, getReplyToSN,
  ..  getReplyToUID, getScreenName, getStatusSource, getText,
  ..  getTruncated, initialize, setCreated, setFavorited, setId,
  ..  setReplyToSID, setReplyToSN, setReplyToUID, setScreenName,
      ..  setStatusSource, setText, setTruncated, toDataFrame, usingMethods

# convert status object to data frame for easier manipulation
tweetsdf <- twListToDF(tweets)

 # subset by `created` field, eg get all tweets between 2 Feb and 5 Feb  
    subset(tweetsdf, created >= as.POSIXct('2013-02-02 00:00:00') & created <= as.POSIXct('2013-02-05 00:00:00')) 
```

这是该子集操作产生的数据框：

```
text
1   From the field: Avoiding a Cartography Catastrophe:  Study recommends new tools to improve global mapping of inf... http://t.co/F6IJ05Sb
2                  Video: Research Vessel Sikuliaq launched... and now being prepared for her first Arctic run in 2014, http://t.co/D7GlRnlm
3                                                                                        Who's watching the power grid? http://t.co/oYsgBl63
4 Ice Melt &amp; the Ice Age... research story on #AAAS #Science Update Daily, featured show @Science360 Radio, http://t.co/XRXSdYL1 #Arctic
5                                                                                             Taking LIGO to the people http://t.co/R2KHNQTB
6                            Pubs: NSF Current - January-February 2013: Available Formats: JSP: http://t.co/2NhEEj6Q... http://t.co/ZSVABpXm
7   Upcoming Due Dates: Interdisciplinary Research in Hazards and Disasters (Hazards SEES): Full Proposal Deadline D... http://t.co/IG3naAFs
8                                                     When children learn to walk, their language improves dramatically http://t.co/FGYXSKu2
  favorited replyToSN             created truncated replyToSID
1     FALSE        NA 2013-02-05 01:43:45     FALSE         NA
2     FALSE        NA 2013-02-04 19:30:40     FALSE         NA
3     FALSE        NA 2013-02-04 18:01:33     FALSE         NA
4     FALSE        NA 2013-02-04 13:55:46     FALSE         NA
5     FALSE        NA 2013-02-04 13:01:51     FALSE         NA
6     FALSE        NA 2013-02-02 17:19:30     FALSE         NA
7     FALSE        NA 2013-02-02 14:25:15     FALSE         NA
8     FALSE        NA 2013-02-02 14:02:11     FALSE         NA
                  id replyToUID
1 298607815617036288         NA
2 298513923307630592         NA
3 298491499958644736         NA
4 298429645580288000         NA
5 298416076012785666         NA
6 297756138433290240         NA
7 297712287521841156         NA
8 297706485608218624         NA
                                                     statusSource
1 <a href="http://twitterfeed.com" rel="nofollow">twitterfeed</a>
2 <a href="http://www.hootsuite.com" rel="nofollow">HootSuite</a>
3 <a href="http://www.hootsuite.com" rel="nofollow">HootSuite</a>
4 <a href="http://www.hootsuite.com" rel="nofollow">HootSuite</a>
5 <a href="http://www.hootsuite.com" rel="nofollow">HootSuite</a>
6 <a href="http://twitterfeed.com" rel="nofollow">twitterfeed</a>
7 <a href="http://twitterfeed.com" rel="nofollow">twitterfeed</a>
8 <a href="http://www.hootsuite.com" rel="nofollow">HootSuite</a>
  screenName
1        NSF
2        NSF
3        NSF
4        NSF
5        NSF
6        NSF
7        NSF
8        NSF 
```

# jquery - Jquery get element class with rails 在 Firefox 中抛出错误

> ID：14680037
> 
> 赞同：0
> 
> 时间：2013-02-04T03:41:55.687
> 
> 标签：jquery, ruby-on-rails, firefox

当用户单击按钮时，我使用以下 JQuery 脚本更新特定元素：

```
$(function(){
 $("#item_<%= @detail.itemID %>").addClass('selected').html("<%= escape_javascript(render 'pages/item', :item => @detail.item, :@order => @detail.order) %>");
)}; 
```

这是我认为的相关元素：

```
<tr class = "item_row">
<% items.each do |item| %>
<td class = "item_data <%= item_select(item)%>", id = "item_<%= item.itemID %>" >
    <%= render 'pages/item', :item => item %>
</td>
<% end %> 
```

我正在使用 Rails 和 JQuery。该脚本可以使用 Chrome 正确更新，但使用 Firefox 会引发以下错误（我使用 Firebug 进行了调试）：

```
Error: Syntax error, unrecognized expression: #item_<%= @detail.itemID %> 
```

我使用这个 rails 代码是因为我只想更新与用户单击的内容相关的特定项目。显然，我需要调整我的 JQuery，以便 Firefox 可以正确处理我的代码的 rails 元素，但是任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:51:21.970

我假设该 javascript 代码位于资产文件中。您可以这样做，但如果您通过在文件名中添加 .erb 将文件设置为使用 erb。但是在您的情况下，您想要评估一个使用实例变量的 ruby​​ 表达式，这只能在您有权访问该变量时完成。如果您在视图中移动该 javascript 函数，您应该能够运行它而不会出现任何错误。

# javascript - jQuery动画在运行时触发两次回调

> ID：14680038
> 
> 赞同：1
> 
> 时间：2013-02-04T03:42:20.270
> 
> 标签：javascript, jquery, callback, jquery-animate, slidetoggle

我正在使用 jQuery 为滚动效果设置动画，动画结束后，我触发了一个效果，由于某种原因，效果被触发了两次，我该如何防止它发生？

```
$('.something').on('click', function() {
            $('html, body').animate({
                scrollTop: $('footer').offset().top
            }, {
                queue: false,
                duration: 1500,
                complete: function() {
                    $('.foo').toggleClass('active');
                    $('.bar').slideToggle();    
                }
            });                
            return false;
        }); 
```

slideToggle 效果似乎被触发了两次。我在 html 和 body 上设置了动画，因为来自“body”的动画在 IE8 中不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T03:47:20.290

由于您触发了两个动画（在 html 和 body 上），因此应该调用两次完整的回调。

您可能只想在需要时触发 html 上的动画

```
var animateOn = isIE8 ? 'html' : 'body';
$(animateOn).animate(); 
```

# jquery - 更改 div 背景 jquery

> ID：14680041
> 
> 赞同：2
> 
> 时间：2013-02-04T03:42:46.620
> 
> 标签：jquery, html, background-image

我不确定我做错了什么。我试图让我的 div 的背景图像随着时间的推移而改变。我从这个站点获得了 jQuery 函数，但它对我不起作用。任何线索我做错了什么。

## jQuery

```
$(window).load(function () {
    var images = ['wave_01.png', 'wave_02.png'];
    var i = 0;

    function changeBackground() {
        $('main').css('background-image', function () {
            if (i >= images.length) {
                i = 0;
            }
            return 'url(' + images[i++] + ')';
        });
    }
    // Call it on the first time
    changeBackground();
    // Set an interval to continue
    setInterval(changeBackground, 3000);
}); 
```

## HTML

```
<div class="main"></div> 
```

## CSS

```
.main {
    background-image: url(../images/wave_01.png);
    background-repeat:no-repeat;
    background-size: 100% 40%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:29:52.567

试试这个：[**现场演示**](http://jsfiddle.net/38yTH/)

**HTML**（没有问题）

```
<div class="main" ></div> 
```

**CSS**

如果您使用的是空`div`的，则不会显示背景。

```
.main {
    background-image: url(wave_01.png);
    background-repeat:no-repeat;
    background-size: 100% 40%;
    width:200px;
    height:200px;
} 
```

**jQuery**

使用`$(document).ready`. 对主类使用`.main`选择器。确保图像文件的路径在数组中正确。

```
$(document).ready(function () {
    var images = ['wave_01.png', 'wave_02.png'];
    var i = 0;

    function changeBackground() {
        $('.main').css('background-image', function () {
            if (i >= images.length) {
                i = 0;
            }
            return 'url(' + images[i++] + ')';
        });
    }
    // Call it on the first time
    changeBackground();
    // Set an interval to continue
    setInterval(changeBackground, 3000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:44:18.597

您的选择器有错字。你有'main'，但意思是'.main'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:00:37.753

您的 main 选择器有问题。您必须使用 .main 来根据 className 选择元素

试试下面的代码。

```
$(window).load(function(){
     var images = ['wave_01.png','wave_02.png'];
    var i = 0;

    function changeBackground() {
    $('.main').css('background-image', function() {
        if (i >= images.length) {
            i=0;
        }
        return 'url(' + images[i++] + ')';      
    });
}
// Call it on the first time
changeBackground();
// Set an interval to continue
setInterval(changeBackground, 3000);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T04:10:29.530

您的 JavaScript 中的图像路径是否正确？你有：

```
var images = ['wave_01.png', 'wave_02.png']; 
```

但在你的 CSS 中是：

```
background-image: url(../images/wave_01.png); 
```

这表明图像与 Javascript 位于同一文件夹中。是这样吗？如果您的项目是这样构建的，这不一定是不正确的，但值得检查。我认为实际上这可能是一个错误，因为它也需要您的 Javascript 在“图像”文件夹中才能工作。

如果您的 CSS 和 Javascript 都在同一个 HTML 文件中，请使路径相同，即

```
var images = ['../images/wave_01.png', '../images/wave_02.png']; 
```

如果您不确定，请尝试使用绝对路径（例如`'/images/wave_01.png'`）来代替。

另外，不确定它是否只是一个错字，但选择器`$('main')`肯定应该是`$('.main')`。

# regex - 什么是显示具有两个特定字符串的文件的所有行的 Unix 命令

> ID：14680043
> 
> 赞同：0
> 
> 时间：2013-02-04T03:42:50.877
> 
> 标签：regex, file, shell, unix, command

基本上，我有一个文件，我想搜索并仅显示包含字符串“abc”和“vhg”的行。Unix 命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:45:34.090

你可以使用`grep`它：

```
grep abc file.txt | grep vhg 
```

或者

你可以使用`awk`：

```
awk '/abc/ && /vhg/' file.txt 
```

grep 的另一种方法：

```
grep .*abc.*vhg file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:41:43.297

由于`sed`尚未给出解决方案：

```
sed -n '/abc/{ /vhg/p; }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:46:17.110

使用`grep`命令。

```
grep 'word1\|word2\|word3' /path/to/file 
```

例子：

```
grep 'abc\|vhg' filename 
```

# webkit - 使用 V8 构建 QtWebkit

> ID：14680047
> 
> 赞同：1
> 
> 时间：2013-02-04T03:43:38.940
> 
> 标签：webkit, qt4, v8, qtwebkit

几天来，我一直期待在`QtWebkit`支持下进行构建`V8`。

我在互联网上找到了很多资源，其中一些是 2010 年的旧资源：

*   [http://webkit.sed.hu/blog/20101216/benchmarking-qtwebkit-v8-linux](http://webkit.sed.hu/blog/20101216/benchmarking-qtwebkit-v8-linux)

> “一段时间以来，可以使用 Google 的 V8 JavaScript 引擎而不是默认的 JavaScriptCore 在 Linux 上构建和运行 QtWebKit。”

这是2011年的：

*   [https://lists.webkit.org/pipermail/webkit-qt/20​​11-January/001111.html](https://lists.webkit.org/pipermail/webkit-qt/2011-January/001111.html)

> 当前的主干现在也应该使用：Tools/Scripts/build-webkit --qt --v8

我还发现了这个：

*   [http://qt-project.org/wiki/V8_Port](http://qt-project.org/wiki/V8_Port)

> 项目被放弃 [bugreports.qt-project.org]

`--v8`在 Webkit 的脚本中似乎没有被识别，并且`build_webkit`似乎没有类似的选项。

Webkit 的源代码中的A`find`揭示了项目中存在的 v8 测试和绑定。

那么有没有办法建立`QtWebkit`或`v8`放弃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:34:10.787

#qtwebkit (freenode.net) 的人说 V8 支持已被放弃。

但我发现这可能值得一试：

*   [https://github.com/qtwebkit-v8ers/qtwebkit-v8](https://github.com/qtwebkit-v8ers/qtwebkit-v8)

# css - 如何使按钮中的文本居中？

> ID：14680050
> 
> 赞同：0
> 
> 时间：2013-02-04T03:44:28.387
> 
> 标签：css

现在可点击部分位于文本上方，然后将剩余的可点击区域挂在按钮下方。我想把它放在中心，这样我就可以清理我的导航栏。

到目前为止，我的 CSS 是

```
#mainnavi
{
    border-top:inset gold 3px;
    background-color:#000033;
    border-bottom:inset gold 3px;
    height:60px;
    text-align:center;
    font-size:12px;
    width:100%;
    text-shadow:20%;
}

a:link,a:visited
{
    font-weight:bold;
    display:inline-block;
    color:#FFFFFF;
    background-color:#000033;
    text-align:center;
    height:30px;
    width:90px;
    text-decoration:blink;
    overflow:hidden;
}

a:hover,a:active
{
    background-color:#c0c0c0;
} 
```

# java - Java：正则表达式转义正则表达式

> ID：14680054
> 
> 赞同：7
> 
> 时间：2013-02-04T03:45:04.300
> 
> 标签：java, regex

此示例数据由 Web 服务返回

> 200,6，“美国加利福尼亚”

我想`split(",")`使用简单的代码拆分它们并尝试查看结果。

```
String loc = "200,6,\"California, USA\"";       
String[] s = loc.split(",");

for(String f : s)
   System.out.println(f); 
```

不幸的是，这就是结果

```
200
6
"California
 USA" 
```

预期的结果应该是

```
200
6
"California, USA" 
```

我尝试了不同的正则表达式，但没有运气。是否可以在内部转义给定的正则表达式`""`？

**更新 1**：添加了 C# 代码

**更新 2**：删除了 C# 代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:03:53.567

```
,(?=(?:[^"]|"[^"]*")*$) 
```

这是您想要的正则表达式（要将其放入 split 函数中，您需要转义字符串中的引号）

解释

您需要找到所有 ',' 不在引号中。这就是您需要前瞻 ( [http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html) ) 以查看当前匹配的逗号是在引号内还是在引号内。

为此，我们使用前瞻来确保当前匹配的 ',' 后跟偶数个 '"' 字符（意味着它位于引号之外）

所以 `(?:[^"]|"[^"]*")*$`意味着只有当有非引号字符直到结尾或一对引号之间有任何内容时才匹配

`(?=(?:[^"]|"[^"]*")*$)`将前瞻上述比赛

`,(?=(?:[^"]|"[^"]*")*$)`最后这将匹配所有“，”与上述前瞻

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T04:16:55.400

一个更简单的解决方案可能是使用现有的库，例如[OpenCSV](http://opencsv.sourceforge.net)来解析您的数据。这可以使用这个库在两行中完成：

```
CSVParser parser = new CSVParser();
String [] data = parser.parseLine(inputLine); 
```

如果您将来有更复杂的 CSV 值（多行值或元素内带有转义引号的值等），这将变得尤为重要。如果您不想添加依赖项，您可以随时使用他们的代码作为参考（尽管它不是基于 RegEx）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:04:54.750

如果有一个好的 Java 词法分析器/解析器库，您可以定义一个词法分析器，如下面的伪词法分析器代码：

```
Delimiter: ,
Item: ([^,"]+) | ("[^,"]+")
Data: Item Delimiter Data | Item 
```

词法分析器的工作方式是它从顶级标记定义（在本例中为数据）开始，并尝试从字符串中形成标记，直到它不能或直到字符串全部消失。因此，对于您的字符串，会发生以下情况：

*   我想从 200,6 中提取数据，“California, USA”。
*   我可以将数据从项目、分隔符和数据中提取出来。
*   我看了 - 200 是一个 Item 然后 , 是一个分隔符，所以我可以标记它并继续。
*   我想从 6 个“美国加利福尼亚州”中提取数据
*   我可以将数据从项目、分隔符和数据中提取出来。
*   我看了 - 6 是一个 Item 然后 , 是一个 Delimiter 所以我可以标记它并继续前进。
*   我想从“California, USA”中获取数据
*   我可以将数据从项目、分隔符和数据中提取出来。
*   我看了 - “California, USA”是一个项目，但我看不到它后面的分隔符，所以让我们试试别的。
*   我可以从项目中获取数据。
*   我看了 - “加利福尼亚，美国”是一个项目，所以我可以标记它并继续前进。
*   字符串为空。我受够了。这是你的代币。

（我从 Python 词法分析器/解析器 PLY 的指南中了解了词法分析器的工作原理：[http](http://www.dabeaz.com/ply/ply.html) ://www.dabeaz.com/ply/ply.html ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T05:28:33.713

你好试试这个表达式。

```
public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String loc = "200,6,\"Paris, France\"";  
        String[] str1 =loc.split(",(?=(?:[^\"]|\"[^\"]*\")*$)");

        for(String tmp : str1 ){
            System.out.println(tmp);
        }

    }

} 
```

# encoding - 如何为土耳其特殊字符（非 ascii）定义/声明 utf-8 代码点以将它们用作标准 utf-8 编码？

> ID：14680059
> 
> 赞同：17
> 
> 时间：2013-02-04T03:45:55.517
> 
> 标签：encoding, utf-8

土耳其语字符 'ÇçĞğİıÖöŞşÜü' 在 utf-8 编码中未正确处理，尽管它们似乎都已定义。它们的字符码都是 65533（替换字符，可能用于错误显示），并根据所选字体显示问号或框。在某些情况下，0/null 作为字符码返回。在互联网上，有很多工具提供 utf-8 定义，但我不确定工具是否使用任何定义的（真实/国际）注册表或使用已知规则和计算动态创建定义。它们的字体定义明确，当我们手动输入代码点时显示它们没有问题。这证明它们是在 utf-8 中定义的。但另一方面，它们不在编码或转换中处理，例如 ajax 请求/响应。

所以基本问题是“我们如何定义一个字符的代码点”？该问题可以按如下方式进行调整，以防止误解。假设我们已经为“Ç”准备了这样的编码数据 -> 字符：Ç 字符名称：LATIN CAPITAL LETTER C WITH CEDILLA 十六进制代码点：00C7 十进制代码点：199 十六进制 UTF-8 字节：C387 ......我们在哪里/如何将这些信息保存为标准的 utf-8 字符？我们如何分发/公开它（准备好被其他人使用）？我们是否需要任何人/基金会（如 unicode/utf-8 联盟）的任何确认，如果它们已经注册但无法正常工作，我们如何检测/修复错误？我们可以进行自定义 utf8 配置吗？如果是怎么办？

注意：这里不需要代码片段，因为它不是误用问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-04T23:47:37.920

您提到的字符存在于 Unicode 中。以下是它们的十六进制字符代码以及它们是如何以 UTF-8 编码的：

```
 Ç     ç     Ğ     ğ     İ     ı     Ö     ö     Ş     ş     Ü     ü
Code: 00c7  00e7  011e  011f  0130  0131  00d6  00f6  015e  015f  00dc  00fc
UTF8: c3 87 c3 a7 c4 9e c4 9f c4 b0 c4 b1 c3 96 c3 b6 c5 9e c5 9f c3 9c c3 bc 
```

这意味着，例如，如果您将字节 0xc4 0x9e 写入文件，则您已写入字符**Ğ**，并且任何理解 UTF-8 的软件工具都**必须**将其读回为**Ğ**。

**更新：**要在土耳其语中正确的字母顺序和大小写转换，您必须使用理解语言环境的库，就像任何其他自然语言一样。例如在 Java 中：

```
Locale tr = new Locale("TR","tr");     //    Turkish locale
print("ÇçĞğİıÖöŞşÜü".toUpperCase(tr)); //    ÇÇĞĞİIÖÖŞŞÜÜ
print("ÇçĞğİıÖöŞşÜü".toLowerCase(tr)); //    ççğğiıööşşüü 
```

注意大写的 i 变成了 İ，而小写的 i 变成了 ı。你没有说你使用哪种编程语言，但它的标准库肯定也支持语言环境。

Unicode 定义了每个字符的代码点和某些属性（例如，如果它是数字或字母，如果是大写、小写或标题大小写的字母），以及处理 Unicode 文本的某些通用算法（例如，如何混合从右到左的文本和从左到右的文本）。字母顺序和正确的大小写转换由国家标准化机构定义，例如芬兰的芬兰[语言学院、西班牙的](http://www.kotus.fi)[Real Academia Española](http://rae.es)，独立于 Unicode。

**更新 2：**

`((ch&0x20)==ch)`世界上大多数语言的小写测试都被打破了，不仅仅是土耳其语。您提到的将大写字母转换为小写字母的算法也是如此。此外，作为字母的测试是不正确的：在许多语言中，Z 不是字母表的最后一个字母。要正确处理文本，您必须使用由知道自己在做什么的人编写的库函数。

Unicode 应该是通用的。创建国家和语言特定的编码变体是导致我们遇到 Unicode 试图解决的混乱的原因。不幸的是，没有通用的字符排序标准。例如在英语中 a = ä < z，但在瑞典语中 a < z < ä。在德语中，Ü 在一个标准中相当于 U，在另一个标准中相当于 UE。在芬兰语中 Ü = Y。没有办法对代码点进行排序，以便在每种语言中排序都是正确的。

# actionscript-3 - 我认为 Soundtransform 不起作用

> ID：14680061
> 
> 赞同：0
> 
> 时间：2013-02-04T03:46:02.093
> 
> 标签：actionscript-3, audio

```
I am trying to lower the volume of this sound since it's like a background music track but it's sounding the same why is it and how can I fix it?

var morning:Morning1 = new Morning1();
var morningChannel:SoundChannel = new SoundChannel ();
var transforming:SoundTransform = new SoundTransform(0.1);
morningChannel = morning.play ();
morningChannel.soundTransform = transforming; 
```

这才是真正应该的样子

最终工作：

```
var morning:Sound =new Morning1 ();
//telling the sound to lower
var transforming:SoundTransform = new SoundTransform(0.05);
var morningChannel:SoundChannel = morning.play(0,1,transforming); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:22:24.790

```
var morning:Sound =new Morning1 ();
//telling the sound to lower
var transforming:SoundTransform = new SoundTransform(0.05);
var morningChannel:SoundChannel = morning.play(0,1,transforming); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:53:23.610

要更改声音的音量，请将第三行替换为：

```
var transforming:SoundTransform = new SoundTransform;
transforming.volume = 0.1; 
```

哦，你必须拥有它，以便在你改变它的属性后播放声音，所以移动`morningChannel = morning.play ();`到最后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:54:06.130

您必须在播放声音之前应用转换 =) morning.play 应该是最后一行。

# ruby-on-rails - Rails 路由和查看助手名称

> ID：14680063
> 
> 赞同：0
> 
> 时间：2013-02-04T03:46:05.650
> 
> 标签：ruby-on-rails, routes

我在我的 routes.rb 中定义了这条路线：

```
matc "articles/:id/vote/up" => "articles#vote", :liked=>true 
```

这条路线的 rake 是：

```
/articles/:id/vote/up(.:format) jokes#vote {:liked=>true} 
```

第一列为空白。我的问题是，这个链接的路由助手名称是什么？例如articles_vote_up_path(:id)。有没有更丑陋的方法可以链接到这条路径？我怎样才能知道？

我在想我误解了一些东西，在这种情况下请指导我正确的方向。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:53:47.393

您需要传递一个`:as`选项才能使用命名路由

`match "articles/:id/vote/up" => "articles#vote", :liked=>true, as: :article_vote_up`

这会产生一个`article_vote_up_path`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:51:27.917

运行时`rake routes`，您可以添加`_path`到左侧第一列中的任何内容，这就是该链接的路由 url 帮助程序。例如，这`rake routes`是我的一个项目中的一句话：

```
 subscriptions GET  /subscriptions(.:format) subscriptions#index 
```

此 url 的 url 助手将是`subscriptions_path`.

# matlab - 关于 Voronoi 图

> ID：14680068
> 
> 赞同：2
> 
> 时间：2013-02-04T03:46:20.707
> 
> 标签：matlab, plot, voronoi

在 MATLAB 的 Voronoi 图函数中，无穷远边的顶点绘制在某个远点。[在此处查看](http://www.mathworks.com/help/matlab/ref/voronoi.html)页面上的第一个图表。Y 轴上从顶部开始的第一个点是 (0,0.75)。（虽然它超出了图像的范围）。我知道我是否运行以下 matlab 函数：

`[vx,vy]=voronoi(x,y)`

我可以得到顶点的坐标，但它们会超出绘图的范围。有没有办法获得绘图范围内的坐标（例如，如上所述的（0,0.75））。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:39:13.437

您所需要的只是检测哪个`vx,vy`交叉轴（使用`find`或逻辑条件等） `find(vx<0)`，`find(vy>1)`然后应用直线方程`y=a*x+b`。对于您想要的点（恰好是 的第 19 列`vx,vy`，斜率`a`为：

```
a=diff(vy(:,19))/diff(vx(:,19)); 
```

与 y 轴的交点由下式给出`b`：

b=vy(1,19)-a*vx(1,19)

```
b =
    0.7546 
```

为了计算`b`我选择了第一点`[vx(1,19),vy(1,19)]`，但这当然也适用于第二点，即`b=vy(2,19)-a*vx(2,19)`

# c# - c#文件服务器客户端在服务器完成发送之前接收文件

> ID：14680071
> 
> 赞同：0
> 
> 时间：2013-02-04T03:47:15.437
> 
> 标签：c#, file, sockets, client, socketserver

我在使用 c# 制作的文件服务器时遇到了一些问题。问题是，当我在我的计算机上同时运行服务器和客户端时，它们工作正常，但是当我在另一台计算机上使用客户端时，客户端在服务器完成发送之前接收到文件。任何输入都会有所帮助。谢谢。

服务器：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net;
using System.Net.Sockets;
using System.IO;
namespace PortalServer
{
    class Program
    {
        static Stream stream01;
        static long length;
        static int int04;
        static int int03;
        static int int02;
        static int int01;
        static TcpListener tcp01;
        static TcpClient tcp02;
        static FileStream s01;
        static byte[] data01;
        static byte[] data02;
        static byte[] data03;
        static byte[] data04;
        static byte[] data05;
        static string str01;
        static string str02;
        static IPEndPoint ipe01;
        static string port01;
        static void Main(string[] args)
        {
            while (true)
            {
            label1:
                try
                {
                    string version = "V:1.1.1";
                    Console.Title = (" Portal Server " + version);
                    Console.ForegroundColor = ConsoleColor.Green;
                    Console.WriteLine();
                    Console.WriteLine("         PORTAL SERVER " + version);
                    Console.WriteLine();
                    Console.ForegroundColor = ConsoleColor.Gray;
                    data02 = new byte[1];
                    Console.Write(" Enter port for connecting clients : ");
                    port01 = Console.ReadLine();
                    Console.Write(" Enter path of file to send : ");
                    str01 = Console.ReadLine();
                    ipe01 = new IPEndPoint(IPAddress.Any, Convert.ToInt32(port01));
                    tcp01 = new TcpListener(ipe01);
                    Console.Write(" Enter server message : ");
                    str02 = Console.ReadLine();
                    s01 = File.OpenRead(@str01);
                    length = s01.Length;
                    Console.WriteLine(" Computing optimum byte size...");
                    for (int i = 1; i <= 30000; i++)
                    {
                        if (s01.Length % i == 0) { int02 = i; }
                    }
                    if (length < 65000) { int02 = Convert.ToInt32(length); }
                    Console.WriteLine(" Done." + " Optimum byte size is " + int02);
                    tcp01.Start();
                    Console.WriteLine(" Server started. Waiting for clients...");
                    tcp02 = tcp01.AcceptTcpClient();
                    stream01 = tcp02.GetStream();
                    Console.WriteLine(" Client " + tcp02.Client.RemoteEndPoint.ToString() + " connected.");
                    data05 = Encoding.UTF8.GetBytes(str02);
                    stream01.Write(data05, 0, data05.Length);
                    System.Threading.Thread.Sleep(500);
                    data04 = Encoding.UTF8.GetBytes(str01);
                    stream01.Write(data04, 0, data04.Length);
                    System.Threading.Thread.Sleep(500);
                    data03 = Encoding.UTF8.GetBytes(length.ToString());
                    stream01.Write(data03, 0, data03.Length);
                    System.Threading.Thread.Sleep(500);
                    Console.WriteLine(" Waiting for response...");
                    stream01.Read((new byte[1]), 0, 1);
                    Console.WriteLine(" Received response...");
                    Console.WriteLine(" Sending file to " + tcp02.Client.RemoteEndPoint.ToString() + "...");
                    int03 = (Convert.ToInt32(length) / int02);
                    int04 = 0;
                    for (int01 = 0; int01 <= int03; int01++)
                    {

                        System.Threading.Thread.Sleep(1);
                        data01 = new byte[int02];
                        s01.Read(data01, 0, data01.Length);
                        stream01.Write(data01, 0, data01.Length);
                        stream01.Read(new byte[1], 0, 1);
                    }
                    s01.Close();
                    Console.WriteLine(" All data sent.");
                    Console.WriteLine(" Waiting for terminate message...");
                    stream01.Read((new byte[1]), 0, 1);
                    Console.WriteLine(" Received terminate message.");
                    tcp02.Close();
                    Console.WriteLine(" Stopping client and server.");
                    tcp01.Stop();
                    Console.WriteLine(" Done. Restarting.");

                }
                catch (Exception e)
                {
                    Console.WriteLine(" Error! : " + e.Message.ToString());
                    if (!(tcp02 == null)) { tcp02.Close(); }
                    if (!(tcp01 == null)) { tcp01.Stop(); goto label1; }
                }
            }
        }
    }
} 
```

客户 ：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net;
using System.Net.Sockets;
using System.IO;
namespace PortalClient
{
    class Program
    {
        static Stream stream01;
        static byte[] data03;
        static int int04;
        static int int03;
        static int int02;
        static string str01;
        static int length;
        static IPEndPoint ipe01;
        static TcpClient tcp01;
        static FileStream s01;
        static string ip01;
        static string port01;
        static string path01;
        static byte[] data01;
        static byte[] data02;
        static byte[] data04;
        static byte[] data05;
        static void Main(string[] args)
        {

            while (true)
            {
            label1:
                {
                    try
                    {
                        string version = "V:1.1.1";
                        Console.Title = (" Portal Client " + version);
                        Console.ForegroundColor = ConsoleColor.Green;
                        Console.WriteLine();
                        Console.WriteLine("         PORTAL CLIENT " + version);
                        Console.WriteLine();
                        Console.ForegroundColor = ConsoleColor.Gray;
                        data01 = new byte[20];
                        data03 = new byte[100];
                        data04 = new byte[100];
                        Console.Write(" Enter IPv4 address of server : ");
                        ip01 = Console.ReadLine();
                        Console.Write(" Enter port to connect on : ");
                        port01 = Console.ReadLine();
                        ipe01 = new IPEndPoint(IPAddress.Parse(ip01), Convert.ToInt32(port01));
                        tcp01 = new TcpClient();
                        Console.WriteLine(" Connecting...");
                        tcp01.Connect(ipe01);
                        Console.WriteLine(" Done.");
                        stream01 = tcp01.GetStream();
                        Console.WriteLine(" Stream aquired.");
                        stream01.Read(data04, 0, data04.Length);
                        System.Threading.Thread.Sleep(100);
                        Console.WriteLine(" Server message : " + Encoding.UTF8.GetString(data04));
                        stream01.Read(data03, 0, data03.Length);
                        System.Threading.Thread.Sleep(100);
                        Console.WriteLine(" File on server : " + Encoding.UTF8.GetString(data03));
                        stream01.Read(data01, 0, data01.Length);
                        System.Threading.Thread.Sleep(100);
                        str01 = Encoding.UTF8.GetString(data01);
                        Console.WriteLine();
                        Console.WriteLine(" file size : " + str01);
                        Console.WriteLine();
                        Console.Write(" Enter the number you see above : ");
                        length = Convert.ToInt32(Console.ReadLine());
                        Console.WriteLine(" Computing optimum byte size...");
                        for (int i = 1; i <= 30000; i++)
                        {
                            if (length % i == 0) { int02 = i; }
                        }
                        if (length < 65000) { int02 = Convert.ToInt32(length); }
                        Console.WriteLine(" Done. Optimum byte size is " + int02);
                        int03 = (length / int02);
                        int04 = 0;
                        Console.Write(" Save file as : ");
                        path01 = Console.ReadLine();
                        s01 = File.OpenWrite(@path01);
                        Console.WriteLine(" Receiving file from " + tcp01.Client.RemoteEndPoint.ToString() + "...");
                        stream01.Write((new byte[1]), 0, 1);
                        System.Threading.Thread.Sleep(1000);
                        for (int i = 0; i <= int03; i++)
                        {

                            data02 = new byte[65000];
                            data05 = new byte[int02]; 
                            stream01.Read(data02, 0, data02.Length);
                            Buffer.BlockCopy(data02, 0, data05, 0, int02);
                            System.Threading.Thread.Sleep(1);
                            s01.Write(data05, 0, data05.Length);
                            stream01.Write(new byte[1], 0, 1);
                        }

                        Console.WriteLine(" Received all data.");
                        Console.WriteLine(" Press enter to disconnect...");
                        Console.ReadLine();
                        stream01.Write((new byte[1]), 0, 1);
                        Console.WriteLine(" Disconnecting...");
                        s01.Close();
                        stream01.Close();
                        tcp01.Close();
                        Console.WriteLine(" Done.");
                    }
                    catch (Exception e)
                    {
                        Console.WriteLine(" Error! : " + e.Message.ToString()); if (!(tcp01 == null)) { tcp01.Close(); } if (!(s01 == null)) { s01.Close(); goto label1; }
                    }
                }

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:38:14.033

检查Stream.Read() 上的[文档](http://msdn.microsoft.com/en-us/library/system.io.stream.read%28v=vs.110%29.aspx)

您传递的最后一个参数是要读取的“最大”字节数，它不保证它会在一次调用中读取您要求的所有字节。

Read 方法返回实际读取的字节数，如果您期望更多，您可以从中决定是否需要再次调用它以获取更多。您还需要管理将后续字节读取到您传递的数组中的正确位置等。

# sql - SQl 选择特定列，但使用 *

> ID：14680074
> 
> 赞同：3
> 
> 时间：2013-02-04T03:47:24.033
> 
> 标签：sql, sql-server, select

我需要帮助，我的 SQL Server 选择语句是：

```
select * from schematemplate.scanner 
```

该表的列是：

```
id
Asset_Category
Asset_Classification
Brand
Model
Supplier
Color 
```

`Asset_Category`我可以选择除and之外的所有列`Asset_Classification`：

```
Select id, brand, model, supplier, color 
from schematemplate.scanner 
```

但我不想像上面的代码那样指定我将选择的列。

是否可以使用`SELECT * from schematemplate.scanner`和添加类似的代码`EXCEPT asset_category and asaset_classification`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:50:30.693

这些只有五列。为什么不选择它？

无论如何，这里有一个建议，你可以接受，

*   创建一个视图和
*   运行选择它，

例子

```
CREATE VIEW viewScanner
AS
SELECT id, brand, model, supplier, color 
FROM   schematemplate.scanner 
```

当你想选择记录时，

```
SELECT * FROM viewScanner 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:15:02.100

您可以动态执行此操作，例如：

```
declare @s varchar(max) = 'select '

select @s=@s+name+',' from sys.columns
where object_id=object_id('schematemplate.scanner')
  and name not in ('asset_category','asset_classification')
order by column_id

set @s=substring(@s,1,len(@s)-1)+' from schematemplate.scanner'

exec(@s) 
```

[sqlfiddle](http://www.sqlfiddle.com/#!6/27309/5/0)

# r - ggplot2中更简单的人口金字塔

> ID：14680075
> 
> 赞同：47
> 
> 时间：2013-02-04T03:47:39.973
> 
> 标签：r, ggplot2

我想用 ggplot2 创建一个人口金字塔。之前有人问[过](https://stackoverflow.com/questions/14245361/population-pyramid-density-plot-in-r)这个问题，但我相信解决方案一定要简单得多。

```
test <- (data.frame(v=rnorm(1000), g=c('M','F')))
require(ggplot2)
ggplot(data=test, aes(x=v)) + 
    geom_histogram() + 
    coord_flip() + 
    facet_grid(. ~ g) 
```

生成此图像。在我看来，这里创建人口金字塔唯一缺少的步骤是反转第一个方面的 x 轴，因此从 50 变为 0，同时保持第二个不变。任何人都可以帮忙吗？

![人口金字塔](../Images/cbee115ecff31f3d0f9b36879a07bd8a.png)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-08T09:09:11.077

这是一个没有刻面的解决方案。首先，创建数据框。我使用从 1 到 20 的值来确保没有一个值是负数（使用人口金字塔，您不会得到负数/年龄）。

```
test <- data.frame(v=sample(1:20,1000,replace=T), g=c('M','F')) 
```

`geom_bar()`然后分别为每个`g`值组合两个调用。因为`F`计数按原样计算，但`M`计数乘以 -1 以获得相反方向的柱。然后`scale_y_continuous()`用于获取轴的漂亮值。

```
require(ggplot2)
require(plyr)    
ggplot(data=test,aes(x=as.factor(v),fill=g)) + 
  geom_bar(subset=.(g=="F")) + 
  geom_bar(subset=.(g=="M"),aes(y=..count..*(-1))) + 
  scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) + 
  coord_flip() 
```

## 更新

由于`subset=.`在最新`ggplot2`版本中不推荐使用参数，因此可以使用 function 获得相同的结果`subset()`。

```
ggplot(data=test,aes(x=as.factor(v),fill=g)) + 
  geom_bar(data=subset(test,g=="F")) + 
  geom_bar(data=subset(test,g=="M"),aes(y=..count..*(-1))) + 
  scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) + 
  coord_flip() 
```

![在此处输入图像描述](../Images/30a4a876470f9bd0a41ef42d367ce663.png)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-04-22T22:41:22.173

人口金字塔的通用 ggplot 代码模板（如下）

1.  使用`geom_col()`而不是`geom_bar()`哪个具有更好的默认值`stat`并避免需要`coord_flip()`
2.  通过`labels = abs`在 scale 函数中使用，避免手动设置标签中断。
3.  具有相同的男性和女性水平轴（和标签），以便更容易地比较两性 -`scale_x_symmetric()`在柠檬包中使用。
4.  仅使用一个几何图形，避免了对数据进行子集化的需要；如果您想在分面图中创建多个金字塔，这很有用。

创建数据...

```
set.seed(100)
a <- seq(from = 0, to = 90, by = 10)
d <- data.frame(age = paste(a, a + 10, sep = "-"),
                sex = rep(x = c("Female", "Male"), each = 10),
                pop = sample(x = 1:100, size = 20))
head(d)
#     age    sex pop
# 1  0-10 Female  74
# 2 10-20 Female  89
# 3 20-30 Female  78
# 4 30-40 Female  23
# 5 40-50 Female  86
# 6 50-60 Female  70 
```

剧情代码...

```
library(ggplot2)
library(lemon)

ggplot(data = d, 
       mapping = aes(x = ifelse(test = sex == "Male", yes = -pop, no = pop), 
                     y = age, fill = sex)) +
  geom_col() +
  scale_x_symmetric(labels = abs) +
  labs(x = "Population") 
```

[![在此处输入图像描述](../Images/a9cff56788a6b6472a07b8dc3959d66f.png)](https://i.stack.imgur.com/0cdpv.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-09T09:10:28.350

扩展@gjabel 的帖子，这里是一个更干净的人口金字塔，同样只使用ggplot2。

```
popPy1 <- ggplot(data = venDemo, 
   mapping = aes(
      x = AgeName, 
      y = ifelse(test = sex == "M",  yes = -Percent, no = Percent), 
      fill = Sex2,
      label=paste(round(Percent*100, 0), "%", sep="")
   )) +
geom_bar(stat = "identity") +
#geom_text( aes(label = TotalCount, TotalCount = TotalCount + 0.05)) +
geom_text(hjust=ifelse(test = venDemo$sex == "M",  yes = 1.1, no = -0.1), size=6, colour="#505050") +
#  scale_y_continuous(limits=c(0,max(appArr$Count)*1.7)) +
# The 1.1 at the end is a buffer so there is space for the labels on each side
scale_y_continuous(labels = abs, limits = max(venDemo$Percent) * c(-1,1) * 1.1) +
# Custom colours
scale_fill_manual(values=as.vector(c("#d23f67","#505050"))) +
# Remove the axis labels and the fill label from the legend - these are unnecessary for a Population Pyramid
labs(
  x = "",
  y = "",
  fill="", 
  family=fontsForCharts
) +
theme_minimal(base_family=fontsForCharts, base_size=20) +   
coord_flip() +
# Remove the grid and the scale
theme( 
  panel.grid.major = element_blank(), 
  panel.grid.minor = element_blank(),
  axis.text.x=element_blank(), 
  axis.text.y=element_text(family=fontsForCharts, size=20),
  strip.text.x=element_text(family=fontsForCharts, size=24),
  legend.position="bottom",
  legend.text=element_text(size=20)
)

popPy1 
```

[![人口金字塔](../Images/c4d929d2ca8ef07cbe3fa3b59c1133f3.png)](https://i.stack.imgur.com/3ho0b.png)

# regex - NFA 如何实现否定正则表达式

> ID：14680076
> 
> 赞同：2
> 
> 时间：2013-02-04T03:47:44.250
> 
> 标签：regex, nfa

我尝试使用 NFA 来实现否定正则表达式。

我知道 NFA 可以很容易地结合正则表达式`ab` `a|b`和`a*`

并且品种`[ab]`可以转换为`a|b`

但是如何转换`[^ab]`为 NFA 片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:58:54.483

这只是一个字符类。NFA 的转换用单个字符或 lambda（空字符串）标记。要实现一个字符类，只需为类中的每个字符设置一个转换。否定类只是为每个*不在*该类中的字符实现一个转换。由于 NFA 需要有一个有限的字母表，所以这完全没有问题。如果 A 是字母表并且您想要 [^ab]，那么对于集合 A - {a, b} 中的每个字符都需要一个转换。

# c# - BitmapImage DecodePixelWidth 奇怪的行为

> ID：14680078
> 
> 赞同：3
> 
> 时间：2013-02-04T03:48:00.670
> 
> 标签：c#, wpf, bitmapimage

我在显示大量图像时遇到了一些性能问题，我发现问题是当我真的只需要小于 1/4 大小的图像时使用的是全分辨率图像。所以我在 BeginInit 和 EndInit 之间添加了一条线，将 DecodePixelWidth 设置为 200，这是我在布局中需要的最大宽度。我的表现不再是问题，但有些图像非常小，绝对没有接近 200 像素宽。大多数图像似乎都可以正确显示，并且似乎没有任何韵律或理由太小并且可以正常工作。我认为这可能是由于图像原始尺寸的差异，但结果没有模式。

在这一点上，我什至不确定从哪里开始寻找，并且非常感谢您朝着正确的方向前进。

编辑：下面有一些关于图像以及我如何使用它们的更多信息。

大多数图像的尺寸约为 1000X1500，尽管有些图像的尺寸很奇怪，例如 1000x1513。所有图像均为JPEG。目前，每个图像都放置在我设计的自定义用户控件中，没有什么太花哨的只是围绕它的背景和一些文本。然后每个用户控件被放置在一个网格中，在它自己的行/列中。网格位于滚动查看器内，因此用户可以滚动列表。这可能不是完成我正在寻找的东西的最佳方式，但它是我快速想出的，并且在大多数情况下都有效。如果它能以更简单或更简洁的方式完成我想要的，我很乐意切换到另一种显示方法。

预期的结果是用于电影浏览应用程序。将有一个可滚动的电影列表，每部都表示为自己的图块，包括标题、电影海报、流派信息、评级和描述。此列表可按各种项目排序。有关电影的信息存储在另一台机器上的 sql 数据库中。图像最初存储在另一台机器上，但被复制到本地以提高性能。

编辑：我已经能够通过不使用 DecodePixelWidth 而是以所需大小保存图像副本来解决该问题，这提高了性能。Youngjae 建议不要使用 DecodePixelWidth 以及他提到使用虚拟化列表，这让我看到了以下关于创建虚拟化包装面板的文章，它应该可以解决任何其他性能问题。这篇文章是针对silverlight的，但据我了解silverlight基本上是wpf的淡化版本，如果它在silverlight中工作，它应该在wpf中工作。转换它以供我使用应该不会太难。

[第 1 部分 - MeasureOverride](http://blogs.claritycon.com/blog/2009/08/custom-panels-in-silverlight-wpf-part-1-measureoverride/)

[第 2 部分 - ArrangeOverride](http://blogs.claritycon.com/blog/2009/08/custom-panels-in-silverlight-wpf-part-2-arrangeoverride/)

[第 3 部分 - 动画](http://blogs.claritycon.com/blog/2009/08/custom-panels-in-silverlight-wpf-part-3-animation/)

[第 4 部分 - 虚拟化](http://blogs.claritycon.com/blog/2009/09/custom-panels-in-silverlight-wpf-part-4-virtualization/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:35:22.497

在[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.decodepixelwidth.aspx)中，您可以找到如下文字。

> JPEG 和便携式网络图形 (PNG) 编解码器本机将图像解码为指定大小；其他编解码器以原始大小解码图像并将图像缩放到所需大小。

而且，由于上述原因，我建议您不要使用 DecodePixelWidth 来调整大小。

我不知道您的原始图像大小和格式，但是与虚拟化列表一起使用还不够`<Image Width="200" Stretch="Uniform">`吗？

# objective-c - 显示从用户位置到其他地图视图注释的距离，但计算出的距离为 0.0000？

> ID：14680083
> 
> 赞同：-3
> 
> 时间：2013-02-04T03:49:02.367
> 
> 标签：objective-c, annotations, mkmapview

我试图在标签（位于 TableViewController 上）中显示从用户当前位置到其他地图视图注释（从我的 MapViewController 中提取）的距离，但由于某种原因，当我通过模拟器运行时，计算出的距离标签显示为 0.0000 ? 即使在我自定义了我的“当前位置”之后。关于为什么的任何想法？

**MapViewController.h**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MapViewController : UIViewController  <MKMapViewDelegate> 

    @property (nonatomic, strong) IBOutlet MKMapView *mapView;
    @property (nonatomic, retain) NSMutableArray *dispensaries;
    @property (nonatomic, retain) NSMutableData *data;

@end 
```

**MapViewController.m**

```
[super viewDidUnload];

        NSLog(@"Getting Device Locations");

        NSString *hostStr = @"http://stylerepublicmagazine.com/dispensaries.php";
        NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:hostStr]];
        NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
        NSLog(@"server output: %@", serverOutput);
        NSMutableArray *array = [[[serverOutput objectFromJSONString] mutableCopy] autorelease];   
        dispensaries = [serverOutput objectFromJSONString];
        NSLog(@"%@", [serverOutput objectFromJSONString]);
        for (NSDictionary *dictionary in array) {
            assert([dictionary respondsToSelector:@selector(objectForKey:)]);

            CLLocationCoordinate2D coord = {[[dictionary objectForKey:@"lat"] doubleValue], [[dictionary objectForKey:@"lng"] doubleValue]};

            MapViewAnnotation *ann = [[MapViewAnnotation alloc] init];
            ann.title = [dictionary objectForKey:@"Name"];
            ann.subtitle = [dictionary objectForKey:@"Address1"];
            ann.coordinate = coord;
            [mapView addAnnotation:ann];

    [mapView setMapType:MKMapTypeStandard];
    [mapView setZoomEnabled:YES];
    [mapView setScrollEnabled:YES];

    self.mapView.delegate = self;

}

}

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation

{
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(userLocation.coordinate, 2000, 2000);
    [self.mapView setRegion:[self.mapView regionThatFits:region] animated:YES];

MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
point.coordinate = userLocation.coordinate;
point.title = @"You Are Here";
point.subtitle = @"Your current location";

[self.mapView addAnnotation:point];

}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    for (MapViewAnnotation *annotation in self.mapView.annotations) {
        CLLocationCoordinate2D coord = [annotation coordinate];
        CLLocation *userLocation = [[CLLocation alloc] initWithLatitude:coord.latitude longitude:coord.longitude];
        annotation.distance = [newLocation distanceFromLocation:userLocation];
        CLLocationDistance calculatedDistance = [userLocation distanceFromLocation:userLocation];
        annotation.distance = calculatedDistance;
    }

    NSArray *sortedArray;
    sortedArray = [self.mapView.annotations sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
        NSNumber *first = [NSNumber numberWithDouble:[(MapViewAnnotation*)a distance]];
        NSNumber *second = [NSNumber numberWithDouble:[(MapViewAnnotation*)b distance]];
        return [first compare:second];
    }];

} 
```

**表视图控制器.h**

```
#import <UIKit/UIKit.h>

#import "MapViewController.h"

@interface TableViewController : UITableViewController {

    IBOutlet UITableView *DispensaryTableView;

    NSArray *dispensaries;
    NSMutableData *data;

}

@property CLLocationDistance calculatedDistance;

@end 
```

**表视图控制器.m**

```
 [super viewDidLoad];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    NSURL *url = [NSURL URLWithString:@"http://stylerepublicmagazine.com/dispensaries.php"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    data = [[NSMutableData alloc] init];

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    [data appendData:theData];

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection

{

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    dispensaries = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
    [DispensaryTableView reloadData];

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    UIAlertView *errorView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"The download could not complete - please make sure that you're connected to 3G or Wi-Fi." delegate:nil
                                              cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [errorView show];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

}
- (int)numberOfSectionsInTableView: (UITableView *)tableview

{
    return 1;

}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [dispensaries count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
    static NSString *DispensaryTableIdentifier = @"DispensaryCell";

    DispensaryCell *cell = (DispensaryCell *)[tableView dequeueReusableCellWithIdentifier:DispensaryTableIdentifier];
    if (cell == nil) 

    {

        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"DispensaryCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    } 

    cell.nameLabel.text = [[dispensaries objectAtIndex:indexPath.row] objectForKey:@"Name"];
   cell.distanceLabel.text = [NSString stringWithFormat:@"%f", calculatedDistance]; 

           return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:20:21.747

似乎这一行：

```
 CLLocationDistance calculatedDistance = [userLocation distanceFromLocation:userLocation]; 
```

计算到自身的距离？

它之前的行似乎正确地计算了注释距离，但是你在之后的行中覆盖它......

# c# - 为什么 catch 块中的“throw”和“throw ex”的行为方式相同？

> ID：14680084
> 
> 赞同：13
> 
> 时间：2013-02-04T03:50:12.637
> 
> 标签：c#

我读到，在 catch 块中，我可以使用“throw;”重新抛出当前异常；或“扔前;”。

来自：http: [//msdn.microsoft.com/en-us/library/ms182363%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms182363%28VS.80%29.aspx)

“要保留原始堆栈跟踪信息与异常，请使用 throw 语句而不指定异常。”

但是当我尝试这个时

```
 try{
            try{
                try{
                    throw new Exception("test"); // 13
                }catch (Exception ex1){
                    Console.WriteLine(ex1.ToString());
                    throw; // 16
                }
            }catch (Exception ex2){
                Console.WriteLine(ex2.ToString()); // expected same stack trace
                throw ex2; // 20
            }
        }catch (Exception ex3){
            Console.WriteLine(ex3.ToString());
        } 
```

我得到三个不同的堆栈。我期待第一个和第二个跟踪是相同的。我究竟做错了什么？（或理解错误？）

System.Exception：在 c:\Program.cs:line 13 中的 ConsoleApplication1.Program.Main(String[] args) 处进行测试 System.Exception：在 c:\Program 中的 ConsoleApplication1.Program.Main(String[] args) 处进行测试。 cs:line 16 System.Exception: 在 c:\Program.cs:line 20 中的 ConsoleApplication1.Program.Main(String[] args) 测试

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T04:04:46.800

`throw`如果您不从当前堆栈框架中抛出它，则只会保留堆栈框架。您正在通过一种方法完成所有这些操作来做到这一点。

看到这个答案：[https ://stackoverflow.com/a/5154318/1517578](https://stackoverflow.com/a/5154318/1517578)

PS：+1 用于提出实际上是有效问题的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T04:10:29.483

Simon beat me to answering, but you can see the expected behaviour simply by throwing the original exception from inside another function:

```
static void Main(string[] args)
{
    try
    {
        try
        {
            try
            {
                Foo();
            }
            catch (Exception ex1)
            {
                Console.WriteLine(ex1.ToString());
                throw;
            }
        }
        catch (Exception ex2)
        {
            Console.WriteLine(ex2.ToString()); // expected same stack trace
            throw ex2;
        }
    }
    catch (Exception ex3)
    {
        Console.WriteLine(ex3.ToString());
    }
}

static void Foo()
{
    throw new Exception("Test2");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T03:11:27.007

好吧，我在这个问题上挖掘了更多，这是我非常个人的结论：

> 永远不要使用“投掷”；但总是以指定的原因重新抛出一个新的异常。

这是我的推理：

我受到我之前使用 Java 的经验的影响，并期望 C# throw 与 Java 非常相似。好吧，我对这个问题进行了更多研究，以下是我的观察：

```
 static void Main(string[] args){
        try {
            try {
                throw new Exception("test"); // 13
            }
            catch (Exception ex) {
                Console.WriteLine(ex.ToString());
                throw ex;// 17
            }
        } catch (Exception ex) {
            Console.WriteLine(ex.ToString());
        }
    } 
```

产量：

```
System.Exception: test
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 13
System.Exception: test
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 17 
```

直观地说，Java 程序员会期望这两个异常是相同的：

```
System.Exception: test
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 13 
```

但是 C# 文档清楚地表明这是可以预期的：

“如果通过在 throw 语句中指定异常重新引发异常，则堆栈跟踪将在当前方法处重新启动，并且引发异常的原始方法与当前方法之间的方法调用列表将丢失。要将原始堆栈跟踪信息与异常一起保留，请使用 throw 语句而不指定异常。”</p>

现在，如果我稍微改变了测试（替换 throw ex; by throw; 在第 17 行）。

```
 try {
            try {
                throw new Exception("test"); // 13
            }
            catch (Exception ex) {
                Console.WriteLine(ex.ToString());
                throw;// 17
            }
        } catch (Exception ex) {
            Console.WriteLine(ex.ToString());
        } 
```

产量：

```
System.Exception: test
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 13
System.Exception: test
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 17 
```

显然这不是我所期望的（因为这是最初的问题）。我在第二个堆栈跟踪中丢失了原始抛出点。西蒙怀特黑德将解释联系起来，即投掷；仅当当前方法中未发生异常时才保留堆栈跟踪。所以在同一个方法中不带参数的“抛出”是没有用的，因为一般来说，它不会帮助你找到异常的原因。

做任何 Java 程序员都会做的事情，我将第 17 行的语句替换为：

```
throw new Exception("rethrow", ex);// 17 
```

产量：

```
System.Exception: test
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 13

System.Exception: rethrow ---> System.Exception: test
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 13
  --- End of inner exception stack trace ---
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 17 
```

这是一个更好的结果。

然后，我开始使用方法调用进行测试。

```
 private static void throwIt() {
        throw new Exception("Test"); // 10
    }

    private static void rethrow(){
        try{
            throwIt(); // 15
        } catch (Exception ex) {
            Console.WriteLine(ex.ToString());
            throw; // 18
        }
    }

    static void Main(string[] args){
        try{
            rethrow(); // 24
        } catch (Exception ex) {
            Console.WriteLine(ex.ToString());
        }
    } 
```

同样，堆栈跟踪不是我（Java 程序员）所期望的。在 Java 中，两个堆栈都将是相同的，并且三个方法深度如下：

```
java.lang.Exception: Test
    at com.example.Test.throwIt(Test.java:10)
    at com.example.Test.rethrow(Test.java:15)
    at com.example.Test.main(Test.java:24) 
```

第一个堆栈跟踪只有两个方法深度。

```
System.Exception: Test
  at ConsoleApplication1.Program.throwIt() in Program.cs:line 10
  at ConsoleApplication1.Program.rethrow() in Program.cs:line 15 
```

就像堆栈跟踪是作为堆栈展开过程的一部分填充的一样。如果我当时记录堆栈跟踪以调查异常，我可能会丢失重要信息。

第二个堆栈跟踪是三个方法深度，但第 18 行（抛出；）出现在其中。

```
System.Exception: Test
  at ConsoleApplication1.Program.throwIt() in Program.cs:line 10
  at ConsoleApplication1.Program.rethrow() in Program.cs:line 18
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 24 
```

这一观察与之前的观察相似：堆栈跟踪不会保留在当前方法范围内，并且我再次丢失了发生异常的调用方法。例如，如果 rethow 写成：

```
private static void rethrow(){
    try{
        if (test) 
            throwIt(); // 15
        else 
            throwIt(); // 17
    } catch (Exception ex) {
        Console.WriteLine(ex.ToString());
        throw; // 20
    }
} 
```

产量

```
System.Exception: Test
  at ConsoleApplication1.Program.throwIt() in Program.cs:line 10
  at ConsoleApplication1.Program.rethrow() in Program.cs:line 20
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 26 
```

哪个 throwIt() 调用引发了异常？Stack 说第 20 行，那么它是第 15 行还是第 17 行？

解决方案与上一个相同：将原因包装在一个新的异常中，该异常产生：

```
System.Exception: rethrow ---> System.Exception: Test
  at ConsoleApplication1.Program.throwIt() in Program.cs:line 10
  at ConsoleApplication1.Program.rethrow(Boolean test) in Program.cs:line 17
  --- End of inner exception stack trace ---
  at ConsoleApplication1.Program.rethrow(Boolean test) in Program.cs:line 20
  at ConsoleApplication1.Program.Main(String[] args) in Program.cs:line 26 
```

我对这一切的简单结论是永远不要使用“投掷”；但总是重新抛出具有指定原因的新异常。

# winrt-xaml - 如何在基本页面中的默认 xaml 下方添加控件？

> ID：14680088
> 
> 赞同：0
> 
> 时间：2013-02-04T03:50:48.773
> 
> 标签：winrt-xaml, windows-store-apps, grid-layout

为简单起见，去掉了 VisualStateManager 代码，Windows 8 应用程序中基本页面的 XAML 如下所示：

```
<!-- Back button and page title -->
<Grid> //row 0 by default
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
    <TextBlock x:Name="pageTitle" Grid.Column="1" Text="Account Basic Info" Style="{StaticResource PageHeaderTextStyle}"/>
</Grid> 
```

// 省略了 VisualStateManager 盛会

所以我读它的方式是我在一个网格中有一个网格，内部网格在第一个网格的第 0 行；内部网格将两列添加到它所在的第一行，然后在第 1 列放置一个按钮（默认在第 0 列）和一个文本块。

我想向页面添加更多控件，但到目前为止我所有的尝试/实验都失败了（将行添加到外部网格，然后将行添加到内部网格）。添加另一个内部网格（在第一个内部网格内）似乎有点荒谬。实现这一目标的标准方法是什么（或“一种”方式，无论如何）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:24:27.410

正如您所指出的，您可以在零行网格之后添加另一个网格（或 StackPanel）：

```
<Grid Grid.Row="1">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Button x:Name="backButton2" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
    <TextBlock x:Name="pageTitle2" Grid.Column="1" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
</Grid> 
```

另一种方法是在第一个网格中定义更多行：

```
<Grid.RowDefinitions>
    <!-- notice there are 4 rows now -->
    <RowDefinition Height="140"/>
    <RowDefinition Height="140"/>
    <RowDefinition Height="140"/>
    <RowDefinition Height="*"/>
</Grid.RowDefinitions>

<!-- Back button and page title -->
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
    <TextBlock x:Name="pageTitle" Grid.Column="1" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
</Grid>

<!-- My controls are placed in explict rows using Grid.Row -->
<Button x:Name="backButton2" Grid.Row="1" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
<TextBlock x:Name="pageTitle2" Grid.Row="2" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
<Button x:Name="backButton3" Grid.Row="3" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/> 
```

# visual-studio-2010 - 无法加载文件或程序集“项目名称”或其依赖项之一

> ID：14680093
> 
> 赞同：3
> 
> 时间：2013-02-04T03:51:33.563
> 
> 标签：visual-studio-2010, visual-studio

我正在使用 Visual Studio Ultimate 2010 制作一个 Windows 应用程序项目。

最近，当我打开我的项目时，会显示此消息：

> 尝试运行项目时出错：无法加载文件或程序集“项目名称”或其依赖项之一。该模块应包含程序集清单。

我已从计算机中删除 Visual Studio 2010 并重新安装；我什至重新安装了我的操作系统，但仍然显示此错误消息。

我没有对我的项目做任何事情。我需要解决方案，我一直在谷歌搜索，但仍然找不到解决方案。

# ios - 在 UITextView 的委托 textView:shouldChangeTextInRange:replacementText: 中调用 stringByReplacingCharactersInRange 是否安全？

> ID：14680097
> 
> 赞同：0
> 
> 时间：2013-02-04T03:52:07.057
> 
> 标签：ios, ios4, nsstring, uitextview, uitextviewdelegate

我基于 UITextView 实现了一个自定义的 textview，试图监听文本更改事件。所以我实现了 UITextView 的委托：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    //It crashes!
    NSString *result = [textView.text stringByReplacingCharactersInRange:range withString:text];

    return YES;
} 
```

在 iOS 5 和 iOS 6 中，上面的代码可以正常工作。但在 iOS 4.3 中，它会崩溃并出现异常`***-[NSCFString replaceCharactersInRange:withString:]: Range or index out of bounds`。我打印了在 iOS 4.3 中找到的所有变量值，有时范围确实超出了范围：`textView.text.length`是 111，但`range`is `113,0`. 我的代码有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:15:41.230

每当在 textview 中进行更改时，都会自动调用此方法，并且非常稳定。我的猜测（正如您在上面的评论中确认的那样）是您必须在代码中手动调用此方法，并提供不正确的范围。

# objective-c - 如何制作不区分大小写的字段。SQLite

> ID：14680098
> 
> 赞同：0
> 
> 时间：2013-02-04T03:52:24.780
> 
> 标签：objective-c, xcode, sqlite

我注意到在我的应用程序中我正在做。当我注册一个用户名（例如“用户名”）并且当我尝试使用“用户名”登录时，它不会让我进入，但当我尝试“用户名”时它会。谁能告诉我如何解决它？这是我的代码。登记：

```
#import "ViewController2.h"

@interface ViewController2 ()

@end

@implementation ViewController2
@synthesize tbPassword,tbRepass,tbUsername;
-(void) createTable: (NSString *) UserTable
      withUserField: (NSString *) UserField
      withPassField: (NSString *) PassField;
{
    char *err;
    NSString *sql = [NSString stringWithFormat:@"CREATE TABLE IF NOT EXISTS '%@' ('%@' " "TEXT PRIMARY KEY, '%@' TEXT);", UserTable, UserField,PassField];
    if (sqlite3_exec(users, [sql UTF8String], NULL, NULL, &err)!=SQLITE_OK) {
        sqlite3_close(users);
        NSAssert(0, @"Could not create table");

    }
    else{
        NSLog(@"table created");
    }
}

-(NSString *) filePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0] stringByAppendingPathComponent:@"users.sql"];
}

-(void) openDB {
    if (sqlite3_open([[self filePath]UTF8String],&users) != SQLITE_OK){
        sqlite3_close(users);
        NSAssert(0, @"Database failed to open");
    }
    else{
        NSLog(@"database opened");
    }
}
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [self openDB];
    [self createTable:@"UserAccount" withUserField:@"Username" withPassField:@"Password"];
    self.tbUsername.delegate=self;
    self.tbPassword.delegate=self;
    self.tbRepass.delegate=self;
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)btnRegister:(id)sender
{
    NSString *select = [NSString stringWithFormat:@"SELECT * FROM UserAccount WHERE Username = '%s'",[tbUsername.text UTF8String]];
    sqlite3_stmt *statement;
    if (sqlite3_prepare(users, [select UTF8String], -1, &statement, nil)==SQLITE_OK)
    {
        if(sqlite3_step(statement)==SQLITE_ROW)
        {

            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Username already exist!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];

        }
        else
        {
           if ([tbUsername.text isEqualToString:@""])
            {

                UIAlertView *alert2 = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Please enter a username." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert2 show];
            }
            else if([tbPassword.text length]==0 || [tbRepass.text length]==0)
            {

                UIAlertView *alert3 = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Please enter a password." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert3 show];
            }
            else if([tbPassword.text length]>0 && [tbRepass.text length]>0)
            {

                if([tbPassword.text isEqualToString:tbRepass.text])
                {
                    NSLog(@"Password Match");
                    NSString *username = tbUsername.text;
                    NSString *pass = tbPassword.text;

                    NSString *sql = [NSString stringWithFormat:@"INSERT INTO UserAccount ('Username','Password') VALUES ('%@','%@')",username,pass];
                    char *err;
                    if (sqlite3_exec(users, [sql UTF8String], NULL, NULL, &err)!=SQLITE_OK)
                    {
                        sqlite3_close(users);
                        NSAssert(0, @"Could not update table)");

                    }
                    else
                    {
                        NSLog(@"table updated");
                        UIAlertView *alert4 = [[UIAlertView alloc]initWithTitle:@"Done" message:@"Account was registered successfully!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                        [alert4 show];
                        ViewController *VC = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewController"];
                        VC.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

                       [self presentViewController:VC animated:YES completion:nil];

                        tbUsername.text = @"";
                        tbPassword.text = @"";

                    }

                }

                else
                {
                    UIAlertView *alert5 = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Password does not match." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                    [alert5 show];
                }
            }
        }
    }
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    [[self tbUsername]resignFirstResponder];
    [[self tbPassword]resignFirstResponder];
    [[self tbRepass]resignFirstResponder];
}
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    return [textField resignFirstResponder];
}
@end 
```

登录：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize tbPassword,tbUsername;
-(void) createTable: (NSString *) UserTable
      withUserField: (NSString *) UserField
      withPassField: (NSString *) PassField;
{
    char *err;
    NSString *sql = [NSString stringWithFormat:@"CREATE TABLE IF NOT EXISTS '%@' ('%@' " "TEXT PRIMARY KEY, '%@' TEXT);", UserTable, UserField,PassField];
    if (sqlite3_exec(users, [sql UTF8String], NULL, NULL, &err)!=SQLITE_OK) {
        sqlite3_close(users);
        NSAssert(0, @"Could not create table");

    }
    else{
        NSLog(@"table created");
    }
}

-(NSString *) filePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0] stringByAppendingPathComponent:@"users.sql"];
}

-(void) openDB {
    if (sqlite3_open([[self filePath]UTF8String],&users) != SQLITE_OK){
        sqlite3_close(users);
        NSAssert(0, @"Database failed to open");
    }
    else{
        NSLog(@"database opened");
    }
}
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [self openDB];
    [self createTable:@"UserAccount" withUserField:@"Username" withPassField:@"Password"];
    self.tbUsername.delegate=self;
    self.tbPassword.delegate=self;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)btnLogin:(id)sender {
    NSString *select = [NSString stringWithFormat:@"SELECT * FROM UserAccount WHERE Username = '%s' and Password = '%s'",[tbUsername.text UTF8String],[tbPassword.text UTF8String]];
    sqlite3_stmt *statement;
    if (sqlite3_prepare(users, [select UTF8String], -1, &statement, nil)==SQLITE_OK)
    {
        if(sqlite3_step(statement)==SQLITE_ROW)
        {
            ViewController3 *VC = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewController3"];
            VC.strUsername = self.tbUsername.text;
            [self presentViewController:VC animated:YES completion:nil];

        }
        else
        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Authentication Failed" message:@"Wrong Username/Password!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        }

    }
}

- (IBAction)btnRegister:(id)sender {
}
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    [[self tbUsername]resignFirstResponder];
    [[self tbPassword]resignFirstResponder];
}
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    return [textField resignFirstResponder];
}
@end 
```

brb 上课了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:09:46.860

Change your query.

```
NSString *select = [NSString stringWithFormat:@"SELECT * FROM UserAccount WHERE Username = '%s' COLLATE NOCASE and Password = '%s'",[tbUsername.text UTF8String],[tbPassword.text UTF8String]]; 
```

I think this will help.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:05:33.330

在登录视图控制器上

第一的

将 username.text {用户使用 UI 添加的用户名} 更改为小写并将其保存在新的 NSString 中

第二

在 SELECT 语句中同时使用原始用户名和更改后的用户名 NSString

注意#您必须在 where 子句中使用“或”

简单的 ：）

# c - 如何使用双指针清除链表？

> ID：14680099
> 
> 赞同：1
> 
> 时间：2013-02-04T03:52:29.037
> 
> 标签：c, pointers, linked-list

`*first`嗨，我正在尝试创建一个函数来清除将指向的链表，然后`**first`应该释放节点并将指针`*first`设置为`NULL`.

我在掌握双指针时遇到了麻烦，无法让它正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:07:42.067

在删除节点*之前*，您必须移动到下一个列表元素。否则，您正在访问已释放的内存。

```
while( *first != NULL )
{
    temp = *first;
    *first = temp->next;
    free(temp);
} 
```

请注意，因为您正在丢弃整个列表，`*first`所以最终将是 NULL。所以你可以使用单指针（就像`temp`）来遍历你的列表，然后`*first = NULL`在最后设置。这节省了额外的指针间接，在这种情况下可以说是浪费 CPU。

**[编辑]**我的意思是：

```
struct node *curr = *first;
struct node *prev;            

while( curr != NULL )
{
    prev = curr;
    curr = curr->next;
    free(prev);
}

*first = NULL; 
```

通常，我发现您进行的指针取消引用越少，代码就越容易一目了然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T20:40:27.127

```
node* remove_node(node **double_pointer,int search_value)
//pass head of your node as a parameter to double pointer
{while(*double_pointer && **(double_pointer).value!=search_value)
{
double_pointer=&((**double_pointer)->next);
}
if(**double_pointer!=null)
{//lines below are to delete the node which contains our search value
node* deleted_node=*double_pointer;
*double_pointer=*double_pointer->next;
return deleted node;
}} 
```

# linux - 从文件中删除控制字符

> ID：14680100
> 
> 赞同：30
> 
> 时间：2013-02-04T03:52:33.603
> 
> 标签：linux

我想使用 linux bash 命令从我的文件中删除所有控制字符。

有一些控制字符，例如 EOF (0x1A)，尤其是当我在另一个软件中加载文件时会导致问题。我想删除这个。

这是我到目前为止所尝试的：

这将列出所有控制字符：

```
cat -v -e -t file.txt | head -n 10

^A+^X$
^A1^X$
^D ^_$
^E-^D$
^E-^S$
^E1^V$
^F%^_$
^F-^D$
^F.^_$
^F/^_$
^F4EZ$
^G%$ 
```

这将使用 grep 列出所有控制字符：

```
$ cat file.txt | head -n 10 | grep '[[:cntrl:]]'
+
1

-
-
1
%
-
.
/ 
```

匹配上述 cat 命令的输出。

现在，我运行以下命令来显示所有不包含控制字符的行，但它仍然显示与上面相同的输出（带有控制字符的行）

```
$ cat file.txt | head -n 10 | grep '[^[:cntrl:]]'
+
1

-
-
1
%
-
.
/ 
```

这是十六进制格式的输出：

```
$ cat file.txt | head -n 10 | grep '[[:cntrl:]]' | od -t x2
0000000 2b01 0a18 3101 0a18 2004 0a1f 2d05 0a04
0000020 2d05 0a13 3105 0a16 2506 0a1f 2d06 0a04
0000040 2e06 0a1f 2f06 0a1f
0000050 
```

如您所见，十六进制值 0x01、0x18 是控制字符。

我尝试使用 tr 命令删除控制字符，但出现错误：

```
$ cat file.txt | tr -d "\r\n" "[:cntrl:]" >> test.txt
tr: extra operand `[:cntrl:]'
Only one string may be given when deleting without squeezing repeats.
Try `tr --help' for more information. 
```

如果我删除所有控制字符，我最终将删除换行符和回车符，它们也用作 Windows 上的换行符。如何删除所有控制字符，只保留“\r\n”等所需的字符？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-03-09T12:25:23.443

而不是使用预定义的`[:cntrl:]`集合，正如您所观察到的那样，它包括`\n`and `\r`，只需列出（八进制）您想要摆脱的控制字符：

```
$ tr -d '\000-\011\013\014\016-\037' < file.txt > newfile.txt 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-09-19T13:52:52.367

基于unix.stackexchange上的[这个答案，这应该可以解决问题：](https://unix.stackexchange.com/a/15866)

```
$ cat scriptfile.raw | col -b > scriptfile.clean 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-12T00:46:25.363

试试`grep`，比如：

```
grep -o "[[:print:][:space:]]*" in.txt > out.txt 
```

它将仅打印字母数字字符，包括标点符号和空格字符，例如制表符、换行符、垂直制表符、换页、回车和空格。

为了减少限制并仅删除[控制字符](http://www.gnu.org/software/grep/manual/html_node/Character-Classes-and-Bracket-Expressions.html)( `[:cntrl:]`)，请通过以下方式删除它们：

```
tr -d "[:cntrl:]" 
```

如果您想保留`\n`（这是 的一部分`[:cntrl:]`），则将其暂时替换为其他内容，例如

```
cat file.txt | tr '\r\n' '\275\276' | tr -d "[:cntrl:]" | tr "\275\276" "\r\n" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-19T11:34:41.073

派对有点晚了：`cat -v <file>` 我认为这是最容易记住的！

# python - 如何从文件中读取并将每个单词附加到字典中？

> ID：14680103
> 
> 赞同：0
> 
> 时间：2013-02-04T03:52:50.360
> 
> 标签：python, file, dictionary

我想要做的是从文件中读取，然后对于每个单词，将其连同其出现次数一起附加到字典中。

例子：

'今天​​是星期日。明天不是星期天。

我的字典会是这样的： {'today': 1, 'is': 2, 'sunday': 2, 'tomorrow': 1, 'not': 1}

我要解决的方法是使用 readline 和 split 创建一个列表，然后将每个元素及其值附加到一个空字典中，但到目前为止它并没有真正起作用。这是我到目前为止所拥有的，虽然它不完整：

```
file = open('any_file,txt', 'r')

for line in file.readline().split():
     for i in range(len(line)):
         new_dict[i] = line.count(i)  # I'm getting an error here as well, saying that  
return new_dict                       # I can't convert int to str implicitly 
```

这样做的问题是，当我的字典在读取每一行时更新时，单词的值不会累积。因此，如果在另一行 'sunday' 出现 3 次，我的字典将包含 {'sunday': 3} 而不是 {'sunday': 5}。有什么帮助吗？我不知道从这里去哪里，而且我对这一切都很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:56:49.410

您正在寻找[`collections.Counter`](http://docs.python.org/3/library/collections.html#collections.Counter).

例如：

```
from itertools import chain

with open("file.txt") as file:
    Counter(chain.from_iterable(line.split() for line in file)) 
```

（也使用[生成器表达式](http://www.youtube.com/watch?v=pShL9DCSIUw)。）[`itertools.chain.from_iterable()`](http://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable)

请注意，您的示例仅适用于第一行，我认为这不是故意的，并且此解决方案适用于整个文件（显然交换它很简单）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:00:47.047

这是一个不处理标点符号的简单版本

```
from collections import Counter
counter = Counter()
with open('any_file,txt', 'r') as file:
    for line in file:
        for word in line.split():
            counter[word] += 1 
```

也可以这样写：

```
from collections import Counter
counter = Counter(word for line in file for word in line.split()) 
```

这是解决问题的一种方法`dict`

```
counter = {}
with open('any_file,txt', 'r') as file:
    for line in file:
        for word in line.split():
            if word not in counter:
                counter[word] = 1
            else:
                counter[word] += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:00:27.240

你使用 Python 3 还是 Python 2.7？

如果是，请使用集合库中的计数器：

```
import re
from collections import Counter
words = re.findall('\w+', open('any_file.txt').read().lower())
Counter(words).most_common(10) 
```

但是你得到了元组列表。将元组列表转换为字典应该很容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T04:07:52.407

尝试这个

```
 file = open('any_file.txt', 'r')
 myDict = {}
 for line in file:
     lineSplit = line.split(" ")
     for x in xrange(len(lineSplit)):
         if lineSplit[x] in myDict.keys(): myDict[lineSplit[x]] += 1
         else: myDict[lineSplit[x]] = 1

 file.close()

 print myDict 
```

# asp.net - 将 Html.LabelFor、EditorFor、ValidationMessageFor 重构为部分视图

> ID：14680106
> 
> 赞同：1
> 
> 时间：2013-02-04T03:53:07.383
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我想重构视图表单代码以避免复制粘贴。但它不起作用。剃刀不允许写

```
@model System.Linq.Expressions.Expression<Func<TModel, TValue>> expression 
```

和

```
@Html.Partial("Item", model => model.EmpName) 
```

旧代码，有效：

```
 <tr>
            <td class="editor-label" style="border: 0;">
                @Html.LabelFor(model=>model.EmpName)
            </td>
            <td class="editor-field" style="border: 0">
                @Html.EditorFor(model=>model.EmpName)
                @Html.ValidationMessageFor(model=>model.EmpName)
            </td>
        </tr>
        <tr>
            <td class="editor-label" style="border: 0;">
                @Html.LabelFor(model=>model.Email)
            </td>
            <td class="editor-field" style="border: 0;">
                @Html.EditorFor(model=>model.Email)
                @Html.ValidationMessageFor(model=>model.Email)
            </td>
        </tr> 
```

重构后不起作用：

项目.cshtml：

```
 @model System.Linq.Expressions.Expression<Func<TModel, TValue>> expression
        <tr>
            <td class="editor-label" style="border: 0;">
                @Html.LabelFor(expression)
            </td>
            <td class="editor-field" style="border: 0">
                @Html.EditorFor(expression)
                @Html.ValidationMessageFor(expression)
            </td>
        </tr>
    } 
```

新代码：

```
 @Html.Partial("Item", model => model.EmpName)
 @Html.Partial("Item", model => model.Email) 
```

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:57:26.223

您可以编写自己的 HtmlHelper 扩展方法，例如：

```
public static MvcHtmlString MyEditFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
{
    var group = new TagBuilder("div");
    group.InnerHtml = html.LabelFor(expression).ToString();
    //more formatting and controls here
    return MvcHtmlString.Create(group.ToString());
} 
```

这将允许您编写：

```
@Html.MyEditFor(m => m.Name) 
```

这种方法的缺点是您将无法内联 HTML，因为这不是视图。但是，它确实允许您设置标准控件布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:18:45.357

找到了解决方案。感谢@Paul。

项目.cshtml：

```
 @model MyClientCustomValidation.Models.LabelEditorValidation 
        <tr>
            <td class="editor-label" style="border: 0;">
                @Model.Label
            </td>
            <td class="editor-field" style="border: 0">
                @Model.Editor
                @Model.Validation
            </td>
        </tr> 
```

其中有型号：

```
public class LabelEditorValidation
{
    public MvcHtmlString Label { get; set; }
    public MvcHtmlString Editor { get; set; }
    public MvcHtmlString Validation { get; set; }     
} 
```

和内部形式：

```
@Html.MyEditFor(model=>model.EmpName)
@Html.MyEditFor(model=>model.Email) 
```

MyEditorFor 在哪里

```
public static MvcHtmlString MyEditFor<TModel, TProperty>(this HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression)
    {
        return html.Partial("Item", new LabelEditorValidation() { Label = html.LabelFor(expression), Editor = html.EditorFor(expression), Validation = html.ValidationMessageFor(expression) });
    } 
```

# javascript - jQuery 检查和取消选中复选框只触发一次

> ID：14680108
> 
> 赞同：10
> 
> 时间：2013-02-04T03:53:23.087
> 
> 标签：javascript, jquery, checkbox

我对我的 jQuery 有一个非常简单的要求：如果选中一个单选按钮，则选中一组框，如果选中另一个，则将它们全部清除。

jquery 工作，但它只工作一次 - 也就是说，如果我单击以检查它们（所有框都选中），然后单击以清除它们（所有框都清除），然后再次单击以检查它们 - 没有效果。同样，如果我手动取消选中某些框，然后单击以再次全选，则没有效果。

**jQuery**

```
$('#all').on('change', function() {
    if (!$(this).is(':checked')) {
        $('.country').attr('checked', false);   
    } else {
        $('.country').attr('checked', true);
    }
});

$('#none').on('change', function() {
    if (!$(this).is(':checked')) {
        $('.country').attr('checked', true);    
    } else {
        $('.country').attr('checked', false);
    }
}); 
```

**HTML**

```
 <div class="subselect">
    <input type="radio" class="TLO" name="radio1" id="all" />Check All
<br />
        <input type="radio" class="TLO" name="radio1" id="none" />Clear All
        <br />
    </div>

    <br />
    <br />
    <div class="cselect" id="countries">
        <input type="checkbox" class="country"  />1
        <br />
        <input type="checkbox" class="country"  />2
        <br />
        <input type="checkbox" class="country"  />3
    </div> 
```

**jsFiddle** [http://jsfiddle.net/vsGtF/1/](http://jsfiddle.net/vsGtF/1/)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-04T03:56:12.657

将您的更改`.attr()`为`.prop()`.

```
$('#all').on('change', function() {
    if (!$(this).is(':checked')) {
        $('.country').prop('checked', false);   
    } else {
        $('.country').prop('checked', true);
    }
});    
$('#none').on('change', function() {
    if (!$(this).is(':checked')) {
        $('.country').prop('checked', true);    
    } else {
        $('.country').prop('checked', false);
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/vsGtF/3/)**

您也可以将其简化为：

```
$('#all').on('change', function () {
    $('.country').prop('checked', $(this).is(':checked'));
});
$('#none').on('change', function () {
    $('.country').prop('checked', !$(this).is(':checked'));
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/vsGtF/2/)**

作为[.attr()](http://api.jquery.com/attr/)状态的文档：

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。**要检索和更改 DOM 属性，例如表单元素的选中、选择或禁用状态，请使用 .prop() 方法。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-03T16:24:31.013

我知道这在这里被骗了很多，但我确实错过了一些东西，我有：

```
id = $(this).attr('id');
if($('#checkbox_' + id).prop('checked')){
    $('#checkbox_' + id).attr('checked', false);
} else {
    $('#checkbox_' + id).attr('checked', true);
} 
```

如上所述，**所有**attr 情况都需要交换 prop()

```
if($('#checkbox_' + id).prop('checked')){
    $('#checkbox_' + id).prop('checked', false);
} else {
    $('#checkbox_' + id).prop('checked', true);
} 
```

希望对某人有所帮助...

# javascript - 在选择表单上获取检查项目 - Javascript

> ID：14680113
> 
> 赞同：0
> 
> 时间：2013-02-04T03:53:58.897
> 
> 标签：javascript, jquery, forms, select

我正在学习 javascript，我有这个功能：

```
 function getRadioCity() {
    for (index=0; index < document.form_data2.ciudades.length; index++) {
        if (document.form_data2.ciudades[index].checked) {
            var radioValue =form_data2.ciudades[index].value;
             return parseInt(radioValue);
        }
    }
} 
```

该功能工作正常，但如果我有一个选择表单而不是收音机怎么办？

例如：

```
<div id="content" style="display:none;">
<form name="form_data2" id="form_data2"> <br>

<select name="ciudades" id="ciudades">
<option value="33">Armenia</option>
<option value="34">Cartagena</option>
</select>
 <input value="Enviar" id="btn_enviar" href="javascript:toggle() </input> <br /> <br />         <label id=" mensaje2="" type="button"> </form>
  <div id="resultado2"></div>
   </div> 
```

在此先感谢您的帮助。生病尝试了同样的事情，但没有工作..

编辑：

我试图做这样的事情：

```
 $(document).ready(function(){
 $('#btn_enviar').click(function(){

  if( validaSelect( 'ciudades','ciudades' ) == false) return false;

    $.ajax({
        type:'POST',
        url :'upload2.php',
        data: $('#form_data2').serialize(),
        beforeSend : function(){
            $('#mensaje2').html('Enviando datos...');
        },
        success: function (data){
                $('#mensaje2').html('Datos enviados correctamente.');
                $('#resultado2').html(data);    
        },
        complete: function(){
             $('#form_data2').slideUp();
             $('#resultado2').slideDown();
              $('#content2').show();
              $('#flecha2').show();
             var num2 = getRadioCity();
        if (num2==1){
             $('#armenia').show();

        } 
         if (num2==2){
             $('#cartagena').show();
             alert("cartagena");

        } 

        }
    });

}); 

       }); 
```

基本上根据选择获得值并显示一个div或其他

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:06:17.010

您可以访问`select`using的值`selectedIndex`。

```
document.getElementById("ciudades").onchange = function() {
    alert(this.selectedIndex);
} 
```

每个选项都有自己的编号来标识自己。在`select`元素的情况下，第一个选项的 a`selectedIndex`为 0，第二个选项的 a`selectedIndex`为 1，依此类推。从这里你可以知道哪个`option`被选中。

见[演示](http://jsfiddle.net/pnkx6/)。

尝试这个：

```
var num2 = document.getElementById("ciudades").selectedIndex;
if (num2==0){
     $('#armenia').show();
} 
if (num2==1){
     $('#cartagena').show();
     alert("cartagena");
} 
```

# codeigniter-2 - PyroCMS 中的 ADDON 或 SHARED_ADDON 路径

> ID：14680115
> 
> 赞同：0
> 
> 时间：2013-02-04T03:54:25.573
> 
> 标签：codeigniter-2, pyrocms

我正在为 PyroCMS 编写一个模块，

我需要获取已安装的模块的目录，以便可以在浏览器上加载图像。

该图像存储在我的模块中的库文件夹下。

我想做类似的事情

```
$logo =  $this->get_addon_path(). '/libraries/myfile.png'; 
```

哪个应该返回这些值中的任何一个

```
www.mysite.com/addons/mysite/modules/mymodule/libraries/myfile.png
www.mysite.com/shared_addons/modules/mymodule/libraries/myfile.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:39:49.297

我设法在另一个程序的代码中找到了这个解决方案，我认为 id 共享它。

```
$this->module_details['path'] 
```

对我来说，我只需要像这样把它包起来

```
base_url() . $this->module_details['path'].'/libraries/gateways/'.$image_name; 
```

哪个返回

```
www.mysite.com/addons/mysite/modules/mymodule/libraries/gateways/myfile.png 
```

# c - 如何为结构中的 typedef 分配内存 (C)

> ID：14680116
> 
> 赞同：1
> 
> 时间：2013-02-04T03:54:25.513
> 
> 标签：c, typedef

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)

当您在 C 中创建结构时，例如：

```
typedef struct student
{

int roll_no;
char* name;
int* pointer;

}student; 
```

我注意到 roll_no 和 name 没有连续存储在内存中。这是如何运作的？如果目标是封装这些数据，那么将它们连续存储不是更好吗？编译器如何知道这些数据属于一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:58:54.153

编译器对齐结构的每个元素的开头以匹配体系结构的要求。这通常意味着对齐在单词边界上，但没有硬性规定。

typedef 对对齐没有影响——它只是为某个对象创建一个“速记引用”，可能就像一个结构。您可以将 typedef 视为同义词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:00:07.753

`name`确实没有与`struct`: 一起存储，只存储了一个指向*它*的指针。数据通常在其`struct`自身之外的区域中动态分配。

要将名称与您一起存储，`struct`您需要将其设为数组。这种方法的缺点是字符串必须是固定长度的（即所有`struct`s 将分配足够的内存量以用于`name`最大长度的 a ，或者您需要通过`name[]`在`struct`.最后一种方法的缺点是（1）分配变得更加复杂，（2）你不能制作这样的数组`struct`，以及（3）你可以在一个结构中只有一个灵活的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:59:52.080

它们是连续存储的。只是 char *name 中包含的地址在其他地方。要在内存中连续存储，请使用数组而不是指针。

这就是它在内存中的存储方式，例如，struct 的地址从 1000（十进制）开始。

```
1000 roll_no
1004 name
1008 pointer 
```

name 和 pointer 是指针，因此它们将保存 malloc 分配的值（地址）。

```
s->name = malloc(100);
s->pointer = malloc(4); 
```

在这种情况下，没有结构填充，因为所有都是整数（甚至指针也是），这意味着它们是体系结构寄存器大小的大小（通常是 32 或 64 位）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T04:00:57.080

数据是连续存储的，但是由于优化和对齐字边界，可能存在整体。对齐方式取决于您运行的处理器和选择的编译器选项。（包装）

编译器将计算结构的偏移量，因此它可以查找内存以获取结构的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T04:16:18.417

实际上在*结构中*

```
struct student
{
  int roll_no;
  char* name;
  int* pointer;
} 
```

C 完全符合您的要求（除了“结构填充”，但这是另一回事）。假设`gcc`在英特尔处理器上，结构由

*   的 4 个字节`int`，后跟
*   4 字节`char *`指向*name*的指针，后跟
*   4字节的`int *`指针*指针*

*name*成员是指向 char(s)的指针，通常是指向内存某处的字符串的指针。例如

```
char *string = "John Doe";
int value = 255;
struct student me;

me.roll_no = 15;
me.name = string;
me.pointer = &value; 
```

这里的*字符串*在内存中的某个地方——正如你注意到的，它是在结构之前声明的。假设它的内存位置是`0x12345678`，*值*是在`0x20000000`，结构是在 0x22222222 所以我们有

```
0x12345678 : John Doe\0
...
0x20000000 : FF000000  // 255
...
0x22222222 : 0F0000001234567820000000 
```

您会看到结构是`0F000000`for `15`，`12345678`用于*字符串*地址和`20000000`用于*值*地址。

# facebook - 如何将 FB iOS SDK 3.1.1 与 App Requests 集成

> ID：14680118
> 
> 赞同：5
> 
> 时间：2013-02-04T03:54:44.157
> 
> 标签：facebook, ios6, facebook-ios-sdk, facebook-app-requests

我一直在寻找一个可靠的答案来解释如何在我的项目中保留 3.1.1 以及实现应用程序请求对话框。我读到的内容说我需要导入 Facebook.h 并调用它，`[self.facebook dialog:@"apprequests" andParams:params andDelegate:self];`但是当我导入 Facebook.h 并注释掉时，`#import <FacebookSDK/FacebookSDK.h>`我会与

```
[FBSession openActiveSessionWithReadPermissions:nil
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }]; 
```

有人可以指导我如何维护我的 3.1.1 SDK 并添加 apprequests 吗？我的目标是选择 FB 用户，然后发送应用请求以加入我的应用。

谢谢，

韦斯

# javascript - 在文本输入中滑动文本

> ID：14680119
> 
> 赞同：1
> 
> 时间：2013-02-04T03:55:29.567
> 
> 标签：javascript, jquery

在用户输入一定数量的字符后，有什么方法可以使某些文本向左滑动并在文本输入中消失。例如，当用户在输入第 16 个数字后输入他们的信用卡号时，数字会在输入字段中向左滑动，并且只有数字的最后 4 位可见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:22:05.120

这里没有动画，但如果您需要，我当然可以帮助添加。

现场演示：http: [//jsfiddle.net/7TVxC/1/](http://jsfiddle.net/7TVxC/1/)

在删除其他字符后，首先设置一个变量来保存输入。

`var ccNum;`

然后让你的函数检查输入长度是否为 16，将输入保存到变量中。然后我们去掉前 12 个字符，只留下最后 4 个。

然后我们关闭输入，这样他们就不会认为这是一个错误。（您可能可以进行设置，以便他们仍然可以删除字符，然后将输入恢复正常，显示除他们删除的字符之外的所有字符。）

```
$('input').keyup(function(e){
    if($(this).val().length == 16){
        ccNum = $(this).val();
        $(this).val($(this).val().substr(12));
        $(this).prop('disabled', true);
    }
}) 
```

或者，您可以做一些 css hackery 并在`if`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:00:58.477

这是可能的，但它涉及很多工作。

**1** . 设置输入及其样式，如下所示：http: [//jsfiddle.net/FMmvV/](http://jsfiddle.net/FMmvV/)

设置每当有人输入输入时触发的 jQuery 事件。然后，当输入有 16 个字符时做一些事情。

**2** . 困难的部分是：要获得流畅、流畅的动画，您需要通过`text-indent`属性为输入内的文本设置动画。由于它要求提供像素数，因此您还需要计算前 12 个字符的确切宽度，以便您可以将文本正确偏移正确的数量。

这个问题可能有一些关于如何在不知道字体系列或字体大小的情况下计算文本宽度的相关信息： [https ://stackoverflow.com/a/3395975/1718121](https://stackoverflow.com/a/3395975/1718121)

**3** . 之后通过删除文本缩进和前 12 个字符进行清理，添加一些允许用户重置输入并重新输入其他内容的功能。

# c# - 如何在控制台 C# 中清除以前的数据？

> ID：14680120
> 
> 赞同：2
> 
> 时间：2013-02-04T03:55:33.880
> 
> 标签：c#, stack, console-application

如果有人可以提供帮助，我将不胜感激。

我在控制台中显示堆栈内的所有驱动器：

```
public void ShowDrives()
    { 
        foreach (FileSystemInfo f in stack)
            Console.WriteLine(f);
    }

Output:
C:\
E:\ 
```

现在，当我按下左箭头键时，我调用另一个方法，它显示特定驱动器内的目录，并将这些数据写入同一个堆栈

```
 public void ShowFiles(DirectoryInfo dif)
    {
            stack.Clear();
            foreach (FileSystemInfo f in dif.GetFileSystemInfos())
            {...} //show all files and directories and Write all inside the stack
     } 
```

但是我之前的驱动器输出保留在控制台中，我需要以某种方式将其删除，并显示堆栈的新数据。

```
Output:
C:\
E:\
C:\file1.doc
C:\folder
 etc... 
```

我只需要得到

```
C:\file1.doc
C:\folder
 etc... 
```

不允许使用`Console.Clear()` ，如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:57:23.677

您是否希望完全清除控制台？

```
Console.Clear(); 
```

...或者您是否只想覆盖某些行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:34:10.613

您可以使用 或 将光标移动到需要的行`Console.SetCursorPosition`并简单地覆盖该行的`Console.Write`内容`Console.WriteLine`。

但是你应该记住，如果前一个输出的行数更多，或者前一个输出的某些行比后一个输出的相应行长，你可能会留下前一个输出......

我唯一可以建议的是记住所有这些长度并用空格覆盖这些垃圾：

```
string oldoutput = "123";
Console.Write(oldoutput);
Console.ReadLine();

string newoutput = "!";
Console.SetCursorPosition(0, Console.CursorTop - 1);
Console.Write(newoutput);

int delta = oldoutput.Length - newoutput.Length;
if (delta > 0)
{
    for (int i = 0; i < delta; i++)
        Console.Write(" ");
}

Console.ReadLine(); 
```

# php - 在 scandir 数组中包含 JUST 文件？

> ID：14680121
> 
> 赞同：28
> 
> 时间：2013-02-04T03:55:38.553
> 
> 标签：php, scandir

我有一个从scandir返回的数组，但它包含`"."`并且`".."`我不希望它包含。

我的代码：

```
$indir = scandir('../pages');
$fileextensions = array(".", "php", "html", "htm", "shtml");
$replaceextensions = str_replace($fileextensions, "", $indir); 
```

我正在对文件扩展名进行字符串替换，从而导致 [0] 和 [1] 显示为空，但它们是`"."`并且`".."`

```
array(4) {
[0]=>
string(0) ""
[1]=>
string(0) ""
[2]=>
string(4) "test"
[3]=>
string(4) "home"
} 
```

我将如何从数组中删除`"."`and ？`".."`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-04T04:00:38.783

您可以使用[array_filter](http://php.net/manual/en/function.array-filter.php)。

```
$indir = array_filter(scandir('../pages'), function($item) {
    return !is_dir('../pages/' . $item);
}); 
```

请注意，这会过滤掉所有目录，只留下文件和符号链接。如果您真的只想排除以 开头的文件（和目录）`.`，那么您可以执行以下操作：

```
$indir = array_filter(scandir('../pages'), function($item) {
    return $item[0] !== '.';
}); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-02-28T14:21:49.053

在scandir中删除点作为文件的最快方法

```
$files = array_slice(scandir('/path/to/directory/'), 2); 
```

来自[PHP 手册](http://php.net/manual/en/function.scandir.php)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-04T04:00:17.287

`array_diff`会做你正在寻找的东西：

```
$indir = scandir('../pages');
$fileextensions = array(".", "php", "html", "htm", "shtml");
$indir = array_diff($indir, array('.', '..'));
$replaceextensions = str_replace($fileextensions, "", $indir); 
```

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-10T15:03:15.613

我知道 erknrio 对此提供了答案，但这是一种更简洁的方法来获取没有目录的文件数组（修改为更有效）：

```
$dirPath = 'dashboard';

$dir = scandir($dirPath);

foreach($dir as $index => &$item)
{
    if(is_dir($dirPath. '/' . $item))
    {
        unset($dir[$index]);
    }
}

$dir = array_values($dir); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-09T13:14:37.640

您可以使用此代码段。它只返回目录中的文件：

```
function only_files($dir_element) {
    if (!is_dir($dir_element)) {
        return $dir_element;
    }
}

function givemefiles($dir) {
    $scanned_dir = scandir($dir);
    return array_filter($scanned_dir, "only_files");
}

$dir_path = '../pages';

givemefiles($dir_path);
echo "<pre>";
var_dump($scanned_dir);
echo "</pre>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-22T06:01:49.660

只需使用 preg_replace 从目录中删除所有类型的隐藏文件

```
$files = array(".", "..", "html", ".~html", "shtml");    
$newfiles = preg_grep('/^([^.])/', scandir($files)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-14T10:27:15.370

如果你需要一个干净的功能；

```
function getFiles($dir){
    return array_values(array_filter(scandir($dir), function($file){
        global $dir;
        return !is_dir("{$dir}/{$file}");
    }));
} 
```

我认为这个功能既简洁又很好用。此外，此函数中返回数组的键已正确排序。

# mysql - 如何使用字母和数字自动增加 ID 编号

> ID：14680122
> 
> 赞同：2
> 
> 时间：2013-02-04T03:55:50.207
> 
> 标签：mysql, sql, phpmyadmin

如何使用字母和数字自动增加 ID 号，例如“KP-0001”它将增加到“KP-0002”

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T04:01:58.523

这是一篇有用的文章

*   [使用一串数字和字母自动递增](https://stackoverflow.com/questions/1835309/auto-increment-with-a-string-of-numbers-and-letters)

但基本上我鼓励您在此基础上创建自己的算法。`BEFORE INSERT`您可以在触发器中添加该算法。或者您可以在前端执行此操作。

算法的伪代码示例

*   获取 lastID [ *KP-0001* ]
*   删除一些字符并将其放入变量 [ *KP-* ]
*   将剩余的转换为数字，因为它是一个字符串 [ *0001* ]
*   增加 1 [ *1 + 1 = 2* ]
*   将其转换回字符串并在右侧填充零 [ *0002* ]
*   连接变量和新增加的数字 [ *KP-0002* ]
*   保存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-11T05:53:49.523

我试图以多种方式做到这一点，但无法找到解决方案......我也使用了触发器，但这也没有帮助我......

但我找到了一个快速的解决方案......

例如，您希望您的员工拥有员工代码“emp101”、“emp102”等。这也是自动增量...

首先创建一个包含三个字段的表，第一个字段包含您想要在开头的字母，即“emp”，第二个字段包含自动递增的数字，即 101,102 等，第三个字段包含两个字段，即' emp101'，'emp102'，...等。

```
CREATE TABLE employee
(
empstr varchar( 5 ) default 'emp',
empno int( 5 ) AUTO_INCREMENT PRIMARY KEY ,
empcode varchar( 10 )
); 
```

现在为 empno 提供一个 auto_increment 值。

```
ALTER TABLE employee AUTO_INCREMENT=101; 
```

现在进入主题...每次插入值时，都必须连接前两个字段以获取第三个字段的值

```
INSERT INTO employee( empcode )
VALUES ('xyz');
UPDATE employee SET empcode = concat( empstr, empno ) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T04:00:52.323

您不能自动增加 varchar 数据类型。另一种方法是将 varchar 列分成两个不同的`KP-`列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T03:58:45.713

自动增量是一个整数，因此无法添加文本。

查看[**此**](https://stackoverflow.com/questions/9648253/automatically-add-letters-in-front-of-an-auto-increment-fieild)问题以获取其他参考资料。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-18T08:57:29.783

```

创建表客户（
        CUSId INT NOT NULL IDENTITY(1, 1) 主键
        ,CUSKey AS 'Cus' + RIGHT('000' + CONVERT(VARCHAR(5), CUSId), 6) 持续
        ,CusName VARCHAR(50)
        ,mobileno INT
        ,性别 VARCHAR(10)
        )

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-31T01:39:28.247

制作一个程序，在我的例子中是 MySQL。

```
CREATE PROCEDURE MOSTRAR_CODIGO_CLASE_PRODUCTO()
BEGIN
    declare max varchar(10);
    declare num int;
    declare CCodigo varchar(10);

    set max = (select MAX(Codigo_CP) from CLASE_PRODUCTO);
    set num = (SELECT LTRIM(RIGHT(max,4)));
    if num>=1 and num <=8 then
        set num = num + 1;
        set CCodigo = (select concat('CP000'  ,  CAST(num as CHAR)));
    elseif num>=9 and num <=98 then
        set num = num + 1;
        set CCodigo = (select concat('CP00'  ,  CAST(num as CHAR)));
    elseif num>=99 and num <=998 then
        set num = num + 1;
        set CCodigo = (select concat('CP0'  ,  CAST(num as CHAR)));
    elseif num>=999 and num <=9998 then
        set num = num + 1;
        set CCodigo = (select concat('CP'  ,  CAST(num as CHAR)));
    else 
        set CCodigo=(select 'CP0001');
    end if;

    SELECT MAX(CCodigo) AS Codigo_CP FROM CLASE_PRODUCTO;
END $

Java Class

public static boolean insertarClaseProducto(ClaseP cp){
        boolean resp = false;

        Connection cn;
        Connection con = new Connection();
        cn = con.connect();              

        try{
            CallableStatement cs = cn.prepareCall("CALL REGISTRAR_CLASE_PRODUCTO (?)");
            cs.setString(1, cp.getNombreCP());
            int i = cs.executeUpdate();

            if(i==1)
                resp = true;
            else
                resp = false;

        }catch(Exception e){System.out.println(e);}
        return resp;
    } 
```

返回：

```
Codigo_MP   Nombre_MP    Estado_MP
MP0001      LG           HAB
MP0002      GENIUS       HAB
MP0003      MICRONICS    HAB
MP0004      SONY         HAB
MP0005      PANASONIC    HAB 
```

# dependencies - 如何与在 Guice 中使用注释值的提供者绑定？

> ID：14680124
> 
> 赞同：2
> 
> 时间：2013-02-04T03:55:56.430
> 
> 标签：dependencies, guice, code-injection

有没有办法与提供者绑定，该提供者在 Google Guice 中解释目标的注释值？

例子：

```
bind(Resource.class)
    .annotatedWith(MyAnnotation.class)
    .toProvider(new MyProvider<MyAnnotation, Resource>{
        public Resource get(MyAnnotation anno){
            return resolveResourceByAnnoValue(anno.value());
        }
    }); 
```

我想通过带注释的绑定来初始化 Android Activity 类的字段。它应该必须通过它的唯一 ID 来获取多个资源。

原始方式：

```
public class TestActivity extends Activity{
    private TextView textView;
    private Button testButton;

    public void onAfterCreate(...){
        // set UI declaration resource.
        setContentView(R.layout.activity_test);

        // initialize fields, it must be done after setting ui definition.
        textView = (TextView) findViewById(R.id.textView);

        .... initialize other fields, hook them...

    ...
} 
```

我想以声明的方式绑定 UI 和它的字段，而不是务实地喜欢上面：

```
@ResourceID(R.layout.activity_test)
public class TestActivity extends InjectiveActivity{
    @ResourceID(R.id.textView) // Auto generated static resource id constant
    private TextView textView;

    @ResourceID(R.id.testButton)
    private Button testButton;

    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:17:54.147

这是不可能的。

如果`@MyAnnotation`是一个绑定注解，它将使用它的`equals`方法进行比较。`@MyAnnotation(5) Resource`将被绑定到`@MyAnnotation(5) Resource`，与 相比，那将根本不匹配`@MyAnnotation(6) Resource`。查看[此 SO 答案](https://stackoverflow.com/questions/5704918/custom-guice-binding-annotations-with-parameters)以获取更多信息。与该答案一样，如果您愿意，您可以遍历可能的注释值并单独绑定每个注释值。

如果`@MyAnnotation`不是绑定注释，您将根本无法从您的提供者访问它。[如此 SO answer](https://stackoverflow.com/questions/9027766/is-it-possible-to-inject-the-class-requesting-injection-using-guice)中所述，将注入站点信息添加到提供程序或依赖项本身是[一个被拒绝的功能。](https://github.com/google/guice/issues/27)

您最好的选择是创建一个[`@Assisted`注入](https://github.com/google/guice/wiki/AssistedInject)（或手动工厂）来接受参数：

```
class MyConsumer {
  final Resource resource;
  @Inject MyConsumer(Resource.Factory resourceFactory) {
    int previouslyAnnotatedValue = 5;
    this.resource = resourceFactory.createWithValue(previouslyAnnotatedValue);
  }
} 
```

您也可以考虑使用[Custom Injections ，这将允许您使用](https://github.com/google/guice/wiki/CustomInjections)*除 之外`@Inject`*的任意注释，它可以使用您想要的运行时注释值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T23:03:22.893

[这是 Scala 中的一个示例（我喜欢使用 Scala 进行原型设计，毕竟它是 Java 穿着不同的衣服），我自己在Dynamic Google Juice injection 中根据注释的值](https://stackoverflow.com/questions/36642511/dynamic-google-juice-injection-depending-on-value-of-an-annotation)对此进行了思考后想出了这个示例

```
import java.lang.reflect.{Constructor, Parameter}
import java.util.concurrent.atomic.AtomicReference
import javax.inject.{Inject, Named, Provider}

import com.google.inject.matcher.Matchers
import com.google.inject.spi.ProvisionListener.ProvisionInvocation
import com.google.inject.{AbstractModule, Binder, Guice}
import com.google.inject.spi.{DependencyAndSource, ProviderInstanceBinding, ProvisionListener}
import com.typesafe.config.ConfigFactory
import net.codingwell.scalaguice.InjectorExtensions._
import net.codingwell.scalaguice.ScalaModule

import scala.collection.JavaConverters._

object GuiceExperiments extends App {

  val injector = Guice.createInjector(new MyModule())

  val some = injector.instance[Some]

  println(some)

  some.go()
}

trait Some {
  def go(): Unit
}

class Impl @Inject()(
                    @Named("a.a.a") hello: String,
                    @Named("a.a.b") bello: String,
                    @Named("a.b.a") kello: String

                    ) extends Some {
  override def go() = {
    println(hello)
    println(bello)
    println(kello)
  }
}

abstract class DynamicProvider[T >: Null](binder: Binder) extends Provider[T] {

  private[this] val nextValue = new AtomicReference[T]

  binder.bindListener(Matchers.any(), new ProvisionListener {

    private[this] def tryProvide(target: DependencyAndSource): Unit = {
      val dependency = target.getDependency
      val injectionPoint = dependency.getInjectionPoint
      val parameterIndex = dependency.getParameterIndex

      injectionPoint.getMember match {
        case constructor: Constructor[_] =>
          val parameter = constructor.getParameters()(parameterIndex)
          nextValue.set(getFor(parameter))
      }
    }

    override def onProvision[V](provision: ProvisionInvocation[V]): Unit = {

      provision.getBinding match {
        case binding: ProviderInstanceBinding[_] if binding.getUserSuppliedProvider eq DynamicProvider.this =>
          provision.getDependencyChain.asScala.lastOption.foreach(tryProvide)
        case _ => ()
      }
    }
  })

  final override def get(): T = nextValue.getAndSet(null)

  def getFor(parameter: Parameter): T
}

class MyModule extends AbstractModule with ScalaModule {

  override def configure(): Unit = {

    bind[Some].to[Impl]

    bind[String].annotatedWith[Named].toProvider(new DynamicProvider[String](binder) {
      override def getFor(parameter: Parameter): String = {
        if (parameter.isAnnotationPresent(classOf[Named])) {
          parameter.getAnnotation(classOf[Named]).value()
        } else {
          null
        }
      }
    })

  }

} 
```

这只会插入 的值`@Named`，但看起来它非常有效。这么多是不可能的。

# wcf - WCF 服务 - HttpContext.Current.User 未在 Silverlight 上使用 FormsAuthentication 注销

> ID：14680126
> 
> 赞同：0
> 
> 时间：2013-02-04T03:55:58.663
> 
> 标签：wcf, silverlight, wcf-ria-services

我有一个基本的 Silverlight 业务应用程序，它还托管 WCF 服务。该服务是安全的，需要管理员角色。

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
public class Service1 : IService1
{
    public Service1()        
    {            
        Thread.CurrentPrincipal = HttpContext.Current.User;
    }

    [PrincipalPermission(SecurityAction.Demand, Role = "Administrators")]
    public void DoWork()
    {
    }
} 
```

奇怪的是，在退出 Silverlight 应用程序后，我仍然能够使用 Fiddler 成功地重播对 DoWork() 的服务调用。

设置断点`Thread.CurrentPrincipal = HttpContext.Current.User;`表明`HttpContext.Current.User`仍然持有以前经过身份验证的用户身份。

这里发生了什么？

# mongodb - MongoDB $addToSet 未写入数据库

> ID：14680129
> 
> 赞同：0
> 
> 时间：2013-02-04T03:56:12.703
> 
> 标签：mongodb, insert, mongodb-php, arrays

我不知道为什么，但我很难让 $addToSet 为我的子数组项工作。

这应该是这样的：

```
{
  "items": [
    {
      "id": "510bca8138fc5d6e38000000",
      "quantity": "1"
    },
    {
      "id": "51011a8138fc5d6348000000",
      "quantity": "1"
    }
  ],
  "session": "1359948849.291898629576",
  "status": "cart"
} 
```

但是，它似乎只允许第一个：

```
{
  "items": [
    {
      "id": "510bca8138fc5d6e38000000",
      "quantity": "1"
    }
  ],
  "session": "1359948849.291898629576",
  "status": "cart"
} 
```

它只是不会插入另一个子数组。

我的代码：

```
$document = $collection->findOne(array('session' => $_SESSION["redi-Shop"]));

        //print_r($document);
        if (null !== $document) {
            $collection->update(
                array('session' => $_SESSION["redi-Shop"]),
                array(
                    '$addToSet' => array(
                        'items' => $_POST['item']
                    ),

            ));
            print_r($_POST['item']);
        }
        else
        {
            $collection->insert(
                array('session' => $_SESSION["redi-Shop"],
                'status' => "cart",
                    'items' => $_POST['item'])
                );
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:33:41.003

我将 $addToSet 更改为 $Push 并且工作正常

# ruby-on-rails-3 - 多次引用相同的模型字段

> ID：14680131
> 
> 赞同：0
> 
> 时间：2013-02-04T03:56:19.543
> 
> 标签：ruby-on-rails-3, postgresql, model, associations

我有一个课程模型，其中包含大约 50 个字段，这些字段都引用了成绩模型。成绩模型有一个简单的列表 0-8，用作课程评分值。

有没有办法避免用 50 行填充我的模型：

```
 belongs_to :walking, :class => 'Grade'
 belongs_to :running, :class => 'Grade'   
 belongs_to :crawling, :class => 'Grade' 
 ... 
```

postgres 数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:15:37.717

你可以这样做：

```
fields = %w[walking running crawling] # list all 50 of them here
fields.each { |field| belongs_to field.to_sym, :class => 'Grade' } 
```

这至少可以让您不必写出所有的行，但您仍然需要列出关联的名称（步行、跑步、爬行等）才能使其工作（正如我在上面指出的那样）。

# php - 不在括号之间的单词的正则表达式

> ID：14680132
> 
> 赞同：1
> 
> 时间：2013-02-04T03:56:31.503
> 
> 标签：php, sql, regex

给定一个字符串，匹配单词第一次出现之后出现的所有内容。该单词不得出现在一对括号内的任何位置，但其他单词可以。例如：

```
SELECT
t1.col1,
(SELECT t2.col1 FROM table2 t2
    WHERE t2.id IN(SELECT * FROM table5 WHERE id = t2.id)
) AS alias1,
t1.col2
----------
FROM
table1 t1,
(SELECT id FROM table3 t3 WHERE t3.id = t1.table3_id) t3,
table4 t4 
```

我正在寻找虚线之后的所有内容-特别是在单词第一次出现之后`FROM`没有出现在一对括号内的任何内容之后的所有内容

如果 Regex 不行，我会制作一个 PHP 语句来解析。我也很难过，寿！我想这样做，我必须按单词和括号对字符串进行标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:41:50.377

我认为正则表达式可能不是最好的解决方案，因为当涉及嵌套括号时，它们可能非常困难（或不可能）。

我也认为循环遍历每个字符并不是最好的方法，因为它会导致很多不必要的循环。

我认为这是最好的方法：

查找给定字符串的每次出现并计算出现之前的括号数。如果左括号的数量等于右括号的数量，那么你有正确的匹配。这将导致更少的循环，并且您只是在检查您真正要检查的内容。

我做了一个`findWord`采用这种方法的函数。它适用于您的示例 where `$in`is your SQL statement and `$search`is `'FROM'`.

```
function findWord( $in, $search ) {

    if( strpos($in, $search) === 0 ) return $in;

    $before = '';
    while( strpos($in, $search, 1) ) {
        $i = strpos($in, $search, 1);
        $before .= substr($in, 0, $i);
        $in = substr($in, $i);

        $count = count_chars($before);

        if( $count[40] == $count[41] )
            return $in;
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:14:21.833

除非有人有更好的答案，否则我将采用程序化方法。

```
/**
 * Find the portion of the SQL statement occurring after
 * the first occurrence of the word 'FROM' (which itself
 * does not appear within parens)
 */
public static function sql_after_from($sql) {
    $arr = str_split($sql);
    $indent = 0;
    $out = '';
    $start = 0;
    $len = count($arr);
    for($x=0; $x < $len; $x++) {
        $c = $arr[$x]; //current character
        if($c == '(') $indent++;
        if($c == ')') $indent--;
        $out .= $arr[$x];
        //do the last 4 letters spell FROM?
        if(substr($out, $x-3, $x) == 'FROM') {
            if($indent == 0) { //not anywhere within parens
                $start = $x+2;
                break; //go no further 
            }
        }
    }
    //everything after the first occurrence of FROM
    return substr($sql, $start);
} 
```

# desktop - 桌面创建桌面窗口？

> ID：14680134
> 
> 赞同：5
> 
> 时间：2013-02-03T22:27:03.430
> 
> 标签：desktop, gtk, qt

我正在写一个桌面。我已经通过 Python 了解了 Qt 和 GTK+ 的基础知识，但我不明白如何显示完成的桌面。您如何使其成为窗口管理器的根窗口，或者有没有一种方法可以显示我不熟悉的桌面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:47:37.043

你不让它成为根窗口。X 有一个您无法更改的根窗口。有很多方法可以做你想做的事

*   **X 根窗口**

旧的方式是桌面只是标准的 X 根窗口。图标只是单独的无边框窗口。

*   **桌面窗口**

现在大多数系统都会打开一个大窗口，并将其标记为桌面窗口。然后，大多数窗口管理器都知道永远不会将其提升到任何其他窗口之上。X 根窗口仍在其后面，但它是隐藏的。这意味着你可以在这个窗口上做任何你想做的事情，在它上面画画，包括图标或小部件或你的工具包可以做的任何其他事情。

如果您使用的是 Gtk+，那么可以在`GdkWindowTypeHint`枚举中找到相关信息，特别是`GDK_WINDOW_TYPE_HINT_DESKTOP`. 文档可以在这里找到：[GdkWindow](https://developer.gnome.org/gdk/unstable/gdk-Windows.html#GdkWindowTypeHint)

*   **合成器**

但是，有一种更新的方式可供 Gnome3 或 Unity 等桌面使用，称为合成器叠加窗口。当合成器运行时，会有一个覆盖窗口覆盖系统上的所有窗口。然后由合成器在此叠加层上绘制窗口的实际内容。但是，覆盖可以在此覆盖窗口上绘制它想要的任何内容。例如，在 Gnome3 中，当您输入窗口选择器并且窗口将自己排列成网格时，窗口并没有真正移动和缩小，合成器只是决定以这种方式绘制它们。实际上，窗户仍然在原来的位置，但隐藏在这个覆盖之下。

这是一种非常先进的做事方式，当然不适合新手开发人员。您可能希望专注于第二种方法。

# emacs - 加载 .emacs 文件时出错

> ID：14680137
> 
> 赞同：1
> 
> 时间：2013-02-04T03:57:47.630
> 
> 标签：emacs, line-numbers

我的`.emacs`文件有以下内容：

```
$ cat ~/.emacs
(setq vc-handled-backends nil)
(global-linum-mode t)

$ od -xcb ~/.emacs
0000000      7328    7465    2071    6376    682d    6e61    6c64    6465
           (   s   e   t   q       v   c   -   h   a   n   d   l   e   d
          050 163 145 164 161 040 166 143 055 150 141 156 144 154 145 144
0000020      622d    6361    656b    646e    2073    696e    296c    280a
           -   b   a   c   k   e   n   d   s       n   i   l   )  \n   (
          055 142 141 143 153 145 156 144 163 040 156 151 154 051 012 050
0000040      6c67    626f    6c61    6c2d    6e69    6d75    6d2d    646f
           g   l   o   b   a   l   -   l   i   n   u   m   -   m   o   d
          147 154 157 142 141 154 055 154 151 156 165 155 055 155 157 144
0000060      2065    2974                                                
           e       t   )                                                
          145 040 164 051                                                
0000064 
```

这些是绝对有效的 Emacs 的 LISP 表达式。但是最近每当我启动emacs时，行号不再显示，而是出现错误：

```
$emacs --debug-init ~/.emacs
Debugger entered--Lisp error: (void-function global-linum-mode)
  (global-linum-mode t)
  eval-buffer(#<buffer  *load*> nil "/Users/user/.emacs" nil t)  ; Reading at buffer position 53
  load-with-code-conversion("/Users/user/.emacs" "/Users/user/.emacs" t t)
  load("~/.emacs" t t)
  #[nil "^H\205\276^@   \306=\203^Q^@\307^H\310Q\202A^@ \311=\2033^@\312\307\313\314#\203#^@\315\202A^@\312\307\313\316$
  command-line()
  normal-top-level() 
```

Emacs 版本：

```
$ emacs --version
GNU Emacs 22.1.1
Copyright (C) 2007 Free Software Foundation, Inc.
GNU Emacs comes with ABSOLUTELY NO WARRANTY.
You may redistribute copies of Emacs
under the terms of the GNU General Public License.
For more information about these matters, see the file named COPYING. 
```

有谁知道可能是什么原因造成的？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:19:33.597

看起来 linum 模式已添加到 23.1 版（[更改日志](http://lists.gnu.org/archive/html/info-gnu-emacs/2009-07/msg00000.html)）中的 Emacs 发行版中。因为 linum 没有随 Emacs 22 一起发布，所以你调用了一个未定义的函数，因此会出现错误。

也许您曾经运行过更新版本的 emacs，但后来它已经被破坏了。您可以：

*   下载 linum 源，将其添加到您的加载路径，`require`然后

*   安装更新版本的 Emacs。

* * *

*编辑*：正如上面评论中提到的，您的路径上可能有多个 Emacs 二进制文件，具有不同的版本。看看`/usr/bin`, `/opt/local/bin`, et al，看看是否是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:05:19.453

首先，如果您在 UNIXy 系统下运行，我将`cat`使用八进制转储程序以外的其他内容检查该文件的内容：`od`

```
od -xcb .emacs 
```

因为 53 个字符大约是这两行的大小，所以它可能在文件的末尾（或内部）有一些垃圾。

# javascript - javascript中的时差计数

> ID：14680139
> 
> 赞同：0
> 
> 时间：2013-02-04T03:58:33.127
> 
> 标签：javascript

有谁可以在 Javascript 中计算时差？

例子：

如果我有以下时间（24H 格式）

```
startTime = 0615
endTime = 1530
breakTime = 0030 
```

我怎样才能得到以下输出？

```
diffB4Break = 7.15 hours
afterBreak = 6.45 hours 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:16:36.393

这里有一些复杂性，例如，您需要知道最大班次是多少，以及工人是否有可能被安排工作超过一天的阈值，即在 2300 开始工作并在 0900 结束。

很快就会清楚为什么最好使用日期/时间对象来处理日期和时间增量。

在 Javascript 中看看[`Date`](http://www.w3schools.com/js/js_obj_date.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:15:49.520

基于@Guffa在[这里](https://stackoverflow.com/a/1944929/1057429)的回答：

```
function parseTime(s) {
   var c = s.split(':');
   return parseInt(c[0]) * 60 + parseInt(c[1]);
}
var startTime = '6:45';
var endTime = '15:30';
var diff = parseTime(endTime) - parseTime(startTime);           
var min = diff % 60;
var hrs = parseInt(diff / 60);
alert(hrs + ":" + min); 
```

# ruby - 在开发中使用 ruby gem 进行 Rails 和测试方法公开

> ID：14680140
> 
> 赞同：1
> 
> 时间：2013-02-04T03:58:37.713
> 
> 标签：ruby, testing, gem

我有一个简单的任务，我可以用一个 ruby​​ 脚本完成，但我想学习如何制作 gem，甚至可能在 rails 应用程序中使用它；最好的方法似乎总是带有人为表示的实际应用程序。最终目标是解析一个 csv 文件，根据过滤器（正则表达式匹配）排除一些行，并输出剩下的内容；这里显示的是一个简单的 hello world 来帮助我解决这个问题。我被困在两件事上。

1.  我是否正在正确运行我的代码作为正在进行的工作？例如，如果这是一个简单的脚本，我只需进入终端并运行“ruby list_cleaner.rb”，它就会执行......但现在我有了这个 gem 文件结构，我不确定我应该调用哪个文件？当我调用我的顶级 gem/gem_name.rb 脚本时，什么也没有发生（正如我所期望的，因为我在该文件中所做的只是自动加载其他文件）。当我调用第一个自动加载的文件（base.rb）时，它可以工作，但是在 WIP 期间我应该如何运行这个东西？

2.  如何测试来自另一个文件中的一个模块或类的方法是否可以被另一个访问？断言种类？断言无？我似乎无法弄清楚！所以我在我的 'contraints.rb' 文件中定义了一个方法 'hello'，将其包含在 base.rb 中并命名为 'hello'。运行 base.rb 脚本时，我得到一个`uninitialized constant ListCleaner::Constraints (NameError)`. 我想弄清楚如何测试它并显然修复它！

下面是一些非常简单的 hello world 示例和文件结构。

顶级目录和 gem 名称是“list_cleaner”

```
#list_cleaner/lib/list_cleaner.rb
module ListCleaner
    autoload :Base, 'list_cleaner/base'
    autoload :Constraints, 'list_cleaner/constraints'
end

#list_cleaner/lib/base.rb
module ListCleaner
    class Base
        include ListCleaner::Constraints
        hello #a method from the constraints rb auto loaded and included right?
    end
end

#list_cleaner/lib/constraints.rb
module ListCleaner
    class Constraints #long term this will be filled with 'filter' methods
      def hello
        puts('hello world')
      end

    end
end

#list_cleaner/test/list_cleaner_test.rb
require 'test_helper'

class ListCleanerTest < ActiveSupport::TestCase
  test "truth" do
    assert_kind_of Module, ListCleaner
  end
  test "constrains exposed to Base?" do 
    assert_kind_of constraints, base, 'msg' #is constraints part of base?
  end
end 
```

我正在阅读/使用 Jose Valim 的“制作 Rails 应用程序”并使用一些互联网指南；似乎无法自己应用一些基本工作。通过这个例子，我真的只是想弄清楚如何从另一个文件（再次，模块，类，什么是最好的？）中调用一个文件（模块，类或最好的？）中的方法，并测试它。所以我不仅想让它全部工作，而且测试它是否能与单元测试一起工作，并从终端调用它来查看它的执行情况（在这种情况下输出“hello world”）。

感谢您提供的任何方向，我很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:13:16.063

你试图一次做很多事情。

此代码更简单，并展示了如何为模块编写测试：

```
#foo/lib/hi.rb
module Hi

  def hi
    puts "hello"
  end

end

#foo/test/hello_test.rb
class HelloTest < ActiveSupport::TestCase

  class X
    include Hi
  end

  test "says hello" do
    assert_equal X.new.hi, "hello"
  end

end 
```

要使用纯 ruby​​ 运行测试：

```
ruby -Ilib -Itest test/*.rb 
```

你能成功运行它吗？

# python - sqlalchemy 返回结果作为 Query 对象而不是 MyModel 类型

> ID：14680145
> 
> 赞同：4
> 
> 时间：2013-02-04T03:58:53.590
> 
> 标签：python, sqlalchemy

```
accounts = db.query(models.MyModel).filter(models.MyModel.id == user_id)
print(accounts) 
```

结果是

```
<sqlalchemy.orm.query.Query object at 0x1dbafd0>, 
```

我期望一个列表或 MyModel 的东西，但我得到一个对象查询。我怎样才能获得 MyModel 的列表呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T04:02:17.233

您需要调用`.all()`该查询。您要返回的对象是未实现的查询。

# javascript - 将鼠标悬停在动画中的 HTML-5 画布图像上以播放/暂停它

> ID：14680148
> 
> 赞同：1
> 
> 时间：2013-02-04T03:58:57.063
> 
> 标签：javascript, animation, geometry, html5-canvas, dom-events

我有一个 HTML-5 画布，其中有一个动画圆圈。参考以下JS代码。

```
function doFirst(){
   canvas = document.getElementById('myCanvas');
   context = canvas.getContext('2d');
   centerX = canvas.width / 4;
   centerY = canvas.height / 4;
   radius = 20;    
   dy=4;
   drawCircle(centerX,centerY,radius);
   myVar=setInterval(moveCirc,40);      
}

function moveCirc(){                
context.clearRect(0,0,canvas.width,canvas.height);
drawCircle(centerX,centerY,radius);
centerY+=dy;
if(centerY>canvas.height-50)
  clearInterval(myVar);     
}

function drawCircle(x,y,r){     
context.lineWidth = 2;
context.strokeStyle = '#003300';
context.fillStyle = 'blue';
context.beginPath();
context.arc(x, y, r, 0, 2 * Math.PI, true);
context.stroke();
context.fill();
}
window.addEventListener("load",doFirst,false); 
```

我希望每当用户将鼠标移到圆圈上时，动画应该暂停并且应该显示一条消息。当用户将鼠标移出圆圈时，动画应该从它暂停的点重新开始，并且消息应该消失。请帮助我实现此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:46:00.437

如果您使用的是 css3 动画，那么 **在鼠标悬停时**更改 css 属性

**-webkit-animation-play-state：****暂停** 以 暂停您的动画；

并从该点重新开始动画更改css属性

**-webkit-animation-play-state** **：** 运行

 **来源：[http ://css-infos.net/property/-webkit-animation-play-state](http://css-infos.net/property/-webkit-animation-play-state)

**注意**“ *-webkit* ”用于基于 webkit 的浏览器；Mozilla使用“ *-moz ”，opera 使用“* *-o* ”等。**

# javascript - 如何在第一个 getjson 函数中的另一个 getjson 调用中使用 getjson 响应变量？

> ID：14680150
> 
> 赞同：0
> 
> 时间：2013-02-04T03:59:12.320
> 
> 标签：javascript, html, getjson

我在 javascript 中使用多个 getjson。我想在另一个 get json 调用中使用第一个 getjson 调用的响应，它是一个类似 seasonID=44567 的字符串，如下所示（在第二个 getJson 中使用**代码**变量），但不幸的是我一直收到错误的请求错误。你们能帮我解决这个问题吗。谢谢

```
 <script>
    $.getJSON('http://www.site1.com/ok1.php&callback=?', function(data){
        //$('#output').html(data.contents);

     var siteContents = data.contents;   

var start = siteContents.indexOf('seasons=');
var end = siteContents.indexOf('&width=385&height=230', start);
var code = siteContents.substring(start, end);

    $.getJSON('http://www.site2.com/ok1.php?send="+code&callback=?', function(data){
    var siteContents2 = data.contents;
    document.myform2.outputtext2.value = siteContents2 ;
    });

    });

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:13:02.070

Use this

```
$.getJSON('http://www.site2.com/ok1.php?send=' + code + '&callback=?', function(data){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:10:54.623

You have incorrect quoting in the second `getJSON` call.

Instead of trying to construct the query string by appending, use the optional `data` argument to `getJSON`:

```
$.getJSON('http://www.site2.com/ok1.php', { send: code, callback: '?' }, function(data){ 
```

# lua - 将数组中的键重新分配为数字顺序？

> ID：14680152
> 
> 赞同：1
> 
> 时间：2013-02-04T03:59:35.167
> 
> 标签：lua

我正在寻找一种方法来重新分配数组中的键，看起来像

```
table = {
    [1] = "value1",
    [5] = "value2",
    [12] = "value3",
    [27] = "value4" 
```

}

看起来像这样

```
table = {
    [1] = "value1",
    [2] = "value2",
    [3] = "value3",
    [4] = "value4" 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:52:44.593

首先用你的索引填充一个数组，然后对它们进行排序，然后用它们的值替换索引以获得你需要的结果：

```
local t = {
  [1] = "value1",
  [5] = "value2",
  [12] = "value3",
  [27] = "value4"
}
local tupd = {}
for k in pairs(t) do table.insert(tupd, k) end -- populate
table.sort(tupd) -- sort
for k, v in ipairs(tupd) do tupd[k] = t[v] end -- replace

for k, v in ipairs(tupd) do print(k, v) end -- show 
```

这应该打印您所期望的。

（不知道为什么对你的问题投反对票，因为这看起来是一个有趣的问题；虽然我在实践中很少看到这一点；这是作业吗？；））

# ios - 如何在情节提要中加载 xib 视图？

> ID：14680169
> 
> 赞同：1
> 
> 时间：2013-02-04T04:01:14.463
> 
> 标签：ios, objective-c, storyboard

我想定义一个自定义表格单元格视图并在许多中重用它`tableView`，所以我创建了一个包含我的 xib 文件`custom cell view`，但问题是我不知道如何在情节提要中加载 xib 文件

表格单元格视图：

![在此处输入图像描述](../Images/c1e6dff4633de322166512a48b632e4e.png)

我希望在情节提要的黑色区域中显示视图

![在此处输入图像描述](../Images/1969ba370d18c53a06909d9384bb3c5c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:14:26.820

您可以直接在情节提要原型单元中构建视图：http: [//www.appcoda.com/ios-programming-customize-uitableview-storyboard/](http://www.appcoda.com/ios-programming-customize-uitableview-storyboard/)

并且要在不同控制器中的不同表格视图中使用相同的视图，您只需在原型单元格中复制并粘贴（cmd-C cmd-V）视图，因此您根本不需要 XIB。

但是使用助理编辑器，您也可以将视图从 XIB 拖动或复制粘贴到情节提要（但不推荐）

希望这可以帮助

# winforms - DevExpress MetroUI 到 WindowsUI

> ID：14680170
> 
> 赞同：0
> 
> 时间：2013-02-04T04:01:39.110
> 
> 标签：winforms, microsoft-metro, devexpress, devexpress-windows-ui

实际上，我已经在 DevExpress MetroUIView 中开发了我的应用程序。
现在我需要将其转换为 DevExpress WindowsUIView。我使用的是 12.2.4 版本。
我试图通过 DevExpress`Project Converter`工具转换我的项目，但这条线没有得到转换：

```
public DevExpress.XtraBars.Docking2010.Views.WindowsUI.MetroUIView MetroUIView1; 
```

从 MetroUIView 转换到 WindowsUIView 还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:27:32.840

请更改以下行（来自 FormXXX.Designer.cs）：

```
private void InitializeComponent() {
//...
this.metroUIView1 = new DevExpress.XtraBars.Docking2010.Views.WindowsUI.MetroUIView(this.components);
//...
}
public DevExpress.XtraBars.Docking2010.Views.WindowsUI.MetroUIView metroUIView1; 
```

到：

```
private void InitializeComponent() {
//...
this.metroUIView1 = new DevExpress.XtraBars.Docking2010.Views.WindowsUI.WindowsUIView(this.components);
//...
}
public DevExpress.XtraBars.Docking2010.Views.WindowsUI.WindowsUIView metroUIView1; 
```

然后您可以将`metroUIView1`变量重命名为`windowsUIView1`.

仅出于兼容性原因，`DevExpress.XtraBars.Docking2010.Views.WindowsUI.MetroUIView`该类在 DevExpress.XtraBars.v12.2.dll 中定义（您可以按 F12 键从元数据中查看它的声明）：

```
namespace DevExpress.XtraBars.Docking2010.Views.WindowsUI {
    [EditorBrowsable(EditorBrowsableState.Never)]
    [Browsable(false)]
    [Obsolete("You should use the WindowsUIView class")]
    public class MetroUIView : WindowsUIView {
        public MetroUIView();
        public MetroUIView(IContainer container);
    }
} 
```

# asp.net - XSLT：在 foreach 中执行 if-else

> ID：14680176
> 
> 赞同：1
> 
> 时间：2013-02-04T04:02:00.840
> 
> 标签：asp.net, xslt, if-statement, foreach, line-breaks

我试图在 XSLT 的 foreach 语句中插入一个 if-else 语句。这个想法是，如果节点存在，它将插入一个换行符。这就是我到目前为止所拥有的

```
<xsl:for-each select="Books/Publisher/[BookTitle]">
                  <strong>
                    <xsl:value-of select=" BookTitle " />
                  </strong>
<xsl:if test=" Books/Publisher/BookTitle">!= ''">
        <br/>  
      </xsl:if>
</xsl:for-each> 
```

问题是，当我插入 if-else 语句时，换行标记不会出现，但只有当我完全删除 if else 时才会出现。有人可以向我解释为什么会这样，因为我已经检查过节点是否存在并且插入换行符应该可以工作。所以foreach循环内的if-else一定有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T04:09:15.597

I think what you are going for is this:

```
<xsl:for-each select="Books/Publisher[BookTitle]">
  <strong>
    <xsl:value-of select="BookTitle" />
  </strong>
  <xsl:if test="BookTitle != ''">
    <br/>
  </xsl:if>
</xsl:for-each> 
```

But if I understand correctly, it looks like all you're really trying to do is output all the non-blank book titles, followed by line breaks, so perhaps this would be a better approach:

```
<xsl:for-each select="Books/Publisher/BookTitle[. != '']">
  <strong>
    <xsl:value-of select="." />
  </strong>
  <br/>
</xsl:for-each> 
```

Or better yet:

```
<xsl:apply-templates select="Books/Publisher/BookTitle[. != '']" />

<!-- .....  (separate template in the XSLT) -->
<xsl:template match="BookTitle">
  <strong>
    <xsl:value-of select="." />
  </strong>
  <br/>
</xsl:template> 
```

# delphi - 如何在 Delphi2009 中自定义滚动条颜色？

> ID：14680186
> 
> 赞同：1
> 
> 时间：2013-02-04T04:03:32.267
> 
> 标签：delphi, scrollbar

可悲的是，Delphi2009 已经应用了主题服务，它总是使用 Windows 系统主题来绘制滚动条。结果，我无法自定义滚动条颜色。

是否可以在不更改操作系统系统主题的情况下自定义滚动条颜色？

另外：Windows 主题不是我关心的问题，我只是想自定义给定控件的滚动条颜色，例如 TMemo 或 TStringGrid 等。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:02:59.857

明确禁用备忘录的主题将起作用......

```
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TMemo=Class(StdCtrls.TMemo)
    Procedure CreateWnd;override;
  End;

  TForm1 = class(TForm)
    Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form1: TForm1;

implementation
uses uxTheme;

{$R *.dfm}

{ TMemo }

procedure TMemo.CreateWnd;
begin
  inherited;
   SetWindowTheme(Handle,'','');
end;

end. 
```

# data-binding - 需要 mvvmcross 数据绑定帮助

> ID：14680189
> 
> 赞同：1
> 
> 时间：2013-02-04T04:04:02.727
> 
> 标签：data-binding, uitableview, xamarin.ios, mvvmcross

尝试了解 mvvmcross 和 xib 编辑器 - 我遵循了示例代码

[http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html](http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html)

并在我的代码中加入了一些。

```
 namespace ConX.UI.Touch.Cells
 { 
 [Register("JobCell")]
    public partial class JobCell : MvxBaseBindableTableViewCell
    {
    public static NSString Identifier = new NSString("JobCell");
    public const string BindingText = @"{'JobDescription':{'Path':'Description'}, 'JobScheduledForDate':{'Path':'ScheduledForDate'}, 'JobNumber':{'Path':'JobNo'}}";

    public JobCell(): base(BindingText)
    {
    }

    public JobCell(IntPtr handle): base(BindingText, handle)
    {
    }       

    public JobCell (string bindingText): base(bindingText, UITableViewCellStyle.Default, Identifier)
    {
    }

    public string JobDescription 

    {
        get { return this.DescriptionLabel.Text; }
        set { this.DescriptionLabel.Text = value; }
    }

    public string JobScheduledForDate
    {
        get { return ScheduledForDateLabel.Text; }
        set { ScheduledForDateLabel.Text = value; }
    }

    public string JobNumber
    {
        get { return NumberLabel.Text; }
        set { NumberLabel.Text = value; }
    }

} 
```

}

```
using MonoTouch.Foundation;

namespace ConX.UI.Touch.Cells
{
partial class JobCell
{
    [Outlet]
    MonoTouch.UIKit.UILabel DescriptionLabel { get; set; }

    [Outlet]
    MonoTouch.UIKit.UILabel ScheduledForDateLabel { get; set; }

    [Outlet]
    MonoTouch.UIKit.UILabel NumberLabel { get; set; }

    void ReleaseDesignerOutlets ()
    {
        if (DescriptionLabel != null) {
            DescriptionLabel.Dispose ();
            DescriptionLabel = null;
        }

        if (ScheduledForDateLabel != null) {
            ScheduledForDateLabel.Dispose ();
            ScheduledForDateLabel = null;
        }

        if (NumberLabel != null) {
            NumberLabel.Dispose ();
            NumberLabel = null;
        }
    }
} 
```

}

我只是无法通过引发以下错误来完成这项工作 - 似乎没有创建网点？

```
System.NullReferenceException: Object reference not set to an instance of an object
at ConX.UI.Touch.Cells.JobCell.set_JobDescription (System.String value) [0x00008] in
/Volumes/ConXPrototype/Conx.UI.Touch/Cells/JobCell.cs:32
at    
       ConX.UI.Touch.Views.BaseJobListView`2+TableSource[ConX.Core.ViewModels.JobListViewModel,Syst
em.DateTime].GetOrCreateCellFor (MonoTouch.UIKit.UITableView tableView,
MonoTouch.Foundation.NSIndexPath indexPath, System.Object item) [0x00025] in  
/Volumes/ConXPrototype/Conx.UI.Touch/Views/BaseJobListView.cs:101
at Cirrious.MvvmCross.Binding.Touch.Views.MvxBaseBindableTableViewSource.GetCell  
(MonoTouch.UIKit.UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath) 
[0x00000] in <filenam 
```

![例外](../Images/2e8aa8adb168963d03b3dba39c3e38d0.png)

非常感谢克恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:25:16.670

我猜您正在运行旧版本的 MvvmCross 框架二进制文件。

在过去的 4 周中，我们进行了一些关键更改，这些更改延迟了数据绑定的发生，直到单元格和源真正可用于绑定。[您可以在 GitHub 上](https://github.com/slodge/MvvmCross/commits/26d355bae65c7eeb9f112ecde8fa1b0045c792a9/Cirrious/Cirrious.MvvmCross.Binding.Touch/Views/MvxBaseBindableTableViewCell.cs%20BindableTableViewCell%20changes%20on%20GitHub)的 Bindable Cell 更改中查看这些更改

有两种可能的修复方法：

**A.**升级到更新的程序集 - 记录该博客文章时使用的程序集位于[https://github.com/slodge/MvvmCross-Tutorials/tree/master/Lib/MvvmCross](https://github.com/slodge/MvvmCross-Tutorials/tree/master/Lib/MvvmCross)（或者当前在[http:/上发布了二进制文件） /slodge.blogspot.co.uk/p/mvvmcross-binaries_7.html](http://slodge.blogspot.co.uk/p/mvvmcross-binaries_7.html)）

**B.** *或者*继续使用较旧的程序集，但您需要通过测试 null 控件来保护您的 get/set 方法，例如：

```
public string JobNumber
{
    get { return NumberLabel == null ? null : NumberLabel.Text; }
    set { if (NumberLabel == null) return; NumberLabel.Text = value; }
} 
```

对库中的这种变化感到抱歉 - MvvmCross 确实在继续改进，示例/博客文章并不总是赶上，这可能会导致示例混淆。

* * *

如果您选择更新到最新的程序集，则 Swiss Binding 语法也将可用，允许您从以下位置切换：

```
public const string BindingText = @"{
   'JobDescription':{'Path':'Description'}, 
   'JobScheduledForDate':{'Path':'ScheduledForDate'}, 
   'JobNumber':{'Path':'JobNo'}}"; 
```

至

```
public const string BindingText = @"
   JobDescription Description; 
   JobScheduledForDate ScheduledForDate; 
   JobNumber JobNo"; 
```

但这只是一个选项 - 如果您愿意，您可以坚持使用 JSON。

有关瑞士装订的更多信息，请参阅[http://blog.ostebaronen.dk/2013/01/awesome-mvvmcross-swiss-bindings-for.html](http://blog.ostebaronen.dk/2013/01/awesome-mvvmcross-swiss-bindings-for.html)

# c++ - 比较同一类的2个对象（覆盖==运算符）c ++

> ID：14680190
> 
> 赞同：2
> 
> 时间：2013-02-04T04:04:08.923
> 
> 标签：c++, class, overriding, operator-keyword

我是 C++ 新手（来自 Java 和 C#），我正在尝试在我的一个类中覆盖 == 运算符，以便查看我是否有 2 个对给定属性具有相同值的对象。我一直在做一堆谷歌搜索并试图做​​出一些有效的东西。我需要的是 == 运算符在 2 个对象具有相同`_name`文本时返回 TRUE。

这是头文件：

```
//CCity.h -- city class interface
#ifndef CCity_H
#define CCity_H

#include <string>

class CCity
{
friend bool operator ==(CCity& a,  CCity& b)
{
    bool rVal = false;
    if (!(a._name.compare(b._name)))
        rVal = true;
    return rVal;
}
private:
    std::string _name;
    double _x; //need high precision for coordinates.
    double _y;
public:
    CCity (std::string, double, double); //Constructor
    ~CCity (); //Destructor
    std::string GetName();
    double GetLongitude();    
    double GetLatitude();
    std::string ToString();
};
#endif 
```

在我的 main() 方法中：

```
 CCity *cit1 = new CCity("bob", 1, 1);
    CCity *cit2 = new CCity("bob", 2, 2);
    cout<< "Comparing 2 cities:\n";
    if (&cit1 == &cit2)
        cout<< "They are the same \n";
    else
        cout << "They are different \n";
    delete cit1;
    delete cit2; 
```

问题是我在`friend bool operator ==`块中的代码永远不会被执行。我觉得我在声明该运算符的方式或使用它的方式上做错了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T04:06:26.010

`&`当您真的想使用以下方法取消引用时，获取（您正在比较指针）的地址`*`：

```
if (*cit1 == *cit2)
    cout<< "They are the same \n"; 
```

无论如何，在这里使用指针*绝对没有*意义，更不用说愚蠢的指针了。

这是没有它们的样子（正确的方法）：

```
CCity cit1("bob", 1, 1);
CCity cit2("bob", 2, 2);
cout<< "Comparing 2 cities:\n";
if (cit1 == cit2)
    cout<< "They are the same \n";
else
    cout << "They are different \n"; 
```

此外，正如 WhozCraig 所提到的，考虑为您的`operator==`函数使用 const-ref 参数，因为它不应该修改参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T04:06:32.827

使用此代码：

```
CCity *cit1 = new CCity("bob", 1, 1);
CCity *cit2 = new CCity("bob", 2, 2);
cout<< "Comparing 2 cities:\n";
if (&cit1 == &cit2)
    cout<< "They are the same \n";
else
    cout << "They are different \n"; 
```

您正在将指针与指向 CCity 实例的指针进行比较。

你想要这样的东西：

```
CCity *cit1 = new CCity("bob", 1, 1);
CCity *cit2 = new CCity("bob", 2, 2);
cout<< "Comparing 2 cities:\n";
if (*cit1 == *cit2)
    cout<< "They are the same \n";
else
    cout << "They are different \n"; 
```

# python - Django-admin.py 找不到设置

> ID：14680195
> 
> 赞同：1
> 
> 时间：2013-02-04T04:04:50.077
> 
> 标签：python, django, ubuntu

我的 Ubuntu 12.10 上发生了一些奇怪的事情。我的 Django 项目具有以下目录结构：

```
project-repository
|__ my-project
    |__manage.py
    |__my-project
       |__ __init__.py
       |__urls.py
       |__wsgi.py
       |__settings
          |__ __init__.py
          |__local.py
          |__base.py 
```

当我从内部奔跑`project-repository/my-project`

```
django-admin runserver --pythonpath=$PWD --settings=my-project.settings.local 
```

一切正常。但是当我尝试通过以下命令添加`project-repository/my-project`到 virtualenv`add2virtualenv $PWD`

```
django-admin runserver --settings=my-project.settings.local 
```

导致以下错误：

```
ImportError: Could not import settings 'my-project.settings.local' (Is it on sys.path?): No module named my-project.settings.local 
```

虽然当我`sys.path`在 python 控制台中进行操作时，其中一行对应于`project-repository/my-project`目录。

你能澄清一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:04:34.403

碰巧我在尝试使用安装在 virtualenv 中的 django-admin.py 时使用了全局安装的 django-admin.py。更多细节在这里[https://stackoverflow.com/a/14768107/897301](https://stackoverflow.com/a/14768107/897301)。

# html - 在 IOS 中显示分数

> ID：14680197
> 
> 赞同：2
> 
> 时间：2013-02-04T04:04:56.790
> 
> 标签：html, ios, string, ios5

> **可能重复：**
> [使用 unicode 的分数的 NSString 表示](https://stackoverflow.com/questions/6918516/nsstring-representation-of-fractions-using-unicode)
> [在网站上使用分数](https://stackoverflow.com/questions/14671752/using-fractions-on-websites)

我正在将我的应用程序`android`从`IOS`. 在我的 android 应用程序中，我使用此代码来显示`fractions`

```
 Html.fromHtml("<sup>" + top + "</sup>/<sub>" + bottom + "</sub>"); 
```

但我不知道如何做到这一点`iOS`

上面的 Html 代码在 android 中是什么样子的，请看图片 ![图片](../Images/4f8b605c8dcc890992bf58e0112cc06b.png "图片")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:16:35.407

如果我是正确的，您要求格式化字符串，那么请在下面找到答案。将值视为浮点数，

```
NSString *fraction = [NSString stringWithFormat:@"%f / %f", top, bottom]; 
```

您可以将值设置为 UILabel 以显示目的。

# c++ - 在开发 C++ 中链接到 libopengl32.a 失败

> ID：14680198
> 
> 赞同：0
> 
> 时间：2013-02-04T04:05:02.347
> 
> 标签：c++, opengl, compiler-errors, mingw, dev-c++

当我尝试编译我的第一个 OpenGL 程序时，我收到了`cannot find -libopengl32.a`包含`-lws2_32 -libopengl32 -libglu32 -libglut32`在“将这些命令添加到链接器命令行”下的错误

编辑：如果有任何其他您认为相关的信息，例如我尝试使用的代码，请将其添加到评论中，我会将其添加到问题中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:55:05.310

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-10T14:10:51.920

更改 glut.h、libglut32.a 或 .lib，如果您想更确定...将 glut32.dll 文件复制到“window/system32/”...它将起作用....

如果不是...从您的 PC 中完全删除 Dec-c++ 并重新安装...当然是更新版本

# javascript - 如何在 node js 中运行多个应用程序？

> ID：14680204
> 
> 赞同：1
> 
> 时间：2013-02-04T04:06:34.073
> 
> 标签：javascript, node.js, express

我必须在节点 js 监听端口 80 中运行三个单独的应用程序。现在我正在使用这种方法

```
app.get('/barcelona/*', function(request, response) {

});
app.get('/real_madrid/*', function(request, response) {

});
app.get('/manchester/*', function(request, response) {

}); 
```

当我在“barcelona”或“real_madrid”或“manchester”中更改某些内容时，我必须重新启动我的所有应用程序。如果有任何语法错误，整个应用程序将关闭。我想要php之类的东西。应用程序中的错误不会相互影响。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:09:50.167

A common way to do this is to put a proxy in front, such as [nginx](http://nginx.org/). The proxy can route requests to specific Node.js-based applications transparently.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:36:03.443

我将分两部分回答这个问题。

1.  **处理异常**。在 Node.js 中，如果您的应用程序执行过程中发生异常，整个应用程序将被关闭。主要原因是 JavaScript 的单线程特性。处理应用程序中的异常总是比留给运行时更好。

2.  **更改/错误修复后重新部署**。我使用[Naught.js](https://github.com/indabamusic/naught)来管理我在生产中的部署。Naught.js 将监视您的节点进程，如果您的应用程序出现故障，它将重新启动该进程。代码更改后，您可以使用 Naught.js 来部署更改。Naught.js 只会在启动具有最新更改的新进程后关闭旧进程。这将确保您的应用程序的零停机时间。[Forver](https://github.com/nodejitsu/forever)也做了类似的事情。

如果您正在寻找运行应用程序的多个实例，您可以尝试[一下](http://nodejs.org/api/cluster.html)。

# ms-access - 数据库字段操作

> ID：14680205
> 
> 赞同：0
> 
> 时间：2013-02-04T04:06:36.540
> 
> 标签：ms-access

我收到了一个数据库，它非常复杂，所以我很难理解它。我提出我会为所有者清理它，但看着大量的关系我可能会改变一些更糟的东西。但是，我希望为他们解决一个问题，属性是一个名为 LoanStatus 的字段；-Text -ComboBox -RowSource：“当前”；“返回”；“过期”

我遇到的问题是，每当您借出物品时，您在行中填写资产编号，系统会在该行中为您返回到期日，但问题是，您可以借出相同的项目在不同的表中（对不同的人）无限次，我想让 LoanStatus 字段在您尝试将其借出时显示“AlreadyLoaned”。再一次写这篇文章让我很头疼，但我希望你们能理解。感谢您的时间！

我正在使用 MS Access 2007

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:15:13.153

根据数据规范化的原则，您不应该存储任何可以从数据库中的其他值计算出来的值。因此，它应该是从数据库中获取值的查询的一部分，而不是具有“已借出”值，以检查图书是否已借出。

它会是这样的：

```
Select Book.id as Name, count(Loan.id) as LoanedCount
from Book
left outer join Loan on Book.id = Loan.bookid
group by Book.id 
```

这样做是归还每一本书，以及它拥有的每笔贷款的数量。左外连接意味着您为每本书/贷款组合获得一行，如果该书没有贷款，则为一行书籍/无贷款。然后，您将具有同一本书的所有行分组在一起，计算它有多少个非空贷款 ID 并返回该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:27:12.180

如果您对规范化数据库具有管理访问权限，您将在相应表中为 LoanStatus 添加一个值“Occupado”。否则，有关您从中检索值的 ms access 数据库表的架构的更多信息将提供信息。除了必须将新值添加到数据库之外，您很可能还必须在“签出”过程中添加一些规则。

# c++ - 复制的可执行文件是否会在没有库的新机器上运行

> ID：14680207
> 
> 赞同：5
> 
> 时间：2013-02-04T04:06:38.900
> 
> 标签：c++, linker, executable

如果我在安装了许多库（例如 Boost）的 linux 机器上编译 C++ 程序，然后将该可执行文件复制到没有这些库的新 linux 机器，该可执行文件仍然可以正常运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T04:10:30.637

这在很大程度上取决于特定的库。那里有三种类型的库：

*   **仅头文件库**- 这些依赖项在编译时解决。
*   **静态库**- 这些依赖关系在链接时解决。
*   **共享（动态）库**- 这些依赖关系在运行时解决。

大多数 Boost 库是[仅头文件](http://www.boost.org/doc/libs/1_35_0/more/getting_started/windows.html#header-only-libraries)：它们不需要单独编译的库二进制文件或链接时的特殊处理。其他库是*静态*的，即它们仅在构建时用于链接。唯一必须在目标机器上可用的库是动态（共享）库；如果您没有动态库依赖项，则复制可执行文件并设置适当的权限将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:10:42.687

库可以静态链接（在这种情况下它们被复制到可执行文件中）或动态链接（在这种情况下它们由系统在运行时从其自己的副本加载）

几乎所有的库都是动态的——它只允许许多程序使用一个代码副本，这意味着您只能更新一个文件来修复错误。

# android - 如何完成一项活动（在调用新活动之前）

> ID：14680209
> 
> 赞同：1
> 
> 时间：2013-02-04T04:07:01.410
> 
> 标签：android

我知道`finish()`方法，但有没有办法在调用新活动之前完全完成活动？

如果你这样做

```
startActivity(intent);
finish(); 
```

在完全关闭前一个活动之前，您正在开始一项新活动。

有没有办法在调用新活动之前完全关闭活动？

提前非常感谢。

编辑：我需要这个，因为旧的活动是一个绘图文件。新活动是一个 listView 活动。当用户关闭绘图文件并启动 listView 时，该绘图文件不会显示在 listView 中。当我之后使用按钮的 onClickListener 更新 listView 时，listView 会更新 - 我认为这是因为之前使用该文件的活动已完全关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:21:33.277

尝试这个，

添加`nohistory`您的`manifest.xml`.

```
android:noHistory="true" 
```

别的，

```
Intent I = new Intent(A.this, B.class);
startActivity(I);
 A.this.finish(); 
```

本次A活动即将结束

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T04:12:09.040

Use this.finish(). or

use android:nohistory="true" in Android Manifest for an activity.

Even you can use System.exit(0).It will close the previous activity.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T04:42:39.910

我把 Intent intent = new Intent(iContext, MainActivity.class); 开始活动（意图）；

在 onDestroy 结束时。listView 现在会在新活动出现时更新。感谢您的帮助！

# wordpress - Wordpress - 如何获取孩子的所有父母 ID

> ID：14680211
> 
> 赞同：1
> 
> 时间：2013-02-04T04:07:22.753
> 
> 标签：wordpress

有谁能够帮我？我想在 wordpress 中获取子页面的所有父母 ID

> 父母 1
> 
> --父1.1
> 
> ----父1.1.1
> 
> ------子页面

所以我想获取Parent 1、Parent 1.1、Parent 1.1.1 的ID

谢谢，制作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:37:04.657

```
<?php
$pages = get_pages('child_of=X');
foreach($pages as $child) {
echo $child->ID; // The child ID
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:39:15.107

检查这篇文章希望它会帮助你。

[http://wordpress.org/support/topic/query-child-pages-of-a-current-page-and-loop-through-each-child-page](http://wordpress.org/support/topic/query-child-pages-of-a-current-page-and-loop-through-each-child-page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:20:18.270

在全球 $post 你可以简单地做的是

利用

```
$post->post_parent 
```

对于第一父母的父母 1.1.1

你可以看看

```
$post->ancestors 
```

其他父母的数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-12T17:09:03.093

你需要`get_post_ancestors()`；

[https://codex.wordpress.org/Function_Reference/get_post_ancestors](https://codex.wordpress.org/Function_Reference/get_post_ancestors)

# html - Angular 指令不适用于 Input type="number"

> ID：14680212
> 
> 赞同：2
> 
> 时间：2013-02-04T04:07:29.147
> 
> 标签：html, angularjs, directive

我的输入格式如下：

```
<input type="number" name="inputStageNumTeams" id="inputStageNumTeams"
 ng-model="s.numTeams" validate-greaterthan="2" required> 
```

但是，由于某种原因，我的自定义指令 validateGreaterthan 运行不正确。如果我将输入类型更改为“文本”，它就像一个魅力！如果可能的话，我想将输入类型保持为数字。

这是有问题的指令：

```
app.directive('validateGreaterthan', function() {
return {
    require: 'ngModel',
    link: function(scope, elm, attrs, ctrl) {
        ctrl.$parsers.unshift(function(viewValue) {
            var number = attrs.validateGreaterthan;
            if (parseInt(viewValue) !== NaN) {
                scope.numberValid = ((viewValue && (parseInt(viewValue) >= number)) ? 'valid' : undefined);
            }

            if(scope.numberValid) {
                ctrl.$setValidity('number', true);
                return viewValue;
            } else {
                ctrl.$setValidity('number', false);
                return undefined;
            }

        });
    }
};
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:44:02.890

为什么不尝试使用已经存在的 [min="{string}"] 指令？

[http://docs.angularjs.org/api/ng.directive:input.number](http://docs.angularjs.org/api/ng.directive:input.number)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:23:47.250

我很确定属性值（attrs.validateGreaterthan）是一个字符串。将该字符串转换为整数，以确保您正在比较相同的类型。

# javascript - Node.js Javascript 随机彩色打印

> ID：14680214
> 
> 赞同：1
> 
> 时间：2013-02-04T04:07:36.540
> 
> 标签：javascript, node.js, random, colors

我正在尝试使用颜色 javascript 模块 [https://github.com/Marak/colors.js](https://github.com/Marak/colors.js)

使用 node.js 在终端中打印随机颜色。随机生成器可以工作，但是带有句号的东西会弄乱语法并且不会正确打印颜色。

```
var colors = require('colors');

 Array.prototype.random = function (length) {
       return this[Math.floor((Math.random()*length))];
 }

 var color = ['.yellow', '.cyan', '.magenta', '.red', '.green', '.blue', '.rainbow', '.zebra']
 var rcolor = color.random(color.length)

console.log(rcolor + 'rcolor') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:18:43.723

你需要稍微改变你的代码

```
var colors = require('colors');

Array.prototype.random = function (length) {
  return this[Math.floor((Math.random()*length))];
}

var color = ['yellow', 'cyan', 'magenta', 'red', 'green', 'blue', 'rainbow', 'zebra']
var rcolor = color.random(color.length)

console.log(("Print in color " + rcolor)[rcolor]); 
```

这是因为颜色将原型添加到 String 类，所以在 JavaScript 中，您始终可以使用 [] 对对象执行属性方法，如果可以在每个字符串中使用它，如下所示：

```
console.log("Hello colors!"[rColor]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:15:51.983

首先，删除所有句点。然后你应该能够做这样的事情：

```
console.log(colors[randomColor]("Hello, world!")); 
```

或者：

```
console.log("Hello, world!"[randomColor]); 
```

这是有效的，因为`a.b`等效于`a["b"]`，除了后者，您可以`"b"`用表达式替换。由于颜色模块支持`colors.red(someString)`和`someString.red`，我们可以简单地更改它以使用`[]`语法并在那里放入一个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:16:53.717

以下代码（与您所拥有的不远）从给定列表中打印随机颜色。

```
var colors = require("colors");

Array.prototype.random = function () {
    return this[Math.floor(Math.random() * this.length)];
};

var colorsList = [".yellow", ".red", ".blue"];
var rColor = colorsList.random();

console.log(colorsList);
console.log(rColor); 
```

它包括`colors@0.6.0-1`，但我不知道你为什么需要它来写你写的东西。

# django - django-notification：AttributeError：“模块”对象没有属性“create_notice_type”

> ID：14680217
> 
> 赞同：1
> 
> 时间：2013-02-04T04:08:02.243
> 
> 标签：django, django-models

:)

我正在尝试在同一个项目上部署 django-notification 和 django-avatar，但是，当我运行 python2 manage.py syncdb 时，我收到了这个异常：

```
(dispersion)jorge [~/coders/desarrollo/dispersion] ~> python2 manage.py validate
python2 manage.py validate
0 errors found
(dispersion)jorge [~/coders/desarrollo/dispersion] ~> python2 manage.py syncdb
python2 manage.py syncdb
Creating tables ...
Creating table django_comments
Creating table django_comment_flags
Creating table threadedcomments_threadedcomment
Creating table threadedcomments_freethreadedcomment
Creating table threadedcomments_testmodel
Creating table notification_noticetype
Creating table notification_noticesetting
Creating table notification_noticequeuebatch
Creating table announcements_announcement
Creating table announcements_dismissal
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/commands/syncdb.py", line 110, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/sql.py", line 189, in emit_post_sync_signal
    interactive=interactive, db=db)
  File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/django_avatar-1.0.5-py2.7.egg/avatar/management/__init__.py", line 9, in create_notice_types
    notification.create_notice_type("avatar_updated", _("Avatar Updated"), _("avatar have been updated"))
AttributeError: 'module' object has no attribute 'create_notice_type'
(dispersion)jorge [~/coders/desarrollo/dispersion] ~> 
```

诡异的！嗯？我什至不知道为什么会发生这个错误。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T14:38:27.597

对，create_notice_type 已被删除。只需创建一个 NoticeType 的实例，如下所示：

```
# static block:
try:
    notification = get_app( 'notification' )
except ImproperlyConfigured:
    notification = None
..

# in your method:
if notification is not None and "notification" in settings.INSTALLED_APPS:
from django.utils.translation import ugettext_noop as _

message = {

    'user':     settings.DEFAULT_FROM_EMAIL, 
    'comment':  'no comment', 
    'type':     'welcome', 
    'descr':    'my description',
    # ..
}
try:

    notification.send([to_user], "welcome", message)
except NoticeType.DoesNotExist:
    NoticeType.create("welcome", _("Bla Bla"), _("How nice of you to visit our site"))
    notification.send([to_user], "welcome", message) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:52:44.643

这是因为最新版本的 django-notification（版本 1.0 位于[此处](https://github.com/pinax/django-notification)）被重构并从 models.py 中删除了 create_notice_type ....

这很麻烦，因为当前版本的 django-avatar 和 django-postman 依赖于 create_notice_type...

所以要解决这个问题，我必须通过以下方式安装先前版本的 django 通知：

```
pip install django-notification==0.2 
```

# ios - iOS Objective C 从 NSData 发送和获取 NSString

> ID：14680218
> 
> 赞同：1
> 
> 时间：2013-02-04T04:08:05.540
> 
> 标签：ios, objective-c, c

我一直在根据 RayWenderlich 的教程开发多人游戏，我的问题是我无法发送任何内容，我尝试`NSString`了`NSData`多种编码和解码（UTF8）等方式，但我总是得到类似于**\204**的东西（颠倒？）**B**（颠倒？）当我`printf`在接收端做a时，但是当我做一个NSLog时说（null）。

**这是.h**的修改部分

 **```
typedef struct {
    Message message;
    const char * theTeam;
} MessageGameBegin; 
```

这是让我发疯的**.m**代码：

```
 (void)sendGameBegin:(NSString *) team {
    NSString *strSQL = [[NSString alloc]init];
    strSQL = team;
    const char *bar = [strSQL cStringUsingEncoding:NSUTF8StringEncoding];
    NSLog(@"HOOOOOE %@\n",[[NSString alloc] initWithCString:bar encoding:NSUTF8StringEncoding]);

    MessageGameBegin message;
    message.theTeam = bar;
    message.message.messageType = kMessageTypeGameBegin;
    NSData *data = [NSData dataWithBytes:&message length:sizeof(MessageGameBegin)];
    [self sendData:data];

} 
```

然后在接收中，

```
 ....else if (message->messageType == kMessageTypeGameBegin) {

    MessageGameBegin * beginMessage = (MessageGameBegin *) [data bytes];
    myDecoded = [[NSString alloc] initWithUTF8String:beginMessage->theTeam];
    NSLog(@"NSLOOOOOOOG %@\n",myDecoded);

    printf(" BEGING MESS %s\n",beginMessage->theTeam);
    CCLOG(@"cl BEGING MESS %@\n",myDecoded);

    [self setGameState:kGameStateActive];
    self.enemy = [CCSprite spriteWithFile:myDecoded];

} 
```

`NSLog(@"HOOOOOE %@\n..`即使我是 100%，它甚至不会打印到控制台中，它的执行 返回`NSLog(@"NSLOOOOOOOG %@\n"..`(null) `printf`给出了奇怪的人类不可读的输出，就像我在 CCSprite 行找不到文件之前显示的那样，因为它说它是 nil

我需要知道我在尝试发送**NSSTrings**时做错了什么，甚至是更好的方法。请感谢您的帮助，自从我是新手以来，我已经把头发扯掉了 2 天目标c

这是我要开始的教程，它有一个可以在第 2 部分底部下载的源代码 [http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with -game-center-tutorial-part-12](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)

**编辑：** 最重要的是，整个目标是能够发送和接收数据中的字符串......我失败得很惨，所以不胜感激

@borrrden 这是我从你的帮助中得到的

发送：

```
MessageGameBegin message;
message.theTeam = bar;
message.message.messageType = kMessageTypeGameBegin;
//NSData *data = [NSData dataWithBytes:&message length:sizeof(MessageGameBegin)];
NSMutableData *data = [NSMutableData new];
[data appendBytes:&message length:sizeof(MessageGameBegin)];
[data appendBytes:message.theTeam length:strlen(message.theTeam)];
data.length = sizeof(MessageGameBegin) + strlen(message.theTeam);
[self sendData:data]; 
```

接收：

```
MessageGameBegin msg;
msg.theTeam = [[data subdataWithRange:NSMakeRange(sizeof(msg.message.messageType), data.length-sizeof(msg.message.messageType))] bytes];

NSLog(@"NSLOOOOOOOG %@\n",[[NSString alloc] initWithCString:msg.theTeam encoding:NSUTF8StringEncoding]); 
```

返回看起来更好的东西（颠倒？）ІOarizona.png 好像我的数据长度错误或什么的..我希望它返回 arizona.png ，它总是关闭 3 个字符.. arizona 的 3 前面，所以在这种情况下，是否建议只修剪 3 还是有其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T04:36:41.110

`sizeof`不是一个神奇的功能。它不会自动知道您的结构在堆中的时间。它只知道它在堆栈上占用了多少字节，不管它有多长`Message`，加上一个 char 指针的 4 个字节。所以你最终会得到一个指向数据在原始设备上的位置的指针，当在新设备上接收到它时，它只会是垃圾（你很幸运它没有崩溃）。您需要将字符串直接编码到`NSData`对象中，或者只是采用更简单的方法并创建一个适当的类。如果您要存储指针，我建议创建一个类。然后你可以实现`NSCoding`轻松转换`NSData`

**编辑：**

如果你*真的*必须自己做结构，你将不得不手动把`NSData`. 我仍然建议简单地上课。

假设我有这个结构：

```
typedef struct
{
    int testInt;
    const char *testString;
} SO2Test; 
```

我可以这样编码：

```
SO2Test test;
test.testInt = 5;
test.testString = "TEST";
NSMutableData *data = [NSMutableData new];
[data appendBytes:&(test.testInt) length:sizeof(int)];
[data appendBytes:test.testString length:strlen(test.testString)];
data.length = sizeof(int) + strlen(test.testString); 
```

这对字符串做出了一些严格的假设，例如字节顺序（如果您在两个 iOS 设备之间发送，这无关紧要，因为它们都是相同的）并且字符串是每个字符 1 个字节。如果您的字符串由于某种原因是 UTF-16，这将失败，因为它可能会提前达到 NULL 终止字符。你现在明白为什么上课会让你的生活更轻松了吗？ `NSString`将为您处理所有这些废话。

如果没问题，那么您可以像这样在另一边继续：

```
SO2Test test2;
int *intPtr = (int *)[[data subdataWithRange:NSMakeRange(0, sizeof(int))] bytes];
test2.testInt = *intPtr;
test2.testString = [[data subdataWithRange:NSMakeRange(sizeof(int), data.length-sizeof(int))] bytes]; 
```**

# c# - 隐藏由“图形”创建的图形

> ID：14680219
> 
> 赞同：1
> 
> 时间：2013-02-04T04:08:12.447
> 
> 标签：c#

我没有学习太多 C# 中的 Graphics 类，但我发现自己需要它来度过我每天的娱乐时光（编码以打发时间）。

我只想知道是否有一种方法可以存储绘制的图形（在它们在表单上可见之前），以便我可以同时绘制整个段，而不是一个一个地绘制。`Graphics`段是指可以使用该类绘制的形状的集合。

`.FillRectangle`换句话说，在我尝试通过调用或等效方法将其显示在屏幕上之前，我试图将所有这些绘制出来。

还有没有任何已知的方法可以在不使用 GDI+ 等现有方法的情况下绘制图形？

如果我错过了什么，请告诉我。

编辑代码：

```
 using (Graphics formGraphics = df.CreateGraphics())
        {
            this.DoubleBuffered = true;
            foreach (Dot d in memmap)
            {
                c = Color.FromArgb(d.r, d.g, d.b);
                using (SolidBrush brush = new SolidBrush(c))
                {
                    formGraphics.FillRectangle(brush, d.x, d.y, 1, 1);
                }
            }
            this.DoubleBuffered = false;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:45:09.677

如果您始终将 DoubleBuffered 属性设置为 true 并让框架处理它，那么您所做的应该会起作用。你试过吗？无论如何，我更喜欢拥有更多控制权并在我的代码上创建双缓冲区：

```
using
(
    var bufferedGraphics = BufferedGraphicsManager.Current.Allocate(formGraphics, 
      new Rectangle(0, 0, width, height));
)
{
    //Draw with bufferendGraphics.Graphics
    bufferedGraphics.Render();
} 
```

`formGraphics`如果您在执行过程中保持和活动状态，则上述代码可以进一步优化`bufferendGraphics`......但这会引入泄漏，您需要确保在关闭 from 之前处理它们。

顺便说一句，您为什么使用 CreateGraphics？我会覆盖表单的 OnPaint 并从 PaintEventArgs 中获取图形。

# java - Android- 从 DatePickerDialogFragment 中删除 Calendarview

> ID：14680221
> 
> 赞同：4
> 
> 时间：2013-02-04T04:08:31.030
> 
> 标签：java, android, calendar, android-calendar, calendarview

我有一个工作正常的 Datepickerdialog 片段。当我单击按钮时，datepickerdialog 打开，左侧有微调器日期选择，右侧有日历视图。

对于我在一个地方的应用程序，我只想显示微调器日期选择部分（必须删除或隐藏日历视图部分）

在其他地方，我希望必须显示日历视图部分，并且必须隐藏或删除微调器日期选择。

但是我尝试了很多不同的东西，比如隐藏日历视图，比如

```
 Method m = minDateSelector.getClass().getMethod("setCalendarViewShown", boolean.class);
 m.invoke(dp, false); 
```

但是当我添加这个时，我只会得到错误......

这个人也有同样的问题 [Datepicker 创建的 DialopFragment 也显示日历](https://stackoverflow.com/questions/14627983/datepicker-created-with-dialopfragment-showing-calender-also)

我的代码是

DatePickerActivity.java

```
import java.util.Calendar;
import android.app.Activity;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class DatePickerActivity extends Activity {
    DateDialogFragment frag;
    Button button;
    Calendar now;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        now = Calendar.getInstance();
        button = (Button)findViewById(R.id.date_button);
        button.setText(String.valueOf(now.get(Calendar.MONTH)+1)+"-"+String.valueOf(now.get(Calendar.DAY_OF_MONTH))+"-"+String.valueOf(now.get(Calendar.YEAR)));
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showDialog();   
            }
        });  
    }
    public void showDialog() {
        FragmentTransaction ft = getFragmentManager().beginTransaction(); //get the fragment
        frag = DateDialogFragment.newInstance(this, new DateDialogFragmentListener(){
            public void updateChangedDate(int year, int month, int day){
                button.setText(String.valueOf(month+1)+"-"+String.valueOf(day)+"-"+String.valueOf(year));
                now.set(year, month, day);
            }
        }, now);

        frag.show(ft, "DateDialogFragment");
    }
    public interface DateDialogFragmentListener{
        //this interface is a listener between the Date Dialog fragment and the activity to update the buttons date
        public void updateChangedDate(int year, int month, int day);
    }  
} 
```

DateDialogFragment.java

```
import java.util.Calendar;

import com.zeroe.DatePickerActivity.DateDialogFragmentListener;

import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.content.Context;
import android.os.Bundle;
import android.widget.DatePicker;

public class DateDialogFragment extends DialogFragment {

    public static String TAG = "DateDialogFragment";
    static Context mContext; //I guess hold the context that called it. Needed when making a DatePickerDialog. I guess its needed when conncting the fragment with the context
    static int mYear;
    static int mMonth;
    static int mDay;
    static DateDialogFragmentListener mListener;

    public static DateDialogFragment newInstance(Context context, DateDialogFragmentListener listener, Calendar now) {
        DateDialogFragment dialog = new DateDialogFragment();
        mContext = context;
        mListener = listener;

        mYear = now.get(Calendar.YEAR);
        mMonth = now.get(Calendar.MONTH);
        mDay = now.get(Calendar.DAY_OF_MONTH);
        /*I dont really see the purpose of the below*/
        Bundle args = new Bundle();
        args.putString("title", "Choose Date");
        dialog.setArguments(args);//setArguments can only be called before fragment is attached to an activity, so right after the fragment is created

        return dialog;
    }
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new DatePickerDialog(mContext, mDateSetListener, mYear, mMonth, mDay);
    }
    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;

            mListener.updateChangedDate(year, monthOfYear, dayOfMonth);
        }
    };
} 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button 
        android:id="@+id/date_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="03-18-2012"
        android:onClick="clickMe"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T17:07:46.020

我使用了 Datepicker Dialog Fragment，在对话框中显示日期选择器。

这是我的代码：

MainActivity.java

```
package com.example.testmydrag;

import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.DatePicker;
import android.support.v4.app.FragmentActivity;
import android.app.Dialog;
import android.app.DatePickerDialog;
import android.support.v4.app.DialogFragment;

import java.util.Calendar;

public class MainActivity extends FragmentActivity {

EditText mEdit;
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void selectDate(View view) {

        DialogFragment newFragment = new SelectDateFragment();
        newFragment.show(getSupportFragmentManager(), "DatePicker");

    }

    public void setTheDate(int year, int month, int day) {

        mEdit = (EditText)findViewById(R.id.Text);
        mEdit.setText(month+"/"+day+"/"+year);
    }
    /*
     * Date Picker Dialog
     */
    public class SelectDateFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {
        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {

            final Calendar c = Calendar.getInstance();
            int yy = c.get(Calendar.YEAR);
            int mm = c.get(Calendar.MONTH);
            int dd = c.get(Calendar.DAY_OF_MONTH);

            DatePickerDialog dialog = new DatePickerDialog(getActivity(),this,c.YEAR, c.MONTH, c.DATE);

            /*Calendar View if you want to Remove Set it to False*/
            dialog.getDatePicker().setCalendarViewShown(true);

            /*Spinner View if you want to Show Set it to True*/
            dialog.getDatePicker().setSpinnersShown(false);

            dialog.setTitle("Pick a date");
            return dialog;
        }
        public void onDateSet(DatePicker view, int yy, int mm, int dd) {

            setTheDate(yy, mm+1, dd);
        }
    }

} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <EditText android:text="@+string/date_text" 
        android:id="@+id/Text" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" />
    <Button 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:text="@+string/pick_date" 
        android:onClick="selectDate" />

</LinearLayout> 
```

# objective-c - NSNotfications 与 NSURLConnections

> ID：14680224
> 
> 赞同：0
> 
> 时间：2013-02-04T04:08:46.160
> 
> 标签：objective-c, xcode

我目前正在编写我的应用程序，该应用程序建立连接以解析来自网站的时间，然后触发 60 秒的计时器。60 秒后，它会重新加载连接，并从站点获取最新时间。

我正在努力做到这一点，当应用程序进入后台然后进入前台时，它知道立即开始新的连接。我正在使用 NSNotification 执行此操作。

但是通读文档，我不知道我应该使用哪一个

```
UIApplicationDidBecomeActiveNotification 
```

或者

```
UIApplicationWillEnterForegroundNotification 
```

这些之间是否有任何重大差异，以及应该调用一个而不是另一个的任何情况。

我能想到的唯一一件事是使用 NSURL 连接，我可能应该使用 WillEnterForeground，所以当视图返回时它会开始滚动。或者这是错误的思考方式，我应该等到我的视图完全加载后再尝试加载数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:50:39.717

它们是不同的。

UIApplicationWillEnterForegroundNotification 不会在从睡眠模式或调用时发布，而只会在进行多任务操作时发布。

UIApplicationDidBecomeActiveNotification 将在手机从睡眠模式或从其他应用程序返回到您的应用程序时发布（完成来电或单击低电量警告的确定按钮）。当您的应用从后台返回时，它也会被调用。

在您的情况下，我认为使用 UIApplicationDidBecomeActiveNotification 会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:17:53.517

UIApplicationDidBecomeActiveNotification 当应用程序激活时发布。应用程序在接收事件时处于活动状态。一个活跃的应用程序可以说是有焦点的。它在启动后获得焦点，在弹出覆盖窗口或设备锁定时失去焦点，并在设备解锁时获得焦点。

UIApplicationWillEnterForegroundNotification 在应用程序离开后台状态成为活动应用程序之前不久发布。通知的对象是 UIApplication 对象。没有 userInfo 字典。

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

# css - Magento 绝对定位主屏幕 CSS 设置

> ID：14680226
> 
> 赞同：0
> 
> 时间：2013-02-04T04:08:47.860
> 
> 标签：css, magento

您好，我正在尝试在主页上放置一些略微重叠的图像。我正在使用我在网上找到的以下 css 设置：

```
#png1 {
position: absolute;
top:0;
left:0;
z-index:1;
padding-top:20px;
}

#png2 {
position:absolute;
/*
set top and left here
*/
z-index:2;
padding-left:275px;
top:0px;
padding-top:0px;
}
#png3 {
position:absolute;
/*
set top and left here
*/
z-index:1;
padding-left:610px;
top:0px;
padding-top:20px;
} 
```

我遇到的问题是第一张图片#png1 显示在左上角远角。

接下来的两个图像重叠正确放置也在屏幕的最顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:14:10.020

绝对定位将定位在第一个“相对”父级的（即左上角）角。

确保您的主列设置为相对。

然后，尽量不要将left和padding结合起来。

```
First : top: 0;left: 0;
Last : top:0; right:0;

Middle : top:0; left:XXXXpx (need to found this value according to your needs, looking at chosen paddings I must say 275px;) 
```

# linux - linux script for loop

> ID：14680228
> 
> 赞同：0
> 
> 时间：2013-02-04T04:08:55.420
> 
> 标签：linux

I have a small question regarding for loops in linux bash scripts.

I have a folder that contains 10000 files. I wrote for loop to list 100 files from the 10000.

```
For a in ~/Desktop/folder/*.txt
Do

    Echo $a

Done 
```

However, I need to list the biggest 100 files in the folder and not the first 100 files depending on alphabet.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:18:12.087

为什么要使用 for 循环？如果您只想查看 100 个最大的文件，请执行以下操作：

```
ls -S | head -n 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:18:00.983

如果您只是为了获取文件而执行循环，请注意有一个工具可以做到这一点：`ls`.

有关适合您问题的命令，请参见 ls 的手册页：`man ls`

要回答您的问题：

您可以使用 的输出`ls -S`，它按大小对文件进行排序以循环遍历：

```
ls -S *.txt | while read file; do 
    echo $file
done 
```

要限制文件的数量，您可以使用`head`. 以下示例将为您提供输出的前 100 行`ls`。

```
ls *.txt | head -n 100 
```

# c - how to detect a file is opened or not in c

> ID：14680232
> 
> 赞同：14
> 
> 时间：2013-02-04T04:09:17.297
> 
> 标签：c

I'm trying to output some string on a txt file by using c program

however, I need to see if the I have the permission to write on the txt file, if not, I need to print out the error message? However, I don't know how to detect if I successfully open a file or not, could someone help me about this? thanks

The code is like this

```
File *file = fopen("text.txt", "a");

fprintf(file, "Successfully wrote to the file.");

//TO DO (Which I don't know how to do this)
//If dont have write permission to text.txt, i.e. open was failed
//print an error message and the numeric error number 
```

Thank you for anyone helps, thanks a lot

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-04T04:14:32.830

您需要检查 fopen 的返回值。从手册页：

```
RETURN VALUE
   Upon successful completion fopen(), fdopen() and freopen() return a FILE pointer.
   Otherwise, NULL is returned and errno is set to indicate the error. 
```

要再次检查写入是否成功，请检查 fprintf 或 fwrite 的返回值。要打印失败的原因，您可以检查 errno，或使用 perror 打印错误。

```
f = fopen("text", "rw");
if (f == NULL) {
    perror("Failed: ");
    return 1;
} 
```

perror 将打印如下错误（在没有权限的情况下）：

```
Failed: Permission denied 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-04T04:18:07.303

您可以进行一些错误检查以查看对 fopen 和 fprintf 的调用是否成功。

fopen 的返回值是成功时指向文件对象的指针，失败时是 NULL 指针。您可以检查 NULL 返回值。

```
FILE *file = fopen("text.txt", "a");

if (file == NULL) {
     perror("Error opening file: ");
} 
```

同样 fprintf 在错误时返回一个负数。你可以做个`if(fprintf() < 1)`检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T04:15:03.223

```
f = fopen( path, mode );
if( f == NULL ) {
  perror( path );
} 
```

# android - Listview - inflate new view on click

> ID：14680233
> 
> 赞同：0
> 
> 时间：2013-02-04T04:09:19.513
> 
> 标签：android

I have a listview in which each view contains the summary of a topic, along with a few other pieces of data. When the user clicks one of the items, I want to inflate a new view that contains the summary as well as the full text of the question, plus a few new pieces of data. I would like this to display inside the current listview, not launch a new activity. How could I go about doing this?

Edit: I'm thinking that one way to do this would be, rather than creating/inflating a new view, to put all of the elements in the initial view but set some of them to invisible initially. Then I can program the OnClickListener to set those items visible. My question, then, is how to get access to the items in each view?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:55:38.970

感谢您建议可扩展的列表视图 - 这是一个好主意，我将来可能会使用它。但是，对于这种情况，我认为将所有元素加载到单个视图中并将其中一些元素设置为不可见的解决方案效果最好。我没有将 OnItemClickedListener 添加到 ListView，而是在适配器的 getView 方法中将 OnClickListeners 添加到视图本身。现在似乎工作得很好，但是我愿意接受关于这样做的想法/其他建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:34:41.863

根据我理解您的问题，我想建议您应该使用可扩展的列表视图。并将您的描述或额外信息作为每个组的子项。

您将找到可扩展列表视图的示例。[这里](http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html)

# database - Connect Application to Database theory

> ID：14680235
> 
> 赞同：0
> 
> 时间：2013-02-04T04:09:38.647
> 
> 标签：database

i have questions about how database works with application.

Is all applications required to connect to a server first inorder to connect to a database? For example: app <- server <- database.

i have one more question: if i step up a database in my desktop and i wanted to use my java program, which is in my another pc, what is the easiest way to connect them? i did try mysql and db2, but they seems too complicated for me becuase i have no idea how to work them out.

one last question: if i have a db2 database in my linux, how do I get the host name or address, which is used for set up a connection in my java program that is not located in the same computer.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:01:55.903

您需要检查其他系统的 IP 地址，并且您需要为数据库打开防火墙端口，然后您可以从 INTRANET 中的任何系统访问该数据库。

# url - Did Chrome break svg stroke='url(#...)'?

> ID：14680240
> 
> 赞同：1
> 
> 时间：2013-02-04T04:09:59.567
> 
> 标签：url, google-chrome, svg, fill, stroke

In early December I put up a web page developed in Chrome using HTML tables with fancy borders created with SVG. Because the table cell size is unknown, I must use relative (%) coordinates to get to the bottom and right borders. Therefore I must use line elements. I can fill those lines with a pattern using the stroke='url(#...)' method, where the ... is a pattern element in the local defs section. This is no longer working in Chrome, but is in Safari and Firefox. The very similar fill='url(#...)' is working in Chrome, but I cannot use it with relative anchor coordinates.

Anybody run into this?

Here is a test case:

```
<svg patternUnits='userSpaceOnUse' xmlns='http://www.w3.org/2000/svg' 
xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>

<defs>
    <pattern id='utrim' height='10' width='10' patternUnits='userSpaceOnUse' >
                <rect height='10' width='5' fill='green' />
    </pattern>

    <pattern id='utrim2' height='10' width='10' patternUnits='userSpaceOnUse' >
                <rect height='10' width='5' fill='red' />
    </pattern>

</defs>

<g > 
    <line x1='0' y1='0' x2='100%' y2='0' stroke-width='20' stroke='url(#utrim)' />
    <rect x='0' y='0' width='100%' height='5' fill='url(#utrim2)' />
</g> 

</svg> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T14:33:56.773

也许有点晚了，但纯水平线无法使用 url。
您可以使用一个小的偏移量来克服这个问题：

```
<line x1='0' y1='0' x2='100%' y2='0.01' stroke-width='20' stroke='url(#utrim)' /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:07:47.660

好吧，我已经向 Chromium 报告了这一点。

我想出了如何用填充的矩形来解决这个问题。我可以将矩形定位在视口的下边缘和右边缘，用 transform='translate(...)' 将它们拉回来，然后用图案填充它们。图案与其填充的空间尺寸对齐，这是我没有意识到的，这使得一切都按照我需要的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-05T14:44:41.917

从 chrome 72 开始，'#' 表示 uri 的结束。[https://www.chromestatus.com/feature/5656049583390720](https://www.chromestatus.com/feature/5656049583390720)

# lotus-notes - Lotus Notes Scheduled agent failed to open database in different server

> ID：14680242
> 
> 赞同：2
> 
> 时间：2013-02-04T04:10:04.287
> 
> 标签：lotus-notes, lotus-domino

I have a database in server 1 which refers to multiple databases in server 2 for record validation purposes. When the scheduled agent runs, it encounters an "Object Variable not set" error. However, when I tried to manually run the agent (Right click agent name, click Run) it runs smoothly without error.

I simulated the database setup in 2 virtual servers and was able to reproduce the error. Line by line debugging shows that the error occurred when it tries to open the database in the other server. Since manual run works smoothly, I do not think the code or variables (server & database path) is wrong.

I've check the ACL for all databases to include the signer and server, also tried to schedule run the agent in all 3 security modes (Restricted, Unrestricted and Restricted with Admin Right). I've looked into the server document and security and allowed access to and from both servers. Anything else that I may have missed?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T05:24:36.337

我们将运行代理的服务器称为“server1”，将存储数据库的服务器称为“server2”。问题是代理以签署它的用户的身份运行，并且 server1 已经验证了该签名，但 server2 没有。Server2 需要知道签名以便它可以对数据库强制执行 ACL，因此 server2 必须从 server1 获取签名信息。但是 server1 理论上可以对 server2 撒谎，因此默认情况下 server2 不信任来自 server1 的签名信息。

幸运的是，有一种方法可以告诉 server2 信任在 server1 上运行的代理上的签名。在 server2 上 Domino 目录中 server2 的服务器文档中，转到 Security 选项卡，找到标有“Trusted Servers”的字段。在此字段中输入 server1 的标准名称，然后重新启动 server2。（我不确定是否真的需要重新启动。）

这应该允许您在 server1 上的代理读取 server2 上的数据库。

# android - gdb debugging non-native (Java) Android apps?

> ID：14680243
> 
> 赞同：0
> 
> 时间：2013-02-04T04:10:06.267
> 
> 标签：android, gdb

I started learning the Android-NDK, and learning little about the [suggested](http://developer.android.com/tools/projects/projects-eclipse.html), Eclipse-Java-development approach.

To debug non-native apps, it appears there are [more tools](http://developer.android.com/tools/debugging/index.html) to learn. It would appear that these tools exist because of something gdb is missing.

Can gdb be used to debug any binary? What would prevent gdb from attaching to a running non-native PID? Is there any reason why a non-native (Java) app cannot be debugged by gdb?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T12:08:02.167

与 gdb 类似的工具是 jdb，它适用于 android。您可以在这篇优秀的博客文章中找到更多信息：（jswat 似乎也很受欢迎）

[http://codeseekah.com/2012/02/16/command-line-android-development-debugging/](http://codeseekah.com/2012/02/16/command-line-android-development-debugging/)

# c - 使用 sleep() 时 C 中 puts() 和 printf() 的区别

> ID：14680252
> 
> 赞同：7
> 
> 时间：2013-02-04T04:10:43.593
> 
> 标签：c, sleep, puts

我想知道使用 sleep() 函数时 puts() 和 printf() 函数之间的区别。

这是我的代码（C语言）：

```
printf("hello, world");
sleep(1);
printf("Good, bye!"); 
```

程序编译运行后，好像会**先休眠**，然后打印“hello, worldGood, bye!”

但是，如果使用 puts() 而不是 printf()，它将打印“hello, world”，然后休眠，最后打印“Good, bye”。

```
puts("hello, world");
sleep(1);
puts("Good, bye!); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T04:13:21.627

这是因为缓冲 - 默认情况下，标准输出缓冲到每个新行。`printf()`不包含换行符，因此不会刷新输出。`puts()`包括换行符，因此输出被刷新。

您可以`printf()`通过换行来刷新：

```
printf("hello, world\n"); 
```

或直接致电`fflush()`：

```
fflush(stdout); 
```

有关缓冲的更多信息，请参见手册页[`setbuf()`](http://www.kernel.org/doc/man-pages/online/pages/man3/setbuf.3.html)：

> ```
> The three types of buffering available are unbuffered, block buffered, and
>    line buffered.  When an output stream is unbuffered, information appears on
>    the destination file or terminal as soon as written; when it is block 
>    buffered many characters are saved up and written as a block; when it 
>    is line buffered characters are saved up until a newline is output or input
>    is read from any stream attached to a terminal device (typically stdin).
>    ....
>    If a stream refers to a terminal (as stdout normally does) it is 
>    line buffered. 
>    ....
>    The standard error stream stderr is always unbuffered by default. 
> ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-04T04:12:32.990

这是因为`puts`它还输出一个换行符，在可以确定为交互式的设备上，默认情况下会导致刷新（对于标准输出）^((a))。

如果您最初`printf`在末尾输出换行符，您应该会看到类似的效果：

```
printf("hello, world\n"); 
```

或者如果你`fflush (stdout);`在`sleep()`打电话之前。

的相关部分`C11`是`7.21.3 Files`，部分`/7`：

> 在程序启动时，三个文本流是预定义的，不需要显式打开——标准输入（用于读取常规输入）、标准输出（用于写入常规输出）和标准错误（用于写入诊断输出）。最初打开时，标准错误流没有完全缓冲；当且仅当可以确定流不引用交互式设备时，标准输入和标准输出流才被完全缓冲。

这可以追溯到`C89/90 4.9.3 Files`：

> 在程序启动时，预定义了三个文本流，不需要显式打开——标准输入（用于读取常规输入）、标准输出（用于写入常规输出）和标准错误（用于写入诊断输出）。打开时，标准错误流没有完全缓冲；当且仅当可以确定流不引用交互式设备时，标准输入和标准输出流才被完全缓冲。

* * *

^((a)) : 没*那么*简单。对于初学者来说，这是依赖于实现的，因为标准规定构成交互式设备的东西是依赖于实现的（*行为*是指定的，但不是影响该行为的事物）。

其次（根据[此处](https://stackoverflow.com/questions/3723795/is-stdout-line-buffered-unbuffered-or-indeterminate-by-default)），标准仅在标准输出*完全*缓冲时（当设备绝对不是交互式时）强制要求。对于交互式设备，它是无缓冲的还是行缓冲的，是一个实现决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:12:46.120

据我了解，如果存在换行符， printf 将刷新流`\n`。放，我不太确定。它可能取决于实现。

您的睡眠时间足以让 printf 不包含 a`\n`来刷新流。

我建议您在需要时刷新流，`fflush(stdout);` 然后您可以完全避免睡眠。

# sql - Oracle Analytical Functions 折叠记录

> ID：14680254
> 
> 赞同：2
> 
> 时间：2013-02-04T04:10:56.580
> 
> 标签：sql, oracle

可以使用分析功能来折叠这些记录吗

```
ssid  start_time            end_time                op_code
65F   08/JAN/2013 14:18:33  08/JAN/2013 14:18:34    2
65F   08/JAN/2013 14:18:53  08/JAN/2013 14:18:54    2
65F   08/JAN/2013 14:18:55  08/JAN/2013 14:18:59    3
65F   08/JAN/2013 14:19:33  08/JAN/2013 14:19:34    2
65F   08/JAN/2013 14:19:53  08/JAN/2013 14:19:54    2
65F   08/JAN/2013 14:19:55  08/JAN/2013 14:19:59    3
72F   08/JAN/2013 14:20:55  08/JAN/2013 14:20:56    2
72F   08/JAN/2013 14:19:57  08/JAN/2013 14:19:59    2 
```

对此

```
ssid  start_time            end_time              c_dt                 op_code
65F   08/JAN/2013 14:18:33  08/JAN/2013 14:18:54  08/JAN/2013 14:18:59   2
65F   08/JAN/2013 14:19:33  08/JAN/2013 14:19:54  08/JAN/2013 14:19:59   2
72F   08/JAN/2013 14:19:57  08/JAN/2013 14:20:56 
```

或者我必须只在 for 循环中处理它。我在 Oracle 11gR2

如果下一个 op_code 为 2，则 end_time 成为下一条记录的 end_time，我们继续替换该记录的结束时间，直到具有 op_code 3 的相同 ssid 到达。当 op_code 3 的记录到达时，我们生成 c_dt，它是具有相同 ssid 但 op_code 3 的记录的结束时间。我们为下一条记录重新开始这个过程

如果我们没有为特定 ssid 找到 op_code 3 的记录，则 c_dt 将为空，但 end_time 将是具有相同 ssid 的下一条记录的 end_time。

希望我清楚这个棘手的逻辑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:45:03.303

我会第一个说这不漂亮，但它应该让你朝着正确的方向前进。

首先，创建一个 CTE，其中包含具有相应行号的所有记录。

其次，创建另一个 CTE，该 CTE 具有操作码不相同的下一条记录。

第三，创建另一个具有最小行号、最大行号和下一个行号（可能为空）的 CTE，并使用它来获取结果。

它很可能被简化，但这是我的第一次尝试。

```
WITH CTE AS (
  SELECT 
     t.ssid,t.start_time,t.end_time,t.op_code
    ,ROW_NUMBER() OVER (ORDER BY Start_Time) rn
  FROM YourTable t
) , 
CTE2 AS (
  SELECT C.SSID, C.RN, MIN(C2.RN) RN2
  FROM CTE C
    LEFT JOIN CTE C2 ON 
      C.RN < C2.RN AND 
      C.OP_CODE <> C2.OP_CODE AND 
      C.SSID = C2.SSID
  WHERE C.Op_Code = 2
  GROUP BY C.SSID, C.RN
) ,
CTE3 AS (
  SELECT SSID, MIN(RN) MinRN, MAX(RN) MaxRN, RN2 
  FROM CTE2
  GROUP BY SSID, RN2
) 
SELECT c.ssid, 
  c.start_time, 
  c3.end_time, 
  c4.end_time c_dt, 
  c.op_code
FROM CTE c
   JOIN CTE3 c2 ON c.RN = c2.MinRN
   JOIN CTE c3 ON c2.MaxRN = c3.RN
   LEFT JOIN CTE c4 ON c2.RN2 = c4.RN 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!4/eb537/1)。

祝你好运。

# go - Go 中 fmt.Println() 和 println() 的区别

> ID：14680255
> 
> 赞同：152
> 
> 时间：2013-02-04T04:11:28.007
> 
> 标签：go, println

如下图所示，两者`fmt.Println()`和`println()`在 Go 中给出相同的输出：`Hello world!`

但是：它们之间有何不同？

片段1、使用[`fmt`](https://golang.org/pkg/fmt/)包；

```
package main

import (
    "fmt"
)

func main() {
    fmt.Println("Hello world!")
} 
```

Snippet 2，没有`fmt`包装；

```
package main

func main() {
    println("Hello world!")
} 
```

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-02-04T04:28:38.263

`println`是一个内置函数（进入运行时），最终可能会被删除，而`fmt`包在标准库中，它将持续存在。请参阅有关该主题[的规范](http://golang.org/ref/spec#Bootstrapping)。

对于语言开发人员来说，没有依赖项很方便`println`，但要走的路是使用`fmt`包或类似的东西（`log`例如）。

正如您[在实现中看到的那样，](https://github.com/golang/go/blob/a1e9148e3dbb20a18e0139583e7d835cc7a820bf/src/runtime/print.go#L58)这些`print(ln)`功能甚至不是为了远程支持不同的输出模式而设计的，主要是一个调试工具。

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2013-02-04T04:51:26.450

以尼莫的回答为基础：

`println`是语言中内置的函数。它位于[规范](http://golang.org/ref/spec#Bootstrapping)的 Bootstrapping 部分。从链接：

> 当前的实现提供了几个在引导期间有用的内置函数。这些功能已记录在案以确保完整性，但不保证保留在该语言中。他们不返回结果。
> 
> ```
> Function   Behavior
> 
> print      prints all arguments; formatting of arguments is implementation-specific
> println    like print but prints spaces between arguments and a newline at the end 
> ```

因此，它们对开发人员很有用，因为它们缺少依赖项（内置在编译器中），但在生产代码中却没有。同样重要的是要注意`print`并`println` **报告给`stderr`，而不是`stdout`**。

但是，由 提供的系列`fmt`是在生产代码中构建的。`stdout`除非另有说明，否则他们可预测地向 报告。它们更加通用（`fmt.Fprint*`可以报告给任何类型`io.Writer`，例如`os.Stdout`, `os.Stderr`，甚至是`net.Conn`类型。）并且不是特定于实现的。

大多数负责输出的包都`fmt`具有依赖项，例如`log`. 如果您的程序将在生产中输出任何内容，`fmt`那么很可能是您想要的包。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-09-21T16:20:50.477

我可以在这里看到区别：

rangeOverIntsAndStrings(1, 5)

```
func rangeOverIntsAndStrings(args ...interface{}) {
    for _, v := range args {
        println(v)
    }
} 
```

// 输出

```
(0x108f060,0x10c5358)
(0x108f060,0x10c5360) 
```

对比

```
func rangeOverIntsAndStrings(args ...interface{}) {
    for _, v := range args {
        fmt.Println(v)
    }
} 
```

// 输出

```
1
5 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-05-27T09:07:34.343

有趣的例子：

```
➜  netpoll git:(develop) ✗ cat test.go
package main

import "fmt"

func main() {
        a := new(struct{})
        b := new(struct{})
        println(a, b, a == b)

        c := new(struct{})
        d := new(struct{})
        fmt.Printf("%v %v %v\n", c, d, c == d)
}
➜  netpoll git:(develop) ✗ go run test.go       
0xc000074f47 0xc000074f47 false
&{} &{} true
➜  netpoll git:(develop) ✗ go run -gcflags="-m" test.go
# command-line-arguments
./test.go:12:12: inlining call to fmt.Printf
./test.go:6:10: new(struct {}) does not escape
./test.go:7:10: new(struct {}) does not escape
./test.go:10:10: new(struct {}) escapes to heap
./test.go:11:10: new(struct {}) escapes to heap
./test.go:12:35: c == d escapes to heap
./test.go:12:12: []interface {} literal does not escape
<autogenerated>:1: .this does not escape
0xc000074f47 0xc000074f47 false
&{} &{} true 
```

`println`这是和之间的区别`fmt.Printf`。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-09-16T15:20:25.443

至于区别，[这](https://play.golang.org/p/RW9yhffJ3W)是一个例子。

`println()`打印一个指向函数测试地址的指针。

`fmt.Println()`打印函数的地址。

# javascript - Firefox window.innerHeight 太小

> ID：14680256
> 
> 赞同：0
> 
> 时间：2013-02-04T04:11:32.940
> 
> 标签：javascript, firefox, svg

我在这里处理一些 javascript svg 图形，我发现我真的不能依赖 Firefox 上的 window.innerHeight（或 outerHeight）的值。我正在运行带有 firefox 18.0.1 的 Ubuntu 12.04，并且在 1366x768 屏幕上，firefox 返回的 window.innerHeight 值为 283。Chrome 在同一屏幕上返回 656。这种巨大的差异有什么原因吗？我四处寻找有这个问题的人，但我发现的只是一张封闭的 jquery [ticket](http://bugs.jquery.com/ticket/13333)。这是我正在使用的代码的骨架：

```
<!DOCTYPE html>
<html style="border-width: 0px; margin: 0px; width: 100%; height: 100%" xmlns="http://www.w3.org/1999/xhtml">
<!-- Head with some scripts and style -->
<body>
<svg xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink"
style="position:absolute; width:100%; height:100%"
xmlns:ev="http://www.w3.org/2001/xml-events" version="1.1" baseProfile="full"
preserveAspectRatio="xMinYMin meet"
viewBox="0 0 1400 700"
onload="Initialize(evt)">
  <script type="text/ecmascript"><![CDATA[
    Bunch of javascript here
  ]]></script>
<!-- SVG Element definitions -->
</svg>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:19:33.837

问题可能是（好吧，肯定是上面的评论）使用浏览器的缩放，它改变了 CSS 像素的大小，从而改变了以 CSS 像素为单位的视口大小。

# c++ - Is initialized struct immutable?

> ID：14680263
> 
> 赞同：1
> 
> 时间：2013-02-04T04:12:39.787
> 
> 标签：c++

I initialized a test case as a global variable, here:

```
void InsertNode(BSTNode* &t, const int &key) {
    if (t == NULL) {
        t = new BSTNode;
        t->key = key;
        t->left = t->right = NULL;
    } else {
        if (key != t->key) {
        if (key < t->key)
                InsertNode(t->left, key);
            else
                InsertNode(t->right, key);
        }
    }
}

BSTNode t1[] = {
 {4, &t1[1], &t1[2]},
 {2, &t1[3], &t1[4]},
 {6, &t1[5], &t1[6]},
 {1, NULL, NULL},
 {3, NULL, NULL},
 {5, NULL, NULL},
 {7, NULL, NULL}
};

int main() {
    InsertNode(t1, 0);
    return 0;
} 
```

However, when I try to modify t1, it gives me an error:

```
invalid initialization of non-const reference of type 'BSTNode*&' from a temporary of type 'BSTNode*' 
```

Could someone explain this for me? Thank you!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:22:58.503

问题是您的函数声明它可能会更改指针：

```
void InsertNode(BSTNode* &t, const int &key) { 
```

它将非常量指针的引用作为参数，因此它有可能修改该指针。但是，当您执行此调用时：

```
InsertNode(t1, 0); 
```

您正在传递一个不可修改的指针，因为 t1 是一个数组。数组可以像指针一样使用，但不能让指针指向其他地方。

解决此问题的一种方法是具有两个不同的功能：

```
void InsertNode(BSTNode* &t, const int &key);

void AddNode(BSTNode* t, const int &key) {
    assert(t!=NULL);
    if (key != t->key) {
    if (key < t->key)
            InsertNode(t->left, key);
        else
            InsertNode(t->right, key);
    }
}

void InsertNode(BSTNode* &t, const int &key) {
    if (t == NULL) {
        t = new BSTNode;
        t->key = key;
        t->left = t->right = NULL;
    } else {
        AddNode(t,key);
    }
} 
```

然后打电话

```
AddNode(t1, 0); 
```

# c# - open multiple files "sequence"

> ID：14680267
> 
> 赞同：0
> 
> 时间：2013-02-04T04:12:59.537
> 
> 标签：c#, asp.net-mvc-3

My application is ASP .NET MVC; I am trying to open multiple files from a directory and store the files names in a variable (collection). For example if I have 10 files named (M1, M2, M3 ...), I am using the following to open one file:

```
string imagefile =
    System.Web.HttpContext.Current.Server.MapPath("~/Content/" + "M1"); 
```

I know the number of files in that directory. Would appreciate your suggestions, thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:18:05.190

也许是这样：

```
string[] files = Directory.GetFiles(System.Web.HttpContext.Current.Server.MapPath("~/Content/"), "M*"); 
```

MSDN：http: [//msdn.microsoft.com/en-au/library/wz42302f.aspx](http://msdn.microsoft.com/en-au/library/wz42302f.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:43:44.547

```
Public Function GetFilesNames() As List(Of String)

    Dim dir As New System.IO.DirectoryInfo(_filesDirectory)
    Dim lstFiiles As New List(Of String)

    If dir.Exists() Then
        Dim files As FileInfo() = dir.GetFiles("*.png")
        For Each f As FileInfo In files
            lstFiiles.Add(f.Name.Substring(0, f.Name.IndexOf(".")))
        Next
    End If
    Return lstFiiles
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:25:05.383

如果您知道具有正确名称的文件的数量，那么编写代码将非常容易。

使用下面的代码

```
string[] imagefile = System.Web.HttpContext.Current.Server.MapPath("~/Content/" + "M*"); 
```

# backbone.js - 无法在模板中选择某些单选按钮

> ID：14680269
> 
> 赞同：0
> 
> 时间：2013-02-04T04:13:03.780
> 
> 标签：backbone.js

我正在制作一个主干测验应用程序，它使用下面的 question_template 将问题附加到 div 中。回答第一个问题后，将附加第二个问题，将第一个问题推到下方，依此类推。一旦到达第三个问题，html 单选按钮就会中断。我无法为第三个问题选择顶部按钮（红色答案）。但是，一旦加载了第四个问题，并且第三个问题被按下，我就可以为第三个问题选择红色按钮（尽管您无法再提交，因为在回答问题后提交被设计禁用）。在第四个问题中，我无法选择前两个单选按钮中的任何一个。我在每个浏览器中都有同样的问题。我已经发布了加载第 3 和第 4 个问题的屏幕图像。我想知道是否有'

**更新：**在你阅读所有内容之前，知道单选按钮的问题只有在我使用 prepend 即 $('this.el').prepend 将问题呈现给 div 时才会发生，我想这样做以添加问题到顶部。如果我使用 append $('this.el').append... 单选按钮可以正常工作，但它不允许我在顶部添加新问题。

代码。！[

```
<fieldset id="qbquestion">
    <legend>{{= question }}</legend>
      <ul>
    {{ _.each(answers, function(answer) { }}

<li><input type="radio" name="{{= question }}" value="{{= answer  }}"/> <label for="{{= answer  }}">{{= answer  }}</label></li>

{{ }); }}
    </ul>

</fieldset>

      <input type="button" class="action_button" value="Submit" id="answer">

</script>][1] 
```

图片说明

对于“M 最喜欢的颜色是什么”这个问题，我无法选择“红色”按钮，直到它被按下。对于最重要的问题，我无法选择前两个按钮“粉红色”或“紫色”中的任何一个。目前数据库中只有四个问题。

![在此处输入图像描述](../Images/983463ac6f0a467fee6984a698fc6126.png)

更新这是问题“什么是 M 最喜欢的颜色”的“红色”单选按钮（无法选择的那个）的 CSS 样式。如果我检查不同的单选按钮，样式是相同的。

![在此处输入图像描述](../Images/f233accf331d519e690964aa8325c9a8.png)

更新问题的 html，“什么是 M 最喜欢的颜色”![在此处输入图像描述](../Images/9a46cee7d96fd52b53c3f822c6efce14.png)

**QuestionView**更新，在渲染函数中，如果我使用 $('this.el').append...，那么生成的单选按钮将起作用。但是，我想这样做`$('this.el').prepend`，将新问题添加到顶部。如果我使用前置，某些单选按钮不起作用。

```
var QuestionView = Backbone.View.extend({
    el: $(".east"), 
    initialize: function(){

    _.bindAll(this);
    this.compTemplates();
        this.model.bind("gameStartedEvent", this.render, this); 
    this.model.bind("guessCheckedEvent", this.nextQuestion, this);
    this.model.bind("nextQuestionReady", this.render, this);
    },

  events: {
      'click #answer': 'checkAnswer'

    },

  nextQuestion: function(){
    this.model.nextQuestion();
  },
  checkAnswer: function(e){
    $('#answer').attr("disabled", true);
    var selected = $("input[type='radio']:checked");
    var answer = selected.val();
    this.model.set({guess: answer});
     this.model.check();

  },
  compTemplates: function(){
    console.log("comp Templates in question view");
    _.templateSettings = {
        interpolate : /\{\{=(.+?)\}\}/g,
        escape : /\{\{-(.+?)\}\}/g,
        evaluate: /\{\{(.+?)\}\}/g
         };
    var template = $('#question_template').html();

    this.template = _.template(template);

  },

    render: function(response){

    var question = response.question; 
    var answers = response.answers;
    var link = response.link;
    this.correctanswer = response.correctanswer;

 $(this.el).append(this.template({ question: question, answers: answers, link: link})); 

    }

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:14:42.297

我改变了很多东西，但不幸的是我不确定哪一个解决了这个问题。一，我停止使用具有相同 id 的多个元素，因为建议 @mu 太短。我还更改了包含元素的一些位置样式，因为只有第三和第四个问题受到影响，这似乎是与分配给问题的空间量有关的问题。抱歉，我对 css 很垃圾，无法解释更多。我还`new QuestionView();`为每个问题创建了一个新视图，而不是再次使用相同的视图，但是，我认为这是一个完全由 css 引起的问题。

# android - 检索联系信息时遇到问题

> ID：14680270
> 
> 赞同：0
> 
> 时间：2013-02-04T04:13:09.740
> 
> 标签：android

我想从我尝试通过查询检索的号码中获取联系人姓名但我没有得到结果..它正在返回号码本身......我已经将该号码保存到联系人中。

我试过的代码是......

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String x = getContactNameFromNumber("+918281306132");
    System.out.println(x);
}
private String getContactNameFromNumber(String number) {
    // define the columns I want the query to return

    System.out.println("Entering into getContactNameFromNumber");
    String[] projection = new String[] {
            Contacts.Phones.DISPLAY_NAME,
            Contacts.Phones.NUMBER };

    // encode the phone number and build the filter URI
    Uri contactUri = Uri.withAppendedPath(Contacts.Phones.CONTENT_FILTER_URL, Uri.encode(number));

    // query time
    Cursor c = getContentResolver().query(contactUri, projection, null,
            null, null);

    // if the query returns 1 or more results
    // return the first result
    if (c.moveToFirst()) {
        String name = c.getString(c
                .getColumnIndex(Contacts.Phones.DISPLAY_NAME));
        return name;
    }

    // return the original number if no match was found
    return number;
} 
```

}

我还添加了读取手机状态权限。请有人帮我找回联系人姓名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:17:28.260

在您的代码中进行以下更改

```
Uri contactUri = Uri.withAppendedPath(Phone.CONTENT_URI, Uri.encode(number)); 
```

和

```
if (c.moveToFirst()) {
    String name = c.getString(c
            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
    return name;
} 
```

试试看，希望对你有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:55:12.230

```
ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
                null, null, null);
        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                String id = cur.getString(cur
                        .getColumnIndex(ContactsContract.Contacts._ID));
                String name = cur
                        .getString(cur
                                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

                System.out.println(name + "name");

                if (Integer
                        .parseInt(cur.getString(cur
                                .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                    // Query phone here. Covered next

                }
            } 
```

> 这段代码为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:18:21.887

你可以试试我的片段：

```
public static String findContactByNumber(String phoneNumber,
        ContentResolver cr) {

    Uri lookupUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
            Uri.encode(phoneNumber));

    String[] phoneNoProjections = { PhoneLookup._ID,
            PhoneLookup.DISPLAY_NAME };

    Cursor cursor = cr.query(lookupUri, phoneNoProjections, null, null,
            null);

    try {

        if (cursor.moveToFirst()) {

            return cursor.getString(1); //1 is the display name index. 0 is id.

        }

    } finally {

        if (cursor != null)

            cursor.close();

    }

    return null;

} 
```

# math - 在给定平面法线的平面上找到一个点和沿该法线的一个点

> ID：14680271
> 
> 赞同：0
> 
> 时间：2013-02-04T04:13:16.977
> 
> 标签：math, graphics, vector, 3d

我得到一个点 (Px,Py,Pz) 和一个法线向量 (Nx,Ny,Nz)。我必须在此图中找到紫色点 (Tx,Ty,Tz)：

[插图 http://snag.gy/kLvIZ.jpg](http://snag.gy/kLvIZ.jpg)

黑线是与原点 (0,0,0) 相交并垂直于法线的平面。我怎样才能找到T？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:42:52.163

嗯，我其实是专门在找P和T之间的距离D。我认为答案很简单`dot(N,P)`。在这些方程中求解 D 后，我到达了那里：`T=P-N*D`和`dot(N,T)=0`。

# python - 查找列表中的每个第 n 个元素

> ID：14680273
> 
> 赞同：8
> 
> 时间：2013-02-04T04:13:30.363
> 
> 标签：python

如何找到列表的每个第 n 个元素？

对于列表`[1,2,3,4,5,6]`，`returnNth(l,2)`应该返回`[1,3,5]`，对于列表`["dog", "cat", 3, "hamster", True]`，`returnNth(u,2)`应该返回`['dog', 3, True]`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-04T04:15:37.123

你只需要`lst[::n]`.

例子：

```
>>> lst=[1,2,3,4,5,6,7,8,9,10]
>>> lst[::3]
[1, 4, 7, 10]
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T04:16:03.783

```
In [119]: def returnNth(lst, n):
   .....:     return lst[::n]
   .....:

In [120]: returnNth([1,2,3,4,5], 2)
Out[120]: [1, 3, 5]

In [121]: returnNth(["dog", "cat", 3, "hamster", True], 2)
Out[121]: ['dog', 3, True] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:27:20.450

我你需要每第 n 个元素....

```
 def returnNth(lst, n):
        # 'list ==> list, return every nth element in lst for n > 0'
        return lst[::n] 
```

# xcode - 如何禁用xcode 4.5的svn功能？

> ID：14680278
> 
> 赞同：1
> 
> 时间：2013-02-04T04:14:51.733
> 
> 标签：xcode, svn

xcode 4.5 已集成 svn 功能。但我不喜欢这个功能。它总是与其他 svn 工具冲突。并在构建时冻结。我可以从活动监视器中看到 svn 线程。

我尝试从 Organizer---Repositories 中删除信息。但效果不好。它会自动在右侧添加一些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:21:58.600

尝试重命名`IDESubversion.ideplugin`包（位于`/Applications/Xcode.app/Contents/PlugIns/`（例如重命名为`IDESubversion-xxx.ideplugin`）。

# haskell - Haskell 返回不正确的结果

> ID：14680285
> 
> 赞同：-1
> 
> 时间：2013-02-04T04:15:40.713
> 
> 标签：haskell, double, ghci

> **可能重复：**
> [Haskell：表达式 [0, 0.1 .. 1] 的意外输出](https://stackoverflow.com/questions/5048920/haskell-unexpected-output-for-expression-0-0-1-1)

在 Haskell 中，有人知道以下结果的原因吗？

```
Prelude Data.List> map (\x -> x - 0.1) [0.2,0.3..0.9]

[0.1,0.19999999999999998,0.29999999999999993,0.3999999999999999,0.4999999999999999,0.5999999999999998,0.6999999999999996,0.7999999999999995] 
```

代替

```
[0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T05:03:47.143

默认情况下，`Double`（一种不精确但有效的数据类型）将为小数数据选择。如果您对其进行注释以`Rational`代替使用，那么您可以获得准确的答案。

```
ghci> map (\x -> x - 0.1) [0.2,0.3..0.9] :: [Rational]
[1 % 10,1 % 5,3 % 10,2 % 5,1 % 2,3 % 5,7 % 10,4 % 5] 
```

百分号用于表示精确的分数，因此`1 % 10`表示十分之一。

# php - 加载 mysqli 扩展时，“版本 libmysqlclient_18 未在文件 libmysqlclient.so.18 中定义”

> ID：14680290
> 
> 赞同：1
> 
> 时间：2013-02-04T04:15:58.563
> 
> 标签：php, mysql, linux, centos, libmysql

我最近从 mysql 5.5 切换到 mariadb 5.5，但是现在似乎 mysqli 的 php 扩展将无法加载。我收到以下错误：

PHP 警告：PHP 启动：无法加载动态库 '/usr/lib/php/modules/mysqli.so' - /usr/lib/php/modules/mysqli.so：符号 mysql_client_errors，版本 libmysqlclient_18 未在文件 libmysqlclient 中定义。 so.18 在第 0 行的 Unknown 中带有链接时间参考

我检查了我的 /usr/lib/mysql/ 并具有以下内容：

```
lrwxrwxrwx  1 root root      26 Jan  2 23:56 libmysqlclient_r.so.16 -> libmysqlclient_r.so.16.0.0
-rwxr-xr-x  1 root root 2140588 Dec 23  2010 libmysqlclient_r.so.16.0.0
lrwxrwxrwx  1 root root      24 Jan  2 23:56 libmysqlclient.so.16 -> libmysqlclient.so.16.0.0
-rwxr-xr-x  1 root root 2146532 Dec 23  2010 libmysqlclient.so.16.0.0
lrwxrwxrwx  1 root root      24 Feb  4 03:00 libmysqlclient.so.18 -> libmysqlclient.so.18.0.0
lrwxrwxrwx  1 root root      29 Feb  4 01:25 libmysqlclient.so.18.0.0 -> /usr/lib/libmysqlclient.so.18 
```

在 /usr/lib/

```
-rw-r--r--  1 root root  3516274 Jan 29 17:50 libmysqlclient.a
lrwxrwxrwx  1 root root       16 Feb  4 03:50 libmysqlclient_r.a -> libmysqlclient.a
lrwxrwxrwx  1 root root       17 Feb  4 04:03 libmysqlclient_r.so -> libmysqlclient.so
lrwxrwxrwx  1 root root       26 Feb  4 03:00 libmysqlclient_r.so.15 -> libmysqlclient_r.so.15.0.0
-rwxr-xr-x  1 root root  1890068 Jan 29 17:49 libmysqlclient_r.so.15.0.0
lrwxrwxrwx  1 root root       26 Feb  4 03:00 libmysqlclient_r.so.16 -> libmysqlclient_r.so.16.0.0
-rwxr-xr-x  1 root root  2039444 Jan 29 17:49 libmysqlclient_r.so.16.0.0
lrwxrwxrwx  1 root root       17 Feb  4 04:03 libmysqlclient_r.so.18 -> libmysqlclient.so
lrwxrwxrwx  1 root root       17 Feb  4 04:03 libmysqlclient_r.so.18.0.0 -> libmysqlclient.so
lrwxrwxrwx  1 root root       20 Feb  4 04:03 libmysqlclient.so -> libmysqlclient.so.18
lrwxrwxrwx  1 root root       24 Feb  4 03:00 libmysqlclient.so.15 -> libmysqlclient.so.15.0.0
-rwxr-xr-x  1 root root  1881264 Jan 29 17:49 libmysqlclient.so.15.0.0
lrwxrwxrwx  1 root root       24 Feb  4 03:00 libmysqlclient.so.16 -> libmysqlclient.so.16.0.0
-rwxr-xr-x  1 root root  2029136 Jan 29 17:49 libmysqlclient.so.16.0.0
lrwxrwxrwx  1 root root       24 Feb  4 04:03 libmysqlclient.so.18 -> libmysqlclient.so.18.0.0
-rwxr-xr-x  1 root root  4572480 Jan 29 17:28 libmysqlclient.so.18.0.0
lrwxrwxrwx  1 root root       24 Feb  2 12:23 libmysqlclient.so.18.bak -> libmysqlclient.so.18.0.0
-rw-r--r--  1 root root 17728804 Jan 29 17:50 libmysqld.a
lrwxrwxrwx  1 root root       15 Feb  4 03:00 libmysqld.so -> libmysqld.so.18
-rwxr-xr-x  1 root root 51104132 Jan 29 17:48 libmysqld.so.18
-rw-r--r--  1 root root     5590 Jan 29 17:49 libmysqlservices.a 
```

这是在 CentOS 6.3 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:41:18.253

我遇到了和你一样的问题，这是我想出的解决方案。我正在使用 MariaDB 5.5 运行 CentOS 6.3，并且正在运行 PHP 5.4.11，但在这个解决方案中我恢复到 PHP 5.4.10。我绝不是 Linux 专家，所以请对我所说的话持保留态度。

我设法让 MariaDB 与 MySQLi 一起正常工作，并且通过 yum 卸载 PHP 不再收到此错误。然后我使用此处给出的说明重新安装它[http://www.webtatic.com/packages/php54/](http://www.webtatic.com/packages/php54/)。我遇到问题的 PHP 版本是 PHP 5.4.11，而本说明站点提供的 RPM 中给出的版本是 5.4.10 版，所以我认为在新版本中进行的更新破坏了一些东西。

因此，请尝试安装 PHP 5.4.10，看看它是否适合您，或者使用该网站的说明，如果它对您来说更容易的话。请记住将“yum install php54w-mysql”作为您安装的软件包之一，以及您可能需要的任何其他软件包。

# guid - 对于给定的 guid 和给定的机器：我可以确定 guid 是否是在机器上制作的吗？

> ID：14680299
> 
> 赞同：2
> 
> 时间：2013-02-04T04:16:45.667
> 
> 标签：guid

鉴于某些 Guid 生成算法使用来自计算机的一些一致信息：您至少可以排除机器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:23:58.080

这取决于用于制作 GUID 的算法。

[http://en.wikipedia.org/wiki/GUID#Algorithm](http://en.wikipedia.org/wiki/GUID#Algorithm)

“在 OSF 指定的用于生成新 (V1) GUID 的算法中，用户的网卡 MAC 地址用作最后一组 GUID 数字的基础，这意味着，例如，可以将文档追溯到计算机创造了它。这个隐私漏洞是在定位 Melissa 病毒的创建者时使用的。[3] 其他大多数数字都是基于生成 GUID 时的时间。

包含 MAC 地址和时间的 V1 GUID 可以通过第三组数字的第一个位置的数字“1”来识别，例如 {2F1E4FC0-81FD-* *1* *1DA-9156-00036A0F876A}。

因此，如果您在 GUID 和计算机的 mac 地址之间找到匹配项，则 GUID 很可能是在那里创建的。如果没有，它仍然可以在那里制作，因为没有人强迫您使用特定的 GUID 算法。

# jax-rs - 为什么注入的 UriInfo 使用与注入的 HttpServletRequest 不同的主机名？

> ID：14680302
> 
> 赞同：6
> 
> 时间：2013-02-04T04:17:21.297
> 
> 标签：jax-rs, hateoas, apache-tomee, cxfrs

我正在学习 JAX-RS，并且喜欢在响应中将 URL 返回到其他相关操作的想法。使用 Apache TomEE JAX-RS 1.5.1，由于某种原因，注入`UriInfo`实例提供的 URL 始终使用“localhost”作为主机名。

我添加了一个`@Context HttpServletRequest`,`getLocalName`和`getServerName`值都匹配公共主机名。因此，与 TomEE 捆绑的 CXF-RS 运行时应该可以使用此信息。只是不清楚为什么它没有被使用。

下面是测试类和示例输出。如何让 TomEE 的嵌入式 CXF-RS 使用正确的主机名？或者，如果这不是正确的方法，我应该如何构建可以在 JAX-RS 响应中返回的 URL？

```
@Path("")
public class Test {

    @GET
    @Produces({MediaType.TEXT_PLAIN})
    public String defaultPage(@Context UriInfo uriInfo,
            @Context HttpHeaders hh,
            @Context HttpServletRequest httpServletRequest) {

        StringBuilder response = new StringBuilder();

        response.append("uriInfo.getAbsolutePath(): ");
        response.append(uriInfo.getAbsolutePath());
        response.append("\n");

        response.append("uriInfo.getBaseUri(): ");
        response.append(uriInfo.getBaseUri());
        response.append("\n");

        // snip the repetitive part...

        response.append("httpServletRequest.getServerPort(): ");
        response.append(httpServletRequest.getServerPort());
        response.append("\n\n");

        for (String header : hh.getRequestHeaders().keySet()) {
            response.append(header);
            response.append(":\n");

            for (String value : hh.getRequestHeaders().get(header)) {
                response.append("\t");
                response.append(value);
                response.append("\n");
            }
        }

        return response.toString();
    }

} 
```

这是输出：

```
uriInfo.getAbsolutePath(): http://localhost:8081/sample-app-1.0-SNAPSHOT/
uriInfo.getBaseUri(): http://localhost:8081/sample-app-1.0-SNAPSHOT
uriInfo.getRequestUri(): http://localhost:8081/sample-app-1.0-SNAPSHOT/
httpServletRequest.getLocalAddr(): 1.2.3.4
httpServletRequest.getLocalName(): www.example.com
httpServletRequest.getLocalPort(): 8081
httpServletRequest.getServerName(): www.example.com
httpServletRequest.getServerPort(): 8081

Accept:
    text/html
    application/xhtml+xml
    application/xml;q=0.9
    */*;q=0.8
accept-encoding:
    gzip
    deflate
accept-language:
    en-us
cache-control:
    max-age=0
connection:
    keep-alive
Content-Type:
host:
    www.example.com:8081
user-agent:
    Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML
    like Gecko) Version/6.0.2 Safari/536.26.17 
```

# c# - 如何使用 PLINQ 进行延迟加载？

> ID：14680308
> 
> 赞同：5
> 
> 时间：2013-02-04T04:18:31.460
> 
> 标签：c#, lazy-loading, plinq

linq 的优点之一是可以根据请求延迟处理无限数据源。我尝试并行化我的查询，发现延迟加载不起作用。例如...

```
class Program
{
    static void Main(string[] args)
    {
        var source = Generator();
        var next = source.AsParallel().Select(i => ExpensiveCall(i));
        foreach (var i in next)
        {
            System.Console.WriteLine(i);
        }
    }

    public static IEnumerable<int> Generator()
    {
        int i = 0;
        while (true)
        {
            yield return i;
            i++;
        }
    }

    public static int ExpensiveCall(int arg)
    {
        System.Threading.Thread.Sleep(5000);
        return arg*arg;
    }
} 
```

该程序无法产生任何结果，大概是因为在每一步，它都在等待对生成器的所有调用都干涸，这当然不会。如果我取出“AsParallel”调用，它工作得很好。那么，如何在使用 PLINQ 提高应用程序性能的同时获得出色的延迟加载呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T04:28:44.013

看看[MergeOptions](http://msdn.microsoft.com/en-us/library/dd997424.aspx)

```
 var next = source.AsParallel()
              .WithMergeOptions(ParallelMergeOptions.NotBuffered)
              .Select(i => ExpensiveCall(i)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T12:59:18.127

我认为你混淆了两个不同的东西。这里的问题不是延迟加载（即只加载必要的量），这里的问题是输出缓冲（即不立即返回结果）。

In your case, you will get your results eventually, although it might take a while (for me, it requires something like 500 results for it to return the first batch). The buffering is done for performance reasons, but in your case, that doesn't make sense. As Ian correctly pointed out, you should use `.WithMergeOptions(ParallelMergeOptions.NotBuffered)` to disable output buffering.

But, as far as I know, PLINQ doesn't do lazy loading and there is no way to change that. What that means is that if your consumer (in your case, the `foreach` loop) is too slow, PLINQ will generate results faster than necessary and it will stop only when you finish iterating the results. This means PLINQ can be wasting CPU time and memory.

# css - CSS：如何使列表垂直换行？

> ID：14680314
> 
> 赞同：9
> 
> 时间：2013-02-04T04:19:23.833
> 
> 标签：css

我有一个有点长的列表，并希望它“包装”成垂直列。假设我有一个包含 10 个项目的列表，并且我希望它是每列 5 个项目，布局应该是这样的：

```
1   6
2   7
3   8
4   9
5   10 
```

有没有办法在 CSS 中做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-04T04:27:32.950

对不起，它实际上非常简单：

```
ul {
-webkit-column-count: 2;
   -moz-column-count: 2;
        column-count: 2;
} 
```

看看这个[**演示**](http://jsfiddle.net/9fYmF/1/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T04:23:07.927

使用[CSS3 列](http://www.w3.org/TR/css3-multicol/)。特别是，如果您设置`column-width`，它应该根据需要创建尽可能多的列。如果您希望它更喜欢向下而不是为每列提供相同数量的项目，您可以设置`column-fill`为`auto`.

# linux - OpenSSL 如何禁用和/或卸载

> ID：14680315
> 
> 赞同：-1
> 
> 时间：2013-02-04T04:19:33.427
> 
> 标签：linux, apache, ssl, https, openssl

我在 Apache/RHEL 上安装了 OpenSSL，现在我将获得 SSL 'Trusted Root CA' 认证并安装它。所以我需要禁用或卸载 OpenSSL。

我怎样才能：

*   禁用 OpenSSL？
*   卸载 OpenSSL？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T22:01:44.763

我不知道为什么您认为获得签名证书意味着您需要卸载 OpenSSL，但无论您出于何种原因，您都错了。它没有。不要管它。你需要它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T04:26:49.637

取决于你如何安装它开始。

```
sudo yum remove openssl 
```

应该管用。但是您可能需要找到已安装软件包的确切名称。要在本地系统上搜索包，请执行以下操作：

```
rpm -qa | grep openssl 
```

然后`yum remove`是您安装的确切命名包。

或者，您可以在存储库中搜索所有命名的包`openssl`或变体。

```
sudo yum search openssl 
```

# java - 客户端不接收来自服务器的 DataOutputStream 的输出

> ID：14680320
> 
> 赞同：2
> 
> 时间：2013-02-04T04:20:37.933
> 
> 标签：java, networking, tcp, dataoutputstream

我目前正在尝试编写我的第一个客户端>服务器系统来通过网络来回传输包含字符串的数据包。但是我遇到了以下问题：客户端向服务器发送消息，服务器接收消息，处理消息，然后应该向客户端发送回复，但客户端从未收到此消息并且挂起等待来自服务器的响应。这是代码：

服务器：

```
public static void handlePackets() throws Exception {
    String clientSentence;
    String returnToClient;
    ServerSocket welcomeSocket = new ServerSocket(1337);

         System.out.println("Packet receiver initialized!");
         while (run) {
            Socket connectionSocket = welcomeSocket.accept();
            BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
            DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
            clientSentence = inFromClient.readLine();
            System.out.println("Received Packet: " + clientSentence);

            System.out.println("Compiling return to client.");
            returnToClient = "";
            if (clientSentence.startsWith("Handshake-")) {
                returnToClient = handleHandShake(clientSentence);
            }

            outToClient.writeBytes(returnToClient);
            System.out.println("Sent client response " + returnToClient);
         }
         welcomeSocket.close();
  } 
```

客户：

```
public static String sendTCP(String host, String content) {
    try {
        System.out.println("Packet sender sending TCP packet " + content);
        String serverResponse;
        Socket clientSocket = new Socket(host, 1337);
        DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
        BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        outToServer.writeBytes(content + '\n');

        System.out.println("Send data to sever. Awaiting response.");

        serverResponse = inFromServer.readLine();
        clientSocket.close();

        System.out.println("Server response received " + serverResponse + " result was returned to caller.");

        return serverResponse;
    } catch (Exception e) {
        e.printStackTrace();
    }

    return "";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:50:00.433

客户端正在调用`readLine()`，但服务器没有写一行，只是字节，所以客户端永远等待行终止符。将“\n”附加到服务器的回复中。服务器也应该在完成后关闭接受的套接字。通过关闭您包裹在它周围的任何编写器或输出流来做到这一点，而不是通过关闭套接字本身。

您应该使用`BufferedOutputStream`而不是`DataOutputStream`. 它适用于简单的数据，但如果您迟早不修复它，您可能会遇到字符集问题。一般来说，您应该始终使用对称的输入和输出流或读取器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:29:15.730

1）您应该关闭或刷新 outToServer / outToClient

2）当您使用 BufferedReader 阅读时，您应该使用 BufferedWriter 而不是 DataOutputStream 来编写

# django - Django - 获取 PIL 图像保存方法以使用 Amazon s3boto 存储

> ID：14680323
> 
> 赞同：7
> 
> 时间：2013-02-04T04:21:06.943
> 
> 标签：django, amazon-s3, python-imaging-library, boto

为了在上传时调整图像大小（使用 PIL），我将覆盖我的文章模型的保存方法，如下所示：

```
def save(self):
    super(Article, self).save()
    if self.image:
        size = (160, 160)
        image = Image.open(self.image)
        image.thumbnail(size, Image.ANTIALIAS) 
        image.save(self.image.path) 
```

这在本地有效，但在生产中出现错误：NotImplementedError：此后端不支持绝对路径。

我尝试将 image.save 行替换为

```
image.save(self.image.url) 
```

但后来我得到一个 IOError: [Errno 2] No such file or directory: ' [https://my_bucket_name.s3.amazonaws.com/article/article_images/2.jpg](https://my_bucket_name.s3.amazonaws.com/article/article_images/2.jpg) '

这是图像的正确位置。如果我将该地址放在浏览器中，图像就在那里。我尝试了许多其他的东西，但到目前为止，没有运气。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T05:53:51.920

您应该尽量避免保存到绝对路径；有一个[文件存储 API](https://docs.djangoproject.com/en/1.3/ref/files/storage/)可以为您抽象出这些类型的操作。

查看[PIL Documentation](http://www.pythonware.com/library/pil/handbook/image.htm)，该`save()`函数似乎支持传递类似文件的对象而不是路径。

我不在可以测试此代码的环境中，但我相信您需要执行以下操作而不是最后一行：

```
from django.core.files.storage import default_storage as storage

fh = storage.open(self.image.name, "w")
format = 'png'  # You need to set the correct image format here
image.save(fh, format)
fh.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-17T08:26:01.040

对我来说 default.storage.write() 不起作用， image.save() 不起作用，这个起作用了。如果有人仍然感兴趣，请参阅此代码。我为缩进道歉。我的项目正在使用 Cloudinary 和 Django 小项目。

```
 from io import BytesIO
    from django.core.files.base import ContentFile
    from django.core.files.storage import default_storage as storage    

    def save(self, *args, **kargs):
    super(User, self).save(*args, **kargs)
    # After save, read the file
    image_read = storage.open(self.profile_image.name, "r")
    image = Image.open(image_read)
        if image.height > 200 or image.width > 200:
           size = 200, 200

          # Create a buffer to hold the bytes
           imageBuffer = BytesIO()

          # Resize  
           image.thumbnail(size, Image.ANTIALIAS)

          # Save the image as jpeg to the buffer
           image.save(imageBuffer, image.format)

          # Check whether it is resized
           image.show()

          # Save the modified image
           user = User.objects.get(pk=self.pk)
           user.profile_image.save(self.profile_image.name, ContentFile(imageBuffer.getvalue()))

           image_read = storage.open(user.profile_image.name, "r")
           image = Image.open(image_read)
           image.show()

        image_read.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-10T16:56:18.020

**如果您正在使用Django 中的文件的**云存储****

`NotImplementedError: This backend doesn't support absolute paths`

要修复它，您需要替换`file.path`为`file.name`

对于问题中的代码：`image.save(self.image.path)`with`image.save(self.image.name)`

这是控制台中的样子

```
>>> c = ContactImport.objects.last()

>>> c.json_file.name
'protected/json_files/data_SbLN1MpVGetUiN_uodPnd9yE2prgeTVTYKZ.json'

>>> c.json_file
<FieldFile: protected/json_files/data_SbLN1MpVGetUiN_uodPnd9yE2prgeTVTYKZ.json>

>>> c.json_file.url
'https://storage.googleapis.com/super-secret/media/api/protected/json_files/data_SbLN1MpVGetUiN_uodPnd9yE2prgeTVTYKZ.json?Expires=1631378947&GoogleAccessId=secret&Signature=ga7...' 
```

# java - Java 模式匹配器 COMMA

> ID：14680324
> 
> 赞同：3
> 
> 时间：2013-02-04T04:21:28.067
> 
> 标签：java, regex, comma, matcher

我正在尝试对字符串使用模式检查，由于某种原因，它说不应该匹配的字符串，做..

代码：

```
private static final Pattern VALID_TOKEN = Pattern.compile("^[a-zA-Z0-9\\{\\}\\[\\].+-/=><\\\\*]*$");
System.out.println(VALID_TOKEN.matcher(token).matches()); 
```

例子：

```
"123" = true
"1,3" = true // Should NOT BE TRUE
"123*123" = true
"123*^123" = false 
```

上述所有示例都是正确的，除了“1,3”模式不应包含逗号。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:23:45.693

你需要逃离破折号

```
+-/ 
```

否则，它被解释为一个范围 from `'+'`to `'/'`- 一个包含`'+'`, `','`,的范围`'-'`。`'.'`, 和`'/'`.

```
private static final Pattern VALID_TOKEN = Pattern.compile("^[a-zA-Z0-9\\{\\}\\[\\].+\\-/=><\\\\*]*$");
//                              Here ------------------------------------------------^^ 
```

或者，您可以将破折​​号移到字符类的末尾（即，将它放在结束符之前`]`）。

# ruby-on-rails - 如何去除 HTML 标签，包括没有 ' 和东西的转义图像标签？

> ID：14680326
> 
> 赞同：7
> 
> 时间：2013-02-04T04:21:44.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要从我的内容中删除所有 html 元素。内容示例：

```
"<p><img alt=\"\" src=\"/ckeditor_assets/pictures/1/content_twitter-sink.jpg\" style=\"width: 570px; height: 399px;\" /></p>\r\n\r\n<h3 style=\"font-size: 1.38462em; margin: 1em 0px 0px; font-weight: 600; line-height: 1.2; font-family: freight-sans-pro, sans-serif; -webkit-font-smoothing: antialiased; text-rendering: optimizelegibility; color: rgb(46, 46, 46);\">Soraya Calavassy, communications manager at the Award in Australia,&nbsp;shares her organisation&#39;s experience&nbsp;piloting our new global visual identity.</h3>\r\n\r\n<p style=\"margin: 0.5em 0px 0px; text-rendering: optimizelegibility; font-size: 1.30769em; line-height: 1.3; color: rgb(78, 78, 78); font-family: freight-sans-pro, sans-serif;\">&quot;While Australia has a very strong brand locally, there are some great benefits for incorporating" 
```

显示帖子时，我使用 raw ，它确实给了我需要的输出。但我需要生成一个摘录。为此，我需要去除所有 HTML 标签，甚至删除图像。但是当我使用**sanitize**时 ，它​​不会删除图像。如果我使用**strip_tags**，它会删除图像，但会添加`&#39;`撇号、`&nbsp;`空格等。那么，如何获得没有图像和`&nbsp;`内容的干净摘录？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T04:29:12.907

尝试`strip_tags(text).html_safe`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-15T11:38:34.260

不适用于 Rails 4.1

只有将 strip_tags 与 gsub 函数结合使用的方法（下面的链接）

[Ruby gsub字符串中的多个字符](https://stackoverflow.com/questions/20650681/ruby-gsub-multiple-characters-in-string)

所以在助手中，我会这样做：

```
def format_text(string)
    strip_tags(string).gsub("&nbsp;", "").gsub("&#39;", "'")
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-06T10:15:51.300

我遇到这样的代码问题

```
strip_tags("<p>a</p>\r\n") # => a&#13; 
```

我用

```
sanitize("<p>a</p>", tags: [ ]) # => a\r\n 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T22:49:40.840

`raw(strip_tags(text).html_safe)`其实就是你想要的

# macos - MacOSX 如何在 su - root 后自动运行脚本？

> ID：14680333
> 
> 赞同：0
> 
> 时间：2013-02-04T04:22:49.253
> 
> 标签：macos, root, .bash-profile

假设我是普通用户，我将切换到 root：

```
user ~ $ su - root
Password: 
root ~ # 
```

因此，一旦我以 身份登录`root`，我想自动**运行以下命令**：

```
source .bash_profile 
```

`above command`请问我怎样才能让它自动运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:29:53.907

根据 bash 手册页，`.bash_profile`对登录 shell`.bashrc`执行，而对交互式非登录 shell 执行。

在您的情况下，您不需要`.bash_profile`像这样采购。

你只需要把`source .bash_profile`你的根`.bashrc`文件

```
if [ -f ~/.bash_profile ]; then
   source ~/.bash_profile
fi 
```

阅读[我](http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html)以更好地理解`.bash_profile`和`.bashrc`

**更新**

例子：

```
[root@sgeorge-ld ~]# cat .bashrc | tail -1
echo "Testing .bashrc for a stack query"
[root@sgeorge-ld ~]# exit
logout
[sgeorge@sgeorge-ld ~]$ su - root
Password: 
Testing .bashrc for a stack query
[root@sgeorge-ld ~]# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:26:49.297

首先，当您切换到 root 用户时，您仍然是您的普通用户的主目录。您要执行哪个 .bash_profile？/Users/myuser/.bash_profile 还是 root 的 /var/root/.bash_profile？

不管你想执行什么，你都可以编辑 /var/root/.bashrc （如果你没有它，创建一个）并在那里添加你的命令。

# c# - 页面计数器不工作 ASP.NET C#

> ID：14680337
> 
> 赞同：1
> 
> 时间：2013-02-04T04:23:16.070
> 
> 标签：c#, asp.net, web-applications, web

大家。我一直试图完全按照教科书上的内容进行操作，但无济于事。现在，我的问题是我目前正在尝试创建一个页面计数器来跟踪每个页面被访问了多少次，然后在新页面上显示每个值。

这是所有页面都相同的 C# 计数器代码：

```
int sessionCount = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["CountMain"] == null)
            sessionCount = 0;
        else
            sessionCount = Convert.ToInt32(Session["CountMain"]);
        sessionCount++;
    }
    protected void Page_PreRender(object sender, EventArgs e)
    {
        Session["CountMain"] = sessionCount;
    } 
```

预渲染是我在网上研究后添加的，在教科书中。没运气。

这是计数器页面 C# 代码：

```
public partial class Counter : System.Web.UI.Page
{
    int sessionCount = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
        string sessionMain = Session["CountMain"].ToString();
        string sessionComment = Session["CountComment"].ToString();
        string sessionCompleted = Session["CountCompleted"].ToString();
        string sessionCurrent = Session["CountCurrent"].ToString();
        string sessionAbout = Session["CountAbout"].ToString();
        string sessionContact = Session["CountContact"].ToString();
        string sessionCounter = Session["CountCounter"].ToString();

        if (Session["CountCounter"] == null)
            sessionCount = 0;
        else
            sessionCount = Convert.ToInt32(Session["CountCounter"]);
        sessionCount++;

        lblAboutCount.Text = sessionAbout;
        lblCommentCount.Text = sessionComment;
        lblCompletedCount.Text = sessionCompleted;
        lblContactCount.Text = sessionContact;
        lblCounterCount.Text = sessionCounter;
        lblCurrentCount.Text = sessionCurrent;
        lblMainCount.Text = sessionMain;
    } 
```

当我尝试运行它时，我得到一个“NullReferenceException 未被用户代码处理，对象引用未设置为对象的实例”。错误。

提前致谢。

**编辑#1**

好的，感谢 Hexxangonal，计数器现在可以正常工作了。但是，我的计数器页面现在自计数了 2 次。（每次加载时增加 2）

```
public partial class Counter : System.Web.UI.Page
{
    int sessionCount = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["CountCounter"] == null)
        {
            sessionCount = 0;
            Session["CountCounter"] = sessionCount;
        }
        else
        {
            sessionCount = Convert.ToInt32(Session["CountCounter"]);
            sessionCount++;
            Session["CountCounter"] = sessionCount;
        }

        Session["CountCounter"] = sessionCount;

        lblAboutCount.Text = Convert.ToString(Session["CountAbout"]);
        lblCommentCount.Text = Convert.ToString(Session["CountComment"]);
        lblCompletedCount.Text = Convert.ToString(Session["CountCompleted"]);
        lblContactCount.Text = Convert.ToString(Session["CountContact"]);
        lblCounterCount.Text = Convert.ToString(Session["CountCounter"]);
        lblCurrentCount.Text = Convert.ToString(Session["CountCurrent"]);
        lblMainCount.Text = Convert.ToString(Session["CountMain"]);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:33:53.397

NullReference 异常可能来自您的`Session["CountXXXXX"].ToString()` 一行（CountXXXXX 是您的计数对象之一，例如`CountMain`），因为`Session["CountXXXXX"]`不存在（它为空）。

您实际上可以将该页面简化为以下逻辑，并且您将绕过该问题，因为 null 将仅分配给字符串变量。

```
public partial class Counter : System.Web.UI.Page
{
    int sessionCount = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["CountCounter"] == null)
            sessionCount = 0;
        else
            sessionCount = Convert.ToInt32(Session["CountCounter"]);
        sessionCount++;

        // **NEW** Save the new count value
        Session["CountCounter"] = sessionCount;

        lblAboutCount.Text = Session["CountAbout"];
        lblCommentCount.Text = Session["CountComment"];
        lblCompletedCount.Text = Session["CountCompleted"];
        lblContactCount.Text = Session["CountContact"];
        lblCounterCount.Text = sessionCounter;
        lblCurrentCount.Text = Session["CountCurrent"];
        lblMainCount.Text = Session["CountMain"];
    } 
```

还有一个问题，您将整数和字符串与`sessionCount`带有成员变量和局部变量的变量（分别）混合在一起。我已经清理了这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T04:35:56.623

问题在于这两行

```
 if (Session["CountCounter"] == null)
        sessionCount = 0;
    else
        sessionCount = Convert.ToInt32(Session["CountCounter"]);
    sessionCount++; 
```

您不会将这些值放回会话变量中。
你应该这样做： -

```
 if (Session["CountCounter"] == null)
    {
        sessionCount = 0;
        Session["CountCounter"]=sessionCount;
    }
    else
    {
        sessionCount = Convert.ToInt32(Session["CountCounter"]);
        sessionCount++;
        Session["CountCounter"]=sessionCount;
     } 
```

# android - 如何为 ImageView 制作振动动画

> ID：14680338
> 
> 赞同：27
> 
> 时间：2013-02-04T04:23:25.850
> 
> 标签：android, animation, vibration

我不知道这个动画。

我怎样才能通过这样的 XML 来做到这一点？还是另一种解决方案？

```
<?xml version="1.0" encoding="utf-8"?> 
<set xmlns:android="http://schemas.android.com/apk/res/android" 
    android:interpolator="@android:anim/accelerate_decelerate_interpolator" 
    android:fillAfter="true"> 
    ......
</set> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-02-18T10:19:53.387

此代码在水平方向上摇动视图

> 摇动.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fromXDelta="0"
    android:interpolator="@anim/cycle_5"
    android:toXDelta="10" /> 
```

> 循环_5.xml

```
<?xml version="1.0" encoding="utf-8"?>
<cycleInterpolator xmlns:android="http://schemas.android.com/apk/res/android"
    android:cycles="5" /> 
```

> 摇动ImageView的方法

```
public void onShakeImage() {    
   Animation shake;
   shake = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.shake);

   ImageView image;
   image = (ImageView) findViewById(R.id.image_view);

   image.startAnimation(shake); // starts animation
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-06-14T06:43:26.833

1）振动或2）摇动（使用属性动画）以下代码为我工作。

```
 ObjectAnimator rotate = ObjectAnimator.ofFloat(animateView, "rotation", 0f, 20f, 0f, -20f, 0f); // rotate o degree then 20 degree and so on for one loop of rotation.
// animateView (View object) 
        rotate.setRepeatCount(20); // repeat the loop 20 times
        rotate.setDuration(100); // animation play time 100 ms 
        rotate.start(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-23T10:10:01.810

在 anim 目录中创建**shake.xml**

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
<rotate
    android:duration="70"
    android:fromDegrees="0"
    android:interpolator="@android:anim/linear_interpolator"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="5"
    android:repeatMode="reverse"
    android:toDegrees="0" />
<translate
    android:duration="70"
    android:fromXDelta="40"
    android:interpolator="@android:anim/linear_interpolator"
    android:repeatCount="5"
    android:repeatMode="reverse"
    android:toXDelta="-40" /> 
```

在你的java文件中添加下面的方法

```
public void animateView(View view){
    Animation shake = AnimationUtils.loadAnimation(getActivity(), R.anim.shake);
    view.startAnimation(shake);
} 
```

并在动画方法中传递您的视图

```
animateView(yourView); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-01T05:54:29.027

在 anim 目录下创建动画文件：

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="200"
    android:fromDegrees="-10"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:repeatMode="reverse"
    android:toDegrees="10" />

Animation shake = AnimationUtils.loadAnimation(this, R.anim.shake);
your_view.startAnimation(shake); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-11T07:50:05.380

正如我预期的那样，这对我来说很顺利

```
private void Shake(View view)
{
    RotateAnimation rotate = new RotateAnimation(-5, 5,Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
    rotate.setDuration(250);
    rotate.setStartOffset(50);
    rotate.setRepeatMode(Animation.REVERSE);
    rotate.setInterpolator(new CycleInterpolator(5));
    view.startAnimation(rotate);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-02T07:46:52.907

我确实为 imageView 创建了类似**BUZZ**的动画。这里我还添加了延迟，让它真的很像**Buzzy 效果**

1.  在您的活动中：

这里，`animShake`是`android.view.animation`

```
 animShake = AnimationUtils.loadAnimation(this, R.anim.shake)
    imageView.startAnimation(animShake) 
```

不要忘记添加`AnimationListener`BUZZ 效果的小延迟

```
animShake.setAnimationListener(object : Animation.AnimationListener {
        override fun onAnimationRepeat(animation: Animation?) {

        }

        override fun onAnimationEnd(animation: Animation?) {
            Handler().postDelayed({
                imageView.startAnimation(animShake)
            }, 1000)

        }

        override fun onAnimationStart(animation: Animation?) {

        }
    }) 
```

2.  动画`shake`XML 文件只有`translate`：

    ```
     android:duration="75"
     android:fromXDelta="-18%"
     android:repeatCount="11"
     android:repeatMode="reverse"
     android:toXDelta="18%" /> 
    ```

# ios - 我的应用不再支持 ipad，当我上传我的应用时，它会导致 Xcode 或 iTunes Connect 错误地拒绝我的更新

> ID：14680339
> 
> 赞同：7
> 
> 时间：2013-02-04T04:23:40.037
> 
> 标签：ios, app-store-connect

我的应用程序在 xcode 3.2 中启动。现在我已将 xcode 更新为 4.5。而且我不想支持ipad。所以我将设备设置设置为 iphone。然后更新我的应用程序。但 iTunes 连接拒绝我的更新并显示错误消息：

此捆绑包不支持先前应用版本支持的一个或多个设备。您的应用更新必须继续支持以前支持的所有设备。您可以使用 Targeted Device Family 构建设置在 Xcode 中声明支持的设备。有关更多信息，请参阅 QA1623：[https ://developer.apple.com/library/ios/#qa/qa1623/_index.html](https://developer.apple.com/library/ios/#qa/qa1623/_index.html)

如何在不从苹果商店删除我的应用程序的情况下解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T06:39:49.233

> 您的应用更新必须继续支持以前支持的所有设备。

真的都说了。您不得声明对设备的支持，然后将其撤回。唯一的例外是当您升级支持的最低 iOS 版本时，您可以删除不再支持该 iOS 版本的旧设备。

您链接到的文档包含三个可能的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T16:51:44.240

我的问题是，由于某种原因，我在不同的目标（iphone 目标和 ipad 目标）上有相同的捆绑包 ID

这导致我尝试使用 iphone bundle id 上传 ipad 应用程序。很容易错过，所以也许它会有所帮助

# xml - 我需要以 xsl 形式添加 XML 数据来检查条件

> ID：14680341
> 
> 赞同：-2
> 
> 时间：2013-02-04T04:23:56.427
> 
> 标签：xml, xslt

字段 CashFlowAttach 包含数据库中的 XML 代码，我需要检查条件 CashFlowAttach 字段是否包含此数据`<p xmlns:Utils="cim:Utils"></p>`字段应该使用 XSL 表单为空

```
<xsl:choose>
      <xsl:when test="string-length($CashFlowAttach)!=0">
        <xsl:if test="string-length($CashFlowAttach)!='<p xmlns:Utils="cim:Utils"></p>'">
            <a>
               <xsl:attribute name="onclick">ajaxcallingForFileDownload
               ('<xsl:value-of select="$CashFlowAttach" />')  </xsl:attribute>
               <xsl:value-of select="$CashFlowAttach" />
            </a>
         </xsl:if>
      </xsl:when>
    </xsl:choose> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:04:54.527

假设`$CashFlowAttach`包含文本而不是实际的 XML，这个测试可能会起作用：

```
<xsl:if test="not(contains($CashFlowAttach, 
                      '&lt;p xmlns:Utils=&quot;cim:Utils&quot;&gt;'))"> 
```

请注意，我只检查变量是否包含开始标签，如果你让它检查你在那里的整个部分，那么如果其中`p`有任何内容，测试将失败。

你能试试这个吗？

# ruby - 如何对 URL 进行分类？

> ID：14680342
> 
> 赞同：-3
> 
> 时间：2013-02-04T04:23:57.657
> 
> 标签：ruby, classification

我有一组网址，例如：

```
https://www.facebook.com/profile.php?id=456789
https://www.facebook.com/messages/78134
https://www.facebook.com/profile.php?id=123
https://www.facebook.com/messages/781234
https://www.facebook.com/45/settings/781234/ab
https://www.facebook.com/48/settings/989213/ef 
```

数据集至少有 100 个 url，比如 5-6 种类型。我期望的是：

```
[
  ['https://www.facebook.com/profile.php?id=456789',
   'https://www.facebook.com/profile.php?id=123'],
  ['https://www.facebook.com/messages/781234',
   'https://www.facebook.com/messages/78134'],
  ['https://www.facebook.com/45/settings/781234/ab',
   'https://www.facebook.com/48/settings/989213/ef']
] 
```

我如何对它们进行分类？没有学习输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:00:35.463

您的问题没有明确定义，但这似乎可以根据所需的输出工作：

```
require 'uri'

URL_DIVISIONS = %w[profile messages settings]
URL_DIVISION_REGEX = Regexp.union(URL_DIVISIONS)

urls = %w[
  https://www.facebook.com/profile.php?id=456789
  https://www.facebook.com/messages/78134
  https://www.facebook.com/profile.php?id=123
  https://www.facebook.com/messages/781234
  https://www.facebook.com/45/settings/781234/ab
  https://www.facebook.com/48/settings/989213/ef
]

pp urls.group_by{ |url|
  URI.parse(url).path[URL_DIVISION_REGEX] 
} 
```

哪个输出：

```
{"profile"=>
  ["https://www.facebook.com/profile.php?id=456789",
  "https://www.facebook.com/profile.php?id=123"],
"messages"=>
  ["https://www.facebook.com/messages/78134",
  "https://www.facebook.com/messages/781234"],
"settings"=>
  ["https://www.facebook.com/45/settings/781234/ab",
  "https://www.facebook.com/48/settings/989213/ef"]} 
```

如果您需要没有划分信息的列表，请使用：

```
pp urls.group_by{ |url|
  URI.parse(url).path[URL_DIVISION_REGEX] 
}.values 
```

哪个输出：

```
[["https://www.facebook.com/profile.php?id=456789",
  "https://www.facebook.com/profile.php?id=123"],
["https://www.facebook.com/messages/78134",
  "https://www.facebook.com/messages/781234"],
["https://www.facebook.com/45/settings/781234/ab",
  "https://www.facebook.com/48/settings/989213/ef"]] 
```

不过，我会将其保留为哈希，并使用 URL_DIVISIONS 数组循环键，并根据需要提取值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:36:05.003

这是一个自学版本。您没有指定学习的确切标准，因此您可能想要调整正则表达式，但也许您可以将其用作起点：

```
require 'uri'

urls = %w[
  https://www.facebook.com/profile.php?id=456789
  https://www.facebook.com/messages/78134
  https://www.facebook.com/profile.php?id=123
  https://www.facebook.com/messages/781234
  https://www.facebook.com/45/settings/781234/ab
  https://www.facebook.com/48/settings/989213/ef
]

pp urls.group_by { |url|
  (URI.parse(url).path.match(/[a-z]+/) || ["unknown"])[0]
} 
```

输出：

```
{"messages"=>
  ["https://www.facebook.com/messages/78134",
   "https://www.facebook.com/messages/781234"],
 "profile"=>
  ["https://www.facebook.com/profile.php?id=456789",
   "https://www.facebook.com/profile.php?id=123"],
 "settings"=>
  ["https://www.facebook.com/45/settings/781234/ab",
   "https://www.facebook.com/48/settings/989213/ef"]} 
```

# c - C , unsigned int arg 的二进制表示

> ID：14680348
> 
> 赞同：-4
> 
> 时间：2013-02-04T04:24:10.877
> 
> 标签：c

如何使用 atoi 使 pairCounts 产生这条线？

`# ./paircounts 17 0`

`# ./paircounts 255 7`

`# ./paircounts 10 20 too many arguments!`

```
int pairCounts(unsigned int n);

int main(int argc, char *argv[]) {
    const char testStr[] = "# pairs in base 2 of %u = %d, should be %d\n";
    printf (testStr, 0, pairCount (0), 0);
    printf (testStr, 11, pairCount (11), 1);
    printf (testStr, 2863377066u, pairCount (2863377066u), 2);
    printf (testStr, 268435456, pairCount (268435456), 0);
    printf (testStr, 4294705151u, pairCount (4294705151u), 29);
    return 0;
}

int pairCounts(unsigned int n) {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:46:58.137

你为什么要使用`atoi`任何东西？如果要将字符串解析为整数值，则应该使用`strol`. `atoi`甚至不适合生产输出。要生成该行：

```
# ./paircounts 17 0 
```

你会使用`puts`(or `fputs`, or `printf`, or `fprintf`, or possible `fwrite`, or maybe `write`, ...) 而不是`atoi`. 例如： `puts( "# ./paircounts 17 0" )`。其他行也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:41:25.160

阅读[本页](http://www.cplusplus.com/reference/cstdlib/atoi/)。我知道它的 cplusplus.com，但它对于 atoi 的 c 版本仍然有效。我不完全确定您要完成什么，但我有两个想法：

1.  您正在尝试检查是否输入了正确数量的参数。在这种情况下，您不需要 atoi，您只需要检查 argc 的数量是否正确：

    ```
    if (argc != 3) throw some error; 
    ```

    请记住，argc 包含程序名称，因此它总是比实际输入参数多一个。

2.  您想使用 atoi 做其他事情，在这种情况下，请阅读 atoi 指南，因为它使用起来非常简单。

如果您需要更多说明，则需要改进您的问题。祝你好运。

# php - 自定义 404 错误消息在 codeigniter 中不起作用

> ID：14680349
> 
> 赞同：0
> 
> 时间：2013-02-04T04:24:11.457
> 
> 标签：php, codeigniter

当我访问控制器中的错误功能时，404 错误页面运行良好。[但是，当我访问像“ http://example.com/model/detail/116](http://example.com/model/detail/116) ”这样的网址时，116 是错误的数字[不在数据库中]，我的 404 错误页面不起作用。

我的控制器中有这段代码：

```
public function detail()
 {
    $id['id_galeri'] = $this->uri->segment(3);
    $detail = $this->app_model->getSelectedData("tbl_galeri",$id);
    foreach($detail->result() as $d)
    {
        $bc['jdl'] = "View";
        $bc['id_galeri'] = $d->id_galeri;
        $bc['nama'] = $d->nama;
        $bc['foto'] = $d->foto;
        $bc['deskripsi'] = $d->deskripsi;
        $bc['stts_input'] = "deskripsi";
    }

    if($this->uri->segment(3) == '' && $id['id_galeri'] == FALSE)
    {
        $segment_url = 0;
    }else{
        if(!is_numeric($this->uri->segment(3)) || !is_string($this->uri->segment(3))){
        redirect('404');
        }else{
        $segment_url = $this->uri->segment(3);
        }
    }

    $this->load->view('frontend/global/bg_top');
    $this->load->view('frontend/page/bg_view_model',$bc);
    $this->load->view('frontend/global/bg_footer');
} 
```

对不起我的英语不好，请帮助:-)谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:28:28.850

代替：

```
redirect('404'); 
```

尝试使用[CodeIgniter 的 native](http://ellislab.com/codeigniter/user-guide/general/errors.html)：

```
show_404('page'); 
```

* * *

**编辑**

试试这个代码，稍微清理一下，检查在保存以供视图使用之前完成。

```
public function detail()
 {
    $id['id_galeri'] = $this->uri->segment(3);

    // Check if the supplied ID is numeric in the first place
    if ( ! is_numeric($id['id_galeri']))
    {
        show_404($this->uri->uri_string());
    }

    // Get the data
    $detail = $this->app_model->getSelectedData("tbl_galeri",$id);

    // Check if any records returned
    if (count($detail->result()) === 0)
    {
        show_404($this->uri->uri_string());
    }

    foreach($detail->result() as $d)
    {
        $bc['jdl'] = "View";
        $bc['id_galeri'] = $d->id_galeri;
        $bc['nama'] = $d->nama;
        $bc['foto'] = $d->foto;
        $bc['deskripsi'] = $d->deskripsi;
        $bc['stts_input'] = "deskripsi";
    }

    /**
     * Here do whatever you want with the $segment_url which doesn't seem to be
     * used in your code
     */

    $this->load->view('frontend/global/bg_top');
    $this->load->view('frontend/page/bg_view_model',$bc);
    $this->load->view('frontend/global/bg_footer');
} 
```

# logging - 我的 ec2 实例中乘客日志文件的位置（弹性 beantalk + rails）

> ID：14680351
> 
> 赞同：6
> 
> 时间：2013-02-04T04:24:41.700
> 
> 标签：logging, amazon-web-services, passenger, amazon-elastic-beanstalk

我正在尝试在 Elastic Beanstalk 上部署 Rails 应用程序。我希望能够查看我的网络服务器日志文件（应该是乘客），但我不知道在我的 ec2 实例中的哪里可以找到它们。我能够通过 SSH 连接到该实例，但找不到文件。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T15:14:51.160

在 Elastic Beanstalk ruby​​ 容器上，您可以在 /var/app/support/logs/ 中找到您的应用程序日志（passenger.log、production.log）。

/var/log/eb-tools.log 和 /var/log/cfn-init.log 文件对于调试部署问题也很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-28T20:27:55.913

我想更新此信息。我使用的是 Rails 4.1，日志文件不在这些位置。相反，它们位于 /var/app/containerfiles/logs

# java - Java 象棋棋盘

> ID：14680352
> 
> 赞同：0
> 
> 时间：2013-02-04T04:24:50.403
> 
> 标签：java, algorithm, chess

我正在努力弄清楚我可以在 nxn 板上放置的最大主教数量，而他们不能互相攻击。我无法检查对角线。下面是我检查对角线的方法。主教当前所在的方格被标记为真，因此该方法应该检查对角线，如果它返回真，那么放置主教的方法将移动到下一行。

我不太确定出了什么问题，任何帮助将不胜感激。

```
private boolean bishopAttack(int row, int column)
{
    int a,b,c;

    for(a = 1; a <= column; a++)
    {
        if(row<a)
        {
            break;
        }

        if(board[row-a][column-a])
        {
            return true;
        }
    }   
    for(b = 1; b <= column; b++)
    {
        if(row<b)
        {
            break;
        }
        if(board[row+b][column-b])
        {
            return true;
        }
    }   
    for(c = 1; b <= column; b++)
    {
        if(row<c)
        {
            break;
        }
        if(board[row+c][column+c])
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:29:34.303

```
for(c = 1; b <= column; b++) 
```

难道不应该

```
for(c = 1; c <= column; c++) 
```

顺便一提：

1) 使用 i、j、k 代替 a、b、c 等。没有真正的原因......这只是惯例。

2）您不必继续命名新变量。尝试这样的事情：

```
for(int i = 1; i <= column; i++)
{
    ...
}
//because i was declared in the for loop, after the } it no longer exists and we can redeclare and reuse it
for(int i = 1; i <= column; i++)
{
    ...
} 
```

3）您的错误检查不正确。它应该是这样的：

```
for(int i = 1; i < 8; i++)
{
    int newrow = row - i;
    int newcolumn = column - i;
    if (newrow < 0 || newrow > 7 || newcolumn < 0 || newcolumn > 7)
    {
       break;
    }
    if (board[newrow][newcolumn])
    {
        return true;
    }
} 
```

现在，当您复制+粘贴您的 for 循环时，您只需更改`newrow`和`newcolumn`的计算方式，其他所有内容（包括循环变量名称）都将相同。复制+粘贴时编辑的越少越好。我们还尝试了所有 7 个方格，因此我们不必更改结束条件 - 如果我们尝试在任何方向上越界，循环内的 if 检查将阻止我们。

4）当然，更好的是，只使用一次 for 循环，并且只将变化的东西传递给它......就像......

```
private boolean bishopAttackOneDirection(int rowdelta, int coldelta, int row, int column)
{
    for(int i = 1; i < 8; i++)
    {
        int newrow = row + rowdelta*i;
        int newcolumn = column + columndelta*i;
        if (newrow < 0 || newrow > 7 || newcolumn < 0 || newcolumn > 7)
        {
           break;
        }
        if (board[newrow][newcolumn])
        {
            return true;
        }
    }
    return false;
}

private boolean BishopAttack(int row, int column)
{
   return BishopAttackInOneDirection(-1, -1, row, column)
   || BishopAttackInOneDirection(1, -1, row, column)
   || BishopAttackInOneDirection(1, 1, row, column)
   || BishopAttackInOneDirection(-1, 1, row, column);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:35:07.947

可能不是预期的答案，但没有理由让生活变得更加复杂。

> 我正在努力弄清楚我可以在 nxn 板上放置的最大主教数量，而他们不能互相攻击。

```
public int getMaximumNumberOfNonAttackingBishopsForSquareBoardSize(final int boardSize) {
    if (boardSize < 2 || boardSize > (Integer.MAX_VALUE / 2))
        throw new IllegalArgumentException("Invalid boardSize, must be between 2 and " + Integer.MAX_VALUE / 2 + ", got: " + boardSize);
    return 2 * boardSize - 2;
} 
```

资料来源： http: [//mathworld.wolfram.com/BishopsProblem.html](http://mathworld.wolfram.com/BishopsProblem.html)

# trigger.io - trigger.io - 此捆绑包无效

> ID：14680360
> 
> 赞同：1
> 
> 时间：2013-02-04T04:27:10.027
> 
> 标签：trigger.io

我终于想将我的应用程序导出到 App Store，但现在我收到“此捆绑包无效。应用程序标识符的格式不正确；它应该包含您的 10 个字符的应用程序 ID种子，后跟一个点，然后是您的包标识符：.*"

我正在使用 Trigger.io 来包装我的应用程序，但是我能找到的关于此错误的唯一文档是与更改 xcode 或 plist 文件中的内容有关（我不知道在 OS 上的 Trigger 中在哪里找到X）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:30:03.623

原来我分配了不正确的证书 - 我在 Developer Portal 的证书中更改了配置文件，但没有重新下载它。有关正在发生的事情的更详细的消息（例如您发送的内容和预期的内容）可能会更快地解决此问题。

# python - 在 Lion 上重新安装 Python 2.5.6

> ID：14680367
> 
> 赞同：1
> 
> 时间：2013-02-04T04:27:38.167
> 
> 标签：python, google-app-engine, build, makefile, osx-lion

当我尝试在 Lion 上安装 Python 2.5.6 时，我遇到了与此线程中提到的相同的问题：[Mac Lion 上的 Python 2.5.6 build error](https://stackoverflow.com/questions/10084379/python-2-5-6-build-error-on-mac-lion)

具体来说，我收到的错误是尝试制作时：

```
/usr/bin/gcc-4.2 -c -fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes  -I. -IInclude -I./Include   -DPy_BUILD_CORE -o Modules/python.o ./Modules/python.c
cc1: error: unrecognized command line option "-Wno-long-double"
make: *** [Modules/python.o] Error 1 
```

就我而言，这是因为我删除了 python 2.5 文件夹，我认为在解决另一个问题时我永远不需要它。

现在，当我尝试启动 Google App Engine 时，我收到错误消息：“抱歉，GoogleAppEngineLauncher.app 的片段似乎丢失或损坏，或者我无法正常运行 python2.5”然后它关闭了，所以很遗憾我可以不要像上一个线程中建议的那样忽略问题。

编辑：看起来我通过删除文件夹把事情搞砸了。解决方案（虽然我还没有实现）在这里描述：[Mac Python“安装步骤失败：运行 postflight 脚本”](https://stackoverflow.com/questions/7473762/mac-python-installation-step-failed-run-postflight-script)

编辑 x2：解决了！虽然我不知道我造成了什么样的伤害。我运行了 .DMG 安装程序，即使它失败了，它也放置了 Python 2.5.4 的文件夹。在`/Library/Frameworks/Python.framework/Versions`. 然后我将它与 2.7 一起复制到`/System/Library/Frameworks/Python.framework/Versions`文件夹中。之后，启动 Google App Engine，一切正常！（目前。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:38:07.710

我认为您最好的选择是安装为 OS X 提供的通用二进制文件，请参阅[http://www.python.org/ftp/python/2.5.4/python-2.5.4-macosx.dmg](http://www.python.org/ftp/python/2.5.4/python-2.5.4-macosx.dmg)。

这在[http://docs.python.org/2/using/mac.html](http://docs.python.org/2/using/mac.html)上有很好的记录。

# c# - C# 活动窗口的屏幕截图不合适

> ID：14680369
> 
> 赞同：0
> 
> 时间：2013-02-04T04:28:08.457
> 
> 标签：c#, .net

我正在尝试按照下面 ArsenMkrt 回答的方法来捕获活动窗口的屏幕

[请检查 ArsenMkrt 的答案](https://stackoverflow.com/questions/1163761/c-sharp-capture-screenshot-of-active-window)

可以捕获整个屏幕并且它是完美的，但是当我尝试创建活动窗口时，屏幕的所有边缘都被剪掉了，例如缺少一些窗口标题栏，对于其他窗口，活动窗口以及其他一些背景被捕获. 我喜欢那个答案中提到的方法。我相信要在 CopyFromScreen 方法中进行一些更改以达到所需的完美。谁能指导我做这些改变？

# java - java泛型和反射导致这个编译错误的原因是什么？

> ID：14680379
> 
> 赞同：3
> 
> 时间：2013-02-04T04:29:24.193
> 
> 标签：java, generics, reflection

我有一个通用方法，它应该类似于递归，但为每次调用调用不同的方法实例。

```
public <M extends A> void doSomething(Class<M> mClass, M mObject)
{
    // ... Do something with mObject.

    A object = getObject();
    Class<? extends A> objectClass = object.getClass();

    doSomething(objectClass, objectClass.cast(object)); // Does not compile.
}

private A getObject() {...} 
```

问题是带有注释的行无法编译，出现以下错误：

> MainTest 类型中的方法 doSomething(Class, M) 不适用于参数 (Class, capture#3-of ? extends A)

我不太明白如果编译器可以`doSomething`用 M = "? extends A" 调用，为什么编译器不编译。

为什么不编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T04:42:08.263

好的，这是一个粗略的解释

您已经输入了您的方法，以便它接受 M ，它是 A 的子类型

现在您正在使用“objectClass”调用您的方法，它是 A 的子类型，**但不一定是 M 的子类型。**

因此编译器抱怨......

如果您能解释一下您正在尝试做的更多事情，我可以提供解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:14:19.463

该语言不跟踪这样的通配符（似乎）。您需要做的是捕获该通配符，这可以通过使用类型推断的方法调用来完成。

```
public <M extends A> void doSomething(Class<M> mClass, M mObject) {
    // ... Do something with mObject.

    A object = getObject();
    Class<? extends A> objectClass = object.getClass();
    privateSomething(objectClass, object);
}
private <T extends A> void privateSomething(Class<T> objectClass, A object) {
    doSomething(objectClass, objectClass.cast(object)); // Should compile.
} 
```

与往常一样，虽然反射有一些用途，但它通常是混乱的标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T05:00:52.250

当您要求编译器执行强制转换时，必须知道执行强制转换的确切类型。告诉编译器你不知道它是 A 的子类的确切类型摘录是不够的。

Class 告诉编译器对象的类型是 A 的子类，但它不会告诉编译器要用于强制转换的确切类型。

您的问题是您试图用通用替换多态性。当您正在艰难地学习时，Generic 并不是做多态的新的现代方式。

# xcode - xCode Tableview 设置边界

> ID：14680382
> 
> 赞同：0
> 
> 时间：2013-02-04T04:29:45.840
> 
> 标签：xcode, tableview, setbounds

试图将我的表格视图的边界设置为小于我的屏幕。我在 viewDidLoad 方法中设置它，但运行时没有任何反应。不知道为什么它不起作用。我在正确的地方调用它吗？

```
 //OptionsViewController.m

 - (void)viewDidLoad
 {
     [super viewDidLoad];
     self.tableView.frame = CGRectMake(1,1,29,80);
 }

 //  OptionsViewController.h
 #import <UIKit/UIKit.h>

 @interface OptionsViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
 {
     NSIndexPath *selectedRowIndex;
 }

 @property (weak, nonatomic) NSIndexPath *selectedRowIndex;
 @property (weak, nonatomic) IBOutlet UITableView *tableView;

 @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:52:39.493

在 viewDidAppear 方法中设置框架。有用。您可能想查看以下问题和答案以获得很好的解释：

[在 viewDidAppear 之前无法正确设置框架](https://stackoverflow.com/questions/13079172/unable-to-set-frame-correctly-before-viewdidappear)

TL;DR - 在 vi​​ewDidLoad 期间 UI 元素尚未绘制到屏幕上。

# asp.net - Linq to object 性能问题？

> ID：14680388
> 
> 赞同：0
> 
> 时间：2013-02-04T04:31:11.920
> 
> 标签：asp.net, performance

我的表中有 1000 万条记录。我正在尝试使用 linq 查询来获取记录，但这会导致性能问题。如何在没有任何延迟或任何性能问题的情况下获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:36:37.480

您可以使用[Enumerable.Skip](http://msdn.microsoft.com/en-us/library/bb358985.aspx)和[Enumerable.Take](http://msdn.microsoft.com/en-us/library/bb503062.aspx)实现分页以使用 LINQ 获取数据。为了更快地访问，您可以重新访问您当前的**[索引](http://en.wikipedia.org/wiki/Database_index)** *（如果有的话）*，数据并尝试仅加载所需的数据/列。

您可能会看到：[使用 Linq 进行有效分页（示例代码）- 代码项目](http://www.codeproject.com/Tips/458801/Effective-Paging-Using-Linq-Sample-Code)

如果您只想在数据库中搜索记录并只选择其中的几个并且您担心性能，那么它将更多地取决于您的数据库服务器。针对数据源的 LINQ 查询转换为底层查询语言。如果您的底层数据源是 SQL Server，那么 LINQ 将被转换为 SQL。[您可以通过LINQPad](http://www.linqpad.net/)或 Visual Studio获取生成的 SQL，并通过查看[查询执行计划](http://en.wikipedia.org/wiki/Query_plan)来查看它是否需要优化。您还可以针对要在 LINQ 查询中搜索的列设置索引，这将极大地改进从 1000 万行中选择记录。

# delphi - 添加 .bmp 作为封面未正确显示

> ID：14680392
> 
> 赞同：0
> 
> 时间：2013-02-04T04:31:44.670
> 
> 标签：delphi, opengl, delphi-xe2

试图让 bmp 包裹一个物体（圆柱体）。我有一个非图像纹理来包裹圆柱体，但是当我尝试对图像做同样的事情时，它会出现一个模糊/白色的电视屏幕黑白颜色？我将发布我所做的更改以尝试让 bmp 工作。希望我能得到一些答案：d

首先，我需要一个 24 位真彩色 256x256 图像。我在 Paint 中创建了它，将其大小调整为 256 x 256 像素并保存为 24 位 (.bmp)

其次是接口部分。因为它有一些类型和 const 可能有助于解决这个问题。在此我添加了 RTGB 类型和 TWrap 以及 var wapper。由于 24 位 windows bmp 文件没有 alpha 组件，因此还制作了 Const "ColorComps=3" 而不是 4。这是界面，因为它可能会有所帮助。但我认为问题出在函数 readbitmap 上。

```
unit zap1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls,opengl,shapes, Vcl.Forms, Vcl.Dialogs, Transfrm, cOpenGL;

type
 TTexe13=packed record
    red,
    green,
    blue: GLubyte;
  end;

  TTexe14=packed record
    red,
    green,
    blue,
    alpha: gLubyte;
  end;
  TForm2 = class(TForm)
    OpenGL1: TOpenGL;
    Transform1: TTransform;
    procedure FormCreate(Sender: TObject);
    procedure FormResize(Sender: TObject);
    procedure FormPaint(Sender: TObject);
    procedure Transform1Paint(Sender: TObject);
    procedure CylinderT(sTex,tTex:glFloat);
  private
    { Private declarations }
    deltax,
    deltaY,
    deltaZ:GLfloat;
    procedure idle(Sender:TObject;var Done:boolean);
  public
    { Public declarations }
    Function ReadBitmap(const FilePath:string;var sWidth,tHeight:glsizei):pointer;
  end;

var
  Form2: TForm2;

const
  Level=0;
  Border=0;
  ColorComps=3;

type
  TRGB=packed record
    r,g,b: byte;
  end;
  TWrap=array[0..0] of TRGB;
var
  Wrapper: pointer; 
```

接下来我添加了 ReadBitmap （我认为我的问题在这里）。它应该做什么.. 打开指定文件，获取文件大小并减去标题大小以获得实际位图的大小。然后它读取文件头并检查有效的位图签名。接下来，该函数读取信息标头并提取以像素为单位的宽度和高度，并通过 var 参数与调用者通信

```
 finally it allocates the required memory and asigns the bimap into that memory. the function then returns a pointer to the memory containing the raw true-color bitmap. Then at the end i added a pixel-flipping loop. due to openGL uses RGB and windows BGR.

Function TForm2.ReadBitmap(const FilePath:String;var sWidth,tHeight:GLsizei):pointer;
const
  szh=SizeOf(TBitmapFileHeader);
  szi=SizeOf(TBitmapInfoHeader);
var
  bmpfile: file;
  bfh:TBitmapFileHeader;
  bmi:TBitmapInfoHeader;
  t:byte;
  x,
  fpos,
  size: integer;
begin
  assignfile(bmpfile,FilePath);
  reset(bmpfile,1);
  size := FileSize(bmpfile)-szh-szi;
  blockread(bmpfile,bfh,szh);
  if bfh.bfType<>$4D42  then
    raise EinvalidGraphic.Create('Invalid Bitmap');
  blockread(bmpfile,bmi,szi);
  with bmi do
  begin
    sWidth := biWidth;
    tHeight := biHeight;
  end;
  getmem(result,size);
  blockread(bmpfile,result^,size);
  for x  := 0 to sWidth*tHeight-1 do
  with TWrap(result^)[x] do
  begin
    t := r;
    r := b;
    b := t;
  end;
end; 
```

最后，我为 oncreate 事件添加了一些更新。var sWidth 和 tHeight 应该从读取位图函数中获取宽度/高度。和用于包装的openGL命令

```
 Wrapper := ReadBitmap('SomeImage.bmp',sWidth,tHeight);
  glTexImage2D(GL_TEXTURE_2D,Level,ColorComps,sWidth,tHeight,Border,GL_RGB,GL_UNSIGNED_BYTE,Wrapper);
  freemem(Wrapper); 
```

现在看起来像

```
procedure TForm2.FormCreate(Sender: TObject);
var
  swidth,
  theight: GLsizei;
begin
  glPixelStorei(GL_UNPACK_ALIGNMENT,1);
  glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_REPEAT);
  glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_REPEAT);
  glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
  glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
  Wrapper := ReadBitmap('Fig11-11.bmp',sWidth,tHeight);
  glTexImage2D(GL_TEXTURE_2D,Level,ColorComps,sWidth,tHeight,Border,GL_RGBA,GL_UNSIGNED_BYTE,Wrapper);
  freemem(wrapper);
  glEnable(GL_TEXTURE_2D);
  glTexEnvf(GL_TEXTURE_ENV,GL_TEXTURE_ENV_MODE,GL_DECAL);
  application.OnIdle := idle;
  deltaX := 0.01;
  deltaY := 0.01;
  deltaZ := 0.01;
  cylinderBase;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:37:46.403

```
glTexImage2D(GL_TEXTURE_2D,Level,ColorComps,sWidth,tHeight,Border,GL_RGBA,GL_UNSIGNED_BYTE,Wrapper); 
```

到

```
glTexImage2D(GL_TEXTURE_2D,Level,ColorComps,sWidth,tHeight,Border,GL_RGB,GL_UNSIGNED_BYTE,Wrapper); 
```

刚刚从 GL_RGB 中取出 A

# visual-studio - 哪个 Visual Studio 2012 sku 有命令窗口

> ID：14680394
> 
> 赞同：0
> 
> 时间：2013-02-04T04:31:59.093
> 
> 标签：visual-studio, command-window

我刚刚为 C++ 安装了 Visual Studio 2012 Express。它没有可用的命令窗口（它不显示在视图->其他窗口->命令窗口上）。

搜索了一下，好像visual studio 2012 express没有。我假设 Ultimate Visual Studio 2012 有它，但有人知道专业 SKU 是否也有它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:37:54.103

不在快递
[http://alinconstantin.blogspot.co.nz/2012/08/command-window-and-immediate-window-are.html](http://alinconstantin.blogspot.co.nz/2012/08/command-window-and-immediate-window-are.html)

专业有。

# php - 登录后Facebook自动重新加载

> ID：14680395
> 
> 赞同：0
> 
> 时间：2013-02-04T04:32:01.333
> 
> 标签：php, facebook, facebook-graph-api

我希望我的 facebook 登录在我登录后得到刷新。就我而言，它会登录，但只有在我手动刷新页面后才会进入我的 Facebook 主页。我该如何解决这个问题？我正在使用 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:32:02.470

```
Well i was supposed to give this.. And i got it !!! 
<?php if ($userId) { 
  $userInfo = $facebook->api('/' + $userId); ?>
  Welcome <?= $userInfo['name'] ?>
<?php } else { ?>
<div id="fb-root"></div>
<fb:login-button></fb:login-button>
<?php } ?>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '<? echo('####'); ?>',
      status     : true, 
      cookie     : true,
      xfbml      : true,
      oauth      : true,
    });

    FB.Event.subscribe('auth.login', function(response) {
      window.location.reload();
    });
  }; 
```

# javascript - 如果 `date` 在月底，`date.setMonth` 会导致月份设置得太高

> ID：14680396
> 
> 赞同：34
> 
> 时间：2013-02-04T04:32:12.007
> 
> 标签：javascript, date

Date 对象的`getMonth()`方法似乎有一个错误。假设 Date`d`是`2013-01-31`，我尝试`d`像这样设置月份：

```
const d = new Date(); // 2013-01-31

d.setMonth(8);
console.log(d.getMonth()); 
```

结果是`9`。为什么？我在 Chrome 和 Firefox 中都对此进行了测试。

我发现当它是一个月的 31 号、30 号或 29 号时，将日期设置为天数较少的月份会导致`getMonth`返回错误的值。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-04T04:37:04.730

让我们分解一下：

```
var d = new Date(); // date is now 2013-01-31
d.setMonth(1);      // date is now 2013-02-31, which is 3 days past 2013-02-28
x = d.getMonth();   // what to do, what to do, 3 days past 2013-02-28 is in March
                    // so, expect x to be March, which is 2 
```

仅当 的日期值`d`大于传递给 的月份中的最大天数时，才会出现此问题`setMonth()`。否则，它会按您的预期工作。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-07-31T11:42:21.863

最简单的解决方案是向 setMonth 添加第二个参数：

```
var d = new Date();
d.setMonth(8,1);
d.getMonth(); //outputs 8 
```

[http://www.w3schools.com/jsref/jsref_setmonth.asp](http://www.w3schools.com/jsref/jsref_setmonth.asp)

> Date.setMonth(月,日)
> 
> 日：可选。表示月份日期的整数预期值为 1-31，但允许使用其他值：
> 
> 0 将导致上个月的最后一天 -1 将导致上个月最后一天的前一天 如果该月有 31 天：
> 
> 32 将导致下个月的第一天如果该月有 30 天：
> 
> 32 将导致下个月的第二天

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-04T04:36:04.253

JavaScript 中的月份是从 0 到 11 表示的。第 1 个月将是只有 28/29 天的 2 月，因此当您将月份设置为 1 时，它会尝试将日期自动更正为 3 月以使日期有意义（自 2 月 31 日起，没有意义）。使用 toDateString 函数试试看我的意思：

```
 var d = new Date('2013/01/31');
 d.setMonth(2);
 console.log(d.toDateString()); // outputs Match 3rd, 2013 
```

也许有点奇怪，但不是越野车。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-04T04:38:33.557

在 javascript 中，月份从 0 开始。假设今天是 02/04/2012，当您 setMonth(1) 时，它将尝试设置为 2 月。由于 2 月的最大天数是 28/29，它移动到下个月（3 月，即 2）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-29T11:20:00.057

这里的 setMonth 不是你所期望的，在更好的库中会发生什么。如果将日期 31.x.yyyy 设置为 x+1，则下个月 (x+1) 可能没有 31 天。所以 31.x+1.yyyy 会变成 1.x+2.yyyy。

在这种情况下，月份将增加 2 - 日期完全改变。

我在更改二月->三月时遇到了这个问题，感谢上帝，这只是一个测试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-31T13:24:00.467

这与**当前的本地日期有关，即使您设置的日期是过去或将来的日期**（假设您正确使用月份范围 0-11）。这是因为当您初始化 Date() 时，它使用的是当前日期。当您使用 setFullYear()、setMonth() 或 setDate() 修改日期时，默认的“当前”值仍然存在并且可以改变日期。

如果您当月的当天（今天）是该月的 31 日，然后您使用 setMonth()、setDate() 设置过去的日期，其中该月的天数少于您当前的 31 天，则 Date() 将给出你错误的月份，即使你特别说明它。这是因为当你 setMonth() 时，当前日期值 31，在你设置的月份中不存在，将它推到下个月。然后，当您设置日期时，月份永远不会变回。

如果您在月份之前设置月份中的某天 - setDate()、setMonth()，这可以解决问题，但还有另一个类似的问题/错误。如果您当前的月份只有 30 天，而您尝试设置的日期有 31 天，则它将月份的日期设置为 1，而不是 31。如果您设置前一个月，则可以解决此问题 - setMonth() , setDate()，但是你又回到了第一个问题。

**解决方案：**

1.  获取值，然后同时设置月份和月份的日期（如 reetah 建议的那样） - setMonth(8,1)
2.  使用可选值设置年份以初始化 setFullYear(1972, 0, 1)，然后是 setMonth, setDate。
3.  设置月份，设置日期，然后验证月份是否等于您设置的月份，如果不是，请再次设置 - setMonth()、setDate()、setMonth()

```
function formatDate(date) {
  var monthNames = [
    "January", "February", "March",
    "April", "May", "June", "July",
    "August", "September", "October",
    "November", "December"
  ];

  var day = date.getDate();
  var monthIndex = date.getMonth();
  var year = date.getFullYear();

  return day + ' ' + monthNames[monthIndex] + ' ' + year;
}

var date = new Date();
if (date.getDate() < 31) {
	$("#mydate").text("YOUR LOCAL DATE (on your computer) MUST BE SET TO THE 31st for this bug to show.");
} else {
  date.setFullYear(1972);
  date.setMonth(8); // (month-1)
  date.setDate(24);
  var breakdown = "<br>Day: " + date.getDate() + "<br>Month: " + date.getMonth() + "<br>Year: " + date.getFullYear();
  $("#mydate").html("Set as September (8)<br><br>" + formatDate(date) + breakdown);

  var date = new Date();
  date.setFullYear(1972);
  date.setMonth(8, 24); // (month-1)
  var breakdown = "<br>Day: " + date.getDate() + "<br>Month: " + date.getMonth() + "<br>Year: " + date.getFullYear();
  $("#mydate4").html("Set as September (8) but set day before month<br><br>" + formatDate(date) + breakdown);

  date.setFullYear(1972);
  date.setMonth(9); //October (month-1)
  date.setDate(24);
  var breakdown = "<br>Day: " + date.getDate() + "<br>Month: " + date.getMonth() + "<br>Year: " + date.getFullYear();
  $("#mydate2").html("Set as October (9)<br><br>" + formatDate(date) + breakdown);

  var date = new Date();
  date.setFullYear(1972);
  date.setMonth(7); //Aug (month-1)
  date.setDate(24);
  var breakdown = "<br>Day: " + date.getDate() + "<br>Month: " + date.getMonth() + "<br>Year: " + date.getFullYear();
  $("#mydate3").html("Set as August (7)<br><br>" + formatDate(date) + breakdown);
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
September 1972 has only 30 days.  If your current local day is 31, the Date will return October 1972 when you specify September before you specify the day of the month.
<br><br><div id="mydate" style="color: red;">
</div>
<br><br>
<div id="mydate4">
</div><br><br>
<div id="mydate2">
</div>
<br><br>
<div id="mydate3">
</div>
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-08-29T10:39:41.603

我只是这样解决了：

例子

```
var d = new Date('2013/01/31');

m = d.getMonth();

month = m*100/100 + 1; 
```

`Var month`包含正确的值。

# java - org.hibernate.Criteria 一堆扩展 org.hibernate.internal.CriteriaImpl 的 add(Restrictions)

> ID：14680398
> 
> 赞同：1
> 
> 时间：2013-02-04T04:32:31.453
> 
> 标签：java, hibernate, criteria

嗨，伙计们，我正在尝试开发一个 Single Java 类，它可以作为 org.hibernate.Criteria 之类的包装器，以一种优雅的方式摆脱一堆 add(Restrictions) 。到目前为止，我得到的是一个遗留系统。

```
public static void prepareForSelect(Criteria crit) {
    crit.add(Restrictions.eq("cid","1"));
    crit.add(Restrictions.eq("did","2");
    crit.add(Restrictions.eq("fdl","3")); //omit for brevity
} 
```

是的非常不合适我知道我正在尝试实现一个扩展 org.hibernate.internal.CriteriaImpl 并具有我需要限制并且我想要的属性的 java 类。这个类有这样的方法。

```
public org.hibernate.Criteria addStandartsRestrictions(){
   return this.add(Restrictions.eq("cid",getCid())).add(Restrictions.eq("did",getDid())).add(Restrictions.eq("fdl",getFdl()));
} 
```

在我的java代码中这样称呼它：

```
org.hibernate.Criteria myOwnCriteria = ((FullCriteria)Session.getSession().createCriteria(MyJava.class)).addStandartsRestrictions(); 
```

但我收到以下异常

```
Exception in thread "main" java.lang.ClassCastException:  org.hibernate.internal.CriteriaImpl cannot be cast to org.com.utilities.classes.FullCriteria
at javaapplication8.JavaApplication8.main(JavaApplication8.java:12) 
```

也许是不可能的事情，我不知道请大家指导我。

我的错误实现。

```
public class FullCriteria extends org.hibernate.internal.CriteriaImpl
{} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:21:46.350

`Session.createCriteria()`永远不会返回您自己的标准实现的实例。正如您所见，将结果转换为您的类也无济于事，因为转换永远不会改变对象的类型。

假设你有一个 Animal 的引用。你**知道**这种动物**是**一匹马。然后你可以这样做：

```
Horse horse = (Horse) animal; 
```

为了能够调用存在于 Horse 中而不存在于 Animal 中的方法。如果该动物实际上是一头牛，您将收到 ClassCastException，因为牛不是马。

您在应该使用组合的地方使用继承。您的类不应扩展 CriteriaImpl。它应该*使用*或*委托给*Criteria 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T06:01:22.260

不要将强制`Criteria`转换对象键入您自己的实现类的实例，它会引发错误`java.lang.ClassCastException: org.hibernate.internal.CriteriaImpl cannot be cast to com.uk.mysqlmaven.domain.CommonLookUpMaster`。

您可以使用以下示例得到上述错误

**例子：**

```
Session session = SessionFactoryMySqlMaven.getCurrentSession();
Criteria criteria = session.createCriteria(CommonLookUpMaster.class);
CommonLookUpMaster master = (CommonLookUpMaster) criteria.add(Restrictions.eq("type", type)); 
```

使用类中的`uniqueResult()`方法，`criteria`我们可以根据限制获取单个记录。如果您想获取`single`记录，请使用以下示例

**示例 1：**

```
Session session = SessionFactoryMySqlMaven.getCurrentSession();
Criteria criteria = session.createCriteria(CommonLookUpMaster.class);
criteria = criteria.add(Restrictions.eq("type", type));
CommonLookUpMaster master = (CommonLookUpMaster) criteria.uniqueResult(); 
```

为了得到`multiple records as a list`使用下面的例子

**示例 2：**

```
Session session = SessionFactoryMySqlMaven.getCurrentSession();
Criteria criteria = session.createCriteria(CommonLookUpMaster.class);
criteria = criteria.add(Restrictions.eq("type", type));
List<?> list = criteria.list(); 
```

# php - 某些计算机显示兼容性视图

> ID：14680400
> 
> 赞同：0
> 
> 时间：2013-02-04T04:33:11.387
> 
> 标签：php, internet-explorer, compatibility-mode

我知道这个问题到处都被问过，但即使在尝试了建议的方法后我也无法得到解决方案。

所以我客户的 IE 在浏览网站时自动切换到兼容性视图，并且导航没有显示内联，某些单词只是重叠，但是当我使用我的计算机和我的同事时，它们可以正常显示。

我尝试添加：

```
<meta http-equiv="X-UA-Compatible" content="IE=7,IE=8,IE=9"/> 
```

而当我尝试在IE9的兼容性视图中查看时，还是一样。

关于如何强制兼容性视图显示与标准视图相同的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:06:50.713

最好使用`edge`内容选项。它将强制IE不显示兼容模式按钮

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

更深入的答案可以在[这里找到](https://stackoverflow.com/a/6771584/109711)

# android - Android 聊天应用程序 - 单点登录

> ID：14680408
> 
> 赞同：0
> 
> 时间：2013-02-04T04:34:12.727
> 
> 标签：android, chat, single-sign-on

我制作了自己的聊天应用程序。但是在我的聊天应用程序中，我必须一次又一次地登录和注销。我想让它成为 What's App 或任何其他聊天应用程序（即用户应该只登录一次并在有可用的互联网连接时一直休息，他/应该自动连接到应用程序，反之亦然。

我不知道如何管理它。我已经彻底搜索过，找到了有关应用程序类的线索。但还不够，我可以在我的应用程序中使用它。

请帮助我提供有关我的要求的超链接，或使用一组代码指导我，以便我可以开始。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:46:41.613

您**不需要**单`Service`点登录课程！使用`SharedPreferences`类。

您可以在客户端设备上保留当前用户的密码，并在用户每次打开应用程序时使用它对服务器进行身份验证。

Android 开发者关系团队的技术主管特别推荐 SharedPreferences：[在 Android 应用程序中存储用户设置的最合适方式是什么](https://stackoverflow.com/questions/785973/what-is-the-most-appropriate-way-to-store-user-settings-in-android-application/786588#786588)

如果您想在应用程序不在前台时**在后台接收消息**`Service`，那么您可能需要使用class. 您可能还想使用[Google Cloud Messaging](http://developer.android.com/google/gcm/index.html)，它是 Google 为帮助您推送通知而开发的。

# ios - 无法在 segue 中设置 UIDatePicker 的日期

> ID：14680411
> 
> 赞同：0
> 
> 时间：2013-02-04T04:35:14.893
> 
> 标签：ios, objective-c, uidatepicker

我有一个带有多个警报的警报应用程序。

有一个 AlarmListViewController 是一个 UITableView 保存警报列表。选择该行时，将启动一个到 AlarmViewController（详细视图）的 segue。除日期外，其他所有内容都正确地从 AlarmListViewController 传递到 AlarmViewController。

我应该提到这`fullDate`是 NSDate 上的一个类别，使 NSDates 的打印更容易。

这是代码：

标题：

```
AlarmViewController.h

@interface AlarmViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate>

@property (weak, nonatomic) IBOutlet UIDatePicker *timeSelected;
@property (nonatomic, strong) NSMutableArray *repeatSelection;
@property (nonatomic, strong) NSString *alarmID;

@end 
```

执行：

```
AlarmViewController.m

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"---VIEW DID LOAD---, current date: %@", [[NSDate date] fullDate]);
    NSLog(@"alarmID: %@", self.alarmID);
    NSLog(@"repeat: %@", self.repeatSelection);
    NSLog(@"time: %@", [self.timeSelected.date fullDate]);

} 
```

prepareForSegue：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"self.selectedCell: %d", self.selectedCell);
    if ([segue.identifier isEqualToString:@"alarmDetail"] || [segue.identifier isEqualToString:@"addAlarm"])
    {
        AlarmViewController *aVC = (AlarmViewController *)[segue destinationViewController];
        if (self.tableView.editing)
        {
            NSDictionary *setting = [self.alarmList objectAtIndex:self.selectedCell];
            NSLog(@"setting.time = %@", [[setting objectForKey:@"time"] fullDate]);

            aVC.repeatSelection = [setting objectForKey:@"repeat"];
            aVC.alarmID = [setting objectForKey:@"alarmID"];
            aVC.timeSelected.date = [setting objectForKey:@"time"];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:47:27.173

您不能在加载视图之前设置 UI 元素的值，这是您在从 prepareForSegue 设置日期选择器的日期时尝试执行的操作。相反，您需要将日期传递给 aVC，然后在其 viewDidAppear 方法中，将日期选择器的日期设置为传入的日期（您需要 aVC 中的属性来保存该日期）。

# mysql - 如何从 MySQL 转储中删除选择性表

> ID：14680412
> 
> 赞同：0
> 
> 时间：2013-02-04T04:35:21.150
> 
> 标签：mysql

如何从 MySQL 转储中删除选择性表。我想从我的转储文件中删除以下表格。我该怎么做。

```
"DATABASECHANGELOG", "DATABASECHANGELOGLOCK", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:42:24.210

我想您可以使用以下命令进行 mysqldump 以忽略进行转储时的特定表，这样您就可以避免在进行转储后删除表的风险

```
mysqldump -u username -p database_name --ignore-table=database_name.table1 --ignore-table=database_name.table2 > test.sql 
```

# jquery - 如何使用ajax动态更新结果

> ID：14680413
> 
> 赞同：0
> 
> 时间：2013-02-04T04:35:21.613
> 
> 标签：jquery, ajax, asp-classic

我有一个显示由 ASP 和 SQL 生成的结果的区域。我希望使用 ajax 来更新这个区域，而不是每次都刷新页面。

我看过很多教程、w3c 等。没有一个有帮助。

谁能给我一些指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:22:49.870

这假定 ajax 调用返回您要在替换旧的 html 时使用的 html。

```
$.get('/path/to/file', function(data) {
    $('#my_replaced_div').html(data);
}); 
```

# c# - 在 WP7 中操作联系人

> ID：14680415
> 
> 赞同：0
> 
> 时间：2013-02-04T04:35:30.723
> 
> 标签：c#, windows-phone-7

我想制作一个操纵联系人的应用程序。我在列表框中开发了列表联系人。我还使用 SaveContactTask 开发了保存联系人。但是我不知道如何开发编辑和删除联系人。这不可能？？？如果可能，请告诉我如何开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:41:58.780

它不可用。想象一下，一些糟糕的应用程序删除了用户的联系人列表。那将是可怕的。因此，Windows Phone 操作系统不向开发人员提供该功能。

类似的问题：[在 WP7 中编辑联系人信息](https://stackoverflow.com/questions/7663304/editing-contacts-info-in-wp7)

# javascript - 谷歌地图 api 版本问题

> ID：14680416
> 
> 赞同：0
> 
> 时间：2013-02-04T04:35:54.500
> 
> 标签：javascript, google-maps, google-maps-api-3, map

我在使用 Google 地图 api 时遇到问题。当我使用 api 源作为

[https://maps.googleapis.com/maps/api/js?v=3.9&sensor=true&libraries=places&callback=LoadMap](https://maps.googleapis.com/maps/api/js?v=3.9&sensor=true&libraries=places&callback=LoadMap) ';

然后在我的应用程序中捏缩放不起作用。或者实际上地图的滑动不能正常工作（它向一个方向滑动，有时甚至不滑动。很多问题）。

但是当我使用 api 源作为 [https://maps.googleapis.com/maps/api/js?key=XXX&sensor=true&libraries=places&callback=initialize](https://maps.googleapis.com/maps/api/js?key=XXX&sensor=true&libraries=places&callback=initialize) ";

然后捏缩放工作，甚至滑动工作正常。但是，如果我用上面的“api 源”替换它，那么我为上面的 api 创建的信息窗口不会打开。

有什么建议吗？该怎么办。我应该使用其他任何 api 源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:42:16.190

是的，3.9 是旧版本，并且在 safari 上缩放缩放功能被破坏。尝试升级到更高版本，或者像在非版本化网址上一样使用最新版本

# audio - 通过音频进行性别检测

> ID：14680422
> 
> 赞同：1
> 
> 时间：2013-02-04T04:36:10.547
> 
> 标签：audio, analysis

通过读取音频文件的频率数据，我一直在到处寻找某种形式的性别检测。我没有找到可以做到这一点的程序，甚至可以输出音频数据的任何程序，因此我可以编写一个基本程序来读取它并对其进行操作以确定说话者的性别。

你们有谁知道我在哪里可以找到可以帮助我解决这个问题的东西吗？

重申一下，我基本上想要一个程序，当一个人对着麦克风说话时，它会相当精确地说出说话者的性别。我的完整计划是在它上面也有语音到文本的功能，所以程序会写出演讲者所说的话，并给出演讲者的一些非常基本的人口统计数据。

*最好使用支持跨平台或 linux 的通用脚本语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:24:22.127

您将要研究共振峰检测和线性预测编码。[这是一篇论文](http://www.ijaet.org/media/0001/6GENDER-RECOGNITION-USING-SPEECH-PROCESSING-TECHNIQUES-IN-LABVIEW-Copyright-IJAET.pdf)，其中包含一些可以移植到 scipy/numpy 的信号流图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-14T11:46:24.860

虽然是一个老问题，但如果有人对从音频中进行性别检测感兴趣，您可以通过提取 MFCC（梅尔频率倒谱系数）特征并使用机器学习模型 GMM（高斯混合模型）对其进行建模来轻松做到这一点

可以按照本教程执行相同的操作，并在从 Google 的 AudioSet 性别明智数据中提取的子集上对其进行了评估。

[https://appliedmachinelearning.wordpress.com/2017/06/14/voice-gender-detection-using-gmms-a-python-primer/](https://appliedmachinelearning.wordpress.com/2017/06/14/voice-gender-detection-using-gmms-a-python-primer/)

# c++ - 按索引值按字母顺序对向量进行排序

> ID：14680424
> 
> 赞同：0
> 
> 时间：2013-02-04T04:36:22.943
> 
> 标签：c++, sorting, vector, alphabetical

我有一个要按字母顺序排序的向量。我已经成功地能够按字母顺序按一个索引值对其进行排序，但是当我这样做时，它只会更改该索引的顺序，而不是整个向量。我怎样才能让它将订单更改应用于整个向量？这是我正在运行的当前代码：

```
std::sort (myvector[2].begin(), myvector[2].end(), compare);

bool icompare_char(char c1, char c2)
{
  return std::toupper(c1) < std::toupper(c2);
}

bool compare(std::string const& s1, std::string const& s2)
{
  if (s1.length() > s2.length())
    return true;
  if (s1.length() < s2.length())
    return false;
  return std::lexicographical_compare(s1.begin(), s1.end(),
                                      s2.begin(), s2.end(),
                                      icompare_char);
} 
```

我对这个向量的一般结构是 vector[row][column] 其中：

```
| One | Two | Three |
|  1  |  2  |   3   |
|  b  |  a  |   c   | 
```

例如，如果我有一个向量：

```
myvector[0][0] = 'One' AND myvector[2][0]='b'
myvector[0][1] = 'Two' AND myvector[2][1]='a'
myvector[0][2] = 'Three' AND myvector[2][2]='c'

| One | Two | Three |
|  1  |  2  |   3   |
|  b  |  a  |   c   | 
```

我对它进行排序，我得到：

```
myvector[0][0] = 'One' AND myvector[2][0]='a'
myvector[0][1] = 'Two' AND myvector[2][1]='b'
myvector[0][2] = 'Three' AND myvector[2][2]='c'

| One | Two | Three |
|  1  |  2  |   3   |
|  a  |  b  |   c   | 
```

而不是我想要的：

```
myvector[0][0] = 'Two' AND myvector[2][0]='a'
myvector[0][1] = 'One' AND myvector[2][1]='b'
myvector[0][2] = 'Three' AND myvector[2][2]='c'

| Two | One | Three |
|  2  |  1  |   3   |
|  a  |  b  |   c   | 
```

我环顾四周寻找一个好的方法，但找不到任何有效的方法......我在想类似的事情：

```
std::sort (myvector.begin(), myvector.end(), compare); 
```

然后在我的比较函数中处理第三个索引的排序，以便编辑整个向量......但是当我传递我的数据时，我要么只更改了函数中的顺序，但仍然没有更改顶层或出错。任何建议或帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T04:44:17.277

理想情况下，将 3 个数据字段合并到 a`struct`中，这样您就可以只有 1 个向量，因此可以简单地对其进行排序。

```
struct DataElement{
    std::string str;
    char theChar;
    int num;
    bool operator<(const DataElement& other)const{return theChar<other.theChar;}
};

std::vector<DataElement> myvector;

std::sort (myvector.begin(), myvector.end()); 
```

# javascript - 如何从一个大字符串变量中获取 seasonId= 前面的数据？

> ID：14680425
> 
> 赞同：0
> 
> 时间：2013-02-04T04:36:35.797
> 
> 标签：javascript

大家好，我有一个大字符串变量（var bigstring），我想在 seasonId= 前面获取数据。例如，在我的 bigstring 中的某个地方，我有这个：seasonId=5567，我想只获取 5567 值（我也想如果有空格，则删除 5567 值之后的任何空格）并将其放入另一个变量中？如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:43:13.267

你的意思是：

```
var myRegexp = /seasonId=(\d+)/;
var match = myRegexp.exec(yourBigString); 
console.log( match ); //will give 5567 
```

# asp.net - JQGrid 只加载第一页记录而不是进一步

> ID：14680429
> 
> 赞同：0
> 
> 时间：2013-02-04T04:36:53.027
> 
> 标签：asp.net, jqgrid

我正在将数据显示到 jqgrid 中，但我的 jqgrid 在第一页中仅显示 100 条记录，当我单击下一页按钮图标时，它再次获取相同的记录。而 jqgrid 正在正确计算总页数和总记录。 ..下面是我的代码...

索引.aspx

```
<script type="text/javascript">
    $(function () {
        $("#UsersGrid").jqGrid({
            url: 'ModCust.ashx',
            datatype: 'json',
            height: 500,
            colNames: ['Duration','username', 'ordinal', 'authcode'],
            colModel: [
                    { name: 'duration', index: 'duration', width: 100, sortable: true,hidden:true },
                    { name: 'username', width: 100, sortable: true },
                    { name: 'ordinal', width: 100, sortable: true },
                    { name: 'authcode', width: 100, sortable: true },

                ],

            cmTemplate: { title: false },
            rowNum: 100,
            rowList: [100, 200, 300],
            pager: '#UsersGridPager',
            sortname: 'duration',
            viewrecords: true,
            autowidth:true,
            sortorder: 'asc'
          });

        $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false });
    });

</script> 
```

这是我的处理程序代码..

ModCust.ashx

```
public struct JQGridResults
{
    public int page;
    public int total;
    public int records;
    public JQGridRow[] rows;
}
public struct JQGridRow
{
    public string duration;
    public string[] cell;
}
[Serializable]
public class User
{
    public string duration { get; set; }
    public string username { get; set; }
    public string ordinal { get; set; }
    public string authcode { get; set; }
}

public class ModCust : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        HttpRequest request = context.Request;
        HttpResponse response = context.Response;

        string _search = request["_search"];
        string numberOfRows = request["rows"];
        string pageIndex = request["page"];
        string sortColumnName = request["sidx"];
        string sortOrderBy = request["sord"];

        int totalRecords;
        Collection<User> users = GetUsers(numberOfRows, pageIndex, sortColumnName, sortOrderBy, out totalRecords);
        string output = BuildJQGridResults(users, Convert.ToInt32(numberOfRows), Convert.ToInt32(pageIndex), Convert.ToInt32(totalRecords));
        response.Write(output);
    }
    private string BuildJQGridResults(Collection<User> users, int numberOfRows, int pageIndex, int totalRecords)
    {

        JQGridResults result = new JQGridResults();
        List<JQGridRow> rows = new List<JQGridRow>();
        foreach (User user in users)
        {
            JQGridRow row = new JQGridRow();
            row.duration = user.duration;
            row.cell = new string[4];
            row.cell[0] = user.duration;
            row.cell[1] = user.username;
            row.cell[2] = user.ordinal;
            row.cell[3] = user.authcode;
            rows.Add(row);
        }
        result.rows = rows.ToArray();
        result.page = pageIndex;
        result.total = (totalRecords + numberOfRows - 1) / numberOfRows;
        result.records = totalRecords;
        JavaScriptSerializer serializer = new JavaScriptSerializer() { MaxJsonLength = Int32.MaxValue, RecursionLimit = 100 };
       // return new JavaScriptSerializer().Serialize(result);
        return serializer.Serialize(result);
    }

    private Collection<User> GetUsers(string numberOfRows, string pageIndex, string sortColumnName, string sortOrderBy, out int totalRecords)
    {
        Collection<User> users = new Collection<User>();
        string connectionString = "Server=localhost;Port=3306;Database=projecttt;UID=root;Pwd=techsoft;pooling=false";

        using (MySqlConnection connection = new MySqlConnection(connectionString))
        {
            using (MySqlCommand command = new MySqlCommand())
            {
                command.Connection = connection;
                command.CommandText = "select duration,username,ordinal,authcode from processeddata_table ";
                command.CommandType = CommandType.Text; // StoredProcedure;

                MySqlParameter paramPageIndex = new MySqlParameter("@PageIndex", MySqlDbType.Int32);
                paramPageIndex.Value = Convert.ToInt32(pageIndex);
                command.Parameters.Add(paramPageIndex);

                MySqlParameter paramColumnName = new MySqlParameter("@SortColumnName", MySqlDbType.VarChar, 50);
                paramColumnName.Value = sortColumnName;
                command.Parameters.Add(paramColumnName);

                MySqlParameter paramSortorderBy = new MySqlParameter("@SortOrderBy", MySqlDbType.VarChar, 4);
                paramSortorderBy.Value = sortOrderBy;
                command.Parameters.Add(paramSortorderBy);

                MySqlParameter paramNumberOfRows = new MySqlParameter("@NumberOfRows", MySqlDbType.Int32);
                paramNumberOfRows.Value = Convert.ToInt32(numberOfRows);
                command.Parameters.Add(paramNumberOfRows);

                MySqlParameter paramTotalRecords = new MySqlParameter("@TotalRecords", MySqlDbType.Int32);
                totalRecords = 0;
                paramTotalRecords.Value = totalRecords;
                paramTotalRecords.Direction = ParameterDirection.Output;
                command.Parameters.Add(paramTotalRecords);

                connection.Open();

                using (MySqlDataReader dataReader = command.ExecuteReader())
                {
                    User user;
                    while (dataReader.Read())
                    {
                        user = new User();
                        user.duration = Convert.ToString(dataReader["duration"]);
                        user.username = Convert.ToString(dataReader["username"]);
                        user.ordinal = Convert.ToString(dataReader["ordinal"]);
                        user.authcode = Convert.ToString(dataReader["authcode"]);
                        users.Add(user);
                    }
                }
                totalRecords = users.Count;

            }

            return users;
        }

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

请先生帮助我。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T05:31:16.360

由于您在 grid 中将数据类型定义为 json 。您应该将 json reader 放入您的代码中。把它贴在你的网格下面。

```
jsonReader: {
                    repeatitems: false,
                    root: "rows",
                    page: "page",
                    total: "total",
                    records: "records"
                }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:22:50.743

我认为问题出在您的`totalRecords = users.Count;`，看起来像`users.count`根据您的搜索条件返回列表中的总记录而不是数据库中的总记录。您必须进行单独的查询以仅使用搜索条件获取总记录，以便获得总记录。

更新 ：

尝试`pageIndex = (pageIndex*numberOfRows)-numberOfRows`getUsers 方法

# c# - ModalPopupExtender 动画 OnShown

> ID：14680434
> 
> 赞同：0
> 
> 时间：2013-02-04T04:37:58.230
> 
> 标签：c#, asp.net, asp.net-ajax

我正在学习 ASP .NET 并遇到了模态弹出扩展器。我发现使用模态弹出窗口可以制作动画，但我对 OnShowing 和 OnShown 标签之间的区别有疑问。谷歌搜索给了我

```
OnShowing – Called before the modal popup is shown.
OnShown – Called after the modal popup is shown.
OnHiding – Called before the modal popup is hidden.
OnHidden – Called after the modal popup is hidden. 
```

但是，我对一些事情感到困惑。当我点击目标按钮并使用 OnShowing 时，没有动画效果。但是当我使用 OnShown 时，动画是成功的。现在，在显示模式弹出窗口之前不是调用了 OnShowing，所以当我单击目标按钮时，应该调用的是函数 OnShowing。我想我在这里遗漏了一些东西。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:06:59.670

你检查过这个 [AnimationExtender with ModalPopup] ( [http://forums.asp.net/p/1318051/2624063.aspx#2624063](http://forums.asp.net/p/1318051/2624063.aspx#2624063) ) 吗？他们为 ModalPopUpExtender Animations 提供了一个非常好的示例。它会让你真正理解你的担忧。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:20:37.627

尝试通过添加`return true;`onshowing 函数返回 true

# rest - CakePHP 中的 REST 优雅降级

> ID：14680435
> 
> 赞同：0
> 
> 时间：2013-02-04T04:37:58.333
> 
> 标签：rest, cakephp, progressive-enhancement, graceful-degradation

好吧，这里一个更好的标题可能是“CakePHP 中的 REST 渐进增强”，但至少现在我知道如果你的答案只是指两者之间的区别，你没有读过这个问题；）

我非常熟悉 REST 以及如何将它与 CakePHP 集成，但我并不是 100% 了解如何仍然维护一个常规功能的网站。使用 Router::mapResources 听起来是个好主意，但这会在维护站点的“优雅降级”版本方面产生问题，因为对 /resource/ 的 POST 请求和对 /resource/add 的 GET 请求都会路由到相同的操作（添加）。显然，如果他们使用的是 REST api，我希望此操作返回一个 JSON 对象，但如果他们使用的是网站的降级版本（可能没有 JS），它应该是一个添加表单，对吧？

处理这个问题的最佳方法是什么。您是否使用 Router::resourceMap() 将 REST 请求路由到其他操作名称？你有没有做过我看到的那种疯狂的黑客行为，有 /api/ 前缀部分的资源映射，所以你可以使用 api_action 函数？您是否通过检查 isAjax() 来处理 REST 和常规请求的操作？如果是这样，您如何确保可以依赖浏览器正确支持其他两种请求类型？

我已经搜索了很多，但没有找到任何关于如何在 Cake 中保持传统请求与 REST 一起可用的任何信息，所以如果有人有任何建议或经验，我很想听听！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:30:46.353

CakePHP 也使用扩展路由，通过 Router::parseExtension() 所以；

*   /test/action 将呈现视图/test/action.ctp
*   /test/action.html 也
*   /test/action.json 将呈现视图/test/json/action.ctp
*   /test/action.xml 将呈现视图/test/xml/action.ctp

如果所有视图都设计为处理控制器设置的相同数据，那么您将能够显示常规 HTML 表单并以与处理 AJAX 请求相同的方式处理发布的数据。

*如果在 /add、/edit、/delete 操作中*发布/提交了任何数据，您可能需要添加检查，以防止在未发布表单的情况下删除项目（虽然尚未测试，可能是蛋糕如果为控制器设置了 mapresources，则阻止这些 url)

CakePHP 中的 REST：http: [//book.cakephp.org/2.0/en/development/rest.html](http://book.cakephp.org/2.0/en/development/rest.html)

（扩展）路由 [http://book.cakephp.org/2.0/en/development/routing.html#file-extensions](http://book.cakephp.org/2.0/en/development/routing.html#file-extensions)

# javascript - 在 select2 中标记新标签？

> ID：14680438
> 
> 赞同：8
> 
> 时间：2013-02-04T04:38:18.167
> 
> 标签：javascript, jquery, jquery-select2

我正在使用select2，

我已经设置好了，所以如果它不存在，我可以添加一个新标签，

我也在使用 twitter 引导程序，如果标签不存在，我想将其标记为新标签，为此我在文本前面加上`'<span class="label label-important">New</span> '`this 作为我的 select2 初始化程序。

```
$('#newVideoCategory').select2({
        placeholder: 'Select a category...',
        data: categories,
        createSearchChoice: function (term, data) {
            if ($(data).filter(function () {
                return this.text.localeCompare(term) === 0;
            }).length === 0) {
                return {id: term, text: '<span class="label label-important">New</span> ' + term};
            }
        },
        initSelection: function (element, callback) {
            $(categories).each(function () {
                if (this.id == element.val()) {
                    callback(this);
                    return;
                }
            })
        }
    }) 
```

现在这很好用

![标记为新标签](../Images/babeefe5c629708d4dd055724424c65f.png)

除非我为标签输入的内容作为该标签的标记的一部分存在 ![错误标记为新标签](../Images/6031f6a559eb2831c4b4f2922fd77289.png)

根据我收集到的内容，我需要覆盖`formatResult`、`formatSelection`或`matcher`.

这就是我从文档中得到的，但我不明白我需要如何改变它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-08T18:37:15.253

感谢您发布（并回答）问题！我想我找到了一种更简单的方法来解决这个问题：

```
...
createSearchChoice:function(term, data) {
    if ($(data).filter(function() {
        return this.text.localeCompare(term) === 0;
    }).length === 0) {
        return {id:term, text: term, isNew: true};
    }
},
formatResult: function(term) {
    if (term.isNew) {
        return '<span class="label label-important">New</span> ' + term.text;
    }
    else {
        return term.text;
    }
},
... 
```

您可以从`createSearchChoice()`函数返回任何对象，因此只需添加一个字段，告知`formatResult()`它是一个新项目。

这样，返回项目的文本就是你想要的文本，而且`formatResult()`简单很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:09:53.503

啊，通过覆盖`formatResult`函数得到它。

基本上我们所做的是检查第一个字符是否是我们`newTagMark`的，然后我们将其删除，应用匹配逻辑，然后再次将其添加到前面以将其吐出。

大部分逻辑实际上只是对select2内部`markMatch`函数的复制和粘贴。

```
var newTagMark = '<span class="label label-important">New</span> ';

$('#newVideoCategory').select2({
    placeholder: 'Select a category...',
    data: categories,
    createSearchChoice: function (term, data) {
        if ($(data).filter(function () {
            return this.text.localeCompare(term) === 0;
        }).length === 0) {
            return {id: term, text: newTagMark + term};
        }
    },
    initSelection: function (element, callback) {
        $(categories).each(function () {
            if (this.id == element.val()) {
                callback(this);
                return;
            }
        })
    },
    formatResult: function(result, container, query) {
        var text = result.text;
        var term = query.term;
        var markup=[];
        var marked = false;
        if(text.substr(0, newTagMark.length) == newTagMark){
            text = text.substr(newTagMark.length);
            markup.push(newTagMark);
        }

        var match=text.toUpperCase().indexOf(term.toUpperCase()),
                tl=term.length;
        if (match<0) {
            markup.push(text);
            return;
        }

        markup.push(text.substring(0, match));
        markup.push("<span class='select2-match'>");
        markup.push(text.substring(match, match + tl));
        markup.push("</span>");
        markup.push(text.substring(match + tl, text.length));
        return markup.join("");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-20T13:01:31.730

包括匹配标记的解决方案如下：

```
...
createSearchChoice:function(term, data) {
    if ($(data).filter(function() {
        return this.text.localeCompare(term) === 0;
    }).length === 0) {
        return {id:term, text: term, isNew: true};
    }
},
formatResult: function (result, container, query, escapeMarkup) {
    var markup=[];
    window.Select2.util.markMatch(this.text(result), query.term, markup, escapeMarkup);
    var text = markup.join("");
    if (result.isNew) {
        text = '<span class="label label-important">NEW</span> ' + text;
    }
    return text;
},
... 
```

# c# - 出现错误：调用线程无法访问此对象，因为 WPf 应用程序中的另一个线程拥有它

> ID：14680439
> 
> 赞同：0
> 
> 时间：2013-02-04T04:38:22.390
> 
> 标签：c#, wpf, multithreading, serial-port

> **可能重复：**
> [调用线程无法访问此对象，因为不同的线程拥有它](https://stackoverflow.com/questions/2728896/the-calling-thread-cannot-access-this-object-because-a-different-thread-owns-it)

我在我的 Serialport 程序中收到此错误：

> 调用线程无法访问此对象，因为不同的线程拥有它。wpf

我有一个定时器功能来更新我的用户界面，同时用户可以按下任何按钮与串行端口通信。

```
public MainWindow()
{
    InitializeComponent();

    OpenPort();

    Timer aTimer = new System.Timers.Timer();
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
    aTimer.Interval = 5000;
    aTimer.Enabled = true;
} 
```

这是我的两个功能：

```
private void OnTimedEvent(object sender, EventArgs e)
{
    CheckStatus(); // this function will update my UI base of information will receive from serial port         
}

private void Processing()
{
    // Do stuff with serial port
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:40:27.603

> 我有一个定时器功能来更新我的 UI

使用[Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)从其他线程修改 GUI。

> 在 WPF 中，只有创建 DispatcherObject 的线程才能访问该对象。例如，从**主 UI 线程分离的后台线程无法更新在 UI 线程上创建的 Button 的内容。**为了让后台线程访问 Button 的 Content 属性，后台线程必须将工作委托给与 UI 线程关联的 Dispatcher。这是通过使用 Invoke 或 BeginInvoke 来完成的。Invoke 是同步的，而 BeginInvoke 是异步的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T08:53:32.440

正如您的错误所说，问题是您启动了一个具有特定功能的线程。在您的情况下，当您使用 启动线程时`OnTimedEvent`，此函数在与主应用程序不同的范围内运行：

![在此处输入图像描述](../Images/93844521aa98e2d7bcaa6eefacfc83c0.png)

这意味着：无论您尝试从`OnTimedEvent`与您的主程序相关的什么访问，反之亦然，都会失败，因为它不在同一范围内运行。你能做什么？我使用代表团。

首先，您需要知道`Context`您的主应用程序在哪个平台上运行。因此，为您的主应用程序创建一个全局变量：

```
private SynchronizationContext uiContext; 
```

然后，当您启动应用程序时，可以像这样捕获上下文的状态：

```
public MainWindow()
{
    uiContext = SynchronizationContext.Current;
} 
```

有了这个，您可以了解您的应用程序或不同功能的真实上下文。因此，如果您想知道您`OnTimedEvent`是否在不同的上下文中运行并委托它，您将执行以下操作：

```
if (SynchronizationContext.Current != uiContext)
{
    uiContext.Post(delegate { EnableMenuAndButtons(o, args); }, null);
}
else
{
    // Do your normal stuff here
} 
```

有了这个，你应该能够在你的线程和 vivecersa 中使用变量。

**o**和**args**是我传递的变量。我正在使用 WPF，但您可以将此示例与常规 Windows 窗体一起使用（但您必须使用它的特定方法）。您需要的库是`System.Threading`.

**澄清：**对你来说，像这样：

```
private void OnTimedEvent(object sender, EventArgs e)
{
    if (SynchronizationContext.Current != uiContext)
    {
        uiContext.Post(delegate { EnableMenuAndButtons(sender, e); }, null);
    }
    else
    {
        // Do your normal stuff here
        CheckStatus(); // this function will update my UI base of information will receive from serial port 
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:45:18.123

请注意，`System.Timers.Timer`tick 事件是在不同于主 UI 线程的另一个线程中生成的。您可以通过以下方式轻松验证

```
System.Diagnostics.Debug.WriteLine(System.Threading.Thread.CurrentThread.ManagedThreadId); 
```

在这种情况下，您需要调用`Dispatcher.Invoke`以更新 UI 元素，正如 @Habib 指出的那样。

另一方面，您也可以使用[DispatcherTimer](http://www.google.de/search?q=dispatchertimer)（WPF 引入的计时器）而不是`System.Timers.Timer`. 随着`DispatcherTimer`tick 事件将在主 UI 线程中引发，您可以毫无问题地修改 UI。

# underscore.js - 使用玉循环下划线模板

> ID：14680442
> 
> 赞同：0
> 
> 时间：2013-02-04T04:38:34.573
> 
> 标签：underscore.js, pug

我正在用翡翠快速运行模板，并在客户端代码上运行主干/下划线。我想使用一个玉循环来遍历一个数组，并为每个数组构造 div。

```
 .members
    each elem in <%= members %>
      .member elem 
```

当然，这不会起作用，因为玉模板是由 express 编译和提供的......任何解决方案，除了单独格式化成员并像这样插入它吗？我也不想在客户端编译翡翠。

```
 .members
    <%= members %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:41:03.127

我不确定我是否理解你的问题。如果'members'是一个服务器端变量，你为什么不直接使用它呢？

```
.members
    each elem in members
      .member elem 
```

编辑：啊，我明白了，所以如果你想在客户端得到它，你可以按照以下方式做一些事情：

```
script
  var members = #{JSON.stringify(members)}; 
```

然后，您将“成员”作为变量客户端，您可以使用它做任何您想做的事情（包括在下划线模板中呈现它）。

# javascript - 在对象 swf 上使用鼠标移动时，使用事件 mousemove 时出错不能隐藏值？

> ID：14680444
> 
> 赞同：0
> 
> 时间：2013-02-04T04:39:03.527
> 
> 标签：javascript, jquery

```
<script>
oj = ["a","img","object"];
jQuery(document).bind('mousemove', function(e) {
    jQuery("#arrow").css({
        top : e.pageY - 10,
        left : e.pageX + 35
    })
    jQuery.each(oj, function(i, val) {
        jQuery(val).mouseover(function() {
            jQuery("div[id^=\'arrow\']").hide()
        });
        jQuery(val).mouseout(function() {
            jQuery("div[id^=\'arrow\']").show()
        })
    }) 
});
</script> 
```

和 html (swf + a)

```
<object height="90" width="380">
    <param name="movie" value="banner.swf">
    <param vmode="transparent" value="opaque" name="wmode">
    <embed height="90" width="380" vmode="transparent" wmode="opaque" src="banner.swf">
</object>
<a href="index.html">test</a>
<div id="arrow">arrow</div> 
```

当我 mousemove on`a tag`是结果隐藏`<div id="arrow">arrow</div>`时，但是当 mousemove on`object swf`是结果不是隐藏值`<div id="arrow">arrow</div>`时，如何解决？[在这里演示我的](http://jsfiddle.net/trrc8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:51:04.410

你应该写你的jQuery代码 `$(document).ready(function(){ //code here });`

此外`top`，`left`可以`position`在您的代码中添加一行

```
jQuery("#arrow").css({
    top : e.pageY - 10,
    left : e.pageX + 35,
    position:'relative'
}) 
```

这是演示 [http://jsfiddle.net/trrc8/1/](http://jsfiddle.net/trrc8/1/)

# python - python编译器书籍

> ID：14680446
> 
> 赞同：4
> 
> 时间：2013-02-04T04:39:15.493
> 
> 标签：python, python-3.x, python-2.7

我想知道是否存在任何描述 python 编译器的书？有一本关于 ruby​​ MRI 的日文书籍已被翻译成英文。我想知道 python 是否存在这样的书。

对不起，如果这已经被问到了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:44:32.363

如果您只是在谈论 CPython 字节码生成器（而不是*真正*的编译器，可以生成本机可执行代码或任何非 CPython 实现），那么第一个调用端口将是[CPython 编译器](http://docs.python.org/devguide/compiler.html)页面的设计。

它是[Python 开发人员指南](http://docs.python.org/devguide/index.html)的一部分。

# jquery-plugins - 使用Javascript将幻灯片图像替换为幻灯片中的另一个图像（Jquery Cycle）

> ID：14680447
> 
> 赞同：0
> 
> 时间：2013-02-04T04:39:16.013
> 
> 标签：jquery-plugins

我有 10 张图像使用 Jquery Cycle 插件显示为幻灯片。一次显示 4 张图像。当用户单击下一个按钮时，将显示接下来的 4 张图像。

每个图像下都有一个下拉菜单。当我在下拉列表中选择一个项目时，我想根据用户在 dropdowm 中选择的项目将图像更改为其他图像。

当用户在下拉列表中选择另一个项目时，我还需要更改图像的“href”。

当用户在下拉列表中选择一个项目时，我使用下面给出的 javascript 代码来更改图像和其他详细信息

Javascript代码

```
document.getElementById('prodLink' + productId).href = "productDetails.aspx?id=" + productAttributeValueId;

            document.getElementById('prodImageLink' + productId).href = "productDetails.aspx?id=" + productAttributeValueId;
            document.getElementById('prodImage' + productId).src = "ProductImages/" + productImage;
            document.getElementById('prodImage' + productId).className=document.getElementById('prodImage' + productId).className;
            document.getElementById('prodNameLink' + productId).href = "productDetails.aspx?id=" + productAttributeValueId;
            document.getElementById('productPrice' + productId).innerHTML = productPrice;
            document.getElementById('prodAttribute' + productId).innerHTML = attributeValue; 
```

**HTML 代码**

```
<div class="cycle-slideshow" data-cycle-fx="scrollHorz" data-cycle-timeout="0"
  data-cycle-slides="&gt; ul" data-cycle-prev="div.pagers a.latest_prev" data-cycle-next=
  "div.pagers a.latest_nxt">
    <ul class="product_show">
      <li class="column">
        <div class="img">
          <div class="hover_over">
            <a class="link" href="#">link</a> <a class="cart" href="#">cart</a>
          </div><a href="#"><img src="images/photos/4c_pic8.jpg" width="218" height="207"
          alt="" /></a>
        </div><a href="#" style="line-height:14px;">Product 1,<br />
        1 Kg Pouch<br /></a> <span class="ourPrice">Our Price: $121.20</span><span class=
        "saveText"><br /></span>

        <div class="dropdowndiv">
          <select name="search_category1" class="default" tabindex="1" style=
          "color: #333333;">
            <option value="">
              Pack size
            </option>

            <option value="amazed">
              Amazed
            </option>

          </select>
        </div><br />
        <br />
        <label for="textfield">Qty</label> <input type="text" name="textfield" id=
        "textfield" class="carttextbox" /> &nbsp; <img src="images/img/but_addtocart.png"
        alt="" width="72" height="16" align="absmiddle" /><br />
        <br />
      </li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:27:28.243

这是修改后的工作 javascript 代码，用于更改 Jquery Cycle2 幻灯片中的图像（和一些其他信息）

我添加了 $('.cycle-slideshow').cycle('destroy'); 在更改任何信息之前

之后，我更改了所有必需的信息

然后我调用 $('.cycle-slideshow').cycle(); 重新创建幻灯片

```
$('.cycle-slideshow').cycle('destroy');
            document.getElementById('prodLink' + productId).href = "productDetails.aspx?id=" + productAttributeValueId;

            document.getElementById('prodImageLink' + productId).href = "productDetails.aspx?id=" + productAttributeValueId;
            document.getElementById('prodImage' + productId).src = "ProductImages/" + productImage;
            document.getElementById('prodImage' + productId).className=document.getElementById('prodImage' + productId).className;
            document.getElementById('prodNameLink' + productId).href = "productDetails.aspx?id=" + productAttributeValueId;
            document.getElementById('productPrice' + productId).innerHTML = productPrice;
            document.getElementById('prodAttribute' + productId).innerHTML = attributeValue;

            $('.cycle-slideshow').cycle(); 
```

# c# - EntityFramework DBContext 审计中的错误

> ID：14680453
> 
> 赞同：0
> 
> 时间：2013-02-04T04:40:42.097
> 
> 标签：c#, entity-framework-5

我的目标是同时创建保存和审核日志。在实体进入状态更改后运行应用程序 var result =base.SaveChnages() 时，如何克服这个问题可以帮助任何人

```
 public override int SaveChanges()
    {
        ChangeTracker.DetectChanges();
        using (var scope = new TransactionScope())
        {
            var objectStateManager = ((IObjectContextAdapter) this).ObjectContext.ObjectStateManager;
            var modifiedAuditableEntities =
                objectStateManager.GetObjectStateEntries(EntityState.Modified | EntityState.Added).Where(
                    e => (IAuditable) e.Entity != null);
            var result = base.SaveChanges();
            foreach (var entry in modifiedAuditableEntities)
            {
                var entity = (IAuditable) entry.Entity;

                if (entity != null)
                {
                    switch (entry.State)
                    {
                        case EntityState.Added:
                            entity.IsAdded = true;
                            break;
                        case EntityState.Deleted:
                            entity.IsDeleted = true;
                            break;
                        case EntityState.Modified:
                            entity.IsModified = true;
                            break;
                    }

                    this.EntitySet<AuditLogEntry>().Add(
                        this.auditLogService.CreateAuditLogEntryForEntity((IAuditable) entry.Entity));
                }
            }
            base.SaveChanges();

            scope.Complete();
            return result;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:19:08.120

覆盖“OnContextCreated”方法并绑定“SaveChanges”事件处理程序，如下所示：

```
public partial class MyDataModel
{
    partial void OnContextCreated()
    {
        this.SavingChanges += new EventHandler(CreateAuditLog);
    }

    void CreateAuditLog(object sender, EventArgs e)
    {
         var changes = this.ObjectStateManager.GetObjectStateEntries(EntityState.Deleted | EntityState.Modified);
        if (!changes.Any())
            return;

        var auditDataList = new List<AuditLogEntry>();
        foreach (ObjectStateEntry stateEntryEntity in changes)
        {
            if (!stateEntryEntity.IsRelationship && stateEntryEntity.Entity != null && !(stateEntryEntity.Entity is AuditLogEntry))
            {
                var audit = new AuditLogEntry();
                auditDataList.Add(audit);
            }
        }

        if (auditDataList.Count > 0)
        {
            foreach (var audit in auditDataList)
                this.AddToAuditLogEntries(audit);
        }      
     }  
} 
```

# python - MacOSX 下的 Python Scrapy：没有名为 twisted.internet 和 gcc 4.0 的模块

> ID：14680455
> 
> 赞同：2
> 
> 时间：2013-02-04T04:40:47.613
> 
> 标签：python, gcc, twisted, scrapy

我是一个python新手，正在尝试自己学习如何使用Scrapy，但我第一步失败了......我安装好Scrapy，并按照[http://doc.scrapy.org/en/latest上的说明进行操作/intro/tutorial.html](http://doc.scrapy.org/en/latest/intro/tutorial.html)。

在终端中键入“scrapy startproject tutorial”后，它返回

```
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/bin/scrapy", line 3, in <module>
    from scrapy.cmdline import execute
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-        packages/scrapy/cmdline.py", line 7, in <module>
    from scrapy.crawler import CrawlerProcess
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-    packages/scrapy/crawler.py", line 3, in <module>
    from twisted.internet import reactor, defer
ImportError: No module named twisted.internet 
```

然后我去下载twisted，它需要gcc-4.0，我没有找到它的下载。我的 python2.7.3 似乎在 gcc4.0.1 上运行，但我不知道哪里出了问题......这是我在终端中键入“pip install twisted”后的最后几行（虽然我让我的 pip 运行了） ：

```
gcc-4.0 -fno-strict-aliasing -fno-common -dynamic -g -O2 -DNDEBUG -g -O3 -arch i386 -arch x86_64 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c twisted/test/raiser.c -o build/temp.macosx-10.3-intel-2.7/twisted/test/raiser.o

unable to execute gcc-4.0: No such file or directory

error: command 'gcc-4.0' failed with exit status 1 
```

* * *

```
Command     /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -c "import setuptools;__file__='/var/folders/ww/7vcs04j95jg4dgcb94t7s5p00000gn/T/pip-build/twisted/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/ww/7vcs04j95jg4dgcb94t7s5p00000gn/T/pip-lfT0hS-record/install-record.txt --single-version-externally-managed failed with error code 1 in /var/folders/ww/7vcs04j95jg4dgcb94t7s5p00000gn/T/pip-build/twisted 
```

我的 Mac 在 MACOSX 10.7.5 上运行，我从未安装过 Xcode。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T02:56:21.443

我在 OSX 上遇到了 Scrapy 的确切问题。我通过以下方式修复了它：

*   从 App Store 安装 Xcode
*   打开 Xcode
*   转到“首选项”
*   选择“下载”选项卡
*   安装命令行工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T05:01:26.450

这个问题解决了！对于那些发现自己处于这种情况的人，以下是解决方案：

如果您使用的是 MacOSX 10.6 或更高版本（我的是 MacOSX 10.7.5）并且如果您想使用 Scrapy，请检查 Python 的版本：下载“Python 2.7.3 Mac OS X 64-bit/32-bit x86 -64/i386 Installer”从官方页面下载正确版本的ActiveTcl，并测试Python：它应该使用gcc 4.2.1。

然后，安装 pip，然后安装 Scrapy、twisted、zope 和 Scrapy 想要的任何其他模块。

（其实我在安装正确版本的Python之前安装了gcc4.2.1。所以如果上面的解决方案还不够，可以试试安装gcc4.2.1）

感谢计算机专业人士@卡拉马祖学院！

# php - 使用 CodeIgniter 的 CSS 文件说明

> ID：14680457
> 
> 赞同：-2
> 
> 时间：2013-02-04T04:40:53.803
> 
> 标签：php, css, codeigniter

我是 Codeigniter 的新生。我已经制作了我的设计的 HTML 页面，并根据划分标签将它们拆分。在文件名head.php（在views文件夹中，我添加了我设计的CSS。但我的CSS不起作用。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:46:00.500

将 css 文件放入存储 index.php 的基本文件夹并使用它。如果要将其存储在其他位置，请使用`base_url();`codeigniter [http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html中的函数](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:20:02.857

尝试这个，

在你看来把这个

```
<link href="<?php echo base_url(); ?>css/your_css.css" rel="stylesheet" type="text/css"></link> 
```

然后在您的 ci 文件夹下创建一个文件夹

*   ci文件夹

    *   应用
    *   系统
    *   css - 把你的 css 放在这个文件夹中

# jquery - 在 EditableGrid 中添加滚动条

> ID：14680458
> 
> 赞同：1
> 
> 时间：2013-02-04T04:41:01.147
> 
> 标签：jquery, grid, vertical-scroll, editablegrid

我正在使用 EditableGrid( [http://www.editablegrid.net](http://www.editablegrid.net) ) 并想知道有没有办法在网格中插入滚动条。

我不想使用分页，我只想添加一个滚动条，以便我可以向下/向上滚动以查看记录。

比如说，我将网格的页面大小设置为 20，如果要显示第 40 条记录/行，则网格右侧会出现一个垂直滚动条。如果它是 '<= 20' 那么它不应该显示滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:37:13.127

您可以将页面大小设置为无限（坏主意），然后您只需限制要绑定 DataTable 的表的大小。这将限制 DataTable 的大小，使其在小于 20 时看起来“不错”，超过 20 时看起来没有什么不同，它只会有一个滚动条。

这不是推荐的攻击计划，因为这意味着 DOM 和 dataTable 中有很多项目，您应该使用分页或 JSON 方法中的所有记录。

如果您需要更多信息，请与我们联系。

# facebook - 从服务器端触发的网页中的 Toast

> ID：14680477
> 
> 赞同：-1
> 
> 时间：2013-02-04T04:42:36.607
> 
> 标签：facebook, popup, webpage

以 Facebook 为例，当有人喜欢您的照片时，您会在屏幕左下角收到一个迷你弹出通知，该通知会停留几秒钟。我想知道它是如何触发的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:56:11.753

如果你想要服务器端推送到浏览器，你应该使用像 Comet 这样的技术。

[http://en.wikipedia.org/wiki/Comet_（编程）](http://en.wikipedia.org/wiki/Comet_(programming))

有许多不同语言的实现。

# linux - 如何与具有许多冲突功能的两个共享库链接

> ID：14680481
> 
> 赞同：0
> 
> 时间：2013-02-04T04:43:00.397
> 
> 标签：linux, gcc, g++, shared-libraries, function-interposition

我目前正在链接 linux 上的两个第三方共享库（A.so 和 B.so）。问题是这两个so都与另一个库静态链接，因此来自A.so和B.so的大约400个函数具有相同的名称。当我使用 -lA -lB 或 -lB -lA 编译和链接时，由于函数插入导致问题并且代码无法运行，这取决于从 A 或 B 分别提取函数的顺序。我想知道是否有办法将函数名称绑定到它们的库，以便两个库都可以链接和使用？因为那些重叠的函数名称是在 A 和 B 内部调用的，所以我不能使用 objcopy 之类的东西。dlopen 有帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T07:04:59.330

> 我想知道是否有办法将函数名称绑定到它们的库，以便两个库都可以链接和使用？

当两个库链接时，他们应该控制了他们导出的符号，并且应该隐藏了“其他”库，但他们没有......

> dlopen 会有帮助吗？

是的：如果你`dlopen("A.so", RTLD_LOCAL);`和`dlopen("B.so", RTLD_LOCAL);`，那么两个库都不会被添加到全局范围内，它们也不会“看到”对方。

您必须从`A.so`和中显式查找所需的符号`B.so`，但这是您能做的最好的事情。

**更新：**

> 在构建 A.so 时，是否有一种快速链接到静态库的方法，而无需从“其他”库中导出符号

这最好通过使用`-fvisibility=hidden`标志和`__attribute__((visibility("default")))`应导出的符号来完成。例子：

```
#define EXPORTED __attribute__((visibility("default")))

struct Foo {
  void EXPORTED ExportedFunction();
  void EXPORTED AnotherExportedFunction();
  void InternalFunction();
};

void Foo::ExportedFunction() { }
void Foo::AnotherExportedFunction() { }
void Foo::InternalFunction() { }

gcc -shared -fPIC -o foo.so foo.cc
nm -CD foo.so  | grep Foo::
00000000000005fc T Foo::ExportedFunction()
0000000000000610 T Foo::InternalFunction()
0000000000000606 T Foo::AnotherExportedFunction() 
```

如果没有明确的出口控制，一切都会被出口（包括`InternalFunction`我们不想要的）。

```
gcc -shared -fPIC -o foo.so foo.cc -fvisibility=hidden
nm -CD foo.so  | grep Foo::
00000000000005bc T Foo::ExportedFunction()
00000000000005c6 T Foo::AnotherExportedFunction() 
```

瞧：只有我们明确想要导出的东西。

# php - php while循环中的javascript

> ID：14680482
> 
> 赞同：0
> 
> 时间：2013-02-04T04:43:03.023
> 
> 标签：php, javascript, jquery

我有这个代码：

```
<?php
$i=5;
while($i > 0){
echo '
<table width="500px" border="1">
  <tr>
    <td>
    <button id="button">Show comments</button>
    </td>
  </tr>
  <tr>
    <td id="comments" style="display:none;height:300px;width:100%;"></td>
  </tr>
</table>

<script type="text/javascript">
$("#button").toggle(
    function (){
        $("#button").text("Hide Comments");
        document.getElementById("comments").style.display="inline";
    },function (){
        $("#button").text("Show Comments");
        document.getElementById("comments").style.display="none";
    }
);
</script>
<script type="text/javascript" src="jquery.js"></script>
';

$i--;

}
?> 
```

单击显示评论按钮时，应显示评论框。它适用于第一个。但这对其他人不起作用。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T04:52:45.277

我只是转义 php 解释器并将 HTML 标记直接打印到页面中。我还将 id 更改为类，这样我们就可以更轻松地重用它们，而无需额外的数字。

```
<?php
$i=5;
while($i > 0):
?>
    <table width="500px" border="1">
       <tr>
          <td><button class="button" data-clicked="0">Show comments</button></td>
       </tr>
       <tr>
          <td class="comments" style="display:none;height:300px;width:100%;"></td>
       </tr>
    </table>
<?php
$i--;
endwhile;
?> 
```

我不知道`the element with an ID`show 是什么，但我们假设它是按钮。

```
$(".button").click(function (){
    var $this = $(this);
    if(!$this.data('clicked')){
        $this.text("Hide Comments");
        $this.closest('table').find('.comments').css('display', 'inline');

        $this.data('clicked', 1);
    }else{
        $this.text("Show Comments");
        $this.closest('table').find('.comments').css('display', 'none');

        $this.data('clicked', 0);
    }

}); 
```

不要`while`在 php 的循环中打印该 javascript，只需将其包含在页面头部或单独的文件中。

**编辑**

正如下面的评论中所指出的，在 jQuery 1.9 中，它`toggle`不再像您打算使用的那样工作，作为一种解决方法，您可以`data attribute`向按钮添加 a，并在每次单击时检查它。

```
<button class="button" data-clicked="0"> 
```

如您所见，我们添加了新`data-clicked`属性。

在上面的 JavaScript 中，您可以看到我们已经完全改变了它的工作方式。我们执行我们自己`if/else`的检查`data-clicked`状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:50:45.893

将代码、标记和样式声明分开通常是一种很好的做法。作为风格问题，我更喜欢编号的 ID。我发现它们有助于调试。ymmv 我也喜欢动画变化，这样人们就可以更容易地跟随变化。

```
<!doctype html>
<html>
    <head>
        <title>Button Testing 1 2 3</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <style>
            .comment {
                display: none;
                height: 0px;
                width: 500px;
            }
            td  {
                width: 500px;
                border: 1px solid #555;
                border-collapse: collapse;
            }
        </style>
    </head>
<body>
<?
$j = 0;
while ($j < 5 ) {
?>
    <table>
      <tr>
        <td>
        <button id="button_<?= $j ?>" class="button">Show comments</button>
        </td>
      </tr>
      <tr>
        <td class="comment"><span id="comment_<?= $j ?>">J = <?= $j ?></span></td>
      </tr>
    </table>
<? 
    $j++;
} ?>

<script type="text/javascript">
$(document).ready(function(){

    $(".button").click(function(){
        var id = $(this).attr('id');
        var j  = id.substr(id.indexOf('_') +1);

        if ($(this).hasClass('revealed')) {
            $(this).removeClass('revealed').text('Show Comments');
            $('#comment_'+j).removeClass('revealed').parent().animate({'height' : 0}, function(){$(this).css({'display': 'none'})});
        } else {
            $(this).addClass('revealed').text('Hide Comments');
            $('#comment_'+j).addClass('revealed').parent().css({'display': 'inline'}).animate({'height' : '300px'});
        }
    });
});
</script>
</body>
</html> 
```

# concrete5 - 如何在concrete5中列出主页中的新闻

> ID：14680484
> 
> 赞同：0
> 
> 时间：2013-02-04T04:43:14.687
> 
> 标签：concrete5

如何在首页列出新闻[需要列出最新消息]。我已经使用concrete5中的作曲家创建了新闻，它在pagelist类型的页面中成功列出，但我无法在主页中列出。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:34:42.060

只需使用 BlockType “页面列表”

# python - 在 Python 中查找一行并读取下一行

> ID：14680485
> 
> 赞同：0
> 
> 时间：2013-02-04T04:43:21.053
> 
> 标签：python, line

例如，在 Python 中，我解码一个 url 并找到这样的报告：

```
<title>Canada Olympic Park</title>

<description>Open  / Past 48 Hours: 0cm / Primary:  / Base Depth: 85cm</description>

<title>Castle Mountain</title>

<description>Open  / Past 48 Hours: 1cm / Primary:  / Base Depth: 179cm</description>

<title>Lake Louise</title>

<description>Open  / Past 48 Hours: 2cm / Primary:  / Base Depth: 162cm</description> 
```

如何使用 find() 找到我感兴趣的地方并阅读下一行以进行进一步编程？基本上如何找到一个特定的行并阅读我刚刚找到的行下的下一行？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:00:35.963

尝试使用 itertools.dropwhile()：

```
Python 2.7.3 (default, Sep  4 2012, 20:19:03) 
[GCC 4.2.1 20070831 patched [FreeBSD]] on freebsd9
Type "help", "copyright", "credits" or "license" for more information.
>>> import itertools
>>> src="foo\nbar\nbas\n"
>>> notfoundyet=True
>>> def findthing(x):
...     global notfoundyet
...     currently=notfoundyet
...     notfoundyet=x!="bar"
...     return currently
... 
>>> itertools.dropwhile(findthing, src.split("\n"))
<itertools.dropwhile object at 0x8017d92d8>
>>> for x in _: 
...     print x
... 
bas 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:12:16.893

您可以使用`xml.dom.minidom`

假设您的 xml 数据在文件中

```
from xml.dom.minidom import parse

xmldata = open("abc.txt", "r")

domdata = parse(xmldata)

def getDescriptionData(title):
    titledata = [x.toxml().lstrip('<title>').rstrip('</title>') for x in domdata.getElementsByTagName('title')]
    descriptiondata = [x.toxml().lstrip('<description>').rstrip('</description>') for x in domdata.getElementsByTagName('description')]

    l =  [v for (x, v) in zip(titledata, descriptiondata) if x == title]
    if l:
        return l[0]
    return None

print getDescriptionData('Lake Louis') 
```

输出：

```
Open  / Past 48 Hours: 2cm / Primary:  / Base Depth: 162cm 
```

您还可以查看[SAX XML 解析](http://wiki.python.org/moin/Sax)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:47:59.853

```
def getLine(source, string):
    source = source.split('\n')
    for index, item in enumerate(source):
        if string in item:
            return source[index + 1] 
```

# winbugs - 当指定老化和细化时，JAGS/BUGS 节省了多少次迭代？

> ID：14680488
> 
> 赞同：3
> 
> 时间：2013-02-04T04:44:00.857
> 
> 标签：winbugs, jags, mcmc, r2jags

我有一个关于在 JAGS 和 BUGS 中运行模型的详细信息的快速问题。

`n.burnin=5000`假设我使用和运行`n.iter=5000`模型`thin=2`。这是否意味着该程序将：

1.  运行 5,000 次迭代，并丢弃结果；接着
2.  再运行 10,000 次迭代，只保留每秒的结果？

如果我将这些模拟保存为一个`CODA`对象，是全部保存了 10,000 个，还是只保存了稀疏的 5,000 个？我只是想了解使用哪组迭代来制作 ACF 图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-06T07:14:32.080

使用 JAGS, `n.burnin=5000, n.iter=5000 and thin=2`, 意味着你什么也不保留。您运行 5000，丢弃这 5000 个中的前 5000 个，然后只保留链中剩余值的一半（保留 1 个值并丢弃下一个 ..）。

使用例如`n.burnin=2000, n.iter=7000, thin=50, n.chains=5`：所以你有 (7000-2000)/50 * 5 = 500 个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:31:45.940

您能否更具体地说明您在谈论哪个软件？看起来您指的是 R2WinBUGS 包中函数 bugs() 的参数（除了该参数称为 n.thin not thin）。查看帮助（错误）它只是说 n.burnin 是“开始时要丢弃的迭代次数”。这并没有具体回答您的问题，但是查看该包中 bugs.script() 的源代码向我表明，正如您所怀疑的那样，它将运行 5000 次迭代。您可以向该软件包的维护者发送建议，以澄清他们的文档。

在您的示例中， bugs() 将在老化后运行 0 次进一步迭代。这里的文档更清楚 - n.iter 是包括老化在内的迭代总数。

对于您的第二个问题，WinBUGS（以及任何调用 WinBUGS 或 OpenBUGS 的软件）的 CODA 输出将仅包括精简样本。

# php - Magento 分层导航说项目存在于搜索/空白页面上

> ID：14680489
> 
> 赞同：0
> 
> 时间：2013-02-04T04:44:13.203
> 
> 标签：php, magento, navigation

我刚刚尝试在我的 Magento 商店上激活分层导航，它显示如下：

[http://imgur.com/a/Lnfo0](http://imgur.com/a/Lnfo0)

似乎认为已经选择了一些项目 - 即使在只有一个结果的搜索结果中也是如此。

有没有办法可以调试它来尝试找出它从哪里获取项目？

它也没有选择我所有的商品，因为我的商店里有大约 1000 件商品。它只挑了一把。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:01:43.043

从您发布的图像中，我没有看到任何异常。您通过产品的属性控制分层导航中的产品，因此您所看到的和获得的结果将取决于您设置的属性、哪些产品具有哪些属性以及属性设置。

在目录->属性->管理属性中，您可以编辑属性，在前端属性设置中，您可以指定该属性是否将用于分层导航和分层导航的搜索结果。

另外，请记住，“可过滤（无结果）”选项将允许过滤器出现，即使没有与之匹配的产品，这也可能导致您的问题；

![在此处输入图像描述](../Images/252c97229b05e882784c6cd919198349.png)

# php - 在 Smarty 中调用 PHP 变量

> ID：14680492
> 
> 赞同：0
> 
> 时间：2013-02-04T04:44:29.900
> 
> 标签：php, smarty

下面在 Smarty 中调用此 PHP 代码将不起作用

PHP 中的示例用法

```
$content=@file_get_contents("http://www.gempixel.com/short/api/?url=http://www.google.com&api=APIKEY");

$url=json_decode($content,TRUE);//Decodes json into an array

if(!$url["error"]){  // If there is no error
echo $url["short"]; //Outputs the short url
}else{ 
echo $url["msg"]; //Outputs the error message
} 
```

对于 Smarty，我只需要将 php 替换为 {php} 就可以了。

```
{php}$shortenedurl = file_get_contents('http://www.gempixel.com/short/api/?api=fAaFjILdbigF&url=' . urlencode('http://' . $_SERVER['HTTP_HOST']  . $_SERVER['REQUEST_URI']));{/php}

{php}$url=json_decode($content,TRUE);if(!$url["error"]){echo $url["short"];}else{echo $url["msg"];}{/php} 
```

但它不会调用字符串。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:48:48.993

首先，您需要将变量值分配给 smarty

```
$iframe="hiii";
$smarty->assign( 'iframe', $iframe ); //$smarty is a global var to assign 
```

然后得到它你的 .tpl 文件

```
{$iframe} 
```

# mysql - 使用 Ruby 将两个单独数组中的值插入到 mysql 表中

> ID：14680499
> 
> 赞同：1
> 
> 时间：2013-02-04T04:45:34.323
> 
> 标签：mysql, ruby, arrays

假设我有两个不同的数组。

> 电子邮件 = [“email@email.com”、“email1@email.com”、“email2@email.com”]
> 
> 姓名 = [“姓名姓氏”，“姓名1，姓氏1”，“姓名2，姓氏2”]

我有一个名为 Contacts 的 mysql 表，我想将每个值插入到名为 Emails 和 Names 的行中。每个名称和电子邮件都应插入其相应的索引处。因此，Emails[0] 应与 Names[0] 一起插入，Emails[1] 与 Names[1] 等一起插入。

如果只有一个数组。我可以做类似的事情

> sql = "INSERT INTO Contacts (email)
> VALUES
> ('#{email}')
> 
> Emails.each do |email|
> email = email.sql
> end

但现在我有两个数组，我需要把它们放在一起，以便每封电子邮件都根据正确的名称关联。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:51:28.923

使用`zip`：

```
 con.prepare "INSERT INTO Contacts(email, name) VALUES(?, ?)"
 Emails.zip(Names).each do |email,name|
   #insert into db
   con.execute(email,name) #assuming **con** is your connection object
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:52:39.447

如果你真的想迭代，你可以这样做：

```
Email.zip(Names).each do |email, name|
  sql = "INSERT INTO Contacts (email, name) VALUES ('#{email}', '#{name)')"
end 
```

或者，您可以使用批量插入

```
sql = "INSERT INTO Contacts (email, name) VALUES (" + 
      Emails.zip(Names).map { |e, n|  "('#{e}', '#{n}')" }.join(",") + ")" 
```

看起来有点丑，但你懂的

# r - 导入多个文件，然后找到列的平均值数组

> ID：14680501
> 
> 赞同：-2
> 
> 时间：2013-02-04T04:46:14.703
> 
> 标签：r

我想在 R 中导入多个数据并找到每个文件第三列的平均值。我在下面展示了示例。

我已经使用 Ramnath 的[Import multiple text files in R 中的解决方案在 R 中导入了多个文件，并从预先确定的列表中为其分配名称](https://stackoverflow.com/questions/5359517/import-multiple-text-files-in-r-and-assign-them-names-from-a-predetermined-list)。到目前为止我使用的代码如下：

```
#Import mulitple text using following code: files with extension *.dat
txt_files =list.files(pattern='\\.dat$')
data_list=lapply(txt_files,read.table,sep="\t",header=T) 
```

使用 Nico 的答案将数据框从[R 列表更改为数据框](https://stackoverflow.com/questions/4227223/r-list-to-data-frame)

```
 # Change the list to dataframe
    hello <- as.data.frame(do.call(rbind,data_list))
    dim(hello)

# Using 12 files I got the following information
> dim(hello)
[1] 58536     1 
```

每个文件有 4878 行。这不是我要找的。上面的代码所做的是将所有数据基于行合并到一个数据框中。

我希望它按列计算，并且能够从每个文件中计算第三列的平均值。我想使用每个文件的第三列并找到平均值数组。

我想要的样本如下：

> 文件 1

```
Lat Long Value
10 12  15
12 13  16 
```

> 文件 2

```
 Lat Long Value
    10  12 11
    12 13  15 
```

> 最终文件

```
Lat Long  Value
10 12  13
12 13  15.5 
```

正如您在最终文件中看到的那样，前两列是相同的，唯一不同的是第三列是来自两个文件的两个值的平均值。所以，我想用我的数据改成类似于上图的最终文件的数据框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:36:42.377

# 按坐标分组

只要您不要求最终列表按任何特定顺序排列，并且没有具有相同坐标的不同行，就可以按行组合事物。在这种情况下，您可以简单地使用公共坐标对行进行分组，然后像这样聚合它们：

```
aggregate(Value ~ Lat + Lon, hello, mean) 
```

# 按行号分组

另一方面，如果您有重复的坐标，或者希望最终结果与所有输入的顺序相同，那么您应该`Value`从每个输入中提取列`data.frame`并将它们组合成一个矩阵。然后您可以计算每个矩阵行的平均值，并将这些平均值与任何输入数据帧的两个坐标列结合起来。整个方法很大程度上依赖于输入数据行的顺序，即给定位置的行号在所有文件中都相同。你可以像这样实现它：

```
mean_values <- apply(do.call(cbind, lapply(data_list, function(df) df$Value)), 1, mean)
cbind(data_list[[1]][1:2], Value=mean_values) 
```

# 试试这个

这是我的系统上的示例会话：

```
> data_list <- list(File.1=data.frame(Lat=c(10,12),Lon=c(12,13),Value=c(15,16)),
                    File.2=data.frame(Lat=c(10,12),Lon=c(12,13),Value=c(11,15)))
> hello <- as.data.frame(do.call(rbind,data_list))
> dim(hello)
[1] 4 3
> str(hello)
'data.frame':   4 obs. of  3 variables:
 $ Lat  : num  10 12 10 12
 $ Lon  : num  12 13 12 13
 $ Value: num  15 16 11 15
> aggregate(Value ~ Lat + Lon, hello, mean)
  Lat Lon Value
1  10  12  13.0
2  12  13  15.5
> value_matrix <- do.call(cbind, lapply(data_list, function(df) df$Value))
> value_matrix
     File.1 File.2
[1,]     15     11
[2,]     16     15
> mean_values <- apply(value_matrix, 1, mean)
> cbind(data_list[[1]][1:2], Value=mean_values)
  Lat Lon Value
1  10  12  13.0
2  12  13  15.5 
```

# 只有一列？

由于您仅从读取输入文件中获得一列，因此根据您的输出，您应该使用or来`dim`调查该数据框，看看出了什么问题。很可能，您的列不是由制表符分隔，而是由逗号或空格等分隔。请注意，如果您*不*指定，则任何空格和/或制表符序列都将用作列分隔符。有关详细信息，请阅读文档。`head``str`*`sep``read.table`*

# java - 用于识别 javassist 中的 switch case 的操作码

> ID：14680503
> 
> 赞同：-2
> 
> 时间：2013-02-04T04:46:51.083
> 
> 标签：java, reflection, asmx, javassist

如何使用 javassist 或 asm 在 java 类中找到用于识别 switch case 的操作码。

我使用了下面的片段

```
List methods = lClassFile.getMethods();
        for (Object m : methods) {
            MethodInfo lMethodInfo = (MethodInfo) m;
            System.out.println("method name: " + lMethodInfo.getName());
            CodeAttribute ca = lMethodInfo.getCodeAttribute();
            for (CodeIterator ci = ca.iterator(); ci.hasNext();) {
                int index = ci.next();
                int op = ci.byteAt(index);

                if (op == Opcode.TABLESWITCH) {
                    int a1 = ci.s16bitAt(index + 1);
                    String fieldrefType = " " + lClassFile.getConstPool().getFieldrefType(a1);
                    String fieldName = " " + lClassFile.getConstPool().getFieldrefName(a1);
                    String fieldrefClassName = " " + lClassFile.getConstPool().getFieldrefClassName(a1);
                    System.out.println("1 -> FieldrefType = " + fieldrefType + "    field name: " + fieldName + "          FieldrefClassName name: " + fieldrefClassName);
                }
                if (op == Opcode.LOOKUPSWITCH) {
                    int a1 = ci.s16bitAt(index + 1);
                    String fieldrefType = " " + lClassFile.getConstPool().getFieldrefType(a1);
                    String fieldName = " " + lClassFile.getConstPool().getFieldrefName(a1);
                    String fieldrefClassName = " " + lClassFile.getConstPool().getFieldrefClassName(a1);
                    System.out.println("2 -> FieldrefType = " + fieldrefType + "    field name: " + fieldName + "          FieldrefClassName name: " + fieldrefClassName);
                }
            }
        } 
```

我得到的输出为：

```
method name: <init>
method name: execute
2 -> FieldrefType =  null    field name:  null          FieldrefClassName name:  null
1 -> FieldrefType =  null    field name:  null          FieldrefClassName name:  null
method name: validate
2 -> FieldrefType =  null    field name:  null          FieldrefClassName name:  null
2 -> FieldrefType =  null    field name:  null          FieldrefClassName name:  null
method name: postExecute
2 -> FieldrefType =  null    field name:  null          FieldrefClassName name:  null
2 -> FieldrefType =  null    field name:  null          FieldrefClassName name:  null 
```

无法获得开关案例值。请帮帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:25:02.420

1.  使用仅包含非常简单的 switch/case 语句的方法编写一个类
2.  编译那个类
3.  查看字节码使用`javap -c MyClass`

字节码包含`TABLESWITCH`or`LOOKUPSWITCH`并且 javassists`Opcode`类具有相应的静态字段。

# c - C中的字符串结构

> ID：14680507
> 
> 赞同：1
> 
> 时间：2013-02-04T04:47:33.120
> 
> 标签：c, string

我知道这听起来很愚蠢，等等......但我有点绝望。我是一个 C++/Objective-C/Python 人，我习惯于 String 类或 NSString 类或 Python 的甜美字符串提供的便利和整洁。但是我做的作业很少，而且我们的教授太热衷于使用 C。我对 C 字符串没有问题，但我对使用它们并不感到兴奋。

所以我想先写一个String数据结构（可能是一个包含保存字符的指针的结构）和附带的函数。但在我深入研究之前，我想知道是否有任何开源内容可用于类似的东西......如果你们可以告诉我。这将是一个很大的帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T05:15:23.063

如果你想要一个更好的 C 字符串库，也许你应该看看[The Better String Library](http://bstring.sf.net/)。它提供了一个合理的接口，与原始 C 字符串和标准 C 库函数相比有了很大改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:50:12.223

`char*`您不能将成员函数写入 C 中的结构。因此，您所能做的很可能只比+等稍好一点`strlen`。如果有的话。

如果你只想隐藏`*`，你可以这样做

```
typedef char* MyString; 
```

* * *

编辑：看看[Coping with Character Strings in C](http://www.idinews.com/string.html)看起来是在谈论完全相同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:52:45.220

我会想到简单的方法来制作它。

```
typedef struct __my_string {
    char   data[MAX_CHAR]; // or even, char *data;
} MyString; 
```

# selenium - 如何使用硒按顺序填充表单字段

> ID：14680508
> 
> 赞同：1
> 
> 时间：2013-02-04T04:47:33.870
> 
> 标签：selenium

我正在尝试使用硒按顺序填充表单字段以进行测试。我不能使用该名称，因为它们被后端分配了一个唯一的标识符（没有 id）。任何关于如何解决这个问题的想法将不胜感激。

```
<input type="text" class="abc" tabindex="1" size="5" maxlength="15" name="8886456-98245574-3353546773" value=""> 
```

表单中的多个字段使用相同的类名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:05:02.247

```
int inputTagCount=selenium.getXpathCount("//tr/td/input[@class='abc']"); 
```

上面的逻辑将为您提供在 tr 后跟 td 标记的输入标记的计数

为了找到每个单独的输入标签，在循环中运行上述定位器

```
for(int i=0;i<inputTagCount;i++}
{
     selenium.type("//tr["+i+"]/td/input[@class='abc']","test");
} 
```

这就是你在 selenium RC 中需要做的事情

# android - 带有 BalloonItemizedOverlay 的 MapView，当标记被删除时如何触发 Web 服务调用

> ID：14680510
> 
> 赞同：0
> 
> 时间：2013-02-04T04:47:42.157
> 
> 标签：android, google-maps, android-mapview

我有一个使用 BalloonItemizedOverlay 的地图视图。一切正常，但我希望能够在地图标记被删除时调用网络服务。Web 服务调用在我的 MapActivity 中。

如何从 BalloonItemizedOverlay 调用 Web 服务，这是我的拖放代码所在的位置？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:07:43.820

> 我通过使用广播接收器解决了此类问题。
> 
> 在您的 BalloonItemizedOverlay 类中声明此代码：

```
Intent intent = new Intent();
intent.setAction("BalloonItemizedOverlay");
con.sendBroadcast(intent); 
```

> 并在 MapActivity 中执行此操作。onCreate()::

```
{
IntentFilter filter = new IntentFilter("BalloonItemizedOverlay");
registerReceiver(myReceiver, filter);
}

private BroadcastReceiver myReceiver = new BroadcastReceiver()
{
@Override
public void onReceive(Context context, Intent intent) {
//call your service method from here...
}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:18:09.493

这是在 tap.hop 上拖放和弹出的代码，它对您很有用。

```
@Override
            protected boolean onTap(final int index) {
                  if ( isPinch ){
                        return false;
                  }else{
    //          getMapView().setOnTouchListener(new OnTouchListener() {
    //              @Override
    //              public boolean onTouch(View arg0, MotionEvent arg1) {
    //                  if (!items.isEmpty()) {
    //                      if (view != null) {
    //                          view.setVisibility(View.GONE);
    //                          getMapView().invalidate();
    //                      }
    //                  }
    //                  getMapView().invalidate();
    //                  return true;
    //              }
    //          });
                if (view != null) {
                    view.setVisibility(View.GONE);
                    getMapView().removeView(view);
                    getMapView().invalidate();
                    flag = false;
                    view = null;
                }
                view = getLayoutInflater().inflate(R.layout.balloon_overlay, null);
                LinearLayout layout = (LinearLayout) view
                        .findViewById(R.id.balloon_main_layout);
                layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));
                view.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));
                view.setBackgroundResource(R.drawable.balloon_overlay_bg_selector);
                ImageView image = (ImageView) view
                        .findViewById(R.id.balloon_disclosure);
                TextView text = (TextView) view
                        .findViewById(R.id.balloon_item_title);
                text.setText(items.get(index).getTitle());

                if (items.get(index).getTitle() != null
                        && items.get(index).getTitle().equals("Me") == false) {
                    image.setImageResource(R.drawable.mekr);
                }

                Projection projection = getMapView().getProjection();
                Point point = new Point();
                projection.toPixels(items.get(index).getPoint(), point);

                int x = (int) (view.getWidth() / 2f);
                int y = -bitMap.getHeight() - 3;

                MapView.LayoutParams lp = new MapView.LayoutParams(
                        ViewGroup.LayoutParams.WRAP_CONTENT,
                        ViewGroup.LayoutParams.WRAP_CONTENT, items.get(index)
                                .getPoint(), x, y,
                        MapView.LayoutParams.BOTTOM_CENTER);
                        getMapView().removeView(view);
                        getMapView().invalidate();
                        getMapView().addView(view, lp);
                        getMapView().invalidate();

                    view.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View view) {
                            if (!items.isEmpty()) {
                                if (view != null) {
                                    view.setVisibility(View.GONE);
                                    getMapView().invalidate();
                                }
                            }
                            getMapView().invalidate();
                        }
                    });
                        selectedIndex = index;
                        return true;           
              }
            }

            @Override
            public boolean onTouchEvent(MotionEvent event, MapView mapView) {
                final int action = event.getAction();
                final int x = (int) event.getX();
                final int y = (int) event.getY();
                boolean result = false;

                if (action == MotionEvent.ACTION_DOWN) {
                    for (OverlayItem item : items) {
                        Point p = new Point(0, 0);

                        map.getProjection().toPixels(item.getPoint(), p);

                        if (hitTest(item, marker, x - p.x, y - p.y)) {
                            result = true;
                            inDrag = item;
                            items.remove(inDrag);
                            populate();

                            xDragTouchOffset = 0;
                            yDragTouchOffset = 0;

                            setDragImagePosition(p.x, p.y);
                            dragImage.setVisibility(View.VISIBLE);

                            xDragTouchOffset = x - p.x;
                            yDragTouchOffset = y - p.y;
                            isPinch=false;
                            break;
                        }
                    }
                } else if (action == MotionEvent.ACTION_MOVE && inDrag != null) {

                    if (view != null) {
                        if (view.getVisibility() != 0) {
                            Log.e("touch", " out move");
                            setDragImagePosition(x, y);
                            result = true;
                            isPinch=true;
                        }else{
                            setDragImagePosition(x, y);
                            isPinch=false;
                        }
                    }else{
                        setDragImagePosition(x, y);
                        result = true;
                        isPinch=true;
                    }
                } else if (action == MotionEvent.ACTION_UP && inDrag != null) {
                    dragImage.setVisibility(View.GONE);

                    GeoPoint pt = map.getProjection().fromPixels(
                            x - xDragTouchOffset, y - yDragTouchOffset);
                    OverlayItem toDrop = new OverlayItem(pt, inDrag.getTitle(),
                            inDrag.getSnippet());

                    Log.e("touch", " out last" + pt.getLatitudeE6());
                    items.add(toDrop);
                    populate();
                    inDrag = null;
                    result = true;
                    isPinch = false;
                }
                    return (isPinch || super.onTouchEvent(event,mapView));
            }

            private void setDragImagePosition(int x, int y) {
                RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) dragImage
                        .getLayoutParams();

                lp.setMargins(x - xDragImageOffset - xDragTouchOffset, y
                        - yDragImageOffset - yDragTouchOffset, 0, 0);
                dragImage.setLayoutParams(lp);
            }
        } 
```

在 ontouch 事件中，您可以在标记被删除时触发 Web 服务。

# php - 将重复的 smarty 部分合并为 1

> ID：14680514
> 
> 赞同：0
> 
> 时间：2013-02-04T04:48:01.660
> 
> 标签：php, smarty

我无法更改传递给 Smarty 的数组，尽管目前我有：

```
{if $cms.featured && $cms.featured.haspictures}
{foreach from=$cms.featured.pictures key=id item=row name=foo}
{if $id eq 0}
<div class="sliderkit-panel">
    <a href="{$cms.featured.url}" title="{$cms.featured.title|truncate:60}"><img src="{$HOME}/get/wide{$row.filename}" alt="{if $row.description}{$row.description}{else}{$cms.featured.title}{/if}" /></a>
</div>
{/if}
{/foreach}
{/if}

{if $cms.featured1 && $cms.featured1.haspictures}
{foreach from=$cms.featured1.pictures key=id item=row name=foo}
{if $id eq 0}
<div class="sliderkit-panel">
    <a href="{$cms.featured1.url}" title="{$cms.featured1.title|truncate:60}"><img src="{$HOME}/get/wide{$row.filename}" alt="{if $row.description}{$row.description}{else}{$cms.featured1.title}{/if}" /></a>
</div>
{/if}
{/foreach}
{/if}

{if $cms.featured2 && $cms.featured2.haspictures}
{foreach from=$cms.featured2.pictures key=id item=row name=foo}
{if $id eq 0}
<div class="sliderkit-panel">
    <a href="{$cms.featured2.url}" title="{$cms.featured2.title|truncate:60}"><img src="{$HOME}/get/wide{$row.filename}" alt="{if $row.description}{$row.description}{else}{$cms.featured2.title}{/if}" /></a>
</div>
{/if}
{/foreach}
{/if} 
```

无论如何我可以减少这个重复的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:09:55.787

尝试将重复的函数包含在 {for} 循环中并使用变量作为数组索引，例如

```
{for $loop=1 to 3}
  {$featured='featured'}
  {if $loop!=1}{$featured=$featured|cat:$loop}{/if}

  {if $cms.$featured && $cms.$featured.haspictures}
  ....

{/for} 
```

# reference - VS 2012 在引用时从框架中获取 System.Net.Http.dll 而不是 NuGet 版本？

> ID：14680516
> 
> 赞同：1
> 
> 时间：2013-02-04T04:48:20.447
> 
> 标签：reference, visual-studio-2012, assemblies, asp.net-web-api

我在 Visual Studio 2012 Windows 7 桌面应用程序中使用 Microsoft ASP.NET Web API。我于 2013 年 1 月 25 日从 Nuget 下载了它们。

我在项目中手动引用 DLL，但是在添加对两个文件的引用时：System.Net.Http.dll 和 System.Net.Http.WebRequest.dll，Visual Studio 似乎覆盖了它并从文件夹 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\System.Net.Http.dll 而不是我指定的文件夹 C:\MyFolder\System.Net.Http.dll ？

我知道这一点是因为我在“属性”页面中查看文件的路径。所有其他文件工作正常。这让我很困扰，因为它们的文件大小完全不同，等等。

为什么会这样？

作为一种解决方法，我想我可以将“复制本地”属性设置为“真”（看起来文件随后从 .NET 4.5 Framework 文件夹复制到我的可执行文件的输出文件夹中），然后我可以手动复制- 用 nuget 的新的替换它们，但这似乎很冗长，仍然让我不明白为什么我需要这样做？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:19:18.983

程序集`System.Net.Http`（和其他一些程序集）是强命名的，这意味着 VS 将始终从 GAC 加载它，只要它与引用具有相同的版本号。

您可以在此处阅读有关绑定过程的更多信息：http: [//msdn.microsoft.com/en-us/library/yx7xezcf.aspx](http://msdn.microsoft.com/en-us/library/yx7xezcf.aspx)

# android - 附加数据库 SQLCIPHER

> ID：14680517
> 
> 赞同：0
> 
> 时间：2013-02-04T04:48:25.273
> 
> 标签：android, sqlcipher

我想知道在 SQLcipher 中使用此代码是必需的。（在 android 中使用）

如果需要，我很困惑应该在何时何地使用它。

我想加密我的 sqlite 数据库。

```
ATTACH DATABASE 'encrypted.db' AS encrypted KEY 'secret'; -- create a new encrypted database
CREATE TABLE encrypted.t1(a,b); -- recreate the schema in the new database (you can inspect all objects using SELECT * FROM sqlite_master)
INSERT INTO encrypted.t1 SELECT * FROM t1; -- copy data from the existing tables to the new tables in the encrypted database
DETACH DATABASE encrypted; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:00:49.097

您在下面发布的示例代码允许您附加数据库并将单个表复制到现有数据库中。如果您打算将模式和内容从一个数据库复制到另一个数据库，建议使用便捷功能`sqlcipher_export`。您可以[在此处](http://sqlcipher.net/sqlcipher-api/#sqlcipher_export)通过示例了解更多信息。

# asp.net - XSD 格式的同步 Web 服务 asp.net 响应和请求

> ID：14680521
> 
> 赞同：0
> 
> 时间：2013-02-04T04:48:49.883
> 
> 标签：asp.net, web-services, xsd

我的客户为我提供了 2 个 XSD 文件，一个用于请求，另一个用于响应，在他提供的示例 WSDl 中，导入命名空间，例如，

```
 <xsd:schema>
<xsd:import namespace="http://xsd.ge.com/testService/Rq" schemaLocation="testRq.xsd"/><xsd:import namespace="http://xsd.ge.com/testService/Rs" schemaLocation="testRs.xsd"/>
  </xsd:schema> 
```

我的客户想要使用同步 Web 服务以 xsd 格式响应和请求，我是 Web 服务的新手。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:35:09.607

您可以从响应 XML 生成 XSD。

请参阅：[XML 架构定义工具 (Xsd.exe)](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx)

# android - 将数据发送到其他活动并显示一些额外的 TextViews

> ID：14680525
> 
> 赞同：0
> 
> 时间：2013-02-04T04:49:17.373
> 
> 标签：android, android-intent

我有一个 Android 应用程序，我在其中将数据从一个活动发送到另一个活动。我可以轻松完成这部分，但问题是我还想显示一些额外的 TextView。因此，当我使用显示发送的数据时，`setContentView`我只能看到发送的数据。我看不到额外的 TextViews。我希望它们同时显示。

我搜索并努力寻找没有任何运气的解决方案。我附上代码以供参考。谢谢！

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_crop_information);
    Intent intent = getIntent();
    String message = intent.getStringExtra(CropsListActivity.EXTRA_MESSAGE);
    TextView textViewci= new TextView(this);
    textViewci.setText(message);
    TextView textView1= new TextView(this);
    TextView textView2= new TextView(this);
    textView1.setText("Major Districts");
    textView2.setText("Suitable Soil"); 
```

当我使用此代码时，我什么都看不到，活动保持空白。实际上我在`TableLayout`这里使用的是，以便我可以以表格的形式显示数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:52:52.470

您必须在布局上添加文本视图。

```
View linearLayout =  findViewById(R.id.info);
//LinearLayout layout = (LinearLayout) findViewById(R.id.info);

TextView valueTV = new TextView(this);
valueTV.setText("hallo hallo");
valueTV.setId(5);
valueTV.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));

((LinearLayout) linearLayout).addView(valueTV); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T04:57:23.743

您必须在父视图中添加文本视图。例如，如果您在线性布局中使用了文本视图，则在线性布局中添加文本视图，然后使用 addview(linearlayout)。

下面是例子

```
RelativeLayout layout = new RelativeLayout(this);
TextView tv1 = new TextView(this);
tv1.setText("A");
tv1.setId(23);

TextView tv2 = new TextView(this);
tv2.setText("B");
RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.FILL_PARENT);
lp.addRule(RelativeLayout.RIGHT_OF, tv1.getId());

layout.addView(tv1);       
layout.addView(tv2, lp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T05:54:01.253

您收到任何错误消息吗？如果是，请在此处发布。其他的都是对的。你需要将你的视图添加到父布局中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T10:07:53.797

我自己找到了答案。这很容易，这里不需要在父布局中使用视图。我修改了我的 xml 文件中的 textViews 并使用它们获取了它们的值`findViewById`。我正在附加更新的代码。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_crop_information);
    Intent intent = getIntent();
    String message = intent.getStringExtra(CropsListActivity.EXTRA_MESSAGE);
    textView=(TextView)findViewById(R.id.textViewci);
    textView1=(TextView)findViewById(R.id.textViewmd);
    textView2=(TextView)findViewById(R.id.textViewso);
    textView.setText(message);
    textView1.setText("Major Districts");
    textView2.setText("Suitable Soil");
    tf = Typeface.createFromAsset(getAssets(), "fonts/SHRUTIB.TTF");
    textView.setTypeface(tf);
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T05:59:30.763

```
I have just make a test program for you. first class code

 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        Intent intent = new Intent(MainActivity.this, SecondClass.class);
        intent.putExtra("firstValue", "1");
        intent.putExtra("secondValue", "2");
        startActivity(intent);

        }
    });

Second class code :

setContentView(R.layout.activity_crop_information);
        Intent intent = getIntent();
        String message1 = intent.getStringExtra("firstValue");
        String message2 = intent.getStringExtra("secondValue");

        RelativeLayout layout = new RelativeLayout(this);
        TextView textView1= new TextView(this);
        TextView textView2= new TextView(this);

        TextView textViewci= new TextView(this);
        textViewci.setText(message1+""+message2);
        Log.e("intent value is", ""+message1+""+message2);

        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.FILL_PARENT);
        lp.addRule(RelativeLayout.RIGHT_OF, textView1.getId());

        textView1.setText("Major Districts");
        textView2.setText("Suitable Soil");

        layout.addView(textView1);
        layout.addView(textView2);
        addContentView(layout, lp);

Try and let me know. YOu have to make related layouts for both classes.
Hope this will help 
```

# dns - gwan：带下划线的虚拟主机不起作用

> ID：14680529
> 
> 赞同：0
> 
> 时间：2013-02-04T04:49:44.037
> 
> 标签：dns, webserver, vhosts, g-wan

谁能解释或有相同经验的以下 gwan 行为：
只要 vhost 的名称带有下划线字符，
就无法访​​问。gwan 将跳转以显示根主机。
我正在使用 ubuntu 12.04 并始终保持更新。
gwan 版本是 4.1.25。
CPU是P9300。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:04:23.993

坦率地说，我对`gwan`. 但是，一般来说，DNS 仅支持字母数字字符（可能有`-`，但仅在名称中间）。

请注意，下划线不在允许的 DNS 字符列表中。许多 Windows 主机的主机名中都有下划线，有时带有此类主机的 IIS 服务器甚至可以工作，但不支持配置。

我认为这`gwan`知道这一点并且不接受这样的名称作为有效名称，跳转到您的默认根主机作为备份。

正确的解决方案是不要在任何 DNS 名称中使用下划线。您可以将其替换为`-`（减号）。

# javascript - 在背景颜色功能下添加背景图像

> ID：14680532
> 
> 赞同：0
> 
> 时间：2013-02-04T04:50:10.267
> 
> 标签：javascript, html, css, image, background

我在我的交互式宠物上运行了三个功能（更改背景、调光灯、鼠标跟随）。我正在尝试将图像添加到身体的背景，但每次我尝试它都会被推到顶部并且脏/干净的水箱功能不起作用。有人能告诉我如何更改下面第一个函数的颜色部分以在图像而不是颜色代码之间切换吗？我认为这将解决眼前的问题。：/

CSS 代码：

```
//change background color: dirty/clean tank
setTimeout(function dirty() { //sets background color to murky green
document.body.style.backgroundColor = ****"#CCCC99";** //would like this to be an image**
var btn = document.body.appendChild(document.createElement('button'));
btn.appendChild(document.createTextNode("Clean the tank!"));
    document.body.style.marginTop = "-1000px";

btn.onclick = function clean() {
    btn.parentNode.removeChild(btn);
    document.body.style.backgroundColor = **"#CCFFFF";//would like this to be an image**
    setTimeout(dirty,27000); //how long it takes to make the tank dirty
};
},500); //first loading of clear blue timeout

//dim the lights
 var dimmed = 0;
function toggleLights()
{ 
var dimmer = document.getElementById("dimmer");
if(dimmed == 0) dimmed = 1;
else dimmed = 0;

if(dimmed == 1)
{
    dimmer.style.opacity = 0.8;
    dimmer.style.visibility = "visible";
}

if(dimmed == 0)
{
    dimmer.style.opacity = 0.0;
    dimmer.style.visibility = "hidden";
}
}

//fish moves on mouse hover
$(document).ready(function() {  
$("#swim").mousemove(function (event) {
var fish = $("#fish1");
var position = fish.position();
var mousey = event.pageX;

if (position.left > mousey) {
    $("#fish1").html("<img src='images/happy.png' />");
} else {
    $("#fish1").html("<img src='images/happyback.png'/>");
}

$("#fish1").stop().animate({
    left: event.pageX,
    top: event.pageY
}, 300);
});
}); 
```

HTML 代码：

```
<HTML>
<HEAD>
<TITLE>Untitled</TITLE>

<link href="style.css" rel="stylesheet" type="text/css" />  

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"
</script>
<script type="text/javascript" src="pet.js"></script>  
<script type="text/javascript" src="core.js"></script> 

 </HEAD>

<div id="table">
<div id="dimmer" onClick="toggleLights()"></div>
<a href="javascript:toggleLights();"><img src="images/table-lamp.png" height="380px" 
alt="table lamp"></a>
</div>

<div id="swim">
<div id="fish1"><img src="images/happy.png"/></div>
</div> 

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:57:03.537

在您的 HTML 中添加一个起始`<body>`标记，并使用 javascript 更改元素类，而不是样式属性。这样您就可以通过 CSS 文件更好地控制样式。

所以你会做这样的事情：

```
document.body.className = 'state1'; 
```

在你的 CSS

```
.state1{
   background-image: url(the/image.jpg);
} 
```

等等...

# iphone - NavigationItem leftBarButtom 隐藏的项目不起作用？

> ID：14680534
> 
> 赞同：0
> 
> 时间：2013-02-04T04:50:28.463
> 
> 标签：iphone, objective-c, uinavigationbar

我在导航栏上显示股票视图。不想显示后退按钮。为了隐藏后退按钮，我编写了以下代码：

```
 -(void)viewWillAppear:(BOOL)animated
{
    self.navigationController.navigationBar.hidden=false;
    self.navigationController.navigationItem.leftBarButtonItem.tintColor=[UIColor clearColor];
    self.navigationController.navigationItem.hidesBackButton=true;
} 
```

在每个实现文件中。

并在应用程序委托 didFinishLaunching 方法中应用代码如下。

```
self.navController.navigationItem.hidesBackButton=YES;
[self.navController.navigationBar addSubview:[Constant BSE_Ticker]];
[self.navController.navigationBar addSubview:[Constant NSE_Ticker]]; 
```

但后退按钮没有隐藏。显示下面的屏幕截图

![后退按钮的屏幕截图未隐藏](../Images/bc61b5152ebb9f4803176a9fe96d0cc0.png)

谢谢！我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T04:54:02.750

尝试以下操作：

```
self.navigationItem.hidesBackButton = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:54:48.153

尝试这个：

```
[self.navigationItem setHidesBackButton:YES animated:YES]; 
```

# bash - shell bash 获取文件路径并放入子目录

> ID：14680537
> 
> 赞同：0
> 
> 时间：2013-02-04T04:50:44.487
> 
> 标签：bash, shell

我在每一行都有一个长字符串，像一行一样，

**1000 AS34_59329 RICwdsRSYHSD11-2-IPAAPEK-93 /ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz /ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/ 111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz /ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/clean_111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz.total.info 11.824 0.981393 43.8283 95.7401 OK**

此行包含三个文件位置（粗体部分），我需要将这些文件 scp 到另一个位置，例如 /sample 。并创建子目录来放置文件，例如将这一行文件放入 AS34_59329 中。所以需要创建 /sample/AS34_59329 可能很多行的子目录名称相同，所以需要判断子目录是否已经创建。如何自动创建子目录？

```
 #! /bin/bash
 while read myline  
 do  
   for i in $myline
      do 
     if [ -f $i]; then
    scp -r $i xxxx@192.168.174.33:/sample
     fi
      done
 done < data.list 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:00:13.280

看起来您有 ssh 密钥，所以如果您使用 ssh，那么远程命令将为您工作

```
 if [ -f $i]; then
     ssh xxxx@192.168.174.33 '[ -d /sample ]  && echo "OK" || mkdir /sample'
     scp -r $i xxxx@192.168.174.33:/sample
 fi 
```

这仅在您有权在远程框上创建 /sample 时才有效。

# node.js - 如何使套接字成为流？在 imagemagick 之后将 https 响应连接到 S3

> ID：14680543
> 
> 赞同：4
> 
> 时间：2013-02-04T04:51:13.523
> 
> 标签：node.js, express, amazon-s3, stream, knox-amazon-s3-client

我一般是节点和编程，我一直在努力解决这个问题......

我想接受 https 响应，使用 graphicsmagick 调整大小并将其发送到我的亚马逊 S3 存储桶。

看来 https res 是一个 IncomingMessage 对象（我找不到任何关于它的信息），而 graphicsmagick 的标准输出是一个套接字。

奇怪的是，我可以使用管道并将它们发送到具有本地路径的 writeStream，并且 res 和 stdout 都创建了一个很好的新调整大小的图像。

我什至可以将 res 发送到 S3（使用 knox）并且它可以工作。

但标准输出不想去 S3 :-/

任何帮助，将不胜感激！

```
https.get(JSON.parse(queryResponse).data.url,function(res){

    var headers = {
        'Content-Length': res.headers['content-length']
        , 'Content-Type': res.headers['content-type']
    }

    graphicsmagick(res)
      .resize('50','50')
      .stream(function (err, stdout, stderr) {

        req = S3Client.putStream(stdout,'new_resized.jpg', headers, function(err, res){
        })
        req.end()
    })

}) 
```

knox - 用于连接到 S3 - [https://github.com/LearnBoost/knox](https://github.com/LearnBoost/knox) graphicsmagick - 用于图像处理 - [https://github.com/aheckmann/gm](https://github.com/aheckmann/gm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:37:55.230

问题在于亚马逊需要事先知道内容长度（感谢 DarkGlass）

但是，由于我的图像相对较小，我发现缓冲优先于 MultiPartUpload。

我的解决方案：

```
https.get(JSON.parse(queryResponse).data.url,function(res){

    graphicsmagick(res)
      .resize('50','50')
      .stream(function (err, stdout, stderr) {

        ws. = fs.createWriteStream(output)

        i = []

        stdout.on('data',function(data){
          i.push(data)
        })

        stdout.on('close',function(){
          var image = Buffer.concat(i)

          var req = S3Client.put("new-file-name",{
             'Content-Length' : image.length
            ,'Content-Type' : res.headers['content-type']
          })

          req.on('response',function(res){  //prepare 'response' callback from S3
            if (200 == res.statusCode)
              console.log('it worked')
          })
          req.end(image)  //send the content of the file and an end
        })
    })
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T17:25:57.277

您似乎是从原始图像设置 Content-Length 而不是调整大小的图像

也许这有帮助

[获取流的内容长度](https://stackoverflow.com/questions/9240724/get-a-streams-content-length?rq=1)

[https://npmjs.org/package/knox-mpu](https://npmjs.org/package/knox-mpu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:25:48.630

你不应该在`req.end()`那里做。通过这样做，您将在 S3 有时间发送图像数据之前关闭流。`end`发送完所有图像数据后，它会自动自动执行。

# mysql - 触发器和光标之间有什么区别？

> ID：14680551
> 
> 赞同：-4
> 
> 时间：2013-02-04T04:51:55.943
> 
> 标签：mysql, sql, sql-server, oracle

我是 Sql 新手........我不知道 Diff

所以请建议我

**“触发器**”和“**光标**”的区别

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T05:10:05.313

简单，`TRIGGER`是桌子上的一个特殊代码块，当事件发生时触发`INSERT`，`UPDATE`和/或`DELETE`在桌子上发生。

`CURSOR`数据库中用于遍历数据库记录的控制结构。它与许多编程语言提供的迭代器（*例如 FOR LOOP* ）非常相似。

# ios - MFmailComposer 错误

> ID：14680553
> 
> 赞同：2
> 
> 时间：2013-02-04T04:52:00.333
> 
> 标签：ios, objective-c, xcode4.5, mfmailcomposeviewcontroller, ios6.1

我想提前道歉，因为我对编程还很陌生，所以如果我不够具体，我很抱歉，但无论如何我会尽力解释我的问题，我正在创建一个需要为了能够发送电子邮件，我到处寻找，尝试了我能找到的每个示例代码，但每次使用代码时似乎都没有任何效果，我收到以下错误：

> 2013-02-03 20:23:39.372 音 [16409:c07] 警告：尝试在

谁的视图不在窗口层次结构中！

这是我当前在**viewcontroller.h**文件中使用的代码：

```
UIViewController <MFMailComposeViewControllerDelegate>
- (IBAction)Mail:(id)sender; 
```

这是在我的**viewcontroller.m**文件中：

```
- (IBAction)Mail:(id)sender {
if ([MFMailComposeViewController canSendMail]) {
    MFMailComposeViewController *mail = [[MFMailComposeViewController alloc] init];

    mail.mailComposeDelegate = self;

    [mail setSubject:@"Subject"];

    NSArray *recipient = [NSArray arrayWithObjects:@"mail@example.com", nil];
    [mail setToRecipients:recipient]; 

    NSString *body = @"body!";
    [mail setMessageBody:body isHTML:NO];

    [self presentModalViewController:mail animated:YES];
}
}
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
[self dismissModalViewControllerAnimated:YES];
} 
```

我还收到一条消息，说 self`presentModalViewController`和 self`dismissModalViewController`在 IOS 6 中已弃用，这是否意味着我不能使用它或者我做错了什么？

因此，如果我对邮件作曲家做错了任何帮助，我将不胜感激，如果我不够具体，我再次抱歉，提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:11:48.517

```
[self presentModalViewController:mail animated:YES]; 
```

可以替换为

```
[self presentViewController:mail animated:YES completion:nil]; 
```

和

```
[self dismissModalViewControllerAnimated:YES]; 
```

经过

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:59:34.067

您可以使用 presentModalViewController:animated: 来显示模态视图控制器，但现在建议使用新的：presentViewController:animated:completion:。新的 on 拥有一个完成处理程序，您可以更好地控制代码。注意新方法需要 iOS 5.0 以上版本。如果你的目标是iOS5.0以上，你应该使用新的方法。与dismissModalViewControllerAnimated: 相同，请改用dismissViewControllerAnimated:completion:。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:02:40.937

警告“警告：尝试显示不在窗口层次结构中的视图！” 表明视图未在 Interface Builder 中或以编程方式连接。

Xcode 检查您在项目设置中使用的 API 会导致弃用警告。如果您将 Xcode 项目的 Build Settings 的 IOS 部署目标设置为 iOS 6，那么任何被 Apple 标记为已弃用的 API（例如 presentModalViewController 和dismissModalViewController）都将被标记。

而是分别使用presentViewController:animated:completion: 和dismissViewControllerAnimated:completion:。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:53:08.430

嗨，您可以检查 MFMailComposerViewController 类是否存在。-(void)email{Class emailClass=(NSClassFromString(@"MFMailComposeViewController"));if emailClass!=nil)if ([emailClass canSendMail]{[self displayComposePage]; }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T06:03:55.933

就像 Sudha 所说，`[self presentViewController:mail animated:YES/NO completion:nil];` 从 From`iOS6`开始使用，`presentModalViewController`并且`dismissModalViewController`已被弃用，它们与完成一起使用，这对于您的情况将是 nil 。

# php - json_decode 返回 json 数据

> ID：14680554
> 
> 赞同：1
> 
> 时间：2013-02-04T04:52:08.710
> 
> 标签：php, web-services

我只是发布像这样的单个数据值'{'email':'whatever@yahoo.com'}'

.php 文件

```
$var = json_decode($_POST,true);
echo json_encode($var["email"]); 
```

在这个阶段，我只想返回电子邮件地址以使其正常工作，但它给了我这个错误：

*json_decode() 期望参数 1 是字符串，数组在第4*行的 C:\wamp\www\buyme\include\getemailaddress.php 中给出

 *第 4 行是我的代码中的第一行

我想要做的就是访问电子邮件值并将其返回 json_encode($var["email"])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:54:42.263

如果我正确理解了您并且您发布了一个 json 字符串，您可以执行以下操作：

```
$requestBody = @file_get_contents('php://input');
$var = json_decode($requestBody, true);
echo json_encode($var['email']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:14:22.097

正如您在 PHP 手册[$_POST](http://php.net/manual/en/reserved.variables.post.php)中所读到的， $_POST 包含关联数组中的值。就像在 manaul 中一样，它是：

```
An associative array of variables passed to the current script via the HTTP POST method. 
```

因此，如果您在任何变量中从客户端发送任何 json 字符串，请使用该变量来读取该 json 字符串，如下所示。

```
$var = json_decode($_POST['emaildata'],true);
echo json_encode($var["email"]); 
```

请检查，如果它适合你..*

# php - How to get strtotime() with written time format?

> ID：14680556
> 
> 赞同：0
> 
> 时间：2013-02-04T04:52:27.903
> 
> 标签：php, timestamp, strtotime

I need to input, `09 hours 20 minutes` to strtotime and to get the corresponding timestamp. I tried out, `strtotime("09 hours 20 minutes",0)` but it gives me time passed in seconds in current day only. ie `33600`.

I need to get the exact timestamp. ie time passed in seconds from `1-1-1970` to current day `09:20`. Is there anyway? Any help will be appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:22:24.967

Like Wong said in the first comment: use "today" as offset

```
strtotime("09 hours 20 minutes", strtotime("today")); 
```

# opengl - 在同一位置渲染纹理，其中一个作为部分蒙版

> ID：14680557
> 
> 赞同：2
> 
> 时间：2013-02-04T04:52:33.317
> 
> 标签：opengl

使用 OpenGL，有没有办法在同一位置渲染两个纹理并将它们与 alpha 混合混合在一起，以便一个出现在另一个之上？我正在努力做到这一点，以便我的背景纹理可以在次要纹理上是动态的，将有一个“窗口”，它将显示“后面”的纹理。我做了很多研究，并尝试了 glDepthFunc、glBlendFunc 等的几种组合，但没有找到任何有效的组合。我猜这是可能的，但还没有找到诀窍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:00:58.087

已经有一段时间了，但我想帮助一些人？

首先你必须启用 GL_BLEND

```
glEnable(GL_BLEND); 
```

然后我通常必须遵循

```
glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA); 
```

但我通常使用delphi，所以不确定这对你有多大帮助..

# ruby - 如何在 Ruby 1.8.7 中转到特定的行或条件？

> ID：14680561
> 
> 赞同：1
> 
> 时间：2013-02-04T04:52:43.377
> 
> 标签：ruby

我想要使​​用 Ruby (RoR) 的以下情况的代码：

```
 line no: 09
line no: 10         if(@yyyyy == nil)
line no: 11            do some operation here
line no: 12             then goto line no 10
line no: 13         end
l 
```

我尝试使用`next`, `break`, & `goto`，但没有任何效果。

是否有任何关键字/语句来满足我的场景？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T05:13:32.817

Ruby 默认不支持它，如果您将代码提交到[http://codereview.stackoverflow.com](http://codereview.stackoverflow.com)，我相信他们会帮助您重写/重构代码。

您可能可以使用该`redo`命令来模拟您想要的。“编程 Ruby” 说：

> redo 从开始重复循环的当前迭代，但不重新评估条件或获取下一个元素（在迭代器中）。

也就是说，“[笑话在我们身上：Ruby 1.9 如何支持 Goto 语句](http://patshaughnessy.net/2012/2/29/the-joke-is-on-us-how-ruby-1-9-supports-the-goto-statement)”将让您深入了解在 Ruby 中实际使用“goto”，但是，此时，您的代码将无法移植或在“库存”中使用“鲁比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:34:46.303

请检查以下网址：

> [http://patshaughnessy.net/2012/2/29/the-joke-is-on-us-how-ruby-1-9-supports-the-goto-statement](http://patshaughnessy.net/2012/2/29/the-joke-is-on-us-how-ruby-1-9-supports-the-goto-statement)

根据许多专业程序员的说法，使用 goto 语句是一种不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:28:43.303

```
catch :foo do
  for (aaa in @xxxxx)
    if(@xxxxx == nil)
      do some operation here
      throw :foo
    end
    for (bbb in @yyyyy)
      if(@yyyyy == nil)
        do some operation here
        throw :foo
      end
    end
    for (ccc in @zzzzz)
      if(@zzzzz == nil)
        do some operation here
        throw :foo
      end
    end
  end
end 
```

# paypal - 实时环境中的 Paypal 自适应支付实施

> ID：14680565
> 
> 赞同：1
> 
> 时间：2013-02-04T04:52:47.403
> 
> 标签：paypal, paypal-adaptive-payments

我们已经实施了自适应支付方式。此实现在`sandbox`环境上运行良好。`Live`但它在环境中显示以下响应。我们不清楚回应。请提供有关此回复的详细信息。

回复：

```
{
Array
(["en" class
[send_method] => domestic;icon-uri
[content_ID] => marketing_us/request_money;icon-uri
[amp;from] => PayPal">Sign Up
2" width [label] => xuVFCJezswQQmbe91QM [guid] => ON [script] => 0"/>
escalateTab">Contact
[ ($("#mobile_number").val() !] => ''))
    { 
        validPhoneNumber 
        [page] => main%3Amktg%3Apersonal%3A%3Ahome%3A%3A%3A 
        [tmpl] => core2HomeCExp.jsp
        [pgst] => Unknown 
        [lgin] => out 
        [calc] => f91c2b0c39598 
        [rsta] => en_US 
        [md5h] => 7fbf0dfca87f30b51dc1d9cb8dae4318 
        [shfp] => %7C%7C 
        [usce] => + [pgtf] => Sparta [s] => ci [aver] => unverified [rstr] => unrestricted [pfid] => f91c2b0c39598 
        [bzsr] => main [bchn] => mktg [pgsf] => personal [ccpg] => usa [pgld] => Unknown [shir] => main_mktg_personal_" alt [pgrp] => main%3Amktg%3Apersonal%3A%3Ahome )
} 
```

# mysql - mysql sql查询中日期的逻辑

> ID：14680569
> 
> 赞同：0
> 
> 时间：2013-02-04T04:53:06.167
> 
> 标签：mysql, sql, datetime

嗨，我对每天凌晨 12:00 运行的 cron 作业的 mysql 查询中的日期逻辑感到完全困惑

我正在一个汽车列表网站上工作，其中汽车列表的有效期为 mysql 日期时间格式。

所有过期的列表将在过期日期后 7 天后从网站上删除

当 cron 作业将运行时，它会执行以下操作

任务 1 - 向用户发送电子邮件警报，告诉他们他们的列表已过期。

因此，我需要选择自上次运行 cron 作业以来已过期的所有列表，并且不包括在此之前的列表，以便每个列表仅发送一次过期警报电子邮件。

我尝试执行此任务的 sql 查询（再次与此混淆）

```
SELECT car_id FROM cars WHERE expiry_date > DATE_SUB(NOW(), INTERVAL 1 DAY) AND expiry_date < NOW() 
```

任务 2 - 将向用户发送电子邮件警报，告诉他们列表将在 24 小时后被永久删除。

因此，我需要选择所有将在超过 24 小时 / 6 天后删除的列表，因为它们已过期，我需要确保它们至少有 24 小时的时间来更新它们。我还需要以这样一种方式选择/构建 sql 查询，即只选择那些将在 1 天内到期而不是其他的列表，以避免多次电子邮件警报而不是一次电子邮件警报

我为此任务尝试了以下 sql 查询（我完全对这个查询感到困惑）

```
SELECT car_id FROM cars WHERE expiry_date > DATE_SUB(NOW(), INTERVAL 7 DAY) AND expiry_date < DATE_SUB(NOW(), INTERVAL 1 DAY) 
```

任务 3 - 删除所有过期超过 7 天的列表

我为此任务尝试了以下 sql 查询

```
SELECT car_id FROM cars WHERE expiry_date < DATE_SUB(NOW(), INTERVAL 7 DAY) 
```

请帮助我完善所有 3 个查询，以便 cron 完全按照我的意愿工作。另外请告诉我它必须>=（大于或等于）或<=（小于或等于）

这是 sqlfiddle 表结构和几条记录（尽管它们尚未过期）

[http://sqlfiddle.com/#!2/cfcdf](http://sqlfiddle.com/#!2/cfcdf)

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:16:23.463

查看这些查询

```
select * from cars where datediff(EXPIRY_DATE,now())=-1;

select * from cars where 
datediff(DATE_ADD(EXPIRY_DATE, interval 24 hour),now())>=1 and
datediff(DATE_ADD(EXPIRY_DATE, interval 24 hour),now()) <=2;

select * from cars where datediff(expiry_date,now())<=-7; 
```

操作他们正在根据您的需要工作。

小提琴 [http://sqlfiddle.com/#!2/785ea/5](http://sqlfiddle.com/#!2/785ea/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:17:57.523

这是你想要的？请尝试添加另一列以查看两者之间的差异`expiry_date`，`current date time`以便您更好地了解您正在处理的日期。[请查看 MYSQL 中的一些日期函数。](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/cfcdf/27)

```
-- 3rd query expiry dates older than 7 days from 
-- today

SELECT car_id, expiry_Date, 
DATE_sub(NOW(), INTERVAL 7 DAY)
FROM cars 
WHERE expiry_date <= 
DATE_sub(NOW(), INTERVAL 7 DAY)
;

-- same

SELECT car_id, expiry_Date, 
DATE_ADD(NOW(), INTERVAL -7 DAY)
FROM cars 
WHERE expiry_date <= 
DATE_ADD(NOW(), INTERVAL -7 DAY)
;

-- 2nd query going to expire in exactly 1 day

SELECT car_id, expiry_date, 
Now() + interval 1 day
FROM cars 
WHERE expiry_Date = Now() + interval 1 day
;

-- 1st query: expired 

SELECT car_id FROM cars 
WHERE expiry_date < Now()
;

-- 1st query: expired last 24 hours

SELECT car_id,DATEDIFF(expiry_date, Now())
FROM cars 
WHERE expiry_Date < Now()
AND expiry_Date >= Now() - interval 1 day
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:16:23.137

您的查询没有什么明显的问题，如果您不了解您使用的功能，请搜索它们并阅读它们，直到您了解为止。

您的方法存在一个基本问题，因为它依赖于 cron 作业以 24 小时的间隔运行*-*到毫秒 - 否则会出现双重上升和/或遗漏。

您需要另一个表来存储您的批处理程序上次运行时间的详细信息；用过去很长一段时间的日期用 1 行来初始化它，这样我们就有了一个起点。

您可以通过 获取最新批次`SELECT MAX(date_ran) FROM BatchRecordTables`。将其存储在局部变量 T0 中。获取当前时间，将其存储在局部变量 T1 中（不要在多个查询中使用 NOW()，因为它们的时间会略有不同，您需要它们相同）。我不知道这是 MySQL 的语法——你必须查一下。

然后你的情况就变成了。

1.  向自上次运行 cron 作业以来列表已过期的人发送电子邮件，即`SELECT car_id FROM cars WHERE Expiry_Date BETWEEN T0 AND T1`。这只会选择列表在这批和上一批之间过期的人。
2.  对于第二种情况，我们需要知道这些人收到了第一封电子邮件，即他们的列表在最后一批运行*之前*`SELECT car_id FROM cars WHERE Expiry_Date BETWEEN DATE_SUB(T1, INTERVAL 6 DAY) AND T0`已经过期。这只会选择列表在最后一批之前过期（即他们收到过期电子邮件）和超过 6 天前的人。
3.  同样的逻辑适用 - 我们想知道他们收到了第二封电子邮件。`SELECT car_id FROM cars WHERE Expiry_Date BETWEEN DATE_SUB(T1, INTERVAL 7 DAY) AND DATE_SUB(T0, INTERVAL 6 DAY)`

我还建议您不要永久删除列表，而是将它们复制到 DeletedListings 表或使用 Deleted 列标记它们 - 每个都有其优点和缺点。在信息时代，永远不要丢弃数据——你永远不知道它什么时候有价值。

# c - C 位运算

> ID：14680570
> 
> 赞同：-6
> 
> 时间：2013-02-04T04:53:23.593
> 
> 标签：c

> **可能的重复：**
> [按位运算和使用](https://stackoverflow.com/questions/1746613/bitwise-operation-and-usage)

x 是输入。需要输入 0、1、x 或 x̅ ：

```
 x & 0 = 0

    x & 1 = x

    x | 0 = x
    x | 1 = 0
    x ^ 0 = 1
    x ^ 1 = 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:02:43.943

如果`x`是布尔值，那么`!x`是 x 的布尔否定。那是你的“翻转”。

要打开和关闭，只需执行`x = 1`和`x = 0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:04:02.997

```
x & 0 = 0

x & 1 = x

x | 0 = x
x | 1 = 1
x ^ 0 = x
x ^ 1 = 0 if x is 1, 1 if x is 0 
```

# git - 复制辅助文件

> ID：14680572
> 
> 赞同：1
> 
> 时间：2013-02-04T04:53:47.630
> 
> 标签：git

我正在尝试 git clone 某些东西，但出现权限错误，我在[这里](http://railsinstaller.org/)使用 rails 安装程序设置了 git，所以不知道在这里做什么。

```
Anderss-MacBook-Pro:tmp anderskitson$ sudo git clone git@github.com:mhartl/rails_tutorial_sublime_text.git
Cloning into rails_tutorial_sublime_text...
The authenticity of host 'github.com (207.97.227.239)' can't be established.
RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'github.com,207.97.227.239' (RSA) to the list of known hosts.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly
Anderss-MacBook-Pro:tmp anderskitson$ 
```

运行 ssh-add -l 时我也得到了这个输出

```
Anderss-MacBook-Pro:Packages anderskitson$ ssh-add -l
The agent has no identities. 
```

ssh的内容

```
Anderss-MacBook-Pro:.ssh anderskitson$ ls
known_hosts
Anderss-MacBook-Pro:.ssh anderskitson$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:23:49.563

本指南应该对您有所帮助：[https ://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

在尝试克隆之前，您需要生成一个 SSH 私钥/公钥组合并将其添加到 github。

# c - 从标准输入非阻塞读取

> ID：14680575
> 
> 赞同：3
> 
> 时间：2013-02-04T04:54:06.917
> 
> 标签：c, windows, console, nonblocking

我希望`ReadConsoleW()`在读取特定数量的字节后返回。但它不会返回。

如何`ReadConsoleW()`在读取指定的字节数后立即返回？

我试过的代码在这里：

```
#include <stdio.h>
#include <Windows.h>

int main()
{
    //something is being written to stdin.
    Sleep(2000);
    int b;
    int r;
    //read 3 wide character
    ReadConsoleW(GetStdHandle(STD_INPUT_HANDLE), &b, 3*sizeof(TCHAR), (LPDWORD)&r, NULL);
    //problem: no returns until enter pressed
    putc(b,stdout);
    while(1)
    {};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:05:13.333

用于[`SetConsoleMode`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686033%28v=vs.85%29.aspx)关闭`ENABLE_LINE_INPUT`标志。行编辑将不可用，但不会等到按下 Enter 键。

请注意，您不能将三个`WCHAR`s 读入`int`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T12:10:37.990

还要考虑在 Windows 中使用 ReadFile/WriteFile 的异步 I/O。请参阅[有关异步 I/O 的 MSDN](http://msdn.microsoft.com/en-us/library/aa365683%28v=vs.85%29.aspx)

它有点复杂，但你确实有你想要的。

# c# - Dataview rowfilter 有消息 AgreedToDisclaimer='True' AND Deleted = 'false'

> ID：14680576
> 
> 赞同：0
> 
> 时间：2013-02-04T04:54:13.400
> 
> 标签：c#, asp.net

谁能给我解释一下消息`"AgreedToDisclaimer='True' AND Deleted = 'false'" of Rowfilter option in Dataview`。

```
DataView view = new DataView(set.Tables[0], "AgreedToDisclaimer='True' 
  AND Deleted = 'false'", string.Empty, DataViewRowState.OriginalRows); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:01:21.873

好吧，从[DataView 构造函数](http://msdn.microsoft.com/en-us/library/aa325683%28v=vs.71%29.aspx)：

```
public DataView(
   DataTable table,
   string RowFilter,
   string Sort,
   DataViewRowState RowState
); 
```

> RowFilter : 应用于 DataView 的 RowFilter。

`RowFilter`用于过滤将要显示的数据。在您的示例中：

> “AgreedToDisclaimer='True' AND Deleted ='false'”

表示数据视图将显示 AgreedToDisclaimer 列值为 true 且 Deleted 列值为 false 的行。

更多：[DataView.RowFilter](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter%28v=vs.71%29.aspx)

# c++ - 在 std::fstream 中使用字符串作为文件名。

> ID：14680581
> 
> 赞同：0
> 
> 时间：2013-02-04T04:55:02.940
> 
> 标签：c++, text-files, file-handling

我遇到过关于数据文件的问题，这些问题告诉我们编写一个函数来做事。在所有其他问题中，我们处理固定文件名，例如“abc.txt”，因此这些函数没有通用化。我想知道是否有一种方法可以使数据文件在语句中使用字符串变量：

`fstream file("abc.txt",ios::in|ios::out);`

并将其变成：

```
char str[20]="Newfile.txt";
fstream file(str,ios::in|ios::out); 
```

有没有办法使用字符串作为文件名`std::fstream`？我尝试使用字符串，但没有创建这样的文件，尽管程序的编译没有显示任何错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T04:58:54.847

这取决于编译器。这种方式始终如一地工作：

```
void do_something(std::string const &filename) {

    std::fstream(filename.c_str());
    // ...
} 
```

这种方式适用于新的 (C++11) 编译器，但不适用于旧的：

```
void do_something(std::string const &filename) {

    std::fstream(filename);
    // ...
} 
```

# ruby-on-rails - 如何在生产中配置 Rails 以使用 config.time_zone 而不是服务器时区？

> ID：14680584
> 
> 赞同：1
> 
> 时间：2013-02-04T04:55:13.723
> 
> 标签：ruby-on-rails

在`config/application.rb`中，我已将时区设置为 EST：

```
config.time_zone = 'Eastern Time (US & Canada)' 
```

生产服务器具有`CST`时区。因此，我所有的日期时间都显示时间`CST`而不是`EST`. 时间以 UTC 格式正确存储在数据库中。

```
EST: -0500
CST: -0600

Database in UTC: 18:15:00
Displayed in CST: 12:15:00
Want in EST: 13:15:00 
```

该列的架构`date_time`是：

```
t.datetime "date_time" 
```

在视图中，我称之为`date_time`：

```
<%= Show.find(1).date_time.strftime('%H:%M') %> 
```

我怎样才能强制在`EST`整个网站上始终显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:41:19.873

使用`config.time_zone = 'Central Time (US & Canada)'`（实际上是 中的示例行`config/application.rb`）并使用 localize 助手：

```
<%= l Show.find(1).date_time, format: '%H:%M' %> 
```

[在此处](http://guides.rubyonrails.org/i18n.html)获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:35:36.407

采用`Time.zone = 'Eastern Time (US & Canada)'`

更新：尝试将此添加到`application_controller.rb`

```
before_filter :set_timezone

def set_timezone
  Time.zone = 'Eastern Time (US & Canada)'
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:41:00.200

原来这是我构建 Time 对象的方式中的一个错误。以下构造将`Central Time`获取服务器的默认区域：

```
Time.new(2012, 1, 1, 11, 0) 
```

我必须指定正确`config.time_zone`提取的时区`EST`：

```
Time.new(2012, 1, 1, 11, 0, Time.zone.formatted_offset) 
```

# batch-file - 如何在 DOS 中从文本文件的最后 2 行中提取信息

> ID：14680588
> 
> 赞同：2
> 
> 时间：2013-02-04T04:55:25.147
> 
> 标签：batch-file, dos

我想从文件的最后两行获取时间戳，使用 DOS 看起来像这样：

```
2/3/2013 18:30:00 这是第 1 行
2/3/2013 19:24:05 这是第 2 行
2/3/2013 20:10:40 这是第 3 行
2/3/2013 21:06:00 这是第 4 行
2/3/2013 22:50:31 这是第 5 行

```

目前，我的脚本如下所示：

```
setlocal EnableDelayedExpansion
set i=0

for /f "tokens=2" %%x in (inputfile.txt) do (
    set /a i=!i!+1
    set time!i!=%%x
)

set /a lasttime=time!i!
set /a j=!i!-1
set /a prevtime=time!j!
echo %lasttime%
echo %prevtime%
endlocal 
```

输出只有小时部分，没有分钟和秒：

```
21
22 
```

请告诉我如何使它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:00:38.377

问题是您使用`SET /A`命令分配`lasttime`和`prevtime`.

`SET /A`用于算术运算，并且您输入的所有内容都必须转换为数字，即使您除了将其存储到另一个变量之外没有对该值做任何事情。您的`time!i!`参考评估为，`22:50:31`但在`SET /A`命令的上下文中，它会立即转换为最接近的数值，即`22`. 也一样`time!j!`。

要解决此问题，只需使用简单的`SET`命令和混合扩展，如下所示：

```
...
set lasttime=!time%i%!
set /a j=!i!-1
set prevtime=!time%j%!
... 
```

此外，如果您只需要最后两行，您可以考虑另一种方法。您可以只使用两个变量，而不是为文本的每一行使用一个单独的变量：一个存储当前行，另一个存储前一行的前一个值。这就是我的意思：

```
setlocal EnableDelayedExpansion

for /f "tokens=2" %%x in (inputfile.txt) do (
    set prevtime=!lasttime!
    set lasttime=%%x
)

echo %lasttime%
echo %prevtime%
endlocal 
```

# javascript - 如何在Javascript中将变量从一个函数访问到另一个函数？

> ID：14680592
> 
> 赞同：0
> 
> 时间：2013-02-04T04:55:51.973
> 
> 标签：javascript, html

我有一个带有电子邮件值的提示对话框，需要在另一个函数 Email() 中传递电子邮件变量。这是我的代码。

```
function promptMessage() {
    public var Email = prompt("Enter your Email :", "");
}
function Email(){
    alert("Email Address is " +Email); //Email from promptMessage() function 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:59:19.100

怎么样

```
function promptMessage() {
    return prompt("Enter your Email :", "");
}
function Email(email){
    alert("Email Address is " +email); //Email from promptMessage() function 
}
Email(promptMessage()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:58:06.313

只需在函数范围之外声明它，不要使用函数名作为变量名，这将导致噩梦：

```
var EmailAddr;

function promptMessage() {
     EmailAddr = prompt("Enter your Email :", "");
}
function Email(){
    alert("Email Address is " +EmailAddr); //Email from promptMessage() function 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:07:33.407

由于您在函数内（在本地范围内）声明了 Email 变量，这就是为什么在此函数之外无法访问它的原因。相反，像这样在外部将其定义为全局 var ：

```
var email;
function promptMessage() {
    email = prompt("Enter your Email :", "");
}
function Email(){
    alert("Email Address is " +email); //Email from promptMessage() function 
} 
```

# social-networking - TYPO3 - 创建一个社区网站

> ID：14680597
> 
> 赞同：0
> 
> 时间：2013-02-04T04:56:39.370
> 
> 标签：social-networking, typo3

好的。这是我网站的主要功能。开始：

人登记。他们上传他们拥有的任何电子书、电影、电视节目的列表。其他想要他们的人只需要“搜索”一个项目，他们将获得一个联系表来联系拥有他们想要的人的人。非常像pianofiles.com，但这是针对当地社区的。添加的功能可能是*通过兴趣*创建事件等来形成社会团体。

这一切都可能使用 Typo3 吗？

如果是，那么*我应该如何*使用 Typo3 呢？（只是一个基本的想法）

如果没有，我应该用什么来创建这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:47:26.917

查看 TER，快速搜索显示[http://typo3.org/extensions/repository/view/community](http://typo3.org/extensions/repository/view/community)

您可以使用任何知名的 CMS 或 PHP 框架来实现您的项目。在我看来，TYPO3 CMS 非常重视编辑器后端。如果您根本不需要它并且没有任何先前的经验，我不确定它是否适合您 - 除非您无论如何都想进入 TYPO3！

PS：对于 TYPO3 网络应用程序，将会有即将推出的框架[http://flow.typo3.org](http://flow.typo3.org)，目前处于测试阶段

# php - SES PHP时事通讯cronjob邮件发送循环

> ID：14680598
> 
> 赞同：0
> 
> 时间：2013-02-04T04:56:47.017
> 
> 标签：php, email, amazon-web-services, amazon-ses

我刚刚启动 Amazon SES 并成功配置。实际上，我购买是为了发送新闻信以及我网站的会员状态。

我的网站包含大约 18000 个用户。我想在每个星期六晚上运行一个 cron 作业并向他们发送最新的更新和他们的当前状态。

我可以使用 Amazon SES 满足要求吗？

如果我在邮件查询中循环这些用户有什么问题吗？由于我是这方面的新手，任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:58:00.263

这得看情况。作为 ses 的新用户，我注意到您可以每 24 小时发送 10k 封电子邮件。你有18k。可能有问题。

我尝试过发送 5k 封电子邮件，但我遇到了 php 超时问题。所以我认为你需要将18k分成一小部分我猜......

# css - 我如何定位，除了第一个和最后一个？

> ID：14680604
> 
> 赞同：-3
> 
> 时间：2013-02-04T04:57:28.983
> 
> 标签：css, css-selectors

我如何定位一些子元素，*除非父元素是**其父*元素的第一个或最后一个子元素？

请参阅我的 CSS 中的注释以更好地理解我的意思。

**CSS：**

```
/* Always apply */
tr th, tr td
{
    text-align: left;
    vertical-align: top;
}

/* Apply to all except first <tr> */
tr th, tr td
{
    padding-top: 5px;
}

/* Apply to all except last <tr> */
tr th, tr td
{
    border-bottom: 1px solid #c4c4c4;
    padding-bottom: 5px;
} 
```

**HTML：**

```
<table>
    <tr>
        <th>Born</th>
        <td><time datetime="1986-11-05">5<sup>th</sup> November 1986</time></td>
    </tr>
    <tr>
        <th>Gender</th>
        <td>Male</td>
    </tr>
    <tr>
        <th>Sports</th>
        <td>Football<br />Tennis</td>
    </tr>
    <tr>
        <th>Teams</th>
        <td>Liverpool FC<br />Spain FC</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T05:16:15.497

好吧，您对链接的问题有一个解决方案。使用[`:not()`](https://developer.mozilla.org/en/docs/CSS/%3anot)伪类：

```
/* Apply to all except first <tr> */
tr:not(:first-child) th, tr:not(:first-child) td{
    padding-top: 5px;
}

/* Apply to all except last <tr> */
tr:not(:last-child) th, tr:not(:last-child) td{
    border-bottom: 1px solid #c4c4c4;
    padding-bottom: 5px;
} 
```

[小提琴](http://jsfiddle.net/4xSNx)

（虽然这在 IE 8 中不起作用）

* * *

IE 7+ 的替代方案，如果边框样式可以更改：

```
/* Apply to all */
tr th, tr td{
    border-top: 1px solid #c4c4c4;
    padding-top: 5px;
}

/* Remove styles from first */
tr:first-child th, tr:first-child td{
    border-top: 0;
    padding-top: 0;
} 
```

或者

```
/* Apply to all but first */
tr + tr th, tr + tr td{
    border-top: 1px solid #c4c4c4;
    padding-top: 5px;
} 
```

（但不确定`+`IE 7 是否支持）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:07:42.350

```
tr th,
tr td
    {} /* always apply */

tr:first-child th,
tr:first-child td
    {} /* apply only to td and th of the first tr */

tr:last-child th,
tr:last-child td
    {} /* apply only to td and th of the last tr */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T05:09:56.990

你可以通过这样做来实现这一点

```
tr:not(:first-child) th, tr:not(:first-child) td{
 padding-top:5px;
}
tr:not(:last-child) th, tr:not(:last-child) td{
 border-bottom: 1px solid #c4c4c4;
 padding-bottom: 5px;
} 
```

您还可以为每个类的第一个和最后一个添加一个类，可能类似于`firstth`and `lastth`。这肯定是最简单的解决方案。它也被所有浏览器支持

此外，正如我们所说，您可以定义法线，然后为第一个和最后一个应用不同的样式，尽管这不是一种很好的完成方法

```
tr th, tr td{
 padding: 5px 0; /*I would combine the padding for top and bottom for a more condensed and semantically correct markup*/

 border-bottom: 1px solid #c4c4c4;
}
tr:first-child th, tr:first-child td{
 padding:top: 0;
}
tr:last-child th, tr:last-child td{
 border-bottom:0;
 padding-bottom:0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T05:21:56.750

```
tr:first-child ~ tr:not(:last-child) td,
tr:first-child ~ tr:not(:last-child) th
    {background:red;} 
```

这是你可以用兄弟组合器存档的最好的方法，但它不适用于旧浏览器，因为 :not 并且可能还有 ~

# php - exec 在 php 脚本（WAMP 服务器）中不起作用

> ID：14680605
> 
> 赞同：1
> 
> 时间：2013-02-04T04:57:30.280
> 
> 标签：php, exec, wamp

我在我的系统上使用 WAMP 服务器来执行 php 脚本。

我想`test.php`从我的主脚本执行一个脚本`main.php`。

为此，我正在使用`exec`这样的功能`exec('php test.php');`。在`test.php`我发表了一项`echo`声明。

但是当我`main.php`从浏览器运行我的脚本时，我看不到`test.php`脚本的输出。

我究竟做错了什么 ？请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:02:58.297

你必须给出正确的路径`php.exe`

```
exec("c:\wamp\<where ever you exe is>/php.exe test.php"); 
```

所以它必须是一条正确的路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:59:24.633

使用这个命令

```
echo exec('php test.php', $output);  //this will print your echo statement.
print_r($output); 
```

# android - 更改目标 sdkVersion 后出现 NetworkOnMainThreadException

> ID：14680608
> 
> 赞同：0
> 
> 时间：2013-02-04T04:58:02.260
> 
> 标签：android, exception

我应该如何处理这个异常？

在我将目标 sdkVersion 更改为 13 后，出现此问题！什么地方出了错？

这是我尝试加载广告后的 logcat 输出

```
02-04 12:51:23.910: E/AndroidRuntime(7379): FATAL EXCEPTION: main
02-04 12:51:23.910: E/AndroidRuntime(7379): android.os.NetworkOnMainThreadException
02-04 12:51:23.910: E/AndroidRuntime(7379):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at com.sfa.coverflow.ImageLoader.DisplayAdvert(ImageLoader.java:93)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at com.sfa.coverflow.MainActivity$LoadAdvert.onPostExecute(MainActivity.java:869)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at com.sfa.coverflow.MainActivity$LoadAdvert.onPostExecute(MainActivity.java:1)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at android.os.AsyncTask.finish(AsyncTask.java:602)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at android.os.Looper.loop(Looper.java:137)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at android.app.ActivityThread.main(ActivityThread.java:4446)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at java.lang.reflect.Method.invokeNative(Native Method)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at java.lang.reflect.Method.invoke(Method.java:511)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-04 12:51:23.910: E/AndroidRuntime(7379):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 DisplayAdvert 方法：

```
int advert_id = R.drawable.loader; 
public void DisplayAdvert(String image_url, int loader, ImageView image) {
    // TODO Auto-generated method stub
    advert_id = loader;
    imageViews.put(image, image_url);
    try {
        URL url = new URL(image_url);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        if(myBitmap!=null)
        image.setImageBitmap(myBitmap);
        else
        {
            queuePhoto(image_url, image);
            image.setImageResource(loader);
        }
    } catch (IOException e) {
        e.printStackTrace();
        }
    } 
```

这是我的 LoadAdvert 方法：

```
/**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAdvert extends AsyncTask<String, String, String> {

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_advertisement, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("Advert: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // ADVERT FOUND
                    // RETRIEVE ADVENT URL
                    advert = json.getJSONArray(TAG_PHOTOS);

                    for (int i = 0; i < advert.length(); i++) {
                        JSONObject c = advert.getJSONObject(i);

                        // STORE EACH JSON ITEM IN VARIABLE
                        banner_url = c.getString(TAG_BANNER_IMAGE);
                        banner_url = banner_url.toString();
                        Log.d("banner URL", banner_url);

                        advert_url = c.getString(TAG_ADVERT_URL);
                        advert_url = advert_url.toString();
                        Log.d("advert URL", advert_url);
                    }       
                } 
                else {

                }

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

                    // Loader image - will be shown before loading image
                    int loader = R.drawable.loader;

                    // Imageview to show
                    ImageView image = (ImageView) findViewById(R.id.img_advert);

                    // Image url
                    String imageUrl = banner_url;

                    // ImageLoader class instance
                    ImageLoader imgLoader = new ImageLoader(getApplicationContext());

                    // whenever you want to load an image from url
                    // call DisplayImage function
                    // url - image url to load
                    // loader - loader image, will be displayed before getting image
                    // image - ImageView 
                    imgLoader.DisplayAdvert(imageUrl, loader, image);           

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:07:00.760

这部分堆栈跟踪是“杀手”；

```
at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164)
at com.sfa.coverflow.ImageLoader.DisplayAdvert(ImageLoader.java:93)
at com.sfa.coverflow.MainActivity$LoadAdvert.onPostExecute(MainActivity.java:869) 
```

*当 AsyncTask 完成时，*您`onPostExecute`在 GUI 线程上执行的调用会立即调用. 由于在较新的 API 版本中不允许在 GUI 线程上进行网络访问，因此会引发异常。*`DisplayAdvert``HttpsURLConnectionImpl.connect`*

 *内部的网络访问`DisplayAdvert`需要在非 GUI 线程中完成，因为它执行网络 I/O。

最简单的方法是在您的`DisplayAdvert`方法中创建一个新的 AsyncTask，在 中进行网络访问`doInBackground()`，并使用在 中获取的数据更新 GUI `onPostExecute()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:07:29.523

如果您只是想测试您的代码，那么您可以将以下代码添加到您的`onCreate()`

```
if (android.os.Build.VERSION.SDK_INT > 9) { 
                StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); StrictMode.setThreadPolicy(policy); 
        } 
```

您不希望这是永久性的，因为 UI 线程上的网络操作会在使用应用程序时产生糟糕的体验，但在测试时可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:07:31.387

将您的 DisplayAdvert 方法放在 doInBackground 中，因为您无法在 api 级别 11 及以上的主线程上执行网络操作

看到这个[资源](http://developer.android.com/training/articles/perf-anr.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T05:11:00.210

您不应该在主线程中执行网络操作。

在您发布的代码中，您正在执行网络操作`display()`并`onPost()`在`AsycTask`.

`AsyncTask`只有在`doInBackground()`另一个线程中`onPost()`执行，该方法在主线程本身中执行。

请随时提出任何进一步的疑问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T05:13:53.957

针对 Honeycomb 的应用程序会出现此异常，主 UI 线程中不应允许网络操作。

您必须在单独的线程（多线程）中执行所有网络操作或使用 AsyncTask。

**更新：**

```
 public void DisplayAdvert(final String image_url, final int loader, final ImageView image) 
    {
        advert_id = loader;
        imageViews.put(image, image_url);
        try 
        {
            new Thread(new Runnable()
            {
                Bitmap myBitmap;
                public void run() 
                {
                    try 
                    {
                        URL url = new URL(image_url);
                        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                        connection.setDoInput(true);
                        connection.connect();
                        InputStream input = connection.getInputStream();
                        myBitmap = BitmapFactory.decodeStream(input);
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                    runOnUiThread(new Runnable()
                    {
                        public void run() 
                        {
                            if(myBitmap!=null)
                                image.setImageBitmap(myBitmap);
                            else
                            {
                                queuePhoto(image_url, image);
                                image.setImageResource(loader);
                            }
                        }
                    });
                }
            }).start();
       }
       catch (Exception e) 
       {
            e.printStackTrace();
       }
    } 
```*

# java - 从 int 产品到 long 的隐式转换？

> ID：14680611
> 
> 赞同：1
> 
> 时间：2013-02-04T04:58:31.740
> 
> 标签：java, android, implicit-conversion, multiplication

如果 2 个`int`值的乘积不适合 a `int`，因此我将其存储在 a`long`中，是否需要`long`在每个操作数之前（或至少在其中一个操作数之前）指定显式转换为？或者即使没有强制转换，编译器是否正确处理它？

这将是显式代码：

```
public final int baseDistance = (GameCenter.BLOCKSIZE * 3/2);

long baseDistanceSquare = (long)baseDistance * (long)baseDistance; 
```

或者下面的代码就足够了吗？

```
long baseDistanceSquare = baseDistance * baseDistance; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:00:44.833

刮那个。我读错了。您必须强制转换它以防止溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:28:46.203

作为旁注，这相当于将整数运算的结果转换为浮点数的问题；例如：

```
 float f = 2/3;
    System.out.println(f);  // Print 0.0

    f = (float)(2/3);
    System.out.println(f);  // Print 0.0

    f = (float)2/3;
    System.out.println(f);  // Print 0.6666667 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-12T15:22:57.557

正确的代码是：

```
long baseDistanceSquare = (long)baseDistance * (long)baseDistance; 
```

cast value end 运行一个数学函数

另一个例子：

```
int X;
long Y, Z;
Z = X * Y; // Result is int value
Z = (long) X * Y   //Result is long value
Z = X * 1L //Result is long value 
```

# iphone - 搜索栏仅适用于控制台，不适用于模拟器

> ID：14680615
> 
> 赞同：0
> 
> 时间：2013-02-04T04:59:02.353
> 
> 标签：iphone, ios, xcode, uisearchbar

我的搜索栏在控制台中工作，但在模拟器中不起作用，我不知道为什么。我尝试了很多代码，但没有任何效果。我正在我的 tableview 中寻找餐厅名称，但是当我输入什么都没有发生时，模拟器中的一切都保持不变。

这是我的代码：

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
    if([searchText length] == 0){
        [jsonObject2 removeAllObjects];
        [jsonObject2 addObjectsFromArray:jsonObject];
    }else{
        [jsonObject2 removeAllObjects];

        for(NSDictionary *dictionary in jsonObject)
        {
            NSObject *ob = [dictionary objectForKey:@"nombres"];
            if([ob isKindOfClass: [NSString class]])
            {
                NSString*string=[ob description];
                NSRange range = [string rangeOfString:searchText options:NSCaseInsensitiveSearch];

                if (range.location != NSNotFound) {
                    [jsonObject2 addObject:ob];
                    NSLog(@"%@",jsonObject2);
                }
            }
        }
    }
    [myTableView reloadData];
}

-(void)searchBarSearchButtonClicked:(UISearchBar *)asearchBar{
    [searchBar resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:31:43.530

这个问题可能有两个原因

1.  您正在`jsonObject`用作表格视图的数据源。如果是这样使用`jsonObject2`.

2.  如果第一种情况是错误的，那么您可能应该`jsonObject2`在添加所有搜索组件之后记录您的日志。并修复它，以防它不将对象串入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:00:52.733

我发现了我的问题，我将此代码添加到搜索 textDidChange 方法：

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
if([searchText length] == 0){
    [jsonObject2 removeAllObjects];
    [jsonObject2 addObjectsFromArray:jsonObject];
    //NSLog(@"%@",jsonObject2);
}else{
    [jsonObject2 removeAllObjects];
    for(NSDictionary *dictionary in jsonObject)
    {
        NSString*string=[dictionary objectForKey:@"nombres"];
            NSRange range=[string rangeOfString:searchText options:NSCaseInsensitiveSearch];
            if (range.location != NSNotFound) {
                [jsonObject2 addObject:dictionary];
                NSLog(@"%@",jsonObject2);
        }
    }
}
[myTableView reloadData];  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:18:19.240

首先检查`UITableView`并`UISearchBar`正确添加？...然后取两个`NSMutableArray`并将**一个数组添加到另一个数组**中`ViewDidLoad`，例如，

```
self.listOfTemArray = [[NSMutableArray alloc] init]; // array no - 1
self.ItemOfMainArray = [[NSMutableArray alloc] initWithObjects:@"YorArrayList", nil]; // array no - 2 

[self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray]; // add 2array to 1 array 
```

**并编写以下代码方法**

```
- (void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText
{
        NSString *name = @"";
        NSString *firstLetter = @"";

    if (self.listOfTemArray.count > 0)
         [self.listOfTemArray removeAllObjects];

        if ([searchText length] > 0)
        {
                for (int i = 0; i < [self.ItemOfMainArray count] ; i = i+1)
                {
                        name = [self.ItemOfMainArray objectAtIndex:i];

                        if (name.length >= searchText.length)
                        {
                                firstLetter = [name substringWithRange:NSMakeRange(0, [searchText length])];
                                //NSLog(@"%@",firstLetter);

                                if( [firstLetter caseInsensitiveCompare:searchText] == NSOrderedSame )
                                {
                                    // strings are equal except for possibly case
                                    [self.listOfTemArray addObject: [self.ItemOfMainArray objectAtIndex:i]];
                                    NSLog(@"=========> %@",self.listOfTemArray);
                                }
                         }
                 }
         }
         else
         {
             [self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray ];
         }

        [self.tblView reloadData];
} 
```

并写在`cellForRowAtIndexPath`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Foobar"];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Foobar"];

        cell.selectionStyle = UITableViewCellSelectionStyleBlue;
        cell.textLabel.textColor = [UIColor blackColor];
    }

        cell.textLabel.text = [self.listOfTemArray objectAtIndex: indexPath.row];

    return cell;
} 
```

此代码可能对您有帮助...谢谢:)

# c# - Membership.Providers GetUser 在使用用户名时返回 null

> ID：14680618
> 
> 赞同：2
> 
> 时间：2013-02-04T04:59:22.980
> 
> 标签：c#, asp.net-mvc-3, asp.net-membership, membership-provider

顶部功能返回会员用户，而第二个不返回。我已经为一个用户传递了用户名，该用户的顶部函数得到了结果，但第二个函数只返回 null。有什么建议可以根据用户名获取用户吗？

```
public static MembershipUser getCCUser(Guid UserID)
{
   return ((MembershipProvider)Membership.Providers["CC_MembershipProvider"]).GetUser(UserID, false);
}

public static MembershipUser getCCUser(string userName)
{
   return ((MembershipProvider)Membership.Providers["CC_MembershipProvider"]).GetUser(userName, false);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-14T17:45:48.583

web.config 中的 applicationNames 应与 aspnet_Applications 表中的应用**程序****名称**匹配

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:05:04.787

我发现了真正导致问题的原因。最近我更改了应用程序名称，以免与会员中的其他应用程序冲突。我忘记在我的 web.config 文件的成员资格部分更新应用程序名称：

Web.config（为简洁起见）：

```
<membership>
      <providers>
        <clear/>
        <add name="AA_MembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="AA_MEMBERSHIP" applicationName="/"/>
        <add name="CC_MembershipProvider" applicationName="/"/>
      </providers>
</membership> 
```

应该读到：

```
<membership>
      <providers>
        <clear/>
        <add name="AA_MembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="AA_MEMBERSHIP" applicationName="/"/>
        <add name="CC_MembershipProvider" applicationName="CCPortal"/>
      </providers>
</membership> 
```

这里有趣的一点是，我在使用基于 Guid 的用户 ID 时找到了用户，但在根据字符串 username 查找用户时，该成员资格需要具有正确的应用程序范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:30:44.593

好的。所以这只是一种可能的方式，但基本上我只是使用实体框架进行了查找。我仍然愿意接受建议。

```
public static MembershipProvider CCMembershipProvider
{
    get
    {
        return ((MembershipProvider)Membership.Providers["CC_MembershipProvider"]);
    }
}

public static MembershipUser getCCUser(Guid UserID)
{
    return CCMembershipProvider.GetUser(UserID, false);
}

public static MembershipUser getCCUser(string userName)
{
    //This function is BS.  For some reason userName always gets null.  Unfortunately UsersInRole only gives a string[]
    //Soo... Here is the jenky workaround...
    userName = userName.ToLower();

    CCPortal.MEMBERSHIPEntities context = new CC.MEMBERSHIPEntities();

    CCPortal.aspnet_Users user = context.aspnet_Users.SingleOrDefault(u => u.LoweredUserName == userName);

    return getCCUser(user.UserId);
    //This is what We should be using....
    //return CCMembershipProvider.GetUser(userName, false);
} 
```

# java - 如何从 Selenium Webdriver java 代码更改 foxyproxy 设置

> ID：14680620
> 
> 赞同：4
> 
> 时间：2013-02-04T04:59:27.040
> 
> 标签：java, selenium-webdriver, selenium-firefoxdriver, foxyproxy

我正在寻找如何从 Java 更改 Selenium WebDriver 中 foxyproxy 的设置。我的代码目前如下。

```
FirefoxProfile profile = new FirefoxProfile();

File foxyproxy = new File("path to foxyproxy.xpi");
try {
    profile.addExtension(foxyproxy);
} catch (IOException e) {
}

File binaryfile = new File("path to firefox.exe");
FirefoxBinary profile = new FirefoxBinary(binaryfile);

WebDriver driver = new WebDriver(binary, profile);
... 
```

我可以检查执行 selenium 时 addExtension() 是否没有问题。

但是，在那之后我不知道要更改 foxyproxy 的设置。我想设置一些代理规则。

例如，我可以通过使用 foxyproxy 的指定键和值来使用 setPreference() 吗？

```
profile.setPreference("key", "value"); 
```

如果你有解决方案，你能指导我吗？

感谢您的关注。

# python - 根据前面的字符串返回子字符串

> ID：14680624
> 
> 赞同：1
> 
> 时间：2013-02-04T05:00:03.750
> 
> 标签：python, substring

今天可能有点太多了..但是嗯。

这个问题让我很困惑。此函数将字符串列表作为参数，并返回作为其前一个字符串的子字符串的每个字符串。所以

1.  ["hope", "hop", "hopefully", "test", "testing"] 将返回 ['hop']
2.  ["hopefully", "hope", "hop", "testing", "test"] 将返回 ['hope', 'hop', 'test']

请原谅这里的代码混乱，我还在学习。

```
def findSubStrs(lst):
'list ==> list, return list of all strings that are substrings of their predecessor in lst'
res = []
for a in lst:
    if len(int(a-1)) > len(lst):
        res = res + [a]
return res 
```

我认为 len(int(a-1)) 可以检查前面的字符串，但我刚刚收到错误消息“TypeError: unsupported operand type(s) for -: 'str' and 'int'” The only result我发现工作是 len(a) < 3 或其他一些 int，但这并没有返回我需要的一切。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T05:06:26.543

您可以使用`zip`来获取要比较的对：

```
>>> s1 = ["hope", "hop", "hopefully", "test", "testing"]
>>> [b for a,b in zip(s1, s1[1:]) if b in a]
['hop']
>>> s2 = ["hopefully", "hope", "hop", "testing", "test"]
>>> [b for a,b in zip(s2, s2[1:]) if b in a]
['hope', 'hop', 'test'] 
```

至于你的代码：

```
res = []
for a in lst:
    if len(int(a-1)) > len(lst):
        res = res + [a]
return res 
```

这将遍历`lst`. `len(int(a-1))`将尝试从字符串中减去 1，然后将结果转换为整数，然后取整数的长度，然后将该长度与 list 的长度进行比较`len(lst)`。那不是你想要的。（另一个答案已经解释了使用循环和索引的正确方法，所以我会停下来。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:02:39.803

怎么样

```
print [my_list[i] for i in range(1,len(my_list)) if my_list[i] in my_list[i-1]] 
```

例如

```
>>> def findSubStrs(my_list):
...     return [my_list[i] for i in range(1,len(my_list)) if my_list[i] in my_list[i-1]]
>>> findSubStrs(["hope", "hop", "hopefully", "test", "testing"] )
['hop']
>>> findSubStrs(["hopefully", "hope", "hop", "testing", "test"])
['hope', 'hop', 'test'] 
```

要在没有列表理解的情况下执行此操作，您只需使用一个简单的循环

```
for i in range(1,len(my_list)):
    if my_list[i] in my_list[i-1]:
        print my_list[i] 
```

# xml - xml 到 json 使用 gson 使用 java 或解决 json 中的单元素数组问题

> ID：14680626
> 
> 赞同：1
> 
> 时间：2013-02-04T05:00:13.430
> 
> 标签：xml, json

我正在开发一个支持 xml 和 json 的 REST 服务。为此，我们使用 JIBX 并使用 jibx 映射来定义值对象之外的 xml 结构。这项服务，我也需要扩展它以支持 json。我面临的挑战是，服务响应结构和 xml 元素节点是在 jibx 绑定中定义的。但是要生成同名的json，我只能传递jibx生成的xml；不是价值对象。我尝试了几个 xml 到 json 选项，例如 jackson、json.XML 等……但是当我有一个包含单个元素的列表时，我发现所有这些方法都有问题。如果 List 有一个项目，则生成的 json 响应不会给出类似数组的结构。

以下是我想探索的选项：有没有办法可以使用 Gson b 将 xml 字符串转换为 json。有没有办法使用 JIBX 本身生成 json c。是否有任何其他 json 解决方案可以解决单元素数组的问题，并且还允许将 xml 转换为 json

真的很感谢您对此的回应

# assembly - 以下汇编命令会发生什么？

> ID：14680634
> 
> 赞同：3
> 
> 时间：2013-02-04T05:00:59.253
> 
> 标签：assembly, x86, dos

只是预防措施。我是一个组装完全的菜鸟。我唯一的问题是DOS中只有以下命令：

```
MOV  AH, 09
INT  21

MOV  AX, 4C01
INT  21 
```

第二个中断是否仍然具有参数`09`含义显示屏幕或`AX`以某种方式改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:02:20.843

`AH`和`AL`分别是 的高半和低半`AX`。所以是的，设置`AX`更改`AH`。

`4C`是“退出程序”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T05:18:41.267

您需要搜索[Ralf Brown 的中断列表](http://www.ctyme.com/intr/int.htm)，它是这些旧 DOS/Windows 中断的权威指南。

[使用 AH = 09H](http://www.ctyme.com/intr/rb-2562.htm)调用INT 21h会向控制台输出一个`$`以 at 结尾的字符串。`DS:DX`

[使用 AH = 4cH](http://www.ctyme.com/intr/rb-2974.htm)调用INT 21H 会退出程序，返回码在`AL`（在本例中为 01H）。

第二个调用*不会*简单地`AH`设置为. 第二个设置为设置的一部分：`09H``AH``AX``MOV``AH``4cH``AX`

![在此处输入图像描述](../Images/16f9a5fd82441afd74f423e8ed84c44b.png)

* * *

更详细（来自[维基百科](http://en.wikipedia.org/wiki/Intel_8086)）：

![在此处输入图像描述](../Images/f9d12a8cd517a23bb6f8e1662d039362.png)

* * *

这种由其他寄存器制成的寄存器在英特尔有着悠久的历史：

*   `ax`由`ah`和组成`al`；
*   `eax`由 16 位加上其他 16 位组成`ax`；
*   `rax`由 32 位加上其他 32 位组成`eax`。

以及其他通用寄存器*和*特殊寄存器（如索引或基址寄存器）和堆栈指针的类似方法。

有趣的是，他们*并没有*复制访问扩展寄存器的高半部分的能力，例如`eax`由`eah`and组成`eal`（都是神话，但后者是 的别名`ax`）。

这将在更高模式下为我们提供大量超小寄存器的缓存，尽管我不确定成本会是多少（毫无疑问，英特尔/AMD*确实*知道成本，而且可能被认为太贵了）。

# javascript - 在地图上添加 100 多个标记，冻结整个页面

> ID：14680639
> 
> 赞同：0
> 
> 时间：2013-02-04T05:01:32.763
> 
> 标签：javascript, google-chrome, google-maps-api-3

我有一个包含 100 多个标记的地图。我已经向服务器发出了 Ajax 请求，并获得了一个包含大量纬度、经度值的 xml 响应。循环这些值并在地图上添加带有标签的每个标记。ajax请求和响应很快发生，每个标记被快速添加到映射。然后整个页面冻结一段时间。然后标记显示为大然后恢复正常。为什么谷歌地图会这样？

**我的ajax请求代码，响应并在地图上添加标记：**

```
ajaxRequests[ax]=$.ajax({
        type: "GET",
        url: "myurl",
        dataType: "xml",
        async:true,
        success: function(xml) {
            if (markersArray) {
                for (i in markersArray) {
                    markersArray[i].setMap(null);
                }
            }
            routepoints = new Array();

            $(xml).find('value').each(function(){
                var latt=$(this).find('lat').text();
                var lonn=$(this).find('lon').text();
                routepoints[i] = new Array(name,ct,latt,lonn,phone); 
                addMarker(i);
                i=i+1;
            });

            mzoom=map.getZoom();
        }
    });

function addMarker(tt)
{ 
    var icont;
    if(tt==0)
        icont='images/green.png';
    else if(tt==(total_markers-1))
        icont='images/red.png';
    else
        icont='images/purple.png';

    var idm=(tt+1)+") "+routepoints[tt][1];
    var clocation= new google.maps.LatLng(routepoints[tt][2],routepoints[tt][3]);
    var marker = new MarkerWithLabel({
            position: clocation,
            map: map,
            labelContent: idm,
            labelAnchor: new google.maps.Point(15, 5),
            labelClass: "labels",
            icon: icont
            });
    if(tt==0 || (tt+1)==total_markers)
        marker.setAnimation(google.maps.Animation.BOUNCE);
        else
        marker.setAnimation(google.maps.Animation.DROP);
    markersArray.push(marker);
    map.panTo(clocation);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:31:59.807

我使用了谷歌地图实用程序库 Clusterer API。标记根据缩放级别显示在地图上。现在它解决了我的整个页面挂起问题。

以下链接将帮助使用 Clusterer API。

[https://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers)

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html)

# amazon-web-services - 我应该遵循哪些步骤来更新 AWS Auto Scaling 警报？

> ID：14680643
> 
> 赞同：0
> 
> 时间：2013-02-04T05:02:03.230
> 
> 标签：amazon-web-services, amazon-ec2, autoscaling, amazon-cloudwatch

我将在我的 AWS EC2 实例上设置自动缩放。设置后，如果我想更新自动缩放警报，这样做的最佳做法是什么？我应该遵循哪些步骤？

我知道我可以使用 CloudWatch CLI 删除警报并重新创建它们。但是我是否需要在执行此操作时对 Auto Scaling 组进行更改？或者只是删除并重新创建警报就可以了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:07:00.837

弄清楚了。我按照 Auto Scaling 组>策略>警报的顺序创建了警报。所以我可以独立删除和重新创建警报。要删除策略，我必须使用该策略删除警报。

# android - Android：voice_command 应用每次蓝牙连接仅成功启动一次

> ID：14680644
> 
> 赞同：1
> 
> 时间：2013-02-04T05:02:19.220
> 
> 标签：android, bluetooth

感谢您的时间。

我编写了一个通过蓝牙按钮按下触发的小应用程序。它通过文本转语音向用户打招呼，然后提示他们输入使用语音转文本处理的命令。

一切都很好，除了我的应用程序每次蓝牙连接只会启动一次。下次我按住蓝牙按钮时，我听到的只是*哔声*，但没有应用程序启动。如果我断开蓝牙并重新连接蓝牙，我的应用程序将成功启动，但只是第一次。我尝试了另一个应用程序作为我的默认蓝牙应用程序，每次调用它都可以正常工作，所以这一定是我的设计问题。

为了使我的应用程序有资格作为蓝牙按钮推送的默认设置，我在清单中包含了 voice_command 操作：

```
<intent-filter>
    <action android:name="android.intent.action.VOICE_COMMAND" />
    <category android:name="android.intent.category.DEFAULT" />
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

我所有的工作都集中在一个活动课上：

```
public class MainActivity extends Activity implements OnSharedPreferenceChangeListener, OnInitListener, OnAudioFocusChangeListener { 
```

使用 text-to-speech，我知道应用程序第一次启动时，它会进入我在 onInit 函数中编写的第一个 text-to-speech 调用：

```
@Override
public void onInit(int status) {
    } 
```

当我的应用程序完成并调用finish() 时，文本转语音告诉我该应用程序执行以下顺序：

```
onPause();
onStop();
onDestroy(); 
```

当我在现有蓝牙连接上第二次按下蓝牙按钮时，我的应用程序没有进入 onInit()。我可以相当肯定这一点，因为文本到语音转换不是大声朗读的。这向我表明该应用程序根本没有启动。

在每个蓝牙连接首次成功启动应用程序后，我尝试清除应用程序的缓存并通过设置菜单强制关闭应用程序。没有什么帮助。

任何关于我可以在哪里继续调试的建议将不胜感激。我在 Nexus 4 上进行测试。

谢谢，

格雷格

# load-balancing - 如何在不同的物理服务器中使用 WSO2 应用服务器设置 WSO2 ELB？

> ID：14680653
> 
> 赞同：1
> 
> 时间：2013-02-04T05:03:17.267
> 
> 标签：load-balancing, wso2

我已经在本地机器上为三个节点配置了 WSO2 ELB 和 WSO2 应用程序服务器。但是当我把它移到另一台远程机器上时，它就不能集群了。它给出了一个错误“无法连接到成员”。

我已使用此链接[http://docs.wso2.org/wiki/display/ELB201/Setup+ELB+with+WSO2+Application+Server](http://docs.wso2.org/wiki/display/ELB201/Setup+ELB+with+WSO2+Application+Server)在本地计算机中进行设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:03:49.410

当您移动到另一台远程机器时，您应该在配置中适当地更改 IP 和端口。请记住，您已经在本地计算机中使用了端口偏移量。当应用端口偏移时，每个端口都会增加该值。

# r - 更改使用 markdown -> pandoc 准备的 HTML5 幻灯片中的字体大小

> ID：14680655
> 
> 赞同：10
> 
> 时间：2013-02-04T05:03:35.180
> 
> 标签：r, markdown, knitr, pandoc

我正在使用以下工作流程创建一些 HTML 幻灯片：

*   代码用 R Studio 编辑器 0.97.248 编写
*   `.md``knitr`使用0.8创建的文档
*   `.md`使用 pandoc 1.10.1从文件创建的 HTML5 幻灯片

这是 Yihui Xie[在这里](http://yihui.name/en/2012/05/how-to-make-html5-slides-with-knitr/)描述的工作流程；这是我所知道的使用 Markdown 为演示文稿制作幻灯片的最直接的方法。

我的问题甚至是相对较短的代码行（50 个字符）在幻灯片的右侧运行，因为默认代码字体很大且间距很大。

例如，下面的幻灯片

```
# Title of the slide
And some text.

````{r plotChunk, message=FALSE, fig.height=5, fig.width=5}
require(ggplot2)
ggplot(mpg, aes(x=displ, y=cty, colour=class)) + geom_point()
```` 
```

生成以下幻灯片：

![在此处输入图像描述](../Images/7f92c5b2a76331e1d6f76437e67c1ff9.png)

我可以使用代码选项`tidy=FALSE`手动拆分代码行，但我永远无法在一行中放置很多代码。有没有办法让 HTML 文档中的默认正文字体和代码字体变小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T18:45:44.530

@Yihui 和 @Ramnath 都为我的问题提供了有效的解决方案。由于每个人都选择在评论中回复，我只想指出，**我发现`slidify`这是解决我潜在问题的更快方法，即我需要修改默认 pandoc 格式以制作漂亮的幻灯片**。将上面 pandoc 创建的幻灯片与`slidify`下面创建的相同幻灯片进行比较：

![在此处输入图像描述](../Images/f595d88378b3d78eafc82874900627f0.png)

`slidify`默认情况下选择更合适的代码大小。

我对 pandoc 的麻烦的一个原因可能是特定于系统的（我正在运行 Mac OSX 10.7.5、R 2.15.1、R Studio 0.97.248、pandoc 1.10.1）。Pandoc 的文件转换在我的系统上似乎不太正确：在问题的图中，查看块的名称如何打印在图上，而不是在图下方。`.Rmd` [当我从他的源](https://github.com/yihui/knitr-examples/blob/master/009-slides.Rmd)转换 Yihui 的幻灯片时，我得到的输出与他不同（更差）。请注意下面的“html”文本，这显然是上一张幻灯片的遗留物，其中一行文本超出了屏幕的右侧。

![在此处输入图像描述](../Images/79db11c2d9f1ca79242cae5235fb2ce8.png)

最后，`fig.height`and`fig.width`选项在 中按预期工作`slidify`，而 pandoc 似乎重新调整了数字的大小以填充幻灯片。请注意问题中情节的糟糕分辨率 - 这是一个小情节，并且 pandoc 已经把它炸毁了。

我怀疑 pandoc 对于从 RMarkdown 创建多种格式的文档很有用，但对于在我的系统上制作快速幻灯片，`slidify`似乎是一个更好的开箱即用解决方案。

# vim - 在 Vim 中恢复已删除的行？

> ID：14680657
> 
> 赞同：5
> 
> 时间：2013-02-04T05:03:49.870
> 
> 标签：vim, ubuntu, copy, paste, recovery

所以我在 Ubuntu 中用 Vim 编写，我做了一个`:wq`，然后又回到 Vim。我复制了我需要的部分文本，然后删除了那部分，`:wq`'d，然后回到 Vim 并意外复制了另一部分。我需要我最初复制的部分。我不能只按`u`，因为我已经退出 Vim 并重新进入，所以我的撤消不会回到上一个会话。

有没有办法恢复第一个复制的部分？也许是 Vim 中的某种恢复或在 Ubuntu 中查看以前的副本？

任何帮助都会挽救生命，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T06:52:25.973

如果抽出的文本不是太大，你应该看看`:reg`. 您抽出的内容可能在寄存器 1 或 2 中。

寄存器在会话之间保存，但对其内容的大小有硬性限制。您可以通过以下方式看到系统上的限制`:set viminfo?`：默认值应包括`<50`，`s10`这意味着如果寄存器的内容少于 50 行和/或重量低于 10 Kb，则保存寄存器的内容。

如果你拉了几行相当长的行，你应该没问题。

看看`:h 'viminfo'`你是否想改变这些值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T08:44:39.110

在这种情况下，我的回答对您没有帮助，但是对于将来，您可以在会话之间启用持久撤消文件。

为此，您需要设置该`undofile`选项。

看`:help persistent-undo`

即使在关闭并重新打开文件后，它也允许您撤消。

该选项仅从 Vim 7.3 开始可用

# objective-c - UIView 从顶部向下滑动？

> ID：14680660
> 
> 赞同：0
> 
> 时间：2013-02-04T05:04:22.093
> 
> 标签：objective-c, uiview, uiviewcontroller

我正在考虑像在 Uber 的应用程序中那样创建向上或向下滑动的视图。不确定它是简单的 UIView 他们在当前顶视图上滑动还是这是一个嵌入式视图控件？

还有他们是如何处理分割屏幕的设置视图的？

*抱歉没有屏幕截图，因为它们不会有任何好处，因为您看不到动画。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:25:22.573

他们正在使用自定义容器控制器，该控制器已使用 2 个子控制器进行初始化，一个是地图控制器，另一个是设置控制器。容器控制器使用基本帧动画处理设置和地图控制器的视图。容器控制器的根控制器是设置控制器，mapView 呈现在设置视图之上。当用户点击设置按钮时，地图视图的框架会进行动画处理，使其部分可见并出现设置视图。设置控制器有一个导航控制器，它只是在点击每个 tableView 单元格时推送新控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:25:00.483

如果我们谈论的是 uber 2.0，那么我会说这很容易。在地图后面滑动的顶部，带有配置文件等，只是一个导航控制器，不会占据整个屏幕。而且您不必一直将该背景控制器保存在内存中，只需在 CALayer 中保存它的图像，然后将该层放在导航控制器下方。

# c# - 如何维护会话？

> ID：14680665
> 
> 赞同：-1
> 
> 时间：2013-02-04T05:04:57.800
> 
> 标签：c#, winforms

我正在研究 C# 技术。我需要为独立应用程序中的每个状态维护一个会话。我的目标是实现会话超时功能。请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:31:32.550

Winforms 本质上是有状态的。只要您的调用代码可以访问它们，您设置的变量或状态就应该在内存中可用。全局系统计时器可能是您在这里寻找的。

看看这个[答案](https://stackoverflow.com/questions/847920/how-to-implement-winform-session-like-session-timeout-especially)

如果您需要重新初始化会话，可以查看[此答案](https://stackoverflow.com/questions/453161/best-practice-to-save-application-settings-in-a-windows-forms-application)

# php - 无法从 fetch_assoc() 分配返回值

> ID：14680668
> 
> 赞同：-2
> 
> 时间：2013-02-04T05:05:17.873
> 
> 标签：php

我写的php

```
$query = "SELECT privilege , no, userName FROM  $tableName WHERE userName =   

'$inputAccount' and password = '$inputPassword'";

$result = $mysqli->query($query);

if($result){
       while ($row = $result->fetch_assoc()) {
        printf ("%s %s %s\n", $row["privilege"], $row["no"], $row["userName"]);
    }
} 
```

结果是`user 2 test`

```
session_start();
$_SESSION["privilege"]=$row["privilege"];
$_SESSION["no"]=$row["no"];
$_SESSION["userName"]=$row["userName"]

echo $_SESSION["privilege"] ;
echo $_SESSION["no"];
echo $_SESSION["userName"]; 
```

但是结果一无所获，我已经修复了很长时间，但找不到原因？

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:10:57.340

使用下面的代码，问题是您没有将 sql 输出存储在变量中并在 while 循环之外访问结果。

```
session_start();
$query = "SELECT privilege , no, userName FROM  $tableName WHERE userName =   

'$inputAccount' and password = '$inputPassword'";

$result = $mysqli->query($query);

if($result){
       while ($row = $result->fetch_assoc()) {
        //printf ("%s %s %s\n", $row["privilege"], $row["no"], $row["userName"]);
       $pr = $row["privilege"];
       $no = $row["no"];
       $name = $row["userName"];
    }
}

$_SESSION["privilege"]=$pr;
$_SESSION["no"]=$no;
$_SESSION["userName"]=$name

echo $_SESSION["privilege"] ;
echo $_SESSION["no"];
echo $_SESSION["userName"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:10:54.747

假设您在循环之后分配值，将`$_SESSION` *处于*该阶段。`while``$row``false`

# c - 设置记录设备alsa

> ID：14680669
> 
> 赞同：0
> 
> 时间：2013-02-04T05:05:20.240
> 
> 标签：c, alsa

我想将相同的功能从 oss 混合器移植到 alsa，但我现在不知道如何检查设备通道是否具有捕获掩码。开源代码：

这些函数处理混音器设备

```
static int mixer_fd = -1, mixer_src = -1;

int mixer_init(char *mixer_device, char *mixer_source)
{
    int i;  
    mixer_src = -1; 
    for (i=0;i<SOUND_MIXER_NRDEVICES;i++)
        if (strcmp(mixer_source, devices[i]) == 0) 
            mixer_src = i;

    mixer_fd = open(mixer_device, O_RDWR);
    if (mixer_src < 0)  
        return -1;          
    if (mixer_fd < 0)
        return 0;
    return 1;
}

char** mixer_get_rec_devices(void)
{
    int i, o, devmask, res;
    char** result;

    if ((ioctl(mixer_fd, SOUND_MIXER_READ_RECMASK, &devmask)) == -1)
    return NULL;
    else
    {
        result = malloc(sizeof(char*)*SOUND_MIXER_NRDEVICES);
        o = 0;
        for (i=0;i<SOUND_MIXER_NRDEVICES;i++)
            {
            res = (devmask >> i)%2;
                if (res)
            {
                result[o] = malloc(strlen(devices[i])+1);
                sprintf(result[o], "%s", devices[i]);
                o++;
            }
            result[o] = NULL;   
        }
    }
    return result;
}

int mixer_set_rec_device(void)
{
    int devmask, recmask;

    if (mixer_fd <= 0)
        return 0;

    if (mixer_src < 0)
        return 0;

    if ((ioctl(mixer_fd, SOUND_MIXER_READ_RECMASK, &devmask)) == -1)
        return 0;

    recmask = 1 << mixer_src;
    if (!(recmask & devmask))
        return 0;

    if ((ioctl(mixer_fd, SOUND_MIXER_WRITE_RECSRC, &recmask)) == -1)
        return 0;
    return 1;
} 
```

我需要帮助将此代码移植到 ALSA 混音器。

函数“mixer_set_rec_device()”用于检查如果用户激活录制，通道混音器是否可以录制，其中 settings.mixer 是用户选择的通道。

```
if (!mixer_set_rec_device()) {
        fprintf(stderr, "Could not set \"%s\" as recording Source", settings.mixer);
        return -1;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:44:20.787

一些设备可以从多个来源捕获；这些设备通常有几个名为`xxxxx Capture Switch`.

有些设备只能从一个来源捕获；这些设备通常有一个名为`Capture Source`.

在一般情况下，设备的混音器的工作方式可能完全不同。

在任何情况下，通用应用程序都不应该修改用户的混音器配置，而只是从一些 PCM 设备中录制；配置混音器应该由用户完成，或者由一些了解硬件的专业混音器应用程序来完成。

# file - 尝试使用 AnkSvn 和 Visual Studio2010 从 svn 中删除文件

> ID：14680673
> 
> 赞同：0
> 
> 时间：2013-02-04T05:06:32.600
> 
> 标签：file, svn

我正在使用带有 AnkSvn 的 Visual Studio2010 的 SVN 与 SVN 进行通信。当我尝试删除特定文件时，它会引发错误：

> 无法验证锁定路径文件名没有可用的匹配锁定令牌

这是我的版本详细信息：

> svn版本=1.7.6 操作系统版本=6.1.7601.65536 `ankh-version=2.4.11610.27`

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:18:35.473

是的！我在安装 trotoise svn 后实际上解决了这个问题，它可以更好地控制目录和文件。Trotoise SVN 有释放锁的选项，它帮助我解决了这个问题。

右键单击-> TrotoiseSVN-> 释放锁定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:10:30.920

尝试检查文件是否处于只读模式。

# php - 在输入字段旁边显示错误消息

> ID：14680685
> 
> 赞同：0
> 
> 时间：2013-02-04T05:08:00.893
> 
> 标签：php, html

我想在输入字段旁边显示 php 错误消息。我该怎么做？

这是我在同一页面上的 php 和 html 代码..这只是简单的测试代码..任何帮助都会很棒

尝试将 php 放在输入旁边，但这不起作用..相反我把它放在一个值中

```
<?php

if ( isset( $_POST['submit'] ) ) { 
$mysqli = new mysqli("localhost", "root", "", "test");

$fname = $_POST["fname"];
$lname = $_POST["lname"];

if (empty($henny)) { $errorhenny = '<div class="isa_error">Frist name is required<br></div>'; } 

if (empty($lname)) {
echo '<div class="isa_error">Last name is required<br></div>';
}

else{

$stmt = $mysqli->prepare("INSERT INTO test (Firstname, Lastname) VALUES (?, ?)");

$stmt->bind_param("ss", $fname, $lname);
$stmt->execute();

$stmt->close();

$mysqli->close();
}
}
?>

<html>
<body>
<form action="" method="post">
<input type="text" name="fname" value= "<?php echo $errorhenny; ?>">
<input type="text" name="lname">
<input type="submit" name="submit" value="Submit">
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:24:34.437

尝试使用 ajax... 更容易更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:25:29.367

在 php 变量中分配错误消息，

```
if (empty($fname)) { 
     $errorfname= '<div class="isa_error">Frist name is required</div>'; 
} 
if (empty($lname)) { 
     $errorlname = '<div class="isa_error">Last name is required</div>'; 
} 
```

然后在html中打印变量

```
<html>
<body>
<form action="" method="post">
<input type="text" name="fname">
<?php if(isset($errorfname)) { echo $errorfname; } ?> // fname error message
<input type="text" name="lname">
 <?php if(isset($errorlname)) { echo $errorlname; } ?> //lname error message
<input type="submit" name="submit" value="Submit">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:26:13.673

试试这个：

```
<?php
$ferr = '';
$lerr = '';
if ( isset( $_POST['submit'] ) ) { 
$mysqli = new mysqli("localhost", "root", "", "test");

$fname = $_POST["fname"];
$lname = $_POST["lname"];

if (empty($fname)) {
$ferr = 'First name is required';
}

if (empty($lname)) {
$lerr = 'Last name is required';
}

else{

$stmt = $mysqli->prepare("INSERT INTO test (Firstname, Lastname) VALUES (?, ?)");

$stmt->bind_param("ss", $fname, $lname);
$stmt->execute();

$stmt->close();

$mysqli->close();
}
}
?>

<html>
<body>
<form action="" method="post">
<div>
    <input type="text" name="fname">
    <span class="isa_error"><?php echo $ferr;?></span>
</div>
<div>
    <input type="text" name="lname">
    <span class="isa_error"><?php echo $lerr;?></span>
</div>
<input type="submit" name="submit" value="Submit">
</form>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T05:29:04.157

```
<?php

if ( isset( $_POST['submit'] ) ) { 
  $mysqli = new mysqli("localhost", "root", "", "test");

  $fname = $_POST["fname"];
  $lname = $_POST["lname"];
  if(empty($fname) || empty($lname)){
    if (empty($fname)) { 
       $errorfname = '<div class="isa_error">Frist name is required<br></div>'; 
    } 

    if (empty($lname)) {
       $errorlastname = '<div class="isa_error">Last name is required<br></div>';
    }
  }
  else{

    $stmt = $mysqli->prepare("INSERT INTO test (Firstname, Lastname) VALUES (?, ?)");

    $stmt->bind_param("ss", $fname, $lname);
    $stmt->execute();

    $stmt->close();

    $mysqli->close();
  }
}
?>

<html>
<body>
<form action="" method="post">
<input type="text" name="fname" value= ""><?php echo isset($errorfname) ? $errorfname : ''; ?>
<input type="text" name="lname"><?php echo isset($errorlastname) ? $errorlastname : ''; ?>
<input type="submit" name="submit" value="Submit">
</form>
</html> 
```

# android - Robotium - “控制内置应用程序”

> ID：14680686
> 
> 赞同：0
> 
> 时间：2013-02-04T05:08:05.747
> 
> 标签：android, robotium

**您好我正在使用Robotium工具进行自动化，我开发了一个示例应用程序来发送邮件，它使用内置应用程序即：gmail发送它，我无法单击或对gmail弹出窗口进行任何操作.. . ** 请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:00:44.497

Robotium 只能控制它检测的应用程序。这意味着不可能自动化内置应用程序之一以及您自己的应用程序。（您可以剥离内置应用程序的签名并将其辞职并自动化，但您将无法自动化您自己的应用程序！）。

那么这让我在哪里呢？我听你说！

1.  好吧，您可以通过确保您的应用程序使用 robotsium 向邮件应用程序发送正确的意图来测试该问题。（提示，意图过滤器）
2.  如果您可以接受 4.1+ 的测试，请使用[http://developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)
3.  如果您可以接受仅使用模拟器，请通过层次结构查看器/猴子查看自动化

# javascript - 绘制矩形并注释网页

> ID：14680690
> 
> 赞同：0
> 
> 时间：2013-02-04T05:08:37.627
> 
> 标签：javascript, html

为了在浏览器中绘制矩形和注释网页，最好的实用程序/API 是什么？

我需要用户能够在现有 HTML 内容上绘制一个框，并在框的注释中键入一条消息。

可以在[此处](http://openlayers.org/dev/examples/draw-feature.html)找到类似的功能- OpenLayers 允许您在地图上绘制形状。

**编辑：**

我需要跨浏览器的解决方案，并且尽可能轻量级。PrototypeJS 已经嵌入在这个应用程序中，如果可以利用，那就是一个奖励。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:18:52.220

你没有说你正在从事什么样的项目，而是选择一个环境（支持在其他内容上绘制矩形）并在该环境中做所有事情。例如，您可以使用 HTML5 画布。（如果你稍微搜索一下 OpenLayers.js，你会发现他们也是这样做的）

这是一个很好的入门资源：http: [//www.html5canvastutorials.com/](http://www.html5canvastutorials.com/)

# json - JSON数据描述语言

> ID：14680692
> 
> 赞同：1
> 
> 时间：2013-02-04T05:08:40.477
> 
> 标签：json, field-description

假设我的应用程序想要从多个 REST API 访问数据。每个 API 都支持 JSON 响应，但用于描述数据的*字段不同。*因此，一个 API 可能使用*时间*，而另一个 API 可能使用*时间戳*作为时间戳数据的键。类似地，其他字段（如*位置*）可能会以不同方式表示。

我获取此类异构数据的一种方法是为每个 API 编写一个包装器。但是，我想要一种更通用的方法。

我的应用程序想要从每个 API 的 JSON 响应中检索（比如说）以下字段：

*   时间戳
*   纬度
*   经度

我正在考虑编写一个 JSON 解析器，但指定一个*配置文件*来告诉解析器哪个字段代表什么。所以它看起来像：

对于 API1（比方说）

*   时间戳='时间'
*   纬度 = '位置'[0]
*   经度='位置'[1]

对于 API2（比方说）

*   时间戳='时间戳'
*   纬度 = '纬度'
*   经度 = 'lng'

我相信会有现有的方法可以让你指定这样的*数据描述*，但我一直找不到。有人能指出我正确的方向吗？

**编辑：** 还请让我知道是否有一种通用方法不仅可以解析而且还可以为此类 REST API 创建查询。例如，一些 API 接受时间间隔作为查询参数。这些查询参数也因 API 不同而不同。因此，请建议如何编写一个接受配置文件的通用查询模块，该配置文件告诉模块如何形成查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T18:00:41.667

我认为您正在寻找类似[JSON Schema](http://json-schema.org/latest/json-schema-core.html)的东西。

从链接：

> 一种基于 JSON 的格式，用于定义 JSON 数据的结构。JSON Schema 为给定应用程序需要哪些 JSON 数据以及如何与之交互提供了一个契约。JSON Schema 旨在定义 JSON 数据的验证、文档、超链接导航和交互控制。

这是网站上给出的示例：

```
{
    "title": "Example Schema",
    "type": "object",
    "properties": {
        "firstName": {
            "type": "string"
        },
        "lastName": {
            "type": "string"
        },
        "age": {
            "description": "Age in years",
            "type": "integer",
            "minimum": 0
        }
    },
    "required": ["firstName", "lastName"]
} 
```

# php - 从 dynamoDB php 读取二进制文件

> ID：14680698
> 
> 赞同：1
> 
> 时间：2013-02-04T05:09:16.273
> 
> 标签：php, binary, amazon-dynamodb

我正在尝试使用 SDK php 2 从 DynamoDB 写入和读取二进制数据。

我可以将数据写入表，但是当我读取它时，它以不同的格式出现，如何将其转换回其原始二进制格式。

```
$put_response = $dynamodb->putItem(array(
    'TableName' => 'TableName', 
    'Item' => array(
    'Id' => array( 'S' => 'werwer' ), // Primary Key
    'IV' => array( 'B' => openssl_random_pseudo_bytes(50)),
    'Password' => array( 'B' => $encrypt->EncryptER("asdasd") )
    )
    )); 
```

当我读取 IV 属性或密码时，我得到一个不同的值，我应该做的转换是什么，或者是否有一个函数可以将字符串转换回二进制。

如果我在将值存储在 Dynamo LX�x��ʝ�t]�>0 之前执行回显，这就是我得到的

这是从 Dynamo GdNMWLt4nZrKnc50XdE+MA== 读取变量后的回声

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:35:41.923

主要的是二进制数据存储在 DynamoDB 中的 base64 中，即使您以原始格式提供它也是如此。所以为了得到原始二进制文件，我必须使用

```
base64_decode($response->getPath('Item/IV/B')) 
```

# android - 如何在锁定屏幕上显示 Toast？

> ID：14680703
> 
> 赞同：0
> 
> 时间：2013-02-04T05:09:45.203
> 
> 标签：android, toast, lockscreen

当前的 ：

```
Toast toast = Toast.makeText(context, "test", Toast.LENGTH_SHORT).show(); 
```

Toast 显示在空闲屏幕上。但它不会出现在锁定屏幕上。

我想在锁定屏幕上显示 Toast。如何..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-21T07:50:33.570

我遇到同样的问题。我添加`TextView`到我的 Activity 视图中，替换了 Android 框架的 Toast。也就是说：我自己实现了Toa​​st。

```
TextView mCustomToast = (TextView)findViewById(R.id.tv_custom_toast);
/**
 * show custom toast:
 * fix the problem that {@link android.widget.Toast} can't show when screen be 
   locked
 */
private void showCustomToast() {
    if (mCustomToast != null) {
        if (mCustomToast.getVisibility() == View.VISIBLE) {
            return;
        }
        mCustomToast.setVisibility(View.VISIBLE);
        mCustomToast.postDelayed(new Runnable() {
            @Override
            public void run() {
                mCustomToast.setVisibility(View.GONE);
            }
        }, 1000);
    }
} 
```

# java - 我可以使用本机 JAVA 访问 facebook API 吗？

> ID：14680706
> 
> 赞同：0
> 
> 时间：2013-02-04T05:09:59.227
> 
> 标签：java, facebook, native, java-6

我想通过 Java Native 访问 Facebook 并发布我的墙。

但是我在 Facebook 上看到它的 API 不允许访问本机 Java 这方面的内容。

( [https://developers.facebook.com/docs/](https://developers.facebook.com/docs/) ) 这是 Facebook 的 API 文档。

真的，我在可以通过 Java 本地方法访问的 Facebook 上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:09:40.127

Facebook API，尤其是 Graph API，通常是基于 HTTP 协议的简单 JSON/REST api。

所以你有更多的选择，例如：

1.  使用 java.net.URL 对象直接调用 API
2.  使用 java 客户端 REST 库，例如[Jersey Client](http://jersey.java.net/nonav/documentation/latest/client-api.html)

查看这篇[文章](https://stackoverflow.com/questions/9914015/how-to-consume-facebook-json-using-jersey-client)以获取有关泽西岛的详细示例。

# jquery - Jquery刷新div块一次以显示php会话

> ID：14680708
> 
> 赞同：0
> 
> 时间：2013-02-04T05:10:09.803
> 
> 标签：jquery, refresh, php

如何使用包含 PHP 会话的 id 刷新 div？

我的 JQ ajax 调用：

```
$('#btn_1').click(function(){
    var parameters = $('#booking_form').serialize();

    $.ajax({
        url: baseurl + 'site/process',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(output_str){
            if(output_str == "false"){
                $('#result_msg').html("please select one");

            }else{
                $('#result').html(output_str);
                $('#loaddiv').load();

            }
        }
    });
}); 
```

这是我想在ajax回调后重新加载的地方：

```
<p>
<div id="result" style="color:#606;"></div>
</p>

<div id="loaddiv">
    <p><?php echo $selected; ?></p>
    <p><?php echo $sum_charges; ?></p>
</div> 
```

`$selected`并且`$sum_charges`是在此过程中存储的php会话，该会话仅在我手动刷新时才会显示在页面中，当结果回调到页面时，如何使会话立即显示？

谢谢！！

**编辑：**

我在我的过程中使用了 codeigniter（在 CI 中仍然是新的），这是我的控制器的一部分，用于这个过程：

```
public function process(){
    $confTypes = $this->input->post('cType');
    $user_email = $this->input->post('user_email');
    $output_str = NULL;
    $conf_charge_total = 0;

    if(!empty($confTypes)){

        foreach($confTypes as $confType){
            $explode_value = explode(",", $confType);

            $conf_type = $explode_value[0];
            $conf_charge = $explode_value[1];

            $conf_charge_total += $conf_charge; //sum up checked values

            $output_str .= $conf_type.":".$conf_charge.",";
            /*$output_str = array(
                    'selected' => $conf_type.','.$conf_charge,
                    'email' => $user_email,
                    'sum' => $conf_charge_total,
                    'flag' => 'true'
                );*/
            $this->session->set_userdata('selected', $output_str);

        }

        $output_str .= $conf_charge_total;

        $this->session->set_userdata('sum_charges', $conf_charge_total);

    }else{
        $output_str = "false";
    }

    echo json_encode($output_str);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:41:49.830

ajax调用页面返回`json`你使用`dataType: 'json'`的，那么被调用页面应该返回一个`json formatted string`like

`echo json_encode(array("selected"=>"abc","sum_charges"=>123));`

在您的`ajax function`更改中，成功功能如下：

```
success: function(output_str){
    if(output_str == "false"){
        $('#result_msg').html("please select one");

    }else{
        $('#result').html(output_str);
        var str="<p>"+output_str.selected+"</p><p>"+output_str.sum_charges+"</p>";
        $('#loaddiv').html(str);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:32:34.710

如果您的 js 脚本在同一页面中，您可以这样做..

```
success: function(output_str){
        if(output_str == "false"){
            $('#result_msg').html("please select one");

        }else{
            $('#result').html(output_str);
            var divContent="<p><?php echo $selected; ?></p><p><?php echo $sum_charges; ?></p>"; //this will echo the latest session variable...
              $('#loaddiv').html(divContent);

        }
    } 
```

**更新**

将您的会话变量作为 json 发送

**PHP**

```
 echo json_encode(array('selected'=>$selected,'sum_charges'=>$sum_charges,'output_str'=>'yourStr')); 
```

**查询**

```
success: function(output_str){
        if(output_str == "false"){
            $('#result_msg').html("please select one");

        }else{
            $('#result').html(output_str.output_str);
            var dinContent="<p>"+output_str.selected+"</p><p>"+output_str.sum_charges+"</p>"; //this will echo the latest session variable...
              $('#loaddiv').html(dinContent);

        }
    } 
```

# git - 如何进行 GitHub 拉取请求

> ID：14680711
> 
> 赞同：291
> 
> 时间：2013-02-04T05:10:26.207
> 
> 标签：git, github, pull-request, git-fork

如何创建和/或向 GitHub 上托管的另一个存储库发送拉取请求？

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2013-02-04T07:01:40.027

（除了官方的“ [GitHub Help 'Using pull requests'页面](https://help.github.com/articles/using-pull-requests/)”，
另见“ GitHub中的[Forking vs. Branching](https://stackoverflow.com/a/3611349/6309) ”、“ GitHub[中origin和upstream有什么区别](https://stackoverflow.com/a/9257901/6309)”）

## 关于拉取请求的几个技巧：

假设您首先**[分叉了一个 repo](https://stackoverflow.com/a/6286877/6309)**，那么您应该在您拥有的那个分叉中执行以下操作：

*   **创建一个分支**：将您的修改隔离在一个分支中。不要从 中创建拉取请求`master`，您可能会想一次累积和混合*多个*修改。
*   **重新设置该分支**：即使您已经从该分支发出了拉取请求，将其重新设置为基础`origin/master`（确保您的补丁仍在工作）将自动更新拉取请求（无需单击任何内容）
*   **更新该分支**：如果您的拉取请求被拒绝，您只需添加新的提交，和/或完全重做您的历史记录：它将再次激活您现有的拉取请求。
*   **“聚焦”该分支**：即，使其主题“紧凑”，不要修改数千个类和所有应用程序，只添加或修复一个明确定义的功能，**保持较小的更改**。
*   **删除那个分支**：一旦被接受，你就可以安全地删除你的 fork（和[`git remote prune origin`](https://stackoverflow.com/a/8766540/6309)）上的那个分支。GitHub GUI 将建议您在拉取请求页面中删除您的分支。

注意：要*编写*Pull-Request 本身，请参阅“[**如何编写完美的 pull request**](https://github.com/blog/1943-how-to-write-the-perfect-pull-request) ”（2015 年 1 月，GitHub）

* * *

2016 年 3 月：新的 PR 合并按钮选项：请参阅“ [Github squash commits from web interface on pull request after review comments?](https://stackoverflow.com/a/36377634/6309) ”。

[![壁球](../Images/374359a0a697283c75ad5e62516b4b6c.png)](https://i.stack.imgur.com/y3JEz.png)

仓库的维护者可以选择`merge --squash`那些 PR 提交。

* * *

## 拉取请求之后

关于最后一点，自 2013 年 4 月 10 日起，“**[重新设计的合并按钮](https://github.com/blog/1469-redesigned-merge-button)**”，为您删除了分支：

![新的合并按钮](../Images/ddd9b2bd62c06f5000fce8362b535a47.png)

> 合并后删除分支也得到了简化。
> **我们不会通过额外的步骤确认删除，而是在您删除分支时立即删除它，并提供方便的链接以在您再次需要时恢复分支**。

这证实了在合并拉取请求后删除分支的最佳实践。

* * *

## 拉取请求与请求拉取

*   **拉取请求不是官方的“git”术语。
    Git 使用[`request-pull`(!) 命令](http://git-scm.com/docs/git-request-pull)**构建合并请求：
    它“将两次提交之间的更改汇总到标准输出，并在生成的摘要中包含给定的 URL。” [Github在第一天（2008 年 2 月）](https://github.com/blog/3-oh-yeah-there-s-pull-requests-now)
    推出了自己的版本，但[在 2010 年 5 月重新设计了该功能](https://github.com/blog/712-pull-requests-2-0)，声明：

    ```
     Pull Request = Compare View + Issues + Commit comments 
    ```

* * *

## “存储库”的电子笔记（原文如此）

`<humour>`

GitHub 甚至没有正确定义那个（拉取请求）！

幸运的是，真正的商业新闻机构会知道，并且有一个[e-note 可以将 pull-replace 替换为 'e-note'](https://github.com/github/hub/pull/401)：

![https://pbs.twimg.com/media/BT_5S-TCcAA-EF2.jpg:large](../Images/37278b6a1a31ededfedcfc4be5abe53e.png)

因此，如果您的存储库需要电子笔记……请咨询**Fox** **[Business](http://www.youtube.com/watch?v=k2vJNNAQZlg&t=1m29s)**。他们是知情的。

`</humour>`

* * *

## 回答 #2

> 赞同：204
> 
> 时间：2013-02-04T05:19:57.827

为了了解如何提出拉取请求，我只关注了 Github 上的两个单独的帮助页面（下面链接为要点）。以下命令行命令适用于**第 1 部分**。**第 2 部分**，实际的拉取请求，完全在 Github 的网站上完成。

```
$ git clone https://github.com/tim-peterson/dwolla-php.git
$ cd dwolla-php
$ git remote add upstream https://github.com/Dwolla/dwolla-php.git
$ git fetch upstream
// make your changes to this newly cloned, local repo 
$ git add .
$ git commit -m '1st commit to dwolla'
$ git push origin master 
```

*   **第 1 部分**：分叉某人的仓库：[https ://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)

    1.  点击你想要贡献的repo上的'fork'按钮，在这种情况下：[Dwolla's PHP repo](https://github.com/Dwolla/dwolla-php) (Dwolla/dwolla-php)
    2.  获取新创建的 fork 的 URL，在本例中为：[https](https://github.com/tim-peterson/dwolla-php.git) ://github.com/tim-peterson/dwolla-php.git (tim-peterson/dwolla-php)
    3.  键入`git clone->cd dwolla-php->git remote->git fetch`上面的序列以在计算机中的某个位置克隆您的 fork（即，“复制/粘贴”到，在这种情况下`third_party TimPeterson$`：）并将其与主存储库同步（Dwolla/dwolla-php）
    4.  对本地仓库进行更改
    5.  键入`git add->git commit->git push`上面的序列以将您的更改推送到远程仓库，即您在 Github 上的 fork (tim-peterson/dwolla-php)
*   **第 2 部分**：提出拉取请求：[https ://help.github.com/articles/using-pull-requests](https://help.github.com/articles/using-pull-requests)

    6.  转到Github 上**的 fork**网页（[https://github.com/tim-peterson/dwolla-php](https://github.com/tim-peterson/dwolla-php)）
    7.  单击“拉请求”按钮
    8.  为 pull-request 命名，填写您所做更改的详细信息，然后单击提交按钮。
    9.  你完成了！！

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2014-01-18T23:46:34.190

为了提出拉取请求，您需要执行以下步骤：

1.  分叉一个存储库（您要向其发出拉取请求）。只需单击存储库页面的分叉按钮，您将拥有一个单独的 github 存储库，前面带有您的 github 用户名。
2.  将存储库克隆到本地计算机。您安装在本地机器上的 Github 软件可以为您完成这项工作。单击存储库名称旁边的克隆按钮。
3.  对文件进行本地更改/提交
4.  同步更改
5.  转到您的 github 分叉存储库，然后单击分支按钮旁边的“比较和审查”绿色按钮。（按钮有图标 - 没有文字）
6.  将打开一个新页面，显示您的更改，然后单击拉取请求链接，该链接会将请求发送给您分叉的存储库的原始所有者。

我花了一段时间才弄清楚这一点，希望这会对某人有所帮助。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-04-02T03:45:13.320

我已经启动了一个项目来帮助人们提出他们的第一个 GitHub 拉取请求。您可以在此处完成动手教程来[制作您的第一个 PR](https://github.com/Roshanjossey/first-contributions/blob/master/README.md)

工作流程很简单

*   在 github 上 fork 仓库
*   通过单击克隆 repo 按钮获取克隆 url
*   转到终端并运行`git clone <clone url you copied earlier>`
*   为您所做的更改创建一个分支`git checkout -b branch-name`
*   进行必要的更改
*   提交您的更改`git commit`
*   将您的更改推送到 GitHub 上的 fork`git push origin branch-name`
*   转到 GitHub 上的 fork 以查看`Compare and pull request`按钮
*   单击它并提供必要的详细信息

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-10-08T01:32:38.817

对于我们这些拥有 github.com 帐户，但在命令行中键入“git”时只会收到令人讨厌的错误消息的人，这里是如何在浏览器中完成所有操作:)

1.  正如 Tim 和 Farhan 所写： Fork 你自己的项目副本： [![第 1 步：分叉](../Images/67748bc851dc5ebfc3aba10ee50f2eed.png)](https://i.stack.imgur.com/o1p86.jpg)
2.  几秒钟后，您将被重定向到您自己的项目分叉副本： [![第2步](../Images/1e3157d249e92a2b0f75bbc50d893fc3.png)](https://i.stack.imgur.com/4neXj.jpg)
3.  导航到您需要更改的文件，然后单击工具栏中的“编辑此文件”： [![第 3 步：编辑文件](../Images/9542a96970d83f6ea9854aef4fb428f6.png)](https://i.stack.imgur.com/ltXWo.jpg)
4.  编辑后，写几句话描述更改，然后“提交更改”，就像主分支一样（因为这只是你自己的副本，而不是“主”项目）。 [![第 4 步：提交更改](../Images/84034842a7faca4d614aef10f4c9bdd8.png)](https://i.stack.imgur.com/sNAS4.jpg)
5.  对需要编辑的所有文件重复步骤 3 和 4，然后返回项目*副本*的根目录。在那里，单击绿色的“比较，审查...”按钮： [![第 5 步：开始提交](../Images/6b980745204bcb2f9bc4a2441f2d1fff.png)](https://i.stack.imgur.com/KOuDP.jpg)
6.  最后，在您仔细检查了请求的标题和描述后， **再次**单击“创建拉取请求”..然后再次单击“创建拉取请求”：[![在此处输入图像描述](../Images/440ade3e6e287e489e6503259e9e5422.png)](https://i.stack.imgur.com/iUcsn.jpg)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-06-15T22:13:46.453

我遵循了 tim peterson 的指示，但我为我的更改创建了一个本地分支。但是，在推送之后，我在 GitHub 中没有看到新的分支。解决方案是将 -u 添加到 push 命令中：

```
git push -u origin <branch> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-03T22:24:29.640

我编写了一个 bash 程序，它为您完成了设置 PR 分支的所有工作。如果需要，它会执行分叉、与上游同步、设置上游远程等，您只需要提交修改、推送和提交 PR。

这是你如何运行它：

```
github-make-pr-branch ssh your-github-username orig_repo_user orig_repo_name new-feature 
```

[如果您想了解它的工作原理，您将在此处](https://github.com/stas00/git-tools/tree/master/how-to-make-pr)找到该程序及其存储库还包括手动执行相同过程的分步指南，以及有关如何使您的功能分支保持最新的额外信息与上游大师和其他有用的花絮约会。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-11T05:04:46.960

最简单的 GitHub 拉取**请求****来自 Web 界面**，不使用 git。

1.  注册一个 GitHub 帐户，登录然后转到您要更改的存储库中的页面。
2.  点击**铅笔**图标，

    ![](../Images/9542a96970d83f6ea9854aef4fb428f6.png)

    搜索该位置附近的文本，进行任何您想要的编辑，然后预览它们以确认。为提议的更​​改提供最多 50 个字符的描述，并可选择扩展描述，然后单击**提议文件更改**按钮。

3.  如果您正在阅读本文，您将没有对存储库（项目文件夹）的写入权限，因此 GitHub 将在您的帐户中创建存储库的副本（实际上是一个分支）。单击**创建拉取请求**按钮。

4.  为拉取请求提供描述并添加任何评论，然后单击**创建拉取请求**按钮。

# java - 基于时间的轮换

> ID：14680717
> 
> 赞同：0
> 
> 时间：2013-02-04T05:10:55.833
> 
> 标签：java, animation, 3d, mouse, jogl

我有一个 3D 立方体，我试图沿 Y 轴平滑旋转。截至目前，当我单击鼠标按钮时，立方体会立即旋转到新值（如俄罗斯方块），但希望显示它逐渐旋转到特定的新旋转值。这是我正在使用的代码：

```
// Within Shp_Cube class
public float cubeRotY = 1.0f; // rotate on Y-axis
public static float cubeAngle = .01f; // angle of rotation
public static float cubeSpeed = 1.0f; // speed of rotation
...

// Within drawCube() method (called in JOGL's display(GLAutoDrawable...) )
gl.glRotatef(cubeAngle, 0, cubeRotY, 0); // rotation of cube
...

// Within MouseInput class
@Override
public void mouseClicked(MouseEvent m) 
{
    switch(m.getButton())
    {
    case 1:
        System.out.println("Left Mouse Button Clicked");

        if(Shp_Cube.cubeAngle < Shp_Cube.cubeAngle + 90f)
        {
            Shp_Cube.cubeAngle += Shp_Cube.cubeSpeed;
        }

        break;
    case ... 
```

我一直试图达到的预期效果是当用户单击鼠标左键时，立方体将开始旋转并继续旋转，直到它的角度达到某个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:10:05.363

您正在更新方法中的多维数据集，`mouseClicked()`但它应该在`display()`方法中更新：

```
public void display(GLAutoDrawable drawable) {
    updateCube();
    drawCube(...);
}

private void updateCube() {
    if(Shp_Cube.cubeAngle < Shp_Cube.cubeAngle + 90f) {
        Shp_Cube.cubeAngle += Shp_Cube.cubeSpeed;
    } else {
        Shp_Cube.cubeSpeed = 0; // stop rotattion after angle reched
    }
}

public void mouseClicked(MouseEvent m) {
    switch(m.getButton()) {
    case 1:
        Shp_Cube.cubeSpeed = INITIAL_SPEED; // this should only start rotation by setting positive speed
        break;
    }
} 
```

要以恒定帧速率进行平滑渲染，请将以下内容附加到 main() 方法：

```
Animator animator = new FPSAnimator(canvas, 60);
animator.add(canvas);
animator.start(); 
```

[有关更多信息，请参阅本教程](https://sites.google.com/site/justinscsstuff/jogl-tutorial-3)末尾的代码。

# css - 为什么在调整窗口大小时需要最小宽度？

> ID：14680721
> 
> 赞同：0
> 
> 时间：2013-02-04T05:11:00.720
> 
> 标签：css, window-resize

我在一些网页中看到，当调整浏览器窗口大小时，在 div 之后（特别是在页眉和页脚区域）添加了空格。我发现解决方案是对这些区域使用最小宽度。

为了看到我说的问题，请调整 Stack Overflow.com 的任何页面的大小，例如您现在正在阅读的页面。我见过很多有这个问题的网站。

但为什么会这样呢？为什么需要它？div 是一个块元素，当没有定义宽度时应该拉伸到这个父宽度，所以页眉和页脚应该是 100% 没有任何空格。

这是一个屏幕截图：

[xx http://thesis.um.ac.ir/Screenshot-16.jpg](http://thesis.um.ac.ir/Screenshot-16.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:04:24.857

是的，作为一个块级元素，它将拉伸到它的相对容器宽度。也就是说，任何具有非静态位置或具有尺寸的父容器或容器。如果层次结构中没有具有设置维度或位置的元素，则使用窗口。`<html>`和`<body>`元素实际上并不是默认情况下宽度所基于的元素。默认情况下，窗口实际上是设置`<html>`和`<body>`元素的大小，它们是块*，即使它的子元素在它之外运行，元素仍然会变小。

所以你看到的是`<body>`元素的尺寸越来越小，即使页面上的内容已经跑到最后了。

* 注意：实际上并不是块`<html>`，`<body>`但可以将它们视为块级别。

# iphone - 无法获取 twitter 主页时间线推文

> ID：14680722
> 
> 赞同：0
> 
> 时间：2013-02-04T05:11:02.253
> 
> 标签：iphone, ios, objective-c, twitter, ios6

在我的应用程序中，我想在未登录 twitter 帐户进入 iPhone 的设置时从 twitter 获取推文。实际上我只收到用户推文（我发推文）。但我想获得所有关注者的推文。

我正在使用这个网址：[http ://api.twitter.com/1/statuses/user_timeline.json](http://api.twitter.com/1/statuses/user_timeline.json)

我改为：[http](http://api.twitter.com/1/statuses/home_timeline.json) ://api.twitter.com/1/statuses/home_timeline.json 发生错误。错误是：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ *** -[__NSArrayM insertObject:atIndex:]: object cannot be nil”

我正在使用这段代码。

```
- (IBAction)twitterButtonPressed:(UIButton *)sender
{
    [self.usernameTextField resignFirstResponder];
    self.nameString = self.usernameTextField.text;
    NSURL *timelineUrl = [NSURL URLWithString:@"http://api.twitter.com/1/statuses/home_timeline.json"];

    NSMutableDictionary *parameters =
    [[NSMutableDictionary alloc] init];
    [parameters setObject:self.nameString forKey:@"screen_name"];
    [parameters setObject:@"50" forKey:@"count"];
    [parameters setObject:@"1" forKey:@"include_entities"];

    SLRequest *postRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodGET URL:timelineUrl parameters:parameters];

    [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
     {
         if (responseData != nil)
         {
             NSError *error = nil;
             self.dataSource = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error];

         NSLog(@" tweet inindex 0 %@",[self.dataSource valueForKey:@"text"]);

         NSLog(@"ghjgjhdgjhdgjsgdjgsdjg  %d",dataSource.count);

             if (self.dataSource.count)
             {
             [self performSelectorOnMainThread:@selector(homeView) withObject:nil waitUntilDone:YES];
         }
     }

 }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T17:49:29.590

尝试这个：

```
NSArray *arrayOfAccounts = [account accountsWithAccountType:accountType];
ACAccount *twitterAccount = [arrayOfAccounts lastObject];

SLRequest *postRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodGET URL:requestURL parameters:parameters];

postRequest.account = twitterAccount; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:05:12.570

检查响应。肯定是

```
NSLog(@"%@",[NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error]); 
```

响应可能是

```
{
    errors =     (
                {
            code = 215;
            message = "Bad Authentication data";
        }
    );
} 
```

因为家庭时间线需要身份验证。

检查如何使用 iOS 5 获取 Twitter

[https://dev.twitter.com/docs/ios/making-api-requests-twrequest](https://dev.twitter.com/docs/ios/making-api-requests-twrequest)

但用户必须在 twitter 上登录。

如果您不想使用 iOS 5 twitter，请尝试将其他库与 oAuth 一起使用，例如[https://github.com/bengottlieb/Twitter-OAuth-iPhone](https://github.com/bengottlieb/Twitter-OAuth-iPhone)

# yahoo - 可用的最大 flickr API 限制是多少，您如何获得它？

> ID：14680724
> 
> 赞同：1
> 
> 时间：2013-02-04T05:11:40.443
> 
> 标签：yahoo, flickr

根据 Flickr [API 文档](http://www.flickr.com/services/developer/api/)：

```
If your application stays under 3600 queries per hour ... you'll be fine. 
```

根据雅虎[开发者文档](http://developer.yahoo.com/flickr/)：

```
Access through YQL is limited to 10,000 signed calls per hour 
```

我目前正在使用 Flickr 的直接 API，对 YQL 不熟悉。我是否有必要使用 YQL 重写以获得 10,000 调用限制，或者在使用直接 flickr API 时有没有办法增加我的限制？

为什么同一个服务的两个 API 有不同的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T17:34:41.087

根据[雅虎](http://developer.yahoo.com/forum/YQL/What-is-the-maximum-flickr-API/1361494903655-6a1e3a51-cd41-411e-86a9-dc2dee898ab5)的说法，下限适用。他们还声明可以使用具有更高限制的商业许可证。

# android - 如何在 Android 中更改全息主题的菜单项文本颜色？

> ID：14680728
> 
> 赞同：9
> 
> 时间：2013-02-04T05:12:01.403
> 
> 标签：android, menu, background, overflow, textcolor

我在我的应用程序中使用 Theme.Holo。

我使用以下 Style.xml 自定义了我的主题

```
<style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/CustomActivityTheme.ActionBar</item>
    <item name="android:actionMenuTextColor">#000000</item>
    <item name="android:divider">@drawable/action_bar_div</item>
    <item name="android:actionOverflowButtonStyle">@style/MyActionButtonOverflow</item>
    <item name="android:popupMenuStyle">@style/MyPopupMenu</item>
    <item name="android:itemBackground">@drawable/menu_item_background_fill</item>

    <item name="android:itemTextAppearance">@style/myCustomMenuTextApearance</item>
</style>

<style name="myCustomMenuTextApearance" parent="@android:style/TextAppearance.Widget.TextView.PopupMenu">
    <item name="android:textColor">#404040</item>
</style>

<style name="CustomActivityTheme.ActionBar.OverFlow" parent="@android:style/TextAppearance">
    <item name="android:textColor">#404040</item>
    <item name="android:textSize">18sp</item>
</style>
<style name="CustomButton"> 
     <item name="android:background">@drawable/button_selector</item>
</style>
 <style name="CustomProgressButton">
     <item name="android:background">@drawable/custom_progress_button</item>
</style>
<style name="CustomProfileButton">
     <item name="android:background">@drawable/custom_profile_button</item>
</style>
<style name="CustomSharingButton">
     <item name="android:background">@drawable/custom_sharing_button</item>
</style>
<style name="CustomListBlue">
     <item name="android:background">@drawable/custom_listblue</item>
</style>

<style name="MyPopupMenu" parent="android:style/Widget.Holo.Light.ListPopupWindow">
    <!-- <item name="android:background">#B2B2B2</item> -->
    <item name="android:popupBackground">#B2B2B2</item>

</style>

<style name="MyActionButtonOverflow" parent="android:style/Widget.Holo.ActionButton.Overflow">
    <item name="android:src">@drawable/overflow</item>
</style>

<style name="CustomActivityTheme.ActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@drawable/actionbar_bg</item>
    <item name="android:titleTextStyle">@style/CustomActivityTheme.ActionBar.Text</item>
    <item name="android:subtitleTextStyle">@style/CustomActivityTheme.ActionBar.Text</item>
    <!-- <item name="android:actionOverflowButtonStyle">@drawable/overflow.png</item> -->
</style>

<style name="CustomActivityTheme.ActionBar.Text" parent="@android:style/TextAppearance">
    <item name="android:textColor">#000000</item>
    <item name="android:textSize">16sp</item>
</style>

<style name="activated" parent="android:Theme.Holo">
    <item name="android:background">?android:attr/activatedBackgroundIndicator</item>
</style>

<!-- style for removing the floating dialog -->
<style name="CustomDialogTheme">
    <item name="android:windowIsFloating">false</item>
    <item name="android:windowNoTitle">true</item>
</style>

<!-- style for transparent image resource  activity -->

<style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">false</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:windowAnimationStyle">@style/MyAnimation.Window</item>
</style>

<!-- Animations for a non-full-screen window or activity. -->
<style name="MyAnimation.Window" parent="@android:style/Animation.Dialog">
    <item name="android:windowEnterAnimation">@anim/grow_from_middle</item>
    <item name="android:windowExitAnimation">@anim/shrink_to_middle</item>
</style>

<!-- style for transparent audio and video resource  activity -->

<style name="Theme.Transparent_Player" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">false</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:windowAnimationStyle">@style/MyPlayerAnimation.Window</item>
</style>

<!-- Animations for a non-full-screen window or activity. -->
<style name="MyPlayerAnimation.Window" parent="@android:style/Animation.Dialog">
    <item name="android:windowEnterAnimation">@anim/grow_from_action_bar</item>
    <item name="android:windowExitAnimation">@anim/shrink_to_action_bar</item>
</style> 
```

我在 10 英寸设备中的输出低于

![在此处输入图像描述](../Images/509ede35704115ee0cd8625bccf9bff0.png)

在 4.7 英寸设备中，它显示输出（如果 #404040 颜色代码，则使用白色文本颜色）

![在此处输入图像描述](../Images/a4a9db12ab16013d91d01da5ba19db04.png)

在这里，我可以设置背景颜色，但菜单项文本颜色在 4.7 英寸设备中没有改变

在 4.7 英寸设备中，我没有溢出菜单图标，我通过按菜单按钮打开此菜单。

如何设置文本颜色与 10 英寸设备相同？

提前谢谢！！！

我的菜单布局代码是：

```
<item
    android:id="@+id/home"
    android:title="@string/home"/>
<item
    android:id="@+id/viewer"
    android:title="@string/viewer"/>
<item
    android:id="@+id/quiz"
    android:title="@string/quiz"/>
<item
    android:id="@+id/results"
    android:title="@string/results"/>
<item
    android:id="@+id/chat"
    android:title="@string/chat"/>
<item
    android:id="@+id/settings"
    android:title="@string/settings"/>
<item
    android:id="@+id/intro"
    android:title="@string/intro"/>
<item
    android:id="@+id/lookitup"
    android:title="@string/lookitup"/>
<item
    android:id="@+id/standing"
    android:title="@string/standing"/>
<item
    android:id="@+id/sharing"
    android:title="@string/sharing"/>
<item
    android:id="@+id/advance"
    android:title="@string/advance"/>
<item
    android:id="@+id/reset"
    android:title="@string/reset"/>

<item
    android:id="@+id/refresh"
    android:title="@string/refresh"/>

<item
    android:id="@+id/sync_now"
    android:title="@string/sync_now"/>

<item
    android:id="@+id/sync_info"
    android:title="@string/sync_info"/>

<item
    android:id="@+id/menuIconInfo"
    android:icon="@drawable/info_light_on_dark"
    android:showAsAction="always"/>

<item
    android:id="@+id/menuIconAudio"
    android:icon="@drawable/audio_light_on_dark"
    android:showAsAction="always"/>
<item
    android:id="@+id/menuIconVideo"
    android:icon="@drawable/video_light_on_dark"
    android:showAsAction="always"/>

<item
    android:id="@+id/menuIconLearn"
    android:icon="@drawable/ic_menu_learn"
    android:showAsAction="always"/>
<item
    android:id="@+id/menuIconIntro"
    android:icon="@drawable/intro_pane"
    android:showAsAction="always"/>
<item
    android:id="@+id/menuIconLookItUp"
    android:icon="@drawable/look_it_up"
    android:showAsAction="always"/>
<item
    android:id="@+id/menuIconRecall"
    android:icon="@drawable/ic_menu_recall"
    android:showAsAction="always"/> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-25T15:12:41.813

您应该能够通过使用`SpannableString`而不是轻松更改文本的颜色`String`- 不需要肮脏的解决方法;-)

```
SpannableString s = new SpannableString("My red MenuItem");
s.setSpan(new ForegroundColorSpan(Color.RED), 0, s.length(), 0);
item.setTitle(s); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-18T05:34:39.797

我通过检查设备版本通过菜单代码更改背景颜色来解决。

如果设备不支持溢出菜单，您可以更改菜单的背景颜色，也可以使用以下方法更改菜单文本颜色：

```
static final Class<?>[] constructorSignature = new Class[] {Context.class, AttributeSet.class};

class MenuColorFix implements LayoutInflater.Factory {
public View onCreateView(String name, Context context, AttributeSet attrs) {
    if (name.equalsIgnoreCase("com.android.internal.view.menu.ListMenuItemView")) {
        try {
            Class<? extends ViewGroup> clazz = context.getClassLoader().loadClass(name).asSubclass(ViewGroup.class);
            Constructor<? extends ViewGroup> constructor = clazz.getConstructor(constructorSignature);
            final ViewGroup view = constructor.newInstance(new Object[]{context,attrs});

            new Handler().post(new Runnable() {
                public void run() {
                    try {
                        view.setBackgroundColor(Color.GRAY);
                        List<View> children = getAllChildren(view);
                        for(int i = 0; i< children.size(); i++) {
                            View child = children.get(i);
                            if ( child instanceof TextView ) {
                                ((TextView)child).setTextColor(Color.BLACK);
                            }
                        }
                    }
                    catch (Exception e) {
                        Log.i(TAG, "Caught Exception!",e);
                    }

                }
            });
            return view;
        }
        catch (Exception e) {
            Log.i(TAG, "Caught Exception!",e);
        }
    }
    return null;
}       
}

public List<View> getAllChildren(ViewGroup vg) {
ArrayList<View> result = new ArrayList<View>();
for ( int i = 0; i < vg.getChildCount(); i++ ) {
    View child = vg.getChildAt(i);
    if ( child instanceof ViewGroup) {
        result.addAll(getAllChildren((ViewGroup)child));
    }
    else {
        result.add(child);
    }
}
return result;
} 
```

//并在onCreateContextMenu中，放置以下代码

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
LayoutInflater lInflater = getLayoutInflater();
if ( lInflater.getFactory() == null ) {
    lInflater.setFactory(new MenuColorFix());
}
super.onCreateContextMenu(menu, v, menuInfo);
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.myMenu, menu);
} 
```

# iphone - 图片不显示在上传的应用程序中

> ID：14680729
> 
> 赞同：1
> 
> 时间：2013-02-04T05:12:08.430
> 
> 标签：iphone, ios, xcode, itunes

我创建了一个应用程序并将其上传到`itunes`连接。在我的应用程序中，我显示了一个用作登录的“注册”页面。如果用户尚未登录，则显示注册页面。我正在重复使用此页面来更新用户的详细信息，例如他们的姓名、号码和电子邮件地址。我添加了四个用于注册、跳过、更新和取消的图像。这些图像在模拟器中完美显示，并`IPA`提供给客户端。我已将其上传到 iTunes Connect，然后下载了该应用程序，但我的图像未显示。

**这是我用来添加图像的代码。**

```
 ExampleAppDataObject* theDataObject = [self theAppDataObject];

    appDelegate = (TaxiAppDelegate *)[[UIApplication sharedApplication] delegate];

    userID = nil ;
    if (appDelegate.loginData)
    {
        LoginData *loginData = nil ;
        loginData = appDelegate.loginData ;
        userID = [NSString stringWithFormat:@"%@",[loginData userid]];
    } 
    theDataObject.userID = userID;

    NSLog(@"userID : %@",userID);

    if ([userID length] != 0) {
        [btnSubmit setImage:[UIImage imageNamed:@"Update.png"] forState:UIControlStateNormal];

        [btnSubmit addTarget:self 
                      action:@selector(updateUserData) 
            forControlEvents:UIControlEventTouchUpInside];

        [skipButton setImage:[UIImage imageNamed:@"Cancel.png"] forState:UIControlStateNormal];

        [skipButton addTarget:self 
                      action:@selector(cancelBtnClicked) 
            forControlEvents:UIControlEventTouchUpInside];

        txtUserName.text = [appDelegate.loginData name];
        txtEmail.text = [appDelegate.loginData email];
        txtPhone.text = [appDelegate.loginData phoneno];

    }else {
        [btnSubmit setImage:[UIImage imageNamed:@"btn_register.png"] forState:UIControlStateNormal];
        [btnSubmit addTarget:self 
                      action:@selector(btnSubmitClicked) 
            forControlEvents:UIControlEventTouchUpInside];

        [skipButton setImage:[UIImage imageNamed:@"btn_skip.png"] forState:UIControlStateNormal];
        [skipButton addTarget:self 
                      action:@selector(btnSkip) 
            forControlEvents:UIControlEventTouchUpInside];

    }

    //

} 
```

按钮正在响应其动作事件，但图像未显示。

**更新**

是的，我的应用程序已经在 iTunes 中，更新功能作为添加版本添加到我现有的应用程序中。

我没有为我的按钮图标添加@2x 图像，有必要这样做吗？

此外，在我的第一个版本中，我使用 IB 显示图像，但在更新中，我以编程方式将图像设置在按钮上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:24:28.043

您在哪个设备上运行该应用程序？如果您在 iPhone 4/4s 或 iPad 3 上运行该应用程序，那么如果您不添加 @2x 图像，它不会显示，因为它需要 @2x 图像。

# python - 如何从 python 脚本安装 npm 包？

> ID：14680733
> 
> 赞同：9
> 
> 时间：2013-02-04T05:12:35.877
> 
> 标签：python, node.js, sublimetext2, npm

如何从 python 脚本安装 npm 包？

**我用** `subprocess.Popen(["node", "app.js"])`的时候**没**问题。
**当我使用** `subprocess.Popen(["npm", "install", "open"])`它时会**抛出错误**。

*抱歉，Google 和 DuckDuckGo 今天不是我的朋友（*

**主要问题**- 我的小实用程序需要自动本地安装包，因为全局包在 Windows 中不起作用。

**PS。**我不得不问这个问题，因为我正在尝试为 Sublime Text 2 开发一个插件。

这是**Sublime python 控制台中的错误**：

```
Reloading plugin …\stsync.py
Traceback (most recent call last):
  File ".\sublime_plugin.py", line 103, in create_application_commands
    cmds.append(class_())
  File ".\stsync.py", line 16, in __init__
  File ".\subprocess.py", line 633, in __init__
  File ".\subprocess.py", line 842, in _execute_child
WindowsError: [Error 2] 
```

第 16 行：`subprocess.Popen(["node", "npm", "install", "open"])`

* * *

**如果我将**第 16 行更改为**subprocess.Popen(["node", "npm", "install", "open"])** 那么 python 脚本将成功调用 nodejs 终端，但随后它将失败并出现错误：
`cannot find npm module`
![节点错误](../Images/ce7d04d9cb7fe0d493d02fe2b6f63064.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-06T16:54:56.823

将`shell`参数设置为 True

```
subprocess.Popen(["node", "npm", "install", "open"], shell=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T14:22:33.197

在 Windows 上，许多 Node.js “二进制文件”实际上都带有`.cmd`文件扩展名后缀，无论出于何种原因，在通过 调用期间`subprocess.Popen`，它都不会扩展（即使`PATHEXT`可能包含`.cmd`）。

因此，对于正确的解决方案（不使用`shell=True`），请尝试附加`.cmd`到所需的 Node.js 二进制文件：

```
Python 3.5.2 (v3.5.2:4def2a2901a5, Jun 25 2016, 22:01:18) [MSC v.1900 32 bit (In
tel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import subprocess
>>> subprocess.Popen(['npm.cmd', 'install'])
<subprocess.Popen object at 0x005E18B0>
>>> npm ERR! install Couldn't read dependencies 
```

当然它会抛出一个错误，因为我`package.json`在那个目录中没有。使用其他一些常用程序再试一次，例如`webpack`：

```
>>> subprocess.Popen(['webpack'])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
...
FileNotFoundError: [WinError 2] The system cannot find the file specified 
```

哦对了，补充一下`.cmd`：

```
>>> subprocess.Popen(['webpack.cmd'])
<subprocess.Popen object at 0x008A18B0>
>>> No configuration file found and no output filename configured via CLI option 
```

# eclipse - 创建 HK2 模块

> ID：14680734
> 
> 赞同：2
> 
> 时间：2013-02-04T05:12:44.457
> 
> 标签：eclipse, maven, plugins, glassfish, osgi

我正在尝试利用[Hundred Kilobyte Kernel (HK2)](http://hk2.java.net/)框架，但是我找不到任何教程或工作示例。我已经安装了 Maven，因为它是必需的，但我找不到可以使用的原型。我正在使用 Eclipse，我只找到了这个[Netbeans 指南](http://wiki.netbeans.org/HK2)，但即使是示例源文件也不存在。

在 Eclipse 下，我设法安装了[m2e maven 插件](http://eclipse.org/m2e/)，并尝试开始一个新项目，但是当我尝试搜索 hk2 原型来创建我的自定义时，我找不到所需的资源。我尝试创建一个新项目，然后添加一个原型，我将 com.sun.enterprise 指定为组 id，将工件 id 指定为 hk2（以及 hk2-maven-plugin 根据一些说明），我能找到的最新版本（1.6.9）和远程位置[http://download.java.net/maven/glassfish/](http://download.java.net/maven/glassfish/)，但即使[jar 文件](http://download.java.net/maven/glassfish/com/sun/enterprise/hk2/1.6.9/)在那里，我也找不到原型目录文件。我也尝试将此位置添加为远程目录，但由于没有 xml 文件指向，它说目录是空的。

我的问题是，是否有人有任何更新的资源或启动步骤来创建 hk2 模块？或者可以告诉我如何使用我所拥有的？罐子里面有 pom.xml 文件，但是如果我将它们导入 Eclipse，它会出现我不知道如何修复的错误。该项目的开发似乎几乎完全停止（最后一次更新是从 2011 年 7 月开始），但也许已经熟悉 Glassfish 插件开发的人可以为我指明正确的方向？或者也许有人可以推荐HK2的替代品？如果有人有任何很好的 OSGi 教程，或者任何其他类似的框架。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:33:17.063

听起来你最好使用 OSGi ... HK2（如果它仍然是 100k，我会感到惊讶）试图不直接依赖 OSGi 来处理 Glassfish。我认为它没有维护良好的 API。

由于 OSGi 是一个定义良好且维护良好的 API，它在 Glassfish 上运行，并且您还可以移植到其他环境，这似乎表明 OSGi 的选择更明智。最简单的入门方法是[http://bndtools.org/](http://bndtools.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:58:09.913

如果您想做 Glassfish 模块开发，我可以推荐您遵循教程和从 Glassfish 主干中获取的一个示例。看看他们是怎么做的。我尝试过一次，但由于 HK2 并不是真正的 OSGi，正如 Peter 已经提到的，我让它在一段时间后 :) 但也许你现在可以利用这些信息 ;)

*   [http://kalali.me/glassfish-modularity-system-how-extend-glassfish-cli-and-web-administration-console-part-2-developing-sample-modules/](http://kalali.me/glassfish-modularity-system-how-extend-glassfish-cli-and-web-administration-console-part-2-developing-sample-modules/)
*   [http://java.net/projects/glassfish-samples/sources/svn/show/trunk/v3/plugin/adminconsole/console-sample-ip/](http://java.net/projects/glassfish-samples/sources/svn/show/trunk/v3/plugin/adminconsole/console-sample-ip/)

# r - 通过 r 的显着差异自动对图中的处理进行分组

> ID：14680735
> 
> 赞同：1
> 
> 时间：2013-02-04T05:12:46.593
> 
> 标签：r, statistics

在我的工作中，我经常不得不使用 Anova 和 Tukey 检验进行不同的治疗比较，以确定一个因素实验中的多个治疗中的哪一个在统计上彼此不同。

我附上的代码产生了两个单独的[数字](http://imgur.com/a/fkalq)：一个带有值的处理分布（示例 graph1），另一个带有 Tukey 测试结果，显示哪一对处理彼此之间存在显着差异（示例 graph2）。

我过去所做的是查看 Tukey 结果并手动编辑第一个图表，其中包含表示统计等效组组的字母（例如 graph3）。我一直在研究不同的 r 库，以寻找自动生成类似于图 3 的东西的方法，该图总结了这些分组，但还没有找到方法。有没有人有什么建议？

PS- 如果下面的图形例程有点麻烦，我很抱歉，但它本质上是我开发的一组更全面的函数的一个片段，用于测试数据分布、有条件地应用相关测试并生成输出表格和图形。

我为制作前两个图表而编写的代码如下。t?usp=分享

```
Group=c("G1","G1","G1","G1","G2","G2","G2","G2","G3","G3","G3","G3")
Vals=c(runif(4),runif(4)+0.5,runif(4)+0.1)
data=data.frame(Group)
data=cbind(data, Vals)  
anova_results=aov(Vals~Group,data=data)
anova_results2=anova(anova_results)[1, ]
anova_significance=anova_results2[1,"Pr(>F)"]
significant=anova_significance[1]<=0.05
if (significant==1) {
  Tukey_results=TukeyHSD(anova_results,"Group")
  Tukey_results=Tukey_results$Group
}  
plot(data$Group, data$Vals) 
if (significant==1) {
  plot(TukeyHSD(anova_results,"Group"), las=1)   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:03:00.543

Roman Lustrik 对上述评论的建议是正确的。我最终找到了两种基于两个相关库的替代方法。运行问题中发布的代码后，创建分组处理图运行：

```
#simple looking solution
library(multcomp)
tuk <- glht(anova_results, linfct = mcp(Group = "Tukey"))
summary(tuk)          # standard display
tuk.cld <- cld(tuk)   # letter-based display
opar <- par(mai=c(1,1,1.5,1))
plot(tuk.cld)
par(opar)

#more fancy looking solution using the multcompView library with a lot of ways to 
#alter the plot appearance as necessary
library(multcompView)
multcompBoxplot(Vals~Group,data=data)

# Now, the solution below is my favorite solution as the text direction of the groups 
#work very well if you have many treatments that you are comparing
opar <- par()  
par(oma = c(6, 0, 0, 0)) #extra space for extra large treatment names
xzx <-multcompBoxplot(Vals~Group,data=data,sortFn=median,  decreasing=FALSE,    
                      horizontal=FALSE,
                      plotList=list(
                        boxplot=list(fig=c(0,  1,  0,  1),  las=3,
                                     cex.axis=1.5),                      
                        multcompLetters=list(
                          fig=c(0.87,  0.97,  0.115,  0.923), #0.1108, 0.9432 Top of     
#page 18 manual for very convoluted explanation (c(y bottom, y top,x L, x R))
                          type='Letters') ) )
par(opar) 
```

# ruby-on-rails - 如何在 Rails 中设置 2-way 动态表

> ID：14680736
> 
> 赞同：1
> 
> 时间：2013-02-04T05:12:49.463
> 
> 标签：ruby-on-rails

我可能在这里忽略了一种简单的方法，但是编写在 2 轴上动态的表的最佳方法是什么。我正在使用 Rails 3.2

例如，假设我有以下型号

```
class Region
  has_many :shops
end

class Shop
  has_many :sales
  has_many :products, through: :sales
end

class Sale
  belongs_to :shop
  belongs_to :product
end

class Product
  has_many :sales
  has_many :shops, through: :sales
end 
```

在区域显示视图中，我想显示一个表格，在列标题中列出商店，在行标题中列出产品，并计算`Sale.price`每个单元格的平均值。

我陷入了混乱的嵌套块中，计算出的值似乎与我的预期不符。

有没有一种简单的 Rails 方式来做这样的事情？或者任何人都可以推荐我可以学习的任何示例代码。

我的实际模型比我描述的要复杂一些，我想知道是否应该花时间调试代码，或者是否应该采用更简单的方法。这似乎是一个相当普遍的要求。

编辑

我的代码示例

```
#views/regions/show.html.erb
<table>
  <tr>
    <th>Shop Name</th>
    <% for product in @region.products.uniq %>
      <th><%= product.name%></th>
    <% end %>
  </tr>
  <% for shop in @region.shops.uniq %>
    <tr>
      <td><%= shop.name %></td>
      <% for product in @region.products.uniq %>
        <td><%= product.sales.average(:price, conditions: ['sale.shop_id = ?', shop], :include => :sale) %></td>
      <% end %>
    </tr>
  <% end %>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:46:03.063

你可以试试这个来计算每家商店的平均销售额。

`Shop.joins(:sales).average(:price, group: :product_id)`

这将产生一个散列，其中键是产品 ID，值是该产品的平均值。如果您想显示更多详细信息而不仅仅是产品 ID，您可以将`:group`选项更改为（使用 postgre）

`Shop.joins(sales: :product).average(:price, group: "product_id || ' - ' || products.name")`

更新：在问题上使用视图模板（警告，这在大量记录上会很慢）

```
#views/regions/show.html.erb
<table>
  <tr>
    <th>Shop Name</th>
    <% @region.products.each do |product| %>
      <th><%= product.name%></th>
    <% end %>
  </tr>
  <% @region.shops.each do |shop| %>
    <tr>
      <td><%= shop.name %></td>
      <% shop.products.each do |product| %>
        <td><%= product.sales.where(shop_id: shop.id).average(:price) %></td>
      <% end %>
    </tr>
  <% end %>
</table> 
```

更新：这可能是一种更快的方法

```
# controller
@shops = @region.shops
@products = Product.joins(:shops).where(shops: { region_id: @region.id })
@averages = Sale.joins(:shop).average(:price, group: ['shops.id', 'shops.name', 'sales.product_id])

# view
<tr>
  <th>Shop Name</th>
  <% @products.each do |product| %>
    <th><%= product.name%></th>
  <% end %>
</tr>
<% @shops.each do |shop| %>
  <tr>
    <td><%= shop.name %></td>
    <% @products.each do |product| %>
      <td><%= @averages[[shop.id, shop.name, product.id]] || 0 %></td>
    <% end %>
  </tr>
<% end %> 
```

# php - 如何通过单击两个不同的按钮来查看 2 个单独的表单

> ID：14680738
> 
> 赞同：0
> 
> 时间：2013-02-04T05:13:06.373
> 
> 标签：php

我在**第一个 php 文件**中使用两个按钮编写了 php 代码。现在我正在尝试在**另一个 php 文件中执行，通过单击按钮打开一个单独的表单，然后单击另一个按钮打开另一个单独的表单**。但我不知道该怎么做。

```
<input type="submit" name="question" value="question" />
<input type="submit" name="answer" value="answer" /> 
```

请告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:21:21.817

**方法一**

```
<input type="submit" name="question" value="question" onclick="file1.php" />
<input type="submit" name="answer" value="answer"  onclick="file2.php" /> 
```

**方法二**

```
<form action="file1.php" method="post">
<input type="submit" name="question" value="question" /></form>

<form action="file2.php" method="post">
<input type="submit" name="answer" value="answer" /></form> 
```

如果您使用单个文件，则在表单上保留一个隐藏变量并检查下一页上的变量值并采取措施。前任：

```
 <form action="a.php" method="post">
<input type="hidden" name="Var1" value="question"/> 
    <input type="submit" name="question" value="question" />
</form>

    <form action="a.php" method="post">
<input type="hidden" name="Var1" value="answer"/> 
    <input type="submit" name="answer" value="answer" /></form> 
```

**一个.php**

```
check POST['var1']=="question"{
//do something
}
check POST['var1']=="answer"{
//do something
} 
```

不知道有没有更好的方法，但是你可以这样解决

# javascript - 如何在 TypeScript 中实例化、初始化和填充数组？

> ID：14680740
> 
> 赞同：95
> 
> 时间：2013-02-04T05:13:39.450
> 
> 标签：javascript, typescript

我在 TypeScript 中有以下类：

```
class bar {
    length: number;
}

class foo {
    bars: bar[] = new Array();
} 
```

然后我有：

```
var ham = new foo();
ham.bars = [
    new bar() {          // <-- compiler says Expected "]" and Expected ";"
        length = 1
    }
]; 
```

有没有办法在 TypeScript 中做到这一点？

**更新**

我想出了另一种解决方案，方法是使用 set 方法返回自身：

```
class bar {
    length: number;

    private ht: number;
    height(h: number): bar {
        this.ht = h; return this;
    }

    constructor(len: number) {
        this.length = len;
    }
}

class foo {
    bars: bar[] = new Array();
    setBars(items: bar[]) {
        this.bars = items;
        return this;
    }
} 
```

所以你可以如下初始化它：

```
var ham = new foo();
ham.setBars(
    [
        new bar(1).height(2),
        new bar(3)
    ]); 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-04T06:21:21.573

JavaScript 或 TypeScript 中没有像对象那样的字段初始化语法。

选项1：

```
class bar {
    // Makes a public field called 'length'
    constructor(public length: number) { }
}

bars = [ new bar(1) ]; 
```

选项 2：

```
interface bar {
    length: number;
}

bars = [ {length: 1} ]; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-08-19T19:21:36.540

如果您真的想拥有命名参数并让您的对象成为您的类的实例，您可以执行以下操作：

```
class bar {
    constructor (options?: {length: number; height: number;}) {
        if (options) {
            this.length = options.length;
            this.height = options.height;
        }
    }
    length: number;
    height: number;
}

class foo {
    bars: bar[] = new Array();
}

var ham = new foo();
ham.bars = [
    new bar({length: 4, height: 2}),
    new bar({length: 1, height: 3})
]; 
```

另外[这里](https://typescript.codeplex.com/workitem/334)是打字稿问题跟踪器上的相关项目。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-03-12T16:05:47.587

一个简单的解决方案可能是：

```
interface bar {
    length: number;
}

let bars: bar[];
bars = []; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-22T13:27:29.133

另一个解决方案：

```
interface bar {
    length: number;
}

bars = [{
  length: 1
} as bar]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-09T03:25:24.800

如果您想向页面“添加”其他项目，您可能需要创建一个地图数组。这就是我创建**地图数组**然后向其中添加结果的方式：

```
import { Product } from '../models/product';

products: Array<Product>;          // Initialize the array.

[...]

let i = 0;
this.service.products( i , (result) => {

    if ( i == 0 ) {
        // Create the first element of the array.
        this.products = Array(result);
    } else { 
        // Add to the array of maps.
        this.products.push(result);
    }

}); 
```

product.ts的*样子*...

```
export class Product {
    id: number;
    [...]
} 
```

# r - knitr：有没有办法让 forloop 条件包含 Sexpr？

> ID：14680742
> 
> 赞同：2
> 
> 时间：2013-02-04T05:13:48.663
> 
> 标签：r, latex, knitr

我正在使用 R 中的 knitr 包来尝试将数据框转换为报告。问题是输入数据有很多可变性。目的是打印一行文本（从数据框中提取，然后是图表，也来自数据框）

以下代码是相同的精简版本。它不输出 PDF 文件。

```
\documentclass{report}
\usepackage{forloop}
\newcounter{tmp}

\begin{document}
\newcommand{\Brep}{$\Sexpr{A}$}

\forloop{tmp}{1}{\value{tmp} < \Brep} {\Brep}

\end{document} 
```

在检查日志和删除部分时，我将其范围缩小到 knitr/latex 无法评估 forloop 条件下的 \FBrep 部分。

有没有办法解决这个问题？另外，在下一步中，我需要以类似的方式使用 includegraphics，如下所示

```
\includegraphics{\Brep.PNG} 
```

对不起，如果这是 RTFM 材料。我真的很新，我确实环顾四周。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:49:22.720

你不能让 LaTeX 调用`knitr`或`R`. 什么`knitr`是解析您的文档以获取 R 代码，并评估代码。然后一切都在 R 端完成，你得到一个与 R 无关的静态 LaTeX 输出文档。因此*，如果您想编写任何东西，请在 R 代码中进行*。

将您的程序直接翻译成 R：

```
\documentclass{report}
\begin{document}

<<results='asis', echo=FALSE>>=
for (tmp in 1:A) {
  cat(tmp)
}
@

<<results='asis', echo=FALSE>>=
for (tmp in 1:A) {
  cat(sprintf('\\includegraphics{%d.PNG}', tmp))
}
@
\end{document} 
```

但可以简化为：

```
\documentclass{report}
\begin{document}
\Sexpr{paste(1:A, collapse = '')}
\Sexpr{paste(sprintf('\\includegraphics{%d.PNG}', 1:A), collapse = '')}
\end{document} 
```

我还需要提醒您，这可能不是在文档中插入绘图的理想方法（通常您不需要照顾`\includegraphics{}`）。您需要了解这样的自动化：

```
\documentclass{report}
\begin{document}
<<>>=
for (i in 1:5) {
  hist(mtcars[, i])
}
@
\end{document} 
```

# mysql - 同一表上的 SELECT 中的 MYSQL SELECT

> ID：14680743
> 
> 赞同：1
> 
> 时间：2013-02-04T05:13:52.563
> 
> 标签：mysql, select

我有一个几乎可以满足我要求的 SQL 语句。我需要的是找到两个*qseqid*值的
*pindent > 60*和*覆盖率 > 60的**属。*我想我需要某种类型的加入，也许就像这个[问题一样](https://stackoverflow.com/questions/6561438/mysql-select-within-same-table)

这就是我现在所拥有的。这并没有达到我想要的结果。

```
SELECT qseqid, genus, species, txid, sgi, pindent, coverage 
FROM vmdavis.insecta10000
WHERE pindent > 60
AND coverage > 60
AND qseqid in ("diaci0.9_transcript_99990000013040", "diaci0.9_transcript_99990000022677")
ORDER BY  genus, species, qseqid, coverage, pindent; 
```

这是一个为什么这不起作用的例子。Anchon 符合上述 qseqid 的标准，适用于 dia...040，但不适用于 dia...677，所以我不会选择这一行。

```
| diaci0.9_transcript_99990000013040 | Anchon           | sp. NYSM 95-02-01-35          |  265052 |   6467730 |   80.93 |  61.7597 | 
```

这是表格的示例

```
mysql> SELECT qseqid, genus, species, txid, pindent, coverage FROM vmdavis.insecta10000 limit 5;
+------------------------------------+---------+-------------+--------+---------+----------+
| qseqid                             | genus   | species     | txid   | pindent | coverage |
+------------------------------------+---------+-------------+--------+---------+----------+
| diaci0.9_transcript_99990000000055 | Apis    | florea      |   7463 |    97.5 |  2.58107 |
| diaci0.9_transcript_99990000000055 | Bombus  | impatiens   | 132113 |    97.5 |   3.3534 |
| diaci0.9_transcript_99990000000055 | Nasonia | vitripennis |   7425 |    97.5 |  1.58343 |
| diaci0.9_transcript_99990000000055 | Bombus  | terrestris  |  30195 |    97.5 |  3.41207 |
| diaci0.9_transcript_99990000000055 | Apis    | mellifera   |   7460 |    97.5 |  2.88889 |
+------------------------------------+---------+-------------+--------+---------+----------+ 
```

这是一个例子。在这种情况下， Agetocera 属被列出两次，因为对于两个 qseqid，它都符合 pindent 和覆盖范围的标准。如果 Agetocera 不满足两个 qseqid 的 pindent > 60 和 coverage > 60 的条件，则应列出这些行中的任何一个

```
| qseqid                             | genus     | species     | txid   | pindent | coverage
| diaci0.9_transcript_99990000013040 | Agetocera | mirablis    |  715820 | 291191497 |   82.37 |  60.7963 |
| diaci0.9_transcript_99990000022677 | Agetocera | mirablis    |  909986 | 309755769 |   77.52 |  78.6269 | 
```

我对 mysql 很陌生，我认为这个问题的答案可能存在于 stackoverflow 上。如果我找到它，我只是不知道要搜索什么或理解解决方案。如果问题可以更好地提出，或者您可以提出更好的标题，我会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:24:35.877

尝试这样的事情 - 使用子查询仅获取所需的属：

```
SELECT *
FROM insecta10000 i 
  JOIN 
  (
  SELECT genus
  FROM insecta10000
  WHERE pindent > 60
    AND coverage > 60
    AND qseqid in ("diaci0.9_transcript_99990000013040", "diaci0.9_transcript_99990000022677")
  GROUP BY genus
  HAVING COUNT(*) = 2
  ) i2 on i.genus = i2.genus 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/aa36d/1)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:46:04.640

如果你想要同时满足 Coverage > 60, pindent > 60 的记录，你已经得到了查询。但是，如果您正在查看这样的`union`内容，分别满足 Coverage 和 pindent 的记录，请尝试以下操作：

```
SELECT * FROM (
SELECT qseqid, genus, species, txid, sgi, pindent, coverage 
FROM vmdavis.insecta10000
WHERE pindent > 60    
UNION
SELECT qseqid, genus, species, txid, sgi, pindent, coverage 
FROM vmdavis.insecta10000
WHERE coverage > 60) x
WHERE x.qseqid in ("diaci0.9_transcript_99990000013040", "diaci0.9_transcript_99990000022677")
ORDER BY  x.genus, x.species, x.qseqid, x.coverage, x.pindent
; 
```

现在您已经给出了预期的输出：（尽管列不同..sigly sig）：

[http://sqlfiddle.com/#!2/f89ce/4](http://sqlfiddle.com/#!2/f89ce/4)

```
SELECT qseqid, genus, species, txid, 
indent, coverage 
FROM demo
WHERE indent > 60
AND coverage > 60
AND qseqid in ("diaci0.9_transcript_99990000013040", "diaci0.9_transcript_99990000022677")
ORDER BY  genus, species, qseqid, coverage, indent;

|                             QSEQID |     GENUS |  SPECIES |   TXID | INDENT | COVERAGE |
------------------------------------------------------------------------------------------
| diaci0.9_transcript_99990000013040 | Agetocera | mirablis | 715820 |  82.37 |  60.7963 |
| diaci0.9_transcript_99990000022677 | Agetocera | mirablis | 909986 |  77.52 |  78.6269 | 
```

# actionscript-3 - 如何逐帧播放动画

> ID：14680746
> 
> 赞同：0
> 
> 时间：2013-02-04T05:14:13.970
> 
> 标签：actionscript-3

我有5个动画场景。我想将这些场景组合成一个文件。每个文件包含一个场景（即一个包含该场景动画的影片剪辑）。为了准备所有场景的一个文件，我将所有帧一一复制到一个文件中。并使用

> gotoAndPlay(2);

每一帧的命令。但是在播放第三帧之后，它再次播放第二帧而不是第四帧。我应该对代码进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:18:27.640

我相信你已经放`gotoAndPlay(2);`了每一帧，这显然意味着即使在第三帧之后也要播放第二帧。

请改用[nextFrame()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#nextFrame%28%29)。

你也可以使用[nextScene()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#nextScene%28%29)并且根本不改变场景。

# android - Facebook SDK 3.0 Android 使用 ID 和密码获取已保存用户的 AccessToken？

> ID：14680747
> 
> 赞同：0
> 
> 时间：2013-02-04T05:14:15.607
> 
> 标签：android, facebook, passwords, access-token, userid

是否可以使用保存的用户 ID 和密码获取用于 android Facebook API 调用的 AccessToken？

或者也许从 Facebook 网站或其他方式获取 Android 的 AccessToken ......

我有用户名和密码！！

**不使用 facebook 登录用户界面！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:00:57.243

不要这样做！

Facebook 平台政策明确禁止您收集用户名和密码（参见[https://developers.facebook.com/policy/](https://developers.facebook.com/policy/)第 I.2 节）。如果你这样做，你的应用程序将被关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:35:20.743

要获取特定于您的应用程序的 Accees 令牌，您需要在[facebook 开发人员帐户](https://developers.facebook.com/apps)上创建应用程序，然后当您使用保存的登录名时您将获得访问令牌，您将无法访问用于注册应用程序并返回访问令牌的 URls

# php - PHP引用数组中最后插入的元素

> ID：14680752
> 
> 赞同：0
> 
> 时间：2013-02-04T05:14:51.053
> 
> 标签：php

php 中有没有一种方法可以准确地找出我的元素被插入到数组中的位置，即它被插入到数组中的位置。对于下面的代码，我需要在数组的任何位置插入一个元素，然后在该数组的第二个维度插入一个子元素

```
$myarray=array();
$myarray[]=$someelementdefinedbefore;
$myarray[][2]=$second element related to some element defined before; 
```

即我需要将上面提到的两个元素组合在一起，这样我以后可以通过单个数组搜索访问它们

任何想法我怎么能做到这一点。我的意思是我知道我可以为此使用数组搜索，但我想知道是否有更有效的解决方案可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:30:07.790

```
$myarray=array();
$myarray[]=$someelementdefinedbefore; // This will be the last element as it is appended.

$myArrayLastElement = count($myarray)-1; // get the key of the last element.
// append your second element to this array.
$myarray[$myArrayLastElement][2]=$second element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:20:53.790

您不想将第二个添加为二维数组。

```
$myarray=array();
$myarray[]=$someelementdefinedbefore;
$myarray[]=$second element of same array; 
```

这里`$myarray[0]`会给你数组的第一个值，并且`$myarray[1]`会给你数组的第二个值

# c - unsigned int arg 的二进制表示

> ID：14680753
> 
> 赞同：-4
> 
> 时间：2013-02-04T05:14:53.440
> 
> 标签：c

其无符号整数参数的二进制表示中出现的次数。

例如，数字 183 是 0b10110111，11 出现了 3 次。

有人可以解释或详细说明（举例）这意味着什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:16:51.037

当然。从 0 开始计数。查看每一对连续的位。如果他们是 11，则增加计数。如果他们不是，不要。

在您的示例 10110111 中，连续对是

```
10 01 11 10 01 11 11 
```

其中三个是 11，所以返回 3。

如果您需要实现这一点，最简单的方法可能是查看 2 个最低有效位以查看它们是否为 11。如果是，请增加计数器。然后将整数右移一位并循环。当您将所有 1 移出时，循环可以停止，因此数字为 0。此时计数器将保存答案。所有这些都可以在 3 或 4 行代码中完成，您真的应该自己编写这些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:18:00.473

它计算在无符号整数中设置了多少位（有重叠）。

从技术上讲，对于参数的每个第 i 位`0 <= i <= 30`，如果设置了 -th`i`位并且设置`(i+1)`了 -th 位，那么您有一对。数一数，你就完成了。

# sql-server-2008 - 需要分析表和连接

> ID：14680758
> 
> 赞同：1
> 
> 时间：2013-02-04T05:15:07.640
> 
> 标签：sql-server-2008

我需要为现有网站创建一个移动 api，客户告诉我们通过查看现有网站来实现具有各种方法列表的 api，因此我们需要分析要构建的查询是什么。

现在我的实际问题是，

1.  是否可以通过运行网站的不同屏幕来检查，后面使用的 sql 表是什么以及它们是如何连接的？（不使用存储过程，都是内联查询）

2.  如果是这样如何检查，我们有权访问客户的生产和数据库服务器，除此之外我们什么都不知道。

简而言之，我需要通过运行网站的每个屏幕来检查`TABLES`使用了什么以及它们是如何被编辑的。`JOIN`

**更新：**

我已经尝试过`SQL Profiler`，它返回了大量的行，在难以追踪的地方，并且在`TextData`通过提供`loginname`我减少了行数来添加过滤器之后。

现在它在所有行中都像这样返回`exec sp_execute 8581,1,225`，当我运行它时出现这个错误 `Could not find prepared statement with handle 8581.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:17:35.383

运行应用程序并使用[SQL Server Profiler](http://msdn.microsoft.com/en-us/library/aa173918%28v=sql.80%29.aspx)查看查询/表。

# sharing - 分享按钮在包含不同新闻的网页中选择了错误的 URL。如何纠正它？

> ID：14680764
> 
> 赞同：0
> 
> 时间：2013-02-04T05:15:54.030
> 
> 标签：sharing, code-sharing

在我的网站中，一个网页包含不同的新闻，每个链接到具有详细信息的不同页面。我把 sharethis 按钮放在每个新闻标题下。但是，当我开始共享特定标题时，显示所有新闻标题的当前网页是共享的。下载的 shathis 按钮代码是否需要进行任何更改？任何人都可以帮我解决这个问题吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:16:19.367

你到底在说什么？什么样的分享按钮？这是 Facebook 插件吗？如果是这样，那么您需要动态插入 url。他们为您提供了代码以放置在您希望按钮出现的网站上，这就是您执行此操作的地方。

```
<div class="fb-like" data-href="<?php echo $url; ?>" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false"></div> 
```

对不起，如果这对你没有用，我真的不清楚你到底在寻求什么帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:22:26.703

**以下是大多数共享脚本的工作方式：**

如果您将他们的脚本“按原样”复制并粘贴到您的网页上，他们会自动检测并共享他们所在页面的 URL。这就是为什么页面上的所有 ShareThis 按钮都在检测和共享您所说的“当前网页”。

**这是你需要做的：**

您需要指定每个按钮应在每个按钮的脚本中共享的 URL。他们的 API 对此有详细的文档。

[http://support.sharethis.com/customer/portal/articles/475079-share-properties-and-sharing-custom-information](http://support.sharethis.com/customer/portal/articles/475079-share-properties-and-sharing-custom-information)

让我知道这是否有帮助。

# mysql - SQL 选择带有 added_date 和 updated_date 的行

> ID：14680767
> 
> 赞同：3
> 
> 时间：2013-02-04T05:16:31.427
> 
> 标签：mysql, sql

我正在尝试选择行 order by`added_date`或者如果行已更新然后 order by `updated_date`。

默认更新日期为`Null`。

`dd-mm-yy`( )中给出的上表日期。

对于下表，第一行在 2 月 2 日添加，第二行在 2 月 1 日添加，因此使用 ,

```
select * from tablename order by added_date desc; 
```

我得到了最新的行，但是如果更新了任何行，那么这个更新的行将成为最新的行。

对于第二行，行在 2 月 1 日添加，但在 2 月 3 日更新，因此它成为最新行。

如何获取添加和更新日期的记录？

```
 id   title    name   added_date   updated_date
     1   asd      rff     02-02-2013    NULL
     2   fsfs     rwr     01-02-2013    03-02-2012
     3   ddd      wwrr    30-01-2013    04-02-2013 
```

编辑：使用 MYSQL

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T05:31:44.933

您没有指定使用哪个 RDBMS。对于 Oracle，您可以尝试以下操作：

```
SELECT * FROM tablename ORDER BY NVL(updated_date,added_date) DESC; 
```

SQL 服务器：

```
SELECT * FROM tablename ORDER BY ISNULL(updated_date,added_date) DESC 
```

MySQL：

```
select * from tablename order by ifnull(updated_date,added_date) desc; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:32:44.530

尝试使用`COALESCE`

```
SELECT  * 
FROM    tablename 
ORDER   BY COALESCE(updated_date, added_date) DESC 
```

*   [合并](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

从文档：

> 返回列表中的第一个非 NULL 值，如果没有非 NULL 值，则返回 NULL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T05:36:43.330

```
ORDER BY 
    CASE updated_date 
        WHEN NULL THEN added_date 
        ELSE updated_date
         END 
    desc 
```

# android - 在 ViewFlipper 或 ViewPager 中滑动图像

> ID：14680768
> 
> 赞同：14
> 
> 时间：2013-02-04T05:16:34.110
> 
> 标签：android, performance, android-viewpager, viewflipper, android-2.2-froyo

我想一次显示一张图片。在滑动时，我想用滑动效果改变我的图像。我阅读了有关 ViewPager 和 ViewFlipper 的信息。我什至有一个使用 ViewFlipper 执行此操作的示例。只需要正确解释在哪里使用 ViewFlipper 和在哪里使用 ViewPager。在我看来，当您想要滑动具有某些功能的一堆片段时，似乎更有可能使用 ViewPager，而不仅仅是要滑动一些图像。

但是，如果有人认为应该使用 ViewPager 而不是 ViewFlipper 只是为了刷一堆图像，请简要解释一下为什么？为什么一个人应该使用 ViewPager 而不是 ViewFlipper。哪一个应该更节省内存？而这两者的目的是什么？您能否举例说明滑动 imageViews 的示例（代码）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-04T05:29:05.863

`ViewPager`实际上工作`ViewFlipper`方式有点不同。`ViewFlipper`不允许您滑动和拖动图像-您基本上是轻弹手指，然后当前显示的图像以恒定速度向右翻转。

`ViewPager`另一方面，让用户按住视图并向左/向右滑动。它可能对用户更友好，因为它有更多的反馈（即，即使他/她已经开始向一个方向轻弹图像，用户也可以决定不翻转图像）。所以我会使用`ViewPager`. 无论如何，两者都有针对内存进行优化的方法，具体取决于您使用的适配器。

# machine-learning - 异构特征空间上的 SVM 学习

> ID：14680773
> 
> 赞同：4
> 
> 时间：2013-02-04T05:16:48.443
> 
> 标签：machine-learning, classification, svm, scikit-learn

我正在尝试一些文档分类任务，到目前为止，SVM 在 TF*IDF 特征向量上运行良好。我想合并一些不基于词频的新特性（例如文档长度），看看这些新特性是否有助于分类性能。我有以下问题：

1.  我可以简单地将新特征与旧的基于频率的特征连接起来，并在这个**异构**特征空间上训练一个 SVM 吗？
2.  如果不是，**多核学习**是通过在每个子特征空间上训练一个核并使用线性插值组合它们来实现它的方法吗？（我们仍然没有在 scikit-learn 中实现 MKL，对吧？）
3.  还是我应该转向能够很好地处理异构特征的替代学习器，例如 MaxEnt 和决策树？

提前感谢您的友好建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:45:02.367

使用 SVM 很可能使用任意特征和特征组合。要记住的一件事是你应该[标准化你的特性](http://en.wikipedia.org/wiki/Feature_scaling)，这只是意味着它们都应该在相同的规模上。这将防止特征空间的意外加权。

如果这不能产生可接受的结果，您可以查看[卷积核](http://books.nips.cc/papers/files/nips14/AA58.pdf)，它提供了一个框架，用于将不同特征空间中的核组合成一个核。但是，如果这是必要的，我会感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:45:05.433

> 1）我可以简单地将新特征与旧的基于频率的特征连接起来，并在这个异构特征空间上训练一个 SVM 吗？

既然你用`scikit-learn`：是的，你可以，你可以用[`FeatureUnion`](http://scikit-learn.org/stable/modules/generated/sklearn.pipeline.FeatureUnion.html)它来为你做这件事。

> 2）如果不是，多核学习是通过在每个子特征空间上训练一个核并使用线性插值组合它们来实现它的方法吗？（我们仍然没有在 scikit-learn 中实现 MKL，对吧？）

线性 SVM 是该任务的标准模型。内核方法对于现实世界的文本分类来说太慢了（除了可能使用[LaSVM](http://leon.bottou.org/projects/lasvm)之类的训练算法，但这在 scikit-learn 中没有实现）。

> 3) 还是我应该转向能够很好地处理异构特征的替代学习器，例如 MaxEnt 和决策树？

SVM 与 MaxEnt/logistic 回归一样处理异构特征。在这两种情况下，您确实*必须*输入缩放数据，例如使用[`MinMaxScaler`](http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.MinMaxScaler.html). 请注意，scikit-learn`TfidfTransformer`默认会生成归一化向量，因此您无需缩放其输出，只需缩放其他功能即可。

# linux - awk 模式匹配的正确语法是什么

> ID：14680777
> 
> 赞同：0
> 
> 时间：2013-02-04T05:17:23.533
> 
> 标签：linux, awk

我正在打开多个文件`awk`并测试此命令

我正在尝试这个进行测试

`awk -F"," 'NR==FNR{print FILENAME} {print FILENAME}' file2.txt file1.txt`

第二个块应该在 NR != FNR 时执行，但对我来说它一直在执行。

这个语法正确吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:21:10.390

由于您没有为第二个操作指定模式，它总是执行。如果您只希望它在 NR!=FNR 时执行，请尝试以下操作：

```
NR==FNR { printf("NR==FNR, Filename=%s", FILENAME); }
NR!=FNR { printf("NR!=FNR, Filename=%s", FILENAME); } 
```

无论好坏，没有`else`for 模式，因此您通常最终明确指定每个模式。

# ssh - 亚马逊云计算：保护此实例背后的理论

> ID：14680783
> 
> 赞同：0
> 
> 时间：2013-02-04T05:17:59.017
> 
> 标签：ssh, amazon-ec2, jersey, playframework-2.0, pci-compliance

像我五岁一样向我解释，大声笑。作为一名 web 开发人员，我只使用传统的 websetup：我有一个 Java 应用程序，我将它部署到某处的服务器，然后使用 web 浏览器连接/测试它。如果需要来回发送敏感信息，例如密码，则使用 SSH 服务器。

现在我已经在 J​​ava Play 中编写了一个 RESTful 应用程序！我想部署到 Amazon EC2 实例上。我一直无法理解 PCI 安全性的概念以及如何将其应用到我的设置中。在这种情况下，我希望 REST 应用程序允许管理功能，因此需要将登录凭据添加到提交给各种 REST 服务的请求中。

在亚马逊 EC2 端和客户端（基于 Jersey 的客户端）上执行此操作的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:13:46.713

一般来说，在 URL 中只需要用户名密码是个坏主意。即使您使用 SSL，URL 及其所有查询参数也不安全。如果您希望您的提要是安全的，您可以使用诸如 HMAC-SHA1 或 HMAC-SHA256 之类的散列方法使用私钥对您的请求进行签名。它的工作原理是这样的。

客户端需要两个密钥，公钥和私钥

```
PublicKey: ABCDJJJZ7BW9P0IH2NI3
PrivateKey: uFehWXvcM7mf==c8ZhOe3Fz+6d+zyQ2ja4A3De1N 
```

从动词、url、标题和正文构建一个字符串。建议您使用 SSL 或在 url 中包含 Expire 参数，以防止任何黑客有效地执行重放攻击。确保日期和主机包含在标题中，日期对于确保签名始终在变化非常重要。

```
verb + \n
url + \n
header1: value + \n
header2: value + \n
body 
```

然后客户端使用上述哈希方法对请求进行签名。伪代码看起来像这样。

```
base64encode(hmac-sha1($private_key, $string_to_sign)) 
```

a 标头附加到包含签名和公钥的请求中

```
Authorization: $public_key:$signature 
```

当服务器收到消息时，他们使用标头中收到的公钥为用户检索私钥`Authorization`。然后服务器执行相同的算法，如果两个签名匹配，则服务器知道请求已通过身份验证，因为只有具有正确公钥和私钥的客户端才能生成相同的签名。

这是使用此算法签署请求的 PHP 代码片段。

```
public function sign() {
    $time = time();
    $date = gmdate(self::DATE_FORMAT_RFC2616, $time);
    $verb = $this->payload['verb'];
    $headers = $this->payload['headers'];
    $query = $this->payload['query'];
    $body = $this->payload['body'];

    // Build the content string
    $endpoint = $this->endpoint;        

    // Set the expiration time of the request
    if($this->expires != 0 && !isset($query['Expires'])) {
        $query['Expires'] = $time + ($this->expires * 60);
    }

    // Add the date to the request headers
    $headers['date'] = $date;

    // Add the host to the request headers 
    $headers['host'] = $this->host;

    // Sort the query array and convert to querystring
    uksort($query, 'strnatcasecmp');
    $querystring = SUUtilities::to_query_string($query); 

    // Sort the headers to be sure they're in the right order
    $modified_headers = array();
    uksort($headers, 'strnatcasecmp');

    // Concatinate the headers so the key and value are a single string
    $include = array('date', 'host');
    foreach($headers as $key => $value) {
        if(in_array($key, $include) || substr($key, 0, 5) == "x-sbr") {
            $modified_headers[] = preg_replace('/\s/', '', strtolower($key)).": ".$value;
        }
    }

    // Build the string to sign
    $string_to_sign = $verb.PHP_EOL
        .$endpoint."?".$querystring.PHP_EOL
        .implode(PHP_EOL, $modified_headers).PHP_EOL
        .$body;

    // Create the signature for the request
    $signature = base64_encode(hash_hmac('sha1', $string_to_sign, $this->credentials['private_key'], true));

    // Add the authorization header to the list of headers.
    array_push($modified_headers, 'authorization: SBR '.$this->credentials['key'].':'.$signature);

    $request = array();
    $request['headers'] = $modified_headers;
    $request['host'] = $this->host;
    $request['endpoint'] = $endpoint;
    $request['query'] = $query;     

    return $request;
} 
```

其他资源：

*   [http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)
*   [http://www.layer7tech.com/tutorials/how-to-implement-hmac-api-security](http://www.layer7tech.com/tutorials/how-to-implement-hmac-api-security)
*   [http://rc3.org/2011/12/02/using-hmac-to-authenticate-web-service-requests/](http://rc3.org/2011/12/02/using-hmac-to-authenticate-web-service-requests/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:18:36.830

如果您的客户端丢弃了 cookie，您可以让 REST 服务检查 cookie，如果 cookie 不存在则返回 Forbidden。另一种方法是需要一个参数，该参数采用 URL 的动态片段（随着大多数请求而变化）并使用 REST 服务已知的私钥对其进行 SHA 编码。

# php - php - 将带有双引号和逗号的字符串导出为 csv 格式

> ID：14680789
> 
> 赞同：2
> 
> 时间：2013-02-04T05:18:22.157
> 
> 标签：php, csv

我知道如何将带逗号的字符串处理成csv，将带双引号的字符串处理成csv，

但是如果一个带有逗号和双引号的字符串，如何转换它？

喜欢：

> “改变缅甸：制度、个性和期望”研讨会，2012 年 2 月 10 日；

默认情况下，我在字符串中添加了“”，因此它可以用逗号转换为 csv 文件，

但如果这个字符串也包含“”，那么该字段在 csv 中分为两个字段。

我试过这个：

> ““改变缅甸：制度、个性和期望”研讨会“2012 年 2 月 10 日”

但这是错误的……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:08:48.177

我认为使用[fputcsv()](http://php.net/manual/en/function.fputcsv.php)是避免任何问题的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:35:31.343

这有效：

```
<?php
@unlink( 'test.csv' );
$fp = fopen( 'test.csv', 'w' );

$text = '"Changing Myanmar: Institutions, Personalities and Expectations"';

fwrite( $fp, '"'. str_replace( '"', '""', $text ) . '", "test"' . "\n" );

fclose( $fp );
?> 
```

**从此 csv 文件中读取：**

```
$fp = fopen( 'test.csv', 'r' );

while( ( $data = fgetcsv( $fp, '', ',' ) ) !== false ) {
    echo $data[0];
}

fclose( $fp ); 
```

**输出 -** `"Changing Myanmar: Institutions, Personalities and Expectations"`

希望这可以帮助。

# c - Android gcc sysroot 和链接器

> ID：14680791
> 
> 赞同：1
> 
> 时间：2013-02-04T05:18:30.433
> 
> 标签：c, gcc, android-ndk

我正在使用基于 Ubuntu Linux 10.0.4的 Android [NDK Linux编译一个简单的程序。](http://developer.android.com/tools/sdk/ndk/index.html)

```
//no includes!!!
int main()
{   
    int a = 1, b = 2, c = -1;
    return a + b + c - ( a + b + c);

} 
```

当我为 gcc 运行这个 bash 脚本时，

```
bin='/media/sdb/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin'
rm -r ./obj/*.* 
    $bin/arm-linux-androideabi-gcc -c ./main.c -o ./obj/main.o 
    $bin/arm-linux-androideabi-gcc ./obj/main.o -o ./obj/main.exe 
```

gcc 的输出给出了来自`ld`( [arm-linux-androideabi-ld](http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_mono/ld.html#SEC3) ) 的消息，它以[7 (第二个逗号分隔是 ARM)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)信号终止。

这个简单的程序甚至无法在 Linux 上编译，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:16:28.247

我在 ubuntu 12.4 中安装了静态工具链

```
sudo apt-get install gcc-arm-linux-gnueabi  // install this toolchain 

arm-linux-gnueabi-gcc -static -o main.exe main.c  // this way compile ur binary 
```

通过android机器中的adb复制并运行

```
./main.exe 
```

这适用于我的安卓手机。

**编辑：**

10.04

```
 sudo add-apt-repository ppa:linaro-maintainers/toolchain
    sudo apt-get update
    sudo apt-get install gcc-arm-linux-gnueabi 
```

**Edit2：** 它的静态编译在这里它不使用仿生代码，它通过将库复制到 ELF 中来包含库。

如果你想动态编译或者想依赖仿生代码然后使用

$NDK/docs/STANDALONE-TOOLCHAIN.html [https://android.googlesource.com/platform/ndk/+/master/docs/STANDALONE-TOOLCHAIN.html](https://android.googlesource.com/platform/ndk/+/master/docs/STANDALONE-TOOLCHAIN.html)

# encryption - 有没有办法将文件的扩展名更改为 .txt，将文本复制到新文件，然后在不破坏文件的情况下更改回原始格式？

> ID：14680798
> 
> 赞同：0
> 
> 时间：2013-02-04T05:19:13.737
> 
> 标签：encryption, file-extension

所以我知道这听起来像是一个奇怪的问题，但我问的原因是因为我试图加密一个PowerPoint演示文稿，只是为了好玩。

我知道如果您将文件的扩展名更改为 .txt，您可以在文本编辑器中打开它，我认为此时加密文件的内容不会太难。我的计划是将加密的文本文件（最初是一个 powerpoint）发送给一个朋友，如果我的朋友提供了正确的解密密钥，它会连同一个程序在终端中显示解密的文本。我的想法是，我的朋友可以将这个解密的文本复制到一个新文件中，并将其重命名为 .pptx 以查看演示文稿。（我同意这似乎是一种奇怪的方式，但我认为这是适合我情况的最佳方式。）

但是，如果将文本复制到另一个文件，然后将其重命名为 .pptx 文件，则 powerpoint 将其声明为损坏。我很肯定我复制了所有文本，与原始文件中的完全相同。为什么这不起作用？有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:25:02.560

虽然是一个有趣的想法，但改变扩展名是不够的。ppt 文件的很大一部分将无法正确“翻译”。您实际上可以在记事本中打开任何文件类型（实际上文件扩展名实际上并没有任何意义。它只是一个小标签，因此您的操作系统知道如何解释它。）但是您可以编写一个与您的 powerpoint 相同的 PDF 文件（如只要没有动画）在 LaTeX 中加密源代码并让他使用相同的算法对其进行解密。

tldr; 不会像你想要的那样工作。您将不得不找到其他方法来加密文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:55:43.147

使用标准/现代密码算法的加密要求数据是二进制的。`.pptx`格式似乎是 zip 压缩的XML。这意味着它已经是二进制的。

如果您在文本编辑器中打开它（没有解压缩），您很可能会丢失信息，因为并非所有字节都会转换为可显示的字符。文本编辑器与加密没有任何关系，所以我不明白那一步。

如果您愿意，您也可以在文本编辑器中打开任何文件。将其重命名为`.txt`仅具有在双击（或“启动”）文档时使用默认文本编辑器的效果。

# javascript - Backbone - 如何限制每秒 ajax 请求或创建队列？

> ID：14680799
> 
> 赞同：0
> 
> 时间：2013-02-04T05:19:30.937
> 
> 标签：javascript, backbone.js

就我而言，我加载了一个包含两个请求的集合

1.  找我
2.  交朋友

每个人都提出另一个请求以获取模型中的照片

1.  1 个请求
2.  10 个请求（每个朋友一个）

底线是我有 13 个请求。但是服务器每秒只能处理 3 个请求。我应该怎么办？

**UPD** 远程服务器不是我的。Mb 是错误的，但我的方式已经是：

*   collection.add(collection.getMe()) -> model.init -> model.getphotos-> view.render() (1次)

下一个

*   collection.add(collection.getFriends()) ->... next for eachfriend ... model.init -> model.getphotos->view.render() （10次）

我在骨干上完全是菜鸟。我正在尝试以骨干风格进行编程。但我无法理解如何限制 ajax 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:09:03.313

我会从两个不同的层面来看待这个问题，第一个是设计，第二个是性能优化。

**设计：**

就我个人而言，我会通过创建一个在单个请求中返回所有所需数据的 api 端点来以不同的方式解决这个问题。这可能涉及：

1.  返回单个对象和直接依赖项（get me）的端点，然后
2.  返回特定对象的所有朋友及其依赖项的端点（获取朋友+照片等）

**表现：**

如果问题的原因是因为它已经很慢，那么您可能会考虑设计，但如果您只是担心它会很慢，那么我会继续前进并测量实际性能。花时间优化你认为可能很慢的东西可能被证明是一个错误的策略。

每秒 3 个请求就足够了，N 个请求很可能会排队并连续得到服务。你可能没事。

如果您不满意，那么您可以根据需要（当用户交互或分页等时）更改照片的加载（或之后加载的任何内容），这将确保您使用拉取的内容，并且只拉取您想要的内容利用。

希望这可以帮助！祝你好运！

# php - 通过 ipaddress 将 oracle db 与 odbc 连接，来自另一个系统的数据

> ID：14680803
> 
> 赞同：1
> 
> 时间：2013-02-04T05:19:45.880
> 
> 标签：php, oracle, odbc, ip-address

通过 ipaddress 将 oracle db 与 odbc 连接我需要从我的一个 php 页面通过网络 ip 地址连接 oracle db。

```
$conn=odbc_connect('(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 128.212.160.2:prod)(PORT = 1521))
    (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = XE)))','username','*******'); 
```

这就是执行时得到的

警告：odbc_connect() [function.odbc-connect]: SQL 错误：[Microsoft][ODBC Driver Manager] Invalid string or buffer length, SQL 状态 S1090 in SQLConnect in SQLConnect in C:\xampp\htdocs\oracleconnect\odbccnt.php 在线34

# javascript - 如何修复 webkit-fake-url 的意思？

> ID：14680807
> 
> 赞同：5
> 
> 时间：2013-02-04T05:20:10.260
> 
> 标签：javascript, html, safari

当您尝试复制并粘贴到 Safari 网络浏览器时，浏览器会插入`webkit-fake-url`.

在 Chrome 中，您可以`getAsFile()`在剪贴板数据上读取图像。你能用 Safari 做类似的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T05:21:23.067

不，目前无法在 Safari 中访问粘贴文件的内容。

作为一种解决方法，您可以检测到该虚假协议并向用户显示一条消息，通知他们在使用他们的特定浏览器时它不起作用（并且可能显示正常的上传控件）。

# ruby - 使用 ruby 1.9.x 安装 racc 失败

> ID：14680808
> 
> 赞同：1
> 
> 时间：2013-02-04T05:20:28.637
> 
> 标签：ruby, gem

我真的对宝石有一些问题。我正在尝试为 ruby​​ 安装 racc，以便它可以编译一些 *.y 文件。我正在使用我自己的带有 Ubuntu 的笔记本电脑。我的红宝石之路是

```
$ which ruby
/usr/bin/ruby 
```

我是红宝石的大一新生。我尝试使用 sudo apt-get install racc 安装 racc。但它不起作用。顺便问一下，apt-get 和 gem 有什么区别？

```
$ sudo gem install racc
Building native extensions.  This could take a while...
ERROR:  Error installing racc:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:3:in `<main>'

Gem files will remain installed in /home/jianqing/RubyGems/gems/racc-1.4.9 for inspection.
Results logged to /home/jianqing/RubyGems/gems/racc-1.4.9/ext/racc/gem_make.out 
```

这是有关我的系统的一些信息。

```
$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [i686-linux]
  - INSTALLATION DIRECTORY: /home/jianqing/RubyGems
  - RUBY EXECUTABLE: /usr/bin/ruby1.9.1
  - EXECUTABLE DIRECTORY: /home/jianqing/RubyGems/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /home/jianqing/RubyGems
     - /home/jianqing/.gem/ruby/1.9.1
     - /var/lib/gems/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

任何帮助表示赞赏。我几乎为它疯狂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:06:43.293

我已经解决了。事实证明我需要安装一个完整的红宝石`sudo apt-get install ruby-dev`

# android - MySQL 数据未以表格形式显示

> ID：14680809
> 
> 赞同：0
> 
> 时间：2013-02-04T05:20:30.260
> 
> 标签：android, mysql

图片

![在此处输入图像描述](../Images/6745581b556bb22219febe69929e2d20.png)嗨，我开发了一个使用 MySQL 数据库的应用程序。我有一个检索数据的代码，并试图以数据库的形式显示数据。

[这](http://pastebin.com/DeKsgg1y)是我的 java 代码，它访问数据库并尝试以表格的形式动态打印它。

我的问题是当我在手机上执行时应用程序强制关闭。

我收到以下[错误](http://pastebin.com/BcAqt4yi)。

[这](http://pastebin.com/z8Kha88V)是我的 php 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:26:24.133

用于`TableLayout`以表格的形式显示您的数据。另外要连接到 mySQL 数据库，您需要构建一个连接到数据库的 php 脚本。您还没有显示您的 php 脚本，所以请提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:59:19.540

`java.lang.ClassCastException:`
“抛出表明代码已尝试将对象强制转换为它不是实例的子类。”

您已在 java 类中将 TableLayout 强制转换为 TextView。因此，将 TableLayout 更改为`TextView`XML 布局中的。

[编辑]
**现在知道了：**

为要显示的错误创建一个新的 TextView。然后更改以下行：

```
 error = (TextView) findViewById(R.id.myErrorView); 
```

[编辑 2]
TableLayout 示例（未编译）

XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView 
    android:id="@+id/myHeading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TableLayout Example"
/>

<ScrollView android:layout_width="fill_parent" android:layout_height="wrap_content"> 

<TableLayout
    android:id="@+id/tablelayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"    
    >

<TableRow android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_marginBottom="2dp" android:layout_gravity="center_horizontal">
    <TextView android:id="@+id/tabletv1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="ID" android:textStyle="bold" android:layout_gravity="center_horizontal"/>
    <TextView android:id="@+id/tabletv2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Name" android:textStyle="bold" android:layout_gravity="center_horizontal"/>
    <TextView android:id="@+id/tabletv3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Category" android:textStyle="bold" android:layout_gravity="center_horizontal"/>
    <TextView android:id="@+id/tabletv4" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Category" android:textStyle="bold" android:layout_gravity="center_horizontal"/>
</TableRow>

</TableLayout>
</ScrollView>

</LinearLayout> 
```

Java 类

```
super.onCreate(savedInstanceState);
setContentView(R.layout.myLayout);

TableLayout table = (TableLayout) findViewById(R.id.tablelayout1);
TextView heading = (TextView) findViewById(R.id.myHeading);

// Your other codes

//////////////////////

    for(int i=0;i<jArray.length();i++){
        JSONObject json_data = jArray.getJSONObject(i);

        TableRow row = new TableRow(this);
        TableLayout.LayoutParams tableRowParams= new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT);
        tableRowParams.setMargins(0, 0, 0, 2);
        row.setGravity(Gravity.CENTER_HORIZONTAL);
        row.setLayoutParams(tableRowParams);

        TextView t1 = new TextView(this);
        TextView t2 = new TextView(this);
        TextView t3 = new TextView(this);
        TextView t4 = new TextView(this);

        t1.setText(""+json_data.getInt("prod_id"));
        t2.setText(json_data.getString("prod_name"));
        t3.setText(json_data.getString("prod_category"));
        t4.setText(""+json_data.getDouble("prod_cost"));

        t1.setGravity(Gravity.CENTER_HORIZONTAL);
        t2.setGravity(Gravity.CENTER_HORIZONTAL);
        t3.setGravity(Gravity.CENTER_HORIZONTAL);
        t4.setGravity(Gravity.CENTER_HORIZONTAL);

        row.addView(t1);
        row.addView(t2);
        row.addView(t3);
        row.addView(t4);

        table.addView(row);
    } 
```

希望这可以帮助！

# php - 如何为 json 文件创建 extjs 视图

> ID：14680812
> 
> 赞同：0
> 
> 时间：2013-02-04T05:20:56.623
> 
> 标签：php, json, extjs, yii

我正在使用 extjs + Yii 框架。我的服务器端在 Yii 中，客户端在 extjs 中。我将 yii 框架输出作为输入提供给 extjs。现在从 Yii 我发送 json：

```
CJSON::encode(array("questionId"=>$questionid,"question"=>Question,"Options"=>$optionList,"CorrectOptionId"=>$CorrectId,"UserSelectedOption"=>$Usersoption)); 
```

所以我得到了 json 输出：

```
{"Questions":[
{
            "questionId": 1,
            "question": 'Who will win the series1212?',
            "options": [
                {

                    "optionId":1,
                    "option":'Aus',
                    "questionId":1
                },
                {

                    "optionId": 1,
                    "option": 'india',
                    "questionId":1
                },
                {

                    "optionId": 1,
                    "option": 'England',
                    "questionId":1
                },

            ]
            "CorrectOptionId":1,
            "UserSelectedOption":2,

        } ,{-------}
    ]

} 
```

我有 MVC 格式的代码：

`QbqnsModel.js`

```
Ext.define('Balaee.model.qb.QbqnsModel',{
    extend: 'Ext.data.Model',
    idproperty:'questionId',//fields property first position pk.
    fields: ['questionId','question','languageId','userId','creationTime','questionStatusId','keyword'],
    hasMany:{
            model:'Balaee.model.qb.QbqnsoptionModel',
            foreignKey:'questionId',
            name:'options',
        },
        proxy:
        {
            type:'ajax',
            api:
            {
            },//end of api
            reader:
            {
                    type:'json',
            },//end of reader
            writer:
            {
                    type:'json',

            },//End of writer
        } 
```

`QbQnsStore.js`

```
Ext.define('Balaee.store.qb.QbqnsStore',{
    extend: 'Ext.data.Store',
    model: 'Balaee.model.qb.QbqnsModel',
    autoLoad: true,
    proxy:
    {
        type:'ajax',
        api:
        {

            read:'data/question.json',

        },
        reader:
        {
            type:'json',
            root:'questions',

        }
    }
}); 
```

和 Qbqnsview.js 作为-

```
 Ext.define('Balaee.view.qb.qbqns.QbqnsView',
    {
            extend:'Ext.view.View',
            id:'qbqnsViewId',
            alias:'widget.QbqnsView',
            //store:'kp.PollStore',
            store:'qb.QbqnsStore',
            config:
            {
                tpl:'<tpl for=".">'+
                    '<div id="main">'+
                    '</br>'+
                //  '<b>Question :-</b> {pollQuestion}</br>'+
                    '<h1 id="q">Question :-</h1> {question}</br>'+

        '<tpl for="options">'+     // interrogate the kids property within the data '<tpl if="optionId == parent.UserSelectedOption && optionId != parent.CorrectOptionId">'+
'<p>&nbsp&nbsp<input type="radio" name="{parent.questionId}" value="{option}" class="red">&nbsp{option}</p>'+
'</tpl>'+
'<tpl if="optionId == parent.CorrectOptionId">'+
    '<p>&nbsp&nbsp<input type="radio" name="{parent.questionId}" value="{option}" class="green">&nbsp{option}</p>'+
'</tpl>'+
'<tpl if="optionId != parent.CorrectOptionId && optionId != parent.UserSelectedOption">'+
    '<p>&nbsp&nbsp<input type="radio" name="{parent.questionId}" value="{option}">&nbsp{option}</p>'+
'</tpl>'+
                '</tpl></p>'+
                '<p>---------------------------------------------------------</p>'+
                '</div>'+
                '</tpl>',
            itemSelector:'div.main',    
        }
});// End of login class 
```

它正在正确显示问题及其选项。现在单击按钮，我想再次显示所有问题、选项、其实际正确选项和用户选择的选项。所以我想将上面的 json 输出绑定到 extjs 存储，并想创建视图来显示问题，通过单选按钮选择它，正确的选项为绿色。那么如何设计 extjs 部分来显示这样的视图。我对extjs很陌生...所以请您指导我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:43:27.430

对于您的特定问题 - 使用下面的代码和 in for 循环 -

```
 '<tpl if="optionId == parent.UserSelectedOption && optionId != parent.CorrectOptionId">'+
    '<p>&nbsp&nbsp<input type="radio" name="{parent.questionId}" value="{option}" class="red">&nbsp{option}</p>'+
    '</tpl>'+
    '<tpl if="optionId == parent.CorrectOptionId">'+
        '<p>&nbsp&nbsp<input type="radio" name="{parent.questionId}" value="{option}" class="green">&nbsp{option}</p>'+
    '</tpl>'+
    '<tpl if="optionId != parent.CorrectOptionId && optionId != parent.UserSelectedOption">'+
        '<p>&nbsp&nbsp<input type="radio" name="{parent.questionId}" value="{option}">&nbsp{option}</p>'+
    '</tpl>'+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:38:48.293

您可以使用下面的示例代码 -

```
 var store = new Ext.data.JsonStore({
            url: 'get-images.php',
            root: 'images',
            fields: [
                'name', 'url',
                {name:'size', type: 'float'},
                {name:'lastmod', type:'date', dateFormat:'timestamp'}
            ]
        });
        store.load();

        var tpl = new Ext.XTemplate(
            '<tpl for=".">',
                '<div class="thumb-wrap" id="{name}">',
                '<div class="thumb"><img src="{url}" title="{name}"></div>',
                '<span class="x-editable">{shortName}</span></div>',
            '</tpl>',
            '<div class="x-clear"></div>'
        );

        var panel = new Ext.Panel({
            id:'images-view',
            frame:true,
            width:535,
            autoHeight:true,
            collapsible:true,
            layout:'fit',
            title:'Simple DataView',

            items: new Ext.DataView({
                store: store,
                tpl: tpl,
                autoHeight:true,
                multiSelect: true,
                overClass:'x-view-over',
                itemSelector:'div.thumb-wrap',
                emptyText: 'No images to display'
            })
        });
        panel.render(document.body); 
```

# javascript - 在 sap.m.table 的多个页面上显示更多链接

> ID：14680816
> 
> 赞同：-1
> 
> 时间：2013-02-04T05:21:12.770
> 
> 标签：javascript, jquery, html, sapui5

我有几个动态进入 div 的链接（锚标签）。如果这些链接的数量超过 10，我只希望前十个显示在 page1 上，其余的在 page2 上，依此类推。

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:24:19.273

您要求的是一种称为*paging*的技术。这意味着正如您所说，当项目数量超出指定限制时，只会显示项目的子集。

要进行分页，您需要拥有以下项目：

1.  项目总数
2.  每页中的项目计数
3.  当前页码
4.  一些用于在页面之间导航的导航按钮

整个过程将是这样的：

1.  当页面加载时，你应该计算你拥有的所有链接，然后你应该决定你要在每个页面上显示多少个链接（比如你有 376 个链接，你想每页显示 10 个链接）
2.  您计算您将拥有多少页（总项目/页面项目的简单划分，但您应该采取天花板，以免丢失最后一页）
3.  然后您应该看到用户请求了哪个页面（这是您的工作，通常发生在通过 HTTP AJAX 请求传递参数时）
4.  现在要显示该页面的项目，您只需跳过上一页中的项目，然后获取 10 个项目并渲染它们。

# android - 多列ListActivity

> ID：14680828
> 
> 赞同：0
> 
> 时间：2013-02-04T05:22:51.040
> 
> 标签：android, listview, listactivity, multiple-columns

我在[此链接](http://www.example8.com/node/view/id/84028/This%20link)中找到了以下示例，但是当我运行它时，我强制关闭，我不知道原因，您能帮我解决这个问题吗？还可以解释一下有关人​​员的信息，它们是删除线是不推荐使用 People 的警告！我是android和java编程的新手，请帮助我，任何建议将不胜感激。

以下是代码：
**list.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
        <!-- This file is at /res/layout/list.xml -->
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
            android:layout_width="fill_parent"  android:layout_height="fill_parent">

            <ListView android:id="@android:id/list"
                android:layout_width="fill_parent"  android:layout_height="0dip"
                android:layout_weight="1" />

            <Button android:id="@+id/btn" android:onClick="doClick"
             android:layout_width="wrap_content"  android:layout_height="wrap_content"
             android:text="Submit Selection" />

        </LinearLayout> 
```

**测试班**

```
 package com.example.multicolumnlistview;    
    import android.app.ListActivity;
    import android.database.Cursor;
    import android.os.Bundle;
    import android.provider.Contacts.People;
    import android.util.Log;
    import android.util.SparseBooleanArray;
    import android.view.View;
    import android.widget.ListView;
    import android.widget.SimpleCursorAdapter;     
    public class Test extends ListActivity
    {
        private static final String TAG = "ListViewActivity3";
        private ListView lv = null;
        private Cursor cursor = null;
        private int idCol = -1;
        private int nameCol = -1;
        private int notesCol = -1;     
        @Override
        protected void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);     
            lv = getListView();             
            cursor = managedQuery(People.CONTENT_URI, 
                            null, null, null, People.NAME);     
            String[] cols = new String[]{People.NAME};
            idCol = cursor.getColumnIndex(People._ID);
            nameCol = cursor.getColumnIndex(People.NAME);
            notesCol = cursor.getColumnIndex(People.NOTES);             
            int[] views = new int[]{android.R.id.text1};             
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_multiple_choice,
                cursor, cols, views);             
            this.setListAdapter(adapter);             
            lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        }         
        public void doClick(View view) {
            int count=lv.getCount();
            SparseBooleanArray viewItems = lv.getCheckedItemPositions();
            for(int i=0; i<count; i++) {
              if(viewItems.get(i)) {
                cursor.moveToPosition(i);
                long id = cursor.getLong(idCol);
                String name = cursor.getString(nameCol);
                String notes = cursor.getString(notesCol);
                Log.v(TAG, name + " is checked. Notes: " + notes +
                    ". Position = " + i + ". Id = " + id);
              }
            }
        }
    } 
```

这是**logcat**：

```
02-04 09:04:59.609: E/DatabaseUtils(99):    at android.os.Binder.execTransact(Binder.java:287)
02-04 09:04:59.609: E/DatabaseUtils(99):    at dalvik.system.NativeStart.run(Native Method)
02-04 09:04:59.619: D/ddm-heap(139): Got feature list request
02-04 09:04:59.628: D/AndroidRuntime(220): Shutting down VM
02-04 09:04:59.628: W/dalvikvm(220): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
02-04 09:04:59.628: E/AndroidRuntime(220): Uncaught handler: thread main exiting due to uncaught exception
02-04 09:04:59.639: E/AndroidRuntime(220): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.multicolumnlistview/com.example.multicolumnlistview.Test}: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://contacts/people from pid=220, uid=10029 requires android.permission.READ_CONTACTS
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.os.Looper.loop(Looper.java:123)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.app.ActivityThread.main(ActivityThread.java:4363)
02-04 09:04:59.639: E/AndroidRuntime(220):  at java.lang.reflect.Method.invokeNative(Native Method)
02-04 09:04:59.639: E/AndroidRuntime(220):  at java.lang.reflect.Method.invoke(Method.java:521)
02-04 09:04:59.639: E/AndroidRuntime(220):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
02-04 09:04:59.639: E/AndroidRuntime(220):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
02-04 09:04:59.639: E/AndroidRuntime(220):  at dalvik.system.NativeStart.main(Native Method)
02-04 09:04:59.639: E/AndroidRuntime(220): Caused by: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://contacts/people from pid=220, uid=10029 requires android.permission.READ_CONTACTS
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.os.Parcel.readException(Parcel.java:1218)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.content.ContentProviderProxy.bulkQuery(ContentProviderNative.java:326)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.content.ContentProviderProxy.query(ContentProviderNative.java:345)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.content.ContentResolver.query(ContentResolver.java:202)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.app.Activity.managedQuery(Activity.java:1495)
02-04 09:04:59.639: E/AndroidRuntime(220):  at com.example.multicolumnlistview.Test.onCreate(Test.java:30)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-04 09:04:59.639: E/AndroidRuntime(220):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
02-04 09:04:59.639: E/AndroidRuntime(220):  ... 11 more
02-04 09:04:59.649: I/Process(51): Sending signal. PID: 220 SIG: 3
02-04 09:04:59.659: I/dalvikvm(220): threadid=7: reacting to signal 3
02-04 09:04:59.659: E/dalvikvm(220): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
02-04 09:04:59.739: D/ddm-heap(110): Got feature list request
02-04 09:04:59.769: D/ddm-heap(175): Got feature list request
02-04 09:04:59.779: I/ARMAssembler(51): generated scanline__00000077:03515104_00000000_00000000 [ 33 ipp] (47 ins) at [0x345958:0x345a14] in 388876 ns
02-04 09:04:59.788: I/ARMAssembler(51): generated scanline__00000177:03515104_00001001_00000000 [ 91 ipp] (114 ins) at [0x345a18:0x345be0] in 434133 ns
02-04 09:04:59.849: D/ddm-heap(209): Got feature list request
02-04 09:04:59.979: D/ddm-heap(200): Got feature list request
02-04 09:05:08.918: W/ActivityManager(51): Launch timeout has expired, giving up wake lock!
02-04 09:05:09.202: W/ActivityManager(51): Activity idle timeout for HistoryRecord{44e4c570 com.example.multicolumnlistview/.Test} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:31:31.853

当您阅读设备的联系人时，您需要在清单文件中添加 READ_CONTACT 权限。

> ```
>  <uses-permission android:name="android.permission.READ_CONTACTS"/> 
> ```

我认为这只是问题所在。

**编辑：**

检查带有 Checkbox 的 Listview 的以下链接。

1)[链接 1](http://androidcocktail.blogspot.in/2012/04/adding-checkboxes-to-custom-listview-in.html)
2)[链接 2](http://dj-android.blogspot.in/2012/04/milti-selection-listview-android-with.html)
3)[链接 3](http://eclipseandroid.blogspot.in/2012/02/multicolumn-listview-in-android.html)

# prolog - 8-puzzle 在 prolog 中有一个使用曼哈顿距离的解决方案

> ID：14680829
> 
> 赞同：4
> 
> 时间：2013-02-04T05:22:51.503
> 
> 标签：prolog, knowledge-management, sliding-tile-puzzle

8-puzzle 将由一个 3x3 的列表位置列表表示，其中空框将由值 9 表示，如下所示： [[9,1,3],[5,2,6],[4, 7,8]]

可能解：8 拼图的初始位置只有一半是可解的。有一个公式可以让您从一开始就知道您是否可以解决难题。要确定是否可以解决一个 8 难题，对于每个包含值 N 的方格，计算当前单元格之后有多少小于 N 的数字。以初始状态为例：

![在此处输入图像描述](../Images/d98992da0dcd6e5e464279418ddccb32.png)

*   1 没有小于的数字 = 0
*   空 (9) - 必须随后 3,5,2,6,4,7,8 = 7
*   3 有 = 1 到 2
*   5 随后到 2,4 = 2
*   2 它下面没有数字发生 = 0
*   6 随后是 4 = 1
*   4 没有小于的数字 = 0
*   7 后面没有次要数字 = 0
*   8 没有小于的数字 = 0

之后，我们计算空的位置和位置（3.3）之间的曼哈顿距离。对于上面的例子，空框在位置（1.2），所以曼哈顿距离即：d = abs(3-1) + abs(3-2) = 3 最后将所有计算值相加​​。如果结果是偶数，则表示谜题是可解的，但未解则为奇数。0 +7 +1 +2 +0 +1 +0 +0 +0 +3 = 14

该解决方案旨在创建一个知识库，其中包含板上数字的所有可能状态，我们将看到在当前位置之后有多少小于 N 的数字。

这是我的代码：

```
%***********************Have Solution*********************************

posA(9,8). posA(8,7). posA(7,6). posA(6,5). posA(5,4). posA(4,3). posA(3,2). posA(2,1). posA(1,0).

posB(9,7). posB(8,7). posB(8,6). posB(7,6). posB(7,5). posB(7,4). 
posB(6,5). posB(6,4). posB(6,3). posB(6,2). posB(5,4). posB(5,3). posB(5,2). posB(5,1).  posB(5,0). 
posB(4,3). posB(4,2). posB(3,2). posB(3,1).  posB(2,1). posB(2,0). posB(1,0).

posC(9,6). posC(8,6). posC(8,5). posC(7,6). posC(7,5). posC(7,4). posC(6,5). posC(6,4). posC(6,3).
posC(5,4). posC(5,3). posC(5,2). posC(4,3). posC(4,2). posC(4,1). posC(4,0).
posC(3,2). posC(3,1). posC(3,0). posC(2,1). posC(1,0).

posD(9,5). posD(8,5). posD(8,4). posD(7,5). posD(7,4). posD(7,3). posD(6,5). posD(6,4). posD(6,3).
posD(6,2). posD(5,4). posD(5,3). posD(5,2). posD(5,1). posD(4,3). posD(4,2). posD(4,1). posD(5,0).
posD(3,2). posD(3,1). posD(3,0). posD(2,1). posD(1,0).

posE(9,4). posE(8,4). posE(8,3). posE(7,4). posE(7,3). posE(7,2). posE(6,4). posE(6,3). posE(6,2). posE(6,1).
posE(5,4). posE(5,3). posE(5,2). posE(5,1). posE(5,0). posE(4,3). posE(4,2). posE(4,1). posE(4,0).
posE(3,2). posE(3,1). posE(3,0). posE(2,1). posE(2,0). posE(1,0).

posF(9,3). posF(8,3). posF(8,2). posF(7,1). posF(7,2). posF(7,3). posF(6,0). posF(6,1). posF(6,2). 
posF(6,3). posF(5,0). posF(5,1). posF(5,2). posF(5,3). posF(4,0). posF(4,1). posF(4,2). posF(4,3).
posF(2,0). posF(2,1). posF(3,0). posF(3,1). posF(3,2). posF(1,0).

posG(9,2). posG(8,0). posG(8,1). posG(8,2).  posG(7,0). posG(7,1). posG(7,2).
posG(6,0). posG(6,1). posG(6,2). posG(5,0).  posG(5,1). posG(5,2). posG(4,0). posG(4,1). posG(4,2).
posG(3,0). posG(3,1). posG(3,2). posG(2,0).  posG(2,1). posG(1,0).

posH(9,1). posH(8,0). posH(8,1). posH(7,0). posH(7,1). posH(6,0). posH(6,1). posH(5,0). posH(5,1). 
posH(4,0). posH(4,1). posH(3,0). posH(3,1). posH(2,0). posH(1,1). posH(1,0).

posI(9,0). posI(8,0). posI(7,0). posI(6,0). posI(5,0). posI(4,0). posI(3,0). posI(2,0). posI(1,0).  

haveSolution([[A,B,C],[D,E,F],[G,H,I]]):- distManhattan([A,B,C,D,E,F,G,H,I], Z),
                                         posA(A,Pa), posB(B,Pb), posC(C,Pc),
                                         posD(D,Pd), posE(E,Pe), posF(F,Pf),
                                         posG(G,Pg), posH(H,Ph), posI(I,Pi),
                                         P is Pa+Pb+Pc+Pd+Pe+Pf+Pg+Ph+Pg+Pi+Z, 0 is P mod 2,
                                         write('The 8-puzzle have solution').

%%*************************Manhattan distance***********************
distManhattan([A,B,C,D,E,F,G,H,I], Dist):-  A=9, Dist is abs(3-1)+abs(3-1), !;
                                            B=9, Dist is abs(3-1)+abs(3-2), !;
                                            C=9, Dist is abs(3-1)+abs(3-3), !;
                                            D=9, Dist is abs(3-2)+abs(3-1), !;
                                            E=9, Dist is abs(3-2)+abs(3-2), !;
                                            F=9, Dist is abs(3-2)+abs(3-3), !;
                                            G=9, Dist is abs(3-3)+abs(3-1), !;
                                            H=9, Dist is abs(3-3)+abs(3-2), !;
                                            I=9, Dist is abs(3-3)+abs(3-3). 
```

问题是我犯了一个错误，因为在某些情况下我可以有多个选择，例如>：

```
|  1 |  9 | 3  |
|  5 |  2 | 6  |
|  4 |  7 | 8  |    

posA(1,0)+posB(9,7)+posC(3,1)+posD(5,2)+posE(2,0)+posF(6,1)+posG(4,0)+posH(7,0)+posI(8,0). 
```

posC(C,Pc) 的正确解是 posC(3,1)，即 1；但是还有其他一些后果有时会导致错误的输出......我在我的代码中做错了什么以及如何更改它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-15T22:15:09.240

这个答案从不同的角度看待问题：

*   单板配置使用复合结构表示`board/9`。
*   *相当于滑动单件*的配置是通过关系连接的`m/2`。

所以让我们定义`m/2`！

```
m（板（''，B，C，D，E，F，G，H，I），板（D，B，C，''，E，F，G，H，I））。
m（板（''，B，C，D，E，F，G，H，I），板（B，''，C，D，E，F，G，H，I））。

```

![在此处输入图像描述](../Images/84c83d1401c8837d85f872714162fab3.png) ![在此处输入图像描述](../Images/8063aeced43a6613ee1abf57137812c8.png)
![在此处输入图像描述](../Images/20669ad4865492f618c1d84b01568393.png) ![在此处输入图像描述](../Images/3ae32747e4def296109f71347d4bd217.png)

* * *

```
m（板（A，''，C，D，E，F，G，H，I），板（''，A，C，D，E，F，G，H，I））。
m（板（A，''，C，D，E，F，G，H，I），板（A，C，''，D，E，F，G，H，I））。
m（板（A，''，C，D，E，F，G，H，I），板（A，E，C，D，''，F，G，H，I））。

```

![在此处输入图像描述](../Images/d674a8e1909e765a551ab8e3173414f4.png) ![在此处输入图像描述](../Images/8156b784f07cb074ff486373d3402b37.png) ![在此处输入图像描述](../Images/325bb9f6a7a9a1ad5de4d1e291da45b6.png)
![在此处输入图像描述](../Images/d8973ffc72336d11edb5e8b540f81d48.png) ![在此处输入图像描述](../Images/65c822a242af7b194b1e865a8aa94ccb.png) ![在此处输入图像描述](../Images/f97f0951554b38bcaca8319c23b29874.png)

* * *

```
m（板（A，B，''，D，E，F，G，H，I），板（A，''，B，D，E，F，G，H，I））。
m（板（A，B，''，D，E，F，G，H，I），板（A，B，F，D，E，''，G，H，I））。

```

![在此处输入图像描述](../Images/337e62d36afb5f953efa4a45f367cc49.png) ![在此处输入图像描述](../Images/40f5944981a22148a524ea13d657f083.png)
![在此处输入图像描述](../Images/fd877752f32136082dbd21fd8920175c.png) ![在此处输入图像描述](../Images/1522b6a1495c9447bc5730c2589b923d.png)

* * *

```
m（板（A，B，C，''，E，F，G，H，I），板（''，B，C，A，E，F，G，H，I））。
m（板（A，B，C，''，E，F，G，H，I），板（A，B，C，E，''，F，G，H，I））。
m（板（A，B，C，''，E，F，G，H，I），板（A，B，C，G，E，F，''，H，I））。

```

![在此处输入图像描述](../Images/8e96fda0a3c1e0ff7c6d5edf37f84065.png) ![在此处输入图像描述](../Images/47bb41e88c81dd1dd26560447ca7796c.png) ![在此处输入图像描述](../Images/fbd2e2210b77a148d8413fc5957d0dde.png)
![在此处输入图像描述](../Images/3a96a8b85cebfd349d63b89f450a0fc0.png) ![在此处输入图像描述](../Images/59e89d4938d1644b169cc24ade9837d2.png) ![在此处输入图像描述](../Images/7753c213cd610050eb80504d5f595b36.png)

* * *

```
m（板（A，B，C，D，''，F，G，H，I），板（A，B，C，''，D，F，G，H，I））。
m（板（A，B，C，D，''，F，G，H，I），板（A，''，C，D，B，F，G，H，I））。
m（板（A，B，C，D，''，F，G，H，I），板（A，B，C，D，F，''，G，H，I））。
m（板（A，B，C，D，''，F，G，H，I），板（A，B，C，D，H，F，G，''，I））。

```

![在此处输入图像描述](../Images/3fa7196b5f177b291a8b09e8ddd49176.png) ![在此处输入图像描述](../Images/bb882f2fa0e33f8dced31e656d08dd3b.png) ![在此处输入图像描述](../Images/32484c5a88ef1b77e52c3e86bee57336.png) ![在此处输入图像描述](../Images/60ed446fc756ee37657a792d172320ca.png)
![在此处输入图像描述](../Images/850801f2648cf51d3d3d744f7013fe41.png) ![在此处输入图像描述](../Images/7be935c15333c4aa3191f6bcfdda1cb9.png) ![在此处输入图像描述](../Images/9d77b33205f34c322016398ed2e9ac0b.png) ![在此处输入图像描述](../Images/0d6ba31f2155f6fdc54bfa85cb278393.png)

* * *

```
m（板（A，B，C，D，E，''，G，H，I），板（A，B，''，D，E，C，G，H，I））。
m（板（A，B，C，D，E，''，G，H，I），板（A，B，C，D，''，E，G，H，I））。
m（板（A，B，C，D，E，''，G，H，I），板（A，B，C，D，E，I，G，H，''））。

```

![在此处输入图像描述](../Images/8c86df631a3c9118737b3107cda93b9c.png) ![在此处输入图像描述](../Images/a47b8bcc829c63d199f98d494e873cf6.png) ![在此处输入图像描述](../Images/791f06b59a655da95e19af7166093289.png)
![在此处输入图像描述](../Images/c3767e83f8013f8c2f580749fc445fa2.png) ![在此处输入图像描述](../Images/1f673c193c17829cff20944d5fdcf989.png) ![在此处输入图像描述](../Images/9cf715a267e67340c7805c808f79d751.png)

* * *

```
m（板（A，B，C，D，E，F，''，H，I），板（A，B，C，''，E，F，D，H，I））。
m（板（A，B，C，D，E，F，''，H，I），板（A，B，C，D，E，F，H，''，I））。

```

![在此处输入图像描述](../Images/5bfbeefa0ca904263d94d6a2834bf17b.png) ![在此处输入图像描述](../Images/67f3ef2019f7b2f264ba2aae15d77b4e.png)
![在此处输入图像描述](../Images/3c379488bc90016a320a0da8cf841c36.png) ![在此处输入图像描述](../Images/cbbe55868afaaddc31ff0a5e1f6fa24b.png)

* * *

```
m（板（A，B，C，D，E，F，G，''，I），板（A，B，C，D，''，F，G，E，I））。
m（板（A，B，C，D，E，F，G，''，I），板（A，B，C，D，E，F，''，G，I））。
m（板（A，B，C，D，E，F，G，''，I），板（A，B，C，D，E，F，G，I，''））。

```

![在此处输入图像描述](../Images/20ba76d4b103557ac977f5e51b2fe514.png) ![在此处输入图像描述](../Images/93c9eba75d6c038cffcdb195c5c39f7b.png) ![在此处输入图像描述](../Images/455f3327aa204e2822ff7594a9916d5e.png)
![在此处输入图像描述](../Images/53f4adcdfae3ff11472b50c3c700bab4.png) ![在此处输入图像描述](../Images/3571636f3e6c8760482e9224221a8a0b.png) ![在此处输入图像描述](../Images/b67007ccae6e8416bfa147231ae4c6e0.png)

* * *

```
m（板（A，B，C，D，E，F，G，H，''），板（A，B，C，D，E，''，G，H，F））。
m（板（A，B，C，D，E，F，G，H，''），板（A，B，C，D，E，F，G，''，H））。

```

![在此处输入图像描述](../Images/e843a4017f77d9118bd6cced87709bb4.png) ![在此处输入图像描述](../Images/67996261e5185a54d5d2d06d81f176ee.png)
![在此处输入图像描述](../Images/2ab24fc216c54e22adb115a3e2e54a27.png) ![在此处输入图像描述](../Images/34df961bc20072457b3e0bda247f6e6a.png)

* * *

*快*完成了！为了连接这些步骤，我们将[元谓词](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") [path/4](https://stackoverflow.com/q/30328433/4609915)与`length/2`执行迭代深化一起使用。

以下问题实例来自@CapelliC 的回答：

```
?- length(Path,N), path(m,Path,/* from */ board(1,' ',3,5,2,6,4,7, 8 ),
                               /*  to  */ board(1, 2 ,3,4,5,6,7,8,' ')).
N =  6, Path = [board(1,' ',3,5,2,6,4,7,8), board(1,2,3,5,' ',6,4,7,8),
                board(1,2,3,' ',5,6,4,7,8), board(1,2,3,4,5,6,' ',7,8),
                board(1,2,3,4,5,6,7,' ',8), board(1,2,3,4,5,6,7,8,' ')] ? ;
N = 12, Path = [board(1,' ',3,5,2,6,4,7,8), board(1,2,3,5,' ',6,4,7,8),
                board(1,2,3,5,7,6,4,' ',8), board(1,2,3,5,7,6,' ',4,8),
                board(1,2,3,' ',7,6,5,4,8), board(1,2,3,7,' ',6,5,4,8),
                board(1,2,3,7,4,6,5,' ',8), board(1,2,3,7,4,6,' ',5,8),
                board(1,2,3,' ',4,6,7,5,8), board(1,2,3,4,' ',6,7,5,8),
                board(1,2,3,4,5,6,7,' ',8), board(1,2,3,4,5,6,7,8,' ')] ? ;
...

?- length(Path,N), path(m,Path,/* from */ board(8,7,4,6,' ',5,3,2, 1 ),
                               /*  to  */ board(1,2,3,4, 5 ,6,7,8,' ')).
N = 27, Path = [board(8,7,4,6,' ',5,3,2,1), board(8,7,4,6,5,' ',3,2,1),
                board(8,7,4,6,5,1,3,2,' '), board(8,7,4,6,5,1,3,' ',2),
                board(8,7,4,6,5,1,' ',3,2), board(8,7,4,' ',5,1,6,3,2),
                board(' ',7,4,8,5,1,6,3,2), board(7,' ',4,8,5,1,6,3,2),
                board(7,4,' ',8,5,1,6,3,2), board(7,4,1,8,5,' ',6,3,2),
                board(7,4,1,8,5,2,6,3,' '), board(7,4,1,8,5,2,6,' ',3),
                board(7,4,1,8,5,2,' ',6,3), board(7,4,1,' ',5,2,8,6,3),
                board(' ',4,1,7,5,2,8,6,3), board(4,' ',1,7,5,2,8,6,3),
                board(4,1,' ',7,5,2,8,6,3), board(4,1,2,7,5,' ',8,6,3),
                board(4,1,2,7,5,3,8,6,' '), board(4,1,2,7,5,3,8,' ',6),
                board(4,1,2,7,5,3,' ',8,6), board(4,1,2,' ',5,3,7,8,6),
                board(' ',1,2,4,5,3,7,8,6), board(1,' ',2,4,5,3,7,8,6),
                board(1,2,' ',4,5,3,7,8,6), board(1,2,3,4,5,' ',7,8,6),
                board(1,2,3,4,5,6,7,8,' ')] ? ;
N = 29, Path = [...] ? ;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:39:09.700

这是一个*求解器*，而不是原始问题的答案。Joel76 已经在评论中解决了这个问题，因此当他回答时，他将获得应有的声誉。

但是 8-puzzle 解决起来很有趣，并且带来了一些效率问题。这是我的最大努力，我使用库（[nb_set](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.13%27,swi%28%27/doc/Manual/nb_set.html%27%29%29)）试图在*完整*的解决方案枚举上实现合理的效率。

注意：需要 nb_set 来跟踪失败路径上的*访问*。另一种选择是，`:- dynamic visited/1.`但结果太慢了。

```
/*  File:    8-puzzle.pl
    Author:  Carlo,,,
    Created: Feb  4 2013
    Purpose: solve 8-puzzle
*/

:- module(eight_puzzle,
      [eight_puzzle/3
      ]).

:- use_module(library(nb_set)).

% test cases from Stack Overflow thread with Joel76
test0(R) :- eight_puzzle([1,2,3,4,5,6,7,8,0], [1,0,3, 5,2,6, 4,7,8], R).
test1(R) :- eight_puzzle([1,2,3,4,5,6,7,8,0], [8,7,4, 6,0,5, 3,2,1], R).

%%  eight_puzzle(+Target, +Start, -Moves) is ndet
%
%   public interface to solver
%
eight_puzzle(Target, Start, Moves) :-
    empty_nb_set(E),
    eight_p(E, Target, Start, Moves).

%%  -- private here --

eight_p(_, Target, Target, []) :-
    !.
eight_p(S, Target, Current, [Move|Ms]) :-
    add_to_seen(S, Current),
    setof(Dist-M-Update,
          (  get_move(Current, P, M),
         apply_move(Current, P, M, Update),
         distance(Target, Update, Dist)
          ), Moves),
    member(_-Move-U, Moves),
    eight_p(S, Target, U, Ms).

%%  get_move(+Board, +P, -Q) is semidet
%
%   based only on coords, get next empty cell
%
get_move(Board, P, Q) :-
    nth0(P, Board, 0),
    coord(P, R, C),
    (   R < 2, Q is P + 3
    ;   R > 0, Q is P - 3
    ;   C < 2, Q is P + 1
    ;   C > 0, Q is P - 1
    ).

%%  apply_move(+Current, +P, +M, -Update)
%
%   swap elements at position P and M
%
apply_move(Current, P, M, Update) :-
    assertion(nth0(P, Current, 0)), % constrain to this application usage
    ( P > M -> (F,S) = (M,P) ; (F,S) = (P,M) ),
    nth0(S, Current, Sv, A),
    nth0(F, A, Fv, B),
    nth0(F, C, Sv, B),
    nth0(S, Update, Fv, C).

%%  coord(+P, -R, -C)
%
%   from linear index to row, col
%   size fixed to 3*3
%
coord(P, R, C) :-
    R is P // 3,
    C is P mod 3.

%%  distance(+Current, +Target, -Dist)
%
%   compute Manatthan distance between equals values
%
distance(Current, Target, Dist) :-
    aggregate_all(sum(D),
              (   nth0(P, Current, N), coord(P, Rp, Cp),
              nth0(Q, Target, N), coord(Q, Rq, Cq),
              D is abs(Rp - Rq) + abs(Cp - Cq)
              ), Dist).

%%  add_to_seen(+S, +Current)
%
%   fail if already in, else store
%
add_to_seen(S, [A,B,C,D,E,F,G,H,I]) :-
    Sig is
    A*100000000+
    B*10000000+
    C*1000000+
    D*100000+
    E*10000+
    F*1000+
    G*100+
    H*10+
    I,
    add_nb_set(Sig, S, true) 
```

Joel76 在我的第一次尝试中展示了这个错误的测试用例：

```
?- time(eight_puzzle:test1(R)).
% 25,791 inferences, 0,012 CPU in 0,012 seconds (100% CPU, 2137659 Lips)
R = [5, 8, 7, 6, 3, 0, 1, 2, 5|...] ;
% 108,017 inferences, 0,055 CPU in 0,055 seconds (100% CPU, 1967037 Lips)
R = [5, 8, 7, 6, 3, 0, 1, 2, 5|...] ;
% 187,817,057 inferences, 93,761 CPU in 93,867 seconds (100% CPU, 2003139 Lips)
false. 
```

# asp.net - 使用一个模板字段隐藏自动生成的网格视图的列

> ID：14680832
> 
> 赞同：3
> 
> 时间：2013-02-04T05:23:06.617
> 
> 标签：asp.net, vb.net

我在这里有来自 visitid 等的自动生成的列。然而，第一列是一个模板字段。现在我想隐藏 VisitID。我试过这段代码，但没有用。我使用 vb 作为我的代码隐藏

```
e.Row.Cells(1).Visible = False 
```

![在此处输入图像描述](../Images/71176fc55dddcae40b36b77201246749.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T06:36:03.023

我尝试了几种方法，但也以这段代码结束，最后我只是添加了一个条件。对不起，也许我缺乏信息。我在 gridview 中有一个分页。这是我的工作代码。

```
Protected Sub Gdvisitor_RowCreated(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles Gdvisitor.RowCreated
    If (e.Row.Cells.Count > 1) Then
        e.Row.Cells(1).Visible = False
    End If
End Sub 
```

起初它是“....cells.count < 0”，但这不起作用，索引仍然超出范围，但是当我将其更改为 1 时。它起作用了。我认为分页与它有关。我不确定...谢谢您的所有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:25:53.150

要隐藏列，您需要将列而不是单元格的可见设置为 false。

```
gridView1.Columns(1).Visible = False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T05:27:50.357

试试这个 ...

```
 GridView.Columns(1).Visible = false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T05:49:59.840

试试这个...

```
 gridview name.columns(column number).visible=false; 
```

如果您想隐藏第三列，请使用上面的代码：

```
 gridview name.columns(3).visible=false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-29T09:40:24.603

无法隐藏自动生成网格的列。如果你做一个检查，`dg.columns.count`你会得到`0`而不是`6`.

为每个使用一个模板列或使用 jQuery 执行此操作。

# oracle - 在使用 sql developer 之前是否需要安装 oracle db？

> ID：14680835
> 
> 赞同：0
> 
> 时间：2013-02-04T05:23:47.163
> 
> 标签：oracle, oracle-sqldeveloper

在使用 sql developer 之前是否需要安装 oracle db？我刚刚安装了 Oracle Sql Developer，我收到一个消息框：“输入 java.exe 的完整路径名”。

在我看来，Oracle Sql 开发人员就像 Sql Server Management Studio，它在 Sql Server 之上工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T05:28:32.097

您需要的第一件事是安装 JDK。消息输入“java.exe 的完整路径名”指的是那个。您需要在已安装的 JDK 中提供“bin”文件夹的路径

之后，是的，您需要在您的 PC 上安装一个数据库，或者远程访问的数据库也足够了。SQL 开发人员只提供一个 UI 来运行您的 SQL、PL/SQL 查询。它是 IDE，而不是数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:04:48.420

Oracle 数据库包括 SQL Developer，但 SQL Developer 不包括数据库。您有几个选项可以快速启动和运行。

[http://www.thatjeffsmith.com/archive/2012/12/i-have-oracle-sql-developer-installed-now-what/](http://www.thatjeffsmith.com/archive/2012/12/i-have-oracle-sql-developer-installed-now-what/)

从技术上讲，您可以在没有任何数据库的情况下使用 SQL Developer。它具有离线编辑器、数据建模组件和其他不需要数据库连接的功能。

# javascript - 创建新标签时更改 select2 自动选择标签

> ID：14680837
> 
> 赞同：3
> 
> 时间：2013-02-04T05:24:05.650
> 
> 标签：javascript, jquery, jquery-select2

我正在使用 select2，我已经设置好了，所以如果它们不存在，我可以创建新标签。

这一切都很好，但我的一个错误是“新标签”是自动选择的标签，这导致了很多虚假的、意外创建的标签。

我想要的是“新标签”像往常一样显示在顶部，

但是，如果有其他子匹配选项，那么应该选择最接近的匹配，如果用户希望创建新标签，则可以按向上箭头。

当“scrum”标签已经存在时，这是我在输入“scrum”时想要出现的内容：

![最优选择](../Images/372f30589f485e10bcb331b696789b63.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T10:51:03.040

我知道那很旧，但是我在寻找其他东西时提出了这个问题。

自动选择的默认行为是选择第一个匹配选项。在这里，据我所知，如果按 asc 排序，“Scrum”会在“Scrums”之前。这就是为什么它选择“Scrum”（最后没有“s”）。如果新创建的选项是“Scrumss”，并且选项中没有“Scrum”，那么“Scrums”将通过自动选择被选中。

我想您已经解决了您的问题，但不想留下未回答的问题:)

如果这不是问题或我误会了你，请写评论。

# kendo-ui - 带有查询字符串的 KendoMobile UI 模板

> ID：14680845
> 
> 赞同：-1
> 
> 时间：2013-02-04T05:24:51.647
> 
> 标签：kendo-ui

更新 -

```
 <script id="clientEvals-template" type="text/x-kendo-template">

    <ul data-role="listview" data-style="inset">

        <li>
            <a href="\\#view-evalDetail?user_id=${client_id}&amp;eval_id=${eval_id}">${entry_stamp}</a>
        </li>

    </ul>

</script> 
```

似乎字符喜欢？kendomobile 模板中包含的 = 会破坏本地链接

即这不会工作：

```
 <ul data-role="list-view">

        <li><a href="\\#view-evalDetail?eval_id=${eval_id}">${entry_stamp}</a></li>

        </ul>

    </script> 
```

但这将起作用（没有查询字符串

```
 <script id="clientEvals-template" type="text/x-kendo-template">

        <ul data-role="list-view">

        <li><a href="\\#view-evalDetail">${entry_stamp}</a></li>

        </ul>

    </script> 
```

我试过用多个字符转义这个，即 \ \ // 等等。现在运气

任何人都知道如何格式化，以便通过查询字符串找到本地视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:19:19.703

这是一个已知问题，已在当前服务包版本中解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:02:37.190

解决方法是在任何 icenium 模板脚本区域中使用 html 编码内联格式化所有 & 符号

IE。

```
<!-- always use inline html encoding in icenium template scripts ie. &amp; -->

        <script id="clientEvals-template" type="text/x-kendo-template">

        <ul data-role="listview" data-style="inset">

            <li>
                <a href="\\#view-evalDetail?user_id=${client_id}&amp;eval_id=${eval_id}">${entry_stamp}</a>
            </li>

        </ul>

    </script> 
```

# libreoffice - LO Writer：PDF 导出时表格边框消失

> ID：14680852
> 
> 赞同：7
> 
> 时间：2013-02-04T05:25:34.497
> 
> 标签：libreoffice

我在 Writer 文档中有一个表格。在文档中，表格边框是可见的。

问题是当我将文档导出为 PDF 文件时。边界消失。

是否有可能改变这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-17T18:47:00.167

即使表格没有边框来帮助您进行编辑，Writer 编辑窗口也会显示一个细灰色边框。您可以转到“文件”->“打印预览”来查看文档在 PDF 导出或打印时的样子。

# php - 是否可以使用 php 获取网页 flash 部分的链接？

> ID：14680853
> 
> 赞同：0
> 
> 时间：2013-02-04T05:25:42.527
> 
> 标签：php

我正在努力在 php 中获取网页上的链接。网页的非 Flash 部分已完成，但我无法获取网页 Flash 部分上的链接。我想知道是否有可能使用代码来获取它？如果是这样，请指导我正确的方向。

# android - 使用自定义数组适配器在列表视图中搜索

> ID：14680859
> 
> 赞同：0
> 
> 时间：2013-02-04T05:26:19.300
> 
> 标签：android, android-layout, android-listview, android-arrayadapter

我是android新手，任何人都可以发布以下场景的代码。

我有一组数据，如名字、姓氏、日期和 id 从 arraylist 到要显示的列表视图，我需要通过 id 过滤它，当我单击缩减列表视图中的任何项目时，我需要传递 id 以便我可以在另一个活动中单独显示该特定项目的详细信息，我使用了自定义 ArrayAdapter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:37:15.337

我创建了一个演示项目，它完全符合您的需要，但是是的，您需要为此扩展 BaseAdapter 而不是使用 ArrayAdapter。这是整个源代码，

[搜索自定义适配器](https://stackoverflow.com/questions/14118309/how-to-use-search-functionality-in-custom-list-view-in-android/14119383#14119383)

我希望它会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:31:22.733

这里有一个很好的教程完全适合您的要求。你可以通过它

[Android中的Listview名称搜索](http://rakhi577.wordpress.com/2012/06/26/buttons-on-list-view-with-easy-searching-in-android/)

# xml - 在 BizTalk Orchestration 中生成自动 XML

> ID：14680860
> 
> 赞同：0
> 
> 时间：2013-02-04T05:26:21.647
> 
> 标签：xml, biztalk, biztalk-orchestrations

我想在 BizTalk 编排起点中生成一个 XML。我的意思是在编排开始时，我希望自动生成 XML 并启动流程。实际上，这将是一种“PING”类型的东西，它会经常调用一些服务。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:10:15.617

你能更具体一点吗？

在特定时间/时间间隔（没有传入消息）“自行”触发 BizTalk 业务流程[需要一种解决方法](http://social.msdn.microsoft.com/Forums/en-US/biztalkgeneral/thread/3734729d-9361-44e0-80f9-785828c24f77/)- [BizTalk 计划任务适配器](http://www.codeplex.com/BizTalkScheduledTask)通常是一个不错的选择。

（并假设您的 Ping 服务位于 BizTalk 的下游） - 创建一个“静态”消息作为请求发送到您的“ping”服务之前[也已](http://blog.sabratech.co.uk/2008/03/creating-message-from-scratch.html) [介绍过](https://stackoverflow.com/questions/313269/what-is-the-best-way-to-create-a-new-message-within-a-biztalk-orchestration)。最简单的选择可能是使用上面的虚拟触发消息（激活编排）作为 Map 中的源模式，然后将常量值设置到您的“ping”消息中。

# php - PHPUnit 测试用例中的常量

> ID：14680862
> 
> 赞同：3
> 
> 时间：2013-02-04T05:26:25.460
> 
> 标签：php, unit-testing, phpunit

我的 php 函数中有一个 const 限制，如下所示。

```
 const limit = 5 ;
 function limit_check($no_of_page)
 {
       if($no_of_page < const limit)
       return true;       else    return false;
 } 
```

现在我想使用 PHPUnit 编写单元案例，但在单元案例中我想重置限制，这样如果有人重置限制，我的测试用例就不会失败。如何在我的单元测试函数中设置 php const？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:31:49.133

通常，您出于编码原因设置了此限制，因此，您应该检查并强制执行此限制，因为它可能有存在的原因。但是，如果没有，那么您可能会有更多类似以下的内容：

```
class FOO
{
    const limit = 5;
    private $PageNumberLimit;

    public function __construct($PageLimit = self::limit)
    {
        $this->SetPageLimit($PageLimit);
    }

    public function SetPageLimit($PageLimit)
    {
        $this->PageNumberLimit = $PageLimit;
    }

    public function limit_check($no_of_page)
    {
        if($no_of_page < $this->PageNumberLimit)
            return true;
        else
            return false;
    }
} 
```

然后是测试：

```
class FOO_TEST extends PHPUnit_Framework_TestCase
{
    protected $FooClass;

    protected function setUp()
    {
        $this->FooClass = new FOO();
    }

    public function testConstantValue()
    {
        $ReflectObject = new ReflectionClass('FOO');
        $this->assertEquals(5, $ReflectObject->getConstant('limit'), 'Test that the default Page Limit of 5 was not changed');
    }

    public function testDefaultLimitUsed()
    {
        $ReflectObject = new ReflectionClass('FOO');
        $this->assertEquals($ReflectObject->getConstant('limit'), $this->FooClass->PageNumberLimit, 'Test that the default Page Limit is used by matching value to constant.');
    }

    public function testlimit_check()
    {
        $this->assertTrue($this->FooClass->limit_check(4), 'Page Number is less than Limit');
        $this->assertFalse($this->FooClass->limit_check(5), 'Page Number is equal to Limit');
        $this->assertFalse($this->FooClass->limit_check(6), 'Page Number is greater than Limit');
    }

    public static function PageNumberDataProvider()
    {
        return array(
            array(4),
            array(5),
            array(6),
            );
    }

    /**
     * @dataProvider PageNumberDataProvider
     */
    public function testSetPageLimitWithConstructor($NumberOfPages)
    {
        $Foo = new FOO($NumberOfPages);         // Create the class using the constructor

        $this->assertTrue($Foo->limit_check($NumberOfPages - 1), 'Page Number is less than Limit');
        $this->assertFalse($Foo->limit_check($NumberOfPages), 'Page Number is equal to Limit');
        $this->assertFalse($Foo->limit_check($NumberOfPages + 1), 'Page Number is greater than Limit');
    }

    /**
     * @dataProvider PageNumberDataProvider
     */
    public function testSetPageLimitWithSetPageLimit($NumberOfPages)
    {
        $this->FooClass->SetPageLimit($NumberOfPages);          // Set the number using the public function

        $this->assertTrue($Foo->limit_check($NumberOfPages - 1), 'Page Number is less than Limit');
        $this->assertFalse($Foo->limit_check($NumberOfPages), 'Page Number is equal to Limit');
        $this->assertFalse($Foo->limit_check($NumberOfPages + 1), 'Page Number is greater than Limit');
    }
} 
```

# android - 使用 CursorLoader 获取电子邮件会导致电子邮件重复

> ID：14680865
> 
> 赞同：10
> 
> 时间：2013-02-04T05:26:39.867
> 
> 标签：android, android-contacts, android-cursorloader

我正在尝试获取使用联系人的电子邮件 ID。为此，我正在使用光标加载器。还有一个问题，我也收到重复的电子邮件 ID。如何删除电子邮件重复。我应该使用原始查询“SELECT DISTINCT”而不是使用 CursorLoader 还是有其他解决方案？

```
@Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
    String[] projection = new String[] { ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME, ContactsContract.CommonDataKinds.Email.DATA};
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + "  COLLATE LOCALIZED ASC";
    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP +"='1' AND " + Email.DATA +" IS NOT NULL AND " + Email.DATA +" != \"\" " ;

    //showing only visible contacts  
    String[] selectionArgs = null;
    return new CursorLoader(this, ContactsContract.CommonDataKinds.Email.CONTENT_URI, projection, selection, selectionArgs, sortOrder);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T21:38:06.433

我最近遇到了这个问题。CursorLoader 似乎没有“DISTINCT”的实现。我的解决方法在 onLoadFinish 方法中添加了几行，并扩展了 BaseAdapter 以接受 List 参数：

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String projection[] = {
            CommonDataKinds.Phone._ID,
            CommonDataKinds.Phone.DISPLAY_NAME,
    };      
    String select = "((" + CommonDataKinds.Phone.DISPLAY_NAME + " NOTNULL) and " + CommonDataKinds.Phone.HAS_PHONE_NUMBER + " > 0)";
    String sort = CommonDataKinds.Phone.DISPLAY_NAME + " ASC";

    CursorLoader loader = new CursorLoader(
            mContext, 
            CommonDataKinds.Phone.CONTENT_URI,
            projection,
            select,
            null,
            sort
            );  

    return loader;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    List<String> displayNames = new ArrayList<String>();
    cursor.moveToFirst();

    while(!cursor.isAfterLast()){
        String name = cursor.getString(cursor.getColumnIndex(CommonDataKinds.Phone.DISPLAY_NAME));

        if(!displayNames.contains(name))
            displayNames.add(name);

        cursor.moveToNext();
    }

    mAdapter.swapCursor(displayNames);
} 
```

这是我的 BaseAdapter 类：

```
public class AdapterAddContacts extends BaseAdapter{
private List<String> mData = new ArrayList<String>();
private Context mContext;

public AdapterAddContacts(Context context,List<String> displayNames){
    mData = displayNames;
    mContext = context;
}   

@Override
public int getCount() {
    if(mData != null)
        return mData.size();
    else
        return 0;
}

@Override
public Object getItem(int pos) {
    return mData.get(pos);
}

@Override
public long getItemId(int id) {
    return id;
}

@Override
public View getView(int pos, View convertView, ViewGroup parent) {
    LayoutInflater inflater = LayoutInflater.from(mContext);
    View view = inflater.inflate(R.layout.entry_add_contacts,parent,false);

    String data = mData.get(pos);                           

    TextView textName = (TextView)view.findViewById(R.id.my_contacts_add_display_name);
    textName.setText(data);
    textName.setTag(data);          

    return view;
}   

public void swapCursor(List<String> displayNames){
    mData = displayNames;
    this.notifyDataSetChanged();
} 
```

您应该能够根据您的需要专门修改它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-20T12:40:25.173

受@mars 启发，我有一个不需要修改适配器的解决方案。这个想法是删除光标的重复项；由于没有办法做到这一点，我们创建一个没有重复项的新光标。

所有代码都在`onLoadFinished`：

```
@Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {

        MatrixCursor newCursor = new MatrixCursor(PROJECTION); // Same projection used in loader 
        if (cursor.moveToFirst()) {
            String lastName = "";
            do {
                if (cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)).compareToIgnoreCase(lastName) != 0) {

                    newCursor.addRow(new Object[]{cursor.getString(0), cursor.getString(1), cursor.getString(2) ...}); // match the original cursor fields
                    lastName =cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                }
            } while (cursor.moveToNext());
        }
        mContactsAdapter.swapCursor(newCursor);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-08T04:03:16.430

我在我的项目中使用了一个小技巧——一个 SQL 注入，就像这样：

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return new CursorLoader(
            this,
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            new String[] {
                "DISTINCT "+ MediaStore.Images.Media.BUCKET_ID,
                MediaStore.Images.Media.BUCKET_DISPLAY_NAME},
            null, null, null);
} 
```

此代码仅返回库中的捆绑包名称及其 ID。所以，我会这样重写你的代码：

```
@Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
    String[] projection = new String[] {
        "DISTINCT " + ContactsContract.Contacts._ID,
        ContactsContract.Contacts.DISPLAY_NAME,
        ContactsContract.CommonDataKinds.Email.DATA};
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + "  COLLATE LOCALIZED ASC";
    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP +"='1' AND " + Email.DATA +" IS NOT NULL AND " + Email.DATA +" != \"\" " ;

    //showing only visible contacts  
    String[] selectionArgs = null;
    return new CursorLoader(this, ContactsContract.CommonDataKinds.Email.CONTENT_URI, projection, selection, selectionArgs, sortOrder);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-08T04:28:36.473

您可以将[setDistinct](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#setDistinct%28boolean%29)放在您的内容提供者中。

```
 @Override 
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    ...
    final SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
    qb.setDistinct(true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-16T09:39:15.160

如果您担心性能并且不想在 onLoadFinished() 中再次使用光标，那么有一个小技巧

我结合了 SO 的以下两种解决方案。

1.  [在android sqlite中选择不同的值](https://stackoverflow.com/a/13879436/1000864)

2.  [带有 rawQuery 的 CursorLoader](https://stackoverflow.com/a/12090140/1000864)

这是我的工作解决方案：

```
 @Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    String tableName;

    /*
     * Choose the table to query and a sort order based on the code returned
     * for the incoming URI.
     */
    switch (uriMatcher.match(uri)) {
        case NOTIFICATION:
            tableName = NOTIFICATIONS_TABLE_NAME;

            break;

        case NOTIFICATION_TIMESTAMP:

            Cursor cursor = db.query(true, NOTIFICATIONS_TABLE_NAME, projection, selection, selectionArgs, TIMESTAMP, null, sortOrder, null);
            cursor.setNotificationUri(getContext().getContentResolver(), uri);

            return cursor;

        case DOWNLOAD:
            tableName = DOWNLOADS_TABLE;
            break;
        default:
            throw new IllegalArgumentException("Unknown URI " + uri);
    }

    if (selection != null) {
        selection = selection + "=?";
    }

    Cursor cursor = db.query(tableName, projection, selection, selectionArgs, null, null, sortOrder);

    // Tell the cursor what uri to watch, so it knows when its source data
    // changes
    cursor.setNotificationUri(getContext().getContentResolver(), uri);
    return cursor;
} 
```

如果您在这种情况下看到表名相同，则前两种情况是，但我创建了一个虚拟 Uri 来实现这一点。可能不是一个很好的方法，但效果很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-24T19:09:16.757

`DISTINCT`我找到了在选择数组中使用关键字的解决方案。

```
String[] projection = new String[] { ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME, "DISTINCT" + ContactsContract.CommonDataKinds.Email.DATA}; 
```

# c - 位置相关代码和位置无关代码有什么区别？

> ID：14680867
> 
> 赞同：9
> 
> 时间：2013-02-04T05:27:04.883
> 
> 标签：c

位置相关代码和位置无关代码有什么区别？

还有我们如何通过示例实现/调用我们自己的静态和动态库？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T05:48:19.973

与位置无关的代码可以在代码加载到内存中的任何位置正确运行。这通常是通过对函数调用使用相对跳转来实现的，相对跳转，跳转地址是从代码流中的当前位置计算出来的，所以代码可能看起来像：“从当前位置跳转 585 字节”或“跳转 5745 字节”从这个模块的基地址”而不是“跳转到地址 0x46fae55”。同样，对于引用内存地址的任何其他指令，必须相对于当前代码位置或相对于在运行时确定的基地址写入。

内存管理单元 (MMU) 和虚拟内存地址的使用使得与位置无关的代码对于可执行文件来说几乎是过时的。但是，共享库必须编写为与位置无关的代码，因为它们可以映射到可执行文件地址空间中的任何位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T05:36:50.747

在早期的计算机中，代码是依赖于位置的：每个程序都被构建为加载到特定地址并从其运行。为了同时使用不同的程序运行多个作业，操作员必须仔细安排作业，以便没有两个同时的作业会运行需要相同加载地址的程序。

例如，如果工资单程序和应收账款程序都被构建为在地址 32K 上运行，那么操作员就不能同时运行这两个程序。有时，操作员会保留多个版本的程序，每个版本都针对不同的加载地址构建，以扩展他的选择。

为了使事情更灵活，发明了与位置无关的代码。与位置无关的代码可以从操作员选择加载它的任何地址运行。与位置无关的代码不仅用于协调用户级应用程序的工作，而且还用于操作系统内部。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T08:14:17.080

补充一下 Lie Ryan 的答案——这不是 c 编程语言的问题，而是系统架构的问题。

例如，intel x86 分段架构支持半自动定位独立加载 .com 格式的小型可执行文件，其中操作系统可以将 cs=ds=es=ss 加载到 2^16 个不同的值。

OTOH 的 .exe 格式引入了“重定位”，这意味着在可执行文件中有一个偏移量数组（相对于二进制文件的加载地址），必须添加加载地址：例如。

```
 relocation_table:  // list of values to be modified
          0022, 0100, ...
  .text 
  0020:   xx yy 12 00      mov ax,[0x0012]   <-- the "absolute address" 0012 is
  // located at address 0022 in the binary -- that has to be added with the real 
  // location of the the "position-independent" code 
```

# javascript - JQuery 动画队列永不停止

> ID：14680869
> 
> 赞同：1
> 
> 时间：2013-02-04T05:27:30.257
> 
> 标签：javascript, jquery, animation

按照教程，我使用 JQuery 创建了一个简单的下拉菜单。链接： [http ://wabism.com/development/jquerydropdown/](http://wabism.com/development/jquerydropdown/)

它的 jQuery 代码是这样的：

```
$('body').ready(function() {

                // Add the 'hover' event listener to our drop down class
        $('.dropdown').hover(function() {
                        // When the event is triggered, grab the current element 'this' and
                        // find it's children '.sub_navigation' and display/hide them
            $(this).find('.sub_navigation').slideToggle(); 
        });
    }); 
```

下拉菜单工作正常，有 1 个错误。如果您快速滚动和退出菜单项 3 或 4 次，它会执行所有 3 或 4 个 slidetoggle() 。我怎样才能克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T05:29:30.160

`.stop()`动画前使用方法。

正如您所描述的，jQuery 中的动画将被排队并执行所有动画，除非您明确指定要停止任何待处理的动画。你可以使用`.stop()`函数来做到这一点。在你的情况下，你应该写：

```
$(this)
.find('.sub_navigation')
.stop()
.slideToggle(); 
```

它也有一些参数可以为您提供更细粒度的控制。见[这里](http://api.jquery.com/stop/)。

# iphone - 使 UINavigationBar 标题为用户可编辑

> ID：14680871
> 
> 赞同：1
> 
> 时间：2013-02-04T05:27:41.650
> 
> 标签：iphone, ios, objective-c, uinavigationbar

如何使`UINavigationBar`标题成为用户可编辑的，我尝试将其设置`titleView`为文本字段，但它看起来不一样。它缺少那个轮廓或阴影。我的目标是让它看起来像默认的。

这就是我目前正在实施的：

```
 _titleField = [[UITextField alloc]initWithFrame:CGRectMake(0, 0, 200, 26)];
[_titleField setDelegate:self];
_titleField.text = _bugDoc.data.title;
_titleField.font = [UIFont boldSystemFontOfSize:20];
_titleField.textColor = [UIColor whiteColor];
_titleField.textAlignment = NSTextAlignmentCenter;
self.navigationItem.titleView = _titleField; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:11:02.233

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self loadTitle];
}
- (void)loadTitle
{
    txtField_navTitle = [[UITextField alloc] initWithFrame:CGRectMake(self.view.bounds.origin.x,7,self.view.bounds.size.width,31)];
    txtField_navTitle.delegate = self;
    [txtField_navTitle setBackgroundColor:[UIColor clearColor]];
    txtField_navTitle.textColor = [UIColor whiteColor];
    txtField_navTitle.textAlignment = UITextAlignmentCenter;
    txtField_navTitle.borderStyle = UITextBorderStyleNone;
    txtField_navTitle.font = [UIFont boldSystemFontOfSize:20];
    txtField_navTitle.autocorrectionType = UITextAutocorrectionTypeNo;
    txtField_navTitle.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    [self.navigationItem setTitleView:txtField_navTitle];
    txtField_navTitle.layer.masksToBounds = NO;
    txtField_navTitle.layer.shadowColor = [UIColor whiteColor].CGColor;
    txtField_navTitle.layer.shadowOpacity = 0;
    [txtField_navTitle release];
}
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    self.title = textField.text;
    return YES;
} 
```

**请不要忘记** `#import <QuartzCore/QuartzCore.h>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T06:15:01.677

试试这种方式，这对我有用。

```
 // Custom Navigation Title.

     UILabel* tlabel=[[UILabel alloc] initWithFrame:CGRectMake(0,0, 300, 40)];
     tlabel.text=self.title;
     tlabel.textAlignment=NSTextAlignmentCenter;
     tlabel.font = [UIFont boldSystemFontOfSize:17.0];
     tlabel.textColor=[UIColor colorWithRed:7.0/255.0 green:26.0/255.0 blue:66.0/255.0 alpha:1.0];
     tlabel.backgroundColor =[UIColor clearColor];
     tlabel.adjustsFontSizeToFitWidth=YES;
     self.navigationItem.titleView=tlabel; 
```

# mysql - 使用现有的 Mysql 数据库构建 Ruby on Rails 应用程序

> ID：14680873
> 
> 赞同：2
> 
> 时间：2013-02-04T05:28:17.330
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3

我有一个包含大量数据和表的 Mysql 数据库。但我需要知道如何在我的新 Rails 应用程序中使用这个 Mysql 数据。从现在开始，我一直在学习 Rails。我知道创建脚手架的基础知识，脚手架反过来创建模型和控制器，但我不清楚如何导入数据库并使用它。任何人都可以解释或向我提供如何克服这个问题的链接。

这是我运行一个简单的脚手架后的迁移，我在`rake db:migrate`那里添加了一个电子邮件字符串后运行，但什么也没发生......：

```
class CreateProducts < ActiveRecord::Migration
  def change
    create_table :products do |t|
      t.string :title
      t.text :description
      t.string :image_url
      t.decimal :price, :precision => 8, :scale => 2
>>    t.string :email
      t.timestamps
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:19:36.400

如果您需要将当前数据库中的数据导入应用程序的数据库中，我建议您使用[Sequel Pro](http://www.sequelpro.com/)。这是一个很棒的 MySQL 图形用户界面。您可以使用它来导出所需的数据库，例如 .csv 文件，然后将其导入新数据库。

关于您的迁移，运行脚手架并运行`rake db:migrate`只会设置您的数据库；它不会添加任何数据。因此，在这里，您已将其设置为创建`products`表，并为其属性指定了数据类型。

但是为了在那里获取数据，您只能通过应用程序的表单或导入数据来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T21:29:21.640

在此之前，请尝试了解有关 Rails 及其约定的更多信息。可能您需要调整您的数据库方案。或者您可以启动一个应用程序，然后导入数据，甚至通过 SQL 或 CSV。迁移数据可能是一项乏味的工作，但却是一项必要的工作。

您可以检查[此 gem](https://github.com/ajvargo/data-migrate)以查看它是否对您的情况有所帮助，因为它取决于您的实际架构。

或者您可以按照这个[想法](http://tianhsky.ueuo.com/blog/2012/02/20/generate-schema-rb-from-existing-database/)，从旧数据库中加载数据库模式和数据。如果您不遵循 Rails 约定，它将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T01:37:12.377

我在过去的项目中已经这样做了，而且使用 Rails 绝对可以。

您可以在 Ruby on Rails 中使用旧数据库，也可以在同一个 Rails 项目中使用多个数据库。

有一本书详细介绍了如何将 Rails 与遗留 MySQL 数据库一起使用，以及如何调整模型以很好地处理遗留表： [http ://www.amazon.com/Pro-Active-Record-Databases-Experts /dp/1590598474](https://rads.stackoverflow.com/amzn/click/com/1590598474)

为遗留表使用脚手架可能不会让你走得太远，因为你需要更改很多生成的代码来修复命名等。

如果您的 Rails 应用程序也有新的表/模型，我建议您在 Rails 项目中使用两个数据库：一个用于遗留数据，一个用于新模型。

# tomcat7 - 在生产服务器中部署新版本时如何保护用户事务？

> ID：14680874
> 
> 赞同：0
> 
> 时间：2013-02-04T05:28:21.530
> 
> 标签：tomcat7

我有一个 J2EE(JSF+Primefaces+Postgresql+Hibernate) Web 应用程序[链接](http://www.askkuber.com)

我将要保护用户事务（不会因服务器重启而丢失任何事务），当我将在生产服务器中部署任何新版本或服务器 ID 关闭几分钟以进行维护时。确切的情况是让我们假设我是用户并创建一个股票投资组合，我在创建这个投资组合之间现在假设管理员重新启动 Tomcat 服务器，那么管理员如何确保任何用户完成的交易不会由于服务器的重新启动而丢失。

# android - 将布局 XML 获取到 CustomView 布局

> ID：14680880
> 
> 赞同：1
> 
> 时间：2013-02-04T05:28:54.970
> 
> 标签：android, android-layout, android-widget, android-custom-view

这是我希望实现的一个非常简单的布局。但是，我尝试了很多方法让我的 customView 出现在 Buttons 的侧面 - LinearLayout。但我失败了。任何帮助将不胜感激！
谢谢！

![理想布局](../Images/ab11b4752c15ea83e05957ecdf11e1ec.png)

这是我在 MainActivity 中声明我的 CustomView 的地方。

```
public class Drawing extends Activity {

   mContent = (LinearLayout) findViewById(R.id.labelCreator);

   mSignature = new Resize(this, null);

   mContent.addView(mSignature);
........... 
```

我的 XML 布局

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/tools"
    android:id="@+id/Drawing"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:visibility="visible" >

    <LinearLayout
        android:id="@+id/interface2"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="bottom"
        android:layout_marginTop="0dp"
        android:background="#8b5a2b"
        android:orientation="horizontal" >

                <TableLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                        <TableRow
                            android:id="@+id/tableRow9"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" >

                            <TableLayout
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content" >

                                <TableRow
                                    android:id="@+id/tableRow1"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content" >

                                    <Button
                                        android:id="@+id/btnPhoto"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:drawableTop="@drawable/camera2"
                                        android:text="Camera"
                                        android:textColor="#ffffff"
                                        android:textSize="25sp"
                                        android:typeface="serif" />

                                    <Button
                                        android:id="@+id/btnImage"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:drawableTop="@drawable/image"
                                        android:text="Image"
                                        android:textColor="#ffffff"
                                        android:textSize="25sp"
                                        android:typeface="serif" />

                                </TableRow>

                                <TableRow
                                    android:id="@+id/tableRow2"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content" >

                                    <Button
                                        android:id="@+id/btnText"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:drawableTop="@drawable/text"
                                        android:text="Text"
                                        android:textColor="#ffffff"
                                        android:textSize="25sp"
                                        android:typeface="serif" />

                                    <EditText
                                        android:id="@+id/editText1"
                                        android:layout_width="180dp"
                                        android:layout_height="wrap_content"
                                        android:ems="10"
                                        android:freezesText="false"
                                        android:hint="text"
                                        android:maxLength="10"
                                        android:maxLines="1"
                                        android:textAlignment="center"
                                        android:textColor="#e6e6fa"
                                        android:textSize="25sp"
                                        android:typeface="serif"
                                        android:visibility="visible" />

                                </TableRow>

                                <TableRow
                                    android:id="@+id/tableRow3"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content" >

                                    <Spinner
                                        android:id="@+id/color_spinner"
                                        android:layout_width="135dp"
                                        android:layout_height="wrap_content"
                                        android:textAlignment="center" />

                                    <Spinner
                                        android:id="@+id/fonts_spinner"
                                        android:layout_width="132dp"
                                        android:layout_height="wrap_content"
                                        android:textAlignment="center"
                                        app:context=".LabelCreator" />

                                </TableRow>

                                <TableRow
                                    android:id="@+id/tableRow4"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content" >

                                    <Button
                                        android:id="@+id/btnSave"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:drawableTop="@drawable/save3"
                                        android:text="Save"
                                        android:textColor="#ffffff"
                                        android:textSize="25sp"
                                        android:typeface="serif" />

                                    <Button
                                        android:id="@+id/btnClear"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:drawableTop="@drawable/clear"
                                        android:text="Clear"
                                        android:textColor="#ffffff"
                                        android:textSize="25sp"
                                        android:typeface="serif" />

                                </TableRow>
                            </TableLayout>

                        </TableRow>

                        <Button
                            android:id="@+id/btnClose"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:drawableRight="@drawable/close"
                            android:shadowColor="#00000000"
                            android:text="Close"
                            android:textColor="#ffffff"
                            android:textSize="25sp"
                            android:typeface="serif" />

                            <Button
                                android:id="@+id/btnAbout"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="About"
                                android:textColor="#ffffff"
                                android:textSize="25sp"
                                android:typeface="serif" />

                </TableLayout>

    </LinearLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="250dp"
        android:layout_height="85dp"
        android:maxLines="1"
        android:singleLine="true"
        android:text="TextView"
        android:textSize="20sp"
        android:visibility="invisible" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:39:01.290

这只是一个要遵循的结构

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:weightSum="10" >

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="3"
        android:orientation="vertical" >

        <Button
            android:id="@+id/btnSave"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:drawableTop="@drawable/save3"
            android:text="Save"
            android:textColor="#ffffff"
            android:textSize="25sp"
            android:typeface="serif" />

        <Button
            android:id="@+id/btnClear"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:drawableTop="@drawable/clear"
            android:text="Clear"
            android:textColor="#ffffff"
            android:textSize="25sp"
            android:typeface="serif" />

        <Spinner
            android:id="@+id/color_spinner"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textAlignment="center" />

        <Spinner
            android:id="@+id/fonts_spinner"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textAlignment="center"
            app:context=".LabelCreator" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="7" >
// your custom view(Drawing area) will be here.
    </LinearLayout>

</LinearLayout> 
```

这里的父布局有`android:orientation="horizontal"`
，所以它的所有子布局都将按列显示。
如果你想要逐行显示 make `android:orientation="vertical"`。在这里，我将垂直用于具有`<Button>`和`<Spinner>`控件的父布局。
您将根据需要对其进行更改。
希望这会有所帮助。

# java - java：传递一个对象

> ID：14680883
> 
> 赞同：0
> 
> 时间：2013-02-04T05:29:03.757
> 
> 标签：java, pass-by-reference

我一直在阅读很多关于这个的帖子，所有的答案都倾向于反驳之前的答案，而且它们似乎都是由高等级的人提出的，所以我很困惑，只想知道这是否有效：

```
public class Object{    

    private int someNumber = 5; 
    public void setSomeNumber(int newNumber){someNumber = newNumber;}   
}

public class Main {

    Object myObject = new Object();

public static void main(String[] args){ 

    changeNumber(myObject);     
}

void changeNumber(Object obj)
{
    obj.setSomeNumber(10);
}   
} 
```

这会将 myObject.someNumber 更改为 10 吗？

我的理解是 obj 与 myObject 指向内存中的同一位置，因此使用 obj 调用其方法与使用 myObject 调用它是一样的，因为 obj 不仅仅是 myObject 的副本？

在我开始在这里阅读有关它的主题之前，我认为这对我来说很清楚，哈哈

编辑：感谢更正代码，我只是把它写在这里作为例子，没有看到错误

多谢你们。我也对人们说按值传递感到困惑，所以我不确定它是否传递内存中的地址，因为对我来说那是传递一个参考，所以我不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:34:32.243

你是对的。changeNumber() 将更改传递给它的对象的 someNumber 变量。您正在传递对对象本身的引用，而不是副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:38:38.783

虽然这段代码不会编译（你不能使用对象，也不能从静态方法非静态数据字段访问），但我有你的问题。

基本上你是对的，这就是为什么：

在 Java 中，当您将参数传递给方法时，它们是通过引用传递的，但引用本身是通过值传递的。我相信这样做是出于优化的原因。所以事实上，另一个引用是产生指向内存中同一个对象的。如果您单独查看这些引用，它们是不同的，但它们都指向同一个对象。因此，当您从“changeNumber”方法中更改对象的内部状态时，它会转到引用“obj”所指的对象并更改它。

唯一的例外是原语——它们不是通过引用传递的，而是通过值传递的，就像您可能在其他语言中学到的那样。

一旦您知道调用方法并将参数传递给它时到底发生了什么，这将不再使您感到困惑:)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:39:15.150

你是对的，java确实通过引用操作对象，并且所有对象变量都是引用，并且不会通过引用而是通过值传递方法参数。

看看[这篇文章](http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html)，看看提供的示例中对象和方法参数之间的行为差​​异。

# xml - 使用 XSLT 的三级组

> ID：14680892
> 
> 赞同：0
> 
> 时间：2013-02-04T05:29:47.250
> 
> 标签：xml, xslt

我有一个 XML 文件，其中列出了学位课程下的课程。我创建了一个 XSLT（在帮助下），它成功地创建了学位名称下的类组。但是客户想要一个识别选修课和非选修课的第三级。如果是选修课，选修课将与数据“Y”一起列出，如果不是选修课，则与“N”一起列出，否则为“程序要求”。

如果元素中有“N”，我需要向 XSLT 添加另一个级别，该级别在标题“程序要求”下对类进行分组`<FlagElectives1>`。

我想我需要根据这个元素创建另一个键，对，然后创建一个模板来创建一个 xsl:text 标题，上面写着：“程序要求”或“程序选修”，但我被卡住了。我以前从未做过三级分组。

这是我的 XSLT：

```
<?xml version="1.0"?>
<!-- DWXMLSource="STX049 Catalog parsed.xml" -->
<!DOCTYPE xsl:stylesheet>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="no"/>
  <xsl:template match="/">

    <CrystalReport>
      <xsl:apply-templates/>
    </CrystalReport>
  </xsl:template>

  <xsl:key name="degrees-by-title" match="CrystalReport/Group/Group/Group/Details" use="Section/ICCB1" />

  <xsl:template match="CrystalReport/Group/Group/Group">

    <Degree>
      <xsl:for-each select="Details[count(. | key('degrees-by-title', Section/ICCB1)[1]) = 1]">
        <xsl:sort select="Section/ACADPROGRAMSID1" />
        <department>
          <Degreetitle>
            <xsl:apply-templates select="Section/ACPGDEGREE1" />
          </Degreetitle>
          <Certtitle>
            <xsl:apply-templates select="Section/CCD11" />
          </Certtitle>
          <DegreeDesc>
            <xsl:value-of select="Section/ACPGCOMMENTS1"/>
          </DegreeDesc>
          <ICCBcode>
            <xsl:value-of select="Section/ICCB1"/>
          </ICCBcode>
          <ProgramID>
            <xsl:value-of select="Section/ACADPROGRAMSID1"/>
          </ProgramID>
          <xsl:for-each select="key('degrees-by-title', Section/ICCB1)">
            <xsl:sort select="Section/FlagElectives1" order="ascending" />
            <xsl:sort select="Section/DEPARTMENT11" />
            <xsl:sort select="Section/CRSNO1" />

            <Details>
              <class>
                <deptname>
                  <xsl:value-of select="Section/DEPARTMENT11"/>
                </deptname>
                <courseno>
                  <xsl:value-of select="Section/CRSNO1"/>
                </courseno>
                <classname>
                  <xsl:value-of select="Section/CRSTITLE1"/>
                </classname>
                <classcredit>
                  <xsl:value-of select="Section/CRSMINCRED1"/>
                </classcredit>
                <Elective>
                  <xsl:value-of select="Section/FlagElectives1" />
                </Elective>
              </class>
            </Details>

          </xsl:for-each>
        </department>
      </xsl:for-each>
    </Degree>

  </xsl:template>

  <xsl:template match="Section/ACPGDEGREE1[child::node()]">
    <xsl:value-of select="."/>
    <xsl:text> DEGREE</xsl:text>
  </xsl:template>

  <xsl:template match="Section/CCD11[child::node()]">
    <xsl:text> CERTIFICATE</xsl:text>
  </xsl:template>

</xsl:stylesheet> 
```

这是我的 XML 的结构：

```
<?xml version="1.0" encoding="UTF-8"?>
<CrystalReport>
  <Group Level="1">
    <Group Level="2">
      <Group Level="3">
        <Details>
          <Section>
            <ACPGDEGREE1>AAS</ACPGDEGREE1>
            <CCD11/>
            <ACPGCOMMENTS1>The Accounting program</ACPGCOMMENTS1>
            <ICCB1>3203</ICCB1>
            <ACADPROGRAMSID1>ACCOU.AAS</ACADPROGRAMSID1>
            <CRSNO1>1110</CRSNO1>
            <ACRBPRINTEDSPEC1/>
            <ACPGHOMELANGNOTREQDRSN1>General Education</ACPGHOMELANGNOTREQDRSN1>
            <CRSMINCRED1>2</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Using Computers: An Introduction</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <CRSSUBJECT1>CIS</CRSSUBJECT1>
            <ACRBLABEL1>CIS REQUIREMENT</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
          </Section>
        </Details>
        <Details>
          <Section>
            <ACPGDEGREE1>AAS</ACPGDEGREE1>
            <CCD11/>
            <ACPGCOMMENTS1>The Accounting program</ACPGCOMMENTS1>
            <ICCB1>3203</ICCB1>
            <ACADPROGRAMSID1>ACCOU.AAS</ACADPROGRAMSID1>
            <CRSNO1>1150</CRSNO1>
            <ACRBPRINTEDSPEC1/>
            <ACPGHOMELANGNOTREQDRSN1>General Education</ACPGHOMELANGNOTREQDRSN1>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Intro to Computer</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <CRSSUBJECT1>CIS</CRSSUBJECT1>
            <ACRBLABEL1>CIS</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>Y</FlagElectives1>
          </Section>
        </Details>
      </Group>
    </Group>
  </Group>
</CrystalReport> 
```

第一级分组应该基于元素`<DEPARTMENT11>`。各种学位和证书的标题在字段`<ACPGAREAOFSTUDY1>` 中找到所有这一切中的第二级唯一字段是`<ACADPROGRAMSID1>`

这是所需的输出：

```
<CrystalReport>
 <Degrees>

 <!--group and repeat "Degrees" for-each based on element ACPGAREAOFSTUDY1-->

 <areaofstudy>Accounting</areaofstudy>
 <Degree>
 <department>

 <!--group and repeat "department" for-each based on element ICCB1-->

  <Degreetitle>AAS DEGREE</Degreetitle>
  <Certtitle />
  <DegreeDesc>The Accounting program</DegreeDesc>
  <ICCBcode>3203</ICCBcode>
  <ProgramID>ACCOU.AAS</ProgramID>

 <!--group and repeat "Details" for-each based on element ACADPROGRAMSID1 under titles "Program Requirement" or "Program Elective" based on element "FlagElectives1"-->

  <h1>Program Requirements</h1>
  <Details>
    <class>
      <deptname>ACCOU</deptname>
      <courseno>1150</courseno>
      <classname>Intro to Computer</classname>
      <classcredit>3</classcredit>
      <Elective>N</Elective>
    </class>
  </Details>
  <h1>Program Electives</h1>
  <Details>
    <class>
      <deptname>ACCOU</deptname>
      <courseno>1110</courseno>
      <classname>Using Computers: An Introduction</classname>
      <classcredit>2</classcredit>
      <Elective>Y</Elective>
    </class>
  </Details>
 </department>
 </Degree>
 <Degree>
 <department>
  <Degreetitle>AAS DEGREE</Degreetitle>
  <Certtitle />
  <DegreeDesc>The Accounting program</DegreeDesc>
  <ICCBcode>3203</ICCBcode>
  <ProgramID>ACCOU.AAS</ProgramID>
  <h1>Program Requirements</h1>
  <Details>
    <class>
      <deptname>ACCOU</deptname>
      <courseno>1150</courseno>
      <classname>Intro to Computer</classname>
      <classcredit>3</classcredit>
      <Elective>Y</Elective>
    </class>
  </Details>
  <h1>Program Electives</h1>
  <Details>
    <class>
      <deptname>ACCOU</deptname>
      <courseno>1110</courseno>
      <classname>Using Computers: An Introduction</classname>
      <classcredit>2</classcredit>
      <Elective>N</Elective>
    </class>
  </Details>
</department>
</Degree>
</Degrees>
</CrystalReport> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:30:36.170

我对您的 XSLT 做了一些清理工作。任何时候你有一个`for-each`嵌套在 a`for-each`中，这都是你的 XSLT 需要重构的好兆头。我想我已经理解了你的意思，通过它们是否是选修课来分组课程（尽管你没有说明你想如何表示它），所以我想出了以下内容：

```
<?xml version="1.0"?>
<!-- DWXMLSource="STX049 Catalog parsed.xml" -->
<!DOCTYPE xsl:stylesheet>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="no"/>
  <xsl:variable name="allSections" 
                select="/CrystalReport/Group/Group/Group/Details/Section" />

  <xsl:key name="kArea" match="Section" use="ACPGAREAOFSTUDY1"/>
  <xsl:key name="kDegree" match="Section" 
           use="concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1)" />
  <xsl:key name="kDepartment" match="Section" 
           use="concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1, '+', ICCB1)" />

  <xsl:variable name="degreeFirsts"
           select="$allSections[generate-id() = 
             generate-id(key('kDegree', 
                concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1))[1])]" />
  <xsl:variable name="deptFirsts"
             select="$allSections[generate-id() = 
               generate-id(key('kDepartment',
                concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1, '+', ICCB1))[1])]" />

  <xsl:template match="/">
    <CrystalReport>
      <Degrees>
        <xsl:apply-templates
          select="$allSections[generate-id() = 
                 generate-id(key('kArea', ACPGAREAOFSTUDY1)[1])]"
          mode="group"/>
      </Degrees>
    </CrystalReport>
  </xsl:template>

  <xsl:template match="Section" mode="group">
    <xsl:variable name="area" select="ACPGAREAOFSTUDY1" />
    <areaofstudy>
      <xsl:value-of select="$area"/>
    </areaofstudy>
    <xsl:apply-templates select="$degreeFirsts[ACPGAREAOFSTUDY1 = $area]" 
                         mode="degree"/>
  </xsl:template>

  <xsl:template match="Section" mode="degree">
    <xsl:variable name="area" select="ACPGAREAOFSTUDY1" />
    <xsl:variable name="degree" select="ACPGDEGREE1" />
    <xsl:text>&#xA;</xsl:text>
    <Degree>
      <xsl:apply-templates
        select="$deptFirsts[ACPGAREAOFSTUDY1 = $area and ACPGDEGREE1 = $degree]"
        mode="department">
        <xsl:sort select="ACADPROGRAMSID1" />
      </xsl:apply-templates>
    </Degree>
  </xsl:template>

  <xsl:template match="Section" mode="department">
    <department>
      <Degreetitle>
        <xsl:apply-templates select="ACPGDEGREE1" />
      </Degreetitle>
      <Certtitle>
        <xsl:apply-templates select="CCD11" />
      </Certtitle>
      <xsl:text>&#xA;</xsl:text>
      <DegreeDesc>
        <xsl:apply-templates select="ACPGCOMMENTS1" />
      </DegreeDesc>
      <xsl:text>&#xA;ICCB Code</xsl:text>
      <ICCBcode>
        <xsl:apply-templates select="ICCB1" />
      </ICCBcode>
      <xsl:text> | Field of Study Code: </xsl:text>
      <ProgramID>
        <xsl:apply-templates select="ACADPROGRAMSID1" />
      </ProgramID>
      <xsl:variable name="courses" 
              select="key('kDepartment', 
                   concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1, '+', ICCB1))" />

      <xsl:call-template name="CourseGroup">
        <xsl:with-param name="courses" select="$courses[FlagElectives1 = 'N']" />
        <xsl:with-param name="title" select="'Program Requirements'" />
      </xsl:call-template>

      <xsl:call-template name="CourseGroup">
        <xsl:with-param name="courses" select="$courses[FlagElectives1 = 'Y']" />
        <xsl:with-param name="title" select="'Program Electives'" />
      </xsl:call-template>
    </department>
  </xsl:template>

  <xsl:template name="CourseGroup">
    <xsl:param name="courses" />
    <xsl:param name="title" />

    <xsl:if test="$courses">
      <xsl:text>&#xA;</xsl:text>
      <xsl:value-of select="$title" />
      <xsl:apply-templates select="$courses">
        <xsl:sort select="FlagElectives1" order="ascending" />
        <xsl:sort select="DEPARTMENT11" />
        <xsl:sort select="CRSNO1" />
      </xsl:apply-templates>
    </xsl:if>
  </xsl:template>

  <xsl:template match="Section">
    <xsl:text>&#xA;</xsl:text>
    <Details>
      <class>
        <deptname>
          <xsl:apply-templates select="DEPARTMENT11" />
        </deptname>
        <xsl:text>    </xsl:text>
        <courseno>
          <xsl:apply-templates select="CRSNO1" />
        </courseno>
        <xsl:text>   </xsl:text>
        <classname>
          <xsl:apply-templates select="CRSTITLE1" />
        </classname>
        <xsl:text>    </xsl:text>
        <classcredit>
          <xsl:apply-templates select="CRSMINCRED1" />
        </classcredit>
      </class>
    </Details>
  </xsl:template>

  <xsl:template match="ACPGDEGREE1/text()">
    <xsl:value-of select="concat(., ' DEGREE')"/>
  </xsl:template>

  <xsl:template match="CCD11/text()">
    <xsl:value-of select="concat(., ' CERTIFICATE')" />
  </xsl:template>
</xsl:stylesheet> 
```

选修分组是通过`call-template`项目来实现的，这些项目通过它们是否是选修课来选择课程：

```
 <xsl:variable name="courses" 
                select="key('degrees-by-title', ICCB1)" />
  <xsl:call-template name="CourseGroup">
    <xsl:with-param name="courses" select="$courses[FlagElectives1 = 'Y']" />
    <xsl:with-param name="title" select="'Program Requirements'" />
  </xsl:call-template> 
```

在您的示例输入上运行时，此 XSLT 会生成：

```
<CrystalReport>
  <Degree>
    <department>
      <Degreetitle>AAS DEGREE</Degreetitle>
      <Certtitle />
      <DegreeDesc>The Accounting program</DegreeDesc>
      <ICCBcode>3203</ICCBcode>
      <ProgramID>ACCOU.AAS</ProgramID>
      <h1>Program Requirements</h1>
      <Details>
        <class>
          <deptname>ACCOU</deptname>
          <courseno>1150</courseno>
          <classname>Intro to Computer</classname>
          <classcredit>3</classcredit>
          <Elective>Y</Elective>
        </class>
      </Details>
      <h1>Program Electives</h1>
      <Details>
        <class>
          <deptname>ACCOU</deptname>
          <courseno>1110</courseno>
          <classname>Using Computers: An Introduction</classname>
          <classcredit>2</classcredit>
          <Elective>N</Elective>
        </class>
      </Details>
    </department>
  </Degree>
</CrystalReport> 
```

请注意注意`h1`要求和选修组开始的元素。如果您希望这以其他方式表示，请澄清这一点。

# c# - 从 xsd 生成 Cs 文件

> ID：14680893
> 
> 赞同：0
> 
> 时间：2013-02-04T05:29:47.837
> 
> 标签：c#文件。, c#

我正在尝试从我拥有的 XSD生成一个 Cs [c#文件。](/questions/tagged/c%23 "显示标记为“c#”的问题")我尝试执行以下命令：

```
D:\>xsd /dataset /language:CS /outputdir:D:\UKBTrunk\SaaS UKB Core Trunk\Shared\d
otNet\BT.SaaS.Core.Shared\BT.SaaS.Core.Shared.Interfaces\SharedContracts\CMPS\Re
sponse getAgreementPlanChangeHistory.xsd 
```

我收到错误消息：

> *错误：无效的命令行参数：'UKB'。*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T05:31:20.280

错误信息泄露了它；该程序认为`UKB`不是路径的一部分。

添加引号：

```
D:\>xsd /dataset /language:CS/outputdir:"D:\UKBTrunk\SaaS UKB Core Trunk\Shared\dotNet\BT.SaaS.Core.Shared\BT.SaaS.Core.Shared.Interfaces\SharedContracts\CMPS\Response" getAgreementPlanChangeHistory.xsd 
```

# android - 意图或直接访问不同类的公共变量

> ID：14680895
> 
> 赞同：1
> 
> 时间：2013-02-04T05:29:53.647
> 
> 标签：android, android-intent

我注意到大多数 Android 程序员使用 Intent 或广播接收器将短文本消息从一个类发送到另一个类。

如果我使用的实用程序类不扩展任何其他类（如 Activity 或 Service），为什么不直接访问这样的实用程序类中的变量。

```
 UtilityClass utility = new UtilityClass();
 String gotIt = utility.theOtherVariable; // direct access to variable in other class 
```

这样做有什么问题吗？我宁愿这样做，也不愿使用意图或广播接收器将小文本消息从实用程序类发送到 Activity 类。

编辑

除了类的实例之外，您还可以将变量设为静态，以便从一个活动传递到另一个活动。在任何一种情况下，我都看不到使用额外的意图或广播接收器将信息从一个活动传递到另一个活动的任何价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:38:20.490

是的，当然你可以使用它，即使你使用自己的数据结构也是一种很好的做法，但这取决于需要和场景。例如，假设您正在从 gps 接收数据，并且您的应用程序中大约 5-6 个位置需要该数据，那么设计一个类并将 gps 数据存储在该类的变量中并在您想要的任何位置访问它是很好的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:53:27.163

是的，公开课程并保持你的 where 变量和函数是公开的，这样你可以在进一步的活动中使用当然是一件好事。但是你们都准备好知道这种类型的函数和变量将在某些活动中使用。

Intent 就像将数据从一个活动切换到另一个活动的良好且简单的方法。例如，如果您不想更多地使用某个变量而不是单个下一个活动，那么它将很有用。Intent 更无能的使用是返回活动结果。就像如果您想执行操作但它取决于下一个活动，那么 Intent 将用作完成您的任务的强大工具。

简短而甜蜜：这取决于需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:53:49.003

尝试这个，

```
UtilityClass utility = new UtilityClass(); 
```

在您的 .Use Utilityclass 对象中初始化 Utilityclass，`Activity`您将获得 utliityclass 中的所有值。

例子，

```
public class UtilityClass{
public static string gotIt = "value";
}  

public class MainActivity extends Activity {
UtilityClass utility = new UtilityClass();
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
       setContentView(R.layout.xml);
 String str =  utility.gotIt;
} 
```

# angularjs - AngularJS - 如何在提交表单时禁用它？

> ID：14680900
> 
> 赞同：15
> 
> 时间：2013-02-04T05:30:43.517
> 
> 标签：angularjs

在通过 AJAX 提交时，如何禁用完整的表单（其中的所有输入元素）？我尝试`$scope.form_state`在控制器中设置一个变量并将其绑定到提交按钮的`ng-disabled`属性，但这似乎是一种解决方法。应该有一种更简单+直接的方式来做到这一点。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-04T10:08:01.107

您可以将所有表单元素放入`fieldset`并用于`ng-disabled`禁用整个字段集。

# iphone - 标签栏点击和其他功能之间的 iOS 应用滞后

> ID：14680901
> 
> 赞同：0
> 
> 时间：2013-02-04T05:31:07.777
> 
> 标签：iphone, ios, objective-c, memory-management, memory-leaks

我的 iOS 应用程序在各种功能（tabBar 点击、警报视图、按钮按下等）之间似乎相当“滞后”。我使用了 Xcode Leaks Instrument，但在应用程序中看不到任何内存泄漏。我还能做些什么来缩小可能使应用程序感觉“粘滞”的原因吗？

各种动作之间大约有 1 秒的停顿。这不会每次都发生，但足以引起注意。此外，如果我的应用程序一直在后台运行，那么当涉及到前台时，在用户可以与应用程序交互之前，屏幕也会冻结一些暂停。

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:52:01.813

检查您的 viewWillAppear 方法，如果那里发生了很多事情，那么当您切换选项卡时会有延迟。相反，如果您将 viewWillAppear 操作转移到 viewDidAppear 方法中（假设它们不影响用户体验），那么滞后将不会发生

# google-drive-api - 为什么在 GDrive 上托管时 impress.js 不工作？

> ID：14680902
> 
> 赞同：0
> 
> 时间：2013-02-04T05:31:14.577
> 
> 标签：google-drive-api, impress.js

我最近尝试测试 impress.js 演示文稿是否可以托管在 Google Drive 上。由于某种原因，它不起作用。该文件的脱机副本在我的计算机上工作，但托管副本不起作用。

我使用的是 Google Chrome，我的操作系统是 Windows Vista。我的浏览器说该页面包含不安全的内容，即使我加载该内容，JavaScript 似乎也无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:30:34.513

这应该是可能的。检查 JavaScript 控制台以找出它失败的原因。

# matlab - 为 sin signa 创建一个 m 文件

> ID：14680907
> 
> 赞同：0
> 
> 时间：2013-02-04T05:31:26.587
> 
> 标签：matlab, plot

我正在尝试为具有输入**tmin、tmax、时间周期、幅度**的正弦信号创建一个 m 文件函数，但我不知道如何开始。我是 Matlab 的新手。

我的正弦函数有以下代码

```
function  y=sin(x)

y=sin(x); 
```

在命令窗口中，我键入`plot(mysine(x));`以获取正弦信号，但这就是我所知道的。

您如何设置**tmin、tmax、时间周期、幅度**？

我想要这样的东西

```
[x] = mysine(-10,10,0.25,2);
plot(x); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:51:52.740

这是一个非常简单的问题，与编程无关，我怀疑这是家庭作业。

如果正弦具有以下形式：

```
a*sin(b*x+c)+d

a affects the amplitude
b affects the time-period
c affects the phase
d affects the amplitude offset 
```

基本上你想要做的是：

```
plot(tmin:timePeriod:tmax, amplitude*sin(tmin:timePeriod:tmax)) 
```

这将产生如下内容：

![在此处输入图像描述](../Images/8ef8d305e68cb5f2e35fcab952b286ea.png)

我相信这是你正在寻找的正弦形式。

作为一个函数：

```
function x = mysine(tmin, tmax, timePeriod, amplitude)
     x = plot(tmin:timePeriod:tmax, amplitude*sin(tmin:timePeriod:tmax))
end 
```

# javascript - 如何防止提交更改列表对话框调整大小和最大化提交对话框窗口？

> ID：14680909
> 
> 赞同：0
> 
> 时间：2013-02-04T05:31:30.003
> 
> 标签：javascript, jquery, perforce, perforce-client-spec, perforce-integrate

我需要在我们的提交更改列表对话框中禁用最大化和调整大小功能。

我有一个 html 文件，其内容与默认提交更改列表相同。但是使用 jquery 有一些额外的字段和样式。

但是如果我想调整对话框的大小。所有 html 内容都已折叠。它没有根据我们的对话框高度和宽度进行调整。

他们是否要禁用我们提交更改列表对话框的调整大小和最大化属性？

# android - 在列表视图上，一次只想单击一项

> ID：14680916
> 
> 赞同：2
> 
> 时间：2013-02-04T05:31:55.387
> 
> 标签：android, listview

我有一个包含项目的列表视图。单击一个项目将转到另一个活动。我的问题是点击多个项目（比如 3 0r4 ），所有点击都被加载。但我不需要它。一次只想加载 1 个项目。在 HTC one、三星 Galaxy s plus 上测试。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:52:30.803

您可以检测到多点触控并忽略它。

```
public boolean onTouchEvent(MotionEvent event) {
// TODO Auto-generated method stub

if(event.getPointerCount() > 1) {
    System.out.println("Multitouch detected!");
    return true;
}
else
    return super.onTouchEvent(event); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T01:45:14.750

```
 use the follow method can solve that:
    public class FastClickUtil {
          private static long lastClickTime;
            public synchronized static boolean isFastClick() {
                long time = System.currentTimeMillis();   
                if ( time - lastClickTime < 500) {   
                    return true;   
                }   
                lastClickTime = time;   
                return false;   
            }
    }

put that method in your onItemCLickListner  or in your adapter‘s getview like me
    holder.title.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // 解决短时间内同时点击多个item
                    if (FastClickUtil.isFastClick()) {
                        return;
                    } else {
                        Message msg = Message.obtain();
                        msg.what = MSG_WHAT_ONITEM_CLICK;

                        // Bundle data = new Bundle() ;
                        // msg.setData(data) ;
                        msg.obj = menuItem.getTitleResId();
                        getHandler().sendMessage(msg);
                    }
                }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-02T08:09:09.087

要停止这种情况，请在列表视图中使用它。

```
android:splitMotionEvents="false" 
```

# javascript - 推入 javascript 不能在 IE6 中工作，但在 ie8 中工作

> ID：14680925
> 
> 赞同：0
> 
> 时间：2013-02-04T05:32:50.923
> 
> 标签：javascript

我有以下片段和推送功能在 ie8 中可以正常工作，但在 ie6 中不能正常工作，我无法获得任何解决方案。

请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:43:19.480

鉴于这`#`不是变量名称的有效字符，我猜您忘记在设置的值周围添加引号`tempData`：

```
var tempData='RS_TIM_ENABLE#RS_TX_TRACE_MSG_ASIDE#EQ#ON'; 
```

# ajax - 单击页面上的 POST 链接不会调用 onchange ajax 事件来保存修改后的字段

> ID：14680931
> 
> 赞同：3
> 
> 时间：2013-02-04T05:34:33.367
> 
> 标签：ajax

在框外单击时将更改 ajax 的字段保存到服务器有效，但如果在更改值后立即单击页面上的任何 POST 链接，则不会更改值。

下面是代码html：

```
<input type="text" name="title" id="title" size="40" value="${fieldValue}" onchange="doAJAXSubmit(this.name, this.value)"/> 
```

JS：

```
function doAJAXSubmit(fieldSaved, fieldValue)
{
    alert(fieldSaved);
    var url = "<c:url value="/home/home.jsp"/>";

    url = url+fieldSaved+ "=" + fieldValue;
    new Request({url: url}).send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:44:32.080

您是否尝试过来自 jquery 的 document.ready .change 绑定

```
$('#title').change(function() {
    alert(fieldSaved);
    var url = "<c:url value="/cart/view_cart.jspa"/>";

    url = url+fieldSaved+ "=" + fieldValue;
    new Request({url: url}).send();
}); 
```

如果没有 Jquery，请执行以下操作：然后将您的代码更改为以下内容：

使用 onkeyup

```
<input type="text" name="title" id="title" size="40" value="${fieldValue}" onkeyup="doAJAXSubmit(this.name, this.value)"/> 
```

# node.js - 如何正确构建 NodeJS、Express 和 MongoDB 代码？

> ID：14680934
> 
> 赞同：2
> 
> 时间：2013-02-04T05:35:01.560
> 
> 标签：node.js, mongodb, express

我对这三个人都很陌生，但我确实很了解 javascript。我了解它们的所有基础知识，但不了解使用快速 MVC 和 MongoDB 数据库查询实现 NodeJS 服务器 javascript 的最佳方法是什么。显然，我想将所有这些分解为他们自己的文件，但我不确定所有内容如何适合 Express 创建的预先创建的项目模板。有没有人有好的解决方案或资源与我分享？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:14:21.220

我最近自己开始使用 node.js、express 和 mongodb，确实那里的资源大多已经过时了。首先，express 不是一个 mvc 框架。它对结构没有意见，您会发现它使它如此出色。你的问题是如何组织代码？这显然是个人喜好，但您可以创建一个模型文件夹，您可以在其中放置对特定资源的 db 查询，您的 lib 文件夹，您可以在其中建立与 mongodb 实例的连接并在需要的地方调用它，并使用 routes 文件夹为您的更具体的需求，例如传统 MVC 上的控制器。另一件事是您必须决定如何与 mongo 交互。您可以使用本机 mongodb 驱动程序，也许建议使用 mongoskin，或者使用 mongoose 进行更轻松的交互，例如定义模式。就我个人而言，我更喜欢本地人，但我花了一段时间才了解它的作用和工作原理。最后，对于资源，我可以从个人经验中提出建议，这仍然是我自己的观点，你能做的最好的事情就是购买 Node.js in Action 这本书，这让我意识到 node.js 是什么以及如何去做用它。希望能帮助到你...

# bash - 外壳创建新文件夹

> ID：14680936
> 
> 赞同：0
> 
> 时间：2013-02-04T05:35:04.357
> 
> 标签：bash, shell

我有很多文件的路径，但我需要将所有文件复制到其他位置`/sample`，并且我想将文件复制到不同的文件夹中：

```
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/clean_111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz.total.info 
```

我想将这些文件复制到里面的 AS34_59329 文件夹中`/sample`

```
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59328/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59328/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59328/clean_111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz.total.info 
```

我想将这些文件复制到里面的 AS34_59328 文件夹中`/sample`

我编写代码将所有文件 scp 到 /sample 文件夹中，但我不知道如何将每个文件放入不同的子目录中，例如：

```
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59328/clean_111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz.total.info 
```

放入 AS34_59328

```
 #! /bin/bash
   while read myline  
    do  
     for i in $myline
        do 
        if [ -f $i]; then
              #how to put different files into different sub-directory
              scp -r $i xxx@191.168.174.43:/sample
        fi
        done
    done < data.list 
```

新变化的部分

```
 #! /bin/bash
      while read myline
      do
            for i in $myline
            do
              if [ -f $i ]
              then
              relname=$(echo $i | sed 's%\(/[^/][^/]*\)\{5\}/%%')
              echo $relname
              fi
            done
      done < /home/jesse/T11073_all_3254.fq.list 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:23:42.407

看来您需要从文件名中去除路径名的前 5 个组成部分。由于您的姓名中没有空格（您使用的方式`for i in $myline`排除了这种可能性），您可以使用：

```
#! /bin/bash
while read myline  
do  
    for i in $myline
    do 
        if [ -f $i ]
        then
            relname=$(echo $i | sed 's%\(/[^/][^/]*\)\{5\}/%%')
            scp -r $i xxx@191.168.174.43:/sample/$relname
        fi
    done
done < data.list 
```

正则表达式只是一种查找由五组斜线组成的序列，后跟一个或多个非斜线加上一个斜线并删除它们的方法。由于斜线在搜索中占据显着位置，因此我习惯于`%`标记`s///`操作的各个部分。

例如，给定输入：

```
/a/b/c/d/e/f/g 
```

的输出`sed`是：

```
f/g 
```

请注意，此代码没有在远程机器上显式创建目录；它只是指定文件的去向。如果您也需要创建它们，您可能必须调查`ssh`，以便`mkdir -p /sample/$(dirname $relname)`在远程计算机上运行（其中 dirname 操作可以在本地或远程运行）。

请注意，如果您知道需要将所有文件从本地目录复制到远程目录，那么它`scp`具有递归复制模式 ( )，这将大大简化事情。`-r`

# jquery - 通过页面加载时引导选项卡代码不起作用

> ID：14680937
> 
> 赞同：0
> 
> 时间：2013-02-04T05:35:06.127
> 
> 标签：jquery, twitter-bootstrap

我正在使用 twitter bootstrap 的标签。当我在浏览器的 javascript 控制台中执行以下代码时，我的选项卡工作正常 -

```
$("#mainTab a").click(function(e){
          e.preventDefault(); 
          $(this).tab('show');
        }); 
```

但是，当我将上述内容放在索引页面的 jquery 的 document.ready 函数中时，选项卡无法初始化。我的选项卡中也有 data-toggle 属性，但切换仍然不起作用。

当在页面中加载相同的代码时，可能导致选项卡无法工作，但在控制台中执行时工作的原因是什么？

通过页面加载时可能会阻止其执行的原因是什么？

# database - 如何在数据库中实现一对多和多对多关系

> ID：14680939
> 
> 赞同：1
> 
> 时间：2013-02-04T05:35:17.397
> 
> 标签：database, relational-database, one-to-many

我有一个橡胶带的数据，其中一种化合物具有多种化学物质，这些多种化学物质可以任意组合形成一种新化合物（多种化合物中的一种化学物质）。我创建了一张化合物表和一张化学品表。如何在没有大量重复数据的情况下形成关系表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:43:54.100

毫无疑问，如果您进行搜索，网络上有大量的教程。你应该做一些研究或获得一个好的数据库文本。为了帮助您，这里有一个多对多关系的示例，它实现为具有关联 CompoundChemical 表的一对多表。

```
CREATE TABLE Compound
(
  CompoundId INT NOT NULL PRIMARY KEY,
  Name VARCHAR(100) NOT NULL
);

CREATE TABLE Chemical
(
  ChemicalId INT NOT NULL PRIMARY KEY,
  Name VARCHAR(100) NOT NULL
)

CREATE TABLE CompoundChemical
(
  CompoundId INT NOT NULL,
  ChemicalId INT NOT NULL,
  PRIMARY KEY (CompoundId, ChemicalId),
  FOREIGN KEY fk1 (CompoundId) REFERENCES Compound(CompoundId),
  FOREIGN KEY fk2 (ChemicalId) REFERENCES Chemical(ChemicalId)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:36:46.307

添加表结构会有所帮助，但您可能可以使用这样的东西

为化合物创建一个表，为化学品创建一个表是好的，但您很可能需要再创建一个表，因为每种化合物中没有固定数量的化学品。

也许名为 Substances 的表具有引用化学品和化合物的以下列。(ChemicalID, CompoundID)

# linux - Linux time 命令的结果

> ID：14680941
> 
> 赞同：4
> 
> 时间：2013-02-04T05:35:21.003
> 
> 标签：linux, time

我从 linux time 命令得到了结果。

```
real    119m10.626s
user    133m0.952s
 sys    20m32.155s 
```

从我查到的资料看来，user+sys应该比real少，但这里不是这样。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T05:38:03.817

多个 CPU。

多线程应用程序可以在多个 CPU 内核上同时运行，（从而将 CPU 时间累积为实时的倍数）

# iphone - 为 iPhone 5 solvepnp 创建 opencv 相机矩阵

> ID：14680944
> 
> 赞同：9
> 
> 时间：2013-02-04T05:35:33.487
> 
> 标签：iphone, opencv, computer-vision, augmented-reality, camera-calibration

我正在使用 opencv 为 iPhone 开发一个应用程序。我必须使用方法solvePnPRansac：

[http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html)

对于这种方法，我需要提供一个相机矩阵：
__ __
| fx 0 cx |
| 0 年 |
|_0 0 1 _|

其中 cx 和 cy 代表图像的中心像素位置， fx 和 fy 代表焦距，但这就是所有文档所说的。我不确定为这些焦距提供什么。iPhone 5 的焦距为 4.1 毫米，但我认为这个值不能按原样使用。

我查了另一个网站：

[http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html)

它显示了 opencv 如何创建相机矩阵。这里指出焦距是以像素为单位测量的。

我查了另一个网站：

[http://www.velocityreviews.com/forums/t500283-focal-length-in-pixels.html](http://www.velocityreviews.com/forums/t500283-focal-length-in-pixels.html)

（大约一半）它说焦距可以使用以下公式从毫米单位转换为像素：fx = fy = focusMM * pixelDensity / 25.4;

我发现的另一个链接指出 fx = focusMM * width / (sensorSizeMM); fy = focusMM * 长度 / (sensorSizeMM);

我不确定这些方程以及如何正确创建这个矩阵。

任何有关如何创建准确的相机矩阵（尤其是 iPhone 5）的帮助、建议或链接将不胜感激，

艾萨克

ps 我认为 (fx/fy) 或 (fy/fx) 可能等于相机的纵横比，但这可能是完全错误的。

更新：

[像素坐标到 3D 线（opencv）](https://stackoverflow.com/questions/3107771/pixel-coordinates-to-3d-line-opencv?rq=1)

使用此链接，我可以弄清楚他们希望如何格式化 fx 和 fy，因为他们使用它来缩放相对于它们与中心的距离的角度。因此，fx 和 fy 可能以像素/（单位长度）为单位，但我仍然不确定这个单位长度需要是多少，只要 x 和 y 相互缩放，它可以是任意的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T13:29:21.167

您可以获得以像素为单位的焦距的初始（粗略）估计，以毫米为单位的焦距除以相机传感器（CCD、CMOS 等）的像素宽度。

您可以从相机手册中获得前者，或者从以全分辨率拍摄的图像的 EXIF 标题中读取它。找出后者有点复杂：如果您知道传感器的制造商和型号，您可以在互联网上查看传感器的规格表，或者您可以将其敏感区域的总宽度除以传感器上的像素数边。

在没有其他信息的情况下，通常可以安全地假设像素是正方形的（即 fx == fy），并且传感器与镜头的焦轴正交（即相机矩阵的第一行和第二列中的项是零）。此外，如果没有精心设计的校准装置和精心执行的校准程序，主点 (cx, cy) 的像素坐标通常很难准确估计（这是因为它们本质上与平行于图像的相机平移相混淆飞机）。因此最好将它们设置为等于图像的几何几何中心，除非您知道图像已被不对称裁剪。

因此，您最简单的相机模型只有一个未知参数，焦距 f = fx = fy。

忠告：在您的应用程序中通常更方便地携带水平（或垂直）视场角，而不是焦距（以像素为单位）。这是因为 FOV 对于图像缩放是不变的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T10:05:46.420

您在这里处理的“焦距”只是从世界中的物体到相机像素的比例因子，用于针孔相机模型（[维基百科链接）](http://en.wikipedia.org/wiki/Pinhole_camera_model)。这就是为什么它的单位是像素/单位长度。对于给定的**f** ，在距离（垂直于相机）**z**处大小为**L**的对象将是**f*L/z**像素。

 ****因此，您可以通过将已知大小的物体放置在相机已知距离处并测量其在图像中的大小来估计焦距。您也可以假设中心点是图像的中心。您绝对不应该忽略镜头失真（**solvePnPRansac中的****dist_coef**参数）。

在实践中，获取相机矩阵和畸变系数的最佳方法是使用相机校准工具。[您可以从此链接](http://www.mrpt.org/Application:camera-calib)下载和使用 MRPT camera_calib 软件，[这里](http://www.youtube.com/watch?v=p3lIHcFChNI)还有视频教程。如果您使用 matlab，请使用[Camera Calibration Toolbox](http://www.vision.caltech.edu/bouguetj/calib_doc/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-05T23:18:22.510

在这里，您有一张表格，其中包含 iPhone 4 和 5 的相机规格。计算公式为：

```
double f = 4.1;
double resX = (double)(sourceImage.cols);
double resY = (double)(sourceImage.rows);
double sensorSizeX = 4.89;
double sensorSizeY = 3.67;
double fx = f * resX / sensorSizeX;
double fy = f * resY / sensorSizeY;
double cx = resX/2.;
double cy = resY/2.; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-20T10:49:30.123

试试这个：

```
func getCamMatrix()->(Float, Float, Float, Float)
{

    let format:AVCaptureDeviceFormat? = deviceInput?.device.activeFormat
    let fDesc:CMFormatDescriptionRef = format!.formatDescription

    let dim:CGSize = CMVideoFormatDescriptionGetPresentationDimensions(fDesc, true, true)

    // dim = dimensioni immagine finale
    let cx:Float = Float(dim.width) / 2.0;
    let cy:Float = Float(dim.height) / 2.0;

    let HFOV : Float = format!.videoFieldOfView
    let VFOV : Float = ((HFOV)/cx)*cy

    let fx:Float = abs(Float(dim.width) / (2 * tan(HFOV / 180 * Float(M_PI) / 2)));
    let fy:Float = abs(Float(dim.height) / (2 * tan(VFOV / 180 * Float(M_PI) / 2)));

    return (fx, fy, cx, cy)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-30T02:02:20.447

老线程，现在的问题。

正如 Milo 和 Isaac 在 Milo 的回答之后提到的那样，似乎没有可用于 iPhone 5 的“通用”参数。

值得一提的是，这里是使用 MRPT 校准工具运行的结果，使用一部不错的旧 iPhone 5：

```
[CAMERA_PARAMS]
resolution=[3264 2448]
cx=1668.87585
cy=1226.19712
fx=3288.47697
fy=3078.59787
dist=[-7.416752e-02 1.562157e+00 1.236471e-03 1.237955e-03 -5.378571e+00]

Average err. of reprojection: 1.06726 pixels (OpenCV error=1.06726) 
```

请注意，这`dist`意味着这里的失真。

我正在用这些参数对一个玩具项目进行实验——有点好。如果您确实在自己的项目中使用它们，请记住，它们可能不足以开始使用。最好的办法是使用您自己的数据遵循 Milo 的建议。MRPT 工具非常易于使用，并带有它们提供的棋盘格。希望这确实有助于入门！****

# android - 如何完成销毁的Activity

> ID：14680953
> 
> 赞同：13
> 
> 时间：2013-02-04T05:36:21.397
> 
> 标签：android, android-activity, activity-lifecycle

据我了解，正在*销毁*的活动并不等同于正在*完成*的活动。

*   *完成的*
    *   该活动从[后台堆栈](http://developer.android.com/guide/components/tasks-and-back-stack.html)中删除。
    *   它可以由程序触发（例如通过调用[`finish()`](http://developer.android.com/reference/android/app/Activity.html#finish())），或者由用户按下后退键（隐式调用[`finish()`](http://developer.android.com/reference/android/app/Activity.html#finish())）触发。
    *   完成一项活动将摧毁它。
*   *毁坏*
    *   Android 操作系统可能会破坏不可见的活动以恢复内存。当用户导航回活动时，活动将被重新创建。
    *   当用户旋转屏幕时，Activity 被销毁并重新创建。
    *   *参考：[重新创建活动](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)*

那么**我该如何完成一个被破坏的活动**呢？该[`finish()`](http://developer.android.com/reference/android/app/Activity.html#finish())方法需要一个[`Activity`](http://developer.android.com/reference/android/app/Activity.html)对象，但如果活动被破坏，我没有[`Activity`](http://developer.android.com/reference/android/app/Activity.html)对象 - 我不应该持有对被破坏活动的引用，是吗？

* * *

***案例分析：***

我有一个活动`a`，它开始`b`，然后开始`c`（使用[`Activity.startActivity()`](http://developer.android.com/reference/android/app/Activity.html#startActivity(android.content.Intent))），所以现在[后面的堆栈](http://developer.android.com/guide/components/tasks-and-back-stack.html)是：

```
a → b → c 
```

在`c`中，用户填写表格并点击提交按钮。使用 . 向远程服务器发出网络请求[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)。任务完成后，我[举杯祝酒](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)，并通过调用[`c.finish()`](http://developer.android.com/reference/android/app/Activity.html#finish()). 完美的。

***现在考虑这种情况：***

当异步任务正在进行时，用户切换到另一个应用程序。然后，由于内存限制，Android 操作系统决定销毁所有 3 个活动 ( `a`, `b`, )。`c`稍后，异步任务完成。现在我该如何完成`c`？

***我试过的：***

*   致电[`c.finish()`](http://developer.android.com/reference/android/app/Activity.html#finish())：
    *   不能，因为`c`被破坏了。
*   致电[`b.finishActivity()`](http://developer.android.com/reference/android/app/Activity.html#finishActivity(int))：
    *   不能，因为`b`被破坏了。
*   使用[`Context.startActivity()`](http://developer.android.com/reference/android/content/Context.html#startActivity(android.content.Intent))with[`FLAG_ACTIVITY_CLEAR_TOP`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)以提升`b`到顶部，从而完成`c`：

    ```
    // appContext is an application context, not an activity context (which I don't have)
    Intent intent = new Intent(appContext, B.class);    // B is b's class.
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    appContext.startActivity(intent); 
    ```

    *   失败，`appContext.startActivity()`抛出异常：

> android.util.AndroidRuntimeException：从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？

***编辑：*** *澄清：*我需要等到异步任务完成并`c`根据服务器的响应决定是否完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:10:47.310

> android.util.AndroidRuntimeException：从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？

*   当您从后台线程或服务启动活动时，通常会发生此异常。每当您需要“启动器” 类型的行为时，您都需要传递
    [FLAG_ACTIVITY_NEW_TASK标志。](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)

    *   只需添加`mIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);`以避免此异常。

* * *

*   **不建议您尝试杀死活动的方式，让android自行处理。完成已经被破坏的活动没有任何意义。**

* * *

**现在，你能做什么？**

*   如果您在应用程序不在前台时完成活动时遇到问题，您可以做的是实施安全检查，仅当应用程序处于前台时才能完成活动以进入后台活动，否则只需跳过该步骤。

*   我认为您正试图在应用程序处于后台时终止该活动。这样做似乎有点困难，但是您可以使用[onUserLeaveHint](http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint%28%29)来决定应用程序何时进入后台以完成活动，或者您可以通过添加来完成`finish();`活动`onStop()`。只需确保 asynctask`onPost()`不会再次完成它以避免异常。

*   查看[android:clearTaskOnLaunch](http://developer.android.com/guide/topics/manifest/activity-element.html#clear)属性并将其设置为 true。

    谷歌文档说这个属性是：

    > 例如，有人从主屏幕启动活动 P，然后从那里转到活动 Q。用户接下来按 Home，然后返回到活动 P。通常，用户会看到活动 Q，因为那是他们最后一次做P的任务。但是，如果 P 将此标志设置为“true”，则当用户按下 Home 并且任务进入后台时，它上面的所有活动（在本例中为 Q）都将被删除。所以用户返回任务时只看到P。

    我认为这正是您想要的情况。

希望这会给你一些提示来完成你想要的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:09:54.323

您可以从`onPostExecute`c 中的方法广播您的操作，并在 a 和 b 中注册广播`receiver`以接收该操作。然后在那个接收器`onRevice`方法中完成

在`c`，异步任务，

```
 void onPostExecute(Long result) {
         ----
         Intent intent1 = new Intent("you custom action");
    context.sendBroadcast(intent1);
     } 
```

在`a`和`b`

```
registerReceiver(new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                finish();

            }
        },new IntentFilter("you custom action")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T06:40:43.653

就个人而言，我会使用通知栏来通知用户他的查询状态。

这样，我就可以避免未完成活动的整个问题。只有当用户还没有点击提交按钮时，我才会保持活动未完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T06:09:09.290

关于在活动被销毁之前准确调用的[android 手册](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29) `onDestroy()`，因此您可以在其中调用完成（即使您可以在完全终止活动之前停止您的 bg 线程）。

我们可以假设如果活动被杀死，我们也不对 bg 线程感兴趣，例如，如果 bg 线程要下载需要完成的图像等 - 所以你必须使用服务而不是 asynctask。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T02:35:53.263

无法直接完成已破坏的活动，因此只需`finish()`将其放入其中`onCreate()`（由[@Labeeb P](https://stackoverflow.com/questions/14680953/how-to-finish-a-destroyed-activity/14681275#comment20525777_14681265)建议）。就是这样：

1.  如果活动在尝试完成时已经被破坏，请在某处保存一个布尔标志。

    ```
    if(activity != null)
    {
        // Activity object still valid, so finish() now.
        activity.finish();
    }
    else
    {
        // Activity is destroyed, so save a flag.
        is_activity_pending_finish = true;
    } 
    ```

    *   如果即使应用程序被销毁，标志也需要保留，请使用持久存储，例如[`SharedPreferences`](http://developer.android.com/guide/topics/data/data-storage.html#pref)（[@Labeeb P](https://stackoverflow.com/questions/14680953/how-to-finish-a-destroyed-activity/14681275#comment20525777_14681265)建议）。
2.  在活动中`onCreate()`，检查标志并调用`finish()`。

    ```
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        if(is_activity_pending_finish)
        {
            is_activity_pending_finish = false; // Clear the flag.

            // This activity should have been finished, so finish it now.
            finish();
            return;
        }

        ...
    } 
    ```

    *   如果同一个 Activity 类有多个实例，您可能需要的不仅仅是一个布尔标志来标识要完成的特定活动实例。

* * *

调用`finish()`实际上`onCreate()`是一个合法的操作，正如[文档中提到的](http://developer.android.com/training/basics/activity-lifecycle/starting.html#Destroy)那样：

> ...您可能会[`finish()`](http://developer.android.com/reference/android/app/Activity.html#finish())从内部调用[`onCreate()`](http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle))以破坏活动。在这种情况下，系统会立即调用[`onDestroy()`](http://developer.android.com/reference/android/app/Activity.html#onDestroy())而不调用任何其他生命周期方法。

* * *

其他注意事项：

*   在应用程序处于后台时完成活动可能不是一个好主意，特别是如果它是唯一的活动。确保您不会混淆用户。
*   为了获得更好的用户体验，如果您在应用程序处于后台时完成了一项活动，您可能需要通知用户。考虑使用[toasts](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)（适用于短期通知）或[通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)（适用于用户可能忘记的长时间操作）（[@Stephan Branczyk](https://stackoverflow.com/a/14681568/1402846)和[@dilix](https://stackoverflow.com/questions/14680953/how-to-finish-a-destroyed-activity/14681275#comment20526217_14681258)建议）。

当然，被销毁的活动并不一定意味着应用程序处于后台（可能还有另一个前台活动）。尽管如此，上述解决方案（调用`finish()`）仍然`onCreate()`有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-22T20:07:02.683

当系统试图销毁您的 Activity 时，它会调用`onSaveInstanceState`. 在这里你可以打电话`finish()`。就是这样。

Warning: I've never tried this, so I don't know for sure if there are any issues with calling finish() from onSaveInstanceState. If you try this, please comment and let me know how it works out.

# java - 使用反射实例化实现特定接口的 Java 类

> ID：14680954
> 
> 赞同：3
> 
> 时间：2013-02-04T05:36:27.783
> 
> 标签：java, class, reflection, interface

我是反射的新手。我看过一些问题和教程。

假设我有一个由 3 个**类 A、B、C实现的接口**

```
public interface MyInterface {
doJob(); 
```

}

现在使用反射我想调用每个类

```
Class<?> processor = Class.forName("com.foo.A");
Object myclass = processor.newInstance(); 
```

我不能将整个过程限制为特定类型，而不是创建一个对象。我只想调用**MyInterface**类型的类。

如果我通过 com.foo.A 它应该创建 A 类对象，com.foo.B 应该创建 B 类对象，但是如果我通过一些存在但仍然没有实现 MyInterface 的 com.foo.D 不应该被调用.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T05:45:42.377

尝试

```
MyInterface newInstance(String className) throws ClassNotFoundException, InstantiationException, IllegalAccessException {
    Class<?> cls = Class.forName(className);
    if (!MyInterface.class.isAssignableFrom(cls)) {
        throw new IllegalArgumentException();
    }
    return (MyInterface) cls.newInstance();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:47:42.383

好吧，Java 反射是一种通用机制，所以如果您只使用问题中提供的代码，就无法实现您想要实现的目标。这就像询问如何限制 Java 创建类型对象而不是实现“MyInterface”的对象。Java 的“新”是通用的，它将允许创建您想要的任何对象。

通常，您可以为此编写自己的代码。而不是直接调用

```
Class.forName 
```

调用自己的代码

您可以在编译时/运行时实现类似的东西。

编译类型检查示例（您需要创建一个 Class 对象）：

```
public T newInstance(Class<T extends MyInterface cl) {
  return cl.newInstance();
} 
```

Evgeniy Dorofeev 已经发布了运行时示例

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:02:30.553

试试下面的代码

```
 package com.rais.test;

public class Client {

    public static void main(String[] args) {
        try {
            System.out.println(createObject("com.rais.test.A"));
            System.out.println(createObject("com.rais.test.D"));

        } catch (Exception e) {
            e.printStackTrace();
        }
}

public static MyInterface createObject(String className)
        throws ClassNotFoundException, InstantiationException,
        IllegalAccessException {

    Class<?> clazz = Class.forName(className);

    if (MyInterface.class.isAssignableFrom(clazz)) {
        return (MyInterface) clazz.newInstance();

    } else {

        throw new RuntimeException(
                "Invalid class: class should be child of MyInterface");
    }

} 
```

# css - 如何将水平文本淡化为垂直渐变？

> ID：14680956
> 
> 赞同：1
> 
> 时间：2013-02-04T05:36:40.240
> 
> 标签：css

文本淡入淡出应该出现在左边的纯文本和右边的淡化文本。在这个例子中，我只使用 CSS 制作了如何让木星看起来像地球和火星？

```
.hello-jupiter {
    display:inline-block;
    background: rgba(215, 215, 215, 1);
    color:white;
    box-shadow: inset 0px 10px 15px -10px rgba(50, 50, 50, .5), inset 0px -10px 25px -10px rgba(50, 50, 50, .75);
} 
```

![在此处输入图像描述](../Images/9344150151dae4f4effab51c878cc359.png)

[jsfiddle](http://jsfiddle.net/w92xv/1/) <-- 实际上使用 box-shaodw 而不是渐变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:49:22.043

我发现这个网站对 CSS 很方便...

[http://www.css3maker.com/css-gradient.html](http://www.css3maker.com/css-gradient.html)

从[css3maker](http://www.css3maker.com/)网站生成的 CSS：

```
.hello-jupiter {
    display:inline-block;
    background: rgba(215, 215, 215, 1);
    color:white;
    background:-webkit-gradient(linear, 100% 0%, 37% 0%, from(#FFFFFF), to(#000000))
} 
```

这仅适用于 Chrome 和 Safari 4.0+ 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:03:04.190

这是一个答案。我只是将一个 div 向右浮动，使其从 0 到 100% 的不透明度褪色。

```
.hello-jupiter {
    display:inline-block;
    background: rgba(215, 215, 215, 1);
    color:white;
    box-shadow: inset 0px 10px 15px -10px rgba(50, 50, 50, .5), inset 0px -10px 25px -10px rgba(50, 50, 50, .75);
    position:relative;
}

.fader {
    position:absolute;
    top:0px;
    right:0px;
    display:block;
    width:75px;
    background: -webkit-linear-gradient(left,rgba(255, 255, 255, 0) 0%,rgba(255, 255, 255, 1) 75%)
} 
```

![在此处输入图像描述](../Images/70001265c56147a143c6a7cc86454dea.png)

[http://jsfiddle.net/w92xv/45/](http://jsfiddle.net/w92xv/45/)

# c# - SQL表中行的增量值

> ID：14680962
> 
> 赞同：3
> 
> 时间：2013-02-04T05:37:13.970
> 
> 标签：c#, sql, sql-server

`Metal_Master`我在该列中有一个表，`Opening_Weight`我通过获取先前的值并添加一些值然后再次更新该值来更新该列的值。

我的代码是

```
ConnectionDB ReturnMWeight = new ConnectionDB("SELECT Opening_Weight FROM Metal_Master WHERE Metal_Name='GOLD';");
DataTable weighttd = ReturnMWeight.returntable();
GoldW = GoldW + Convert.ToDouble(weighttd.Rows[0][0].ToString());
ConnectionDB AddMWeight = new ConnectionDB("UPDATE Metal_Master SET Opening_Weight=" + GoldW + " WHERE Metal_Name='GOLD';");
AddMWeight.AddData(); 
```

但我想直接更新单个查询中的值请帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T05:41:14.110

您可以`UPDATE`直接执行此操作而无需运行 select 语句，

```
UPDATE Metal_Master 
SET Opening_Weight = Opening_Weight + new_Value
WHERE Metal_Name='GOLD' 
```

为了更好的代码质量，

*   使用`using`声明进行正确的对象处理
*   用于`try-catch`正确处理意外异常。
*   参数化查询以防止`sql injection`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:41:46.987

您可以使用集合右侧的列名。

```
 ConnectionDB AddMWeight = new 
 ConnectionDB("UPDATE Metal_Master SET Opening_Weight = Opening_Weight " +  10 + " WHERE Metal_Name='GOLD';"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:41:56.487

试试这个 ：

```
ConnectionDB AddMWeight = new ConnectionDB("UPDATE Metal_Master SET Opening_Weight=(SELECT SUM(Opening_Weight) AS Opening_Weight FROM Metal_master WHERE Metal_Name = 'GOLD')" + GoldW + " WHERE Metal_Name='GOLD';");
AddMWeight.AddData(); 
```

# android - 对齐 AutoCompleteTextView 文本位置

> ID：14680964
> 
> 赞同：0
> 
> 时间：2013-02-04T05:37:35.513
> 
> 标签：android

![在此处输入图像描述](../Images/a88d7c087b03f7b00dffae8c9d962eac.png)我正在开发一个 RTL 应用程序，并希望我的 AutoCompleteTextView 小部件从右到左显示文本，但现在它显示在左侧。我尝试在我的 xml 文件中执行此操作，但没有运气。请有人帮助我。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="10dip"
android:gravity="right"> 

<TextView
    android:id="@+id/cusNameTV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/customerName"
    android:textColor="#FFFFFF" 
    android:layout_gravity="right"
    />

<AutoCompleteTextView
    android:id="@+id/cusName_CB"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:48:28.840

好的，让它工作。供其他开发人员将来参考。你需要创建一个TextView。我已将其保存为 dropdowntext.xml

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/dropDown"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="right"
android:textColor="@android:color/black"
android:background="@android:color/white"/> 
```

然后在代码中你需要添加4参数构造函数

```
ArrayAdapter <Customer> customerSpinner = new ArrayAdapter<Customer>(MainMenuActivity.this, R.layout.dropdowntext,R.id.dropDown, customers);
customerTextView.setAdapter(customerSpinner); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:42:18.650

**下拉文本.xml**

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/text_dropDown"
    android:layout_width="fill_parent"
    android:layout_height="30dp"
    android:gravity="right">

</TextView>

final ArrayAdapter<Customer> customerSpinner = new ArrayAdapter<Customer>(MainMenuActivity.this, R.layout.dropdowntext​m, customers);
cusName_CB.setAdapter(AutoCompleteAdapter); 
```

# jquery - jQuery统一重复

> ID：14680970
> 
> 赞同：1
> 
> 时间：2013-02-04T05:38:36.637
> 
> 标签：jquery, dialog, uniform

我在我的主页上使用 jquery uniform，只需使用下面的代码

```
$(document).ready(function () {
    $("select").uniform();

});
$('#opendiv').load("popuppage.php").dialog({
        width: 420,
        height: 520,
        modal: true,
        draggable: false,
        resizable: false,
        title: 'Title',
        buttons: {
            Cancel: function () {
                $('#opendiv').dialog("close");
            },
            Submit: function () {
                $("#formname").submit();
            }
        }
    }); 
```

正如您在我的代码中看到的那样，主页会打开一个对话框弹出窗口，该对话框会加载一个页面并显示诸如选择之类的表单元素，除非我在弹出页面本身中再次调用统一，否则在我完成弹出窗口并关闭后，它们没有应用统一，如果我尝试单击主页上的选择它不起作用，请查看它在检查器中的外观

![在此处输入图像描述](../Images/ee56e2c4b624e161252a27e180ab7167.png)

制服被涂了两次，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:51:28.810

来自文档：

```
// Avoid styling some elements
$("select").not(".skip_these").uniform();  // Method 1
$('select[class!="skip_these"]').uniform();  // Method 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:42:56.113

你应该让你的选择器更*具体*。当你在`<select>`对话框的元素上应用 uniform 时，你也将它**重新应用**`<select>`到到处的元素上。

在选择 HTML 页面中的元素时，尽量做到具体。[在这里](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)阅读。

# c# - 我们可以从客户端添加泛型类的新功能吗？

> ID：14680977
> 
> 赞同：0
> 
> 时间：2013-02-04T05:39:23.907
> 
> 标签：c#, .net, class, generics

假设我有一个通用的 Product 类。

```
public class Product
{
    public int ProductID { get; set; }
    public string ProductName { get; set; }
    public string Category { get; set; }
    public decimal UnitPrice { get; set; }
    public int UnitsInStock { get; set; }
} 
```

在客户端代码将是

```
 List<Product> prdList = new List<Product>(); 
```

**我的问题，是否可以在不影响实际通用产品类的情况下从客户端添加通用列表集合的新功能？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:47:19.213

只是子类`Product`：

```
public class OurProduct : Product
{
    public string ProductSKU { get; set; }
} 
```

并这样使用它：

```
List<OurProduct> prdList = new List<OurProduct>(); 
```

# android - 监控 Android 中的热点状态

> ID：14680978
> 
> 赞同：7
> 
> 时间：2013-02-04T05:39:25.423
> 
> 标签：android, android-intent, broadcastreceiver

我是安卓新手。
我想通过`broadcastreceiver`( `onReceive`) 接收信息以了解用户是否启用/禁用`"Portable Wi-Fi Hotspot"` `(Settings->Wireless &Networks->Tethering & portable hotspot)`。
检查这个[链接](http://androidxref.com/4.0.4/xref/frameworks/base/wifi/java/android/net/wifi/WifiManager.java#132) 我发现有“ `android.net.wifi.WIFI_AP_STATE_CHANGED`”但它被设置为隐藏。我怎么能用它？？？

提前致谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-04T06:03:49.990

要接收启用/禁用“便携式 Wi-Fi 热点”事件，您需要将 WIFI_AP_STATE_CHANGED 的接收器注册为：

```
mIntentFilter = new IntentFilter("android.net.wifi.WIFI_AP_STATE_CHANGED");
registerReceiver(mReceiver, mIntentFilter); 
```

在 BroadcastReceiver onReceive 中，我们可以使用 as 提取 wifi 热点状态`wifi_state`：

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if ("android.net.wifi.WIFI_AP_STATE_CHANGED".equals(action)) {

             // get Wi-Fi Hotspot state here 
            int state = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE, 0);

            if (WifiManager.WIFI_STATE_ENABLED == state % 10) {
                // Wifi is enabled
            }

        }
    }
}; 
```

您可以通过在 AndroidManifest 中声明 Receiver 来执行相同`android.net.wifi.WIFI_AP_STATE_CHANGED`操作，并在其中包含所有必要的 wifi 权限`AndroidManifest.xml`

**编辑 ：**

在 AndroidManifest 中添加接收器为：

```
<receiver android:name=".WifiApmReceiver">
    <intent-filter>
        <action android:name="android.net.wifi.WIFI_AP_STATE_CHANGED" />
    </intent-filter>
</receiver> 
```

您可以查看[此](https://github.com/classicnerd/android_packages_apps_CNWidgets/blob/master/AndroidManifest.xml)示例以获得更多帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T09:47:12.437

Hii #user802467 在此链接的评论中回答了您的问题：[如何获取 wifi 热点状态](https://stackoverflow.com/questions/11841421/how-to-get-wifi-hotspot-state)。由于版本 4 及更高版本，值介于 10-13 之间。您可以按照链接中的说明轻松获取实际状态。

# android - 如何在android中水平移动对象并举个例子

> ID：14680979
> 
> 赞同：0
> 
> 时间：2013-02-04T05:39:35.830
> 
> 标签：android

我是 android 新手。我正在开发这款游戏，它是一款射击游戏，所以我需要一把枪才能在屏幕上移动并猎杀动物。现在我需要水平移动枪，任何人都可以帮我.. 我该如何移动一个物体屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:46:44.767

检查这个[博客](http://obviam.net/index.php/moving-images-on-the-screen-with-androi/)。在这个博客的帮助下，我还创建了一个射击游戏。

这显示了如何在屏幕上移动图像。博客本身提供了相同的源代码。

在教程的开头，他们已经给出了上一篇文章的链接，我建议你先阅读上一篇文章，因为后面的文章是前一篇文章的延伸。阅读第一篇文章将有助于更好地理解这个概念。

如果您遇到任何问题，请随时询问

# zend-framework - 命令行中的 Zend Framework 模块

> ID：14680980
> 
> 赞同：0
> 
> 时间：2013-02-04T05:39:45.917
> 
> 标签：zend-framework, command-line, module, command-line-interface

我有 Zend Framework 命令行应用程序。我在此应用程序中使用的所有模型和东西现在都在默认模块（应用程序前缀）中，但我想将它们移动到 cli 模块。当我将模型移动到 application/cli/model 文件夹并重命名类名时，自动加载器找不到它们。我也有管理模块，它工作正常。

这是我的 server.php 文件：

```
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(__DIR__ . '/../application'));
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'development'));
require_once 'Zend/Application.php';
$application = new Zend_Application(
            APPLICATION_ENV,
            APPLICATION_PATH . '/configs/application.ini'
);
$application->getBootstrap()->bootstrap(array('date', 'config')); 
```

这是我的application.ini：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
resources.modules[] = "" 
```

我应该怎么做才能使模块在命令行模式下工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:19:47.633

我猜您缺少 Cli 模块的引导文件 - 它应该位于`application/modules/cli/Bootstrap.php`. 您可能还需要通过将模块和前端控制器资源添加到您的阵列来确保它们被初始化，从而为您提供：

```
$application->getBootstrap()->bootstrap(array('date', 'config', 'modules', 'frontController')); 
```

如果不是，我们将需要更多信息，包括您遇到的错误、您尝试使用的类以及它的定义位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:49:58.357

您需要的是一个 cli 入口点。

通常，您在浏览器中的 index.php（或 /）上输入应用程序，也就是通过 http。这通常会构建一个响应和一个路由器。因为你不是通过网络来的，所以你必须稍微调整一下。

因此，创建一个用作入口点的文件，例如 cli.php（从 public/index.php 复制它）。并对其进行一些调整

```
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);

// bootstrap and retrieve the frontController resource
$front = $application->getBootstrap()
                     ->bootstrap('frontController')
                     ->getResource('frontController');

//Which part of the app we want to use?
$module     = 'default'; //or other module
$controller = '<your controller>';
$action     = '<your action>';

//create the request
$request = new Zend_Controller_Request_Simple ($action, $controller, $module, $options);

// set front controller options to make everything operational from CLI
$front->setRequest($request)
      ->setResponse(new Zend_Controller_Response_Cli())
      ->setRouter(new Custom_Controller_Router_Cli())
      ->throwExceptions(true);

// lets bootstrap our application and enjoy!
$application->bootstrap()
            ->run(); 
```

# cassandra - 获取列等于某个值的键列表？

> ID：14680981
> 
> 赞同：1
> 
> 时间：2013-02-04T05:39:58.223
> 
> 标签：cassandra, cql

如果我在 STATUS 列上有二级索引，我想获取所有具有 STATUS='processed' 的键（在某个范围内）。我怎么能在不阅读任何专栏的情况下做到这一点？我只需要键列表，因此只能访问索引（每个节点一次磁盘搜索而不是 2 个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:55:50.737

用户不能直接访问二级索引，因此您需要对已编制索引的 CF 运行索引查询并获取键。如果您想保证只有一次磁盘搜索，您需要创建自己的索引（即包含所有“已处理”键的 CF），以便您可以直接查询它。

# c# - 将值从 c# 文本框传递到 html 页面？

> ID：14680990
> 
> 赞同：0
> 
> 时间：2013-02-04T05:41:12.810
> 
> 标签：c#, webpage

如何将文本值从 c# 文本框发送到网页？我已经实现了连接代码：

```
 WebClient client = new WebClient();
 String url="the url of the webpage"
 Stream data = client.OpenRead(url); 
```

该网页包含一个文本框和按钮....现在我想从 c# 客户端应用程序调用（文本框和按钮）...如何实现？

现在我收到以下错误：

```
The remote server returned an error: (405) Method Not Allowed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:43:22.643

您可以使用 QueryString 将值传递给页面。

URL变成--> Url?ValueForPage=txtBox.Text

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:47:15.970

这是您可以执行的操作：

1- 创建一个网页，如 www.test.com/default.aspx

2-传递查询字符串参数，如 www.test.com/default.aspx？**文本框值=123**

3- 在 default.aspx 的 Page_load 中将查询字符串值分配给网页文本框

4-从您的应用程序中调用网页，例如

```
WebClient client = new WebClient();
 String url=@"www.test.com/default.aspx?textboxvalue=" + [Your textbox value]
  Stream data = client.OpenRead(url); 
```

编辑：

如果您无权访问代码，那么您可能正在寻求自动化网​​页。要自动化，您可以使用[http://watin.org/](http://watin.org/)。

这是示例代码

```
using (var browser = new IE("http://www.google.com"))
  {
    browser.TextField(Find.ByName("q")).TypeText("WatiN");
    browser.Button(Find.ByName("btnG")).Click();

    Assert.IsTrue(browser.ContainsText("WatiN"));
  } 
```

# sql - 通过替换特定字符串来更新列值

> ID：14680997
> 
> 赞同：1
> 
> 时间：2013-02-04T05:42:12.340
> 
> 标签：sql

我有一列将数据保存在这样的行中：

```
Col1 '2118,2110,2114,2112',
Col2 '2110,2111,2112,2113,2114,2115,2117,2118,2119,2152,2153' and 
Col3 '2110,2111,2113,2114'. 
```

`2110`现在，当我运行删除命令删除时，我想从每一列中替换`2110`。

我尝试的是（我正在为 col1 值执行此操作 - 我在字符串的开头和结尾添加一个逗号，因此它符合结果，即如果逗号在 2110 之后为 '2110'，在开头为 ',2110' 并且从开始和结束为 ',2110,')

```
DECLARE @TagId VARCHAR(MAX)
SET @TagId = '2118,2110,2114,2112'
print 'Select Tag ' + @TagId
SET @TagId = ',' + @TagId + ','
print 'Adding comma ' + @TagId
SET @TagId = REPLACE(@TagId,',2110,',',')
print 'Replace the string ' + @TagId
SET @TagId = SUBSTRING(@TagId,1,LEN(@TagId))
print 'Replace start comma ' + @TagId
SET @TagId = SUBSTRING(@TagId,0,LEN(@TagId) -1)
print 'Replace end comma' + @TagId
SELECT @TagId 
```

现在的问题是它没有替换我在开始时添加的开始和结束的逗号。请建议我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:52:55.467

为什么要在开头和结尾添加逗号？当然，您可以像这样替换：

```
DECLARE @TagId VARCHAR(MAX)
SET @TagId = '2118,2110,2114,2112'
SET @TagId = REPLACE(@TagId, '2110' , '') 
```

然后去掉双逗号：

```
SET @TagId = REPLACE(@TagId, ',' , ',') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:47:53.823

尝试这个 ：

```
DECLARE @TagId VARCHAR(MAX)
SET @TagId = '2118,2110,2114,2112'
print 'Select Tag ' + @TagId
SET @TagId = ',' + @TagId + ','
print 'Adding comma ' + @TagId
SET @TagId = REPLACE(@TagId,',2110,',',')
print 'Replace the string ' + @TagId
SET @TagId = SUBSTRING(@TagId,2,LEN(@TagId))
print 'Replace start comma ' + @TagId
SET @TagId = SUBSTRING(@TagId,0,LEN(@TagId))
print 'Replace end cooma' + @TagId
SELECT @TagId 
```

更多关于[SUBSTRING](http://msdn.microsoft.com/en-us/library/ms187748.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:09:25.260

尝试这个，

```
DECLARE @TagId VARCHAR(MAX)
SET @TagId = '2118,2110,2114,2112'
print 'Select Tag ' + @TagId
SET @TagId = ',' + @TagId + ','
print 'Adding comma ' + @TagId
SET @TagId = REPLACE(@TagId,',2110,',',')
print 'Replace the string ' + @TagId
SET @TagId = CASE WHEN LEN(@TagId) > 1 THEN SUBSTRING(@TagId,2,LEN(@TagId)) 
             ELSE @TagId END
print 'Replace start comma ' + @TagId
SET @TagId = SUBSTRING(@TagId,1,LEN(@TagId) -1)
print 'Replace end comma ' + @TagId
SELECT @TagId 
```

# jsf-2 - 是否可以在运行时切换 bean 的范围？

> ID：14680998
> 
> 赞同：0
> 
> 时间：2013-02-04T05:42:15.707
> 
> 标签：jsf-2, controller, javabeans

我正在使用 JSF 2.0 构建应用程序。我想做的是取决于用户是否勾选了复选框，我希望将bean的范围从请求更改为会话..这可能吗？

或者在勾选复选框时使用请求范围覆盖默认的“会话”范围......

我尝试了很多研究，但我什至不确定这是否可能。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:57:34.110

在运行时无法更改托管 bean 的范围。但是，您可以在运行时轻松更改 bean 的行为。

例如

```
@ManagedBean
@RequestScoped
public class MultiScopedBean {

    @ManagedProperty("#{requestScopedBean}")
    private RequestScopedBean requestScopedBean;

    @ManagedProperty("#{sessionScopedBean}")
    private SessionScopedBean sessionScopedBean;

    private boolean sessionScoped; // Bind this to the checkbox.

    // ...

    public Object getSomeProperty() {
        if (sessionScoped) {
            return sessionScopedBean.getSomeProperty();
        } else {
            return requestScopedBean.getSomeProperty();
        }
    }

    public void setSomeProperty(Object someProperty) {
        if (sessionScoped) {
            sessionScopedBean.setSomeProperty(someProperty);
        } else {
            requestScopedBean.setSomeProperty(someProperty);
        }
    }

    // ...
} 
```

是的，它最终会变成一些样板文件，但这就是你得到这样一个奇怪的要求的结果。