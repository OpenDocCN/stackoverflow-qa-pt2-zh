# StackOverflow 问答 12584000-12584999

# asp.net-mvc - 使用列表编写 Distinct LINQ 查询

> ID：12584005
> 
> 赞同：0
> 
> 时间：2012-09-25T13:29:22.483
> 
> 标签：asp.net-mvc, linq

我有以下 LINQ 查询来填充我的模型。

```
var blogs = (from b in Context.Blogs
                    select new BlogTreeView
                               {
                                   Created = EntityFunctions.TruncateTime(b.Created),
                                   Children = (from ba in Context.Blogs
                                               where EntityFunctions.TruncateTime(ba.Created) == EntityFunctions.TruncateTime(b.Created)
                                               select new BlogTitle
                                                          {
                                                              ID = ba.ID,
                                                              Title = ba.Title
                                                          })
                               }).Distinct(); 
```

问题是 distinct 给出以下错误：“'Distinct' 操作无法应用于指定参数的集合 ResultType。\r\n参数名称：参数”

我也试过这个：

```
var blogs = (from b in Context.Blogs
                    select new BlogTreeView
                               {
                                   Created = EntityFunctions.TruncateTime(b.Created)
                               }).Distinct(); 
```

这只会给我想要的唯一日期。

然后我尝试在 foreach 的帮助下将孩子添加到模型中：

```
 foreach (var item in blogs)
        {
            item.Children = (from ba in Context.Blogs
                             where
                                 EntityFunctions.TruncateTime(ba.Created) ==
                                 EntityFunctions.TruncateTime(item.Created)
                             select new BlogTitle
                             {
                                 ID = ba.ID,
                                 Title = ba.Title
                             });
        } 
```

但是对于子列表，我的返回值为 null 。在我的 foreach 循环中，子列表具有我想要的值，但在返回字段中没有。

我做错了什么，为什么第一个查询给了我这个错误？

# php - mysql服务器拒绝了php admin请求的连接

> ID：12584010
> 
> 赞同：0
> 
> 时间：2012-09-25T13:29:42.880
> 
> 标签：php, mysql, phpmyadmin, xampp

我对 PHP 和 xampp 比较陌生。我现在正在使用我的计算机开发 java 和 php。所以我已经在我的电脑上安装了一个 mysql 服务器。我成功安装了xampp。但是当我试图访问 phpMyAdmin 时，它给了我一个错误说

```
mysql server rejected the connection php admin requested 
```

（这不是实际的错误，但这就是它的意思..）

我尝试停止我当前的 MySQL 服务并再次安装它。我尝试配置 config.inc.php，我认为这是这样做的方式。但我对此无能为力。

谁能告诉我如何配置和使用我的计算机进行 php 开发，保持我当前的 mysql 服务器不变。

谢谢你。

PS：我目前的mysql服务器没有问题。它工作正常。
问题是我不能将它与我用 Xampp 安装的 phpmyadmin 一起使用。
我认为这是因为 Xampp 拥有自己的 mysql 服务器，并且 phpmyadmin 配置为使用它。
那就是问题所在。

**我想使用与 xampp 捆绑在一起的当前 mysql 服务器。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:15:16.333

我已经成功解决了我的问题。
我停止了当前的 mysql 服务并安装了 xampp。不要忘记取消选中它要求您在安装向导上安装服务的位置。
然后我启动了已经安装的mysql服务。
并编辑**config.inc.php**如下..

> $cfg['Servers'][$i]['auth_type'] = 'config'

至

> $cfg['Servers'][$i]['auth_type'] = 'cookie'

并且您将被提示在 phpmyadmin 登录时提供您当前的密码和用户名。

**感谢所有试图帮助我的人..**

# hibernate - 使用 Hibernate 工具添加 Hibernate Search Annotations

> ID：12584011
> 
> 赞同：1
> 
> 时间：2012-09-25T13:29:43.930
> 
> 标签：hibernate, freemarker, hibernate-annotations, hibernate-search, hibernate-tools

我正在使用带有注释的休眠和带有 freemarker 模板的休眠工具来自动生成我的 orm dao 类。

现在我想实现休眠搜索，因此想为这些类和属性添加休眠搜索注释。

但我不知道如何以及在哪里可以配置我希望休眠工具注释的类和属性。

freemarker 模板的问题是，我只能为所有类定义一般的类生成策略。但是对于休眠搜索实现，我只想注释特定的类和这些类中的特定属性。

有什么方法可以定义我希望通过休眠工具注释的类和 getter 属性？或者在构建过程之后自动注释类？

到目前为止我可以排除的解决方案：

*   代码生成后手动添加注释->必须自动
*   在 freemarker 模板中使用多个 if 语句，例如“if class name == test do add @Index to class”-> 太多了，尤其是属性的注释
*   向 reveng.xml 文件添加一些设置 -> 至少我不知道这有什么帮助

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-14T13:16:33.043

> 如何使用 Hibernate 工具任务向 DAO 生成中的类和属性添加 Hibernate 搜索注释。

似乎没有办法告诉休眠执行此任务以添加自定义注释。但是您可以使用一些代码来完成。

您应该扩展休眠 POJOExporter 类，并在扩展类中，将所有键和值添加到附加上下文中。这些键和值将在您的 ftl 文件中可用。在 ftl 中，您可以决定添加基于这些键和值道具的注释。这是扩展的 pojo 出口商

```
public class JavaDAOExporter extends PojoExporter {

    private static final String JAVA_DAO_FTL = "templates/hibernate/java/dao.ftl";
    private String serviceId;

    public JavaDAOExporter() {
        super();
    }

    public JavaDAOExporter(Configuration cfg, File outputdir, String serviceId, MetaDataDialect metadataDialect) {
        super(cfg, outputdir, metadataDialect);
        this.serviceId = serviceId;
    }

    protected void init() {
        super.init();
        setTemplateName(JAVA_DAO_FTL);
        setFilePattern("{package-name}/dao/{class-name}Dao.java");
    }
    @Override
    protected void exportPersistentClass(Map additionalContext, POJOClass element) {
        //Element is the pojo class,here you can take decision to add annotation in the class,if so add your key&value attributes.Which will be used in ftls.
        additionalContext.put("searchAnnotationForClass", true);
        exportPOJO(additionalContext, element);
    }

    public String getName() {
        return "hbm2javadao";
    }

    protected void exportComponent(Map additionalContext, POJOClass element) {
        // noop - we dont want components
    }

} 
```

模板就像

```
package ${pojo.getPackageName()}.dao;

<#assign classbody>
<#assign declarationName = pojo.importType(pojo.getDeclarationName())>
import org.springframework.stereotype.Repository;

@Repository("${serviceId}.${declarationName}Dao")
//Adding annotation only if searchAnnotationForClass is true
<#if true = searchAnnotationForClass>
@Search("${serviceId})
</#if>
public class ${declarationName}Dao{
//add all your dao template
} 
```

同样，您可以为属性执行此操作。

# java - 使用 TimerTask 每 5 秒用 Java 编写一个文件

> ID：12584012
> 
> 赞同：1
> 
> 时间：2012-09-25T13:29:58.817
> 
> 标签：java, file, timertask, seconds

我试图每 5 秒将一些字符串附加到文件中，但我遇到了一些问题。

我的Java代码是：

```
File file = new File("MyFile.txt");

FileWriter outFile = new FileWriter(file);

final PrintWriter out = new PrintWriter(outFile);

new Timer().scheduleAtFixedRate(new TimerTask()
{
    public void run()
    {
        out.println("Test string...");
    }, 0, 5 * 1000);
}

out.close(); 
```

但我注意到我的文件总是空的：它什么也没写！

我认为我的问题出在 TimerTask 类中，但我无法解决。

有没有更好的方法每 N 秒写入一个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:32:27.560

这真的是你的代码吗？它不起作用，因为您在安排计时器任务后立即关闭输出流。任务运行时，输出流已经关闭，不能再写入。

确保在向其写入数据之前不要关闭输出流。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T13:32:40.757

计时器在不同的线程中运行，因此文件编写器首先关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:32:31.677

您关闭了 OutputStream。

另外我会使用 apache commons-io FileUtils，它使处理文件 IO 的工作更加轻松。

[http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html)

# c# - 什么是惰性实例化

> ID：12584013
> 
> 赞同：5
> 
> 时间：2012-09-25T13:29:58.843
> 
> 标签：c#, lazy-initialization

延迟实例化是否使用更少的代码但获得相同的结果？当然，这通常是一件好事（只要使代码简短/高效不会损害可读性/可维护性）。

请参考这个惰性实例化：

```
public sealed class Singleton
{
    private Singleton()
    {
    }

    public static Singleton Instance { get { return Nested.instance; } }

    private class Nested
    {
        // Explicit static constructor to tell C# compiler
        // not to mark type as beforefieldinit
        static Nested()
        {
        }

        internal static readonly Singleton instance = new Singleton();
    }
} 
```

没有私有属性`Instance`（我知道它是隐含的） - 是不是让它变得懒惰 - 事实上我们在属性中没有设置器`public static Singleton Instance`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T13:37:56.223

假设我们有一个构造昂贵的类型的字段

```
class Foo
{
    public readonly Expensive expensive = new Expensive();
    ...
} 
```

这段代码的问题在于，实例化`Foo`会导致实例化的性能成本`Expensive`——无论该`Expensive`字段是否被访问过。显而易见的答案是按需构造实例或*懒惰地*实例化该字段：

```
class Foo
{
    Expensive _expensive;
    public Expensive
    {
        get
        {
            if (_expensive == null) _expensive = new Expensive();
            return _expensive;
        }
    }
    ...
} 
```

这是懒惰的实例化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T13:32:22.710

延迟初始化是一种仅**在第一次需要**时才加载或初始化对象的做法。

这可能会给您带来很大的性能提升，尤其是当您的应用程序中有大量组件时。

查看[Wikipedia](http://en.wikipedia.org/wiki/Lazy_loading)页面以获得更深入的了解（它包含编码示例）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T13:31:39.613

*不，惰性实例化意味着在您真正*需要之前不要花费任何时间和资源来创建某些东西。

在您的单例示例中，在`instance`实际使用之前，它只是一个空引用。当它被使用时，*你*会花费资源来实例化对象`new`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T13:31:47.277

它是懒惰的，因为该类的实例`Singleton`直到您第一次请求它时才创建。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-25T13:32:00.257

**对象的延迟初始化**意味着它的创建被推迟到它第一次被使用。

有关完整参考，请参阅 msdn 后[延迟初始化](http://msdn.microsoft.com/en-us/library/dd997286.aspx)

在您上面的代码中，在您调用它之前不会创建单例类的实例。因此，在调用您的代码之前，您的程序不会使用资源。

# javascript - 当onClick也是一个javascript事件时如何使用window.open？

> ID：12584015
> 
> 赞同：1
> 
> 时间：2012-09-25T13:30:03.067
> 
> 标签：javascript, dom-events, window.open, new-window

我想让这个 Javascript 打开一个新窗口。我不知道把它放在哪里，`window.open`因为它占据了[www.cuteredshoes.com](http://www.cuteredshoes.com)浏览器窗口。我想在单独的窗口（或选项卡）中打开两个店面。

```
<script type='text/javascript' src='http://stephen-paul-west.artistwebsites.com/slideshowmouseover.php?id=1234011&memberidtype=artistid&memberid=123401&width=250px&height=250px'></script>
<img id='faaslideshowimage[1234011]' onClick='javascript: mouseclick1234011(event);' onMouseOver='javascript: mouseover1234011();' onMouseOut='javascript: mouseout1234011();'src='http://fineartamerica.com/Blank.jpg' style='width: 250px; height: 250px; padding: 0px; margin: 0px; border: 1px solid #666666; cursor: pointer; cursor: hand;' alt='Art Prints' title='Art Prints' 
```

# javascript - 使用分隔符组合对象数组的元素

> ID：12584019
> 
> 赞同：1
> 
> 时间：2012-09-25T13:30:29.483
> 
> 标签：javascript, prototype

这是一个简单的问题，有许多简单的解决方案，我试图找出哪个最好。我想要一个简洁易读的解决方案。

这就是问题所在。我有一个对象数组，我想将几​​个对象成员组合成管道分隔的字符串。作为此数据的示例：

```
[
    {
        foo: 1,
        bar: 2
    },
    {
        foo: 10,
        bar: 20
    }
] 
```

我希望能够创建这样的字符串：

```
foo = "1|10";
bar = "2|20"; 
```

如果项目存储在单独的数组中，这就像使用 Array.join 一样简单。

这是我目前的解决方案：

```
var foo = "";
var bar = "";

var firstItem = obj.splice(0,1)[0];
foo = firstItem.foo.toString();
bar = firstItem.bar.toString();

obj.forEach(function (item) {
    foo += "|" + item.foo.toString();
    bar += "|" + item.bar.toString();
​}); 
```

我还考虑了使用 Array.reduce 的以下解决方案，但仍然缺乏对此的浏览器支持。我正在使用 Prototype，不幸的是，[它的 Array.reduce与](http://prototypejs.org/api/array/reduce "它是 Array.reduce")[原生 JS 实现](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce "原生 JS 实现")完全不同。

```
var strings = obj.reduce(function (a, b) {
    return {
        a.foo.toString() + "|" + b.foo.toString(),
        a.bar.toString() + "|" + b.bar.toString()
    };
});

// value of strings is now:
// {
//     foo: "1|10",
//     bar: "2|20"
// } 
```

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:41:41.133

你可以这样做：

```
function propsArrayJoin(arr, prop, glue) {
  var results = [];
  arr.forEach(function (item) {
    results.push(item[prop].toString());
​ });
  return results.join(glue);
}

obj = [
    {
        foo: 1,
        bar: 2
    },
    {
        foo: 10,
        bar: 20
    }
];

foo = propsArrayJoin(obj, 'foo', '|');
bar = propsArrayJoin(obj, 'bar', '|'); 
```

# javascript - 如何使用jquery将html存储在隐藏字段中？

> ID：12584025
> 
> 赞同：2
> 
> 时间：2012-09-25T13:30:44.613
> 
> 标签：javascript, jquery

如何使用 jquery 在隐藏字段中存储带有 HTML 标签的字符串？我正在使用下面的代码。但它不起作用。

```
var terms = $('#TermsAndCondition').val();
    alert($('#hdnTerms').val(terms)); 
```

这里的 TermsAndCondition 是 TextArea 而 hdnTerms 是隐藏字段。在警报中它返回对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:33:20.810

使用这样的东西

```
var value=$("input[type=hidden]").val();
alert(value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:35:01.940

你只是查询错了，试试这个

```
var terms = $('#TermsAndCondition').val();
alert($('#hdnTerms').val(terms).val()); //Note the extra .val() so you get the value 
```

`.val(terms)`返回一个 jQuery 对象，而不是值，您需要`.val()`不带参数调用才能获得返回的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:37:46.653

要访问该值，您必须`val()`不带参数调用。
我可以建议你简单地使用：

```
//hide terms when you don't need them
$("#TermsAndCondition").hide();

//show them again when you want
$("#TermsAndCondition").show(); 
```

不知道你想在那里实现什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:35:28.090

分配给`.val()`不返回文本（它返回一个 jQuery 对象），将您的测试更改为：

```
$('#hdnTerms').val(terms);
alert($('#hdnTerms').val()); 
```

# html - @media 查询 - 为什么 css 规则会否决另一个规则？

> ID：12584026
> 
> 赞同：0
> 
> 时间：2012-09-25T13:30:53.693
> 
> 标签：html, css, media-queries

我使用媒体查询`max-width: 768px;` 并将元素的css规则设置为`left: 80px;`

然后在这下面我有另一个媒体查询，目标最大宽度为 800px，并且我将相同的元素设置为`left: 94px;`

但是，当我将屏幕尺寸更改为较小的 768 并使用萤火虫检查时，规则`left: 80px;`被划掉并且`left: 94px;`正在被遵循。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:42:30.233

因为`max-width 800px`覆盖`768px`，因为你在`768px`使用它之后调用`min-width`它 – [Arpit Srivastava](https://stackoverflow.com/users/1306308/arpit-srivastava)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:43:07.487

因为`max-width:800px`覆盖`768px`是因为你在调用它之后`768px`所以使用`min-width`它来代替它

# ruby-on-rails - 如何在运行时检查数据库表列的存在和数据类型？

> ID：12584029
> 
> 赞同：0
> 
> 时间：2012-09-25T13:30:57.750
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3

我正在使用 Ruby on Rails 3.2.2，我想检查给定模型类的数据库表列*是否存在*以及该列的*数据类型*（例如：`String`、、`Integer`...）。也就是说，我在`lib`目录中实现了一个 Ruby 模块，其中一个方法传递给它一个模型类（例如：）`Article`，我只想验证某些相关数据库表列的一些条件，仅此*而已*。

在我的模块方法中，我尝试使用[column_exists?](http://apidock.com/rails/v3.2.8/ActiveRecord/ConnectionAdapters/SchemaStatements/column_exists?) 方法如下

```
module MyModule
  def check_column(model_class)
    table = model_class.to_s.tableize

    unless ActiveRecord::Base.connection.column_exists?(table.to_sym, :title)
      raise ...
    end
  end
end 
```

但没有成功：与[column_exists 相关的（奇怪的）输出错误？](http://apidock.com/rails/v3.2.8/ActiveRecord/ConnectionAdapters/SchemaStatements/column_exists?)方法是这样的

```
Mysql2::Error: Table '<MY_APP_NAME>_development.<A_TABLE_NAME>/<ANOTHER_TABLE_NAME>/<ANOTHER_TABLE_NAME>' doesn't exist: SHOW FULL FIELDS FROM `<A_TABLE_NAME>/<ANOTHER_TABLE_NAME>/<ANOTHER_TABLE_NAME>` 
```

我应该做什么才能在运行时正确检查数据库表列的*存在*和*数据类型？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:36:30.120

您可以使用`ActiveRecord::Base.connection`直接向 DBM 发送查询。

从那里您可以要求 DBM 描述一个特定的表，然后解析字段以找出有关数据类型的任何信息。

# wpf - WindowsFormsHost 导致 System.Windows.Forms.Button.Click 事件不触发

> ID：12584038
> 
> 赞同：3
> 
> 时间：2012-09-25T13:31:20.860
> 
> 标签：wpf, button, windowsformshost

我正在将 Windows 窗体应用程序转换为 WPF，并在转换的第一部分重新使用一些 winform 控件。

为了托管 winform 控件，我使用的是 WindowsFormsHost，并且似乎正在发生的事情是 enter 按键不会导致在 winforms 按钮上触发 Button.Click 事件（但是，用鼠标和空格键单击仍然有效）。

您可以通过执行以下操作重现此行为：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"  
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <WindowsFormsHost>
        <wf:Button Text="Hello" Click="Button_Click_1"  />
    </WindowsFormsHost>
</Grid> 
```

我正在考虑向 WindowsFormsHost 添加一个事件处理程序来调用 Button.PerformClick 如果按下了输入并且按钮被聚焦，但我觉得一定有一些我忽略了*为什么*输入不会导致按钮点击发生.

# html - 防止远程站点 HTML 受 CSS 影响

> ID：12584039
> 
> 赞同：1
> 
> 时间：2012-09-25T13:31:31.447
> 
> 标签：html, css, iframe

我有一个应用程序，我允许用户在他们的网站上添加一段代码，这反过来又在网站上添加了一个小部件，允许他们的用户与应用程序进行交互等。

我现在正在做的是将我所有的 html 放在他们放置在网站上的容器中，并且（希望）具有唯一的 ID。让我们说 ts 容器。然后，在网站上加载的用于设置元素样式的 css 中，我将 #ts-container 放在样式表中每个选择器的前面。这是保护我的 css 不影响其页面元素的最佳且唯一的方法，还是有某种方法可以包装整个样式表而不必实际标识每个类？有没有办法将样式表放在包装容器中并让它只影响那些元素或其他东西？我应该在 iframe 或类似的东西中这样做吗？

只是寻找一些建议，以防我在我的情况下错过了最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:47:20.500

您可以对 CSS 进行子重置：

```
#ts-container * {
    margin: 0;
    padding: 0;
    font-size: 13px;
    font-weight: normal;
    background-color: white;
    color: black;
} 
```

您可能需要输入一些额外的样式，但这应该可以防止父文档中的任何 CSS 影响您的小部件。

`iframe`不过，s 是一种更简单的方法。是否使用它们是一种设计选择。

# winforms - 为什么在 WebBrowser.DocumentCompleted 处理程序上关闭表单时弹出 IE 窗口

> ID：12584046
> 
> 赞同：1
> 
> 时间：2012-09-25T13:31:51.053
> 
> 标签：winforms, webbrowser-control

我有一个具有 WebBrowser 控件的表单。Onload，它导航到某个 URL。在 DocumentCompleted 事件处理程序上，获取所需数据后，表单将关闭。这在大多数情况下都有效，但有时它会在表单关闭后弹出一个带有相同 URL 的 IE 窗口。

我注意到在 DebugView 中，它会记录`m_useSurfacePresenter 1`. 在调用 Close() 之前记录此内容时，没有弹出窗口。但是，在调用 Close() 后记录此内容时，会出现弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:01:23.960

您需要检查该文档中的 JavaScript .onunload 事件，如果它设置为在卸载该页面时打开一个新窗口（浏览器），那么当您关闭托管 webbrowser 控件的 winform 时，它将被触发，并且在翻，一页。

因此，当您关闭 winform 时，由于事件在 Document/Page --> WB Control --> WinForms Form 设置中的链接方式，webbrowser 控件中的页面 onUnload 事件也将被触发。

您实际上可以将其设置为空，通过在 WB 控件中运行指向页面的特定 JS 命令，您可以将 .OnUnload 事件设置为“ `function () {};`”，这将确保它设置的任何内容都将变为 Nothing/Null。这是一个代码示例：

> window.onunload = 函数 () { };

让我知道它是怎么回事，如果这不能解决它，我会帮助你。注意上面是 JS，也有直接从 WB Control 执行 JS 的方法，网上很多例子，实际上有两种方法，一种使用 .execScript，另一种使用较新的方法，即 .InvokeScript。

# ios - 销售音乐的应用内购买

> ID：12584047
> 
> 赞同：1
> 
> 时间：2012-09-25T13:31:52.053
> 
> 标签：ios, xcode

我已经阅读了他们的 IAP 文档，但找不到明确的答案。我可以使用 IAP 出售自己的音乐（托管在我的服务器上）吗？

Apple 会批准我的应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:42:33.367

由于您使用 IAP 并拥有销售音乐的适当权利，因此完全没有问题。

也许这会有所帮助：[https ://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html#//apple_ref/doc/uid/TP40008267-CH100-SW1](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html#//apple_ref/doc/uid/TP40008267-CH100-SW1)

# javascript - D3 - 部分强制有向图

> ID：12584053
> 
> 赞同：3
> 
> 时间：2012-09-25T13:32:07.367
> 
> 标签：javascript, graph, d3.js, force-layout

由于我是初学者，这是关于 D3.js 的另一个问题。

我已经构建了一个力有向图，就像很多人一样。

所有节点都存储在一个数组中，所有链接都存储在另一个数组中。

现在我希望将中心节点固定在 svg 的中间，而其他节点则在它周围徘徊。

是否有可能只从力布局中删除一个节点而不会从我的网络中掉出来？有人已经做到了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:50:41.287

您可以将`fixed`节点的属性设置为`true`，然后将其放置在您喜欢的位置 - 请参阅[此相关问题](https://stackoverflow.com/questions/12496851/d3-force-graph-sticky-nodes)。

```
// explicity set node position
var fixedNode = graph.nodes[0];
fixedNode.fixed = true;
fixedNode.x = width/2;
fixedNode.y = height/2; 
```

工作小提琴：http: [//jsfiddle.net/nrabinowitz/z2cye/](http://jsfiddle.net/nrabinowitz/z2cye/)

# regex - 获得一个单词优先于正则表达式匹配？

> ID：12584059
> 
> 赞同：2
> 
> 时间：2012-09-25T13:32:19.073
> 
> 标签：regex

我想评估类似于以下的表达式：

**这是蓝色的街道**

您可以使用正则表达式来确定颜色，如下所示：

**.? （青色 | 绿色 | 红色 | 蓝色）**

到目前为止一切顺利，但是，我如何确定导致颜色的对象？也就是说，在这种情况下，我想回收“Street”这个词，但它可以是“Car”、“Arrow”或任何其他名词。

简而言之，是否有可能构造一个正则表达式，在这种情况下，一旦找到特定点（数学）的颜色，就可以得到最后一个单词，它对应于应用颜色的对象，或者是相同的，正则表达式找到匹配之前的单词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:49:37.310

以下正则表达式应该可以工作：

```
(\w+)\s+(blue|green|cyan) 
```

颜色匹配之前的单词将在捕获组 1 中。

爪哇测试：

```
Pattern p = Pattern.compile("(\\w+)\\s+(blue|green|cyan)");
Matcher matcher = p.matcher("This is the street blue");
if(matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:53:31.917

使用[单词边界](http://www.regular-expressions.info/wordboundaries.html)来获取颜色之前的单词（使用[前瞻](http://www.regular-expressions.info/lookaround.html)）：

```
/\b.+\b(?=\s+(cyan|green|red|blue))/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:02:36.090

这个表达式是最适合您正在寻找的表达式，肯定需要进一步的数据处理，但它确实很有用。

谢谢大家的意见

# python - python爬取ajax页面使用pywebkit和threadpool？

> ID：12584063
> 
> 赞同：0
> 
> 时间：2012-09-25T13:32:35.290
> 
> 标签：python, multithreading, pygtk

我想使用 python 抓取 AJAX 站点，我参考了这篇文章： [http](http://blog.motane.lu/2009/06/18/pywebkitgtk-execute-javascript-from-python/) : //blog.motane.lu/2009/06/18/pywebkitgtk-execute-javascript-from-python/ 它使用 gtk 和 pywebkitgtk。

但我想知道如何同时抓取页面（多线程）。

我在下面写代码，似乎pool.apply_async不能调用do_crawl函数。如果使用 pool.apply，将调用 do_crawl。

```
import gtk
import webkit
from multiprocessing.pool import ThreadPool

class WebView(webkit.WebView):
    def get_html(self):
        self.execute_script('oldtitle=document.title;document.title=document.documentElement.innerHTML;')
        html = self.get_main_frame().get_title()
        self.execute_script('document.title=oldtitle;')
        return html

class Crawler(gtk.Window):
    def __init__(self, url):
        gtk.gdk.threads_init() # suggested by Nicholas Herriot for Ubuntu Koala
        gtk.Window.__init__(self)
        self._url = url

    def crawl(self):
        view = WebView()
        view.open(self._url)
        view.connect('load-finished', self._finished_loading)
        self.add(view)
        gtk.main()

    def _finished_loading(self, view, frame):
        view.get_html()
        gtk.main_quit()

def main():
    pool = ThreadPool(10)
    [pool.apply_async(do_crawl, ('http://google.com/')) for i in range(100)]
    pool.join()

def do_crawl(url):
    crawler = Crawler(url)
    crawler.crawl()

if __name__ == '__main__':
    main(
    ) 
```

# mysql - 需要在 SQL 中连接 3 个表

> ID：12584064
> 
> 赞同：0
> 
> 时间：2012-09-25T13:32:37.210
> 
> 标签：mysql, sql

我是`MySQL`......我正在尝试`left join`3 个表，其中一个包含**some_id、name、count、descr**，第二个包含**id、some_id、uni_id**，最后一个包含**uni_id、price、add 等**所以当我尝试加入这三个表，它说没有这样的字段命名`descr`

在不修改它们的结构的情况下加入这些表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:34:45.480

假设以下架构：

*   `table1(some_id, name, count, descr)`，`some_id`主键在哪里；
*   `table2(id, some_id, uni_id)`,`some_id`的外键在哪里`table1`;
*   `table3(uni_id, price, added)`,`uni_id`的外键在哪里`table2`。

您需要做的只是`LEFT OUTER JOIN`三个表之间的一个：

```
SELECT *
FROM table1 t1 LEFT JOIN table2 t2 ON (t1.some_id = t2.some_id)
  LEFT JOIN table3 ON (t2.uni_id = t3.uni_id) 
```

### 参考：

*   [左外连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)
*   [加入语法](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:35:10.240

如果您可以发布表的架构，那将是理想的。在没有看到查询的情况下，听起来您引用了一个字段，您可能已将其别名为错误的表。

在最基本的层面上，“descr”并不存在，因为你试图引用它，但除此之外，如果不看到查询本身就很难说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:36:42.330

```
SELECT descr
FROM table1
LEFT JOIN table2 ON table2.some_id = table1.some_id
LEFT JOIN table3 ON table3.uni_id = table2.uni_id 
```

应该做的伎俩。

# javascript - 按下回车时，组合框自动完成自动选择建议列表的顶部项目

> ID：12584069
> 
> 赞同：1
> 
> 时间：2012-09-25T13:32:49.463
> 
> 标签：javascript, jquery, jquery-ui

我已经在下面的演示中使用了 jquery 组合框自动完成功能。

> [jquery组合框自动完成](http://jqueryui.com/demos/autocomplete/#combobox)

当我按下回车按钮时，如何使 jquery 组合框自动完成自动选择建议的顶部项目？

所以用户不需要输入全文.. thx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:38:39.897

自动选择第一项的自动完成插件的扩展。只需将 selectFirst 选项设置为 true：

```
$('#auto').autocomplete({
      selectFirst: true
}); 
```

**[检查这个小提琴](http://jsfiddle.net/DaxHb/)**

[http://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.selectFirst.js](http://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.selectFirst.js)

# servicestack - ServiceStack Mvc 中通用 ServiceStackController 上的对象空引用异常

> ID：12584071
> 
> 赞同：1
> 
> 时间：2012-09-25T13:32:59.143
> 
> 标签：servicestack

在 ServiceStack 中，这条线是不正确的。

userSession = this.Cache.Get(SessionKey); （线：28）

**调用此代码时，缓存为空。**

我的生产网站现在坏了。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:01:50.447

我的大错。这段代码

```
container.Register(new MemoryCacheClient()); 
```

必须先打电话

```
 Plugins.Add(new AuthFeature(() => new OzUserSession(),
        new IAuthProvider[] {
            new OzCredentialsAuthProvider(appSettings)
        })); 
```

但 ServiceStackController 也会抛出有意义的异常（缓存无法解析），因为它具有缓存的依赖关系！

# cairo - 安装 Pango-1.30.1 的问题

> ID：12584074
> 
> 赞同：7
> 
> 时间：2012-09-25T13:33:09.487
> 
> 标签：cairo, pango

我在 Ubuntu 12.04 平台上安装 Pango-1.30 时遇到问题。在 ./configure 步骤中，我收到一条消息“无法启用任何 Freetype、X11、Cairo 或 Win32 后端。必须至少有一个后端才能构建 Pango”。但是，我已经构建并安装了 Freetype 和 X11，它们位于 /usr/bin 中。我如何通知 ./configure 从哪里获取它们？

谢谢，马克阿林

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T23:54:09.953

确保您已安装所有依赖项，您可以在 README 文件中找到它们。

他们是：

*   字体配置
*   自由式
*   哈夫嗡嗡声

# android - 寻找没有代码访问权限的 Android 功能 GUI 测试工具

> ID：12584076
> 
> 赞同：2
> 
> 时间：2012-09-25T13:33:19.570
> 
> 标签：android, functional-testing, robotium

我正在寻找一个没有源代码基础的 Android 功能 GUI 测试工具。我发现的大多数东西都是`ActivityInstrumentationTestCase2<Activity>`从 Android SDK 扩展而来的 JUnit 测试框架。但我寻找一种提供 f 的工具。可执行程序。按钮单击，在不知道 Activity 类名称、包或更多信息的情况下输入字符串到 txt 字段等。

完美将是在已经启动的 Android 应用程序上找到小部件的东西，可以在没有我上面告诉的信息的情况下从其他应用程序与它进行交互。我正在查看 Robotium RC，但没有找到任何信息、教程等，只有 JavaDoc 和`.jar`文件。

编辑：它应该是开源的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:18:08.877

我认为你应该看看标准的[monkeyrunner](http://developer.android.com/tools/help/monkeyrunner_concepts.html) android 工具。借助此工具，您可以启动应用程序、模拟拖动手势、按下按钮、点击屏幕。要自动化这些脚本的创建过程，您可以使用`monkeyrecorder.py`脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:13:19.743

你可以试试bot-bot。以下是链接：

[http://imaginea.github.com/bot-bot/](http://imaginea.github.com/bot-bot/)

它可以将自身与 apk 集成。如果您有被测应用程序的源代码，则效果最好。

# c# - 如何在 Parallel.Foreach 中定义计数器并以特定数字停止该循环

> ID：12584079
> 
> 赞同：4
> 
> 时间：2012-09-25T13:33:22.300
> 
> 标签：c#, .net-4.0, console-application, parallel.foreach

如何在 Parallel.Foreach 中定义计数器并**以特定数量停止该战利品**？
我问这个问题是因为 Parallel.ForEach 中的计数器在常规操作中不起作用。
请看这个小例子：

```
static void Main(string[] args)
{
    int Count_Step = -1;
    string[] lines = new string[] 
    { 
        "0",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "11",
        "12",
        "13",
        "14",
        "15",
        "16",
        "17",
        "18",
        "19"
    };

    List<string> list_lines = new List<string>(lines);

    ParallelOptions parallelOptions = new ParallelOptions();
    parallelOptions.MaxDegreeOfParallelism = 3;

    Parallel.ForEach(list_lines, parallelOptions, (line, state, index) =>
    {
        if (Count_Step == 10)
            state.Stop();
        Count_Step++;
        Console.WriteLine(index + " : " + line + " : " + Count_Step);
        //Thread.Sleep(5000);
    });

    Console.ReadLine();
} 
```

我想要输出 10 行，而不是更多！
我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T13:44:02.287

如果您只想输出 10 行，请改为执行此操作，

```
static void Main(string[] args)
{
    var lines = new List<string> 
    { 
        "0",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        ...
    };

    var parallelOptions = new ParallelOptions
        {        
            MaxDegreeOfParallelism = 3
        };

    Parallel.ForEach(lines.Take(10), parallelOptions, (line, index) =>
    {
        Console.WriteLine("{0} : {1}", index, line);
        ////Thread.Sleep(5000);
    });

    Console.ReadLine();
} 
```

或者

```
static void Main(string[] args)
{
    var lines = new List<string> 
    { 
        "0",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        ...
    };

    var parallelOptions = new ParallelOptions
        {        
            MaxDegreeOfParallelism = 3
        };

    Parallel.For(0, 9, parallelOptions, i =>
    {
        Console.WriteLine("{0} : {1}", i, lines[i]);
        ////Thread.Sleep(5000);
    });

    Console.ReadLine();
} 
```

甚至

```
static void Main(string[] args)
{
    var lines = new List<string> 
    { 
        "0",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        ...
    };

    Enumerable.Range(0, 10).AsParallel().WithDegreeOfParallelism(3).ForAll(i =>
    {
        Console.WriteLine("{0} : {1}", i, lines[i]);
        ////Thread.Sleep(5000);
    }

    Console.ReadLine();
} 
```

* * *

如果您真的希望您的并行迭代更新循环外的某些值，那么您将需要确保更改变量的所有更新和读取都是线程安全的。

如果你要增加一个整数，你可以这样做。

```
var stepCount = 0;

Enumerable.Range(0, 10).AsParallel().WithDegreeOfParallelism(3).ForAll(i =>
    {
        var thisCount = Interlocked.Increment(ref stepCount);
        Console.WriteLine("{0} : {1} : {2}", i, lines[i], thisCount);
        ////Thread.Sleep(5000);
    }

Console.ReadLine(); 
```

但是，`thisCount`控制台窗口中的输出并不保证是连续的，两行之间可能存在线程切换。

如果你想做一些更复杂的事情，比如取消部分处理，你应该看看[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T13:47:49.313

尝试`Parallel.For()`

[Parallel.For 方法](http://msdn.microsoft.com/en-us/library/dd782869.aspx)

# actionscript-3 - Flex Actionscript 中的动态树生成

> ID：12584081
> 
> 赞同：0
> 
> 时间：2012-09-25T13:33:31.920
> 
> 标签：actionscript-3, flex4.5

我正在使用[URL](http://www.programmingwall.com/flex/creating-a-dynamic-tree-in-flex/)逻辑使用动作脚本在 Flex 中创建动态树。但是，那`output is not properly shown (Object name is shown instead of Label).` ![在此处输入图像描述](../Images/1785440dc922ff265504a7e14d4a7e28.png)

代码可在上述 URL 中找到。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:46:41.783

编写 DataTreeNode 的正确 toString() 实现，以便它在此树中正确显示。

一个例子：假设类 DataTreeNode 有一个 data:Object 字段，并且这个对象有一个你想要显示的 urlToDisplay:String 属性。这样做：

```
override public function toString():String {
    if (!data) return '[null]';
    return data.urlToDisplay;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:15:13.220

如果您只依赖简单的对象或数据类，您可以使用树的**labelField**或**labelFunction**来读取和/或格式化传递给渲染器的数据。不需要新的项目渲染器类。

新的渲染器应该兼容这些功能！

在网站上说明：项目渲染器不是“主要是简单的 MXML 类”，它们是组件实例。如何实现并不重要。有一些最佳实践，比如在项目渲染器中避免数据绑定，这就是为什么使用标记进行绘制很常见，但根据 Flex 组件的生命周期实现视图行为。您可能想在文档中阅读有关它的内容，因为它是 Flex 开发人员必读的内容。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-25T13:57:10.317

您必须编写一个 ItemRenderer 来告诉您的树应该如何显示组件。ItemRenderer 大多只是简单的 MXML 类，它们分别访问一个项目并以您想要的任何方式显示数据。您必须将 ItemRenderer 分配给您的组件。

请参阅这篇文章： [http ://help.adobe.com/en_US/flex/using/WS03d33b8076db57b9-23c04461124bbeca597-8000.html](http://help.adobe.com/en_US/flex/using/WS03d33b8076db57b9-23c04461124bbeca597-8000.html)

# pointers - OpenCV 和（不）返回 IplImages，什么时候可以，什么时候不行？

> ID：12584086
> 
> 赞同：0
> 
> 时间：2012-09-25T13:33:50.990
> 
> 标签：pointers, opencv, null, return, iplimage

这样做可以吗，代码片段当然不完整，只是为了说明我的意思：

```
void draw(IplImage* image){
cvLine(image,cvPoint(20,20),cvPoint(100,100),cvScalar(0,0,255),1);}

int main(){

cvNamedWindow("preview",CV_WINDOW_AUTOSIZE);
IplImage* image;
image=cvCreateImage(cvSize(480,360),8,3);
while(true){
draw(image);
cvShowImage("preview",image);
int ops=cvWaitKey(10)
if ops!=-1 break;}
cvReleaseImage(&image);cvDestroyWindow("preview");return 0;
} 
```

或者如果我不返回这样的 IplImage 会导致问题：

```
IplImage* draw(IplImage* image){
    cvLine(image,cvPoint(20,20),cvPoint(100,100),cvScalar(0,0,255),1);return image;} 
```

好吧，我问的原因是，如果我不返回 IplImage，有时它会起作用。但是，在其他情况下，我也可能会收到某种 NULL 指针错误消息。例如，如果我在函数中释放图像，然后立即重新创建它，仍然在该函数中，则可能会发生崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:34:52.897

**你不需要返回任何东西，但**你肯定需要检查失败！

问题是您没有安全地编码。在调用 OpenCV 函数时，您永远不会检查失败，这可能会导致`draw()`接收`NULL`指针作为参数，这可能会导致崩溃或其他一些奇怪的行为。

您应该做的第一件事是开始防御性地编码：

```
IplImage* image = cvCreateImage(cvSize(480,360),8,3);
if (!image)
{
    // print error and quit
} 
```

在你的函数中添加安全检查不会有什么坏处：

```
void draw(IplImage* image)
{
    if (!image)
    {
        // print error
        return;
    }

    cvLine(image,cvPoint(20,20),cvPoint(100,100),cvScalar(0,0,255),1);
} 
```

# java - java是否每次调用new运算符时都会创建一个新对象

> ID：12584091
> 
> 赞同：3
> 
> 时间：2012-09-25T13:34:16.580
> 
> 标签：java

在 java 中，当我们调用 a`new Constructor()`时，每次都会创建一个新对象，即；分配了新内存，或者假设已经为一个没有任何引用的类创建了许多对象。

那么 java 是否可以返回标记为取消分配的对象，或者 java 是否会在每次调用 new constructor() 时创建一个新对象。

我问这个问题的基本意图是，如果发生这种情况，那么可以提高性能，因为创建新内存和销毁未引用对象的成本将降低。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:35:19.973

是的。

Java 永远不会重用对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T13:37:22.937

Java 总是创建新对象。请注意，`new`运算符在 Java 中非常快。没有*分配*，典型的 JVM 只会在堆上增加一个指针。一旦堆满了，旧的和不必要的对象就会被移除并被压缩。但垃圾收集是另一回事。

您的想法很聪明，但实际上*会降低*性能。JVM 不仅需要跟踪它没有执行的死对象（符合 GC 条件）。但它也必须以某种方式清理旧对象，使其看起来是新鲜的。这很重要，而且会花费很多时间。`new`更快更简单。

但是有一个问题：

```
Integer answer = 42; 
```

`42`是必须转换为`Integer`对象的文字。然而，JVM 不会简单地调用`new Integer(42)`，而是调用`Integer.valueOf(42)`。在后一种情况下，`valueOf()`有时会返回*缓存*值（例如 for `42`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T13:36:54.763

是的，当您`new`在 Java 中使用时，总是会创建一个新对象。

但是，这并不一定意味着 JVM 必须要求操作系统分配内存。JVM 如何准确分配内存取决于特定的 JVM 实现，并且很可能它包含许多优化以使其快速高效。

对象分配在 Java 中通常被认为是一种廉价的操作——通常你不需要担心它。

在当前版本的 Oracle 的 Java 中实现的复杂优化的一个例子是[逃逸分析](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#escapeAnalysis)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T13:43:40.050

创建对象和销毁未引用对象的成本是微不足道的。需要时间的是

*   检测对象何时不再被引用。为此，必须检查每个强引用。
*   将保留的对象从一代复制到另一代并对一代进行碎片整理。
*   完成实现该`finalize()`方法的对象。

如果您创建短期临时对象，无论您的 Eden 大小是 8 MB 还是 8 GB，执行次要收集所需的时间几乎相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T13:50:40.963

有一种设计模式叫做flyweight，它的主要优点是重用对象。Java 使用它来创建字符串本身。

你可以在这里了解更多信息：[http ://en.wikipedia.org/wiki/Flyweight_pattern](http://en.wikipedia.org/wiki/Flyweight_pattern)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T13:39:55.977

无论你在哪里看到`new()`，你都可以确定一个`new object is being created`..就这么简单..

# android - 如何删除 SQLITE 数据库中的第一行？

> ID：12584094
> 
> 赞同：1
> 
> 时间：2012-09-25T13:34:23.963
> 
> 标签：android, sql, sqlite, listview

我的 ListView 显示来自我的 SQLITE 数据库的数据。通过 Longclick 一个 ListViewItem 我删除了这个特定的项目。EveryThing 工作正常，但我没有删除我的第一个项目。我在 LogCat 或其他东西中没有收到任何错误。只是什么都没有发生。

这是我的**数据库类**代码：

```
public void deleteEntry(String TABLE, int pos) {
    SQLiteDatabase database = this.getWritableDatabase();
    database.delete(TABLE, KEY_ROWID + "=?" , new String[] { String.valueOf(pos)});

    // also tryed this code
    database.delete(TABLE, KEY_ROWID + "= '" + pos +"'",null);
} 
```

这是我的**ListView 活动**的代码：

```
// Deletes the given row
            database.deleteEntry(MyDatabase.DATABASE_TABLE_ORDERS, position);
            updateList(); 
```

我很确定提交的**int pos**代表相应 Databse 条目的 rowId（第一个条目**pos**为 0，第二个**pos**为 1，依此类推）

**updateList()**创建一个新的列表视图并再次从数据库中加载所有数据

有没有人知道为什么除了我的第一个条目之外，我可以删除我的数据库中的 ListView / 行中的所有项目？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:01:03.190

在阅读了你的问题几次后，我认为我最初在评论中提出的是问题......

在我看来，您正在使用该`int pos`参数并认为它是数据库中的行 ID，但事实并非如此。该`int pos`参数是列表中的位置（根据您的排序等，它可能与行 ID 不同）。

行 id 包含在`long id`侦听器的参数中。以下更改应该可以帮助您（假设我的猜测是正确的）。

```
@Override
public void onListItemClick(ListView l, View v, int pos, long id) {
       database.deleteEntry(MyDatabase.DATABASE_TABLE_ORDERS, id);  
       updateList();  
}

public void deleteEntry(String TABLE, long id) {   
    SQLiteDatabase database = this.getWritableDatabase();   
    database.delete(TABLE, KEY_ROWID + "=?" , new String[] { String.valueOf(id)});   

    // or this could be used
    database.delete(TABLE, KEY_ROWID + "= " + id ,null);   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:38:10.783

> database.execSQL("DELETE FROM " + TABLE + " ORDER BY " + column_to_order_by + " ASC LIMIT(0,1);"):

我肯定会先在测试台上测试这个！

# objective-c - 使用 NSURLConnection 从亚马逊下载

> ID：12584096
> 
> 赞同：1
> 
> 时间：2012-09-25T13:34:34.530
> 
> 标签：objective-c, nsurlconnection, amazon, afnetworking

我正在尝试使用我自己的基于 NSURLConnection 的库从亚马逊服务器下载文件。亚马逊回复此错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<Error><Code>SignatureDoesNotMatch</Code>
<Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
<StringToSignBytes>47 45 54 ... 6e 67</StringToSignBytes>
<RequestId>...</RequestId><HostId>...</HostId> 
<SignatureProvided>45ZlY98%2FyrYcHcA%2BKDmArUic5%2BI%3D</SignatureProvided>
<StringToSign>...</StringToSign>
<AWSAccessKeyId>...</AWSAccessKeyId>
</Error> 
```

我换成了“...”无奈的信息，下载链接是这样的（没理由发原创，因为寿命很短）

```
https://test111.s3-eu-west-1.amazonaws.com/uploads/post/image/152/preview_image.png?AWSAccessKeyId=AKIAJCZPX74XBX6LU7FA&Signature=45ZlY98%2FyrYcHcA%2BKDmArUic5%2BI%3D&Expires=1348578742 
```

相同的下载链接（与原始链接相同）适用于 AFNetworking 框架和 Safari，但不适用于 Chrome (!)。在我用 AFNetworking 替换我自己的库之前，你可能会告诉我我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:53:16.710

我“喜欢”这些类型的错误，它们有两个或更多的触发理由。第一个是这样的：

```
NSURL* url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

由于 aws 为您提供了已经编码的字符串，您应该避免对其进行两次编码。

第二个原因更难理解。如果您没有任何内容可放入，则不应调用 setHTTPBody。我做了...

# c# - Windows 8 应用程序 - 将 GridView 绑定到 XML

> ID：12584099
> 
> 赞同：0
> 
> 时间：2012-09-25T13:34:49.843
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime

我正在开发我的第一个 Windows 8 应用程序。我正在尝试显示一个填充有 TextBlock 的 GridView。我想从我创建的 XML 文件中获取数据。我找到了 GridView 的 ItemSource 属性，并希望将我的 XML 文件绑定到它。但是，我的 XML 文件没有显示在本地资源菜单中。

我会以错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:57:03.613

您可以使用 XmlDataProvider 将 XML 直接绑定到控件中。在此处查找示例：http: [//www.codeproject.com/Articles/26875/WPF-XmlDataProvider-Two-Way-Data-Binding](http://www.codeproject.com/Articles/26875/WPF-XmlDataProvider-Two-Way-Data-Binding)

我不确定你是否可以在 WinRT 中使用它。如果不这样做，您可以将 XML 反序列化为 List 并将其绑定到 GridView 的 ItemsSource。

# jquery - 如果 textarea 具有只读属性，则 Tinymce 自动设置为只读

> ID：12584107
> 
> 赞同：6
> 
> 时间：2012-09-25T13:35:13.843
> 
> 标签：jquery, tinymce

如果已经有，我将如何设置 tinymce 自动将编辑器设置为[只读](http://www.tinymce.com/tryit/read_only_mode.php)`textarea``attr("readonly")`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-05T11:04:19.307

一个更通用的解决方案可能是

```
tinyMCE.init({
    ...
    setup: function(ed) {
        if($('#'+ed.id).attr('readonly'))
            ed.settings.readonly = true;
    }
}); 
```

这将适用于所有文本区域，而无需指定任何 ID。此外，它实际上会将编辑器设置为只读模式，而不仅仅是阻止编辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T14:00:33.467

如果您有以下文本区域

```
<textarea id="my_textarea_id" readonly="readonly">Some content here.</textarea> 
```

您可以将具有只读属性的知识保存到变量中：

```
var readonly = $("textarea#my_textarea_id").attr("readonly") ? 1 : 0; 
```

现在是tinymce init 函数。我们选择模式`none`稍后启动编辑器。

```
tinyMCE.init({
        theme : "advanced",
        mode: 'none',
        readonly : readonly,
        ...
}); 
```

在这里，您可以使用 textarea 的 id 来初始化您的编辑器实例

```
tinyMCE.execCommand("mceAddControl", true, "my_textarea_id"); 
```

您的编辑器实例将被初始化为只读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T13:48:05.897

如果不想将 tinyMCE 应用于只读字段，`class="readonly"`则使用

```
tinyMCE.init({
    ...
    editor_deselector: "readonly"
}); 
```

具有只读类的文本区域将被忽略

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:44:24.530

如果你设置了 tinyMce 的只读模式，你应该使用 tinyMCE API。所以你可以设置只读：

```
tinyMCE.init({
        ...
        theme : "advanced",
        readonly : 1
}); 
```

如果您只想为 textarea 设置值“只读”，请注意 tinyMce 对此字段有自己的包装器，并且本机字段（来自 html） - 设置为隐藏字段，因此为一个设置任何属性都没用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-28T11:46:40.220

我有几个很小的 ​​mce，其中一些有 class="nonEditableMCE"，有些有 class="editableMCE"。如果是这种情况，您可以有两个 init 并且这是有效的。当 Id 是动态的时，使用类选择器要简单得多。

```
tinymce.init({
        selector: ".nonEditableMCE",
        height: 200,
        statusbar: false,
       readonly : 1

    });

    tinymce.init({
        selector: ".editableMCE",
        height: 200,
        statusbar: false,
        readonly: 0

    }); 
```

# c# - 使用 IXmlSerializable 对派生类进行 C# 序列化

> ID：12584109
> 
> 赞同：2
> 
> 时间：2012-09-25T13:35:17.167
> 
> 标签：c#, .net, xml-serialization, polymorphism, ixmlserializable

我会尽量让我的问题尽可能简单。下面是 2 个示例程序来演示它。如果您需要分析它，您可以将其复制并粘贴到 Visual Studio 中。

随意评论和纠正我的英语。希望你能理解我。

**我的目标是：** 我们有 2 个类 - BaseClass 和 DerivedClass。

我们要：

1.  创建 DerivedClass 的实例
2.  将其分配给 BaseClass 类型的变量
3.  将该变量序列化为 XML 文件
4.  将该文件反序列化为 BaseClass 类型的变量
5.  该变量应包含 DerivedClass 类型的对象

第一个示例程序使用“内置”序列化 - 并且工作正常。

但我想对序列化过程有更多的控制（使用 IXmlSerializable 接口）**并**达到相同的效果。

**第一个例子：**

```
[Serializable]
public class BaseClass
{
    public string property1;
    public string property2;

    public BaseClass()
    {
    }
}

[Serializable]
public class DerivedClass : BaseClass
{
    public string property3;

    public DerivedClass()
    {
    }
}

class Program
{
    static void Main(string[] args)
    {
        XmlSerializer mySer = new XmlSerializer(typeof(BaseClass), new Type [] {typeof(DerivedClass)});

        BaseClass exampleBaseClass;
        DerivedClass exampleDerivedClass = new DerivedClass();
        exampleDerivedClass.property1 = "Foo";
        exampleDerivedClass.property2 = "Bar";
        exampleDerivedClass.property3 = "Sth";

        exampleBaseClass = exampleDerivedClass;

        Console.WriteLine(exampleBaseClass.GetType());   // <----- 1
        StreamWriter sw = new StreamWriter("test.xml");
        mySer.Serialize(sw, exampleBaseClass);           // <----- 2
        sw.Close();
        StreamReader sr = new StreamReader("test.xml");
        exampleBaseClass = (BaseClass)mySer.Deserialize(sr);
        Console.WriteLine(exampleBaseClass.GetType());   // <----- 3
        Console.ReadKey();
    }
} 
```

1.  这将打印“ConsoleApplication1.DerivedClass - 没关系。
2.  这将创建包含所有 3 个属性的文件 - 没关系。
3.  这将打印“ConsoleApplication1.DerivedClass - 没关系。

**第二个例子：**

```
[Serializable]
public class BaseClass : IXmlSerializable
{
    public string property1;
    public string property2;

    public BaseClass()
    {
    }

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }
    public virtual void WriteXml(XmlWriter writer)
    {
        writer.WriteElementString("property1", property1);
        writer.WriteElementString("property2", property2);
    }
    public virtual void ReadXml(XmlReader reader)
    {
        while (reader.Read())
            switch (reader.Name)
            {
                case "property1":
                    property1 = reader.Value;
                    break;
                case "property2":
                    property2 = reader.Value;
                    break;
            }
    }        
}

[Serializable]
public class DerivedClass : BaseClass, IXmlSerializable
{
    public string property3;

    public DerivedClass()
    {
    }

    public override void WriteXml(XmlWriter writer)
    {
        writer.WriteElementString("property1", property1);
        writer.WriteElementString("property2", property2);
        writer.WriteElementString("property3", property3);
    }

    public override void ReadXml(XmlReader reader)
    {
        while (reader.Read())
            switch (reader.Name)
            {
                case "property1":
                    property1 = reader.Value;
                    break;
                case "property2":
                    property2 = reader.Value;
                    break;
                case "property3":
                    property3 = reader.Value;
                    break;
            }
    }        
}

class Program
{
    static void Main(string[] args)
    {
        XmlSerializer mySer = new XmlSerializer(typeof(BaseClass), new Type [] {typeof(DerivedClass)});

        BaseClass exampleBaseClass;
        DerivedClass exampleDerivedClass = new DerivedClass();
        exampleDerivedClass.property1 = "Foo";
        exampleDerivedClass.property2 = "Bar";
        exampleDerivedClass.property3 = "Sth";

        exampleBaseClass = exampleDerivedClass;

        Console.WriteLine(exampleBaseClass.GetType());   // This prints "ConsoleApplication1.DerivedClass - and it's OK.
        StreamWriter sw = new StreamWriter("test.xml");
        mySer.Serialize(sw, exampleBaseClass);           // This creates file, that starts with xsi:type="DerivedClass" and contains all 3 properties - and it's OK.
        sw.Close();
        StreamReader sr = new StreamReader("test.xml");
        exampleBaseClass = (BaseClass)mySer.Deserialize(sr);
        Console.WriteLine(exampleBaseClass.GetType());   // This prints "ConsoleApplication1.DerivedClass - and it's OK. Everything works just great.
        Console.ReadKey();
    }
} 
```

1.  这将打印“ConsoleApplication1.DerivedClass - 没关系。
2.  这将创建包含所有 3 个属性的文件 - 没关系。
3.  这将打印 "ConsoleApplication1.BaseClass- and **IT IS NOT OK**。生成的对象仅包含 2 个属性。

主要问题是： **如何更改简单类的定义？**

感谢您的帮助。

# javascript - 使用正则表达式提取域和子域

> ID：12584110
> 
> 赞同：0
> 
> 时间：2012-09-25T13:35:16.483
> 
> 标签：javascript, regex, subdomain

我只有一个简单的 url，我想使用正则表达式（不使用拆分函数）从 url 中提取子域和域名。假设 url 是[http://www.example.google.com/file.html](http://www.example.google.com/file.html)，那么它应该警告如下：

```
"Domain: google.com, Subdomain: example" 
```

我想只使用javascript来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:40:34.543

这是非常重要的（例如，请参见[http://www.cambiaresearch.com/articles/46/parsing-urls-with-regular-expressions-and-the-regex-object](http://www.cambiaresearch.com/articles/46/parsing-urls-with-regular-expressions-and-the-regex-object)，它甚至没有解决拆分权限的问题部分。）

您至少需要一个所有顶级域的列表才能正确执行此操作。

编辑：您需要考虑的极端案例示例：

*   google.com
*   google.co.uk
*   sergey.brin@google.com

# ruby-on-rails - Rails 3 + CarrierWave + Rspec：模型验证

> ID：12584111
> 
> 赞同：2
> 
> 时间：2012-09-25T13:35:18.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, carrierwave

我有照片模型，我通过 CarrierWave 实现了文件上传（我的应用程序运行良好）：

```
class Photo < ActiveRecord::Base
  attr_accessible :description, :image

  mount_uploader :image, ImageUploader

  validates :description, :length => { :maximum => 500, :message => :max_lenght_message }
  validates :image, :presence   => { :message => :presence_message }
end 
```

现在我想在我的模型规范中检查具有给定路径图像的模型将被保存（我将文件上传到给定路径中）：

```
require 'spec_helper'

describe Photo do
  before(:each){ @attr = { :description => "some text is here", :image => "#{Rails.root}/spec/fixtures/files/violin.jpg" } }

  describe "DB" do
    it "should create with valid params" do
      expect do
        Photo.create( @attr )
      end.should change( Photo, :count ).by( 1 )
    end
  end
end 
```

但这不起作用：

```
1) Photo DB should create with valid params
     Failure/Error: Photo.create( @attr )
     CarrierWave::FormNotMultipart:
       You tried to assign a String or a Pathname to an uploader, for security reasons, this is not allowed.         
    If this is a file upload, please check that your upload form is multipart encoded. 
```

什么是正确的处理方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T14:15:50.113

我解决了它：

```
before(:each){ 
   @attr = { :description => "some text is here", 
             :image => File.open(File.join(Rails.root, '/spec/fixtures/files/violin.jpg')) } 
} 
```

# .net - 为什么项目依赖项会传递到顶层组件

> ID：12584113
> 
> 赞同：1
> 
> 时间：2012-09-25T13:35:21.470
> 
> 标签：.net, visual-studio-2012

我有一个包含三个项目的 Visual Studio 2012 解决方案。结构的简单依赖图是：

*   控制台UI
    *   子项目
        *   Newtonsoft.Json.dll
        *   RestSharp.dll
        *   ...
    *   ...

我遇到的问题是在编译 ConsoleUI 时，RestSharp 未复制到输出，但 Newtonsoft.Json 在我的应用程序中导致运行时错误。

我已经在 SubProject 的项目属性中检查了 Copy Local 是否设置为 true。

我已经完成了完整的清理和构建，但无济于事。

任何人都可以在不手动将所需程序集包含在 ConsoleUI 中的情况下想出一个解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:15:15.173

这听起来像是 MSBuild 中长期存在的行为。当您构建 ConsoleUI 时，哪些程序集实际上会在本地复制，计算基于：

*   项目的主要参考资料（在本例中为子项目）
*   任何编译器检测到的从您的主要引用到它们的引用的引用（在这种情况下，SubProject -> Newtonsoft.Json 被检测到，但 * -> RestSharp 没有被检测到）。

解决此问题的两种方法是：

1.  添加一个从 SubProject 到 RestSharp 的显式调用（因为任何其他 DLL 都不受您的控制），编译器无法忽略。这可能并不理想，因为它是一次性代码。
2.  使 RestSharp 成为 ConsoleUI 的主要参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:23:16.030

清理你的项目，删除所有对 RestSharp 的引用，关闭 Visual Studio，手动删除 bin 和 obj 文件夹。然后重新启动您的项目并添加一个 Nuget 包参考：它肯定会解决您的问题。

# solr - Solr中的唯一键是否需要成为uuid？

> ID：12584116
> 
> 赞同：0
> 
> 时间：2012-09-25T13:35:27.680
> 
> 标签：solr, full-text-search

Solr/Lucene 模式中的唯一键可以`text_general`代替吗？我已经尝试过了，但 Solr 并没有覆盖数据，它只是添加了另一行，从而复制了数据。

我已经从以下注释掉了`solrconfig.xml`

```
<searchComponent name="elevator" class="solr.QueryElevationComponent" >
<!-- pick a fieldType to analyze queries -->
<str name="queryFieldType">string</str>
<str name="config-file">elevate.xml</str>
</searchComponent> 
```

我的`schema.xml`有

```
<uniqueKey>_id</uniqueKey>
<field name="_id" type="text_general" indexed="true" stored="true" default="NEW"/> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:26:58.457

您可以使用任何类型的[`uniqueKey`](http://wiki.apache.org/solr/SchemaXml#The_Unique_Key_Field)字段。正如您可以从文档中看到的：

> 该声明可用于通知 Solr 您的索引中有一个字段对于所有文档应该是唯一的。如果添加的文档包含与现有文档相同的字段值，则旧文档将被删除。
> 
> 架构不必具有 uniqueKey 字段。
> 
> 请注意，如果您在 solrconfig.xml 中启用了 QueryElevationComponent，则它要求架构具有 StrField 类型的 uniqueKey。例如，它不能是 int 字段。

重要的是您的 uniqueKey 字段是唯一的，这意味着同一个文档具有相同的标识符。只有这样，如果现有机制可以工作，则*替换。*使用[uuid](http://wiki.apache.org/solr/UniqueKey#UUID_techniques)字段类型，您永远不会替换文档，因为您将自动为每个文档设置不同的 id。

# magento - Magento 添加产品

> ID：12584120
> 
> 赞同：0
> 
> 时间：2012-09-25T13:35:35.537
> 
> 标签：magento, mage

我使用 mage.php 添加产品，一切正常，但数量（数量）始终设置为 0，我想将其设置为 20。我使用库 mage.php，这是我的代码。

```
require_once 'app/Mage.php';
Mage::app();
$product = Mage::getModel('catalog/product');

$product->setWebsiteIds(array(1));
$product->setSku('rand-sku-' . rand());
$product->setPrice(rand(100,2000));
$product->setAttributeSetId(4);
$product->setCategoryIds(array(3));
$product->setType('simple');
$product->setName('Product Name'.rand(1,200000));
$product->setDescription('The Product Description');
$product->setShortDescription('Brief Description');
$product->setStatus(1);
$product->setTaxClassId('1');
$product->setWeight(0);
$product->setCreatedAt(strtotime('now'));

$product->save();

$stockItem = Mage::getModel('cataloginventory/stock_item');
$stockItem->assignProduct($product);
$stockItem->setData('is_in_stock', 1);
$stockItem->setData('stock_id', 1);
$stockItem->setData('store_id', 1);
$stockItem->setData('manage_stock', 1);
$stockItem->setData('use_config_manage_stock', 0);
$stockItem->setData('min_sale_qty', 0);
$stockItem->setData('use_config_min_sale_qty', 0);
$stockItem->setData('max_sale_qty', 1000);
$stockItem->setData('use_config_max_sale_qty', 0);
$stockItem->setData('qty', 20);

$stockItem->save(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:49:44.527

以这种方式使用它会完美地工作

```
require_once('app/Mage.php');
Mage::app();

$product = Mage::getModel('catalog/product');

$product->setSku('pro11');
$product->setAttributeSetId(9);
$product->setTypeId('simple');
$product->setName('Product title');
$product->setCategoryIds(array(7));
$product->setWebsiteIDs(array(1));
$product->setDescription('Product Full description');
$product->setShortDescription('Product Short description');
$product->setPrice(250.00);
$product->setWeight(30.00);
$product->setVisibility(4);
$product->setStatus(1);
$product->setTaxClassId(0);
$product->setStockData(array(
   'is_in_stock' => 1,
    'qty' => 20
));
$product->setCreatedAt(strtotime('now'));
$product->save(); 
```

希望这个帮助！

# php - php将数组字符串拆分为数据

> ID：12584123
> 
> 赞同：0
> 
> 时间：2012-09-25T13:35:49.523
> 
> 标签：php, arrays, split, explode

下面的脚本显示了文本文件中的搜索字符串，我的文本文件的内容如下：

> 60、1、1、188、pdgje5566
> 
> 60、1、1、188、pdgje5565

```
if(!empty($extTxId)){
$searchfor = $extTxId;

$matches = array();

$handle = @fopen($file, "r");
if ($handle)
{
    while (!feof($handle))
    {
        $buffer = fgets($handle);
        if(strpos($buffer, $searchfor) !== FALSE)
            $matches[] = $buffer;
    }
    fclose($handle);
}

print_r($matches); 
```

它输出为

> 数组 ( [0] => 60, 1, 1, 188, ppje5566 )

但是我想分解由逗号（，）分隔的数据并存储到变量中，无论如何都要这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:37:31.783

> 我想分解用逗号（，）分隔的数据

使用[`explode()`](http://php.net/explode).

如果这是一个 CSV 文件（或其他一些*分隔*文件），我建议查看[`fgetcsv()`](http://www.php.net/manual/en/function.fgetcsv.php). 它是有效的`fgets()`and `explode()`，这似乎是你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:40:39.803

由于每个逗号之间都有空格，因此您可以修剪每个元素。

```
// Iterate through each item int the array (you can do $matches[0] if you just want the first)
foreach ($matches as $match)
{
     $output_array = array_map('trim',explode(',',$match));

     print_r($output_array);
} 
```

输出：

```
Array
(
    [0] => 60
    [1] => 1
    [2] => 1
    [3] => 188
    [4] => pdgje5565
) 
```

示例：[http ://codepad.org/aSyVX5Bj](http://codepad.org/aSyVX5Bj)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:38:23.197

试试喜欢

```
foreach(Array[0] as $element)
{
     echo $element;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:44:51.953

如果您知道所获得输入的确切结构，则可以执行以下操作：

```
$string = '60, 1, 1, 188, pdgje5565';
// Using trim just to be sure
list($varA, $varB, $varC, $varD, $varE) = explode(', ', trim($string)); 
```

这样，您将获得如下结果：

```
$varA = 60;
$varB = 1;
$varC = 1;
$varD = 188;
$varE = 'pdgje5565'; 
```

这里的主要优点是您将获得体面的变量而不是具有抽象索引的数组，但只有当您确定您的结构是恒定的时它才是好的。

# javascript - 如何使用正则表达式（递归？）匹配嵌套函数调用（括号对）

> ID：12584124
> 
> 赞同：4
> 
> 时间：2012-09-25T13:35:51.840
> 
> 标签：javascript, regex

我正在寻找一个匹配未知数量的嵌套函数的正则表达式 (**)。所以

```
expression
function(expression)
function(function(expression))
function(function(function(expression)))
etc. 
```

都会匹配成功。但例如，如果我在末尾添加一个额外的右括号，它将不会包含在匹配中。

（**）请不要回答说通过解析（和计算括号）而不是使用正则表达式会更容易做到这一点 - 在我挠了一会儿之后，我已经知道了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:26:31.500

> 我正在寻找一个匹配未知数量的嵌套函数的正则表达式 (**)。

一些正则表达式实现支持递归匹配（Perl、PHP、.NET），但 JavaScript 不支持。所以，你的问题的答案是：不，这是不可能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T03:30:06.737

这不是递归的，但它可以解决问题。

### 前提条件：

*   函数名称是字母数字/下划线，可能带有前导空格。
*   函数名称不以数字开头。
*   表达式中没有括号。
*   函数中只有一个表达式嵌套。

### 代码：

```
var target = "function(function(function(expression)))";
var pattern = /\s*([a-zA-Z_]\w*[(](\s*[a-zA-Z_]\w*[(]|[^()]+[)]|[)])+[)])/;
var matches = target.match(pattern);
var target= matches[1]; 
```

### 正则表达式剖析：

```
\s*             // 0+ white space characters
(               // Capture group for what you want
  [a-zA-Z_]     //   1 letter/underscore
  \w*           //   0+ word characters (alpha-numeric/underscore)
  [(]           //   left parenthesis
  (             //   PIECES:
    \s*         //     0+ white space characters
    [a-zA-Z_]   //     1 letter/underscore
    \w*         //     0+ word characters (alpha-numeric/underscore)
    [(]         //     left parenthesis
   |            //   OR
    [^()]+      //     1+ non-parenthesis characters
    [)]         //     right parenthesis
   |            //   OR
    [)]         //     right parenthesis
  )+            //   1+ of these PIECES
  [)]           //   right parenthesis
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-15T12:18:10.257

值得注意的是，根据 Bart Kiers 的回答，一些正则表达式引擎（不包括 Javascript）具有扩展功能以提供递归匹配 - 但根据正式定义，不应将此类功能视为正则表达式。

# c# - 如何获取进程的输出？

> ID：12584126
> 
> 赞同：1
> 
> 时间：2012-09-25T13:35:53.983
> 
> 标签：c#, stdout

我使用命令行打开 WireShark 并开始捕获数据包，当我使用 CMD 窗口执行此操作时，我可以看到传入数据包的数量以及我想在我的应用程序表单（win 表单）中显示的这个数字，目前这是我的代码但我的应用程序因错误而崩溃

```
static void Main(string[] args)
{
    try
    {
        string _pcapPath = @"C:\test.pcap";
        Process _tsharkProcess = new Process();
        _tsharkProcess.StartInfo.FileName = @"C:\Program Files\Wireshark\tshark.exe";
        _tsharkProcess.StartInfo.Arguments = string.Format(" -i " + 2 + " -c " + int.MaxValue + " -w " + _pcapPath);
        _tsharkProcess.OutputDataReceived += new DataReceivedEventHandler(process_OutputDataReceived);
        _tsharkProcess.StartInfo.RedirectStandardOutput = true;
        _tsharkProcess.StartInfo.UseShellExecute = false;
        //_tsharkProcess.StartInfo.CreateNoWindow = true;
        //_tsharkProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        _tsharkProcess.Start();
        StreamReader myStreamReader = _tsharkProcess.StandardOutput;
        string myString = myStreamReader.ReadLine(); //read the standard output of the spawned process. 
        Console.WriteLine(myString);
        _tsharkProcess.WaitForExit();
    }
    catch (Exception)
    {

    }

}

private static void process_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    string srt = e.Data; //arg.Data contains the output data from the process...  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:05:48.757

您可以尝试使用此代码

注意：在开始之前设置这些行

```
 process.StartInfo.RedirectStandardOutput = true;
            process.StartInfo.UseShellExecute = false;
            process.Start(); 
```

代码：

```
 Process process = new Process();
            process.StartInfo.FileName = @"C:\Program Files\Wireshark\tshark.exe";
            process.StartInfo.Arguments = string.Format(" -i " + _interfaceNumber + " -c " + int.MaxValue + " -w " + _pcapPath);
            process.OutputDataReceived += new DataReceivedEventHandler(process_OutputDataReceived);

            process.StartInfo.RedirectStandardOutput = true;
            process.StartInfo.UseShellExecute = false;

       process.Start();

            StreamReader myStreamReader = process.StandardOutput;
            // Read the standard output of the spawned process. 
            string myString = myStreamReader.ReadLine();
            Console.WriteLine(myString);

            process.WaitForExit();
            process.Close();
        } 
```

# php - 多维数组的理想 CSV 结构

> ID：12584128
> 
> 赞同：0
> 
> 时间：2012-09-25T13:36:06.340
> 
> 标签：php, javascript, arrays, csv, multidimensional-array

我需要导出一个包含以下结构的巨大 php 多维数组：

```
[0]
    ['id'] => 0
    ['items']
        [0] => "ItemA"
        [1] => "ItemB"
    ['vars']
        [0]
            [0] => "blue"
            [1] => "green"
            [2] => "red"
        [1]
            [0] => "happy"
            [1] => "sad"
        [2]
            [0] => "old"
[1]
    ['id'] => 1
    ['items']
        [0] => "ItemX"
    ['vars']
        [0]
            [0] => "orange"
            [1] => "pink"
        [1]
            [0] => "bitter"
        [2]
            [0] => "new"
            [1] => "modern" 
```

...等等。如您所见，子数组的大小并不总是相同（[0]['items'] = 2 vs. [1]['items'] = 1）。

我需要编写一个 .CSV 文件，稍后将由 JavaScript 函数读取，该函数应该重新组装原始结构。

.CSV 文件中的记录应该是什么样子才能启用此功能并使其尽可能简单？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:44:24.417

只需使用完全符合此类要求的[JSON 。](http://json.org)用 CSV 表示嵌套数据会很疯狂（正如一些评论中已经指出的那样）。
在 PHP 中，您可以使用[`json_encode()`](http://php.net/manual/en/function.json-encode.php)将数据编码为 JSON 并对其进行解码，使用[`json_decode()`](http://php.net/manual/en/function.json-decode.php). 顾名思义*（JavaScript Object Notation）* JavaScript 非常适合处理 JSON 格式的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:48:29.853

简单的 JSON：

```
[
  {"id": 0, "items": ["ItemA", "ItemB"], "vars": : [["blue", "green", "red"], ["happy", "sad"], ["old"]]},
  {"id": 1, "items": ["ItemX"], "vars": : [["orange", "pink"], ["bitter"], ["new", "modern"]]}
] 
```

这将被 Javascript 原样读取并成为 Javascript 对象数组。

# php - Travelport uAPI php SoapClient

> ID：12584130
> 
> 赞同：2
> 
> 时间：2012-09-25T13:36:17.777
> 
> 标签：php, xml, soap, travelport-api

我需要使用 Travelport uAPI 开发一个基于 PHP Web 的应用程序。我可以使用`curl_init()`编写所有 xml 请求的函数连接到 web 服务，但我一直试图用`SoapClient`类来做。我正在使用这个例子并且不起作用：

[http://demo.travelportuniversalapi.com/Home/SampleCode](http://demo.travelportuniversalapi.com/Home/SampleCode)

我不知道我做错了什么。任何人都知道使用 SoapClient 类在 PHP 中工作的示例代码/项目吗？我在网上搜索过，但在 PHP 中找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-07T20:11:26.493

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 最后，达到我的解决方案的方法是使用 Travelport 测试工具编写我的 xml 请求并传递包含 xml 的字符串。
> 
> 认证所需：
> 
> ```
> $this->credentials["login"]=$user;
> $this->credentials["password"]=$pass;
> $this->credentials["traceid"]=$traceid; (branchcode) 
> ```
> 
> 然后我创建了肥皂客户端：
> 
> ```
> $client = new SoapClient("galileo/air_v20_0/Air.wsdl", $this->credentials);
> $rsp=$client->__doRequest($this->request, $this->credentials['location'], $this->credentials['soapaction'], $this->credentials['soap_version']); 
> ```
> 
> 这满足了我的需求:)
> 
> 现在，我正在尝试使用 SoapClient 和 WSDL 函数在这篇文章中[使用相同名称的 WSDL 函数传递请求信息。如何选择一个？](https://stackoverflow.com/questions/14748125/wsdl-functions-with-the-same-name-how-to-choose-one/14991027?noredirect=1#14991027)

# python - Pypy写入文件速度慢

> ID：12584135
> 
> 赞同：4
> 
> 时间：2012-09-25T13:36:39.850
> 
> 标签：python, file-io, pypy

我最近一直在尝试使用 PyPy，它比我当前的项目快 25 倍，而且运行良好。然而不幸的是，写入文件*非常*慢。写入文件大约慢 60 倍。

我一直在谷歌搜索，但我没有发现任何有用的东西。这是一个已知的问题？有解决方法吗？

在这样一个简单的测试用例中：

```
with file(path, 'w') as f:
    f.writelines(['testing to write a file\n' for i in range(5000000)]) 
```

与常规 Python 相比，我看到 PyPy 的速度降低了 60 倍。这是使用 64 位 2.7.3 和 PyPy 1.9、32 位和 Python 2.7.2。当然，两者都在相同的操作系统和机器上（Windows 7）。

任何帮助，将不胜感激。PyPy 对于我正在做的事情要快得多，但文件写入速度限制为每秒半兆字节，它的用处显然不那么大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:58:06.017

它更慢，但在这个系统上不会慢 60 倍

TLDR；使用`write('\n'.join(...))`代替`writelines(...)`

```
$ pypy -m timeit -s "path='tst'" "with file(path, 'w') as f:f.writelines(['testing to write a file\n' for i in range(5000000)])"
10 loops, best of 3: 1.15 sec per loop

$ python -m timeit -s "path='tst'" "with file(path, 'w') as f:f.writelines(['testing to write a file\n' for i in range(5000000)])"
10 loops, best of 3: 434 msec per loop 
```

`xrange`没什么区别

```
$ pypy -m timeit -s "path='tst'" "with file(path, 'w') as f:f.writelines(['testing to write a file\n' for i in xrange(5000000)])"
10 loops, best of 3: 1.15 sec per loop 
```

使用生成器表达式对 pypy 来说较慢，但对 python 来说更快

```
$ pypy -m timeit -s "path='tst'" "with file(path, 'w') as f:f.writelines('testing to write a file\n' for i in xrange(5000000))"
10 loops, best of 3: 1.62 sec per loop
$ python -m timeit -s "path='tst'" "with file(path, 'w') as f:f.writelines('testing to write a file\n' for i in xrange(5000000))"
10 loops, best of 3: 407 msec per loop 
```

在基准之外创建数据会放大差异（~4.2x）

```
$ pypy -m timeit -s "path='tst'; data=['testing to write a file\n' for i in range(5000000)]" "with file(path, 'w') as f:f.writelines(data)"
10 loops, best of 3: 786 msec per loop
$ python -m timeit -s "path='tst'; data=['testing to write a file\n' for i in range(5000000)]" "with file(path, 'w') as f:f.writelines(data)"
10 loops, best of 3: 189 msec per loop 
```

使用`write()`而不是`writelines()`对两者来说都快得多

```
$ pypy -m timeit -s "path='tst'; data='\n'.join('testing to write a file\n' for i in range(5000000))" "with file(path, 'w') as f:f.write(data)"
10 loops, best of 3: 51.9 msec per loop
$ python -m timeit -s "path='tst'; data='\n'.join('testing to write a file\n' for i in range(5000000))" "with file(path, 'w') as f:f.write(data)"
10 loops, best of 3: 52.4 msec per loop 
```

* * *

```
$ uname -srvmpio
Linux 3.2.0-26-generic #41-Ubuntu SMP Thu Jun 14 17:49:24 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
$ python  --version
Python 2.7.3
$ pypy --version
Python 2.7.2 (1.8+dfsg-2, Feb 19 2012, 19:18:08)
[PyPy 1.8.0 with GCC 4.6.2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:40:19.627

`xrange`是这个例子的答案，因为它[不生成](https://stackoverflow.com/questions/94935/what-is-the-difference-between-range-and-xrange)列表，而是生成器。在生成包含 5000 万个项目的列表时，64 位 python 可能比 32 位 pypy 更快。

如果您有其他代码，请发布实际代码，而不仅仅是测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:05:47.413

让我们首先直接了解您的基准测试方法。

当目标是测量纯文件写入性能时，在您正在计时的代码段中创建要写入文件的数据是一个重大缺陷，一个系统错误。这是因为数据创建也需要您不想衡量的时间。

因此，如果您打算将整个虚拟数据保存在内存中，请在测量时间之前创建它。

但是，在您的情况下，动态数据生成可能比您的 I/O 更快。因此，通过使用 Python 生成器，在本例中为生成器表达式，结合`write`调用，您可以摆脱这种系统性错误。

不知道`writelines`对比表现如何`write`。但是，根据您的`writelines`示例：

```
with file(path, 'w') as f:
    f.writelines('xxxx\n' for _ in xrange(10**6)) 
```

写入大块数据`write`可能会更快：

```
with file(path, 'w') as f:
    for chunk in ('x'*99999 for _ in xrange(10**3)):
       f.write(chunk) 
```

当您正确进行基准测试时，我很确定您会发现 Python 和 PyPy 之间的差异。在某些情况下，也许 PyPy 甚至更慢。但是，通过适当的基准测试，我相信您将设法找到 PyPy 的文件写入速度足以满足您的目的的条件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T14:05:59.663

您在这里生成*两个*列表，一个带有`range`列表理解，一个带有列表理解。

列表 1：一种选择是`range`用生成器替换返回的列表`xrange`。另一种方法是尝试 PyPy 自己的优化，称为[**range-lists**](http://doc.pypy.org/en/latest/interpreter-optimizations.html#range-lists)。

> `–objspace-std-withrangelist`您可以使用该选项启用此功能。

列表 2：您在编写输出列表之前创建它。这也应该是一个生成器，因此将列表推导式转换为生成器表达式：

```
f.writelines('testing to write a file\n' for i in range(5000000)) 
```

只要生成器表达式是传递给函数的唯一参数，甚至不需要在括号上加倍。

# hadoop - 将普通列转换为配置单元中的分区列

> ID：12584143
> 
> 赞同：1
> 
> 时间：2012-09-25T13:37:03.773
> 
> 标签：hadoop, hive, partitioning, hdfs, hiveql

我有一个有 3 列的表。现在我需要将其中一列修改为分区列。有没有可能？如果没有，我们如何向现有表添加分区。我使用了以下语法： create table t1 (eno int, ename string ) 行格式分隔字段，以 '\t' 结尾；将数据本地'/....path/'加载到表t1中； **alter table t1 添加分区 (p1='india');**

我收到错误......

任何人都知道如何**将分区添加到现有表**......？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:28:11.460

我不认为这是直接可能的。Hive 将不得不完全重新排列和拆分 HDFS 中的文件，因为添加分区将强加一个新的目录结构。

我建议你做的只是创建一个具有所需架构和分区的新表，然后将第一个表中的所有内容插入到第二个表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-10T18:18:09.343

您不能将分区添加到创建的表中。但是您可以执行类似这些步骤的操作。创建一个新表并将旧表中的数据插入到新表中。

```
/*Original table structure*/
CREATE  TABLE original_table(
    c1 string,
    c2 string,
    c3 string)
STORED AS ORC;

/*Partitioned table structure*/
CREATE  TABLE partitioned_table(
    c1 string,
    c2 string)
partitioned by (c3 string)  
STORED AS ORC;

/*load data from original_table to partitioned_table*/
insert into 
table partitioned_table partition(c3)
 select c1, c2, c3 
from  original_table;

/*rename original_table to old_table. You can just drop it if you want it*/
ALTER TABLE original_table RENAME TO old_table;

/*rename partitioned_table to original_table*/
ALTER TABLE partitioned_table RENAME TO original_table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T06:21:12.113

我认为没有办法将表的现有列转换为分区。如果要在表中添加分区，请使用 ALTER 命令，就像您已经完成的那样。如果您正在处理外部表，那么还要指定位置字段。我不确定是否可以使用 ALTER 命令为托管表添加分区。

# rally - 如何以编程方式删除 Rally 中的工作项？

> ID：12584144
> 
> 赞同：2
> 
> 时间：2012-09-25T13:37:13.853
> 
> 标签：rally

我正在通过在纸板上使用自定义卡片渲染器来自定义卡片，并希望在每张卡片上添加一个“删除”按钮，以便执行与迭代状态页面中提供的相同的“删除”功能（即将项目移动到回收站）。

通过检查，我可以看到单击从“迭代状态”页面删除故事时会触发以下事件：

onclick="deleteAR({itemOid:'1234', name:'Item name', formattedID:'Item001', msg:'Are you sure?'}); return false;"

编辑：我正在使用 JDK 1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:45:54.443

您应该能够像这样在 SDK 1.x 中删除：

```
function delete(ref, callback, errorCallback) {
    var config = {
        url: ref,
        content: {},
        headers: { "Content-Type": "application/json" },
        handleAs:"json",
        preventCache: true,
        load: callback,
        error: errorCallback
    };

    if (rally.sdk.util.Context.isInsideRally()) {   
        dojo.xhrDelete(config);
    } else {
        config.callbackParamName = "jsonp";
        config.content._method = "DELETE";
        dojo.io.script.get(config);
    }
}

//delete an item
delete('https://rally1.rallydev.com/slm/webservice/1.32/defect/12345.js',
    function(results) {
        //success
    },
    function(results) {
        //error
    }
); 
```

我们打算通过 rally.sdk.data.io.httpDelete 和 rally.sdk.data.RallyDataSource.delete 公开这个功能，但从未完全测试并发布它。

# css - CSS bkg图像绝对和居中，但在调整窗口大小时也希望它左：0px

> ID：12584147
> 
> 赞同：2
> 
> 时间：2012-09-25T13:37:24.653
> 
> 标签：css, background-image, center, css-position

```
 <style>
  .menu_bkg {
  position: absolute;
  top: 0px;
  width:  100%;
  height: 314px;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url(http://sphotos-a.xx.fbcdn.net/hphotos-ash3/578806_10151347589633079_1588853150_n.jpg
  );
  }
</style>

<div class="menu_bkg"></div> 
```

图像的居中工作......但希望它定位在 left:0px 当窗口 veiw 宽度变得小于图像的宽度时；而不是继续向左滚动和切断窗口越收紧。这甚至可行吗？有任何想法吗。谢谢。

附言。我简化了代码，您可以复制并粘贴到任何编辑器中进行快速测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:46:21.030

使用 CSS 媒体查询 -

```
@media screen and (min-width : 800px){
  .menu_bkg {
    background-position: 0px 0px;
  )

} 
```

# c# - Radgrid 中 RadNumeric 文本框的 KeyPress 事件，用于交换列值

> ID：12584150
> 
> 赞同：0
> 
> 时间：2012-09-25T13:37:31.550
> 
> 标签：c#, telerik, radgrid

我正在使用我的一种形式的 RadGrid 用 C# 开发一个网站。下面是我的 RadGrid 的 ASPX 代码：

```
<telerik:RadGrid ID="GridViewAllocation" runat="server" Height="200px" Width="100%"
AutoGenerateColumns="False" GridLines="None"
OnItemDataBound="GridViewAllocation_ItemDataBound"
OnItemCommand="GridViewAllocation_ItemCommand">
    <MasterTableView>
        <Columns>
            <telerik:GridBoundColumn HeaderText="Amount O/S"   UniqueName="AMT" DataField="AMT">
            </telerik:GridBoundColumn>
            <telerik:GridTemplateColumn HeaderText="Allocate" UniqueName="Acc_Allocated"
                DataField="Acc_Allocated">
                <ItemTemplate>
                    <telerik:RadNumericTextBox ID="TextGirdAmntAlloc" runat="server" Value="0"
                    CssClass="gridTextEntry" OnTextChanged="TextGirdAmntAlloc_TextChanged"
                    AutoPostBack="true">
                        <NumberFormat GroupSeparator="" DecimalDigits="4" />
                    </telerik:RadNumericTextBox>
                </ItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridBoundColumn UniqueName="ACC_SOURCE" DataField="ACC_SOURCE" Visible="false">
            </telerik:GridBoundColumn>
        </Columns>
    </MasterTableView>
</telerik:RadGrid> 
```

在这个网格中，当我单击或 KeyPress 或任何其他事件时，我想将列**AMT**的确切值传输到文本框**Acc_Allocated 。**传输值有一个条件：当**Acc_Source**值为**“3”**时传输该值，否则不传输。目前我正在通过 TextChanged 事件从服务器端进行检查。

有没有其他方法可以做到这一点？

这是我的 TextChanged 事件：

```
 protected void TextGirdAmntAlloc_TextChanged(object sender, EventArgs e)
   {
       try
       {
         foreach (GridDataItem GrdItm in GridViewAllocation.MasterTableView.Items)
          {
            decimal GrdAccAllocAmnt = Convert.ToDecimal(((RadNumericTextBox)GrdItm.FindContro("TextGirdAmntAlloc")).Text);
            if (GrdItm["ACC_SOURCE"].Text == "3")
            {                   
                LblAmnt_Alloc.Text = GrdItm.Cells[4].Text;
                ((RadNumericTextBox)GrdItm.FindControl("TextGirdAmntAlloc")).Text = GrdItm.Cells[4].Text;                
            }
          }
        }
        catch { }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:01:29.180

请尝试以下代码片段。

JS

```
 <script type="text/javascript">
        function ValueChanged(sender, args) {
            var grid = $find("<%= RadGrid1.ClientID %>");
            if (grid) {
                var MasterTable = grid.get_masterTableView();
                var Rows = MasterTable.get_dataItems();
                for (var i = 0; i < Rows.length; i++) {
                    var row = Rows[i];
                    var getCellText = row.get_cell("Name").innerHTML;
                    if (getCellText == "Name1") {
                        var TextGirdAmntAlloc = $telerik.findControl(row.get_element(), "TextGirdAmntAlloc");
                        TextGirdAmntAlloc.set_value(row.get_cell("ID").innerHTML);
                    } 
                }
            }
        }
    </script> 
```

.aspx

```
 <telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="False" OnNeedDataSource="RadGrid1_NeedDataSource"
        OnItemCreated="RadGrid1_ItemCreated">
        <MasterTableView DataKeyNames="ID">
            <Columns>
                <telerik:GridBoundColumn DataField="ID" UniqueName="ID" HeaderText="ID">
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn DataField="Name" UniqueName="Name" HeaderText="Name">
                </telerik:GridBoundColumn>
                <telerik:GridTemplateColumn HeaderText="Allocate" UniqueName="Acc_Allocated" DataField="Acc_Allocated">
                    <ItemTemplate>
                        <telerik:RadNumericTextBox ID="TextGirdAmntAlloc" runat="server">
                            <ClientEvents OnValueChanged="ValueChanged" />
                        </telerik:RadNumericTextBox>
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
                <telerik:GridEditCommandColumn>
                </telerik:GridEditCommandColumn>
            </Columns>
        </MasterTableView>
    </telerik:RadGrid> 
```

# c# - ASP.net MVC 4 Web 应用程序与 Web 服务共享其代码

> ID：12584152
> 
> 赞同：0
> 
> 时间：2012-09-25T13:37:34.140
> 
> 标签：c#, asp.net-mvc, web-services

我编写了一个 MVC Web 应用程序，用于我们公司的 Intranet。我们还有一个 MVC 网站，它是一个单独的 Web 应用程序，供我们的客户使用。为了让我们的网站与我们的 Intranet 系统数据库通信，我编写了 ac# Web 服务来访问它。

我现在遇到的问题是在 Intranet 应用程序中，我有一个复杂的例程，它执行一些我现在需要在 Web 服务中为网站​​执行相同操作的计算。由于显而易见的原因，我不想复制逻辑并在 2 个位置重复，因此我需要 Web 服务和 Web 应用程序共享相同的代码库。我知道这是可能的，但最好的办法是使用存储在 Web 配置文件中的应用程序变量。例如，如果我将代码移出 Intranet 应用程序并进入类库，我将失去能够访问 webconfig 文件的功能，那么我应该将这些变量放在哪里？

关于最好的方法的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:46:10.860

> 我将失去能够访问 webconfig 文件的功能，那么我将这些变量放在哪里呢？

你不会失去这种能力。应用程序的每个部分都可以访问配置文件，例如使用`ConfigurationManager.AppSettings`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:12:23.587

将共享代码放在从网站和 Web 服务都引用的类库中。

# c# - C# 使用私有双函数计算距离

> ID：12584155
> 
> 赞同：4
> 
> 时间：2012-09-25T13:37:44.013
> 
> 标签：c#

我刚刚被介绍到 C# 编码的世界。目前，我正在编写程序，该程序将使用总行驶距离和总行驶小时数计算平均速度，该结果将乘以从纽约市到迈阿密的时间，以获得从纽约市到迈阿密的距离。我`textBoxes`在表格上放了四个，一个`button`用来计算。

我需要帮助构建功能。例如，为了计算速度：速度=距离/时间。我如何将这些信息以正确的格式放入 CalculateVelocity() 函数中？

**4 个文本框及其标签（这是用户输入数据的地方）：**

```
Starting Mileage
Ending Mileage
Total Driving Time 
Time from NY city to MIAMI 
```

**我正在使用的代码功能：**

```
 private double CalculateVelocity()
    {
        //Calculate Velocity
    }

    public double GetTime()
    {
            //Get Time
            return GetTime;
    }

    private double CalculateDistance(double velocity, double time)
    {
        //Calculate Distance
    }

    private double DisplayResults(double velocity, double time, double distance)
    {
        //Display Results
    }

    private double ClearTextboxes()
    {
        //Clear textboxes
    }

    // Property to GetTime
   private double GetTime
        {
            get
            {
                // variable to hold time
                double time = double.MinValue;

                // Safely parse the text into a double
                if (double.TryParse(tbTime.Text, out time))
                {
                    return time;
                }

                // Could just as easily return time here   
                return double.MinValue;
            }
            set
            {
                // Set tbTime
                tbTime.Text = value.ToString();
            }
        }

    private void button1_Click(object sender, EventArgs e)
    {
        //Calculate and display result in a label
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:48:30.127

`CalculateVelocity`应该是这样的：

```
private double CalculateVelocity()
{
     double time = GetTime(); //assuming you have set up GetTime()
     double distance = endingMileageBox - startingMileageBox;
     return distance/time; 
} 
```

其中`endingMileageBox`是结束里程文本框`startingMileageBox`的值， 是起始里程文本框的值。

* * *

根据您的评论，这`CalculateDistance`应该是这样的：

```
private double CalculateDistance(double velocity, double time)
{
    //note that this assumes the units match up. If not, you'll need to do some conversions here
    return velocity * time;
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:45:43.913

只需添加您需要的参数，并在调用应该像这样的函数之前从文本框中进行解析（正如您所展示的那样）：

```
private static double CalculateVelocityMPH(double distanceMiles, double timeHours) 
{ 
    return distanceMiles / timeHours;
} 
```

值得选择和指定像我一样作为后期修复的单位。

然后在解析时间文本框时，使用`TimeSpan.Parse`then`.TotalHours`来调用方法。

# python - 当我打开文本文件时 wxPython 应用程序挂起/崩溃

> ID：12584157
> 
> 赞同：-1
> 
> 时间：2012-09-25T13:37:53.763
> 
> 标签：python, wxpython

好的，所以我有一个用 wxPython 编写的应用程序。有一个按钮绑定到一个函数，该函数的一部分需要应用程序在 kate.xml 中打开一个文本文件。

因此，该文件在 gedit 中打开并且工作正常，但是当您查看应用程序时，您可以看到按钮仍然被按下并且似乎被冻结。几秒钟后，应用程序将变灰并挂起/崩溃。如果我关闭编辑窗口，它将解冻并重新开始工作。

为什么当我打开一个文本文件时，我的应用程序会挂起？我正在使用此代码写入文本文件，然后在 kate 中打开它。

```
file = open("encryptedText.txt", "w")
file.write(encryptedStr)
file.close()
os.system("kate encryptedText.txt") 
```

谢谢！

* * *

抱歉，缩进不是问题。我搞砸了帖子格式。这是我在终端上收到的消息：

```
'import sitecustomize' failed; use -v for traceback
QDBusConnection: session D-Bus connection created before QCoreApplication. Application may misbehave.
kate(13256)/kate-filetree KateFileTreePluginView::KateFileTreePluginView: BEGIN: mw: Kate::MainWindow(0xeab140)
kate(13256)/kate-filetree ProxyItem::ProxyItem: ProxyItem(0x1219ad0,0x0,-1,QObject(0x0) ,"m_root")
kate(13256)/kate-filetree ProxyItem::ProxyItem: ProxyItem(0x1219db0,0x0,-1,QObject(0x0) ,"Untitled")
kate(13256)/kate-filetree KateFileTreeModel::documentOpened: before add: ProxyItem(0x1219db0,0x0,-1,KateDocument(0x103da90) , "Untitled" )
kate(13256)/kate-filetree KateFileTreeModel::setupIcon: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::setupIcon: END!
kate(13256)/kate-filetree KateFileTreeModel::handleInsert: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::handleInsert: empty item
kate(13256)/kate-filetree ProxyItem::addChild: added ProxyItem(0x1219db0,0x1219ad0,0,KateDocument(0x103da90) , "Untitled" )   to ProxyItemDir(0x1219ad0,0x0,-1,"m_root", children:1)
kate(13256)/kate-filetree KateFileTreeModel::documentOpened: after add: ProxyItem(0x1219db0,0x1219ad0,0,KateDocument(0x103da90) , "Untitled" )
kate(13256)/kate-filetree KateFileTreeProxyModel::KateFileTreeProxyModel: BEGIN!
kate(13256)/kate-filetree KateFileTreePluginView::setListMode: BEGIN
kate(13256)/kate-filetree KateFileTreePluginView::setListMode: treeMode
kate(13256)/kate-filetree KateFileTreePluginView::setListMode: END
kate(13256)/kate-filetree KateFileTreePluginView::viewChanged: BEGIN!
kate(13256)/kate-filetree KateFileTreePluginView::viewChanged: BEGIN!
kate(13256)/kate-filetree KateFileTreeProxyModel::docIndex: !
kate(13256)/kate-filetree KateFileTreeModel::docIndex: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::docIndex: END!
kate(13256)/kate-filetree KateFileTreePluginView::viewChanged: selected doc= KateDocument(0x103da90) QModelIndex(0,0,0x1214690,KateFileTreeProxyModel(0x126b040) )
kate(13256)/kate-filetree KateFileTreePluginView::viewChanged: display= "Untitled"
kate(13256)/kate-filetree KateFileTreeModel::documentActivated: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::documentActivated: adding viewHistory ProxyItem(0x1219db0,0x1219ad0,0,KateDocument(0x103da90) , "Untitled" )
kate(13256)/kate-filetree KateFileTreeModel::updateBackgrounds: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::updateBackgrounds: END!
kate(13256)/kate-filetree KateFileTreeModel::documentActivated: END!
kate(13256)/kate-filetree KateFileTree::slotCurrentChanged: current: QModelIndex(0,0,0x1214690,KateFileTreeProxyModel(0x126b040) )  previous: QModelIndex(-1,-1,0x0,QObject(0x0) )
kate(13256)/kate-filetree KateFileTree::slotCurrentChanged: got doc, setting prev: QModelIndex(0,0,0x1214690,KateFileTreeProxyModel(0x126b040) )
kate(13256)/kate-filetree KateFileTreePluginView::viewChanged: END!
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: change to unnamed item
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: ProxyItem(0x1219db0,0x1219ad0,0,KateDocument(0x103da90) , "Untitled" )
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: "Untitled" -> "Untitled"
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: removing brush ProxyItem(0x1219db0,0x1219ad0,0,KateDocument(0x103da90) , "Untitled" )
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: removing view history ProxyItem(0x1219db0,0x1219ad0,0,KateDocument(0x103da90) , "Untitled" )
kate(13256)/kate-filetree KateFileTreeModel::handleNameChange: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::handleNameChange: bogus name change
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: END!
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: ProxyItem(0x1219db0,0x1219ad0,0,KateDocument(0x103da90) , "Untitled" )
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: "Untitled" -> "/home/harvey/Documents/Python Development/encryptedText.txt"
kate(13256)/kate-filetree KateFileTreeModel::handleNameChange: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::handleNameChange: removing ProxyItem(0x1219db0,0x1219ad0,0,KateDocument(0x103da90) , "/home/harvey/Documents/Python Development/encryptedText.txt" )   from ProxyItemDir(0x1219ad0,0x0,-1,"m_root", children:1)
kate(13256)/kate-filetree KateFileTree::slotCurrentChanged: current: QModelIndex(-1,-1,0x0,QObject(0x0) ) previous: QModelIndex(0,0,0x1214690,KateFileTreeProxyModel(0x126b040) )
kate(13256)/kate-filetree ProxyItem::remChild: remove ProxyItem(0x1219db0,0x1219ad0,0,KateDocument(0x103da90) , "/home/harvey/Documents/Python Development/encryptedText.txt" )   from ProxyItemDir(0x1219ad0,0x0,-1,"m_root", children:1)
kate(13256)/kate-filetree KateFileTreeModel::handleEmptyParents: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::handleEmptyParents: parent ProxyItemDir(0x1219ad0,0x0,-1,"m_root", children:0) grandparentProxyItemDir(0x0)
kate(13256)/kate-filetree KateFileTreeModel::setupIcon: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::setupIcon: END!
kate(13256)/kate-filetree KateFileTreeModel::handleNameChange: inserting ProxyItem(0x1219db0,0x0,0,KateDocument(0x103da90) , "/home/harvey/Documents/Python Development/encryptedText.txt" )
kate(13256)/kate-filetree KateFileTreeModel::handleInsert: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::handleInsert: creating a new root
kate(13256)/kate-filetree ProxyItem::ProxyItem: ProxyItem(0x14d5460,0x0,-1,QObject(0x0) ,"/home/harvey/Documents/Python Development")
kate(13256)/kate-filetree KateFileTreeModel::handleInsert: add ProxyItemDir(0x14d5460,0x0,-1,"/home/harvey/Documents/Python Development", children:0) to m_root
kate(13256)/kate-filetree ProxyItem::addChild: added ProxyItem(0x14d5460,0x1219ad0,0,QObject(0x0) ,"/home/harvey/Documents/Python Development") toProxyItemDir(0x1219ad0,0x0,-1,"m_root", children:1)
kate(13256)/kate-filetree KateFileTreeModel::handleInsert: attempting to merge some existing roots
kate(13256)/kate-filetree KateFileTreeModel::handleInsert: adding ProxyItem(0x1219db0,0x0,0,KateDocument(0x103da90) , "/home/harvey/Documents/Python Development/encryptedText.txt" )   to ProxyItemDir(0x14d5460,0x1219ad0,0,"/home/harvey/Documents/Python Development", children:0)
kate(13256)/kate-filetree ProxyItem::addChild: added ProxyItem(0x1219db0,0x14d5460,0,KateDocument(0x103da90) , "/home/harvey/Documents/Python Development/encryptedText.txt" )   to ProxyItemDir(0x14d5460,0x1219ad0,0,"/home/harvey/Documents/Python Development", children:1)
kate(13256)/kate-filetree KateFileTreeModel::handleInsert: END!
kate(13256)/kate-filetree KateFileTreeModel::handleNameChange: END!
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: END!
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: ProxyItem(0x1219db0,0x14d5460,0,KateDocument(0x103da90) , "/home/harvey/Documents/Python Development/encryptedText.txt" )
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: "encryptedText.txt" -> "/home/harvey/Documents/Python Development/encryptedText.txt"
kate(13256)/kate-filetree KateFileTreeModel::handleNameChange: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::handleNameChange: bogus name change
kate(13256)/kate-filetree KateFileTreeModel::documentNameChanged: END!
kate(13256)/kate-filetree KateFileTreePluginView::viewChanged: BEGIN!
kate(13256)/kate-filetree KateFileTreeProxyModel::docIndex: !
kate(13256)/kate-filetree KateFileTreeModel::docIndex: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::docIndex: END!
kate(13256)/kate-filetree KateFileTreePluginView::viewChanged: selected doc= KateDocument(0x103da90) QModelIndex(0,0,0x1572820,KateFileTreeProxyModel(0x126b040) )
kate(13256)/kate-filetree KateFileTreePluginView::viewChanged: display= "encryptedText.txt"
kate(13256)/kate-filetree KateFileTreeModel::documentActivated: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::documentActivated: adding viewHistory ProxyItem(0x1219db0,0x14d5460,0,KateDocument(0x103da90) , "/home/harvey/Documents/Python Development/encryptedText.txt" )
kate(13256)/kate-filetree KateFileTreeModel::updateBackgrounds: BEGIN!
kate(13256)/kate-filetree KateFileTreeModel::updateBackgrounds: END!
kate(13256)/kate-filetree KateFileTreeModel::documentActivated: END!
kate(13256)/kate-filetree KateFileTree::slotCurrentChanged: current: QModelIndex(0,0,0x1572820,KateFileTreeProxyModel(0x126b040) )  previous: QModelIndex(-1,-1,0x0,QObject(0x0) )
kate(13256)/kate-filetree KateFileTree::slotCurrentChanged: got doc, setting prev: QModelIndex(0,0,0x1572820,KateFileTreeProxyModel(0x126b040) )
kate(13256)/kate-filetree KateFileTreePluginView::viewChanged: END! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:02:16.433

`os.system`当进程终止时返回，例如，当您关闭 kate 时，因此函数在您完成编辑之前不会结束。

使用`subprocess.Popen`和[这个](https://stackoverflow.com/questions/2581817/python-subprocess-callback-when-cmd-exits)作为替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:02:53.347

这可能是线程的问题：您的脚本等待`kate`回调，并且它会因为没有发生而感到不安（但`kate`有时会这样做......）

一个潜在的解决办法是让`kate`她在后台做事。你应该使用

```
os.system('kate yourfile &') 
```

与`&`背景中的含义。或者，您可能希望改用该[`subprocess`](http://docs.python.org/library/subprocess.html#subprocess-replacements)模块。你会做这样的事情：

```
subprocess.Popen(["kate", "yourfile"]) 
```

（你也可以查看[这个 SO 帖子](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python/92395#92395)）

# c# - C# 语法中的 QueryInterface 和 IntPtr

> ID：12584168
> 
> 赞同：1
> 
> 时间：2012-09-25T13:38:39.600
> 
> 标签：c#, .net, syntax, com, marshalling

我正在尝试使用`InteropServices.Marshal.QueryInterface`将 COM 对象转换为 C# 中的特定类型，但在传递第一个和最后一个参数时遇到了麻烦。

我假设这是一个参考，但由于语法错误`IntPtr`，我无法参考我的类来使用 QueryInterface。`IntPtr`

当然，下面显示的代码没有正确的语法，但它让您了解我想要做什么。

```
set
{
    ClassA a;
    Guid guid = Guid.Parse("XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX");
    System.Runtime.InteropServices.Marshal.QueryInterface(ref value, 
        ref guid, out a);
} 
```

编辑：

```
[ComVisible(true), Guid("XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX")]
public ClassA : COMInterface{ ... } 
```

ClassA 是 C# 类，`COMInterface`是 COM 接口。它是唯一实现`COMInterface`. `value`在`set`范围内是对 COM 接口的引用，`COMInterface`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:43:39.793

你将无法做到这一点。

您拥有的`IntPtr`是一个指向`COMInterface`. 您可以拥有一个*完全独立的类*实现`COMInterface`，这就是您持有的指针，这是完全可行的。

也就是说，对 的调用`QueryInterface`只能用于获取对 .NET 表示的引用`COMInterface`，而不是 ; 的实例`ClassA`。它需要您将在非托管代码中实现的类的内容塑造`COMInterface`成托管代码可以理解的内容，然后将其写入`ClassA`完全不同的东西。

# android - 如何使用按钮暂停 libGDX 中的 SpriteAnimation，以便在按下暂停按钮时能够查看当前帧？

> ID：12584171
> 
> 赞同：1
> 
> 时间：2012-09-25T13:38:42.940
> 
> 标签：android, animation, desktop-application, libgdx, pausing-execution

我试图通过这样做来使用暂停/恢复按钮暂停动画：

```
public static int gameStatus = 1;
public int gamePaused = 0;
public int gameRunning = 0;
public void create(){
  gameRunning = 1;
  //.. code
}
public void render(){
   if(gameStatus == gameRunning){ 

//some code .. 

            pause.setClickListener( new ClickListener() {

                @Override
                public void click(Actor actor, float x, float y) {
                    System.out.println("pause is pressed");
                    //to stop the animation at a particular frame
                    spriteBatch.begin();
                    spriteBatch.draw(currentFrame, 100, 100);                        
                    spriteBatch.end();
                    if(gameStatus!=gamePaused)
                    {
                        gameStatus = gamePaused;
                    }
                    else
                    {
                        gameStatus = 1;
                    }

                }
            });
//rest of my render animation code .. 
   }
} 
```

但在桌面上它显示当前帧的 3/4 和下一帧的 1/4。知道为什么吗？而在 android 中，它的行为就像整个图像在颤抖。我想知道可能是因为它一次又一次地调用 render()。我不明白为什么 android 和桌面版本的输出存在差异。他们不应该是一样的吗？我认为两者之间存在一些索引问题。还有其他人遇到过同样的问题吗？任何建议或暂停动画或教程链接的正确方法都会非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:34:15.033

我在没有任何闪烁问题的情况下完成了暂停实现，就像我通过简单地从 pause 方法中删除 spriteBatch.draw() 并使用布尔变量来知道何时渲染以及何时不渲染以暂停动画一样。我就是这样做的（以防有人遇到同样的问题）：

```
private boolean isPlaying = true;

    @Override
    public void pause() { 
    Gdx.app.log("pause():", "pausing the app");
        if( isPlaying )
        {
            isPlaying = false;
        }
        else
        {
            isPlaying = true;
        }

    }

    @Override
    public void render() {      

    Gdx.app.log("123123", (!seekBar.isDragging())+"");
    if( isPlaying )
              // .. do the animation.. 
    } 
```

# c# - 在组织中授权 USB 设备的最佳方式？

> ID：12584173
> 
> 赞同：2
> 
> 时间：2012-09-25T13:38:50.567
> 
> 标签：c#, asp.net, windows, usb

我正在开发一个项目，我需要限制访问组织网络中非白名单 USB 设备的使用。

我通过检查该 USB 设备的 VID 和 PID 来使用它。

现在的问题是，如果假设我有一个**Apple I-pad**，那将有一个全局 VID 和 PID 编号。如果我将任何 Apple I-Pad 列入白名单，那么在我当前的情况下，所有其他 Apple I-Pad 都将在网络中获得授权。

这是从 VID 和 PID 号检查 USB 设备的最佳方法，无论该设备是否在组织网络中被列入白名单，或者它们是否比它更好。

请建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:08:40.730

除了供应商和产品 ID，USB 设备描述符还可以包含设备序列号。如果存在，它应该对于具有特定 VID/PID 组合的每个单独设备是唯一的。此序列号是可选的（某些供应商可能会在其设备中编写非唯一序列号而违反规范），因此请先检查。如果您很幸运并且您关心的设备确实包含序列号，您将能够使用（VID、PID、序列号）组合来唯一标识特定设备。序列号通常不容易重新编程，这对您的应用程序来说是一个加分项。

# cuda - 带有 += 赋值的嵌套 for 循环

> ID：12584175
> 
> 赞同：1
> 
> 时间：2012-09-25T13:38:59.410
> 
> 标签：cuda, jcuda

我在Java中有以下代码：

```
float in[][] = new float[2][2];

float B[] = new float[2]; 
float A[] = new float[2]; 
float res[] = new float[A[0].length];

for(float r : res){
    r = 0;
}

for (int i = 0; i < A[0].length; i++) {
    for (int j = 0; j < B[0].length; j++) {
        res[i] += A[j] * in[j][i];
} 
```

我最多简化了它，所以你不应该在那里搜索真正的逻辑:)。

由于循环中的 += 语句，我在 CUDA 中转换了几个小时。

我从这样的事情开始：

```
extern "C"
__global__ void filter(float* in, float* A, float* B, float* res, int in_size){

    unsigned int x = blockIdx.x*blockDim.x + threadIdx.x;
    unsigned int y = blockIdx.y*blockDim.y + threadIdx.y;

    res[x] = A[y] * in[x + y * in_width];

} 
```

但很快意识到它无法工作，因为所有线程都试图设置相同的变量。

[我在此演示文稿中](http://www.nvidia.com/content/GTC-2010/pdfs/2131_GTC2010.pdf)阅读了点积的示例，但我真的不知道如何根据我对 in 的二维需求进行调整。

我不要求一个完整的解决方案，但任何方向肯定会受到赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:07:47.593

太多的CUDA杀了我的头。

我通过展开内核中的一个循环找到了部分解决方案。这是它现在的样子：

```
extern "C"
__global__ void filter(float* in, float* A, float* res, const int in_width, const int sizeB){
    unsigned int x = blockIdx.x*blockDim.x + threadIdx.x;
    int i = 0;

    for(i = 0; i < sizeB; i++){
        res[x] += A[i] * in[i + x * in_width];
    }

} 
```

我相信我能找到更好的，但我想我今天会坚持这个:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:04:20.687

您可以在 A[0].length*B[0].length 线程中拆分乘法作业 A[j] * in[j][i] 并可以将乘法结果总结为 NVIDIA sdk 中的缩减样本，使用共享内存

# c# - 检查两个集合中存在的任何元素

> ID：12584179
> 
> 赞同：50
> 
> 时间：2012-09-25T13:39:15.840
> 
> 标签：c#, linq, collections

我想知道 Linq 是否有一种方法来检查两个集合是否至少有一个共同的元素。我会期待这样的事情：

```
var listA = new List<int>() { some numbers };
var listB = new List<int>() { some numbers, potentially also in list A };

bool hasSameElements = listA.hasMatchingElements(listB); 
```

它是否存在于 Linq 中，还是我应该为它编写自定义方法？

我知道 Intersect 方法，但这不会产生整个相交集吗？我只对检查两个集合是否相交感兴趣，产生整个集合似乎是一种浪费，尤其是在较大的集合上。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-09-25T13:40:08.913

听起来你只是想要：

```
bool hasSameElements = listA.Intersect(listB).Any(); 
```

编辑：如评论中所述，`Intersect`使用惰性评估。它推迟*所有*执行，直到从结果中读取第一个元素；那时它会将*所有*内容加载`listB`到一个集合中，然后流式传输`listA`，直到找到要产生的结果。届时，`Any()`将返回`true`，因此将不再进行任何工作。有关更多信息，请参阅我的[Edulinq 帖子。`Intersect`](http://codeblog.jonskeet.uk/2010/12/30/reimplementing-linq-to-objects-part-16-intersect-and-build-fiddling)

# php - 在加密密码中添加了空格？

> ID：12584181
> 
> 赞同：1
> 
> 时间：2012-09-25T13:39:20.100
> 
> 标签：php, string, int, whitespace, mcrypt

我在我的登录模型中实现了用于解密/加密用户密码的功能（在加密版本中存储在 cookie 中）。一切正常，除非我重新启动浏览器并尝试通过 cookie 使用密码登录。

解析器告诉我这是错误的密码，即使当我回显它时我可以看到它是正确的密码。因此我尝试了一个“strlen”来查看密码有多少个字符，它显示为 32（！）。我唯一能想到的是（在这种情况下）添加了 28 个空格，这是无法通过回声看到的。

如果有人能告诉我发生了什么以及如何解决它，我将不胜感激？

```
function decrypt($encrypedText) {
    $key = "The secret key is";
    $decryptedText = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, base64_decode($encrypedText), MCRYPT_MODE_ECB);

    echo $decryptedText;            //  "abcd" <- what I put in
    echo strlen($decryptedText);    //  32 (?)

    return $decryptedText;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:00:10.977

这是因为 32 字节是 Rijndael 256 的块大小（即 32 = 256 / 8），解密后的数据被填充`'\0'`以匹配该长度。

要更正此问题，您可以像这样删除这些字符：

```
return rtrim($decryptedText, '\0'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:47:07.127

删除空格使用 php`trim()`函数

```
$password=trim($_COOKIE("value")); 
```

它将从开头和结尾删除空格

# ms-access - 查找带有 ID 的记录

> ID：12584182
> 
> 赞同：1
> 
> 时间：2012-09-25T13:39:27.627
> 
> 标签：ms-access, ms-access-2010

我正在尝试移动到具有特定 ID 的记录。

我在这篇文章中尝试了解决方案：[MS Access search for record by textbox instead of dropdown](https://stackoverflow.com/questions/924101/ms-access-search-for-record-by-textbox-instead-of-dropdown)

但没有成功

这是我的代码

```
Private Sub btnShowPrevious_Click()
    Dim rs As DAO.Recordset
    Set rs = Me.RecordsetClone
    rs.FindFirst "[ID]=" & ParentID
    If rs.NoMatch Then
        MsgBox "Sorry, no such record '" & ParentID & "' was found.", _
               vbOKOnly + vbInformation
    Else
        Me.Recordset.Bookmark = rs.Bookmark
    End If
    rs.Close
End Sub 
```

它总是没有匹配，但 parentID = 1 并且有一条 ID = 1 的记录..

有人知道出了什么问题吗？

谢谢

记录来源是这张表：

```
CREATE TABLE [dbo].[ProposalFollowUp](
[ID] [int] IDENTITY(1,1) NOT NULL,
[ProposalID] [int] NOT NULL,
[MillID] [int] NULL,
[ClientID] [int] NULL,
[Comment] [nvarchar](max) NULL,
[Method] [nvarchar](128) NULL,
[Contact] [int] NULL,
[ContactDate] [datetime] NULL,
[Done] [bit] NOT NULL,
[CreatedBy] [nvarchar](50) NULL,
[CreatedDate] [datetime] NULL,
[ModifiedBy] [nvarchar](50) NULL,
[ModifiedDate] [datetime] NULL,
[EAIEmployee] [nvarchar](50) NULL,
[PersonInCharge] [nvarchar](50) NULL,
[ParentID] [int] NULL, 
```

这是表单属性的屏幕截图

![在此处输入图像描述](../Images/abc0fb64cf969958a94aaf94dcec43d4.png)

最后，如果我显示导航栏，我可以看到有一个过滤器。可能是因为我这样打开表格

```
DoCmd.OpenForm "ProposalsFollowUp", , , "[ID] = " & txtID, acFormEdit, acDialog 
```

如果我删除过滤器，它可以工作。

好的，这是最终的代码

```
Private Sub btnShowPrevious_Click()
    Dim parent As Integer
    parent = ParentID
    Me.Filter = ""
    Dim rs As DAO.Recordset
    Set rs = Me.RecordsetClone
    rs.FindFirst "[ID]=" & parent
    If rs.NoMatch Then
        MsgBox "Sorry, no such record '" & parent & "' was found.", _
               vbOKOnly + vbInformation
    Else
        Me.Recordset.Bookmark = rs.Bookmark
    End If
    rs.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:01:36.140

在检查了所有明显的内容（例如确保记录集包含您正在搜索的数据并且没有过滤器）之后，您可以考虑表单存在问题。过滤器显示在 Access 2010 中的表单底部，可以通过以下方式在 VBA 中删除：

```
Me.FilterOn = False 
```

或者通过单击过滤器按钮：

![表单过滤器访问 2010](../Images/7f6f715c8685f3839f764ed34bd3c699.png)

前端发生的奇怪事情通常是由于某种形式的损坏。开发时需要定期备份、压缩、修复和反编译。如果您有链接表，刷新链接通常是个好主意。

如果您创建了一个不想丢失的表单并且它已损坏，您可以通过剪切和粘贴复制到一个新表单，或者您可以导出为文本并导入。

反编译：

```
"c:\Program Files\Microsoft office\office\msaccess.exe" /decompile "c:\My Documents\MyDatabase.mdb" 
```

-- [http://allenbrowne.com/ser-47.html](http://allenbrowne.com/ser-47.html)

另存为文本：

```
Application.SaveAsText acForm, "FormName", "z:\docs\tmp.txt"
Application.LoadFromText acForm, "restoredForm", "z:\docs\tmp.txt" 
```

# javascript - Jquery的ie7问题，也可能是html

> ID：12584183
> 
> 赞同：0
> 
> 时间：2012-09-25T13:39:31.993
> 
> 标签：javascript, jquery, html, css, internet-explorer-7

我正在为当地企业慈善机构开发一个网站，但在 ie7 中让一切正常工作时遇到了问题。它适用于我测试过的所有其他浏览器，并在通过 w3 的验证器时通过。

我在左侧的导航在 ie7 中不起作用，当我查看下面的开发人员工具时，链接就在那里（当然它们在那里并且在其他浏览器中工作）。

此外，画廊滑块的 jquery 没有正确加载，显示正在查看的图片的按钮和项目符号在那里，但图像本身却没有！

这是网址[http://www.youthenterprise.co.uk/newhullready/coded/gallery.php](http://www.youthenterprise.co.uk/newhullready/coded/gallery.php)

我已经用谷歌搜索了这个问题的答案并检查了他们建议的所有小细节（移动我没有的 $document.ready，确保它设置为 text/javascript 而不是 application/javascript...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:16:44.470

刚刚注意到你在 3-11 行的 orbit-1.2.3.css 中有这个

```
#featured, 1,2,3,4,5 { 
    width: 620px;
    height: 450px;
    background: #fff url('orbit/loading.gif') no-repeat center center;
    overflow: hidden;
    }
#featured, 1,2,3,4,5>img,  
#featured, 1,2,3,4,5>div,
#featured, 1,2,3,4,5>a { display: none; } 
```

这导致第一个滑块（也称为#featured）断裂。我不能 100% 确定这段代码在哪里使用，但如果你删除/注释掉它，它应该可以解决你的 IE7 问题。

或者，如果您需要该代码，请重命名第一个滑块的 ID。

希望有帮助。

谢谢阿娇

编辑：也忘了提，你不需要为每个滑块添加脚本，你可以将它们添加到 head 标签:)

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Hull Ready - the future is ours</title>

<link href="style/style.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="style/orbit-1.2.3/orbit-1.2.3.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script src="style/orbit-1.2.3/jquery.orbit-1.2.3.js" type="text/javascript"></script>

<!--[if IE 7]><link rel="stylesheet" href="style/ie7.css" type="text/css" /><![endif]-->

<script type="text/javascript">
$(window).load(function() {
$('#featured').orbit();
$('#featured1').orbit();
$('#featured2').orbit();
$('#featured3').orbit();
});
</script>
</head> 
```

# actionscript-3 - Flex DataGrid Rows Draging，需要自定义拖动行的背景颜色

> ID：12584188
> 
> 赞同：0
> 
> 时间：2012-09-25T13:39:52.373
> 
> 标签：actionscript-3, apache-flex, flex3

在 flex DataGrid 中，我启用了拖放行以使用户能够对行重新排序。功能工作正常。拖动行的默认行为是带有所有列文本的透明背景。

只需要突出显示正在拖动的行的背景颜色？

# java - 从 mjpeg 流中保存图像

> ID：12584192
> 
> 赞同：1
> 
> 时间：2012-09-25T13:40:01.720
> 
> 标签：java, stream, jpeg, mjpeg

我正在尝试从 MJPEG 流中捕获图像（jpeg）。
根据本教程[http://www.walking-productions.com/notslop/2010/04/20/motion-jpeg-in-flash-and-java/](http://www.walking-productions.com/notslop/2010/04/20/motion-jpeg-in-flash-and-java/) 我应该只保存从 Content-Length 开始的日期：并结束于——我的边界。
但由于某种原因，当我打开保存的文件时，我收到此消息无法打开此图片，因为文件似乎已损坏、损坏或太大。

```
public class MJPEGParser{

    public static void main(String[] args){
        new MJPEGParser("http://192.168.0.100/video4.mjpg");
    }

    public MJPEGParser(String mjpeg_url){
        try{

            URL url = new URL(mjpeg_url);
            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
            String line;
            while((line = in.readLine()) != null){
                System.out.println(line);
                if(line.contains("Content-Length:")){
                    BufferedWriter out = new BufferedWriter(new FileWriter("out.jpeg"));
                    String content = in.readLine();
                    while(!content.contains("--myboundary")){
                        out.write(content);
                        System.out.println(content);
                        content = in.readLine();

                    }
                    out.close();
                    in.close();
                    System.exit(0);
                }
            }

            in.close();

        }catch(Exception e){
            e.printStackTrace();
        }
      }
} 
```

我将非常感谢任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:16:47.773

有很多事情可能会导致您的代码失败：

*   并非所有[MJPEG](http://en.wikipedia.org/wiki/Motion_JPEG)流都以您的教程建议的类似 MIME 的方式编码。
    引用[维基百科](http://en.wikipedia.org/wiki/Motion_JPEG#Disadvantages)：

    > […] 没有文档定义了一种被普遍认为是“Motion JPEG”的完整规范，可在所有情况下使用的精确格式。

    例如，可以使用 MJPEG 作为[AVI](http://en.wikipedia.org/wiki/Audio_Video_Interleave)（即[RIFF](http://en.wikipedia.org/wiki/Resource_Interchange_File_Format)）文件的视频编解码器。因此，请确保您的输入文件采用教程描述的格式。

*   文本`--myboundary`几乎可以肯定是一个占位符。在典型的[多部分 MIME 消息](http://en.wikipedia.org/wiki/MIME#Multipart_messages)中，全局 MIME 标头将提供一个`boundary`属性，指示*实际*用于分隔部分的字符串。您必须添加到`--`那里给出的字符串。
*   当您使用`Reader`and`Writer`时，您正在对字符而不是字节进行操作。根据您的语言环境，这两者之间可能没有 1:1 的对应关系，从而破坏了过程中数据的二进制格式。您应该对字节流进行操作，或者明确使用某些字符编码，例如 ISO-8859-1，它*确实*具有这样的 1:1 对应关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-03T15:54:28.600

我最近试图解决这个问题，我的谷歌研究多次把我带到这里。我最终解决了这个问题。关键部分是使用`BufferedInputStream`and`FileOutputStream`读取和写入 jpeg 字节，同时还将字节缓冲区连接成一个字符串以读取和识别帧之间的标题：

```
int inputLine;
String s="";
byte[] buf = new byte[1]; //reading byte by byte 

URL url = new URL("http://127.0.0.1:8080/?action=stream");
BufferedInputStream in = new BufferedInputStream(url.openStream());
OutputStream out = new FileOutputStream("output.jpg");

while ((inputLine = in.read(buf)) != -1) {

    s= s+ new String(buf, 0, inputLine);

    if (s.contains("boundarydonotcross")){
        System.out.println("Found a new header");
        s="";
    } 
```

如果有人需要，完整的代码在这里：

[https://github.com/BabelCoding/MJPEG-to-JPG](https://github.com/BabelCoding/MJPEG-to-JPG)

# excel - 使用 Shell 从 excel vba 运行 python 脚本什么都不做

> ID：12584195
> 
> 赞同：2
> 
> 时间：2012-09-25T13:40:10.830
> 
> 标签：excel, python-2.7, vba

我正在尝试像这样在 excel VBA 中运行 python 脚本：

```
Shell("python " & ActiveWorkbook.Path & "\CreateVolsurface.py -d ""10 Sep 12""") 
```

但它什么也没做。如果我查看任务管理器，甚至不会创建 python 进程。如果我调试并复制上面代码中创建的字符串并将其粘贴到命令提示符中，它会完美运行。

python 脚本将日期（作为字符串）作为参数并创建图像文件。

知道为什么这不起作用或如何调试它吗？

我也试过这个：

```
Shell ("python CreateVolsurface.py -d ""10 Sep 12""") 
```

还有这个：

```
ret_val = Shell("python " & ActiveWorkbook.Path & "\CreateVolsurface.py -d ""10 Sep 12""", vbHide) 
```

但他们也什么都不做。

* * *

问题是`shell()`在 vba 中启动 cmd.exe 在它的默认文件夹中，而不是在当前工作簿的活动文件夹中。在我的 python 脚本中，我有相对路径引用，这是一个问题。为了解决这个问题，我在我的 python 脚本中使用 os 模块在开始时更改当前目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:30:01.247

尝试指定 python.exe 的路径，或者您可能需要将路径添加到您的 %PATH% 环境变量。

尝试以下操作以验证 Shell 是否正常工作并逐步使用调试器：

```
ret_val = Shell("notepad.exe", vbNormalFocus) 
```

如果可行，那么您应该尝试指定路径：

```
args = ActiveWorkbook.Path & "\CreateVolsurface.py -d ""10 Sep 12"""
ret_val = Shell("C:\python27\python.exe " & args) 
```

如果您需要检查 python 是否在您的 %PATH% 环境变量中，sysinternals 的 Process Explorer (procexp.exe) 实用程序可以向您显示正在运行的进程的所有环境设置。

# java - Java 编译器错误谜题：“内部类不能有静态声明”——除了简单类型

> ID：12584200
> 
> 赞同：9
> 
> 时间：2012-09-25T13:40:32.027
> 
> 标签：java, compiler-construction, compiler-errors

在编码时，我遇到了一个奇怪的 Java 编译器行为。

`inner classes cannot have static declarations`编译类（下面的源代码）时，编译器会在 NULL 类变量上发出错误（“ ”）。这和预期的一样！

但是，零类变量不会产生错误。这个我不明白！

为什么这种差异似乎允许在内部类中静态声明简单类型，但不允许对象。

> （javac-版本：1.6.0_24）

```
public class Outer {
    public static final Runnable HELLO = new Runnable() {
        // No compiler error
        public static final int ZERO = 0;

        // Causes compiler error: "inner classes cannot have static declarations"
        public static final Object NULL = null;

        @Override
        public void run() {
            System.out.println("Hello " + ZERO + NULL);
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T13:46:37.803

问题是内部类不能具有初始化非平凡常量和非常量所需的静态初始化程序块。

# .htaccess - 如何停止 favicon.ico 请求的 htaccess 身份验证

> ID：12584202
> 
> 赞同：2
> 
> 时间：2012-09-25T13:40:33.220
> 
> 标签：.htaccess, authentication, favicon

我们已将页面从一个域重定向到另一个域，请求的域是 https（SSL 认证）并且它要求 /favicon.ico 的 htaccess 身份验证，但请求的页面不包含 /favicon.ico 的任何代码你能不能给任何解决方案？即不要求 /favicon.ico 的 htaccess 身份验证

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:55:24.507

与这个问题几乎相同： [HTTP Basic Auth Exclude Single File](https://stackoverflow.com/questions/3865374/http-basic-auth-exclude-single-file)

除了另一个问题更抽象一些，但也应该适合您的问题。

# sql - 如何防止子选择取消一组ID的资格

> ID：12584203
> 
> 赞同：0
> 
> 时间：2012-09-25T13:40:34.247
> 
> 标签：sql, subquery

我不知道该往哪里走。这就是我想要做的......想象有一个“系统”，里面有 5 个盒子......每个盒子有 10 个可以容纳物品的口袋。该数据库在口袋级别跟踪库存。我需要一个 itemid 的列表，它们不在父“系统”中的任何位置（假设它们仍然可能在其他系统的口袋中。

```
tblpocket
----------
systemid, itemid, pocketid, curqty
1,        PFLI,   12,       0      
1,        MEP50,  16,       0       
1,        PFLI,   20,       0       
1,        OND5,   32,       0       
2,        OXBUT,  10,       0       
2,        DIPL,   12,       0       
2,        OXBUT,  16,       1       
2,        PFLI,   18,       1 
```

除了 "OXBUT" itemid 之外的所有项目都需要返回。您还可以看到如何进行子选择以排除 itemid curqty > 0 的位置将它从结果中完全排除在 systemid 1 上的缺货位置。

我有 300 个 SystemID 和数千个 ItemID，所以一次做 systemid 不是一种选择。

这是我开始做的事情：

```
SELECT systemid, itemid
FROM TblPocket
WHERE curqty = 0 AND itemid NOT IN
 (Select itemid from tblpocket where curqty > 0)
GROUP BY systemid, itemid 
```

这就是我被绊倒的地方.... :( 提前感谢您的想法 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:44:59.067

如果我理解你的问题。. . 您正在寻找系统中 curqty = 0 的项目。但是，一件物品可能在多个口袋中。这似乎是对“我需要一个 itemid 列表，它们不在父“系统”中的任何位置（假设它们仍然可能在其他系统中的口袋里）的合理解释。

这是一个聚合查询：

```
select systemid, itemid
from TblPocket
group by systemid, itemid
having sum(curqty) = 0
order by systemid 
```

但是，您的 OXBUT 示例提出了一些不同的建议：项目要么全为 0，要么永远不为 0。这是对`HAVING`子句的简单修改：

```
select systemid, itemid
from TblPocket
group by systemid, itemid
having sum(case when curqty = 0 then 1 else 0 end) = 0 or  -- all not zero
       sum(case when curqty > 0 then 1 else 0 end) = 0     -- all zero
order by systemid 
```

# c# - 单击搜索按钮时，空文本字段仍会填充数据。

> ID：12584209
> 
> 赞同：-1
> 
> 时间：2012-09-25T13:40:46.040
> 
> 标签：c#, asp.net-mvc-3, html

ASPX 引擎

我有一个带有搜索按钮的网络表单。用户输入用户 ID 并假设用数据填充表。

如果用户输入除数字以外的任何内容，则假定会出现一条消息，只说数字。
如果用户将该字段留空并点击搜索按钮。没有结果/类发现假设显示。

我遇到的问题是，无论我在文本字段中输入什么，数据仍然会填充表格。

**html**

```
 <div align="center">
    <form id="searchUser" method="post" action="Search">
        <table align="center">
    <tr>
        <td class="label">
            Enter ID:
        </td>
        <td>
            <input type="text" name="UserId" id="UserId" value="<%=(string)(ViewBag.userid)%>" />
        </td>
    </tr>
    <tr>
        <td>
            <button class="searchButton" id="searchButton">Search</button>
        </td>
    </tr>
  </table>
 </form>
   </div>
   <hr /> 

   <% if (ViewBag.searchClass !=null)
     { %>
     <h2>Search Resuls</h2>
     <br />
     <%AAlexUsers.Models.SearchClass searchClassList= ViewBag.searchClass;%>
     <table>
        <tr>
            <td>
                UserID:
            </td>
            <td class="content">
              <%=searchClassList.userId%>
            </td>
        </tr>
        <tr>
            <td>
                Email:
            </td>
            <td class="content">
             <%=searchClassList.email%>
            </td>
        </tr>
    <tr>
        <td>
        Last Four Digits:
        </td>
        <td class="content">
          <%=searchClassList.lastFourdigits%>
         </td>
    </tr>
 </table>

    <%} else %>
 <%{ %>
    <h2>No Class found.</h2>
 <%} %> 
```

**控制器**

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    }

    public ActionResult About()
    {
        return View();
    }

    public ActionResult Search()
    {
        string userId = Request["UserId"];

        bool view = false;

        if (Request["UserId"] == null)
        {
            view = true;
        }
        if (!view)
        {

            AAlexUsers.Models.SearchClass searchClass = new Models.SearchClass();
            {
                searchClass.lastFourdigits = "2222";
                searchClass.userId = userId;
                searchClass.email = "diaz@gmail.com";

                string lastFourdigits = searchClass.lastFourdigits;
                string userIdd = searchClass.userId;
                string email = searchClass.email;

                ViewBag.searchClass = searchClass;
                ViewBag.lastFourdigits = lastFourdigits;
                ViewBag.userId = userIdd;
                ViewBag.email = email;
            }
        }
        return View();
    }
} 
```

**模型**

```
public class SearchClass
{
    public string userId { get; set; }
    public string email { get; set; }
    public string lastFourdigits { get; set; }

    public SearchClass()
    {
        userId = "";
        email = "";
        lastFourdigits = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:44:22.747

改变这一行...

```
if (Request["UserId"] == null) 
```

……到这……

```
if (string.IsNullOrEmpty(userId)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:46:13.573

您正在检查是否`Request["UserId"]`为空，但它永远不会为空，因为即使在您的模型中，默认情况下您也将其值定义为空字符串。

编辑：好的，迈克更快，但这解释了为什么你需要使用`IsNullOrEmpty`:)

关于数字完整性检查：

```
string Str = Request["UserId"];
double Num;
bool isNum = double.TryParse(Str, out Num); 
```

`isNum`如果您的字符串不是数字，则为假。我没有任何 c# 开发 IDE，但我检查了规范，这应该可以工作。

# java - 我必须使用扫描仪读取数字，并且对于每个

> ID：12584210
> 
> 赞同：0
> 
> 时间：2012-09-25T13:40:48.023
> 
> 标签：java

我在互联网上找不到任何提示。几乎提到'for each'说“不能改变分配给数组的值”是不可能的吗？我的代码是这样的：

```
Scanner in = new Scanner(System.in);
int[] arr = new int[5];
for(int i : arr)
    i = in.nextInt(); 
```

我想使用'for each'并通过使用 Scanner 类读取数字请帮助我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:42:12.733

使用一个简单的`for`循环，并将读取的数字添加到`i`数组的 -th 位置：

```
Scanner in = new Scanner(System.in);
int[] arr = new int[5];
for (int i = 0; i < arr.length; i++) {
    arr[i] = in.nextInt();
} 
```

在您的特定场景中使用增强循环没有多大意义`for`，因为您的数组最初是空的。但是，您可以使用它来*迭代*创建的数组，即：

```
for (int i : arr) {
  System.out.println(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:46:47.520

就这么简单：-

```
Scanner in = new Scanner(System.in);
int[] arr = {0, 1, 2, 3, 4};

for (int i : arr) {
    arr[i] = in.nextInt();
} 
```

但是如上所述`João Silva`，您应该只使用 for-each 循环来迭代已经初始化的数组，而不是初始化它。

# c# - 无法读取文件，但可以在 C# 中复制它

> ID：12584212
> 
> 赞同：1
> 
> 时间：2012-09-25T13:40:56.613
> 
> 标签：c#, .net, file

某些系统服务使用了一个日志文件。我希望我的程序读取该文件。

如果我使用我`System.IO.File.ReadAllText()`会收到消息。但是，如果我打电话，我可以将该文件复制到一个临时文件中并读取该临时文件。`System.IO.IOException``The process cannot access the file 'X' because it is being used by another process.``System.IO.File.Copy()`

这有点奇怪。如果我可以复制文件，为什么我不能打开它进行阅读？

是否可以直接读取该文件而不先复制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:44:49.413

这取决于日志文件的创建方式，特别是 FileShare 参数。您可以将其设置为允许读取、写入或无。

```
FileStream s2 = new FileStream(name, FileMode.Open, FileAccess.Read, FileShare.Read); 
```

[http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:45:59.700

您收到的消息意味着该日志文件是在没有“共享读取”标志的情况下创建/打开的。实际上，只有在该文件的创建者或第一个“打开者”明确允许的情况下，才允许打开已经打开的文件。

要阅读它，您可以像以前那样复制它，或者创建驱动器的 VSS 快照。

# java - 尝试构建示例 Red5 Secure 项目，但由于某些依赖项而失败

> ID：12584213
> 
> 赞同：1
> 
> 时间：2012-09-25T13:41:03.943
> 
> 标签：java, ant, compiler-errors, spring-security, red5

我找到了本教程：[http](http://blog.infrared5.com/2012/05/red5-authentication/) ://blog.infrared5.com/2012/05/red5-authentication/并尝试构建它。我使用 netbeans 并在“服务器”目录上创建了一个自由形式的项目。一切顺利，但构建失败，因为它无法下载一些 Spring 框架库（安全 acl、配置和核心）。我手动找到了它们，下载了它需要的相同版本（3.0.7）。这个错误消失了，但变成了一些 Java 编译时错误。:-(

例如：

> 编译6个源文件到/Users/ist1/Downloads/red5-auth/server/www/WEB-INF/classes/Users/ist1/Downloads/red5-auth/server/src/org/red5/demo/auth/AggregatedUserDetailsS​​ervice。 java:29: 包 org.springframework.security.core.userdetails 不存在导入 org.springframework.security.core.userdetails.UserDetails；/Users/ist1/Downloads/red5-auth/server/src/org/red5/demo/auth/AggregatedUserDetailsS​​ervice.java:30：包org.springframework.security.core.userdetails不存在导入org.springframework.security.core .userdetails.UserDetailsS​​ervice；/Users/ist1/Downloads/red5-auth/server/src/org/red5/demo/auth/AggregatedUserDetailsS​​ervice.java:31：包org.springframework.security.core.userdetails不存在导入org.springframework.security.core .userdetails.UsernameNotFoundException;

我现在该怎么办？我是 Red5 的新手，很久没用过 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:56:20.077

我建议使用 Eclipse，因为示例是用它构建的。如果您运行该程序，您仍然可以将您的项目迁移到 Netbeans。

您是否在 Eclipse/Netbeans 中使用 Red5 成功建立了一个新项目并之前构建过？本教程需要设置一个基本项目才能开始。您尝试完成的实际上是一个示例项目（实际上可能对您几乎没有用处）

实际上，如果您遵循 3 个初始点：

*   创建一个新的red5项目
*   将项目导入 Eclipse
*   创建应用程序适配器

你已经有了你的 Red5 webapp。如果您不需要特别是此身份验证机制，则无需遵循指南的其余部分。

在他们的 SVN 中还有一些带有源代码的演示应用程序。也许这些也是开始的好方法。

塞巴斯蒂安

# wcf - 由于 xml 序列化导致的数据丢失

> ID：12584215
> 
> 赞同：1
> 
> 时间：2012-09-25T13:41:11.737
> 
> 标签：wcf, xml-serialization, datacontractserializer, xmlserializer, data-loss

在我的服务合同中，有一种方法使用 XmlSerializer 格式而不是 dataconract 序列化程序。此服务协定实现了另一个仅使用 datacontractserializer 的接口。

来自另一个接口的响应对象部分根本没有被序列化

请让我知道是否有解决方案？您认为实际问题是什么。我假设问题是使用`[XmlSerializerFormat]`.

# windows - 无法为nodejs（windows）安装mongodb依赖项

> ID：12584220
> 
> 赞同：0
> 
> 时间：2012-09-25T13:41:39.290
> 
> 标签：windows, node.js, mongodb

我正在尝试使用 nodejs 运行 mongo 数据库，但是当我在命令行中键入“npm install mongodb”时，出现以下错误：

```
    C:\Users\me>npm 安装 mongodb
    npm http GET https://registry.npmjs.org/mongodb
    npm http 304 https://registry.npmjs.org/mongodb
    npm http GET https://registry.npmjs.org/bson/0.1.3
    npm http 304 https://registry.npmjs.org/bson/0.1.3
    npm WARN package.json bson@0.1.3 找不到 README.md 文件！

    > bson@0.1.3 安装 C:\Users\me\node_modules\mongodb\node_modules\bson
    > 节点安装.js

    CreateProcessW：系统找不到指定的文件。
    npm 错误！bson@0.1.3 安装：`node install.js`
    npm 错误！`cmd "/c" "node install.js"` 失败，出现 127
    npm 错误！
    npm 错误！bson@0.1.3 安装脚本失败。
    npm 错误！这很可能是 bson 包的问题，
    npm 错误！不是 npm 本身。
    npm 错误！告诉作者这在您的系统上失败：
    npm 错误！节点安装.js
    npm 错误！您可以通过以下方式获取他们的信息：
    npm 错误！npm 所有者 ls bson
    npm 错误！上面可能有额外的日志输出。

    npm 错误！系统 Windows_NT 6.1.7601
    npm 错误！命令 "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_m
    odules\\npm\\bin\\npm-cli.js" "安装" "mongodb"
    npm 错误！cwd C:\用户\我
    npm 错误！节点-v v0.8.9
    npm 错误！npm -v 1.1.61
    npm 错误！代码生命周期
    npm 错误！
    npm 错误！可以在以下位置找到其他日志记录详细信息：
    npm 错误！C:\Users\me\npm-debug.log
    npm 错误！不好的代码 0

    C:\用户\我>

```

似乎 bson0.1.3 是问题所在。有谁知道我可能会解决这个问题？我正在使用 64 位 Windows 7，nodejs 版本 0.8.9，npm 版本 1.1.61，并且当前安装了 mongodb 版本 2.2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:58:44.733

npm 调用 CreateProcessW 需要您的 cmd 管理员权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:30:04.007

我今天试过了，它对我来说运行良好的节点和 npm 的确切版本。您可以在`npm-debug.log`文件中找到任何信息吗？

尽管请注意在 GitHub 存储库中创建了问题：
[https ://github.com/mongodb/js-bson/issues/14](https://github.com/mongodb/js-bson/issues/14)

# ios - FMDB，sqlite json-string 成字典？

> ID：12584223
> 
> 赞同：4
> 
> 时间：2012-09-25T13:41:43.973
> 
> 标签：ios, json, nsdictionary, fmdb

我使用 FMDB 从我的服务器加载 json-data。我得到的响应（JSON），我存储在一个 sqlite 数据库中（与下面的响应相同的字符串存储在数据库中）。后来我通过 FMDB 从数据库中选择该数据并尝试从中建立一个 NSDictionary，但无法使其正常工作。

当我通过 NSLog 输出它时，我从服务器获得的 json 响应如下所示（缩短了这篇文章的响应，所以它包含更多......）：

```
{
response = {
    data = {
        "dbId_1" = {
            1 = {
                current = {
                    weekday = Tuesday;
                };
            };
        };
    };
};
} 
```

这就是我从数据库中选择它的方式以及我想从中创建 NSDictionary 的方式：

```
NSString *jsonString = [results stringForColumn:@"json"]; 
```

是否可以将所有内容再次构建到 NSDictionary？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:30:57.760

将 JSONKit 添加到您的项目中，#import "JSONKit.h" 然后去：

```
NSDictionary *jsonDict = [yourJSONStringFromDB objectFromJSONString]; 
```

如果您使用的是自动引用计数，那么您需要打开您的项目设置 > 构建阶段 > 编译源面板

查找“JSONKit.m”行并双击它，添加“-fno-objc-arc”以强制此文件不自动引用计数。

JSONKit 可以在这里下载：[https ://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:21:44.783

在我看来，您将需要构建整个字典。

从您存储在 SQLite 数据库中的数据中，您必须将“键”和“值”对保存到字典中。

我曾经使用过类似的编码结构，并为此使用了一个数组。

我希望这有帮助。

# mysql - Grails 应用程序无法连接到 mysql 服务

> ID：12584225
> 
> 赞同：1
> 
> 时间：2012-09-25T13:41:46.830
> 
> 标签：mysql, grails, cloud-foundry

我的 grails 2.1.0 应用程序已部署并在 cloudfoundry 中工作，使用 mysql 服务，昨天我做了一些更改，更新后无法再次工作。我没有对数据源进行任何更改。

通过查看 tomcat 日志，看起来数据库设置在部署时没有被覆盖，[如文档中所述](http://docs.cloudfoundry.com/services/mysql/grails-mysql.html)，并且消息“无法为连接创建 'com.mysql.jdbc.Driver' 类的 JDBC 驱动程序”出现异常URL 'jdbc:h2:prodDb;MVCC=TRUE'”。

我正在使用 Spring Groovy/Grails Tool Suite 集成将我的应用程序部署到 cloudfoundry。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:15:45.220

感谢大家的时间，刚刚发现 svn 中的冲突禁用了 cloudfoundry 插件，该插件在部署到 cloudfoundry 上的绑定 mysql 服务时覆盖了数据源定义。

JDBC URL 在部署时被插件覆盖，因此当它正常工作时，URL 与您的应用程序将使用的 mysql 数据库不匹配并不重要，实际上您可以完全删除 URL

# javascript - jQuery 类选择器 - 访问所选元素的属性？

> ID：12584226
> 
> 赞同：0
> 
> 时间：2012-09-25T13:41:55.213
> 
> 标签：javascript, jquery

我目前有一个页面，其中包含多个元素，类“链式”。我想使用一个类选择器，这样我就可以选择所有这些，并根据一些数据属性运行一些额外的代码（每个元素都会不同）。到目前为止，我的代码是：

```
$('.chained_child').remoteChainedTo('chained_parent'
   + $(this).data('chained-parent'), $(this).data('chained-url')); 
```

我相信问题出在这部分：`$(this).data('chained-parent')`- 这似乎不起作用。如何选择所选元素的数据属性？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:43:58.230

您可以使用该[`.each()`](http://api.jquery.com/each/)方法迭代匹配的元素集并为每个元素运行一个函数：

```
$('.chained_child').each(function () {
    $(this).remoteChainedTo('chained_parent' + $(this).data('chained-parent'), $(this).data('chained-url'));
}); 
```

正如您在上面的代码中看到的，`.each()`回调内部`this`指的是当前底层 DOM 节点（不是 jQuery 对象，因此需要将其传递给 jQuery）。

请注意，一些 jQuery 方法将接受一个函数作为单个参数，该函数将在隐式`.each()`循环中为匹配集中的每个元素调用一次。查看您正在使用的插件的源代码表明情况并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:44:20.537

我认为你应该这样使用

```
$(".chained").each(function(){
//add data as you want
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:44:16.393

尝试使用

```
$(this).attr('data-chained-parent') 
```

或者

```
$(this).data('chainedParent') 
```

# azure - Azure 数据库并发使用问题

> ID：12584227
> 
> 赞同：11
> 
> 时间：2012-09-25T13:41:57.610
> 
> 标签：azure, concurrency, azure-sql-database, database-concurrency

只是想由大家运行一下，看看是否有任何好的想法，因为经过一整天、一夜和一早的搜索，我已经用尽了所有的想法。在并发使用（selenium 测试）时，我们遇到的问题总是围绕数据库连接，例如超时、断开/关闭的连接、无法访问数据库服务器。

这个问题似乎仅限于 Azure，因为即使在指向同一个数据库（SQL Azure）的相同代码上运行相同的硒测试时，我们还没有在本地遇到这个问题，所以它会指出它是出站的一些问题SQL Azure 中的数据库连接。到目前为止，我们已经尝试了以下方法：

1.  Azure 瞬态故障处理——当 SQL Azure 服务本身出现临时问题时，我们有重试逻辑。
2.  更改通信协议——我们已经尝试过 TCP 和命名管道，但我们都遇到了同样的问题。
3.  调整数据库连接超时间隔——我们尝试增加此时间无济于事。
4.  添加多个活动结果集 – 我们已将其添加到连接字符串中，但无济于事。
5.  检查每个查询的连接状态——当我们返回 DataContext 时，我们检查它的连接并在必要时重新打开。
6.  关闭连接池 - 我们也尝试过，但没有成功。
7.  改变了设计模式——我们甚至不遗余力地实现了工作单元设计模式，在每个工作单元之后都会启动和处理数据库连接，但这会在其他地方引起延迟加载、将对象传递给方法等问题在这一点上，这将是一个太大的返工。

8.  更改角色大小——我想尝试的最后一件事是在 Windows Azure 中存在任何隐式连接限制的情况下增加角色大小——目前正在部署，所以它仍有一半可能起作用！

网站基础设施如下：

*   DataContext 类（扩展 DbContext），它是 Code First EF 上下文。
*   BusinessLayer 类包含一个私有的、非静态的 DataContext。DataContext 是注入每个 Manager/Helper 类的构造函数。
*   BusinessLayerService 类包含一个公共的、线程静态的 BusinessLayer 实例。
*   MVC 站点使用 BusinessLayerService.Instance 访问管理器类，这些管理器类查询和更新它们已传递的 DataContext。

任何帮助将不胜感激。

**更新：**我们将 VM 大小提高到中，它所做的只是意味着同样的问题需要更长的时间才能发生。

当问题开始发生时，一名团队成员注意到发生了以下异常：

> InvalidOperationException：执行命令需要打开且可用的连接。连接的当前状态已断开。

每当数据库被击中时，这种情况就开始发生（不是特定于某个代码区域）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:12:00.463

我以前遇到过这种问题。在我的情况下，这与 Entity Framework ObjectContexts 没有被正确处理有关，最终太多的上下文被启动并且网站被推翻了。我们使用 Entity Framework Profiler 确定在抛出错误时有很多未关闭的 ObjectContext。

迁移到工作单元设计模式（或类似模式）对我们来说是不可行的，因为它需要重写业务层，因此，我们通过在每次页面请求后手动关闭 ObjectContexts 来解决它。我们采用了在 Global.asax 的 End Request 事件中手动处理上下文的方法，但是，其他有效的方法是将上下文存储在 HttpContext 中或实现一个具有“每个请求”的 IoC 容器（例如 Castle Windsor） “ 生活方式。

# visual-studio - WIX：显示对话框的条件如何与 VS2010_IDE_VCSHARP_PROJECTSYSTEM_INSTALLED 等属性一起使用？

> ID：12584228
> 
> 赞同：5
> 
> 时间：2012-09-25T13:42:01.877
> 
> 标签：visual-studio, properties, wix, conditional-statements

我需要根据 VS2010_IDE_VWD_PROJECTSYSTEM_INSTALLED 属性值向用户显示警告消息（不是条件消息）。这是一个简单的例子：

```
{some files added}
...
<PropertyRef Id="VS2010_IDE_VWD_PROJECTSYSTEM_INSTALLED" />
<Property Id="WIXUI_INSTALLDIR" Value="INSTALLDIR" />
<UIRef Id="WixUI_InstallDir" />

<UI Id="CheckStudio">
  <Dialog Id="StudioDlg" Width="260" Height="75" Title="Hello" NoMinimize="yes" >

    <Control Id="Message" Type="Text" X="10" Y="10" Width="240" Height="40" Text="There is a problem." />

    <Control Id="Return" Type="PushButton" X="110" Y="52" Width="50" Height="17" Default="yes" Cancel="yes" Text="&amp;OK">
      <Publish Event="EndDialog" Value="Return">1</Publish>
    </Control>

  </Dialog>

  <InstallUISequence>
    <Show Dialog="StudioDlg" Sequence="1" >
      <![CDATA[Installed OR VS2010_IDE_VWD_PROJECTSYSTEM_INSTALLED]]>
    </Show>
  </InstallUISequence>

</UI> 
```

我尝试了以下条件：

```
VS2010_IDE_VWD_PROJECTSYSTEM_INSTALLED<>""
VS2010_IDE_VWD_PROJECTSYSTEM_INSTALLED<>"0"
VS2010_IDE_VWD_PROJECTSYSTEM_INSTALLED<>"{value}" 
```

但没有任何帮助。在我的两台机器上（一台安装了 VS，另一台是干净的）对话框同时出现（但应该只在第一台上）。我确实做了一个日志，它显示只有在第一台机器上这个属性才有值。在这种情况下应该使用这些属性（表示某些东西）吗？也许还有另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:56:16.717

这解决了我安装 WIX 3.6 后的问题：

```
<InstallUISequence>
   <Show Dialog="FrameworkDlg" After="CostFinalize" >
     <![CDATA[NOT (Installed OR VS2010_IDE_VWD_PROJECTSYSTEM_INSTALLED OR VS2012_IDE_VWD_PROJECTSYSTEM_INSTALLED)]]>
   </Show>
</InstallUISequence> 
```

安装程序应在安装前警告用户最好在机器上安装 Visual Studio 2010 或 2012。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:26:35.600

然后看起来问题不在财产上。请尝试将条件设置为“0”和“1”。这有什么区别吗？我想不会。然后检查这个：

```
 <InstallUISequence>
    <Show Dialog="StudioDlg" Before="WelcomeDlg" >
      <![CDATA[Installed OR VS2010_IDE_VWD_PROJECTSYSTEM_INSTALLED]]>
    </Show>
  </InstallUISequence> 
```

我将顺序更改为稍后（在 WelcomeDlg 之前）。它将在属性初始化后执行。我想该属性尚未在序列 = 1 处初始化。

# html - 我无法在 vaadin 中打开正文太长的邮件

> ID：12584236
> 
> 赞同：-1
> 
> 时间：2012-09-25T13:42:17.660
> 
> 标签：html, email, url, vaadin, mailto

对不起我的英语我的问题是，我在正文中打开经理操作系统预完成邮件和收费信息。为此，请使用 MailTo html 和正文设置，但如果正文很长 URL 超过限制，我不会打开任何东西。我的问题有什么可能的解决方案吗？任何创建 vaadin txt 并附加邮件的方式也可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:55:15.330

您正在达到 mailto URL 的限制 - 基本上，任何 mailto URL 的最大长度约为 2000 个字符；这不是 Vaadin 的限制，而是浏览器的限制。有关更多详细信息，请参阅此类[似的 SO 问题](https://stackoverflow.com/questions/4067391/getting-around-mailto-href-url-character-limit "AAA")

您不能在“客户端”上创建比这更长的电子邮件，至少不能通过 mailto url。

我知道的唯一替代方法是使用 SMTP/JavaMail API 从 Web 应用程序本身（即服务器端）创建和发送电子邮件

这确实假设

1.  你有一个 SMTP 服务器来发送邮件
2.  您没有允许*任何人*发送电子邮件的“开放”应用程序（例如，您的应用程序是否可以发送垃圾邮件）

# linux - 嵌套 spin_lock_irqsave

> ID：12584240
> 
> 赞同：6
> 
> 时间：2012-09-25T13:42:33.917
> 
> 标签：linux, linux-kernel, linux-device-driver

如果代码如下

```
void test(void)
{
  spin_lock_irqsave(&lock1, flag);
  ...
  func1();
  ...
  spin_unlock_irqrestore(&lock1, flag);
}

void func1(void)
{
  spin_lock_irqsave(&lock2, flag);
  ...
  spin_unlock_irqrestore(&lock2, flag);
} 
```

代码会有问题吗？当`spin_unlock_irqrestore`在 func1 中调用时，中断是否已经启用？我想要实现的是`test()`例程可以在没有调度程序或中断的任何中断的情况下执行。非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T15:41:00.383

据我在文档中找到的，并且我还没有完全用尽我的搜索，`flag`将保存设置不同标志的位的状态，然后关闭中断，然后在结束时恢复它。如果第一次调用已关闭中断`test`，然后您进行了另一次调用，我会假设（并且没有任何其他说明我发现）它将关闭中断，将它们存储`flags`并恢复到内部`func()`，然后恢复它们回到状态`flag`已经在`test`。

`test`中断应该只在你的函数之后重新启用。

我会说你唯一的问题是你不能`flag`在两个函数中使用相同的变量，否则你会覆盖你的内部调用中的第一个，然后重置它，如果你的调用之间有任何标志发生变化，你可以重置外部一到错误的状态。

# php - 我如何使用 pdo php 扩展在 mysql 中使用连接（来自不同数据库的 2 个表）进行查询？

> ID：12584242
> 
> 赞同：1
> 
> 时间：2012-09-25T13:42:34.433
> 
> 标签：php, mysql, pdo

问题是我在两个不同的数据库中有两个表，我们称它们为 A 和 B。在数据库 A 中，我们有 table1，在数据库 B 中，我们有 table2。table1 的主键是表 2 中的外键。所以我需要使用连接查询同时从两个数据库中提取数据。或者使用 PDO 你不能使用同一个 pdo 对象连接到两个数据库！

$bdd = new PDO('mysql:host=localhost;dbname=A', 'root', '12345');

那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:45:34.650

您应该能够执行以下操作：

```
SELECT *
FROM t1
LEFT JOIN otherDB.t2 on otherDB.t2.t1_fk = t1.id 
```

前提是用户具有相关权限。

# c++ - 让我们分析一下“collect2：ld返回1退出状态”？

> ID：12584243
> 
> 赞同：21
> 
> 时间：2012-09-25T13:42:35.993
> 
> 标签：c++, g++, makefile, ld

我知道这表明存在链接器问题，主要是未解析的符号。我知道要解决该问题/摆脱该错误消息，必须提供更多信息。我知道已经有很多关于解决这个问题的问题。

我的问题旨在帮助理解 make 和 ld，找出什么（和谁）试图用这条线表达什么。

```
collect2: ld returned 1 exit status 
```

*   “收集2：”是什么意思？它是一个步骤 make 调用吗？我在我的系统上找不到具有该名称的可执行文件。
*   这是否意味着我正在使用 ld ？我配置了我的项目/Makefile，以便 g++ 应该进行链接，那么为什么仍然涉及 LD
*   谁在写那封邮件？制作 ？ld？克++？
*   是否有一个有意义的可能退出代码列表？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-25T13:52:33.277

First things first, you need to know that the command-line programs named `gcc` and `g++` are only umbrella (wrappers) around the actual preprocessor/parser-compiler/assembler/linker commands. Their real name is `cpp`, `cc1` or `cc1plus`, `as` and `ld`, respectively. GCC helps in unifying their use, command line interface and providing a meaningful set of default (and required) options for them. It is very hard, for example, to link a binary directly using `ld` - if `ld` is not run with all the 20+ (IIRC) correct options, it just fails to work.

Now that you know that, you can see:

> Does it mean I am using ld ? I configured my project / Makefile so that g++ should do the linking, so why is LD still involved

It rather means you invoke GCC but in turn it invokes LD. GCC itself knows nothing - neither compiling, neither linking, as it's just a wrapper. (Go do a `wc -c` on `/usr/bin/gcc` and be surprised that it's only a few kilobytes! Now do the same for `/usr/libexec/gcc/cc1plus` and find out the horrifying truth: it is several 10 megs big!)

> What does "collect2:" mean? Is it a step make invokes ? I can't find an executable with that name on my system.

Collect2 is also another level of indirection between gcc and ld. [More about it on its official website.](http://gcc.gnu.org/onlinedocs/gccint/Collect2.html)

> Who is writing that message ? make ? ld ? g++ ?

Either g++ (that's it as far as I know) or `collect2` itself maybe.

> Is there a meaningful list of possible exit codes ?

The meaning is conventional - zero means success, nonzero means failure. If an exhaustive list exists, it should be able to be viewed by invoking `man ld`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-07T02:17:28.403

正如 H2CO3 所暗示的那样，为了了解手动链接的难度，请尝试使用详细开关 (-v) 运行 g++。它将为过程中的所有步骤（预处理、编译、组装、链接）输出命令（以及一些其他信息）。

例如，在 Cygwin 上使用 g++ 构建一个简单的 'Hello, World' 会产生：

```
/usr/lib/gcc/i686-pc-cygwin/3.4.4/collect2.exe -Bdynamic --dll-search-prefix=cyg
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../crt0.o -L . -L/usr/lib/gcc/i686-pc-cygwin/3.4.4
-L/usr/lib/gcc/i686-pc-cygwin/3.4.4 -L/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../..
/tmp/cc4btl0k.o -lfoo -lstdc++ -lgcc -lcygwin -luser32 -lkernel32 -ladvapi32 -lshell32 -lgcc 
```

...对于链接阶段。

# cakephp - cake-uploader - saveAssociated

> ID：12584245
> 
> 赞同：1
> 
> 时间：2012-09-25T13:42:56.820
> 
> 标签：cakephp, cakephp-2.2

我正在尝试在具有许多附件的模型（问题）中使用 saveAssociated 方法。

```
class Attachment extends AppModel {
    public $belongsTo = array(
        'Question' => array(
            'className' => 'Question',
            'foreignKey' => 'question_id',
        ),
    );

class Question extends AppModel {
public $hasMany = array(
    'Attachment' => array(
        'className' => 'Attachment',
        'foreignKey' => 'foreign_key',
        'dependent' => false,
        'conditions' => array('Attachment.model' => 'Question'),
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
        )
    ); 
```

模型 Attachments $actsAs AttachmentBehavior (来自[Cake-uploader Plugin](http://milesj.me/code/cakephp/uploader) )

```
class Attachment extends AppModel {
...
    public $actsAs = array(
        'Uploader.FileValidation' => array(
            'file' => array(
                'extension' => array(
                    'value' => array('gif', 'jpg', 'jpeg'),
                    'error' => 'Only gif, jpg and jpeg images are allowed!'
                ),
                'required' => true
            ),
            'import' => array('required' => true),
            'file' => array('required' => true),
        ),
        'Uploader.Attachment' => array(
            'file' => array(
                'name' => 'uploaderFilename',
                'baseDir' => '/******',
                'uploadDir' => '/****/',
                'dbColumn' => 'real_name',
                'maxNameLength' => 30,
                'overwrite' => true,
                'stopSave' => false,
                'transforms' => ''
            )
        )
    ); 
```

当我尝试添加带有附件的问题时，信息保存在数据库中，但文件未上传到预期的文件夹：

```
 public function add() {
        if (!empty($this->request->data) && $this->request->is('post')) {

            App::import('Vendor', 'Uploader.Uploader');

            $this->Mensagen->create();
            $this->request->data['Anexo'][0]['model'] = $this->modelClass;

            debug($this->request->data);

            if ($this->Mensagen->saveAll($this->request->data)) {
                $this->Session->setFlash(__('Success'));
            } else {
                $this->Session->setFlash(__('Try again.'));
            }
    } 
```

我有：

1.  用saveAssociated试过了，结果是一样的；
2.  使用附件模型的行为测试（插件附带）成功上传文件；
3.  成功保存了属于另一个模型的笔记

saveAssociated 和 saveAll 是否应该考虑插件实现的行为？

与此相关的其他问题是我在附件表上插入了两个注册表。一个填充了字段名称，另一个填充了字段模型。

最后一个问题正在发生，因为没有考虑该行为。使用 bahaviours 测试只保存一个注册表。

```
array(
    'Question' => array(
        'state_id' => '1',
        'from_id' => '2',
        'grup_id' => '1',
        'action' => 'add',
        'question' => 'test file 2'
    ),
    'Attachment' => array(
        'file' => array(
            'name' => 'foto0001.jpg',
            'type' => 'image/jpeg',
            'tmp_name' => '/tmp/phpPuVx3P',
            'error' => (int) 0,
            'size' => (int) 140773
        ),
        'model' => 'Question'
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:29:01.777

您是否检查了以下内容：

1.  确保 basedir 和 attachement 目录存在于预期的位置？
2.  检查目录上的权限以确保您的应用程序有权在那里写入？

过去这些都是我的“陷阱”。

# c# - GOTO 在 using 块中，对象会被处理吗？

> ID：12584249
> 
> 赞同：3
> 
> 时间：2012-09-25T13:43:14.780
> 
> 标签：c#, .net, .net-4.0

我很不确定在块`goto`内使用。`using`

例如：

```
using(stream s = new stream("blah blah blah"));
{
    //do some stuff here

    if(someCondition) goto myLabel;
} 
```

现在如果`someCondition`为真，代码执行将继续执行`myLabel`，但是，对象会被释放吗？

我在这里看到了一些关于这个主题的很好的问题，但他们都在谈论不同的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T13:46:34.047

是的。

* * *

但为什么不自己尝试呢？

```
void Main()
{
    using(new Test())
    {
        goto myLabel;
    }
myLabel:
    "End".Dump();
}
class Test:IDisposable
{
    public void Dispose()
    {
        "Disposed".Dump();
    }
} 
```

结果：

> 处置
> 端

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T13:51:44.917

The using statement is essentially a try-finally block and a dispose pattern wrapped up in one simple statement.

```
using (Font font1 = new Font("Arial", 10.0f))
{
    //your code
} 
```

Is equivalent to

```
Font font1 = new Font("Arial", 10.0f);
try
{
     //your code
}
finally
{
     //Font gets disposed here
} 
```

Thus, any jump from the "try-block", be it throwing an exception, the use of goto (unclean!) &tc. will execute the Disposal of the object being used in that "finally" block..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:52:21.607

let's try:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            int i = 0;
            using (var obj = new TestObj())
            {
                if (i == 0) goto Label;
            }
            Console.WriteLine("some code here");

        Label:
            Console.WriteLine("after label");

        Console.Read();
        }
    }

    class TestObj : IDisposable
    {
        public void Dispose()
        {
            Console.WriteLine("disposed");
        }
    }

} 
```

Console output is : disposed after label

Dispose() execute before codes after the label .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T13:54:30.513

```
using(Stream s = new Stream("blah blah blah"))
{    
    if(someCondition) goto myLabel;
} 
```

等于

```
Stream s;
try
{
     s = new Stream("blah blah blah");
     if(someCondition) goto myLabel;
}
finally
{
  if (s != null)
    ((IDisposable)s).Dispose();
} 
```

因此，只要您离开[using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)块，该`finally`块就会发生，无论是什么让它退出。

# c# - 具有多个批处理选择、插入、更新语句的 SqlCommand

> ID：12584252
> 
> 赞同：3
> 
> 时间：2012-09-25T13:43:20.850
> 
> 标签：c#, .net, ado.net

我想使用一个 SqlCommand 在一批中执行多个选择、插入、更新语句，以提高性能。
CommandText 由多个预定义的插入、更新语句动态组合而成（SqlParam 也是动态组合的）。插入有时适用于具有 autoid 字段的表，因此有必要取回最后插入的 id。我为此使用“SELECT SCOPE_IDENTITY()”。通常组装的 CommandText 如下所示：

```
INSERT xxxxx ;
SELECT SCOPE_IDENTITY();
INSERT yyyyy ;
SELECT SCOPE_IDENTITY();
INSERT zzzzz ;
UPDATE xxxxx ;
INSERT wwwww ;
SELECT SCOPE_IDENTITY(); 
```

我想检索所有 scope_identity 值以及受影响的行数。ExecuteNonQuery 和 ExecuteScalar 不可用，因为它们只返回单个值。ExecuteReader 更好，它从选择中返回信息，（在上面的示例中给出 3 个结果），但我也需要受影响的行（用于检查执行）。

```
 public IList Execute()
    {
        var results = new ArrayList();

        using (var command = connection.CreateCommand())
        {
            command.Transaction = transaction;

            var commandText = new StringBuilder();
            .... building commandtext dynamically
            command.CommandText = commandText.ToString();

            command.Parameters.AddRange(... adding paramters dynamically);

            var reader = command.ExecuteReader();
            do
            {
                if (reader.Read())
                    results.Add(reader.IsDBNull(0) ? null : reader.GetValue(0));
            } while (reader.NextResult());
            reader.Close();
        }
        return results;
    } 
```

任何想法如何得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T19:26:31.063

您可以使用 SQL 语句将第一行添加到字符串中：

```
"DECLARE @rCount int; SET @rCount = 0;" 
```

然后在每个操作（插入/更新）之后执行：

```
"SET @rCount = @rCount + @@ROWCOUNT" 
```

并添加为最后一个命令

```
"SELECT @rCount" 
```

# android - Android 添加原生支持 - 未解决的 jni.h、android/log.h 等

> ID：12584255
> 
> 赞同：9
> 
> 时间：2012-09-25T13:43:33.263
> 
> 标签：android, c, android-ndk, java-native-interface

在今天之前，我将 Eclipse 3.8 与**Sequoyah 插件**一起用于 Android NDK 项目。但是今天我决定用 SDK 和 NDK 将 Eclipse 更新到 Juno 版本。
我很高兴，然后我在 ADT 安装中看到了**Android Native Tools**，它可以像 Sequoyah 一样完成相同的工作，但具有调试功能。
我创建了新的 Android 项目来测试它。
添加 Android Native Support 使用 Android.mk、.cpp 文件创建 jni 文件夹，与 Sequayah 所做的相同。然后我首先无法解决**jni.h**。我在 Sequoyah 上遇到了类似的错误，所以我重建索引并重新启动 Eclipse。重启后没有消失。
我去C/C++ 属性的**路径和符号**。但是有所有需要的内置包含。
**（NDK PATH）/platforms/android-8/arch-arm/usr/include** - 有 jni.h、log.h 等。
我尝试向 jni.h 添加额外的重复包含，清理项目，重新启动，重建索引，将 .ccp 更改为 .c，它仍未解决。我在错误日志中没有错误，但在 jni 函数的编辑器中出现语法错误。

**NativeLib.java**

```
package com.aristarhys.glow;

public class NativeLib 
{
private static final String NATIVE_LIB = "glow";
static 
{
    System.loadLibrary(NATIVE_LIB); 
}
  private NativeLib(){};
  public static native void test();
} 
```

**发光.h**

```
#ifndef GLOW_H_
#define GLOW_H_

#include <jni.h> //unresolved
//syntax error
JNIEXPORT void JNICALL Java_com_aristarhys_glow_NativeLib_test(JNIEnv* env, jclass cls);
#endif /* GLOW_H_ */ 
```

**日志.h**

```
#ifndef LOG_H_
#define LOG_H_

#include <android/log.h> //unresolved

#define INFO_TAG "[INFO]"
#define LOGI(...) __android_log_print(ANDROID_LOG_INFO, INFO_TAG, __VA_ARGS__)

#endif /* LOG_H_ */ 
```

**发光.c**

```
#include "glow.h"
#include "log.h"

//syntax error
JNIEXPORT void JNICALL Java_com_aristarhys_glow_NativeLib_test(JNIEnv* env, jclass cls)
{
LOGI("HI");
} 
```

**安卓.mk**

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := glow
LOCAL_SRC_FILES := glow.c
LOCAL_LDLIBS    := -llog
include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-25T14:04:33.840

我已经在我的变量中尝试了[android-ndk-r8b 。](http://developer.android.com/intl/ru/tools/sdk/ndk/index.html)项目编译无误。然而日食“说”`C:\Android\android-ndk-r8b``PATH`
`Unresolved inclusion: <jni.h>`

*解决了*：

`NDK Project->New->Folder->Advanced->Link to alternate location(Linked Folder)` 浏览路径（例如）：<code>C:\Android\android-ndk-r8b\platforms\android-8\arch-arm\usr\include

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-28T17:54:07.540

您可以通过选择项目的属性来做到这一点

Properties -> C/C++ General -> Preprocessor Include..-> Entries -> Setting Entries -> CDT User Setting Entries

添加 -> 包含目录 -> 文件系统路径，并输入包含的路径

```
ndk/platforms/android-[version]/[arch]/usr/include 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-05T15:05:28.017

我经常解决在您移动或重命名项目的工作文件夹时可能发生的类似问题。

1.  不需要任何环境变量，只需在 Preferences > Android > NDK 下指向 NDK 位置。
2.  将项目移到工作区之外。从项目中删除下一个文件/文件夹：

> .settings
> .classpath
> .cproject
> .project
> 项目.properties

3.  重新导入您的项目。Eclipse > New > Other > Android > Android Project from Existing Code > 然后将文件夹指向您的项目，让 Eclipse 检测到它，选中“将项目复制到工作区”，然后单击确定/下一步，无论如何。
4.  清洁项目。
5.  右键单击项目 > Android 工具 > 添加本机支持
6.  重建，可能重新启动工作区。

这也解决了 Eclipse 4.3 以前忽略的构建系统和用户定义的编译器标志的问题。现在依赖于这个标志的宏折叠工作正常。

如果更通用：NDK 插件可以为您正确定义正确的包含以及正常工作所需的任何其他内容，但是您需要清除项目中的垃圾，最简单的方法是重新导入项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-31T06:39:40.383

如果您使用的是 Eclipse Kepler，则添加 NDK 的路径包括

属性->C/C++ 常规->路径和符号。

在我的 NDK 版本中，所需的包含路径是：

C:\Program Files (x86)\Android\android-sdk\NDK\android-ndk-r10\platforms\android-L\arch-arm\usr\include。

它会询问您是否要重建。之后错误消失。

# loops - lua：遍历表中的所有对

> ID：12584258
> 
> 赞同：18
> 
> 时间：2012-09-25T13:43:42.077
> 
> 标签：loops, lua, lua-table

我有一个稀疏的 lua 表，我需要对其进行迭代。问题是，lua 似乎从 1 开始迭代，并在找到 nil 值时立即终止。这是和示例：

```
> tab={}
> tab[2]='b'
> tab[5]='e'
> for i,v in ipairs(tab) do print(i,v) end
>               --nothing is output here
> tab[1]='a'
> for i,v in ipairs(tab) do print(i,v) end
1   a
2   b
>               --terminates after 2 (first nil value is tab[3]) 
```

有没有办法获得所需的输出：

```
1   a
2   b
5   e 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-25T13:47:21.067

您必须使用`pairs`而不是`ipairs`.

```
tab={}

tab[1]='a'
tab[2]='b'
tab[5]='e'

for k, v in pairs(tab) do print(k, v) end 
```

将输出（以任何顺序）：

```
1   a
2   b
5   e 
```

`ipairs`迭代顺序整数键，从 1 开始并在第一`nil`对中断。

`pairs`遍历表中的所有键值对。请注意，这*不能*保证以特定顺序进行迭代。

# sql - Oracle SQL Regexp_replace 匹配

> ID：12584261
> 
> 赞同：2
> 
> 时间：2012-09-25T13:43:58.413
> 
> 标签：sql, regex, oracle, replace, matching

这是我需要完成的时髦匹配。

`A5.1.9.11.2`

需要变成：

`A05.01.09.11.02`

DOT 部分的数量从没有到很多不等。并且字母“A”将始终存在并且始终是 1 个字符。

我想使用 regexp_replace() 函数来将其用作排序机制。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:19:59.217

Oracle SQL 不支持环视断言，这对这种情况很有用：

```
s/([0-9](?<![0-9]))/0\1/g 
```

您必须使用至少两个替代品：

```
REGEXP_REPLACE(REGEXP_REPLACE(col, '([0-9]+)', '0\1'), '0([0-9]{2})', '\1') 
```

# hibernate - JPA 可以在没有休眠提供程序的情况下运行。？？？

> ID：12584262
> 
> 赞同：0
> 
> 时间：2012-09-25T13:43:59.910
> 
> 标签：hibernate, jpa

早期我使用 JPA 为我的应用程序开发 ORM。在 peristenc.xml 中，我定义了休眠提供程序并使用非 JTA-DataSource。JPA 可以在没有休眠提供程序的情况下运行。？？？然后我在persistence.xml 中省略了休眠代码。然后我部署，在控制台中我得到以下信息。

```
 18:19:56,028 INFO  [org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator] (MSC service thread 1-6) HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
    18:19:56,032 INFO  [org.hibernate.dialect.Dialect] (MSC service thread 1-6) HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
    18:19:56,033 INFO  [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (MSC service thread 1-6) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactor 
```

但是我没有在我的应用程序中提到任何关于休眠的地方。

**********持久性.xml******* **********

 *****```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="StudentManagementSystem" transaction-type="RESOURCE_LOCAL">
        <non-jta-data-source>java:jboss/datasources/studentDS</non-jta-data-source>
        <class>com.dms.entity.student.StudentDetail</class>
        <class>com.dms.entity.student.MarkDetail</class>
        <class>com.dms.entity.student.PRDSemesterDetail</class>
        <class>com.dms.entity.admin.LoginDetail</class>
    </persistence-unit>
</persistence> 
```

*** 非 JTA- 数据源 ***

```
<datasource jndi-name="java:jboss/datasources/studentDS" pool-name="studentDS" enabled="true" use-java-context="true">
                    <connection-url>jdbc:mysql://localhost:3306/exercise</connection-url>
                    <driver>com.mysql</driver>
                    <security>
                        <user-name>student</user-name>
                        <password>student</password>
                    </security>
                </datasource>
<driver name="com.mysql" module="com.mysql">
                        <xa-datasource-class>com.mysql.jdbc.jdbc2.optional.MysqlDataSource</xa-datasource-class>
                    </driver> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:02:58.143

您在 JBoss 中运行您的应用程序，而 Hibernate 是 JBoss 的默认持久性提供程序。如规范中所述，持久性提供程序在 persistence.xml 中是可选的。在这种情况下，容器 (JBoss) 使用其默认提供程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:54:21.253

是的，您可以指定要使用的 JPA 提供程序，将其放入您的 persistence.xml：

```
<persistence-unit name="default" transaction-type="RESOURCE_LOCAL">
  <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
  ...
</persistence-unit> 
```

该示例使用 eclipse-link 作为提供者。你必须在你的类路径中有提供者特定的 jars 才能工作（eclipse-link、openJPA、hibernate、iBatis 等）

您收到的消息是因为您的服务器已经捆绑了一个休眠实现，并且这是默认设置，但是您应该能够通过设置正确的提供程序来使用您想要的实现。

但是，您将无法在没有任何提供者的情况下运行 JPA，因为 JPA 不是一种实现，而只是对持久性应该如何的定义。*****

# ruby - 我想存储一条消息 带有 ruby 绑定的 selenium web-driver 中的标记

> ID：12584265
> 
> 赞同：0
> 
> 时间：2012-09-25T13:44:15.233
> 
> 标签：ruby, selenium-webdriver

我想存储`"The id you entered does not exist in our database. Please note, ids are case and space sensitive."`在一个变量中。

```
<p class="message fail"> The id you entered does not exist in our database. Please note, ids are case and space sensitive. </p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:11:20.720

尝试：

```
your_variable = driver.find_element(:class, 'message fail').text 
```

该`.text`方法将为您提供元素的文本。

# java - 如何指定本身声明泛型类型的泛型类型

> ID：12584274
> 
> 赞同：1
> 
> 时间：2012-09-25T13:44:36.267
> 
> 标签：java, generics

我有一个 Range 类，其声明如下：

```
public abstract class Range<T extends Comparable<T>> 
```

我想创建一个类 RangeSet，它采用一种通用类型——一个 Range。但是，在 RangeSet 类的主体中，我希望能够引用两个泛型类型

1.  RangeSet 输入的范围，以及
2.  `T extends Comparable<T>`范围是用

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:49:43.213

你可以定义

```
class RangeSet<T extends Comparable<T>, R extends Range<T>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:49:51.920

不，你必须让你`RangeSet`有两个类型参数。例如：

```
public class RangeSet<T extends Comparable<T>, R extends Range<T>> {
    // ...
} 
```

但是，您确定您真的需要 的类型`R`吗`Range`？难道你不能让方法`RangeSet`接受 a`Range<T>`而不是`R`？

# iphone - 通过更改大小和位置自定义 UINavigationBar 按钮和图像

> ID：12584277
> 
> 赞同：1
> 
> 时间：2012-09-25T13:44:51.033
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar, customization

我正在尝试创建一个用于阅读音频、视频和文档 (PDF) 的应用程序。我选择了一个设计，顶部导航栏需要完全定制。像后退按钮和右编辑按钮比通常低得多，导航栏背景图像比通常大小（高度 = 88 像素）大得多。我尝试了一个带有这些规范的示例项目。我以某种方式实现了它：

导航栏设置为隐藏并放置一个带有我的大尺寸图像的图像视图。并在具有导航控制器操作的视图中添加一个自定义按钮作为子视图。设置图像视图的代码如下：

```
UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 88)];
UIImage *img = [UIImage imageNamed:@"top_bar.png"];
[imgView setImage:img];
[self.view addSubview:imgView]; 
```

设置返回按钮的代码如下：

```
UIButton *navigationButton = [UIButton buttonWithType:UIButtonTypeCustom];
[navigationButton setImage: [UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
[navigationButton addTarget:view action:@selector(backButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
navigationButton.frame = CGRectMake(-2, 23, 75, 55);
[self.view addSubview:navigationButton]; 
```

它工作正常。
但是当我浏览一些链接时，我发现如果导航栏是自定义的，则有可能会被应用商店拒绝。

任何人都可以建议我这样做的正确方法吗，或者我可以继续使用这种方法吗？

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:52:54.533

这是[App Store 审核指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)。没有关于拒绝自定义 UINavigationBar 的话。但是有一个下面的短语。

```
If your user interface is complex or less than very good, it may be rejected 
```

# sqlite - 从两个表中生成唯一值列表，其中包含一个表中的所有列

> ID：12584281
> 
> 赞同：0
> 
> 时间：2012-09-25T13:45:20.713
> 
> 标签：sqlite

我通常不会发帖寻求帮助，但我真的被困在这里，因为我的 SQL 知识不是很好。

这就是我想做的。我有两张桌子：

```
CREATE TABLE DistinctCategories (
name VARCHAR(20) PRIMARY KEY,
check INT);

CREATE TABLE Categories (
_id INTEGER PRIMARY KEY,
tid INTEGER NOT NULL,
name VARCHAR(20) NOT NULL,
check INTEGER NOT NULL
); 
```

我想为特定的 tid 创建所有可能的类别名称的列表。如果两个表中都有一个名称，我只希望它列出一次，并且该行将采用类别中的“检查”值。

我在想一些事情：

```
 Select *,
From Categories,
Where tid=2 
```

然后在这里添加一个连接，但我不确定它是如何工作的。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:42:51.050

我怀疑有人会遇到同样的问题，但我的解决方案最终如下：

```
Select *
From Categories
Where tid=1
UNION
Select *
From Categories
Where Check=0 AND
NOT IN (Select Name
FROM Categories
Where tid=1)
Order By Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:17:50.187

查看[`UNION ALL`](http://sqlite.org/lang_select.html#compound)and[`NOT IN`](http://www.sqlite.org/lang_expr.html#in_op)运算符：

```
SELECT name, check
  FROM Categories
 WHERE tid = ?
UNION ALL
SELECT name, check
  FROM DistinctCategories
 WHERE name NOT IN (SELECT name FROM Categories WHERE tid = ?) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:12:46.163

您可以像这样使用左外连接

```
Select C.id, C.tid, C.name, C.check
  from Categories as C LEFT JOIN DistinctCategories as DC
    ON C.name=DC.name
 where C.tid=2 
```

我没有得到您想要显示的支票，c.check 和 dc.check 是否有外键关系？

# session - Symfony2：管理会话时间

> ID：12584282
> 
> 赞同：0
> 
> 时间：2012-09-25T13:45:26.757
> 
> 标签：session, symfony

我有一个用户可以登录的 simfony 项目。

我的目标是在用户登录时为他启动会话。然后，如果用户刷新页面，会话生命周期将被重置为最大值，如果没有，一旦生命周期到期，会话将被关闭。

我在 config.yml 中将会话时间设置为 10 秒，并将自动启动设置为 false。会话在用户登录时正确启动，但即使页面刷新也会在 10 秒后过期。

页面刷新或更改时如何重置生命周期？

非常感谢你。

PS。这是我的 config.yml

```
session:
    default_locale: %locale%
    lifetime:       10
    auto_start:     false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:13:06.880

你应该设置`auto_start: true`. 正如您所期望的那样，它负责会话更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:33:09.843

我意识到在创建 cookie 时会话时间是由服务器管理的。使用 symfony 的生命周期，我们可以覆盖会话的全局生命周期。

# iphone - iOS 中当年的天数

> ID：12584286
> 
> 赞同：1
> 
> 时间：2012-09-25T13:45:38.613
> 
> 标签：iphone, ios, nsdate

我想找出今天是当年的天数。例如，如果今天是 2012 年 3 月 15 日，我应该得到 75(31 + 29 + 15)。或者我们可以简单地说今天和当年 Jan01 之间的天数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T14:57:37.697

使用 的`ordinalityOfUnit`方法`NSCalendar`获取一年中的天数 - 指定`NSDayCalendarUnit inUnit:NSYearCalendarUnit`

### 迅速

```
let calendar: Calendar = .autoupdatingCurrent
let dayOfTheYear = calendar.ordinality(of: .day, in: .year, for: Date()) 
```

### Objective-C

```
NSCalendar *currentCalendar = [NSCalendar currentCalendar];
NSDate *today = [NSDate date];
NSInteger dc = [currentCalendar  
    ordinalityOfUnit:NSDayCalendarUnit 
    inUnit:NSYearCalendarUnit 
    forDate:today
]; 
```

2012 年 9 月 25 日为 269

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:51:34.730

使用`NSDateComponents`您可以收集`NSDayCalendarUnit`应指示当前日期的组件。

以下内容应该适合您的需求：

```
//create calendar
NSCalendar *calendar = [NSCalendar currentCalendar];

//set calendar time zone
[calendar setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];

//gather date components
NSDateComponents *components = [calendar components:NSDayCalendarUnit fromDate:[NSDate date]];

//gather time components
NSInteger day = [components day]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:20:52.893

根据[数据格式参考](http://unicode.org/reports/tr35/tr35-4.html#Date_Format_Patterns)，可以使用说明`D`符来表示一年中的哪一天。如果您想执行一些计算，日期格式化程序不是很有帮助，但如果您只想显示一年中的哪一天，这可能是最简单的方法。代码看起来像：

```
NSCalendar *cal = [NSCalendar currentCalendar];
NSDateFormatter *df = [[NSDateFormatter alloc] init];

[df setCalendar:cal];
[df setDateFormat:@"DDD"];    // D specifier used for day of year
NSString *dayOfYearString = [df stringFromDate:someDate];  // you choose 'someDate'

NSLog(@"The day is: %@", dayOfYearString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:32:11.620

使用`NSDate`,`NSDateComponents`和`NSCalendar`类，您可以很容易地计算上一年的最后一天和今天之间的天数（这与计算当年的今天数字相同）：

```
// create your NSDate and NSCalendar objects
NSDate *today = [NSDate date];
NSDate *referenceDate;
NSCalendar *calendar = [NSCalendar currentCalendar];

// get today's date components
NSDateComponents *components = [calendar components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:today];

// changing the date components to the 31nd of December of last year
components.day = 31;
components.month = 12;
components.year--;

// store these components in your date object
referenceDate = [calendar dateFromComponents:components];

// get the number of days from that date until today
components = [calendar components:NSDayCalendarUnit fromDate:referenceDate toDate:[NSDate date] options:0];
NSInteger days = components.day; 
```

# ruby-on-rails - Rails session_store 多个域

> ID：12584298
> 
> 赞同：8
> 
> 时间：2012-09-25T13:46:14.970
> 
> 标签：ruby-on-rails, session, subdomain, multiple-domains

我有一个围绕会话的非唯一问题（其他人一定已经解决了这个问题）。

场景是我有 5 个顶级域（domain_a、domain_b、domain_c、domain_d、domain_e）和每个下的多个子域。我的应用程序需要在同一顶级域中的子域之间共享会话，例如 sub_1.domain_b.com 和 sub2.domain_b.com 可以共享，但 sub_3.domain_c.com 将是不同的会话。更复杂的是，如果域 a 和 b 和 c 和 d 也能够共享会话，那将是理想的。

所以规则：

*   domain_a 与 domain_b 以及其中的所有子域共享会话。很高兴能在 cookie_store 中

*   domain_c 与 domain_d 以及其中的所有子域共享会话。很高兴能在 cookie_store 中

*   domain_e 仅在其子域内共享其会话。这需要在 active_record_store 中

我怎样才能使这项工作？

我尝试使用以下内容创建初始化程序：

```
MyApp::Application.config.session_store :cookie_store, :key => '_domain_a', :domain => '.domain_a.com'

MyApp::Application.config.session_store :cookie_store, :key => '_domain_b', :domain => '.domain_b.com'

MyApp::Application.config.session_store :cookie_store, :key => '_domain_c', :domain => '.domain_c.com'

MyApp::Application.config.session_store :cookie_store, :key => '_domain_d', :domain => '.domain_d.com'

MyApp::Application.config.session_store :active_record_store, :key => '_domain_e', :domain => '.domain_e.com' 
```

但是我不确定这是否有效。domain_e.com 会话有效，这是有道理的，因为它是最后一个声明，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T12:22:52.453

请参阅：[Rails 3 session_store domain :all 到底做了什么？](https://stackoverflow.com/questions/4060333/what-does-rails-3-session-store-domain-all-really-do) 选择的答案可能可以帮助您允许子域之间的公共会话和顶级域之间的单独会话。要使相同的会话在不同的顶级域中有效，要棘手得多，但也许这个问题可以帮助您转发：[Rails - Multiple top level domain and a single session/cookie](https://stackoverflow.com/questions/377137/rails-multiple-top-level-domains-and-a-single-session-cookie)

# c++ - 计算能量的问题

> ID：12584300
> 
> 赞同：0
> 
> 时间：2012-09-25T13:46:19.980
> 
> 标签：c++, matlab

我需要计算一个向量的能量，我可以在 Matlab 中这样做：

```
len = length(blocks);
n = sum(size(blocks)) - len;
currsum = sum(abs(blocks(n,1:len))); 
```

这工作得很好，并给出了结果： 4.8750 但是，每当我在 C++ 中尝试时，我都会得到错误的结果，并想知道是否有人知道我哪里出错了。这是代码：

```
int n = (this->width + this->height) - this->width;
double currsum = 0;

for(int i=0; (i < n); i++)
{
    currsum += blocks[i];

} 
```

C++ 中的结果：0.46875

希望有人可以对此有所了解:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:56:09.200

首先，我不确定您为什么将向量元素的绝对值之和称为“能量”。我本来期望“能量”是元素的*平方和（或者范数的平方和，如果这是一个复向量）。*

其次，这让我觉得代码相当愚蠢（相信我，我知道愚蠢的代码;-)）。逐行查看：

```
len = length(blocks); 
```

很简单，您正在获取[“向量长度或最大数组维度”](http://www.mathworks.com/help/matlab/ref/length.html)

```
n = sum(size(blocks)) - len; 
```

在您的问题中，您说您正在计算“向量”中的能量，但如果`blocks`真的是一个向量，那么这将始终返回数字 1，那么为什么还要计算它呢？如果`blocks`真的是一个二维数组，`n`现在设置为两个维度中较小者的长度。如果`blocks`是 Nd 数组...为什么要计算这个值？

```
currsum = sum(abs(blocks(n,1:len))); 
```

在这里，您似乎假设这`blocks` 是二维的。但是您还假设最大维度是第二个维度（请注意，如果您设置`blocks`为类似 的数组`zeros(10,3)`或列向量，这行代码将失败）。

鉴于您的隐含假设（`blocks`是一个二维数组，最长维度是最后一个），您可以将所有这些代码替换为：

```
currsum = sum(abs(blocks(end,:))) 
```

现在更清楚了发生了什么，但是为什么要计算数组中最后一行的绝对值之和呢？也许这真的是你想要的，但对我来说似乎很奇怪。

查看您的 C++ 代码：

```
int n = (this->width + this->height) - this->width; 
```

为什么不直接说：

```
int n = this->height; 
```

然后，在循环内你有

```
currsum += blocks[i]; 
```

首先，你为什么不打电话`abs()`？其次，C 和 C++ 以行优先顺序存储数组，所以你不是在这里对*第一*行求和，而不是对*最后*一行求和吗？假设您的 MATLAB 代码确实在做您想做的事情，我认为您想要的是：

```
double currsum = 0;
for(int i=0; (i < this->width); i++)
{
    currsum += abs(blocks[this->height-1][i]);
} 
```

# sql - SQL Developer - 删除 90,000 行

> ID：12584303
> 
> 赞同：0
> 
> 时间：2012-09-25T13:46:26.113
> 
> 标签：sql, oracle, ora-00054

> **可能重复：**
> [ORA-00054：资源繁忙并使用指定的 NOWAIT 获取](https://stackoverflow.com/questions/3075738/ora-00054-resource-busy-and-acquire-with-nowait-specified)

我在 sql dev 中有一个表，我想从中清除所有数据。大约有 90,000 多行。我只想删除数据而不是表。

我试过的一切都没有奏效，即删除*、截断。我不断地遇到

> ORA-00054: 资源繁忙并使用指定的 NOWAIT 获取或超时已过期

错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:48:25.817

也许您的截断或删除语法不正确？运行以下之一时看到的错误消息是什么：

```
TRUNCATE TABLE [TableName] 
```

或者

```
DELETE FROM [TableName] 
```

请参阅[删除](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8005.htm)和[截断](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10007.htm)

**ORA-00054 更新**

此错误可能意味着您的表被另一个会话中的查询锁定。请参阅以下与此错误号相关的 SO 问题和[已接受的答案。](https://stackoverflow.com/a/4842778/444610)

[ORA-00054: 资源繁忙并使用指定的 NOWAIT 获取或超时已过期](https://stackoverflow.com/questions/4842765/ora-00054-resource-busy-and-acquire-with-nowait-specified-or-timeout-expired#4842778)

仅供参考 - 像这样的错误数字通常对人类来说意义不大，但在搜索引擎或类似 SO 的网站中搜索细节[时，它们可能是黄金。](https://stackoverflow.com/search?q=ORA-00054)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:50:23.837

我对 SQL Developer 不是很熟悉，但是如果您启用了事务，如果您希望您发出的命令的效果是永久性的，请确保提交事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:52:59.777

It seems to me that this post will help you alot to solve the problem. As from what I see you are dealing with an oracle error:

[http://www.bluegecko.net/oracle/ora-00054-resource-busy-and-acquire-with-nowait-specified/](http://www.bluegecko.net/oracle/ora-00054-resource-busy-and-acquire-with-nowait-specified/)

It also tell how to circumvent your particular lock.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:49:05.960

```
DELETE FROM table_name 
```

来源：[http ://www.w3schools.com/sql/sql_delete.asp](http://www.w3schools.com/sql/sql_delete.asp)

# solr - 4.0 alpha 中的复杂 Solr 排序表达式

> ID：12584304
> 
> 赞同：0
> 
> 时间：2012-09-25T13:46:33.303
> 
> 标签：solr

我想执行已升级到 solr-aplha 4.0 的复杂排序表达式：

```
apache-solr-4.0.0-BETA/select?q=*:*&sort=map(sum(SCORE,11),77,77,sum(SCORE,33),sum(SCORE,44)) desc 
```

但是当我尝试运行它时，它不起作用。

如何对 Solr 进行如此复杂的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:00:11.690

我已经使用 max 和 sub 函数完成了这项工作，例如：

```
max(sub(SCORE,11),0) 
```

# windows-phone-7 - 如何使用 Twitter 配置我的 WP7 应用程序？

> ID：12584312
> 
> 赞同：-1
> 
> 时间：2012-09-25T13:46:42.437
> 
> 标签：windows-phone-7, twitter

我想知道如何重定向应用程序，以便它将重定向到系统的集成推特（“我”磁贴中的“发布消息”按钮）以及如何集成推特代码以仅显示推特提要一个我指定的三个人？（全部使用VB）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:51:39.047

To bring up the Twitter share option you use

```
Dim shareStatusTask As ShareStatusTask = new ShareStatusTask()
shareStatusTask.Status = "status"
shareStatusTask.Show() 
```

There's no built in way to show tweets in your app so you'll need to write custom code to get that done via the Twitter API.

# java - 在 for 循环 JAVA 中定义方法

> ID：12584324
> 
> 赞同：2
> 
> 时间：2012-09-25T13:47:20.833
> 
> 标签：java, swing, loops, methods, for-loop

所以，我正在尝试为大量按钮定义一组方法，我想我可以在 for 循环中完成它，但是我遇到了一个我无法破译的语法错误......这是一个我想使用的代码的简化版本......错误是：“令牌上的语法错误，错位的构造”

```
JMenu blocks = new JMenu("Block");
menuBar.add(blocks);

for (int i=0; i < 9; i++){
  public void action() {
      System.out.println(i+"");
  }
  JMenuItem blockName = new JMenuItem(i+"");
  blockName.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent arg0) {
          action();
      }
  });
  blocks.add(blockName);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:49:35.663

删除您的`action`方法并将您的代码放入 ActionListener

```
 public void actionPerformed(ActionEvent arg0) {
      System.out.println(i+"");
      // ... etc.
  } 
```

* * *

正如其他人在他们的答案中提到的那样，`i`将无法从内部访问`actionPerformed`。具体来说，请参阅@dasblinkenlight 的答案以获得更彻底的回应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:49:35.867

您正在另一个方法中定义一个新方法：

```
 public void action() {
      System.out.println(i+"");
  } 
```

您需要在当前方法之外提取它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T13:54:34.803

Java 方法不是第一类对象（或第二类或第三类对象；事实上，方法根本不是对象）。您需要将该方法移动到其中一个类中 - 您的顶级类或您定义的匿名内部类，如下所示：

```
for (int i=0; i < 9; i++) {
    // You cannot access i from methods of the anonymous inner class
    // because it is not final, but you can make a final copy
    final int iCopy = i;
    JMenuItem blockName = new JMenuItem(i+"");
    blockName.addActionListener(new ActionListener() {
        // It is OK to define additional methods here:
        public void action() {
            System.out.println(iCopy+"");
        }
        public void actionPerformed(ActionEvent arg0) {
            action();
        }
    });
    blocks.add(blockName);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T13:49:58.313

你不能有一个方法声明 insede for 循环。循环必须在方法体中。

```
 private void init(JMenu blocks) {
   for (int i=0; i < 9; i++){

    JMenuItem blockName = new JMenuItem(i+"");
    blockName.addActionListener(new ActionListener() {
          public void actionPerformed(ActionEvent arg0) {
              handleAction(arg0);
          }
      });
    blocks.add(blockName);
  }
}

   public void handleAction(ActionEvent event) {

       Object source = event.getSource(); 

       if(source instanceof JMenuItem) {
           JMenuItem item = (JMenuItem) source;
           System.out.println(item.getName());
       ) 
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T13:51:16.087

那根本是无效`Java`的。`Action`考虑在你的 for 循环中创建一个实例并使用该操作来支持`JMenuItem`，例如

```
JMenu blocks = new JMenu("Block");
menuBar.add(blocks);

for (int i=0; i < 9; i++){
    Action action = new AbstractAction(){
      public void actionPerformed( ActionEvent e ){
        System.out.println( "Whatever but not i as that cannot be accessed" );
        System.out.println( "or you need to introduce a final variable" );
      }
    };  
    JMenuItem blockName = new JMenuItem(i+"");
    blockName.setAction( action );  
    blocks.add(blockName);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T16:50:47.970

你也可以这样做

```
 for (int i = 0; i < 9; i++) {
        JMenuItem blockName = new JMenuItem(i + "");
        blockName.setAction(new MyAction(i));
        blocks.add(blockName);
    }
}

class MyAction extends AbstractAction {
    int param;

    public MyAction(int myParameter) {
        param = myParameter;
    }

    public void actionPerformed(ActionEvent e) {
        System.out.println(String.valueOf(param));
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T13:58:38.370

您可以定义嵌套方法，只是嵌套类 [*内部类*]，或嵌套在方法中的类 [*本地类*]。

如果你想让你`ActionListener`知道`i`，你不能直接，否则你会偶然发现这样的错误：

> 局部变量 i 从内部类中访问；需要声明为final

所以你应该扩展你的`JMenuItem`，或者更好地设计你的应用程序，以便将 UI 与当前模型状态分离。

# android - 从活动返回后更新片段

> ID：12584331
> 
> 赞同：0
> 
> 时间：2012-09-25T13:48:06.340
> 
> 标签：android, android-intent, android-fragments, android-activity

我有一组`Foo`对象。我有一个包含`ListFragment`所有这些列表的活动。单击列表中的一个项目会打开另一个包含显示`Foo`详细信息的片段的活动。从该活动中，我可以导航到第三个活动以编辑`Foo`详细信息。当前在列表片段上查询数据并将其放入意图附加项中以在详细信息片段中使用。

当我从编辑活动返回时（当有更改时），问题是详细更新片段和列表片段中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:31:01.167

如果我正确理解了这个问题，一种方法是通过使用单例类，以更直接的方式使其他活动可以访问底层数据集。

# yii - Yii - 如何预加载一个小部件

> ID：12584333
> 
> 赞同：0
> 
> 时间：2012-09-25T13:48:23.180
> 
> 标签：yii, preload

我正在使用 Yii Jui 小部件在网站中使用 JuiTabs。问题是当网站加载时，我首先看到列表（没有任何 css），然后在页面加载后，选项卡按应有的方式显示。我想知道是否有办法以某种方式预加载 JuiTab，以便它们在页面加载时正确显示。

这是我的代码：

```
 <?php 
                $this->widget('zii.widgets.jui.CJuiTabs', array(
                    'tabs'=>array(
                        'PRESENTAZIONE'=>array('content'=>$this->renderPartial('spettacoli/_view_presentazione', array('model'=>$model),$this)),
                        ...
                    ),

                    'options'=>array(
                        'collapsible'=>false,
                    ),
                ));
            ?> 
```

这是页面的示例[。](http://marionette-cola.linkmesrl.com/laboratorio/viewproduzione)当互联网连接速度很慢时，问题就很明显，并且页面加载需要一些时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:19:21.150

不确定是否可以以某种方式预加载 JuiTabs，但您可以`display: none`默认为 CJuiTabs 添加并在页面加载时使用 JS 显示。不是最好的方法，但我想到了第一个想法。

# ruby-on-rails-3 - 导轨 3.2.8。将复选框从 Rails 1.xx 升级到 3.2.8

> ID：12584343
> 
> 赞同：0
> 
> 时间：2012-09-25T13:48:56.083
> 
> 标签：ruby-on-rails-3, upgrade, railscasts

刚刚检查[了 Ryan Bates 的这一集，](http://railscasts.com/episodes/52-update-through-checkboxes)似乎 Rails 3.2.x 有不同的设置。

似乎`check_box_tag`需要除了 Ryan 之外的其他属性。因为它写`unexpected kEND...`回`<%= check_box_tag "task_ids[]", task.id %>`

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:56:04.513

您的错误与您使用`check_box_tag`.

" `unexpected kEND`" 表示意外的文件结尾，这意味着您在某处打开了一个块或其他嵌套结构并且未能关闭它。可能是 a`do`或 an`if`不匹配`end`。

# android - Android 在 Listview 中加载更多图像

> ID：12584344
> 
> 赞同：-1
> 
> 时间：2012-09-25T13:49:00.597
> 
> 标签：android, image, listview, caching

我正在使用下面的 Url 食谱，但是当我经常运行应用程序时，它会导致内存不足问题（OOM），任何人都可以发送更新的 ImageLoader，它可以立即加载图像（拇指指甲）并保存到缓存中。提前致谢。 [http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:51:49.907

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.util.HashMap;
import java.util.Stack;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.widget.ImageView;

public class ImageLoader {

    // the simplest in-memory cache implementation. This should be replaced with
    // something like SoftReference or BitmapOptions.inPurgeable(since 1.6)
    private HashMap<String, Bitmap> cache = new HashMap<String, Bitmap>();

    private File cacheDir;
    private Context ctx;

    public ImageLoader(Context context) {
        // Make the background thead low priority. This way it will not affect
        // the UI performance
        photoLoaderThread.setPriority(Thread.NORM_PRIORITY - 1);
        ctx = context;
        // Find the dir to save cached images
        if (android.os.Environment.getExternalStorageState().equals(
                android.os.Environment.MEDIA_MOUNTED))
            cacheDir = new File(
                    android.os.Environment.getExternalStorageDirectory(),
                    ".abcde");
        else
            cacheDir = context.getCacheDir();
        if (!cacheDir.exists())
            cacheDir.mkdirs();
    }

    final int stub_id = R.drawable.no_image;

    public void DisplayImage(String url, Activity activity, ImageView imageView) {
        if (cache.containsKey(url)) {

            imageView.setImageBitmap(cache.get(url));
        } else {
            queuePhoto(url, activity, imageView);
            imageView.setImageResource(stub_id);
        }
    }

    private void queuePhoto(String url, Activity activity, ImageView imageView) {
        // This ImageView may be used for other images before. So there may be
        // some old tasks in the queue. We need to discard them.
        photosQueue.Clean(imageView);
        PhotoToLoad p = new PhotoToLoad(url, imageView);
        synchronized (photosQueue.photosToLoad) {
            photosQueue.photosToLoad.push(p);
            photosQueue.photosToLoad.notifyAll();
        }

        // start thread if it's not started yet
        if (photoLoaderThread.getState() == Thread.State.NEW)
            photoLoaderThread.start();
    }

    public Bitmap getBitmap(String urlString) {
        String filename = String.valueOf(urlString.substring(urlString
                .lastIndexOf("/") + 1));
        File f = new File(cacheDir, filename);
        try {
            if (!f.exists()) {
                Bitmap bitmap = null;
                InputStream is = new URL(urlString).openStream();
                OutputStream os = new FileOutputStream(f);
                Globals.CopyStream(is, os);
                os.close();
                bitmap = decodeFile(f);

                return bitmap;
            } else {
                Bitmap bitmap = decodeFile(f);
                return bitmap;
            }

        } catch (Exception ex) {
            ex.printStackTrace();
            Log.e(Data.LOG, ex.getMessage(), ex);
            Bitmap icon = BitmapFactory.decodeResource(ctx.getResources(),
                    R.drawable.no_image);
            return icon;
        }
    }

    // decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE
                        || height_tmp / 2 < REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale++;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {

        }

        return null;
    }

    // Task for the queue
    private class PhotoToLoad {
        public String url;
        public ImageView imageView;

        public PhotoToLoad(String u, ImageView i) {
            url = u;
            imageView = i;
        }
    }

    PhotosQueue photosQueue = new PhotosQueue();

    public void stopThread() {
        photoLoaderThread.interrupt();
    }

    // stores list of photos to download
    class PhotosQueue {
        private Stack<PhotoToLoad> photosToLoad = new Stack<PhotoToLoad>();

        // removes all instances of this ImageView
        public void Clean(ImageView image) {
            for (int j = 0; j < photosToLoad.size();) {
                if (photosToLoad.get(j).imageView == image)
                    photosToLoad.remove(j);
                else
                    ++j;
            }
        }
    }

    class PhotosLoader extends Thread {
        @Override
        public void run() {
            try {
                while (true) {

                    if (photosQueue.photosToLoad.size() == 0)
                        synchronized (photosQueue.photosToLoad) {
                            photosQueue.photosToLoad.wait();
                        }
                    if (photosQueue.photosToLoad.size() != 0) {
                        PhotoToLoad photoToLoad;
                        synchronized (photosQueue.photosToLoad) {
                            photoToLoad = photosQueue.photosToLoad.pop();
                        }
                        Bitmap bmp = getBitmap(photoToLoad.url);
                        cache.put(photoToLoad.url, bmp);

                        if (photoToLoad.url == null) {

                        } else {

                            if (((String) photoToLoad.imageView.getTag())
                                    .equals(photoToLoad.url)) {
                                BitmapDisplayer bd = new BitmapDisplayer(bmp,
                                        photoToLoad.imageView);
                                Activity a = (Activity) photoToLoad.imageView
                                        .getContext();
                                a.runOnUiThread(bd);
                            }
                        }
                    }
                    if (Thread.interrupted())
                        break;
                }
            } catch (InterruptedException e) {
                // allow thread to exit
            }
        }
    }

    PhotosLoader photoLoaderThread = new PhotosLoader();

    // Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable {
        Bitmap bitmap;
        ImageView imageView;

        public BitmapDisplayer(Bitmap b, ImageView i) {
            bitmap = b;
            imageView = i;
        }

        public void run() {
            if (bitmap != null)
                imageView.setImageBitmap(bitmap);
            else
                imageView.setImageResource(stub_id);
        }
    }

    public void clearCache() {

        cache.clear();

        // clear SD cache
        File[] files = cacheDir.listFiles();
        for (File f : files)
            f.delete();
    }

} 
```

# iphone - 图像缩放时在 UIScrollView 中停止滚动图像

> ID：12584350
> 
> 赞同：0
> 
> 时间：2012-09-25T13:49:18.740
> 
> 标签：iphone, ios

我在 UIScrollView 中有一个图像，我希望用户不能在缩放时间滚动图像，我阅读了 UIScrollView 的许多属性，但我很困惑。

当用户在 scrollView 中缩放图像时，我们如何停止滚动图像（水平或垂直）。

我已经测试过了

```
 scroll.scrollEnabled=NO;

 scroll.directionalLockEnabled = YES;

 scroll.bounces=NO; 
```

scroll.scrollEnabled = N0; 停止滚动，但任务是用户无法滚动图像，当用户缩放图像时，我需要帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:22:28.003

您必须将您的视图控制器设置为滚动视图委托。假设您有 UIImageView 正在放大滚动视图。您想要做的是在缩放时将其居中在滚动视图边界的中间。如果您只想禁用垂直或水平方向的滚动，则仅更改 imageView 的 x 或 y 中心

```
- (void)scrollViewDidZoom:(UIScrollView *)scrollView
 {
  self.imageView.center=CGPointMake(CGRectGetMidX(self.scrollView.bounds), CGRectGetMidY(self.scrollView.bounds));
 } 
```

我强烈建议您看一下有关高级滚动视图技术 2010、2011 和 2012 的苹果视频会议，它们确实很好地解释了 UIScrollView 到底是什么强大的野兽。希望这有帮助

# css - 如何使用自定义 css 字体？

> ID：12584351
> 
> 赞同：0
> 
> 时间：2012-09-25T13:49:23.717
> 
> 标签：css, internet-explorer-9, font-face

我正在尝试在我正在处理的 Intranet 网站上使用自定义 CSS 字体，但 Internet Explorer 会忽略它。

谁能帮我？

```
@font-face {
  font-family: "samaritans-webfont";
  font-style: normal;
  font-weight: normal;
  src:url("/smresources/fonts/samaritans-webfont.eot?iefix") format("embedded-opentype"), 
  url("/smresources/fonts/samaritans-webfont.woff") format("woff"), 
  url("/smresources/fonts/samaritans-webfont.ttf") format("truetype"), 
  url("/smresources/fonts/samaritans-webfont.svg#samaritans-webfont") format("svg");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:59:40.837

如果您使用的是 IE9，那么 -

在`@font-face`IIS 服务器上使用时，IE9 用户可能看不到该字体。这可以通过两种方式解决。1) 将 WOFF 格式添加到 MIME 类型列表中。或 2) 将 format('eot') 部分更改为 format('embedded-opentype')。任何一个都可以解决 IE9 的问题。

[**新的防弹@Font-Face 语法**](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:54:50.667

根据您的 IE 版本，有不同的支持。

注意：[http](http://caniuse.com/#feat=fontface) ://caniuse.com/#feat=fontface如果您看到对不同版本 IE 的支持会有所不同，因此如果您使用 IE 6，则需要额外的 hack 才能使网络字体正常工作。

# lucene - Neo4j 自动（数字）索引

> ID：12584352
> 
> 赞同：3
> 
> 时间：2012-09-25T13:49:25.367
> 
> 标签：lucene, indexing, neo4j

如果我启用自动索引例如`latitude`和`longitude`字段（类型：）`double`我不能做这个查询

```
autoIndex.query(
            QueryContext.numericRange(
                    'longitude',
                    16.598145,
                    46.377254
            )
    ); 
```

`autoIndex`定义为`graphDb.index().getNodeAutoIndexer().getAutoIndex()`。
简单地说，结果大小是`size=0`。

* * *

其他查询如

```
autoIndex.get(...) 
```

或者

```
autoIndex.query('id', new QueryContext("*").sort(sort)) 
```

工作得很好。

* * *

`locations_index`但是，如果我手动添加索引

```
 ValueContext latValue = new ValueContext(node.getProperty('latitude')).indexNumeric();
    ValueContext lonValue = new ValueContext(node.getProperty('longitude')).indexNumeric();

    locationsIndex.add(node, 'latitude', latValue);
    locationsIndex.add(node, 'longitude', lonValue); 
```

对于数据库中的每个纬度/经度，查询都有效。

我的问题是 - 有没有办法自动将数字字段索引为`ValueContext.indexNumeric()`？不应该是自动的吗？

# php - YII 框架：如何从数据库中提取数据

> ID：12584354
> 
> 赞同：-3
> 
> 时间：2012-09-25T13:49:33.370
> 
> 标签：php, database, frameworks, yii

我正在使用基于 YII 框架的脚本。我刚刚在数据库中添加了一个额外的表，并且想知道如何从中提取数据。

假设我的表名为“clients”，而我的列是“name”，我该如何提取数据来显示它？我问了脚本的所有者，但他们告诉我的只是“定义一个控制器和模型以使其工作”

虽然我对 php 的使用并不差，并且之前使用 Wordpress 和其他东西做过这件事......我对 YII 框架是全新的和愚蠢的。

所以我希望你们能帮我一个代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:50:43.903

为 Emlpoyee 创建一个模型，在控制器中检索员工：

```
$employee=Emlpoyee::model()->findByPk(); 
```

例如。将其传递给视图：

```
$this->render('view', array('employee'=>$employee)); 
```

现在在视图中，您可以显示您的字段：

```
<?php echo $employee->ename?> 
```

从[这里开始](http://www.yiiframework.com/forum/index.php/topic/15935-pull-data-from-db-to-view/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:41:12.380

如果您不知道如何创建模型，请尝试使用[Gii](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii)。只需将模块定义添加到 config 并转到 your.local.domen/gii。但最好阅读[文档](http://www.yiiframework.com/doc/guide/)。

# objective-c - iPhone裁剪部分图像，不使用动画调整大小

> ID：12584361
> 
> 赞同：1
> 
> 时间：2012-09-25T13:49:44.470
> 
> 标签：objective-c, animation

好的，在我的应用程序中，我有一个图像，我想慢慢地向用户展示。所以我不想调整图像的大小，我想在背景中有完整的图像，然后慢慢地从上到下显示更多的图像。我正在使用我使用动画完成的动画创建一个垂直进度条，并且工作正常。

进度条本身的 alpha 为 0.5，因此您可以看到它后面的图像。我使用动画并在制作动画时拉伸进度条，这只是一个根据进度条设置颜色的视图。我不介意拉伸它，因为它看起来不错。但是我不希望栏后面的图像拉伸，我希望它只显示与进度条动画一样多的图像。所以说进度条完成了80%，那么我应该看到它后面的图像高度的80%，宽度永远不会改变，并且它后面的图像没有调整大小，只是显示了更多。

我尝试使用与图像上的进度条相同的代码，但它看起来不一致，因为进度条将处于不同的级别并且拉伸的图像看起来很奇怪。

我一直在研究动态裁剪代码的不同方法，但我似乎无法在动画中找到任何方法。是否有执行此类任务的内置方法？我发现的很多裁剪代码似乎都在调整图像大小。

我一直在用这个来动画我的进度条

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:3.0];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    transform = CGAffineTransformMakeScale(1,transformValue);
    image.transform = transform;
    image.center = CGPointMake(xValue, yValue);

[UIView commitAnimations]; 
```

我希望你可以使用类似的东西来制作图像的动画。

任何帮助将非常感激！！

经过大量的测试，我设法达到了这一点：

```
 [UIView animateWithDuration:3.0 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{

                         UIImage *image = [UIImage imageNamed:@"button_connectMe.png"];
                     CGImageRef tmpImgRef = image.CGImage;
                     CGImageRef topImgRef = CGImageCreateWithImageInRect(tmpImgRef, CGRectMake(0, 30, image.size.width, image.size.height));

                     UIImage *topImage = [UIImage imageWithCGImage:topImgRef];
                    imgView.image = topImage;
                     imgView.frame = CGRectMake(0, 180, topImage.size.width, topImage.size.height);

                 } 
                 completion:^(BOOL finished) {
                     NSLog(@"Final method");

                 }
 ]; 
```

这会将图像裁剪成两半，并保持原始图像大小，但问题是，新裁剪的图像会立即应用在这行代码中

```
 UIImage *topImage = [UIImage imageWithCGImage:topImgRef];
                        imgView.image = topImage; 
```

它不是动画的，而这部分

imgView.frame = CGRectMake(0, 180, topImage.size.width, topImage.size.height);

是动画的。我需要以某种方式对 CGI 图像的帧变化进行动画处理，以便将图像慢慢裁剪为所需的任何大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:50:44.170

最后！！

折腾了两天，终于找到了答案。当我发现这个线程时，正在做更多的测试和搜索

[为 UIImage 或 UIImageView 设置动画？](https://stackoverflow.com/questions/4772736/animating-a-uiimage-or-uiimageview)

我更改了代码以满足我的需要并最终得到了这个

```
-(void)cropAnimateBottom
{
    UIImage *image = [UIImage imageNamed:@"bar.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(150, 150, image.size.width, 0)];
    imageView.image = image;
    [imageView setClipsToBounds:YES];
    [imageView setContentMode:UIViewContentModeBottom];

    [self.view addSubview:imageView];

    [UIView animateWithDuration:3.0f
                          delay:0.0f
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^(void) {
                         imageView.frame = CGRectMake(150, 150, image.size.width, -image.size.height);
                     }
                     completion:NULL];

} 
```

我将 contentMode 设置为底部，如您所见，将动画块中的图像高度设置为减去图像高度。如果您想从上到下制作动画，那么只需反过来将内容模式更改为顶部，即

```
-(void)cropAnimateTop
{
    UIImage *image = [UIImage imageNamed:@"bar.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 100, image.size.width, 0)];
    imageView.image = image;
    [imageView setClipsToBounds:YES];
    [imageView setContentMode:UIViewContentModeTop];

    [self.view addSubview:imageView];

    [UIView animateWithDuration:3.0f
                          delay:0.0f
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^(void) {
                         imageView.frame = CGRectMake(0, 100, image.size.width, image.size.height);
                     }
                     completion:NULL];

} 
```

希望能帮助其他试图实现同样目标的人！！

# c++ - 2个套接字之间的通信问题

> ID：12584362
> 
> 赞同：1
> 
> 时间：2012-09-25T13:49:47.287
> 
> 标签：c++, qt, sockets

我有一台 linux 机器和一台 Windows 机器我有一个 C++ 程序，它充当 linux 机器上的服务器，而 Qt 应用程序充当 Windows 机器上的客户端。我使用套接字作为加密密钥（基本异或加密）

问题是当我多次点击连接时，我得到了假字符串。我认为问题出在 qt 应用程序中，这是我的代码。我试图让一个全局标志忙，以防止用户多次点击连接按钮，但这个标志永远不会被触发。

为什么？我应该使用互斥锁吗？如果是怎么办？

```
void MainWindow::performRead()
{
    QTcpSocket * sock = static_cast<QTcpSocket*>(this->sender());
    if (key == 0)
    {
    busy = true;
    QString recv(sock->readLine());
    key = recv.toInt();
    qDebug() << "Cheia este " << key;

    char * response = enc_dec("#AUTH|admin|admin",strlen("#AUTH|admin|admin"),key);
    sock->write(response);
    }
    else
    {
        busy = true;
        while (sock->bytesAvailable() > 0)
        {  
        unsigned short word;
        sock->read((char*)(&word),2);
        qDebug()<<word;
        QByteArray bts = sock->read(word);
        char * decodat = enc_dec((char*)bts.data(),bts.length() - 2,key);
        char testx[2];
        sock->peek(&testx[0],2);
        qDebug() << decodat;
        }
    }

    busy = false;
}

void MainWindow::on_pushButton_clicked()
{
    if (!busy)
    {
    key = 0;
    QTcpSocket * sock = new QTcpSocket();
    connect(sock,SIGNAL(readyRead()),this,SLOT(performRead()));
    sock->connectToHost("194.110.212.46",6550);
    }
    else qDebug()<<"Can't you see I am busy??" << endl;
}

char * enc_dec(char * str,int len, int key)
{
    unsigned char keys[2];
    keys[0] = (unsigned char)key;
    keys[1] = keys[0] ^ 255;
    char * nou = new char[len + 1];
    nou[len] = '\0';
    for (int i = 0; i < len; i++)
    {
        char tmpy = str[i] ^ keys[i % 2];
        nou[i] = tmpy;
    }
    return nou;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:43:16.333

您的代码非常混乱，这是我的建议：

*   不要`connect`在每次按下按钮时都使用套接字 - 您正在覆盖以前的内容，并做不必要的工作 - TCP 连接的建立很昂贵，
*   也许有一个“连接”和“断开”按钮，并且只有在建立连接时才允许从套接字读取，
*   尝试确保在没有您的“加密”的情况下一切正常，
*   之后使用真正的加密。

# android - 从 USB 读取电源输入

> ID：12584365
> 
> 赞同：6
> 
> 时间：2012-09-25T13:49:55.687
> 
> 标签：android, usb, power-management

有什么方法可以读取 Android 中 USB 连接的电源输入？

例如，将微型 USB 线从计算机 USB 输出、电源充电器或类似设备插入手机，然后读取电压和安培输出？

我不知道从哪里开始查找此信息，并且在搜索时我只能找到电池小部件或功耗应用程序 - 这不是我要查找的内容，我希望能够读取正在发送的电量通过已连接的 USB 接口。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:57:52.367

可能，您应该从[BatteryManager](http://developer.android.com/reference/android/os/BatteryManager.html)开始，请参阅[此问题](https://stackoverflow.com/questions/1805895/android-battery-in-sdk)以获取一些使用示例。我相信 BatteryManager 提供的数据应该足以提供您想要的近似计算（通过 USB 发送多少电量）。拥有设备 ID 和设备默认电池容量表或/和用户输入有关容量和时间间隔和电压的百分比差异可能会为近似计算消耗提供足够的信息

另一种（肮脏的）方式可能如下 - 如果有任何关于总容量/消耗的信息，则挖掘 android 源您可以通过 java 反射获得。我认为[BatteryManager](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/os/BatteryManager.java/)和[BatteryStatsImpl](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/com/android/internal/os/BatteryStatsImpl.java#BatteryStatsImpl)可能是开始分析的合适位置。

# java - 在 Hibernate 中删除子对象的问题“已删除的对象将被级联重新保存”

> ID：12584368
> 
> 赞同：2
> 
> 时间：2012-09-25T13:50:03.140
> 
> 标签：java, hibernate, hibernate-annotations, hibernate-cascade

我有以下两个实体：

**1- 交易**

```
@OneToMany(cascade=CascadeType.ALL,mappedBy = "deal", fetch = FetchType.EAGER)
@Fetch( FetchMode.SELECT)
private List<DealCheckList> dealCheckList; 
```

**2- 交易清单**

```
@JoinColumn(name = "DEAL_ID", referencedColumnName = "DEAL_ID", insertable = false, updatable = false)
@ManyToOne(fetch = FetchType.LAZY)  
private Deal deal; 
```

删除子对象时，即 DealCheckList 使用

```
.......
.......  
transaction = session.beginTransaction();

Deal deal = (Deal) session.createCriteria(Deal.class)
                          .add(Restrictions.eq("dealId",  dealId)).uniqueResult();         

for(DealCheckList checklist : deal.getDealCheckList()){                        
            session.delete(checklist);
 }
transaction.commit(); 
```

我收到以下错误

```
Caused by: org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:05:21.487

您需要从 dealCheckList 中删除清单对象。您的 DealCheckList 列表具有 "cascade all" ，因此如果其中包含对象，则会自动保存它。

错误消息很清楚“从关联中删除已删除的对象”

# android - 将 OSM 转换为 mapfroge *.map 文件失败

> ID：12584369
> 
> 赞同：0
> 
> 时间：2012-09-25T13:50:10.093
> 
> 标签：android, map, openstreetmap

我正在使用 osmosis 将 OSM 映射文件转换为 *.map 以在 android 中与 mapsfroge 一起使用。我通过以下步骤安装了插件：1）将'mapsforge-map-writer-0.3.0-jar-with-dependencies.jar'复制到'osmosis/lib/default'目录2）创建文件'osmosis-plugins.conf'进入 'osmosis/config' 目录 3) 将此行添加到文件中： org.mapsforge.map.writer.osmosis.MapFileWriterPluginLoader

现在，当使用这条线时： `osmosis --rb file=tehran.osm.pbf --mapfile-writer file=tehran.map type=hd`

我懂了 ：

. .

```
 `Sep 25, 2012 1:01:50 PM org.openstreetmap.osmosis.core.pipeline.common.ActiveTaskManager waitForCompletion
SEVERE: Thread for task 1-rb failed
java.lang.AbstractMethodError: org.mapsforge.map.writer.osmosis.MapFileWriterTas
k.initialize(Ljava/util/Map;)V
        at crosby.binary.osmosis.OsmosisReader.run(OsmosisReader.java:43)
        at java.lang.Thread.run(Unknown Source)
Sep 25, 2012 1:01:50 PM org.openstreetmap.osmosis.core.Osmosis main
SEVERE: Execution aborted.
org.openstreetmap.osmosis.core.OsmosisRuntimeException: One or more tasks failed
.
        at org.openstreetmap.osmosis.core.pipeline.common.Pipeline.waitForComple
tion(Pipeline.java:146)
        at org.openstreetmap.osmosis.core.Osmosis.run(Osmosis.java:92)
        at org.openstreetmap.osmosis.core.Osmosis.main(Osmosis.java:37)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Laun
cher.java:329)` 
```

. . .

文件“tehran.osm.pbf”位于“bin”文件夹中。我还用另外两个 osm 和 osm.pbf 文件（从其他网站下载）对其进行了测试。商店也是一样的。

问题出在哪里？是否有另一种方法可以将 OSM 转换为 *.map 文件？我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:08:19.720

您是否尝试过边界框（bbox）选项？

信息可以在[这里找到](http://code.google.com/p/mapsforge/wiki/GettingStartedMapWriter)

...

为柏林-达勒姆编写地图文件。数据已从 OSM 网站导出为 XML，因此我们必须使用边界框定义：

*$ bin/osmosis --rx 文件=../data/dahlem.osm --mw 文件=/tmp/dahlem-high.map bbox=52.4477300,13.2756600,52.4588200,13.2986600*

**已知的陷阱**

该插件需要一个边界框定义，它要么包含在数据中，要么通过命令行参数 bbox 给出。请注意，OSM 网站的 XML 导出功能当前会产生无效的边界框定义，因此在这种情况下必须使用 bbox 参数。

如果您将插件安装到用户主目录中，请确保您使用该用户而不是其他用户（例如 root 用户）运行 osmosis。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T15:40:08.340

你可以使用 --rx 选项来使用 osm 来映射所有内容都在 mapsforge wiki 中进行了描述

Vetter 添加插件的方法

在 osmosis 文件夹中创建插件文件夹添加将 jar 放在那里

# c# - 将 Excel 2010 插件转换为 2007 插件（均为 VSTO）

> ID：12584375
> 
> 赞同：10
> 
> 时间：2012-09-25T13:50:24.810
> 
> 标签：c#, vsto, excel-2007, add-in, excel-2010

我目前正在开发一个 Excel 2010 加载项，该加载项以前是 Excel 2007 加载项。在切换计算机的过程中的某个地方，我认为加载项被转换了。

我的一些客户表示该加载项不再适用于 Excel 2007，因此我尝试在安装了 Excel 2007 和 Visual Studio 2010 的 VirtualBox 中对其进行调试。

现在我收到错误消息：

> 您无法调试或运行此项目，因为未安装所需版本的 Microsft Office 应用程序。

我开始了一个新的 Excel 2007 插件项目，并试图找出其中的差异，并想出它与 dll 有一些关系的想法，所以我更改了我的 2010 插件，直到它看起来像 2007 插件。

我仍然收到错误消息，指出我的项目无法调试。

有什么我可能忘记改变的。

不幸的是，编写一个全新的插件不是一种选择。

到目前为止，这些问题对我没有帮助：

1.  [适用于 Excel 2007 和 2010 的 Excel 插件](https://stackoverflow.com/questions/4937891/excel-addin-that-works-on-excel-2007-and-2010)
2.  [部署 Office 2010 插件](https://stackoverflow.com/questions/5800141/deploying-office-2010-addin)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T14:10:17.120

要让**VS 2010**与**Office 2007**一起使用，请修改项目文件 ( *.csproj* )，使其在 Office 2007 中打开，并且在运行时不查找 Office 2010（*因此出现上面的错误消息*）。

这是项目设置更改（*Excel 示例*）：

**源 XPath：**

> //项目/ProjectExtensions/VisualStudio/FlavorProperties/ProjectProperties/@DebugInfoExeName

**旧值（Office 2010）：**

> DebugInfoExeName="#Software\Microsoft\Office\14.0\Excel\InstallRoot\Path#excel.exe"

**新价值（Office 2007）：**

> DebugInfoExeName="#Software\Microsoft\Office\12.0\Excel\InstallRoot \Path#excel.exe"

更改此项目设置后，当您启动调试器 ( `F5`) 时，它将加载 Excel 2007 应用程序，而不是查找 Excel 2010。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T14:40:39.367

通常，当我使用 VSTO 加载项针对多个版本的 Office 进行开发时，我针对每个目标 Office 版本都有一个项目。我将项目之间的所有公共代码放入一个项目（通常是最旧的项目）并使用链接文件，我将公共文件添加到较新的项目中。这使我可以编写一组通用核心代码，从每个 Office 版本的要求中抽象出来。这意味着我不再与为每个版本的 Office 编译 VSTO 的不同方式作斗争。这可以通过共享文件夹和虚拟机变得更容易，因此我可以在没有多台计算机的情况下进行开发和测试。这绝不是优雅的，但对我来说效果很好。这应该允许您针对 Office 2007 和 Office 2010 开发 VSTO 加载项，而不会出现太多问题。

# iphone - Xcode Storyboard 显示新的 iPhone 5 屏幕尺寸？

> ID：12584376
> 
> 赞同：25
> 
> 时间：2012-09-25T13:50:30.423
> 
> 标签：iphone, ios6, xcode4.5, iphone-5, xcode-storyboard

我有最新版本的 Xcode。在我的一个项目中，我注意到 iPhone 的视图是新的 iPhone 5 屏幕尺寸。我喜欢它，但有没有办法切换回较小的屏幕尺寸？不是每个人都有 iPhone 5。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-25T15:25:15.703

此外，在构建界面时，您会看到一个小图标，可让您在 4" 和 3.5" 屏幕之间快速切换。它是左侧的矩形图标。它在手机尺寸之间来回切换。

![左侧的图标可让您切换显示大小](../Images/209b95a99c351fd9794e262cd57edd2b.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-25T15:10:53.807

属性中有一个size属性，所以可以选择iPhone5之前的尺寸3.5

![在此处输入图像描述](../Images/e682b4f98cee259fade6797a0d1fcb52.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-20T22:47:44.617

更新：它现在在 Editor->Simulated Screen 下。它与方向相结合（纵向与横向）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T11:06:54.483

您可以通过单击 Editor->Apply Form Factor 在 Form Factors（iPhone 5 和以前的版本）之间切换

# matlab - What is the maximum history size of the MATLAB profiler?

> ID：12584383
> 
> 赞同：0
> 
> 时间：2012-09-25T13:51:13.863
> 
> 标签：matlab, profile

I'm trying to track down all user-created functions and scripts within lenghty MATLAB code. The following code does this but due to MATLAB's profiler's default history size of 1,000,000 I'm missing a good amount of functions.

```
function endProfile(p)

    profile off
    diary('Diary_endProfile')
    for k = 1:size(p.FunctionHistory, 2)

        if p.FunctionHistory(1, k) == 0
            str = 'entering function: ';
        else
            str = 'exiting function: ';
        end

        if isempty(strfind(p.FunctionTable(p.FunctionHistory(2,k)).FileName, 'C:\Program Files\MATLAB\')) &&...
           ~strcmp(p.FunctionTable(p.FunctionHistory(2, k)).FileName, '')
            disp([str p.FunctionTable(p.FunctionHistory(2, k)).FunctionName])
        end
    end

    profile off
    profile viewer

end 
```

I initialize the profiler with the following code from the first script of the code under analysis:

```
profile clear

profile on -history -historysize 1000000000 
```

The previous function is called at the end of the first script as follows:

```
endProfile(profile('info')) 
```

Does anyone know what the maximum history size is and/or if there are alternate ways of increasing the size?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:54:29.950

查看依赖关系的更好方法是使用[depfun](http://www.mathworks.com/help/matlab/ref/depfun.html)或来自 File Exchange的优秀[fdep 。](http://www.mathworks.com/matlabcentral/fileexchange/17291-fdep-a-pedestrian-function-dependencies-finder)

# jquery - jQuery垂直菜单问题

> ID：12584385
> 
> 赞同：0
> 
> 时间：2012-09-25T13:51:15.993
> 
> 标签：jquery, menu, html-lists, html

所以我有一个简单的无序列表：

```
<ul id="nav">
<li>
    <span>Group 1 »</span>
    <ul>
        <!-- list items -->
    </ul>
</li>
<li>
    <span>Group 2 »</span>
    <ul>
        <!-- list items -->
    </ul>
</li>
</ul> 
```

我已经为这个菜单设置了样式，并添加了一些 jQuery 以`ul`在用户单击该`span`区域时显示 2nd level 并且`span`'s 被设置为块级，因此您可以单击列表项内的任何位置并具有预期的功能。

问题是，在用户单击 span 元素并出现无序列表后，span 就像一个内联元素，并且要消失，`ul`用户必须单击文本并且单击 parent-li 区域将不起作用。

你可以在这里看到现场演示：http: [//jsfiddle.net/d2Z7m/6/](http://jsfiddle.net/d2Z7m/6/)

也许有更好的解决方案来创建垂直菜单，但我只是想弄清楚为什么`span`元素会这样以及是什么原因造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:54:42.433

将您的样式更改`#nav li ul`为

```
#nav li ul {
    width:100px;
    margin: -35px 0px 0px 155px;
} 
```

目前填充正在影响`span`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:55:09.810

添加到您的跨度`position:relative`

# javascript - 使用 jquery 按值选择下拉菜单

> ID：12584387
> 
> 赞同：2
> 
> 时间：2012-09-25T13:51:23.153
> 
> 标签：javascript, jquery

```
<select id="id_deals-1-deal_template" name="deals-1-deal_template">
 <option selected="selected" value="">---------</option>
 <option value="1" selected="selected">Pear</option>
 <option value="2">Apple</option>
 <option value="4">Melon</option>
</select> 
```

为了选择 Melon，我必须这样做：

```
$('#id_deals-1-deal_template>option:eq(3)').prop('selected', true); 
```

但在这种情况下，我宁愿选择主键 4。因此，是否可以通过其值而不是顺序来选择下拉列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:52:23.803

尝试使用`.val`which 可以是基于参数的 setter 或 getter。下面是一个二传手..

```
$('#id_deals-1-deal_template').val(4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:54:31.497

```
$('#id_deals-1-deal_template').val(4); 
```

这是一个演示：

[http://jsfiddle.net/M3UBc/](http://jsfiddle.net/M3UBc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:57:45.813

采用

```
$('#id_deals-1-deal_template').val(4); 
```

或者

```
$('#id_deals-1-deal_template').val('Melon'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:09:31.710

按选项名称选择

```
$("#id_deals-1-deal_template option").each(function() {
    if($(this).text() == 'Melon') {
    $(this).attr('selected', 'selected');            
}                        
}); 
```

按值 id 选择

```
$("#id_deals-1-deal_template option").each(function() {
    if($(this).text() == '4') {
    $(this).attr('selected', 'selected');            
    }                        
}); 
```

# .net - 使用 TableStyles 的 LoadFromDataTable 在重新打开 Excel 工作簿时创建错误

> ID：12584388
> 
> 赞同：0
> 
> 时间：2012-09-25T13:51:24.247
> 
> 标签：.net, vb.net, openxml, export-to-excel, epplus

我已经在网上寻找这个解决方案，但找不到任何可以解释我的问题的东西。

我正在为 vb.net 使用 EPPLus（使用 OfficeOpenXml），我的代码如下所示：

```
Dim Package As New ExcelPackage
Dim wks As ExcelWorksheet
Dim dt As DataTable

wks.Cells("A1").LoadFromDataTable(dt, True, TableStyles.Medium9)

Dim SaveAs As New FileInfo([...somelocation.xlsx])
Package.SaveAs(SaveAs) 
```

现在，当我运行它时，它运行得非常好，并按需要/预期保存 .xlsx 文件。但是，当我尝试在 Excel 中打开它时，我收到一条错误消息：
**“Excel 在...中找到不可读的内容，您要恢复此工作簿的内容吗？”**

如果我然后单击“是”，它会很好地打开它并给我一个错误报告说：“Excel 能够通过修复或删除不可读的内容来打开文件”，其中包含很多错误（每个加载的数据表一个错误）：“修复的记录：来自 /xl/tables/table1.xml 部分的表（表）”

现在...如果我将代码行更改为：

```
wks.Cells("A1").LoadFromDataTable(dt, True, TableStyles.Medium9) 
```

到：

```
wks.Cells("A1").LoadFromDataTable(dt, True) 
```

然后一切正常，没有错误......

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T15:40:32.553

我遇到了同样的问题（至少有同样的症状），我的问题原来是因为我的 DataTable.TableName 中有一个“：”。

我发现 EPPlus 使用 DataTable.TableName 作为 .xlsx 文件中 table1.xml 中的显示名称，并且它不支持“：”字符。

我通过将损坏的输出与 Excel 修复的版本进行比较来解决这个问题。您可以通过简单地将它们作为 .zip 文件打开（将它们从 .xlsx 重命名为 .zip）来查看办公文档的底层结构，然后您可以查看底层文件。就我而言，Excel 将我指向 table1.xml 文件，因此很容易找到。

我通过简单地将 DataTable.TableName 中的任何 ':' 替换为 '_' 来解决问题。

希望这可能对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-02T16:55:24.823

我有同样的问题，我的表名和列名都是动态的，所以有可能出现无效字符。这是我从其他人那里窃取的代码，将替换所有这些代码：

```
protected string ReplaceSpecialChars(string inputName)
    {
        char[] verbotten = new char[] { ' ', '/', '\'', '"', '\'', '@', '`', '#', '%', '>', '<', '!', '.', '[', ']', '*', '$', ';', ':', '?', '^', '{', '}', '+', '-', '=', '~', '\\' };

        int pos = -1;
        while ((pos = inputName.IndexOfAny(verbotten)) != -1)
            inputName = inputName.Substring(0, pos) + inputName.Substring(pos + 1);

        return inputName;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:55:30.360

......所以我弄清楚了我的问题是什么，我只是把它放在这里以防有人像我一样愚蠢......

就我而言，我创建了具有自定义列名称的数据表，这些列名称分为 2 行，如下所示：

```
dt.Columns.Add("First Line's Text" & vbCrLf & "Second Line") 
```

问题是**vbCrLf** - 我将其更改为：

```
dt.Columns.Add("First Line's Text" & vbLf & "Second Line") 
```

错误消失了:)

希望这可以节省其他人我所经历的所有烦恼！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-15T01:49:56.550

我有一个由我的 DataTable 名称引起的类似问题。我的解决方案是向 DataTable 添加一个扩展属性，然后在创建电子表格时调用它。

```
dataTable.ExtendedProperties.Add("Title",someText); 
```

然后稍后

```
var tableTitle = sheet.Cells[range];
tableTitle.Merge = true;
tableTitle.Value = dataTable.ExtendedProperties["Title"]; 
```

# c# - 从 Active Directory 获取部门列表缺少某些部门

> ID：12584399
> 
> 赞同：0
> 
> 时间：2012-09-25T13:51:58.110
> 
> 标签：c#, active-directory, directoryservices

我有一个方法，我正在使用获取我们活动目录中的部门列表。但是有些（至少我知道的）没有出现。“EMP-Alumni Relations”是我目前正在解决的问题。

这是我正在使用的代码。如果有人能找出任何潜在的问题，我将不胜感激。我一时不知所措。我已经确定了部门中的几个用户，所以我知道这不应该是问题。

```
ArrayList GetAdDepts (  )
    {
        DirectoryEntry myLdapConnection = SCDirectoryEntry.GetDirectoryEntry ( );
        DirectorySearcher search = new DirectorySearcher ( myLdapConnection );
        search.Filter = "(objectClass=user)";
        search.PropertiesToLoad.Add ( "department" );
        SearchResultCollection result = search.FindAll ( );
        ArrayList departments = new ArrayList ( );
        foreach ( SearchResult depart in result )
        {
            DirectoryEntry directoryEntry = depart.GetDirectoryEntry ( );

            if ( directoryEntry.Properties.Contains ( "department" ) )
            {
                string dept = ( string ) depart.Properties [ "department" ] [ 0 ];
                if ( dept.Trim ( ).StartsWith ( "EMP-" ) )
                {
                    if ( !departments.Contains ( dept ) )
                    {
                        departments.Add ( dept );
                    }
                }
            }

        }
        return departments;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:58:02.443

有超过 1000 个用户吗？如果是这样，您可能已达[到此问题的答案中描述](https://stackoverflow.com/questions/90652/can-i-get-more-than-1000-records-from-a-directorysearcher-in-asp-net)的限制。

尝试设置：

```
search.PageSize = ... some non-zero value ...; 
```

此外，您应该使用 using 语句处理一次性物品`DirectorySearcher`, `SearchResultCollection`, ，例如：`DirectoryEntry`

```
using (var search = new DirectorySearcher(myLdapConnection ))
{
    search.Filter = "(objectClass=user)";          
    search.PropertiesToLoad.Add ( "department" );          
    search.PageSize = 1000; // any non-zero value will work
    using (var result = search.FindAll ( ))
    {
        ...
        foreach ( SearchResult depart in result )             
        {                 
            using (var directoryEntry = depart.GetDirectoryEntry ( ))
            {
                ...
            }
        }
    }
} 
```

# android - Android - 空闲状态数据丢失

> ID：12584400
> 
> 赞同：2
> 
> 时间：2012-09-25T13:51:59.737
> 
> 标签：android, android-intent, android-emulator, android-widget

如果设备保持空闲，有什么方法可以避免 Android 中的静态数据丢失？

我有静态对象，它将存储来自活动 UI 的一些值。如果设备闲置 4-5 小时，则该静态对象将被删除以将内存用于其他正在运行的应用程序。

如果我做错了，还有其他方法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:59:04.597

你无法避免它。Android 可以随时终止您的进程，并且不保证会回调您。

仅当您的应用程序进入后台时才会发生这种情况。将数据保存在 onPause() 中并在 onResume() 中重新加载。有关更多信息，请参阅 Activity 生命周期的 Android 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:57:39.863

不，这就是 Android 的工作方式。

简单地说，如果数据是持久的，即如果它的生命周期跨越`Activity`创建它的生命周期，则将其保存在持久存储（即内部存储器）、平面文件或数据库中，具体取决于数据是否具有内部结构与否。

# java - 具有多个 targetEntity 的 Hibernate 映射接口

> ID：12584402
> 
> 赞同：2
> 
> 时间：2012-09-25T13:52:09.160
> 
> 标签：java, hibernate, jpa, interface, hibernate-mapping

我正在尝试使用 Hibernate 和 javax.persistence Annotations 开发应用程序。我在映射接口时遇到了一些麻烦。

我已将我的接口映射为@MappedSuperclass，并且我已经尝试在我的 ManyToOne Annotation 中使用属性 targetEntity 来引用该接口并且它有效。问题是我将不止一个类充当targetEntity。特别是我希望实现我的接口的每个类都可以被识别为目标实体。

有人知道是否可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:40:59.707

我认为这

> 特别是我希望实现我的接口的每个类都可以被识别为目标实体。

不可能。只有被注释`@Entity`或以其他方式映射（例如使用映射文件）的类才能被持久化。

此外，[休眠文档说](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e1168)：

> ### 笔记
> 
> 目前不支持注释接口。

[有关更多信息，请参阅带有休眠注释](https://stackoverflow.com/q/2586583/1374678)的相当老的问题接口。

# sql - 具有不同字段的 SQL 条件连接

> ID：12584403
> 
> 赞同：0
> 
> 时间：2012-09-25T13:52:12.193
> 
> 标签：sql, join, conditional

在我的查询中，我想根据字段的值（比如 field1）连接两个表。根据 field1 的值，连接将是：

`field3 = field4 OR field5 = field6`

就像是

```
join on    
  CASE FIELD1    
   When 1 THEN FIELD 2 = FIELD3    
   When 2 THEN FIELD 4 = FIELD5    
  END 
```

我现在正在做这样的事情

```
 .... join on  (field1=1 AND field2=field3) OR (field1=2 AND field4=field5) 
```

但运行查询需要很长时间。这两个条件分别花费不到 7 秒

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:01:55.843

我强烈建议不要使用这种方法。您正在强制数据库运行无法优化的查询。相反，请查看您的表格，看看是否无法拆分数据，因此不需要此条件。

或者，如果您确实需要这样做，那么最快的方法是运行两个查询和`union`结果：

```
select * from table as x where x.field1 = 1 AND x.field2 = x.field3
union [ALL]
select * from table as y where x.field1 = 2 AND y.field4 = y.field5 
```

这应该快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:58:33.503

这需要很长时间，因为 or 不允许您使用索引。我能想到的最简单的解决方案是进行 2 个选择并将它们合并。

```
select ...
from ...
join ...
   on  (field1=1 AND field2=field3)
union
select ...
from ...
join ...
   on  (field1=2 AND field4=field5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:57:47.143

连接条件中“或”的问题在于它阻碍了索引的使用并倾向于鼓励嵌套循环连接。我建议做两次加入：

```
from A left outer join
     B b1
     on a.field2 = b2.field3 left outer join
     B b2
     on a.field4 = b2.field5 
```

左外连接确保您保留所有行。您可以在 SELECT 或 WHERE 子句中执行其他逻辑以获得所需的完整逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:59:51.820

> “运行查询需要很长时间。这两个条件分别花费不到 7 秒”

当您运行单个查询时，数据库可以找出清晰的执行路径。但是对于每个条件，它们将是*不同的执行路径。*当您尝试结合这两个条件时，数据库不容易协调它们，因此它会做一些缓慢的事情 - 可能是全表扫描。

您如何解决这个问题取决于您对 RDBMS 的风格和许多其他因素。我会让其他人给你一些关于如何解决这个问题的猜测。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T15:18:50.643

```
SELECT * 
FROM data_parent
WHERE pid = 
CASE 
WHEN pid =1
THEN (
SELECT id
FROM data_parent, test
WHERE data_parent.pid = test.id
) 
```

data_parent 和 test 是两张表

data_parent 具有列 pid 并且 test 具有列 rpid 作为外键。

这有效并给了我输出。

# web-services - soapaction in WSDL using CXF

> ID：12584405
> 
> 赞同：5
> 
> 时间：2012-09-25T13:52:14.943
> 
> 标签：web-services, soap, action, cxf, operation

I am developing webservice using CXF. I use HTTP binding so according to [http://www.w3.org/TR/wsdl#_soap:operation](http://www.w3.org/TR/wsdl#_soap:operation) **soapaction** is mandatory for this type of transport.

The problem is that I want to deploy the same application for test and production server. I would like to do it without rebuilding application or keeping external WSDL files, which will add one more thing on maintenance list.

I had the same problem with *location*, but that one was trivial to solve. I used *publishedEndpointUrl* in endpoint configuration to set proper value. The value is retrieved during initialization of application from external property file, which I placed on classpath *tomcat/common/classes* .

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxws="http://cxf.apache.org/jaxws" xmlns:soap="http://cxf.apache.org/bindings/soap" xsi:schemaLocation="http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://cxf.apache.org/bindings/soap http://cxf.apache.org/schemas/configuration/soap.xsd http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
  <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
      <list>
        <value>classpath:ws.properties</value>
      </list>
    </property>
  </bean>
  <jaxws:endpoint xmlns:tns="http://example.org/ds" id="ds" implementor="org.example.Ds" wsdlLocation="wsdl/ds.wsdl" endpointName="tns:dsSOAP" serviceName="tns:Ds" address="/dsSOAP" publishedEndpointUrl="${publishedEndpointUrl}">
    <jaxws:features>
      <bean class="org.apache.cxf.feature.LoggingFeature" />
    </jaxws:features>
  </jaxws:endpoint>
</beans> 
```

I would like to achieve the same functionality for soapaction. The value for this attribute should be not relative URI. So for test it should be:

```
<soap:operation soapAction="https://test.example.org/dsSOAP/operation1" /> 
```

and for production

```
<soap:operation soapAction="https://example.org/dsSOAP/operation1" /> 
```

any idea how to achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T14:36:11.443

您不需要指定绝对 URL，也不需要指定 URL。“操作1”就足够了。[请参阅http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383528](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383528)上的一些官方示例

将soap 动作与实例运行的环境联系起来并不是“最佳实践”。

# vb.net - too slow in show report in vb.net 2010 using crytal report

> ID：12584406
> 
> 赞同：0
> 
> 时间：2012-09-25T13:52:15.790
> 
> 标签：vb.net, crystal-reports, report, vb.net-2010

I am using this code to show the report

```
Dim rpt As New CrystalReport1()

Dim sql As String
Dim where As String

If con Is Nothing OrElse con.State = ConnectionState.Closed Then
    'MsgBox("closed")
    OpenCon()
End If

Dim m As String
m = ""
For Each n As TreeNode In GetCheck(TreeView1.Nodes)
    If n.Tag = 1 Then
        m = m
    Else
        If m = "" Then
            m = (n.Tag)
        Else
            m = m & ", " & (n.Tag)
        End If

    End If

Next

sql = "SELECT [bran_id],[f01],[f02],[f03],[f04],[f05],[f06],[f07],[f08],[bran_name],[comp_id],[comp_name],'" & dtStart.Value.Date & "' AS start_date, '" & dtEnd.Value.Date & "' AS end_date FROM [v_complain]"

If m = "" Then
    MsgBox("لم يتم تحديد اى مدينة من فضلك قم بالاختيار اولا")
    Exit Sub
Else

    where = " WHERE bran_id in (" & m & ") and f02 between CONVERT(date,'" & dtStart.Value.Date & "',103) and CONVERT(date,'" & dtEnd.Value.Date & "',103)"

    sql = sql + where

    If cbF06.Checked = True Then
        where = " AND (f06 like N'') or (f06 is null)"
        sql = sql + where
    End If

    If cbF07.Checked = True Then
        where = " AND (f07 like N'') or (f07 is null)"
        sql = sql + where
    End If

    Dim dscmd As New SqlDataAdapter(sql, con)
    Dim ds As New DataTable

    dscmd.Fill(ds)
    rpt.SetDataSource(ds)
    CrystalReportViewer1.ReportSource = rpt
    CrystalReportViewer1.Refresh()

End If
con.Close() 
```

but it's too slow to show the report in the first time. When I try to run it again without closing the window it work perfectly. Is there any way to make it faster?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:43:44.230

它有多慢？几秒钟？我相信它恰好需要初始化下属报告“引擎”。我有类似的问题，我能想到的最好的办法是向用户显示“正在创建报告，请稍候......”消息，以便他们。作为替代方案，当您启动应用程序时，您可以进行“假”调用以在后台创建虚拟报告，而不向用户显示任何内容，因此所有必需的资源将在用户准备好创建真实报告时初始化.

# visual-studio - 验证依赖于 SSIS 包中创建的表的数据流

> ID：12584407
> 
> 赞同：2
> 
> 时间：2012-09-25T13:52:17.330
> 
> 标签：visual-studio, ssis

我有一个使用 SSMS 中的导入向导保存的 SSIS 包。导入使用表来保存从平面文件导入的所有值，然后再将这些值导出到永久表中。例如，平面文件本身被导入“mytable”。'mytable' 的内容然后被转移到 'mypermanenttable'。我最近在 SSIS 包的末尾添加了一个 drop mytable SQL 语句。由于我现在在再次运行 SSIS 包时缺少“mytable”，因此我在控制流中的“准备 SQL 任务 1”步骤​​之前添加了一条 T-SQL 语句，该语句将在导入开始之前创建“mytable”。当我尝试运行整个 SSIS 包时出现错误。但是，我可以一个一个地运行 SSIS 过程的每一步，并以这种方式完成整个程序包而不会出现任何问题。我猜在我的创建表“执行 T-SQL 语句任务”运行之前检查“mytable”的“准备 SQL 任务 1”步骤​​中有一些验证。你会如何解决这个问题？

![在此处输入图像描述](../Images/ca6e616111b15bfcbcaac17881a48474.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:48:59.017

将`DelayValidation`属性设置`Data Flow Task 1`为`True`。在创建临时表之后，将在运行此任务之前触发验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:57:21.447

您能否尝试更新 SQL 任务以检查表是否存在：

```
IF (NOT EXISTS (SELECT * 
             FROM INFORMATION_SCHEMA.TABLES 
             WHERE TABLE_SCHEMA = 'TheSchema' 
             AND  TABLE_NAME = 'TheTable'))
BEGIN
  --Create table
END 
```

# ajax - 滚动页面加载

> ID：12584412
> 
> 赞同：0
> 
> 时间：2012-09-25T13:52:30.890
> 
> 标签：ajax

我正在开发一个网站，我想在滚动页面时动态加载数据，当滚动条到达页面底部时，我想使用 AJAX 从数据库中加载更多数据。

在我的网页中有一个 iframe，我想在其中附加新数据。就像 Flipkart.com 网站一样。滚动页面时加载新产品的位置。

有人可以在这方面帮助我吗？

提前致谢。

**我已经尝试了很多次，但没有运气，我得到的只是调用 GetActivity() 时，当我向下滚动时它也不调用 GetActivity()，但是当我从那一点向上滚动时，它调用 javascript 函数 GetActivity （）并且在重复这一点时，它在这里不起作用的是我使用的代码，由 Greg 给出：请查看并提供帮助。**

```
<html>
<head>
<script type="text/javascript" src="jQuery-1.4.1-min.js"></script>
<script type="text/javascript">
$(window).scroll(function() {
    var bottom = getBottom(window),
        $reset = $("#activity_reset");
    if (bottom == $(this).scrollTop() && $reset.val() == 0) {
        $reset.val(1);
        $("#activity_loading").show();
        if ($("#activity_full").val() == 0) {
            setTimeout("GetActivity();", 100);
        }
    }
});
function getBottom(e) {
    height          = $(document).height();
    windowheight    = $(e).height();
    return height - windowheight;
}
function GetActivity()
{
alert("got it!");
$('div.tt').html('1');
$('div.ttt').html('1');
}
function setting()
{
$('div.tt').html('0');
$('div.ttt').html('0');
}
</script>
</head>
<body onload="return setting()" >
<pre>
<!--here i have used some junk texts so that a scroll bar appears in the browser-->
</pre>
<div style="display:none" id="activity_full" class="ttt"></div>
<div style="display:none" id="activity_reset" class="tt"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:55:36.427

这将监视页面并在您向下滚动到页面底部时加载函数 GetActivity()；你可以把你的ajax调用放在那里并相应地编辑它以显示你希望出现在页面上的数据。

```
$(window).scroll(function() {
    var bottom = getBottom(window),
        $reset = $("#activity_reset");

    if (bottom == $(this).scrollTop() && $reset.val() == 0) {
        $reset.val(1);
        $("#activity_loading").show();

        if ($("#activity_full").val() == 0) {
            setTimeout("GetActivity();", 1000);
        }
    }
});

function getBottom(e) {
    height          = $(document).height();
    windowheight    = $(e).height();

    return height - windowheight;
}

function GetActivity() {
    /* ajax call in here */
} 
```

当窗口滚动时 .scroll(function()) 被触发；getBottom(window) 函数然后计算文档高度和屏幕高度并减去它们以查看用户的窗口是否已到达屏幕底部。然后将 $("#activity_reset") 存储到标识符中以供以后使用。

一旦触发动作，您的重置值将设置为 1，这样 ajax 就不会一次触发多次。显示加载栏，然后为 GetActivity() 函数设置超时。

$("#activity_reset") -> 应该是页面上的隐藏 div，其值为 1 或 0；它应该被初始化为 0，当用户浏览器点击页面底部时，您的 ajax 调用被触发，一旦加载完成，您应该将值设置回 0 以允许再次加载。

$("#activity_show") -> 应该是页面上包含加载图像的隐藏 div，或者只是说明正在加载某些内容的文本（不是必需的，但肯定有助于用户体验）。

$("#activity_full") -> 是另一个隐藏的 div，用于识别您的 div 何时已满并且不应再加载内容。它应该初始化为 0，当您加载了尽可能多的项目时，您可以将其设置为 1（可能在您的 GetActivity() 函数中）以防止进一步加载。

**进一步解释：** 在 GetActivity() 函数内部更改以下内容：

```
$('div.tt').html('1');
//returns <div class="tt">1</div> 
```

到

```
$('div.tt').val(1);
//returns <div class="tt" value="1"></div> 
```

您的代码将 div 的 html 设置为 1，而您真正想要的是 value 属性等于 1，因为这是脚本在比较中检查的内容。我还注意到您也将 $('div.ttt') 设置为 1，但这将阻止脚本进一步加载。仅当满足条件并且您不再希望加载任何项目时，才应将此设置为 1。

```
$num = 6; //number of items per page
if($num == 6)
    $('div.ttt').val(1); 
```

希望这能说明问题; 让我知道。

# regex - 匹配“word”但不匹配“word（whatever）”？

> ID：12584415
> 
> 赞同：-1
> 
> 时间：2012-09-25T13:52:33.167
> 
> 标签：regex

我有一个字符串，它可以是“单词”或“单词（某物）”。我怎样才能只匹配“单词”，而不匹配“单词（某物）”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T13:54:23.290

根据正则表达式的风格，您可能可以使用负前瞻。像这样：

```
word(?! \(something\)) 
```

只需检查以确保在匹配的单词之后没有空格和单词 something 。

哦，如果你在字符串中只有单词“word”，你可以这样做：

```
^word$ 
```

这确保这`word`是字符串的开始`(^)`和结束`($)`。

但是如果你在字符串中只有单词“word”，你就可以做到

```
wordString == "word"; // or wordVariable in place of "word", or whatever 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:57:17.710

你可以使用`^word$`.

这里 ^ 符号表示字符串的开头，$ 表示字符串的结尾

所以它只会匹配“单词”..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:55:17.577

从python手册：

`(?!...)`

这是一个否定的前瞻断言。如果`...`不匹配下一个字符集，则匹配字符。

例如，`Isaac (?!Asimov)`仅当后面没有“Asimov”时才会匹配“Isaac”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:01:28.467

从您不想在标题和实际问题中以不同方式匹配的字符串这一事实来看，我假设您不是指文字字符串“whatever”和“something”。

如果您使用的是支持负前瞻的正则表达式风格，这应该可以工作：

```
word(?! \([^)]*\)) 
```

# winforms - 如何为具有 EF 数据源的多个报表重用一个 ReportViewer 控件？

> ID：12584419
> 
> 赞同：7
> 
> 时间：2012-09-25T13:52:47.360
> 
> 标签：winforms, reportviewer, rdlc

我想坚持使用一个单一的表单和`ReportViewer`控件，并在运行时分配各种报告和数据源。快速谷歌检查所揭示的多样化和复杂的解决方案促使我宁愿在这里问。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T03:33:32.540

您将需要一个具有 ReportViewer 控件、RDLC 报告和数据源的表单；可能有几种实现方式，但是您可以有一个“报告管理器”类公开方法，每个方法都显示一个特定的报告（例如`ShowOrdersReport()`，`ShowTimeSheetReport()`等） - 或者您可以定义一个基`ReportBase`类，其`Show()`方法实现提示需要时的参数......无论什么工作，它基本上可以归结为：

```
var reportForm = new ReportViewerForm(); // instantiate the form
// load the report definition into the viewer:
reportForm.reportViewer1.LocalReport.ReportEmbeddedResource = "Namespace.Report.rdlc";

// loading the data works great with a DataSet:
var data = _reportingDataSet.Tables[0];
// create the ReportDataSource with the report data:
var reportDataSource = new ReportDataSource("rdsReportDataSource", data);

reportForm.ShowReport(new[] { reportDataSource }); 
```

在这里，您将要注入`_reportingDataSet`依赖项；如果您使用参数化存储过程，您将需要在填充数据集之前提示输入报告参数。

该`ShowReport()`方法将数据源添加到`LocalReport.DataSources`，然后调用`RefreshReport()`它来显示您指定的报告。

```
public void ShowReport(IEnumerable<ReportDataSource> dataSources)
{
    foreach (var dataSource in dataSources) 
        reportViewer1.LocalReport.DataSources.Add(dataSource);

    reportViewer1.RefreshReport();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T10:49:35.800

如果您使用的是 Crystal 报表，则在单击加载报表按钮 CrystalReportViewer.ReportSource = ReportName 时使用它

如果您使用的是 MS ReportViewer 控件，则需要两个重要步骤来显示报告

1.  将报告文件路径分配给 ReportViewer
2.  设置数据源

因此，例如名为 reportViewer1 的 ReportViewer 控件需要显示 SomeReport.rdlc 文件，然后需要以下代码（假设单击按钮）

```
this.reportViewer1.LocalReport.ReportPath = @"Add absolute path of rdlc file"//e.g. @"C:\SomeReport.rdlc" ;
this.reportViewer1.RefreshReport(); 
```

这只是一个简单的示例，为简单起见，如果您需要显示数据库中的数据，只需在调用 RefreshReport 之前分配数据源属性，例如

```
this.reportViewer1.LocalReport.DataSources.Add(MyreportDataSource); 
```

其中 MyreportDataSource 是 ReportDataSource 类型的对象，您可以轻松地将任何 ADO.net DataTable 转换为 ReportDataSource 对象。

我希望这些信息对您有所帮助，如果您想查看更多详细信息，您可以在此位置参考一篇非常好的文章

[http://www.c-sharpcorner.com/UploadFile/robo60/StandaloneRDLCReports11142007183516PM/StandaloneRDLCReports.aspx](http://www.c-sharpcorner.com/UploadFile/robo60/StandaloneRDLCReports11142007183516PM/StandaloneRDLCReports.aspx)

# graphics - OpenGL (ES): Efficiently get vertex data from texture

> ID：12584421
> 
> 赞同：1
> 
> 时间：2012-09-25T13:52:53.160
> 
> 标签：graphics, opengl-es, gpu, gpgpu

I have an OpenGL texture that I generate through a couple of render passes in my FBO.
Now I want to use the texture as vertex data in a VBO and render stuff with it.
Since all data is GPU-sided, is there an efficient way to transfer (or re-interpret) texture data as vertex data in OpenGL?

Or do I have to go all the way through the CPU with

```
// ... generate texture on GPU.
glReadBuffer(..where the texture is..);
glReadPixels(..., mainMemoryBuffer);
glBufferSubData(GL_ARRAY_BUFFER, ..., mainMemoryBuffer); 
```

? Or is there another way to achieve what I want?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:19:55.587

好的。经过更多研究后，似乎 PBO（像素缓冲区对象）是启用此功能的 OpenGL 功能：

```
glBindBuffer(GL_PIXEL_PACK_BUFFER, myVbo);
glReadPixels(..., 0); 
```

不幸的是，它们似乎在 OpenGL ES 上不可用（[请参阅 GameDevelopment 上的这个线程](https://gamedev.stackexchange.com/questions/29427/can-i-use-pbos-for-textures-in-ios)）。

# r - R中具有共享参数的多个公式

> ID：12584423
> 
> 赞同：8
> 
> 时间：2012-09-25T13:52:54.213
> 
> 标签：r, formulas

我们正在尝试为 R 函数提供一种方法来处理具有多个响应、多个解释变量以及响应之间可能共享参数的模型。例如：

```
Y1 ~ X1 + X2 + X3
Y2 ~ X3 + X4 
```

指定两个响应和四个解释变量。X3 出现在两者中，我们希望用户控制关联的参数值是相同还是不同。IE：

```
Y1 = b1 X1 + b2 X2 + b3 X3
Y2 = b3 X3 + b4 X4 
```

这是一个具有四个“b”参数的模型，或者

```
Y1 = b1 X1 + b2 X2 + b3 X3
Y2 = b4 X3 + b5 X4 
```

具有五个参数的模型。

两种可能：

*   在一个公式中指定所有解释变量，并为解释提供一个矩阵映射响应。在这种情况下

`Foo( Y1+Y2 ~ X1 + X2 + X3 + X4 + X5, map=cbind(c(1,1,1,0),c(0,0,1,1)))`

将对应于第一种情况，并且

```
Foo( Y1+Y2 ~ X1 + X2 + X3 + X4 + X5, map=cbind(c(1,1,1,0,0),c(0,0,0,1,1))) 
```

将是第二个。显然需要对 LHS 进行一些解析，或者它可能是`cbind(Y1,Y2)`. 这种表示法的优点是每个参数可能还需要其他信息 - 起始值，先验等 - 并且排序由公式中的排序给出。

*   有多个公式和一个分组函数，它只添加一个属性，以便可以识别共享参数 - 这两个示例变为：

`Foo( Y1 ~ X1+X2+G(X3,1), Y2 ~ G(X3,1)+X4)`

其中 X3 参数在公式之间共享，并且

`Foo( Y1 ~ X1+X2+X3, Y2 ~ X3+X4)`

它具有独立的参数。的第二个参数`G()`是一个分组 ID，它赋予了灵活共享模型参数的能力。

该功能的进一步解释`G`如下所示：

```
Foo( Y1 + X1+X2+G(X3,1), Y2~G(X3,1)+G(X4,2), Y3~G(X3,3)+G(X4,2), Y4~G(X3,3)) 
```

将是一个模型，其中：

```
Y1 = b1 X1 + b2 X2 + b3 X3
Y2 = b3 X3 + b4 X4
Y3 = b5 X3 + b4 X4
Y4 = b5 X3 
```

其中 X3 有两个独立的参数（G(X3,1) 和 G(X3,3)）。如何处理引用不同解释变量的组是一个悬而未决的问题 - 假设模型有`Y4~G(X3,2)`- 这似乎暗示了不同解释变量之间的共享参数，因为那里有一个`G(X4,2)`。

这个符号对用户来说似乎更容易理解，但是如果你还必须指定起始值，那么起始值向量和它们对应的参数之间的映射就不​​再明显了。我怀疑在内部我们必须从`G()`符号计算映射矩阵。

可能有更好的方法可以做到这一点，所以我的问题是......有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:20:14.357

有趣的问题（我希望所有软件包作者提前更多地担心他们将如何创建基本 Wilkinson-Rogers 公式符号的扩展......）

像这样的东西怎么样

```
formula=list(Y1~X1+X2+X3,Y2~X3+X4,Y3~X3+X4,Y4~X3),
   shared=list(Y1+Y2~X3,Y2+Y3~X4,Y3+Y4~X3) 
```

或者类似你上面的第二个例子的东西？

该`formula`组件给出方程列表。

该`shared`组件仅列出哪些响应变量与指定的预测变量共享相同的参数。它显然可以映射到逻辑表或二进制表中，但是（至少对我来说——这肯定是旁观者的眼中）它更直接。我认为`map`当（在这种情况下）变量（例如`X3`）在两组不同的关系中共享时，上述解决方案很尴尬。

我猜想一些简单的规则，比如“按照参数出现在公式列表中的顺序开始值”——在这种情况下

```
X1, X2, X3(1), X4, X3(2) 
```

没问题，但是提供一个辅助函数可能会很好，它可以告诉用户给定`formula`/`shared`规范的系数向量的名称（即顺序）......

从一些个人经验来看，我会说在公式本身中嵌入更多的花哨会导致痛苦......例如，单独指定随机效果的原始语法比带有随机效果的新式语法`nlme`更容易处理`lme4`和固定效应混合在同一个公式中......

另一种选择（我也不喜欢）是

```
 formula=list(Y1~X1+X2+X3,Y2~X3+X4,Y3~X3[2]+X4,Y4~X3[2]) 
```

其中新参数由某种标签指示（`[1]`隐含）。

另请注意@Andrie 来自聊天室的建议，即为结构方程建模 ( `sem`,`lavaan`包) 设计的界面可能是有用的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:16:34.040

在您提出的两种方法中，第二种具有几个公式的想法看起来更自然，但`G`符号对我来说毫无意义。

第一个更容易理解，但我对这个`map`论点有两个建议的调整。

1.  它应该真正采用逻辑值而不是数字。

2.  考虑默认包含每个响应变量的所有自变量。

# asp.net - ASP.NET：单击复选框后如何导航到页面？

> ID：12584425
> 
> 赞同：0
> 
> 时间：2012-09-25T13:52:54.073
> 
> 标签：asp.net, vb.net, checkbox, autopostback

我有一些`checkboxes`，`dropdownlist`当值发生变化时，我想在传递新值的同时刷新页面。我尝试使用`autopostback`；但是，该值之前已经在 url 中，因此当回发发生时，该值永远不会改变。

例子：

`CurrentPage: page.aspx?tab=Home&checkbox=True`

然后我取消选中复选框，所以我希望它转到下一页...

`IntendedPage: page.aspx?tab=Home&checkbox=False`

但相反，我自动回发给了我这个页面......

`DestinationPage: page.aspx?tab=Home&checkbox=True`

因为，我通过页面上的一个函数来处理 url 的构建。也许我在这一点上做错了什么。如果是这样，我很乐意纠正我当前的设置。我想我需要知道的是如何在 checkbox.checkchanged 事件上加载自定义 URL。我希望这是有道理的，如果不让我知道，我会尝试澄清它。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:05:00.897

你可以尝试这样的事情（我没有测试过，这只是一个想法）。

```
 protected void CheckBox1_CheckedChanged ( object sender, EventArgs e )
    {
        string url = "page.aspx?tab=Home&checkbox="+ CheckBox1.Checked.ToString();
        Response.Redirect ( url );
    } 
```

然后在页面上：

```
<asp:CheckBox ID="CheckBox1" runat="server" 
oncheckedchanged="CheckBox1_CheckedChanged" /> 
```

**VB.NET 转换**

```
Protected Sub CheckBox1_CheckedChanged(sender As Object, e As System.EventArgs) Handles CheckBox1.CheckedChanged
       Dim url = "page.aspx?tab=Home&checkbox=" & CheckBox1.Checked.ToString()
       Response.Redirect(url)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:59:55.270

此行为是由[viewstate](http://msdn.microsoft.com/en-us/library/ms972976.aspx)引起的。使用`checkbox`它来持久化它的属性，尤其是`checked`属性。

实际上，控件和查询字符串之间没有开箱即用的链接。

在您的情况下，您将有两种选择，具体取决于您的需要：

*   在这种情况`Checked`下，构建预期的 url，并将[`redirect`](http://msdn.microsoft.com/en-us/library/ms524309.aspx)用户带到此页面。缺点是您“松开”了视图状态，因此也松开了控件的状态。
*   而不是使用回发，使用客户端脚本（jQuery 是你的朋友）来隐藏/显示页面的某些部分。如果 url 很重要，请在 url 中使用 #，因为它确实允许停留在同一页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:26:23.630

这很容易通过 javascript 完成。首先添加`onclick="checkCheckBox(this);"`到您的复选框。

```
<script language = "javascript" type="text/javascript"> 
function checkCheckBox(checkbox) {
        if (checkbox.checked) {
            window.location.href = '../page.aspx?tab=Home&checkbox=True';
        }
        else {
            window.location.href = '../page.aspx?tab=Home&checkbox=False';
        }
    }
</script> 
```

这应该很容易做到。

# eclipse - How to uninstall a Mylyn connector not working

> ID：12584427
> 
> 赞同：0
> 
> 时间：2012-09-25T13:53:06.367
> 
> 标签：eclipse, bitbucket, mylyn, connector

I recently updated my Eclipse to Juno release. I had a working Mylyn Connector for Bitbucket installed and it worked in Helios. After the upgrade the Bitbucket repository is gone and when I try to add a new repository for Bitbucket no connector is available. Trying to install the connector from Bitbucket, Eclipse tells me it is already installed. When viewing the all installed software I see Mylyn Bitbucket Connector but the Uninstall button is disabled.

As far as I know it is not the preferred solution to remove files from plugins/ or features/ directory.

How can I uninstall this Mylyn Connector?

I'm running 32-bit Eclipse Java EE on Win7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:20:54.790

这不再是一个问题。我的 Juno 安装（继续）有很大的不一致，但在一对一的更新更新后，我让它再次工作。

# c++ - Qt 中的信息提示

> ID：12584428
> 
> 赞同：2
> 
> 时间：2012-09-25T13:53:11.843
> 
> 标签：c++, qt

我有一个显示设置的对话框。对话框右上角还有一个帮助按钮。

![在此处输入图像描述](../Images/5a7ef5ee5553f58c55dd7f8dca4b01d8.png)

按下此按钮并选择对话框上的任何控件后，未显示任何帮助提示。
如何添加这些提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:56:14.787

这大概是[`QWidget::setWhatsThis`](http://qt-project.org/doc/qt-4.8/qwidget.html#whatsThis-prop)。您可以将它与您想要解释的控件一起使用（即用户在单击`?`按钮后单击的控件）。

```
emailTextEdit->setWhatsThis(tr("The receipt will be sent to this e-mail address.")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:57:12.133

您正在寻找[QWhatsThis](http://qt-project.org/doc/qt-4.8/qwhatsthis.html)。

如文档中所述，QWhatsThis 类*“提供了任何小部件的简单描述，即回答问题“这是什么？”。*

本质上是“这是什么？” 是一种用户可以进入的模式，在该模式中，显示有关小部件/其具有焦点的操作的信息。可以通过按 shift+F1 或通过您在问题中说明的问号图标进入此模式。调用`QWhatsThis::enterWhatsThisMode()`将具有相同的结果。

要进行设置，您可以使用 QWidget 的[setWhatsThis(const QString &)](http://qt-project.org/doc/qt-4.8/qwidget.html#whatsThis-prop)、QAction 的[setWhatsThis(const QString & what)](http://qt-project.org/doc/qt-4.8/qaction.html#whatsThis-prop)，甚至使用 QWhatsThis 的[createAction(QObject * parent)](http://qt-project.org/doc/qt-4.8/qwhatsthis.html#createAction)为您设置操作。

# vb.net - How can I use a DLL from one project in a second project in Visual Studio 2010 using vb.net

> ID：12584429
> 
> 赞同：0
> 
> 时间：2012-09-25T13:53:18.533
> 
> 标签：vb.net, visual-studio-2010

I am working with Visual Studio 2010 on a Windows 7 64-bit system. I am coding in vb.net. I am trying to use the SpreadsheetGear DLL (D:\VS2010Code\Report Depository\Bin\SpreadsheetGear.dll) in my DashInApps (D:\TWhitsett\DashInApps) project to load my output data to Excel. Can someone assist and guide me in the right direction to get this done?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:57:29.800

右键单击您的项目，然后单击“添加引用”。然后指向有问题的SpreadsheetGear DLL。你不能只把它放在 bin 目录中，并期望它在不先将其加载到项目中的情况下工作。

# javascript - jQuery Facebox in Firefox

> ID：12584436
> 
> 赞同：1
> 
> 时间：2012-09-25T13:53:40.847
> 
> 标签：javascript, jquery, html

Sorry bad english. I'm working with jQuery Facebox. I have a `<div>` refreshed by `.load()`, and every time the `.load()` works in a loop, I do a new search for the `a[rel*=facebox]`. That's my source code:

```
setInterval(function() {
    $("#upfileslist").load("upfileslist.php", function() {
         $('a[rel*=facebox]').facebox({
            loadingImage : 'images/loading.gif',
            closeImage   : 'images/closelabel.png'
          });
    }
    );
}, 5000); 
```

Aren't only links from the "upfileslist" div that are used Facebok.

In Google Chrome, that's working fine, but in Mozilla Firefox, the Facebox start appearing, and then, the page is refreshed and the target is loaded in full window, instead of in the Facebox box. This error appears:

> Time: 25/09/2012 10:50:13
> 
> Error: TypeError: $("a[rel*=facebox]").facebox is not a function
> 
> File: [http://my_js_file.js](http://my_js_file.js)
> 
> Line: 9 (closeImage : 'images/closelabel.png')

Thanks.

# javascript - 链接中的 html 语法中的 Javascript

> ID：12584438
> 
> 赞同：0
> 
> 时间：2012-09-25T13:53:41.810
> 
> 标签：javascript

我在 html 链接中添加 js 变量时遇到问题，我认为我的语法错误，因为它没有将变量的内容添加到链接字符串中。

这是我正在尝试的：

```
href="http://www.facebook.com/sharer.php?u='+url+'"> 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:56:29.607

这是不可能的:)。您必须一直使用javascript，例如：

```
href="javascript: document.location='http://www.facebook.com/sharer.php?u=' + url;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:57:07.297

您正试图将 HTML 视为 JavaScript。你不能只是跳进跳出两种语言。

如果要修改现有链接，则需要使用 DOM Manipulation。这是W3C 托管的[JavaScript 简介的一部分。](http://www.w3.org/wiki/Web_Standards_Curriculum#JavaScript_core_skills)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:57:27.733

你不能那样做。您将需要像这样使用javascript：

...在`<head>`标签内...

```
<script type="text/javascript">
window.onload = function() {
    document.getElementById('myLink').href = "http://www.facebook.com/sharer.php?u="+url;
}
</script> 
```

...在`<body>`标签内...

```
<a id="myLink" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:58:02.723

您需要在字符串之外才能连接您的 URL。

在这种情况下，您的字符串是使用双引号创建的，但是您试图通过使用单引号来打破字符串。

我在这里假设 html 是一个 Javascript 变量，它可能不是：

```
var href = "http://www.facebook.com/sharer.php?u=" + url + ">"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T13:58:29.167

```
document.ready(function(){
  var url = "yahoo.com" ; 
   $("#linkid").setAttribute("href",url) ;
}) ; 
```

当浏览器加载所有元素时， `document.ready`执行设置锚标记的 href 属性的方法。

所以你有一个像这样的锚标签：

```
<a id="linkid"/> 
```

`$("#linkid")`获取锚标记元素，而 setAttribute("href", url) 将链接设置为您的 href 属性。希望这是有道理的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T14:00:43.380

我不认为你可以像这样在 href 中添加一个 javascript 变量。试试这个：

```
<a href="javascript:void(0);" onclick="window.location.href = 'http://www.facebook.com/sharer.php?u=' + url">Foo</a> 
```

# iphone - uibarbuttonitem iOs 6 横向的自定义图像

> ID：12584444
> 
> 赞同：2
> 
> 时间：2012-09-25T13:54:19.907
> 
> 标签：iphone, background, uibarbuttonitem, ios6, landscape

我使用此代码为 iOS 5 自定义我的 barbutton 并且它工作正常：

```
UIImage *barButton = [[UIImage imageNamed:@"bar-button"] resizableImageWithCapInsets:UIEdgeInsetsMake(5, 5, 5, 5)];
[[UIBarButtonItem appearance] setBackgroundImage:barButton forState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault]; 
```

当我在 iOS 5 上将设备旋转到横向时，结果是这样的：

![在此处输入图像描述](../Images/525d062b02fc5912a5d57fde28cb50bd.png)

现在有了 iOs 6，结果是这样的：

![在此处输入图像描述](../Images/4fe7f85e19e5c3b7df60d45191d77d63.png)

当设备处于横向时发生了什么以及我必须做什么才能正确调整图像大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:27:15.377

您应该提供一个横向图像并像这样使用它：

```
UIImage *barButton = [[UIImage imageNamed:@"bar-button"] resizableImageWithCapInsets:UIEdgeInsetsMake(5, 5, 5, 5)];
UIImage *barButton_land = [[UIImage imageNamed:@"bar-button_land"] resizableImageWithCapInsets:UIEdgeInsetsMake(5, 5, 5, 5)];
[[UIBarButtonItem appearance] setBackgroundImage:barButton forState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault];
[[UIBarButtonItem appearance] setBackgroundImage:barButton_land forState:UIControlStateNormal
                                      barMetrics:UIBarMetricsLandscapePhone]; 
```

# iphone - 你能在 MKMapView 中有 iOS 6 3D 按钮吗？

> ID：12584458
> 
> 赞同：5
> 
> 时间：2012-09-25T13:54:45.550
> 
> 标签：iphone, ios, mapkit

我正在开发一个具有地图功能的应用程序，而原生 iOS 6 地图应用程序中的 3D 内容确实让我们的 CEO 很感兴趣。

我想知道是否可以在 MKMapView 中使用该按钮，或者仍然只能在内置地图应用程序中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:37:30.830

查看[开发论坛](https://devforums.apple.com/message/689466)，Apple 员工在其中确认 MKMapView 与 iOS6 中的 Maps 应用程序不同

# django - django - markdown 标签在编辑表单中变成 html

> ID：12584461
> 
> 赞同：1
> 
> 时间：2012-09-25T13:54:57.410
> 
> 标签：django, markdown

我在我的索引页面上添加了降价过滤器，例如；

```
{% load markup %}
{{ post.body | markdown }} 
```

当我使用降价标签保存帖子时，它可以正常工作。但如果我想编辑它；它看起来不像：

```
**bold text** 
```

看起来像 ：

```
<strong>bold text</strong> 
```

在我的编辑表单中。我怎样才能解决这个问题？我所知 ; 降价必须将文本作为降价代码保存到数据库中。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:55:41.710

你需要[安全](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#std%3atemplatefilter-safe)过滤器

```
{{ post.body | markdown|safe }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T05:25:09.477

使用安全过滤器，使其不会逃逸

```
{{ post.body | markdown |safe }} 
```

# python - 在 Vim 中粘贴时如何维护选项卡

> ID：12584465
> 
> 赞同：11
> 
> 时间：2012-09-25T13:55:13.523
> 
> 标签：python, vim, copy-paste, vi

我使用 tab 键在 Vim 中缩进我的 python 代码，但是每当我复制和粘贴一个块时，Vim 都会用 4 个空格替换每个 tab，这会引发`IndentationError`

我尝试`:set paste`按照相关问题中的建议进行设置，但没有区别

其他网站建议粘贴“无表格”代码并使用可视化编辑器重新缩进，但这在涉及大块时会带来麻烦

是否有任何设置可以应用于 vim 以维护复制/粘贴选项卡？

感谢您对此的任何帮助:)

**编辑：**

我正在使用标准的 gnome 终端技术（ctrl+shift+c / 鼠标等）在 vim 中复制和粘贴

我的 .vimrc 是：

```
syntax on
set ts=4
if has("terminfo")
let &t_Co=8
let &t_Sf="\e[3%p1%dm"
let &t_Sb="\e[4%p1%dm"
else
let &t_Co=8
let &t_Sf="\e[3%dm"
let &t_Sb="\e[4%dm"
endif 
```

我查了一下 ts -> 将制表位设置为 n 以进行文本输入，但不知道什么值会保持制表符

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T15:05:59.580

查看`:h tabstop`所有选项以及它们如何相互作用。

如果您更喜欢标签，这些是很好的设置：

```
set tabstop=4
set shiftwidth=4
set noexpandtab 
```

使用这些设置，您点击`<Tab>`并获得`<Tab>`.

如果您更喜欢空格，这些是很好的设置：

```
set tabstop=4
set shiftwidth=4
set expandtab 
```

使用这些设置，您点击`<Tab>`并获得`<Space><Space><Space><Space>`.

无论您选择什么，都不应使用终端键绑定进行复制/粘贴。在 Vim 中，你应该用or来“拉”`y`和“放” ；可选地使用特定的寄存器，例如/来拉动/放入/从系统剪贴板的内容中提取/粘贴或/拉动/粘贴到/从系统剪贴板中（如果您的 Vim 是使用剪贴板支持构建的）。`p``P``"ay``"ap``@a``"+y``"+p`

作为旁注，您应该使用设置的长格式名称，因为它们比短名称更具可读性。你未来的自己会感谢你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T16:36:47.447

[罗马人说什么](https://stackoverflow.com/a/12585831/395321)。此外，还有一些我觉得有用的其他设置。这是我的 .vimrc 的摘录：

```
set autoindent " always set autoindenting on"
set smartindent " use smart indent if there is no indent file"
set tabstop=4 " <tab> inserts 4 spaces"
set softtabstop=4 " <BS> over an autoindent deletes 4 spaces."
set smarttab " Handle tabs more intelligently"
set expandtab " Use spaces, not tabs, for autoindent/tab key."
set shiftwidth=4 " an indent level is 4 spaces wide."
set shiftround " rounds indent to a multiple of shiftwidth" 
```

在 vim 中，输入`:h <setting>`这些设置以了解更多关于它们的作用，

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-24T17:23:15.387

我正在单击鼠标中键粘贴到终端 vim 实例中。我的 vimrc 中有这个：

```
set tabstop=2           " (ts)
set softtabstop=2       " (sts) Turned off with 0
set shiftwidth=2        " (sw)  Used for autoindent, and << and >>
set expandtab           " (et)  Expand tabs to spaces 
```

我跑了

```
:set paste
:set noexpandtab 
```

vim 保留了源文本中的选项卡。在不覆盖我的`expandtab`设置的情况下，vim 会自动扩展源文本中的选项卡。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T15:46:14.973

首先，确保您的缩进设置代表您喜欢的样式，正如 romainl 在他的回答中所显示的那样。

如果您必须从 Vim 外部粘贴代码（例如从另一个终端选择），该`:retab!`命令可以将空格固定到 Tabs；对于粘贴的文本，具有适当范围的完整命令将是

```
:'[,']retab! 
```

或者，您可以尝试使用命令进行粘贴，该`"*]p`命令会自动使缩进适应光标位置（请参阅 参考资料`:help ]p`）。

# jquery - JQUERY 幻灯片缩略图显示活动状态

> ID：12584468
> 
> 赞同：0
> 
> 时间：2012-09-25T13:55:22.727
> 
> 标签：jquery, slideshow, thumbnails

我希望有人可以帮助我解决缩略图上的“活动”状态，这将显示当前选择的背景图像。请访问 www.shahidmirzadesign.co.uk/crystal/ 获取测试链接，供您使用的 jsfiddle 在这里：

[http://jsfiddle.net/AE3Zx/1/](http://jsfiddle.net/AE3Zx/1/)

我想要的是从白色到红色的微妙背景颜色变化。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:03:01.247

您可以在点击事件的回调函数中添加以下行

```
$this.parent().css({backgroundColor: '#f1342c'}).siblings('li.thumbs').css({backgroundColor: 'rgb(255, 255, 255)'}); 
```

上述行将选中被点击图片的父级（即`li`元素）将背景颜色更改为红色，并选择与选择器匹配的兄弟姐妹（即`li`具有 class 的元素`thumbs`）并将所选兄弟姐妹的背景颜色更改为白色。

见[Jsfiddle](http://jsfiddle.net/AE3Zx/2/)

# c# - linq 状态必须返回不同的

> ID：12584470
> 
> 赞同：0
> 
> 时间：2012-09-25T13:55:26.587
> 
> 标签：c#, .net, linq

我有一个与此类似的数据库表。

**身份证**| **状态**| **类型**

![](../Images/22f87c768d09cac524f0e787cc6d7452.png)

等等……等等

我正在使用 linq 尝试从这个集合中辨别不同的状态，就像这样

```
results = ctx.Status.Distinct(new StatusComparer()).ToList(); 
```

但这会返回所有状态，我使用以下[链接](http://msdn.microsoft.com/en-us/library/bb338049.aspx)构建下面的比较器，我在另一个 StackOverflow[帖子中找到了该建议](https://stackoverflow.com/questions/998066/linq-distinct-values?rq=1)

```
 public class StatusComparer : IEqualityComparer<Status>
{
    public bool Equals(Status x, Status y)
    {
        // Check whether the compared objects reference the same data. 
        if (ReferenceEquals(x, y))
        {
            return true;
        }

        // Check whether any of the compared objects is null. 
        if (ReferenceEquals(x, null) || ReferenceEquals(y, null))
        {
            return false;
        }

        // Check whether the status' properties are equal. 
        return x.StatusDescription == y.StatusDescription && x.Type == y.Type && x.StatusID == y.StatusID;
    }

    public int GetHashCode(Status status)
    {
        // Get hash code for the Name field if it is not null. 
        var hashStatusId = status.StatusID.GetHashCode();

        // Get hash code for the Code field. 
        var hashStatusDescription = status.StatusDescription.GetHashCode();

        var hashStatusType = status.Type.GetHashCode();

        // Calculate the hash code for the product. 
        return hashStatusId ^ hashStatusDescription ^ hashStatusType;
    }
}
} 
```

我的问题如下，早期我们有一个运行良好的系统，事实上他们想要另一个使用相同数据库的系统，所以我们对其进行了探测。搜索有一个高级选项，其中有几个过滤器，其中一个是状态，但是当你从上面可以看出（松散的）DB结构状态有不同的类型但相似的文本。我需要能够通过 Linq 通过不同的文本选择整个状态。所有帮助将不胜感激。

也试过

```
results = (from s in context.Status group s by s.StatusDescription into g select        g.First()).ToList(); 
```

这也因 System.NotSupportedException 而失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:59:29.963

要选择所有不同的状态：

```
ctx.Status.Select(s => new { s.StatusDescription, s.Type }).Distinct(); 
```

# iphone - 在对象上找不到属性“窗口”？

> ID：12584474
> 
> 赞同：0
> 
> 时间：2012-09-25T13:55:43.350
> 
> 标签：iphone, objective-c, cocoa-touch

这出现在另一个问题中（由[meronix](https://stackoverflow.com/users/585749/meronix)友好地回答），但我很想了解更多关于这里发生的事情，这是一个 LLVM/Clang 问题，还是这两个陈述在某种程度上不同。

![在此处输入图像描述](../Images/6dfa0a6d4ecd5161b6da9c346d2f2b51.png)

我知道我可以通过添加（见下文）来解决这个问题，所以比什么都好奇......

![在此处输入图像描述](../Images/c50b838be6ad7fae0199624009769c30.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:05:16.590

两种说法*不同*。只有当左值的类型声明了属性时，才能使用属性。这是因为属性的 getter 和 setter 可能不明显（通常是布尔属性的情况，其中 getter 显式设置为`isSomething`。）如果没有强类型信息，编译器无法推断出这一点。

然而`[lvalue message]`，语法没有这种歧义，因此编译器允许它。由于左值的类型是`id`，任何已知消息都可以发送给它而不会发出编译器警告。编译器只会在两个签名对应于同一个选择器时发出警告（例如，一个类 has`- (UIWindow *)window`和另一个 has `- (int)window`。）

该`UIApplicationDelegate`协议定义了一个`window`属性，因此当您将对象显式键入为`id <UIApplicationDelegate>`时，编译器会知道该属性并可以使用它。

# java - JNA long 返回值在 32 位和 64 位中不同

> ID：12584475
> 
> 赞同：0
> 
> 时间：2012-09-25T13:55:45.363
> 
> 标签：java, jna

我在我的项目中使用 JNA 从 Windows 中的 C 函数接收长值。

方法是：

```
long identifier(); 
```

当我在 64 位上使用我的虚拟机（Windows 64 的 JRE 1.7.0_05）时，我将编译后的 dll 用于 64 位，我得到了这个数字：

```
identifier = 528913750 
```

如果我使用带有 32 位编译 dll 的虚拟机（Windows 32 的 JRE 1.7.0_07），我得到这个数字：

```
identifier = 369896101206 
```

正确的是第一个！（对于 64 位）

它们的二进制值为：

```
64 bits =           11111100001101001010101010110
32 bits = 101011000011111100001101001010101010110 
```

有人知道为什么我一开始就得到这个 1010110 的 32 位吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:14:44.700

在[Wikipedia](http://en.wikipedia.org/wiki/Java_Native_Access#Mapping_types)中有一个表描述了 JNA 中本机类型的映射。直接转换为 long 仅支持 64 位，否则必须使用[NativeLong 。](http://jna.java.net/javadoc/com/sun/jna/NativeLong.html)

在这篇[文章](http://www.360doc.com/content/10/0405/14/1140236_21681987.shtml)中还介绍了如何映射一个native long。

# c - 通过切片一大块 malloc 的内存来减少 malloc 调用

> ID：12584480
> 
> 赞同：4
> 
> 时间：2012-09-25T13:56:09.027
> 
> 标签：c, memory, malloc, dynamic-allocation

首先，[这](https://stackoverflow.com/questions/2079151/minimizing-the-amount-of-malloc-calls-improves-performance)是我得到这个想法的地方：

> 我曾经写过一个应用程序，它使用了大量的小内存块，每个内存块都用 malloc() 分配。它工作正常，但速度很慢。我只用一个替换了对 malloc 的许多调用，然后在我的应用程序中分割了那个大块。它要快得多。

我正在分析我的应用程序，当我减少 malloc 调用的数量时，我得到了意想不到的良好性能提升。不过，我仍在分配相同数量的内存。

所以，我想做这个人所做的事情，但我不确定最好的方法是什么。

**我的想法：**

```
// static global variables
static void * memoryForStruct1 = malloc(sizeof(Struct1) * 10000);
int struct1Index = 0;
...
// somewhere, I need memory, fast:
Struct1* data = memoryForStruct1[struct1Index++];
...
// done with data:
--struct1Index; 
```

**陷阱：**

*   我必须确保我不超过10000
*   我必须按照我占用的顺序释放内存。（在我的情况下不是主要问题，因为我使用的是递归，但如果可能的话我想避免它）。

* * *

**灵感来自 Mihai Maruseac：**

首先，我创建了一个链表，`int`它基本上告诉我哪些内存索引是空闲的。然后我在我的结构中添加了一个名为的属性，`int memoryIndex`它可以帮助我以任何顺序返回占用的内存。幸运的是，我确信我的内存需求在任何时候都不会超过 5 MB，因此我可以安全地分配这么多内存。解决了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:03:44.710

给你内存的系统调用是`brk`. 通常的and`malloc`函数只使用 给出的空间。当那个空间不够用时，就会制造另一个空间来创造新的空间。通常，空间会增加虚拟内存页面的大小。`calloc``realloc``brk``brk`

因此，如果你真的想要一个预制的对象池，那么请确保以页面大小的倍数分配内存。例如，您可以创建一个`4KB`. `8KB`， ... 空间。

下一个想法，看看你的对象。其中一些具有一种尺寸，一些具有其他尺寸。从同一个池中处理所有它们的分配将是一个很大的痛苦。为各种大小的对象创建池（最好是 2 的幂）并从中分配。例如，如果你有一个大小的对象，你会从池中`34B`为它分配空间。`64B`

最后，剩余的空间可以不使用，也可以向下移动到其他池中。在上面的例子中，你已经`30B`离开了。您将其拆分为`16B`、和块`8B`，并将每个块添加到各自的池中。`4B``2B`

因此，您将使用链表来管理预先分配的空间。这意味着您的应用程序将使用比实际需要更多的内存，但如果这真的对您有帮助，为什么不呢？

基本上，我所描述的是来自 Linux 内核的[伙伴分配器](http://en.wikipedia.org/wiki/Buddy_memory_allocation)和[平板分配器之间的混合。](http://en.wikipedia.org/wiki/Slab_allocation)

**编辑**：阅读您的评论后，很容易分配一个大区域`malloc(BIG_SPACE)`并将其用作您的内存池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:06:05.257

如果可以，请查看使用具有支持此功能的[内存切片 API的](http://developer.gnome.org/glib/stable/glib-Memory-Slices.html)[glib 。](http://developer.gnome.org/glib/stable/)它非常易于使用，并且使您不必重新实现它。

# javascript - 点击时使用jquery简单淡入淡出div

> ID：12584481
> 
> 赞同：12
> 
> 时间：2012-09-25T13:56:10.620
> 
> 标签：javascript, jquery, hide, fade

此代码在此处有效，您可以在此处阅读答案-我对其进行编辑以供将来参考。

**HTML**：

```
<div><a href="#" id="btn">Show bank div and hide fancy div</a></div>
<div id="btn-bk"><a href="#">back</a></div>
<div id="bank">Bank Div</div>
<div id="fancy">Fancy Div</div> 
```

**CSS**：

```
#bank {display:none;}
#btn-bk {display:none;} 
```

**Javascript**：

```
 $('#btn').click(function(e){    
    $('#fancy, #btn').fadeOut('slow', function(){
        $('#bank, #btn-bk').fadeIn('slow');
    });
});

    $('#btn-bk').click(function(e){    
        $('#bank, #btn-bk').fadeOut('slow', function(){
            $('#fancy, #btn').fadeIn('slow');
        });
    }); 
```

[有效的现场演示](http://jsfiddle.net/3XwZv/71/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T14:01:08.777

您的问题在于这行代码：

```
$('#bank').replace('<div id="fancy"></div>').fadeIn('slow'); 
```

jQuery 中没有 .replace() 函数。删除它，它的工作原理：

```
$('#bank').fadeIn('slow'); 
```

在这里看到它：http: [//jsfiddle.net/3XwZv/57/](http://jsfiddle.net/3XwZv/57/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:03:55.343

使用以下 jQuery 代码：

```
$('#btn').click(function(e){    
    $('#fancy').fadeOut('slow', function(){
        $('#bank').fadeIn('slow');
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T14:08:12.633

您应该使用 html() 而不是 replace()。此外，假设您想用以下 html 替换您的银行 div：

```
<div id="fancy"></div> 
```

尝试这个

```
$('#btn').click(function(e){    
    $('#fancy').fadeOut('slow', function(){
        $('#bank').html('<div id="fancy"></div>').fadeIn('slow');
    });
}); 
```

# c# - Bloomberg API - 使用 .Net API 获取底层证券的 FUT_CHAIN

> ID：12584483
> 
> 赞同：2
> 
> 时间：2012-09-25T13:56:17.173
> 
> 标签：c#, .net, bloomberg

我正在尝试查询 Bloomberg API (.Net) 以获取底层安全性的未来链。最好，我将能够获得过去给定日期的期货列表。

Excel 中使用工作表公式 API 的等效操作如下：-

```
=BDS("ERA COMDTY","FUT_CHAIN","CHAIN_DATE=20120103",
    "INCLUDE_EXPIRED_CONTRACTS=Yes") 
```

我查看了大量的在线资源，我似乎没有得到任何地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:23:34.863

对于 v3 API，您需要使用请求覆盖。

```
Request request = refDataService.createRequest("ReferenceDataRequest");

request.append("securities", "ERA Comdty");

request.append("fields","FUT_CHAIN");

Element overrides = request.getElement("overrides");
Element override1 = overrides.appendElement();
override1.setElement("fieldId", "CHAIN_DATE");
override1.setElement("value", "20120103");
Element override2 = overrides.appendElement();
override2.setElement("fieldId", "INCLUDE_EXPIRED_CONTRACTS);
verride2.setElement("value", 'Y');

session.sendRequest(request); 
```

# javascript - json_encode 提供 HTML 实体。如何转换匹配的 XML 约定？

> ID：12584486
> 
> 赞同：1
> 
> 时间：2012-09-25T13:56:26.953
> 
> 标签：javascript, xml, json

我开始创建一个三星电视应用程序，它运行一个非常紧凑的系统，除了 JS 和 HTML5 之外我几乎无法使用。此外，我必须向我的 Web 服务器发送一个 json 请求，以将数据下载到模拟器客户端。为了更容易地表示我的数据，我想将 json 转换为 XML。但是由于网络上有 utf-8 编码的数据，我似乎不可能自动从 json 解码并编码为 XML。

不像我读过的一些帖子和文章，json_encode 创建 HTML 实体，除了像 \uXXXXXX 这样的表示。

那么，我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:58:50.977

> json_encode 创建 HTML 实体

不，它没有。

> 除了像 \uXXXXXX 这样的表示。

这些是 JSON unicode 转义

> 那么，我能做些什么呢？

正常解析 JSON。正常生成 XML。

任何 JSON 库和任何 XML 库都应该能够处理 unicode 字符。

# java - 将超链接添加为 TableItem SWT

> ID：12584491
> 
> 赞同：0
> 
> 时间：2012-09-25T13:56:39.137
> 
> 标签：java, hyperlink, swt

如何向 SWT 表添加超链接？

我需要一个以普通 TableItem 对象作为行的表，但有时我需要在那里有一个超链接，以便有人可以单击它从应用程序级别打开链接页面。

关于如何实现这一目标的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:41:47.040

作为 sambi reddy 的答案的替代方案，您可以使用 a `StyledCellLabelProvider`（如果您切换到 a `TableViewer`）作为您的列，并使用 a`StyledString`来表示您的链接。当然，您必须自己处理鼠标事件。

这是一个例子：

```
// Column for the link
TableViewerColumn col2 = createTableViewerColumn("Link", 100, 1, viewer);
col2.setLabelProvider(new StyledCellLabelProvider() {
    @Override
    public void update(ViewerCell cell)
    {
        Object element = cell.getElement();
        if(element instanceof Person)
        {
            Person person = (Person) cell.getElement();

            /* make text look like a link */
            StyledString text = new StyledString();
            StyleRange myStyledRange = new StyleRange(0, person.getLocation().length(), Display.getCurrent().getSystemColor(SWT.COLOR_BLUE), null);
            myStyledRange.underline = true;
            text.append(person.getLocation(), StyledString.DECORATIONS_STYLER);
            cell.setText(text.toString());

            StyleRange[] range = { myStyledRange };
            cell.setStyleRanges(range);

            super.update(cell);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:20:04.797

这是我对您的问题的回答：代替 a `Button`，添加 a `Hyperlink`。

[SWT - Tableviewer 将删除按钮添加到表中的列](https://stackoverflow.com/questions/12480402/swt-tableviewer-adding-a-remove-button-to-a-column-in-the-table/12486929#12486929)

# java - 使用 tomcat7.0.30 执行 servlet 程序时出现 404 状态错误

> ID：12584493
> 
> 赞同：0
> 
> 时间：2012-09-25T13:56:45.673
> 
> 标签：java, tomcat, servlets

```
import java.io.*;  
import java.util.*;  
import javax.servlet.*;  
import javax.servlet.http.*;  

public class One extends HttpServlet  
{  
public void doGet(HttpServletRequest request,HttpServletResponse response)throws    IOException,ServletException  
{  
response.setContentType("text/html");  
PrintWriter pw= response.getWriter();  
pw.println("helloooo ORANGE");  
}  
}  

<web-app>  
<servlet>  
<servlet-name>mango</servlet-name>  
<servlet-class>One</servlet-class>  
</servlet>  

<servlet-mapping>  
<servlet-name>mango</servlet-name>    
<url-pattern>/mango</url-pattern>  
</servlet-mapping>  
</web-app> 
```

我正在使用 tomcat 7.0.30 并且我有一个错误，即`404 status error`如果我没有导入 util 包，请告诉我导入 util 包的需要是什么，因为我们没有使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:10:52.990

我想你在问两个问题。

我先回答第二个问题（“由于我们没有使用它，所以需要导入 util 包”）：没有必要。您可以删除此导入语句。

关于第二个问题（为什么你得到一个 404）：尝试刷新和关闭（这可能会刷新它） PrintWriter 因为这将提交响应。例如：

```
pw.flush();
pw.close(); 
```

这值得一试，虽然我认为 Tomcat 应该为你做这件事。

# c# - 跟踪不会关闭的 C# 控制台窗口

> ID：12584495
> 
> 赞同：1
> 
> 时间：2012-09-25T13:56:48.373
> 
> 标签：c#, console, windows-xp

好的，这是一个有点奇怪的问题，但我发现了一个类似于这些的问题：

[调试的程序窗口不会关闭](https://stackoverflow.com/questions/2275251/debugged-program-window-wont-close)

[无法在 Win XP 上杀死 cmd.exe 的实例](https://stackoverflow.com/questions/3920442/unable-to-kill-instances-of-cmd-exe-on-win-xp?lq=1)

[如何关闭从 Visual Studio 中打开的“孤立”控制台窗口？](https://stackoverflow.com/questions/3335671/how-to-close-an-orphaned-console-window-that-was-opened-from-within-visual-stu)

我最近在生产环境中发现了这个问题，奇怪的是这台机器没有安装VS，我没有调试，但行为完全一样。我发现唯一真正有效的是使用 PSKill ( [http://technet.microsoft.com/en-us/sysinternals/bb896683](http://technet.microsoft.com/en-us/sysinternals/bb896683) ) 来关闭 csrss.exe （控制所有控制台窗口）。这显然造成了崩溃，但我能够重新启动机器。我发现这特别有用，前提是这样的机器在物理上无法访问。

盒子详情如下：

Pentium 4, 1GB RAM, Windows XP SP2（请注意，这不是我理想的设置，但不是我决定的 :P）

但是，我想知道是否有办法防止这种情况再次发生。

我想强调一下，这台机器上没有安装 VS，运行的程序不是 Debug 版本，而是 Release 版本。我确实尝试了 Microsoft 的 KB 982551 修补程序，但无济于事。

该应用程序的详细信息如下：它通过命名管道打开并连接到另一个进程，然后如果通信中断或您通过 X 按钮或键入“q”关闭控制台窗口，它将关闭。显然，命名管道沿途某处掉了下来，并且应用程序保持活动状态（在任何其他情况下都不会发生，只是这个）。

你能想出一种在更容易控制的环境中跟踪/重现这种行为的方法吗？

如果您要求，我很乐意发布代码的任何部分，我现在不这样做，因为有 5 个不同的文件可以完成全部工作。

编辑：哦，我忘了告诉你，目标机器没有 KB 978037，以防你想知道。

# sql-server-2005 - 在 VB6 中动态更改 Crystal Reports 8.5 到 SQL Server 2005 的连接

> ID：12584496
> 
> 赞同：1
> 
> 时间：2012-09-25T13:56:49.090
> 
> 标签：sql-server-2005, vb6, crystal-reports-8.5

我们需要将一些 Crystal Reports 8.5 连接到 MS Windows 7 64 位下的 SQL Server 数据库。查询不是由我们应用程序的 VB6 代码处理，而是包含在报告中，到那时，我们希望避免传递从代码中提取的数据，因为我们应该深入修改所有报告。由于应用程序将安装在不同的位置，连接数据会有所不同，因此我们需要在运行时通过 vb6 代码更改此信息，以便报告指向适当的数据。这是我们使用的测试代码：

```
 Dim nTables As Integer
    Dim iCount As Integer
    Dim iRitCW As Integer

    '-----> Ritorno msgBox
    Dim RitMsg As Integer
    Dim sRitCW As String * 255

    jobnum = 0

    If PEOpenEngine() = False Then
        MsgBox "Errore Engine"
    End If

    jobnum = PEOpenPrintJob("c:\test\report1.rpt")

'Declarations
Dim logonInfo As PELogOnInfo

logonInfo.StructSize = PE_SIZEOF_LOGON_INFO
logonInfo.ServerName = "dellone\sqlexpress2005" + Chr(0)
logonInfo.DatabaseName = "TEST" + Chr(0)
logonInfo.UserID = "sa" + Chr(0)
logonInfo.Password = "sasasa_2005" + Chr(0)

If (PELogOnServer("p2smon.dll", logonInfo) = False) Then
        MsgBox "Connessione fallita", vbExclamation, NomeApplicazione
        iRitCW = PEGetErrorCode(jobnum)
        RitMsg = MsgBox("Errore n. : " + Str(iRitCW), vbExclamation, NomeApplicazione)
        End
End If

nTables = PEGetNTables(jobnum)

For iCount = 0 To nTables - 1
    If PESetNthTableLogOnInfo(jobnum, iCount, logonInfo, True) = False Then
        MsgBox "Errore : PESetNthTableLogOn", vbExclamation, NomeApplicazione
Screen.MousePointer = 0
        Exit Sub
    End If
   If (PETestNthTableConnectivity(jobnum, iCount) = False) Then
      MsgBox ("Errore nella connessione per la tabella:" & iCount)
   End If
Next iCount

      If PEOutputToPrinter(jobnum, 1) = False Then
MsgBox "Stampa del documento fallita", vbExclamation, NomeApplicazione
Screen.MousePointer = 0
Exit Sub
End If

    If PEStartPrintJob(jobnum, True) = False Then
        MsgBox "Stampa in anteprima fallita", vbExclamation, NomeApplicazione
        iRitCW = PEGetErrorCode(jobnum)
        RitMsg = MsgBox("Errore di stampa n. : " + Str(iRitCW), vbExclamation, NomeApplicazione)
        Exit Sub
    End If
Screen.MousePointer = 0 
```

通常在 PELogonServer 上报告的错误是 536，在 PEStartPrintJob 之后是 599。因此，我们询问我们用来初始化 logoninfo 数据结构的数据在语法上是否正确。如果必须以某种特定方式对 ServerName 字符串进行转义。我们要求确认我们在 PELogOnServer 函数中使用的 dll（“p2smon.dll”），而我们尝试使用“p2ssql.dll”以及任何可能有助于我们解决问题的进一步解释都没有成功。

提前致谢

# linq - 有一个清单 where rows 可以是相同的值，如何添加一个 int 以使每一行唯一？

> ID：12584497
> 
> 赞同：1
> 
> 时间：2012-09-25T13:56:51.743
> 
> 标签：linq, c#-4.0, lambda

我有一个列表，当多个项目具有相同名称时，我想在其中添加一个内部计数器。

```
var myList = new List<string>();

myList.Add("a");
myList.Add("b");
myList.Add("b");
myList.Add("c"); 
```

在一些花哨的 LINQ 东西之后，我希望结果是 a01 b01 b02 c01 。

有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:06:17.170

如果您想保留订单，在 OOTB LINQ 中没有非常好的方法可以做到这一点，但是您可以敲出类似的东西

```
public static IEnumerable<TResult> SelectWithUniquifier<TSource, TResult>(
    this IEnumerable<TSource> source, Func<TSource, int, TResult> uniquifier)
{
     Dictionary<TSource, int> counter = new Dictionary<TSource, int>();
     foreach(TSource s in source)
     {
         int thisIndex = counter.ContainsKey(s) ? counter[s] : 0;
         counter[s] = thisIndex + 1;
         yield return uniquifier(s, thisIndex);
     }
} 
```

只是有一个更好的名字。

对于您的示例，您将拥有

```
var result = myList.SelectWithUniquifier((s, i) => s + (i+1).ToString("00")); 
```

因为你得到的索引是从零开始的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:29:29.783

并不是说这很好，但它（主要是）Linq 解决方案：

```
var indexed =   from index in myList.Aggregate(
                    new 
                    { 
                        Counters = new Dictionary<string, int>(), 
                        Items = new List<string>() 
                    }, 
                    (acc, cur) => 
                    { 
                        if (!acc.Counters.ContainsKey(cur))
                            acc.Counters.Add(cur, 0);
                        acc.Counters[cur] = acc.Counters[cur] + 1;
                        acc.Items.Add(cur + acc.Counters[cur]);
                        return acc;
                    }).Items
                select index; 
```

累加部分非常难看，但它完成了工作，并且全部在 Linq 计算中。

**编辑**

如果初始列表已经排序，则此表达式更清晰（但可能效率低下，您必须查看列表中有多少项目）：

```
var indexed =   from index in myList.Aggregate(
                    new 
                    { 
                        Counter = 0, 
                        Key     = (string)null,
                        Items   = Enumerable.Empty<string>() 
                    }, 
                    (acc, cur) => 
                    {
                        var counter = acc.Key != cur ? 1 : acc.Counter+1;
                        return new 
                        { 
                            Counter = counter,
                            Key     = cur,
                            Items   = acc.Items.Concat(
                                        Enumerable.Repeat(cur + counter, 1))
                        };
                    }).Items
                select index; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:08:53.243

另一种更简单的方法：

```
 var result = myList.GroupBy(x => x)
            .SelectMany(g => g.Select((x, i) => x + (i + 1).ToString("00"))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T15:13:05.270

请参阅其他答案以了解一些花哨（而且非常令人困惑）的 LINQ 解决方案。如果您不一定需要使用 LINQ：

```
var myList = new List<string> { "a", "b", "c", "b" };

var counter = new ConcurrentDictionary<string, int>();
for (int i = 0; i < myList.Count; i++)
{
    var currVal = myList[i];
    counter.AddOrUpdate(currVal, 1, (value, count) => count + 1);
    myList[i] = currVal + counter[currVal].ToString("00");
} 
```

`ConcurrentDictionary`不需要，您可以手动执行“添加或更新”操作，具体取决于您对速度与代码清晰度的重视程度。无论哪种方式，在我看来，这是一种更具可读性和可维护性的方式来做你想做的事情。不要害怕循环。:)

当然，这可以作为扩展方法或某些实用程序类的静态方法等来完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T14:00:49.710

```
var res =
    myList
        .GroupBy(item => item)
        .Select(item => String.Format("{0}{1}", item.Key, item.Count())); 
```

# ruby-on-rails - 如何在simple_form中用div包围输入而不包围它们各自的标签（使用f.input）

> ID：12584498
> 
> 赞同：3
> 
> 时间：2012-09-25T13:56:52.803
> 
> 标签：ruby-on-rails, simple-form

我正在使用 twitter bootstrap 的自定义主题，以这种方式围绕 div 中的输入：

```
 = simple_form_for(@user_session) do |f|
      .control-group
        = f.label :username, 'Usuario', class: 'control-label'
        .controls
          = f.input_field :username 
```

我只想使用 f.input 来保存大型表单中的编码，我运行 rails generate simple_form:install 能够修改配置，目前我有：

```
 = simple_form_for(@user_session) do |f|
      = f.input :username, :label => 'Usuario' 
```

它几乎生成了我需要的所有标记（在初始化程序/simple_form 中添加相应的类）：

```
<form action="/user_sessions" class="form-horizontal new_user_session" method="post">
      ...
      <div class="control-group username">
          <label class="username control-label" for="user_session_username">Usuario</label>
          <input class="username" id="user_session_username" name="user_session[username]" size="50" type="text" />
      </div>
      ...
</form> 
```

它只需要和额外的“div”以及围绕输入标签而不是标签的类“控件”，有没有办法实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T20:15:08.880

终于找到了怎么做，以这种方式配置包装器为引导程序添加了所需的 div：

*初始化器/simple_form*

```
config.wrappers :bootstrap, :tag => 'div', :class => 'control-group', :error_class => 'error' do |b|
  b.use :html5
  b.use :placeholder
  b.use :label
  b.wrapper :tag => 'div', :class => 'controls' do |ba|
    ba.use :input
    ba.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
    ba.use :hint,  :wrap_with => { :tag => 'p', :class => 'help-block' }
  end
end

config.default_wrapper = :bootstrap 
```

在这里找到答案：http: [//blog.jamesalmond.com/using-simple-form-in-an-engine/](http://blog.jamesalmond.com/using-simple-form-in-an-engine/)

希望它可以帮助某人！再见。

# ibm-mq - WMQ 中的同步点和检查点

> ID：12584499
> 
> 赞同：0
> 
> 时间：2012-09-25T13:56:59.880
> 
> 标签：ibm-mq, mq

您能给我详细介绍一下MQ 中的**SyncPoint**和**CheckPoint吗？**这些是什么？WMQ 如何利用它们？尽可能详细。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:49:33.427

我认为*SyncPoint*[在这里](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa13440_.htm)描述得很好，*CheckPoint* [在这里](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa14540_.htm)

# php - 到 PHP 的 Javascript 函数

> ID：12584500
> 
> 赞同：0
> 
> 时间：2012-09-25T13:57:02.367
> 
> 标签：php, javascript, decode, encode

我需要在 javscript 中将密码编码为十六进制，然后在 php 中对其进行解码。我有一个函数可以做这两件事，但在 javascript 中。我试图将其转换为 php，但有一些我不知道 php 等效的 javascript 本机函数。

**编码函数（Javascript）**

```
function encodeToHex(str){
    var r="";
    var e=str.length;
    var c=0;
    var h;
    while(c<e){
        h=str.charCodeAt(c++).toString(16);
        while(h.length<3) h="0"+h;
        r+=h;
    }
    return r;
} 
```

**解码功能（Javascript）**

```
function decodeFromHex(str){
    var r="";
    var e=str.length;
    var s;
    while(e>=0){
        s=e-3;
        r=String.fromCharCode("0x"+str.substring(s,e))+r;
        e=s;
    }
    return r;
} 
```

**解码功能（PHP）** <<这是我想要实现的

```
function decodeFromHex($str){
$r="";
$e=str.length;
$s;
while($e>=0){
        $s=$e-3;
        $r=String.fromCharCode("0x"+str.substring($s,$e))+$r;
        $e=$s;
    }
    return $r;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:02:22.920

您需要[hexdec](http://php.net/manual/en/function.hexdec.php)和[dechex](http://php.net/manual/en/function.dechex.php)函数。

顺便说一句，您可以通过 php 在 php 中获得字符串长度`strlen()`。

最后一点，客户端编码毫无意义，因为很容易嗅探和解码您的数据 - 如果您想确定，请使用 SSL over HTTPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:03:13.333

可以使用以下任一方法在 PHP 中解码 HEX 值：

```
current(unpack('H*', $str)) 
```

或者：

```
hex2bin($str); 
```

*我希望您并没有真正将密码编码为十六进制*

# python-3.x - python manager 管理列表

> ID：12584508
> 
> 赞同：0
> 
> 时间：2012-09-25T13:57:21.243
> 
> 标签：python-3.x, python-multithreading

我在我的一些代码中使用了 pythons 多处理模块。我有一个控制器类，它控制一个类并执行一些操作。

```
import multiprocessing
from multiprocessing import Queue, Process, Manager

class dosomething(multiprocessing.Process):
        def __init__(self,managerList):
                self.mlist = managerList
                print self.mlist

        def run(self):
                self.mlist.append((4,5,6))

class doController:
        def __init__(self):
                mgr = Manager()
                self.mlist = mgr.list()
                self.mlist.append((1,2,3,4))
                t = dosomething(self.mlist)
                #t.daemon = True
                #t.start()

        def printer(self):
                return self.mlist

gd = doController()
print gd.printer() 
```

在 dosomething 的 init 部分中的 pring mlist 按预期打印 [(1, 2, 3, 4)] 但 dosomething 部分中的列表不起作用给出 IOError 11。如果它是对的或错的，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:31:49.430

对 的调用`Process.__init__`丢失。

您不一定需要创建可以使用函数的 Process 子类：

```
from multiprocessing import Process, Manager

def dosomething(mlist):
    mlist.append((4,5,6))

def main():
    manager = Manager()
    L = manager.list((1,2,3,4))

    p = Process(target=dosomething, args=(L,))
    p.start()
    p.join()

    print L

if __name__ == '__main__':
    main() 
```

# c++ - 库收到 FILE 指针并读取文件时出错

> ID：12584509
> 
> 赞同：0
> 
> 时间：2012-09-25T13:57:24.943
> 
> 标签：c++, file, shared-libraries

该函数从文件中读取矩阵，并将其打印在屏幕上。但是当库``fscanf(fp, "%u", &elem);``从 fp 读取文件时出现问题。

当我更改``uint8_t elem``为``uint8_t *elem``.

我想知道为什么！程序将 FILE 指针传输到库时应注意什么。谢谢！

主功能：

```
int main(int argc, char *argv[]){

    Matrix8g mat;
    FILE *fp;

    if((fp = fopen("mat.dat","r")) == NULL){
        printf("can't open the file");
    }
    //matrix with 24 rows and 11 cols
    mat.Make_from_file(fp, 24, 11);

    //print the matrix
    mat.Print();
    fclose(fp);
} 
```

部分库文件（Make_from_file）：

```
/* Set the matrix from a file */
int Matrix8g::Make_from_file(FILE *fp, int rows, int cols){
    int i, j;
    uint8_t elem;

    this->rr = rows;
    this->cc = cols;
    Resize_matrix();

    try{
        for(i = 0; i < rows; i++){
            for(j = 0; j < cols; j++){
                fscanf(fp, "%u", &elem);
                Set(i, j, elem);
            }
        }
    }catch(...){
        NOTE("Error when set the matrix from a file");
        return 0;
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T14:13:40.123

如果您查看此参考[c 参考](http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/)

您会看到 fscanf 需要对应写入提取日期的数据结构的引用。fscanf 从给定的文件/流复制到给定的指针。它没有关于数据类型的信息。它使用格式字符串来解释输入中的字节。它类似于类型转换。fscanf 无法知道需要哪种类型作为目标结构，但指针允许直接复制操作。

# android - iOS：如何实现相对布局

> ID：12584514
> 
> 赞同：1
> 
> 时间：2012-09-25T13:57:32.530
> 
> 标签：android, iphone, ios, android-relativelayout, autolayout

我正在尝试制作我的 Android 应用程序的 iOS 版本。它包含如下所示的文本：

![在此处输入图像描述](../Images/5cf132f7fe040e920dd43644a25d91d6.png)

共有三个标签：标题、作者和出版年份。我需要显示完整的标题，可能有几行。无论标题有多长，我都希望作者标签直接位于标题和 pub 下方。直接低于那个年份。

在Android中，我只是使用了相对布局来实现这个效果。我怎样才能在 iOS 中做到这一点？自动布局可以以某种方式为我做这件事吗？如果没有，您对在 iOS 中有效显示此信息有什么建议吗？最好我想使用情节提要来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:03:19.213

我还搜索了相当长的一段时间来在 iOS 中实现类似 android 的布局（无需计算每个子视图的每个位置的麻烦）。

我最终放弃并编写了一个快速等效的 VerticalLayout 和 Horizo​​ntalLayout。这是回购（它符合 ARC）：

[https://github.com/kirualex/iOS-Layout-helper](https://github.com/kirualex/iOS-Layout-helper)

它很粗略，但它确实有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:14:28.660

在 iOS 中，您使用 InterfaceBuilder IB 进行布局 - 它是拖放式的 - 不像 Android 布局。搜索 IB 教程——它真的很简单，你会看到你得到了什么:-)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-06-10T10:21:47.127

简单地说，相对布局将屏幕上的项目相对于其他东西组织起来。和线性布局一样，相对布局也是安卓开发者常用的。我自己确实喜欢这种布局，并且以前在我的应用程序开发中使用过。看

[http://developer.android.com/reference/android/widget/RelativeLayout.html](http://developer.android.com/reference/android/widget/RelativeLayout.html)和[http://developer.android.com/guide/topics/ui/layout/relative.html](http://developer.android.com/guide/topics/ui/layout/relative.html)有关相对布局的更多信息。

# php - 我可以使用 STDOUT 并且仍然循环脚本吗？(PHP/批处理)

> ID：12584517
> 
> 赞同：-1
> 
> 时间：2012-09-25T13:57:43.047
> 
> 标签：php, batch-file

我试图用 php 批量创建一个带有命令的控制台脚本，我发现了这个脚本：

```
for(;;){

fwrite(STDOUT, "\n");
$name = fgets(STDIN);
fwrite(STDOUT, "Hello $name");

sleep(1);
} 
```

但是它在每个循环上都会停止，我可以制作一个循环并使用这个功能吗？谢谢 ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:36:49.853

您可以使用`stream_select()`等待数据出现在 STDIN 中。可选的超时值让您在没有输入时执行其他操作。以下代码将每 200 毫秒打印一次“Waiting...”，直到您输入内容：

```
for(;;){
    $read = array(STDIN);
    $write = NULL;
    $except = NULL;
    if(stream_select($read, $write, $except, 0, 200000) > 0) {
        if($read) {
            $name = fgets(STDIN);
            fwrite(STDOUT, "Hello $name");
        }
    } else {
        fwrite(STDOUT, "Waiting...\n");
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T14:31:28.420

尝试：ignore_user_abort(true);

[http://php.net/manual/en/function.ignore-user-abort.php](http://php.net/manual/en/function.ignore-user-abort.php)

# java - 在java中从像素数组创建图像

> ID：12584521
> 
> 赞同：2
> 
> 时间：2012-09-25T13:57:48.960
> 
> 标签：java, image, io, rgb

这是我的片段。我的原始数组是`a[3][][]`并且 rgb 值存储在那里我想从它们创建一个新图像。以下代码的最后一行导致找不到符号。

```
BufferedImage img=newBufferedImage(bi.getWidth(),bi.getHeight(),BufferedImage.TYPE_INT_RGB);
for(int r=0; r<bi.getHeight(); r++)
    for(int c=0; c<bi.getWidth(); c++)
    {
        int red=a[0][r][c];
        int green=a[1][r][c];
        int blue=a[2][r][c];
        int rgb = (red << 16) | (green << 8) | blue;
        img.setRGB(c, r, rgb);
    }
ImageIO.write(img,"jpg", "abc.jpg"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:05:21.100

您将错误的参数传递给`ImageIO.write()`. 从[docs](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html)来看，这里有 3 种可能性：

```
write(RenderedImage im, String formatName, File output) 
write(RenderedImage im, String formatName, ImageOutputStream output) 
write(RenderedImage im, String formatName, OutputStream output) 
```

如果您想将图像写入名为 的文件`abc.jpg`，可以尝试：

```
ImageIO.write(img, "jpg", new File("abc.jpg"); 
```

# javascript - var that = this、self = this 等

> ID：12584524
> 
> 赞同：-2
> 
> 时间：2012-09-25T13:57:57.717
> 
> 标签：javascript, scope, nested, this

以这种方式分配变量的目的是在存在嵌套范围时提供对父范围内活动对象的访问。我认为这是相当糟糕的形式；为什么不为父目标对象提供一个更有意义的变量名呢？

例如，如果我们选择页面中的所有 div，并遍历它们。在每个 div 中，我们选择目标 div 中的所有锚链接，在嵌套循环中迭代这些锚链接。在此示例中，外部范围的“this”是当前目标 div，内部范围的“this”将是当前目标锚链接。

要在外部范围内创建一个挂钩到活动目标 div，我通常会看到：

```
var that = this; 
```

即使在 Crockford 的 Good-Parts 书中，他也使用了这个作业。

冒着质疑这种技术而自欺欺人的风险，为什么不做一些更有意义的事情，比如

```
var outerDiv = this; 
```

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:01:27.590

这很好，但是您谈论`this`成为迭代变量的方式听起来就像您正在使用 jQuery。它并不总是一个元素，有时`that`是最有意义的：

```
function Constructor() {
    var that = this;

    this.eventListenerThatWillBeBound = function() {
        // Do something with that
    };
} 
```

所以......使用任何情况下最清楚的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:01:57.063

我认为您应该以对您有意义的方式命名变量。

人们使用约定是因为他们可以立即将其识别为代表一个常见场景，其他阅读代码的人也可以。

如果您不喜欢传统的做事方式，请按照自己的方式做，但要确保您的变量对阅读您的代码的其他人有意义。

* * *

FWIW`self`是对浏览器中全局上下文的引用，因此对于某些人来说`self`，通过`self = this`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:00:15.033

我大多这样做

```
function() {
  // use 'this' as it is 
}.bind(this) 
```

或者我从外部调用具有范围的闭包

```
closure.call(this); // the scope inside the closure is now 'this' too 
```

那时我不需要有趣的名字。

# java - 如何对具有相同字段和功能的多个实体进行建模

> ID：12584526
> 
> 赞同：0
> 
> 时间：2012-09-25T13:58:01.290
> 
> 标签：java, hibernate, database-design

我有 2 个实体，比如说**Client**和**Company**（都是**User**的子类）。
每个都有一个事件列表：**ClientEvents**和**CompanyEvents**

我们首先拆分这些表（而不是使用**事件**表）的原因是每种事件不会混合（一次只能对一种事件进行操作）。这也将导致拥有 2 个较小的表而不是一个大表。

1.  这是一个好方法吗？（大表数据量~1M）
    也许不需要将这些表一分为二而只使用继承？
2.  将其建模为实体的最佳方法是什么？

两种类型实体的属性和操作是相同的，因此我可以将其建模为：

```
 @MappedSuperclass  
 public abstract class **Event** {...}  
 @Entity @Table(name="client_event")  
 public class **ClientEvent** {...}  
 @Entity @Table(name="company_event")  
 public class **CompanyEvent** {...} 
```

现在有没有一种方法可以查询每种类型的特定事件而无需在 DAO 中复制方法（使用 hibernate 或 JPA，也许泛型会在这里使用）？
3\. 在这种情况下（两个独立的存在，但属性和操作相同）是否有“经验法则”来建模数据库表和实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:29:39.387

这取决于表的大小（事件总数）、您希望这些事件在活动表中保留多长时间、新事件的频率和旧事件的检索。

如果新活动不频繁，您可以保留一张桌子。如果新事件非常频繁并且您需要经常搜索它们，最好有两个单独的表。

您可以通过将这些旧事件归档到一张表中来加快搜索/检索速度。

简而言之，任何设计都取决于业务的需要。

多个表格可以让您更快地搜索，而单个表格可以让您轻松访问并简化代码/设计。

对于访问，您可以使用相同的方法，只需将事件类型作为参数传递并在此基础上构建查询。

# ios - Objective-Zip 无法打开 Zip

> ID：12584530
> 
> 赞同：0
> 
> 时间：2012-09-25T13:58:09.123
> 
> 标签：ios, zip

我对 Objective-Zip 有疑问。验证我的 zip 时它会抛出异常。我检查了文件很好，解压缩/压缩没有问题。更重要的是，我尝试使用系统默认存档器和其他压缩文件。

我用`ZipFile *unzipFile= [[ZipFile alloc] initWithFileName:@"textPack.zip" mode:ZipFileModeUnzip];`

验证方法

```
- (id) initWithFileName:(NSString *)fileName mode:(ZipFileMode)mode {
    if (self= [super init]) {
        _fileName= [fileName retain];
        _mode= mode;

        switch (mode) {
            case ZipFileModeUnzip:
                _unzFile= unzOpen([_fileName cStringUsingEncoding:NSUTF8StringEncoding]);
                if (_unzFile == NULL) {
                    NSString *reason= [NSString stringWithFormat:@"Can't open '%@'", _fileName];
                    @throw [[[ZipException alloc] initWithReason:reason] autorelease];
                }
                break;

            case ZipFileModeCreate:
                _zipFile= zipOpen([_fileName cStringUsingEncoding:NSUTF8StringEncoding], APPEND_STATUS_CREATE);
                if (_zipFile == NULL) {
                    NSString *reason= [NSString stringWithFormat:@"Can't open '%@'", _fileName];
                    @throw [[[ZipException alloc] initWithReason:reason] autorelease];
                }
                break;

            case ZipFileModeAppend:
                _zipFile= zipOpen([_fileName cStringUsingEncoding:NSUTF8StringEncoding], APPEND_STATUS_ADDINZIP);
                if (_zipFile == NULL) {
                    NSString *reason= [NSString stringWithFormat:@"Can't open '%@'", _fileName];
                    @throw [[[ZipException alloc] initWithReason:reason] autorelease];
                }
                break;

            default: {
                NSString *reason= [NSString stringWithFormat:@"Unknown mode %d", _mode];
                @throw [[[ZipException alloc] initWithReason:reason] autorelease];
            }
        }
    }

    return self;
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:10:47.357

```
ZipFile *unzipFile= [[ZipFile alloc] initWithFileName:@"textPack.zip" mode:ZipFileModeUnzip]; 
```

不起作用，因为 @"textPack.zip" 不是有效文件。“文件名”必须包含路径。我认为他们在这里使用了一个误导性的名称。

如果您的文件来自主包，请使用此选项：

```
NSString *path=[[NSBundle mainBundle] pathForResource:@"textPack" ofType:@"zip"];
ZipFile *unzipFile= [[ZipFile alloc] initWithFileName:path mode:ZipFileModeUnzip]; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T10:03:54.937

您在使用 Objective-zip 可以使用的 64 位模式时遇到问题。

如果您只是`legacy32BitMode:YES`在创建存档时添加，一切都会好起来的。

```
OZZipFile *zipFile= [[OZZipFile alloc] initWithFileName:zipPath 
                                                   mode:OZZipFileModeCreate 
                                        legacy32BitMode:YES]; 
```

# iphone - 从iphone中的数据库sqlite打开表？

> ID：12584533
> 
> 赞同：0
> 
> 时间：2012-09-25T13:58:25.657
> 
> 标签：iphone, database, sqlite

我有一个名为 China.sqlite nel Bundle 的数据库，它由 16 个表组成。我必须从名为 Menu 的表格中打开表格元素。我该怎么办？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:08:50.763

```
sqlite3 *database;

 NSString *databasePath = ......;

if (sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK){

    NSString *sqlString = @"SELECT ......."; //Query

    const char *sql = [sqlString UTF8String];
    if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL) == SQLITE_OK) {

        while (sqlite3_step(statement) == SQLITE_ROW) {

//Get the first 3 coloms of table
            NSString *col1 = [NSString stringWithUTF8String:(char *) sqlite3_column_text(statement, 0)];
            NSString *col2 = [NSString stringWithUTF8String:(char *) sqlite3_column_text(statement, 1)];
            NSNumber *col3 = [NSString stringWithUTF8String:(char *) sqlite3_column_text(statement, 2)];

//save them in dictionary 

            returnDictionary = [NSDictionary dictionaryWithObjects:[NSArray col1, col2, col3, nil]
                                                           forKeys:[NSArray arrayWithObjects:@"Col1", @"Col2", @"Col3", nil]];

        }
    } else {
       //Error handling
    }

} 
```

假设您的数据库文件在主包中

```
NSString *databasePath = [[NSBundle mainBundle] pathForResource:@"China" ofType:@"sqlite"]; 
```

# android - 在android数据库中存储长值

> ID：12584539
> 
> 赞同：27
> 
> 时间：2012-09-25T13:58:40.230
> 
> 标签：android, android-sqlite

如何在 Android SQLite 数据库中存储长值？我正在尝试存储长类型格式的时间（毫秒）值。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-25T14:01:17.250

INTEGER 列将处理长值。

从 SQLite 站点：

> 整数。该值是一个有符号整数，根据值的大小存储在 1、2、3、4、6 或 8 个字节中。

[SQLite 版本 3 中的数据类型](http://www.sqlite.org/datatype3.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:04:25.497

您可以定义具有整数数据类型的列。有关更多信息，请通过此[链接](http://www.sqlite.org/datatype3.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:03:32.727

如果您不关心符号，请将其存储为 INT8。它是 8 个字节（64 位）无符号。或者，转换为/从字符串。

# java - 如何在tomcat 7上的java.library.path中定义多个路径

> ID：12584543
> 
> 赞同：1
> 
> 时间：2012-09-25T13:58:53.157
> 
> 标签：java, tomcat7

您如何定义多个路径，例如

1.  C:\tomcat\jnilib
2.  d:\酒吧

作为 tomcat 7 服务器上 java.library.path 选项的值。

我在 Windows 上工作，所以我猜这应该可以

```
-Djava.library.path=c:\tomcat\jnilib;d:\bar 
```

但是我在 tomcat 服务器中的 web 应用程序在文件夹 d:\bar 中找不到必要的 dll。如果我将它们放入 jnilib 文件夹并删除 java.library.path 中的第二个路径，那么 webapp 会找到 dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:34:33.023

我不确定这是否能解决您的问题，但我已经看到了用双引号和条目之间的空格格式化的示例，例如：

```
-Djava.library.path="c:\tomcat\jnilib; d:\bar" 
```

# java - Eclipse、Maven 和代码覆盖率

> ID：12584544
> 
> 赞同：4
> 
> 时间：2012-09-25T13:58:55.067
> 
> 标签：java, unit-testing, maven, eclipse-plugin, code-coverage

是否有任何 Eclipse 插件直接在 Eclipse JAVA 编辑器中提供代码覆盖率，就像[eCobertura](http://ecobertura.johoop.de/)或[EclEmma](http://www.eclemma.org/)一样，但是使用 Maven 目标`test`（即`mvn test`）启动测试？

我需要指定一个 Maven 配置文件来过滤一些属性（即`mvn -Pdev test`），但是上面给出的两个解决方案不允许我们使用 Maven（AFAIK）。

PS：我知道我可以使用`clean site`Maven 目标（即`mvn -Pdev clean site`）或 Cobertura Maven 插件（即`mvn -Pdev cobertura:cobertura`）来获得代码覆盖率报告，但我想直接在 Eclipse JAVA 编辑器中获得覆盖率。*便利瘾君子*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:44:58.363

您可以使用 Project Properties -> Maven -> Active Maven Profiles 为您的项目设置默认的 Maven 配置文件吗？

（旁白：如果没有它意味着测试无法运行，我不会有一个特殊的“测试”配置文件。忘记运行测试太容易了。“开发”是有道理的，但默认情况下应该是活动的。否则新开发人员将难以构建项目。）

# node.js - 在 Mac/Linux 上手动创建 Windows Azure .cspkg 和 .cscfg 文件

> ID：12584545
> 
> 赞同：6
> 
> 时间：2012-09-25T13:58:55.357
> 
> 标签：node.js, unix, azure

我正计划将我的 node.js 应用程序移至 Windows Azure 云服务。然而，与 Azure 网站不同的是，它没有 git 集成，并且必须上传包含 a`.cspkg`和`.cscfg`文件的 ZIP。

对于使用 Windows 机器进行部署的开发人员，他们有 cspack.exe 来创建这些文件，但是 *nix 用户似乎什么都没有——更重要的是，没有关于这些文件实际上应该包含/看起来像什么的文档。

我[假设 *nix 没有工具](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2229753-create-a-cspack-exe-for-mac-osx)，但是有人可能会指出这些文件的规范方向 - 或者有人手动创建它们的教程吗？

**更新：**为了澄清，我正在做 node.js 开发。

**更新 2：**我刚刚找到了这个项目，可以[与节点 SDK 一起使用](https://github.com/c9/azure-packager-node)

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:17:26.817

经过大量搜索，我终于发现 Cloud9 的出色人员在[他们的 GitHub 帐户](https://github.com/c9)上拥有您可能需要的所有工具。

*   [天蓝色 cmdlet 节点](https://github.com/c9/azure-cmdlet-node)
*   [天蓝色打包程序节点](https://github.com/c9/azure-packager-node)
*   [天蓝色节点基础包](https://github.com/c9/azure-node-basepackage)
*   [azure-management-sdk-for-node](https://github.com/c9/azure-management-sdk-for-node)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T18:33:23.677

这里要理解的关键是，如果您使用 Linux/Mac 进行 Windows Azure 云服务开发，则一定不能使用 .net，而可能使用 Java、PHP、Python 或 node.js，这几乎涵盖了 99% 的非在 Mac 和 Linux 上进行 windows 开发，并且在 Mac 和 Linux 上为上述每种语言提供了 SDK。这些 SDK 确实使用特定于语言的工具来构建 CSPKG 文件，您可以将其直接部署到 Windows Azure 或移动到其他机器并从那里部署。

如果您访问以下每个特定语言的链接，您将找到一个指向 Mac 和 Linux SDK 的链接，您可以将其下载到您的特定机器并使用它。

1.  [适用于 Mac 和 Linux 的 Java SDK](https://www.windowsazure.com/en-us/develop/java/)
2.  [适用于 Mac 和 Linux 的 Python SDK](https://www.windowsazure.com/en-us/develop/python/)
3.  [适用于 Mac 和 Linux 的 PHP SDK](https://www.windowsazure.com/en-us/develop/php/)
4.  [适用于 Mac 和 Linux 的 Node.js SDK](https://www.windowsazure.com/en-us/develop/nodejs/)

[这](http://go.microsoft.com/fwlink/?LinkId=253472&clcid=0x409)是 Linux 上用于 Node.js 的 Windows Azure SDK 的直接链接，[这里](https://www.windowsazure.com/en-us/manage/linux/other-resources/command-line-tools/#Commands_to_manage_your_Azure_cloud_services)是在 Linux 上使用 sdk 工具的文档链接。

如果以上链接都不能满足您的语言和平台特定要求，请提供更多信息，您想使用哪些工具做什么，我肯定可以进一步帮助您。

# java - 使用库编译 Java 小程序

> ID：12584546
> 
> 赞同：1
> 
> 时间：2012-09-25T13:58:59.960
> 
> 标签：java, eclipse, applet

我正在尝试为科学目的开发一个 Java 小程序。我在 Eclipse 的 Ubuntu 11.04 上工作；因为我需要一些附加功能，所以我包含了库“flanagan.jar”、“jcommons.jar”和“jfreechart.jar”。现在，当我从 Eclipse 内部运行小程序时，一切正常。但是，当我尝试在 Eclipse 之外这样做时，情况并非如此。举几个例子：

1) 如果我尝试通过将其嵌入到带有或标记的 HTML 文件中来运行它，则小程序将失败并且我收到错误消息，因为从库中获取的类的定义丢失了，即使我将它们放在同一个文件夹中并且使用正确的`archive`值告诉浏览器在哪里寻找它们；

2) 如果我尝试使用 javac 编译小程序，请插入：

```
javac -classpath sourcefile.java library1.jar library2.jar 
```

我收到一条错误消息，指出 .jar 文件的类名`are only accepted if annotation processing is explicitly requested`。

3) 我无法生成嵌入所有必需库文件的单个输出 .jar 文件。我还认为，如果我可以避免嵌入整个库（它们重约 4 MB）并且实际上只使用我真正需要的 .class 文件，那将是很好的。然而我不知道该怎么做。你能给我一些关于如何做上述三件事之一的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:02:17.150

您需要`-classpath`使用冒号分隔列表将您的 jar 列表立即放在参数之后`:`：

```
javac -classpath library1.jar:library2.jar sourcefile.java 
```

您可以使用 Eclipse 通过以下方式生成单个输出 jar：

```
Export...->Java->Runnable JAR File->Next->Copy required libraries into a sub-folder next to the generated JAR. 
```

然后您可以将新 jar 文件子文件夹的内容 jar 或使用：

```
javac -classpath sub_folder/*.jar sourcefile.java 
```

# printing - 任何人都可以帮助在 Java 程序中打印 JFrame 及其所有组件吗

> ID：12584548
> 
> 赞同：2
> 
> 时间：2012-09-25T13:59:08.090
> 
> 标签：printing, jframe

大家好，现在我面临一个严重的问题。我制作了一个 java 程序，需要打印该程序的 JFrame 之一。但我不能那样做。我在网上搜索过，但我发现的代码只打印第一个元素意味着只有一个元素可能是 JLabel 或 JTextBox。但我需要用所有数据打印整个页面。

谁能帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T08:38:34.370

将此代码附加到您的班级。希望对你有帮助

首先实现 Java 类的 Printable 接口

`class ClassName extends JFrame implements Printable { //your code goes here }`

实现 Printable 接口后覆盖方法 print()

 `````
public int print(Graphics g, PageFormat pf, int page) throws PrinterException {
    if (page > 0) {
        return NO_SUCH_PAGE;
    }
    Graphics2D g2d = (Graphics2D) g;
    g2d.translate(pf.getImageableX(), pf.getImageableY());
    //Give the component to be printed here...
    System.out.println("Successfully printed");
    return PAGE_EXISTS;
} 
````  `现在决定要打印的内容。以这样一种方式编写代码，即所有组件都必须位于一个父 JPanel(parentPanel) 上。现在在上面的代码旁边的注释给出`parentPanel.print(g)`这将打印该 parentPanel 上的所有组件。

现在我们告诉 Java 程序要打印什么，但要完成这个打印作业，我们必须创建 PrinterJob

 ``PrinterJob job = PrinterJob.getPrinterJob(); job.setPrintable(this); boolean ok = job.printDialog(); if (ok) { try { job.print(); } catch (PrinterException ex) { System.out.println(ex); } }`

将此代码放在打印按钮的 ActionListener 中。```

# android - 是否可以过滤或删除使用 PICK_ACTION 和 MediaStore.Audio.Media.EXTERNAL_CONTENT_URI 时显示的结果？

> ID：12584554
> 
> 赞同：0
> 
> 时间：2012-09-25T13:59:29.373
> 
> 标签：android, android-intent, android-contentprovider

我正在使用以下方法启动一个 Activity，它允许我从 MediaStore 库中选择一首歌曲并将它的 uri 返回到启动 Activity。

```
public void selectMedia()
{
        Intent i = new Intent(Intent.ACTION_PICK, MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);
        startActivityForResult(i, REQUEST_MEDIA);
} 
```

我一直在寻找一种方法来过滤显示的列表，使其不包括警报和铃声。由于我找不到解决方案，我开始寻找一种方法来指定媒体文件应该在其中的“根目录”。

我发现的只是关于如何将 MediaStore 作为 ContentProvider 查询特定结果然后在自定义 ListView 中显示结果的更复杂的示例。

我很想知道这是否是实现我正在尝试做的事情的唯一方法，或者是否可以通过传递一些带有意图的额外信息来解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:45:24.763

不，目前似乎不可能。我最终编写了自己的活动以供选择，并根据需要查询媒体存储。

可以在这里找到解决方案：

我现在已经为此编写了自己的解决方案，任何需要它的人都可以在这里找到它

[https://stackoverflow.com/a/12710411/1068167](https://stackoverflow.com/a/12710411/1068167)

# python - (Python - openpyxl) 无法导入导出的 xlsx 文件

> ID：12584562
> 
> 赞同：3
> 
> 时间：2012-09-25T14:00:07.017
> 
> 标签：python, import, export, xlsx, openpyxl

我正在使用**openpyxl**导入/导出 xlsx 文件。

但我无法导入`load_workbook()`我用**openpyxl**导出的文件。

我必须在 Excel 中打开导出的 xlsx 文件，更改导入的 xlsx 文件的一些值并保存它（它的大小也会更改（例如：从 148 Ko 到 180 Ko）。然后我可以使用**openpyxl**导入它。

我认为导出存在问题，因为保存手动导入工作后。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T13:56:16.603

看来这目前不起作用：[https ://bitbucket.org/ericgazoni/openpyxl/issue/46/problem-reading-one-excel-file-and-writing](https://bitbucket.org/ericgazoni/openpyxl/issue/46/problem-reading-one-excel-file-and-writing)

```
import openpyxl
wb = openpyxl.Workbook()
ws = wb.get_active_sheet()
ws.cell('A1').value = 1
wb.save('test.xslx')
wb2 = openpyxl.load_workbook('test.xlsx')
ws2 = wb2.get_active_sheet()
ws2.cell('A2').value = 2
wb2.save('test2.xlsx') 
```

# xcode - 无法将图像添加到 sqlite 数据库？

> ID：12584564
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:00:08.450
> 
> 标签：xcode, image, sqlite, add

有将图像插入其他字段的代码：

```
UIImage *image1 = [UIImage imageNamed:@"recette.jpg"];
            NSData *image2 = UIImagePNGRepresentation(image1);

    if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
    {
        NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS (name, address, phone,image) VALUES (\"%@\", \"%@\", \"%@\", \"%@\" )", name.text, address.text, phone.text,image2]; 
```

认为

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:52:31.087

需要将图像添加为 blob 对象

```
UIImage *image1 = [UIImage imageNamed:@"recette.jpg"];
NSData *imgData = UIImagePNGRepresentation(image1);
sqlite3_stmt *stmt;

char *update = "INSERT INTO CONTACTS (name, address, phone,image) VALUES (?, ?, ?, ?);";

if (sqlite3_prepare_v2(dbpath, update, -1, &stmt, nil) == SQLITE_OK) {
        sqlite3_bind_text(stmt, 1, name.text, -1, NULL);
        sqlite3_bind_text(stmt, 2, address.text, -1, NULL);
        sqlite3_bind_text(stmt, 3, phone.text, -1, NULL);
        if(imgData != nil)
            sqlite3_bind_blob(stmt, 4, [imgData bytes], [imgData length], NULL);
        else
            sqlite3_bind_blob(stmt, 4, nil, -1, NULL);

 }
 else if (sqlite3_step(stmt) != SQLITE_DONE){
     char *errorMsg;
     NSAssert1(0, @"Error updating table: %s", errorMsg);
}

    sqlite3_finalize(stmt); 
```

# java - 使用模式和匹配器从字符串中获取特定值

> ID：12584566
> 
> 赞同：2
> 
> 时间：2012-09-25T14:00:12.753
> 
> 标签：java, design-patterns, pattern-matching

我想使用返回给我 ( **ssid** , **psk** , **proiority** ) 作为*键* 和与每个*键关联的**值*的模式。如果有办法理解我必须使用的表达方式

 *```
Pattern.compile("(\\w+?):(\\w+?),") 
```

回复我。

这是我的字符串

```
network={
     ssid="name"
     psk="password"
     key_mgmt=WPA-PSK
     priority=1
}

network={
     ssid="another name"
     psk="another password"
     key_mgmt=WPA-PSK
     priority=1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:41:34.757

这是一个丑陋的解决方案：

我将您的文本输入放入一个名为的文件中`file.txt`并通过 BufferedReader 读取它

```
public static void main(String[] args) throws Exception {
        File f = new File("src/test/file.txt");
        BufferedReader read = new BufferedReader(new FileReader(f));
        String temp;
        String result = "";
        while ((temp = read.readLine()) != null) {
            result += temp;
        }
        result = result.replaceAll("\\{", " ");
        result = result.replaceAll("\\}", " ");
        result = result.replaceAll("network=", " ");
        result = result.trim();

        String[] list = result.split("[ ]+(?=([^\"]*\"[^\"]*\")*[^\"]*$)");
        for (String s : list) {
            s = s.trim();
            Pattern p = Pattern.compile("(.*)=(.*)");
            Matcher m = p.matcher(s);
            while (m.find()) {
                System.out.println("Key: " + m.group(1));
                System.out.println("Value: " + m.group(2));
            }
        }

    } 
```

这是我的输出：

```
Key: ssid
Value: "name"
Key: psk
Value: "password"
Key: key_mgmt
Value: WPA-PSK
Key: priority
Value: 1
Key: ssid
Value: "another name"
Key: psk
Value: "another password"
Key: key_mgmt
Value: WPA-PSK
Key: priority
Value: 1 
```*

# git - 防止子模块重复，同时保持可分离性并允许项目组合

> ID：12584568
> 
> 赞同：2
> 
> 时间：2012-09-25T14:00:14.610
> 
> 标签：git, cmake

我一直在使用子模块将项目包含在“超级项目”中。
尽管我在一个超级项目中多次包含相同的子模块，但我遇到了烦恼。

例如，假设我有一个名为`Helpers`.
然后我有一个项目，`GeometryHelpers`它包括`Helpers`一个子模块。
然后我有另一个称为`AlgebraHelpers`子`Helpers`模块的项目。

到目前为止一切顺利，这让我可以重用我的`Helpers`代码。

但是，现在说我有一个名为的项目`Math`，它具有子模块`GeometryHelpers`和`AlgebraHelpers`子模块。
现在我有两份`Helpers`(`Math/GeometryHelpers/Helpers`和`Math/AlgebraHelpers/Helpers`)。
如果我必须更改 中的某些`Helpers`内容，那么我必须确保不要忘记在两个地方都更新它，否则我可能会期望事情不同步。

`Helpers`如果发生变化（经常发生），我当前的更新过程是：

```
cd Math/GeometryHelpers/Helpers; git pull
cd ..; git add -u; git commit; git push # update the pointer to Helpers in GeometryHelpers
cd ../AlgebraHelpers/Helpers; git pull; 
cd ..; git add -u; git push # update the pointer to Helpers in AlgebraHelpers
cd ..; git add -u; git push # update the pointers to AlgebraHelpers and GeometryHelpers in Math 
```

似乎理想的情况是拥有 Math/Helpers，并拥有`Math/AlgebraHelpers`和`Math/GeometryHelpers`使用相同的`Math/Helpers`.
但是要设置这样的东西，似乎很难保持以`AlgebraHelpers`独立方式构建的能力（即不在数学内部）。

我真的不想构建库并将它们安装在系统上的某个地方，因为当我在工作并`GeometryHelpers`想要更新某些内容时`Helpers`，我必须打开`Helpers`项目，构建库并将其安装到任何地方`GeometryHelpers`为了它。
这不是一个特别顺利的过程，尤其是因为`Helpers`经常变化。

有没有更好的方法来处理这个？
我使用 CMake 作为我的构建系统，所有这些项目都是 c++ 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:56:14.383

一种方法是停止在`(Algebra|Geometry)Helpers`级别记录 Helpers SHA1（即不要在此处初始化子模块）并将其记录在数学级别（在`Helpers`此处添加为子模块）。
但这不切实际，因为各种提交`(Algebra|Geometry)Helpers`永远不知道`Helpers`应该使用什么 SHA1。

另一种选择是检查脚本[`git new-workdir`](https://github.com/git/git/blob/master/contrib/workdir/git-new-workdir)（自 git1.7.10 以来的任何 git 发行版的贡献）是否有助于避免`Helpers`子模块的重复。
请参阅“[使用 Git 复制子模块](https://stackoverflow.com/a/4116331/6309)”。

您仍然需要提交并推送每个父存储库，但至少您将`Helpers`在所有父存储库中只使用一个。

# c# - 在多对多关系中加入现有记录

> ID：12584570
> 
> 赞同：0
> 
> 时间：2012-09-25T14:00:18.747
> 
> 标签：c#, entity-framework-4, ef-code-first, many-to-many

这是**多对多**关系的EF代码优先类的一部分

```
public class Foo(){
    ....
    public ICollection<Doo> doo { set; get; }
}

public class Doo(){
    ....
    public ICollection<Foo> foo { set; get; }
} 
```

EF 在数据库中创建 3 个表`Foo`，`Doo`和连接表`FooDoo`

这是我的代码：

```
var _foo = context.Foo.FirstOrDefault(o=>o.id == fooID);
var _doo = context.Doo.FirstOrDefault(o=>o.id == dooID); 
```

我该如何设置，对象与（在表中添加 fooID 和 dooID ）`_foo`具有多对多关系`_doo``FooDoo`

注意 1：当我使用 `_foo.doo.Add(_doo);`EF 创建一个副本`_doo`然后建立关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:09:36.353

在您的`DbContext`覆盖中，您可以执行以下操作：

```
public class MyContext : DbContext
{
    public DbSet<Doo> Doos { get; set; }
    public DbSet<Foo> Foos { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new DooConfiguration());
        modelBuilder.Configurations.Add(new FooConfiguration());
    }
}

internal class DooConfiguration : EntityTypeConfiguration<Doo>
{
    public DooConfiguration()
    {
        // your other property mappings here

        HasMany(m => m.Foo)
        .WithMany(m => m.Doo)
        .Map(m => { 
            m.MapLeftKey("fooID"); 
            m.MapRightKey("dooID"); 
            m.ToTable("ManyToManyTableName"); 
        });
    }
}

internal class FooConfiguration : EntityTypeConfiguration<Foo>
{
    public FooConfiguration()
    {
        // your other property mappings here

        HasMany(m => m.Doo)
        .WithMany(m => m.Foo)
        .Map(m => { 
            m.MapLeftKey("dooID"); 
            m.MapRightKey("fooID"); 
            m.ToTable("ManyToManyTableName"); 
        });
    }
} 
```

`ManyToManyTableName`当然，您将存储多对多关联的数据库表在哪里。`MapLeftKey`您正在告诉与和`MapRightKey`关联返回哪些主键。

[这篇文章](http://www.codeproject.com/Articles/234606/Creating-a-Many-To-Many-Mapping-Using-Code-First)有一些很好的进一步信息。

# php - 在php中从另一个页面调用函数

> ID：12584572
> 
> 赞同：0
> 
> 时间：2012-09-25T14:00:22.740
> 
> 标签：php

我调用了一个在我的 smsconfig.php 文件中定义的函数，例如

```
$GLOBAL_URL_OF_THE_SITE= "http://webfaction";

function get_site_url(){
    return $GLOBAL_URL_OF_THE_SITE; 
} 
```

在我的 index.php 文件中，我包含该 smsconfig.php 文件，然后我正在执行以下操作：

```
 <?php 
    include("smsconfig.php");
    ?>
    <html>
    <head >
     <link rel="stylesheet" type="text/css" href="default.css" />
        <script src="<?php echo get_site_url();?>/UI/jquery/jquery-1.7.2.min.js" type="text/javascript"></script> 
```

不幸的是，我的 JS 没有加载，并且我在 firebug 中收到以下错误：

```
"NetworkError: 404 Not Found - http://webfaction/UI/%3Cbr%20/%3E%3Cb%3ENotice%3C/b%3E:%20%20Undefined%20variable:%20GLOBAL_URL_OF_THE_SITE%20in%20%3Cb%3E/opt/lampp/htdocs/UI/smsconfig.php%3C/b%3E%20on%20line%20%3Cb%3E11%3C/b%3E%3Cbr%20/%3E/UI/jquery/jquery-1.7.2.min.js" 
```

请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:02:37.260

默认情况下，函数无权访问全局变量。您必须`global`在访问变量之前声明变量：

```
$GLOBAL_URL_OF_THE_SITE= "http://webfaction";

function get_site_url(){
    global $GLOBAL_URL_OF_THE_SITE;

    return $GLOBAL_URL_OF_THE_SITE; 
} 
```

如果没有`global`，您*应该*会看到一个警告，您可能会抑制它：

> PHP 注意：未定义变量：GLOBAL_URL_OF_THE_SITE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:02:34.377

这是变量范围的问题。您的函数看不到该变量，因为该变量超出了其范围。你应该这样做：

```
function get_site_url(){
    $GLOBAL_URL_OF_THE_SITE= "http://webfaction";

    return $GLOBAL_URL_OF_THE_SITE; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:07:09.617

您可以使用 array 来编写代码而不在函数体中声明全局`$GLOBALS`。该数组将所有全局变量作为键。

# apache - .htaccess mod_rewrite 删除 www

> ID：12584573
> 
> 赞同：1
> 
> 时间：2012-09-25T14:00:25.407
> 
> 标签：apache, .htaccess, mod-rewrite

我的 .htaccess 文件中有以下规则，

```
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

这是试图实现的是将 www.domain.com 重写为 domain.com，但是我收到以下服务器错误，

> 此网页有重定向循环

我该如何解决这个问题？我尝试了对上述内容的各种重写，它们都导致相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:07:07.517

这应该有效：

```
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:42:27.387

听起来好像在某个地方，您已经在某个地方进行了从[http://website.com](http://website.com)重定向到[http://www.website.com](http://www.website.com)的重定向（在浏览器中尝试）。它可能在您的 Apache 配置文件中。

# scheme - 列表的顶层是什么？

> ID：12584574
> 
> 赞同：1
> 
> 时间：2012-09-25T14:00:25.250
> 
> 标签：scheme

假设我在方案中定义了一个列表： (list (list 1 2) (list 3 4) (list 5 6)) 顶级是第一个子列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:14:30.593

示例中的顶级列表是包含三个元素的列表`(1 2) (3 4) (5 6)`。顶级*不是* `(1 2)`- 第一个子列表：它是*包含*该子列表的列表。鉴于示例中的所有列表元素都是子列表，因此顶级列表`((1 2) (3 4) (5 6))`被视为最左边和最右边的括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:03:15.547

是的。顶层是列表中的元素。其中一些元素恰好是列表本身。在这种情况下，只有一个元素，恰好是一个列表。

# c - termiox.h 的 Linux 等效项是什么？

> ID：12584575
> 
> 赞同：0
> 
> 时间：2012-09-25T14:00:26.687
> 
> 标签：c, linux, rhel

我有一个古老的调制解调器接口库，它最初是为 Solaris 和 Linux 制作的，我正在尝试看看它是否适用于 Linux。

在 Linux 上编译时，我看到：

```
#if ! defined(WIN32)

#include <string.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/ioctl.h>
#include <sys/time.h>
#include <termios.h>
#include <sys/termiox.h> 
```

它似乎无法找到 termiox.h 的位置，当我搜索它时，它只显示 termios.h 的结果

我不能简单地取消引用，因为有很多调用它。

有人会碰巧知道在 Linux 下定义 termiox 调用的位置吗？

操作系统版本为 RHEL 5.5

引用 termiox 库的代码只是说它忽略 termiox 选项：

```
 /home/local/NT/jayanthv/8.7/CallBur/lib/unix.c(556): error: struct "<unnamed>" has no field "termiox"
 if( modem_opt_ignore_termiox == No && ioctl( modem_handle, TCSETX, &mattr_current.termiox ) < 0 ) 
```

我应该继续在代码周围添加#if !defined() 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:59:10.580

没有开玩笑的古老。在[rodion 链接的手册页](http://www-it.desy.de/cgi-bin/man-cgi?termiox%207)底部，它说：

> 提供 termiox(7I) 系统调用是为了与以前的版本兼容，不鼓励使用它。相反，建议使用 termio(7I) 系统调用。

该手册页的日期为 1990 年。从那时起，[termio 也已过时](https://developer.apple.com/library/mac/#documentation/Porting/Conceptual/PortingUnix/compiling/compiling.html)：

> `termio.h`
> 此头文件已过时，已被`termios.h`POSIX 标准的一部分所取代。这两个头文件非常相似。但是，`termios.h`不包含与`termio.h`. 因此，您应该确保直接查看`termios.h`标题以确保它包含您的应用程序所需的所有内容。

于是termiox被termio取代，termio又被termios取代。

# javascript - onclick调用的js函数内的window.location

> ID：12584578
> 
> 赞同：0
> 
> 时间：2012-09-25T14:00:38.303
> 
> 标签：javascript

**我有一个 html 文件-**

```
<a href="#abc" onclick="return somefunc()">Click</a> 
```

**js文件——**

```
function somefunc() {
    if(somecondition) {
    //do domething
    }
    else {
         window.location='#xyz';
         return false;
    } 
```

如果触发了 else 条件，它会带我到`#xyz`然后再回到`#abc`. 我想重定向到`#xyz`其他部分发生时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:02:26.463

您不应该让它返回 false ，因为这将取消默认操作。不过，您可能希望在“做某事”区域中包含 return false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:17:47.523

代码对我来说工作正常

**HTML**

```
<input type="checkbox" id="cb" />
<a href="#abc" onclick="return somefunc()">Click</a>

<div class="filler"></div>
<div id="abc">ABC location</div>
<div class="filler"></div>
<div class="filler"></div>
<div class="filler"></div>
<div id="xyz">XYZ location</div>
<div class="filler"></div>
<div class="filler"></div>
<div class="filler"></div> 
```

**JavaScript**

```
function somefunc () {

    var returnState = true;
    if (document.getElementById("cb").checked) {
         alert("here");   
    } else {
        window.location.hash = "#xyz";
        returnState = false;                
    }
    return returnState;

}​ 
```

**运行示例**

[JSFiddle](http://jsfiddle.net/aHxJ5/)

# php - 播放特定格式的 m4a

> ID：12584584
> 
> 赞同：4
> 
> 时间：2012-09-25T14:01:03.770
> 
> 标签：php, jplayer, m4a

我一直在寻找有关该主题的时间，但一无所获。我应该在网页上加载一定数量的`.m4a`文件，每个文件都在一个单独的播放器中。我找到并实现`jplayer`了，它声称可以处理格式。我决定默认使用 flash 回退以避免向后不兼容。jplayer 的示例 ( `http://www.jplayer.org/audio/m4a/TSP-01-Cro_magnon_man.m4a`) 中提供的示例 m4a 文件工作正常，而我没有设法播放我拥有的任何文件。

我`file`对所有文件运行了 unix 命令。jplayer 的示例文件返回：

*   `ISO Media, MPEG v4 system, version 2`

非工作文件返回以下内容之一：

*   `ISO Media, MPEG v4 system, 3GPP`*   `ISO Media, MPEG v4 system, version 1`*   `ISO Media, MPEG v4 system, iTunes AAC-LC`

我使用以下 PHP 控制器代码加载音频文件。我需要这样做才能“重写” URL 并隐藏文件的实际 URI。

```
header('Content-Type: audio/mp4');
header('Content-Disposition: inline; filename=xxxxxxxxxxTrack'.$id.'.m4a');
echo file_get_contents(MVC::siteRoot().'/'.$filename); 
```

（MVC::siteRoot() 返回存储脚本的物理目录。）我也`Content-Type: audio/mp4a-latm`再次尝试无济于事。我使用以下代码加载 jplayer：

```
$('.jp-jplayer').each(function() {
    $(this).jPlayer({
        ready: function () {
            console.log($(this).attr('data-src'));
            $(this).jPlayer("setMedia", {
                m4a: $(this).attr('data-src')
            });
            $("#insp").jPlayerInspector({jPlayer:$(this)});
        },
        swfPath: "<?=MVC::httpRoot();?>/gui/swf/Jplayer.swf",
        supplied: 'm4a',
        wmode: 'window',
        solution:"flash",
        errorAlerts:true,
        warningAlerts:true,
        cssSelectorAncestor: '#' + 
            $(this).attr('id').replace('jquery_jplayer','jp_container')
    });
}); 
```

在 DOM 方面，对于由渐进式数字 $i 标识的每个音频文件，会发生以下情况：

```
<div id="jquery_jplayer_<?=$i?>" class="jp-jplayer" data-src="<?=MVC::httpRoot()?>/get/audio/<?=$traccia['audioid']?>"></div>
<div id="jp_container_<?=$i?>" class="jp-audio">[...] 
```

播放器似乎加载正确，DOM 根据 jplayer 重新排列，但按下播放按钮时没有任何反应。代表网络未发现错误，文件已正确传递但内容未播放且未发出警告或错误。实际上，我收听文件的唯一方法是下载它们并在 QuickTime 中打开它们，因为即使 Chrome 也不会播放它们。另一方面，Safari 会很乐意加载和播放文件，但不会在网站内。遗憾的是，我无法直接控制上传文件的内容，因为它们来自 iOS/Android 应用程序，并且客户端出于某种原因请求了 .m4a 格式。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:53:49.070

1.  DRM 的问题

2.  MIME 类型

您的域的服务器必须为所有媒体 URL 提供正确的 MIME 类型（内容类型）。

未能提供正确的 MIME 类型将导致媒体无法在某些 HTML5 浏览器上运行。这是仅影响 Firefox 和 Opera 的问题的常见原因。其他浏览器不那么严格，但如果在任何浏览器上播放媒体时遇到问题，则应始终检查 MIME 类型是否正确。

媒体 MIME 类型

```
 MP3: audio/mpeg
    MP4: audio/mp4 video/mp4
    OGG: audio/ogg video/ogg
    WebM: audio/webm video/webm
    WAV: audio/wav 
```

如果您对音频和视频媒体都使用通用扩展名，例如 audio.mp4 和 video.mp4，那么只需对它们都使用 MIME 类型的视频版本。即，视频/mp4

在 Apache 服务器上，您可以使用 .htaccess 文件根据文件扩展名设置 MIME 类型：

```
# AddType TYPE/SUBTYPE EXTENSION

AddType audio/mpeg mp3
AddType audio/mp4 m4a
AddType audio/ogg ogg
AddType audio/ogg oga
AddType audio/webm webma
AddType audio/wav wav

AddType video/mp4 mp4
AddType video/mp4 m4v
AddType video/ogg ogv
AddType video/webm webm
AddType video/webm webmv 
```

3\. 字节范围请求

您的服务器必须启用 Range 请求。这很容易通过查看服务器的响应是否在其标头中包含 Accept-Ranges 来检查。大多数 HTML5 浏览器允许在下载期间寻找新的文件位置，因此服务器必须允许请求新的 Range。

无法接受字节范围请求会导致某些 HTML5 浏览器出现问题。通常无法从文件中读取持续时间，因为某些格式要求读取文件的开头和结尾以了解其持续时间。如果服务器上没有启用 Range 请求，Chrome 往往是问题最多的浏览器，但所有浏览器都会有一些问题，即使只是您必须等待所有媒体加载完毕才能跳到最后.

已知此问题会影响使用默认配置的 Jetty 6 服务器。

[https://groups.google.com/d/msg/jplayer/nSM2UmnSKKA/bC-l3k0pCPMJ](https://groups.google.com/d/msg/jplayer/nSM2UmnSKKA/bC-l3k0pCPMJ)

1.  保护您的媒体

尝试限制对媒体文件的访问时要小心。媒体 URL 必须可由用户通过 Internet 访问，并且其响应必须采用预期格式。

使用服务器响应来禁用媒体的本地缓存可能会导致某些 HTML5 浏览器出现问题。这可能会导致媒体的持续时间未知，这将在 jPlayer 的持续时间中显示为 NaN。

如果您在后端做一些魔术以使其更安全，他们会确保您接受上述字节范围请求。

是的，我刚刚复制/粘贴了常见问题解答，对这些东西一无所知

# ruby-on-rails - 添加两个红宝石数组

> ID：12584585
> 
> 赞同：3
> 
> 时间：2012-09-25T14:01:05.047
> 
> 标签：ruby-on-rails, ruby

我似乎找不到将两个数组添加在一起的方法。例如有没有办法添加 a = [1,2,3] b = [4,5,6] 得到结果 c = [5,7,9]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T14:10:29.397

我没有比这更好的了：`c = a.zip(b).map { |x, y| x + y }`

假设您的数组具有相同的大小。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T14:16:14.480

问题是当数组大小不同时：

```
a = [1,2]
b = [4,5,6]
ary = a.map.with_index{ |m,i| m + b[i].to_i }
=> [5, 7]

a = [1,2,3]
b = [4,5]
ary = a.map.with_index{ |m,i| m + b[i].to_i }
=> [5, 7, 3] 
```

如果第二个数组较短，它可以工作。如果第一个数组较短，它会截断结果数组的长度以适应。那可能不是你想要的。

```
a = [1,2,3]
b = [4,5,6]
ary = a.map.with_index{ |m,i| m + b[i].to_i }
=> [5, 7, 9] 
```

解决数组长度的问题会稍微改变一些事情。我会这样做：

```
a = [1,2,3]
b = [4,5]
ary = a.zip(b).each_with_object([]){ |( a,b ), m| m << a + b.to_i }
=> [5, 7, 3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T03:42:16.853

相同长度数组的另一种选择：

```
[a,b].transpose.map{|x| x.reduce :+} 
```

添加多个数组时特别有用：

```
[a,b,c,d,e].transpose.map{|x| x.reduce :+} 
```

# spring - 休眠问题

> ID：12584587
> 
> 赞同：2
> 
> 时间：2012-09-25T14:01:15.653
> 
> 标签：spring, hibernate, jpa-2.0, hibernate-4.x

嗨，我正在尝试坚持一个简单的实体。如果我从 hibernate.cfg.xml 文件中删除映射标记，我不会得到异常。有什么问题？

```
<hibernate-configuration>
    <session-factory>
        <property name="show_sql">true</property>
        <mapping class="com.domain.Profile" />
    </session-factory>
</hibernate-configuration> 
```

…………

```
<bean id="portalSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
   <property name="dataSource" ref="portal" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect"> org.hibernate.dialect.PostgreSQLDialect</prop>
        </props>
    </property>
</bean> 
```

…………

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'profileDaoImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory no.ProfileDaoImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'kursPortalSessionFactory' defined in URL [file:/Users/phe/dev/AppCf/spring-application-context-datasource.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not get constructor for org.hibernate.persister.entity.SingleTableEntityPersister
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory no.ProfileDaoImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'kursPortalSessionFactory' defined in URL [file:/Users/phe/dev/AppCfg/spring-application-context-datasource.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not get constructor for org.hibernate.persister.entity.SingleTableEntityPersister
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 39 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'kursPortalSessionFactory' defined in URL [file:/Users/phe/dev/AppCf/spring-application-context-datasource.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not get constructor for org.hibernate.persister.entity.SingleTableEntityPersister
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 41 more
Caused by: org.hibernate.MappingException: Could not get constructor for org.hibernate.persister.entity.SingleTableEntityPersister
    at org.hibernate.persister.internal.PersisterFactoryImpl.create(PersisterFactoryImpl.java:185)
    at org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:135)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:384)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1740)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1778)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:189)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:350)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:335)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 51 more
Caused by: org.hibernate.HibernateException: Unable to instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:138)
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructDefaultTuplizer(EntityTuplizerFactory.java:188)
    at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:341)
    at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:503)
    at org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:144)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.hibernate.persister.internal.PersisterFactoryImpl.create(PersisterFactoryImpl.java:163)
    ... 60 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:135)
    ... 69 more
Caused by: java.lang.NoClassDefFoundError: javassist/util/proxy/MethodFilter
    at org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl.getProxyFactoryFactory(BytecodeProviderImpl.java:56)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactoryInternal(PojoEntityTuplizer.java:241)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:219)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:212)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:82)
    ... 74 more
Caused by: java.lang.ClassNotFoundException: javassist.util.proxy.MethodFilter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 79 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:08:59.117

看起来您的类路径中没有[javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)。

您可以尝试[这篇文章](http://www.mkyong.com/hibernate/java-lang-classnotfoundexception-javassist-util-proxy-methodfilter/)中的解决方案，它只是告诉您下载适当的 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:13:29.507

您似乎缺少**javassist.jar**，它是**hibernate-core.jar的依赖项**

你可以从[这里得到它](http://www.jboss.org/javassist/downloads)

或者如果您使用的是 maven，请为其添加依赖项

# javascript - 尝试更改图像状态时未捕获的 TypeError

> ID：12584597
> 
> 赞同：1
> 
> 时间：2012-09-25T14:01:52.640
> 
> 标签：javascript, jquery

我正在尝试编写一段代码，当单击按钮时，它会检查图像列表，检查它是否具有“视频”的 id，如果有，则显示覆盖并删除那里的播放器。

我不断收到此错误：

```
Uncaught TypeError: Cannot call method 'indexOf' of undefined 
```

这是代码：

```
$("#actions .btn").click(function(){
       $('.span img').each(function(){
            if($(this).attr('id').indexOf('video') != -1){
                var spanid = $(this).attr('id').replace(/video/, '');
                $(this).removeClass('hideicon');
                $('#mediaplayer' + spanid + '_wrapper').remove();
            }
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:08:33.607

如果您要查找的属性在元素上不存在，则该[`.attr()`](http://api.jquery.com/attr/)方法将返回。`undefined`我建议为您的情况添加额外检查：

```
var id = $(this).attr('id');
if(id && id.indexOf('video') != -1) {
    //OK!
} 
```

从文档：

> 从 jQuery 1.6 开始，该`.attr()`方法返回`undefined`尚未设置的属性。

有趣的是，本机`getAttribute`函数会返回`null`尚未设置的属性。jQuery，出于某种原因，[明确地检查这个](http://james.padolsey.com/jquery/#v=git&fn=jQuery.attr)并返回`undefined`：

```
ret = elem.getAttribute(name);

// Non-existent attributes return null, we normalize to undefined
return ret === null ? undefined : ret; 
```

# textmate - Textmate中的对齐哈希命令

> ID：12584598
> 
> 赞同：1
> 
> 时间：2012-09-25T14:01:53.920
> 
> 标签：textmate

Textmate 中有一个“对齐作业”命令。我想知道是否有类似的命令可以对齐 Ruby/JavaScript 哈希？

所以我需要转换：

```
hash = {
  aaa: 123,
  bbbbbbbbb: 123,
  c: 123
} 
```

至

```
hash = {
  aaa:       123,
  bbbbbbbbb: 123,
  c:         123
} 
```

或者也许有一些聪明的方法可以使用 Textmate 列编辑来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-19T14:59:18.357

实际上，TextMate 确实有这个，但它只适用于常规哈希语法（哈希火箭 =>），而不适用于紧凑哈希语法（符号：值）。

我不知道它叫什么，但是`cmd-shift-]`当光标在散列中时，击键（右方括号）会变成这样：

```
{
  :a => 1,
  :aaa => 2
  :b => 3
} 
```

进入这个：

```
{
  :a   => 1,
  :aaa => 2
  :b   => 3
} 
```

# c# - 重新创建动态创建的按钮

> ID：12584602
> 
> 赞同：0
> 
> 时间：2012-09-25T14:01:58.747
> 
> 标签：c#, asp.net, dynamic-controls

我知道 ASP.NET 页面生命周期，但我很困惑。我这里有从数据库记录创建按钮的代码。在我点击它们后，它们消失了，没有触发任何代码。:( 我知道我必须在 Page_Init 中重新创建它们，但我不知道如何。请帮忙！这是我的代码：

```
 try
        {
            con.Open();
            SqlDataReader myReader = null;
            SqlCommand myCom = new SqlCommand("select ID,client from tposClient where CardNo='" + cNo + "'", con);

            myReader = myCom.ExecuteReader();

            Panel panel1 = new Panel();
            panel1.Style["text-align"] = "Center";
            panel1.Style["background"] = "blue";
            div_login.Visible = false;

            while (myReader.Read())
            {
                string b = myReader["client"].ToString();
                string id = myReader["ID"].ToString();

                Button btn = new Button();
                btn.Text = b;
                btn.ID = id;
                btn.Style["width"] = "100px";
                btn.Click += new EventHandler(btn_Click);
                panel1.Controls.Add(btn);

                panel1.Controls.Add(new LiteralControl("<br />"));
                form1.Style.Add("display", "block");
                form1.Controls.Add(panel1);
            }
        }
        catch (Exception k)
        {
            Console.WriteLine(k.ToString());
        }
        finally
        {
            cmdselect.Dispose();
            if (con != null)
            {
                con.Close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:01:43.907

您应该只在`Button`内部放置一个`ListView`控件，该控件将为您返回的每个结果重复。以这种方式使用按钮会容易得多，而且您不必处理在每个`Postback`.

创建一个 ListView，里面有一个按钮

```
<asp:ListView ID="lv1" runat="server" OnItemDataBound="lv1_ItemDataBound">
    <ItemTemplate>
        <asp:Button ID="btn1" runat="server" Text="my Text />
    </ItemTemplate>
</asp:ListView> 
```

完成数据访问后，创建一个`Dictionary<string, string>`来保存每个按钮的文本和 id，然后您可以使用它来绑定您的`ListView`.

```
//Your data access code
Dictionary<string, string> buttonIdsWithText = new Dictionary<string, string>();
while(myReader.Read())
{
    string buttonText = myReader["client"].ToString();
    string buttonId = myReader["ID"].ToString();
    buttonIdsWithText.Add(buttonId, buttonText);
}
lv1.DataSource = buttonIdsWithText;
lv1.DataBind(); 
```

创建一个`ItemDataBound`事件处理程序，以便您可以设置按钮文本

```
public void lv1_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType != ListViewItemType.DataItem)
    {
        return;
    }

    KeyValuePair<string, string> idWithText = 
        (KeyValuePair<string, string>)e.Item.DataItem;
    Button myButton = e.Item.FindControl("btn1") as Button;
    myButton.Text = idWithText.Value;
} 
```

如果您需要将按钮 id 专门设置为从数据库中获取的 id（并且您使用的是 .NET 4），则可以将按钮设置`ClientIDMode`为`Static`并将 id 设置为您想要的 id。

# asp.net - 2台服务器之间的模拟

> ID：12584603
> 
> 赞同：0
> 
> 时间：2012-09-25T14:02:02.720
> 
> 标签：asp.net, sharepoint-2010

我正在尝试将文档从一个 SharePoint 场移动到另一个场，但我相信这可能是一个 asp.net 问题。

我正在为目标服务器使用客户端对象模型，当我不手动设置凭据时，我一直遇到拒绝访问的问题。

当我创建新的 NetworkCredentials 并为客户端上下文提供它的工作原理时。

我试图模拟的用户确实有权添加该项目（我在我制作的 NetworkCrendentials 中使用相同的用户）

是否需要做一些事情来允许在多个服务器之间进行模拟？

# delphi - 在 Delphi 的画布上绘制一个不可见的控件

> ID：12584604
> 
> 赞同：3
> 
> 时间：2012-09-25T14:02:08.983
> 
> 标签：delphi, draw, invisible

我为 Delphi 制作了一个日历组件。现在我想在更改月份时为其添加视觉效果（如 Windows Vista 标准日历）。

现在我想创建一个不可见的组件副本并将其绘制在画布上以用于视觉效果。我尝试`BitBlt`了功能，但它不起作用，因为控件是不可见的。有没有办法在画布上绘制一个不可见的控件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:17:33.747

调用控件的[`PaintTo`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TWinControl.PaintTo)方法。那是给后代的`TWinControl`。

我没有看到`TGraphicControl`后代的类似方法，但由于那些总是需要`TWinControl`父母，你可以调用`PaintTo`父控件来获取`TGraphicControl`孩子的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:41:29.647

除了 Rob 的[正确答案](https://stackoverflow.com/a/12584924/757830)，我可以提出两个替代方案吗？

1.  箭头和月份名称似乎没有滚动，所以我们称它们为组件的标题，并使其成为组件的子控件。随后，也将日子设为子控件。现在可以在显示的旁边放置两个*日间控件。*因为它们超出了组件的范围，所以这些放在一边的日间控件是隐藏的，但一旦它们移动就会变得可见。在滚动操作结束时，将最外面移动到另一侧并适当设置其月份。

2.  使用类似月份的参数将日期的绘制移动到单独的例程中。滚动时，调用该例程两次。

# javascript - 网站缩放中的绝对定位元素

> ID：12584606
> 
> 赞同：0
> 
> 时间：2012-09-25T14:02:13.070
> 
> 标签：javascript, jquery, position

里面的立方体有绝对位置，并且改变了它的位置

```
d.css({top:d.position().top+this.yposition+'px'}); 
```

它可以直到页面被缩放等 - 我希望它相对于它的容器（绿色）。

我无法将其位置更改为相对位置，因为容器内有许多立方体 div，它们需要“独立”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:09:21.193

将容器的位置设置为相对。现在绝对定位内的元素实际上绝对定位在容器内。不过，您将需要稍微更改定位“算法”。

或者将元素的位置更改为相对（尽管定位它们可能有点棘手）。

如果你不能做到这两点，那么就不可能做到这一点。

PS接受更多答案！人们正在免费帮助你，至少应该“谢谢你”。

# ruby-on-rails - 创建嵌套表单的正确方法是什么？

> ID：12584609
> 
> 赞同：1
> 
> 时间：2012-09-25T14:02:21.377
> 
> 标签：ruby-on-rails, mongoid, nested-forms

我正在使用 RoR 3.2.8 和 Mongoid 创建一个博客系统。我有两个相关的模型：帖子和评论（“帖子有很多评论”）。

在控制器 PostController 的“显示”操作中，我需要添加一个表单来插入新评论，对吧？我可以做下面的代码吗？

```
<% form_for Comment.new do |f| %>

    <%= f.text_area :text  %>

    <%= f.hidden_field :post_id, :value => @post.id  %>

    <%= f.submit %>
<% end %> 
```

如果我做不到，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:55:11.113

查看我在这篇文章中的回答，[如何包含来自其他对象的表单元素？](https://stackoverflow.com/questions/11571845/how-can-i-include-form-elements-from-other-objects/11571931#11571931). 基本上，您将需要使用 fields_for。

# erlang - Erlang R15B02 上的钢筋构建失败

> ID：12584613
> 
> 赞同：1
> 
> 时间：2012-09-25T14:02:32.240
> 
> 标签：erlang, rebar

1.  卸载了以前版本的erlang
2.  安装最新版本 R15B02
3.  从源头安装钢筋

rebar 编译现在失败并出现以下错误：

```
Uncaught error in rebar_core: {'EXIT',
                               {badarg,
                                [{erlang,make_fun,
                                  [{atom,42,filelib},
                                   {atom,42,wildcard},
                                   {integer,42,1}],
                                  []},
                                 {rebar_subdirs,preprocess,2,[]},
                                 {rebar_core,acc_modules,5,[]},
                                 {rebar_core,process_dir0,6,[]},
                                 {rebar_core,process_commands,2,[]},
                                 {rebar,main,1,[]},
                                 {erl_eval,do_apply,6,
                                  [{file,"erl_eval.erl"},{line,572}]},
                                 {escript,eval_exprs,5,
                                  [{file,"escript.erl"},{line,850}]}]}} make: *** [all] Error 1 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:09:33.680

该错误表明它无法从[https://github.com/basho/rebar/blob/master/src/rebar_subdirs.erl中的](https://github.com/basho/rebar/blob/master/src/rebar_subdirs.erl)**fun filelib:wildcard/1** (BIF) 中取笑，这是完全可以的.

所以看起来你的环境有问题。你不是在使用 Windows 或其他类似荒谬的东西吗？

或者，您可以尝试对预编译的钢筋执行相同的操作，该钢筋位于此处：[https ://github.com/basho/rebar/wiki/rebar](https://github.com/basho/rebar/wiki/rebar)

# c# - DataGrid的WinRT端口中神秘的“没有足够的配额可用于处理此命令”

> ID：12584619
> 
> 赞同：45
> 
> 时间：2012-09-25T14:02:39.020
> 
> 标签：c#, xaml, exception, windows-runtime, winrt-xaml

**编辑 9 月 26 日**

*有关完整背景，请参见下文。tl; dr：数据网格控件导致奇怪的异常，我正在寻求帮助隔离原因并找到解决方案。*

我进一步缩小了这个范围。我已经能够在较小的测试应用程序中重现该行为，并且可以更可靠地触发不稳定的行为。

我绝对可以排除线程和（我认为）内存问题。新应用程序不使用任务或其他线程/异步功能，我只需向 DataGrid 中显示的对象类添加返回常量的属性即可触发未处理的异常。这向我表明问题出在非托管资源耗尽或我还没有想到的问题上。

修改后的程序结构是这样的。我创建了一个名为的用户控件`EntityCollectionGridView`，它有一个标签和一个数据网格。在控件的 Loaded 事件处理程序中，我将 a 分配给`List<TestClass>`具有 1000 或 10000 行的数据网格，让网格生成列。此用户控件在页面事件中的 MainPage.xaml 中实例化 2-4 次`OnNavigatedTo`（或者`Loaded`，这似乎无关紧要）。如果发生异常，则会在 MainPage 显示后立即发生。

有趣的是，行为似乎并没有随着显示的行数而变化（它会在 10000 行时可靠地工作，或者在每个网格中只有 1000 行时可靠地失败），而是随着所有网格中的列总数而变化在给定时间加载。显示 20 个属性，4 个网格可以正常工作。使用 35 个属性和 4 个网格，会引发异常。但是如果我消除两个网格，具有 35 个属性的同一个类将正常工作。

请注意，我添加以`TestClass`从 20 列跳转到 35 列的所有属性均采用以下形式：

```
public string StringXYZ { get { return "asdfasdfasdfasdfasf"; } } 
```

因此，支持数据中没有额外的内存（同样，我不认为内存压力是问题）。

大家怎么看？同样，任务管理器中的句柄/用户对象/等看起来不错，但是我可能还缺少其他东西吗？

**原帖**

我一直致力于将 Silverlight Toolkit DataGrid 移植到 WinRT，它在简单的测试（各种配置和多达 10000 行）中做得很好。但是，当我尝试将它嵌入到另一个 WinRT 应用程序时，我遇到了一个零星的异常（System.Exception 类型，在 App.UnhandledException 处理程序中引发），这证明很难调试。

```
Not enough quota is available to process this command. (Exception from HRESULT: 0x80070718) 
```

错误始终是可重现的，但不是确定性的。也就是说，我可以在每次运行应用程序时实现它，但它并不总是通过执行相同的确切步骤集相同的次数来实现。该错误似乎发生在页面转换上（无论是向前导航到新页面还是返回到前一页），而不是（例如）在更改数据网格的 ItemsSource 时发生。

应用程序结构基本上是通过层次结构递归访问，每个层次结构级别显示一个页面。在层次结构中当前节点的页面上，显示了每个子节点和一些孙节点，并且可以显示任何子节点的数据网格。在实践中，我始终使用以下导航结构重现这一点：

```
Root page: shows no datagrid
  Child page: shows one datagrid and a few listviews
    Grandchild page: shows two datagrids, one bound to the
                     same source as Child page, the other one empty 
```

一个典型的测试场景是，从 Root 开始，移动到 Child，移动到 Grandchild，移动回 Child，然后当我再次尝试导航到 Grandchild 时，它失败了，除了我上面提到的异常。但它可能会在我第一次击中孙子时失败，或者它可能让我在失败之前来回移动几次。

调用堆栈上只有一个托管帧，即未处理的异常事件处理程序。这是非常无益的。切换到混合模式调试，我得到以下信息：

```
WinRTClient.exe!WinRTClient.App.InitializeComponent.AnonymousMethod__14(object sender, Windows.UI.Xaml.UnhandledExceptionEventArgs e) Line 50 + 0x20 bytes  C#
[Native to Managed Transition]  
Windows.UI.Xaml.dll!DirectUI::CFTMEventSource<Windows::UI::Xaml::IUnhandledExceptionEventHandler,Windows::UI::Xaml::IApplication,Windows::UI::Xaml::IUnhandledExceptionEventArgs>::Raise(Windows::UI::Xaml::IApplication * pSource, Windows::UI::Xaml::IUnhandledExceptionEventArgs * pArgs)  Line 327  C++
Windows.UI.Xaml.dll!DirectUI::Application::RaiseUnhandledExceptionEventHelper(long hrEncountered, unsigned short * pszErrorMessage, unsigned int * pfIsHandled)  Line 920 + 0xa bytes   C++
Windows.UI.Xaml.dll!DirectUI::ErrorHelper::CallAUHandler(unsigned int errorCode, unsigned int * pfIsHandled, wchar_t * * pbstrErrorMessage)  Line 39 + 0x14 bytes   C++
Windows.UI.Xaml.dll!DirectUI::ErrorHelper::ProcessUnhandledErrorForUserCode(long error)  Line 82 + 0x10 bytes   C++
Windows.UI.Xaml.dll!AgCoreCallbacks::CallAUHandler(unsigned int errorCode)  Line 1104 + 0x8 bytes   C++
Windows.UI.Xaml.dll!CCoreServices::ReportUnhandledError(long errorXR)  Line 6582    C++
Windows.UI.Xaml.dll!CXcpDispatcher::Tick()  Line 1126 + 0xb bytes   C++
Windows.UI.Xaml.dll!CXcpDispatcher::OnReentrancyProtectedWindowMessage(HWND__ * hwnd, unsigned int msg, unsigned int wParam, long lParam)  Line 653 C++
Windows.UI.Xaml.dll!CXcpDispatcher::WindowProc(HWND__ * hwnd, unsigned int msg, unsigned int wParam, long lParam)  Line 401 + 0x24 bytes    C++
user32.dll!_InternalCallWinProc@20()  + 0x23 bytes  
user32.dll!_UserCallWinProcCheckWow@36()  + 0xbd bytes  
user32.dll!_DispatchMessageWorker@8()  + 0xf8 bytes 
user32.dll!_DispatchMessageW@4()  + 0x10 bytes  
Windows.UI.dll!Windows::UI::Core::CDispatcher::ProcessMessage(int bDrainQueue, int * pbAnyMessages)  Line 121   C++
Windows.UI.dll!Windows::UI::Core::CDispatcher::ProcessEvents(Windows::UI::Core::CoreProcessEventsOption options)  Line 184 + 0x10 bytes C++
Windows.UI.Xaml.dll!CJupiterWindow::RunCoreWindowMessageLoop()  Line 416 + 0xb bytes    C++
Windows.UI.Xaml.dll!CJupiterControl::RunMessageLoop()  Line 714 + 0x5 bytes C++
Windows.UI.Xaml.dll!DirectUI::DXamlCore::RunMessageLoop()  Line 2539 + 0x5 bytes    C++
Windows.UI.Xaml.dll!DirectUI::FrameworkView::Run()  Line 91 C++
twinapi.dll!`Windows::ApplicationModel::Core::CoreApplicationViewAgileContainer::RuntimeClassInitialize'::`55'::<lambda_A2234BA2CCD64E2C>::operator()(void * pv)  Line 560  C++
twinapi.dll!`Windows::ApplicationModel::Core::CoreApplicationViewAgileContainer::RuntimeClassInitialize'::`55'::<lambda_A2234BA2CCD64E2C>::<helper_func>(void * pv)  Line 613 + 0xe bytes   C++
SHCore.dll!_SHWaitForThreadWithWakeMask@12()  + 0xceab bytes    
kernel32.dll!@BaseThreadInitThunk@12()  + 0xe bytes 
ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

这向我表明，无论我做错了什么，直到在应用程序的消息循环中至少一个循环之后才会注册（我还尝试使用“Debug | Exceptions ...”打破所有抛出的异常 - 就我可以说，没有东西被扔掉和吞下）。我看到的有趣的堆栈帧是`WindowProc`、`OnReentrancyProtectedWindowMessage`和`Tick`。是 0x402 (1026)，这`msg`对我来说没有任何意义。[此页面](http://wiki.winehq.org/List_Of_Windows_Messages)列出了在以下上下文中使用的消息：

```
CBEM_SETIMAGELIST 
DDM_CLOSE 
DM_REPOSITION 
HKM_GETHOTKEY 
PBM_SETPOS 
RB_DELETEBAND 
SB_GETTEXTA 
TB_CHECKBUTTON 
TBM_GETRANGEMAX 
WM_PSD_MINMARGINRECT 
```

...但这对我来说也没什么意义（它甚至可能不相关）。

我能想到的三个理论是：

1.  **内存压力。**但是我遇到了这个问题，我有 24% 的物理内存可用，而应用程序消耗的内存不到 100MB。其他时候，该应用程序在导航一段时间并占用 400MB 内存时不会遇到任何问题
2.  **线程问题，**例如从工作线程访问 UI 线程。而且，事实上，我确实在后台线程上进行了数据访问。但这是使用在 WinForms 环境和 Outlook 插件中非常可靠的（移植的）框架，我认为线程使用是安全的。此外，我可以在这个应用程序中使用相同的数据，而不会出现任何问题，只是绑定到 ListViews 等等。最后，配置 Grandchild 节点，以便在第一个数据网格中选择一行会启动对该行的详细信息项的请求，该请求将显示在第二个数据网格中（最初是空的，并且可以保持不变而不会阻止异常）。这发生在没有页面转换的情况下，只要我选择摆弄选择，它就可以完美地工作。但是导航回 Child 可能会立即杀死我，
3.  **某种**资源耗尽，可能是 GUI 句柄。**但我不认为我对这个系统施加了那么大的压力。在一次执行中，中断异常处理程序，任务管理器报告使用 662 个句柄、21 个用户对象和 12 个 GDI 对象的进程，而 Tweetro 分别使用 734、37 和 19 个没有问题。在这个类别中我还可能缺少什么？**

 **我有足够的可用磁盘空间，并且除了配置文件之外，我没有将磁盘用于任何其他内容（并且在添加数据网格之前一切正常）。

我的下一个想法是尝试遍历数据网格代码中一些潜在的“有趣”部分，并跳过任何有问题的部分。我确实尝试过使用数据网格的 ArrangeOverride，但异常似乎并不关心我是否这样做。另外，我不确定这是一个有用的策略。由于直到消息循环的一个循环之后才会引发异常，并且由于我无法确定它何时会发生，所以我需要涵盖大量的排列，运行每个排列大量次，隔离问题代码。

在调试和发布模式下都会引发错误。而且，作为最后的背景说明，我们在这里处理的数据量很小，比我单独运行的 10000 行数据网格要小得多。它可能大约有 50-100 行，可能有 30-40 列。在抛出异常之前，数据和网格似乎可以正常工作并且响应良好。

**所以，这就是我来找你的原因。我的两个问题是：**

1.  错误信息是否为您提供了有关可能是什么问题的任何提示？
2.  您将使用什么调试策略来隔离问题代码？

非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-27T04:37:13.943

好的，通过[Tim Heuer [MSFT] 的一些关键意见](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d778c6e0-c248-4a1a-9391-28d038247578)，我弄清楚了发生了什么以及如何解决这个问题。

令人惊讶的是，我最初的三个猜测都不是正确的。这与内存、线程或系统资源无关。相反，它是关于 Windows 消息传递系统的限制。显然，它有点像堆栈溢出异常，因为当您一次对可视化树进行太多更改时，异步更新队列会变得很长，以至于它会跳线并抛出异常。

在这种情况下，问题是有足够的 UIElements 进入我正在使用的数据网格，从而允许网格一次生成所有自己的列，在某些情况下可能会超过限制。我同时使用了多个网格，并且所有的加载都是为了响应页面导航事件，这使得确定它变得更加棘手。

值得庆幸的是，我遇到的限制不是可视化树或 XAML UI 子系统本身的限制，只是用于更新它的消息传递。这意味着，如果我可以在调度程序时钟的多个滴答声中展开相同的操作，我可以完成相同的最终结果。

我最终做的是指示我的数据网格不要自动生成自己的列。相反，我将网格嵌入到用户控件中，当加载数据时，它会解析出所需的列并将它们加载到列表中。然后，我调用了以下方法：

```
void LoadNextColumns(List<ColumnDisplaySetup> colDef, int startIdx, int numToLoad)
{
    for (int idx = startIdx; idx < startIdx + numToLoad && idx < colDef.Count; idx++)
    {
        DataGridTextColumn newCol = new DataGridTextColumn();
        newCol.Header = colDef[idx].Header;
        newCol.Binding = new Binding() { Path = new PropertyPath(colDef[idx].Property) };
        dgMainGrid.Columns.Add(newCol);
    }

    if (startIdx + numToLoad < colDef.Count)
    {
        Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
            {
                    LoadNextColumns(colDef, startIdx + numToLoad, numToLoad);
            });
    }
} 
```

（`ColumnDisplaySetup`是一种用于容纳解析出的配置或从文件加载的配置的普通类型。）

分别使用以下参数调用此方法：列列表，0，以及我任意猜测的 5 作为一次加载的相当安全的列数；但是这个数字是基于测试和预期可以同时加载大量网格的。我向蒂姆询问了更多信息，这些信息可能会为这部分过程提供信息，如果我了解更多关于如何确定多少安全的信息，我会在这里报告。

在实践中，这似乎工作得很好，尽管它会导致您期望的那种渐进式渲染，并且列明显弹出。我希望这可以通过使用最大可能值`numToLoad`和其他 UI 技巧来改善 -手。我可能会研究在生成列时隐藏网格，并且仅在一切准备就绪时才显示结果。最终决定将归结为哪个感觉更“快速和流畅”。

同样，如果我得到它，我会用更多信息更新这个答案，但我希望这可以帮助将来面临类似问题的人。在投入比我愿意承认的更多的时间来寻找错误之后，我不希望其他人为此而自杀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T15:23:59.687

在将我的应用程序重新定位到 Windows 8.1 之后，此问题似乎已在 Windows 8.1 Preview 中得到修复。我无法再通过将数千个视觉效果放到屏幕上来重现这个问题。**

# javascript - 如何在 JavaScript 数组中存储 HTML 标题

> ID：12584621
> 
> 赞同：2
> 
> 时间：2012-09-25T14:02:49.873
> 
> 标签：javascript, html

我有一个 javascript 数组，它被硬编码到我的 javascript 文件中：

```
var avatar_layers = new Array('background', 'body', 'hair', 'shirt', 'arms', 'legs', 'feet', 'weapon') 
```

由于它是硬编码的，因此很难在不同的 HTML 文件之间使用它。

我想更改它，以便 javascript 将在页面上查找所有具有标题类的 h3 标签，并使用这些标签的内容来创建数组。

我怎样才能做到这一点？

在阅读之后，我发现我应该使用以下内容

> document.getElementsByTagName("h3.title")[0];

这将获得所有 h3.titles。但是，我不确定如何将收集到的数据输出为数组。

我真的很感激任何指示。谢谢！

**更新：我不能使用 Jquery，它必须是普通的 java 脚本**

**你可以在这里看到我的代码：http: [//jsfiddle.net/zk5Hn/2/](http://jsfiddle.net/zk5Hn/2/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:11:58.180

```
​var array = [];

(function(){
    var elements = document.getElementsByTagName("h3");
    for (var i = 0; i < elements.length; i++) {
        array.push(elements[i].innerText);
    }
})();

​alert(array);​ 
```

试试看。

[http://jsfiddle.net/Jsckt/](http://jsfiddle.net/Jsckt/)

或者，您可以使用 jquery：

```
$(function(){
    var array = [];

    $("h3.title").each(function() {
        array.push(this.innerText);
    });

    alert(array);
}​;​ 
```

[http://jsfiddle.net/Jsckt/2/](http://jsfiddle.net/Jsckt/2/)

5年后编辑：

1.  出于性能和期望的原因，这些天应该避免使用 innerText
2.  您现在可以将 DOM 节点列表分解为数组

从 2018 年开始，您可以使用 up2date 解决方案：

```
const headings = [...document.querySelectorAll("h3.title")].map(node => node.textContent);
alert(headings); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:07:01.673

不，[`document.getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)不会应用类选择器，您需要使用[`document.querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/document.querySelectorAll)它（并且因为 IE 等旧版浏览器不支持它，您可能需要使用选择器库或其他一些解决方法）。

然后，你得到了一个`NodeList`已经像一个元素数组的背部。遍历它并将每个元素的内容添加到您的数组中：

```
var headingEls = document.querySelectorAll("h3.title");
var avatar_layers = []; // empty array literal
for (var i=0; i<headingEls.length; i++)
    avatar_layers.push(headingEls[i].textContent); 
```

不要忘记在加载 DOM 之前您可以访问元素，您需要在`domready`事件上执行该片段；你不能立即使用数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T14:12:22.827

就像是：

```
var titles = document.querySelectorAll('.title'),
    avatar_layers = [];
for( var i=0; i<titles.length; i++ ) {
    avatar_layers.push( titles[i].innerHTML );
} 
```

它将创建一个新的空数组。然后查看所有具有该类的元素`.title`并提取它的 HTML 内容。然后将此内容推送到数组中。

使用 jQuery 会很简单：

```
var avatar_layers = $('.title').map(function(){
    return $(this).html();
}); 
```

这是你想要的吗？

请注意，`querySelectorAll`IE7 不支持此功能，因此如果您需要对这些浏览器的支持，则需要 jQuery 之类的库或其他一些解决方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:11:15.187

```
var h3s = document.getElementsByTagName("h3");

var arr = [].map.call(h3s, function(el) {
                              return el.textContent || el.innerText;
                           }); 
```

您可以在此处获取`.map`旧浏览器的补丁：[MDN`.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Compatibility)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T14:14:37.597

如果您使用的是 jQuery，

```
var titleArray = new Array();
$('h3.title').each(function(){
    titleArray.push($(this).text());
});

alert(titleArray); 
```

演示：http: [//jsfiddle.net/muthkum/WVsEB/3/](http://jsfiddle.net/muthkum/WVsEB/3/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T14:32:24.170

旧版本的 Javascript 没有通过属性“类”选择元素的原生方法。在过去，我找到了一种自创的方法来填补这一空白。您可以在[此处](http://www.anyexample.com/webdev/javascript/javascript_getelementsbyclass_function.xml)找到解决方法。此功能也适用于 IE6

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T14:18:11.863

```
<h3 class = 'title'>trtr</h3>
<h3 class = 'title'>tcrtr</h3>
<h3 class = 'title'>tdrtr</h3>
<h3 class = 'title'>trrtr</h3>
<h3>trgtr</h3>

var arrayDemo  = [];
$.each($('h3[class*=title]'), function () {
         arrayDemo.push(this.innerHTML);
});

alert(arrayDemo); 
```

这是此 [http://jsfiddle.net/ymtFg/的演示](http://jsfiddle.net/ymtFg/)

# c# - 有什么 Ruby Mixins 可以做 C# 伪 Mixins（接口 + 扩展方法）不能做的事情吗？

> ID：12584625
> 
> 赞同：2
> 
> 时间：2012-09-25T14:03:00.350
> 
> 标签：c#, .net, ruby, mixins

我试图更好地了解`Ruby`. 所以 Ruby 提出`Mixins`了一个一流的概念。在`C#`一个可以创建`Extension Methods`的行为上`Interfaces`。因此，这两种技术都提供了一种广为人知的机制`Mixin`。

在特定示例上比较这两种方法可能会很好。

**Ruby 中的可枚举**

让我们采用所有那些适用于集合的漂亮方法。在 Ruby 中，这些是,`all?`等等：[http ://ruby-doc.org/core-1.9.3/Enumerable.html](http://ruby-doc.org/core-1.9.3/Enumerable.html)`any?``count`

来自文档： *Enumerable mixin 为集合类提供了几种遍历和搜索方法，并具有排序功能。每个类必须提供一个方法，该方法产生集合的连续成员。*

**C#中的可枚举**

里面有`C#`一个叫做的特性`LINQ`，它也提供了这些方法`All`，`Any`等等`Count`。

如果你想让你的类“ `LINQ enabled`”，你需要实现`IEnumerable<T>`接口，这迫使你还提供一个`GetEnumerator`在概念上非常接近 ruby​​ 方法的方法。

因此，从鸟的角度来看，您的班级现在获得了上述所有方法。它是怎么发生的？

`.NET`将所有这些方法定义为接口上的所有`LINQ`方法。并且由于您实现了这个接口，您现在“混合”了所有这些方法。`Extension Methods``IEnumerable<T>`

我想知道这两种方法有多大不同，如果有什么事情`Ruby Mixins`可以做到`C#'s` `Interface`+`Extension Method`战略不能做？`Ruby Mixins`好吧，除了可以在运行时混合的事实。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:36:17.510

它们在概念上非常相似，但 C# 的版本更保守——Ruby Mixins 可以访问私有实例变量，并且可以定义私有方法，甚至替换方法。C#扩展方法只能定义公共方法，没有任何特殊的访问权限。

Ruby Mixins 实际上*改变*了类，而扩展方法是一种方法调度技巧（编译器说，“任何名称为*Foo()*的实例方法？任何扩展方法？是的？我只是将其作为对这个静态方法的调用发出”）。

另一个区别是扩展方法是*scoped*，而 Mixins 不是（你不能在 Ruby 文件中指定你想要的 Mixins，一旦它们在其他地方声明，它们就会终身使用）。Ruby 已经讨论过添加它（他们有一些名称，“规范”或其他东西？），但它最终变得相当复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:12:57.720

Mixin 是由其超类参数化的类。与扩展方法根本没有任何关系，因此比较它们甚至没有意义。

# c# - 独占访问文件

> ID：12584626
> 
> 赞同：0
> 
> 时间：2012-09-25T14:03:05.637
> 
> 标签：c#, .net, file-io

> **可能重复：**
> [在 C# 中以独占模式打开文件](https://stackoverflow.com/questions/685135/open-file-in-exclusive-mode-in-c-sharp)

我的应用有时需要读取一个文件。应用程序在开始使用之前必须确保没有人在使用它。当它（应用程序）使用它时，没有人可以修改它（甚至从中读取）。

我该怎么做？

# jquery-mobile - JQM 切换列表视图项目主题

> ID：12584627
> 
> 赞同：1
> 
> 时间：2012-09-25T14:03:08.420
> 
> 标签：jquery-mobile

我正在尝试创建一个 JQM 列表视图，当用户单击该项目时，主题会在其中切换。我已经做到了这一点：http: [//jsfiddle.net/skNsF/6/](http://jsfiddle.net/skNsF/6/)。它几乎可以工作，但右侧的图标按钮没有改变。

我怎样才能让整行更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:32:14.007

我想到了。我需要遍历项目的每个子项并更改类和主题。在此处查看解决方案：http: [//jsfiddle.net/skNsF/10/](http://jsfiddle.net/skNsF/10/)。

# c# - x64 与 x86 上的实体框架启动要慢得多

> ID：12584628
> 
> 赞同：21
> 
> 时间：2012-09-25T14:03:11.350
> 
> 标签：c#, performance, entity-framework, x86, 64-bit

我的同事昨天发布了这个问题：[7-second EF startup time even for tiny DbContext](https://stackoverflow.com/questions/12572623/7-second-ef-startup-time-even-for-tiny-dbcontext)。

在将他的代码移到单独的解决方案中以尽可能将其隔离后，我发现包含项目的平台目标对 EF 启动过程的运行时产生了深远的影响。

当以 x64 为目标时，我看到测试用了大约 7 秒来启动第一个 DbContext，并且不到 1 秒来启动第二个 DbContext（与我的同事的发现一致，他也以 x64 为目标）。但是，当我将平台目标切换到 x86 时，第一个 DbContext 启动时间减少了大约 4 秒，降至 3.34633 秒，而第二个 DbContext 花费的时间与 x64 情况相同。

鉴于此，当针对 64 位系统和 32 位系统时，Entity Framework 似乎正在经历一个截然不同的初始化过程。有没有人对引擎盖下发生的事情有任何洞察力来解释这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T17:55:57.593

这个问题是完全可重现的。我刚刚运行它并使用 dotTrace 性能分析器收集 x86 和 x64 执行的快照。我得到的时间和你报告的差不多。但是 x64 和 x86 跟踪之间确实没有明显的区别—​​—除了 x64 在任何地方都需要至少两倍于 x86 的时间。

但那是对 NUnit 测试运行的跟踪。通过像控制台应用程序一样运行相同的测试，我得到这样的时间：

```
x86: 0,6864012, 0,0468001
x64: 1,0608019, 0,0468001 
```

这看起来好多了，不是吗？x86 和 x64 之间仍然存在差异，但是对于某些操作，x64 代码通常会更慢。

此时的问题不在于 EF，而在于 NUnit 及其测试运行器。

编辑：

我又做了一些测试。NUnit 和 Resharper 的任务运行器都有这个问题，但它只影响第一次测试。所有其他测试都运行得很快。xUnit 显示相同的行为。

# c++ - 考虑内存消耗

> ID：12584630
> 
> 赞同：4
> 
> 时间：2012-09-25T14:03:13.070
> 
> 标签：c++, c, linux

考虑进程消耗的内存的策略是什么？例如，我有一个程序，在旧版本中，它的内存使用不是最理想的，并且没有在正确的时间释放，这意味着它持有分配的时间比它应该的要长。请注意，我并不是说它泄露了。新版本的程序修改了算法，现在内存在程序的生命周期中被更快地释放。怎么能追踪到这个？想到的一些方法是：编写一个包装 libc/libstdc++ 的 malloc/new 替换库，以某种方式使用 valgrind 来完成它，或者使用 ps 对进程使用的内存进行采样并绘制图表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:09:29.787

如果您不想使用第三方（有一些来自 AMD、Intel、valgrind 应该有“massif”工具），您可以查看 [Mtrace](http://en.wikipedia.org/wiki/Mtrace)。

几乎完成了您计划的内存分配。

我宁愿推荐你使用 valgrinds massif 工具，它没有像样的 gui/graph，但显示 procentuals 相当准确

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:13:20.113

在使用 ps 分析所使用的内存之前......请参阅这个很棒的软问题：[如何测量应用程序或进程的实际内存使用情况？](https://stackoverflow.com/questions/131303/linux-how-to-measure-actual-memory-usage-of-an-application-or-process)

但是只要你对 ps 的限制没问题，你可以使用 crontab 创建一个每 N 秒/分钟运行一次的作业……将结果附加`ps aux`到文件中……然后你可以使用电子表格软件来绘制随着时间的推移记忆的结果。

过去我已经成功地做到了这一点。

然而，Valgrind 可能是一个更好的选择：http: [//valgrind.org/docs/manual/quick-start.html](http://valgrind.org/docs/manual/quick-start.html)

你可以用这个做一些非常相似的事情。

# java - 正则表达式仅在捕获之前与两个相似的 URL 进行非常具体的匹配

> ID：12584639
> 
> 赞同：1
> 
> 时间：2012-09-25T14:03:49.257
> 
> 标签：java, regex, regex-lookarounds

因此，我试图仅提取特定图像的名称以及与之一起捕获的图像扩展名。唯一的问题是，有两种非常相似的形式，而两种形式只是图像 url 的显示方式。

第一个网址显示如下

```
http://www.trollface.com/dolan/images/IMGnameEYEwant.jpg 
```

唯一的问题是有时图像也会以这种方式显示：

```
http://www.trollface.com/dolan/images/small/IMGnameEYEwant.jpg 
```

现在我知道这无论如何都不优雅，但我必须使用这样的东西：

```
trollface\.com/dolan/images/(.*?)"> 
```

到目前为止，这一直运行良好，因为这两个 URL 非常相似

另一个问题是**我需要纯正则表达式的解决方案。没有java，php，javascript什么都没有。**甚至试图让它像这样事先尝试每个字母组合，我再次知道这是非常糟糕的方法，但我是一个正则表达式菜鸟：

```
[ao][gr]e[s/][/i][pm][ra][og][de][us][c/][tp][/r][so][md][au][lc][lt]/(.*?)"> 
```

唯一的问题是它总是会首先找到第一个 URL，因为它们非常相似，并且总是会捕获`small/`我不需要的 URL 部分。

我该怎么做？我在想也许是向前看或向后看，但我没有足够的经验来让这些工作。

**编辑：**核心是基于 Java 的，但在当前情况下，我不能使用 Java 来帮助解决这个问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:10:22.720

```
#http://www.trollface.com/dolan/images/(?:small/)?([^/\#]+)# 
```

正则表达式的解释，在文字匹配之后：

```
(?: ... ) 
```

非捕获组。意思是“匹配这个，但不要传回去。”

```
... ? 
```

将前一组设为可选。

```
(  ... ) 
```

捕获组

```
[^/\#]+ 
```

任何不是正斜杠或井号标签的字符，一次或多次。您可能不需要在 Java 中转义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:19:53.747

```
var test1="http://www.trollface.com/dolan/images/IMGnameEYEwant.jpg";
var test2="http://www.trollface.com/dolan/images/small/IMGnameEYEwant.jpg";
var test3="http://google.com/";

var rx = /(http:\/\/www\.trollface\.com\/dolan\/images\/)(?:small)?(.+)/i;

var m = test1.match(rx);
if(m.length == 3) {
    alert(m[1]);
    alert(m[2]);
}
var m = test2.match(rx);
if(m.length == 3) {
    alert(m[1]);
    alert(m[2]);
}
var m = test3.match(rx);
if(m.length == 3) {
    alert(m[1]);
    alert(m[2]);
} 
```

# android - Android：是否有可能以及如何更改 WebView 中显示的 HTML 页面的字体大小？

> ID：12584640
> 
> 赞同：3
> 
> 时间：2012-09-25T14:03:51.160
> 
> 标签：android, html, webview, font-size

是否有可能以及如何更改 WebView 中显示的 HTML 页面的字体大小？类似于桌面浏览器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:08:04.403

尝试这个

```
WebSettings webSettings = webView.getSettings();

webSettings.setTextSize(WebSettings.TextSize.SMALLEST); 
```

这个也有效：-

```
webSettings.setDefaultFontSize(15); 
```

这可能对您有所帮助。

欲了解更多信息，请查看

[如何更改 Android WebView 中的 FontSize？](https://stackoverflow.com/questions/3796176/android-webview-font-size-change)

或 [WebView 文本大小](https://stackoverflow.com/questions/12573666/webview-text-size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:07:47.673

是的，您可以尝试其中任何一种。

```
WebSettings webSettings = webView.getSettings();
webSettings.setTextSize(WebSettings.TextSize.SMALLEST); 
```

或者

```
webSettings.setDefaultFontSize(10); 
```

# python - Python 跨平台操作系统

> ID：12584647
> 
> 赞同：3
> 
> 时间：2012-09-25T14:04:17.777
> 
> 标签：python

目前我的 Python 程序打开一个像这样的文本文件：

```
os.system('gedit decryptedText.txt&') 
```

现在，我认为这在 Windows 上不起作用，因为 gedit 是一个 Linux 应用程序？我怎样才能让它在 Windows 和 Linux 上运行。还是两者都适用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:07:57.557

首先检查操作系统，然后根据结果分配？

```
if os.name == 'nt':
    os.system('notepad ecryptedText.txt&')
elif os.name == 'posix':
    os.system('gedit decryptedText.txt&') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:23:16.197

在 MS Windows 上，您可以将[os.startfile(filename)](http://docs.python.org/library/os.html#os.startfile)用于具有关联编辑器的文件类型。

因此，您的完整解决方案将类似于：

```
def start_file(filename):
    if os.name == 'nt':
        os.startfile(filename)
    else:
        os.system('gedit %s&' % filename) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:08:25.300

显然，它适用于两者，因为 gedit 是 Universe 的标准编辑器。

开玩笑。它不起作用，因为您实际上是在启动一个特定的应用程序，仅在某些平台 (Linux) 上可用。您可以在配置文件中配置您的默认编辑器启动命令，并使用它来组成您的命令字符串。

# algorithm - 理解“两个排序数组的中位数”的算法

> ID：12584648
> 
> 赞同：3
> 
> 时间：2012-09-25T14:04:22.417
> 
> 标签：algorithm

> 有两个大小分别为 m 和 n 的排序数组 A 和 B。找到两个排序数组的中位数。总体运行时间复杂度应为 O (log (m+n))。

```
double findMedianSortedArrays(int A[], int m, int B[], int n) {
    return findMedianHelper2(A, m, B, n, max(0, (m-n)/2), min(m-1, (m+n)/2));
}

double findMedianHelper2(const int A[], const int m, const int B[], const int n, const int l, const int r) {
    if (l > r) return findMedianHelper2(B, n, A, m, max(0, (n-m)/2), min(n-1, (m+n)/2));

    int i = (l+r)/2;
    int j = (m+n)/2-i;

    assert(i >= 0 && i <= m && j >= 0 && j <= n);
    int Ai_1 = ((i == 0) ? INT_MIN : A[i-1]);
    int Bj_1 = ((j == 0) ? INT_MIN : B[j-1]);
    int Ai = ((i == m) ? INT_MAX : A[i]);
    int Bj = ((j == n) ? INT_MAX : B[j]);

    if (Ai < Bj_1) return findMedianHelper2(A, m, B, n, i+1, r);
    if (Ai > Bj) return findMedianHelper2(A, m, B, n, l, i-1);

    if (((m+n) % 2) == 1) return A[i];
    return (max(Ai_1, Bj_1) + Ai) / 2.0;
} 
```

问题：选择`l = max(0, (m-n)/2)`和是什么意思`r = min(m-1, (m+n)/2)`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:13:49.017

那个代码对我来说没有意义。但是，我认为这里的关键是确保 m>n 和值 (mn)/2 和 (m+n)/2 正确传递给辅助函数。此外，从辅助函数开头的 if 语句中，我们可以看出其意图是在 m<n 时进行修复。

假设 m>0 和 n>0（它们必须如此才能使数组有意义。）
如果 m>n，那么在辅助函数内部，(l>r) 将为假，并且算法应该运行良好。
如果 m<n，那么在帮助器内部， (l>r) 将为假（除非 m=1），并且“修复”似乎根本无法修复任何东西。

因此，我认为代码一开始就有问题。
但是，主要部分对我来说似乎很有意义，并且确实帮助我实现了在 JAVA 中做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:36:27.520

问题 > 选择 l = max(0, (mn)/2) and r = min(m-1, (m+n)/2) 是什么意思

MAX 和 MIN 用于限制值，因此它们不能低于或高于约束。

```
IF m - n < 0 THEN
    l = 0
ELSE l = (m - n) / 2

IF (m + n) / 2 > m - 1 THEN
    r = m -1
ELSE r = (m + n) / 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:16:02.607

首先。让我们证明 m=n 情况下的算法。将中间元素命名为“k”

*   m1:=A[n/2]

    m2:=B[n/1]`

    如果 m1 < m2，则 m1 < k < m2，否则 m2 < k < m1。

    证明：m1 < k 所以让 m2 < k 但它不正确：“k”元素索引明显高于 n。因此 m2 > k。

如果 m1 > k 与我们得到 m2 < k 的方式相同。

*   A 和 B 合并的中间元素将以相同的方式成为 A/2 和 B/2 合并的中间元素。所以我们需要继续在两个数组中查找元素：A/2 和 B/2 所以转到 1) 项，直到数组相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-03T02:44:28.757

选择这样的左右索引的原因是跳过不能是两个排序数组中位数的元素。

不失一般性，我们假设`m > n`。然后有两种极端情况：

*   即使 B 中的所有元素都小于`A[0]`，中位数仍然不可能是其中的元素，`A[0, ... , (m - n) / 2 - 1]`因为`n + (m - n) / 2 - 1 < (m + n) / 2`。
*   同样，即使 B 中的所有元素都大于 A[m - 1]，中位数仍然不可能是其中的元素，`A[(m + n) / 2 + 1, ... , m - 1]`因为`A[(m + n) / 2]`必须是中位数。

基于这个观察，我们只需要对较长数组的一个子数组进行二分查找，就可以找到中位数。

在 ,和的情况下`m < n`，这基本上意味着中位数可能是较短数组中的任何元素。`l = max(0, (m-n)/2) = 0``r = min(m-1, (m+n)/2) = m - 1`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-14T01:49:35.087

[http://leetcode.com/2011/03/median-of-two-sorted-arrays.html](http://leetcode.com/2011/03/median-of-two-sorted-arrays.html) 这里是这个算法的分析细节

# magento - 如何从 my_category.phtml 重定向到 magento 中的控制器方法？

> ID：12584654
> 
> 赞同：0
> 
> 时间：2012-09-25T14:04:35.607
> 
> 标签：magento, php

我用后端 magento 中的一些产品创建了 my_category，并且我有带有方法产品的控制器。

如何将客户从[http://bla-bla.com/my_category.phtml重定向到](http://bla-bla.com/my_category.phtml)[http://bla-bla.com/controller/products](http://bla-bla.com/controller/products)？

谢谢。

# c# - 响应关键字无法识别

> ID：12584664
> 
> 赞同：1
> 
> 时间：2012-09-25T14:05:07.820
> 
> 标签：c#

我正在尝试使用类似命令`Response.ClearContent()`并将`Response.Write()`数据表导出到 Excel，但是 Visual Studio 无法识别该`Response`关键字。是否有`using`与这些命令相关的语句？因为我显然错过了一些东西。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:12:53.103

`Response`只是[System.Web.UI.Page](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx)类的一个属性（它不是语言关键字）。当您从扩展的类编写代码时`Page`（Visual Studio 将自动为 .aspx 文件执行此操作），那么`Repsonse`它将是一个有效的实例字段（在这种情况下，您实际上不需要任何`using`语句来使用它）。

如果您没有看到它，那么您很可能是从一个没有扩展的类中编写代码`Page`。您可能需要将响应对象（类型为`System.Web.HttpResponse`）或`HttpContext`（具有对响应对象的引用）传递到您正在使用的类中。如果您知道在执行代码时有一个有效的 HttpContext ，它也可能是一个使用选项，`HttpContext.Current.Response`而不是通过方法参数传递响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:08:13.327

你可能想要：

```
HttpContext.Current.Response 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:11:27.010

它是命名空间中的[`HttpResponse`类](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.aspx)[`System.Web`](http://msdn.microsoft.com/en-us/library/system.web.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:18:20.890

Response 是[Page](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx)类中的[HttpResponse类型的属性。](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.aspx)并且是 HttpResponse 类型的实例方法。`.ClearContent()``.Write()`

我看不出你希望如何使用它来编写一个*数据表来表现出色*（除非我大大忽略了某些东西）。无论如何，您可以使用 Response 将数据表的内容写入网页，但是要写入 excel，您可能需要第三方库或其他一些功能...... [http://www.codeproject.com/Articles/ 8411/C-class-library-for-exporting-data-to-CSV-Excel-fi](http://www.codeproject.com/Articles/8411/C-class-library-for-exporting-data-to-CSV-Excel-fi)

# ios - 我可以在另一个 Info.plist 键的值中使用 Info.plist 中一个键的值吗？

> ID：12584666
> 
> 赞同：7
> 
> 时间：2012-09-25T14:05:20.587
> 
> 标签：ios, xcode, xcode4

我想在另一个 Info.plist 键 (NSContactsUsageDescription) 的值中使用“捆绑显示名称”(CFBundleDisplayName) 的值。

我尝试了以下方法，但这不起作用：

```
${CFBundleDisplayName} must access your Address Book to input the scanned contact
information. ${CFBundleDisplayName} will never access your Address Book for marketing
or advertising purposes. 
```

有人知道该怎么做吗？

附录：在本地化值时，该解决方案也应该有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:31:22.463

使用`${VARIABLE}`您只能引用构建设置，但不能引用 Info.plist 中的其他值。尝试添加一个新的用户定义的构建设置并使用它。转到**构建设置**选项卡，然后单击右下角的**添加构建设置**。

# emacs - 如何在emacs中为偶数/奇数行着色？

> ID：12584670
> 
> 赞同：1
> 
> 时间：2012-09-25T14:05:24.970
> 
> 标签：emacs

我想在 emacs 中为偶数行和奇数行设置不同的背景颜色，就像在表格中经常做的那样：

```
df vsdfv    <--gray
sdf ve f    <--white
d vdvew     <--gray
w34rv wfv   <--white
...and so on<--gray 
```

有成熟的剧本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:09:24.420

看看[条纹模式](http://www.emacswiki.org/StripesMode)。

# sql-server-2005 - 为什么查询和函数的执行时间可能不同

> ID：12584672
> 
> 赞同：2
> 
> 时间：2012-09-25T14:05:29.173
> 
> 标签：sql-server-2005

我不清楚为什么标量函数的执行时间至少比单个查询长两倍，基于函数的主体。详细信息：我编写了 sql-query（将变量声明为参数）并用“设置统计时间”覆盖它并运行它。之后，我将 sql-query 覆盖到标量函数中，并再次使用统计时间执行它。结果让我感到困惑：第二种情况的执行时间比第一种情况长得多（至少长两倍）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:48:13.937

标量函数需要为每一行运行一次，并且不能被查询计划引擎优化。在此[评论](https://stackoverflow.com/a/809789/2232256)中阅读更多内容。

# asp.net - _target = 空白和窗口大小

> ID：12584673
> 
> 赞同：0
> 
> 时间：2012-09-25T14:05:32.330
> 
> 标签：asp.net, html, internet-explorer

我的目标是在新窗口中在 IE8 中启动一些页面。我正在使用 _target = blank ，但结果窗口的开始六是像 300X400。所以，我的问题是：如果我使用 _target = black，我是否能够管理浏览器结果窗口的大小？

更新：如果可能的话，我需要没有 js 的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:07:34.437

尝试这样的事情：

```
<script type="text/javascript">
function showPopup(url) {
newwindow=window.open(url,'name','height=190,width=520,top=200,left=300,resizable');
if (window.focus) {newwindow.focus()}
}
</script> 
```

HTML：

```
<a href='...' onClick='showPopup(this.href);return(false);'>Info</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:19:35.500

没有 JavaScript，这是不可能的。所以，这里是代码！

```
<a onclick="window.open('http://www.google.com','nyWindow','width=300,Height=400');">Open Window</a> 
```

希望它可以帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:10:35.200

尝试这个

```
 <a href="#" onclick="window.open('google.com','height=100,width=100');return false;">test</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:14:44.560

这里是如何使用 JQuery 完成的：

```
 <script type="text/javascript">
        var windowSizeArray = [ "width=200,height=200",
                                "width=300,height=400,scrollbars=yes" ];

        $(document).ready(function(){
            $('.newWindow').click(function (event){

                var url = $(this).attr("href");
                var windowName = "popUp";//$(this).attr("name");
                var windowSize = windowSizeArray[$(this).attr("rel")];

                window.open(url, windowName, windowSize);

                event.preventDefault();

            });
        });
    </script>

    <a href="http://www.Zakharko.com/" rel="0" class="newWindow" >open me</a> 
```

# ruby-on-rails - 在生产模式下使用 Helicon Zoo 连接到数据库

> ID：12584674
> 
> 赞同：1
> 
> 时间：2012-09-25T14:05:32.183
> 
> 标签：ruby-on-rails, ruby, helicontech

我在 Windows Server 2008 R2 上使用 Ruby on Rails 和 Helicon Zoo。此 Web 应用程序连接到同一域中不同服务器上的 Windows SQL Server 2008 数据库。

当我尝试以生产模式连接到我们的 SQL Server（web.config 设置为生产）时，我在 Web 浏览器中收到此错误：

```
"We're sorry, but something went wrong." 
```

当我将模式设置为开发并连接时，一切正常。

我的开发和生产数据库的设置在 database.yml 中设置完全相同。他们将使用相同的用户和密码访问同一服务器上的同一数据库。（我设置了这种方式来测试，因为它在我们的生产 sql 服务器上不起作用）

使用 Helicon Zoo 时，我还需要做些什么来为 Rails 设置生产模式吗？

以下是 ZooError.log 中的完整错误：

```
[9/25/2012 08:39:33]    MakeFirstRequest - Exception 
[9/25/2012 08:39:33]    NamedPipeConnection::Read error!
[9/25/2012 08:39:44]    ZooApplication I/O Error:
JobFastCgi:[/] _requestId:1, BACKEND_READ_COMPLETE, POST_MODE_PARTIAL

[9/25/2012 08:41:28]    Status: 500 Internal Server Error

Content-Type: text/html; charset=utf-8

Content-Length: 643

X-Request-Id: a86305bf7e5530a0852e85b8ba4876c2

X-Runtime: 0.281257

Date: Tue, 25 Sep 2012 13:41:28 GMT

X-Rack-Cache: miss

<!DOCTYPE html>
<html>
<head>
  <title>We're sorry, but something went wrong (500)</title>
  <style type="text/css">
    body { background-color: #fff; color: #666; text-align: center; font-family: arial, sans-serif; }
    div.dialog {
      width: 25em;
      padding: 0 4em;
      margin: 4em auto 0 auto;
      border: 1px solid #ccc;
      border-right-color: #999;
      border-bottom-color: #999;
    }
    h1 { font-size: 100%; color: #f00; line-height: 1.5em; }
  </style>
</head>

<body>
  <!-- This file lives in public/500.html -->
  <div class="dialog">
    <h1>We're sorry, but something went wrong.</h1>
  </div>
</body>
</html>

[9/25/2012 08:41:28]    FCGI_END_REQUEST 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:53:33.097

问题不在于 Helicon Zoo。

当我重新检查 log/production.log 文件时，我注意到我收到了这样的错误：

```
ActionView::Template::Error (application.css isn't precompiled): 
```

所以我在 Stackoverflow 上做了一些搜索，发现了这个问题：

[rails 3.1.0 ActionView::Template::Error（application.css 未预编译）](https://stackoverflow.com/questions/7275636/rails-3-1-0-actionviewtemplateerrror-application-css-isnt-precompiled)

根据 Chris Muench 的建议，我将`config.assets.compile`位于 config/environments/production.rb 的内容更改为 true。

在这个改变之后，一切都很好。

# css - 样式未按预期显示

> ID：12584677
> 
> 赞同：0
> 
> 时间：2012-09-25T14:05:48.913
> 
> 标签：css, asp.net-mvc-3, razor

从[上一篇文章](https://stackoverflow.com/questions/12519393/having-problems-getting-getting-razor-to-see-my-css)中，我有以下代码：

```
@model SuburbanCustPortal.Models.AddCustomerModel

@{
  ViewBag.Title = "Add an Existing Account";
}

<h2>Add an existing account.</h2>
<p>
    Use the form below to add an existing account to your web login. 
</p>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
 @Html.ValidationSummary(true, "Account not found. Please verify the infomartion below and try again.")

  <div>
    <fieldset>
      <legend>Account Information</legend>

      <div>
        <label class="small-label">Branch</label><label class="large-label">Account Number</label>      
      </div>

      <br />

      <div>
        @Html.TextBoxFor(m => m.Branch, new { @class = "small-textbox" }) 
        @Html.TextBoxFor(m => m.AccountNumber, new { @class = "large-textbox" })
      </div>

      <div>
        @Html.ValidationMessageFor(m => m.Branch) 
        <br />
        @Html.ValidationMessageFor(m => m.AccountNumber) 
      </div>

      <br />     
      <br />
      <br />

      <fieldset>
        <legend>AND</legend>

          <div class="editor-label">
            @Html.LabelFor(m => m.LastName)
          </div>
          <div class="editor-field">
            @Html.TextBoxFor(m => m.LastName)
            @Html.ValidationMessageFor(m => m.LastName)
          </div>

          <br />

          <label class="excited-label">- OR -</label>

          <div class="editor-label">
            @Html.LabelFor(m => m.PhoneNumber)
          </div>
          <div class="editor-field">
            @Html.TextBoxFor(m => m.PhoneNumber)
            @Html.ValidationMessageFor(m => m.PhoneNumber)
          </div>

      </fieldset>

      <p>
        <input type="submit" value="Register" />
      </p>

    </fieldset>
  </div>
} 
```

任何我的CSS：

```
body {
    background-color: #5c87b2;
    font-size: .85em;
    font-family: "Trebuchet MS", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
    color: #696969;
}

a:link {
    color: #034af3;
    text-decoration: underline;
}

a:visited {
    color: #505abc;
}

a:hover {
    color: #1d60ff;
    text-decoration: none;
}

a:active {
    color: #12eb87;
}

p, ul {
    margin-bottom: 20px;
    line-height: 1.6em;
}

header,
footer,
nav,
section {
    display: block;
}

/* HEADINGS   
----------------------------------------------------------*/
h1, h2, h3, h4, h5, h6 {
    font-size: 1.5em;
    color: #000;
}

h1 {
    font-size: 2em;
    padding-bottom: 0;
    margin-bottom: 0;
}

h2 {
    padding: 0 0 10px 0;
}

h3 {
    font-size: 1.2em;
}

h4 {
    font-size: 1.1em;
}

h5, h6 {
    font-size: 1em;
}

/* PRIMARY LAYOUT ELEMENTS   
----------------------------------------------------------*/

/* you can specify a greater or lesser percentage for the 
page width. Or, you can specify an exact pixel width. */
.page {
    width: 90%;
    margin-left: auto;
    margin-right: auto;
}

header, #header {
    position: relative;
    margin-bottom: 0px;
    color: #000;
    padding: 0;
}

header h1, #header h1 {
    font-weight: bold;
    padding: 5px 0;
    margin: 0;
    color: #fff;
    border: none;
    line-height: 2em;
    font-size: 32px !important;
    text-shadow: 1px 1px 2px #111;
}

#main {
    padding: 30px 30px 15px 30px;
    background-color: #fff;
    border-radius: 4px 0 0 0;
    -webkit-border-radius: 4px 0 0 0;
    -moz-border-radius: 4px 0 0 0;
}

footer, 
#footer {
    background-color: #fff;
    color: #999;
    padding: 10px 0;
    text-align: center;
    line-height: normal;
    margin: 0 0 30px 0;
    font-size: .9em;
    border-radius: 0 0 4px 4px;
    -webkit-border-radius: 0 0 4px 4px;
    -moz-border-radius: 0 0 4px 4px;
}

/* TAB MENU   
----------------------------------------------------------*/
ul#menu {
    border-bottom: 1px #5C87B2 solid;
    padding: 0 0 2px;
    position: relative;
    margin: 0;
    text-align: right;
}

ul#menu li {
    display: inline;
    list-style: none;
}

ul#menu li#greeting {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    color: #fff;
}

ul#menu li a {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    background-color: #e8eef4;
    color: #034af3;
    border-radius: 4px 4px 0 0;
    -webkit-border-radius: 4px 4px 0 0;
    -moz-border-radius: 4px 4px 0 0;
}

ul#menu li a:hover {
    background-color: #fff;
    text-decoration: none;
}

ul#menu li a:active {
    background-color: #a6e2a6;
    text-decoration: none;
}

ul#menu li.selected a {
    background-color: #fff;
    color: #000;
}

/* FORM LAYOUT ELEMENTS   
----------------------------------------------------------*/

fieldset {
    border: 1px solid #ddd;
    padding: 0 1.4em 1.4em 1.4em;
    margin: 0 0 1.5em 0;
}

legend {
    font-size: 1.2em;
    font-weight: bold;
}

textarea {
    min-height: 75px;
}

input[type="text"], 
input[type="password"] {
    border: 1px solid #ccc;
    padding: 2px;
    font-size: 1.2em;
    color: #444;
    width: 200px;
}

select {
    border: 1px solid #ccc;
    padding: 2px;
    font-size: 1.2em;
    color: #444;
}

input[type="submit"] {
    font-size: 1.2em;
    padding: 5px;
}

/* TABLE
----------------------------------------------------------*/

table {
    border: solid 1px #e8eef4;
    border-collapse: collapse;
}

table td {
    padding: 5px;
    border: solid 1px #e8eef4;
}

table th {
    padding: 6px 5px;
    text-align: left;
    background-color: #e8eef4;
    border: solid 1px #e8eef4;
}

/* MISC  
----------------------------------------------------------*/
.clear {
    clear: both;
}

.error {
    color: Red;
}

nav, 
#menucontainer {
    margin-top: 40px;
}

div#title {
    display: block;
    float: left;
    text-align: left;
}

#logindisplay {
    font-size: 1.1em;
    display: block;
    text-align: right;
    margin: 10px;
    color: White;
}

#logindisplay a:link {
    color: white;
    text-decoration: underline;
}

#logindisplay a:visited {
    color: white;
    text-decoration: underline;
}

#logindisplay a:hover {
    color: white;
    text-decoration: none;
}

/* Styles for validation helpers
-----------------------------------------------------------*/
.field-validation-error {
    color: #ff0000;
}

.field-validation-valid {
    display: none;
}

.input-validation-error {
    border: 1px solid #ff0000;
    background-color: #ffeeee;
}

.validation-summary-errors {
    font-weight: bold;
    color: #ff0000;
}

.validation-summary-valid {
    display: none;
}

/* Styles for editor and display helpers
----------------------------------------------------------*/
.display-label, 
.editor-label {
    margin: 1em 0 0 0;
}

.display-field, 
.editor-field {
    margin: 0.5em 0 0 0;
}

.text-box {
    width: 30em;
}

.text-box.multi-line {
    height: 6.5em;
}

.tri-state {
    width: 6em;
}

/* custom created by eric */

.small-label 
{
  float: left;
  width: 50px;
  margin: 1em 0 0 0;
}

.small-textbox 
{
  float: left;
  margin: 1em 0 0 0;
  width: 50px;
}

.large-label 
{
  float: left;
  margin: 1em 0 0 0;
  width: 150px;
}

.large-textbox 
{
  float: left;
  margin: 1em 0 0 0;
  width: 150px;
}

.excited-label{
  font-weight: bold;
  padding: 5px 0;
  margin: 0;
  color: blue;
  border: none;
  font-size: 16px !important;
} 
```

这些行的 css 无法正常工作：

```
@Html.TextBoxFor(m => m.Branch, new { @class = "small-textbox" }) 
@Html.TextBoxFor(m => m.AccountNumber, new { @class = "large-textbox" }) 
```

它没有应用小文本框或大文本框。

即使我使用 <div> 或 <p>，它也会在一行上显示所有内容。

这是它显示的内容：

![在此处输入图像描述](../Images/fdb2fee899d5ae6dcc8cc07589c33842.png)

任何人都知道为什么我的表格显示奇怪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:10:40.660

这些元素的 Css 工作正常。它们都是向左浮动的，这意味着除非它们的包含元素内的空间不足，否则它们将彼此相邻浮动。

如果您希望它们换行，那么您需要应用样式`clear: left;`或`clear: both;`

例如

```
.large-textbox 
{
  clear: left;
  float: left;
  margin: 1em 0 0 0;
  width: 150px;
} 
```

# php - 从插入行查询返回列条目 - MySQL 和 PHP

> ID：12584680
> 
> 赞同：0
> 
> 时间：2012-09-25T14:05:59.430
> 
> 标签：php, mysql

这是场景：我应该创建一个用户可以注册的小网站，我正在使用一个名为 users 的表，其中包含字段

```
userid int unsigned auto_increment,
name varchar(50),
gender enum('m','f'),
time datetime,
joiningyear int unsigned,
primary key (userid) 
```

当我插入一个新用户时，我还应该通过将他的用户 ID 的加密形式保存为 cookie 来让他登录。问题是，如果 userid 已经被使用，它会自动增加 1，这很明显。我想接收这个新值作为我的插入查询的**输出**，而不添加另一个获取它的查询，这将使事情变得容易。

目前我正在使用两个单独的查询，一个是检查是否已经采用了随机选择的用户 ID，第二个是插入条目。 `Insert into users(......) values(...)`

有没有办法通过一个查询来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:09:27.697

根据您的 MySql 适配器，您可以使用：

[`mysqli_insert_id`](http://php.net/manual/en/mysqli.insert-id.php)或[`PDO::lastInsertId`](http://php.net/manual/en/pdo.lastinsertid.php)。还有[`mysql_insert_id`](http://php.net/manual/en/function.mysql-insert-id.php)但描述为：

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。

如果您使用任何框架，它应该支持返回最后插入的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:10:15.150

mysql_insert_id() 将为您提供新用户最后插入的 ID。只要您没有大量涌入，就可以使用它。

最终，根据他们的输入信息检索信息的第二个查询就可以了，然后将其存储到 cookie 中。

# encoding - isTextPresent 在 Selenium RC 中使用带有重音符号的文本

> ID：12584681
> 
> 赞同：0
> 
> 时间：2012-09-25T14:06:02.453
> 
> 标签：encoding, selenium, selenium-rc, selenium-ide

我需要为 Selenium RC 维护一些测试。他们正在测试 isTextPresent 传递一些带有重音符号的文本，这总是导致错误（即使文本存在）。相同的测试在 Selenium IDE 中正常运行。我有这样的事情：

```
assertTrue(selenium.isTextPresent("exact:Você tem certeza que deseja realizar a exclusão?")); 
```

我认为这是一个编码问题。也许 Selenium RC 无法识别 UTF-8 字符。

有人能帮我吗？提前致谢。

* * *

编辑：

我发现问题出在 Selenium RC 在测试期间启动的浏览器上。我正在搜索存在的消息通常会出现在 firefox 和 chrome 中，但带有重音符号的字符在由 Selenium RC 启动的 firefox 中显得很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:03:29.343

关于这个有一个未解决的问题：[http](http://code.google.com/p/selenium/issues/detail?id=1212) ://code.google.com/p/selenium/issues/detail?id= 1212 它的优先级很低，因为开发团队专注于 WebDriver。

所以，我要将所有测试迁移到 WebDriver。

# ruby-on-rails - Rails Forms：如何为新用户和现有用户设置不同的默认值？

> ID：12584684
> 
> 赞同：0
> 
> 时间：2012-09-25T14:06:09.873
> 
> 标签：ruby-on-rails, controller, many-to-many, relationship

我有一个允许用户注册的 Rails 应用程序。用户可以拥有几种他们想要遵循的音乐风格（多对多关联）。

现在，当新用户进入表单时，他应该默认检查所有音乐风格。但是当现有用户回来时（在编辑页面上使用相同的表单），他应该只检查那些为他的个人资料启用的音乐风格。我假设这必须在控制器中设置，但我如何为新用户设置所有音乐风格？

这是表单中的代码：

```
<% MusicStyle.all.each do |m| %>
  <%= check_box_tag('user[music_style_ids][]', m.id, @user.music_styles.include?(m)) %>
  <label for="<%= m.id %>"><%= m.name %></label><br/>
<% end %> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:26:28.367

创建时`@user`，您可以将所有音乐风格添加到您构建的新记录中。这将导致您的表单被正确填充。

或者，您可以使用它`@user.new_record?`来确定这是否是一条新记录，并根据它生成您的复选框标签。

# java - 在 instanceof 返回 true 后怎么可能有 ClassCastException

> ID：12584689
> 
> 赞同：6
> 
> 时间：2012-09-25T14:06:42.780
> 
> 标签：java, android

我从[Android 的 Pair.java获得以下代码片段](http://code.ohloh.net/file?fid=-0F0FCOc_Dgka3ovb86Swu0zffI&cid=OpnM-8VCwHE&s=Pair.java%20Android&browser=Default#L44)

```
public boolean equals(Object o) {
    if (o == this) return true;
    if (!(o instanceof Pair)) return false;
    final Pair<F, S> other;
    try {
        other = (Pair<F, S>) o;
    } catch (ClassCastException e) {
        return false;
    }
    return first.equals(other.first) && second.equals(other.second);
} 
```

`instanceof`我想知道，在返回 true之后，怎么可能有 ClassCastException 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:36:23.847

这是不可能的。代码没有意义。编写它的人可能不理解这一点，`F`并`S`在运行时被删除，因此`ClassCastException`永远不会发生。

# c# - C# 执行 while 循环

> ID：12584690
> 
> 赞同：0
> 
> 时间：2012-09-25T14:06:50.840
> 
> 标签：c#, loops, messagebox, do-while

我是编程新手。我想创建一个添加 10 个整数的程序，并显示一个消息框，指示我得到了多少正确答案。我只使用了 1 个标签框和一个按钮。这是我使用的代码。它运行良好，直到消息框显示我只有 1 个正确答案。我究竟做错了什么？谢谢你。

```
 }
    int a;
    int b; 
    string sagot;

    private void button1_Click(object sender, EventArgs e)
    {
        int i = 1;
        do
        {
            a = i + i;
            label1.Text = i.ToString() + " + " + i.ToString() + "=";
            sagot = Interaction.InputBox("Please type your answer:");
            i++;

        } while (i <= 10);

        {
            if (a == Convert.ToInt32(sagot))
                    {
                    b++;
                    }
                }
                MessageBox.Show("Number of correct answers: " + b.ToString());
            }
        }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T14:13:23.170

让我们看看你的代码：

```
int a; 
int b;  
string sagot; 

private void button1_Click(object sender, EventArgs e) 
{ 
    int i = 1; 
    do 
    { 
        a = i + i; 
        label1.Text = i.ToString() + " + " + i.ToString() + "="; 
        sagot = Interaction.InputBox("Please type your answer:"); 
        i++; 

    } while (i <= 10); 

    { 
        if (a == Convert.ToInt32(sagot)) 
                { 
                b++; 
                } 
            } 
            MessageBox.Show("Number of correct answers: " + b.ToString()); 
        } 
    } 
    } 
```

所以。

你从 1 开始，a= i*2，你要求他们输入 i+i。你得到他们的回应，并增加 i。

第一个问题在这里..你不是在测试他们的反应！！一旦你再次循环，a 和“sagot”就不再被记住以供以后测试，所以如果你现在不测试......它就消失了。

一旦你这样做，一旦 i=10 它就会出现循环..

所以..

现在你问它，如果 a 与他们给出的答案相同，则 b 加一

好吧，你只做一次..它只适用于最后一个答案..

因此，是的，您将获得 1 分（满分 10 分）.....

你有几个到多个大括号。然而..

所以，告诉你你哪里出错了......我不会指出任何问题，比如如果你写“FRED”作为答案......你的应用程序会出错......

这是你的代码改组以获得你的意思 - 但以你的方式 - 不是我的。

```
int a; 
int b;  
string sagot; 

private void button1_Click(object sender, EventArgs e) 
{ 
    int i = 1; 
    do 
    { 
        a = i + i; 
        label1.Text = i.ToString() + " + " + i.ToString() + "="; 
        sagot = Interaction.InputBox("Please type your answer:"); 
        i++; 
             if (a == Convert.ToInt32(sagot)) 
                { 
                b++; 
                } 
    } while (i <= 10); 

            MessageBox.Show("Number of correct answers: " + b.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:12:16.697

您的问题是您正在执行`b++`AFTER 循环，因此它只会执行一次。尝试在循环内移动它。

```
private void button1_Click(object sender, EventArgs e)
{
    int i = 1;
    do
    {
        a = i + i;
        label1.Text = i.ToString() + " + " + i.ToString() + "=";
        sagot = Interaction.InputBox("Please type your answer:");
        i++;
        if (a == Convert.ToInt32(sagot))
        {
            b++;
        }

    } while (i <= 10);

    MessageBox.Show("Number of correct answers: " + b.ToString());
} 
```

另外，作为旁注，您应该稍微清理一下您的代码。特别是您对括号的使用。除非您包含语句，否则您不想使用括号。典型用途是方法体、循环、条件、`using`语句等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:12:45.510

您应该在循环期间验证您的答案，如下所示：

```
private void button1_Click(object sender, EventArgs e)
{
    int i = 1;
    int b = 0;
    do
    {
        a = i + i;
        label1.Text = i.ToString() + " + " + i.ToString() + "=";
        sagot = Interaction.InputBox("Please type your answer:");
        i++;

        if (a == Convert.ToInt32(sagot))
        {
            b++;
        }

    } while (i <= 10);

    MessageBox.Show("Number of correct answers: " + b.ToString());
} 
```

# vb.net - vb.net 方法 NavigateToString(WebBrowser)

> ID：12584696
> 
> 赞同：0
> 
> 时间：2012-09-25T14:07:11.830
> 
> 标签：vb.net, winforms, browser

NavigateToString 方法**可**用于`System.Windows.Controls.WebBrowser`

而不是在`System.Windows.Forms.WebBrowser`

我正在使用`winforms`，有一个 dll 文件可以将“NavigateToString”方法添加到我的项目中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:20:11.783

而不是 NavigateToString(WebBrowser) 使用[DocumentText](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documenttext)属性

```
webBrowser1.DocumentText = "<h1>test</h1>"; 
```

# java - 如何使用在 HTML 中返回 csv 的 url？换句话说，如何在我的网页中显示来自该 csv 文件的数据？

> ID：12584697
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:07:12.233
> 
> 标签：java, javascript, html, api

让我具体一点。我有这个网址 - [http://finance.yahoo.com/d/quotes.csv?s=XOM+BBDb.TO+JNJ+MSFT&f=snd1l1yr](http://finance.yahoo.com/d/quotes.csv?s=XOM+BBDb.TO+JNJ+MSFT&f=snd1l1yr)

此 url 返回一个 csv 文件。我想使用此 url 打印我网页中存在的数据。现在的问题是我不知道如何将数据放入 html 代码中。它需要 javascript 吗？

我想知道我是否应该`<url>`在 html 中使用标签。我认为这行不通。或者有没有其他方法可以做到这一点（如果可能的话）？

注意：我想使用 html、javascript、java（如果需要）

PS：更准确地说，这是一个 yahoo stock api。

任何帮助表示赞赏。

PS：使用 XML 执行此操作也将非常有帮助。因为还有另一个返回 XML 数据的 api url。（谷歌股票 api）例如[http://www.google.com/ig/api?stock=grasim](http://www.google.com/ig/api?stock=grasim)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:10:14.360

您想获得一些框架，例如 JQuery 并形成对该 url 的请求。

在您想要使用一些 CSV 阅读器解析输出的请求的成功代码上。

[http://archive.plugins.jquery.com/project/csv](http://archive.plugins.jquery.com/project/csv) 可能适合您的需求，然后您所做的就是将数组吐出到页面。

对不起，我不能更准确，但我希望这能指引你正确的方向。我相信其他人会给出更好的答案。

我在这里创建了一个示例，我遇到了一些 XSS 问题，但是如果您询问堆栈或检查现有问题，您应该找到最终解决方案。

[http://jsfiddle.net/gWBBE/](http://jsfiddle.net/gWBBE/)

而且虽然这是为大学里的人做的，但这样做是为了互相帮助而不是做别人的作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:16:02.450

```
<object data="quotes.txt"></object> 
```

您可以使用对象标签嵌入任何文件或网页以显示到任何网页中。

并且还可以通过使用框架来查看

[http://www.dhtmlx.com/docs/products/dhtmlxDataView/samples/03_loading/01_xml.html](http://www.dhtmlx.com/docs/products/dhtmlxDataView/samples/03_loading/01_xml.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:58:34.207

您也可以开始使用 Yahoo 自己的[Javascript 库](http://yuilibrary.com/)。

它将为您提供 YUI IO (ajax) 获取数据的可能性。[在这里](http://yuilibrary.com/yui/docs/io/)你可以找到一些关于如何在你的页面上使用 YUI IO 来获取其他站点数据的简单示例。

现在，当您这样做时，您还可以使用[YUI](http://yuilibrary.com/yui/docs/datatable/)数据表在网页中显示该数据，而无需生成您自己的 html、YQL（雅虎查询语言）、数据源和许多其他有用的东西。

现在，您的问题似乎有点具体，但涵盖了很多，所以答案也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T20:47:51.773

我认为这一切都归结为请求数据，然后解析和显示它。

只需向该 url 发送一个 httprequest 并使用响应。错过了初始应答的回调，readystate 4 表示数据传输完成。

然后在纯js中它看起来像这样：

```
function httpGet(url)
{
 var xmlHttp = null;

 xmlHttp = new XMLHttpRequest();
 xmlHttp.open( "GET", url, false );
 xmlHttp.onreadystatechange = callbackFunction;
 xmlHttp.send( null );
}

function callbackFunction()
{
 if (xmlHttp.readyState != 4)
 return;

 var result = xmlHttp.responseText;
} 
```

至少你可以解析响应并根据需要使用它。此链接可能会有所帮助：[Javascript code to parse CSV data](https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data)

# actionscript-3 - 如何向我的球对象添加重力/摩擦力，使其不会卡在无人区？

> ID：12584699
> 
> 赞同：0
> 
> 时间：2012-09-25T14:07:19.520
> 
> 标签：actionscript-3, flash, gravity, hittest

我最近在我的滑雪球风格游戏的编码方面取得了突破。我在碰撞检测方面遇到了严重的问题，stackoverflow 的专家帮助我解决了这些问题。我正在为我的对象（球）编写补间代码，以创建平滑的滚动效果，因为否则我无法让它平滑移动。我终于有一个灵光乍现的时刻，并设法使对象逐渐移动而不是传送，并且能够消除我的补间。没有补间，碰撞检测工作正常。但我还有一些问题。首先，我如何将重力/摩擦力施加到球上，以使其在失去动力时不会在非碰撞（或得分）区域停止？二，我怎样才能让它与边界正确碰撞，从而以适当的速度反转航向？三，稍微不相关但仍然是一个重大挑战，所以我现在要提一下：如果我的碰撞区域（得分目标）垂直对齐，我可以在碰撞检测中设置条件来测试速度以有效地与目标碰撞吗？我如何确定该速度？

好的，这是我当前用于滚动球并击中目标的不稳定代码：

```
function moveBall(event:MouseEvent):void
{
    if (this.mouseX <= 172 + gameTable.tableLane.width)
    {
        ball.x = this.mouseX;
    }
    else
    {
        ball.x = 172 + gameTable.tableLane.width;
    }
    if (this.mouseX < 200)
    {
        ball.x = 200;
    }
    //trace(this.mouseX)
}

function releaseBall(event:MouseEvent):void
{
    //rollBall();
    ballSpeed = rollPower * 10;
    //set minimum roll distance
    if (ballSpeed < 313)
    {
        ballSpeed = 313;
    }
    ballStop = ball.y - ballSpeed;
    gameElements.addEventListener(Event.ENTER_FRAME, rollBall);
    gameElements.addEventListener(Event.ENTER_FRAME, ballTargetScore);
    gameElements.removeEventListener(MouseEvent.MOUSE_MOVE, moveBall);
}

function rollBall(event:Event):void
{
    trace("ballSpeed is " + ballSpeed);
    trace("ballStop is " + ballStop);
    if (ball.y > ballStop)
    {
        ball.y -= 6;
        ball.y += friction;
    }

}

//match targets to scoring values which should be tied to determineScore()
function ballTargetScore(event:Event):void
{
    var targetValue:String;
    var targetArray:Array = new Array(gameTable.upperScoringArea.upperScoringAreaCTarget,
      gameTable.upperScoringArea.upperScoringAreaLtTarget,
      gameTable.upperScoringArea.upperScoringAreaRtTarget,
      gameTable.middleScoringArea.middleScoringAreaTargetTop,
      gameTable.middleScoringArea.middleScoringAreaTargetMiddle,
      gameTable.middleScoringArea.middleScoringAreaTargetLower,
      gameTable.lowerScoringArea.lowerScoringAreaTarget);
    var targetTextArray:Array =  new Array(gameTable.upperScoringArea.upperScoringAreaC_text.text,
        gameTable.upperScoringArea.upperScoringAreaLt_text.text,
        gameTable.upperScoringArea.upperScoringAreaRt_text.text,
        gameTable.middleScoringArea.middleScoringAreaU_text.text,
        gameTable.middleScoringArea.middleScoringAreaM_text.text,
        gameTable.middleScoringArea.middleScoringAreaL_text.text,
        gameTable.lowerScoringArea.lowerSA_text.text);

    for (var i:uint; i < targetArray.length; i++)
    {
        if (targetArray[i] != null)
        {
            trace("targetArray value is " + targetArray[i]);
            if (ball.hitTestObject(targetArray[i]))
            {
                targetValue = targetTextArray[i];
                trace('targetValue becomes',targetValue);
                determineScore(targetValue);
                gameElements.removeEventListener(Event.ENTER_FRAME, rollBall);
                gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);
            }
        }
    }

} 
```

有关我的开发的更多背景信息，请查看我之前的问题线程： [如何摆脱已实例化对象的非空 hitTestObject 错误？](https://stackoverflow.com/questions/12560357/as3-how-can-i-get-rid-of-non-null-hittestobject-error-with-already-instantiated/12562887)

谢谢你的帮助，

艾伦

* * *

只想添加我的函数来确定球滚动的速度。它不使用我在搜索中发现的键盘或任何其他常规方法来控制移动。数字会动态变化，直到按下鼠标按钮，这就是要使用的值。这是在我的 drawGame 函数中创建游戏桌的。

```
gameElements.addEventListener(Event.ENTER_FRAME, powerMeter);

function powerMeter(event:Event):void
{
    rollPower +=  speed;
    gameTable.powerMeter.height = rollPower;
    //trace(rollPower);

    if (rollPower == 60 || rollPower == 0)
    {
        speed *=  -1;
        //trace("switch speed to " + speed);
    }
} 
```

以及我相关的全局变量列表：

```
//physics vars
var rollPower:Number = 0;
var speed:Number = 1;//speed of ball on roll
var ballSpeed:Number;
var ballStop:Number;
var friction:Number = 0.15;
var gravity:Number = 0.70; 
```

* * *

好的，我已经修复了它，但它在视觉上仍然很乱。球现在将向后移动。我的意思是设置一个条件，当球到达代表桌子上的排水沟的阈值时将被移除；但是，在球在视觉上超出 y 值之前，flash 似乎没有足够快地运行条件语句来接住球。它确实移除了球，但它看起来很难看，因为球在消失之前已经滚回了球道。如何加快条件检查时间？

这是我修改后的代码。指针表示赞赏。

```
function rollBall(event:Event):void
{
    trace("ballSpeed is " + ballSpeed);
    trace("ballStop is " + ballStop);
    if (ball.y > ballStop)
    {
        ball.y -=  6;
        ball.y +=  friction;
    }
    else
    {
        gameElements.removeEventListener(Event.ENTER_FRAME, rollBall);
        gameElements.addEventListener(Event.ENTER_FRAME, rollBackwards);
    }

}//end rollBall

function rollBackwards(event:Event):void
{
    trace("rollBackwards is in effect");
    trace("ball.y is " + ball.y);
    if (ball.y < 313)
    {
        ball.y +=  6 + gravity;
        if (ball.y >= 313)
        {
            gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);
            determineScore(null);
        }
    }
}//end rollBackwards 
```

* * *

好的，我想在这里更新。我基本上通过调整 Y 坐标“解决了”我的 rollBackwards 计时问题。我要么测量错误，要么让我的方向与我打算移动的方向相反。它现在主要工作。

```
function rollBackwards(event:Event):void
{
    //trace("rollBackwards is in effect");
    //trace("ball.y is " + ball.y);
    if (ball.y < 240)
    {
        ball.y +=  6 + gravity;
        if (ball.y >= 235)
        {
            gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);
            determineScore(null);
        }
    }
}//end rollBackwards 
```

看起来仍然有点难看的是球在与目标发生碰撞后何时/何地被移除。我的，也许，尴尬的坐标计算条件链主要从有效性 POV 工作，但在实际碰撞测量之前，球似乎总是被移除几个像素（？） - 甚至考虑边界框而不是实际形状。我还试图在它被移除之前将它变成一个补间，让它在一个漂亮的庄园中消失，但这似乎从来没有奏效。而且我什至从未尝试过将每个目标下方的弧形“保险杠”变成实际的碰撞对象，如果目标关闭，球可以滚动。那只是被放入“太难”的篮子里。下面是我的碰撞测量和补间代码，以防万一有人有任何敏锐的见解要补充。否则，我对最终结果比较满意。

```
//called during determineScore event
function disappearBall():void
{
    myBallTween = new Tween(ball,"alpha",Strong.easeOut,ball.y + 5,ball.y,8,false);
    myBallTween.obj.alpha = 0;
    myBallTween.start();
}//end disappearBall

function ballTargetScore(event:Event):void
{
    var targetValue:String;
    var targetArray:Array = new Array(gameTable.upperScoringArea.upperScoringAreaCTarget,
      gameTable.upperScoringArea.upperScoringAreaLtTarget,
      gameTable.upperScoringArea.upperScoringAreaRtTarget,
      gameTable.middleScoringArea.middleScoringAreaTargetTop,
      gameTable.middleScoringArea.middleScoringAreaTargetMiddle,
      gameTable.middleScoringArea.middleScoringAreaTargetLower,
      gameTable.lowerScoringArea.lowerScoringAreaTarget);
    var targetTextArray:Array =  new Array(gameTable.upperScoringArea.upperScoringAreaC_text.text,
        gameTable.upperScoringArea.upperScoringAreaLt_text.text,
        gameTable.upperScoringArea.upperScoringAreaRt_text.text,
        gameTable.middleScoringArea.middleScoringAreaU_text.text,
        gameTable.middleScoringArea.middleScoringAreaM_text.text,
        gameTable.middleScoringArea.middleScoringAreaL_text.text,
        gameTable.lowerScoringArea.lowerSA_text.text);

    for (var i:uint; i < targetArray.length; i++)
    {
        if (targetArray[i] != null)
        {
            //trace("targetArray value is " + targetArray[i]);
            if (ball.hitTestObject(targetArray[i]))
            {
                //handle vertically aligned targets
                if (centerTargetArray.indexOf(targetArray[i]) >= 0)
                {
                    var centerIndex:uint = centerTargetArray.indexOf(targetArray[i]);
                    //trace("centerTargetArray check works " + centerTargetArray[centerIndex]);
                    if (ballStop <= 60 && ball.hitTestObject(gameTable.upperScoringArea.upperScoringAreaCTarget))
                    {
                        targetValue = targetTextArray[i];
                        //trace('targetValue becomes ' + targetValue);
                        determineScore(targetValue);
                        gameElements.removeEventListener(Event.ENTER_FRAME, rollBall);
                        gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);

                    }
                    if (ballStop > 60 && ball.hitTestObject(gameTable.middleScoringArea.middleScoringAreaTargetTop))
                    {
                        targetValue = targetTextArray[i];
                        //trace('targetValue becomes ' + targetValue);
                        determineScore(targetValue);
                        gameElements.removeEventListener(Event.ENTER_FRAME, rollBall);
                        gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);

                    }
                    if (ballStop > 100 && ball.hitTestObject(gameTable.middleScoringArea.middleScoringAreaTargetMiddle))
                    {
                        targetValue = targetTextArray[i];
                        //trace('targetValue becomes ' + targetValue);
                        determineScore(targetValue);
                        gameElements.removeEventListener(Event.ENTER_FRAME, rollBall);
                        gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);

                    }
                    if (ballStop > 135 && ball.hitTestObject(gameTable.middleScoringArea.middleScoringAreaTargetLower))
                    {
                        targetValue = targetTextArray[i];
                        //trace('targetValue becomes ' + targetValue);
                        determineScore(targetValue);
                        gameElements.removeEventListener(Event.ENTER_FRAME, rollBall);
                        gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);

                    }
                    if (ballStop > 161 && ball.hitTestObject(gameTable.lowerScoringArea.lowerScoringAreaTarget))
                    {
                        targetValue = targetTextArray[i];
                        //trace('targetValue becomes ' + targetValue);
                        determineScore(targetValue);
                        gameElements.removeEventListener(Event.ENTER_FRAME, rollBall);
                        gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);

                    }
                }
                else
                {
                    targetValue = targetTextArray[i];
                    //trace('targetValue becomes',targetValue);
                    determineScore(targetValue);
                    gameElements.removeEventListener(Event.ENTER_FRAME, rollBall);
                    gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);
                }
            }
        }
    }
}//end ballTargetScore 
```

我在上面的 long 函数中考虑了一些“效率”措施，但我无法完全理解与预期目标对齐的逻辑，所以我只是把它写成了“速写”。

谢谢大家的帮助，

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:40:36.857

为什么不尝试使用 Box2D 来模拟摩擦力和重力呢？ [http://box2dflash.sourceforge.net/](http://box2dflash.sourceforge.net/) 您可以在末端建立一个带有坡道的斜坡，并使用该引擎模拟球在该斜坡上的移动。它可能不准确，因为它不适用于 3d 物理，但是，它也会顺利运行，因为您尝试模拟的只有两个物体，一个球和一个 skeeball 机器。

我认为当你想模拟物理时，在大多数情况下，使用 Box2DFlashAS3 是一个好主意。它也是您书包中的宝贵物品，可用于未来的工作。

为了简单地回答你的问题，我认为你可以为速度创建一个变量，为摩擦和重力创建一个常数，然后简单地计算每一圈：

```
ballX += ballSpeedX;
ballY += ballSpeedY;
if(onGround())
{
if(ballSpeedX > friction)
    ballSpeedX -= friction;
else if(ballSpeedX < - friction)
    ballSpeedX += friction;
else ballSpeedX = 0;
}

if(!onGround()) ballSpeedY -= gravity;
else ballSpeedX -= gravity * Math.cos(slopeAngle);

//do something about ballSpeedY when it hits the ground..
if(ballSpeedY < 0 && onGround()) ballSpeedY *= -0.5; 
```

您可能需要降低弹跳，或根据坡度的角度对其进行不同的处理。

# scala - 在游戏中嘲讽！和斯卡拉

> ID：12584700
> 
> 赞同：5
> 
> 时间：2012-09-25T14:07:26.400
> 
> 标签：scala, playframework, mocking

我在 Play 应用程序中进行模拟时遇到问题。我有一个应用程序如下：

```
object Application extends Controller {
    def login = Action {implicit request =>
        val email = ... //Some email from the request
        if(EmailChecker.checkEmail(email)) {
            Ok("Email is checked and is fine")
        } else {
            Ok("Email is wrong")
        }
    }
} 
```

我想要做的是测试一个请求，但模拟掉 EmailChecker，因为它在某些数据库中进行了一些查找，而这不是我想要在测试中做的事情。

我已经看过一些关于如何在 Scala 中模拟的教程，但我找不到任何涵盖我所拥有的案例的东西。

任何显示如何做我想做的事情的帮助/指针/教程都会很棒。

我对这两个游戏都很陌生！和斯卡拉...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:41:56.000

一种可能的解决方案：

```
class Application(emailChecker: EmailChecker) extends Controller {
    def login = Action {implicit request =>
        val email = ... //Some email from the request
        if(emailChecker.checkEmail(email)) {
            Ok("Email is checked and is fine")
        } else {
            Ok("Email is wrong")
        }
    }
}

object Application extends Application(EmailChecker) 
```

测试将是：

```
import org.specs2.Specification
import org.specs2.mock.Mockito

class ApplicationUnitSpec extends Specification with Mockito { def is = 
    "Test Application" ! {
        val emailChecker = mock[EmailChecker]
        val response = new Application(emailChecker).login(FakeRequest)
        there was one(emailChecker).checkEmail("blah@example.com")
    }
} 
```

我还想定义一个包含 Real 和 Test 隐式的对象，它们分别提供诸如 EmailChecker 之类的服务的真实版本和存根版本，并根据它是测试代码还是产品代码来导入它们。在这种情况下，您需要将 emailChecker 参数设为隐式。一种粗略的依赖注入。

# java - 什么设计模式正在分离变换转换器

> ID：12584702
> 
> 赞同：5
> 
> 时间：2012-09-25T14:07:27.247
> 
> 标签：java, design-patterns

为了将**Java 对象模型**转换为**XML**，我使用以下设计：

对于**不同类型**的对象（例如原始类型、集合、null 等），我为每个对象定义了自己的**转换器**，它针对给定的类型进行适当的操作。通过这种方式，它可以轻松扩展，而无需向巨大的 if-else-then 结构添加代码。

转换器是通过测试对象是否完全可转换的方法以及使用优先级排序来选择**的**。优先级排序很重要，所以假设 a`List`不被 POJO 转换器转换，即使它是可转换的，使用集合转换器会更合适。

**那是什么设计模式？**

我只能想到与命令模式的相似之处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T15:21:21.730

好吧，您可以首先尝试对您想做的事情进行分类（输出一个 XML 文件，将某些内容转换为某些内容）。设计模式分为三类；

*   [结构图案](http://en.wikipedia.org/wiki/Structural_pattern)
*   [创造模式](http://en.wikipedia.org/wiki/Creational_pattern)
*   [行为模式](http://en.wikipedia.org/wiki/Behavioral_pattern)

在这种情况下，您有两种类型的类，一个 xml 编写器和一些转换器。xml 编写器基本上是一个构建器（它*创建*一个文件）

```
XmlWriter writer = new XmlWriter();
writer.writeHeader();
for (Item item : xmlitems) {
    writer.write(convert(item));
}
writer.close(); 
```

现在，一个类到 xml 的实际转换是由几个类完成的。你提到你有一个测试类并将它们定向到特定转换器的方法。这个类可以被认为是*创建*某事物的一个新实例，因此它属于创建模式。

有三种类型的模式适合 IMO。

> *   抽象工厂模式，它为创建相关或依赖对象提供了一个接口，而无需指定对象的具体类。
>     
>     
> *   构建器模式，将复杂对象的构造与其表示分离，以便相同的构造过程可以创建不同的表示。
>     
>     
> *   工厂方法模式，它允许类将实例化推迟到子类。
>     
>     
> 
> 资料来源：[维基百科](http://en.wikipedia.org/wiki/Creational_pattern)

在我看来，任何一个都合适。构建器模式是合适的，因为实现有点像

```
public interface Converter {
    void convert(Item item);
    XmlTextNode getResult(); // get xml code
} 
```

即你给班级一些东西，你会得到一个结果。

工厂模式是合适的，因为您将实例化推迟到其他一些类（您谈到的重定向方法）

```
public XmlTextNode convert(Item item) {
    if (item instanceof ConcreteItem) {
        return new ConcreteConverter(item).getResult();
    }
    throw new InvalidOperationException("Invalid convert type");
} 
```

在任何一种情况下，返回项目的实际类型都不重要。这在一定程度上取决于您要“定义模式”的位置。是在您切换类型的方法中，还是在实际的创建/转换器类中。

再说一次，我不是这个案子的专家。

# r - 用于变量选择的 R 滚动随机森林

> ID：12584704
> 
> 赞同：1
> 
> 时间：2012-09-25T14:07:32.417
> 
> 标签：r, xts, random-forest

自 2008 年以来，我有一个 Euro Stoxx 50 指数的每日 OHLC 数据集，如下所示：

```
 Open    High     Low   Close Volume Adjusted
2008-01-02 4393.53 4411.59 4330.73 4339.23      0  4339.23
2008-01-03 4335.91 4344.36 4312.34 4333.42      0  4333.42
2008-01-04 4331.25 4343.46 4253.69 4270.53      0  4270.53
2008-01-07 4268.43 4294.45 4257.22 4283.37      0  4283.37
2008-01-08 4292.40 4330.56 4292.40 4295.23      0  4295.23
2008-01-09 4285.34 4285.34 4246.92 4258.32      0  4258.32 
```

我已经使用这个`TTR`包计算了几个技术规则。因此，我得到了一个更大的数据集：

```
 RSI2     RSI3     RSI4     RSI5    RSI10    RSI20     SMA5    SMA20    SMA60     EMA5    EMA20    EMA60      atr      SMI
2009-01-07 97.964071 92.62210 87.21605 82.40040 66.95642 55.19221 19720.64 18655.29 17758.68 2556.777 2556.777 2556.777 82.06602 27.52145
2009-01-08 43.766573 58.62387 62.97794 64.03382 60.23197 52.99739 19756.44 18666.60 17754.07 2566.499 2566.499 2566.499 80.33416 29.12141
2009-01-09 27.182247 44.97072 52.29336 55.50633 56.74068 51.80171 19776.92 18674.31 17750.34 2523.372 2523.372 2523.372 78.65886 29.37878
2009-01-12 13.371347 30.46561 39.97055 45.24210 52.16207 50.17764 19788.02 18683.05 17748.76 2524.466 2524.466 2524.466 78.58966 28.17871
2009-01-13  6.141462 19.52298 29.30404 35.68593 47.25383 48.32987 19772.25 18693.01 17749.35 2488.165 2488.165 2488.165 76.08326 25.34705
2009-01-14  2.712386 11.97834 20.69541 27.26891 42.10718 46.23469 19747.87 18694.16 17742.88 2449.353 2449.353 2449.353 75.42231 20.65686 
```

我想知道每个工作季度最重要的技术规则是什么。我决定使用已在`randomForest`包中编码的随机森林 RI 算法，计算 Breiman 重要性度量（感谢该`importance`函数）并选择具有大于季度样本平均值的可变重要性度量的技术规则. 最终，我想得到整个周期的技术规则的缩减数据集，用于计算统计等。

考虑到重要技术规则的数量可能随时间变化，包含最重要技术规则的阵列的尺寸从四分之一到另一个都不相同。因此，我不能将所有值都放在一个对象中。

有没有一种方便的方法来存储我所有的季度数据集？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:49:19.107

使用数据框或 xts 对象。它们都可以很好地处理不同数量的列。在您的情况下，由于您的所有数据列都是数字类型，您可以使用 xts 对象。

您在标题中说“滚动”。您的意思是要分析 90 天的重叠期吗？例如 2008-01-02 到 2008-04-02，然后是 2008-01-03 到 2008-04-03，等等？如果可以的话`rollapply(data,width=90,FUN)`可以使用。如果你想处理宿舍，一次一个，`quarters <- split(data,'quarters')`然后（因为这会给你一个 xts 对象列表）`lapply(quarters,FUN)`

我认为您使用单一数据结构的问题是 SMA5 从 2008 年 1 月 8 日开始可用，但 SMA200 直到年底才可用；这意味着在前三个季度中，SMA200 列将只包含 NA？这可以。在将数据传递给 RandomForest 之前保留 NA 并处理它们。

在 FUN 中，您将像这样删除包含 NA 的列（其中`xq`一个 xts 对象仅包含四分之一的数据）：

```
xq = xq[,!apply(is.na(x),2,any)] 
```

**更新：**重新阅读您的问题和后续问题后，我认为以上回答了您没有的问题！我认为问题在于您的 TTR 表中有 NA，而 RandomForest 不喜欢它们。

回想起来，我认为您的实际问题是“随机森林从每个季度的分析中为我提供了不同数量的良好指标，我该如何处理？” 答案是一个参差不齐的数据结构，一个列表。每季度一个列表条目。列表条目本身可以是任何东西，甚至是 xts 对象，但在这种情况下，指标名称的简单字符向量似乎是完美的。这在[Zach](https://stackoverflow.com/a/12607702/841830)对您的其他问题的回答中得到了很好的体现。

# python - 金字塔：config.set_request_property 回调永远不会被调用

> ID：12584706
> 
> 赞同：1
> 
> 时间：2012-09-25T14:07:36.040
> 
> 标签：python, pyramid

我正在尝试使用 设置回调`config.set_request_property`，但永远不会调用回调。没有错误消息，它只是默默地失败。为什么它不起作用？我怎样才能找出问题出在哪里？

这是我在我的代码中使用的代码`__init__`：

```
def callbackTest(request):
    print 'Callback worked!'
    return True

def main(global_config, **settings):
    """ This function returns a Pyramid WSGI application.
    """
    # pyramid_beaker add-on  
    session_factory = session_factory_from_settings(settings)
    set_cache_regions_from_settings(settings)

    config = Configurator(root_factory=MongoRootFactory(settings), session_factory=session_factory, settings=settings)

    config.add_static_view('gfx', 'gfx', cache_max_age=3600)
    config.add_static_view('fonts', 'fonts', cache_max_age=3600)
    config.add_static_view('css', 'css/compiled', cache_max_age=3600)
    config.add_static_view('js', 'js/compiled', cache_max_age=3600)

    print 'callbackTest callback should be set...'
    config.set_request_property(callbackTest, 'user', reify=True)

    #********************************************************
    # Authentication
    #********************************************************
    authn_policy = AuthTktAuthenticationPolicy(secret='asecret',
                                           callback=groupfinder)
    authz_policy = ACLAuthorizationPolicy()
    config.set_authentication_policy(authn_policy)
    config.set_authorization_policy(authz_policy)

    #********************************************************
    # View setup
    #********************************************************

    config.add_route('IndexTest', '/')
    config.add_route('Home', '/h')

    config.scan()
    return config.make_wsgi_app() 
```

谁能在这里看到我的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:50:48.110

我看到的唯一错误是您没有告诉我们您在哪里使用该物业？属性仅在您调用它们时才会被调用。您是否有在视图中调用的代码`request.user`，并且由于该属性不存在而出现错误？如果您希望每个请求都自动调用该函数，那么这正是`set_request_property`试图避免的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:34:57.823

从[pyramid.config](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/api/config.html#pyramid.config.Configurator.set_request_property) API 文档：

> callable 可以是接受**请求**作为其单个位置参数的可调用对象[...]

现在我不知道这是否会导致您的问题，但它需要接受工作请求（尽管我希望抛出异常，而不是静默失败）。

# apple-push-notifications - apns：本地化关闭按钮

> ID：12584707
> 
> 赞同：0
> 
> 时间：2012-09-25T14:07:37.587
> 
> 标签：apple-push-notifications

在以下 apns 示例中：

```
{"aps" : {"alert":{"body":"my message","action-loc-key":"Jouer"} 
```

正文（消息）和 action-loc-key（查看按钮）可以本地化（自定义）
它们将按书面形式显示在 PN 中。但在 PN 中也会有一个显示“关闭”的左侧按钮 PN 将如下所示：

```
 my message
Close       Jouer 
```

如何自定义关闭按钮（左侧）？

您能否举一个关闭按钮显示为“Ferme”的示例？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:42:50.247

开发人员无法控制推送通知的左侧按钮。如果您已正确设置本地化，则关闭按钮将自动本地化。

# sql - 基于case语句使用SQL IN语句

> ID：12584716
> 
> 赞同：2
> 
> 时间：2012-09-25T14:07:50.460
> 
> 标签：sql, sql-server-2008

是否可以使用`in`基于 case 语句的命令

我尝试过这样的事情

```
@Id int

Select * 
From Table 
Where  StatusId in( case when Id =1 then 1 else 1,3 end) 
```

和

```
 Select * 
    From Table 
    Where  StatusId in case when Id =1 then (1) else (1,3) end 
```

有任何想法吗！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:09:41.407

不，您需要以不同的方式解决此问题：

```
Where (Id = 1 and StatusId in (1)) or (Id <> 1 and StatusId in (1, 3)) 
```

这种模式的变化是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:10:53.873

对于您的示例，您可以简单地执行以下操作：

```
where StatusId = 1 or (Id <> 1 and StatusId = 3) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T14:21:33.953

在 MySQL 中，这样的查询有效：

```
Select * from 
Table
where case when Id = 1 then StatusId = 1
    else StatusId in (1,3) end; 
```

试试这个，让我知道它是否有效，谢谢

# matlab - Matlab - 命令行窗口和变量编辑器的区别

> ID：12584718
> 
> 赞同：0
> 
> 时间：2012-09-25T14:08:00.580
> 
> 标签：matlab

这让我很困惑.. 好的，所以我有相同的数据集，我在输出窗口以及变量编辑器中查看它们，它们完全不同。这是屏幕截图： ![在此处输入图像描述](../Images/4cd6295d104979f95afe388d8a8db424.png)

注意第 9 个元素是“0”，而在变量编辑器中它是“-0.0078”

编码：

```
function f = display()
rawdata = wavread('FILENAME', 'double');
f = rawdata;
end 
```

有任何想法吗？我不知道哪个是对的，哪个是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:24:09.900

命令窗口中的默认滚动缓冲区为 5000 行。因此，如果您正在查看超过 5000 行（在您的情况下约为 60k）的变量，您将只能看到最后 4999 个左右的条目。

因此，您要么需要增加滚动缓冲区、输出向量的转置，要么使用变量编辑器（这是正确的）。

# qt - 编译器找不到文件，但“跟随光标下的符号”可以

> ID：12584722
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:08:11.473
> 
> 标签：qt

在解决了以前的问题之后，另一个似乎已经抬头：

我的专业文件中有各种目录，我包含的头文件具有以下格式：

```
#include <ting/tong.hpp> 
```

当添加到我的专业文件中的路径之一时，它会到达正确的文件。我可以通过右键单击并选择“跟随光标下的符号”来打开它。

如果我输入文件的完整路径，那么它会编译，但这无济于事，因为我包含的头文件仍然包含对它的引用，我无法更改该文件。

*为什么 find 函数能够找到文件而编译器却不能？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:05:57.167

你说：

> 我假设如果我在 INCLUDEPATH 中提供包含目录，它将能够找到标题，但事实并非如此。我似乎能够修复它的唯一方法是明确包含它在主窗口文件中找不到的头文件 - 这肯定不是我应该做的吗？

是的，这正是你应该做的。在您的`.pro`文件中，您包含头文件所在的目录：

```
INCLUDEPATH += ../third-party/fooProject/include 
```

然后在你的源代码文件中，你想要包含的文件，通常在`.h`你的类的文件中：

```
#include <foo/foo_object.h> 
```

这将包括标题`../third-party/fooProject/include/foo/foo_object.h`

# ios - IOS 内存未释放 Uinsg NSURLConnection 下载 Youtube HTML 数据

> ID：12584725
> 
> 赞同：2
> 
> 时间：2012-09-25T14:08:15.467
> 
> 标签：ios, youtube, nsurlconnection, nsmutableurlrequest

我正在尝试下载 youtube 网址的 HTML [http://www.youtube.com/watch?v=H8SPr6eIVKE](http://www.youtube.com/watch?v=H8SPr6eIVKE) 这是我的代码...

```
 url = @"http://www.youtube.com/watch?v=H8SPr6eIVKE"; 
```

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

```
[request setValue:(NSString *)kUserAgent forHTTPHeaderField:@"User-Agent"];

[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue currentQueue]
                       completionHandler:
 ^(NSURLResponse *res, NSData *data, NSError *err) {
      //My code goes here

     });
 }]; 
```

问题是这个 NSData 正在泄漏内存。如果我尝试下载图像，这非常有效，但如果我尝试下载 HTML 数据，则会发生某种泄漏。这是有关泄漏的更多信息。

1 CoreFoundation __CFDataGrow 2 CoreFoundation CFDataReplaceBytes 3 CoreFoundation CFDataAppendBytes 4 CFNetwork gzipDecodeData(z_stream_s, unsigned char, __CFAllocator const, __CFData const*, int) 5 CFNetwork GZipDataDecoder::decodeData(CFAllocator const, __CFData const, unsigned char) 6 CFNetwork HTTPProtocol::decodedDecoding(无符号字符、无符号字符 const、lon

所以朋友们有什么线索吗？我正在尝试播放没有 UIWebView 的 youtube 视频...（不知道苹果是否会批准）

# redis - redis如何编码长整数？

> ID：12584726
> 
> 赞同：2
> 
> 时间：2012-09-25T14:08:17.460
> 
> 标签：redis

我已经阅读了redis中的一些代码，但我没有找到它如何处理长整数值（例如SET mykey 123456789123456789）---我的意思是不能直接存储在ptr字段中的长整数（例如8字节）（4我机器中的字节）的 robj 结构。

PS：我在object.c中阅读了tryObjectEncoding函数的代码，但只找到了REDIS_ENCODING_INT数据类型的编码。而且redis中其实没有long类型。这是否意味着超过 4 个字节的整数将被编码为 REDIS_ENCODING_STRING？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:29:36.157

`REDIS_ENCODING_INT`实际上代表一个8字节的数字。请参阅 util.c 中的方法`string2l`- 它尝试将字符串转换为 long long。

换句话说，4 到 8 个字节之间的整数使用`REDIS_ENCODING_INT`而不是默认字符串编码进行编码。

# asp.net-mvc-3 - C# 测试项目 在运行测试之前擦除数据库

> ID：12584729
> 
> 赞同：0
> 
> 时间：2012-09-25T14:08:24.303
> 
> 标签：asp.net-mvc-3, sql-server-2008, unit-testing

我有一个 ASP.NET MVC3 应用程序，我需要在其中测试一个数据库包装类。这是启动和运行。但是我需要在测试开始时重新创建数据库。我需要擦除数据库中的所有数据。该数据库是一个测试替身。

我有创建数据库的 SQL 脚本。现在我在“SQL Server Manager”中手动运行它并且它可以工作。但我想在新的测试运行之前运行脚本。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:58:40.483

将此代码放在您的单元测试类中。您应该在此处创建所有数据库。TestInitialize 在任何测试开始之前运行。这将发生一次，每次开始单元测试时。

```
 [TestInitialize]
    public void TestInitialize()
    {
        -
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:15:37.273

编辑 - 用一个体面的答案代替。

创建一个如下所示的 C# 类 -

```
using System;
using NUnit.Framework;

namespace NUnit.Tests
{
  [SetUpFixture]
  public class MySetUpClass
  {
    [OneTimeSetUp]
    public void RunBeforeAnyTests()
    {
      // Set up my database with SQL scripts run via SqlCommand
    }

    [OneTimeTearDown]
    public void RunAfterAnyTests()
    {
      // tear down my database  with SQL scripts run via SqlCommand
    }
  }
} 
```

那应该只在任何测试之前运行一次设置，然后在所有测试完成后才拆除一次。

我意识到我正在从死里复活，但我觉得是时候得到一个体面的答案了。

无论如何，有一个更好的方法。模拟您的数据层并对其进行测试。然后确保使用 SQL Server 完成的所有操作都采用存储过程和函数的形式。然后使用 Visual Studio 为这些存储过程和函数创建单元测试。

如果您的存储库中有逻辑，我建议您使用[Insight.Database](https://github.com/jonwagner/Insight.Database)并利用其 AutoInterface 功能。这样，您的存储库层只是一个接口，您可以轻松地模拟并继续前进。

# jquery - 如果触发“删除”事件，可排序区域如何冻结？

> ID：12584732
> 
> 赞同：1
> 
> 时间：2012-09-25T14:08:28.733
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-events

**编辑**： jQuery-ui[已被修改](http://github.com/jquery/jquery-ui/pull/736)。这个问题现在已经过时了。

如果我在可排序区域的元素上触发`'remove'`自定义事件，可排序功能将停止。

我在我的应用程序中使用此`'remove'`自定义事件在不同的侦听器和活页夹之间进行通信，我想了解它为什么会干扰`jquery-ui`.

我在任何地方都找不到有关该`'remove'`事件的文档。注意：选项中有属性，根据文档`remove`对应事件类型，但与事件类型无关。`'sortremove'``'remove'`

我必须重命名我的活动以避免这种冲突，但这是一项功能吗？一个错误？该`'remove'`事件是否仅在内部使用，如果是，我是否应该要求他们为其命名，比如说`'ui-remove'`？

看这个小提琴的例子：http: [//jsfiddle.net/yWg8v/7/](http://jsfiddle.net/yWg8v/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:11:57.783

`remove`在小部件源中创建小部件时绑定`_createWidget`：

```
this.element.bind( "remove." + this.widgetName, function() {
    self.destroy();
}); 
```

`sortable`是一个小部件。您将不得不重命名您的活动。您添加`ui-`前缀的建议听起来像是一个很好的解决方案，但我不确定开发人员的感受以及它会如何影响其他小部件。

# python - 带有while 1循环的Python Tkinter

> ID：12584736
> 
> 赞同：0
> 
> 时间：2012-09-25T14:08:39.930
> 
> 标签：python, multithreading, user-interface, tkinter

我有在 while 循环中不断使用标准输出读取的代码，我想根据这个标准输出在 tkinter gui 上显示 2 个图像中的 1 个。标准输出数据以数组形式出现，用于决定 python gui 将显示 2 个图像中的哪一个。但是，我无法弄清楚在这种情况下如何让线程工作。这是没有线程的基本代码：

* * *

```
from subprocess import Popen, PIPE
print ("Opening...")
p = Popen ("C:\Program Files\Demo.exe", stdout=PIPE)

arr2 = []
arr3 = []
start = 0
dtct = 0
away = 0
chk = 0
sensitivity = 15
print ("Reading...")
while 1:
    line = p.stdout.readline()
    if not line: break
    if line.find(':')!= -1 and len(line) > 4:
                    time = line.split(",")[1]
                    Ta= line.split(",")[2]
                    arr1 = [float(n) for n in line.split(',')[3:67]]
                    delta = [i - j for i, j in zip(arr1,arr2)]
                    deltarnd = [ round(elem, 2) for elem in delta ]
                    for index, item in enumerate(deltarnd):
                            if item > 3:
                                    dtct = dtct +1
                            if item < -3:
                                    away = away +1
                    if (dtct > sensitivity) and chk == 0:
                            print "hand detected"
                            chk = 1
                    if (away > sensitivity) and chk == 1:
                            print "hand moved away"
                            chk = 0
                    dtct=0
                    away=0
                    arr3=arr2
                    arr2=arr1
print ("EOP") 
```

# python - 如何在保留其键的同时对字典进行排序？

> ID：12584739
> 
> 赞同：2
> 
> 时间：2012-09-25T14:08:53.093
> 
> 标签：python, sorting, dictionary

我知道可以使用以下方法对字典的值进行排序：

```
>>> mydict = {'silver': 300, 'gold': 500, 'bronze': 100, 'platinum': 1000}
>>> items = mydict.items()
>>> print sorted([value for key, value in items])
[100, 300, 500, 1000] 
```

但是，如果我想对 dict 中的值进行排序*以便*我仍然拥有键怎么办？输出应如下所示：

```
{'platinum': 1000, 'gold': 500, 'silver': 300, 'bronze': 100} 
```

有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:12:02.823

您无法获得字典作为结果，因为它们本质上是无序的。但是，您可以获得（键，值）对的列表，如果您使用该`key`参数，则相当容易。例如：

```
sorted(mydict, key=mydict.get) 
```

对于降序，要么反转结果列表，要么`reverse=True`作为另一个参数传递给`sorted`.

请注意，您可以使用其结果来构造[OrderedDict](http://docs.python.org/library/collections.html#ordereddict-objects)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:22:11.747

```
>>> mydict = {'silver': 300, 'gold': 500, 'bronze': 100, 'platinum': 1000}
>>> from operator import itemgetter
>>> from collections import OrderedDict
>>> od = OrderedDict(sorted(mydict.items(),  key=itemgetter(1), reverse=True))
>>> od
OrderedDict([('platinum', 1000), ('gold', 500), ('silver', 300), ('bronze', 100)]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T14:14:06.137

字典是无序的数据结构，因此无法排序。但是您可以将其转换为元组列表并在元组的第二项上对其进行排序：

```
>>> mydict = {'silver': 300, 'gold': 500, 'bronze': 100, 'platinum': 1000}
>>> sorted(mydict.items(), key = lambda (metal, price): -price)
[('platinum', 1000), ('gold', 500), ('silver', 300), ('bronze', 100)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:18:52.483

你试过这个吗，

```
 mydict = {'silver': 300, 'gold': 500, 'bronze': 100, 'platinum': 1000}
    from operator import itemgetter
    sorted(mydict.items(), key=itemgetter(1),  reverse=True)
    o/p = > [('platinum', 1000), ('gold', 500), ('silver', 300), ('bronze', 100)] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T14:11:33.307

如果您只想做*print*，那么您仍然拥有钥匙；也打印那些：

```
from operator import itemgetter 

print '{' + ', '.join([': '.join(map(repr, item)) for item in sorted(items, key=itemgetter(1), reverse=True)]) + '}' 
```

输出：

```
>>> print '{' + ', '.join([': '.join(map(repr, item)) for item in sorted(mydict.items(), key=itemgetter(1), reverse=True)]) + '}'
{'platinum': 1000, 'gold': 500, 'silver': 300, 'bronze': 100} 
```

# javascript - jQuery渐变水槽效果按钮

> ID：12584740
> 
> 赞同：1
> 
> 时间：2012-09-25T14:08:56.450
> 
> 标签：javascript, jquery, css, hover

有两种方法可以做到这一点，就像我在没有闪光灯的情况下看到的那样。

当您将鼠标移到图像上时；它逐渐变为悬停类。或者，当您将鼠标悬停在图像上时，边距会改变每一侧，无论哪种方式都是水平的。

第一种方法会更好，但归根结底是CSS。当您将鼠标悬停在它上面时，我希望此按钮逐渐下沉 - 并且您将鼠标移开，它会弹回：

# html

```
<center><br /><br />
<a href="#"><img src="//gc-cdn.com/button.png" alt=""></a>
</center> 
```

# CSS

```
img{border-right:15px solid #333;border-bottom:15px solid #333}
img:hover{border-right:1px solid #333;border-bottom:1px solid #333} 
```

# jsFiddle

[http://jsfiddle.net/fk6eG/9/](http://jsfiddle.net/fk6eG/9/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:13:52.090

您不需要 javascript 来执行此操作，您可以使用 CSS 过渡：

```
img{
    border-right:15px solid #333;
    border-bottom:15px solid #333;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out;
}
img:hover{border-right:1px solid #333;border-bottom:1px solid #333}​ 
```

更新小提琴：http: [//jsfiddle.net/fk6eG/15/](http://jsfiddle.net/fk6eG/15/)

编辑：对于 jquery 解决方案，您可以使用 jquery UI[切换类](http://jqueryui.com/docs/switchClass/)方法：

CSS：

```
 .c1{border-right:15px solid #333;border-bottom:15px solid #333;}
 .c2{border-right:1px solid #333;border-bottom:1px solid #333}​ 
```

Javascript：

```
$(".c1").hover(function () {
        $(this).switchClass("c1", "c2", 1000);        
    }, function () {
        $(this).switchClass("c2", "c1", 1000);    
    });​ 
```

小提琴样本：http: [//jsfiddle.net/fk6eG/23/](http://jsfiddle.net/fk6eG/23/)

# deployment - 码头部署顺序

> ID：12584741
> 
> 赞同：8
> 
> 时间：2012-09-25T14:08:57.353
> 
> 标签：deployment, jetty, web-deployment, jetty-8

我使用 ContextAppProvider 在码头 8.1.4 中部署了多场战争。我们想指定部署战争应用程序的顺序，因为我们有一些战争依赖于其他战争。

那么在jetty中如何设置具体的部署顺序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T20:55:43.093

2 策略：

1.  将通用代码嵌入到所有战争中，因此不需要部署顺序。
2.  将通用代码构建到一个库jar中，并将这个jar放在jetty类路径中，以便所有战争都可以使用它。

# perl - Perl POD 覆盖脚本和测试（不是模块）

> ID：12584743
> 
> 赞同：6
> 
> 时间：2012-09-25T14:09:01.353
> 
> 标签：perl, code-coverage, perl-pod

有没有办法测量脚本的 POD 覆盖率（例如`*.pl`）？

我可以使用and测量*包*的文档覆盖率，但我无法测量*scripts*的文档覆盖率，因为用于检查包内容的底层用途，由于缺少文件而失败。`Pod::Coverage``Test::Pod::Coverage`*`Pod::Coverage``Devel::Symdump``require``.pm`*

 *有没有办法解决这个问题？

（我必须在文件中包含 POD 文档`.pl`，因此将所有内容移动到模块中并记录它对我来说不是一个好的解决方案。无论我能做到这一点，它已经这样做了。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:53:57.577

Pod::Coverage 加载（执行）模块以使其创建 subs 等。您将不得不以某种方式阻止您的 .pl 正常运行。

```
#!/usr/bin/perl
...
main(@ARGV) if !$ENV{NO_RUN};
1; # For do() 
```

但是一旦你这样做了，就很容易了，因为你告诉 Pod::Coverage 要检查哪个包 ( `package`) 和要检查哪个文件 ( `pod_from`)。

```
#!/usr/bin/perl

use strict;
use warnings;

use Test::More tests => 1;

use Pod::Coverage qw( );

{
    package the_script;
    local $ENV{NO_RUN} = 1;
    do "script.pl" or die $@;
}

my $pc = Pod::Coverage->new(
   package  => 'the_script',
   pod_from => 'script.pl',
);

# P::C expects "require the_script;" to succeed.
$INC{"the_script.pm"} = 1;

my $coverage = $pc->coverage();
die $pc->why_unrated()
   if !defined($coverage);

ok($coverage)
   or diag("Not covered: ".join(', ', $pc->naked()));

1; 
```

经测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T22:13:23.830

使您的程序成为模数。这[就是 ikegami 正在做](https://stackoverflow.com/a/12586646/8817)的事情，但他让你设置一个环境变量。

```
run(@ARGV) unless caller; 
```

一旦你的程序真的是一个具有一些默认行为的模块，你就可以在它上面使用模块工具。*

# java - 规范化 JSON 文件

> ID：12584744
> 
> 赞同：32
> 
> 时间：2012-09-25T14:09:07.070
> 
> 标签：java, ruby, json

我有一堆想要存储在版本控制中的自动生成的 JSON 文件。问题是每次文件被序列化时，属性以不同的顺序出现，因此很难知道文件是否真的发生了变化和/或真正的区别是什么。

有谁知道将执行此任务的现有开源工具？

如果做不到这一点，是否有人知道带有解析器和生成器的 JSON 库，可以配置为输出“漂亮”的 JSON，其属性按（比如说）词法顺序排列？（Java 或 Ruby 库将是理想的，但也欢迎其他线索。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-26T20:39:57.643

[Python 的 JSON 模块](http://docs.python.org/library/json.html)在其他程序中非常有用：

```
generate_json | python -mjson.tool > canonical.json 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-06T14:23:23.260

如果您愿意通过调用来承担一些开销

```
gson.toJson(canonicalize(gson.toJsonTree(obj))); 
```

然后你可以做这样的事情：

```
protected static JsonElement canonicalize(JsonElement src) {
  if (src instanceof JsonArray) {
    // Canonicalize each element of the array
    JsonArray srcArray = (JsonArray)src;
    JsonArray result = new JsonArray();
    for (int i = 0; i < srcArray.size(); i++) {
      result.add(canonicalize(srcArray.get(i)));
    }
    return result;
  } else if (src instanceof JsonObject) {
    // Sort the attributes by name, and the canonicalize each element of the object
    JsonObject srcObject = (JsonObject)src;
    JsonObject result = new JsonObject();
    TreeSet<String> attributes = new TreeSet<>();
    for (Map.Entry<String, JsonElement> entry : srcObject.entrySet()) {
      attributes.add(entry.getKey());
    }
    for (String attribute : attributes) {
      result.add(attribute, canonicalize(srcObject.get(attribute)));
    }
    return result;
  } else {
    return src;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-09T05:09:03.700

杰克逊支持这一点：

@JsonPropertyOrder（字母=真）

[http://fasterxml.github.io/jackson-annotations/javadoc/2.3.0/com/fasterxml/jackson/annotation/JsonPropertyOrder.html](http://fasterxml.github.io/jackson-annotations/javadoc/2.3.0/com/fasterxml/jackson/annotation/JsonPropertyOrder.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:20:32.000

开源 Java 库[Jackson](http://jackson.codehaus.org/)可能需要花费一些精力来设置，但它能够进行漂亮的打印，并且有一个非常简洁的`@JsonPropertyOrder`注释，它支持字母或手动指定的输出顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T07:20:50.280

在输出之前对要序列化的对象的键进行排序。在 Ruby 1.9 中，哈希是默认排序的；在 Ruby 1.8 中它们不是。无论哪种情况，您都可以使用来自 active_support 的 OrderedHash。

每当您要编写 JSON 数据时，对键进行排序。请注意，在 Ruby 1.8 中，符号无法排序，因此您必须`to_s`在排序中调用。

```
require 'rubygems'
require 'json'
require 'active_support/ordered_hash'

obj = {
  :fig => false,
  :bananas => false,
  :apples => true,
  :eggplant => true,
  :cantaloupe => true,
  :dragonfruit => false
}

def sorted_hash(hsh)
  sorted_keys = hsh.keys.sort_by { |k| k.to_s }
  sorted_keys.inject(ActiveSupport::OrderedHash.new) do |o_hsh, k|
    o_hsh[k] = hsh[k]
    o_hsh
  end
end

puts JSON.pretty_generate(obj)
# Could output in any order, depending on version of Ruby
# {
#   "eggplant": true,
#   "cantaloupe": true,
#   "dragonfruit": false,
#   "fig": false,
#   "bananas": false,
#   "apples": true
# }

puts JSON.pretty_generate(sorted_hash(obj))
# Always output in the same order
# {
#   "apples": true,
#   "bananas": false,
#   "cantaloupe": true,
#   "dragonfruit": false,
#   "eggplant": true,
#   "fig": false
# } 
```

如果您的数据由对象数组或嵌套对象组成，则需要递归地创建排序哈希：

```
nested_obj = {:a => {:d => true, :b => false}, :e => {:k => false, :f => true}, :c => {:z => false, :o => true}}

def recursive_sorted_hash(hsh)
  sorted_keys = hsh.keys.sort_by { |k| k.to_s }
  sorted_keys.inject(ActiveSupport::OrderedHash.new) do |o_hsh, k|
    o_hsh[k] = hsh[k].is_a?(Hash) ? recursive_sorted_hash(hsh[k]) : hsh[k]
    o_hsh
  end
end

puts JSON.pretty_generate(nested_obj)
# Again, could be in any order
# {
#   "a": {
#     "b": false,
#     "d": true
#   },
#   "e": {
#     "f": true,
#     "k": false
#   },
#   "c": {
#     "z": false,
#     "o": true
#   }
# }

puts JSON.pretty_generate(recursive_sorted_hash(nested_obj))
# Even nested hashes are in alphabetical order
# {
#   "a": {
#     "b": false,
#     "d": true
#   },
#   "c": {
#     "o": true,
#     "z": false
#   },
#   "e": {
#     "f": true,
#     "k": false
#   }
# } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T01:33:42.477

这是 Qt 中的一个简单的 JSON 编码器——应该相对容易重铸成 Java。您真正需要做的就是确保在写出时对键进行排序——可以使用另一个 JSON 包读入。

```
QString QvJson::encodeJson(const QVariant& jsonObject) {
    QVariant::Type type = jsonObject.type();
    switch (type) {
        case QVariant::Map: 
            return encodeObject(jsonObject);
        case QVariant::List:
            return encodeArray(jsonObject);
        case QVariant::String:
            return encodeString(jsonObject);
        case QVariant::Int:
        case QVariant::Double:
            return encodeNumeric(jsonObject);
        case QVariant::Bool:
            return encodeBool(jsonObject);
        case QVariant::Invalid:
            return encodeNull(jsonObject);
        default:
            return encodingError("encodeJson", jsonObject, ErrorUnrecognizedObject);
    }
}

QString QvJson::encodeObject(const QVariant& jsonObject) {
    QString result("{ ");
    QMap<QString, QVariant> map = jsonObject.toMap();
    QMapIterator<QString, QVariant> i(map);
    while (i.hasNext()) {
        i.next();
        result.append(encodeString(i.key()));

        result.append(" : ");

        result.append(encodeJson(i.value()));

        if (i.hasNext()) {
            result.append(", ");
        }
    }
    result.append(" }");
    return result;
}

QString QvJson::encodeArray(const QVariant& jsonObject) {
    QString result("[ ");
    QList<QVariant> list = jsonObject.toList();
    for (int i = 0; i < list.count(); i++) {
        result.append(encodeJson(list.at(i)));
        if (i+1 < list.count()) {
            result.append(", ");
        }
    }
    result.append(" ]");
    return result;
}

QString QvJson::encodeString(const QVariant &jsonObject) {
    return encodeString(jsonObject.toString());
}

QString QvJson::encodeString(const QString& value) {
    QString result = "\"";
    for (int i = 0; i < value.count(); i++) {
        ushort chr = value.at(i).unicode();
        if (chr < 32) {
            switch (chr) {
                case '\b':
                    result.append("\\b");
                    break;
                case '\f':
                    result.append("\\f");
                    break;
                case '\n':
                    result.append("\\n");
                    break;
                case '\r':
                    result.append("\\r");
                    break;
                case '\t':
                    result.append("\\t");
                    break;
                default:
                    result.append("\\u");
                    result.append(QString::number(chr, 16).rightJustified(4, '0'));
            }  // End switch
        }
        else if (chr > 255) {
            result.append("\\u");
            result.append(QString::number(chr, 16).rightJustified(4, '0'));
        }
        else {
            result.append(value.at(i));
        }
    }
    result.append('"');
    QString displayResult = result;  // For debug, since "result" often doesn't show
    Q_UNUSED(displayResult);
    return result;
}

QString QvJson::encodeNumeric(const QVariant& jsonObject) {
    return jsonObject.toString();
}

QString QvJson::encodeBool(const QVariant& jsonObject) {
    return jsonObject.toString();
}

QString QvJson::encodeNull(const QVariant& jsonObject) {
    return "null";
}

QString QvJson::encodingError(const QString& method, const QVariant& jsonObject, Error error) {
    QString text;
    switch (error) {
        case ErrorUnrecognizedObject: 
            text = QObject::tr("Unrecognized object type");
            break;
    default:
            Q_ASSERT(false);
    }
    return QObject::tr("*** Error %1 in QvJson::%2 -- %3").arg(error).arg(method).arg(text);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T15:27:36.590

Ruby 1.9+ 维护散列的插入顺序，而 JSON for 1.9+ 尊重这一点。

```
asdf = {'a' => 1, 'b' => 2}
asdf.to_json # => "{\"a\":1,\"b\":2}"

asdf = {'b' => 1, 'a' => 2}
asdf.to_json # => "{\"b\":1,\"a\":2}" 
```

以下是生成“漂亮”格式的方法：

```
asdf = {'a' => 1, 'b' => 2}
puts JSON.pretty_generate(asdf)
{
  "a": 1,
  "b": 2
}

asdf = {'b' => 1, 'a' => 2}
irb(main):022:0> puts JSON.pretty_generate(asdf)
{
  "b": 1,
  "a": 2
} 
```

* * *

> ...相同的属性以不同的顺序插入...

这对我来说没有多大意义，但我要试一试。

因为 Ruby 维护插入顺序，所以如果按给定顺序创建哈希，数据的顺序是什么并不重要。通过对键进行排序并重新生成哈希来强制排序，并将其传递给 JSON：

```
require 'json'

puts Hash[{'a' => 1, 'b' => 2}.sort_by{ |a| a }].to_json
=> {"a":1,"b":2}

puts Hash[{'b' => 2, 'a' => 1}.sort_by{ |a| a }].to_json
=> {"a":1,"b":2}

puts Hash[{'b' => 2, 'c' => 3, 'a' => 1}.sort_by{ |a| a }].to_json
=> {"a":1,"b":2,"c":3}

puts Hash[{'b' => 2, 'c' => 3, 'a' => 1}.sort_by{ |a| a }].to_json
=> {"a":1,"b":2,"c":3}

puts Hash[{'a' => 1, 'c' => 3, 'b' => 2}.sort_by{ |a| a }].to_json
=> {"a":1,"b":2,"c":3} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-25T14:16:54.910

我没有尝试过很多组合，但似乎[google-gson](http://code.google.com/p/google-gson/)保持`JSON`.

*此处删除了一个示例，因为它不再相关*

我从以前的项目经验中知道它是非常可定制的，例如如果[基础对象](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)不够，可以使用[GsonBuilder](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html)创建更复杂的适配器。

但是，我尚未使用您的用例对此进行广泛测试，但是检查它是否具有预期的输出应该很简单

**更新**

而不是使用 SVN/CVS 来检查您的文件是否被修改，我发现 GSON 具有内置的[版本控制支持](https://sites.google.com/site/gson/gson-user-guide#TOC-Versioning-Support)，这可能会或可能不会解决您的问题，来自他们的文档：

> [使用@Since](http://code.google.com/p/google-gson/source/browse/trunk/gson/src/main/java/com/google/gson/annotations/Since.java)注解可以维护同一对象的多个版本。此注释可用于类、字段以及在未来版本中的方法。为了利用此功能，您必须将 Gson 实例配置为忽略任何大于某个版本号的字段/对象。如果没有在 Gson 实例上设置版本，那么它将序列化和反序列化所有字段和类，而不管版本如何。

**更新**

> 我能想到的唯一另一件事是用[rhino](https://developer.mozilla.org/en-US/docs/Rhino)解析您的外部文件并将[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)解析后的文件转换`JSON`回字符串，然后您可以确定它已通过单个“解析器”运行并且输出不会有所不同。

然后，您可以检测任何可能的更改。

# mysql - MySQL 删除包含 NaN 的记录

> ID：12584750
> 
> 赞同：1
> 
> 时间：2012-09-25T14:09:25.557
> 
> 标签：mysql

我有一个 MySQL 表，其中有一列“A”，其中包含 NaN 值。你如何更新它们？我努力了

```
update myTable set A = 0 where A is NaN; 
```

但它给了我一个语法错误。如何查询 NaN？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:11:29.983

您应该能够使用以下其中一项：

```
update myTable 
set A = 0 
where A = 'NaN'; 
```

或者

```
update myTable 
set A = 0 
where A LIKE '%NaN%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:12:57.073

尝试

```
 update myTable set A = 0 where A = 'NaN'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:16:27.693

尝试：

```
update myTable set A = '0' where A = 'NaN' 
```

# javascript - 避免关注 html-table 中的链接

> ID：12584759
> 
> 赞同：1
> 
> 时间：2012-09-25T14:09:37.200
> 
> 标签：javascript, html, dom

我有一堆表格数据，如下图所示。

我想避免在通过数据进行设置时点击链接（a href）。

不使用 Jquery，我使用的是原型 1.6。

有什么办法可以做到这一点，因为我不知道下面一行的 Id 吗？（我已经完成了从复选框到输入文本的操作，但我同时知道他们的两个 ID。现在我不知道？

我在复选框上所做的是：

```
function checkboxOnFocus(id){
    var adjustField = document.getElementById('a'+id);
    adjustField.focus();
    adjustField.select();
} 
```

“文本”字段的图片突出显示： ![突出显示的链接图片（这是我希望避免的）：](../Images/7f959bd55d6089c2c13c9f39e1f39a5c.png)

突出显示的链接图片（这是我希望避免的）： ![突出显示的链接图片](../Images/639aae7da1651ef67d20293397df2558.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:16:22.313

在您的 HTML`tabindex`中，将链接的属性设置为 -1。这会将它们排除在跳位顺序之外，不需要 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:23:36.327

*   首先不要将复选框更改为输入文本框。
*   为了避免点击后文本链接的虚线正方形，添加**`outline:none;`**css
*   添加类以避免在通过数据进行设置时点击链接（a href）。`.check{ cursor:text;}`

# php - mysql_connect()：没有这样的文件或目录

> ID：12584762
> 
> 赞同：15
> 
> 时间：2012-09-25T14:09:46.970
> 
> 标签：php, mysql, redhat, mysql-connect

我刚刚在旧的 RedHat7 上安装了 MySQL 服务器（版本 3.23.58）。由于依赖关系，我无法安装更新的 MySQL 版本。我无法更新此 RedHat 服务器上的库。

但是，我在使用 PHP 连接到数据库时遇到问题。首先我使用 PDO，但我意识到 PDO 与 MySQL 3.23 不兼容......

所以我用`mysql_connect()`. 现在我有以下错误：

```
Warning: mysql_connect(): No such file or directory in /user/local/apache/htdocs/php/database.php on line 9
Error: No such file or directory 
```

我的代码是：

```
$host = 'localhost';
$user = 'root';
$password = '';
$database = 'test';
$db = mysql_connect($host, $user, $password) or die('Error : ' . mysql_error());
mysql_select_db($database); 
```

我检查了两次数据库是否存在并且登录名和密码正确。

这很奇怪，因为代码在我的带有 Wampp 的 Windows PC 上运行良好。我无法弄清楚问题出在哪里。

任何的想法？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-25T14:20:45.147

是的，你不能那样连接！

@PLB 和 @jammypeach mysqli 在 v4.1 之后，他正在使用 v3 :) 如果您真的想提供帮助，请阅读规范！

您无法连接，因为您的套接字文件有点错误。我现在记得旧的RH以前有这个问题。您的套接字可能是 /var/mysql/mysql.sock 或 /tmp/mysql.sock 但一个或多个应用程序正在寻找另一个。

如果你的是 /tmp/mysql.sock 但没有 /var/mysql/mysql.sock 你应该：

```
cd /var 
mkdir mysql
cd mysql
ln -s /tmp/mysql.sock mysql.sock 
```

如果你有 /var/mysql/mysql.sock 但没有 /tmp/mysql.sock 那么：

```
cd /tmp
ln -s /var/mysql/mysql.sock mysql.sock 
```

您需要权限才能进行更改。只需 sudo，如果需要，在上述命令之前！

另一个解决方案（更简单）：

创建文件并调用 phpinfo(); 寻找'mysql.default_socket'；或'pdo_mysql.default_socket'；打开 My.ini 或 My.cnf 找到套接字值，例如 socket=/tmp/mysql.sock 打开您的 php.ini 文件（在您的 phpinfo() 页面上也可以找到“加载的配置文件”）并更改所有出现将错误的套接字位置从 MySQL 转移到正确的套接字位置。

另一个解决方案（最简单）：PDO 的 DSN：

```
mysql:unix_socket=/tmp/mysql.sock;dbname=... 
```

mysql_connect：

```
$db = mysql_connect('localhost:/tmp/mysql.sock', ... 
```

你的系统在安全方面真的很可怕，如果你托管敏感数据，我会升级到最新版本。

- - 更新 - -

啊啊啊啊 PHP 5.0 和 MySQL 3.23 :)

PHP 5 有一个打包的 mysql 客户端，它无法连接到低于 4.1 版本的 MySQL 数据库。从 4.1 版开始，MySQL 使用了一种与 4.1 之前的数据库不兼容的新密码散列方式。您的配置连接到的服务器是 3.23 版。所以你需要给自己一个更高版本的 MySQL。抱歉，您的情况没有其他实用的解决方案。如果我是你，我会升级整个系统并安装最新的操作系统版本，如果必须的话，我会选择 Debian 和最新的稳定版本的 PHP 和 MySQL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-27T07:15:01.707

幸运的是，这对我来说效果很好：

```
$db = mysql_connect('localhost:/var/lib/mysql/mysql.sock', 'Username', 'Password'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-29T06:06:07.603

在 MAC OSX 上只需重新启动 mysql 服务器

```
sudo /usr/local/mysql/support-files/mysql.server restart 
```

它对我有用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-15T19:45:24.120

我有一个类似的问题，花了我几个小时才解决。我将 Mysql / Mariadb 放在一个单独的驱动器上，PHP 驱动的网站正在寻找默认位置的套接字。所以，我创建了一个符号链接，但我认为 SELinux 不会给予许可。所以，然后我将这些行添加到 /etc/php.ini 文件中并且它可以工作。

```
pdo_mysql.default_socket = /data/mysql/mysql.sock
mysql.default_socket = /data/mysql/mysql.sock
mysqli.default_socket = /data/mysql/mysql.sock 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-31T02:24:42.920

我使用 MAMP 并且有示例问题。我发现tmp中没有mysql.sock。所以使用这个代码

```
cd /tmp && ln -s /Applications/MAMP/tmp/mysql/mysql.sock 
```

它对我有用

# objective-c - 尝试访问 NSBitmapImageRep 时出现“EXC_BAD_ACCESS”错误

> ID：12584763
> 
> 赞同：1
> 
> 时间：2012-09-25T14:09:47.680
> 
> 标签：objective-c, xcode, macos, cocoa

我有代码：
*setUpMainImage.h：*

```
#import "MainOpenGLView.h"

@interface MainOpenGLView (setUpMainImage)
- (void)loadImage;
@end 
```

*设置主图像.m：*

```
#import "setUpMainImage.h"

@implementation MainOpenGLView (setUpMainImage)
- (void)loadImage {
    CIImage *_tempImage = [[CIImage alloc] initWithBitmapImageRep:_bottomTextureBitmap];
    CIFilter *_tempFilter = [CIFilter filterWithName:@"CIColorControls"];
    [_tempFilter setDefaults];
    [_tempFilter setValue:_tempImage forKey:@"inputImage"];
    [_tempFilter setValue:0 forKey:@"inputSaturation"];
    _tempImage = [_tempFilter valueForKey:@"outputImage"];
    _topTextureBitmap = [[NSBitmapImageRep alloc] initWithCIImage:_tempImage];
}
- (void)topTextureImage {
    float _topWide = _topTextureBitmap.pixelsWide;
    float _topHigh = _topTextureBitmap.pixelsHigh;
    glBindTexture(GL_TEXTURE_2D, _top_image_texture);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, _topWide, _topHigh, 0, GL_RGBA, GL_UNSIGNED_BYTE, [_topTextureBitmap bitmapData]);

    NSLog(@"_topWide:%f, _topHigh:%f", _topWide, _topHigh);
}
@end 
```

和

*MainOpenGLView.h：*

```
#import <Cocoa/Cocoa.h>
#import <QuartzCore/QuartzCore.h>
#import <Quartz/Quartz.h>
#import <OpenGL/OpenGL.h>

@interface MainOpenGLView : NSOpenGLView {
    NSBitmapImageRep *_topTextureBitmap;
    NSBitmapImageRep *_bottomTextureBitmap;
    GLuint _top_image_texture;
}
@end 
```

*MainOpenGLView.m：*

```
#import "MainOpenGLView.h"
#import "setUpMainImage.h"

@implementation MainOpenGLView
    - (id)initWithCoder:(NSCoder *)coder {
        self = [super initWithCoder: coder];
        [self loadImage];
        [self topTextureImage];
        return self;
    }
@end 
```

我得到错误
`Thread 1: EXC_BAD_ACCESS(code=1, address=0x10)`

`setUpMainImage.m`在线：

`float _topWide = _topTextureBitmap.pixelsWide;`

我正在使用 ARC（自动引用计数），所以我没有手动保留/释放任何对象。Maby ARC 发布`_topTextureBitmap`太早？

# r - 简单的向量操作

> ID：12584764
> 
> 赞同：3
> 
> 时间：2012-09-25T14:09:50.723
> 
> 标签：r, vector

我很确定这将是微不足道的 - 但对于我的生活来说，我没有想到优雅的解决方案......

我有两个可能不同长度的向量：

```
a <- c(1,2,3,4,5)
names(a)<-c("a","b","c","d","e")

b <- c(10,20,30)
names(b)<-c("a","b","d") 
```

我想生成 x 这样：

```
x

 a  b  c  d  e 
10 20 NA 30 NA 
```

对于上下文 - 这是一个比较图，我正在比较不同的模型，其中一些模型共享一些参数 - 我想确保等效值排列。

尽管在以下情况下考虑更多：

```
a <- c(1,2,3,4,5)
names(a)<-c("a","b","c","d","e")

b <- c(10,20,30,1000)
names(b)<-c("a","b","d","x") 
```

我需要返回 2 个新向量：

```
x1
 a  b  c  d  e  x
 1  2  3  4  5  NA 
```

和

```
x2
  a   b   c   d   e     x
 10  20  NA  30  NA  1000 
```

因此给了我 2 个系列来并行绘制 - 我希望至少其中一些是有道理的。

如果有人对我如何完成上述工作有任何建议，我们将不胜感激。

谢谢阅读

D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:25:49.737

对于`x`, 尝试

```
> setNames(b[names(a)], names(a))
 a  b  c  d  e 
10 20 NA 30 NA 
```

对于`x1`and `x2`，尝试

```
> allnames <- union(names(a), names(b))
> setNames(a[allnames], allnames)
 a  b  c  d  e  x 
 1  2  3  4  5 NA 
> setNames(b[allnames], allnames)
  a    b    c    d    e    x 
 10   20   NA   30   NA 1000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:17:01.813

在向量子集上添加一`setNames`点点并摇匀。

```
setNames(b[names(a)], names(a))
 a  b  c  d  e 
10 20 NA 30 NA 
```

这适用于您的示例数据，但您可能需要试验它是否更普遍适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:28:08.617

我会做：

```
a <- c(1,2,3,4,5)
names(a)<-c("a","b","c","d","e")
b <- c(10,20,30)
names(b)<-c("a","b","d")

unique(c(names(a),names(b))) -> d
x <- rep(NA,length(d))
names(x) <- d
x[d%in%names(b)] <- b   # for your first case
x
 a  b  c  d  e 
10 20 NA 30 NA 
```

它也适用于您的第二种情况：

```
a <- c(1,2,3,4,5)
names(a)<-c("a","b","c","d","e")
b <- c(10,20,30,1000)
names(b)<-c("a","b","d","x")

unique(c(names(a),names(b))) -> d
x1 <- x2 <- rep(NA,length(d))
names(x1) <- names(x2) <- d
x1[d%in%names(a)] <- a
x2[d%in%names(b)] <- b
x1
a  b  c  d  e  x 
1  2  3  4  5 NA 
x2
 a    b    c    d    e    x 
10   20   NA   30   NA 1000 
```

# qt - 是什么让 Phonon/DirectShow 错过了标准编解码器？

> ID：12584767
> 
> 赞同：3
> 
> 时间：2012-09-25T14:09:57.043
> 
> 标签：qt, directshow, phonon

我们正在开发一个基于 Qt 的应用程序，其中包括使用 Phonon 的视频播放。我们使用具有 MJPEG 压缩的 .avi 文件（因为我们需要快速查找特定帧）。

在开发机器（运行 Windows 7）上一切正常 - Phonon 使用 DirectShow 后端，DirectShow 使用标准 MJPEG 编解码器从`quartz.dll`.

但是 Windows 7 上的一些测试人员报告说视频播放中断，我在其中一台机器上快速浏览了一下，并没有看到任何特别之处，但是：

*   **InstalledCodecs**实用程序报告 MJPEG 编解码器存在并启用
*   **Windows Media Player**可以正常播放文件（但我认为它使用不同的后端，而不是 DirectShow）。
*   **Media Player Classic**配置为使用**DirectShow**和标准 MJPEG 插件抱怨没有可用的编解码器。
*   我们的软件确实坏了，显然是出于同样的原因，不管它是什么。

phonon 后端安装在插件目录中，该目录添加到我在日志中看到的搜索路径中，因此应该加载它。我在开发机器上重命名了 QtSDK，以确保只有已安装的 qt 插件可用于应用程序，并且它继续在那里工作。

我将不胜感激任何关于下一步看哪里的建议。

我最终想知道的是：

*   可能是什么问题呢
*   安装程序或应用程序本身如何检测到问题
*   如何解决问题 - 自动或通过指示用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:15:55.157

我最近遇到了类似的问题，但它与各种视频文件格式有关，不一定只是 MPEG 压缩。

我找到的解决方案是安装一个整体编解码器包。这对少数计算机上的设置做得很好。如果您要部署到很多用户，您可能希望找到您需要的确切编解码器并确保 phonon 可以找到它们。

[K-Lite 编解码器包下载](http://codecguide.com/download_kl.htm)

# php - php : 将照片上传到 facebook 墙的另一种方式

> ID：12584773
> 
> 赞同：0
> 
> 时间：2012-09-25T14:10:16.240
> 
> 标签：php, google-app-engine, facebook-graph-api

我通常使用下面的代码在墙上张贴照片

```
$attachments = array( 
            'message' => $mess,
             'access_token' => $access_token
          );
$facebook->setFileUploadSupport(true);
$attachments['image'] ='@'.realpath($filename);
$photoz = $facebook->api('/'.$aid.'/photos', 'POST', $attachments); 
```

我使用谷歌应用引擎，所以上面的方法不行，所以我按照下面的方法

```
 $filename ="prof.jpg";
  $im ='@'.realpath($filename);
   $post = "https://graph.facebook.com/".$aid."/photos?access_token=".$access_token."&message=hellohi&source=".$im."&method=POST";
 $upload = fetch_url($post);
    echo $upload; 
```

但是当我收到错误 #324)**需要上传文件","type":"OAuthException","code":32**

我能知道是什么原因吗？我错在哪里？

ps - $im 返回@/base/data/home/apps/s~myphotoapp/1.362007154292719350/prof.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:25:02.783

> 但是当我收到错误 #324)**需要上传文件","type":"OAuthException","code":32**
> 
> 我能知道是什么原因吗？

*很简单：您实际上*并没有将文件作为 HTTP 上传上传。

数据必须以一种称为`multipart/form-data`– 的格式编码，而您只是将参数放入 URL 中，这是不同的。

因此，要么你去研究一下如何`multipart/form-data`在 Google App Engine 提供给你的技术范围内发送数据；

或者……如果您的图像可以通过 HTTP 公开访问，您还可以将`source`参数切换为一个名为 的参数`url`，在该参数中您提供可检索图像的 HTTP URL。

# grails - 创建一个可选的一对一关系，这是唯一的

> ID：12584780
> 
> 赞同：2
> 
> 时间：2012-09-25T14:10:29.880
> 
> 标签：grails, grails-orm, one-to-one

我正在尝试创建一个简单的一对一关系，但它是可选的。当我尝试保存“Face”对象时，出现“必须是唯一的”验证错误。当用户添加新的“Face”时，不需要“Nose”。在这个过程的后期，如果用户确实添加了“鼻子”，那么它需要是唯一的。

```
class Face {
    Nose nose
    static constraints = {
        nose unique: true, nullable: true
    }
}

class Nose {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:37:58.280

正如 tim_yates 提到的，它确实适用于 Grails 2.1.1。我的应用程序存在配置问题。

为了测试这一点，我用这个简单的测试编辑了 FaceTests.groovy 文件：

```
package demo

import grails.test.mixin.*
import org.junit.*

@TestFor(Face)
class FaceTests {

    void testSaving() {

       def face = new Face()
        assertNotNull face.save(flush:true)

    }
} 
```

结果：

```
grails> test-app
| Completed 2 unit tests, 0 failed in 451ms
| Tests PASSED - view reports in /Users/devin/Desktop/grails_demo_app/target/test-reports 
```

# c# - WPF 应用程序的本地化

> ID：12584781
> 
> 赞同：1
> 
> 时间：2012-09-25T14:10:31.050
> 
> 标签：c#, wpf, localization

我们正在开发一个应该支持多种语言的 WPF 应用程序。由于我们必须支持一些开发团队都不知道的语言，我们同意允许用户（管理员）输入这些语言的文本。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:14:18.097

您可以按照以下步骤

1 创建资源文件

将此文件 StringResources.xaml 添加到 Ressources 目录。样品在这里：

```
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
     xmlns:system="clr-namespace:System;assembly=mscorlib">

     <system:String x:Key="close">Close</system:String>
</ResourceDictionary> 
```

您可以创建多个文件，每种语言一个。

2 添加资源（启动应用程序时调用它）

```
private void SetLanguageDictionary()
{
     ResourceDictionary dict = new ResourceDictionary();
     switch (Thread.CurrentThread.CurrentCulture.ToString())
     { 
       case "en-US":
         dict.Source = new Uri("..\\Resources\\StringResources.xaml", UriKind.Relative);
         break;
       case "fr-CA":
         dict.Source = new Uri("..\\Resources\\StringResources.fr-CA.xaml", UriKind.Relative);
         break;
       default :
         dict.Source = new Uri("..\\Resources\\StringResources.xaml",UriKind.Relative);
         break;
     }
     this.Resources.MergedDictionaries.Add(dict);
} 
```

3 使用资源，像这样 -

```
<Button      
   x:Name="btnLogin"
   Click="btnLogin_Click"
   Content="{DynamicResource login}"
   Grid.Row="3"
   Grid.Column="0" 
   Padding="10" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:23:28.447

[我在WPFLocalizationExtension](http://wpflocalizeextension.codeplex.com/)方面取得了非常好的经验

它带有大量功能（例如，根据语言绑定到本地化图像资源）和最好的：它是免费的。还有一些 resx 编辑工具允许您加载和编辑您的 resx 本地化文件。

# php - mysql 使用连接更改列名

> ID：12584783
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:10:34.640
> 
> 标签：php, mysql, join

我有一个表 data_table，我在其上将一个主键定义为 d_id，将其他字段定义为 f1 到 f25。我有另一个表作为 fields_name 字段名称存储为值 f_id, field_name, order

我想从数据表中获取所有数据，使用列名作为存储在 fields_name 表中的 field_values 我得到了什么，

```
f1   f2   f3   f4 
a    b    c    d 
```

我想要的是，

```
field_name1    field_name1    field_name1    field_name1
a              b              c              d 
```

帮助appriciated......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:52:07.267

我不明白......如果你想重命名你可以使用的列名`AS`

`SELECT f1 AS "field_name1", f2 AS "field_name2", f3 AS "field_name3" FROM table`

编辑：

尝试这样的事情：

`SELECT f1,f2,f3,f4... FROM data_table LEFT JOIN data_table ON data_table.f1=(SELECT field_name FROM fields_names WHERE a_flag='f1') AND data_table.f2=(SELECT field_name FROM fields_names WHERE a_flag='f2')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:16:34.363

听起来你可能想做这样的事情：

```
select d_id, 
  max(case when field_name = 'Header' then value end) Header,
  max(case when field_name = 'ID No.' then value end) ID_No,
  max(case when field_name = 'Image' then value end) Image,
  max(case when field_name = 'Name' then value end) Name
from
(
  select d_id, f1 value, 'f1' col
  from data_table
  union all
  select d_id, f2 value, 'f2' col
  from data_table
  union all
  select d_id, f3 value, 'f3' col
  from data_table
  union all
  select d_id, f4 value, 'f4' col
  from data_table
) u
inner join fields_name f
  on u.col = f.a_flag
group by d_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8f6cd/5)

# jquery - 如何从 ashx 文件中读取 JSON 数据

> ID：12584785
> 
> 赞同：1
> 
> 时间：2012-09-25T14:10:40.957
> 
> 标签：jquery, asp.net

从我的客户端我将 json 数据发送到 data.ashx 文件，但我无法从ashx 文件的**ProcessRequest方法读取数据。**只是不明白为什么我得到空

这样我将数据从客户端发送到 ashx 文件

```
 var FeedCrd = {};
                FeedCrd["Name"] = $("input[id*='txtName']").val();
                FeedCrd["Subject"] = $("input[id*='txtSubject']").val();
                FeedCrd["Email"] = $("input[id*='txtFEmail']").val();
                FeedCrd["Details"] = $("textarea[id*='txtDetails']").val();

                $.ajax({
                    type: "POST",
                    url: urlToHandler + "?ac=send",
                    data: JSON.stringify(FeedCrd),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        if (data == "SUCCESS");
                        {
            //
                        }

                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }

                }); 
```

**这是我的ProcessRequest**的 ashx 文件代码

 **```
 public void ProcessRequest(HttpContext context)
    {
        string outputToReturn = "";
        context.Response.ContentType = "text/html";

        if (context.Request.QueryString["ac"] == "send")
        {
                string sName = context.Request["Name"];
                string sSubject = context.Request["Subject"];

                outputToReturn = "SUCCESS";
        }
        context.Response.Write(outputToReturn);
    } 
```

我还看到了数据如何使用 firebig 传输到服务器端。这是数据 **{"Name":"cvv","Subject":"fdsfd","Email":"dsdsa@xx.com","Details":"wow"}**

所以请帮我当json从客户端发送时如何从ashx文件中读取数据。请告诉我哪里出错了。请指导我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T00:09:31.953

首先要注意的是，确保您始终在 context.Request 对象中检查 null 或 Empty 字符串

接下来是你的响应应该是一个 JSON 对象，但你只是返回一个字符串。在从 .ashx 处理程序发送之前构造成 JSON

```
public void ProcessRequest(HttpContext context)
{
    string outputToReturn = String.Empty;   // Set it to Empty Instead of  ""
    context.Response.ContentType = "text/json";
    var ac = string.Empty ;
    var sName = String.Empty ;
    var sSubject = String.Empty ;

    // Make sure if the Particular Object is Empty or not
    // This will avoid errors
    if (!string.IsNullOrEmpty(context.Request["ac"]))
    {
        ac = context.Request["ac"];
    }

    if (ac.Equals("send")) // Use Equals instead of just =  as it also compares objects
    {
        if (!string.IsNullOrEmpty(context.Request["Name"]))
        {
            sName = context.Request["Name"];
        }
        if (!string.IsNullOrEmpty(context.Request["Subject"]))
        {
            sSubject = context.Request["Subject"];
        }
        // You need to Send your object as a JSON Object
        // You are just sending a sting 

        outputToReturn =  String.Format("{ \"msg\" : \"{0}\"  }", "SUCCESS" ) ;
    }
    context.Response.Write(outputToReturn);
} 
```

// 在这种情况下，您的 ajax 应该如下所示

```
$.ajax({
    type: "POST",
    url: urlToHandler + "?ac=send",
    data: JSON.stringify(FeedCrd),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(data) {
        if( data != null){
            if (data.msg == "SUCCESS"); {

              alert( data.msg)
            }
        }
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert(textStatus);
    }

});​ 
```**

# javascript - 关于使用 requirejs 的依赖

> ID：12584789
> 
> 赞同：3
> 
> 时间：2012-09-25T14:11:05.007
> 
> 标签：javascript, backbone.js, requirejs, marionette

假设我处于以下情况。

我需要使用
`backbone`which requires和`underscore`which requires , `jquery`
and
`backbone.marionette``backbone``underscore``jquery`

我应该写这个代码（1）还是下面的（2）

* * *

(1)

```
 shim: {
        backbone: {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        },
        marionette: {
            deps: ['backbone', 'underscore', 'jquery'],
            exports: 'marionette'
        },
    } 
```

* * *

(2)

```
 shim: {
        backbone: {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        },
        marionette: {
            deps: ['backbone'],
            exports: 'marionette'
        },
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:26:41.597

您不需要在 marionette 的依赖项中包含下划线和 jquery，因为它们已经为 Backbone 加载。对 (2) 的一些更正：

1.  您应该填充下划线并导出“_”，因为它应该位于全局命名空间中。
2.  Marionette 是一个 Backbone 插件，因此您无需导出任何内容，也可以导出“Backbone.Marionette”（请参阅[​​ http://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)）

我会这样做：

```
shim: {
    underscore: {
        exports: '_'
    },
    backbone: {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
    },
    marionette: {
        deps: ['backbone'],
        exports: 'Backbone.Marionette'
} 
```

# mysql - 如何创建 mysql LIKE 变量？

> ID：12584792
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:11:13.593
> 
> 标签：mysql, mysql-connect, sql-like

是否可以在 MySql 中为 LIKE 表达式创建一个变量？

前任。

```
SET @test = '%my text to look for%';
SELECT * FROM MYTABLE WHERE MYCOLUMN LIKE @test; 
```

当然，我尝试过这种方法，但没有奏效。

很抱歉选择了 mysql-connect 标签，实在想不出别的了。

**编辑 1**

“没有工作”意味着我没有得到变量的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:15:36.587

是的，您的示例应该可以正常工作。请参阅下面的测试用例：

[SQL 小提琴示例](http://sqlfiddle.com/#!2/d41d8/2326/1)

# uml - 单个项目的多个用例图

> ID：12584795
> 
> 赞同：1
> 
> 时间：2012-09-25T14:11:15.593
> 
> 标签：uml

我可以为一个项目制作多个用例图吗？我想以抽象的形式展示整个活动，然后在不同的用例图中详细了解每个用例。这是个好主意吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:14:54.497

当然可以。这完全取决于图表在传达设计方面的整体效果。我的建议是尝试第一次通过，然后征求听众对详细程度的反馈。您可能会发现在某些情况下您过度指定，而在其他情况下指定不足。没有硬性规定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:48:16.550

这是一个很好的问题，因为今天在许多工具中，您无法使用用例图创建单个项目的多个视图。这是一个工具限制，因此最好换成另一个工具:-)

# c# - 3.5 中没有 TPL 的非阻塞等待

> ID：12584803
> 
> 赞同：0
> 
> 时间：2012-09-25T14:11:34.467
> 
> 标签：c#, asynchronous, task-parallel-library, wait

如何在没有阻塞线程且没有 TPL' ContinueWith 的情况下执行等待？例如。在 3.5 中？我知道 TPL 的 3.5 移植版本（由 RX 团队提供），但我很想知道 - 我可以使用哪些线程原语（...... TPL 的场景是什么）。TPL 中有哪些 ContinueWith 替代方案？

// 这个处理程序会在异步 IO 操作期间阻塞线程吗？

```
public class AsyncHandler : IHttpAsyncHandler
    {
        public void ProcessRequest(HttpContext ctx)
        {
            // not used
        }

    public bool IsReusable
    {
        get { return false; }
    }

    public IAsyncResult BeginProcessRequest(HttpContext ctx,
                                            AsyncCallback cb,
                                            object obj)
    {
        AsyncRequestState reqState =
                            new AsyncRequestState(ctx, cb, obj);
        AsyncRequest ar = new AsyncRequest(reqState);
        ThreadStart ts = new ThreadStart(ar.ProcessRequest);
        Thread t = new Thread(ts);
        t.Start();

        return reqState;
    }

    public void EndProcessRequest(IAsyncResult ar)
    {
        AsyncRequestState ars = ar as AsyncRequestState;
        if (ars != null)
        {
            // Some cleanup
        }
    }
}
class AsyncRequestState : IAsyncResult
{
    public AsyncRequestState(HttpContext ctx,
                                AsyncCallback cb,
                                object extraData)
    {
        _ctx = ctx;
        _cb = cb;
        _extraData = extraData;
    }

    internal HttpContext _ctx;
    internal AsyncCallback _cb;
    internal object _extraData;
    private bool _isCompleted = false;
    private ManualResetEvent _callCompleteEvent = null;

    internal void CompleteRequest()
    {
        _isCompleted = true;
        lock (this)
        {
            if (_callCompleteEvent != null)
                _callCompleteEvent.Set();
        }           
        if (_cb != null)
            _cb(this);
    }

    public object AsyncState
    { get { return (_extraData); } }
    public bool CompletedSynchronously
    { get { return (false); } }
    public bool IsCompleted
    { get { return (_isCompleted); } }
    public WaitHandle AsyncWaitHandle
    {
        get
        {
            lock (this)
            {
                if (_callCompleteEvent == null)
                    _callCompleteEvent = new ManualResetEvent(false);

                return _callCompleteEvent;
            }
        }
    }
}

class AsyncRequest
{
    private AsyncRequestState _asyncRequestState;

    public AsyncRequest(AsyncRequestState ars)
    {
        _asyncRequestState = ars;
    }

    public void ProcessRequest()
    {
        //calling webservice or executing sql command asynchronously
        AsyncIOOperationWithCallback(state =>
                                        {
                                            ((AsyncRequestState)state.Context)._ctx.Response.Write("Operation completed");
                                            _asyncRequestState.CompleteRequest();
                                        }, _asyncRequestState);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:55:38.887

等待，顾名思义，就是“阻塞”。您可以在另一个线程上等待，但您会阻塞*该*线程。如果“非阻塞”是指*不阻塞 UI*，那么您可以等待另一个线程并通过 an 通知 UI 线程`event`（如果需要，它将处理`InvokeRequired`/ `BeginInvoke`）。

如果这不是您要问的，请提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:21:59.070

您通常在不阻塞线程的情况下处理异步操作的方式是让您的异步操作支持回调。TPL 在这里真的没有什么神奇之处。如果底层操作在某些时候不支持某种形式的回调，那么您最终仍然会遇到阻塞。经典的“开始/结束”[异步编程模型](http://msdn.microsoft.com/en-us/library/ms228963.aspx)完美地处理了这个要求。

TPL 真正的亮点在于为异常处理/聚合提供更好的支持，并允许更复杂的延续模型（例如 ContinueWhenAll 或 ContinueWhenAny）。还有对取消的新支持，包括防止后续延续。然而，延续本身实际上只不过是一个更漂亮、更干净的包装中的回调。

# iphone - iPhone XCode UITabBarController 和 UINavigationController

> ID：12584804
> 
> 赞同：1
> 
> 时间：2012-09-25T14:11:42.657
> 
> 标签：iphone, ios, uinavigationcontroller

当我收到以下错误时，我正在尝试更新我的应用程序以在 iPhone 5 上运行：

```
Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency',
reason: 'A view can only be associated with at most one view controller at a time!
View <UITableView: 0x88fbe00; frame = (0 20; 320 548); clipsToBounds = YES; opaque = NO; 
autoresize = W+H; gestureRecognizers = <NSArray: 0x8395940>; layer = <CALayer: 0x8395350>;
contentOffset: {0, 0}> is associated with <UIViewController: 0x83967d0>. Clear this
association before associating this view with <UIViewController: 0x8381220>.' 
```

我正在运行 XCode 4.5 版，这在以前从未发生过。我已尝试按照[此问题](https://stackoverflow.com/questions/883510/loading-uinavigationcontroller-from-another-nib-automatically-by-uitabbarcontrol)中的步骤进行操作。这就是我的 MainWindow.xib 的样子：

![主窗口.xib](../Images/ab8bdd41d554f542cfe1c59f27b5259c.png)

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T16:34:34.243

找到了我的解决方案。在应该加载时打开导致异常的视图的 XIB 文件。确保 Object 列表顶部没有 ViewController 对象，而 View 位于其下方。如果有，移动视图，这将移动它下面的所有东西，到与 ViewController 对象相同的级别。现在删除 ViewController 对象并确保您的 XIB 类已正确设置为您的 ViewController 类，希望它能正常工作。

* * *

我有同样的问题。Xcode 4.5 在 iOS6（设备或模拟器）上构建和运行我遇到了这个问题。在 < iOS6 上运行应用程序的 Xcode 4.5 很好。使用 Xcode < 4.5 构建并在 iOS6 上运行的代码完全相同。所以它似乎是 Xcode 4.5 和 iOS6 的组合。我看不出是什么原因造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:48:25.837

`view`在您的层次结构中有一个表视图，它通过它们的出口与两个不同的视图控制器相关联。这不是受支持的方案，因此例外。看看你的表视图，看看哪一个连接到多个视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:58:58.430

我在最后一个小时遇到了这个问题。遵循所有建议后，问题仍然存在。当我删除派生数据时，不一致异常终于消失了。今天的教训，删除派生数据！！

# php - 尝试验证 PayPal 付款金额 - MySQL IPN

> ID：12584806
> 
> 赞同：0
> 
> 时间：2012-09-25T14:11:44.120
> 
> 标签：php, mysql, paypal, paypal-ipn

我正在尝试验证 Pay Pal 订阅 IPN 的 mc_gross 变量。

以下代码不断为我提供 amount_data 的“资源 id #12”值。我要验证的数字是用户付款时放在表中的 0.05。变量 $id 测试正确，数字 (0.05) 在 payment_amount 列中 - 所以我不知道为什么它不能执行此查询。我是 MYSQL 的新手，所以对于任何明显的错误，我深表歉意。

```
$payment_amount = mysql_real_escape_string($_POST['mc_gross']);
   $amount_data = mysql_query ("SELECT * FROM subscriber WHERE payment_amount = '$payment_amount' AND id = '$id' "); 
    if ($amount_data != $_POST['mc_gross']) {
        $errmsg .= "'mc_gross' does not match: ";
        $errmsg .= $_POST['mc_gross']."\n";
        file_put_contents(dirname(__FILE__).'/logs/ipn.log',"\n###AMOUNT Don't MATCH Amount in Database='$payment_amount' Amount in requested='$amount_data'for id '$id'###\n",FILE_APPEND); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:45:05.743

用于 `mysql_fetch_row()`获取 $amount_data.Mysql_query() 仅返回资源 id

```
$amount_data = mysql_query ("SELECT * FROM subscriber WHERE payment_amount = '$payment_amount' AND id = '$id' "); 
$row = mysql_fetch_row($amount_data);

echo $row[0]; 
```

检查链接[http://php.net/manual/en/function.mysql-fetch-row.php](http://php.net/manual/en/function.mysql-fetch-row.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:43:52.313

这是有效的：

```
$payment_amount = mysql_real_escape_string($_POST['mc_gross']);
    //$amount = mysql_query ("SELECT payment_amount FROM subscriber WHERE id = '$id'");
    $amount_data = mysql_query ("SELECT * FROM subscriber WHERE payment_amount = '$payment_amount' AND id = '$id' "); 
    $row = mysql_fetch_row($amount_data);
    if ($row[6] != $_POST['mc_gross']) {
        $errmsg .= "'mc_gross' does not match: ";
        $errmsg .= $_POST['mc_gross']."\n";
        file_put_contents(dirname(__FILE__).'/logs/ipn.log',"\n###AMOUNT Don't MATCH Amount in Database='$row[6]' Amount in requested='$payment_amount' for id '$id'###\n",FILE_APPEND); 
    } 
```

# mfc - 如何将 CString 转换为 const char*？

> ID：12584807
> 
> 赞同：1
> 
> 时间：2012-09-25T14:11:45.407
> 
> 标签：mfc, double, cstring

我想将 CString 转换为 const char*，我使用了它`const char* cstr = (LPCTSTR)CString;`但它没有编译，所以如何做到这一点，或者如何将 CString 转换为双精度，我使用了这个方法 _tstof 但是当我将 CString 传递给它时它返回 0 ，所以我想将 CString 转换为 const char* 以便将转换后的值传递给 atof() 方法，这是一个示例：

```
int nTokenPos=0;
CString leftDigit,rightDigit;
double firstNum,secondNum;

if(dialog->myValue.Find('X')!=-1){
CString resToken = dialog->myValue.Tokenize(_T("X"), nTokenPos);
leftDigit=resToken;
OutputDebugString(leftDigit);
while(!resToken.IsEmpty())
{
   resToken = dialog->myValue.Tokenize(_T("X"), nTokenPos);
   rightDigit=resToken;
   rightDigit+="\n";
  //OutputDebugString(rightDigit);
}
 firstNum= _tstof(leftDigit);
 secondNum=_tstof(rightDigit);
 OutputDebugString(leftDigit);
 OutputDebugString(rightDigit);
 TRACE( "First_Number %d\n",firstNum); --->OutPuts ZERO
 TRACE( "\nSecond_Number %d\n",secondNum); --->OutPuts ZERO
//MathFuncs::MyMathFuncs::Multiply(firstNum,secondNum);
 TRACE( "The result %d\n",MathFuncs::MyMathFuncs::Multiply(firstNum,secondNum)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:42:45.697

这条线

```
const char* cstr = (LPCTSTR)CString; 
```

无法编译，因为我猜您正在构建项目的 UNICODE 版本，因此 _T 扩展为 2 字节字符（宽字符）。

要使这种转换工作，您可以使用 ATL 宏。像：

```
USES_CONVERSION;
const char* cstr = T2A((LPCTSTR)CString); 
```

但是，这与您最初的问题并没有真正的关系，因为无论如何您都在使用 _tstof() 来为您处理 _T 问题。

**[编辑]：**

错误在其他地方。TRACE 的格式字符串没有使用 wright 占位符作为浮点数/双精度数。代替 %d 使用 %f：

```
CString leftDigit = _T("12.5");
double  firstNum = _tstof(leftDigit);
TRACE(_T("%f\n"), firstNum); 
```

我尝试了这个并在 VS 的输出窗格中打印了 12.50000000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:36:24.747

我不确定您是否使用 UNICODE。您应该使用通用文本映射。反正：

```
CString csTest(_T("Test"));

const TCHAR* cstr = (LPTSTR)(LPCTSTR)csTest; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-08T04:05:54.090

```
CString s( _T( "ala bala portocala" ) );
 CStringA s2( s );
 const char* c = s2; 
```

# c# - 如何将来自其他站点的查询字符串传递给服务器

> ID：12584808
> 
> 赞同：0
> 
> 时间：2012-09-25T14:11:48.817
> 
> 标签：c#, query-string

我的问题是我需要将与从支付网关获得的查询字符串完全相同的查询字符串发布到服务器。我一直在尝试不同的方式

```
 requestUrl = "Serveraddress.asp?";
        requestUrl += "orderKey=" + HttpUtility.UrlEncode(orderKey);
        requestUrl += "&paymentStatus=" + HttpUtility.UrlEncode(paymentStatus);
        requestUrl += "&paymentAmount=" + HttpUtility.UrlEncode(paymentAmount);
        requestUrl += "&paymentCurerncy=" + HttpUtility.UrlEncode(paymentCurrency);
        requestUrl += "&mac=" + HttpUtility.UrlEncode(mac);
        requestUrl += "&source=" + HttpUtility.UrlEncode(source); 
```

或者

```
 var queryString = Request.QueryString.ToString(); 
```

或者

```
 var query = HttpUtility.UrlEncode(queryString); 
```

但是他们都没有工作，我怎么能这样做呢？

提前致谢

更新

我已将其更改为

```
 requestUrl = "Serveraddress.asp?";
        requestUrl += "orderKey=" + orderKey;
        requestUrl += "&paymentStatus=" + paymentStatus;
        requestUrl += "&paymentAmount=" + paymentAmount;
        requestUrl += "&paymentCurerncy=" + paymentCurrency;
        requestUrl += "&mac=" + mac;
        requestUrl += "&source=" + source; 
```

但我仍然收到错误 Microsoft VBScript runtime error '800a0005' Invalid procedure call or argument: "let" /xBooking/SVRWP/booking.inc, line 930

我担心的是 orderKey 参数是 SUPPLIER^AIRWEB^F66257-1241186 的那种，我真的不知道这是否需要编码（视觉上 url 似乎没有任何编码就可以了）。

谢谢！

# microsoft-metro - 将 Google Drive SDK 与 Metro 应用程序一起使用

> ID：12584811
> 
> 赞同：1
> 
> 时间：2012-09-25T14:11:55.360
> 
> 标签：microsoft-metro, google-drive-api

我正在尝试将 google drive SDK 与 Metro 应用程序一起使用。Metro 应用程序使用 REST 服务连接到 google drive。我面临的第一个问题是身份验证。Metro 应用程序有一个重定向 URI，它遵循微软特定的方案，如“ms-app://s-1-15-2-1527804777-383724396-285855344-2678584489-1963608684-3789894444-799666712/”。

如何在我的 Google 应用配置文件中注册此 URI？谷歌强制注册重定向 URI，我不知道为什么。没有其他提供商（如 dropbox/skydrive）这样做。

有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:37:12.207

重定向 URI 是 OAuth 2.0 规范的一部分，它是一个开放标准，对系统的安全性至关重要。如果其他提供商在没有此功能的情况下执行 OAuth 2.0，则它们是不安全的。更糟糕的是，如果其他提供商强制应用程序从用户那里获取用户名和密码，那也很糟糕。

对于已安装的应用程序，您可以使用已[安装的应用程序流](https://developers.google.com/accounts/docs/OAuth2InstalledApp)、本地 Web 服务器（localhost URI）或“带外”URI `urn:ietf:wg:oauth:2.0:oob`，. 话虽如此，我从未尝试过使用 Metro 设备，也许其他人可以建议如何[在 Metro 上执行 OAuth 2.0](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)。

根据 OAuth 2.0 规范：

> 注册客户端时，客户端开发人员应：
> 
> ```
>  o  specify the client type as described in Section 2.1,
>   o  provide its client redirection URIs as described in Section 3.1.2, and
>   o  include any other information required by the authorization server
>   (e.g. application name, website, description, logo image, the
>   acceptance of legal terms). 
> ```

# windows-phone-7 - 不允许对 IsolatedStorageFileStream 进行操作

> ID：12584813
> 
> 赞同：3
> 
> 时间：2012-09-25T14:11:59.627
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-7.1.1

创建文件后打开文件时出现错误

```
using (var myFileStore = IsolatedStorageFile.GetUserStoreForApplication())
        {
            myFileStore.CreateFile(DateTime.Now.Ticks + ".txt");
        }
using (var myFileStore = IsolatedStorageFile.GetUserStoreForApplication())
        {
            temp = myFileStore.GetFileNames();
            for (int k = 0; k < temp.Length; k++)
            {
                IsolatedStorageFileStream file1 = myFileStore.OpenFile(temp[k], FileMode.Open, FileAccess.Read);
                dataSource.Add(new SampleData() { Name = temp[k], Size = Convert.ToString(Math.Round(Convert.ToDouble(file1.Length) / 1024 / 1024, 1) + " MB") });
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:14:52.513

那是因为您没有关闭该`CreateFile`方法返回的流！

您的代码应如下所示：

```
using (var myFileStore = IsolatedStorageFile.GetUserStoreForApplication())
{
    myFileStore.CreateFile(DateTime.Now.Ticks + ".txt").Dispose();
} 
```

或者

```
using (var myFileStore = IsolatedStorageFile.GetUserStoreForApplication())
{
    using(myFileStore.CreateFile(DateTime.Now.Ticks + ".txt"))
    {
    }
} 
```

在下面的 OpenFile 中也是如此。

最重要的是，您应该**始终**处置您的流（通过使用`using`子句或`Dispose()`方法）

# c++ - 指向对象的指针列表中的内存泄漏

> ID：12584815
> 
> 赞同：1
> 
> 时间：2012-09-25T14:12:04.877
> 
> 标签：c++, memory-leaks

我有一个指向对象的指针列表。

```
 std::list<X*> xList; 
```

我需要的只是列表的大小，所以我的方法填充这个列表并在其上调用 size() 然后返回大小。

注意：我知道这不是最好的解决方案，但我使用的 API 提供了一个包含动态分配对象的列表，这是我能做到的唯一方法。

现在 valgrind 说这里存在内存泄漏。我假设这是因为我从不删除列表中的对象。

我想我会这样做：

```
std::list<X*>::iterator iter;
for (iter = xList.begin(); iter != xList.end(); ++iter)
{
    delete (*iter);
} 
```

但这是最好的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:14:05.520

不，最好的解决方案是换一个`std::list<std::unique_ptr<X>>`。现在，对象会在适当的时候自行删除，您不必担心它。当`std::list`被销毁时，`X`它所拥有的对象也被销毁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:13:06.957

> 但这是最好的解决方案吗？

不，最好的解决方案是换一个`std::list<std::shared_ptr<X> >`。

# facebook - Facebook“不在办公室”应用

> ID：12584816
> 
> 赞同：0
> 
> 时间：2012-09-25T14:12:11.480
> 
> 标签：facebook, messages

我想为 Facebook 消息实现一个“不在办公室”应用程序，但这在技术上似乎是不可能的。这个想法很简单，让用户定义一些他们不会阅读 Facebook 消息的日期（即：他们正在离线露营），这样当他们收到新消息时，我们可以通知朋友/发件人他们不会能够快速响应。

我一直在阅读 Facebook 的 API，虽然我可以通过适当的授权 ( )[阅读用户的消息](https://developers.facebook.com/docs/reference/api/message/)`read_mailbox`，但我不能代表他们发送消息。

一种解决方法是获取发件人的电子邮件地址，并使用计划电子邮件而不是 Facebook 消息进行答复。但是获取发件人的电子邮件还需要针对每个用户的扩展权限。

我可以展示`Send Dialog`，但从逻辑上讲，我们希望它能够自动工作而无需任何用户交互。另外，我们可以发布一个只对发件人可见的私人状态，但这似乎不是很有效。

这就是我碰壁的地方。你能想出一种方法来实现这样的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:17:37.843

您*可以*通过电子邮件发送至`username@facebook.com`（从用户 ID 获取用户名不需要任何权限）——但 Facebook 的政策通常禁止应用程序使用该地址，因为他们说这些地址用于用户间通信。

你可以说，这本质上*是*用户对用户的通信——**但使用风险自负。**如果有垃圾邮件投诉或 Facebook 看到您以这种方式发送大量消息，您的应用程序可能会被阻止。

# objective-c - 升级 App 以支持 iOS 5

> ID：12584829
> 
> 赞同：0
> 
> 时间：2012-09-25T14:12:48.737
> 
> 标签：objective-c, ios5, ios4

我开发了一个 ios4 应用程序，现在想将其升级到 ios5。在切换成功并且不会引起任何痛苦方面，我需要注意哪些事情？我最重要的问题是，如果我确实向苹果推送了新的更改，当只有 ios5 及更高版本的升级可用时，ios4 用户会看到什么？他们可以忽略该更新并继续使用他们安装的 ios4 版本吗？如果他们尝试下载 ios5 升级，appstore 会出错吗？究竟会发生什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:20:03.790

IOS 5.0 最大的变化是 ARC 项目，因此如果将其转换为 ARC，它将无法与 3g 等旧设备一起使用（3gs 可以有 ios 5.0，所以它是安全的）。

除此之外，拥有 iOS 5.0 设备（或升级设备）的用户将能够在 Apple Store 提供更新后立即获得。

请记住，低端 ios 5.0 设备可能没有足够的内存供应用程序使用，这同样适用于 ios 3 / ios 4 和顺序 ios 5/ios 6.0。

# javascript - javascript中的焦点按钮，无需单击它

> ID：12584830
> 
> 赞同：1
> 
> 时间：2012-09-25T14:12:51.673
> 
> 标签：javascript, button, focus

我打电话

```
element.focus(); 
```

其中 element 是 type=button 的 HTMLInputElement。但随后浏览器点击了按钮！那是在 Mozilla 和 chrome 中。

如何突出显示带有选择的按钮，但不启动单击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:22:13.100

否`.focus()`不点击按钮或提交表单：http: [//jsbin.com/onirac/1/edit](http://jsbin.com/onirac/1/edit)

它完全符合您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:22:28.193

嗯，我已经确定了原因。我正在处理 Enter 键的 onkeydown 事件。解决方案是使用 e.preventDefault();

```
function ConvertEnterToTab(s, e, numSkipElements) {
            var keyCode = e.keyCode || e.htmlEvent.keyCode;
            if (keyCode === 13) {
                var tabIndex = s.tabIndex || s.inputElement.tabIndex;
                if (numSkipElements == undefined) {
                    numSkipElements = 0;
                }

                var nextElement = FindNextElementByTabIndex(tabIndex + numSkipElements);
                if (nextElement != undefined) {
                    nextElement.focus();
                    return e.preventDefault ? e.preventDefault() : e.htmlEvent.preventDefault(); // this is the solution
                }
            }
        }

        function FindNextElementByTabIndex(currentTabIndex, maxTabIndex) {
            if (maxTabIndex == undefined) {
                maxTabIndex = 100;
            }

            var tempIndex = currentTabIndex + 1;
            while (!$('[tabindex='+ tempIndex+ ']')[0] || tempIndex === maxTabIndex) {
                tempIndex++;
            }

            return $('[tabindex=' + tempIndex + ']')[0];
        } 
```

# java - 超类构造函数的哪些参数？

> ID：12584832
> 
> 赞同：0
> 
> 时间：2012-09-25T14:12:56.177
> 
> 标签：java, inheritance

我正在研究与继承相关的Java章节，我有几个问题。

我对继承的工作原理有基本的了解（覆盖方法、信息隐藏、如何在子类中使用超类的私有字段等），但我只有一个问题，希望你能帮助我。

当超类有非默认构造函数 - 没有参数时，这意味着在子类中我必须创建新的构造函数（它可以是默认的 - 没有参数），但在第一条语句中必须是**超类构造函数调用**。

好的，到目前为止一切顺利。到目前为止我明白了。在子类中，您必须调用超类构造函数，匹配任何构造函数参数。

但是让我们检查以下代码：（超类）

```
public class Vehicle {

    private int numOfWheels;
    private double avgGallonsPerMile;   

    public Vehicle(int numOfWheels, double avgGallonsPerMile) {

        this.numOfWheels = numOfWheels;
        this.avgGallonsPerMile = avgGallonsPerMile;
    }
} 
```

还有另一个子类代码：

```
public class Car extends Vehicle{

    public Car(double avgGallonsPerMile) {
        super(What should i write here?, avgGallonsPerMile);

        //force numOfWheels to 4;

    }   
} 
```

这是子类的练习：

每个子类都包含一个构造函数，该构造函数接受英里/加仑值作为参数，并将车轮数强制为适当的值——摩托车为 2，汽车为 4。

在子类构造函数中，我不需要**numOfWheels 字段**，因为无论如何我都会将其强制为 4（对于汽车）和 2（对于摩托车）。

但是我仍然需要超类的数据。从哪里获取这些数据？什么应该作为调用超类构造函数的第一个参数。

但这仍然不是孤例。我有很多练习，我不需要子类构造函数中的某些数据作为参数，但我仍然需要它们在超类构造函数调用中。

在这种情况下我该怎么办？

我真的希望你能理解我，我想说什么。这有点困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:21:45.530

如果它无论如何都是相同的 4 用于汽车和 2 用于摩托车而不是修复！

```
super(4, avgGallonsPerMile); 
```

或更好的方法 - 声明一个常量：

```
private static final int NUM_OF_WHEELS = 4;
..
super(Car.NUM_OF_WHEELS, avgGallonsPerMile); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:22:37.300

如果您不需要超类中的字段，那么很可能它不应该存在。相反，您可以执行以下操作。

```
public abstract class Vehicle {
    private final double avgGallonsPerMile;

    public Vehicle(double avgGallonsPerMile) {
       this.avgGallonsPerMile = avgGallonsPerMile;
    }
    public double getAvgGallonsPerMile() { return avgGallonsPerMile; }
    public abstract int getNumOfWheels();
}

public class Car extends Vehicle{
    public Car(double avgGallonsPerMile) {
       super(avgGallonsPerMile);
    }
    public int getNumOfWheels() { return 4; }
}

public class Bicycle extends Vehicle{
    public Bicycle (double avgGallonsPerMile) {
       super(avgGallonsPerMile);
    }
    public int getNumOfWheels() { return 2; }
}

public class Tricycle extends Vehicle{
    public Tricycle (double avgGallonsPerMile) {
       super(avgGallonsPerMile);
    }
    public int getNumOfWheels() { return 3; }
} 
```

顺便说一句：如果你的汽车每英里使用加仑燃料，它一定是非常低效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:17:36.413

非常简单：如果 a 上的轮子数`Car`始终为 4，则它们只需传递值 4：

```
public Car(double avgGallonsPerMile) {
   super(4, avgGallonsPerMile);

    // ...
} 
```

# wso2 - WSO2 ESB 在数据库服务器中保存代理服务

> ID：12584835
> 
> 赞同：0
> 
> 时间：2012-09-25T14:13:01.793
> 
> 标签：wso2, wso2esb

早上好/下午，

我如何配置 ESB 以将我的代理服务保存在数据库服务器 (Mysql) 中？我更改了存储库/conf 中的 registry.xml 文件，但什么也没有，服务不会保留在数据库中，只会创建表。

可以帮我 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:45:27.553

目前没有在注册表中保存代理配置的选项..但是您可以在注册表中保存其他突触工件（例如：序列，端点..），您应该使用“保存在注册表中”选项并选择要保存的位置他们。

# android - 在 ubuntu 中使用 Wireshark 分析 android 请求？

> ID：12584836
> 
> 赞同：1
> 
> 时间：2012-09-25T14:13:02.480
> 
> 标签：android, wireshark

我正在使用 ubuntu 10.04 LTS 并且有一个 android ICS 设备。

我在我的 android 设备中创建了一个 wifi-hotspot。我正在通过上面创建的 wifi-hotspot 连接我的 ubuntu。我盯着我的电脑中的wireshark捕获数据包。

我无法看到设备产生的流量，而只能看到来自 pc 的流量。

我错过了什么或错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:17:04.243

您看不到来自电话的流量，因为您的计算机仅接收和发送用于计算机的数据包。

也许这会有所帮助？[http://www.wireshark.org/faq.html#promiscsniff](http://www.wireshark.org/faq.html#promiscsniff)

您的无线接口设备可能未处于混杂模式或不支持混杂模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:19:17.647

如果我是你，我会扫描子网中所有活着的主机。我敢肯定，Android 设备使用 NAT 或其他东西充当热点。但问题是它不仅是一个服务器，只有你的电脑或其他任何东西可以连接到它已连接，我想这将是您的 lapton。但是android本身使用的是外部ip，比如service bsnl之类的。所以它根本不是连接到路由器或其他东西的客户端。

不过，如果您运行 nmap 扫描，您肯定会看到默认网关 ip，它属于热点。

所以，说对了就够了。

# wolfram-mathematica - 我怎样才能摆脱 Mathematica 中一个令人讨厌的前置因子？

> ID：12584837
> 
> 赞同：3
> 
> 时间：2012-09-25T14:13:03.057
> 
> 标签：wolfram-mathematica, algebra

我正在尝试使用 Mathematica 将代数表达式细化为一种方便的形式，以确保我不会丢掉一个符号或做出其他一些琐碎的失误。经过大量的咒骂，我开始接受这不是一个确定性的过程，我必须一步一步地去做，代数操作调色板是我的朋友。然而，还有一件事让我发疯。有时，mathematica 会吐出带有这些看似无关的前导表达式的表达式。例如，现在我正在查看：

```
0.5*(1.*Log[-1.*a^2 + 1.*bigr^2] - 1.*Log[1.*a^2 - 2.*a*bigr + 1.*bigr^2]) 
```

当我更愿意看时：

```
0.5*(Log[-a^2 + bigr^2] - Log[a^2 - 2.*a*bigr + bigr^2]) 
```

这不仅仅是一个外观问题，因为当我尝试将其应用于上述表达式中的一些明显的二次因式分解时，它会混淆 Factor[]。任何干净的修复？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T15:06:50.197

```
your = 0.5*(1.*Log[-1.*a^2 + 1.*bigr^2] - 1.*Log[1.*a^2 - 2.*a*bigr + 1.*bigr^2])
your  /. {1\. -> 1, -1\. -> -1}

(* -> 0.5 (Log[-a^2 + bigr^2] - Log[a^2 - 2\. a bigr + bigr^2]) *) 
```

后面的点`1`告诉mathematica 将该数字视为非精确数量。所以例如

```
1\. * 1/2
(* -> .5 *) 
```

但

```
1 * 1/2
(* -> 1/2 *) 
```

如果您需要精确的结果，请在计算中使用精确的数量 (1, 2, 1/2) 而不是十进制数 (1., 2\. ,0.5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T10:05:48.990

```
expr =  0.5*(1.*Log[-1.*a^2 + 1.*bigr^2] - 1.*Log[1.*a^2 - 2.*a*bigr + 1.*bigr^2]); 
```

将所有近似数字转换为精确数字：

```
expr // Rationalize 
```

> ```
> 1/2 (Log[-a^2 + bigr^2] - Log[a^2 - 2 a bigr + bigr^2]) 
> ```

选择性地：

```
expr /. x_ /; x == 1 -> 1 
```

> ```
> 0.5 (Log[-1\. a^2 + bigr^2] - 1\. Log[a^2 - 2\. a bigr + bigr^2]) 
> ```

# iphone - 在我的应用程序 iphone sdk 中设置我自己的字体

> ID：12584840
> 
> 赞同：0
> 
> 时间：2012-09-25T14:13:07.690
> 
> 标签：iphone, xcode, sdk, fonts

> **可能重复：**
> [我可以在 iPhone 应用程序中嵌入自定义字体吗？](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)

我想在我的应用程序中添加一个特殊字体的文本，但我不知道该怎么做？

有人可以解释我或有一个链接吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:19:39.613

网上有很多页面描述了如何做到这一点。 [http://tetontech.wordpress.com/2010/09/03/using-custom-fonts-in-your-ios-application/](http://tetontech.wordpress.com/2010/09/03/using-custom-fonts-in-your-ios-application/)就是其中之一。

# php - 如何使用 PHP 将 Json 值和其他一些值发布到另一个 url

> ID：12584842
> 
> 赞同：0
> 
> 时间：2012-09-25T14:13:12.220
> 
> 标签：php, json, post

我有这些价值观：

```
$time="2012-12-30 10:00:00";
$hash="DONE_ILK_ONAY_P_KEY__2012_2012-12-30 10:00:00"; 
```

而要发送的 JSON 数据是：

```
jsonRequest:
{
    "company_id":"somevalue",  
    "company _username":"somevalue", 
    "company _password":" somevalue", 
    "profile_id":"somevalue", 
    "profile_mail":"somevalue",
    "profile_info": {
        "name":"somevalue",
        "surname":"somevalue",
        "birthdate":"somevalue",
        "marital_status":"somevalue",
        "education_level":"somevalue",
        "school":"somevalue",
        "city":"somevalue"
    }
} 
```

现在我如何使用 PHP 将这些值发布到另一个 URL 并从它们获取 JSON 响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:19:41.670

带有 jQ​​uery 的 JSON POST：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

我在另一个堆栈溢出问题上找到了这个例子：

```
$.ajax({     type: "POST",
    url: "[URL of JSON-aware endpoint]", // your POST target goes here     
    dataType: "json",    
     data: { [$jsonRequest, $time, $hash] }, 
     // message to send goes here    
      success: function (data)     
      {         

            // do something with result     
            } 
       }); 
</script> 
```

您有一个关于如何传递 jsonRequest 以及其他两个参数 $time 和 $hash 的后续问题。

请注意，即使您有 3 个参数 $time、$hash 和 $jsonRequest... 因为 ajax post 参数只是 json... 您可以像我在上面所做的那样在 $.ajax 函数的 data 参数中添加所有三个参数：`data: [$jsonRequest, $time, $hash]`

我修改了上面的例子来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:10:06.377

**仅限服务器端的 PHP 解决方案：**

请参阅此链接：[http ://themekraft.com/getting-json-data-with-php-curl/](http://themekraft.com/getting-json-data-with-php-curl/)

您可以结合使用 PHP curl 和 json_encode 来发送 JSON 并接收 JSON 作为响应。

```
$ch = curl_init( $json_url );
$json_string = json_encode(array(1 => $jsonRequest, 2 => $time, 3 => $hash));     
$options = array( CURLOPT_RETURNTRANSFER => true,
                  CURLOPT_USERPWD => $username . ":" . $password,
                  CURLOPT_HTTPHEADER => array('Content-type: application/json'),
                  CURLOPT_POSTFIELDS => $json_string);
curl_setopt_array( $ch, $options );    
$result = curl_exec($ch);
$json_result = json_decode($result); 
```

# objective-c - 访问变量不同的视图控制器

> ID：12584856
> 
> 赞同：0
> 
> 时间：2012-09-25T14:14:05.573
> 
> 标签：objective-c, cocoa-touch, properties, uiviewcontroller

我已经阅读了很多关于如何从 SO 传递变量的链接，包括这个链接。

[在 xcode 中访问另一个类的变量](https://stackoverflow.com/questions/6754686/accessing-variables-of-another-class-in-xcode)

但是，我已经在我的 FirstViewController.h 文件中的 SecondViewController.m 文件中导入了 FirstViewController.h 文件我有一个变量定义为 .h @property (nonatomic,retain) int test；.m @synthesized 测试；

并且在视图中确实加载了 SecondViewController.hi 尝试做

FirstViewContoller.test=10;

但无法识别该变量。

如果有人可以帮忙请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:19:50.480

您不能在类上设置属性。您只能设置对象的属性，即类的**实例**。你必须写

```
FirstViewController *vc = [[FirstViewController alloc] init];
vc.test = 10;
// use then vc for whatever it should be used. 
```

哦，顺便说一句：这与 Xcode 没有任何关系。

# sql - SQL Server：使用“if”条件更新触发器

> ID：12584860
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:14:15.900
> 
> 标签：sql, sql-server

我正在尝试实现一个 SQL Server 触发器，以在使用 if 条件在表 A 中更新时更新表 B 中的行。

**表一：**

```
id_AA
status
desc1
desc2 
```

**表 B：**

```
id_BA
desc3
desc4 
```

逻辑是这样的：

```
if user update table A set status == success
update B: when id_BA == id_AA
set desc3 = desc1
desc4 = desc2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:28:35.303

我不是 100% 清楚你的逻辑，但我认为你正在寻找这样的东西：

```
CREATE TRIGGER dbo.TableA_Update 
ON dbo.TableA
FOR UPDATE
AS
BEGIN
    UPDATE  TableB
    SET     Desc3 = i.Desc1,
            Desc4 = i.Desc2
    FROM    TableB b
            INNER JOIN inserted i           
                ON i.ID_AA = b.ID_BA        -- MATCH CRITERIA IN QUESTION
                AND i.Status = 'success'    -- NEW STATUS IS "SUCCESS"
            INNER JOIN deleted d
                ON d.ID_AA = i.ID_AA
                AND d.Status != 'success'   -- PREVIOUS STATUS WAS NOT "SUCCESS"
END 
```

**编辑**

如果没有相应的行，`TableB`您可能要考虑使用`MERGE`

```
CREATE TRIGGER dbo.TableA_Update 
ON dbo.TableA
FOR UPDATE
AS
BEGIN
    ;WITH Updated AS
    (   SELECT  i.ID_AA, i.Desc1, i.Desc2
        FROM    inserted i
                INNER JOIN deleted d
                    ON d.ID_AA = i.ID_AA
                    AND d.Status != 'success'   -- PREVIOUS STATUS WAS NOT "SUCCESS"
        WHERE   i.Status = 'success'
    )
    MERGE INTO TableB USING Updated ON ID_AA = ID_BA
    WHEN MATCHED THEN
        UPDATE
        SET Desc3 = Desc1,
            Desc4 = Desc2
    WHEN NOT MATCHED THEN
        INSERT (ID_BA, Desc3, Desc4) VALUES (ID_AA, Desc1, Desc2);
END 
```

# android - Android 上的自定义裁剪

> ID：12584863
> 
> 赞同：0
> 
> 时间：2012-09-25T14:14:25.230
> 
> 标签：android, image, crop

我正在编写自定义图像裁剪。

我有一个图像视图和一个矩形来选择裁剪区域。

裁剪后，我需要知道矩形的左上角，即当前裁剪区域。

但是当我尝试获取它时，Rect 给了我屏幕的 X、Y 和宽度坐标，而不是图像。如何获得图像的真实坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:35:30.717

我想您可以使用设备屏幕的实际大小（以像素为单位）应用一个简单的比例规则（假设图像以全屏显示）。您可以使用这个非常完整的答案轻松获得屏幕尺寸：[https ://stackoverflow.com/a/1016941/1417179](https://stackoverflow.com/a/1016941/1417179)

从那里，如果您的图像尺寸是 w *h 并且屏幕尺寸是 ws* hs，您可以使用 image_coordinates = screen_coordinates*w/ws 获取图像空间中的坐标。

如果显示的图像与屏幕的纵横比不同，您可能需要作弊，但想法保持不变。

希望这可以帮助！

# sql-server - 接受用户参数并显示结果的存储过程

> ID：12584865
> 
> 赞同：0
> 
> 时间：2012-09-25T14:14:28.100
> 
> 标签：sql-server, sql-server-2008

我有一个有两个表的数据库。一个表包含我环境中所有服务器的信息，如 server_name、db_name、application、Pri_dba 等，另一个表包含所有 DBA 的联系信息，如他们的电话号码电子邮件等。我想编写一个存储过程接受来自用户的 3 个值，即服务器名称、数据库和应用程序。然后，它应该根据此信息唯一标识主 DBA，并显示该 DBA 的所有联系信息。我想我可以从表 1 中识别主要 DBA 并显示表 2 中的结果。这可能是一项非常容易的任务，但我是一个新的 DBA，所以请任何人帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:27:05.583

由于我不知道您的数据结构，因此很难给出确切的信息，但您应该能够修改它。

```
CREATE PROCEDURE GetDBAForServer (@ServerName varchar(100), @DatabaseName varchar(100), @ApplicationName varchar(100))
AS 
SELECT di.*
FROM server_info si
INNER JOIN dba_info di on si.pri_dba = di.id
WHERE si.name = @ServerName
  AND si.dbname = @DatabaseName
  AND si.appname = @ApplicationName 
```

然后你可以把它称为：

```
EXEC GetDBAForServer 'Server1', 'Database3', 'Application2' 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:28:30.560

尝试这样的事情。显然，您将需要替换正确的列名...

```
CREATE PROCEDURE IdentifyDBA (@Srv VARCHAR(20), @DB VARCHAR(20), App VARCHAR(20))
AS
BEGIN
    SELECT B.*
    FROM DBATable B
    INNER JOIN AssetTbl A
        ON A.dba = B.Pri_DBA
    WHERE A.ServerName = @Srv
    AND A.DBName = @DB
    AND A.AppName = @App
END

EXEC IdentifyDBA 'ServerA', 'DatabaseA', 'ApplicationA' 
```

# linux - 使用 readline 的多平台（Windows、MacOSX、Linux）应用程序出现问题

> ID：12584871
> 
> 赞同：2
> 
> 时间：2012-09-25T14:14:38.707
> 
> 标签：linux, macos, bash, netbeans, multiplatform

我正在使用 Netbeans IDE 用 C 语言编写一个多平台（Windows、Linux 和 MacOSX）应用程序。

它是基于 shell 的（bash），我使用 readline 和 history 进行数据输入。

另外，我想覆盖快捷键（Ctrl + A，Ctrl + B，...），所以我使用了 rl_bind_key 函数。

rl_bind_key 在 Windows 中正常工作，但在 Linux 和 MacOSX 中不起作用，它总是返回 -1。

我遇到的另一个问题是在 Netbeans（集成到 IDE 的 shell）内部，一切运行正常，但在 Netbeans Shell 外部，我的应用程序看起来不完整。我认为这些行为是由于外壳配置造成的，如何将配置从一个外壳导出到另一个外壳......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-23T17:41:11.573

**如何修复它：**

`OS X`正在使用一个***古老***的版本`readline`。要解决此问题，只需升级到较新的版本。只需在终端中运行它（*我使用 Homebrew 作为我的包管理器*）：

```
brew install readline
brew link readline --force 
```

*这`force`是必需的，因为它应该覆盖系统库。*

如果上面的代码对您有用，并且您不在乎它为什么失败，请在此处停止阅读。

**什么地方出了错？**

出于某种原因，该函数没有被实现为接受回调，而只是为了启用或禁用该`rl_insert`函数。即使它被记录为能够绑定任意回调。

下面是函数在`readline 1.*` *（OS X 中使用的版本）中*的具体实现：

```
int rl_bind_key(int c, rl_command_func_t *func)
{
    int retval = -1;

    if (h == NULL || e == NULL)
        rl_initialize();

    if (func == rl_insert) {
        /* XXX notice there is no range checking of ``c'' */
        e->el_map.key[c] = ED_INSERT;
        retval = 0;
    }
    return retval;
} 
```

如您所见，除了 时`func == rl_insert`，函数总是返回`-1`。

# cakephp - CakePHP AttachementComponent 错误

> ID：12584872
> 
> 赞同：1
> 
> 时间：2012-09-25T14:14:40.503
> 
> 标签：cakephp

我正在使用 CakePHP 2.x 和 PHP 5.4，但出现以下错误：

```
Strict (2048): Only variables should be passed by reference [APP/Controller/Component/AttachmentComponent.php, line 106]
Strict (2048): Only variables should be passed by reference [APP/Controller/Component/AttachmentComponent.php, line 169]
Strict (2048): Only variables should be passed by reference [APP/Controller/Component/AttachmentComponent.php, line 169] 
```

[https://github.com/tute/Thumbnail-component-for-CakePHP/tree/cake2](https://github.com/tute/Thumbnail-component-for-CakePHP/tree/cake2)

使用 php 5.3 一切正常。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:39:32.263

```
$file_name = end(split($ds, $tmpfile)); 
```

应该

```
$parts = split($ds, $tmpfile);
$file_name = end($parts); 
```

您可以在组件中修复它并向原作者提交 PR

# ruby - 如何使用 CIE94 公式将单个 RGB 值与集合进行比较以找到最接近的匹配项 - 在 Ruby 中，

> ID：12584882
> 
> 赞同：2
> 
> 时间：2012-09-25T14:15:11.407
> 
> 标签：ruby, math, rgb

我有一个 RGB 值，我想从 120 种颜色的集合中找到与该 RGB 值最接近的匹配。

据我所知，实施此类检查的最准确方法之一是使用[CIE94 公式](http://en.wikipedia.org/wiki/Color_difference#CIE94)。但是，我在使用 Ruby 实现这一点时遇到了麻烦。

你会如何建议我这样做？

```
 R1, G1, B1 = pixel.red, pixel.green, pixel.blue
          c = Colour.first
              R2, G2, B2 = (c.red * 256), (c.green * 256), (c.blue * 256)

              C1 = Math.sqrt((G1**)+(G2**))
              C2 = Math.sqrt((B1**)+(B2**))
              CAB = C1 - C2

              DA = G1 - G2
              DB = B1 - B2

              DH = Math.sqrt((DA** + DB** - CAB**))

              divergence = Math.sqrt( ((R1-R2)/2)** + (CAB/ (1+(0.048*C1)))** + ( DH / ( 1 + ( 0.014 * C1))** ) 
```

遵循使用 LCMS 的答案建议之一，我刚刚意识到我正在使用的 ruby​​ 库 RMagick (Imagemagick) 实际上引入了 LCMS。这意味着我可以访问其中的一些功能——“预烘焙”。有人知道使用 RMagick 实现上述目标的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T08:13:04.750

这实际上比你想象的*要*复杂得多。因为许多的原因。

主要问题是 RGB 空间是依赖于设备的空间 - 在一个设备上看起来相似的 RGB 值在另一个设备上看起来并不相似。（如果您认为这听起来不太可能 - 由于操作系统对监视器 gamma 做出的不同假设，在 mac / win / SGI 之间获得良好的颜色对应关系之间存在大量问题。）

第二个问题是对两种颜色之间差异的感知在很大程度上取决于周围的颜色/观看环境。即两种颜色在黑暗环境中的黑暗环境中可能看起来不同，但在明亮环境中的白色环境中看起来相似。

考虑到这些附带条件，Delta CIE 94 是衡量颜色相似度的一个不错的指标。

您将通过将每种颜色从 RGB 转换为 XYZ 再转换为 Lab 来计算它。RGB 到 XYZ 的转换取决于设备 - 有一些简单的标准转换浮动，例如[sRGB](http://en.wikipedia.org/wiki/SRGB)，但它们对真实设备的适用性值得怀疑。从 XYZ 到 Lab 的转换很复杂，可以在[此处](http://en.wikipedia.org/wiki/CIELAB)找到- 作为参考白点，您可以使用设备的白点（或 sRGB，如果您使用标准）。

最后，您可以使用上面列出的公式进行最终转换。

由于这一切都相对痛苦，因此您可能会更好地调用适当的色彩管理工具，例如[LCMS](http://www.littlecms.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:39:47.217

这比你想象的要复杂一些。您需要从 RGB → XYZ → LAB → LCH 进行转换，然后*才能*应用 CIE94 公式。看看 Chroma.js 中的实现并将你需要的部分移植到 Ruby：

[https://github.com/gka/chroma.js](https://github.com/gka/chroma.js)

# c# - 如何将字体作为资源包含在内？

> ID：12584883
> 
> 赞同：1
> 
> 时间：2012-09-25T14:15:14.107
> 
> 标签：c#, wpf

我正在使用 WPF 开发一个应用程序，当我将它安装在另一台计算机上时，它使用的字体在新系统上不存在，因此默认情况下是“Tahoma”。

有什么方法可以将应用程序的字体编译为资源？如果是这样，我将如何更改代码以使用资源字体？语法会是这样的吗？

```
 textblock1.FontFamily = ....."mysegioui.ttf"..; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:30:02.470

有！[http://msdn.microsoft.com/en-us/library/ms753303.aspx](http://msdn.microsoft.com/en-us/library/ms753303.aspx)说这就是你在 xaml 中引用它的方式。

```
<Run FontFamily="/FontLibrary;Component/#Kootenay" FontSize="36">
    ABCDEFGHIJKLMNOPQRSTUVWXYZ
</Run> 
```

# haskell - 如何从 GHCi 中启用语言扩展？

> ID：12584884
> 
> 赞同：122
> 
> 时间：2012-09-25T14:15:20.747
> 
> 标签：haskell, ghci, language-extension

我正在尝试`XRankNTypes`在 GHCi 中启用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-09-25T14:17:44.823

`:set -XRankNTypes`. 该`-X`部分是编译器开关，顺便说一下，扩展名只是`RankNTypes`.

# vba - 循环遍历列时出现 Excel 宏“类型不匹配”错误

> ID：12584886
> 
> 赞同：0
> 
> 时间：2012-09-25T14:15:33.857
> 
> 标签：vba, excel, type-mismatch, mismatch

每次调用此函数都会导致运行时错误“13”类型不匹配。为什么会这样？

```
Public Function VersionExists(versionId As String)

   VersionExists = False

   For Each cell In Tabelle2.Columns(1)
      If cell.Value = versionId Then
         VersionExists = True
      End If
   Next

End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:24:40.123

您无法访问`cell.value`from `.Columns(1)`，因为它返回包含整个列的范围；

```
For Each cell In Sheet1.Columns(1).Rows '//or .cells 
```

在比赛结束后退出 for 循环可能也是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:32:30.777

这是我在评论中建议的替代方案

```
Public Function VersionExists(versionId As String) As Boolean
    Dim aCell As Range, rng As Range

    Set rng = Tabelle2.Columns(1)

    Set aCell = rng.Find(What:=versionId, LookIn:=xlValues, _
    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)

    If Not aCell Is Nothing Then VersionExists = True
End Function 
```

# javascript - 在 Javascript 中对包含换行符的 HTML 实体进行转义？

> ID：12584889
> 
> 赞同：4
> 
> 时间：2012-09-25T14:15:37.397
> 
> 标签：javascript, html, escaping

如果您有一个包含 HTML 实体的字符串并且想要取消转义，则建议多次使用此解决方案（或其变体）：

```
function htmlDecode(input){
  var e = document.createElement('div');
  e.innerHTML = input;
  return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
}

htmlDecode("&lt;img src='myimage.jpg'&gt;"); 
// returns "<img src='myimage.jpg'>" 
```

（例如，请参阅此答案：[https](https://stackoverflow.com/a/1912522/1199564) ://stackoverflow.com/a/1912522/1199564 ）

只要字符串不*包含*换行符并且我们*不在*Internet Explorer 版本 pre 10 上运行（在版本 9 和 8 上测试），这工作正常。

如果字符串包含换行符，IE 8 和 9 将用空格字符替换它，而不是保持不变（就像在 Chrome、Safari、Firefox 和 IE 10 上一样）。

```
htmlDecode("Hello\nWorld"); 
// returns "Hello World" on IE 8 and 9 
```

对于 IE 10 之前的解决方案有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:32:37.393

# c# - 按钮点击动作查找/替换

> ID：12584894
> 
> 赞同：0
> 
> 时间：2012-09-25T14:15:49.667
> 
> 标签：c#, winforms

我似乎无法让我的按钮工作。这是我第一次尝试制作应用程序。我只需要一个简单的查找/替换。我在互联网上找到了一些代码，但似乎无法正常工作。

[http://pastebin.com/9v6TEFMs](http://pastebin.com/9v6TEFMs)

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Deneuralyzer : Form
    {
        public Deneuralyzer()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            using System;
            using System.IO;
            using System.Text.RegularExpressions;

                    string filePath = @"C:\Program Files (x86)\location\to\application\textfile.txt";
                    string searchText = "Count,2,";
                    string replaceText = "Count,200,";
                    ReplaceInFile(filePath, searchText, replaceText);

                    static public void ReplaceInFile(string filePath, string searchText, string replaceText)
                    {

                        StreamReader reader = new StreamReader(filePath);
                        string content = reader.ReadToEnd();
                        reader.Close();

                        content = Regex.Replace(content, searchText, replaceText);

                        StreamWriter writer = new StreamWriter(filePath);
                        writer.Write(content);
                        writer.Close();
                    }

        }

    }
} 
```

另外，是否需要做一些特定的事情，以便应用程序可以编辑文件？因为手工操作我必须更改文件权限和所有权。

当我运行测试时出错

> 错误 3 类型或命名空间定义，或预期文件结尾 C:\Users\Jack\Documents\Visual Studio 2012\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 59 1 WindowsFormsApplication1
> 
> Error 4 Syntax error, '(' expected C:\Users\Jack\Documents\Visual Studio 2012\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 27 19 WindowsFormsApplication1
> 
> Error 6 Syntax error, '(' expected C:\Users\Jack\Documents\Visual Studio 2012\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 28 19 WindowsFormsApplication1
> 
> Error 8 Syntax error, '(' expected C:\Users\Jack\Documents\Visual Studio 2012\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 29 19 WindowsFormsApplication1
> 
> Error 2 Expected class, delegate, enum, interface, or struct C:\Users\Jack\Documents\Visual Studio 2012\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 54 17 WindowsFormsApplication1
> 
> Error 1 } expected C:\Users\Jack\Documents\Visual Studio 2012\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 35 70 WindowsFormsApplication1
> 
> Error 5 ) expected C:\Users\Jack\Documents\Visual Studio 2012\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 27 25 WindowsFormsApplication1
> 
> Error 7 ) expected C:\Users\Jack\Documents\Visual Studio 2012\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 28 28 WindowsFormsApplication1
> 
> Error 9 ) expected C:\Users\Jack\Documents\Visual Studio 2012\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 29 49 WindowsFormsApplication1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:46:28.990

You should read up on how to structure a class, or perhaps a [C# tutorial](http://msdn.microsoft.com/en-us/library/aa288436%28VS.71%29.aspx). Normally you have the following order of elements in a class

```
// using statements, other components you use in your class
using System;
// namespace name (a group so to speak)
namespace NamespaceName {

    // class, this gets nested under a namespace
    public class MyClass {

        // private variables
        private int myVariable;

        // constructors
        public MyClass() {
            // this is where you create the instance, set variables and stuff
            myVariable = 314;
        }

        // methods
        public void DoSomething() {
            ++myVariable;
        }

        private void anotherMethod() { }
    }
} 
```

Now, when the compiler tries to parse your codefile, since it's not structured in this manner, it complains

When you try to build the project the Error list window pops up with the errors you specified. You can double click each of these items and address them. What you can do is after each fix try to compile again, since some errors might be "follow up errors", i.e. errors which are fixed due to the first error being fixed.

In your case you have a method in the button click method. This is not allowed for a C# class, so you need to close the buttonClick method scope (the `{ }` brackets that is) and move the using statements to the top of the cs file.

A tip is to indent your code since well formatted code is easier to read. Visual Studio makes this easy, you can click the Edit menu, choose Advanced and click Format Document (remember the shortcut Ctrl-k Ctrl-d). It can also help spot some errors, such as unmatched brackets.

* * *

Edit: Another tip btw is the Right click - Organize usings - Remove and sort option, to clear the cludder in the using statements in the beginning of the file. In many cases you don't need half of the ones which are included by default when Visual Studio creates a file. Later, if you find that you have a unrecognized class, press Ctrl + . ("ctrl dot") and you get the option to include the using statement needed for that class.

# ice - ZeroC Ice中从接口ID获取操作列表

> ID：12584895
> 
> 赞同：0
> 
> 时间：2012-09-25T14:15:50.013
> 
> 标签：ice

[Dynamic Ice](http://doc.zeroc.com/display/Ice/Dynamic+Ice)手册部分没有解释如何获取由对象实现的操作列表（它们的名称、参数和结果类型），这对于“创建对象浏览器、协议分析器等应用程序”似乎非常必要。可能吗？我正在考虑客户端无法访问服务器已知的所有 Slice 接口的情况（例如，因为可以动态加载新接口），因此希望在运行时了解它们。在 Ice 中有没有内置的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:16:11.507

Ice 不提供与 CORBA 接口存储库类似的任何自省。您可以动态创建请求（不使用已编译的存根），并且可以动态响应它们（不使用已编译的骨架），但是，如果您需要找出所涉及的类型，则必须从其他地方获取这些知识。

美智。

# struts2 - 如何在 Struts 标签中添加注释？

> ID：12584896
> 
> 赞同：3
> 
> 时间：2012-09-25T14:15:51.750
> 
> 标签：struts2, comments

我有以下标签，如何在其中添加评论？

```
<s:select id="productPrice.product" 
          name="productPrice.product"
          headerKey="0" 
          headerValue="-- Select Product --"
          list="products" 
          listKey="id" 
          listValue="name"
          value="productPrice.product.id"
          theme="simple"
          onchange="getDisplayName(value)"       <!-- How to comment here ? -->
          /> 
```

我试过了 ：

```
<!-- abc -->
<%-- abc --%>
// abc 
```

它们都不起作用，正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:39:58.560

您不能将评论放在标签内。您必须将它们放在 Struts2 标记的上方或下方。Struts2 标签与 HTML 标签没有区别，所以：

*   [XML 注释可以去任何地方吗？](https://stackoverflow.com/questions/50824/can-xml-comments-go-anywhere)
*   [元素开始标签内的 HTML 注释](https://stackoverflow.com/questions/5926580/html-comments-inside-opening-tag-of-the-element)

# c# - 使用 XML 或 web.config 配置 Unity 容器

> ID：12584902
> 
> 赞同：1
> 
> 时间：2012-09-25T14:16:20.863
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, unity-container

我正在使用 .net 4.5 和 MVC4。我按照以下帖子中的描述实现了 Unity IoC：http: [//kennytordeur.blogspot.com/2011/05/aspnet-mvc-3-and-unity-using.html](http://kennytordeur.blogspot.com/2011/05/aspnet-mvc-3-and-unity-using.html)

但我希望能够使用外部 XML 或在 web.config 中“注册”我的存储库类型。这可能吗？样品将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:14:59.430

除非有非常充分的理由，否则您应该尽可能多地在代码中注册。XML 配置更容易出错、冗长并且很快就会成为维护的噩梦。无需在 XML 中注册（所有）您的存储库类型（这可以使用 Unity），只需将包含存储库类型的程序集名称放入配置中并在代码中动态注册它们。这使您不必在每次添加新的存储库实现时都更改配置。

这是一个例子。

在您的配置文件中，使用程序集的名称添加一个新的 appSetting：

```
<appSettings>
    <add key="RepositoryAssembly" value="AssemblyName" />
</appSettings> 
```

在您的组合根目录中，您可以执行以下操作：

```
var assembly = Assembly.LoadFrom(
    ConfigurationManager.AppSettings["RepositoryAssembly"]);

// Unity misses a batch-registration feature, so you'll have to
// do this by hand.
var repositoryRegistrations =
    from type in assembly.GetExportedTypes()
    where !type.IsAbstract
    where !type.IsGenericTypeDefinition
    let repositoryInterface = (
        from _interface in type.GetInterfaces()
        where _interface.IsGenericType
        where typeof(IRepository<>).IsAssignable(
            _interface.GetGenericTypeDefinition())
        select _interface)
        .SingleOrDefault()
    where repositoryInterface != null
    select new
    {
        service = repositoryInterface, 
        implemention = type
    };

foreach (var reg in repositoryRegistrations)
{
    container.RegisterType(reg.service, reg.implementation);
} 
```

LINQ 查询有很多细微的缺陷（例如，它缺少对泛型类型约束的检查），但它适用于常见场景。如果您使用泛型类型约束，则绝对应该切换到支持此功能的框架，因为这确实很难正确处理。

# orm - 跨应用程序重用 ColdFusion ORM 实体/对象？

> ID：12584904
> 
> 赞同：3
> 
> 时间：2012-09-25T14:16:30.470
> 
> 标签：orm, coldfusion, coldfusion-9

是否可以跨应用程序重用 ColdFusion ORM 对象？

例如，我在名为 app1 的文件夹中设置了一个名为 app1 的启用 ORM 的应用程序。我创建了一个对应于一个部门数据库表的 department.cfc：

```
<cfcomponent>
<cfset this.name = "app1"> 
<cfset this.ormenabled = "true">
<cfset this.ormSettings = {
    datasource = "myDS",
    schema = "mySchema",
    dialect = "Oracle10g",
    logSQL = "false"
}> 
```

我可以从 CFM 文件加载和转储内容：

```
<cfset item = EntityLoad("department")>
<cfdump var="#item#"> 
```

然后我在名为 app2 的文件夹中设置了一个相同的启用 ORM 的应用程序 app2。我在那里创建了一个部门.cfc，它扩展了 app1 中的部门.cfc：

```
<cfcomponent persistent="true" extends="my.path.app1.department">
</cfcomponent> 
```

当我尝试加载和转储内容时，出现错误：

*系统试图使用未定义的值，这通常表示您的代码或某些系统代码中的编程错误。空指针是未定义值的另一个名称。*

我已经验证了路径是正确的。例如，我能够使用 CreateObject 实例化对象：

```
<cfset item = CreateObject("component","my.path.app1.department")>
<cfdump var = "#item#"> 
```

我希望我可以引用单个 CFC 并重新使用该对象，但除非我遗漏了一些东西，否则它看起来可能需要在 app2 中重新创建该对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:32:45.680

CFC（实体）可以在两个不同的应用程序中实例化，每个应用程序都使用自己的 ORM。您需要做的就是将它们放在服务器上的这个中心位置，并可能创建一个特定于应用程序的/全局文件映射，然后您就可以创建新实例。然而，最方便的方法是通过 application.cfc 中的“this.ormSettings”变量，因为您可以在一个地方完成所有操作。

例如：

```
 component displayname="Application"
    {
        this.ormSettings = {
            cfclocation = [
                "/full/path/to/cfc/directory", 
                "Entity",
                "/a/relative/path" 
            ]
        };

        this.mappings["/Entity"] = "full/dir/path/to/another/cfc/directory/called/whatever";

    } 
```

这些位置中的每一个都将在任何其他目录之前搜索匹配的 CFC，因此通过显式定义它们也有潜在的性能优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:35:53.670

您当然可以让多个应用程序使用相同的“模型”或一组 ORM 实体 CFC，方法是通过 AlexP 所说的映射访问它们。

但是继承在 ORM 中的工作方式有点不同。一个持久 CFC 不能扩展另一个持久 CFC（至少在 CF9 中不能）。相反，必须将父 CFC 标记为“**映射超类**”并将持久属性设置为 false 或删除。然后，子持久 CFC 应该能够扩展它：

```
<cfcomponent name="Pet" mappedSuperClass="true" persistent="false">
...
</cfcomponent>

<cfcomponent name="Cat" extends="Pet" persistent="true" table="cats">
...
</cfcomponent> 
```

这显然限制了您可以在 ORM 中使用继承进行的操作。您不能将 Pet 本身用作实体，但它对于共享可能在 Cat、Dog 和 Rabbit 实体中重复的属性很有用。

# php - T_STRING 错误 - 尝试在 SQL where 语句中使用 PHP 数组

> ID：12584910
> 
> 赞同：1
> 
> 时间：2012-09-25T14:16:41.930
> 
> 标签：php, mysql

我觉得我在这里某个地方犯了一个新手错误，但无法弄清楚出了什么问题。我正在使用 PHP 和 mySQL。我有一个数组 $users 存储当前用户的信息。该数组存储客户 ID（cid，它是一个整数）。所以我试图提取仅标记给特定客户的信息。我的代码是：

```
try
{
    $sql = 'SELECT id, title, image_url FROM shelf WHERE cid = $user['cid']'; 
    $result = $pdo->query($sql);
} 
```

我觉得我的程序的其他部分有类似的代码正在运行，所以这看起来我可能在语法方面做错了。如果我`$user['cid']`在请求中用 22 之类的硬编码数字替换，则该语句可以正常工作。但是，我需要从 $user 中提取整数。我`T_STRING`在 SELECT 语句行上遇到错误。我还尝试在周围添加一组额外的单引号，`$user['cid']`但这也不起作用（即`$user['cid']`）

谢谢你的帮助。

缠绕

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:22:23.580

您正在使用 PDO，因此您也应该使用占位符：

```
$stmt = $pdo->prepare('SELECT id, title, image_url FROM shelf WHERE cid=:cid');
$stmt->bindParam(':cid', $user['cid']);
$stmt->execute(); 
```

This ensures your data is escaped correctly and handles conversion to the appropriate database format where required.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:19:34.730

是的，菜鸟错误。更改为双引号并在值周围添加 { }，例如：

```
$sql = "SELECT id, title, image_url FROM shelf WHERE cid = {$user['cid']}"; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-25T14:21:19.913

$sql = '从架子 WHERE cid = '.intval($user['cid']) 中选择 id、title、image_url；

# r - 如何在单个图中绘制具有不同最大 X 轴值的两个数据集？

> ID：12584911
> 
> 赞同：0
> 
> 时间：2012-09-25T14:16:43.233
> 
> 标签：r, ggplot2

例如，我有两个数据集如下所示。使用位置为 X，计数为 Y，如何使用 ggplot2 在单个图中以不同的颜色线将它们绘制出来`geom_line`？

数据集`a`：

```
position count
1    3
2    9
3    10
4    15
5    19
6    28
7    15
8    13
9    11
10    5 
```

数据集`b`：

```
position count
1    4
2    8
3    16
4    17
5    19
6    10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:19:31.950

诀窍是将两个数据框组合成一个数据框。首先，我们在每个数据框上创建一个新的标识符列：

```
a$dataset = "a"
b$dataset = "b" 
```

然后我们将它们结合起来

```
dd = rbind(a, b) 
```

剩下的就是`geom_line`在数据集编号上添加但条件：

```
ggplot(dd) + geom_line(aes(position, count, colour=dataset)) 
```

# .net - 如何完全卸载 Visual Studio 2010？

> ID：12584912
> 
> 赞同：115
> 
> 时间：2012-09-25T14:16:44.027
> 
> 标签：.net, windows, visual-studio, uninstallation

我一直在寻找一个干净的解决方案来完全并最终从我的计算机中删除 Visual Studio 2010。当您安装 Visual Studio 时，它还会在添加/删除程序面板 ( ) 中安装一堆程序（大约 55 个`appwiz.cpl`）。

我已经尝试过微软制作的一个小工具，但它几乎什么也没做。

我现在真的在寻找一种更好的方法来卸载任何版本的 Microsoft Visual Studio。因为我有很多计算机，所以我经常切换到一个版本或另一个版本，或者我只是决定不再需要在一台计算机上使用它来获得一些空间。

真的，最好的解决方案是什么？如果没有，为什么微软没有开发出真正运行良好的？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-09-25T14:19:00.220

## 2016 年 4 月更新 - 适用于 VS2013+

微软在 2015 年底开始通过发布[VisualStudioUninstaller](https://github.com/Microsoft/VisualStudioUninstaller)来解决这个问题。

他们暂时放弃了解决方案；然而，工作已于[2016 年 4 月再次](https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3487794-create-a-remove-all-remnants-of-visual-studio-fro)开始。

这个卸载程序终于在 2016 年 4 月[正式发布](https://github.com/Microsoft/VisualStudioUninstaller/releases)，被描述为“旨在清理/烧毁 Visual Studio 2013、Visual Studio 2015 和 Visual Studio vNext 的所有 Preview/RC/RTM 版本”。

* * *

## 原始答案 - 适用于 VS2010、VS2012

请注意，以下两种解决方案仍然会留下痕迹（例如注册表文件），并且不能真正被视为“干净”卸载（有关完全干净的解决方案，请参阅答案的最后部分）。

* * *

**解决方案 1** - 适用于：VS 2010

Microsoft 提供了一个卸载程序，称为[Visual Studio 2010 Uninstall Utility](http://blogs.msdn.com/b/heaths/archive/2010/08/23/visual-studio-2010-uninstall-utility.aspx)。它带有三个选项：

1.  **默认**（VS2010_Uninstall-RTM.ENU.exe）
2.  **完整**（VS2010_Uninstall-RTM.ENU.exe /完整）
3.  **完成**（VS2010_Uninstall-RTM.ENU.exe /full /netfx）

上面的链接更详细地解释了卸载程序 -**我建议在使用它之前阅读文章的评论，**因为在安装服务包时，一些已经注意到的问题（和解决方法）。之后，使用[CCleaner](https://www.piriform.com/ccleaner/download)之类的工具删除剩余的注册表文件。

[这是 VS2010 UU 下载页面的链接](http://blogs.msdn.com/b/heaths/archive/2014/08/20/visual-studio-2010-uninstall-utility-back-online.aspx)。

* * *

**解决方案 2** - 适用于：VS 2010、VS 2012

Microsoft 提供了**卸载/强制**功能，可从您的计算机中删除 VS2010 或 VS2012 的大部分残余。

[MSDN：如何卸载 Visual Studio 2010/2012](https://support.microsoft.com/en-us/kb/2771441)。从链接：

> **警告：**运行此命令可能会删除一些包，即使它们仍在使用中，如可选共享包中列出的那些。
> 
> 1.  下载您最初用于安装 Visual Studio 2012 的安装应用程序。如果您从媒体安装，请插入该媒体。
> 2.  打开命令提示符。单击开始菜单上的运行 (Start + R)。键入 cmd 并按 OK (Enter)。
> 3.  输入设置应用程序的完整路径并传递以下命令行开关：`/uninstall /force` **示例：** `D:\vs_ultimate.exe /uninstall /force`
> 4.  单击卸载按钮并按照提示进行操作。

之后，使用[CCleaner](https://www.piriform.com/ccleaner/download)之类的工具删除剩余的注册表文件。

* * *

**完全干净的卸载？**

可悲的是，实现此目的的唯一（当前）方法是[在他们的回答中遵循 dnLL 的建议](https://stackoverflow.com/a/14056815/1586880)并执行完整的操作系统重新安装。然后，将来，您可以在虚拟机中使用 Visual Studio，而不必再次担心这些问题。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-05-21T02:42:41.437

这是删除所有包的最简单方法。从管理员提示：
`wmic product where "name like 'microsoft visual%'" call uninstall /nointeractive`

`visual%`通过在上面的命令中替换为 SQL 等重复`sql`。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-08-01T01:09:47.147

放入您的 CD 或安装您的 ISO。使用标志从命令提示符运行安装程序`/uninstall /force`

前几天我实际上遇到了这个问题，它产生了奇迹。=)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-12-27T15:11:11.023

卸载 VS（Visual Studio，无论它是什么版本）的唯一真正干净的方法是完全重新安装整个操作系统。否则，可能会出现更多兼容性问题。

**永久解决方案**

从头开始（全新安装，VS 从未在操作系统上安装），避免所有这些问题的最佳方法是从 VM（虚拟机）安装和运行 VS，如上面评论中的*默认*所述。这样，只要微软不做任何事情来改进其整个平台以使其更加用户友好，从一个版本切换到另一个版本将是快速而简单的，并且 HDD 的主分区（或 SSD 在我的情况下）不会与 VS 留下的所有垃圾一起归档。

当然，缺点是速度。该程序几乎在各个方面都会变慢。但老实说，谁使用 VS 来提高速度？即使在最新的发烧友平台上，安装也需要很长时间。即使 VS 可能在高端 SSD 上启动更快，它也只是**慢**。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-01-24T00:22:26.177

为同样的问题苦苦挣扎：许多应用程序，但至少让这部分“令人愉快”：诀窍叫做`Batch-Uninstall`. 所以使用我可以推荐的这三个程序之一：

*   Absolute Uninstaller（+ slim，删除注册表和文件夹，-单击 OK 50 次）
*   IObit Uninstaller（+ 也适用于工具栏，删除注册表和文件夹，-自带可选工具栏）
*   dUninstaller（+静默模式/强制：50个应用程序不点击，它在后台执行 - 不扫描注册表/文件）

在恕我直言中取2号，1很好，但有时会遇到一些错误:-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-28T03:34:04.097

这里有一个[解决方案](http://ghiban.com/technology/software-technology/how-to-uninstall-visual-studio-2010)：添加

> /full /netfx 在路径的末尾！

这应该清除几乎所有。您应该只剩下 SQL Server。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-13T14:40:35.367

下载并安装 IOBIT 卸载程序：http: [//www.iobit.com/advanceduninstaller.php](http://www.iobit.com/advanceduninstaller.php)，找到您安装 Visual Studio 的日期并选择该日期与 VS 相关的所有程序。然后运行 ​​de batch 卸载程序。它不是一个完全自动化的解决方案，但它比在 Windows 中逐个添加/删除程序要快得多。它甚至可以进行电源扫描以清理注册表。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-23T21:20:18.710

如果我可以回答一个旧线程；您可以使用[PC Decrapifier](http://www.pcdecrapifier.com/)选择要卸载的程序。PC Decrapifier 将为您一一卸载它们，因此您不必单独单击它们。

这对于删除所有“垃圾”非常有用——比如 SQL 数据库工具——Visual Studio 即使在卸载时也会留下。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-08-09T22:57:08.063

我用过的最好方法是挂载 VS 2010 映像或插入安装光盘并运行该`uninstall`选项，真的很好用

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-04-08T05:52:20.463

卸载 VS 2010 的最佳方法是在此链接上使用 Microsoft Visual Studio 2010 卸载实用程序[http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=vs2010uninstall&DownloadId=11182](http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=vs2010uninstall&DownloadId=11182)

# java - 随机获取 org.json.JSONException 错误：值 嗨，我有时会收到此 JsonException ... 为什么会发生这种情况，任何机构都可以解决以下问题，这是我的代码。 public int getResult(String name, double lat, double lon) { try { HttpClient httpclient = new DefaultHtt 问问题 问问题 2012-09-25T14:16:53.280 1896 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 嗨，我有时会收到此 JsonException ... 为什么会发生这种情况，任何机构都可以解决以下问题，这是我的代码。 public int getResult(String name, double lat, double lon) { try { HttpClient httpclient = new DefaultHttpClient(); String query = URLEncoder.encode(name, "utf-8"); HttpPost httppost = new HttpPost("http://00004rl.rcomhost.com/demo/?json=get_dealing&dev=1&store_name=" + query + "&longitude=" + lon + "&latitude=" + lat); JSONObject object = new JSONObject(); StringEntity se = new StringEntity(object.toString()); se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json")); httppost.setEntity(se); HttpResponse response = httpclient.execute(httppost); HttpEntity entity = response.getEntity(); InputStream is = entity.getContent(); BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8); StringBuilder sb = new StringBuilder(); String line = null; while ((line = reader.readLine()) != null) { sb.append(line + "\n"); } is.close(); JSONObject jso = new JSONObject(sb.toString()); if (jso.getString("status").equals("ok")) { return 1; } } catch (Exception e) { e.printStackTrace(); return 0; } return 0; } 我正在低于异常，这是我的 logcat 低于 09-25 19:13:26.079: W/System.err(4842): org.json.JSONException: Value (JSONObject.java:158) 09-25 19:13:26.079: W/System.err(4842): at org.json.JSONObject.<init>(JSONObject.java:171) 09-25 19:13:26.079: W/System.err(4842): at com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity$LoadPlaces.getResult(MainActivity.java:246) 09-25 19:13:26.079: W/System.err(4842): at com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity$LoadPlaces.doInBackground(MainActivity.java:208) 09-25 19:13:26.079: W/System.err(4842): at com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity$LoadPlaces.doInBackground(MainActivity.java:1) 09-25 19:13:26.079: W/System.err(4842): at android.os.AsyncTask$2.call(AsyncTask.java:185) 09-25 19:13:26.079: W/System.err(4842): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 09-25 19:13:26.089: W/System.err(4842): at java.util.concurrent.FutureTask.run(FutureTask.java:138) 09-25 19:13:26.089: W/System.err(4842): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 09-25 19:13:26.089: W/System.err(4842): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 09-25 19:13:26.089: W/System.err(4842): at java.lang.Thread.run(Thread.java:1019) 我没有尝试过很多组合，但似乎google-gson保持JSON. 此处删除了一个示例，因为它不再相关 我从以前的项目经验中知道它是非常可定制的，例如如果基础对象不够，可以使用GsonBuilder创建更复杂的适配器。 但是，我尚未使用您的用例对此进行广泛测试，但是检查它是否具有预期的输出应该很简单 更新 而不是使用 SVN/CVS 来检查您的文件是否被修改，我发现 GSON 具有内置的版本控制支持，这可能会或可能不会解决您的问题，来自他们的文档： 使用@Since注解可以维护同一对象的多个版本。此注释可用于类、字段以及在未来版本中的方法。为了利用此功能，您必须将 Gson 实例配置为忽略任何大于某个版本号的字段/对象。如果没有在 Gson 实例上设置版本，那么它将序列化和反序列化所有字段和类，而不管版本如何。 更新 我能想到的唯一另一件事是用rhino解析您的外部文件并将JSON.stringify解析后的文件转换JSON回字符串，然后您可以确定它已通过单个“解析器”运行并且输出不会有所不同。 然后，您可以检测任何可能的更改。 javaandroidjsonjakarta-ee 4 4 回答 4 This answer is useful 3 您的服务器有时会以 html 格式向您发送响应，而不是 json 格式。 于 2012-09-25T14:20:23.320 回答 This answer is useful 0 结果似乎有问题。JSON您应该在构建对象之前尝试打印结果。 如果在某个地方出现错误，然后由于某种原因导致结果是 HTML 页面，那么您将无法构建您的JSON. 对于这个错误，看起来结果是 HTML，

> ID：12584914
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, android, json, jakarta-ee

嗨，我有时会收到此 JsonException ... 为什么会发生这种情况，任何机构都可以解决以下问题，这是我的代码。

```
 public int getResult(String name, double lat, double lon) {
        try {
            HttpClient httpclient = new DefaultHttpClient();
            String query = URLEncoder.encode(name, "utf-8");

            HttpPost httppost = new HttpPost("http://00004rl.rcomhost.com/demo/?json=get_dealing&dev=1&store_name=" + query + "&longitude=" + lon
                    + "&latitude=" + lat);
            JSONObject object = new JSONObject();
            StringEntity se = new StringEntity(object.toString());
            se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
            httppost.setEntity(se);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            InputStream is = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            JSONObject jso = new JSONObject(sb.toString());
            if (jso.getString("status").equals("ok")) {
                return 1;
            }
        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }
        return 0;
    } 
```

我正在低于异常，这是我的 logcat 低于

```
 09-25 19:13:26.079: W/System.err(4842): org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
   09-25 19:13:26.079: W/System.err(4842):  at org.json.JSON.typeMismatch(JSON.java:107)
   09-25 19:13:26.079: W/System.err(4842):  at org.json.JSONObject.<init>(JSONObject.java:158)
   09-25 19:13:26.079: W/System.err(4842):  at org.json.JSONObject.<init>(JSONObject.java:171)
   09-25 19:13:26.079: W/System.err(4842):  at com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity$LoadPlaces.getResult(MainActivity.java:246)
   09-25 19:13:26.079: W/System.err(4842):  at com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity$LoadPlaces.doInBackground(MainActivity.java:208)
   09-25 19:13:26.079: W/System.err(4842):  at com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity$LoadPlaces.doInBackground(MainActivity.java:1)
   09-25 19:13:26.079: W/System.err(4842):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
   09-25 19:13:26.079: W/System.err(4842):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
  09-25 19:13:26.089: W/System.err(4842):   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
   09-25 19:13:26.089: W/System.err(4842):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
   09-25 19:13:26.089: W/System.err(4842):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
  09-25 19:13:26.089: W/System.err(4842):   at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:20:23.320

您的服务器有时会以 html 格式向您发送响应，而不是 json 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:22:06.497

结果似乎有问题。`JSON`您应该在构建对象之前尝试打印结果。

如果在某个地方出现错误，然后由于某种原因导致结果是 HTML 页面，那么您将无法构建您的`JSON`.

对于这个错误，看起来结果是 HTML，`<!DOCTYPE`而不是 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T08:29:56.210

问题是您将服务器响应作为 JSON 处理，这是您的预期行为。但是在某些情况下，例如服务器已关闭，请求错误，服务器正忙……有人定义了一个 UncaughtException 处理程序，以通过某些 GUI 指示用户出现问题，有时服务器会返回。如果您在某处读取服务器响应，您实际上可以复制它并尝试在某些 HTML 页面查看器中运行它以获得确切的服务器响应......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-21T07:21:58.700

似乎 SDK 级别 25 会出现此错误，但 SDK 级别 23 可以正常工作。</init>

# android - 如何在android中全局使用ArrayList模型？

> ID：12584923
> 
> 赞同：1
> 
> 时间：2012-09-25T14:17:27.273
> 
> 标签：android, arraylist

谁能告诉我如何将 ArrayList Globally 作为模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:20:57.380

像：

```
public class YourClass extends Activity {

    private List<Integer> mMyList = new ArrayList<Integer>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
} 
```

或者，如果您想在多个活动/课程中共享它，您可以使用单例：

```
public final class MyClass {
    private static final MyClass instance = new MyClass();

    private List<Integer> mMyList = new ArrayList<Integer>();

    public static MyClass getInstance() { 
        return instance;
    }

    private MyClass() {
    }
} 
```

并调用：

```
MyClass.getInstance().mMyList 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T05:13:15.123

> 您也可以在 Intent 中传递 arraylist

```
Bundle intentbundle = new Bundle();
        intentbundle.putStringArrayList("arrList",arrList);

       intent.putExtras(intentbundle);

       startActivity(intent); 
```

# gcc - gcc：忽略无法识别的选项

> ID：12584936
> 
> 赞同：5
> 
> 时间：2012-09-25T14:17:59.237
> 
> 标签：gcc, makefile

有没有办法让 gcc 忽略一个无效的选项，而不是死于“无法识别的选项”？原因是我想使用仅在更高版本的 gcc (-static-libstdc++) 中可用的选项，但它也应该在旧编译器上编译。我可以在 makefile 中检查 gcc 版本，但它有点难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T21:06:37.303

您可以运行 gcc 并检查它是否接受该标志：

```
STATIC_LIBCPP_FLAG := $(shell if gcc -static-libstdc++ --version 2>&1 | grep -q 'unrecognized option'; then true; else echo -static-libstdc++; fi)

CFLAGS += $(STATIC_LIBCPP_FLAG) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T20:49:01.977

不，但您可以根据 gcc 版本设置标志，如下所示：

```
version=`gcc --version | head -1 | cut -d ' ' -f3`

if [ `echo -e "$version\n4.6.1" | sort -V -C; echo $?` == 0 ]; then 
    flags = -static-libstdc++;
fi

gcc $flags ... 
```

（免责声明：我不确定哪个版本首先使用 static-libstdc++，4.6.1 只是一个猜测）。

约翰

# python - 如何检索带参数的对象？

> ID：12584937
> 
> 赞同：0
> 
> 时间：2012-09-25T14:18:05.963
> 
> 标签：python, django, django-models, django-views

我正在尝试根据 user_id 选择某个用户，但遇到了一些麻烦。我收到一条错误消息：“invalid literal for int() with base 10”：

代码的相关部分如下：

# 网址.py

```
url(r'^user/(?P<user_id>[-\w]+)/$', 'view_reviews_user'), 
```

# 模型.py

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, primary_key=True)
    quote = models.CharField('About', max_length =  200, null=True, blank=True) 
```

# 视图.py

```
def view_reviews_user(request, user_id):
    reviews = Reviewbackup.objects.filter(user=user_id)
    reviews = reviews.order_by("-created_on")
    userprofile = UserProfile.objects.get(user=user_id)
    return render_to_response('reserve/templates/user.html', {'reviews':reviews, 'user_id': user_id, 'userprofile': userprofile},
        context_instance=RequestContext(request)) 
```

我相信错误在“pk=user_id”中，但不知道如何修复它。我尝试了“user_id=user_id”，但这似乎也不起作用。我最终试图访问模板中的“报价”。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:39:36.780

在调用视图之前，您必须记住发生了什么。

Django 使用正则表达式将 url 与某种模式匹配。现在，通常正则表达式将在其中包含组，以便能够从那里解析出一些 id。Django 将获取这些 id 并将它们传递给视图。但是，由于它只使用正则表达式，因此即使您的组类似于`(?P<user_id>\d+)`.

所以在你看来，`user_id`是一个字符串，而你的模型中的外键是一个整数，因此 Django 想要一个整数来进行查询。您所要做的就是将值转换为整数，您应该没问题（请参阅下文，了解如何确保其中`user_id`不包含其他非整数字符）：

```
def view_reviews_user(request, user_id):
    userprofile = UserProfile.objects.get(pk=int(user_id)) 
```

* * *

即使这会起作用，但这里很多事情都可能出错。

**如果用户不输入整数怎么办？**这很容易在 urlconfig 的正则表达式中通过使用`\d+`which 仅在只有整数时才匹配表达式来修复。因此，您可以确定这`int(user_id)`不会引发问题。

```
url(r'^user/(?P<user_id>\d+)/$', 'view_reviews_user'), 
```

**如果找不到用户怎么办？**用户可能会提供`user_id`，但该用户 ID 可能不存在。你应该处理那个。最简单的方法是使用 django 快捷方式，`get_object_or_404`例如：

```
get_object_or_404(UserProfile, pk=user_id) 
```

* * *

`User`PS: 不建议对inside使用外键`UserProfile`。由于用户与其个人资料之间存在一对一的关系，因此您应该使用 user`OneToOneField`而不是`ForeignKey`.

**编辑**

如果您希望能够通过用户名而不是他们的 id 来查询用户，您可以这样做：

```
def view_reviews_user(request, username):
    userprofile = get_object_or_404(UserProfile, user__username=username) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:44:50.550

你`user_id`的是一个字符串。Django ids 是整数，如果你想使用一个字符串，`'sharat'`你应该添加一个`SlugField`到你的模型，然后查询 slug：

```
def view_reviews_user(request, slug):
    userprofile = UserProfile.objects.get(slug=slug) 
```

# java - 我是否需要以某种方式清除 Hibernate 异常？

> ID：12584939
> 
> 赞同：0
> 
> 时间：2012-09-25T14:18:12.873
> 
> 标签：java, hibernate, exception, transactions

我在以下列方式保存数据时进行异常检查：

```
 try {
        session.beginTransaction();
        session.update(person);
        session.getTransaction().commit();
    }
    catch(Exception e) {
        session.getTransaction().rollback();
        log.error("Error saving person to database", e);
    } 
```

尽管如此，我的应用程序后来在某个地方出现异常而终止。

（我做了这个检查是为了避免数据截断错误。可能有一种方法可以检查数据截断而不会在 Hibernate 中引起异常？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:18:51.093

当引发 Hibernate 异常时，您将无法再使用导致该异常的会话。回滚是自动完成的。

如果你想在异常之后继续，你有两种可能：

1.  丢弃旧会话并创建一个新会话。

2.  使用 StatelessSession 而不是会话。StatelessSession 可以在异常之后使用。在 StatelessSession 中，您必须手动进行回滚。

通常你会做解决方案1。

解决方案 2\. 如果您故意引发异常并且您有一种特殊的方式对其做出反应，那么解决方案 2\. 很有用。（例如，插入操作中的索引冲突异常，并且在异常之后您执行更新而不是插入。）

# tomcat - Tomcat 7 上的 ActiveMQ Web 控制台 5.6 - Taglibs 中的空指针

> ID：12584940
> 
> 赞同：0
> 
> 时间：2012-09-25T14:18:18.253
> 
> 标签：tomcat, activemq

我们正在尝试在 Tomcat 7 上部署 ActiveMQ Web Console 5.6（准确地说是针对 Java 1.7.0_07 运行的 7.0.29）。

手动部署 web 控制台战争后，我们修改了[http://activemq.apache.org/web-console.html](http://activemq.apache.org/web-console.html)上的说明 如下：

*   我们将 activemq-all-5.6.0.jar、jetty.util.6.1.12.jar 和 commons-logging-1.1.jar 添加到 ${cataline_home}/lib 目录
*   我们在 catalina.bat 中添加了以下内容： CATALINA_OPTS=-Xms4m -Xmx256m -Dwebconsole.type=properties -Dwebconsole.jms.url=tcp://localhost:61616 -Dwebconsole.jmx.url=service:jmx:rmi:// /jndi/rmi://localhost:1099/jmxrmi -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=7777 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management .jmxremote.authenticate=false

然后Tomcat就愉快的启动了，我们可以看到web控制台的登陆页面（http://localhost:8080/activemq-web-console-5.6.0/），但是当我们尝试访问时：

```
http://localhost:8080/activemq-web-console-5.6.0/queueGraph.jsp 
```

我们得到以下堆栈跟踪：

```
SEVERE: Servlet.service() for servlet [jsp] in context with path [/activemq-web-console-5.6.0] threw exception [PWC6033: Unable to compile class for JSP] with root cause
java.lang.NullPointerException
at org.apache.taglibs.standard.tlv.JstlBaseTLV.validate(JstlBaseTLV.java:178)
at org.apache.taglibs.standard.tlv.JstlCoreTLV.validate(JstlCoreTLV.java:134)
at org.apache.jasper.compiler.TagLibraryInfoImpl.validate(TagLibraryInfoImpl.java:913)
at org.apache.jasper.compiler.Validator.validateXmlView(Validator.java:1891)
at org.apache.jasper.compiler.Validator.validate(Validator.java:1859)
at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:210)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:435)
at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:608)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:360)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:83)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.activemq.web.SessionFilter.doFilter(SessionFilter.java:45)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.activemq.web.filter.ApplicationContextFilter.doFilter(ApplicationContextFilter.java:81)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:65)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Sep 25, 2012 1:04:13 PM org.apache.catalina.core.ApplicationContext log
SEVERE: Servlet jsp threw unload() exception
javax.servlet.ServletException: Servlet.destroy() for servlet jsp threw exception
at org.apache.catalina.core.StandardWrapper.unload(StandardWrapper.java:1485)
at org.apache.catalina.core.StandardWrapper.stopInternal(StandardWrapper.java:1822)
at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5463)
at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1575)
at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1564)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoSuchFieldError: deferredExpression
at org.apache.taglibs.standard.tag.common.core.ForEachSupport.release(ForEachSupport.java:212)
at org.apache.jasper.runtime.TagHandlerPool.release(TagHandlerPool.java:197)
at org.apache.jsp.queues_jsp._jspDestroy(org.apache.jsp.queues_jsp:41)
at org.apache.jasper.runtime.HttpJspBase.destroy(HttpJspBase.java:100)
at org.apache.jasper.servlet.JspServletWrapper.destroy(JspServletWrapper.java:424)
at org.apache.jasper.compiler.JspRuntimeContext.destroy(JspRuntimeContext.java:347)
at org.apache.jasper.servlet.JspServlet.destroy(JspServlet.java:410)
at org.apache.catalina.core.StandardWrapper.unload(StandardWrapper.java:1464)
... 11 more 
```

有人可以帮忙吗？

请注意：完全相同的步骤，但使用 Tomcat 6.0.35 可以正常工作。

TIA

干杯，安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:16:00.530

使用的 JSTL 标记库的版本似乎有问题。我不确定您的确切解决方案是什么，但也许这些帖子可以为您提供指导：

*   [使用 JSTL 会导致更改时出现 deferredExpression 错误](https://stackoverflow.com/questions/7837576/using-jstl-causes-deferredexpression-error-on-change)
*   [Tomcat 7 和 JSTL](https://stackoverflow.com/questions/6094329/tomcat-7-and-jstl)

# android - 如何在 kivy 中创建在 android 上运行的项目？

> ID：12584941
> 
> 赞同：4
> 
> 时间：2012-09-25T14:18:17.497
> 
> 标签：android, python, kivy

我试图理解[kivy](http://kivy.org/docs/index.html)。安装后，启动 kivy，我收到一条消息说我应该先在`/mny/sdcard/kivy`. 该文件夹不存在，所以我通过 FTP 连接创建了它。然后我将一个`main.py`文件放在子文件夹中。再次启动 kivy（强制关闭后）会产生相同的结果。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T16:41:54.817

当心。您正在使用一种可能的方法来运行基于 Kivy 的软件，使用[Kivy 启动器](http://kivy.org/docs/guide/packaging-android.html#packaging-your-application-for-kivy-launcher)。此启动器要求您将应用程序 ( `main.py`) 和描述文件 ( ) 安装在 sdcard 上`android.txt`的目录中。`kivy/yourapp`

所以在`/mnt/sdcard`OR中`/sdcard`，确保你有一个`kivy`目录 + 一个应用程序目录 + `main.py`+ `android.txt`。

如果你想创建一个独立的 APK，那么你需要使用[python-for-android](http://kivy.org/docs/guide/packaging-android.html#packaging-your-application-into-apk)项目。

# image - 在 Drupal 视图中显示图像

> ID：12584945
> 
> 赞同：1
> 
> 时间：2012-09-25T14:18:24.567
> 
> 标签：image, drupal, view

我设置了一个视图来显示来自具有 url 的字段的电影海报（例如[http://images.zap2it.com/movies/116670/116670_aa_t.jpg](http://images.zap2it.com/movies/116670/116670_aa_t.jpg)）

对于我尝试使用 Node-Nid 和 Content: Poster Art（带有 url 的字段）和我有 Content: Image 的字段（我尝试了各种“图像”设置）的论点。然而它不会显示任何图片，只是“图像：”。

我在这里想念什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:37:09.490

我以前没有做过这样的事情。但我认为你可以通过“重写” url 字段的结果来做到这一点。

您可以通过单击您将在视图设置中的“字段”下找到的带有 URL 的字段来执行此操作。然后在“重写结果”下，您可以编写类似

```
<img src="[image_url]" /> 
```

这里，'image_url' 必须是字段的名称。您可以在“替换模式”下显示的列表中验证这一点

希望这可以帮助。:)

问候

阿尤什什雷斯塔

# visual-studio-2012 - t4mvc 在 Visual Studio 2012 中不起作用

> ID：12584947
> 
> 赞同：0
> 
> 时间：2012-09-25T14:18:30.447
> 
> 标签：visual-studio-2012, t4mvc

对操作或控制器的任何更改都会导致应用程序运行时出现错误，或者更糟糕的是，出现奇怪的行为。

例如，向控制器添加新动作会导致视图中的 Html.ActionLink 调用实际调用该动作。

我不知道是什么击中了我...

在这两种情况下，问题都是通过卸载并重新安装 t4mvc 包来解决的。

我必须做些什么才能使 T4 模板与 VS 2012 一起使用？？！

编辑：

我忘了提到该项目已从 MVC 3 升级到 MVC 4。它在 vs 2010 和 MVC 3 中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:10:27.107

我没有看到在 VS 2012 中运行 T4MVC 的问题。

“*向控制器添加新动作会导致视图中的 Html.ActionLink 调用实际调用该动作*”

听起来您只是在修改控制器后没有重新运行 T4MVC。这是一直需要的东西，尽管有一些像[AutoT4MVC](http://visualstudiogallery.msdn.microsoft.com/8d820b76-9fc4-429f-a95f-e68ed7d3111a)这样的工具可以在构建时为您执行此操作。但这不是 VS 2012 特有的事情。

# javascript - Jquery .each() 无限循环

> ID：12584948
> 
> 赞同：1
> 
> 时间：2012-09-25T14:18:31.110
> 
> 标签：javascript, jquery, loops, iterator, each

我正在尝试使用 jquery 进行无限循环，因此除非执行此行，否则条形将永远不会停止动画：

$(".onoffswitch-active").click(function(){

我尝试循环遍历“span”标签，但它只能工作一小会儿，我怎样才能让它无限循环，直到用户点击“onoffswitch-active”，谢谢。

jQuery代码：

```
var t= Math.random() * 500

$(document).ready(function(){
  $(".onoffswitch-inactive").click(function(){
   $('span').each(function(x){
    $("#bar1").animate({height:Math.random() * 300},"t");
    $("#bar2").animate({height:Math.random() * 300},"t");
    $("#bar3").animate({height:Math.random() * 300},"t");
    $("#bar4").animate({height:Math.random() * 300},"t");
    $("#bar5").animate({height:Math.random() * 300},"t");
    $("#bar6").animate({height:Math.random() * 300},"t");
    $("#bar7").animate({height:Math.random() * 300},"t");
    $("#bar8").animate({height:Math.random() * 300},"t");
    $("#bar9").animate({height:Math.random() * 300},"t");
    $("#bar10").animate({height:Math.random() * 300},"t");
    $("#bar11").animate({height:Math.random() * 300},"t");
    $("#bar12").animate({height:Math.random() * 300},"t");
    $("#bar13").animate({height:Math.random() * 300},"t");
    $("#bar14").animate({height:Math.random() * 300},"t");
    $("#bar15").animate({height:Math.random() * 300},"t");
    $("#bar16").animate({height:Math.random() * 300},"t");
    $("#bar17").animate({height:Math.random() * 300},"t");
    $("#bar18").animate({height:Math.random() * 300},"t");
    $("#bar19").animate({height:Math.random() * 300},"t");
    $("#bar20").animate({height:Math.random() * 300},"t");
    $("#bar21").animate({height:Math.random() * 300},"t");
    $("#bar22").animate({height:Math.random() * 300},"t");
    $("#bar23").animate({height:Math.random() * 300},"t");
    $("#bar24").animate({height:Math.random() * 300},"t");
    $("#bar25").animate({height:Math.random() * 300},"t");
    $("#bar26").animate({height:Math.random() * 300},"t");
    $("#bar27").animate({height:Math.random() * 300},"t");
    $("#bar28").animate({height:Math.random() * 300},"t");
    $("#bar29").animate({height:Math.random() * 300},"t");
    $("#bar30").animate({height:Math.random() * 300},"t");
    $("#bar31").animate({height:Math.random() * 300},"t");
    $("#bar32").animate({height:Math.random() * 300},"t");
    $("#bar33").animate({height:Math.random() * 300},"t");
    $("#bar34").animate({height:Math.random() * 300},"t");
    $("#bar35").animate({height:Math.random() * 300},"t");
    $("#bar36").animate({height:Math.random() * 300},"t");
    $("#bar37").animate({height:Math.random() * 300},"t");
    $("#bar38").animate({height:Math.random() * 300},"t");
    $("#bar39").animate({height:Math.random() * 300},"t");
    $("#bar40").animate({height:Math.random() * 300},"t");
    $("#bar41").animate({height:Math.random() * 300},"t");
    $("#bar42").animate({height:Math.random() * 300},"t");
    $("#bar43").animate({height:Math.random() * 300},"t");
    $("#bar44").animate({height:Math.random() * 300},"t");
    $("#bar45").animate({height:Math.random() * 300},"t");
    $("#bar46").animate({height:Math.random() * 300},"t");
    $("#bar47").animate({height:Math.random() * 300},"t");
    $("#bar48").animate({height:Math.random() * 300},"t");
    $("#bar49").animate({height:Math.random() * 300},"t");
    $("#bar50").animate({height:Math.random() * 300},"t");
    $("#bar51").animate({height:Math.random() * 300},"t");
    $("#bar52").animate({height:Math.random() * 300},"t");
    $("#bar53").animate({height:Math.random() * 300},"t");
    $("#bar54").animate({height:Math.random() * 300},"t");
    $("#bar55").animate({height:Math.random() * 300},"t");
    $("#bar56").animate({height:Math.random() * 300},"t");
    $("#bar57").animate({height:Math.random() * 300},"t");
    $("#bar58").animate({height:Math.random() * 300},"t");
    $("#bar59").animate({height:Math.random() * 300},"t");
    $("#bar60").animate({height:Math.random() * 300},"t");
   });
  });

  $(".onoffswitch-active").click(function(){
    $(":animated").stop(true,true);
    $("#bar1").animate({height:0},"slow");
    $("#bar2").animate({height:0},"slow");
    $("#bar3").animate({height:0},"slow");
    $("#bar4").animate({height:0},"slow");
    $("#bar5").animate({height:0},"slow");
    $("#bar6").animate({height:0},"slow");
    $("#bar7").animate({height:0},"slow");
    $("#bar8").animate({height:0},"slow");
    $("#bar9").animate({height:0},"slow");
    $("#bar10").animate({height:0},"slow");
    $("#bar11").animate({height:0},"slow");
    $("#bar12").animate({height:0},"slow");
    $("#bar13").animate({height:0},"slow");
    $("#bar14").animate({height:0},"slow");
    $("#bar15").animate({height:0},"slow");
    $("#bar16").animate({height:0},"slow");
    $("#bar17").animate({height:0},"slow");
    $("#bar18").animate({height:0},"slow");
    $("#bar19").animate({height:0},"slow");
    $("#bar20").animate({height:0},"slow");
    $("#bar21").animate({height:0},"slow");
    $("#bar22").animate({height:0},"slow");
    $("#bar23").animate({height:0},"slow");
    $("#bar24").animate({height:0},"slow");
    $("#bar25").animate({height:0},"slow");
    $("#bar26").animate({height:0},"slow");
    $("#bar27").animate({height:0},"slow");
    $("#bar28").animate({height:0},"slow");
    $("#bar29").animate({height:0},"slow");
    $("#bar30").animate({height:0},"slow");
    $("#bar31").animate({height:0},"slow");
    $("#bar32").animate({height:0},"slow");
    $("#bar33").animate({height:0},"slow");
    $("#bar34").animate({height:0},"slow");
    $("#bar35").animate({height:0},"slow");
    $("#bar36").animate({height:0},"slow");
    $("#bar37").animate({height:0},"slow");
    $("#bar38").animate({height:0},"slow");
    $("#bar39").animate({height:0},"slow");
    $("#bar40").animate({height:0},"slow");
    $("#bar41").animate({height:0},"slow");
    $("#bar42").animate({height:0},"slow");
    $("#bar43").animate({height:0},"slow");
    $("#bar44").animate({height:0},"slow");
    $("#bar45").animate({height:0},"slow");
    $("#bar46").animate({height:0},"slow");
    $("#bar47").animate({height:0},"slow");
    $("#bar48").animate({height:0},"slow");
    $("#bar49").animate({height:0},"slow");
    $("#bar50").animate({height:0},"slow");
    $("#bar51").animate({height:0},"slow");
    $("#bar52").animate({height:0},"slow");
    $("#bar53").animate({height:0},"slow");
    $("#bar54").animate({height:0},"slow");
    $("#bar55").animate({height:0},"slow");
    $("#bar56").animate({height:0},"slow");
    $("#bar57").animate({height:0},"slow");
    $("#bar58").animate({height:0},"slow");
    $("#bar59").animate({height:0},"slow");
    $("#bar60").animate({height:0},"slow");

  });
}); 
```

的HTML：

```
<div class="onoffswitch">
    <div class="onoffswitch">
    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch">
    <label class="onoffswitch-label" for="myonoffswitch">
    <div class="onoffswitch-inner">
    <div class="onoffswitch-active" onClick="stop();">ON</div>
    <div class="onoffswitch-inactive" onClick="play();">OFF</div>
    </div>

    </label>
    </div> 
</div>

<div class="eq">
    <span id="bar1" class="bar"></span>
    <span id="bar2" class="bar"></span>
    <span id="bar3" class="bar"></span>
    <span id="bar4" class="bar"></span>
    <span id="bar5" class="bar"></span>
    <span id="bar6" class="bar"></span>
    <span id="bar7" class="bar"></span>
    <span id="bar8" class="bar"></span>
    <span id="bar9" class="bar"></span>
    <span id="bar10" class="bar"></span>
    <span id="bar11" class="bar"></span>
    <span id="bar12" class="bar"></span>
    <span id="bar13" class="bar"></span>
    <span id="bar14" class="bar"></span>
    <span id="bar15" class="bar"></span>
    <span id="bar16" class="bar"></span>
    <span id="bar17" class="bar"></span>
    <span id="bar18" class="bar"></span>
    <span id="bar19" class="bar"></span>
    <span id="bar20" class="bar"></span>
    <span id="bar21" class="bar"></span>
    <span id="bar22" class="bar"></span>
    <span id="bar23" class="bar"></span>
    <span id="bar24" class="bar"></span>
    <span id="bar25" class="bar"></span>
    <span id="bar26" class="bar"></span>
    <span id="bar27" class="bar"></span>
    <span id="bar28" class="bar"></span>
    <span id="bar29" class="bar"></span>
    <span id="bar30" class="bar"></span>
    <span id="bar31" class="bar"></span>
    <span id="bar32" class="bar"></span>
    <span id="bar33" class="bar"></span>
    <span id="bar34" class="bar"></span>
    <span id="bar35" class="bar"></span>
    <span id="bar36" class="bar"></span>
    <span id="bar37" class="bar"></span>
    <span id="bar38" class="bar"></span>
    <span id="bar39" class="bar"></span>
    <span id="bar40" class="bar"></span>
    <span id="bar41" class="bar"></span>
    <span id="bar42" class="bar"></span>
    <span id="bar43" class="bar"></span>
    <span id="bar44" class="bar"></span>
    <span id="bar45" class="bar"></span>
    <span id="bar46" class="bar"></span>
    <span id="bar47" class="bar"></span>
    <span id="bar48" class="bar"></span>
    <span id="bar49" class="bar"></span>
    <span id="bar50" class="bar"></span>
    <span id="bar51" class="bar"></span>
    <span id="bar52" class="bar"></span>
    <span id="bar53" class="bar"></span>
    <span id="bar54" class="bar"></span>
    <span id="bar55" class="bar"></span>
    <span id="bar56" class="bar"></span>
    <span id="bar57" class="bar"></span>
    <span id="bar58" class="bar"></span>
    <span id="bar59" class="bar"></span>
    <span id="bar60" class="bar"></span>

</div> 
```

CSS：

```
#bar1,#bar2,#bar3,#bar4,#bar5,#bar6,#bar7,#bar8,#bar9,#bar10,#bar11,#bar12,#bar13,#bar14,#bar15,#bar16,#bar17,#bar18,#bar19,#bar20,#bar21,#bar22,#bar23,#bar24,#bar25,#bar26,#bar27,#bar28,#bar29,#bar30,#bar31,#bar32,#bar33,#bar34,#bar35,#bar36,#bar37,#bar38,#bar39,#bar40,#bar41,#bar42,#bar43,#bar44,#bar45,#bar46,#bar47,#bar48,#bar49,#bar50,#bar51,#bar52,#bar53,#bar54,#bar55,#bar56,#bar57,#bar58,#bar59,#bar60,#bar61,#bar62,#bar63,#bar64,#bar65,#bar66,#bar67,#bar68
{
    background-color: white;
    width:20px;
    height:0px;
    display: inline-block;
    vertical-align: bottom;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:46:47.437

由于您没有提供您的 html，我使用了我自己的，但也许以下内容会对您有所帮助：

```
var
  duration = Math.random() * 500,
  isAnimating = false;

// start animations
function startAnmation() {
  isAnimating = true;
  $('#wrapper .bar').each(function () {
    (function loop($el) {
      $el.animate({
        height: Math.random() * 300
      }, {
        duration: duration,
        complete: function () {
          if (isAnimating) {
            loop($el);
          }
        }
      });
    }($(this)));
  });
}

// stop animations
function stopAnmation() {
  isAnimating = false;
  $('#wrapper .bar').stop(false);
}

// bind click events
$('#onoffswitch').on({
  click: function() {
    if ($(this).toggleClass('inactive active').is('.active')) {
      startAnmation();
    } else {
      stopAnmation();
    }
  }
}); 
```

适用于以下 html：

```
<button id="onoffswitch" class="inactive">start/stop</button>
<div id="wrapper">
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
</div>​ 
```

和一些CSS：

```
#wrapper {
  overflow: hidden;
}

.bar {
  float: left;
  width: 20px;
  background: #efefef;
  margin-right: 1px;
}​ 
```

演示：http: [//jsfiddle.net/Y2Sjf/1/](http://jsfiddle.net/Y2Sjf/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:25:56.177

你也可以用 CSS3 完成这个动画：

JS：

```
$("#toggleButton").click(function(){
    $(this).toggleClass("running");

    var doAnim = function(){
        if ($("#toggleButton").hasClass("running")){
            $("#buttonbar .bar").each(function(){
                $(this).css("height", Math.round(Math.random() * 99 + 1) + "%");
            });
            setTimeout(doAnim, 250);
        }
    };
    doAnim();
});​​​​​​ 
```

CSS

```
#buttonbar .bar{
    width:20px;
    background:#fff;
    margin-right:3px;
    float:left;
    overflow:hidden;

    -webkit-transition:height .25s; /* Note I only included the webkit transition */
} 
```

小提琴：http: [//jsfiddle.net/WuFZd/](http://jsfiddle.net/WuFZd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:21:52.663

jQuery .each 函数不会产生无限循环，除非你有无限数量的元素要循环。在这种情况下，最好用纯 javascript 创建一个 while 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:22:29.140

`.each()`不是正确的方法。你需要使用`setInterval`

例如，你尝试这样的事情

```
$(".onoffswitch-inactive").click(function(){
    setInterval(function(){
          $("#bar1").animate({height:Math.random() * 300},"t");
    }, 300); //run every 300 milliseconds. 
} 
```

并使用清除间隔`clearInterval`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T14:24:45.023

你的代码看起来很奇怪，但基本上给元素一个类并做这样的事情。

```
var bars = $(".bars");

function loop() {
    var len = bars.length;
    bars.each(function() {
        $(this).animate({height: Math.floor(Math.random() * 300)}, "slow");
    });
    bars.animate({height: 0}, "slow", function() {
                                          if (!--len) loop();
                                      });
}
loop(); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-25T14:21:40.280

免责声明：快速破解！

替换此代码：

```
$('span').each(function(x){ 
```

和：

```
runAnimation = true;
while(runAnimation) { 
```

这个代码：

```
$(":animated").stop(true,true); 
```

添加：

```
$(":animated").stop(true,true);
runAnimation = false; 
```

# jquery - 将 onchange 属性从一个元素复制到另一个元素 - 如何？

> ID：12584949
> 
> 赞同：0
> 
> 时间：2012-09-25T14:18:30.993
> 
> 标签：jquery, asp.net-mvc-3, razor

使用jQuery 1.7 ...

我正在尝试将所有属性从指定元素复制到 $to 元素；除了 onchange 属性（事件）之外，一切都很好。id 也被复制了，但是当我在新元素上触发 change() 时，我收到以下 .js 错误，即使我重新添加更改处理程序，它也会失败，尽管如果我调用 change() a第二次，它有什么想法吗？：

SCRIPT438：对象不支持属性或方法“应用”jquery-1.7.2.min.js，第 3 行字符 3463

```
 var $to = $("#Someelement");
    var attributes = $("#AssignmentStatusIdNew").prop("attributes");
    $("#AssignmentStatusIdNew").remove();

     // loop through <select> attributes and apply them to $to...
                $.each(attributes, function () {
                    if (window.jqueryMinorVersion >= 6) {
                        $to.prop(this.name, this.value);
                    } else {
                        $to.attr(this.name, this.value);
                    }
                });

$("#AssignmentStatusIdNew").change(AssignmentStatusId_ValueUpdated);
    $("#AssignmentStatusIdNew").change(); 
```

# linker - Windows 8 RT 链接器错误

> ID：12584950
> 
> 赞同：0
> 
> 时间：2012-09-25T14:18:40.033
> 
> 标签：linker, windows-runtime, arm, directx

我正在尝试为 ARM/Windows RT 编译此[示例](http://code.msdn.microsoft.com/windowsapps/Direct3D-HLSL-fractal-e3fb86d9)，并且我的编译器不断收到以下错误：

```
1>LINK : fatal error LNK1104: cannot open file 'vccorlibd.lib' 
```

我在我的电脑上进行了搜索，发现这个库确实存在，它位于“C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\lib”中。所以我不确定出了什么问题。任何事情都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:35:10.533

应用程序的路径包含空格。将 lib 的路径放在双引号中，根据[为什么在 Visual Studio 中编译 C++ 项目时发生致命错误“LNK1104：无法打开文件'C:\Program.obj'”？](https://stackoverflow.com/questions/133698/why-does-fatal-error-lnk1104-cannot-open-file-c-program-obj-occur-when-i-c).

如果失败，请确保您提到的目录在 lib 搜索目录列表中。有关详细信息，请参阅[链接：致命错误 LNK1104：无法打开文件“libboost_system-vc90-mt-1_45.lib”](https://stackoverflow.com/questions/6548883/link-fatal-error-lnk1104-cannot-open-file-libboost-system-vc90-mt-1-45-lib)。

# windows-xp - 重新启动 Windows 后 OracleDBConsole 无法启动

> ID：12584951
> 
> 赞同：0
> 
> 时间：2012-09-25T14:18:47.477
> 
> 标签：windows-xp, oracle11g

我已经**`Oracle11Gr2`**在虚拟机上安装**`WindowsXP Sp3`**了**`VMWare Player`**.

安装 Oracle 后，控制台服务`OracleDBConsole`启动，我可以访问 em 控制台`https://testlaptop:1158/em/`。

但是在重新启动虚拟机后，服务无法启动，当我使用它启动它时， `emctl start dbconsole`出现错误，服务无法启动。

当我重新配置数据库时

```
emca -deconfig dbcontrol db -repos drop
SET ORACLE_HOSTNAME = testlaptop 
SET ORACLE_UNQNAME=testdb
emca -config dbcontrol db -repos recreate 
```

服务启动，但是当我重新启动虚拟机时，它无法再次启动，我得到了同样的错误。

请帮助我，我希望问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:35:00.480

解决方法很简单，你必须**拔掉网线**并启动控制台服务（每次要启动控制台时都必须这样做）

```
emctl start dbconsole 
```

如果控制台仍未启动，则重新创建它：

**1.**启动监听器

```
lsnrctl start 
```

**2.**移除控制台

```
cd %ORACLE_HOME%/ora11gr2/bin
emca -deconfig dbcontrol db -repos drop 
```

注意：*可能需要 3000 万，请耐心等待*

**3.**重新创建控制台

```
set oracle_unqname = TESTDB
set ORACLE_HOSTNAME = MYPC
emca -config dbcontrol db -repos recreate 
```

*请耐心等待，它也可能需要很长时间。*

**4.**现在拔下网线并启动控制台服务，它应该启动

如果它没有或它启动但您无法登录，那么

**一个。**验证 windows 时区是否与中定义的 oracle 时区相同

```
%ORACLE_HOME%\ora11gr2\MYPC_testdb\sysman\config\emd.properties  
at line **agentTZRegion=GMT** 
```

要知道要使用的女巫时区代码，请运行以下命令：

```
SELECT * FROM v$timezone_names where upper(TZNAME) like '%MAURITANIA%'; 
```

用您的国家替换毛里塔尼亚。

**湾。**启用系统帐户

```
alter user system account unlock; 
```

**C。**拔下网线，重新启动控制台服务。

我希望这会有所帮助，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-24T10:48:28.893

我在`VM`W2003 服务器上遇到了同样的问题，并通过编辑`C:\windows\system32\drivers\etc\hosts`文件解决了它

*   添加`hostname`到自己的`IP`地址。就我而言：

    ```
    192.168.5.139 服务器
    ```

*   保存这个文件（注意，只读文件，先给`NTFS`权限）
*   重新启动服务器。

# java - Windows Azure 虚拟机实例。Java控制

> ID：12584959
> 
> 赞同：3
> 
> 时间：2012-09-25T14:19:09.367
> 
> 标签：java, azure

是否有`azure-sdk-for-java`VM 远程控制方法（*启动、停止*）？我可以使用这个 SDK控制**存储**和**容器。***`RoleEnvironment`但是 VM 实例维护只能从 VM（类*）上部署的应用程序启用。

在这种情况下，只能使用[**REST API**](http://msdn.microsoft.com/en-us/library/jj157206.aspx)来**远程**控制 VM 实例。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:31:38.343

你是对的 - 根据[Azure javadocs ，目前除了](http://dl.windowsazure.com/javadoc/)**REST API**之外没有任何内容。我希望 java-SDK 最终支持托管包装器，但今天还没有。

# php - 我需要帮助处理变量

> ID：12584961
> 
> 赞同：0
> 
> 时间：2012-09-25T14:19:13.067
> 
> 标签：php, string, variables, string-parsing

我对我的英语感到很抱歉，我保证会提高它。

我正在使用 PHP，我有这个： $var = 'word1-word2-word3-34567';

我只想获取最后一个破折号右侧的任何内容，在本例中为“34567”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:23:46.577

让我们猜测它是php：

```
array_pop(explode('-',$var)) 
```

或者

```
substr($var,strrpos($var,'-')+1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:28:59.733

这应该工作

```
$words = explode('-', 'word1-word2-word3-34567');
$last_word = $words[count($words) - 1]; 
```

# android - 以编程方式设置活动的默认浏览器

> ID：12584965
> 
> 赞同：1
> 
> 时间：2012-09-25T14:19:23.123
> 
> 标签：android, web

我正在开发一个 android 应用程序以及其他功能，我需要在外部网络浏览器中打开一些 url。我可以以编程方式为此设置默认应用程序，因此用户将无法从可用浏览器列表中进行选择吗？我的意思是，我只想为我的应用程序设置默认浏览器，而不是为整个操作系统设置默认浏览器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:28:17.990

是的，为此您可以强制您的应用程序始终只打开本机 android 浏览器。为此，您必须确定应用程序的启动`Activity`，`Browser`如下所示：

```
Intent intent = new Intent();
intent.setComponent(new ComponentName("com.google.android.browser","com.google.android.browser.BrowserActivity"));
intent.setAction("android.intent.action.VIEW");
intent.addCategory("android.intent.category.BROWSABLE");
Uri uri = Uri.parse(url);
intent.setData(uri);
try
{
    startActivity(intent);
}
catch (Exception e)
{
   e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:23:21.640

您可以将 .setPackage 用于意图： http: [//developer.android.com/reference/android/content/Intent.html#setPackage](http://developer.android.com/reference/android/content/Intent.html#setPackage(java.lang.String) (java.lang.String )。使用浏览器的包名（在其清单、**包**属性中定义）调用它。

我正在使用类似的东西来启动 Google+ 应用程序以共享字符串：

```
Intent shareIntent = ShareCompat.IntentBuilder.from(getActivity())
           .setText("Dummy string to share")
           .setType("text/plain")
           .getIntent()
           .setPackage("com.google.android.apps.plus");

        startActivity(shareIntent); 
```

在我的示例中，“com.google.android.apps.plus”是 Google+ 应用程序的包名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:52:13.010

Browser 类的 Sharedpreference 是 "MODE_private" ，所以我们不能直接以编程方式访问 home_page 更改步骤，

如果我们想做，我们应该通过 Browser.java 开源代码来做，我们应该从那里得到一些想法。

# asp.net-mvc - 在哪里将 DTO 绑定到域模型中

> ID：12584966
> 
> 赞同：2
> 
> 时间：2012-09-25T14:19:30.530
> 
> 标签：asp.net-mvc, architecture, automapper, dto, domain-model

我开始使用 AutoMapper 并且出现了一些疑问。将 dto 映射到域模型的正确方法在哪里？我正在这样做：

DTO：

```
public class PersonInsert
{
    [Required]
    public string Name { get; set; }
    public string LastName { get; set; }
} 
```

行动：

```
[HttpPost]
public ActionResult Insert(PersonInsert personInsert)
{
    if (ModelState.IsValid)
    {
        new PersonService().Insert(personInsert);

        return RedirectToAction("Insert");
    }

    return View("Insert");
} 
```

服务：

```
public class PersonService
{
    public int Insert(PersonInsert personInsert)
    {
        var person = Mapper.Map<PersonInsert, Person>(personInsert);

        return new PersonRepository().Insert(person);
    }
} 
```

存储库：

```
 public class PersonRepository
    {
        internal int Insert(Person person)
        {
            _db.Person.Add(person);
            _db.SaveChanges();

            return person.Id;
        }
     } 
```

那么，这是正确的吗？我的服务应该知道域吗？还是我应该只在存储库中进行绑定？在 DTO 中使用 [Required] 是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:42:41.347

我几乎永远不会从 DTO 创建实体 - 我将在下面解释原因。我会使用请求对象来允许工厂方法构建实体：

要求：

```
public class InsertPersonRequest
{ 
    [Required] 
    public string Name { get; set; } 
    public string LastName { get; set; } 
} 
```

行动：

```
[HttpPost] 
public ActionResult Insert(InsertPersonViewModel viewModel) 
{ 
    if (ModelState.IsValid) 
    { 
        InsertPersonRequest request = InsertPersonViewModelMapper.CreateRequestFrom(viewModel);
        new PersonService().Insert(request ); 
        return RedirectToAction("Insert"); 
    } 

    return View("Insert"); 
} 
```

服务：

```
public class PersonService 
{ 
    public int Insert(InsertPersonRequest request) 
    { 
        var person = Person.Create(request.name, request.LastName);          
        return new PersonRepository().Insert(person); 
    } 
} 
```

存储库保持不变。

这样，创建 Person 的所有逻辑都位于 person 的 Factory 方法中，因此业务逻辑被封装在域派生字段、默认字段等中。

**您正在做的问题是必须在 UI 中创建 DTO，然后将所有字段映射到实体 - 这是业务逻辑渗入服务层、UI 或任何地方的可靠方式不应该的。**

请再读一遍——这是我一次又一次看到的一个非常严重的错误。

但是，我会在服务层中使用 AutoMapper 来返回 DTO：

服务：

```
public class PersonService 
{ 
    public PersonDto GetById(intid) 
    { 
        var person = new PersonRepository().GetById(id);
        var personDto = Mapper.Map<Person, PersonDto>(person); 
        return personDto
    } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:23:50.143

> 这个对吗？

我个人认为让您的服务进行映射没有任何问题

> `[Required]`在DTO中使用是否正确

不，DTO 应该没有任何业务逻辑。它们应该纯粹用于跨应用程序的不同层/层传输数据。

DataAnnotations 通常用于客户端/服务器端验证，因此，我会在您的模型中添加另一个分离并为您的操作`ViewModels`引入一个例如`ViewModel``Insert`

```
public class PersonViewModel    
{
    [Required]
    public string Name { get; set; }
    public string LastName { get; set; }
}

public class PersonDto
{
    public string Name { get; set; }
    public string LastName { get; set; }
} 
```

行动：

```
[HttpPost]
public ActionResult Insert(PersonViewModel personViewModel)
{
     if (ModelState.IsValid)
     {
         var personDto = Mapper.Map<PersonViewModel, PersonDto>(personViewModel);
         new PersonService().Insert(personDto);
         ...
      }
      ...
     }
} 
```

服务：

```
public class PersonService
{
    public int Insert(PersonDto personDto)
    {
        var person = Mapper.Map<PersonDto, Person>(personDto);

        return new PersonRepository().Insert(person);
    }
} 
```

在这种情况下，它可能看起来有点矫枉过正（考虑到唯一的区别是`[Required]`属性）。但是，在典型的 MVC 应用程序中，您可能希望确保您`ViewModel`的 s 和您的业务模型之间的清晰分离。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:27:56.850

在 ASP.NET MVC 中，DTO 的典型用途是作为视图模型的一部分。Viewmodel 是一个类，它将一个到多个 DTO 组合成一个类，为视图呈现和将值发送回服务器而量身定制。

您所做的是正确的，没有问题，但是数据注释应该驻留在视图模型上，而不是 DTO 上。除非您将 DTO 称为视图模型，否则就可以了。

请阅读以下有关 ASP.NET MVC 世界中的模型（域模型）与 ViewModel 的帖子：

*   [ASP.NET MVC 模型与 ViewModel](https://stackoverflow.com/questions/4061440/asp-net-mvc-model-vs-viewmodel)
*   [对模型与视图模型感到困惑](https://stackoverflow.com/questions/6185508/confused-with-model-vs-viewmodel)

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:44:05.470

我会说您`PersonService`可以被视为您的体系结构的域层（或直接位于域之上的应用程序层）的一部分，并且控制器和 DTO 位于其之上的一层。这意味着您不应在`PersonService`签名中引用 DTO，而应`Person`在此处使用域类。所以映射代码应该进入控制器。这可确保您的域逻辑不受 Web 服务合同更改的影响，这实际上可能只是使用您的`PersonService`. 我还将为您的存储库引入一个接口，该接口被注入到您的存储库中，`PersonService`因为`PersonService`再次不需要了解具体的数据访问实现。

至于`[Required]`属性，我认为在 DTO 上使用它没有问题，因为它只是说明了您的 Web 服务方法的数据合同。任何调用您的 Web 服务的人都应遵守此数据合同。当然，这个要求通常也会反映在您的域代码中的某个地方，可能是通过抛出异常等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-05T14:23:23.420

我认为在 DTO 上添加注释很好，例如 [Required]、MaxLength、Range 等。

您的 DTO 可以来自任何（可能不受信任的）来源（不仅是您的网站，还可以来自另一个端点、WCF 服务等）。所有请求都将集中到您的服务/业务层，因此您需要在执行业务逻辑之前验证输入（简单的警卫检查）。在 DTO 上添加注释只是描述了执行手头任务所需的输入。传递带有注释的对象不会执行验证。

但是，我相信您应该在服务/业务层中验证 DTO 信息是否正确（注释是检查这一点的好方法）。

只是我对这种情况的看法:)

# jquery - 带有事件的 UI 日历仅在 ie 8 及更低版本中不起作用

> ID：12584970
> 
> 赞同：3
> 
> 时间：2012-09-25T14:19:36.523
> 
> 标签：jquery, internet-explorer, events, calendar

我在 pastebin 上有这段代码，由于开关的原因，它的代码有点长，但要点是：当我在日历上单击下一步时，它会设置一个变量，附加缓存的内容并将所有其他内容隐藏在带有变量的开关上。（这不仅发生在 IE8 较低版本上 - 它不会更新右侧的内容，只会更改日历月份。）

它在每个更新的主要浏览器中都运行良好，但我真的需要它也可以在 IE 8 上运行，但我只是看不到这个错误是什么，而且由于我使用 IETester，我无法自己调试它。

这是代码： http: [//pastebin.com/aA5Scfpb](http://pastebin.com/aA5Scfpb)

如果有人可以帮助我，我会非常高兴。在此先感谢佩德罗·恩里克

编辑：抱歉忘记添加链接以查看它的实际效果 - [http://www.ccbeuc.com.br/index.php/site/calendario](http://www.ccbeuc.com.br/index.php/site/calendario)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:56:50.440

我在 IE8 和 IE7 上试过，没问题。您确定打开了 Javascript 吗？我们说的是左侧的日历，对吧？

**编辑：**

你确定不只是IETester？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:27:04.180

完毕。

尝试将事件附加到日历的任何按钮时我错了。我浏览了 jQuery UI Manual 并找到了一个名为 onChangeMonthYear 的事件。

我更正了所有内容并构建了一个新功能。有用！

这是最终代码： http: [//pastebin.com/skv53tge](http://pastebin.com/skv53tge)

谢谢大家的帮助。

# jsp - JSF 是否重新渲染禁用的表？

> ID：12584979
> 
> 赞同：-2
> 
> 时间：2012-09-25T14:19:58.833
> 
> 标签：jsp, ajax4jsf

有人可以解释一下 JSF 是否可以在单击复选框时重新呈现禁用的数据表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:13:35.180

您可以使用 ajax 侦听器来做到这一点

您需要一个布尔值来了解表是否已禁用（请参阅托管 bean 中的布尔禁用）

next 是一种在调用时将更改此布尔值的方法（请参阅xhtml 中的`selectBooleanCheckbox`和）`rendered="#{tableController.disabled}"`

这可以应用于任何布尔值，如禁用/渲染等。

* * *

源代码（xhtml）：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body>

    <h:form>
        <h:dataTable id="table" value="#{tableController.products}" var="item" border="1" rendered="#{tableController.disabled}"
                     headerClass="table-header"
                     styleClass="table-d"
                     rowClasses="table-row">

            <h:column>
                <f:facet name="header">
                    ID
                </f:facet>
                <h:outputText value="#{item.id}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    Name
                </f:facet>
                <h:outputText value="#{item.name}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    Price
                </f:facet>
                <h:outputText value="#{item.price}"/>
            </h:column>

        </h:dataTable>

        <h:selectBooleanCheckbox value="Id">
            <f:ajax render="@form" listener="#{tableController.enableDisable()}"/>
        </h:selectBooleanCheckbox>
    </h:form>
</h:body>
</html> 
```

托管豆：

```
import java.util.ArrayList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.model.DataModel;
import javax.faces.model.ListDataModel;

@ManagedBean
@SessionScoped
public class TableController {

private boolean disabled;
private DataModel products;

public TableController() {

    List list = new ArrayList<Product>();

    Product p1 = new Product(1, "Z", 1.1);
    Product p2 = new Product(2, "F", 2.5);
    Product p3 = new Product(3, "A", 0.9);

    list.add(p1);
    list.add(p2);
    list.add(p3);

    products = new ListDataModel<Product>(list);
}

 public void enableDisable(){
        disabled = !disabled;  
}

public boolean isDisabled() {
    return disabled;
}

public void setDisabled(boolean disabled) {
    this.disabled = disabled;
}

public DataModel getProducts() {
    return products;
}

public void setProducts(DataModel products) {
    this.products = products;
}    
} 
```

产品类别：

```
public class Product {

private int id;
private String name;
private double price;

public Product(int id, String name, double price){

    this.id = id;
    this.name = name;
    this.price = price;

}

public void setId(int id) {
    this.id = id;
}

public void setName(String name) {
    this.name = name;
}

public void setPrice(double price) {
    this.price = price;
}

public int getId() {
    return id;
}

public double getPrice() {
    return price;
}

public String getName() {
    return name;
}

} 
```

# iphone - UITextView 子视图 UIImageView 隐藏输入的文本并滚动文本 iPhone？

> ID：12584983
> 
> 赞同：3
> 
> 时间：2012-09-25T14:20:19.543
> 
> 标签：iphone, ios, uiimageview, uitextview, subview

我`UITextView`在我的 iPhone 应用程序中有。在`UITextView i have added UIImageView as subview`. 当输入的文本到达`final height the texts are scrolling to top`. 取而代之的是`UIImageView (with image) also scrolling top`. 我该如何处理以停止图像滚动并允许文本滚动？这是我的代码供您参考，

```
 messageTextView = [[UITextView alloc] initWithFrame:CGRectMake(35, 5, 210, 30)];
    messageTextView.delegate = self;
    messageTextView.backgroundColor = [UIColor clearColor];
    messageTextView.clipsToBounds = YES;  
    messageTextView.font = [UIFont fontWithName:@"Helvetica" size:14];
    messageTextView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

    textViewImageView = [[UIImageView alloc]initWithFrame: CGRectMake(0, 0, 210, 30)];
    textViewImageView.image = [UIImage imageNamed: @"textbg.png"];
    textViewImageView.contentMode    = UIViewContentModeScaleToFill;
    textViewImageView.contentStretch = CGRectMake(0.5, 0.5, 0, 0);  
    [messageTextView addSubview: textViewImageView];

    [messageTextView sendSubviewToBack: textViewImageView];
    [messageTextView addSubview:textViewLabel]; 
```

谁能帮我解决这个问题？提前致谢。期待您的回复。

![在此处输入图像描述](../Images/c5daf7ea866a26492b2840f8980f4748.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:31:30.477

您是否考虑过将 imageView 放在 textView 后面？或者有什么理由禁止这样的布局？

类似的东西：

```
UITextView *messageTextView = [[UITextView alloc] initWithFrame:CGRectMake(35, 5, 210, 30)];
// ...
messageTextView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
[self.view addSubview:messageTextView];

UIImageView *textViewImageView = [[UIImageView alloc] initWithFrame:CGRectMake(35, 5, 210, 30)];
// ...
textViewImageView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
[self.view addSubview:textViewImageView];

[self.view sendSubviewToBack:textViewImageView]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:42:15.993

也许这会有所帮助。当图像到达边界时，使用滚动视图委托重新定位图像。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (scrollView.contentOffset.y >= scrollView.contentSize.height - scrollView.frame.size.height) {

        CGRect imageFrame = textViewImageView.frame;
        imageFrame.origin.y = scrollView.contentOffset.y - (scrollView.contentSize.height - scrollView.frame.size.height);
        textViewImageView.frame = imageFrame;

    }       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:31:01.573

**这应该有效：**

```
[yourTxtView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"your image.png"]]]; 
```

# c# - 如果用户在 C# 中没有正确访问页面，如何重定向回来？

> ID：12584985
> 
> 赞同：0
> 
> 时间：2012-09-25T14:20:22.287
> 
> 标签：c#, .net, redirect

我有一个 videoWall 和一个 videoWallDetail 页面。目前，这是我在 videoWallDetail 页面上的内容：

```
 if (String.IsNullOrEmpty(Request["video_id"])) Response.Redirect("videoWall.aspx"); 
```

用户不应该以这种方式进入详情页面，但如果他们知道视频 id，有些人可能会通过在 url 中输入直接进入详情页面，因此如果用户在无效的地址栏。我的问题是无论如何我如何重定向回 videoWall 页面。如果用户没有单击链接以访问特定视频的详细信息页面，则无论他们是否在地址栏中输入有效的 ID，他们都会被退回。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:30:04.260

您可以在页面上添加一个`Session`以`videoWall.aspx`验证它们来自该页面：

**视频墙.aspx**

```
Session["fromVideoWall"] = true;
Response.Redirect("videoWallDetail.aspx?video_id=" + videoId.ToString()); 
```

**videoWallDetail.aspx**

```
if (Session["fromVideoWall"] != null && String.IsNullOrEmpty(Request["video_id"])) Response.Redirect("videoWall.aspx");
Session["fromVideoWall"] = null; //Setting the value back to null ensures the next access must have come from VideoWall.aspx too 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:28:09.260

1 你可以使用`PostBackUrl`方法

并在目标页面访问`PreviousPage`并获取数据

链接：[http ://asp-net-example.blogspot.fr/2008/10/postbackurl-example-how-to-submit-page.html](http://asp-net-example.blogspot.fr/2008/10/postbackurl-example-how-to-submit-page.html)

2 你也可以重写你的网址`HttpModule`

链接：http: [//msdn.microsoft.com/en-us/library/ms972974.aspx](http://msdn.microsoft.com/en-us/library/ms972974.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:49:00.817

如果不允许我在 videoWallDetail 页面的查询字符串中输入已知 ID，那么您不应将其公开为查询字符串参数。如果我想为该页面添加书签，或通过电子邮件向某人发送 URL 以供他们直接访问，该怎么办？那些是不允许的？

如果是这样，那么您需要删除该查询字符串参数。URL 栏应该是用户绕过的完全合法的方式。如果他们可以输入 URL 以访问他们不应该没有 400 或 500 错误的页面，那么这是您作为开发人员的错。

切换到使用会话变量或表单帖子来确认它们来自正确的位置，如果它们真的不应该出现在页面 B 上而不是来自页面 A。

# c# - 处理 Json 时如何修复循环引用错误

> ID：12584986
> 
> 赞同：23
> 
> 时间：2012-09-25T14:20:23.463
> 
> 标签：c#, json, asp.net-mvc-3, extjs, circular-reference

这个问题是我在此处[获取数据到 Extjs GridPanel的原始帖子的一部分](https://stackoverflow.com/questions/12568363/how-to-get-data-into-an-extjs-grid-panel-using-json-and-sql)

下面是我的控制器，它从 sql db 读取数据，然后我尝试将结果编码为 JSON 并将数据发送回我的 gridview.js

```
public JsonResult writeRecord()
//public string writeRecord()
    {

        Response.Write("Survey Completed!");
        SqlConnection conn = DBTools.GetDBConnection("ApplicationServices2");

        string sqlquery = "SELECT Q1, Q2, Q3, Q4, Improvements, Comments FROM myTable";
        SqlDataAdapter cmd = new SqlDataAdapter(sqlquery, conn);

        DataSet myData = new DataSet();
        cmd.Fill(myData, "myTable");

        conn.Open();
        conn.Close();

        return Json(myData, JsonRequestBehavior.AllowGet);
        //return myData.GetXml();

    } 
```

这就是问题所在，使用上面的代码，我在执行 gridview.js 时得到了没有数据的 gridview 表，但是如果我像这样直接访问控制器的方法

```
http://localhost:55099/GridView/writeRecord 
```

我得到这个错误，

> *序列化“System.Globalization.CultureInfo”类型的对象时检测到循环引用。* **说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。 **异常详细信息：** System.InvalidOperationException：在序列化“System.Globalization.CultureInfo”类型的对象时检测到循环引用。

有人可以帮忙吗..

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-25T14:37:37.610

我使用以下工具对 JSON 进行序列化和反序列化：

[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

它非常易于使用且非常轻巧。

在序列化时，我们使用这个选项：

```
JsonConvert.SerializeObject(myObject, Formatting.Indented, 
                            new JsonSerializerSettings { 
                                   ReferenceLoopHandling = ReferenceLoopHandling.Ignore 
                            }) 
```

它忽略循环引用。

newtonking 的 json.net 也非常快。

其他选项是使用 DTO 并通过 Diver 提到的 Automapper 映射它们。

编辑：我怀疑你的商店是错误的：

```
var store = Ext.create('Ext.data.JsonStore', {      
        storeId: 'myData',
        reader: new Ext.data.JsonReader({
            root: 'myTable',
            fields: [{ name: 'Q1', type: 'int' },
                     { name: 'Q2', type: 'int' },
                     { name: 'Q3', type: 'int' },
                     { name: 'Q4', type: 'int' },
                     { name: 'Q5', type: 'int' },
                     { name: 'Improvements', type: 'string' },
                     { name: 'Comments', type: 'string'}]
        }),

        proxy: {
             type: 'json',
            url: 'GridView/writeRecord'
        }    
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T14:28:25.157

这是因为 CultureInfo 内部的某些内容对自身（这种类型）有引用，并且在转换为 JSON 的过程中它失败了。为避免这种情况，您应该使用 ViewModels（仅返回客户端所需的信息）。你可以在这里阅读更多 [http://blogs.msdn.com/b/dphill/archive/2009/01/31/the-viewmodel-pattern.aspx](http://blogs.msdn.com/b/dphill/archive/2009/01/31/the-viewmodel-pattern.aspx)

在您的情况下，您应该为您的数据创建 ViewModel，将您的数据转换为这些数据类型并将它们返回转换为 JSON。为了从 Model 转换为 ViewModel 考虑使用 AutoMapper [http://automapper.codeplex.com/](http://automapper.codeplex.com/)或一些类似的工具。

# asp.net - 无法加载文件或程序集“Interop.EDOfficeLib”或其依赖项之一

> ID：12584987
> 
> 赞同：1
> 
> 时间：2012-09-25T14:20:24.833
> 
> 标签：asp.net, iis, iis-7

在 Windows Server 2008 x64 上部署网站时，我遇到了这个问题。我没有任何想法。谁能帮我？

```
Could not load file or assembly 'Interop.EDOfficeLib' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.BadImageFormatException: Could not load file or assembly 'Interop.EDOfficeLib' or one of its dependencies. An attempt was made to load a program with an incorrect format.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Assembly Load Trace: The following information can be helpful to determine why the assembly 'Interop.EDOfficeLib' could not be loaded.

=== Pre-bind state information ===
LOG: User = IIS APPPOOL\DefaultAppPool
LOG: DisplayName = Interop.EDOfficeLib
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: Interop.EDOfficeLib | Domain ID: 2
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///C:/TSDX 3.0.0/WebService/
LOG: Initial PrivatePath = C:\TSDX 3.0.0\WebService\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\TSDX 3.0.0\WebService\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/9d46c957/8adcacab/Interop.EDOfficeLib.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/9d46c957/8adcacab/Interop.EDOfficeLib/Interop.EDOfficeLib.DLL.
LOG: Attempting download of new URL file:///C:/TSDX 3.0.0/WebService/bin/Interop.EDOfficeLib.DLL.
ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated.

Stack Trace: 

[BadImageFormatException: Could not load file or assembly 'Interop.EDOfficeLib' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +567
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +192
   System.Reflection.Assembly.Load(String assemblyString) +35
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +123

[ConfigurationErrorsException: Could not load file or assembly 'Interop.EDOfficeLib' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +11568160
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +485
   System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +79
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +337
   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +280
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +1167

[HttpException (0x80004005): Could not load file or assembly 'Interop.EDOfficeLib' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11700896
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4869125 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:23:48.610

您正在 64 位操作系统上运行为 AnyCPU 编写的应用程序，并且您引用的一个或多个程序集未针对 x64 系统编译/可用。

第一个解决方案是为 x86 平台重新编译您的应用程序。
第二种解决方案是分发特定的 x64 版本的`EDOfficeLib`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:11:28.717

我必须补充一点，另外我的问题可以通过以下方式解决：应该在应用程序池的高级设置面板上设置一个`Enable 32-Bit Applications`参数。`True`（IIS 管理器）。在这种情况下，我不需要重新编译一些东西。也许它对某人有用。

# c++ - 部署一个用VS2010编译的C程序

> ID：12584988
> 
> 赞同：5
> 
> 时间：2012-09-25T14:20:29.333
> 
> 标签：c++, c, visual-studio-2010, visual-c++, windows-mobile

我编译了一个旧的 C++ 程序，它在 VS2010 的调试模式下运行良好，转换为 VC++ 6，但我不知道如何打包或部署应用程序。
VS2010 可能与部署程序根本没有任何关系，但我想我应该提一下。
“release”文件夹不仅包含可执行文件，还包含一些“obj”、“tlog”、“vc100.pdb”、“exe.intermediate.manifest”和“lastbuildstate”。
此应用程序正在安装在 Windows Mobile 操作系统上（希望如此）。它不像将可执行文件复制到设备那么简单吗？
我是否需要创建 cab 文件或 msi，如果需要，如何创建？
我完全不知道在 C# 和 MVC 中被宠坏了太久了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T15:41:44.773

Visual Studio 2010 没有为 Windows Mobile（不是 Windows Phone）构建所需的任何智能设备编译器（托管或本机）。您必须使用 Visual Studio 2008 来构建、部署和/或调试。

**编辑**

FWIW，Studio 2012 将在明年第一季度支持智能设备（Studio 2010 仍不会获得支持）。向后兼容性尚未公布，但您始终可以使用 ARM 编译器为 WinMo 设备进行开发。这里有[一个视频，](http://visualstudiolaunchstaging.social27.com/vs2012vle/Theater?sid=1776)详细介绍了一些功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:44:42.627

你有没有在谷歌上搜索过？虽然我对部署到 Windows 手机一无所知，但快速的谷歌搜索发现了一些点击。

我搜索了“部署 windows phone 应用程序”并找到了一些东西。其中有：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg588378(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg588378(v=vs.92).aspx)

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff928362(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff928362(v=vs.92).aspx)

最后，这个网站之前好像有人问过这个问题。例如：

[你能在你的windows 7手机上安装你自己的应用程序吗](https://stackoverflow.com/questions/4229029/can-you-install-you-own-apps-on-your-windows-7-phone)

# php - Enterprise Architect 8 > 显示类的继承链

> ID：12584991
> 
> 赞同：1
> 
> 时间：2012-09-25T14:20:35.363
> 
> 标签：php, inheritance, uml, class-diagram, enterprise-architect

我已将 PHP 源文件夹导入 Enterprise Architect。现在，我想看看任何特定类的继承链。换句话说，我希望看到一个显示类的所有关系的大图。大多数类位于与父/子类分开的文件夹中。我怎样才能做到这一点..？

这就是我安装 Enterprise Architect 的原因：我对冗长的分支继承链感到困惑。如果这样一个能够识别所有关系的强大工具不能对这些关系进行概述，那将是非常令人失望的。

例如，我可以在一个文件夹的根目录中看到一个类图，说明聚合。但是，列出的聚合类仅是与父类位于同一文件夹中的类。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T03:51:46.697

这个答案适用于 EA 9.3。我没有旧的 EA 8，但 EA 非常向后兼容，所以无论如何你都应该升级。

在 EA 中有几种方法可以遵循继承链。

**方法1**：将类添加到同一个图表中。

在包含继承层次结构的根类的图表中，右键单击根类并选择添加 - 相关元素。在“插入相关元素”对话框中，选择所需的链长度（“级别”），最多为 5。指定“链接类型”泛化。您可以保留其他选项，或者如果您愿意，可以随意使用它们。

这将导致 EA 以最多 5 个步骤/级别将这些类添加到从根类继承的图表中。您不必从根类开始；对话框中的“链接方向”选项控制是否应在一个或两个方向上遵循关系。

您可以使用相同的功能添加通过其他关系相关的类，例如聚合。

**方法 2**：使用 Traceability 窗口。

在主菜单中，选择查看 - 可追溯性。这将打开 Traceability 窗口，这是一个树视图，顶部是当前选定的元素，以及层次结构中所有相关元素的节点。

选择根类和 violà，它的所有继承类在 Traceability 窗口中都显示为子节点，您可以依次展开它们以进一步跟踪链。

方法 1 将信息放在图表中，保存并需要更新。方法 2 是动态的，当您需要检查特定的关系链时更有用。

如果底层模型发生更改，图表中的关系会自动更新，因此如果您更改代码并重新导入它，这将反映在图表中。为了安全起见，请始终在与源包不同的包中使用手动创建的图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:00:09.360

不确定是否存在现有解决方案，但您可以使用`ReflectionClass`Google Graph轻松实现

例子

```
class A {
}
class B extends A {
}
class C extends B {
}
class D extends C {
}
class E extends D {
}
class F extends E {
}

function getPath($className) {
    $class = new ReflectionClass($className);
    $name = $class->getParentClass();
    if ($name) {
        echo $class->getName(), " extends ";
        getPath($name->getName());
    } else {
        echo $class->getName();
    }
}

getPath("C");
getPath("F"); 
```

输出

```
C extends B extends A
F extends E extends D extends C extends B extends A 
```

# java - 如何在 Java 中获取当前服务器时间？

> ID：12584992
> 
> 赞同：4
> 
> 时间：2012-09-25T14:20:37.007
> 
> 标签：java, time

如何在 Java 中获取当前服务器的时间？我试过`System.currentTimeMills()`了，但它返回的是客户端时间而不是服务器时间。我想以毫秒为单位获得“服务器”的时间。

我在网上搜索，但我没有得到。所有代码都从`1970`. 我想要的是例如：当前服务器时间`9/25/2012:10:19AM`以毫秒为单位。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T14:24:30.473

`System.currentTimeMillis()`返回自 1970 年以来的毫秒数。

如果您在服务器上运行它，您将获得服务器时间。如果您在客户端（例如 Applet、独立桌面应用程序等）上运行它，您将获得客户端时间。要获取客户端上的服务器日期，请设置一个调用，以将格式化字符串中的服务器时间返回给客户端。

如果您想以某种方式格式化日期，首先创建一个`Date()`对象，然后使用`SimpleDateFormat`

```
Date d1 = new Date();
SimpleDateFormat df = new SimpleDateFormat("MM/dd/YYYY HH:mm a");
String formattedDate = df.format(d1); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T14:24:57.990

如果您希望您的客户端获取服务器的时间，您必须向服务器发出请求并让服务器在响应中发回其当前时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T14:43:21.283

如果您希望以毫秒为单位从服务器端返回当前时间 ( `System.currentTimeMillis()`)，则需要在格式化/转换值时使用服务器的时区。

从 Java 8 开始，我们可以使用`LocalTime localTime = LocalTime.now();`它来获取当前系统时间。

此外，如果您知道服务器时区，则可以使用：

```
LocalTime localTime = LocalTime.now(ZoneId.of("GMT-06:00")); 
```

这里`"GMT-06:00"`表示服务器时区，表示为与 GMT 的偏移量。您还可以使用区域名称`"Europe/London"`，例如 等。在[Java™ Platform, Standard Edition 8 API Specification](https://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html#of-java.lang.String-)中，您可以找到更多详细信息。

但请**注意**，使用时区方法只会在服务器时区中表示客户端时间。如果客户端和服务器时钟未正确同步，您将无法获得接近服务器上显示的时间。但是，如果时间正确同步，使用[NTP](https://en.wikipedia.org/wiki/Network_Time_Protocol)客户端，并且您不需要服务器报告的确切时间（例如，仅用于演示），此方法将消除服务器调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-02T14:35:09.903

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-04T05:28:05.693

服务器程序

```
import java.io.*;

import java.net.*;

import java.util.*;

class dateserver

{

public static void main(String args[])

{

ServerSocket ss;

Socket s;

PrintStream ps;

DataInputStream dis;

String inet;

try

{

ss=new ServerSocket(8020);

while(true)

{

s=ss.accept();

ps=new PrintStream(s.getOutputStream());

Date d=new Date();

ps.println(d);

ps.close();

}

}

catch(IOException e)

{

System.out.println("The exception is: "+e);

}   }   } 
```

客户计划

```
import java.io.*;

import java.net.*;

class dateclient

{

public static void main(String args[])

{

Socket soc;

DataInputStream dis;

String sdate;

PrintStream ps;

    try

    {

    InetAddress ia=InetAddress.getLocalHost();

    soc=new Socket(ia,8020);

    dis=new DataInputStream(soc.getInputStream());

    sdate=dis.readLine();

    System.out.println("The data in the server is: "+sdate);

    }

    catch(IOException e)

    {

    System.out.println("The exception is: "+e);

    }

} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-05T17:25:43.957

试试这个：

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy MM/dd/HH:mm");

    String cureentdate = sdf.format(new java.util.Date()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-06T07:31:27.227

如果你想从你的服务器获取时间戳，你可以使用

`new Timestamp(new Date().getTime());`

# python - 在 Python 中求解三个变量丢番图方程

> ID：12584993
> 
> 赞同：1
> 
> 时间：2012-09-25T14:20:40.237
> 
> 标签：python, algorithm, diophantine

我是 Python 的初学者，并尝试使用[MIT 6.00](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-00-introduction-to-computer-science-and-programming-fall-2008/assignments/)，提供的页面是作业页面。

我在[作业 2](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-00-introduction-to-computer-science-and-programming-fall-2008/assignments/pset2.pdf)中，我必须找到丢番图方程的解，我的数学真的不是很好，所以我试图尽可能多地理解它的作用，并想出一个解决方案。

这就是我要做的：

```
def test(x):
    for a in range(1,150):
        for b in range(1,150):
            for c in range(1,150):
                y = 6*a+9*b+20*c
                if y == x:
                    print "this --> " , a, b, c
                    break
                else : ##this to see how close i was to the number
                    if y - x < 3: 
                        print a, b, c , y 
```

作业指出有 的解决方案`50, 51, 52, 53, 54, and 55`，但不幸的是，脚本只能获得 的解决方案`50, 53 and 55`。

如果有人解释我的代码有什么问题，或者我根本不理解丢番图方程，我将非常感激，请告诉我这是怎么回事以及如何找到解决方案，因为我无法得到作业解释进入我的脑海。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:32:55.503

作业说：

> 要确定是否有可能恰好购买 n 个 McNuggets，必须求解丢番图方程：找到a、b 和 c 的**非负**整数值，使得 6a + 9b + 20c = n。

看来您必须在函数范围内包含零。这样，您就可以找到所需的所有数字的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:27:27.290

一个解决方案

```
6*a+9*b+20*c = 51 
```

对于整数`a`, `b`,`c`必须至少有一个整数 0 或负数。一些解决方案是

```
6*7 + 9*1 + 20*0 = 51
6*0 + 9*(-1) + 20*3 = 51 
```

根据分配中的约束，您需要在可能的系数中包含 0 甚至负数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T14:27:17.070

51 的解决方案是`5*9 + 1*6`。

提示：在哪里`20`？这对它的系数意味着什么？

54 的解决方案是`3*20 + (-1)*6`。剩下的你自己想办法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T07:04:56.713

首先，您可以有效地利用边界分析。给定

```
6a + 9b + 20c = n
0 <= a
0 <= b
0 <= c 
```

我们可以系统地将成对的 {a, b, c} 设置为 0，以推断剩余变量的上限。这给了我们

```
a <= floor(n / 6)
b <= floor(n / 9)
c <= floor(n / 20) 
```

此外，如果您选择一种策略（例如，分配 c 然后 b 然后 a），您可以进一步收紧上限，例如：

```
b <= floor((n - 20c) / 9) 
```

此外，要分配的最后一个变量必须是其他变量的函数：您不需要搜索它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-13T11:36:20.527

您可以将 a、b、c 的范围从 0 到 150 开始。

实际上，即使我是初学者，也只是从 MIt 6.00 开始。在阅读他们的问题时，我认为 150 是无法接受的最大数量的限制。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-09T01:54:09.530

这是 Perl 中的一个解决方案。而是使用正则表达式来破解。

按照这篇博文使用正则表达式求解代数方程[。](http://blog.stevenlevithan.com/archives/algebra-with-regexes)

我们可以将以下脚本用于 3x + 2y + 5z = 40

```
#!/usr/bin/perl
$_ = 'o' x 40;
$a = 'o' x 3;
$b = 'o' x 2;
$c = 'o' x 5;
$_ =~ /^((?:$a)+)((?:$b)+)((?:$c)+)$/;
print "x = ", length($1)/length($a), "\n";
print "y = ", length($2)/length($b), "\n";
print "z = ", length($3)/length($c), "\n"; 
```

输出：x=11，y = 1，z = 1

著名的[最古老的钢琴](http://www.perlmonks.org/?node_id=796576)拼图最终变成了一个 3 变量方程

此方法适用于变量实际为正且常数为正的[条件。](http://www.nntp.perl.org/group/perl.perl5.porters/2000/06/msg13917.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-04T03:45:43.357

检查这个我改编自你的。它似乎解决了你的问题：

```
variables=range(0,10)
exams=range(51,56)
for total in exams:
    for a in variables:
        for b in variables:
            for c in variables:
                if total==4*a+6*b+20*c:
                    print a, 'four pieces', b, 'six pieces','and', c ,'twenty pieces', 'for a total of', total 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-25T13:56:56.310

break 函数只会跳出最近的循环。下面的代码使用一个指标来打破每个循环。

```
 n = 1     # n starting from 1
    count = 0 # Count + 1 everytime we find a possible value. 
              # Reset = 0 after a non-possible value. 
    notPossibleValue = ()
    while True:
        ind = 0 # become 1 if int solutions were found
        for c in range (0,n/20+1):
            if ind == 1: break 
            for b in range (0,n/9+1):
                if ind == 1: break 
                for a in range (0, n/6+1):
                    if (n-20*c) == (b*9+a*6):
                        count += 1
                        ind = 1                    
                        # print 'n=', n, a,b,c, 'count', count                       
                        break # Break out of "a" loop
        if ind == 0:
            count = 0
            notPossibleValue += (n,)
            # print notPossibleValue, 'count', count
        if count == 6:
            print 'The largest number of McNuggets that cannot be bought in exact quantity is', notPossibleValue[-1]
            break
        n += 1 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-18T16:12:36.747

```
n=1
a=0
b=0
c=0
mcnugget = []
for i in range (n,100):
   for a in range (0,20):
       if  6*a + 9* b +20*c ==i:
           mcnugget.append(i)
           break
       else:
            for b in range (0,12):
                if  6*a + 9* b +20*c ==i:
                    mcnugget.append(i)
                    break
                else:
                    for c in range(0,5):
                        if  6*a + 9* b +20*c ==i:
                            mcnugget.append(i)
                            break
   else:
        if i>8:
            if mcnugget[-1]==mcnugget[-2]+1==mcnugget[-3]+2==mcnugget[-4]+3==mcnugget[-5]+4==mcnugget[-6]+5 and mcnugget[-6]>0 :
                break

mcnugget = set (mcnugget)
mcnugget = list (mcnugget)
count = 0
for z in mcnugget:
   count += 1
   if mcnugget [count]==mcnugget [count-1]+1==mcnugget [count-2]+2==mcnugget [count-3]+3==mcnugget [count-4]+4==mcnugget[count-5]+5:
      biggestN= mcnugget[count-6]
      break
#print (mcnugget)
biggestN = str(biggestN)

print ('Largest number of McNuggets that cannot be bought in exact quantity: <'+ biggestN +'>') 
```

# ruby-on-rails - Apache 基准测试 multipart/form-data

> ID：12584998
> 
> 赞同：1
> 
> 时间：2012-09-25T14:20:55.670
> 
> 标签：ruby-on-rails, performance, benchmarking, apachebench

我在使用 apache 基准发布文件时遇到了一个奇怪的问题。

我需要强调一个处理文件上传的功能。所以，我搜索了一下，发现了一篇描述如何正确构建帖子文件的帖子。它的内容看起来像：

```
--1234567
Content-Disposition: form-data; name="user_id"

3
--1234567
Content-Disposition: form-data; name="file"; filename="cf_login.png"
Content-Type: image/png

[base64 encoded file content]
--1234567-- 
```

ab线是这样的：

```
$ ab -c 1 -n 5 -v 4 -T 'multipart/form-data; boundary=1234567' -p post_file.txt http://localhost:3000/files 
```

当 ab 发出请求时，生成的标头如下：

```
INFO: POST header == 
---
POST /files.json/ HTTP/1.0
Content-length: 229
Content-type: multipart/form-data; boundary=simpleboundary
Host: localhost:3000
User-Agent: ApacheBench/2.3
Accept: */*

---
LOG: header received:
HTTP/1.1 500 Internal Server Error 
Content-Type: text/html; charset=utf-8
Content-Length: 13265
X-Request-Id: 9ad57d19cd71886a1bb817d00fac651b
X-Runtime: 0.015504
Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20)
Date: Tue, 25 Sep 2012 13:54:29 GMT
Connection: close 
```

预期的回报是提高 params.inspect，让我看看数据是否到达另一端。如果我删除边界，我可以看到参数中收到的数据，但这不是我想要的。我想上传文件。

有人有小费吗？我会很感激的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T14:28:47.667

我找到了答案，并决定与你分享。

在对 post 文件进行了一番挣扎之后，我决定创建一个 php 脚本来输出 $_FILES 和 $_REQUEST 变量以查看文件是否正确构建。事实上，apache 完美地接收了文件，我可以看到文件数据和其他请求参数。

Rails 不会出现同样的情况，在阅读了 HTTP 1.1 multipart topic 的文档后，我意识到问题与 post 文件格式有关。

当您构建这种文件时，您需要详细构建它，这意味着在正确的位置包含所有特殊字符，如 \r 和 \n。多**部分现在完全可以使用“\n”**，它需要“dos”行以“\r\n”结尾。

所以正确的帖子文件看起来像这样（\r\n 是为了说明，但应该在那里，你知道吗？）：

```
--boundary_hash\r\n
Content-Disposition: form-data; name="your_form_field";\r\n
Content-Type: text/plain\r\n
\r\n
your form field data\r\n
--boundary_hash\r\n
Content-Disposition: form-data; name="another_field";\r\n
Content-Type: text/plain\r\n
\r\n
another field data\r\n
--boundary_hash\r\n
Content-Disposition: form-data; name="filename"; filename="cf_login.png"\r\n
Content-Type: image/png\r\n
\r\n
base64 file content\r\n
--boundary_hash--\r\n 
```

当您打开此文件时，您实际上会看到：

```
--boundary_hash
Content-Disposition: form-data; name="your_form_field";
Content-Type: text/plain

your form field data
--boundary_hash
Content-Disposition: form-data; name="another_field";
Content-Type: text/plain

another field data
--boundary_hash
Content-Disposition: form-data; name="filename"; filename="cf_login.png"
Content-Type: image/png

base64 file content
--boundary_hash-- 
```

我希望这对你有帮助。

干杯。

# inno-setup - 如何获取当前 InnoSetup 脚本文件的路径？

> ID：12584999
> 
> 赞同：10
> 
> 时间：2012-09-25T14:20:55.963
> 
> 标签：inno-setup

如何获取路径，您当前正在编译的 InnoSetup 脚本文件所在的位置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T15:52:03.690

要获取脚本源路径，请使用预处理器的预定义变量[`SourcePath`](http://www.jrsoftware.org/ispphelp/topic_predefinedvars.htm)。您可以在脚本中将该变量扩展为普通的[`define`](http://www.jrsoftware.org/ispphelp/index.php?topic=define). 如果脚本尚未保存，则返回`My Documents`目录路径。这只是一个无用的测试示例：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

[Code]
procedure InitializeWizard;
begin
  MsgBox(ExpandConstant('{#SourcePath}'), mbInformation, MB_OK);  
end; 
```

不要忘记您必须编译脚本 ( `CTRL + F9`) 不仅要运行 ( `F9`) 来调用预处理器来重建脚本。