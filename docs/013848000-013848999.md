# StackOverflow 问答 13848000-13848999

# ruby - 根据时间而不是 nanoc 中的日期对文章进行排序

> ID：13848001
> 
> 赞同：0
> 
> 时间：2012-12-12T20:25:59.587
> 
> 标签：ruby, nanoc

我是 ruby​​ 和 nanoc 的新手。我正在尝试根据时间对文章进行排序。所以我在我的博客上得到了更准确的结果。

这就是我在我的`sorted_articles_time.rb`文件中使用的`/helpers/`

```
def sorted_articles_time
  articles.sort_by do |a|
    attribute_to_time(a[:time])
  end.reverse
end 
```

但后来我得到了错误

```
NoMethodError: private method `sorted_articles_time' called for #<Nanoc::Site:0x007fd93b0a3f40> 
```

我究竟做错了什么 ？有没有办法覆盖现有的 sorted_articles 方法？

谢谢

更新：我已经在 rake 文件中启动了它。所以我认为我的 rake 文件在这里很好。

```
time1 = Time.new
@time =  time1.inspect 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:34:33.263

你在打电话`@site.sorted_article_times`吗？如果是这样，请离开该`@site`部分。助手旨在作为函数调用，而不是作为`@site`.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-12T21:59:10.313

使用模型中的 scrope。检查此活动的[active_record_querying](http://guides.rubyonrails.org/active_record_querying.html#scopes)这是对您的文章进行排序的最佳位置。

# php - 使用 strpos 进行多个搜索词匹配

> ID：13848002
> 
> 赞同：1
> 
> 时间：2012-12-12T20:26:00.547
> 
> 标签：php, strpos

我想知道是否有人可以帮助解决我似乎无法解决的小问题 - 我的头此刻正在转圈......

好的，我有一个包含大量信息行的 .txt 文件 - 我正在尝试将关键字与这些行匹配并显示一定数量的匹配行。

我将这段脚本放在一起，虽然它可以工作，但如果单词与搜索词的顺序相同，它只会匹配一行。

目前作为一个例子：

搜索词：

红色的帽子

.txt 文件中的行：

这是我的红色帽子
我的帽子是红色的
这顶帽子是绿色
的 这是一条红围巾
你的红帽子很好看

由于脚本目前将匹配并显示第 1、5 行

但是我希望它匹配并显示第 1、2、5 行

任何顺序，但所有单词都必须存在才能匹配。

我在这里和其他地方浏览了大量帖子，我知道需要的是分解字符串，然后在循环中搜索每个单词，但我无法让它工作，尽管尝试了几种不同的方法，因为它只是返回同一行无数次。

在我失去剩下的头发之前，任何帮助将不胜感激:-)

这是我目前正在使用的代码 - 搜索变量已经设置：

```
<?php
rawurldecode($search);
$search = preg_replace('/[^a-z0-9\s]|\n|\r/',' ',$search);
$search = strtolower($search);
$search = trim($search);

$lines = file('mytextfile.txt') or die("Can't open file");
shuffle($lines);

$counter = 0;

// Store true when the text is found
$found = false;

foreach($lines as $line)
 {

  if(strpos($line, $search) !== false AND $counter <= 4)
  {
    $found = true;
    $line = '<img src=""> <a href="">'.$line.'</a><br>';

    echo $line;
    $counter = $counter + 1;

  }

}

// If the text was not found, show a message
if(!$found)
{
  echo  $noresultsmessage;
}

?> 
```

在此先感谢您的帮助-仍在学习:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:32:22.890

这是我的代码：

```
$searchTerms = explode(' ', $search);
$searchCount = count($searchTerms);
foreach($lines as $line)
 {
    if ($counter <= 4) {
        $matchCount = 0;
        foreach ($searchTerms as $searchWord) {
            if (strpos($line, $searchWord) !== false ) {
                $matchCount +=1;
            } else {
                //break out of foreach as no need to check the rest of the words if one wasn't found
                continue; 
            }
        }
        if ($matchCount == $searchCount) {
            $found = true;
            $line = '<img src=""> <a href="">'.$line.'</a><br>';
            echo $line;
            $counter = $counter + 1;
        }

    }
} 
```

# java - 重新启动已完成的线程会导致崩溃（Android SDK）

> ID：13848004
> 
> 赞同：-1
> 
> 时间：2012-12-12T20:26:19.163
> 
> 标签：java, android, multithreading

标题几乎解释了这个问题。

我有一个按钮，当我按下时可以打开/关闭这个线程。它成功地打开和关闭它......一次，然后如果我尝试再次打开它，它就会崩溃。

```
private Thread dataThread = new Thread(new Runnable(){
    public void run() {
        while(transmitPackets){
                Log.d("Test","DERP");
        }
    }
}); 
```

它在哪里运行...

```
toggleButton.setOnClickListener( new View.OnClickListener() {
        public void onClick(View v){
            transmitPackets = !transmitPackets;
            if( transmitPackets ) {
                toggleButton.setText("Pause");
                dataThread.start();
            }
            else {
                toggleButton.setText("Transmit");
            }
        }
    }); 
```

transmitPackets 是按下按钮切换的布尔值。如此命名是因为此应用程序最终将通过网络发送数据。线程也使用它来终止。

应用程序崩溃生成的堆栈跟踪对于弄清楚如何对我修复它并不是特别有帮助，因为它只是说它在重新启动线程时崩溃了——问题本身就很明显。

我是 Android SDK 和 Java 线程的新手，所以我不知道哪里出错了。这似乎是线程的最简单实现，这是我在尝试对线程做任何时髦的事情之前开始的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:30:32.730

> 它成功地打开和关闭它......一次，然后如果我尝试再次打开它，它就会崩溃。

确实。您无法启动已经完成的线程。您需要创建一个新线程，然后启动它。

请注意，您无法重新启动已经启动的线程的信息应该已经从以下位置清楚地显示：

*   堆栈跟踪
*   [文档](http://developer.android.com/reference/java/lang/Thread.html#start%28%29)：_

    > `IllegalThreadStateException`如果线程之前已启动，则抛出

当某事导致异常时，您应该**始终**仔细阅读异常消息（和堆栈跟踪，因为那里可能存在因果信息）和文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:30:56.773

一旦线程完成，它就消失了。你不能重启。您可能需要创建新线程。没有堆栈跟踪，很难提出任何建议。

调用`start()`线程并不意味着您正在重新启动线程。这意味着您正在开始新线程。

问题可能是别的。发布堆栈跟踪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T20:31:12.520

您需要将`DataThread`代码移动到`setOnClickListener`代码中，因为您只创建一个线程，因此当您再次“启动”它时，它不能，因为它已经完成了。你应该声明`DataThread`你现在在哪里，但在监听器中设置它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:38:25.133

更好的实施将是

```
private Thread dataThread = new Thread(new Runnable(){
public void run() {
    while(true){

    if(transmitPackets){
       Log.d("Test","DERP");
       transmitPackets = false;
    }
  }
}
}); 
```

这样线程继续运行，你所做的就是改变传输包值的真值，这样它就会运行

# authentication - 在 Meteor 中创建没有密码的用户

> ID：13848008
> 
> 赞同：7
> 
> 时间：2012-12-12T20:26:33.573
> 
> 标签：authentication, meteor, accounts

我有一个独特的用户创建流程，如下所示：

1.  用户第一次来到我的网站，他们点击了一个按钮。
2.  我在数据库中为他们创建了一个用户，并使用 UID 设置了一个 localStorage 键。
3.  使用用于创建数据，我将数据保存在数据库中并将其与 UID 相关联。
4.  用户回来了，如果他们在 localStorage 中设置了 UID，我会向他们展示他们之前创建的数据。
5.  用户可以单击注册创建一个“真实”帐户，从该帐户开始，他们必须使用用户名和密码或其他服务（例如 Facebook）登录。

那么，我将如何使用 Meteor Accounts 和 User 模型来实现这一点？

简而言之：

*   我需要创建没有信息（关于用户）的用户 mongo 文档。
*   我需要通过仅具有 UID（充当“密码”）来验证用户身份。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T08:55:41.517

1.  注册`onCreateUser`以在使用随机密码时添加“匿名”字段 ( `{anonymous:1}`)，可能使用`Meteor.uuid()`.
2.  添加时间戳字段 ( `{created:new Date()}`) 以清除旧的匿名帐户。
3.  执行旧匿名用户维护，例如删除超过一小时的匿名用户： `Meteor.autorun(function() {Meteor.users.find({anonymous:1,$where:"new Date() - this.created > 360000"}).forEach(function (user) {
    Meteor.users.remove({_id:user._id})}});`
4.  在客户端：
    1.  总是提示输入“昵称”。这将成为官方用户名，或将永久使用在系统中。
    2.  检查客户端是否登录，如果没有，创建一个用户，昵称和“幻数”密码，然后登录。当他们点击注册时，在顶部写“注册”，但实际上只是更改他们的密码和`$set:{anonymous:0}`

不要使用 localStorage，也不要使用 UID。会话 cookie 是您的 UID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:33:00.670

我不知道如何帮助进行身份验证，但至于创建一个空白用户对象，我已经在服务器端成功完成了以下操作（使用不同的名称......）：

`Meteor.users.insert({profile: {name: 'Oompa Loompa'}, foo: 'bar'});`

# c# - 传递 Func<> 或类似于 PostSharp 方面

> ID：13848010
> 
> 赞同：5
> 
> 时间：2012-12-12T20:26:45.413
> 
> 标签：c#, .net, postsharp

在我们公开 WCF 服务的外部边界中，我们将所有内部异常转换为`FaultException`. 这是一个手动过程，通常具有每个实现所特有的小缺陷。对于每个公开的方法，它已被复制/粘贴和无意识地修改（或忘记）。为了减少错误，我想创建一个可以捕获任何未处理异常的方面。

我们将内部异常映射到故障异常。如何将映射函数发送到方面？

如果我像这样向方面添加一个属性：

```
[Serializable]
public sealed class FaultExceptionConverter : OnExceptionAspect {
    public Func<Exception, FaultException> FaultConverter { get; set }
} 
```

我不能（正如属性限制所预期的那样）初始化它`[FaultExceptionConverter(FaultConverter = MyConversionMethod)]`（在哪里`MyConversionMethod`可以分配一些方法`Func<Exception, FaultException>`）。有没有将这种类型的参数传递给方面的模式？许多类型可以传递到方面。这是个常见的问题吗？

如果碰巧有更好的方法来实现这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:46:19.227

我在方面实现中遇到了类似的令人沮丧的限制，我用来解决它们的一种方法是让方面将其实现的类视为某种“提供者”类型，它可以回调以请求其他位在运行时。

所以，在你的情况下，我想象一个看起来像的 OnException 覆盖；

```
public override void OnException(MethodExecutionArgs args)
{
    IFaultConverterProvider provider = args.Instance as IFaultConverterProvider;
    if (null != provider)
        Func<Exception, FaultException>exceptionConverterFunc = provider.GetFunc();
} 
```

您在属性类型上定义和实现的某些接口在哪里`IFaultConverterProvider`，以提供您缺少的额外参数。

然后，作为一个健全的检查，你可以在你的方面引入一些编译时验证，以确保它所应用的类型实际实现了这个所需的接口；

```
public override bool CompileTimeValidate(Type type)
{
    if (!type.IsImplementationOf(typeof(IFaultConverterProvider )))
    {
        // The aspect must be in a type which implements IFaultConverterProvider 
        Message.Write(
            MessageLocation.Of(type),
            SeverityType.Error,
            "CUSTOM02",
            "Cannot apply [MyFaultExceptionAspect] to type {0} because it does not implement IFaultConverterProvider .", type);
            return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:41:03.777

不幸的是，您只能将 bool、byte、char、short、int、long、float、double、string、Type 和枚举数传递给 Attribute。

作为一种解决方法，您可以`typeof(FaultConverterClass)`作为类型和`"MyConversionMethod"`字符串传递，并使用反射调用您的转换方法（当然，仅在此方法是静态的情况下）。这听起来很“脏”，但您可以添加编译时验证该方法是否存在并具有预期的签名。

# algorithm - 如何检查节点的黑色高度以获取其后代叶子的所有路径？

> ID：13848011
> 
> 赞同：2
> 
> 时间：2012-12-12T20:26:59.440
> 
> 标签：algorithm, data-structures, recursion, red-black-tree

给定一个*红黑树*，我需要编写一个**有效的算法**来检查每个节点是否从节点到后代叶子的所有路径都包含相同数量的黑色节点，即如果属性为真，算法应该返回一个布尔值否则为假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:36:01.897

它将返回 RB 树的黑色高度。如果高度为 0，则树是无效的红黑树。

```
int BlackHeight(NodePtr root)
{
    if (root == NULL) 
        return 1;

    int leftBlackHeight = BlackHeight(root->left);
    if (leftBlackHeight == 0)
        return leftBlackHeight;

    int rightBlackHeight = BlackHeight(root->right);
    if (rightBlackHeight == 0)
        return rightBlackHeight;

    if (leftBlackHeight != rightBlackHeight)
        return 0;
    else
        return leftBlackHeight + root->IsBlack() ? 1 : 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T06:28:03.140

下面的代码验证任何路径上的黑色节点数是否相同

```
#define RED 0
#define BLACK 1

struct rbt {
    int data;
    struct rbt *left;
    struct rbt *right;
    int parent_color; // parent link color
    uint64_t nodes_count; // to store number of nodes present including self
    int level; // to store level of each node
};
typedef struct rbt rbt_t;

int check_rbt_black_height(rbt_t *root)
{
    if(!root) return 1;
    else {
        int left_height  = check_black_violation(root->left);
        int right_height = check_black_violation(root->right);
        if (left_height && right_height && left_height != right_height) {
            printf("Error: Black nodes are not same @level=%d\n", root->level);
            exit(1);
        }
        if (left_height && right_height) 
                   // do not increment count for red
            return is_color_red(root) ? left_height : left_height + 1; 
        else
            return 0;
    }
}

int is_color_red(rbt_t *root)
{
    if(root && root->parent_color == RED) return 1;
    return 0;
} 
```

# java - 用 MVC 的说法，您如何“通知”模型更改的祖父组件？

> ID：13848016
> 
> 赞同：2
> 
> 时间：2012-12-12T20:27:10.643
> 
> 标签：java, model-view-controller

有很多关于如何设置 JTable 及其关联模型的示例，但我想知道如何让 JFrame“控制器”知道 JTable 的模型已完全加载。

我只是委托给祖父母吗？我应该使用观察者模式吗？还是我在错误的地方修改模型？模型是否应该由 JTable 控制器控制？

# jqgrid - 选择行上的 jqgrid 链接覆盖格式化程序链接

> ID：13848017
> 
> 赞同：0
> 
> 时间：2012-12-12T20:27:10.753
> 
> 标签：jqgrid, onselect

onselectRow 链接有效，但它覆盖了格式化程序链接。

如果我注释掉 OnSelect 位置，则格式化程序链接有效。否则，格式化程序链接不起作用。反正围绕那个？

谢谢

```
onSelectRow: function(row_id) {
location.href="/blah/"+aId;
}, 
```

但是如果它被启用，它会覆盖这个链接：

```
{name:'ID',index:'ID',formatter:pbf, width: 90,align: "center", fixed: true,sortable:false,resizable:false}

gridComplete: function() {
        $('span[name="pay"]').click(function() {
    location.href='/ew/'+ad;              
     }

function pbf(cellvalue, options, rowObject){    
var pay = '<span name="pay" id="'+rowObject.ID+'" class="ui-icon ui-icon-check" style="margin-left: 10px; margin-top: -3px; float: left"></span>';
   return pay; 
```

}

# mod-rewrite - 域 URL 重写

> ID：13848018
> 
> 赞同：0
> 
> 时间：2012-12-12T20:27:12.513
> 
> 标签：mod-rewrite

我要做的是重写 url，以便隐藏其中一个目录。例如;

```
http://www.example.com/home/example.html 
```

到

```
http://www.example.com/example.html 
```

由于我是 .htaccess 和 mod_rewrite 的新手，这是可以做到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:34:36.713

这应该有效：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/home/.*$ 
RewriteRule ^(.*)$ /home/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:34:27.490

像这样的东西应该工作。

```
RewriteEngine On    # Turn on the rewriting engine
RewriteRule    ^example.html$    /home/example.html    [NC,L] 
```

# c# - 在 .NET 3.5 中使用 TagPrefix 摆脱 Assembly

> ID：13848019
> 
> 赞同：0
> 
> 时间：2012-12-12T20:27:12.513
> 
> 标签：c#, .net, .net-3.5, .net-assembly, app-code

我不得不将我的 .NET 3.5 网站更改为 Web 项目，所以我需要删除 App_Code 文件夹，但发现我仍然有这些：

```
<%@ Register Assembly="App_Code" Namespace="MyNamespace" TagPrefix="pf" %> 
```

摆脱这种情况的最简单方法是什么？我尝试将程序集重命名为 projectName.dll 但崩溃了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:36:24.920

你可能会使用这个：

```
<%@ Register Assembly="YourAssemblyName" Namespace="YourNewNamespace" TagPrefix="pf" %> 
```

关于`Web Application`微软[说](http://msdn.microsoft.com/en-us/library/aa730880%28VS.80%29.aspx#wapp_topic5)：

*项目中的所有代码隐藏类文件和独立类文件都编译成一个程序集，放在 Bin 文件夹中。因为这是单个程序集，您可以指定程序集名称和版本等属性，以及输出程序集的位置。*

所以现在你应该有一个独特的程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:34:09.660

app_code 背后的最初想法是代码可以随时放入并由 Web 应用程序使用。这是一个问题，因为它并没有真正出现在正常的项目中。因此，要进行转换，您需要获取 app_code 中的代码并将其转换为一个或多个类库并包含在您的 Web 项目中。当此构建正确时，将寄存器程序集标记更改为指向新的 .dll 文件。

# php - PHP中按列进行数据库映射

> ID：13848020
> 
> 赞同：0
> 
> 时间：2012-12-12T20:27:23.070
> 
> 标签：php, mysql, database, relational-database

我有一个基于列名和字段值一起工作的数据库表列表。

我可以通过简单的主 ID 列字段值匹配来提取大约 3/4 的表。

使用我目前能够提取的表，我希望能够根据表中可能的列匹配来检索其余数据。

我已经开始了一个想法。但我不太确定如何完成这个过程。

这个网站使用的是 WordPress，但理想情况下，这仍然可以用直接的 PHP 很好地完成，而不使用 WordPress 数据库类。

**检索有关学校的所有信息：** `$school = $this->get_school('129020');`

**功能：** ( `$this->get_school($id);`)

```
private function get_school($id){
    global $wpdb;
    /* Retrieve the IPEDS database tables. */
    $columns = $this->map_database('iped');
    /* Retrieve the initial results by the UNITID. */
    $data = array();
    foreach($columns['UNITID']['shared_tables'] as $table){
        $data[$table] = $wpdb->get_results(
            "
            SELECT *
            FROM `{$table}`
            WHERE `UNITID` = '{$id}';
            ", 
            ARRAY_A
        );
    }
    return $data;
} 
```

**功能：** ( `$this->map_database($database_table)`)

```
private function map_database($database_table = 'all'){
    global $wpdb;
    /* Get all of the database tables. */
    $tables = $wpdb->get_results('SHOW TABLES', ARRAY_N);
    $table_columns = array();
    foreach($tables as $table){
        if($database_table != 'all'){
            /* Filter tables by partial string matching the table name. */
            if(stripos($table[0], $database_table) === false){
                continue;
            }
        }
        /* Get all of the columns available in each database table. */
        $columns = $wpdb->get_results(
            "
            SELECT *
            FROM   information_schema.columns
            WHERE  table_name = '{$table[0]}'
            ORDER  BY ordinal_position  
            ",
            ARRAY_A
        );
        for($i = 0; $i < count($columns); $i++){
            $column = $columns[$i];
            /* Don't overwrite any data. Could result in missing or overlapping of data? */
            if(isset($table_columns[$table[0]]) && in_array($column['COLUMN_NAME'], $table_columns[$table[0]])){
                continue;
            }
            $table_columns[$table[0]][] = $column['COLUMN_NAME'];
        }
    }
    return $this->map_database_tables($tables, $table_columns);
} 
```

**功能：** ( `$this->map_database_tables($database_tables, $database_consolidated);`)

```
/* 
$database_tables - Array consisting of strictly database tables. 
$database_consolidated - Nested array consisting of: table_name => table_columns
*/      
private function map_database_tables($database_tables, $database_consolidated){
    if(empty($database_tables) || empty($database_consolidated)){
        return;
    }
    $common_columns = array();

    foreach($database_consolidated as $table_name => $table_columns){
        for($i = 0; $i < count($table_columns); $i++){
            $table_column = $table_columns[$i];
            /* Find similar table columns in other database tables. */
            $search = $this->search_database_tables($database_consolidated, $table_column);
            if(!empty($search)){
                foreach($search as $column => $table){
                    $common_columns[$table_column]['shared_tables'] = $table;
                }
            }
        }
    }
    return $common_columns;
} 
```

**功能：** ( `$this->search_database_tables($tables, $column_name);`)

```
/* Returns column name and database tables sharing the column name. */
private function search_database_tables($tables, $column_name){
    $common_tables = array();
    foreach($tables as $table_name => $table_columns){
        if(in_array($column_name, $table_columns)){
            $common_tables[$column_name][] = $table_name;
        }
    }
    return $common_tables;
} 
```

**生成以下格式的数组：**

```
$database_map = array(
    'table_name' => array(
        'row_number' => array(
            'field_key' => 'field_value'
        )
    )
); 
```

我不解的是下一步该做什么？我该去哪里？

我的所有数据都触手可及，但我只是不知道下一步该做什么。

这就是我的想法，但绝对需要一些指导或输入......

我想检查其他表列的值。因此，例如，如果我正在查找辅助 ID 号，该辅助 ID 号仅存在于尚未由主 ID 号提取的其他表之一中。

表 1 可能有一个名为“Secondary”的列和一个字段值为“123”。

我想循环浏览所有其他数据库表，看看是否存在“辅助”列。如果是，则根据该列名称的两个表字段值的匹配列名称和字段值从该表中提取所有字段。

我确信我的代码非常糟糕，可能会被大大简化。我一直在寻找一些现有的框架，它们可能已经实现了我想要的目标。我没有这样的运气找到任何东西。

我愿意就我的代码下一步去哪里寻求建议。我也对我可以使用的任何现有框架持开放态度。

# visual-studio - 将字体大小从 Visual Studio 保留到 Word

> ID：13848022
> 
> 赞同：2
> 
> 时间：2012-12-12T20:27:43.267
> 
> 标签：visual-studio, ms-word, font-size, word-2010

我可以验证 VS2010 中的字体大小是`10`，但是当我将它复制到 Word2010 时，它全部变为`9.5`. 没什么大不了的，但有点烦人。知道为什么以及如何解决吗？

# python - Python 进程在 Ubuntu 上死机：错误代码是什么意思，有解决办法吗？

> ID：13848025
> 
> 赞同：0
> 
> 时间：2012-12-12T20:27:56.630
> 
> 标签：python, subprocess, termination

我在 Amazon EC2 Ubuntu 实例上运行同一 python 脚本的多个副本。每个副本依次使用[此处提出的解决方案启动相同的子 Python 脚本](https://stackoverflow.com/questions/13822480/launching-python-script-process-from-another-script-on-ubuntu-how-to-track-stat)

有时这些子进程中的一些会死掉。`subprocess.check_output`抛出异常并返回错误代码`-9`。我直接从提示符运行子进程，运行一段时间后，进程终止并显示不那么详细的消息`Killed`。

问题：

*   是什么`-9`意思？
*   我怎样才能更多地了解出了什么问题？具体来说，我怀疑这可能是由于同一脚本的多个副本同时运行而导致机器过载。同时，我直接运行的特定子进程似乎在每次启动时都会死亡，无论是否直接启动，并且或多或少在同一时刻（即在处理或多或少相同数量的输入数据之后）。Python 没有产生任何错误消息。
*   假设我在 Python 代码中没有错误，我该怎么做才能防止崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T03:38:09.630

`check_output()`在内存中累积子进程的输出。如果进程产生足够的输出，它可能会由于大量的 RAM 消耗而被[oom Killer 杀死。](http://linux-mm.org/OOM_Killer)

如果您不需要输出，则可以`check_call()`改用并丢弃输出：

```
import os
from subprocess import check_call, STDOUT

DEVNULL = open(os.devnull, "r+b")

check_call([command], stdout=DEVNULL, stderr=STDOUT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:55:22.900

-9 表示不可捕获或不可忽略的终止信号，或立即退出。

例如，如果您试图终止一个进程，您可以在终端中输入：

```
ps aux | grep processname 
```

或者只是获取所有进程的列表：`ps aux`

获得要终止的进程的 pid 后，键入 kill -9 后跟 pid：

```
kill -9 1234 
```

关于日志，我的记忆有点模糊，但我会在 /var/log/ 中四处寻找，看看你是否找到任何东西，或者 dmesg。

至于防止 Python 代码崩溃，您是否尝试过任何异常处理？

[Python 中的异常](http://docs.python.org/2/tutorial/errors.html)

# javascript - Prototype.js 1.6.x toJSON 行为不端

> ID：13848027
> 
> 赞同：1
> 
> 时间：2012-12-12T20:28:03.853
> 
> 标签：javascript, prototypejs

在 Prototype.js 1.6.x 中尝试并执行

```
Object.toJSON([{"nodeType":1}]) 
```

它应该产生

```
'[{"nodeType":1}]' 
```

作为输出字符串。但是它产生'[]'。它似乎跳过了 nodeType==1 的对象。这与它们是 DOM 元素有关。是否有解决方法来获得正确的输出？

jsFiddle：http: [//jsfiddle.net/xPVnr/](http://jsfiddle.net/xPVnr/)

编辑：

查看源代码，如果 isElement(obj) 为真，则 toJSON 仅返回，如果 obj.nodeType == 1 则为真 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:12:46.493

使用 JSON.stringify 但进行以下调整以获得正确的输出（如果是数组）：

```
var _json_stringify = JSON.stringify;
JSON.stringify = function(value) {
    var _array_tojson = Array.prototype.toJSON;
    delete Array.prototype.toJSON;
    var r=_json_stringify(value);
    Array.prototype.toJSON = _array_tojson;
    return r;
}; 
```

这解决了 Array toJSON 与 JSON.stringify 的不兼容问题，并且还保留了 toJSON 功能，因为其他 Prototype 库可能依赖于它。

# backbone.js - Backbone router.route 没有设置路由

> ID：13848029
> 
> 赞同：0
> 
> 时间：2012-12-12T20:28:05.147
> 
> 标签：backbone.js

我定义了以下路由器，但`.route`似乎没有设置该功能。我究竟做错了什么？在此先感谢您的帮助。

```
# app.js.coffee

initialize: =>
  router = new Backbone.Router
  router.route "foo/:bar", "baz"
  console.log router.routes # returns undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:42:33.300

您使用创建的路由`Router.route`内部存储在`History`对象中——它们不会添加到`Router.routes`集合中。

但是它们仍然有效，请参见[此处](http://jsfiddle.net/FMhZL/3/)以获取证据。请注意，在 中`this.routes`，仅`home`定义了路线，但您仍然可以到达`baz`路线。如果您选中，您*可以*看到路线，这是路线实际存储的位置。`baz``Backbone.history.handlers`

```
var Router = Backbone.Router.extend({
    initialize: function() {
        this.route("foo/:bar", "baz");
    },
    routes: {
        "": "home"  
    },
    home: function() {
        console.log("home hit");
    },
    baz: function(bar) {
        console.log('test hit: ' + bar);
    },
});
var router = new Router();
console.log(this.routes);
console.log(Backbone.history.handlers);
Backbone.history.start();
router.navigate("foo/testbar", { trigger: true }); 
```

* * *

​</p>

但请注意，我认为您需要`this`在代码中使用，因为`router`尚未在内部定义`initialize`：

```
@route "foo/:bar", "baz" 
```

# sharepoint - 拦截共享点打开文档请求

> ID：13848030
> 
> 赞同：2
> 
> 时间：2012-12-12T20:28:04.757
> 
> 标签：sharepoint, request, httpmodule, intercept

我目前正在尝试拦截 SharePoint 发送的请求，以便使用 HttpModule 查看文档库中的文档以进行自定义处理。

不幸的是，SharePoint 似乎通过 ActiveX 控件 (OpenDocuments) 发送请求，而 HttpModule 看不到这些请求。

我在这里要做的是：1-拦截请求2-验证当前用户是否有权打开文档（自定义权限级别）。3- 如果用户没有权限，将请求转移到拒绝访问页面。

我的问题是：有没有办法做到这一点（有或没有httpmodule）？

当前代码供参考：

```
public class ViewOnlyModule : IHttpModule
{
    HttpApplication App;

    public void Init(HttpApplication context)
    {
        App=context;
        context.BeginRequest += new EventHandler(PreventAccessToFile);
        //context.PreRequestHandlerExecute += new EventHandler(PreventAccessToFile);
    }

    public void Dispose()
    {

    }

    private void PreventAccessToFile(Object sender, EventArgs e)
    {
        //Code    

    }
} 
```

# haskell - 是否可以使用 Haskell 合理解决大型 DP 问题

> ID：13848032
> 
> 赞同：5
> 
> 时间：2012-12-12T20:28:11.717
> 
> 标签：haskell

我编写了使用 Smith-Waterman 算法解决局部对齐问题的代码。

我想通过输入长度为 10000 的字符串、合理的内存（低于 2GB 内存）和合理的时间（低于 5 分钟）来做到这一点。

起初我为此使用了 bio 库的内置函数，它运行得太慢了，在我杀死它之前吃掉了 4GB 的内存。

注意java程序jAligner，实现了同样的算法，不到1GB的内存，不到20秒就可以解决这个问题。

当我写了一个未装箱的版本时，程序给了我`<<loop>>`. 我认为这是因为数组需要在数组完全构建之前访问数组中的项目。

所以我想知道是否有可能为这种更大的动态编程问题编写具有相似性能的 Haskell 代码。

```
module LocalAlign where
--import Data.Array.Unboxed
import Data.Tuple
import Data.Array

localAffineAlignment :: (Char -> Char -> Int)
                                    -> Int
                                    -> Int
                                    -> String
                                    -> String
                                    -> (Int, (String, String, String, String))
localAffineAlignment f g e s' t' = (score, best) where
    n = length s'
    m = length t'
    s= array (0,n-1) $ zip [0..n-1] s'
    t= array (0,m-1) $ zip [0..m-1] t'
    table :: (Array (Int,Int) Int,Array (Int,Int) Int)
    table   = (c,d)
      where --a :: UArray (Int,Int) Int
          a = array ((0,0),(n,m)) [((x,y),a' x y)|x<-[0..n],y<-[0..m]] --s end with gap
          b = array ((0,0),(n,m)) [((x,y),b' x y)|x<-[0..n],y<-[0..m]] --t end with gap
          c = array ((0,0),(n,m)) [((x,y),fst (c' x y))|x<-[0..n],y<-[0..m]] -- best 
          d = array ((0,0),(n,m)) [((x,y),snd (c' x y))|x<-[0..n],y<-[0..m]] -- direction
          a' i j
            | i==0 || j==0  = inf
            | otherwise     = max (a!(i-1,j)-e) (c!(i-1,j)-g-e)
          b' i j
            | i==0 || j==0  = inf
            | otherwise     = max (b!(i,j-1)-e) (c!(i,j-1)-g-e)
          c' i j
            | min i j == 0  = (0,0)
            | otherwise     = maximum [(b!(i,j),3),(a!(i,j),2),(c!(i-1,j-1) + f u v,1),(0,0)]
            where u = s!(i-1)
                  v = t!(j-1)
          inf = -1073741824
    score :: Int
    score = maximum $ elems $ fst table
    best :: (String, String, String, String)
    best = (drop si $ take ei s',drop sj $ take ej t',b1,b2)
      where (a,d') = table
            (si,sj,b1,b2) = build ei ej [] []
            (ei,ej) = snd $ maximum $ map swap $ assocs a
            build x y ss tt
             | o == 0       = (x,y,ss,tt)
             | d == 1       = build (x-1) (y-1) (u:ss) (v:tt) 
             | d == 2       = build (x-1) y     (u:ss) ('-':tt) 
             | otherwise    = build x (y-1)     ('-':ss) (v:tt) 
             where o = a!(x,y)
                   d = d'!(x,y)
                   u = s!(x-1)
                   v = t!(y-1) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T20:50:02.253

> 甚至有可能为这种更大的动态规划问题编写具有相似性能的 Haskell 代码。

是的当然。使用相同的数据结构和相同的算法，您将获得相同（或更好，或更差，取决于常数因素）的性能。

您正在大量使用（中间）列表和盒装数组。考虑改用矢量包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T04:25:37.207

您可能对[MemoCombinators 库](http://hackage.haskell.org/packages/archive/data-memocombinators/0.4.3/doc/html/Data-MemoCombinators.html)感兴趣，它使动态编程变得更加容易。您基本上可以在没有记忆的情况下编写算法，然后只需注释您想要记忆的变量，编译器就会从那里获取它。

# android - 覆盖菜单按钮操作

> ID：13848034
> 
> 赞同：4
> 
> 时间：2012-12-12T20:28:14.477
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

Nexus显示屏幕如下：（这里我按右上角的3个点下拉菜单）

![在此处输入图像描述](../Images/78a74a5e71008432d234c71a82b8e293.png)

我有一个菜单出现在屏幕的右上角。手机显示菜单如下（仅当我按下手机上的菜单按钮时才会发生这种情况）：

![在此处输入图像描述](../Images/d5a28f5a5793c21ec107061b6d7e6d7c.png)

我希望手机中的菜单行为与平板电脑中的相同——我可以在屏幕右上角显示菜单。我的问题是，有什么方法可以覆盖菜单膨胀行为，即使在手机中，菜单也必须从屏幕的右上角显示

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:25:00.297

这有点复杂，但这里是一般的想法：

```
public void showPopup(View v) {
PopupMenu popup = new PopupMenu(this, v);
MenuInflater inflater = popup.getMenuInflater();
inflater.inflate(R.layout.menu, popup.getMenu());
popup.show(); 
```

}

在此方法`v`中是您希望菜单出现的视图。

您将需要`Override`菜单按钮，以便在用户按下它时出现您的菜单。请执行下列操作

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ( keyCode == KeyEvent.KEYCODE_MENU ) {
        //Put the code for an action menu from the top here
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

然后其他一切都与您的普通菜单相同（我认为）

# html - 我们什么时候应该在 css 中使用“绝对”属性？

> ID：13848035
> 
> 赞同：0
> 
> 时间：2012-12-12T20:28:27.150
> 
> 标签：html, css, absolute

什么时候推荐在css中使用“绝对”属性，我的意思是，为什么不使用“相对”对齐，因为绝对位置在不同的分辨率下会有所不同，在其他显示器上看起来总是不同的。我想知道何时以及为什么应该使用绝对值，一个例子可以完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:31:06.277

`position:relative`- 设置子元素的原点

`position:absolute`- 设置元素相对于第一个定位的父元素的位置

相对定位的元素不是布局/流程的唯一部分。这对于叠加层、对话框、工具提示和类似的东西很有用。它们充当自己的“层”，而不会推动其他内容。

一般来说，`position:relative`除非您还打算使用`position:absolute`.

通常与之相关的其他技巧通常`position:relative`可以使用边距来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:31:40.343

`absolute`就像“变量”一样`relative`，屏幕参数没有区别。

自从我开发游戏以来，我经常使用`absolute`。在`relative`容器中定位 UI 元素非常有用。事实上，我现在正在开发一个 Facebook 应用程序，它有一个固定的“画布”大小。几乎所有东西都为此做好了绝对的准备。

# r - 更改图例名称而不更改 ggplot2 中的颜色

> ID：13848036
> 
> 赞同：13
> 
> 时间：2012-12-12T20:28:33.313
> 
> 标签：r, ggplot2

我想在不改变已经设置的自定义颜色的情况下重命名图例中的值。有没有办法在不使用 scale_color_manual 的情况下设置图例标签？目前，我有这样的事情：

```
norm <- rnorm(1000, 0 , .5)
gam <- rgamma(1000, 2)
beta <- rbeta(1000, 2, 3)
dist <- data.frame(Normal = norm, Gamma = gam, Beta= beta)
dat <- melt(dist, variable.name = "Distribution", value.name = "XValue")
plot1 <- ggplot(dat, aes(XValue, color = Distribution)) +
            stat_density(geom = "path", position = "identity", size = 2) +
            scale_color_manual(values = c("yellow", "black", "forestgreen"))

plot2 <- plot1 + scale_color_discrete(labels = c("Distribution 1",
                                "Distribution 2",
                            "Distribution 3")) 
```

但是，这会覆盖手动颜色。我将在与我设置颜色的位置不同的函数中更改名称，因此很遗憾，我将无法使用 scale_color_manual(values =... , labels = ...)。我想到的另一个选择是以某种方式获取 plot1 中使用的颜色。然后我可以做类似的事情：

```
colors <- plot1$colors_used
plot2 <- plot1 + scale_color_manual(labels = c("Distribution 1", 
                                               "Distribution 2",
                        "Distribution 3"),
                                      values = colors) 
```

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T21:17:50.263

可以在 中指定标签名称`scale_colour_manual`。

```
ggplot(dat, aes(XValue, color = Distribution)) +
  stat_density(geom = "path", position = "identity", size = 2) +
  scale_color_manual(values = c("yellow", "black", "forestgreen"),
                     labels = c("Distribution 1",
                                "Distribution 2",
                                "Distribution 3")) 
```

![在此处输入图像描述](../Images/5918a2eab2c627c7abdd1ce1e02b8a74.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-09T20:24:18.353

如果您愿意使用一致的调色板，那么您可以将其定义为：

```
 mycolors <- c("red", "blue", "black", #ee4747, #fff382, #f1f6c8, #334d65, #263825) 
```

现在，而不是

```
 values = c("yellow", "black", "forestgreen") 
```

采用

```
 values = mycolors 
```

# tableview - TableView 中的搜索结果未使用自定义单元格

> ID：13848038
> 
> 赞同：1
> 
> 时间：2012-12-12T20:28:33.723
> 
> 标签：tableview, uisearchbar, uisearchdisplaycontroller

我在我的表格视图中添加了一个搜索栏，它正在工作并正确返回结果。但是，使用我的自定义单元格显示了结果，但基础表没有“拉伸”以适应单元格。我希望这是有道理的。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";

CustomBuyMainCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

}

Item *item = nil;

if (tableView == self.searchDisplayController.searchResultsTableView) {

    item = (Item *)[self.filteredItemArray objectAtIndex:indexPath.row];}

else {

    item = (Item *)[self.itemArray objectAtIndex:indexPath.row];} 
```

我相信这与这段代码有关。但我不确定。似乎 searchResultsTableView 不知道自定义单元格......并且自定义单元格只是覆盖在它上面，而基础表不适应它。任何帮助是极大的赞赏！

# html - 除非纯文本，否则不会显示 SVG foreignObject 内容

> ID：13848039
> 
> 赞同：49
> 
> 时间：2012-12-12T20:28:35.410
> 
> 标签：html, svg, d3.js

我正在尝试使用 SVG 绘图中的 foreignObject 标记输出 HTML。我正在使用 d3 来生成元素。只有当 foreignObect 标记内的内容是纯文本时才显示 foreignObject 标记内的 HTML 内容，否则它只会显示为空/空白。有关我的问题的示例，请参阅此 jsfiddle：http: [//jsfiddle.net/R9e3Y/29/](http://jsfiddle.net/R9e3Y/29/)

在检查元素时会显示 foreignObject 标签内的内容：

```
<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">
    <foreignObject x="40" y="40" width="100" height="100">
        <div>test</div>
    </foreignObject>
</svg> 
```

但在屏幕上不可见？如何让内容显示？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-12T21:17:20.227

由于您使用的是 d3，因此您需要告诉 d3 div 是 html div，而不是 svg 命名空间中的某个元素。尝试

```
.append("xhtml:div") 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-12T21:11:09.333

`<foreignObject>`允许嵌入各种标记，而不仅仅是 HTML。这意味着，必须有一种方法来确定所使用的语言。这就是命名空间发挥作用的地方。

要告诉 SVG 你有什么类型，`foreignObject`你必须将内容放在正确的命名空间中。

```
<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">
  <foreignObject x="40" y="40" width="100" height="100">
    <div xmlns="http://www.w3.org/1999/xhtml">test</div>
  </foreignObject>
</svg> 
```

在您的示例中，该`<div>`元素位于 SVG 命名空间中，即它是 SVG 元素，而不是 HTML 元素（尽管是非标准元素）。

该`<foreignObject>`元素还有一个[`requiredExtensions`](https://www.w3.org/TR/SVG11/struct.html#RequiredExtensionsAttribute)属性来告诉浏览器使用哪个扩展，但是不同的浏览器似乎对这个属性的解释不同，所以最好不要设置它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-20T12:30:06.897

确保您设置`width`和`height`参数。

添加`xmlns`并没有为我解决问题。原来问题对我来说更简单......我没有添加`width`和`height`参数，所以里面的内容`foreignObject`没有显示，即使它在那里。这两个参数似乎默认为 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-02T02:28:09.240

我为此开发了一些东西。代码如下。更高级的版本使用代理来拉入外部非 CORS 资源。svg`foreignObject`阻止加载任何非 CORS 跨域请求。我编写了一个在 Runkit 上运行的简单代理。见底部。

这样做的限制是：没有外部非 CORS 字体，没有非 CORS 图像。任何想要帮助改进这一点的人，包括添加对图像和字体的支持，都可以在这里做出贡献：[https ://github.com/dosyago-coder-0/dompeg.js/blob/master/dompeg.js](https://github.com/dosyago-coder-0/dompeg.js/blob/master/dompeg.js)

*网页脚本：*

```
(async function (){ 
  const width = document.scrollingElement.scrollWidth;
  const height = document.scrollingElement.scrollHeight;
  const doc = document.implementation.createHTMLDocument('');
  doc.write(document.documentElement.outerHTML);
  doc.documentElement.setAttribute('xmlns', doc.documentElement.namespaceURI);

  const styles = [];
  for( let i = 0; i < document.styleSheets.length; i++ ) {
    const ss = document.styleSheets[i];
    if ( ss.cssRules ) {
      for( let j = 0; j < ss.cssRules.length; j++ ) {
         styles.push( ss.cssRules[j].cssText );
      }
    } else {
      try {
        const res = await fetch(ss.href);
        const cssText = await res.text();
        styles.push(cssText);
      } catch(e) {
          /** fetch to proxy here as fallback
           * uncomment if you set up your proxy server 
        try {
          const res = await fetch(`https://${YOUR PROXY SERVER}.runkit.sh/?url=${btoa(ss.href)}`);
          const cssText = await res.text();
          styles.push(cssText);
        } catch(e) { **/
          console.warn(`Exception adding styles from ${ss.href}`, e, e.stack);
        /** uncomment if you setup proxy  
        }  
        **/
      }
    }
  }

  Array.from( doc.querySelectorAll('noscript, link, script')).forEach( el => el.remove() );
  stripComments(doc);
  Array.from( doc.querySelectorAll('*[style]')).forEach( el => {
    const styleText = el.getAttribute('style');
    const uniq = (Math.random()+''+performance.now()).replace(/\./g,'x');
    const className = `class${uniq}`;
    const cssText = `.${className} {${ styleText }}`;
    styles.push( cssText );
    el.classList.add( className );
  });

  const styleElement = doc.createElement('style');
  styleElement.innerText = styles.join('\n');
  doc.documentElement.appendChild(styleElement);

  const canvas = document.createElement('canvas');
  Object.assign( canvas, {width,height});
  const ctx = canvas.getContext('2d');

  const data = `
  <svg xmlns="http://www.w3.org/2000/svg" width="${width}" height="${height}">
    <foreignObject width="100%" height="100%">
     ${(new XMLSerializer).serializeToString(doc).slice(15)}
    </foreignObject>
  </svg>`;
  const DOMURL = window.URL || window.webkitURL || window;

  const img = new Image();
  const svg = new Blob([data], {type: 'image/svg+xml'});

  Object.assign( img, {width,height});  
  img.crossOrigin = "Anonymous";
  img.onload = function() {
    ctx.fillStyle = 'white';
    ctx.fillRect( 0, 0, canvas.width, canvas.height );
    ctx.drawImage(img, 0, 0);
    const datauri = canvas.toDataURL('image/jpeg');
    const anchor = document.createElement('a');
    anchor.download = 'screen.jpg';
    anchor.href = datauri;
    anchor.target = "_new";
    anchor.innerText = 'download screen.jpg';
    anchor.addEventListener('click', e => {e.stopPropagation();anchor.remove();}, { capture: true });
    document.body.appendChild(anchor);
    Object.assign( anchor.style, {
      position: 'fixed',
      background:'white',
      fontSize: '18px',
      fontFamily: 'monospace',
      color: 'blue',
      top: 0,
      left: 0,
      zIndex: Number.MAX_SAFE_INTEGER
    });
  }
  img.src = buildSvgImageUrl(data);  
  img.style.position = "absolute";
  img.style.zIndex = "10000000";
  img.style.backgroundColor = "white";
  //document.body.appendChild(img);

  function buildSvgImageUrl(svg) {
    const b64 = btoa(unescape(encodeURIComponent(svg)));
    return "data:image/svg+xml;base64," + b64;
  }

  function stripComments(docNode){
    const commentWalker = docNode.evaluate('//comment()', docNode, null, XPathResult.ANY_TYPE, null);
    let comment = commentWalker.iterateNext();
    const cuts = [];

    while (comment) {
      cuts.push(comment);
      comment = commentWalker.iterateNext();
    }
    cuts.forEach( node => node.remove());
  }
}()); 
```

*runkit 代理服务器脚本：*

```
const request = require("request");
const rp = require('request-promise');
const {URL} = require('url');
const express = require("@runkit/runkit/express-endpoint/1.0.0");
const b64 = require('base-64');
const bodyParser = require('body-parser');
const page = (url,err) => `
        <form method=POST style="
            position: fixed;
            position: sticky;
            display: table;
            top: 0px;
            z-index:12000000;
            background: white;">
            <label for=hider99>X</label><input id=hider99 type=checkbox>
            <style>
                #hider99:checked ~ fieldset {
                    display: none;
                }
            </style>
            <fieldset><legend>Proxy</legend>
            <p>
                <input required type=url size=62 name=url placeholder="any url" value="${url||'https://google.com/favicon.ico'}">
                <button style=background:lime>Load</button>
                ${ !! err ? `<p><span style=color:red>${err}</span>` : '' }           
            </fieldset>
        </form>`;
const app = express(module.exports);
app.use(bodyParser.urlencoded({ extended: false }));

app.get("/", async (req,res,next) => {
    console.log(req.query.url);
    let url;
    res.type('html');
    res.set('access-control-allow-origin', '*');
    try {
        url = b64.decode(req.query.url);
        new URL(url);
        } catch(e) { res.end(page('',"not a url"+e)); return; }
    try {
        res.type(type(url));
        const data = await rp(url);
        res.end(data);
        } catch(e) { res.end(page('',""+e)); }
});

app.get("/:anything", async (req,res,next) => {
    res.type('html');
    res.end('404 Not found');
});

function type(s = '') {
    return s.split(/\./g).pop() || 'html';
}
void 0; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-07-04T13:11:14.830

```
var a = function(a) {
            var b = enter code heredocument.createElementNS("http://www.w3.org/1999/xhtml", "div");
            b.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg">' + a + "</svg>";
            for (var c = document.createDocumentFragment(); b.firstChild.firstChild; ){
                c.appendChild(b.firstChild.firstChild);
            } 
            return c;
        }

        $('#app_canvasContainer svg').append(a('<foreignObject overflow="visible" width="200" height="100" x="'+ x +'"  y="'+ y +'" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><textarea class="text-entity" readonly="true" resizeable=false xmlns="http://www.w3.org/1999/xhtml" >'+ val +'</textarea>`enter code here`</foreignObject>')); 
```

# ios - 定位自定义 MKAnnotationView

> ID：13848042
> 
> 赞同：9
> 
> 时间：2012-12-12T20:28:38.823
> 
> 标签：ios, mkannotation, mkannotationview, mapkit

我创建了一个自定义的 MKAnnoationView，如下所示：

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKAnnotationView* customPinView = [[MKAnnotationView alloc]
                                           initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];

    UIImage *pinImage = [PowerPlantAnnotation getAnnotationImageForEnergySource:((PowerPlantAnnotation*)annotation).energySource];
    customPinView.image = pinImage;
    return customPinView;
} 
```

我得到了我想要或多或少定位在正确位置的图像，但不完全是。我的图像如下所示：

![在此处输入图像描述](../Images/488a5df366152ce3c5b4ad846c6f0217.png)

我希望泪滴的底点指向我的注释地图坐标，就像标准引脚视图指向地图坐标一样。我怎样才能做到这一点？目前，它看起来更像是我的图像以地图坐标为中心。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T20:48:09.960

默认情况下，注释视图中心位于注释坐标处。要调整视图位置，请设置其[centerOffset](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008207-CH1-SW19)属性：

```
annotationView.centerOffset = CGPointMake(0.0f, -annotationViewHeight/2); 
```

# sql - 插入 SQL Server 2005

> ID：13848043
> 
> 赞同：0
> 
> 时间：2012-12-12T20:28:43.083
> 
> 标签：sql, tsql, sql-server-2005

我有一个简单的问题。我有两张桌子`FROM`和`TO`. 我想将列`Group`从复制`FROM`到，`TO`但只复制与`id_number`. 它应该很简单，但我被卡住了。

```
insert into TO (Group)
   SELECT Group 
   FROM FROM
   WHERE FROM.id_number like TO.id_number 
```

或者

```
INSERT INTO TO (Group)
   SELECT Group 
   FROM FROM
   WHERE id_number IN (SELECT id_number FROM TO) 
```

这只是向表中添加了额外的列，它不会按照`id_number`...更新行。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:37:53.773

您说“仅与 id_number 匹配的行”。这意味着`update`不是`insert`。

```
update [TO] set [Group] = [FROM].[Group]
from [FROM]
inner join [TO] on [FROM].id_number = [TO].id_number 
```

# opencv - BeagleBone、OpenCV 和网络摄像头问题

> ID：13848045
> 
> 赞同：1
> 
> 时间：2012-12-12T20:29:00.847
> 
> 标签：opencv, camera, beagleboard, angstrom-linux

我一直在尝试让[BeagleBone](https://en.wikipedia.org/wiki/BeagleBoard#BeagleBone)与[OpenCV](http://en.wikipedia.org/wiki/OpenCV)和捕获相机一起工作，但到目前为止我无法做到。我使用[罗技 C270](http://www.logitech.com/en-us/product/hd-webcam-c270)网络摄像头。这是我到目前为止所做的：

1.  我安装了 OpenCV 二进制文件并尝试了我的相机。捕获不起作用。我从 Git 下载了最新版本并编译了它。然后它在我的桌面上工作。
2.  由于[Ångström](https://en.wikipedia.org/wiki/%C3%85ngstr%C3%B6m_distribution)已经预装了OpenCV，我直接尝试连接网络摄像头。但是我有“选择超时”错误，当我保存捕获的图像时，它全是黑色的。
3.  `opkg remove opencv`我从 Ångström（和`opencv-dev`）中删除了 OpenCV 。它说它有效，但图书馆仍在`/usr`. 所以我手动删除了它们并复制了我在主机中交叉编译的库。但是现在，我什至无法连接到相机。捕获再次返回 null。

我检查了 opkg list-installed，仍然列出了 OpenCV 2.4。但是，其中的库`/usr/lib`和包含的是我复制的库。我该如何解决这个问题？

注意：网络摄像头被 Ångström 识别，并且[dmesg](https://en.wikipedia.org/wiki/Dmesg)显示成功连接到网络摄像头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T07:52:56.537

Linux 本身的安装似乎有问题。我重新编译了最新的 Ångström 并将其安装到 BeagleBone。一切正常。有时似乎最好采取艰难的方式。

# c++ - C - 变量 'p_prvy' 正在被使用而没有被初始化

> ID：13848048
> 
> 赞同：1
> 
> 时间：2012-12-12T20:29:13.193
> 
> 标签：c++, c, visual-studio-2010, pointers, linked-list

我正在尝试编译我的代码，但我无法编译它。我正在使用 VS 2010 并收到以下消息：

> “Tel_zoznam.exe”：已加载“C:\Windows\SysWOW64\msvcr100d.dll”，已加载符号。运行时检查失败 #3 - 变量“p_prvy”在未初始化的情况下被使用。

它停在`p_prvy->next = NULL;`

这是我的代码：

```
#include "stdafx.h"

#define MAX 31

typedef struct ZOZNAM{
    char meno[MAX];
    char priezvisko[MAX];
    char cislo1[MAX];
    char cislo2[MAX];
    char cislo3[MAX];
    struct ZOZNAM *next;
} ZOZNAM;

int main(void){
    char c;
    ZOZNAM * p_prvy;
ZOZNAM * p_akt;
    p_prvy->next = NULL;
    int z;
    p_akt=p_prvy;

    printf(" Pre pridanie kontaktu do zoznamu stlacte 'p'\n Pre vypis zoznamu zadajte 'v'\n Pre ukoncenie programu zadajte 'k'\n");
    z=pocet_zaznamov();
    printf("%d",z);
    while(1==1){
        scanf("%c",&c);

        switch(c){
            case 'p': vlozit(p_akt); break;
            case 'v': vypis(p_prvy); break;
            case 'n': nacitanie(p_akt); break;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:32:12.043

它几乎可以告诉您错误是什么：您在初始化变量之前使用了它，因此您正在调用未定义的行为。

```
ZOZNAM *p_prvy;
p_prvy->next = NULL; 
```

是错误的，因为你还没有为它分配内存`p_prvy`你取消引用它。为您的数据类型创建一个构造函数（并考虑您的设计）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T20:34:46.663

在您的`main()`函数中，您有以下`p_prvy`变量声明：

```
ZOZNAM * p_prvy; 
```

几乎在那之后，你说：

```
p_prvy->next = NULL; 
```

这意味着您正在使用`p_prvy`变量。但是，它没有被初始化，因此具有未指定的值。这称为[未定义行为](http://en.wikipedia.org/wiki/Undefined_behavior)，或简称为 UB。

您需要做的是初始化该指针。例如，通过分配一些内存：

```
ZOZNAM * p_prvy = (ZOZNAM *)malloc(sizeof(ZOZNAM)); 
```

您也可以将其初始化为 NULL，但随后取消引用 NULL 将使您的进程停止。

# wordpress - 使用 wp_insert_post () 创建一个新页面

> ID：13848052
> 
> 赞同：2
> 
> 时间：2012-12-12T20:29:53.330
> 
> 标签：wordpress

我在安装允许您创建帖子或页面的插件时激活的 PHP 函数中有以下代码。

如果是“发布”，则完美运行并制作页面`$post_type`，但如果`$post_type`是“页面”，则它不起作用，不会创建页面。：

```
$my_post = array(
  'post_title'    => 'My page Reql',
  'post_type'     => 'page',
  'post_name'     => 'my-page',
  'post_content'  => 'This is my page reql.',
  'post_status'   => 'publish',
  'comment_status' => 'closed',
  'ping_status' => 'closed',
  'post_author' => 1,
  'menu_order' => 0
);

wp_insert_post( $my_post ); 
```

问题是什么？我找不到解决方案。

非常感谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T06:56:41.373

我想你也必须设置`guid`，像这样

```
$PageGuid = site_url() . "/my-page-req1";
$my_post  = array( 'post_title'     => 'My page Reql',
                   'post_type'      => 'page',
                   'post_name'      => 'my-page',
                   'post_content'   => 'This is my page reql.',
                   'post_status'    => 'publish',
                   'comment_status' => 'closed',
                   'ping_status'    => 'closed',
                   'post_author'    => 1,
                   'menu_order'     => 0,
                   'guid'           => $PageGuid );

$PageID = wp_insert_post( $my_post, FALSE ); // Get Post ID - FALSE to return 0 instead of wp_error. 
```

# python - Python中反引号字符的含义

> ID：13848053
> 
> 赞同：9
> 
> 时间：2012-12-12T20:29:55.883
> 
> 标签：python

我刚刚开始使用python。有人可以解释以下代码片段的第 2 行吗？我不明白这``num``一点。我试图用一个 tick 替换反引号字符`'`，但后来它坏了。只是对那条线的详细解释会很棒。

```
loop_count = 1000000
irn = ''.join([`num` for num in range(loop_count)])
number = int(irn[1]) * int(irn[10]) * int(irn[100]) * int(irn[1000]) * int(irn[10000]) * int(irn[100000]) * int(irn[1000000])
print number 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T20:35:21.093

反引号是`repr()`内置函数的已弃用别名，因此第二行等效于以下内容：

```
irn = ''.join([repr(num) for num in range(loop_count)]) 
```

这使用列表推导来创建表示数字的字符串列表，然后使用`''.join()`将该字符串列表组合成单个字符串，因此这等效于以下内容：

```
irn = ''
for num in range(loop_count):
    irn += repr(num) 
```

请注意，我`repr()`在这里使用的是与反引号一致的，但您通常会看到`str(num)`获取 int 的字符串表示形式（它们恰好是等价的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:34:29.230

1.  `for num in range(loop_count)`遍历从零到 1,000,000 的所有数字
2.  `num`in backticks 使用该[`repr()`](http://docs.python.org/2/library/functions.html#repr)函数将每个数字转换为字符串。
3.  `''.join(...)`将所有这些字符串合并为一个，它们之间没有任何分隔符。
4.  `irn = ...`将结果存储在`irn`.

# javascript - 如何插入页面跳转并在同一页面内打开选项卡

> ID：13848059
> 
> 赞同：1
> 
> 时间：2012-12-12T20:30:33.323
> 
> 标签：javascript, html

我正在尝试插入一个链接，该链接将显示“单击此处查看保修详细信息”，该链接将向下滚动页面并打开退货政策选项卡。我使用了 iframe 代码，但 ebay 不接受它并且它不起作用。我还可以使用哪些其他代码？

我要打开的“退货政策”选项卡位于“信息和政策部分”页面的一半以上 www.ebay.com/itm/Kenwood-KDC-152-Single-Din-In-Dash- MP3-CD-Receiver-Front-3-5mm-Aux-Input-/390455268429?pt=Car_Audio_In_Dash_Receivers&vxp=mtr&hash=item5ae8f2944d

谢谢大家的帮助！

为什么 ebay 不接受这个代码，它只在 IE 和 Mozilla 中有效，没有一次上传到 ebay

```
<a href="nogo" onclick="location.href='#policies'; return show('tab3');">Click Here To View Warranty Details</a></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:50:37.517

测试这个 HTML。我认为它应该工作。

```
<a href="#nogo" onclick="show('tab3')">Click Here To View Warranty Details</a> 
```

# ruby - 翻译 YARD 生成的原始数据的示例

> ID：13848062
> 
> 赞同：10
> 
> 时间：2012-12-12T20:30:55.890
> 
> 标签：ruby, documentation, yard

在[YARD 自述文件](https://github.com/lsegal/yard)中，提到了`raw data`由 YARD 生成：

> YARD 还将记录的对象作为原始数据（转储的命名空间）输出，可以重新加载以在以后生成，甚至对代码进行审计。这意味着任何开发人员都可以使用原始数据为任何自定义格式（例如 YAML）执行输出生成。

`raw data`使用和翻译成其他格式的例子/博客/教程是什么？例如，我有兴趣将部分原始数据转换为 YAML。

# jquery - 根据其背后的颜色动态更改文本颜色（谷歌地图）

> ID：13848064
> 
> 赞同：1
> 
> 时间：2012-12-12T20:31:04.657
> 
> 标签：jquery, css, google-maps

我有 google maps api 作为我的全屏背景，可以由用户调整大小和移动。我希望我在地图上的文本动态更改为它背后颜色的反色。为了提高知名度。

因此，如果用户在恰好为 0x0000FF 的海洋上空，则文本将为 0xFFFF00。这对我来说似乎很疯狂，除非有人已经完成了该功能，否则将每个像素都放在文本后面。

这存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:47:07.893

您可以在 HTML 5 中执行此操作。

基本上，您绘制一个 HTML5 画布，然后您需要在鼠标移动或发生其他事件时获取鼠标的位置。鉴于您在画布上，您可以使用它`getImageData(x, y, width, height)`来获取选择部分的像素数据。

例如：

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
var imgData=ctx.getImageData(10,10,50,50); 
```

您返回的数据对象包含选择中每个像素的四个值，R、G、B 和 A。RGB 是颜色通道，A 是 Alpha 通道（可见性）。

下一步是将该值从 RGB 转换为 Hex，您可以使用一个简单的辅助函数来完成：

```
function rgbToHex(r, g, b) {
    return ((r << 16) | (g << 8) | b).toString(16);
} 
```

现在您有了颜色，您需要创建一个映射或函数来获得反色。根据您想要的效果，您必须稍微使用此功能。这里有两个做这种事情的站点，您可以查看源代码以查看它们的功能并在需要时进行修改。

*   [反色码生成器](http://www.angelfire.com/ny5/consigliere/inversegenerator.html)
*   [反色/反色生成器](http://www.wtv-zone.com/spacemany/inverse.html)

然后您可以使用 JQuery 设置文本的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-07T12:57:25.913

这就是我所做的，我使用透明背景突出显示文本。我想这可能对你有用。

![在此处输入图像描述](../Images/d4ff6c52ec1b68916301567d25d923aa.png)

# sql - SQL如何处理页面上的大量评论/注释

> ID：13848067
> 
> 赞同：2
> 
> 时间：2012-12-12T20:31:09.603
> 
> 标签：sql, sql-server, database, performance, database-performance

我有一个会在页面上生成大量笔记的应用程序。用户可以单击页面上的任意位置以创建快速注释（例如 Acrobat Pro） 这些注释通常可以使用一些 javascript 行添加和删除`<div id="notes">`

```
<div id="notes">
    <div class="note" id="note-1"><input type="text" value="Some note"></div>
    <div class="note" id="note-2"><input type="text" value="Some note"></div>
    <div class="note" id="note-3"><input type="text" value="Some note"></div>
    <div class="note" id="note-4"><input type="text" value="Some note"></div>
    <div class="note" id="note-5"><input type="text" value="Some note"></div>
    <div class="note" id="note-6"><input type="text" value="Some note"></div>
    <div class="note" id="note-7"><input type="text" value="Some note"></div>
</div> 
```

你会说只将所有笔记的标记存储在数据库中而不是在这种情况下存储 7、100 条或更多笔记是个好主意吗？那是我最初的想法；调用 1 个巨大的字段是否比 100 个或更多内容更短（输入值）的性能更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:51:48.790

拥有 1 个巨大的字段只是混乱，不适合 RDBMS 模型。仅查看 SQL 数据并理解它是比较困难的。您无法索引这些类型的字段，因此查找特定注释需要很长时间。插入和删除可能也需要更长的时间。您需要特定的功能来处理拆分此字段中的数据。

改为有 100 行......嗯，这是更多的行（虽然如果你查看中型数据库的话根本不多），但如果你只存储最少的数据，并正确索引，你最终可以得到一个结构这并不比单场方法更大或更慢。

基本上，你需要考虑你想用这些笔记做什么。如果最常见的操作只是`give me all notes`，那么您可能只需要一个字段即可。一旦您开始进行大量插入、删除和搜索，许多行的性能就会优于单个字段。为了可维护性，在任何一种情况下都使用多行可能会更好（以防需求发生一些变化）。

# python-2.7 - Python 运行系统命令并保存输出

> ID：13848070
> 
> 赞同：2
> 
> 时间：2012-12-12T20:31:18.250
> 
> 标签：python-2.7

1）编写运行系统命令的python程序（即“dir”） 2）将系统命令的输出保存到变量中 3）打印变量

这是在 Python 中完成的，我想不通，我发现一个使用子进程只返回“0”的。

我正在使用 Wndows 7 Python 2.5 和 2.7

基本上，我想要类似 cmd -> dir C:\

然后使用 Python 将该输出保存到文件中。

帮助会很好，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:35:49.897

您可以使用[`subprocess.check_output`](http://docs.python.org/2/library/subprocess.html#subprocess.check_output)：

从文档：

> `subprocess.check_output(args, stdin=None, stderr=None, shell=False, universal_newlines=False)`
> 
> 使用参数运行命令并将其输出作为字节字符串返回。

例子：

```
>>> subprocess.check_output(["echo", "Hello World!"])
'Hello World!\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:44:04.363

这是我在[其他地方](http://www.daniweb.com/software-development/python/code/257449/a-command-class-to-run-shell-commands)找到的一门课程，似乎可以完成您正在寻找的东西

```
class Command(object):
    """Run a command and capture it's output string, error string and exit status"""
    def __init__(self, command):
        self.command = command
    def run(self, shell=True):
        import subprocess as sp
        process = sp.Popen(self.command, shell = shell, stdout = sp.PIPE, stderr = sp.PIPE)
        self.pid = process.pid
        self.output, self.error = process.communicate()
        self.failed = process.returncode
        return self
    @property
    def returncode(self):
        return self.failed 
```

要运行它，只需执行以下操作：

```
commandVar = Command("dir").run() 
```

然后查看结果：

```
commandVar.output 
```

# angularjs - Angularjs：2路绑定在包含的模板中不起作用

> ID：13848071
> 
> 赞同：16
> 
> 时间：2012-12-12T20:31:22.020
> 
> 标签：angularjs

我想我在这里遗漏了一些简单（且重要）的东西。我正在使用一个包含的模板，其中包含一个映射到某个值的输入：

```
<div ng-controller="Ctrl">
    <div ng-include src="'template.html'"></div>
</div>

<!-- template -->
<script type="text/ng-template" id="template.html">
    <input ng-model="testvalue" />
</script> 
```

控制器：

```
function Ctrl($scope) {    
   $scope.testvalue= "initial value";
}​ 
```

提醒 $scope.testvalue 的值始终显示初始值，而不是更新后的值（当您输入输入时）。帮帮我欧比旺。你是我们唯一的希望。

小提琴：http: [//jsfiddle.net/h5aac/](http://jsfiddle.net/h5aac/)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-12T20:59:14.990

这是绑定到基元而不是对象的常见做法。字符串的值被传递而不是对对象的引用。如果您使用对象而不是原语，它可以正常工作。在你的范围内有这样的东西。

```
$scope.foo = {testvalue: "initial value"}; 
```

见[http://jsfiddle.net/h5aac/2/](http://jsfiddle.net/h5aac/2/)

还：

[在 AngularJS 的嵌入指令中使用 `ng-model`](https://stackoverflow.com/questions/13193929/using-ng-model-within-a-transcluded-directive-in-angularjs/13201939#13201939)

[ngRepeat 中的指令时的绑定问题](https://stackoverflow.com/questions/13148609/binding-issue-when-a-directive-in-a-ngrepeat/13150796)

[AngularJS - 使用异步响应更新范围值](https://stackoverflow.com/questions/12502237/angularjs-updating-scope-value-with-asynchronous-response/12502641)

我敢肯定还有更多...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T23:48:49.690

在父作用域中引用对象属性的另一种方法是使用 $parent 来访问父作用域中的原语：

```
<input ng-model="$parent.testvalue" /> 
```

ng-include 创建一个子范围。该范围原型继承自 Ctrl 的父范围。以下是这 3 种变体的工作原理：

*   $parent.testvalue 将模型与父范围内的属性联系起来
*   testvalue 本身将模型与将在子范围内创建的新属性联系起来。此属性以相同的名称“隐藏/隐藏”父范围属性。
*   foo.testvalue （例如，请参阅@dnc253 的答案）还将模型与父属性联系起来。它的工作原理是这样的：Javascript 在子作用域中看不到/找到“foo”，因此它在父作用域中查找它（由于原型继承）并在那里找到它。

要查看子范围的外观，请使用您原来的小提琴，并将此代码添加到您的模板中的某处：

```
<a ng-click="showScope($event)">show scope</a> 
```

并将此代码添加到您的 Ctrl：

```
$scope.showScope = function(e) {
   console.log(angular.element(e.srcElement).scope());
} 
```

在输入文本框之前，单击“显示范围”链接。在控制台（我正在使用 Chrome）中，您可以扩展“子”范围并看到它还没有包含 testvalue 属性（我觉得这很奇怪，因为我不知道它是如何显示“初始值”的在文本框中）。您可以展开 $parent 并在那里看到 testvalue 属性——具有此名称的属性此时似乎仅在父范围内。

现在，清除控制台，在文本框中输入，然后再次单击“显示范围”链接。您会看到“Child”范围现在有一个新的 testvalue 属性。它隐藏/隐藏父属性。因此，子作用域中的事物看到子作用域 testvalue 属性，而父作用域中的事物看到父作用域 testvalue 属性。

**更新：**仅供参考，我最近写了一篇关于范围原型继承的广泛答案/文章，其中更详细地解释了上述概念，并附有大量图片：[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)

# qt - 如何使 Qt MainWindow 类简单？

> ID：13848072
> 
> 赞同：4
> 
> 时间：2012-12-12T20:31:23.393
> 
> 标签：qt, mainwindow

GUI（如 Qt 应用程序）中的 MainWindow 类通常非常大，包括所有的菜单、工具栏、中央小部件和其他小部件，以及与各种事件相对应的大量成员函数和许多其他成员便利函数来做这个或那个.

有什么好的策略来简化课程吗？

非常感谢！

杰登

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:39:31.343

与分解任何大型组件的方式相同：

> 将功能和职责抽象（分解）为子组件；重复直到达到合适的粒度级别。

没有任何具体细节，很难更准确。

# r - ggplot2 参数如何工作？

> ID：13848074
> 
> 赞同：3
> 
> 时间：2012-12-12T20:31:35.467
> 
> 标签：r, ggplot2

在 R with 中`ggplot2`，这两行似乎做同样的事情：

```
qplot(data=diamonds, carat, price)
qplot(data=diamonds, get("carat"), get("price")) 
```

但我不明白它们是如何工作的......

R如何理解`carat`第一种情况`get("carat")`指的是什么，第二种情况指的是什么？如果我只是尝试访问`carat`或`get("carat")`自行访问，我会得到（不出所料）

```
> carat
Error: object 'carat' not found
> get("carat")
Error in get("carat") : object 'carat' not found 
```

在幕后，如何`ggplot2`设置绑定以使这些优雅的调用语义“正常工作”，更具体地说，我将如何自己实现这种事情？我试图阅读源代码，但无法理解它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T21:31:01.407

Hadley 是 ggplot2 的创建者，在 devtools wiki 上有一篇关于构建您自己的`subset`函数版本的精彩条目——它也需要一个数据参数。阅读它我学到了很多东西，我愿意打赌文章中建立的机制与实际情况非常相似`ggplot`。

[https://github.com/hadley/devtools/wiki/Evaluation](https://github.com/hadley/devtools/wiki/Evaluation)

# windows-mobile - 防止更改对智能设备设置 CAB 的依赖项

> ID：13848080
> 
> 赞同：2
> 
> 时间：2012-12-12T20:31:48.100
> 
> 标签：windows-mobile, dependencies, installation, cab, smart-device

我有一个由 shell 和几个模块组成的 Windows Mobile 应用程序。每个模块都有自己的安装项目，用于生成 CAB 文件来安装它，还有一个用于用作基础应用程序的 shell。我遇到的问题是，每次我打开一个模块的解决方案（每个模块都有自己的解决方案，根据需要引用其他项目）时，Visual Studio 会刷新安装项目的依赖项，实际上会破坏整个设置项目。

我有两个与此相关的主要问题，第一个是安装程序 CAB 正在拉入多个 DLL 的两个版本。一个来自 Compact Framework，另一个是“普通”DLL。这会使 CAB 大小呈指数增长并导致警告，因为有两个同名文件。

我遇到的第二个问题是每个模块的安装程序应该只包含模块 DLL，而不是任何依赖项（因为它们都是外壳 CAB 的一部分）。但是，每次打开解决方案时，我都必须在构建 CAB 之前手动删除每个依赖项。

另外值得注意的是，这些项目已签入 Team Foundation Server，但不知何故设法在未签出的情况下进行更改。

我正在运行 Visual Studio 2008，针对 .NET 3.5 Framework 进行开发，适用于 Windows Mobile 5.1-6.5。

我将不胜感激有关此问题的任何见解，因为每次我需要进行发布时都重新处理依赖项非常耗时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T23:28:45.833

智能设备 CAB 项目令人厌恶。它仅适用于最简单的部署（即使这样也有限制）。我们最终为所有安装采用的解决方案是手动滚动 INF 文件（您可以使用当前 CAB 项目创建的基线 INF 文件），然后直接从批处理文件/命令行调用 CABWIZ 以生成安装 CAB。这听起来很痛苦，但实际上并非如此，而且它也有助于通过 MSBUILD 实现自动化，因此构建部署包更容易实现自动化。

# lucene - 是否可以在 Lucene 字段上编写具有多个 AND / OR 术语的 lucene 搜索查询？

> ID：13848084
> 
> 赞同：0
> 
> 时间：2012-12-12T20:32:09.977
> 
> 标签：lucene

根据此页面：

[http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)

你可以做类似的搜索

标题：“正确的方式”和文字：去

但是当我做类似的事情时：

title:"The Right Way" OR title:"Home" 即使我知道有标题为“Home”的页面，我也没有得到任何结果。

如何构建 Lucene 查询以对同一字段执行多个 OR/AND？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:46:51.763

如果打印 Query `queryParser.parse("title:\"The Right Way\" OR title:\"Home\"")`by `StandardAnalyzer`，结果是 Query is [ *title:"the right way" **title:home*** ]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:53:09.030

在调试查询时，我总是使用[Luke](http://code.google.com/p/luke/)。Luke 可以让您准确了解 Lucene 如何解释您的查询（因为 AND 和 OR 被转换为 SHOULD 和 MUST）。

# google-apps-script - 读取 HTTP 请求标头，并修改 Apps Script Web 应用的响应标头

> ID：13848086
> 
> 赞同：5
> 
> 时间：2012-12-12T20:32:16.543
> 
> 标签：google-apps-script

我可以修改 HTTP 响应标头以添加 cookie 和额外信息吗？此外，我在阅读请求标头时遇到了麻烦。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T21:44:52.050

您无法在部署为 Web 应用程序的 Apps 脚本应用程序中读取或设置 HTTP 标头。您只能分别阅读查询字符串或 GET/POST 的发布值。响应时只能返回内容和 MIME 类型（仅限于[几种](https://developers.google.com/apps-script/class_contentservice_mimetype)类型）

这是因为脚本是在 Google.com 域之外提供的，您不应该有办法设置/获取可能被用于恶意原因的 cookie。

但是，如果您在 Apps 脚本应用程序中使用[UrlFetch](https://developers.google.com/apps-script/service_urlfetch)进行出站调用，则您可以更好地控制 HTTP 标头

# java - 需要解决特定情况下applet crash JVM

> ID：13848095
> 
> 赞同：4
> 
> 时间：2012-12-12T20:33:06.483
> 
> 标签：java, applet, jvm, internet-explorer-9, jvm-crash

我的任务是将我们古老的 Java 小程序从小程序标签更新为对象标签，因为小程序标签已经被弃用了一段时间。该小程序必须可以追溯到早期的 Java 1.6 版本，在可追溯到 IE6 的浏览器上。我制作了以下对象标签来处理这个问题，根据用户是否使用 IE 来切换它们。<% %> 中的语句评估良好，只需填写 jar 文件等。

```
<% If userIsIE > 0 Then %>
        <object type="application/x-java-applet" classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" height="0" width="0"> 
            <param name="code" value="<% =MainClass %>" />
            <param name="archive" value="<% =Archives %>" />
            <param name="persistState" value="false" />
        </object>
        <% Else %>
        <object classid="java:<% =MainClass %>" type="application/x-java-applet" archive="<% =Archives %>" height="0" width="0">
            <param name="code" value="<% =MainClass %>" />
            <param name="archive" value="<% =Archives %>" />
            <param name="persistState" value="false" />
        </object>
<% End If %> 
```

它适用于我尝试过的所有浏览器，以及我尝试过的所有 Java 版本，除了我的同事发现的一个特定情况：使用 Java 1.6.0_20 运行 IE9（可能还有其他一些旧版本，未经证实）导致页面崩溃，将其留在我的桌面上：

```
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d413f5f, pid=2444, tid=4660
#
# JRE version: 6.0_20-b02
# Java VM: Java HotSpot(TM) Client VM (16.3-b01 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [jp2iexp.dll+0x3f5f]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x00b09000):  JavaThread "main" [_thread_in_native, id=4660, stack(0x027c0000,0x029c0000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x00000000

Registers:
EAX=0x00000000, EBX=0x3420a218, ECX=0x0041f5e0, EDX=0x029bd5bc
ESP=0x029bd598, EBP=0x029bd5a8, ESI=0x00000000, EDI=0x00b09000
EIP=0x6d413f5f, EFLAGS=0x00010206

Top of Stack: (sp=0x029bd598)
0x029bd598:   029bd5bc 029bd5a4 3420a218 00000000
0x029bd5a8:   029bd5e8 05e89f47 00b09110 029bd5f0
0x029bd5b8:   00442258 00000000 00b096ac fffffffe
0x029bd5c8:   029bd5c8 3420a218 029bd5fc 34213020
0x029bd5d8:   00000000 3420a218 00000000 029bd5f8
0x029bd5e8:   029bd624 05e82f07 34212a30 05e88286
0x029bd5f8:   00442258 00000000 32298a58 029bd604
0x029bd608:   3420a187 029bd62c 34213020 00000000 

Instructions: (pc=0x6d413f5f)
0x6d413f4f:   33 f6 85 c0 7c 3a 8b 45 fc 8d 55 14 52 89 75 14
0x6d413f5f:   8b 08 50 ff 91 a0 00 00 00 85 c0 7c 1a 8b 75 14 

Stack: [0x027c0000,0x029c0000],  sp=0x029bd598,  free space=7f5029bd0cck
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [jp2iexp.dll+0x3f5f]
j  sun.plugin2.main.server.IExplorerPlugin.getDocumentBase0(J)Ljava/lang/String;+0
j  sun.plugin2.main.server.IExplorerPlugin.getDocumentBase()Ljava/lang/String;+31
j  sun.plugin2.main.server.JVMInstance.startApplet(Ljava/util/Map;Lsun/plugin2/main/server/Plugin;JJZIZZ)Z+14
j  sun.plugin2.main.server.JVMManager.startAppletImpl(Ljava/util/Map;Lsun/plugin2/main/server/Plugin;JJZLjava/lang/String;ZIZ)Lsun/plugin2/main/server/AppletID;+240
j  sun.plugin2.main.server.JVMManager.startApplet(Ljava/util/Map;Lsun/plugin2/main/server/Plugin;JJZLjava/lang/String;)Lsun/plugin2/main/server/AppletID;+16
j  sun.plugin2.main.server.JVMManager.startApplet(Ljava/util/Map;Lsun/plugin2/main/server/Plugin;JJZ)Lsun/plugin2/main/server/AppletID;+19
j  sun.plugin2.main.server.IExplorerPlugin.maybeStartApplet()V+192
j  sun.plugin2.main.server.IExplorerPlugin.access$200(Lsun/plugin2/main/server/IExplorerPlugin;)V+1
j  sun.plugin2.main.server.IExplorerPlugin$BackgroundStarter$1.run()V+7
v  ~StubRoutines::call_stub
V  [jvm.dll+0xf049c]
V  [jvm.dll+0x17fcf1]
V  [jvm.dll+0xf051d]
V  [jvm.dll+0xf9e0f]
V  [jvm.dll+0xfcc07]
C  [jp2iexp.dll+0x17a5]
C  [jp2iexp.dll+0x853b]
C  [jp2iexp.dll+0x7a32]
C  [USER32.dll+0x1fd72]
C  [USER32.dll+0x1fe4a]
C  [USER32.dll+0x2018d]
C  [USER32.dll+0x2022b]
C  [IEFRAME.dll+0xf1c24]
C  [IEFRAME.dll+0x111afe]
C  [iertutil.dll+0x1416c0]
C  [IEFRAME.dll+0xffe3b]
C  [kernel32.dll+0x4d0e9]
C  [ntdll.dll+0x41603]
C  [ntdll.dll+0x415d6]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  sun.plugin2.main.server.IExplorerPlugin.getDocumentBase0(J)Ljava/lang/String;+0
j  sun.plugin2.main.server.IExplorerPlugin.getDocumentBase()Ljava/lang/String;+31
j  sun.plugin2.main.server.JVMInstance.startApplet(Ljava/util/Map;Lsun/plugin2/main/server/Plugin;JJZIZZ)Z+14
j  sun.plugin2.main.server.JVMManager.startAppletImpl(Ljava/util/Map;Lsun/plugin2/main/server/Plugin;JJZLjava/lang/String;ZIZ)Lsun/plugin2/main/server/AppletID;+240
j  sun.plugin2.main.server.JVMManager.startApplet(Ljava/util/Map;Lsun/plugin2/main/server/Plugin;JJZLjava/lang/String;)Lsun/plugin2/main/server/AppletID;+16
j  sun.plugin2.main.server.JVMManager.startApplet(Ljava/util/Map;Lsun/plugin2/main/server/Plugin;JJZ)Lsun/plugin2/main/server/AppletID;+19
j  sun.plugin2.main.server.IExplorerPlugin.maybeStartApplet()V+192
j  sun.plugin2.main.server.IExplorerPlugin.access$200(Lsun/plugin2/main/server/IExplorerPlugin;)V+1
j  sun.plugin2.main.server.IExplorerPlugin$BackgroundStarter$1.run()V+7
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x056d0400 JavaThread "JRE 1.6.0.20 Heartbeat Thread" [_thread_blocked, id=5860, stack(0x085d0000,0x086d0000)]
  0x056dc000 JavaThread "JRE 1.6.0.20 Worker Thread" [_thread_blocked, id=3760, stack(0x09580000,0x09680000)]
  0x056db800 JavaThread "JRE 1.6.0.20 Output Reader Thread" [_thread_in_native, id=3828, stack(0x09390000,0x09490000)]
  0x056db400 JavaThread "JRE 1.6.0.20 Output Reader Thread" [_thread_in_native, id=5472, stack(0x09120000,0x09220000)]
  0x056d9c00 JavaThread "Thread-0" [_thread_in_native, id=3572, stack(0x08d10000,0x08e10000)]
  0x056d8400 JavaThread "Java Plug-In Pipe Worker Thread (Server-Side)" daemon [_thread_in_native, id=3944, stack(0x08f10000,0x09010000)]
  0x05668800 JavaThread "traceMsgQueueThread" daemon [_thread_blocked, id=3620, stack(0x08ab0000,0x08bb0000)]
  0x05640000 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=6092, stack(0x08940000,0x08a40000)]
  0x0563b800 JavaThread "CompilerThread0" daemon [_thread_blocked, id=2788, stack(0x086d0000,0x087d0000)]
  0x05639400 JavaThread "Attach Listener" daemon [_thread_blocked, id=3728, stack(0x08060000,0x08160000)]
  0x05637400 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=2912, stack(0x084c0000,0x085c0000)]
  0x0562f800 JavaThread "Finalizer" daemon [_thread_blocked, id=4596, stack(0x082d0000,0x083d0000)]
  0x0562e400 JavaThread "Reference Handler" daemon [_thread_blocked, id=4676, stack(0x08160000,0x08260000)]
=>0x00b09000 JavaThread "main" [_thread_in_native, id=4660, stack(0x027c0000,0x029c0000)]

Other Threads:
  0x0562c000 VMThread [stack: 0x07f50000,0x08050000] [id=4684]
  0x05647000 WatcherThread [stack: 0x08840000,0x08940000] [id=760]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 4928K, used 1321K [0x32200000, 0x32750000, 0x32ca0000)
  eden space 4416K,  29% used [0x32200000, 0x3234a460, 0x32650000)
  from space 512K,   0% used [0x32650000, 0x32650000, 0x326d0000)
  to   space 512K,   0% used [0x326d0000, 0x326d0000, 0x32750000)
 tenured generation   total 10944K, used 0K [0x32ca0000, 0x33750000, 0x34200000)
   the space 10944K,   0% used [0x32ca0000, 0x32ca0000, 0x32ca0200, 0x33750000)
 compacting perm gen  total 12288K, used 705K [0x34200000, 0x34e00000, 0x38200000)
   the space 12288K,   5% used [0x34200000, 0x342b05f8, 0x342b0600, 0x34e00000)
    ro space 10240K,  51% used [0x38200000, 0x3872ae00, 0x3872ae00, 0x38c00000)
    rw space 12288K,  54% used [0x38c00000, 0x392972d8, 0x39297400, 0x39800000)

Dynamic libraries:
0x01100000 - 0x011b8000     C:\Program Files\Internet Explorer\iexplore.exe
0x77910000 - 0x77a38000     C:\Windows\system32\ntdll.dll
0x77650000 - 0x7772c000     C:\Windows\system32\kernel32.dll
0x77730000 - 0x777f6000     C:\Windows\system32\ADVAPI32.dll
0x77aa0000 - 0x77b63000     C:\Windows\system32\RPCRT4.dll
0x77870000 - 0x7790d000     C:\Windows\system32\USER32.dll
0x77800000 - 0x7784b000     C:\Windows\system32\GDI32.dll
0x760f0000 - 0x7619a000     C:\Windows\system32\msvcrt.dll
0x77490000 - 0x774e9000     C:\Windows\system32\SHLWAPI.dll
0x761d0000 - 0x76ce1000     C:\Windows\system32\SHELL32.dll
0x76f40000 - 0x77085000     C:\Windows\system32\ole32.dll
0x75fd0000 - 0x760e1000     C:\Windows\system32\urlmon.dll
0x774f0000 - 0x7757d000     C:\Windows\system32\OLEAUT32.dll
0x77120000 - 0x772d8000     C:\Windows\system32\iertutil.dll
0x77370000 - 0x7748b000     C:\Windows\system32\WININET.dll
0x77a40000 - 0x77a43000     C:\Windows\system32\Normaliz.dll
0x77850000 - 0x7786e000     C:\Windows\system32\IMM32.DLL
0x77580000 - 0x77648000     C:\Windows\system32\MSCTF.dll
0x77110000 - 0x77119000     C:\Windows\system32\LPK.DLL
0x77090000 - 0x7710d000     C:\Windows\system32\USP10.dll
0x74a90000 - 0x74c2e000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.6002.18305_none_5cb72f2a088b0ed3\comctl32.dll
0x6d630000 - 0x6df76000     C:\Windows\system32\IEFRAME.dll
0x75fc0000 - 0x75fc7000     C:\Windows\system32\PSAPI.DLL
0x74350000 - 0x7438e000     C:\Windows\system32\OLEACC.dll
0x76d20000 - 0x76d93000     C:\Windows\system32\comdlg32.dll
0x71ac0000 - 0x71af1000     C:\Program Files\Internet Explorer\IEShims.dll
0x75e60000 - 0x75e74000     C:\Windows\system32\Secur32.dll
0x76cf0000 - 0x76d1d000     C:\Windows\system32\WS2_32.dll
0x76da0000 - 0x76da6000     C:\Windows\system32\NSI.dll
0x75830000 - 0x75849000     C:\Windows\system32\iphlpapi.dll
0x757f0000 - 0x75825000     C:\Windows\system32\dhcpcsvc.DLL
0x75a70000 - 0x75a9c000     C:\Windows\system32\DNSAPI.dll
0x757e0000 - 0x757e7000     C:\Windows\system32\WINNSI.DLL
0x757b0000 - 0x757d2000     C:\Windows\system32\dhcpcsvc6.DLL
0x6c5a0000 - 0x6d15b000     C:\Windows\system32\MSHTML.dll
0x752c0000 - 0x752c8000     C:\Windows\system32\VERSION.dll
0x75370000 - 0x753ab000     C:\Windows\system32\rsaenh.dll
0x772e0000 - 0x77364000     C:\Windows\system32\CLBCatQ.DLL
0x714a0000 - 0x714d2000     C:\Program Files\Internet Explorer\ieproxy.dll
0x71e60000 - 0x71eb3000     C:\Windows\system32\ACTXPRXY.DLL
0x75e00000 - 0x75e2c000     C:\Windows\system32\apphelp.dll
0x71aa0000 - 0x71ab1000     C:\Program Files\Common Files\Adobe\Acrobat\ActiveX\AcroIEHelperShim.dll
0x714e0000 - 0x7157b000     C:\Windows\WinSxS\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4016_none_d0893820442e7fe4\MSVCR80.dll
0x715b0000 - 0x71637000     C:\Windows\WinSxS\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4016_none_d0893820442e7fe4\MSVCP80.dll
0x73490000 - 0x734a0000     C:\Program Files\Common Files\Adobe\Acrobat\ActiveX\AcroIEHelper.dll
0x6d440000 - 0x6d44c000     C:\Program Files\Java\jre6\bin\jp2ssv.dll
0x7c340000 - 0x7c396000     C:\Program Files\Java\jre6\bin\MSVCR71.dll
0x75d40000 - 0x75d9f000     C:\Windows\system32\SXS.DLL
0x73c20000 - 0x73c50000     C:\Windows\system32\MLANG.dll
0x74470000 - 0x744ba000     C:\Windows\system32\RASAPI32.dll
0x746e0000 - 0x746f4000     C:\Windows\system32\rasman.dll
0x75cc0000 - 0x75d36000     C:\Windows\system32\NETAPI32.dll
0x74430000 - 0x74461000     C:\Windows\system32\TAPI32.dll
0x74620000 - 0x7462c000     C:\Windows\system32\rtutils.dll
0x74390000 - 0x743c2000     C:\Windows\system32\WINMM.dll
0x75e80000 - 0x75e9e000     C:\Windows\system32\USERENV.dll
0x758d0000 - 0x759c2000     C:\Windows\system32\CRYPT32.dll
0x75a30000 - 0x75a42000     C:\Windows\system32\MSASN1.dll
0x73020000 - 0x73026000     C:\Windows\system32\sensapi.dll
0x75700000 - 0x75707000     C:\Windows\system32\credssp.dll
0x753b0000 - 0x753f7000     C:\Windows\system32\schannel.dll
0x70c60000 - 0x70ccc000     C:\Windows\system32\ieapfltr.dll
0x6f570000 - 0x6f72b000     C:\Windows\System32\jscript9.dll
0x73000000 - 0x7300b000     C:\Windows\system32\msimtf.dll
0x74930000 - 0x749eb000     C:\Windows\system32\PROPSYS.dll
0x71970000 - 0x71a64000     C:\Windows\system32\windowscodecs.dll
0x76db0000 - 0x76f3a000     C:\Windows\system32\setupapi.dll
0x70bb0000 - 0x70c5b000     C:\Windows\system32\d2d1.dll
0x70020000 - 0x70128000     C:\Windows\system32\DWrite.dll
0x70b30000 - 0x70bb0000     C:\Windows\system32\dxgi.dll
0x737f0000 - 0x737fc000     C:\Windows\system32\dwmapi.dll
0x74690000 - 0x746bd000     C:\Windows\system32\WINTRUST.dll
0x761a0000 - 0x761c9000     C:\Windows\system32\imagehlp.dll
0x716b0000 - 0x716dc000     C:\Windows\system32\d3d10_1.dll
0x713f0000 - 0x7142a000     C:\Windows\system32\d3d10_1core.dll
0x6fef0000 - 0x7001c000     C:\Windows\system32\D3D10Warp.dll
0x6f460000 - 0x6f562000     C:\Windows\system32\d3d10.dll
0x70db0000 - 0x70de3000     C:\Windows\system32\d3d10core.dll
0x752f0000 - 0x75311000     C:\Windows\system32\NTMARTA.DLL
0x77a50000 - 0x77a99000     C:\Windows\system32\WLDAP32.dll
0x75a50000 - 0x75a61000     C:\Windows\system32\SAMLIB.dll
0x755f0000 - 0x7562b000     C:\Windows\system32\mswsock.dll
0x751f0000 - 0x751f5000     C:\Windows\System32\wshtcpip.dll
0x752b0000 - 0x752bf000     C:\Windows\system32\NLAapi.dll
0x73440000 - 0x73446000     C:\Windows\system32\rasadhlp.dll
0x70af0000 - 0x70b23000     C:\Windows\system32\windowscodecsext.dll
0x72940000 - 0x72a9b000     C:\Windows\System32\msxml6.dll
0x6d410000 - 0x6d42e000     C:\Program Files\Java\jre6\bin\jp2iexp.dll
0x737d0000 - 0x737d7000     C:\Windows\system32\wsock32.dll
0x732d0000 - 0x732df000     C:\Windows\system32\napinsp.dll
0x732c0000 - 0x732c8000     C:\Windows\System32\winrnr.dll
0x744c0000 - 0x74545000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.6002.18305_none_88f3a38569c2c436\comctl32.dll
0x05be0000 - 0x05e77000     C:\PROGRA~1\Java\jre6\bin\client\jvm.dll
0x01fe0000 - 0x01fec000     C:\PROGRA~1\Java\jre6\bin\verify.dll
0x6d330000 - 0x6d34f000     C:\PROGRA~1\Java\jre6\bin\java.dll
0x6d290000 - 0x6d298000     C:\PROGRA~1\Java\jre6\bin\hpi.dll
0x02420000 - 0x0242f000     C:\PROGRA~1\Java\jre6\bin\zip.dll
0x6d430000 - 0x6d436000     C:\Program Files\Java\jre6\bin\jp2native.dll
0x6d1d0000 - 0x6d1e3000     C:\Program Files\Java\jre6\bin\deploy.dll
0x6d610000 - 0x6d623000     C:\Program Files\Java\jre6\bin\net.dll
0x75650000 - 0x75655000     C:\Windows\System32\wship6.dll
0x025b0000 - 0x025b9000     C:\Program Files\Java\jre6\bin\nio.dll
0x02760000 - 0x027a4000     C:\Program Files\Java\jre6\bin\regutils.dll
0x08bb0000 - 0x08cfa000     C:\Program Files\Java\jre6\bin\awt.dll
0x72d30000 - 0x72d72000     C:\Windows\system32\WINSPOOL.DRV

VM Arguments:
jvm_args: -Xbootclasspath/a:C:\PROGRA~1\Java\jre6\lib\deploy.jar;C:\PROGRA~1\Java\jre6\lib\javaws.jar;C:\PROGRA~1\Java\jre6\lib\plugin.jar -Xmx32m -Djava.awt.headless=true -Dkernel.background.download=false -Dkernel.download.dialog=false -XX:MaxDirectMemorySize=64m 
java_command: <unknown>
Launcher Type: generic

Environment Variables:
JAVA_HOME=C:\j2sdk1.4.2_04\
PATH=C:\Program Files\Internet Explorer;;C:\Windows\System32;C:\j2sdk1.4.2_04\bin;C:\Windows\System32\WindowsPowerShell\v1.0\
USERNAME=mlebson
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 30 Stepping 5, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows Server 2008 Build 6002 Service Pack 2

CPU:total 4 (8 cores per cpu, 2 threads per core) family 6 model 30 stepping 5, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, ht

Memory: 4k page, physical 4183352k(3147268k free), swap 8613472k(7704200k free)

vm_info: Java HotSpot(TM) Client VM (16.3-b01) for windows-x86 JRE (1.6.0_20-b02), built on Apr 12 2010 13:52:23 by "java_re" with MS VC++ 7.1 (VS2003)

time: Wed Dec 12 14:31:46 2012
elapsed time: 0 seconds 
```

它看起来像 JVM 本身中的空指针异常。如果我摆脱了我拥有的“IE 特定”版本并在 Else 之后只使用第二个版本，它仍然会发生。我也尝试将高度和宽度更改为非零值，认为它可能会对这些值做一些奇怪的事情，但没有。如果我回到使用小程序标签，同时保持所有参数和设置相同，则不会发生这种情况。现在，如果我纯粹为自己做这件事，我会接受这是旧 JVM 中的一个错误，并要求人们升级到最新版本的 Java（运行良好），但我们的许多客户都是企业用户，非常“ “粘性”的 IT 部门需要很长时间才能推出更新，或者甚至不知道 Java 是什么的用户，更不用说知道如何更新它了。我是否会放弃并继续使用小程序标签，直到浏览器完全停止支持它们？有没有我没有尝试过的技巧来完成这项工作？

编辑：我做了更多测试，看起来 java 测试页面本身（[http://www.java.com/en/download/testjava.jsp](http://www.java.com/en/download/testjava.jsp)）也会导致同样的崩溃。也许我只需要使用小程序标签，直到我们所有的客户都更新了，如果它太糟糕以至于官方的 java 测试小程序甚至无法加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:25:28.617

用于[`deployJava.js`](http://download.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html)编写小程序元素。它旨在确保为该浏览器编写正确的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:58:55.747

问题出在本机 C 框架中，看起来像 JDK 错误。

[此处](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=d529d7c9e8e20ffffffff99d08ee7a2b79dd?bug_id=6945182)报告了与 JDK 6u 19 及更高版本类似的错误。

修复看起来像是转移到 Java 7

# bash - bash中不区分大小写的字符串比较

> ID：13848101
> 
> 赞同：5
> 
> 时间：2012-12-12T20:33:29.440
> 
> 标签：bash, string-comparison

以下行删除变量之前的前导文本`$PRECEDING`

```
temp2=${content#$PRECEDING} 
```

但现在我希望`$PRECEDING`不区分大小写。这适用于`sed`'`I`标志。但我无法弄清楚整个cmd。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-25T17:43:51.087

无需调用 sed 或使用 shopt。最简单快捷的方法（只要你有 Bash 4）：

```
if [ "${var1,,}" = "${var2,,}" ]; then
  echo "matched"
fi 
```

您所做的只是将两个字符串都转换为小写并比较结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T20:38:28.910

这是使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")的一种方法：

```
temp2=$(sed -e "s/^.*$PRECEDING//I" <<< "$content") 
```

**解释：**

*   `^.*$PRECEDING`:`^`表示字符串的开头，`.`表示任何字符，`.*`表示任何字符零次或多次。因此，这意味着“匹配从字符串开头的任何模式，然后是（包括）存储在`$PRECEDING`.
*   该`I`部分表示不区分大小写，该`g`部分（如果使用它）表示“匹配所有出现”，而不仅仅是第一个。
*   该`<<<`表示法用于[herestrings](http://linux.die.net/abs-guide/x15683.html)，因此您保存一个`echo`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:40:34.887

我能想到的唯一 bash 方法是检查是否存在匹配项（不区分大小写），如果是，则从 $content 的开头排除适当*数量的字符：*

```
content=foo_bar_baz
PRECEDING=FOO
shopt -s nocasematch
[[ $content == ${PRECEDING}* ]] && temp2=${content:${#PRECEDING}}
echo $temp2 
```

输出：`_bar_baz`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-30T08:03:00.797

您的示例具有上下文切换技术。更好的是（bash v4）：

```
VAR1="HELLoWORLD"
VAR2="hellOwOrld"

if [[ "${VAR1^^}" = "${VAR2^^}" ]]; then
    echo MATCH
fi 
```

链接：[在 Bash 中将字符串从大写转换为小写](https://stackoverflow.com/questions/11392189/converting-string-from-uppercase-to-lowercase-in-bash#11392248)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-30T21:24:03.643

如果您没有 Bash 4，我发现最简单的方法是首先使用将字符串转换为小写`tr`

```
VAR1=HelloWorld
VAR2=helloworld

VAR1_LOWER=$(echo "$VAR1" | tr '[:upper:]' '[:lower:]')
VAR2_LOWER=$(echo "$VAR2" | tr '[:upper:]' '[:lower:]')

if [ "$VAR1_LOWER" = "$VAR2_LOWER" ]; then
  echo "Match"
else
  echo "Invalid"
fi 
```

`OUTPUT="Match"`这也使得通过将 echo 更改为&来将输出分配给变量变得非常容易`OUTPUT="Invalid"`

# wordpress - 灯箱不工作或将 rel=lightbox 添加到 WordPress 中的图像链接

> ID：13848102
> 
> 赞同：1
> 
> 时间：2012-12-12T20:33:30.553
> 
> 标签：wordpress

请原谅我的无知。我正在运行 WordPress 3.5 并且刚刚安装了 Lightbox Plus。我已经检查并仔细检查了设置，它应该会自动将`rel="lightbox[uniqueID|filename]"`属性添加到图像链接，但事实并非如此。

我检查了我的 header.php 并且钩子`"<?php wp_head(); ?>"`在那里。

这是从图库中添加的链接。

```
<a href="http://dreamlandhomes.ca/wp-content/uploads/5703-Elizabeth-A-main.png"><img class="aligncenter size-thumbnail wp-image-1556" alt="5703-Elizabeth-A-main" src="http://dreamlandhomes.ca/wp-content/uploads/5703-Elizabeth-A-main-150x150.png" width="150" height="150" /></a> 
```

我已经尝试手动安装该属性，但它也不起作用。只需在新选项卡中打开图像。

示例 2（手动估算的 rel）

```
<a href="http://webaddresshere/wp-content/uploads/5703-Elizabeth-A-main.png" rel="lightbox[test box]"><img class="aligncenter size-thumbnail wp-image-1556" alt="5703-Elizabeth-A-main" src="http://webaddresshere/wp-content/uploads/5703-Elizabeth-A-main-150x150.png" width="150" height="150" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:12:18.180

我认为这将是一个脚本冲突问题，我似乎一直都有同样的问题。

如果你不是 100% 准备好使用 Lightbox Plus，那么给 Fancybox 一个机会，当 Lightbox Plus 没有时，它总是对我有用。

[http://wordpress.org/extend/plugins/fancybox-for-wordpress/](http://wordpress.org/extend/plugins/fancybox-for-wordpress/)

也可以手动添加（Fancybox 脚本），然后使用以下代码为链接到图像文件的所有链接自动触发：

```
 var select = $('a[href$=".bmp"],a[href$=".gif"],a[href$=".jpg"],a[href$=".jpeg"],a[href$=".png"],a[href$=".BMP"],a[href$=".GIF"],a[href$=".JPG"],a[href$=".JPEG"],a[href$=".PNG"],.fancybox');

 $(select).fancybox({
    helpers : {
        overlay : {
            css : {
                'background' : 'rgba(255, 255, 255, 0.3)'
            }
        }
    }
 }); 
```

**更新**您不需要助手，如果有的话，您可以在其中放置配置选项 - 请参阅 Fancybox 文档。

# vmware - vmware - 从 GUEST 中恢复到快照？

> ID：13848103
> 
> 赞同：5
> 
> 时间：2012-12-12T20:33:35.947
> 
> 标签：vmware, vmware-workstation, esxi

我在`vmware ESXi`和上运行虚拟机`vmware workstation`。
我需要从来宾内部执行“恢复到*快照***”**。

 *我已经做了很多搜索，但到目前为止提出的所有解决方案都建议从“外部”进行 - 一些外部机器或*主机*本身。
其他解决方法建议启用自动恢复到`power off`事件快照。

请不要*向*那个方向提出任何建议。我真的需要从客人**内部**执行它。例如：

*   作为计划任务
*   作为批处理脚本（在完成一些其他任务结束时）

**编辑：**
这就是我认为必须有某种方法来实现这一点的原因：在来宾内部有“vmare 工具”作为系统服务运行。所以我希望这个组件也能公开一个功能来触发主机/管理程序将当前虚拟机恢复为快照。
如果目前无法做到这一点，则应将其作为新功能实现:)

如果目前无法“从内部”执行它：那也将是一个“答案”......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T12:12:38.983

我最近实际上已经这样做了，试试这个：

1.  安装 VMware vSphere PowerCLI 5.1（它是 ESX 的命令行脚本界面）
2.  编写一个包含以下代码的脚本（可能在记事本中）：

    ```
    Connect-VIServer <vCenter Server IP>
    Set-VM <VM name> -Snapshot <Snapshot name> -Confirm:$false 
    ```

    这将连接到您的 vCenter 服务器并将您的虚拟机恢复到指定的快照。将脚本另存为 revert_snapshot.ps1（PowerShell 文件扩展名）

3.  使用 Windows 任务计划，创建新任务。General 和 Triggers 选项卡是不言自明的，但 Actions 选项卡是您配置计划任务以启动 PowerShell 脚本的地方。
4.  对于“操作”，选择“启动程序”。在“程序/脚本”下，输入以下内容：

    ```
    C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe 
    ```

5.  对于“添加参数”字段，您将指定 PowerShell 脚本的路径：

    ```
    -psc "C:\Program Files (x86)\VMware\Infrastructure\vSphere PowerCLI\vim.psc1" "<path to your script>" 
    ```

注意：vim.psc1 在最新版本的 PowerCLI 中不可用。

6.  保存您的任务并手动运行它作为测试。请耐心等待，因为有时登录 vCenter (Connect-VIServer) 的 cmdlet 可能需要几秒钟才能连接。*

# html - 背景图像不会 100% 向右

> ID：13848110
> 
> 赞同：0
> 
> 时间：2012-12-12T20:34:09.117
> 
> 标签：html, css

所以我的问题是我需要我的导航栏背景图像在页面宽度的整个距离上保持明智。这是一个小提琴： http: [//jsfiddle.net/faytAlvein/FDVby/4/](http://jsfiddle.net/faytAlvein/FDVby/4/) 导航下的黑色很好忽略它。这在原版中不存在，因为它是不同的背景图像。只是宽度是问题。无论窗口大小如何，它都需要缩放 100% 的页面。如果有帮助，真实的背景图像是 1145x144。

```
 <div id="navbar" >
        <div id="links" >
            <a href="thisindexpage.php" class="navLink" >Home</a>
            <a href="aboutUs.html" class="navLink" >About Us</a>
        </div>
    </div>​ 
```

导航栏.css

```
#navbar
{
background-image: url('../images/nav.png');
background-repeat: no-repeat;
background-color: black;
}

#links
{
font-size: 20px;
font-family: helvetica;
padding-top: 25px;
padding-bottom: 94px;
margin-left: 150px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:44:10.957

您可以使用该[`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)属性将背景图像“拉伸”到 100%。

```
background-size: 100%; 
```

你的 CSS：

```
#navbar {
   background-image: url('../images/nav.png');
   background-repeat: no-repeat;
   background-color: black;
   background-size: 100%;
} 
```

[http://jsfiddle.net/FDVby/7/](http://jsfiddle.net/FDVby/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:45:03.027

使用 background-size 属性这是文档：[https ://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

# plot - 绘制不同的颜色 - Scilab

> ID：13848111
> 
> 赞同：4
> 
> 时间：2012-12-12T20:34:12.750
> 
> 标签：plot, colors, scilab

我在 Scilab 的绘图中是否可以有不同的颜色？我用 `mtlb_hold`来保存图表，它工作正常，但我的问题是我的图表中有相同的颜色。在带有命令的 Matlab 中`hold`，我有不同的颜色。Scilab 也可以有不同的颜色吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T23:17:02.957

刚找到。`plot`例如，在函数中`plot()`，您可以传递第二个参数，该参数指定将使用的颜色。例如，您可以将 use`b`用于蓝色、`g`绿色、`r`红色并`plot()`像这样调用：`plot(z,"r")`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-04T11:31:28.537

SciLab 文档提供了使用颜色的示例： [https ://help.scilab.org/doc/5.3.3/en_US/color.html](https://help.scilab.org/doc/5.3.3/en_US/color.html)

-function`plot2d()`例如接受一个属性样式，你甚至可以用它的全名为每个函数指定一种颜色：

```
plot2d(x,[sin(x),cos(x)],style=[color("red"),color("green")]); 
```

# ruby-on-rails - 使用“where”语句查找关联计数的最佳语法是什么

> ID：13848113
> 
> 赞同：2
> 
> 时间：2012-12-12T20:34:19.427
> 
> 标签：ruby-on-rails, ruby, activerecord

我可以想到几种方法来做到这一点，但我不确定该选择什么..

我有这个类`Topic`，我正在尝试对其范围进行限制，以便仅在它具有关联对象`Reply`或`topic.replies`计数大于 0 时才返回主题。

最糟糕的方法：

```
@topics.select{ | topic | topic.replies > 0 && topic.title == "Conversation" } 
```

理想情况下，我想使用`where`范围。

```
 scope = current_user.topics
  scope = scope.joins 'left outer join users on topics.registration_id = registration_members.registration_id'
  # scope = .. here I want to exclude any of these topics that have both the title "Conversations" and replies that are not greater than 0 
```

我需要将这些选择“附加”到已经选择的任何其他内容上。所以我的选择不应该将所有其他人排除在这个选择之外。这只是说任何`Topic`回复少于一个并且也称为“对话”的人都应该被排除在最终返回之外。

有任何想法吗？

**更新**

一个半哈希的想法：

```
items_table = Arel::Table.new(scope)
unstarted_conversations = scope.select{|a| a.title == "Conversation" && a.replies.count > 0}.map(&:id)
scope.where(items_table[:id].not_in unstarted_conversations) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:09:27.060

您可以使用称为***count cache***的东西，基本上它的作用是向表中添加一个字段，并将指定类型的“关联”总数存储在该字段中并自动更新。

查看这个旧屏幕/ascii 演员表：[http ://railscasts.com/episodes/23-counter-cache-column?view=asciicast](http://railscasts.com/episodes/23-counter-cache-column?view=asciicast)

这是更新的东西：http: [//hiteshrawal.blogspot.com/2011/12/rails-counter-cache.html](http://hiteshrawal.blogspot.com/2011/12/rails-counter-cache.html)

在您的情况下，如下所示：

```
# migration
class AddCounterCacheToTopìc < ActiveRecord::Migration
  def self.up
    add_column :topics, :replies_count, :integer, :default => 0
  end

  def self.down
    remove_column :topics, :replies_count
  end
end

# model
class Replay < ActiveRecord::Base
  belongs_to :topic, :counter_cache => true
end 
```

希望对您有所帮助。

# jquery - jQuery返回值未定义

> ID：13848123
> 
> 赞同：7
> 
> 时间：2012-12-12T20:34:46.993
> 
> 标签：jquery

固定的！谢谢！请参阅下面的“更正代码”。

目标是从对话框中取回数据。我看过很多文章，但无法让其中任何一篇工作，所以我决定使用 Web 服务在对话框和底层页面之间来回传递数据。

除了读取从 Web 服务返回的值的代码之外，所有代码都已就位。我可以在调试器中看到数据正在被传回，但是当我返回调用者时，返回的数据是未定义的。

jQuery 函数 getLocal 调用 AJAX，返回良好的数据，但是当它返回调用它的函数（verbListShow）时，返回值是“未定义”。

这一切都发生在一个主要用 jQuery 编写并打开一个 jQuery 对话框的 ASP.NET 页面中。

```
function getLocal(name) {
    $.ajax({
        type: "POST",
        async: false,
        url: "WebServices/FLSAService.asmx/GetLocalVariable",
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({ name: name }),
        success: function (data) {
            var rtn = data.d;
            return rtn;
        }
    });
} 
```

上面的代码可以工作，但是调用时，rtn 是未定义的。这是调用者：

```
function verbListShow(dutyNumber) {

    $('#dlgDutyList').dialog({
        modal: true,
        show: "slide",
        width: 250,
        height: 250,
        open: function (event, ui) {
            setLocal("DUTYNUMBER", dutyNumber);
        },
        buttons: {
            "Select": function () {
                var id = getLocal("VERBID"); // <*** Returns undefined
                var verb = getLocal("VERB"); // <*** Returns undefined
                $.ajax({
                    type: "POST",
                    async: false,
                    url: "WebServices/FLSAService.asmx/SetDuty",
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify({ dutyNum: dutyNumber, id: id, verb: verb }),
                    success: function (data) {
                        data = $.parseJSON(data.d);
                        if (data.ErrorFound) {
                            showMessage(data.ErrorMessage, 2, true);
                        }
                        else {
                            log('Set Duty: ' + data.StringReturn + ' (' + data.intReturn + ')');
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert("updateDuty: "
                            + XMLHttpRequest.responseText);
                    }
                });

                $(this).dialog("close");
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        }

    });
    $('#dlgDutyList').dialog('open'); 
```

固定代码：

```
function getLocal(name) {
var rtn = "";
    $.ajax({
        type: "POST",
        async: false,
        url: "WebServices/FLSAService.asmx/GetLocalVariable",
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({ name: name }),
        success: function (data) {
            rtn = data.d;
        }
    });
return rtn;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T20:49:37.183

它违背了 AJAX 同步使用它的目的（*AJAX 代表 Asynchronous Javascript And Xml*）。

现在你不能`return`从成功方法中获取值，但你可以将它存储在一个变量中，然后返回它

```
function getLocal(name) {
    var returnValue;
    $.ajax({
        type: "POST",
        async: false,
        url: "WebServices/FLSAService.asmx/GetLocalVariable",
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({ name: name }),
        success: function (data) {
            returnValue = data.d;
        }
    });
    return returnValue;
} 
```

* * *

但*正确的*方法是使用[延迟对象](http://api.jquery.com/category/deferred-object/)

```
function getLocal(name, resultset) {
    return $.ajax({
        type: "POST",
        url: "WebServices/FLSAService.asmx/GetLocalVariable",
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({ name: name }),
        success: function (data) {
            resultset[name] = data.d;
        }
    });
} 
```

并称之为

```
"Select": function() {
    var results = {};
    var self = this;
    $.when(getLocal("VERBID", results), getLocal("VERB", results)).then(function(){
        $.ajax({
            type: "POST",
            url: "WebServices/FLSAService.asmx/SetDuty",
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify({
                dutyNum: dutyNumber,
                id: results.VERBID,
                verb: results.VERB
            }),
            success: function(data) {
                data = $.parseJSON(data.d);
                if (data.ErrorFound) {
                    showMessage(data.ErrorMessage, 2, true);
                }
                else {
                    log('Set Duty: ' + data.StringReturn + ' (' + data.intReturn + ')');
                }
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert("updateDuty: " + XMLHttpRequest.responseText);
            }
        });
    }).always(function(){
        $(self).dialog("close");
    });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T20:57:20.643

一切都是因为 $.ajax 函数不返回任何值，因为它是异步行为，我的建议是为`getLocal`名为“回调”的方法创建第二个参数。

正确的方法是这样做：

```
function getLocal(name, callback) {
    $.ajax({
        type: "POST",
        async: false,
        url: "WebServices/FLSAService.asmx/GetLocalVariable",
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({ name: name }),
        success: function (data) {
            var rtn = data.d;
            callback(rtn);
        }
    });
} 
```

然后，您的主要代码必须看起来像这样（异步代码）：

```
//some code here
buttons: {
            "Select": function () {
                getLocal("VERBID", function(id) {
                     getLocal("VERB", function(verb) { 
                        $.ajax({
                           type: "POST",
                           async: false,
                           url: "WebServices/FLSAService.asmx/SetDuty",
                           dataType: 'json',
                        //some code here
                     });
                });
//some code here 
```

要改进此代码，一次进行两次异步调用，您可以使用[jQuery Deferred](http://api.jquery.com/category/deferred-object/)对象，并`.resolve(data)`在所有 ajax 调用获得正确响应后运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-08T10:19:23.430

我通过 set 解决了****`async: false`****。

我创建了用三个参数调用的新全局函数`sendRequest(type, url, data)`，每次到处调用

```
function sendRequest(type, url, data) {
    let returnValue = null;
    $.ajax({
        url: url,
        type: type,
        async: false,
        data: data,
        dataType: 'json',
        success: function (resp) {
            returnValue = resp;
        }
    });
    return returnValue;
} 
```

现在调用函数

```
 let data = {
            email: 'tet@gmail.com',
            password: 'warning',
        };
        let  response =  sendRequest('POST', 'http://localhost/signin')}}", data);
        console.log(response ); 
```

> 代码中的重要**说明**是： `async: false`

# html - 对于商品详情品牌，最正确的微数据架构是什么？

> ID：13848124
> 
> 赞同：3
> 
> 时间：2012-12-12T20:34:55.573
> 
> 标签：html, microdata, schema.org

我有一个商店页面，列出了他们销售的时尚品牌。但我不确定要使用什么微数据模式。我正在使用[schema.org](http://schema.org)中的模式。

基本上列表如下所示：

```
<span itemscope itemtype="http://schema.org/Store">
 // Store info here

 <ul id="brandList">
  <li id="7750">
    <div class="brandInfo">
      <a href="http://...">Celine Engelstad</a>
    </div>
    <div class="logo">
      <img title="Celine Engelstad" src="http://..." class="logo">
    </div>
  </li>
  // More items here
 </ul>
</span> 
```

这会是正确的示意图吗？

```
<span itemscope itemtype="http://schema.org/Store">
 // Store info here

 <span itemscope itemtype="http://schema.org/Product">
   <ul id="brandList">
    <li itemprop="productID" id="7750">
      <div itemprop="manufacturer" class="brandInfo">
        <a itemprop="url" href="http://...">Celine Engelstad</a>
      </div>
      <div itemprop="logo" class="logo">
        <img itemprop="logo" title="Celine Engelstad" src="http://..." class="logo">
      </div>
    </li>
    // More items here
  </ul>
</span> 
```

1）既然它不是产品列表，而是品牌列表，那么使用是否正确`http://schema.org/Product`
2）品牌名称既是名称又是链接。我可以`itemprop`像以前一样使用嵌套吗？
3) 使用它有什么意义，`itemprop="productID"`因为这不是要购买的物品，而是我网站上的品牌 ID？

* * *

**更新 17.07.2013**

在一些外部帮助之后，我已经对列出品牌的商店实施了以下结构：

```
<ul class="brand-list>
  <li id="426">
    <span itemtype="http://schema.org/Organization" itemscope="">
      <div class="brandInfo floatLef" itemprop="name">
        <a href="#" class="" itemprop="url">American Retro</a>
      </div>
    </span>
  </li>
</ul> 
```

例如，在首页上用于称为**最流行品牌**的部分是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:39:35.660

品牌是一个组织，而不是产品，因此不在产品模式的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T22:54:22.727

这实际上取决于您打算列出的商店类型；对于实体店位置，使用[商店微数据模式](http://schema.org/Store)；另一方面，如果您列出的是您在自己的商店中销售的品牌，那么使用[品牌架构](http://schema.org/Brand)可能会更好。

# android - 尝试截取视图及其子视图的屏幕截图

> ID：13848126
> 
> 赞同：1
> 
> 时间：2012-12-12T20:35:17.677
> 
> 标签：android, android-canvas

我有一个名为的相对布局`rel`，它动态地向它添加一个 imageview，如下所示：

```
 rel.setBackgroundResource(R.drawable.bg_share_one);

                RelativeLayout.LayoutParams p1 = new RelativeLayout.LayoutParams(921, 691);
                p1.leftMargin = 30;
                p1.topMargin = 30;

                ImageView img = new ImageView(this);
                img.setLayoutParams(p1);
                myBitmap = BitmapFactory.decodeFile(files[0].getAbsolutePath(), option1);
                img.setImageBitmap(myBitmap);

                rel.addView(img);
                saveCompareImage(); 
```

然后我调用此方法来截取该相对布局的屏幕截图，但它添加的图像视图未显示在位图中：

```
 protected void saveCompareImage() {
    // TODO Auto-generated method stub

    rel.setDrawingCacheEnabled(true);
    try {

        File file = new File("/sdcard/LC/compare.jpg");
        file.createNewFile();
        Bitmap bm = rel.getDrawingCache();
        FileOutputStream ostream = new FileOutputStream(file);
        bm.compress(Bitmap.CompressFormat.JPEG, 80, ostream);
        ostream.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:44:55.583

也许您启用了硬件加速？的文档`setDrawingCacheEnabled()`说明在这种情况下渲染的方式不同：

> 打开硬件加速时，启用绘图缓存对渲染没有影响，因为系统使用不同的加速机制来忽略该标志。如果您想为视图使用位图，即使启用了硬件加速，请参阅 setLayerType(int, android.graphics.Paint) 以获取有关如何启用软件和硬件层的信息。

试试看`setLayerType(LAYER_TYPE_SOFTWARE, null)`什么的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:48:57.343

问题不是调用措施：这有效：

```
protected void saveCompareImage() {
    // TODO Auto-generated method stub

    rel.setDrawingCacheEnabled(true);

    try {
        File file = new File("/sdcard/LC/compare.jpg");
        file.createNewFile();   
        Bitmap bitmap;
        rel.setDrawingCacheEnabled(true);
        rel.measure(MeasureSpec.makeMeasureSpec(rel.getLayoutParams().width, MeasureSpec.EXACTLY),
                MeasureSpec.makeMeasureSpec(rel.getLayoutParams().height, MeasureSpec.EXACTLY));
        rel.layout(0, 0, rel.getMeasuredWidth(), rel.getMeasuredHeight());

        bitmap = Bitmap.createBitmap(rel.getDrawingCache());

        FileOutputStream ostream = new FileOutputStream(file);
        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, ostream);
        ostream.close();
    } catch (Exception e) {
        Log.v("ERRRO","e:"+e);
    }
} 
```

# wpf - 诊断 WPF UserControl DependencyProperty 问题的最佳方法是什么？

> ID：13848130
> 
> 赞同：0
> 
> 时间：2012-12-12T20:35:40.240
> 
> 标签：wpf, user-controls, dependency-properties

这是我的问题，我创建了一个 UserControl，如下所示：

XAML：

```
<UserControl x:Class="ProcessVisualizationBar.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" xmlns:lb="clr-namespace:ProcessVisualizationBar"
         Name="ProcessVisualizationBar">

    <Border BorderBrush="Silver" BorderThickness="1,1,1,1" Margin="0,5,5,5" CornerRadius="5" Padding="2">
        <ListBox Name="ProcessVisualizationRibbon" Grid.Column="1" Height="40" ItemsSource="{Binding ElementName=ProcessVisualizationBar, Path=ItemsSource}"/>
    </Border>

</UserControl> 
```

代码背后（C#）：

```
using System.Windows;
using System.Windows.Controls;

namespace ProcessVisualizationBar
{
    public partial class UserControl1 : UserControl
    {
        public static readonly DependencyProperty ItemsSourceProperty = DependencyProperty.Register("ItemsSource", typeof(System.Collections.IEnumerable), typeof(UserControl));

        public System.Collections.IEnumerable ItemsSource
        {
            get { return ProcessVisualizationRibbon.ItemsSource; }
            set { ProcessVisualizationRibbon.ItemsSource = value; }
        }

        public UserControl1()
        {
            InitializeComponent();
        }
    }
} 
```

我构建了我的用户控件并将 .dll 添加到另一个项目的引用中。我在我的 XAML 顶部添加了引用，如下所示：

```
xmlns:uc="clr-namespace:ProcessVisualizationBar;assembly=ProcessVisualizationBar" 
```

然后我去使用控件。

```
<uc:UserControl1 Grid.Row="2" x:Name="ProcessVisualizationContent" /> 
```

它发现控件没问题，但是当我尝试找到我添加到它的 ItemsSource 属性时，我没有找到它。我不确定我错过了什么，也不确定哪些调试工具真的可以解决这个问题。

有人有这方面的经验可以分享他们的智慧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:11:24.827

传递的实际数据是什么？那是你应该创造的，而不是你正在尝试的穿越情况。

创建一个依赖属性，以使用属性更改处理程序传递的实际数据为目标。在更改事件上，然后调用内部代码将其绑定到 ProcessVisualazation ItemsSource。这样，您可以通过在事件中放置断点来调试数据何时通过。

下面是一个示例，消费者将在 Xaml 中看到 StringData，并且需要将字符串列表传递到自定义控件中：

```
 #region public List<string> StringData
  /// <summary>
  /// This data is to be bound to the ribbon control
  /// </summary>
  public List<string> StringData
  {
     get { return GetValue( StringDataProperty ) as List<string>; }
     set { SetValue( StringDataProperty, value ); }
  }

  /// <summary>
  /// Identifies the StringData dependency property.
  /// </summary>
  public static readonly System.Windows.DependencyProperty StringDataProperty =
      System.Windows.DependencyProperty.Register(
          "StringData",
          typeof( List<string> ),
          typeof( UserControl ),
          new System.Windows.PropertyMetadata( null, OnStringDataPropertyChanged ) );

  /// <summary>
  /// StringDataProperty property changed handler.
  /// </summary>
  /// <param name="d">DASTreeBinder that changed its StringData.</param>
  /// <param name="e">Event arguments.</param>
  private static void OnStringDataPropertyChanged( System.Windows.DependencyObject d, System.Windows.DependencyPropertyChangedEventArgs e )
  {
     UserControl source = d as UserControl;
     List<string> value = e.NewValue as List<string>;
     BindDataToRibbon( value );
  }
  #endregion public List<string> StringData 
```

现在只需创建一个 BindDataToRibbon 方法，该方法将完成脏活。请注意，我在 Visual Studio 中使用[Jeff Wilcox 的 Silverlight 依赖项片段](http://www.jeff.wilcox.name/2010/02/silverlight-snippets/)来生成上述依赖项。我已将它用于 WPF 和 Silverlight 项目。

# r - 图标题，使用 knitr 和 markdown 到 html 的引用

> ID：13848137
> 
> 赞同：37
> 
> 时间：2012-12-12T20:36:10.077
> 
> 标签：r, markdown, knitr, r-markdown

我正在编写一个 Rmd 文件，由 knitr 处理成 HTML。它包含一些生成图形的 R 块，这些图形存储为 HTML 中的数据 URI。

1）如何为这样的图像添加标题？我想要一个标题，上面写着“图 3：等等等等”，其中“3”是自动生成的。

2) 我以后如何引用此图像，即“如图 3 所示，等等等等”。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-06-02T06:43:26.923

我迟到了，但我想提一下我最近构建的一个小程序包，用于使用`knitr`. 它被调用`kfigr`，您可以使用`devtools::install_github('mkoohafkan/kfigr')`. 它仍在积极开发中，但主要功能已经存在。请务必查看小插图，它显示了一些使用示例并定义了一些用于图形标题和锚点的钩子（我以后可能会选择导入包`knitr`并在加载时定义这些钩子）。

编辑：kfigr 现在可以在 CRAN 上使用！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-12T23:23:07.293

1.  您可以使用 R 中的简单计数器创建图形编号；在这里看[一个例子](https://github.com/yihui/knitr-examples/blob/master/070-caption-num.Rmd)。问题是 Markdown 渲染器是否会为您渲染图形标题：R Markdown v1 不会，但[v2](http://rmarkdown.rstudio.com)（基于 Pandoc）会。
2.  我不知道。没有直接的方法可以插入标签作为图形的标识符，因此可能无法使用纯 Markdown 交叉引用图形。一旦你遇到这样的问题，想想（1）我真的需要它吗？（2）如果打算做一个结构复杂的文档，我觉得还是直接用LaTeX比较好（Rnw文档）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-06T09:17:58.847

也很晚了，我[在这里](https://github.com/yihui/knitr-examples/blob/master/070-caption-num.Rmd)改变了易辉的建议，他也在上面链接做参考。

```
```{r functions, include=FALSE}
# A function for captioning and referencing images
fig <- local({
    i <- 0
    ref <- list()
    list(
        cap=function(refName, text) {
            i <<- i + 1
            ref[[refName]] <<- i
            paste("Figure ", i, ": ", text, sep="")
        },
        ref=function(refName) {
            ref[[refName]]
        })
})
```
```{r cars, echo=FALSE, fig.cap=fig$cap("cars", "Here you see some interesting stuff about cars and such.")}
plot(cars)
```

What you always wanted to know about cars is shown in figure `r fig$ref("cars")` 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-09T01:41:21.297

此处描述了执行这两种方法的一种方法：[http ://rmflight.github.io/posts/2012/10/papersinRmd.html](http://rmflight.github.io/posts/2012/10/papersinRmd.html)

此处描述了另一个（但我不知道它是否符合您的＃2）。[http://gforge.se/2014/01/fast-track-publishing-using-knitr-part-iii/](http://gforge.se/2014/01/fast-track-publishing-using-knitr-part-iii/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-09T23:21:12.713

另一种解决方案：

[https://github.com/adletaw/captioner](https://github.com/adletaw/captioner)

从自述文件：

```
captioner() returns a captioner function for each set of figures, tables, etc. that you want to create. See the help files for more details.

For example:

> fig_nums <- captioner()

> fig_nums("my_pretty_figure", "my pretty figure's caption")

"Figure 1: my pretty figure's caption"

> fig_nums("my_pretty_figure", cite = TRUE) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-10T16:27:15.067

我用 bookdown 做了两个（数字+参考）。我在文件头的输出部分中添加了：

```
output:
  bookdown::html_document2:
    fig_caption : TRUE 
```

然后我在 R 代码块中创建了一个图形，如下所示：

```
{r, my-fig-label,echo=F, eval=T, fig.align = 'center', fig.cap="This is my caption"}
knitr::include_graphics(here::here("images", "my_image.png")) 
```

这会在您的数字下方生成一个自动编号。你可以参考它`\@ref(fig:my-fig-label)`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-13T23:53:26.290

使用官方**bookdown**文档[4.10 Numbered figure](https://bookdown.org/yihui/rmarkdown-cookbook/figure-number.html) captions ：

```
---
output: bookdown::html_document2
---

```{r cars, fig.cap = "An amazing plot"}
plot(cars)
```

```{r mtcars, fig.cap = "Another amazing plot"}
plot(mpg ~ hp, mtcars)
``` 
```

# c - 电平触发或边缘触发性能更高吗？

> ID：13848143
> 
> 赞同：13
> 
> 时间：2012-12-12T20:36:21.153
> 
> 标签：c, linux, epoll

我试图弄清楚什么是性能更高的、边缘触发的或电平触发的 epoll。

主要是我将“性能”视为：

1.  能够处理多个连接而不会降级。

2.  能够保持每个入站消息的最高速度。

我其实更关心#2，但#1 也很重要。

我一直在使用单线程使用者（使用 接受/读取多个套接字连接`epoll_wait`）和多个生产者运行测试。

到目前为止，我没有看到任何区别，甚至多达 1000 个文件描述符。

我一直在这个想法（错觉？）下工作，边缘触发应该更有性能，因为会收到更少的中断。这是一个正确的假设吗？

我的测试的一个问题可能是掩盖了性能差异，即我不会在收到消息后将消息发送到线程，因此更少的中断并不重要。我一直不愿意做这个测试，因为我一直在使用`__asm__ rdtsc`我的“时间戳”，所以我不想协调我的原始时间戳来自哪个核心。

更让我怀疑的是，级别触发的 epoll 在我见过的一些基准测试中表现更好。

哪个更好？在什么情况下？没有区别吗？任何见解将不胜感激。

我的套接字是非阻塞的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T09:24:21.097

我不希望看到触发边缘和水平之间的巨大性能差异。

对于边缘触发，您总是必须排空输入缓冲区，因此您有一个无用的（仅返回 EWOULDBLOCK）recv 系统调用。但是对于触发级别，您可能会使用更多的 epoll_wait 系统调用。正如[手册页](http://linux.die.net/man/4/epoll)所指出的，在关卡触发模式下避免饥饿可能会稍微容易一些。

真正的区别在于，当您想使用多个线程时，您必须使用边缘触发模式（尽管您仍然必须小心正确地进行同步）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-18T18:10:58.977

仅当您使用长期会话并且由于缓冲区已满/空（通常使用代理）而被迫不断停止/启动时，差异才可见。当你这样做的时候，你最经常需要一个事件缓存，而当你的事件缓存正在处理事件时，你可以使用 ET 并避免所有的 epoll_ctl(DEL)+epoll_ctl(ADD) 跳舞。对于短期会话，节省的空间不太明显，因为对于 ET，您至少需要一个 epoll_ctl(ADD) 调用来启用 FD 上的轮询，并且如果您不希望在会话的生命周期内拥有更多这样的调用（例如：交易所在大多数情况下都小于缓冲区），那么您不应该期望有任何区别。您的大部分节省通常来自仅使用事件缓存，因为您通常可以执行大量操作（例如：写入）而无需轮询，这要归功于内核缓冲区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-22T07:04:44.103

当用作边缘触发接口时，出于性能原因，可以通过指定 (EPOLLIN|EPOLLOUT) 在 epoll 接口 (EPOLL_CTL_ADD) 内添加一次文件描述符。这允许您避免在 EPOLLIN 和 EPOLLOUT 之间不断切换，使用 EPOLL_CTL_MOD 调用 epoll_ctl(2)。

Q9 使用 EPOLLET 标志（边缘触发行为）时，我是否需要连续读取/写入文件描述符直到 EAGAIN？

```
 A9  Receiving  an  event  from epoll_wait(2) should suggest to you that
       such file descriptor is ready for the requested I/O operation.  You
       must  consider  it  ready  until  the next (nonblocking) read/write
       yields EAGAIN.  When and how you will use the  file  descriptor  is
       entirely up to you.

       For packet/token-oriented files (e.g., datagram socket, terminal in
       canonical mode), the only way to detect the end of  the  read/write
       I/O space is to continue to read/write until EAGAIN.

       For  stream-oriented  files  (e.g., pipe, FIFO, stream socket), the
       condition that the read/write I/O space is exhausted  can  also  be
       detected  by checking the amount of data read from / written to the
       target file descriptor.  For example, if you call read(2) by asking
       to read a certain amount of data and read(2) returns a lower number
       of bytes, you can be sure of having exhausted the  read  I/O  space
       for  the  file  descriptor.   The  same  is true when writing using
       write(2).  (Avoid this latter technique  if  you  cannot  guarantee
       that  the  monitored file descriptor always refers to a stream-ori‐
       ented file.) 
```

# php - 将变量从 PHP 生成的列表传递给 jQuery

> ID：13848146
> 
> 赞同：0
> 
> 时间：2012-12-12T20:36:33.127
> 
> 标签：php, jquery, variables

我有一个 PHP 生成的列表：

```
<?php $row_number = 0;  
 while ($row = $result->fetch_object()) {
    $row_number++;      
    $movie_id = $row->movie_id;
    $title = $row->title;

if ($num_rows>0){ ?>
    <p class='dragelement' id="<?php echo $movie_id; ?>">
    <?php echo $title; ?> 
    </p>
<?php } 
} ?> 
```

并尝试使用父 p 选择器的 id 将变量“movie_id”传递给 jQuery 以实现拖放功能：

```
var parent = $("p.dragelement").closest('p');
var movie_id = parent.attr('id'); 
```

问题是“movie_id”的结果值是列表的第一个，而不是当前的。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:31:41.250

最后一个选择器呢？ [http://api.jquery.com/last-selector/](http://api.jquery.com/last-selector/)

```
var parent = $(".dragelement:last");
var movie_id = parent.attr('id'); 
```

# cxf - 如何在 mule 中提取 Web 服务方法名称

> ID：13848147
> 
> 赞同：0
> 
> 时间：2012-12-12T20:36:35.227
> 
> 标签：cxf, mule, interceptor

我正在使用 mule `<cxf:proxy-service>`，需要提取 Web 服务方法名称以附加到消息以供以后使用。

我们有一个实现 Callable 接口的服务代理类。最初我们尝试获取这样的操作名称：

```
public Object onCall(MuleEventContext eventContext) throws Exception {  
    try {
        MuleMessage inboundMessage = eventContext.getMessage();

        Set<String> props = inboundMessage.getInvocationPropertyNames();
        System.out.println("CXF invocation properties ==> " + props);
        System.out.println("CXF invocation property ==> " +  inboundMessage.getInvocationProperty("cxf_operation")); 
```

但上面的代码给出了不正确的操作名称。（我们有 4 个操作在服务中，它总是给出第二个操作名称）。以下是用于此的 mule 流程：

```
<flow name="proxyService">
    <http:inbound-endpoint address="${some.address}"
        exchange-pattern="request-response">

        <cxf:proxy-service wsdlLocation="classpath:abc.wsdl"
            namespace="http://namespace"
            service="MyService">

        </cxf:proxy-service>
    </http:inbound-endpoint>
    <component class="com.services.MyServiceProxy" /> 
```

所以，我写了一个入站 cxf 拦截器来提取操作名称。我在下面写了拦截器，它适用于元素，`<cxf:jaxws-service>`但不适用于`<cxf:proxy-service>`元素。

这是我的拦截器：

```
public class GetCXFOperation extends AbstractPhaseInterceptor<Message> {

public GetCXFOperation() {
    super(Phase.PRE_INVOKE);

}

@Override
public void handleMessage(Message message) throws Fault {
    Exchange exchange = message.getExchange();
    Endpoint ep = exchange.get(Endpoint.class);
    OperationInfo op = exchange.get(OperationInfo.class);
    if(op != null){
    System.out.println("Operation Name: " + op.getName().getLocalPart());
    } else{
         Object nameProperty = exchange.get("org.apache.cxf.resource.operation.name"); 
    if(nameProperty != null)

    System.out.println(nameProperty.toString());
    }

} 
```

}

寻求指导如何提取操作名称`<cxf:proxy-service>`？有没有一种简单的骡子方法可以得到正确答案？还是有一个不同的阶段我应该调用我的拦截器？哪些阶段适用`<cxf:proxy-service>`

# command-line - 如何获取目录中不包含特定字符串的子文件夹列表

> ID：13848149
> 
> 赞同：0
> 
> 时间：2012-12-12T20:36:44.717
> 
> 标签：command-line

我需要列出目录中的所有子文件夹，但不包含特定字符串的子文件夹除外。

示例：我有子目录

```
FileNov01
FileNov02
FileNov03
FileDec01
FileDec02
FileDec03
FileJan01
FileJan02 
```

我想列出所有子目录，除了包含 Dec 所以最终输出应该是

```
FileNov01
FileNov02
FileNov03
FileJan01
FileJan02 
```

我正在尝试查找命令 shell 的参数。是否有任何切换到排除特定条件文件夹的目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:37:08.247

假设你在 Windows

```
dir /b /ad * | findstr /v Dec 
```

# c# - 如何在 C# 单元测试中显示控制台窗口？

> ID：13848151
> 
> 赞同：7
> 
> 时间：2012-12-12T20:36:49.110
> 
> 标签：c#, unit-testing, debugging, console

我希望能够在我的 C# 单元测试中随意显示一个控制台窗口，稍后我可以在我的代码中处理它以打印语句。有系统命令支持吗？我的意图是调试目的，但我不想使用 log4net 或其他一些 text/xml 文件来完成它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T20:38:16.623

只需使用`Console.WriteLine`. 我使用的每个单元测试运行器都自动捕获了控制台输出——你不需要一个实际的控制台窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:45:41.787

如果我正确理解您的问题，请按照以下步骤操作

1-右键单击控制台项目

2-转到应用程序部分

3- 在名为“输出类型”的下拉列表中选择“控制台应用程序”。

4-保存并运行应用程序

这将做的是，它将与winform一起打开控制台。无论您在哪里编写 Console.Writeline，它都会显示在控制台中。（您的表单将继续按原样运行。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:40:10.137

如果您确实需要控制台窗口，请考虑通过 p/Invoke 访问 AllocConsole：

[http://pinvoke.net/default.aspx/kernel32/AllocConsole.html](http://pinvoke.net/default.aspx/kernel32/AllocConsole.html)

# php - 如果存在则选择？

> ID：13848152
> 
> 赞同：0
> 
> 时间：2012-12-12T20:36:56.500
> 
> 标签：php, mysql, sql, select

我是一名新手程序员，想知道是否有办法以正常工作的格式纠正以下代码。（我似乎总是搞砸语法。）

```
$query2 = mysql_query("SELECT IF EXISTS EmployeeName, EmployeeNumber, Position,
ManagementTraining1, ManagementTraining2, ManagementTraining3, ManagementTraining4, 
ManagementTraining5, ManagementTraining6, ManagementTraining7 FROM  
managementMeetingAttendance ORDER BY EmployeeNumber") or die(mysql_error()); 
```

我正在从动态创建的表中收集数据，并想知道是否可以为可能存在或不存在的列创建类似于“IF EXISTS”语句的内容。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:38:58.200

我不是一个 mySQL 人，但我不确定你写的语句的意图，根据你的意图，很可能会有一个有效的答案。

你有：

```
SELECT IF EXISTS EmployeeName, EmployeeNumber, Position,
ManagementTraining1, ManagementTraining2, ManagementTraining3, ManagementTraining4, 
ManagementTraining5, ManagementTraining6, ManagementTraining7 FROM  
managementMeetingAttendance ORDER BY EmployeeNumber 
```

由于您没有 where 子句，因此您可能不是在寻找特定的记录，并且使用“exists”似乎您只是在查询表 managementMeetingAttendance 是否包含至少一条记录，结果是列列表和 order by 语句无关紧要。

```
((SELECT Count(*) FROM managementMeetingAttendance) > 0) 
```

如果表包含一行，则评估为 true，否则为 false。

但是，如果您需要确定表是否包含列出的每一列，那么这会稍微复杂一些

根据上一个答案，您需要使用 information_schema.columns 来获取表中存在的列，然后查询此数据 - 如下所示：

```
IF EXISTS select 1 from (
    SELECT Column_Name FROM information_schema.columns 
    WHERE table_name = 'managementMeetingAttendance' AND column_name = 'EmployeeName'
) eName AND EXISTS select 1 from (
    SELECT Column_Name FROM information_schema.columns 
    WHERE table_name = 'managementMeetingAttendance' AND column_name = 'EmployeeNumber'
) eNum AND EXISTS select 1 from (
    SELECT Column_Name FROM information_schema.columns 
    WHERE table_name = 'managementMeetingAttendance' AND column_name = 'Position'
) ePos AND EXISTS select 1 from (
    SELECT Column_Name FROM information_schema.columns 
    WHERE table_name = 'managementMeetingAttendance' AND column_name 
        = 'ManagementTraining1'
) eTrng1 AND EXISTS select 1 from (
    etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:48:30.660

不，没有，但您可以先在数据库中查询列名：

```
select column_name from information_schema.columns where table_name=<TABLE> 
```

# ios - 调试 FBPlacePickerViewController loaddata 方法

> ID：13848153
> 
> 赞同：1
> 
> 时间：2012-12-12T20:36:56.520
> 
> 标签：ios, facebook, facebook-ios-sdk

在使用视图之前，我想使用 [FBPlacePickerViewController loadData]，并对接收到的数据执行一些逻辑。如何查看在 loadData 方法中收到的位置信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:31:42.953

您可以考虑使用 FBPlacePickerDelegate：[https ://developers.facebook.com/docs/reference/ios/3.1/protocol/FBPlacePickerDelegate](https://developers.facebook.com/docs/reference/ios/3.1/protocol/FBPlacePickerDelegate)

目前还不清楚你想做什么，但如果你想过滤地点，你可以查看 placePickerViewController:shouldIncludePlace: 委托方法。

# environment-variables - 将环境变量传递给 autoconf 的`./configure`

> ID：13848154
> 
> 赞同：8
> 
> 时间：2012-12-12T20:37:00.000
> 
> 标签：environment-variables, autotools, configure, autoconf

`FOO=bar ./configure`和之间有什么区别，autoconf 生成的脚本`./configure FOO=bar`在哪里？我知道前者在运行脚本之前将环境变量设置为，而后者将字符串传递给. 我认为这解释了这一点（并记得吗？）将变量设置为等于，但除此之外，我不知道。特别是，以一种方式或另一种方式来做这件事有什么好处吗？`./configure``configure.am``FOO``bar``./configure``FOO=bar``./configure``./configure``FOO``bar`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T20:50:21.130

将赋值作为参数传递`configure`可确保赋值在 中可用`config.status`，因此将设置为 on `config.status --recheck`。这是将赋值作为参数的主要优点。请注意，当前的 autoconf 文档建议这样做而不是通过环境传递分配。旧版本的 autoconf 不允许将赋值作为参数进行配置，因此在运行旧的配置脚本时必须使用旧形式，而且习惯很难改掉，所以很多人继续使用该环境。但是，通过参数传递赋值是一个好习惯。

# ruby-on-rails - Rails：使用 has_scope 的多个参数（过滤器）

> ID：13848161
> 
> 赞同：0
> 
> 时间：2012-12-12T20:37:32.367
> 
> 标签：ruby-on-rails, scope, has-scope

我正在使用 has_scope gem，我想用两个参数创建过滤——它可能是一个参数或两个参数。

我的模型（产品）：

```
scope :brand, proc { |brand| joins(:product_values).where('product_values.value_id' => brand) }
scope :zamena, proc { |zamena| joins(:product_values).where('product_values.value_id' => zamena) } 
```

控制器的索引动作：

```
 @products = apply_scopes(Product).all 
```

它有效，但只有一个:(

```
/products?brand=12 - Ok
/products?zamena=24 - Ok
/products?brand=12&zamena=24 - Fail (sorted only by 'zamena', not by both params) 
```

**第二。变体（也不起作用）** 在我的控制器中：

```
query = Product.scoped
query = query.brand(params[:brand]) if params[:brand]
query = query.zamena(params[:zamena]) if params[:zamena]
@products = query.all 
```

一个有效，但不能同时有效（0 个结果）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T21:49:36.630

我的答案。也许不优雅，但效果很好。

```
 fcount = 0
  fcount += 1 if params[:brand]
  fcount += 1 if params[:zamena]

  prods = []
  if params[:brand]
    Product.all.each do |p|
      prods << p if p.product_values.where(value_id: params[:brand]).count > 0
    end
  end
  if params[:zamena]
    Product.all.each do |p|
      prods << p if p.product_values.where(value_id: params[:zamena]).count > 0
    end
  end

  @products = prods.select{|item| prods.count(item) == fcount}.uniq 
```

不需要范围。您可以使用这种方式使用很多过滤器。

# css - jQuery div.height 在 Chrome 中是错误的，以使所有 div 高度相同

> ID：13848165
> 
> 赞同：11
> 
> 时间：2012-12-12T20:37:44.853
> 
> 标签：css, jquery, document-ready, window-load

我使用以下代码使`rightpos`,`leftpos`和`middlepos`div 具有相同的高度：

```
<script>

    jQuery.noConflict();
    jQuery(document).ready(function($){

        // Find the greatest height:
        maxHeight = Math.max($('#rightpos').height(), $('#middlepos').height());
        maxHeight = Math.max(maxHeight, $('#leftpos').height());

        // Set height:
        $('#rightpos').height(maxHeight);
        $('#middlepos').height(maxHeight);
        $('#leftpos').height(maxHeight);

    })
</script> 
```

[使用这种方式为http://yaskawa.ir/](http://yaskawa.ir/)的主页确定最高 div在 Firefox 中效果很好，但在 Chrome 中存在问题。

* * *

****Sparky672**的回答后**更新 1 ：****

 **我可以看到，使用此代码，`alert('test here');`最后的 不起作用。

```
<script>
    jQuery.noConflict();
    //jQuery(document).ready(function($){});

    jQuery(window).load(function($){

        // Find the greatest height:
        maxHeight = Math.max($('#rightpos').height(), $('#middlepos').height());
        maxHeight = Math.max(maxHeight, $('#leftpos').height());

        // Set height:
        $('#rightpos').height(maxHeight);
        $('#middlepos').height(maxHeight);
        $('#leftpos').height(maxHeight);

        alert('test here');
    })
</script> 
```

![在此处输入图像描述](../Images/40f71afe11dc0d1281b793e90e06cf25.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-12T21:00:18.383

尝试`window.load()`代替`document.ready()`以确保在计算身高之前加载所有资产。

```
jQuery(window).load(function($){ 
```

文档：

> 当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。

[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

见演示：

[http://jsfiddle.net/snBLP/3/](http://jsfiddle.net/snBLP/3/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-12T20:55:05.693

$(document).ready() 不适合计算高度。$(document).ready() 不等待图像加载等。

我建议尝试

```
$(window).ready() 
```

反而...**

# javascript - 如何避免在不同行显示重复数据？

> ID：13848168
> 
> 赞同：0
> 
> 时间：2012-12-12T20:38:03.190
> 
> 标签：javascript, database

我正在尝试显示从我的数据库返回的记录

我返回的数据如下：

```
UserID   Username    Fullname     ID
141        john       jerry1      170   
141        john       jerry1      18
141        john       jerry1      1169
110        ted       jerrytest    1701
110        ted       jerrytest    18 
```

我想在页面中显示所有 ID，但要避免重复的用户名

所以它会像

```
john    170
        18
        1169

ted     1701
        18
//I only want 2 divs (for john and ted) instead of 5\. 
```

我的代码目前显示

```
john    170    //1 loop
john    18     //1 loop
john    1169   //1 loop

ted     1701   //1 loop
ted     18     //1 loop 
```

我的代码：

```
for(var i=0; i<results.length; i++){
  //create a div for each row...in my case, 5 divs/rows

//i tried to create a var a
   a=i-1;
   if(results[a]){
        if(results[i].Username==results[a].Username){
           continue;
        }
    }

//this will eliminate the duplicated john and ted but only show john 170 and ted 1701.

} 
```

回顾一下，我想显示每行中的所有唯一 ID，但不显示重复的用户名。有没有更好的方法来做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:51:09.950

为什么不结合这两种方法呢？

```
var endResult = "",
    ids = [],
    userName;

for (var i = 0, lt = results.length; i < lt; i++)
{
    ids.push(results[i].ID);
    userName = (i === 0 || results[i].Username != results[i-1].Username) ? results[i].Username : false;

    if (userName)
    {
        endResult += "<div>" + userName + "</div>";
        endresult += "<div>" + ids.join("<br>") + "</div>"

        //Reset the list of ids
        ids = [];
    }
} 
```

# xml - Orbeon 表单生成器：使用 XPath 为 InputField 定义计算值

> ID：13848171
> 
> 赞同：0
> 
> 时间：2012-12-12T20:38:14.803
> 
> 标签：xml, xslt, xpath, orbeon, xforms

我在 Orbeon Form Builder 中使用输入字段，应该用文本“null”填充，如果用户没有在 Form Runner 中填写，formdata 将作为 xml 发送到服务。假设我必须用 XPath 表达式定义计算值字段。我该怎么做？因为我不想在结果 xml 数据文件中有一个空元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:49:29.137

在 XForms 中提供 'null' 作为默认值的最简单方法是将 'null' 作为开始加载的文档实例中相关元素或属性的值。如果您想要元素`shoesize`并`sockscolor`默认为`null`，请相应地编写您的 XForms 实例：

```
<xforms:instance id="main" xmlns="">
  <mydata>
    <name></name>
    <age></age>
    <shoesize>null</shoesize>
    <sockscolor>null</sockscolor>
  </mydata>
</xforms:instance> 
```

如果您从外部文档加载文档实例，您将需要做一些更复杂的事情，例如在用户单击提交按钮时将 shoesize 和 sockscolor 的值设置为操作的一部分。就像是：

```
<xforms:trigger>
  <xforms:label>Submit</xforms:label>
  <xforms:action ev:event="DOMActivate">
    <xforms:setvalue ref="shoesize"
                     if=".=''"
                     value="'null'"/>
    <xforms:setvalue ref="sockscolor"
                     if=".=''"
                     value="'null'"/>
    <xforms:send submission="go"/>
  </xforms:action>
</xforms:trigger> 
```

不过，这只是通用的 XForms，并没有利用 FormsRunner 可能必须使这更容易的任何特殊功能。

# java - Java中有“this”的名称吗？

> ID：13848176
> 
> 赞同：27
> 
> 时间：2012-12-12T20:38:39.103
> 
> 标签：java, this, instance, variable-assignment, field

当我尝试以下操作时，Eclipse 将给出错误“赋值的左侧必须是变量”：

```
public class Thing{

  String a1;
  int a2;

  public void meth(){
    Thing A = new Thing();
    this = A;
  }
} 
```

我必须分配每个变量 ( `this.a1 = A.a1; this.a2 = A.a2;`) 作为解决方法。

有没有其他方法可以在不遍历每个变量字段的情况下做到这一点？
如果`this`不是变量，它叫什么？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-12T20:40:15.627

`this`是一个指向对象当前实例的*伪变量*，它不能被重新赋值。[根据Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)的第[3.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.9)节，它也被视为语言中的关键字。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-12T20:40:04.910

不，没有简单的捷径。

> 如果“this”不是变量，它叫什么？

`this`不是变量，而是[关键字](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)。

尽管`this`很特别，但在许多方面它就像一个参考。因此，为了一致性，`this = A`必须是一个参考分配，这不太有意义。

您似乎期望从to`this = A`执行逐个字段的复制，并且在这种情况下，Java 的设计者确实可以选择这样做。但是，这将与其他参考分配不一致，并且将其作为例外的整体好处并不明确。`A``this`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-12T20:40:08.717

`this`指`this`类的实例。

您不能分配给`this`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-12-12T20:40:14.457

[**这**](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)是一个java保留关键字，它指的是当前对象。它不是一个变量，它是一个 java 保留关键字。所以`this = A;`无效。使用`this`关键字我们可以引用当前对象的任何实例变量或方法。您必须引用实例变量，例如：

```
this.a1 = A.a1; 
```

**来自文档**：

> 使用 this 关键字的最常见原因是字段被方法或构造函数参数遮蔽。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-12T20:41:41.530

您不能`this`在 Java 中分配给。这不是一个变量；这是一个关键字。

如果您不需要特定实例，您可能会考虑的一件事就是`return`ing 您的新实例。

```
public class Thing{

  String a1;
  int a2;

  public Thing meth(){
    Thing A = new Thing();
    return A;
  }
} 
```

你会像这样使用它

```
whatever = whatever.meth(); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-12-13T04:07:39.873

根据[java lang spec §15.8.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.3) `this`是一个**关键字**，它可以是**表达式**或**语句**

1.  当用作**主要表达式** `this`时，表示一个值，该值是对其调用实例方法的对象的引用。
    *   **表达式：**求值的东西。示例：*x++*
2.  关键字 this 也用于特殊的显式构造函数调用**语句**
    *   **语句：**控制程序执行的句法元素，其执行是为了它们的效果并且没有值示例：*if (true)*

无论哪种情况，它都不是**变量**

*   **变量：**具有关联类型的存储位置

在你的情况下`this`是一个**表达式**而不是一个**变量**。但是出于所有目的，只需将其称为**关键字**

*   **关键字：**由 ASCII 字母组成的字符序列，保留使用......不能用作变量名

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-12T20:50:28.717

`this`指方法的所有者。在这种情况下，所有者就是对象本身。

有时，`this`可能不会引用您正在编写代码的类。比如在匿名类中。一个常见的例子是匿名监听器。

```
 button.addActionListener(
        new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                this; // refers to the ActionListener
            }
        }
    ); 
```

此外，您可以返回`this`可以做`method chaining`的。假设您有一个名为 Homework 的类，它有一个方法 addTask。

```
public Homework addTask(String task){
return this;
} 
```

你可以像这样调用**addTask**方法

```
homework.addTask("a").addTask("b").addTask("c"); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-13T01:40:41.333

我认为 OP 要求能够将一个对象的内容分配给另一个对象，而不是为“this”指针分配一个新值。C++ 具有这种能力——您可以覆盖赋值运算符——但 Java 没有这种能力。

在某些偶尔的情况下，这将是一个不错的功能，但目前根本不可能，而且它并不真正适合 Java“模具”以在未来提供该功能。

如果 Java 允许将对象嵌入到其他对象中（而不是简单地嵌入引用），则该功能将更有用（并且会有更多提供它的动机），但这也不在卡片中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-13T01:31:57.043

^(在基本的 Java 语言中)，没有一种方法可以将所有字段的值从一个实例复制到另一个实例。而且您通常不需要它。您通常可以只替换对新实例的引用或直接在目标实例上工作。

在您的情况下，当您想要将对象的所有字段重置为初始值（并且很少需要它）时，您通常使用重置方法，该方法适用于自己的实例，或者是适用于任何给定对象的静态方法.

所以

```
class A {
  String a1; int a2;
  void reset() { a1 = ""; a2 = 0; }
} 
```

将被用作

```
A a = new A();
// modify a
a.reset(); 
```

和

```
class A {
  String a1; int a2;
  static void reset(A anotherA) { anotherA.a1 = ""; anotherA.a2 = 0; }
} 
```

并像这样使用它：

```
A.reset(a); 
```

在这两种情况下，使用 reset 方法也可以在构造函数中设置初始值：`A() { A.reset(this); }`或`A() { this.reset(); }`

¹实际上有一些库可以做到这一点，你可以在反射的帮助下对其进行编码，我看到它被使用的唯一原因是实现一个 clone() 方法或某种包装/存根。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-13T02:55:50.630

在我看来，你想要做的是有一个方法来重新初始化你的对象，即将它设置回它的初始值。这就是为什么您要创建一个新对象并将其分配给当前对象的原因，对吗？

如果是这种情况，让我们尝试一种不同的方法，因为正如前面所说，你不能 reassign `this`。

如果您不这样做，而是尝试这样的事情怎么办：

```
public class Thing {

    String a1;
    int a2;

    public Thing() {
        this.meth();
    }

    public void meth() {
        this.a1 = "a1";
        this.a2 = 2;
    }

} 
```

这样， Thing.meth() 实际初始化您的对象，并且构造函数在创建对象时调用它。然后，您可以随时再次调用它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-13T03:59:24.290

==免责声明，我不知道java ==

你会想要手动分配。

我不确定您为什么要尝试在 Thing 中创建 Thing 的新实例，但是由于您没有设置 a1 和 a2 的值，因此您需要按照您的方式分配它们。

这是一个保留关键字，指向它所在的类对象。

例如，如果您想要另一个名为 fish() 的函数，您的代码可能看起来像这样。

```
public class Thing{

  String a1;
  int a2;

  public Thing meth(){
    Thing A = new Thing();
    return A;
  }

  public Thing fish(){
    this.a1 = "foo";
    this.meth();
    return A;
  }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-12-13T04:31:44.187

当你这样做时，`this = stuff;`你试图用另一件事替换**当前**的对象实例引用（在这种情况下，是你在构造函数中初始化的那个），并且（在 java 的特定情况下）这是非法的，并且语言禁止你这样做它。

想一想，如果您可以像这样替换对当前实例的引用，那么您可能会遇到一些严重的内存和安全问题（对构造对象的引用将丢失并被某些未知对象覆盖）。

完全有效的是使用运算符引用**当前**对象的成员`.`，因为它们属于`this`，所以不会出现问题（至少不是明显的问题）。

JVM 有一些内部安全措施（例如，方法最大堆栈大小验证、类文件格式验证等），这些措施可以防止简单的二进制操作，并由语言语法强制执行。这可以看作是其中之一。

# php - 在多查询中检索每个 INSERT 语句的 id

> ID：13848177
> 
> 赞同：2
> 
> 时间：2012-12-12T20:38:42.753
> 
> 标签：php, mysql

是否可以在以下 SQL 请求中为每个 INSERT 语句检索 id（在我的情况下是 ua_id）

```
INSERT INTO users_addresses (ua_user_id, ua_address_id) VALUES (1,1);
INSERT INTO users_addresses (ua_user_id, ua_address_id) VALUES (1,2);
INSERT INTO users_addresses (ua_user_id, ua_address_id) VALUES (1,3); 
```

用于`mysqli::multi_query()`执行它 ua_id 是 AUTO_INCREMENT 主键吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:49:36.747

在 MySQL 中，您可以使用**LAST_INSERT_ID()**函数。您每次都需要使用此函数 - 在 INSERT 语句之后。它获取最后插入的记录的 ID。

MySQL 文档 - [LAST_INSERT_ID()](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:31:01.577

好。你做一个多重查询，让我们使用它：

```
<?php
$db->multi_query('
INSERT INTO users_addresses (ua_user_id, ua_address_id) VALUES (1,1);
SELECT LAST_INSERT_ID();
INSERT INTO users_addresses (ua_user_id, ua_address_id) VALUES (1,2);
SELECT LAST_INSERT_ID();
INSERT INTO users_addresses (ua_user_id, ua_address_id) VALUES (1,3);
SELECT LAST_INSERT_ID()') or trigger_error($db->error);
do {
   if ($result = $db->store_result()) {
      while ($row = $result->fetch_row()) {
          var_dump($row);
      }
   }
} while ($db->next_result()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:45:26.787

你的意思是lastInsertId吗？

[http://cl1.php.net/manual/en/mysqli.insert-id.php](http://cl1.php.net/manual/en/mysqli.insert-id.php)

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:49:21.917

如果您在同一个表中插入，mysqli->insert_id 将返回插入的第一行的 ID，然后您知道插入的下一行是第一行 insert_id + 1 ...

如果您一次使用多个表，则需要回滚结果，然后您需要使用以下命令创建另一个查询：

```
SELECT MAX(id) FROM table-a WHERE 1
...
SELECT MAX(id) FROM table-n WHERE 1 
```

现在我不知道什么更好（单插入查询或多查询）...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-09T16:15:36.990

是的。使用`$mysqli->insert_id`- 请参阅下面的工作示例。

```
$mysqli = new mysqli(host, user, pass, db);

$query  = "INSERT INTO users_addresses (ua_user_id, ua_address_id) VALUES (1,1); ";
$query .= "INSERT INTO users_addresses (ua_user_id, ua_address_id) VALUES (1,2); ";
$query .= "INSERT INTO users_addresses (ua_user_id, ua_address_id) VALUES (1,3); ";

if ($mysqli->multi_query($query)) {
    do {
        /* Returns the auto generated id used in the last query */
        printf("%d\n", $mysqli->insert_id);
        /* Check if loop should continue */
        if ($mysqli->more_results() === FALSE) break;
    } while ($mysqli->next_result());
} 
```

使用内置 mysqli::$insert_id - 文档：[http ://php.net/manual/en/mysqli.insert-id.php](http://php.net/manual/en/mysqli.insert-id.php)

# php - 返回准备好的语句结果时出错

> ID：13848180
> 
> 赞同：1
> 
> 时间：2012-12-12T20:38:52.793
> 
> 标签：php, mysqli, prepared-statement

我有以下功能：

```
class Forums {
        public function getForum($id) {
            $database = new Database();
            $mysqli = $database->databaseConnection();
            $stmt = $mysqli->prepare("SELECT name, description FROM forums WHERE id = ?");
            $stmt->bind_param("i", $id);
            $stmt->execute();
            return $stmt;
        }
} 
```

我这样调用它：

```
$forums = new Forums();
$result = $forums->getForum($_GET["id"]);
$result->bind_result($name, $description);
$result->fetch(); 
```

然后，由于它只返回一行，请在需要时调用`$name`或调用。`$description`

但是，我在浏览器（Chrome）中收到以下错误：

> 错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭了连接，没有发送任何数据。”

如果我摆脱该函数并连接到数据库并直接在使用结果的文件中创建准备好的语句，则不会发生这种情况。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:57:54.437

看起来像一个[变量范围](http://php.net/manual/en/language.variables.scope.php)问题。持有的对象在方法执行`$mysqli`后直接销毁。`getForum()`所以此时打开的数据库连接也被破坏了。但`$result->fetch();`需要连接仍然打开。

# opengl-es - OpenGLES 2 生成多个纹理

> ID：13848181
> 
> 赞同：1
> 
> 时间：2012-12-12T20:38:56.177
> 
> 标签：opengl-es, cocos2d-iphone

我正在尝试遵循 Ray Wenderlich 的教程，使用 OpenGLES 为背景创建具有纹理和单独纹理的山丘（http://www.raywenderlich.com/3888/how-to-create-a-game-like-tiny-翅膀第 1 部分）。但是，我正在尝试将其转换为 Cocos2D 2，因为他的教程仅适用于 OpenGLES 1。我已经成功达到了一定程度，我的 spriteWithColor 和 stripedSpriteWithColor1 方法都可以自己正常工作，但是如果我创建两个单独的精灵和一个接一个地使用一种方法，创建的第二个不会在 iOS 模拟器或实际设备上呈现。我不是 OpenGLES 专家，所以我无法调试此错误，这是我的源代码：

```
-(CCSprite *)stripedSpriteWithColor1:(ccColor4F)c1 color2:(ccColor4F)c2 textureSize:(float)textureSize stripes:(int) nStripes {
    // 1: Create new CCRenderTexture
    CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:textureSize height:textureSize];

// 2: Call CCRenderTexture:begin

[rt beginWithClear:c1.r g:c1.g b:c1.b a:c1.a];

// 3: Draw into texture
//OpenGL gradient

NSLog(@"Strip color is: %f : %f : %f", c2.r,c2.g,c2.b);

CGPoint vertices[nStripes*6];
ccColor4F colors[nStripes*6];
int nVertices = 0;
float x1 = -textureSize;
float x2;
float y1 = textureSize;
float y2 = 0;
float dx = textureSize / nStripes * 2;
float stripeWidth = dx/2;
ccColor4F stripColor = (ccColor4F){c2.r,c2.g,c2.b,c2.a};
for (int i=0; i<nStripes; i++) {
    x2 = x1 + textureSize;
    colors[nVertices] = stripColor;
    vertices[nVertices++] = CGPointMake(x1, y1);
    colors[nVertices] = stripColor;
    vertices[nVertices++] = CGPointMake(x1+stripeWidth, y1);
    colors[nVertices] = stripColor;
    vertices[nVertices++] = CGPointMake(x2, y2);
    colors[nVertices] = stripColor;
    vertices[nVertices++] = vertices[nVertices-3];
    colors[nVertices] = stripColor;
    vertices[nVertices++] = vertices[nVertices-3];
    colors[nVertices] = stripColor;
    vertices[nVertices++] = CGPointMake(x2+stripeWidth, y2);
    x1 += dx;
}

[self.shaderProgram use];

ccGLEnableVertexAttribs(kCCVertexAttribFlag_Position  | kCCVertexAttribFlag_Color);

glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colors);

glDrawArrays(GL_TRIANGLES, 0, (GLsizei)nVertices);

//Gradient

float gradientAlpha = 0.2;
nVertices = 0;

vertices[nVertices] = CGPointMake(0, 0);
colors[nVertices++] = (ccColor4F){0,0,0,0};
vertices[nVertices] = CGPointMake(textureSize, 0);
colors[nVertices++] = (ccColor4F){0,0,0,0};
vertices[nVertices] = CGPointMake(0, textureSize);
colors[nVertices++] = (ccColor4F){0,0,0,gradientAlpha};
vertices[nVertices] = CGPointMake(textureSize, textureSize);
colors[nVertices++] = (ccColor4F){0,0,0,gradientAlpha};

glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colors);

glDrawArrays(GL_TRIANGLE_STRIP,0, (GLsizei)nVertices);

// Highlighting

float borderWidth = textureSize/18;
float borderAlpha = 0.7f;
nVertices = 0;

vertices[nVertices] = CGPointMake(0, 0);
colors [nVertices++] = (ccColor4F){1,1,1,borderAlpha};
vertices[nVertices] = CGPointMake(textureSize,0);
colors [nVertices++] = (ccColor4F){1,1,1,borderAlpha};

vertices[nVertices] = CGPointMake(0, borderWidth);
colors [nVertices++] = (ccColor4F){0,0,0,0};
vertices[nVertices] = CGPointMake(textureSize,borderWidth);
colors [nVertices++] = (ccColor4F){0,0,0,0};

glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colors);
glBlendFunc(GL_DST_COLOR, GL_ONE_MINUS_SRC_ALPHA);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nVertices);

//Noise 
CCSprite *noise = [CCSprite spriteWithFile:@"noise.png"];
[noise setBlendFunc:(ccBlendFunc){GL_DST_COLOR, GL_ZERO}];
noise.position = ccp(textureSize/2, textureSize/2);
[noise visit];

[rt end];
// Return texture sprite
return [CCSprite spriteWithTexture:rt.sprite.texture];

}

-(CCSprite *)spriteWithColor:(ccColor4F)bgColor textureSize:(float)textureSize {

    // 1: Create new CCRenderTexture
    CCRenderTexture *newt = [CCRenderTexture renderTextureWithWidth:textureSize height:textureSize];

    // 2: Call CCRenderTexture:begin
    [newt beginWithClear:bgColor.r g:bgColor.g b:bgColor.b a:bgColor.a];

    // 3: Draw into the texture

    //openGL gradient
    //ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position | kCCVertexAttribFlag_Color );

    float gradientAlpha = 0.2;
    CGPoint vertices[4];
    ccColor4F colors[4];
    int nVertices = 0;

    vertices[nVertices] = CGPointMake(0, 0);
    colors[nVertices++] = (ccColor4F){0, 0, 0, 0};
    vertices[nVertices] = CGPointMake(textureSize, 0);
    colors[nVertices++] = (ccColor4F){0, 0, 0, 0};
    vertices[nVertices] = CGPointMake(0, textureSize);
    colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};
    vertices[nVertices] = CGPointMake(textureSize, textureSize);
    colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};

    // gradient
    [self.shaderProgram use];

    ccGLEnableVertexAttribs(kCCVertexAttribFlag_Position  | kCCVertexAttribFlag_Color);

    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
    glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colors);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nVertices);

    CCSprite *noise = [CCSprite spriteWithFile:@"noise.png"];
    [noise setBlendFunc:(ccBlendFunc){GL_DST_COLOR, GL_ZERO}];
    noise.position = ccp(textureSize/2, textureSize/2);
    [noise visit]; 

    // 4: Call CCRenderTexture:end
    [newt end];

    // 5: Create a new Sprite from the texture
    return [CCSprite spriteWithTexture:newt.sprite.texture];

}

- (ccColor4F)randomBrightColor {

    while (true) {
        float requiredBrightness = 172;

        ccColor4B randomColor =
        ccc4(arc4random() % 255,
             arc4random() % 255,
             arc4random() % 255,
             255);
        if (randomColor.r > requiredBrightness ||
            randomColor.g > requiredBrightness ||
            randomColor.b > requiredBrightness) {
            return ccc4FFromccc4B(randomColor);
        }
    }

}

- (void)genBackground {
    CGSize winSize = [CCDirector sharedDirector].winSize;

    [_background removeFromParentAndCleanup:YES];

    ccColor4F color3 = [self randomBrightColor];
    ccColor4F color4 = [self randomBrightColor];
    CCSprite *stripes = [self stripedSpriteWithColor1:color3 color2:color4 textureSize:512 stripes:4];
    stripes.position = ccp(winSize.width/2,winSize.height/2);
    ccTexParams tp2 = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};
    [stripes.texture setTexParameters:&tp2];

    _terrain.stripes = stripes;
    ccColor4F bgColor = [self randomBrightColor];

    _background = [self spriteWithColor:bgColor textureSize:512];

    _background.position = ccp(winSize.width/2, winSize.height/2);
    ccTexParams tp = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};
    [_background.texture setTexParameters:&tp];

    [self addChild:_background];
}

-(id) init {
    if((self=[super init])) {
        self.shaderProgram = [[CCShaderCache sharedShaderCache] programForKey:kCCShader_PositionColor];
        CC_NODE_DRAW_SETUP();
        _terrain = [Terrain node];
        [self addChild:_terrain z:1];
        [self genBackground];
        self.isTouchEnabled = YES;
        // [self scheduleUpdate];
    }
    return self;
} 
```

# c# - 遍历多个表的数据库关系

> ID：13848185
> 
> 赞同：0
> 
> 时间：2012-12-12T20:39:27.780
> 
> 标签：c#, entity-framework, database-design

我想在性能方面扩展[这个问题](https://stackoverflow.com/questions/11524819/reference-a-parent-table-for-a-navigation-property-in-ef)。数据库架构是：

制作

*   MakeId
*   品牌名称

模型

*   型号 ID
*   型号名称
*   制造商 (FK)

车辆

*   车辆编号
*   购买日期
*   型号 ID (FK)

如果我想知道*车辆的**制造*商，我需要使用 Vehicle.Model.Make 遍历模型表。假设我没有三个而是 4 或 5 个以这种方式连接的表，因此我必须编写例如 InvoiceForVehicle.Vehicle.Model.Make。我认为这会导致查询性能不佳。

 *我可以在 InvoiceForVehicle 表中添加一个额外的列*MakeId (FK)*，该表直接进入 make。这意味着我有重复的数据，并且每次我更改 InvoiceForVehicle 和车辆之间的关系时，我都必须相应地更新*MakeId (FK)*。

车辆发票

*   发票编号
*   创建日期
*   车辆 ID (FK)
*   制造商 (FK)

这是一个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:47:15.913

我怀疑您会看到很多成功（如果有的话），因为您将通过 ID 引用而不进行任何实际搜索。

我认为（根据我的知识）您现有的模型的结构比新提出的解决方案更正确。您不应该像新解决方案所允许的那样将自己置于可能丢失数据完整性的境地。

所以回答你的问题。不，我不认为这个新想法是一个好的解决方案。根据数据库正常形式，您现有的设置更“正确”。此外，由于`Entity Framework`延迟加载数据，您实际上不会运行任何不需要的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:49:17.017

出于性能原因：*也许*

出于一致性原因：**否**

使用您的建议，将有可能将车辆连接到与该车辆（的模型）不对应的制造商！

您可以尝试一直使用复合（也许是自然）键，并带有相应的复合外键。在这种情况下，重要的外键是 from`Vehicle (MakeId, ModelId)`到`Model (MakeId, ModelId)`。*

# ios - 未知对象类型的zlib解压方法

> ID：13848188
> 
> 赞同：2
> 
> 时间：2012-12-12T20:39:35.097
> 
> 标签：ios, objective-c, nsdate, zlib, nsstream

我正在寻求弄清楚如何解压缩一些使用 Zlib 压缩的 NSData。我最近在[这里](https://stackoverflow.com/a/13832172/748343)得到了一些帮助，我已将第二种方法添加到我需要使用它的类中，但不是第一种，因为我不需要压缩 NSData 仅解压缩。

但是我在使用这些代码行时遇到了问题

```
z_stream strm;
strm.next_in = (Bytef *)[compressedData bytes];
strm.avail_in = (unsigned int)[compressedData length];
strm.total_out = 0;
strm.zalloc = Z_NULL;
strm.zfree = Z_NULL; 
```

我不知道**z-stream**或**strm**的对象类型，我曾尝试在我的标头中将它们声明为 NSStreams，但这并没有做任何事情。

我得到的错误如下

![使用未声明的标识符“z_stream”](../Images/47037c891f32400c7c7fb3248162b30f.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:45:40.383

看起来您没有*包含*（导入）定义的头文件`z_stream`：

```
#import "zlib.h" 
```

# ruby - Windows 7 上的 Redmine，rake db:migrate

> ID：13848193
> 
> 赞同：3
> 
> 时间：2012-12-12T20:40:03.150
> 
> 标签：ruby, windows-7, redmine, migrate

因此，我尝试使用 WAMP Server 2.2 (c:\wamp\www\redmine) 在 Windows 7 64 位上安装 Redmine 2.1.3：

> C:\Users\Deith>gem env RubyGems 环境：
> 
> *   红宝石版本：1.8.24
> *   红宝石版本：1.8.7（2012-10-12 补丁级别 371）[i386-mingw32]
> *   安装目录：C:/Ruby187/lib/ruby/gems/1.8
> *   红宝石可执行文件：C:/Ruby187/bin/ruby.exe
> *   可执行目录：C:/Ruby187/bin
> *   红宝石平台：
>     *   红宝石
>     *   x86-mingw32
> *   宝石路径：
>     *   C:/Ruby187/lib/ruby/gems/1.8
>     *   C:/Users/Deith/.gem/ruby/1.8
> *   宝石配置：
>     *   :update_sources => 真
>     *   :详细 => 真
>     *   :基准 => 假
>     *   ：回溯 => 假
>     *   :bulk_threshold => 1000
> *   远程资源：
>     *   [http://rubygems.org/](http://rubygems.org/)

我正在遵循以下说明：[http](http://www.redmine.org/projects/redmine/wiki/RedmineInstall) ://www.redmine.org/projects/redmine/wiki/RedmineInstall我被困在 rake db:migrate。我已经从 WAMP 服务器通过 phpMyAdmin 创建了数据库，并编辑了 databae.yml 文件。但是当我跑步时

> rake db:migrate RAILS_ENV=production --trace

我明白了：

> ** 调用 db:migrate (first_time)
> 
> ** 调用环境（first_time）
> 
> ** 执行环境

整个控制台都被冻结了，我不明白发生了什么以及为什么会发生。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:24:41.090

尝试分别运行这两个命令

```
rails_env=production
rake db:migrate 
```

你也可以在你的 config.yml 文件中显示你已经完成的数据库配置，你使用的是 sqlite 还是 mysql？

# java - Windows LAF & ENTER 作为焦点遍历键

> ID：13848197
> 
> 赞同：1
> 
> 时间：2012-12-12T20:40:08.607
> 
> 标签：java, windows, user-interface, focus, look-and-feel

好吧，这很奇怪，因为它适用于其他非 Windows PLAF。

首先，我将我的 PLAF 设置为：

```
UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel"); 
```

然后我将 ENTER 添加到 FORWARD 遍历键中：

```
Set<AWTKeyStroke> forSet = new HashSet<AWTKeyStroke>();
forSet.add(AWTKeyStroke.getAWTKeyStroke(KeyEvent.VK_ENTER, 0));
KeyboardFocusManager.getCurrentKeyboardFocusManager().setDefaultFocusTraversalKeys(
KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, forSet); 
```

我反之亦然尝试过，但效果不佳。

有什么线索吗？

# php - 无法回显 $_POST 数据？为什么这段代码不起作用？

> ID：13848198
> 
> 赞同：0
> 
> 时间：2012-12-12T20:40:08.280
> 
> 标签：php

我正在下面运行以下测试，并将一些文本输入到 20 个文本框中的第一个文本框中。我只是试图在`spec.php`页面中回显 post 值以进行进一步处理。当我尝试它时，它什么都没有。我的问题是，如果我使用循环生成输入元素代码，其中每个输入“名称”属性都是唯一的，那么您希望传递给的 $_POST 变量为什么`spec.php`不会回显？

```
<form action="spec.php" method="post">
<?php
    for($i=0; $i < 20; $i++){
        echo '<input type="text" style="border:2px solid red;" name="inp'.$i.'" />';
    }

?>
<input type="submit"> 
```

规范.php

```
echo $_POST['inp0']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:41:45.947

因为您的第一个字段是`$_POST['inp0']`. 看看你的循环。它从零开始。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T20:50:50.633

首先使用以下命令调试您的 $_POST：

```
print_r($_POST); 
```

看看你的所有输入是否都在那里。

编辑：我刚刚使用了以下，它的工作原理！

```
 <form method="post" action="action.php">
 <?php
  for($i=0; $i < 20; $i++){
    echo '<input type="text" style="border:2px solid red;" name="inp'.$i.'" />';
  }
  ?>
 <input type="submit"> 
```

动作.php

```
<?php print_r($_POST); 
```

结果：

```
Array
(
[inp0] => one 
[inp1] => two
[inp2] => three
[inp3] => four 
[inp4] => five
[inp5] => six
[inp6] => seven
[inp7] => blah
[inp8] => blah
[inp9] => blah
[inp10] => blah
[inp11] => blah
[inp12] => 
[inp13] => 
[inp14] => 
[inp15] => 
[inp16] => 
[inp17] => 
[inp18] => 
[inp19] => 
) 
```

# mysql - 如何仅从一列中选择不同的值

> ID：13848200
> 
> 赞同：7
> 
> 时间：2012-12-12T20:40:12.617
> 
> 标签：mysql

我的记录如下：

```
key  | name
--------------
1111 | aa   
1111 | bb    
2222 | cc 
```

当值不同时，我需要选择`key`and 。当我尝试时：`name``key`

```
select distinct key, name from table; 
```

我得到了所有的行，因为查询对列的组合不同：`key`和`name`。但是，我需要的只是不同的`key`，我不关心`name`. 我有很多记录，所以我需要一个实用的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T20:42:46.180

询问：

```
SELECT `key`, MAX(`name`) as name
FROM `table`
GROUP BY `key` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T20:45:12.603

为什么不只是：

```
SELECT distinct key
FROM table 
```

或者

```
SELECT key, name
FROM table
GROUP BY key 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:43:24.413

```
SELECT key, name FROM table GROUP BY key; 
```

这将为 的每个不同值返回一行`key`，并且 的值`name`是从该组中的行中任意选择的。在实践中，MySQL 倾向于从物理存储在组中的第一个行中返回 name 的值，但这并不能保证。

正如其他答案所示，您可以将 name 放入聚合表达式中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:44:37.967

如果您不关心未分组的字段，请尝试此查询 -

```
select key, name from table group by key order by name 
```

MySQL 允许在不使用聚合函数的情况下选择字段。

*按名称排序*有助于从组中选择名字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T20:47:12.713

这个怎么样：

```
select * from table group by key having count(key) = 1 
```

# ios - 为什么我的翻页无法在我的 iOS 应用程序中运行？

> ID：13848208
> 
> 赞同：0
> 
> 时间：2012-12-12T20:40:34.573
> 
> 标签：ios, xcode, ios6

我正在从一本书中学习 iOS 编程，并且我编写了一个应用程序来使页面转到另一页，类似于 iBooks。但是当我在模拟器中运行它时，当我向左或向右滑动时，页面根本不会转动或转换。我不知道为什么。

我认为相关的代码如下。我还附上了整个项目，以防我错过任何东西。基本上有一个 UIWebview 是 UIViewController 的内容。它从充当 PageView 数据源的类中的模型填充。根据您转到适当（协议）方法的视图控制器，然后根据您要使用的视图控制器的索引设置 webview 中的内容。

但是，它不会起作用，正如所说：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController {
    NSUInteger index = [self indexOfViewController:(ContentViewController *)viewController];

    if (index == 0 || index == NSNotFound) {
        return nil;
    }
    else {
        index--;
        return [self viewControllerAtIndex:index];
    }
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController {
    NSUInteger index = [self indexOfViewController:(ContentViewController *)viewController];

    if (index == NSNotFound) {
        return nil;
    }
    else {
        index--;
        return [self viewControllerAtIndex:index];
    }
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [self createContentPages];

    NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithInteger:UIPageViewControllerSpineLocationMin]
        forKey:UIPageViewControllerOptionSpineLocationKey];

    _pageController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
        navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal
        options: options];

    _pageController.dataSource = self;
    [[_pageController view] setFrame:[[self view] bounds]];

    ContentViewController *initialViewController = [self viewControllerAtIndex:0];

    NSArray *viewControllers = [NSArray arrayWithObject:initialViewController];

    [_pageController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward
        animated:NO
        completion:nil];

    [self addChildViewController:_pageController];

    [[self view] addSubview:[_pageController view]];

    [_pageController didMoveToParentViewController:self];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)createContentPages {
    NSMutableArray *pageStrings = [[NSMutableArray alloc] init];

    for (int i = 1; i <= 10; i++) {
        NSString *contentString = [[NSString alloc] initWithFormat:@"<html><head></head><body><h1>Chapter %d</h1><p>This is the page %d of content displayed using UIPageViewController in iOS 6.</p></body></html>", i, i];
        [pageStrings addObject:contentString];
    }

    self.pageContent = [[NSArray alloc] initWithArray:pageStrings];
}

// Return the data view controller for the given index
- (ContentViewController *)viewControllerAtIndex:(NSUInteger)index {
    if (([self.pageContent count] == 0) || index >= [self.pageContent count]) {
        return nil;
    }
    else {
        UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];

        ContentViewController *dataViewController = [storyBoard instantiateViewControllerWithIdentifier:@"contentView"];

        dataViewController.dataObject = self.pageContent[index];

        return dataViewController;
    }
}

- (NSUInteger)indexOfViewController:(ContentViewController *)viewController {
    return [self.pageContent indexOfObject:viewController.dataObject];
} 
```

整个项目：[http ://cl.ly/1B0l3Z1H1616](http://cl.ly/1B0l3Z1H1616)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:13:51.670

在里面

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController 
```

方法，你有

```
index-- 
```

尝试将其更改为

```
index++ 
```

# ruby - Selenium Webdriver 无法创建 chrome webdriver 实例

> ID：13848210
> 
> 赞同：3
> 
> 时间：2012-12-12T20:40:55.803
> 
> 标签：ruby, selenium

我们已经在 chrome 和 firefox 上使用 Selenium 成功地针对 Rails 2 运行了集成测试。但是，我们最近升级到 Rails 3 并且在创建 chrome webdriver 实例时遇到了问题。

当我们尝试创建时，我们得到以下堆栈：

```
irb(main):002:0> profile = Selenium::WebDriver::Chrome::Profile.new
translate])#<Selenium::WebDriver::Chrome::Profile:0x64f2fd0 @extensions=[], @model=nil>
irb(main):003:0> profile['download.prompt_for_download'] = false
false
irb(main):004:0> driver = Selenium::WebDriver.for(:chrome, :profile  => profile,     :switches => %w[--ignore-certificate-errors --disable-popup-blocking --disable-translate])
ArgumentError: wrong number of arguments (0 for 1)
  from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/common/platform.rb:157:in `open'
  from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/common/platform.rb:157:in `ip'
    from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/common/platform.rb:170:in `interfaces'
    from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/common/port_prober.rb:23:in `free?'
    from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/common/port_prober.rb:5:in `above'
    from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/chrome/service.rb:33:in `default_service'
    from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/chrome/bridge.rb:14:in `initialize'
    from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/common/driver.rb:37:in `new'
    from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/common/driver.rb:37:in `for'
    from /var/www/myapp/shared/bundle/ruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver.rb:67:in `for'
    from (irb):4 
```

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:21:19.500

当我在我的 Gemfile 中包含一个包含“backports”gem 作为其依赖项的一部分的 gem 时，我看到了这一点。backports gem 重写了一些 Ruby 1.8 内部，覆盖了部分`UDPSocket`核心类。尝试摆脱 backports gem 并尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T13:16:35.117

**Chrome驱动安装：**

[从“ http://chromedriver.storage.googleapis.com/index.html?path=2.8/](http://chromedriver.storage.googleapis.com/index.html?path=2.8/) ”下载 Chromedriver 2.x。解压缩并将其保存在任何驱动器上的文件夹中。通过以下步骤设置路径：

复制路径直到 chromedriver.exe 右键单击​​计算机并选择“属性”选择“高级系统变量”选择“环境变量”单击“用户变量”的“路径”变量的编辑按钮附加 chromedriver 路径保存更改。

**运行硒测试：**

现在运行你的硒测试。它将在 chrome 浏览器上运行。

**示例代码**

需要'selenium-webdriver'

$driver = Selenium::WebDriver.for :chrome

$driver.navigate.to " [https://www.google.co.in/](https://www.google.co.in/) "

$driver.manage().window().maximize()

$driver.quit()

**注意**：您需要为最新版本的 Chrome 浏览器安装最新的 chromedriver

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T05:34:30.233

这是由于对 gem 的干扰以及库重用但它改变了接口`backports`的事实造成的。`socket``IO.open`

升级`backports`到[v2.6.7 或更高版本](https://github.com/marcandre/backports/issues/67)应该可以解决此问题。

# c++ - 图实现：变量具有初始化程序但类型不完整

> ID：13848211
> 
> 赞同：0
> 
> 时间：2012-12-12T20:40:58.237
> 
> 标签：c++

我正在尝试学习 C++，并希望实现一些用于在图中查找最小生成树的算法。但是，我在编写界面时遇到了一些麻烦，我不知道我哪里出错了。我收到两个错误：

错误：变量 'Graph::adjIterator it' 具有初始化程序但类型不完整

错误：预期的 ',' 或 ';' 在'='标记之前

图.h

```
#ifndef GRAPH_H
#define GRAPH_H

#include<vector>

struct Edge {

    int v, w;
    double weight;
    Edge(int v_, int w_, double weight_ = 1) :
            v(v_), w(w_), weight(weight_) {
    }
};

class Graph {
private:
    int Vcnt, Ecnt;
    bool directedGraph;
    struct Node {

        int v;
        Node* next;
        Node(int v_, Node* next_) :
                v(v_), next(next_) {
        }

    };
    std::vector<Node*> adj;     //this is a linked list ! 

public:
    Graph(int V, bool diGraph = false) :
            adj(V), Vcnt(V), Ecnt(0), directedGraph(diGraph) {
        adj.assign(V, NULL);
    }
    int V() {
        return Vcnt;
    }
    int E() {
        return Ecnt;
    }
    bool directed() const {
        return directedGraph;
    }
    void insert(Edge e) {
        int v = e.v;
        int w = e.w;
        adj[v] = new Node(w, adj[v]);
        if (!directedGraph)
            adj[w] = new Node(v, adj[w]);
        Ecnt++;
    }
    bool egde(int v, int w) const;
//void remove(Edge e);
    class adjIterator;
    friend class adjIterator;
}; 
```

图.cpp

```
#include "graph.h"

class Graph::adjIterator {
private:
    const Graph & G;
    int v;
    Node* t;
public:
    adjIterator(const Graph& G_, int v_) :
            G(G_), v(v_) {
        t = 0;
    }
    int begin() {
        t = G.adj[v];
        return t ? t->v : -1;
    }
    int nxt() {
        if (t)
            t = t->next;
        return t ? t->v : -1;
    }
    bool end() {
        return t == 0;
    }
}; 
```

主文件

```
#include <iostream>
#include "graph.h"

int main() {
    Graph G(2);
    Edge e(0, 1);
    G.insert(e);
    for(Graph::adjIterator it(G,0) = it.begin(); it != it.end(); it.nxt()) {
        //stuff 
    }
    return 0;
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:52:41.817

您已在 .cpp 文件中定义了类“adjIterator”，然后尝试从仅在 .h 中看到前向声明的不同 .cpp 文件中使用它

此外，虽然这不是您的直接问题，但您的 .h 文件中有很多可能属于 .cpp 的内容。

通常，您将所有声明放在 .h 中，并将所有实现放在 .cpp 中。

所以一个 .h 可能有：

```
class myClass {
  public:
  myClass();
  void someMethod(int argument);
} 
```

然后 .cpp 将具有：

```
myClass::myClass()
{
  //initialise stuff
}

void myClass::someMethod(int argument)
{
  //do something clever
} 
```

# jquery - 在 jQuery Draggable Drag 事件期间获取放置目标

> ID：13848212
> 
> 赞同：1
> 
> 时间：2012-12-12T20:41:01.000
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我正在学习使用[jQuery UI Draggable Widget](http://api.jqueryui.com/draggable/)。我需要做一些特殊的处理来响应[Drag 事件](http://api.jqueryui.com/draggable/#event-drag)。

从我的 Drag 事件处理程序中，有没有办法获取当前放置目标 - 即鼠标当前悬停的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:36:42.383

在拖动事件中，无法获取当前悬停元素，但是您可以从“可放置”放置事件中获取。检查这个[JQFAQ.com](http://jqfaq.com/how-to-know-on-which-element-an-item-is-currently-being-dragged-on/)主题，它将解释如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T12:55:46.517

您可以在可放置目标中使用**hoverClass**属性，并在拖动事件中检查哪个放置区域具有 hoverClass。

这有点hacky，但它会起作用。

# iphone - 为什么 UIImage 不能正确拉伸？

> ID：13848215
> 
> 赞同：2
> 
> 时间：2012-12-12T20:41:06.913
> 
> 标签：iphone, objective-c, ios, uiimageview, uiimage

我正在尝试使用以下代码拉伸 UIImage：

```
UIImage *stretchyImage = [[UIImage imageNamed:@"Tag@2x.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0];
UIImageView *newTag = [[UIImageView alloc] initWithImage:stretchyImage]; 
```

拉伸前的图像是这样的：

![在此处输入图像描述](../Images/0ce696dcae3aaec2be693a4f63cb7453.png)

之后，看起来像这样：

![在此处输入图像描述](../Images/d8fce7d6750395acde9964d79d9d671a.png)

为什么拉伸没有正常工作？角落都已经像素化并且看起来被拉伸了，而实际上只有中间应该被拉伸。仅供参考：我在 iOS 6 上运行这个应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:55:50.007

为什么您的实现不起作用是**因为**您为*stretchableImageWithLeftCapWidth:topCapHeight:*方法提供的值。

首先，*stretchableImageWithLeftCapWidth:topCapHeight:*在 iOS 6 中被弃用。新的 API 是 resizableImageWithCapInsets:

图像在顶部、底部和右侧具有不可拉伸的部分。您告诉 API 的是“从左侧获取 -10，根据我给您的尺寸拉伸其余部分”。

由于您在右侧有一个不可重复的自定义形状，无论是高度**还是**宽度，我们应该将该部分作为一个整体。

所以顶盖宽度应该是图像的高度（以保持右侧物体的形状），左盖宽度应该是〜20像素（圆角矩形角），底盖可以是0，因为顶部cap 是整个图像的高度，最后右 cap 应该是右侧自定义橙色形状的宽度（我将其设为 ~40 像素）。

您可以使用上限值并获得更好的结果。

```
UIImage *image = [UIImage imageNamed:@"Tag"];
UIImage *resizableImage = [image resizableImageWithCapInsets:UIEdgeInsetsMake(image.size.height, 20, 0, 40)]; 
```

应该做的伎俩。此外，当您摆脱文件扩展名和@2x 时，-imageNamed 可以正常工作。

# ccr - 要求澄清去中心化软件服务通信机制

> ID：13848216
> 
> 赞同：0
> 
> 时间：2012-12-12T20:41:20.590
> 
> 标签：ccr, robotics-studio

我从[http://social.msdn.microsoft.com/Forums/en/roboticsdss/thread/3169a539-f536-4b9d-bae7-01212a857660看到](http://social.msdn.microsoft.com/Forums/en/roboticsdss/thread/3169a539-f536-4b9d-bae7-01212a857660)并且从我自己使用和调试 DSS 服务的经验来看，DSS 使用克隆进行节点内通信，使用克隆+序列化进行节点间通信。我请求你帮助理解这个机制。对于节点内通信，我知道 DSS 仅使用克隆，因为我们在同一进程空间中传输对象（不需要通过网络进行通信），并且我们不希望任何不需要的共享内存依赖项。但是，在节点间通信的过程中，为什么需要克隆+序列化呢？从我对序列化的理解来看，当你序列化一个对象时，你在序列化结束时得到的输出是完全独立于被序列化的对象的，可以单独使用来构造一个新的对象。此外，在序列化过程中，我不认为我们要更新原始对象，我们只是要从中读取。在这种情况下，单靠序列化是不够的吗？为什么我们需要在序列化之前进行克隆？

谢谢，

文卡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T00:37:06.567

通常，DSS 使用生成的代理类型序列化消息，因此如果使用原始类型构造消息，则在序列化之前将首先将其转换为代理类型（隐式克隆操作）。另一方面，如果使用代理类型构造消息，则在序列化之前没有单独的克隆步骤（为合作伙伴使用代理类型的一个很好的理由）。

如果一个消息类型（或更严格的消息体类型）实现了 IDssSerializable，那么行为取决于该类型的具体实现（因为这绕过了通常的代理机制）

# r - 使用 ggplot2 从动物园对象绘制多线图

> ID：13848218
> 
> 赞同：3
> 
> 时间：2012-12-12T20:41:26.193
> 
> 标签：r, graph, ggplot2, time-series, timeserieschart

全部。

我在 stackoverflow 上阅读了几条之前的消息，并浏览了 zoo 和 ggplot2 的文档，但没有找到任何合适的答案。

假设我有一个名为“数据”的**动物园**对象。平面文件中的原始数据如下：

```
Date,Quote1,Quote2,Quote3,Quote4,Quote5
18/07/2008,42.36,44.53,28.4302,44.3,42
21/07/2008,43.14,44.87,28.6186,44.83,43.27
22/07/2008,43.26,44.85,28.6056,44.86,42.84
23/07/2008,44.74,45.61,29.7558,45.69,#N/A
24/07/2008,43.99,45.14,29.2944,45.19,#N/A
25/07/2008,43.18,45.33,29.4569,45.46,43.65
28/07/2008,43.45,44.72,28.5016,44.89,43.31
29/07/2008,43.49,44.8,28.1247,44.88,42.85
30/07/2008,44.55,45.54,28.0727,45.58,43.67
31/07/2008,43.36,45.5,27.9818,45.63,43.91
01/08/2008,43.34,44.75,28.0792,44.69,43.04 
```

现在，我想在一个折线图上绘制这五种金融产品的时间序列，以便比较它们的演变。

我希望使用**ggplot2**。

有人愿意给我一些提示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T22:21:29.327

如果`data`是你的动物园对象，那么试试这个（并查看`?autoplot.zoo`更多信息）：

```
p <- autoplot(data, facet = NULL)
p 
```

或者这可能是因为我认为`linetype`在同一个面板中使用这么多系列的自动变化看起来不太好：

```
p + aes(linetype = NULL) 
```

![在此处输入图像描述](../Images/cce1e3d06e2c3fc807faec188038f9f3.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T21:01:53.797

这是一种方法：

```
df <- read.csv(text = "Date,Quote1,Quote2,Quote3,Quote4,Quote5
18/07/2008,42.36,44.53,28.4302,44.3,42
21/07/2008,43.14,44.87,28.6186,44.83,43.27
22/07/2008,43.26,44.85,28.6056,44.86,42.84
23/07/2008,44.74,45.61,29.7558,45.69,#N/A
24/07/2008,43.99,45.14,29.2944,45.19,#N/A
25/07/2008,43.18,45.33,29.4569,45.46,43.65
28/07/2008,43.45,44.72,28.5016,44.89,43.31
29/07/2008,43.49,44.8,28.1247,44.88,42.85
30/07/2008,44.55,45.54,28.0727,45.58,43.67
31/07/2008,43.36,45.5,27.9818,45.63,43.91
01/08/2008,43.34,44.75,28.0792,44.69,43.04", na.string = "#N/A")

df$Date <- strptime(df$Date, format = "%d/%m/%Y") 
```

创建一个`zoo`对象：

```
library(zoo)
dat <- zoo(df[-1], df$Date) 
```

将对象转换为数据框`ggplot2`：

```
df_new <- data.frame(value = as.vector(dat),
                     time = time(dat),
                     quote = rep(names(dat), each = nrow(dat))) 
```

阴谋：

```
library(ggplot2)
ggplot(df_new, aes(y = value, x = time, colour = quote)) + geom_line() 
```

![在此处输入图像描述](../Images/cdae6fdf94f20cdbcd8221a6df69915c.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:45:58.663

这是另一种略有不同的方法，使用 reshape 中的 melt

```
# Read your data and format date (as proposed by Sven)

df <- read.csv(text = "Date,Quote1,Quote2,Quote3,Quote4,Quote5
18/07/2008,42.36,44.53,28.4302,44.3,42
21/07/2008,43.14,44.87,28.6186,44.83,43.27
22/07/2008,43.26,44.85,28.6056,44.86,42.84
23/07/2008,44.74,45.61,29.7558,45.69,#N/A
24/07/2008,43.99,45.14,29.2944,45.19,#N/A
25/07/2008,43.18,45.33,29.4569,45.46,43.65
28/07/2008,43.45,44.72,28.5016,44.89,43.31
29/07/2008,43.49,44.8,28.1247,44.88,42.85
30/07/2008,44.55,45.54,28.0727,45.58,43.67
31/07/2008,43.36,45.5,27.9818,45.63,43.91
01/08/2008,43.34,44.75,28.0792,44.69,43.04", na.string = "#N/A")

df$Date <- strptime(df$Date, format = "%d/%m/%Y")

library(reshape)
# reshape your data with melt
melted <- melt(df[-1])
# add dates
melted2 <- cbind(df$Date,melted)
# plot with ggplot
ggplot(melted2,aes(y = value, x = melted2[,1], color = variable)) + geom_line() 
```

![阴谋](../Images/bfbb49eb78cd033266b3be53d749aec2.png)

# clojure - 使用 Korma 和 MySQL 投射空日期字段

> ID：13848222
> 
> 赞同：2
> 
> 时间：2012-12-12T20:41:34.110
> 
> 标签：clojure, korma

使用 Korma 和 MySQL，我试图从名为 posts 的表中进行选择，默认情况下，发布日期的字段为 nil。

```
mysql> describe posts;
+-----------+--------------+------+-----+---------------------+-------+
| Field     | Type         | Null | Key | Default             | Extra |
+-----------+--------------+------+-----+---------------------+-------+
| id        | int(11)      | NO   | PRI | 0                   |       |
| title     | varchar(250) | YES  |     | NULL                |       |
| content   | text         | YES  |     | NULL                |       |
| status    | tinyint(1)   | YES  |     | 0                   |       |
| created   | timestamp    | NO   |     | CURRENT_TIMESTAMP   |       |
| published | timestamp    | NO   |     | 0000-00-00 00:00:00 |       |
| author    | int(11)      | NO   | MUL | NULL                |       |
+-----------+--------------+------+-----+---------------------+-------+
7 rows in set (0.02 sec) 
```

如果我尝试选择并使用已发布的字段，则会收到以下错误：

> user=> (select posts (fields :id :title :content :status :created : **published** )) 使用 SQL 执行查询失败：SELECT posts.id、posts.title、posts.content、posts.status、posts.created、 posts.published FROM posts :: [] ClassCastException java.lang.RuntimeException 无法转换为 java.sql.SQLException clojure.java.jdbc/print-sql-exception (jdbc.clj:350)

如果我不使用已发布的字段，一切正常：

> user=> (select posts (fields :id :title :content :status :created :author)) [{:id 1, :title "Hello World!", :content "*欢迎使用世界上最先进的 Clojure Beat 引擎 Beats !* ", :status true, :created #, :author 1} {:id 2, :title "Hello World!, again!", :content "Sayin 't 'gain!*欢迎来到 Beats，世界上最先进的 Clojure Beat引擎！* ", :status true, :created #, :author 2}]

我该如何处理这个领域？我试图用一个简单的日志语句向我的实体添加一个转换函数，但它似乎甚至没有被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:46:30.330

假设 Marc B 是正确的，并且问题的原因是您有一条发布为 0000-00-00 的记录，那么您可以将 zeroDateTimeBehavior=convertToNull 添加到您的 Korma mysql :db 键，例如：

```
:db "mydb?zeroDateTimeBehavior=convertToNull" 
```

现在 JDBC 和 Korma 将为该记录返回已发布的 nil：

```
(select posts (fields :id :published))
;; [{:published nil, :id 1}] 
```

您可能必须重新启动您的 repl 才能使标志生效。

也可以看看：

*   [http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html)
*   [在 JDBC 中处理 DATETIME 值 0000-00-00 00:00:00](https://stackoverflow.com/questions/782823/handling-datetime-values-0000-00-00-000000-in-jdbc)

# wpf - WPF 转 XPS 转 PDF

> ID：13848223
> 
> 赞同：15
> 
> 时间：2012-12-12T20:41:40.577
> 
> 标签：wpf, pdf, .net-4.0, xps, pdfsharp

我已经在标准 WPF 控件中实现了一个报告，并且还实现了一个`DocumentPaginator`来获取这些控件并将它们转换为用于打印的文档。

[我还实现了一些代码，它使用文档分页器将页面呈现为图像并使用PDFSharp](http://www.pdfsharp.com/)将它们写入 PDF ，但是这不允许复制和粘贴，图像质量也值得怀疑。

我已经尝试过[GhostXPS](http://artifex.com/downloads/)实用程序，并正在考虑通过保存到 XPS 文档然后使用[GhostXPS](http://artifex.com/downloads/)将其转换为 PDF 来使用它，这很有希望，但是当前版本包含一个错误，该错误会呈现从生成的 PDF 复制的数据无用...

所以我想我会在这里要求尝试找到一种有效的方法来执行此操作，有人可以提出一个好的方法来获取`DocumentPaginator`并直接将其保存为 PDF，具有复制/粘贴功能或将其从 XPS 文档转换到具有此功能的 PDF？

谢谢，亚历克斯。

编辑 - PDFSharp 修复：好的，按照这里的要求，我为 PDFSharp 1.31 XPS 转换器编译修复：

1）我从这里下载了源代码：

[PDFSharp - SourceForge](http://sourceforge.net/projects/pdfsharp/files/pdfsharp/PDFsharp%201.31/)

2）我按照这篇文章中的说明进行操作：

[PSFSharp 修复](http://forum.pdfsharp.net/viewtopic.php?f=2&t=2144)

```
XpsParser.ImageBrush.cs (ln 22, added): brush.Opacity = 1;
PdfContentWriter.cs (ln 526, changed): if (opacity <= 1) 
```

3）然后只需编译源代码，首先打开'PdfSharp-WPF.csproj'并构建它，然后打开'PdfSharp.Xps.csproj'并构建它，相关库是'PdfSharp-WPF.dll'和'PdfSharp.Xps.dll'

请注意，在尝试构建源代码时，您可能会收到一些错误，具体取决于您所针对的 .NET 版本，如果您只是阅读错误消息，这些很容易修复。

编辑（2）：NJones 创建了一篇博客文章，其中包含有关 PdfSharp 修复的更多详细信息：[在 WPF 中输出到 PDF](http://www.nathanpjones.com/wp/2013/03/output-to-pdf-in-wpf-for-free/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T08:05:59.530

PDFsharp 1.31 附带了一个 XPS 转换器。这是一个测试版，但 AFAIK 它支持几乎所有内容，并且可以满足您的需求。

PDFsharp 1.31 可以从 SourceForge 或 CodePlex 下载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T09:18:31.167

如果可以选择商业 SDK，那么我遇到的一家公司拥有专业的 XPS 到 PDF 转换选项（以及更多）。

[http://www.nixps.com](http://www.nixps.com)

*警告：我不隶属于这家公司，也没有尝试过他们的产品。另一方面，我听说**过他们的好消息。***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T20:08:59.420

我使用[Telerik Reporting](http://www.telerik.com/products/reporting.aspx)来处理文档分页，并允许您在设计器中创建报表，类似于创建 GUI。我决定只购买第 3 方产品，因为我不想花费开发时间编写自己的分页器等。此外，这个工具可能比自定义解决方案更能证明错误，并为你想要的方式提供很大的灵活性设计您的打印输出/报告。将来，如果您需要更复杂的打印或报告，此工具的功能会更多。我不为 Telerik 工作，但那里的产品很好。

它允许导出为 PDF、Word、Excel、HTML、PowerPoint、PNG 等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T01:11:30.247

恕我直言，您的想法是正确的：在我看来，XPS 是将数据序列化为可用格式的最简单方法，尤其是用于转换。

至于第三方工具，我有一个同行（例如，不是我自己）使用[CheckPrixa](http://www.micre13b.com/xps-to-pdf-converter.html)并取得了一定程度的成功；它是免费软件，它提供命令行转换。（即序列化文档并转换 la 生成的 .bat 文件。）

它还允许您处理关键字、标题等以及更重要的项目，例如分页。

据我所知，没有已知的差异。

或者，如果转换 MSXPS 让您头疼，您可能想查看[XpsConverter](http://msdn.microsoft.com/en-us/library/windows/hardware/hh846189%28v=vs.85%29.aspx)，它将 MSXPS 转换为 OpenXPS，并且作为 Window 的驱动程序，它可以在任何使用 .NET 3 及更高版本的机器上使用。

让我们随时了解您尝试的任何解决方案，虚拟报告越来越受欢迎。

# c# - 使用 RavenDB 文档填充 KendoUi Treeview

> ID：13848228
> 
> 赞同：0
> 
> 时间：2012-12-12T20:41:51.217
> 
> 标签：c#, asp.net-mvc-4, treeview, ravendb, kendo-ui

我正在使用 MVC4 和 C#。我有一个 KendoUI Treeview，我想用来自 RavenDB 的数据填充它。

在演示中，他们使用了这个：

```
public JsonResult Employees(int? id)
    {
        var dataContext = new NorthwindDataContext();

        var employees = from e in dataContext.Employees
                        where (id.HasValue ? e.ReportsTo == id : e.ReportsTo == null)
                        select new {
                            id = e.EmployeeID,
                            Name = e.FirstName + " " + e.LastName,
                            hasChildren = e.Employees.Any()
                        };

        return Json(employees, JsonRequestBehavior.AllowGet);
} 
```

注意参数“id”——它是一个整数。在 RavenDb 中，文档 ID 是字符串，例如。myDco/231...

想象这是一个标准文档：

```
{
  "CreationDate": "12/12/2012 8:07:59 PM",
  "Name": "jkljklk",
  "Type": "kljkljkljkljkl",
  "Description": "ljkljklj",
  "CreatedByUser": "ljklklkljklj",
  "Deleted": false,
  "Status": "NEW",
  "Parent": "product/546"
} 
```

我将如何填充树视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:01:30.737

使用 string 而不是 int 应该没有任何问题。您只需要根据传递给 Action 方法的字符串参数来获取所需的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:53:21.433

我想通了。

我更改了我的 RavenDB 文档以包含其所有子项的列表：

```
{
  "CreationDate": "12/12/2012 9:33:34 PM",
  "Name": "hohoho",
  "Type": "hohohoh",
  "Description": "hohohoh",
  "CreatedByUser": "hohohoh",
  "Deleted": false,
  "Status": "NEW",
  "Parent": "ohohohoh",
  "Children": [
  "item/1",
  "item/2",
  "item/3"
  ]
} 
```

然后我通过控制器将我的项目列表返回给视图，然后遍历它们，将所有子节点附加到它们正确的父节点：

```
@(Html.Kendo().TreeView().Name("TreeView").DragAndDrop(true)
.Items(treeview =>
           {
               foreach (var myItem in Model)
               {
                   var myItemName = myItem.Name;
                   var children = myItem.Children;
                   treeview.Add().Text(myItemName ).Expanded(false).Items(branch =>
                                                                             {
                                                                                  if (children != null)
                                                                                     {
                                                                                         foreach (var child in children)
                                                                                         {
                                                                                             branch.Add().Text(child);
                                                                                         }
                                                                                     }
                                                                             });
               }
           }
   )) 
```

无论如何，感谢您的回复:)

希望有一天这对其他人有所帮助。

# facebook-like - 像按钮迁移

> ID：13848229
> 
> 赞同：1
> 
> 时间：2012-12-12T20:41:51.770
> 
> 标签：facebook-like, facebook-opengraph, feed

随着点赞按钮迁移的消息，我们似乎无法向用户新闻提要发布更新。

[facebook like 按钮迁移](https://developers.facebook.com/docs/reference/plugins/like/migration/)

这是有史以来最好的功能之一.. 即喜欢/分享您的页面并成为您网站的粉丝/追随者点击。从现在开始，任何人都知道如何做到这一点。OpenGraph API 中是否有任何新功能可以通过用户单击完成此操作。我希望如此。我真的需要这个功能。我不相信开放图技术正在倒退。

# c# - C# 简单反射

> ID：13848230
> 
> 赞同：0
> 
> 时间：2012-12-12T20:41:52.920
> 
> 标签：c#, reflection

我有一个类，其中包含另一个具有简单 get set 属性的 poco 类：

```
public class PersonalInformation    {
    public string FirstName { get; set; }
    public string FirstSomethingElse { get; set; }
} 
```

我想知道当前实例的 PersonalInformation.FirstName 是否有值。我不知道如何通过反射获得它：

```
foreach (PropertyInfo property in this.PersonalInformation.GetType().GetProperties())
{
    if (property.Name.Contains("First"))
    {
    if (property.GetValue(XXX, null) != null)
                            do something...

    }
} 
```

我的实例是“this”，它不起作用，this.PersonalInformation 也不起作用。我究竟做错了什么？

谢谢您的答复，

阿尔多

附录：我正在使用 ASP.NET MVC3。在我的剃刀观点中，我可以很容易地做到以下几点：

```
foreach (var property in Model.PersonalInformation.GetType().GetProperties()) 
{
    <div class="editor-line">
        @if (property.Name != null)
        {
        <label>@(property.Name)</label>
        @Html.Editor(property.Name)
        }
    </div>
} 
```

有一个 property.Value 成员返回字段的当前值。如上所示，该字段来自 poco 类。代码隐藏中的等效代码是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:43:47.653

`this.PersonalInformation`当然*应该*工作。毕竟，这就是你所说的目标。

示例代码：

```
using System;
using System.Reflection;

public class PersonalInformation    {
    public string FirstName { get; set; }
    public string FirstSomethingElse { get; set; }
}

public class Foo 
{
    public PersonalInformation PersonalInformation { get; set; }

    public void ShowProperties()
    {
        foreach (var property in this.PersonalInformation
                                     .GetType()
                                     .GetProperties())
        {
            var value = property.GetValue(this.PersonalInformation, null);
            Console.WriteLine("{0}: {1}", property.Name, value);
        }
    }
}

class Test
{
    static void Main()
    {
        Foo foo = new Foo { 
            PersonalInformation = new PersonalInformation {
                FirstName = "Fred",
                FirstSomethingElse = "XYZ"
            }
        };
        foo.ShowProperties();
    }
} 
```

虽然如果你只是“想知道当前实例的 PersonalInformation.FirstName 是否有值”，那么我不明白你为什么要使用反射......

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-12T20:46:22.663

GetProperties 返回一个 PropertyInfo[]，而不是单个 PropertyInfo。

# javascript - 哪个带有 node.js 和 socket.io 的免费服务器？

> ID：13848232
> 
> 赞同：1
> 
> 时间：2012-12-12T20:41:58.473
> 
> 标签：javascript, node.js, websocket, socket.io

我刚刚使用 node.js 和 socket.io 完成了一个小应用程序。我想把它放在网上，我不知道该拿哪个服务器。我正在寻找一个免费的。我已经找到了 appfog、nodester 和 pusher，但我不知道我们是否可以将它们与 socket.io 一起使用，而且使用起来似乎很复杂。

如果你知道一个简单的或有据可查的，那就太酷了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:50:58.657

如果您是 Amazon Web 服务的新手，您可以获得一年免费的 micro.t1 ECS 实例。更多细节[在这里](http://aws.amazon.com/free/)。我正在自己目前在 Ubuntu 上托管一个[node.js/socket.io 应用程序。](http://yay3d.com/graffiti)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T21:21:59.983

您将需要一台主机，它可以让您在系统级访问构建/部署软件，或者您需要一台为您提供兼容环境的主机。

我个人多年来一直使用 Slicehost，但很快就会切换到 Linode。我更喜欢完全控制我的安装。

您可以查看从 Amazon 运行 EC2 实例，[http://aws.amazon.com/ec2/](http://aws.amazon.com/ec2/)。大量实例大小可供选择，大量预配置 AMI 可供选择。或者只是选择一个基本的并设置您需要的任何服务器。

其他一些解决方案如 Heroku 和 nodester。Socket.io 适用于所有这些。

通常，您为自己配置的服务器支付的费用更少，并且您可以更灵活地执行操作。如果你对此不感兴趣，那就花更多的钱尝试寻找其他人的平台来满足你的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T20:47:13.077

您可以尝试注册一个[Windows azure 帐户](http://www.windowsazure.com)。他们有 nodejs 支持，您可以获得多达 10 个免费网站（在某种程度上受资源限制）

这应该会让您解决问题，直到您准备好付款（希望当您有更多流量时）。

# c# - 如何使用 MTP 从 USB 设备上传和下载数据（设备不是相机）

> ID：13848233
> 
> 赞同：8
> 
> 时间：2012-12-12T20:42:14.697
> 
> 标签：c#, c++, usb, mtp

我希望你能帮助我——我的任务是使用 MTP 将一些文件上传并下载到 USB 设备。

我发现了这个很好的例子： http: [//www.codeproject.com/Articles/30726/Transferring-D90-images-with-WIA](http://www.codeproject.com/Articles/30726/Transferring-D90-images-with-WIA)现在我可以将一些图像从我的智能手机传输到 PC 并且我能够增强这个例子向我提供与设备管理器中相同的设备信息（例如 ID、制造商、PnP ID 字符串等）到目前为止一切顺利。此示例使用 WIA，我想只能从设备传输图像，不是吗？

所以我的问题是 - 将文件上传和下载到通过 MTP 连接的 USB 设备需要什么技术？我花了几天时间询问谷歌，但我发现没有一个可行的解决方案或一个可行的例子。微软在这个问题上没有帮助，他们页面上的大多数链接都已失效。

我希望这里有人可以将我推向正确的方向，以便我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T05:30:42.147

我相信 Windows 便携式设备 (WPD) API 就是您所追求的。

[http://msdn.microsoft.com/en-us/library/dd389005(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/dd389005(v=vs.85).aspx)

# c# - 多余的 'IEnumerable.OfType ' 调用考虑与 'null' 进行比较

> ID：13848234
> 
> 赞同：1
> 
> 时间：2012-12-12T20:42:18.053
> 
> 标签：c#, resharper

我从 ReSharper 收到这条消息。ReSharper 没有提出我在检查代码后认为合适的更改。因此，我担心问题可能是我不了解正在发生的事情，而不是 ReSharper 没有提供应有的帮助。

```
public interface IFrobable { }

public class DataClass
{  
    public List<IFrobable> Frobables {get; set;}

    //...
}

public class WorkerClass
{
    //...

    void Frobinate(List<IFrobable> frobables)
    { 
       //Frobs the input
    }

    void DoSomething(List<IFrobable> input>)
    {
        //Original code with Resharper on OfType<IActivity>
        Frobinate(input.OfType<IFrobable>().ToList()); 

        //Suggested change from ReSharper - Is this a generic refactor 
        //instead of issue specific?
        Frobinate(Enumerable.OfType<IFrobable>(input).ToList()); 

        //What I think should be safe to do - compiles and appears to work
        Frobinate(input);
    }
} 
```

是否有任何理由说明我提议的更改可能不安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:45:32.737

您的最后一个案例可能会也可能不会引入逻辑错误。

您真的希望`Frobinate`能够修改`input`传入的列表`DoSomething`还是这些引用的副本？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:46:39.990

这是一个常规的函数调用：

```
Enumerable.OfType<IFrobable>(input) 
```

这是相同的函数，但作为扩展方法调用：

```
input.OfType<IFrobable>() 
```

在你的情况下：

```
Frobinate(input); 
```

绝对没问题，因为：

```
input.OfType<IFrobable>().ToList() 
```

等于：

```
input.Where(x => x as IFrobable != null).ToList() 
```

在你的方法`input`中已经定义了`List<IFrobable>`那么有什么意义呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:16:53.773

> ```
>  //Suggested change from ReSharper 
> ```

实际上，`OfType`作为静态方法调用`Enumerable`而不是作为扩展方法调用`input`不是ReSharper的**建议- 这是一个****上下文操作**。[我在这篇文章中](https://stackoverflow.com/a/10976704/71059)阐述了不同之处。

对于实际问题：

检验

> 冗余 ' `IEnumerable.OfType<T>`' 呼叫。考虑与 ' `null`'进行比较

不是 ReSharper 提供**快速修复**解决方案的解决方案，我猜是因为没有一个明确的“正确”更改要做。这只是说

> 嘿，里面的*所有东西**肯定*`input`都是类型的——如果你想过滤这个列表，你可能想用ness过滤*`IFrobable``null`*

 *这可能与您的情况无关。

至于您提出的修复 - 正如已经指出的那样，这将意味着传递给**的实际`List<>`引用`DoSomething`**`Frobinate`，而不是**包含相同项目****的新`List<>`**引用- 如果可以，那就去吧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-29T11:25:07.583

在您的示例中，您`input`已经包含类型元素，`IFrobable`因此 ReSharper 说按类型过滤它们没有意义，`IFrobable`因为过滤条件始终为真，它建议您仅使用`input.ToList()`调用或过滤元素购买`null`：`input.Where(element => element != null).ToList()`*

# sql - 从一个 sql 查询中获取记录并在另一个查询中使用它

> ID：13848235
> 
> 赞同：0
> 
> 时间：2012-12-12T20:42:26.130
> 
> 标签：sql

我有一个关于 SQL 的问题。

```
SELECT TOP (10) ordr.ordID
FROM [inSight].[dbo].[Orders] ordr
INNER JOIN [inSight].[dbo].[OrderLines] ordn ON ordr.ordID = ordn.ordID
JOIN [inSight].[dbo].[OrderLineAttributeValues] atr ON ordn.olnID = atr.olnID
WHERE
    atr.atbID=190 AND
    atr.olnavValue=1 
```

（上述查询返回多个结果）

所以我要做的是，从上面的查询中获取结果，并在下面的查询中一一使用。

```
SELECT op.optCode
FROM [inSight].[dbo].[Orders] ordr
INNER JOIN [inSight].[dbo].[OrderLines] ordn ON ordr.ordID = ordn.ordID
JOIN [inSight].[dbo].[OrderLineOptions] ordlo ON ordn.olnID = ordlo.olnID
JOIN [inSight].[dbo].[Features] ftr ON ordlo.ftrID = ftr.ftrID
JOIN [inSight].[dbo].[Options] op ON ftr.ftrID = op.ftrID
WHERE
    ordr.ordID = @OrderNumber AND
    ftr.ftrID = 1477 AND
    ordlo.optid = op.optID 
```

上面的变量 OrderNumber 是第一个查询的结果。

我不想使用光标，那么有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:19:06.287

你看过交叉申请吗？

这可能对您有用：

```
SELECT op.optCode
FROM [inSight].[dbo].[Orders] ordr
INNER JOIN [inSight].[dbo].[OrderLines] ordn ON ordr.ordID = ordn.ordID
JOIN [inSight].[dbo].[OrderLineOptions] ordlo ON ordn.olnID = ordlo.olnID
JOIN [inSight].[dbo].[Features] ftr ON ordlo.ftrID = ftr.ftrID
JOIN [inSight].[dbo].[Options] op ON ftr.ftrID = op.ftrID
CROSS APPLY (
SELECT TOP (10) ordr.ordID
FROM [inSight].[dbo].[Orders] ordr
INNER JOIN [inSight].[dbo].[OrderLines] ordn ON ordr.ordID = ordn.ordID
JOIN [inSight].[dbo].[OrderLineAttributeValues] atr ON ordn.olnID = atr.olnID
WHERE
    atr.atbID=190 AND
    atr.olnavValue=1 AND
    ordr.ordID = op.optCode
    ) ca
WHERE
    ftr.ftrID = 1477 AND
    ordlo.optid = op.optID 
```

# xml - 如果节点有某些子节点，则拆分它

> ID：13848239
> 
> 赞同：4
> 
> 时间：2012-12-12T20:42:38.000
> 
> 标签：xml, html, xslt, xslt-2.0

*更新：我想我现在已经回答了这个问题的大部分，除了`<pgBreak>`. `XSLT`您可以在本帖末尾的**EDIT**下查看我的更新和当前更新*

 **我昨天问了一个类似的问题，得到了很好的答案。但是，我后来意识到这并没有涵盖我的所有基础，所以我今天要问一个更详细的问题。

## XML 输入

```
<?xml version="1.0" encoding="UTF-8"?>    
<root>
<pgBreak pgId="i"/>
    <p xml:id="a-01">
        <highlight rend="italic">Bacon ipsum dolor sit amet</highlight> bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip 
        tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
        bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
        bacon filet mignon pork chop tail.
        <note.ref id="0001"><super>1</super></note.ref>
        <note id="0001">
            <p>
                You may need to consult a <highlight rend="italic">latin</highlight> butcher. Good Luck.
            </p>
        </note>   
        Pork loin <pgBreak pgId="01"/> ribeye bacon pastrami drumstick sirloin, shoulder pig jowl. Salami brisket rump ham, tail
        hamburger strip steak pig ham hock short ribs jerky shank beef spare ribs. Capicola short ribs swine   
        beef meatball jowl pork belly. Doner leberkas short ribs, flank chuck pancetta bresaola bacon ham 
        hock pork hamburger fatback.
    </p>
    <p xml:id="a-02">
        Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip 
        tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
        bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
        bacon filet mignon pork chop tail.
    </p>
    <p xml:id="a-03">
        Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip 
        tongue. 
            <quote>
                <p> 1.
                    Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
                    bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
                    bacon filet mignon pork chop tail.
                </p>
                <p> 2.
                    Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
                    bone. Sirloin <pgBreak pgId="02"/>turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
                    bacon filet mignon pork chop tail.
                </p>
                <p> 3.
                    Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
                    bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
                    bacon filet mignon pork chop tail.
                </p>
            </quote>
    </p>
</root> 
```

## HTML 输出

```
 <!DOCTYPE HTML>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <title>Test</title>
   </head>
   <body>
      <div id="pg-i">
        Page i
      </div>
      <p data-chunkid="a-01"> 
         <span class="highlight-italic">Bacon ipsum dolor sit amet</span>bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip 
         tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin
         pastrami t-
         bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef
         hamburger 
         bacon filet mignon pork chop tail.
         <span class="noteRef" id="0001"><sup>1</sup></span></p>
      <div id="note-0001" data-chunkid="a-01">
         <p>
            You may need to consult a <span class="highlight-italic">latin</span> butcher. Good Luck.

         </p>
      </div>
      <p data-chunkid="a-01">   
         Pork loin
      </p>
      <div id="pg-01">
          Page 01
       </div>
        <p data-chunkId="a-01">
         ribeye bacon pastrami drumstick sirloin, shoulder pig jowl. Salami brisket
         rump ham, tail
         hamburger strip steak pig ham hock short ribs jerky shank beef spare ribs. Capicola
         short ribs swine   
         beef meatball jowl pork belly. Doner leberkas short ribs, flank chuck pancetta bresaola
         bacon ham 
         hock pork hamburger fatback.
       </p>
      <p data-chunkid="a-02"><span class="highlight-italic">Bacon ipsum dolor sit</span> amet bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip 
         tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin
         pastrami t-
         bone. Sirloin turducken short ribs <span class="highlight-bold">t-bone</span> andouille strip steak pork loin corned beef hamburger 
         bacon filet mignon pork chop tail.

      </p>

      <p data-chunkid="a-03">
         Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs
         doner tri-tip 
         tongue. 

      </p>
      <blockquote data-chunkid="a-03">
        <p> 1.
            Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
            bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
            bacon filet mignon pork chop tail.
        </p>
         <p>2.
               Tri-tip ground round <span class="highlight-italic">short ribs</span> capicola meatloaf shank drumstick short loin pastrami t-
               bone. Sirloin 
          </p>
       </blockquote>
       <div id="pg-02">
         Page: 02
       </div>
       <blockquote data-chunkid="a-03"> 
         </p>
               turducken short ribs t-bone andouille strip steak pork loin corned beef
               hamburger bacon filet mignon pork chop tail.

         </p>
        <p> 3.
            Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
            bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
            bacon filet mignon pork chop tail.
        </p>

      </blockquote>
      <p data-chunkid="a-03">
         Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs
         doner tri-tip 
         tongue. 

      </p>
   </body>
</html> 
```

我想将 xml 转换为 html5，但将每个块 (xml:id) 保持在一起。我想避免 divits（过度使用 div）所以将每个 p 包装在一个 div 中是不可行的，但我也试图避免无效的 HTML。例如，很容易获取父 p (xml:id=a-01) 并将其包裹在其后代周围，但是，一个块级别`<div>`和另一个`<p>`将是无效的，并且浏览器将在文本结束后解释所有内容作为孤立的文本。

[我从昨天的问题](https://stackoverflow.com/questions/13823688/split-an-element-into-two-or-more-elements-depending-on-its-children)中尝试了各种修改过`XSLT`的 s 。然而，我发现自己处于一个有点陌生的领域。我还将受益于对解决方案的简明解释，这样我就可以开始更好地理解 XSLT，因为看起来我将在接下来的几个月里花更多的时间来研究它。我可能应该拿起迈克尔凯的书或什么的。

**编辑：我正在使用的 XSLT 的当前版本**

*注意：我还没有尝试分页符。此外，我无法`<meta>`关闭标签....oxygen 14 一直抱怨这一点。*

```
<xsl:template match="/">
    <html>
        <body>
            <xsl:apply-templates/>
        </body>
    </html>
</xsl:template>

<xsl:template match="p[not((parent::note,.//p, .//div))]">
    <p data-chunkID="{@xml:id}">
        <xsl:apply-templates/>
    </p>
</xsl:template>

<xsl:template match="p[.//p, .//div]">
    <xsl:for-each-group select="node()" group-adjacent="boolean((self::text(), self::note.ref,self::highlight))">
        <xsl:choose>
            <xsl:when test="current-grouping-key()">
                <p data-chunkID="{../@xml:id}">
                    <xsl:apply-templates select="current-group()"/>
                </p>
            </xsl:when>
            <xsl:when test="self::p">
                <p>
                    <xsl:apply-templates/>
                </p>
            </xsl:when>
            <xsl:otherwise>
                <xsl:apply-templates select="current-group()"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:for-each-group>
</xsl:template>

<xsl:template match="note.ref">
    <span class="noteRef" id="{@id}">
        <xsl:apply-templates/>
    </span>
</xsl:template>

<xsl:template match="super">
    <sup>
        <xsl:apply-templates/>
    </sup>
</xsl:template>

<xsl:template match="note">
    <div id="note-{@id}" data-chunkID="{../@xml:id}">
        <p>
        <xsl:apply-templates/>
        </p>
    </div>
</xsl:template>

<xsl:template match="quote">
    <blockquote data-chunkID="{../@xml:id}">
        <p>
        <xsl:apply-templates/>
        </p>
    </blockquote>
</xsl:template>

<xsl:template match="highlight">
    <xsl:variable name="class" select="concat(name(.),'-',string(@rend))"/>
    <xsl:choose>
        <xsl:when test="@rend[.= 'italic']">
            <span class="{$class}">
                <xsl:apply-templates/>
            </span>
        </xsl:when>
        <xsl:when test="@rend[.= 'bold']">
            <span class="{$class}">
                <xsl:apply-templates/>
            </span>
        </xsl:when>
        <xsl:otherwise>
            <span class="{$class}">
                <xsl:apply-templates/>
            </span>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:06:39.300

看起来您的输入与您的输出有点不一致。（这是预期的输出，还是您现在得到的输出）？块 a-02 和 a-03`<highlight>`在输入中没有元素，但输出中有`<span class="highlight...">`元素。此外，块 a-03 在块引用之后有重复的文本。

我相信我已经制定了一个可行的解决方案，可以完成您示例中的所有操作。你能试试这个吗？

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Test</title>
      </head>
      <body>
        <xsl:apply-templates/>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="p | div">
    <xsl:variable name="breaks" select="note | pgBreak | quote" />
    <xsl:variable name="firstNonBreak" select="node()[count(. | $breaks) != count($breaks)][1]" />
    <xsl:variable name="nonBreaksAfterBreak"
                  select="$breaks/following-sibling::node()[1][count(. | $breaks) != count($breaks)]" />

    <xsl:apply-templates select="$breaks | $firstNonBreak | $nonBreaksAfterBreak" mode="sectChild" />
  </xsl:template>

  <!-- Template to output the chunk id attribute of a particular hierarchy -->
  <xsl:template name="ChunkId">
    <xsl:variable name="id" select="ancestor::*[../self::root]/@xml:id" />
    <xsl:if test="$id">
      <xsl:attribute name="data-chunkid">
        <xsl:value-of select="$id"/>
      </xsl:attribute>
    </xsl:if>
  </xsl:template>

  <!-- Splitting types - notes, page breaks, quotes -->
  <xsl:template match="pgBreak" mode="sectChild">
    <div id="pg-{@pgId}">
      <xsl:value-of select="concat('Page ', @pgId)"/>
    </div>
  </xsl:template>

  <xsl:template match="quote | note" mode="sectChild">
    <xsl:apply-templates />
  </xsl:template>

  <!-- Receives the first node of each block of content outside of the splitting types
       and passes processing onto itself and siblings within its block-->
  <xsl:template match="text() | highlight | note.ref | super" mode="sectChild">

    <xsl:variable name="content">
      <xsl:apply-templates select="." mode="buildContent" />
    </xsl:variable>

    <xsl:if test="normalize-space($content)">
      <xsl:call-template name="Nest">
        <xsl:with-param name="hierarchy" select="ancestor::*[not(self::root)]" />
        <xsl:with-param name="content" select="$content" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <!-- Recursive template to output nodes from the top level down to content -->
  <xsl:template name="Nest">
    <xsl:param name="topLevel" select="true()"/>
    <xsl:param name="hierarchy" />
    <xsl:param name="content" />

    <xsl:variable name="top" select="$hierarchy[1]" />
    <xsl:variable name="remainder" select="$hierarchy[position() > 1]" />

    <!-- If there's a quote or note yet to come, don't output tags until we get there -->
    <xsl:variable name="skipTags" select="boolean($remainder[self::quote or self::note])" />
    <!-- Recursive output is captured in a variable, to be output later in this template -->
    <xsl:variable name="inside">
      <xsl:if test="$hierarchy">
        <xsl:call-template name="Nest">
          <xsl:with-param name="topLevel" select="$topLevel and $skipTags" />
          <xsl:with-param name="hierarchy" select="$remainder" />
          <xsl:with-param name="content" select="$content" />
        </xsl:call-template>
      </xsl:if>
    </xsl:variable>

    <xsl:choose>
      <xsl:when test="not($hierarchy)">
        <xsl:copy-of select="$content" />
      </xsl:when>
      <xsl:when test="$top/self::quote">
        <blockquote>
          <xsl:call-template name="ChunkId" />
          <xsl:copy-of select="$inside"/>
        </blockquote>
      </xsl:when>
      <xsl:when test="$top/self::note">
        <div id="note-{$top/@id}">
          <xsl:call-template name="ChunkId" />
          <xsl:copy-of select="$inside"/>
        </div>
      </xsl:when>
      <xsl:when test="not($skipTags)">
        <xsl:element name="{name($top)}">
          <xsl:if test="$topLevel">
            <xsl:call-template name="ChunkId" />
          </xsl:if>
          <xsl:copy-of select="$inside"/>
        </xsl:element>
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy-of select="$inside"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="node()" mode="buildContent">
    <xsl:if test="not(self::note or self::quote or self::pgBreak)">
      <!-- output this node -->
      <xsl:apply-templates select="self::node()[normalize-space(.)]" mode="contentOutput" />
      <!-- pass processing onto next sibling -->
      <xsl:apply-templates select="following-sibling::node()[1]" mode="buildContent" />
    </xsl:if>
  </xsl:template>

  <!-- Bottom level content - text, note refs, superscript, highlight-->
  <xsl:template match="text()" mode="contentOutput">
    <xsl:copy-of select="."/>
  </xsl:template>

  <xsl:template match="note.ref" mode="contentOutput">
    <span class="noteRef" id="{@id}">
      <xsl:apply-templates mode="contentOutput"/>
    </span>
  </xsl:template>

  <xsl:template match="super" mode="contentOutput">
    <sup>
      <xsl:apply-templates mode="contentOutput"/>
    </sup>
  </xsl:template>

  <xsl:template match="highlight" mode="contentOutput">
    <xsl:variable name="class" select="concat(name(.),'-',string(@rend))"/>
    <span class="{$class}">
      <xsl:apply-templates mode="contentOutput"/>
    </span>
  </xsl:template>
</xsl:stylesheet> 
```

我相信未封闭的元标记是使用`method="html"`. 您可能需要使用`method="xml"`来获取封闭的元标记。使用`method="html"`，上述转换会从您的示例输入中生成以下输出：

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Test</title>
  </head>
  <body>
  <p data-chunkid="a-01"><span class="highlight-italic">Bacon ipsum dolor sit amet</span> bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip
    tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
    bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger
    bacon filet mignon pork chop tail.
    <span class="noteRef" id="0001">
      <sup>1</sup>
    </span></p>
      <div id="note-0001" data-chunkid="a-01">
      <p>
        You may need to consult a <span class="highlight-italic">latin</span> butcher. Good Luck.
      </p>
    </div>
    <p data-chunkid="a-01">
    Pork loin </p>
    <div id="pg-01">Page 01</div>
    <p data-chunkid="a-01"> ribeye bacon pastrami drumstick sirloin, shoulder pig jowl. Salami brisket rump ham, tail
    hamburger strip steak pig ham hock short ribs jerky shank beef spare ribs. Capicola short ribs swine
    beef meatball jowl pork belly. Doner leberkas short ribs, flank chuck pancetta bresaola bacon ham
    hock pork hamburger fatback.
  </p>
  <p data-chunkid="a-02">
    Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip
    tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
    bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger
    bacon filet mignon pork chop tail.
  </p>
  <p data-chunkid="a-03">
    Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip
    tongue.
    </p>
      <blockquote data-chunkid="a-03">
      <p>
        Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
        bone. Sirloin </p>
    </blockquote>
    <div id="pg-02">Page 02</div>
    <blockquote data-chunkid="a-03">
      <p>turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger
        bacon filet mignon pork chop tail.
      </p>
    </blockquote>

</body>
</html> 
```

通过将方法更改为“xml”并手动将`meta`元素添加到变换中，可以获得相同的结果，但具有以下内容`<head>`

```
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test</title>
  </head> 
```**

# java - AWS DynamoDB 扫描设置属性

> ID：13848243
> 
> 赞同：1
> 
> 时间：2012-12-12T20:43:03.890
> 
> 标签：java, amazon-web-services, amazon-dynamodb

扫描如何与设置属性类型（NS 或 SS）一起使用。我喜欢为检索 Set 提供一些条件。例如：在表中我有

```
{Item1: Attr1{NS : 1,2,3,4,5}}
{Item2: Attr1{NS : 6,7,8}}
{item3: Attr1{NS : 7,10}} 
```

我想通过给出一些扫描条件来接受`Item2`and 。`Item3`谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:47:31.573

使用`CONTAINS`或`NOT_CONTAINS`作为`ComparisonOperator`（`ScanFilter`更多信息：http: [//docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_Scan.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_Scan.html)）

例如：

```
{
  "TableName":"MyTable",
  "ScanFilter": {
    "Attr1": {
      "AttributeValueList": [{"N":"7"}],
      "ComparisonOperator": "CONTAINS"
    }
  }
} 
```

这将返回`Item2`，`Item3`因为它们都包含`7`.

# objective-c - 简单的 iOS 代码行解释

> ID：13848244
> 
> 赞同：0
> 
> 时间：2012-12-12T20:43:04.320
> 
> 标签：objective-c, ios

我正在做“你的第二个应用程序”教程，它让我添加下面的代码行，它是 masterBirdSightingList 属性的设置器。我只是有一个基本的问题：

这条线和我合成它一样吗？如果不是，是什么让它与众不同？

```
- (void)setMasterBirdSightingList:(NSMutableArray *)newList
{
     if (_masterBirdSightingList != newList) {
            _masterBirdSightingList = [newList mutableCopy];
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:51:04.210

如果属性定义为：

```
@property (nonatomic, copy) NSMutableArray *masterBirdSightingList; 
```

那么实现此方法与简单地使用`@synthensize masterBirdSightingList;`.

使用默认的综合设置器为可变容器类型定义具有`copy`语义的属性实际上并不能按预期工作。

如果没有显式方法，您实际上最终会得到引用数组不可变副本的属性。

通过使用您发布的代码，而不是依赖于综合方法，您可以获得正确且预期的行为，即拥有原始数组的可变副本。

另一种看待这个问题的方法是调用`copy`an`NSMutableArray`返回 an `NSArray`，而不是 an `NSMutableArray`。这就是为什么默认的综合属性设置器不能按预期工作的原因（在处理可变容器属性时）。所以你必须自己实现setter并调用`mutableCopy`参数。

# sudo - Rundeck 中 sudo - su anotheruser 后执行远程命令

> ID：13848245
> 
> 赞同：1
> 
> 时间：2012-12-12T20:43:08.777
> 
> 标签：sudo, rundeck

我是 Rundeck 的新手，对它完全感到惊讶，我正在尝试执行一项工作，我的场景如下详述：

*   Rundeck 在节点服务器（rundeck 服务器）和节点目标（远程 Solaris 主机）之间为用户“master”配置了 ssh 无密码身份验证。

*   在节点 Target 中，我想`/app/acme/stopApp.sh`使用 user执行脚本`appmanager`。

*   通常，当我需要运行上面的脚本时，我会手动继续：

`ssh master@server`

`sudo su - appmanager`

或者干脆

```
ssh -t master@server
sudo su - appmanager 
```

无需密码即可运行并最终运行（作为 appmanager）

`/app/acme/stopApp.sh`

但我不知道如何使用 Rundeck 重现这些步骤。我在以前的一些消息中读到，对于每个工作行 rundeck 都使用新的 ssh 连接，所以下面的工作流总是失败，因为我收到以下消息：

sudo：不存在 tty，也没有指定 askpass 程序远程命令失败，退出状态为 1

有人可以帮我解决这个问题吗？

如果没有这个功能，我就无法在我的部门引入一点 DevOps。:-D

我阅读了用户指南和管理指南，但在这个论坛中也找不到一个简单的示例来遵循。

我会感谢你的帮助。

Rundeck 版本是 1.4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:53:37.650

```
sudo su - appmanager 
```

尝试打开一个登录 shell，因此需要一个真正的终端。删除“-”以避免这种行为。最后，您的命令将如下所示

```
sudo su -c /app/acme/stopApp.sh appmanager 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T23:28:26.590

尽管您的 ssh 登录无需密码即可使用，但您还需要在 Target 服务器上配置 sudo 以便它不需要密码。

由于您只需要*主*用户能够以*appmanager*用户身份运行命令，因此您可以通过 sudo 完全处理这个问题。在`/etc/sudoers`目标上，添加：

```
master  ALL=(appmanager) NOPASSWD: ALL 
```

然后你的 ssh 命令变成：

```
ssh -t master@server 'sudo -u appmanager /app/acme/stopApp.sh' 
```

如果您需要通常由 appmanager 登录 shell 处理的环境设置，则需要显式获取该设置。（而且我认为部署环境设置不应仅限于登录 shell。）

有关如何让一个用户以另一个用户身份运行命令的更多详细信息，请参见[ServerFault 答案](https://serverfault.com/questions/17814/how-can-i-allow-one-user-to-su-to-another-without-allowing-root-access)和更密集的[sudoers 手册页](http://linux.die.net/man/5/sudoers)。

# ios - iOS Facebook SDK：Apprequests 对话框不显示

> ID：13848247
> 
> 赞同：0
> 
> 时间：2012-12-12T20:43:13.897
> 
> 标签：ios, facebook, sdk

我正在尝试使用教程中提供的代码[here](https://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/)

```
 AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
NSMutableDictionary* params = 
    [NSMutableDictionary dictionaryWithObjectsAndKeys: [NSString stringWithFormat:@"I just smashed %d friends! Can you beat it?", 3], @"message",
    nil];
    [appDelegate.facebook dialog:@"apprequests" andParams:params andDelegate:nil]; 
```

但是当执行到 dialog:andParams:andDelegate 方法调用时，什么也没有发生。有一瞬间，我可以看到一个进度指示器在旋转，但随后它消失了，并且没有显示任何 apprequests 对话框。没有报告错误，但没有任何反应。我也尝试定义一个委托，但它的回调方法都没有被调用。我已通过身份验证，并且当我尝试调用此对话框时，facebook 会话有效。有人遇到过这样的事情吗？登录时是否需要任何特殊权限才能看到此对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:51:13.470

我想到了。我正在从 UIAlertView 事件处理程序调用对话框，因此它可能不在导致错误的 UI 线程上。如果我从 IBAction 处理程序调用上面的代码，一切正常。

# ruby-on-rails - 用虚拟属性干燥这个模型

> ID：13848252
> 
> 赞同：0
> 
> 时间：2012-12-12T20:43:30.340
> 
> 标签：ruby-on-rails

在我的表单中，我有一个虚拟属性，允许我接受混合数字（例如 38 1/2）并将它们转换为小数。我也有一些验证（我不确定我是否正确处理了这个），如果发生爆炸会引发错误。

```
class Client < ActiveRecord::Base
  attr_accessible :mixed_chest

  attr_writer :mixed_chest

  before_save :save_mixed_chest

  validate :check_mixed_chest

  def mixed_chest
    @mixed_chest || chest
  end

  def save_mixed_chest
    if @mixed_chest.present?
      self.chest = mixed_to_decimal(@mixed_chest)
    else
       self.chest = ""
    end
  end

  def check_mixed_chest
    if @mixed_chest.present? && mixed_to_decimal(@mixed_chest).nil?
      errors.add :mixed_chest, "Invalid format. Try 38.5 or 38 1/2"
    end
  rescue ArgumentError
    errors.add :mixed_chest, "Invalid format. Try 38.5 or 38 1/2"
  end

  private

  def mixed_to_decimal(value)
    value.split.map{|r| Rational(r)}.inject(:+).to_d
  end

end 
```

但是，我想添加另一列wingspan，它具有 virtual 属性`:mixed_wingspan`，但我不知道如何抽象它以重用它——我将对几十个输入使用相同的转换/验证。

理想情况下，我想使用类似的东西`accept_mixed :chest, :wingspan ...`，它会处理自定义的 getter、setter、验证等。

**编辑：**

我正在尝试使用元编程重新创建功能，但我在几个地方遇到了困难：

```
def self.mixed_number(*attributes)
  attributes.each do |attribute|
    define_method("mixed_#{attribute}") do
      "@mixed_#{attribute}" || attribute
    end
  end
end

mixed_number :chest 
```

这会将胸部设置为“@mixed_chest”！我正在尝试`@mixed_chest`像上面那样获取实例变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:16:55.380

您将需要一个[自定义验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-validators)

就像是

```
class MixedNumberValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    if value.present? && MixedNumber.new(value).to_d.nil?
      record.errors[attribute] << (options[:message] || "Invalid format. Try 38.5 or 38 1/2")
    end
  end
end 
```

然后你可以做

```
validates :chest, mixed_number: true 
```

请注意，我会将这些`mixed_to_decimal`东西提取到一个单独的类中

```
class MixedNumber
  def initialize(value)
    @value = value
  end

  def to_s
    @value
  end

  def to_d
    return nil if @value.blank?
    @value.split.map{|r| Rational(r)}.inject(:+).to_d
  rescue ArgumentError
    nil
  end
end 
```

并且此定义允许您删除方法`if`中的语句`save_chest`。

现在您只需要进行一些元编程即可让一切顺利进行，正如我[在回答](https://stackoverflow.com/a/13811107/725792)您的另一个问题时所建议的那样。你基本上会想要类似的东西

```
def self.mixed_number(*attributes)
  attributes.each do |attribute|
    define_method("mixed_#{attribute}") do
      instance_variable_get("@mixed_#{attribute}") || send(attribute)
    end

    attr_writer "mixed_#{attribute}"

    define_method("save_mixed_#{attribute}") do
      # exercise for the reader ;)
    end

    before_save "save_#{attribute}"
    validates "mixed_#{attribute}", mixed_number: true
  end
end

mixed_number :chest, :waist, :etc 
```

# java - 自定义 Listview 人口项目未显示

> ID：13848253
> 
> 赞同：0
> 
> 时间：2012-12-12T20:43:31.763
> 
> 标签：java, android, listview, android-4.2-jelly-bean

我有一个列表视图，我想显示自定义数据，如生肖图像。十二生肖标题。十二生肖内容和几个按钮。问题是数据没有显示我调试每一行并且项目被正确地添加到arraylist然后到适配器但是listview在屏幕上显示为空。

我正在使用 android google api17 jelly beans 版本

**我的主要 XML**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/tools"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    app:context=".AdminPage.Hilariouscope" >

    <TableLayout
        android:id="@+id/tableRow_Main"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow_tittle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <RelativeLayout
                android:id="@+id/Relativelayout_watch"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" >

                <Button
                    android:id="@+id/btn_topic_horro_Back"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:onClick="GoToHome"
                    android:text="@string/RegisterBack" />

                <TextView
                    android:id="@+id/txt_title_screen"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/btn_topic_horro_Back"
                    android:layout_alignBottom="@+id/btn_topic_horro_Back"
                    android:layout_centerHorizontal="true"
                    android:text="@string/title_activity_hilariouscope"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </RelativeLayout>

        </TableRow>

        <ListView
            android:id="@+id/horror_listview"
            android:layout_width="wrap_content"
            android:layout_height="371dp" >
        </ListView>

    </TableLayout>

</ScrollView> 
```

**我的 ListRow XML**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/txt_zodic_Tittle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ab2130"
    android:textSize="32sp" />

<TextView
    android:id="@+id/txt_zodic_date"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/txt_zodic_Tittle"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TableRow
    android:id="@+id/tableRow_content"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/txt_zodic_date" >

    <TextView
        android:id="@+id/txt_main_content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight=".2"
        android:text="@string/Main_laugh"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="22sp"
        android:textStyle="normal" />

    <ImageView
        android:id="@+id/zodic_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:adjustViewBounds="true"
        android:cropToPadding="true"
        android:scaleType="fitCenter"
        android:src="@drawable/lighthouse" />

</TableRow>

<TableRow
    android:id="@+id/tableRow_footer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true" >

    <RelativeLayout
        android:id="@+id/RelativeLayout03"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="#bababa" >

        <Button
            android:id="@+id/Btn_share_fun"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Share"
            app:ignore="HardcodedText" />

        <ImageButton
            android:id="@+id/btn_facebook_fun"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/btn_twitter_fun"
            android:src="@drawable/pic2"
            app:ignore="ContentDescription" />

        <ImageButton
            android:id="@+id/btn_twitter_fun"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@+id/btn_facebook_fun"
            android:src="@drawable/pic3"
            app:ignore="ContentDescription" />
    </RelativeLayout>
</TableRow> 
```

**我的 Zodic 自定义类**

```
public class Hilariouscope_Items {
private boolean checked;
private int zodicImage;
private String ZodicDate, ZodicTitle, ZodicContent;

public Hilariouscope_Items(String Title, String Date, String Content) {
    this.ZodicTitle = Title;
    // this.zodicImage = ZodicImage;
    this.ZodicDate = Date;
    this.ZodicContent = Content;
}

public void setChecked(boolean checked) {
    this.checked = checked;
}

public boolean isChecked() {
    return checked;
}

public void setTitleName(String name) {
    this.ZodicTitle = name;
}

public void setZodicDate(String date) {
    this.ZodicDate = date;
}

public void setZodicContent(String Content_Text) {
    this.ZodicContent = Content_Text;
}

public String getTitle() {
    return ZodicTitle;
}

public String getZodicDate() {
    return ZodicDate;
}

public String getZodicContent() {
    return ZodicContent;
}

public void toggle() {
    this.checked = !this.checked;
}

public int getZodicImage() {
    return zodicImage;
} 
```

**我的 ZodicAdapter 类**

```
import java.util.List;
import com.example.laysapp.R;
import android.content.Context;
import android.graphics.Color;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

 public class horrorItemAdapter extends BaseAdapter {

private final List<Hilariouscope_Items> items;

public horrorItemAdapter(final Context context, final int itemResId,
        final List<Hilariouscope_Items> items) {
    this.items = items;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final Hilariouscope_Items item = this.items.get(position);
    View itemView = null;

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) parent.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        itemView = inflater.inflate(R.layout.horror_list_row, null);
    } else {
        itemView = convertView;
    }

    // Set the text of the item
    TextView txtName = (TextView) itemView
            .findViewById(R.id.txt_zodic_Tittle);
    txtName.setText(item.getTitle());

    // Set the text of the item
    TextView txtDate = (TextView) itemView
            .findViewById(R.id.txt_zodic_date);
    txtDate.setText(item.getZodicDate());

    // Set the text of the item
    TextView txtContent = (TextView) itemView
            .findViewById(R.id.txt_main_content);
    txtContent.setText(item.getZodicContent());

    // Set the check-icon
    ImageView imgView = (ImageView) itemView.findViewById(R.id.zodic_image);

    imgView.setImageResource(item.getZodicImage());
    /*
     * imgViewChecked.setImageResource(item.isChecked() ? R.drawable.checked
     * : R.drawable.unchecked);
     */
    return itemView;
}

 } 
```

**我的主要课程**

```
 public class Hilariouscope extends Activity {

private ListView mainListView;
private horrorItemAdapter itemAdapter;
private ArrayAdapter<Hilariouscope_Items> listAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_hilariouscope);

    ArrayList<Hilariouscope_Items> items = new ArrayList<Hilariouscope_Items>();
    /*
     * items.add(new Hilariouscope_Items("AQUARIUS", R.drawable.hydrangeas,
     * "MAR 21 - APR 19", "sample text Aquarius")); items.add(new
     * Hilariouscope_Items("Aries", R.drawable.jellyfish, "MAR 21 – APR 20",
     * "sample text Aries")); items.add(new Hilariouscope_Items("Taurus",
     * R.drawable.penguins, "APR 21 – MAY 21", "sample text Taurus"));
     * items.add(new Hilariouscope_Items("Gemini", R.drawable.lighthouse,
     * "MAY 22 – JUN 21", "sample text Gemini"));
     */

    items.add(new Hilariouscope_Items("AQUARIUS", "MAR 21 - APR 19",
            "sample text Aquarius"));
    items.add(new Hilariouscope_Items("Aries", "MAR 21 – APR 20",
            "sample text Aries"));
    items.add(new Hilariouscope_Items("Taurus", "APR 21 – MAY 21",
            "sample text Taurus"));
    items.add(new Hilariouscope_Items("Gemini", "MAY 22 – JUN 21",
            "sample text Gemini"));

    itemAdapter = new horrorItemAdapter(getApplicationContext(),
            R.layout.horror_list_row, items);

    mainListView = (ListView) findViewById(R.id.horror_listview);
    // listAdapter = new ArrayAdapter<Hilariouscope_Items>(this,
    // R.layout.horror_list_row, items);
    mainListView.setAdapter(itemAdapter);
    /*
     * View header = (View) getLayoutInflater().inflate(
     * R.layout.horror_list_row, null);
     * 
     * lv.addHeaderView(header);
     */

    mainListView.setTextFilterEnabled(true);
    mainListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> adapter, View v, int pos,
                long id) {

            // Toggle the state of the item and refresh the view
            /*
             * Hilariouscope_Items item = (Hilariouscope_Items) mainListView
             * .getItemAtPosition(pos);
             * Toast.makeText(getApplicationContext(),
             * item.getTitle().toString(), Toast.LENGTH_SHORT).show(); //
             * itemAdapter.notifyDataSetChanged();
             */
        }

    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_hilariouscope, menu);
    return true;
} 
```

等待你的答复

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:50:33.567

在您的 ZodicAdapter 类 getCount() 中，您返回为 0。

把它当作

```
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return items.size();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:48:55.247

您正在返回`0`，`getCount()`因此列表认为适配器中没有项目。

# c# - 循环属性参考

> ID：13848254
> 
> 赞同：0
> 
> 时间：2012-12-12T20:43:39.403
> 
> 标签：c#, wpf, xaml

我正在尝试在 MS Paint 中复制颜色选择器对话框的功能。我有一个具有 3 个属性的对话框的 ViewModel。

*   公共颜色 SelectedColor
    *   这是选定的颜色
    *   我将它绑定到显示当前选定颜色的 Border 元素的背景
*   公共双选择器左
    *   自定义颜色区域中选择器的左侧位置
    *   我将它绑定到选择器的左值。选择器是 Canvas 中的一个元素
    *   画布的 x 轴是色调
*   公共双选择器顶部
    *   自定义颜色区域中选择器的顶部位置
    *   我将它绑定到选择器的最高值。选择器是 Canvas 中的一个元素
    *   画布的y轴是饱和度

问题是它们都是相互关联的。当我从预定义的颜色区域中选择一种颜色时，我需要更新 SelectedColor，这又会更新 SelectorLeft 和 SelectorTop，以便自定义颜色区域中的选择器位于正确的位置。此外，当我在自定义颜色区域中移动选择器时，我需要更新 SelectedLeft 和 SelectedTop，它们都应该更新 SelectedColor。这些关系导致堆栈溢出。

（哈！StackOverflow 上列出的堆栈溢出问题）

我可以采取另一种方法来解决这个问题，消除一个属性对另一个属性的依赖。或者也许定义不同的属性来绑定？

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:53:41.657

一些想法：

*   将两个属性（左、上）设为只读，并将所有输入转换为第三种形式（例如，新的 SelectedColor）以设置新值。

*   将所有属性设为只读，而是使用 SetXXX 方法设置新值（这会导致 3 个属性中的一个或多个发生更改）。我总是建议让属性尽可能简单，副作用最小——设置一个属性永远不会导致类中的其他属性值发生变化。因此，SetXXX 方法使副作用变得清晰，并消除了属性本身之间的循环引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:41:36.017

如果值与当前值相同，则不要引发属性更改事件。这应该防止循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:53:50.860

制作两个事件方法：

UpdateSelectColor - 选择预定义时的 MouseClick 事件方法

1.  更新 SelectedColor 值
2.  更新 SelectorLeft 值
3.  更新 SelectorTop 值

MoveSelector - 当你移动选择器时

1.  更新 SelectedColor 值
2.  更新 SelectorLeft 值
3.  更新 SelectorTop 值

# javascript - 获取jquery生成的多个输入字段的值

> ID：13848255
> 
> 赞同：0
> 
> 时间：2012-12-12T20:43:42.267
> 
> 标签：javascript, jquery

我正忙着制作一个可克隆的表格。

我目前卡住了，我有 13 个输入字段，其中一个值为 id，我可以克隆它并将组的类更新为“group1”、“group2”等我需要获取第一组输入的值字段然后是第二个等。

这是 js 小提琴：http: [//jsfiddle.net/dawidvdh/BLdDE/](http://jsfiddle.net/dawidvdh/BLdDE/)

这是jQuery：

```
//Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependants = "dependant"+d_counter++;
var group;
var current_group = jQuery(document.activeElement);
//Clone Tracking
//General Variables

//General Variables
//Generate variables
var id_fields       =   [0,1,2,3,4,5,6,7,8,9,10,12,13];
var passport_fields =   [0,1,2,3,4,5,6,7,8,9,10,12,13];
var cell_fields     =   [0,1,2,3,4,5,6,7,8,9,10];

var id_input = "<input class='id' id="+'"'+"group"+g_counter+++'"'+" "+" maxlength='1' />";
//Generate variables

jQuery(document).ready(function(e) {
//populate jquery generated fields
jQuery(id_fields).each(function() {
    jQuery(id_input).appendTo('#id_field');
});
//populate jquery generated fields
//Cloning Function
jQuery('#clone').click(function(){
    clone_dependant();
});

function clone_dependant(){
    g_counter++;
    var clonedObj=jQuery('#id_field').clone().insertAfter("#id_field");
        clonedObj.find('.id').each(function(){
             $(this).prop('id', 'group'+g_counter).val(''); // chain the commands
    });
};
//Cloning Function
//Validation
function validate_gen(){};
function validate_Id(current_group){
    console.log(current_group);
};
function validate_Pass(){};
function validate_Email(){};
function validate_Cell(){};
//Validation
//Multiple Inputs function
$(document).on('keydown', 'input.id', function(e){
    if(e.keyCode == 8){
        $(this).val('');
        $(this).prev().val('');
        $(this).prev().focus();
         //Validate(current);
    }
});  

$(document).on('keyup', 'input.id', function(){
    var current_group = this.id;
    if (this.value.match(/\d+/)) {
        var $this = $(this);
        if ($this.next('input').length) {
          $this.next().focus();
        } else {
          validate_Id(current_group);
        }  
    }
});
//Multiple Inputs function

}); 
```

和html

```
<div id="id_field"></div>
<button id="clone">clone</button> 
```

非常感谢任何帮助，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:23:25.883

**您的代码**的问题是您对所有`input's in a group`. 这会在提取 then 值时搞砸。

如果您完全避免并为将它们作为一个整体**包裹**`id's for the input's`起来的 div 提供唯一的 id会更好。**`(maybe group1 , group2 ....)`**

 **这种方式应该有帮助..

```
//Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependants = "dependant" + d_counter++;
var group;
var current_group = jQuery(document.activeElement);
//Clone Tracking
//General Variables
var input_groups = ["group-1"];
//General Variables
//Generate variables
var id_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var passport_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var cell_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

var id_input = "<input class='id' maxlength='1' />";
//Generate variables
jQuery(document).ready(function(e) {
    //populate jquery generated fields
    jQuery(id_fields).each(function() {
        jQuery(id_input).appendTo('#group-1');
    });
    //populate jquery generated fields
    //Cloning Function
    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        var clonedObj = jQuery('#group-1')
                              .clone().insertAfter("#group-" + g_counter);
        g_counter++;
        var newDivId = 'group-'+ g_counter;
        clonedObj.prop('id' ,newDivId ).find('input').each(function() {
            this.value = ''; // chain the commands
        });
        input_groups.push(newDivId);
    };
    //Cloning Function
    //Validation

    function validate_gen() {};

    function validate_Id(current_group) {
       // console.log(current_group);
    };

    function validate_Pass() {};

    function validate_Email() {};

    function validate_Cell() {};
    //Validation
    //Multiple Inputs function
    $(document).on('keydown', 'input.id', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
            //Validate(current);
        }
    });

    $(document).on('keyup', 'input.id', function() {
        var current_group = this.id;
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input').length) {
                $this.next().focus();
            } else {
                validate_Id(current_group);
            }
        }
    });

    $('#getvalues').on('click', function(){
        $.each(input_groups , function(i){
            var id = input_groups[i];
            var values = $.map($('#'+id + ' input') , function(e,i){
                return $(e).val();
            }).join(' :: ');

            console.log('The values inside ' + id + ' : are ' + values);
        });            
    });
    //Multiple Inputs function
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/BLdDE/1/)**

**更新**

如果是这种情况，我会`clone`使用 d`ependant div`本身，而不是专门为所有 div 做它。

其次，您不需要遍历每个组来设置相同的值..

尝试这个

```
function clone_dependant() {
        // Store the value of the previous Id to insert the cloned div..
        var oldId = g_counter;
        g_counter++;

        // Clone the Dependant Div and set a new id
        var $clonedDiv = jQuery('#dependant-1').clone(false)
                                           .attr('id', 'dependant-'+g_counter);
        var cell_newDiv = 'cell-group-'+ g_counter;
        var age_newDiv = 'age-group-'+ g_counter;
        var pass_newDiv = 'pass-group-'+ g_counter;
        var id_newDiv = 'group-'+ g_counter;

        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#group-1').attr('id',"#group-" + g_counter );
        $clonedDiv.find('#age-group-1').attr('id',"#age-group-" + g_counter );
        $clonedDiv.find('#cell-group-1').attr('id',"#cell-group-" + g_counter );
        $clonedDiv.find('#pass-group-1').attr('id',"#pass-group-" + g_counter );

        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input').val('');

        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);

        cell_input_groups.push(cell_newDiv);
        age_input_groups.push(age_newDiv);
        pass_input_groups.push(pass_newDiv);
        input_groups.push(id_newDiv);
    }; 
```

**[更新的小提琴](http://jsfiddle.net/sushanth009/YhNBA/1/)****

# php - 有没有办法不在 PHP 匿名函数中捕获 $this ？

> ID：13848256
> 
> 赞同：7
> 
> 时间：2012-12-12T20:43:43.943
> 
> 标签：php, closures, this, anonymous-function

我有一个看起来像这样的 PHP 代码：

```
class A {
    public function __construct() {
        $this->b = new B(function($x) { return $x + 1; });
    }
};

class B {
    public function __construct($dataProcessingFunction) {
        $this->dataProcessingFunction = $dataProcessingFunction;
    }

    public function processData($data) {
        $f = $this->dataProcessingFunction;
        return $f($data);
    }
}; 
```

但是有一个问题：我绝对需要在 A 的析构函数之前调用 B 的析构函数。如您所见，这似乎是合理的。B对象不需要任何A，所以应该没有问题。

但是从 PHP 5.4.0 开始，闭包似乎会自动隐式捕获 $this。因此，我传递给 B 并由 B 存储的 lambda 函数包含对 A 的引用。

这意味着 A 包含指向 B 的指针，而 B 包含指向 A 的指针（通过闭包）。在这种情况下，PHP 文档说析构函数仅在垃圾收集时以随机顺序调用。猜猜看：B 的析构函数总是在 A 之前调用。

有没有办法以优雅的方式解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:07:05.307

感谢Explosion Pills，我在[`Closure`](http://php.net/manual/fr/class.closure.php)课堂上找到了解决方案。

实际上，您可以更改`$this`闭包内的存储，如下所示：

```
$cb = function($x) { return $x + 1; };
$cb = $cb->bindTo(null);

// now $cb doesn't contain a pointer to $this anymore 
```

请注意，您不能这样做，否则会出现语法错误：

```
// syntax error
$cb = (function($x) { return $x + 1; })->bindTo(null); 
```

# file - 如何在 Matlab 中以特定格式将数据保存到文本文件中？

> ID：13848258
> 
> 赞同：2
> 
> 时间：2012-12-12T20:43:48.737
> 
> 标签：file, matlab, text, format

我是 Matlab 的初学者，我需要帮助以这种格式输出我的 X 和 Y 坐标：

```
X-142232Y77639
X-148878Y63979
X-154215Y49757
X-158196Y35097 
```

它是一列`X`和`Y`字符串。现在我有这个：

```
fileID = fopen('matrix.txt','a+' );
formatSpec = 'x'%6.4f\n';
fprintf(fileID,'%6.4f\n');
fprintf(fileID,'%6.4f\n',x, y);
fclose(fileID); 
```

在 formatSpec 我不知道如何添加 Y？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:00:35.563

将其他标记（`%6.4f`在您的情况下）添加到您的格式字符串：

```
formatSpec = 'X%6.4fY%6.4f\n'; 
```

然后在调用中使用该格式字符串`fprintf`

```
 fprintf(fileID, formatSpec, x, y); 
```

（[文档在这里](http://www.mathworks.com/help/matlab/ref/fprintf.html)。）

# linux - Crontab/Perl 管道魔法

> ID：13848260
> 
> 赞同：1
> 
> 时间：2012-12-12T20:44:05.830
> 
> 标签：linux, bash, crontab, io-redirection, redirectstandardoutput

> **可能重复：**
> [在 bash shell 中，“ 2>&1 ”是什么？](https://stackoverflow.com/questions/818255/in-the-bash-shell-what-is-21)

我最近在 crontab 中看到了这个：

```
5 * * * * perl /abs/path/to/my/script.pl >> /abs/path/two/my/script-log.txt 2>&1 
```

如果我没看错的话，它会每小时运行`script.pl`一次，每小时运行 5 分钟（如 2:05、3:05、10:05 等）。同样，如果我是正确的，它会将标准输出重定向到位于其他地方的日志文件。

但是 crontab 末尾的这个 Linux/Perl voo-doo 是什么？

> 2>&1

这是在指导 Linux/Perl 做什么？如果我对 crontab 的上述解释不正确，也请为我澄清！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:46:59.137

将文件描述符 2 (stderr) 重定向到 1；这是告诉 /bin/sh stderr 应该与 stdout 放在同一个地方的惯用方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:47:53.650

将文件描述符 2 (STDERR) 与文件描述符 1 (STDOUT) 关联起来是 bourne shell 语法，实际上将 STDERR 发送到`/abs/path/two/my/script-log.txt`.

# kendo-ui - Combobox Cascading 需要更具体的 cascadeFrom 选项

> ID：13848264
> 
> 赞同：5
> 
> 时间：2012-12-12T20:44:18.080
> 
> 标签：kendo-ui

我想使用 Kendo UI ComboBox 的 cascadeFrom 功能，但令我沮丧的是，该选项似乎只接受一个 ID。现在我不能使用 ID，因为组合框是动态添加的，并且可能多次添加，从而导致多个控件具有相同的 ID。

有人对我如何将特定的 dom 对象传递给级联或如何使用“更改”事件设置自定义级联功能有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T21:11:44.830

级联功能只是一些糖，可以更轻松地创建级联 DropDowns/Combos。

基本上你需要使用 4 个东西来手动实现父 ComboBox 的花哨的级联->**[更改](http://docs.kendoui.com/api/web/combobox#change)**事件、子 ComboBox 的**[enable](http://docs.kendoui.com/api/web/combobox#enable)**方法、父 ComboBox 的**[value](http://docs.kendoui.com/api/web/combobox#value)** 方法和子 ComboBox 的[dataSource.read()](http://docs.kendoui.com/api/framework/datasource#read)方法。

最初，当触发父级的更改事件时，子级启用（false）获取父级的值并将其传递给子级dataSource.read（）方法的读取方法以将其发送到服务器。最后从服务器返回所需的记录。

```
function OnChangeOfParentCombo(e){
     var child = $('#ChildCombo').data().kendoComboBox;
     child.enable(true);
     child.dataSource.read({myFilter:this.value()});
} 
```

# php - 使用 PHP 保存 DOM 元素

> ID：13848274
> 
> 赞同：0
> 
> 时间：2012-12-12T20:44:57.137
> 
> 标签：php, javascript, html, load, save

我的网页中有这个视频元素：

```
 <video height="240" width="412" id="video" controls="controls">
    </video>
<button type="button"  id ="url_go" name="url_go" onclick="showUploadDiv()"> Load </button>
<form id="upload" action="save.php" method="post" enctype="multipart/form-data">
<button type="submit" > Save </button> 
```

它有一个以这种方式加载的动态网址：

```
function showUploadDiv()
{
    if ($("#url").val()==null || $("#url").val()=="")
        return false; 

    var video = document.getElementById('video');
    video.src = $("#url").val();
    video.controls = true;
    video.height = 240; 
    video.width = 412;
    document.getElementById('url').value="";
} 
```

我使用按钮在我的网页中上传了一个视频（设置值 url）`load`。之后我想保存我的元素`video`。我的问题出在文件`save.php`中，我想在其中保存加载了新 URL 的视频元素。在此代码中，我将网页元素保存在新网页中，但视频未加载 url 值：

```
<?php
    $ourFileName = "testFile.html";
    $ourFileHandle = fopen($ourFileName, 'w+') or die("can't open file");
    fwrite($ourFileHandle, file_get_contents("index.html"));
    fclose($ourFileHandle);
?> 
```

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:31:06.103

当您使用 JavaScript 更改用户浏览器中的 DOM 时，服务器上的原始 HTML 文件实际上并没有更改。您需要上传 URL，并在保存之前手动将“src”属性插入到加载的 HTML 代码中。

```
<?php
    $ourFileName = "testFile.html";
    $ourFileHandle = fopen($ourFileName, 'w+') or die("can't open file");
    $url = $_POST['url']; // don't forget to validate this
    $content = file_get_contents("index.html");
    $content = str_replace('<video ','<video src="'.$url.'" ',$content);
    fwrite($ourFileHandle, $content);
    fclose($ourFileHandle);
?> 
```

# powershell - Powershell foreach 数学问题。Sum 是累积的，而不是轮询的 foreach 服务器

> ID：13848276
> 
> 赞同：3
> 
> 时间：2012-12-12T20:45:09.547
> 
> 标签：powershell

尝试编写关于 DHCP 使用情况的每日“检查”脚本。使用 netsh 从 DHCP 服务器中提取信息，查看正在使用和可用的 IP 地址，删除字母和分隔字符，所以我只剩下地址的原始数量。然后将它们相加以获得总地址池大小并以使用中的百分比结束。我已经为此烦恼了几天，终于得到了我喜欢的东西，但是我的数学不正确。一些远程站点有多个范围/子网，当尝试将这些数字添加到每个服务器的总数中时，它只是累积地添加地址。我认为我的问题是 $u 和 $f 中的最后一个“foreach”，但我不确定如何修复它并得到我想要的。如果我删除最终的 foreach，它对于单个子网站点可以正常工作，但不能在任何一台服务器上处理更多。我希望这是有道理的。

```
function dhcp {
  $servers = "contoso","contoso2","contoso3"
  Foreach ($server in $servers)
  {
    netsh dhcp server \\$server show server
    "DHCP Server: $server"
    #netsh dhcp server \\$server show mibinfo | select-string -pattern "scope", "subnet", "No. of Addresses in use = ", "No. of free Addresses = "
    $u = (netsh dhcp server \\$server show mibinfo | 
         where-object {$_-match "No. of Addresses in use = "}  | 
         foreach-object{$_.Split(“=")[-1].Trim( ).Trim(".").Trim(" ")} | 
         foreach-object{($u2+=[int]$_)})
    $f = (netsh dhcp server \\$server show mibinfo | 
         where-object {$_-match "No. of free Addresses = "} | 
         foreach-object{$_.Split(“=")[-1].Trim().Trim(".").Trim(" ")} | 
         foreach-object{($f2+=[int]$_)})
    $total2 = ([int]$u2+[int]$f2)
    $percent = [Math]::Round([int]$u2/[int]$total2*100,2)
    "No. of Addresses in use = $u2"
    "No. of free Addresses = $f2"
    "Total Addresses: $total2" 
    "Percent in use: $percent%"
    "                ======"
    "=================================================="
  } 
}
dhcp | out-file "C:\Users\crabbypatty\Desktop\Powershell\dhcplog $(get-date -f MM-dd-HHmm).txt" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:13:54.947

我会通过在您的正则表达式中使用捕获组以及使用切换条件处理正则表达式的能力来显着简化这一点。

哦，我会使用字典来确保单独跟踪每个服务器，同时允许您在捕获完成后访问数据。如果您保存了数据，这也将使您能够进行一些历史跟踪和比较......但这超出了这个范围;）

例如

```
 $addressesInUse = @{};
    $addressesFree = @{};

    foreach ($server in $serverList) {
        $mibinfo = netsh dhcp server \\$server show mibinfo; #| where-object {$_-match "No. of Addresses in use = "}  |
        foreach ($info in $mibinfo) {
            switch -regex ($info) {
                "No. of Addresses in use = (?<count>\d+)" {
                    $val = $Matches["count"]; 
                    if ($addressesInUse.ContainsKey($server)) {
                        $addressesInUse.Add($server,$val);
                    } else {
                        $scopeCount.$server += $val;
                    }
                    break;
                }
                "No. of free Addresses = (?<count>\d+)" {
                    $val = [int]::Parse($Matches["count"]);
                    if ($addressesFree.ContainsKey($server)) {
                        $addressesFree.Add($server,$val);
                    } else {
                        $addressesFree.$server += $val;
                    }
                    break
                }
            }
        }
    }

    foreach ($key in $addressesFree.keys) {
        $total = $addressesInUse.$key + $addressesFree.$key;
        $percent = [Math]::Round($addressesInUse.$server / $total*100,2)
        Write-Host ("DHCP availablility for server {0}" -f $key);
        Write-Host ("No. of Addresses in use = {0}" -f $addressesInUse.$key);
        Write-Host ("No. of free Addresses = {0}" -f $addressesFree.$key);
        Write-Host ("Total Addresses: {0}" -f $total);
        Write-Host ("Percent in use: {0}%" - $percent);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:35:45.250

这可能就像在第一个循环的顶部将变量设置为零一样简单吗？意思是在您的“netsh dhcp server \$server show server”之后，将 u2 和 f2 都设置回零？

```
Foreach ($server in $servers) {
    netsh dhcp server \\$server show server
    "DHCP Server: $server" 
```

此时，重置变量：

```
 $f2 = 0
    $u2 = 0 
```

# c++ - 启动没有模板变量的模板类

> ID：13848278
> 
> 赞同：1
> 
> 时间：2012-12-12T20:45:13.290
> 
> 标签：c++, templates

> **可能重复：**
> [使用没有模板参数的模板类](https://stackoverflow.com/questions/6388844/using-a-template-class-without-a-template-argument)

如果我有一个模板函数，我不需要实例化它，因为它可以从参数中推断出来，如下所示：

```
template<typename T> void MyFunc(T arg);

int x;    
MyFunc(x); 
```

对于编译器可以猜测模板参数的任何情况，这都是真的吗？具体来说，我在想这个：

```
template<typename T>
class MyClass {
public:
  MyClass(T) { }
};

int x;
MyClass<int> c1(x); // regular style
MyClass c2(x); // is this allowed? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:53:03.483

是和不是。

编译器不会推断类模板参数的类型，但允许使用默认值，因此如果您`int`对该模板使用了很多，您可以这样做：

```
template <typename T=int>
class MyClass {
public:
    MyClass(T) {}
};

int x;
MyClass<> c2(x); 
```

请注意，这仅适用于每个模板的一种特定类型。它不是根据您提供的参数类型来选择类型，只是使用您为模板指定的默认值，如果您没有指定类型但传递（比如说） a `double`，上面的模板仍然会实例化 over `int`，而不是`double`.

由于编译器可以/将推导出函数模板的模板参数，因此您还可以创建一个小模板函数并使用`auto`：

```
template <class T>
MyClass<T> make_MyClass(T const &v) {
   return MyClass<T>(v);
}

int x;

auto c2 = make_MyClass(x); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T20:50:12.587

不，这是不允许的，因为编译器只能在模板函数调用期间推断类型。

也就是说，常见的解决方案是辅助函数。

```
template<typename T>
class MyClass {
public:
  MyClass(T) { }
};

template<typename T>
MyClass<T> makeMyClass(T x)
{
  return MyClass<T>(x);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T20:48:00.050

不，这是不允许的；模板参数扣除仅适用于模板函数，模板类不会从给构造函数的参数中扣除模板参数。

# java - 如何测试一个整数序列是否是随机生成的？

> ID：13848282
> 
> 赞同：0
> 
> 时间：2012-12-12T20:45:32.730
> 
> 标签：java

所以我试图测试是否随机生成了一个整数序列，但它不起作用......这就是我到目前为止所得到的：

```
public static void main(String[] args) {
    Random r = new Random();
    int[] sequence = { r.nextInt(), r.nextInt(), r.nextInt() };
    System.out.println(isRandomSequence(sequence));
}

public static boolean isRandomSequence(int[] sequence) {
    for (long seed = 0; seed < Long.MAX_VALUE; ++seed) {
        Random r = new Random(seed);
        long tries = 0;
        for (int i = 0; tries < Long.MAX_VALUE; ++tries) {
            if (sequence[i] == r.nextInt()) {
                if (++i == sequence.length) return true;
            } else {
                i = 0;
            }
        }
    }
    return false;
} 
```

编辑：澄清；我想知道，例如序列 { 4, 5, 6 } 是否由随机数生成器生成。对于将测试限制在 java.util.Random 的初学者（如果可能的话，最好有一个通用的解决方案）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:55:18.110

除了难以处理之外，您的蛮力技术只会检测由 生成的伪随机序列`java.util.Random`，到目前为止还不是生成伪随机数的唯一选项。**另请注意pseudo**一词：它们并不是真正随机的，这就是您认为可以检测到序列的原因。

检测序列是否真正随机在理论上是不可能的：您能做的最好的事情就是执行一系列模式检测测试，以消除*某些*可能性。总会有非随机序列逃脱检测。

我还应该注意，对于只有三个整数的序列绝对没有什么可说的。我很确定 的输出`java.util.Random`包含所有可能的三整数序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:51:42.413

随机只有 2^48 个种子。这意味着您“只”需要从一开始就探索 2^48 个种子。不再。

尽管如此，探索 2^48 个种子需要数小时或数天才能运行。

由于这非常占用 CPU，因此您可以考虑使用所有可用的 CPU ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:55:17.627

我认为您正在考虑种子的工作方式不正确。这可以解释为什么你没有得到随机序列。

你不是每次都播种。您在进程开始时使用种子实例化 Random 并挂在它上面。

如果你在方法调用中创建一个 Random ，每次你想要一个序列时都有一个新的种子，你肯定*做错了*。

我敢打赌这行得通：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Random;

/**
 * RandomSequenceGenerator
 * @author mduffy
 * @since 12/12/12 4:38 PM
 */
public class RandomSequenceGenerator {

    private Random random;

    public static void main(String[] args) {
        RandomSequenceGenerator generator = new RandomSequenceGenerator();
        int numSequences = ((args.length > 0) ? Integer.valueOf(args[0]) : 10);
        int lenSequence  = ((args.length > 1) ? Integer.valueOf(args[1]) : 3);
        for (int i = 0; i < numSequences; ++i) {
            System.out.println(generator.createRandomSequence(lenSequence));
        }
    }

    public RandomSequenceGenerator() {
        this(System.currentTimeMillis());
    }

    public RandomSequenceGenerator(long seed) {
        this.random = new Random(seed);
    }

    public synchronized List<Integer> createRandomSequence(int length) {
        List<Integer> sequence = new ArrayList<Integer>(length);
        for (int i = 0; i < length; ++i) {
            sequence.add(this.random.nextInt());
        }
        return sequence;
    }
} 
```

# javascript - 选择下拉菜单在 jQuery hover() 函数上触发 mouseout

> ID：13848285
> 
> 赞同：0
> 
> 时间：2012-12-12T20:45:41.970
> 
> 标签：javascript, jquery

我用 jQuery 在表单中制作了一张幻灯片，但是如果我打开一个选择下拉菜单，表单会滑出或者开始循环进出。

这是我的html：

```
<div id="hoverForm">
  <div id="label">
  </div>
  <div id="hoverForminner">
    <form>
    <!-- lots of form stuff -->
      <select class="dropdowdn" id="dropdowdn">
        <option selected="selected" value="">- Choose -</option>
        <option value="1">- One -</option>
        <option value="2">- Two -</option>
      </select>
    <!-- more form stuff -->
    </form>
  </div>
</div> 
```

和 JS

```
jQuery(document).ready(function(){
  $('#hoverForm').hover(
    function(){
      $('#hoverForminner').animate({marginLeft: '0'}, 200);
    },
    function(){
      $('#hoverForminner').animate({marginLeft: '-822px'}, 200);
    }
  );
}); 
```

如果我打开选择，如何避免鼠标退出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:37:27.730

您可以通过强制大小`hoverForm`大于下拉列表及其选项来完全避免该问题。这样，即使用户点击了一个选项，鼠标光标仍然会发现自己在元素上并且不会触发动画。

见[http://jsfiddle.net/YNJzF/1/](http://jsfiddle.net/YNJzF/1/)

例如，您可以使用`padding`or`height`属性：

```
#hoverForm  {background:green; padding:90px 30px}​ 
```

您还可以使用 jQuery 根据选项的数量动态更改高度：

```
$('#hoverForm').css('height',(originalHeight + $('.dropdowdn option').length*20)+'px') 
```

# python - 在 SQL 中插入递增的数字

> ID：13848286
> 
> 赞同：0
> 
> 时间：2012-12-12T20:45:52.273
> 
> 标签：python, sql

SQL 是否具有类似于 python 中的 range 函数的函数，它会生成一组递增的数字？我知道身份功能，但我不想继续创建和重新创建表，以便我可以获得一组不断增加的数字。

最终，我希望能够根据搜索功能的结果动态创建一系列数字，例如

`count(*) from teams where team= 'knicks'`

会给我一个数字，比如说20

然后我动态地将该数字用作函数的一部分

`function(20) ---> 1,2,3,4,5,6... 20`

我想使用函数的结果来生成一个排序表，其中每个数字对应一个玩家。我不能在这里使用身份，因为我将所有团队都放在一个表中，并且我将使用团队名称来提取编号的团队列表。

关于如何使用stackoverflow的设计仍然很不稳定，所以请多多包涵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:50:05.060

试试 SQL 序列。例如[本](http://www.sql.org/sql-database/postgresql/manual/sql-createsequence.html)指南。

/edit：我又读了一遍，也许你应该尝试更好地设计数据库。使用规范化......我不太明白这句话：

> 我想使用函数的结果来生成一个排序表，其中每个数字对应一个玩家。

# c# - 成员名称不能与部分类的封闭类型相同

> ID：13848287
> 
> 赞同：5
> 
> 时间：2012-12-12T20:45:53.283
> 
> 标签：c#, partial-classes

我已经定义了一个具有如下属性的部分类：

```
public partial class Item{    
    public string this[string key]
    {
        get
        {
            if (Fields == null) return null;
            if (!Fields.ContainsKey(key))
            {
                var prop = GetType().GetProperty(key);

                if (prop == null) return null;

                return prop.GetValue(this, null) as string;
            }

            object value = Fields[key];

            return value as string;
        }
        set
        {
            var property = GetType().GetProperty(key);
            if (property == null)
            {
                Fields[key] = value;
            }
            else
            {
                property.SetValue(this, value, null);
            }
        }
    }
} 
```

这样我就可以做到：

```
 myItem["key"]; 
```

并获取 Fields 字典的内容。但是当我构建时，我得到：

> “成员名称不能与其封闭类型相同”

为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T20:47:56.477

索引器自动具有默认名称`Item`- 这是包含类的名称。就 CLR 而言，索引器只是一个带参数的属性，不能声明与包含类同名的属性、方法等。

一种选择是重命名您的类，使其不被称为`Item`. 另一种方法是更改​​用于索引器的“属性”的名称，通过[`[IndexerNameAttribute]`](http://msdn.microsoft.com/en-us/library/51hfxez7.aspx).

更短的破碎示例：

```
class Item
{
    public int this[int x] { get { return 0; } }
} 
```

通过更改名称修复：

```
class Wibble
{
    public int this[int x] { get { return 0; } }
} 
```

或按属性：

```
using System.Runtime.CompilerServices;

class Item
{
    [IndexerName("Bob")]
    public int this[int x] { get { return 0; } }
} 
```

# php - 如何从 HTTP_ACCEPT_LANGUAGE 订购字符串

> ID：13848288
> 
> 赞同：1
> 
> 时间：2012-12-12T20:45:54.180
> 
> 标签：php, html, arrays, string, http-headers

> **可能重复：**
> [HTTP_ACCEPT_LANGUAGE](https://stackoverflow.com/questions/6038236/http-accept-language)

我尝试编写语言选项工具。因此我使用

```
$default_language = (strtolower($_SERVER["HTTP_ACCEPT_LANGUAGE"]));

if (eregi('af', $default_language)) {do something} 
```

现在我想在回显时订购字符串：

```
$_SERVER["HTTP_ACCEPT_LANGUAGE"] 
```

例如，用户指定了多种语言。

具有不同语言的 chrome 示例：

```
 nl,en-gb;q=0.8,en;q=0.6,fr;q=0.4,fr-ca;q=0.2 
```

那么我如何读出字符串以将其按特定顺序显示，我可以看到这`nl`是首选的第一种语言。

代码应该是这样的：

```
if ('nl'== array[0]) {do something} 
```

所以如果有人可以帮助我，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:25:56.353

来自[HTTP/1.1 标头字段定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)：

> 每个语言范围可以被赋予一个相关的质量值，该值表示用户对该范围指定的语言的偏好的估计。质量值默认为“q=1”。

您必须遍历语言并选择一种质量最高（偏好）的语言；像这样：

```
$preferred = "en"; // default
if(isset($_SERVER["HTTP_ACCEPT_LANGUAGE"]))
{
    $max   = 0.0;
    $langs = explode(",", $_SERVER["HTTP_ACCEPT_LANGUAGE"]);
    foreach($langs as $lang)
    {
        $lang = explode(';', $lang);
        $q    = (isset($lang[1])) ? ((float) $lang[1]) : 1.0;
        if ($q > $max)
        {
            $max = $q;
            $preferred = $lang[0];
        }
    }
    $preferred = trim($preferred);
}
// now $preferred is user's preferred language 
```

如果`Accept-Language`不发送标头，则所有语言都同样可以接受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:06:04.327

If you prefer to assume that the string is not always ordered before it is sent by the browser then the following code will parse and sort it. Note that I've changed French's `q` to `0.9`.

```
<?php
$lang = 'nl,en-gb;q=0.8,en;q=0.6,fr;q=0.9,fr-ca;q=0.2';

$langs = array();

foreach(explode(',', $lang) as $entry) {
    $t1 = explode(';', $entry);
    switch( count($t1) ) {
        case 1:
            $langs[] = array($t1[0], 1.0);
            break;
        case 2:
            $t2 = explode('=', $t1[1]);
            $langs[] = array($t1[0], floatval($t2[1]));
            break;
        default:
            echo("what is this I don't even");
            break;
    }
}

function mysort($a, $b) {
    if( $a[1] == $b[1] ) { return 0; }
    elseif( $a[1] > $b[1] ) { return -1; }
    else { return 1; }
}
usort($langs, 'mysort');

var_dump($langs); 
```

Output:

```
array(5) {
  [0]=>
  array(2) {
    [0]=>
    string(2) "nl"
    [1]=>
    float(1)
  }
  [1]=>
  array(2) {
    [0]=>
    string(2) "fr"
    [1]=>
    float(0.9)
  }
  [2]=>
  array(2) {
    [0]=>
    string(5) "en-gb"
    [1]=>
    float(0.8)
  }
  [3]=>
  array(2) {
    [0]=>
    string(2) "en"
    [1]=>
    float(0.6)
  }
  [4]=>
  array(2) {
    [0]=>
    string(5) "fr-ca"
    [1]=>
    float(0.2)
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T20:51:06.450

怎么样[`explode()`](http://php.net/manual/en/function.explode.php)？

```
$array = explode(",",$_SERVER["HTTP_ACCEPT_LANGUAGE"]); 
```

给定您的示例字符串，您应该得到以下值

*   `$array[0]`=“nl”
*   `$array[1]`=“en-gb;q=0.8”
*   `$array[2]`=“en;q=0.6”
*   等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:51:41.317

尝试这个 ：

```
<?php
print_r(Get_Client_Prefered_Language(true, $_SERVER['HTTP_ACCEPT_LANGUAGE']));
function Get_Client_Prefered_Language ($getSortedList = false, $acceptedLanguages = false)
{

    if (empty($acceptedLanguages))
        $acceptedLanguages = $_SERVER["HTTP_ACCEPT_LANGUAGE"];

        // regex borrowed from Gabriel Anderson on http://stackoverflow.com/questions/6038236/http-accept-language
    preg_match_all('/([a-z]{1,8}(-[a-z]{1,8})?)\s*(;\s*q\s*=\s*(1|0\.[0-9]+))?/i', $acceptedLanguages, $lang_parse);
    $langs = $lang_parse[1];
    $ranks = $lang_parse[4];

        // (recursive anonymous function)
    $getRank = function ($j)use(&$getRank, &$ranks)
    {
        while (isset($ranks[$j]))
            if (!$ranks[$j])
                return $getRank($j + 1);
            else
                return $ranks[$j];
    };

        // (create an associative array 'language' => 'preference')
    $lang2pref = array();
    for($i=0; $i<count($langs); $i++)
        $lang2pref[$langs[$i]] = (float) $getRank($i);

        // (comparison function for uksort)
    $cmpLangs = function ($a, $b) use ($lang2pref) {
        if ($lang2pref[$a] > $lang2pref[$b])
            return -1;
        elseif ($lang2pref[$a] < $lang2pref[$b])
            return 1;
        elseif (strlen($a) > strlen($b))
            return -1;
        elseif (strlen($a) < strlen($b))
            return 1;
        else
            return 0;
    };

        // sort the languages by prefered language and by the most specific region
    uksort($lang2pref, $cmpLangs);

    if ($getSortedList)
        return $lang2pref;

        // return the first value's key
    reset($lang2pref);
    return key($lang2pref);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T20:52:01.980

语言按用户喜欢的顺序排列。您所要做的就是在`,`符号和部分中拆分字符串，摆脱从`;`到 结尾的所有内容（包括`;`），并且您拥有用户喜欢的语言顺序。

# jsp - 我可以在 XPage 中使用外部 JSP 标记库吗？

> ID：13848291
> 
> 赞同：8
> 
> 时间：2012-12-12T20:46:01.160
> 
> 标签：jsp, xpages, taglib

我想使用由不同（不是 IBM）软件公司提供的 JSP 标记库和 XPages。这可能吗？如果可以，我如何将新的 jar 文件关联到标签库名称空间以便识别它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:35:46.957

我对此表示高度怀疑。很有可能，该库必须转换为 JSF 组件库。用于定义每个对象的语法之间有一些相似之处，但主要区别在于 JSP 使用称为标记处理程序的单个 Java 类来定义对象的性质（即其属性）并将标记发送到浏览器是对象状态的代表。相比之下，JSF 使用两个：组件和渲染器。组件只是对象的标识；渲染器处理标记生成。一个更细微的区别是 JSP 标记库按照惯例存储为 .tld 文件，然后从 JSP 页面中引用这些文件。XPage 期望组件在 .xsp-config 文件中定义，渲染器在 faces-config.xml 文件中定义。如果一个组件被正确定义（即使其对应的渲染器没有），Designer 将在构建时识别任何页面上的 prefix:tag 语法并生成相应的 Java 代码。否则，Designer 会拒绝该标签为无效并拒绝构建项目。

总之，据我所知，JSP 标记库本身不能在 XPage 应用程序中使用，但可以用作创建可在任何 XPage 应用程序中使用的 JSF 组件库的基础。

# android - 三星 Galaxy s3 在 getSupportActionBar() 上给出 null

> ID：13848295
> 
> 赞同：0
> 
> 时间：2012-12-12T20:46:21.870
> 
> 标签：android, actionbarsherlock, samsung-mobile

我在我的 android 应用程序中使用 ActionBarSherlock。它适用于除三星 Galaxy S3 以外的所有手机。

这一特定行给出了空指针异常 -

```
ActionBar actionBar = getSupportActionBar();
actionBar.setBackgroundDrawable(new ColorDrawable(Color.parseColor(getString(R.color.headerBarColor)))); 
```

我的清单看起来像这样 -

```
<application
    android:icon="@drawable/adminlaunchericon"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock.Light.DarkActionBar" > 
```

这里 getSupportActionBar() 给了我空值。

现在，同一段代码可以很好地与其他手机配合使用。

任何人都有这样的经验，如果可以告诉我如何处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:25:00.423

我通过删除以下行来修复它 -

requestWindowFeature(Window.FEATURE_NO_TITLE);

我想知道为什么我把它放在第一位。但无论如何，它可能会帮助别人。

# java - 从静态类获取应用程序

> ID：13848299
> 
> 赞同：0
> 
> 时间：2012-12-12T20:46:42.043
> 
> 标签：java, android

我正在尝试从我的静态类访问应用程序，但收到此错误

> 对于 PniemActivity.MyFragmentAdapter 类型，方法 getActivity() 未定义

但是当我离开 getActivity() 时，我收到了这条消息：

> 无法从 Activity 类型对非静态方法 getApplication() 进行静态引用

这是我的代码。

```
private static class MyFragmentAdapter extends FragmentPagerAdapter{
    private final int NUM_OF_PAGES = 10;

    public MyFragmentAdapter(FragmentManager fm) {
        super(fm);
        // TODO Auto-generated constructor stub
    }

    @Override
    public Fragment getItem(int index){
        return PageFragment.newInstance("Hoi "+ index );

    }

    @Override
    public int getCount(){
    appData = ((myApp) getActivity().getApplication()).slaughterData;

        return NUM_OF_PAGES;

    }

} 
```

我想从我的数据库中获取所需的片段数量，这就是我想访问我的应用程序的原因。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:59:46.167

如果从数据库获取计数是这样做的唯一原因，只需从 getCount() 方法查询您的数据库。

如果您真的想通过静态字段获取活动（**这通常是不好的**）：活动：

```
public static MyActivity instance;

onCreate(){
  instance = this;

} 
```

在您的应用程序中的任何位置：

```
MyActivity instance = MyActivity.instance; 
```

使用此解决方案您将遇到麻烦，因此请注意。我在 Java 中工作，但不能保证它如何与 Android 一起工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:48:13.487

据我所知，getActivity() 是 Fragment 上的方法，而不是 FragmentPageAdapter 上的方法。[您可以从 FragmentManager](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)（您有参考）获得当前的 Fragment，但我可能会按照 Vladimir 在评论中建议的那样做：

1.  将扩展 Application 的类添加到您的 AndroidManifest：
2.  实现单例模式（使用 getInstance 方法）或简单地将公共静态引用添加到您的 Application 子类

# php - 如何使用正则表达式将图像名称替换为 img 标签？

> ID：13848300
> 
> 赞同：0
> 
> 时间：2012-12-12T20:46:47.330
> 
> 标签：php, regex

假设我需要更换以下任何一项：

`{{image.jpg}}`或者`{{any-othEr_Fil3.JPG}}`

至：

`<img src="image.jpg" alt="" />`或`<img src="any-othEr_Fil3.JPG" alt="" />`分别使用 PHP 和正则表达式。

计划是什么？

我一直在尝试，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:49:58.843

要匹配的正则表达式（我假设文件名不包含`}`字符 - 如果它包含，那么必须有一个方案来转义它，我从您提供的信息中不知道）：

```
/{{([^}]*)}}/ 
```

要替换的字符串：

```
'<img src="$1" alt="" />' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:09:21.493

# 快速解决

要匹配介于 the`{{`和 the之间的字符，`}}`我们应该使用`(.+?)`. `.`匹配任何字符（包括空格）的方法。我允许这样做，因为`file name.jpg`它是一个有效的文件名（如果您不希望空格替换`.+?`为`\S+?`）。这`+`意味着需要有多个字符才能进行匹配。这`?`意味着正则表达式将尝试匹配尽可能少的字符。因此，如果我们使用正则表达式`{{(.+?)}}`，捕获的字符将是最近的`{{`和集之间的字符`}}`。例如：

```
$string = '{{image.jpg}} or {{any-othEr_Fil3.JPG}}';
echo preg_replace_callback('/{{(.+?)}}/', function($matches) {
    return sprintf('<img src="%s" alt="" />', $matches[1]);
}, $string); 
```

会回声

```
<img src="image.jpg" alt="" /> or <img src="any-othEr_Fil3.JPG" alt="" /> 
```

# 变得花哨

正则表达式`/{{\s*(.+?\.(?:jpg|png|gif|jpeg))\s*}}/i`将匹配组之间的任何图像文件名（带有 jpg、png、gif 或 jpeg 文件扩展名），`{{`并`}}`在大括号和文件名之间留出空格。例如 ：

```
$string = "{{image.jpg}} or {{ any-othEr_Fil3.JPG }} \n"
        . "{{ with_spaces.jpeg }} and {{ this_is_not_an_image_so }} don't replace me \n"
        . "{{ demonstrating spaces in file names.png }}";

$regexp = '/{{\s*(.+?\.(?:jpg|png|gif|jpeg))\s*}}/i';

echo preg_replace_callback($regexp, function($matches) {
    return sprintf('<img src="%s" alt="" />', $matches[1]);
}, $string); 
```

会回声

```
<img src="image.jpg" alt="" /> or <img src="any-othEr_Fil3.JPG" alt="" /> 
<img src="with_spaces.jpeg" alt="" /> and {{ this_is_not_an_image_so }} don't replace me 
<img src="demonstrating spaces in file names.png" alt="" /> 
```

# 更多资源

[PHP preg_replace_callback 文档](http://php.net/manual/en/function.preg-replace-callback.php)

[我用来测试和练习正则表达式的网站](http://regexpal.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:55:08.520

这是在 Perl 中，但在 PHP 中应该类似：

从命令行：

```
echo "{{image.jpg}} {{any-othEr_Fil3.JPG}}" | perl -ne '$_ =~ s/{{([^}]+)}}/&lt;img src="$1" alt="" \/&gt;/g; print $_' 
```

# spring - XML 配置文件中的 Spring 表达式“文字”

> ID：13848304
> 
> 赞同：1
> 
> 时间：2012-12-12T20:47:03.687
> 
> 标签：spring, spring-el

我有一个简单的类，例如：

```
public class ValueProvider {
     public void setExpression(String expression) {
         this.expression = expression;
     }

     public String getValue() {
         Expression exp = new SpelExpressionParser().parseExpression(this.expression);
         return exp.getValue(new StandardEvaluationContext(new Foo()), String.class);
     }
     private String expression;
} 
```

不幸的是，当我尝试注册提供者时，它会尝试评估提供的表达式：

```
<bean class="com.ValueProvider">
    <property name="expression" value="#{bar}" />
</bean> 
```

关于如何让 Spring 将 value 属性视为字符串/表达式文字的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:05:40.653

根据[SPR-704](https://jira.springsource.org/browse/SPR-7041)的状态，这是不可能的。

# c - 检查缓冲区中的子字符串

> ID：13848310
> 
> 赞同：2
> 
> 时间：2012-12-12T20:47:12.263
> 
> 标签：c, string, buffer, substring

我使用缓冲区从串行端口接收数据。缓冲区的固定长度为 100，当我接收数据时，我将此数据的长度存储在变量（索引）中。

我想检查从 0 到 index-1 的缓冲区是否包含子字符串。

我读过我可以使用 strstr 和 strdup 来做到这一点，但我有两个问题。首先，我不知道如何从缓冲区中提取一个字符串，其次，如果我不必复制字符串只是为了稍后在其中查找子字符串时将其删除一行会更好。

我的变量如下：

```
char output[100];
int index = 0;
char* substring; 
```

我想要一个函数，如果 substring 在 output[0:index] 中，则返回 true，否则返回 false。

任何帮助或领导将不胜感激！

编辑：我正在为 atmel µC 编写一段代码，所以我似乎仅限于[这些功能](http://www.nongnu.org/avr-libc/user-manual/group__avr__string.html#ga8569f20e38a030b5a28fd951abec2c9b)。

编辑 2：实际上，我似乎可以使用标准 string.h 中的所有功能

编辑 3：我检查了我的依赖项，下面是我可以调用的所有函数。

```
extern int ffs (int __val) __ATTR_CONST__;
extern int ffsl (long __val) __ATTR_CONST__;
extern int ffsll (long long __val) __ATTR_CONST__;
extern void *memccpy(void *, const void *, int, size_t);
extern void *memchr(const void *, int, size_t) __ATTR_PURE__;
extern int memcmp(const void *, const void *, size_t) __ATTR_PURE__;
extern void *memcpy(void *, const void *, size_t);
extern void *memmem(const void *, size_t, const void *, size_t) __ATTR_PURE__;
extern void *memmove(void *, const void *, size_t);
extern void *memrchr(const void *, int, size_t) __ATTR_PURE__;
extern void *memset(void *, int, size_t);
extern char *strcat(char *, const char *);
extern char *strchr(const char *, int) __ATTR_PURE__;
extern char *strchrnul(const char *, int) __ATTR_PURE__;
extern int strcmp(const char *, const char *) __ATTR_PURE__;
extern char *strcpy(char *, const char *);
extern int strcasecmp(const char *, const char *) __ATTR_PURE__;
extern char *strcasestr(const char *, const char *) __ATTR_PURE__;
extern size_t strcspn(const char *__s, const char *__reject) __ATTR_PURE__;
extern char *strdup(const char *s1);
extern size_t strlcat(char *, const char *, size_t);
extern size_t strlcpy(char *, const char *, size_t);
extern size_t strlen(const char *) __ATTR_PURE__;
extern char *strlwr(char *);
extern char *strncat(char *, const char *, size_t);
extern int strncmp(const char *, const char *, size_t) __ATTR_PURE__;
extern char *strncpy(char *, const char *, size_t);
extern int strncasecmp(const char *, const char *, size_t) __ATTR_PURE__;
extern size_t strnlen(const char *, size_t) __ATTR_PURE__;
extern char *strpbrk(const char *__s, const char *__accept) __ATTR_PURE__;
extern char *strrchr(const char *, int) __ATTR_PURE__;
extern char *strrev(char *);
extern char *strsep(char **, const char *);
extern size_t strspn(const char *__s, const char *__accept) __ATTR_PURE__;
extern char *strstr(const char *, const char *) __ATTR_PURE__;
extern char *strtok(char *, const char *);
extern char *strtok_r(char *, const char *, char **);
extern char *strupr(char *); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:02:00.977

从你发布的链接我会去`memmem()`。

```
void *memmem(const void *s1, 
             size_t len1, 
             const void *s2, 
             size_t len2); 
```

该函数在length的内存区域中`memmem()`查找 length 的子字符串第一次出现的开始。`s2``len2``s1``len1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:00:16.917

鉴于您的微控制器库没有 strstr 或 strnstr ....

```
char* string_first_of(char* s, char* sub)
{
    int n;
    if(s == NULL) return NULL;
    if(sub == NULL) return s;
    n =  strlen(sub);
    while(*s != 0)
    {
        if(strncmp(s, sub, n) == 0)
        {
            return s;
        }
        s++;
    }
    return NULL;    
}

bool string_contains(char* s, char* sub)
{
    return string_first_of(s, sub) != NULL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:57:57.527

正如迈克尔建议的那样，您或许应该看看`strnstr`.

来自文档的片段：

```
 #include <string.h>

 char *
 strnstr(const char *s1, const char *s2, size_t n); 
```

> strnstr() 函数定位字符串 s1 中第一次出现的以空字符结尾的字符串 s2，其中搜索不超过 n 个字符。

所以看起来你想要的是

```
char* found = strnstr(output,substring,100); 
```

如果你的 C-lib 是有限的，代码是相当简单的：

```
char* strnstr(char* s, char* find, size_t slen)
{
    char c, sc;
    size_t len;

    if ((c = *find++) != '\0') {
        len = strlen(find);
        do {
            do {
                if ((sc = *s++) == '\0' || slen-- < 1)
                    return (NULL);
            } while (sc != c);
            if (len > slen)
                return (NULL);
        } while (strncmp(s, find, len) != 0);
        s--;
    }
    return ((char *)s);
} 
```

# javascript - jQuery 无法在 Drupal 节点之外找到现有的 div

> ID：13848314
> 
> 赞同：0
> 
> 时间：2012-12-12T20:47:16.367
> 
> 标签：javascript, jquery, drupal, find, element

我遇到了一种我希望可以概括的具体问题。

我正在尝试使用 jQuery 来更改我知道存在的**id="footer-wrapper"的 div。**

当尝试从 Drupal 中的节点内执行此操作时，jQuery 似乎无法找到该元素：

```
<script type="text/javascript">
    alert("div with id=\"page\" has length: " + ($("#page").length));
    alert("div with id=\"footer-wrapper\" has length: " + ($("#footer-wrapper").length));
</script> 
```

但是它可以找到**id="page"**的 div ，它也在节点主体之外。我不明白为什么它能够找到一个而不是另一个。

这是一个**[相当混乱的小提琴](http://jsfiddle.net/MfCcA/)**，这里是**[实际页面的链接](http://www.nba.com/warriors/jquery-element-testing)**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:51:20.680

它可能在页脚加载之前被调用。您是否尝试过用以下方式包装它：

```
$(document).ready(function({
     [alert statements]
}); 
```

# mysql - 试图在 mysql 中测试一个字段 <> 具有空值的值

> ID：13848316
> 
> 赞同：1
> 
> 时间：2012-12-12T20:47:23.153
> 
> 标签：mysql, sql, null

我有一列具有空值以及其他值，例如“停用”。我正在尝试构建一个查询，上面写着“WHERE field <> 'deactivated”，但它返回一个空的结果集。根据我的研究，这似乎是因为它无法与空值进行比较。但我一直无法弄清楚如何绕过它。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:52:12.060

由于您似乎希望结果集中包含空值，因此正确的条件是

```
WHERE field <> 'deactivated' OR field IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:48:09.147

尝试具体寻找`NULL`：

```
WHERE field <> 'deactivated' OR field IS NULL 
```

仅供参考，您必须使用`IS NOT`而不是比较运算符，因为`NULL`它不等于任何东西。甚至另一个`NULL`；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T20:55:54.323

由于您使用的是 MySQL，因此可以使用[“等于”](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#operator_equal-to)运算符：

```
WHERE NOT(field <=> 'deactivated') 
```

在其他更符合 SQL 标准的数据库中，您可以编写

```
WHERE field IS DISTINCT FROM 'deactivated' 
```

我最近写了一篇关于各种数据库以及如何支持它[的博客文章。`DISTINCT predicate`](http://blog.jooq.org/2012/09/21/the-is-distinct-from-predicate/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T20:56:31.093

您可以使用 MySQL 的[“null-safe equal”运算符 <=>](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal-to)：

```
WHERE NOT field <=> 'deactivated' 
```

# c# - 波浪号在 C# 中的作用是什么？

> ID：13848319
> 
> 赞同：0
> 
> 时间：2012-12-12T20:47:40.080
> 
> 标签：c#

> **可能重复：**
> [函数名称前的波浪号在 C# 中是什么意思？](https://stackoverflow.com/questions/188688/what-does-the-tilde-mean-in-c)
> [枚举定义中的波浪号 (~) 是什么？](https://stackoverflow.com/questions/387424/what-is-the-tilde-in-a-c-sharp-enumeration)

我知道“~”是用于 Finalzier 方法的，但现在我看到了一些像这样的 C# 代码：

```
if (~IsFieldDeleted(oRptField.GetLayoutField()) != 0)
{
   oCollection.Add(oRptField, oRptField.ObjectKeyString);
   // some more stuff
} 
```

注意到第一行的“~”了吗？

然后如果我去实现 IsFieldDeleted 它是一个返回 int 的方法。

```
private int IsFieldDeleted(LayoutLib.LayoutField oLayoutField)
{
    Collection oColl = GetFieldIdsForField(oLayoutField);

    return (oColl.Count == 0) ? 1 : 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:49:22.347

`~`运算符执行按位补码。

[https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/bitwise-complement-operator](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/bitwise-complement-operator)

`IsFieldDeleted()`返回一个*int*，它是一种可以应用该运算符的类型（int、uint、long、ulong）。取按位补码，然后与零进行比较。

我看不出这怎么`if(...)`可能是真的，因为`IsFieldDeleted()`只返回 0 或 1 并且 ~0 和 ~1 都不是零。

# r - 轴下方的方向箭头

> ID：13848320
> 
> 赞同：2
> 
> 时间：2012-12-12T20:47:41.393
> 
> 标签：r, plot, ggplot2

> **可能重复：**
> [R＆ggplot2：如何在轴标签下获取箭头？](https://stackoverflow.com/questions/7160706/r-ggplot2-how-to-get-arrows-under-the-axis-label)

我们如何制作`ggplot2`或`r`制作显示轴方向的箭头？

例如

![在此处输入图像描述](../Images/14c02a41ac3a302bf678766e18fc98a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:55:16.887

这是一个完整的例子，我在我的微观经济学课上用来生成供求曲线。注意我生成 X 和 Y 轴的线条。我通常使用 R Studio。它使运行脚本、分析数据结构和查看图表变得更加容易。希望这可以帮助。

```
library("ggplot2")
library("grid")

funcs <- list(function(x) return (200-0.02*x),function(x) return (200-0.04*x),             function(x) return (10))
#cols <-heat.colors(5,1)
p <-ggplot()+xlim(c(-10,15000))+ylim(c(-10,210))+xlab("Quantity")+ylab("Price")

# Y-axis
p <- p + geom_segment(aes(x=0,y=-10,xend=0,yend=210),         arrow=arrow(length=unit(0.2,"cm")))

# X-axis
p <- p +     geom_segment(aes(x=0,y=0,xend=15000,yend=0),arrow=arrow(length=unit(0.2,"cm")))

# Horizontal segment representing optimal quantity 4750
p <- p + geom_segment(aes(x=0,y=105,xend=4750,yend=105),lty=2, col="gray60")

# Vertical segment representing optimal price i.e $105
p <- p + geom_segment(aes(x=4750,y=0,xend=4750,yend=105), lty=2, col="gray60")

# Marginal Revenue curve label
p <- p + geom_text(aes(x=4750,y=0, vjust=5), col="gray60", label="MR")

# Marginal Cost curve label
p <- p + geom_text(aes(x=15000,y=10, vjust=-1), col="gray60", label="MC")

# Demand curve label
p <- p + geom_text(aes(x=10000,y=0, vjust=4), col="gray60", label="D")

# Optimal Quantity label.
p <- p + geom_text(aes(x=4750,y=0, hjust=1, vjust=1.5), col="gray60", label="Qm", size=3)

# Optimal Quantity
p <- p + geom_text(aes(x=4750,y=0,  hjust=1, vjust=3), col="gray60", label="(4750)", size=3)

# Optimal Price label
p <- p + geom_text(aes(x=0,y=105, hjust=1, vjust=-2.5), col="gray60", label="Pm", size=3)

#Optimal price
p <- p + geom_text(aes(x=0,y=105,  hjust=1, vjust=-1), col="gray60", label="($105)", size=3)

for(i in 1:length(funcs))
  p <- p + stat_function(aes(y=0),fun = funcs[[i]],          arrow=arrow(length=unit(0.2,"cm")))

# Change in marginal cost due to subsidy.
p <- p + stat_function(aes(y=0),fun = function(x) return(5), lty=2,      arrow=arrow(length=unit(0.2,"cm")))
p <- p + geom_text(aes(x=15000,y=5, hjust=-1), col="gray60", label="MC_NEW", size=4)

# Horizontal segment representing optimal quantity 4750
p <- p + geom_segment(aes(x=0,y=102.5,xend=4875,yend=102.5),lty=2, col="gray60")
p <- p + geom_segment(aes(x=4875,y=0,xend=4875,yend=102.5), lty=2, col="gray60")

# Optimal Price label
p <- p + geom_text(aes(x=0,y=105, hjust=.51, vjust=2.5), col="gray60", label="Pm_NEW",     size=3)

#Optimal price
p <- p + geom_text(aes(x=0,y=105,  hjust=.51, vjust=4.0), col="gray60", label="($102.50)", size=3)

# Optimal Quantity label.
p <- p + geom_text(aes(x=4750,y=0, vjust=1.5, hjust=-.5), col="gray60", label="Qm_NEW", size=3)

# Optimal Quantity
p <- p + geom_text(aes(x=4750,y=0,   vjust=3, hjust=-1), col="gray60", label="(4875)",     size=3)
print(p) 
```

# c# - 从非默认命名空间读取 WMI 类

> ID：13848323
> 
> 赞同：1
> 
> 时间：2012-12-12T20:47:51.310
> 
> 标签：c#, namespaces, scope, wmi

我有一个简单的问题。我无法读取 WMI 类的特定实例。

```
ManagementScope scope = new ManagementScope(@"\\.\root\OpenHardwareMonitor", null);
scope.Connect();
ManagementPath printersPath = new ManagementPath("Sensor");            
ObjectGetOptions options = new ObjectGetOptions(null, TimeSpan.MaxValue, true);

ManagementClass printersManager = new ManagementClass(scope, printersPath, options);
foreach (ManagementObject printer in printersManager.GetInstances())
{
    Console.WriteLine(printer["Name"]);
}

ManagementPath path = new ManagementPath(scope.Path + ":Sensor.Name='CPU'");

ManagementObject disk = new ManagementObject();
disk.Path = path;
disk.Get(); 
```

在这里我得到一个例外，但上面的列表有效并且显示了“CPU”。

Exeption 指向 ';' 获取（）。详情：（使用德文VS12）

```
System.Management.ManagementException wurde nicht behandelt.
  HResult=-2146233087
  Message=Ungültiger Objektpfad <--- invalid objektpath
  Source=System.Management
  StackTrace:
       bei System.Management.ManagementException.ThrowWithExtendedInfo(ManagementStatus errorCode)
       bei System.Management.ManagementObject.Get()
       bei Hello_openHWM.Program.getCPUTemp() in c:\Users\XXX\Documents\Visual Studio 2012\Projects\Hello openHWM\Hello openHWM\Program.cs:Zeile 46.
       bei Hello_openHWM.Program.Main(String[] args) in c:\Users\XXX\Documents\Visual Studio 2012\Projects\Hello openHWM\Hello openHWM\Program.cs:Zeile 18.
       bei System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       bei System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       bei Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       bei System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       bei System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

我究竟做错了什么？我是 C# 新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T23:27:48.830

似乎您将错误的[WMI 对象路径](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390350%28v=vs.85%29.aspx)传递给 WMI，作为解决方法，您可以使用`WQL`一句话来检索正确的数据。

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                ManagementScope Scope;                
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\OpenHardwareMonitor", "."), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM Sensor Where Name LIKE 'CPU%'");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0,-35} {1,-40}","Identifier",WmiObject["Identifier"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Index",WmiObject["Index"]);// Sint32
                    Console.WriteLine("{0,-35} {1,-40}","InstanceId",WmiObject["InstanceId"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Max",WmiObject["Max"]);// Real32
                    Console.WriteLine("{0,-35} {1,-40}","Min",WmiObject["Min"]);// Real32
                    Console.WriteLine("{0,-35} {1,-40}","Name",WmiObject["Name"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Parent",WmiObject["Parent"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","ProcessId",WmiObject["ProcessId"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","SensorType",WmiObject["SensorType"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Value",WmiObject["Value"]);// Real32

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

# html - 如何告诉 Firefox 每次从服务器加载我的页面

> ID：13848326
> 
> 赞同：1
> 
> 时间：2012-12-12T20:47:53.760
> 
> 标签：html, firefox, caching

我正在编写一个显示服务器状态的简单网页，因此必须始终从服务器加载，而不是从缓存加载。

我该如何实现？我试过了

```
<head>
<meta http-equiv="expires" content="0">
<title>status</title>
</head> 
```

但它仅适用于 Chrome。关于 Firefox 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:50:19.677

你有没有尝试过：

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"> 
```

这在过去对我有用，可以解决 Firefox 缓存问题。

来源：[http ://www.i18nguy.com/markup/metatags.html](http://www.i18nguy.com/markup/metatags.html)

# latex - 狮身人面像对包含节号和节标题的其他节的引用

> ID：13848328
> 
> 赞同：9
> 
> 时间：2012-12-12T20:47:58.420
> 
> 标签：latex, python-sphinx, restructuredtext

我正在使用 Sphinx 编写包含大量参考的文档：

```
.. _human-factor:

The Human Factor
================

...

(see :ref:`human-factor` for details) 
```

编译后的文档包含如下内容：

（详见*人为因素*）

相反，我希望它的格式如下：

（详见*5.1 人为因素*）

我尝试用谷歌搜索解决方案，发现latex hyperref 包可以做到这一点，但我不知道如何将它添加到Sphinx 构建中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:57:49.777

我基本上从这里使用 numsec.py 解决了它：[https ://github.com/jterrace/sphinxtr](https://github.com/jterrace/sphinxtr)

我不得不用这个替换 doctree_resolved 函数以获得章节号+标题（例如“5.1 The Human Factor”）。

```
def doctree_resolved(app, doctree, docname):
    secnums = app.builder.env.toc_secnumbers
    for node in doctree.traverse(nodes.reference):
        if 'refdocname' in node:
            refdocname = node['refdocname']
            if refdocname in secnums:
                secnum = secnums[refdocname]
                emphnode = node.children[0]
                textnode = emphnode.children[0]

                toclist = app.builder.env.tocs[refdocname]
                anchorname = None
                for refnode in toclist.traverse(nodes.reference):
                    if refnode.astext() == textnode.astext():
                        anchorname = refnode['anchorname']
                if anchorname is None:
                    continue
                linktext = '.'.join(map(str, secnum[anchorname]))
                node.replace(emphnode, nodes.Text(linktext
                    + ' ' + textnode)) 
```

为了使其工作，需要在 conf.py 中包含 numsec 扩展名，并在 toctree 中添加 :numbered: ，如下所示：

```
.. toctree::
   :maxdepth: 1
   :numbered: 
```

# couchdb - 设计文档是否应该基于数据模型来组织？

> ID：13848331
> 
> 赞同：2
> 
> 时间：2012-12-12T20:47:59.593
> 
> 标签：couchdb

在`CouchDB`, 中，应该`design documents`为存储在数据库中的每个“数据实体”或模型制作吗？或者，是否应该有一个设计文档包含所有您需要的视图的视图？

例如，如果我在数据库中有一些`Users`和`Comments`，我是否会有一个可能被调用的设计文档`_design/blog`，并且在其中我会有名为`usersByName`、 或`commentsByDate`等的视图。

或者，我应该有单独的设计文档，比如`_design/users`, `_design/comments`，其中我有名为 like`byName`或的视图`byDate`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:51:49.960

这是一个很好的问题。设计文档本身只是视图、列表、显示、更新功能的集合。您的“应用层”的所有工作都将由这些功能执行。所以我觉得与其拥有一个您的每个实体的不同设计文档应该对这些功能进行分离。您在问题中概述的博客场景是应该如何使用设计文档的一个很好的例子。

将设计文档视为应用程序的文件结构。如果您使用其他框架构建应用程序，您的应用程序可能只有一个文件结构。顺便说一句，没有什么能阻止您在应用程序。但我觉得这种方式有点难以管理。

只是回顾一下

**每个应用程序一个设计文档，具有单独的视图，如果需要，可以显示功能。**

# java - 使用Java访问类路径中特定文件夹中的文件

> ID：13848333
> 
> 赞同：11
> 
> 时间：2012-12-12T20:48:07.310
> 
> 标签：java, io

我想阅读 com.example.resources 包中的一堆文本文件。我可以使用以下代码读取单个文件：

```
InputStream is = MyObject.class.getResourceAsStream("resources/file1.txt")
InputStreamReader sReader = new InputStreamReader(is);
BefferedReader bReader = new BufferedReader(sReader);
... 
```

有没有办法获取文件列表，然后将每个元素传递给`getResourceAsStream`？

编辑：根据 ramsinb 的建议，我将代码更改如下：

```
BufferedReader br = new BufferedReader(new InputStreamReader(MyObject.class.getResourceAsStream("resources")));
String fileName;
while((fileName = br.readLine()) != null){ 
   // access fileName 
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T21:06:56.543

如果您将目录传递给该`getResourceAsStream`方法，那么它将返回目录中的文件列表（或至少是其中的一个流）。

```
Thread.currentThread().getContextClassLoader().getResourceAsStream(...) 
```

我故意使用 Thread 来获取资源，因为它将确保我获得父类加载器。这在 Java EE 环境中很重要，但对于您的情况可能并不太重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:00:05.623

[这个 SO 线程](https://stackoverflow.com/questions/6247144/how-to-load-a-folder-from-a-jar)详细讨论了这种技术。下面是一个有用的 Java 方法，它列出了给定资源文件夹中的文件。

```
/**
   * List directory contents for a resource folder. Not recursive.
   * This is basically a brute-force implementation.
   * Works for regular files and also JARs.
   * 
   * @author Greg Briggs
   * @param clazz Any java class that lives in the same place as the resources you want.
   * @param path Should end with "/", but not start with one.
   * @return Just the name of each member item, not the full paths.
   * @throws URISyntaxException 
   * @throws IOException 
   */
  String[] getResourceListing(Class clazz, String path) throws URISyntaxException, IOException {
      URL dirURL = clazz.getClassLoader().getResource(path);
      if (dirURL != null && dirURL.getProtocol().equals("file")) {
        /* A file path: easy enough */
        return new File(dirURL.toURI()).list();
      } 

      if (dirURL == null) {
        /* 
         * In case of a jar file, we can't actually find a directory.
         * Have to assume the same jar as clazz.
         */
        String me = clazz.getName().replace(".", "/")+".class";
        dirURL = clazz.getClassLoader().getResource(me);
      }

      if (dirURL.getProtocol().equals("jar")) {
        /* A JAR path */
        String jarPath = dirURL.getPath().substring(5, dirURL.getPath().indexOf("!")); //strip out only the JAR file
        JarFile jar = new JarFile(URLDecoder.decode(jarPath, "UTF-8"));
        Enumeration<JarEntry> entries = jar.entries(); //gives ALL entries in jar
        Set<String> result = new HashSet<String>(); //avoid duplicates in case it is a subdirectory
        while(entries.hasMoreElements()) {
          String name = entries.nextElement().getName();
          if (name.startsWith(path)) { //filter according to the path
            String entry = name.substring(path.length());
            int checkSubdir = entry.indexOf("/");
            if (checkSubdir >= 0) {
              // if it is a subdirectory, we just return the directory name
              entry = entry.substring(0, checkSubdir);
            }
            result.add(entry);
          }
        }
        return result.toArray(new String[result.size()]);
      } 

      throw new UnsupportedOperationException("Cannot list files for URL "+dirURL);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:52:57.243

我认为这就是你想要的：

```
String currentDir = new java.io.File(".").toURI().toString();
// AClass = A class in this package
String pathToClass = AClass.class.getResource("/packagename).toString();
String packagePath = (pathToClass.substring(currentDir.length() - 2));

String file;
File folder = new File(packagePath);
File[] filesList= folder.listFiles(); 

for (int i = 0; i < filesList.length; i++) 
{
  if (filesList[i].isFile()) 
  {
    file = filesList[i].getName();
    if (file.endsWith(".txt") || file.endsWith(".TXT"))
    {
      // DO YOUR THING WITH file
    }
  }
} 
```

# javascript - 在浏览器中复制到剪贴板 BINARY 数据

> ID：13848337
> 
> 赞同：19
> 
> 时间：2012-12-12T20:48:22.000
> 
> 标签：javascript, flash, coffeescript, clipboard

# 复制到剪贴板功能的最新技术（我的调查）

## 闪存替代品

*   我找到了以下替代方案：
    *   Zclip：我们正在使用
    *   zeroclipboard（祖先，zclip 使用它的按钮 flash 电影）：只有文本
    *   Clippy：页面中只有文本[https://github.com/mojombo/clippy](https://github.com/mojombo/clippy)
*   您可以在 (ActionScript:Flash) 代码中看到：[http](http://code.google.com/p/zeroclipboard/source/browse/trunk/ZeroClipboard.as) ://code.google.com/p/zeroclipboard/source/browse/trunk/ZeroClipboard.as （第 77 行）
*   他们使用 System.setClipboard(cliptText) 调用，它只支持纯文本字符串，正如我们在 Adob​​e AIR API 参考中看到的那样：http: [//help.adobe.com/en_US/air/reference/html/flash/system/System .html](http://help.adobe.com/en_US/air/reference/html/flash/system/System.html)
*   所以我们不能通过flash传递格式化文本。

## HTML5 替代品

草案中有一个 API 用于标准化剪贴板事件，但目前尚未在任何浏览器中实现[http://dev.w3.org/2006/webapi/clipops/](http://dev.w3.org/2006/webapi/clipops/)

# 我的 Rails/Zclip 实现

我正在使用 zclip（基于 zeroclipboard）将文本从 restfule 服务复制到系统剪贴板：

```
$('.copy-to-clipboard').zclip
  path:'/ZeroClipboard.swf'
  setHandCursor: true
  copy: -> 
    ajaxReturn = $.ajax
     type: 'GET'
     async: false
     url: '/resources/copy_to_clipboard/' + $(this).attr("class").match(/[0-9]+/)
    return ajaxReturn.responseText 
```

这是咖啡脚本。

如果服务 (/resources/copy_to_clipboard/) 提供文本，则它被正确复制。但是，如果它为 DOCX 文件提供服务，它不会直接复制到剪贴板。看一下rails控制器：

```
 def copy_to_clipboard
    send_file @resource.resource_content.content.file.file, :type => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
  end 
```

# 问题

您是否随时解决了将 BINARY 数据复制到剪贴板的问题？如何 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-01T07:25:36.833

我阅读了[剪贴板 API 和事件](https://w3c.github.io/clipboard-apis/)并编写了以下代码，这对我有用。唯一的问题是使用`NULL (0x0)`值。使用代码的方式是使用`x`所需的二进制值和调用`document.execCommand('copy')`函数设置数组，恭喜你的数据在剪贴板中！

```
var x = [0x1b, 0x68, 101, 108, 108, 0x6f, 0x7, 0x8];
var button = document.getElementById("copy-button");

button.addEventListener("click", function() {
  document.execCommand('copy');
}, false);

document.addEventListener('copy', function(e) {
  var str = '';
  x.forEach(function(d) {
    str += String.fromCharCode(d)
  })
  //You can ignore setting third parameter value
  e.clipboardData.setData('text', str, true);
  console.info('data copied');
  e.preventDefault();
});
```

```
<button type="button" id="copy-button">Copy to clipboard</button>
```

这是 Notepad++ 中的粘贴结果，`Show All Characters`菜单项打开： 我希望这会有所帮助；）[![在此处输入图像描述](../Images/2d02dec7dc9c1842026239cb73b348aa.png)](https://i.stack.imgur.com/JbyvF.png)

# java - 新位置的随机双生成器

> ID：13848338
> 
> 赞同：0
> 
> 时间：2012-12-12T20:48:22.050
> 
> 标签：java, random, double

我有一个代码，当在参数中输入时，它会复制对鼠标光标的引力。当鼠标单击时，它会创建一个反向效果推动对象（矩形远离它）。我正在尝试设置它，因此当您单击并按住时，当对象在 x 或 y 坐标中达到某个数字时，它将随机更改该对象的 x 和 y。这是我的代码。注释区域是我尝试使 x 和 y 在达到 500 个参数时随机化的地方。

```
import java.awt.*;

import java.util.Random;
    public class Ball
{

private Color col;
private double x, y;         // location
private double vx, vy;       // velocity

public Ball(int new_x, int new_y, int new_vx, int new_vy)
{
     x = new_x; 
     y = new_y; 
     vx = new_vx; 
     vy = new_vy;
}

public Ball()
{
    Random gen = new Random();
    x = gen.nextInt(480);
    y = gen.nextInt(480);
    vx = gen.nextInt(10);
    vy = gen.nextInt(10);

    col = new Color(gen.nextInt(255),gen.nextInt(255),gen.nextInt(255));

}

void paint( Graphics h)
{
    h.setColor(col);
    h.fillRect((int)x,(int)y,20,20);  
}

void move(int currentX, int currentY, boolean isButtonPressed )
{
    double dvx, dvy, rx, ry;
    double r_mag;

    x = x + vx;
    y = y + vy;  

    //bounce
    if  (x > 480 || x < 0)
       vx = -vx;
    if (y > 480 || y < 0)
        vy = -vy;

   if ( currentX <500 && currentY <500)   // mouse is on canvas, apply "gravity" 
   {
      rx = currentX - x;
      ry = currentY - y;
      r_mag = Math.sqrt((rx*rx) + (ry*ry));

//           if ( x = 500 || y = 500)
//             Random x = new Random();
//             x.nextDouble();
//             Random y = new Random();
//             y.nextDouble();

      if (r_mag < 1)
        r_mag = 1;

      dvx = (rx / r_mag);
      dvy = (ry / r_mag);

      if (isButtonPressed)
      {
        vx = vx - dvx;   // + makes balls move to cursor.
        vy = vy - dvy;   // - makes balls move away from cursor. 
      }
      else 
      {
        vx = vx + dvx;   // + makes balls move to cursor.
        vy = vy + dvy;   // - makes balls move away from cursor.

      }
    }

    // reduce speed slowly
    vx = .99*vx;
    vy = .99*vy;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:03:29.877

> The commented area is where I tried to make x and y go random when it hits 500 parameters.

So when `x` or `y` reaches 500, you want to randomly relocate the object?

Instead of

```
//           if ( x = 500 || y = 500) 
```

this is assignment, not comparison

```
//             Random x = new Random(); 
```

redeclares `x`, not what you want

```
//             x.nextDouble(); 
```

statement without effect

```
//             Random y = new Random();
//             y.nextDouble(); 
```

see above

you could use `Math.random()`, as in

```
if (x == 500 || y == 500) {
    x = Math.random()*480;
    y = Math.random()*480;
} 
```

(note: `Math.random()` returns a `double` in the half-open interval `[0,1)`, so you have to scale it; the scaling factor of `480` I used is a guess), or (less good, IMO) create a new `Random` instance each time you enter the `if`.

But,

1.  `x`, `y`, and the velocities `vx` and `vy` are `doubles`, so it is very unlikely that the movements let `x` or `y` become exactly `500`, so you should probably test for `>=` rather than `==` in the condition.

2.  In the code, you flip the velocity when either coordinate passes 480, so getting to 500 or farther is difficult and can only be achieved by judicious acceleration using the mouse, so a smaller threshold may be wanted.

# jquery-mobile - jQuery Mobile：将 url 添加到可折叠的内容标题

> ID：13848340
> 
> 赞同：3
> 
> 时间：2012-12-12T20:48:30.473
> 
> 标签：jquery-mobile

我是 JQM 新手，需要在可折叠内容标题中放置链接图像，以便在单击它时用户能够访问关联的 href。我还需要能够让标题根据需要展开和折叠。到目前为止，这是我的代码

```
<h3><em><?=$agent_row['prefix'] . ' ' . $agent_row['first'] . ' ' . $agent_row['last'] . ' ' . $agent_row['suffix']?>
    <a class="vcard" id="vcard" href="http://vcard.parascript.com/<?=$agent_row['first']?>_<?=$agent_row['last']?>.vcf"><img src="images/vcard.png" style="vertical-align:middle;width:30px;" /></a>
    <a id="email" href="mailto:<?=$agent_row['email']?>"><img src="images/mail.png" style="vertical-align:middle;width:30px;" /></a>
    <a id="mobilephone" href="tel://<?=$agent_row['cell']?>"><img src="images/mobile_phone.png" style="vertical-align:middle;width:30px;" /></a>
</em></h3> 
```

我感谢提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:57:13.690

查看：http: [//jquerymobile.com/demos/1.2.0/docs/content/content-collapsible.html](http://jquerymobile.com/demos/1.2.0/docs/content/content-collapsible.html)

示例：http: [//jsfiddle.net/Twisty/tJyeQ/](http://jsfiddle.net/Twisty/tJyeQ/)

**HTML**

```
<html>
<body>
    <div data-role="page"  id="page1">
        <div data-role="header">
            <h1>page1</h1>
        </div>
        <div data-role="content">
            <div data-role="collapsible">
                <h3><em>First Last</em></h3>
                <a class="vcard" id="vcard" href="http://vcard.parascript.com/first_last.vcf">
                    <img src="images/vcard.png" style="vertical-align:middle;width:30px;" />
                </a>
                <a id="email" href="mailto:f.last@example.com"><img src="images/mail.png" style="vertical-align:middle;width:30px;" />Email</a>
                <a id="mobilephone" href="tel://4155551212"><img src="images/mobile_phone.png" style="vertical-align:middle;width:30px;" />Phone</a>
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:55:39.683

这是一个使用布局网格的粗略示例：http: [//jsfiddle.net/Twisty/tJyeQ/6/](http://jsfiddle.net/Twisty/tJyeQ/6/)

**HTML**

```
<html>
<body>
    <div data-role="page"  id="page1">
        <div data-role="header">
            <h1>page1</h1>
        </div>
        <div data-role="content">
            <div class="ui-grid-c ui-btn ui-bar-c ui-corner-all">
                <div class="ui-block-a">
                    <span class="ui-btn-inner">
                        <span class="ui-icon ui-icon-plus ui-icon-shadow"> </span>
                        <span class="ui-btn-text">First Last</span>
                    </span>
                </div>
                <div class="ui-block-c">
                    <a class="vcard" id="vcard" href="http://vcard.parascript.com/first_last.vcf">
                        <img src="images/vcard.png" style="vertical-align:middle;width:30px;" />
                        vcard
                    </a>
                </div>
                <div class="ui-block-c">
                    <a id="email" href="mailto:f.last@example.com">
                        <img src="images/mail.png" style="vertical-align:middle;width:30px;" />
                        Email
                    </a>
                </div>
                <div class="ui-block-d">
                    <a id="mobilephone" href="tel://4155551212">
                        <img src="images/mobile_phone.png" style="vertical-align:middle;width:30px;" />
                        Phone
                    </a>
                </div>
            </div><!-- /grid-c -->
        </div>
    </div>
</body>
</html> 
```

这允许您为每个图像设置一个唯一的焦点或按钮，并且您可以让名称显示/隐藏其他内容，如可折叠块，只需一点额外的代码。

# windows-phone-7 - WP7 - 使用故事板时代表的问题

> ID：13848344
> 
> 赞同：1
> 
> 时间：2012-12-12T20:48:54.640
> 
> 标签：windows-phone-7, delegates, storyboard

我通过情节提要在我的 WP7 应用程序中引入了一些动画。这一切都在第一次按预期工作 - 事件发生，我调用代码在后面的代码中做动画，我得到了我想要的行为。但是当我第二次触发时，就像涉及到的委托代码被调用了两次。然后我触发了相同的事件，委托代码被调用了 3 次。其累积。

调用的代码如下

```
 private void WeekForward()
    {

        FadeTitleOut.Begin();

        FadeTitleOut.Completed += delegate
        {

            StartingMonday = StartingMonday.AddDays(7);
            BuildPage();
            FadeTitleIn.Begin();
        }; 

    } 
```

FadeTitleOut 和 FadeTitleIn 是我的故事板，动画效果很好。只是事件第一次发生 StartingMonday 时增加了 7 天。下次事件触发时，它会增加 14 天，依此类推。

我是否对我的委托代码做了一些非常愚蠢的事情？

可能应该补充一点，我在后面的代码中完成了大部分工作，包括动态地生成和删除控件，但是情节提要是在 XAML 中定义的，它们引用了在 XAML 中定义的控件（而不是在后面的代码）

故事板 XAML 是

```
 <phone:PhoneApplicationPage.Resources>
    <Storyboard x:Name="FadeTitleOut">
        <DoubleAnimation Storyboard.TargetName="LayoutRoot" Storyboard.TargetProperty="Opacity" From="1.0" To="0.0" Duration="0:0:0.3" />
    </Storyboard>

    <Storyboard x:Name="FadeTitleIn">
        <DoubleAnimation Storyboard.TargetName="LayoutRoot" Storyboard.TargetProperty="Opacity" From="0.0" To="1.0" Duration="0:0:0.3" />
    </Storyboard>
</phone:PhoneApplicationPage.Resources> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:23:47.880

看看你的代码，我的猜测是“WeekForward()”被调用的频率比你想要的要多，而且你每次调用它时都订阅 FadeTitleOut.Completed（因此你描述的行为）。解决此问题的一种方法是将此代码放在其他位置，以便它只订阅 Completed 事件一次。

**此外，您应该在触发 Begin 方法之前**写下您的事件，因为您有潜在的竞争条件。例如，

```
 FadeTitleOut.Completed += delegate
    {

        StartingMonday = StartingMonday.AddDays(7);
        BuildPage();
        FadeTitleIn.Begin();
    }; 

    FadeTitleOut.Begin(); 
```

将此代码放在将在 XAML 页面的生命周期内触发一次的地方，它应该没问题。希望有帮助。

# html - 使用 div 冻结多个表列

> ID：13848346
> 
> 赞同：0
> 
> 时间：2012-12-12T20:48:57.630
> 
> 标签：html, css, razor, css-tables

我目前有这个代码
**HTML**

```
<div class="table">
     <div class="header-row">        
        <div class="header-cell">First Name</div>
        <div class="header-cell">Last Name</div>

    @foreach (var item in Model.items)
    {
        <div class="header-cell">@item.Name</div>            
    }
</div>
@foreach (var user in Model.collections)
{
    <div class="row">

            <div class="cell">
                @user.FirstName
            </div>
            <div class="cell">
                @user.LastName
            </div>

        @foreach (var iteminfo in Model.FullInfo)
        {
            <div class="cell">
                @iteminfo.Info
            </div>                  
        }
    </div>
}
</div> 
```

***CSS***

```
.table { display: table; }
.header-row, .row { display: table-row; }
.header-cell,.header-cell-frozen, .cell { display: table-cell;} 
```

我想冻结该表的前两列。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:56:39.230

您必须将第 3 列和其他列分别`<div style="overflow:scroll;width:300px">` 替换`300px`为您选择的固定大小。

如果您想将拳头固定到相对于浏览器窗口的列，您必须使用`position:fixed`

试试这个

```
<!-- FROZEN --->
<div class="table" style="float:left;">
    <div class="header-row">
        <div class="header-cell">First Name</div>
        <div class="header-cell">Last Name</div>

        @foreach (var user in Model.collections)
        {
            <div class="row">
                <div class="cell">@user.FirstName</div>
                <div class="cell">@user.LastName</div>
            </div>
        }
    </div>
</div>
<!-- SCROLLABLE --->
<div class="table" style="overflow: scroll;width:300px;float:left">
    <div class="header-row">
        @foreach (var item in Model.items)
        {
            <div class="header-cell">@item.Name</div>            
        }
    </div>
    @foreach (var user in Model.collections)
    {
        <div class="row">
            @foreach (var iteminfo in Model.FullInfo)
            {
                <div class="cell">
                    @iteminfo.Info
                </div>                  
            }
        </div>
    }
</div> 
```

# git - 什么时候将文件添加到 Git 的分支中？

> ID：13848348
> 
> 赞同：0
> 
> 时间：2012-12-12T20:49:14.827
> 
> 标签：git

有没有一种简单的方法可以找出何时（在哪个提交或合并中）将文件添加到分支？特别是，从实验特性分支到掌握。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:26:27.900

`git log <branch> -- <file>`应该做的伎俩...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:05:42.877

您可以使用

```
git log --first-parent -- <file> 
```

列出沿主分支修改该文件的提交。列出的最后一个是将文件引入主分支的提交。

这确实取决于在主（例如`master`）分支上进行的合并以从其他分支中提取更改，而不是相反。

# java - 我想用 GUI 在 java 中创建一个评级系统

> ID：13848354
> 
> 赞同：2
> 
> 时间：2012-12-12T20:49:33.587
> 
> 标签：java, swing, icons, jbutton

我为一个项目工作，我想创建一个评级系统。我希望当我按下第 5 颗星时，所有的星星都变成红色，当我按下第 4 颗星时；第一次开始，第二颗星和第三颗星变成红色，依此类推。如果你能给我一些建议，我会很高兴。谢谢你！

这是我的代码：

```
public class Rating {

private ArrayList<String> results = new ArrayList<String>();

private JLabel inputLabel1;

public static void main(String[] args) {

    new Rating();
}

public Rating() {
    JFrame f2 = new JFrame("Rating");
    inputLabel1 = new JLabel("Rate: ");

    Icon icon1 = new ImageIcon("star-icon.png");
    Icon icon2 = new ImageIcon("star-3-icon.png");

    JButton button1 = new JButton(icon1);
    button1.setPreferredSize(new Dimension(35, 35));
    button1.setBorder(BorderFactory.createEmptyBorder());
    button1.setContentAreaFilled(false);
    button1.setDisabledIcon(icon1);
    button1.setPressedIcon(icon2);
    button1.setSelectedIcon(icon2);
    button1.setRolloverEnabled(true);
    button1.setRolloverIcon(icon2);
    button1.setRolloverSelectedIcon(icon2);

    JButton button2 = new JButton(icon1);
    button2.setPreferredSize(new Dimension(35, 35));
    button2.setBorder(BorderFactory.createEmptyBorder());
    button2.setContentAreaFilled(false);
    button2.setDisabledIcon(icon1);
    button2.setPressedIcon(icon2);
    button2.setSelectedIcon(icon2);
    button2.setRolloverEnabled(true);
    button2.setRolloverIcon(icon2);
    button2.setRolloverSelectedIcon(icon2);

    JButton button3 = new JButton(icon1);
    button3.setBorder(BorderFactory.createEmptyBorder());
    button3.setContentAreaFilled(false);
    button3.setDisabledIcon(icon1);
    button3.setPressedIcon(icon2);
    button3.setSelectedIcon(icon2);
    button3.setPreferredSize(new Dimension(35, 35));
    button3.setRolloverEnabled(true);
    button3.setRolloverIcon(icon2);
    button3.setRolloverSelectedIcon(icon2);

    JButton button4 = new JButton(icon1);
    button4.setPreferredSize(new Dimension(35, 35));
    button4.setBorder(BorderFactory.createEmptyBorder());
    button4.setContentAreaFilled(false);
    button4.setDisabledIcon(icon1);
    button4.setPressedIcon(icon2);
    button4.setSelectedIcon(icon2);
    button4.setRolloverEnabled(true);
    button4.setRolloverIcon(icon2);
    button4.setRolloverSelectedIcon(icon2);

    JButton button5 = new JButton(icon1);
    button5.setPreferredSize(new Dimension(35, 35));
    button5.setBorder(BorderFactory.createEmptyBorder());
    button5.setContentAreaFilled(false);
    button5.setDisabledIcon(icon1);
    button5.setPressedIcon(icon2);
    button5.setSelectedIcon(icon2);
    button5.setRolloverEnabled(true);
    button5.setRolloverIcon(icon2);
    button5.setRolloverSelectedIcon(icon2);

    JButton button6 = new JButton("Subscribe");
    button6.setPreferredSize(new Dimension(95, 35));

    final JTextArea display = new JTextArea(5, 25);

    JButton button7 = new JButton("Clear");
    button7.setPreferredSize(new Dimension(95, 35));

    JPanel panel2 = new JPanel();
    f2.add(panel2);
    f2.setVisible(true);
    f2.setSize(500, 550);
    f2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    panel2.add(inputLabel1);
    panel2.add(button1);
    panel2.add(button2);
    panel2.add(button3);
    panel2.add(button4);
    panel2.add(button5);
    panel2.add(button6);
    panel2.add(button7);
    panel2.add(display);

    button1.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {

            String b1 = "1";
            results.add(b1);
            StringBuilder sb = new StringBuilder();
            for (String string : results) {

                sb.append(string);
                sb.append("\n");
            }

        }
    });
    button2.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            String b2 = "2";
            results.add(b2);
            StringBuilder sb = new StringBuilder();
            for (String string : results) {

                sb.append(string);
                sb.append("\n");
            }

        }
    });
    button3.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            String b3 = "3";
            results.add(b3);
            StringBuilder sb = new StringBuilder();
            for (String string : results) {

                sb.append(string);
                sb.append("\n");
            }

        }
    });
    button4.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {

            String b4 = "4";
            results.add(b4);
            StringBuilder sb = new StringBuilder();
            for (String string : results) {

                sb.append(string);
                sb.append("\n");
            }

        }
    });
    button5.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            String b5 = "5";
            results.add(b5);
            StringBuilder sb = new StringBuilder();
            for (String string : results) {

                sb.append(string);
                sb.append("\n");
            }

        }
    });

    button6.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            String s = display.getText().toString();
            results.add(s);
            StringBuilder sb = new StringBuilder();
            for (String string : results) {

                sb.append(string);
                sb.append("\n");
            }
            display.setText(sb.toString());
            results.clear();

        }
    });

    button7.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {

            results.clear();
            StringBuilder sb = new StringBuilder();
            for (String string : results) {
                sb.append(string);
            }

            display.setText(null);

        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:40:11.977

对于具有默认值的 a`List<JToggleButton>`和 a ，添加 的五个实例。为星号使用合适的 Unicode 字形，例如[★ \u2605 ，如此](http://www.fileformat.info/info/unicode/char/2605/index.htm)[处](https://sites.google.com/site/drjohnbmatthews/buttons)所示。在您常见的情况下，将红色或背面的每个元素作为接收到的类型中的指示。`JPanel``FlowLayout``JToggleButton``ItemListener``setForground()``List``ItemEvent``getStateChange()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:50:38.907

对于所有 5 个按钮，您的操作非常相似。

您可以通过将这些操作放入方法中来使代码整洁

```
public void buttonClicked(Button but) 
```

然后将您的按钮传递给此方法：

```
buttonClicked(button1); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-12T20:57:01.783

如果您想为可能用于移动设备的用户反馈系统开发该评级系统，请注意拥有专利的 Lodsys 公司。请参阅因反馈系统而被起诉的愤怒的小鸟公司的信息。请参阅[http://www.geek.com/articles/mobile/lodsys-targets-angry-birds-maker-rovio-for-infringing-in-app-purchase-patent-20110725/](http://www.geek.com/articles/mobile/lodsys-targets-angry-birds-maker-rovio-for-infringing-in-app-purchase-patent-20110725/) 请注意 Apple 从他们那里购买了许可证，但独立律师表示，该许可不包括苹果以外开发的应用程序。

# c# - 合并列表并仅返回重复项

> ID：13848355
> 
> 赞同：4
> 
> 时间：2012-12-12T20:49:36.267
> 
> 标签：c#, linq, list, merge, duplicates

假设我有两个列表：

```
List<string>foo=new List<string>();
List<string>bar=new List<string>(); 
```

我想合并这两个列表并返回另一个列表，其中只有两个列表中的重复项。
所以如果我有：

```
//pseudocode
foo={"baz","lemons","somethingelse"}
bar={"what","another","baz","somethingelse","kitten"} 
```

我希望它返回一个新列表：

```
//pseudocode
dupes={"baz","somethingelse"} 
```

我认为使用 LINQ 将是最好的选择。但是，由于我的 LINQ 经验很差，所以我还没有完全意识到这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T20:51:33.483

`Intersect`是你想要的，它是 LINQ 的一部分。

```
dupes = foo.Intersect(bar).ToList(); 
```

确保您`System.Linq`的文件中引用了命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T20:51:52.070

你想要两个集合的“相交”。

```
dupes = foo.Intersect(bar); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T20:52:58.330

使用交集：

```
var res = lst1.Intersect(lst2); 
```

# javascript - Javascript从数字中去除小数

> ID：13848358
> 
> 赞同：0
> 
> 时间：2012-12-12T20:49:37.023
> 
> 标签：javascript, jquery, string, decimal, strip

我正在使用 Math.random 生成在 ajax 调用中传递的随机字符串。问题是生成的字符串包含一个小数，服务器将其解释为 file.ext（当然不存在）。

例如来自 http.log：

```
File does not exist: /path/to/site/foo.php&arg=123&randval=0.5678719817071954, referer: http://site/bar.php?arg=123 
```

用于生成链接的 Ajax：

```
$(document).ready(function() 
{
    $(\"#placeholder\").load(\"/foo.php?arg=123\");
    var refreshId = setInterval(function() 
    {
        $(\"#placeholder\").load('/foo.php?arg=123&randval='+ Math.random());
    }, 5000);
    $.ajaxSetup({ cache: false });
}); 
```

我想结束的是：

```
foo.php&arg=123&randval=05678719817071954 
```

`randval`除了确保我不会使用页面的缓存版本之外，不使用该参数。它可能不需要，但这是我用来设置 jquery ajax 调用的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:52:27.530

我建议代替`Math.random()`，使用：

```
(Math.random() + '').replace('.',''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:59:39.950

`Math.random()`返回一个 和 之间的值`0`，`1`要获得 和 之间的数字`0`，`max`您需要将其乘以`max`。这应该这样做：

```
Math.floor(Math.random() * 1e16) // 1e16 == 10000000000000000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:55:32.417

也许更容易和更常见......如果你不需要使用 Math.random()

```
 + (new Date()).getTime(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:55:36.773

为什么不使用`new Date().getTime()`并避免所有麻烦

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T21:02:39.283

其他答案是正确的——但我在我的代码中忽略了一个明显的类型-o。我写的链接：

```
foo.php&arg=123 
```

应该

foo.php?arg=123

```
enter code here 
```

更新后，找不到文件错误已解决。

感谢您提供有关修复数学/小数问题的建议 - 现在不需要，但知道有用。

# php - 使用 jquery 显示动态 JSON 内容

> ID：13848361
> 
> 赞同：0
> 
> 时间：2012-12-12T20:49:43.450
> 
> 标签：php, javascript, jquery, html, json

我正在通过一个示例处理从 php 页面传递的以下 json 对象：-

```
 {"book":[{"title":"Harry Potter","author":"J K. Rowling","year":"2005","price":"29.99"},{"title":"Learning XML","author":"Erik T. Ray","year":"2003","price":"39.95"}]} 
```

我知道您可以遍历并将所有数据打印到表中，如下所示：

```
$.each(data.book, function(index, book) {
                    content = '<tr><td>' + book.title + '</td>';
                    content += '<td>' + book.author + '</td>';
                    content += '<td>' + book.year + '</td>';
                    content += '<td>' + book.price + '</td></tr>';
                    $(content).appendTo("#content2");
                }); 
```

但是说 json 数据是动态的，遵循相同的结构，我该如何调整上面的代码来解决这个问题？我在想我需要某种嵌套循环。

让我感到困惑的是，对于 $.each(data.book, function(index, book) { data.book 并不总是 data.book 它们将是 data.foo 和引用 book.title 的行并不总是一样，它可能是 book.bar

任何指导最受赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:10:53.703

是的，您可以像这样在嵌套循环中执行此操作

```
var content = '';
$.each(data.book, function(index, book) {
    content += '<tr>';
    $.each(book,function(k,v){
        content += '<td>' + v + '</td>';
    });
    content += '</tr>';   
});
$(content).appendTo("#content2"); 
```

[http://jsfiddle.net/tjjQh/](http://jsfiddle.net/tjjQh/)

哦..然后使用 for in 循环

```
for (v in data) {
    $.each(data[v], function(index, book) {
        content += '<tr>';
        $.each(book, function(k, v) {
            content += '<td>' + v + '</td>';
        });
        content += '</tr>';
    });
} 
```

[http://jsfiddle.net/8YCgA/](http://jsfiddle.net/8YCgA/) ​</p>

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T20:53:33.617

您可能想查看[jQuery 模板](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-an-introduction-to-jquery-templating/)。

```
var data = [  
        { name : "John",  age : 25 },  
        { name : "Jane",  age : 49 },  
        { name : "Jim",   age : 31 },  
        { name : "Julie", age : 39 },  
        { name : "Joe",   age : 19 },  
        { name : "Jack",  age : 48 } 
```

可以表示为：

```
<li>  
    <span>{%= $i + 1 %}</span>  
    <p><strong>Name: </strong> {%= name %}</p>  
    {% if ($context.options.showAge) {  %}  
        <p><strong>Age: </strong> {%= age %}</p>  
    {% } %}  
</li> 
```

# javascript - 如何在 INPUT FIELD 而不是 SPAN 中将变量显示为总计？

> ID：13848364
> 
> 赞同：1
> 
> 时间：2012-12-12T20:50:03.220
> 
> 标签：javascript, jquery, html

我很难在总输入字段中显示变量的内容。基本上这段代码运行良好：

```
<script>
$(function() {
  $('#product-unit-val, #total-unit-sales, #number-reps').change(function() {
    var total = parseInt($("#product-unit-val").val()) *  
                parseInt($("#total-unit-sales").val()) * 
                parseInt($("#number-reps").val());
    if (!isNaN(total)) {
      $("#sales-val").html(total);
    }
  });
});
</script>

Average product unit value <input type="text" id="product-unit-val" /><br/>
Total unit sales value <input type="text" id="total-unit-sales" /><br/>
Number of reps <input type="text" id="number-reps" /><br/>
Total sales value <span id="sales-val"></span>$​​​ 
```

但是我想在输入字段中显示总值，例如：

```
<script>
$(function() {
  $('#product-unit-val, #total-unit-sales, #number-reps').change(function() {
    var total = parseInt($("#product-unit-val").val()) *  
                parseInt($("#total-unit-sales").val()) * 
                parseInt($("#number-reps").val());
    if (!isNaN(total)) {
      $("#sales-val").html(total);
    }
  });
});
</script>

Average product unit value <input type="text" id="product-unit-val" /><br/>
Total unit sales value <input type="text" id="total-unit-sales" /><br/>
Number of reps <input type="text" id="number-reps" /><br/>
Total sales value <input type ="text" id="sales-val"/>​ 
```

我错过了显而易见的事情吗？我似乎无法让这个工作。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:51:08.600

使用[val](http://api.jquery.com/val/)更改输入的值：

```
$("#sales-val").val(total); 
```

但要小心[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)，始终指定 radix ：

```
parseInt('09') == 0
parseInt('09', 10) == 9 
```

# ruby - Rails 开发模式和初始化器

> ID：13848366
> 
> 赞同：1
> 
> 时间：2012-12-12T20:50:06.823
> 
> 标签：ruby, ruby-on-rails-3

有一个类 用类似的东西`./app/models/foo.rb`初始化。当一些其他文件被修改时重新加载并且项目明显丢失。处理这个问题的首选方法是什么？`./config/initializers/foo.rb``Foo.items = YAML.load_file "foo.yml"``foo.rb`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T21:34:55.233

答案可以在[这个答案](https://stackoverflow.com/questions/8895103/how-can-i-keep-my-initializer-configuration-from-being-lost-in-development-mode#8896891)中找到。

本质上，将您的配置包装在一个 to_prepare 块中：

```
Rails.application.config.to_prepare do
  Foo.items = YAML.load_file "foo.yml"
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T01:17:20.407

我不确定正在发生的确切情况，但这里有一个猜测： 的定义是否用空的东西`Foo`初始化？`items`也许不要这样做。

如果您向我们展示一些代码，将会有所帮助。

# php - 为什么我会在此 AJAX 响应中换行？

> ID：13848369
> 
> 赞同：1
> 
> 时间：2012-12-12T20:50:12.530
> 
> 标签：php, javascript, ajax

我正在通过以下方式发送 ajax 调用：

```
var response = sendViaAjax(str,'Session/delete_From_Session_AJAX.php') ;

    alert('response:|'+response+'|') ;

    if(response == 'complete') {//returns complete if the table was not to be rewritten
        el = this ;
        while(el.tagName !== 'TR'){
            el = el.parentNode ;
            alert(el.tagName) ;
        }
        removeChildren(el) ;
        removeElement(el) ;
    }else if(response!= 'complete') {
        alert(response+' is not equal to complete') ;
        parseHTMLStr(response,window.cur_tbl,1,0,0) ;       
    } 
```

来自 delete_Session... 的相关代码是

```
if( isset($_POST['REWRITE']) ) {
    include("return_Tabular_Data.php") ;
}else{
    echo 'complete' ;
} 
```

我从格式化字符串中得到的警报是：

```
complete
         is not equal to complete 
```

必须添加一些东西，但我找不到在哪里。我广泛使用此功能，从未遇到过类似问题。

我在 sendViaAjax 中修改响应的唯一地方是

```
var RESPONSE = xmlhttp.responseText ;
RESPONSE = RESPONSE.replace(/^\s+/, '');
return RESPONSE ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:52:07.000

`?>`服务器端结束标记后是否有空格？

理想情况下，在使用 AJAX 时，您希望`exit`特别指定何时结束输出。或者你可以不放`?>`，因为它在文件末尾是可选的。

# git - 合并从特性到主分支的更改，然后在不将它们恢复到特性分支的情况下还原一些

> ID：13848383
> 
> 赞同：0
> 
> 时间：2012-12-12T20:51:03.093
> 
> 标签：git, merge

我有一个主分支，它合并到功能分支。现在已经有好几次了，我开始在功能分支中做一些事情，然后意识到我想要在主分支中进行部分更改。当从主运行合并时，有没有办法将这些更改的一部分合并到主控而不丢失另一部分？

假设我在功能分支中进行了这些更改：

```
Line A
Line B
Line C 
```

现在我将其与cherry-pick 合并为master，但`Line B`特定于该功能，因此我将其删除。但是随后从 master 合并到 feature 分支运行，并且 feature 分支最终丢失了`Line B`。

避免这种情况的正确方法是什么？（不提交）会`-n`救我吗？我不介意在从 master 到 feature 运行合并时发生冲突，但是获得它们的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:02:41.183

一种方法是在包含的*功能*中生成提交

```
Line A
Line C 
```

并将*master*合并/重新定位到该提交上，然后`Line B`存在于您的工作目录中/稍后在*feature*中提交。

如果解释不是很清楚，请道歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:15:40.887

您可以更改分支策略以不将 master 中的更改合并到您的功能分支中。创建一个额外的开发分支，在其中进行“常规”更改（您现在在 master 上所做的事情并合并到功能中）。然后，每当您希望将更改向上移动到 master 中时，以交互方式将它们合并或 rebase 到 master 中，只带走您想要的。为了让开发更新进入特性分支，将开发合并或变基到特性中，但不要管主。这样，如果您在 master.xml 中遗漏了某些功能的更改，则无关紧要。

# android - Android：我可以知道应用程序是否正在使用 AlarmMager 运行

> ID：13848389
> 
> 赞同：0
> 
> 时间：2012-12-12T20:51:12.167
> 
> 标签：android, android-activity, alarmmanager, android-package-managers

是否有任何可能的解决方案知道某些应用程序正在前台运行`AlarmManager`？

基本上我的问题是，`importance`每个进程都有一个参数，就像`procInfos.get(i).importance==100`在 android 中一样，如果这个变量是 100，则意味着该应用程序的主要活动目前处于前台，如果它的值为 400，则意味着它在后台。 .所以我的问题是我能知道这个变量值的变化对于`AlarmManager`在android中使用的任何特定应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:57:24.480

> 在 android 中，如果此变量为 100，则表示该应用程序的主要活动目前处于前台，如果其值为 400，则表示其在后台

进程可以通过前台活动*或*前台服务（通过`startForeground()`）来获得前台优先级。AFAIK，两者都会有`IMPORTANCE_FOREGROUND`。

> 所以我的问题是我能否知道在 android 中使用 AlarmManager 的任何特定应用程序的该变量值的变化？

嗯，`AlarmManager`当然可以得到正在运行的进程信息，如果这就是你的意思。但是，正在运行的进程信息只是您请求信息时状态的快照——从那时起，进程的重要性很可能已经发生了变化，即使它只是在一毫秒前。

# ssrs-2008 - Sparkline 基于 Expression 使用自定义代码

> ID：13848392
> 
> 赞同：1
> 
> 时间：2012-12-12T20:51:21.063
> 
> 标签：ssrs-2008, reporting-services

我有一个 SSRS 报告，它报告按月分组的销售额。此报告中的一列是计算字段，它采用 2 个值并将它们传递给为此报告定义的自定义代码例程。使用以下代码填充的文本框：

```
=Code.DivideBy(ReportItems!textbox21.Value, ReportItems!EarnedIncome1.Value) 
```

此自定义代码所做的只是将第一个参数除以第二个参数（在这种情况下，无论 textbox21/EarnedIncome 中的内容是什么）。响应是它们以百分比的形式显示在屏幕上。

以下是报告的示例：

[1 http://www.propelpos.com/images/screenshot002.jpg](http://www.propelpos.com/images/screenshot002.jpg)

这很好用。我们现在要做的是绘制 BDX 损失率列中的百分比，该列由上面的公式计算得出（将损失除以赚取的溢价）

当我尝试复制图表数据中的表达式并将类别组设置为 PeriodYearMonth （与所有其他人相同）时，我得到一条直线。

我不知道下一步该去哪里。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:20:58.573

我同意@Neil。您还可以在数据集属性中添加计算字段。看看下面的屏幕。您可以设置表达式来计算折线图的数据。

![在此处输入图像描述](../Images/7ee2eac7ee2d43449317cb609f95111c.png)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:09:11.927

我建议在您的查询中进行计算，然后在 SSRS 中使用该计算列。如果您需要帮助弄清楚如何做到这一点，请告诉我。

# ruby - Sinatra 的命令行参数

> ID：13848400
> 
> 赞同：4
> 
> 时间：2012-12-12T20:51:51.240
> 
> 标签：ruby, sinatra, command-line-arguments

我有一个`Sinatra`正在创建的程序，我希望能够在启动它时将命令行参数传递给这个应用程序。我遇到的问题是我不知道该怎么做。我试过`Trollop`了，看着`OptParser`。`Trollop`似乎无法使用，`Sinatra`因为`OptParser`它似乎是“默认”解析器`Sinatra`。这是真的？如果是这样，我如何自定义启动应用程序时接受的参数类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:47:04.997

```
ruby app.rb hello
# app.rb
 require 'sinatra'

get '/' do
  ARGV[0]
end 
```

现在，当我访问`localhost:4567`（Thin 托管我的 sinatra 应用程序的地方）时，我会看到一个打招呼的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T18:48:52.060

或者，您可以使用环境变量。

从这里借来的例子：[https ://gist.github.com/benlovell/351962](https://gist.github.com/benlovell/351962)

```
require 'rubygems'
require 'sinatra'

get '/' do
  ENV['envvar']
end 
```

然后运行：

```
envvar=something ruby app.rb 
```

# asp.net - ASP.NET MVC3 在 ajax 请求上创建新会话

> ID：13848406
> 
> 赞同：2
> 
> 时间：2012-12-12T20:52:12.117
> 
> 标签：asp.net, asp.net-mvc-3, session

好吧，我终于不得不在这里创建一个帐户。多年来一直在使用它，并且经常在这里找到我的答案，但这次不是。好吧，我实际上发现了很多有类似问题的人，但他们的解决方案都没有帮助我。

我已经开始了一个新的 MVC3 项目，所以到目前为止它非常简单。我以前做过一些，所以我有点知道我在做什么（但不完全清楚，很明显，为什么还要在这里;-)

我的问题显然是一个相当普遍的问题：一个请求启动一个新的会话，即使用户已经有一个。

最令人沮丧的部分是，它在我的托管服务上完美运行，但在本地主机上被破坏了。

我做了很多事情来解决这个问题：

*   我的计算机名称中没有下划线。
*   Session 包含自定义数据（该错误仅在用户登录后发生）。
*   我在 web.config 中添加了以下内容（hmpf，猜你必须假设 gt / lt 字符）：

```
    http协议
      自定义标题
        清除 /
        添加名称=“访问控制允许来源”值=“*”/
      /customHeaders
    /http协议

```

*   这也是：

    ```
    模块 runAllManagedModulesForAllRequests="false"/
    ```

*   使用 InProc sessionstate，我尝试过使用“cookieless”的真假。

*   我的主机文件不包含任何关于 localhost 的内容。

嗯。看看这个列表，我确定我遗漏了一些。有些也是故意的，因为他们是绝望的（是的，甚至比上面的还要多），并且出生于绝望。

如前所述，这特别令人不安，因为它适用于我的主机 - 我需要在开发服务器（VS2010）上调整一些配置设置吗？

我一直在假设问题是由于跨域安全引起的（它认为我来自另一个域）。

失败发生在这个请求上：

```
url: 'http://localhost:50396/moody/changeBuilding/' + elem.selectedIndex,  
```

它是我与 jQuery.ajax 函数一起使用的选项数组的一部分。

我在上传到主机时更改了域，但只有 localhost:port 部分，应用程序中的其他所有内容都是相同的。

我已经为此撞了 2 天了，并且会错过我的考试 :-( 不过，我决心把这 6 英尺深埋在地下。

我将非常感谢任何和所有的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:41:01.173

您是否尝试过使用[提琴手](http://www.fiddler2.com/fiddler2/)之类的东西来确保会话 cookie 是在 AJAX 请求中发送的。如果域相同但它正在检查工作，则应该发送它。

编辑：这篇关于更改端口的[SO 帖子也值得一读。](https://stackoverflow.com/questions/1612177/are-http-cookies-port-specific)

编辑：鉴于 Charlino 评论中的新信息（以及其中进行的出色侦探工作），如果问题仅在您的本地开发机器上，那么解决 localhost/127.0.0.1 问题的最简单方法是手动更改浏览器 url从 127.0.0.1:50396 到 localhost:50396，再次登录以获取新的 cookie，然后你就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:43:18.313

> 我在上传到主机时更改了域，但只有 localhost:port 部分，应用程序中的其他所有内容都是相同的。

阅读以上内容，我认为会话 cookie 没有被发送，因为您正在更改域。

让我们坐下来想想会话是如何工作的。基本上 ASP.NET 包含会话及其数据的集合。当每个请求进来时，ASP.NET 必须将该请求映射到现有会话或为它们创建一个新会话。

那么 ASP.NET 是如何知道每个传入请求属于哪个会话的呢？或者知道它需要创建一个新请求？知道这一点的唯一方法是请求是否包含一些信息，一个“*密钥*”，它告诉 ASP.NET 给该请求哪个会话......或者在没有这个*“密钥”*的情况下，创建一个新会话。

请求如何发送这个*“密钥”*？通过cookies。

因此，如果您更改域，cookie 将不会被发送......因此，ASP.NET 将为请求创建一个新会话。

# c++ - C++ 栈在 Windows 上行走

> ID：13848412
> 
> 赞同：2
> 
> 时间：2012-12-12T20:52:40.183
> 
> 标签：c++, winapi, memory-management, stack, callstack

我正在使用非常 .NET 风格的方法为 C++ 构建内存管理器。在这样做时，我需要知道哪些对象被认为是可达的；如果可到达对象具有相关对象的句柄，则该对象被认为是可到达的。所以这就提出了哪些对象是我们搜索的根的问题？答案是这些“eve”对象在堆栈上，无论是以托管对象句柄的形式，还是本身具有托管对象句柄的作用域本地对象的实例的形式。

我已经阅读了一些关于这方面的文章，还查看了 MSDN 上关于 Win32 API 中的 StackWalk 方法的实现细节。

一如既往地非常感谢任何帮助。并且请不要建议不要制作内存管理器，或者建议诸如智能指针之类的替代方案。我完全明白我在做什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:59:18.523

您的需求有点类似于我目前正在处理的一个小项目，但我的目标不是制作内存管理器，我的目标是检测 dmalloc（以及它所在的调试模式长时间运行的应用程序）正在运行）能够定期停止执行并扫描内存以查找没有引用的堆分配。有点像“愚蠢”的垃圾收集器，但不是以释放内存为目标；相反，目的是记录泄漏的分配以供以后分析（以及在分配时捕获的堆栈跟踪，我已经将其添加到 dmalloc）。请注意，作为通用内存管理器的垃圾收集器，这将是一个非常低效的过程，并且需要“很长时间”才能运行（我还没有完成，

无论如何，我假设您的内存管理器将是您应用程序中堆内存的唯一来源？并且您系统中的线程在完全共享内存环境中运行，其中没有线程有任何内存，包括堆栈空间和线程本地存储空间，这是其他线程无法看到的？如果是这样的话...

我相信只有四类内存，您可以在其中找到指向堆分配的指针：

1.  在每个线程的调用栈上
2.  在堆分配本身内
3.  在静态分配的可写内存中（.bss & .data/.sdata，但不是 .rdata/.rodata）
4.  在每个线程的线程本地存储空间中

您已经知道指向堆分配的指针可能出现在堆栈上。指向分配的指针也可以（可以*代替*) 存储在堆对象本身中，甚至不存储在堆栈中。您的问题表明您可能希望将堆栈用作垃圾收集器搜索的“根”；我认为这意味着您希望能够将堆栈上的指针向外跟踪到其他分配，通过内存从一个对象搜索到另一个对象，直到您遍历内存中的所有对象并找到指向所有分配的所有指针。“根”指针也可能存在于静态分配的对象中，可以直接引用它，甚至没有指向堆栈上此类对象的指针，因此您不能假设所有分配都可以从您在堆。此外，不幸的是，对于 C++，除非您能够知道每个分配的结构（如果没有编译器的帮助，您将不会知道），你必须假设任何位置都可能是一个指针。因此，您必须扫描这四类内存中的每一个，寻找指向所有现有分配的潜在指针，如果您在内存中找到与分配地址匹配的值，则用“可能仍在使用”标志标记每一个，不管它是否真的是一个指针。当您扫描内存时，在每个字节位置（或在每个字节位置可被 sizeof(void*) 整除，如果您知道您的平台不能有未对齐地址的指针），您将不得不搜索分配列表查看该值是否在您的分配列表中。如果您在内存中找到与分配地址匹配的值，则使用“可能仍在使用”标记每个标记，无论它实际上是否是指针。当您扫描内存时，在每个字节位置（或在每个字节位置可被 sizeof(void*) 整除，如果您知道您的平台不能有未对齐地址的指针），您将不得不搜索分配列表查看该值是否在您的分配列表中。如果您在内存中找到与分配地址匹配的值，则使用“可能仍在使用”标记每个标记，无论它实际上是否是指针。当您扫描内存时，在每个字节位置（或在每个字节位置可被 sizeof(void*) 整除，如果您知道您的平台不能有未对齐地址的指针），您将不得不搜索分配列表查看该值是否在您的分配列表中。

由于您确信自己知道自己在做什么，因此您的内存管理器可能会在平衡的树结构（可能是红黑树或安德森树）中跟踪这些分配，从而为您提供 O(log n) 插入和查找这些分配，但是导航这些树的比例常数会真正降低垃圾收集器的性能。在进行垃圾收集扫描之前，您需要将树的分配指针按顺序（即使用中序遍历升序或降序）复制到一个平坦的连续缓冲区（即“数组”）中。我建议`void*`每个分配地址的数组和一个单独的位数组（不是`bool`数组），每个分配一个位，初始化为全零，如果您发现一个分配的对应位被设置为 1，则它的潜在引用。这仍然会在您扫描垃圾收集时为您提供 O(log n) 查找（使用二进制搜索），但您的查找具有更易于管理的比例常数；此外，这种更紧凑的数据结构往往比平衡树具有更好的缓存命中性能。

现在我将讨论您必须扫描的三类内存中的每一个：

*   每个线程的调用栈

为此，您必须能够向线程管理器查询每个线程堆栈的顶部和底部。如果您只能获取每个线程的当前堆栈指针，那么您可以使用“回溯”API 来获取该堆栈上的函数返回地址列表。从那里，您可以向后扫描每个堆栈的基数（您不知道），按顺序勾选每个返回地址，直到到达最后一个返回地址，然后您就可以找到堆栈基数（或足够接近） . 对于“当前线程”，请确保不包含任何与您的内存管理器相关的堆栈帧；即，备份一些堆栈帧并忽略与您的垃圾收集器相关的那些，否则您可能会在垃圾收集器的局部变量中找到泄漏分配的地址并将它们误认为

*   在堆分配本身内

堆对象可以相互引用，并且您可以拥有一个泄漏对象网络，这些对象都相互引用，但是作为一个组，它们被泄漏了。您不想看到它们彼此的指针并将它们视为“正在使用”，因此您必须小心处理这些......并且最后。完成所有其他类别后，您可以折叠/拆分`void*`分配地址的平面数组，制作单独的“考虑使用中”分配和“尚未验证”分配列表。扫描“考虑使用中”的分配，寻找指向仍在“尚未验证”列表中的分配的潜在指针。当您找到任何内容时，将它们从“尚未验证”列表移到“考虑使用中”列表的末尾，以便您

*   在静态分配的可写内存中（.bss & .data/.sdata，但不是 .rdata/.rodata）

为此，您需要从链接器获取符号到每个部分的开始和结束（或长度）。如果此类符号尚不存在，或者您无法从平台 API 获取该信息，则需要获取链接器命令脚本（链接器脚本）并对其进行修改以将全局符号添加和初始化到起始地址和结束每个部分的地址（或长度）。.bss 部分包含未初始化的全局、文件范围和类静态数据成员。.data/.sdata 部分包含非常量预初始化全局、文件范围和类静态数据成员。您无需担心 .rdata/.rodata 部分，因为您的程序不会将堆分配地址写入静态 const 数据。

*   在每个线程的线程本地存储空间中

为此，您必须能够向线程管理器查询每个线程的线程本地存储空间，否则每个线程的启动部分必须将其线程本地存储添加到线程列表中-应用程序的本地空间，并在线程退出时将其删除。

* * *

如果您仍然参与并想要这样做，那么现在您可能已经意识到这是一个比您最初想象的更大的项目。让我知道事情的后续！

# c# - DockPanelSuite 的 DockState 和 AutoHide

> ID：13848416
> 
> 赞同：4
> 
> 时间：2012-12-12T20:52:46.063
> 
> 标签：c#, winforms, dockpanel-suite

使用 DockState 和 AutoHide，我正在寻找以下内容：

1.  查明 DockContent 是否处于自动隐藏模式
2.  能够在“常规”和自动隐藏模式之间切换。
3.  当 AutoHide Dock 进入视野时触发事件。
4.  当 AutoHide 停靠栏“离开”并且现在停靠回其选项卡时触发事件。

回答维基：

1.  IsAutoHide - 得到：

    ```
    private WeifenLuo.WinFormsUI.Docking.DockState[] AutoHideStates = new WeifenLuo.WinFormsUI.Docking.DockState[] {
        WeifenLuo.WinFormsUI.Docking.DockState.DockBottomAutoHide,
        WeifenLuo.WinFormsUI.Docking.DockState.DockLeftAutoHide,
        WeifenLuo.WinFormsUI.Docking.DockState.DockRightAutoHide,
        WeifenLuo.WinFormsUI.Docking.DockState.DockTopAutoHide };

    public bool IsAutoHide { get { return AutoHideStates.Contains(DockContent.DockState); } } 
    ```

2.  IsAutoHide - 设置：还没有代码 - 基本上遍历模式或使用可互换模式的字典（即 DockBottomAutoHide 到 DockBottom）

3.  我不知道，但这[看起来](https://stackoverflow.com/questions/12956147/dockpanel-suite-dockcontent-visibility)很有趣，可能有这个想法。

4.  我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:51:49.807

1 是实现此目的的一种不错的方法。该库有一个内部方法，`DockHelper.IsDockStateAutoHide()`它基本上做同样的事情。这实际上应该成为公共扩展方法并作为库的一部分包含在内。

2 你的解决方案很好。

3 和 4 可能最好作为 : 中的新事件来`DockPanel`实现`ActiveAutoHideContentChanged`。然后，您可以自行跟踪最后一个自动隐藏内容，当引发事件时，如果新值不为空，您知道 #3 正在发生，如果最后一个已知值不为空，则 #4 正在发生。

随意在[GitHub 上](https://github.com/dockpanelsuite/dockpanelsuite/issues)打开请求以添加事件。

# silverlight - 从列表框中获取项目文本

> ID：13848420
> 
> 赞同：0
> 
> 时间：2012-12-12T20:53:06.970
> 
> 标签：silverlight, listbox, listboxitem

我正在制作一个`UserControl`使用`ListBox`. 在某些时候，我需要在`ListBox`. 我会走的“正常”方式是：

```
var selected = (CustomObject)listBox.SelectedItem;
var str = selected.PropertyShowingInListBox; 
```

但由于某些原因，`UserControl`我无法投射`SelectedItem`. 所以我的下一个机会是使用`SelectedItem`as`object`和`DisplayMemberPath`. 像这样：

```
var selected = listBox.SelectedItem;
var str = selected.GetType().GetProperty(listBox.DisplayMemberPath).GetValue(selected, null).ToString(); 
```

但这不是最好的。我有什么方法可以使用吗？

# ruby-on-rails - rvm 在没有 root 权限的情况下不会安装在 centos 中

> ID：13848422
> 
> 赞同：1
> 
> 时间：2012-12-12T20:53:14.733
> 
> 标签：ruby-on-rails, ruby, rvm

我尝试使用没有 root 权限的部署者用户安装 RVM，但出现此错误：

```
bash: line 439: ./scripts/install: Permission denied 
```

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:47:52.173

我试图在使用 noexec 选项安装的文件夹中安装 rvm。

没有此选项的挂载分区有效！

# android - 通过 Intent 打开电子邮件客户端（但不发送消息）

> ID：13848423
> 
> 赞同：27
> 
> 时间：2012-12-12T20:53:18.197
> 
> 标签：android, android-intent

有没有办法以编程方式打开电子邮件客户端，而无需强制发送消息？我只是希望该应用程序让用户打开他的电子邮件客户端以进行电子邮件检查:)

```
 Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType("message/rfc822");
    startActivity(Intent.createChooser(intent, "")); 
```

此代码有效，但它强制用户发送新消息。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-12T21:31:32.687

```
 Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_APP_EMAIL);
    startActivity(intent);  
    startActivity(Intent.createChooser(intent, getString(R.string.ChoseEmailClient))); 
```

这有点奏效。但它为我打开了 Gmail，即使我有其他电子邮件客户端

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-15T12:12:01.593

此代码将显示一个包含电子邮件客户端列表的对话框。单击一个将启动应用程序：

```
try {
    List<String> emailClientNames = new ArrayList<String>();
    final List<String> emailClientPackageNames = new ArrayList<String>();
    // finding list of email clients that support send email
    Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts(
        "mailto", "abc@gmail.com", null));
    PackageManager pkgManager = AppController.getContext().getPackageManager();
    List<ResolveInfo> packages = pkgManager.queryIntentActivities(intent, 0);
    if (!packages.isEmpty()) {
        for (ResolveInfo resolveInfo : packages) {
            // finding the package name
            String packageName = resolveInfo.activityInfo.packageName;
            emailClientNames.add(resolveInfo.loadLabel(getPackageManager()).toString());
            emailClientPackageNames.add(packageName);
        }
        // a selection dialog  for the email clients
        AlertDialog.Builder builder = new AlertDialog.Builder(MyActivity.this);
        builder.setTitle("Select email client");
        builder.setItems(emailClientNames.toArray(new String[]{}), new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            // on click we launch the right package
            Intent intent = getPackageManager().getLaunchIntentForPackage(emailClientPackageNames.get(which));
                startActivity(intent);
            }
        });
        AlertDialog dialog = builder.create();
        dialog.show();
    }
} catch (ActivityNotFoundException e) {
    // Show error message
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-11-15T15:36:17.130

在 Kotlin 中，但此版本为用户创建了一个选择器来选择要使用的电子邮件应用程序。除了使用`LabeledIntent`.

```
fun emailAppIntent(): Intent? {
    val emailIntent = Intent(Intent.ACTION_VIEW, Uri.parse("mailto:"))
    val packageManager = appLaunchContext.packageManager

    val activitiesHandlingEmails = packageManager.queryIntentActivities(emailIntent, 0)
    if (activitiesHandlingEmails.isNotEmpty()) {
        // use the first email package to create the chooserIntent
        val firstEmailPackageName = activitiesHandlingEmails.first().activityInfo.packageName
        val firstEmailInboxIntent = packageManager.getLaunchIntentForPackage(firstEmailPackageName)
        val emailAppChooserIntent = Intent.createChooser(firstEmailInboxIntent, "")

        // created UI for other email packages and add them to the chooser
        val emailInboxIntents = mutableListOf<LabeledIntent>()
        for (i in 1 until activitiesHandlingEmails.size) {
            val activityHandlingEmail = activitiesHandlingEmails[i]
            val packageName = activityHandlingEmail.activityInfo.packageName
            val intent = packageManager.getLaunchIntentForPackage(packageName)
            emailInboxIntents.add(
                LabeledIntent(
                    intent,
                    packageName,
                    activityHandlingEmail.loadLabel(packageManager),
                    activityHandlingEmail.icon
                )
            )
        }
        val extraEmailInboxIntents = emailInboxIntents.toTypedArray()
        return emailAppChooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, extraEmailInboxIntents)
    } else {
        return null
    }
} 
```

..然后稍后调用它

```
val emailChooserIntent = emailAppIntent()

if (emailChooserIntent != null) {
    startActivity(emailAppIntent())
} 
```

或根据需要处理 null 。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-10T07:08:44.483

我认为您应该替换`Intent.ACTION_SEND`为`Intent.ACTION_VIEW`，
我相信这会起作用，因为这将提示支持 MIME 类型的应用程序列表，`"message/rfc822"`因此它将在您的设备中包含您的默认电子邮件客户端，而不是 gmail 应用程序。

这段代码怎么样：

```
final Intent emailLauncher = new Intent(Intent.ACTION_VIEW);
emailLauncher.setType("message/rfc822");
try{
       startActivity(emailLauncher);
}catch(ActivityNotFoundException e){

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-09T10:57:10.253

Kotlin 中更现代的解决方案

```
 fun tryVerifyMail() {
        try {
            val intents: List<Intent> = (packageManager.queryIntentActivities(Intent(
                Intent.ACTION_SENDTO, Uri.fromParts(
                    "mailto", "lowhillgamesoy@gmail.com", null
                )
            ), 0) + packageManager.queryIntentActivities(Intent(Intent.ACTION_VIEW).also {
                it.type = "message/rfc822"
            }, 0)).mapNotNull {
                it.activityInfo.packageName
            }.toSet().mapNotNull {
                packageManager.getLaunchIntentForPackage(it)
            }

            if(intents.size > 0) {
                startActivityForResult(Intent.createChooser(intents.first(), getString(R.string.verify_mail)).also {
                    if(intents.size > 1) {
                        it.putExtra(Intent.EXTRA_INITIAL_INTENTS, intents.subList(1, intents.size - 1).toTypedArray())
                    }
                }, OPEN_MAIL_REQUEST_CODE)
            } else {
                Toast.makeText(this, "Verify your e-mail by clicking the link in your e-mail inbox.", Toast.LENGTH_LONG).show()
            }

        } catch (e: ActivityNotFoundException) {
            // Show error message
            e.printStackTrace()
        }
    } 
```

这也会选择仅支持 ACTION_SEND 和 ACTION_VIEW 的邮件客户端并删除重复项。

# java - 在 Eclipse 中使用 WindowBuilder 生成 JDialog 惰性样式代码

> ID：13848424
> 
> 赞同：0
> 
> 时间：2012-12-12T20:53:31.220
> 
> 标签：java, swing, jdialog, windowbuilder

有没有办法使用 Eclipse WindowBuilder 创建 JDialogs 并以惰性风格自动生成代码？当我在 Preferences > WindowBuilder > Swing > Code generation 中选择 Lazy 时，在 JFrames 中我得到所有组件的惰性样式代码。但是，当我创建 JDialog 时，代码并不懒惰 - 它看起来像这样（注意 OK 和 Cancel 按钮的部分）：

```
public class FactsDialog extends JDialog {

    private final JPanel contentPanel = new JPanel();

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        try {
            FactsDialog dialog = new FactsDialog();
            dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            dialog.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the dialog.
     */
    public FactsDialog() {
        setBounds(100, 100, 450, 300);
        getContentPane().setLayout(new BorderLayout());
        contentPanel.setLayout(new FlowLayout());
        contentPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
        getContentPane().add(contentPanel, BorderLayout.CENTER);
        {
            JPanel buttonPane = new JPanel();
            buttonPane.setLayout(new FlowLayout(FlowLayout.RIGHT));
            getContentPane().add(buttonPane, BorderLayout.SOUTH);
            {
                JButton okButton = new JButton("OK");
                okButton.setActionCommand("OK");
                buttonPane.add(okButton);
                getRootPane().setDefaultButton(okButton);
            }
            {
                JButton cancelButton = new JButton("Cancel");
                cancelButton.setActionCommand("Cancel");
                buttonPane.add(cancelButton);
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T14:48:30.920

当您开始通过 WindowBuider 创建 JDialog 时，取消选中创建向导（文件>新建>其他>窗口构建器> JDialog）上的“使用确定和取消按钮生成 JDialog”。

# vim - 有没有办法在 VIM 中环绕窗口导航

> ID：13848429
> 
> 赞同：9
> 
> 时间：2012-12-12T20:53:42.700
> 
> 标签：vim, macvim, nerdtree

我想要它，以便`Ctrl-W``k`从最右边的窗口输入将聚焦在 VIM 中最左边的窗口。显然，它可以方便地在各个方向工作。

我的主要动机是与 NERDTree 一起使用。我通常有以下设置：

```
|----------|----------|-----------|
|          |          |           |
| NERDTree |   File1  |   File2   |
|          |          |           |
|          |----------|-----------|
|          |          |           |
|          |   File3  |   File4   |
|          |          |           |
|----------|----------|-----------| 
```

如果我想在`File4`当前必须键入的同一窗口中打开一个新文件，`2``Ctrl-W``j`并且使用`Ctrl-W``k`.

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T08:02:47.630

You'd have to override the default commands in your `$HOME/.vimrc` with your own mappings that include this extra logic. When the normal move doesn't change the window any more (i.e. we're at the border already), jump to the other side.

```
"
" Wrap window-move-cursor
"
function! s:GotoNextWindow( direction, count )
  let l:prevWinNr = winnr()
  execute a:count . 'wincmd' a:direction
  return winnr() != l:prevWinNr
endfunction

function! s:JumpWithWrap( direction, opposite )
  if ! s:GotoNextWindow(a:direction, v:count1)
    call s:GotoNextWindow(a:opposite, 999)
  endif
endfunction

nnoremap <silent> <C-w>h :<C-u>call <SID>JumpWithWrap('h', 'l')<CR>
nnoremap <silent> <C-w>j :<C-u>call <SID>JumpWithWrap('j', 'k')<CR>
nnoremap <silent> <C-w>k :<C-u>call <SID>JumpWithWrap('k', 'j')<CR>
nnoremap <silent> <C-w>l :<C-u>call <SID>JumpWithWrap('l', 'h')<CR>
nnoremap <silent> <C-w><Left> :<C-u>call <SID>JumpWithWrap('h', 'l')<CR>
nnoremap <silent> <C-w><Down> :<C-u>call <SID>JumpWithWrap('j', 'k')<CR>
nnoremap <silent> <C-w><Up> :<C-u>call <SID>JumpWithWrap('k', 'j')<CR>
nnoremap <silent> <C-w><Right> :<C-u>call <SID>JumpWithWrap('l', 'h')<CR> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:42:19.693

一个可以使用

```
<C-w>w 
```

和

```
<C-w>W 
```

分别向右/向下和向左/向上循环浏览所有窗口。两个命令都会环绕，所以`<C-w>w`会在某个时候出现在左上角，在某个时候`<C-w>W`会出现在右下角。

见`:h window-move-cursor`。

或者简单地使用`<C-w>b`which 直接进入您的目标窗口。

# bash - Bash 脚本文件描述符回显

> ID：13848431
> 
> 赞同：2
> 
> 时间：2012-12-12T20:53:53.510
> 
> 标签：bash, shell, sh, file-descriptor

```
echo: write error: Bad file descriptor 
```

在我的代码中（通过几个 bash 脚本）我遇到了这个错误。当我尝试写入或附加到（一个）文件时会发生这种情况。

```
LOGRUN_SOM_MUT_ANA=/Volumes/.../logRUN_SOMATIC_MUT_ANA 
```

我对这个变量使用绝对路径，并且对每个被调用的脚本使用相同的文件。该文件有一堆像这样的行。我使用导入“。” 在每个脚本上获取它。

```
echo "debug level set for $DEBUG_LEVEL" >> ${LOGRUN_SOM_MUT_ANA} 
```

值得注意：

*   它通常发生在我第一次写它之后。
*   我读到文件“关闭”自己并产生这个错误
*   我在一个脚本中使用上述行，然后调用另一个脚本。

我很乐意澄清任何事情。

![启动脚本](../Images/8ff4b699ef7aa172c42191b2f3d0f322.png)

![错误](../Images/44df7d951cc9eace432b57054cf862c8.png)

![第二个脚本，从第一个调用](../Images/e29bf8cf6c302b099883535a758cab26.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-06T15:35:50.933

对于在真正的 Linux 下运行的脚本中在 cygwin 下遇到同样愚蠢错误的其他人：不知道为什么，但它可能会发生：

1) 在脚本中出现语法错误之后

2）因为 cygwin bash 希望你替换`./myScript.sh`为`. ./myScript.sh`（其中 dot 是 bash 样式的 include 指令，又名`source`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:05:52.833

我想通了，我使用的拇指驱动器是加密的。它输出到 /tmp/ 所以这是一个许可的事情。那就是问题所在！

# jquery - 如何在 jquery flot ticks 中添加新行

> ID：13848436
> 
> 赞同：5
> 
> 时间：2012-12-12T20:54:41.203
> 
> 标签：jquery, flot, timeserieschart

我正在使用[JQuery Flot](http://www.flotcharts.org/)创建一些图表。到目前为止，我已经设法使用 tickformatter 格式化我的 Ticks

该图如下所示：http: [//i1358.photobucket.com/albums/q779/Angel_Ruiz_Morales/Capture.gif](http://i1358.photobucket.com/albums/q779/Angel_Ruiz_Morales/Capture.gif)

我现在遇到的唯一问题是我希望刻度显示如下：今天\n{TIME}

我尝试添加 \n 字符并看到它附加，但由于某种原因，flot 仍然显示 Today {TIME} 内联而不是单独的行。

有谁知道引入新产品线的方法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T16:12:21.053

您需要使用 a`<br>`而不是`\n`. 刻度标签是 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T00:34:36.233

```
 timeformat: "%m/%d/%y <br> %H:%M:%S" 
```

一个工作示例：http: [//jsfiddle.net/72u66r0m/](http://jsfiddle.net/72u66r0m/)

# php - 用户表是否应该与网站内容位于不同的数据库中？

> ID：13848437
> 
> 赞同：3
> 
> 时间：2012-12-12T20:54:48.173
> 
> 标签：php, mysql, database, security, login

抱歉，如果以前有人问过这个问题，但我做了一些搜索，但无法找到我的问题的答案。

我将我的网站内容存储在 MySQL 数据库中（我们称之为`content`），我需要为我的网站编写一个简单的登录系统。所以，我需要创建某种`users`包含用户名、密码、权限等的表，而我想知道我是否应该在我的`content`数据库中将它作为一个新表，或者它是否会更安全它存储在一个新的数据库中？将它放在第二个数据库中的缺点是我将不得不使用两个数据库连接而不是一个。

也许这是一个愚蠢的问题，但我感谢您的意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:56:37.050

您不需要使用不同的数据库。当您获得具有完全不同目的的数据时，这更加保留，例如，公司 A 有一个数据库，而公司 B 有一个数据库。

请注意，简单地拥有两个不同的数据库并不**需要**两个不同的数据库连接来访问。只要您登录数据库的用户 ID 具有适当的访问权限，您就可以执行以下操作：

```
SELECT onedatabase.table.field, someotherdatabase.table.field
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:57:26.357

将敏感信息移动到另一个数据库是一种很好的[深度防御](http://en.wikipedia.org/wiki/Defence_in_depth)策略，因为它限制了 SQL 注入的影响。这不符合隔离和计划失败的原则。这是保护敏感医疗或财务信息的常见做法。通常这些独立的数据库会更进一步，将信息以加密状态存储。

MySQL 下的 SQL Injection 非常有限，您无法堆叠查询（例如：）`'; drop table ...`，并且没有 MySQL 的文件权限您无法获得 shell。剩下的唯一有用的是使用`union select`或子选择获取凭据以访问其他表或数据库。只要您拥有单独的用户帐户和单独的权限，攻击者就必须在访问敏感数据库的查询中找到 SQL 注入，从而**减少您的攻击面**。无法通过 SQL 注入访问敏感信息使得这种攻击**变得不那么有用**。

此外，[您应该使用参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:32:20.493

是个好主意。出于安全原因，最好不要让用户登录。一个想法是拥有一个您控制的中央管理员帐户，然后让用户通过邮件将他们的内容发送给您。这样，您可以确定没有其他人可以访问。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-12T20:56:26.197

正如您所说，如果要执行此操作，您需要维护多个数据库连接。尽管对数据库进行沙箱化是一个不错的想法，但 99% 的具有用户注册的数据库驱动的网站将存储用户的内容。

# python - PyQT4 和 QPixmap：加载大小为零的图像？

> ID：13848442
> 
> 赞同：1
> 
> 时间：2012-12-12T20:55:05.613
> 
> 标签：python, image, pyqt4, qpixmap

我对 PyQt4 感到困惑。我在python2.6上尝试了以下步骤：

```
In [1]: from PyQt4 import QtGui

In [2]: import sys

In [3]: app = QtGui.QApplication(sys.argv)

In [4]: pix = QtGui.QPixmap("P1010001.JPG")

In [5]: pix.width(), pix.height()
Out[5]: (0, 0) 
```

为什么`width`和`height`显示为零？图像存在并且很好。这完全违反直觉，我不期望 python 做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:30:27.370

PyQt 在这里和那里添加了一些语法糖，以使事情更加 Pythonic。但它主要是围绕 Qt（这是一个 C++ 库）的一个相当薄的包装器——因此期望 PyQt*总是*以 Python 程序员直观的方式运行是错误的。

我想大多数 Python 程序员可能希望 QPixmap 在设置不存在的路径时引发错误。但是 Qt 没有这样做，在这种情况下，PyQt 也没有。相反，您可以使用以下方法检查您是否拥有有效的像素图：

```
pix.isNull() 
```

要实际修复示例中的代码，您显然必须首先更改到适当的目录（或使用绝对路径）。

# c++-cli - “外壳”：未找到标识符

> ID：13848444
> 
> 赞同：1
> 
> 时间：2012-12-12T20:55:08.050
> 
> 标签：c++-cli

我在尝试执行这个 C++ 程序时得到了这个。为什么？

代码是：

```
private: 
    System::Void button1_Click(System::Object^ sender, System::EventArgs^ e) {
        Shell("maplestory.exe") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:04:15.747

您要么需要.NET 库中的[System.Shell.execute](http://msdn.microsoft.com/en-us/library/windows/desktop/ms723232%28v=vs.85%29.aspx)，要么需要调用 Windows API [ShellExecute](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)。

# c - Makefile 的正确标准是什么？

> ID：13848445
> 
> 赞同：4
> 
> 时间：2012-12-12T20:55:12.543
> 
> 标签：c, makefile

我目前正在编写小型简单的 C 程序。到目前为止，我的 Makefile 文件包含以下内容：

```
program_name:  
    clang -o program_name program_name.c 
```

这就是我所需要的吗？我不确定是否需要在 .o 和 .h 文件之间建立依赖关系，即使它们不一定存在于我的项目中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:06:15.443

你工作太辛苦了。您应该将 Makefile 简化为 2 行：

```
CC=clang
program_name: some.h 
```

不需要指定对`program_name.o`or的依赖`program_name.c`，因为它们是隐含的。也无需明确给出规则，因为您使用的是默认规则。但是，确实需要说明对头文件的依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:00:32.297

我自己使用 GNU Make。不确定你用的是什么。对于 GNU Make，请参阅：

*   [http://www.gnu.org/prep/standards/html_node/Makefile-Conventions.html#Makefile-Conventions](http://www.gnu.org/prep/standards/html_node/Makefile-Conventions.html#Makefile-Conventions)
*   [http://www.gnu.org/software/make/](http://www.gnu.org/software/make/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:09:11.077

> 这就是我所需要的吗？

不。

> 我不确定是否需要在 .o 和 .h 文件之间建立依赖关系

通常，您应该，特别是如果您使用自定义数据类型（即使不是：如果您平台上的 ABI/调用约定包含黑魔法，则函数签名的更改可能会破坏整个程序）。

我使用的模板通常是：

```
CC = gcc
LD = $(CC)
CFLAGS = -c -Wall
LDFLAGS = -lwhatever -lfoo -lbar

TARGET = myprog
OBJECTS = $(patsubst %.c, %.o, $(wildcard *.c))

all: $(TARGET)

$(TARGET): $(OBJECTS)
        $(LD) $(LDFLAGS) -o $@ $^

%.c: %.h

%.o: %.c
        $(CC) $(CFLAGS) -o $@ $^ 
```

# c++ - 如何转发声明 C++ 模板类？

> ID：13848451
> 
> 赞同：133
> 
> 时间：2012-12-12T20:55:16.993
> 
> 标签：c++, templates, forward-declaration

给定一个模板类，如下所示：

```
template<typename Type, typename IDType=typename Type::IDType>
class Mappings
{
public:
    ...
    Type valueFor(const IDType& id) { // return value }
    ...
}; 
```

有人如何在头文件中转发声明这个类？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-12-12T20:57:27.617

你会这样做：

```
template<typename Type, typename IDType=typename Type::IDType>
class Mappings;

template<typename Type, typename IDType>
class Mappings
{
public:
    ...
    Type valueFor(const IDType& id) { // return value }
    ...
}; 
```

请注意，默认值在前向声明中，而不是在实际定义中。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-12-13T03:42:24.677

你***可以***声明一个模板化的类，它的定义声明了默认参数，但是任何时候你引用这个类，你必须包含它的所有参数，直到定义被引入。

例如。让我们在`std::vector`不包括它的情况下使用（的第二个参数`std::vector`是用默认值定义的）：

```
namespace std
{
    template<typename, typename>
    class vector;
}

#include <iostream>

template <typename S, typename T>
void Foo (const std::vector<S,T> & vector)
{
    std::cout << "do vector stuff, eg., display size = "
        << vector.size() << std::endl;
}

template <typename T>
void Foo (const T & t)
{
    std::cout << "do non-vector stuff..." << std::endl;
} 
```

然后我们可以在*不*包含向量的情况下使用它，例如：

```
int main ()
{
    Foo(3);
} 
```

...***或者***我们可以将它*与 一起使用* `std::vector`，例如：

```
#include <vector>

// Now the compiler understands how to handle
// std::vector with one argument
// (making use of its default argument)

int main ()
{
    Foo(std::vector<int>(3));
} 
```

我没有检查标准，但这适用于`clang`/`gcc`最高`-std=c++98`，`-std=c++17`所以如果它不是正式的标准，那么它看起来是非官方的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-12T21:11:48.357

您只能为模板的第一个声明声明模板的默认参数。如果你想让用户转发声明一个类模板，你应该提供一个转发头。如果您想使用默认值转发声明其他人的类模板，那么您就不走运了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-09T18:19:44.210

*我的答案补充了其他答案，因为我发现的解决方案实际上通过在所有参数已知（或作为默认参数提供）时*创建一个新类型来减轻对模板类前向声明​​的需求，因此这种新类型，而不是你可以前向声明的，不是不再是模板：

```
template<typename Type=MyDefault, typename IDType=typename Type::IDType>
class MappingsGeneric
{
...
};

class Mappings : public MappingsGeneric<> {}; 
```

然后就可以了`class Mappings;`。我知道这个解决方案并不适用于任何地方，但它适用于我的用例，因为我只在单元测试上下文中将模板用于非虚拟方法的高性能依赖注入。

# .htaccess - 将域重定向到 404 通用页面

> ID：13848458
> 
> 赞同：0
> 
> 时间：2012-12-12T20:55:35.777
> 
> 标签：.htaccess, redirect, dns, web-hosting

我有我的网站（a.com）。另一个人将您的域 (b.com) 指向我的服务器。那是错的。

是否可以将来自 b.com 的所有流量重定向到通用 404 页面？认为这可以通过文件 htaccess

谢谢！

*编辑*

我可以做这个？

```
RewriteEngine On
RewriteRule ^(.*)$ http://www.b.com/$1 [R=404,L] 
```

**或者**

```
RewriteCond %{HTTP_HOST} ^www.b.com [nocase]
RedirectMatch 404 ^(.*) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:11:52.183

你可以这样做：

**更新**

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} ^domainb\.com$ [NC]
RewriteRule .*  - [R=404] 
```

您还可以尝试一般禁止错误，如下所示：

```
order allow,deny
deny from b.com
allow from all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:16:23.440

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_REFERER} b\.com [NC]
RewriteRule ^ /404.html [R=404,L] 
```

这将检查流量是否来自`b.com`，如果是，则它将所有请求重定向到通用`404.html`页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-31T09:19:29.667

我的做法是将此代码放入 htaccess 文件中：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/index.html$
RewriteCond %{REQUEST_URI} !\.(gif|jpe?g|png|css|js)$
RewriteRule .* /index.html [L,R=302]
</IfModule> 
```

它将请求发送到 index.html 文件。然后使用html中的刷新功能将文件重定向到所需的域：

```
index.html

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
   <title></title>
<META http-equiv="refresh" content="0;URL=https://www.mydomain.co.uk/">
 </head>
 <body>

 </body>
</html> 
```

# ruby-on-rails - 如何删除ruby中的特定字符？

> ID：13848459
> 
> 赞同：0
> 
> 时间：2012-12-12T20:55:40.037
> 
> 标签：ruby-on-rails, ruby, special-characters, gsub

已经创建了记录，比如

```
Company &quot;Life&quot; 
```

如何为物种制作这个记录

```
сompany-life 
```

我使用了参数化，但它变成了：

```
company-quot-life-quot 
```

据我了解，`.gsub("&quot;", "")`不适合实施，因为要创建太大的异常列表

有没有办法以原始格式记录？（稍后参数化）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:02:08.630

这是一种非 Rails 方法：

```
require 'cgi'

str = 'Company &quot;Life&quot;'

puts CGI.unescape_html(str).gsub(/"/, '').gsub(/\s+/, '-').downcase

# => company-life 
```

和一个纯正则表达式解决方案：

```
puts str.gsub(/&\w+;/, '').gsub(/\s+/, '-').downcase
# => company-life 
```

如果你在 Rails 中（感谢@nzifnab）：

```
str.gsub(/&\w+;/, '').parameterize 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:14:24.160

正如@meager 所说，您一开始不应该将 html 编码的实体存储在数据库中，它是如何进入数据库的`&quot;`？理论上这会起作用：

```
class Page < ActiveRecord::Base
  before_validation :unescape_entities

  private
  def unescape_entities
    self.name = CGI.unescape_html(name)
  end
end 
```

但是我仍然很好奇如何`name`首先使用 html 实体到达那里。你的动作/形式是什么样的？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T21:00:03.113

```
"Company &quot;Life&quot;".html_safe.parameterize 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-12T21:06:04.460

```
"Company &quot;Life&quot;".gsub(/&[^;]+;/, "-").parameterize.downcase
# => "company-life" 
```

首先，gsub 摆脱了 html 实体，然后 parameterize 摆脱了除 Ascii 字母数字之外的所有实体（并用破折号替换它们），然后是小写。请注意，“_”也将被保留，如果您不喜欢它们，`gsub('_', '-')`则需要另一个。

# android - 我可以从除 http://dl-ssl.google.com 或 android.com 以外的任何其他网站下载 android 平台吗？

> ID：13848461
> 
> 赞同：1
> 
> 时间：2012-12-12T20:55:44.453
> 
> 标签：android

这听起来可能很尴尬，但在我的国家，许多谷歌服务和网站都被屏蔽了，其中之一是[http://dl-ssl.google.com/android/repository](http://dl-ssl.google.com/android/repository)，所以我无法下载安卓平台和其他一些资源。我可以从任何其他网站或来源下载它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:03:20.943

你可以试试：

*   [https://android.googlesource.com/](https://android.googlesource.com/)
*   [https://github.com/android/](https://github.com/android/)

找出您想要的存储库将是更多的工作，但它们是备用站点。

# javascript - 自定义 twitter 引导下拉菜单

> ID：13848464
> 
> 赞同：0
> 
> 时间：2012-12-12T20:55:52.627
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我尝试使用 twitter boostrap 下拉插件来制作可编辑的下拉列表。现在我有这个：http: [//jsfiddle.net/U9L2J/3/](http://jsfiddle.net/U9L2J/3/)

我想要做的是在列表的每个元素的右侧放置一个铅笔图标和一个删除图标（使用`<i class="icon-pencil"></i>`和`<i class="icon-remove"></i>`）。并在单击这些图标时触发事件。所以当这些图标被点击时，它不应该检查元素的复选框。我尝试过的所有东西都完全破坏了列表的CSS......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:30:11.290

对于那些处理点击事件的人，您应该使用 .on() 将它们映射起来：

```
 $(".icon-remove").on("click", function(e){
    alert('clicked');
    e.preventDefault();
}); 
```

[你更新的小提琴](http://jsfiddle.net/TNCodeMonkey/U9L2J/4/)

**编辑：代码更正：**

```
 $("#layers-dropdown >.layers").on("click","li a label i.icon-remove", function(e){
        alert('clicked');
    e.preventDefault();
});​ 
```

[更新了具有动态功能的小提琴](http://jsfiddle.net/TNCodeMonkey/U9L2J/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:29:29.323

使用 preventDefault 来阻止复选框被选中。

```
​$("i")​​.click(function(e){
  e.preventDefault();
  // some code here - do your thing!
}​);​ 
```

见[http://jsfiddle.net/PcjNz/](http://jsfiddle.net/PcjNz/)

当然，您可能应该将不同的点击事件绑定到不同的图标。此示例仅防止复选框被选中...

# javascript - Javascript内存管理和垃圾收集

> ID：13848466
> 
> 赞同：3
> 
> 时间：2012-12-12T20:56:00.893
> 
> 标签：javascript, memory-management, memory-leaks

我已经阅读了许多关于 Javascript 内存管理的 Stack 文章和博客文章。

我的理解是，当所有对它们的引用都被删除时，在给定范围内的变量被标记为清理。大多数“内存泄漏”似乎与通过范围链接或链接到 DOM 元素的变量有关，这反过来又阻止了它们被垃圾收集。

我试图理解为什么这三个代码段在 Chrome 和 Firefox 中需要相同的 RAM 使用：

```
<html>
<body>
    <script>
        var bigString1=new Array(1000).join(new Array(2000).join("XXXX1"));
        var bigString2=new Array(1000).join(new Array(2000).join("XXXX2"));
        var bigString3=new Array(1000).join(new Array(2000).join("XXXX3"));
        var bigString4=new Array(1000).join(new Array(2000).join("XXXX4"));
        var bigString5=new Array(1000).join(new Array(2000).join("XXXX5"));
    </script>
</body>
</html> 
```

这只是在窗口范围内创建了变量，因此它们驻留在内存中。

```
<html>
<body>
    <script>
        var bigString1=new Array(1000).join(new Array(2000).join("XXXX1"));
        var bigString2=new Array(1000).join(new Array(2000).join("XXXX2"));
        var bigString3=new Array(1000).join(new Array(2000).join("XXXX3"));
        var bigString4=new Array(1000).join(new Array(2000).join("XXXX4"));
        var bigString5=new Array(1000).join(new Array(2000).join("XXXX5"));
        bigString1 = null;
        bigString2 = null;
        bigString3 = null;
        bigString4 = null;
        bigString5 = null;
    </script>
</body>
</html> 
```

但是，从内存中删除它们并不会减少内存使用量。

```
<html>
<body>
    <script>
    var test = function(){
        var bigString1=new Array(1000).join(new Array(2000).join("XXXX1"));
        var bigString2=new Array(1000).join(new Array(2000).join("XXXX2"));
        var bigString3=new Array(1000).join(new Array(2000).join("XXXX3"));
        var bigString4=new Array(1000).join(new Array(2000).join("XXXX4"));
        var bigString5=new Array(1000).join(new Array(2000).join("XXXX5"));
        bigString1 = null;
        bigString2 = null;
        bigString3 = null;
        bigString4 = null;
        bigString5 = null;
    }
    test();
    </script>
</body>
</html> 
```

即使将它们放在完成的范围内，也不会将它们从内存中删除。

自己试试。在活动监视器中观察内存分配。所有三个 HTML 文件都分配和保留完全相同数量的 RAM。

谁能帮忙指出我在这里遗漏了哪些信息？我们究竟怎样才能让 Javascript 从未使用的数据中释放内存？

例如，如果我继续运行

```
(function(){ var bigString1=new Array(1000).join(new Array(2000).join("XXXX3")); })(); 
```

一遍又一遍，每次浏览器分配大约 20mb 的 RAM。我可以让计算机在那里坐几个小时，而 RAM 永远不会被释放。如果 RAM 被保留但被清除，那么一次又一次地运行相同的命令只会一遍又一遍地使用相同的内存空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:59:35.500

chrome 很可能会保留分配的内存以供以后重新使用。您应该能够在已分配（但未使用）的内存中创建新数组。

**更新** 我刚刚在 Linux Mint 上使用 Chrome 23 自己测试了这个。

跑步

```
(function(){ var bigString1=new Array(1000).join(new Array(2000).join("XXXX3")); })(); 
```

在页面使用的任何内容之上分配大约 20MB。在控制台中反复向代码段发送垃圾邮件不会进一步增加内存使用量。大约 30 秒后，内存被回收。

# jquery - 用 JSON 调用中的内容替换 div

> ID：13848471
> 
> 赞同：0
> 
> 时间：2012-12-12T20:56:13.473
> 
> 标签：jquery, json, html

我正在接收来自 JSON 调用的内容，我想填充 3 个在`news_item`类中返回响应的对象，如下所示：

```
<div class="news"> 
        <div class="news_item" style="margin-left: 0 !important;">

        <div class="ni_image">
            <a href="/HaberDetay/TITLE/ID"><img src="IMAGE"width="203" height="109"/></a>
        </div>
        <div class="ni_text">
            <div class="ni_text_title">TITLE</div>
            <div class="ni_text_content"> 
                CONTENT
            </div>
        </div>
        </div> 
</div> 
```

我能够接收如下数据。但不太确定如何填充`news_item`上面的 div。我还需要清除`news` 并用来自 JSON 响应的数据替换所有内容。

```
var newsByCity = JSON.parse(msg);

                $.each(newsByCity, function (key, item) {
                    alert("Code: " + item.City + " ,Name: " + item.Title + " ,Country: " + item.County);

                }); 
```

任何指针？我怎样才能做到这一点？

编辑：我回来了 TITLE、ID、CONTENT 等。我只需要看看如何创建这个新的 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:05:47.190

请注意，jQuery 模板仍处于测试阶段（可以在这里进行 DL：[https](https://github.com/jquery/jquery-tmpl) ://github.com/jquery/jquery-tmpl ）

创建此 HTML 的 jQuery 模板，其中包含标题/ID/内容等，它们将出现在`${TITLE}`/etc 中。基本上是这样的：

```
<div class="news_item" style="margin-left: 0 !important;">
    <div class="ni_image">
        <a href="/HaberDetay/${TITLE}/${ID}"><img src="IMAGE"width="203" height="109"/></a>
    </div>
    <div class="ni_text">
        <div class="ni_text_title">${TITLE}</div>
        <div class="ni_text_content"> 
            ${CONTENT}
        </div>
    </div>
</div> 
```

然后只需创建模板并将其附加到新闻中。

`$('#yourTemplateScriptArea').tmpl(newsByCity).appendTo('.news');`

如果您以前从未做过模板，这里有一个介绍模板。 [http://stephenwalther.com/archive/2010/11/30/an-introduction-to-jquery-templates.aspx](http://stephenwalther.com/archive/2010/11/30/an-introduction-to-jquery-templates.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:08:05.637

要创建新元素，您可以使用 JS 或 jQuery 创建它们。jQuery 更简单，但开销更大。

```
// Element to append to
var target = $('.news');

// Create the new element in a jQuery object
// and use the appendTo method to attach it
// to the DOM element
$('<div />').html('<p>New div created</p>')
            .appendTo(target); 
```

或者，您可以找到现有的 dom 元素并替换文本或 HTML

```
var target = $('.news');

// Replacing text
target.find('.ni_text_title').text('New news title');

// Replacing HTML
target.find('.ni_text').html('<div class="ni_news_text">...</div>'); 
```

您可以通过将空字符串传递给`.html`and`.text`方法来清空元素的文本或 HTML 内容。如果将它们留空，该方法将返回该元素的当前文本或 HTML。

希望有帮助。

# python - Python - 在两个字符串上运行

> ID：13848472
> 
> 赞同：-2
> 
> 时间：2012-12-12T20:56:21.077
> 
> 标签：python, python-3.x, python-2.7

我正在尝试在一个获取两个参数的函数上组合一个 for 循环。我需要在两个参数上运行（它们都是整数列表）。尝试这个对我不起作用：

```
def xor_bytes (b, a):
    for i in range (b):
    for Z in range (a):
        if b[i]>a[Z]:
            return byte1
        if b[i]<a[Z]:
            return byte2
        if b[i]==a[Z]:
            return 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:59:34.723

```
def xor_bytes (b, a):
    for i,z in zip(b,a):
        if i>z:
            return byte1
        if i<z:
            return byte2
        if i==z:
            return 0 
```

1.  查看标准库文档`zip`或在终端尝试一下
2.  案件很重要。我修复了你的大写`z`s
3.  没有必要使用 range 来遍历列表。只需遍历列表。
4.  此代码实际上不会按预期工作，或者根本不会工作，因为您有未定义的变量

请注意，您的代码实际上只会返回一个字节。您可能想将其用作生成器：

```
def xor_bytes (b, a):
    for i,z in zip(b,a):
        if i>z:
            yield i
        if i<z:
            yield z
        if i==z:
            yield chr(0)

In [6]: list(xor_bytes('hambone', 'cheesey'))
Out[6]: ['h', 'h', 'm', 'e', 's', 'n', 'y'] 
```

您可能想要这个：

```
In [13]: [chr(ord(a)^ord(b)) for a,b in zip('hambone', 'cheesey')]
Out[13]: ['\x0b', '\t', '\x08', '\x07', '\x1c', '\x0b', '\x1c'] 
```

如果不是很明显，这需要两个字节字符串并返回一个字节列表（或技术上，长度为 1 字节的字符串），其中包含对每对字节进行异或运算的结果。

或者：

```
In [14]: ''.join(chr(ord(a)^ord(b)) for a,b in zip('hambone', 'cheesey'))
Out[14]: '\x0b\t\x08\x07\x1c\x0b\x1c' 
```

# javascript - img.src 是如何存储在内存中的？

> ID：13848474
> 
> 赞同：2
> 
> 时间：2012-12-12T20:56:23.433
> 
> 标签：javascript, html

我想知道`image.src`它是如何存储在浏览器中的。

它是否存储了准备在屏幕上显示的像素数组？然后这让我想知道为什么我们不能将这个像素数据`without`绘图访问到画布并以这种方式获取像素信息？

图像数据必须存储在内存中供浏览器使用，为什么不能直接查询图像的某个像素，而只能先绘制呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:59:42.850

没有标准来定义浏览器如何维护图像，并且由于浏览器的设计目的是不允许您了解其内部实现，因此您真的无法按照您的要求进行操作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:00:39.847

实际上，浏览器如何在内存中存储图像与 Web 开发人员无关。这是一个实现细节。这就像询问操作系统内核如何决定它在 RAM 中的哪个位置分配程序内存——对于大多数应用程序来说，这根本不重要；内核只是给你内存。

唯一重要的是提供给您的公开记录的 API。对于 DOM API，获取像素数据的方法是通过画布 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:15:23.670

历史原因。图像元素最初设计只是为了显示图像。多年后添加了 canvas 元素，以使开发人员能够访问图像和其他媒体对象中的数据。

在更高的层次上，如果您对浏览器如何*实现*其图像标签的内部管道感兴趣，Firefox 和 Chrome 的源代码是开放的以供检查。

# python - 使用 Python 将 JSON 转换为 CSV（空闲）

> ID：13848480
> 
> 赞同：11
> 
> 时间：2012-12-12T20:56:29.463
> 
> 标签：python, json, csv, python-idle

我有一个纬度/经度的 JSON 文件，我想将其转换为 CSV 文件。我想用 Python 做到这一点。我已经阅读/尝试了所有其他 stackoverflow 和谷歌搜索结果建议。我已经设法创建 CSV 并包含标题，但除此之外，愚蠢的事情开始发生。到目前为止，这是我的代码的工作部分：

```
import json, csv

x="""[
    {"longitude":"-73.689070","latitude":"40.718000"},
    {"longitude":"-73.688400","latitude":"40.715990"},
    {"longitude":"-73.688340","latitude":"40.715790"},
    {"longitude":"-73.688370","latitude":"40.715500"},
    {"longitude":"-73.688490","latitude":"40.715030"},
    {"longitude":"-73.688810","latitude":"40.714370"},
    {"longitude":"-73.688980","latitude":"40.714080"},
    {"longitude":"-73.689350","latitude":"40.713390"},
    {"longitude":"-73.689530","latitude":"40.712800"},
    {"longitude":"-73.689740","latitude":"40.712050"},
    {"longitude":"-73.689820","latitude":"40.711810"},
    {"longitude":"-73.689930","latitude":"40.711380"},
    {"longitude":"-73.690110","latitude":"40.710710"}
]"""

x = json.loads(x)

f = csv.writer(open("test.csv", "wb+"))

f.writerow(["longitude", "latitude"]) 
```

这就是它分崩离析的地方（“？”的意思是我不知道该放什么。我已经尝试了各种我在寻找答案时发现的东西的组合）：

```
for ? in ?:
    f.writerow([?[?],?[?]]) 
```

我从[little_fish对](https://stackoverflow.com/users/227684/little-fish)[这个问题](https://stackoverflow.com/questions/1871524/convert-from-json-to-csv-using-python)的回答中得到了上述信息。我可以看到我们的 JSON 示例略有不同，我假设这与我无法让它工作的原因有关......

任何帮助将不胜感激，如果需要，我很乐意提供澄清。仅供参考，我是 Python 新手，所以如果您要使用行话，请尽可能清楚地解释它。谢谢！（PS不确定是否重要，但我正在使用IDLE）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T21:22:05.780

我会使用[csv.DictWriter](http://docs.python.org/2/library/csv.html#csv.DictWriter)，因为您正在处理 dicts，这正是这种情况`DictWriter`。

```
rows = json.loads(x)
with open('test.csv', 'wb+') as f:
    dict_writer = csv.DictWriter(f, fieldnames=['longitude', 'latitude'])
    dict_writer.writeheader()
    dict_writer.writerows(rows) 
```

**编辑：**
由于该`.writeheader()`方法仅在 2.7 中添加，因此您可以在旧版本上使用类似这样的方法：

```
rows = json.loads(x)
fieldnames = ['longitude', 'latitude']
with open('test.csv', 'wb+') as f:
    dict_writer = csv.DictWriter(f, fieldnames=fieldnames)
    dict_writer.writerow(dict(zip(fieldnames, fieldnames)))
    dict_writer.writerows(rows) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T21:00:17.303

一个一个地循环遍历列表，并明确地写出字段名称对于这种情况来说可能是最简单的。

```
for row in x:
    f.writerow( [row['longitude'], row['latitude']] ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:05:21.870

这将帮助您迭代每个项目并将其写入您的 csv 文件：

```
import json, csv

x = """[
    {"longitude":"-73.689070","latitide":"40.718000"},
    {"longitude":"-73.688400","latitide":"40.715990"},
    {"longitude":"-73.688340","latitide":"40.715790"},
    {"longitude":"-73.688370","latitide":"40.715500"},
    {"longitude":"-73.688490","latitide":"40.715030"},
    {"longitude":"-73.688810","latitide":"40.714370"},
    {"longitude":"-73.688980","latitide":"40.714080"},
    {"longitude":"-73.689350","latitide":"40.713390"},
    {"longitude":"-73.689530","latitide":"40.712800"},
    {"longitude":"-73.689740","latitide":"40.712050"},
    {"longitude":"-73.689820","latitide":"40.711810"},
    {"longitude":"-73.689930","latitide":"40.711380"},
    {"longitude":"-73.690110","latitide":"40.710710"}
]"""

jsoned = json.loads(x)

with open("test.csv", "wb+") as csv_file:
    csv_writer = csv.writer(csv_file)
    for i in jsoned:
        csv_writer.writerow([i[u'longitude'],
                             i[u'latitide']]) 
```

请注意，您在原始帖子中拼错了纬度（纬度）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T21:20:30.100

根据一些答案响应，这就像一个魅力！：

```
import json, csv

    x="""[
        {"longitude":"-73.689070","latitude":"40.718000"},
        {"longitude":"-73.688400","latitude":"40.715990"},
        {"longitude":"-73.688340","latitude":"40.715790"},
        {"longitude":"-73.688370","latitude":"40.715500"},
        {"longitude":"-73.688490","latitude":"40.715030"},
        {"longitude":"-73.688810","latitude":"40.714370"},
        {"longitude":"-73.688980","latitude":"40.714080"},
        {"longitude":"-73.689350","latitude":"40.713390"},
        {"longitude":"-73.689530","latitude":"40.712800"},
        {"longitude":"-73.689740","latitude":"40.712050"},
        {"longitude":"-73.689820","latitude":"40.711810"},
        {"longitude":"-73.689930","latitude":"40.711380"},
        {"longitude":"-73.690110","latitude":"40.710710"}
    ]"""

    x = json.loads(x)

    f = csv.writer(open("test.csv", "wb+"))

    f.writerow(["longitude", "latitude"])

    for row in x:
        f.writerow( [row['longitude'], row['latitude']] ) 
```

# css - 边框不显示

> ID：13848482
> 
> 赞同：18
> 
> 时间：2012-12-12T20:56:35.877
> 
> 标签：css, border

我的图像周围没有出现我的边框，我不太确定可能是什么问题。我只需要在照片周围有一个黑色的小边框。我的网站是[http://www.welovetile.com](http://www.welovetile.com)。我无法弄清楚问题可能是什么。谢谢。

**CSS：**

```
#kitchen {
        height:250px;
        width:346px;
        background-image:url(images/kitchenbg.jpg);
    }

        #kitchen img
        {   
            top: 50%;
            left: 50%;
            width: 316px;
            height: 228px;
            margin-top:11px;
            margin-left:15px;
            border-color:#000000;
            border-width:thin;
        } 
```

**HTML：**

```
<div id="kitchen">
    <img src="images/kitchen.jpg" alt="Kitchen Tile Job"/>
</div> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-12T21:00:27.173

边框有三个主要部分：宽度、样式和颜色；其他任何人都需要该样式才能工作。

尝试添加样式：

```
border-style: solid; 
```

此外，您可以在同一行 css 中指定所有这些：

```
border: thin solid black; 
```

**更新**

正如 Wesley 所指出的，边框样式是唯一需要的样式。

来自[http://www.w3schools.com/css/css_border.asp](http://www.w3schools.com/css/css_border.asp)：

***除非设置了border-style**属性，否则所有的边框属性都不会产生任何影响！*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T21:00:08.507

你错过了：

```
border-style: solid; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-12T21:00:47.960

您可以将边框宽度/样式/颜色放在一行中，如下所示：

```
Border: 1px solid black; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T21:04:48.313

尝试这个：

```
border: 1px solid #F4F1E8;
box-shadow: 1px 1px 3px #4C4843; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T21:01:12.733

还添加一个边框样式属性，例如`border-style: solid;`.

# javascript - 在 knockout.js 中，是否可以使用动态绑定值？

> ID：13848486
> 
> 赞同：2
> 
> 时间：2012-12-12T20:56:45.353
> 
> 标签：javascript, knockout.js, knockout-2.0

在 knockout.js 中，是否可以让绑定的右侧（绑定的值）是动态的？例如，

```
<input data-bind="value: dynamicBinding()"/>
<script type="text/javascript">
var vm = {
   dynamicBinding : function() {
       return "foo().bar";
   },
   foo : ko.observable({
       bar : ko.observable("hi");
   }
};
ko.applyBindings(vm);
</script> 
```

结果应该是`dynamicBinding`在应用绑定时执行该函数，并将结果字符串用作绑定。输入元素应绑定到`foo().bar`，这是值为“hi”的可观察对象。

如果您想知道我为什么想要这个，我正在尝试渲染一个带有剔除的动态表，其中行和列都是 observableArrays，并且我希望允许列定义包含该列的绑定表达式。即，我希望能够做到这一点：

```
<table data-bind="foreach: data">
  <tr data-bind="foreach: $root.columns">
    <td data-bind="text: cellValueBinding()"></td>
  </tr>
</table>
<script type="text/javascript">
var vm = {
   data: ko.mapping.fromJS([
     {title: "Brave New World", author: { name : "Aldous Huxley" },
     {title: "1984", author: { name : "George Orwell" },
     {title: "Pale Fire", author: { name : "Vladimir Nabokov" }]),
   columns: ko.observableArray([
     {header: "Title", cellValueBinding: function () { return "$parent.title"; }}, 
     {header: "Author", cellValueBinding: function () { return "$parent.author().name"; }}
   ])
};
ko.applyBindings(vm);
</script> 
```

从示例中可以看出，列定义知道如何从数据中提取值。表格标记本身或多或少是一个占位符。但据我所知，由于淘汰赛处理绑定的方式，这不起作用。还有其他选择吗？

谢谢。

* * *

**解决方案**：我最终使用了 Ilya 的建议——我可以让 cellValueBinding 成为一个接受行和列作为参数的函数，并返回一个 observable。这种技术[在这个小提琴中得到了展示。](http://jsfiddle.net/7vCNt/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:12:21.150

`ko.computed`为之使用。
查看示例
[JSFiddle](http://jsfiddle.net/7csh2/)
**编辑**
在您的第二个示例中，您可以将`$parent`值传递给函数

```
<td data-bind="text: cellValueBinding($parent)"></td> 
```

在模型中

```
{header: "Title", cellValueBinding: function (parent) { return parent.title; }},
{header: "Author", cellValueBinding: function (parent) { return parent.author().name; }} 
```

[JSFiddle](http://jsfiddle.net/Aqxh2/5/)

# mysql - mysql 当我两次加入同一个表时聚合是错误的

> ID：13848493
> 
> 赞同：5
> 
> 时间：2012-12-12T20:57:30.330
> 
> 标签：mysql, join

我基本上有一张桌子，里面有每个日期的计数。我想创建一个查询，为我提供整个表的总计数，以及昨天的总数。但是当我尝试加入表两次时，聚合已关闭。以下是如何复制结果。

```
CREATE TABLE a (id int primary key);
CREATE TABLE b (a_id int, b_id int, date date, count int, primary key (a_id,b_id,date));
INSERT INTO a VALUES (1);
INSERT INTO b VALUES (1, 1, UTC_DATE(), 5);
INSERT INTO b VALUES (1, 2, UTC_DATE(), 10);
INSERT INTO b VALUES (1, 1, UTC_DATE()-1, 7);
INSERT INTO b VALUES (1, 2, UTC_DATE()-1, 12);

SELECT A.id,SUM(B.count) AS total_count,SUM(Y.count) AS y FROM a AS A 
LEFT JOIN b AS B ON (B.a_id=A.id) 
LEFT JOIN b AS Y ON (Y.a_id=A.id AND Y.date=UTC_DATE()-1)
GROUP BY A.id;

Results in:
+----+-------------+------+
| id | total_count | y    |
+----+-------------+------+
|  1 |          68 |   76 |
+----+-------------+------+

The correct result should be:
+----+-------------+------+
| id | total_count | y    |
+----+-------------+------+
|  1 |          34 |   22 |
+----+-------------+------+ 
```

这里发生了什么？这是 mysql 中的一个错误，还是我不明白连接是如何工作的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T21:10:17.580

不，这不是 MySQL 中的错误。

您的 JOIN 条件正在生成“重复”行。（删除聚合函数和 GROUP BY，你会看到发生了什么。

表“a”中的那一行匹配表“b”中的四行。这一切都很好。但是，当您将联接添加到第三个表（“y”）时，从第三个“y”表（两行）返回的每一行都与“b”表中的每一行“匹配”......所以你会绕结果集中总共有八行。（这就是“total_count”翻倍的原因。）

要获得您指定的结果集，您不需要第二次加入该表“b”。相反，只需使用条件测试来确定“计数”是否应包含在“y”总数中。

例如

```
SELECT a.id
     , SUM(b.count) AS total_count
     , SUM(IF(b.date=UTC_DATE()-1 ,b.count,0)) AS y
  FROM a a
  LEFT
  JOIN b b ON (b.a_id=a.id)
 GROUP BY a.id; 
```

* * *

请注意，`IF`可以将 MySQL 表达式替换为等效的 ANSI`CASE`表达式以提高可移植性：

```
 , SUM(CASE WHEN b.date=UTC_DATE()-1 THEN b.count ELSE 0 END) AS y 
```

* * *

如果您确实想再次对那个“b”表执行 JOIN，那么您会希望 JOIN 条件使得“y”中的一行最多匹配“b”中的一行，以免引入任何重复项。所以你基本上需要连接条件来包含主键中的所有列。

（请注意，表“y”的连接条件中的谓词保证“y”​​中的每个谓词将匹配“b”中的不超过一行）：

```
SELECT a.id
     , SUM(b.count) AS total_count
     , SUM(y.count) AS y
  FROM a a
  LEFT
  JOIN b b
    ON b.a_id=a.id
  LEFT
  JOIN b y 
    ON y.a_id = b.a_id
   AND y.b_id = b.b_id
   AND y.date = b.date
   AND y.date = UTC_DATE()-1
 GROUP BY a.id; 
```

（要让第一个语句返回相同的结果集，用潜在的 NULL 代替零，您需要将 IF 表达式中的 '0' 常量替换为 'NULL'。

```
 , SUM(IF(b.date=UTC_DATE()-1 ,b.count,NULL)) AS y 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T21:17:47.937

```
SELECT A.id,b_count AS total_count,y_count as y
FROM a AS A 
LEFT JOIN (select a_id,SUM(B.Count) b_count from b 
               group by B.A_id) AS B1 ON (B1.a_id=A.id) 
LEFT JOIN (select a_id,SUM(Count) y_count from b
               where date=UTC_DATE()-1
           group by B.A_id) AS Y ON (Y.a_id=A.id) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/50b2e/8)

# java - 未能部署到 Google App Engine，因为尚未设置 --use_java7 标志

> ID：13848495
> 
> 赞同：3
> 
> 时间：2012-12-12T20:57:37.580
> 
> 标签：java, eclipse, google-app-engine

> ------------ 部署前端 ------------
> 
> 准备部署：在以下位置创建暂存目录：'C:\Users\ADMINI~1\AppData\Local\Temp\appcfg2555411734473986257.tmp' java.lang.RuntimeException：应用程序包含 Java 7 类，但 --use_java7 标志没有被设置。
> 
> 调试信息可以在 C:\Users\Administrator\AppData\Local\Temp\appengine-deploy7182870224187999057.log 中找到

调试日志：

> 无法更新：java.lang.RuntimeException：应用程序包含 Java 7 类，但尚未设置 --use_java7 标志。在 com.google.appengine.tools.admin.Application.createStagingDirectory(Application.java:576) 在 com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:370) 在 com.google.appengine.tools .admin.AppAdminImpl.update(AppAdminImpl.java:53) 在 com.google.appengine.eclipse.core.proxy.AppEngineBridgeImpl.deploy(AppEngineBridgeImpl.java:433) 在 com.google.appengine.eclipse.core.deploy.DeployProjectJob .runInWorkspace(DeployProjectJob.java:148) 在 org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38) 在 org.eclipse.core.internal.jobs.Worker.run(Worker.java:53 )

我正在尝试将 google 应用程序部署到我的 google 应用程序引擎帐户，而 eclipse 给了我这个错误。这似乎很简单，但我找不到在哪里为 java7 设置标志。

我正在使用最新版本的 Eclipse（Juno Service Release 1），我的谷歌插件是 4.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:38:24.663

相关的系统级属性如下所示[：](http://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/tools/admin/AppCfg.java?r=290) com.google.apphosting.runtime.use_java7

它可以像这样传递到 appCfg.sh 中：

```
appcfg.sh --use_java7 update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:29:58.390

根据[1.7.3 博客文章](http://googleappengine.blogspot.com/2012/10/app-engine-173-released.html)：

> 在即将发布的版本中，我们将在 App Engine Java 运行时中包含一些新的 Java 7 功能以及正式的 Java 7 支持。

和...

> 虽然 App Engine Java 运行时中尚不提供 Java 7 支持，但对早期预览感兴趣的开发人员可以注册我们[值得信赖的测试程序](https://docs.google.com/a/google.com/forms/viewform?id=13UvQiEjr7ob-QXMSFch5LByQN8vHa70Rl98g8ipCf9c)。

您需要被接受加入 TT 计划，或者等待 Java 7 在生产中工作的未来版本。

# matlab - 生成所有可能的组合以在大矩阵中选择特定数量的行

> ID：13848498
> 
> 赞同：1
> 
> 时间：2012-12-12T20:57:47.557
> 
> 标签：matlab

我想生成所有可能的组合，以批量选择行，比如“k”大小。例如，矩阵 A 有 3 行，我想要批量大小为 2 的所有组合，即行 (1,2)(1,3)(2,3)。最简单的方法是什么？然后我想用它们来做一些操作，比如 myfunction();

我认为 nchoosek 函数可以解决选择组合的技巧，但是如何使用 nchoosek 输出的每一行作为矩阵的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:48:08.943

如果您想一个一个地使用每个组合，您可以执行以下操作：

```
A = rand(3);
comb = nchoosek(length(A), 2);
for i = 1:size(comb, 1)
  myfunction(A(comb(i, :), :));
end 
```

`A(comb(i, :))`是对应于第 i 个行组合的 akxn 矩阵（此处为 3 x 2）。

# android - 在方向更改时替换布局

> ID：13848500
> 
> 赞同：15
> 
> 时间：2012-12-12T20:57:52.580
> 
> 标签：android, android-layout

我的应用程序在 LinerLayout 中有一个 webview 和一些按钮。

问题是，我希望按钮在纵向模式下位于底部，在横向模式下位于左侧，而 webview 保持其状态。

两种不同的布局不起作用，因为它强制重新创建刷新 web 视图的活动。现在我在活动标签中使用**android:configChanges="orientation"**，因此 webview 不会在方向更改时刷新。

有没有办法在改变屏幕模式时替换按钮的布局？

![在此处输入图像描述](../Images/1083644a138f1778ff61fc107283468d.png)

人像模式

![在此处输入图像描述](../Images/2fc5c4581463549cc7df87f6fcd60c32.png)

横向模式

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T17:07:04.420

我测试了片段，但是处理片段会使事情变得更加复杂，片段本身需要保存和恢复，这在具有 javascript 状态的 web 视图中可能不起作用，所以我进行了更多搜索，并在某处找到了一篇不错的文章，并进行了一些修改。我建议的解决方案：

首先，添加`android:configChanges="orientation|screenSize|keyboard|keyboardHidden"`应用程序而不是 android 来处理配置更改。

为横向和纵向制作两种不同的布局。在这两种布局中而不是 webview 中放置一个 FrameLayout，它充当 webview 的占位符。

像这样定义 initUI 方法，并将与 UI 初始化相关的所有内容都放在此方法中：

```
public void initui()
{
    setContentView(R.layout.main);
    if (wv == null) wv = new WebView(this);
    ((LinearLayout)findViewById(R.id.webviewPlace)).addView(wv);
    findViewById(R.id.home).setOnClickListener(this);
} 
```

如果 webview 尚不存在，它将被创建并`setContentView(R.layout.main)`添加到布局中。您需要的任何其他 UI 自定义都在此之后出现。

并在`onConfigurationChanged`：

```
@Override
public void onConfigurationChanged(Configuration newConfig)
{
    ((LinearLayout)findViewById(R.id.webviewPlace)).removeAllViews();
    super.onConfigurationChanged(newConfig);
    initUI();
} 
```

在`onConfigChange`webview 中，从旧占位符中删除`initui`并将被调用，这会将其添加回新布局。

在`oncreate()`调用`initui()`中，因此 ui 将首次初始化。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    initUI()
} 
```

我希望它对某人有帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-11T05:27:26.387

如果您正在使用`android:configChanges="orientation|screenSize"`

在清单中，它忽略了“ **layout-land** ”中的 XML。如果您为景观创建不同的 XML，请不要`android:configChanges="orientation|screenSize"`在清单中使用该活动的标记。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-12T20:59:17.273

把它放在`layout-land`你想要的横向布局中。

这个想法是，你不应该真正使用`configChange="orientation"`它，因为它有它的缺点。[你可以在这里](https://stackoverflow.com/questions/7818717/why-not-use-always-androidconfigchanges-keyboardhiddenorientation)找到详细的帖子。如果你想改变你的布局，你应该手动处理你的状态。当然，您可以通过编程方式执行此操作，但如果您想使用 xml 执行此操作。您可以使用片段维护 webView。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-31T16:49:38.583

尝试使用此代码：

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        setContentView(R.layout.activity_splash);
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T21:12:47.780

使您的视图成为相对布局。当方向改变时，只需调整代码中每个视图的布局参数。让您的按钮包含在线性布局中

如在..

**肖像**

```
LayoutParams lp = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
buttonLinearLayout.setOrientation(LinearLayout.HORIZONTAL);
buttonLinearLayout.setLayoutParams(lp);

LayoutParams webParams = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
lp.addRule(RelativeLayout.ABOVE, R.id.buttons);
webView.setLayoutParams(webParams); 
```

**景观**

```
LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);
lp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
buttonLinearLayout.setOrientation(LinearLayout.VERTICAL);
buttonLinearLayout.setLayoutParams(lp);

LayoutParams webParams = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
lp.addRule(RelativeLayout.TO_RIGHT_OF, R.id.buttons);
webView.setLayoutParams(webParams); 
```

确保您使用的 LayoutParams 是 RelativeLayout 参数（始终使用视图父级的 Layoutparams）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-24T13:07:15.420

在清单中添加

```
<activity android:name=".MyActivity"
      android:configChanges="orientation|screenSize|screenLayout|keyboardHidden"
      android:label="@string/app_name"> 
```

和

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (Resources.getSystem().getDisplayMetrics().widthPixels>
            Resources.getSystem().getDisplayMetrics().heightPixels)
    setContentView(R.layout.activity_layout1);
    else setContentView(R.layout.activity_layout2); 

...

} 
```

和

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);

if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
    setContentView(R.layout.activity_layout1);
} else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
    setContentView(R.layout.activity_layout2);
} 
```

}

此处的文档： [https ://developer.android.com/guide/topics/resources/runtime-changes.html](https://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-09-11T05:34:38.270

您可以在资源下添加值（您需要的配置 - 例如土地、肖像）文件夹，并提及此配置所需的布局。就这么简单。

请查看以下链接以获取更多信息 - [http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters)

# python - 在 IDLE 上运行但不通过命令行运行的程序

> ID：13848506
> 
> 赞同：0
> 
> 时间：2012-12-12T20:58:19.660
> 
> 标签：python, python-2.7

这是我的代码，我们称之为“example.py”

```
import traceback
import sys
import os
import linecache

try:
    data_files = [x[2] for x in os.walk(os.path.dirname(sys.argv[0]))]
    fileNameList = data_files[0]    # gets the list of files in the directory where example.py is present
    execfile("sample.py")

except: 
```

该程序在我通过 IDLE 运行时运行良好，但在我通过命令行运行时出现以下错误

```
Traceback (most recent call last):
  File "example.py", line 15, in <module>
    fileNameList = data_files[0]
IndexError: list index out of range 
```

我只能假设它无法从命令行获取文件夹中的文件列表，我是 python 编程的新手，所以如果有人能解决这个问题或至少我出错的地方，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:16:29.357

我认为问题是这样的：当您从 IDLE 运行时，会`sys.argv[0]`保留脚本的整个路径，因此可以`os.path.dirname()`正确提取目录名。但是当你从命令行运行时，`sys.argv[0]`它只包含脚本名称，比如`example.py`，而不是路径，因此`os.path.dirname()`返回一个空字符串，反过来，当它被输入时，`walk`它不会给出任何有意义的东西。

**编辑**

如何修复：不要`sys.argv[0]`单独使用，而是使用`os.path.abspath(sys.argv[0])`来获取脚本的完整路径。然后`os.path.dirname()`应用*它*会给你目录名称，并在 IDLE 和命令行上工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T21:07:38.460

你应该做：

```
data_files = [x[2] for x in os.walk(os.getcwd())] 
```

问题是当你从命令行运行它时，它`sys.argv[0]`只是你用来调用文件的名称（`example.py`），*而不是*文件的完整绝对路径（这是 IDLE 使用的）。因此，`os.path.dirname`不会从中得到任何东西。

请注意，如果您从不同的目录运行文件，例如：

```
python ../my_examples/example.py 
```

此脚本将遍历您*当前*所在的目录，*而不是*当前所在的目录`example.py`。如果您想使用所在的目录`example.py`，您可以执行以下操作：

```
data_files = [x[2] for x in os.walk(os.path.abspath(__file__))] 
```

# android - xmlserializer - 可以设置哪些属性？

> ID：13848510
> 
> 赞同：0
> 
> 时间：2012-12-12T20:58:29.660
> 
> 标签：android, properties, xml-serialization

如何找出可以为 XmlSerializer 设置的属性？

特别是，我想设置换行符和缩进。我找到了一个帖子，给出了一个例子，但它导致了一个不受支持的属性异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T20:34:18.850

在 Android 中使用 XmlSerializer 时，您应该使用此获取换行符和缩进：

```
xmlSerializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output", true); 
```

# javascript - jQuery .ajax 的 http 响应的正确格式是什么？

> ID：13848513
> 
> 赞同：0
> 
> 时间：2012-12-12T20:58:46.757
> 
> 标签：javascript, jquery, ajax, rest, backbone.js

我正在尝试为 Backbone 的保存方法（在后台使用 jquery .ajax）绑定错误和成功回调，尽管我返回 201，但我正在触发错误回调。这是我的回复的完整信息：

```
POST http://localhost:8080/ws/company 201 Created
Content-Type application/json;charset=UTF-8 
```

响应本身包含我保存的实体的 JSON 表示。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:48:24.290

结果是因为backbone.js 验证失败导致我出错。问题是，为什么backbone.js 不会在model.save 上返回false 并保持无效状态，但这不在此问题的范围内。

原来我本地的backbone.js不知何故错过了以下几行：

```
if (!attrs && !this.isValid()) return false; 
```

现在我不知道这怎么可能，但这是真的。

[https://github.com/documentcloud/backbone/issues/1906](https://github.com/documentcloud/backbone/issues/1906)

# regex - ant propertyregex，用指定字符串替换字符串

> ID：13848515
> 
> 赞同：2
> 
> 时间：2012-12-12T20:58:52.780
> 
> 标签：regex, ant, replace

这是我的字符串`com.element.subelement`

我想用`propertyregex`替换 all `.`，`/`并将该输出用作目录路径。

似乎 propertyregex 将成为此工具，但也许我`regexp`错误地使用了它的属性。

我将如何使用正则表达式来查找`.`唯一的，我不想假设该字符串是由句点分隔的 3 个字母部分。也可能 propertyregex 不是这项工作的工具

这是一个有效的方法，我假设一个包名称只有 2 个句点

```
<!-- set package name to folder directory -->
    <propertyregex 
        property="current.target.dir"
          input="com.element.subelement"
          regexp="(.+?)\.(.+?)\.(.+?)"
          replace="\1/\2/\3"
          casesensitive="false" />

    <echo>${current.target.dir}</echo> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:25:47.087

`\.`如果我理解的话，简单地替换`/`应该可以完成你正在寻找的东西。但是，默认情况下这只会替换一行上的第一个实例，因此您必须添加属性`global="true"`：

```
<propertyregex 
    property="current.target.dir"
      input="com.element.subelement"
      regexp="\."
      replace="/"
      global="true" /> 
```

# jquery - 仅针对一个元素的悬停效果，而不影响具有相同类的其他 div

> ID：13848520
> 
> 赞同：0
> 
> 时间：2012-12-12T20:58:59.350
> 
> 标签：jquery, toggle, jquery-hover

这可能是一件容易的事，但我有点迷失了，这是漫长的一天。无论如何，我有一些 div，每个都有不同的大小，并且对于每个不同的大小，它都有自己的类。

```
<div class="LARGE">
    <div class="Content"></div>
    <div class="HOVER_CONTENT"></div>
</div>

<div class="SMALL">
    <div class="Content"></div>
    <div class="HOVER_CONTENT"></div>
</div>

<div class="LARGE">
    <div class="Content"></div>
    <div class="HOVER_CONTENT"></div>
</div>

<div class="MEDIUM">
    <div class="Content"></div>
    <div class="HOVER_CONTENT"></div>
</div> 
```

在悬停时，我希望首先切换一个 ACTIVE 类。在活动时，我通过 CSS 删除 CONTENT 并将 HOVER CONTENT 显示为块。

```
<div class="LARGE ACTIVE">
    <div class="Content"></div>
    <div class="HOVER_CONTENT"></div>
</div> 
```

我遇到的问题是，如果我将鼠标悬停在第二个 LARGE 上，则 HOVER CONTENT 会显示在第一个 LARGE 上。我只希望它显示在我悬停的 LARGE div 上。

```
$('.HOVER_CONTENT').hide();

$('.LARGE').hover(function () {
    $(this).toggleClass('active');
    $('.HOVER_CONTENT').toggle();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:00:10.387

你只需要上下文：

```
$('.LARGE').hover(function () {
    $(this).toggleClass('active');
    $('.HOVER_CONTENT', this).toggle(); //adds context
}); 
```

或者：

```
$('.LARGE').hover(function () {
    $(this).toggleClass('active').find('.HOVER_CONTENT').toggle();
}); 
```

不需要大写字母，这只是 IMO 的错误形式。

# sql - 订单联合但保持不同

> ID：13848521
> 
> 赞同：2
> 
> 时间：2012-12-12T20:59:04.843
> 
> 标签：sql, sql-server, distinct, union

如何查询表 Store(ID,Title,Company) 以获取 title 包含“term”的所有记录，首先显示完全匹配的记录，然后显示部分匹配。换句话说，如果我在寻找“foo”，我希望记录显示为

*   福和儿子
*   好福
*   富吧
*   足球
*   赫弗勒斯

这是我所拥有的

```
Create PROCEDURE [dbo].[SearchUserInfo] 
@query nvarchar(500),
@term nvarchar(500)

(SELECT Title,Company,
1 as match
FROM Stores 
WHERE CONTAINS(Title, @query))

UNION 

(SELECT Title,Company,
0 as match
FROM Stores 
WHERE Title like '%' + @term +'%')

order by match desc 
```

这个查询的问题是它返回重复的记录。如果我删除 0 作为匹配项，我不知道如何排序，因此 CONTAINS 的结果将出现在 LIKE 的结果之前。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:03:30.000

您可以组合两个结果集，然后用于`GROUP BY`删除重复项并放置首先`ORDER BY MAX(match) DESC`返回的组`CONTAINS`

```
;WITH CTE
     AS (SELECT Title,
                Company,
                1 AS match
         FROM   Stores
         WHERE  CONTAINS(Title, @query)
         UNION ALL
         SELECT Title,
                Company,
                0 AS match
         FROM   Stores
         WHERE  Title LIKE '%' + @term + '%')
SELECT Title,
       Company,
FROM   CTE
GROUP  BY Title,
          Company
ORDER  BY MAX(match) DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:26:35.200

如果您不想使用全文搜索，则可以使用单个查询来执行此操作：

```
select title, company,
       (case when MatchType like 'FULL%' then 1 else 0 end) as Match
from (select title, company,
             (case when title like concat(@query, ' %') then 'FULL START'
                   when title like concat('% ', @query) then 'FULL END'
                   when title like concat('% ', @query, ' %') then 'FULL MIDDLE'
                   when title like concat(@query, '%') then 'PARTIAL START'
                   when title like concat('%', @query) then 'PARTIAL END'
                   when title like concat('%', @query, '%') then 'PARTIAL MIDDLE'
                   else 'NONE'
              end) as MatchType
      from Stores
     ) s
where MatchType <> 'NONE'
order by MatchType 
```

这可能无法在单词分隔符方面为您提供所需的灵活性。但是，它确实使您可以更好地控制匹配的性质和结果排序。

# sql - 使用 Convert Sql Server 划分

> ID：13848522
> 
> 赞同：4
> 
> 时间：2012-12-12T20:59:13.003
> 
> 标签：sql, sql-server

> **可能的重复：**
> [精度、比例、总和、除.. 截断](https://stackoverflow.com/questions/8271966/precision-scale-sum-divide-truncation)

我有个问题。我已经编写了一个函数，但是当我使用 convert 将 2 个数字相除时遇到了一些问题。这是一个例子：

```
Declare @A Numeric(18,6)
Declare @B Numeric(18,6)

Set @A = 1
Set @B = 130 
```

如果我执行以下查询，结果是：`0.007692307692307692`

```
Select Convert(Decimal(30,18),@A / @B) 
```

但如果我这样做，结果是：（`0.007692300000000000`丢失小数）

```
Select Convert(Decimal(30,18),Convert(Decimal(30,18),@A) / Convert(Decimal(30,18),@B)) 
```

如果我使用相同的精度和比例，有人可以解释为什么我会丢失小数吗？

# git - 如何使用 git 在服务器上分离生产/开发环境？

> ID：13848524
> 
> 赞同：2
> 
> 时间：2012-12-12T20:59:15.463
> 
> 标签：git, deployment

您好，我在部署方面有点菜鸟...

我的情况如下：

1.  我正在本地 git repro 中的本地机器上开发。当我有很大的变化时，我会推送到 github。
2.  在生产站点上有一个服务器，我想为我的客户提供一个开发版本，以检查最新的花哨功能，并在该服务器上拥有应用程序的并行生产版本。

现在我试图在我的服务器上的常规端口 80 上拥有一个生产版本，另一个在 81 上，例如在不同的 vm 上。

现在，我尝试将生产版本排除在外。因此，我希望有两个具有不同版本/分支的目录 - 一个开发（假设：home/app1-dev）和一个生产（假设：home/app1）。

但是当我克隆我的 repro 两次时，我得到错误目标路径已经存在......当然 git 不会寻找目录......

我什至不知道这是否是让这一切发生的好方法......？有没有更好的方法来部署开发版本和独立的生产版本？

任何帮助或更基本的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:07:15.330

我不确定什么是最好的方法，但在我的公司我们使用 2 个分支：master 和 prod。Prod 是在我们的生产服务器上使用的稳定版本。比您可以使用不同的方法将数据复制到正确的目录。最简单的方法是将 repo 克隆到目标文件夹（您的服务器使用的文件夹），然后签出到 prod 分支并提取更新。您可以编写“部署”脚本，该脚本将签出到 prod 目录中的 prod 分支并提取数据。克隆 repo 的问题是什么？

# windows - 使用 SSH 拨入 git repo

> ID：13848527
> 
> 赞同：0
> 
> 时间：2012-12-12T20:59:22.520
> 
> 标签：windows, git, ssh

我正在使用 SSH 客户端拨入我服务器上的 Git 存储库。

我将回购设置在

```
C:\Users\jameo\circletest.git 
```

我正在尝试像这样将ssh遥控器设置为它

```
git remote set-url origin ssh://jameo@10.10.10.10/C:/Users/jameo/circletest.git 
```

然后做

```
git push origin master 
```

但它不断从我的路径中删除“/”，我最终得到这样的结果：

```
fatal: /C:Usersjameocircletest.git does not appear to be a git repository 
```

即使我反转斜杠（\ 或 /），它也找不到目录。我将如何在服务器上找到这个目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:18:25.503

最后，我决定使用 SMB 拨入目录会更容易，然后将我的 repo 指向那个挂载的目录。不是我确切问题的真正解决方案，但我会这样说：

smb 简单 100 倍，并且需要安装 0 个软件。

希望这可以帮助那些在同一件事上苦苦挣扎的人

# c++ - c++时间和随机函数

> ID：13848528
> 
> 赞同：1
> 
> 时间：2012-12-12T20:59:22.547
> 
> 标签：c++, srand, time-t

我正在尝试创建一个随机从牌组中抽牌的程序。问题是我需要使抽奖过程实际上是随机的，因为在没有其他因素改变的情况下使用 srand 和 rand 时每次抽奖都是相同的。因此，我将它附加到 time_t 秒，并且能够使绘制半/随机。这是因为我必须等待一秒钟才能改变 time_t 秒的参数。这是一个问题的原因是，如果我的程序两次抽取同一张牌（这是众所周知的），我的程序就会再次抽取。因此，如果它确实抽了两次同一张牌，它将被迫再抽大约 15 次（或多或少），直到 time_t 第二个参数发生变化。有没有办法测量毫秒或更小的时间单位，所以我没有这个问题？

这是代码，尽管没有附加检查匹配和组织过程（无论如何，这些只发生在初始抽签之后。）

```
int allow = 0;
    string cards[] = 
    {"02hearts", "03hearts", "04hearts", "05hearts", "06hearts", "07hearts", "08hearts","09hearts", "10hearts", "11hearts", "12hearts", "13hearts", "14hearts",
     "02clubs", "03clubs", "04clubs", "05clubs", "06clubs", "07clubs", "08clubs", "09clubs", "10clubs", "11clubs", "12clubs","13clubs", "14clubs","14clubs", 
    "02spades", "03spades", "04spades", "05spades", "06spades", "07spades", "08spades", "09spades", "10spades", "11spades", "12spades", "13spades", "14spades",
    "02diamonds", "03diamonds", "04diamonds", "05diamonds", "06diamonds", "07diamonds", "08diamonds", "09diamonds", "10diamonds", "11diamonds", "12diamonds", "13diamonds", "14diamonds"};
    string cardHand [5];
    string cardnumbers [5];
    int cardInts [5];
    string handSuites [5];
    char handSuitesChar [5];

    //check deck
    while(allow == 0)
    {

    //set clock
    time_t seconds;

    time(&seconds);

    srand((unsigned int) seconds);

    int type;

    //initiate counters
    int n = 0;
    int n1 = 0;
    int n2 = 0;
    int n3 = 0;
    int n4 = 0;

    //draw cards
    while(n < 5)
    {
        type = rand() % 52;
        cardHand[n] = cards[type];
        cout << cardHand[n] << ", ";
        n++;
    }

    cout << endl;

    //pull numbers from cards
    while(n1 < 5)
    {
        string character2;
        cardnumbers[n1] = cardHand[n1].at(0);
        character2 = cardHand[n1].at(1);
        cardnumbers[n1].append(character2);
        cout << cardnumbers[n1] << ", ";
        n1++;
    }
    cout << endl;
    cout << endl;

    //convert numbers to ints
    while(n2 < 5)
    {
        stringstream convert(cardnumbers[n2]);

        if( !(convert >> cardInts[n2]))
            cardInts[n2] = 0;

        cout << cardInts[n2] + 100 << ", ";

        n2++;
    }

    cout << endl;

    //pull out first letters for suites
    while (n3 < 5)
    {
        handSuites[n3] = cardHand[n3].at(2);

        cout << handSuites[n3]<< endl;
        n3++;
    }

    //convert letters to chars
    while (n4 < 5)
    {
        stringstream convert(handSuites[n4]);

        if( !(convert >> handSuitesChar[n4]))
            handSuitesChar[n4] = 0;

        cout << handSuitesChar[n4] + 100 << ", ";
        n4++;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:02:04.060

不要`srand()`在循环内调用。在程序开始时调用一次，然后`rand()`在需要随机数时使用。这会给你一个相当长的伪随机序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:09:38.997

正如 Rob 所指出的，问题不在于`rand()`，而在于你抽牌的方式。没有理由每次都抽同一张牌两次。你可以使用 Rob 的建议，然后洗牌，也可以从未洗牌的牌组中随机挑选一张牌，然后将其从牌组中移除（与末端交换，然后`pop_back`），这样就不能再抽了。

当然，永远不要在一个进程中多次为生成器播种。

# jquery - 如何为每个添加和删除具有新 id 的可折叠 div

> ID：13848529
> 
> 赞同：0
> 
> 时间：2012-12-12T20:59:27.437
> 
> 标签：jquery, jquery-ui, jquery-mobile

每次用户按下添加或删除时，我想使用 jQuery-mobile 添加/`div`删除。`data-role="collapsible"`然后给新的 div 一个新的 id。

我使用的克隆方法不起作用。

这是我的“坏”代码：

```
<body>

<div data-role="page"  id="page1"> 
    <div data-role="header">
        <h1>page1</h1>
</div>

<div data-role="content">
<div data-role="collapsible" data-theme="a" data-content-theme="a" id="collapsible">
<h3>New person</h3>
<ul >
<li>Name<input type="text"></li>
<li>Phone<input type="text"></li>
<li> <label for="date">Date Input:</label>
<li><input type="date" name="date" id="date" value="text"/></li>

                <li>  <a id="changePageButton2" data-role="button">show Calendar</a></li>
 </ul>
</div>
<div id="placeholder"></div>

</div>

<button id="add">add</button>

    </div>

</body>
</html>

<script>

$('#add').click(function() {    
    var myClone = $('#collapsible').clone();

    myClone.prependTo("#placeholder");   
    return false;
    });  

    $(function() {
    $("#changePageButton2").click(function() {
        $.mobile.changePage("#page2");
    });        
});

  $(function() {
    $("#changePageButton1").click(function() {
        $.mobile.changePage("#page1");
    });        
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:06:28.553

Not positive I get what you want to do, but here's some fixes, see this jsFiddle: [http://jsfiddle.net/Twisty/Tbmsa/](http://jsfiddle.net/Twisty/Tbmsa/) It seems to work when I click `add`, I see a new collapsible list, just under the first.

**HTML**

```
<html>
<body>
    <div data-role="page"  id="page1">
        <div data-role="header">
            <h1>page1</h1>
        </div>
        <div data-role="content">
            <div data-role="collapsible" data-theme="a" data-content-theme="a" id="collapsible">
                <h3>New person</h3>
                <ul>
                    <li>Name<input type="text"></li>
                    <li>Phone<input type="text"></li>
                    <li><label for="date">Date Input:</label></li>
                    <li><input type="date" name="date" id="date" value="text"/></li>
                    <li><a id="changePageButton2" data-role="button">show Calendar</a></li>
                </ul>
            </div>
            <div id="placeholder"></div>
        </div>
        <button id="add">add</button>
    </div>
</body>
</html> 
```

**JQUERY**

```
$(function() {
    $("#changePageButton2").click(function() {
        $.mobile.changePage("#page2");
    });
    $('#add').click(function() {
        var myClone = $('#collapsible').clone();
        myClone.prependTo("#placeholder");
        return false;
    });
    $("#changePageButton1").click(function() {
        $.mobile.changePage("#page1");
    });
}); 
```

# jquery - jquery 从 div 获取 the_permalink 并在脚本中调用它

> ID：13848537
> 
> 赞同：1
> 
> 时间：2012-12-12T20:59:40.377
> 
> 标签：jquery, wordpress

TL; DR 你好，有没有办法让 wordpress the_permalink 在脚本上像 echo 一样，并将它加载到 jquery 上，分别处理所有帖子？

长版：您好，在 wordpress 中，我试图让我的帖子看起来像图像缩略图，当我将鼠标悬停在它们上面时，它会显示帖子的标题和类别。当我将鼠标悬停在具有 image_thumb .show 脚本运行的 div 时，我就是这样做的。我希望它像我单击图像的任何位置时一样，它会转到帖子链接。当我点击类别时，它会进入类别。因为我不能在链接中使用另一个链接。我让 imagethumb div 转到带有“.click 函数”的链接，但我不能使用，因为 java 不能直接运行 php。那么无论如何我可以获得正确的链接，可能就像在某处回显并获取链接并加载它？

这是我的jQuery：

```
$(document).ready(function(){
            $(".select").hover(
                function(){         
                    $(this).find('.caption').fadeIn(500);
                },          
                function(){
                    $(this).find('.caption').fadeOut(500);
                }
            );
      $(".select").click(function(evt){
    window.location = '<?php the_permalink(); ?>';
});
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:11:27.187

应该有更优雅的解决方案，但快速总结是使用服务器端代码将所需的链接导出为此 div 的“data-blablah”属性，然后使用 jQuery 捕获它。

例如，一个链接可能看起来像`<a href="original/path" title="blah" class="select" data-permanlink="wanted/path">`

然后你可以使用 jQuery 来捕捉这个属性和标题，如下所示：

```
$(".select").click(function(evt){
    var newlink = this.attr('data-permanlink')
    window.location(newlink)
}); 
```

# python - Tkinter 从外部函数更改类中的小部件？

> ID：13848542
> 
> 赞同：2
> 
> 时间：2012-12-12T20:59:47.733
> 
> 标签：python, tkinter, raspberry-pi

我以前从未使用过python，我希望有人可以用这个为我指明正确的方向......我想要一个带有2个窗口的gui，我找到了一个代码示例。我正在尝试将树莓派的 RPi.GPIO 集成到其中，这似乎运行良好，到目前为止我所管理的是：

[http://pastebin.com/9aWDgg0r](http://pastebin.com/9aWDgg0r)

问题是我无法访问文本小部件以从我的函数中添加文本，据我了解，这是因为我的函数不在我想要更改的小部件的类之外。那么如何从类外部引用一个小部件并进行更改呢？

```
def check_five(): 
    if (GPIO.input(25) == GPIO.HIGH):
        fiveTimes_out()
    log.insert('1.0', '5 button down')
    root.after(10,check_five)

class MyApp(object):
    """"""
    #----------------------------------------------------------------------
    def __init__(self, parent):

        """Constructor"""
        self.root = parent
        self.root.title("Main frame")
        self.frame = Tk.Frame(parent)
        self.frame.pack()

        ....

        log = Tk.Text(state='normal', width=70, height=10, wrap='none')
        log.place(x=40, y=160) 
```

log.insert('1.0', '5 button down') 应该类似于 MyApp.log.insert('1.0', '5 button down') 吗？

我可以将这些函数移到类中，但是我不确定如何让这些函数与 .after 一起运行或将它们放在哪里。

```
 root.after(10,check_five)
    root.after(10,check_two)
    root.after(10,check_one)
    root.after(10,check_toggle) 
```

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:21:22.520

*   制作`check_five`,`check_two`和`check_one`的`check_toggle` 方法`MyApp`。
*   `self.log = Tk.Text`中定义`MyApp.__init__`。这样，其他方法`MyApp`就可以引用了`self.log`。
*   在`if __name__ == "__main__":`脚本的一部分，使用 `app.check_five`而不是`check_five`引用`app`的 `check_five`方法。对于其他`check_*`方法也是如此。

* * *

```
import Tkinter as Tk
import time
import RPi.GPIO as GPIO

GPIO.setmode(GPIO.BCM)

# setup 5 output pin
GPIO.setup(11, GPIO.OUT)
# setup 2 output pin
GPIO.setup(14, GPIO.OUT)
# setup 1 output pin
GPIO.setup(15, GPIO.OUT)

# set low output states on start
GPIO.output(11, GPIO.LOW)
GPIO.output(14, GPIO.LOW)
GPIO.output(15, GPIO.LOW)

# setup 5 input pin
GPIO.setup(25, GPIO.IN, pull_up_down = GPIO.PUD_DOWN)
# setup 2 input pin
GPIO.setup(24, GPIO.IN, pull_up_down = GPIO.PUD_DOWN)
# setup 1 input pin
GPIO.setup(23, GPIO.IN, pull_up_down = GPIO.PUD_DOWN)

# setup window toggle pin
GPIO.setup(22, GPIO.IN, pull_up_down = GPIO.PUD_DOWN)

# out functions light certain led a number of times     
def fiveTimes_out():
    #1
    GPIO.output(11, GPIO.HIGH)
    time.sleep(0.200)
    GPIO.output(11, GPIO.LOW)
    time.sleep(0.200)
    #2
    GPIO.output(11, GPIO.HIGH)
    time.sleep(0.200)
    GPIO.output(11, GPIO.LOW)
    time.sleep(0.200)
    #3
    GPIO.output(11, GPIO.HIGH)
    time.sleep(0.200)
    GPIO.output(11, GPIO.LOW)
    time.sleep(0.200)
    #4
    GPIO.output(11, GPIO.HIGH)
    time.sleep(0.200)
    GPIO.output(11, GPIO.LOW)
    time.sleep(0.200)
    #5          
    GPIO.output(11, GPIO.HIGH)
    time.sleep(0.200)
    GPIO.output(11, GPIO.LOW)
    time.sleep(0.200)

def twoTimes_out():
    #1
    GPIO.output(14, GPIO.HIGH)
    time.sleep(0.200)
    GPIO.output(14, GPIO.LOW)
    time.sleep(0.200)
    #2
    GPIO.output(14, GPIO.HIGH)
    time.sleep(0.200)
    GPIO.output(14, GPIO.LOW)
    time.sleep(0.200)        

def oneTimes_out():
    #1
    GPIO.output(15, GPIO.HIGH)
    time.sleep(0.200)
    GPIO.output(15, GPIO.LOW)
    time.sleep(0.200)

########################################################################
class OtherFrame(Tk.Toplevel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        Tk.Toplevel.__init__(self)
        self.geometry("640x480+0+0")
        self.configure(background = 'yellow')

        self.title("otherFrame")

########################################################################
class MyApp(object):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):

        """Constructor"""
        self.root = parent
        self.root.title("Main frame")
        self.frame = Tk.Frame(parent)
        self.frame.pack()

        btn = Tk.Button(self.frame, text = "Other Window", command = self.openFrame)
        btn.pack()

        btn2 = Tk.Button(self.frame, text = "Function test", command = twoTimes_out)
        btn2.pack()

        titleLabel = Tk.Label(text = "My Label")
        titleLabel.place(x = 40, y = 60)

        insertLabel = Tk.Label(text = "Label")
        insertLabel.place(x = 170, y = 110)

        self.log = Tk.Text(state = 'normal', width = 70, height = 10, wrap = 'none')
        self.log.place(x = 40, y = 160)

        thanksLabel = Tk.Label(text = "Thank You!")
        thanksLabel.place(x = 70, y = 350)

        self.log.insert('1.0', 'here is my text to insert')

    #----------------------------------------------------------------------
    def hide(self):
        """"""
        self.root.withdraw()

    #----------------------------------------------------------------------
    def openFrame(self):
        """"""
        self.hide()
        subFrame = OtherFrame()
        handler = lambda: self.onCloseOtherFrame(subFrame)
        btn = Tk.Button(subFrame, text = "Close", command = handler)
        btn.pack()
        secondPageLabel = Tk.Label(text = "HI")
        secondPageLabel.place(x = 170, y = 110)

    #----------------------------------------------------------------------
    def onCloseOtherFrame(self, otherFrame):
        """"""
        otherFrame.destroy()
        self.show()

    #----------------------------------------------------------------------
    def show(self):
        """"""
        self.root.update()
        self.root.deiconify()

    # in functions check if buttons are pushed and run specific functions
    # also write messages to log    

    def check_five(self): 
        if (GPIO.input(25) == GPIO.HIGH):
            fiveTimes_out()
            self.log.insert('1.0', '5 button down')
        else:
            self.log.insert('1.0', '5 button up')
        root.after(10, self.check_five)

    def check_two(self): 
        if (GPIO.input(24) == GPIO.HIGH):
            twoTimes_out()
            self.log.insert('1.0', '2 button down')
        else:
            self.log.insert('1.0', '2 button up')
        root.after(10, self.check_five)

    def check_one(self): 
        if (GPIO.input(23) == GPIO.HIGH):
            oneTimes_out()
            self.log.insert('1.0', '1 button down')
        else:
            self.log.insert('1.0', '1 button up')
        root.after(10, self.check_five)

    # check if window toggle button is pushed
    # you reference self in check_toggle, so check_toggle should probably be a method.
    def check_toggle(self): 
        if (GPIO.input(22) == GPIO.HIGH):
            self.openFrame()                 
        root.after(10, check_toggle)

#----------------------------------------------------------------------
if __name__ == "__main__":
    root = Tk.Tk()

    root.geometry("640x480+0+0")
    root.configure(background = 'red')
    app = MyApp(root)
    root.after(10, app.check_five)
    root.after(10, app.check_two)
    root.after(10, app.check_one)
    root.after(10, app.check_toggle)
    root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:09:02.887

在`__init__`MyApp 的方法中，您需要将其存储`log`为实例变量 (do `self.log = log`)，以便它在离开后仍然存在`__init__`。我建议做`check_five`一个 MyApp 的方法，在这种情况下你可以通过`self.log`. 如果你想保持`check_five`分开，那么你可以通过类似的东西来访问它`myapp.log`，你之前`myapp`通过做创建的地方`myapp = MyApp(root)`。在 MyApp 中使用 after 运行方法时，您可以访问它，例如`self.check_five`.

# java - 使用 super.toString 将 String 和 int 添加到父类

> ID：13848544
> 
> 赞同：2
> 
> 时间：2012-12-12T21:00:03.653
> 
> 标签：java, string, class, super

好的，所以我的程序有 4 个不同的类，我正在尝试在我的一个子类中添加一个新变量。我将展示所有涉及的类的代码，然后解释到底是什么错误。

第一个代码是我的人员类：

```
class Person {
private String myName; // name of the person
private int myAge; // person's age
private String myGender; // 'M' for male, 'F' for female

// constructor
public Person(String name, int age, String gender) {
    myName = name;
    myAge = age;
    myGender = gender;
}

public String getName() {
    return myName;
}

public int getAge() {
    return myAge;
}

public String getGender() {
    return myGender;
}

public void setName(String name) {
    myName = name;
}

public void setAge(int age) {
    myAge = age;
}

public void setGender(String gender) {
    myGender = gender;
}

public String toString() {
    return myName + ", age: " + myAge + ", gender: " + myGender;
} 
```

}

我的下一堂课是我的教师课：

```
public class Teacher extends Person {
private static int salary;
private static String subject;

public Teacher(String name, int age, String gender, String subject, int salary) {
    super(name, age, gender);
    //Constructor
    salary = salary;
    subject = subject;
    public String toString(){

    return super.toString() +", Subject: " + subject + " Salary: " + salary;
}
} 
```

}

所以我的程序的问题是，我正在尝试添加字符串主题和 Int Salary。我收到一个错误，一直说“令牌“字符串”上的语法错误，@预期”（教师课程的第 12 行），然后旁边的另一个错误说：“”语法错误，插入“EnumBody”来完成BlockStatement”（教师类的第 12 行）。

所以我要做的就是将新值添加到我的父类中，这样当我添加用户时，我可以输入他们的薪水和主题等等。对不起，如果我不太清楚。对于你们中的一些人来说，这可能是显而易见的，如果我不够清楚，请告诉我。

任何帮助是极大的赞赏！

谢谢，萨利

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T21:02:07.597

我没有仔细查看您的代码，但我相信这是问题所在：

```
public Teacher(String name, int age, String gender, String subject, int salary) {
    super(name, age, gender);
    //Constructor
    salary = salary;
    subject = subject;
    public String toString(){

    return super.toString() +", Subject: " + subject + " Salary: " + salary;
} 
```

您已经开始`toString`在构造函数的中间进行覆盖。您需要关闭构造函数，然后启动该`toString`方法：

```
public Teacher(String name, int age, String gender, String subject, int salary) {
    super(name, age, gender);
    //Constructor
    salary = salary;
    subject = subject;
}

public String toString() {    
    return super.toString() + ", Subject: " + subject + " Salary: " + salary;
} 
```

理想情况下，使用`@Override`注解告诉编译器验证您是否确实*也*覆盖了超类方法：

```
@Override
public String toString() {    
    return super.toString() + ", Subject: " + subject + " Salary: " + salary;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T21:01:24.750

一个问题是：

```
public Teacher(String name, int age, String gender, String subject, int salary) {
    super(name, age, gender);
    //Constructor
    salary = salary;
    subject = subject;
    public String toString(){

    return super.toString() +", Subject: " + subject + " Salary: " + salary;
}
} 
```

您的`toString()`方法在构造函数中。将其移到构造函数之外。

```
public Teacher(String name, int age, String gender, String subject, int salary) {
        super(name, age, gender);
        //Constructor
        salary = salary;
        subject = subject;
    }

   public String toString(){
       return super.toString() +", Subject: " + subject + " Salary: " + salary;
    } 
```

# groovy - 你如何指定范围到列表末尾？

> ID：13848552
> 
> 赞同：4
> 
> 时间：2012-12-12T21:00:20.190
> 
> 标签：groovy

考虑以下语句：

process.text.readLines[3..<-1]

似乎它应该工作。本质上，去掉数组的前两个元素。但是，范围运算符对结尾 -1 感到困惑，因为它小于 -1。您可以通过将数组存储为变量并将 -1 替换为 size() 来轻松解决此问题，但这需要额外的一行和变量的定义。还有其他想法如何轻松表达吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T21:50:19.437

我相信你可以这样做：

```
process.text.readLines()[ 2..-1 ] 
```

或者：

```
process.text.readLines().drop( 2 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T06:04:24.333

这也可以解决问题：

```
process.text.readLines().with { it[2..size()-1] } 
```

它比`drop`上面建议的简单调用要长，但根据更大的上下文，它可能会更好读一些。`with`让您绕过定义一个新变量。

# javascript - 从关联数组/对象中提取的全局变量？

> ID：13848561
> 
> 赞同：1
> 
> 时间：2012-12-12T21:00:51.720
> 
> 标签：javascript, arrays, variables, multidimensional-array, global-variables

我在一页上有 50 个点，每个单独的 div。当我单击一个时，我想使用 ID 从数组中提取值。我可以获得 ID，但我无法使用该值从我的数组中取出东西。也许是全局变量问题？没有把握。甚至不确定这是否是处理访问多个数据的多次点击的最佳方式。任何帮助表示赞赏！

```
var location0 = {"name" : "Location 1", "image" : "image1.jpg"};

$('.dot').click(function(){
    var thisLocation = $(this).attr("id");
    alert(thisLocation); //Returns "location0"
    alert(thisLocation["image"]); //Returns "undefined"
}); 
```

[这是一个小提琴。](http://jsfiddle.net/y8x9T/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:07:48.450

我会这样做：

```
var locations = {
    location1 : {"name" : "Location 1", "image" : "image1.jpg"},
    location2 : {"name" : "Location 2", "image" : "image2.jpg"}
}

$('.dot').click(function(){
    alert(locations[this.id].name);
});
​ 
```

[**小提琴**](http://jsfiddle.net/y8x9T/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T21:11:10.090

`$(this).attr("id")`返回一个字符串`"location0"`。如果你想使用它，你必须得到一个实际的`location0`变量，所以你必须使用`eval()`函数替换你的代码行之一。像这样：

> `var thisLocation = eval($(this).attr("id"));`

但是，我建议使用一个新数组，其中`"location0"`将是一个键，那么您只需要使用类似字符串访问一个键`locations["location0"]`并避免使用`eval()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:02:52.283

你需要像这样访问它：

```
var test = {
    location0:    {"name" : "Location 1", "image" : "image1.jpg"}
};

$('.dot').click(function(){
    var thisLocation = $(this).attr("id");
    alert(thisLocation); //Returns "location0"
    alert(test[thisLocation]["image"]); //Returns "undefined"
}); 
```

​</p>

编辑：这有效

另外它首先对您不起作用的原因是因为 thisLocation 是一个字符串，而不是它自己的对象，因此您需要使用括号通过传递名称来访问对象属性。我只是不建议

# asp.net - 尝试在生产机器上而不是在开发机器上访问报表服务器时出现“未知错误”

> ID：13848563
> 
> 赞同：2
> 
> 时间：2012-12-12T21:00:59.233
> 
> 标签：asp.net, vb.net, visual-studio-2010, iis-7, ssrs-2008

我有一个使用 VB.NET、SSRS 和 SQL Server 2008 R2 在 Visual Studio 2010 中开发的 ASP.NET 4.0 应用程序。应用程序中有一个页面收集来自用户的输入，它用作参数从 SQL Server 数据库中获取数据，并将其放入 SSRS 报告中，然后将其转换为 PDF 文件。这一切在我的开发机器上运行良好，但在服务器上特别是当它尝试对 ServerReport 引擎执行任何操作时出错。除了能够从我的开发机器上打开报告外，我还可以直接在报告管理器中打开它。当我尝试从生产机器打开报告时，报告没有打开，错误由页面左下角的黄色三角形指示，双击打开此消息。

```
`Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; GTB7.4; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; CMDTDF; BRI/1; .NET4.0C; InfoPath.3; .NET4.0E)
Timestamp: Wed, 12 Dec 2012 20:03:54 UTC

Message: Sys.WebForms.PageRequestManagerServerErrorException: An unknown error occurred while processing the request on the server. The status code returned from the server was: 500
ScriptResource.axd                                                              Line: 2
Code: 0                                                                     Char: 74741
URI: http://intranet/webapps/RecordedOnlyIncidents/ScriptResource.axd?d=GnweTchBv7S3iPh-J2y96yey3C3_pzddkEeS0GIM0GHz6A1wrAToLVysD0C0nmS_sugidnIpUa9dt3MXUvPZgTV3kdSrhNnjjikolQ4t_qbyruxeky4MDgxR-klgMjZP0&t=ffffffffbad362a4` 
```

生产机器运行 Windows 2003 和 IIS 6 开发机器运行 Window 7 和 IIS 7 这两台机器都访问 SQL Server 和 Report Server，它们位于运行 Windows Server 2008 R2 Standard 的 VMware 虚拟服务器上。

我查看了运行应用程序的服务器上的事件日志，但没有找到任何关于实际错误的线索。我还查看了位于 C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\LogFiles 的报表服务器上的日志文件。当我在我的开发机器上运行应用程序时，报告会打开，并且将以下行添加到日志中，“library!ReportServer_0-30!1614!11/27/2012-20:18:54:: i INFO: RenderForNewSession(' /RecordedOnlyIncidents/Reports/AllIncidentsWithParameters')”。如果我随后更改开发机器上指定无效路径的代码，从而出现错误，则仍然有一个条目指定错误。“库！ReportServer_0-30！1674！11/27/2012-18:30:19::e 错误：抛出 Microsoft.ReportingServices.Diagnostics.Utilities。InvalidItemPathException: , Microsoft.ReportingServices.Diagnostics.Utilities.InvalidItemPathException: 项目 '/ReportViewer.aspx?/RecordedOnlyIncidents/Reports/AllIncidentsWithParameters' 的路径无效。完整路径的长度必须少于 260 个字符；其他限制适用。如果报表服务器处于本机模式，则路径必须以斜杠开头。;" 但是，如果我在服务器上运行应用程序并收到错误，则日志中没有条目，所以我假设甚至没有尝试访问报表服务器。

我的代码如下：

```
`Dim r = New ServerReport
r.ReportServerUrl = New Uri("http://vm-intranet/ReportServer")
r.ReportPath = "/RecordedOnlyIncidents/Reports/AllIncidentsWithParameters"
Dim EmployeeNumber As String = IIf(txtSearchEmployeeNumber.Text = "", Nothing, txtSearchEmployeeNumber.Text)
Dim IncidentType As String = IIf(ddlSearchIncidentType.SelectedItem.Text = "", Nothing, ddlSearchIncidentType.SelectedItem.Text)
Dim BeginningDate As String = IIf(txtBeginningDate.Text = "", Nothing, txtBeginningDate.Text)
Dim EndingDate As String = IIf(txtEndingDate.Text = "", Nothing, txtEndingDate.Text)
Dim parmEmpNumEmployeeNumber As New ReportParameter("EmployeeNumber", EmployeeNumber)
Dim parmIncidentType As New ReportParameter("IncidentType", IncidentType)
Dim parmBeginningDate As New ReportParameter("BeginningDate", BeginningDate)
Dim parmEndingDate As New ReportParameter("EndingDate", EndingDate)
Dim parameters(3) As ReportParameter
parameters(0) = parmEmpNumEmployeeNumber
parameters(1) = parmIncidentType
parameters(2) = parmBeginningDate
parameters(3) = parmEndingDate
r.SetParameters(parameters)
Dim warnings As Warning() = Nothing
Dim streamids As String() = Nothing
Dim mimeType As String = Nothing
Dim encoding As String = Nothing
Dim extension As String = Nothing
Dim reportOutput As Byte() = r.Render("PDF", Nothing, mimeType, encoding, extension, streamids, warnings)
Dim path As String = System.AppDomain.CurrentDomain.BaseDirectory
Dim stream As New IO.FileStream(path & "/MyReport.pdf", IO.FileMode.Create)
IO.FileMode.Create)
stream.Write(reportOutput, 0, reportOutput.Length)
stream.Close()
Dim Script As String = "<script type='text/javascript'> win=window.open("""",""_blank"",""resizable=Yes,height=600"");win=win.document;win.write(""<style>body{margin:0px;}</style>"");win.write(""<title> Incidents Report</title>"");win.write(""<iframe src='MyReport.pdf' style='width:100%;height:100%;'></iframe>"");</script>"
ScriptManager.RegisterStartupScript(Me, Me.GetType(), "OpenReport", Script, False)` 
```

错误发生在该行：

```
`r.SetParameters(parameters)` 
```

但是，我也尝试过使用不带参数的报告，然后在线发生错误：

```
`Dim reportOutput As Byte() = r.Render("PDF", Nothing, mimeType, encoding, extension, streamids, warnings)` 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:34:12.030

我找到了答案，服务器上安装了错误版本的 Report Viewer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:38:56.273

如果您不传递正确的扩展参数。还要检查您是否对网站的根文件夹具有写入权限。

我们做了类似的事情：

```
ReportViewer1.ServerReport.Render(exportFormat, Nothing, mimeType, encoding, exportFormat, streams, warnings) 
```

# matlab - Matlab / Java Linked List Error需要一个解决方案

> ID：13848568
> 
> 赞同：1
> 
> 时间：2012-12-12T21:01:29.427
> 
> 标签：matlab, linked-list

我正在做我的最终大学项目，我的时间太短了，这个项目是关于无线传感器网络的，我必须模拟最近的一篇关于它的论文。大部分编码已完成，但我有一个关于链表的简单问题（我使用 matlab 并将 java 库导入其中以使用链表）

好的，这里有一些解释，我有一个队列/列表，每次检查列表的头部时，它是否是目标，如果它不是目标，它会删除第一个项目并获得第二个，这实际上是第一个当我的列表只有一个项目并且它不是目标时会出现列表问题，因此代码删除第一个项目，之后代码尝试获取第一个为空且为空的项目，即发生错误时，

我的目标是在检查/搜索所有列表后如果成功则转 flagg=1 如果不是 flagg=0

```
while temp ~= goal;

    for K=1:size(G,1)

     if temp == G(K,1)
         q.add(G(K,2))

     end
    end

     if (~q.isEmpty())

       q.removeFirst();
       temp=q.getFirst(); 

     else
         flagg=1

     end

end 
```

谢谢。达德曼

# regex - 货币正则表达式

> ID：13848570
> 
> 赞同：3
> 
> 时间：2012-12-12T21:01:31.347
> 
> 标签：regex

我想我为我需要的东西创建了一个有效的正则表达式。只是想知道是否有人可以打破它或看到更短的编写方法。

正则表达式应验证以下内容...

*   美元符号可选
*   负数用括号表示，而不是减号
*   如果为负数，美元符号应在括号外
*   逗号是可选的
*   最大号码为 999999.99
*   最小值为 (999999.99)
*   不必提供小数，但如果提供，不超过两位数

所以这里有一些有效的例子......

```
9
$9
$0.99
($999,999.99)
(999999)
($999999)
(999,999)
99,999.9 
```

这就是我想出的：

```
^\$?(((\d{1,6}(\.\d{1,2})?)|(\d{1,3},\d{3}(\.\d{1,2})?)|\(((\d{1,6}(\.\d{1,2})?)|(\d{1,3},\d{3}(\.\d{1,2})?))\)))$ 
```

更正，我的规范是错误的，如果使用美元符号，它必须在括号内。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T21:19:13.053

这是一个较短的替代方案（114 个字符为 56 个字符），它几乎适用于所有正则表达式风格：

```
^\$?(?=\(.*\)|[^()]*$)\(?\d{1,3}(,?\d{3})?(\.\d\d?)?\)?$ 
```

示例：[http ://www.rubular.com/r/qtYHEVzVK7](http://www.rubular.com/r/qtYHEVzVK7)

解释：

```
^                # start of string anchor
\$?              # optional '$'
(?=              # only match if inner regex can match (lookahead)
   \(.*\)          # both '(' and ')' are present
   |               # OR
   [^()]*$         # niether '(' or ')' are present
)                # end of lookaheand
\(?              # optional '('
\d{1,3}          # match 1 to 3 digits
(,?\d{3})?       # optionally match another 3 digits, preceeded by an optional ','
(\.\d\d?)?       # optionally match '.' followed by 1 or 2 digits
\)?              # optional ')'
$                # end of string anchor 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:14:52.943

鉴于您的示例，以下正则表达式将起作用：

```
/^(\$?(?(?=\()(\())\d+(?:,\d+)?(?:\.\d+)?(?(2)\)))$/gm 
```

（注意：标志和分隔符取决于语言）

此正则表达式设置不必要的反向引用只是为了节省正则表达式长度。您可以忽略第二个反向引用。如果这是无法容忍的，则表达式将变得相当长。

看看这里：[http ://regex101.com/r/fH3lV1](http://regex101.com/r/fH3lV1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T21:16:23.613

您可以更简洁地表达“一位到六位数字之间；最后三位数字之前的逗号是可选的” `\d{1,3}(,?\d{3})?`。这也允许您仅包含两个副本`(\.\d{1,2})?`：一个用于正数，一个用于负数，而不是一个用于无逗号的正数，一个用于带逗号的正数等。

此外，`\d{1,2}`可以稍微缩短为`\d\d?`，但我不确定这是否是一种改进。

所以，除非有一些符号`(?(1))`来测试是否设置了反向引用，这是我看到的最短版本：

```
^(\$?\d{1,3}(,?\d{3})?(\.\d\d?)?|\(\$?\d{1,3}(,?\d{3})?(\.\d\d?)?\))$ 
```

您的正则表达式和这个正则表达式的一个可能不受欢迎的方面是它们将允许类似 的内容`$00,012.7`，即使没有人以这种方式使用前导零。您可以通过要求第一个数字为非零，然后添加一个特殊情况来处理`$0`等等`(0.12)`来解决这个问题：

```
^(\$?(0|[1-9]\d{0,2}(,?\d{3})?)(\.\d\d?)?|\(\$?(0|[1-9]\d{0,2}(,?\d{3})?)(\.\d\d?)?\))$ 
```

**编辑添加：**使用 FJ 在他/她的回答中建议的前瞻断言，后者可以缩短为：

```
^(?!\(.*[^)]$|[^(].*\)$)\(?\$?(0|[1-9]\d{0,2}(,?\d{3})?)(\.\d\d?)?\)?$ 
```

# asp.net-mvc-4 - ASP.NET MVC：需要帮助组织数据结构类

> ID：13848572
> 
> 赞同：0
> 
> 时间：2012-12-12T21:01:45.447
> 
> 标签：asp.net-mvc-4, ef-code-first

我来自 PHP/MySQL 背景，所以我在使用 .NET 时遇到的问题可能源于此。在发布了如何为我们的计算机硬件和软件创建库存跟踪器的一周之后，终于有人告诉我他认为我做错了。问题不是我的代码，而是我的设计。这当然是可能的。我正在尝试在 EF Code First 中执行此操作，而使用代码生成数据库的想法对我来说是陌生的。但是，我让数据库正常工作，一切都指向正确的事情。但我无法从数据库中提取我需要的内容。

我想做的是创建一个仪表板页面，其中包含硬件类型的类别。所以会有一个 PC 列表、一个监视器列表、一个打印机列表等。最初，我所做的是基于我对 MySQL 的了解。我创建了一个 Hardware 表（类）和一个 HardwareTypes 表（类）。在 MySQL 中，我所做的就是将 HardwareType 的 ID 放在 Hardware 表中，这样我就可以进行连接了。然后我可以通过一个简单的内部连接来获得我所有的 PC。

.NET 似乎有所不同。它想创建一个中间表——HardwareHardwareTypes，然后连接另外两个表。这看起来很奇怪，但没关系。但是当我去拿我所有的电脑时，我似乎无法获得编写查询所需的帮助。所以请看看我的查询和我的课程，让我知道你的想法。

查询，它返回硬件，而不是硬件类型——我如何获得硬件类型？）：

```
var pcs = db.Hardware.Where(h => h.HardwareType.Any(hwt => hwt.HType == "PC"));
ViewBag.Pcs = pcs.ToList(); 
```

硬件类：

```
public class Hardware
    {
        public int Id { get; set; }
        public virtual ICollection<DeviceType> Type { get; set; }
        public string AssetTagId { get; set; }
        public virtual ICollection<Manufacturer> Manufacturer { get; set; }
        [Required]
        [StringLength(50)]
        public string ServiceTagId { get; set; }
        [Required]
        [StringLength(50)]
        public string SerialNumber { get; set; }
        [Required]
        [StringLength(75)]
        public string ProductNumber { get; set; }
       // [Required]
        [StringLength(20)]
        public string PurchaseDate { get; set; }
        [StringLength(20)]
        public string WarrantyExpiration { get; set; }
        [Required]
        [StringLength(20)]
        public string WarrantyType { get; set; }
        public virtual ICollection<Location> Location { get; set; }
        public virtual ICollection<HardwareType> HardwareType { get; set; }
        [Required]
        [StringLength(2000)]
        public string Notes { get; set; }
        public string POATag { get; set; }
    } 
```

硬件类型类：

```
public class HardwareType
    {
        public int Id { get; set; }
        [Required]
        [StringLength(128)]
        public string HType { get; set; }
        public virtual ICollection<Hardware> Hardware { get; set; }
    } 
```

同样，如果我需要更多高级设计更改，请告诉我。如果我需要不同的查询，请告诉我。第三个（中间）表是动态生成的，很难知道如何发布。我会很感激这方面的任何帮助。我最终需要的是个人电脑列表。以下是一些示例种子数据：

```
 ... new Hardware { AssetTagId = "2134", 
Type = device.Where(h => h.DType == "Network Device").ToArray(), 
Manufacturer = manuf.Where(h => h.ManufacturerName == "SonicWall").ToArray(), 
ServiceTagId = "5243", 
SerialNumber = "3456", 
ProductNumber = "2345", 
PurchaseDate = "2012-10-23", 
WarrantyExpiration = "2012-11-12", 
WarrantyType = "NBD", 
Location = loc.Where(h => h.LocationName == "Paradise Lane").ToArray(), 
Notes = "Scrapped",  
HardwareType = htype.Where(h => h.HType == "PC").ToArray()}, ...

 var htype = new List<HardwareType> {
                new HardwareType { HType = "PC" },
                new HardwareType { HType = "Monitor" },
                new HardwareType { HType = "Printer" },
                new HardwareType { HType = "Miscellaneous" }
            }; 
```

如果我的种子数据结构错误，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:32:37.883

首先让我告诉你，在 PHP/MySQL 中工作的相同数据库设计也可以在这里工作。

我将向您建议的最简单的方法是在数据库中创建一个视图，该视图连接表 Hardware 和 HardwareType，将 nwly 创建的视图添加到您的数据库模型中，并从视图而不是表中获取所需的数据。

# android - 使用另一个项目的包

> ID：13848574
> 
> 赞同：0
> 
> 时间：2012-12-12T21:01:58.947
> 
> 标签：android, eclipse

我正在尝试运行我从互联网下载的 ocr android 项目的示例......它在导入中说

```
import microsoft.hawaii.sampleappbase.HawaiiBaseApplication; 
```

这是添加到我的 Eclipse 工作空间中的另一个 android 项目中的包.. 我如何使它工作？另一件事是在项目的属性中提到了android-16！它说在加载 sdk 之前无法解析目标“android-16”！

```
package microsoft.hawaii.sampleapp.ocrservice;

import microsoft.hawaii.sampleappbase.HawaiiBaseApplication;

/**
*
*/
public class OcrApplication extends HawaiiBaseApplication {
    /**
 * Gets current authentication type
 * 
 * @return AuthenticationType
 */
@Override
public AuthenticationType getAuthType() {
    return AuthenticationType.GUID;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:21:30.110

> 我怎么做这个工作？

将 JAR 添加到项目`libs/`目录中。

> 另一件事是在项目的属性中提到了android-16！它说在加载 sdk 之前无法解析目标“android-16”！

从您的 SDK 管理器下载 Android 4.1.2 SDK 平台（请参阅以下屏幕截图中突出显示的行）：

![Android SDK 管理器](../Images/8d02bfae9146a2b08294ce86038fdcfd.png)

# plone - 如何使用 Diazo 将元素的子元素复制到其他元素的特定属性

> ID：13848577
> 
> 赞同：3
> 
> 时间：2012-12-12T21:02:00.117
> 
> 标签：plone, diazo, xdv

在以下情况下，如何使用 Diazo 正确填充从原始页面获取内容的特定标签属性？

新站点的骨架有几个元标记，如下所示：

```
<meta name="Author" content="author" /> 
```

Plone 默认欢迎页面中作者的 XPATH：

```
//span[@class='documentAuthor']/a 
```

新主题骨架中 Author 元标记的 XPATH：

```
/html/head/meta[@name='Author'] 
```

因此，我想将 content="author" 填充为原始页面中的 content="Admin" 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:29:33.830

您不应该尝试完成这项工作。

这是关于商业的事情，主题永远不应该尝试做这种事情。这取决于页面。你会有很多例外 * 搜索页面 * 收藏 * 登录页面 * 站点地图

在所有这些页面上，拥有作者元数据是没有意义的。

因此，您应该通过创建插件和开发“viewlet”来实现您的目标。

更多关于 viewlet：http: [//developer.plone.org/views/viewlets.html](http://developer.plone.org/views/viewlets.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:21:46.853

到目前为止，我发现的最佳解决方案是：

```
<replace theme="/html/head/meta[@name='Author']">
 <xsl:variable name="auth" select="//span[@class='documentAuthor']/a" />
 <meta name="Author" content="{$auth}" />
</replace> 
```

# c# - ASP.NET MVC - Telerik MVC TreeView 绑定到模型

> ID：13848587
> 
> 赞同：1
> 
> 时间：2012-12-12T21:02:40.673
> 
> 标签：c#, asp.net-mvc-3, treeview, telerik-mvc

我的应用程序是一个 asp.net MVC；我正在使用 Telerik MVC 树视图来显示模型中的节点，它运行良好，除非一个节点的值为空。

这是我的树视图：

```
<% IEnumerable<MyTreeNode> tree = ViewBag.TreeData.Nodes; %>
<%= Html.Telerik().TreeView().Name("TreeView").BindTo(tree, mappings =>
         {
    mappings.For<MyTreeNode>(binding => binding.ItemDataBound((item, myTreeNode) => {
                                    item.Text = myTreeNode.Text; })
                                    .Children(myTreeNode => myTreeNode.Nodes));
                                   })
  .ClientEvents(events => events.OnSelect("onSelect")) %> 
```

我收到以下错误（指向 myTreeNode.Text）“值”不能为空或为空。

我试过：

```
 if (!IsNullOrEmpty(item.Text))
     {
      item.Text = myTreeNode.Text;
     } 
```

我收到此错误：当前上下文中不存在名称“IsNullOrEmpty”。

任何建议，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:08:27.547

你试过这个吗？

```
item.Text = (myTreeNode.Text != null) ? myTreeNode.Text : "" 
```

或者

```
item.Text = (myTreeNode != null) ? myTreeNode.Text : "" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:11:09.570

IsNullOrEmpty() 是对字符串类的静态方法调用。

```
if(!string.IsNullOrEmpty(item.Text))
{

} 
```

# r - ggplot函数选择多个子集

> ID：13848591
> 
> 赞同：0
> 
> 时间：2012-12-12T21:02:53.043
> 
> 标签：r, subset, ggplot2

我不是 ggplot2 包的专家。我有一个子集选择问题。

这是我产生这种图表的代码......

```
 g <- ggplot(merged_data,aes_string(x=Order,fill=var.y)) + 
               scale_y_continuous(expand = c(0.05,0)) + 
              xlab(paste("Order","Total number of sequences",sep=" - ")) + 
              ggtitle(main.str) +
              geom_bar(position="fill", 
                       subset = .(Order !=  ""), 
                       width=0.6,hjust =0)+
              geom_text(stat="bin",  
                        subset = .(Order !=  ""), 
                        color="black", hjust=1, vjust = 0.5, size=2,
              aes_string(fill=NULL,x = Order,y = "0", label="..count.."))+
              coord_flip() 
```

For `geom_bar`and `geom_text` I 选择删除空名称的数据子集

```
subset = .(eval(parse(text=var.x)) !=  "") 
```

这是一个只有 2 条的简单示例。这是一个数据...

```
Collector<- c("BK","YE_LD","BK","JB","JB",
         "BK","BK","BK","JB","YE_LD")
Order<-c("A","B","B","B","A",
         "B","B","A","B","B")
data <- data.frame(Order,Collector) 
```

![在此处输入图像描述](../Images/f49db41fed5b3532f2a2c41c1bff30b2.png)

现在我想为我的子集添加一个截止值......只显示具有最少计数的变量。

因此，如果我设置 cutoff = 4 ... 我只会得到底部有 7 个计数的条，顶部的条有 3 个计数不应该出现。

我不知道我该怎么做......谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:41:21.340

您可以创建数据的子集并在`ggplot`. 以下命令将删除`Order`少于四个数据点的所有条件：

```
subset(data, Order %in% names(which(table(Order) >= 4)))

   Order Collector
2      B     YE_LD
3      B        BK
4      B        JB
6      B        BK
7      B        BK
9      B        JB
10     B     YE_LD 
```

# android - Android 在画布上拖动两个图像

> ID：13848593
> 
> 赞同：1
> 
> 时间：2012-12-12T21:02:59.627
> 
> 标签：android, imageview, android-canvas

我的最终目标是能够将两个（或更多）图像添加到视图/画布，然后将该画布变成单个位图。我看过很多关于在视图上拖动图像的类似 SO 帖子，但是，它们都没有涉及拖动多个图像。

我目前正在使用矩阵命令来旋转和缩放，它们工作正常，但仅适用于一张图像。我使用的代码与[这篇](https://stackoverflow.com/questions/5894736/rotate-zoom-drag-image-in-android-imageview)文章类似。这里的问题是在图像上使用 fill_parent 将只允许拖动一个图像，因为它位于另一张图像的顶部。使用 wrap_content 将只允许在图像当前大小的范围内拖动图像，从而产生裁剪后的图像。

那么，无论如何要编辑此代码（或使用新代码）以允许拖动和/或缩放多个图像？正如我所提到的，还有许多其他关于此的 SO 帖子，但没有任何可靠的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:06:22.213

查看[Android Multitouch Controller](http://code.google.com/p/android-multitouch-controller/)项目中的演示应用程序，几乎所有事情都已经为您完成了。它允许您在自定义视图上拖动、旋转和缩放许多图像。我过去曾将其用于自定义图像裁剪器，效果很好。

至于将生成的 Canvas 转换为位图，我有一个 Android 多点触控控制器项目的修改版本来做到这一点。[你可以在 GitHub 上](https://github.com/wsanville/modified-multitouch-controller)看到该项目。

# linux - 如何从 cron 条目中自动清除 perl 脚本日志？

> ID：13848594
> 
> 赞同：0
> 
> 时间：2012-12-12T21:03:04.543
> 
> 标签：linux, perl, logging, cron, purge

我有一个 crontab 设置，每小时运行一个 perl 脚本，每小时 5 分钟（所以 2:05、3:05、10:05 等）：

```
5 * * * * perl /abs/path/to/my/script.pl >> /abs/path/two/my/script-log.txt 2>&1 
```

如您所见，它还将 STDOUT 和 STDERR 都重定向到同一个日志文件。

我被要求重构 Perl 脚本、crontab 条目，或者添加任何必要的新代码/脚本，以便每天晚上，午夜，`script-log.txt`清除/刷新/清空。

也就是说，每天晚上，在午夜，如果`script-log.txt`里面有 20MB 的文本，则将其清理掉，以便它现在没有任何内容（0字节），然后在 12:05 AM crontab 将重新启动，运行`script.pl`，然后开始向同一个`script-log.txt`日志文件添加更多文本。

如果有一种方法可以使用一些 Linux/Perl 魔法来修改 crontab 条目以设置这样的“每日滚动日志文件”，那将会*非常容易。*在最坏的情况下，我们总是可以编写一个新脚本来清除`script-log.txt`并在午夜运行它。但是我的上级非常希望没有另一个 cron 工作，并且正在寻找一种方法来从条目本身（如果可能的话）做到这一点。

实际上，我们有几十个类似这样工作的条目，因此编写“清除脚本”并将其定时在午夜运行的问题在于，我们将不断更新清除脚本，因为我们添加/删除其他生成的脚本这些类型的日志文件。因此，如果我们可以在入口级别设置这样的清除，每个 cron 条目都会自行清理。感谢您提前提供任何见解/指针/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:07:31.167

您可能想查看[logrotate](http://linuxcommand.org/man_pages/logrotate8.html)。

# java - 如何将日志参数存储在二维数组中

> ID：13848595
> 
> 赞同：1
> 
> 时间：2012-12-12T21:03:09.947
> 
> 标签：java, html

我在Java中有一个字符串-

```
parameter1 => yes
parameter2 => yes
parameter3 => Tom
parameter4 => log4
parameter5 => 04/20/2011:15:23:21
parameter6 => 500
parameter7 => [DAILY, MTD, BIMTD] 
```

现在如何将参数值对保存在二维数组中？我需要将 HTML 页面中的参数值对显示为表格，一列包含参数名称，另一列包含值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:07:05.183

将所有这 7 个参数保留为自定义类的字段，然后使用该类的实例数组将更容易实现。

```
class Custom
{
   String param1, param2, ...
   // String[] params => you can also store parameters in an array.

}

Custom[] array = new Custom[50]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:21:59.990

从您提供的线索来看，我相信可以将 HashMap（键、值对）视为一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:54:28.250

你可以使用地图。

```
Map<String, String> map = new HashMap<String, String>();
//Populate the map
map.put("ParamName", "ParamValue");
...

//Iterate on the values
for (Entry e : map) {
  System.out.println("Param " +  e.getKey() + " Value " + e.getValue()); 
} 
```

# xhtml-1.0-strict - !DOCTYPES 更详细的文档类型定义

> ID：13848596
> 
> 赞同：1
> 
> 时间：2012-12-12T21:03:11.657
> 
> 标签：xhtml-1.0-strict

我正在对此进行详细研究，只需要关于!DOCTYPE 的各个部分的更具体的答案。

特别是我想彻底分解一个严格的 !DOCTYPE 的部分。

我知道有各种各样的 !DOCTYPES，我想知道声明的每个部分的含义，因为它被分解成各个部分，这将帮助我继续我的研究。

!DOCTYPE html PUBLIC（让我们从这里开始）

我知道 doctype 是您应该在代码中的 html 页面顶部看到的第一件事，它告诉浏览器如何显示您的代码。

然后我们来html：说明这是一种正在使用的超文本标记语言

“公共”到底指的是什么，你能帮我解决这个问题吗？

# objective-c - iOS twitter API 单用户 oAuth

> ID：13848602
> 
> 赞同：0
> 
> 时间：2012-12-12T21:03:37.373
> 
> 标签：objective-c, ios, twitter

我希望从 twitter 1 api 迁移到 1.1，并且我了解需要使用 oAuth 来验证我的请求。

我的应用程序目前所做的只是检索一组用户的时间线并将其显示给应用程序用户。

我不希望用户必须登录 Twitter 才能查看用户的时间线。使用限制不是问题（每 15 分钟 15 个）

有人可以向我解释从这里去哪里，我想将我的部署目标保持在 4.3，并且在 twitter iOS 单用户 OAUTH 上没有太多的查找文档。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:31:51.590

我设法使用 Github 上提供的“ABOAuthCore”库解决了这个问题。这为我创建了相关的标头值并被用作：

```
NSString *authorizationHeader = OAuthorizationHeader(newsURL,
                                                     @"GET",
                                                     postBody,
                                                    KConsumerKey, 
                                                     KConsumerSecret,
                                                     KAccessToken, 
                                                     KAccessTokenSecret); 

[request setValue:authorizationHeader forHTTPHeaderField:@"Authorization"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:07:57.233

在[dev.twitter.com](http://dev.twitter.com)创建应用 ID 后，在“详细信息”选项卡中将有一个地方可以创建单个用户令牌。使用它代替用户的令牌和令牌秘密。

![在此处输入图像描述](../Images/9bd3619d86238cb32478138008593f6d.png)

我建议只在只读访问级别上执行此操作。

# objective-c - Mac 应用程序和本地网站/服务器之间的通信

> ID：13848604
> 
> 赞同：0
> 
> 时间：2012-12-12T21:04:01.403
> 
> 标签：objective-c, macos, webserver, localhost

我想通过本地网站控制 Mac 应用程序。我认为最好的方法是使用我的 mac 应用程序创建一个网络服务器，然后从网站发送（主要）整数值，反之亦然。我已经找到了 CocoaHTTPServer，但我不知道该怎么做。

首先，我想在网站上有一个滑块，它会更新我的 mac 应用程序中的滑块（反之亦然）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:26:53.047

CocoaHTTPServer 将允许您将 Web 服务器**嵌入**到您的应用程序中，这是您尝试完成的一个很好的解决方案。

关于如何设计它的一些想法：

*   您需要继承 HTTPConnection。
*   在 PostHTTPServer 示例上为您的解决方案建模。
*   您可以获取要发送到 URL 的数据。类似的东西`POST http://localhost:12345/updateSlider/123`。（您可能不需要实际的 POST，但没有理由它不起作用。从技术上讲，PUT 会更正确。）
*   从处理那部分开始——浏览器向您的应用程序发送一个值。要生成用于测试目的的 POST/PUT 请求，请使用`curl`，或者构建一个静态页面并在浏览器中打开它。
*   当您开始工作时，请担心向用户呈现网页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:19:47.703

您将在单独的线程上启动或操作 Web 服务器，并始​​终等待传入的请求。每当您收到请求时，您都会相应地处理它。

此外，如果您使用的是这个：[https](https://github.com/robbiehanson/CocoaHTTPServer) ://github.com/robbiehanson/CocoaHTTPServer/ ，那么有几个例子可以说明如何做到这一点。从那里复制代码以开始 Web 服务器处理请求。在那之后，考虑一下你想发送什么以及你想做什么。为网站构建一个表单或其他东西并向网络服务器提交请求。

# android - 仅当侦听器为该提供程序注册时才调用 onProviderEnabled 吗？

> ID：13848605
> 
> 赞同：3
> 
> 时间：2012-12-12T21:04:06.627
> 
> 标签：android, listener, android-location

问题很简单：**对于在启用特定提供程序时调用位置侦听器的 onProviderEnabled() 方法，该侦听器是否必须已经从同一提供程序请求更新？**

例如，如果您向网络提供商的位置管理器注册位置更新：

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0,
                0, locationListener); 
```

监听器有一个 onProviderEnabled() 方法：

```
@Override
    public void onProviderEnabled(String provider) {
        Log.d(TAG, provider + " provider enabled"); } 
```

如果我现在打开 GPS 位置提供程序，会调用 onProviderEnabled 吗？

根据我的经验，不，它不会被调用，除非位置侦听器也已注册以接收来自 GPS 提供商的更新。如果它应该是这样的，那么必须同时向 GPS 和网络提供商注册，以便通知它已启用。

**是否可以从尚未启用的位置提供程序注册更新？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:15:43.430

> 要在启用特定提供程序时调用位置侦听器的 onProviderEnabled() 方法，该侦听器是否必须已经从同一提供程序请求更新？

是的，您需要注册提供者才能接收来自它的回调。

这是向一个提供者注册的操作，它通知该提供者存在一个侦听器。如果您不向它注册，它现在可以知道存在一个侦听器。

> 是否可以从尚未启用的位置提供程序注册更新？

是的。

# ms-access - 如何根据一天中的特定时间而不是每秒或每分钟触发 MS 访问代码

> ID：13848608
> 
> 赞同：1
> 
> 时间：2012-12-12T21:04:20.997
> 
> 标签：ms-access, vba

我一直在努力解决这个问题，也许我已经接近了。我在 Access 中有一些代码需要在一天中的特定时间运行。我不想使用 Windows 任务计划程序。

***所以我有这个功能：***

```
Public Function RunProgram()
Dim RunDateFormat As String

RunDateFormat = Format(Now(), "HH:MM:SS")
    If RunDateFormat = ("15:30:00") Then

'Call these codes and other stuff in here

End If 
```

然后我创建一个名为 Macro1 的宏来调用该函数，On Timer 表单调用该宏，如下所示。

![在此处输入图像描述](../Images/fc53768f25bb9fb208e4ea0e994045c0.png)

问题是如果我将间隔设置为；例如：1000，我每秒收到一封电子邮件，程序继续运行。

请帮助：我需要设置它，以便代码在准确的时间运行，但只运行一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:12:45.147

您如何使用静态日期变量：

```
static dateRan as date
if dateRan = Date then exit Function
If RunDateFormat = ("15:30:00") Then
dateRan = date
'Call these codes and other stuff in here
End If 
```

通过这种方式，您可以让它在一夜之间运行，并且假设没有发生错误以停止操作，它将在第二天工作。

我相信您知道，通过 Access 执行计划任务需要表单启动并运行，因此您有相当大的机会无法运行对时间敏感的任务。如果可行，我真的建议使用任务调度程序。

正如 HelloW 所暗示的那样，除非代码在正确的时间运行至关重要，否则我不会每秒钟都进行检查。如果它很关键，您可能需要进行一些检查并以编程方式修改 timerinterval。

像这样：

```
If Hour(Now) < 14 or Hour(Now) >= 16 then
    me.TimerInterval = 3600000
else
    me.TimerInterval = 30000
end if 
```

您可以将其范围缩小，越接近运行时间敏感代码所需的时间，检查就越频繁地运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:17:27.043

在表单的计时器事件过程中进行时间检查。

```
Private Sub Form_Timer()
    If TimeValue(Now()) >= #15:30:00# Then
        ' run your job, then turn off the timer
        Me.TimerInterval = 0
    End If
End Sub 
```

基于上述代码的方法应该允许您避免在每次进行时间检查时发送电子邮件。

如果您的不是单用户应用程序，这种情况可能会更复杂。如果 2 位或更多用户在下午 3:30 打开表单，他们是否都应该尝试运行该作业？他们可以吗？OTOH，如果工作是特定于用户的，那可能就是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:11:57.480

更改`Format(Now(), "HH:MM:00")`为`Format(Now(), "HH:MM:SS")` 这将为您提供您似乎正在寻找的秒数。作为最佳实践，我认为每秒运行一次并不是一个好主意。也许每分钟或一刻钟然后进行测试。

# objective-c - 带有在每个页面上重复的控件的 UIScrollView？

> ID：13848610
> 
> 赞同：0
> 
> 时间：2012-12-12T21:04:40.903
> 
> 标签：objective-c, cocoa-touch, uiscrollview, paging, uipagecontrol

我有完美的 UIPageControl。我想通过滑动添加分页，据我了解，它是由 UIScrollView 完成的。但是所有教程都是用图像完成的，我希望在每一页上重复控件（标签、按钮）。

因为 UIScrollControl 的工作方式必须设置其宽度 * 页数，这是否意味着控件只能放置在代码中，而不是 IB 中？

我应该直接在 UIScrollView 上放置标签和按钮吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:32:02.277

如果您有一个使用 IB 设计的视图控制器及其所有按钮和标签，则可以将该视图控制器添加为 UIScrollView 的子视图，如下所示：

`[scrollView addSubview:controller.view];`

scrollView 是您的 UIScrollView 和控制器是您的 IB 设计的视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:39:46.483

您可以通过使用 IB 通过适当地对对象进行排序来实现使用 pagecontroll 的重复控件。这是我所拥有的：

将 UIScrollview 拖到 ViewController 并将 Page Controller 和其他控件也拖到 ViewController 但不拖到 UIScrollView 上。将它们分开。IB 对象列表底部的对象显示在视图堆栈的顶部。（因此，当您滑动新页面时，控件不会移动并且不会被 UIScrollView 覆盖）我还通过组选择它们来对各种控件进行分组，然后使用“嵌入视图”菜单项，以便在 IB 中我有两个组，控件和 UIScrollView。使其更整洁，更易于管理。至于更改标签，我还没有尝试过，但我已经看过教程，您可以将 iboutlets 链接到更改 pagecontroller 的值，然后适当地更新 uiscrollview 中的标签。

# java - 使用可选参数创建一个可运行的 jar

> ID：13848617
> 
> 赞同：1
> 
> 时间：2012-12-12T21:05:32.447
> 
> 标签：java, jar

我在这里遇到的好奇的小问题：

我希望客户能够执行以下操作：

(1)`java -jar myJar.jar inputFile outputFile`

或者

(2)`java -jar myJar.jar text outputFile`

`outputFile`是一个可选参数。

本质上（1）将为他们从文件中读取输入，而（2）他们提供我的程序将直接使用的输入。尽管我能想到，但无法确定参数是输入还是文件的位置。对于普通的命令行内容，您可以指定一个标志，`-i inputfile`以表明您希望它从文件中读取。我在这里有哪些选择可以保持客户的易用性？

创建客户端必须用于第一个参数的语法是我唯一的选择吗？IE

`"-t text"`还是`"-i inputFile"`？

我见过诸如 commons cli 之类的库可以实现这一点，但我更喜欢不涉及使用库的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:16:09.233

我建议从标准输入（System.in）读取并打印到标准输出（System.out）

这样，不需要任何参数。对于使用 CLI 工具的人来说，它非常直观。您可以将输入来源的详细信息留给操作系统。

因此，在 unix 操作系统中，您将使用类似这样的 jar：

```
echo "some test" | java -jar myjar.jar > outfile 
```

或者

```
cat somefile | java -jar myjar.jar > outfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:22:32.387

如果我正确理解了这个问题，你不能只检查参数的数量而不是明确指定直接输入吗？就像，如果传递了一个 arg，则输出第一个 arg，如果传递了 2 个 arg，则输入第一个 arg，输出第二个 arg？

话虽如此 - 对于大多数习惯使用 cli 的人来说，使用连字符的“选项”语法可能是最简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:31:01.150

您可以使用

```
input=text or file=inputfile 
```

（输出=输出文件作为可选）。

在这种情况下，您可以以相同的方式处理所有参数并使用分隔符'='将它们分开，检查'='的左侧以确定它是哪个参数。

# c# - 在事件聚合器中将枚举与事件类混合

> ID：13848621
> 
> 赞同：3
> 
> 时间：2012-12-12T21:05:58.537
> 
> 标签：c#, events, design-patterns, eventaggregator

我最近尝试实现自己的简单事件聚合器。我从 MSDN 上的事件聚合器文章中获得了很多灵感。关于 MSDN 上的事件聚合器，我注意到一件事是事件实际上是它们自己的类。这根本不是一件坏事。但是，我只是觉得总是为每个小事件创建一个新的空类很尴尬。

我觉得这很尴尬的原因是因为需要为每个细粒度事件创建一个类。例如，鼠标单击事件将具有 double_click、single_click、left_click、right_click 等。所有这些都会有自己的类。一段时间后它会变得混乱。

所以在我自己的实现中，我认为我可以以这样的方式实现，其中`ClickEvent`是一个类，但与 Click 事件相关的所有粒度事件都将是`ClickEvent`. 在这种情况下，“类型”是`enum`. 用法如下所示：

```
//Publisher
eventAggregator.GetEvent<ClickEvent>.Publish(ClickEventType.Double_Click, eventArgs);

//Subscriber
eventAggregator.GetEvent<ClickEvent>.Subscribe(ClickEventType.Double_Click, handlerMethod); 
```

但是，我不确定这个实现是否违背了拥有强类型事件的全部目的？现在，它似乎`ClickEvent`只是不同事件枚举类型的容器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:18:16.393

是的（看起来像一个容器） - 无论点击类型如何，您的处理程序都会触发，并且处理程序中需要一些代码来确定点击类型，这会使事情变得有点混乱。

如果您的问题主要是文件/类的组织并保持代码整洁，为什么不将点击事件创建为主点击类中的嵌套类

例如

```
public static class ClickEvents // Prevent instantiation
{
    public class SingleLeft { }
    public class SingleRight { }
    public class DoubleLeft { }
    public class DoubleRight { }
    // Are there any more click events possible?!
}

eventAggregator.GetEvent<ClickEvents.SingleLeft>.Publish(); 
```

除此之外，决定事件签名的是类型的唯一性，因此需要多种类型来满足这个特定的实现

至少以上内容可以使您的处理程序代码保持干净

```
void HandleLeftClick()
{
} 
```

对比

```
void HandleClick(ClickArgs e) 
{
    if(e.ClickType == ClickType.Left)
    {
    }
} 
```

编辑：

还要记住，如果您想处理多个点击类型，您可以将多个事件订阅到同一个处理程序：

```
eventAggregator.GetEvent<ClickEvents.SingleLeft>.Subscribe(HandlerMethod);
eventAggregator.GetEvent<ClickEvents.SingleRight>.Subscribe(HandlerMethod); 
```

（这在订阅者不关心单击哪个鼠标按钮的罕见情况下有效）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:17:19.013

我想你错过了一种可能性。你看，你不必为每个通知创建一个新类。相反，您可以自由地重用类，但在内部携带一些任意复杂性的额外状态。

```
public class MouseClickNotification {

    public bool IsDoubleClick;
    public MouseButton ClickedButton;

    // any additional stuff 
```

这样，您就可以精确定义通知模型的粒度。

# asp.net - 从 MVC 2 升级到 MVC 4

> ID：13848628
> 
> 赞同：3
> 
> 时间：2012-12-12T21:06:21.777
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-2, asp.net-mvc-4

我想将我的项目升级到 ASP .NET MVC 4。目前，我的解决方案中有 2 个项目。一个是 MVC 2 项目作为 UI 层，另一个是我的业务逻辑。为了升级到 MVC 4，我正在考虑将一个新的 MVC 4 项目添加到我的解决方案中，并从我的 MVC 2 项目中复制所有内容，然后将视图中的语法更改为使用 razor 语法。

问题是，由于我将同时在我的解决方案中拥有两个 UI 项目（MVC 2 和 MVC 4），当我运行解决方案时，我是否可以选择运行其中一个而忽略另一个？

这是升级的好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:33:42.630

您可以只运行[mvc3 更新程序](http://aspnet.codeplex.com/releases/view/59008)，然后按照标准文档迁移 mvc3 -> 4。

如果您没有时间将所有视图转换为剃刀，这可能是一种更好的方法（实际上没有必要立即这样做）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:13:52.507

您只需右键单击要运行的项目，然后选择“设置为启动项目”选项。我已经多次这样做了，我在一个解决方案中拥有多个 Web 应用程序。

# php - 如果 url 变量为空重定向到主页

> ID：13848629
> 
> 赞同：0
> 
> 时间：2012-12-12T21:06:28.953
> 
> 标签：php, isset

我无法让它正常工作！！

我有一个 view.php 页面，它使用“ID”变量来检索数据库信息。

所以我的网址是这样的：

```
/view.php?id=23 
```

如果用户删除 url 的“23”部分，我试图让它“重定向”到主页。？

所以当你访问

```
/view.php?id= 
```

它应该 ：

```
if(isset($_GET['id']) == "") 
{ 
header('Location: /');
exit; } 
```

如果我访问有效

```
/view.php 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:07:15.783

尝试使用[`empty()`](http://us3.php.net/manual/en/function.empty.php)：

```
if(empty($_GET['id'])) 
{ 
  header('Location: /');
  exit; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:09:08.563

另一种方式：

```
if(strlen($_GET['id'])>0) { 
 header('Location: /');
 exit; 
} 
```

# c# - 网页抓取 - 无法在网页中获取表格

> ID：13848630
> 
> 赞同：0
> 
> 时间：2012-12-12T21:06:37.893
> 
> 标签：c#, winforms, web-scraping

我正在解析网页的 HTML 以获取一些信息。在我的网页中，我有一个`<table>`我正在尝试访问的内容。但是当我编写以下代码时，返回 0 个元素：

```
WebBrowser csexBrowser = new WebBrowser();
HtmlElementCollection table2 = this.csexBrowser.Document.GetElementsByTagName("table"); 
```

在这里，table2 什么都没有。0 个元素。我正在使用 winforms。

编辑：[这是链接](http://www.nsopw.gov/en-US/Search)。如果您搜索名称，它会在表格中显示一些结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:13:24.663

如果您坚持使用浏览器导航，则必须等待导航完成。就我个人而言，我讨厌这种方法加上我发现的大多数人追求的多触发事件触发。

做这个：

```
csexBrowser.Navigate(Url);
        while (csexBrowser.ReadyState != WebBrowserReadyState.Complete)
        {
            Application.DoEvents();
        } 
```

只需导航到给定的 url，直到页面完成加载后才继续。做完了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:19:49.310

在访问您提供的链接之前有一个验证步骤。在[http://www.nsopw.gov/en-US/Search/Verification](http://www.nsopw.gov/en-US/Search/Verification)文档中，没有表格。

你确定你先通过验证网址吗？

**[编辑]**

请试试这个：

```
public Form1()
{
    InitializeComponent();
    WebBrowser csexBrowser = new WebBrowser();

    //here we say what we want to do when the Navigated event occurs
    csexBrowser.Navigated += csexBrowser_Navigated;

    //this takes some time
    csexBrowser.Navigate("http://www.nsopw.gov/en-US/Search");
}

void csexBrowser_Navigated(object sender, WebBrowserNavigatedEventArgs e)
{
    //here the document is loaded and we will find the table
    HtmlElementCollection table2 = ((WebBrowser)sender).Document.GetElementsByTagName("table");
} 
```

# php - Doctrine CLI 输出doctrine.php 的内容

> ID：13848632
> 
> 赞同：8
> 
> 时间：2012-12-12T21:06:53.070
> 
> 标签：php, doctrine-orm

我遵循了关于整合学说 2 和 ZF2 的在线教程。我能够将数据插入数据库，但每当我运行教义 CLI 时，它都会输出：

```
#!/usr/bin/env sh
SRC_DIR="`pwd`"
cd "`dirname "$0"`"
cd "../doctrine/orm/bin"
BIN_TARGET="`pwd`/doctrine.php"
cd "$SRC_DIR"
"$BIN_TARGET" "$@" 
```

这是我用教程中的代码替换的教义.php 的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-14T06:04:57.953

我在这里的另一个问题上发现了这个，它适用于 Windows。在 vendor/doctrine/orm/bin/ 中还有一个 bin 文件夹，您可以在控制台命令中像这样使用它：

php 供应商/学说/orm/bin/学说 orm:schema-tool:create

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T18:21:37.280

复制学说二进制文件的路径（包含“doctrine”、“doctrine.php”、“doctrine.bat”...

转到项目的根目录，然后键入：

```
php path_to_doctrine_bin/doctrine.php [options] 
```

那应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T11:27:04.913

面对同样的问题，原来使用正斜杠而不是反斜杠才是真正的罪魁祸首。

所以移动到项目目录中并执行

```
vendor\bin\doctrine.bat orm:schema-tool:create 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-05T18:30:56.127

对我有用的是在目录中使用*原始*的shell/bash 脚本`vendor`（在 win7 上运行）

```
$ vendor/doctrine/orm/bin/doctrine orm:schema-tool:create 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T08:02:19.210

在 Windows 上，您需要运行 .bat 文件。例如。

```
vendor\bin\doctrine.bat orm:schema-tool:create 
```

# html - 如何修改和扩展 Nokogiri

> ID：13848639
> 
> 赞同：0
> 
> 时间：2012-12-12T21:07:05.743
> 
> 标签：html, ruby-on-rails, ruby, parsing, nokogiri

我知道要使用 Nokogiri，需要运行：

```
gem install nokogiri 
```

并`require 'nokogiri'`在使用 nokogiri 的 ruby​​ 文件中。但是，我正在尝试自定义 Nokogiri，因此我需要能够调用 Nokogiri 项目。我做了什么：

1.  [从https://github.com/sparklemotion/nokogiri](https://github.com/sparklemotion/nokogiri)下载 Nokogiri 项目
2.  做一些改变。

所以我想要的是能够调用和运行这个修改后的 Nokogiri，而不是我通过`gem install Nokogiri`. 有人知道吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:19:46.920

在开发修改时，您可能希望在更改代码和查看结果之间的步骤最少。在这种情况下，您可能希望直接加载您正在处理的代码。

如果您使用捆绑器，则可以添加：

```
gem 'nokogiri', :path => "/some/path/to/my/copy/of/nokogiri" 
```

如果您只是对此进行编码，则可以执行以下操作：

```
$:.unshift("/some/path/to/my/copy/of/nokogiri/lib")
require 'nokogiri' 
```

一旦您对修改感到满意，您可能想要创建包含它们的自己的 gem。这样，您就不必依赖 nokogiri gem 代码位于特定位置等。为此，您需要[创建一个 gemspec](http://yehudakatz.com/2010/04/02/using-gemspecs-as-intended/)。请注意，您应该更改 gem 名称（困难）或版本（简单），以将您的 gem 与您正在使用的现有 nokogiri gem 区分开来。

然后：

```
rake gem
rake install_gem 
```

并在您的主项目中正常使用 gem，即`gem 'nokogiri'`或`require 'nokogiri'`.

# sap-ase - 在 Sybase 数据库中使用模式匹配提取子部分

> ID：13848640
> 
> 赞同：1
> 
> 时间：2012-12-12T21:07:06.883
> 
> 标签：sap-ase

```
java.util.regex.Pattern p = java.util.regex.Pattern.compile("[\\)\\(\\+\\-\\*\\s]+");

String[] tokens;

try{  tokens = p.split(s); } catch (blah) { } 
```

如何在 Sybase ASE 15.0.3 的 select 语句中完成上述功能。

Java 类有效，但我们试图避免将数据穿梭进出 DBMS。

```
select some_function(column1) from table1 
```

我需要一些关于如何实现这个 some_function 的建议。REGEXP 和 SIMILAR TO 似乎在 where 子句中很有用。我们想要提取存储复杂表达式的列的一部分。

谢谢

# asp-classic - 在 IIS 5 中设置 HttpOnly 经典 ASP

> ID：13848641
> 
> 赞同：1
> 
> 时间：2012-12-12T21:07:12.260
> 
> 标签：asp-classic, iis-5, httponly, cookie-httponly

在阅读[了这篇 SO 帖子后](https://stackoverflow.com/questions/13575794/setting-httponly-true-on-asp-1-1-session-id-cookie)，我也需要将 ASPSESSIONID[random-string-here] cookie 设置为经典 ASP 页面的 HttpOnly。但是，在 IIS 5 中。

那么，我有哪些选择？我没有生成这些 cookie，它们似乎是自动生成的。是否有我可以更改的 IIS 5、全局、web.config 设置？

# objective-c - 在objective-c中，每个非零对象都评估为真，这是真的吗？

> ID：13848642
> 
> 赞同：2
> 
> 时间：2012-12-12T21:07:14.967
> 
> 标签：objective-c

在objective-c中，每个非零对象都评估为真，这是真的吗？也就是说，是这样的：

```
if (thing) NSLog(@"yes"); 
```

与此相同：

```
if (thing != nil) NSLog(@"yes"); 
```

从经验上看，这似乎是正确的，即使`thing = @0`，但我找不到实际说明这一点的文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:10:07.710

这是真的。

`@0`将是一个`NSNumber`值为 0 的对象，而不是地址 0 (nil)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:09:51.077

是的，每个不是`nil`（或`NULL`）的指针都计算为真，就像在古老的 C 中一样。对于像 之类的对象也是如此`NSNull`，听起来它们可能会计算为假。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T21:10:11.690

是的，因为 Objective-C 是 C 之上的一层，所以同样的规则适用。

在 C 中，每个非 NULL 变量/指针的计算结果都为真，因此在 Objective-C 中也是如此

还`@0`表示指向 a 的非 NULL 指针，`NSNumber`因此它正确地计算为真。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-12T21:10:17.430

if 检查 0 (false) 或任何其他数字 (true)。由于您的“事物”基本上是一个地址（因此是一个有效数字），因此它将评估为“真”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T21:40:19.530

```
((@0) && ([NSNULL null]) && (YES) && (thing) && (int a = 2)) 
```

评估为`TRUE`或`YES`分别除非`thing==nil`

# c# - WinRT 组件库中的公共常量

> ID：13848645
> 
> 赞同：7
> 
> 时间：2012-12-12T21:07:26.533
> 
> 标签：c#, windows-8, windows-runtime, constants

我创建了一个 C#`Windows Runtime`组件，以及以下行：

```
public const bool LOG_ENABLED = false; 
```

正在引发错误：

**“Constants”类型包含外部可见的常量字段“Constants.LOG_ENABLED”。常量只能出现在 Windows 运行时枚举中**

这个错误是什么意思？我怎样才能声明常量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-05T16:42:37.343

这是一个老问题，但我不会少给我两分钱。const 和 public 是一个危险的组合，经常被漏用。这是因为如果库中的公共 const 字段发生更改，则不能仅仅替换库，而是需要重建该库的所有客户端，因为它会复制客户端中的实际值而不是引用到那个值。

如果你真的想要一个公共的“常量”，一种选择是做这样的事情：

```
public static class Constants
{   
    public static readonly bool LOG_ENABLED = false;
} 
```

但是，这在 WinRT 组件库中也失败了

> “WindowsRuntimeComponent1.Constants”包含外部可见字段“System.Boolean WindowsRuntimeComponent1.Constants.LOG_ENABLED”。字段只能由结构公开。

另一个确实有效的替代方案是

```
public static class Constants
{
    public static bool LOG_ENABLED { get { return false; } }
} 
```

我不确定为什么在 WinRT 组件库中不可能有公共 const 或只读，因为在普通类库中是可能的。

经过一番阅读，似乎公共字段仅限于结构，而结构可能只包含公共字段。

正如您在评论中所说，如果您不从外部来源使用它，将其更改为内部是一个不错的选择。

# algorithm - 红黑树红孩子财产检查

> ID：13848651
> 
> 赞同：0
> 
> 时间：2012-12-12T21:07:49.430
> 
> 标签：algorithm, data-structures, recursion, red-black-tree

给定一个 RB 树，我需要编写一个算法来检查每个红色节点是否有两个子节点黑色。

ie 如果每个红色节点只有黑色子节点，则返回 true，否则返回 false。

这是我的尝试：

```
ChildCheck(x){
    if (x.color==black){
        if(x.leftChild !=null or x.leftchild!=nil)
            bool a = ChildCheck(x.leftChild)
        else  a = true
        if (x.rightChild!=null or x.leftchild!=nil){
            bool b = Childcheck(x.leftChild)
        else b = true
        return (a && b)
    }
    else
        if (x.leftChild !=null or x.leftchild!=nil)
            if(x.leftChild.color==black)
                d = true
            else d = false
        else
            d = true
        if (x.rightChild !=null or x.rightchild!=nil)
            if(x.rightChild.color==black)
                e = true
            else e = false
        else
            e = true
        return (d && e)
    }
} 
```

这会返回正确的答案吗？如果不是，它有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:17:00.593

```
bool CheckRedProperty(NodePtr root)
{
    if (root == NULL) 
        return true;

    if (!CheckRedProperty(root->left))
        return false;

    if (CheckRedProperty(root->right))
        return false;

    if (root->IsRed() 
        && (root->left && root->left->IsRed() || root->right && root->right->IsRed()))
            return false;
    return true;
} 
```

# c# - 获取具有特定扩展名的文件并检查文件的大小

> ID：13848652
> 
> 赞同：0
> 
> 时间：2012-12-12T21:07:52.743
> 
> 标签：c#, .net, file-io, c#-3.0

我正在尝试进入一个文件夹并查找扩展名为 .abc 的文件，这些文件会在这个文件夹中来来去去，但我想知道的是这个文件是否存在并且文件的大小是否大于 50kb，那么我应该是通知。我有这个代码：

```
if(File.Exists(@"c:\home\myfolder\*.abc"))
{

} 
```

我不认为放 * 会让我得到扩展名为 .abc 的文件，有谁知道我如何实现这一点并获取文件的大小（如果存在）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:17:46.967

```
string[] files = System.IO.Directory.GetFiles(@"c:\home\myfolder", "*.abc");
if (files.Length > 0)
{
} 
```

# ios - iOS：如何从设备中完全删除应用程序以进行调试

> ID：13848655
> 
> 赞同：1
> 
> 时间：2012-12-12T21:08:00.430
> 
> 标签：ios, push-notification, apple-push-notifications

我正在尝试测试使用推送通知的应用程序。我想测试由于用户从出现的初始对话框中选择“允许”或“不允许”而导致的各种场景的结果。但是，我只看到这个对话框一次。

即使在我从设备、管理器、iTunes 中删除应用程序并清理项目后，当我重新安装时，它也不会显示此对话框。我怎样才能删除这个应用程序，以便我可以再次收到这个对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:13:40.063

你必须等待 24 小时才能让 iOS 从设备中删除所有数据和设置，如果你有一个特殊的开发设备（顺便说一句，你应该有），一个更简单的方法可能是简单地安装Xcode 中的 iOS（如果您恢复设备，它将不起作用，因此如果您不仅将设备用于开发，这可能不是一个选项）

# java - 奇怪的 Java String[] 问题，包含值，但在插入 List 时表现得像 null

> ID：13848660
> 
> 赞同：0
> 
> 时间：2012-12-12T21:08:21.900
> 
> 标签：java, arrays, string, csv

我遇到了字符串数组的问题并尝试将其添加到列表（列表）中。以下是使用并创建问题的代码。

该程序在循环的第一次运行时失败，我已经使用 OpenCSV 验证了来自 CSV 的输入。

```
List<String[]> output = null;
String[] temp;

for(int i = 0; i < 13; i++)
{               
    temp = reader.readNext();                           //read next line into temp
    System.out.println(temp[0]+temp[1]+temp[2]);        //temp output
    temp[2] = String.valueOf((values[i])/100);          //assign new value
    System.out.println(temp[0]+temp[1]+temp[2]);        //temp output
    output.add(temp);
} 
```

当此代码运行时，输出为。

```
VANCBULLET0.311
VANCBULLET0.308
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at Main.updateCSV(Main.java:951)
    at Main.start(Main.java:863)
    at Main.access$23(Main.java:853)
    at Main$23.actionPerformed(Main.java:520)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source) 
```

前两行是正确的，并且拆分如下： temp[0] temp[1] temp[2] VANC BULLET 0.311 VANC BULLET 0.308

问题是（如错误读取）：

```
output.add(temp); 
```

文档内容如下：

```
NullPointerException - if the specified element is null and this list does not permit null elements 
```

但正如您从我的输出（第二行）中看到的那样，数组“temp”不为空，它分别在每个元素中包含“VANC BULLET 0.308”。

我难住了。有没有人有想法或看到我没看到的东西？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T21:10:19.467

从我可以看到你从未`List<String[]> output = null;`在你的代码中初始化。因此，当它调用`List.add`List 仍然为 null 时，它会抛出**NPE**

**首先初始化**它：

```
List<String[]> output = new ArrayList<String[]>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:12:54.207

该列表`ouput`被定义为空

```
List<String[]> output = null; 
```

在循环中，您尝试将值添加到`output`.

初始化输出对象。

```
List<String[]> output = new ArrayList<String[]>(); 
```

# java - Java中链表中的NULL值

> ID：13848662
> 
> 赞同：0
> 
> 时间：2012-12-12T21:08:30.077
> 
> 标签：java, linked-list

我们正在尝试将文件中的一行输入标记为 ADTList “令牌”。它正在读取信息，但列表中的第一个对象被设置为 NULL。我们已经尝试了许多更改，但无法弄清楚这是在哪里发生的。这是代码：

```
 //method to covernt lines of input from a file to individual tokens
public static ADTList tokenizer(String input){

    String aToken;                                                      //defining variable to create token
    ADTList tokens = new ADTList();                                     //defining return variable

for (int i = 0; i < input.length(); i++){                           //loop to iterate through input string
        aToken = "";                                                    //clearing variable to hold next string
        if (input.charAt(i) == '(' || input.charAt(i) == ')' ||
                operator(input.charAt(i))){                             //testing for parenthesis or operator
            aToken += input.charAt(i);                                  //concatenating character to string
            tokens.add(aToken);                                         //adding new string to token list
        }else if (Character.isLetter(input.charAt(i))){                 //testing for variable letter
            aToken += input.charAt(i);
    i++;                                                        //moving to next character in string
            if (i < input.length() && Character.isLetterOrDigit(input.charAt(i))){   
                do{                                                     //loop to test for end of variable
                    aToken += input.charAt(i);
                    i++;
                }while (i < input.length() && Character.isLetterOrDigit(input.charAt(i)));    //end of variable condition
            }
            tokens.add(aToken);
            i--;                                                        //decrementing counter variable
        }else if (Character.isDigit(input.charAt(i))){                  //testing for number
    aToken += input.charAt(i);
    i++;
                if (i < input.length() && Character.isDigit(input.charAt(i))){   
                do{                                                     //loop to test for end of variable
                    aToken += input.charAt(i);
                    i++;
                }while (i < input.length() && Character.isDigit(input.charAt(i)));    //end of digit condition
            }
            tokens.add(aToken);
            i--;
        }else{
    //do nothing
        }//end if
}//end loop

return tokens;                                                      //returns tokens list to main
}//endFunction 
```

这是输出的快照，显示 NULL 对象位于第一个位置：

*   原函数：a1 * ( b + c )
*   标记化：null, a1, *, (, b, +, c, ),
*   后缀中缀：
*   后缀到中缀：

*   原函数：( a * b + c

*   标记化：null, (, a, *, b, +, c,
*   后缀中缀：
*   后缀到中缀：

这是 ADTList 类。这还不是全部，但它确实显示了我们的主项目调用的 add(T item) 方法：

```
public class ADTList<T> implements ListInterface<T>{

//defining internal variables to be used in interface class
private int numItems;
private T array[];

public ADTList(){
    //create an empty array
    array = (T[]) new Object [25];
    //assign 0 to numItems
    numItems=0;
}

public boolean isEmpty(){
// Determines whether a list is empty.
// Precondition: None.
// Postcondition: Returns true if the list is empty,
//                otherwise returns false.
    if (numItems==0){
        return true;
    }else{
        return false;
    }
}

public boolean isFull(){
// Determines whether a list is full.
// Precondition: None.
// Postcondition: Returns true if the list is full,
//                otherwise returns false.
    return numItems==array.length;
}

public int size(){
// Determines the length of a list.
// Precondition: None.
// Postcondition: Returns the number of items that are
//                currently in the list.
    return numItems;
}

public boolean add(T item){
// Adds an item to the end of list.
// Precondition: the item should be inserted in the list.
// Postcondition: If insertion is successful, it returns true,
//               item is at the end of the list,
//               Returns false if the list is full
    if (isFull()){
        return false;
    }else {
        array[numItems]=item;
        numItems++;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:17:09.197

旁注：您有几个地方可以编写如下代码：

```
if (big_long_test) {
    do {
        something();
    } while(big_long_test);
} 
```

将这些替换为

```
while (big_long_test) {
    do_something();
} 
```

上面的代码不会在列表中添加 null。您的问题可能出在 ADTList 类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:18:11.037

不知道如何实现 ADTList（在内部使用 ArrayList？）如果第一个位置的对象是空字符串，则 trim() 从文件中读取的 String 输入变量，以确保没有前导空格。如果输入有前导空格，您将向 ADTList 添加一个空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:19:25.630

我认为问题在于 ADTList 类在调用构造函数时使列表的第一个成员为空。您提供的代码没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T01:09:14.800

谢谢大家的意见。错误在于信息的打印。get() 函数拉动数组（位置-1），因此，我们拉动了 -1 位置。我非常感谢所提供的建议和代码精简。

# cocoa - 基于文档的应用程序不会恢复具有非文件 URL 的文档

> ID：13848663
> 
> 赞同：13
> 
> 时间：2012-12-12T21:08:33.333
> 
> 标签：cocoa, nsdocument, nsdocumentcontroller

我有一个基于 NSDocument 和 NSDocumentController 子类的应用程序。我的 NSDocument 与文件 URL 和具有使用 Web 服务的自定义方案的 URL 一起使用。

我使用自定义代码处理大部分加载和保存，包括`-saveToURL:ofType:forSaveOperation:completionHandler:`. `+autosavesInPlace`返回`YES`。

我遇到的问题：具有自定义 URL 方案的文档在启动时未恢复。具有文件 URL 方案的文档是 - 保存到文件的常规文档和自动保存的无标题文档。

离开打开的基于服务器的文档并退出应用程序后，重新启动时似乎没有调用任何 NSDocument 方法。特别是，四个初始化器都没有被调用：

*   -在里面
*   --initWithContentsOfURL:ofType:错误：
*   –initForURL:withContentsOfURL:ofType:error:
*   --initWithType：错误：

NSDocumentController 方法`-reopenDocumentForURL:withContentsOfURL:display:completionHandler:`也没有被调用。

如何以及何时对文档的可恢复状态进行编码？它们是如何以及何时解码的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T19:15:04.643

NSDocument 负责将其可恢复状态编码到 中`-encodeRestorableStateWithCoder:`，NSDocumentController 负责解码文档的可恢复状态并重新打开 中的文档`+restoreWindowWithIdentifier:state:completionHandler:`。请参阅 中的有用评论`NSDocumentRestoration.h`。

当 NSDocument 对 URL 进行编码时，它似乎使用了 NSURL 的书签方法。问题是这些方法仅适用于文件系统 URL。（非文件 URL 可能会编码，但它们不会正确解码。）

要解决此问题，请覆盖使用自定义方案的 NSDocument 实例的编码，以及对这些文档的解码。

**NSDocument 子类：**

```
- (void) encodeRestorableStateWithCoder:(NSCoder *) coder {
    if ([self.fileURL.scheme isEqualToString:@"customscheme"])
        [coder encodeObject:self.fileURL forKey:@"MyDocumentAutoreopenURL"];
    else
        [super encodeRestorableStateWithCoder:coder];
} 
```

**NSDocumentController 子类：**

```
+ (void) restoreWindowWithIdentifier:(NSString *) identifier
                               state:(NSCoder *) state
                   completionHandler:(void (^)(NSWindow *, NSError *)) completionHandler {

    NSURL *autoreopenURL = [state decodeObjectForKey:@"MyDocumentAutoreopenURL"];
    if (autoreopenURL) {
        [[self sharedDocumentController]
         reopenDocumentForURL:autoreopenURL
         withContentsOfURL:autoreopenURL
         display:NO
         completionHandler:^(NSDocument *document, BOOL documentWasAlreadyOpen, NSError *error) {

             NSWindow *resultWindow = nil;
             if (!documentWasAlreadyOpen) {

                 if (![[document windowControllers] count])
                     [document makeWindowControllers];

                 if (1 == document.windowControllers.count)
                     resultWindow = [[document.windowControllers objectAtIndex:0] window];
                 else {
                     for (NSWindowController *wc in document.windowControllers)
                         if ([wc.window.identifier isEqual:identifier]) {
                             resultWindow = wc.window;
                             break;
                         }
                 }
             }
             completionHandler(resultWindow, error);
         }
         ];
    } else
        [super restoreWindowWithIdentifier:identifier
                                     state:state
                         completionHandler:completionHandler];
} 
```

行为或完成处理程序遵循 Apple 在 NSDocumentRestoration.h 中的方法注释，应该与`super`'s 大致相同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T16:11:43.207

窗口状态编码通过两种方法启用`NSWindow`。调用`setRestorable:`窗口会将其标记为可以在重新启动时保存和恢复的窗口，然后调用`setRestorationClass:`允许您指定一个类来处理重新创建已保存的窗口。

默认情况下，AppKit 设置`NSDocumentController`为`NSDocument`对象控制的窗口的恢复类。实际的恢复是通过调用协议`+restoreWindowWithIdentifier:state:completionHandler:`定义的方法来完成的。`NSWindowRestoration`对于文档，`NSDocumentController`实现该方法并根据传递给该方法`NSDocument`的实例中编码的状态重新创建对象。`NSCoder`

因此，理论上，如果您要继承`NSDocumentController`并覆盖该方法，那么您就有机会恢复由状态恢复机制保存的文档。但是，据我所知，用于`NSDocumentController`存储状态的密钥在任何地方都没有记录，因此我认为没有一种可靠的方法可以直接从`NSDocumentController`存储自身的状态中恢复。

为了支持这一点，您可能需要自己对文档的整个状态进行编码，方法是实现`-encodeRestorableStateWithCoder:`正在`NSWindow`编码的对象，和/或实现`window:willEncodeRestorableState:`窗口的委托方法。这两种方法都会向您传递一个`NSCoder`可用于对您的状态进行编码的实例。您可以在此处对自定义方案的 URL 以及保存/恢复状态所需的任何其他相关数据进行编码。然后，您将在`restoreWindowWithIdentifier:state:completionHandler:`方法中解码该状态。

由于您将拥有一些具有常规文件 URL 的文档和一些具有自定义 URL 的文档，因此我将通过创建一个负责解码文档状态的单独类来解决此问题，并将其设置为仅用于具有自定义 URL 的文档的恢复类，留下`NSDocumentController`为您处理带有文件 URL 的文档。

# authentication - Grails Spring Security 在成功验证后强制用户进入特定屏幕

> ID：13848668
> 
> 赞同：2
> 
> 时间：2012-12-12T21:08:51.870
> 
> 标签：authentication, grails, groovy, spring-security

这是场景。我有两个对象`Users`（带有用户名/密码）和`UserInfo`与用户相关的其余数据。这`Users`是一张有数千条记录的旧表，而且`UserInfo`相当新。`UserInfo`当用户第一次登录时，我想尽可能多地获得。

我想在首次登录后强制用户进入自定义屏幕并询问`UserInfo`数据。在新屏幕中获得“必需”数据后，直到用户自愿填写“个人资料”下的数据，我才会显示它。

由于应用程序有多个入口点，我不想更新所有控制器来检查这一点。

有没有办法我可以使用`Spring Security filter`成功登录时执行的或其他东西？我看了看，`ApplicationListener<AuthenticationSuccessEvent>`但它并没有解决问题，就像我在浏览器中复制粘贴链接一样，它让我无需询问“额外信息”就可以前往目的地。

简而言之，我希望在每次登录后进行检查，如果失败，则不允许用户进入应用程序。不管他怎么想进去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:40:51.823

在您的`Config.groovy`中，配置 Spring Security`defaultTargetUrl`并告诉它始终在那里重定向：

```
grails.plugins.springsecurity.successHandler.alwaysUseDefault = true
grails.plugins.springsecurity.successHandler.defaultTargetUrl = '/userInfo/edit' 
```

在您`UserInfoController`的编辑操作中，您可以检查是否存在必填字段（`userInfo.validate()`也许？），如果存在，则重定向到您喜欢的任何位置，可能是“/”，否则呈现编辑信息视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:16:21.563

您可以采用@doelleri 提出的建议并通过以下步骤增强规则：

1.  运行批处理任务，为尚未提供补充信息的每个用户分配临时 ROLE_DISABLED 角色。如果用户已经拥有一些角色，请将它们保存在某个属性中。

2.  将您的授权规则设置为具有 ROLE_DISABLED 角色的用户只允许访问 /userInfo/edit。

3.  在 /userInfo/edit 中，如果用户具有 ROLE_DISABLED 角色，则渲染信息输入视图，并在成功更新其信息后恢复用户角色。否则重定向到“/”或它请求的路径。

# sas - 在 SAS 中计算与一个电话号码关联的不同人员

> ID：13848684
> 
> 赞同：1
> 
> 时间：2012-12-12T21:09:32.803
> 
> 标签：sas, counting

我有几百万条记录，其中包含姓名和电话号码列表。我需要计算有多少人与每个唯一的电话号码相关联。电话号码与重复名称和唯一名称相关联。因此，对于每个电话号码，我需要计算不同用户的数量。然后这需要映射到商店列表。我尝试选择不同的电话/不同的电话，但这只能给我一个分布的比率。例如，如果有 10 个人使用三部手机，那么我的比率告诉我 3 部手机分布在 10 个人中，但它并没有告诉我与电话相关的分布中的实际人数。任何人都可以帮助我使用 SAS 代码来获得正确的计数，我确切地知道有多少电话与同一个电话号码相关联。提前致谢。-r

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:27:49.347

如果您只需要具有相同电话号码的不同行数，请使用：

```
proc sql;
create table phone_number_counts as
 select phonenumber, count(1) as count_users
 from dset
 group by phonenumber;
quit; 
```

如果您想在电话号码中找出不同的姓名，即，如果 555-123-4567 John H 555-123-4567 John H 555-123-4567 Mary Y

应该导致 2，而不是 3（第一个代码将产生 3），然后使用`count(distinct name)`而不是`count(1).`

如果您想要其他内容，一些示例数据可能会有所帮助 - 即，初始数据示例和正确最终数据集示例会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:35:40.570

我相信您正在寻找`count(distinct name)`：

```
proc sql;
  create table phone_number_counts as
  select phonenumber, 
         count(*) as count_rows,
         count(distinct name) as unique_names
  from dset
  group by phonenumber;
quit; 
```

# ios - 清除应用程序中的标记/删除行

> ID：13848686
> 
> 赞同：0
> 
> 时间：2012-12-12T21:09:38.630
> 
> 标签：ios, line

我试图弄清楚 iPhone 的 Clear 应用程序中单词中间的行（标记/预删除，替代复选标记）是如何制作的。它是像 NSString 重命名一样简单，还是我应该检查 drawRect ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:17:14.097

看起来他们正在使用 drawRect ，因为字符串重命名会将线条应用于整个字母，而您可以看到线条是逐像素绘制的。

# javascript - 克隆时如何通过单选按钮动态控制复选框

> ID：13848688
> 
> 赞同：1
> 
> 时间：2012-12-12T21:09:45.823
> 
> 标签：javascript, jquery

我有这个表单，您可以在其中单击链接以克隆表单字段。我在每个克隆的顶部也有一个选择单选按钮，它隐藏并显示带有它的复选框。我无法弄清楚为什么我可以在第一次迭代中做到这一点，以及如何让它适用于每个克隆。

我的 html 看起来像这样

> ```
>  <tr> // if the first radio button is selected, the checkbox appears and disappears on selecting 2nd
>               <td width="250px"><span style="color: #cc0000;">*</span> Please check the costs that apply:</td>
>               <td><input id="Cost_1" type="radio" value="15" name="Costs"/> First Cost: $15 <br/>
>               <input id="Cost_2" type="radio" value="10" name="Costs"/> Second cost: $10 <br/>
>               <tr id="special_offers">
>                   <td>
>               <input  type="checkbox" value="5" name="special_offers"/> <span id="optional_span">Special Offers: $5 
> ```
> 
> ```
>  <tr>
>             <td> First name:</td>
>             <td><input name="first_name_id_1" type="text" id="first_name_id_1" size="15" class="required"></td>
>               </tr>
>           <tr>
>             <td> Last name:</td>
>             <td><input name="last_name_id_1" type="text" id="last_name_id_1" size="15" ></td>
>           </tr>
>           <tr>
> 
>     </tbody>
>     <tr>
>         <td><a href="#" onClick="addFormField(); return false;">Register additional attendee</a></td>    
>       </tr>
>       <tr> 
> ```
> 
> 我的功能：
> 
> ```
>  function addFormField() {
> 
>             var currentCount =  $('.multiplerows').length;
>               var newCount = currentCount+1;
>             var lastRepeatingGroup = $('.multiplerows:last')
>             var newSection = lastRepeatingGroup.clone();
>             newSection.find('input').val(''); //clears the text fields//
>             $('input[type=radio]',newSection).removeAttr('checked');
> 
>             $('input[type=checkbox]',newSection).removeAttr('checked');
>             newSection.insertAfter(lastRepeatingGroup);
>             newSection.find("input").each(function (index, input) {
>                 input.id = input.id.replace("_" + currentCount, "_" + newCount);
>                 input.name = input.name.replace("_" + currentCount, "_" + newCount);
>             });
>             newSection.find("label").each(function (index, label) {
>                 var l = $(label);
>                 l.attr('for', l.attr('for').replace("_" + currentCount, "_" + newCount));
>             });
>             return false;
> 
>         };
> 
>         $("input[name='Costs']").click(function() {
>           if(document.getElementById('Cost_1').checked) {
> 
>             $("#special_offers").show();
> 
>           } else {
> 
>             $("#special_offers").hide();
> 
>            ;
>           }
>         }); 
> ```

出于某种原因，小提琴不起作用，但我没有问题克隆此表单上的元素，我的问题是如果用户单击顶部的第二个单选按钮并让该选项可用，我的问题是使复选框变灰，每次用户单击以注册新的与会者。希望小提琴能给你一些想法。 [http://jsfiddle.net/qnAHq/7/](http://jsfiddle.net/qnAHq/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:13:46.667

好的，我已经修补了一点。有一些误解从未使它起作用，不是在逻辑格式中，所以我不得不对其进行一些修改。它不漂亮，但它有效，我希望它不会弄乱你的概念。onClick attr 触发器不起作用，所以我稍微改变了设计。我想你可以修改如果它必须是另一种方式，如果有任何问题我可以帮助你。

但是，如果您在事件驱动设计上投入时间，您将更容易出错。以这种 js 编码方式，你总是会遇到问题，而且它是不可维护的。假设你想改变你的逻辑，你必须修改很多。这段时间花在调试上，你可以把它放在改进编码上。

这是小提琴[http://jsfiddle.net/qnAHq/40/](http://jsfiddle.net/qnAHq/40/)，BR

```
<table>
    <tbody class="multiplerows">
        <tr>
            <td width="250px"><span style="color: #cc0000;">*</span> Please check the costs that apply:</td>
            <td>
                <input id="Cost_1" type="radio" value="45" name="Costs1" class="costs"
                />Cost 1: $45
                <br/>
                <input id="Cost_2" type="radio" value="15" name="Costs1" class="costs"
                />Cost 2: $15
                <br/>
                <tr id="speial_offers">
                    <td>
                        <input type="checkbox" value="15" name="special_offers" /> <span id="optional_span"> Special Offers</span>

                    </td>
            </td>
            </tr>
            <tr>
                <td>First name:</td>
                <td>
                    <input name="Billing_first_name_id_1" type="text" id="Billing_first_name_id_1"
                    size="15">
                </td>
            </tr>
            <tr>
                <td>Last name:</td>
                <td>
                    <input name="Billing_last_name_id_1" type="text" id="Billing_last_name_id_1"
                    size="15">
                </td>
            </tr>
            <tr>
                <td class="hr" colspan="2">
                    <hr />
                </td>
            </tr>
    </tbody>
    <tr>
        <td><a href="#" id="regCtrl">Register additional attendee</a>

        </td>
    </tr>
</table> 
```

​</p>

js：

```
(function(window,undefined){

        $(function(){
            $('#regCtrl').click(addFormField);
            $("input.costs").click(costsInpHandler);
        });

        var formcount = 1;

        function addFormField() {
            var lastRepeatingGroup = $('.multiplerows:last');
            var newSection = cloneSection(lastRepeatingGroup);        
            cloneSectionSettings(newSection,lastRepeatingGroup);

            return false;
        };

        function cloneSection(lastRepeatingGroup) {
            var newSection = lastRepeatingGroup.clone();
            var costsInp = $("input.costs", newSection);
            $("input.costs", lastRepeatingGroup).each(function(i){
                var originInpVal = $(this).val();
                $(costsInp[i]).attr("value",originInpVal);
            });
            formcount++;
            costsInp.click(costsInpHandler);

            return newSection;
        }

        function cloneSectionSettings(newSection,lastRepeatingGroup){
            var currentCount = $('.multiplerows').length;
            var newCount = currentCount + 1;
            //newSection.find('input').val(''); This one was clearing your input price values so == '15' never occurs 
            $('input[type=radio]', newSection).removeAttr('checked');
            $('input[type=checkbox]', newSection).removeAttr('checked');
            newSection.insertAfter(lastRepeatingGroup);
            newSection.find("input").each(function (index, input) {
                input.id = input.id.replace("_" + currentCount, "_" + newCount);
                var n = input;
                input.name = input.name.replace("Costs" + currentCount, "Costs" + newCount);
            });
            newSection.find("label").each(function (index, label) {
                var l = $(label);
                l.attr('for', l.attr('for').replace("_" + currentCount, "_" + newCount));
            });

        }

        function costsInpHandler() {
            var parent = $(this).parents('tbody.multiplerows');
            var certCost1 = $(this);
            var inital = certCost1.is(":checked");

            var optionalSpan = $("#optional_span", parent)[inital ? "removeClass" : "addClass"]("gray");
            var optionalCost = $("input[name='special_offers']", parent).attr("disabled", !inital);
            if ($("input.costs:checked", parent).val() == '15') {
                optionalSpan["addClass"]("gray");
                optionalCost.attr("checked", false);
                optionalCost.attr("disabled", true);
            } else {
                optionalSpan["removeClass"]("gray");
                optionalCost.removeAttr("disabled");
            }
        }

    })(window);

​ 
```

# javascript - 使用会话属性（JQuery、Java）定期刷新文本区域

> ID：13848690
> 
> 赞同：-2
> 
> 时间：2012-12-12T21:09:50.687
> 
> 标签：javascript, jquery, html

我想使用会话属性的内容定期更新 HTML 文本区域的内容。原因是因为我使用的 servlet 需要花费大量时间来处理回复，但是我想在 textarea 中显示处理时发生的情况。我的代码如下：

```
 <form action="ClearOutput" method="post">
            <textarea id="console" name="console" rows="10" cols="100" readonly="readonly">
                ${sessionScope.console}
            </textarea>
               <script>
                window.onload = setupRefresh;
                function setupRefresh()
                {
                    setInterval("refreshBlock();",1000);
                }
                function refreshBlock()
                {
                    $('#console').text('${console}');
                }                   
            </script>
            <div>
                <input type="submit" name="clearOutput" value="Clear Output"/>
            </div>
        </form> 
```

可以看出，我正在使用 jQuery。为什么我的 textarea 不使用属性（控制台）内容进行更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:12:45.457

`setInterval(refreshBlock,1000);`你需要传递一个函数。你也不需要在那里调用它。

# mysql - 用 phpmyadmin 清空一列

> ID：13848691
> 
> 赞同：-4
> 
> 时间：2012-12-12T21:09:51.273
> 
> 标签：mysql, phpmyadmin

我有一个包含“id”“name”“city”的 table1 我想删除“city”中的所有文本，但只删除“id”17500 和 21000 之间的文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:11:24.147

这是相当基本的 SQL。

```
UPDATE table1 SET city='' WHERE id BETWEEN 17500 AND 21000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:11:19.810

```
UPDATE table1 SET city=''
WHERE id BETWEEN 17500 AND 21000 
```

# c++ - 复数和链表

> ID：13848694
> 
> 赞同：0
> 
> 时间：2012-12-12T21:10:02.560
> 
> 标签：c++, linked-list, complex-numbers

我得到了这个任务，其中我有带有复数的链表，任务是在链表的帮助下输入和打印这些数字。几年前，我学习了复数的基础知识，但现在作业对我来说真的很困惑，我不知道从哪里开始，唯一给出的信息是上面的一个和下面的 .h 文件：

```
#ifndef COMPLEX_H
#define COMPLEX_H
#include <iostream>
struct Complex
{
  int real, imag;
};
void read(Complex &, std::istream &);
void print(const Complex &, std::ostream & os=std::cout);
bool operator<(const Complex & lhs, const Complex & rhs);
bool operator>(const Complex & lhs, const Complex & rhs);
bool operator==(const Complex & lhs, const Complex & rhs);

#endif 
```

我会感谢这个任务的一些初步指导，打印和读取函数应该包含什么（给定的参数除外）才能使用？上面的布尔运算符？我用谷歌搜索了几个小时，但找不到复数教程和我的任务之间的任何良好相关性，此外，我有截止日期，与我的老师联系有关这方面的问题需要几天时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:17:07.403

打印功能应在指示的输出流上显示数字。按照惯例，复数显示如下：`1+2i`或 this:`(1+2i)`甚至 this: `(1,2)`。您可以通过运算符链接来完成此操作：

```
os << "(" << c.real << "+" << c.imag << "i)"; 
```

`lhs`如果 的两个组件都等于它们的对应项，则相等性检查应返回 true `rhs`：

```
return lhs.real == rhs.real && lhs.imag == rhs.imag; 
```

和`read`的详细信息将根据您的具体任务而有所不同。重新阅读你的作业，密切注意这些功能需要做什么的任何定义。`operator<``operator>`

# html - 修复了 IE() 中的宽度布局中断

> ID：13848695
> 
> 赞同：0
> 
> 时间：2012-12-12T21:10:05.143
> 
> 标签：html, css, layout

我基于固定流体混合宽度布局构建了一个网页，因为我需要它在所有主要浏览器和宽屏以及普通浏览器上看起来一致。它在 Fire-Fox 和 chrome 中表现良好，但在 IE 中完全崩溃。

我有一个带有水平列表项的菜单，当悬停时有垂直元素，你不会相信它，但 IE 不会显示垂直元素本身

我只是对差异感到不知所措。这是代码：

[http://jsfiddle.net/thedarkjedi/wknmn/](http://jsfiddle.net/thedarkjedi/wknmn/)

知道为什么我几乎一半专用于菜单的 CSS 刚刚停止工作吗？它在其他浏览器中运行良好。

它只是在 IE 中崩溃，我是认真的。我不明白我在哪里犯了错误。

PS：还有谁能告诉我为什么我的页脚本身和底部有一个间隙（它应该贴在页面底部，但同时如果有更多内容，应该让位给内容）即使在尝试了几乎所有技巧之后在网上找到。

我与页脚相关的代码是：

```
<div id="FooterContainer">

 <div id="Footer" >

    <div id="Footer_Content">
    <ul id="Footer_Nav">

            <li id="Contact"><a href="#">Contact US</a></li>
            <li id="About"><a href="#">About</a></li>    
            <li id="ToC"><a href="#">Terms & Conditions</a></li>    

    </ul>
    </div>
    <div class="notice">
            Designed & Developed by Sudhanshu Nautiyal
    </div>

 </div>
 </div>

 </div> 
```

和 CSS 是：

/* 页脚开始 */

```
#FooterContainer {

    //clear:both;
    background: #b8e1fe;

}

#Footer {

    width: 960px;
    height: 100px;
    margin: 0px auto;

}

#Footer_Content {

    text-align:center;  
}

/* Footer Navigation begins*/

#Footer_Nav {

    display: inline-block;
    //width: 100%;

    padding: 0;
    list-style: none;

}
#Footer_Nav  li {

    float:left;
}

#Footer_Nav li a {

    //display: block;
    padding: 5px 10px;
    font-family: Arial;
    font-size: 15px;
    color: #0b6998;
}
/*Footer NAvigation Ends */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:22:58.363

双斜杠 ( `// comment here`) 不是 CSS 中注释的有效标记，只有完整的 C 样式注释块是 ( `/* comment here */`)。还有其他验证错误（例如在未指定单位`10`vs的情况下定义元素的宽度`10px`）。

# ajax - blob 的类型是什么？

> ID：13848699
> 
> 赞同：0
> 
> 时间：2012-12-12T21:10:09.387
> 
> 标签：ajax, blob

我正在用 codeigniter 制作一个网站。我正在尝试通过 ajax 上传 blob。这是一个音频wav文件。在配置中，我需要上传文件的允许类型。对于 blob，这应该是什么？

`$config['allowed_types'] =`...？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:44:51.357

您是在谈论内容类型吗？这是您在准备请求时将其设置为客户端的任何内容。

# functional-programming - 在 OCaml 中匹配浮点值的替代方法是什么？

> ID：13848706
> 
> 赞同：1
> 
> 时间：2012-12-12T21:10:34.537
> 
> 标签：functional-programming, ocaml

我正在学习[Jason Hickey 的 Objective Caml 简介](http://www.cs.caltech.edu/courses/cs134/cs134b/book.pdf)。

* * *

它说

`Matching against floating-point values is supported, but it is rarely used because of numerical issues`

* * *

好的，我们无法匹配浮点值。

**那如果我们需要呢？那怎么办呢？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:13:08.093

您可以匹配浮点数，它只是说它很少使用。

它很少使用，因为可能会出现精度问题。如果您有两个数字 x 和 y：

```
 x = 0.000000001
 y = 0.0000000009 
```

x 和 y 一样吗？这要看情况。如果 x 和 y 是计算结果，那么累积舍入可以解释差异，它们可能是相同的。

更粗略地说，浮点比较通常“足够接近”，因此为什么模式匹配很少使用它们作为精确匹配可以排除经常需要的“足够接近”匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:13:22.817

您可以编写带有辅助函数的[模式保护](https://code.google.com/p/ocaml-patterns/wiki/PatternGuards)来检查是否相等，或者是否符合某些 epsilon 或其他标准。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T21:54:05.873

要扩展以前的答案，您可以将模式匹配与浮点数结合使用，如下例所示：

```
# let float_match_example = function
    | 0\. -> "exact zero"
    | x when abs_float x < 1e-12 -> "epsilon"
    | _ -> "other";;

val float_match_example : float -> string = <fun>

# List.map float_match_example [0.; 42e-15; 3.];;

- : string list = ["exact zero"; "epsilon"; "other"] 
```

请注意，模式匹配隐式使用相等测试，这在使用浮点数时很少需要：当舍入误差累积时，两个浮点数很少完全相等。因此，您可以使用带有关键字的[守卫](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/expr.html#@manual.kwd43)`when`，如上面的代码所示。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-12T22:00:57.330

当您使用代数数据类型（如`Some 3: int option`）时，实际上需要模式匹配。这是获取包含值的基本 OCaml 功能。当使用像数字这样的原始值时，模式匹配只是一种方便的表示法。可以使用常用的关系运算符（和`if`语句）。这就是您通常用于浮点值的方法。正如其他人所提到的，您还可以使用模式保护，这主要是另一种形式的`if`陈述。

# java - 如何以像素为单位设置 JTextField 的大小

> ID：13848709
> 
> 赞同：1
> 
> 时间：2012-12-12T21:10:53.773
> 
> 标签：java, swing, user-interface, jtextfield, preferredsize

嘿，我只是想知道是否有办法将 JTextField 宽度设置为例如屏幕大小的 50%。我知道如何获取屏幕的尺寸只是 JTextField 将其设置为字符数而不是像素

textfield = new JTextField("你好", 20);

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:39:13.190

以像素为单位设置大小`JTextField`会导致您走上使用绝对定位的道路，这通常是不可取的。从[没有布局管理器的情况下](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

> 尽管可以不使用布局管理器，但您应该尽可能使用布局管理器。布局管理器也可以很容易地被其他容器以及其他程序重用。

Have a look at the functionality offered by existing [layout managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html) and [avoid using the *setXXXSize()* component methods](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi). For example, `GridLayout` ( or even `GridBagLayout`) can be used to size a `JTextField` width to 50% of a frame client area.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T21:20:56.453

您可以使用 setSize() 方法来设置 JTextField 组件的大小。

```
public void setSize(int width,
                    int height) 
```

调整此组件的大小，使其具有宽度宽度和高度高度。参数： **width** - 此组件的新宽度（以像素为单位） **height** - 此组件的新高度（以像素为单位）

Javadoc：[http](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#setSize(int) ://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#setSize (int , int)

**编辑：** 添加到 GridLayout 的任何组件都将调整为与添加的最大组件相同的大小。如果您希望组件保持其首选大小，则将该组件包装在 JPanel 中，然后面板将调整大小：

也使用`setPreferredSize`代替`setSize`.

# parallel-processing - levenshtein 算法并行

> ID：13848710
> 
> 赞同：0
> 
> 时间：2012-12-12T21:11:01.580
> 
> 标签：parallel-processing, levenshtein-distance, tbb

我已经使用 parallel_for 实现了该算法。但大多数情况下我使用同步部分，所以我没有利润。也许有更好的选择？

```
 tbb::parallel_for (tbb::blocked_range<int>(1, m * n), apply_transform(d, j, this, m, n));

    void apply_transformation(int * d, int i, int j, int n){
        int elem1 = (*v1)[i];
        int elem2 = (*v2)[j];
        if(elem1 == elem2){
            dLock.acquire(dMutex);
            d[i*n + j] = d[(i-1)*n + j-1];       // no operation required
            dLock.release();
        } else {
            dLock.acquire(dMutex);
            d[i*n + j] = std::min(std::min(d[(i-1)*n + j] + 1, //deletion
                    d[i*n + j-1] + 1), //insertion
                    d[(i-1)*n + j-1] + 1); //substitution
            dLock.release();
        }
    }

    class apply_transform{
        int * array;
        int m_j;
        Levenstein * m_l;

        int m, n;
        public:
            apply_transform (int* a, int j, Levenstein * l, int width, int height):
                array(a), m_j(j), m_l(l), m(width), n(height) {}

            void operator()(const tbb::blocked_range<int>& r ) const {
                for (int i=r.begin(); i!=r.end(); i++ ){
                    m_l->apply_transformation(array, i, m_j, n);
                }
            }
    }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T21:22:28.977

Levenstein 距离计算本质上是一种波前模式，其中的计算`d(i,j)`需要了解`d(i-1,j-1)`、`d(i-1,j)`和`d(i,j-1)`。这些依赖关系自然形成了任务的 DAG；一个要计算的任务`d(i,j)`只有在其所有前任（以及它们的前任等）都完成后才能执行。已解决所有依赖关系且不相互依赖的任务（例如`d(1,2)`和`d(2,1)`）可以并行处理。除了遵循依赖关系，不需要其他同步。

有几种方法可以在 TBB 中表达波前模式：使用低级任务（复杂且不推荐），使用`parallel_do`原子计数器（如[TBB 设计模式文档](http://software.intel.com/sites/products/documentation/doclib/tbb_sa/help/tbb_userguide/Design_Patterns/Wavefront.htm)中所述；那里使用的示例与您所做的非常接近）并使用流程图（如[TBB 博客中所述](http://software.intel.com/en-us/blogs/2011/09/09/implementing-a-wave-front-computation-using-the-intel-threading-building-blocks-flow-graph)）。我建议您研究这些文档并进行自己的实验。

另请注意，计算单个的工作量`d(i,j)`太小，无法证明并行执行的开销是合理的。为了实现一些加速，将一个矩形计算块聚合到一个任务中，在任务中串行处理块元素。这些块将具有相同的依赖模式。但是您制作的块越大，可用的并行度就越少，因此您可能希望尝试使用块大小以获得最佳性能。

# python - python中的词法错误

> ID：13848718
> 
> 赞同：1
> 
> 时间：2012-12-12T21:11:22.087
> 
> 标签：python, pjsip

我正在尝试使用 PJSUA 的 python API 创建一个记录器对象。

我必须承认我被难住了。我在示例 python 教程中使用了 [call.py：http://trac.pjsip.org/repos/browser/pjproject/trunk/pjsip-apps/src/python/samples/call.py](http://trac.pjsip.org/repos/browser/pjproject/trunk/pjsip-apps/src/python/samples/call.py)

我尝试将其添加到主要尝试主体之后`lib.start()`，

```
​rec = lib.create_recorder(self, "/home/user1/Desktop/a.wav" ) # this is what is causing the trouble
rec1 = lib.recorder_get_slot(self, rec ) 
```

但 Eclipse 抱怨“第 81 行第 13 列的词法错误。遇到：”\u200b“（8203）之后：“”

然后我添加了

```
pj.Lib.instance().conf_connect(call_slot, ​lib.recorder_get_slot(self, rec)) 
```

在类里面的`on_media_state`方法里面`MyCallCallback`。

[我在这里](https://stackoverflow.com/questions/6501115/lexical-error-encountered-0-after)尝试了解决方案，但至少一开始就教导没有随机出现的奇怪字符。

我究竟做错了什么？在这种情况下，词汇错误到底是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:24:14.750

引用`\u200b`听起来像是[Unicode character`U+200B ZERO WIDTH SPACE`](http://www.fileformat.info/info/unicode/char/200b/index.htm)。这不是 Python 语言源代码中常见的字符。

您是否对非欧洲语言使用任何键盘或输入法？然后，您可能不小心输入或粘贴了宽度为零的文本。

试试这个：小心地将您的输入系统设置为英语或欧洲语言。重新键入第 81 行。然后删除所有旧的第 81 行。通过这样做，您消除了零宽度空间，并将其替换为符合您预期的 Python 源代码。

# cloud-foundry - Cloud Foundry 网络研讨会促销代码：如何申请现有帐户？

> ID：13848723
> 
> 赞同：-3
> 
> 时间：2012-12-12T21:11:31.807
> 
> 标签：cloud-foundry

今天参加了 Cloud Foundry 网络研讨会并收到了（IIRC）“免费 2 GB 帐户”的促销代码，但我之前已经在 Cloud Foundry 注册过。

我的问题是促销代码提供的好处如何应用于我已经存在的帐户（假设实际上有一些不同的好处）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T23:53:34.817

希望您喜欢这次网络研讨会。当前帐户均限制为 2gb，因此您不能将其他 2 个添加到第一个帐户以获得 4gb 帐户。

我们的商业产品将可以从更大的帐户中受益。

同时，您当然可以创建 2 个单独的帐户，假设您的应用程序本身不需要超过 2gb（这可能是件好事）

# https - Axis2“禁止使用 https”

> ID：13848724
> 
> 赞同：4
> 
> 时间：2012-12-12T21:11:36.183
> 
> 标签：https, axis2

我是 SOAP 新手，正在构建我的第一个 Axis2 (v 1.6.2) Web 服务。我从一位同事那里复制了一个小型测试服务，如果我使用 http 而不是 https，它就会运行。我的同事没有这个问题。

我收到的错误是“javax.servlet.ServletException：https 被禁止”。我的 Axis2.xml 文件包含以下内容：

```
<transportReceiver name="http"  class="org.apache.axis2.transport.http.AxisServletListener">
    <parameter name="port">8080</parameter>
</transportReceiver>

<transportReceiver name="https" class="org.apache.axis2.transport.http.AxisServletListener">
    <parameter name="port">8443</parameter>
</transportReceiver> 
```

我正在测试 localhost、JRE 6.1 和 Tomcat 7.0.25。我的同事（能够使用 https）正在使用 Websphere 6 和 Axis2 v.1.6.0，因此这可能是 appserver 或 Axis2 版本问题。我们不使用 Maven。

我的 Tomcat 端口是 http:8080、https:8443 和 AJP:8009。

任何解决此 https 错误的帮助将不胜感激。

更新：尚无解决方案，但似乎与以下内容相似或相同： [https ://stackoverflow.com/questions/13808029/http-is-forbidden-exception-while-accessing-the-axis-2-webservice](https://stackoverflow.com/questions/13808029/http-is-forbidden-exception-while-accessing-the-axis-2-webservice)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:40:18.447

I discovered the cause. I have the following entry in my web.xml file, for the AxisServlet servlet. My co-worker also had the entry, but hers was commented out. This entry caused a "file not found" error on server startup. Commenting this out resolved the issue.

```
 <init-param>
        <param-name>axis2.xml.path</param-name>
        <param-value>/WEB-INF/conf/axis2.xml</param-value>
    </init-param> 
```

linuxlewis, thank you for your response!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:50:04.103

我可以想到两个可能的问题。

1.  可能位于 Web 服务前面的 IIS/Apache 服务器正在使用某种域限制。使用 mod_authz_host，您可以根据域限制对特定 http 模式的访问

2.  如果您使用 Java 从服务器访问 Web 服务，那么您可能需要在 JDK 安全 cacerts 文件中安装与 Web 服务关联的证书。如果您的同事在 websphere 中工作，他们可能已经安装了证书

# jquery - 我可以fadeIn（）以下，如果是这样，语法看起来如何？

> ID：13848726
> 
> 赞同：0
> 
> 时间：2012-12-12T21:11:39.277
> 
> 标签：jquery

所以目前我正在通过 jQuery 在我的网站上编辑动态 h2。但我希望它淡入（）然后显示消息。这是我当前的代码：

```
$("#score h2").html("You are not correct! Try again."); 
```

该代码只是编辑我的 h2。但我希望我的 h2 能够淡入淡出（），然后显示消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:12:38.183

```
$("#score h2").hide().fadeIn(1000, function() {
    $(this).html("You are not correct! Try again.");
}); 
```

或在淡入之前添加文本：

```
$("#score h2").hide()
              .html("You are not correct! Try again.")
              .fadeIn(1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T21:13:01.333

您需要先将其隐藏以使其淡入

```
$("#score h2").html("You are not correct! Try again.").hide().fadeIn('slow'); 
```

# java - 我无法纠正的鼠标事件未知错误

> ID：13848730
> 
> 赞同：1
> 
> 时间：2012-12-12T21:11:50.680
> 
> 标签：java, swing, awt, mouse-listeners

我正在学习 java，在做 MouseListener 问题时，我在类声明中遇到错误，尝试了我所知道的一切，请帮助我。根据我的说法，我已经正确完成了所有编码，也将代码粘贴到了 IDE 中，但出现了同样的错误。

谢谢

```
 import java.awt.*;
     import java.awt.event.*;
     import javax.swing.*;

       public class Sub extends JFrame      
    {
private JPanel mousepanel;
private JLabel statusbar;

public Sub()
{
    super("Mouse Events");
    // we didnt have a FlowLayout as we had in previous programs

    mousepanel = new JPanel();
    mousepanel.setBackground(Color.WHITE);
    add(mousepanel, BorderLayout.CENTER); //BorderLayout used instead of FlowLayout and it will place it in the center of the window.

    statusbar = new JLabel("Default");
    add(statusbar, BorderLayout.SOUTH); // same as above

    thehandler handler = new thehandler();
    mousepanel.addMouseListener(handler);
    mousepanel.addMouseMotionListener(handler);

            private class thehandler implements MouseListener, MouseMotionListener
    {
        public void mouseClicked(MouseEvent event)
        {
            statusbar.setText(String.format("Clicked at %d, %d", event.getX(), event.getY()));
        }
        public void mousePressed(MouseEvent event)
        {
            statusbar.setText("You press down the mouse.");
        }
        public void mouseReleased(MouseEvent event)
        {
            statusbar.setText("You released the mouse.");
        }
        public void mouseEntered(MouseEvent event)
        {
            statusbar.setText("You enetered the mouse panel area.");
            mousepanel.setBackground(Color.PINK);
        }
        public void mouseExited(MouseEvent event)
        {
            statusbar.setText("The mouse has left the window.");
            mousepanel.setBackground(Color.WHITE);
        }

        //these aremouse motion events

        public void mouseDragged(MouseEvent event)
        {
            statusbar.setText("Your are dragging the mouse.");
        }
        public void mouseMoved(MouseEvent event)
        {
            statusbar.setText("You moded the mouse.");
        }
    }
}
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:16:11.290

您需要将`thehandler`类定义移出`Sub`构造函数的范围。

*旁注：*类名以大写字母开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:18:04.787

将您的类定义移到构造函数之外，如下所示：

```
public Sub() {
    // ... rest of code
}

// ... rest of code

private class thehandler implements MouseListener, MouseMotionListener {
    // ... rest of code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:50:46.083

检查您的大括号并使用一些 IDE，它将帮助您更轻松地纠正错误。

# c++ - 使用指针向量循环其他向量

> ID：13848741
> 
> 赞同：2
> 
> 时间：2012-12-12T21:12:46.143
> 
> 标签：c++, pointers, vector

我创建了一个类，其中包括向量。我想循环这些向量，因此在我的类构造函数中创建了一个指向这些向量的指针向量。它编译正常，但运行不正常。调试似乎表明 vector.size() 存在问题，尽管它出现在 cout 行上。我已经缩短了课程和代码以使其更易于阅读，但我仍然收到错误消息。

这是类定义：

```
#ifndef DEFINITION_CLASSES
#define DEFINITION_CLASSES

#include <string>
#include <vector>
#include <stdarg.h>

using namespace std;

class objLoc {
public:
    vector<string> branches;
    void setBranches(int amount, ...);
};
void objLoc::setBranches(int amount, ...) {
    char *value;
    va_list points;

    branches.clear();
    va_start(points, amount);
    for (int i = 0; i < amount; ++i) {
        value = va_arg(points, char *);
        branches.push_back(string(value));
    }
    va_end(points);
}

class Spline3d {
public:
    vector<double> x, y, z;
    objLoc location;
    void setx(int amount, ...);
};
void Spline3d::setx(int amount, ...) {
    double value;
    va_list points;

    x.clear();
    va_start(points, amount);
    for (int i = 0; i < amount; ++i) {
        value = va_arg(points, double);
        x.push_back(value);
    }
    va_end(points);
}

class SuspensionGeneralProperties {
public:
    Spline3d left_x_vs_z, left_y_vs_z, right_x_vs_z, right_y_vs_z;
};

class Suspension {
public:
    Suspension();
    SuspensionGeneralProperties suspProp;
    vector<Spline3d *> variable_spline3d;
};
Suspension::Suspension() {
    Spline3d * temp_spline3d[] = { &suspProp.left_x_vs_z, &suspProp.left_y_vs_z,
            &suspProp.right_x_vs_z, &suspProp.right_y_vs_z };
    variable_spline3d.assign(temp_spline3d, temp_spline3d + 5);
}

#endif 
```

这是源文件：

```
#include <iostream>
#include <string>
#include <vector>
#include <stdarg.h>
#include "class_def.h"

using namespace std;

void loop(Suspension* susp) {
    Spline3d* spline;

    for (size_t i = 0; i < susp->variable_spline3d.size(); i++) {
        spline = susp->variable_spline3d[i];
        cout << "Branch: " << spline->location.branches[0] << endl; //This is where the error seems to be
    }
}

int main() {
    int i;
    Suspension suspFront;

    suspFront.suspProp.left_x_vs_z.setx(11, -100.0, -80.0, -60.0, -40.0, -20.0,
            0.0, 20.0, 40.0, 60.0, 80.0, 100.0);
    suspFront.suspProp.left_x_vs_z.location.setBranches(3, "Subsystem",
            "SuspensionGeneralProperties", "Spline3d");
    suspFront.suspProp.left_y_vs_z.setx(11, -100.0, -80.0, -60.0, -40.0, -20.0,
            0.0, 20.0, 40.0, 60.0, 80.0, 100.0);
    suspFront.suspProp.left_y_vs_z.location.setBranches(3, "Subsystem",
            "SuspensionGeneralProperties", "Spline3d");
    suspFront.suspProp.right_x_vs_z.setx(11, -100.0, -80.0, -60.0, -40.0, -20.0,
            0.0, 20.0, 40.0, 60.0, 80.0, 100.0);
    suspFront.suspProp.right_x_vs_z.location.setBranches(3, "Subsystem",
            "SuspensionGeneralProperties", "Spline3d");
    suspFront.suspProp.right_y_vs_z.setx(11, -100.0, -80.0, -60.0, -40.0, -20.0,
            0.0, 20.0, 40.0, 60.0, 80.0, 100.0);
    suspFront.suspProp.right_y_vs_z.location.setBranches(3, "Subsystem",
            "SuspensionGeneralProperties", "Spline3d");

    loop(&suspFront);

    cin >> i;
    return i;
} 
```

我将非常感谢任何可以帮助我解决这个问题的线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:26:13.810

> variable_spline3d.assign(temp_spline3d, temp_spline3d + 5);

您`assign()`要复制**五个** `Spline3D*`指针，但数组中只有**四个**指针，所以第 5 个指针是垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:18:46.000

您没有检查大小`spline->location.branches`。很可能存在一个空的分支向量，而您正试图访问一个不存在的元素。

# ios - CVOpenGLESTextureCacheCreateTextureFromImage 与 glTexImage2D

> ID：13848743
> 
> 赞同：6
> 
> 时间：2012-12-12T21:12:50.043
> 
> 标签：ios, video, opengl-es, opengl-es-2.0, avfoundation

我有一个 iOS 应用程序，我在其中读取视频`AVFoundation`并将每个视频帧加载到 OpenGL 纹理中，并以`GLKView`.

我为每一帧复制视频缓冲区没有问题：

```
CVPixelBufferRef buffer = [someAVPlayerItemVideoOutput copyPixelBufferForItemTime:itemTime itemTimeForDisplay:nil]; 
```

但是当我将视频加载到 openGL 中时，我会根据我使用的方法得到不同的结果。通过观看 Apple 的 WWDC 2011 Session 414 Advances in OpenGL 视频，我的理解是，新`CVOpenGLESTextureCacheCreateTextureFromImage`功能应该比通过`glTexImage2D`. 但是，当使用具有大量计算的着色器程序时，无论我使用哪种方法，我都会获得相同的帧速率。此外，`CVOpenGLESTextureCacheCreateTextureFromImage`实际上给了我一个奇怪的“块状”失真，而`glTexImage2D`没有。失真似乎屏幕上的随机块不会随最新帧更新。

这是我用来使用该`CVOpenGLESTexture`方法创建纹理的代码：

```
CVOpenGLESTextureRef videoFrameTexture = NULL;
CVPixelBufferLockBaseAddress(buffer, 0);    
CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, videoTextureCache, buffer, NULL, GL_TEXTURE_2D, GL_RGBA, CVPixelBufferGetWidth(buffer), CVPixelBufferGetHeight(buffer), GL_BGRA, GL_UNSIGNED_BYTE, 0, &videoTexture);
glBindTexture(GL_TEXTURE_2D, CVOpenGLESTextureGetName(videoFrameTexture));
CVBufferRelease(buffer);    
CFRelease(videoFrameTexture); 
```

这是我用来加载 via 的另一种方式`glTexImage2D`：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, CVPixelBufferGetBytesPerRow(buffer)/4, CVPixelBufferGetHeight(buffer), 0, GL_RGBA, GL_UNSIGNED_BYTE, CVPixelBufferGetBaseAddress(buffer)); 
```

为什么我使用 会得到奇怪的失真并且没有更好的帧速率`CVOpenGLESTextureCacheCreateTextureFromImage()`？

# jsf - IceFaces 中的组框

> ID：13848748
> 
> 赞同：0
> 
> 时间：2012-12-12T21:13:06.833
> 
> 标签：jsf, jsf-2, icefaces, icefaces-2

我想在 Icefaces 中实现这样的目标。HTML 有一个有帮助的图例标签。有没有办法在 IceFaces 中使用该标签？如果没有，我们如何在 IceFaces 中做到这一点？ ![](../Images/4c4abec282ea39cab035933024ebc5d4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:45:07.017

fieldset 元素只表示一组表单控件，您可以这样做：

```
<fieldset>
    <legend>Display:</legend>
    <h:selectOneRadio value="#{saveDVDBean.title}">
        <f:selectItem itemValue="gf1" itemLabel="GodFather I" />
        <f:selectItem itemValue="gf2" itemLabel="GodFather II" />
        <f:selectItem itemValue="gf3" itemLabel="GodFather III" />
    </h:selectOneRadio>
</fieldset> 
```

# playframework-2.0 - Play Framework 2.0 Websockets 消息

> ID：13848751
> 
> 赞同：1
> 
> 时间：2012-12-12T21:13:18.640
> 
> 标签：playframework-2.0

我正在使用 Playframework 2.0.3 和 WebSockets。我把所有的 WebSockets 放在一个 Akka Actor 中。如果我在 WebSocket.In 频道上收到一条消息（字符串），我想回复它。我想使用“消息”（i18n），但我收到错误“这里没有可用的 HTTP 上下文”。关于如何在 HTTP 请求中而不是在 WebSocket.in 回调方法中使用消息的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:22:27.970

好的，我自己发现了：

我在打开 WebSocket 时存储上下文。每当我必须访问 WebSocket 中的消息时，我都会设置 Threadlocal：

```
Context.current.set(context); 
```

之后我将它从当前线程中删除。

```
Context.current.remove(); 
```

# django - 在 Django 中，当有多个可能的结果时，latest('date') 返回什么？

> ID：13848755
> 
> 赞同：3
> 
> 时间：2012-12-12T21:13:46.313
> 
> 标签：django

我正处于了解 Django 的最初阶段，并且已经开始着手一个项目来帮助我学习它。在编写一些模型时，我遇到了一种情况，我想使用 latest() 但可能有多个对象具有相同的“最新”日期。

在[最新](https://docs.djangoproject.com/en/dev/ref/models/querysets/#latest)的 Django 文档中，它说

> 与 get() 一样，如果没有具有给定参数的对象， latest() 将引发 DoesNotExist。

但是，如果有多个对象具有相同的“最新”日期，那么 latest() 会做什么？我怀疑它会像 get() 那样引发[MultipleObjectsReturned](https://docs.djangoproject.com/en/dev/ref/exceptions/#django.core.exceptions.MultipleObjectsReturned)，但由于文档中没有说明，我在这里问。我实际上希望它返回最新创建的对象，即具有最大主键的对象。如果它不这样做，那么正确的 get() 语句将获得最新的日期，如果有多个，那么按主键最大的语句是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:22:37.287

根据[`QuerySet.latest()`方法源代码](https://github.com/django/django/blob/master/django/db/models/query.py#L481)，情况并非如此 -`latest()`不会 raise `MultipleObjectsReturned`，因为它将结果限制为 1 个元素：

```
def latest(self, field_name=None):
    """
    Returns the latest object, according to the model's 'get_latest_by'
    option or optional given field_name.
    """
    latest_by = field_name or self.model._meta.get_latest_by
    assert bool(latest_by), "latest() requires either a field_name parameter or 'get_latest_by' in the model"
    assert self.query.can_filter(), \
        "Cannot change a query once a slice has been taken."
    obj = self._clone()
    obj.query.set_limits(high=1)  # <-- see here
    obj.query.clear_ordering()
    obj.query.add_ordering('-%s' % latest_by)
    return obj.get() 
```

`get()`但是，[正如在其源代码中可见的那样](https://github.com/django/django/blob/master/django/db/models/query.py#L366)，`MultipleObjectsReturned`仅当结果数不同于`1`（当它实际返回此结果时）和不同于`0`（当它 raise 时）时才会引发`DoesNotExist`。

因此，尽管`latest()`返回 的结果`get()`，但`get()`可以在不超过 1 个元素的东西上工作，您无需担心这种极端情况。希望它足够清楚。

我相信在这种情况下（当两个或多个记录具有相同的最新日期时）Django 依赖于从数据库返回的内容。

# java - 解析多部分请求

> ID：13848761
> 
> 赞同：1
> 
> 时间：2012-12-12T21:14:01.710
> 
> 标签：java, inputstream, multipart

对不起，如果我的英语不是很好。

任何人都知道如何使用 java 来解析多部分 HttpServletRequest 请求并且不会失去对 InputStream 的访问。

由于内存限制，我不想在内存中复制流。

包装请求只是解决此类问题的手段吗？

ServletFileUpload.getitemiterator 只允许一次请求访问输入流？

再次感谢你，山姆。

# php - substr 值与 preg_match_all PREG_PATTERN_ORDER 不匹配

> ID：13848771
> 
> 赞同：0
> 
> 时间：2012-12-12T21:15:06.813
> 
> 标签：php, preg-match-all, substr

我使用 preg_match_all`PREG_PATTERN_ORDER`来返回在字符串中找到的值中的位置。然后，当尝试`substr`引用它们时，它们不会排队。我预计会有一个偏移量，但似乎每个案例都有未确定的错位。

这是因为 preg_match_all 返回的是字节而不是字符吗？如果是这样，有没有办法将字节转换为字符？如果我完全不合时宜，我可以发布一些代码......

好的，这是适用的代码：

```
// RETURN POSITION OF START AND END TAGS TO ARRAY
function getTagPositions($strBody, $start, $end)
{
    preg_match_all('/' . preg_quote($start, '/') . '([\w\s.]*?)'. preg_quote($end, '/').'/im', $strBody, $strTag, PREG_PATTERN_ORDER);
    $intOffset = 0;
    $intIndex = 0;
    $intTagPositions = array();

    foreach($strTag[0] as $strFullTag) {
        $intTagPositions[$intIndex] = array('start' => (strpos($strBody, $strFullTag, $intOffset)), 'end' => (strpos($strBody, $strFullTag, $intOffset) + strlen($strFullTag)));
        $intOffset += strlen($strFullTag);
        $intIndex++;
    }
    return $intTagPositions;
}

function arrayValRecursive($key, array $arr){
    $val = array();
    array_walk_recursive($arr, function($v, $k) use($key, &$val){
        if($k == $key) array_push($val, $v);
    });
    return count($val) > 1 ? $val : array_pop($val);
}

$arrayOfPositions = getTagPositions($html,$go,$stop);
$arrayOfStart = arrayValRecursive('start', $arrayOfPositions);   //print_r($arrayOfStart);
$arrayOfEnd = arrayValRecursive('end', $arrayOfPositions);   //print_r($arrayOfEnd);

  $offset = 0;
  $range = $arrayOfStart[$i] + $offset;
  $rangeEnd = $arrayOfEnd[$i];    
  echo '<br>'.$range.' to '.$rangeEnd.' is: <br>'; 
  echo substr($html, $range, $rangeEnd); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:30:29.963

根据[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)

> **返回值**
> 返回完整模式匹配的数量（可能为零），如果发生错误，则返回 FALSE。

如果要在字符串中获取偏移量，请使用`PREG_OFFSET_CAPTURE`

> **PREG_OFFSET_CAPTURE**
> 如果传递了这个标志，对于每一个出现的匹配，附加的字符串偏移量也将被返回。请注意，这会将匹配项的值更改为一个数组，其中每个元素都是一个数组，该数组由偏移量 0 处的匹配字符串及其在偏移量 1 处的字符串偏移量组成。

这是一个例子：

```
$count = preg_match_all('/\S+/', 'Hello, world!', $matches, PREG_OFFSET_CAPTURE);
echo "count=$count\n";
var_dump($matches); 
```

这给出了输出

```
count=2
array(1) {
  [0]=>
  array(2) {
    [0]=>
    array(2) {
      [0]=>
      string(6) "Hello,"
      [1]=>
      int(0)
    }
    [1]=>
    array(2) {
      [0]=>
      string(6) "world!"
      [1]=>
      int(7)
    }
  }
} 
```

您可以看到模式匹配`$count=2`次数。它匹配位置上的“Hello”，`$matches[0][0][1]=0`匹配“world！” 在位置`$matches[0][1][1]=7`

以下是您循环所有匹配项的方式

```
$start = array();
$end = array();
foreach($matches[0] as $match) {
    $start[] = $match[1];
    $end[] = $match[1] + strlen($match[0]);
} 
```

# android - 在 onPostExecute 中调用 setAdapter 返回 NullException

> ID：13848772
> 
> 赞同：1
> 
> 时间：2012-12-12T21:15:07.017
> 
> 标签：android, android-asynctask

嗨，我有以下代码，它总是导致空指针异常：

```
protected void onPostExecute(List<String> result) {     
    ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(getApplicationContext(),R.id.spinner1);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    Iterator<String> it = result.iterator();

    while(it.hasNext()){
        String v = (String) it.next();
        adapter.add(v);
    }

    Spinner spin = (Spinner) findViewById(R.id.spinner1);
    spin.setAdapter(adapter); //this line
} 
```

如果我注释该`this line`行，则不会引发异常，并且我已经检查过并且 spin 不为 null，适配器也不为空。

为什么我仍然收到以下错误？

```
12-13 05:08:55.446: E/AndroidRuntime(1349): android.content.res.Resources$NotFoundException: Resource ID #0x7f070002 type #0x12 is not valid
12-13 05:08:55.446: E/AndroidRuntime(1349): at android.content.res.Resources.loadXmlResourceParser(Resources.java:2110) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:22:06.520

您需要将*布局*资源传递给 ArrayAdapter 构造函数，例如：

```
new ArrayAdapter<CharSequence>(getApplicationContext(), 
        android.R.layout.simple_spinner_item); 
```

# c# - 如何获取数据网格视图以填充控件中定义的基于参数

> ID：13848775
> 
> 赞同：0
> 
> 时间：2012-12-12T21:15:25.207
> 
> 标签：c#, datagridview

我正在使用 Visual Studio 2010 创建一个 C# windows 窗体应用程序。此应用程序的最终目标是能够轻松修改托管在 windows server 2005 中的数据库表。

该表有四个字段：“StoreNumber”、“PlannedSales”、“Year”和“WeekNumber”。

我想用来填充数据网格的查询如下所示：
        SELECT StoreNumber, PlannedSales
            FROM PlannedSalesTable
            WHERE Year = **[YearUpDownPicker].value**和**Weeknumber = [WeekUpDownPicker].value**

（我希望 DataGrid 每周显示数据。）

updownPickers 是我想用来选择年份和星期的。不幸的是，通过向表适配器添加过滤查询创建的工具条中可用的所有内容似乎都不合适或过于复杂，无法简单地限制用户将看到的数据。
（为什么使用下拉菜单或文本框来选择一个星期来查看 NumericUpDown 何时为我完成所有验证......）

是否可以根据控件的值在数据网格视图上使用过滤表达式？我将如何做到这一点，以及使用与 YEAR 和 MONTH 输入相同的控件来更新数据库的最佳方法是什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:57:53.690

弄清楚了！我用了：

BindingSource.Filter = string.Format("WeekNumber='{0}' and Year='{1}'", week, year); TableAdapter.Fill(DataSet);

（变量星期和年份是预先使用数字选择器定义的。）

上面的语句在点击事件期间被调用，它会自动刷新表格。确保表格适配器的“填充前清除”属性设置为“真”

仍然需要弄清楚如何以这种方式更新它。但现在它正在显示。

# ruby - Ruby if .. elsIf .. else 在一行上？

> ID：13848780
> 
> 赞同：27
> 
> 时间：2012-12-12T21:15:45.470
> 
> 标签：ruby, logic

使用 ruby​​ 三元运算符，我们可以为简单的 if else 构造编写以下逻辑：

```
a = true  ? 'a' : 'b' #=> "a" 
```

但是如果我想把它写成`if foo 'a' elsif bar 'b' else 'c'`呢？

我可以这样写，但有点难以理解：

```
foo = true
a = foo  ? 'a' : (bar ? 'b' : 'c') #=> "a"

foo = false
bar = true
a = foo  ? 'a' : (bar ? 'b' : 'c') #=> "b" 
```

是否有更好的选择来处理这种情况，或者如果我们希望将 if..elsif..else 逻辑压缩成一行，这是我们最好的选择吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-12T21:25:10.937

```
a = (foo && "a" or bar && "b" or "c") 
```

或者

```
a = ("a" if foo) || ("b" if bar) || "c" 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-12T21:26:41.787

[Github Ruby Styleguide](https://github.com/styleguide/ruby)建议为琐碎的 if/else 语句保留一个衬里，并避免嵌套三元运算符。您可以使用`then`关键字，但它被认为是不好的做法。

```
if foo then 'a' elsif bar then 'b' else 'c' end 
```

如果发现您的控制语句过于复杂，您可以使用案例（ruby 的 switch 运算符）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T21:25:39.163

`a = if foo then 'a' elsif bar then 'b' else 'c' end`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-12T21:23:06.820

你也可以写：

```
x = if foo then 'a' elsif bar then 'b' else 'c' end 
```

但是，这不是 Ruby 中的惯用格式。

# android - 用户输入的年月日时分与系统年月日时分的区别

> ID：13848781
> 
> 赞同：1
> 
> 时间：2012-12-12T21:15:45.377
> 
> 标签：android, timepicker, android-calendar, android-datepicker

我已将用户输入的时间和日期设为：

```
DatePicker dp = (DatePicker) findViewById(R.id.datePicker);
TimePicker tp = (TimePicker) findViewById(R.id.timePicker);

int year = dp.getYear();
int month = dp.getMonth();
int date = dp.getDayOfMonth();
int hour = tp.getCurrentHour();
int min = tp.getCurrentMinute(); 
```

和系统的当前日期和时间为：

```
Calendar cal = Calendar.getInstance();

int Syear = cal.get(Calendar.YEAR);
int Smonth = cal.get(Calendar.MONTH);
int Sdate = cal.get(Calendar.DAY_OF_MONTH);
int Shour = cal.get(Calendar.HOUR_OF_DAY);
int Smin = cal.get(Calendar.MINUTE); 
```

假设，用户不会从系统的当前日期和时间设置过去的日期和时间。现在我需要用户输入和系统当前日期、时间（以分钟或秒或毫秒为单位）之间的差异。我怎样才能做到这一点？任何示例、教程或任何内容都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:25:58.367

要获得以毫秒为单位的差异，您可以执行以下操作：

```
 Calendar a = Calendar.getInstance();
     Calendar now = Calendar.getInstance();
     a.set(year, month, day, hour, min);
     long difference = a.getTimeInMillis()-now.getTimeInMillis(); 
```

# gnuplot - gnuplot 不重叠线

> ID：13848783
> 
> 赞同：2
> 
> 时间：2012-12-12T21:16:00.693
> 
> 标签：gnuplot

下图是用 gnuplot 生成的：![在此处输入图像描述](../Images/0390ff51c8291a41b2fe1276b5087bb6.png)

它显示了 5 个（但可能或多或少）波。但是，我需要的是分别显示每个波浪，就像这样（我用 gimp 做的）：

![在此处输入图像描述](../Images/4d18e999e36cc67e3aa7de161f373360.png)

有没有办法用 gnuplot 做到这一点？我还需要每个波浪都是不同的颜色，就像我现在一样。

这是使用的 gnuplot 脚本：http: [//pastebin.com/vAD2syTS](http://pastebin.com/vAD2syTS)

这是 gnuplot 脚本用来修复我的数据的 python 脚本：http: [//pastebin.com/WEncNjDA](http://pastebin.com/WEncNjDA)

这是数据： http: [//pastebin.com/ewBpvHWM](http://pastebin.com/ewBpvHWM)

这是python脚本修复后的数据：http: [//pastebin.com/cgimMyr9](http://pastebin.com/cgimMyr9)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T23:33:03.167

这个我玩得很开心。我的策略包括绘制设置略有不同的第一个、最后一个和中间图，以使边界对齐。我还定义了一些函数，以确保所有绘图颜色确实不同，除非您有超过 1600 万个数据集要绘制。

```
### indices: change this parameter to equal the number of data sets to be plotted
indices = 8 
# h: height of output in pixels
h = 150.0*indices
# d: top and bottom margin in pixels
d = 75.0

### define functions to help set top/bottom margins
top(i,n,h,d) = 1.0 - (d+(h-2*d)*(i-1)/n)/h
bot(i,n,h,d) = 1.0 - (d+(h-2*d)*i/n)/h

### define some fun RGB code converter functions

# round: crude rounding function (gnuplot doesn't have this?)
# assumes a float, returns an int
round(x) = x-int(x)>=0.5?ceil(x):floor(x)

# i2h: converts a (decimal) integer between 0 and 15 to hex.
# returns a string, 0-F corresponding to 0-15
i2h(i) = i==10?'A':i==11?'B':i==12?'C':i==13?'D':i==14?'E':i==15?'F':sprintf('%d',i)

# i2r: converts an integer to an RGB code.
# returns a string (RGB code) of length 6, 000000-FFFFFF corresponding to 0-16777215
# changing the last division to 15 instead of 16 prevents colors being too faint
i2r5(i) = i2h(i/(15**5))
i2r4(i) = i2h(i%(16**5)/(15**4))
i2r3(i) = i2h(i%(16**5)%(16**4)/(15**3))
i2r2(i) = i2h(i%(16**5)%(16**4)%(16**3)/(15**2))
i2r1(i) = i2h(i%(16**5)%(16**4)%(16**3)%(16**2)/(15**1))
i2r0(i) = i2h(i%(16**5)%(16**4)%(16**3)%(16**2)%(16**1))
i2r(i) = i2r5(i).i2r4(i).i2r3(i).i2r2(i).i2r1(i).i2r0(i)

# rgb_iter: returns the i-th of n RGB codes, evenly spaced across the spectrum
rgb_iter(i, n) = '#'.i2r(round((i-1)*(16777215.0/(n-1))))

### first set up some basic plot parameters
set term png enhanced size 800,h font 'Courier-Bold,14'
set output 'waves.png'

set title 'Wave propagation by geophones'
set ylabel 'Wave'

set xrange [1400:]
set yrange [-0.15:0.15]
set ytics ('-0.1' -0.1, '0.0' 0.0, '0.1' 0.1)

set key out right

### now make plots
set multiplot layout indices,1

### first plot
set border 14
set tmargin at screen top(1,indices,h,d)
set bmargin at screen bot(1,indices,h,d)
unset xtics
plot 'temp.dat' index 0 w lines lw 3 lc rgb rgb_iter(1,indices) title 'Geophone 1'
unset title

### intermediate plots
set border 10
unset xlabel
do for [i=1:indices-2] {
 set tmargin at screen top(i+1,indices,h,d)
 set bmargin at screen bot(i+1,indices,h,d)
 plot 'temp.dat' index i w lines lw 3 lc rgb rgb_iter(i+1,indices) title sprintf('Geophone %d', i + 1)
}

### last plot
set border 11
set tmargin at screen top(indices,indices,h,d)
set bmargin at screen bot(indices,indices,h,d)
set xtics nomirror
set xlabel 'Iterations'
plot 'temp.dat' index (indices-1) w lines lw 3 lc rgb rgb_iter(indices,indices) title sprintf('Geophone %d', indices)

unset multiplot 
```

示例数据集的输出如下所示： ![在此处输入图像描述](../Images/812ac35a25d6d61d0cf66b57949188ba.png)

顶部/底部地块的大小不是很完美，正如 mgilson 所说，可能需要一些`set xmargin at screen ...`命令才能使所有地块大小相等。

（如果没有别的，那些 int->RGB 转换器对于专门的应用程序很方便；我也有从 RGB 代码到整数的函数。）

编辑：我更新了脚本，所以所有的地块都将具有相同的高度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T21:53:28.170

如果您提前知道地块的数量（gnuplot 4.6）：

```
NUM_PLOTS = 6
set multiplot layout NUM_PLOTS,1
do for [i=1:NUM_PLOTS]{
   plot 'temp.dat' index i w lines lw 3 title sprintf('Geophone %d', i + 1)
}
unset multiplot 
```

如果你真的想确保你的边界和轴对齐，你可以使用 , , 和 where 的组合`set lmargin at screen ...`and`set rmargin at screen ...`的`set tmargin at screen ...`一些`set bmargin at screen ...`功能`...`，`i`尽管`NUM_PLOTS`可能将`lmargin`and设置`rmargin`在某个恒定位置就足够了（gnuplot 应该如果您不需要共享轴，请注意从上到下对齐）。

`set border 10`如果您真的需要，将删除顶部和底部边界线，但这可能不是必需的。

我会推荐类似的东西：

```
NUM_PLOTS = 6
set multiplot layout NUM_PLOTS,1
set lmargin at screen 0.1
set rmargin at screen 0.9
do for [i=1:NUM_PLOTS]{
   plot 'temp.dat' index i w lines lw 3 title sprintf('Geophone %d', i + 1)
}
unset multiplot 
```

# function - emacs lisp 是否支持在词法上重新定义函数？

> ID：13848788
> 
> 赞同：4
> 
> 时间：2012-12-12T21:16:24.100
> 
> 标签：function, emacs, elisp, lexical-scope

最新版本的 Emacs 支持 elisp 代码中变量的词法绑定。是否也可以在词法上重新定义函数？换句话说，Emacs Lisp 有类似的东西`lexical-flet`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:36:21.817

在 Emacs<24.3 中，您可以`(require 'cl)`然后使用`labels`. 在 Emacs-24.3 及更高版本中，您还可以执行`(require 'cl-lib)`然后使用`cl-flet`or `cl-labels`。

所有这些都是“复杂的宏”，它们生成的代码看起来像`(let ((fun (lambda (args) (body)))) ... (funcall fun my-args) ...)`，因为底层语言本身并不支持本地函数定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:11:39.657

有，`labels`但我不知道这是否是你要找的：

```
(defun foo ()
  42)

(defun bar ()
  (foo))

(list
 (foo)
 (bar)
 (labels ((foo ()
               12))
   (list (foo)
         (bar)))
 (foo)
 (bar)) 
```

它返回`(42 42 (12 42) 42 42)`。

# git - 使用 git 开发时的错误修复

> ID：13848791
> 
> 赞同：2
> 
> 时间：2012-12-12T21:16:31.363
> 
> 标签：git, workflow

我想知道是否有人可以就使用 git 时进行开发和修复错误的最佳方法提供建议。我的公司最近搬到了 github 来保持一个集中的 repo。我们通常有一个主分支，这就是我们在生产站点中拥有的。然后我们有一个开发分支，我们用它来保持对主分支的未来更新，并且每个编码器都有自己的一组分支（老实说，该组通常不大于 1）一旦更改被合并到开发中得到正式认可的。

问题是，除了开发之外，我确实必须不时地修复一些错误。

通常我的工作分支很脏，有很多修改过的文件，我保留了一个单独的存储库副本，它总是在开发分支中，所以我不必担心在修复错误时更改存储/更改分支，但我想知道你们中是否有人对如何解决这个问题有任何建议？

基本上，我发现这样做的唯一方法是存储我的更改，然后更改分支，但我不喜欢那样。

我已经检查了 SO 在键入此内容时给出的一些建议，但没有一个更接近。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:36:11.050

我个人认为拥有大量修改过的文件并不是一件好事。我更喜欢许多较小的提交，尽管有时我会因为忘记提交的问题而感到兴奋（但对于较大的功能来说更是如此）。

在这些情况下，我会隐藏和切换分支。如果由于修改数据的大小或类型而无法选择，您还可以创建一个临时存储分支并进行提交，以检查当前存在的所有内容。当您返回并重新签出原始分支时，您可以撤消该提交`git reset`（或者只是在您一直在处理的分支上执行相同的操作）。这允许（与存储相反）也可以签入尚未在索引中的文件。把它想象成一个扩展的藏匿处。

临时存储分支的优点是您也可以将其推送到远程，例如继续在另一台设备上工作（如果我必须中止开发并继续在另一台设备上，我会使用它在设备之间同步脏工作树） .

[git-flow](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)是一个很好的帮手，可以为错误修复分支等维护干净的分支工作流程。不过，我认为它不遵循上面的建议。

另一方面，应该注意的是，拥有一个干净的错误搜索存储库（如果错误的来源不明显）可能会有所帮助。有时，与报告用户拥有的版本相比，细微的变化已经悄然出现。

# javascript - 如果不符合标准，则清除间隔

> ID：13848793
> 
> 赞同：-2
> 
> 时间：2012-12-12T21:16:37.983
> 
> 标签：javascript, jquery

简而言之，`newsCheck`如果用户不在主页上，我需要清除调用函数的时间间隔。看起来很简单，我也是这么想的。这给我带来了巨大的问题。我使用历史 API，这就是为什么在页面重新加载和更改时间隔不会清除的原因。

这是我忽略了不重要的脚本的内容

```
//only run if on home page
if (url == 'Home' || url == ''  || url == 'home' || url == 'home.html' || url == 'Home.html'){

    //set up interval handler for cancellation when not on home 
    var handle=self.setInterval(function(){newsCheck()},1000);

    // ...

}//close if Home clause 
else
{
    handle = self.clearInterval(handle);
} 
```

好的，`newsCheck`这是一个通过 ajax 查询（轮询）从数据库中检查新信息的函数。这需要在不在家时取消，因为没有必要。

**有关历史 API 的额外信息**

我需要取消间隔，因为我使用历史 API 脚本加载新页面，因此即使我们不在主页上，该函数也会继续运行。

为了解决这个问题，我把它放在`loadContent`历史 API 的函数中。

```
$.ajax({
         type: "GET",
         url: "AJAX/request_feed.js",
         dataType: "script"
        }); 
```

如您所见，它运行我们所在的任何页面，以便`newsCheck`可以取消该功能。这就是我在上面的脚本中检查 url 的原因。

在具有`newsCheck`函数的脚本中，我将 url 变量放在了 url 之前，`(document).ready`以便在 url 更改为新 url 时检索 url，因此它不会获取上一页的 url。然后我们检查 URL 并运行脚本`Home`，如果没有，我们清除间隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:44:59.073

我认为这就是你想要的：

```
//only run if on home page
if (url == 'Home' || url == ''  || url == 'home' || url == 'home.html' || url == 'Home.html'){

    //set up interval handler for cancellation when not on home 
    var handle= setInterval(function(){newsCheck()},1000);

    // ...

} 
```

**编辑：**鉴于您正在使用 HTML5 历史 API 更改代码，我认为您需要的是：

```
// Set up the handle globally, because you won't have a history event triggered right away
var handle = setInterval(function(){newsCheck()},1000);
// Cancel it right away if you're not on the home page
if (url != 'Home' && url != ''  && url != 'home' && url != 'home.html' && url != 'Home.html') {
    clearinterval(handle);
}

// Listen for history API events
window.addEventListener('popstate', function(event) {
    // Check the new url
    if (url == 'Home' || url == ''  || url == 'home' || url == 'home.html' || url == 'Home.html') {
        // On the home page now, so set up the interval
        // And we're inside an anonymous function now, so scope the handle to the window
        window.handle = setInterval(function(){newsCheck()},1000);
    } else {
        // Not on the home page now, so clear the interval
        // No guarantee that the interval exists at this point
        if(window.handle)
            clearinterval(window.handle);
    }
}); 
```

而且我认为您需要为“pushstate”事件侦听器做类似的事情，但是我对这件事有点模糊，所以您只需尝试一下即可。

**原始回复**

几个指针。

1.  `setInterval`现在是大多数浏览器的javascript实现中的本机代码。您不需要在任何地方进行范围。请参阅[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)上的文档和示例。
2.  您不需要清除主页以外的页面上的间隔。主页以外的页面应该设置它。
3.  每秒一次的 Ajaxing 新闻非常疯狂。一旦你解决了代码，我强烈建议移到更长的时间间隔。您的服务器和您的计算机速度慢、延迟高或互联网服务差的用户会感谢您。
4.  根据你从哪里得到`url`，它可能完全是假的。您是否验证过它具有正确的价值？您确定要与之比较的所有值都是可能性吗？

此外，MDN 对从间隔调用的长时间运行的操作有这样的说法：

> **危险使用**
> 
> 如果您的逻辑执行时间可能比间隔时间长，建议您使用 window.setTimeout 递归调用命名函数。例如，如果使用 setInterval 每 5 秒轮询一次远程服务器，网络延迟、服务器无响应以及许多其他问题可能会阻止请求在分配的时间内完成。因此，您可能会发现排队的 XHR 请求不一定按顺序返回。
> 
> 对于这种情况，首选递归 setTimeout 模式：

```
(function loop(){
    setTimeout(function(){

       // logic here

       // recurse
       loop();

    }, 1000);
})(); 
```

> 在上面的代码片段中，声明了一个命名函数循环并立即执行。逻辑完成执行后，在 setTimeout 内递归调用循环。虽然此模式不保证在固定间隔上执行，但它确实保证前一个间隔在递归之前已经完成。

我建议从 AJAX 完成回调中为下一个 newsCheck() 调用设置超时。这样它仍然是异步的，你不可能一次触发多个请求。

# android - Android：图像显示比预期大

> ID：13848794
> 
> 赞同：0
> 
> 时间：2012-12-12T21:16:43.753
> 
> 标签：android, photoshop, android-image

我正在尝试构建一个中间带有徽标的启动画面。我正在从 Photoshop 导出 480x800 的图像构建以进行测试。

我的设计：

![在此处输入图像描述](../Images/0a407e8ce05c29bb006711dddbeed2d2.png)

安卓应用

![在此处输入图像描述](../Images/5629f3630c17fc4b5bba7036abff60b7.png)

XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/dark_bg"
    android:gravity="center"
    android:orientation="vertical"
    android:textAlignment="center" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:src="@drawable/logo" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:31:45.640

出于某种原因，我无法对您的原始帖子发表评论（我 = 低代表？）。

无论如何，您能否验证图像的分辨率和您的屏幕分辨率是否相同？如果没有，我猜可能会发生一些缩放/拉伸，因为[ImageView 的默认缩放类型是 FIT_CENTER](https://stackoverflow.com/questions/2951923/whats-the-default-scaletype-of-imageview)，这意味着图像将被缩放。您能否尝试改用[android:scaleType="center"](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)看看图像会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:55:06.227

```
<ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:src="@drawable/logo" /> 
```

请试试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:37:27.270

当针对高密度设备（即大多数较新的手机）时，请确保将图像放在适当的可绘制文件夹中。`drawable-hdpi`在这种情况下，由于其分辨率，听起来图像应该放在文件夹中。

发生的事情是，由于您将它放在 plain`drawable`中，Android 假设它是`mdpi`并且它为手机升级它（可能是 HDPI，所以 x1.5），这会超过屏幕/ImageView 的尺寸，这会导致它被这样显示。

# c - 在 C 中打开和读取文件

> ID：13848795
> 
> 赞同：-1
> 
> 时间：2012-12-12T21:16:43.627
> 
> 标签：c

我试图在 C 中打开一个文件，但我总是知道它无法打开该文件。我有以下代码：

```
 int i = 0;
        char delims[] = " ";
        char *result = NULL;
        char * results[10];
        result = strtok( cmdStr, delims );
        while( result != NULL ) {
            results[i] = result;
            i++;
            result = strtok(NULL, " ");
        }

        printf(results[1]); // it defo shows the name file here

        FILE *fp;
        char ch;

        if((fp = fopen(results[1],"r")) == NULL) {
            printf("Cannot open file.\n");
        } else {

        while((ch = fgetc( fp )) != EOF) {
            printf("%c", ch);
        }
        }
        fclose(fp); 
```

Results[1] 是文件的名称。所以如果我有类似“show file.txt”的东西，结果[0]将被显示，结果[1]文件.txt。

但是它不会在 fopen 上打开它。但是如果我插入代码`fopen("file.txt", "r")`......它可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:18:55.787

我最好的猜测是`results[1]`最后包含一个杂散的换行符。正如 Daniel 和 Jerry 所建议的，一个廉价的解决方法是包含`\n`在分隔符数组中。

* * *

不相关：的类型`ch`应该是`int`而不是`char`。

# javascript - 获取键为空字符串的对象属性的值

> ID：13848798
> 
> 赞同：5
> 
> 时间：2012-12-12T21:17:04.800
> 
> 标签：javascript, properties, javascript-objects

给定这个对象：

```
: http://www.w3.org/2005/Atom
gd: http://schemas.google.com/g/2005 
openSearch: http://a9.com/-/spec/opensearch/1.1/ 
app: http://www.w3.org/2007/app; 
media: http://search.yahoo.com/mrss/ 
```

我如何获得第一个财产的价值？我怀疑这是一个简单的过程，但我正在画一个空白。提前致谢。

该对象是这样构建的：

服务器端（php）：

```
$namespaces = $feedXML->getNamespaces(true);
$arr = array(
'Status' => 'Success',
'Message' => 'Feed fetched.',
'Namespaces' => $namespaces,
'Feed XML' => $feedXML
);
echo json_encode($arr); 
```

客户端（JS）：

```
 var output = '';
    for (property in dataj["Namespaces"]) {
        output += property + ': ' + dataj["Namespaces"][property] + '; ';
    }
    alert(output); 
```

我希望能够检查名称空间以查看这是 Atom 还是 RDF。

听起来只是迭代每个属性将是最好的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T21:17:35.550

如果您试图获取其键为空字符串的属性的值，那么您可以这样做

```
var value = myObject['']; 
```

如果您尝试获取对象的“第一个属性”，则不能，因为 javascript 对象中的属性没有排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:20:49.720

不保证订购房产。但是，您可以遍历所有属性以找到正确的属性（如果您知道要查找的内容）：

```
for(var prop in obj) {
    if(obj.hasOwnProperty(prop))
        doSomethingWith(obj[prop]);
} 
```

参考：[使用 Prototype 在 javascript 中迭代对象的每个属性？](https://stackoverflow.com/questions/587881/iterating-over-every-property-of-an-object-in-javascript-using-prototype)

然后通过

```
var value = obj[key]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:25:14.853

你可以试试这段代码：

```
var test_bject = {'test': 1, 'test2': 2, 'test3': 3}, first_value;

for (i in test) {
  first_value = test_object[i];
  break;
} 
```

# coldfusion - 是否有第三方控制面板来控制 ColdFusion 服务器的启动/停止？

> ID：13848806
> 
> 赞同：0
> 
> 时间：2012-12-12T21:17:28.843
> 
> 标签：coldfusion

我正在寻找一个可以控制 ColdFusion 服务器的启动/停止功能的简单控制面板。除了 adobe.com，我在哪里可以找到关于 CFM 的好教程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:37:00.020

windows、*nix 和 OSX 有命令行选项来启动和停止 ColdFusion。还有一些控件通过 Eclipse 内置到 CFBuilder 中。我什至发现了一个 Eclipse 插件，它可以将 Windows 服务面板加载到 Eclipse 中，因此您可以从一个面板启动和停止多个服务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T21:34:30.090

你说的控制是什么意思？我可能过于简化了您的问题，但是您可以通过`net stop "ColdFusion 9 application server"`在命令提示符中键入来停止 ColdFusion，并且可以通过键入来启动 ColdFusion`net start "ColdFusion 9 application server"`

您可以通过这些命令轻松地创建一个`.bat`文件来启动和停止您的 ColdFusion 服务器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T11:28:36.790

好的，在这里我找到了解决方案。您可以使用“记事本”创建一个 .bat 文件，然后使用任何好的 bat 2 exe 软件将其转换为 Windows 独立可执行文件。

从命令提示符启动和停止 ColdFusion 10 的命令是：

```
NET START "ColdFusion 10 Application Server" 

NET STOP "ColdFusion 10 Application Server" 
```

如果你不想要这些麻烦，那么你可以下载我制作的现成的 exe - 这是它的截图：

![](../Images/23ca2b58c20f78d23025794691bda021.png)

这是下载链接： [http ://www.ziddu.com/download/21101207/ColdFusion10ServerControlPanel.exe.html](http://www.ziddu.com/download/21101207/ColdFusion10ServerControlPanel.exe.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T16:27:43.440

Mac 有一个名为coldfusionLauncher.app 的程序，它是一个用于启动/停止ColdFusion 的简单实用程序。它应该位于 ColdFusion 主目录的根目录下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T21:36:15.247

我不知道它是否仍然如此，但我相信聚变反应堆有这种能力……我想。

[http://www.fusion-reactor.com/fr/](http://www.fusion-reactor.com/fr/)

# business-intelligence - Oracle 商业智能 (OBIEE) 分析中的数字格式

> ID：13848817
> 
> 赞同：0
> 
> 时间：2012-12-12T21:18:12.990
> 
> 标签：business-intelligence, number-formatting, obiee

如何在 Oracle 商业智能 (OBIEE) 分析中设置数字格式？我的意思是小数位和使用 1000 分隔符。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:17:14.793

在分析的标准选项卡中：

1.  单击事实列并选择“列属性”
2.  点击“数据格式”
3.  选中“覆盖默认数据格式”框
4.  指定小数位和 1000s 分隔符
5.  如果您希望将此格式应用于此事实列的所有出现（并假设您有权限），您可以通过单击“保存为默认值”将此格式保存为系统范围的默认值

# javascript - 如何将 HTML 字符串传递给 UIWebView、iOS 中的 javascript 函数

> ID：13848820
> 
> 赞同：1
> 
> 时间：2012-12-12T21:18:36.113
> 
> 标签：javascript, objective-c, ios, ios5, uiwebview

如何传递从目标 C 中的文件读取的 HTML 字符串标记并将其传递给带参数的 javascript 函数？

在我的 webViewDidFinishLoad 我尝试这样调用

```
NSString *jsfile = [[NSBundle mainBundle] pathForResource:@"setcontent" ofType:@"js"];
NSString *js = [NSString stringWithContentsOfFile:jsfile encoding:NSUTF8StringEncoding error:&errDes];
[webView stringByEvaluatingJavaScriptFromString:js];
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"showHtml('%@');", filecontent]]; 
```

我的 javascript 文件加载了一个函数

```
function showHtml(param1)
{
    alert(param1);
    document.getElementById('section1').innerHTML = param1;
} 
```

我用明确的字符串值测试了这段代码，例如`@"<p id=\"cid1\"> test </p>"`它通过设置元素内容来工作。如果我将其更改为`@"<p id='cid1'> test </p>"`ie 对 id 属性使用单引号，则它不起作用。为了让后者工作，我必须在目标 C 代码中将字符串格式化程序 '%@' 更改为 \"%@\" 。

上面的问题不是那么严重，但是当读取包含多个 html 标记的资源文件的内容时，这两种方法都不起作用，这些标记必须设置为 #section1 到 div 元素的 innerHTML。

我需要以某种方式对内容进行编码吗？在调用 stringByEvaluatingJavaScriptFromString 方法之前？谁能给我点我，我做错了什么？如果有人知道更好的方法，请写信。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:56:48.383

这里有一个长度限制，当您将整个文件传递给 js 时，您似乎会遇到它

# jquery - 在 jQuery 验证和 onSubmit 之后隐藏表单/显示 Div

> ID：13848821
> 
> 赞同：2
> 
> 时间：2012-12-12T21:18:43.770
> 
> 标签：jquery, validation, hide, show

我正在使用内联表单验证引擎 1.6.4，它工作正常，但我想隐藏表单并在验证和提交后显示包含消息的 div。

有没有一种简单的方法可以将类似以下代码的内容合并到 jquery.validationEngine.js 中，并且只有在成功验证和 onSubmit 后才会触发它？

```
function showHide(form) { 
    var serial = $(form).serialize();
    $.post(form.action, serial, function(){
        $('#formID').hide();
        $('#hidden_div').show();
    });
}; 
```

谢谢。

# ruby - Ruby中的结构与测试双重

> ID：13848822
> 
> 赞同：8
> 
> 时间：2012-12-12T21:18:44.333
> 
> 标签：ruby, rspec, mocking

在结构上使用 rspec 双倍的优点和缺点是什么？例如

```
before :each do
  location = double "locatoin"
  location.stub(:id => 1)
end 
```

对比

```
before :each do
  location = Struct.new("locatoin", :id)
  location.new.id = 1
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T06:31:31.383

**测试替身更容易设置**

```
Slip = Struct.new(:id)
slip = Slip.new(:id => 1) 
```

对比

```
slip = double('slip', :id => 1) 
```

**测试替身生成更多信息错误消息**

```
require 'spec_helper'

class TooLongError < StandardError; end

class Boat
  def moor(slip)
    slip.moor!(self)
  rescue TooLongError
    false
  end
end

describe Boat do
  let(:boat) { subject }

  context "when slip won't accept boat" do
    it "can't be moored" do
      Slip = Struct.new('Slip')
      slip = Slip.new
      boat.moor(slip).should be_false
    end
  end
end 
```

> ```
> Failure/Error: slip.moor!(self)
>  NoMethodError:
>    undefined method `moor!' for #<struct Struct::Slip > 
> ```

对比

```
it "can't be moored" do
  slip = double('slip')
  boat.moor(slip).should be_false
end 
```

> ```
> Failure/Error: slip.moor!(self)
>    Double "slip" received unexpected message :moor! with (#<Boat:0x106b90c60>) 
> ```

**测试替身对测试有更好的支持**

```
class Boat
  def moor(slip)
    slip.dont_care
    slip.moor!(self)
  rescue TooLongError
    false
  end
end

it "can't be moored" do
  Slip = Struct.new('Slip')
  slip = Slip.new
  slip.should_receive(:moor!).and_raise(TooLongError)
  boat.moor(slip).should be_false
end 
```

> ```
> Failure/Error: slip.dont_care
>  NoMethodError:
>    undefined method `dont_care' for #<struct Struct::Slip > 
> ```

对比

```
it "can't be moored" do
  slip = double('slip').as_null_object
  slip.should_receive(:moor!).and_raise(TooLongError)
  boat.moor(slip).should be_false
end 
```

> `0 failures # passed!`

这只是几个例子——我相信有更多的理由更喜欢测试双打。

# matlab - Matlab语法+包奇怪的错误

> ID：13848825
> 
> 赞同：1
> 
> 时间：2012-12-12T21:18:54.413
> 
> 标签：matlab

我对 matlab 有点困惑，对不起，我找不到更好的标题。

我有以下结构

```
testit.m
+package
   testfile.m 
```

testit.m 包含：

```
import package.testfile

testfile 
```

testfile.m 包含：

```
view = struct();
v = uiextras.Grid( 'Spacing', 5 );
view.view = v;
view.axes = axes( 'Parent', view.view ); 
```

如果我现在 cd 进入基本目录并键入`testit`，则会收到以下错误：

```
??? Error using ==> axes
Conversion to double from unknown is not possible.

Error in ==> testfile at 4
view.axes = axes( 'Parent', view.view );
Error in ==> testit at 3
testfile 
```

到目前为止，一切都很好。但是，如果我不将 testfile.m 放入包中并通过 testfile.m 直接调用它，一切正常。如果我将 testfile.m 的最后一行替换为

```
view.axes = axes( 'Parent', v ); 
```

这样我不使用结构访问网格，我得到错误：

```
??? No method 'onChildAddedEvent' with matching signature found for class 'uiextras.Grid'.

Error in ==> Container>@(varargin)obj.onChildAddedEvent(varargin{:}) at 95
            obj.Listeners{end+1,1} = handle.listener( containerObj, 'ObjectChildAdded', @obj.onChildAddedEvent );

Warning: Error occurred while evaluating listener callback. 
> In testfile at 4
  In testit at 3 
```

uiextras 来自[http://www.mathworks.com/matlabcentral/fileexchange/27758](http://www.mathworks.com/matlabcentral/fileexchange/27758)

为什么我是否将文件放入包中会有所不同？为什么我使用 v 或 view.view 会有所不同？我只是误解了matlab语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T15:01:59.460

这本身不是一个答案，但可能对像我这样结束这篇文章的其他人有用。Matlab File Exchange 上的一些文件本身包含一个版本和/或部分 GUI 布局工具箱 (+uiextras)。除了直接从文件交换中自己的条目下载的 GUI 布局工具箱 (+uiextras) 的“真实”实例之外，当您在路径中的这些其他文件交换下载之一中有一个 +uiextras 实例时，您可能会遇到问题.

在使用轴/按钮/uitables/etc 在 +uiextras 中填充标准布局时，我遇到了上述 Ferio 的此类错误：

```
Error in ==> Container>@(varargin)obj.onChildAddedEvent(varargin{:}) at 95
        obj.Listeners{end+1,1} = handle.listener( containerObj, 'ObjectChildAdded', @obj.onChildAddedEvent ); 
```

事实证明，在我不久前测试过但不再使用的随机文件交换下载中，我的路径中有另一个 +uiextras 实例。我删除了其他文件交换下载的整个文件夹（回想起来，从路径中删除可能就足够了），现在使用 GUI 布局工具箱可以正常工作。

您可以通过以下错误链接了解这是否与您遇到的问题相同。用 uiextras 做一些事情会导致错误。单击指向错误行号的链接（在本例中为第 95 行），它将打开发生错误的文件。对我来说，该文件位于此随机其他文件交换下载中的 DIFFERENT +uiextras 文件夹中。我删除了那个文件夹，这解决了我的问题。

# jquery - jQuery上传文件字段单击并提交擦除字段值

> ID：13848835
> 
> 赞同：1
> 
> 时间：2012-12-12T21:19:43.753
> 
> 标签：jquery, html

又一次 FF/Chrome/Safari 工作......但 IE 没有......令人沮丧但成为现实。

这是交易。我有一个漂亮的页面，其中有一个简单的文件字段在视觉上隐藏（不透明，不显示），这是我的工作流程：

*   用户点击漂亮的图形
*   我触发了文件字段的点击事件。
*   文件对话框打开
*   用户选择文件
*   然后用户点击一个漂亮的图形来提交表单
*   结束

在 IE 中，表单提交事件被触发后，该字段被神奇地清空并且提交事件未完成。就好像事件只是抹去了场，仅此而已！！！

这是JS代码：

```
$('#file_browse').bind('click', function() {
    $('#file_field').trigger('click');
});

$('#file_form #file_field').bind('change', function() {
    $('#file_submit').show();
});

$('#file_form #file_submit').bind('click', function() {
    $('#file_form').submit();
}); 
```

而已！html 有一个简单的文件字段。没什么特别的。我在输入字段上没有任何 css 进行了测试，它发生在我面前......该字段被清空。

任何人都知道为什么会发生这种情况？？？

# java - 基于字段值在 1 个查询中运行 2 个 mongodb 更新

> ID：13848836
> 
> 赞同：0
> 
> 时间：2012-12-12T21:19:45.717
> 
> 标签：java, mongodb, mongodb-query, mongodb-update

我需要更新 mongodb 中的记录，其中新值取决于记录中另一个字段的值。

例如给定以下集合

```
{id: 1, list: []}
{id: 2, list: [6]}
{id: 3, list: []}
{id: 4, list: [6]}
{id: 5, list: []} 
```

我想能够说：

```
if ('id' is in [1, 3, 5]) => add the value '6' to 'list'
else => remove the value '6' from 'list' 
```

结果将是：

```
{id: 1, list: [6]}
{id: 2, list: []}
{id: 3, list: [6]}
{id: 4, list: []}
{id: 5, list: [6]} 
```

这可以在 2 个更新查询中完成，如下所示，但我试图在 1 个中完成：

```
db.collection.update({$in: [1, 3, 5]}, {$addToSet: {list: 6}})
db.collection.update({$in: [2, 4]}, {$pull: {list: 6}}) 
```

代码是在 Java 中的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:06:32.673

MongoDB 目前还没有内部 case 语句，它允许您像 SQL 自己的`case`能力一样执行此操作。

因此，您需要分别执行每个操作，但是您可以将后一个查询更改为更符合以下要求：

```
db.collection.update({$nin: [1, 3, 5]}, {$pull: {list: 6}}) 
```

那应该可以`if`更好地完成您提供的陈述。

# javascript - Javascript在父关闭时重新建立窗口父/子关系

> ID：13848840
> 
> 赞同：1
> 
> 时间：2012-12-12T21:20:12.457
> 
> 标签：javascript

好的，这是场景。

我有一个打开一个新窗口的页面。然后它在这个新窗口中设置各种属性，例如父 url 和父窗口名称。

子窗口创建一个 javascript 计时器并每隔 x 秒回调父窗口。

父窗口关闭。

当子计时器过去时，我看到 window.opener 现在为空。

如何检查具有父 url 和父窗口名称的另一个窗口是否打开？然后，如果我找到匹配项，如何在不重新加载子窗口的情况下将此匹配窗口设置为孩子的父级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:05:23.040

我没有在所有主流浏览器中测试过这个。

```
// open the child window for first time
window.open('test.html','WindowName');
// re-assigns the reference for the same child window to a variable
WindowRef = window.open('','WindowName'); 
```

请注意，url 参数留空，弹出窗口名称相同。它引用同一个子窗口并将引用对象分配给变量“WindowRef”。

上述代码最好的部分是，无论父页面是否刷新，您都可以获取窗口的引用。

复制自： [http ://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/48485/parentchild-windows-references#post1323452](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/48485/parentchild-windows-references#post1323452)

# android - Meta width=device-width 在 Galaxy Nexus 上无法正常工作

> ID：13848846
> 
> 赞同：2
> 
> 时间：2012-12-12T21:20:37.457
> 
> 标签：android, web-applications, webview

我期望窗口的宽度与物理屏幕的宽度相同。

在我的 Galaxy Nexus 上，屏幕宽度为 720 像素，但窗口宽度为 360。

为什么？怎么了？页面完整代码：

```
<!DOCTYPE html>
<html>
<head> 
  <meta charset="UTF-8" />
  <title>My Page</title> 
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
  <script type="text/javascript">
    $(function() {
      windowWidth = $(window).width();
      windowHeight = $(window).height();

      alert("width: " + windowWidth + " height: " + windowHeight);
    });

</script>
</head>
<body id="bo">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:33:44.340

默认情况下，`WebView`Android 中的 将假定您的网页针对的是**中等密度设备**，因此，它会相应地进行缩放。

从[文档](http://developer.android.com/reference/android/webkit/WebView.html)中（请参阅标题为**构建网页以支持不同屏幕密度**的部分）：

> 默认情况下，WebView 会缩放网页，使其以与中等密度屏幕上的默认外观相匹配的大小绘制。因此，它在高密度屏幕上应用 1.5 倍缩放（因为它的像素更小）和在低密度屏幕上应用 0.75 倍缩放（因为它的像素更大）。从 API 级别 ECLAIR 开始，WebView 支持 DOM、CSS 和元标记功能，以帮助您（作为 Web 开发人员）定位具有不同屏幕密度的屏幕。

因此，由于 Galaxy Nexus 是一个`xhdpi`设备，`WebView`它将对您的内容应用 2 倍缩放，从而产生 360 的宽度。

您可以根据需要更改此设置，它需要`<meta>`在 HTML 中添加标签。例如，将以下内容添加到您的标记中应该会产生准确的宽度：

```
<meta name="viewport" content="target-densitydpi=device-dpi" /> 
```

但是，请注意，在这种情况下，您需要考虑密度。

# php - 使用 mixpanel API 和 PHP 查找用户特定数据

> ID：13848849
> 
> 赞同：1
> 
> 时间：2012-12-12T21:20:50.180
> 
> 标签：php, mixpanel

我想通过他们的 PHP API 在 Mixpanel 上获取特定用户的数据。例如，我想知道用户 X 做了多少次 AppLauch 事件？

```
$mp = new Mixpanel($api_key,$api_secret);

//Create single point array with API endpoint
$endpoint = array('segmentation');

//Create array of properties to send
$parameters = array(
'event' => 'AppLaunch', 
'user_id' =>'X',
'from_date' => '2012-12-10', 
'to_date' => '2012-12-12'
 );

 //Make the request

 $data = $mp->request($endpoint, $parameters);
 print_r($data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:47:16.333

~~查看当您单击用户时在“探索”页面上进行的查询。~~

 ~~```
$endpoint = array('stream', 'query');

$parameters = array(
    'distinct_ids' => json_encode(array('X')),
    'from_date' => '2012-12-10', 
    'to_date' => '2012-12-12'
); 
```~~  ~~编辑：流已经死了。~~

# java - 关于spring mvc error no class def found

> ID：13848850
> 
> 赞同：1
> 
> 时间：2012-12-12T21:20:51.117
> 
> 标签：java, spring, model-view-controller, spring-mvc

我收到 org/codehaus/jackson/map/objectmapper 的错误 NOClassDefFound ，我的 spring xml 文件如下

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="
     http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context-3.0.xsd
     http://www.springframework.org/schema/mvc
     http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
     ">
<mvc:annotation-driven />
<context:component-scan base-package="org.package.servletname" />

<bean
    class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="mediaTypes">
        <map>
            <entry key="atom" value="application/atom+xml" />
            <entry key="html" value="text/html" />
            <entry key="json" value="application/json" />
        </map>
    </property>
    <property name="viewResolvers">
        <list>
            <bean class="org.springframework.web.servlet.view.BeanNameViewResolver" />
            <bean
                class="org.springframework.web.servlet.view.InternalResourceViewResolver">
                <property name="prefix" value="/WEB-INF/jsp/" />
                <property name="suffix" value=".jsp" />
            </bean>
        </list>
    </property>
    <property name="defaultViews">
        <list>
            <bean
                class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
        </list>
    </property>
</bean>

<mvc:resources mapping="/css/**" location="/css/" />
<mvc:resources mapping="/img/**" location="/img/" />
<mvc:resources mapping="/js/**" location="/js/" />

</beans> 
```

我正在尝试用我的 spring 映射 json ，所以请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:49:09.000

该错误清楚地表明您的类路径中没有 Jackson JAR。您是否在类路径中添加了 Jackson JSON JAR 文件？

*   jackson-annotations-2.1.1.jar ([下载](http://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-annotations/2.1.1/jackson-annotations-2.1.1.jar))
*   jackson-core-2.1.1.jar ([下载](http://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.1.1/jackson-core-2.1.1.jar))
*   jackson-databind-2.1.1.jar [(下载)](http://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-databind/2.1.1/jackson-databind-2.1.1.jar)

# android - 我可以使用在 API 11 中添加并稍后使用但支持 API 8/10 设备的 Android 动画吗？

> ID：13848851
> 
> 赞同：0
> 
> 时间：2012-12-12T21:20:51.507
> 
> 标签：android, android-animation, backwards-compatibility

可能是一个愚蠢的问题，因为文档提到设备在运行时不支持的任何 API 使用都会引发异常，但我认为值得一试，这可能是一个解决方案。

我想针对 minSDK 8 说最新的 16。但是我看到动画在 11 之后有了显着改善。那么，我可以在我的项目中使用动画并在以前的 SDK 版本中运行吗？这将使应用程序崩溃，或者它可能会忽略而不做它应该做的事情。

我应该采取行动克服并说“运行这个原因设备支持它”吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:24:26.193

[http://nineoldandroids.com/](http://nineoldandroids.com/)是一个库，用于在回到 1.0 的所有平台版本上使用 Honeycomb (Android 3.0) 动画 API。我认为它应该可以解决你所有的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:27:10.193

您无法在使用 SDK 8 的设备中从 SDK 11 运行 api。但您可以使用以下命令分支代码：

```
if (Build.VERSION.SDK_INT >= 11) { do that.. } else { do that } 
```

SDK 11 中添加的动画可以替换为向后兼容的替代动画 API。您可以查看[Universal Tween Engine](http://www.aurelienribon.com/blog/projects/universal-tween-engine/)以获得一个非常简单且很好的替代方案。

# r - 如果 loess 方法返回错误，请使用 glm 方法

> ID：13848854
> 
> 赞同：1
> 
> 时间：2012-12-12T21:20:58.487
> 
> 标签：r, ggplot2

```
df

Date      Ovserv  Team
1/1/2012  10      USA
1/2/2012  30      USA
1/3/2012  28      USA
1/4/2012  79      USA
1/5/2012  24      USA
1/1/2012  45      Japan
1/2/2012  10      Japan
1/3/2012  56      Japan
1/4/2012  60      Japan
1/5/2012  67      Japan 
```

我真的很喜欢黄土，并且喜欢尽可能地使用它。我正在使用各种不同的数据框，我正在尝试使用 loess 方法来绘制图形。但是，由于一些不一致（某些数据帧没有足够的数据点），我收到此错误：

```
Error in predLoess(object$y, object$x, newx, object$s, object$weights, 
```

如果`method="glm"`使用“黄土”方法出现错误，是否可以使用`ggplot2`？

```
ggplot(df, (Date, Observ, group=Team, colour=Team)) + 
   geom_smooth(method="loess", se=T, size=1) 
```

任何想法我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T22:03:00.273

如果没有足够的黄土数据，该声明`class(try(loess(y~x, df)))=="try-error"`将给出。`TRUE`

你可以尝试一些类似的东西

```
ggplot(....) + geom_smooth(method=ifelse(class(try(loess(y~x, df)))=="try-error",
                                          "glm","loess")....) 
```

如果您不想看到错误消息，请添加`silent=TRUE`到参数中。`try`

# php - mysql：从 DESC LIMIT 中选择最后 10 行

> ID：13848857
> 
> 赞同：2
> 
> 时间：2012-12-12T21:21:03.007
> 
> 标签：php, mysql

我正在开发一个显示最后 10 个帖子的块，当用户单击“加载更多”按钮时，我想显示 10 个较旧的帖子。

如果我已经在使用 DESC LIMIT，如何选择最后 10 行？

```
mysql_query("SELECT title,id,alt_name FROM dle_post WHERE approve='1' AND date >= '$monthagodate'
AND date < '$curdate' + INTERVAL 1 day ORDER BY date DESC LIMIT $more;"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:24:51.230

您只使用一个参数进行限制。但是您可以`LIMIT x,y`同时指定`x`（要返回的第一条记录的位置）和`y`（要返回的记录数）。

将变量传递给页面，例如`results.php?start=x`设置起始位置。

```
if (!isset( $_REQUEST['start'] ) ) { $start = 0; } else { $start = (int)$_REQUEST['start']; }

mysql_query("SELECT title,id,alt_name FROM dle_post WHERE approve='1' AND date >= '$monthagodate'
AND date < '$curdate' + INTERVAL 1 day ORDER BY date DESC LIMIT $start,10;"); 
```

然后你可以生成一个指向下一页的链接，如下所示：

`echo '<a href="results.php?start=' . ($_REQUEST['start']+10) . '">Next 10 results</a>';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:25:26.760

您应该添加另一个参数`$start`并使用以下查询

```
mysql_query("SELECT title,id,alt_name FROM dle_post WHERE approve='1' AND date >= '$monthagodate' AND date < '$curdate' + INTERVAL 1 day ORDER BY date DESC LIMIT $start, $more;"); 
```

这里`$start`用于 tel`MySQL`要获取的记录的起点。

# jquery - 从加载的 Ajax 中删除 DOM 元素

> ID：13848859
> 
> 赞同：0
> 
> 时间：2012-12-12T21:21:04.953
> 
> 标签：jquery, html, ajax

我正在尝试从 DOM 中删除所有 img 标签以及每个标签后面的元素。问题是我的内容都是通过 jQuery ajax 加载的，因此通过执行 $('img').remove(); 内容尚未加载，因此没有要删除的图像。有什么建议么？

```
$.ajax({
    url: entry.link,
    dataType: "html",
    success: function(response) {
        $('#entriesHtml').append("<h3><a href='#'>" + entry.title + "</a></h3>" + "<div>" + $(response).find(".ui-widget-detail").html() + "</div>");       
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:22:39.377

您可以使用 渲染 html `display:none`，删除 img 标签，然后`show()`是 html。

# sharepoint - 数百万个项目的共享点列表

> ID：13848863
> 
> 赞同：2
> 
> 时间：2012-12-12T21:21:43.063
> 
> 标签：sharepoint

我必须创建一个帮助票证系统，并且正在寻找输入来决定 Sharepoint List Vs Custom DB

我们必须在系统中保留 200 万张票。

我们需要根据日期范围和其他标准提供有关门票的报告

我们需要提供基于日期范围的搜索。

鉴于数据量大，Sharepoint 列表是正确的选择吗？

有没有人在共享点列表中处理过数百万条记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:29:44.903

如果您预先知道将有 200 万张门票，请选择自定义数据库。工单将与其他（业务）实体有关系。您将需要连接和复杂的查询。仅将 SharePoint 用于文档和简单列表，SharePoint 不是数据库。

我在 SharePoint 2010 上的项目有经验，在该项目中，我们一开始就过于信任 SP 列表（10000 个项目）。数据最终出现在自定义数据库中。

看[这里](http://chriswoodill.blogspot.com/2009/05/sharepoint-is-not-database.html)和[这里](http://msdn.microsoft.com/en-us/library/ff798319.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:40:18.403

这取决于您要使用的 SharePoint 版本。

**共享点 2007**

根据[此文档](http://technet.microsoft.com/en-us/library/cc287790.aspx)，单个视图中不应包含超过**2000个项目：**

> 测试表明列表视图性能下降超过 2000 个条目。

因此，从技术上讲，您可以在那里拥有更多项目，但是，您应该会遇到一些性能问题。

该限制适用于视图，因此您可能可以在列表中包含更多项目并保持可接受的性能，只要您将它们适当地分组到视图中。

这里也回答了一个类似的问题（针对 SharePoint 2003 和 SharePoint 2007），提供了更多有用的信息：[SharePoint List Scalability](https://stackoverflow.com/questions/34728/sharepoint-list-scalability)。

**SharePoint 2010（和 SharePoint 2013）**

对于 SharePoint 2010（和 SharePoint 2013），列表中的项目总数限制为**30 000 000**（尽管可能因具体情况而异）。

另请查看这些文件中提到的其他限制和限制。

列出各种 SharePoint 版本限制的文档：

*   SharePoint 2003：[http ://technet.microsoft.com/en-us/library/cc287743.aspx](http://technet.microsoft.com/en-us/library/cc287743.aspx)
*   SharePoint 2007：[http ://technet.microsoft.com/en-us/library/cc287790.aspx#section3](http://technet.microsoft.com/en-us/library/cc287790.aspx#section3)
*   SharePoint 2010：[http ://technet.microsoft.com/library/cc262787%28Office.14%29.aspx#ListLibrary](http://technet.microsoft.com/library/cc262787%28Office.14%29.aspx#ListLibrary)
*   SharePoint 2013：[http ://technet.microsoft.com/en-us/library/cc262787.aspx#ListLibrary](http://technet.microsoft.com/en-us/library/cc262787.aspx#ListLibrary)

# wpf - XAML 样式绑定

> ID：13848864
> 
> 赞同：0
> 
> 时间：2012-12-12T21:21:50.740
> 
> 标签：wpf, xaml, binding, .net-4.5

我有一个按钮，并且在名为 BooleanSwitch 的视图模型中有一个布尔属性。

我希望按钮的文本和前景色是：

*   绿色 ON，当 BooleanSwitch 为真时
*   红色关闭，当 BooleanSwitch 为假时

我希望它在值变化时动态变化。

当然，我可以在代码隐藏中做到这一点。但是有没有一个 XAML 解决方案呢？我尝试了以下方法：

```
<Style x:Key="SwitchButtonStyle" TargetType="Button">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=BooleanSwitch}" Value="true">
            <Setter Property="Foreground" Value="Red"/>
            <Setter Property="Content" Value="ON"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=BooleanSwitch}" Value="false">
            <Setter Property="Foreground" Value="#00AA00" />
            <Setter Property="Content" Value="OFF"/>
        </DataTrigger>
    </Style.Triggers>
</Style>

<Button Click="button_Click" Style="{DynamicResource SwitchButtonStyle}" /> 
```

而点击方法只是：

```
private void button_Click(object sender, RoutedEventArgs e)
{
    BooleanSwitch = !BooleanSwitch;
} 
```

BooleanSwitch 的代码再简单不过了（.NET 4.5）：

```
 private bool privateBooleanSwitch;
    public bool BooleanSwitch
    {
        get { return privateBooleanSwitch; }
        set
        {
            if (value == privateBooleanSwitch)
                return;

            privateBooleanSwitch= value;
            OnPropertyChanged();
        }
    } 
```

加载后，触发器激活并且按钮为红色，但当我单击按钮时，它们不再工作......我可以看到我可能不太了解 DataTriggers 的工作原理。

我究竟做错了什么？

该按钮是一个单一用途的按钮，但我已经发现我不能在特定元素内使用 DataTrigger。我正在考虑创建另一个包含文本和颜色的属性，然后将它们绑定到按钮属性，但这在我看来只是不必要的代码定制，我宁愿使用 XAML 来定义颜色和文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:30:09.183

我。

哑的。

你猜怎么了。

```
public abstract class ViewModelBase
{
    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged([CallerMemberName] string propertyName = "")
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

我实际上实现了接口**INotifyPropertyChanged**但忘记在类定义中提及它。

```
public abstract class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged([CallerMemberName] string propertyName = "")
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

我没有在这里寻找错误，而是确定我对 WPF 触发器的理解一定存在错误。感谢LPL。

# sql - 选择时的字符掩码输出数据

> ID：13848872
> 
> 赞同：12
> 
> 时间：2012-12-12T21:22:12.387
> 
> 标签：sql, sql-server, sql-server-2008, tsql, data-masking

我正在使用 SQL Server 2008。

我想对查询的输出数据进行字符屏蔽。

这是我在进行选择时来自表格列的数据：

```
column1

384844033434

743423547878

111224678885 
```

我想要这样的输出：

```
column1

384xxxxxx434

743xxxxxx878

111xxxxxx885 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T21:45:13.130

您将不得不使用视图，并拒绝所有用户对基础表的 SELECT 访问。

您的视图看起来像

```
SELECT 
     SUBSTRING(x.SecurityNumber,1,3) + 
     'xxxxx' + 
     SUBSTRING(x.SecurityNumber,LEN(x.SecurityNumber) - 2, LEN(x.SecurityNumber))
     AS column1
FROM underlyingTable x 
```

然后，您可以授予您的用户 SELECT 访问此视图的权限，并按照您描述的方式屏蔽输出。

如果您希望您的客户端软件能够在此表中插入或更新数据，您将使用 INSTEAD OF INSERT 或 INSTEAD OF UPDATE 触发器来更新基表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-05T16:46:26.887

`SQL Server 2016+`您可以使用**[动态数据屏蔽](https://msdn.microsoft.com/en-us/library/mt130841.aspx)**功能。

> **动态数据屏蔽通过将敏感数据屏蔽给非特权用户来限制敏感数据的暴露。**动态数据屏蔽通过使客户能够指定要显示多少敏感数据而对应用程序层的影响最小，从而有助于防止对敏感数据的未经授权的访问。它是一种数据保护功能，可以在指定数据库字段的查询结果集中隐藏敏感数据，而数据库中的数据不会更改。动态数据屏蔽很容易与现有应用程序一起使用，因为屏蔽规则应用于查询结果。**许多应用程序可以在不修改现有查询的情况下屏蔽敏感数据。**

```
CREATE TABLE #tab(ID INT IDENTITY(1,1), column1 VARCHAR(12));

INSERT INTO #tab(column1)
VALUES('384844033434'),('743423547878'),('111224678885');

SELECT * FROM #tab; 
```

输出：

```
╔════╦══════════════╗
║ ID ║   column1    ║
╠════╬══════════════╣
║  1 ║ 384844033434 ║
║  2 ║ 743423547878 ║
║  3 ║ 111224678885 ║
╚════╩══════════════╝

ALTER TABLE #tab
ALTER COLUMN column1 VARCHAR(12) MASKED WITH (FUNCTION = 'partial(3,"xxxxxx",3)');

SELECT * FROM #tab; 
```

输出：

```
╔════╦══════════════╗
║ ID ║   column1    ║
╠════╬══════════════╣
║  1 ║ 384xxxxxx434 ║
║  2 ║ 743xxxxxx878 ║
║  3 ║ 111xxxxxx885 ║
╚════╩══════════════╝ 
```

`**[`LiveDemo`](https://data.stackexchange.com/stackoverflow/query/482935#resultSets)**`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T22:01:39.327

如果您知道您的数据字段将有多长，那么您可以使用另一个答案将产生的静态版本，但您始终可以创建一个函数来生成它：

```
CREATE FUNCTION MixUpCharacters
(
    @OrigVal varchar(max)
)
RETURNS varchar(max)
AS
BEGIN

DECLARE @NewVal varchar(max)
DECLARE @OrigLen int
DECLARE @LoopCt int
DECLARE @Part varchar(max) = ''
Declare @PartLength int

SET @NewVal = ''
SET @OrigLen = DATALENGTH(@OrigVal)
SET @LoopCt = 1

SET @Part = SUBSTRING(@OrigVal, 4, len(@OrigVal)-6)
set @PartLength = LEN(@Part)

WHILE @LoopCt <= @PartLength
    BEGIN
        -- Current length of possible characters
        SET @NewVal = @NewVal + 'X'

        -- Advance the loop
        SET @LoopCt = @LoopCt + 1
    END

    Return REPLACE(@OrigVal, @Part, @NewVal)
END 
```

对于此函数，您将传入要屏蔽的值。所以你的查询是：

```
declare @temp table
(
    col1 varchar(50)
)

insert into @temp
values ('384844033434'), ('743423547878'), ('111224678885')

select dbo.MixUpCharacters(col1) col1
from @temp 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a197c/3)

结果将是：

```
|         COL1 |
----------------
| 384XXXXXX434 |
| 743XXXXXX878 |
| 111XXXXXX885 | 
```

或者这是一种使用递归 CTE 的方法：

```
;with data(col1) as
(
    select '384844033434'
    union all
    select '7434235878'
    union all
    select '111224678885'
),
s1 (col1,  repfull) as
(
    select col1, 
        SUBSTRING(col1, 4, len(col1)-6) repfull
    from data
),
s2 (col1, item, repfull, r) as
(
    select col1,
        cast('x' as varchar(max)),
        right(repfull, LEN(repfull)-1),
        repfull
    from s1
    union all
    select col1,  
        'x'+ cast(item as varchar(max)),
        right(repfull, LEN(repfull)-1),
        r
    from s2
    where len(repfull) >0
)
select REPLACE(col1, r, item) newValue
from
(
    select col1, item, R,
        ROW_NUMBER() over(partition by col1 order by len(item) desc) rn
    from s2
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/7061)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T21:40:15.397

一个简单的选择查询将只返回它在表上的内容，无论它是否加密。

所以，我认为你不能在数据库级别上做到这一点。

根据您的要求，您需要在应用程序中使用双向加密算法，因此您可以在将数据加密保存在数据库中之前对其进行加密，并从数据库中获取加密信息并在您的应用程序中对其进行解密。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-17T06:37:28.223

很简单的兄弟

```
SELECT CONCAT (SUBSTR('Your string',1,3),LPAD(SUBSTR('Your string',-3),LENGTH('Your string')-1,'*')) RESULT FROM dual 
```

输出 ：

> 你***

如果是`num`类型转换为`char`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-13T09:04:45.480

如果你想屏蔽你不知道字段长度的字段。您可以像这样升级 bluefeet 的代码：

```
ALTER FUNCTION MixUpCharacters
(
    @OrigVal varchar(MAX)
)
RETURNS varchar(MAX)
AS
BEGIN

DECLARE @NewVal NVARCHAR(MAX)
DECLARE @OrigLen INT
DECLARE @LoopCt INT
DECLARE @Part NVARCHAR(MAX) = ''
DECLARE @PartLength INT     -- MastLength
DECLARE @PartStartIndex INT -- MaskStartIndex

SET @NewVal = ''
SET @LoopCt = 1
SET @OrigLen = LEN(@OrigVal)

IF(@OrigLen = 1)
    BEGIN
        RETURN 'X'
    END
IF(@OrigLen < 6)
    BEGIN
        SET @PartStartIndex = @OrigLen / 2
        SET @PartLength = @OrigLen - @PartStartIndex
        SET @Part = SUBSTRING(@OrigVal, @PartStartIndex,  @PartLength)
    END
ELSE IF(@OrigLen < 8)
    BEGIN
        SET @PartStartIndex = 3
        SET @PartLength = @OrigLen - @PartStartIndex - 1
        SET @Part = SUBSTRING(@OrigVal, @PartStartIndex,  @PartLength)
    END
ELSE
    BEGIN
        SET @PartStartIndex = 4
        SET @PartLength = @OrigLen - @PartStartIndex - 2
        SET @Part = SUBSTRING(@OrigVal, @PartStartIndex,  @PartLength)
    END

WHILE @LoopCt <= @PartLength
    BEGIN
        -- Current length of possible characters
        SET @NewVal = @NewVal + 'X'

        -- Advance the loop
        SET @LoopCt = @LoopCt + 1
    END

    RETURN REPLACE(@OrigVal, @Part, @NewVal)
END 
```

你可以这样测试：

```
SELECT dbo.MixUpCharacters('1')
UNION ALL
SELECT dbo.MixUpCharacters('12')
UNION ALL
SELECT dbo.MixUpCharacters('123')
UNION ALL
SELECT dbo.MixUpCharacters('1234')
UNION ALL
SELECT dbo.MixUpCharacters('12345')
UNION ALL
SELECT dbo.MixUpCharacters('123456')
UNION ALL
SELECT dbo.MixUpCharacters('1234567')
UNION ALL
SELECT dbo.MixUpCharacters('12345678')
UNION ALL
SELECT dbo.MixUpCharacters('123456789')
UNION ALL
select dbo.MixUpCharacters('1234567890')
UNION ALL
select dbo.MixUpCharacters('12345678910') 
```

结果：

```
X
X2
XX3
1XX4
1XXX5
12XX56
12XXX67
123XX678
123XXX789
123XXXX890
123XXXXX910 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-17T05:29:04.103

这也适用于检索时屏蔽输出。

```
SELECT CONCAT(SUBSTRING(column1, 1, 3),'xxxxxx',SUBSTRING(column1, 10, 3)) FROM tableName; 
```

如果值长度不固定，可以使用下面的。

```
SELECT CONCAT(SUBSTRING(column1, 1, 3),'xxxxxx',SUBSTRING(column1, LEN(column1)-2, 3)) FROM tableName; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-21T05:44:16.673

```
concat('XXXXXXXXX',right(aadharno,4)) as aadharno 
```

它将掩盖 aadhar 号码，从右数第四个。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-21T06:26:25.083

```
concat('XXXXXXXXX',right(aadharno,4)) as aadharno 
```

它将掩盖 aadhar 号码。
输出将如下所示： `XXXXXXXXX7995`

# xslt - 将 xml 文件转换为纯文本格式

> ID：13848875
> 
> 赞同：3
> 
> 时间：2012-12-12T21:22:23.247
> 
> 标签：xslt

我有一个如下的 xml 文件，我想将其转换为纯文本文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<abc xmlns="ddn:cns-org:v5">
    <section>
        <title>PREORDER</title>
        <code code="0" cs="12.222" csn="CSN" />
        <text>
            <paragraph>
                <content>preorder.</content>
                <content></content>
            </paragraph>
            <paragraph>
                <content>preorder description.</content>
                <content>preorder detail goes here.</content>
            </paragraph>
        </text>
    </section>
    <section>
        <title>POSTORDER</title>
        <code code="0" cs="12.222" csn="CSN" />
        <text>
            <paragraph>
                <content>postorder.</content>
            </paragraph>
        </text>
    </section>
</abc> 
```

我想要这样的输出：

```
PREORDER
(ignore the line of <code .../>
pre-order.
(Note: if there is no content - <content></content>, don't record anything)
preorder description.
preorder detail goes here.

POSTORDER
post-order. 
```

我试图使用 xsl 转换，但我不太了解路径/节点。我得到了类似以下的东西，显然它没有用。请帮忙。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    abc xmlns="ddn:cns-org:v5">
    <xsl:output method="text" omit-xml-declaration="yes"/>

    <!-- ***********************************************************
        Call template process section 
         ************************************************************-->
    <xsl:template match="/">
      <!--  <xsl:for-each select="abc"> -->
       <xsl:for-each select="section">
            <xsl:call-template name="process_section"> </xsl:call-template>
       </xsl:for-each>
      <!--  </xsl:for-each> -->
    </xsl:template>

     <xsl:template name="process_section">
        <!-- Choose : Section or Subsection  -->
        <xsl:choose>

            <!-- ***********************************************************************************
                (if section: 
                *check if not empty title  
                * Bring to upper case
                * check if already one colon, don't put any more
                * put newline 
            ******************************************************************************************-->
            <xsl:when test=" local-name(.)='abc' ">
                <xsl:if test="not(string-length(normalize-space(./section/title))=0)">
                    <xsl:variable name="title" select="string(./section/title)"/>
                    <xsl:value-of
                        select="translate($title, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')"/>
                    <xsl:if test="not( substring($title, string-length($title),1)=':' )">
                        <xsl:text>:</xsl:text>
                    </xsl:if>
                    <xsl:text>&#xa;</xsl:text>
                </xsl:if>
            </xsl:when>

            ... 
```

谢谢，戴夫

* * *

现在我需要将 xml 文件转换为格式正确的文本文件。给定源 xml 文件为：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <abc xmlns="ddn:cns-org:v5">
        <section>
            <title>PREOPERATIVE DIAGNOSIS  </title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph>
                    <content>__ c</content>
                    <content>ataract.</content>
                </paragraph>
            </text>
        </section>
        <section>
            <title>POSTOPERATIVE DIAGNOSIS</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph>
                    <content>__ c</content>
                    <content>ataract.</content>
                </paragraph>
            </text>
        </section>
        <section>
            <title>OPERATION</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph>
                    <content>Pars plana vitrectomy
                        and epiretinal membrane removal. Phacoemulsification with posterior
                        chamber lens implant __(Control #</content>
                    <content>__</content>
                    <content>) </content>
                </paragraph>
            </text>
        </section>
        <section>
            <title>SURGEON</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph>
                    <content>Dr. J. R. xxx
                    </content>
                </paragraph>
            </text>
        </section>
        <section>
            <title>DOCTORS IN ATTENDANCE</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph />
            </text>
        </section>
        <section>
            <title>ANESTHETIST</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph />
            </text>
        </section>
        <section>
            <title>ANESTHESIA</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph />
            </text>
        </section>
        <section>
            <title>CLINICAL NOTE</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph />
            </text>
        </section>
        <section>
            <title>OPERATIVE PROCEDURE</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph>
                    <content>Topical sterilization,
                        anesthesia and dilatation were carried out in the Day Surgery Unit
                        before the patient was brought to the Operating room. </content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>The patient was
                        prepared with Proviodine. The patient was then draped. Special
                        attention was directed to the eyelids/lashes, prepping and draping.
                        A speculum was inserted into the fornices of the</content>
                    <content> __</content>
                    <content> eye. Subconjunctival
                        Xylocaine was given. A small conjunctival peritomy was made in the
                        area of the subconjunctival injection. Three cc of 2% Xylocaine and
                        0.75% Marcaine were injected into the sub-Tenon's space through the
                        peritomy.  </content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>A paracentesis was
                        performed superiorly and inferiorly. Intraocular nonpreserved
                        Xylocaine was used. A viscoelastic was injected into the anterior
                        chamber. The eye was entered with a 3 mm keratome. The anterior
                        capsulectomy was done under a viscoelastic. Hydrodissection and
                        delineation of the nucleus was carried out. The
                        phaco-emulsification was initiated. The phacoemulsification time
                        was </content>
                    <content>__</content>
                    <content> seconds. At the
                        completion of the phacoemulsification, the cortical material was
                        irrigated and aspirated from the eye. The posterior capsule was
                        polished. The intraocular lens was inserted under a viscoelastic.
                        The intraocular lens power was __ diopters.   </content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>The lens was the dialed
                        into position with the lens pick. Irrigation and aspiration of the
                        viscoelastic was then carried out. The wound was tested to ensure
                        that there was no wound leak.  </content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>Additional periglobal
                        anesthesia of 2% Xylocaine and 0.75% Marcaine was injected into the
                        sub-Tenon's space through the peritomy. </content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>The 25-gauge cannulas
                        were then placed inferotemporal, supratemporal and supranasally. In
                        the infratemporal cannula an infusion placed.  </content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>A vitrectomy was then
                        carried out.  </content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>__ (Dr. xxx will
                        refer to this area as an "open paragraph</content>
                    <content>"</content>
                    <content>- DELETE THIS
                        INFORMATION</content>
                    <content>)</content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>At the completion of
                        the vitrectomy, the peripheral retina was reinspected to ensure
                        there was no untreated peripheral retinal tears or detachment. The
                        cannulas were removed. The scleral wounds inspected and if a wound
                        leak was identified, then this was closed with 9-0 Vicryl suture.
                        Otherwise interrupted 9-0 Vicryl sutures were placed.
                        Subconjunctival Decadron and cefuroxime were given.  </content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>A patch and shield
                        applied.    </content>
                </paragraph>
                <paragraph />
                <paragraph>
                    <content>The patient left the
                        Operating Room in satisfactory condition.  </content>
                </paragraph>
            </text>
        </section>
        <section>
            <title>ADDENDUM</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph />
            </text>
        </section>
        <section>
            <title>POSTOPERATIVE TOPICAL EYE DROPS</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph>
                    <content>1\. Maxidex.</content>
                </paragraph>
                <paragraph>
                    <content>2\. Nevanac.</content>
                </paragraph>
                <paragraph>
                    <content>3\. Vigamox.</content>
                </paragraph>
            </text>
        </section>
        <section>
            <title>POSTOPERATIVE FOLLOWUP</title>
            <code code="0" cs="12.222" csn="CSN" />
            <text>
                <paragraph>
                    <content>__</content>
                </paragraph>
            </text>
        </section>
    </abc> 
```

我希望得到如下输出。

```
PREOPERATIVE DIAGNOSIS:

__ cataract.

POSTOPERATIVE DIAGNOSIS:

__ cataract.

OPERATION:

Pars plana vitrectomy and epiretinal membrane removal.  Phacoemulsification with posterior chamber lens implant __(Control #__) 

SURGEON:

Dr. J. R. xxx 

DOCTORS IN ATTENDANCE:

ANESTHETIST:

ANESTHESIA:

CLINICAL NOTE:

OPERATIVE PROCEDURE:

Topical sterilization, anesthesia and dilatation were carried out in the Day Surgery Unit before the patient was brought to the Operating room. 

The patient was prepared with Proviodine.  The patient was then draped. Special attention was directed to the eyelids/lashes, prepping and draping.   A speculum was inserted into the fornices of the __ eye.  Subconjunctival Xylocaine was given.  A small conjunctival peritomy was made in the area of the subconjunctival injection.  Three cc of 2% Xylocaine and 0.75% Marcaine were injected into the sub-Tenon's space through the peritomy.  

A paracentesis was performed superiorly and inferiorly. Intraocular nonpreserved Xylocaine was used. A viscoelastic was injected into the anterior chamber.  The eye was entered with a 3 mm keratome.  The anterior capsulectomy was done under a viscoelastic. Hydrodissection and delineation of the nucleus was carried out.  The phaco-emulsification was initiated.  The phacoemulsification time was __ seconds.  At the completion of the phacoemulsification, the cortical material was irrigated and aspirated from the eye.  The posterior capsule was polished.  The intraocular lens was inserted under a viscoelastic.  The intraocular lens power was __  diopters.   

The lens was the dialed into position with the lens pick.  Irrigation and aspiration of the viscoelastic was then carried out.  The wound was tested to ensure that there was no wound leak.  

Additional periglobal anesthesia of 2% Xylocaine and 0.75% Marcaine was injected into the sub-Tenon's space through the peritomy. 

The 25-gauge cannulas were then placed inferotemporal, supratemporal and supranasally.  In the infratemporal cannula an infusion placed.  

A vitrectomy was then carried out.  

__ (Dr. xxx will refer to this area as an "open paragraph"- DELETE THIS INFORMATION)

At the completion of the vitrectomy, the peripheral retina was reinspected to ensure there was no untreated peripheral retinal tears or detachment.  The cannulas were removed.  The scleral wounds inspected and if a wound leak was identified, then this was closed with 9-0 Vicryl suture.   Otherwise interrupted 9-0 Vicryl sutures were placed.  Subconjunctival Decadron and cefuroxime were given.  

A patch and shield applied.    

The patient left the Operating Room in satisfactory condition.  

ADDENDUM:

POSTOPERATIVE TOPICAL EYE DROPS:

1\.  Maxidex.
2\.  Nevanac.
3\.  Vigamox.

POSTOPERATIVE FOLLOWUP:
__ 
```

变换规则如下：

部分应由一个新的空行分隔。

部分标题应全部为大写字母，后跟冒号 (:)，并应进行修剪。

每个标题都应该用新的空行分隔（之前和之后）。

每个段落都应该用新的空行分隔（之前和之后）。

一个段落内的所有内容应合并为单行。

我在项目中发现了一些我想重用的类似代码。但是，我很难弄清楚 xPath func/variables。我真的很想将它与 Mads 提供的代码结合起来。但我失败了。

这是我打算运行的代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:d="ddn:cns-org:v5">
    <xsl:output method="text" omit-xml-declaration="yes"/>

    <!-- ***********************************************************
        Call template process section 
         ************************************************************-->
    <xsl:template match="/">
      <xsl:for-each select="d:abc/d:section">  <!-- Is it OK?-->    
            <xsl:call-template name="process_section"> </xsl:call-template>      
      </xsl:for-each>
    </xsl:template>

     <xsl:template name="process_section">

                <xsl:if test="not(string-length(normalize-space(./section/title))=0)">
                    <xsl:variable name="title" select="string(./section/title)"/>
                    <xsl:value-of
                        select="translate($title, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')"/>
                    <xsl:if test="not( substring($title, string-length($title),1)=':' )">
                        <xsl:text>:</xsl:text>
                    </xsl:if>
                    <xsl:text>&#xa;</xsl:text>
                </xsl:if>

                <xsl:if test="not(string-length(normalize-space(./section/title))=0)">
                    <xsl:variable name="title" select="string(./section/title)"/>
                    <xsl:call-template name="TitleCase">
                        <!-- <xsl:with-param name="text" select="./section/title"/> -->
                        <xsl:with-param name="title" select="$title"/>
                        <xsl:with-param name="start" select="true()"/>
                    </xsl:call-template>
                    <xsl:if test="not( substring($title, string-length($title),1)=':' )">
                        <xsl:text>:</xsl:text>
                    </xsl:if>
                    <xsl:text>&#xa;</xsl:text>
                </xsl:if>

        <!-- *****************************************************************************************
          Start processing Text .Paragraph/list under section/text. 
        ****************************************************************************************************-->
        <xsl:for-each select="./section/text/node()">
            <xsl:choose>
                <!-- ************************************************************************************
                    if a node under text is a paragraph
                    *Replace single ':' (no caret / no digit in front) with caret followed by colon '^:'
                    *Also, do not put newline if there is nothing withing paragraph
                    *(level section/text/paragraph or node())
                ******************************************************************************************-->
                <xsl:when test="local-name()='paragraph'">

                    <xsl:for-each
                        select="./content[not(@styleCode='hidden' or @styleCode='bookmark')]">

                        <xsl:choose>

                            <xsl:when test="contains(., ':')">
                                <xsl:call-template name="replaceColon">
                                    <xsl:with-param name="text" select="."/>
                                </xsl:call-template>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="."/>
                            </xsl:otherwise>

                        </xsl:choose>
                    </xsl:for-each>

                    <xsl:if
                        test="(count(./content[not(@styleCode='hidden' or @styleCode='bookmark')]) &gt; 0) or (count(./content)=0)">
                        <xsl:text>&#xa;</xsl:text>
                    </xsl:if>
                </xsl:when>

                <!-- otherwise it has to be list -->
                <xsl:when test="local-name()='list'">
                    <xsl:call-template name="listProcessing"> </xsl:call-template>
                </xsl:when>
            </xsl:choose>

        </xsl:for-each>
        <!-- ********************************************************************
            Done w/ Text (paragraph/list) done. Go back to (level component) 
        **************************************************************************-->

        <xsl:if
            test="string-length(normalize-space(.//content[not(@styleCode='hidden' or @styleCode='bookmark')]/text())) &gt; 0">
            <xsl:text>&#xa;</xsl:text>
        </xsl:if>

        <!-- Subsection. (Level component)  -->
        <xsl:for-each select="./section/component">
            <xsl:if test="not(./section/code/@code='9001')">
                <xsl:call-template name="process_section"/>
            </xsl:if>
        </xsl:for-each>

        <!-- ******************************************
            end of processing component
            *******************************************-->
    </xsl:template>

    <xsl:template name="replaceColon">
        <xsl:param name="text"/>
        <xsl:variable name="before" select="substring-before($text,':')"/>
        <xsl:variable name="after" select="substring-after($text,':')"/>
        <xsl:choose>
            <xsl:when test="contains($before, ':')">
                <xsl:call-template name="replaceColon">
                    <xsl:with-param name="text" select="$before"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:choose>
                    <xsl:when
                        test="string (number(substring($before,string-length($before),1))) != 'NaN'
                        or string (substring($before,string-length($before),1)) = '^'">
                        <xsl:value-of select="$before"/>
                        <xsl:text>:</xsl:text>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="$before"/>
                        <xsl:text>^:</xsl:text>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:otherwise>
        </xsl:choose>

        <xsl:choose>
            <xsl:when test="contains($after, ':')">
                <xsl:call-template name="replaceColon">
                    <xsl:with-param name="text" select="$after"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$after"/>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <!-- *********************************************************
        Begining listProcessing. (Level ./section/text/list)
        *********************************************************** -->
    <xsl:template name="listProcessing">

        <!-- ***iterate each item under list (Level ./section/text/list/item)********* -->
        <xsl:for-each select="./item">
            <xsl:value-of select="position()"/>
            <xsl:value-of select="'. '"/>

            <!-- Checking node under item. (Level ./section/text/list/item/node()) -->
            <xsl:for-each select="./node()">
                <xsl:choose>
                    <!-- ******************************
                        Make sure the paragraph has content, otherwise don't print it or the newline. (CP-5076)
                        ******************************** -->
                    <xsl:when test="local-name(.)='paragraph' and string-length(.)>0">
                        <!-- print paragraph content -->
                        <xsl:for-each
                            select="./content[not(@styleCode='hidden' or @styleCode='bookmark')]">
                            <xsl:choose>
                                <xsl:when test="contains(., ':')">
                                    <xsl:call-template name="replaceColon">
                                        <xsl:with-param name="text" select="."/>
                                    </xsl:call-template>
                                </xsl:when>
                                <xsl:otherwise>
                                    <xsl:value-of select="."/>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:for-each>
                        <xsl:text>&#xa;</xsl:text>
                    </xsl:when>
                    <!-- ******* otherwise it has to be list with a list *********** -->
                    <xsl:when test="local-name(.)='list'">
                        <!-- ******call listProcessing recursively****** -->
                        <xsl:call-template name="listProcessing"/>
                    </xsl:when>
                </xsl:choose>
            </xsl:for-each>
            <!-- node -->
        </xsl:for-each>
        <!-- item -->

        <!-- *********** End listProcessing******** -->
    </xsl:template>

    <!-- *****************************************************
    ******** Title Case**************** *********************
    ****************************************************-->

    <xsl:template name="TitleCase">
        <xsl:param name="title"/>
        <xsl:param name="start"/>

        <xsl:choose>
            <xsl:when test="$start=true()">
                <xsl:choose>
                    <xsl:when test="contains(substring($title,1,1),'[')">
                        <!-- found start bracket -->
                        <xsl:variable name="romanNumneral"
                            select="substring-before(substring-after($title,'['),']')"/>
                        <xsl:value-of select="$romanNumneral"/>
                        <xsl:variable name="title2"
                            select="substring($title,string-length($romanNumneral)+3)"/>
                        <xsl:if test="string-length($title2) > 0">
                            <!-- this is end condition for recursive call -->
                            <xsl:call-template name="TitleCase">
                                <xsl:with-param name="title" select="$title2"/>
                                <xsl:with-param name="start" select="true()"/>
                                <!-- "[IV] axis" in this case it should become "IV Axis", so call with true -->
                            </xsl:call-template>
                        </xsl:if>
                    </xsl:when>
                    <xsl:otherwise>
                        <!-- title case me -->
                        <xsl:value-of
                            select="translate(substring($title,1,1),'abcdefghijklmnopqrstuvwxyz:','ABCDEFGHIJKLMNOPQRSTUVWXYZ:')"/>
                        <xsl:variable name="title2" select="substring($title,2)"/>
                        <xsl:if test="string-length($title2) > 0">
                            <xsl:call-template name="TitleCase">
                                <xsl:with-param name="title" select="$title2"/>
                                <xsl:with-param name="start" select="false()"/>
                            </xsl:call-template>
                        </xsl:if>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
            <!-- start test ends -->
            <xsl:when test="contains(substring($title,1,1),'[')">
                <!-- roman test -->
                <xsl:variable name="romanNumneral"
                    select="substring-before(substring-after($title,'['),']')"/>
                <xsl:value-of select="$romanNumneral"/>
                <xsl:variable name="title2"
                    select="substring($title,string-length($romanNumneral)+3)"/>
                <xsl:if test="string-length($title2) > 0">
                    <xsl:call-template name="TitleCase">
                        <xsl:with-param name="title" select="$title2"/>
                        <xsl:with-param name="start" select="false()"/>
                    </xsl:call-template>
                </xsl:if>
            </xsl:when>
            <!-- end Roman test -->
            <xsl:otherwise>
                <!-- small-test case start -->
                <xsl:value-of
                    select="translate(string(substring($title,1,1)), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ:', 'abcdefghijklmnopqrstuvwxyz:')"/>
                <xsl:variable name="title2" select="substring($title,2)"/>
                <xsl:if test="string-length($title2) > 0">
                    <xsl:choose>
                        <xsl:when test="not(contains($title2, ']'))">

                            <xsl:value-of
                                select="translate($title2, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ:', 'abcdefghijklmnopqrstuvwxyz:')"/>

                            <!--   <xsl:value-of select="$title2"/> -->
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:call-template name="TitleCase">
                                <xsl:with-param name="title" select="$title2"/>
                                <xsl:with-param name="start" select="false()"/>
                            </xsl:call-template>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:if>
            </xsl:otherwise>
            <!-- small-case test ends here -->
        </xsl:choose>
    </xsl:template>

    </xsl:stylesheet> 
```

请帮忙。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:19:21.633

XML 文档中的元素绑定到名称空间。很容易错过，因为没有命名空间前缀，但文档元素上的声明：`xmlns="ddn:cns-org:v5"`将该元素（及其后代）绑定到该命名空间。

因此，为了在 XSLT 中使用 XPath 进行寻址，您需要声明命名空间并使用命名空间前缀。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:d="ddn:cns-org:v5">
    <xsl:output method="text" omit-xml-declaration="yes"/>

    <xsl:template match="text()[normalize-space()]">
        <xsl:value-of select="."/>
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

    <xsl:template match="text()[not(normalize-space())]"/>

    <xsl:template match="d:section">
        <xsl:apply-templates/>
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

    <xsl:template match="d:title">
        <xsl:value-of select="translate(., 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')"/>
        <xsl:if test="not( substring(., string-length(.),1)=':' )">
            <xsl:text>:</xsl:text>
        </xsl:if>
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:05:11.243

祝大家新年快乐。

**我修改了 Mads 提供的代码。它几乎按我的预期工作。这是xsl文件的修改版本。**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:d="ddn:cns-org:v5">
    <xsl:output method="text" omit-xml-declaration="yes" />
<!-- 
    <xsl:template match="text()[normalize-space()]">
        <xsl:value-of select="." />
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>
 -->

    <xsl:template match="text()[not(normalize-space())]" />

    <!-- Add a blank line after each section or paragraph-->
    <xsl:template match="d:section | d:paragraph">
        <xsl:apply-templates />
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

    <!-- 
        Format the contents in <content></content>
     -->
    <xsl:template match="d:content">    
        <xsl:value-of select='normalize-space()'/>          
    </xsl:template>

    <xsl:template match="d:title">      
        <xsl:text>&#xA;&#xA;</xsl:text>
        <xsl:value-of
            select="translate(normalize-space(), 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />
        <xsl:if test="not( substring(., string-length(.),1)=':' )">
            <xsl:text>:</xsl:text>
        </xsl:if>
        <xsl:text>&#xA;&#xA;</xsl:text>     
    </xsl:template>

</xsl:stylesheet> 
```

**这是从 xsl 生成的纯文本。**

术前诊断：

__ 白内障。

术后诊断：

__ 白内障。

手术：

平坦部玻璃体切除术和视网膜前膜切除术。后房晶状体植入物超声乳化术**（对照#**）

外科医生：

JR xxx 博士

就诊医生：

麻醉师：

麻醉：

临床注意事项：

手术程序：

在将患者带到手术室之前，在日间手术室进行了局部消毒、麻醉和扩张。

患者已准备好使用 Proviodine。然后病人被盖上。特别注意眼睑/睫毛，准备和悬垂。将窥器插入__eye 的穹窿。给予结膜下赛洛卡因。在结膜下注射区域进行了小结膜切开术。将 3 cc 的 2% Xylocaine 和 0.75% Marcaine 通过腹腔注射到 Sub-Tenon 的空间中。

上下均进行了腹腔穿刺术。使用眼内非防腐剂赛洛卡因。将粘弹性材料注入前房。用 3 mm 角膜刀进入眼睛。前囊切除术是在粘弹性下进行的。进行了核的水分离和勾画。开始超声乳化。超声乳化时间为_*秒。在完成超声乳化术时，冲洗并从眼中吸​​出皮质材料。后囊被抛光。人工晶状体插入在粘弹性材料下。人工晶状体屈光度为_*屈光度。

使用镜头拨片将镜头拨入到位。然后进行粘弹性材料的灌溉和抽吸。测试伤口以确保没有伤口渗漏。

将额外的 2% Xylocaine 和 0.75% Marcaine 麻醉剂通过围切术注入 Tenon 下腔。

然后将 25 号套管置于颞下、颞上和鼻上。在颞下套管中放置输液。

然后进行了玻璃体切除术。

__（xxx 博士将此区域称为“开放段落”-删除此信息）

在玻璃体切除术完成时，重新检查周边视网膜以确保没有未经治疗的周边视网膜撕裂或脱离。插管被移除。检查巩膜伤口，如果发现伤口渗漏，则用 9-0 Vicryl 缝合线将其缝合。否则，放置中断的 9-0 Vicryl 缝合线。给予结膜下地卡隆和头孢呋辛。

应用了补丁和防护罩。

病人在令人满意的情况下离开了手术室。

附录：

术后外用眼药水：

1.  马克西克斯。
2.  内瓦纳克。
3.  维加莫。

术后随访：

__

***现在问题又回到了我昨天发布的关于使用一些现有代码的内容，例如“replaceColon”模板来操作可能包含一些不需要的冒号 (:) 的内容。简单地说，我想将“replaceColon”模板应用于每个“内容”节点。***

有什么建议么。

最好的戴夫

# c# - 存储分隔文本文件架构的最佳实践

> ID：13848880
> 
> 赞同：2
> 
> 时间：2012-12-12T21:22:39.847
> 
> 标签：c#, csv, schema, flat-file, tsv

我正在编写一个程序来解析几个分隔的平面文件，它需要几个列。如果将来更改输入平面文件的格式，我不确定使我的代码易于维护/更新的最佳方法。

目前我有一组常量整数形式（还有更多）：

```
NameListFirstNameCol = 0; 
NameListLastNameCol = 1; 
NameListAgeCol = 2; 
ClassListRoomNumCol = 0; 
ClassListRoomNameCol = 1; 
```

以及用于分隔符的常量，例如：

```
NameListDelim = ',';
ClassListDelim = '\t'; 
```

我想看看是否有人对跟踪此类信息的更好方法提出建议。（我可以假设我需要的列将始终在输入中，但输入的创建者可能会更改分隔符、添加新列或重新排序列）。这是一个数据分析脚本，它会看到一些重用，但不是生产软件的主要部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:33:18.677

这里有一些有趣的信息：

[使用 Schema.ini 将 CSV 文件导入数据库](http://www.aspdotnetcodes.com/Importing_CSV_Database_Schema.ini.aspx)

特别是“**每次使用不同的 CSV 文件名导入 CSV 文件”或“动态创建 Schema.ini 文件**”部分可能看起来很有希望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:44:18.280

首先，您必须从文件中创建一个包含字段名称和相应索引的列表。

例如 Dictionary< string, int > 用于保留您可以从文件第一行读取的名称。拥有列名和相应索引的列表，您可以使用[string.Split](http://msdn.microsoft.com/en-us/library/b873y76a%28v=vs.100%29.aspx "字符串.Split")仅使用您需要的索引来解析以下行。

您还必须存储结构所需的列列表。为了便于维护，您可以将其作为单独的 .cs 文件中的单独类保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:16:23.047

我编写了一个名为[JRecordBind](http://jrecordbind.org/)的库，它使用 XML Schema 描述平面文件的结构。请参阅[其中一个示例](https://github.com/ffissore/jrecordbind/tree/master/jrecordbind-test/src/test/resources)。

不幸的是，它是用 Java 编写的。你可以考虑移植它。如果有 C# 版本就好了

# c# - 从 MVC4 中的表单获取数据

> ID：13848882
> 
> 赞同：2
> 
> 时间：2012-12-12T21:22:53.417
> 
> 标签：c#, asp.net, asp.net-mvc-4

在我看来，我有以下 HTML，是的，我知道我可以使用 HTML 帮助程序，但在这种情况下，我不能使用它，因为当我允许 MVC 创建文本区域时，我们在页面上使用的一些脚本会导致严重问题。

```
@Html.TextBox("name", "", new {  @placeholder = "name", @class = "formElement", @id="name"})
<textarea id="message" placeholder="comments" class="formElement"></textarea> 
```

然后在我的控制器中，我设置了一个非常基本的行来打印出名称和消息。

```
 [HttpPost]
    public ActionResult Form(MessageViewModel model)
    {
        return Content("Name: " + model.name + " Message: " + model.message);
    } 
```

名称可以很好地访问，因为它是使用 HTML 帮助程序创建的，但我无法访问消息，它没有返回任何内容。名称和消息都在我的 ViewModel 中定义：

```
 public string name { get; set; }
    public string message { get; set; } 
```

如何访问消息文本区域中的文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T21:25:58.433

您应该为 textarea 添加一个“名称”属性。html 元素是根据它们的名称发布的。

```
<textarea id="message" name="message" placeholder="comments" class="formElement"></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:37:46.350

在 MVC ii 中，在视图中拥有适当的模型并将模型属性分配给所需的控件是一种很好的做法，例如下一个示例：

```
@Html.TextAreaFor(m => Model.remark, 10, 5, new { style = "resize: none" }) 
```

将`@Html.TextAreaFor`呈现为：

```
<textarea cols="5" id="remark" name="remark" rows="10" style="resize: none"></textarea> 
```

并在提交表单并使用视图发送的模型调用控制器中的操作时允许正确发布。

# java - 将文本文件输入转换为整数时出现 NumberFormatException

> ID：13848886
> 
> 赞同：0
> 
> 时间：2012-12-12T21:23:06.960
> 
> 标签：java, jtextfield, numberformatexception

我有一个`JTextFiled`. 我将在其中输入一些整数值。

我有另一种方法`getMyAge(int age)`，它需要 a`int`作为参数。

`NumberFormatException`当我尝试传递我在文本字段中键入的整数时，我最终得到了一个,。

```
 getMyAge(Integer.parseInt(txtFiled.getText())); 
```

我怎样才能解决这个问题 ？（在所有情况下，我都会在文本字段中输入一个数字）。我尝试了 try-catch 块，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:25:32.673

您可以尝试打印的内容，`txtFiled.getText()`也许您可​​以尝试替换它，`txtFiled.getText().trim()`因为额外的空白空间很容易导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:26:20.950

[**Integer.parseInt(String)**](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)文档指出

> 它会抛出 NumberFormatException - 如果字符串不包含可解析的整数。

所以，最肯定的是，您传递的字符串不是数字的表示形式。也许有一个尾随空格附加到字符串。请注意 : `23`or`23`由于前面和结尾处的空格而无法解析。你总是**可以**用`String.trim()`. 如果是这样的话。试试这个：

```
 getMyAge(Integer.parseInt(txtFiled.getText().trim())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:29:27.013

这意味着在`parseInt, the exception _NumberFormatException_ is fired, if the string does not contain a parsable integer.`JTextField 中键入的内容无法解析为整数。

## 解决方案

1.  尝试通过块捕获异常`Try/Catch/Finally`并从中获取消息。
2.  确保在 JTextField 中输入的是一个整数......简单:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T21:29:35.500

在将其设置为 setMyAge 方法之前，您应该检查文本字段是否包含数字。

建议您执行以下操作：

```
try {
  setMyAge(Integer.parseInt(txtFiled.getText().trim()));
} catch (NumberFormatException ne) {
  setMyAge(0); // you may remove this line if you doesn't want to set anything.
} 
```

# types - 正确理解和使用 Typed Racket 省略号

> ID：13848890
> 
> 赞同：4
> 
> 时间：2012-12-12T21:23:12.020
> 
> 标签：types, racket, typed-racket

我想定义一个这样的函数：

```
(define (((lift fn) . gs) . args)
  (apply fn (map (lambda (g) (apply g args)) gs))) 
```

这基本上“提升”了一个函数`fn`，因此它不是接受它的普通参数，而是接受*函数*并产生一个新函数。所以，例如，

```
 (define add (lift +))
 (define sum-of-sin-and-cos (add sin cos))
 (sum-of-sin-and-cos 5) ; is equivalent to (+ (sin 5) (cos 5))

 (define sum-of-multiplication-and-division (add * /))
 (sum-of-multiplication-and-division 1 2 3 4 5) ; is equivalent to (+ (* 1 2 3 4 5) (/ 1 2 3 4 5)) 
```

这适用于普通球拍。现在，我想将此功能移动到打字球拍中。这是我想出的类型声明：

```
(: lift (All (A ... ) (All (B ...) (All (C)
             ((B ... B -> C) ->
                     ((A -> B) ... B ->
                               (A ... B -> C))))))) 
```

这是我*认为*定义所说的：对于所有类型`A0`, `A1`, .. `An`and `B0`, `B1`, ... `Bn`, and `C`:

*   `lift`取 ( `B0`, `B1`, ...`Bn`的函数`C`) 并产生：
*   许多函数的函数（`Ai`to `Bi`，`i`从 0 to `n`）依次产生：
*   的函数`Ai`，`i`从 0 到`n`，依次产生：
*   一种`C`

这不起作用：在最后一行`(A ... B -> C)`我得到`Type Checker: Type variable A must be used with ... in: A`.

这不是我在使用 Typed Racket 时遇到的第一个省略号问题，而且我认为这确实是对省略号的含义的根本误解。

作为旁注，如果我尝试将这些`All`子句折叠成一个这样的子句：

`(All (A ... B ... C) blah blah blah)`

然后在第二行`((B ... B - C) ->`我收到以下错误：（`Type Checker: Used a type variable (B) not bound with ... as a bound on a ... in: B`指该行的第二个 B）。我也不是很明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:34:15.370

首先回答你的最后一个问题，类型语法`All`不允许一次绑定多个点变量，因为不清楚如何实例化它们。这与您不能在同一函数中具有多个剩余参数的原因相同。

至于`lift`，我认为你想要的类型是：

```
(: lift (All (C A ...)
             (All (B ...)
                  ((B ... B -> C)
                   ->
                   ((A ... A -> B) ... B 
                    ->
                    (A ... A -> C)))))) 
```

然后该函数通过一个注释进行：

```
(define (((lift fn) . gs) . args)
  (apply fn (map
             (λ: ([g : (A ... A -> B)])
               (apply g args))
             gs))) 
```

由于嵌套的foralls，使用此函数需要一些显式注释；这是您的测试用例：

```
(define add ((inst (inst lift Number Number) Number Number) +))
(define add2 ((inst (inst lift Number Number Number Number Number Number)
                    Number Number)
              +))
(define sum-of-sin-and-cos (add sin cos))
(sum-of-sin-and-cos 5) ; is equivalent to (+ (sin 5) (cos 5))
(define sum-of-multiplication-and-division (add2 * /))    
(sum-of-multiplication-and-division 1 2 3 4 5) 
```

请注意，我必须为它们创建一个单独的绑定，`add2`因为它们用于不同的类型。

# ruby-on-rails - 多阶段 capistrano：db:migrate 在生产中正常工作，但在暂存时无法正常工作

> ID：13848891
> 
> 赞同：0
> 
> 时间：2012-12-12T21:23:18.787
> 
> 标签：ruby-on-rails, ruby, capistrano

我已经设置了 capistrano 来部署到登台和生产。老实说，我对 capistrano 不是很熟悉。我通过使用标准 capistrano（不是多主机）来做到这一点。我传递了一个变量，例如：

```
cap production deploy
cap staging deploy 
```

但我`db:migrate`的工作不正确。

使用 cat staging deploy：我明白了：

```
 * executing "cd /data/sites/staging.domain.com/apps/d-rails/releases/20121212203353 && bundle exec rake RAILS_ENV=production  db:migrate" 
```

并希望（只是子生产-> 分期）：

```
* executing "cd /data/sites/staging.domain.com/apps/d-rails/releases/20121212203353 && bundle exec rake RAILS_ENV=staging  db:migrate" 
```

我该如何设置？或者我应该先看看什么来解决？

在我的 deploy.rb 中，我有：

```
task :production do
  set :deploy_to, "/data/sites/domain.com/apps/#{application}"
end

task :staging do
  set :deploy_to, "/data/sites/staging.domain.com/apps/#{application}"
  after 'deploy:update_code' do
    run "cd #{release_path}; RAILS_ENV=staging bundle exec rake assets:precompile --trace"
  end
end 
```

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:55:09.497

我认为使用 capistrano 的多阶段功能会更容易。这是我的生产和暂存部署设置：

**配置/部署.rb**

```
require 'capistrano/ext/multistage'
require 'bundler/capistrano'

set :application, "yourappname"
set :repository,  "git@yourhost.com:yourrepo.git"
set :stages, %w(production staging)
set :default_stage, "staging" # running "cap deploy" deploys to staging, "cap production deploy" deploys to production
set :user, "deploy" # the ssh user which does the deployment on the server
set :use_sudo, false
set :scm, :git

set :default_environment, {
  'PATH' => "/usr/local/rbenv/shims:/usr/local/rbenv/bin:/usr/local/rbenv/versions/1.9.3-p327/bin:$PATH"
}
after "deploy:update_code", "deploy:migrate"

namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

`set :default_environment`如果您必须为您的部署包含一些额外的路径，则需要 （因为，正常或`.bashrc`在`.bash_profile`capistrano 登录服务器时不包含）

**配置/部署/production.rb**

```
set :rails_env, "production"
set :deploy_to, "/var/www/your_production_folder"

role :web, "example.com"                          # Your HTTP server, Apache/etc
role :app, "example.com"                          # This may be the same as your `Web` server
role :db,  "example.com", :primary => true # This is where Rails migrations will run 
```

**配置/部署/staging.rb**

```
set :rails_env, "staging"
set :deploy_to, "/var/www/your_staging_folder"

role :web, "example.com"                          # Your HTTP server, Apache/etc
role :app, "example.com"                          # This may be the same as your `Web` server
role :db,  "example.com", :primary => true # This is where Rails migrations will run 
```

确保在 VirtualHost 配置中包含 RailsEnv 变量。如果您使用的是 Apache，这将如下所示：

```
<VirtualHost *:80>
  ServerName staging.example.com
  ServerAlias www.staging.example.com
  # !!! Be sure to point DocumentRoot to 'public'!
  DocumentRoot /var/www/your_staging_folder/current/public
  <Directory /var/www/your_staging_folder/current/public>
    # This relaxes Apache security settings.
    AllowOverride all
    # MultiViews must be turned off.
    Options -MultiViews
    #AuthName "Staging Server"
    #AuthType Basic
    #AuthUserFile /var/staging.htpasswd
    #require valid-user
  </Directory>
  RailsEnv staging
</VirtualHost> 
```

如果您想用密码保护您的登台环境`AuthName`，则使用未注释的, 。`AuthType`完成配置这些东西后，使用 测试您的部署`cap deploy:setup`，这将设置文件夹结构。A`cap deploy:cold`会将您的应用程序的所有文件复制到该目录。A`cap deploy:migrate`迁移您的数据库。但你也只能做一个`cap deploy`.

另一件事是，您必须在 rails 应用程序中设置暂存环境。为此，将`config/environments/production.rb`（或你喜欢的 development.rb）复制到`staging.rb`并根据需要调整配置。

我希望我没有忘记任何事情；）如果您还有其他问题，请告诉我

# c# - Texture2D 渲染图像

> ID：13848893
> 
> 赞同：0
> 
> 时间：2012-12-12T21:23:34.223
> 
> 标签：c#, windows-phone-7, xna, render-to-texture

用图像填充 Texture2D 的最快方法是什么？

在 /Images/image.png 我有所需的图像。

我现有的代码只是用白色填充纹理。我怎样才能让它渲染图像？

```
Texture2D texture = new Texture2D(graphics.GraphicsDevice, this.Width, this.Height, false, SurfaceFormat.Color);
Color[] colors = new Color[this.Width * this.Height];
for (int j = 0; j < colors.Length; j++)
    colors[j] = color;
texture.SetData(colors); 
```

也许我做错了，但是在屏幕上动态显示图像的最简单/最快的方法是什么？

## 更新

我将代码更改为使用 ContentManager。

```
ContentManager contentManager = (Application.Current as App).Content;
Texture2D texture = contentManager.Load<Texture2D>("/Images/block.png");

contentManager.Load<Texture2D>(@"Images/block.png") 
```

抛出“找不到文件”。

```
contentManager.Load<Texture2D>(@"/Images/block.png") 
```

抛出“加载“\Images\block.png”时出错。无法打开文件。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:13:47.917

最简单的方法是只依赖建议的内容管道。

创建 XNA 项目时，您应该有两个项目：MyGame 和 MyGame (Content)。右键单击内容并选择“添加文件”。这将允许您导入可以轻松定位并编译为 .xnb 格式的图像。我相信这是为了加快速度。

完成后，您需要一个`ContentManager`对象。理想情况下，您`Content`将从您的游戏类中使用 - 这已经为您设置好了。但是您可以创建一个：

```
ContentMananger content = new ContentManager(Services, "Content"); 
```

来自`Services`您的游戏类（或`IServiceProvider`带有 a `GraphicsDeviceService`）的位置。第二个参数是内容文件夹的根目录。

这将允许您通过以下方式从内容管道加载任意数据格式：

```
content.Load<Texture2D>("myTexture"); 
```

（请注意，您不包括文件扩展名。）

为方便起见，我建议您在 Content 项目中创建一个“Images”文件夹，因为您最终将拥有大量资源，并且更易于组织。你也可以有一个 SFX、Music、XML 等文件夹来处理你的游戏需要的所有数据类型。

所以你会这样做：

```
Texture2D myTexture = content.Load<Texture2D>("images/myTexture");
SpriteBatch spriteBatch = new SpriteBatch(graphics.GraphicsDevice); 
```

（请注意，这些对象显然需要在类范围内可见）。这将发生在您用于加载文件的初始化代码中。

之后，您将使用 Draw 方法实际绘制精灵

```
public override void Draw(SpriteBatch spriteBatch)
{
   spriteBatch.Begin();
   spriteBatch.Draw(myTexture, new Vector2(320, 240), Color.White);
   spriteBatch.End();
} 
```

你的精灵被神奇地绘制了。

您所做的基本上是以编程方式定义图像然后绘制它。虽然他们有一些应用程序，但可能不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:30:09.830

如果您不使用[内容管道](http://msdn.microsoft.com/en-us/library/bb203887.aspx)添加纹理，请使用[`Texture2D.FromStream()`](http://msdn.microsoft.com/en-us/library/ff434103.aspx)：

```
FileInfo imageFile = new FileInfo("Images\\image.png");
Texture2D image = Texture2D.FromStream(GraphicsDevice, imageFile.OpenRead()); 
```

如果您正在加载大量纹理，您可能希望在**不再需要它们时将它们处理掉**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:49:24.337

如果您尝试在运行时加载图像，则可以使用以下代码：

```
string file = @"Content/images/1.png"; // @ sign is to treat '/' as a character, not a control symbol
FileStream fs = new FileStream(file, FileMode.Open);
Texture2D texture = Texture2D.FromStream(GraphicsDevice, fs);
fs.Dispose(); 
```

…然后就`texture`这样使用：

```
spritebatch.Draw(texture, new Vector2(123, 456), Color.White); 
```

要使用`FileStream`您可能需要添加`using System.IO;`您的游戏类。

这种方法不被认为是标准做法，它可能会导致 Alpha 通道出现问题，要修复它们，您需要使用不同的 Alpha 混合状态。您可以在[这个问题](https://stackoverflow.com/questions/12078206/what-are-the-risks-of-loading-textures-from-images-at-runtime-in-xna)中找到更多相关信息。

# windows-phone-8 - 安装 Windows Phone 8 SDK 时未找到 kb2744908

> ID：13848894
> 
> 赞同：0
> 
> 时间：2012-12-12T21:23:46.997
> 
> 标签：windows-phone-8

我有 Visual Studio 2012 Pro 和 Windows 8 Pro。我去安装 Windows 8 SDK，它在我的一台计算机上安装得很好，我在安装 Visual Studio 2012 Update 1 之前安装了 SDK。但是在我之前安装 Visual Studio 2012 Update 1 的第二台计算机上SDK，我收到以下错误：KB2744908 Element not found。不知道我是否会担心这个。我附上了一个截图，所以你可以看到这个问题。谢谢！ ![未找到 kb2744908](../Images/3a58c6b74fd339208b662d1194fc3460.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:37:39.060

它似乎已经修复了自己。重新启动并允许安装程序在重新启动后完成后，SDK 工作正常。我已经使用 SDK 成功地创建、编辑、构建和部署了一个应用程序（尽管它非常简单）。

# uiscrollview - 如何将 UIScrollView 与 AutoLayout (iOS6) 一起使用？

> ID：13848895
> 
> 赞同：5
> 
> 时间：2012-12-12T21:23:46.900
> 
> 标签：uiscrollview, ios6, autolayout

我正在尝试构建一个具有多个不同控件的视图，但我希望该视图仅在垂直方向上滚动。我正在使用自动布局，所以我不想手动指定大小（我知道我可以做到这一点，但根据我对发布说明的理解，`UIScrollView`你不应该这样做）。

因此，如果我创建一个简单的视图控制器（没有 .xib 文件）并简单地将以下内容添加到`init`方法中，我希望我的标签会换行（他们会这样做）并且我的视图会垂直滚动，但是，这不是案子：

```
- (id)init {
    self = [super init];
    if (self) {

        UIScrollView *_scrollView = [UIScrollView new];
        [_scrollView setTranslatesAutoresizingMaskIntoConstraints:NO];

        UILabel *label1 = [UILabel new];
        UILabel *label2 = [UILabel new];

        [label1 setTranslatesAutoresizingMaskIntoConstraints:NO];
        [label2 setTranslatesAutoresizingMaskIntoConstraints:NO];

        [label1 setNumberOfLines:0];
        [label2 setNumberOfLines:0];

        [label1 setPreferredMaxLayoutWidth:240];
        [label2 setPreferredMaxLayoutWidth:240];

        NSString *sampleText = @"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";
        [label1 setText:sampleText];
        [label2 setText:sampleText];

        [self.view addSubview:_scrollView];
        [_scrollView addSubview:label1];
        [_scrollView addSubview:label2];

        NSArray *constraints;
        constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"H:|[_scrollView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_scrollView)];
        [self.view addConstraints:constraints];

        constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[_scrollView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_scrollView)];
        [self.view addConstraints:constraints];

        constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[label1]-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(label1)];
        [_scrollView addConstraints:constraints];

        constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[label2]-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(label2)];
        [_scrollView addConstraints:constraints];

        constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[label1]-[label2]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(label1, label2)];
        [_scrollView addConstraints:constraints];
    }

    return self;
} 
```

我认为这段代码有几个结果很奇怪。如果您在`viewDidLayoutSubviews`方法中记录scrollviewheight（在超级调用之后），这是应该应用所有约束的地方，那么高度报告为0。同样奇怪的是宽度报告的数字与我预期的不同。由于第一个约束，我希望它报告超级视图的宽度（我什至尝试强制该约束内的宽度具有据称需要的优先级，但它仍然不起作用）。

据我了解，`UIScrollView`的内容大小应该由其内容的内在大小设置，但这似乎并没有发生。

那么，有人知道缺少什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T19:23:05.820

我已经联系了 Apple 的支持以获取有关我的问题的答案。代码的问题在于 UIScrollView 中包含的对象必须垂直固定到顶部和底部，才能确定其内在内容大小。所以下面的代码行

```
constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[label1]-[label2]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(label1, label2)];
[_scrollView addConstraints:constraints]; 
```

应改为：

```
constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[label1]-[label2]-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(label1, label2)];
[_scrollView addConstraints:constraints]; 
```

他们还指出，我在几个对象上使用了“new”关键字，其中基本的“init”不是指定的初始值设定项。虽然这与我的具体问题无关，但他们确实指出您应该避免这样做，因为您的对象可能处于无效状态。

# c++ - 使用 IXMLHTTPRequest2 流式传输时如何在 Windows 8 上禁用缓存？

> ID：13848897
> 
> 赞同：1
> 
> 时间：2012-12-12T21:23:48.360
> 
> 标签：c++, c++11, windows-runtime, msxml

在我们的 Windows 8 应用程序中，我们使用 IXMLHTTPRequest2 方法通过 HTTP 流式传输文件，文件的大小可以达到千兆字节。这一切都很完美，除了 WinRT 在内部有一个缓存系统，它将通过对 IXMLHTTPRequest2 的调用流式传输的所有内容存储在临时 Internet 缓存中。随着我们流式传输越来越多的文件，缓存永远不会被清空，它只会开始占用越来越多的磁盘空间，直到磁盘已满。

理想情况下，我们希望完全禁用此缓存功能。我们可以接受的另一个选项是缓存文件将在片刻后被删除（尽管我们希望避免浏览临时 Internet 缓存并手动删除文件）。

我们尝试在服务器响应中添加“Expires: 0”标头，以及直接在 IE 中禁用缓存（我们认为这可能会影响对 IXMLHTTPRequest2 的调用），但无济于事。

有人对此有任何想法吗？

[我意识到这个问题与此处](https://stackoverflow.com/questions/13130739/how-to-disable-caching-http-get-in-metro-app-i-am-using-ixmlhttprequest2)发布的另一个问题相似，但是，我们的问题更多地与缓存占用的空间有关，而不是与文件的“新鲜度”有关。

**编辑**：我们还在 MSDN 论坛上找到了这篇[文章](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/dadbea2e-85d4-4af0-9283-2f91e5b7cc2c)，根据 MSFT 版主的说法，“*系统还会定期清理缓存，因此您不必担心磁盘空间不足*”，但事实并非如此在我们的场景中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:42:12.870

根据MSDN 论坛上的[这篇文章](https://social.msdn.microsoft.com/Forums/windowsapps/en-US/f00e1c9c-9214-48fc-b0f2-2d39d8b8039c)，这是不可能的，并且是 WinRT 的一个已知限制。

有时唯一的答案是坏消息。:-[

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T23:48:46.500

正如 ildjarn 所指出的，这在 Windows 8 上似乎是不可避免的。但看起来可能有一种方法可以为运行 Windows 8.1 的客户端解决这个问题。

我自己没有尝试过，但我只是注意到现在有“IXMLHTTPRequest3”，它用一些新功能扩展了“IXMLHTTPRequest2”：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dn376398 %28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dn376398%28v=vs.85%29.aspx)

相关功能是： XHR_PROP_NO_CACHE – 抑制 HTTP 请求的缓存读取和写入。

这听起来很有希望。

# javascript - ExtJS 从控制器刷新视图

> ID：13848898
> 
> 赞同：3
> 
> 时间：2012-12-12T21:23:48.820
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我在 ExtJs 中有以下控制器：

```
Ext.define('FileBrowser.controller.BrowserController', {
    extend: 'Ext.app.Controller',
    views: ['browser.tree_dir', 'browser.grid_file'],
    stores: ['store_dir', 'store_file'],

    init: function () {
        this.control({
            'window > tree_dir': {
                itemclick: {
                    fn: function (view, record, item, index, event) {
                        if (record.isLeaf() == false) {
                            Ext.getStore('store_file').load({
                                params: {
                                    dir: record.data.id
                                }
                            });
                            var parentOfCurrentFiles = record.data.id
                            nodeId = record.data.id;
                            htmlId = item.id;
                            var grid_view = this.getView('browser.grid_file');
                            var grid_view_v = grid_view.getView();
                            grid_view_v.refresh();
                        }

                    }

                }
            }
        });
    },
    onPanelRendered: function () {
        console.log('The panel was rendered');
    }
}); 
```

如果您在“itemclick”下注意到我正在尝试刷新我的一个观点，那么我的方法不起作用。谁能向我解释如何刷新视图？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:16:52.587

替换`var grid_view= this.getView('browser.grid_file');`为`var grid_view= this.getView('browser.grid_file').create();`以获得一个真实的实例（正如我已经告诉过你的那样`getView() only return the view config, not a instance!`），或者如果你已经创建了该网格并且只有一个实例存在，请使用 xtype 以及组件查询来接收它`var grid_view=Ext.ComponentQuery('grid_file')[0]`

现在到刷新（）

基本上，您永远不需要调用此方法，因为您的网格已绑定到存储，并且在此存储上所做的任何更改都会直接反映到您的网格。

我还建议您在创建视图实例时存储它们而不是使用查询或直接使用**[ref](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-cfg-refs)**属性并让 ExtJS 为您完成工作。我猜最后一个将是您最好的解决方案……看看 API 示例中的 ref 并试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:00:51.973

因此，您要做的是加载商店并在刷新 grid_view 后反映数据...？在这种情况下，您还没有`setStore()`对网格做 a，或者如果您在其他地方做过，您就没有`setData()`对商店做 a。此外，您应该调用网格上的刷新。

# jquery - 如何在 jpicker 中使用多个回调

> ID：13848900
> 
> 赞同：0
> 
> 时间：2012-12-12T21:24:00.180
> 
> 标签：jquery, color-picker, jquery-callback, jpicker

我想使用 jpicker 修改多个元素，这是单个元素的代码（#body02），是否可以为每个元素创建一个数组？

```
 $(document).ready(
function()
{
  var LiveCallbackElement = $('#body02'),
      LiveCallbackButton = $('#LiveButton');  // you don't want it searching this

                                     // on every live callback!!!
  $('#Callbacks').jPicker(
    {window:{position:{x:'screenCenter',y:'200'}}},
    function(color, context)
    {
      var all = color.val('all');
      alert('Color chosen - hex: ' + (all && '#' + all.hex || 'none') +
        ' - alpha: ' + (all && all.a + '%' || 'none'));
      $('#body02').css(
        {
          backgroundColor: all && '#' + all.hex || 'transparent'
        }); // prevent IE from throwing exception if hex is empty
    },
    function(color, context)
    {
      if (context == LiveCallbackButton.get(0)) alert('Color set from button');
      var hex = color.val('hex');
      LiveCallbackElement.css(
        {
          backgroundColor: hex && '#' + hex || 'transparent'
        }); // prevent IE from throwing exception if hex is empty
    },
    function(color, context)
    {
      alert('"Cancel" Button Clicked');
    });      
  $('#LiveButton').click(
    function()
    {
      $.jPicker.List[0].color.active.val('hex', 'e2ddcf', this);
    });

}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:49:04.637

有点晚，但可能对其他人有帮助。如果您想为多个元素设置具有相同值的相同属性，只需添加类 ID（逗号分隔）。

```
 $('#Id1, .class1, .class2, #AnotherId').css(
    {
      backgroundColor: all && '#' + all.hex || 'transparent'
    }); 
```

但是，如果您想设置单独的属性或使用单独的值，请进行单独的调用。

```
 $('#Id1').css(
    {
      backgroundColor: all && '#' + all.hex || 'transparent'
    });

    $('.someClass').css(
    {
      color: all && '#' + all.hex || 'transparent'
    }); 
```

由于 .css 需要一个 css 值数组，因此您还可以在同一个调用中对同一个元素应用多个更改。

```
 $('#Id1').css(
    {
      //Note the trailing comma except the last entry
      backgroundColor: all && '#' + all.hex || 'transparent',
      color: all && '#' + all.hex || 'transparent'
    }); 
```

希望有帮助。

# codeigniter - 如何检查查询结果中的值是否为空？- 活动记录 - CodeIgniter

> ID：13848905
> 
> 赞同：0
> 
> 时间：2012-12-12T21:24:20.997
> 
> 标签：codeigniter, activerecord

我想知道如何检查表（经理）中是否存在值，然后根据该表中是否存在值添加“是”或“否”字符串。

```
$this->db->select('employees.first_name, employees.last_name, departments.department_name, departments.department_numb, titles.title');
            $this->db->from('employees');
            $this->db->where('first_name', $firstname);
            $this->db->where('last_name', $lastname);
            $this->db->join('department_manager', 'department_manager.emp_numb = employees.emp_numb', 'inner');
            $this->db->join('departments', 'departments.department_numb = department_manager.department_numb', 'inner');
            $this->db->join('titles', 'titles.emp_numb = employees.emp_numb', 'inner');
            $this->db->where('department_name', $dept);
            $this->db->where('title', $jobtitle);
            $result = $this->db->get();

            $data = array();
            foreach($result->result() as $row)
            {
                $entry = array();
                $entry['firstname'] = $row->first_name;
                $entry['lastname'] = $row->last_name;
                $entry['jobtitle'] = $row->title;
                $entry['dept'] = $row->department_name;
                $entry['deptid'] = $row->department_number;
                //$entry['ismanager'] = 

                $data[] = $entry;
            }
            return $data; 
```

我想检查员工是否存在于`'department_manager'`由员工编号连接的表中。因此，如果表“department_manager”中不存在该员工编号，那么我想在数组索引中插入`$entry[ismanager']`一个表示“否”的字符串，如果员工编号存在于表“department_manager”中，那么我想`$entry['ismanager']`保留字符串“是”。

但我对如何检查该员工是否在该表中感到困惑。我是在活动记录查询中还是在 foreach 循环中执行此操作？如果它是在 foreach 循环中完成的，那么在查询完成时如何进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:28:18.543

如果您使用的是 MySQL，我认为您正在寻找：

```
IFNULL(expr1,expr2) 
```

在哪里：

```
expr1 == null condition (in your case NULL)

expr2 == replacement value 
```

来源：[控制流函数](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T02:51:38.600

为什么有一个基本上是计算值的字段？这就像每个盒子的数量字段，盒子的数量，然后将总项目保存到第三个字段。永远不要将可以通过快速查询访问的内容保存到数据库中。在上面的查询中，就像将部门经理联接更改为左联接一样简单，包括部门经理 ID 并说明该字段在记录中是否为空白，则此人不是经理。使用 LEFT 连接将返回所有记录，无论它们是否在管理表中有条目。

添加：department_manager.emp_numb 到选择。

加入：

```
$this->db->join('department_manager', 'department_manager.emp_numb
= employees.emp_numb', 'left'); 
```

然后在foreach中：

```
if(!$row->department_manager.emp_numb)
 {
    this person is not a manager;
 } 
```

如果你觉得你真的必须有那个额外的字段，那么你仍然可以使用上面的方法填充它。

# java - 如何使用 JasperReports 从表中仅查看一条记录？

> ID：13848909
> 
> 赞同：3
> 
> 时间：2012-12-12T21:24:51.857
> 
> 标签：java, jasper-reports

我现在正在从事一个诊所项目，我需要为该项目打印特殊报告，例如特定患者的私人信息。

所以我确实为我的项目使用了数据库，并在数据库和 JDeveloper 之间建立了连接。我已将我的报告设计为由 JasperReport 5 程序打印，并在 Jasperreport 5 程序和 JDeveloper 之间建立了连接。现在我想通过 打印特定患者的报告`Patient_Id`。最后，我需要为我的数据库表中的一条记录打印报告，而不是数据库表中的所有记录。

这是连接 JasperReport 和 JDeveloper 的代码：

```
Connection con;

InputStream input=null;

Class.forName("oracle.jdbc.driver.OracleDriver");
String url = "jdbc:oracle:thin:@localhost:1521:orcl";
con = DriverManager.getConnection(url, "hr", "hr");
input=new FileInputStream(new File("report.jrxml")); 

JasperDesign jasperDesign;
jasperDesign=JRXmlLoader.load(input);

JasperReport jasperReport;
jasperReport=JasperCompileManager.compileReport(jasperDesign);
JasperPrint jasperPrint;
jasperPrint=JasperFillManager.fillReport(jasperReport,null,con);
JRViewer v=new JRViewer(jasperPrint);
v.setVisible(true);
JFrame fr2=new JFrame();
fr2.setSize(200, 200);
fr2.add(v);
fr2.setVisible(true);

input.close();
con.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:58:13.533

从提供的代码的外观来看，您已嵌入查询以在报告本身中获取患者信息。这很好。现在您需要微调该查询以获得单个结果。所以基本上你需要在报告中传递一个参数来给它病人ID，然后过滤结果。由于您已经在使用 sql，因此可以直接在 sql 中进行过滤（这是数据库擅长的，所以让它去做）。

以下是您需要遵循的步骤：

1.  在您的报告中创建一个名为`PATIENT_ID`type 的新参数`Integer`（或者可能更合适，具体取决于数据库中患者 ID 的字段类型）。
2.  在 中编辑您的查询，使其具有以下子句（或使用 and`WHERE`附加到现有子句）（假设患者 ID 在名为 的列中）：`WHERE``AND``Patient_id`
    `Patient_id = $P!{PATIENT_ID}`
3.  现在您需要在您的 java 代码中传入患者 ID。所以创建一个`Map`并将其添加到它，如下所示：

    ```
    Map<String, Object> parameters = new HashMap<String, Object>();
    parameters.put("PATIENT_ID", <the patient id value here>); 
    ```

    然后你需要把它传递给你对`fillReport`方法的调用，所以把它改成如下所示：

    ```
    jasperPrint=JasperFillManager.fillReport(jasperReport,parameters,con); 
    ```

就打印而言，`JRViewer`它已经内置了打印功能。所以用户只需要点击打印按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:00:05.623

[您应该在作为第二个参数传递给 fillReport](http://community.jaspersoft.com/questions/524537/example-java-program-call-jasper-report)的 Map 中指定您的条件，例如：

```
Map<String, Serializable> conditions = new HashMap<String, Serializable>();
conditions.put("PATIENT_ID", 1);
JasperPrint jasperPrint = JasperfillManager.fillReport(jasperReport, conditions, con); 
```

希望对您有所帮助，让我知道您的进展情况。

# php - PHP 只打印 CSV 的第一行

> ID：13848911
> 
> 赞同：1
> 
> 时间：2012-12-12T21:25:02.593
> 
> 标签：php, csv

我在读取 CSV 文件时遇到问题。到目前为止，我能够打开 CSV 并阅读第一行。

我的 CSV 文件如下所示（注意每一行）：

```
SMITH
PHIL
CHARLIE
SALLY
ETC 
```

我将 excel 中的文件另存为 CSV，但它在每个换行符上都会被赶上。

我当前的代码如下所示：

```
<?php 
$file = fopen('surnames.csv', 'r');

$data = fgetcsv($file);

echo "<pre>";
print_r($data);
echo "</pre>";

fclose($file);

?> 
```

电流输出为

```
Array
(
    [0] => SMITH
) 
```

任何帮助表示赞赏。我预期的输出显然是一个包含所有值的数组。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:28:01.600

您必须遍历每一行才能读取整个文件，否则您只会读取文件中的第一行：

```
$data = array();
while( ($line = fgetcsv($handle)) !== false) {
    $data[] = $line;
} 
```

现在`$data`将是一个多维数组，其中包含 CSV 文件中的每一行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T21:28:07.700

[`fgetcsv()`](http://us3.php.net/manual/en/function.fgetcsv.php)一次只能得到一条线。您的代码应该更符合以下内容：

```
<?php 
$file = fopen('surnames.csv', 'r');

echo "<pre>";
while( ($data = fgetcsv($file)) !== false ) {
    print_r($data);
}
echo "</pre>";

fclose($file); 
```

# sql - 在 SQL Server 2008 中是否有更有效的按日期分组方式

> ID：13848917
> 
> 赞同：2
> 
> 时间：2012-12-12T21:25:21.580
> 
> 标签：sql, sql-server-2008

我必须创建一个报告，其中 AccountSegment 作为行，2 周的日期范围作为列标题。列值将是表中具有相关段/日期范围的记录数的计数。

所以所需的输出看起来像这样：

```
AcctSeg  4/9/12-4/20/12   4/23/12-5/4/12   5/7/12-5/18/12
Segment1       100             200              300
Segment2       110             220              330
Segment3       120             230              340 
```

以下查询可以满足我的要求，但看起来效率低下且丑陋。我想知道是否有更好的方法来完成同样的事情：

```
SELECT
    AccountSegment = S.Segment_Name,
    '4/9/2012 - 4/20/2012' = SUM(CASE WHEN date_start BETWEEN '2012-04-09' AND '2012-04-20' THEN 1 END),
    '4/23/2012 - 5/4/2012' = SUM(CASE WHEN date_start BETWEEN '2012-04-23' AND '2012-05-04' THEN 1 END),
    '5/7/2012 - 5/18/2012' = SUM(CASE WHEN date_start BETWEEN '2012-05-07' AND '2012-05-18' THEN 1 END),
    '5/21/2012 - 6/1/2012' = SUM(CASE WHEN date_start BETWEEN '2012-05-21' AND '2012-06-01' THEN 1 END),
    '6/4/2012 - 6/15/2012' = SUM(CASE WHEN date_start BETWEEN '2012-06-04' AND '2012-06-15' THEN 1 END),
    '6/18/2012 - 6/29/2012' = SUM(CASE WHEN date_start BETWEEN '2012-06-18' AND '2012-06-29' THEN 1 END),
    '7/2/2012 - 7/13/2012' = SUM(CASE WHEN date_start BETWEEN '2012-07-02' AND '2012-07-13' THEN 1 END),
    '7/16/2012 - 7/27/2012' = SUM(CASE WHEN date_start BETWEEN '2012-07-16' AND '2012-07-27' THEN 1 END),
    '7/30/2012 - 8/10/2012' = SUM(CASE WHEN date_start BETWEEN '2012-07-30' AND '2012-08-10' THEN 1 END)
FROM
    dbo.calls C
    JOIN dbo.accounts a ON C.parent_id = a.id
    JOIN dbo.accounts_cstm a2 ON a2.id_c = A.id
    JOIN dbo.Segmentation S ON a2.[2012_segmentation_c] = S.Segment_Num
WHERE
    c.deleted = 0 
GROUP BY
    S.Segment_Name
ORDER BY
    MIN(S.Sort_Order) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:34:55.063

看起来不错，但我建议进行一项性能改进：

```
where c.deleted = 0 and
      date_start between  '2012-04-09' AND '2012-08-10' 
```

这会将聚合限制为您需要的行。. . 除非您希望列出的所有内容都包含空数据。

我倾向于添加`else 0`到`case`语句中，所以出现的是 0 而不是 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:07:01.627

@PaulStock，很高兴这样做。

这种技术发挥了 RDMS 的优势，即数据检索和集合操作 - 将迭代留给其他更优化的编程语言，如 C#。

首先，您需要一个`IndexTable`，我将我的保存在主数据库中，但如果您没有对此的写访问权，请务必将其保存在您的数据库中。

它看起来像这样：

```
Id
 0
 1
 2
...
n 
```

对于所有场景来说，哪里`n`是一个足够大的数字，100,000 很好，1,000,000 更好，10,000,000 甚至更好。列`id`当然是集群索引的。

我不会将它直接与您的查询相关联，因为我并没有真正理解它，而且我懒得解决它。

相反，我会将其与名为 的表相关联`Transactions`，我们希望在该表中汇总每天（或每周或每月等）发生的所有事务：

```
Date                       Amount
2012-18-12 04:58:56.453       10
2012-18-12 06:34:21.456      100
etc 
```

以下查询将按天汇总数据

```
SELECT  i.Id, SUM(t.Amount) AS DailyTotal
FROM    IndexTable i
        INNER JOIN
        Transactions t ON i.Id=DATEDIFF(DAY, 0, t.Date)
GROUP BY i.Id 
```

该`DATEDIFF`函数返回两个日期之间的日期部分数，在本例中为 1900-01-01 0:00:00.000（SQL Server 中的 DateTime = 0）和事务日期之间的天数（顺便说一下，已经有 41,261 天从那时起 - 看看我们为什么需要一张大桌子）

同一天的所有交易将具有相同的编号。更改为周、月或秒（一个非常大的数字）就像更改日期部分一样简单。

当然，您可以输入比这晚的开始日期，只要它早于您感兴趣的数据，但这对性能几乎没有影响。

我在`INNER JOIN`这里使用了一个，所以如果在给定的日期没有交易，那么我们没有行，但是 a`LEFT JOIN`会将这些空日期作为总计（如果你想得到 0，请`NULL`使用语句。`ISNULL`

使用标准化数据，您可以`PIVOT`根据需要获得所需的输出。

# xamarin.ios - Monotouch 设置应用程序捆绑版本

> ID：13848919
> 
> 赞同：1
> 
> 时间：2012-12-12T21:25:29.877
> 
> 标签：xamarin.ios, version

我正在尝试为我的 MonoTouch 项目设置应用程序版本，但我似乎没有找到正确的位置。

我尝试在以下情况下将版本设置为 2.0.0：

*   解决方案>常规>主要设置>版本字段

*   Project>General>Main Settings>Version 字段（可以从解决方案继承）

*   Info.plist>iOS 应用程序目标>版本字段

如果我使用检查版本

```
 string currentVersion = NSBundle.MainBundle.InfoDictionary["CFBundleVersion"].ToString(); 
```

我只返回 1.0 作为版本。我错过了设置应用程序版本的地方，还是需要使用不同的方法来检查 BundleVersion？

这是我正在运行的版本信息

```
MonoDevelop 3.0.5
Installation UUID: 554868b3-3202-4955-bf88-38a3e5949a79
Runtime:
Mono 2.10.9 (tarball)
GTK 2.24.10
GTK# (2.12.0.0)
Package version: 210090011
Apple Developer Tools:
 Xcode 4.5.1 (1842)
 Build 4G1004
Monotouch: 6.0.6 (Evaluation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:56:47.937

在我自己的`Info.plist`文件中进行相同的更改与您提供的代码完美配合，即我确实得到了预期的`2.0.0`字符串。由于您使用的是评估版，因此我还在 iOS 模拟器中进行了尝试。

我确实有更新版本的软件——但它们并没有太大的不同，我不记得在这些领域有什么变化。

你能看看（也许在你的问题中添加它）你的内容`Info.plist`吗？它应该是一个 XML 文件（MonoDevelop 使用的默认格式）并且`2.0.0`里面应该有你的字符串。

如果这不起作用，请压缩一个这样做的小样本并将其附加到[错误报告](http://bugzilla.xamarin.com)中，因为可能有一些东西总是不会更新？！？

# javascript - 容易出错的jquery扩展

> ID：13848922
> 
> 赞同：0
> 
> 时间：2012-12-12T21:25:43.407
> 
> 标签：javascript, jquery

任何熟悉以下模式的人：

*   最安全地检查现有的 jQuery 扩展？
*   如果代码无法执行，如何安全退出。

像

```
(function($){
    if (jQuery.fn.pluginName)
    ......
    }
})(jQuery); 
```

10 倍，BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:32:14.527

$.fn 命名空间填充了函数。如果插件存在，您可以使用它

```
if ($.fn.myPlugin instanceof Function) {
    // the plugin exists
} else {
    // the plugin does not exist
} 
```

此外，如果这还不够，您还可以检查使用

```
if (typeof $.fn.myPlugin === 'function') {
    // The plugin exists
} else {
    // The plugin does not exist
} 
```

# css - 宽度 procent 和溢出滚动

> ID：13848924
> 
> 赞同：-1
> 
> 时间：2012-12-12T21:25:51.007
> 
> 标签：css, scroll, width, overflow

我有一个 div，里面有一些代码（比如 textarea），我想从父元素修复到 99%。没关系，但是如果代码太大，我需要放置 overflow-x:scroll 以免从父元素中退出。

因为我使用宽度：99%，所以我不能使用溢出-x：滚动。

我不想放 width:700px 或 500 或其他什么，因为我现在没有客户端分辨率，我真的想看到这个 div 的最大宽度。

对不起我的语言不好。

请给点建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:15:16.140

请原谅我的错误，因为我没有给出所有代码。

Stil 不起作用，因为父元素 (table -> td) 可以灵活地：

```
<style> 
div {width:99%; border:1px solid grey; white-space:pre; overflow:auto;}
</style>

<table cellspacing="0" cellpadding="0">
<tr>
<td> some stuff here </td>
<td>
<div>
test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test 
</div>
</td>
</tr>
</table> 
```

如果有人有其他建议...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:48:27.613

抱歉，我忘记了空格：pre。

试试这段代码，你会看到：

```
<style>
div {width:99%; border:1px solid grey; white-space:pre; overflow:x-scroll}
</style>

<div>
test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test 
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:19:21.507

像这个？

```
div {width:99%; border:1px solid grey; white-space:pre; overflow:auto;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:40:17.887

```
 <style>
    div {width:99%;
 border:1px solid grey;
 white-space:pre;
 overflow:x-scroll}
    </style>

    <div>
    test test test test test
    </div> 
```

# ios - 是否可以分发 iOS 应用程序以在 MacOS 上进行模拟器测试？

> ID：13848929
> 
> 赞同：2
> 
> 时间：2012-12-12T21:26:06.133
> 
> 标签：ios, ios-simulator

我正处于 iOS 应用程序的早期 alpha 阶段，我希望能够将它部署给我公司内的一些非技术人员以获得早期反馈。现在将其部署到物理设备还为时过早，而且并非所有人都拥有它们。

我想做的是以某种方式将 iOS`.app`文件安装到模拟器应用程序中，并将其捆绑到一个 MacOS`.app`文件中，我可以通过电子邮件发送给人们并让他们通过单击它来运行。

第二个最好但可以接受的方法是让用户安装 Xcode，并有办法向他们发送 iOS`.app`文件，并有某种脚本可以将应用程序加载到已安装的模拟器应用程序中。

这似乎应该是可能的，但我找不到任何方法来完成它。

**注意**：网上有很多关于 TestFlight 或 Over-The-Air 应用程序的建议，但这涉及物理硬件，这**不是**我在这里想要做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:52:49.683

按照[这个 SO answer](https://stackoverflow.com/a/3493270/349974)中的想法，我使用[了 SimLaunch](https://github.com/landonf/simlaunch)，它将您的 iOS 打包`.app file`到 MacOS`.app`文件中。接收者必须安装 Xcode，但一旦完成，他/她只需运行应用程序，应用程序就会调用模拟器，并安装您的 iOS 应用程序。它完全有效。

一件可能很棘手的事情：当您运行 SimLaunch 时，它会询问您 iOS 应用程序的位置。当您告诉它时，它会在同一位置创建输出 MacOS 应用程序，文件名类似于`YourApp (iPhone Simulator).app`，但没有给出任何消息告诉您这一点，并且它说正在运行，所以看起来该应用程序只是被冻结了。事实上，它已经完成并等待更多的工作，但我花了一段时间才意识到这一点。

# python - 带有基于文件的电子邮件后端服务器的 Django 测试框架

> ID：13848938
> 
> 赞同：8
> 
> 时间：2012-12-12T21:26:30.503
> 
> 标签：python, django, unit-testing, automated-tests, functional-testing

我在 Django 框架中制定了测试用例。

用例：我正在使用 API 通过向他们发送电子邮件来注册用户，当他们点击电子邮件中提供的链接时，他们的帐户就会被激活。

在我的 settings.py 我正在使用

```
EMAIL_FILE_PATH  ='django.core.mail.backends.filebased.EmailBackend' 
```

它指向本地目录。

从 Eclipse 运行 PyUnit 测试用例时，一切正常文件。为发送的每封电子邮件生成文本文件

但是，当我使用

```
python ./manage.py test <component_name> 
```

文件不会生成。

任何见解当我执行测试用例时`./manage.py`和使用时有什么区别`pyUnit`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-24T16:43:47.457

如果您想使用特定的电子邮件后端，可以在 Django 中覆盖此方面。

在 django.test.utils 中，当 Django 设置测试环境时，Django 会将电子邮件后端更改为 Django 测试文档中提到的 locmem：

```
def setup_test_environment():
...
    mail.original_email_backend = settings.EMAIL_BACKEND
    settings.EMAIL_BACKEND = 'django.core.mail.backends.locmem.EmailBackend' 
```

因此，如果您想启用发送电子邮件进行测试，您只需将设置更改为您想要的。

```
from django.test.utils import override_settings

@override_settings(EMAIL_BACKEND='django.core.mail.backends.filebased.EmailBackend')
class MyTest(TestCase):
    # your test case 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T21:32:31.657

简单的答案：

如果不设计自己的电子邮件系统，就无法做到这一点，但这可能很愚蠢。我建议做其他事情来验证代码是否成功，而无需发送电子邮件。例如，运行代码，假设用户单击链接并创建 RequestFactory 以获取/发布链接以运行与其关联的视图代码。

从[Django 测试应用程序](https://docs.djangoproject.com/en/dev/topics/testing/tools/#email-services)：

> 电子邮件服务
> 
> ```
> "If any of your Django views send email using Django's email functionality,
> you probably don't want to send email each time you run a test using that
> view. For this reason, Django's test runner automatically redirects all
> Django-sent email to a dummy outbox. This lets you test every aspect of
> sending email -- from the number of messages sent to the contents of each
> message -- without actually sending the messages." 
> ```

# css - IE7中不显示嵌套表

> ID：13848940
> 
> 赞同：0
> 
> 时间：2012-12-12T21:26:39.927
> 
> 标签：css, html, html-table, cross-browser

我在一个表中有一个嵌套表，`nestedTable`即使它存在于 html 中并且显示不是没有，它也不会显示在 IE7 中。下面是我的 html，它似乎在 Firefox、Chrome 和 IE8 中有效并且可以工作：

```
<table id="myTable">
  <thead> ... </thead>
   <tbody class="myTbody1">
    <tr class="details">
     <td>
       <table id="nestedTable">
        <thead> 
         <tr>
          <th> Col1 </th>     
          <th> Col2 </th>     
         </tr>
        </thead>    
        <tbody class="head">    
         <tr class="nestedRow">              
          <td> Data</td>      
          <td> Data</td>
         </tr>
        </tbody>
      </table>
     </td>
    </tr>
  </tbody>

  <tbody class="myTbody2">..</tbody>
  <tbody class="myTbody3">..</tbody>
 </table> 
```

# python - Python 中的代码，在 Node.js 和 Socket.IO 中通信，在 HTML 中呈现

> ID：13848943
> 
> 赞同：18
> 
> 时间：2012-12-12T21:26:50.863
> 
> 标签：python, html, node.js, socket.io

您有一个 Python 脚本`diagnosis.py`，可以生成基于事件的实时数据。使用 Node.js，您可以将其作为子进程启动并捕获其输出，然后使用 Socket.IO 将其发送到客户端并使用 HTML 呈现。

**服务器**

```
var util  = require('util'),
    spawn = require('child_process').spawn,
    ls    = spawn('python', ['diagnosis.py']);

var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(80);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
    ls.stdout.on('data', function (gdata) {
      socket.emit('news', gdata.toString());
    });
}); 
```

**客户**

```
<html>
    <head>
        <script src="/socket.io/socket.io.js"></script>
        <script>
          var d = "";
          var socket = io.connect('http://localhost');
          socket.on('news', function (data) {
            d += data;
            document.getElementById('data').innerHTML = d;
            console.log(data);
          });
        </script>
    </head>
    <body>
        <div id="data"></div>
    </body>
</html> 
```

**问题**

这很棒，但是如果您正在寻找与 Socket.IO 相同的 HTML-Node.js 通信能力，但在 Node.js 和 Python 之间寻找呢？你会怎么做？那里没有 Web 服务器，因此 Socket.IO 没有多大意义，并且通过裸 TCP 进行通信并不能提供相同的功能/优雅。如何实现 Node.js 和 Python 之间的全双工通信？

![在此处输入图像描述](../Images/5cd7646d1783e2206c0976fa97c08318.png)

**更新**我回答了我自己的问题，但我对另一种方法持开放态度。RPC 并不能完全满足我的要求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T21:36:22.987

[Apache Thrift](http://thrift.apache.org/)是一种在所有主要语言之间编写 RPC 代码的非常棒的方式。你编写一个通用的 Thrift 规范来声明类型和服务，然后代码生成器为你想要的语言创建绑定。您可以使用 api 在节点和 python 代码库之间调用方法。

在更通用的低级方法中，[ZeroMQ](http://www.zeromq.org/)是一个消息队列库，它也支持所有主要语言。有了这个，你可以设计你自己的解决方案来实现你想要的通信方式（不仅仅是纯粹的 RPC）。它具有请求/回复、推送/拉取、发布/订阅和配对的模式。它为您提供了足够的工具来组合任何类型的可扩展系统。

我都用过，它们都是很好的解决方案。

作为一个非常粗略的例子，Thrift 规范可能是这样的。假设您想将事件从 python 传递到 node.js，对其进行处理并返回一些响应：

*myspec.thrift*

```
struct Event {
    1: string message; 
}

service RpcService {
    string eventOccurred(1:Event e)
} 
```

这定义了一个`Event`使用单个字符串成员调用的数据结构来保存消息。然后一个名为的服务`RpcService`定义一个调用的函数`eventOccured`，该函数需要一个`Event`作为参数，并将返回一个字符串。

当您为 python 和 node.js 生成此代码时，您可以使用 python 的客户端代码和 node.js 的服务器端代码

*Python*

```
from myrpc import RpcService, ttypes

# create a connection somewhere in your code
CONN = connect_to_node(port=9000)

def someoneClickedSomething():
    event = ttypes.Event("Someone Clicked!")
    resp = CONN.eventOccurred(event)
    print "Got reply:", resp 
```

*节点.js*

```
// I don't know node.js, so this is just pseudo-code

var thrift = require('thrift');
var myrpc = require('myrpc.js');

var server = thrift.createServer(myrpc.RpcService, {
  eventOccurred: function(event) {
    console.log("event occured:", event.message);
    success("Event Processed.");
  },
});
server.listen(9000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T21:36:44.407

您可以查看一些消息系统，例如 0mq [http://www.zeromq.org/](http://www.zeromq.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T23:21:20.840

我使用受这个[问题](https://stackoverflow.com/questions/6692908/formatting-messages-to-send-to-socket-io-node-js-server-from-python-client?rq=1)启发的库变成`diagnosis.py`了 Socket.IO 客户端。这样我可以将实时数据发送到 Node.js Socket.IO 服务器：

```
socketIO.emit('gaze', ...) 
```

然后让它`socket.broadcast.emit`向所有 Socket.IO 客户端（浏览器和`diagnosis.py`）发送数据。

RPC 可能是跨语言开发更标准的方法，但我发现当目标是交换数据时这样做有点过头了。它也不支持开箱即用的事件 IO。

**2013 年 1 月更新**由于`socket.broadcast.emit`会产生大量不必要的流量，因此我试图找到一种更好的方法。我想出的解决方案是使用我提到的基本 python Socket.IO 客户端库支持的命名空间。

**Python**

```
self.mainSocket = SocketIO('localhost', 80)
self.gazeSocket = self.mainSocket.connect('/gaze')
self.gazeSocket.emit('gaze', ...) 
```

连接到注视命名空间。

**节点.js**

```
var gaze = io.of('/gaze').on('connection', function (socket) {
    socket.on('gaze', function (gdata) {
        gaze.emit('gaze', gdata.toString());
    });
}); 
```

这会将接收到的数据仅发送到连接到凝视命名空间的客户端。

**浏览器**

```
var socket = io.connect('http://localhost/gaze');
socket.on('gaze', function (data) {
    console.log(data);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T21:42:23.957

如果您只是在寻找在套接字之上为您提供简单协议的东西，那么您不必处理缓冲和分隔消息以及所有这些东西，两个明显的选择（取决于您的数据类型）重新尝试发送）是网络字符串和 JSON-RPC。两种语言都有多种库可供选择，但您最终可以得到这样简单的代码：

```
class MyService(Service):
    # … code to set up the newsdb
    def getnews(self, category, item):
        return self.newsdb.get(category, item)
myService = MyService(6000)

myService = Service(6000)
// … code to set up the newsdb
myService.getnews = function(category, item, callback) {
    callback(this.newsdb.get(category, item);
} 
```

# vb.net - VB中没有返回类型的函数

> ID：13848949
> 
> 赞同：3
> 
> 时间：2012-12-12T21:27:14.720
> 
> 标签：vb.net, vb6

我对 Visual Basic 6.0 不太熟悉，也没有安装 VB 编译器，但我正在查看一些 VB 代码以进行一些调试并看到：

```
Private Function IsFieldDeleted(oLayoutField As Object)
    Dim oColl As Collection
    Set oColl = GetFieldIdsForField(oLayoutField)

    IsFieldDeleted = (oColl.Count = 0)

    Set oColl = Nothing
End Function 
```

在其他函数中，我看到他们用“As”定义返回类型，例如“As Boolean”，但这个没有“As”：D，然后他们如何使用它是这样的：

```
 If Not IsFieldDeleted(oRptField.GetUCMRLayoutField) Then
      Call oCollection.Add(oRptField, oRptField.ObjectKeyString)
      Call AddToNewLineSeperatedString(sCaseFldDescMsg, oFld.FieldDescription)
  End If 
```

这是如何工作的？是不是就像重写它并说函数返回一个整数并比较返回类型是0还是1？或者那里还有其他隐藏的技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:31:08.520

当没有指定类型时，在 VB.NET 中它假定`Object`返回类型。在 VB6 中，它假定`Variant`. 在 VB.NET 中，您可以通过 turn 使事情变得更加明显`Option Strict On`，但我不相信该选项在 VB6 中可用。

实际上，返回的值仍被键入为 a `Boolean`，但您将返回的值视为 a `Variant`。所以，要“正确”地做到这一点，你真的应该像这样转换返回值：

```
If Not CBool(IsFieldDeleted(oRptField.GetUCMRLayoutField)) Then
   ....
End If 
```

调用`CBool`将值转换为 a`Boolean`而不是 a `Variant`。但是，这是不必要的，因为 VB 将使用后期绑定来确定返回值的类型是布尔值。

在这种情况下，最好的办法是将函数更改为`As Boolean`. 这样做不会破坏任何现有代码，因为这就是它曾经返回的全部内容。但是，如果它是 DLL 中的公共成员，则会破坏兼容性。

# c++ - 通过 itemAt() 或 collidingItems() 返回自定义 QGraphicsItem

> ID：13848950
> 
> 赞同：0
> 
> 时间：2012-12-12T21:27:17.790
> 
> 标签：c++, qt, qgraphicsitem, qgraphicsscene

我创建了自己的课程：

```
class myTile : public QGraphicsItem{} 
```

我将这些添加`myTile`到`QGraphicsScene`. 每个`myTile`都有一个值和一个获取该值的方法。现在我想得到一个`myTile`并读取它的值。

我试过`collidingItems()`and `itemAt()`，但问题是：这两个方法只能返回`QGraphicsItem`. 中`QGraphicsItem`没有我的返回值方法`myTile`。有没有办法获得自定义物品？
先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:30:01.747

```
myTile *t = (myTile*)myScene->itemAt(i);
t->myMethod(); 
```

# php - 通过 PHP 的 shell_exec() 从网页执行 bash 脚本，这需要其他用户的权限？

> ID：13848956
> 
> 赞同：1
> 
> 时间：2012-12-12T21:27:50.283
> 
> 标签：php, linux, apache, bash, centos

我在 Centos 机器上有几个 bash 脚本，我用它们来执行基本的服务器管理工​​作，例如重新启动服务等。我以标准用户身份运行这些脚本，同时也是脚本的所有者。

我尝试使用 apache 用户在 PHP 中使用 shell_exec() 运行这些，但它根本不起作用 - 我猜它没有足够的权限（即使使用 775 并且在正确的组中！）运行我想要的一切。

我已经尝试编辑 sudoers 文件，授予 apache 运行脚本调用的权限，但它仍然无法正常工作，并且没有我可以看到的错误消息。

有什么想法吗？如何从需要其他用户运行的网页中触发脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:51:43.937

确保安全模式已关闭。还要验证用户是您期望的用户：

```
<?php echo exec('whoami'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:05:46.703

1.  检查哪个用户正在运行 apache（对于 debian，它是 www-data）
2.  在 sudoers 列表中添加 www-data 以执行您喜欢的文件
3.  检查 /etc/passwd 中哪个 shell 有 www-data 用户（您需要提供有效的 shell）
4.  使用 /bin/bash -x 运行脚本（它肯定会输出）

# mongodb - MongoDB Query - 限制名称匹配模式的字段

> ID：13848959
> 
> 赞同：3
> 
> 时间：2012-12-12T21:27:59.713
> 
> 标签：mongodb, pymongo

我已经阅读了我能找到的关于 MongoDB 中的投影的所有内容。我希望这很简单，但由于 Mongo 查询的压倒性灵活性，我只是错过了它。

在我们的 MySql 数据库中，我们采用了一种业务实践，即在“隐藏”字段前加上下划线。我们的应用程序知道如何隐藏这些字段。

将一些数据移动到 mongo，我需要检索文档，*省略所有下划线前缀字段*。当然，这应该在查询中完成，而不是在检索后进行文档操作。

$regex、$in、$all 等所有运算符似乎都适用于*values*。我需要构建一个基于名称忽略未知数量字段的投影。就像是：

```
db.coll.find({}, {"_*": 0}) 
```

当然这不起作用，但解释了这个想法。

我应该注意：这是必要的，因为我们的应用程序用户可以编辑文档，所以我不知道架构可能是什么样子。我确实知道我们的“内部”字段以 _ 为前缀，并且需要通过编辑器的遗漏来保护这些字段。

希望这很容易...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:13:49.933

你可以有一个单独的字段作为`hidden_fields`或东西。请参阅以下架构。

```
{_id: 'myid1', hidden_fields: {"_foo": "bar", "_foo2": "bar2"}, key1: value1 ...} 
```

现在在上面的架构的基础上做，

```
db.collection.find({ ... }, {hidden_fields: 1}) 
```

这将显示隐藏字段。您还可以在子文档中的字段上建立索引，因此也不会损失性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:00:08.810

没有这个功能是有充分理由的。实现这种功能将是一场噩梦，它不会扩展，也不会很快。

目前最好的方法是设置一个键值存储，如：

```
{
    fields: [
        {k: "_ghhg", v: 5},
        {k: "ghg", v: 6}
    ]
} 
```

然后，您将`$regex`在`k`字段中了解哪些键名（字段）中有下划线。

作为一条建议，我强烈建议使用 prefixed `$regex`s ，因为它们在使用您创建的索引时更有效，即对于您显示的查询：`^_*`。

> 将一些数据移动到 mongo，我需要检索文档，省略所有下划线前缀字段。当然，这应该在查询中完成，而不是在检索后进行文档操作。

我会亲自做这个客户端，它将比数据库端快 100 倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:50:22.497

正如@Sammaye 所提到的，MongoDB 不以自然/有效的方式支持这种类型的查询。

但是，如果您并不总是需要内部数据，为了优化性能，我建议您考虑创建两个文档，一个包含始终可用的数据，另一个包含“_internal”字段。MongoDB 的读写会更少，在客户端上的操作也会更少。这类似于在 RDBMS 中有两个表（一个具有公共数据，一个具有私有数据）。

这也可以通过仅更新整个文档（如果可能在您的场景中）来简化对非内部数据的更新。

当然，您也可以删除额外的“_”字符，因为这只会在 BSON 数据中添加额外的不必要的字符。:)

# sql - 有没有办法在不升级到 Enterprise 的情况下在 SQL Server 中模拟在线索引重建？

> ID：13848960
> 
> 赞同：2
> 
> 时间：2012-12-12T21:28:00.140
> 
> 标签：sql, sql-server, indexing

我们目前有一个每周运行一次的 SQL 代理作业，以识别高度碎片化的索引并重建它们。对于大型表上的某些大型索引，这最终会导致系统超时，因为索引在重建期间不可用。

我们已经确定了一种策略，可以显着减少发生的碎片化，但在一段时间内不会实施，也不能涵盖所有内容。

我们签入升级到允许在线索引重建的企业版。然而，此时的成本对我们来说是令人望而却步的。

索引并没有真正改变那么多，所以我们可以假设它们是静态的，至少在大多数情况下是这样。

我确实设想了一种我们可以模拟在线索引重建的方法。它可以按如下方式工作

对于标识的每个大型索引，运行脚本以：

*   检查碎片，如果超过某个阈值则继续。
*   创建一个名为 CurrentIndex_TEMP 的新索引。
*   在索引上启动重建。
*   删除临时索引。

似乎一旦构建了临时索引，就可以在不导致任何停机的情况下重新构建另一个索引，因为 SQL Server 将拥有另一个索引，然后可以在本来使用另一个查询的查询上使用该索引。

对每个索引进行迭代有望最大程度地减少总体索引大小的增加，因为每个临时索引都将在创建任何其他临时索引​​之前被删除。

该策略还将保留索引的历史数据。我最初考虑的策略是先重命名当前索引，然后使用原始名称重新创建它，然后删除已重命名的索引。然而，这将导致历史的损失。

所以，我的问题...

**这是一个可行的策略吗？我可能会遇到任何重大问题吗？** 我知道这需要不时进行一些人工监督，但我现在愿意接受这一点。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:40:16.837

任何带有锁定表的离线索引重建，因此您不会通过创建重复索引获得任何收益。

付出巨大的努力，您就可以模拟在线索引重建。您必须一次重建表上的所有索引。

1.  `T`创建具有相同架构 (" `T_new`")的表的副本
2.  重命名`T`为`T_old`
3.  创建一个`T`定义为`select * from T_old`并设置`INSTEAD OF`DML 触发器的视图，该触发器在两者上执行所有 DML`T_old`和`T_new`
4.  在后台作业中从批量复制`T_old`到`T_new`使用`MERGE`语句
5.  最后，复制完成后，进行一些重命名和删除，使`T_new`新的`T`

这需要非常高的努力和良好的测试。但是你可以通过这个在线实现几乎任意的模式更改。

# objective-c - 实现文件看不到头文件中声明的常量

> ID：13848964
> 
> 赞同：0
> 
> 时间：2012-12-12T21:28:07.770
> 
> 标签：objective-c

我在头文件中声明的常量的实现文件（已注释掉）中收到错误消息。为什么编译器会这样做？

提前致谢。

头文件：

```
#import <UIKit/UIKit.h>

#define kFilling Component 0
#define kBread Component 1

@interface BIDDoubleComponentViewController : UIViewController
<UIPickerViewDelegate, UIPickerViewDataSource>

@property (strong, nonatomic) IBOutlet  UIPickerView *doublePicker;
@property (strong, nonatomic) NSArray *fillingTypes;
@property (strong, nonatomic) NSArray *breadTypes;

- (IBAction) buttonPressed;

@end 
```

实现文件：

```
#import "BIDDoubleComponentViewController.h"

@implementation BIDDoubleComponentViewController

- (IBAction)buttonPressed
{
    NSInteger fillingRow = [self.doublePicker selectedRowInComponent:kFillingComponent]; // Use of undeclared identifieer 'kFillingComponent'
    NSInteger breadRow = [self.doublePicker selectedRowInComponent:kBreadComponent]; // Use of undeclared identifieer 'kBreadComponent'

    NSString *filling = self.fillingTypes[fillingRow];
    NSString *bread = self.breadTypes[breadRow];

    NSString *message = [[NSString alloc] initWithFormat:@"Your %@ on %@ will be right up.", filling, bread];

   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Thank you for your order"
                                                message:message
                                               delegate:nil
                                      cancelButtonTitle:@"Great"
                                      otherButtonTitles:nil];
    [alert show];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.fillingTypes = @[@"Ham", @"Turkey", @"Peanut Butter", @"Tuna salad", @"Chicken salad", @"Roast Beef", @"Vegemite"];
    self.breadTypes = @[@"White", @"Whole Wheat", @"Rye", @"Sour Dough", @"Seven-Grain"];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark
#pragma mark Picker Data Source Methods

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    if(component == kBreadComponent) // Use of undeclared identifieer 'kFillingComponent'
    {
        return [self.breadTypes count];
    } else {
        return [self.fillingTypes count];
    }
}

#pragma mark Picker Delegate Methods

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    if(component == kBreadComponent) // Use of undeclared identifieer 'kBreadComponent'

    {
        return self.breadTypes[row];
    } else {
        return self.fillingTypes[row];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:30:08.263

你的定义很糟糕。你有

```
#define kBread Component 1 
```

但是你正在使用`kBreadComponent`. 它`#define`正在做的是定义一个称为令牌的令牌`kBread`，该令牌在预处理期间对令牌进行评估`Component 1`。您可能打算使用

```
#define kBreadComponent 1 
```

# c# - 尝试使用 sqlite-net 通过 PrimaryKey 选择时，SQLite 没有结果

> ID：13848966
> 
> 赞同：2
> 
> 时间：2012-12-12T21:28:10.483
> 
> 标签：c#, sqlite, windows-8, primary-key, sqlite-net

对于此示例，我定义了以下类，该类保存在 SQLite 数据库中：

```
[SQLite.AutoIncrement, SQLite.PrimaryKey, SQLite.Indexed]
public int ID { get; set; }
[SQLite.Indexed]
public string ImageName { get; set; } 
```

我正在使用 sqlite-net 提供的插入命令，它可以工作：

```
SQLiteAsyncConnection CurrentConnection = new SQLiteAsyncConnection("DB");
int result = await CurrentConnection.InsertAsync(this); 
```

之后，我试图从 SQLite DB 中选择数据。

```
List<Image> result = new List<Image>();
if (ImageName != null)
{
    query = CurrentConnection.Table<Image>().Where(i => i.ImageName == ImageName);
    result = await query.ToListAsync();
}
if (ID != null && ID > 0)
{
    query = CurrentConnection.Table<Image>().Where(i => i.ID == ID);
    result = await query.ToListAsync();
}
if (result.Count > 0)
{
    LoadFromResult(result[0]);
    return;
} 
```

通过 ImageName 选择时，一切正常，我得到了我需要的结果。但是，当尝试按 ID 选择时，不会选择任何结果。

我知道具有给定 ID 的图像存在，因为我刚刚插入它并随后检查了 ID，但由于某种原因，这不起作用。

我是不是完全失明了，在这里漏掉了一个小字母？有没有人使用 SQLite-net 尝试通过主键选择？

//编辑

也试过这个，但没有奏效：

```
var query1 = await CurrentConnection.QueryAsync<Image>("select * from Image where ID = ?", ID);
if (query1.Count > 0)
{
    LoadFromResult(query1[0]);
    return;
} 
```

//编辑 2

我对此有点预感 - 当我插入图像时，ID 确实设置为某个 ID，但是当我选择数据库中的所有图像时，它们的 ID 都是 0。

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:13:34.953

我认为您的问题可能与您班级的 AutoIncrement 属性有关。尝试删除 AutoIncrement 属性，看看是否可以通过 id 找到图像。

我认为正在发生的事情是 AutoIncrement 属性正在设置 Id，覆盖您创建的 id。

例如

假设您使用以下命令创建 MyImage 的实例：

MyImage i = new MyImage() { Id= **5** , ImageName="imageName"}

当您运行 CurrentConnection.InsertAsync(i) （在空表上）时，插入到数据库中的条目的 ID 为**1**，而不是**5**。

希望有帮助

# php - 使用php通过curl发送帖子数据

> ID：13848967
> 
> 赞同：0
> 
> 时间：2012-12-12T21:28:16.053
> 
> 标签：php, session, post, curl

我在这个脚本中有问题。我面临的问题是，当我在 cc_no = 3654785698568 之类的变量中发送大量数据时，我在检查它的文本文件上得到空白。其他变量工作正常。

```
session_set_cookie_params(0);
session_start();

echo $cc_name = $_SESSION['card_name'];
echo $cc_no = $_SESSION['card_no'];
echo $cc_cvv2 = $_SESSION['cvv2'];
echo $cc_expiry = $_SESSION['expiry'];

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,"http://example.com/db/get.php");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,
            "cc_name=$cc_name&cc_no=$cc_no&cc_cvv2=$cc_cvv2&cc_expiry=$cc_expiry");

// receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$server_output = curl_exec ($ch);

curl_close ($ch); 
```

捕获其他服务器上的值的代码。

```
<?php

$fp = fopen("formdata.txt", "a");
$cc_name1 = $_POST['cc_name'];
$cc_no1 = $_POST['card_no'];
$cc_cvv21 = $_POST['cc_cvv2'];
$cc_expiry1 = $_POST['cc_expiry'];

$data = "$cc_name1 | $cc_no1 | $cc_cvv21 | $cc_expiry1 \n";

fwrite($fp, $data);
fclose($fp);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:40:00.670

```
$cc_no1 = $_POST['card_no']; 
```

应该：

```
$cc_no1 = $_POST['cc_no']; 
```

编辑：

我*真的*希望这只是为了学习。不应以这种方式处理 CC，尤其是在标准 http 上。

# php - 会话变量在弹出窗口中丢失？

> ID：13848969
> 
> 赞同：0
> 
> 时间：2012-12-12T21:28:26.063
> 
> 标签：php, jquery, session, cookies, laravel

我有一个小书签，可以在外国网页上注入一个按钮。单击该按钮时，会出现一个包含我网站页面的弹出窗口。

*我正在使用一个名为 Laravel 的 PHP 框架，使用 Chrome 浏览器进行了测试*

**问题：**当我在弹出窗口中检查用户是否从源自我的网站的页面登录时，它总是返回用户未登录。

```
if( Auth::guest() ) {
    echo "Not logged in";
} else {
    echo "Logged in";
} 
```

但是，当我直接访问同一页面时（不是在从另一个网站打开的弹出窗口中），我可以看到我已登录！

这里有什么问题，如何解决？

* * *

**弹出 JS 代码**

```
var popupOptions = 'status=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,location=no,toolbar=no,menubar=no,width=632,height=295,left=0,top=0';
window.open(' http://www.domain.com/controllername/add?url='+url, '_blank', popupOptions); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T18:12:11.697

你不应该有两个同名的 cookie。看起来弹出窗口正在设置另一个具有相同名称但不同域的 cookie 覆盖应该用于 domain.com 的有效 cookie

# sql-server - 如何编写表达式以仅显示 5 天内的工作日

> ID：13848970
> 
> 赞同：0
> 
> 时间：2012-12-12T21:28:45.557
> 
> 标签：sql-server, vba, reporting-services, reportbuilder

我正在 Microsoft SQL Server Report Builder 中处理报告，我正在尝试编写一个表达式，该表达式仅显示从今天起接下来的 5 个工作日（即一个表有 5 列，它从今天开始并继续进行接下来的五个业务天）。如果这一天是星期六或星期日，使用我的[枚举值](http://msdn.microsoft.com/en-us/library/82yfs2zh%28v=vs.80%29.aspx)将使用该函数返回 6 或 7 `Weekday`，那么您将跳到下一个工作日。目前我在今天日期的列之后的第一列有这个表达式

```
IIf(Weekday(DateAdd("d",1,Today()),2)=6,DateAdd("d",3,Today()),
(IIf(Weekday(DateAdd("d",1,Today()),2)=7,DateAdd("d",2,Today()),
DateAdd("d",1,Today())))) 
```

它不起作用。我相信这是因为如果我们有像周三、周四或周五这样的日子，周末的日子就没有足够的日子被跳过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:33:31.380

如果我们可以假设您将从工作日开始，那么我们可以使用一个简单的公式：

```
=IIF(6 - WeekDay(Today()) - X < 0, DateAdd("d", X + 2, Today()), DateAdd("d", X, Today())) 
```

其中`X`是该列距开始日期的天数。

不幸的是，如果开始日期是周六或周日，它就会崩溃，但如果您只需要在工作日使用它，那么您就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:21:30.267

我认为您必须使用上一列值而不是使用 Today() 所以在第一列中它将是当前日期。（如果可以从周末开始，则应用相同的公式）。我认为在这种情况下开关盒更容易。

当前日期列的公式

```
=switch (
Weekday(today) = 6, dateadd("d", 2, today),
Weekday(today) = 7, dateadd("d", 1, today),
Weekday(today) < 6, today
) 
```

在第二列而不是 today() 中使用“Fields！previous_column_name.Value”。

```
=switch (
Weekday(dateadd("d", 1, Fields!previous_column_name.Value)) = 6, dateadd("d", 3, Fields!previous_column_name.Value),
Weekday(dateadd("d", 1, Fields!previous_column_name.Value)) = 7, dateadd("d", 2, Fields!previous_column_name.Value),
Weekday(dateadd("d", 1, Fields!previous_column_name.Value)) < 6, dateadd("d", 1, Fields!previous_column_name.Value)
) 
```

在第三列中使用第二列作为previous_column。

希望这会帮助你。

# javascript - JavaScript 没有在 Ajax 加载的内容上执行（没有 jQuery）

> ID：13848971
> 
> 赞同：0
> 
> 时间：2012-12-12T21:28:48.647
> 
> 标签：javascript, ajax

我遇到了一个问题，我正在使用 JavaScript 将 ajax HTML 内容加载到我的页面上的元素中，并尝试在加载的内容中执行 JavaScript，这不起作用。

我不是（也不能）在这个项目上使用 jQuery。

我用来加载 ajax 内容的 JavaScript 如下所示：

```
var loadedobjects = "";
var rootDomain = "http://" + window.location.hostname;

function ajaxPage(url, containerId){
    var pageRequest = false;
    pageRequest = new XMLHttpRequest();

    pageRequest.onreadystatechange = function(){
        loadpage(pageRequest, containerId);
    }

    preventCache = (url.indexOf("?")!=-1)? "&"+new Date().getTime() : "?"+new Date().getTime();
    pageRequest.open('GET', url+preventCache, true);
    pageRequest.send(null);
}

function loadpage(pageRequest, containerId){
    if (pageRequest.readyState == 4 && (pageRequest.status==200 || window.location.href.indexOf("http") == -1)){
        document.getElementById(containerId).innerHTML = pageRequest.responseText;
    }
} 
```

如您所见，我将（HTML 页面的）URL 传递给函数`ajaxPage()`

该`ajaxPage()`函数在单独的 .js 文件中调用，如下所示：

```
ajaxPage('test.html', 'ajax-wrapper'); 
```

哪个工作正常，正在将**test.html**加载到 id 为“ *ajax-wrapper* ”的元素中，但**test.html**页面中的 JavaScript 没有工作。

下面是**test.html**页面的样子（只是纯 HTML）：

```
<div class="t-page-title">
    View Thread
</div>

<script>
    alert('hello');
</script> 
```

即使是简单`alert('hello');`的加载 HTML 也不会触发。该页面没有被缓存，所以这不是问题。如果我使用 jQuery，我会知道该怎么做，但我对找到仅 JavaScript 的解决方案感到有些困惑。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:48:47.520

当您使用 innerHTML 时，标签会被复制到目标元素，但不会执行脚本。您需要额外的 eval 步骤来执行脚本。

jQuery 有一个名为 globalEval 的函数，没有 jQuery 你需要自己编写。

[更新] 这是一个 iframe 的变体，可能有助于解决您的问题：http: [//jsfiddle.net/JCpgY/](http://jsfiddle.net/JCpgY/)

在你的情况下：

```
ifr.src="javascript:'"+pageRequest.responseText+"'"; 
```

div 的标准行为：http: [//jsfiddle.net/JCpgY/1/](http://jsfiddle.net/JCpgY/1/)

# java - 使用 JSCH 和 WatchService 监控远程 SFTP 服务器的新文件

> ID：13848977
> 
> 赞同：2
> 
> 时间：2012-12-12T21:29:14.903
> 
> 标签：java, jsch, watchservice

我目前正在使用 JSCH 来实现 SFTP 客户端。这对我现在的目的很有效，但是在研究`WatchService`另一个项目时，我想知道是否可以使用 JSCH 实现它来监视 SFTP 服务器中的新文件。

我怀疑现在不可能，因为 WatchService 需要一个 Watchable 对象来操作，据我所知，JSCH 没有以任何方式实现 Watchable。

鉴于上述限制，是否有人对此有任何经验或想法如何实现？

# objective-c - 钥匙串请求多个帐户的许可

> ID：13848984
> 
> 赞同：1
> 
> 时间：2012-12-12T21:29:42.263
> 
> 标签：objective-c, macos, cocoa

在我的 MacOS 应用程序中，我存储电子邮件帐户数据，因此 5 个应用程序密码保存在钥匙串中。当应用程序启动时，Keychain 询问 5 次以始终允许... 有没有办法让 Keychain 接受我的应用程序一次？例如，Adium 存储多个帐户数据，并且在其钥匙串中只有一个条目（种类：“Internet 密码”）。

代码签名是避免这种情况的唯一方法吗？

**店铺：**

```
+(void)storePasswordKeychainWithPassAndKey:(NSString *)passwordStr:(NSString *)accountNameStr {
const char * accountName = [accountNameStr UTF8String];
const char * password = [passwordStr UTF8String];

OSStatus status;
status = SecKeychainAddGenericPassword(NULL, 
                                      strlen(serviceName), serviceName,
                                      strlen(accountName), accountName,
                                      strlen(password), password, 
                                      NULL); 
```

}

**得到**

```
+(NSString *) getPasswordKeychainWithKey: (NSString *)accountNameStr {
    const char * accountName = [accountNameStr UTF8String];
    void *password = nil;
    UInt32 passwordLen = 0;
    SecKeychainItemRef itemRef = nil;

    OSStatus status1;
    status1 = SecKeychainFindGenericPassword(NULL, 
                                             strlen(serviceName), serviceName,
                                             strlen(accountName), accountName,
                                             &passwordLen, &password,
                                             &itemRef);

    if (status1 == noErr) {
        NSData* passwordData = [NSData dataWithBytes:password length:passwordLen];
        SecKeychainItemFreeContent (NULL, password);
        return [NSString stringWithCString:[passwordData bytes] encoding:NSUTF8StringEncoding];
    }

    return nil;
} 
```

# include - Twig 在文件中包含查找集。

> ID：13848986
> 
> 赞同：0
> 
> 时间：2012-12-12T21:29:50.320
> 
> 标签：include, set, twig

我正在尝试使用 twig / include 从两个文件中提取内容，其中第二个文件将第一个文件的“设置”内容作为变量传递。问题是当它来自文件时，无法看到“设置”内容。例如，这有效

```
{% set localContent %}
  <div> someContent </div>
{% endset %}

{% include 'MyBundle:Templates:some.html.twig' %}
{% include 'MyBundle:Templates:main.html.twig' with {
  'includedContent':     localContent,
} %} 
```

其中 main.html.twig 很简单：

```
{% block form_row %}
<div> mainContent </div>
{{includedContent}}

{% endblock form_row %} 
```

some.html.twig 包含：

```
{% set fileContent %}
  <div> someContent </div>
{% endset %} 
```

当我将includedContent 变量更改为文件中定义的fileContent 时，我得到一个异常，表明无法找到fileContent。

我正在尝试做的事情可能吗？

谁能帮助我，我想在几天后世界末日之前完成这个应用程序:-)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:59:38.790

我找到了另一种机制来完成同样的任务。如果我将包含路径传递到主树枝文件中并使用它来访问 fileContent 一切都按预期工作。

# ios - RestKit - 处理身份验证

> ID：13848991
> 
> 赞同：3
> 
> 时间：2012-12-12T21:30:06.040
> 
> 标签：ios, web-services, rest, authentication, restkit

我已经开始为我们将要开发的利用基于 REST 的 Web 服务（在 Java 中使用 restEASY 实现）的 iOS 应用程序进行概念验证。我将使用 RestKit 作为我的客户端服务库，并且一直在阅读文档和一些示例。

绝大多数服务将要求用户使用用户名和密码进行身份验证。我们有接受包含凭证的 JSON 对象的身份验证服务，因此这部分很容易。我的问题是，当服务说需要身份验证时，我们如何处理 iOS 部分？

想象一下这个场景……

用户启动我们的应用程序并识别出用户需要进行身份验证。弹出一个模态视图控制器，提示用户进行身份验证，并提交请求。然后，用户可以毫无问题地进行一堆 REST 调用。最终，他们关掉了手机（应用程序仍然处于活动状态）并在一个小时左右后回来使用。他们单击一个按钮来触发另一个 REST 调用，但此时服务器端会话已过期。

理想情况下，我们希望能够识别服务器已指示需要身份验证，并再次弹出模态视图控制器。但是，RestKit 对此有支持吗？我们有什么方法可以注册一个能够识别服务器已经以这种方式响应的“全局响应处理程序”？

我们可以返回 JSON 中的状态码或使用 HTTP 状态码。我们的服务具有灵活性。真正的问题是如何在客户端以理想的方式处理这个问题。而且，一旦我们重新验证了用户的身份，有没有办法重放他们最初尝试提交的请求？或者，他们是否必须重新开始行动？

对不起，如果这没有意义或者这是一个非常简单的问题要解决。当我刚刚开始使用 RestKit 时，我想确保我以正确的方式做这件事，以避免将来出现问题。您可以提供的任何建议、代码示例、教程等将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:38:23.737

我建议您在 AppDelegate `- (void)applicationDidBecomeActive:(UIApplication *)application`或 `- (void)applicationWillEnterForeground:(UIApplication *)application`发送旧身份验证令牌的方法中向服务器发出请求。然后，如果令牌有效或无效，服务器可以提供响应。如果您的 AppDelegate 采用 RKObjectLoaderDelegate 协议，那么它可以处理响应。这样，每当应用程序变为活动状态时，都会提示用户在必要时重新进行身份验证。

# javascript - extjs4 对象不支持属性或方法“indexOf”IE 8 解决方法问题

> ID：13848995
> 
> 赞同：0
> 
> 时间：2012-12-12T21:30:27.007
> 
> 标签：javascript, extjs, internet-explorer-8, extjs4.1

我的用户定义的排序功能在 IE 8 中不起作用。

对象不支持属性或方法“indexOf”

```
roles_store.sort([{
    sorterFn: function(v1, v2) {
    var order = ['read-only', 'user', 'admin', 'super'],
        v1o   = order.indexOf(v1.get('role_name')),
        v2o   = order.indexOf(v2.get('role_name'));           

        return v1o < v2o ? -1 : 1;; 
    }
}]); 
```

以下链接显示了一种解决方法： [How to fix Array indexOf() in JavaScript for Internet Explorer browsers](https://stackoverflow.com/questions/1744310/how-to-fix-array-indexof-in-javascript-for-ie-browsers)

我尝试用 Array.prototype.indexOf 替换 indexof

v2o = order.Array.prototype.indexOf (v2.get('role_name'));

如果我在这里遗漏了什么，我深表歉意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:37:44.093

使用 Ext.Array.indexOf，它在可能的情况下遵循本机 indexOf。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Array-method-indexOf](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Array-method-indexOf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:53:02.533

IE 8 有点旧，它包含一个旧的 javascript 版本。它没有很多我们每天使用的非常有用的方法。我建议包含微型**Array 原型扩展**库（[链接](https://code.google.com/p/js-methods/)）。该库允许您使用所有新浏览器（使用较新的 javascript 版本）包含的所有方法（用于数组）。

您也可以按照 Evan 的建议使用 Extjs 方法（它们运行良好），但您必须始终牢记这一点，并且您在 Internet 或本网站上找到的大多数片段和代码示例都不会运行（您将拥有将它们翻译为使用 extjs 方法）。另一个问题是，如果你不小心的话，你的代码在 Chrome 和 FF 中可以正常工作，但在 IE 中就不行。

包含我向您推荐的扩展更加容易和安全，这是我们在自己的项目中所做的，这是一个很好的解决方案。

# json - 如何应对 Haskell 命名空间？

> ID：13848996
> 
> 赞同：6
> 
> 时间：2012-12-12T21:30:27.143
> 
> 标签：json, haskell, jira, aeson

我正在写一个`data`记录来编组一个`JIRA` `JSON`对象。问题是，多个对象具有相同的名称/值对标签。例如 ：

（从 curl 返回并格式化）

```
{"expand":"schema,names"
,"startAt":0
,"maxResults":2
,"total":74
,"issues":[
           {"expand":"editmeta,renderedFields,transitions,changelog,operations"
           ,"id":"183614"
           ,"self":"https://10.64.16.44/rest/api/latest/issue/183614"
           ,"key":"BNAP-339"
           ,"fields":{"versions":[
                                  {"self":"https://10.64.16.44/rest/api/2/version/28240"  
                                  ,"id":"28240"
                                  ,"name":"2012-12-07"
                                  ,"archived":false
                                  ,"released":false
                                  }
                                 ]
                     ,"status":{"self":"https://10.64.16.44/rest/api/2/status/1"
                               ,"description":"The issue is open and ready for the assignee to start work on it."
                               ,"iconUrl":"https://10.64.16.44/images/icons/status_open.gif"
                               ,"name":"Open"
                               ,"id":"1"
                               }
                     ,"description":"Do Re Mi Fa"
                     ,"resolution":null
                     }
           }
          ] 
```

当我构建有问题的相应 Haskell`data`记录时，我得到：

```
data Issue = Issue {expand :: String
                   ,id :: String
                   ,self :: String
                   ,key :: String
                   ,fields :: Fields
                   } deriving Generic

data Version = Version {self :: String
                       ,id :: String
                       ,name :: String
                       ,archived :: Bool
                       ,released :: Bool
                       } deriving Generic 
```

'id' 和 'self' 会发生冲突。我突然想到，我可以通过更改记录中的名称并使用手动创建的`FromJSON`实例来修复它来解决这个问题。欢迎任何替代解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T21:32:58.973

我在协议缓冲区中解决了这个问题，方法是将之类的东西放在同一层次结构中的单独文件中`Issue`。`Version`

Haskell 只使用单独的模块来控制命名空间，所以这是正统的解决方案。

更高级：使用类型类来定义可用的名称：

```
class Has'self a b | a -> bwhere
   get'self :: a -> b
   set'self :: b -> a -> b

instance Has'self Issue String where ...
instance Has'self Version String where .... 
```

编辑：下面的评论提醒我提供更详细的建议。不要使用 Has'self 之类的解决方案——那些走这条路的人报告它变得丑陋。我可以保证单独模块的路径。

PS：也许您可以将[镜头](http://hackage.haskell.org/package/lens)库用于您的领域！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T02:44:27.807

另一个可行的替代方法是使用包含不同记录的单一数据类型。例如，以下数据类型能够表示您的值而不会发生字段冲突：

```
import Prelude hiding (id)

data JIRA = JIRA
  { expand :: String
  , startAt :: Int
  , maxResults :: Int
  , total :: Int
  , issues :: [JIRA]
  } | Issue 
  { expand :: String
  , id :: Int
  , self :: String
  , key :: String
  , fields :: JIRA
  } | Field
  { versions :: [JIRA]
  , status :: JIRA
  , description :: String
  , resolution :: Maybe String
  } | Version
  { self :: String
  , id :: Int
  , name :: String
  , archived :: Bool
  , released :: Bool
  } | Status
  { self :: String
  , description :: String
  , iconUrl :: String
  , name :: String
  , id :: Int
  }

yourExample = JIRA
  { expand = "schema, names"
  , startAt = 0
  , maxResults = 2
  , total = 74
  , issues = [ Issue
               { expand = "editmeta, etc..."
               , id = 12345
               , self = "https://xyz"
               , key = "BLAH"
               , fields = Field
                          { versions = [ Version
                                          { self = "https://foobar"
                                          , id = 1234
                                          , name = "quux"
                                          , archived = False
                                          , released = False
                                          }
                                       ]
                          , status = Status
                                     { self = "https://etc"
                                     , description = "issue"
                                     , iconUrl = "https://iconurl"
                                     , name = "open"
                                     , id = 1
                                     }
                          , description = "another description"
                          , resolution = Nothing
                          }
                 }
               ]
  } 
```

# matlab - 如何在正则表达式后显示名称？

> ID：13848999
> 
> 赞同：0
> 
> 时间：2012-12-12T21:30:34.230
> 
> 标签：matlab

我正在尝试在与“hello”匹配的目录中查找所有文件。我有以下代码：

```
fileData = dir();   
m_file_idx = 1;
fileNames = {fileData.name};  
index = regexp(filenames,'\w*hello\w*','match') ;
inFiles = fileNames(~cellfun(@isempty,index)); 
```

前任。如果我的目录中有 3 个文件，其中包含单词 hello，inFiles 会返回我

```
inFiles = 

    [1x23 char]    [1x26 char]    [1x25 char] 
```

相反，我希望 inFiles 向我返回文件名，例如 thisishello.m,hiandhello.txt 我怎样才能以简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:14:30.107

这段代码：

```
fileData = dir();
fileNames = {fileData.name};

disp('The full directory...')
disp(fileNames)

index = regexp(fileNames,'\w*hello\w*','match');
inFiles = fileNames(~cellfun(@isempty,index));

disp('Print out the file names')
inFiles{:} 
```

生成此输出：

```
>> script
The full directory...
  Columns 1 through 6

    '.'    '..'    'andsevenyears.txt'    'fourscore.txt'    'hello1.txt'    'hello2.txt'

  Column 7

    'script.m'

Print out the file names

ans =

hello1.txt

ans =

hello2.txt 
```

在我看来，您在理解单元阵列方面遇到了一些问题。 这是一个通过m[工作的特定教程。](http://en.wikibooks.org/wiki/MATLAB_Programming/Cell_Arrays)（jerad 的链接看起来也是一个很好的资源）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:09:44.527

我认为这里发生的事情是，当单元格数组的元素长于某个长度（字符串似乎是 19 个字符）时，matlab 不会打印实际元素，而是打印内容的描述（在这种情况下，“[1x23 char]”）。

例如：

```
>> names = {'1234567890123456789' 'bar' 'car'}
names = 
    '1234567890123456789'    'bar'    'car'
>> names = {'12345678901234567890' 'bar' 'car'}
names = 
    [1x20 char]    'bar'    'car' 
```

`celldisp`可能更适合您的情况：

```
>> celldisp(names)
names{1} =
12345678901234567890
names{2} =
bar
names{3} =
car 
```