# StackOverflow 问答 14555000-14555999

# django - 如何在调试时在 Django 中自动设置跟踪

> ID：14555000
> 
> 赞同：0
> 
> 时间：2013-01-28T03:21:43.953
> 
> 标签：django, debugging

当我输入一条神奇的线“import ipdb;ipdb.set_trace();”时，Django 调试是一种重复工作 在源代码中，这不仅烦人而且对代码标准不利。

我只是想知道是否有办法在遇到任何错误时自动设置跟踪

# php - 在多暗阵列中找不到 STRICT 针

> ID：14555006
> 
> 赞同：2
> 
> 时间：2013-01-28T03:22:31.733
> 
> 标签：php

我有一段看起来像这样的代码：

```
if(array_key_exists('uid',$_SESSION)){
     $userdata->readUser($_SESSION['uid']); 
     $ACL = new ACL($_SESSION['uid']);
     $userPerms = $ACL->setACL();
     if(!in_array_r("adminUI",$userPerms['perms'],true)){
        echo "Couldnt fine adminUI in:";
         var_dump($userPerms['perms']); 
     }
} 
```

in_array_r 函数是：

```
function in_array_r($needle, $haystack, $strict = false) {
    foreach ($haystack as $item) {
        if (($strict ? $item === $needle : $item == $needle) || (is_array($item) && in_array_r($needle, $item, $strict))) {
            return true;
        }
    }

    return false;
} 
```

我从中得到：[in_array() 和多维数组](https://stackoverflow.com/questions/4128323/in-array-and-multidimensional-array)

但是，此输出显示：

```
Couldnt fine adminUI in:
array(2) {
  [0]=>
  array(1) {
    ["perm_desc"]=>
    string(7) "adminUI"
  }
  [1]=>
  array(1) {
    ["perm_desc"]=>
    string(9) "apiAccess"
  }
} 
```

如果我更改函数以在没有 STRICT 的情况下检查数组，它将找到针，但在严格检查时失败...

我正在把头撞到桌子上，试图弄清楚这一点。

**编辑**

Jan Schejbal 非常棒，他指出这段代码运行良好。我不够连贯，无法实现我的工作目录。再次感谢 Jan Schejbal。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:53:26.210

我最初将此作为评论发布，但因为它确实是问题的答案......

如果你有一个完全 WTF 错误：

1.  更改错误消息并再次运行程序。如果它显示原始错误消息，则您运行的文件与您正在编辑的文件不同（例如，未上传、错误的目录）或在某处有另一个生成错误消息的代码副本。

2.  使用显示文件的编辑器检查文件中的不可打印字符

第 1 号是导致无法解释的错误的最常见原因之一。

# google-tv - 有没有办法在 Google TV 上调整直播电视视图的大小？

> ID：14555007
> 
> 赞同：0
> 
> 时间：2013-01-28T03:22:39.600
> 
> 标签：google-tv

我搜索了很多，并且知道不可能在 Google TV 上的直播电视视图上叠加内容。如果我想调整直播电视视图的大小并在直播电视视图周围显示我的应用程序内容怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:22:38.560

Google TV 没有正式支持的 PIP API。但是，我设法通过使用 android.widget.VideoView 并使用 'hdmi://localhost?port=2' 作为视频 URI 来使 PIP 视频正常工作。看看我开源的这个应用程序，它展示了如何在技术上让 PIP 在 Google TV 上工作： [https ://github.com/entertailion/GoogleTV-PIP](https://github.com/entertailion/GoogleTV-PIP)

# jquery - 忽略复选框单击？

> ID：14555014
> 
> 赞同：1
> 
> 时间：2013-01-28T03:23:43.550
> 
> 标签：jquery, checkbox, html-table, event-handling

我有一个表格，其中每一行在`<input type="checkbox" />`第一个单元格中都有一个。

我有一个点击处理程序设置，`<tr>`其中包括切换复选框。

这是完美的，除非我点击实际的复选框，这会导致复选框的状态与它应该的状态相反，因为它被切换两次，一次是默认行为，一次是`<tr>`事件处理程序。

我想要做的基本上是忽略复选框点击，只响应点击tr。

这是我的 tr 事件处理程序

```
$('.files-table tbody').on('click', 'tr', function (e) {
    var check = $('.check', this);
    check.prop('checked', !check.prop('checked'));

    check.prop('checked') ? selected++ : selected--;
    numSelected.html(selected + ' item' + (selected === 1 ? ' ' : 's ' ) + 'selected: ');
    if (selected == 1) {
        withSelected.addClass('in').removeClass('hide');
        noSelected.removeClass('in').addClass('hide');
    } else if (selected == 0) {
        withSelected.removeClass('in').addClass('hide');
        noSelected.addClass('in').removeClass('hide');
    }

    if (check.prop('checked')) {
        selectedItems[check.data('type')].push(check.data('id')+"");
    } else {
        selectedItems[check.data('type')].splice(check.data('id')+"");
    }
    console.log(selectedItems);
    $(this).toggleClass('info');
}); 
```

这是一个示例行：

```
<tr>
    <td style="width:15px;">
      <input class="check" type="checkbox" data-id="6" data-type="directories">
    </td>
    <td>
      <a href="/files/browse/1\. First/1.1 First Child of First/6" 
         class="needs-tooltip" 
         title="Browse Directory">
        <i class="icon icon-folder-close"></i>
      </a> 
      1.1 First Child of First
    </td>
    <td>Directory</td>
    <td>0 Items</td>
    <td>27 Jan 2013</td>
    <td>--</td>
    <td>--</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:26:20.767

您可以检查点击的来源：

```
if ( ! $(e.target).is(':checkbox') ) {
    $('.check', this).prop('checked', function (i, el) {
        el.checked ? selected-- : selected++;
        return ! el.checked;
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:25:39.353

防止将您的事件传播给父母：

```
$(".check").on('click', function (e) {
   e.stopPropagation();
}); 
```

这将允许复选框（切换选中状态）的正常行为继续进行，但您的点击事件不会让父级再次点击。

# vba - Word 2007 - 清理文本的宏

> ID：14555018
> 
> 赞同：0
> 
> 时间：2013-01-28T03:24:05.660
> 
> 标签：vba, text, ms-word

我正在尝试编写一个将格式化文本的宏。

这是原始数据的样子：

```
 This is sentence one of paragraph one. This is 
     sentence two of paragraph one. This is 
    sentence three of paragraph one. This is sentence 
    four of paragraph one. This is sentence five of 
    paragraph one.

  This is sentence one of paragraph two. This is 
    sentence two of paragraph two. This is 
      sentence three of paragraph two. This is sentence 
      four of paragraph two. This is sentence five of 
   paragraph two. 
```

这就是我希望文本的样子：

```
This is sentence one of paragraph one. This is sentence two of paragraph one. This is  
sentence three of paragraph one. This is sentence four of paragraph one. This is 
sentence five of paragraph one.

This is sentence one of paragraph two. This is sentence two of paragraph two. This is  
sentence three of paragraph two. This is sentence four of paragraph two. This is 
sentence five of paragraph two. 
```

该宏将确保文本填满整个页面，并且每个单词之间只有一个空格。它需要保留段落结构。

我从 Excel 调用此宏并从 Word 运行可读性统计信息。

这是我到目前为止的代码：

```
Public Declare Function OpenClipboard Lib "user32" (ByVal hwnd As Long) As Long
Public Declare Function EmptyClipboard Lib "user32" () As Long
Public Declare Function CloseClipboard Lib "user32" () As Long

Sub Test_Button1()

    Dim file As String
    Dim StatText As String
    Dim rs As Variant
    Dim row_count As Integer
    Dim header_count As Integer

    row_count = 0
    header_count = 0

    Sheets("Sheet1").Select
    Range("B5").Select

    Set appWD = New Word.Application
    appWD.Visible = True

    Do Until IsEmpty(ActiveCell)
        row_count = row_count + 1
        OpenClipboard (0&)
        EmptyClipboard
        CloseClipboard
        ActiveCell.Copy
        appWD.Documents.Add
        appWD.Selection.PasteSpecial Link:=False, DataType:=wdPasteText, Placement:=wdInLine, DisplayAsIcon:=False
        appWD.ActiveDocument.Select
        With appWD.Selection.ParagraphFormat
            .SpaceBefore = 0
            .SpaceAfter = 0
            .LineSpacingRule = wdLineSpaceSingle
            .WidowControl = False
            .KeepWithNext = False
            .KeepTogether = False
            .PageBreakBefore = False
        End With

        If row_count = 1 Then
           ActiveCell.Offset(-1, 0).Select
           For Each rs In appWD.ActiveDocument.readabilitystatistics
               header_count = header_count + 1
               ActiveCell.Offset(0, 1).Select
               ActiveCell.Value = rs.Name
           Next rs
           ActiveCell.Offset(1, -header_count).Select
        End If

        For Each rs In appWD.ActiveDocument.readabilitystatistics
            ActiveCell.Offset(0, 1).Select
            ActiveCell.Value = rs.Value
            StatText = StatText & rs.Name & " - " & rs.Value & vbCr
        Next rs

        appWD.ActiveDocument.Select
        appWD.Selection.Delete
        appWD.ActiveWindow.Close SaveChanges:=wdDoNotSaveChanges
        ActiveCell.Offset(1, -header_count).Select
    Loop

    appWD.Quit SaveChanges:=wdDoNotSaveChanges    
    Set appWD = Nothing    
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:32:49.497

1.  运行搜索和替换，用随机字符串（如“0PbEGMySxe3Bz4NOXUcw”）替换双换行符，该字符串不会出现在文档的其他任何地方。
2.  运行搜索和替换替换所有剩余的换行符
3.  用一个空格替换多个空格（根据需要重复）。
4.  根据需要将步骤 1 中的随机字符串替换为段落/换行符。

如果您不想查找如何以编程方式进行搜索和替换，您可以使用内置的宏记录器记录这些操作，然后调整代码以适合您的程序。

结果是：

```
Sub test()
'
' test Makro
'
'
    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = "\n\n"
        .Replacement.Text = "asdfasdfasdf"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
    With Selection.Find
        .Text = "\n"
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
    With Selection.Find
        .Text = "  "
        .Replacement.Text = " "
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = "asdfasdfasdf"
        .Replacement.Text = "^p"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
End Sub 
```

你显然想在使用它之前清理它，并重复空白搜索和替换，直到什么都没有（例如，只需运行它 10 次，它是指数级的，这就足够了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:48:38.140

你可以尝试这样的事情：

```
Sub CleanWordDocument()

    Dim objWord As Word.Application, objDoc As Word.Document, c As Word.Range

    Set objWord = New Word.Application
    objWord.Visible = True
    Set objDoc = objWord.Documents.Open("C:\Users\user\Documents\test1.docx")

    Set c = objWord.ActiveDocument.Content
    c.ParagraphFormat.Alignment = wdAlignParagraphJustify

    With c.Find
        .ClearFormatting
        .Replacement.ClearFormatting
        .Text = "  "
        .Replacement.Text = " "
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False

        .Execute Replace:=wdReplaceAll
        While .Found
            .Execute Replace:=wdReplaceAll
        Wend
    End With

    objDoc.Save
    objWord.Quit wdDoNotSaveChanges
    Set objWord = Nothing
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:04:11.487

子宏1()

```
Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "^p "
    .Replacement.Text = "^p"
    .Forward = True
    .Wrap = wdFindStop
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute
Do While Selection.Find.Found
Selection.Find.Execute Replace:=wdReplaceAll
Selection.Find.Execute

Loop
Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
Selection.Find.Replacement.Font.Underline = wdUnderlineSingle
With Selection.Find
    .Text = "^p^p"
    .Replacement.Text = "^&"
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute Replace:=wdReplaceAll
Selection.Find.ClearFormatting
Selection.Find.Font.Underline = wdUnderlineNone
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "^p"
    .Replacement.Text = " "
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute Replace:=wdReplaceAll
Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "^p^p"
    .Replacement.Text = "^p"
    .Forward = True
    .Wrap = wdFindContinue
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute Replace:=wdReplaceAll
 Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "  "
    .Replacement.Text = " "
    .Forward = True
    .Wrap = wdFindStop
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute
Do While Selection.Find.Found
Selection.Find.Execute Replace:=wdReplaceAll
Selection.Find.Execute

Loop 
```

结束子

# c++ - Windows Phone 运行时组件 xap 文件缺少 dll

> ID：14555019
> 
> 赞同：0
> 
> 时间：2013-01-28T03:24:22.250
> 
> 标签：c++, windows-phone-8

为我的应用程序编译的 xap 文件不包含所有 dll。Windows 8 Phone 项目引用了一个 Phone 运行时组件，该组件还引用了一个 Windows Phone 共享 DLL。Shared Dll 不会复制到 xap 容器中，也不会部署到手机上，因此应用程序会死掉。

如果我手动添加丢失的 dll 并在 xap 工作后将其部署到手机。但每当我从 VS12 部署时，dll 就丢失了。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:17:18.737

您是否考虑过直接为您的顶级项目添加对“Windows Phone 共享 DLL”的引用？那将解决这个问题。

# asp.net - Entity Framework Code First App_Data 为空，我无法在任何地方找到它

> ID：14555022
> 
> 赞同：1
> 
> 时间：2013-01-28T03:24:30.523
> 
> 标签：asp.net, entity-framework, c#-4.0, ef-code-first

我在 Visual Studio 2012 专业版中工作，我制作了一些类并使用 EF 生成数据库。数据库工作正常，但 App_Data 为空。我想知道我是否可以对文件显示任何内容。或者我在哪里可以找到其他地方的数据库？我真的需要找到数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:34:16.907

检查您的解决方案文件夹，您将看到生成的数据库。

在此处查看相同的帖子：[Entity Framework Code First doesn't Generate Database](https://stackoverflow.com/questions/3877784/entity-framework-code-first-doesnt-generate-database)

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:33:48.267

默认情况下，Code First 已在 localhost\SQLEXPRESS 上使用您的上下文类的完全限定名称作为数据库名称创建数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-06T12:57:58.083

如果 EntityFramework 在 App.config 或 Web.config 中找不到连接字符串，它会在当前用户的配置文件文件夹中创建数据库。转到用户的配置文件文件夹以查看数据库文件。

# jquery - Jquery selectable：查找选定元素的长度

> ID：14555025
> 
> 赞同：0
> 
> 时间：2013-01-28T03:25:08.200
> 
> 标签：jquery, jquery-ui-selectable

```
$( ".mylist" ).selectable({
        cancel: 'a',
        selected:function(event, ui) {
           console.log($(ui));
        }
    }) 
```

我想打印所选函数中所选元素的数量。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:28:02.673

带有 jQ​​uery UI 可选的选定元素获取`.ui-selected`类，因此您可以只使用`$(".ui-selected").length`.

如果您在同一页面上有多个可选择项，则必须使用父项缩小范围。

# java - 用于选择性数据捕获的 Servlet 过滤器

> ID：14555032
> 
> 赞同：1
> 
> 时间：2013-01-28T03:26:06.483
> 
> 标签：java, tomcat, servlet-filters, syslog

我有一个无法更改的第三方基于 Tomcat 的服务器应用程序。应用程序使用 XML 格式接收来自客户端的 POST 请求。有业务需要将一些 XML 数据字段从单独的日志文件或数据库/系统日志中记录下来。我担心性能。

对于这种情况，servlet 过滤器是一个很好的解决方案吗？还是使用中介代理更好？

你能推荐任何现有的过滤器/阀门来满足这种需求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:15:29.707

我想您提到的 servlet 过滤器是在 Web 应用程序本身中实现的。因此可能需要更改现有 Web 应用程序的 web.xml。当然，您可以添加另一个新的 webapp，并在预处理后将请求重定向到当前的 webapp。

但是，Tomcat 支持 Valve。我认为它可以完美地支持您的要求。可以在[此处](http://tomcat.apache.org/tomcat-7.0-doc/config/valve.html)找到完整的 Valve 文档。它确实会在一定程度上影响你的 webapp 的整体性能。这在很大程度上取决于您如何实施阀门。您必须在实施后评估性能开销。评估代码也可以写在阀门类中。

这是另一个有用的链接：

[http://www.tomcatexpert.com/blog/2011/11/11/finer-point-apache-tomcat-valves](http://www.tomcatexpert.com/blog/2011/11/11/finer-point-apache-tomcat-valves)

实现阀门后，您可以在您的 tomcat 目录下的配置文件中注册它们。

# java - 带有 for 循环或 else 的 Java 三角形

> ID：14555033
> 
> 赞同：-5
> 
> 时间：2013-01-28T03:26:11.350
> 
> 标签：java, for-loop

我需要从右边开始创建一个直角三角形。前任。（- 是空格）

––––X –––XX ––XXX –XXXX XXXXXX

一个数字（和字符；前 X）将在 runner 之前给出。我得到了哪个代码。我需要代码来制作三角形。例如，如果数字为 5，则每行最多可添加 5 个字符，从一个 X 开始计数，并带有 4 个空格。然后将有 5 行最后将是所有 X。

更新：我的代码打印出来

––––X –––X ––X –X X（– 的空格，字符后没有空格）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:31:23.747

好的，让我们从数字 5 开始。最好的办法是简单地考虑每行必须输出什么，然后循环执行该操作。

使用该数字，您必须输出 5 行，如下所示（我将使用`.`空格，因为它更容易辨别相邻的行）：

```
....X
...XX
..XXX
.XXXX
XXXXX 
```

查看每一行如下：

*   第一行有 4 个空格和一个`x`.
*   第二行有 3 个空格和 2 个`x`。
*   第三行有 2 个空格和 3 个`x`。
*   第四行有 1 个空格和 4 个`x`。
*   第五行没有空格和 5 `x`。

我在这里感觉到一个模式 ((4,1), (3,2), (2,3), (1,4), (0,5)) - 第一个数字从`n-1`(4 在这种情况下) 开始并减少到 0。第二个数字从 1 开始并增加到`n`（在这种情况下为 5）。

在伪代码中（这是你从我这里得到的关于家庭作业类型的问题），它看起来像：

```
def maketriangle (n):
    for lineidx = 1 to n:
        for charidx = 1 to n - lineidx:   // 4 3 2 1 0
            output " "
        for charidx = 1 to lineidx:       // 1 2 3 4 5
            output "X"
        output newline 
```

您的工作是将其转换为真正的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:30:38.890

提示：假设您要打印`n`x`n`字段并且当前行索引是`i`. 然后您需要打印 X`n-i`次（或`n-i-1`次数取决于您的索引`i`是从 0 开始还是从 1 开始）

# android - 允许 web 视图中的所有“market://”链接打开 Google Play 商店

> ID：14555040
> 
> 赞同：5
> 
> 时间：2013-01-28T03:27:09.210
> 
> 标签：android, android-intent, android-webview

我的 webview 中有一些链接是 market:// 链接。当我的用户点击它们时，它会给他们一个找不到页面的错误。

如何让所有以 market:// 开头的链接在被点击时自动打开 Google Play 商店？我试过了：

```
final Intent intent = new Intent("android.intent.action.VIEW");
            intent.setData(Uri.parse("market://details?id="));
            startActivity(intent);
        } 
```

但这似乎没有任何作用。我对此很陌生，因此将不胜感激。另外，仅供参考，我自己无法将 market:// 链接更改为 play.google.com。它们来自我的广告商。

无论如何我可以将它包含在此代码中：

```
public boolean shouldOverrideUrlLoading(WebView paramWebView, String paramString) {
        if (DEBUG)
            Log.e("shouldOverride", paramString);
        if (Uri.parse(paramString).getHost()!=null && (!Uri.parse(paramString).getHost().equals("market.android.com")) && (!paramString.contains("facebook.com")) && (!Uri.parse(paramString).getHost().contains("twitter.com")) && (!Uri.parse(paramString).getHost().equals("play.google.com"))
                && (!Uri.parse(paramString).getHost().contains("bit.ly")) && (!Uri.parse(paramString).getHost().contains("plus.google.com")) && (!Uri.parse(paramString).getHost().contains("youtube.com"))){
            if(isAppOrGamePage(paramString)){
                final Intent intent = new Intent(MainActivity.this, PageActivity.class);
                intent.putExtra("app_url", paramString);
                startActivity(intent);
            } else
                return false;
        } else {
            final Intent intent = new Intent("android.intent.action.VIEW", Uri.parse(paramString));
            startActivity(intent);
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-22T00:17:25.473

您可以通过查看 url 的方案来决定要做什么，如果安装了 Google Play Store 应用程序，您可以在 Play Store 应用程序中打开详细信息页面，否则您可以显示应用程序的 Google Play 网页

```
webView.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getScheme().equals("market")) {
            try {
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setData(Uri.parse(url));
                Activity host = (Activity) view.getContext();
                host.startActivity(intent);
                return true;
            } catch (ActivityNotFoundException e) {
                // Google Play app is not installed, you may want to open the app store link
                Uri uri = Uri.parse(url);
                view.loadUrl("http://play.google.com/store/apps/" + uri.getHost() + "?" + uri.getQuery());
                return false;
            }

        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-11T12:07:16.830

```
 if (url.startsWith("market://")||url.startsWith("vnd:youtube")||url.startsWith("tel:")||url.startsWith("mailto:"))
{
    Intent intent = new Intent(Intent.ACTION_VIEW); 
    intent.setData(Uri.parse(url)); 
    startActivity(intent);
    return true;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T05:51:58.727

如果它对您有帮助，您也可以像这样使用此代码：

```
// It will not work in android simulator as it does not have Google Play Store
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id="+APP_ID))); 
```

# php - 将相同的 PDO 对象传递给不同的类

> ID：14555045
> 
> 赞同：2
> 
> 时间：2013-01-28T03:28:34.640
> 
> 标签：php, pdo

我有这样的课程：

类页面.php

```
class pages {

    private $dbh;

    function __construct($dbh) { 
        $this->dbh = $dbh;
    }
    //...
} 
```

类新闻.php

```
class news {

    private $dbh;

    function __construct($dbh) { 
        $this->dbh = $dbh;
    }
    //...
} 
```

类Mod.php

```
class mod {

    private $dbh;

    function __construct($dbh) { 
        $this->dbh = $dbh;
    }
    //...
} 
```

在索引页面中：

```
try
{
    $dbh = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options);
}
catch(PDOException $ex)
{
    die("Failed to connect to the database: " . $ex->getMessage());
}

require 'classPages.php';
require 'classNews.php';
require 'classMod.php';

$pages = new pages($dbh);
$news = new news($dbh);
$mod = new mod($dbh);

//use above objects where needed 
```

所以我创建了单个 PDO 对象。然后将其传递给每个类的构造函数。然后我使用这些对象并调用它的成员函数，这些函数使用传递给构造函数的这个 pdo 对象来获取和插入数据。

是正确的方式吗？还是直接/间接发生任何冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:31:15.373

这是正确的方法。您不会每次都创建不同的数据库连接，这是最佳的（不确定新的 PDO 实例是否会这样做，但您至少可以确定）。

当您在 PDO 中准备语句时，它会创建一个单独的实例，因此不必担心那里的冲突。唯一可能的问题是，如果您在一个类中更改 PDO 实例的某些属性并依赖于使用另一个类中的不同属性（但这极不可能）。

面向对象编程的目标之一是重用资源，这正是它所做的。

# c# - 如何在 c# 上指定一个即使更改目录也始终有效的 sql 连接字符串？

> ID：14555050
> 
> 赞同：1
> 
> 时间：2013-01-28T03:29:14.107
> 
> 标签：c#, asp.net, sql-server, connection-string

我在 ASP.NET 解决方案上有一个连接字符串...

```
Data Source=.\SQLEXPRESS;AttachDbFilename="F:\Prueba Documento Digital\Prueba Documento Digital\App_Data\BaseDeDatos.mdf";Integrated Security=True;User Instance=True 
```

您可能会注意到它指定了一个确切的路线，因为它位于我的 USB 闪存驱动器上，但是如果我将我的解决方案移动到另一个地方会发生什么（Prueba Documento Digital 是解决方案的名称）？

我正在尝试类似 ~/App_Data... 但它没有用... 可以做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T03:34:54.140

您可以将数据库放在 App_Data 文件夹中并通过 DataDirectory 访问它

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\BaseDeDatos.mdf;Integrated Security=True;User Instance=True 
```

默认情况下，asp.net 将在看到 DataDirectory 指令时检查 App_Data 文件夹（除非您通过调用更改 DataDirectory `AppDomain.SetData`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T03:37:44.763

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\BaseDeDatos.mdf;Integrated Security=True;User Instance=True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T03:37:45.463

> 很简单，提供服务器地址，并在其中访问您的数据目录并提及数据库文件名。将您的数据库文件放在`App_Data`文件夹中

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|dataDirectory|\BaseDeDatos.mdf;Integrated Security=True;User Instance=True. 
```

在此代码中，`AttachDbFilename`搜索名为的数据库文件`BaseDeDatos.mdf`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T04:19:04.657

首先停止使用该`AttachDbFileName`属性和[已弃用的用户实例功能](https://stackoverflow.com/questions/5046044/future-of-user-instance-in-sql-server)。您真的想在每次启动应用程序时创建数据库的新副本吗？

相反，直接在实际的 Express 实例上创建数据库，使用[`CREATE DATABASE BaseDeDatos ... FOR ATTACH ...`](http://msdn.microsoft.com/en-us/library/ms176061.aspx). 然后您的应用程序将始终引用您的数据库的正确副本（我强烈建议不要在 USB 闪存驱动器上移动您的 .mdf 文件 - 如果您想要便携式开发，请使用 Azure 或其他东西）：

```
Data Source=.\SQLEXPRESS;Initial Catalog=BaseDeDatos;Integrated Security=True; 
```

# python - 为什么python字典是空的？

> ID：14555056
> 
> 赞同：0
> 
> 时间：2013-01-28T03:30:04.937
> 
> 标签：python, dictionary

我有一个遍历列表然后加载字典的函数。它在函数中打印得很好但返回字典是空的？

```
 95 def getAttachmentDict(messageIds):
 96     messageTable = defaultdict(list)
 97     for id in messageIds:
 98         uri = "/message/" + id
 99         res = getMessages(uri)
100         doc = xml.dom.minidom.parse(res)
101         idUrl = doc.getElementsByTagName("url")
102         alist = []
103         for i in idUrl:
104             urlData = i.childNodes[0].nodeValue
105             alist.append(urlData)
106         messageTable[id] = alist
107     print "\n"
108     for key, value in messageTable.items():
109         print "Message ID: " + key 
110         print "\n".join(value) 
111     return messageTable

169         getAttachmentDict(messageIds)
170         pdb.set_trace()
171         print messageTable 
```

消息 ID：MyUHRnzm7AXkFmiKocUjzn config-safety-report.html 消息 ID：RqfljNnyz63bBpGLtL4B2D individual-report.csv

> /Work/ftpTool/acquire.py(171)main() -> 打印 messageTable (Pdb) n {}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:32:32.040

您没有对返回值做任何事情。这只是打印您调用的其他一些变量`messageTable`

```
169         getAttachmentDict(messageIds)
170         pdb.set_trace()
171         print messageTable 
```

试试这个

```
169         messageTable = getAttachmentDict(messageIds)
170         pdb.set_trace()
171         print messageTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:33:48.260

当您调用 时`getAttachmentDict()`，您需要将结果分配给一个名称（可以是`messageTable`，或您想要使用的任何其他名称）。例如：

```
169         messageTable = getAttachmentDict(messageIds)
170         pdb.set_trace()
171         print messageTable 
```

# python - 如何重复我的初始输入代码？

> ID：14555057
> 
> 赞同：1
> 
> 时间：2013-01-28T03:30:19.483
> 
> 标签：python, python-2.7

我正在使用python中的计算器作为我的课堂作业之一（基本运算，加法，减法，乘法和除法）我有一个打印菜单，用户可以从中选择他们想要使用的操作......然后输入他们的整数和答案的打印语句。我的问题是我需要重复用户想要执行的操作的初始输入。编程新手，非常感谢任何帮助。

这是我的代码：

```
print ("1 = addition")
print ("2 = subtraction")
print ("3 = multiplication")
print ("4 = division")
print ("5 = Exit program\n")

x = int (input ("What operation would you like to perform?: ")) #prompts user for operation

if (x == 1): #if operation chose is addition then this line will exacute
  int1 = input ("Enter first integer: ")
  int1 = int (int1)
  int2 = input ("Enter second integer: ")
  int2 = int (int2)
  sum = int1 + int2
  print ("Sum is:", sum)

elif (x == 2): #if operation chose is subtraction then this line will exacute
  int1 = input ("Enter first integer: ")
  int1 = int (int1)
  int2 = input ("Enter second integer: ")
  int2 = int (int2)
  dif = int1 - int2
  print ("Difference is:", dif)

elif (x == 3): #if operation chose is multiplication then this line will exacute
  int1 = input ("Enter first integer: ")
  int1 = int (int1)
  int2 = input ("Enter second integer: ")
  int2 = int (int2)
  mult = int1 * int2
  print ("Multiplication is:", mult)

elif (x == 4): #if operation chose is division then this line will exacute
  int1 = input ("Enter first integer: ")
  int1 = int (int1)
  int2 = input ("Enter second integer: ")
  int2 = int (int2)
  div = int1 / int2
  print ("Division is: %.2f" % div)

elif (x == 5):
  print ("goodbye")
  quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:34:48.930

使用`while`循环：

现在这将一次又一次地循环，直到`x`不等于 5

```
while True:
    #your code

    elif x == 5:       # no need of () around conditions
    print ("goodbye")
    break             # exit the while loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:34:52.547

您需要阅读基本的流量控制。这是相关的[python教程部分](http://docs.python.org/2/tutorial/controlflow.html)。

这可以使用 a`for`或`while`循环来实现。以下是两者的示例：

```
for a in range(10):
    print a

b=0
while b<0:
    print b
    b= b+1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T03:37:32.833

您可以将该代码拆分为一个函数：

```
print "1 = addition"
print "2 = subtraction"
print "3 = multiplication"
print "4 = division"
print "5 = Exit program\n"

def maths(choice):
    if choice == 1: #if operation chose is addition then this line will exacute
       int1 = input("Enter first integer:")
       int2 = input ("Enter second integer: ")
       sum = int1 + int2
       print "Sum is:", sum

    elif choice == 2: #if operation chose is subtraction then this line will exacute
       int1 = input("Enter first integer: ")
       int2 = input("Enter second integer: ")
       dif = int1 - int2
       print "Difference is:", dif

    elif choice == 3: #if operation chose is multiplication then this line will exacute
       int1 = input("Enter first integer: ")
       int2 = input("Enter second integer: ")
       mult = int1 * int2
       print "Multiplication is:", mult

    elif choice == 4: #if operation chose is division then this line will exacute
       int1 = input("Enter first integer: ")
       int2 = input ("Enter second integer: ")
       div = int1 / int2
       print "Division is: %.2f" % div

    elif choice == 5:
       print "goodbye"
       quit()

while True: # "While True, repeat everything below":
    maths(input("What operation would you like to perform?: ")) 
```

* * *

编辑：看来你已经声明它是 python 2.7，所以我为你清理了代码。

您不需要 int(int1) 和 int(int2) 因为 input() 不会使输入成为字符串。IE：

```
>>> number = input('Enter a number! ') # Let's say I put 5
>>> print number
5 # Notice it's not a string (no ' ') 
```

而 raw_input() 会这样做：

```
>>> number = raw_input('Enter a number! ')
>>> print number
'5' # 5 is a string, not an integer. And so int() would be required 
```

# tfs - NuGetter 无法在托管的 TFS 服务器上创建目录

> ID：14555061
> 
> 赞同：1
> 
> 时间：2013-01-28T03:30:53.793
> 
> 标签：tfs, nuget, nugetter

我正在尝试使用[NuGetter](http://nugetter.codeplex.com/)在 tfs.VisualStudio.com 上的托管构建服务器中创建 NuGet 包。我的理解是，一旦该工具尝试创建一个新文件夹以用作打包过程的舞台，它就会失败。这是我得到的错误：

> ```
> Exception Message: Access to the path '$/main/Drops/MyBuild/MyBuild_20130128.4\NuGetPackage' is denied. (type UnauthorizedAccessException)
> Exception Stack Trace:    
> at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
> at System.IO.Directory.InternalCreateDirectory(String fullPath, String path, Object dirSecurityObj, Boolean checkHost)
> at System.IO.Directory.InternalCreateDirectoryHelper(String path, Boolean checkHost)
> at TfsBuild.NuGetter.Activities.CreateFolder.Execute(CodeActivityContext context) in c:\Users\svc-tauintbuilder\Downloads\Source\TfsBuild.NuGetter.Activities\CreateFolder.cs:line 53   
> at System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager)
> at System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation) 
> ```

该项目是开源的，所以我查看了该区域的代码，它确实只是一个简单的调用`Directory.CreateDirectory`：

```
public string DoCreateFolder(string dropLocation, string folderName)
{
    string folderToCreate;

    if (Path.IsPathRooted(folderName))
    {
        folderToCreate = folderName;
    }
    else
    {
        folderToCreate = Path.Combine(dropLocation, folderName);
    }

    if (!Directory.Exists(folderToCreate))
    {
        Directory.CreateDirectory(folderToCreate);
    }

    return folderToCreate;
} 
```

谈到 TFS，无论是否托管，我都是新手。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:47:51.327

我注意到错误中的方法签名和文件路径 ($/main/Drops...) 我猜这可以使用本地 TFS 重现，您可以在其中配置要归档到源代码控制的构建。Directory 类不会理解 $/ 所指的内容。似乎它需要传递 BinariesRoot 或类似的，然后让 TFS 拿起所有东西并签入。

# sql - 在 Postgres 中显示关系、序列和函数的默认访问权限

> ID：14555062
> 
> 赞同：27
> 
> 时间：2013-01-28T03:31:09.937
> 
> 标签：sql, postgresql, privileges

更改 Postgres 数据库对象的默认权限后，如何查看它们？

例如，如果您`role_name`为 schema 中创建的所有表授予所有权限`schema_name`：

```
ALTER DEFAULT PRIVILEGES IN SCHEMA schema_name GRANT ALL ON TABLES TO role_name; 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-02-13T11:53:21.613

## 使用 psql(1) 交互式终端

还有另一种方式，至少在最近的 Postgres 版本中是这样。
使用`\ddp`命令

```
 Default access privileges
     Owner      | Schema |   Type   | Access privileges 
----------------+--------+----------+-------------------
 role_x         |        | function | =X/role_x
 role_x         |        | sequence | 
 role_x         |        | table    | 
 role_x         |        | type     | =U/role_x 
```

在此处的“注释”部分阅读有关它的更多信息：
[http ://www.postgresql.org/docs/current/static/sql-alterdefaultprivileges.html](http://www.postgresql.org/docs/current/static/sql-alterdefaultprivileges.html)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-28T03:31:09.937

## 使用 SQL 查询

```
SELECT 
  nspname,         -- schema name
  defaclobjtype,   -- object type
  defaclacl        -- default access privileges
FROM pg_default_acl a JOIN pg_namespace b ON a.defaclnamespace=b.oid; 
```

其中r =`defaclobjtype`关系[（表，视图），S = 序列，f = 函数](http://www.postgresql.org/docs/current/static/catalog-pg-default-acl.html)。

这些访问权限仅适用于模式命名空间中新创建的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-26T01:17:33.853

如果您加入`pg_default_act`，`pg_namespace`您将仅列出在架构中使用的默认权限。

# jquery - json对象操作后加载数据

> ID：14555068
> 
> 赞同：0
> 
> 时间：2013-01-28T03:31:56.580
> 
> 标签：jquery, json, facebook-graph-api

我正在对 facebook 图形进行两次调用节点，一次获取专辑 ID 列表，另一次获取该 ID 的封面照片 url 并将其添加到原始 json 对象中。

如何构造它以在循环后对数据对象执行某些操作以获取和添加封面照片网址？当前代码仅包含循环前的数据

```
 $('#main').on('click', '#albums', function() {
      $.get('/albums', function(data) {
           var a = 0;
           for (i = 0; i < data.data.length; i++) {
                $.get('/cover-photo?id=' + data.data[i].cover_photo, function(dataz) {
                     data.data[a].cover_photo_url = dataz.location;
                     a++;
                });
           }
      });
// do something with the data obj
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:38:33.823

据我了解，您的问题是您只能访问循环中的数据。解决这个问题的诀窍很简单。您只需要分配一个全局变量。像这样做：

```
 var global_data="";
 $('#main').on('click', '#albums', function() {
      $.get('/albums', function(data) {
           var a = 0;
           for (i = 0; i < data.data.length; i++) {
                $.get('/cover-photo?id=' + data.data[i].cover_photo, function(dataz) {
                     global_data = data;
                     data.data[a].cover_photo_url = dataz.location;
                     a++;
                });
           }
      });
// now you could access global_data here
}); 
```

# mysql - 将 MySQL JOIN 放回数据库中，而不仅仅是返回列

> ID：14555069
> 
> 赞同：1
> 
> 时间：2013-01-28T03:32:06.137
> 
> 标签：mysql, join, sql-update, denormalized

我有一个关于我遇到困难的查询的快速问题。我有两张表，我试图将它们非规范化为一张表。

下面是两张表：

日期表：

```
ID | Date 
```

和数据表：

```
ID | DateID | Data 
```

我想结束的是：

```
ID | DateID | Data | Date 
```

我现在得到的是：

```
UPDATE dataTable
SET date = dateTable.date 
WHERE `DateID` = `dateTable.id` 
```

但这在语法上是不正确的。如果我使用 JOIN 执行此操作，您如何将数据放回 dataTable 上的 Date 列而不只是返回数据？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:39:53.903

```
UPDATE dataTable data
JOIN dateTable dates on dates.id = data.dataId
SET data.date = dates.date; 
```

# c++ - re:chill 指数，什么都没有发生

> ID：14555071
> 
> 赞同：1
> 
> 时间：2013-01-28T03:32:21.057
> 
> 标签：c++, mingw32

我早些时候发布了一个关于我在使用该程序时遇到的错误的问题，但它昨天工作了，虽然它今天不再工作了。我不确定发生了什么。这是我的代码。

```
#include <iostream>
#include <cmath>

using namespace std;

float eqfunction(float, float);

int main() {
    float temperature;
    float windspeed;
    float returnchillindex;
    cout << "What is the temperature?"
    << "Must be in degrees fahrenheit";
    cin >> temperature;
    cout << "What is the wind speed?"
        << "In MPH.";
    cin >> windspeed;
    returnchillindex = eqfunction(temperature,windspeed);
    cout << returnchillindex;
    system("pause");
    return 0;
}    

float eqfunction(float temperature, float windspeed){
    float windindex = 35.74f + 0.6215f * temperature;
    windindex = windindex - 35.75f * std::pow(windspeed, 0.16f);
    windindex = windindex + 0.4275f * temperature * std::pow(windspeed,0.16f);
    return windindex;
 } 
```

这是我的编译器返回的

> ```
> mingw32-g++.exe    -c C:\Users\Ryan\Documents\CodeBlocks\Exam1Part2.cpp -o C:\Users\Ryan\Documents\CodeBlocks\Exam1Part2.o
> mingw32-g++.exe  -o C:\Users\Ryan\Documents\CodeBlocks\Exam1Part2.exe C:\Users\Ryan\Documents\CodeBlocks\Exam1Part2.o   
> mingw32-g++.exe: Internal error: Aborted (program collect2)
> Please submit a full bug report.
> See <URL:http://www.mingw.org/bugs.shtml> for instructions.
> Process terminated with status 1 (0 minutes, 0 seconds)
> 0 errors, 0 warnings (0 minutes, 0 seconds) 
> ```

我不明白一夜之间发生了什么。

# javascript - 如何检查浏览器是否完全支持 javascript 方法（例如，getComputedStyle 伪元素）

> ID：14555072
> 
> 赞同：1
> 
> 时间：2013-01-28T03:32:31.150
> 
> 标签：javascript, jquery, internet-explorer

我的问题特定于 getComputedStyle 方法。ie9 支持 getComputedStyle ，但不支持 getComputedStyle 的伪元素。通常我会使用这样的支票。

```
if ( getComputedStyle ) { ... 
} else { ... stuff for ie9 } 
```

但是，这对于 ie9 返回 true，因为它确实支持 getComputedStyle（尽管它不支持它的伪元素）。我将如何检查浏览器是否支持这种带有伪元素的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:38:57.340

**编辑/附录：**刚刚意识到您正在尝试深入了解`getComputedStyle()`IE9 与其他浏览器的细节。因此请注意，如果此脚本不是您要查找的内容，因为它似乎只是测试是否存在`getComputedStyle()`而不是特定的选择选项。

[该站点](http://www.sitepoint.com/forums/showthread.php?289765-getComputedStyle-not-working-in-Safari-1-3-2-0)似乎提供了`getComputedStyle`跨浏览器检测的解决方案。特别是页面底部附近的这段代码：

```
<script type="text/javascript">
// First paramter is a nodes id, second the CSS property you want
function getCSSProperty(sNodeId, sProperty)
{
    var oNode = document.getElementById(sNodeId);

    if(document.defaultView)
    {
        return document.defaultView.getComputedStyle(oNode, null).getPropertyValue(sProperty);
    }
    else if(oNode.currentStyle)
    {
        var sProperty = sProperty.replace(/-\D/gi, function(sMatch)
        {
            return sMatch.charAt(sMatch.length - 1).toUpperCase();
        });

        return oNode.currentStyle[sProperty];
    }
    else return null;
}

alert(getCSSProperty("myDiv", "margin-bottom"));
</script> 
```

**编辑：**原始海报对正则表达式逻辑有疑问，这是我试图解释的。如果我错了，请让我知道或评论您的想法：

```
 var sProperty = sProperty.replace(/-\D/gi, function(sMatch)
        {
            return sMatch.charAt(sMatch.length - 1).toUpperCase();
        }); 
```

好的，那段代码正在用实际的正则表达式替换正则表达式`/-\D/gi`。使用[这个正则表达式指南](http://www.cs.tut.fi/~jkorpela/perl/regexp.html)（又名：正则表达式）我想我明白了。

是`/`分隔符；魔法发生在他们之间。`-`只是匹配破折号。这`\D`是一个特殊的符号，意思是“匹配任何非数字字符”。并且`gi`特定于正则表达式调用并[在此处解释](http://www.cprenterprisesonline.com/elearning/jsref/jsref_regexp_modifier_gi.asp.htm)为：“`gi`修饰符用于对字符串中所有出现的正则表达式进行不区分大小写的搜索。”</p>

嵌套函数作用于`replace`正则表达式中的匹配项，并且基本上执行`.toUpperCase()`匹配项。

因此，您似乎可以对其进行调整以匹配您尝试检测的更深层次的功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:03:31.897

可能有更好的方法来做到这一点，但是如果您使用 CSS（或使用 JS）添加特定的伪元素，您可以检查它是否存在，如下所示：

```
if ( window.getComputedStyle(document.body,':after').getPropertyValue('content') === 1 ) {
// Do stuff
} else { 
// ie fall back
} 
```

在这个例子中，我向 body 标签添加了一个 :after 选择器，并从样式表中添加了一个 content 属性（该属性的值可以是任何值）。

# bluetooth - 连接 Arduino Uno 和蓝牙蜜蜂需要做任何配置吗？

> ID：14555083
> 
> 赞同：1
> 
> 时间：2013-01-28T03:34:08.473
> 
> 标签：bluetooth, arduino

我目前有 Arduino Uno 和蓝牙蜜蜂，我使用的 Shield 是 Xbee Shield Pro v1.4。Xbee Shield pro 中有几个跳线；一个是 XBEe/USB 跳线，另一个是 Run /Prog 跳线。我想知道它们的用途以及是否需要配置它们才能将任何程序上传到 arduino uno。

# memory - 可以支持的最大指令数是多少？

> ID：14555084
> 
> 赞同：-3
> 
> 时间：2013-01-28T03:34:07.807
> 
> 标签：memory, organization

考虑一个假设的 32 位微处理器，它具有由两个字段组成的 32 位指令：第一个字节包含操作码，其余字节包含立即操作数或操作数地址。

1.  最大可直接寻址空间容量（以字节为单位）是多少？对于第一个问题，我得到了 3 个字节，但我不完全确定为什么这是答案。

2.  可以支持的最大指令数是多少？

3.程序计数器和指令寄存器所需的最小位数是多少？

我真的很困惑从哪里开始这些问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:50:56.033

对于第一部分，您的最大可寻址空间将是

```
2^([instruction length]-[remain])  => 2^(32-8) 
```

# java - Android & Guice - 注入通用类型的类？

> ID：14555087
> 
> 赞同：1
> 
> 时间：2013-01-28T03:34:32.237
> 
> 标签：java, android, generics, guice, roboguice

我有一个泛型类型类。我正在尝试注入此类，但它似乎不起作用。我发现的其他解决方案违背了拥有泛型的全部意义，因为建议对模块中的类型进行硬编码。

```
@Override
protected void configure() {

    this.bind(new TypeLiteral<IServiceClient<Object>>(){}).to(new TypeLiteral<ServiceClient<Object>>(){});

} 
```

用法

`@Inject IServiceClient<Customer> customerServiceClient`;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:38:13.370

通常情况下，类型参数是一个有用的部分`Key`（它本身只由一个`TypeLiteral`和一个绑定注释组成）。Guice 预计您会希望将`IServiceClient<User>`和`IServiceClient<Property>`视为两个不同的绑定，因此您可以使用两种不同的实现轻松实现它们。听起来您的情况不太具体，您希望`MyService<Foo>`为 any 绑定到相同的实现类`Foo`。

从根本上说，Guice 是从键到提供者的映射，因此在单个语句中绑定多种键并不容易。当然，您可以遍历`IServiceProvider`您打算支持的不同类型参数，分别绑定每个参数，但这似乎是您预期的“反对泛型的全部要点”的解决方案。（我不同意这已经过时了，但同意如果您支持广泛的类作为参数，循环有点笨拙。）

因为泛型无论如何都是通过擦除来处理的，更好的选择可能是绑定一次实现类并将其强制转换到类的构造函数中：

```
class MyConsumer {
  IServiceProvider<Foo> fooServiceProvider;

  @SuppressWarnings("unchecked")
  @Inject
  MyConsumer(IServiceProvider<?> fooServiceProvider) {
    this.fooServiceProvider = (IServiceProvider<Foo>) fooServiceProvider;
  }
} 
```

这样，无论您想要什么类型，Guice 都会反思性地寻找相同的`IServiceProvider`实现，并且您可以自己安全地转换它。如果您发现警告很难看，您可以将演员表包装在静态方法中。

# java - 多线程垃圾回收

> ID：14555095
> 
> 赞同：3
> 
> 时间：2013-01-28T03:35:24.187
> 
> 标签：java, multithreading, garbage-collection

> **可能重复：**
> [垃圾收集和线程](https://stackoverflow.com/questions/2085544/garbage-collection-and-threads)

我在一次采访中得到了这个问题：假设我们创建了多个线程，如果其中一个线程调用垃圾回收，那么其他线程中未引用的对象是否也会被回收？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T03:45:30.360

是和不是。

> 如果其中一个线程调用垃圾回收，是否也会收集其他线程中未引用的对象？

是的。对象不在“线程中”——程序中运行的所有线程都有一个对象图，因此当 GC 发生时，无论是哪个线程创建它们或对它们有本地引用，都将收集无法访问的对象。

不会。当线程调用`Runtime.gc()`虚拟机时，虚拟机没有义务实际执行任何操作，因此可能没有发生 GC，也没有收集内存。例如，`-XX:+DisableExplicitGC`在命令行中指定时无效。

> [`Runtime.gc()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#gc%28%29)
> 
> 调用此方法**表明**Java 虚拟机花费精力回收未使用的对象，以使它们当前占用的内存可用于快速重用。

不。即使发生 GC，也不一定会收集只能从一个线程的堆栈中访问的所有无法访问的对象，因为分代 GC 仅处理对象图的子集，并且如果该子集恰好包含创建的所有无法访问的对象通过一个特定的线程，那么这只是巧合。

# wpf - 如何将 ComboBox 的 Textbox SelectionBrush 设置为不同的颜色？

> ID：14555096
> 
> 赞同：1
> 
> 时间：2013-01-28T03:35:29.883
> 
> 标签：wpf, combobox, textbox

已经有关于此的帖子，但似乎没有解决方案。也许是在`SelectionBrush`财产被曝光之前`TextBox`。

我的资源中有一个可以正常工作的`Style`for `TextBox`（所选文本不是默认的系统颜色，而是我选择的颜色）。我会假设`TextBox`我的自定义`ComboBox`模板的组件会使用它，`TextBox` `Style`但其中的选定文本`ComboBox` `TextBox`仍然是蓝色的。

既然我知道我可以控制 a 的选定文本颜色，`TextBox`我该如何控制它`ComboBox` `ControlTemplate`？我有图像和代码示例，但是这个论坛不允许我发布它们，因为这是我第一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:00:22.183

您可以使用以下代码，它可以解决您的问题

```
<Window.Resources>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="SelectionBrush" Value="Yellow"></Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <TextBox Text="ramesh test" Margin="67,12,184,240" />
        <ComboBox ItemsSource="{Binding}" Name="testCombo" Margin="67,48,184,204">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                   <TextBox  Text="mytext" Width="100" Height="50" />
                </DataTemplate>
            </ComboBox.ItemTemplate>            
        </ComboBox>
    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:57:01.527

您可以覆盖 ComboBox`HighlightBrushKey`颜色

```
 <ComboBox x:Name="MyCombo" ItemsSource="{Binding Items}" Margin="0,0,0,148">
        <ComboBox.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Yellow" />
        </ComboBox.Resources>
    </ComboBox> 
```

# http - 如何将响应数据放入 AngularJS 中的全局范围数组中？

> ID：14555097
> 
> 赞同：2
> 
> 时间：2013-01-28T03:35:31.417
> 
> 标签：http, angularjs

我想将 http 响应的数据永久保存到范围数组中，以便在我的控制器中全局访问它：

```
function myCtrl($scope, $http){    
$scope.data = [];
$http.get('myurl').success(function(data, status) {

       $scope.data = data;
        });
console.log($scope.data)// the output is an empty array, it didn't change
...
} 
```

我在这里做错了什么？如何将响应的数据提取到范围数组（例如：$scope.data）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T03:51:09.540

[$http](http://docs.angularjs.org/api/ng.%24http) .get 请求/响应在您执行时尚未完成`console.log`。你应该`console.log`像这样把你的成功回调放在里面：

```
$http.get('myurl').success(function(data, status) {
    $scope.data = data;
    console.log($scope.data); // the output should be set
}); 
```

# facebook - 通过 wordpress 或任何其他插件开发获取反向链接？

> ID：14555099
> 
> 赞同：0
> 
> 时间：2013-01-28T03:35:43.820
> 
> 标签：facebook, wordpress, drupal, plugins, joomla

我想问如果我在wordpress或者joomla或者drupal或者任何其他网站上开发一个插件，并且把访问网站和支持链接放在插件页面里面，那么这些会被认为是反向链接吗？意味着如果任何页面排名为 6 的网站安装了我的插件，那么我会从页面排名 6 的网站获得反向链接吗？

请参阅我的网站是[PluginsTalk.com](http://PluginsTalk.com)，我在其中发布与插件相关的文章。我还为我的个人网站开发开发了一些插件，因为我在 wordpress 上没有找到它们。因此，如果我将插件提交到 wordpress，那么我会从每个安装它的网站获得反向链接吗？

**我的另一个最重要的问题是**：插件只能从管理部分使用（它不会添加/影响主网站，只有仪表板），**那么指向插件设置页面的链接将被视为反向链接？**因为它只显示在管理区域而不是实际的网站。

*[我想为我的网站PluginsTalk.com](http://PluginsTalk.com)开始插件开发，前提是它们为我提供反向链接。否则我只会把它们留给我自己。*

请在答案中包含是或否来回答，以便我能清楚地理解。

谢谢。祝您愉快。开发 ：）

* * *

补充：我想问同样的关于开发**facebook 应用程序**的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:54:06.533

在 wordpress 中，管理员是仪表板的区域，主要限制为爬行机器人。

因此，如果它们在仪表板中，您的链接将不会有任何汁液。

ps：-

欲了解更多信息，请查看 robots.txt

```
User-Agent: *
Disallow: /wp-admin/
Disallow: /wp-includes/
Disallow: /wp-content/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:14:11.947

不，这不会让你获得任何排名。

除非搜索引擎可以抓取您命名的 CMS 的管理部分，否则此方案将无法正常工作。我相当有信心您必须登录才能进入管理部分。这意味着搜索引擎永远不会知道您的链接，如果引擎不知道它们，则没有排名。引擎必须看到链接才重要，并且您声明前端没有任何变化。

# c# - C#如何在循环中使属性分配独立

> ID：14555100
> 
> 赞同：2
> 
> 时间：2013-01-28T03:36:01.397
> 
> 标签：c#, properties

我不确定我的标题是否足够明确或具体，但这就是我想要做的。

我有一个新班级

```
public class Segments
    {            
        public List<double> List1 { get; set; }
        public List<double> List2 { get; set; } 
        public List<double> List3 { get; set; } 
        public List<double> List4 { get; set; } 
    }

public static void SplitSegments(CsvClass longList, List<Segments> segments)
    {
        Segments tempSegments = new Segments();
        List<double> list1 = new List<double>();
        List<double> list2 = new List<double>();
        List<double> list3 = new List<double>();
        List<double> list4 = new List<double>();

        // Nested For loop that goes through a longList with its own properties.
        // Below is a flag for when to split that longList.properties into segments

        if (flag == true)
        {
             //The lists are now complete for the first segment.
             list1.Add(longList.one[i]);
             list2.Add(longList.two[i]);
             list3.Add(longList.three[i]);
             list4.Add(longList.four[i]);

             //created a copy of the class properties
             tempSegments.List1 = new List<double>(list1);
             tempSegments.List2 = new List<double>(list2);
             tempSegments.List3 = new List<double>(list3);
             tempSegments.List4 = new List<double>(list4);

             //Add to List<Segments>
             segments.Add(tempSegments)

             //Clear lists in order to move on to creating next segment of the longList.
             list1.Clear();
             list2.Clear();
             list3.Clear();
             list4.Clear();
             break;
        }
    }
} 
```

我的问题是，当创建新段并将其添加到 时`List<Segments>`，所有段都成为新段的完全相同的副本。

我想类中的列表仍然引用与列表相同的对象。我的问题是如何做到这一点，以便在将新段添加到 时`List<Segments>`，它们不会删除旧段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:39:01.740

你应该移动这条线

```
Segments tempSegments = new Segments(); 
```

进入循环体，可能就在`if`子句`if (flag == true)`中。这将在每次迭代中创建一个新段。

整个代码部分如下所示：

```
 if (flag == true)
    {
         Segments tempSegments = new Segments();
         //The lists are now complete for the first segment.
         list1.Add(longList.one[i]);
         list2.Add(longList.two[i]);
         list3.Add(longList.three[i]);
         list4.Add(longList.four[i]);

         //created a copy of the class properties
         tempSegments.List1 = new List<double>(list1);
         tempSegments.List2 = new List<double>(list2);
         tempSegments.List3 = new List<double>(list3);
         tempSegments.List4 = new List<double>(list4);

         //Add to List<Segments>
         segments.Add(tempSegments)

         //Clear lists...
         list1.Clear();
         list2.Clear();
         list3.Clear();
         list4.Clear();
         break;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:41:33.280

```
//created a copy of the class properties
tempSegments = new Segments();  // otherwise you are just changing the properties on a single obj and adding that obj many times to your list.
tempSegments.List1 = new List<double>(list1);
tempSegments.List2 = new List<double>(list2);
tempSegments.List3 = new List<double>(list3);
tempSegments.List4 = new List<double>(list4); 
```

# jstl - 使用 JSTL 在字符串开头替换变量的多次出现？

> ID：14555101
> 
> 赞同：2
> 
> 时间：2013-01-28T03:36:36.857
> 
> 标签：jstl

var1 = "PPPP1234P56"

我需要在开始时替换“P”，然后使用 JSTL 将其存储在变量“var2”中。

o/p 需要在 var2 ="1234P56"

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:29:04.747

这是一个示例代码，它将检查并删除在字符串开头具有多个副本的字符串的一部分

```
String var1 = "PPPP1234P56";
                    String firstchar = var1.substring(0);
                    String replaceme = "";
                    for (int i = 0; i < var1.length(); i++) {
                        if (firstchar.equals(firstchar)) {
                            replaceme = replaceme.concat(firstchar);
                        } else {
                            break;
                        }
                    }
                    String var2 = var1.replace(replaceme, ""); 
```

# java - 在 MacOSx 上使用 Gradle 编译一个简单的 Junit 测试

> ID：14555103
> 
> 赞同：28
> 
> 时间：2013-01-28T03:36:53.027
> 
> 标签：java, junit, gradle

我正在尝试构建最简单的 gradle 项目（带有测试）。查看了所有相关问题和谷歌搜索，我似乎遗漏了一些非常基本的东西，而且显然不常见。

我创建了一个测试类，“gradle compileTestJava”无法编译文件说

> 包 org.junit 不存在

它找到了测试，知道这是一个测试，但似乎找不到自己的 junit.jar 文件。

build.gradle 包含

> 应用插件：'java'

就是这样。裸露的骨头！我也尝试添加

> 依赖{
> 
> > 测试编译'junit：junit：4.10'
> 
> }

有了这个，我得到“无法解决所有依赖项”，这让我认为 gradle 已经迷失了自己的文件（？）。我看到 gradle 已安装 /Users/me/Documents/Projects/gradle-1.3/lib/plugins/junit-4.10.jar 文件。

事实上，当我运行“gradle dependencies”时，我得到了

```
testCompile - Classpath for compiling the test sources.
No dependencies 
```

我不知道这是否应该包含内置插件依赖项。我的猜测是它应该列出junit。

有任何想法吗？

这是我得到的：

```
:compileTestJava

/Users/me/Documents/Projects/experiment1/src/test/java/MyUnitTests.java:3: package org.junit does not exist
import org.junit.*;
       ^
/Users/me/Documents/Projects/experiment1/src/test/java/MyUnitTests.java:7: cannot find symbol
symbol  : class Test
location: class test.java.MyUnitTests
    @Test
     ^
/Users/me/Documents/Projects/experiment1/src/test/java/MyUnitTests.java:9: cannot find symbol
symbol  : variable Assert
location: class test.java.MyUnitTests
            Assert.assertEquals(2 + 2, 4);
            ^
3 errors
 FAILED

FAILURE: Build failed with an exception. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-20T14:58:04.757

你需要确保你已经设置了你的 repos，并且你需要包含对 junit 的依赖。这意味着您的 build.gradle 需要看起来像这样的东西

```
repositories {
    mavenCentral()
}

apply plugin: 'java'

dependencies {
    testCompile 'junit:junit:4.10'
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-20T01:28:45.467

In my build.gradle I had this:

```
android {
sourceSets { main { java.srcDirs = ['src/main/java', 'src/test/java'] } } 
```

And also

```
dependencies {
testCompile 'junit:junit:4.12'} 
```

The problem went away when I deleted the following from the build.gradle

> 'src/test/java'

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-18T03:16:23.353

本指南可能会有所帮助 - [http://www.slideshare.net/tobiaspreuss/how-to-setup-unit-testing-in-android-studio](http://www.slideshare.net/tobiaspreuss/how-to-setup-unit-testing-in-android-studio)

最新的 gradle 测试应该在 androidTest 目录下

同样在你的 gradle.build 中：

```
dependencies {
     androidTestCompile 'junit:junit:4.+'
} 
```

**还要在defaultConfig**下添加那些

 **```
defaultConfig {

    testPackageName "test.java.foo"
    testInstrumentationRunner "android.test.InstrumentationTestRunner"

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-30T10:04:46.117

它可能还需要在您的存储库声明中使用 mavenLocal()

```
repositories {
  mavenLocal()
  mavenCentral()
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-26T20:59:00.733

我在我的测试用例中遇到了类似的问题，并且遇到了类似的错误。我可以通过在我的 build.gradle 文件中添加源集来修复它。

例如：

```
sourceSets {
src {
   test{
      java{
    srcDirs =["com/testfile/appservice/test/endpoint"]
    }
      }
} 
```

}

src/test/java 是测试包正上方的目录名称，com.testfile.appservice.test.endpoint 是编写我的 junit 测试的包的名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-18T06:23:48.143

只需添加

```
repositories {
    mavenCentral()
} 
```

如果您使用 Android Studio 进行 Android 开发，它对我有用**

# eclipse-rcp - 如何在版本之间升级基于 eclipse rcp 的应用程序

> ID：14555111
> 
> 赞同：2
> 
> 时间：2013-01-28T03:37:47.010
> 
> 标签：eclipse-rcp

我想知道是否有一种方法可以升级 eclipse e4 rcp 应用程序（比如说从 4.2 到 4.3，当我想基于这个版本时）而不必重新安装整个应用程序？

实际上，我有一个基于 eclipse e4 rcp 的应用程序，当我拥有新版本的功能时，它会自行更新。我有一项功能（com.mycompany.myapp），其中包括功能 org.eclipse.e4.rcp。我可以使用更新版本的 org.eclipse.e4.rcp，更新我的功能 com.mycompany.myapp 的版本并将更新应用到我的基于 eclipse e4 rcp 的应用程序上，但更新后我的应用程序无法启动。

您如何以简单的方式为最终用户管理此场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:53:53.173

通常，您的设置中有两个组件。引导程序和功能。

通常，功能组件捆绑在引导组件中，因此它们显示为可升级产品（您只需在更新站点上发布新功能）。

在我运行的其他配置中，我们只有一个小的引导程序，如果没有更新站点，它基本上是无用的，并且在第一次启动时会从更新站点中选择功能组件。

但是，最后我们构建了一个批处理脚本，以在必要时使用 p2 导向器更新引导程序。这里有一些[初始的东西](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_director.html)，但你需要做一些实验..

# android - 尝试签署 .apk 文件时出错

> ID：14555112
> 
> 赞同：3
> 
> 时间：2013-01-28T03:37:48.877
> 
> 标签：android, apk, signing, jarsigner

我在签署未签名的 .apk 文件时遇到问题。

每当我尝试输入此命令时`jarsigner –verbose –sigalg MD5withRSA –digestalg SHA1 –keystore my-release-key.keystore AmazonInAppSample-release-unsigned.apk alias_name`

我收到此错误：

```
jarsigner error: java.lang.RuntimeException: keystore load: /Users/user7259/.keystore (No such file or directory) 
```

我执行了这个命令，我的当前目录是我的密钥库和 .apk 文件所在的 bin 文件夹。

我还确保输入了正确的密码。

如果我尝试输入空白通行证，我会收到以下消息：

```
jarsigner: you must enter key password 
```

如果我尝试输入正确或无效的密码，我会收到以下消息：

```
jarsigner error: java.lang.RuntimeException: keystore load: /Users/user7259/.keystore (No such file or directory) 
```

更新：我需要安装 Java JDK 7 才能使用 –sigalg MD5withRSA –digestalg SHA1 吗？

# javascript - 添加事件提交按钮

> ID：14555115
> 
> 赞同：1
> 
> 时间：2013-01-28T03:38:21.057
> 
> 标签：javascript, html, css

我刚开始用这个js代码学习js

```
<div class="container">    
    <form name="myForm" action="#"  method="post">
        First name: <input type="text" name="fname">
        <input type="submit" value="Submit" id="smit">
    </form> 

  <script>
var smit=document.getElementById("smit");
smit.addEventListener("click",formvalidate(),false); 

function formvalidate(){

    console.log(" vua moi click submit");

    if(t==null){
        var t= document.forms["myForm"]["fname"].value;
        if(t==null || t==""){
             alert("xin dien vao email");

        }
    }

}
</script> 
```

在浏览器中预览时，尽管我没有单击提交按钮，但会自动弹出警报弹出窗口。谁能解释一下发生了什么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T03:38:46.917

函数名称后的括号会立即*调用*该函数。由于您只是将其分配为事件侦听器，因此您想*传递*它。

删除括号，它会在执行前等待点击：

```
smit.addEventListener("click", formvalidate, false);
//                                        ^^ No parentheses 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T04:01:08.863

我做了一些小改动，所以它也可以在 IE 中工作：

```
<form name="myForm" id="myForm" action="#"  method="post">
    First name: <input type="text" name="fname" id="fname">
    <input type="submit" value="Submit" id="smit">
</form>

<script >
function formvalidate(event){
//removed console log because that only works in ie
// when debugging
    var t= document.getElementById("fname").value;
    if(t==""){
       alert("xin dien vao email");
       if(event.preventDefault){ event.preventDefault()}; 
       if(window.event){window.event.returnValue = false;}
    }
}
var smit=document.getElementById("myForm");
if(smit.addEventListener){
    smit.addEventListener("submit",formvalidate,false);
}else{
    //ie doesn't have addEventListner
    smit.attachEvent('onsubmit', formvalidate);
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T03:41:08.563

从 formvalidate 中删除括号，例如：

```
smit.addEventListener("click",formvalidate(),false); 
```

至

```
smit.addEventListener("click",formvalidate,false); 
```

请参阅：[addEventListener](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T03:47:18.703

事件监听器不包含括号，删除它。如果你给它添加括号，它看起来像函数，但在这里你必须分配你的事件监听器。

```
smit.addEventListener("click",formvalidate,false); 
```

# python - 如何在不更改类变量的情况下编辑函数的返回值

> ID：14555117
> 
> 赞同：1
> 
> 时间：2013-01-28T03:38:25.640
> 
> 标签：python, python-3.x, return, pygame

我正在设计一个游戏，需要将脚本变量从米转换为像素。我的转换系数是 30；30 像素到 1 米。我有三个级别的代码：我的游戏引擎、游戏级别和我的脚本。

游戏引擎从基类创建一个新的游戏关卡“curmap”。游戏中的每一帧，引擎都会调用 curmap.animate，它会返回一个列表，其中列出了游戏中每个对象在何处被 blit'ed。关卡遍历关卡中的每个对象，并在每个对象上调用 animate。

**我的问题**

我遇到的问题是，在 Level-animate 方法中，player-animate 方法正在返回对 player-class-variables 的直接引用。Level-animate 中的两行注释仅用于更改返回值，但它们正在修改玩家变量。我无法在测试课上重现这一点，所以我完全不知所措。

如何在不更改播放器脚本的情况下取消注释这两个内联乘法语句？

游戏引擎：

```
# fps is an instance of pygame.time.clock()
# events is a modified list of pygame.event.get()

for item in curmap.animate(fps.tick()/1000, events):
    screen.blit(curmap.assets['textures'][item[0]],item[1],item[2]) 
```

等级：

```
def animate(self, timedelta, events):
    returns = []
    for item in self.objects:
        ret = item.animate(timedelta, events)

        #ret[1][0] *= 30
        #ret[1][1] *= 30

        returns.append(ret)
    return returns 
```

播放器脚本：

```
def animate(self, timedelta, input):
    # Process Inputs
    for item in input['keydown']:
        self.keydown.append(item)
    for item in input['keyup']:
        self.keydown.remove(item)

    # Change Velocity and Position
    if "left" in self.keydown:
        self.velocity[0] = 5
    elif 'right' in self.keydown:
        self.velocity[0] = -5
    else: self.velocity[0] = 0
    print(self.position, self.velocity)
    self.position[0] += self.velocity[0]*timedelta
    self.position[1] += self.velocity[1]*timedelta

    # Change Sprite
    self.time += timedelta
    if self.time > self.altertime:
        self.current = (self.current+1)%2
        self.time -= self.altertime

    return [self.image, self.position, self.sprite[self.current] + self.dimensions] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:14:50.277

你没有说`self.position`你的方法到底是什么`Player.animate`，但如果它是一个包含数值的简单列表，只需复制这个列表：

```
return [self.image, self.position[:], self.sprite[self.current] + self.dimensions] 
```

* * *

您正在返回 list `Player.position`，当您在 中更改它（更改列表中的值）时`Level.animate`，您实际上是在更改`Player.position`，因为您正在处理*同一个*列表。

# affiliate - 从 URL 获取会员 ID

> ID：14555125
> 
> 赞同：0
> 
> 时间：2013-01-28T03:39:13.533
> 
> 标签：affiliate

所以我是一个新手，我知道一些 HTML 和 PHP。不过不要对我太先进。

我有一个这样的页面`mywebsite.com/?s1=affiliateid`

我想`affiliateid`从 URL 中删除部分。每个会员都会在地址中输入不同的用户名。

然后我想创建一个链接，将`differentwebsite.com/?id=affiliateid`基于输入到地址栏中的用户名指向。

我知道我必须在`s1`某个地方定义。我不知道这是怎么回事。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:43:12.220

您需要考虑将 $_GET 变量添加到 mywebsite.com/?s1=page。

像这样的东西会得到那个会员ID

```
$aff_id = $_GET['s1']; 
```

然后您可以使用该变量创建链接或将其重定向到下一页

```
differentwebsite.com/?id=$aff_id 
```

在 PHP 中它看起来像这样

```
echo '<a href='http://differentwebsite.com/?id='.$aff_id.'">Link to other site</a>'; 
```

说得通？

# django-apps - 用于自动删除文件的 Django 应用程序

> ID：14555126
> 
> 赞同：0
> 
> 时间：2013-01-28T03:39:14.533
> 
> 标签：django-apps

我在删除媒体中的文件时遇到问题。例如，如果我在管理员中删除我的文件，它可以工作，但文件仍保留在我的媒体文件夹中。我也想删了。是否有一个应用程序可以自动删除旧文件并在模型删除时删除文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:43:30.257

尝试 django-cleanup 但要注意后果。阅读他们的信息。我建议使用应用程序创建信号。

# json - 在 Google 电子表格（Campaign Monitor）中导入带有身份验证的 JSON

> ID：14555134
> 
> 赞同：2
> 
> 时间：2013-01-28T03:40:01.120
> 
> 标签：json, google-apps-script, google-sheets, campaign-monitor

我正在使用 google 电子表格从 Campaign Monitor 获取订阅者数据，但是我遇到了一个问题

使用 ImportJSON 脚本 - [http://blog.fastfedora.com/projects/import-json](http://blog.fastfedora.com/projects/import-json)

我把网址放在：http://[APIKEY]:[PASSWORD]@api.createsend.com/api/v3/subscribers/[LISTID].json?email=[EMAILADDRESS]

但是，它在单元格中给了我一个“错误的请求”错误。我猜这是因为如果我把这个网址放在浏览器中，我会收到一个确认弹出框，上面写着“您即将使用用户名登录到站点“api.createsend.com”：[USERNAME]”

请给我一些想法如何解决这个问题或我可以将 Campaign Monitor JSON 放入 Google 电子表格的其他方式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-02T15:47:18.307

我在2014 年 3 月 19 日下午 5 点 18 分（无固定链接）的 Joey[的主页上](http://blog.fastfedora.com/projects/import-json)发现了一条有用的评论。

脚本正在访问的电子表格 API 未实现 URL 中的基本身份验证。您可以通过使用 Base64 编码的用户名和密码传递 fetchOptions 来解决此问题。

我对其进行了修改以删除虚拟变量并取得了一些成功。

将此添加到[ImportJSON 脚本编辑器代码](https://github.com/fastfedora/google-docs/blob/master/scripts/ImportJSON/Code.gs)的最后：

```
function ImportJSONBasicAuthentication(url, query, parseOptions, username, password) {

  var fetchOptions = {
    "headers" : {
       "Authorization" : 'Basic ' + Utilities.base64Encode(username + ':' + password)
    },
    muteHttpExceptions: true
  };

   return ImportJSONAdvanced(url, fetchOptions, query, parseOptions, includeXPath_, defaultTransform_);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:44:36.623

我看到您的身份验证屏幕弹出问题。因此，我会尝试不同的方法：

正如他们的[API 文档](http://www.campaignmonitor.com/api/getting-started/#authenticating_with_an_api_key)中所解释的，您可以在您拥有的服务器上设置他们为 API 提供的[包装器](http://www.campaignmonitor.com/api/samples-and-wrappers/)之一，而不是使用您的 API 密钥查询他们的 URL 。然后您可以在那里进行身份验证（[例如在 python 中](http://campaignmonitor.github.com/createsend-python/)）并向您自己的服务器发出请求。

我喜欢将[Flask](http://flask.pocoo.org/)用于这类事情，因为它非常轻量级且易于上手。

希望这可以让你开始！

# c - 使用 .C() 从 R 调用 C 代码：随机值每次都相同

> ID：14555135
> 
> 赞同：1
> 
> 时间：2013-01-28T03:40:05.760
> 
> 标签：c, r

我对这个提问者有相反的问题：[在 R 代码中传递种子/设置种子/C](https://stackoverflow.com/questions/14078636/passing-seed-setting-seed-c-within-r-code)。我的问题是我想使用 R 随机数生成器在 C 代码中生成一个随机数，但是每次运行它时，我都会得到相同的“随机”值。这是我的代码（包括我碰巧正在使用的头文件，这对于代码片段来说并非都是必需的）：

```
#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>
#include <math.h>   // C header files

#include <R.h>
#include <R_ext/Utils.h>
#include <Rmath.h>

void main(){
GetRNGstate();
double u = unif_rand();
PutRNGstate();
Rprintf("%f\n",u);
} 
```

现在我在使用 R CMD SHLIB 编译并使用 dyn.load() 后从 R Windows GUI 调用它：

```
> .C("main")
0.000889
list() 
```

现在，如果我关闭 R，重新启动，然后 dyn.load() 再次（但没有第二次编译）：

```
> .C("main")
0.000889
list() 
```

根据我在互联网上找到的各种代码和“编写 R 扩展”手册，这不应该发生。但我可能只是错过了一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:54:23.260

我无法复制这个。

这是一个完整且可重现的示例，仅依靠[inline](http://cran.r-project.org/package=inline)包来帮助构建、编译、链接和加载最小函数：

```
R> library(inline)
R> src <- '
+   GetRNGstate();
+   double u = unif_rand();
+   Rprintf("%f\\n",u);
+   PutRNGstate();
+   return R_NilValue;
+ '
R> fun <- cxxfunction(signature(), body=src)
R> set.seed(42)
R> invisible(fun())   # invisible to suppress the NULL return in foo()
0.914806
R> invisible(fun())
0.937075
R> invisible(fun())
0.286140
R> invisible(fun())
0.830448
R> invisible(fun())
0.641746
R> 
```

如果我重置种子，同样的序列开始：

```
R> set.seed(42)
R> invisible(fun())
0.914806
R> invisible(fun())
0.937075
R> invisible(fun())
0.286140
R> 
```

您可能正在加载/运行具有与设置 RNG 相关的副作用的不同功能。此外，以防万一，您的示例无法加载，因为您无法将带有 a 的函数加载`main()`到 R 本身中。

# asp.net-mvc - 使用 Kendo MVC Grid 和其他元素提交表单

> ID：14555137
> 
> 赞同：14
> 
> 时间：2013-01-28T03:40:20.880
> 
> 标签：asp.net-mvc, post, user-interface, grid, kendo-ui

我正在尝试获取一个包含 Kendo MVC 网格和其他要提交的元素的表单。

*   View 模型包含三个字符串字段和一个`IEnumerable`集合。
*   网格是服务器绑定的。我没有使用网格添加任何元素或从列表中删除任何元素，但网格包含映射到列表项中的布尔列的复选框。

每当我提交此表单时，三个字符串元素都会在 post 方法中返回，但列表始终为空。

**这是数据模型：**

```
public class Parent
{
    public string Field1 { get; set; }
    public string Field2 { get; set; }
    public string Comments { get; set; }
    public IEnumerable<ChildItems> Children { get; set; }
}

public class ChildItems
{
    public string ChildField1 { get; set; }
    public string ChildField2 { get; set; }
    public boolean Include { get; set; }
} 
```

**这是我的观点：**

```
@{
    ViewBag.Title = "Index";
}
@model GridInForm.Models.Parent

@using(Html.BeginForm("Save", "Home"))
{
    <fieldset>
        <legend>Editing Parent</legend>

        @Html.LabelFor(parent => parent.Field1)
        @Html.EditorFor(parent => parent.Field1)

        @Html.LabelFor(parent => parent.Field2)
        @Html.EditorFor(parent => parent.Field2)
        @Html.LabelFor(parent => parent.Comments)
        @Html.EditorFor(parent => parent.Comments)
        @(Html.Kendo().Grid(Model.Children)
            .Name("Children")
            .ToolBar(tools => tools.Create().Text("Add new Children"))
            .Editable(editable => editable.Mode(GridEditMode.PopUp).CreateAt(GridInsertRowPosition.Bottom))
            .Columns(columns =>
            {
                columns.Bound(p => p.ChildField1).ClientTemplate("#= ChildField1 #" + 
                    "<input type='hidden' name='ChildField1[#= index(data)#].ChildField1' value='#= Name #' />"
                );

                columns.Bound(p => p.ChildField2).Hidden().ClientTemplate("#= ChildField1 #" +
                    "<input type='hidden' name='ChildField1[#= index(data)#].ChildField1' value='#= ChildField1 #' />"
                );

                columns.Command(command => 
                {
                    // command.Destroy();
                    command.Edit();
                }).Width(100);
            })
            .DataSource(dataSource => dataSource
                .Server()
                .Create("Create", "Home")
                .Read("Index", "Home")
                .Update("Update", "Home")
                .Model(model => 
                {
                    model.Id(p => p.ChildField1);
                    model.Field(p => p.ChildField1).Editable(false);
                })
                //.ServerOperation(true)
            )
        )
    </fieldset>

    <input type="submit" value="Save" />
}

<script>
    function index(dataItem) {
        alert("bindind");
        var data = $("#Products").data("kendoGrid").dataSource.data();
        return data.indexOf(dataItem);
    }
</script> 
```

当我提交表单时，我将父项返回到视图模型中，但`IEnumerable`网格中的字段始终为空。

这不是这样做的方法吗，如果是这样，完成这样的事情的方法是什么？我在以前的 Telerik 版本上遇到过这个问题，我发现在 Kendo UI 上也是如此。任何方向将不胜感激。这是一个长期存在的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T15:32:13.370

我有这个场景在我的项目中完美运行。这是我的网格声明...

```
@(Html.Kendo().Grid(Model.ChildLines)
    .Name("RequestLinesGrid")
    .Editable(editable => editable.Mode(Kendo.Mvc.UI.GridEditMode.InCell))
         .Columns(columns =>
         {
             columns.Bound(p => p.ItemCode).ClientTemplate("#= ItemCode #" +
               "<input type='hidden' name='MyLines[#= index(data)#].ItemCode' value='#= ItemCode #' />"
             );
             columns.Bound(p => p.Description).ClientTemplate("#= Description #" +
               "<input type='hidden' name='MyLines[#= index(data)#].Description' value='#= Description #' />"
             );
             columns.Bound(p => p.UoM).ClientTemplate("#= UoM #" +
               "<input type='hidden' name='MyLines[#= index(data)#].UoM' value='#= UoM #' />"
             );
             columns.Bound(p => p.QtyCC).ClientTemplate("#= QtyCC #" +
                "<input type='hidden' name='MyLines[#= index(data)#].QtyCC' value='#= QtyCC #' />"
             );
             columns.Bound(p => p.QtyEmployee).ClientTemplate("#= QtyEmployee #" +
                "<input type='hidden' name='MyLines[#= index(data)#].QtyEmployee' value='#= QtyEmployee #' />"
             );
             columns.Bound(p => p.ItemListLineID).Hidden(true).ClientTemplate("#= ItemListLineID #" +
                "<input type='hidden' name='MyLines[#= index(data)#].ItemListLineID' value='#= ItemListLineID #' />"
             );
             columns.Bound(p => p.ItemListCode).Hidden(true).ClientTemplate("#= ItemListCode #" +
                "<input type='hidden' name='MyLines[#= index(data)#].ItemListCode' value='#= ItemListCode #' />"
             );
             columns.Command(command =>
             {
                 command.Destroy();
             }).Width(200);
         })
    .DataSource(dataSource => dataSource.Ajax()
         .Model(m =>
         {
             m.Id(p => p.ItemCode);
             m.Field(p => p.ItemCode).Editable(false);
             m.Field(p => p.Description).Editable(false);
             m.Field(p => p.UoM).Editable(false);
             m.Field(p => p.QtyCC).Editable(true);
             m.Field(p => p.QtyEmployee).Editable(true);
             m.Field(p => p.ItemListLineID).Editable(false);
             m.Field(p => p.ItemListCode).Editable(false);
         })
         .Batch(true)
         .ServerOperation(false)
         // these are dummy action methods that don't really exist.
         .Update("upd", "upd") 
         .Destroy("del", "del")
         .Create("cre", "cre")
    )
    .Navigatable()
) 
```

这是“索引”功能：

```
function index(dataItem) {
    var data = $("#RequestLinesGrid").data("kendoGrid").dataSource.data();

    return data.indexOf(dataItem);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:35:28.240

因此，这是您问题解决方案的一部分。我扩展了 kendo 数据源，因此您可以调用此函数并获取所有更新、删除、创建的项目。只需将其转换为 json 并将其与您的其余表单字段一起发送回。我现在已经开始工作了。以为我会分享。

```
kendo.data.DataSource.prototype.GetUnsavedData = function () {
    var that = this,
        idx,
        length,
        created = [],
        updated = [],
        destroyed = that._destroyed,
    allRows = [],
        data = that._flatData(that._data);

    for (idx = 0, length = data.length; idx < length; idx++) {
        if (data[idx].isNew()) {
            created.push(data[idx]);
        } else if (data[idx].dirty) {
            updated.push(data[idx]);
        }
    }

    allRows = created.concat(updated).concat(destroyed);
    var allRowsJSON = JSON.stringify(allRows);
    return allRowsJSON;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-15T08:45:14.677

我受到[codebeastie](http://blog.codebeastie.com/return-grid-contents-within-form-post/)和 @user1878526 的启发，产生了以下混合想法 - 只需将网格作为字符串列表返回到控制器保存操作：

控制器：

```
Function Save(ThisForum As myModel, gridData As List(Of String)) As ActionResult 
```

看法：

```
$("#myForm").submit(function (event) {
    var grid = $("#myGrid").data("kendoGrid");
    var data = grid.dataSource.view();
    var input;
    for (var i = 0; i < data.length; i++) {
        var s = JSON.stringify(data[i]).replace(/["']/g, "");
        input = $("<input>", { type: 'hidden', name: 'data[' + i + ']', value: s });
        $(this).append($(input));
    }
}) 
```

然后可以通过`Split`ing 逗号和冒号在控制器中合理地轻松解析它。

# php - 带有 PHP 不同键的 MongoDB GROUP 函数（或 Map Reduce，如有必要）

> ID：14555140
> 
> 赞同：0
> 
> 时间：2013-01-28T03:40:38.123
> 
> 标签：php, mongodb, mapreduce, grouping, distinct

有没有人有一个在 PHP 中运行具有 DISTINCT 计数的组函数的好方法？情况是这样的：我想检查我们应用程序的唯一登录。这是我正在查询的当前集合中的文档的样子：

```
Array
(
    [_id] => MongoId Object
        (
            [$id] => 50f6da87686ba9f449000003
        )

    [userId] => 50f6bd0f686ba91a4000000f
    [action] => login
    [time] => 1358355079 
```

我想做的是通过按日期的组语句计算唯一的用户 ID。这是我正在使用的组语句（在 PHP 中）：

```
$map= new MongoCode('function(frequency) {
                             var date = new Date(Number(frequency.time) * 1000 - (8 * 3600000));
                             var dd = date.getDate();
                             var yyyy = date.getFullYear();
                             var mm = date.getMonth() + 1;
                             if(dd<10){dd="0"+dd}
                             if(mm<10){mm="0"+mm}
                             var transday = yyyy + "-"+ mm + "-" + dd;
                             return{"date": transday}
                    }');
$initial = array('logins' => array());
$reduce = "function(obj, prev){
                prev.logins.push(obj.userId);
                     }";

try{
  $distinct = array();
  $g = $this->_bingomongo->selectCollection("UserLog")->group($map, $initial, $reduce); 
```

从这一点开始，我只是`array_unique`在记忆中做一个......但我真正想做的（并且在网上找不到好的答案）是在 group by 中运行一个不同的计数。我已经看到了其他几个我们可以使用 an 的例子，`array(distinct=>'key')`但我希望做一个计数。有什么想法吗？

这是当前（不完美）格式的其余代码：

```
 foreach($g['retval'] as $k=>$v) {
          $distinct[date('m.d', strtotime($v['date']))] = array_unique($v['logins']);
      }
    }
    catch(Exception $e) {
       return $e;
    } return $g; 
```

如果绝对必要，很高兴在 map/reduce 中执行此操作 - 但宁愿找到一种方法将其保持在组中（作为 COUNT(distinct)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:39:54.747

你应该能够做这样的事情：

```
...
$initial = array('logins' => array());
$reduce = "function(obj, prev){
               prev.logins[obj.userId] = 1;
           }";

$finalize = "function(result) {
                 result.loginList = Object.keys(result.logins);
                 result.count = result.loginList.length;
            }";

try{
    $distinct = array();
    $g = $this->_bingomongo->selectCollection("UserLog")->group(
        $map, $initial, $reduce, array('finalize'=>$finalize)); 
```

# c - 确定 LBR 堆栈何时满

> ID：14555147
> 
> 赞同：0
> 
> 时间：2013-01-28T03:41:45.043
> 
> 标签：c, linux, x86, kernel-module, msr

我将从我参与的项目的一些背景开始。我们正在尝试编写一个 Linux 内核模块（在 3.5 内核中），它将启用一些较新的 x86 处理器中存在的最后分支记录 (LBR) 功能并将分支数据写入硬盘上的文件以供以后分析。

我们目前已经能够启用 LBR，并且可以看到 LBR 堆栈顶部指针在检测到分支时发生变化（因此我们知道 LBR 已启用）。

我们的问题出现在我们无法确定如何确定 LBR 堆栈何时变满，以便我们可以从中读取数据并将其写入硬盘。理想情况下，我们希望在 LBR 中启用一个选项，以便在 LBR 堆栈接近满时抛出异常，并编写一个检索信息的处理程序。

到目前为止，我能找到的最接近的方法是设置 IA32_DEBUGCTL MSR 上的第 8 位，这使得每次检测到分支时都可以引发中断。不幸的是，每次发生分支时都写入磁盘会产生比我们想要的更多的性能影响。我们宁愿在每次 LBR 堆栈满时分批写入数据，而不是在每个单独的分支上写入数据。有没有我遗漏的替代方案，或者我们只需要在每个分支之后硬着头皮写到磁盘？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:33:05.470

当您想开始记录时，您应该能够读取 TOS，然后在中断期间检查 TOS 是否等于该原始值，以确定堆栈是否已满新记录，并且每个完整堆栈仅执行一次磁盘写入。如果您愿意丢失一些早期记录，另一种选择是仅在 TOS 等于值范围内的某个任意值时才写入磁盘，从而导致每个完整堆栈一次写入磁盘。

一个问题可能是我们被推送到 LBR 堆栈的中断本身，因为它们被视为跳转，但我不确定这将如何根据不同的权限级别工作。

# android - Eclipse Android 包重构失败 - 内部错误

> ID：14555148
> 
> 赞同：3
> 
> 时间：2013-01-28T03:41:53.357
> 
> 标签：android, eclipse, android-manifest, adt, automated-refactoring

我正在尝试使用 Eclipse 中的 Android 工具 > 重命名应用程序包选项来测试我对平板电脑上 FBReaderJ 的更改，同时保持官方版本可用。当我使用此命令并输入新名称时，出现错误：

```
An unexpected exception occurred while creating a change object. See the error log for more details. 
```

在错误日志中，我有：

```
Internal Error 
```

堆栈跟踪：

```
 java.lang.reflect.InvocationTargetException
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:421)
    at org.eclipse.ui.internal.WorkbenchWindow$13.run(WorkbenchWindow.java:1675)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:1672)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizard.createChange(RefactoringWizard.java:663)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizard.computeUserInputSuccessorPage(RefactoringWizard.java:502)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizard.getStartingPage(RefactoringWizard.java:472)
    at org.eclipse.jface.wizard.WizardDialog.showStartingPage(WizardDialog.java:1271)
    at org.eclipse.jface.wizard.WizardDialog.createContents(WizardDialog.java:610)
    at org.eclipse.jface.window.Window.create(Window.java:431)
    at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1089)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:178)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:202)
    at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:122)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.RenamePackageAction.initiateAndroidPackageRefactoring(RenamePackageAction.java:168)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.RenamePackageAction.promptNewName(RenamePackageAction.java:151)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.RenamePackageAction.run(RenamePackageAction.java:106)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.NullPointerException
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.ApplicationPackageNameRefactoring$JavaFileVisitor.visit(ApplicationPackageNameRefactoring.java:423)
    at org.eclipse.core.internal.resources.Resource$2.visit(Resource.java:126)
    at org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:85)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)
    at org.eclipse.core.internal.watson.ElementTreeIterator.iterate(ElementTreeIterator.java:127)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:95)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:52)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:124)
    at org.eclipse.core.internal.resources.Resource.accept(Resource.java:108)
    at com.android.ide.eclipse.adt.internal.refactorings.renamepackage.ApplicationPackageNameRefactoring.createChange(ApplicationPackageNameRefactoring.java:123)
    at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:124)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

会话数据：

```
eclipse.buildId=M20120914-1800
java.version=1.6.0_24
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os linux -ws gtk -arch x86_64 -product org.eclipse.epp.package.java.product 
```

我对 Android 很陌生，我不知道从哪里开始。[这](https://stackoverflow.com/questions/6465127/rename-android-package-name-fails)似乎是一个非常相似的问题，但我无法弄清楚[user756905](https://stackoverflow.com/users/756905/user756905)建议应该尝试什么......

欢迎提出任何建议，特别是如果在我尝试重新安装 Eclipse 之前有什么可以尝试的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T12:10:33.880

问题是对于您的某些类，它无法对包进行重命名。尝试在项目中搜索以检查您是否有某个没有包的类或是否已注释。

# python - 简化复杂的 if-else 条件以检查是否 len(list) =0 - Python

> ID：14555149
> 
> 赞同：0
> 
> 时间：2013-01-28T03:42:00.150
> 
> 标签：python, if-statement, convolution, ternary

我正在尝试检查 sent1 或 sent2 的长度是否为零，如果他们有我想**设置** `sent_witn_not_null`为**非零列表的列表**。但是我写的 if-else 条件似乎很复杂。这样做的更简单方法是什么？

```
sent1 = ["this","is","foo","bar"]
sent2 = []

if len(sent1) or len(sent2) == 0:
    sent_with_not_null = sent2 if len(sent1) == 0 else sent1
    sent_with_not_null = sent1 if len(sent2) == 0 else sent2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:44:25.290

利用 Python 的**合并运算符**。

```
sent_with_not_null = sent2 and sent1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:50:12.037

像这样的东西？

```
In [4]: if sent1 or sent2:
    sent_with_not_null=sent1 if sent1 else sent2
   ...:     

In [5]: sent_with_not_null
Out[5]: ['this', 'is', 'foo', 'bar'] 
```

或者：

```
In [11]: if any((sent1,sent2)): #in case both sent1 and sent2 are len==0

    sent_with_not_null =sent1 or sent2   #set the first True item to sent_with_not_null 
                                         #else the last one
   ....:     

In [12]: sent_with_not_null
Out[12]: ['this', 'is', 'foo', 'bar'] 
```

# actionscript-3 - 何时子类化以及何时使用现有类？

> ID：14555152
> 
> 赞同：2
> 
> 时间：2013-01-28T03:43:02.110
> 
> 标签：actionscript-3, flash, oop, events

我想调度事件来宣布异步进程的进度。该事件应包含 2 个属性：已完成的工作和总工作量。

顾名思义；）我可以使用[ProgressEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/ProgressEvent.html)；它具有我可以使用的 bytesLoaded 和 bytesTotal 属性。但是，我的异步进程没有加载字节，它处理像素，所以属性名称对我的用例有点误导——尽管类名是完美的。

另一种方法是创建一个具有两个属性的自定义事件，我可以按自己喜欢的方式命名。但这意味着将另一个类添加到代码库中。

所以我的问题是；重用属性合适但命名不理想的现有类会更好吗？或者创建一个完全符合要求的自定义类？显然，一个额外的类没什么大不了的，但是 OOP 就是重用东西，所以添加一个不必要的类确实让我感到不安。

我等着你的想法...

PS：这是我在堆栈上的第一个问题，所以要温柔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T06:25:11.527

为清楚起见，我将创建一个新类。添加一个新类根本不需要太多开销，尤其是对于像事件这样简单的事情。我发现当我不必进行心理翻译（就像`bytesLoaded`真的意味着`pixelsLoaded`）时，代码更具可读性。对我来说，这类似于为变量选择糟糕的名称。

此外，通过采用另一条路线并重新使用`ProgressEvent`该类，我会觉得有必要记录代码以表明我们正在处理像素而不是字节。如果您有很多使用该事件的类，那将开始变得混乱。

重复使用很棒，但我会选择清晰，只要它不影响您的工作效率或应用程序的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:02:05.723

清楚地写在文档中，使用自定义事件或 ProgressEvent 很好。

# extjs - ExtJs 的未定义分机

> ID：14555154
> 
> 赞同：3
> 
> 时间：2013-01-28T03:43:15.957
> 
> 标签：extjs, extjs4

ExtJs 新手。我看过一堆线程，但我尝试的一切都不起作用。我正在使用 ExtJS 4，并且我不断收到以下代码的未定义 Ext 错误：

```
<html>
<head>

    <script type="text/javascript" src="/extjs/ext-all.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body></body>
</html>

//app.js
Ext.application({
    name: 'HelloExt',
    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: [
                {
                    title: 'Hello Ext',
                    html : 'Hello! Welcome to Ext JS.'
                }
            ]
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T03:54:24.307

检查 ext-all.js 的路径。确保第一个斜线是正确的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T05:10:43.270

如果问题仅发生在 IE 中，则只需按`ctrl`+即可`F5`在 IE 中上传最新的 javascript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:50:35.143

您的浏览器无法加载：

```
<script type="text/javascript" src="/extjs/ext-all.js"></script> 
```

这几乎肯定是一个路径问题。因此以下行：

```
Ext.application({ 
```

将引发您看到的错误（因为范围内没有对象`Ext`）。

> **请注意，extjs 库的路径是相对于您的 index.html 路径**

所以 if`extjs`是 index.html 所在文件夹的子文件夹。你真的应该使用：

```
<script type="text/javascript" src="extjs/ext-all.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:45:05.270

如果您的 ext-all.js 路径正确，请尝试

```
<script type="text/javascript" src="../extjs/ext-all.js"></script> 
```

# c# - 使用 C# 从 SQL 检索图像到 asp:Image

> ID：14555160
> 
> 赞同：0
> 
> 时间：2013-01-28T03:44:28.040
> 
> 标签：c#, asp.net, sql-server-2008-express

我正在尝试从 SQL Server 2008 Express 中检索图像并将其插入到`<ASP:Image>`. 我尝试过使用 a`MemoryStream`但我似乎无法正确使用它。

我现在的 C# 代码如下所示：

```
 try
  {
     con.Open();

     SqlCommand sqlGetStep1 = new SqlCommand("staff_getStep1", con);
     {
         sqlGetStep1.CommandType = CommandType.StoredProcedure;
         sqlGetStep1.Parameters.Add(new SqlParameter("@taskID", Convert.ToInt16(taskID)));
         SqlDataReader step1 = sqlGetStep1.ExecuteReader();

         //Check if username exists
         if (step1.Read())
         {
            step1Text = (string)step1["step1Text"];
            step1Image = (byte)step1["step1Image"];

          }//if 
          else
          {
             step1Text = "null";
             step1Image = 0;
          }//else

           }//sqlDeleteNotification

       }//try
       catch (SqlException sqlEx)
       {
           lblSQLError.Visible = true;
           lblSQLError.Text = sqlEx.Message.ToString();
        }//catach sql
        catch (Exception ex)
       {
           lblError.Visible = true;
           lblError.Text = ex.ToString();

       }//Catch exception
       finally
       {
           con.Close();
       }//Finally 
```

我想在其中显示图像的 aspx 代码如下所示：

```
<asp:Panel runat="server" ID="pnlStep1" Visible="false" CssClass="NormalText">        
   <asp:Label runat="server" ID="lblStep1Text" Text="Step 1 Instruction: "></asp:Label>
   <asp:TextBox runat="server" ID="txtStep1Text" Text="" ReadOnly="true"></asp:TextBox>
   <asp:Label runat="server" ID="lblStep1Image" Text="Step 1 Image: "></asp:Label>
   <asp:Image runat="server" ID="imgStep1" ImageUrl="" Height="100px" Width="100px"/>
</asp:Panel> 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:48:19.307

您需要有一个单独的 url，它获取要交付的图像的 id（在本例中为步骤 id），并将内容作为具有正确 MIME 类型的结果交付。使用此方法的 url 作为`asp:Image`. 通常，您会将此（在 WebForms 中）实现为 HttpHandler。请参阅[如何在 ASP.NET 中返回图像作为响应](https://stackoverflow.com/questions/9498903/how-to-return-an-image-as-the-response-in-asp-net)

# java - 短时间内YGC太多？

> ID：14555161
> 
> 赞同：2
> 
> 时间：2013-01-28T03:44:55.017
> 
> 标签：java, memory-management, memory-leaks, garbage-collection

我们正在监控 gc，下面是快照

```
 Timestamp         S0     S1     E      O      P   YGC     YGCT       FGC    FGCT     GCT
      1118019.5  78.57   0.00  81.28  95.76  80.30  13078  708.590   107   16.394  724.984
      1118024.6  78.57   0.00  81.81  95.76  80.30  13078  708.590   107   16.394  724.984
      1118029.6   0.00  71.43   0.43  95.89  80.30  13079  708.592   107   16.394  724.986
      1118034.5   0.00  71.43   0.96  95.89  80.30  13079  708.592   107   16.394  724.986
      1118039.5   0.00  71.43   2.00  95.89  80.30  13079  708.592   107   16.394  724.986
      1118044.6   0.00  71.43   2.53  95.89  80.30  13079  708.592   107   16.394  724.986
      1118049.6   0.00  71.43  24.05  95.89  80.30  13079  708.592   107   16.394  724.986
      1118054.5   0.00  71.43  24.69  95.89  80.30  13079  708.592   107   16.394  724.986
      1118059.6   0.00  71.43  25.21  95.89  80.30  13079  708.592   107   16.394  724.986 
```

下面我们运行 gccause 来找出答案。

```
 Timestamp         S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC
      1117986.5  78.57   0.00   0.32  95.76  80.30  13078  708.590   107   16.394  724.984 Allocation Failure   No GC
      1117991.6  78.57   0.00   0.85  95.76  80.30  13078  708.590   107   16.394  724.984 Allocation Failure   No GC
      1117996.6  78.57   0.00  22.27  95.76  80.30  13078  708.590   107   16.394  724.984 Allocation Failure   No GC 
```

这有什么可怕的情况吗？只是想确认这是一个令人担忧的情况吗？分配失败和没有GC是什么意思？

# css - 浏览器输入文本选择颜色

> ID：14555164
> 
> 赞同：2
> 
> 时间：2013-01-28T03:44:56.980
> 
> 标签：css, internet-explorer

在使用 jQuery UI 和[jQx](http://www.jqwidgets.com)的项目中，我们将用户选择的主题应用于所有表单字段并遇到了这个问题：

在输入（文本）字段中选择文本时，不同浏览器的背景颜色不同。我知道这是特定于浏览器/操作系统的，但它会导致这种奇怪：

### 铬合金

![在此处输入图像描述](../Images/e0ef880c2869e6aa032dd1236db18da3.png)

### IE 8 和 9

![在此处输入图像描述](../Images/e74f08fcf40760fcb5e37412c48ddf2c.png)

如您所见，在 IE 中选择的文本可能会导致问题，因为选择背景颜色与元素的其余部分混合。（为什么 IE 将这种颜色设置为白色超出了我的理解。）

我已经尝试过“[改变文本选择颜色](http://css-tricks.com/snippets/css/change-text-selection-color/)”的 CSS 技巧，但它在我试图改变*之外的任何地方都有效。*

是否有一些巫术魔法或其他一些记录不充分的功能可以使 IE 的行为不像......它的行为方式？（并希望 IE10*真的不那么* [糟糕](http://faildesk.net/2012/11/30/ie-10-sucks-less-and-microsoft-wants-you-admit-it/)。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T14:27:35.043

尽管这个问题已经很老了，但我在这里回答是为了拯救其他试图解决这个想法的人，这是不可能的。当我们偶然发现答案时，我们准备放弃并接受 Internet Explorer 的这种行为。

似乎 Internet Explorer 使用此突出显示方法来处理在其样式中设置了颜色的任何文本框中的选定文本 - 如果您删除此属性，突出显示将正常工作。

当我们将颜色属性移到它自己的类中并将这两个类应用于文本框时，我们偶然发现了答案。

下面将在 IE 中显示此文本选择突出显示：

```
<input type="text" id="uiSizeWidth" class="SizeInput">

.SizeInput {
    width: 70px;
    text-align: center;
    height: 30px;
    font-weight: bold;
    margin: 2px;
    color: #ef4915;
} 
```

但这不会：

```
<input type="text" id="uiSizeWidth" class="SizeInput InputColor">

.SizeInput {
    width: 70px;
    text-align: center;
    height: 30px;
    font-weight: bold;
    margin: 2px;
}

.InputColor {
    color: #ef4915;
} 
```

然后，您可以使用以下 CSS 将突出显示设置为任何样式：

```
::-moz-selection {
    color: #fff;
    background: #39f;
} 
```

# c - 函数一直返回 0 且参数未读取

> ID：14555168
> 
> 赞同：0
> 
> 时间：2013-01-28T03:46:02.310
> 
> 标签：c

我有这个代码：

```
#include<stdio.h>
#include<conio.h>
#include<math.h>

float sinfa(num1, num2)
{
    float fc;
    float powers;
    if(num1 == ""){
    powers = pow(num2,4);
    }else{
    powers = pow(num1,4);
    }
    fc = sin(num1-powers+1);
    return (fc);
}

float tp(fa,fb,num1,num2)
{
    float p;
    float fm2 = fa*num2;
    float fm1 = fb*num1;
    p = (fm2-fm1)/(fa-fb);
    printf("%f",fa);
    return (p);
}

float main()
{
double num1;
double num2;
float fa;
float fb;
float p1;

    clrscr();
    printf("Enter number 1: \n");
    scanf("%d", &num1);
    getch();
    printf("Enter number 2: \n");
    scanf("%d", &num2);
    getch();
    clrscr();
    fa = sinfa(num1);
    printf("%f \n",fa);
    getch();
    fb = sinfa(num2);
    printf("%f",fb);
    getch();
    clrscr();
    p1 = tp(fa,fb,num1,num2);
    printf("%f",p1);
    getch();

} 
```

我一直从函数 tp 得到 0，当我向他们发送任何想法时，参数没有输入，为什么？因为对于 sinfa，参数被发送并返回一个值

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T03:46:47.577

您需要为函数参数指定类型。

```
float tp(float fa,float fb,int num1,int num2) 
```

否则它们会被考虑`int`，这会导致混乱的效果。

同样，您应该修复

```
float sinfa(int num1, int num2) 
```

这不会引起问题，但明确说明您的意思总是好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T03:49:31.043

> 始终牢记一件事，养成在函数声明和函数定义时提及变量数据类型的习惯。在这里，您没有提到类型，这意味着它正在将其视为默认 dat 类型`int`。

```
float tp(fa,fb,num1,num2)
         ^^missing data type at all parameter, mention data type 
```

# c - 共享库相互依赖

> ID：14555180
> 
> 赞同：0
> 
> 时间：2013-01-28T03:47:58.050
> 
> 标签：c, node.js, gcc, shared-libraries

我有两个共享库。libjvm.so 和 file1.so ..

file1.so 依赖于 libjvm.so 文件。

我需要找到一种方法来链接两者并执行一个 js 文件，该文件使用 file1.so 中定义的几个模块。我没有 file1.so 的源代码

每当我执行节点文件时，我总是收到以下错误消息：

```
Error: Dynamic Linking Error: ./file1.so: undefined symbol: JNI_CreateJavaVM 
```

我怎样才能解决这个问题？

# text - Apple Script to output text and links to spreadsheet

> ID：14555182
> 
> 赞同：0
> 
> 时间：2013-01-28T03:48:10.930
> 
> 标签：text, copy, applescript

My goal is to get a Apple script running that can pull text from the top 50 apps and put them into a spread sheet with a few different columns. One for rank, App Name, and download link.

Heres the link: [http://www.apple.com/itunes/charts/free-apps/](http://www.apple.com/itunes/charts/free-apps/)

I'm not the best apple scripture but any advice or code would be VERY much appreciated. Thanks for listening!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:59:30.890

I don't have numbers but I'm sure you can figure out the rest...

```
tell application "Safari"
    set myUrls to do JavaScript "var hitList = [];
    for (i = 0; i<50; i++)
    {
    hitList.push(document.getElementsByTagName('strong')[i].parentNode.childNodes[1].href)
    }
    hitList;" in document 1

    set appNames to do JavaScript "var hitList = [];
    for (i = 0; i<50; i++)
    {
    hitList.push(document.getElementsByTagName('strong')[i].parentNode.childNodes[2].childNodes[0].childNodes[0].nodeValue)
    }
    hitList;" in document 1
end tell

display dialog "1st App name: " & item 1 of appNames & return & "1st URL: " & item 1 of myUrls 
```

# php - PHP 5.4 与 5.3 应用程序错误

> ID：14555184
> 
> 赞同：1
> 
> 时间：2013-01-28T03:48:40.330
> 
> 标签：php, syntax-error

我正在用 php 构建一个 web 应用程序，并在 php 5.4 中构建它。但是，我刚刚意识到我的服务器只运行 5.3 或 5.2。在我的控制器文件中，我有这行代码

```
 $this->load->model('admin/upholstery_category_admin');
    $this->load->helper('url');

    if($method == 'add')
    {
        $categories = $this->db->get('category')->result();
line 158 here>>     $data = [];
        $data['cats'] = $categories;
        $data['message'] = ''; 
```

这是导致此错误

```
 Parse error: syntax error, unexpected '[' in /home/content/51/6663351/html/application/controllers/admin.php on line 158 
```

如何更改语法以更正此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T03:50:31.820

改变：

```
$data = []; 
```

至

```
$data =array(); 
```

**从 PHP 5.4 开始，您还可以使用短数组语法，它将 array() 替换为 []。**所以它只适用于 5.4 及更高版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:49:17.507

`[]`是数组的缩短语法。所以应该是：

```
$data = array(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T03:49:18.713

PHP 仅在 5.4 中添加了数组文字。将此用于 PHP < 5.4：

```
$data = array(); 
```

# php - 在ajax中组合多个函数

> ID：14555186
> 
> 赞同：1
> 
> 时间：2013-01-28T03:48:47.210
> 
> 标签：php, jquery, ajax, zend-framework, zurb-foundation

我正在使用 zurb 粉底制作用于 mo 过滤器的标签药丸。

可以结合这个吗？我只想使用 1 个函数，因为它们几乎相同，只是变量在变化。有没有可能让它更有活力。我认为 .val() 与定义列表不兼容。

```
<dl class="tabs pill">
  <dd class="active"><a class="allTab" href='#'>ALL</a></dd>
  <dd><a class="Tab1" href="#">filter1</a></dd>
  <dd><a class="Tab2" href="#">filter2</a></dd>
  <dd><a class="Tab3" href="#">filter3</a></dd> 
</dl> 
```

JS：

```
$('.tab1').live('click',function(){
  var dis = $(this);
  var str= "filter1";
    $('#searchForm1').ajaxSubmit({
      type: 'get',
        url: '/sample/search?str='+str,
        beforeSend:function(){
          dis.text('Filtering...');
            dis.css({"font-size":"11px"});    
        },
        success:function(html){
          $('.sample').html(html);
              dis.text('filter1');
                dis.css({"font-size":"14px"});
        },
        error:function() {
          alert('Network Error..Please try again.');
        }
  });
});
$('.tab2').live('click',function(){
  var dis = $(this);
  var str= "filter2";
    $('#searchForm1').ajaxSubmit({
      type: 'get',
        url: '/sample/search?str='+str,
        beforeSend:function(){
          dis.text('Filtering...');
            dis.css({"font-size":"11px"});
        },
        success:function(html){
          $('.sample').html(html);
              dis.text('filter2');
                dis.css({"font-size":"14px"});
        },
        error:function() {
          alert('Network Error..Please try again.');
        }
  });
}); 
$('.tab3').live('click',function(){
  var dis = $(this);
  var str= "filter3";
    $('#searchForm1').ajaxSubmit({
      type: 'get',
        url: '/sample/search?str='+str,
        beforeSend:function(){
          dis.text('Filtering...');
            dis.css({"font-size":"11px"});
        },
        success:function(html){
          $('.sample').html(html);
              dis.text('filter3');
                dis.css({"font-size":"14px"});
        },
        error:function() {
          alert('Network Error..Please try again.');
        }
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:54:50.423

试试这样：

```
<dl class="tabs pill">
   <dd class="active"><a class="allTab" href='#'>ALL</a></dd>
   <dd><a class="tab" id="Tab1" href="#" data-certiria='filter1'>filter1</a></dd>
   <dd><a class="tab" id="Tab2" href="#" data-certiria='filter1'>filter2</a></dd>
   <dd><a class="tab" id="Tab3" href="#" data-certiria='filter1'>filter3</a></dd> 
</dl>

function filterTab(cretiria, clickedTab) {
    $('#searchForm1').ajaxSubmit({
        type: 'get',
        url: '/sample/search?str=' + cretiria,
        beforeSend: function () {
            clickedTab.text('Filtering...');
            clickedTab.css({
                "font-size": "11px"
            });
        },
        success: function (html) {
            $('.sample').html(html);
            clickedTab.text(cretiria);
            clickedTab.css({
                "font-size": "14px"
            });
        },
        error: function () {
            alert('Network Error..Please try again.');
        }
    });
}

$('.tab').live('click', function () {
    var dis = $(this);
    var str = $(this).data("certiria");
    filterTab(str, dis)
}); 
```

而不是再次处理相同的 ajax 请求代码，而是创建一个单独的函数。然后使用该选项卡内的数据元素来保存所需的过滤条件。然后使用一个通用的 click 函数来检索该数据元素并将其发送到 ajax 函数来管理请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:56:30.897

用于`.on`委托而不是`.live`. 然后，您可以使用几乎相同的方法，但如下所示：

```
$(".Tabs").on('click', 'dd', function () {
    var str = $(this).text();
    //...
}); 
```

# spotify - 无法通过树莓派上的 libspotify 登录到 spotify

> ID：14555190
> 
> 赞同：3
> 
> 时间：2013-01-28T03:49:02.193
> 
> 标签：spotify, raspberry-pi, libspotify

我在我的 Raspberry Pi 上使用 libspotify 12.1.103.gd51f6226 Release Linux-armv6-bcm2708hardfp，我认为按照自述文件中的说明一切正常。

我按照 spotify 给我的 appkey 更改了 appkey.c 但是当我运行 spshell 示例并尝试登录时，我得到一个错误

```
FATAL, TERMINATING: failed to log in to Spotify: Cannot connect to Spotify
Logged out
Exiting... 
```

我确定我使用了正确的用户名（我也尝试过电子邮件）和密码（我也尝试过更改密码），并且我也尝试了点唱机示例并得到了类似的错误。我可以很好地登录网站和 Windows 应用程序。

我认为我可能出错的一个地方是：

```
After this, ensure your PKG_CONFIG_PATH is set tocd 
include the libspotify control file, and that the lib directory is
in the library search path. 
```

我很确定我做得很好，并且在构建过程中我没有收到任何错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:26:50.737

我可以编译和登录。

我所做的只是简单地将 tar.gz 提取到然后..

```
sudo apt-get install libasound2-dev libreadline-dev
cd <libspotify folder>/share/doc/libspotify/examples
vim appkey.c 
```

然后添加您生成的应用程序密钥。但这似乎对你有用。

```
make LIBSPOTIFY_PATH=../../../..
spshell/spshell 
```

然后我可以登录并做很多事情，我还没有尝试过任何音频，因为我没有任何可用的扬声器/耳机。

如果您安装它而不是使用

```
cd <libspotify folder>
make install prefix=/usr/local 
```

如自述文件中所述，也运行

```
sudo ldconfig 
```

更新库缓存，然后进行正常编译。

```
cd <libspotify folder>/share/doc/libspotify/examples
make 
```

如果您怀疑自己编译的方式错误，请先执行“make clean”。

不知道这是否有帮助，但这就是我已经走了多远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:09:57.870

我遇到了完全相同的问题，您可以从我对这个问题的评论中看到。对我来说，结果是我的用户名包含非 ascii 字母的问题`ö`。但是由于我的计划一直是使用[pyspotify](https://pypi.python.org/pypi/pyspotify/1.1) ，所以我设法使用他们的点唱机示例登录，并在适当的地方对我的用户名进行硬编码，并在其前面添加漂亮的`u`小字，现在我可以登录到 spotify，请参阅点唱机示例中的 ~460 行：

```
session_m = Jukebox(options.username, options.password, True) 
```

我改成这样：

```
session_m = Jukebox(u"username_with_ö", options.password, True) 
```

现在我的问题是另一个问题，即我无法访问 /dev/dsp 但这是一个完全不同的问题。:)

**编辑** `apt-get install alsa-oss`解决上述问题，我的树莓现在正在播放音乐！

# javascript - Jplayer 音频在 firefox、opera 和 IE 中不起作用，但在 Chrome 中起作用

> ID：14555196
> 
> 赞同：5
> 
> 时间：2013-01-28T03:49:44.953
> 
> 标签：javascript, jquery, audio, jplayer

[http://www.jplayer.org/support/](http://www.jplayer.org/support/) - 这里是 jplayer 支持（向下滚动查看 jplayer 在 IE 6、7、8、firefox 和 opera 中哪里不起作用

设置 jplayer 音频 javascript：[http ://www.jplayer.org/latest/quick-start-guide/step-7-audio/](http://www.jplayer.org/latest/quick-start-guide/step-7-audio/)

现在的问题是，即使 jplayer 音频播放器可以在 Chrome 上运行，它也不能在 IE、firfox 和 Opera 上运行。我的问题是FAQ中提到的.swfPath的src不正确的问题？

swf 文件的完整目录是`helios.hud.ac.uk/u0867587/Mobile_app/jquery/Jplayer.swf`

该应用程序`previewaudio.php`是`helios.hud.ac.uk/u0867587/Mobile_app/previewaudio.php`

jQuery是：

```
<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        m4a: "<?php echo $dbAudioFile; ?>",
        oga: "<?php echo $dbAudioFile; ?>"
      });
    },
    swfPath: "jquery/",
    supplied: "m4a, oga"
  });
}); 
</script> 
```

我在萤火虫中得到了这个：不支持“audio/mpeg”的HTTP“Content-Type”。”这是什么意思？

这是音频的链接：[AUDIO](http://helios.hud.ac.uk/u0867587/Mobile_app/previewaudio.php?filename=Thorne,%20Grandma%27s%20Goodbye%20excerpt_4.m4a)

**更新：**

```
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>Preview Audio</title>
    <link type="text/css" href="jquery/skin/jplayer.blue.monday.css" rel="stylesheet" />
    <script type="text/javascript" src="jquery/jquery-1.7.min.js"></script>   
    <script type="text/javascript" src="jquery/jquery.jplayer.min.js"></script>
</head>

<body>

<?php

$getaudio = 'AudioFiles/' . $_GET['filename'];

$audioquery = "SELECT AudioFile FROM Audio WHERE (AudioFile = ?)";

        if (!$audiostmt = $mysqli->prepare($audioquery)) {
        // Handle errors with prepare operation here
}

// Bind parameter for statement
$audiostmt->bind_param("s", $getaudio);

// Execute the statement
$audiostmt->execute();

            if ($audiostmt->errno) 
            {
                // Handle query error here
            }

$audiostmt->bind_result($dbAudioFile); 

$audiostmt->fetch(); 

$audiostmt->close(); 

?>

<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        m4a: "<?php echo "http://helios.hud.ac.uk/u0867587/Mobile_app/".$dbAudioFile; ?>",
        mp3: "<?php echo "http://helios.hud.ac.uk/u0867587/Mobile_app/".$dbAudioFile; ?>",
        oga: "<?php echo "http://helios.hud.ac.uk/u0867587/Mobile_app/".$dbAudioFile; ?>"
      });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "m4a, mp3, oga"
  });
}); 
</script>
<?php echo "File Path " . $dbAudioFile; ?>
  <div id="jquery_jplayer_1" class="jp-jplayer"></div>
  <div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
      <div class="jp-gui jp-interface">
        <ul class="jp-controls">
          <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
          <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
          <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
          <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
          <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
          <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
        </ul>
        <div class="jp-progress">
          <div class="jp-seek-bar">
            <div class="jp-play-bar"></div>
          </div>
        </div>
        <div class="jp-volume-bar">
          <div class="jp-volume-bar-value"></div>
        </div>
        <div class="jp-time-holder">
          <div class="jp-current-time"></div>
          <div class="jp-duration"></div>
          <ul class="jp-toggles">
            <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
            <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:01:30.453

我在这里发现了一些问题[音频](http://helios.hud.ac.uk/u0867587/Mobile_app/previewaudio.php?filename=Thorne,%20Grandma%27s%20Goodbye%20excerpt_4.m4a) 这是你的代码：

```
<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        mp3: "AudioFiles/Thorne, Grandma's Goodbye excerpt_4.m4a",
        oga: "AudioFiles/Thorne, Grandma's Goodbye excerpt_4.m4a"
      });
    },
    swfPath: "/jquery",
    supplied: "mp3, oga"
  });
}); 
</script> 
```

您需要更改`swfPath`为正确的。您还需要设置`solution`

请尝试以下代码：

```
<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        m4a: "http://helios.hud.ac.uk/u0867587/Mobile_app/AudioFiles/AudioFiles/Thorne, Grandma's Goodbye excerpt_4.m4a",
        oga: "http://helios.hud.ac.uk/u0867587/Mobile_app/AudioFiles/AudioFiles/Thorne, Grandma's Goodbye excerpt_4.m4a"
      });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "m4a, oga"
  });
}); 
</script> 
```

这应该会有所帮助。

**更新：** 现在您正在为所有格式（mp3、m4a、oga）提供相同的文件。这是错误的，您需要为每种格式定义正确的供应商和来源。

**mp3：**

```
<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        mp3: "http://path/to/file.mp3"
      });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "mp3"
  });
}); 
</script> 
```

**m4a：**

```
<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        m4a: "http://path/to/file.m4a"
      });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "m4a"
  });
}); 
</script> 
```

**奥加：**

```
<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        oga: "http://path/to/file.oga"
      });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "oga"
  });
}); 
</script> 
```

**mp3、m4a、oga**

```
<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        mp3: "http://path/to/file.mp3"
        m4a: "http://path/to/file.m4a"
        oga: "http://path/to/file.oga"
      });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "mp3, m4a, oga"
  });
}); 
</script> 
```

**更新2**

所以回到你的 php 代码，改变这个：

> ```
> <script type="text/javascript">   
>     $(document).ready(function(){
>   $("#jquery_jplayer_1").jPlayer({
>     ready: function () {
>       $(this).jPlayer("setMedia", {
>         m4a: "<?php echo "http://helios.hud.ac.uk/u0867587/Mobile_app/".$dbAudioFile; ?>",
>         mp3: "<?php echo "http://helios.hud.ac.uk/u0867587/Mobile_app/".$dbAudioFile; ?>",
>         oga: "<?php echo "http://helios.hud.ac.uk/u0867587/Mobile_app/".$dbAudioFile; ?>"
>       });
>     },
>     solution:"flash,html",
>     swfPath: "jquery",
>     supplied: "m4a, mp3, oga"
>   });
> }); 
> ```

将其更改为：

```
<?php
    $file_info = pathinfo($dbAudioFile);
    $ext = $file_info['extension'];
?>

<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        <?php echo $ext;?>: "<?php echo "http://helios.hud.ac.uk/u0867587/Mobile_app/".$dbAudioFile; ?>"
      });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "<?php echo $ext;?>"
  });
}); 
```

# c# - 如何将 SWI Prolog 连接到 Visual Studio 2012

> ID：14555200
> 
> 赞同：6
> 
> 时间：2013-01-28T03:50:53.780
> 
> 标签：c#, prolog, swi-prolog, interfacing

我有一个在 Visual Studio 中连接 SWI-Prolog 的程序。以前，我使用 VS2010 (XP)，一切正常。然后我将我的 VS 升级为 VS2012 (Win7)，现在我的代码有问题。

当涉及到以下代码时：

```
PlEngine.Initialize(param); 
```

它总是给我以下异常消息：

```
The specified module could not be found. (Exception from HRESULT: 0x8007007E) 
```

由于升级过程，任何人都可以发现我犯了什么错误，或者如果可能的话我必须做一些修改？

有关我的代码的其他信息：

*   我使用了最新的 swiPLCs 库（版本：1.1.60301.0）
*   我上面代码中的“参数”是： string[] param = { "-q", "-f", @"c:\program files (x86)\pl\"};
*   我已将路径环境变量设置为：c:\program files (x86)\pl\ 和 c:\program files (x86)\pl\bin
*   我的代码中有这个设置： Environment.SetEnvironmentVariable("SWI_HOME_DIR", Global.g_prologLocation);
*   我参考了：swiPLcs.dll
*   我已经尝试使用 SWIProlog 64 位，但我仍然有同样的问题

非常感谢任何帮助。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:48:56.267

我自己终于得到了答案。与 VS2010 不同，在 VS2012 中，您似乎必须将 SWI-Prolog 包添加到 VS2012 中。所以使用 Nuget 添加 SWI.Prolog 包。如何？

请参阅：[https ://nuget.org/packages/SWI.Prolog](https://nuget.org/packages/SWI.Prolog)

VS2012 现在会识别 SWI.Prolog。

不管怎么说，还是要谢谢你

# algorithm - 检测扑克中双槽的算法

> ID：14555201
> 
> 赞同：4
> 
> 时间：2013-01-28T03:51:04.523
> 
> 标签：algorithm

扑克中的双槽是指你有 2 次直接击球。

例如，如果公共牌是 268，而您有 45，则 3 (23456) 或 7 (45678) 将为您完成顺子。

给定 board[] 和 hand[]，如果你有双装订线，那么返回 true 并且没有返回 false 的有效算法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:14:15.977

这是一个可以用位向量做到这一点的算法。

首先，创建一个 14 位的位向量，比如说（包括低位和高位 ace）并为和`cards`中的每个元素设置每个位。`hand[]``board[]`

`(mask, gutter)`接下来，为第一个元素生成 5 对掩码，`hand[]`这样`((cards & mask) ^ gutter)==0`如果您有双装订线。例如，如果您的一张牌是`7`，则`(mask, gutter)`对将是（假设 MSB->LSB 顺序）：

```
01111111000000, 01011101000000
00000001111111, 00000001011101
00000111111100, 00000101110100
00001111111000, 00001011101000
00011111110000, 00010111010000 
```

即，您有 2 个双槽，两端有 7 个，中间有 3 个，中间有 7 个。

现在，计算`((cards & mask) ^ gutter)`5 对中的每一对。如果有的话，`0`你有一个双排水沟。

编辑：原来你只需要测试 5 个面具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:07:12.777

我猜：

1.  为每个卡值创建一个布尔数组（或位字段）
2.  对于 board[] 和 hand[] 中的每张牌，将相应的条目设置为 true
3.  检查顺子的所有可能性；由于您不关心颜色，因此选项非常有限（即 23456、34567 等） - 如果可能的顺子中恰好缺少一张牌，请将其添加到一组（不能包含重复）。
4.  如果集合恰好包含 2 个条目，则返回 true。

或者，对尚未出现在棋盘上的任何值进行一次实验，检查是否有顺子，如果添加该值并计算发生这种情况的值。

所有的算法都是常数时间（因为整个情况是有限的），它们并不需要付出很大的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:12:28.310

这是我使用按位运算的方法：

```
vec = 0 
```

映射`hand[]`到`board[]`数字的位`vec`，然后

```
gutter = 0
for i = 0 to 10
    x = (vec & 0x1f) ^ 0x1f
    if x one of 1,2,4,8,16
        gutter++
        if gutter >= 2
            return true
    vec = vec >> 1
return false 
```

# bit-manipulation - 短的按位运算

> ID：14555203
> 
> 赞同：0
> 
> 时间：2013-01-28T03:51:23.103
> 
> 标签：bit-manipulation, bitwise-operators, bit-shift

我正在使用short（并且我必须使用short 进行赋值，否则我只会使用int）来扫描0-31之间的值，然后使用单个整数来存储这些扫描值中的6个。

这是我到目前为止所拥有的：

```
int vals = 0;
short ndx, newVal;

/* more printing/scanning and error checking in between */

newVal = newVal << (5*ndx);
vals = vals | newVal; 
```

当我尝试在点 4 或 5 放置一个有效值时，它不起作用，只是保持 0 ......我想知道这是否是因为 short 只有 2 个字节长，所以按位左移只是摆脱了整个价值？如果这是问题，我可以添加某种演员来解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:37:56.263

这正是你的想法。您使用了按位移位，然后将结果分配给一个短变量 (newVal)。当你这样做时，即使计算是在 32 位中完成的，结果仍然会被截断，并且你只会得到最低有效的 16 位 0。

如果您想避免使用 int，只需完全删除 newVal 变量，然后计算`vals = vals | ((something) << (some other thing));`

# ruby-on-rails - 在两个 DateTime 之间迭代，步长为一小时

> ID：14555205
> 
> 赞同：40
> 
> 时间：2013-01-28T03:51:44.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在寻找一种有效的方法，在 Ruby 1.9.x/Rails 3.2.x 中，以一小时的步骤在两个 DateTime 对象之间进行迭代。

```
('2013-01-01'.to_datetime .. '2013-02-01'.to_datetime).step(1.hour) do |date|
   ...
end 
```

我知道这个问题`1.hour`只是秒数，但我尝试将其转换为 DateTime 对象并将其用作步骤也不起作用。

我看了“[提防红宝石糖](http://alindeman.github.com/2011/01/22/beware-of-ruby-syntactic-sugar.html)”。它在底部附近提到 DateTime 有一个直接`step`方法。我通过在 DateTime 对象上运行确认了这一点，但在 Ruby 或 Rails 的文档中`methods`，我找不到任何关于DateTime 的文档。`step`

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-28T04:05:15.817

类似于我在“[如何从一个范围内返回一系列天和小时？](https://stackoverflow.com/questions/11680425/how-do-i-return-an-array-of-days-and-hours-from-a-range/11680898#11680898) ”中的回答，诀窍是使用`to_i`自纪元以来的秒数：

```
('2013-01-01'.to_datetime.to_i .. '2013-02-01'.to_datetime.to_i).step(1.hour) do |date|
  puts Time.at(date)
end 
```

请注意，`Time.at()`使用您的本地时区进行转换，因此您可能希望通过使用指定 UTC`Time.at(date).utc`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-05-01T11:08:28.637

也许晚了，但你可以在没有 Rails 的情况下做到这一点，例如按小时进行：

红宝石 2.1.0

```
require 'time' 

hour_step = (1.to_f/24)

date_time = DateTime.new(2015,4,1,00,00)
date_time_limit = DateTime.new(2015,4,1,6,00)

date_time.step(date_time_limit,hour_step).each{|e| puts e}

2015-04-01T00:00:00+00:00
2015-04-01T01:00:00+00:00
2015-04-01T02:00:00+00:00
2015-04-01T03:00:00+00:00
2015-04-01T04:00:00+00:00
2015-04-01T05:00:00+00:00
2015-04-01T06:00:00+00:00 
```

或分钟：

```
#one_minute_step = (1.to_f/24/60)

fifteen_minutes_step = (1.to_f/24/4)

date_time = DateTime.new(2015,4,1,00,00)
date_time_limit = DateTime.new(2015,4,1,00,59)

date_time.step(date_time_limit,fifteen_minutes_step).each{|e| puts e}

2015-04-01T00:00:00+00:00
2015-04-01T00:15:00+00:00
2015-04-01T00:30:00+00:00
2015-04-01T00:45:00+00:00 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-20T21:47:02.090

这是我最近想出的一些东西：

```
require 'active_support/all'

def enumerate_hours(start, end_)
  Enumerator.new { |y| loop { y.yield start; start += 1.hour } }.take_while { |d| d < end_ }
end

enumerate_hours(DateTime.now.utc, DateTime.now.utc + 1.day)
# returns [Wed, 20 Aug 2014 21:40:46 +0000, Wed, 20 Aug 2014 22:40:46 +0000, Wed, 20 Aug 2014 23:40:46 +0000, Thu, 21 Aug 2014 00:40:46 +0000, Thu, 21 Aug 2014 01:40:46 +0000, Thu, 21 Aug 2014 02:40:46 +0000, Thu, 21 Aug 2014 03:40:46 +0000, Thu, 21 Aug 2014 04:40:46 +0000, Thu, 21 Aug 2014 05:40:46 +0000, Thu, 21 Aug 2014 06:40:46 +0000, Thu, 21 Aug 2014 07:40:46 +0000, Thu, 21 Aug 2014 08:40:46 +0000, Thu, 21 Aug 2014 09:40:46 +0000, Thu, 21 Aug 2014 10:40:46 +0000, Thu, 21 Aug 2014 11:40:46 +0000, Thu, 21 Aug 2014 12:40:46 +0000, Thu, 21 Aug 2014 13:40:46 +0000, Thu, 21 Aug 2014 14:40:46 +0000, Thu, 21 Aug 2014 15:40:46 +0000, Thu, 21 Aug 2014 16:40:46 +0000, Thu, 21 Aug 2014 17:40:46 +0000, Thu, 21 Aug 2014 18:40:46 +0000, Thu, 21 Aug 2014 19:40:46 +0000, Thu, 21 Aug 2014 20:40:46 +0000, Thu, 21 Aug 2014 21:40:46 +0000] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T03:58:07.160

我不完全确定这是否会有所帮助，但请查看此堆栈溢出页面，问题似乎相似。

[以天、小时和分钟计算时间差](https://stackoverflow.com/questions/6943692/calculate-difference-in-time-in-days-hours-and-minutes)

# python - 从在线流媒体视频中制作缩略图

> ID：14555206
> 
> 赞同：1
> 
> 时间：2013-01-28T03:51:58.837
> 
> 标签：python, flash, video, youtube, thumbnails

我正在尝试查看是否可以通过编程方式从在线视频（以 Flash 运行的视频）制作缩略图。只是为了详细说明我到底想要做什么：我有一个指向使用 adobe flash 在浏览器中播放的视频的链接。我想使用任何编程语言（首选 python）截取视频的屏幕截图（现在任何帧都可以）。我还注意到，当有人在 youtube 上上传视频时，它会自动生成一个缩略图。关于这是否是一个可行的选择以及如何去做的任何指示？

谢谢

# php - 如何使用 PHP 和 Android 从 Web 服务发送和检索数据

> ID：14555208
> 
> 赞同：1
> 
> 时间：2013-01-28T03:52:08.983
> 
> 标签：php, android, xml, encoding

我正在开发一个应用程序，在该应用程序中我从 Web 服务获取数据并在 Android 手机中显示。但问题是在获取土耳其语数据时显示不正确。

我已经`utf-8`在 PHP 中设置了。但仍然得到特殊字符符号`A?&#305;k ?&#287`，如 string `Açık Öğretim`。

这是我的PHP代码：

```
<?php
include("Netbrut_class.php");
header('Content-type: text/xml; charset: utf-8');

    $webservice = new Netbrut;

    $content='<?xml version="1.0" encoding="utf-8"?><salary_comparision>';

    $education = $webservice->select_education();

    for($i=0; $i<count($education); $i++){

        $string = html_entity_decode($education[$i]['comparision_name'], ENT_QUOTES, "utf-8");
        $content.="<education id='".$education[$i]['id']."'>".$string."</education>";
    }

    $content .='</salary_comparision>';

echo $content;
?> 
```

我的 Java 代码是 / 在这里我编写 Java 代码只是为了测试：

```
public class testing {

    static String[] attributes;

    public static void main(String[] args)
    {
        URL url;
        try {
            url = new URL("http://192.168.1.106/netBrut/webservices/testing.php");

        HttpURLConnection  connection = (HttpURLConnection) url.openConnection();
        connection = (HttpURLConnection) url.openConnection();
        java.io.InputStream is  = connection.getInputStream();

        InputStreamReader reader = new InputStreamReader(is, "utf-8");

        StringWriter sw = new StringWriter();

        char [] buffer = new char[1024 * 8];
        int count ;

        while( (count = reader.read(buffer)) != -1){
          sw.write(buffer, 0, count);
        }

        System.out.println(sw.toString());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
      }
} 
```

从 Web 服务返回的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<salary_comparision>
    <education id='128'>A?&#305;k ?&#287;retim</education>//Check here
    <education id='5'>Doktora</education>
    <education id='3'>Master</education>
    <education id='4'>MBA</education>
    <education id='2'>?niversite</education>
</salary_comparision> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:18:26.533

在 PHP 代码中只需更改以下行

```
 $string = html_entity_decode($education[$i]['comparision_name'], ENT_QUOTES, "utf-8");
 $content.="<education id='".$education[$i]['id']."'>".$string."</education>"; 
```

到

```
$string = $webservice->unhtmlspecialchars($education[$i]['comparision_name']);
$content.="<education id='".$education[$i]['id']."'>".$string."</education>"; 
```

看 [^(*文档*)](http://php.net/htmlspecialchars)。[`htmlspecialchars`](http://php.net/htmlspecialchars)

# xcode - 如何使用应用程序委托 xcode

> ID：14555209
> 
> 赞同：0
> 
> 时间：2013-01-28T03:52:13.350
> 
> 标签：xcode, uiviewcontroller, delegates

您如何在视图控制器中调用应用程序委托方法。我想在应用程序终止之前保存我的应用程序数据。在另一个应用程序中，我在其中创建了一个委托实例和一个变量，因此每隔几秒钟它会检查委托是否为真（当应用程序退出活动时，它会将其设置为真）但这似乎不是最有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:55:16.897

如果您想在应用程序终止之前保存您的应用程序数据，然后以应用`applicationWillTerminate`程序生命周期的方法保存您的数据。

不需要更多的代表，苹果已经为您提供了此功能，那么您为什么要创建新的。`applicationWillTerminate`只需在方法中编写代码

只需从 appdelegate 引用您的 viewController 即可调用您想要处理保存数据的方法。

# javascript - 从父 div 中删除所有 div

> ID：14555214
> 
> 赞同：3
> 
> 时间：2013-01-28T03:53:20.077
> 
> 标签：javascript

嘿，如何从 JavaScript 中的父 div 中删除所有 div？

我找不到非 jquery 示例。他们都有不同的类/ID，所以我想知道是否有一种简单的方法可以做到这一点？例如：

```
<div id="parent">
   <div class="something"      id="one">Remove me</div>
   <div class="something_two"  id="two">Remove me</div>
   <div class="something_three"id="three">Remove me</div>
   <div class="something_four" id="four">Remove me</div>
</div> 
```

有没有一种简单的方法可以做到这一点 - 我目前的方法是这样做，`innerHTML = "";`但想知道这是否最适合删除文本而不是元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T03:54:52.627

使用`innerHTML` *将*删除实际元素，[有一些跨浏览器的怪癖](http://www.quirksmode.org/dom/w3c_html.html)（主要是 IE，具有讽刺意味的是，它是最初发明的`innerHTML`）。

这是一种更标准的方法：

```
var el = document.getElementById('parent');

while ( el.firstChild ) el.removeChild( el.firstChild ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T04:13:47.100

最快的方法似乎是：

```
document.getElementById('parent').textContent = ''; 
```

# python - GAE/P：处理最终一致性

> ID：14555218
> 
> 赞同：1
> 
> 时间：2013-01-28T03:54:20.830
> 
> 标签：python, google-app-engine, google-cloud-datastore

在可能的应用程序中，我有以下过程：

1.  得到一个很长的人名单
2.  为每个人创建一个实体
3.  向每个人发送电子邮件（步骤 2 必须在步骤 3 开始之前完成）

因为人的名单很大，我不想把他们放在同一个实体组里。

在执行第 3 步时，我可以像这样查询人员列表：

```
Person.all() 
```

由于最终的一致性，我可能会在第 3 步中错过一些人。什么是确保我在第 3 步中不会错过任何人的好方法？

有没有比这更好的解决方案？：

```
while Person.all().count() < N:
    pass
for p in Person.all()
    # do whatever 
```

编辑：

另一个可能的解决方案浮现在脑海中。我可以创建一个人的链接列表。我可以存储一个链接到第一个，他可以链接到第二个等等。但是，性能似乎很差，因为您将分别进行每个 get 并且不会具有查询的效率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:02:29.390

**更新**：我重读了您的帖子，发现您不想将它们全部放在同一个实体组中。如果不这样做，我不确定如何保证强一致性。您可能希望重组数据，以便不必将它们放在同一个实体组中，而是放在多个实体组中。也许取决于一组 Person 实体的某些方面？（例如，他们所在的邮件列表、发送的电子邮件类型等）每个人是否仅包含姓名和电子邮件地址，或者是否涉及其他属性？

[谷歌提出了一些其他的选择](https://developers.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency)：

> 如果您的应用程序可能会遇到更重的写入使用，您可能需要考虑使用其他方式：例如，您可能会将最近的帖子放入**具有过期时间的内存缓存中，**并显示来自内存缓存和数据存储的最近帖子的混合，或者**您可能会将它们缓存在 cookie**中，**在 URL 中放置一些状态**，**或者完全是其他东西**。目标是找到一个缓存解决方案，在用户发布到您的应用程序的时间段内为当前用户提供数据。请记住，如果您在事务中执行 get、put 或任何操作，您将始终看到最近写入的数据。

因此，看起来您可能想要调查这些可能性，尽管我不确定它们将如何转化为您的应用程序所需的内容。

**ORIGINAL POST**：使用[祖先查询。](https://developers.google.com/appengine/docs/python/datastore/entities#Ancestor_Paths)

来自 Google 的[“Structuring Data for Strong Consistency”](https://developers.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency)：

> 要获得高度一致的查询结果，您需要使用祖先查询将结果限制为单个实体组。这是有效的，因为实体组是一致性和事务性的单位。所有数据操作都应用于整个组；在整个实体组更新之前，祖先查询不会返回其结果。如果您的应用程序依赖于某些查询的高度一致的结果，您可能需要在设计数据模型时考虑到这一点。本页讨论了构建数据以支持强一致性的最佳实践。

因此，当您创建 Person 实体时，请为其设置父级。我相信你甚至可以让一个特定的实体成为所有其他实体的“父母”，它应该给你很强的一致性。（尽管无论如何我都喜欢用祖先来构建我的数据。）

```
# Gives you the ancestor key
def ancestor_key(kind, id_or_name):
    return db.Key.from_path(kind, id_or_name)

# Kind is the db model your using (should be 'Person' in this case) and
# id_or_name should be the key id or name for the parent
new_person = Person(your_params, parent=ancestor_key('Kind', id_or_name) 
```

您甚至可以在此时对具有相同父级的所有实体进行查询，这很好。但这应该可以帮助您获得更一致的结果。

# php - FB中的任何人如何创建相册并将照片上传到页面？( php-sdk

> ID：14555219
> 
> 赞同：0
> 
> 时间：2013-01-28T03:54:22.220
> 
> 标签：php, facebook-php-sdk

.>< 作为标题

我想构建一个应用程序，可以让任何人创建相册并**在我自己的页面上**上传相册中的照片。

但是我完全在fb的开发文档中寻找，如果您不是页面所有者，它没有让任何人创建它的api。

所以我想也许我可以使用 php curl 自动登录我的帐户，然后使用我的帐户创建和上传。

但是在这种情况下，我使用 curl 登录我的帐户，它安全吗？或者谁能​​告诉我最好的解决方案？

谢谢>M< 如果我的描述或英语语法很糟糕，请多多包涵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:13:25.080

从技术上讲，您可以使用 PHP 来验证您的帐户并让您的网络应用程序充当您，但这样做实际上违反了 Facebook 的开发者协议。如果您这样做，您当然需要非常小心，不要让用户看到您的密码或用户 ID。

我最好的建议是不要把它们放在你的 PHP 脚本中。而是将它们放在 Web 目录之外的加密文件中。该文件应使用 phpseclib 中的一种对称加密方法进行加密。( [http://phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/) )

您使用的密钥也应该位于存储在您的 Web 目录之外的文件中。

# c# - 无法将数组元素插入 asp.net 中的数据库。而是插入 System.String[]

> ID：14555225
> 
> 赞同：0
> 
> 时间：2013-01-28T03:54:58.083
> 
> 标签：c#, sql, asp.net-mvc

在 asp.net 中，我将数组值插入数据库，但未正确插入数组元素。取而代之的是， System.String[] 被插入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T04:00:01.350

SQL 不能很好地处理数组。您很可能刚刚`.ToString()`对字符串数组进行了操作。
尝试使用`string.Join( ", ", mystrings)`.

正如评论中提到的，这不是`third normal form`. 在维基百科中搜索一个好的概要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:17:27.323

数据库中的 System.String[] 意味着您将字符串数组直接传递给数据库插入方法。

相反，您需要遍历数组并将字符串作为单独的行插入：

```
foreach(string s in stringArray)
{
    database.Insert(s);
} 
```

或者，您可以将数组展平并插入到单行中，如下所示：

```
database.Insert(String.Join(",", stringArray)) 
```

这会将数组作为逗号分隔的列表插入。

# android - 单击菜单项时无法显示片段

> ID：14555227
> 
> 赞同：2
> 
> 时间：2013-01-28T03:55:24.827
> 
> 标签：android, android-fragments, actionbarsherlock

单击菜单项时，我很难在容器中显示片段。下面是我的代码。

我试图`ft.show();`在登录菜单项的 onMenuItemClick 内部进行操作，但它不起作用，我不知道我做错了什么，因为我既没有收到任何错误，也没有应用程序崩溃。附加到选项卡的片段可以正常工作和显示。只是当我尝试在单击菜单项时将片段加载到容器中时，没有任何反应。请指出正确的方向，让我知道我做错了什么。

```
public class HomeActivity extends SherlockFragmentActivity {

public SherlockFragment fragment;
FragmentTransaction ft;
public static Context appContext;
ActionBar actionbar;
String mCurFilter;
LoginScreenFragment loginFragment;

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);
    appContext = getApplicationContext();
    actionbar = getSupportActionBar();
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab HomeTab = actionbar.newTab().setText("Home");
    ActionBar.Tab CartTab = actionbar.newTab().setText("Cart");
    ActionBar.Tab myTab = actionbar.newTab().setText("MyFragment");
    ActionBar.Tab moreTab = actionbar.newTab().setText("More...");

    HomeFragment homeFragment = new HomeFragment();
    CartFragment cartFragment = new CartFragment();
    MyFragment myFragment = new MyFragment();
    MoreFragment moreFragment = new MoreFragment();
    loginFragment = new LoginScreenFragment();

    HomeTab.setTabListener(new MyTabsListener(homeFragment));
    CartTab.setTabListener(new MyTabsListener(cartFragment));
    myTab.setTabListener(new MyTabsListener(myFragment));
    moreTab.setTabListener(new MyTabsListener(moreFragment));

    actionbar.addTab(HomeTab);
    actionbar.addTab(CartTab);
    actionbar.addTab(myTab);
    actionbar.addTab(moreTab);

    ft = getSupportFragmentManager().beginTransaction();
    ft.add(R.id.fragment_container, homeFragment);
    ft.show(homeFragment);
    ft.add(R.id.fragment_container, cartFragment);
    ft.hide(cartFragment);
    ft.add(R.id.fragment_container, myFragment);
    ft.hide(myFragment);
    ft.add(R.id.fragment_container, moreFragment);
    ft.hide(moreFragment);
    ft.add(R.id.fragment_container, loginFragment);
    ft.hide(loginFragment);
    ft.commit();
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getSupportActionBar()
            .getSelectedNavigationIndex());
    System.out.println("onSaveInstanceState");
}

@Override
public boolean onCreateOptionsMenu(final Menu menu) {

    MenuItem item = menu.add("Search");
    item.setIcon(android.R.drawable.ic_menu_search);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    View searchView = SearchViewCompat.newSearchView(this);
    if (searchView != null) {
        SearchViewCompat.setOnQueryTextListener(searchView,
                new OnQueryTextListenerCompat() {
            @Override
            public boolean onQueryTextChange(String newText) {
                mCurFilter = !TextUtils.isEmpty(newText) ? newText : null;
                return true;
            }
        });
        item.setActionView(searchView);
    }
    MenuItem loginItem = menu.add("Login");
    loginItem.setTitle("Login");
    loginItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    loginItem.setOnMenuItemClickListener(new OnMenuItemClickListener(){

        @Override
        public boolean onMenuItemClick(MenuItem item) {
//I wanted to show "loginFragment" when the Login button is clicked.But unfortunately its not showing up.Also the application is not giving any errors or crashing
            ft.show(loginFragment);
            return false;
        }

    });
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int itemId = item.getItemId();
    if (itemId == R.id.menuitem_home) {
        Toast.makeText(appContext, "Home", Toast.LENGTH_SHORT).show();
        return true;
    } else if (itemId == R.id.menuitem_shop) {
        Toast.makeText(appContext, "Shop", Toast.LENGTH_SHORT).show();
        return true;
    } else if (itemId == R.id.menuitem_cart) {
        Toast.makeText(appContext, "Cart", Toast.LENGTH_SHORT).show();
        return true;
    } else if (itemId == R.id.menuitem_my) {
        Toast.makeText(appContext, "My", Toast.LENGTH_SHORT).show();
        return true;
    } else if (itemId == R.id.menuitem_more) {
        Toast.makeText(appContext, "More...", Toast.LENGTH_SHORT).show();
        return true;
    }
    return false;
}

static class MyTabsListener implements ActionBar.TabListener {
    public SherlockFragment fragment;

    public MyTabsListener(SherlockFragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        System.out.println("TabReselected " + tab.getPosition());
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        System.out.println("TabSelected " + tab.getPosition());
        ft.show(this.fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        System.out.println("TabUnselected " + tab.getPosition());
        ft.hide(this.fragment);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:52:21.773

您应该重新开始并提交事务。尝试：

```
@Override
public boolean onMenuItemClick(MenuItem item) {
    ft = getSupportFragmentManager().beginTransaction();
    ft.show(loginFragment);
    ft.commit();
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:15:28.993

您可以在单击菜单按钮时尝试替换片段，而不是将片段添加到一个容器并隐藏和显示它们。

例如，当您单击登录按钮时

```
ft.replace(R.id.fragment_container, loginFragment).commit(); 
```

试一试希望它会奏效。

# sql - 数据库保护不被编辑？

> ID：14555228
> 
> 赞同：0
> 
> 时间：2013-01-28T03:55:38.813
> 
> 标签：sql, sql-server, ssms

如果我在 SQL Server Management Studio 的底部看到这个，这是否意味着我没有编辑行的权限？

![在此处输入图像描述](../Images/add5dbcbb16b2a24682dc66b21680866.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T04:00:27.393

或者该列是计算列，或者由`IDENTITY`属性填充，或`ROWVERSION`，或...

尝试编辑此表中的数据，您将看到所有三列都是只读的：

```
USE tempdb;
GO

CREATE TABLE dbo.flub
(
  i INT IDENTITY(1,1),
  x AS (i + 1),
  r ROWVERSION
);
INSERT dbo.flub DEFAULT VALUES; 
```

如果您共享表的定义，我们至少可以告诉您为什么是由于这些原因之一（我们需要更多信息来确认它是否是列级权限问题）。

更好的建议：停止使用“打开表格”、“编辑前 200 行”或任何其他类似 Excel 的网格来修改数据。使用语句编写正确的 DML `UPDATE`- 我向您保证，当您尝试修改无法修改的值时，您收到的错误消息几乎在每种情况下都会更具描述性。上面的例子：

```
UPDATE dbo.flub SET i = 5; 
```

> 消息 8102，级别 16，状态 1，第 1 行
> 无法更新标识列“i”。

```
UPDATE dbo.flub SET x = 5; 
```

> 消息 271，级别 16，状态 1，第 1 行
> 无法修改列“x”，因为它是计算列或 UNION 运算符的结果。

```
UPDATE dbo.flub SET r = 0x00; 
```

> 消息 272，级别 16，状态 1，行 1
> 无法更新时间戳列。

[我在这里讨论了这些 UI 中的几个错误，](https://sqlblog.org/2008/08/20/my-management-studio-wishlist-for-sql-server-2011)此后也报告了其他错误。[例如，这个在 2012 版本中刚刚修复...](https://sqlblog.org/2007/07/29/be-careful-with-open-table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:59:05.737

如果您只在表中的一个或多个列上收到该消息，那么听起来该单元格可能是一个计算列，根据定义，它不支持更新。或者，它可能是一个也不支持更新的标识列。

要查看它是否是计算列：如果您转到表设计器，您会注意到没有指定数据类型，而是（在下面的属性中）一个计算列规范。或者，在 DDL 中，您将看到`AS`该列的子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T04:03:16.920

如果您当前尝试编辑的该列是 IDENTITY 列，它将显示此消息。

# php - Opencart - 每次页面加载时都会更新 mySQL 购物车条目。方法在哪里？

> ID：14555232
> 
> 赞同：-1
> 
> 时间：2013-01-28T03:56:55.503
> 
> 标签：php, mysql, session, opencart, cart

今天给你一个快速的问题。我正在运行一个 Opencart 网站，在`customer`表格中有一个标题为列的列`cart`，它是一个存储用户购物车内容的序列化数组，即：`a:2:{i:92;i:2;i:12;i:3}`. 每次加载站点上的新页面（可能是主页、帐户页面；任何页面）时，都会`cart`根据会话数据更新数据库条目（基本上，会话变量保存购物车内容，然后是内容每次页面加载都传输到数据库）。

***你能指出这个方法存在的方向和调用它的位置吗？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:18:51.120

`/system/library/customer.php`里面有你要找的代码。它包含了所有的可能性（登录时加载，每次页面加载时保存，注销时保存到数据库）

# notepad++ - 如何使用记事本++从txt中打开一组文件

> ID：14555235
> 
> 赞同：13
> 
> 时间：2013-01-28T03:57:04.657
> 
> 标签：notepad++

例如，我在 list.txt 中保存了一些链接：

```
d:\phpnow\htdocs\pm\includes\templates\slucky\common\tpl_gallery_display.php
d:\phpnow\htdocs\pm\includes\templates\slucky\common\tpl_main_page.php
d:\phpnow\htdocs\pm\includes\templates\slucky\templates\tpl_main_page.php
d:\phpnow\htdocs\pm\includes\templates\slucky\templates\tpl_product_info_display.php
d:\phpnow\htdocs\pm\includes\templates\slucky\templates\tpl_product_info_display2.php 
```

我想在记事本++中打开它们。有没有插件可以完成这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T04:32:42.057

编写一个名为 openfromfiles.bat 的批处理文件并执行它。

```
@echo off
setlocal enableextensions enabledelayedexpansion

set LIST=
for /f %%x in (list.txt) do (
    set LIST=!LIST! "%%x"
    )
    echo %LIST%

"C:\Program Files\Notepad++\notepad++" %LIST% 
```

这里是批处理文件的解释链接.. [Windows XP 批处理文件 concat](https://stackoverflow.com/questions/1500570/windows-xp-batch-file-concat)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-19T10:45:35.927

创建会话文件：

```
 <NotepadPlus>
        <Session>
            <mainView>
                <File filename="PATH_TO_FILE_1"/>
                <File filename="PATH_TO_FILE_2"/>
                <File filename="PATH_TO_FILE_#"/>
            </mainView>
        </Session>
    </NotepadPlus> 
```

加载它：文件->加载会话...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T04:05:04.620

您不需要新插件。您可以使用命令行来执行此操作，并且必须将所有以空格分隔的文件作为命令行参数。您可以从 NotePad++ 文档中找到此详细信息。您可以创建一个 bat 文件来执行该命令。

例如：

```
<PATH_TO_NOTE_PAD++_FOLDER>/NotePad++.exe "PATH_TO_FILE_1" "PATH_TO_FILE2" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-28T18:14:34.673

选定的答案不是很好 - 列表很长。反而：

```
for /f %%x in (list.txt) do (
    start "" "C:\Program Files\Notepad++\notepad++" "%%x"
    ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-21T13:19:44.470

对于 powershell 脚本：

```
 Param
    (
        [Parameter(Mandatory=$true)]$File
    )

    Get-Content -Path $File | foreach {& "C:\Program Files\Notepad++\notepad++" $_} 
```

或 powershell concole

```
 Get-Content -Path <File> | foreach {& "C:\Program Files\Notepad++\notepad++" $_} 
```

Where - 列表的文件路径 做得好！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-17T08:12:29.783

我使用了 Git Bash，以便将 find 的结果通过管道传输到 Notepad++ 中：

`find . -type f -name "*.csproj" | xargs "C:\Program Files\Notepad++\notepad++.exe"`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-10-05T17:07:55.380

最简单的方法是打开您通常会打开的所有文件。然后保存会话 将会话文件保存到方便的位置 然后在您想要打开该批文件时使用 Notepad++ 打开该文件。无需创建脚本、批处理或手动创建会话文件。

# c# - 在 Visual Studio 中管理本地与云开发配置设置的选项

> ID：14555243
> 
> 赞同：2
> 
> 时间：2013-01-28T03:57:43.357
> 
> 标签：c#, .net, azure, configuration

将来，我们将使用 Windows Azure 网站来满足我们的基本托管需求。由于云与本地有非常具体的配置设置，您如何管理这些设置？举个例子：

**本地开发服务器：**

```
string path = AppSettings["StoragePath"];

<add key="StoragePath" value="c:\temp" /> 
```

**视窗天青：**

```
string path = AppSettings["StoragePath"];

<add key="StoragePath" value="xyz" /> 
```

您是否在每次发布之前手动更改配置文件中的 StoragePath，**或者**代码中是否有可以执行的操作，例如：

```
<add key="LocalStoragePath" value="c:\temp" />
<add key="BlobStoragePath" value="xyz" />    

string path;
if (Azure)
{
   path = AppSettings["BlobStoragePath"];
}
else
{
   path = AppSettings["LocalStoragePath"];
} 
```

如果后者是可能的，我如何确定环境是否是 Windows Azure？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:37:14.837

假设您在 VS 2010 或 VS2012 中使用[最新版本](http://blogs.msdn.com/b/webdev/archive/2012/11/20/new-web-publish-updates.aspx)的 Web 发布功能，您可以使用发布配置文件和 web.config 转换相当轻松地完成此操作。

首先，创建您的发布配置文件（右键单击项目，选择发布，通过对话框）。无论如何，这将是进行各种配置更改的默认位置，例如连接字符串。

然后，右键单击为您的发布配置文件创建的 .pubxml 文件，应该有一个添加转换的选项。这将添加一个新的 web..config，它应该出现在 web.Debug.config/web.Release.config 旁边。

在该文件中，您可以为要更改的应用程序设置添加转换。当您使用该配置文件发布时，将应用转换值；本地开发仍将使用您想要的任何值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:22:02.327

```
public interface IConfigurationProvider { }

public class AzureConfigurationProvider : IConfigurationProvider { }

public class LocalConfigurationProvider : IConfigurationProvider { }

public static class ConfigurationProviderFactory
{
    private static bool _isAzure = Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.IsAvailable;

    private static Lazy<IConfigurationProvider> _provider = Lazy<IConfigurationProvider>(GetProvider);

    private static IConfigurationProvider GetProvider()
    {
         return _isAzure ?
             new AzureConfigurationProvider() :
             new LocalConfigurationProvider();
    }

    public static IConfigurationProvider Instance
    {
        get { return _provider.Value; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T04:05:00.280

我通常会创建一个新的构建配置（称为 Azure）。

然后在 web.config 创建你的密钥..

```
<add key="LocalStoragePath" value="c:\blah" />
<add key="AzureStoragePath" value="xyz" /> 
```

在你的代码中写：

```
#if CONFIG == "Azure"
  public const String storageKey = "AzureStoragePath";
#endif CONFIG == "Debug"
  public const String storageKey = "LocalStoragePath";
#endif 
```

并使用它：

```
String path = AppSettings[storageKey]; 
```

# ruby - 使用 RSpec 模拟 TCPSocket

> ID：14555249
> 
> 赞同：2
> 
> 时间：2013-01-28T03:59:28.317
> 
> 标签：ruby, sockets, rspec, mocking

我正在尝试围绕一个大量使用 TCPSockets（具体来说是 IRC 机器人）的应用程序编写测试。在编写我的第一堂课的测试时，我一直在做以下事情：

```
#In the describe block
before(:all) { TCPServer.new 6667 } 
```

...这允许我的 TCPSockets 运行（通过连接到 localhost:6667），尽管它们实际上并没有被正确地模拟。但是，当我转到第二类时，这会导致问题，因为我无法在同一端口上创建 TCPServer。

如何模拟 TCPSocket 类以允许我测试诸如`its(:socket) { should be_kind_of(TCPSocket) }`#readline 和#write 等其他常见操作之类的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T23:02:57.260

**您可以尝试在之前**和**之后**跟踪并关闭 TCPServer ：

```
before do
  @server = TCPServer.new 6667
end

after do
  @server.close
end

it ... do
end

it ... do
end 
```

在每个单独的测试之后，TCPServer 被终止，因此您可以创建一个具有相同端口的新服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:13:11.490

我不太确定我是否理解您的问题，但是您为什么不在本地计算机上安装某种 irc 服务器呢？ircd-irc2、ircd-hybrid 或类似的东西？

假设您以这种方式实现了 irc 客户端：

```
class Bot
  attr_accessor :socket
  def initialize
    socket = TCPSocket.new("localhost", 6667)
  end
end 
```

然后你可以像这样测试它

```
let(:bot) { Bot.new }

it "should be kind of TCP Socket"
  bot.should be_kind_of(TCPSocket)
  bot.should be_a(TCPSocket)
end 
```

# c# - 如何从 aspnetDB 中的 aspnet_Membership、aspnet_Users 和 aspnet_UsersInRoles 中获取数据？

> ID：14555255
> 
> 赞同：1
> 
> 时间：2013-01-28T04:01:03.670
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, asp.net-mvc-4

我想问如何分别获取aspnet_Membership和aspnet_Users中的数据？？甚至 C# 中的 aspnet_UsersInRoles？当我从这些 aspnet 表中获取数据时，我将使用 LINQ 语句。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:11:18.310

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")  // web.config
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
}

public class UserData
{
    private static List<UserProfile> _userList;

    public static List<UserProfile> userList
    {
        get
        {
            if (_userList == null)
            {
                UsersContext db = new UsersContext();
                _userList = db.UserProfiles.SqlQuery("select * from dbo.UserProfile").ToList();
            }
            return _userList;
        }
        set
        {
            _userList = value;
        }
    }
} 
```

成员身份，userinrole 表的方式相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:29:03.673

答案很复杂。

您可以使用 Linq 映射所有这些表并直接查询它们。

很多田地都是零散的。您将希望创建将许多表链接在一起的视图。

一些信息（如密码）将被加密。您必须使用 Membership API 进行大多数操作（除了读取数据之外）。

# asp.net-mvc - ASPNET MVC 4 中的 SimpleMembershipProvider 或 OAuth 是否有现成的管理页面？

> ID：14555257
> 
> 赞同：0
> 
> 时间：2013-01-28T04:01:09.747
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, simplemembership

我在使用 WebApi、Entity Framework 5 和 Code First 的 ASPNET MVC 4 应用程序中使用 SimpleMembershipProvider。我是在[这篇](http://odetocode.com/blogs/scott/archive/2012/09/05/seeding-membership-amp-roles-in-asp-net-mvc-4.aspx)文章之后做的，它为数据库播种并且似乎可以工作。

我的问题是：是否有任何开箱即用的管理页面可以为用户提供或删除诸如管理员之类的角色？如果没有，有什么建议吗？

谢谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:22:44.537

不，遗憾的是没有。从好的方面来说，您可以创建自己的，它旨在与 EF 配合使用。Simple Membership 比旧的 .NET Membership 灵活得多。

这是对简单成员资格以及如何将其与 EF Code-First 集成的很好但并不详尽的概述。

[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and- asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

此链接将指导您完成手动创建管理员的过程（接近底部） [http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp-net-webpages/](http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp-net-webpages/)

事实上，经典会员资格“开箱即用”使用起来更方便。与盒装的旧版本相比，设置“simpleMembership”（具有讽刺意味的是）很重。但是，毕竟 OMG，您可能会发现它是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:31:30.867

与以前的 SqlMembershipProvider 版本不同，SimpleMembership 旨在定制。因此，“开箱即用”的管理工具不会真正起作用，因为表格布局会因项目而异。

# angularjs - 在 Yeoman、ExpressJS 和 Socket.io 中更改 index.js 的位置

> ID：14555261
> 
> 赞同：2
> 
> 时间：2013-01-28T04:01:52.330
> 
> 标签：angularjs, socket.io, express, yeoman

我正在尝试将工作中的 Socket.io、AngularJS 和 ExpressJS 3.x 项目合并到新的 Yeoman：Express Stack。

[我首先按照https://github.com/yeoman/yeoman/tree/express-stack](https://github.com/yeoman/yeoman/tree/express-stack)上给出的指示，即，

yeomen init angularcrud # 标准 Angular 应用

yeomen init angularcrud:crud post # Angular CRUD 路由/视图

yeomen init express post # Express CRUD

也门服务器

我已经合并了代码，仔细检查了新代码在每个点上是否有效。在我添加 socket.io 之前，此过程是成功的。那时，当我运行“yeoman server”时，我收到错误“/socket.io/socket.io.js Not Found”，这与以下问题[Socket.io not being serving by Node 中的错误基本相似。 js服务器](https://stackoverflow.com/questions/8625373/socket-io-not-being-served-by-node-js-server)。在 First Zero 对问题的回答中，他指出“node_modules 应该与 server.js 位于同一目录中，而不是在服务器根目录之上”。在 Yeoman: Express Stack 创建的目录设置中，情况正是如此，node_modules 位于服务器根目录（index.js）之上一层。如果只是将 index.js 移动到与 node_modules 相同的级别，则会出现找不到模块错误。

我想知道如何修改设置以使 Yeoman: Express 与 socket-io 一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:50:25.427

过去几天我一直在测试这个分支，虽然没有使用 socket.io 类我知道这么多 node_modules 进入项目根目录而不是服务器/

您可能需要通过 npm 作为全局安装 socket.io 或在您的 require('../socket.io') 之前放置 ../ 或其他东西。我们也做了大多数 Express/Angular 存根/种子/示例也有的事情，即在 Express 路由定义的末尾包含一个通配符路由。

如果您还需要一个包罗万象的路由和/或将 html5mode 设置为 true，那么您需要确保像下面这样定义它，或者将您的客户端会话以角度螺旋成一个自引用的加载循环：

```
app.get(/^((?!\/styles|scripts\/).)*$/, function(req, res){
  res.render('<app_path>/app/index.html'); // or chrome.html if you call it such 
```

});

希望有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:16:49.100

您的模块问题的另一个想法是尝试进入 /yeoman-custom 目录并将其安装在那里，因为这是 yeoman-custom/cli/tasks/server.js 为 Node 提供的实际根目录。

# sql-server - 无法批量加载。操作系统错误代码 5（拒绝访问。）

> ID：14555262
> 
> 赞同：33
> 
> 时间：2013-01-28T04:02:10.483
> 
> 标签：sql-server, tsql, bulkinsert

由于某些奇怪的原因，我在执行批量插入时遇到问题。

```
BULK INSERT customer_stg
FROM 'C:\Users\Michael\workspace\pydb\data\andrew.out.txt'
WITH
(
    FIRSTROW=0,
    FIELDTERMINATOR='\t',
    ROWTERMINATOR='\n'
) 
```

读完[这篇](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2005/ms189934(v=sql.90))文章后，我确信我已经正确设置了我的用户角色，因为它指出......

> bulkadmin 固定服务器角色的成员可以运行 BULK INSERT 语句。

我已`Login Properties`正确设置 Windows 身份验证（如下所示）.. 授予服务器范围的权限`bulkadmin`

[![窗户认证](../Images/f4ed673697b802e066a15fc7b401366d.png)](https://i.stack.imgur.com/7YSbQ.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/daaqcasj.vo1.png)）]

并且命令`EXEC sp_helpsrvrolemember 'bulkadmin'`告诉我上面的信息是成功的，当前用户`Michael-PC\Michael`有`bulkadmin`权限。

[![批量管理员](../Images/4fc0e585e74845f1a224175c1f73be07.png)](https://i.stack.imgur.com/ADWKh.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/bou0uklk.wdj.png)）]

但即使据我所知，我已经正确设置了所有内容，但我仍然收到错误消息。直接从 SQL Server Management Studio 执行批量插入。

> *消息 4861，级别 16，状态 1，第 2 行
> 无法批量加载，因为无法打开文件“C:\Users\Michael\workspace\pydb\data\andrew.out.txt”。操作系统错误代码 5（拒绝访问。）。*

这没有意义，因为显然`bulkadmins`可以运行该语句，我是否打算重新配置其`bulkadmin`工作方式？（我很迷茫）。关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-08-26T14:50:36.623

当您使用 SQL Server 身份验证并且不允许 SQL Server 访问批量加载文件夹时，会出现此错误。

因此，让 SQL Server 访问该文件夹将解决该问题。 ![在此处输入图像描述](../Images/0ab51a155916d6a5a3a3e4cae3451a61.png)

操作方法如下：转到文件夹右键单击->属性->安全选项卡->编辑->添加（在新窗口上）->高级->立即查找。在搜索结果的用户列表下，找到类似 SQLServerMSSQLUser$UserName$SQLExpress 的内容，然后单击确定，以打开所有对话框。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-28T05:33:09.143

我不认为重新安装 SQL Server 会解决这个问题，它只会消磨一些时间。

1.  确认您的用户帐户对相关文件夹具有读取权限。
2.  使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)之类的工具来查看实际尝试访问文件的用户。
3.  我的猜测是，它不是`Michael-PC\Michael`试图访问该文件，而是 SQL Server 服务帐户。如果是这种情况，那么您至少有三个选项（但可能还有其他选项）：

    一种。将 SQL Server 服务设置为随您运行。
    湾。授予 SQL Server 服务帐户对该文件夹的显式访问权限。
    C。将文件放在更符合逻辑的地方，SQL Server 可以访问或可以访问（例如`C:\bulk\`）。

我建议这些东西，假设这是一个包含的本地工作站。当我们谈论生产机器时，从 SQL Server 访问本地文件系统肯定存在更严重的安全问题，当然这仍然可以通过使用`c.`上述方法在很大程度上得到缓解 - 并且只允许服务帐户访问您想要的文件夹能够触摸。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-20T11:28:22.637

我在 SSIS 2012 遇到了同样的问题，解决方案是使用 Windows 身份验证。我正在对 sa 用户使用 SQL 身份验证。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-20T18:19:54.850

尝试为“MSSQLSERVER”用户（或 SQL Server 服务设置为在**Windows 服务中****登录**为的任何用户）授予包含 CSV 和格式文件读取权限的文件夹

 *** * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-20T18:05:55.547

1.  转到开始运行=>services.msc=>SQL SERVER(MSSQLSERVER) 停止服务
2.  右键单击 SQL SERVER(MSSQLSERVER)=>属性=>登录选项卡=>本地系统帐户=>确定
3.  重新启动 SQL Server Management Studio。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-01-14T14:41:31.887

这对我有用：

使用 Windows 身份验证登录 SSIS。

**1**、打开服务，找到MSSQL NT服务账户名并复制：

[![在此处输入图像描述](../Images/75bbe7bbb6ac7b3e9d102c20769285dd.png)](https://i.stack.imgur.com/DyhTZ.jpg)

**2.**打开 SQL Server 应该从中读取的文件夹。**安全 - 组或用户名选项卡 - 添加**并粘贴复制的帐户：**

[![在此处输入图像描述](../Images/d36c53a963a75267510800ea3ae56424.png)](https://i.stack.imgur.com/Og0md.jpg)

3.  您可能会收到“发现多个名称错误”，只需选择 MSSQL 用户：

[![在此处输入图像描述](../Images/f90a732023670bdc5102e285a3d49a27.png)](https://i.stack.imgur.com/dva1s.jpg)

您的`BULK INSERT`查询现在应该可以正常运行了。如果问题仍然存在，请尝试以相同方式将 SQL Server 代理帐户添加到文件夹权限。确保在完成后重新启动服务中的 MSSQL 服务器。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-24T16:10:49.653

有时这可能是虚假的错误消息，尝试使用与运行进程相同的帐户打开文件。我在我的环境中遇到了同样的问题，当我打开文件（使用相同的凭据运行进程）时，它说它必须与已知程序相关联，在我这样做之后我能够打开它并运行过程没有任何错误。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-10T10:12:18.083

确保您使用的文件 ( `'C:\Users\Michael\workspace\pydb\data\andrew.out.txt'`) 位于 SQL 服务器计算机上，而不是运行 MSSMS 的客户端计算机上。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-25T06:23:32.500

1) 打开 SQL 2) 在任务管理器中，您可以检查哪个帐户正在运行 SQL - 它可能不是 Jan 所写的 Michael-PC\Michael。

运行 SQL 的帐户需要访问共享文件夹。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-09T06:10:46.397

当我在 SSMS 中执行批量插入时，我遇到了类似的问题，但它在将任务转换为 SQL Server 代理时失败并返回“操作系统故障代码 5”。

在浏览了之前发布的大量解决方案之后，这种方式通过授予 NT SERVER/SQLSERVERAGENT 对源文件夹的“完全控制”访问权限来解决我的问题。希望它能给那些仍在为错误消息而苦苦挣扎的人带来一些启发.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-04-17T13:15:40.800

在我们的例子中，它最终成为了一个 Kerberos 问题。我按照本文中的步骤解决了该问题：[https](https://techcommunity.microsoft.com/t5/SQL-Server-Support/Bulk-Insert-and-Kerberos/ba-p/317304) ://techcommunity.microsoft.com/t5/SQL-Server-Support/Bulk-Insert-and-Kerberos/ba-p/317304 。

它归结为在运行 BULK INSERT 语句的 SQL Server 的计算机帐户上配置委派。机器帐户需要能够通过“cifs”服务委托给文件所在的文件服务器。如果您使用的是约束委派，请确保指定“使用任何身份验证协议”。

如果涉及 DFS，您可以执行以下 Powershell 命令来获取文件服务器的名称：

```
Get-DfsnFolderTarget -Path "\\dfsnamespace\share" 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-07-22T14:44:18.373

这是我解决此问题的方法非常简单：

1.  打开 SQL Server
2.  右键单击数据库（要备份）
3.  选择属性
4.  选择权限
5.  选择您的数据库角色（本地或云）
6.  在你的底部，你会看到明确的权限表
7.  找到“备份数据库”权限并单击授予权限。

你的问题解决了。**

# python - 不使用 sum() 打印整数列表的总和

> ID：14555263
> 
> 赞同：1
> 
> 时间：2013-01-28T04:02:16.520
> 
> 标签：python, list

我在下面定义了一个函数，可以打印列表中的每个整数，并且效果很好。我想做的是创建第二个函数，该函数将调用或重新利用该`int_list()`函数来显示已生成列表的总和。

我不确定这是否是由代码本身固有地执行的——我对 Python 语法相当陌生。

```
integer_list = [5, 10, 15, 20, 25, 30, 35, 40, 45]

def int_list(self):
    for n in integer_list
        index = 0
        index += n
        print index 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T04:04:34.360

在您的代码中，您`index=0`在每个循环中进行设置，因此应该在`for` 循环之前对其进行初始化：

```
def int_list(grades):   #list is passed to the function
    summ = 0 
    for n in grades:
        summ += n
        print summ 
```

**输出：**

```
int_list([5, 10, 15, 20, 25, 30, 35, 40, 45])
5
15
30
50
75
105
140
180
225 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T04:19:52.300

要获得整数列表的总和，您有几个选择。显然最简单的方法是`sum`，但我想你想学习如何自己做。另一种方法是在加起来时存储总和：

```
def sumlist(alist):
    """Get the sum of a list of numbers."""
    total = 0         # start with zero
    for val in alist: # iterate over each value in the list
                      # (ignore the indices – you don't need 'em)
        total += val  # add val to the running total
    return total      # when you've exhausted the list, return the grand total 
```

第三个选项是[`reduce`](http://docs.python.org/2/library/functions.html#reduce)，它是一个函数，它本身接受一个函数并将其应用于运行总计和每个连续参数。

```
def add(x,y):
    """Return the sum of x and y. (Actually this does the same thing as int.__add__)"""
    print '--> %d + %d =>' % (x,y) # Illustrate what reduce is actually doing.
    return x + y

total = reduce(add, [0,2,4,6,8,10,12])
--> 0 + 2 =>
--> 2 + 4 =>
--> 6 + 6 =>
--> 12 + 8 =>
--> 20 + 10 =>
--> 30 + 12 =>

print total
42 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-18T11:17:03.887

```
integer_list = [5, 10, 15, 20, 25, 30, 35, 40, 45] #this is your list
x=0  #in python count start with 0
for y in integer_list: #use for loop to get count
    x+=y #start to count 5 to 45
print (x) #sum of the list
print ((x)/(len(integer_list))) #average 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-19T07:16:16.483

```
list = [5, 10, 15, 20, 25, 30, 35, 40, 45]

#counter 
count = 0
total = 0

for number in list:
    count += 1
    total += number
#don'n need indent
print(total)
print(count)
# average 
average = total / count
print(average) 
```

# android - Android 日志主要事件无线电缓冲区

> ID：14555268
> 
> 赞同：3
> 
> 时间：2013-01-28T04:03:03.533
> 
> 标签：android, android-logcat

我已经下载了离线 logcat 工具。
它在 log(main/events/radio) 缓冲区之间同步，但我不知道这些缓冲区是什么。
很高兴得到一些参考。
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-08T08:35:02.587

**main** - 主要应用程序日志
**events** - 用于系统事件信息
**radio** - 用于无线电和电话相关信息
**system** - 用于低级系统消息和调试的日志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:19:38.160

好的，答案在这里，只有 4 种日志消息 :)
[http://elinux.org/Android_Logging_System](http://elinux.org/Android_Logging_System)

# hibernate - 创建 jpa 的问题 - 休眠内部连接查询

> ID：14555269
> 
> 赞同：0
> 
> 时间：2013-01-28T04:03:06.650
> 
> 标签：hibernate, jpa, spring-mvc, hibernate-mapping

我是 jpa hibernate 的新手，我在 sql 中有一个内部连接查询，但不知道如何在 jpa-hibernate 语法中创建相同的查询：

基本上我有3张桌子：

ORDERTBL(ORDERID(PK),ORDERDATE,ORDERSTATUS), PRODUCT(PRODUCTID(PK),PRODUCT_NAME), ORDERLINKPRODUCTS(ORDERID(PK),PRODUCTID(FK),QUANTITY,ORDERLINKPRODUCTID(FK))

我想从产品表中获取特定订单的所有产品名称，我应该从 ORDERLINKPRODUCT 查询，因为它包含所有订单。

请在下面找到我的产品类：

```
@Table(name = "PRODUCTS")
@Entity
public class Products { /**
 *
 */
private static final long serialVersionUID = -3882913429956818022L;

@Column(name = "PRODUCTID")
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private int id;
@Column(name = "PRODUCT_NAME")
private String productName;

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public String getProductName() {
    return productName;
}

public void setProductName(String productName) {
    this.productName = productName;
} 
```

}

请在下面找到我的 Orderclass：

```
 @Table(name = "ORDERTBL")
@Entity
public class Order {
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ORDERID")
private Long id;

@Column(name = "ORDERDATE")
private Date orderdate;

@Column(name = "ORDERSTATUS")
private String orderSatus;

public String getOrderSatus() {
    return orderSatus;
}

public void setOrderSatus(String orderSatus) {
    this.orderSatus = orderSatus;
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public Date getOrderdate() {
    return orderdate;
}

public void setOrderdate(Date orderdate) {
    this.orderdate = orderdate;
} 
```

}

请在下面找到我的 ProductOder 课程：

```
 @Entity
@Table(name = "ORDERLINKPRODUCTS")
public class ProductOder implements Serializable {

/**
 *
 */
private static final long serialVersionUID = 8420487251416906739L;

@Column(name = "ORDERLINKID")
@Id
private int orderLinkId;
@Column(name = "ORDERID")
@GeneratedValue(strategy = GenerationType.AUTO)
private int orderId;
@Column(name = "PRODUCTID")
private int productId;
@Column(name = "QUANTITY")
private int quantity;

public int getOrderLinkId() {
    return orderLinkId;
}

public void setOrderLinkId(int orderLinkId) {
    this.orderLinkId = orderLinkId;
}

public int getOrderId() {
    return orderId;
}

public void setOrderId(int orderId) {
    this.orderId = orderId;
}

public int getProductId() {
    return productId;
}

public void setProductId(int productId) {
    this.productId = productId;
}

public int getQuantity() {
    return quantity;
}

public void setQuantity(int quantity) {
    this.quantity = quantity;
} 
```

}

请在下面找到我想在 JPA-Hibernate 中创建的 sql 查询：

```
SELECT prod.PRODUCT_NAME 
    FROM ORDERTBL ord 
    INNER JOIN ORDERLINKPRODUCTS link ON ord.ORDERID = link.ORDERID
    INNER JOIN products prod ON link.PRODUCTID = prod.PRODUCTID  
    WHERE ord.ORDERID = 1 
```

请在下面找到我的方法，其中没有包含 jpa-hibernate 查询的实现：

```
@Override
@SuppressWarnings("unchecked")
public List<Order> getOrderDetailsById(int id) {
    // TODO Auto-generated method stub
    //String hql = "from Person p, where p.firstName = :firsName and p.password //password";
    //return entityManager.createQuery("select o from Products o")
            //.getResultList();
} 
```

有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:54:55.737

尝试将您的实体更改为：

命令

```
@Entity
@Table(name = "ORDER")
public class Order {

    @Id
    @Column(name = "ORDERID")
    private Long id;

    @Column(name = "ORDERDATE")
    private Date orderdate;

    @Column(name = "ORDERSTATUS")
    private String orderStatus;

    @OneToMany(mappedBy = "order", fetch = FetchType.EAGER)
    private List<OrderItem> items;
} 
```

订单项

```
@Entity
@Table(name = "ORDERITEM")
public class OrderItem {

    @Id
    @Column(name = "ORDERITEMID")
    private Long id;

    @ManyToOne
    @JoinColumn(name = "ORDERID")
    private Order order;

    @ManyToOne
    @JoinColumn(name = "PRODUCTID")
    private Product product;

    @Column(name = "QUANTITY")
    private int quantity;
} 
```

产品

```
@Entity
@Table(name = "PRODUCT")
public class Product {

    @Id
    @Column(name = "PRODUCTID")
    private Long id;

    @Column(name = "NAME")
    private String name;
} 
```

和查询：

```
public List<OrderItem> getOrderDetailsById(Long id) {
    Product product = entityManager.find(Product.class, id);
    return product.getOrderItems();
}

public void showProductsInOrder(Long id) {
    List<OrderItem> items = getOrderDetailsById(id);
    for (OrderItem item: items) {
        Product product = item.getProduct();
        System.out.println("Product: " + product.getName() + ", Quantity: " + product.getQuantity());
    } 
```

数据库：

```
ORDER (ORDERID (PK), ORDERDATE, ORDERSTATUS)
ORDERITEM (ORDERITEMID (PK), ORDERID (FK), PRODUCTID (FK), QUANTITY)
PRODUCT (PRODUCTID (PK), NAME) 
```

它未经测试，但我希望它会起作用。

# node.js - 仅在快速认证成功后创建会话

> ID：14555270
> 
> 赞同：4
> 
> 时间：2013-01-28T04:03:07.210
> 
> 标签：node.js, session, authentication, express, sessionid

我要求仅在成功验证后才创建会话。

我能够使用快速中间件创建基于 redisStore 的会话，但它会在第一个请求到达服务器时创建会话。

但是只有在成功认证后我才能创建会话。我用谷歌搜索了一下，发现`req.session.regenerate()`（但我发现这个线程中提到的问题如下： [Regenerate session IDs with Nodejs Connect](https://stackoverflow.com/questions/5265391/regenerate-session-ids-with-nodejs-connect)）

但在重新生成的情况下，它也会创建一个新的，假设旧的已经创建，并且使用相同的参数创建。

那么只有在成功认证后才能创建新的会话ID..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T05:17:05.190

您可能将会话的概念与经过身份验证的会话的概念*混为一谈**。*

 *所有用户都有一个*会话*是正常的——即使是匿名的、尚未登录的用户也是如此。*此会话与经过身份验证的会话*之间的区别仅在于，在本地 Web 服务器上，您指定特定用户已通过身份验证。

例如，一旦您对某人进行身份验证，您可以设置：

```
req.session.isAuthenticated = true; 
```

然后，在渲染页面时，您的控制器可以执行类似的操作

```
function(req, res, next) {
  if (!req.session.isAuthenticated) return res.redirect('/login');
  res.render('appPage');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-26T12:52:34.233

这可能不是您正在寻找的确切答案，但我会为未来的读者回答*标题：*

通过对我的应用程序进行试验，我注意到[express-session](https://www.npmjs.com/package/express-session)**仅在您操作会话对象时才会**设置会话 cookie 。

例如考虑下面的代码：

```
app.post('/login', function (req, res) {
  var authenticated = false;
  if (req.session.authenticated) {
    // session cookie is already set
    authenticated = true;
  } else if (/*validate the user here*/) {
    console.log(' authenticating');
    authenticated = true;
    // if below line executes, the response will have Set-Cookie header
    req.session.authenticated = authenticated;
  }
  res.json({
    status: authenticated
    //if --^ false, no session cookie will be set since we didn't manipulate session object
  });
 }); 
```

尽管请求在内存中创建了一个会话对象供我们使用，但`Set-Cookie`似乎只有在我们操纵（*或篡改？*）创建的会话对象时才会发送标头。

除非我们将`Set-Cookie`标头与响应一起发送并且会话 ID 存储在客户端的 cookie 中，否则我不会将其视为已建立的会话并担心它。

希望能帮助到你。

*旁注：这是跨域ajax请求的情况，对于正常的http请求可能会有所不同，也许有人可以确认这一点**

# java - Java File I/O 验证文件内容，然后使用这些内容创建销售报告

> ID：14555272
> 
> 赞同：-1
> 
> 时间：2013-01-28T04:03:21.727
> 
> 标签：java, file-io

我正在学习 Java**初学者**课程……由于某种原因，我的最新作业似乎非常困难。任务集中在文件 I/O 上。它涉及很多部分，但这部分是真正让我感到困惑的部分。它涉及：

1.  读取销售文件，其中每行应该首先包含部门（N、S、E 或 W），然后是下一行的季度 (1-4)，然后是第三行的销售额，然后重复。**（可以这样做）**
2.  我们必须验证每一行是否具有允许的选项/文件类型之一**（可以这样做）**
3.  然后将任何错误转储到错误文件并要求用户提供另一个文件并重复，直到输入文件的格式正确。 **（有这个工作）**
4.  一旦它采用正确的格式，我们必须能够生成以下格式的销售报告**（无法弄清楚我应该如何能够收集到这个......）**

> 销售报告
> 
> 按部门划分的总销售额：
> 北 $total
> 南 $total
> 东 $total
> 西 $total
> 
> 季度总销售额：
> 一月至三月 $total
> Apr-Jun $total
> Jul-Sep $total
> Oct-Dec $total
> 
> 年终总计：$total

一个菜单选项必须是验证文件格式是否正确，然后出现另一个菜单选项以生成销售报告。

**注意：我们还不需要使用数组（这是下一个任务）。**

```
 import java.io.*;
 import java.util.Scanner;

 public class SalesReporting {
    public static void main(String[] args) throws Exception {
    String inputData;
    String divisionRead;
    int qtrRead;
    double salesRead;
    String filePath;
    String menuChoice;
    File fileName;
    PrintWriter outputErrorLog;
    PrintWriter outputSalesReport;
    Scanner keyboard = new Scanner(System.in);
    Scanner inputFile;
    String overwriteFile;
    Boolean isDataFileError;
    Boolean isValidSalesFile = false;
    Boolean isValidMenuChoice;
    Boolean isToOverwrite = false;

    System.out.println("\tHarmway Corporation" +
            "\nQuarterly Sales Report Generator");

    do { 
        do {
            isValidMenuChoice = true;

            // display main menu options to user & prompt for choice
            System.out.print("\n\tMain Menu" +
                "\n" +
                "\n[V]alidate Sales Data");
            // only display generate sales report option if a sales report has been validated
            if (isValidSalesFile) {
                System.out.print("\n[G]enerate Sales Report");
            }
            System.out.print("\nE[x]it program" +
                "\n");

            System.out.print("\nEnter choice: ");

            menuChoice = keyboard.next();

            if (!menuChoice.equalsIgnoreCase("v") &&
                !menuChoice.equalsIgnoreCase("g") &&
                !menuChoice.equalsIgnoreCase("x")) {
                isValidMenuChoice = false;
                System.out.print("\n\t**Error** - Invalid menu item");
            }
        } while (isValidMenuChoice == false);

        if (menuChoice.equalsIgnoreCase("v")) {
            do {
                // prompt user for the sales data file path
                System.out.print("\nSales data file path: ");
                filePath = keyboard.next();

                fileName = new File(filePath);

                // if the file path doesn't exist, error displayed
                if (!fileName.exists()) {
                    System.out.println("\n" + fileName + " not found");
                }
            } while (!fileName.exists());

            // create a scanner for the input file
            inputFile = new Scanner(fileName);

            // create an error log to dump invalid sales data errors to
            fileName = new File("errorlog.txt");
            outputErrorLog = new PrintWriter(fileName);

            // resets boolean to allow for error free data file check
            isDataFileError = false;

            // validate and store the sales data
            while (inputFile.hasNext())
            {
                // first line must be division N, S, E or W to be valid
                inputData = inputFile.next();
                try 
                {
                    divisionRead = inputData;

                    if (isValidDivision(divisionRead)) {
                        System.out.println("ok division");
                    }

                    else 
                    {
                        isDataFileError = true;
                        outputErrorLog.println(divisionRead + ",Invalid division value");
                    }
                } 
                catch (Exception e) 
                {
                    isDataFileError = true;
                    outputErrorLog.println(inputData + ",Invalid division value");
                }

                // if second line is a valid quarter
                inputData = inputFile.next();
                try 
                {
                    qtrRead = Integer.parseInt(inputData);

                    if (isValidQuarter(qtrRead)) {
                        System.out.println("ok quarter");
                    }

                    else
                    {
                        isDataFileError = true;
                        outputErrorLog.println(qtrRead + ",Invalid quarter value");
                    }
                } 
                catch (Exception e) 
                {
                    isDataFileError = true;
                    outputErrorLog.println(inputData + ",Invalid quarter value");
                }

                inputData = inputFile.next();
                try 
                {
                    salesRead = Double.parseDouble(inputData);  

                    if (isValidSales(salesRead)) {
                        System.out.println("ok sales");
                    }

                    else
                    {
                        isDataFileError = true;
                        outputErrorLog.println(salesRead + ",Invalid sales amount value");
                    }
                } 
                catch (Exception e) 
                {
                    isDataFileError = true;
                    outputErrorLog.println(inputData + ",Invalid sales amount value");
                }

            }

            // close the input sales data file
            inputFile.close();

            // close the error log file to write
            outputErrorLog.close();

            if (isDataFileError)
            {
                // there was an error in the sales file; not a valid sales data file
                isValidSalesFile = false;
                System.out.print("\nThe data file contains data errors"
                    + " (See error log for details)");
            }
            else
            {
                // there were no errors; valid sales data file
                isValidSalesFile = true;
                System.out.print("\nThe data file is validated");
            }
        }

        if (menuChoice.equalsIgnoreCase("g")) {
            System.out.println("\ntemp g");

            do {
                // prompt user for file path to save sales report
                System.out.print("\nSave report as: ");
                filePath = keyboard.next();

                // identify file to be used
                fileName = new File(filePath);

                // file already exists; ask whether to overwrite file or not
                if (fileName.exists())
                {
                    do 
                    {
                        System.out.print("\nOverwrite (y/n): ");
                        overwriteFile = keyboard.next();

                        if (overwriteFile.equalsIgnoreCase("y"))
                        {
                            isToOverwrite = true;

                            // create printwriter for the sales data file
                            outputSalesReport = new PrintWriter(filePath);

                            System.out.println("\nGenerating sales report...");

                            // add code to write to the results to the file

                            // close sales report
                            outputSalesReport.close();

                            System.out.println("\nReport generated successfully!"); 
                        }

                    } while (!overwriteFile.equalsIgnoreCase("n") &&
                            !overwriteFile.equalsIgnoreCase("y"));
                }
                // file doesn't already exist; save the file
                else if (!fileName.exists())
                {
                    // create printwriter for the sales data file
                    outputSalesReport = new PrintWriter(filePath);

                    System.out.println("\nGenerating sales report...");

                    // add code to write to the results to the file

                    // close sales report
                    outputSalesReport.close();

                    System.out.println("\nReport generated successfully!");
                }   
            } while (!isToOverwrite);

        }

        if (menuChoice.equalsIgnoreCase("x")) {
            System.out.println("\nProgram has been terminated.");
            System.exit(0);
        }

    } while (!menuChoice.equalsIgnoreCase("x"));

}

public static boolean isValidDivision(String divisionRead) {
    if (divisionRead.equalsIgnoreCase("N") ||
            divisionRead.equalsIgnoreCase("S") ||
            divisionRead.equalsIgnoreCase("E") ||
            divisionRead.equalsIgnoreCase("W")) {
        return true;
    }

    else {
        return false;
    }
}

public static boolean isValidQuarter(int qtrRead) {
    if (qtrRead >= 1 && qtrRead <= 4) {
        return true;
    }

    else {
        return false;
    }
}

public static boolean isValidSales(double salesRead) {
    if (salesRead >= 0) {
        return true;
    }

    else {
        return false;
    }
}
} 
```

我不是在要求具体的代码，而只是关于我应该如何最好地进行的一些指导。任何意见，将不胜感激。我已经被这个任务困了一个多月了！

如果采用有效格式，销售数据文件将是什么样子的示例（每个都在自己的行上......论坛忽略了中断）：

N
1
35.50
n
2
26.99
N
3
77.45
n
4
58.30
S
1
132.15
S
2
81.19
S
3
159.06
S
4
83.55
E
1
99.40
E
2 25.39 E 2
25.39
E
3
50.25
E
4
43.21
W
1
120.89
_
_
_
_
_
_
_
_ 66.15 牛

3
38.22
N
4
27.66
E
2
135.32
E
3
37.50
E
4
9.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:11:28.897

为自己创建一个包含您需要存储的信息的类（`SalesData`例如），当您验证文件的每个部分时，创建一个新`SalesData`对象，并使用您刚刚读取的值对其进行播种。从那里你将它添加到一个[`java.util.List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)实现中，比如[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html).

这将允许您在读取文件并生成报告后遍历列表。

您的另一个选择是保持每个部门和季度的运行记录。这有点简单，占用的内存更少，但如果报告的内容发生变化，灵活性会降低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:11:48.037

由于您不处理（不想处理）数组或集合，您可以考虑为 North、South、East、West、年终总计创建变量，并且 4 个季度在您遍历文件时更新这些变量的值。

使用收集这个任务会有点简化，但工作量几乎相同。

要生成实际报告，您可以使用 String 类进行连接，例如

```
String.format("%s:%s",strDivision, doubleAmount); 
```

这将为您提供所需格式的信息，这可以扩展到解决报告的其余部分。

我认为您在解析文件时不需要帮助，因为您说您能够验证它。

# sharepoint - 如何从控制台应用程序将列表添加到 SharePoint？

> ID：14555275
> 
> 赞同：0
> 
> 时间：2013-01-28T04:04:05.780
> 
> 标签：sharepoint, console-application

我正在尝试通过控制台应用程序将列表添加到站点。这是我到目前为止所拥有的。

```
namespace spConsole
{
class Program
{
    static void Main(string[] args)
    {
        using (SPSite site = new SPSite("http://spdev.com/SitePages/Home.aspx"))
        {
            SPWebCollection webcoll = site.AllWebs;

            SPWeb web = webcoll["SubSite1"];

            SPList newList = web.Lists.Add("New List", "Description", SPListTemplateType.GenericList);                             

        }
    }
}
} 
```

我收到以下错误：无法将类型“System.Guid”隐式转换为“Microsoft.SharePoint.SPList”

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:27:30.153

您尚未创建 SPSite 的实例

请按照此链接以编程方式创建新列表

[http://sarangasl.blogspot.com/2009/11/create-sharepoint-list-programmatically.html](http://sarangasl.blogspot.com/2009/11/create-sharepoint-list-programmatically.html)

或者

[http://www.mindfiresolutions.com/Create-List-Programmatically-in-SharePoint-274.php](http://www.mindfiresolutions.com/Create-List-Programmatically-in-SharePoint-274.php)

# javascript - 更改一些 html 元素，并在不重新加载页面的情况下更改 url

> ID：14555276
> 
> 赞同：1
> 
> 时间：2013-01-28T04:04:18.110
> 
> 标签：javascript, html

我有一个很长的网站。该网站的其他一些部分需要在不重置该表单的情况下进行更改。我打算使用 iframe 来加载页面的其他部分。页面上的侧边栏用作导航。我希望侧边栏中的链接更改 iframe 指向的 url，并更改实际的 url 栏。但不重置/重新加载任何其他 iframe。

谢谢

PS：我是 JavaScript 的新手，所以完整的例子会有所帮助。

这是我的一些代码：

```
<div class="sidebar">
<input type="text" placeholder="search for accounts" id="search" />
<ul id=sidebar-list>
  <li class=list>
    <a onclick="edit-iframe-1" id="username">This will change iframe 1 to point to a user</a>
    <a onclick="edit-iframe-2" id="username">This will change iframe 2 to point to a user</a>
  </li>
  <li class=list>
    <a onclick="edit-iframe-1" id="username">This will change iframe 1 to have a different user</a>
    <a onclick="edit-iframe-2" id="username">This will change iframe 2 to have a different user</a>
  </li>
</ul>
</div>
<div id=iframediv1>
  <iframe id=iframe1 src="/path/file?user=username"></iframe>
</div>
<div id=iframediv2>
  <iframe id=iframe2 src="/path/differentfile?user=username"></iframe>
</div> 
```

这个想法是侧边栏中的列表包含所有不同的用户名，无论您单击哪个用户名，它都会加载相应的页面。url中唯一需要更改的部分是之后的部分`?user=`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:48:04.173

您可以尝试使用 history.pushState。不幸的是，浏览器支持将仅限于较新的版本。

这个答案应该让您了解您所面临[的问题：修改 URL 而无需重新加载页面](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:09:57.487

我认为你应该使用 javascript 来达到你的目的。我认为这可能是一个解决方案。

```
 <SCRIPT LANGUAGE="JavaScript">
    function newLocation1(nwloc){
        document.getElementById('iframe1').src = "/path/file?user="+nwloc;
    }
    function newLocation2(nwloc){
        document.getElementById('iframe2').src = "/path/differentfile?user="+nwloc;
    }
    </script>

    <div class="sidebar">
    <input type="text" placeholder="search for accounts" id="search" />
    <ul id=sidebar-list>
      <li class=list>
        <a onclick="javascript:newLocation1('username1')" >This will change iframe 1 to point to a user</a>
        <a onclick="javascript:newLocation2('username1')" >This will change iframe 2 to point to a user</a>
      </li>
      <li class=list>
        <a onclick="javascript:newLocation1('username2')" >This will change iframe 1 to have a different user</a>
        <a onclick="javascript:newLocation2('username2')" >This will change iframe 2 to have a different user</a>
      </li>
    </ul>
    </div>
    <div id=iframediv1>
      <iframe id="iframe1" src="/path/file?user=username1"></iframe>
    </div>
    <div id=iframediv2>
      <iframe id="iframe2" src="/path/differentfile?user=username1"></iframe>

</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:14:14.240

这是一个简单的解决方案，它使用 jQuery 从单击的链接中提取 href 并将其插入到目标 iframe 的 src 属性中。

```
<div class="sidebar">
<input type="text" placeholder="search for accounts" id="search" />
<ul id="sidebar-list">
  <li class="list">
    <a href="/path/file?user=mike" data-target="iframe1">Mike - Frame 1</a>
    <a href="/path/differentfile?user=mike" data-target="iframe2">Mike - Frame 2</a>
  </li>
  <li class=list>
    <a href="/path/file?user=joe" data-target="iframe1">Joe - Frame 1</a>
    <a href="/path/differentfile?user=joe" data-target="iframe2">Joe - Frame 2</a>
  </li>
</ul>
</div>
<div id=iframediv1>
  <iframe id=iframe1 src="/path/file?user=username"></iframe>
</div>
<div id=iframediv2>
  <iframe id=iframe2 src="/path/differentfile?user=username"></iframe>
</div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script type="text/javascript">
    $(document).ready(function()
    {
        $(".sidebar a").click(function(event) {
            event.preventDefault();

            var targetID = $(this).attr("data-target");
            $("#" + targetID).attr("src", $(this).attr("href"));
        });
    });
</script> 
```

# android - 如何在 Android 中解压 tar 文件？

> ID：14555278
> 
> 赞同：8
> 
> 时间：2013-01-28T04:04:49.610
> 
> 标签：android, tar

我对 tar 不太熟悉，所以，这可能是一个愚蠢的问题，但我有一种情况，我想从服务器上获取一个 tarball（最好是压缩的，但这不是必需的），将它下载到设备上然后解压它。

我没有看到任何标准库来做到这一点......我忽略了它，还是它不存在？

[编辑] 我正在尝试通过一些处理解压缩焦油的 API 或库在我的应用程序中执行此操作 - 我不是在寻找可以在我的设备上解压缩东西的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T04:08:43.630

我不知道操作系统是否支持它。但是您应该能够使用第三方库来做到这一点。

[这是一个](http://code.google.com/p/jtar/)，我相信还有其他的可供选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-15T17:06:56.933

很抱歉再次提出一个老问题。

从 6.0/Marshmallow 开始，Android 包括[Toybox](http://landley.net/toybox/about.html)，这是一个包含每个实用程序小版本的可执行文件。

因此，在 6+ 版本的 Android 上，您可以`tar`像在普通 linux 系统上一样执行命令。

截至 2019 年第一季度，6.0 及更高版本代表了大约 90% 的 Android 用户，因此这或多或少是安全的，除非您想要全面支持，或者瞄准具有不同 Android 采用率的市场。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-17T22:13:28.893

在这里记下另一个选项，

库名称：[Apache Commons Compress](https://commons.apache.org/proper/commons-compress/) Apache License，2.0 版

Apache Commons Compress 库定义了一个 API，用于处理 ar、cpio、Unix dump、**tar**、zip、gzip、XZ、Pack200、bzip2、7z、arj、lzma、snappy、DEFLATE、lz4、Brotli、Zstandard、DEFLATE64 和 Z 文件.

此处的示例： [Java TAR 示例 – 压缩和解压缩 *.tar 或 *.tar.gz 文件](https://memorynotfound.com/java-tar-example-compress-decompress-tar-tar-gz-files/) 这演示了如何以 .tar 或 .tar.gz 格式递归压缩文件或目录，以及如何解压缩 .tar 或 .tar.gz文件

# jquery - jQuery 实时链事件单击：显示（回调）无效 - 错误？

> ID：14555286
> 
> 赞同：0
> 
> 时间：2013-01-28T04:07:03.803
> 
> 标签：jquery, callback, live, show

我正在为这段代码苦苦挣扎，不明白这是错误还是编码错误？！任何帮助深表感谢。

```
$('.showDiv').live({
  click: function () {
    $('#myDiv').show(function () {
      // DO SOMETHING AFTER SHOW DIV COMPLETES
      // THE PROBLEM IS THAT I CAN'T MAKE DIV SIMPLY SHOW WITHOUT EFFECT!
    });
  }, mouseenter: function () {
    // ...
  }, mouseleave: function () {
    // ...
  }
}); 
```

链事件都运行良好（click:, mouseenter:, mouseleave:) 但`$('#myDiv').show(function () {...}`总是使用默认的“swing”来执行显示，这弄乱了我需要的东西 - 只是显示 div 没有效果也没有延迟！

奇怪的是，如果我不使用任何回调函数，只是`$('#myDiv').show();`div 显示为我想要的 - 立即并且没有效果......我想知道这是否是一个错误？

我已经尝试在节目中使用 args，`$('#myDiv').show(100, function () {...}`但`$('#myDiv').show(0, '', function () {...}`div 总是以摇摆效果出现。

注意：由于 live 会贬值，我也尝试过，`.on()`但结果完全相同。

任何帮助或提示？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:10:13.987

不要将*任何*论据传递给`.show()`，[如记录](http://api.jquery.com/show/)的那样，并且正如您的实验所揭示的那样。

> 没有参数，该`.show()`方法是显示元素的最简单的方法...匹配的元素将立即显示，没有动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:11:23.200

您应该切换到`.on`，但这与它无关。

如果您查看文档，[`.show`](http://api.jquery.com/show/)您会发现没有将回调作为第一个参数的方法形式。

如果您不希望完成任何动画，则没有理由进行回调，因为操作会立即完成。如果您需要在异步动画完成后发生回调，则只有回调才有意义。

如果你*真的*想要，你可以使用`.show(0, function () { ... })`，但这真的没有意义。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T04:10:33.537

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。

检查[jQuery .on 文档](http://api.jquery.com/on/)

**更新**

```
$('.showDiv').live({
 click: function () {
   $('#myDiv').show(0,function () {
  // pass duration parameter first. 0 milisec 
  alert('myDiv is visible.');
});
 }, mouseenter: function () {
// ...
 }, mouseleave: function () {
// ...
 }
}); 
```

# settings - 在 xrange 和 yrange 轴标签中保留有效数字

> ID：14555287
> 
> 赞同：1
> 
> 时间：2013-01-28T04:07:10.467
> 
> 标签：settings, gnuplot

我有一个从 1.5 到 2.5 的 yrange，但 gnuplot 那时只显示“2”而不是“2.0”，即它截断了“.0”

如何防止“.0”被截断，以便所有轴标签显示相同数量的有效数字？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:34:46.460

您可以使用以下命令控制 x（例如）tic 标签的格式

```
set format x "%.2e" 
```

对于小数点后有 2 位有效数字的科学记数法。更多信息类型

```
help set format 
```

另请注意，字符串打印命令接受格式字符串，例如代码

```
mynum = 42.2
set title sprintf("My favorite number is %.2e", mynum) 
```

会给标题

```
"My favorite number is 4.22e+01" 
```

# directx - 每个实例纹理，以及顶点和像素着色器？

> ID：14555289
> 
> 赞同：0
> 
> 时间：2013-01-28T04:07:15.757
> 
> 标签：directx, hlsl, directx-11, vertex-shader, pixel-shader

如何在同一个 Vertex Buffer 和/或 DeviceContext 中实现每个实例的纹理、顶点着色器和像素着色器？

我只是想找到最有效的方法来让相同类型的网格使用不同的像素着色器，但颜色不同。例如，我希望顶点缓冲区中的正方形和三角形模型，并让顶点/像素/等着色器根据实例数据采取不同的行动......（如果实例数据以某种方式包含“死”，则着色器用于使用纯色而不是渐变绘制不透明的形状。

***给定：*** 1\. Vertex Buffer、Square 和 Triangl 中的不同模型模板（最终更多）。

1.  具有 [n] 个方形和/或三角形等类型实例的实例缓冲区。

***猜测：*** 我正在尝试研究的事情：

A：我可以在缓冲区数据中添加 Texture、VertexShader 或 PixelShader ID，以便 HLSL 或 InputAssembly 可以确定在绘制时使用哪个 Shader？

B. 我可以将多个像素和顶点着色器“设置”到 DeviceContext 中吗？如何告诉 DirectX“切换”在渲染时加载的顶点着色器？

C. 每种类型（顶点、像素、外壳等）有多少个着色器可以与默认顶点缓冲区中的模型定义/网格相关联？

D. 我可以在 HLSL 中使用某种着色器选择器吗？

相关 C++ 代码

当我创建一个输入布局时，我是否可以在不指定实际顶点着色器的情况下执行此操作，或者以某种方式指定多个？

```
NS::ThrowIfFailed(
result = NS::DeviceManager::Device->CreateInputLayout(
NS::ModelRenderer::InitialElementDescription,
2,
vertexShaderFile->Data,
vertexShaderFile->Length,
& NS::ModelRenderer::StaticInputLayout
)
); 
```

当我设置 VertexShader 和 PixelShader 时，如何将它们与 VertexBuffer 中的特定模型相关联？是否可以设置多个？

```
DeviceManager::DeviceContext->IASetInputLayout(ModelRenderer::StaticInputLayout.Get());

DeviceManager::DeviceContext->VSSetShader(ModelRenderer::StaticVertexShader.Get(), nullptr, 0);
DeviceManager::DeviceContext->PSSetShader(ModelRenderer::StaticPixelShader.Get(), nullptr, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:41:08.303

> 如何将 Texture、VertexShader 或 PixelShader ID 添加到缓冲区数据，以便 HLSL 或 InputAssembly 可以确定在绘制时使用哪个 Shader？

您不能将像素着色器 ID 分配给缓冲区，这不是管道的工作方式。

A / 您一次只能在设备上下文中绑定一个顶点/像素着色器，它定义了您的管道，使用此着色器绘制几何图形，然后根据需要切换到另一个顶点/像素着色器，绘制下一个几何图形...

B/您可以使用相同模型的不同着色器，但这是在 cpu 上使用 VSSetShader、PSSetShader 完成的......

C/否，原因与 B 相同（在 CPU 上设置着色器）

> 当我创建一个输入布局时，我是否可以在不指定实际顶点着色器的情况下执行此操作，或者以某种方式指定多个？

如果您不指定顶点着色器，则管道将认为您绘制“空”几何图形，这实际上是可能的（并且非常有趣），但有点脱离上下文，如果您提供几何图形，则需要发送顶点着色器数据因此运行时可以将您的几何布局与顶点输入布局相匹配。您当然可以通过多次调用该函数来创建多个输入布局（在最坏的情况下，每个顶点着色器/几何图形一次，但如果两个模型/顶点着色器具有相同的布局，则可以省略它）。

> 当我设置 VertexShader 和 PixelShader 时，如何将它们与 VertexBuffer 中的特定模型相关联？是否可以设置多个？

你绑定你需要的一切（顶点/像素着色器、顶点/索引缓冲区、输入布局）并调用draw（或drawinstanced）。

# ruby-on-rails - 如何在不丢失数据的情况下将“：limit => nil”添加到架构

> ID：14555293
> 
> 赞同：1
> 
> 时间：2013-01-28T04:08:09.157
> 
> 标签：ruby-on-rails, postgresql, rails-migrations

我有以下 Rails 迁移：

```
class AddTextToReference < ActiveRecord::Migration
  def change
     add_column :references, :source_text, :text
  end
end 
```

我现在意识到`:source_text`也需要设置为`:limit => nil`.

如何添加`:source_text`到我的架构而不丢失存储在我的`:source_text`列中的数据？

我在本地使用 PostgreSQL 并在 Heroku 上进行生产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:13:20.867

尝试`change_column`方法

```
def change
  change_column :references, :source_text, :text, :limit => nil
end 
```

# algorithm - 找到包含一组点的两个平行平面的算法

> ID：14555294
> 
> 赞同：2
> 
> 时间：2013-01-28T04:08:18.637
> 
> 标签：algorithm, math

[我正在使用这篇论文](https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDcQFjAA&url=http%3A%2F%2Fvtol.org%2F05AC4680-E91B-11E0-8A940050568D0042&ei=jfoFUar9I9Cz0QW18YCgAw&usg=AFQjCNGN0LrE1KAE-V_xg9up320zygRlkQ&bvm=bv.41524429,d.d2k)来实现一种算法，用于确定无人机最安全的着陆点。

为此，我试图找到两个包含一组 9 个点的平行平面，同时最小化这两个平面之间的距离 r。

r 将代表地形的粗糙度。

我想要解决问题的一般策略或描述解决方案的论文的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:21:27.033

你能做到以下几点：

1.  找到9 个点的[凸包](http://en.wikipedia.org/wiki/Convex_hull)
2.  `p`对于凸包中的每个平面，找到最远的`pt`不在其中的点`p`，让第二个平面平行`p`并通过`pt`并计算距离
3.  取最小值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:13:56.817

目标是找到正常的飞机。然后建造飞机很容易。

并且有有限数量的平面法线候选：凸包边缘向量的叉积（这包括但不限于面法线）。对于这个点数，您可以将它们全部计算在内。

为什么？

*   每个平面都接触一些非零数量的点（否则它可以移动得更近）。
*   如果我们可以稍微旋转平面而不会失去与这些点的连接，距离将会减小。
*   所以最优平面不能旋转。
*   如果一个平面接触两个点，它只能围绕这个边缘旋转。
*   如果一个平面接触两个不平行的边，它就不能旋转。
*   那么它的法线是那些边缘向量的叉积。

# c# - 捆绑 css 文件 - 找不到文件

> ID：14555295
> 
> 赞同：1
> 
> 时间：2013-01-28T04:08:19.323
> 
> 标签：c#, javascript, asp.net, asp.net-mvc-4, bundling-and-minification

我正在使用 BundleConfig 将我的 css 和 javascript 文件捆绑在 mvc 4.0 项目中。刚开始使用它，但不知何故我捆绑的 css 文件从服务器获得 404 状态。想知道是什么问题。

这是我的设置；

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/CSSJSBundles/3rdpartycss").Include(
                    "~/Scripts/jquery.jnotify.css" 
```

)); }

```
 BundleTable.EnableOptimizations = true;
} 
```

我在我的根目录中创建了那个文件夹：'CSSJSBundles'。我需要吗？或者它只是 mvc 使用的虚拟文件夹？我还需要在 Global.aspx 中进行任何设置吗？

我还删除了该文件夹，该捆绑的 css 文件仍然存在 404 错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:00:52.170

1.  如先前答案之一所述，您需要更改`ScriptBundle`为`StyleBundle`.

2.  `BundleTable.EnableOptimizations = true;`不是必需的。这样做是在您处于调试模式时强制进行捆绑和缩小。默认操作不是在调试模式下捆绑/缩小，因此您可以更轻松地调试。当您想查看输出时使用该行，因为它会在发布模式下发生。

3.  不，您不需要该文件夹`CSSJSBundles`实际存在。

4.  看来您需要将此行添加到您`Application_Start()`的`global.asax.cs`文件中：`BundleConfig.RegisterBundles(BundleTable.Bundles);`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T05:03:57.783

你必须使用**StyleBundle** ...不是 ScriptBundle，因为它是一个 css 文件。

对于 js 文件，你应该使用 ScriptBundle。

尝试

```
public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.Add(new StyleBundle("~/bundles/3rdpartycss").Include(
                        "~/Content/jquery.jnotify.css"
                        ));
        } 
```

:)

# hibernate - 在playframework中提交带有joda时间的表单

> ID：14555296
> 
> 赞同：1
> 
> 时间：2013-01-28T04:08:20.593
> 
> 标签：hibernate, session, playframework, jodatime

我使用播放框架 1.2.5。

我有一个 html-form（groovy 模板）应该编辑一些产品。我在此产品中拥有的字段之一是：“updateDate”- joda-time 日期类型。

当我提交表单时，我希望得到带有当前更新日期字段（=当前提交时间）的输出，但我有旧值 - 上一个日期。我做错了什么？

这是 form.html 模板片段：

```
#{form @Products.save()}

  <input type="hidden" name="product.id" value="${product?.id}">

  %{
     org.joda.time.DateTime nowTime = org.joda.time.DateTime.now();
  }%

  <input type="hidden" name="product.updateDate" value="${nowTime}">    
   ...    

  <input type="submit" value="Save this product" id="saveProduct">
#{/form} 
```

**注意：**

"${nowTime}" 的值在模板中是正确的（我已经检查过了），错误的值被传递给控制器​​的 save() 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:01:56.870

Play 1.2.x 支持自动绑定到 Date 对象，它支持许多不同的日期格式。检查，[http://www.playframework.org/documentation/1.2.5/controllers#binding](http://www.playframework.org/documentation/1.2.5/controllers#binding)

我不知道 DateTime 支持，但您始终可以将其作为 Date 实例接受，并在需要时从中创建 DateTime，或者您可以实现 TypeBinder 接口来创建自己的自定义映射。见[http://www.playframework.org/documentation/1.2.5/controllers#custombinding](http://www.playframework.org/documentation/1.2.5/controllers#custombinding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:47:06.243

这是可怕的代码。您可以让用户伪造更新日期，只需传递他们喜欢的任何值。

但是我从您的评论中看到您找到了一种在控制器代码中很好地做到这一点的方法。我经常在模型代码中通过扩展 save 方法来做到这一点，因此它设置更新时间然后调用 super.save()

# actionscript-3 - 播放不在舞台上的影片剪辑会消耗资源吗？

> ID：14555297
> 
> 赞同：1
> 
> 时间：2013-01-28T04:08:35.800
> 
> 标签：actionscript-3, flash

问题如下：如果我有一个无限播放的MovieClip，当它不是舞台上任何东西的孩子（即不可见）时，它是否仍会消耗额外的资源（cpu时间，内存等等）。

我想知道只调用 removeChild() 是否安全，还是需要在每个删除子对象之前调用 stop() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:37:41.323

是的，这是正确的，即使它不在舞台上，它也在使用这些实例实际播放的资源。您是对的，即使您将它从舞台上移除，您也需要调用 stop()。

如果您正在制作游戏并且正在汇集具有动画的精灵，请务必注意这一点。特别是如果您的动画有补间，因为这些补间实际上占用了处理周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:42:40.873

当您调用 stop() 或 removeChild() 时，movieclip 或孩子仍在播放，movieclip 中的声音仍在播放。推荐使用 spritesheet 而不是movieclip。

# java - 扫描仪 NoSuchElement 异常 Java

> ID：14555299
> 
> 赞同：1
> 
> 时间：2013-01-28T04:09:12.363
> 
> 标签：java, input, java.util.scanner, output

有人能告诉我为什么这段代码会抛出 NoSuchElementException 吗？我以前使用扫描仪进行输入和输出，但从来没有遇到过问题。

```
import java.util.*;

public class TaskRunner
{
    public static void main(String[] args)
    {
        Scanner keyboard = new Scanner(System.in);

        System.out.print("Enter the year: ");
        int year = keyboard.nextInt();
        System.out.print("\nEnter the month: ");
        int month = (keyboard.nextInt() - 1);
        System.out.print("\nEnter the day: ");
        int day = keyboard.nextInt();

        System.out.print(day);
    }
} 
```

由于每个人都在询问，因此在第 10 行抛出了异常。也继承了堆栈跟踪。

```
Enter the year: Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Scanner.java:907)
    at java.util.Scanner.next(Scanner.java:1530)
    at java.util.Scanner.nextInt(Scanner.java:2160)
    at java.util.Scanner.nextInt(Scanner.java:2119)
    at TaskRunner.main(TaskRunner.java:10) 
```

# javascript - 内容可编辑 div 中的单选按钮

> ID：14555301
> 
> 赞同：4
> 
> 时间：2013-01-28T04:09:33.130
> 
> 标签：javascript

我在内容可编辑的 div 中有一个单选按钮。但是当我单击单选按钮时，Firefox 和 IE 中没有任何反应。但它在 Chrome 中运行良好。

我该怎么做才能在 Firefox 和 IE 中完成这项工作？

该代码可在[http://jsbin.com/uqexoy/2/edit](http://jsbin.com/uqexoy/2/edit)获得，很简单：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div contentEditable="true"><input type="radio" />ere er er er re </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:19:52.687

这经过测试可以在 IE8、IE9、Chrome 和 Firefox 中运行。它确实有效，尽管很奇怪，在 Opera 中也是如此，其中`input field`（在我们的例子中 a `radio button`）确实将其状态更改为`checked`（用 JavaScript 测试`alert(this.checked);`），但它并没有改变它的外观来反映这一点。请参阅下面的可能解决方法。

大多数有问题的浏览器的解决方案是将不可编辑的内容包装在 a 中`span`，如下所示：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div contentEditable="true">
    <span contentEditable="false">
      <input type="radio" />
    </span>ere er er er re 
  </div>
</body>
</html> 
```

至于 Opera 部分，它不反映对 'should' 状态的更改这一事实`radio button`可以*通过*`selected`使用CSS 选择器设置其两个不同状态的样式并将这两个 CSS 规则仅应用于 Opera 浏览器来覆盖。Opera 似乎接受这样的属性更改，这在我测试过的所有其他浏览器中没有任何区别。这可能是您应用 Opera 特定 CSS 规则以反映状态更改的方式。这是一个例子：*`input[type="radio"]``input[type="radio"]:checked``background-color``radio buttons``checked`*

 *```
input[type="radio"]:checked {background-color:gray;} 
```

其他浏览器将简单地忽略此 CSS 规则。可以应用的另一个可接受的 Opera 特定规则是`border`，但我发现在我们的案例中它没有任何价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:13:43.773

您使用 DOMElement 的 contentEditable 属性，就像这样

```
 <div onClick="this.contentEditable='true';"><input type="radio" />
    This is test
 </div> 
```*

# java - 如何动态隐藏一级级联参数

> ID：14555302
> 
> 赞同：0
> 
> 时间：2013-01-28T04:09:36.823
> 
> 标签：java, eclipse, reporting, birt

我有一个案例，我想在级联参数组中隐藏第一级参数。我将该参数作为 url 的一部分传递（即作为查询字符串？）。现在我在级联参数组下创建了两个参数（即：officecode 和 empno ）。如果用户通过url传递officecode参数（这意味着用户不是管理员），那么我想隐藏第一级参数（即officecode）并直接加载与该办公室对应的所有empno。如果用户没有将officecode作为一部分传递的url（这意味着用户是管理员并且想要显示所有办公室），然后我想在参数dailog中显示这两个参数。或者还有其他方法来处理这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:50:59.777

您可以通过在下面添加此脚本来动态隐藏参数`getDefaultValueList:`

```
reportContext.getHttpServletRequest().getParameter("outerParameter")!=null?reportContext.getDesignHan
dle().findParameter("outerParameter").hidden = true:null 
```

这将检查是否通过 servlet 填充了 outerParameter。如果是，它会隐藏它，如果不是，它会显示出来。

同理，你可以在lower level参数中检查上层是否已经被填充，如果是，则传递该值。

网址将类似于`www.website.com/birt/run?__report=reportname.rptdesign&outerParameter=specifiedValue`.

# c++ - 访问向量元素的类中的“this”指针

> ID：14555303
> 
> 赞同：2
> 
> 时间：2013-01-28T04:09:56.063
> 
> 标签：c++, class, pointers

我在实现文件中有以下内容......

```
void ClientList::interestCompare(vector<string> intr)
{
    for(int index = 0; index < intr.size(); index++)
    {
        this->interests[index];  
    }
} 
```

这在规范文件中......

```
class ClientList
{
private:
// A structure for the list
struct ListNode
    {
        char gender;
        string name;
        string phone;
        int numInterests; // The number of interests for the client
        vector<string> interests; // list of interests
        string match;
        struct ListNode *next;  // To point to the next node
    }; 
//more stuff
...} 
```

是否可以使用“this”指针访问结构中的“interests”向量？

如果有怎么办。

正如我现在所拥有的，我初始化一个 ListNode 指针指向 head 以便访问列表。我只是想知道“this”指针是否只能访问类的成员，或者它们是否可以访问嵌入在类中的更深层次的 ADT 变量。

这个问题还有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T04:16:42.160

您只在 ClientList 类中声明了一个 ListNode 类型，这并不意味着您有一个 ClientList 实例。当您已经使用 std::vector 时，您可以使用 std::vector 或 std::list 而不是实现另一个列表

```
class ClientList
{
private:
// A structure for the list
  struct Client
  {
    char gender;
    std::string name;
    std::string phone;
    int numInterests; // The number of interests for the client
    std::vector<string> interests; // list of interests
    std::string match;
   }; 
   std::vector<Client> clients;
  //more stuff
}; 
```

编辑：

如果要比较两个列表，请使用[std::set_intersection](http://en.cppreference.com/w/cpp/algorithm/set_intersection)，它需要两个容器`sorted`就位。

```
void ClientList::FindClientHasCommonInterest(const vector<string>& intr)
{
   for(auto client = clients.begin(); client != clients.end(); ++client)
   {
      std::vector<std::string> intereste_in_common;
       std::set_intersection((*client).begin(), (*client).end(), 
                             intr.begin(), intr.end(), 
                             std::back_inserter(intereste_in_common));
       if (intereste_in_common.size() >= 3)
       {
            // find one client
       }
   }  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T04:20:22.440

不，对于嵌套类，Java 和 C++ 是不同的。C++ 嵌套类本质上与Java 中的**静态**嵌套类相同。因此，您必须使用嵌套结构的实例来访问其成员。

# ruby-on-rails - 使用太阳黑子搜索：solr

> ID：14555307
> 
> 赞同：0
> 
> 时间：2013-01-28T04:11:04.637
> 
> 标签：ruby-on-rails, sunspot-rails

我有两个模型，分别命名为 Products 和 Variants，其中 Variant 模型与 Products 关联，因为 Product 有许多 Variants。变体模型具有名为“available_on”的字段......我想使用两个日期作为签入n结帐日期来实现搜索。

.

如果每个日期都有产品的变体，入住日期到结帐日期，结果将映射所有这些产品，它就是结果....

. . 指导我如何使用 Sunspot:solr 给出条件

大致我的模型是这样的

```
product
{
product_id integer
has_many variants
}

variant
{
variant_id integer
available_on date
belongs_to product
} 
```

check-in n checkout 是搜索的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:25:04.407

如果您对模型提出质疑，那么回答会更容易，但一般来说，如果您有 has_many 关系，那么您应该索引嵌套模型

```
#variant model

searchable do

  integer :product_id
  time :check_in     
  time :check_out     

end 
```

如果您需要从父`has_many`模型中索引某些内容，您可以通过`:multiple=>true`这种方式使用选项

```
#product model

def variant_ids     
  variants.collect(&:id)
end

searchable do

  integer :variant_ids, :multiple=>true
  ...

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:23:03.407

索引每个模型，并从 SOLR 返回您需要的变体/产品。顺便说一句，如果您正在使用 Spree，则有一个用于集成太阳黑子和 spree 的宝石。我只是把它分叉了：[https ://github.com/banane/spree_sunspot_search](https://github.com/banane/spree_sunspot_search)

# php - PHP不显示MYSQLI结果

> ID：14555310
> 
> 赞同：0
> 
> 时间：2013-01-28T04:11:41.407
> 
> 标签：php, mysqli

我正在尝试创建一个脚本，我可以继续引用它来显示数据库条目。我相信我的问题是当我尝试显示结果时，我不知道如何调用 mysqli 和查询。我得到的错误是调用非对象上的成员函数 fetch_row()

```
class connectDatabase {

public $category;
public $query; 
public $mysqli;

    public function __construct($DB_HOST, $DB_USER, $DB_PWD, $DB_NAME)
    {
        $mysqli = new mysqli($DB_HOST, $DB_USER, $DB_PWD, $DB_NAME);
        return $this->mysqli = $mysqli;

    }

    public function queryInformation($category) {
        $query = "SELECT * FROM postad WHERE `category` = $this->category ORDER by date desc";
            return $this->query = $query;

    }
    public function displayResult() {
        $mysqli = $this->mysqli ; 
        $query = $this->query;
        $result = $mysqli->query($query);

        while ($row = $result->fetch_row()) {
        echo "$row[1] $row[2] $row[3] $row[4]  </br>" ;

    }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:32:48.987

如果你 var_dump $result 它可能是布尔值 false，因为查询失败。如果成功，它应该是一个对象。如果返回值为布尔值，您需要有故障保护。

查看返回值： http: [//php.net/manual/en/mysqli.query.php](http://php.net/manual/en/mysqli.query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:17:25.963

我们可以稍微简化一下。

尝试这个

```
 $mysqli = new mysqli($DB_HOST, $DB_USER, $DB_PWD, $DB_NAME);
    $category = "something";

    $result = $mysqli->query("SELECT * FROM postad WHERE `category` = '$category' ORDER by date desc");
    while ($row = $result->fetch_row()) {
        echo "$row[1] $row[2] $row[3] $row[4]  </br>" ;

    } 
```

# java - 在 Hadoop Map Reduce 中重命名部分文件

> ID：14555313
> 
> 赞同：21
> 
> 时间：2013-01-28T04:11:58.370
> 
> 标签：java, hadoop, mapreduce

我尝试按照页面[http://hadoop.apache.org/docs/mapreduce/r0.21.0/api/index.html?org/apache/hadoop/mapreduce/lib/output/MultipleOutputs](http://hadoop.apache.org/docs/mapreduce/r0.21.0/api/index.html?org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)`MultipleOutputs`中的示例使用该类[.html](http://hadoop.apache.org/docs/mapreduce/r0.21.0/api/index.html?org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)

驱动程序代码

```
 Configuration conf = new Configuration();
    Job job = new Job(conf, "Wordcount");
    job.setJarByClass(WordCount.class);
    job.setInputFormatClass(TextInputFormat.class);
    job.setMapperClass(WordCountMapper.class);
    job.setReducerClass(WordCountReducer.class);
    job.setMapOutputKeyClass(Text.class);
    job.setMapOutputValueClass(IntWritable.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);
    FileInputFormat.setInputPaths(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));
    MultipleOutputs.addNamedOutput(job, "text", TextOutputFormat.class,
            Text.class, IntWritable.class);
    System.exit(job.waitForCompletion(true) ? 0 : 1); 
```

减速机代码

```
public class WordCountReducer extends
        Reducer<Text, IntWritable, Text, IntWritable> {
    private IntWritable result = new IntWritable();
    private MultipleOutputs<Text, IntWritable> mos;
    public void setup(Context context){
        mos = new MultipleOutputs<Text, IntWritable>(context);
    }
    public void reduce(Text key, Iterable<IntWritable> values, Context context)
            throws IOException, InterruptedException {
        int sum = 0;
        for (IntWritable val : values) {
            sum += val.get();
        }
        result.set(sum);
        //context.write(key, result);
        mos.write("text", key,result);
    }
    public void cleanup(Context context)  {
         try {
            mos.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         }
} 
```

发现reducer的输出重命名为text-r-00000

但这里的问题是我也得到了一个空的 part-r-00000 文件。这是 MultipleOutputs 的预期行为方式，还是我的代码有问题？请指教。

我尝试过的另一种选择是使用 FileSystem 类遍历我的输出文件夹并手动重命名所有以 part 开头的文件。

什么是最好的方法？

```
FileSystem hdfs = FileSystem.get(configuration);
FileStatus fs[] = hdfs.listStatus(new Path(outputPath));
for (FileStatus aFile : fs) {
if (aFile.isDir()) {
hdfs.delete(aFile.getPath(), true);
// delete all directories and sub-directories (if any) in the output directory
} 
else {
if (aFile.getPath().getName().contains("_"))
hdfs.delete(aFile.getPath(), true);
// delete all log files and the _SUCCESS file in the output directory
else {
hdfs.rename(aFile.getPath(), new Path(myCustomName));
}
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T04:39:07.013

即使您正在使用`MultipleOutputs`，默认值`OutputFormat`（我相信是`TextOutputFormat`）仍在使用中，因此它将初始化并创建`part-r-xxxxx`您所看到的这些文件。

它们为空的事实是因为您没有做任何事情`context.write`，因为您正在使用`MultipleOutputs`. 但这并不妨碍它们在初始化期间被创建。

要摆脱它们，您需要定义您`OutputFormat`说您不期望任何输出。你可以这样做：

```
job.setOutputFormat(NullOutputFormat.class); 
```

使用该属性集，这应该确保您的零件文件根本不会被初始化，但您仍然可以在`MultipleOutputs`.

您也可以使用`LazyOutputFormat`which 来确保您的输出文件仅在/如果有一些数据时创建，而不是初始化空文件。你可以这样做：

```
import org.apache.hadoop.mapreduce.lib.output.LazyOutputFormat; 
LazyOutputFormat.setOutputFormatClass(job, TextOutputFormat.class); 
```

请注意，您`Reducer`在原型中使用`MultipleOutputs.write(String namedOutput, K key, V value)`，它只使用将根据您生成的默认输出路径，`namedOutput`例如：`{namedOutput}-(m|r)-{part-number}`. 如果你想更好地控制你的输出文件名，你应该使用原型`MultipleOutputs.write(String namedOutput, K key, V value, String baseOutputPath)`，它可以让你在运行时根据你的键/值生成文件名。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-03T12:08:55.257

这就是您在 Driver 类中更改输出文件的基本名称所需要做的所有事情： `job.getConfiguration().set("mapreduce.output.basename", "text");` 因此这将导致您的文件被称为“text-r-00000”。

# javascript - 将 html 输入框中的字符串限制为仅状态缩写

> ID：14555314
> 
> 赞同：0
> 
> 时间：2013-01-28T04:12:13.317
> 
> 标签：javascript, html, css, forms, input

**你好！**

我正在编写一个新的 HTML 表单，它将收集更多项目的状态缩写（即“ks”）。现在我有 -input 字段限制，所以它只允许 2 个字符。这并不能阻止访问者在“SS”之类的字段中随机输入一些内容。

我想要一个代码，允许我将可以在该字段中放置的内容限制为仅美国的官方州缩写。

到目前为止，我在我的网站中使用 HTML、CSS 和 Javascript。感谢您的所有帮助和想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:23:35.433

**更新。**添加了所有状态、大写处理和 jsfiddle 链接。

这是一个纯 javascript 实现，应该让您了解需要做什么：

```
<script>
    function validateState(el) {
    //put all states in this array. 
    var states =    ["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE",
"FL","GA","GU","HI","IA",
"ID","IL","IN","KS","KY","LA","MA","MD","ME","MH","MI","MN","MO","MS","MT",
"NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","PW","RI",
"SC","SD","TN","TX","UT","VA","VI","VT","WA","WI","WV","WY"];
    for(var i=0;i< states.length;i++) {
      if(el.value.toUpperCase() == states[i]) {
        return true;
      }
    }
    //clear element if it doesn't match a state
    el.value = ""; //you could maybe do something else here.
    return false;
}
</script>
<input class="up" type="text" maxlength="2" onchange="validateState(this);"/> 
```

在这里看到它的工作：http: [//jsfiddle.net/k7QQs/](http://jsfiddle.net/k7QQs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:16:39.820

您可以使用`<select>`html 元素。

```
<select>
  <option value="MA">MA<option>
  ....
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T04:15:54.723

我认为[这](http://www.bitconsultants.net/2008/jquery-u-s-states-autocomplete/)会有所帮助。

它有：

```
mustMatch:true, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T04:33:20.240

您可以在没有脚本的情况下执行此操作：

```
<select name="state">
<option value="" selected>Please Select</option>
<option value="AK">Alaska</option>
<option value="AL">Alabama</option>
<option value="AR">Arkansas</option>
<option value="AS">American Samoa</option>
<option value="AZ">Arizona</option>
<option value="CA">California</option>
<option value="CO">Colorada</option>
<option value="CT">Conneticut</option>
<option value="DC">District of Colombia</option>
<option value="DE">Delaware</option>
<option value="FL">Florida</option>
<option value="FM">Federated States</option>
<option value="GA">Georgia</option>
<option value="GU">Guam</option>
<option value="HI">Hawaii</option>
<option value="IA">Iowa</option>
<option value="ID">Idaho</option>
<option value="IL">Illinois</option>
<option value="IN">Indiana</option>
<option value="KS">Kansas</option>
<option value="KY">Kentucky</option>
<option value="LA">Louisiana</option>
<option value="MA">Massachusetts</option>
<option value="MD">Maryland</option>
<option value="ME">Maine</option>
<option value="MI">Michigan</option>
<option value="MN">Minnesota</option>
<option value="MO">Missouri</option>
<option value="MS">Mississippi</option>
<option value="MT">Montana</option>
<option value="NC">North Carolina</option>
<option value="ND">North Dakota</option>
<option value="NE">Nebraska</option>
<option value="NH">New Hampshire</option>
<option value="NJ">New Jersey</option>
<option value="NM">New Mexico</option>
<option value="NV">Nevada</option>
<option value="NY">New York</option>
<option value="OH">Ohio</option>
<option value="OK">Oklahoma</option>
<option value="OR">Oregon</option>
<option value="PA">Pennsylvania</option>
<option value="PR">Puerto Rico</option>
<option value="RI">Rhode Island</option>
<option value="SC">South Carolina</option>
<option value="SD">South Dakota</option>
<option value="TN">Tennessee</option>
<option value="TX">Texas</option>
<option value="UT">Utah</option>
<option value="VI">Virgin Islands</option>
<option value="VT">Vermont</option>
<option value="VA">Virginia</option>
<option value="WA">Washington</option>
<option value="WI">Wisconsin</option>
<option value="WV">West Virginia</option>
<option value="WY">Wyoming</option>    
</select> 
```

这种方法对您的用户来说比期望他们知道州缩写更容易。

或者-

```
function validState(state){
    return state.toUpperCase() in{
        AL:1, AK:1, AZ:1,
        AR:1, CA:1, CO:1, CT:1,
        DE:1, DC:1, FL:1, GA:1,
        HI:1, ID:1, IL:1, IN:1, IA:1,
        KS:1, KY:1, LA:1, ME:1, MD:1,
        MA:1, MI:1,
        MN:1, MS:1, MO:1, MT:1, NE:1,
        NV:1, NH:1, NJ:1, NM:1,
        NY:1, NC:1, ND:1,
        OH:1, OK:1, OR:1, PA:1,
        RI:1, SC:1, SD:1, TN:1, TX:1,
        UT:1, VT:1, VA:1, WA:1,
        WV:1, WI:1, WY:1
    }
} 
```

# jquery - jQuery 克隆 tr 在一张桌子上

> ID：14555315
> 
> 赞同：0
> 
> 时间：2013-01-28T04:12:25.773
> 
> 标签：jquery, html

我想克隆我的 tr，它在表中具有类名 cloneme，请帮助我:(

这是我的html代码：

```
<table cellspacing="10" class="tbll" >
<tr>
<td>Choose Sub Heading</td><td><select name="subheading_id" style="min-width:145Px">
            <option value="1" Sub heading Me</option>
            <option value="2" Sub heading Me 2</option>     
    </select></td><td>&nbsp;</td>
</tr>
<tr classs="cloneme">
<td>Choose Job Title</td><td><select name="jobtitles_id" style="min-width:145Px"><?php
            <option value="a" >A</option>   
            <option value="b" >B</option>   
            <option value="c" >C</option>       
                    <option value="none" >None</option> 
    </select></td>
</tr>
<tr>
<td><div class="addjob" >Add another Job Title</div></td>
</tr>
</table> 
```

这是我的 jQuery ：

```
 $(".addjob").click(function(){
        var $clone = $('table.tbll tr.cloneme').clone();
         $('table.tbll').append($clone);    
 }); 
```

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:16:04.963

你有一个错字。这`class="cloneme"`不是`classs="cloneme"`

jQuery 无法找到`tr`您想要克隆的内容。

[http://jsfiddle.net/6r4Q4/1/](http://jsfiddle.net/6r4Q4/1/)

您还有一些无效的 html，但我认为这不会影响它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T04:14:17.920

```
$('table.tbll tr.cloneme').clone().appendTo('table.tbll'); 
```

# vb.net - 如何在 vb.net 中获取两个日期之间的记录？

> ID：14555324
> 
> 赞同：1
> 
> 时间：2013-01-28T04:13:33.077
> 
> 标签：vb.net, ms-access

全部 ...

我需要显示从 DateTimePickers 传入的两个日期之间的记录。

我得到的记录不在我从 vb.net 指定的日期之间。

请通过下面显示的代码....

以下是代码：

```
Private Sub btn_Show_Inquiry_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn_Show_Inquiry.Click
    report_viewer_form.Report_viewer_CrystalReportViewer1.ReportSource = Nothing
    report_viewer_form.Report_viewer_CrystalReportViewer1.Refresh()
    str1 = "SELECT * FROM Inquiry_Details WHERE Inquiry_Date>=#" & dtp_inq_from.Text & "# AND Inquiry_Date<=#" & dtp_inq_to.Text & "#"

    If dtp_inq_from.Text > dtp_inq_to.Text Then
        MessageBox.Show("FROM_DATE Must Be Less Then TO_DATE.", MessageBoxButtons.OK, MessageBoxIcon.Warning)
        Exit Sub
    End If
    If cn.State <> ConnectionState.Open Then
        cn.Open()
    End If
    da = New OleDbDataAdapter(str1, cn)

    report_dataset = New DataSet
    da.Fill(report_dataset, "table2")
    If MsgBox("Do You Want to Print Report ?", MsgBoxStyle.YesNo) = MsgBoxResult.Yes Then
        report_viewer_form.Show()
        Dim cr As New ReportDocument
        cr = New Inquiry_CrystalReport
        cr.SetDataSource(report_dataset.Tables("table2"))
        report_viewer_form.Report_viewer_CrystalReportViewer1.ReportSource = cr
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:38:12.023

您的问题似乎在于您解析传递给查询的日期参数的方式，并且它们可能不是 Access 将识别为有效日期类型的格式。尝试使用**`CDate()`**函数让 Access 将您的输入值正确解析为其内部日期类型。它将接受任何有效的`date expression`：

> 任何可以解释为日期的表达式，包括日期文字、看起来像日期的数字、看起来像日期的字符串以及从函数返回的日期。日期表达式仅限于可以表示从 100 年 1 月 1 日到 9999 年 12 月 31 日的日期的任意组合的数字或字符串。

因此，您的代码可能如下所示：

```
str1 = "SELECT * FROM Inquiry_Details WHERE Inquiry_Date>=CDate('" & 
       dtp_inq_from.Text & "') AND Inquiry_Date<=CDate('" & 
       dtp_inq_to.Text & "')" 
```

您可能想尝试的另一个功能（如果`CDate`不会削减它）是**`DateValue()`**：

> 所需的日期参数通常是一个字符串表达式，表示从 100 年 1 月 1 日到 9999 年 12 月 31 日的日期。但是，日期也可以是可以表示该范围内的日期、时间或日期和时间的任何表达式.

这两个函数的成功可能还取决于输入日期格式和系统区域设置。

# iphone - 使用标签以编程方式创建后在 iOS 中移动多个图像

> ID：14555325
> 
> 赞同：0
> 
> 时间：2013-01-28T04:13:41.450
> 
> 标签：iphone, ios, objective-c, uiimageview

我正在尝试以编程方式创建多个图像，然后能够在视图中移动它们中的任何一个。我单击一个按钮，然后我可以移动该图像。我再次单击该按钮，我可以移动该图像，但不能再移动创建的第一张图像。我试图使用标签。

标题。

```
UIImageView *imageView;    
NSUInteger i; 
```

和

```
@property (nonatomic, retain) UIImageView *imageView; 
```

执行

```
@synthesize imageView;

-(IBAction)printTheImage:(id)sender{
    UIImageView *theImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"animage.png"]];
    self.imageView = theImage;
    self.imageView.userInteractionEnabled = YES;
    self.imageView.frame = CGRectMake(500, 500, 200, 200);
    imageView.tag = i;
    [self.view addSubview:self.imageView];
    i++;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches]anyObject];
    CGPoint location = [touch locationInView:self.view];
    if ([touch view]==self.imageView) 
        {
        if (ImageView.tag == 1){           
           self.imageView.center = location;
        }
        if (imageView.tag == 2){
           self.imageView.center = location;
        }
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{ 
    [self touchesBegan:touches withEvent:event];
}

- (void)viewDidLoad{
    i = 1;
    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:47:55.600

这是我从你的代码中得出的

```
//header
NSUInteger imageCount;
@property (nonatomic, retain) UIImageView *selectedImageView;

//implementation

@synthesize selectedImageView;

-(IBAction)printTheImage:(id)sender {
    UIImageView *imageView = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"animage"]];
    [imageView sizeToFit];
    imageView.frame = CGRectMake(500, 500, 200, 200);
    imageView.userInteractionEnabled = YES;
    imageView.tag = imageCount;
    [self.view addSubview: imageView];
    [imageView release];

    imageCount++;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];

    //iterate trough all images
    for (int i = 0; i < imageCount; i++) {
        //get image from tag
        UIImageView *imageView = (UIImageView *)[self.view viewWithTag: i];
        //check which image was tapped
        if (CGRectContainsPoint(imageView.frame, [touch locationInView:self.view])) {
            NSLog(@"Image #%i was tapped",i);
            self.selectedImageView = imageView;
            //don't waste processor time for checking all other images, get the first and break the loop
            break;
    }
} 
```

这是移动图像的原因：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [[event allTouches] anyObject];

    //move the tapped image
    self.selectedImageView.center = [touch locationInView:self.view];
} 
```

请记住在触摸结束和触摸取消阶段重置图像计数器并将 selectedImageView 设置为 nil

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:03:22.840

试试这个。

```
@property (nonatomic, copy) NSMutableArray *imageViews;

@synthesize imageView;

-(IBAction)printTheImage:(id)sender{
    UIImageView *theImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"animage.png"]];

    [self.imageViews adObject:theImage];

    theImage.userInteractionEnabled = YES;
    theImage.frame = CGRectMake(500, 500, 200, 200);
    imageView.tag = [imageViews indexOfObject:theImage];
    [self.view addSubview:theImage];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches]anyObject];
    CGPoint location = [touch locationInView:self.view];
    NSInteger viewIndex = [self.imageViews indexOfObject:[touch view]];
    if (viewIndex != NSNotFound) 

        UIView *theImage = self.imageViews[viewIndex];
        theImage.center = location;

    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{ 
    [self touchesBegan:touches withEvent:event];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:15:17.317

这种方法适用于手势识别器

```
 @interface ViewController : UIViewController {
        int tags;
    }

    - (IBAction)create:(id)sender;

    @end

        @implementation ViewController

        - (void)viewDidLoad
        {
            [super viewDidLoad];

            //Tag to start
            tags = 1;
        }

        - (IBAction)create:(id)sender
        {
            UIImageView *temp = [[UIImageView alloc] initWithFrame:CGRectMake(0, 100, 200, 200)];
            temp.image = [UIImage imageNamed:@"yourimage.jpg"];
            temp.userInteractionEnabled = YES;
            temp.tag = tags;

            UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                                  action:@selector(handlePan:)];

            UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
            tap.numberOfTapsRequired = 1;

            [temp addGestureRecognizer:pan];
            [temp addGestureRecognizer:tap];
            [self.view addSubview:temp];

            tags++;
        }

        //This is just to check if the tags are working
        -(void)handleTap:(UITapGestureRecognizer *)recognizer
        {
            UIView *piece = recognizer.view;
            int index = piece.tag;
            NSString *msg = [NSString stringWithFormat:@"Tag:%i", index];

            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Test"
                                                            message:msg
                                                           delegate:self
                                                  cancelButtonTitle:@"ok"
                                                  otherButtonTitles:nil, nil];
            [alert show];
        }

        //Drag action
        -(void)handlePan:(UIPanGestureRecognizer *)recognizer
        {
            UIView *piece = recognizer.view;

            if ([recognizer state] == UIGestureRecognizerStateBegan || [recognizer state] == UIGestureRecognizerStateChanged)
            {
                CGPoint translation = [recognizer translationInView:[piece superview]];
                [piece setCenter:CGPointMake([piece center].x + translation.x, [piece center].y + translation.y)];
                [recognizer setTranslation:CGPointZero inView:[piece superview]];
                [self.view bringSubviewToFront:piece];
            }
        }

@end 
```

已经测试和工作

祝你好运

# android - Android SQlite 不更新数据

> ID：14555332
> 
> 赞同：2
> 
> 时间：2013-01-28T04:14:34.443
> 
> 标签：android, android-sqlite

我的 DatabaseHandler 类：

```
public class DatabaseHandler extends SQLiteOpenHelper {

    private static final String LOG_TAG = "debugger";

    //database version
    private static final int DATABASE_VERSION = 1;
    //database name;
    private static final String DATABASE_NAME = "appdb";

    private static final String TABLE_PROJECT = "projects";     
    //Project Table Columns
    private static String PROJECT_ID = "Project_id";
    private static final String PROJECT_NAME = "Name";
    private static final String PROJECT_DESCRIPTION = "Description";
    private static final String CLIENT_NAME = "Client_Name";
    private static final String LOCATION = "Location";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.d(LOG_TAG, "Executing OnCreate");   
        createProjectTable(db);     
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {      

    }

    private void createProjectTable(SQLiteDatabase db){
        String CREATE_PROJECT_TABLE = "CREATE TABLE " + TABLE_PROJECT + "("
        + PROJECT_ID + " INTEGER PRIMARY KEY, "
        + PROJECT_NAME + " TEXT, "
        + PROJECT_DESCRIPTION + " TEXT, "
        + CLIENT_NAME + " TEXT, "
        + LOCATION + " TEXT );";
        Log.d(LOG_TAG, "Creating Project table --> " + CREATE_PROJECT_TABLE);
        db.execSQL(CREATE_PROJECT_TABLE);
    }   

    public void addProject(Project project){
         SQLiteDatabase db = this.getWritableDatabase();
         ContentValues values = new ContentValues();
         values.put(PROJECT_NAME, project.getName()); // Contact Name
         values.put(PROJECT_DESCRIPTION, project.getDescription()); // Contact Phone
         values.put(CLIENT_NAME, project.getClient_name());
         values.put(LOCATION, project.getLocation());
         // Inserting Row
         Log.d(LOG_TAG, "Inserting Project....");
         db.insert(TABLE_PROJECT, null, values);
         Log.d(LOG_TAG, "Inserted successfullyt....");
         db.close(); // Closing database connection
    }

    public List<Project> getProjects(){
        List<Project> projects = new ArrayList<Project>();
        String selectQuery = "SELECT  * FROM " + TABLE_PROJECT;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        if(cursor.getCount() != 0){
            Log.d(LOG_TAG, "Projects found...");
          if (cursor.moveToFirst()) {
            do {
                Project project = new Project();
                project.setName(cursor.getString(1));
                project.setClient_name(cursor.getString(2));
                project.setDescription(cursor.getString(3));
                project.setLocation(cursor.getString(4));
                projects.add(project);
            } while (cursor.moveToNext());
          }
        }
      return projects;
    }

    public void updateProject(Project project){
         SQLiteDatabase db = this.getWritableDatabase();
         ContentValues values = new ContentValues();
         values.put(PROJECT_NAME, project.getName()); // Contact Name
         values.put(PROJECT_DESCRIPTION, project.getDescription()); // Contact Phone
         values.put(CLIENT_NAME, project.getClient_name());
         values.put(LOCATION, project.getLocation());
         String where = PROJECT_ID + " = ? ";       
         String [] value = { String.valueOf(project.getProject_id()) };
         try{
             int count = db.update(TABLE_PROJECT, values, where , value);
             Log.d(LOG_TAG, "Updated rows -> " + count);
         }catch (Exception e) {
            e.printStackTrace();
        }
        db.close();
    }
} 
```

在我的活动中

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(...);
dbHelper = new DatabaseHandler(this);
} 
```

当用户单击更新按钮时，我调用更新方法

```
dbHelper.updateProject(newProject); 
```

在我的`updateProject`方法中`dbHelper`，count 的值为 0。

`dbHelper.getProjects()`即使在更新方法之后调用此方法，也会返回旧值。

我已经使用调试器检查了新值是否已传递给该`updateProject`方法，但它们没有得到反映。该方法`addProject`工作正常。

项目类

```
public class Project implements Serializable{

    private static final long serialVersionUID = 1L;
    private int project_id;
    private String name;
    private String description;
    private String client_name;
    private String location;

    public Project(){

    }

    public Project(int project_id, String name, String client_name,String description, String location){
        this.project_id = project_id;
        this.name = name;
        this.description = description;
        this.client_name = client_name;
        this.location = location;
    }

    public int getProject_id() {
        return project_id;
    }

    public void setProject_id(int project_id) {
        this.project_id = project_id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getClient_name() {
        return client_name;
    }

    public void setClient_name(String client_name) {
        this.client_name = client_name;
    }

    public String getLocation() {
        return location;
    }

    public void setLocation(String location) {
        this.location = location;
    }

} 
```

请任何人帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:20:05.577

尝试这个...

```
 String [] value = { Integer.toString(project.getProject_id()) }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:43:16.173

用这个 -

```
String[] value = new String []{ String.valueOf(project.getProject_id()) }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T04:49:27.603

项目 id 是 int 数据类型，所以你应该使用

```
 int value = project.getProject_id(); 
```

# java - GAE Datastore API 替换

> ID：14555340
> 
> 赞同：0
> 
> 时间：2013-01-28T04:15:37.887
> 
> 标签：java, google-app-engine, mongodb

我试图找到一个类似的解决方案：

[AppEngine Datastore API](https://github.com/mdirolf/mongo-appengine-connector) (Python)的直接替代品

但是这个 API 似乎已经过时了，是否有任何努力使用 MongoDB 作为 Java 的后端来做 Datastore API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:03:18.213

应用规模

[http://appscale.cs.ucsb.edu/](http://appscale.cs.ucsb.edu/)

商业版本据说即将推出：

[http://appscale.com/](http://appscale.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:07:26.197

无需寻找替代品，使用**JBoss CapeDwarf** ，Appengine平台不再有供应商锁定：

看：

[http://www.jboss.org/capedwarf](http://www.jboss.org/capedwarf)

# exception - 如何将函数的返回类型传递给 OCaml 中的异常？

> ID：14555342
> 
> 赞同：0
> 
> 时间：2013-01-28T04:15:54.327
> 
> 标签：exception, ocaml, return-type

我在 OCaml 中有函数“my_a”，它可能有一个非常复杂的返回类型：

```
exception Backtrack
exception Continue of (* How do I put the type of function 'my_a' here? *)

let my_a arg = try do_stuff (List.hd arg) 
               with 
               | Backtrack -> my_a (List.tl arg)
               | Continue (found_answer) ->  (try my_a (List.tl arg)
                                              with 
                                     | Backtrack -> raise Continue(found_answer)
                                     | Continue (other_answer) -> 
                       raise Continue (compare_answer(found_answer,other_answer));;
(* the caller of my_a will handle the Continue exception to catch the found value
if something was found*) 
```

这是我的问题：我正在使用回溯来寻找解决方案。当 do_stuff 引发回溯异常时，没有解决方案走这条路。但是，当它引发 Continue 类型的异常时，这意味着它找到了解决方案，但是，它可能不是最好的解决方案，那就是当我用不同的路径再次尝试时。如果还有其他异常，我想返回它已经找到的答案。

问题是，为了能够使用 OCaml 的该功能，我需要告诉它 Continue 将携带什么数据类型。当我定义 my_a 时，OCaml 顶层返回的内容：

```
 'a * ('a -> ('a, 'b) symbol list list) ->
  'b list -> ('a * ('a, 'b) symbol list) list * 'b list = <fun> 
```

有没有人知道如何做到这一点，或者对此有不同的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:57:21.970

很难确切地说出你在问什么。我想您可能会问如何将`Two`异常中的类型设置为 A 的返回类型，而无需专门声明此类型。我想不出任何办法。

如果您使用选项类型而不是异常，事情可能会变得更好。或者您可以明确声明 A 的返回类型。这可能是很好的文档。

一些旁注：(a) 函数名称必须以小写字母开头 (b) 这段代码看起来非常复杂且难以理解。可能有一种更简单的方法来构建您的计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:37:42.790

通过使用异常，您一无所获。这是一个可能的解决方案。

```
(** There are many ways to implement backtracking in Ocaml. We show here one
    possibility. We search for an optimal solution in a search space. The
    search space is given by an [initial] state and a function [search] which
    takes a state and returns either

    - a solution [x] together with a number [a] describing how good [x] is
      (larger [a] means better solution), or

    - a list of states that need still to be searched.

    An example of such a problem: given a number [n], express it as a sum
    [n1 + n2 + ... + nk = n] such that the product [n1 * n2 * ... * nk] is
    as large as possible. Additionally require that [n1 <= n2 <= ... <= nk].
    The state of the search can be expressed as pair [(lst, s, m)] where
    [lst] is the list of numbers in the sum, [s] is the sum of numbers in [lst],
    and [m] is the next number we will try to add to the list. If [s = n] then
    [lst] is a solution. Otherwise, if [s + m <= n] then we branch into two states:

    - either we add [m] to the list, so the next state is [(m :: lst, m+s, m)], or
    - we do not add [m] to the list, and the next state is [(lst, s, m+1)].

    The return type of [search] is described by the following datatype:
*)

type ('a, 'b, 'c) backtrack =
  | Solution of ('a * 'b)
  | Branches of 'c list

(** The main function accepts an initial state and the search function. *)
let backtrack initial search =
  (* Auxiliary function to compare two optional solutions, and return the better one. *)
  let cmp x y =
    match x, y with
      | None, None -> None (* no solution *)
      | None, Some _ -> y  (* any solution is better than none *)
      | Some _, None -> x  (* any solution is better than none *)
      | Some (_, a), Some (_, b) ->
        if a < b then y else x
  in
  (* Auxiliary function which actually performs the search, note that it is tail-recursive.
     The argument [best] is the best (optional) solution found so far, [branches] is the
     list of branch points that still needs to be processed. *)
  let rec backtrack best branches =
    match branches with
      | [] -> best (* no more branches, return the best solution found *)
      | b :: bs ->
        (match search b with
          | Solution x ->
            let best = cmp best (Some x) in
              backtrack best bs
          | Branches lst ->
            backtrack best (lst @ bs))
  in
    (* initiate the search with no solution in the initial state *)
    match backtrack None [initial] with
      | None -> None (* nothing was found *)
      | Some (x, _) -> Some x (* the best solution found *)

(** Here is the above example encoded. *)
let sum n =
  let search (lst, s, m) =
    if s = n then
      (* solution found, compute the product of [lst] *)
      let p = List.fold_left ( * ) 1 lst in
        Solution (lst, p)
    else
      if s + m <= n then
        (* split into two states, one that adds [m] to the list and another
           that increases [m] *)
        Branches [(m::lst, m+s, m); (lst, s, m+1)]
      else
        (* [m] is too big, no way to proceed, return empty list of branches *)           
        Branches []
  in
    backtrack ([], 0, 1) search
;;

(** How to write 10 as a sum of numbers so that their product is as large as possible? *)
sum 10 ;; (* returns Some [3; 3; 2; 2] *) 
```

OCaml 高兴地告诉我们，类型`backtrack`是

```
'a -> ('a -> ('b, 'c, 'a) backtrack) -> 'b option 
```

这是有道理的：

*   第一个参数是初始状态，它具有某种类型`'a`
*   第二个参数是搜索函数，它接受 type 的状态`'a`并返回`Solution (x,a)`where `x`has type`'b`和`a`has type `'c`，或者`Branches lst`where `lst`has type `'a list`。

# javascript - Safari 的 html5 localStorage 错误：“QUOTA_EXCEEDED_ERR：DOM 异常 22：尝试向存储中添加超出配额的内容。”

> ID：14555347
> 
> 赞同：134
> 
> 时间：2013-01-28T04:16:30.800
> 
> 标签：javascript, html, local-storage

我的 webapp 在 ios safari 隐私浏览中有 javascript 错误：

> JavaScript：错误
> 
> 不明确的
> 
> QUOTA_EXCEEDED_ERR：DOM 异常 22：试图向存储中添加某些内容...

我的代码：

```
localStorage.setItem('test',1) 
```

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2013-01-28T04:18:41.113

显然这是设计使然。当 Safari（OS X 或 iOS）处于隐私浏览模式时，它看起来好像`localStorage`可用，但尝试调用`setItem`会引发异常。

```
store.js line 73
"QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made to add something to storage that exceeded the quota." 
```

发生的情况是 window 对象仍然暴露`localStorage`在全局命名空间中，但是当您调用 时`setItem`，会抛出此异常。任何调用都将`removeItem`被忽略。

我相信最简单的解决方法（虽然我还没有测试过这个跨浏览器）是改变函数`isLocalStorageNameSupported()`来测试你也可以设置一些值。

[https://github.com/marcuswestin/store.js/issues/42](https://github.com/marcuswestin/store.js/issues/42)

```
function isLocalStorageNameSupported() 
{
    var testKey = 'test', storage = window.sessionStorage;
    try 
    {
        storage.setItem(testKey, '1');
        storage.removeItem(testKey);
        return localStorageName in win && win[localStorageName];
    } 
    catch (error) 
    {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-07-11T22:40:04.957

上面链接上发布的修复对我不起作用。这做到了：

```
function isLocalStorageNameSupported() {
  var testKey = 'test', storage = window.localStorage;
  try {
    storage.setItem(testKey, '1');
    storage.removeItem(testKey);
    return true;
  } catch (error) {
    return false;
  }
} 
```

源自[http://m.cg/post/13095478393/detect-private-browsing-mode-in-mobile-safari-on-ios5](http://m.cg/post/13095478393/detect-private-browsing-mode-in-mobile-safari-on-ios5)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-11-22T19:17:30.303

`localStorage.setItem`正如其他答案中提到的那样，在调用(or `sessionStorage.setItem`)时，您总是会在 iOS 和 OS X 上的 Safari Private Browser Mode 中获得 QuotaExceededError 。

一种解决方案是在使用的每个实例中进行try/catch 或[Modernizr 检查](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/storage/localstorage.js)`setItem`。

但是，如果您想要一个简单地全局阻止此错误抛出的 shim，以防止 JavaScript 的其余部分中断，您可以使用以下命令：

[https://gist.github.com/philfreo/68ea3cd980d72383c951](https://gist.github.com/philfreo/68ea3cd980d72383c951)

```
// Safari, in Private Browsing Mode, looks like it supports localStorage but all calls to setItem
// throw QuotaExceededError. We're going to detect this and just silently drop any calls to setItem
// to avoid the entire page breaking, without having to do a check at each usage of Storage.
if (typeof localStorage === 'object') {
    try {
        localStorage.setItem('localStorage', 1);
        localStorage.removeItem('localStorage');
    } catch (e) {
        Storage.prototype._setItem = Storage.prototype.setItem;
        Storage.prototype.setItem = function() {};
        alert('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.');
    }
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-07-16T15:42:16.537

在我的上下文中，刚刚开发了一个类抽象。**当我的应用程序启动时，我通过调用getStorage()**检查 localStorage 是否正常工作。此函数还返回：

*   如果 localStorage 正在工作，则为 localStorage
*   或自定义类**LocalStorageAlternative的实现**

在我的代码中，我从不直接调用 localStorage。我调用**cusSto**全局变量，我通过调用**getStorage()**进行了初始化。

这样，它适用于私人浏览或特定的 Safari 版本

```
function getStorage() {

    var storageImpl;

     try { 
        localStorage.setItem("storage", ""); 
        localStorage.removeItem("storage");
        storageImpl = localStorage;
     }
     catch (err) { 
         storageImpl = new LocalStorageAlternative();
     }

    return storageImpl;

}

function LocalStorageAlternative() {

    var structureLocalStorage = {};

    this.setItem = function (key, value) {
        structureLocalStorage[key] = value;
    }

    this.getItem = function (key) {
        if(typeof structureLocalStorage[key] != 'undefined' ) {
            return structureLocalStorage[key];
        }
        else {
            return null;
        }
    }

    this.removeItem = function (key) {
        structureLocalStorage[key] = undefined;
    }
}

cusSto = getStorage(); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-07-31T14:49:58.703

Safari 11 似乎改变了这种行为，现在本地存储在私人浏览器窗口中工作。万岁！

我们曾经在 Safari 隐私浏览中失败的 Web 应用程序现在可以完美运行。它在 Chrome 的隐私浏览模式下始终运行良好，该模式始终允许写入本地存储。

这在 2017 年 5 月发布的第 29版Apple 的[Safari 技术预览版发行说明](https://developer.apple.com/safari/technology-preview/release-notes/)和[WebKit 发行说明中有记录。](https://webkit.org/blog/7532/release-notes-for-safari-technology-preview-29/)

具体来说：

*   修复了在隐私浏览模式或 WebDriver 会话中保存到 localStorage 时出现的 QuotaExceededError - [r215315](https://trac.webkit.org/changeset/215315/webkit)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-25T09:33:05.343

为了扩展其他人的答案，这是一个不公开/添加任何新变量的紧凑解决方案。它并不涵盖所有基础，但它应该适合大多数只希望单页应用程序保持功能的人（尽管重新加载后没有数据持久性）。

```
(function(){
    try {
        localStorage.setItem('_storage_test', 'test');
        localStorage.removeItem('_storage_test');
    } catch (exc){
        var tmp_storage = {};
        var p = '__unique__';  // Prefix all keys to avoid matching built-ins
        Storage.prototype.setItem = function(k, v){
            tmp_storage[p + k] = v;
        };
        Storage.prototype.getItem = function(k){
            return tmp_storage[p + k] === undefined ? null : tmp_storage[p + k];
        };
        Storage.prototype.removeItem = function(k){
            delete tmp_storage[p + k];
        };
        Storage.prototype.clear = function(){
            tmp_storage = {};
        };
    }
})(); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-26T18:51:34.093

我在使用 Ionic 框架（Angular + Cordova）时遇到了同样的问题。我知道这不能解决问题，但它是基于上述答案的 Angular Apps 代码。您将在 iOS 版本的 Safari 上为 localStorage 提供一个临时解决方案。

这是代码：

```
angular.module('myApp.factories', [])
.factory('$fakeStorage', [
    function(){
        function FakeStorage() {};
        FakeStorage.prototype.setItem = function (key, value) {
            this[key] = value;
        };
        FakeStorage.prototype.getItem = function (key) {
            return typeof this[key] == 'undefined' ? null : this[key];
        }
        FakeStorage.prototype.removeItem = function (key) {
            this[key] = undefined;
        };
        FakeStorage.prototype.clear = function(){
            for (var key in this) {
                if( this.hasOwnProperty(key) )
                {
                    this.removeItem(key);
                }
            }
        };
        FakeStorage.prototype.key = function(index){
            return Object.keys(this)[index];
        };
        return new FakeStorage();
    }
])
.factory('$localstorage', [
    '$window', '$fakeStorage',
    function($window, $fakeStorage) {
        function isStorageSupported(storageName) 
        {
            var testKey = 'test',
                storage = $window[storageName];
            try
            {
                storage.setItem(testKey, '1');
                storage.removeItem(testKey);
                return true;
            } 
            catch (error) 
            {
                return false;
            }
        }
        var storage = isStorageSupported('localStorage') ? $window.localStorage : $fakeStorage;
        return {
            set: function(key, value) {
                storage.setItem(key, value);
            },
            get: function(key, defaultValue) {
                return storage.getItem(key) || defaultValue;
            },
            setObject: function(key, value) {
                storage.setItem(key, JSON.stringify(value));
            },
            getObject: function(key) {
                return JSON.parse(storage.getItem(key) || '{}');
            },
            remove: function(key){
                storage.removeItem(key);
            },
            clear: function() {
                storage.clear();
            },
            key: function(index){
                storage.key(index);
            }
        }
    }
]); 
```

来源：[https ://gist.github.com/jorgecasar/61fda6590dc2bb17e871](https://gist.github.com/jorgecasar/61fda6590dc2bb17e871)

享受你的编码！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-20T16:43:48.253

这是一个使用[IIFE并利用](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)[服务是单例](https://docs.angularjs.org/guide/services)的事实的 AngularJS 解决方案。

这导致在`isLocalStorageAvailable`首次注入服务时立即设置，并避免每次需要访问本地存储时不必要地运行检查。

```
angular.module('app.auth.services', []).service('Session', ['$log', '$window',
  function Session($log, $window) {
    var isLocalStorageAvailable = (function() {
      try {
        $window.localStorage.world = 'hello';
        delete $window.localStorage.world;
        return true;
      } catch (ex) {
        return false;
      }
    })();

    this.store = function(key, value) {
      if (isLocalStorageAvailable) {
        $window.localStorage[key] = value;
      } else {
        $log.warn('Local Storage is not available');
      }
    };
  }
]); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-07-25T08:59:13.547

在几种情况下，公认的答案似乎不够充分。

要检查`localStorage`or`sessionStorage`是否受支持，我使用[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API)中的以下代码段。

```
function storageAvailable(type) {
    var storage;
    try {
        storage = window[type];
        var x = '__storage_test__';
        storage.setItem(x, x);
        storage.removeItem(x);
        return true;
    }
    catch(e) {
        return e instanceof DOMException && (
            // everything except Firefox
            e.code === 22 ||
            // Firefox
            e.code === 1014 ||
            // test name field too, because code might not be present
            // everything except Firefox
            e.name === 'QuotaExceededError' ||
            // Firefox
            e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&
            // acknowledge QuotaExceededError only if there's something already stored
            (storage && storage.length !== 0);
    }
} 
```

像这样使用这个片段，然后回退到，例如，使用 cookie：

```
if (storageAvailable('localStorage')) {
  // Yippee! We can use localStorage awesomeness
}
else {
  // Too bad, no localStorage for us
  document.cookie = key + "=" + encodeURIComponent(value) + expires + "; path=/";
} 
```

我制作了[fallbackstorage](https://www.npmjs.com/package/fallbackstorage)包，它使用这个片段来检查存储可用性并回退到手动实现的 MemoryStorage。

```
import {getSafeStorage} from 'fallbackstorage'

getSafeStorage().setItem('test', '1') // always work 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-14T07:20:05.697

我刚刚创建了这个[repo](https://github.com/Acanguven/StorageService)来为不受支持或禁用的浏览器提供`sessionStorage`和功能。`localStorage`

**支持的浏览器**

*   IE5+
*   Chrome所有版本
*   Mozilla 所有版本
*   Yandex 所有版本

**这个怎么运作**

它检测具有存储类型的特征。

```
function(type) {
    var testKey = '__isSupported',
        storage = window[type];
    try {
        storage.setItem(testKey, '1');
        storage.removeItem(testKey);
        return true;
    } catch (error) {
        return false;
    }
}; 
```

设置`StorageService.localStorage`为`window.localStorage`是否支持或创建 cookie 存储。设置`StorageService.sessionStorage`为`window.sessionStorage`是否支持或为 SPA 创建内存存储，为非 SPA 创建具有会话功能的 cookie 存储。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-03-28T20:37:31.607

这是用于内存存储替代方案的 Angular2+ 服务版本，您可以根据 Pierre Le Roux 的回答将其注入您的组件。

```
import { Injectable } from '@angular/core';

// Alternative to localstorage, memory
// storage for certain browsers in private mode
export class LocalStorageAlternative {
    private  structureLocalStorage = {};

    setItem(key: string, value: string): void {
        this.structureLocalStorage[key] = value;
    }

    getItem(key: string): string {
        if (typeof this.structureLocalStorage[key] !== 'undefined' ) {
            return this.structureLocalStorage[key];
        }
        return null;
    }

    removeItem(key: string): void {
        this.structureLocalStorage[key] = undefined;
    }
}

@Injectable()
export class StorageService {
    private storageEngine;

    constructor() {
        try {
            localStorage.setItem('storage_test', '');
            localStorage.removeItem('storage_test');
            this.storageEngine = localStorage;
        } catch (err) {
            this.storageEngine = new LocalStorageAlternative();
        }
    }

    setItem(key: string, value: string): void {
        this.storageEngine.setItem(key, value);
    }

    getItem(key: string): string {
        return this.storageEngine.getItem(key);
    }

    removeItem(key: string): void {
        this.storageEngine.removeItem(key);
    }

} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-10T18:41:20.470

### 如果不支持，请不要使用它，并检查支持只需调用此函数

> 在 Es6 中共享具有支持检查的完整读写 localStorage 示例

```
const LOCAL_STORAGE_KEY = 'tds_app_localdata';

const isSupported = () => {
  try {
    localStorage.setItem('supported', '1');
    localStorage.removeItem('supported');
    return true;
  } catch (error) {
    return false;
  }
};

const writeToLocalStorage =
  components =>
    (isSupported ?
      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(components))
      : components);

const isEmpty = component => (!component || Object.keys(component).length === 0);

const readFromLocalStorage =
  () => (isSupported ? JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)) || {} : null); 
```

> 这将确保在所有浏览器上正确设置和检索您的密钥。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-17T20:28:06.853

我已经为这个问题创建了一个补丁。我只是在检查浏览器是否支持 localStorage 或 sessionStorage。如果不是，那么存储引擎将是 Cookie。但不利的一面是 Cookie 的存储内存非常小 :(

```
function StorageEngine(engine) {
    this.engine = engine || 'localStorage';

    if(!this.checkStorageApi(this.engine)) {
        // Default engine would be alway cooke
        // Safari private browsing issue with localStorage / sessionStorage
        this.engine = 'cookie';
    }
}

StorageEngine.prototype.checkStorageApi = function(name) {
    if(!window[name]) return false;
    try {
        var tempKey = '__temp_'+Date.now();
        window[name].setItem(tempKey, 'hi')
        window[name].removeItem(tempKey);
        return true;
    } catch(e) {
        return false;
    }
}

StorageEngine.prototype.getItem = function(key) {
    if(['sessionStorage', 'localStorage'].includes(this.engine)) {
        return window[this.engine].getItem(key);
    } else if('cookie') {
        var name = key+"=";
        var allCookie = decodeURIComponent(document.cookie).split(';');
        var cval = [];
        for(var i=0; i < allCookie.length; i++) {
            if (allCookie[i].trim().indexOf(name) == 0) {
                cval = allCookie[i].trim().split("=");
            }   
        }
        return (cval.length > 0) ? cval[1] : null;
    }
    return null;
}

StorageEngine.prototype.setItem = function(key, val, exdays) {
    if(['sessionStorage', 'localStorage'].includes(this.engine)) {
        window[this.engine].setItem(key, val);
    } else if('cookie') {
        var d = new Date();
        var exdays = exdays || 1;
        d.setTime(d.getTime() + (exdays*24*36E5));
        var expires = "expires="+ d.toUTCString();
        document.cookie = key + "=" + val + ";" + expires + ";path=/";
    }
    return true;
}

// ------------------------
var StorageEngine = new StorageEngine(); // new StorageEngine('localStorage');
// If your current browser (IOS safary or any) does not support localStorage/sessionStorage, then the default engine will be "cookie"

StorageEngine.setItem('keyName', 'val')

var expireDay = 1; // for cookie only
StorageEngine.setItem('keyName', 'val', expireDay)
StorageEngine.getItem('keyName') 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2018-10-04T11:26:50.700

```
var mod = 'test';
      try {
        sessionStorage.setItem(mod, mod);
        sessionStorage.removeItem(mod);
        return true;
      } catch (e) {
        return false;
      } 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2016-07-28T12:33:43.690

以下脚本解决了我的问题：

```
// Fake localStorage implementation. 
// Mimics localStorage, including events. 
// It will work just like localStorage, except for the persistant storage part. 

var fakeLocalStorage = function() {
  var fakeLocalStorage = {};
  var storage; 

  // If Storage exists we modify it to write to our fakeLocalStorage object instead. 
  // If Storage does not exist we create an empty object. 
  if (window.Storage && window.localStorage) {
    storage = window.Storage.prototype; 
  } else {
    // We don't bother implementing a fake Storage object
    window.localStorage = {}; 
    storage = window.localStorage; 
  }

  // For older IE
  if (!window.location.origin) {
    window.location.origin = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port: '');
  }

  var dispatchStorageEvent = function(key, newValue) {
    var oldValue = (key == null) ? null : storage.getItem(key); // `==` to match both null and undefined
    var url = location.href.substr(location.origin.length);
    var storageEvent = document.createEvent('StorageEvent'); // For IE, http://stackoverflow.com/a/25514935/1214183

    storageEvent.initStorageEvent('storage', false, false, key, oldValue, newValue, url, null);
    window.dispatchEvent(storageEvent);
  };

  storage.key = function(i) {
    var key = Object.keys(fakeLocalStorage)[i];
    return typeof key === 'string' ? key : null;
  };

  storage.getItem = function(key) {
    return typeof fakeLocalStorage[key] === 'string' ? fakeLocalStorage[key] : null;
  };

  storage.setItem = function(key, value) {
    dispatchStorageEvent(key, value);
    fakeLocalStorage[key] = String(value);
  };

  storage.removeItem = function(key) {
    dispatchStorageEvent(key, null);
    delete fakeLocalStorage[key];
  };

  storage.clear = function() {
    dispatchStorageEvent(null, null);
    fakeLocalStorage = {};
  };
};

// Example of how to use it
if (typeof window.localStorage === 'object') {
  // Safari will throw a fit if we try to use localStorage.setItem in private browsing mode. 
  try {
    localStorage.setItem('localStorageTest', 1);
    localStorage.removeItem('localStorageTest');
  } catch (e) {
    fakeLocalStorage();
  }
} else {
  // Use fake localStorage for any browser that does not support it.
  fakeLocalStorage();
} 
```

它检查 localStorage 是否存在并且可以使用，在否定的情况下，它会创建一个假的本地存储并使用它而不是原始的 localStorage。如果您需要更多信息，请告诉我。

# javascript - chrome的jQuery ajax更新问题

> ID：14555352
> 
> 赞同：0
> 
> 时间：2013-01-28T04:17:12.003
> 
> 标签：javascript, ajax, google-chrome, jquery

我有这段代码

```
<div id="status">content here</div>
 <input name="order_data" type="button"  value="<?php echo $order;?>"  class="besttocart"  onclick="gotocart(this);" /> 
```

和 Javascript

```
function gotocart(e)
{       
   var origtext = $('#status').html();
    if(getCookie('language').toLowerCase() == 'en'){
   $('#status').html('Loading');
    }else{
    $('#status').html('het laden');        
    }

   $.ajax({           
            url: 'index.php?route=foo/bar',
            type: 'post',
            async:false, /*I strongly suspect something here*/
            dataType:"json",
            success:function(data){

               //do stuff
            }
    });

} 
```

当我通过控制台查看时，问题在于 Google chrome`$('#status').html()`正在更改为“正在加载”或“het laden”。但它没有显示在我的页面中，我的状态内容仍然是“这里的内容”。在Firefox中工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:28:36.663

我想问题出在这一行：

getCookie('语言'),

因为当我像这样更改代码时，

```
 var origtext = $('#status').html();

    var str=getCookie('language');

   //changed the code here

    if(str && str!='' && str.toLowerCase() == 'en'){
   $('#status').html('Loading');
    }else{
    $('#status').html('het laden');        
    } 
```

这很好用。

未设置 cookie 时，函数 getCookie 返回空白，但 toLowerCase 未在 Chrome 中解析它。因此错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T04:20:28.850

你试过用

```
document.getElemetnById("status").innerHTML="SOMETHING"; 
```

# android - 是更好的方法吗？关于为 SQLite 实例化对象

> ID：14555353
> 
> 赞同：0
> 
> 时间：2013-01-28T04:17:21.353
> 
> 标签：android, sqlite, object, instantiation

当我为 Android 应用程序创建 SQLite 数据库时，我创建了一个不扩展任何其他类的辅助类。它只是建立数据库，在这个例子中它被称为PlayGame。它里面有一个私有类，如下所示：

```
 private static class DbHelper extends SQLiteOpenHelper 
```

当我在名为 SQLiteExample 的主 UI 类中出于任何原因使用数据库时，我必须每次都像这样创建一个实例，

```
PlayGame entry = new PlayGame(SQLiteExample.this);
            entry.open();
            entry.createEntry(name, hits);
            entry.close(); 
```

我在另一个 Activity 类中创建了这个名为 PlayGame 的数据库类的许多实例。就像在大多数情况下，我的所有方法都必须创建实例来执行所需的功能，例如将信息读入或读出数据库。

所以我在 android 文档的最佳实践中读到，创建实例会占用大量内存，最好避免。如果是这种情况，是否有更好的方法来做到这一点？我的例子看起来像是对内存的错误使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:19:57.897

为您要使用的每个实例使用单例。您将使用相同的对象，而不是创建任何对象的新实例。 [http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

# .htaccess - .htaccess 中的多个条件

> ID：14555356
> 
> 赞同：0
> 
> 时间：2013-01-28T04:17:35.473
> 
> 标签：.htaccess, http, redirect

如果用户客户端不是 BOT，我正在尝试将服务器上的图像重定向到 url。到目前为止，我有：

```
RewriteCond %{HTTP_USER_AGENT} "Windows" [NC]
RewriteCond %{REQUEST_URI} jpg
RewriteRule ^(.*)$ http://www.myurl.com/$1 [R=301,L] 
```

但有些不对劲。可以结合这两个条件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:24:30.593

您的想法令人钦佩，但基于现实世界机器人行为的逻辑存在缺陷。

我一直在处理网站上的安全问题，并且用户代理字符串一直都是伪造的。如果可以选择安装它，我建议使用像[Mod Security](http://www.modsecurity.org)这样的工具。它基本上是一个 Apache 模块防火墙，它使用可配置的规则集来拒绝不良的访问行为模式。但老实说，如果您遇到`.htaccess`此类问题，Mod Security 可能过于激烈而无法理解。

[更好的方法是通过类似这样的 mod_rewrite 技巧](http://www.javascriptkit.com/howto/htaccess10.shtml)来防止热链接。

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com/.*$ [NC]
RewriteRule \.(gif|jpg)$ http://www.mydomain.com/angryman.gif [R,L] 
```

再一次，阅读你的问题，我不是 100% 确定你想要达到什么目标？也许`mod_rewrite`像这样的东西可以给你提示如何解决这个问题？祝你好运！

# hadoop - 如何查看hadoop数据目录结构？

> ID：14555357
> 
> 赞同：0
> 
> 时间：2013-01-28T04:18:18.490
> 
> 标签：hadoop, hive, hdfs

我在蜂巢中有分区表。所以我想看看hadoop hdfs中的目录结构？

从[文档](http://hadoop.apache.org/docs/r0.20.0/hdfs_shell.html#ls)中，我找到了以下命令

```
hadoop fs -ls /app/hadoop/tmp/dfs/data/ 
```

并且`/app/hadoop/tmp/dfs/data/`是我的数据路径。但是这个命令返回

> ls：无法访问/app/hadoop/tmp/dfs/data/：没有这样的文件或目录。

我在那里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:10:03.100

除非我弄错了，否则您似乎正在寻找您可能在 property 中定义的临时目录`hadoop.tmp.dir`。这是一个本地目录，但是当您`hadoop fs -ls`查看 HDFS 中可用的文件时，您将看不到任何内容。

由于您正在查找 Hive 目录，因此您正在 hive-site.xml 中查找以下属性：

```
hive.metastore.warehouse.dir 
```

默认值为`/user/hive/warehouse`，因此如果您没有更改此属性，您应该可以执行以下操作：

```
hadoop fs -ls /user/hive/warehouse 
```

这应该向您显示您的表目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:54:50.050

检查您的 core-site.xml 文件和 hdfs-site.xml 中是否正确设置了 tmp 目录。如果不设置，则操作系统的临时目录（ubuntu 中的 tmp 和 windows 中的 %temp%）将被设置为 hadoop tmp 文件夹，因此您在重新启动计算机后可能会丢失数据。在 xml 中设置此 dfs.tmp.dir 并重新启动集群。那时它会正常工作。即使在此之后如果没有解决，也请提供有关分区表代码和表数据的更多详细信息。

# mysql - 两列SQL共存

> ID：14555363
> 
> 赞同：1
> 
> 时间：2013-01-28T04:19:35.477
> 
> 标签：mysql, sql

我是 SQL 新手（是的，只有 1 周），我正在自己学习。所以，我真的需要帮助来解决这个问题：

当另一列也为 NULL 时，如何将列（在表中）设置为 NULL？

示例：以 Name 和 Gender 作为列的人员表。为了有性别，“姓名”列还必须有一个条目。如果 Name 为 NULL，则不允许在 Gender 下插入。

哦，是的，这与我的作业问题有关，但我已将上面的示例修改为不同。我不想要答案（虽然他们很受欢迎，但我想学习），我只想要指导。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T04:24:36.733

SQL 支持一种称为“检查约束”的功能，因此您可以声明一个必须为真的表达式，否则该行无效并且无法插入。即`CHECK Name IS NULL AND Gender IS NULL OR Name IS NOT NULL AND Gender IS NOT NULL`。

但不幸的是，MySQL 不支持检查约束。从标准的角度来看，SQL 的许多特性都是可选的，并且并非所有 RDBMS 实现都支持所有特性。甚至还有一些 SQL 特性是RDBMS 品牌*都不*支持的。

在 MySQL 中执行此操作的唯一方法是使用[触发器](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)。在插入或更新之前，如果 Name 为 null，则强制 Gender 也为 null。

如果 Name 不为 null 且 Gender 为 null，那么我假设该行无效，因此您必须使用[信号](http://dev.mysql.com/doc/refman/5.5/en/signal.html)来中止插入或更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:34:17.430

为将值插入表而编写的存储过程可以帮助您解决此问题。请看下面的示例代码：

```
CREATE PROCEDURE InsertIntoTable
(
 @NAME NVARCHAR(20) = NULL,
 @GENDER NVARCHAR(20) = NULL
)
AS
BEGIN
    DECLARE @NewGender NVARCHAR(20)

    IF(@NAME IS NULL)
        SET @NewGender = NULL
    ELSE
        SET @NewGender = @GENDER

    INSERT INTO Table1 VALUES(@NAME, @NewGender)
END 
```

# ruby-on-rails - 快速测试：如何在不加载 Rails 的情况下测试 Mailer

> ID：14555364
> 
> 赞同：1
> 
> 时间：2013-01-28T04:19:49.833
> 
> 标签：ruby-on-rails, rspec, actionmailer

我有一些工作要做重构邮件类。我不想把所有的时间都花在加载 rails 和等待测试是否通过。我只想不包括 spec_helper 并加快我的测试。

我如何只包含 ActionMailer？

我试过这个：

```
require 'action_mailer' 
```

但我仍然遇到这个错误：

```
uninitialized constant ActionMailer (NameError) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:37:48.553

我正在使用 MiniTest，以下对我来说很好。您可以从中推断，或在您的问题中提供更多信息。

```
require 'minitest/autorun'
require 'mocha'
require "minitest-matchers"
require 'action_mailer'
require "email_spec"

require File.expand_path('../../../../app/mailers/my_mailer', __FILE__)

class MyMailerTest < MiniTest::Unit::TestCase
  include EmailSpec::Helpers
  include EmailSpec::Matchers

  def test_it_is_sent_from_me
    email = MyMailer.refund_processed(42)
    email.must be_delivered_from("me@example.com")
  end
end 
```

# android - 如何获取在android中获取签名apk文件的私钥？

> ID：14555372
> 
> 赞同：4
> 
> 时间：2013-01-28T04:20:37.620
> 
> 标签：android, publishing

我想知道在 google play store 中发布 android apk 的信息。我阅读了开发者网站。但我很难获得 apk 文件的私钥。如何使用发布模式获取签名的 apk 文件。所以我需要一些步骤循序渐进的过程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T04:35:22.217

这里有几个步骤可以帮助您创建发布*私有*签名密钥：

1.  选择**文件 -> 导出**
2.  在弹出窗口中，展开 Android 并选择**Export Android Application**
3.  在下一个弹出窗口中，选择**Browse**按钮​​并选择您需要发布 APK 的 Project。
4.  单击**下一步**按钮。下一组选项用于选择现有密钥库或创建新密钥库。选择**Create new keystore**，设置要保存密钥库文件的位置，选择您自己的密码并确认。
5.  下一页是**密钥创建**选项集。在此，为密钥库创建一个别名。再次选择密码并确认。为您的密钥库设置有效年数。它必须至少为**25 年**。在此页面上输入其余详细信息。
6.  在此向导的最后一页上，选择您希望将 APK 保存在计算机上的位置。

这里的所有都是它的。

**注意：**发布签名密钥由开发人员创建，而不是由 Google 为开发人员创建。它是一个自签名证书。确保此密钥安全可靠，并可能保存在多个位置。**如果您要放弃对上述第 4 步**中创建的签名密钥文件的访问权限，您将无法将更新发布到您的应用程序。没有已知的方法可以恢复丢失的密钥。这同样适用于您在上述过程中选择的密码。**不要丢失密钥文件或其密码。**

在此处阅读有关签署应用程序的更多信息：http: [//developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:25:41.260

如果您使用的是 Eclipse，请右键单击您的项目>工具>导出签名的 apk

然后按照步骤操作。您将被要求使用现有密钥或生成新密钥，选择生成新密钥的选项，将生成新密钥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T04:26:30.737

开发者网站上有一个签署 Android 应用程序的指南：

[http://developer.android.com/guide/publishing/app-signing.html](http://developer.android.com/guide/publishing/app-signing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T04:34:21.097

看看这个：[在发布模式下编译应用程序](http://developer.android.com/guide/publishing/app-signing.html#releasecompile)

> Android 工具 > 导出签名的应用程序包

* * *

> [支持真正的调试构建](http://developer.android.com/sdk/tools-notes.html)。开发人员不再需要将 android:debuggable 属性添加到清单中的标签 — 构建工具会自动添加该属性。在 Eclipse/ADT 中，所有增量构建都假定为调试构建，因此工具插入 android:debuggable="true"。导出签名的发布版本时，工具不会添加该属性。在 Ant 中，ant 调试命令会自动插入 android:debuggable="true" 属性，而 ant release 则不会。如果手动设置了 android:debuggable="true"，那么 ant release 实际上会进行调试构建，而不是发布构建。

# javascript - 如何将元素推送到指令中的数组 - AngularJS

> ID：14555375
> 
> 赞同：0
> 
> 时间：2013-01-28T04:21:11.113
> 
> 标签：javascript, angularjs

我有一个类似于这样的角度指令：

```
.directive('forexample', function() {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function(scope, elm, attrs, ctrl) {
        elm.on('click', function() {
            scope.$apply(function () {
            ctrl.$setViewValue('value'); 
```

从类似的东西调用：

```
<button forexample ng-model="mymodel">Do It</button> 
```

很明显

```
$scope.mymodel; // equals value 
```

我想要的是 push('value'); 从指令到模型，所以最后在点击“Do It”几次后，你会得到：

```
$scope.mymodel; // equals array('value,'value','value'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:42:31.010

`ngModel`控制器通常与输入类型指令一起使用，其中 2 路数据绑定显示其全部功能。但是从您的示例来看，您的`ngModel`情况可能不需要完整的机器。从功能上讲，您的示例没有解释您要做什么，所以我只是假设您想将值推送到数组以响应点击事件。如果是这样，解决此问题的最简单方法是在范围上使用该`$eval`方法：

```
.directive('forexample', function() {
    return {
      link: function(scope, elm, attrs, ctrl) {
        var modelArray = scope.$eval(attrs.forexample);

        elm.bind('click', function() {            
            scope.$apply(function () {
              modelArray.push('value');
            });
        });
      }
    };
  }); 
```

上面的指令可以在模板中使用，如下所示：

```
<button forexample="somearray">Do It</button> 
```

这里是工作 plunk：[http ://plnkr.co/edit/xc5mui9xbxIWHxcvAjqR?p=preview](http://plnkr.co/edit/xc5mui9xbxIWHxcvAjqR?p=preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:12:00.827

Given`$scope.mymodel`已经定义为数组，那么下面应该可以工作。

```
app.directive("forexample", function() {
  return function( scope, elm, attrs ) {
    elm.bind("click", function( evt ) {
      scope.$apply(function( scope ) {
        scope[ attrs.ngModel ].push('value');
      });
    });
  };
}); 
```

# jquery - 调试 CSS 下拉菜单 jQuery 动画

> ID：14555380
> 
> 赞同：0
> 
> 时间：2013-01-28T04:22:00.817
> 
> 标签：jquery, css, debugging, animation, drop-down-menu

我正在尝试调试以下脚本以确保获得最佳的所需 UX。[正如在这个 fiddle 上看到的](http://jsfiddle.net/pF8wZ)那样，这个脚本不能像预期的那样工作。

```
 $("ul.menu li").mouseover(function() {
        $(this).find("ul.sub-menu").animate({"opacity": "show"}, 800, "swing");

        $(this).hover(function() {}, function(){
            $(this).find("ul.sub-menu").animate({"opacity": "hide"}, "slow");
        });
    }); 
```

如您所见，动画最初不会触发。此外，如果用户不小心将鼠标悬停在多个链接上，那么不需要的动画会在播放数秒后卡住。我想编辑这种响应。在使用 jQuery 时，目前在专业 UI 设计中处理此问题的一些主要方法是什么？如何将这些解决方案实施到我的脚本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:38:21.663

在开始新的动画之前尝试`.stop().animate({...});`停止任何现有的动画。

文档：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:41:46.553

我无法重现您的第一个问题。但是，我稍微更新了脚本以希望获得您想要的行为（至少更接近）：

1.  在动画之后使用`.stop`来停止它们，这样它们就不会与重复事件一起排队
2.  不要`.hover`在回调中绑定事件。单独绑定
3.  使用`.mouseenter`/`.mouseleave`以便不会通过移动具有相同父级的不同元素来触发事件。

[http://jsfiddle.net/pF8wZ/2/](http://jsfiddle.net/pF8wZ/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T04:44:06.677

您正在嵌套`mouseover()`，`.hover()`这是主要问题。你只是想在悬停时显示一些东西，然后在悬停时反转动画。

试试这个：http: [//jsfiddle.net/pF8wZ/4/](http://jsfiddle.net/pF8wZ/4/)

```
jQuery(document).ready(function($) {
    $("ul.menu > li").hover(
        function() {
            $(this).find("ul.sub-menu").stop().animate({
                height: 'toggle',
                opacity: 'toggle'
            });
        }
    );
}); 
```

我还从小提琴中清理了你的 CSS。你只需要这个来使悬停行为起作用：

```
#access {
background: #000;
margin: 0 auto;
display: block;
float: left;
    position: relative;
}
ul.menu { 
    list-style: none;
    margin: 0;
}
ul.menu > li {
    float: left;
    padding: 5px;
    background: #ccc;
}
#access ul .sub-menu {
    position: absolute;
    left: 0;
    top: 100%;
    margin: 0;
    width: 200px;
    background-color: #474747;
    -moz-border-radius-bottomleft: 10px;
    -webkit-border-bottom-left-radius: 10px;
    -moz-border-radius-bottomright: 10px;
    -webkit-border-bottom-right-radius: 10px;
    display: none;
}
#access ul .sub-menu a {
    background: #333;
    line-height: 1em;
    display: block;
    padding: 3px 5px;
    background-image: -moz-linear-gradient(100% 100% 90deg, #474747, #939393);
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#939393), to(#474747));
} 
```

和 HTML：

```
<div id="access">
<div class="menu-header">

<ul id="menu-wordpress-sandbox-menu" class="menu">
    <li id="menu-item-17" class="menu-item">
        <a href="#">Fruits</a>
        <ul class="sub-menu">
            <li id="menu-item-19" class="menu-item"><a href="#">Oranges</a></li>
            <li id="menu-item-20" class="menu-item"><a href="#">Apples</a></li>
        </ul>
    </li>
    <li id="menu-item-32" class="menu-item">
        <a href="#">Colors</a>
        <ul class="sub-menu">
            <li id="menu-item-30" class="menu-item"><a href="#">Blue</a></li>
            <li id="menu-item-31" class="menu-item"><a href="#">Red</a></li>
        </ul>
    </li>
    <li id="menu-item-33" class="menu-item">
        <a href="#">Links</a>
        <ul class="sub-menu">
            <li id="menu-item-34" class="menu-item"><a href="#">Google</a></li>
            <li id="menu-item-35" class="menu-item"><a href="#">Yahoo!</a></li>
        </ul>
    </li>
</ul>

</div>
</div> 
```

# javascript - 带有knockoutJS的变量依赖

> ID：14555381
> 
> 赞同：1
> 
> 时间：2013-01-28T04:22:09.927
> 
> 标签：javascript, knockout.js, dependencies

我正在使用 KnockoutJS 构建一个应用程序，该应用程序具有一个基本上充当顺序电子表格的组件。在不同的行上，用户可以定义变量或使用它们来表示一个值。

所以例如

```
x =2 
x  //2
x = 4
x  //4 
```

我在继续添加新行的简单情况下工作。每行的输出函数检查并向后迭代以查看变量是否以前定义过。如果是，它使用它找到的第一个示例并将其设置为值。这在最初定义行时有效，并且在前一行更改后编辑一行时也有效。

但是，如果该变量的先前定义已更改、删除或添加，我希望更新变量。这种行为现在不存在。我尝试使用映射添加我自己的自定义依赖处理代码来跟踪变量，但它严重影响了性能。我想利用 Knockouts 依赖管理来解决这个问题，但我不确定最好的方法。这是我的代码结构的简要总结，如果需要，我很乐意添加更多细节。

`calcFramework`是我绑定到地图的视图模型对象。它由一个可观察的 Lines 列表、一个 varMap 和其他不相关的属性和函数组成

`Line`是一个自定义对象。相关代码如下

```
var Line = function (linenum,currline) {
    var self = this;
    self.varMap = {};
    self.input = ko.observable("");
    self.linenum = ko.observable(linenum); 

    self.lnOutput = ko.computed({
        read:function(){
           return outputFunction(self,self.input());
        },
        write:function(){},
        owner:self
    });
};

function  outputFunction(self,input) {
    try{
        var out = EQParser.parse(input,10,self);
        return  out.toString();
    }
    catch(ex){
        //error handling
    }
}

Line.prototype.getVar = function (varName, notCurrentLine) {
    if(typeof varName === "undefined"){
        return null;
    }
    //Actually don't want ones set in the current varMap, only past lines
    if(varName in this.varMap && notCurrentLine){
        return this.varMap[varName];
    }

    if (this.linenum() > 0) {
        var nextLine = calcFramework.lines()[this.linenum() - 1];
        return nextLine.getVar(varName,true);
    } else {
        //eventually go to global
        return calcFramework.varMap[varName];
    }
};

Line.prototype.setVar = function(varName,value){
    this.varMap[varName] = value;
}; 
```

SetVar 和 getVar 被传递给 eqParser，后者获取表达式的值，如果引用了变量，则根据需要调用这些函数。所以变量值没有显式传递给函数，因此敲除不会将其视为依赖项。但是我不确定如何将变量作为参数传递而不每次都遍历列表。

所以我的问题是，在这种设置下，跟踪变量赋值（和/或新赋值）的变化并更新引用该变量的行，同时保持良好性能的最佳方法是什么。

我知道我的问题很长，我试图删掉所有不必要的细节。感谢您的耐心阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:58:29.320

我很想使用发布/订阅模型，使用类似[Peter Higgins 的 PubSub jquery 插件](https://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js)

您的整个应用程序将订阅/侦听发布它们具有变量定义的事件的行。这会将任何变量名称与值一起存储在标准 javascript 哈希表中。当一个变量找到事件被一行发布时，应用程序会检查所有已知的变量，如果它发现它是对现有变量值的更改，它会发布一个变量更改事件。所有的行都会订阅那个事件。然后，他们可以检查是否有与该名称匹配的变量，并相应地更新值。

这是一些未经测试的代码，可以让您了解我的意思：

```
var app = function()
{
    var self = this;

    self.variables = {};
    $.subscribe('/variableAssigned', function (key, value)
        {
            // I think that this is the best way of checking that there is a variable
            // in the object
            if(self.variables.hasOwnProperty(key))
            {
                if(self.variables[key] !== value)
                {
                    $.publish('/variableChanged', [ key, value ]);
                }
            }
        });
} 
```

在您的 Line 对象中：

```
$.subscribe('/variableChanged', function (key, value)
    {
        // loop through varMap and see if any of them need updating.
    }); 
```

# hive - WSO2 Hive 分析器脚本结果集

> ID：14555385
> 
> 赞同：1
> 
> 时间：2013-01-28T04:22:20.987
> 
> 标签：hive, wso2, wso2esb, wso2bam

我正在使用 WSO2 ESB 4.5.1 和 WSO2 BAM 2.0.0。在我的 Hive 脚本中，我试图获取一个值并将其分配给一个变量，以便以后可以在 SQL 语句中使用它。我可以使用 hiveconf 使用变量，但我不确定如何从结果集中将单个值分配给它。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:46:59.590

您可以扩展[AbstractHiveAnalyzer](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/analytics/org.wso2.carbon.analytics.hive/4.0.5/src/main/java/org/wso2/carbon/analytics/hive/extension/AbstractHiveAnalyzer.java)并编写自己的类来执行查询并设置 hive conf 值，类似于这个[summaryer](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/stratos/usage/org.wso2.carbon.usage.summary.helper/1.0.0/src/main/java/org/wso2/carbon/usage/summary/helper/HourlyServiceStatsSummarizerHelper.java)。在这里您可以看到应该实现 execute() 方法，这将由 BAM 调用。在这里，您可以添加您的首选查询并使用“setProperty("your_hive_conf", yourResult.string());' 分配 hive conf。

您可以将您的 java 应用程序构建为典型的“.jar”文件或 osgi 包。如果您只是打包为“.jar”文件，那么您应该将 jar 放在 $BAM_HOME/repository/components/lib 中。如果您将应用程序打包为 osgi 包，则将文件放在 $BAM_HOME/repository/components/dropins 文件夹中。并重新启动 BAM 服务器。

最后，在您添加到 BAM 中的配置单元脚本中，您应该将扩展类包括为“class your.package.name.HiveAnalyzerImpl;”，以便 BAM 将运行您在您的类中实现的 execute() 方法和您的hive conf 将被设置。然后，您为 hive conf 设置的值可以在 hive 脚本中用作 ${hiveconf:your_hive_conf}。

希望这可以帮助。

# c# - 使用 for 循环将初始化数组（索引 5 以后为空）添加到图表控件

> ID：14555387
> 
> 赞同：0
> 
> 时间：2013-01-28T04:22:28.767
> 
> 标签：c#, .net, multidimensional-array, charts

我已经初始化了一个二维数组，并从索引 5 开始包含空值。我正在尝试将数组值添加到我的图表控件中。当我尝试将值显示到 Console.WriteLine 时，没有发生异常，但是当我添加到我的图表系列时，异常是“索引超出了数组的范围”。任何人都可以帮助我吗？是因为图表控件的柱线有限吗？

```
try
{
    //females age range
    string[,] gAge = new string[10, 2];
    gAge[0, 0] = "F.13-17";
    gAge[0, 1] = yf.f1317.ToString();
    gAge[1, 0] = "F.18-24";
    gAge[1, 1] = yf.f1824.ToString();
    gAge[2, 0] = "M.25-34";
    gAge[2, 1] = yf.m2534.ToString();
    gAge[3, 0] = "M.13-17";
    gAge[3, 1] = yf.m1317.ToString();
    gAge[4, 0] = "M.18-24";
    gAge[4, 1] = yf.m1824.ToString();

    for (int i = 0; i < gAge.Length; i++)
    {

        if (gAge[i, 0] == null)
        {
            break;
        }
        else
        {
            Console.WriteLine(gAge[i, 0].ToString());
            string[] seriesArray = { gAge[i, 0].ToString() };
            Series series = this.chart1.Series.Add(seriesArray[i]);
        }

    }
}
catch (Exception ex)
{
    Console.WriteLine(ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:33:48.213

问题是你得到了整个数组的长度，在这种情况下`gAge.Length`等于 20，这是你的数组中的索引总数。它超出了您的第一个数组维度的范围。尝试[`gAge.GetLength(0)`](http://msdn.microsoft.com/en-us/library/system.array.getlength%28v=vs.100%29.aspx)改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:41:56.600

```
 try
        {
            chart1.Series.Clear();
            chart1.Titles.Clear();
            chart1.Visible = true;

            //CODES HERE TO GET THE SELECTED PAGE FROM DROP DOWN LIST

            var fb = new FacebookClient(myToken.Default.token);
            var query = string.Format("SELECT metric, value FROM insights WHERE object_id=132414626916208 AND metric='page_fans_gender_age' AND period = period('lifetime') AND end_time = end_time_date('2013-01-18')");

            dynamic parameters = new ExpandoObject();
            parameters.q = query;
            var data = fb.Get<genderAgeDataII>("fql", parameters);

            genderAge yf = (genderAge)data.data[0].value;

            //females age range
            string[,] gAge = new string[10, 2];
            gAge[0, 0] = "F.13-17";
            gAge[0, 1] = yf.f1317.ToString();
            gAge[1, 0] = "F.18-24";
            gAge[1, 1] = yf.f1824.ToString();
            gAge[2, 0] = "M.25-34";
            gAge[2, 1] = yf.m2534.ToString();
            gAge[3, 0] = "M.13-17";
            gAge[3, 1] = yf.m1317.ToString();
            gAge[4, 0] = "M.18-24";
            gAge[4, 1] = yf.m1824.ToString();

            for (int i = 0; i < gAge.GetLength(0); i++)
            {

                if (gAge[i, 0] == null)
                {
                    break;
                }
                else
                {

                   string[] seriesArray = { gAge[i,0] };

                   // Add series.
                   for (int w = 0; w < seriesArray.Length; w++)
                   {
                       // Add series.
                       Series series = this.chart1.Series.Add(seriesArray[w]);

                       int[] pointsArray = new int[seriesArray.Length];
                       pointsArray[w] = Convert.ToInt32(gAge[i, 1]);
                       series.Points.Add(pointsArray[w]);
                   }

                   Console.WriteLine(gAge[i, 0].ToString());
                }

            } 
```

# internet-explorer - Internet Explorer 9 是“常青”浏览器吗？IE 10 怎么样？

> ID：14555389
> 
> 赞同：29
> 
> 时间：2013-01-28T04:22:36.533
> 
> 标签：internet-explorer, browser, internet-explorer-9, internet-explorer-10

Chrome 和 FF 将默默地更新到较新的版本，我已经读到 MS 为 IE6 和 7 到 IE8 以及从 IE8 到 9 的人们进行了自动升级。微软有没有说明 9 和 10 是否会定期推出（每周/每月）无声更新，还是会类似于他们将人们从 6 岁和 7 岁提高到 8 岁的做法？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-09-27T21:28:05.953

最新版本的 Chrome、Firefox、Edge 和 Safari 是常青浏览器，即它们会在不提示用户的情况下自动自动更新。

微软从 IE10 开始转向常青浏览器，这是微软发布[公告](https://web.archive.org/web/20140726072852/http://blogs.windows.com/ie/b/ie/archive/2011/12/15/ie-to-start-automatic-upgrades-across-windows-xp-windows-vista-and-windows-7.aspx)后的第一个主要 Internet Explorer 版本，听起来像是在引用。通过 Windows 更新，Microsoft 自动将用户更新到其 Windows 版本支持的最新版本的 Internet Explorer：在 Windows XP 上最高 IE8，在 Windows Vista 上最高 IE9，而 IE10 需要 Windows 7。从技术上讲，Windows 7 上的用户IE9（如果他们有本地管理员帐户，启用自动更新）将升级到 IE10，但这不会使 IE9 成为常青浏览器；卡在 IE9 上的 Vista 用户无法升级。

无论如何，我们现在绝对处于网络的新时代，开发人员不必担心支持古老的浏览器，并且可以实际使用网络平台的新功能。对于它的价值，我在英特尔的 Web 应用程序中画了一条线，只支持常青浏览器，这让我很高兴这样说，我自己也经历了支持 oldIE 的黑暗时代。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-30T19:25:37.710

“常青浏览器”是指制造商和大多数支持它的应用程序只支持最新版本的浏览器。也就是说，没有任何版本的 IE 是常青的。但是，Microsoft Edge 是常青树。

举例来说，如果您有错误或严重问题，即使在之前的版本中，也没有开发人员或浏览器制造商会修复它，如果它在最新版本中运行良好并且浏览器是“Evergreen”。你必须更新它。另一方面，就像 2014 年一样，如果您的错误发生在 IE 9 而不是 IE 10 中，则该错误仍然必须修复，因为这两个版本都在 Microsoft 的支持日期内（当时）。微软或负责该漏洞的开发人员不得不处理同一浏览器的多个版本。

“常青浏览器”与自动更新无关。这只是一个更新策略

# c# - 如何在 Windows 8 应用程序中获取当前登录用户的电子邮件 ID？

> ID：14555391
> 
> 赞同：1
> 
> 时间：2013-01-28T04:23:12.730
> 
> 标签：c#, .net, windows-8, windows-store-apps

如何从 Windows 商店应用程序中获取当前登录用户的电子邮件 ID？

我尝试了 Windows.System.UserProfile.UserInformation 类，但它没有这样做的方法。某些方法被拒绝访问，无法使用。我该怎么做呢？

# php - 写入文件的输入会被恶意篡改吗？

> ID：14555392
> 
> 赞同：7
> 
> 时间：2013-01-28T04:23:18.033
> 
> 标签：php, file, security, validation

Uber 简单的例子来说明这一点：

```
$message = $_POST['message'];

$fp = fopen("log.txt", "a");
fwrite($fp, $message);

fclose($fp); 
```

我应该清理`$_POST['message']`变量的用户输入吗？

我理解准备好的语句（用于数据库清理）和`htmlentities`（如果我`POST`在某个时间将消息输出回屏幕）但在这种情况下，输入只是放在一个日志文件中，该文件将由一个小的 PHP 脚本读取（`via fopen()`）

答案是否取决于阅读方式？例如，如果我确实通过 fopen() 打开了日志文件，它应该是`htmlentities`，并且如果我打算下载日志文件并使用 Excel 读取它（用于过滤目的），那么没有什么可做的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-27T14:29:14.987

你的代码基本上是无辜的。唯一“明显”的攻击是反复将数据上传到您的服务器，最终耗尽您的磁盘空间。

“消毒”是一种情境。这不是你可以洒在代码上以使其变得更好的东西，就像你可以在食物上加盐一样。也许您会清理 $_POST 数据以防止 SQL 注入攻击，然后在 HTML 上下文中使用这些数据 - 现在您很容易受到 XSS 攻击。也许它是一个图像上传，并且您进行基本的 MIME 类型确定以确保它是一个图像。这一切都很好，很花哨，但是有人上传了儿童色情片，这将通过“它是图像”测试，现在你遇到了一个更大的问题。

由于您正在接受用户数据并将其写入文件，因此无法使用此代码（除了磁盘空间问题）来滥用您的系统。您不能将某些数据序列嵌入到数据中，这会导致 PHP 或底层操作系统突然停止将该数据写入磁盘并开始执行它。上传数据的类型无关紧要，因为它永远不会在可能用于影响脚本执行的上下文中使用。您只是从网络服务器中吸入一些数据，然后将其吐出到磁盘上。您不允许用户影响写入哪个文件（除非您的用户对服务器具有 shell 级别的访问权限，并且可以创建一个名为“log.txt”的符号链接，指向其他更重要的文件）。

真正的问题出现在之后......这个文件写完后你会做什么？如果您以后的代码做了一些愚蠢的事情

```
include('log.txt'); 
```

那么现在你确实有一个问题——你现在已经把这个“无辜”的数据放在磁盘上的一个文件中，并将它变成了潜在的可执行代码。只需`<?php exec('rm -rf /') ?>`在该文件中的任何地方简单地丢弃您的服务器。

同样，考虑一下类似于 PHP 的固有愚蠢的“安全”措施`magic_quotes`。PHP 开发人员（**错误地**和**愚蠢**地）假设从外部世界提交的任何数据都只会在 SQL 上下文中使用，并且无论其最终目的如何，都会对所有数据进行 SQL 转义。更糟糕的是，他们只是假设所有数据库都使用反斜杠作为转义序列。如果您从不使用 MySQL 以外的任何东西，这一切都很好，但如果您使用的是 SQL Server 怎么办？现在您必须将 PHP-provided 翻译`Miles O\'Brien`成`Miles O''Brien`，本质上必须 UNDO PHP 自动为您所做的。

TL;DR：不要使用霰弹枪“消毒”方法，它们几乎总是无用/毫无意义，只是在之前和之后需要更多的工作。只需在使用数据时使用特定于上下文的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T18:12:07.513

您应该清理用户输入，但*如何*处理完全取决于输入的用途。“消毒”是指确保输入对于特定用途是安全或健全的。在您确定用例之前，该术语无法更具体。

您无需担心像 fopen() 这样的 PHP 读/写函数。关注实际解析或分析输入的步骤。一些可能的例子：

*   如果文件将显示在基本日志阅读器中，您可能需要确保每个输入都限制在一定长度内，并且不包含换行符或您选择的字段分隔符，并且每行的开头是有效时间邮票。
*   如果文件将显示在 Web 浏览器中，您可能需要确保输入不包含脚本或指向其他资源的链接（如 IMG 标记）。
*   Excel 文件在行长、时间戳和分隔符方面也有类似的问题。只要 Excel 将文件解析为文本，您就不必担心有人包含可执行代码。（此外，现代 Excel 版本会在运行包含宏之前向您发出警告。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T14:12:44.503

一般规则是[验证输入并清理输出](http://diovo.com/2008/09/sanitizing-user-data-how-and-where-to-do-it/)。

如果可以以任何方式[验证](https://www.owasp.org/index.php/Data_Validation)您的输入，那么您应该这样做。如果没有，那么您应该在输出时对其进行清理，以确保它对于所使用的上下文是安全的。

例如，如果您知道**无论如何使用**`message`每个字符都应少于 100 个字符，则读取 POST 数据的脚本可以验证并拒绝任何 POST 数据包含超过 100 个字符的输入的请求。

 **验证是一种“全有或全无”的方法，它拒绝任何不遵循特定规则的东西，而不管输出上下文如何，而清理是根据上下文“使某些东西安全”的过程。我认为做出这种区分很重要。

在您的情况下，您提供的示例代码不会输出（由另一个脚本处理的目的除外）。它更像是一种存储操作而不是输出操作，因为它`message`可以像文件系统一样容易地写入数据库。在这种情况下，需要锁定的主要攻击面似乎是文件权限，并确保除了您打算执行此操作的脚本和正确的上下文之外，没有任何东西可以读取或写入文件。例如，我意识到您的示例被简化了，但在这种特定情况下，您应该确保将文件写入您的 Web 根目录上方的位置，或者写入适当设置文件夹权限的位置。否则，您可能无意中为网络上的任何人提供了访问[http://www.example.com/log.txt的权限](http://www.example.com/log.txt)如果他们也可以写入它，那么如果他们可以欺骗浏览器以 HTML 格式读取文件，那么就有可能利用某种[XSS攻击。](http://en.wikipedia.org/wiki/Cross-site_scripting)旧版本的 Internet Explorer 会[尝试检测 MIME 类型](http://blogs.msdn.com/b/ie/archive/2010/10/26/mime-handling-changes-in-internet-explorer.aspx)，而不是依赖于`text/plain`（另请参阅[此处](http://msdn.microsoft.com/en-us/library/ie/gg622940%28v=vs.85%29.aspx)）的服务器标头值。不过，这些漏洞可能有点离题，我只是提到它们是彻底的，并作为确保文件本身被适当锁定的一个例子。

回到您的问题：在您的情况下，您的验证应该由处理`log.txt`. 这应该验证文件。请注意，它在此处验证文件，而不是原始`message`. 该文件应使用其自己的规则进行验证，以确保数据符合预期。如果脚本直接输出任何内容，则应在此处进行清理以匹配输出的上下文。因此，总结一下您的应用程序的验证和清理过程将是：

1.  **创建日志：** Web 浏览器 ---POST---> `get_message.php`---> 验证`message`是否有效 --- `fwrite()`-->`log.txt`

2.  **进程日志：** `log.txt` --- `fopen()`---> `process.php`---> 验证文件是否有效 ---> 有什么输出吗？然后在这个阶段进行消毒。

以上假设在脚本进行处理之前进行了正确的授权（即当前用户在您的应用程序中具有登录`message`或处理日志的权限。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T16:22:48.183

**我会对其进行消毒。**当涉及到日志时，只需确保将其放入保留空间 - 例如，如果日志是每行一条记录，则从用户输入中删除新行和其他内容，这样他就不会欺骗你。

看看[名为日志注入的攻击](https://www.owasp.org/index.php/Log_injection)

在显示日志文件时也要非常小心。确保没有输出会伤害您的读者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-30T11:49:11.353

*   您附加到当前目录中的文件 - 这似乎可以通过浏览器下载，因此您正在创建一个安全漏洞。将文件放在文档根目录之外（最好），或通过 .htaccess 保护它。
*   您应该清理所有用户输入。总是。这意味着什么取决于您如何使用这些数据。您似乎在写入文本日志文件，因此您只想让可打印和空白类字符通过。进行防御性清理：不要指定坏字符代码并让其他所有内容通过，而是定义“好”字符的列表/类并让这些好字符通过。
*   根据您的用例，您可能希望使用flock() 日志文件，以防止多个并行请求在您的文件中混合：

    $logtext = sanitizeLog($_POST[Message']); $fd = fopen("/path/to/log.txt", "a"); if(flock($fd, LOCK_EX)) { fseek($fd, 0, SEEK_END); fwrite($fd, $logtext); 羊群（$fd，LOCK_UN）；} fclose($fd);

我省略了对 fopen() 结果的检查......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-31T01:36:30.910

关于 PHP 的 fwrite() 函数，**不需要清理**： fwrite() 只是将其写入它传递的文件。

关于日志文件，您**可能希望清理**. 原因如下：

假设攻击者将多行值作为消息发布。如果您的日志在帖子之前

```
line 1
line 2 
```

然后在帖子之后

```
line 1 
line 2
line 3
remainder of line 3
very remainder of line 3 
```

因为攻击者发布了这个：

```
line 3\nremainder of line 3\nvery remainder of line 3 
```

注意：一次发布与添加 3 行。

也就是说：**发布的数据需要如何清理，完全取决于您的应用程序。****

# python - 分发本地 Flask 应用程序

> ID：14555393
> 
> 赞同：5
> 
> 时间：2013-01-28T04:23:20.173
> 
> 标签：python, flask, distribution

我制作了一个简单的 Flask 应用程序，它本质上是 sqlite3 的包装器。它基本上在本地运行开发服务器，您可以从 Web 浏览器访问该界面。目前，它完全按照应有的方式运行。

我需要在计算能力不高的人操作的计算机上运行它。我*可以*在计算机上安装 Python，然后运行我的 .py 文件，但我对所涉及的文件“公开”感到不舒服。有没有办法可以将此应用程序放入可执行文件中？我尝试同时使用 py2exe 和 cx_freeze，但两者都在“图像”上引发了 ImportError。我还尝试压缩文件（`__main__`.py 和所有这些），但在尝试运行文件时遇到 500 个错误（我假设文件由于某种原因无法访问模板。）

如何将此 Flask 应用程序部署为可执行文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:50:53.097

主持它。

由于您在 Flask 中创建了它，并且它是一个网络应用程序 - 托管它应该是微不足道的。将其转储到任何 PaaS 提供商，如 Heroku、Google App Engine、[OpenShift](https://openshift.redhat.com/app/)或在 EC2 上启动一个微型实例并将其托管在那里。

创建可执行文件不是解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:13:29.193

为什么要分发它？如果您要使用它的用户与 Flask 应用程序在同一个本地网络上，只需给他们 IP 地址，他们就可以像您一样通过浏览器访问它，也无法访问源代码！

# sql - 如何检查我的表中列的任何值是否包含 MS ACCESS 2003 中的尾随空格？

> ID：14555397
> 
> 赞同：3
> 
> 时间：2013-01-28T04:23:51.070
> 
> 标签：sql, ms-access, ms-access-2003

如何检查 TABLEA 中列的任何值是否包含尾随空格？我只知道如何检查一列是否有尾随空格，但不是全部。

```
 SELECT *  
       FROM TABLEA
       WHERE Col1 LIKE ('* '); 
```

由于我的表中有 45 列，因此在 where 子句中指定所有列将非常累人。目前我正在通过列和行的选项卡手动进行操作，有更好的建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:01:21.613

我不确定你到底想要什么。如果您只需要其值包含尾随空格的文本列的名称，则可以使用自定义 VBA 函数。

我在`tblFoo`表的 2 列中的值中添加了尾随空格。使用下面的函数，我在“立即”窗口中获得了这些列的名称。

```
? ColumnsWithTrailingSpaces("tblFoo")
some_text, Trans Type

Public Function ColumnsWithTrailingSpaces(ByVal pTable As String) As String
    Dim db As DAO.database
    Dim fld As DAO.Field
    Dim strReturn As String

    Set db = CurrentDb
    For Each fld In db.TableDefs(pTable).Fields
        Select Case fld.Type
        Case dbText, dbMemo
            If DCount("*", pTable, _
                "Right([" & fld.Name & "], 1) = ' '") > 0 Then
                strReturn = strReturn & ", " & fld.Name
            End If
        Case Else
            'pass
        End Select
    Next fld
    Set fld = Nothing
    Set db = Nothing
    If Len(strReturn) > 0 Then
        strReturn = Mid(strReturn, 3)
    End If
    ColumnsWithTrailingSpaces = strReturn
End Function 
```

如果您还想丢弃尾随空格，您可以通过修改函数来创建并执行`UPDATE`语句（而不仅仅是将字段名称添加到`strReturn`）。

```
strUpdate = "UPDATE [" & pTable & "]" & vbCrLf & _
    "SET [" & fld.Name & "] = RTrim([" & fld.Name & "]);"
db.Execute strUpdate, dbFailOnError 
```

如果您想查看任何文本列包含一个或多个尾随空格的所有行，您可以构建一个查询，其`WHERE`子句引用`ColumnsWithTrailingSpaces()`函数返回的字段名称。

```
SELECT *
FROM TABLEA
WHERE
       Right(Col1,  1) = ' '
    OR Right(Col9,  1) = ' '
    OR Right(Col42, 1) = ' ' 
```

如果这些建议都没有给你你想要的，请澄清你想要什么。;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T04:34:15.063

对所有列执行 RTrim 并将它们插入回去

```
Select RTrim(Col1) As TrimmedCol1, Rtrim(Col2) As TrimmedCol2,. . . . 
From TABLEA 
```

如果您有主键的计数器，则可以将结果插入同一个表并删除原始值。如果没有，最好的方法是将这些值插入到临时表中。

```
INSERT INTO TempTable (Col1, Col2,....)
 Select RTrim(Col1) As TrimmedCol1, Rtrim(Col2) As TrimmedCol2,. . . . 
    From TABLEA 
```

如果您只想获取带有尾随空格的行，您可以执行以下操作：

```
SELECT * FROM TableA
WHERE 
Col1 <> RTrim(Col1) OR
Col2 <> RTrim(Col2) OR
...
Col44 <> RTrim(Col44) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T04:27:23.747

AFAIK 唯一的方法是指定所有列：

```
SELECT *
FROM TABLEA
WHERE Col1 LIKE ('* ')
OR Col2 LIKE ('* ')
OR ... 
```

建议：将表定义（`CREATE TABLE`语句）复制到文本编辑器并执行一些神奇的搜索替换来创建语句。

# ssh - 导致 SSH 超时（客户端）

> ID：14555398
> 
> 赞同：1
> 
> 时间：2013-01-28T04:23:55.620
> 
> 标签：ssh

我有一个小树莓派正在玩。我让它无头运行，当满足某些条件时，我需要使它的一个端口转发到远程服务器。

但是，我不希望连接无限期地停留，直到服务器关闭它。 **有没有办法在一段时间后关闭 SSH 连接**（从客户端，我没有根到服务器）**？** 理想情况下，我会直接通过 ssh 命令执行此操作，但我是在 Python 3 中编写的，所以如果有办法在 Python 中执行此操作，那么我会全力以赴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:38:36.673

在您的 /etc/ssh/sshd_config 中：

```
ClientAliveInterval <time interval in seconds>
ClientAliveCountMax 0 
```

因此，在第一个指令中使用 300 将在空闲 5 分钟后终止连接。您需要重新启动 sshd 才能使其生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T19:06:57.310

除非您`ssh`使用“-N”选项运行，否则它通常会在远程系统（本例中为 Pi）上启动某种命令或 shell。此远程命令退出时 SSH 断开连接。

如果您运行 ssh 只是为了创建一些端口转发，您可能使用“-N”运行，或者您可能让 ssh 会话位于命令提示符下。相反，您可以在 Pi 上启动一个命令，该命令在所需时间后退出。您可以使用该`sleep`命令，例如：

```
ssh -Lwhatever -Rwhatever user@pi "sleep 3600" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T06:12:07.233

尝试 ssh -o ServerAliveInterval=10 server.org

# asp.net - 如何处理每条聊天消息的时区

> ID：14555399
> 
> 赞同：4
> 
> 时间：2013-01-28T04:24:05.510
> 
> 标签：asp.net, sql-server, jquery

我正在使用 ASP.NET 创建一个网络聊天应用程序。当消息被发送并转发回客户时，我已经让聊天系统正常工作。但是我注意到了一些事情，但从没想过这会是个问题。我来自英国，聊天应用程序位于美国的服务器上，并注意到消息显示时间时，时间位于美国时区。我将如何设置与用户时区相对应的时区。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T04:25:11.080

以 UTC 存储您的数据。总是。因此，不要存储`GETDATE()`，而是存储`GETUTCDATE()`（或`SYSUTCDATETIME()`在 SQL Server 2008+ 中）。

*这使得将聊天中的所有*时间转换为用户所在的任何时区变得非常容易。如果您不想在 SQL 中进行转换，ASP.NET 中有很多工具可以帮助您进行这种转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T13:52:57.437

我正在将日期区域更改为我需要的巴西时间。

```
VALUES (GETDATE () AT TIME ZONE 'UTC' AT TIME ZONE 'E. South America Standard Time'); 
```

# simple.data - 用于 DML 的 simple.data 中的别名列映射

> ID：14555401
> 
> 赞同：1
> 
> 时间：2013-01-28T04:24:26.330
> 
> 标签：simple.data

有没有人使用 Simple.Data ORM [https://github.com/markrendle/Simple.Data](https://github.com/markrendle/Simple.Data)。知道如何为所有 DML 操作实现别名列名和表名。我提到[了 http://simplefx.org/simpledata/docs/](http://simplefx.org/simpledata/docs/)。它谈论选择查询中的别名？我正在寻找类似配置文件的东西，其中包含别名列/表名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:23:41.417

恐怕 Simple.Data 没有一种机制可以一次又一次地为列和表使用相同的别名。每次进行查询时都必须使用 As 方法来使用别名。因此，对于列别名，请查看[http://simplefx.org/simpledata/docs/pages/Retrieve/ColumnAliasing.html](http://simplefx.org/simpledata/docs/pages/Retrieve/ColumnAliasing.html)，对于用于连接查询的表别名，请查看[http 上的显式连接部分： //simplefx.org/simpledata/docs/pages/Retrieve/LazyLoadingJoins.htm](http://simplefx.org/simpledata/docs/pages/Retrieve/LazyLoadingJoins.htm)

# stdout - 了解标准输入标准输出标准错误

> ID：14555402
> 
> 赞同：19
> 
> 时间：2013-01-28T04:24:29.000
> 
> 标签：stdout, stdin, stderr

我试图理解`stdin` `stdout`和`stderr`。

我一直看到它们在人们的代码中使用，我无法准确理解它们是什么。我假设他们与输入/输出有关，但一直在网上搜索解释但找不到。有没有人知道一个很好的解释链接，或者如果它足够简单来解释它会对我有很大帮助。

由于我正在学习 Python 3，因此其中的示例会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T04:27:26.513

```
sys.stdin
sys.stdout
sys.stderr 
```

**解释器用于标准输入、输出和错误的文件对象：**

*   `stdin`用于所有交互式输入（包括对 的调用`input()`）；

*   `stdout`用于`print()`和表达式语句的输出和提示`input()`；

*   解释器自己的提示及其错误消息转到`stderr`.

为了您的更多理解：

```
>>> import sys
>>> for i in (sys.stdin, sys.stdout, sys.stderr):
...     print i
... 
<open file '<stdin>', mode 'r' at 0x103451150>
<open file '<stdout>', mode 'w' at 0x1034511e0>
<open file '<stderr>', mode 'w' at 0x103451270> 
```

mode`r`表示读取，mode`w`表示写入

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T04:30:45.520

[这](http://docs.python.org/2/library/sys.html?highlight=stdin#sys.stdin)足以解释清楚吗？

> sys.stdin
> sys.stdout
> sys.stderr
> 文件对象对应解释器的标准输入、输出和错误流。
> 
> stdin 用于除脚本外的所有解释器输入，但包括对 input() 和 raw_input() 的调用。
> 
> stdout 用于 print 和 expression 语句的输出以及 input() 和 raw_input() 的提示。
> 
> 解释器自己的提示和（几乎所有）它的错误消息都发送到 stderr。
> stdout 和 stderr 不必是内置文件对象：任何对象都是可以接受的，只要它有一个带有字符串参数的 write() 方法。
> （更改这些对象不会影响由 os.popen()、os.system() 或 os 模块中的 exec*() 系列函数执行的进程的标准 I/O 流。）

澄清

如果我告诉 python shell 进行打印：

```
print 'what is your name?' 
```

“你叫什么名字”会去`stdout`，不管那是什么。如果您没有进行任何重定向，则默认情况下是您正在使用的终端。您可以通过各种不同的方式与标准流进行交互，例如：

```
sys.stdout.flush() 
```

告诉 python shell 强制我`print`编辑的任何缓冲信息立即进入`stdout`。

# filepicker.io - filepicker.makeDropPane 和 FPFile "key" 属性

> ID：14555406
> 
> 赞同：0
> 
> 时间：2013-01-28T04:24:40.153
> 
> 标签：filepicker.io

根据 filepicker web docs，`filepicker.pick`将不再`key`作为传递给 onSuccess 回调的 FPFiles 的属性返回。

由于`filepicker.pick`这似乎是最常见的 api 调用，它似乎代表了其他 api 调用未来可能发生的变化。

这让我想知道`FPFiles`传递给`onSuccess`回调的`filepicker.makeDropPane`是否也将不再获得`key`属性。`filepicker.makeDropPane`该文档在该区域没有对此进行说明。

文档中也没有说明将图像备份到 S3 是否是您可以在使用`filepicker.makeDropPane`. 我确实希望这种情况发生，并且工作正常，但我没有指定任何布尔参数来说明 filepicker 应该为我执行此操作。这让我担心文件选择器在某些时候可能会改变默认行为，从而在没有警告的情况下破坏我的应用程序。

状态的文档`filepicker.pick`：

> 注意：“key”参数已弃用，很快将被删除。如果您想在挑选后立即存储文件，请使用 filepicker.pickAndStore 调用。

嗯，这很好知道`filepicker.pick`，但是呢`filepicker.makeDropPane`？有计划`filepicker.makeDropPaneAndStore`吗？是否有其他方法可以指定自动上传到 S3？会`filepicker.makeDropPane`永远自动上传到 S3，没有指定原因吗？`filepicker.makeDropPane`或者我们应该像对待`filepicker.pick`，并假设它不会上传到 S3，并在上传后调用`filepicker.pickAndStore`每个`FPFile`？如果是这样，我们应该什么时候进行更改，因为现在它已经自动上传到 S3，而且我们会复制每个 S3 上传，所以现在它是多余的？

除了这些问题之外，目前`FPFiles`正在传递给`onSuccess`回调的`filepicker.makeDropPane`还有一个未记录的`id`属性。此`id`属性不是唯一的 - 每个`FPFile`. 这会变成独一无二的吗？我们应该避免使用它吗？如果没有记录，为什么会在那里？

我们应该使用哪个`FPFile`属性来实际跟踪`FPFiles`本地？ `url`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:52:02.573

您正确地解释了 makeDropPane 需要更明确地声明存储上传的位置 - 为了“面向未来”您的实现，我建议添加 a`{store_location: "S3"}`作为选项，这将向我们表明上传应该是存储到您的 S3 中（而不是机架空间等），并保证我们返回一个`key`.

关于`id`属性，我没有看到这种行为，如果您有更多的细节（或 jsfiddle 等）会有所帮助。

# javascript - jQuery驱动的动态表

> ID：14555411
> 
> 赞同：0
> 
> 时间：2013-01-28T04:26:05.970
> 
> 标签：javascript, jquery

我正在尝试创建一个脚本，我可以：

1.  添加数据并追加到表中；和
2.  编辑已输入的数据。

到目前为止，这是我的代码：

**HTML：**

```
<table class="tbl" style="width: 48%;">
    <tr>
        <td align="center">
            Name</td>
        <td align="center">
            Gender</td>
        <td align="center">
            Contact Number</td>
        <td align="center" width="70px">
            </td>
    </tr>
    <tr>
        <td>
            <input id="txtName" type="text" /></td>
        <td>
            <select id="cmbGender" name="gender">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
            </select></td>
        <td>
            <input id="txtContact" type="text" /></td>
        <td align="middle">
            </td>
    </tr>
    </table>
<button id="btn1">Add</button> 
```

那么这是我的Javascript：

```
 $(document).ready(function() {
var num = 0;

    $("#btn1").click(function() {
            num += 1;
        $(".tbl").append("<tr><td>" + $("#txtName").val() + "</td><td>" + $("#cmbGender").val() + "</td><td>" + $("#txtContact").val() +"</td><td><button id=\"edit"+num+"\">Edit</button></td></tr>");
});

for(var i = 1; i <= num; i++) {
    $("#edit"+i).click(function(){
        alert(".tbl tr:eq("+i+")");
        $(".tbl tr:eq("+i+")").append("<tr><td><input type=\"text\" value=\""+$("tr:eq("+i+") td:eq(0)").val()+"\" /></td><td><select><option>Male</option >Male<option></option></select></td><td><input type=\"text\" value=\""+$("tr:eq("+i+") td:eq(2)")+"\" /></td><td></td></tr>");
    });
}
}); 
```

**编辑**：还有一件事。它将以一种形式进行处理并发送到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:35:35.850

我建议使用已经做得很好的几个现有 javascript 库之一。我最喜欢的是与[DataTables 数据管理器插件](http://jquery-datatables-editable.googlecode.com/svn/trunk/index.html)或[jEditable](http://datatables.net/examples/api/editable.html)插件配对的[DataTables](http://www.datatables.net/) jQuery插件

# android - 如何以编程方式在Android中禁用触摸振动和声音？

> ID：14555413
> 
> 赞同：4
> 
> 时间：2013-01-28T04:26:10.253
> 
> 标签：android

我正在制作一个应用程序并使用 ImageView 的 OnLongClickListener 和 ontouch 缩放打开警报对话框。但是当我按下长而不是振动时，是否可以关闭长按监听器的振动。我正在使用以下代码：

```
public OnLongClickListener longClick = new View.OnLongClickListener() {

    @Override
    public boolean onLongClick(View v) {
        Vibrator vibe = (Vibrator)DailySatsangActivity.this.getSystemService(Context.VIBRATOR_SERVICE) ;
        vibe.cancel();
        }
    }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T04:45:11.907

我认为您面临的问题是**触觉反馈**，而不是正常的振动。

您可以使用以下代码关闭“触觉反馈”，

**XML 属性：** `android:hapticFeedbackEnabled //set it true or false in view's xml file for the desired result.`

**Java方法：** `setHapticFeedbackEnabled(boolean)`

**或者**

您可以使用**Audio Manger**类来禁用声音和振动，请查看 Audio Manager 类的[setRingerMode](http://developer.android.com/reference/android/media/AudioManager.html#setRingerMode%28int%29)方法。

**例子 ：**

```
AudioManager aManager=(AudioManager)getSystemService(AUDIO_SERVICE);
aManager.setRingerMode(aManager.RINGER_MODE_SILENT); 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:32:30.080

您应该为此使用[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html)类。

# javascript - 如何随机排序列表项？

> ID：14555415
> 
> 赞同：9
> 
> 时间：2013-01-28T04:26:13.717
> 
> 标签：javascript, jquery, sorting, random, html-lists

我目前有这个随机排序列表项的代码：

```
var $ul = $('#some-ul-id');
$('li', $ul).sort(function(){
   return ( Math.round( Math.random() ) - 0.5 )
}).appendTo($ul); 
```

但是，有没有更好的解决方案呢？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-28T04:29:10.360

看看[这个问答线程](https://stackoverflow.com/questions/1533910/randomize-a-sequence-of-div-elements-with-jquery#11766418)。我通过用户喜欢这个解决方案`gruppler`：

```
$.fn.randomize = function(selector){
    var $elems = selector ? $(this).find(selector) : $(this).children(),
        $parents = $elems.parent();

    $parents.each(function(){
        $(this).children(selector).sort(function(){
            return Math.round(Math.random()) - 0.5;
        // }). remove().appendTo(this); // 2014-05-24: Removed `random` but leaving for reference. See notes under 'ANOTHER EDIT'
        }).detach().appendTo(this);
    });

    return this;
}; 
```

**编辑：**下面的使用说明。

随机化`<li>`每个 '.member' 中的所有元素`<div>`：

```
$('.member').randomize('li'); 
```

随机化每个的所有孩子`<ul>`：

```
$('ul').randomize(); 
```

**另一个编辑：** [`akalata`](https://stackoverflow.com/questions/14555415/how-to-randomly-sort-list-items/14555430#comment35262874_14555430)在评论中让我知道`detach()`可以使用而不是`remove()`主要好处是如果任何数据或附加的侦听器连接到一个元素并且它们是随机的，`detach()`将它们保持在适当的位置。`remove()`只会把听众扔出去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T11:55:20.187

我也坚持在谷歌上搜索并遇到一个代码的此类问题。我修改此代码以供我使用。我还包括 15 秒后的随机播放列表。

```
<script>
 // This code helps to shuffle the li ...
(function($){
       $.fn.shuffle = function() {
         var elements = this.get()
         var copy = [].concat(elements)
         var shuffled = []
         var placeholders = []
         // Shuffle the element array
         while (copy.length) {
           var rand = Math.floor(Math.random() * copy.length)
           var element = copy.splice(rand,1)[0]
           shuffled.push(element)
         }

         // replace all elements with a plcaceholder
         for (var i = 0; i < elements.length; i++) {
           var placeholder = document.createTextNode('')
           findAndReplace(elements[i], placeholder)
           placeholders.push(placeholder)
         }

         // replace the placeholders with the shuffled elements
         for (var i = 0; i < elements.length; i++) {
           findAndReplace(placeholders[i], shuffled[i])
         }

         return $(shuffled)
       }

       function findAndReplace(find, replace) {
         find.parentNode.replaceChild(replace, find)
       }

       })(jQuery);

       // I am displying the 6 elements currently rest elements are hide.

       function listsort(){
       jQuery('.listify_widget_recent_listings ul.job_listings').each(function(index){
         jQuery(this).find('li').shuffle();
         jQuery(this).find('li').each(function(index){
           jQuery(this).show();
           if(index>=6){
             jQuery(this).hide();
           }
         });
       });
       }
       // first time call to function ...
       listsort();
       // calling the function after the 15seconds.. 
       window.setInterval(function(){
         listsort();
         /// call your function here 5 seconds.
       }, 15000);                 
</script> 
```

希望这个解决方案有帮助..祝您工作愉快..

# python - 如何将多个参数传递给 web.py 的渲染

> ID：14555416
> 
> 赞同：0
> 
> 时间：2013-01-28T04:26:16.290
> 
> 标签：python, templates, jinja2, web.py

我正在使用`Jinja2`并`web.py`遇到了一个看似简单的问题。我正在渲染我的参数化 html 文件，并且似乎无法弄清楚如何在不输入每个参数作为参数的情况下传递多个参数 = 值对。我尝试传入一个`dict`字符串列表，但没有成功。

如果我想渲染`home.html`有五个需要值的参数，我怎样才能传递它们的值而不必将`param1=value1, param2=value2`参数作为参数输入 reder.home() 函数？

我希望这样的事情会起作用：

```
from web.contrib.template import render_jinja
render = render_jinja('templates', encoding = 'utf-8',)

p = {}
p['param1'] = 56
p['param2'] = 'something'
...

render.home(p) 
```

PS。`web.py`模板示例似乎只涵盖了单个参数示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:50:49.343

你可以使用字典扩展，像这样

```
render.home(**p) 
```

# php - 如何根据相应选项的下拉列表进行 php 或 html 选择操作？

> ID：14555418
> 
> 赞同：-1
> 
> 时间：2013-01-28T04:26:23.203
> 
> 标签：php, html, select, drop-down-menu, option

我正在从事一个项目，并且一直被困在一个简单的问题上，该问题需要一个简单的解决方案，而我急需帮助。我正在尝试设计一个表单，其中将有一个下拉列表，其中包含“google”、“yahoo”和“bing”作为选项，当用户单击提交按钮时，将搜索在文本框中输入的文本在相应的网站（如 google 或 yahoo 或 bing ）中。这是代码。

```
 echo "<form class=\"form\"  METHOD=\"GET\" ACTION=\"http://www.google.com/search\" TARGET=\"_blank\"\">"; 
echo "<input type=\"Text\" name=\"q\" size=\"25\" maxlength=\"255\" class=\"Ft\">\n"; 

echo "</td>\n"; 
echo "\n"; 
echo "<td valign=\"baseline\" style=\"background-color:#E6EAE9;\">\n"; 
echo "<div class=\"styled\"> \n"; 
echo "<select>\n"; 
echo "  <option value=\"Google\">Google</option>\n"; 
echo "  <option value=\"Yahoo\">Yahoo</option>\n"; 
echo "  <option value=\"Bing\">Bing</option>\n"; 
echo "  \n"; 
echo "</select>\n"; 
```

我想要做的是，当用户键入文本并选择选项然后单击提交按钮时，它将转到相应的搜索网站 google 或 yahoo 或 bing。如果您有类似的 html/php 解决方案来完成此操作，请告诉我或发布链接。

请发布您的答案或建议，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:40:22.900

这是一个 JavaScript 解决方案。

**HTML**：

```
<select id="search">
    <option value="http://google.com/">Google</option>
    <option value="http://yahoo.com/">Yahoo</option>
    <option value="http://bing.com/">Bing</option>
</select>

<input type="submit" id="submitBtn"> 
```

**没有提交的 JS**：

```
var selectSearch = document.getElementById('search');

selectSearch.onchange = function() {
  window.location = selectSearch[selectSearch.selectedIndex].value;
}; 
```

**带有提交的 JS**：

```
var selectSearch = document.getElementById('search');
var submitBtn = document.getElementById('submitBtn');

submitBtn.onclick = function() {
  window.location = selectSearch[selectSearch.selectedIndex].value;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:32:06.070

如果我正确阅读了您的代码，用户将因为您的表单操作而链接到 Google。你可以做的是将它们链接到一个单独的页面（例如redirect.php）。从redirect.php 中，从您的选择中读取您的POST 输入以找出他们选择的内容。从那里，相应地重定向。希望我正确理解了你的问题。

# java - 控制我的 Jar 的进程名称

> ID：14555425
> 
> 赞同：3
> 
> 时间：2013-01-28T04:28:24.760
> 
> 标签：java

我想知道有什么方法可以控制我的 jar 启动的进程的名称，即
我在 java 中创建了一个 .jar 文件，每当我点击它时，它都会导致一个名为 javaw.exe 的进程，我想要来控制这个名字。我想这样做是因为当我单击我的 jar 文件时，如果它已经在运行，它应该停止并且应该启动一个新的，即，我想在每次单击它时通过停止前一个来运行一个新线程（进程） . 如果我终止名为 javaw.exe 的进程，所有名为 javaw.exe 的进程都会死掉（如果我正在运行多个程序）。所以，我需要改变它的名字。请帮忙。谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:32:53.173

`javaw`跑步 没什么不好。[从文档中](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)：

> javaw 命令与 java 相同，只是 javaw 没有关联的控制台窗口。当您不希望出现命令提示符窗口时，请使用 javaw。但是，如果由于某种原因启动失败，javaw 启动器将显示一个包含错误信息的对话框。

最终，`javaw`在没有控制台窗口的情况下运行您的程序。更改该名称可能会在以后导致一些严重的问题，因此您希望保留该特定程序名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:38:19.357

为什么要重新发明轮子？已经有一些标准方法可以防止同一程序的两个副本运行。通常它涉及创建一个“标志”文件，因为文件系统保证目录更新是原子的。在类 UNIX 系统上，该文件是 /var/run/program-name.pid。如果它已经存在，那么第二个副本将退出并出现错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T06:22:23.427

您可以设置一个控制器进程来管理您的实例：

首先，您尝试通过 tcp/ip 在特定端口（从现在开始您的程序“名称”）连接到 localhost 上的控制器，如果成功，则向该控制器发送一条消息，如“新实例已启动”。如果连接不成功，则在当前 vm 中启动一个新的控制器线程（并将消息再次发送到该线程）

控制器循环，等待消息，如果一个匹配“新实例启动”，它会按照您的描述进行。

可以使用简单的 ServerSocket、小型 HTTP 服务器或许多其他消息传递库轻松构建这样的控制器。

# javascript - 哪些视频播放器不需要文件格式转换？

> ID：14555429
> 
> 赞同：0
> 
> 时间：2013-01-28T04:28:54.773
> 
> 标签：javascript, jquery, html, html5-video

我想使用一个使用 html 5 和 flash 的视频播放器。现在视频播放器将显示在在线考试中，教师只需上传视频文件。我有基本的扩展验证，老师必须选择其中一个`.mp4, .ogg, .wav or .flv.`。

现在我希望视频播放器可以在所有主流浏览器上运行，并且我不希望用户为转换格式而烦恼。我想要一个可以在所有浏览器上立即适用于上述格式的视频播放器，而无需任何问题或转换。

有人可以推荐一个可以做到这一点的视频播放器吗？我尝试使用 jwplayer，但在上传 .mp4 文件后意识到，在我转换视频之前它不会显示视频。我不希望没有知识或没有访问权限的老师或学生能够做到这一点，这就是为什么我想要一个可以立即轻松使用的不同视频播放器的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:37:46.567

查看[video.js](http://videojs.com)或[mediaelement](http://mediaelementjs.com)。

使用 mediaelement，您可以使用单一格式（通过 Flash/Silverlight 后备）很好地覆盖浏览器，但是您可以获得各种浏览器（只是 oldIE 需要 flash）在本地播放带有 h264 和 webm 版本内容的视频。有关细分，请参阅[mediaelement 主页上的图表。](http://mediaelementjs.com/#devices)

理想情况下，您会获取用户的上传并将其转换为他们所需的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:38:46.267

不幸的是，并非所有主要浏览器都支持所有格式.. 它超出了播放器的开发人员。

[最好的解决方案是拥有一个服务器端视频转换器，将上传的视频转换为 3 种格式，并在像projekktor](http://www.projekktor.com/)这样的 html5 视频播放器中显示链接。

# android - 为什么我的常规 Tabhost 不能正常工作。动作酒吧夏洛克？

> ID：14555437
> 
> 赞同：0
> 
> 时间：2013-01-28T04:30:17.150
> 
> 标签：android, android-fragments, android-activity, actionbarsherlock, android-tabhost

我正在努力让一个简单的 tabhost 与 ABS 一起工作，似乎 Android 在尝试“改进”它们时只会使事情变得更加复杂。我正在考虑将我的项目转换为在标签中使用片段，但事实证明，对于我在每个标签中使用的复杂布局来说，这是一种方式。我现在只需要一个普通的 ol 工作 tabhost w。工作腹肌吧。

```
package com.abs.tabs.fragments;

import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.Toast;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;

import com.actionbarsherlock.view.MenuItem;
import com.buhz.feeds.Buhdz;
import com.buhz.login.R;
import com.buhzhyve.localz.Localz;
import com.buhzhyve.trails.Trails;
import com.buhzhyve.trendz.Trendz;

public class FragmentTabs extends SherlockActivity {
    ActionBar actionBar;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
         setTheme(SampleList.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabs);

        actionBar=getSupportActionBar();

         Resources res = getResources(); // Resource object to get Drawables

            TabHost tabHost =(TabHost) findViewById(android.R.id.tabhost);  // The activity TabHost

            TabHost.TabSpec spec;  // Resusable TabSpec for each tab

            Intent intent;  // Reusable Intent for each tab

            // Do the same for the other tabs

            intent = new Intent().setClass(this, Buhdz.class);

            spec = tabHost.newTabSpec("Buhdz").setIndicator("Feeds",

                              res.getDrawable(R.drawable.buhdz_tab_icon))

                          .setContent(intent);

            tabHost.addTab(spec);

         // Do the same for the other tabs

            intent = new Intent().setClass(this, Localz.class);

            spec = tabHost.newTabSpec("Localz").setIndicator("Locals",

                              res.getDrawable(R.drawable.locals_tab_icon))

                          .setContent(intent);

            tabHost.addTab(spec);

            intent = new Intent().setClass(this, Trendz.class);

            spec = tabHost.newTabSpec("Trendz").setIndicator("Trends",

                              res.getDrawable(R.drawable.trends_tab_icon))

                          .setContent(intent);

            tabHost.addTab(spec);

            intent = new Intent().setClass(this, Localz.class);

            spec = tabHost.newTabSpec("convos").setIndicator("Convos",

                              res.getDrawable(R.drawable.convos_tab_icon))

                          .setContent(intent);

            tabHost.addTab(spec);

         // Create an Intent to launch an Activity for the tab (to be reused)

            intent = new Intent().setClass(this, Trails.class);

            // Initialize a TabSpec for each tab and add it to the TabHost

            spec = tabHost.newTabSpec("Trails").setIndicator("Trails",

                              res.getDrawable(R.drawable.trails_tab_icon))

                          .setContent(intent);

            tabHost.addTab(spec);
            tabHost.setCurrentTab(4);
    }

    @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);
        return super.onCreateOptionsMenu(menu);
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.item1:
            return true;
        case R.id.subItem1:
            Toast.makeText(this, "Sub Menu item 1 tapped", Toast.LENGTH_SHORT).show();
            return true;
        case R.id.subItem2:
            Toast.makeText(this, "Sub Menu item 2 tapped", Toast.LENGTH_SHORT).show();
            return true;
        default:
            break;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:36:13.537

1.  使用这个库：[https](https://github.com/JakeWharton/Android-ViewPagerIndicator) ://github.com/JakeWharton/Android-ViewPagerIndicator ，你可以在这个库中找到一些带有你想要的标签的示例，并与 sherlockactionbar 一起使用。
2.  访问这个问题：[Actionbarsherlock + 选项卡 + 多片段？](https://stackoverflow.com/questions/10082163/actionbarsherlock-tabs-multi-fragments).
3.  问我你有没有麻烦。

# android - 在 Android 上截取部分截图？

> ID：14555439
> 
> 赞同：7
> 
> 时间：2013-01-28T04:30:20.313
> 
> 标签：android, screenshot

我想保存当前屏幕的位图供我的用户共享，但我只想做一部分（我想删除具有用户按钮等的区域）。

我找到了完整截图的代码，但无法弄清楚如何做到这一点。

希望有一些我只是想念的简单的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T04:36:11.043

将要截取屏幕截图的部分区域放在`ViewGRoup`say`RelativeLayout`中。然后，当您启动时，请`Activity`确保按如下方式构建绘图缓存

```
relativeLayout = (RelativeLayout)findViewById(R.id.relativeLayout);
        relativeLayout.setDrawingCacheEnabled(true);
        relativeLayout.buildDrawingCache(); 
```

然后，当您实际上想要截取该特定区域的屏幕截图时，只需`Bitmap`从绘图缓存中以 a 的形式获取屏幕截图

```
bitmap = relativeLayout.getDrawingCache(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T08:35:57.370

您可以将元素放置在您想要在屏幕截图中的框架布局中。然后您可以截取 Frame 布局的屏幕截图。

你可以参考这个链接：[http ://divyamotiwala.blogspot.in/2013/10/taking-screenshot-of-layout-in-android.html](http://divyamotiwala.blogspot.in/2013/10/taking-screenshot-of-layout-in-android.html)

# android - Andengine 唤醒锁

> ID：14555440
> 
> 赞同：3
> 
> 时间：2013-01-28T04:30:22.523
> 
> 标签：android, andengine

`WAKE_LOCK`在 AndEngine中给予许可是强制性的吗？如果我尝试删除此`WAKE_LOCK`权限，则会收到 SecurityException。

日志错误：

```
01-28 09:57:48.417: DEBUG/dalvikvm(166): Added shared lib /system/lib/libjni_latinime.so 0x437577d0
01-28 09:59:02.966: ERROR/AndEngine(225): You have to add
01-28 09:59:02.966: ERROR/AndEngine(225):     <uses-permission android:name="android.permission.WAKE_LOCK"/>
01-28 09:59:02.966: ERROR/AndEngine(225): to your AndroidManifest.xml !
01-28 09:59:02.966: ERROR/AndEngine(225): java.lang.SecurityException: Neither user 10024 nor current process has android.permission.WAKE_LOCK.
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.os.Parcel.readException(Parcel.java:1218)
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.os.Parcel.readException(Parcel.java:1206)
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.os.IPowerManager$Stub$Proxy.acquireWakeLock(IPowerManager.java:178)
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.os.PowerManager$WakeLock.acquire(PowerManager.java:228)
01-28 09:59:02.966: ERROR/AndEngine(225):     at org.anddev.andengine.ui.activity.BaseGameActivity.acquireWakeLock(BaseGameActivity.java:200)
01-28 09:59:02.966: ERROR/AndEngine(225):     at org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:166)
01-28 09:59:02.966: ERROR/AndEngine(225):     at org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:83)
01-28 09:59:02.966: ERROR/AndEngine(225):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2027)
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.view.View.dispatchWindowFocusChanged(View.java:3694)
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:655)
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1782)
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.os.Looper.loop(Looper.java:123)
01-28 09:59:02.966: ERROR/AndEngine(225):     at android.app.ActivityThread.main(ActivityThread.java:4203)
01-28 09:59:02.966: ERROR/AndEngine(225):     at java.lang.reflect.Method.invokeNative(Native Method)
01-28 09:59:02.966: ERROR/AndEngine(225):     at java.lang.reflect.Method.invoke(Method.java:521)
01-28 09:59:02.966: ERROR/AndEngine(225):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
01-28 09:59:02.966: ERROR/AndEngine(225):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
01-28 09:59:02.966: ERROR/AndEngine(225):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:39:07.577

不需要，请参阅：[https](https://github.com/nicolasgramlich/AndEngine/blob/GLES2-AnchorCenter/src/org/andengine/engine/options/WakeLockOptions.java#L24) ://github.com/nicolasgramlich/AndEngine/blob/GLES2-AnchorCenter/src/org/andengine/engine/options/WakeLockOptions.java#L24 。使用`SCREEN_ON`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T17:48:02.200

无需设置wakelock权限，但必须设置，因为如果屏幕计时器到期（例如15或20秒），屏幕将空白，中断游戏，您必须再次打开（唤醒）手机。所以，是必须的。

# sql - jsp中的空指针异常

> ID：14555441
> 
> 赞同：-2
> 
> 时间：2013-01-28T04:30:37.487
> 
> 标签：sql, oracle, jsp, nullpointerexception, dao

```
org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet UserController threw exception
java.lang.NullPointerException
at com.nic.sample.dao.UserDAO.getAllUsers(UserDAO.java:69)
at com.nic.sample.controller.UserController.doGet(UserController.java:44)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
at org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:709)
at org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:680)
at org.apache.jsp.index_jsp._jspService(index_jsp.java:64)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662) 
```

当我运行我的应用程序时出现上述错误，我正在使用 dao 从数据库中获取数据到 jsp，我不知道为什么会出现此错误。需要帮忙。我的jsp和DAO代码如下

我的 jsp 文件 listuser.jsp

```
<%@ page language="java" contentType="text/html; charset=EUC-KR" pageEncoding="EUC-KR"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>

<%@page errorPage="error.jsp" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01    Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">
<title>Show All Users</title>
</head>
<body>
<table border=1>
    <thead>
        <tr>
            <th>User Id</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>DOB</th>
            <th>Email</th>
            <th colspan=2>Action</th>
        </tr>
    </thead>
    <tbody>
        <c:forEach items="${users}" var="user">
            <tr>
                <td><c:out value="${user.userid}" /></td>
                <td><c:out value="${user.firstName}" /></td>
                <td><c:out value="${user.lastName}" /></td>
                <td><fmt:formatDate pattern="yyyy-MMM-dd" value="${user.dob}" /></td>
                <td><c:out value="${user.email}" /></td>
                <td><a href="UserController?action=edit&userId=<c:out value="${user.userId}"/>">Update</a></td>
                <td><a href="UserController?action=delete&userId=<c:out value="${user.userId}"/>">Delete</a></td>
            </tr>
        </c:forEach>
    </tbody>
</table>
<p><a href="UserController?action=insert">Add User</a></p> 
```

我的 UserDAO.java

```
package com.nic.sample.dao;

public class UserDAO {

private Connection connection;

public UserDAO() {
    connection = DbUtil.getConnection();
}

public void addUser(User user) {
    try {
        PreparedStatement preparedStatement = connection.prepareStatement("insert into users(firstname,lastname,dob,email) values (?, ?, ?, ? )");
        // Parameters start with 1
        preparedStatement.setString(1, user.getFirstName());
        preparedStatement.setString(2, user.getLastName());
        preparedStatement.setDate(3, new java.sql.Date(user.getDob().getTime()));
        preparedStatement.setString(4, user.getEmail());
        preparedStatement.executeUpdate();

    } catch (SQLException e) {
        e.printStackTrace();
    }
}

public void deleteUser(int userId) {
    try {
        PreparedStatement preparedStatement = connection.prepareStatement("delete from users where userId=?");
        // Parameters start with 1
        preparedStatement.setInt(1, userId);
        preparedStatement.executeUpdate();

    } catch (SQLException e) {
        e.printStackTrace();
    }
}

public void updateUser(User user) {
    try {
        PreparedStatement preparedStatement = connection
                .prepareStatement("update users set firstname=?, lastname=?, dob=?, email=?" +
                        "where userid=?");
        // Parameters start with 1
        preparedStatement.setString(1, user.getFirstName());
        preparedStatement.setString(2, user.getLastName());
        preparedStatement.setDate(3, new java.sql.Date(user.getDob().getTime()));
        preparedStatement.setString(4, user.getEmail());
        preparedStatement.setInt(5, user.getUserid());
        preparedStatement.executeUpdate();

    } catch (SQLException e) {
        e.printStackTrace();
    }
}

public List<User> getAllUsers() {
    List<User> users = new ArrayList<User>();
    try {
        Statement statement = connection.createStatement();
        ResultSet rs = statement.executeQuery("select * from users");
        while (rs.next()) {
            User user = new User();
            user.setUserid(rs.getInt("userid"));
            user.setFirstName(rs.getString("firstName"));
            user.setLastName(rs.getString("lastName"));
            user.setDob(rs.getDate("dob"));
            user.setEmail(rs.getString("email"));
            users.add(user);
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    return users;
}

public User getUserById(int userId) {
    User user = new User();
    try {
        PreparedStatement preparedStatement = connection.
                prepareStatement("select * from users where userid=?");
        preparedStatement.setInt(1, userId);
        ResultSet rs = preparedStatement.executeQuery();

        if (rs.next()) {
            user.setUserid(rs.getInt("userid"));
            user.setFirstName(rs.getString("firstName"));
            user.setLastName(rs.getString("lastName"));
            user.setDob(rs.getDate("dob"));
            user.setEmail(rs.getString("email"));
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    return user;
}
} 
```

请任何人帮助我，我真的被困在这里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:25:30.133

在您的 getAllUsers 方法`connection.createStatement();`中，连接可能为空。

除此之外一切都很好。调试它以确保..

最后也按照这个链接

[http://www.vogella.com/articles/EclipseDebugging/article.html](http://www.vogella.com/articles/EclipseDebugging/article.html)

# opengl - OpenGL：使用 GL_QUADS 或 GL_TRIANGLES 更有效吗？

> ID：14555446
> 
> 赞同：5
> 
> 时间：2013-01-28T04:31:17.067
> 
> 标签：opengl, geometry, gpu

我知道 OpenGL 在较新的版本中已弃用并删除了 GL_QUADS。我听说这是因为现代 GPU 仅使用三角形进行渲染，因此调用四边形只会使 GPU 更加努力地将其分成两个三角形（无论如何我都听说过，我不是任何方面的专家）这个话题）。

我想知道是自己手动将四边形渲染分解为两个三角形还是让 GPU 自己完成是否更好（假设普通人的 CPU 相对比他们的 GPU 更快）。同样，我刚开始时完全没有真正的 OpenGL 经验。我宁愿知道这些天对于大多数机器来说哪个更好，这样我就可以将注意力集中在任何一种渲染方法上*。谢谢。

*但我可能会为此使用“三角形方法”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T08:20:39.113

即使您输入 OpenGL 四边形，三角化也是由 CPU 端的驱动程序在它到达 GPU 之前完成的。如今，现代 GPU 除了三角形之外什么都不吃。（嗯，还有线和点。）所以有些东西会三角测量，无论是你还是司机——它发生在哪里并不重要。

如果不重用顶点缓冲区，而是每次都用四边形重新填充它们（在这种情况下，驱动程序将不得不重新三角化每个顶点缓冲区），而不是每次都用预三角化的三角形重新填充它们，那么效率会降低。时间，但这是非常人为的（在这种情况下您应该解决的问题只是您正在重新填充顶点缓冲区的事实）。

我想说，如果你有选择的话，坚持使用三角形，因为这是大多数内容管道无论如何都会输出的，而且你不太可能遇到非平面四边形等问题。如果您要选择内容的格式，那么一定要使用三角形，然后完全跳过三角测量步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:29:39.980

任何几何图形都可以用三角形表示，这就是为什么决定使用三角形而不是四边形的原因。另一个原因是两个三角形不必共面，这对于四边形不是真的。

是的，您选择渲染四边形，但驱动程序会将四边形转换为两个三角形。

因此，通过选择渲染四边形不会减少 GPU 的工作量，而是会使您的 CPU 工作量更多，因为它必须进行转换。

# spring-mvc - Spring MVC 注解配置

> ID：14555450
> 
> 赞同：0
> 
> 时间：2013-01-28T04:31:51.327
> 
> 标签：spring-mvc

我正在尝试创建一个简单的 spring mvc 应用程序进行练习，但我不断收到此错误：

在名为“mvc-dispatcher”的 DispatcherServlet 中找不到带有 URI 的 HTTP 请求的映射，我从 Tomcat 收到 404 错误。

这是我的 mvc-dispatcher-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns="http://www.springframework.org/schema/beans"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd" >

<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

<mvc:annotation-driven />

<context:component-scan base-package="controllers" />

<bean
    id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver" >

    <property
        name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />

    <property
        name="suffix"
        value=".jsp" />
</bean>

</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">  
<servlet>
<servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
</context-param>
<listener>
   <listener-class>
      org.springframework.web.context.ContextLoaderListener
   </listener-class>
</listener>

</web-app> 
```

这是我的控制器

```
package controllers;

import org.springframework.stereotype.Controller;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping("/welcome.do")
public class HelloWorldController{

@RequestMapping(method=RequestMethod.GET)
public ModelAndView helloWorld(){
    System.out.println("**Hit controller**");
    ModelAndView model = new ModelAndView("spring");
    model.addObject("msg", "hello world");
    return model;
}
} 
```

在调度程序 servlet 中使用 bean 时，我可以让控制器工作，但由于某种原因，我无法使用注释获得正确的处理程序映射。我是否在猜测我的 mvc-dispatcher-servlet.xml 文件中有一些东西把事情搞砸了，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:03:17.293

您的“mvc-dispatcher-servlet.xml”看起来正确，它对我有用。确保您使用正确的网址。你可以看看这个简单的例子[Spring MVC Hello World Annotation Example](http://www.mkyong.com/spring-mvc/spring-mvc-hello-world-annotation-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T09:46:17.023

首先使用以下内容交叉检查您的包名称

`<context:component-scan base-package="controllers" />`

可能有可能不正确，base-package 表示完整的包路径，如“org.self.etc”

如果正确，则将此行放在上面`<mvc:annotation-driven />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-05T21:36:57.077

为父弹簧上下文设置弹簧配置。

MVC 仅适用于 ServletDispatcher：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">  
<servlet>

<servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>

<servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>

<listener>
   <listener-class>
      org.springframework.web.context.ContextLoaderListener
   </listener-class>
</listener>

</web-app> 
```

# android - 卸载后删除了android SQLite数据库

> ID：14555451
> 
> 赞同：5
> 
> 时间：2013-01-28T04:31:53.587
> 
> 标签：android, sqlite

我想知道一件事与android中的sqlite相关。

当我安装我的应用程序并运行它并执行我的操作时，会保存一些数据并读取数据。

但是当我卸载我的应用程序并再次安装它时。

我试图读取数据，但它没有显示任何东西。这意味着卸载应用程序时删除了数据库。

如果是，如何防止我的数据库卸载。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T04:35:35.467

我假设您像大多数应用程序一样在内部存储上创建数据库。

当您卸载您的应用程序时，该应用程序的整个数据目录将被删除。这包括数据库、首选项、其他文件、缓存等。

您可以尝试将数据库保存到 SD 卡并从那里读取。但是，如果用户更改 SD 卡或将其安装到计算机蜂窝前，您现在将无法访问数据库。

另一种选择是定期将其备份到服务器并从那里手动恢复备份，或者实现类似[Google BackupAgent](http://developer.android.com/google/backup/index.html)的功能，如果用户将他/她的设备配置为针对 Google 帐户进行备份，它将自动备份数据它是注册的。

如果您担心您的数据被其他人读取，请使用 AES 或其他加密技术对其进行加密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T04:35:53.993

很简单，使用 Google 备份[服务](http://developer.android.com/google/backup/index.html)或将其存储在其他地方，例如您的服务器或用户 sd 卡中。

# symfony - 使用带有 FosUser Bundle 的单选按钮

> ID：14555452
> 
> 赞同：0
> 
> 时间：2013-01-28T04:31:58.527
> 
> 标签：symfony, fosuserbundle

我正在尝试使用单选按钮..

> x 男 x 女

我知道我可以使用下拉框、复选框等，但我需要根据我的规格使用单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:36:12.187

你可以使用类似的[东西](https://stackoverflow.com/questions/13374603/prevent-radio-widgets-from-rendering-labels-with-symfony2)。

# c# - 如何通过 ASP.NET C# 上的对话框表单选择目录路由？

> ID：14555454
> 
> 赞同：1
> 
> 时间：2013-01-28T04:32:24.067
> 
> 标签：c#, asp.net, browser, dialog, directory

我需要放置一个按钮，该按钮将打开一个对话框表单，您可以在该按钮上浏览 Windows 目录以选择一个 ROUTE（例如 c:\Windows）并将所有文件夹的可用文件放在一个列表框上。

这是在 ASP.NET 上的 Web 应用程序上完成的。我已经查找了浏览器的示例，有些是用于 Windows 窗体的，但我还没有找到用于 ASP.NET 的示例（我知道有 fileupload 或其他类似的，但是那些，你必须选择一个文件，其中在我的示例中，我只需要指定一条路线）。

希望你能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:45:25.953

ASP.NET 中没有可用的特定控件来实现此目的，但您可以从 Windows 窗体控件派生它。请看一下示例 - [http://www.netomatix.com/FolderBrowser.aspx](http://www.netomatix.com/FolderBrowser.aspx)

# hibernate - Hibernate中带有HashSet的HQL where子句（我使用hbm，xml进行映射）

> ID：14555457
> 
> 赞同：0
> 
> 时间：2013-01-28T04:32:38.190
> 
> 标签：hibernate, hql

我有两张桌子`Item_category`和`site_items`. `Item_category`与to存在一对多关系`site_items`。`Item_category`和包含的 POJO 类

```
Set<SiteItems> items = new HashSet<SiteItems>(); 
```

我真正的问题是当我查询要`Set<SiteItems>`在 where 子句中添加条件的两个表时。IE; 我想通过匹配`item_category`pkey`site_items`和`SiteItems.siteItemLevel='CAT'`.

我目前的查询是

```
from ItemCategory where items.itemLevel='CAT' 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:59:39.807

由于 Item_category 的 POJO 类包含

```
Set<SiteItems> items = new HashSet<SiteItems>(); 
```

所以查询应该是

```
from ItemCategory where ItemCategory.items.itemLevel='CAT' 
```

# c# - 与 C#.net 打印相关

> ID：14555458
> 
> 赞同：-3
> 
> 时间：2013-01-28T04:32:40.983
> 
> 标签：c#, c#-4.0

我的标签页上有一些文字，为了打印该标签页，我将其转换为图像并将该图像作为打印件，因此打印后该文本不清楚

PrintdDocument 上的代码是

```
private void printDocument1_PrintPage(object sender,System.Drawing.Printing.PrintPageEventArgs e)

{
    Bitmap btmp = new Bitmap(this.tabPage1.Width, this.tabPage1.Height);
    tabPage1.DrawToBitmap(btmp, new Rectangle(0,0, this.tabPage1.Width, this.tabPage1.Height));
    e.Graphics.DrawImage(btmp, 0,150);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:36:25.130

如果您想要更好看的文本，请将其绘制在高分辨率图像上。更好的是，直接将文本输出到 e.graphics 而不先转到图像。

# java - 仍在使用 Android 登录

> ID：14555465
> 
> 赞同：-1
> 
> 时间：2013-01-28T04:33:22.457
> 
> 标签：java, php, android, mysql, login

再说一次，在我之前的帖子中，有人告诉我在代码中使用 AsyncTask，以避免 mainexceptionthread，现在我遇到了这个错误：

**

```
01-26 09:39:06.220: E/AndroidRuntime(17218): FATAL EXCEPTION: AsyncTask #1
01-26 09:39:06.220: E/AndroidRuntime(17218): java.lang.RuntimeException: An error occured while executing doInBackground()
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at java.lang.Thread.run(Thread.java:856)
01-26 09:39:06.220: E/AndroidRuntime(17218): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4609)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:867)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.view.ViewGroup.invalidateChild(ViewGroup.java:4066)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.view.View.invalidate(View.java:10193)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.widget.TextView.invalidateRegion(TextView.java:4375)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.widget.TextView.invalidateCursor(TextView.java:4318)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.widget.TextView.spanChange(TextView.java:7172)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.widget.TextView$ChangeWatcher.onSpanAdded(TextView.java:8759)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.text.SpannableStringBuilder.sendSpanAdded(SpannableStringBuilder.java:979)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:688)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:588)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.text.Selection.setSelection(Selection.java:76)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.text.Selection.setSelection(Selection.java:87)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.text.method.ArrowKeyMovementMethod.initialize(ArrowKeyMovementMethod.java:302)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.widget.TextView.setText(TextView.java:3535)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.widget.TextView.setText(TextView.java:3405)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.widget.EditText.setText(EditText.java:80)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.widget.TextView.setText(TextView.java:3380)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at com.example.projectthesis.Main$phpconnect.doInBackground(Main.java:98)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at com.example.projectthesis.Main$phpconnect.doInBackground(Main.java:1)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-26 09:39:06.220: E/AndroidRuntime(17218):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-26 09:39:06.220: E/AndroidRuntime(17218):    ... 5 more 
```

**

我认为这是因为 Exception e 部分，它有 inputEmail.setText(e.toString()); 但是当我将它更改为仅 e.printstacktrace 时，它​​没有任何结果。你能帮我看看这些是我的代码：

安卓：

**

```
public class Main extends Activity {
    EditText inputEmail;
    EditText inputPassword;
    Button btnLogin;
    private ProgressDialog pDialog;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        inputEmail = (EditText) findViewById(R.id.inputEmail);
        inputPassword = (EditText) findViewById(R.id.inputPassword);
        Button btnLogin = (Button) findViewById(R.id.btnLogin);

        // button click event
        btnLogin.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // creating new product in background thread
                validation();
            }
        }); 
    }

    public void validation()
    {
        if(inputEmail.getText().toString().equals("") || inputPassword.getText().toString().equals(""))
                {
                Toast.makeText( getApplicationContext(),"Fill Empty Fields",Toast.LENGTH_SHORT ).show();
                }
        else
        {
             new phpconnect().execute();
        }
        }

    class phpconnect extends AsyncTask<String, String, String>{
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Main.this);
            pDialog.setMessage("Logging in..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
             ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("eadd", inputEmail.getText().toString()));
                postParameters.add(new BasicNameValuePair("password", inputPassword.getText().toString()));
                //Passing Parameter to the php web service for authentication
                //String valid = "1";
                String response = null;
                try {
                response = CustomHttpClient.executeHttpPost("http://10.0.2.2/TheCalling/log_in.php", postParameters);  //Enter Your remote PHP,ASP, Servlet file link
                String res=response.toString();
                //res = res.trim();
                res= res.replaceAll("\\s+","");
                //error.setText(res);
                if(res.equals("1"))
                {
                    Toast.makeText( getApplicationContext(),"Correct Username or Password",Toast.LENGTH_SHORT ).show();
                    Intent i = new Intent(Main.this,MainMenu.class);
                    startActivity(i);
                }
                    else
                        if(res.equals("0"))
                    {
                    Toast.makeText( getApplicationContext(),"Sorry!! Incorrect Username or Password",Toast.LENGTH_SHORT ).show();
                    }
                } catch (Exception e) {
                    inputEmail.setText(e.toString());
                }
            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        } 

    }

} 
```

**

这又是我的 PHP 代码：

**

```
<?php
include("db_config.php");
$eadd=addslashes($_POST['eadd']);
$password=addslashes($_POST['password']);
$sql="SELECT * FROM users WHERE eadd='$eadd' and password='$password'";
$result=mysql_query($sql);
$row=mysql_fetch_array($result);
$count=mysql_num_rows($result);
if($count==1)
    {
    echo "1";
    //(If result found send 1 to android)
    }
else
    {
    echo "0";
    //(If result not found send o to android)
    }
?> 
```

**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:39:59.670

由于以下原因，您会收到错误：

```
catch (Exception e) {
    inputEmail.setText(e.toString());
} 
```

在这里，您尝试通过从 AsyncTask 的后台线程更改 EditText 的内容来更改应用程序的 UI。由于我怀疑您是否真的想在电子邮件输入字段中向用户显示错误并且这样做只是为了调试目的，请尝试使用`e.printStackTrace()`而不是`inputEmail.setText(e.toString());`

此外，您需要将`Toast.show()`调用包装在`runOnUiThread()`可运行文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:40:42.820

您不能将 toast 消息`doInBackground`移至`onPostExecute`. 是的，这也是

```
catch (Exception e) {
                    inputEmail.setText(e.toString());
                } 
```

# directx - D3DFVF_XYZRHW directx fvf 格式

> ID：14555467
> 
> 赞同：1
> 
> 时间：2013-01-28T04:33:42.263
> 
> 标签：directx

顶点结构

```
struct Vertex
{
    float x, y, z;
    float rhw;
    D3DCOLOR diffuse;
    float u, v;
    Vertex(){}
    Vertex(float px, float py, D3DCOLOR pdiffuse, float pu, float pv)
    {
        x = px; y = py; z = 0.0f;
        rhw = 1.0f;
        diffuse = pdiffuse;
        u = pu; v = pv;
    }
    static const DWORD FVF;
};
const DWORD Vertex::FVF = D3DFVF_XYZRHW | D3DFVF_DIFFUSE | D3DFVF_TEX1; 
```

顶点数据

```
lpVbData[0] = Vertex(0.0f, 0.0f, 0xFF000000, 0.0f, 0.0f);
lpVbData[1] = Vertex(20.0f, 0.0f, 0xFF000000, 1.0f, 0.0f);
lpVbData[2] = Vertex(20.0f, 100.0f, 0xFF000000, 1.0f, 1.0f);
lpVbData[3] = Vertex(0.0f, 100.0f, 0xFF000000, 0.0f, 1.0f); 
```

**我的问题是矩形的大小应该是 20x100（宽 x 高）像素，但显示的是 20x97（宽 x 高）像素。为什么？谢谢。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:03:03.223

问题已解决。backbuffer 大小与窗口大小不匹配，忽略窗口的框架，因此 backbuffer 表面在窗口中缩放，显示的像素大小不正确。

# joomla - 在 joomla 2.5 中自动启用注册用户发布的文章

> ID：14555469
> 
> 赞同：0
> 
> 时间：2013-01-28T04:33:43.840
> 
> 标签：joomla, publish

我创建了一个网站，注册用户可以在其中发布文章。有没有办法让他们发布的文章自动启用，而不需要我作为管理员检查是否有新文章提交。

编辑1：通过将状态的mysql默认值从0设置为1来找到解决方案。但是，这是一个好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:48:56.853

发布的能力由 edit.state 权限控制。您可能希望为所有内容或仅允许他们发布的特定类别提供 edit.state 允许注册。

# matlab - Matlab中如何获取MSER的分层组件树？

> ID：14555471
> 
> 赞同：11
> 
> 时间：2013-01-28T04:33:54.127
> 
> 标签：matlab, image-processing, computer-vision, matlab-cvst

[使用detectMSERFeatures](http://www.mathworks.in/help/vision/ref/detectmserfeatures.html)从 Matlab 中的图像中找到最大稳定极值区域 (MSER) 。

是否有任何补丁或方法可以从 Matlab获取**分层 MSER 组件树？**

这棵树无论如何都是在 Matlab 计算区域时生成的——它只返回每个区域树中最“稳定”的组件。由于这棵树已经存在，我正在寻找将其公开给来自 Matlab 库的用户代码的方法，这使这部分保持隐藏并仅提供最终的“最大稳定”区域。

任何事情都是可以接受的——修改 Matlab 内置代码、补丁、hack 等等。（我意识到 OpenCV 有这样的补丁，但是我试图避免移植到 OpenCV，因为大多数其他程序都是用 Matlab 编写的）。

**编辑：（**来自原始的[分层 MSER 论文](http://www.cs.bris.ac.uk/Publications/Papers/2001440.pdf)）

![检测到的 MSER](../Images/1826865870ffd57f4500da178be6b260.png) ![MSER 树](../Images/ac48d313191dbce0396fcbee88eed21f.png)

`Detected MSERs`（左）、 `MSER Tree`（右）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-04T19:51:54.407

“分层 MSER 组件树”是一个令人困惑的短语，因为 (1) 组件树已经是分层的 (2) 如果您想要整个树，那么您不仅想要最大稳定极值区域 (MSER)，而是您想要所有的极值区域，并且（3）极值区域和组件在这种情况下是相同的。

因此，假设您想要极值区域树。如评论中所述，您不能完全使用 MATLAB，因为它`detectMSERFeatures.m`调用了一个我们没有源代码的 mex 函数（不过，根据它的输入和名称，它可能与 openCV MSER 函数非常相似） . 但是您仍然可以计算自己的极值区域树。基本上，这段代码所做的是在图像中以各种阈值级别查找连接的组件。这些CC是极值区域。代码中最棘手的部分是记录父关系。这应该让你开始：

```
% input image, included with MATLAB
x = imread('rice.png');

pixelList = {};
parents = [];
oldERsLabeled = zeros(size(x));
oldPixelList = {};
regionLabelOffset = 0;
for i = 255:-10:1 % the stride here is important, smaller will be slower and give more regions
    newERs = bwlabel(x > i);
    newERsLabeled = zeros(size(newERs));

    newERsLabeled(newERs > 0) = newERs(newERs > 0) + regionLabelOffset;
    regionLabelOffset = max(newERsLabeled(:));

    % update the list of regions
    props = regionprops(newERs, 'pixelList');
    newPixelList = {props(:).PixelList};
    pixelList = [pixelList newPixelList];

    % figure out parents
    newParents = cellfun(@(c)(newERsLabeled( sub2ind(size(x), c(1,2), c(1,1)))), oldPixelList);
    parents = [parents; newParents'];

    oldPixelList = newPixelList;
    oldERsLabeled = newERsLabeled;
end
parents(end+1 : length(pixelList)) = -1; % top level regions have no parents

pixelListInt = cellfun(@int32, pixelList, 'UniformOutput', false);
regions = MSERRegions(pixelListInt');

% plot the first 300 regions
figure
imshow(x)
hold on
plot(regions(1:300), 'showEllipses', false, 'showPixelList', true);

% show all parents of a region ("close all" command might be useful after)
curRegion = 102;
while curRegion ~= -1
    figure
    imshow(x)
    hold on
    plot(regions(curRegion), 'showEllipses', false, 'showPixelList', true);
    curRegion = parents(curRegion);
end 
```

# c++ - 在项目中包含 FreeType 字体支持

> ID：14555472
> 
> 赞同：0
> 
> 时间：2013-01-28T04:33:56.007
> 
> 标签：c++, freetype

抱歉，如果已经问过这个问题，但是我正在使用 C++/linux 在 linux 上制作程序，并且我想使用 FreeType 在屏幕上绘制文本。完成后，我将需要分发此程序。使用 FreeType 的最佳方法是什么？

*   制作一个下载/编译/安装freetype的脚本？
*   我可以以某种方式将其静态链接到我的程序吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T09:16:59.427

[从此处](http://download.savannah.gnu.org/releases/freetype/)下载库使用[此链接](https://stackoverflow.com/questions/19348127/freetype-how-to-rasterize-non-filled-outline/19949691#19949691)从 freeType 字形中提取边界点并使用任何图形库 X11/GDI 将其绘制在表面上，是的，您可以将其与程序静态链接。

# php - 如何调试 Yii 扩展？

> ID：14555480
> 
> 赞同：1
> 
> 时间：2013-01-28T04:35:02.520
> 
> 标签：php, yii, yii-extensions

我一直在用 Yii 困扰自己，目前基本上试图完成一个可以（ajax-）刷新到不同规模（如日、周或月）的数据图表。我真的很想使用[Amcharts 扩展](http://www.yiiframework.com/extension/eamchartwidget)，但基本上像[EFlot](http://www.yiiframework.com/extension/flot/)这样更简单的东西也可以。

现在，为了不解决我的独特问题，我似乎无法从扩展中生成任何类型的错误或调试消息（至少从我尝试过的这些中）。例如，当我尝试将一些未知变量或格式错误的数据传递给图表小部件时，它最终会为我绘制一张白纸，什么都没有。此处没有任何内容意味着保留了空间但未绘制图表，任何地方都没有看到错误消息。

我`CWebLogRoute`在我的主配置中启用了它，它可以在页面中正确显示实际的 Yii 错误，但对于扩展它不报告任何内容。

那么，在 Yii 中调试扩展的正确方法是什么？是否有一些我刚刚错过的通用接口，或者每个扩展都有自己的方式来提供错误和调试数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:24:13.477

如果您认为问题出在服务器端，您可以在配置文件中打开跟踪日志记录（默认为 protected/config/main.php）：

```
'log'=>array(
    'class'=>'CLogRouter',
        'routes'=>array(
                array(
                    'class'       => 'CFileLogRoute',
                    'levels'      => 'error, warning, trace'
                ),

         ),
 ), 
```

并在你的扩展中添加一些 Yii::trace() 调用：

```
class MyExtension {
    public function whatever() {
        Yii::trace("Inside MyExtension::whatever()", "MyExtension");
        // do some stuff
        Yii::trace("Inside MyExtension::whatever(), just did some stuff.", "MyExtension");
    }
} 
```

这会将跟踪调用插入到您的 application.log 文件中（默认情况下，它位于 protected/runtime/application.log 中）。它们看起来像这样：

> 2013/02/21 15:35:43 [trace] [MyExtension]
> /path/to/MyExtension.php (3) 中的 MyExtension::whatever() 2013/02/21 15:35:43 [trace] [MyExtension ] 在 MyExtension::whatever() 中，只是在 /path/to/MyExtension.php (5) 中做了一些事情

将您需要的任何内容放入痕迹中。我首先要确保您认为您从浏览器发送的数据实际上正在以您期望的形式到达它打算到达的功能。如果那里一切正常，那么是时候启动网络检查器（我更喜欢 Chrome）并观看“网络”选项卡。查看对服务器的请求和传递的响应。还要检查 JS 控制台以确保那里没有任何问题。

# http - 什么可以阻止此 cdn 文件加载到我的网页上？

> ID：14555482
> 
> 赞同：1
> 
> 时间：2013-01-28T04:35:07.973
> 
> 标签：http

我希望我有一种更通用的方式来问这个问题，但我真的不知道会发生什么。

使用开发通道 Chrome 26（和 IE 10）我在[这里的公共保管箱中点击了一个简单的 html 站点](https://dl.dropbox.com/u/108084/gigs/allinone/index.html)

在我的浏览器中 Handlebars.js（来自 cdnjs.com）永远不会加载，我得到一个错误。哎呀，根据“网络”选项卡，它甚至从不**尝试**加载它。然而，点击源代码和脚本文件——它绝对是一个实时链接。为什么是车把？此外，使用本地服务器运行相同的站点也可以正常加载。

我在这里不知所措可能*会*产生这种影响。您可能认为问题是在 Dropbox 中运行服务器，但它似乎是实际的浏览器行为不端。为什么它根本不提出任何要求？

顺便说一下，我的[仓库在性能调整分支的 github 上](https://github.com/codemkrs-team-name/codemkrs-challenge)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:56:38.670

看起来 Chrome 正在对您的脚本发出不安全的内容警告。很可能是因为您尝试访问通过 HTTP 托管的内容，而您的网站正在使用 ssl 从 Dropbox 提供服务。Chrome 安全设置很可能会静默阻止它认为“不安全”的脚本

# php - cakephp 数据库记录器 - 如何访问控制器变量？

> ID：14555483
> 
> 赞同：0
> 
> 时间：2013-01-28T04:35:12.847
> 
> 标签：php, cakephp, logging, cakephp-2.0

我正在按照 cakephp 文档来实现数据库记录器功能。在创建记录器类后，我得到了一切工作

```
app/Lib/Log/Engine/DatabaseLogger.php
```

并将这些行添加到引导程序

```
CakeLog::config('otherFile', array(
'engine' => 'DatabaseLogger',
'model' => 'LogEntry',
// ...
)); 
```

在此之后，我可以通过调用登录到数据库

```
CakeLog::info(message); 
```

一切正常，但后来我在尝试自动记录用户的用户名和 IP 地址时遇到了问题。我在网上搜索了许多解决方案，但似乎找不到答案。是否可以访问 DatabaseLogger 类中的控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:46:23.087

## 您不需要访问控制器

您需要的信息实际上是全局的，您无需访问控制器对象即可获取它。

### 客户端 IP

您可以使用[Router::getRequest](http://api.cakephp.org/class/router#method-RoutergetRequest)方法获取当前请求对象并从中检索客户端 IP：

```
$request = Router::getRequest();
$ip = $request->clientIp(); 
```

或者干脆使用[env](http://api.cakephp.org/file/Cake/basics.php#function-env)方法：

```
$ip = env('REMOTE_ADDR'); 
```

### 当前用户名

为此，只需使用[静态会话接口](http://api.cakephp.org/class/cake-session#method-CakeSessionread)：

```
$name = CakeSession::read('Auth.User.name'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:32:52.750

这将有望使您朝着正确的方向前进。我目前正在将我的一些 CakePHP 应用程序升级到 2.2。我对此不是 100% 确定的，但这似乎是关于解决这个问题的方法。我正在考虑使用数据库日志记录，我喜欢你的想法，所以让我知道它是如何工作的。如果没有，请提供反馈，我会深入挖掘。;)

创建您的 LogEntry 模型（数据库表）以包含用户名和 IP 地址的字段。

创建一个应用控制器。在 beforeFilter 方法中，将用户的 IP 地址放在他们的会话中。CakeRequest 对象将包含他们的 IP 地址。

```
$this->request->clientIp(); 
```

在该模型的 beforeSave() 方法中，您将收集用户名和 IP 地址。

要访问用户名字段（假设您使用 Auth 组件和 clientIp 作为其 IP 地址的键）：

```
App::import('Component', 'Session');
$Session = new SessionComponent();
$user = $Session->read('Auth.User');
$ip = $Session->read('clientIp'); 
```

将这些分配给正确的字段，以便保存它们。

# java - 无论顺序如何，Hashset 上的 .equals 都会返回 true 吗？

> ID：14555486
> 
> 赞同：16
> 
> 时间：2013-01-28T04:35:31.170
> 
> 标签：java, hashset

对于 java 中的 Hashset，有一个 .equals 方法比较每个集合中的元素。无论顺序如何，这都会返回 true 吗？

例如，假设我们有一个包含元素 {a,b,c} 的集合和另一个包含元素 {b,c,a} 的集合

如果你在这两个集合上使用 .equals ，它会返回 true，还是必须排序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T04:40:23.570

这应该返回 true。文档说：

> 比较指定对象与此集合是否相等。如果给定对象也是一个集合，则返回 true，这两个集合具有相同的大小，并且给定集合的每个成员都包含在该集合中。这确保了 equals 方法在 Set 接口的不同实现中正常工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T04:39:24.893

[Java`HashSet`是无序的](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)——**它们没有排序**。因此，您的问题根本无法按提出的方式提出。集合`{a,b,c}`与集合相同`{b,c,a}`。也就是说，`HashSet`inherit's[`AbstractSet#equals(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractSet.html#equals%28java.lang.Object%29)告诉我们以下内容：

> 比较指定对象与此集合是否相等。返回`true`给定对象是否也是一个集合，这两个集合具有相同的大小，并且给定集合的每个成员都包含在这个集合中。这可确保该方法在接口`equals`的不同实现中正常工作。`Set`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T04:39:17.093

`HashSet`实现`Set`接口（建模数学集合抽象），它不包含顺序信息，因此排序在集合中没有意义。结果，`equals`in a`Set`只考虑成员而无视成员的命令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T04:40:18.403

是的，这将是真的，因为 Set 没有隐含的顺序。

您可以通过添加比较器或使用 Set 的特殊情况（例如 TreeSet）将顺序应用于集合。

顺便说一下，哈希码用于在 Set 中进行快速比较。根据 equals 合约，任何两个被认为“相等”的对象必须具有相同的哈希码。

这意味着在不太可能发生哈希码冲突的情况下，Set 只需回退到更耗时的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T04:39:32.380

哈希本质上是一个无序列表，所以是的，

如果哈希 A 包含 {1,2,3,4,5}，哈希 B 包含 {3,1,5,4,2}，那么它们将相等。

# c++ - C ++使用彼此不相关的对象调用双重调度方法

> ID：14555497
> 
> 赞同：0
> 
> 时间：2013-01-28T04:37:08.190
> 
> 标签：c++, double-dispatch

我有一系列形状对象，可以检查它们是否彼此相交（如果任一对象的任何部分与另一个对象重叠，则相交为真）。这对双重分派很有用，因为两个对象的交集可以相对于任何一个对象表示，并且仍然有效且真实。

我最近添加（读作：“尝试添加”）一个 Contains 方法，用于测试一个形状是否完全包含另一个形状。双重分派失败，因为两种不同大小的形状适用于 Intersect 但不适用于 Contains：`shape_one`是一个大圆圈，`shape_two`是一个完全由 包围的小圆圈`shape_one`。该调用`shape_one.Contains(shape_two)`将返回 true，但`shape_two.Contains(shape_one)`将返回 false。

**有没有办法为这种类型的场景实现双重调度？**

（鼓励编辑标题以增加对问题的理解......）

具有双重调度的 Intersects 方法示例：

```
bool Rectangle::Intersects(const Shape& shape) const {
    return shape.Intersects(*this);
}

bool Rectangle::Intersects(const Point& point) const {
    return point.Intersects(*this);
}

bool Rectangle::Intersects(const Line& line) const {
    return line.Intersects(*this);
}

bool Rectangle::Intersects(const Rectangle& rectangle) const {
    double myTop = this->GetY();
    double myLeft = this->GetX();
    double myRight = myLeft + this->GetWidth();
    double myBottom = myTop + this->GetHeight();
    double rTop = rectangle.GetY();
    double rLeft = rectangle.GetX();
    double rRight = rLeft + rectangle.GetWidth();
    double rBottom = rTop + rectangle.GetHeight();

    if(myTop > rBottom) return false;
    if(myBottom < rTop) return false;
    if(myLeft > rRight) return false;
    if(myRight < rLeft) return false;

    return true;
} 
```

具有双重分派的 Contains 方法示例：

```
//THIS RESULTS IN A STACK OVERFLOW! DUE TO INFINITE RECURSION!
bool Rectangle::Contains(const Shape& shape) const {
    return this->Contains(shape);
}

//THIS IS NOT TRUE IN ALL CASES!
bool Rectangle::Contains(const Shape& shape) const {
    return shape.Contains(*this);
}

bool Rectangle::Contains(const Point& point) const {
    return this->Intersects(point);
}

bool Rectangle::Contains(const Line& line) const {
    return this->Intersects(line.GetPointOne()) && this->Intersects(line.GetPointTwo());
}

bool Rectangle::Contains(const Rectangle& rectangle) const {
    return this->Intersects(rectangle.GetTopLeft()) && this->Intersects(rectangle.GetTopRight()) && this->Intersects(rectangle.GetBottomLeft()) && this->Intersects(rectangle.GetBottomRight());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:01:55.473

通过推送包含方法解决，直到基类和动态转换为正确的类型，并在 base-to-base Contains 调用中使用类型参数：

```
bool Shape::Contains(const Shape& shape) const {
    std::string type = shape.GetShapeType();
    if(type == "arc") {
        return this->Contains(dynamic_cast<const Arc&>(shape));
    } else if(type == "circle") {
        return this->Contains(dynamic_cast<const Circle&>(shape));
    } else if(type == "ellipse") {
        return this->Contains(dynamic_cast<const Ellipse&>(shape));
    } else if(type == "line") {
        return this->Contains(dynamic_cast<const Line&>(shape));
    } else if(type == "point") {
        return this->Contains(dynamic_cast<const Point&>(shape));
    } else if(type == "polygon") {
        return this->Contains(dynamic_cast<const Polygon&>(shape));
    } else if(type == "rectangle") {
        return this->Contains(dynamic_cast<const Rectangle&>(shape));
    } else if(type == "sector") {
        return this->Contains(dynamic_cast<const Sector&>(shape));
    } else if(type == "spline") {
        return this->Contains(dynamic_cast<const Spline&>(shape));
    } else if(type == "triangle") {
        return this->Contains(dynamic_cast<const Triangle&>(shape));
    } else {
        return false;
    }
}

bool Shape::Contains(const Point& point) const {
    return this->Intersects(point);
}

bool Shape::Contains(const Line& line) const {
    return this->Intersects(line.GetPointOne()) && this->Intersects(line.GetPointTwo());
}

bool Shape::Contains(const Rectangle& rectangle) const {
    return this->Intersects(rectangle.GetTopLeft()) && this->Intersects(rectangle.GetTopRight()) && this->Intersects(rectangle.GetBottomLeft()) && this->Intersects(rectangle.GetBottomRight());
}

//...etc 
```

# javascript - 如何使弹出窗口居中

> ID：14555499
> 
> 赞同：1
> 
> 时间：2013-01-28T04:37:22.837
> 
> 标签：javascript, dojo

我有一个在utility.js 文件中调用函数getModify() 的jsp 页面。该函数执行某些操作并使用 window.open() 将某些值重定向到下一个 jsp 页面。正在获取另一个 jsp 页面作为弹出窗口。如何获取屏幕的弹出窗口中心。

我的jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script src="script/Utility.js" data-dojo-config="parseOnLoad: true"></script>
</head>
<body>
<div dojotype="dijit.MenuBarItem" id="SearchMenu21" onclick="getModify();" style="font-size:11pt;" title="menuBarItem">
               <img class="images" id="SearchMenu21" name="search5.png" onclick="setImgProperty(this.id)" src="images/uploads/search.png" style="height:20px; width:20px;">
               Modify
</div>
</body>
</html> 
```

这是我的 utility.js 文件：

```
function getModify(){
    var whereCondn = "";
    //alert(gbshowgridFlag);
    if(dijit.byId('dynamicgridCWPROCESS')){
        var selctedItem = dijit.byId('dynamicgridCWPROCESS').selection.getSelected();
        if(selctedItem.length){
            dojo.forEach(selctedItem, function(selectedItem){
                if(selectedItem !== null){
                    dojo.forEach(dijit.byId('dynamicgridCWPROCESS').store.getAttributes(selectedItem), function(attribute){
                        var value = dijit.byId('dynamicgridCWPROCESS').store.getValues(selectedItem, attribute);
                        //alert(value);
                        if(attribute == "PROCESS_ID"){
                            whereCondn = whereCondn+attribute+"="+value;
                        }
                        //alert("new alert"+whereCondn);
                        window.open("modifyTask.jsp?MODIFY="+response,'title','height=600px,width=800px,scrollbars=no,sizable=yes,toolbar=no,statusbar=no');
                    });
                }
            });
            //alert("grid row selected");
        }else{
            alert("grid row not selected");
        }
    }
    if(gbshowgridFlag==false){
        alert("grid not loaded");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:42:25.163

您还可以为弹出窗口传递“top”和“left”属性。

window.open("modifyTask.jsp?MODIFY="+response,'title','height=600px,width=800px,scrollbars=no,sizable=yes,toolbar=no,statusbar=no,top='+ topVar + ',left='+leftVar);

使用基于 screen.height 的计算，以及您的最佳弹出窗口大小来决定 topVar 和 leftVar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:44:10.873

请试试：

```
var x = screen.width / 2 - 800 / 2;
var y = screen.height / 2 - 600 / 2;
window.open("modifyTask.jsp?MODIFY="+response,'title' ,'height=600px,width=800px,scrollbars=no,sizable=yes,toolbar=no,statusbar=no,left=' + x + ',top=' + y); 
```

# windows - User32.dll!NtUserWindowFromPoint 在 Windows RT 上由 Mumble 加载时损坏

> ID：14555501
> 
> 赞同：0
> 
> 时间：2013-01-28T04:37:45.177
> 
> 标签：windows, qt, corruption, user32, windows-rt

我正在努力将 Mumble 移植到 Windows RT（使用越狱），我遇到了一个问题，即当 Mumble 加载时，这个功能会被破坏。

Mumble（腐败功能）：

> 0：000> DQ user32.dll中+ 0x023918
> 77a63918 47c30042 `44696841 4770df01`0c16f241
> 77a63928 4770df01 0c18f241 `0c17f241 4770df01`77a63938
> 4770df01 0c1af241 77a63948 4770df01 0c1cf241 77a63958 `0c19f241 4770df01`4770df01
> 0c1ef241 `0c1bf241 4770df01`77a63968
> 4770df01 `0c1df241 4770df01`5c81f44f
> 77a63978 `0c1ff241 4770df01`4770df01
> 0c22f241 `0c21f241 4770df01`77a63988
> 4770df01 `0c23f241 4770df01`0c24f241
> 0：000>üuser32.dll中+ 0x023918
> *** ERROR：符号文件能找不到。
> 默认为C:\windows\system32\user32.dll导出符号-
> user32!WindowFromPoint:
> 77a63918 6841 ldr r1,[r0,#4]
> 77a6391a 4469 add r1,r1,sp
> 77a6391c 0042 lsls r2,r0,#1
> 77a6391e 47c3 ?blx r8
> 77a63920 f2410c16 mov r12,#0x1016
> 77a63924 df01 svc #1

TeXworks（预期输出）：

> 0：000> DQ user32.dll中+ 0x23918
> 77a63918 4770df01 `0c15f241 4770df01`0c16f241
> 77a63928 4770df01 0c18f241 `0c17f241 4770df01`77a63938
> 4770df01 0c1af241 77a63948 4770df01 0c1cf241 77a63958 `0c19f241 4770df01`4770df01
> 0c1ef241 `0c1bf241 4770df01`77a63968
> 4770df01 `0c1df241 4770df01`5c81f44f
> 77a63978 `0c1ff241 4770df01`4770df01
> 0c22f241 `0c21f241 4770df01`77a63988
> 4770df01 `0c23f241 4770df01`0c24f241
> 0：000>üuser32.dll中+ 0x23918
> *** ERROR：符号文件能找不到。默认为 C:\windows\system32\USER32.dll 导出符号 - USER32
> !WindowFromPoint:
> 77a63918 f2410c15 mov r12,#0x1015
> 77a6391c df01 svc #1
> 77a6391e 4770 bx lr
> 77a63920 f2410c16 mov r12,#0x1016
> 77a63924 df01 svc #1
> 77a63926 4770 bx lr
> 77a63928 f2410c17 mov r12,#0x1017
> 77a6392c df01 svc #1

（抱歉，代码的格式不太好，可以在此处找到窗口的屏幕截图：http: [//i.imgur.com/M6mLHN1.png](http://i.imgur.com/M6mLHN1.png)）

Mumble 使用 Qt（据我了解，由 Mumble 团队定制），Protobuf、Boost 和 OpenSSL TeXworks 使用 Qt

到目前为止我已经尝试过：
禁用应用程序兼容性引擎
在加载时卸载 user32.dll，然后重新加载它（调用 FreeLibrary 100 次，然后调用 LoadLibrary）
从清单中删除任何看起来甚至很可疑的东西（来自 Qt 和 Mumble）
删除整个清单（来自 Qt 和 Mumble）

如果我在 Mumble 启动后使用 cdb 修补这个函数，它的效果会非常好，但如果我不修补它，执行的第一个调用该函数的操作会以崩溃告终。打开/关闭窗口并拖动都调用该函数，因此它的存在对程序来说相当重要。

对此的任何帮助或指示将不胜感激。

编辑：我已经验证它是 mainCRTStartup 里面的东西，它正在弄乱它，试图弄清楚它现在到底是什么。

编辑 2：发现隐藏在 Mumble 代码中的特定于平台的钩子导致了我的麻烦。解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:30:51.800

既然我现在终于可以回答这个问题了，Mumble隐藏了一些我不知道的钩子。我定义了一个名为 mainCRTStartup 的自定义入口点，这样我就可以逐步完成它并准确找到该内存发生变化的位置，这让我直接陷入困境。

这是我用于此的代码：

```
EXTERN_C int WINAPI mainCRTStartup();
void __stdcall EntryPoint()
{
    MessageBox(HWND_DESKTOP,L"Pause(Before mainCRTStartup)",L"Pause(Before mainCRTStartup",MB_OK);
    mainCRTStartup();
    ExitProcess(0);
} 
```

这使我可以在消息框上附加一个调试器并逐步执行 mainCRTStartup，直到找到被调用以加载钩子的静态初始化程序。

# c++ - 在应用程序中包含 Ntddvdeo.h：导致编译错误

> ID：14555503
> 
> 赞同：0
> 
> 时间：2013-01-28T04:37:55.717
> 
> 标签：c++, winapi

我正在尝试在我的 C++ WinAPI 应用程序中包含 Ntddvdeo 库，但出现错误`Error: Cannot open source file Ntddvdeo.h`

**如何在我的程序中包含 Ntddvdeo.h？**

我需要包含它只是为了使用一个变量，即 GUID_DEVINTERFACE_MONITOR 变量。关于如何包含图书馆的任何建议？我是否需要包含特定的 dll 或 lib？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:32:21.287

ntddvdeo.h 是 Windows 驱动程序工具包中的头文件。如果您只需要 GUID 的值，您可以自己在代码中的某个位置定义它。

```
//
// Monitor device interface
// {E6F07B5F-EE97-4a90-B076-33F57BF4EAA7}
DEFINE_GUID(GUID_DEVINTERFACE_MONITOR, 0xe6f07b5f, 0xee97, 0x4a90, 0xb0, 0x76, 0x33, 0xf5, 0x7b, 0xf4, 0xea, 0xa7); 
```

# java - jsp servlet文件上传doGet

> ID：14555512
> 
> 赞同：0
> 
> 时间：2013-01-28T04:38:43.570
> 
> 标签：java, jsp, servlets, file-upload, apache-commons

我可以使用 apache commons FileUpload 在 servlet 中上传文件。下面的代码在 servlet 的 processRequest 方法中工作，但我将代码复制到 doPost 方法中，现在它不再工作了。线

```
 List fileItems = upload.parseRequest(request); 
```

生成一个空的文件项数组。怎么会这样？

这是完整的 doPost 方法

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    int fileId = 0;

    String LogicalName = "";
    String PartNr = "";
    String Cost = "";
    String Assembly = "";
    String Comment = "";
    try {
        Connection conn = MysqlConnect.conn();
        List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
        for (FileItem item : items) {
            if (item.isFormField()) {  //als het een veld is dan dit, anders File uploaden
                String fieldname = item.getFieldName();
                String fieldvalue = item.getString();
                switch (fieldname) {
                    case "logicalName":
                        LogicalName = fieldvalue;
                        break;
                    case "partNr":
                        PartNr = fieldvalue;
                        break;
                    case "cost":
                        Cost = fieldvalue;
                        break;
                    case "assembly":
                        Assembly = fieldvalue;
                        break;
                    case "comments":
                        Comment = fieldvalue;
                        break;

                }

            } else {
                PrintWriter out = response.getWriter();
                File file;
                int maxFileSize = 500000 * 1024;//max 500 mb groot
                int maxMemSize = 5000 * 1024;//max 5mb gecached in het ram,indien file groter is eerst wegschrijven in een temp dir

                String filePath = "C:\\uploads\\";
                String fileName = "";
                String contentType = request.getContentType();
                if ((contentType.indexOf("multipart/form-data") >= 0)) {

                    DiskFileItemFactory factory = new DiskFileItemFactory();
                    factory.setSizeThreshold(maxMemSize);
                    factory.setRepository(new File("c:\\temp"));
                    ServletFileUpload upload = new ServletFileUpload(factory);
                    upload.setSizeMax(maxFileSize);

                    try {
                        List fileItems = upload.parseRequest(request);
                        Iterator i = fileItems.iterator();

                        while (i.hasNext()) {
                            FileItem fi = (FileItem) i.next();
                            if (!fi.isFormField()) {
                                String fieldName = fi.getFieldName();
                                fileName = fi.getName();
                                boolean isInMemory = fi.isInMemory();
                                long sizeInBytes = fi.getSize();
                                if (fileName.lastIndexOf("\\") >= 0) {
                                    file = new File(filePath
                                            + fileName.substring(fileName.lastIndexOf("\\")));
                                } else {
                                    file = new File(filePath
                                            + fileName.substring(fileName.lastIndexOf("\\") + 1));
                                }
                                fi.write(file);
                            }
                        }

                        HttpSession session = request.getSession();

                        int uploader = (Integer) session.getAttribute("UserId");
                        String Query = "Insert into tbl_file (fileLocation,Uploader)values(\"" + fileName + "\"," + uploader + ");";
                        PreparedStatement st = conn.prepareStatement(Query, Statement.RETURN_GENERATED_KEYS);
                        st.executeUpdate();

                        ResultSet rs = st.getGeneratedKeys();
                        if (rs.next()) {
                            fileId = rs.getInt(1);
                        }

                    } catch (Exception ex) {
                        System.out.println(ex);
                    }
                }
            }
        }
        if (fileId == 0) {
            //ERROR
        } else {
            Statement stmt = conn.createStatement();
            String Query1 = "Insert into tbl_part (partCad,partCost,partAssembly,partMotivation,partOf) VALUES(" + fileId + "," + Cost + "," + Assembly + ",\"" + Comment + "\"," + "1" + ");";
            stmt.executeUpdate(Query1);
        }
        MysqlConnect.close(conn);
    } catch (SQLException ex) {
        Logger.getLogger(UploadServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (FileUploadException e) {
        throw new ServletException("Cannot parse multipart request.", e);
    }
    String URL = "/home.jsp";
    RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(URL);
    dispatcher.forward(request, response);

} 
```

这就是 JSP

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
 pageEncoding="ISO-8859-1"%>
  <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 

 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     
 "http://www.w3.org/TR/html4/loose.dtd">

 <html>
 <head>
 <title>File Uploading Form</title>
 </head>
 <body>
 <h3>File Upload:</h3>
 Select a file to upload: <br />
 <form action="/Racing/UploadServlet" method="post"
                    enctype="multipart/form-data">
 <input type="file" name="file"  />
 <br />
 Logische Naam: <input type="text" name="logicalName"><br>
 Stuknr(automatisch,nog niet geimplementeerd): <input type="text" name="partNr"><br>
 Kost: <input type="text" name="cost"><br>

 Assembly:
<select name = "assembly">
 <c:forEach var ="assembly" items="${Assemblys}">
  <option value="${assembly.id}">${assembly.name}</option>
 </c:forEach>
</select>
<br>
<textarea name="comments" cols="25" rows="5">
Verdediging Design
</textarea><br>

<input type="submit" value="Upload File" />

</form>
</body>
</html> 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:19:52.440

您的代码行`List fileItems = upload.parseRequest(request);`甚至该`else`部分中的所有行都没有任何意义，因为：

1.  您之前已经在此行中处理过请求

    ```
    List<FileItem> items = new ServletFileUpload(
        new DiskFileItemFactory()).parseRequest(request); 
    ```

    无需再次处理请求。

2.  您已经在方法返回 false的`item`对象中拥有想要/需要处理的文件。`isFormField`

更改您的方法，使其看起来像这里：[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/a/2424824/1065197)：

```
FileItemFactory factory = new DiskFileItemFactory();
ServletFileUpload upload = new ServletFileUpload(factory);
List<FileItem> items = upload.parseRequest(request);
for (FileItem item : items) {
    if (item.isFormField()) {  //als het een veld is dan dit, anders File uploaden
        String fieldname = item.getFieldName();
        String fieldvalue = item.getString();
        switch (fieldname) {
            case "logicalName":
                LogicalName = fieldvalue;
                break;
            //other case statements...
        }
    } else {
        //here you only have to process the file
        File file;
        int maxFileSize = 500000 * 1024;//your comments...
        int maxMemSize = 5000 * 1024;//your comments...
        //this must be a constant or a servlet init param, do not hard code it
        String filePath = "C:\\uploads\\";
        String fileName = FilenameUtils.getName(item.getName());
        factory.setSizeThreshold(maxMemSize);
        //didn't you have a filePath variable?
        factory.setRepository(new File("c:\\temp"));
        upload.setSizeMax(maxFileSize);
        try {
            String fieldName = fi.getFieldName();
            boolean isInMemory = fi.isInMemory();
            long sizeInBytes = fi.getSize();
            file = new File(filePath, fileName);
            item.write(file);
            //code to save your file location in db...
            //note: this MUST BE in a business logic method, not directly written in your servlet
            HttpSession session = request.getSession();
            int uploader = (Integer) session.getAttribute("UserId");
        } catch (Exception ex) {
            //very BAD idea
            //use a logger instead like log4j or sfl4j
            System.out.println(ex);
        }
    }
} 
```

附加：检查[File(String parent, String child)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#File%28java.lang.String,%20java.lang.String%29)构造函数。

# jquery - 使用 jQuery 的自动完成功能和 PHP 中的 JSON 对象

> ID：14555514
> 
> 赞同：0
> 
> 时间：2013-01-28T04:38:58.183
> 
> 标签：jquery, autocomplete, json

我基本上是在构建一个通用的自动完成搜索栏，假设用户在其中写一些东西，jQuery 返回一个建议列表，用户选择一个。

我的**AJAX 调用**如下所示：

```
var response = '';
var request = $.ajax({
 url: "./includes/search_products.php",
 type: "post",
 dataType: "json",
 data: serializedData,
 success : function(text) {
    response = text; // Gets the list of suggestions
 }
}); 
```

**回应**是：

```
{"id":"2",
"companyId":"15",
"productTypeId":"1",
"label":"Alfa Romeo 159",
"price":"50000","comments":
"Random comment."} 
```

**我如何设置.autocomplete：**

```
request.done(function (){
        console.log("Works.");
        $('#product_search').autocomplete({
            source: response,
            minLength: 1,
            select: function(event, ui) {
                alert("yey");
            }
        });
    }); 
```

我得到的**错误信息**是：

```
TypeError: this.source is not a function 
```

根据 PHP json_encode() 文档所说的，我认为正常的响应应该有更少的引号。

有什么问题？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:56:02.890

这不是一个明确的答案，但很可能是这种情况..

你没有一个对象你有一个字符串..所以尝试这样做首先检查变量响应`$.type(response)` 的类型，如果类型是字符串，你可以这样做，然后执行以下操作

`response = JSON.parse(response);`

这很可能是你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:11:37.267

好的，我在 2 天后找到了解决方案。我希望有一天它会对某人有所帮助。没有 AJAX 值得 8 小时的咒骂。这不是一个教程，但它涵盖了我为了获得工作版本而遇到的一些问题。

我正在使用 json_encode 将对象（比如产品）转换为 JSON。Product 类还实现了**JsonSerializable**接口，该接口由一个函数**jsonSerialize()**组成。

我在原始帖子中对 jsonSerialize() 的实现更长，但我最终得到了这样的结果：

```
function jsonSerialize() {
    return [
        'id' => $this->id,
        'label' => $this->name
    ];
} 
```

要使自动完成功能能够处理对象或实际上不止是一维数组，您将需要有一个**“标签”**或**“值”**字段。标签将显示为自动完成建议，但当您选择其中一个标签时，标签将显示在输入中。

这是我实际的**自动完成功能**的样子：

```
$("#product_search").autocomplete({
    source: "./includes/search_products.php",
    minLength: 1,
    select: function(event, ui) {
        /* Do something */
    }
}); 
```

我的问题是我返回一个带有 json_encode($product) 的对象。我想说的是$product = new Product(...)。似乎自动完成功能的源选项需要一组产品，而不仅仅是一个产品。

**解决方案：**

```
if(!is_array($product))
    $product = array($product); 
```

我的代码在原始帖子中没有错，只是为了让一切正常，我的 PHP 脚本中缺少这两行。

完了，走吧。

# r - 关于升级 Emacs (22 -> 24) 以及关于 GUI 与控制台/终端的建议

> ID：14555517
> 
> 赞同：0
> 
> 时间：2013-01-28T04:39:12.333
> 
> 标签：r, emacs

我使用的是 Macbook Pro（Snow Leopard，10.6.8），过去几个月一直是 emacs 的普通用户。我正在尝试安装[此处提供](http://vgoulet.act.ulaval.ca/en/emacs/mac/)的 Emacs 24.2 的修改版本，以利用[下载页面](http://ess.r-project.org/index.php?Section=download)中的 Emacs Speaks Statistics (ESS) 。我目前有 22.1.1：

```
M-x emacs-version
GNU Emacs 22.1.1 (mac-apple-darwin) of 2011-06-07 on b1030.apple.com 
```

我安装了之前链接的 emacs，把它放在 Applications 中，然后在 .bashrc 中设置：

```
alias emacs="/Applications/Emacs.app/Contents/MacOS/Emacs -nw" 
```

因此，当我编写并成功运行一个简短的 R 程序时，它似乎工作正常。

```
M-x emacs-version
GNU Emacs 24.2.1 (x86_64-apple-darwin, NS apple-appkit-1038.36) of 2012-08-27 on bob.porkrind.org 
```

这是升级到“较新版本”的 Emacs 的常用方法吗？对不起，如果这个问题看起来微不足道，但我以前从未这样做过（我通常在另一台计算机上使用 emacs），并且上一个网站上的安装步骤仅包含一个句子。一体机的安装方式，官方[文档](http://ess.r-project.org/ess.pdf)中也没有说明。

* * *

我在网上搜索时的一个简短说明：我相信调用“emacs file_name”应该打开一个 GUI 版本，而“emacs -nw file_name”是控制台，所以我仍然使用终端。但在我的 Mac 上，使用 emacs 与使用 emacs -nw 的效果相同。换句话说，我无法显示 GUI 或单独的窗口。谁能确认[这个超级用户问题有“正确”的答案](https://superuser.com/questions/278850/open-a-new-window-for-emacs-from-terminal-in-mac)？（我对此并没有真正的问题，因为我讨厌有另一个弹出窗口，但很高兴知道完整性。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T06:03:49.983

Mac OS X 自带的 Emacs`/usr/bin/emacs`没有图形界面，只有终端，所以调用`emacs`和`emacs -nw`.

您升级后的 Emacs 默认以图形界面启动，因此您需要指定`-nw`强制它使用终端。

没有“通常”的方式来升级 OS X 的默认 Emacs（即 Apple 不提供升级的 Emacs）；你所做的很好。[或者你可以从http://emacsformacosx.com/](http://emacsformacosx.com/)安装一个二进制文件，或者使用像 homebrew 这样的包管理器。

# msdeploy - 如何仅部署我的网站的一部分

> ID：14555520
> 
> 赞同：0
> 
> 时间：2013-01-28T04:39:19.430
> 
> 标签：msdeploy

我有一组需要部署到我的网站的文件/文件夹

+---App_Browsers
+---bin
+---配置
+---开发
+---静态
+---xsl
web.config
404.html
500.html

我想将文件/文件夹与其中一台服务器同步，并且我不想删除服务器上的任何其他文件、文件夹。理想情况下，我会使用
**msdeploy -verb:sync**，因为我希望同步我正在部署的文件夹，但我想保留站点上的现有文件夹。**-skip**也不是一个选项，因为现有文件夹是动态的，我们的 CMS 系统可能会即时更改文件/文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:54:31.083

这不是一个完整的答案，但请尝试 -enableRule:DoNotDeleteRule:

```
msdeploy -verb:sync -source:package=package.zip -dest:auto -enableRule:DoNotDeleteRule 
```

# sql - 在 Oracle 11g 上根据时间戳比较两个日期

> ID：14555525
> 
> 赞同：1
> 
> 时间：2013-01-28T04:39:51.587
> 
> 标签：sql, oracle11g, timestamp

我正在处理两个表`A`和`B`Oracle 11g 并尝试根据具有数据类型的列上的时间戳比较记录（`A.TRANSACTION_TIMESTAMP`和）`B.LAST_TRANSACTION_TIMESTAMP``DATE`

根据我的尝试，以下查询没有给出预期的输出并返回记录，即使`TRANSACTION_TIMESTAMP`小于`LAST_TRANSACTION_TIMESTAMP`

```
TO_CHAR(TRANSACTION_TIMESTAMP, 'DD-MON-YYYY HH24:MI:SS') >= 
(SELECT TO_CHAR(LAST_TRANSACTION_TIMESTAMP, 'DD-MON-YYYY  HH24:MI:SS') 
  FROM LAST_RAN_TIME) 
```

如果有人可以提供一些关于在 Oracle 11g 上比较日期和时间戳的输入，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:45:50.743

不要使用 TO_CHAR 进行转换。只需直接比较列。

比较失败，因为您使用的是从一天开始的字符串！

```
TRANSACTION_TIMESTAMP >= (SELECT LAST_TRANSACTION_TIMESTAMP FROM LAST_RAN_TIME) 
```

# ruby-on-rails - nil 的未定义方法：NilClass 重构？

> ID：14555526
> 
> 赞同：0
> 
> 时间：2013-01-28T04:39:53.603
> 
> 标签：ruby-on-rails, refactoring, null-object-pattern

在交易中，有时客户没有，`service_id`因为他们没有向购物车添加额外的服务。问题是，`transactions`索引页面返回`undefined method 'name' for nil:NilClass`在线

```
<%= transaction.service.name %> 
```

有什么办法比

```
<%= transaction.service.present? ? transaction.service.name : nil %> 
```

我找到了这篇[NULL OBJECT PATTERN](http://robots.thoughtbot.com/post/12179019201/design-patterns-in-the-wild-null-object)文章。不太明白它如何应用于我的场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:41:03.583

或者你可以这样做：

```
transaction.service.try(:name) 
```

如果 service 不是 nil，它将返回它的名字。否则它将返回`nil`。

# asp.net - 如何让我的 web.sitemap 文件正常工作？

> ID：14555530
> 
> 赞同：0
> 
> 时间：2013-01-28T04:40:08.590
> 
> 标签：asp.net

**大家好。我有一个与我的作业代码相关的问题。我正在尝试配置我的 web.sitemap 文件，但是当我运行我的代码时得到以下信息：**

元素内部只需要一个元素。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Configuration.ConfigurationErrorsException：元素内部只需要一个元素。

**url="CustomerSupport" 的 siteMapNode 出现错误，它说：**命名空间' [http://schemas.microsoft.com/AspNet/SiteMap-File-1.0](http://schemas.microsoft.com/AspNet/SiteMap-File-1.0) '中的元素'siteMap'具有无效的子元素'siteMapNode ' 在命名空间中， **我已经坚持了一段时间。我真的很感激一些帮助。这是我的 we.sitemap 文件的代码：**

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
  <siteMapNode url="Default.aspx" title="Home"  description="">
  </siteMapNode>

      <siteMapNode url="Customer support.aspx" title="Customer support"  description="">
          <siteMapNode url="ProductRegistration.aspx" title="Register products"  description="">
          </siteMapNode>
          <siteMapNode url="CustomerSurvey.aspx" title="Complete customer survey"  description="">
          </siteMapNode>
          <siteMapNode url="ContactUs.aspx" title="Contact us"  description="">
          </siteMapNode>
      </siteMapNode>

      <siteMapNode url="TechnicianSupport.aspx" title="Technician support"  description="">
          <siteMapNode url="CustomerIncidentDisplay.aspx" title="Display customer incidents"  description="">
          </siteMapNode>
          <siteMapNode url="IncidentUpdate.aspx" title="Update incidents"  description="">
          </siteMapNode>
      </siteMapNode>

      <siteMapNode url="Administration.aspx" title="Administration"  description="">
          <siteMapNode url="ProductMaintenance.aspx" title="Maintain products"  description="">
          </siteMapNode>
          <siteMapNode url="CustomerMaintenance.aspx" title="Maintain customers"  description="">
          </siteMapNode>
          <siteMapNode url="TechnicianMaintenance.aspx" title="Maintain technicians"  description="">
          </siteMapNode>
          <siteMapNode url="IncidentCreation.aspx" title="Create incidents"  description="">
          </siteMapNode>
          <siteMapNode url="TechnicianIncidentSummary.aspx" title="Display techninican incidents"  description="">
          </siteMapNode>
          <siteMapNode url="IncidentAssignment.aspx" title="Assign incidents"  description="">
          </siteMapNode>
          <siteMapNode url="IncidentDisplay.aspx" title="Display incidents"  description="">
          </siteMapNode>
          <siteMapNode url="CustomerDisplay.aspx" title="Display customers"  description="">
          </siteMapNode>
      </siteMapNode>

      <siteMapNode url="Map.aspx" title="Site Map"  description="">
        </siteMapNode>
</siteMap> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T20:13:23.300

您有许多节点，而您应该只有一个：在主节点内，放置其余节点。

```
<siteMapNode name="this is the main node">

  <siteMapNode name="1">
    <siteMapNode name="11">
    </siteMapNode>

    <siteMapNode name="12">
    </siteMapNode>
  </siteMapNode>

  <siteMapNode name="2">
  </siteMapNode>

  <siteMapNode name="3">
  </siteMapNode>
</siteMapNode> 
```

# php - php表单提交后触发jquery函数（不是ajax）

> ID：14555538
> 
> 赞同：0
> 
> 时间：2013-01-28T04:40:52.713
> 
> 标签：php, jquery, triggers

我有一个通过php提交的表单，提交后意味着数据插入到数据库中，我想自动触发一个jquery函数，该函数包含插入的数据。

我面临的问题是在页面加载期间，jquery.js 文件尚未加载，我无法调用 jquery 函数。

还有一个问题，如果页面加载完成后，如何自动触发jquery功能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:42:05.963

在使用前添加包含`jQuery`in 头部的脚本标签，`jQuery`并`javascript`在结束之前添加 body 标签。将代码放入[document.ready](http://api.jquery.com/ready/)将确保 DOM 元素对您的脚本的可用性，并在页面在被访问后准备就绪时触发 javascript。

```
$(document).ready(function(){
   //your code here
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:01:26.133

试试这个，这将在表单提交时触发

```
$('.formclass').on('submit',function(){

    // this will redirect to the page you want 
    window.location = "http://www.yoururl.com";

 }); 
```

但是如果您想在提交表单并加载新页面时触发一个函数，那么@Adil 建议就是您所需要的..

但是您必须确保此页面仅在表单提交后显示，例如在提交表单后您重定向到主页并且您使用了 document.ready 那么无论表单提交如何，这都会在页面加载时运行 - ion ，所以每次我进入主页时它都会触发......

# java - Android HTTP 和 cookie？

> ID：14555560
> 
> 赞同：0
> 
> 时间：2013-01-28T04:43:05.587
> 
> 标签：java, android, http

我正在开发一个项目，其中 API 端点返回一个仅用于进一步请求的 HTTP cookie。我不确定这个 cookie 保存在哪里，也不确定如何删除它。我在哪里可以找到此 cookie 以供重复使用，如何删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:07:04.977

CookieManager管理 cookie，[使其](http://developer.android.com/reference/android/webkit/CookieManager.html)可供重用，并具有删除 cookie 的方法。

# android - 如何显示我在不同布局中单独插入的数据？

> ID：14555561
> 
> 赞同：-1
> 
> 时间：2013-01-28T04:43:08.377
> 
> 标签：android, eclipse, layout

我有一个带有 2 个按钮“保存”和“搜索”的主页。单击“保存”按钮时，它将打开布局“**数据**”以插入名称、国家、城市、类别、评论等数据。OnClickSave 数据将被保存。单击“搜索”按钮时，它将打开布局国家。布局将显示国家/地区的数据键，而不是从列表中选择它会打开保存在国家/地区下的城市布局，依此类推。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:38:32.880

我这里只写步骤。

主要活动：

1.  在保存按钮上单击：使用表单打开一个新活动。将数据保存到数据库。

2.  在搜索按钮上单击：您可以打开一个包含列表视图的新活动。该列表视图可以包含数据库表中的每个国家/地区。单击后，您可以转到其他活动，该活动将获取国家/地区详细信息并显示它们。

如果您有任何疑问，请询问。

# performance - Hibernate/JPA 与 JDBC 性能对比

> ID：14555566
> 
> 赞同：3
> 
> 时间：2013-01-28T04:43:52.643
> 
> 标签：performance, hibernate, jpa, jdbc

我们将 JPA/Hibernate 用于需要插入的项目，例如数据库中具有多个连接/关系等的 10000 条记录。功能很好，但性能确实很慢。

只是想知道迁移到 JDBC 是否有助于*提高性能*？

谢谢，
-csn

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:02:46.287

您可以使用 JPA/Hibernate进行*批量插入- 请参阅*[“批处理”](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html)。

通过在 JDBC（等）中进行批量插入，您几乎肯定会获得更好的性能`addBatch()`，但如果您的模式很复杂，Hibernate 方法可能更可取。

如果您使用 JDBC 批处理，请确保您在一个[*事务*](https://en.wikipedia.org/wiki/Database_transaction)`addBatch()`中执行所有调用。[](https://en.wikipedia.org/wiki/Database_transaction)

 *如果您碰巧使用的是 MySQL，请务必添加 `rewriteBatchedStatements=true`到您的连接参数。*

# networking - 本地 HTML5 网络应用程序上的分析？

> ID：14555569
> 
> 赞同：1
> 
> 时间：2013-01-28T04:44:09.433
> 
> 标签：networking, web-applications, network-programming

我正在构建一个 HTML 5 网络应用程序，该应用程序通过无线网络从本地网络服务器（由[mamp](http://www.mamp.info/)创建）交付，无法访问互联网。

我想知道是否有一种解决方案可以在不连接到互联网的情况下跟踪网络应用程序的分析。

我对网络不是很了解，所以任何信息都有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:16:36.673

您可以在网络上的其中一台机器上安装类似[http://piwik.org/的东西。](http://piwik.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:13:28.780

是的，只要查看站点的浏览器可以访问 Internet 而不仅仅是 LAN，您就可以跟踪分析。

# c# - 按创建的列对 datagridview 进行排序。实体框架 c# Winforms

> ID：14555571
> 
> 赞同：0
> 
> 时间：2013-01-28T04:44:31.403
> 
> 标签：c#, winforms, sorting, entity-framework-4, datagridview

我遇到了问题，我检索了存储在数据库中的所有贷款，如下所示：

```
list_loans = db.Loan.Where(x => x.State.id_state != 6).ToList(); 
```

db 是对象上下文。

然后，我将该列表指定为我的 DataGridView 的数据源。

```
dgv_Loans.Datasource = list_loans; 
```

有了这些信息，我添加了一些列。例如，分期付款需要支付。我通过计算查询结果来获得该值。

用户可以使用一些选项订购结果。很容易从实体拥有的字段中排序结果（使用 linq），但我不知道如何使用这个新列对结果进行排序。

我在这里阅读了一些帖子并尝试了这个：

```
dgv_Loans.Sort(dgv_Loans.Columns["installments_left"], ListSortDirection.Ascending); 
```

通过这样做，我在运行时收到以下异常：

“DataGridView 控件必须绑定到要排序的 IBindingList 对象。”

无论如何使用 linq 来排序在 DataGridViewColumn 中创建的列？或者我该如何解决这个错误？

我知道有相关的帖子，但是在阅读它们之后，我找不到解决这个特定问题的方法。这就是为什么我展示了我如何实施以获得一些建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:51:10.250

我通常不会直接绑定到从数据库中检索到的列表，而是拥有一个视图类并在该类中拥有所有计算的属性

```
public class LoanView : Loan {
  public LoanView(Loan loan){
  }
  public int InsallmentsLeft { get { return ...; } }
} 
```

然后将数据源绑定到这个列表，这样可以保持排序工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:45:33.910

关于使用实体框架*按创建的列对数据网格视图进行排序*

我猜你需要[这个`SortableBindingList<T>`](http://www.timvw.be/2008/08/02/presenting-the-sortablebindinglistt-take-two/)

***用法：***

```
loanBindingSource.DataSource = new SortableBindingList<Loan>(list_loans.ToList());
dgv_Loans.Datasource = loanBindingSource; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T00:17:34.517

```
int ID = Convert.ToInt32(cmbDepartments.SelectedValue);
var EmployeeList = from Employee in db.Employee
    where Employee.DepartmentID == ID
    select new
    {
        Employee.FirstName,
        Employee.LastName
    };
dataGridView1.DataSource = EmployeeList.ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T00:27:58.320

您可以直接将数据源提供给，`dataGridView1.DataSource`但您必须`ToList()`在查询结束时写入：

```
int ID = Convert.ToInt32(cmbDepartmanlar.SelectedValue);

dataGridView1.DataSource = (from Employee in db.Employee
                            where Employee.DepartmentID == ID
                   select new
                   {
                       Employee.FirstName,
                       Employee.LastName
                   }).ToList(); 
```

# php - 使用 getElementsByTagName 的 php 问题更新 XML 并识别正确的子节点

> ID：14555572
> 
> 赞同：0
> 
> 时间：2013-01-28T04:44:39.660
> 
> 标签：php, xml, domdocument, appendchild

如何根据用户提交的表单中的 $_POST 变量识别正确的 XML 节点。下面是我当前的 XML，并说明我是否希望放置新的 XML 数据以及获取表单数据并准备将其插入 XML 文档的 PHP。

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
    <content_sets>

<!-- The new article node will be placed inside of one of the content_sets child nodes. Either doc_types, video_types, image_types. -->
    <doc_types>

        <article>
            <doc_name>Test Proposal</doc_name>
            <file_name>tes_prop.docx</file_name>
            <doc_description>Test Word document. Please remove when live.</doc_description>
            <doc_tags>word document,test,rfp template,template,rfp</doc_tags>
            <last_update>01/26/2013 23:07</last_update>
        </article>
    </doc_types>

    <video_types>
        <article>
            <doc_name>Test Video</doc_name>
            <file_name>test_video.avi</file_name>
            <doc_description>Test video. Please remove when live.</doc_description>
            <doc_tags>test video,video, avi,xvid,svid avi</doc_tags>
            <last_update>01/26/2013 23:07</last_update>
        </article>
    </video_types>

    <image_types>
        <article>
            <doc_name>Test Image</doc_name>
            <file_name>logo.png</file_name>
            <doc_description>Logo transparent background. Please remove when live.</doc_description>
            <doc_tags>png,logo,logo png,no background,graphic,hi res</doc_tags>
            <last_update>01/26/2013 23:07</last_update>
        </article>
    </image_types>

</content_sets> 
```

PHP 提交：

```
$file_type = $_POST['file_type'];
//This is where the node name comes from

$doc = new DOMDocument();
$doc->load( 'rfp_files.xml' );

$doc->formatOutput = true;

$r = $doc->getElementsByTagName("content_sets")->getElementsByTagName($file_type);
*****//The above code is where my issue is coming from. I am not identifying the child node of content_sets correctly. 
$b = $doc->createElement("article");

$titleName = $doc->createElement("doc_name");
$titleName->appendChild(
    $doc->createTextNode( $Document_Array["name"] )
);
$b->appendChild( $titleName );

$r->appendChild( $b );

$doc->save("rfp_files.xml"); 
```

**我没有显示表单或其他`article's`子节点。如果需要，我可以发布更多我的代码。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:09:06.223

使用时`getElementsByTagName()`，需要使用该`item()`方法，以便在节点列表中检索特定节点——即使节点列表中只有一项，您仍然必须这样做。

`getElementsByTagName()`将始终返回一个 DOM 节点列表，因此您要么必须遍历列表，要么必须通过 item() 方法检索特定项目 - 这有意义吗？这里有一个例子：http: [//php.net/manual/en/domnodelist.item.php](http://php.net/manual/en/domnodelist.item.php)

# verilog - 在 Verilog 中，如何在修改单个位的同时“保持”寄存器其余部分的值？

> ID：14555574
> 
> 赞同：1
> 
> 时间：2013-01-28T04:44:56.537
> 
> 标签：verilog, tri-state-logic

在 Verilog HDL 中，如何在修改单个位时强制保持寄存器文件的其余部分不受影响？就像下面的例子一样，

```
reg [31:0] result;
reg [31:0] next_result;
reg [4:0] count;
wire done;

//some code here...

result <= 32'b0;

always @* begin
if(done==1'b1) begin
  next_result[count] <= 1'b1;
end
end

always @(posedge clock) begin
result <= next_result;
//the rest of the sequential part, in which count increments...
end 
```

事实证明，`x`在几个周期后，结果包含许多（未知）值，这意味着在我修改时寄存器文件不是保持不变的`result[count]`。奇怪的是，这个问题只在我合成时出现，并且一切都很好用于模拟目的。我想知道是否有某种方法可以告诉合成器我想“强制”不改变寄存器文件的其余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:55:48.430

您永远不会分配组合循环内的所有位。你有一个浮动分配`result <= 32'b0;`我很惊讶这个编译。通过没有在 else 语句中分配 next_result 也有一个隐含的锁存器，即当 done=0 时 next_result 将保持其值。

尝试：

```
always @* begin
  if(done==1'b1) begin
    next_result        = result;
    next_result[count] = 1'b1;
  end
  else begin
    next_result        = result;
  end
end 
```

或者

```
always @* begin
  next_result = result;
  if(done==1'b1) begin
    next_result[count] = 1'b1;
  end
end 
```

您还在组合循环中使用了非阻塞`<=`赋值。

# android - 完整的android配置细节

> ID：14555578
> 
> 赞同：2
> 
> 时间：2013-01-28T04:45:30.857
> 
> 标签：android, backup

我正在尝试一个项目，该项目需要备份完整的android配置，比如wifi连接列表和密码、铃声、屏幕亮度、书签等。android存储它们是否有任何共同的地方，或者我们是否需要单独提取它们然后在手机丢失或恢复出厂设置的情况下恢复？

# android - 按钮无法正常工作

> ID：14555581
> 
> 赞同：0
> 
> 时间：2013-01-28T04:45:36.957
> 
> 标签：android, button, android-activity, onclicklistener

在我的 main.xml 中，我有 5 个按钮，所有这些按钮都通向不同的页面，但是当我启动应用程序时，这些按钮是它们的，但是当单击它们时它们不起作用。我认为问题可能出在 AndroidManifest.xml

菜单.Java

```
package com.invoice;

import android.app.Activity;
import android.os.Bundle;
import android.view.View.OnClickListener;
import android.view.View;
import android.widget.Button;

public class menu extends Activity implements OnClickListener {
    /** called the activity is first created. */
    Button button1, button2, button3, button4, button5;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        button1 = (Button)findViewById(R.id.button1);
        button2 = (Button)findViewById(R.id.button2);
        button3 = (Button)findViewById(R.id.button3);
        button4 = (Button)findViewById(R.id.button4);
        button5 = (Button)findViewById(R.id.button5);
        button1.setOnClickListener(this);
        button2.setOnClickListener(this);
        button3.setOnClickListener(this);
        button4.setOnClickListener(this);
        button5.setOnClickListener(this);
    }   
    public void onClick(View v) {
        //TODO Auto-generate method stub
        //figure out which button was pressed
        switch (v.getId()) {
        case R.id.button1:
            //do button1 action
            break;
        case R.id.button2:
            //do button2 action
            break;
        case R.id.button3:
            //do button3 action
            break;
        case R.id.button4:
            //do button4 action
            break;
        case R.id.button5:
            //do button5 action
            break;
        }

        }
    } 
```

Android Manifest（仅按钮活动）

```
android:name=".menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.invoice.MENU" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

        </activity>
    <activity android:name = ".Help" />
    <activity android:name = ".Job" />
    <activity android:name=".Fourm" />
    <activity android:name=".Receipt"/>
    <activity android:name=".Reportissue"/> 
```

Job.java（相同的代码在每个按钮的 java 文件中）

```
package com.invoice;

import android.app.Activity;
import android.os.Bundle;

public class Job extends Activity
{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.job);
    }

} 
```

主.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="16dp"
    android:paddingRight="16dp" >

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="87dp"
        android:text="@string/report_issue"
        android:width="300dp" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button3"
        android:layout_marginBottom="29dp"
        android:text="@string/help"
        android:width="300dp" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button2"
        android:layout_alignLeft="@+id/button3"
        android:layout_marginBottom="36dp"
        android:text="@string/fourm"
        android:width="300dp" android:height="50dp"/>

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignRight="@+id/button1"
        android:layout_marginTop="15dp"
        android:height="150dp"
        android:text="@string/reciept"
        android:width="145dp" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button5"
        android:layout_alignBottom="@+id/button5"
        android:layout_toLeftOf="@+id/button5"
        android:height="150dp"
        android:text="@string/job"
        android:width="150dp" />

    <DigitalClock
        android:id="@+id/digitalClock1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="38dp"
         />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:06:03.607

您在此处定义的 xml 文件名是`Menu.xml`并且在您的 java 文件中您正在使用`main`布局文件。为什么这样 ？

您应该在 java 文件中使用布局`Menu.xml`文件。只需更改布局文件名，然后尝试实现 onClick。它应该工作。

> ```
> public void onClick(View v) {
>     //TODO Auto-generate method stub
>     //figure out which button was pressed
>     switch (v.getId()) {
>     case R.id.button1:
>         //do button1 action
>        System.out.println("Button1 Clicked.");
>          break;
>      }
>    } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:03:06.990

您的按钮在`Menu.xml`文件中，当您在其中加载`R.Layout.main` 和执行按钮功能时，首先加载正确的引用 XMl，其中定义了按钮，然后运行，如果仍然有问题，则在此处共享 logcat 跟踪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:50:57.830

当你根植你的android时会发生这种情况。生根对你的安卓手机来说是一件很棒的事情，因为它会打开你手机上的功能。但是，这是非常冒险的，所以我建议如果你要root，root风险自负！

# android - 直接使用输入流解析json

> ID：14555584
> 
> 赞同：2
> 
> 时间：2013-01-28T04:45:57.733
> 
> 标签：android, json, gson, android-parser

我正在做一个 api 调用，作为回应，我得到了 json。因此，为此我想直接通过输入流解析它，这样就不需要将它存储在内存中。为此，我正在尝试使用 JSONReader，但我无法使用小于 11 的 api。所以我不知道如何继续。我希望从 2.0 版本开始。即使通过 JsonReader 解析也不起作用。我很想拥有 GSON 解析器，但我不知道如何使用 Inputstream 实现相同的解析器。

编辑：我的代码相同：

```
HttpClient client = new DefaultHttpClient();
HttpGet httpGet = new HttpGet(url);

try {
          HttpResponse response = client.execute(httpGet);
          StatusLine statusLine = response.getStatusLine();
          int statusCode = statusLine.getStatusCode();
          Log.e("123", "Status code ----------- "+statusCode);
          if (statusCode == 200) { 
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();

            // for showing it on textview i am storing in in builder
            BufferedReader bReader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = bReader.readLine()) != null) {
              builder.append(line);
            }

//////////// 
            JsonReader reader = new JsonReader(new InputStreamReader(content));
            reader.setLenient(true);
            readGson(reader);
          } else {
            Log.e("TAG", "Failed to download file");
          }
        } catch (ClientProtocolException e) {
          e.printStackTrace();
        } catch (IOException e) {
          e.printStackTrace();
        }
        return builder.toString();
      }

private void readGson(JsonReader reader) {
    // TODO Auto-generated method stub
    Log.e("TAG", "inidde readgson"+reader);

                 try {
                     Log.e("TAG", "inside try");
                    reader.beginObject();
                    Log.e("123", "inside try  ");
                     while(reader.hasNext()){
                         Log.e("TAG", "reader values"+reader);
                         String name = reader.nextName();
                         if (name.equals("max_id")) {
                             long max_id = reader.nextLong();
                             Log.e("TAG", "sdbfhsajfgsdjbgksdfjv------------------"+max_id);
                           }  else {
                               Log.e("TAG", "c skfnvklsfvn skip value");
                             reader.skipValue();
                           }
                     }
                     reader.endObject();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    Log.e("TAG", "inside catch");
                    e.printStackTrace();
                }
} 
```

输出：

```
 01-28 10:20:53.519: E/TAG(420): Status code ----------- 200
01-28 10:20:53.679: E/TAG(420): inidde readgsonJsonReader at line 1 column 1
01-28 10:20:53.679: E/TAG(420): inside try
01-28 10:20:53.679: E/TAG(420): inside catch
01-28 10:20:53.679: W/System.err(420): java.io.EOFException: End of input at line 1 column 1
01-28 10:20:53.689: W/System.err(420):  at com.google.gson.stream.JsonReader.nextNonWhitespace(JsonReader.java:954)
01-28 10:20:53.689: W/System.err(420):  at com.google.gson.stream.JsonReader.consumeNonExecutePrefix(JsonReader.java:405)
01-28 10:20:53.689: W/System.err(420):  at com.google.gson.stream.JsonReader.peek(JsonReader.java:364)
01-28 10:20:53.689: W/System.err(420):  at com.google.gson.stream.JsonReader.expect(JsonReader.java:337)
01-28 10:20:53.689: W/System.err(420):  at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322)
01-28 10:20:53.689: W/System.err(420):  at com.example.httpconnectiondemo.MainActivity.readGson(MainActivity.java:136)
01-28 10:20:53.699: W/System.err(420):  at com.example.httpconnectiondemo.MainActivity.readTwitterFeed(MainActivity.java:116)
01-28 10:20:53.699: W/System.err(420):  at com.example.httpconnectiondemo.MainActivity.onCreate(MainActivity.java:64)
01-28 10:20:53.699: W/System.err(420):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-28 10:20:53.699: W/System.err(420):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-28 10:20:53.699: W/System.err(420):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-28 10:20:53.699: W/System.err(420):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-28 10:20:53.699: W/System.err(420):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-28 10:20:53.699: W/System.err(420):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-28 10:20:53.699: W/System.err(420):  at android.os.Looper.loop(Looper.java:123)
01-28 10:20:53.699: W/System.err(420):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-28 10:20:53.710: W/System.err(420):  at java.lang.reflect.Method.invokeNative(Native Method)
01-28 10:20:53.710: W/System.err(420):  at java.lang.reflect.Method.invoke(Method.java:507)
01-28 10:20:53.710: W/System.err(420):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-28 10:20:53.710: W/System.err(420):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-28 10:20:53.710: W/System.err(420):  at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T05:43:19.527

您`content`以错误的方式使用流。查看标记的行：

```
InputStream content = entity.getContent();

// (1)
BufferedReader bReader = new BufferedReader(new InputStreamReader(content));
String line;
while ((line = bReader.readLine()) != null) {
    builder.append(line);
}

// (2)
JsonReader reader = new JsonReader(new InputStreamReader(content));
reader.setLenient(true);
readGson(reader); 
```

这里的问题是您将相同的流包装了两次（在标记的行上）。

*   第一次换行后，您将通过流收集行并将它们连接到`builder`. 您必须意识到，实际上`bReader`它只是`content`流的一个包装器。因此，当您收集行时，`content`流中的内容会被吃掉。因此，条件`(line = ...) != null`是流处于输入末尾时`false`。`content`
*   然后再次包装`content`流 - 用于解析 JSON 内容。但是流**已经在此处输入的末尾**，因此 JSON 阅读器没有任何内容可以消费。这正是该行的含义：`java.io.EOFException: End of input at line 1 column 1`您的例外。

您所要做的就是只读取*一次*`content`流。所以，你有几个选择：

 **   不要将收到的内容保存到`String`. 您删除了第一个包装和使用`builder`. 如果这不是一个选项，那么我建议：
*   将整个响应保存到`String`. 注意：您可以为此使用`EntityUtils`该类，因为它会为您完成工作：

    ```
    HttpEntity entity = response.getEntity();

    // All the work is done for you here :)
    String jsonContent = EntityUtils.toString(entity);

    // Create a Reader from String
    Reader stringReader = new StringReader(jsonContent);

    // Pass the string reader to JsonReader constructor
    JsonReader reader = new JsonReader(stringReader);
    reader.setLenient(true);
    readGson(reader);

    ...
    // at the end of method return the JSON response
    return jsonContent; 
    ```*

# java - 返回访问 Web 应用程序的机器 ip 的方法

> ID：14555586
> 
> 赞同：0
> 
> 时间：2013-01-28T04:46:08.877
> 
> 标签：java, jsp

我有一个托管在 localhost 中的机器上托管的 jsp Web 应用程序。

我可以从 LAN 上的另一台机器访问此 Web 应用程序。我在这里所做的是我创建了一个 bean 类，它有一个返回访问 Web 应用程序的机器 IP 的方法。但是当我从另一台机器访问时，我得到了托管机器本身的 IP。谁能告诉它为什么会发生？告诉我如何获取访问本地主机中托管的 Web 应用程序的另一台机器的 IP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:56:38.997

你可以试试

> 获取远程地址

ServletRequest 方法。有关更多详细信息，请参阅[文档](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:36:34.927

您不能可靠地这样做，但是如果您可以控制所有客户端和服务器之间的网络，并且如果您愿意接受恶意请求可能会向您提供虚假信息，那么可以使用像[ServletRequest.getRemoteAddr()](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getRemoteAddr%28%29)这样的方法会给你那种信息。重申一下，它绝不保证是最初发送请求的机器的地址，也保证它在任何方面都是真实的。鉴于正确（或错误？）的网络条件，很容易欺骗该信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T06:39:57.867

这是使用网络服务来获取 IP 地址 看看

```
package ipInfo;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;

public class ExternalIp {
    private static String URL = "http://api-sth01.exip.org/?call=ip";

    public static void main(String[] args) {
        ExternalIp ipGetter = new ExternalIp();
        ipGetter.getExternalIp();
    }

    public void getExternalIp() 
    {
        BufferedReader reader = null;
        String line = "";
        int tries = 0;
        do {    
            try {
                reader = read(URL);
                /*while(reader.readLine() != null)
                {
                    line = line + reader.readLine();
                }*/
                line = reader.readLine();
            }
            catch (FileNotFoundException fne) {
                System.out.println("File not found for url: " + URL);
                System.out.println("Check your typing");
                System.out.println();
                return;
            }
            catch (IOException ioe) {
                System.out.println("Got IO Exception, tries = " + (tries + 1));
                System.out.println("Message: " + ioe.getMessage());
                tries++;
                try {
                    Thread.currentThread().sleep(300000);
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
                continue;
            }   
            catch (Exception exc) {
                exc.printStackTrace();
            }
        } while (reader == null && tries < 5);

        if (line != null && line.length() > 0) {
            System.out.println("Your external ip address is: " + line);
        }
        else {
            System.out.println("Sorry, couldn't get your ip address");
        }
    }

    public BufferedReader read(String url) throws Exception{
        return new BufferedReader(
            new InputStreamReader(
                new URL(url).openStream()));
    }

} 
```

# directx - 显示 Direct X 游戏之外的应用程序？

> ID：14555589
> 
> 赞同：1
> 
> 时间：2013-01-28T04:46:34.260
> 
> 标签：directx, video-capture, topmost

是否可以构建一个即使在游戏运行时也能显示自身的应用程序（TopMost）（Quake、Farcry、Black Ops、任何 Direct X 驱动的游戏）

我希望能够在玩游戏进行视频录制时记录我的按键操作。

这一定是可能的，因为 FRAPS 将 FPS 显示在使用直接 X 的所有内容之上，包括视频播放器。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:34:44.763

首先，这并不容易。FRAPs 与 API-Injection 一起工作，将一些代码设置到程序的绘图步骤中，其中考虑了许多不同版本的 directx 和 opengl。如果找到一个链接，将在其中进行更多解释：[Case Study Fraps](http://www.ring3circus.com/blog/2007/11/22/case-study-fraps/)。

也许在窗口模式下工作并使用全局挂钩捕获输入的解决方案更容易，但我从未尝试过这个方向的东西。如果您想使用 api-hooks，也许这个链接会很有用：[Direct3DHook](https://github.com/spazzarama/Direct3DHook)

# c++ - 使用 GUIDFromString 请求，包括 Shell32.dll：我该怎么做

> ID：14555591
> 
> 赞同：2
> 
> 时间：2013-01-28T04:46:55.997
> 
> 标签：c++, winapi, dll

我正在尝试使用 WinAPI 函数`GUIDFromString()`，但它需要一些技巧才能将其包含在我的项目中。

根据[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776431%28v=vs.85%29.aspx)文档：

> 此函数未在标头中声明或按名称从 .dll 文件中导出。它必须从 Shell32.dll 作为 GUIDFromStringA 的序号 703 和 GUIDFromStringW 的序号 704 加载。
> 
> 它也可以从 Shlwapi.dll 作为 GUIDFromStringA 的序号 269 和 GUIDFromStringW 的序号 270 访问。

我以前从未加载过 DLL，所以我不确定我应该做什么，我不确定加载 DLL 是否足够，我是否还必须包含一个编号为 703 的“序数”？任何人都可以就我需要做什么来使用这个功能甚至是一个例子提供任何建议吗？

我在下面的尝试不起作用（我使用的是 VC++ 2010 Express）：

```
#pragma comment(lib, "shell32.lib") // if I am including the dll do I need to include the lib aswell?

// I've heard that the dll location differs across versions of windows
// Does anyone know of a Cross-Windows-Version way to include Shell32.dll no matter where it is? Maybe use a keyword like "%SYSTEM%/Shell32.dll"
HINSTANCE shell32DLL = LoadLibary("C:/System/Shell32.dll"); 

// Now do I include 'Ordinal 703' as described in msdn? And how do I do that? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T09:00:48.387

如果您[阅读 的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776431.aspx)，`GUIDFromString()`它会说：

> GUIDFromString 可通过带有 Service Pack 2 (SP2) 的 Windows XP 或 Windows Vista 获得。在后续版本中可能会更改或不可用。应用程序应使用 CLSIDFromString 或 IIDFromString 代替此函数。

[`CLSIDFromString()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680589.aspx)并且[`IIDFromString()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687262.aspx)都按名称从 Ole32.dll 导出，因此您可以像使用任何其他 DLL 函数一样使用它们。

话虽如此，如果您仍然想使用`GUIDFromString()`然后使用[`LoadLibrary()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175.aspx)加载shell32.dll然后使用[`GetProcAddress()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212.aspx)访问该功能。 [MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686944.aspx)演示了如何做到这一点。要按序号加载函数，可以[`MAKEINTRESOURCE()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648029.aspx)在调用时使用宏`GetProcAddress()`。

因此，例如：

```
// MAKEINTRESOURCE() returns an LPTSTR, but GetProcAddress()
// expects LPSTR even in UNICODE, so using MAKEINTRESOURCEA()...
#ifdef UNICODE
#define MAKEINTRESOURCEA_T(a, u) MAKEINTRESOURCEA(u)
#else
#define MAKEINTRESOURCEA_T(a, u) MAKEINTRESOURCEA(a)
#endif

BOOL myGUIDFromString(LPCTSTR psz, LPGUID pguid)
{
    BOOL bRet = FALSE;

    typedef BOOL (WINAPI *LPFN_GUIDFromString)(LPCTSTR, LPGUID);
    LPFN_GUIDFromString pGUIDFromString = NULL;

    HINSTANCE hInst = LoadLibrary(TEXT("shell32.dll"));
    if (hInst)
    {
        pGUIDFromString = (LPFN_GUIDFromString) GetProcAddress(hInst, MAKEINTRESOURCEA_T(703, 704));
        if (pGUIDFromString)
            bRet = pGUIDFromString(psz, pguid);
        FreeLibrary(hInst);
    }

    if (!pGUIDFromString)
    {
        hInst = LoadLibrary(TEXT("Shlwapi.dll"));
        if (hInst)
        {
            pGUIDFromString = (LPFN_GUIDFromString) GetProcAddress(hInst, MAKEINTRESOURCEA_T(269, 270));
            if (pGUIDFromString)
                bRet = pGUIDFromString(psz, pguid);
            FreeLibrary(hInst);
        }
    }

    return bRet;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-12T15:32:35.033

将以下行另存为 SHLWAPIX.DEF：

```
LIBRARY SHLWAPI
VERSION 6.0
EXPORTS
 GUIDFromStringA @269
 GUIDFromStringW @270 
```

将以下行保存为 SHLWAPIX.C：

```
// https://msdn.microsoft.com/en-us/library/bb776431.aspx

__declspec(dllexport)
int __stdcall GUIDFromStringA(void *_1, void *_2)
{ return 0; }

__declspec(dllexport)
int __stdcall GUIDFromStringW(void *_1, void *_2)
{ return 0; } 
```

运行 `CL.EXE /LD /Zl SHLWAPIX.C /link /DEF:SHLWAPIX.DEF /NOENTRY` 创建导入库SHLWAPIX.LIB，然后删除SHLWAPIX.OBJ、SHLWAPIX.EXP和SHLWAPIX.DLL

将以下行保存为 SHLWAPIX.H：

```
#pragma once
#pragma comment(linker, "/DEFAULTLIB:SHLWAPIX.LIB")

__declspec(dllimport)
BOOL WINAPI GUIDFromStringA(LPCSTR psz, LPGUID pguid);

__declspec(dllimport)
BOOL WINAPI GUIDFromStringW(LPCWSTR psz, LPGUID pguid); 
```

最后将以下行保存为 SHLWAPIX.C：

```
#pragma comment(lib, "SHLWAPIX.LIB")
#pragma comment(lib, "USER32.LIB")

#pragma comment(linker, "/ENTRY:wWinMainCRTStartup")
#pragma comment(linker, "/SUBSYSTEM:WINDOWS,5.0")
#pragma comment(linker, "/VERSION:1.0")

#define STRICT
#define UNICODE
#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include "shlwapix.h"

VOID wWinMainCRTStartup()
{
    GUID guid = {0};
    WCHAR szBuffer[1025] = L"";

    if (GUIDFromStringA("{00112233-4455-6677-8899-AABBCCDDEEFF}", &guid))
        if (wsprintf(szBuffer, L"GUID = {%08lX-%04hX-%04hX-%02X%02X-%02X%02X%02X%02X%02X%02X}\n",`
                     guid.Data1, guid.Data2, guid.Data3, guid.Data4[0], guid.Data4[1], guid.Data4[2], guid.Data4[3], guid.Data4[4], guid.Data4[5], guid.Data4[6], guid.Data4[7]) > 0)
            MessageBox((HWND) NULL, szBuffer, L"GUIDFromStringA()", MB_OK);

    if (GUIDFromStringW(L"{FFEEDDCC-BBAA-9988-7766-554433221100}", &guid))
        if (wsprintf(szBuffer, L"GUID = {%08lX-%04hX-%04hX-%02X%02X-%02X%02X%02X%02X%02X%02X}\n",
                     guid.Data1, guid.Data2, guid.Data3, guid.Data4[0], guid.Data4[1], guid.Data4[2], guid.Data4[3], guid.Data4[4], guid.Data4[5], guid.Data4[6], guid.Data4[7]) > 0)
            MessageBox((HWND) NULL, szBuffer, L"GUIDFromStringW()", MB_OK);
} 
```

最后运行`CL.EXE /GS- SHLWAPIX.C`创建SHLWAPIX.EXE，再运行后者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:49:52.723

这会给你一个错误“语法错误'（'”：

```
typedef BOOL WINAPI (*LPFN_GUIDFromString)(LPCTSTR, LPGUID); 
```

正确的版本是：

```
typedef BOOL (WINAPI *LPFN_GUIDFromString)(LPCTSTR, LPGUID); 
```

# android - 扩展BaseAdapter，view什么时候变成null？

> ID：14555595
> 
> 赞同：0
> 
> 时间：2013-01-28T04:47:18.110
> 
> 标签：android, android-layout

```
public class CustomAdapter extends BaseAdapter 
```

我找到了一个扩展 BaseAdapter 的代码

> ```
>  public View getView(int index, View view, final ViewGroup parent) {
> 
>             if (view == null) {
>                 LayoutInflater inflater = LayoutInflater.from(parent.getContext());
>                 view = inflater.inflate(R.layout.single_list_item, parent, false);
>             }
>     }
> 
>  TextView textView = (TextView) view.findViewById(R.id.tv_string_data);
>         textView.setText(dataModel.getName()); 
> ```

我的问题是什么时候`view == null`？

为什么我们需要代码 `if (view == null) {`}

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:53:23.797

对于 listView 中的第一项，View 将为空。它需要为第一个项目充气。

请随时提出任何进一步的疑问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:54:06.367

Android 会重新循环 View 对象，以最大限度地减少对象创建和内存使用。传递给您的视图将是空的，在这种情况下，您应该创建它，或者视图将是非空的，这意味着它已被重新循环。再循环视图是您之前创建的视图，但现在可以用于不同的目的。

一个很好的例子是列表视图。一个列表可能有很多元素，比如 100 个。但是屏幕可能只显示列表的 10 个项目。因此，当您滚动屏幕时，屏幕上不再显示的项目的视图可能会传递给您以供重复使用。这是再循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:09:12.837

ListView 通常包含比显示的行数更多的数据。如果用户滚动列表，则行及其关联的视图将滚动到可见区域之外。表示行的 Java 对象可以重新用于新可见的行。

如果 Android 确定代表一行的 View 不再可见，它允许 getView() 方法通过 convertView 参数重用它。

性能优化的适配器将新数据分配给 convertView。这避免了扩充 XML 文件和创建新的 Java 对象。

如果没有 View 可供重用，Android 会将 null 传递给 convertView 参数。因此适配器实现需要检查这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T05:31:13.420

对于列表视图，我们必须为每个项目提供视图，并且我们还必须填充内容。在大多数情况下，相同的视图将在具有不同内容的每个项目中重复。所以在`getView`方法的第一次我们会检查，如果视图是空的，那么我们应该膨胀一个视图并填充内容并返回。第二次视图不会为空。因此，您可以重用或提供不同的视图。

# riak - Riak 没有开始

> ID：14555602
> 
> 赞同：1
> 
> 时间：2013-01-28T04:48:08.400
> 
> 标签：riak

如 basho 网站中所述，我已经安装了 riak 和 erlang。但是当我尝试使用以下命令启动 riak 时：
/etc/init.d/riak start
或
service riak start
我收到以下错误：正在
**启动 Riak：Riak 未能在 15 秒内启动，请参阅“riak 控制台”的输出更多信息。如果您想等待更长时间，请将环境变量 WAIT_FOR_ERLANG 设置为等待的秒数**
我还检查了命令：riak ping，它给出了错误：
**尝试通过 sudo -H -u riak Node 'riak@sys_ip 重新启动脚本' 不响应 ping**
我使用的是 64 位 Centos 6.3 机器。有人可以帮我吗？

最初，当我安装 riak 并检查状态时，它显示 riak 已经启动。在实验期间的某个地方，它已经停止工作。找不到，请问是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:55:08.580

谢谢大家！我找到了解决我的问题的方法。我以root用户身份运行命令。当我尝试使用与带有 sudo 前缀的非 root 用户相同的命令时，一切正常！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-04T16:22:58.830

尝试运行以下命令，它会在配置设置上运行诊断测试，并在出现任何错误时提供更详细的信息。

```
riak console 
```

`riak start`默认情况下不提供有关该问题的详细信息。在我的情况下，问题是 - 缺少对目录的写权限 - `/var/lib/riak/generated.configs`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:29:43.780

由于您没有提到任何版本的 Erlang，我想通知您，使用 Erlang R15B02 会导致 riak-admin 状态出错。最好将 Erlang R15B01 与 Riak 1.2 和 1.2.1 一起使用。Riak 1.0 需要 Erlang R15B03 及更高版本。所以，检查你是否安装了兼容版本。如果这不是问题，这里和你的问题一样。[Riak - Riak 未能在 15 秒内启动，](https://stackoverflow.com/questions/11640213/riak-riak-failed-to-start-within-15-seconds)

# iphone - 自定义视图的正确位置在哪里？

> ID：14555603
> 
> 赞同：1
> 
> 时间：2013-01-28T04:48:19.057
> 
> 标签：iphone, ios, ipad, uiview

我正在考虑其中一个`viewDidLoad` *或*在我的视图子类中`awakeFromNib`（因为我从笔尖加载视图）。从设计的角度来看，将自定义封装在视图子类中听起来更好。还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:54:28.373

为了我：

1.  如果 UI 更改需要与应用程序的模型协调，我通常在视图控制器中进行，因为我喜欢将其视为模型和视图之间的看门人。如果是创建控件，我`viewDidLoad`有时会在`viewDidAppear`. 如果它是基于方向变化的东西重新布局，我会在[`viewWillLayoutSubviews`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW90).

2.  对于不需要与模型进行广泛交互的任何复杂性，我将在视图子类中进行。

3.  另一个明显的替代方法是在 Interface Builder 中设计它（使用适当的自动调整掩码和/或自动布局约束），因此您无需以编程方式执行任何操作。人们经常根据控件的方向或大小进行布局更改，这些控件可以通过明智的自动调整大小设置或自动布局约束来自动处理。显然这通常是不可能的，但如果您只是根据主视图的大小调整布局，请不要忽视这些。

# php - 出现解析错误：语法错误，意外的 ';'

> ID：14555604
> 
> 赞同：-6
> 
> 时间：2013-01-28T04:48:35.140
> 
> 标签：php, parsing, syntax, backup

以下代码的小问题：

```
<?php  echo exec(‘cd /home/username/backup/files; tar -cvpzf `date +%y-%m-%d_%H-%M`.tar /home/username/public_html’); ?> 
```

我得到的错误是：

```
Parse error: syntax error, unexpected ';' on line 1 
```

上面的代码是第 1 行，很高兴找到解决方案。

提前感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:51:19.023

您在命令字符串周围的引号是错误的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T04:51:20.833

紧随文件之后；

```
/home/username/backup/files; 
```

你不应该有 ; 文件之后。

# perl - 如何对 perl 脚本的输出进行排序

> ID：14555605
> 
> 赞同：0
> 
> 时间：2013-01-28T04:48:38.640
> 
> 标签：perl

我有一个测试文件“from.xml”，其中包含以下内容：

```
<target>

<promptlist>
    <prompt address="EXA112" time="00:11:20.00">This is what I want to see first.second</prompt>
    <prompt address="EXA222" time="00:22:20.00">This is what I want to see second</prompt>
</promptlist>
</target>
<target>
<promptlist>
    <prompt address="EXA444" time="00:44:40.00">This is what I want to see fourth</prompt>
    <prompt address="EXA333" time="00:33:30.00">This is what I want to see third</prompt>
    <prompt address="EXA555" time="00:55:50.00">This is what I want to see fifth</prompt>
    <prompt address="EXA111" time="00:11:10.00">This is what I want to see first</prompt>
    <prompt address="EXA666" time="00:66:60.00">This is what I want to see sixth</prompt>
</promptlist>
</target> 
```

当我在文件上运行我的脚本时，它会正确生成以下内容：

```
00:11:20.00  EXA112  This is what I want to see first.second

00:22:20.00  EXA222  This is what I want to see second

00:44:40.00  EXA444  This is what I want to see fourth

00:33:30.00  EXA333  This is what I want to see third

00:55:50.00  EXA555  This is what I want to see fifth

00:11:10.00  EXA111  This is what I want to see first

00:66:60.00  EXA666  This is what I want to see sixth 
```

正如你在上面看到的，这就是我的目标，但在现实世界的应用程序中，时间是乱序的。有没有办法对这个输出进行排序？我已经搜索过，但没有什么清楚的。我已经创建了这个，我是编程和尤其是 Perl 的菜鸟。我需要按时间顺序输出的行。提前致谢。

```
#!/usr/bin/perl
use strict;                             
use warnings;                               
use diagnostics -verbose;                       

my $filename = $ARGV [0];                       
open( my $fh, '<', $filename ) or die "Can't open $filename: $!";       
while ( my $line = <$fh> ) {                        
if ( $line =~ /\<prompt / ) {                       

    if ( $line =~ /time=\"(.+?)\"/ ) {                                
    print"\n $1  ";                                                         
if ( $line =~ /address=\"(.+?)\"/ ) {               
    print"$1  ";                    
if ( $line =~ /\>(.+?)\</ ) {       
    print"$1\n\n ";     
    }
   }
  }  
 }
}
close $fh; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:51:32.643

与其打印，不如将其存储在一个数组中并[首先对其进行排序](http://perldoc.perl.org/functions/sort.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:01:18.180

存储、排序、输出。

```
my @data;
while ( <$fh> ) {
   if ( /<prompt / ) {
       if ( /time="([^"]+)"/ ) {
          my $time = $1;

          if ( /address="([^"]+)"/ ) {
             $addr = $1;

             if ( />([^<]+)</ ) {
                push @data, "$time $addr $1\n\n\n";
             }
          }
       }
   }
}

print for sort @data; 
```

其他变化：

*   固定缩进。
*   其中一个行尾被打印在一个奇怪的位置，可能是因为您之前忘记打印换行符。
*   移除了非贪婪修饰符的使用。我讨厌它; 它只会带来惊喜。
*   删除了`$line`不必要的使代码更长的使用。
*   去掉了很多没用的`\`。

* * *

也就是说，使用适当的 XML 解析器而不是编写自己的草率版本同样容易。

```
use XML::LibXML qw( );

my $parser = XML::LibXML->new();
my $doc = $parser->parse_file($ARGV[0]);
my $root = $doc->documentElement();

my @data;
for my $prompt_node ($root->findnodes('/target/promptlist/prompt')) {
   my $time   = $prompt_node->getAttribute('time');
   my $addr   = $prompt_node->getAttribute('address');
   my $prompt = $prompt_node->textContent();
   push @data, "$time $addr $prompt\n\n\n";
}

print for sort @data; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-27T12:19:31.217

您可以将 sort 与排序例程一起使用：

```
#!/usr/bin/perl

use strict;
use warnings;

print "Before sort:\n";
my @s = ("00:22:20.00  EXA222  This is what I want to see second", "00:11:20.00  EXA112  This is what I want to see first.second");
print "$s[0]\n";
print "$s[1]\n";

@s = sort {substr($a, 0, 11) cmp substr($b, 0, 11)}(@s);

print "After sort:\n";
print "$s[0]\n";
print "$s[1]\n"; 
```

它打印：

```
Before sort:
00:22:20.00  EXA222  This is what I want to see second
00:11:20.00  EXA112  This is what I want to see first.second
After sort:
00:11:20.00  EXA112  This is what I want to see first.second
00:22:20.00  EXA222  This is what I want to see second 
```

# c++ - 数字中设置的位数

> ID：14555607
> 
> 赞同：21
> 
> 时间：2013-01-28T04:48:57.360
> 
> 标签：c++, c, bitmap, bit-manipulation, bit

下面的神奇公式给出了一个数字中设置的位数（汉明权重）。

```
/*Code to Calculate count of set bits in a number*/
int c;
int v = 7;
v = v - ((v >> 1) & 0x55555555);                    // reuse input as temporary
v = (v & 0x33333333) + ((v >> 2) & 0x33333333);     // temp
c = ((v + (v >> 4) & 0xF0F0F0F) * 0x1010101) >> 24; // count
printf(" Number of Bits is %d",c);
/*-----------------------------------*/ 
```

来自： http: [//graphics.stanford.edu/~seander/bithacks.html](http://graphics.stanford.edu/~seander/bithacks.html)

谁能解释一下这背后的理由？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-28T05:13:31.850

这是非常聪明的代码，显然比简单的天真的循环更难理解。

对于第一行，我们只取一个四位数量，并将其命名为`abcd`。代码基本上是这样做的：

```
abcd - ((abcd >> 1) & 0101) = abcd - (0abc & 0101) = abcd - 0a0c 
```

因此，在每组两位中，它减去高位的值。那给我们带来了什么？

```
11 - 1 -> 10 (two bits set)
10 - 1 -> 01 (one bit set)
01 - 0 -> 01 (one bit set)
00 - 0 -> 00 (zero bits set) 
```

因此，第一行将每个连续的两位组设置为原始值中包含的位数——它计算两组中设置的位。调用得到的四位量`ABCD`。

下一行：

```
(ABCD & 0011) + ((ABCD>>2) & 0011) = 00CD + (AB & 0011) = 00CD + 00AB 
```

因此，它需要两个位的组并将对相加。现在，每个四位组包含在输入的相应四位中设置的位数。

在下一行中，`v + (v >> 4) & 0xF0F0F0F`（解析为`(v + (v >> 4)) & 0xf0f0f0f`）执行相同操作，将成对的四位组添加在一起，以便每个八位组（字节）包含相应输入字节的位集计数。我们现在有一个像`0x0e0f0g0h`.

请注意，将任何位置的字节乘以将将该字节`0x01010101`复制到最重要的字节（以及在较低字节中留下一些副本）。例如，`0x00000g00 * 0x01010101 = 0x0g0g0g00`。因此，通过乘以`0x0e0f0g0h`，我们将保留`e+f+g+h`最高字节；最后`>>24`的 the 提取该字节并为您提供答案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-02-02T03:46:01.453

python中的一种线性解决方案，用于计算给定二进制数中的个数

> > > > [i for i in str(bin(n)) if i=="1"].count("1")

# iphone - 奇怪的 xib 文件到 nib 转换问题

> ID：14555610
> 
> 赞同：0
> 
> 时间：2013-01-28T04:49:39.527
> 
> 标签：iphone, xib, loadnibnamed

我试图在 Xcode 4.5.2 上添加一个新的视图控制器，我使 xib 文件与 5.1 兼容，开始玩它，突然注意到这个自定义表格视图单元根本没有被加载，它总是在加载时造成崩溃。

> [self.cellNib instantiateWithOwner:self options:nil];

我开始检查正在创建的 .app 文件，我可以看到除了这个新的自定义表格视图单元格 nib 文件之外，所有其他 xib 都在**“nib”**扩展名中。什么设置可以使这个xib文件像其他人一样转换为nib。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:54:45.747

转到文件检查器，然后选择身份检查器，如下所示： ![在此处输入图像描述](../Images/9f51ab15e9a501008230aa76b837ffee.png)

在类中选择您要添加 nib 文件的特定类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:20:24.923

您需要在自定义类“类”字段的字段中提供您的自定义类名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:24:39.050

我所有的视图控制器及其 xib 都在另一个项目中，该项目在主项目中被引用，问题在于我对主目标的引用方法。我只是将 xib 文件从引用的项目拉到主要目标。实际的做法是这样的

触摸主目标的 xcodeprojfile，选择目标，构建阶段，在复制资源包中按“+”，然后添加 xib 文件。感谢@vishal 对这个问题的猜测。

# spring - 更改数据源连接 url 运行时

> ID：14555611
> 
> 赞同：6
> 
> 时间：2013-01-28T04:49:40.820
> 
> 标签：spring, hibernate, datasource, connection-pooling

我正在开发一个使用 spring + hibernate + mysql 和 c3p0 进行连接池的项目。

目前，连接池的属性是通过在 src 之外定义的属性加载的。（例如：${db_uname}）

当我们创建 spring bean 时，一切都开始正常。

可能会发生我们连接的数据库由于某种原因无法访问，我们想切换主机。

需要实现回调，它应该连接到新主机并重新初始化池

关于如何优雅地覆盖现有数据源/连接池的任何指针都会有很大帮助。

这是我的弹簧配置文件的样子

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/tx 
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/util
    http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<!-- Component scans -->
<import resource="component-scans-1.xml" />
<import resource="component-scans-2.xml" />

<util:properties id="serviceManagerProperties" 
    location="classpath:servicemanagers.properties" />

<!-- Properties file -->
<context:property-placeholder location="classpath:database.config.properties,classpath:framework.properties" />

<!-- context:annotation-config / -->
<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<context:mbean-server id="mbeanServer" />
<context:mbean-export server="mbeanServer" default-domain="a.b.c" />

<bean id="cacheManager" factory-method="getInstance"
    class="net.sf.ehcache.CacheManager" />

<bean class="net.sf.ehcache.management.ManagementService" init-method="init">
    <constructor-arg ref="cacheManager" />
    <constructor-arg ref="mbeanServer" />
    <constructor-arg value="false" />
    <constructor-arg value="false" />
    <constructor-arg value="false" />
    <constructor-arg value="true" />
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter" ref="jpaAdapter" />
    <property name="persistenceXmlLocation" value="classpath*:META-INF/framework-persistence.xml" />
    <property name="persistenceUnitName" value="PU-NAME" />
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.cache.use_query_cache">${hibernate.cache.use_query_cache}</prop>
            <prop key="hibernate.cache.use_second_level_cache">${hibernate.cache.use_second_level_cache}</prop>
            <prop key="hibernate.cache.region.factory_class">
                org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory
            </prop>

            <prop key="hibernate.ejb.cfgfile">hibernate.cfg.xml</prop>
            <prop key="hibernate.generate_statistics">true</prop>

            <!-- CONNECTION SETTINGS -->
            <prop key="hibernate.connection.driver_class">
                com.mysql.jdbc.Driver
            </prop>
            <prop key="hibernate.connection.url">
                jdbc:mysql://${dbhost}/${dbschema}?zeroDateTimeBehavior=convertToNull&amp;useUnicode=true&amp;characterEncoding=UTF-8
            </prop>
            <prop key="hibernate.connection.username">${dbuser}</prop>
            <prop key="hibernate.connection.password">${dbpass}</prop>

            <!-- CONNECTION POOLING -->
            <prop key="hibernate.connection.provider_class">
                org.hibernate.connection.C3P0ConnectionProvider
            </prop>
            <prop key="hibernate.c3p0.maxPoolSize">${hibernate.c3p0.maxSize}</prop>
            <prop key="hibernate.c3p0.minPoolSize">${hibernate.c3p0.minSize}</prop>
            <prop key="hibernate.c3p0.acquireIncrement">${hibernate.c3p0.acquireIncrement}</prop>
            <prop key="hibernate.c3p0.idleConnectionTestPeriod">${hibernate.c3p0.idleTestPeriod}</prop>
            <prop key="hibernate.c3p0.maxStatements">${hibernate.c3p0.maxStatements}</prop>
            <prop key="hibernate.c3p0.timeout">${hibernate.c3p0.timeout}</prop>

        </props>
    </property>
</bean>

<bean id="jpaAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" /> 
```

假设数据库模式是正确的，假设我在事件中获得了数据库凭据和主机信息，我需要“重新设置”连接池。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:42:54.457

[AbstractRoutingDataSource](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/datasource/lookup/AbstractRoutingDataSource.html)是一个不错的选择。

像这样使用的 XML 或注释：

```
<bean id="ds1" class="..c3p0.DataSource">
    ...
</bean>

<bean id="ds2" class="..c3p0.DataSource">
    ...
</bean>

<bean id="dataSource" class="..xxx.RoutingDataSource">
   <property name="targetDataSources">
      <map key-type="java.lang.String">
         <entry key="ds1" value-ref="ds1"/>
         <entry key="ds2" value-ref="ds2"/>             
      </map>
   </property>
   <property name="defaultTargetDataSource" ref="ds1"/>
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" /> 
...
</bean> 
```

然后构建一个类来确定当前的数据源。

```
public class RoutingDataSource extends AbstractRoutingDataSource {
    private static final ThreadLocal<String> holder = new ThreadLocal<String>();

    protected Object determineCurrentLookupKey()
    {
        return holder.get();
    }

    public static void clear(){
        holder.remove();
    }

    public static void setDataSourceKey(String key){
        holder.set(key);
    }

} 
```

顺便说一句，'try-finally' 语句很无聊！

```
try{
    RoutingDataSource.setDataSourceKey("ds1");
    myDao.doXXX();
}finally{
    RoutingDataSource.clear();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T06:49:05.200

```
<beans:bean id="dataSource"
    class="org.springframework.aop.framework.ProxyFactoryBean">
    <beans:property name="targetSource" ref="swappableDataSource" />
</beans:bean>

<beans:bean id="dummyDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close" />

<beans:bean name="swappableDataSource"
    class="org.springframework.aop.target.HotSwappableTargetSource">
    <beans:constructor-arg ref="dummyDataSource" />
</beans:bean> 
```

在你的代码中的一些地方你可以做到这一点。

```
@Autowired
HotSwappableTargetSource swapable;

public void changeDatasource() throws Exception
{
            swapable.swap(createNewSource();

}

ComboPooledDataSource createNewSource() throws Exception {
    ComboPooledDataSource ds2 = new ComboPooledDataSource();
    ds2.setJdbcUrl(url);
    ds2.setDriverClass(driver);
    ds2.setUser(username);
    ds2.setPassword(password);

    return ds2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:08:14.877

如果您要求多个数据库连接..可以通过创建多个来使用休眠，`hibernate.cfg.file`这有些不合适

通过以下行，您可以实现这一点。

```
SessionFactory sf = new Configuration().configure("somename.cfg.xml").buildSessionFactory(); 
```

当您的主要连接未建立时，您已经加载了另一个`hibernate configuration`......否则是不可能的。

# backbone.js - 如何通过 ID 以外的方式获取 Backbone.js 模型？

> ID：14555612
> 
> 赞同：8
> 
> 时间：2013-01-28T04:49:41.163
> 
> 标签：backbone.js

Backbone.js 通过 ID 获取模型的默认 RESTful 方法简单直接。但是，我似乎找不到任何通过不同属性获取模型的示例。如何通过不同的属性获取 Backbone.js 模型？

```
var Widget = Backbone.Model.extend({
    urlRoot: '/widgets',
    fetchByName: function(){ ... }
});
var foowidget = new Widget({name: 'Foo'});
foowidget.fetchByName(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T07:38:58.100

您可以尝试在您的`base model`定义上或在调用 fetch 时按需执行类似的操作。

```
model.fetch({ data: $.param({ someParam: 12345}) }); 
```

在你的情况下，沿着线。

```
var Widget = Backbone.Model.extend({
    initialize: function(options) {
        this.name = options.name;        
    },
    urlRoot: '/widgets',
    fetchByName: function(){ 
        this.fetch({ data: $.param({ name: this.name }) }) 
    }
});

var foowidget = new Widget({name: 'Foo'});
foowidget.fetchByName(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T04:56:07.627

一种方法是覆盖 Backbone.sync() 方法，无论是针对所有类还是仅针对您的类。但是，大概您的目标是仅覆盖单个模型的 fetch 。一种方法是直接调用 jQuery.ajax(...)，并在成功时获取响应并设置它，例如

```
fetchByName: function() {
   var self = this;

    $.ajax({
      url: self.urlRoot+ "?name="+this.get('name'),
      type: 'GET',
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(data) {
          self.set(data);
      }
    });

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T04:59:25.070

如果模型是集合的一部分，您可以使用 where() 拉出符合某些条件的模型。

请参阅[http://backbonejs.org/#Collection-where](http://backbonejs.org/#Collection-where)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-28T22:00:52.190

我真的很喜欢“user645715”建议的方法。我已将代码调整为更加通用。如果您将其添加到主干模型，它将允许您通过一个或多个属性搜索服务器，并且应该作为`fetch`.

```
fetchByAttributes: function(attributes, callbacks) {

    var queryString = [];
    for(var a in attributes){
        queryString.push( encodeURIComponent(a)+'='+encodeURIComponent(attributes[a]) );
    }
    queryString = '?'+queryString.join('&');

    var self = this;

    $.ajax({
        url: this.urlRoot+queryString,
        type: 'GET',
        dataType: "json",
        success: function(data) {
            self.set(data);
            callbacks.success();
        },
        error: function(data){
            callbacks.error();
        }
    });
} 
```

它可以这样使用：

```
var page = new Page();
page.fetchByAttributes({slug:slug}, {
    success: function(){
        console.log('fetched something');
    },
    error: function(){
        console.log('nothing found');
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-11T08:07:35.220

这很简单 model.fetch 在某些方面与 $.ajax 相同

```
model = Backbone.Model.extend({
    urlRoot: "/root/"
});

var Model = new model();

Model.fetch({
    beforeSend: function () {
        console.log("before");
    },
    data: {
        param1: "param1",
        param2: "param2"
    },
    success: function () {
        console.log("success");
    },
    error: function () {
        console.log("failure");
    }
}); 
```

# c# - fileInformationFactory.GetVirtualizedItemsVector(); 导致尝试读取或写入受保护内存错误

> ID：14555613
> 
> 赞同：0
> 
> 时间：2013-01-28T04:49:50.410
> 
> 标签：c#, windows-runtime, winrt-xaml, winrt-async

我在 c# 中使用以下代码绑定我的gridview

CollectionViewSource globalSource = App.Current.Resources["GlobalViewSource"] as CollectionViewSource; globalSource.Source = fileInformationFactory.GetVirtualizedItemsVector();

在这里，我在 app.xaml 中声明了集合视图源，因为我还需要在其他页面中使用相同的源。

当我从一个页面导航到另一个页面并且在上面的行中发生错误时，这是​​常见的错误。

你能指导如何解决它吗？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:24:00.593

现在解决了。。

实际上我用于另一个页面控件的相同来源。我已经删除了那个来源并且它现在工作正常

# ruby-on-rails - 为什么在 Recaptcha 中键入关键字后总是显示空白闪烁消息？

> ID：14555627
> 
> 赞同：0
> 
> 时间：2013-01-28T04:51:29.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

当在 Recaptcha 中键入关键字没问题时，我总是会弹出这个空白的 flash 消息。为什么？我该如何解决这个问题？

![在此处输入图像描述](../Images/93103cc7027e40d14be0a33f88c4296e.png)

**路线**

```
devise_for :users, :controllers => { :registrations => "registrations" } 
```

**注册控制器.rb**

```
def create
    if verify_recaptcha
        super
        flash.delete(:recaptcha_error)
        else
        build_resource
        clean_up_passwords(resource)
        flash.delete(:recaptcha_error)
        flash[:alert] = "Typed keyword is not correct!"
        render :template => '/registrations/new' 
    end
end 
```

**查看闪光灯**

```
<% flash.each do |name, msg| %>
  <div class="alert alert-<%= name == :notice ? "success" : "error" %>">
    <a class="close" data-dismiss="alert">&#215;</a>
    <%= content_tag :div, msg, :id => "flash_#{name}" if msg.is_a?(String) %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:01:01.590

使用`flash.now[:alert]`或`:alert`选择`render`立即使用闪信的方法。

例子：

```
render :template => '/registrations/new', :alert => "Typed keyword is not correct!" 
```

# c# - 如何从 c# windows 窗体连接 java servlet？

> ID：14555629
> 
> 赞同：0
> 
> 时间：2013-01-28T04:51:39.913
> 
> 标签：c#, java, google-app-engine, servlets

我已经有一个在应用程序引擎中使用 java 实现的现有应用程序......现在我想从 c# 表单程序连接这个 servlet 吗？，......这是请求的试用代码

```
HttpWebRequest authRequest = (HttpWebRequest)HttpWebRequest.Create(googleLoginUrl);
byte[] buffer = Encoding.ASCII.GetBytes(postData);
authRequest.ContentLength = buffer.Length;
 Stream postDataStr=authRequest.GetRequestStream();
postDataStr.Write(buffer, 0, buffer.Length);
postDataStr.Close(); 
```

现在它已连接到 GSE（Google Servlet 引擎）...我想要对此做出响应....如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:00:12.027

您只需要阅读回复：

```
HttpWebResponse response = (HttpWebResponse)authRequest.GetResponse ();
Console.WriteLine ("Content length is {0}", response.ContentLength);
Console.WriteLine ("Content type is {0}", response.ContentType);
string raw_html = (new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

您可以从以下网址查看更多示例：http: [//msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)

注意：我相信由于您要发布数据，您还必须`authRequest`通过以下方式将您的设置为 POST：

```
authRequest.Method = "POST"; 
```

# php - Extjs 网格不显示表格数据

> ID：14555630
> 
> 赞同：0
> 
> 时间：2013-01-28T04:51:44.263
> 
> 标签：php, extjs, firebug

我也使用 EXTJS 进行网格显示和分页。我的问题是网格面板正在显示，但表格内容未显示在网格中。我使用过 php 和 mysql。从表中检索数据的 PHP 代码：

```
<?php

ini_set('display_errors', 1);
error_reporting(E_ALL | E_STRICT);
define('_PJEXEC', 1);
define('DS', DIRECTORY_SEPARATOR);
define('PJPATH', dirname(__FILE__));
define('DB_DIR', PJPATH . DS . 'DB_SETUP');
define('LIB_DIR', PJPATH . DS . 'library');

if (file_exists(PJPATH . DS . 'template.php')) {
    include_once PJPATH . DS . 'template.php';
    include_once PJPATH . DS . 'process.php';
    include_once LIB_DIR . DS . 'factory.php';
}

            $page_num = $_REQUEST['start'];

            $limit=$_REQUEST['limit'];

            $data = PJFactory::getJobAuditDetails();

            $rows= mysql_num_rows($data);

            $result =  PJFactory::displayJobAuditDetail($page_num, $limit);

            while($num_rows=  mysql_fetch_array($result,MYSQLI_ASSOC)){
                $display[]=array('id'=>$num_rows['id'],
                    'id_job_audit'=>$num_rows['id_job_audit'],
                    'error_message'=>$num_rows['error_message']

                );
               }
          $myData = array('errorDisplay'=>$display, 'totalCount'=>$rows);
           echo json_encode($myData);

?> 
```

Java 脚本页面

```
Ext.require([
    'Ext.grid.*',
    'Ext.data.*'
]);
Ext.onReady(function(){
   // Ext.QuickTips.init();
   var store =new Ext.data.Store({
       proxy: new Ext.data.HttpProxy({
       url: 'processdisplay.php'
      // method: 'GET'  
       }) ,  
     //type: 'ajax',
       reader:  new Ext.data.JsonReader({ 
           type: 'json',
             root:'errorDisplay',
             totalProperty:'totalCount',
             id: 'id'
       },
            [ 
               {name: 'id',mapping: 'id',type: 'int'},

               {name:'id_job_audit',mapping:'id_job_audit',type:'string'},
               {name :'error_message',mapping:'error_message',type:'string'}
         ]
     ),
          autoLoad : true,
           idProperty: 'id'
   });
  // baseParams:{task: "LISTING"}

   var grid = new Ext.grid.GridPanel({

       store: store,

       columns: [

           {header: 'id', width: 30, sortable: true, dataIndex: 'id'},

          // {header: 'id', width: 100, sortable: true, dataIndex: 'id'},

           {header: 'id_job_audit', width: 100, sortable: true, dataIndex: 'id_job_audit'},

           {header: 'error_message', width: 250, sortable: true, dataIndex: 'error_message'}

       ],

       stripeRows: true,

      height:250,

       width:500,

       title:'Job Error Details',
       bbar: new Ext.PagingToolbar({

            pageSize:20,

            store: store,

            displayInfo: true,

            displayMsg: 'Displaying topics {0} - {1} of {2}',

            emptyMsg: "No topics to display"

        })

    });
//store.show();
   store.load();
    // render this grid to paging-grid element
    grid.render('paging-grid');
}); 
```

我已经在 firebug 中检查了 echo json_encode($myData) 的结果。它显示正确并在 firebug 中也检查了 JSON 选项，如下所示

```
errorDisplay
    [Object { id="1", id_job_audit="4", error_message="Missing Category for Pa...avigation Id - 10097374"}, Object { id="2", id_job_audit="4", error_message="Missing Category for Pa...avigation Id - 10097374"}, Object { id="3", id_job_audit="4", error_message="Missing Category for Pa...avigation Id - 10097374"}, 22 more...]

totalCount
    102 
```

我不知道哪里错了。网格是空的，显示消息为“没有要显示的主题”。请说明清楚。

编辑：我已经通过仅对从 db 检索到的结果进行编码进行了测试。当时我在前 25 条记录的网格中显示。即（在我的情况下，echo json_encode($display)）

数组结果是否只能在 JSON 中编码？因为在我进入 firebug 作为数组对象之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:45:13.260

读者是代理的属性，而不是商店。此外，您应该使用模型来提供字段。应该看起来像这样（未经测试）：

```
Ext.require(['Ext.grid.*', 'Ext.data.*']);

Ext.define('MyModel', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'id',
        mapping: 'id',
        type: 'int'
    }, {
        name: 'id_job_audit',
        mapping: 'id_job_audit',
        type: 'string'
    }, {
        name: 'error_message',
        mapping: 'error_message',
        type: 'string'
    }]
});

Ext.onReady(function() {
    var store = new Ext.data.Store({
        model: MyModel,
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'processdisplay.php',
            reader: {
                type: 'json',
                root: 'errorDisplay',
                totalProperty: 'totalCount'
            }
        })
    });
    // baseParams:{task: "LISTING"}

    var grid = new Ext.grid.GridPanel({

        store: store,

        columns: [{
            header: 'id',
            width: 30,
            sortable: true,
            dataIndex: 'id'
        },

        // {header: 'id', width: 100, sortable: true, dataIndex: 'id'},

        {
            header: 'id_job_audit',
            width: 100,
            sortable: true,
            dataIndex: 'id_job_audit'
        }, {
            header: 'error_message',
            width: 250,
            sortable: true,
            dataIndex: 'error_message'
        }],

        stripeRows: true,

        height: 250,

        width: 500,

        title: 'Job Error Details',
        bbar: new Ext.PagingToolbar({

            pageSize: 20,

            store: store,

            displayInfo: true,

            displayMsg: 'Displaying topics {0} - {1} of {2}',

            emptyMsg: "No topics to display"

        })

    });
    //store.show();
    store.load();
    // render this grid to paging-grid element
    grid.render('paging-grid');
}); 
```

# c# - 识别给定线程的位置

> ID：14555631
> 
> 赞同：4
> 
> 时间：2013-01-28T04:52:22.970
> 
> 标签：c#, multithreading

在确定了一个特定的感兴趣的线程之后，是否可以在运行时以编程方式获取它的位置？

换句话说，我想看看这个线程当前正在执行哪个方法：

> var executionThread = System.Threading.Thread.CurrentThread;

我知道在 VisualStudio 中调试时我可以在“线程”窗口中找到此信息，但我很难知道这是否可以在代码中获得。

我的目标是定期记录我在长时间运行的进程中监控的线程的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:36:29.340

您将根据定义引入竞争条件——当另一个线程观察到被观察线程*正在*执行`MethodX`时，它可能已经移动到——`MethodY`因为它会持续运行。或者，您可以`MethodX`在查看时进行观察，但它大部分时间都花在`MethodY`. 你想做的事情可以用调试器和分析器来完成——这些将是你最好的选择，也是最可靠的。

# asp.net - 如何使用 Hightcharts 创建印度地图？

> ID：14555633
> 
> 赞同：0
> 
> 时间：2013-01-28T04:52:56.653
> 
> 标签：asp.net, map, highcharts

我想在 Graph 中生成报告。假设我想查看我在印度各地的销售情况。我想在印度地图上看到。所以我可以看到这个州的销售额是这么多等等。我使用 Hight Charts 生成了条形图、饼图和折线图。但现在我想生成地图。但我不知道如何通过它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:13:34.230

HighCharts 有一些关于做热图（或等值线）的预 alpha 概念证明。[在这里](http://highcharts.uservoice.com/forums/55896-general/suggestions/971471-create-highmaps-mapping-library-like-ammap-but-w)看到这篇文章。它不在主要发布版本中。

现在，您可以使用任意数量的其他 JS 库来执行此操作。基本上有3个步骤：

1.  获取 SVG（或其他格式）的映射数据。这些是用于绘制所需地理特征轮廓的 shapefile。
2.  在这些映射 shapefile 中有一个唯一的关联 ID。现在将您的数据值分配给此 ID/区域。
3.  使用[D3](http://d3js.org/)、[raphael](http://raphaeljs.com/)等绘制 shapefile 并链接数据。如果您身边有大量现金，您可以将其交给 ESRI 以购买[ESRI ArcGIS](http://www.esri.com/software/arcgis)。

# django-commands - 如何配置 django-supervisord？

> ID：14555634
> 
> 赞同：2
> 
> 时间：2013-01-28T04:53:14.263
> 
> 标签：django-commands, django-supervisor

我正在尝试为 webfaction 中的 django fastcgi 进程编写一个 supervisord.conf。当我运行命令时，主管立即退出。

supervisord.conf

```
[program:celeryd]
command={{ PYTHON }} {{ PROJECT_DIR }}/manage.py celeryd -l info --settings=zone.webfaction
[program:celerycam]
command={{ PYTHON }} {{ PROJECT_DIR }}/manage.py celerycam --settings=zone.webfaction
[program:runserver]
exclude=true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:32:27.553

```
[program:celeryd]
command={{ PYTHON }} {{ PROJECT_DIR }}/manage.py celeryd -B -E -l info --settings=zone.webfaction
[program:celerycam]
command={{ PYTHON }} {{ PROJECT_DIR }}/manage.py celerycam --settings=zone.webfaction
[program:autoreload]
exclude=true
[program:runserver]
exclude=true
[program:celerybeat]
exclude=true 
```

# javascript - 使用 .detach 删除表的一部分

> ID：14555637
> 
> 赞同：0
> 
> 时间：2013-01-28T04:53:28.610
> 
> 标签：javascript, jquery, jquery-selectors, checkbox

如果复选框被选中，我需要一个函数来添加和删除表中的列。我目前得到的代码在很大程度上可以正常工作。控制台消息在正确的时间出现，并且表格列已正确添加到 HTML。

问题出在`else{}`部分：未选中复选框时未删除列。在萤火虫中，我收到一条消息，指出我的选择器错误，但我不确定如何修复它。假设选择器是正确的，我的应用`.detach(this)`是否正确？

```
 function makevisible(idsandclasses,object,folder){     
    $('#checkbox'+idsandclasses).change(function() {
      console.log(idsandclasses, "before if checked")

    if($('#checkbox'+idsandclasses).is(':checked')){
       console.log(idsandclasses, "if checked")
       $('tr:contains("Details")').append('<td id="rowdetails'+folder+'">'+object.name+'</td>')
       }else{
             console.log("unchecked")
             $('#rowdetails'+folder).detach(this)
             }  
    })
}; 
```

这里我使用函数：

```
$(document).ready(function() {
    $("#dot0001").hover(makevisible("info0001", object0001,"object0001"))
}) 
```

这是萤火虫消息：

TypeError: expr.replace 不是函数
expr = expr.replace(rattributeQuotes, "='$1']" )

这是我的 jquery-1.9.0.js 文件中我的代码存在问题的部分：

```
expr = expr.replace( rattributeQuotes, "='$1']" ); 
```

我认为不需要 HTML。如果是这样的话，尽管让我知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:57:31.147

您需要将选择器传递给`detach`（或根本没有可选的）。您正在传递`this`它是一个 DOM 元素。理想情况下，`$('#rowdetails'+folder)`将匹配您尝试分离的元素。

资源：

[http://api.jquery.com/detach/](http://api.jquery.com/detach/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:17:04.363

我想问题是

```
$(document).ready(function() {
    $("#dot0001").hover(function(){
makevisible("info0001", object0001,"object0001")
})
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T04:59:39.187

`this`从分离中移除。就够`.detach()`了。

# r - 又一个聚合

> ID：14555638
> 
> 赞同：4
> 
> 时间：2013-01-28T04:53:37.150
> 
> 标签：r, aggregate, reshape

（对不起，如果标题不是很丰富：我不知道如何更好地定义这个问题）

我的数据格式如下：

![原始数据](../Images/30caed6c67a84b27abcfaf06d99a0366.png)

在每一组中，我有一个`pre`值和一个或两个`post`值。我想将此表转换为以下内容：

![我想得到什么](../Images/2704316b503a2fb9e8a1de468ad02c35.png)

我正在考虑将数据与以下内容进行分组：

```
aggregate(mydata, by = group, FUN = myfunction) 
```

或者

```
ddply(mydata, .(group), .fun = myfunction) 
```

并处理我函数中每个组的元素。但我不知道如何做到这一点，因为我需要同时传递`type`和传递`value`给我的函数。有一个更好的方法吗？

**更新：**快速和肮脏的样本数据集：

```
mydata <- data.frame(group = sample(letters[1:5], 10, replace = TRUE), 
                     type = sample(c("pre", "post"), 10, replace = TRUE), 
                     value = rnorm(10)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T05:13:04.130

尝试这样的事情：

```
mydf <- data.frame(group = c("A", "A", "B", "B",
                             "C", "C", "C", "D",
                             "D", "E", "E"),
                   type = c("pre", "post", "pre",
                            "post", "pre", "post",
                            "post", "pre", "post",
                            "pre", "post"),
                   value = 1:11)

times <- with(mydf, ave(value, group, type, FUN = seq_along))
xtabs(value ~ group + interaction(type, times), mydf)
#      interaction(type, times)
# group post.1 pre.1 post.2 pre.2
#     A      2     1      0     0
#     B      4     3      0     0
#     C      6     5      7     0
#     D      9     8      0     0
#     E     11    10      0     0 
```

或者：

```
times <- with(mydf, ave(value, group, type, FUN = seq_along))  
mydf$timevar <- interaction(mydf$type, times)
reshape(mydf, direction = "wide", idvar = "group", 
        timevar="timevar", drop="type")
#    group value.pre.1 value.post.1 value.post.2
# 1      A           1            2           NA
# 3      B           3            4           NA
# 5      C           5            6            7
# 8      D           8            9           NA
# 10     E          10           11           NA 
```

在这两种解决方案中，关键是创建一个“时间”变量，该变量由“类型”和可以用`ave`.

为了完整起见，这里`dcast`来自“reshape2”：

```
times <- with(mydf, ave(value, group, type, FUN = seq_along))
library(reshape2)
dcast(mydf, group ~ type + times)
#   group post_1 post_2 pre_1
# 1     A      2     NA     1
# 2     B      4     NA     3
# 3     C      6      7     5
# 4     D      9     NA     8
# 5     E     11     NA    10 
```

# android - Titanium/android中的自动函数调用接收和更新字段

> ID：14555639
> 
> 赞同：1
> 
> 时间：2013-01-28T04:53:48.000
> 
> 标签：android, tcp, client-server, titanium

我有一个用 config.js 编写的 tcp 回调函数，并将其包含在我的 index.js 文件中

```
Titanium.include('config.js'); 
```

我只希望每当某个客户端调用此回调时，index.js 中的文本字段都应该相应地更新它从函数接收到的数据，无论我们在哪个屏幕上它都应该更新后端中的字段。我尝试了很多方法，但都没有成功.请帮助和指导。

阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:34:05.007

在 config.js 中创建一个自定义事件并在需要时触发它

# git - GWT Source Code Repo - GIT 和 SVN - 哪个是跟踪更改的？

> ID：14555644
> 
> 赞同：9
> 
> 时间：2013-01-28T04:54:24.460
> 
> 标签：git, svn, gwt, gwt2

要跟踪更改的官方 gwt 源代码存储库是哪个？

git方式在这里 - [https://gwt.googlesource.com/gwt/](https://gwt.googlesource.com/gwt/)

旧的 svn 方式在这里 - [http://code.google.com/p/google-web-toolkit/source/list](http://code.google.com/p/google-web-toolkit/source/list)

目前 git 一总是比 svn 一更新慢。还有其他的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T05:05:58.177

如果您想要最新的更改，包括正在审查的更改，请查看[https://gwt-review.googlesource.com](https://gwt-review.googlesource.com)（但更改/修复以代码分支的形式存在（通过 gerrit 审查 URL 找到分支引用））。

如果你想要最新的主代码，那么它在[SVN](http://code.google.com/p/google-web-toolkit/source/list "SVN")中（现在！），但将来会转移到[Git](https://gwt.googlesource.com/gwt/ "吉特")。

托马斯布罗耶[写道](https://groups.google.com/forum/?fromgroups=#!searchin/google-web-toolkit-contributors/svn/google-web-toolkit-contributors/h47-SDeFtQA/eUCH30ZHW5QJ "写了")：

> 我认为这个想法是等到迁移到 Git 完成。目前，Git 存储库仍然是 SVN 存储库 (git-svn) 的镜像，后者是 Google 内部 Perforce 的镜像。为了完成迁移，我们将重写历史记录以删除所有大文件（预建插件和 api-checker 参考 jars），因此所有贡献者都必须重新同步他们的 Git 存储库。因此，与此同时，SVN 和 Rietveld 仍然可以，尽管“已弃用”。

* * *

附录：我实际上为 2.5.0 贡献了 2 个修复，所以可以评论一下这个过程（不过我不会说我完全理解 - 更多内容见下文）。

这是我的路径：

1.  发现我在 Google Code 上遇到的问题，创建了一个补丁，通过 Google Code 提交了补丁。 [http://code.google.com/p/google-web-toolkit/issues/detail?id=7513](http://code.google.com/p/google-web-toolkit/issues/detail?id=7513) [http://code.google.com/p/google-web-toolkit/issues/detail?id=7863](http://code.google.com/p/google-web-toolkit/issues/detail?id=7863) - Huzzah，我想，圣诞节前一天晚上，我给了 GWT 一些东西。

2.  送完礼物后，我发现这不是现在提交代码的方式。（请参阅 Thomas Broyer 指向我的最底部的链接）。所以，然后我检查了项目的 git 版本（不是 SVN），用我的更改创建了一个分支：[https](https://gwt-review.googlesource.com/#/c/1540/) ://gwt-review.googlesource.com/#/c/1540/ - 这就是它与 Gerrit 的工作方式.

3.  我搞砸了一些代码格式，所以我不得不用更改来修改提交（这就是你在 Gerrit 中进行修复的方式——我不知道这一点并提交了一个错误的新提交——Thomas 亲切而耐心地指出我在正确的道路上）。

4.  一旦代码被审查并通过集合，它被接受然后被放弃！是的，被遗弃了。我相信 Abandoned 在这里的意思是，由于代码被合并到 master 分支，因此放弃了更改的分支。这也让我很困惑。:) （编辑：实际上，我在这里错了 - 它被放弃了，因为它没有合并到 git repo 中。我怀疑这是因为 git repo 镜像 SVN - 所以你不能将更改合并到它！ - 关于 gerrit 的精彩文章这里的过程：http: [//qt-project.org/wiki/Gerrit-Introduction](http://qt-project.org/wiki/Gerrit-Introduction)）

正如我所说，如果您想要绝对最新的更改，您可以从[https://gwt.googlesource.com/gwt](https://gwt.googlesource.com/gwt)获取所有代码分支（正如我之前所说。:)）。如果您需要特定的修复，您可以自己将其重新定位到主分支。

现在，我不明白为什么 googlecode repo 仍然开放。在那里提交补丁却发现我需要用 Gerrit 再次完成这一切是非常令人困惑和令人沮丧的（幸运的是，它们是微小的变化）。我怀疑保持 googlecode repo 活着是一件遗留的事情。

最后，至于为什么 SVN 在 Git 大师之前被合并我不知道——也许可以在贡献者列表上询问（[https://groups.google.com/forum/?fromgroups=#!forum/google-web-toolkit-贡献者](https://groups.google.com/forum/?fromgroups=#!forum/google-web-toolkit-contributors)）。SVN 很可能仍然是来自 SVN 的源和 Git 主提要（就像某些项目在过渡时所做的那样）。

另外，请耐心等待——GWT 指导委员会是新成立的，已经完成了出色的工作，但还有很多工作要做。谷歌将发布的控制权交给了他们，这真是太棒了，因为指导委员会有一些非常棒的人。

* * *

这是关于代码贡献的官方说法： [https ://groups.google.com/forum/#!topic/google-web-toolkit-contributors/fmHDlsnfdEQ/discussion](https://groups.google.com/forum/#!topic/google-web-toolkit-contributors/fmHDlsnfdEQ/discussion)

```
Gerrit Crash Course

In case you’re not familiar with Gerrit already, here are a few beginner steps to get started with:

Going to https://gwt.googlesource.com/ or https://gwt-review.googlesource.com/ you should be able to see the “gwt” project.  You should also be able to anonymously check this out by simply running “git clone https://gwt.googlesource.com/gwt”.

Further, you should be able to go to https://gwt-review.googlesource.com/ and sign in using your Google Account.  Once signed in you should be able to comment and code review existing issues like the sample issue I created at https://gwt-review.googlesource.com/#/c/1020/.

Finally, to actually create an issue is slightly more involved, but most of the steps only need to be done once:

Complete a Contributor Agreement: go to https://gwt-review.googlesource.com, click “Settings” and then “Agreements”, and follow the instructions.  If you previously submitted an individual CLA electronically via Google Code, please do so again via Gerrit (sorry!).  If you previously submitted a corporate CLA and Gerrit does not reflect this already, please email me privately and I’ll check with Google’s Open Source Program Office to get this resolved.
Setup your HTTP Password: Still under Settings, go to “HTTP Password” and click “Obtain Password” and follow the steps to get your HTTP Password and/or to setup your .netrc file.
Setup your Gerrit commit-msg hook (optional, but recommended): Gerrit provides a commit hook at https://gwt-review.googlesource.com/tools/hooks/commit-msg to automatically add Change-Id lines to your commits.  Download this and add it to your checkout’s .git/hooks directory (e.g., “curl -o .git/hooks/commit-msg https://gwt-review.googlesource.com/tools/hooks/commit-msg && chmod +x .git/hooks/commit-msg”).
Make a change and commit it locally using git (e.g., edit a file foo and then run “git commit -m ‘my first change’ foo”).
Push the commit to Gerrit for review: git push origin HEAD:refs/for/master.

Further details can be found in the Git and Gerrit documentations:
http://git-scm.com/documentation
https://gerrit-review.googlesource.com/Documentation/index.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:15:55.780

我刚刚碰到了新的[官方 GWT 项目](http://www.gwtproject.org)网站，该网站是为开源社区服务的。

网站上的更新状态 -

```
GWT Git repo: https://gwt.googlesource.com/
GWT Gerrit code review: https://gwt-review.googlesource.com/
Old Google Code project: http://code.google.com/p/google-web-toolkit/ 
```

# java - 通用树的自定义 Jackson 序列化程序

> ID：14555650
> 
> 赞同：17
> 
> 时间：2013-01-28T04:55:05.090
> 
> 标签：java, json, generics, jackson

假设我有一个用 Java 实现的参数化树，如下所示：

```
public class Tree<E> {
   private static class Node {
      E element;
      List<Node> children.
   }

   Node root;

   //... You get the idea.
} 
```

这里的想法是，上面的实现只关心树的拓扑结构，而不知道将通过实例化存储在树中的元素的任何信息。

现在，假设我希望我的树元素是地理。它们按树组织的原因是因为大陆包含国家，国家包含州或省，等等。为简单起见，地理具有名称和类型：

```
public class GeoElement { String name; String type; } 
```

所以，最后，地理层次结构看起来像这样：

```
public class Geography extends Tree<GeoElement> {} 
```

现在到杰克逊连载。假设 Jackson 序列化器可以看到字段，则此实现的直接序列化将如下所示：

```
{
   "root": {
      "element": {
         "name":"Latin America",
         "type":"Continent"
      }
      "children": [
          {
             "element": {
                "name":"Brazil",
                "type":"Country"
             },
             "children": [
                 // ... A list of states in Brazil
             ]
          },
          {
             "element": {
                "name":"Argentina",
                "type":"Country"
             },
             "children": [
                 // ... A list of states in Argentina
             ]
          }
      ]
   } 
```

这种 JSON 渲染不好，因为它包含来自 Tree 和 Node 类的不必要的工件，即“根”和“元素”。我需要的是这个：

```
{
   "name":"Latin America",
   "type":"Continent"
   "children": [
       {
          "name":"Brazil",
          "type":"Country"
          "children": [
             // ... A list of states in Brazil
          ]
       },
       {
          "name":"Argentina",
          "type":"Country"
          "children": [
             // ... A list of states in Argentina
          ]
       }
   ]
} 
```

非常感谢任何帮助。-伊戈尔。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-07-28T14:11:59.313

你需要的是[`@JsonUnwrapped`](https://fasterxml.github.io/jackson-annotations/javadoc/2.8/com/fasterxml/jackson/annotation/JsonUnwrapped.html).

> 用于指示属性应该被序列化“解包”的注解；也就是说，如果它将被序列化为 JSON 对象，则其属性将作为其包含对象的属性包含在内

将此注解添加到类`root`的`Tree`&`element`字段中`Node`，如下所示：

```
public class Tree<E> {
   private static class Node {

      @JsonUnwrapped
      E element;
      List<Node> children.
   }

   @JsonUnwrapped
   Node root;

   //... You get the idea.
} 
```

它会给你你想要的输出：

```
{
    "name": "Latin America",
    "type": "Continent",
    "children": [{
        "name": "Brazil",
        "type": "Country",
        "children": []
    }, {
        "name": "Argentina",
        "type": "Country",
        "children": []
    }]
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T05:53:13.137

也许`@JsonValue`像这样使用：

```
public class Tree<E> {
  @JsonValue
  Node root;
} 
```

如果你只需要“打开”你的树？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-28T10:14:24.027

您最好的选择是为您的对象构建和注册自定义序列化程序。

定义你的序列化器：

```
public class NodeSerializer extends StdSerializer<Node> { 
```

然后在您的 Node 类上：

```
@JsonSerialize(using = NodeSerializer.class)
public class Node {
} 
```

并且在里面`NodeSerializer`

```
@Override
    public void serialize(
      Node node, JsonGenerator jgen, SerializerProvider provider) 
      throws IOException, JsonProcessingException {

        jgen.writeStartObject();
        jgen.writeStringField("name", node.element.name);

        jgen.writeStringField("type", node.element.type);
        //Process children
        serializeFields(node, jgen, provider);
        jgen.writeEndObject();
    } 
```

这个通用框架将让您控制元素如何序列化。您可能还需要对象内部的对象，`@JsonIgnore`因为您的自定义序列化程序负责将该信息推送到生成的 JSON 中。网上有很多关于自定义序列化程序和覆盖默认 JSON 导出的内容。`element``Node`

您可以使用 Tree 实现的序列化程序以类似的方式摆脱 root。

如果您不想在类上注册序列化程序，您也可以使用以下方法一次一个地进行`ObjectMapper`：

```
ObjectMapper mapper = new ObjectMapper();

SimpleModule module = new SimpleModule();
module.addSerializer(Node.class, new NodeSerializer());
mapper.registerModule(module);

String serialized = mapper.writeValueAsString(tree); 
```

注释方法将在全球范围内应用。这种方法允许对自定义序列化程序的使用方式/位置进行一些控制。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-29T09:41:09.310

对于删除`element`类型，一种可能性是更改您的结构，以便名称和类型将直接包含在每个节点中：

```
public class TreeGeo {
   private static class Node {
      String name;
      String type;
      List<Node> children.
   }

   Node root;
} 
```

对于删除`root`类型，我不知道。我想你可以从 jsonObject 中提取一个子对象，但我对 Jackson 了解不多。但是，您可以给它一个更好的名称，例如`world`或操作生成的字符串以通过一些字符串操作手动删除它。

# for-loop - 这个 for 循环运行多少次？

> ID：14555653
> 
> 赞同：-3
> 
> 时间：2013-01-28T04:55:23.227
> 
> 标签：for-loop

```
int main()
{
 for(;;) {
      printf("INSIDE FOR LOOP");
      return 0;
     }
} 
```

printf 语句要打印多少次？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T05:01:25.440

该语句打印 1 次。`return`退出循环和程序。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-28T04:56:50.463

它永远循环，因为没有条件（通常在之间*）*`;;`。

# c++ - 我可以同时连接到多个蓝牙 HCI 吗？

> ID：14555659
> 
> 赞同：0
> 
> 时间：2013-01-28T04:56:32.627
> 
> 标签：c++, objective-c, c, bluetooth, bluetooth-lowenergy

我有一个项目，其中一个蓝牙 CSR USB 加密狗没有足够的吞吐量来同时支持 3-4 个心脏监视器。有没有办法连接到多个蓝牙 HCI，这样我就可以连接到更多的心脏监视器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:52:29.203

如果您运行蓝牙堆栈/驱动程序的两个实例，那么可以，但是您必须分别管理这两个应用程序。我从未见过任何同时处理两个 HCI 的标准/商业堆栈。

# ruby-on-rails - 使用外键连接 Rails 中的用户模型和事件模型？

> ID：14555661
> 
> 赞同：-1
> 
> 时间：2013-01-28T04:56:48.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, controller, foreign-keys

--更新：我一直在做更多的阅读，看起来我应该添加一个外键 - 有人可以告诉我如何去做吗？我应该删除我创建的那些额外字段吗？

--

我是 Ruby on Rails 的新手，我在一些基本概念上遇到了麻烦。我刚刚读完 Michael Hartl 的书，我正在使用 RailsApps bootstrap-devise-cancan 模板开始我的第一个应用程序。

我有一个用户模型和一个事件模型。我希望用户能够发布许多活动并参加许多活动。我将字段 events_attending 和 created_events 添加到 User 表中，Event 表包括 users_attending 和 user_created。我试图做到这一点，以便在提交“创建事件”表单时，user_created 字段填充有发布事件的任何用户，并且该事件 ID 记录在 created_events 下的用户表中。

我已添加到事件模型中：

```
 belongs_to :user
  has_many :users 
```

和用户模型（虽然我不确定这是否正确，因为用户可以属于多个事件。我查看了 has_and_belongs_to_many 并认为这可能是要走的路......）：

```
 has_many :events
  belongs_to :event 
```

我不知道在控制器中放入什么来达到预期的效果。这是事件控制器中当前的内容：

```
 def create
    @event = Event.new(params[:event])

    respond_to do |format|
      if @event.save
        format.html { redirect_to @event, notice: 'Event was successfully created.' }
        format.json { render json: @event, status: :created, location: @event }
      else
        format.html { render action: "new" }
        format.json { render json: @event.errors, status: :unprocessable_entity }
      end
    end 
```

我应该向控制器添加什么，我还缺少什么？让我知道是否需要查看更多代码。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:58:35.197

这个问题的答案可以在[Rails 指南](http://guides.rubyonrails.org/association_basics.html)和[其他地方](https://www.google.se/webhp?sourceid=chrome-instant&rlz=1C5CHFA_enSE506SE506&ion=1&ie=UTF-8#hl=sv&safe=off&tbo=d&rlz=1C5CHFA_enSE506SE506&sclient=psy-ab&q=railscasts%20relations&oq=railscasts%20relations&gs_l=serp.3..0i30j0i8i30.18651.22219.0.22356.16.11.5.0.0.1.113.684.10j1.11.0...0.0...1c.1.iMFnw2a94o8&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=b248e523acf60cd1&biw=1592&bih=838&ion=1)找到。很明显，你还没有掌握模型关系的基础知识，你应该多读一点。我会尽力帮助你：

Users has_many 事件是用户创建的事件的关系。该关系在数据库中建模为 Event 表上的 user_id 列。因此，当用户创建事件时，用户 id 将作为 user_id 保存在事件记录中。然后，Rails 为您提供帮助方法，例如 user.events，以获取用户创建的所有事件。

另一个关系，用户参加活动，需要一个单独的表。您可以通过检查关系来了解原因。上面的用户和事件之间的关系是一对多的关系，一个用户可以创建许多事件，但每个事件只属于一个用户。这里的关系是多对多关系，一个事件可以被多个用户访问，每个用户可以访问多个事件。无法在关系数据库中以规范化的方式存储该信息。无论您查看关系的哪一边，用户或事件，数据都是一个数组......

对此的解决方案是连接表，在其中您有一对 user_ids 和 event_ids 的表。Rails 也可以处理这种关系，它被称为[has_and_belongs_to_many](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)关系或简称 habtm。谷歌搜索将为您提供有关如何设置和使用它的信息。

我要补充一点：如果您只想从一个角度查看关系，就像您将调用 user.event_visits 但从不调用 event.visiting_users 一样，您可以摆脱用户模型中的一列并跳过连接表。您需要的是 event_ids 的[序列化列](https://stackoverflow.com/questions/3834902/rails-3-serialize)，然后您可以使用它来获取用户将访问的所有事件。以这种方式处理数据并没有标准化（因此 DBA 不赞成），但根据您的需要可能是合理的。这将需要你做更多的工作。

# ruby-on-rails - 列出主页上的所有记录

> ID：14555663
> 
> 赞同：0
> 
> 时间：2013-01-28T04:56:52.783
> 
> 标签：ruby-on-rails

我正在尝试在主页中列出数据库中的所有记录。

模型和控制器都被正确创建（我怀疑），因为使用以下代码并指向正确的地址（`http://localhost:3000/subdomainw1s`）列出了所有记录：

在 /app/views/subdomainw1s/index.html.erb 中：

```
 <h1>subdomain word 1</h1>
    <ol class="subdomainw1">
      <% @subdomainw1s.each do |sdw1| %>
        <li>
          <%= sdw1.blognamew1 %>
             </li>
      <% end %>
    </ol> 
```

但是，尝试过去相同的代码会`/app/views/home/index.html.erb`导致错误消息（**“undefined method `each' for nil:NilClass”**）抱怨：

```
<% @subdomainw1s.each do |sdw1| %> 
```

显然，rails 不知道如何处理主页下的这个模型.. 不是吗？

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:07:13.510

至少还有两个“无代码”选项

将其转换为（空）数组

```
..@subdomainw1s.to_a.each do |sdw1|.. 
```

或使用方法`try`

```
..@subdomainw1s.try(:each) do |sdw1|.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:12:04.910

复制代码以从子域控制器中的“索引”收集子域到主控制器中的“索引”。

# php - XAMPP 不解析 PHP

> ID：14555669
> 
> 赞同：5
> 
> 时间：2013-01-28T04:57:35.447
> 
> 标签：php, parsing, xampp

我刚刚安装了 XAMPP 1.8.1 并重新启动了计算机，开始运行 Apache 和 MySQL，并在 XAMPP 下我的 htdocs 目录的测试文件夹中创建了一个测试文件。

当我访问 xampp/index.php 时，他们的页面会正常显示。但是我的测试文件只在firebug的“响应”选项卡中返回我的PHP文件中的实际字符，但窗口中是一个完全空白的白屏。该文件绝对是 .php 扩展名 - 任何人都可以帮忙吗？

疯狂的是，我在 6 个月前还可以正常工作，并且刚刚重新安装了它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T05:04:07.620

我认为您可能正在使用短标签`<? ?>`或`<?= ?>`代替`<?php ?>`.
检查你的**php.ini**。它位于**\path\to\xampp\php\php.ini**。`short_open_tag`应该是**On**。

> ; 允许`<?`标签。否则，仅识别`<?php`和标签。 ; 注意：开发应用程序时应避免使用短标签或 ; 用于重新分发或部署在 PHP 上的库 ；不受您控制的服务器，因为短标签可能不会 ；在目标服务器上得到支持。对于可移植、可再分发的代码，请确保不要使用短标签。 short_open_tag = 开启`<script>`

# javascript - 信用卡验证问题

> ID：14555670
> 
> 赞同：1
> 
> 时间：2013-01-28T04:57:36.807
> 
> 标签：javascript, validation, credit-card, cartridge

我在我的墨盒项目中使用信用卡验证来验证卡类型和卡号。一切正常，但是每当我在警报框中收到验证错误并且当我单击“确定”时它不会在该页面上停止但请参考我到下一页，因此我收到错误消息，或者我的订单没有下达。

这是我的代码。

```
<input type="submit" class="btn btn-large btn-primary" onClick="cardchk();" value="{% trans "Next" %}">

    function cardchk()
    {

        var card_typ=$("input[name='card_type']:checked")[0].value;
        //alert(card_typ);

        if(card_typ=='Visa')
        {
            var  cardname = 'Visa';
        }
        else
        {
            var  cardname = 'MasterCard';
        }
        //alert(cardname);
        var cardnumber = document.getElementById('id_card_number').value;
        if(!checkCreditCard (cardnumber, cardname)){
            alert(ccErrors[ccErrorNo]);
            return false;
        }

    } 
```

但是我在我的函数中返回了错误，但是在出现错误时，它会将我转至确认页面，但我希望像通常一样验证在我收到错误时停止处理请求

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:04:49.150

你需要

```
onClick="return cardchk();" 
```

不只是

```
onClick="cardchk();" 
```

注意。我在这里看不到您正在使用 jquery validate

# mysql - 遍历 MySQL 行

> ID：14555671
> 
> 赞同：0
> 
> 时间：2013-01-28T04:57:45.887
> 
> 标签：mysql

我有一个由单词和相关数字组成的简单 MySQL 表。每个单词的数字都是唯一的。我想找到索引大于给定数字的**第一个单词。**举个例子：

```
-----------------------
| WORD:    | F_INDEX: |
|---------------------|
| a        | 5        |
| cat      | 12       |
| bat      | 4002     |
----------------------- 
```

如果给我数字“9”，我希望返回“cat”，因为它是索引大于 9 的第一个单词。

我知道我可以通过查询获得完整的排序行列表：

```
SELECT * FROM table_name ORDER BY f_index; 
```

但是，相反，希望创建一个执行此操作的 MySQL 查询。（混淆在于我不确定如何跟踪查询中的当前行）。我知道可以这样循环：

```
CREATE PROCEDURE looper(desired_index INT)
BEGIN 
    DECLARE current_index int DEFAULT 0
    // Loop here, setting current_index to whatever the next rows index is, 
    // then do a comparison to check it to our desired_index, breaking out 
    // if it is greater.
END; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T05:02:46.227

尝试这个：

```
SELECT t.word
     , t.f_index
  FROM table_name t
 WHERE t.f_index > 9 
 ORDER 
    BY t.f_index
 LIMIT 1 
```

让数据库返回您需要的行比提取一大堆行并找出您需要的行要高效得多。

为了获得此查询的最佳性能，您将需要一个索引`ON table_name (f_index,word)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:05:25.683

为什么不直接使用 MYSQL 语句从 f_index 中检索您找到的第一项，其中 f_index 大于您传入的值。

例如 ：

```
select word from table_name
where f_index > desired_index
order by f_index
limit 1 
```

# php - 如何使用 Twilio 从 Wordpress 发送 SMS 消息？

> ID：14555672
> 
> 赞同：1
> 
> 时间：2013-01-28T04:57:46.280
> 
> 标签：php, wordpress, twilio

我正在尝试在 Wordpress 应用程序中使用 Twilio，但它不起作用，但我的相同代码在不同的站点/服务器中工作。

我添加了[twilio-php](https://github.com/twilio/twilio-php)文件夹和一些 PHP 代码以在 wordpress 根目录中调用它。我还添加了代码以将其包含在现有的 Wordpress PHP 代码中，但我无法弄清楚问题出在哪里。你能帮我吗？

```
<?php              

                require "twilio-php/Services/Twilio.php";
               /* Send an SMS using Twilio. You can run this file 3 different ways:
                *
                * - Save it as sendnotifications.php and at the command line, run 
                *        php sendnotifications.php
                *
                * - Upload it to a web host and load mywebhost.com/sendnotifications.php 
                *   in a web browser.
                * - Download a local server like WAMP, MAMP or XAMPP. Point the web root 
                *   directory to the folder containing this file, and load 
                *   localhost:8888/sendnotifications.php in a web browser.
                */
                // Include the PHP Twilio library. You need to download the library from 
                // twilio.com/docs/libraries, and move it into the folder containing this 
                // file.

                // Set our AccountSid and AuthToken from twilio.com/user/account
                $AccountSid = "********************";
                $AuthToken = "*********************";

               // Instantiate a new Twilio Rest Client
               $client = new Services_Twilio($AccountSid, $AuthToken);

               /* Your Twilio Number or Outgoing Caller ID */
               $from = '**********';

               // make an associative array of server admins. Feel free to change/add your 
               // own phone number and name here.
               $people = array(
                "*********" => "******",
                "**********" => "*********",

               );

              // Iterate over all admins in the $people array. $to is the phone number, 
              // $name is the user's name
              foreach ($people as $to => $name) {
                 // Send a new outgoing SMS */
                 $body = "Hello this is a test message";
                 $client->account->sms_messages->create($from, $to, $body);
                 echo "Sent message to $name";
              }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:03:39.747

我检查了服务器日志，发现服务器中没有安装curel，然后我安装并重新启动服务器，现在它工作正常，感谢您的大力支持...Kevin Burkethanx：D

# ruby-on-rails - mongoid 中的关联

> ID：14555673
> 
> 赞同：1
> 
> 时间：2013-01-28T04:57:48.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, mongoid

我有三个模型，Employee，Job，LeaveDay。如下所示：

```
class Employee
 field :name
 belongs_to :job
end
class Job
 field :job_title
 has_many :employees
 has_many :leave_days
end
class LeaveDay
 belongs_to :job    
 field :no_of_leave_days
end 
```

我想建立一种关系，在这种关系中我想跟踪`no_of_leave_days`与其工作相关的员工。这怎么可能。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:24:46.997

我认为您需要在 LeaveDay 中添加“belongs_to：employee”和在 Employee 中添加“has_many：leave_days”。因此，@emp.leave_days 将为您提供特定员工所有工作的所有假期。同样，@emp.job.leave_days 将返回 cuttent 员工当前工作的 leave_days。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:11:42.363

我对 Mongoid 不是很熟悉。您可以[在此处](http://mongoid.org/en/mongoid/docs/relations.html)阅读更多关于 mongoid 关系的信息。

这是非常简单的例子。希望它会有所帮助。

这是模型定义：

```
class Employee
  include Mongoid::Document
  field :name
  belongs_to :job
end

class Job
  include Mongoid::Document
  field :job_title
  has_many :employees
  embeds_many :leave_days
end

class LeaveDay
  include Mongoid::Document
  embedded_in :job
  field :no_of_leave_days
end 
```

以及使用示例：

```
pry(main)> j = Job.create(job_title: "Test Job")
=> #<Job _id: 510633e0784931179a000001, _type: nil, job_title: "Test Job">
pry(main)> LeaveDay.create(job: j, no_of_leave_days: 1)
=> #<LeaveDay _id: 5106348f784931179a000002, _type: nil, no_of_leave_days: 1>
pry(main)> LeaveDay.create(job: j, no_of_leave_days: 2)
=> #<LeaveDay _id: 51063687784931179a000003, _type: nil, no_of_leave_days: 2>
pry(main)> LeaveDay.create(job: j, no_of_leave_days: 3)
=> #<LeaveDay _id: 51063689784931179a000004, _type: nil, no_of_leave_days: 3>
pry(main)> Job.first.leave_days.map(&:no_of_leave_days)
=> [1, 2, 3]
pry(main)> Employee.create(name: 'Employee name', job: Job.first)
=> #<Employee _id: 510637cf784931179a000005, _type: nil, name: "Employee name", job_id:    "510633e0784931179a000001">
pry(main)> Employee.first.job.leave_days.map(&:no_of_leave_days)
=> [1, 2, 3] 
```

# android - 从活动返回时无法设置来自 Textview 的 setText

> ID：14555681
> 
> 赞同：1
> 
> 时间：2013-01-28T04:59:19.190
> 
> 标签：android, multithreading, android-asynctask, textview, countdowntimer

我正在使用倒数计时器倒计时这是我的代码：

```
public class countdownnow extends Activity{

    TextView tv;
    private CDwnTimer countDownTimer;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState); 

        setContentView(R.layout.countdown_disp);
        tv = (TextView)findViewById(R.id.textView1);
    countDownTimer = new MalibuCountDownTimer(30000, 1050);
        countDownTimer.start();
}

// CountDownTimer class
    public class CDwnTimer extends CountDownTimer {
        public CDwnTimer(long startTime, long interval) {
            super(startTime, interval);
        }

        @Override
        public void onFinish() {
            tv.setText("00");             
        }

        @Override
        public void onTick(long millisUntilFinished) {

            int convert = (int)  millisUntilFinished/1000;
            String testString = String.format("%02d",convert); 

    CharSequence cs = new String(testString);                   
    tv.setText(cs);                 
        }
    }
} 
```

最初这工作正常但是当我离开这个活动然后去另一个活动然后回来时，文本视图不再倒计时了吗？TextView tv 继续运行，但它没有更新。Activity 是否被释放并初始化 Textview 的相同 id？任何提示都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:51:41.230

你是怎么离开活动的？

我模拟了您的程序，当我将 MainActivity 留给 OtherActivity 并返回时，textView 继续倒计时。代码如下：

```
public class MainActivity extends Activity {

private CDwnTimer countDownTimer;
private Button btn;
private TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv = (TextView)findViewById(R.id.tv);
    btn = (Button) findViewById(R.id.btnEnter);

    btn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // call sendMessage method
            Intent startActivityIntent =new Intent(MainActivity.this, OtherActivity.class);
            MainActivity.this.startActivity(startActivityIntent);
        }
    });

    countDownTimer = new CDwnTimer(30000, 1050);
    countDownTimer.start();
}

// CountDownTimer class
    public class CDwnTimer extends CountDownTimer {
        public CDwnTimer(long startTime, long interval) {
            super(startTime, interval);
        }

        @Override
        public void onFinish() {
            tv.setText("00");             
        }

        @Override
        public void onTick(long millisUntilFinished) {
            int convert = (int)  millisUntilFinished/1000;
            String testString = String.format("%02d",convert); 
            CharSequence cs = new String(testString);  
            tv.setText(cs);
        }
    }
} 
```

MainActivity 布局的 main.xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView
        android:id="@+id/tv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"       
        android:text="TextView" 
        android:layout_weight="6"/>
    <Button
        android:id="@+id/btnEnter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="282dp"
        android:layout_marginLeft="21dp"
        android:text="Button" 
        android:layout_weight="2"/>
</LinearLayout> 
```

# html - HTML/CSS - 粗体下划线字符

> ID：14555687
> 
> 赞同：-1
> 
> 时间：2013-01-28T04:59:33.467
> 
> 标签：html, css, google-chrome, firefox, safari

我试图在 html 中使用粗体下划线字符，它适用于 Chrome，但不适用于其他浏览器（Firefox、Safari、IE）：

```
<b> _ </b> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:33:28.413

用这个

```
<p style="font-weight:bold;">hellooooo</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:16:09.543

对于某些字体系列和字体大小组合，粗体“<code>_”字符可能看起来与常规“<code>_”字符非常相似或相同。例如，在 10px Arial 中，渲染看起来是相同的。对于 Arial Unicode MS，即使默认字体大小或更大，差异也很小或不存在；这可能与 Arial Unicode MS 没有粗体字体有关，因此浏览器应用了算法粗体。这种加粗一般不会对水平笔划产生太大影响，正如您可以通过加粗字符（如“=”或“H”）看到的那样。

由于不同的字体渲染技术，浏览器之间可能存在差异。

# java - 需要帮助将数组 imageicon 解析为 JButton

> ID：14555688
> 
> 赞同：0
> 
> 时间：2013-01-28T04:59:34.543
> 
> 标签：java, image, swing, compiler-errors, imageicon

这是我遇到错误的代码：

```
pic = new ImageIcon("Koala.jpg");
picArr = ImageUtil.sliceImage(3, 3, pic);
for (int i = 0; i < picArr.length; i++){
   leftbut[i].setIcon(new ImageIcon(picArr[i]));            
} 
```

这是确切的错误行：

```
leftbut[i].setIcon(new ImageIcon(picArr[i])); 
```

这是错误：

```
no suitable constructor found for ImageIcon(ImageIcon)
constructor ImageIcon.ImageIcon() is not applicable
  (actual and formal argument lists differ in length)
constructor ImageIcon.ImageIcon(byte[]) is not applicable
  (actual argument ImageIcon cannot be converted to byte[] by method invocation conversion)
constructor ImageIcon.ImageIcon(byte[],String) is not applicable
  (actual and formal argument lists differ in length)
constructor ImageIcon.ImageIcon(Image) is not applicable
  (actual argument ImageIcon cannot be converted to Image by method invocation conversion)
constructor ImageIcon.ImageIcon(Image,String) is not applicable
  (actual and formal argument lists differ in length)
constructor ImageIcon.ImageIcon(URL) is not applicable
  (actual argument ImageIcon cannot be converted to URL by method invocation conversion)
constructor ImageIcon.ImageIcon(URL,String) is not applicable
  (actual and formal argument lists differ in length)
constructor ImageIcon.ImageIcon(String) is not applicable
  (actual argument ImageIcon cannot be converted to String by method invocation conversion)
constructor ImageIcon.ImageIcon(String,String) is not applicable
  (actual and formal argument lists differ in length) 
```

附加信息 - leftbut.[i] 是 9 个按钮的数组，我想通过使用上述方法在每个按钮上设置 imageicon 并将 1 个图像切成 9 个 peices 请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T05:07:01.263

这个

`leftbut[i].setIcon(new ImageIcon(picArr[i]));`

应该是这个

`leftbut[i].setIcon(picArr[i]);`

# javascript - WebView 内容不适合 WebView？

> ID：14555689
> 
> 赞同：0
> 
> 时间：2013-01-28T04:59:35.170
> 
> 标签：javascript, android, css, webview

*   > 如您所见，粉红色背景是我的 WebView >，我在该 WebView 中显示 html 页面，但整个页面不适合 WebView，即在 > 横向模式下有滚动条，请建议我应该怎么做做？我希望 > 完整页面应该在没有滚动条的 WebView 中显示。这里 WebView 的图像是

![在此处输入图像描述](../Images/8edd133b62238f3f6e5fd4f7ba521bea.png)

# python - 使用金字塔服务 GridFS 文件

> ID：14555690
> 
> 赞同：2
> 
> 时间：2013-01-28T04:59:36.317
> 
> 标签：python, nginx, pyramid, gridfs

我想知道使用 Pyramid 从 GridFS 提供文件的最佳且可能最简单的方法是什么。我使用 nginx 作为代理服务器（用于 ssl）和女服务员作为我的应用程序服务器。

我需要能够提供的文件类型如下：mp3、pdf、jpg、png

这些文件应该可以通过以下 url "/files/{userid}/{filename}" 访问

现在文件由客户端的正确应用程序打开，因为我在我的代码中明确设置了内容类型，如下所示：

```
if filename[-3:] == "pdf":
    response = Response(content_type='application/pdf')

elif filename[-3:] in ["jpg", "png"]:
    response = Response(content_type='image/*')

elif filename[-3:] in ["mp3"]:
    response = Response(content_type='audio/mp3')

else:
    response = Response(content_type="application/*")

response.app_iter = file   #file is a GridFS file object
return response 
```

唯一的问题是我无法正确播放 mp3。我使用[audio.js](http://kolber.github.com/audiojs/)来播放它们。它们打开并播放，但没有显示音轨长度，我无法找到它们。我知道它与“接受范围”属性有关，但我似乎无法正确设置它。它与nginx或服务员有关吗？或者我只是没有正确设置标题？

我想使用像[这里](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/response.html#pyramid.response.FileResponse)`return FileResponse(file)`指定的那样简单的东西，但我的文件不是直接来自文件系统......有没有即插即用的方式来完成这项工作？

任何建议将不胜感激！

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:11:07.217

我在这个[博客](http://blog.abourget.net/2011/3/23/new-and-hot-part-5-mongodb-integration/)上找到了解决方案。

这个想法是使用一个`DataApp`从`paste.fileapp`. 所有详细信息都在帖子中，现在我的应用程序的行为就像我想要的一样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T14:17:11.417

我刚刚在 Pyramid 1.4、Python 3 中解决了没有粘贴依赖的问题。

似乎属性“conditional_response=True”和“content_length”很重要：

```
f = request.db.fs.files.find_one( { 'filename':filename, 'metadata.bucket': bucket } )

fs = gridfs.GridFS( request.db )

with fs.get( f.get( '_id') ) as gridout:
    response = Response(content_type=gridout.content_type,body_file=gridout,conditional_response=True)
    response.content_length = f.get('length')
    return response 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T05:49:41.033

另一种方式（在 Python 2.7 上使用 Pyramid 1.5.7）：

```
fs = GridFS(request.db, 'MyFileCollection')
grid_out = fs.get(file_id)

response = request.response
response.app_iter = FileIter(grid_out)
response.content_disposition = 'attachment; filename="%s"' % grid_out.name

return response 
```

# objective-c - 动态分配一个类

> ID：14555692
> 
> 赞同：-1
> 
> 时间：2013-01-28T04:59:50.733
> 
> 标签：objective-c, xcode, cocoa

是否可以将类分配给代码中的对象？我正在动态创建一个按钮，为该按钮加载一个图像，并且我有以下内容：

```
myButton = [[[NSButton alloc] initWithFrame:NSMakeRect(100,100,50,25)] autorelease];
[myButton setTitle:@"Done"];
[myButton setTarget:self];
[myButton setAction:@selector(mySelector:)];
[myButton setButtonType:NSMomentaryChangeButton];
[myButton setBordered:NO];
[myButton setImage:[NSImage imageNamed:@"myButton.png"]];
[myButton setImagePosition: NSImageOnly];
[[[self window] contentView] addSubview:myButton]; 
```

我还有一个要用于按钮的 NSButton 子类（例如 MyButtonClass.h/MyButtonClass.m），以便它具有特定的行为，但我不确定如何将该类分配给上述代码中的按钮.

这是可能的，还是只能/应该只在 Interface Builder 中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:07:21.513

您可以使用`MyButtonClass`而不是启动按钮`NSButton`

`myButton = [[[MyButtonClass alloc] initWithFrame:NSMakeRect(100,100,50,25)] autorelease];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:08:14.210

创建按钮时，不要将它们创建为 NSButton，将它们创建为您的子类。例如，如果您有一个名为 MyButton 的 NSButton 子类，而不是类似：

```
NSButton *button = [[[NSButton alloc] initWithFrame:frame]autorelease]; 
```

你会有类似的东西：

```
MyButton *button = [[[MyButton alloc] initWithFrame:frame]autorelease]; 
```

这种方式按钮将是 MyButton 的一个实例。

# c# - 正则表达式和电话号码

> ID：14555694
> 
> 赞同：-3
> 
> 时间：2013-01-28T04:59:55.220
> 
> 标签：c#, .net, regex, string

我想验证电话号码。这是我的正则表达式：

```
[RegularExpression(@"((\+7)|7) ((700|701|702|705|707|712|713|717|718|721|725|726|727|777)) [0-9]{3}-[0-9]{4}")] 
```

这是测试值：7 (701) 777-7777。

但是，它不起作用。哪里有错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T05:20:02.353

模式可以简化成这样，

```
(\+)?7\s\(7(0[0125]|1[2378]|2[1567]|77)\)\s[0-9]{3}-[0-9]{4} 
```

截屏

![在此处输入图像描述](../Images/1f25adb40adca4f9f774dfed4c0cb833.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:12:28.457

```
[RegularExpression(@"((\+7)|7) ((700|701|702|705|707|712|713|717|718|721|725|726|727|777)) [0-9]{3}-[0-9]{4}")]
                               ^^ There 
```

您需要使用反斜杠转义外括号。

# python - 无法在 python 中使用 p4 模块

> ID：14555697
> 
> 赞同：1
> 
> 时间：2013-01-28T05:00:21.527
> 
> 标签：python, p4python

我正在使用 ubuntu 12.04 64 位，并且我已经在其中安装了 p4python。我尝试导入 p4 模块，但它给了我以下错误

import p4 Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 ImportError：没有名为 p4 的模块

有人可以帮帮我吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T07:11:27.897

你能试一下吗

```
import P4 
```

模块已重命名

新模块名称

```
 The P4Python module has been renamed from p4 to P4\. For example:

    Old:
    >>> import p4
    >>> p4c = p4.P4()

    New:
    >>> import P4
    >>> p4 = P4.P4() 
```

# performance - 计算具有重复 Lexigraphic 的排列

> ID：14555700
> 
> 赞同：1
> 
> 时间：2013-01-28T05:00:37.470
> 
> 标签：performance, algorithm, permutation, combinatorics, factorial

我有一个关于组合学的问题，特别是排列和字典索引。我在过去计算了给定字典索引的集合的排列，但这些是***没有***重复的排列。

现在我想***用***重复计算给定字典索引的排列。我的问题是我不知道如何通过重复来处理排列的字典索引。

假设我有以下一组元素“`{A,B,C,D,E,F,G,H}`

我想计算其中 20 个元素的排列，其字典索引为`n`; `n`是 64 位数字。如何确定字典索引？我还能使用阶乘基础方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:42:15.193

假设您有 8 个元素（如您的示例中），这意味着您需要 3 位作为索引。要定义长度为 20 的排列，您需要`3*20=60`位。

所以整数值`v`将`[0,2^60)`定义所有具有重复的排列，其中`v & 7`将是排列中第一项的索引，`(v & (7 << 3) >> 3)`- 第二个元素的索引，依此类推......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:14:48.070

你的集合的大小是 8，你的长度是 20，所以总共有 r 8^20 个排列。如果你想计算第n个排列，你可以简单地逐位确定。即如果 n 小于 7^20，则第 1 位为“A”，如果 n 在 [7^20, 2*7^20) 等范围内，则为“B”。

# c# - 多对多关系的扩展方法语法

> ID：14555701
> 
> 赞同：1
> 
> 时间：2013-01-28T05:00:51.530
> 
> 标签：c#, linq, entity-framework, linq-to-entities, inner-join

来自新手的一点 Linq 方法语法，所以我很感激任何人都可以传递的任何见解。我需要的东西看起来很简单，但它让我绕圈子。我有 2 个表和一个关联（基本上是一个只有 2 个字段的联结表）。我已经浏览了很多关于 SO 的帖子，但我就是不明白。令人沮丧。好的，使用 EF4，我在 Reports 上有一个名为 Roles 的导航属性，它是联结表（具有 ReportId 和 RoleId 字段，均为整数字段）。我使用 UserId 从 Roles 表中获取所有关联的角色，使用这些角色从联结表中获取关联的报告，然后从 Reports 中获取报告的名称。

我已经尝试过 LinqPad，但是当我将它粘贴回 LinqPad 时，它在 lambda 方法语法中产生的内容甚至都不起作用。

SQL查询：

```
select Reports.ReportName 
 from Reports 
 inner join UserRoles on Reports.ReportId = UserRoles.ReportId 
 inner join Roles on Roles.RoleId = UserRoles.RoleId 
 where UserRoles.UserId == userId 
```

到目前为止的代码：

```
Reports.Select(a => a.Roles.Where(t => t.UserRoles.Select(u => u.UserId == userId))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:18:02.057

您可以试一试，您可能还想根据您的需要过滤您的选择：

```
var result = from allReports in Reports
             join userRoles in userRoles on allReports.ReportId equals userRoles.ReportId
             join roles in Roles on userRoles.RoleId equals roles.RoleId
             where userRoles.UserId == userid
             select allReports; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:27:39.137

我认为这种查询语法在这种情况下要好得多：

```
var query = from report in db.Reports
            join ur in db.UserRoles on report.ReportId equals ur.ReportId
            join role in db.Roles on ur.RoleId equals role.RoleId
            where ur.UserId == userId
            select report.ReportName; 
```

# x11 - x11 - XGrabKeyboard 后无法移动窗口

> ID：14555703
> 
> 赞同：6
> 
> 时间：2013-01-27T09:48:21.650
> 
> 标签：x11, c, window, c++, user-interface

调用后[`XGrabKeyboard()`](http://www.x.org/releases/X11R7.7/doc/libX11/libX11/libX11.html#XGrabKeyboard)，我的应用程序会捕获并显示所有按键/释放，包括那些用于 GUI 和 PrintScreen 键的按键。**但是，用户不再能够移动应用程序的窗口。**到目前为止，这发生在 Fedora 17 和 Ubuntu 12.04 上。

我怎样才能允许用户在受到的影响下移动应用程序[`XGrabKeyboard()`](http://www.x.org/releases/X11R7.7/doc/libX11/libX11/libX11.html#XGrabKeyboard)？

下面是我的 Qt 应用程序的示例代码：

```
bool KeyboardStatus::x11Event(XEvent *event) {
    switch (event->type) {
        case FocusIn:
            XGrabKeyboard(x11Info().display(), winId(), false, GrabModeAsync, GrabModeAsync, CurrentTime);
            break;

        case FocusOut:
            XUngrabKeyboard(x11Info().display(), CurrentTime);
            break;

        case KeyPress:
            // Display which key was pressed to user
            return true;

        case KeyRelease:
            // Display which key was released to user
            return true;
    }

    return false;
} 
```

从事件处理程序中取出抓取语句并不能解决问题。这是一个说明问题的示例项目：[TestGrab.zip](http://dl.dropbox.com/u/44280351/TestGrab.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:04:55.737

我在 KDE、FVWM 和 GNOME（仅使用 Xlib）上试过这个，只有 GNOME 窗口管理器有这个问题。

我认为可以通过选择 ConfigureNotify 事件来修复它，但是当您尝试移动窗口时不会生成它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-22T18:36:31.473

我在 Cygwin 上遇到了与 XFCE 类似的问题。这里的问题是传递给 XSelectInput 的输入掩码不足。将**FocusChangeMask**添加到 KeyPressMask | KeyReleaseMask 解决了这个问题。

*再一次，它帮助我解决了 xfce/cygwin 上的类似问题。*

# java - Java 构造函数和空指针异常

> ID：14555708
> 
> 赞同：1
> 
> 时间：2013-01-28T05:01:28.013
> 
> 标签：java, constructor, nullpointerexception

我正在玩 java，并且在使用自定义构造函数时遇到了问题。

当我开始我的程序时，主文件包含这样的一行：

```
Word input = new Word(word); 
```

word 的构造函数如下所示：

```
public Word(String s){
        wordArray = s.toCharArray(); 
        protocol = new Protocol(wordArray.length);
    } 
```

协议如下所示：

```
public Protocol(int length)
    {
        letterList[0] = 'a';
        letterList[1] = 'b';
        letterList[2] = 'c';
        letterList[3] = 'd';
        letterList[4] = 'e';
        letterList[5] = 'f';
        letterList[6] = 'g';
        letterList[7] = 'h';
        letterList[8] = 'i';
        letterList[9] = 'j';
        letterList[10] = 'k';
        letterList[11] = 'l';
        letterList[12] = 'm';
        letterList[13] = 'n';
        letterList[14] = 'o';
        letterList[15] = 'p';
        letterList[16] = 'q';
        letterList[17] = 'r';
        letterList[18] = 's';
        letterList[19] = 't';
        letterList[20] = 'u';
        letterList[21] = 'v';
        letterList[22] = 'w';
        letterList[23] = 'x';
        letterList[24] = 'y';
        letterList[25] = 'z';
        wordLength = length;
        for(int i=0;i<wordLength*2-1;i++)
        {
            display[i] = '_';
            i++;
            display[i] = ' ';
        }
    } 
```

我`NullPointerException`在构建主文件的行中得到一个`word`，然后是`protocol`.

我已经对代码进行了试验，并注意到如果我不调用`protocol`内部`word`构建的构造函数，那么构建成功之后，我还需要稍后构建协议，所以它仍然存在问题。

我不允许在另一个构造函数中调用构造函数吗？有人对可能发生的事情有任何想法吗？

如果您需要更多说明，请告诉我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:04:57.307

> 我不允许在另一个构造函数中调用构造函数吗？

不，你*绝对*可以这样做。

> 有人对可能发生的事情有任何想法吗？

显然，`word`当在这一行`null`传递给`Word`构造函数时：

```
Word input = new Word(word); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T05:06:50.873

问题可能是因为您可能没有初始化`letterList`数组，所以在使用它之前先尝试初始化它。

```
public Protocol(int length)
{
   letterList = new char[26];  
   letterList[0] = 'a';  
   letterList[1] = 'b';  
   letterList[2] = 'c';  
   ...  
   ...

} 
```

# actionscript-3 - 将数字四舍五入到小数点后一位

> ID：14555710
> 
> 赞同：0
> 
> 时间：2013-01-28T05:01:41.870
> 
> 标签：actionscript-3

我想四舍五入到小数点后半。

因此，如果我有 1.45，它会四舍五入为 1。如果我有 1.55，它会四舍五入为 1.5。那有意义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T05:08:42.620

`Math.floor(x*2)/2`

这应该做。

# mysql - 表多对数据库效率的影响 SQL

> ID：14555711
> 
> 赞同：3
> 
> 时间：2013-01-28T05:01:46.783
> 
> 标签：mysql, sql, database

我目前正在尝试创建一个`chat program`针对**1000-1500**个用户的目标。我想知道我是否应该为每个用户创建一个**单独的表**，例如在每个`user`用户朋友、消息的表中，或者应该只创建一个包含所有表并将所有内容存储在那里，因为哪个解决方案会更多`efficient`？我相信`multiple`为每个用户的个人详细信息设置表格可以`more efficient`使我运行的大多数查询都在具有少量数据的表格上运行。

如果我错了，谁能告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:09:41.630

你大错特错。理想的方式应该是为用户提供一个表。即使对于像 ebay 这样拥有数百万用户的公司也是如此；这些用户的分布方式就像在单个表中以 A 开头的所有用户一样......正如@Matt 提到的，我们无法创建 x 不是有界数字的表。

除了该表，您还可以有一个表 Messages ，该表将有一个 UserName 列，该列将是指向您的用户表的外键。

最干净的解决方案对于维护朋友列表可能有点棘手。一种解决方法可以是在 User 表中有一个列，该列将具有以逗号分隔的 Friends id（它们又是同一张表中的用户）。如果您不希望对好友列表进行任何限制：您可以创建另一个表 Friends，其中包含两列 userid、friendId。这两列都将是 User 表上的外键。现在，查询将很简单`select * form Friends where userid=<user>`。这张桌子可能很大；但这就是索引出现的地方。您可以在 userid 列上创建索引，即使有很多记录，查询结果也会非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:11:59.497

为每个用户设置一个表是一种不好的方法，您可以为每个用户准确保存一个文本文件，您不需要为此使用数据库，使用 ddatabase 的想法是建立实体之间的关系，因此您拥有主要的/外键，通常每个实体都需要一个表，有时2个实体需要3个表，具体取决于基数。在您的情况下，例如用户表、消息表、messageUser 表和好友或联系人表等是正常的，其中好友将存储作为好友连接的 UserIds，而消息一个是 messageId<->UserId 元组，其中将消息匹配到用户等等。

# ios - 是否可以选择在 shinobi 网格中添加新行？

> ID：14555714
> 
> 赞同：3
> 
> 时间：2013-01-28T05:02:15.570
> 
> 标签：ios, objective-c, grid

首先，我使用 shinobicontrols 使用 Objective c 为 iOS 开发交互式 UI 控件（网格），请不要建议我使用其他控件作为答案，因为我只需要使用这个。

我在使用此控件时卡住了一半。我已经下载了 shinobicontrols 提供的网格演示代码（试用 30 天）。来自：[http ://www.shinobicontrols.com/shinobigrids/product-tour/get-started-quickly-and-easily/](http://www.shinobicontrols.com/shinobigrids/product-tour/get-started-quickly-and-easily/)

我能够重新排序行和列，编辑单元格的内容，通过捏合手势调整列宽等等。

但我无法向现有网格添加新行或新列。只是想知道这是否可以实现。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:06:45.720

编辑数据源（添加/删除）项，然后执行 [grid reload]；

我认为应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:00:44.873

上面的答案似乎是正确的。添加我的视图 Shinobi 网格可以被视为 UITableView 单元格，如果您只是更改 tableview 的数据源数组并调用`[tableview reloadData]`，则视图上显示的单元格数量也会发生变化。仍然没有添加行的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T05:47:58.283

看看[这个](https://github.com/poksi592/DataGUIControls)。它处于阿尔法阶段，但我会说一两个月内它会非常强大。欢迎任何建议，当然，它是免费的。行数和行内容完全由委托控制，因此它是动态的。

# ruby-on-rails - 终端，rails 中的 actionController 路由错误

> ID：14555716
> 
> 赞同：0
> 
> 时间：2013-01-28T05:02:16.920
> 
> 标签：ruby-on-rails, routes

我正在使用最新版本的 Rails，每次我在本地主机上运行该站点时，它看起来都很好。

但是，终端会打印多个 ActionController::RoutingErrors

> 在 2013-01-27 23:50:28 -0500 开始获取 127.0.0.1 的“/assets/images/ui-bg_highlight-soft_100_E1EEF4_1x100.png” 服务资产 /images/ui-bg_highlight-soft_100_E1EEF4_1x100.png - 404 未找到（ 3毫秒）
> 
> ActionController::RoutingError (No route matches [GET] "/assets/images/ui-bg_highlight-soft_100_E1EEF4_1x100.png"): actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call' actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in`call' railties ( 3.2.11) lib/rails/rack/logger.rb:32:in `call_app' railties (3.2.11) lib/rails/rack/logger.rb:16:in`block in call'activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged' railties (3.2.11) lib/rails/rack/logger.rb:16:in`call' actionpack (3.2.11) lib/action_dispatch/中间件/request_id.rb:22:in `call' rack (1.4.4) lib/rack/methodoverride.rb:21:in`call' rack (1.4.4) lib/rack/runtime.rb:17:in `call' activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in`call' rack (1.4.4) lib/rack/lock.rb:15:in `call' actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in`call' railties (3.2.11) lib/rails/engine.rb:479:in `call' railties (3.2.11) lib/rails/application.rb:223:in`call' rack (1.4.4) lib/rack/content_length.rb:14:in `call' railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in`call' rack (1.4.4) lib/rack/handler/webrick .rb:59:in`service' /Users/vicli/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:138:in`服务'/Users/vicli/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run' /Users/vicli/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/server.rb:191:in`block in start_thread'
> 
> 在救援/布局中渲染 /Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/routing_error.erb (0.9ms)
> 
> 在 2013-01-27 23:50:28 -0500 开始获取 127.0.0.1 的“/assets/logoo.png” 服务资产 /logoo.png - 304 未修改（0ms）[2013-01-27 23:50： 28] WARN 无法确定响应正文的内容长度。设置响应的内容长度或设置 Response#chunked = true
> 
> 在 2013-01-27 23:50:28 -0500 开始获取 127.0.0.1 的“/assets/images/ui-bg_glass_65_ffffff_1x400.png” 服务资产 /images/ui-bg_glass_65_ffffff_1x400.png - 404 Not Found (5ms)
> 
> ActionController::RoutingError (No route matches [GET] "/assets/images/ui-bg_glass_65_ffffff_1x400.png"): actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call' actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in`call' railties (3.2\. 11) lib/rails/rack/logger.rb:32:in `call_app' railties (3.2.11) lib/rails/rack/logger.rb:16:in`block in call'activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged' railties (3.2.11) lib/rails/rack/logger.rb:16:in`call' actionpack (3.2.11) lib/action_dispatch/middleware/ request_id.rb:22:in `call' rack (1.4.4) lib/rack/methodoverride.rb:21:in`call' rack (1.4.4) lib/rack/runtime.rb:17:in `call' activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in`call' rack (1.4.4) lib/rack/lock.rb:15:in `call' actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in`call' railties (3.2 .11) lib/rails/engine.rb:479:in `call' railties (3.2.11) lib/rails/application.rb:223:in`call' rack (1.4.4) lib/rack/content_length.rb:14:in `call' railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in`call' rack (1.4.4) lib/rack/handler/webrick.rb :59:在`service' /Users/vicli/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:138:in`服务'/Users/vicli/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run' /Users/vicli/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/server.rb:191:in`block in start_thread'

这是我的 routes.db。

```
 get "planner/index"

  resources :users
  resources :sessions, only: [:new, :create, :destroy]
  root to:'static_pages#home'

  match '/test', to:'planner#update'
  match '/about', to:'static_pages#about'
 match '/home', to:'static_pages#home'
  match '/planner', to:'planner#index'

  resources :sessions, only: [:new, :create, :destroy]

  match '/signup', to: 'users#new'
  match '/signin', to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  match '/signup', to:'users#new'

  resources :activities

  resources :restaurants 
```

这就是我在运行 rake 路线时得到的

```
 planner_index GET    /planner/index(.:format)        planner#index
      users GET    /users(.:format)                users#index
            POST   /users(.:format)                users#create
   new_user GET    /users/new(.:format)            users#new
  edit_user GET    /users/:id/edit(.:format)       users#edit
       user GET    /users/:id(.:format)            users#show
            PUT    /users/:id(.:format)            users#update
            DELETE /users/:id(.:format)            users#destroy
   sessions POST   /sessions(.:format)             sessions#create
new_session GET    /sessions/new(.:format)         sessions#new
    session DELETE /sessions/:id(.:format)         sessions#destroy
       root        /                               static_pages#home
       test        /test(.:format)                 planner#update
      about        /about(.:format)                static_pages#about
       home        /home(.:format)                 static_pages#home
    planner        /planner(.:format)              planner#index
            POST   /sessions(.:format)             sessions#create
            GET    /sessions/new(.:format)         sessions#new
            DELETE /sessions/:id(.:format)         sessions#destroy
     signup        /signup(.:format)               users#new
     signin        /signin(.:format)               sessions#new
    signout DELETE /signout(.:format)              sessions#destroy
                   /signup(.:format)               users#new
 activities GET    /activities(.:format)           activities#index
            POST   /activities(.:format)           activities#create
   new_activity GET    /activities/new(.:format)       activities#new
  edit_activity GET    /activities/:id/edit(.:format)  activities#edit
       activity GET    /activities/:id(.:format)       activities#show
            PUT    /activities/:id(.:format)       activities#update
            DELETE /activities/:id(.:format)       activities#destroy
restaurants GET    /restaurants(.:format)          restaurants#index
            POST   /restaurants(.:format)          restaurants#create
 new_restaurant GET    /restaurants/new(.:format)      restaurants#new
edit_restaurant GET    /restaurants/:id/edit(.:format) restaurants#edit
     restaurant GET    /restaurants/:id(.:format)      restaurants#show
            PUT    /restaurants/:id(.:format)      restaurants#update
            DELETE /restaurants/:id(.:format)      restaurants#destroy 
```

我很确定错误是因为我没有正确配置我的路线，但我不知道该怎么做。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:13:20.090

这不是路线问题

你只是没有他们必须在的图像（在`/assets/images/ui-bg_highlight-soft_100_E1EEF4_1x100.png`路径中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:18:23.770

应用程序期望图像“ui-bg_highlight-soft_100_E1EEF4_1x100.png”和其他图像出现在资产中。图像可能在某些 css 中定义。检查你使用的 css 文件。另外，请查看布局，因为它们也可能在那里使用。在 CSS 中引用图像的正确方法是

```
background: url(logo25x88.png) no-repeat; #do not set the path if the image is in /assets/images 
```

# ios - 在 isKindOfClass 中未检测到从 UIButton 继承的自定义类：

> ID：14555717
> 
> 赞同：1
> 
> 时间：2013-01-28T05:02:21.887
> 
> 标签：ios, iphone, objective-c, uibutton

我创建了一个自定义按钮类，其中包含一些从 UIButton 继承的额外属性。它通过普通按钮添加到如下视图中：

```
EFButton *btn = [EFButton buttonWithType:UIButtonTypeRoundedRect];    
btn.frame = CGRectMake(500, 100, 100, 44);
btn.backgroundColor = [UIColor lightGrayColor];
btn.userInteractionEnabled = NO;
[self.view addSubview:btn];

UIButton *nBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];    
nBtn.frame = CGRectMake(500, 100, 100, 44);
nBtn.backgroundColor = [UIColor lightGrayColor];
nBtn.userInteractionEnabled = NO;
[self.view addSubview:nBtn]; 
```

遍历视图中的对象，例如：

```
 for (id view in self.view.subviews) 
{

    if ([view isKindOfClass:[EFButton class]]) 
    {
        //** dsnt come here **
        NSLog(@"EFButton Class");
        EFButton *btn = view;
    }
    if ([view isKindOfClass:[UIButton class]]) 
    {
        //** come here **
        NSLog(@"UIButton Class");
        UIButton *btn = view;
    }
} 
```

UIButton 是有效的，但它不符合 isKindOfClass:[EFButton class] 的条件。请帮助我解决我做错了什么或需要如何做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:09:45.787

因为`buttonWithType`是类的方法`UIButton`，它返回`UIButton`类型，虽然你`EFButton`继承`UIButton`了，但不能返回 `EFButton` 类型

引用开发者[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)

```
If you subclass UIButton, this method does not return an instance of your subclass 
```

PS：我不认为继承`UIButton`是一个好方法。

# codeigniter - PHPWord_Template 保存到客户端

> ID：14555722
> 
> 赞同：3
> 
> 时间：2013-01-28T05:03:00.053
> 
> 标签：codeigniter, phpword

我已经从[这个站点](http://phpword.codeplex.com/releases/view/49543)

下载了包 PHPWord_0.6.2_Beta.zip有 2 个目录：Examples 和 PHPWord，以及 1 个文件：PHPWord.php
我将 PHPWord 目录和 PHPWord.php 放在 application/third_party 中，并创建名为“Word. php' 在应用程序/库中，如[本文所述](http://www.ahowto.net/php/creating-ms-word-document-using-codeigniter-and-phpword)

这是新的库代码 Word.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

require_once APPPATH."/third_party/PHPWord.php"; 

class Word extends PHPWord { 
    public function __construct() { 
        parent::__construct(); 
    } 
}
?> 
```

现在我们可以轻松地使用 PHPWord 作为 CI 库

我已经从下载包中的目录示例中尝试了文本示例，这里是原始代码

```
<?php
require_once '../PHPWord.php';

// New Word Document
$PHPWord = new PHPWord();

// New portrait section
$section = $PHPWord->createSection();

// Add text elements
$section->addText('Hello World!');
$section->addTextBreak(2);

$section->addText('I am inline styled.', array('name'=>'Verdana', 'color'=>'006699'));
$section->addTextBreak(2);

$PHPWord->addFontStyle('rStyle', array('bold'=>true, 'italic'=>true, 'size'=>16));
$PHPWord->addParagraphStyle('pStyle', array('align'=>'center', 'spaceAfter'=>100));
$section->addText('I am styled by two style definitions.', 'rStyle', 'pStyle');
$section->addText('I have only a paragraph style definition.', null, 'pStyle');

// Save File
$objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'Word2007');
$objWriter->save('Text.docx');
?> 
```

我尝试在我的 CI 控制器中实现它，这里是代码 PHPWord_Text.php

```
<?php if (!defined('BASEPATH')) exit ('No direct script access allowed');
class PHPWord_Text extends CI_Controller {
    function __construct() {
        parent::__construct();
        $this->load->library('word');
    }
    function index() {
        $PHPWord = $this->word; // New Word Document
        $section = $PHPWord->createSection(); // New portrait section
        // Add text elements
        $section->addText('Hello World!');
        $section->addTextBreak(2);
        $section->addText('I am inline styled.', array('name'=>'Verdana', 'color'=>'006699'));
        $section->addTextBreak(2);
        $PHPWord->addFontStyle('rStyle', array('bold'=>true, 'italic'=>true, 'size'=>16));
        $PHPWord->addParagraphStyle('pStyle', array('align'=>'center', 'spaceAfter'=>100));
        $section->addText('I am styled by two style definitions.', 'rStyle', 'pStyle');
        $section->addText('I have only a paragraph style definition.', null, 'pStyle');
        // Save File / Download (Download dialog, prompt user to save or simply open it)
        $filename='just_some_random_name.docx'; //save our document as this file name
        header('Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document'); //mime type
        header('Content-Disposition: attachment;filename="'.$filename.'"'); //tell browser what's the file name
        header('Cache-Control: max-age=0'); //no cache
        $objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'Word2007');
        $objWriter->save('php://output');
    }
}
?> 
```

访问它

```
http://localhost/codeigniter/index.php/PHPWord_Text 
```

福莱阿！！！我的代码有效！但是...当我尝试将下载包中的目录示例中的模板示例转换为新的 CI 控制器时，我有点困惑，这里是 Template.php 的原始代码

```
<?php
require_once '../PHPWord.php';

$PHPWord = new PHPWord();

$document = $PHPWord->loadTemplate('Template.docx');

$document->setValue('Value1', 'Sun');
$document->setValue('Value2', 'Mercury');
$document->setValue('Value3', 'Venus');
$document->setValue('Value4', 'Earth');
$document->setValue('Value5', 'Mars');
$document->setValue('Value6', 'Jupiter');
$document->setValue('Value7', 'Saturn');
$document->setValue('Value8', 'Uranus');
$document->setValue('Value9', 'Neptun');
$document->setValue('Value10', 'Pluto');

$document->setValue('weekday', date('l'));
$document->setValue('time', date('H:i'));

$document->save('Solarsystem.docx');
?> 
```

谁能帮我解决这个问题？请.. T_T
**注意**：我不希望它保存在服务器中，我希望它显示下载对话框提示用户是否保存或打开它，就像这里的一些代码一样

```
// Save File / Download (Download dialog, prompt user to save or simply open it)
$filename='just_some_random_name.docx'; //save our document as this file name
header('Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document'); //mime type
header('Content-Disposition: attachment;filename="'.$filename.'"'); //tell browser what's the file name
header('Cache-Control: max-age=0'); //no cache
$objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'Word2007');
$objWriter->save('php://output'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T07:41:34.623

我认为您可能遇到不止一个 Template.php 问题。

首先，您可能想弄清楚它在做什么。

与其他示例 x.php 生成 x.docx。对于 Template.php，它使用 Template.docx 来生成 Solarsystem.docx。

变量 Value1、Value2、Value3 等在 Template.docx 中都定义为 ${Value1}、${Value2}、${Value3} 等。如果在 Template.php 中更改右侧的值，它将更改 Solarsystem.docx 中的相应值。

其次，您似乎关心输出。

对我有用的是：

```
$filename = 'nameOfFile.docx';
$document->save($filename);
header('Content-Description: File Transfer');
header('Content-type: application/force-download');
header('Content-Disposition: attachment; filename='.basename($filename));
header('Content-Transfer-Encoding: binary');
header('Content-Length: '.filesize($filename));
readfile($filename); 
```

这种方式仍然将其保存在服务器上，但也会下载它。如果我同时使用两者`$document->save();`，`$objWriter->save();`当我尝试对`readfile();`objWriter 保存的文件使用时，我得到一个空白文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T10:28:34.447

我认为这是正确的：

```
 $filename = 'nameOfFile.docx';
    $document->save($filename);
    header('Content-Description: File Transfer');
    header('Content-type: application/force-download');
    header('Content-Disposition: attachment; filename='.basename($filename));
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: '.filesize($filename));
    readfile($filename);
    unlink($filename); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T15:23:46.230

`save()`类的方法`Template`返回临时文件文档的名称，因此您只需将其提供给用户即可`readfile($tempName)`；

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-04T20:27:21.187

我不确定我是否正确地回答了你的问题，如果我错了，请原谅。

在您的第 4 个代码块中，您有一行

```
$document->save('Solarsystem.docx'); 
```

如果您不想将文件保存到本地磁盘，而是将其发送到客户端，则只需删除该行并添加第 5 个代码块中的代码：

```
// Save File / Download (Download dialog, prompt user to save or simply open it)
$filename='just_some_random_name.docx'; //save our document as this file name
header('Content-Type: application/vnd.openxmlformats-        officedocument.wordprocessingml.document'); //mime type
header('Content-Disposition: attachment;filename="'.$filename.'"'); //tell browser what's the file name
header('Cache-Control: max-age=0'); //no cache
$objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'Word2007');
$objWriter->save('php://output'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-28T22:38:02.740

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

require_once APPPATH . '/src/PhpWord/Autoloader.php';

use PhpOffice\PhpWord\Autoloader as Autoloader;
Autoloader::register(); 
```

# android - 在操作栏中使用带有 ProgressBarIndeterminate 的自定义视图时，应用程序崩溃

> ID：14555726
> 
> 赞同：0
> 
> 时间：2013-01-28T05:03:24.490
> 
> 标签：android, progress-bar, android-actionbar

请帮我。我对自定义视图有疑问。如果我的 customview 中的文本太长，并且显示 ProgressBarIndeterminate，则应用程序崩溃。这是活动中的 onCreateOptionsMenu：

```
public boolean onCreateOptionsMenu(Menu menu) {
    toggle();
    this.getMenuInflater().inflate(R.menu.main, menu);
    actionBar = getActionBar();
    actionBar.setDisplayUseLogoEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);
    actionBar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_HOME);
    actionBar.setDisplayOptions(0, ActionBar.DISPLAY_USE_LOGO);
    actionBar.setDisplayOptions(0, ActionBar.DISPLAY_HOME_AS_UP);
    View customView = getLayoutInflater().inflate(
            R.layout.action_bar_display_options_custom, null);
    customView.findViewById(R.id.action_home).setOnClickListener(
            new OnClickListener() {

                @Override
                public void onClick(View v) {
                    toggle();
                }
            });
    btnSort = customView.findViewById(R.id.sort_view);
    btnSort.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            onPopupButtonClick(v);
        }
    });
    txtTitle = (TextView) customView.findViewById(R.id.action_title);
    actionBar.setCustomView(customView, new ActionBar.LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    actionBar.setDisplayShowCustomEnabled(true);
    // search button
    searchButton = (SearchView) menu.findItem(R.id.action_search)
            .getActionView();
    searchButton.setOnQueryTextListener(this);
    // set title on first
    refreshTitleBar();
    return true;
} 
```

这是自定义视图布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:gravity="center_vertical"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/action_home"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="fitStart"
    android:src="@drawable/btn_home" />

<LinearLayout
    android:id="@+id/sort_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical" >

    <TextView
        android:id="@+id/action_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ellipsize="start"
        android:maxLines="1"
        android:textColor="@android:color/white" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:src="@drawable/sort_icon" />
</LinearLayout></LinearLayout> 
```

如果我设置的标题太长，“setProgressBarIndeterminateVisibility”方法会使应用程序崩溃。这是我的 LogCat 输出。

```
01-28 11:50:24.850: W/dalvikvm(29817): threadid=1: thread exiting with uncaught exception (group=0x41f4c300)
01-28 11:50:24.880: E/AndroidRuntime(29817): FATAL EXCEPTION: main
01-28 11:50:24.880: E/AndroidRuntime(29817): java.lang.ArrayIndexOutOfBoundsException: length=61; index=-1
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.text.StaticLayout.calculateEllipsis(StaticLayout.java:756)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.text.StaticLayout.out(StaticLayout.java:720)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.text.StaticLayout.generate(StaticLayout.java:428)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.text.StaticLayout.<init>(StaticLayout.java:140)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.TextView.makeSingleLayout(TextView.java:5884)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.TextView.makeNewLayout(TextView.java:5741)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.TextView.onMeasure(TextView.java:6098)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.View.measure(View.java:15172)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1038)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:576)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.View.measure(View.java:15172)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1038)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:576)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.View.measure(View.java:15172)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at com.android.internal.widget.ActionBarView.onMeasure(ActionBarView.java:974)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.View.measure(View.java:15172)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at com.android.internal.widget.ActionBarContainer.onMeasure(ActionBarContainer.java:173)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.View.measure(View.java:15172)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.View.measure(View.java:15172)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at com.slidingmenu.lib.CustomViewAbove.onMeasure(CustomViewAbove.java:795)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.View.measure(View.java:15172)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.View.measure(View.java:15172)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2431)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.View.measure(View.java:15172)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.Choreographer.doFrame(Choreographer.java:525)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.os.Handler.handleCallback(Handler.java:615)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.os.Looper.loop(Looper.java:137)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at android.app.ActivityThread.main(ActivityThread.java:4931)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at java.lang.reflect.Method.invokeNative(Native Method)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at java.lang.reflect.Method.invoke(Method.java:511)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
01-28 11:50:24.880: E/AndroidRuntime(29817):    at dalvik.system.NativeStart.main(Native Method)
01-28 11:50:28.354: I/Process(29817): Sending signal. PID: 29817 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-05T00:53:34.870

是的，您的问题`android:ellipsize="start"`与 Crazy 相结合，`android:maxLines="1"`即使在 Lollipop 上仍然存在此错误。解决方案也是设置`android:singleLine="true"`，尽管它已被弃用似乎可以解决问题。

[https://code.google.com/p/android/issues/detail?id=33868](https://code.google.com/p/android/issues/detail?id=33868)

# php - PHP MySQL连接失败

> ID：14555727
> 
> 赞同：0
> 
> 时间：2013-01-28T05:03:41.017
> 
> 标签：php, mysql

我正在测试 php 中的连接

```
mysql_connect("xxx.com", "usernamehere", "passwordhere") or die('cannot connect : '. mysql_error()); 
```

但是连接失败并显示[无法连接：用户''@'localhost'拒绝访问数据库'mysqldb']

由于在我的 php 页面中，我尝试使用用户名和密码登录，但错误消息表明这是匿名登录。我不确定为什么会这样。

附加信息：当我使用家庭 Wifi 时，我可以成功登录。该问题仅发生在办公室 Wifi 上。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T05:07:17.440

改变这个

```
mysql_connect("mysqldb", "usernamehere", "passwordhere") or die('cannot connect : '. mysql_error());
              ^ // here it should be hostname not the DB name 
```

至

```
$conn = mysql_connect("localhost", "usernamehere", "passwordhere") or die('cannot connect : '. mysql_error());
mysql_select_db("mysqldb",$conn); 
```

# c++ - WinRT继承和通用代码

> ID：14555728
> 
> 赞同：0
> 
> 时间：2013-01-28T05:03:44.337
> 
> 标签：c++, winrt-xaml

我想从几个 WinRT 组件中提取通用代码到一个基类，所以我不需要复制和粘贴它。我有以下基类：

```
[Windows::Foundation::Metadata::WebHostHidden]
ref class ExpandableView : public Windows::UI::Xaml::DependencyObject
{
public:
    static void onIsExpandedChanged(Windows::UI::Xaml::DependencyObject^ object, 
        Windows::UI::Xaml::DependencyPropertyChangedEventArgs^ arguments);
public:
    property bool IsExpanded
    {
        bool get(){return (bool)GetValue(IsExpandedProperty);}
        void set(bool value){SetValue(IsExpandedProperty, value);}
    }
    static property Windows::UI::Xaml::DependencyProperty^ IsExpandedProperty
    {
        Windows::UI::Xaml::DependencyProperty^ get(){return  _IsExpandedProperty;}
    }
protected:
    ExpandableView();
    virtual void viewExpanded();
    virtual void viewCollapsed();
private:
    void _expand();
    void _collapse();
private:
    static Windows::UI::Xaml::DependencyProperty^ _IsExpandedProperty;
}; 
```

我创建了一些用户控件，它们应该以某种方式从这个基类继承。而且不可能按照我想要的方式去做，因为 winrt 类只能继承一个 ref 类，而其他应该是接口。但是我需要这个具有依赖属性的类，它在设置时具有一些逻辑，并且我不想在我的所有类中复制和粘贴这个属性。那么问题来了：如何用 WinRT 来实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:14:49.453

您是否尝试过使用所需的特定类的模板和继承：

```
template<typename BaseClass>
ref class ExpandableView : public BaseClass; 
```

现在重用的子类`ExpandableView`可以继承他们需要的任何东西，而不仅仅是`Windows::UI::Xaml::DependencyObject`.

# php - 如何在 Windows 中使用 php 提取 rar/存档文件和文件夹？

> ID：14555730
> 
> 赞同：0
> 
> 时间：2013-01-28T05:04:02.090
> 
> 标签：php

我喜欢使用 php 提取 rar/archive 文件和文件夹。但我试过使用这个脚本

```
<?php 
    $rar_file = rar_open('example.rar') or die("Can't open Rar archive");
    $entries = rar_list($rar_file); 
    foreach ($entries as $entry) { 
        echo 'Filename: ' . $entry->getName() . "\n"; 
        $entry->extract('/dir/extract/to/'); 
    } 
    rar_close($rar_file); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:07:06.480

您使用的功能需要您先[安装](http://php.net/manual/en/rar.installation.php)它。

取而代之的是，您可能希望使用 调用命令行工具`exec()`，但请确保您保护自己免受 shell 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T14:55:36.143

```
$archive_name = '/full/path/to/file.rar'
$entry_name = 'path/to/archive/entry.txt'; //notice: no slash at the beginning
$dir_to_extract_to = '/path/to/extract/dir';
$new_entry_name = 'some.txt';

$rar = rar_open($archive_name) OR die('failed to open ' . $archive_name);
$entry = rar_entry_get($rar, $entry_name) OR die('failed to find ' . $entry_name . ' in ' . $archive_name);

// this will create all necessary subdirs under $dir_to_extract_to
$entry->extract($dir_to_extract_to); 
/* OR */

// this will create only one new file $new_entry_name in $dir_to_extract_to
$entry->extract('', $dir_to_extract_to.'/'.$new_entry_name); 

// this line is really not necessary
rar_close($rar); 
```

# .htaccess - https、.htaccess 和 SEO

> ID：14555732
> 
> 赞同：-3
> 
> 时间：2013-01-28T05:04:08.120
> 
> 标签：.htaccess, ssl, seo

我知道这里和那里都有帖子独立解释下面的每个部分，但我发现很难让所有 4 个部分在根目录上的一个 .htaccess 中工作，到目前为止都是错误 500 或 404。

这对于那些使用 SSL 并希望避免 SEO 重复内容问题的网站应该非常有用。

1.  所有请求[http://domain.com](http://domain.com)都应该转到[http://www.domain.com](http://www.domain.com) (SEO)

2.  所有请求[https://domain.com](https://domain.com)都应该转到[https://www.domain.com](https://www.domain.com) (SEO)

3.  /checkout 和 /customers 应该只访问 https:// 版本的网站；不是 http://（显然是安全的）

4.  所有其他目录（不是 /checkout、/customer）的 https:// 请求应重定向到该目录的 http:// 版本（SEO）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-06T08:42:31.383

htaccess 中最好的代码：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

如果您使用 cms wordpress 安装和活动插件真的很简单 SSL 。

# jdbc - hsqldb 插入时更新

> ID：14555735
> 
> 赞同：5
> 
> 时间：2013-01-28T05:04:33.980
> 
> 标签：jdbc, insert, hsqldb

有谁知道通过调用 INSERT 来使 HSQLDB 更新列的解决方案。我希望我的代码能够插入，如果已经有数据，则更新该数据。我知道 MySQl，我相信，有'ON DUPLICATE KEY UPDATE'。我似乎找不到任何关于此的最新文档。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-08-16T11:28:31.730

一个好的样本有时比[关于 MERGE 声明的正式文档](http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_merge_statement)更好:)

**样品 1**

对于`MY_TABLE`具有列 (`COL_A`和`COL_B`) 的表 ( )，其中第一列是主键：

```
MERGE INTO MY_TABLE AS t USING (VALUES(?,?)) AS vals(a,b) 
        ON t.COL_A=vals.a
    WHEN MATCHED THEN UPDATE SET t.COL_B=vals.b
    WHEN NOT MATCHED THEN INSERT VALUES vals.a, vals.b 
```

**样品 2**

让我们在表中添加另一列 ( `COL_C`)：

```
MERGE INTO MY_TABLE AS t USING (VALUES(?,?,?)) AS vals(a,b,c) 
        ON t.COL_A=vals.a
    WHEN MATCHED THEN UPDATE SET t.COL_B=vals.b, t.COL_C=vals.c
    WHEN NOT MATCHED THEN INSERT VALUES vals.a, vals.b, vals.c 
```

**样品 3**

现在让我们将主键更改为由前两列 (`COL_A`和`COL_B`) 组成：

```
MERGE INTO MY_TABLE AS t USING (VALUES(?,?,?)) AS vals(a,b,c) 
        ON t.COL_A=vals.a AND t.COL_B=vals.b
    WHEN MATCHED THEN UPDATE SET t.COL_C=vals.c
    WHEN NOT MATCHED THEN INSERT VALUES vals.a, vals.b, vals.c 
```

享受！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T16:17:18.590

HSQLDB 为此提供了 MERGE 语句。

[http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_merge_statement](http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_merge_statement)

或者，您可以编写一个简短的存储过程来插入，然后捕获任何违反约束的异常并执行更新。

[http://hsqldb.org/doc/2.0/guide/sqlroutines-chapt.html#src_psm_handlers](http://hsqldb.org/doc/2.0/guide/sqlroutines-chapt.html#src_psm_handlers)

更新：从 2.3.4 版开始，HSQLDB 还支持 ON DUPLICATE KEY 的 MySQL 语法

# tcp - TCP序号最大值

> ID：14555738
> 
> 赞同：5
> 
> 时间：2013-01-28T05:04:54.050
> 
> 标签：tcp, packet, iptables

我正在尝试捕获数据包并重新组织数据包以获取原始 HTTP 请求。

我正在通过 IPQUEUE（通过 iptables 规则）捕获数据包，我发现数据包没有按顺序捕获。

我已经知道在 TCP 协议中，数据包必须重新排序，所以我试图通过序列号重新排序数据包。

根据 Wikipedia，TCP 的序列号是 32 位数字。那么，如果序列号达到 MAX 32bits 数会怎样？

因为SYN包的序号是随机数，我觉得这个限制可以很快达到。

如果有人对此表示赞赏，或者有一些有用的链接，请给我一个答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T06:17:57.637

来自[RFC-1185](http://www.ietf.org/rfc/rfc1185.txt)

```
 Avoiding reuse of sequence numbers within the same connection is
  simple in principle: enforce a segment lifetime shorter than the
  time it takes to cycle the sequence space, whose size is
  effectively 2**31.

  If the maximum effective bandwidth at which TCP
  is able to transmit over a particular path is B bytes per second,
  then the following constraint must be satisfied for error-free 
  operation:
      2**31 / B  > MSL (secs) 
```

因此，简单地说，TCP 会处理它。除了这个条件，TCP 还具有时间戳的概念来处理序列号环绕条件。来自相同的上述 RFC

```
 Timestamps carried from sender to receiver in TCP Echo options can
  also be used to prevent data corruption caused by sequence number
  wrap-around, as this section describes. 
```

具体来说，TCP 使用 PAWS 机制来处理 TCP 环绕案例。[您可以在RFC-1323](http://www.ietf.org/rfc/rfc1323.txt)中找到有关 PAWS 的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:13:20.350

简单来说，32 位无符号数将环绕：

```
...
0xFFFFFFFE
0xFFFFFFFF
0x00000000
0x00000001
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:08:31.137

RFC793 第 3.3 节：

> 必须记住，实际的序列号空间是有限的，尽管非常大。这个空间的范围从 0 到 2* *32 - 1。由于空间是有限的，所有处理序列号的算术必须以 2* * 32 为模执行。这种无符号算术保留了序列号的关系，因为它们再次从 2**32 - 1 循环到 0。计算机模算术有一些微妙之处，因此在编程这些值的比较时应该非常小心。

对序列号进行的任何算术都是模 2^32

# xml - 删除 XML(WSDL) 文件中的 s:element 属性值？

> ID：14555740
> 
> 赞同：0
> 
> 时间：2013-01-28T05:05:03.997
> 
> 标签：xml, xslt, xsd, wsdl, mule

我想在我的 XML (WSDL) 文件中删除标签之间的 s:element：

```
<wsdl:types>
  <s:schema elementFormDefault="qualified" targetNamespace="http://ws.cdyne.com/WeatherWS/">
  <s:element name="GetWeatherInformation">
  <s:complexType/>
   </s:element>
   <s:element name="GetWeatherInformationResponse">
   <s:complexType>
     <s:sequence>
       <s:element minOccurs="0" maxOccurs="1" name="GetWeatherInformationResult"    type="tns:ArrayOfWeatherDescription"/>
     </s:sequence>
     </s:complexType>
    </s:element>

        <s:complexType name="ArrayOfWeatherDescription">
        <s:sequence>
          <s:element minOccurs="0" maxOccurs="unbounded" name="WeatherDescription"  type="tns:WeatherDescription"/>
        </s:sequence>
        </s:complexType>
        <s:complexType name="WeatherDescription">
        <s:sequence>
           <s:element minOccurs="1" maxOccurs="1" name="WeatherID" type="s:short"/>
           <s:element minOccurs="0" maxOccurs="1" name="Description" type="s:string"/>
           <s:element minOccurs="0" maxOccurs="1" name="PictureURL" type="s:string"/>
       </s:sequence>
      </s:complexType>

       <s:element name="GetCityForecastByZIP">
        <s:complexType>
        <s:sequence>
           <s:element minOccurs="0" maxOccurs="1" name="ZIP" type="s:string"/>
        </s:sequence>
        </s:complexType>
        </s:element> 
```

现在我想删除`<s:element name="GetCityForecastByZIP"> <s:complexType> <s:sequence> <s:element minOccurs="0" maxOccurs="1" name="ZIP" type="s:string"/> </s:sequence> </s:complexType> </s:element>`

当我在运行后在我的 .xslt 文件中使用此结构时，`<xsl:template match="s:element[@name = 'GetCityForecastByZIP']" />`我的控制台中出现错误，我该如何删除它？

我在我的 Mule-Console 中看到了这个错误

```
Exception in thread "main" org.mule.module.launcher.DeploymentInitException: TransformerConfigurationException: Failed to compile stylesheet. 1 error detected.
at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:220)
at org.mule.module.launcher.application.ApplicationWrapper.init(ApplicationWrapper.java:64)
at org.mule.module.launcher.DefaultMuleDeployer.deploy(DefaultMuleDeployer.java:46)
at org.mule.tooling.server.application.ApplicationDeployer.run(ApplicationDeployer.java:56)
at org.mule.tooling.server.application.ApplicationDeployer.main(ApplicationDeployer.java:88)
Caused by: org.mule.api.config.ConfigurationException: Error creating bean with name '_muleNotificationManager': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'serviceName': Invocation of init method failed; nested exception is org.mule.api.lifecycle.InitialisationException: Failed to compile stylesheet. 1 error detected. (org.mule.api.lifecycle.InitialisationException) (org.mule.api.config.ConfigurationException)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:52)
    at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
    at org.mule.context.DefaultMuleContextFactory.createMuleContext(DefaultMuleContextFactory.java:80)
    at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:208)
    ... 4 more
Caused by: org.mule.api.config.ConfigurationException: Error creating bean with name '_muleNotificationManager': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'serviceName': Invocation of init method failed; nested exception is org.mule.api.lifecycle.InitialisationException: Failed to compile stylesheet. 1 error detected. (org.mule.api.lifecycle.InitialisationException)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:52)
    at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
    at org.mule.config.builders.AutoConfigurationBuilder.autoConfigure(AutoConfigurationBuilder.java:101)
    at org.mule.config.builders.AutoConfigurationBuilder.doConfigure(AutoConfigurationBuilder.java:57)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
    ... 7 more
Caused by: org.mule.api.lifecycle.InitialisationException: Error creating bean with name '_muleNotificationManager': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'serviceName': Invocation of init method failed; nested exception is org.mule.api.lifecycle.InitialisationException: Failed to compile stylesheet. 1 error detected.
    at org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:117)
    at org.mule.config.spring.SpringXmlConfigurationBuilder.createSpringRegistry(SpringXmlConfigurationBuilder.java:116)
    at org.mule.config.spring.SpringXmlConfigurationBuilder.doConfigure(SpringXmlConfigurationBuilder.java:73)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
    ... 11 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_muleNotificationManager': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'serviceName': Invocation of init method failed; nested exception is org.mule.api.lifecycle.InitialisationException: Failed to compile stylesheet. 1 error detected.
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1442)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:248)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:581)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.mule.config.spring.SpringRegistry.doInitialise(SpringRegistry.java:89)
    at org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:109)
    ... 14 more
        Caused by: org.springframework.beans.factory.BeanCreationException: Error creating                   bean with name 'serviceName': Invocation of init method failed; nested exception is org.mule.api.lifecycle.InitialisationException: Failed to compile stylesheet. 1 error detected.
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isSingleton(AbstractBeanFactory.java:408)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:319)
    at org.springframework.context.support.AbstractApplicationContext.getBeanNamesForType(AbstractApplicationContext.java:1154)
    at org.mule.config.spring.ServerNotificationManagerConfigurator.getMergedListeners(ServerNotificationManagerConfigurator.java:83)
    at org.mule.config.spring.ServerNotificationManagerConfigurator.getObject(ServerNotificationManagerConfigurator.java:65)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 23 more
Caused by: org.mule.api.lifecycle.InitialisationException: Failed to compile stylesheet. 1 error detected.
    at org.mule.module.xml.transformer.XsltTransformer.initialise(XsltTransformer.java:142)
    at org.mule.processor.chain.AbstractMessageProcessorChain.initialise(AbstractMessageProcessorChain.java:79)
    at org.mule.processor.chain.AbstractMessageProcessorChain.initialise(AbstractMessageProcessorChain.java:79)
    at org.mule.construct.AbstractFlowConstruct.initialiseIfInitialisable(AbstractFlowConstruct.java:309)
    at org.mule.construct.AbstractPipeline.doInitialise(AbstractPipeline.java:161)
    at org.mule.construct.AbstractFlowConstruct$1.onTransition(AbstractFlowConstruct.java:111)
    at org.mule.construct.AbstractFlowConstruct$1.onTransition(AbstractFlowConstruct.java:105)
    at org.mule.lifecycle.AbstractLifecycleManager.invokePhase(AbstractLifecycleManager.java:141)
    at org.mule.construct.FlowConstructLifecycleManager.fireInitialisePhase(FlowConstructLifecycleManager.java:81)
    at org.mule.construct.AbstractFlowConstruct.initialise(AbstractFlowConstruct.java:104)
    at org.mule.config.spring.factories.AbstractFlowConstructFactoryBean.initialise(AbstractFlowConstructFactoryBean.java:115)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1581)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1522)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 35 more
Caused by: javax.xml.transform.TransformerConfigurationException: Failed to compile stylesheet. 1 error detected.
    at net.sf.saxon.PreparedStylesheet.prepare(PreparedStylesheet.java:153)
    at net.sf.saxon.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:137)
    at net.sf.saxon.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:88)
    at org.mule.module.xml.transformer.XsltTransformer$PooledXsltTransformerFactory.makeObject(XsltTransformer.java:363)
    at org.apache.commons.pool.impl.GenericObjectPool.addObject(GenericObjectPool.java:1615)
    at org.mule.module.xml.transformer.XsltTransformer.initialise(XsltTransformer.java:138)
    ... 52 more 
```

这是我的 .xslt 文件：

```
<?xml version='1.0' ?>
    <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">

 <xsl:output method="xml" version="1.0" encoding="UTF-8" omit-xml-declaration="yes"  indent="yes" />

   <xsl:template match="@*|node()"> 
        <xsl:copy copy-namespaces="yes">
          <xsl:apply-templates select="@*|node()"/>
        </xsl:copy> 
   </xsl:template>

      <xsl:template match="wsdl:operation[@name = 'GetCityWeatherByZIP']" />  
      <xsl:template match="wsdl:message[@name = 'GetCityWeatherByZIPSoapIn']" /> 
      <xsl:template match="wsdl:message[@name = 'GetCityWeatherByZIPSoapOut']" /> 

      <xsl:template match="wsdl:message[@name = 'GetCityWeatherByZIPHttpGetIn']" /> 
      <xsl:template match="wsdl:message[@name = 'GetCityWeatherByZIPHttpGetOut']" /> 

      <xsl:template match="wsdl:message[@name = 'GetCityWeatherByZIPHttpPostIn']" /> 
      <xsl:template match="wsdl:message[@name = 'GetCityWeatherByZIPHttpPostOut']" /> 

      <xsl:template match="s:element[@name = 'GetCityWeatherByZIP']" /> 

 </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:45:38.990

为了使用`s:`命名空间，您必须在 XSLT 中声明它：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:s="http://www.w3.org/2001/XMLSchema"> 
```

这很可能是您的问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:17:32.430

JLRishe 已经很好地猜测了您的样式表出了什么问题，但没有必要猜测。您已经向我们展示了堆栈跟踪，它显示 XSLT 处理器报告了编译时错误，但您没有向我们展示这些错误，这可能意味着您没有看到它们。默认情况下，它们将转到标准错误输出，如果您从 Java 应用程序编译，则需要确保将诊断结果定向到可以看到它们的位置。修复样式表中的当前编码错误，而不修复运行编译器的问题，以便您将来看到诊断，不会让您走得更远。

您当然可以尝试在 IDE 中开发样式表，以便在部署代码之前检测到此类错误。但即便如此，您也应该投资创建一个健壮的日志框架，您可以在其中找到错误消息。

# javascript - 成功 Ajax 后未从 [object XMLDocument] 获取数据值

> ID：14555744
> 
> 赞同：0
> 
> 时间：2013-01-28T05:05:34.713
> 
> 标签：javascript, ajax, webmethod

我创建了一个`javascript`和一个`WebMethod`。它适用于 IE，但不适用于 Firefox 和 chrome

**我的网络方法**

```
[WebMethod]
    public string Send(string name, string email, string message)
    {
        try
        {
            MailMessage objMailMessage = default(MailMessage);
            objMailMessage = new MailMessage();
            objMailMessage.From = new MailAddress(email, name,System.Text.Encoding.UTF8);
            objMailMessage.To.Add("feedback@abc.in");
            objMailMessage.Subject = "Feedback";
            objMailMessage.Body = "<b>Name :</b> " + name + "<br/><br/>";
            objMailMessage.Body += "<b>Email :</b> " + email + "<br/><br/>";
            objMailMessage.Body+=  "<b>Message :</b> "+message;
            objMailMessage.IsBodyHtml = true;
            objMailMessage.Priority = MailPriority.High;

            CommonFunctions.CommonFunctions.SendEmailMessage(objMailMessage);
            return "success";
        }
        catch (Exception ex)
        {
            Logger.Log.Error(ex);
            return "Fail";
        }
    } 
```

**我的脚本**

```
$.ajax({
                    datatype: 'text',
                    type: 'POST',
                    url: options.url,
                    data: { name: $(this_id_prefix + '#name').val(), email: $(this_id_prefix + '#email').val(), message: $(this_id_prefix + '#message').val() },
                    success: function (data) {
                        $(this_id_prefix + '#loading').css({ display: 'none' });
                        var xmlDoc = data;
                        var returnvalue = xmlDoc.childNodes(1).firstChild.nodeValue;
                        if (returnvalue == "success") {
                            $(this_id_prefix+'#callback').show().append(options.recievedMsg);

                            setTimeout(function () {
                                $(this_id_prefix + '.holder').show();
                                $(this_id_prefix + '#callback').hide().html('');
                            }, 2000);

                        if(options.hideOnSubmit == true) {
                            //hide the tab after successful submition if requested
                            $(this_id_prefix+'#contactForm').animate({dummy:1}, 2000).animate({"marginLeft": "-=450px"}, "slow");
                            $(this_id_prefix+'div#contactable_inner').animate({dummy:1}, 2000).animate({"marginLeft": "-=447px"}, "slow").animate({"marginLeft": "+=5px"}, "fast"); 
                            $(this_id_prefix+'#overlay').css({display: 'none'});    
                        }
                    } else {
                        $(this_id_prefix+'#callback').show().append(options.notRecievedMsg);
                        setTimeout(function(){
                            $(this_id_prefix+'.holder').show();
                            $(this_id_prefix+'#callback').hide().html('');
                        },2000);
                    }
                },
                error:function(){
                    $(this_id_prefix+'#loading').css({display:'none'}); 
                    $(this_id_prefix+'#callback').show().append(options.notRecievedMsg);
                                    }
 }); 
```

我无法从 to 获得返回`webmethod`值`script`。在**成功**功能中，我想检查一下，`if(data=="Success")`但在这里我无法检查。脚本中是否有任何问题，例如数据类型或任何其他问题？这里`var returnvalue = xmlDoc.childNodes(1).firstChild.nodeValue;`不工作。它在本地工作正常，但在发布到服务器后它不起作用。**它在data**中返回对象 xmldocument 。它不是返回字符串。我已将数据类型更改为**文本**

# c# - 订阅一个类的多个实例的事件

> ID：14555745
> 
> 赞同：0
> 
> 时间：2013-01-28T05:05:35.833
> 
> 标签：c#, algorithm, events

我有一个带有自定义 Shape 类的程序，如下所示

```
class Shape
{
public:
Event<ShapeArgs> shapeBurst;
virtual void onMousePress(); //inside this, shapeBurst event is notifed
}; 
```

我的程序中有 15 个 Shape 类的实例。我必须为所有这些实例订阅事件并提供一个通用处理程序。但是，我在这里对如何从所有 15 个班级订阅事件有疑问。
我应该在下面的表格中写下每个实例订阅 shapeBurst 方法还是有更好的方法呢？

```
shape.shapeBurst += new ShapeBurstEventHandler(ShapeBurstMethod); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:07:58.703

如果您有 15 个形状对象，那么您可以使用对象数组而不是 15 个变量并使用循环来订阅事件。

```
for(int i=0; i < shape.Length;i++)
  shape[i].shapeBurst += new ShapeBurstEventHandler(ShapeBurstMethod); 
```

# c++ - 使用动态大小时，二维向量中的 push_back() 错误

> ID：14555748
> 
> 赞同：0
> 
> 时间：2013-01-28T05:06:00.020
> 
> 标签：c++, stl

我正在尝试一些简单的事情。

```
std::vector<std::vector<int> > computeBuf;
std::vector<int> temp;
computeBuf.push_back(temp);                        // correct
computeBuf.push_back(std::vector<int> (10) );      // correct  
int size = 10;
computeBuf.push_back(std::vector<int> (size) );    // correct
int dynsize = someClass.getValue();
computeBuf.push_back(std::vector<int> (dynsize) ); // fault !!!!! 
```

导致程序崩溃的变量“dynSize”是怎么回事。看来编译器需要知道变量的大小。为什么呢 ？？（PS：someClass.getValue() 返回一个 int）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:57:50.513

> 我又调试了一些，发现**dynSize 是-1。**

这里调用的构造函数是`std::vector::vector( std::size_t )`，它接受一个无符号数。传递一个负值会导致尝试分配一个巨大的向量，这可能会导致立即终止。

# python - 如何使用 Qt 和 python 模拟链接的点击事件

> ID：14555750
> 
> 赞同：0
> 
> 时间：2013-01-28T05:06:13.680
> 
> 标签：python, pyqt, web-crawler

我想筛选一个有多个页面的网站。这些页面在不更改 URL 的情况下动态加载。

我不想使用 Selenium，因为每次你需要内容时它都会打开浏览器。QT 的工作方式是否相同？如果没有，我如何使用 qt 模拟点击事件？

PS：谷歌提供了模糊的答案提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:21:52.717

已经有一个项目可以做到这一点：[ghost.py](http://jeanphix.me/Ghost.py/)。它在内部使用 PyQt4 或 PySide 的 QWebkit 浏览器。

这是他们的示例代码：

```
from ghost import Ghost

ghost = Ghost()
page, extra_resources = ghost.open("http://jeanphi.fr")

assert page.http_status==200 and 'jeanphix' in ghost.content 
```

您很可能会使用`ghost.click()`与您的网页进行交互：

```
ghost.click('#selector') 
```

# c++ - 如何使用“auto”关键字迭代 C++ STL 映射数据结构？

> ID：14555751
> 
> 赞同：44
> 
> 时间：2013-01-28T05:06:18.360
> 
> 标签：c++, dictionary, c++11, stl, auto

到目前为止，我一直使用迭代器来遍历 STL 映射中的所有键，如下所示：

```
 for (std::map<char,int>::iterator it=mymap.begin(); it!=mymap.end(); ++it){
            std::cout << it->first << "  => " << it->second << '\n';
    } 
```

最近，虽然我遇到了一些使用不同样式来遍历键的代码，如下所示。是否最近才在修订标准中添加此功能？正如许多其他语言已经提供的那样，这似乎是一种用更少的代码完成更多工作的相当有趣的方式。

```
 for (auto& x: mymap) {
            std::cout << x.first << " => " << x.second << '\n';
    } 
```

另外，我很想知道在这里使用关键字“auto”的确切含义。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-28T05:07:40.537

此代码使用 C++11 标准中的两个新功能[auto 关键字、for type inference](http://en.wikipedia.org/wiki/C%2B%2B11#Type_inference)和[range based for loop](http://en.wikipedia.org/wiki/C%2B%2B11#Range-based_for_loop)。

仅使用`auto`它可以写成（感谢 Ben）

```
for (auto it=mymap.begin(); it!=mymap.end(); ++it) 
```

仅使用范围可以写为

```
for (std::pair<const char,int>& x: mymap) {
        std::cout << x.first << " => " << x.second << '\n';
} 
```

这两个版本的任务与您的两个版本完全相同。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-07-23T18:34:35.077

除了前面的答案，C++17 还添加了另一种使用结构化绑定的方法：

```
for (auto& [key, value]: mymap) {
        std::cout << key << " => " << value << '\n';
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-12-31T16:28:27.847

以下对我有用：

```
for (auto x: mymap) {
  cout << x.first << endl;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-28T05:10:23.697

> **我很想知道在这里使用关键字“auto”的确切含义。**

它能够：

*   减少典型迭代代码的输入
*   由于编译器推断出迭代器的确切类型，因此手动错误的可能性较小。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-28T05:09:06.263

它是 C++11 的新特性，称为`Range-Based for Loops`，它迭代给定范围、数组或集合的所有元素。这在其他编程语言中被称为 foreach 循环。一般语法如下：

```
for ( decl : coll ) {
    statement
} 
```

**Auto** : 自动类型推断与 auto

使用 C++11，您可以声明变量或对象，而无需指定其特定类型，例如：

```
auto i = 42; // i has type int
double f();
auto d = f(); // d has type double 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-06T08:38:21.650

```
for (auto& x: mymap) {
        std::cout << x.first << " => " << x.second << '\n';
} 
```

在这段代码中，基本上使用了两件事 -

首先 - auto 关键字：

auto 关键字指定正在声明的变量的类型将自动从其初始化程序中扣除。

当我们不确定要处理的变量的类型时，我们可以使用 auto 关键字，并且可以用于迭代地图、使用自动变量或迭代器的列表，其中我们不知道其中存在的元素类型内部地图，列表等

第二 - 基于范围的循环 - 这种形式的 for 循环称为“基于范围的 for”，将遍历代码中给出的映射中的每个元素。

所以在我们的代码中 - 我们正在迭代我们的地图，其元素值类型我们不知道使用 auto 在这里我们不需要知道提供给我们的地图的大小，因为我们使用了基于范围的循环，我们将借助它遍历地图中存在的每个元素。

# android - 缩放动态按钮

> ID：14555752
> 
> 赞同：0
> 
> 时间：2013-01-28T05:06:44.623
> 
> 标签：android, screen, scale, android-tablelayout

我正在尝试将大量按钮连续添加到屏幕上。这些按钮在 TableLayout 中设置。我已经搜索了多个这样的地方： [Calculate screen size in android](https://stackoverflow.com/questions/5888942/calculate-screen-size-in-android)试图找到一种方法来设置多个按钮（1 到 9 之间）的大小，以便它们都适合一个屏幕。按钮是这样动态创建的：

```
 // put values into btn array
    for (int i = 0; i < row; i++) {
        tr = new TableRow(this);
        for (int j = 0; j < col; j++) {
            b = new Button(this);
            b.setOnClickListener(this);
            b.setText(bArray[j][i] + "");
            b.setTag(j + "," + i);
            tr.addView(b);
        }
        table.addView(tr);
    } 
```

注意：变量 row 和 col 设置为相同的值（数字 1 到 9）。TableLayout 在 xml 中的 RelativeLayout 中设置，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TableLayout
    android:id="@+id/tableLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" >

</TableLayout> 
```

编辑：按钮是水平的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:28:53.477

好吧，你可以做很多不同的事情。很难从你的问题中确切地说出你想要什么，但我会抛出一些选项。（我不知道这些按钮的走向，所以我假设是垂直的）

1.  一个简单的方法是找到高度并将其除以按钮的数量。类似的东西`b.setHeight(this.getHeight()/numButtons)`

2.  您可以简单地将包装内容属性应用于按钮的高度。这只会占用最少的空间。

3.  使用 a`ScrollView`这样您就不必担心高度了。

4.  最后，您可以将每个按钮`match_parent`设置为并将它们`layout_weight`的每个设置为相等。 **我会推荐这种方法**。它可能是最简单和最不容易出错的。

#4 上的雕刻

随着按钮水平移动，您需要将按钮的宽度设置`MATCH_PARENT`为`layout_weight`一个常数（例如 0.5）。这将使所有按钮以相等的宽度在父级上展开。

# python - 为 CentOS 创建 Python 脚本 RPM

> ID：14555766
> 
> 赞同：0
> 
> 时间：2013-01-28T05:07:39.023
> 
> 标签：python, centos

我在虚拟机上安装了 CentOS 6.3 的最小版本。然后我使用 *yum install python*将 python-2.6.6-29.e16_3.3.x86_64 安装到 /usr/bin/。我有一个我编写的自定义 python 脚本，我想创建一个包含所有 python 依赖项的 RPM，以便 centOS 用户可以使用 rpm 命令安装我的 python 脚本和所有需要的 python 库。这是一种常见的做法吗？似乎下面的命令是推荐的方法，但我没有 setup.py 文件。有任何想法吗？

```
python setup.py bdist_rpm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:56:09.557

您确定需要使用 RMP 文件进行安装吗？在 Google 搜索中查询 RMP 后，它告诉我 RMP 是“RealPlayer 元数据包文件”。我相信你不是在寻找。但是，根据您的其他陈述，我可以看出您正在尝试创建一个要与所有依赖项一起分发的 rpm 文件，并且为此您正在使用命令 python setup.py bdist_rpm，这通常是正确的方法，但是每个必要条件是您需要创建 setup.py。参考这个链接`http://docs.python.org/release/2.0/dist/setup-script.html`

其中谈到了如何创建自己的 setup.py 文件。

# python - 根据每个子数组的累积和对 NXM Numpy 数组进行排序

> ID：14555771
> 
> 赞同：1
> 
> 时间：2013-01-28T05:07:58.033
> 
> 标签：python, numpy, scipy

我在单个 nxm 数组中有 5 个 numpy 数组，每个数组包含一组随机值。我需要的是根据它们递减的累积总和来打印它们。例如，我的 nXm 数组如下所示：

```
 v = [[1,2,3,4], [2,3,4,5], [11,21,3,4], [4,33,21,1], [2,4,6,5]] 
```

我需要它的顺序是：累积和最高的那个排在第一位。我尝试根据 argmax 打印它们，但它潜入单个数组的所有元素并按降序对它们进行排序..

有办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T05:17:33.833

假设通过累积和您的意思是总计（有一个累积和函数返回其他内容），那么您可以使用标准排序来执行此操作：

```
>>> v = [[1,2,3,4], [2,3,4,5], [11,21,3,4], [4,33,21,1], [2,4,6,5]]
>>> sorted(v, key=sum, reverse=True)
[[4, 33, 21, 1], [11, 21, 3, 4], [2, 4, 6, 5], [2, 3, 4, 5], [1, 2, 3, 4]] 
```

并在 numpy 中使用`argsort`：

```
>>> a = np.array(v)
>>> a.sum(axis=1)
array([10, 14, 39, 59, 17])
>>> a.sum(axis=1).argsort()
array([0, 1, 4, 2, 3])
>>> a[a.sum(axis=1).argsort()[::-1]]
array([[ 4, 33, 21,  1],
       [11, 21,  3,  4],
       [ 2,  4,  6,  5],
       [ 2,  3,  4,  5],
       [ 1,  2,  3,  4]]) 
```

但我可能误会你了。

# android - Logcat-real 对象已被删除

> ID：14555774
> 
> 赞同：0
> 
> 时间：2013-01-28T05:08:07.923
> 
> 标签：android, logcat

我正在搜索“实物已被删除”。但找不到任何合适的解决方案，

在我的 logcat 上，这条消息一次又一次地显示，

如果你有适当的解决方案，请帮助我。

```
E/webcoreglue(270):  The real object has been deleted
E/webcoreglue(270): The real object has been deleted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:17:03.503

```
 android:configChanges="orientation|screenSize" 
```

# linux - nfs 错误：NFS:v4 服务器不接受重新启用 idmapper 的原始 uid gid

> ID：14555778
> 
> 赞同：2
> 
> 时间：2013-01-28T05:08:22.977
> 
> 标签：linux, guid, nfs

我在一台服务器上为客户端创建了 NFS 共享，服务器和客户端都是 centos 6 系统。服务器 nfs 导出： **/srv/diskless/tmp *(rw,sync,no_root_squash)**。

我在客户端中挂载**tmp**目录，并以 root 身份登录客户端，当我在 tmp 目录中编辑文件时，有时会显示：***NFS:v4 服务器不接受重新启用 idmapper 的原始 uid gid。*** 当我在 tmp 目录中解压缩 tar 文件时，它显示： ***tar: text.cpp: 无法将所有权更改为 uid 2402, gid 30: Invalid argument***

那么如何解决这个问题或配置 nfs 以忽略这些问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:16:05.963

NFSv4 在线路上使用字符串主体。您需要在负责将字符串转换为数字 ID 的客户端和服务器上运行 rpc.idmapd。请注意，客户端和服务器上的 nfs4 域应该相同。

# android - ConvertView 未提供预期结果

> ID：14555781
> 
> 赞同：2
> 
> 时间：2013-01-28T05:08:49.210
> 
> 标签：android, android-layout, android-intent, android-widget

我正在传递我的图像资源以使用`AsyncTask`并从那里更新我的图像源，以便我一次只能在我的列表视图中获得一张图像。

我在不使用 convertView 的情况下得到了预期的结果，但是当我尝试使用 convertview 时，结果并不符合我的意愿。请帮我。以下是这两种情况的代码：

1.  没有 convertView`getView()`方法：

    ```
    public View getView(int position, View convertView, ViewGroup arg2) {
        ImageView imageView = new ImageView(context);
        imageView.setLayoutParams(new ListView.LayoutParams(
                LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
        if (images[position] != null)
            imageView.setImageResource(images[position]);
        return imageView;
    } 
    ```

2.  使用 convertView`getview()`方法：

    ```
    View v = convertView;
        if (v == null) {
            v = new ImageView(context);
            v.setLayoutParams(new ListView.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        }
        if (images[position] != null)
            ((ImageView) v).setImageResource(images[position]);
        return v;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:49:26.967

您还需要发送异步任务代码，另一方面，试试这个，这对我有用-

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder viewHolder;
            if (convertView == null) {
                viewHolder = new ViewHolder();
                viewHolder.imageView = new ImageView(context);
                convertView.setTag(viewHolder);
            } else
                viewHolder = (ViewHolder) convertView.getTag();

             if (images[position] != null)
            ((ImageView) v).setImageResource(images[position]);

            return convertView;
        }

        class ViewHolder {
            ImageView imageView;
        } 
```

# winforms - 停靠面板的 DevExpress 动态停靠

> ID：14555782
> 
> 赞同：2
> 
> 时间：2013-01-28T05:09:02.573
> 
> 标签：winforms, devexpress

我希望将停靠面板停靠到现有的停靠面板。

我目前的布局如下。窗口左侧是设置停靠面板。右侧是另一个停靠面板。右侧停靠面板占据了大部分窗口。左侧停靠面板包含的项目在与（控件等）交互时会影响右侧停靠面板中看到的内容。

我需要动态添加新的左侧停靠面板。第一个应该停靠在设置停靠面板的底部。第二个应该停靠到第一个，依此类推。

我可以根据需要让第一个新的停靠面板停靠到设置停靠面板。任何后续的停靠面板都不会停靠在前一个面板的底部。相反，它们停靠在前一个的右侧并强制 #1 进入一列。这是我的代码：

```
 // Add a new dock panel
        DockPanel dockPanel = dockManager1.AddPanel(DockingStyle.Top);

        // Dock the panel to the previous panel
        if (mLeftSidePanels.Count == 0)
            dockPanel.DockTo(dockPanelSettings);
        else
            dockPanel.DockTo(mLeftSidePanels[mLeftSidePanels.Count - 1].DockPanel);

        // Add the left side dock panel to our collection
        mLeftSidePanels.Add(dockpanel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:40:03.873

请尝试以下方法：

```
IList<DockPanel> mLeftSidePanels = new List<DockPanel>();
//...
void addNewPanelButton_Click(object sender, EventArgs e) {
    dockManager1.BeginUpdate();

    DockPanel dockPanel = dockManager1.AddPanel(DockingStyle.Top);
    // Dock the panel to the previous panel
    if(mLeftSidePanels.Count == 0)
        dockPanel.DockTo(dockPanelSettings);
    else {
        // add to parent split container
        dockPanel.DockTo(dockPanelSettings.ParentPanel);
    }
    mLeftSidePanels.Add(dockPanel);

    dockManager1.EndUpdate();
} 
```

# ios - iOS 应用程序初始屏幕方向不适用于横向

> ID：14555785
> 
> 赞同：0
> 
> 时间：2013-01-28T05:09:06.657
> 
> 标签：ios, orientation, landscape-portrait

我正在开发这个 iPhone 应用程序，除了第一个屏幕外，它的方向都可以正常工作。如果设备处于纵向，第一个屏幕也可以正常工作，但不能用于横向。

有趣的是，如果我在第一个屏幕上旋转设备，它也可以很好地调整。

在我看来，问题是应用程序始终假定设备处于纵向，因此`portrait orientatio`即使设备处于横向，第一个屏幕也始终显示在 n 中。

我试图`willAnimateRotationToInterfaceOrientation`在执行第一个屏幕结束时添加，但没有奏效。`The willAnimateRotationToInterfaceOrientation`调用旋转功能的方法（在第一个屏幕之后适用于其他屏幕的方法）似乎认为没有必要调整子视图。由于旋转功能非常适合以后的屏幕，我想我可能错过了一些东西（可能在代码之外）。想知道是否有人可以为我指出。在 plist 中，我将“初始启动方向”指定为横向，它也不起作用。

谢谢，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:18:29.853

对于 iPhone 和 iPod，启动图像（默认）不支持横向。

[阅读iOS App Programming Guide](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)中的“App Launch (Default) Images”部分

# java - 可见的edittext意味着我如何检查android中的if条件

> ID：14555787
> 
> 赞同：2
> 
> 时间：2013-01-28T05:09:20.180
> 
> 标签：java, android, if-statement, checkbox, android-edittext

我检查了我的edittext在android中是可见还是不可见。

现在我必须检查条件是。，

1.  如果我的编辑文本可见意味着我如何插入数据。
2.  如果我的edittext 不见了意味着我如何插入另一个数据。

这是我的代码，如果我必须检查复选框意味着编辑文本是不可见的，否则编辑文本是可见的。：

```
 chkIos = (CheckBox) findViewById(R.id.addresscheckbox);

    chkIos.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
        if (((CheckBox) v).isChecked())
        {
             S_address = (TextView)findViewById(R.id.address1);  
             S_address.setVisibility(View.GONE);  

        Saddress = (EditText)findViewById(R.id.tf_address1);  
        Saddress.setVisibility(View.GONE);  
      }
        else
        {
             S_address = (TextView)findViewById(R.id.address1);  
             S_address.setVisibility(View.VISIBLE);  

       Saddress = (EditText)findViewById(R.id.tf_address1);  
        Saddress.setVisibility(View.VISIBLE);
        if(!(Saddress.getText().toString().length() == 0)){

                showAlertbox(" Shipping Address is Required!!"); 
            }
      } 
```

下面的代码是.，如果我的edittext可见意味着插入saddr值。否则插入baddr值。我如何检查条件。

下面的错误显示：VISIBLE 无法解析为变量。

```
 if(Saddress== VISIBLE)
    {
        PropertyInfo saddress =new PropertyInfo();
        saddress.setName("Saddress");//Define the variable name in the web service method
        saddress.setValue(saddr);//Define value for fname variable
        saddress.setType(String.class);//Define the type of the variable
        request.addProperty(saddress);//Pass properties to the variable

    }
    else
    {
    PropertyInfo saddress =new PropertyInfo();
    saddress.setName("Saddress");//Define the variable name in the web service method
    saddress.setValue(baddr);//Define value for fname variable
    saddress.setType(String.class);//Define the type of the variable
    request.addProperty(saddress);//Pass properties to the variable
    } 
```

请在此处查看完整的源代码：[完整代码](http://pastie.org/private/xrhcbfocjrpcjl5qgika)

**编辑：**

在我的代码中，我必须选中复选框意味着 Saddress 是不可见的。我必须单击按钮意味着插入了 baddr 值......如果我必须取消选中复选框意味着 Saddress 值是可见的。那个时候我必须插入saddr 值。

在这里我必须运行应用程序，这意味着 baddr 值同时插入了 Saddress==visible 和 Saddess==invisible case。我该如何为这些写条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T05:10:56.627

采用

```
if(Saddress.getVisibility() == View.VISIBLE){
  //.. your code here
} 
```

代替

```
if(Saddress== VISIBLE){
//.. your code here
} 
```

因为`VISIBLE`, `GONE`and`INVISIBLE`是 View 类而不是 Activity 的一部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:16:10.043

```
EditText editText = (EditText)findViewById(R.id.editText1);
editText.getVisibility(); 
```

这将提供 edittext 是 VISIBLE、INVISIBLE 或 GONE。

```
if(editText.getVisibility() == View.VISIBLE){
   //.. your actions are performed here
} 
```

参考[这个](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)。[你可以找到一些关于VISIBLE](http://developer.android.com/reference/android/view/View.html#VISIBLE)、[GONE](http://developer.android.com/reference/android/view/View.html#GONE)和[INVISIBLE](http://developer.android.com/reference/android/view/View.html#INVISIBLE)的有趣细节

# wpf - 控制 WPF 中的对齐方式

> ID：14555800
> 
> 赞同：0
> 
> 时间：2013-01-28T05:10:18.347
> 
> 标签：wpf, panel

我在 WPF 中设计了一个窗口，左侧有一个图像，图像旁边有两个按钮。我将其设置`WindowState`为`Maximized`.

但是在运行应用程序时，黑白控件的差距变大了。我想要在设计时进行对齐。就`windows application`其现状而言，`wpf`控件会自动对齐。

请帮我这样做，我是 wpf 的新手。能`Panels`解决这个问题吗？

**样品**

```
<Window x:Class="AnalogCalibrationTool.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Analog Hardware Calibration Tool" 
    Height="500" 
    Width="700" 
    WindowStartupLocation="CenterScreen" 
    WindowStyle="SingleBorderWindow" 
    WindowState="Maximized" 
    ResizeMode="NoResize" SnapsToDevicePixels="True">
<Grid>
    <Image HorizontalAlignment="Left" Margin="84.436,164.428,0,147.763" Name="image1" Stretch="Fill" Width="200" />
    <Button Height="23" Margin="326.634,0,276.639,147.763" Name="button1" VerticalAlignment="Bottom">Button</Button>
    <Button Height="29.997" HorizontalAlignment="Right" Margin="0,0,184.426,144.264" Name="button2" VerticalAlignment="Bottom" Width="75">Button</Button>
</Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:18:14.883

你可以试试这个：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Rectangle Name="image1" Width="200" Grid.Column="0" Fill="Aqua"  />
    <StackPanel Grid.Column="1" HorizontalAlignment="Left">
        <Button Name="button1" Height="23" Width="60" Content="Button1"/>
        <Button Name="button2" Height="23" Width="60" Content="Button2"/>
    </StackPanel>
</Grid> 
```

在示例中，矩形用作图像的假冒。

# eclipse - 日食换行图

> ID：14555801
> 
> 赞同：0
> 
> 时间：2013-01-28T05:10:19.753
> 
> 标签：eclipse, line-breaks

我不小心在 eclipse 中设置了一些设置，每行后都会显示一些符号。无论如何可以告诉我如何删除它。

![换行符](../Images/2cd6c0f82e4c79a03fe8525a7dd1189f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:12:32.960

这些是空白字符。这些字符代表基于格式的标签，例如换行符、制表符等。

您可以通过 Eclipse 禁用它们`Preferences`。他们在下面`General -> Editors -> Text Editors`，选项是`Show whitespace characters`。只需取消选中它并点击`OK`它就可以了。

# java - Java 和 JavaFX 安全性

> ID：14555803
> 
> 赞同：3
> 
> 时间：2013-01-28T05:10:42.567
> 
> 标签：java, security, sockets, applet, warnings

在最新的 Java 更新 (7u11) 之后，每当我的小程序加载到 Firefox 中的页面上时，您必须允许应用程序运行并发出很大的安全警告，而事实上小程序无法访问任何类型的个人信息。

在 IE 中，它仍然会发送此警告一次，但是当您单击“始终允许”时，它不再这样做了。在火狐浏览器中，即使点击“始终允许”，每次离开再回来都会再次提示。我担心吓跑潜在用户。

小程序创建与托管在与网络服务器相同的服务器/IP 上的守护程序的网络连接。（目前为 4444 端口）。以前，这不会构成安全违规，但现在确实并且必须得到批准。

小程序向客户端发送不断变化的信息（价格、时间等），并且数据必须与服务器保持实时连接才能正确呈现。客户端发送有限数量的数据（基本上是一个自行设计的协议，用于确定您要查看哪些信息）小程序不会访问系统上的个人文件或其他信息。这个小程序只访问它自己的资源（包含在 .jar 文件中的东西），不访问用户硬盘上的文件。

另一方面，更新java后，当使用小程序访问我的页面时，显示错误“您必须安装java”。你选择下载并安装，它说java已经安装，你要重新安装吗？如果您说不，仍然会显示错误。如果您说重新安装，小程序现在会加载但包含所有安全内容。

我知道必须有一个解决方法。雅虎游戏和 pogo 游戏使用 Java 环境和一些客户端-服务器流量，但它们不会显示一堆安全警告。唯一的区别是我的 Applet 使用 JavaFX，而 yahoo 和 pogo 使用 Swing 或 AWT。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T05:51:22.190

从 Java 7u11 开始，Java 小程序的默认安全级别从中更改为高 - 这可能会导致您在针对 Java 7u11 运行应用程序时看到新的安全警告。从[Java 7u11 发行说明](http://www.oracle.com/technetwork/java/javase/7u11-relnotes-1896856.html)：

> **概要：默认安全级别设置更改为高** Java 小程序和 Web 启动应用程序的默认安全级别已从“中”提高到“高”。这会影响未签名（沙盒）Java Web 应用程序可以运行的条件。以前，只要您安装了最新的安全 Java 版本，小程序和 Web 启动应用程序就会像往常一样继续运行。使用“高”设置，在运行任何未签名的应用程序之前总是会警告用户以防止静默利用。

IMO，这相当于 Oracle 承认 Java 的攻击面太大，无法充分防止通过下载攻击进行驱动，例如用户只是访问运行 Java 的网页，而该网页利用了一个未修补的漏洞Java 危害用户的系统。因此，Oracle 的回应是提高浏览器中 Java 应用程序的安全级别，以便在没有用户首先同意继续执行的情况下，它们永远无法运行。许多人会说这对 Internet 来说总体上是一件好事，但如果您之前依赖未签名的非恶意应用程序在没有安全警告弹出窗口的情况下将其交付给用户，则这是不可取的。

* * *

对于 Yahoo 或 Pogo 游戏，可能游戏已经签名，在这种情况下，第一次运行来自发行商的游戏时会显示警告消息，但用户可以选择始终信任发行商，在这种情况下，用户随后，当用户访问来自同一发布者的小程序时，将永远不会显示警告。如果您愿意，您可以为您的应用程序做同样的事情。

* * *

您还可以要求用户降低他们的默认安全首选项（例如从高到中），然后，当您的未签名应用程序运行时，不会有警告消息 - 但这是不可取的，因为 Oracle 将默认安全首选项从中到高是有充分理由的。

* * *

JavaFX 与 Swing 或 AWT 小程序的警告行为应该没有区别——如果有，那将是一个要报告给 Oracle 的严重错误。

* * *

独立于 Java 安全设置，个别浏览器供应商可以选择阻止 Java 或 Java 版本并向用户显示警告。这些阻止消息在各种浏览器中的样子的一些图像在[禁用 Java 警告外观和影响 Java Web Start 应用程序](https://stackoverflow.com/questions/14487698/disabled-java-warning-appearance-affect-on-java-web-start-apps)（帖子名称提到 Web Start 应用程序，但帖子中的警告图像与小程序相关 - 无论这些小程序是基于 Swing 或 JavaFX）。

* * *

以下是 Java 将为未签名应用程序生成的警告消息示例。警告消息是在 Mac OS X 10.8 上运行 Java 7u11 时通过单击[Oracle 的 java.com 站点上的“验证 Java”按钮生成的。](http://www.java.com/en/download/installed.jsp)

![安全警告](../Images/4ffd0f85b7b35b5120287304cc2e5c9d.png)

# php - PHPMailer 带有外部文件的多个收件人

> ID：14555820
> 
> 赞同：0
> 
> 时间：2013-01-28T05:13:32.233
> 
> 标签：php, phpmailer

我正在尝试在 phpMailer 脚本中包含收件人列表，但没有成功。它只是打印出列表，但不将其包含在函数中。

该文件必须是外部文件，因为它是针对不同收件人的不同场景运行的自动化脚本的一部分。

有任何想法吗？

收件人.php

```
$mail->AddAddress('blabla@xyc.com');
$mail->AddAddress('gaga@xyz.com'); 
```

phpMailer.php

```
$mail = new PHPMailer(true); 

try {
  include('recipients.php');

  $mail->AddCC('zyx@cba.com');
  $mail->SetFrom('xyz@abc.com');
  $mail->Subject = 'Subject Line';
  $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!';
  $mail->MsgHTML($email_message);
  $mail->IsHTML(true);

  $mail->Send();
  echo "Message Sent OK</p>\n";
} catch (phpmailerException $e) {
  echo $e->errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
  echo $e->getMessage(); //Boring error messages from anything else!
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:17:02.917

让我们首先尝试从外部文件中获取所有收据并将它们保存在一个数组中，然后对所有收据进行 for 循环并触发邮件功能..这对你来说会更容易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:04:05.307

如果你想遵循**phpMailer**定义的接口，我也建议**使用 Gautam3164 的**方法。因为每个函数调用只能添加一个电子邮件地址。 **phpMailer**不是为**邮件列表目的**而构建的。

否则，我会破解 phpMailer 的 AddAnAddress 方法，或者添加您自己的“大量地址加载”方法。

```
private function AddAnAddress($kind, $address, $name = '') {
.....
} 
```

或使用**其他**库向**多个收件人**发送电子邮件。

希望这可以帮助

# css - 拉伸 div 以填充父级中的剩余空间

> ID：14555821
> 
> 赞同：1
> 
> 时间：2013-01-28T05:13:35.993
> 
> 标签：css, html

我是 HTML/CSS 的新手，所以请耐心等待。我已经看到在 SO 和其他地方提出了类似的问题，但在我的情况下无法让它们起作用。我有一个简单的两列布局。左列在顶部显示一个具有固定高度的“过滤器”文本框，在其下方显示一个 TreeView (ASP.NET)。由于 TreeView 似乎没有任何支持滚动的属性，因此我将其包含在另一个 div 中。右列将显示基于所选树节点的结果。

这是我的 HTML：

```
<body class="page">
    <div class="leftCol">
        <div>
            <input type="text" id="txtFilter" class="SearchTextBox" />
        </div>
        <div id="ForScrollBar" style="height: 100%;">
            A TREEVIEW HERE
        </div>
    </div>
    <div class="rightCol">
    </div>
    <div style="clear: both;"/>
</body> 
```

这是我的CSS：

```
<style>
    .page
    {
        width: 900px;
        margin: 0px auto 0px auto;
        border: 1px solid #496077;
        min-height: 460px;
        height: 100%;
    }

    .leftCol
    {
        position: relative;
        border: 1px solid;
        float: left;
        width: 275px;
        height: 450px;
        min-height: 450px;
    }

    .rightCol
    {
        position: relative;
        border: 1px solid;
        float: right;
        width: 620px;
        height: 450px;
        min-height: 450px;
    }

    .SearchTextBox
    {
        border-style: solid;
        border-width: 1px;
        height: 30px;
        width: 270px;
        margin: 0px;
    }
</style> 
```

现在我面临以下问题：

1.  div“ForScrollBar”从父 div leftCol 溢出，即使我已将其设置为 100% 并希望它填充 leftCol 的剩余高度。
2.  我希望正文填充页面高度，但无法使其正常工作。

任何帮助将不胜感激。

注意：如果可能的话，我很想避免使用 JS 或 jQuery，但如果它是具有浏览器兼容性的唯一方法，我会选择它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:34:46.923

试试这个 dotNET。使用 % 以便于将对象放置在所需位置。

CSS

```
<style>
.page
{
    width: 99%;
    margin: 0px auto 0px auto;
    border: 1px solid #496077;
    min-height: 460px;
    height: 99%;
}

.leftCol
{
    position: relative;
    border: 1px solid;
    float: left;
    width: 25%;
    height: 100%;
    min-height: 450px;
}

.rightCol
{
    position: relative;
    border: 1px solid;
    //float: right;
margin-left:25%;
    width: 75%;
    height: 100%;
}

.SearchTextBox
{
    border-style: solid;
    border-width: 1px;
    height: 5%;
    width: 100%;
    margin: 0px;
}

</style> 
```

HTML

```
<body class="page">
<div class="leftCol">
    <div id="inputBox" class="SearchTextBox">
        <input type="text" id="txtFilter" style="position:relative;width:95%"/>
    </div>
    <div id="ForScrollBar" style="height: 94%;">
        A TREEVIEW HERE
    </div>
</div>
<div class="rightCol">
</div>
<div style="clear: both;"/>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:20:12.740

设置`height:100%`意味着子级将继承父级的全高。如果您有多个孩子，每个孩子都是 100%，那么每个孩子都将占据父母的全高。最简单的解决方案是设置一个固定的高度`px`- 或者您可以`%`为每个孩子指定值，加起来为 100。

或者，您可以允许标题具有固定高度和可滚动区域，以使用`display: table`和列出剩余空间`display: table-row`。

[http://jsfiddle.net/Cxj4b/1/](http://jsfiddle.net/Cxj4b/1/)

此外，您可能有多个元素，因此请尽量避免使用 ID，除非您想暗示页面上应该只存在一个（例如 #page 本身）。

# c++ - 堆栈上的 PThread 互斥锁和解锁

> ID：14555822
> 
> 赞同：0
> 
> 时间：2013-01-28T05:13:41.887
> 
> 标签：c++, c

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#define NUM_THREADS     2

pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

char **AddToStack(char *buffer)
{
  static char **stack = NULL;
  int stacksize = 0;

  if (buffer == NULL)
    return stack;

  if (stack == NULL){
    stack = calloc(1, sizeof(char*));
  }
  stack[stacksize] = strdup(buffer);
  stacksize++;
  stack = realloc(stack, (stacksize+1) * sizeof(char*));
  stack[stacksize] = NULL;
  return stack;
}

void *FRead(void *threadid)
{
pthread_mutex_lock(&mutex);
  char fname[256], buffer[256];
  FILE *ifile;
  long tid;
  int counter;
  tid = (long)threadid;

  sprintf(fname, "data%ld", tid);
  if ((ifile = fopen(fname, "r")) == NULL){
    printf("Error: Thread #%ld was unable to open file %s!\n", tid, fname);
  }
  else{
    printf("Thread #%ld starting to read from file %s!\n", tid, fname);
    fscanf(ifile, "%s", buffer);
    counter = 0;
 while (!feof(ifile)){
//pthread_mutex_lock(&mutex);  
    counter++;
      AddToStack(buffer);
      fscanf(ifile, "%s", buffer);
//pthread_mutex_unlock(&mutex);
    }
    fclose(ifile);
    printf("Thread #%ld added %d entries to the stack!\n", tid, counter);
pthread_mutex_unlock(&mutex);
    pthread_exit(NULL);
  }
  return NULL;
}

int main(int argc, char *argv[])
{
  pthread_t threads[NUM_THREADS];
  int rc, i = 0;
  long t;
  char **stack;
  FILE *ofile;

  for(t=0;t<NUM_THREADS;t++){
    printf("In main: creating thread %ld\n", t);
    rc = pthread_create(&threads[t], NULL, FRead, (void *)t);
    if (rc){
      printf("ERROR; return code from pthread_create() is %d\n", rc);
      exit(-1);
    }
  }

for(t=0;t<NUM_THREADS;t++)
{
//pthread_join(threads[t],NULL);
}

  //Lets write the content of the stack into a file
  stack = AddToStack(NULL); //Get the base of the stack pointer
  if (stack != NULL){
    ofile = fopen("result.dat", "w");
    for (i = 0; stack[i] != NULL; i++)
      fprintf(ofile, "%s\n", stack[i]);
    fclose(ofile);
  }
  fprintf(stderr, "%d data written to file result.dat\n", i);
  pthread_exit(NULL);
  return 0;
} 
```

这是我的 data1 和 data2 文件

data1: 放弃 abase abased abases abash abashed abashes abashing abasing abate abated abatement abates abates abattoir abbey abbort abbreviate abbreviates abbreviating abbreviations abdicate abduced abdicates abdicating腹部 abduct abducted

数据2：

```
God
I
I'll
I'm
I've
Miss
Worry
a
ability
able
aboard
about
above
abroad
absence
absent
absolute
accident
accidentally
according
accordingly
account
acquaintance
across
act
action
active
activity
actual
admiration
admission
adress
advance
advantage
adventure 
```

以上是我的互斥代码，但我想知道为什么我只能将 1 个数据写入文件 result.dat

这是我的输出

1 数据写入文件 result.dat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:23:11.540

首先，`pthread_mutex_unlock(&mutex);pthread_exit(NULL);`位置不正确。将此放在`return NULL`声明之前。

代码中有几个错误。请在下面找到更新的代码。

```
 #include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define NUM_THREADS     2

pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

char **AddToStack(char *buffer)
{
  static char **stack = NULL;
  static int stacksize = 0;

  if (buffer == NULL)
    return stack;

  if (stack == NULL){
    stack = (char**)calloc(1, sizeof(char*));
  }
  stack[stacksize] = strdup(buffer);
  stacksize++;
  stack = (char**)realloc(stack, (stacksize+1) * sizeof(char*));
  stack[stacksize] = NULL;
  return stack;
}

void *FRead(void *threadid)
{
  pthread_mutex_lock(&mutex);
  char fname[256], buffer[256];
  FILE *ifile;
  long tid;
  int counter;
  tid = (long)threadid;

  sprintf(fname, "data%ld", tid);
  if ((ifile = fopen(fname, "r")) == NULL){
    printf("Error: Thread #%ld was unable to open file %s!\n", tid, fname);
  }
  else{
    printf("Thread #%ld starting to read from file %s!\n", tid, fname);
    fscanf(ifile, "%s", buffer);
    counter = 0;
    while (!feof(ifile)){
      //pthread_mutex_lock(&mutex);  
      counter++;
      AddToStack(buffer);
      fscanf(ifile, "%s", buffer);
      //pthread_mutex_unlock(&mutex);
    }
    fclose(ifile);
    printf("Thread #%ld added %d entries to the stack!\n", tid, counter);
    //pthread_mutex_unlock(&mutex);
    //pthread_exit(NULL);
  }
  pthread_mutex_unlock(&mutex);
  pthread_exit(NULL);
  return NULL;
}

int main(int argc, char *argv[])
{
  pthread_t threads[NUM_THREADS];
  int rc, i = 0;
  long t;
  char **stack;
  FILE *ofile;

  for(t=0;t<NUM_THREADS;t++){
    printf("In main: creating thread %ld\n", t);
    rc = pthread_create(&threads[t], NULL, FRead, (void *)t);
    if (rc){
      printf("ERROR; return code from pthread_create() is %d\n", rc);
      exit(-1);
    }
  }

  for(t=0;t<NUM_THREADS;t++)
  {
    //pthread_join(threads[t],NULL);
  }

  //Lets write the content of the stack into a file
  stack = AddToStack(NULL); //Get the base of the stack pointer
  if (stack != NULL){
    ofile = fopen("result.dat", "w");
    for (i = 0; stack[i] != NULL; i++)
      fprintf(ofile, "%s\n", stack[i]);
    fclose(ofile);
  }
  fprintf(stderr, "%d data written to file result.dat\n", i);
  pthread_exit(NULL);
  return 0;
} 
```

# crystal-reports-2008 - 页面标题中的公式基于 Crystal Reports 中的行详细信息数

> ID：14555824
> 
> 赞同：0
> 
> 时间：2013-01-28T05:13:49.467
> 
> 标签：crystal-reports-2008

我是 Crystal Reports 的新手，仍在学习中。被这个问题困住了。我想要的是，我的详细信息部分可以处理的最大行数是第一页中的 13 行，当它变成 14 行时，它会转到第二页以及我的页眉和总计。

但是，如果它只有第 13 行，我的第 2 页仍然有页眉。是否有一个公式，其中只有当这是我的详细信息部分的第 14 行时，才会打印我的第 2 页中的页眉？（在详细信息部分之后我仍然有页脚和报告页脚）。

# c# - Binding to the combobox control template item failed

> ID：14555835
> 
> 赞同：0
> 
> 时间：2013-01-28T05:15:12.820
> 
> 标签：c#, wpf, xaml, wpf-controls

I'm using the combobox and binding through List values as like below

```
 <ComboBox ItemsSource="{Binding}" Name="testCombo" Margin="67,48,184,204">
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBox  Text="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType=ComboBox},Mode=OneWay,Path=SelectedItem}" Width="100" Height="50" />
            </DataTemplate>
        </ComboBox.ItemTemplate>            
    </ComboBox> 
```

binding data like below in c#

```
 IList<string> objLoadData = new List<String> { "Ramesh", "Suresh" };
      testCombo.DataContext = objLoadData; 
```

I tried to bind the data into textbox, but I couldn't. How do bind datas to textbox?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:08:30.440

If your list is just strings just `Text="{Binding}"` should work

You should think about using an `ObservableCollection` for your `ItemsSource` as it will automaticly update the `ComboBox` when Items change (add/remove etc)

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <ComboBox ItemsSource="{Binding ComboItems}" Margin="67,48,184,204">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding}" Width="100" Height="50" />
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
    </Grid>
</Window> 
```

Code:

```
public partial class MainWindow : Window
{
    private ObservableCollection<string> _comboItems = new ObservableCollection<string>();

    public MainWindow()
    {
        InitializeComponent();
        ComboItems.Add("Stack");
        ComboItems.Add("Overflow");
    }

    public ObservableCollection<string> ComboItems
    {
        get { return _comboItems; }
        set { _comboItems = value; }
    }
} 
```

If you want to use a `TextBox` in the `ComboBox` you will probably want to use an object as the backing store for the string that implements `INotifyPropertyChanged` this way eveyything is updated and kept in sync.

Example:

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <ComboBox ItemsSource="{Binding ComboItems}" Margin="67,48,184,204">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Name}" Width="100" Height="50" />
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
    </Grid>
</Window> 
```

Code:

```
public partial class MainWindow : Window
{
    private ObservableCollection<MyItem> _comboItems = new ObservableCollection<MyItem>();

    public MainWindow()
    {
        InitializeComponent();
        ComboItems.Add(new MyItem { Name = "Stack" });
        ComboItems.Add(new MyItem { Name = "Overflow" });
    }

    public ObservableCollection<MyItem> ComboItems
    {
        get { return _comboItems; }
        set { _comboItems = value; }
    }
}

public class MyItem : INotifyPropertyChanged
{
    private string _name;
    public string Name
    {
        get { return _name; }
        set { _name = value; NotifyPropertyChanged("Name"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:08:34.483

Try this;

Inside constuctor

```
testCombo.DataContext = this;
testCombo.ItemsSource = objLoadData; 
```

In XAML

```
 <ComboBox Name="testCombo" Width="100" Height="50" >
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBox Text="{Binding Mode=OneWay}" Width="100" Height="50" />
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

# html - 使用 Server sent Event 和 node.js 构建聊天应用程序

> ID：14555837
> 
> 赞同：1
> 
> 时间：2013-01-28T05:15:20.187
> 
> 标签：html, node.js, websocket, server-sent-events

我是 node.js 和 SSE 的新手。我想使用 SSE 和 node.js 创建一个聊天应用程序。谁能指导哪个更好的 SSE 或 websocket？IE7+ 是否有使用 js 而不是 php 的 IE 填充

请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:29:09.790

如果客户端永远不会向服务器发出请求并且服务器将完成所有推送，那么您应该使用服务器发送的事件。

但是，对于聊天应用程序，由于客户端需要不断地向服务器发送请求，WebSocket API 是自然的选择。

WebSocket API 的“polyfills”是其他以低效方式模拟套接字连接的技术，例如 Ajax 长轮询。

像 Socket.IO 这样的 WebSocket 库被设计为在可用时使用 WebSocket API，并在 WebSocket API 不可用时回退到其他技术，如 Ajax 长轮询。

某些服务器端语言也以不同的方式处理资源。例如，PHP 将需要每个套接字连接 1 个进程，这可以快速填充线程限制，而 NodeJS (IIRC) 可以循环连接并在 1 个线程上处理它们。因此，在给定您选择的解决方案的情况下，还应考虑语言如何处理资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:43:32.680

首先考虑兼容性。

**上交所：** [http ://caniuse.com/#feat=eventsource](http://caniuse.com/#feat=eventsource)

IE：不支持

火狐：版本 6+

歌剧：版本 11+

Chrome：未知版本 +

Safari：版本 5.1+

**WebSocket：（协议 13）** [http://caniuse.com/#feat=websockets](http://caniuse.com/#feat=websockets)

即：版本 10+

火狐：版本 11+

歌剧：版本 12.1+

铬：版本 16+

Safari：版本 6+

我知道很多与 WebSockets 一起工作的模块（包括我制作的一个[simpleS](https://github.com/micnic/simpleS/)，我做了一个简单的演示聊天来展示如何在通道中组织连接，试一试），还有一些与 SSE 一起工作的模块，我猜最后一个测试较少，与使用 WebSockets 的模块相比，你不能太依赖它们。

您可以在此处找到有关 WebSockets 和 SSE 的模式信息：[WebSockets vs. Server-Sent events/EventSource](https://stackoverflow.com/questions/5195452/websockets-vs-server-sent-events-eventsource)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T04:10:34.587

有一个 polyfill - [https://github.com/Yaffle/EventSource](https://github.com/Yaffle/EventSource) (IE8+) 和聊天示例 - [https://github.com/Yaffle/EventSource/blob/master/tests/server.js](https://github.com/Yaffle/EventSource/blob/master/tests/server.js)

# php - 如何在多个字段中使用 Mysql FULLTEXT

> ID：14555849
> 
> 赞同：0
> 
> 时间：2013-01-28T05:16:20.013
> 
> 标签：php, mysql, full-text-search

我必须在许多字段中匹配文本。目前我在查询中使用了 Like。但是 Like 给出了太多结果。我已经阅读了有关 mysql FULLTEXT 查询的信息，我试图在我的查询中应用。但我不知道它的工作原理或不是。

**旧查询：**

```
select * from table where field1 like 'search text' or field2 like 'search text' 
```

**全文查询：**

```
select * from table where MATCH(field1, field2) AGAINST ('search text' IN NATURAL LANGUAGE MODE ) 
```

我的问题是，是否可以使用全文匹配查询在所有具有或条件的字段中进行搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:14:10.307

默认情况下，mysql 将`MATCH(field1, field2)`像您的旧查询一样在这两个字段中进行搜索。

您需要做的就是为这两个字段创建全文索引。

```
CREATE FULLTEXT INDEX index_name
    ON tbl_name (field1, field2); 
```

例如：

```
SELECT * FROM tbl_name WHERE MATCH(field1, field2) AGAINST ('word1 word2' IN BOOLEAN MODE ); 
```

你会发现同样的：

```
SELECT * FROM tbl_name 
WHERE field1 LIKE '%word1%' OR field2 LIKE '%word1%' OR
      field1 LIKE '%word2%' OR field2 LIKE '%word2%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:21:20.587

像这样试试

```
where
name = 'search_key'
OR firstname ='search_key' 
OR lastname ='search_key' 
```

它会解决你的问题吗

# c++ - 调用自身的类方法

> ID：14555851
> 
> 赞同：1
> 
> 时间：2013-01-28T05:16:51.093
> 
> 标签：c++, class

我不确定我正在尝试做的事情是否可行，但是可能有一个技巧可以让它发挥作用。我正在尝试从类函数中调用递归函数，但我不知道如何将第一个参数设置为类。例如：

```
Class A{
public:
   A();
   ~A();

   void B();
}

void A::B(){
   C( ****This is where I am unsure);
}

void C(A name){

} 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:17:51.763

您似乎想将当前对象的副本传递给该方法，因此：

```
C(*this); 
```

`this`是一个特殊的指针，它被隐式传递给每个成员函数并指向对象本身。所以你只需要取消引用`this`.

# jquery - 使用 jQuery 删除基于 selectedIndex 的类

> ID：14555854
> 
> 赞同：1
> 
> 时间：2013-01-28T05:17:02.293
> 
> 标签：jquery, selectedindex

好的，所以我正在尝试根据下拉菜单的 selectedIndex 删除一个类，具体来说，我希望当有人在我的下拉菜单中选择第二个选项（selectedIndex 为 1）时出现 id=hide 的 div，如果他们选择了不同的选项。

这是我的html代码：

```
<div id="product-variants">      
                <select id="product-select" name="id">

                        <option value="269270508">No Charm</option>

                        <option value="269270608">Heart (Add $25)</option>

                        <option value="269270614">Horseshoe Bead (Add $25)</option>

                        <option value="269270666">Crystal Horseshoe (Add $25)</option>

                        <option value="269270692">Cowgirl Cross (Add $25)</option>

                        <option value="269270732">Lucky Charm (Add $35)</option>

                        <option value="270460652">Round (Add $25)</option>

                        <option value="269270562">Small Star (Add $20)</option>

                        <option value="269270598">Large Star (Add $25)</option>
    </select>
</div>

<div id="hide" class="hidden"><form>
<input id="checkbox" type="checkbox" name="vehicle" value="Bike">Engraving?<br>
</form>
    <form>
Engraving Message: <input type="text" name="engraving"><br>
        </form></div> 
```

我的脚本：

```
var choice = getElementById("product-select").selectedIndex;

if (choice == 1){

    $('#checkbox').change(function(){
        $('#hide').removeClass('hidden');
    });

} 
```

和 CSS：

```
.hidden {
    display:none
} 
```

以及 jfiddle 上的链接：http: [//jsfiddle.net/AFrjz/2/](http://jsfiddle.net/AFrjz/2/)

我一直试图解决这个问题好几个小时，但似乎无法做到。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T05:42:32.457

您可以像这样以 jQuery 方式完成所有操作：http: [//jsfiddle.net/AFrjz/6/](http://jsfiddle.net/AFrjz/6/)

```
$('#product-select').change(function () {
   var choice = $("#product-select option:selected").index();
   if (choice == 1) {
       $('#hide').removeClass('hidden');
   } else {
       $('#hide').addClass('hidden');
   }
}); 
```

您必须在更改时获取选定的索引，`<select>`然后在 中进行比较`if`。

无需调用 change 函数`checkbox`来隐藏或显示自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:18:26.267

您需要进行以下更正。

*   你有文件。在 getElementById 之前。更改`getElementById`为 `document.getElementById`
*   您将更改事件与隐藏复选框绑定，因此您将无法触发事件显示复选框来选择它。
*   在事件处理程序中添加条件，而不是在条件中绑定事件。

**[现场演示](http://jsfiddle.net/AFrjz/4/)**

```
$('#checkbox').change(function(){    
   var choice = document.getElementById("product-select").selectedIndex;
    alert(choice)
   if (choice == 1){
     $('#hide').removeClass('hidden');
   }
}); 
```

**在select中查看选中第二项的效果`removeClass`并选中复选框。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:20:20.507

试试这个

```
if (choice == 1){

  //$('#checkbox').change(function(){ you are callinjg a change event here... so the hide is not fired..
    $('#hide').removeClass('hidden');
 // });

} 
```

**更新**

> 当有人在我的下拉菜单中选择第二个选项（selectedIndex 为 1）时，我希望 id=hide 的 div 出现，如果他们选择不同的选项，则再次消失。

我使用了选择框的更改事件..并检查了所选值..如果值是您的第二个选项的值..然后删除类否则添加类

```
$("#product-select").change(function(){
 var choice = $(this).val()

 if (choice == '269270608'){

//$('#checkbox').change(function(){
    $('#hide').removeClass('hidden');  //remove class here
//});

 }else{
    $('#hide').removeClass().addClass('hidden');  //else addclass
 }

}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/AFrjz/5/)

# rubymine - Rubymine 中是否有完全禁用软包装的方法？

> ID：14555859
> 
> 赞同：2
> 
> 时间：2013-01-28T05:17:07.110
> 
> 标签：rubymine

我可以为我打开的每个编辑器关闭它们，但是有没有办法一起删除软包装？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:03:12.067

使用`File`| `Settings`| 全局和永久`Editor`禁用**软包装：**

![软包装](../Images/be0243cef8a8874f0ccedd72731517dc.png)

# iphone - 根据iphone中的背景图像调整图像大小

> ID：14555860
> 
> 赞同：1
> 
> 时间：2013-01-28T05:17:07.437
> 
> 标签：iphone, ios, ios6, uiimage, crop

我有两个`UIImage`( `Uiimage Views`)，其中一个是背面图像，另一个是前面图像。我有动态更改后背`imageView`尺寸。现在我想重新调整大小取决于背面图像正面图像大小也需要动态更改（比例）。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:16:59.850

只需计算调整大小后和调整大小之前的背面图像的 Newwidth/oldWidth 比率和类似的 NewHeight/oldHeight 比率，并使用相同的比率计算正面 imageView 的新帧。

例如。后图像视图的新宽度将 == NewWidthOfFrontImage/oldWidthofFrontImage*oldWidthofBackImage;

同样，您可以计算新的高度。

请更具体地说明您的问题，以便答案更准确？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:21:19.857

让这两个图像是img1和img2。

```
UIImageView *img1 = [[UIImageView alloc]init];
UIImageView *img2 = [[UIImageView alloc]init]; 
```

使 img2 的矩形与 img1 成比例。将这些行放入您用来动态更改 img1 矩形的方法中。

```
int conversionRatio = arc4random()%10;

img2.frame = CGRectMake(img1.frame.origin.x, img1.frame.origin.y,    img1.frame.size.width/conversionRatio, img1.frame.size.height/conversionRatio); 
```

你也可以使用动画块来使这发生动画..

# html - 侧边栏和正文“隐藏”在标题下

> ID：14555863
> 
> 赞同：0
> 
> 时间：2013-01-28T05:17:37.847
> 
> 标签：html, css, header, sidebar

我正在尝试使用 css 将标题图像添加到我的网站中。我对 css 很陌生，所以我确定我缺少一些非常简单的标签，以便相应地调整侧边栏和正文。

CSS

```
#sideContainer {float:left;}
.err {
    color: #FF9900;
}

#navMain {
    margin-left:25px;
    color:#999999;
    font-family:Tahoma, Geneva, sans-serif;
}
#headContainer {
    width: 100%;
    position:fixed;
    top:0px;
    height: 150px;
}

#header{
    margin:0px auto;
    height: 150px;
}

#content {
    float:left;
    padding-left: 10px;
    padding-top: 10px;
} 
```

HTML

```
<HTML>
    <HEAD>
        <?php
            require_once('config.php');
        ?>
        <TITLE>Fund Shui Homepage</TITLE>
        <link rel='stylesheet' type = 'text/css' href = 'default.css' />
    </HEAD>
    <BODY>
        <div id = 'headContainer'>
            <div id = 'header'>
                <?php include 'header.html'; ?>    
            </div>
        </div>
        <div id = 'sideContainer'>
            <div id='navMain'>
                <?php include 'sidebar.html'; ?>
            </div>
        </div>
        <div id = 'content'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:01:33.230

只需删除`position:fixed`. 可能与使用相同`position:relative`。

# asp.net - 在 HTTPHandlers URLS 上缓存

> ID：14555864
> 
> 赞同：1
> 
> 时间：2013-01-28T05:17:38.190
> 
> 标签：asp.net, caching, httphandler, prettyphoto, http-caching

我正在 ASP.NET 中构建一个基于 AJAX 的漂亮照片库。

我所做的是显示一组缩略图，在单击每个缩略图时我发布一个 AJAX 请求，根据缩略图我得到一些 URL 并显示漂亮的照片库。一切准备就绪。但。

让我解释。

```
Thumbnail1       Thumbnail2         Thumbnail3
Thumbnail4       Thumbnail5         Thumbnail6
Thumbnail7       Thumbnail8         Thumbnail9
.... 
```

当我们单击 Thumbnail1 时，它会发布一个 AJAX 请求并获取一些这样的 url。

```
"../GalleryHandler.ashx?id=0"
"../GalleryHandler.ashx?id=1"
"../GalleryHandler.ashx?id=2"
"../GalleryHandler.ashx?id=3"
"../GalleryHandler.ashx?id=4" 
```

我根据单击的缩略图和 id 对 GallerHandler.ashx 进行一些检查，并提供适当的图像作为 Web 服务的输出。问题是如果我单击 Thumbnail2 并返回一些类似这样的 URL

```
"../GalleryHandler.ashx?id=0"
"../GalleryHandler.ashx?id=1"
"../GalleryHandler.ashx?id=2"
"../GalleryHandler.ashx?id=3"
"../GalleryHandler.ashx?id=4"
"../GalleryHandler.ashx?id=5" 
```

所以当prettyPhoto画廊弹出和显示画廊它显示从id0到id4的旧图像甚至没有去ashx页面检查（我放置断点并检查）并显示Thumbnail1的旧图像，但是对于id5它去ashx 页面并正确获取新图像。

在一些谷歌之后，我尝试将它放在“ProcessRequest”中。

```
 context.Response.Clear();
    context.Response.Cache.SetCacheability(HttpCacheability.Public);
    context.Response.Cache.SetExpires(DateTime.MinValue); 
```

但它不会解决问题，但 Chrome 会正确显示我期望其他浏览器显示的内容，就像我解释的那样。

我是这个 httphandler 的新手，所以即使我错了和误解也请指导我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:52:03.803

通过像这样向图像链接添加一个额外的参数来解决这个问题，以避免浏览器缓存。

```
"../GalleryHandler.ashx?id=0&uniqueGalleryID=1"
"../GalleryHandler.ashx?id=1&uniqueGalleryID=1"
"../GalleryHandler.ashx?id=2&uniqueGalleryID=1"
"../GalleryHandler.ashx?id=3&uniqueGalleryID=1"
"../GalleryHandler.ashx?id=4&uniqueGalleryID=1" 
```

# ruby-on-rails - 没有对象的方法的Rails源位置

> ID：14555865
> 
> 赞同：2
> 
> 时间：2013-01-28T05:17:39.393
> 
> 标签：ruby-on-rails

如何找到没有对象的方法的源位置？例如，我想查找 Active Record 的 find 方法或 Machinist gem 的 make 方法的源位置。这些方法通常在没有任何对象的情况下被调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:08:23.463

```
require 'active_record'
m=ActiveRecord::Base.method :find 
# => #<Method: Class(ActiveRecord::Querying)#find>

m.source_location
#  => ["/<snip>/gems/activerecord-3.2.11/lib/active_record/querying.rb", 4] 
```

# c# - 如何在VS2010的RDLC图表中添加辅助Y轴

> ID：14555867
> 
> 赞同：1
> 
> 时间：2013-01-28T05:17:51.353
> 
> 标签：c#, .net, rdlc

有没有办法在 Visual Studio 2010 中向**RDLC 折线图添加****辅助 Y 轴**。我在许多文章中读到它是可能的，但没有一篇文章提到如何做到这一点。

# c - 无法包含 和

> ID：14555868
> 
> 赞同：-1
> 
> 时间：2013-01-28T05:17:53.823
> 
> 标签：c, sockets

我为客户端和服务器创建了一个 C 程序，用于将数据从一台计算机传输到另一台计算机。以下代码

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <iostream.h>

void main()
{
    int sockfd;
    struct sockaddr_in saddr;
    char *xyz,xyz1;
    sockfd = socket(AF_INET,SOCK_STREAM,0);
    saddr.sin_family = AF_INET;
    saddr.sin_port=htons(5001);
    saddr.sin_addr.s_addr = inet_aton("192.168.0.254");
    connect(sockfd,(struct sockaddr *)&saddr,sizeof(saddr));
    fgets(xyz);
    write(sockfd,xyz,sizeof(xyz));
    read(sockfd,xyz1,sizeof(xyz1));
    fputs(xyz);
    close(sockfd);
} 
```

但它在 trubo c++ 3.0 IDE 中显示以下错误

```
 UNABLE TO OPEN INCLUDE FILE 'SYS/SOCKET.H'
  UNABLE TO OPEN INCLUDE FILE 'NETINET/IN.H'
  UNABLE TO OPEN INCLUDE FILE 'ARPA/INET.H' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:23:46.693

没有标准指定`sys/socket.h`Turbo C++ 3.0 支持的文件。例如，[SuS v2](http://pubs.opengroup.org/onlinepubs/7908799/xns/syssocket.h.html)和[IEEE 1003.1](http://pubs.opengroup.org/onlinepubs/009696799/basedefs/sys/socket.h.html)需要这样的标头，但 TC++ 3.0 不支持它们中的任何一个。要么使用支持你计划编程的标准的编译器，要么只编程你的编译器支持的标准。

哦，你的代码有很多错误：

```
 char *xyz,xyz1;
       sockfd = socket(AF_INET,SOCK_STREAM,0);
       saddr.sin_family = AF_INET;
       saddr.sin_port=htons(5001);
       saddr.sin_addr.s_addr = inet_aton("192.168.0.254");
       connect(sockfd,(struct sockaddr *)&saddr,sizeof(saddr));
       fgets(xyz); 
```

您没有设置`xyz`任何特定值。您还不能通过将其传递给`fgets`. 您正在传递`fgets`碰巧在未初始化指针中的任何随机垃圾。

```
 write(sockfd,xyz,sizeof(xyz)); 
```

由于`xyz`是指针，`sizeof(xyz)`与 相同`sizeof(char *)`。您想在您的平台上写入与指针大小相等的字节数吗？您需要告诉`write`它要写入多少字节，而不是指针有多大。而且，同样，`xyz`它还没有指向任何东西，所以你不能使用它的值。您正在传递`write`未初始化变量所具有的任何垃圾值。

```
 read(sockfd,xyz1,sizeof(xyz1)); 
```

同样，您使用`sizeof(xyz1)`，这与您想要的相同，`sizeof(char *)`而不是您想要的。在将其设置为任何内容之前，您还可以`xyz1`通过将其传递给 ' 值来使用它。`read`它不指向任何东西，所以你不能用它来告诉`read`把它的结果放在哪里。

```
 fputs(xyz); 
```

该`fputs`函数*仅*适用于 C 风格的字符串。您从套接字读取的数据只是原始数据，它不是 C 风格的字符串。所以你不能把它传递给`fputs`. 你扔掉了 的返回值`read`，所以你不知道你读了多少字节——你怎么期望`fputs`知道要写多少字节？

显然，您才刚刚开始学习 C。您必须是受虐狂才能使用 22 岁的编译器。看在神圣的份上，我希望你不要试图在上面学习 C++，因为你会学到对现代 C++ 完全错误的所有东西，并且会让自己大大倒退。我们这些长期从事 C++ 编程的人不得不付出很多痛苦来忘记旧的东西——如果你不需要的话，不要让自己经历这些。

# c# - 在 Windows 8 机器上的非客户区表格中绘画会有什么问题吗？

> ID：14555871
> 
> 赞同：1
> 
> 时间：2013-01-28T05:18:08.843
> 
> 标签：c#, vb.net, winforms, gdi+

我没有 Windows 8 来测试它，尽管我认为无论如何我都必须检查自己以确保它们肯定不会出现任何问题。

我正在使用在代码项目中找到的一种方法将控件添加到 WinForm 的非客户区。我现在使用的是 Windows 7，效果很好。

我所说的 NCA 是标题栏。该方法基本上允许您使用 Vista 的桌面窗口管理器 (DWM) 向标题栏添加控件。

我最大的担心是它没有使用相同的绘画技术，它会导致我的应用程序在 Windows 8 桌面上看起来很傻。

# android - 在android中获取两个图像视图的边距

> ID：14555876
> 
> 赞同：1
> 
> 时间：2013-01-28T05:18:34.630
> 
> 标签：android, imageview, margin

我有两个必须并排对齐的图像视图。所以，我使用了水平方向的线性布局，并且每个图像视图宽度的权重都相同。这很好用，但我需要两个图像视图之间的分隔可见。所以，我保留了**android:padding**但它似乎仍然没有任何影响。为了更好地了解我的问题，请参阅我在下面粘贴的图片。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    >

  <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="100dp"
        android:layout_gravity="center"
        android:padding="5dp"
        android:layout_weight="1"
        android:scaleType="fitXY"
        android:adjustViewBounds="true"
        android:background="@drawable/imagebgd"
        android:src="@drawable/icon" />
  <ImageView
        android:id="@+id/imageView2"
        android:layout_width="0dp"
        android:layout_height="100dp"
        android:layout_gravity="center"
        android:scaleType="fitXY"
        android:padding = "5dp"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:background="@drawable/imagebgd"
        android:src="@drawable/icon" />
  </LinearLayout> 
```

![在此处输入图像描述](../Images/c09ccbeba56a98bfcedf051de9458612.png)

**正如您在此处看到的，没有可见的分离。**

但是，我确实有另一个问题。我为图像视图保留`nine patch image as background(orange color)`了图像视图的边框，但边框的填充从一个图像变为另一个图像，即图像视图周围的边框厚度发生变化，但我希望它具有稳定的厚度，而与图像无关。有人可以帮我解决这些问题吗？

**注意：**我知道像通过线性布局再次围绕每个图像视图或在图像视图之间保持空视图这样的技巧。但我只想用喜欢的东西来实现它。因为当我添加填充时它适用于其他视图，为什么不适用这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T05:24:51.840

替换`android:padding`为`android:layout_margin`

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    >

  <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="100dp"
        android:layout_gravity="center"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:scaleType="fitXY"
        android:adjustViewBounds="true"
        android:background="@drawable/imagebgd"
        android:src="@drawable/icon" />
  <ImageView
        android:id="@+id/imageView2"
        android:layout_width="0dp"
        android:layout_height="100dp"
        android:layout_gravity="center"
        android:scaleType="fitXY"
        android:layout_margin = "5dp"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:background="@drawable/imagebgd"
        android:src="@drawable/icon" />
  </LinearLayout> 
```

**填充**是边框内的空间，在边框和实际视图的内容之间。

**边距**是边界之外的空间，在边界和该视图旁边的其他元素之间。

检查此[答案](https://stackoverflow.com/questions/4619899/difference-between-a-views-padding-and-margin/4619943#4619943)以了解填充和边距之间的区别

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:26:22.500

`margin`改为给`padding`您的图像视图。

利用

> android:layout_margin="5dp"

反而

> 机器人：填充=“5dp”

*简单的区别：*

*   视图内的填充效果。

*   您视图之外的边距效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:22:11.770

尝试这个，

添加`View`你会得到两个图像之间的空间

```
<View  android:layout_width="10dip"
android:layout_height="wrap_content"/> 
```

并为此添加一些背景`View`

# php - .htaccess 缩短代码不起作用

> ID：14555877
> 
> 赞同：0
> 
> 时间：2013-01-28T05:18:56.703
> 
> 标签：php, .htaccess, codeigniter, url-shortener

我想将[http://fpmls.ca/index.php/user/user_postdetail/index/14](http://fpmls.ca/index.php/user/user_postdetail/index/14)缩短为[http://fpmls.ca/index.php/post_14.html](http://fpmls.ca/index.php/post_14.html)。

user_postdetail 是一个控制器，index 是这个控制器的一个函数 14 是 id(dynamic)

我的 .htaccess 代码是：

```
RewriteEngine On           
RewriteRule ^post_([0-9]+).html$ index.php/user/user_postdetail/index/$1 
```

我正在获取 URL，但“找不到 404 页面：找不到您请求的页面”。显示在该页面中。任何人请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:04:19.880

在配置目录中使用`routes.php`，定义以下规则：

```
$route['post_(:num).html'] = 'user/user_postdetail/$1'; 
```

或者，您可以在应用程序的配置中省略`.html`并制作您的 URI 后缀。

# php - 将复选框列添加到具有从 php 中的数据库动态生成的值的表中

> ID：14555878
> 
> 赞同：0
> 
> 时间：2013-01-28T05:19:01.917
> 
> 标签：php, html

我想在我的表中添加一个包含复选框的列，如果它被选中，我可能能够获取所选行数据的所有 id。

这是我的代码：

```
<table>
    <thead>
        <th>Name</th>
        <th>Company</th>
        <th>Address</th>
    </thead>
    <tbody>
            <?php 
                $sql = "SELECT * FROM Client";
                $qry = mysql_query($sql);

                while($row = mysql_fetch_array($qry)){
                    echo "<tr>
                            <td>$row[name]</td>
                            <td>$row[company]</td>
                            <td>$row[address]</td>
                        </tr>";
                }
    </tbody>
</table> 
```

我的问题是，如何添加另一个包含复选框的列，这些复选框将代表被选中的行数据的 id。我怎样才能检索这些值？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T05:26:44.347

只需添加另一个并创建一个复选框数组并存储该值。

```
while($row = mysql_fetch_array($qry)){
   echo "<tr>
            <td>$row[name]</td>
            <td>$row[company]</td>
            <td>$row[address]</td>
            <td><input type='checkbox' name='row_id[]' id='rowid_<?php echo $id ?>' value='<?php echo $id ?>' />
         </tr>";
} 
```

然后，您可以使用 $_POST[] 方法检索值并使用您想要的任何内容。

```
$rowid      = $_POST['row_id']; 
```

但它会以数组格式返回选中的复选框值。您可以使用循环访问所有元素，也可以使用`implode()`函数用作字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:22:20.117

这取决于您的数据库表布局。在最好的情况下，您有一个名为 company_id 的自动增量列。否则将很难区分行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:22:56.683

像这样试试

```
while($row = mysql_fetch_array($qry)){
                echo "<tr>
                        <td><input type='checkbox' id='$row[id]' name='$row[id]'></td>
                        <td>$row[name]</td>
                        <td>$row[company]</td>
                        <td>$row[address]</td>
                    </tr>";
            } 
```

# php - cakephp 网址问题？

> ID：14555881
> 
> 赞同：0
> 
> 时间：2013-01-28T05:19:51.913
> 
> 标签：php, cakephp-2.0

在 Cakephp 中，我如何使用 Url 中的第一个参数，它就在控制器名称之后。我已经使用 route.php 自定义了 URL。我的网址就像

```
 http://www.example.com/Destination/india/pune 
```

形成这个 URL “目的地”是控制器。我想访问印度作为参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:23:02.737

`Config/routes.php`使用中

```
Router::connect('/Destination/*', array('controller' => 'destination', 'action' => 'search')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:38:24.527

这可以使用路由轻松完成。但是，您必须知道控制器中的哪个操作是要传递给的参数。

例如，您可以有以下内容：

```
class DestinationsController extends AppController{

    public function view($country = null, $city = null){
        // Your logic can go here as to pull the right info from Db and display it on the view
        // Here you can access $country which might have India as the value
        // And if the only country you will be working with is India, then you can have
        // public function india($city = null) <===> This is not recommended
    }
} 
```

你的 route.php 可能就像

```
Router::connect(
        '/destination/:country/:city',
        array(
              'controller' => 'destinations',
              'action' => 'view'
        ),
        array(
            'pass' => array('country','city')
        )   
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:37:38.913

你可以检查一下——

使用 ：-`$this->params`

只是为了咯咯笑试试`$this->params['data']`。我不知道为什么，但由于某种原因，它为我显示了表单数据。

如您在此处看到的，文档中的数据存在冲突

[http://book.cakephp.org/view/972/data](http://book.cakephp.org/view/972/data)。

我猜如果你使用 FormHelper，它会出现在 $this->data 中，如果你不使用 FormHelper，它会出现在`$this->params['form']`.

请注意，如果您使用 FormHelper，则元素的名称将是`data['Model']['element_name']`，如果您只是手动创建表单，则可以将其命名为“element_name”。通过稍后执行，我相信它会将其放入`params['form']`而不是`$this->data`.

你可以检查一下 `routes.php`

# javascript - 将跨度类添加到在 javascript 中连接的字符串

> ID：14555889
> 
> 赞同：0
> 
> 时间：2013-01-28T05:20:25.233
> 
> 标签：javascript, css

我有一些 javascript 代码，用户使用三元运算符来确定消息变量的第一部分。

```
response.answer == "stack overflow" ? message = "blah blah some message." : message = "blah blah some other message" + some variable; 
```

一旦该三元运算符完成，然后我将更多连接到字符串上。

```
message += " About me: my name's Blah blah. Contact me on @blah blah Twitter. This game was made with blah blah." 
```

如何将 span 类添加到 message 变量中包含的字符串中，以便对其进行样式设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T05:24:04.480

创建一个新元素并将其设置`innerHTML`为消息。

```
var span = document.createElement('span');

span.innerHTML = message;
span.className = 'myClass';

document.getElementById('targetContainer').appendChild(span); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:28:20.443

如果您的意思是向最终消息变量添加一个带有类的跨度标签，那么您可以这样做

```
message += " Abou ..... "; // after this line add
message = "<span class='yourclassname'>" + message + "</span>"; 
```

然后您可以将此消息 html 添加到您的目标容器中

```
document.getElementById("targetContainer").innerHTML = message; 
```

# c - 总线错误 - 这段代码有什么问题？

> ID：14555892
> 
> 赞同：0
> 
> 时间：2013-01-28T05:20:40.003
> 
> 标签：c, gcc, compiler-construction, bus, bus-error

```
long int d[500], i;
d[1] = 1;
d[2] = 2;
d[3] = 4;
for(i = 4; i<=500; i++)
    d[i] = d[i-1] + d[i-2] + d[i-3];

int n = 500;
printf("%ld\n", d[500]); 
```

编译器是 gcc。编译时发生总线错误。是什么导致了这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T05:23:50.160

`long int d[500]`声明一个包含 500 个项目的数组，索引从`0`到`499`

`d[500]`超出了数组的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T05:23:05.357

`printf("%ld\n", d[500]);`- 访问数组之外​​。

`d[i] = d[i-1] + d[i-2] + d[i-3];`- 访问数组之外​​。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T05:23:22.823

```
long int d[500];
....
for(i = 4; i<=500; i++)
            ^^^^^^ 
```

你写的传递了分配内存的界限，导致**未定义的行为**。
您应该仅从索引访问数组元素`0`，`499`因为这是您分配的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T05:54:20.340

`long int d[500]`为您提供`500`长数字整数的内存并分配给`d[0]`to`d[499]`但您正在调用`d[500]`其值未定义。

# matlab - 指纹对齐

> ID：14555897
> 
> 赞同：-1
> 
> 时间：2013-01-28T05:21:07.497
> 
> 标签：matlab, alignment, fingerprint

我想在 matlab 中对齐两个指纹图像，以便可以使用模糊库进行匹配。请帮助我。

```
% read two images
Im1 = imread('input_2.tif');
Im2 = imread('input_3.tif');

%  convert images to type double (range from from 0 to 1 instead of from 0 to 255)
Im1 = im2double(Im1);
Im2 = im2double(Im2);

% Calculate the Normalized Histogram of Image 1 and Image 2
hn1 = imhist(Im1)./numel(Im1);
hn2 = imhist(Im2)./numel(Im2);

% Calculate the histogram error
f = sum((hn1 - hn2).^2);
f; %display the result to console

[i,j]=samplealign(hn1,hn2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:29:57.400

你可以试试`imregister`，例如看这个[链接](http://www.mathworks.com/help/images/ref/imregister.html)（第三部分）

您也可以从文件交换中尝试此工具：[FingerPrint Application](http://www.mathworks.com/matlabcentral/fileexchange/16728-fingerprint-application)

# math - 如何在 GLSL 着色器中有效地生成这个简单的重复纹理？

> ID：14555898
> 
> 赞同：1
> 
> 时间：2013-01-28T05:21:19.777
> 
> 标签：math, opengl, image-processing, glsl, shader

我有这个通常为 8x8 大小的子像素纹理（此处为放大版：http: [//i.imgur.com/w697DMO.png](http://i.imgur.com/w697DMO.png)），我需要能够在 GLSL 中生成此纹理，而无需实际使用任何上传的着色器本身的纹理。我知道这是可能的，因为我已经看到对这样的纹理进行了类似的数学运算（[http://www.reach3d.net/views.pdf](http://www.reach3d.net/views.pdf)），我只是不确定如何以相反的方式进行......换句话说，我需要生成在着色器中输出此纹理所需的数学运算。

编辑：我忘了提到我对生成数据的第二个要求。

过去我使用常规纹理时，在计算最终颜色之前还进行了其他操作，这需要将亚像素纹理在其中一个轴上上下移动（例如，纹理的第一行移动到如果我们“向上”移动，则底部）。例如，我有一个图像纹理，其中包含 8 或 9 个不同的部分（想想井字游戏布局），需要合成为单个图像，其中每个部分都放大到全屏大小并与不同的部分相乘（全屏，包裹）子像素纹理（如 8x8 或 3x9）。这将如何实现？

输入图像如下所示：http: [//i.imgur.com/vzxI5tL.jpg](http://i.imgur.com/vzxI5tL.jpg)

输出（仅使用前 8 个部分，具有 8x8 纹理）应如下所示：http: [//i.imgur.com/YuIgSSu.jpg](http://i.imgur.com/YuIgSSu.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T07:08:07.680

要着色的像素位置似乎是某些丢番图方程的根：

```
Red: y== x*3+1 mod 8
Gre: y== x*3+2 mod 8
Blu: y== x*3+3 mod 8 
```

着色器将 a`varying vec2 vTexCoord;`作为输入。

您可以将纹理坐标预乘 8 并使用坐标的整数部分。（免责声明：不记得强制转换是否足以在 GLSL 中进行 float->int 转换。）

```
int a=(((int)vTexCoord.x)*3 - ((int)vTexCoord.y)) & 7;
glColor = vec4( (a==1)?1.0:0.0,
                (a==2)?1.0:0.0,
                (a==3)?1.0:0.0, 1.0); 
```

**编辑**

对于 3x9 系统，必须检查红色像素的条件：

```
 F(x mod 3, y mod 9) == true iff (y=0;x=2), (y=3;x=1), (y=6;x=0) 
```

这可以完全按原样编码：

```
 bool is_red = (y==0 && x==2) || (y==3 && x==1) || (y==6 && x==0); 
```

但它也可以表示为：

```
 bool is_red   = (x*3-y == 0);  // and following the same logic
 bool is_green = (x*3-y == 1);
 bool is_blue  = (x*3-y == 2); 
```

使用后面这些方程的完整片段着色器将是：

```
varying vec2 v_texCoord;
void main()
{
    float x = fract(v_texCoord.x * (1.0/3.0));
    float y = fract(v_texCoord.y * (1.0/9.0));
    int xmod3 = (int)(x*3.0);
    int ymod9 = (int)(y*9.0);
    int d = xmod3*3-ymod9;

    gl_FragColor = vec4((d==0)?1.0f:0.0f,
                        (d==1)?1.0f:0.0f,
                        (d==2)?1.0f:0.0f,
                        1.0f);
} 
```

这是一个使用着色器版本 1.0 的 webgl [jsfiddle](http://jsfiddle.net/mrakis/C6sKb/)版本，具有诸如无整数模、无逻辑与等限制；这是[第二个版本](http://jsfiddle.net/mrakis/cxtCW/2/)。

# opencv - opencv4android 示例编译但不运行

> ID：14555904
> 
> 赞同：1
> 
> 时间：2013-01-28T05:22:11.653
> 
> 标签：opencv

我正在按照教程尝试在这里找到的 opencv4android 提供了几个示例。获得 OpenCV-2.4.3.2-android-sdk 并在我的设备上安装管理器后，我在 eclipse 中导入了示例文件，它们都编译成功。但是，我尝试的任何示例都会立即在我的设备上崩溃。例如，如果我运行“15 谜题”示例，我会得到以下错误日志

```
"01-27 23:11:50.523: E/AndroidRuntime(21568): FATAL EXCEPTION: main
01-27 23:11:50.523: E/AndroidRuntime(21568): java.lang.RuntimeException: Unable to          instantiate activity     ComponentInfo{org.opencv.samples.puzzle15/org.opencv.samples.puzzle15.Puzzle15Activity}:  java.lang.ClassNotFoundException: org.opencv.samples.puzzle15.Puzzle15Activity
01-27 23:11:50.523: E/AndroidRuntime(21568):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1973)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2083)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at android.app.ActivityThread.access$600(ActivityThread.java:134)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1233)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at android.os.Looper.loop(Looper.java:137)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at android.app.ActivityThread.main(ActivityThread.java:4722)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at java.lang.reflect.Method.invokeNative(Native Method)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at java.lang.reflect.Method.invoke(Method.java:511)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at dalvik.system.NativeStart.main(Native Method)
01-27 23:11:50.523: E/AndroidRuntime(21568): Caused by: java.lang.ClassNotFoundException: org.opencv.samples.puzzle15.Puzzle15Activity
01-27 23:11:50.523: E/AndroidRuntime(21568):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
01-27 23:11:50.523: E/AndroidRuntime(21568):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1964)
01-27 23:11:50.523: E/AndroidRuntime(21568):    ... 11 more" 
```

我不确定我做错了什么，因为这在我尝试的任何 opencv 示例中都是一致的。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:40:29.063

如果其他人遇到类似的问题，我的解决方案只是针对 java 6 而不是 java 7 进行编译。在我写这篇文章时，针对 java 7 的编译不适用于 opencv4android。

# c++ - C++ 内存泄漏未正确显示

> ID：14555907
> 
> 赞同：0
> 
> 时间：2013-01-28T05:22:47.160
> 
> 标签：c++, memory-leaks, memory-leak-detector

我正在使用**_CrtDumpMemoryLeaks();** 从 stdlib.h 和 crtdbg.h 来检测内存泄漏，但我注意到我的代码中有一些奇怪的地方。

如果我做：

```
int _tmain(int argc, _TCHAR* argv[])
{
    MyClass* myClass = new MyClass();
    _CrtDumpMemoryLeaks(); //I get a memory leak warning
} 
```

但是，如果我这样做：

```
class MyClass
{
    public:
        char* NewChar();
};
char* MyClass::NewChar()
{
    char* test = new char[100];
    return test;
}

MyClass myClass; //Globally declared
int _tmain(int argc, _TCHAR* argv[])
{        
    char* charPointer = myClass.NewChar();
    _CrtDumpMemoryLeaks(); //No warnings
} 
```

自从我的程序退出（就在**_CrtDumpMemoryLeaks()**之后）并且仍然有一个未删除的新字符后，我不应该收到警告吗？

如何检测这些内存泄漏？

另外，使用上面的相同示例，如果我添加代码：

```
char* anotherPointer = charPointer; //previously filled
delete[] anotherPointer; 
```

这会从类内部删除新的字符以防止内存泄漏，还是我也应该在**charPointer**上调用 delete ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T05:46:11.447

如果您想捕获（或有机会捕获）全局对象泄漏，请尝试在 main 开始时设置 CRT 调试标志**_CRTDBG_LEAK_CHECK_DF**。该标志强制在全局析构函数**之后转储检测到的泄漏。**

要回答您的问题：

> 自从我的程序退出（就在_CrtDumpMemoryLeaks（）之后）并且仍然有一个未删除的新字符后，我不应该收到警告吗？

定义“警告”。调用`_CrtDumpMemoryLeaks()`应该转储当时未完成的任何内容。除非配置为这样做，否则之后退出的程序将不会进行另一次转储。

> 如何检测这些内存泄漏？

如果您使用的是调试 CRT 并正确`_Crt`配置了它们，它们应该被正确检测到，这主要*是*默认情况下。

* * *

以下代码将`_Crt`转储系统设置为按需转储所有对象，并在最终退出之前（`main()`完成后并销毁全局静态数据）。

```
class MyLeak
{
public:
    MyLeak() { new unsigned char[1024]; }

    char * NewChar() { return new char[1024]; }
};

MyLeak myLeak;
int main(int argc, char *argv[])
{
    int tmpFlag = _CrtSetDbgFlag( _CRTDBG_REPORT_FLAG );
    tmpFlag |= _CRTDBG_LEAK_CHECK_DF;
    _CrtSetDbgFlag(tmpFlag);

    _CrtMemState ms = {0};
    _CrtMemCheckpoint(&ms);

    char *ptr = myLeak.NewChar();
    _CrtMemDumpAllObjectsSince(&ms);

    OutputDebugString("Exiting main()\n");
    return EXIT_SUCCESS;
} 
```

**调试输出日志**

```
Dumping objects ->
{69} normal block at 0x000000000048B800, 1024 bytes long.
 Data: <                > CD CD CD CD CD CD CD CD CD CD CD CD CD CD CD CD 
Object dump complete.
Exiting main()
Detected memory leaks!
Dumping objects ->
{69} normal block at 0x000000000048B800, 1024 bytes long.
 Data: <                > CD CD CD CD CD CD CD CD CD CD CD CD CD CD CD CD 
{68} normal block at 0x000000000048B390, 1024 bytes long.
 Data: <                > CD CD CD CD CD CD CD CD CD CD CD CD CD CD CD CD 
Object dump complete. 
```

请注意，第一个转储只记录内部分配，因为我使用了一个检查点，然后是一个 dump-since 调用。第二个转储（在`main()`完成后调用）仍然记录它们，因为它们都很出色。

您在动态分配后泄漏转储（授予来自全局内存空间中的对象，但这与分配无关，它只是分配内存并将其返回给您的代码）看起来不正确。自程序启动以来，您应该通过任何调用获得*所有*未完成的 CRT 分配的对象转储。`_CrtDumpMemoryLeaks()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:44:32.123

想想看。全局变量`myClass`具有静态存储持续时间。它会`main`在程序终止时的右大括号之后被销毁。`_CrtDumpMemoryLeaks`() 不能肯定地检测为泄漏，因为`MyClass`尚未（正确）调用的析构函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:52:05.330

> 自从我的程序退出后，我不应该收到警告吗（就在_CrtDumpMemoryLeaks（）之后）

是的，您应该收到警告，但不是因为退出，...

> 还有一个新的字符没有被删除？

...但正因为如此，即因为仍然有一个动态分配的*char 数组*没有被删除。

> 如何检测这些内存泄漏？

你确定你用 _DEBUG #defined 编译了程序吗？如果你这样做了，afaik 它应该被检测到。（现在无法检查自己并且已经很久没有使用它了，所以我不能保证这一点。）

> 另外，使用上面的相同示例，如果我添加代码：
> 
> `char* anotherPointer = charPointer; //previously filled` 删除[]另一个指针；`
> 
> 这会从类内部删除新的字符以防止内存泄漏，还是我也应该在 charPointer 上调用 delete？

这将删除动态分配的字符数组。在这之后`charPointer`是一个*悬空指针*，它不能再被使用——既不被取消引用，也不被删除[]。（同样适用于`anotherPointer`。）再次删除已删除的数组，无论是通过相同的指针还是另一个变量都是不允许的，并且会导致[Undefined Behavior](http://en.wikipedia.org/wiki/Undefined_behavior)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T05:53:56.577

您是否与调试库链接？如果不是，您将不会收到有关未释放内存块的消息。提示：使用 /MDd 选项。

请注意，与函数名称所暗示的相反，它所做的只是打印尚未释放的内存块列表。通过在 main() 的末尾调用它，您可以让它报告您明确分配但没有明确释放的块。因此，如果您有动态分配的单例对象，它们将被报告为泄漏，而您可能完全合法地使用通过 _atexit() 机制连接的函数来释放它们。

# javascript - 弹出窗口的父窗口未重新加载

> ID：14555925
> 
> 赞同：2
> 
> 时间：2013-01-28T05:24:10.097
> 
> 标签：javascript, popup, parent-child, window.opener

我打开了一个弹出窗口并尝试在关闭父窗口之前刷新父窗口。

下面是我的代码。我尝试使用 window.top、top.location 等，但对我没有任何帮助！

有什么帮助吗？

```
$("#closeit").click(function(){
    opener.location.focus();
    opener.location.reload();
    window.close();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T06:16:31.547

您需要在弹出窗口中处理卸载事件处理程序并在主窗口中重新加载。在主窗口中，添加

```
function popUpClosed() {
    window.location.reload();
} 
```

在弹出窗口中：

```
window.onunload = function() {
    if (window.opener && !window.opener.closed) {
        window.opener.popUpClosed();
    }
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T05:28:47.960

您需要使用父对象：

```
window.parent.location.reload() 
```

[http://www.w3schools.com/jsref/obj_window.asp](http://www.w3schools.com/jsref/obj_window.asp)

# ios - 如何从自定义 UITableViewCell 导航到另一个视图？

> ID：14555926
> 
> 赞同：1
> 
> 时间：2013-01-28T05:24:34.973
> 
> 标签：ios, uitableview, uinavigationcontroller

`UIButton`我的自定义中有三个，我`UITableViewCell`想导航到有关其按钮操作的不同视图。当我实现导航时，它会给出错误，就像`UITableView`Cell 没有导航属性一样。有什么方法可以使这种导航成为可能吗？

我也没有使用故事板，因为我在项目中间，所以我现在不想使用故事板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:28:47.780

您可以在视图控制器类中添加通知并从方法中调用该通知。或者您也可以使用协议委托方法。

# c - 如何管理共享库中的未定义符号

> ID：14555933
> 
> 赞同：0
> 
> 时间：2013-01-28T05:25:26.393
> 
> 标签：c, gcc, shared-libraries

我有一个未定义符号的共享库

```
JNI_CREATEJavaVM 
```

有什么办法可以包含外部依赖项或告诉编译器忽略该符号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T08:09:50.240

是的，您可以告诉编译器忽略该符号。

从`man ld`,

--unresolved-symbols=方法

确定如何处理未解析的符号。方法有四个可能的值：

```
 ignore-all
       Do not report any unresolved symbols.

   report-all
       Report all unresolved symbols.  This is the default.

   ignore-in-object-files
       Report unresolved symbols that are contained in shared
       libraries, but ignore them if they come from regular object files.

   ignore-in-shared-libs
       Report unresolved symbols that come from regular object
       files, but ignore them if they come from shared libraries. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T07:34:50.187

1）我认为（心灵感应模式开启）您正在尝试构建 libdvm.so 并围绕 Java NDK 进行破解，它不公开 JNI_CREATEJavaVM 函数。不要这样做。去谷歌搜索为什么不，还有其他可能的解决方案。

2）由于您的问题听起来像是“如何管理”，因此我将介绍我最喜欢的管理此类事情的方法-通过引入虚假的弱定义。让我们开始构建共享库，因为我们构建什么并不重要。考虑我们有一些带有代码的undesym.c 文件：

```
int
main(void)
{
  JNI_CREATEJavaVM();
  return 0;
} 
```

它会产生`undefined reference to `JNI_CREATEJavaVM'`错误。

让我们添加到链接模块 fakeone.c 与假弱存根：

```
#include "assert.h"

int  __attribute__((weak))
JNI_CREATEJavaVM(void)
{
  assert(0 == "stub JNI_CREATEJavaVM is not for call");
  return 0;
} 
```

现在一切正常，但是在存根调用上会产生运行时断言

`a.out: fakeone.c:6: JNI_CREATEJavaVM: Assertion `0 == "stub JNI_CREATEJavaVM is not for call"' failed`

但是为什么弱呢？因为考虑有人将它与真正的 JNI_CREATEJavaVM 代码联系起来。例如尝试 goodone.c

```
#include "stdio.h"

int
JNI_CREATEJavaVM(void)
{
  printf("JNI_CREATEJavaVM Ok\n");
  return 0;
} 
```

并编译`gcc undesym.c goodone.c fakeone.c` 现在正确的定义覆盖弱存根，您将得到正确的消息。

当然，你必须尽量避免这种技术，但它帮助了我好几次。

# windows-8 - 如何从 WinRT 应用程序部署 WinRT 应用程序

> ID：14555934
> 
> 赞同：0
> 
> 时间：2013-01-28T05:25:38.293
> 
> 标签：windows-8, windows-runtime

假设它们已经使用有效的旁加载证书进行签名，那么从 WinRT 应用程序中部署 Windows 8 WinRT 应用程序的最用户友好的方式是什么？

Windows Phone 8 有一个很好的 API 用于安装 XAP 包，但我找不到适用于 Windows 8 的任何类似的东西。

我能想到的最好的办法是将各种安装文件下载到，例如，我的文档并要求用户切换到 Windows 资源管理器并运行 powershell 脚本，但这对用户非常不友好。此外，清单中似乎限制了保存 appx 文件，因此需要对它们进行压缩。

appx 文件可以通过 msi 部署吗？这样会更方便用户。我错过了什么吗？

编辑此解决方案需要适用于 x86 和 ARM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:32:19.713

在 Windows 8 中安装包的 API 是[PackageManager](http://msdn.microsoft.com/en-us/library/windows/apps/windows.management.deployment.packagemanager.aspx)。通常，此 API 不适用于 Windows 应用商店应用程序，但如果您有特殊证书或您的执行环境以某种方式进行了调整，也许它可以工作。

# android - android以编程方式模糊imageview drawable

> ID：14555937
> 
> 赞同：11
> 
> 时间：2013-01-28T05:25:48.897
> 
> 标签：android, bitmap, imageview, drawable, blur

我想以编程方式在 Android 中模糊和取消模糊图像。

我听说 API 14 之后不再支持 android 标志“blur”，但我还是想使用 Java 方法。我的主要问题是从 Imageview drawable 操作位图。

我将如何从图像视图中获取位图并对其进行操作（可能会使用高斯模糊）并将其设置回图像视图？我认为该过程涉及提取可绘制对象，将可绘制对象转换为位图，在该位图上执行我的模糊方法，然后执行相反的操作，直到再次将其设置为图像视图

但我想详细说明这个过程，谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T05:50:29.337

以下是实现高斯模糊的代码。希望这可以帮助你

```
import android.graphics.Bitmap;
import android.graphics.Matrix;

/**
 * @author robert.hinds
 *
 * Wrapper class for the Android Bitmap - used by all filters
 *
 */
public class AndroidImage {

    //original bitmap image
    private Bitmap image;

    //format of image (jpg/png)
    private String formatName;

    //dimensions of image
    private int width, height;

    // RGB Array Color
    protected int[] colourArray;

    public AndroidImage(Bitmap img){        
        this.image =  img;
        formatName = "jpg";
        width = img.getWidth();
        height = img.getHeight();
        updateColourArray();
    }

    /**
     * Method to reset the image to a solid colour
     * 
     * @param color - colour to rest the entire image to
     */
    public void clearImage(int color){
        for(int y=0; y<height; y++){
            for(int x=0; x<width; x++){
                image.setPixel(x, y, color);
            }
        }
    }

    /**
     * Set colour array for image - called on initialisation
     * by constructor
     * 
     * @param bitmap
     */
    private void updateColourArray(){
        colourArray = new int[width * height];
        image.getPixels(colourArray, 0, width, 0, 0, width, height);
        int r, g, b;
        for (int y = 0; y < height; y++){
            for (int x = 0; x < width; x++){
                int index = y * width + x;
                r = (colourArray[index] >> 16) & 0xff;
                g = (colourArray[index] >> 8) & 0xff;
                b = colourArray[index] & 0xff;
                colourArray[index] = 0xff000000 | (r << 16) | (g << 8) | b;
            }
        }
    }

    /**
     * Method to set the colour of a specific pixel
     * 
     * @param x
     * @param y
     * @param colour
     */
    public void setPixelColour(int x, int y, int colour){
        colourArray[((y*image.getWidth()+x))] = colour;
        image.setPixel(x, y, colour);
    }

    /**
     * Get the colour for a specified pixel
     * 
     * @param x
     * @param y
     * @return colour
     */
    public int getPixelColour(int x, int y){
        return colourArray[y*width+x];
    }

    /**
     * Set the colour of a specified pixel from an RGB combo
     * 
     * @param x
     * @param y
     * @param c0
     * @param c1
     * @param c2
     */
    public void setPixelColour(int x, int y, int c0, int c1, int c2){
        colourArray[((y*image.getWidth()+x))] = (255 << 24) + (c0 << 16) + (c1 << 8) + c2;
        image.setPixel(x, y, colourArray[((y*image.getWidth()+x))]);
    }

    /**
     * Method to get the RED colour for the specified 
     * pixel 
     * @param x
     * @param y
     * @return colour of R
     */
    public int getRComponent(int x, int y){
        return (getColourArray()[((y*width+x))]& 0x00FF0000) >>> 16;
    }

    /**
     * Method to get the GREEN colour for the specified 
     * pixel 
     * @param x
     * @param y
     * @return colour of G
     */
    public int getGComponent(int x, int y){
        return (getColourArray()[((y*width+x))]& 0x0000FF00) >>> 8;
    }

    /**
     * Method to get the BLUE colour for the specified 
     * pixel 
     * @param x
     * @param y
     * @return colour of B
     */
    public int getBComponent(int x, int y){
        return (getColourArray()[((y*width+x))] & 0x000000FF);
    }

    /**
     * Method to rotate an image by the specified number of degrees
     * 
     * @param rotateDegrees
     */
    public void rotate (int rotateDegrees){
        Matrix mtx = new Matrix();
        mtx.postRotate(rotateDegrees);
        image = Bitmap.createBitmap(image, 0, 0, width, height, mtx, true);
        width = image.getWidth();
        height = image.getHeight();
        updateColourArray();
    }

    /**
     * @return the image
     */
    public Bitmap getImage() {
        return image;
    }

    /**
     * @param image the image to set
     */
    public void setImage(Bitmap image) {
        this.image = image;
    }

    /**
     * @return the formatName
     */
    public String getFormatName() {
        return formatName;
    }

    /**
     * @param formatName the formatName to set
     */
    public void setFormatName(String formatName) {
        this.formatName = formatName;
    }

    /**
     * @return the width
     */
    public int getWidth() {
        return width;
    }

    /**
     * @param width the width to set
     */
    public void setWidth(int width) {
        this.width = width;
    }

    /**
     * @return the height
     */
    public int getHeight() {
        return height;
    }

    /**
     * @param height the height to set
     */
    public void setHeight(int height) {
        this.height = height;
    }

    /**
     * @return the colourArray
     */
    public int[] getColourArray() {
        return colourArray;
    }

    /**
     * @param colourArray the colourArray to set
     */
    public void setColourArray(int[] colourArray) {
        this.colourArray = colourArray;
    }

} 
```

* * *

```
import com.bvise.fotoflipper.core.AndroidImage;

public interface IAndroidFilter {

    public AndroidImage process(AndroidImage imageIn);
}

import android.graphics.Bitmap;
import android.graphics.Color;

public class ConvolutionMatrix
{
    public static final int SIZE = 3;

    public double[][] Matrix;
    public double Factor = 1;
    public double Offset = 1;

    public ConvolutionMatrix(int size) {
        Matrix = new double[size][size];
    }

    public void setAll(double value) {
        for (int x = 0; x < SIZE; ++x) {
            for (int y = 0; y < SIZE; ++y) {
                Matrix[x][y] = value;
            }
        }
    }

    public void applyConfig(double[][] config) {
        for(int x = 0; x < SIZE; ++x) {
            for(int y = 0; y < SIZE; ++y) {
                Matrix[x][y] = config[x][y];
            }
        }
    }

    public static Bitmap computeConvolution3x3(Bitmap src, ConvolutionMatrix matrix) {
        int width = src.getWidth();
        int height = src.getHeight();
        Bitmap result = Bitmap.createBitmap(width, height, src.getConfig());

        int A, R, G, B;
        int sumR, sumG, sumB;
        int[][] pixels = new int[SIZE][SIZE];

        for(int y = 0; y < height - 2; ++y) {
            for(int x = 0; x < width - 2; ++x) {

                // get pixel matrix
                for(int i = 0; i < SIZE; ++i) {
                    for(int j = 0; j < SIZE; ++j) {
                        pixels[i][j] = src.getPixel(x + i, y + j);
                    }
                }

                // get alpha of center pixel
                A = Color.alpha(pixels[1][1]);

                // init color sum
                sumR = sumG = sumB = 0;

                // get sum of RGB on matrix
                for(int i = 0; i < SIZE; ++i) {
                    for(int j = 0; j < SIZE; ++j) {
                        sumR += (Color.red(pixels[i][j]) * matrix.Matrix[i][j]);
                        sumG += (Color.green(pixels[i][j]) * matrix.Matrix[i][j]);
                        sumB += (Color.blue(pixels[i][j]) * matrix.Matrix[i][j]);
                    }
                }

                // get final Red
                R = (int)(sumR / matrix.Factor + matrix.Offset);
                if(R < 0) { R = 0; }
                else if(R > 255) { R = 255; }

                // get final Green
                G = (int)(sumG / matrix.Factor + matrix.Offset);
                if(G < 0) { G = 0; }
                else if(G > 255) { G = 255; }

                // get final Blue
                B = (int)(sumB / matrix.Factor + matrix.Offset);
                if(B < 0) { B = 0; }
                else if(B > 255) { B = 255; }

                // apply new pixel
                result.setPixel(x + 1, y + 1, Color.argb(A, R, G, B));
            }
        }

        // final image
        return result;
    }
} 
```

* * *

```
import android.graphics.Bitmap;

import com.bvise.fotoflipper.core.AndroidImage;
import com.bvise.fotoflipper.core.ConvolutionMatrix;
import com.bvise.fotoflipper.filters.IAndroidFilter;

public class GaussianBlur implements IAndroidFilter{

    @Override
    public AndroidImage process(AndroidImage imageIn) {
        // TODO Auto-generated method stub
        Bitmap src=imageIn.getImage();
        double[][] GaussianBlurConfig = new double[][] {
                { 1, 2, 1 },
                { 2, 4, 2 },
                { 1, 2, 1 }
            };
            ConvolutionMatrix convMatrix = new ConvolutionMatrix(3);
            convMatrix.applyConfig(GaussianBlurConfig);
            convMatrix.Factor = 200;
            convMatrix.Offset = 0;
            return new AndroidImage(ConvolutionMatrix.computeConvolution3x3(src, convMatrix));
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-24T15:47:32.900

为了模糊 imageView 或位图，renderScript 与 Picasso 库一起使用。

```
public class Blur implements Transformation {
    protected static final int UP_LIMIT = 25;
    protected static final int LOW_LIMIT = 1;
    protected final Context context;
    protected final int blurRadius;

    public Blur(Context context, int radius) {
        this.context = context;

        if(radius<LOW_LIMIT){
            this.blurRadius = LOW_LIMIT;
        }else if(radius>UP_LIMIT){
            this.blurRadius = UP_LIMIT;
        }else
            this.blurRadius = radius;
    }

    @Override
    public Bitmap transform(Bitmap source) {
        Bitmap sourceBitmap = source;

        Bitmap blurredBitmap;
        blurredBitmap = Bitmap.createBitmap(sourceBitmap);

        RenderScript renderScript = RenderScript.create(context);

        Allocation input = Allocation.createFromBitmap(renderScript, 
                sourceBitmap, 
                Allocation.MipmapControl.MIPMAP_FULL, 
                Allocation.USAGE_SCRIPT);

        Allocation output = Allocation.createTyped(renderScript, input.getType());

        ScriptIntrinsicBlur script = ScriptIntrinsicBlur.create(renderScript, 
                                    Element.U8_4(renderScript));

        script.setInput(input);
        script.setRadius(blurRadius);

        script.forEach(output);
        output.copyTo(blurredBitmap);

        source.recycle();
        return blurredBitmap;
    }

    @Override
    public String key() {
        return "blurred";
    }
} 
```

添加此类后，使用 Picasso 模糊图像视图或任何位图

```
Picasso.with(context).load("load-from-whatever-source").transform(new Blur(context, 20)).into("wherever"); 
```

[我在这个博客](http://deepakbaliga.com/index.php/2015/05/24/applying-blur-effect-to-image-in-android/)中找到了这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-10T11:06:08.787

您可以使用完全用 Kotlin 编写的[Coil](https://github.com/coil-kt/coil)库，

```
imageView.load("your_source") {
transformations(BlurTransformation(applicationContext,20f))
} 
```

# java - run-Jetty-run Eclipse 插件：只允许环回连接

> ID：14555939
> 
> 赞同：0
> 
> 时间：2013-01-28T05:26:19.287
> 
> 标签：java, eclipse, security, eclipse-plugin, jetty

我已经`Run Jetty Run`为 Eclipse 安装了插件。

按照[入门](http://code.google.com/p/run-jetty-run/wiki/GettingStarted)和[用户指南](http://code.google.com/p/run-jetty-run/wiki/UserGuide)，我能够创建一个新的 Java 项目，创建`web`文件夹，然后`WEB-INF`在其中工作。`WEB-INF`是一个空文件夹并且`web`有`index.html`.

现在我只想**通过环回接口启用连接**。我的猜测是可以通过`WEB-INF\web.xml`文件进行配置，但我找不到任何关于`Run Jetty Run`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:05:39.533

没有简单的方法可以做到这一点！

[在runjettyrun的源代码（runjettyrun.Bootstrap.java）中：](https://code.google.com/p/run-jetty-run/source/browse/Jetty8Support/bootstrap-jetty8/src/runjettyrun/Bootstrap.java#155)

```
private static void initConnnector(Server server, Configs configObj) {
    SelectChannelConnector connector = new SelectChannelConnector();

    //Don't set any host , or the port detection will failed. -_-#
    //connector.setHost("127.0.0.1");
    connector.setPort(configObj.getPort());

    if (configObj.getEnablessl() && configObj.getSslport() != null)
        connector.setConfidentialPort(configObj.getSslport());

    server.addConnector(connector);

    if (configObj.getEnablessl() && configObj.getSslport() != null)
        initSSL(server, configObj.getSslport(), configObj.getKeystore(),
                configObj.getPassword(), configObj.getKeyPassword(),
                configObj.getNeedClientAuth());

} 
```

插件需要检查是否使用了端口。

**插件作者评论了“setHost”代码（也许你可以破解这个）。**

也无法在“连接器”界面中设置主机：

```
org.eclipse.jetty.server.Connector.setHost(String) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T11:58:57.907

我使用额外的 jetty.xml 破解了这个。在这个 jetty.xml 中，我将原始连接器（由插件创建）替换为根据我的需要配置的两个“新”连接器：

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure_9_0.dtd">
<Configure id="Server" class="org.eclipse.jetty.server.Server">
  <Call name="setConnectors">
    <Arg>
      <Array type="org.eclipse.jetty.server.Connector">
        <!-- HTTP Connector -->
        <Item>
          <New class="org.eclipse.jetty.server.ServerConnector">
            <Arg name="server"><Ref id="Server" /></Arg>
            <Set name="host">127.0.0.1</Set>
            <Set name="port">80</Set>
          </New>
        </Item>

        <!-- HTTPS Connector (Optional) -->
        <Item>
          <New class="org.eclipse.jetty.server.ServerConnector">
            <Arg name="server"><Ref id="Server" /></Arg>
            <Arg name="sslContextFactory">
              <New class="org.eclipse.jetty.util.ssl.SslContextFactory">
                <Set name="keyStorePath">C:/jdk1.7.0_51/jre/lib/security/cacerts</Set>
                <Set name="keyStorePassword">changeit</Set>
                <Set name="keyManagerPassword">changeit</Set>
              </New>
            </Arg>
            <Set name="host">127.0.0.1</Set>
            <Set name="port">8444</Set>
          </New>
        </Item>         
      </Array>
    </Arg>
  </Call>
</Configure> 
```

在这种方法中，插件配置屏幕（eclipse 运行配置）中的“端口”、“SSL 端口”、“密钥库”、“密码”和“密钥密码”不会生效，因为这些配置将在附加jetty.xml 文件。

# javascript - javascript:对象实例和原型

> ID：14555941
> 
> 赞同：0
> 
> 时间：2013-01-28T05:26:42.083
> 
> 标签：javascript

protype 是一个对象，其内部原型属性设置为 Object.prototype 并在其中具有构造函数属性。但是当我们这样做时：

```
x=new Object;// 
```

x 现在没有自己的构造函数属性，为什么？因为原型也是函数 Object 的实例，但它们具有构造函数属性。

我的问题是，由于原型也是 Object 函数的实例，而空对象（{}）也是 Object 函数的实例，一个缺少称为构造函数的属性，一个有。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T05:28:51.657

**编辑之前**

> x 现在没有构造函数属性

是的，它确实。它继承自`Object.prototype`.

这段代码：

```
var x = new Object();
console.log("typeof x.constructor = " + typeof x.constructor); 
```

...输出`typeof x.constructor = function`。[实例](http://jsbin.com/udolaf/1)| [资源](http://jsbin.com/udolaf/1/edit)

**编辑后**

> x 现在没有**自己的**构造函数属性

*（我的重点）*

它没有*自己的*名为`constructor`( `x.hasOwnProperty("constructor")`is `false`) 的属性，因为它没有任何理由拥有它，它在原型上。

重要的是要认识到对象与其原型之间的链接是*实时*链接。该对象没有获得原型的*副本*，而是获得了对它的引用。当我们从一个对象中检索一个属性时，如果该对象没有它自己的具有该名称的属性，则对原型的引用会被跟踪以查看*原型*是否具有该属性（依此类推，一直到原型链`Object.prototype`）。这就是原型继承的重点，对象没有原型属性的副本，它们从原型继承。

这是一个*实时*链接的示例：

```
function Foo() {
}
Foo.prototype.answer = 42;

var f = new Foo();
console.log("[before] f.question = " + f.question);
console.log("[before] f.answer = " + f.answer);

// Note that `f.question` is undefined, of course, as we haven't defined it

Foo.prototype.question = "Life, the Universe, and Everything";

console.log("[after] f.question = " + f.question);
console.log("[after] f.answer = " + f.answer);

// Note that `f.question` is defined now, even thoguh `f` was created
// BEFORE we added that to the `Foo.prototype`. 
```

[实例](http://jsbin.com/udolaf/2)| [资源](http://jsbin.com/udolaf/2/edit)

* * *

回复您的评论：

> 我的问题是，由于原型也是 Object 函数的实例，而空对象（{}）也是 Object 函数的实例，一个缺少称为构造函数的属性，一个有。为什么会这样？

因为只有分配给的对象才`Object.prototype`真正被**分配**了`constructor`属性。这是创建函数的一部分（在这种情况下`Object`，但任何函数都是如此）。[请参阅规范第13.2 节](http://www.ecma-international.org/ecma-262/5.1/#sec-13.2)的第 17 步。通过原型链创建的所有其他对象（字面意思或其他方式）通过`new Object`原型链接收属性，但特定对象`Object.prototype`已*直接*分配了该属性。

# svn - SVN: is it possible to get svn info for a given revision number of a branch

> ID：14555944
> 
> 赞同：20
> 
> 时间：2013-01-28T05:27:21.083
> 
> 标签：svn, branch, revision

Is it possible to get svn info for a branch for a specific revision number. For example if the latest working copy of a branch has revision number 56, can I get info for the same branch for revsion number 32.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-28T05:40:06.863

There are two options available to get informatioon about past revisions:

*   `svn log -r <rev number> <url>`: the commit message of a specified revision and url
*   `svn info -r <rev number> <url>`: some technical information about a specified revision and url

An example: `svn log -r 5628 https://repo.exampl.org/prod/branches/info/conf/config`

It is all described in the help messages built into the svn command: `svn help` or `svn help info`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-07T00:34:47.967

Assuming you are in a working copy, you can just do the following:

Get commit info:

```
svn log -c <rev number> 
```

Get commit info with file list:

```
svn log -c <rev number> -v 
```

Get full file diff:

```
svn diff -c <rev number> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T06:23:00.153

yes u can get the information for the what revision u want.

```
svn cat -r <rev number> path upto which file u want see the revisions 
```

ex: svn cat -r 34 svn:///dmlrepo/trunk/1.txt

# javascript - 显示隐藏的 div

> ID：14555946
> 
> 赞同：0
> 
> 时间：2013-01-28T05:27:31.760
> 
> 标签：javascript, anchor, hidden

案例是；

我有2个网页..

第一页 - 主页

主页包含导航（主页、产品）

产品导航有一个下拉选项。

列表是：（Product1，Product2）

这两个选项都使用此代码链接到第二页，

```
 <a href="<?php echo $this->url(array('controller'=>'ProductItem', 
                                            'action'=>'index')); ?>#folio" class="imglink">Folio Plus</a> 
```

结果：效果很好

第 2 页 - 产品

产品下拉菜单仍然出现在第二页上。

Product1 和 Product2 内容是隐藏的，因此每个产品仅在您在产品下拉列表中选择产品时才会出现。

问题：当我在产品页面上并从下拉列表中选择另一个产品时，页面内容不会改变，但 url 地址现在指向我选择的产品..like；

当显示product1然后我想切换到其他产品说product2，url地址现在指向product2但显示的内容仍然是product1..

我用了这段代码。

```
 var anc = window.location.href.split('#')[1];
    $('#' + anc + '.prod_cont').show(); 
```

请问有什么解决方案吗？..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:44:48.007

尝试改为使用`window.location.hash`来读取和修改哈希。它应该更可靠，因为浏览器会为您解析它。

此外，您的选择器选择的是 ID 为 value`anc`和 class的东西`prod_cont`。它会发现的一个例子是：`<div id='someanc' class='prod_cont'/>`. 如果您有多个具有该 id 的 div 标签，您可能会遇到麻烦，因为我相信 jQuery 可能会将其转换为仅返回一个元素的 document.getElementById。我假设您正在寻找的是这样的结构：`<div id='someanc'><div class='prod_cont' style='display: hidden;'></div></div>`或类似的东西。正确的选择器`'#'+anc+' > .prod_cont'`应该是获取所有`prod_cont`具有 id 元素内部的类的子元素`anc`。

# android - 如何在查看页面指示器中调用活动？

> ID：14555955
> 
> 赞同：0
> 
> 时间：2013-01-28T05:29:03.483
> 
> 标签：android

我必须在视图页面指示器内加载三个布局。这三个活动是动态的。它们从 Web 服务加载内容，并且还具有动态加载其内容的网格视图。是否有任何方法可以在视图页面指示器内加载活动。我用过[JakeWhartons](https://github.com/JakeWharton/Android-ViewPagerIndicator)查看页面指示器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:04:05.730

由于您使用的是视图寻呼机，因此您应该使用 Fragments 来满足您的需求

希望[这](http://manishkpr.webheavens.com/android-viewpager-example/)会帮助你

**编辑：**

我遵循的逻辑是`MainActivity extends FragmentActivity`

`FragmentPagerAdapter`然后在主要活动中，我将为`ViewPager`

例如：`ViewPagerAdapter extends FragmentPagerAdapter`

然后正如您所说的每个类别（精选，类别，顶级付费，顶级免费）

我将创建片段。

但我认为您需要对所有类别使用一个片段。AFAIK 我现在无法满足您的需求。但我会想办法解决

但我想问一些你为什么不尝试在你选择的字符串上**切换大小写**

# ssl - 私钥 PEM 标头

> ID：14555957
> 
> 赞同：1
> 
> 时间：2013-01-28T05:29:08.460
> 
> 标签：ssl, openssl, ssl-certificate, private-key

我有一个 DER 格式的私钥。我试图将其转换为 PEM 格式。在转换时我做

```
 -----BEGIN PRIVATE KEY-----

        Base64.encode(privateKey,.getEncoded());

   -----END PRIVATE KEY----- 
```

但在某些示例中，我看到，在标题之后的行下方。

```
 Proc-Type: 4,ENCRYPTED
   DEK-Info: DES-EDE3-CBC,F2D4E6438DBD4EA8 
```

它们有什么意义吗？从 DER 转换为 PEM 时是否也应该添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:16:09.213

就安全性而言，通常将私钥保持不加密被认为是一种不好的做法。

基本上，标题表明私钥 base64 数据是用密码加密的。因此，任何试图读取私钥的程序（例如 Web 服务器）都会知道私钥是受密码保护的，并且它首先需要密码来解密私钥。

如果这些标头不存在，程序会假定 base64 密钥数据是纯文本格式，会直接使用它。

如果您不使用密码来保护 pem 格式的密钥，则 pem 可能如下所示（没有标题）：

> -----开始 RSA 私钥----- MIICWwIBAAKBgQDL9R9pUyXOnHybNhm9FqhNjUX1W2HEt7bCGQIo0FvT6UyyL7TT -----结束 RSA 私钥-----

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:24:34.210

如果您要加密 PEM 文件，这些标头很重要。第一个告诉文件是否被加密，第二个给出加密算法（如您所见）和初始向量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-08T00:28:05.760

这些标头源自原始[PEM 格式](https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail)。PEM 在部署之前被新的安全标准取代，但文件格式和以纯文本传输二进制数据的想法在许多不同的标准中得到了重用。

[OpenSSL 头文件 pem.h](https://github.com/openssl/openssl/blob/master/include/openssl/pem.h)和[RFC7468](https://datatracker.ietf.org/doc/html/rfc7468#section-4)定义了其中的大部分。然而，[OpenSSH](https://www.rfc-editor.org/rfc/rfc4716.html#section-3.2)和[OpenPGP](https://datatracker.ietf.org/doc/html/rfc4880#section-6.2)等新标准也使用这种格式以纯文本形式存储密钥。

您可以查看[此答案](https://stackoverflow.com/a/5356351/1999185)以获取更多信息。

# mysql - nil:NilClass 的未定义方法“each”

> ID：14555958
> 
> 赞同：0
> 
> 时间：2013-01-28T05:29:14.723
> 
> 标签：mysql, ruby-on-rails

提前感谢您提供的任何帮助！

对于我的 Ruby on Rails 网站（1.8.7、2.3.15），我正在尝试从 MySQL 表中提取数据，但遇到了“未定义方法”错误。我使用此代码的目标是显示属于某个纬度和经度范围内的所有位置的文本列表。

**生产日志：**

```
ActionView::TemplateError (undefined method `each' for nil:NilClass) on line #31 of     app/views/its/map.html.erb:
28: <!-- TestingLocations -->
29: 
30: <ul id="locations">
31: <% for masterlocation in @nearbylocations %>
32:     <li><%= masterlocation.nickname %></a></li>
33: <% end %>
34: </ul> 
```

**地图控制器：**

```
def map
@its = Its.find(params[:id])
if @its.user_id == current_user.id
@locations = Location.find(:all, :conditions => ["its_id = ?", params[:id]], :order => "order_num asc")
@mapscount = Saved.count(:all, :conditions => ['its_id = ?', params[:id]])
#@date_filter = Date.civil(params[:date_filter].values_at(:year, :month, :day))
#    debugger
respond_to do |format|
format.html # map.html.erb
format.xml  { render :xml => @its }
end
else
redirect_to '/'

@nearbylocations = Masterlocation.find(:all, :conditions => ["latitude > 25 AND latitude < 30 AND longitude > -75 AND longitude < -70", params[:id]], :order => ['nickname asc'])
end 
```

再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:41:12.133

发生这种情况`@nearbylocations`是`nil`因为它期望`Array`

你可以通过使用来避免这种情况

```
<% for masterlocation in @nearbylocations %>
  <li><%= masterlocation.nickname %></a></li>
<% end if @nearbylocations %> 
```

我还注意到您在重定向后被声明为实例变量。理想情况下

```
redirect_to '/'
@nearbylocations = Masterlocation.find(:all, :conditions => ["latitude > 25 AND latitude < 30 AND longitude > -75 AND longitude < -70", params[:id]], :order => ['nickname asc']) 
```

应该

```
@nearbylocations = Masterlocation.find(:all, :conditions => ["latitude > 25 AND latitude < 30 AND longitude > -75 AND longitude < -70", params[:id]], :order => ['nickname asc'])
redirect_to '/' 
```

但是在重定向之后你不能使用`@nearbylocations`所以你必须使用或者`render`在重定向方法中声明它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:42:13.383

你得到一个零错误导致你的@nearbylocations没有得到评估，因为'if'条件被执行并且Masterlocation查询在'else'中。如果总是需要@nearbylocation，您可以将其移出条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:42:43.367

恶魔在这里

```
:conditions => ["latitude > 25 AND latitude < 30 AND longitude > -75 AND longitude < -70", params[:id]] 
```

这个查询什么也没给出

你有@nearbylocations = nil

然后你收到`undefined method`错误

在：条件做什么`params[:id]`？我猜你忘了删除它或者你忘了添加`?`到查询中`""`

# networking - 如何处理 Rebol 3 方案中的超时时间

> ID：14555961
> 
> 赞同：3
> 
> 时间：2013-01-28T05:29:37.073
> 
> 标签：networking, rebol, rebol3

在 Rebol 3 中启动异步 IO 事件系统的常用方法是在端口上等待。为了检查超时，将方案中的一个值添加到等待块中。

```
wait [port timeout] 
```

但是，小电子邮件消息的默认超时可能不适用于数兆字节的文件。

处理这个问题的最佳方法是什么？如果您仍在接收数据，是否可以在脚本接收数据时更新等待列表，以免不必要地超时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T00:46:28.877

我认为端口超时应该基于数据包计时触发，而不是完整请求。因此，在电子邮件上设置 30 秒的超时时间意味着您在 30 秒内没有收到数据包。

由于数据包往往很小，它们会很快到达，并且长时间不接收将表明网络/服务器故障，您希望获得超时。（例外情况是发生数据包聚合时，但仍然不会有太多聚合，以至于通常会出现长延迟。）

说了这么多，我不确定它们是否在 R3 中实现。根据之前的评论，我猜不是。网络系统是我为 R3 编写的第一批部分之一，它精简而简陋，但肯定需要一些关注。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:52:52.623

看起来这还没有实现。在这篇文章[http://www.rebol.net/wiki/Ports_and_Schemes:_Issues](http://www.rebol.net/wiki/Ports_and_Schemes:_Issues) issue 9: timeouts 中，Carl 说

> 设备模型实现的低级端口已经包含超时功能。它当前未启用，但需要启用。这将满足 CONNECT 或 READ 等操作及其相关超时的第一个要求。此方法不使用通用计时器端口，因为较低级别的端口设备在对此类端​​口进行较高级别的调用时会遇到问题。
> 
> 在更高级别，我们一直计划为此类端口提供 TIMER 方案。应该可以很快提供它，因为基本的计时代码和内核级唤醒机制已经实现（对于 Win32 系统 API）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:15:07.440

一个循环怎么样？如果magic-port-has-data，永远[等待[端口1]？端口 [进程] ]

# c++ - C++中的空字符串包含什么

> ID：14555963
> 
> 赞同：0
> 
> 时间：2013-01-28T05:29:43.900
> 
> 标签：c++

以下代码

```
#include <stdio.h>
int main( int argc, char** argv ) 
{
    const char *s = "";
    if (s == '\0') {
        int x = 0;
    }
    return 0;
} 
```

它不会进入循环。为什么 ？,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T05:32:19.597

您已定义`s`为指向 char 的指针。碰巧，`'\0'`是一个值为 0 的整数常量表达式——空指针常量的定义。

IOW，你正在做相当于`if (s == NULL)`. 由于`s`实际上指向一个字符串文字，它不是一个空指针，所以比较是错误的。

我猜你的意图是`if (*s == '\0') ...`，这应该比较为真。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T05:31:45.520

尝试

```
 if (*s == '\0') {
        int x = 0;
    } 
```

您想比较 s 的值，而不是它的内存地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T05:32:04.123

`s`是一个指针，这个版本比较指针

```
const char *s = null;
if (s == '\0') {
    int x = 0;
}
return 0; 
```

这个版本比较字符串的第一个元素来检测一个空字符串：

```
if (s[0] == '\0') {
   int x = 0;
 } 
```

# image - 根据 wp7 中的定位动态地将图钉绑定到地图

> ID：14555964
> 
> 赞同：1
> 
> 时间：2013-01-28T05:29:47.290
> 
> 标签：image, windows-phone-7, data-binding, pushpin

```
 <DataTemplate x:Key="pushpinSelector">
        <my:Pushpin Location="{Binding Location}" CacheMode="BitmapCache">
            <my:Pushpin.Template>
                <ControlTemplate>
                    <clusterer:PushpinTemplateSelector Content="{Binding}">
                        <clusterer:PushpinTemplateSelector.ClusterTemplate>
                            <DataTemplate>
                                <Grid VerticalAlignment="Center" HorizontalAlignment="Center" CacheMode="BitmapCache">
                                    <Image Source="{Binding ImagePath}" Width="50" Height="50"></Image>
                                    <TextBlock Foreground="Red" Text="{Binding ClusterCount}" HorizontalAlignment="Center" VerticalAlignment="Top"></TextBlock>
                                </Grid>
                            </DataTemplate>
                        </clusterer:PushpinTemplateSelector.ClusterTemplate>                            
                    </clusterer:PushpinTemplateSelector>
                </ControlTemplate>
            </my:Pushpin.Template>
        </my:Pushpin>
    </DataTemplate> 
```

var doc = XDocument.Load("PushpinClusteringExample;component/jugglingclubs.xml");

```
 var pins = doc.Descendants("club")
            // get clubs with coordinates
                      .Where(club => club.Descendants("coordinates").Any())
                      .Select(el => new
                      {
                          lat = double.Parse(el.Descendants("latitude").Single().Value),
                          lon = double.Parse(el.Descendants("longitude").Single().Value),
                          name = el.Descendants("name").Single().Value,
                          country = el.Descendants("country").Single().Value,
                          //address = el.Descendants("address").Single().Value
                      })
            // verify the coordinates are sensible!
                      .Where(coord => coord.lat < 90 && coord.lat > -90 && coord.lon < 90 && coord.lon > -90)
            // create a pushpin for each club
                      .Select(i => new MyGeoObject()
                      {
                          Coordinate = new GeoCoordinate(i.lat, i.lon),
                          Name = i.name,
                          Country = i.country,                              
                          //Address = i.address
                      }).ToList();
        for (int j = 0; j < pins.Count; j++)
        {
            if (pins[j].Country == "United Kingdom")
            {

                List<ImageData> dataSource = new List<ImageData>()
                { 
                    new ImageData(){ImagePath="/MapPin.png"},                    
                };
                //Icon = new BitmapImage(new Uri("/MapPin.png", UriKind.Relative));
                DataContext = this;
            }
            else
            {
                List<ImageData> dataSource = new List<ImageData>() 
                { 
                new ImageData(){ImagePath="/DrawingPin1_Blue.png"},
                };
                //Icon = new BitmapImage(new Uri("/DrawingPin1_Blue.png", UriKind.Relative));
                DataContext = this;
            }                
        }

       var clusterer = new PushpinClusterer<MyGeoObject>(map1, pins, 50);
       pushPinModelsLayer.DataContext = clusterer; 
```

我正在尝试将 ImagePath 绑定到 Image 控件源，但 Image 没有被绑定......我在这里感到震惊......我做错了什么？？？？？？请帮助我走得更远

谢谢

# java - 访问 jsoup 库

> ID：14555966
> 
> 赞同：0
> 
> 时间：2013-01-28T05:29:57.257
> 
> 标签：java, jsoup

我一直在 Android 应用程序中成功使用 jsoup 1.6.3 从网站读取数据。

我最近将 Android SDK 工具升级到 21.0.1 版，将 Android SDK Platform-toolls 升级到 16.0.1 版，现在它不再工作了。当我重建应用程序，将其安装在设备上并运行它时，我收到“抱歉！应用程序 XXXXX 已意外停止”。

我的代码似乎通过以下方式成功导入了库：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements; 
```

但是在我的方法中，我第一次尝试用 jsoup 做任何事情：

```
Document document = Jsoup.connect(SPOT_SERVER_BASE).get(); 
```

我尝试在设备上运行应用程序时收到上述错误消息。logcat 说：

```
could not find method org.jsoup,Jsoup.connect 
```

我知道我的应用程序根本没有与 jsoup 库连接。我还下载了 1.7.1 版，得到了相同的结果。任何想法我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:45:49.883

如果`SPOT_SERVER_BASE`是字符串，则您列出的代码部分是可以的。所以我猜它是一个android问题。请检查这个错误报告，也许它可以帮助你：[http ://code.google.com/p/android/issues/detail?id=27490](http://code.google.com/p/android/issues/detail?id=27490)

# groovy - 可以向 Groovy 类添加另一个（链接）invokeMethod 吗？

> ID：14555967
> 
> 赞同：0
> 
> 时间：2013-01-28T05:30:02.577
> 
> 标签：groovy, griffon

我想通过使用在 Griffon 的控制器中执行 AOP `invokeMethod()`，例如：在所有 Griffon 控制器的特定方法中将开始事务建议添加到“之前”关节点并将事务建议提交到“之后”关节点。

我还没有验证这一点，但我担心框架已经有`invokeMethod()`控制器类。我可以在不影响Groovy 类`invokeMethod()`中先前定义的情况下添加新的吗？`invokeMethod()`怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:40:27.343

Griffon 确实强制执行控制器`invokeMethod`，您可以提供自己的。另一种选择是提供`GriffonControllerActionManager`接口的自定义实现

[http://griffon.codehaus.org/guide/latest/api/griffon/core/controller/GriffonControllerActionManager.html](http://griffon.codehaus.org/guide/latest/api/griffon/core/controller/GriffonControllerActionManager.html)

有关此功能的更多信息，请参阅 Griffon 指南

[http://griffon.codehaus.org/guide/latest/guide/single.html#actionManager](http://griffon.codehaus.org/guide/latest/guide/single.html#actionManager)

[http://griffon.codehaus.org/guide/latest/guide/applicationOverview.html#managerConfiguration](http://griffon.codehaus.org/guide/latest/guide/applicationOverview.html#managerConfiguration)

# c# - 属性设置器是否可以对 MVVM 模式产生副作用

> ID：14555968
> 
> 赞同：0
> 
> 时间：2013-01-28T05:30:09.880
> 
> 标签：c#, wpf, data-binding, mvvm, simple-mvvm

我正在编写旨在解决标准问题的 WPF 应用程序。我对 WPF 和 MVVM 模式真的很陌生，所以在阅读了互联网上大量不同的 MVVM 方法后，我的脑子里有些混乱。我想知道我对 DataGrid 的 itemsource 刷新操作的简单操作对 MVVM 来说是“惯用的”。

假设我有一个数据网格和一个组合框。该组合包含所有教练的列表。数据网格向您显示由选定教练训练的所有运动员，因此该组合就像数据网格中数据的过滤器：

```
<ComboBox ItemsSource="{Binding ListCoach}" DisplayMemberPath="last_name" SelectedValue=
"{Binding SelectedCoach}" SelectedValuePath="Id"/>

<DataGrid ItemsSource="{Binding Path=ListSportsman}" .....  </DataGrid> 
```

**我的 ViewModel 类在 SelectedCoach 属性的设置器**中更改 DataGrid 的内容（此属性是 Combobox 值的目标）：

```
 private int _selectedCoach;
  public int SelectedCoach
  {
     get { return _selectedCoach; }
     set
     {
        _selectedCoach = value;
        ListSportsman = new ObservableCollection<sportsmanset>(_serviceAgent.ListSportsmanOfCoach(value));
        NotifyPropertyChanged(vm => vm.SelectedCoach);
     }
  } 
```

这样的代码没有味道吗？或者订阅 SelectedCoach 属性的更改并在单独的函数中设置 ListSportsman 会更合适？（顺便问一下，如何手动订阅 NotifyPropertyChanged 事件？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-03T18:44:27.300

根据定义，这并没有错，但需要考虑一件事：

一般来说，开发人员希望 setter 和 getter 速度快。因此，如果您要添加需要大量时间的逻辑，您可能希望异步执行该逻辑或用 Set 方法替换属性，以便清楚地知道涉及到处理。

部分处理可能是设置 View 可以绑定的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:33:04.573

No, this code does not 'smell'!

A view-model is very closely associated with the view that it 'backs'. In the view you describe, these two properties are very closely coupled, therefore it would make sense that they are tightly coupled in your view model.

Also, just ask yourself, what benefit would it give to have the logic, that populates the data grid, loosely coupled by event handling? This could allow you to more easily execute this logic as the result of some other event, or perhaps separate into two classes for re-use elsewhere in your code. Are any of these scenarios likely? If not, making your code more complex for no reason is a code smell in itself!

By the way if you do want to handle this manually, you need to add an event handler to the classes `PropertyChanged` event.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-04T11:14:04.103

我的回答是“不，这不好”。好吧，对于简单的应用程序/原型来说很好，但是对于更高级的场景或养成良好的习惯/树立榜样 - 它不是。

该怎么做？没有“一刀切的答案”，但根据我的经验，我建议：

1.  *始终*保持设置者愚蠢，即仅设置值和 NotifyPropertyChanged。
2.  尝试将昂贵的业务逻辑和其他副作用封装在命令中。如果不可能并且必须由 setter 触发，则从 PropertyChanged 创建可观察的 Rx 流并订阅它。听起来可能有点矫枉过正，但 Rx 对 MVVM 的好处是巨大的。这是一种可能的（不一定是最好的）方法：http: [//blog.leifbattermann.de/2015/06/21/viewmodel-property-to-observable-stream/](http://blog.leifbattermann.de/2015/06/21/viewmodel-property-to-observable-stream/)
3.  （离题但不是真的）也*不会*在 setter 中引发简单依赖只读属性的更改，而是使用[https://github.com/StephenCleary/CalculatedProperties](https://github.com/StephenCleary/CalculatedProperties)或类似的（我怀疑目前有什么更好的）

# iphone - 如何使用 PhoneGap 在 iPhone 上捕捉音频？

> ID：14555969
> 
> 赞同：0
> 
> 时间：2013-01-28T05:30:35.820
> 
> 标签：iphone, cordova

我正在尝试学习如何使用 PhoneGap 在 iPhone 上创建应用程序，并且我需要能够使用麦克风捕获音频。

我查看了他们关于如何在[此处](http://docs.phonegap.com/en/2.3.0/cordova_media_capture_capture.md.html#CaptureAudioOptions)找到的捕获音频的文档， 但我似乎无法让它工作。捕获中有完整的代码示例。

我尝试使用的 CaptureAudio 部分，但当我尝试在我的 iPhone 上对其进行测试时，它似乎没有记录任何内容。我需要在他们的示例代码中添加什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:53:25.173

当您使用 Xcode 时，请确保您的 index.html 根目录中有 cordova-2.3.0.js 文件，因为这是您的 html 应该指向它的位置。

如果它在那里，请在其中添加一些警报以确保它被调用。

# php - php exec() 后台进程问题

> ID：14555971
> 
> 赞同：20
> 
> 时间：2013-01-28T05:30:43.437
> 
> 标签：php, exec

我正在尝试使用以下命令在后台处理文件，但它什么也不做。

```
exec("php csv.php $file $user > /dev/null &", $output); 
```

如果我删除`> /dev/null &`然后文件处理，但不在后台。

```
exec("php csv.php $file $user", $output); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-28T05:38:58.190

笔记：

如果使用此函数启动程序，为了使其继续在后台运行，程序的输出必须重定向到文件或另一个输出流。否则将导致 PHP 挂起，直到程序执行结束。

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

所以：

```
exec("php csv.php $file $user > /dev/null &"); // no $output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-30T04:23:35.473

除了[Emery King 的回答](https://stackoverflow.com/a/14556052/3291390)之外，您还必须使用单个`exec()`调用来终止后台进程。起初，我的印象是，如果将进程放在后台，只要我有进程ID，我就可以继续愉快地杀死它，但事实并非如此。

例如：

```
// Runs the background process for 10 seconds
// and then kills it and allows php to continue
exec('sh -c \'echo $$ > pid; exec long_running_process\' > /dev/null 2>&1 & sleep 10 && kill $(cat pid)');

// Runs the background process but does not allow
// php to continue until the background process finishes.
exec('sh -c \'echo $$ > pid; exec long_running_process\' > /dev/null 2>&1 &');
exec(' sleep 10 && kill $(cat pid)'); // <- does not execute until background process is done (at which point pid is already dead) 
```

*   `echo $$ > pid`将 的进程 ID 写入`long_running_process`名为`pid`.

*   `> /dev/null 2>&1 &`将 stdout 和 stderr 重定向到`/dev/null`并放入`long_running_process`后台。

*   `sleep 10 && kill $(cat pid)`在杀死文件中 ID 的进程之前等待 10 秒`pid`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-11T00:29:46.270

你考虑过使用屏幕吗？您可以启动在分离进程中运行的屏幕会话。输出将转到屏幕会话，您可以在它仍在运行时在另一个终端中重新附加到该会话。

```
exec("screen -d -m -S my_php_session csv.php $file $user", $output); 
```

# mysql - 在选择查询中用变量替换字段名称

> ID：14555972
> 
> 赞同：1
> 
> 时间：2013-01-28T05:30:44.523
> 
> 标签：mysql, sql, variables

我想用变量替换字段名称以从 PHP 和 MySQL 中的表中获取数据。

```
select * from demo where variable-1 
```

代替`select * from demo where fieldname=1`

因为有超过 50 个字段名可以从下拉列表中选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:33:34.520

**变量**不会**像`field names`. `table Names`它唯一会做的就是当你创建*动态 sql*时，例如**

 **```
SET @variableName = 'fieldname';
SET @sql = CONCAT('SELECT * FROM demo WHERE `', @variableName, '` = 1');
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [动态 SQL（*准备好的语句*）](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:34:24.200

您可以使用[准备好的语句](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)

```
delimiter // 
CREATE PROCEDURE dynamic(IN tbl CHAR(64), IN col CHAR(64))
BEGIN
    SET @s = CONCAT('SELECT ',col,' FROM ',tbl );
    PREPARE stmt FROM @s;
    EXECUTE stmt;
END
//
delimiter ; 
```**

# java - 在小程序上显示图像

> ID：14555974
> 
> 赞同：0
> 
> 时间：2013-01-28T05:30:56.360
> 
> 标签：java, image, swing, applet, jtree

我`Jtree`用于列出目录的各种图像，我想`applet`在用户单击树中显示的图像名称时显示图像，我使用的代码如下，`ta`是小程序的对象，因为我是在另一个类中使用它。

```
private void displayImage(URL furl, String fname) {

    ta.Picture = ta.getImage(furl, fname);
    prepareImage(ta.Picture, this);
    Graphics g = ta.imageCanvas.getGraphics();
    g.clearRect(10, 10, 800, 800);
    g.drawImage(ta.Picture, 10, 10, this);

} // displayImage

public void valueChanged(TreeSelectionEvent e) 
{
    // TODO Auto-generated method stub
    FileTreeNode node = (FileTreeNode) tree.getLastSelectedPathComponent();
    System.out.println("slecte asldf " + node.isLeaf());
    if (node.isLeaf()) 
    {

        currentFile = node.file;
        System.out.println("File name " + currentFile.getName());
        try 
        {
            URL furl = new URL("file:/F:/photos");
            displayImage(furl, currentFile.getName());
        }
        catch (MalformedURLException mle) 
        {
            System.out.println("Exception::::::" + mle);
        }

    } 
    else
        currentFile = null;

} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:04:59.773

> 但它不起作用。

这一点帮助都没有，你有例外吗？怎么了？请尽快发布[SSCCE](http://sscce.org)以获得更好的帮助

> 当用户单击树中显示的图像名称时，我想在小程序上显示图像，我正在使用的代码如下，ta 是小程序的对象，因为我在另一个类中使用它。

IMO 你使用`JPanel`对象和`Component#getGraphics`.

*   不要将`Component#getGraphics()`其用作不好的做法并且不持久，因此在下次调用`repaint()`屏幕时将被清除。

*   不要将 Applet 与 Swing 组件一起使用，而应使用`JApplet`.

`JPanel`将带有*getter 和 setter*的自定义添加`BufferedImage`到容器中，然后覆盖`paintComponnet`并绘制`BufferedImage`那里。

现在要更改`BufferedImage`简单地调用*设置器*，然后`setBackgroundImage(BufferedImage img)`调用`repaint()`以`JPanel`显示更改。像这样：

```
public class MyPanel extends JPanel {
    private BufferedImage bg;

    public MyPanel(BufferedImage bi) {
        bg=bi;
    }

    @Override
    protected void paintComponent(Graphics g) {
       super.paintComponent(g);

       Graphics2D g2d=(Graphics2D)g;
       g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
       g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));

       g2d.drawImage(bg,0,0,this);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(bg.getWidth(),bg.getHeight());
    }

    public BufferedImage setBackgroundImage(BufferedImage bi) {
        bg=bi;
    }
} 
```

现在我们像这样使用它：

```
MyPanel mp=new MyPanel(...);//create the panel with an image
...
add(mp);//add to container
...
mp.setBackgroundImage(..);//change the image being displayed

mp.repaint();//so the new image may be painted 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T07:08:55.000

当您显示来自本地文件系统的文件时，不需要使用 URL。利用

```
displayImage(currentFile); 
```

并重写该方法如下：

```
private void displayImage(File file) {
    BufferedImage image = ImageIO.read(file);
    ta.image = image;
    ta.repaint();
 } 
```

其中（我假设）组件 ta 的绘制方法必须像

```
BufferedImage image;
public void paint(Graphics g) { 
    g.clearRect(10, 10, 800, 800);
    g.drawImage(ta.Picture, 10, 10, this);
} 
```

由于安全原因，小程序只有在没有安全管理器的情况下签名或运行时才能访问文件系统（通常在同一台计算机上）。

# asp.net - ASP.NET 线程执行

> ID：14555983
> 
> 赞同：0
> 
> 时间：2013-01-28T05:31:50.423
> 
> 标签：asp.net, multithreading

我有一个 ASP.NET 应用程序，它允许用户上传稍后将移动到 AWS S3 的文件。如果文件通过单个请求上传并移动到 S3，一切正常。但问题是用户在上传文件以及将其移动到 S3 时必须等待。所以我所做的是，我首先在上传完成后将文件保存在服务器中，然后生成一个新线程，将文件移动到 S3，这样用户就不必等待那部分了。由于我在共享托管环境中，我认为线程正在中止，没有任何错误的痕迹。从各种网页我可以发现这可能是由于 IIS 完成的 AppPool 回收。

在线程执行完成之前有什么方法可以防止这种情况发生吗？

# c# - 使用其他软件的数据库为偶尔连接的应用程序创建自定义安装程序

> ID：14555984
> 
> 赞同：0
> 
> 时间：2013-01-28T05:31:56.260
> 
> 标签：c#, sql, sql-server-2005-express

我正在尝试创建一个应用程序，它将其数据库与另一个软件的数据库同步..

问题是：

1.  创建安装程序并安装后，数据库将如何与外部数据库同步..即它将如何使用连接字符串。

    我正在寻找一种解决方案，它将提供一个按钮来选择所需的数据库并根据选择自动生成连接字符串。

2.  通过浏览按钮选择数据库后，安装时是否可以在外部数据库上运行 SQL 创建查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:51:58.973

1.  您可以选择创建一个连接设置表单，这将帮助用户构建连接字符串。

2.  是的，这是可能的。它看起来像这样：

    ```
    using (var sqlConnection = new SqlConnection(@"Data Source=myServerAddress;User Id=myUsername;Password=myPassword;"))
    {
        sqlConnection.Open();
        string query = "CREATE DATABASE...";
        using (var sqlCommand = new SqlCommand())
        {
            sqlCommand.Connection = sqlConnection;
            sqlCommand.CommandText = query;
            sqlCommand.ExecuteNonQuery();
        }
    } 
    ```

如果它不起作用，请尝试将 Initial Catalog 设置为 master：

```
@"Data Source=myServerAddress;Initial Catalog=master;User Id=myUsername;Password=myPassword;" 
```

# c# - 将新的 aspx 页面添加到已发布的网站

> ID：14555986
> 
> 赞同：3
> 
> 时间：2013-01-28T05:32:03.467
> 
> 标签：c#, asp.net, publishing-site

我有一个已发布的 .Net 网站。现在我需要向网站添加一个新页面，但我没有源代码，这意味着我无法重新编译和重新发布网站。我知道我可以为此添加一个 HTML 页面，因为新页面的内容只是纯 HTML，但这会在浏览器中显示我不想要的 .html 扩展名。有没有办法添加一个 aspx 页面或 html 页面是我唯一的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T05:43:11.447

或者，您可以添加一个创建应用程序，然后将其添加为原始网站下的应用程序。如在 IIS 中，右键单击原始站点，然后添加应用程序；并将您的新应用程序放入其中。您的新应用程序将拥有自己的应用程序池，并且它本身就是一个应用程序，不需要原始站点的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T06:28:05.797

是的，您可以在不重新编译的情况下添加页面，只需确保页面不引用代码隐藏文件。您仍然可以在实际页面本身中使用代码，以及引用控件（`.ascx`文件）。

# objective-c - 在方法中使用冒号

> ID：14555991
> 
> 赞同：0
> 
> 时间：2013-01-28T05:32:30.433
> 
> 标签：objective-c

> **可能重复：**
> [目标 C 中具有多个参数的方法](https://stackoverflow.com/questions/9056166/methods-with-multiple-arguments-in-objective-c)

我对 Objective-C 很陌生，我通过在线教程学习该语言，在一个特定的教程中，冒号（:) 在方法标题中一个接一个地使用。

这就是我所说的：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

谁能告诉我这个方法的标头代表什么？

这是教程： http: [//www.appcoda.com/how-to-get-current-location-iphone-user/](http://www.appcoda.com/how-to-get-current-location-iphone-user/)

我是一名 C++ 程序员，所以如果你能通过用 C++ 编写相同的代码来向我解释，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:35:41.587

```
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation; 
```

上述方法采用 3 个参数分别为 CLLocationManager、CLLocation、CLLocation 类型的 manager、newLocation、oldLocation。

在 C++ 或 C 中，它会是这样的：

```
void locationManager(CLLocationManager *manager, CLLocation *newLocation, CLLocation *oldLocation); 
```

# c# - 如何摆脱 if-else 语句的混乱？

> ID：14555992
> 
> 赞同：0
> 
> 时间：2013-01-28T05:32:32.337
> 
> 标签：c#

```
if (Functioncall){}     
else if (Functioncall){}

if (Functioncall){}

if (Functioncall){}

if (Functioncall){ 
                 if (Functioncall){                       

                                  if (Functioncall){}

                                  }
                  }
else {} 
```

每个函数调用都返回一个布尔值，并根据返回值执行一组语句。我正在尝试摆脱似乎使代码混乱的 if-else 阶梯。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T05:34:30.350

您可以检查相反的条件并“提前”返回。这样，当您（或其他人）阅读您的代码时，您将拥有更清晰的代码流、更少的缩进和更清晰的逻辑。

看看这些：

*   [https://softwareengineering.stackexchange.com/a/118757/33914](https://softwareengineering.stackexchange.com/a/118757/33914)
*   [https://softwareengineering.stackexchange.com/a/18473/33914](https://softwareengineering.stackexchange.com/a/18473/33914)

在您的情况下，它将类似于：

```
if (!Functioncall)
    return;

if (!OtherFunctioncall)
    return; 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T05:37:24.700

根据您的代码的编写方式，嵌套`if`的 s 可以写成一个大的`if`

```
if(Function1 && Function2 && Function3){

}else{} 
```

如果您的代码是

```
if (Functioncall){ 
    if (Functioncall){
        if (Functioncall){
            // the code
        }
    }
} 
```

那么上面的代码是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T05:37:22.897

你有一些选择：

*   切换案例子句
*   使您的代码更好地模块化。分解成方法（也更容易看到重复的代码）
*   检查对面并立即返回。可能会帮助您处理嵌套 if

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T05:42:23.907

看起来您的函数都返回一个`bool`. 返回是否`true`意味着成功和`false`失败？如果是这样，那么您应该将函数更改为并在它们失败时`void`抛出一个。`Exception`那么调用代码就不需要检查返回值了。

# python - 如何将具有固定列表或数组大小的 defaultdict 或字典作为值

> ID：14555994
> 
> 赞同：1
> 
> 时间：2013-01-28T05:32:36.163
> 
> 标签：python

我试图将 d = defaultdict(array.array) 或 d = defaultdict(list) 用于字典，但我不知道如何将 array.array 或列表中的元素数固定为 N 其中 N 是数组的大小我总是希望 list 或 array.array 成为。如果可能，我希望将列表的所有 N 个元素预初始化为零。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:35:50.853

to 的参数`defaultdict()`是创建默认值的可调用对象，因此只需创建一个创建起始值的函数：

```
N = 8  # change N to whatever you want
def default_list():
    return [0] * N

d = defaultdict(default_list) 
```

或作为 lambda：

```
d = defaultdict(lambda: [0] * N) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T05:33:51.617

您传递`defaultdict`一个返回值的函数，因此只需给它一个返回适当大小的列表或数组的函数。例如：

```
def make_list_of_10_zeroes():
    return [0] * 10

d = defaultdict(make_list_of_10_zeroes) 
```

由于我们在这里使用的函数只有一个语句 a `return`，因此我们可以使用[lambda](http://docs.python.org/3.3/reference/expressions.html#lambda)代替：

```
d = defaultdict(lambda: [0] * 10) 
```

# php - 未指定输入文件

> ID：14555996
> 
> 赞同：44
> 
> 时间：2013-01-28T05:32:50.103
> 
> 标签：php, apache, .htaccess, mod-rewrite, anchor-cms

我正在运行[Anchor CMS](http://anchorcms.com/)，并且刚刚升级到 0.8 版。当我尝试运行安装程序时，出现“未指定输入文件”错误。我相信这很可能是 .htaccess 问题，但我不确定正确的设置应该是什么。

我的网站可以在[这里](http://coleroberts.me/anchor-cms-master/)找到。

我的 .htaccess 设置为：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase {base}

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*)$ {index} [L]
</IfModule>

<IfModule !mod_rewrite.c>
ErrorDocument 404 index.php
</IfModule> 
```

如果有帮助，我还将使用 GoDaddy 作为托管服务提供商。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-01-29T08:05:01.510

*No input file specified*是由于您的服务器上 PHP 的实现而显示的一条消息，在这种情况下表示 CGI 实现（可以用 验证）[`phpinfo()`](http://php.net/phpinfo)。

现在，要正确解释这一点，您需要对系统如何使用 URL 有一些基本的了解。`PATH_INFO`根据您的 .htaccess 文件，您的 CMS 似乎希望 URL 作为变量传递。CGI 和 FastCGI 实现不可`PATH_INFO`用，因此当尝试传递 URI 时，PHP 失败并显示该消息。

我们需要找到替代方案。

一种选择是尝试解决此问题。查看[核心 php.ini 指令](http://php.net/manual/en/ini.core.php#ini.cgi.fix-pathinfo)的文档，您可以看到您可以更改实现的工作方式。虽然，GoDaddy 可能不允许您在共享环境中更改 PHP 设置。

**我们需要找到修改 PHP 设置的替代方法**
查看`system/uri.php`第 40 行，您会看到 CMS 尝试了两种类型的 URI 检测 - 第一种是`PATH_INFO`，我们刚刚了解到它不起作用 - 另一种是`REQUEST_URI`.

这基本上应该足够了——但是解析传递的 URI 会给你带来更多麻烦，因为你可以传递给`REQUEST_URI`变量的 URI 强制[`parse_url()`](http://php.net/parse_url)只返回 URL 路径——这基本上会让你回到零。

现在，实际上只剩下一种可能性——那就是改变 CMS 的核心。URI检测部分不足。

添加`QUERY_STRING`到第 40 行的数组中作为*第一个元素*，`system/uri.php`并将 .htaccess 更改为如下所示：

```
RewriteEngine On 

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 

RewriteRule ^(.*)$ index.php?/$1 [L] 
```

这会将您请求的 URI 传递给`index.php`as`QUERY_STRING`并通过 URI 检测来找到它。

另一方面，这使得在不更改核心文件的情况下更新 CMS 是不可能的，直到这个问题得到修复。真烂……

**需要更好的选择？**
寻找更好的 CMS。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-09-23T16:18:50.830

引用[http://support.statamic.com/kb/hosting-servers/running-on-godaddy](http://support.statamic.com/kb/hosting-servers/running-on-godaddy)：

> 如果您想将 GoDaddy 用作主机，并且发现自己在控制面板中收到“未指定输入文件”错误，则需要`php5.ini`使用以下规则在 weboot 中创建一个文件：
> 
> `cgi.fix_pathinfo = 1`

最好的简单答案只需更改一行即可。

推荐用于 godaddy 托管。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-14T17:40:58.413

就我而言，php.ini open_basedir 变量中有错误。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-27T19:49:16.833

我有同样的问题。我为解决这个问题所做的只是修改我的 htacces 文件，如下所示：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /crm/

Options +FollowSymLinks 

RewriteCond %{HTTP_HOST} ^mywebsite.com [NC] 

RewriteRule ^(.*)$ http://www.mywebsite.com/$1 [L,R=301] 

RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /index.php [L]

RewriteRule ^index.php/(.*)$ [L]
</IfModule> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-07T23:20:32.923

GoDaddy 目前（2013 年 2 月）支持为使用 PHP 5.2.x 或更早版本的某些帐户修改 FastCGI。请参阅 GoDaddy 文章“[在您的主机帐户中禁用 FastCGI](http://support.godaddy.com/help/article/7555/disabling-fastcgi-in-your-hosting-account?pc_split_value=1) ”。
（在我的情况下，这显然对于帮助当前版本的 LimeSurvey (2.0) 进入运行状态是必要的。）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-13T10:09:04.367

添加 php5.ini 根本不起作用。但请参阅GoDaddy 上这篇文章中的“**禁用 FastCGI ”部分：http:** [//support.godaddy.com/help/article/5121/changeing-your-hosting-accounts-file-extensions](http://support.godaddy.com/help/article/5121/changing-your-hosting-accounts-file-extensions)

将这些行添加到 .htaccess 文件（webroot 和网站安装目录）：

```
Options +ExecCGI
addhandler x-httpd-php5-cgi .php 
```

它为我节省了一天！干杯! 感谢[龙王](https://stackoverflow.com/users/841457/dragonlord)！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-12T09:44:38.493

它对我有用..在 .htaccess 文件之上添加。它将禁用 Godaddy 共享主机帐户上的 FastCGI。

**选项 +ExecCGI**

**addhandler x-httpd-php5-cgi .php**

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-21T18:23:24.943

* * *

## 更新

* * *

之前的所有评论都经过我的测试，但没有解决方案。但我没有放弃。

解决方案

**在我的 NGINX 配置中取消注释以下行**

```
 [/etc/nginx/site-avaible/{sitename}.conf] 
```

**站点启用文件夹中应遵循相同的代码**

```
 #fastcgi_param SCRIPT_FILENAME $ document_root $ fastcgi_script_name; 
```

**并发表评论：**

```
 fastcgi_param SCRIPT_FILENAME / www / {namesite} / public_html $ fastcgi_script_name; 
```

**我从原来的改变了几次：**

```
 #fastcgi_pass unix: /var/php-nginx/9882989289032.sock; 
```

**回到这个：**

```
 #fastcgi_pass 127.0.0.1:9007; 
```

**最后我找到了有效的方法......**

```
 fastcgi_pass localhost: 8004; 
```

**我也推荐这些线路...**

```
 #fastcgi_index index.php;
   #include fastcgi_params; 
```

**甚至 FastCGI 超时（仅用于提高性能）**

```
 fastcgi_read_timeout 3000; 
```

***在此过程中，我检查了 NGINX 日志中的所有修改。（这非常重要，因为它显示了错误的参数。）* 在我的情况下是这样的，但这取决于配置：**

```
 error_log/var/log/nginx/{site}_error_log; 
```

**测试 NGINX 配置**

```
 nginx -t 
```

***注意这是选项之一......好吧，在同一台服务器上，这个网站上不起作用的东西适用于其他人......所以请记住，设置取决于平台。***

在这种情况下，它适用于 Joomla CMS。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-01T14:12:29.203

跑`ulimit -n 2048`

并重启 php/php-fpm

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-30T17:53:43.757

禁用 PHP-FPM 解决了我的问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-29T23:18:00.877

我的解决方案是删除我的一个帮助文件中的空白。该错误列出了涉及的两个页面，一个 CI 会话文件和一个我的自定义助手。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-28T23:17:19.030

就我而言，我通过对接[LocationMatch 指令中的规则来修复它](https://httpd.apache.org/docs/2.4/mod/core.html#locationmatch)

```
<LocationMatch "^/.">
    #your rewrite rules here
</LocationMatch> 
```

`/.`匹配*任何*位置

我在`.conf`Apache **NOT`.htaccess`文件的一个文件中有重写规则。**

我不知道为什么这对我有用，这是我目前的设置

*   阿帕奇 2.4 版
*   PHP 7.1
*   操作系统 Centos 7
*   PHP-FPM

# asp.net-mvc-4 - 在 DependencyResolver 中注册 Unity 时出错

> ID：14555998
> 
> 赞同：6
> 
> 时间：2013-01-28T05:33:02.607
> 
> 标签：asp.net-mvc-4, unity-container

错误：

**Unity.WebApi.UnityDependencyResolver 类型似乎没有实现 Microsoft.Practices.ServiceLocation.IServiceLocator。**

我看到了这个问题**[WebApi.UnityDependencyResolver does not implement Microsoft.Practices.ServiceLocation.IServiceLocator。参数：commonServiceLocator](http://goo.gl/4lEH2)**，但我的错误在这一行：

```
DependencyResolver.SetResolver(new UnityDependencyResolver(container)); 
```

完整的课程：

```
public static class Bootstrapper
{
    public static void Initialise()
    {
        var container = BuildUnityContainer();
        DependencyResolver.SetResolver(new UnityDependencyResolver(container)); // <-- error
        GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container);
    }

    private static IUnityContainer BuildUnityContainer()
    {
        var container = new UnityContainer();

        container.RegisterType<IAutenticacionDbContext, AutenticacionDbContext>();

        return container;
    }
} 
```

**注意**：有了这个我得到同样的错误：

```
 var container = BuildUnityContainer();
    GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container);
    DependencyResolver.SetResolver(new UnityDependencyResolver(container)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T06:04:16.273

ASP.Net MVC 和 Web.API 使用**两种不同的依赖解析器基础结构**。

您的问题是您尝试将`Unity.WebApi.UnityDependencyResolver`也用于 MVC 控制器。要正确设置统一，请遵循以下说明：

为了使 Unity 与 MVC 控制器一起工作，这些控制器源自`Controller`

*   安装[Unity.Mvc3](http://nuget.org/packages/Unity.Mvc3/) nuget 包
*   使用以下方法设置dependecy reolver `DependencyResolver.SetResolver`：

    ```
    DependencyResolver.SetResolver(
        new Unity.Mvc3.UnityDependencyResolver(container)); 
    ```

为了使 Unity 与 Web.API 控制器一起工作，这些控制器派生形式`ApiController`

*   安装[Unity.WebAPi](http://nuget.org/packages/Unity.WebAPI/) nuget 包
*   使用 using 设置依赖解析器`GlobalConfiguration.Configuration`：

    ```
    GlobalConfiguration.Configuration.DependencyResolver = 
        new Unity.WebApi.UnityDependencyResolver(container); 
    ```