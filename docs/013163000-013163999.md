# StackOverflow 问答 13163000-13163999

# php - Magento，只是无法选择自定义属性

> ID：13163005
> 
> 赞同：0
> 
> 时间：2012-10-31T16:55:32.160
> 
> 标签：php, magento

您好我正在尝试在我的脚本中选择一个自定义属性。

这是我的代码

```
$collection = Mage::getModel('catalog/product')->getCollection()

->addAttributeToSelect('jan')

->addAttributeToSelect('name')

->addAttributeToSelect('upc')

->addAttributeToSelect('ean')

->addAttributeToSelect('price')

->addAttributeToSelect('cost_price')

->addAttributeToSelect('subtitle')

->addAttributeToSelect('url_key')

->addAttributeToSelect('brand')

->addAttributeToFilter('sku', array('eq' => '30000387')); 
```

然后我做一个 foreach 循环以通过 $collection 作为 $item

我可以使用 $item->getData('insert atttribute code here') 提取所有这些值

除了 cost_price 无论我做什么，我似乎都无法拉动我尝试过的 cost_price

```
$item->getData('cost_price')
$item->getCostPrice() 
```

我曾尝试重新索引和删除缓存以防万一，但无济于事。该值肯定是填写在我选择的产品中。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T07:00:40.063

如果您总是希望加载 cost_price 属性（无需每次都必须在产品上调用 load），那么让它始终通过以下任一方式加载可能是一个更好的解决方案：

*   转到后端，目录->管理属性->选择您的属性，然后为“在前端的产品视图页面上可见”和“在产品列表中使用”选择“是”
*   在目录 config.xml 中添加 eav 属性：

    ```
    <product>
        <collection>
            <attributes>
                <name/>
                <url_key/>
                <price/>
                <special_price/>
                .....
                <cost_price/>
            </attributes>
        </collection>
    </product> 
    ```

（不要编辑核心文件，创建自己的模块）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:34:56.317

尝试这个

```
 <?php echo $_product->getResource()->getAttribute('cost_price')->getFrontend()->getValue($_product); ?> 
```

# android - 检测多个水平滚动视图上的垂直滑动

> ID：13163008
> 
> 赞同：1
> 
> 时间：2012-10-31T16:55:41.080
> 
> 标签：android

我有 4 个垂直堆叠的水平滚动视图，它们占据了整个屏幕。我希望能够检测到屏幕上任意位置的垂直向下滑动，并在发生这种情况时执行特定功能。我在具有 onTouchListener 的屏幕上放置了一个空布局，我通过计算开始 Y 位置和结束 Y 位置来检测向下滑动，如果它是一定距离，我调用该函数。

问题在于视图如何使用触摸事件。我似乎只能检测到垂直滑动事件，或者我可以滚动水平滚动视图，但我找不到允许我检测两者的解决方案（即，如果我向下滑动，请注册，否则，让水平滚动视图向左移动/正确的）。

我应该注意，水平滚动视图是自定义的，并且它们自己包含自己的 ontouchlisteners，但这并不重要，因为问题是将触摸事件从空布局传递到滚动视图，只要运动不是向下滑动. （请注意，我不想在 ACTION_UP 上进行计算；如果用户在屏幕上向下移动时手指向下，即使他们没有抬起手指，也应该调用该动作）

这是我用来检测空布局上的触摸的提取代码（就像现在一样，它没有检测到向下滑动......但滚动视图移动。如果我将最后一个返回语句更改为 true，我可以检测到向下滑动，但滚动视图不会向左/向右移动。我认为必须有某种方式允许两者？）谢谢你的帮助！：

```
 touchArea.setOnTouchListener(new OnTouchListener()
     {
        float startY;
        float startX;

        public boolean onTouch(View v, MotionEvent event)
        {

            Log.d(TAG, "in onTouch");

            switch (event.getAction()) 
            {
                case MotionEvent.ACTION_DOWN:
                    startX = event.getX();
                    startY = event.getY();

                    Log.d(TAG, "action down");
                    Log.d(TAG, "start x is: " + startX + " startY is: " + startY);

                case MotionEvent.ACTION_MOVE:

                    Log.d(TAG, "action move");

                    if(event.getY() - startY > MIN_SWIPE_DISTANCE)
                    {
                        Log.d(TAG, "swipe down");

                        //EXECUTE FUNCTION HERE

                        return true;

                    }
                    else
                    {
                        return false;
                    }

                case MotionEvent.ACTION_UP:

                    Log.d(TAG, "ACTION UP");

                    break;

                case MotionEvent.ACTION_CANCEL:

                    Log.d(TAG, "ACTION CANCEL");
                    break;

                default:

                    Log.d(TAG, "unknown touch event");
                    break;

            }

            return false;
        }

    }); 
```

# redis - Jedis 资源实例、Web 应用程序块耗尽

> ID：13163010
> 
> 赞同：3
> 
> 时间：2012-10-31T16:55:46.007
> 
> 标签：redis, connection-pooling, deadlock, blocking, jedis

我正在运行一个使用 Jedis 访问 Redis 数据库的 Tomcat 应用程序。不时形成整个应用程序块。通过使用 JavaMelody 监控 Tomcat，我发现当对象请求 Jedis 实例时，问题似乎与 JedisPool 有关。

```
catalina-exec-74
java.lang.Object.wait(Native&nbsp;Method)
java.lang.Object.wait(Object.java:503)
org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1104)
redis.clients.util.Pool.getResource(Pool.java:20)
.... 
```

这是我正在使用的 JedisPoolConfig

```
JedisPoolConfig poolConfig = new JedisPoolConfig();
poolConfig.setMaxActive(20);
poolConfig.setTestOnBorrow(true);
poolConfig.setTestOnReturn(true);
poolConfig.setMaxIdle(5);
poolConfig.setMinIdle(5);
poolConfig.setTestWhileIdle(true);
poolConfig.setNumTestsPerEvictionRun(10);
poolConfig.setTimeBetweenEvictionRunsMillis(10000);
jedisPool = new JedisPool(poolConfig, "localhost"); 
```

所以很明显，一些线程试图获取 Jedis 实例，但池是空的，无法返回实例，因此默认池行为是等待。

我已经仔细检查了我的整个代码，我很确定我将每个 Jedis 实例返回到我之前使用的池中。所以我不确定为什么我的实例用完了。

有没有办法检查池中剩下多少实例？我正在尝试为 maxActive 参数找到一个合理的值，以防止应用程序阻塞。

除了不将 Jedis 实例返回到池中之外，还有其他方法可以创建内存漏洞吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:48:36.913

> Returning the resource to the Pool is important, so remember to do it. Otherwise when closing your app it'll wait for the resource to return.
> 
> [https://groups.google.com/forum/?fromgroups=#!topic/jedis_redis/UeOhezUd1tQ](https://groups.google.com/forum/?fromgroups=#!topic/jedis_redis/UeOhezUd1tQ)

After each Jedis method call, return the resource pool. Your app has probably used all the threads and waits for some to be dropped. This may cause behavior you're explaining and the app is probably blocked.

```
Jedis jedis = JedisFactory.jedisPool.getResource();
try{
    jedis.set("key","val");
}finally{
    JedisFactory.jedisPool.returnResource(jedis);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-16T15:58:19.413

部分答案希望对处于类似情况的人有所帮助，但我不确定我的问题是否与您的问题相同（如果您已经弄清楚了，请告诉我们！）。

> 我已经仔细检查了我的整个代码，我很确定我将每个 Jedis 实例返回到我之前使用的池中。所以我不确定为什么我的实例用完了。

我以为我必须 - 我总是把我的代码放在 try / finally 块中，但事实证明我确实有内存泄漏：

```
Jedis jedis = DBHelper.pool.getResource();
    try {
        // Next line causes the leak
        Jedis jedis = DBHelper.pool.getResource();
        ...
    } finally {
        DBHelper.pool.returnResource(jedis);
    } 
```

不知道第二个电话是如何潜入的，但它确实导致了泄漏和网络应用程序的阻塞。

> 有没有办法检查池中剩下多少实例？我正在尝试为 maxActive 参数找到一个合理的值，以防止应用程序阻塞。

就我而言，我都发现了这个 bug，并根据 redis 服务器看到的客户端数量进行了优化。我设置了 loglevel (in `redis.conf`to `verbose`(default is `notice`)，它将每 5-10 秒报告一次连接的客户端数量。一旦我发现内存泄漏，我反复向调用该方法的页面发送请求，并**观察 redis 客户端redis 报告的日志会爬升，但从未下降。**我认为这将是优化的良好开端？

无论如何，希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-27T12:30:12.773

使用 jedis pool 时，每次使用 获取资源时`getResource()`，都必须调用`releaseResource()`. 如果线程数多于资源，就会出现线程争用。我发现使用 Java ThreadLocal 为每个线程建立 Jedis 连接要简单得多。因此，对于每个线程检查 jedis 连接是否已经存在。如果是，请使用它，否则为正在运行的线程创建一个连接。这确保不会有任何锁争用或错误情况需要处理。

# javascript - 动态创建元素后的jQuery选择器

> ID：13163020
> 
> 赞同：1
> 
> 时间：2012-10-31T16:56:15.247
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 选择器获取动态创建的元素，但它返回一个空数组。

我要做的第一件事是抓取一个空的 div：

```
var packDiv = document.getElementById('templates');
packDiv.innerHTML = ""; 
```

然后在循环中添加项目：

```
packDiv.innerHTML = packDiv.innerHTML + "<img id='" + thumbName + "' src='thumbs/" + thumbName + "'/>"; 
```

循环完成后，我尝试使用以下方法选择一个项目：

```
console.log($("#"+thumbName)); 
```

它返回空数组。我搜索的所有东西都显示使用`.on`，但所有示例都显示设置事件处理程序。

我的问题是如何为动态创建的元素格式化选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:50:26.550

假设`thumbName`是一个文件名，例如`foo.jpg`，它不会像您期望的那样被 jQuery 解析。`.jpg`名称的一部分被视为类名，并且由于您没有为该元素提供此类名称，因此 jQuery 返回一个空数组 - 它找不到与您的选择器匹配的任何内容。您实际上是在搜索具有 id`foo`和 class name的元素`jpg`。

我会采取的方式是这样的：

```
var packDiv = $('#templates');
packDiv.empty();

//inside a loop
packDiv.append("<img class='" + thumbName.replace(/\./g,'') + "' src='thumbs/" + thumbName + "'/>");

console.log($("."+thumbName.replace(/\./g,''))); 
```

# jsp - JSP - 获取服务器 MAC

> ID：13163022
> 
> 赞同：0
> 
> 时间：2012-10-31T16:56:30.033
> 
> 标签：jsp

寻找一种在 JSP 中获取服务器 MAC 地址的方法。

我需要能够抓住这个，将应用程序许可到 MAC 地址级别。有没有可行的方法来做到这一点？

**编辑**

如果我要通过 Java 来做，有什么办法可以将输出传递给 JSP？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:10:58.867

使用：

[http://mkyong.com/java/how-to-get-mac-address-in-java](http://mkyong.com/java/how-to-get-mac-address-in-java)

这可以工作并输出 MAC，除非您安装了 virtualbox 之类的东西，并且它倾向于获取 IP 169.x 和 MAC 地址。

现在获取 JSP 的 MAC ..

# python - 用 nltk 解析的最有效方法

> ID：13163027
> 
> 赞同：1
> 
> 时间：2012-10-31T16:57:13.913
> 
> 标签：python, nlp, nltk

用 nltk 解析最有效的方法是什么？我的词汇量很大，用 RecursiveDescentParser 解析需要花很多时间。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:49:52.007

来自[NLTK 文档（解析）](http://nltk.org/api/nltk.parse.html)：

> parser 模块定义了 ParserI，一个用于解析文本的标准接口；以及该接口的两个简单实现，ShiftReduceParser 和 RecursiveDescentParser。它还包含三个用于特殊类型解析的子模块： ***nltk.parser.chart***定义图表解析，它使用动态编程来有效地解析文本。

您可以尝试图表解析子模块。希望它会更快。:)

希望这可以帮助！

# vb.net - 从没有输出参数的存储过程中获取返回值

> ID：13163028
> 
> 赞同：0
> 
> 时间：2012-10-31T16:57:14.813
> 
> 标签：vb.net, sql-server-2008, stored-procedures

我有一个 vb.net 应用程序，它使用应该返回值的存储过程将记录插入到 db 表中。这个存储过程是由其他人设置的，最初链接到一个 Web 服务，我的应用程序通过该 Web 服务进行插入并在返回的 xml 中获取返回值。我现在可以访问 db 表，但不确定如何在我的 vb.net 方法中接收返回值。

SQL 存储过程片段；

```
 @urlname varchar(500),
@siteid varchar(16),
@origin varchar(50),
@queryid varchar(25)
  AS
SET NOCOUNT ON;
declare @cnt int
declare @serverip varchar(16)
declare @mincnt int
declare @siteservercnt int
select @cnt=COUNT(*) from sites
      where urlname=@urlname
if @cnt = 0
    begin
    insert into sites (urlname,siteid,exported,origin,queryid)
    values(@urlname,@siteid,1,@origin,@queryid)
    select @siteservercnt = COUNT(*) from siteserverip where siteid=@siteid
    if @siteservercnt=0
       begin
            select top 1 @mincnt=COUNT(*),@serverip=serverip from siteserverip
        group by serverip
        order by COUNT(*)
        select top 1 @mincnt=sitecount,
                         @serverip=serverip from serveripcounts
        order by sitecount
        insert into siteserverip values(@siteid,@serverip)
        update serveripcounts set sitecount=sitecount+1
        where serverip=@serverip
        end
    end
SELECT siteid from sites
where urlname=@urlname
return 
```

和我的 vb.net 代码进行插入

```
 CommandObj.CommandText = "Getsite"
        CommandObj.CommandTimeout = 90

        Dim newUrl As String = String.Empty

        CommandObj.Parameters.Clear()

        Dim m_param As SqlParameter

        m_param = CommandObj.Parameters.Add("@urlname", SqlDbType.VarChar, 500)
        m_param.Direction = ParameterDirection.Input
        m_param.Value = name

        m_param = CommandObj.Parameters.Add("@siteid", SqlDbType.VarChar, 16)
        m_param.Direction = ParameterDirection.Input
        m_param.Value = siteid

        m_param = CommandObj.Parameters.Add("@origin", SqlDbType.VarChar, 50)
        m_param.Direction = ParameterDirection.Input
        m_param.Value = method

        m_param = CommandObj.Parameters.Add("@queryId", SqlDbType.VarChar, 25)
        m_param.Direction = ParameterDirection.Input
        m_param.Value = forumID

        Dim recordsAffected As Integer = CommandObj.ExecuteNonQuery 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:00:45.977

您可以使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)来获取该值。[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)返回受影响的行数，而您想要获取最后一次选择生成的值。您也可以使用[ExecuteReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader.aspx)，但当您的 SP 可能返回更多列和/或更多行时，这很有用。

```
'Populate first column and first row value in siteID
Dim siteID As Integer = CommandObj.ExecuteScalar 
```

# jsf - 从支持 bean 获取 JSF 2 自定义组件的动态参数

> ID：13163033
> 
> 赞同：0
> 
> 时间：2012-10-31T16:57:35.977
> 
> 标签：jsf, dynamic, parameters, components, el

我正在使用（简单）JSF 2 自定义组件。

我的意思是我正在使用 taglib.xml 文件，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib id="sentest"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0"
>
    <namespace>http://www.senat.fr/taglib/sentest</namespace>

[...]
    <tag>
        <description>
            <![CDATA[
            À COMPLÉTER
            ]]>
        </description>
        <tag-name>senMandats</tag-name>
    <source>tags/sen/senMandats.xhtml</source>
        <attribute>
            <description>
                <![CDATA[
        Identifiant unique.
        ]]>
            </description>
            <name>id</name>
            <required>true</required>
            <type>java.lang.String</type>
        </attribute>
        <attribute>
            <description>
                <![CDATA[
     Contexte de sélection du Sénateur.
    ]]>
            </description>
            <name>context</name>
            <required>true</required>
        </attribute>
    </tag>
</facelet-taglib> 
```

该组件是使用 ui 组合定义的：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="fr"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:p="http://primefaces.org/ui"
    xmlns:sen="http://java.sun.com/jsf/composite/sen"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:sf="http://www.senat.fr/taglib/senfunctions"
    xmlns:st="http://www.senat.fr/taglib/sentest"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions">
    <h:head/>
    <h:body>
        <ui:composition>
    [...]
        </ui:composition>
    </h:body>
</html> 
```

它工作正常，*除了*一个非常尴尬的点。

我将动态 el 值传递给那些自定义组件。

例子 ：

```
<st:senMandats id="toto" context="#{selectionContext}"/> 
```

selectionContext bean 在别处定义。

在 st:senMandats 中，我以嵌套的方式使用其他自定义组件。就像是 ：

```
<st:listeMandats mandatContext="#{sensContext}" asen="#{selectionContext.selectedSen}"/> 
```

listeMandat 组件使用 primefaces 数据表来显示上下文中的一些列表。所以，我有这样的代码：

```
<h:outputLabel value="listeMandats de #{asen.libelleLong}" styleClass="bigTitleMandats" rendered="#{not empty asen}" />
<p:dataTable id="tableMandatsSenatoriaux" value="#{mandatContext.asList}" /* lots of other parameters */> 
```

当我在选择器中选择一个条目时，自定义组件会正确更新。我可以看到 h:outputLabel 的 valueDisplayed 已根据选择正确更新。

当 #{mandatContext.AsList} 被调用时，我正在从应用程序上下文中检索 #{asen} 并在返回请求的列表之前执行一些内部更新。问题来了：如果在渲染 #{asen.libelleLong} 时 #{asen} 似乎没问题，我无法从支持 bean 获取更新的值。

我正在使用以下功能：

```
@SuppressWarnings("unchecked")
public static <T> T findBean(String name) {
    if ((name == null) || name.isEmpty())
        return null;
    FacesContext fc = FacesContext.getCurrentInstance();
    logger.debug("Retrieving #{" + name + "}");
    return (T) fc.getApplication().evaluateExpressionGet(fc,
            "#{" + name + "}", Object.class);
} 
```

在 AsList 方法中：

```
JSFUtils.findBean("#{asen}") 
```

总是返回一个旧的，未更新的值。

我应该怎么做才能让我的 bean 可以访问更新的值？[我尝试了 mykong 在http://www.mkyong.com/jsf2/access-a-managed-bean-from-event-listener-jsf/](http://www.mkyong.com/jsf2/access-a-managed-bean-from-event-listener-jsf/)中提出的解决方案 4、5 和 6，但仍然没有得到正确的值。

我是否被迫编写从特定类派生的自定义组件类？如果是这样，我是否也被迫编写渲染器？我想避免这种情况，因为我很欣赏将布局放在 xhtml 文件中。

提前致谢。

我在用 ：

*   PrimeFaces 3.4.1
*   CODI 1.0.5
*   OpenWebBeans 1.1.6
*   我的脸 2.1.9
*   Tomcat 7.0.32（编辑：将“额外问题”设置为另一个问题）

# git - 如何在 GIT 中提取另一个存储库并更新到它的头部？

> ID：13163035
> 
> 赞同：0
> 
> 时间：2012-10-31T16:57:38.943
> 
> 标签：git

以下是关于 Mercurial 问题的描述：

鉴于：

*   两个回购**A**和**B**，其中**B**是**A的一个分支**
*   当前目录是**A**的提示的工作目录。

需要：

*   拉入**B**并更新到其最新的头**REV**。

这就是我想要在 Mercurial 方面做的事情：

```
A> hg pull B
A> hg heads         # Notice the most recent head of B
A> hg update **REV** 
```

我怎样才能在 GIT 中做到这一点？更具体地说：

*   **A**是[https://github.com/yui/yui3-gallery.git的master分支](https://github.com/yui/yui3-gallery.git)
*   **B**是[https://github.com/jafl/yui3-gallery.git的master分支](https://github.com/jafl/yui3-gallery.git)
*   当我有**A的本地克隆时，我需要更新到****B**的最新版本

 **我知道这应该是微不足道的，但我仍然无法弄清楚。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:01:19.733

```
git remote add a_repo a_repo_url
git fetch a_repo
git merge a_repo/branch 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:59:09.190

```
git remote add other_repo
git fetch
git merge other_repo/branch 
```**

# c++ - 有没有办法使用管理员帐户以编程方式更改 Windows Server 密码而忽略本地密码策略？

> ID：13163039
> 
> 赞同：1
> 
> 时间：2012-10-31T16:57:57.207
> 
> 标签：c++, .net, winapi, server-administration

我有管理员帐户并想更改本地 Windows Server 2008 计算机上特定用户的密码。是否有可能以编程方式更改密码而忽略本地密码策略（复杂性、历史记录、最短密码年龄）？

我试过 NetUserChnagePassword 但它不允许忽略密码策略。

# sikuli - 我是新手，正在尝试与 Sikuli 合作。可以使用 Eclipse 与 Sikuli 进行编码吗？

> ID：13163043
> 
> 赞同：2
> 
> 时间：2012-10-31T16:58:12.937
> 
> 标签：sikuli

sikuli可以和Eclipse集成写代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:45:09.203

如果我**将 sikuli eclipse**输入谷歌，第一个结果是[这个页面：http:](http://doc.sikuli.org/faq/040-other-ide.html) //doc.sikuli.org/faq/040-other-ide.html，它解释了如何在 Eclipse 中使用 Sikuli。我自己使用了这个指南，发现让它工作没有问题。

# c++ - cvRetrieveFrame 崩溃

> ID：13163045
> 
> 赞同：1
> 
> 时间：2012-10-31T16:58:19.093
> 
> 标签：c++, opencv

我正在尝试编写一个简单的 openCV 代码来创建捕获并从中检索第一帧。

```
**CvCapture *m_pCapfile = cvCreateFileCapture(m_aviFileName.c_str());
if (m_pCapfile)
     m_frames = cvRound(cvGetCaptureProperty(m_pCapfile, CV_CAP_PROP_FRAME_COUNT));
cvSetCaptureProperty(m_pCapfile, CV_CAP_PROP_POS_FRAMES, 0);
int ret = cvGrabFrame( m_pCapfile);
IplImage *cap = cvRetrieveFrame( m_pCapfile);** 
```

在 m_frames 中有 153，据我所知，这是正确的帧数。cvGrabFrame 返回 1 到 ret 但是**cvRetrieveFrame**崩溃。

我尝试使用**cvCaptureFromFile**和**cvCaptureFromAVI**而不是**cvCreateFileCapture** 在这两种情况下**cvRetrieveFrame**方法都会崩溃。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:29:08.337

`**CvCapture *m_pCapfile = cvCreateFileCapture(m_aviFileName.c_str());` 这不应该是 CvCapture 吗？

像下面这样

```
CvCapture *m_pCapfile = cvCreateFileCapture(m_aviFileName.c_str()); 
```

我认为您需要将代码更改为我建议的内容。另外，如果这是您的完整代码，请确保在检索帧的循环期间，您没有调用 cvReleaseCapture()。只有当您捕获了所有帧或您想要的指定帧数时，才会在最后调用此方法。

# sql - PostgreSQL - 仅当列中出现特定的多个外观时才选择

> ID：13163057
> 
> 赞同：4
> 
> 时间：2012-10-31T16:59:11.563
> 
> 标签：sql, database, postgresql, select

我正在使用 PostgreSQL。我有一张桌子，上面有 3 个字段的人、食谱和成分

```
person = creator of the recipe
recipe = the recipe
ingredient = one of the ingredients in the recipe 
```

我想创建一个查询，结果是每个在食谱中添加胡萝卜的人，该人也必须在同一个食谱中添加盐。

可以由不止一个人创建配方，在这种情况下，添加该成分的人将被记入添加该成分的功劳。有时该成分会被多次使用，即使是同一个人。

如果是这个表：

```
person1, rec1, carrot
person1, rec1, salt
person1, rec1, salt
person1, rec2, salt
person1, rec2, pepper
person2, rec1, carrot
person2, rec1, salt
person2, rec2, carrot
person2, rec2, pepper
person3, rec1, sugar
person3, rec1, carrot 
```

然后我想要这个结果：person1

因为这个人是唯一一个什么时候加胡萝卜也加盐的人。

“只有胡萝卜会影响结果。我只想要那些在他们的食谱中添加了至少一根胡萝卜的人，但我不想要那些没有在他们添加的所有相同食谱中添加盐的人胡萝卜。对不起，但我无法比这更清楚地解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:33:37.890

这个怎么样：

```
 SELECT DISTINCT person
     FROM tableName
    WHERE ingredient IN('carrot', 'salt')
 GROUP BY person, recipe
   HAVING SUM(CASE WHEN ingredient = 'carrot' THEN 1 ELSE -1 END) <= 0 
          AND
          COUNT(DISTINCT ingredient) > 1; 
```

我承认我没有太多使用 PostgreSql 的经验，但查询似乎给出了你在这个[**SQL Fiddle**](http://sqlfiddle.com/#!1/e9855/3)中需要的结果（感谢@JohnWoo 提供了一个开始的结果）。

我已经更新了答案；在它只返回用户`salts`的一些食谱作为合法食谱之前。第二个`HAVING`子句过滤掉这种情况。

更新：上一个查询返回了所有拥有*至少一个*遵循规则的配方的所有者（“为每个添加的胡萝卜添加盐”）。但是您（似乎）实际上需要遵循规则的*所有食谱。*所以查询看起来像......

```
SELECT DISTINCT person 
  FROM tableName
 WHERE person NOT IN (   
     SELECT person
       FROM tableName
      WHERE ingredient IN('carrot', 'salt')
   GROUP BY person, recipe
     HAVING SUM(CASE WHEN ingredient = 'carrot' THEN 1 ELSE -1 END) > 0
 ); 
```

[**SQL Fiddle**](http://sqlfiddle.com/#!1/e9855/8)玩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:27:08.630

这似乎是关系划分问题的一种变体。

双嵌套`NOT EXISTS`解决方案：

```
SELECT DISTINCT person
FROM tableName AS t
WHERE NOT EXISTS
      ( SELECT *
        FROM tableName AS chosen
        WHERE chosen.ingredient = 'carrot'
          AND chosen.person = t.person
          AND NOT EXISTS
              ( SELECT *
                FROM tableName AS required
                WHERE required.ingredient = 'salt'
                  AND required.recipe = chosen.recipe
                  AND required.person = chosen.person
              ) 
      ) ; 
```

还有一个`JOIN`：

```
SELECT DISTINCT 
    t.person
FROM 
        tableName AS t
    LEFT JOIN
            tableName AS chosen
        LEFT JOIN
            tableName AS required
          ON  required.ingredient = 'salt'
          AND required.recipe = chosen.recipe
          AND required.person = chosen.person
      ON  chosen.ingredient = 'carrot'
      AND chosen.person = t.person
      AND required.ingredient IS NULL
WHERE
    chosen.ingredient IS NULL ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:25:07.000

尝试：

```
SELECT person from
(SELECT person, recipe, COUNT(DISTINCT ingredient) ingredients
 FROM tableName
 WHERE ingredient IN ('salt', 'carrot')
 GROUP BY person, recipe
 HAVING MAX(CASE WHEN ingredient = 'carrot' THEN 1 END) = 1) p
group by person
HAVING MIN(ingredients) = 2 
```

# doctrine-orm - 与学说 dql 连接的子查询

> ID：13163059
> 
> 赞同：4
> 
> 时间：2012-10-31T16:59:17.850
> 
> 标签：doctrine-orm, subquery, inner-join, dql

我想使用 DQL 在 SQL 中创建一个如下所示的查询：

```
select
    e.*
from
    e
inner join (
    select
        uuid, max(locale) as locale
    from
        e
    where
        locale = 'nl_NL' or
        locale = 'nl'
    group by
        uuid
) as e_ on e.uuid = e_.uuid and e.locale = e_.locale 
```

我尝试使用 QueryBuilder 来生成查询和子查询。我认为他们自己做了正确的事情，但我不能在 join 语句中将它们结合起来。如果 DQL 可以做到这一点，现在有人吗？我不能使用本机 SQL，因为我想返回真实对象并且我不知道该查询是针对哪个对象运行的（我只知道具有 uuid 和 locale 属性的基类）。

```
 $subQueryBuilder = $this->_em->createQueryBuilder();
    $subQueryBuilder
        ->addSelect('e.uuid, max(e.locale) as locale')
        ->from($this->_entityName, 'e')
        ->where($subQueryBuilder->expr()->in('e.locale', $localeCriteria))
        ->groupBy('e.uuid');

    $queryBuilder = $this->_em->createQueryBuilder();
    $queryBuilder
        ->addSelect('e')
        ->from($this->_entityName, 'e')
        ->join('('.$subQueryBuilder.') as', 'e_')
        ->where('e.uuid = e_.uuid')
        ->andWhere('e.locale = e_.locale'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:17:32.507

您不能在`FROM`DQL 的子句中放置子查询。

`{uuid, locale}`在 IRC 上与您讨论时，我会假设您的 PK 是。由于您的查询中还有两个不同的列，这可能会变得很难看。您可以做的是将其放入`WHERE`子句中：

```
select
    e
from
    MyEntity e
WHERE
    e.uuid IN (
        select
            e2.uuid
        from
            MyEntity e2
        where
            e2.locale IN (:selectedLocales)
        group by
            e2.uuid
    )
    AND e.locale IN (
        select
            max(e3.locale) as locale
        from
            MyEntity e3
        where
            e3.locale IN (:selectedLocales)
        group by
            e3.uuid
    ) 
```

请注意，我使用了与绑定到`:selectedLocales`. 如果您想与其他语言环境匹配，这是为了避免破坏查询缓存。

如果这样做没有真正的优势，我也不建议使用查询构建器构建它，因为如果您动态添加条件，它只会更容易破坏查询缓存（另外，它涉及 3 个查询构建器！）

# c# - 向 Form1 添加控件时，Form(?) 会短暂出现在 Form1 之外

> ID：13163061
> 
> 赞同：0
> 
> 时间：2012-10-31T16:59:20.713
> 
> 标签：c#, .net, winforms

我有一个程序可以创建新`Control`的 s （实际上是 - `Form`s with `TopLevel = false`）并将它们放在 a `Panel`which is on 上`Form1`。

出于某种原因，这之后通常会出现*看起来*`Form`非常短暂的. 很难确切地说出发生了什么，因为它太简短了。也许它正在移动（并改变它的大小）然后返回。或者也许是出现在那里的那个（虽然这怎么可能发生？它已经超出了！）。*`Form1``Form1``Form``Form1``Form1`*

 *我在代码中找不到任何可能导致它的内容，并且整个代码太长，无法在此处发布。（相关代码很简单：`MyPanel.Controls.Add(newForm);`。）

是否有任何已知的错误可能导致此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:06:57.067

我可以猜到代码是什么样子的。使用 TopLevel = false 将 Form 添加到 Controls 集合的问题是您必须显式使其可见。这是一个奇怪的怪癖（又名错误），通常当您将控件添加到 Controls 集合时，它会自动变为可见。

所以它可能看起来像这样：

```
var newform = new Form1();
newform.Visible = true;    // or newform.Show()
newform.TopLevel = false;
MyPanel.Controls.Add(newForm); 
```

是的，如果您执行其他导致消息发送的操作，它可以使其在很短的时间内可见，仍然作为顶级窗口。通过交换 Visible 和 TopLevel 属性分配来修复它。

如果这没有帮助，请发布代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:30:43.287

因此，您尝试将 Form 添加到 Form 的 Controls 集合中并收到异常，告诉您无法添加顶级控件。要“修复”它，您将该表单的 TopLevel 属性设置为 false。

这不是正确的解决方法。

请改用面板（[或其派生产品之一](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx#inheritanceContinued)）。*

# ruby-on-rails - Ruby on Rails：提交按下时的警报按钮

> ID：13163064
> 
> 赞同：2
> 
> 时间：2012-10-31T16:59:30.703
> 
> 标签：ruby-on-rails, ruby, view, popup

我有一个功能，用户可以通过输入注册的电子邮件并单击按钮来重置自己的密码。然后会向该地址发送一封电子邮件。

```
<div class ="title">Reset your password</div>

<%= form_for(resource, :as => resource_name, :url => password_path(resource_name), :html => { :method => :post }) do |f| %>
  <%= devise_error_messages! %>
<div class="signup">
  <div class = "field">Email: 
  <%= f.email_field :email, :class => "email" %></div>

</br>

  <div><%= f.submit "Send me reset password instructions", :class => "button", :confirm => "An email to reset your password has been sent" %></div>
</div>

<% end %> 
```

我希望在他们点击提交按钮后显示一个弹出框。我现在有一个确认弹出窗口，但我只是想要一个警报弹出窗口，用户只能选择单击“确定”。这可以做到吗？

我是 Rails 新手，所以在尝试提供帮助时请记住这一点。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-30T12:20:07.530

你可以使用：

```
 <%= f.submit "Send me reset password instructions", data: { confirm: 'Are you sure?' } %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T17:06:16.103

这种功能没有内置在 Rails 中，但您始终可以使用 JavaScript：

```
f.submit "Send me reset password instructions", :class => "button", :onclick => "alert('Input collected!')" 
```

我首选的解决方案是向按钮添加一个 data-alert-message 属性，并通过 javascript 在 DOM 加载上不显眼地附加 onclick 事件，但我不会解释这一点，因为它与 Rails 无关。

# ssis - 平面文件错误处理

> ID：13163068
> 
> 赞同：0
> 
> 时间：2012-10-31T16:59:37.440
> 
> 标签：ssis, etl

我正在研究将集成服务作为 ETL 解决方案。我的应用程序将读取一些位置平面文件并将它们导入数据库，但这是一个众所周知的事实，有时文件带有坏字符，我需要在一些日志中显示这些坏字符在文件中的位置（哪一行和哪个位置行中）。

这可以用 SSIS 完成吗？

# c++ - 带有 Qt 的 C++ 应用程序中的 IImebra 代码给出了 malloc：*** 对象 xxxxxx 的错误：未分配被释放的指针

> ID：13163070
> 
> 赞同：2
> 
> 时间：2012-10-31T16:59:50.253
> 
> 标签：c++, qt, malloc, jpeg, dicom

我正在尝试使用 Qt Creator 作为开发环境将 dicom`.dcm`文件转换为`.jpeg`在 C++ 应用程序中使用 Imebra。

我已经下载了 Imebra，并且能够成功运行 Qt 项目示例以进行 Dicom2Jpeg 转换。但是当我尝试将相同的代码复制到我的 C++ 应用程序时，它无法运行并出现以下错误消息：

```
malloc: *** error for object xxxxxx: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

我已按照 Imebra 网站上显示的将 Imebra 文件添加到我的项目的步骤进行操作。还以他们的 qt 项目为例。我`main.cpp`打开的 dicom 文件，然后将其加载到数据集，然后调用我的对话窗口。它在加载数据集时崩溃。

```
#include "QApplication.h"
#include "QHBoxLayout.h"
#include "mydialog.h"
#include "iostream.h"

include "library/imebra/include/imebra.h"
int main( int argc, char ** argv ){

    using namespace puntoexe;
    ptr<stream> readStream(new stream);
    readStream->openFile("/pathToDcmFile/test.dcm",std::ios_base::in);

    ptr<streamReader> reader(new streamReader(readStream));

    ptr<imebra::codecs::codecFactory> 
    cFactory(imebra::codecs::codecFactory::getCodecFactory());
    ptr<imebra::dataSet> tdataSet;
    tdataSet=cFactory->load(reader,2048);

    Q_INIT_RESOURCE(images);

    QApplication a( argc, argv );

    MyDialog md;
    md.show();

    return a.exec(); 
```

}

更深入的调试表明，在检查 JpegSignature 以查看其格式是否错误时，错误的根源在于`JpegCodec.cpp`文件`readStream()`函数，从而导致内部 PUNTOEXE 错误“检测到错误的格式”。

有趣的是，在使用给定的 dicom2jpeg 示例（具有完全相同的打开文件和加载它的代码）运行相同的测试 dcm 文件时，没有错误并成功转换为 jpeg。所以我知道这不是文件问题，而是 imebra 代码集成到我的 C++ 应用程序中的方式。

我的开发环境：带有 Lion OS、Qt Creator、Qt 项目、C++ 代码、添加了 ITK 库的 macbook pro、Imebra 文件完全集成为 Qt 项目的一部分。

所以，我的问题是如何在 Qt 项目中工作/链接/引用/调用 Imebra 功能？我是否忘记链接某些东西，或者某些对象没有按时实例​​化/删除？

任何想法都受到高度赞赏，

埃武什卡

解决方案：正如建议的那样，我已将编解码器工厂更改为 dicm 工厂并解决了问题。我的新代码如下。

```
imebra::codecs::dicomCodec* pTmp = new imebra::codecs::dicomCodec();

ptr<stream> readStream(new stream);
readStream->openFile(argv[0],std::ios_base::in);

ptr<streamReader> reader(new streamReader(readStream));

ptr<imebra::dataSet> tdataSet;
tdataSet=pTmp->read(reader,2048);

delete pTmp; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:46:08.537

抛出错误“检测到错误的格式”是因为库会根据所有文件格式检查文件，并且由于您正在读取 Dicom 文件，因此 Jpeg 代码会引发异常，但这应该由编解码器工厂恢复。您可能是此错误的受害者： [https](https://bitbucket.org/puntoexe/imebra/issue/89/) ://bitbucket.org/puntoexe/imebra/issue/89/ ，它阻止 Dicom 编解码器在启动时静态注册，导致工厂编解码器完全跳过 Dicom 编解码器。该错误报告还包含一个解决方法。

# javascript - 让 selenium 将密钥发送到谷歌的登录框（在 python 中编码）

> ID：13163074
> 
> 赞同：1
> 
> 时间：2012-10-31T17:00:11.577
> 
> 标签：javascript, python, selenium

我在向谷歌登录框中的用户名和密码字段发送密钥时遇到问题。Selenium 使用 id 的“Email”和“Passwd”找到 webelements，但我无法向它们发送任何密钥。

这是没有产生预期结果的代码：

```
from selenium               import webdriver
#from selenium.webdriver.common.keys import Keys
import time

username = "test"
password = "ninja"

driver = webdriver.Firefox()
driver.get(u'http://www.google.com')

driver.implicitly_wait(10)

elem = driver.find_element_by_id("gb_70")
elem.click()

username = driver.find_element_by_id('Email')
username.send_keys(username) 
```

此代码生成错误：

> Traceback（最近一次调用最后）：文件“SERPkopi.py”，第 18 行，在 username.send_keys(username) 文件“/Users/Sverdrup/virtualenv-1.6.1/Alert/lib/python2.7/site-packages/ selenium/webdriver/remote/webelement.py”，第 142 行，在 send_keys local_file = LocalFileDetector.is_local_file(*value) 文件“/xxxxx/xxxxxx/virtualenv-1.6.1/Alert/lib/python2.7/site-packages/ selenium/webdriver/remote/webelement.py"，第 253 行，在 is_local_file 中 for i in range(len(val)): TypeError: 'WebElement' 类型的对象没有 len()

这很奇怪，因为相同的代码可以写入谷歌的“q”（查询）字段

我试图通过 id、name、xpath 来识别 webElement 无济于事。

原因的背景：

我今天睁大眼睛看谷歌警报，想在我公司的客户姓名上设置警报（这是企业对企业的设置，所以客户本身就是公司）。客户相对较小，我不认为我会收到很多关于他们名字的警报，但能够跟踪他们会很棒。

看到没有用于 google 警报的 API，我想我会使用 selenium 以编程方式输入数百个客户名称。不过，我首先必须能够登录我的帐户...

我真的很感激所有和任何帮助。

真挚地

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T18:42:33.680

所以这可能是一个苦乐参半的答案，但你的脚本基本上没问题。这是问题所在：

```
username = "test"

#....

username = driver.find_element_by_id('Email')
username.send_keys(username) 
```

您将用户名设置得很好，但随后您继续将其重新定义为`Email`元素，然后由于最后一行导致错误 - 您将`username`元素作为字符串（这是 的参数）发送回自身`send_keys`，导致类似盗梦空间的混乱事件。`len`错误是因为 Selenium 试图将参数的长度设为，`send_keys`它希望是一个字符串，但在这种情况下是一个元素。为了修复它，只需更改变量名称之一。例如

```
user_field = driver.find_element_by_id('Email')
user_field.send_keys(username) 
```

# xaml - 运行后显示进度并刷新gridview

> ID：13163077
> 
> 赞同：0
> 
> 时间：2012-10-31T17:00:18.647
> 
> 标签：xaml, gridview, windows-runtime, winrt-xaml

我有一个操作扫描选定目录中的文件夹，获取所有文件，解析它们并添加到 SQLite db。正如你可以猜到的，当目录有很多文件时需要一段时间。第一个用户点击按钮打开文件夹选择器，从 MessageDialog 接受消息后执行操作。

在同一站点上有 GridView 与 DB 中的元素。

现在我想：1）使用 ProgressRing 显示进度 2）在扫描目录后用新数据（旧数据 + 新数据）重新加载 GridView

我试过简单地隐藏 GridView，显示 ProgressRing 并再次打开 GridView，但是当应用程序扫描所有内容时，它看起来像是被冻结或其他东西。

我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:20:50.353

确保在后台线程上运行数据库操作。

# css - 粘滞页脚在 Safari 上不起作用

> ID：13163080
> 
> 赞同：6
> 
> 时间：2012-10-31T17:00:34.980
> 
> 标签：css, wordpress, safari, sticky-footer

我正在开发一个 WordPress 网站，但遇到了一个问题。我实现的粘性页脚在除 Safari 之外的所有浏览器中都非常有效。我认为这是某种填充问题，因为在页脚中添加额外的填充可以纠正 Safari 中的问题，但这会导致页脚在其他浏览器中更高，这看起来很奇怪。

我一直在努力让粘性页脚正确，我以为我已经弄清楚了，但显然我没有。我确定这是一个简单的解决方法，但我无法解决。

任何帮助将不胜感激。这是网站：[gandyprinters.com/wordpress](http://gandyprinters.com/wordpress)。

谢谢，丽贝卡

- -编辑 - -

不知何故，我设法纠正了这个问题。我不知道它到底在什么时候纠正了自己，但它已经纠正了。

感谢所有提供意见的人！我非常感谢您花时间回复和提供帮助。

# assembly - 汇编器是如何工作的/它是如何编写的？

> ID：13163081
> 
> 赞同：6
> 
> 时间：2012-10-31T17:00:36.857
> 
> 标签：assembly, theory

在我的一堂课中，我们从头开始学习计算机体系结构和编程。这意味着我们从 pMOS/nMOS 电路开始，然后转到逻辑门，然后使用逻辑门制作寄存器和组合逻辑单元，然后分析了一个小型微处理器架构（LC-3，在我的课堂上）。

我们做的下一件事是用汇编语言编写程序，这让我有点困惑。

举个例子： `ADD R0, R1, R2`它应该添加寄存器 1 和 2 的内容并将其存储在寄存器 0 中。作为机器字（在我们在课堂上学习的架构中），这条指令将是`0001 000 001 000 010`，我在某种程度上理解该二进制字如何然后将其转换为电压信号，该信号在处理器中的各种多路复用器和控制单元中设置适当的值。

我的问题是，汇编程序如何`ADD R0, R1, R2`转换为？`0001 000 001 000 010`对于以我的理解水平的人来说，这个过程似乎类似于编译更高级别的语言。但是这里不可能没有编译器，因为没有比汇编更基本的语言来编写编译器了！

换句话说，如果程序本身不能用汇编语言编写，如何编写程序来汇编汇编代码。它是由某个天才直接用二进制编写的，然后硬编码到处理器的程序内存中吗？我很难想象一种编写汇编程序的实用方法，而不是可以由微处理器直接执行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T17:06:01.987

很久以前，在遥远的星系中，最早的汇编程序是直接用机器代码编写的。但是，一旦有了汇编器，就可以用它来汇编新的汇编器，也可以用它来汇编编译器。

一旦有了编译器，就可以用它来编译新的汇编器。

所以在实践中，汇编程序现在是用更高级的语言编写的。通常是 C 或 C++。至于它们是如何工作的，一个非常非常简单的汇编器本质上只是一个大的 switch 语句；识别操作码，将其转换为相应的机器编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T17:32:45.220

我实际上正在做这个确切的问题：在没有汇编程序的情况下组装汇编程序。我这样做的方式是使用 Excel 电子表格。电子表格中包含用于查找操作码等并计算二进制输出的公式。在过去，他们做同样的事情，只是他们使用纸质电子表格而不是基于计算机的电子表格。这是我的手动汇编程序的截图，突出显示的区域是机器代码：

![手动汇编器截图](../Images/235b1904a6e23012f893ece722632a51.png)

右边的区域是汇编代码。左边的区域是中间计算。这是一个特写：

![手动组装机特写](../Images/379272dcf17a850e090c24679a4d3afb.png)

**所以，这个问题的简短回答是：在过去他们使用纸质电子表格进行手动组装。如今，要进行手动组装，我们使用计算机电子表格（我使用 Excel）。**

在我的电子表格中，标有“编码”的列是实际的二进制代码（机器代码）。组装说明在右侧以及他们正在做什么的描述。

# javascript - css span:hover 在 IE 中不起作用，但在 Firefox 中起作用

> ID：13163082
> 
> 赞同：0
> 
> 时间：2012-10-31T17:00:39.150
> 
> 标签：javascript, css, html

这是我的jsp页面的基本结构。

```
<div><span><span>   </span</span></div> 
```

最里面的 span 标签的内容默认是隐藏的。当我将鼠标悬停在外部跨度标记的内容上时，它应该显示最内部跨度标记的内容。当我在 IE8 中运行它时，它成功隐藏了内部跨度标记，但是当我将鼠标悬停在外部跨度标记上时，它不显示内部跨度内容。

但是，当我在 Firefox 中运行相同的东西时，它就像一个魅力。我该怎么做才能让它在 IE8 中工作？

这是我使用生成的 html 链接创建的 jsfiddle[链接](http://jsfiddle.net/7s4Np/5/)

注意：如果我将外部跨度更改为 link(a) 标记，它可以在 IE 中使用。但我必须使用 span 标签。

jsp页面

```
<div id="tooltip1">
<span id="<%=i %>" class="content" 
                   onmouseover="this.style.color='#F50A16';showStopsInfoPopup('<%=stop %>', <%=i %>)" 
                   onmouseout="this.style.color='#050505'" 
                   onClick="search(this)" value=<%=stop %>>
    <%=stop %>
    <span id="stopsInfo<%=i%>">Hi</span>
</span>
</div> 
```

css

```
#tooltip1 { position: relative; }
#tooltip1 span span { display: none; color: #FFFFFF; }    
#tooltip1 span:HOVER span {display: block; 
               position: absolute; 
               background-color: #aaa; 
               color: #FFFFFF; 
               padding: 5px; 
               height: 10px} 
```

javascript

```
function showStopsInfoPopup(stop, index){
    jQuery(function($) {
        $("#stopsInfo"+index).load("showStopsInfoPopup.do?stop="+stop);
    }); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:07:43.140

我想这可以使用 jQuery 以更简单的方式完成，如下所示：

```
$(".content").on("mouseover", function(){
    $(this).find("span").show();
});

$(".content").on("mouseout", function(){
    $(this).find("span").hide();
}); 
```

HTML：

```
<div>
   <span class="content">
   <span id="stopsInfo<%=i%>">Hi</span>
   </span>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:09:59.267

:hover 在旧版浏览器中不起作用，除了 a 标签。如果必须使用 span 标签，则需要同时添加 span 和 a. 这是大多数菜单的工作方式。

在你的情况下：

```
<div><a><span>default text <span>(hover text)</span></span></a></div> 
```

和CSS：

```
a {text-decoration:none;}
a span span {display:none;}
a:hover span {display:inline;} 
```

在这里演示：http: [//jsfiddle.net/cV4qp/](http://jsfiddle.net/cV4qp/)

另一种选择是使用 JavaScript 而不是 css。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:07:08.350

因为 CSS3 和之前支持的伪选择器仅适用于标签。这就是为什么标签也在 IE 上工作的原因。为了支持这一点，您应该为 IE 浏览器附加 mouseover 和 mouseout 事件，您可以使用 hack 和 jquery 轻松完成。

只需对 JS 和 css 添加简单的更改就可以了。

JS 和 hack 仅适用于 IE

```
$(document).ready( function () { 
      $("#tooltip1 span.content").hover(
             function () { 
                      $(this).toggleClass("hover"); 
             }); 
```

});

CSS

```
#tooltip1 { position: relative; }
#tooltip1 span span { display: none; color: #FFFFFF; }    
#tooltip1 span:HOVER span { display: block; 
                            position: absolute; 
                            background-color: #aaa; 
                            color: #FFFFFF; 
                            padding: 5px; 
    height: 10px}
.hover
{
    color:red;
}

.hover span 
{
    display:inline;
    color: blue !important;
}
​ 
```

[http://jsfiddle.net/7s4Np/7/](http://jsfiddle.net/7s4Np/7/)

# encoding - Oracle 10g column width (byte size) for UTF-8 character set / encoding

> ID：13163083
> 
> 赞同：1
> 
> 时间：2012-10-31T17:00:40.110
> 
> 标签：encoding, utf-8, character-encoding, oracle10g

I'm still a bit of a stranger when it comes to character set and encoding, so I apologize in advance for any of my misconception.

I'm using Oracle 10g as a DBMS for my web application. My database is configured to UTF-8.

Database information:

```
SQL> SELECT * FROM NLS_DATABASE_PARAMETERS

PARAMETER                      VALUE
------------------------------ --------------------------------
NLS_LANGUAGE                   AMERICAN
NLS_TERRITORY                  AMERICA
NLS_CURRENCY                   $
NLS_ISO_CURRENCY               AMERICA
NLS_NUMERIC_CHARACTERS         .,
NLS_CHARACTERSET               UTF8
NLS_CALENDAR                   GREGORIAN
NLS_DATE_FORMAT                DD-MON-RR
NLS_DATE_LANGUAGE              AMERICAN
NLS_SORT                       BINARY
NLS_TIME_FORMAT                HH.MI.SSXFF AM
NLS_TIMESTAMP_FORMAT           DD-MON-RR HH.MI.SSXFF AM
NLS_TIME_TZ_FORMAT             HH.MI.SSXFF AM TZR
NLS_TIMESTAMP_TZ_FORMAT        DD-MON-RR HH.MI.SSXFF AM TZR
NLS_DUAL_CURRENCY              $
NLS_COMP                       BINARY
NLS_LENGTH_SEMANTICS           BYTE
NLS_NCHAR_CONV_EXCP            FALSE
NLS_NCHAR_CHARACTERSET         UTF8
NLS_RDBMS_VERSION              10.2.0.3.0 
```

I have a database table that contains a column with a width limit of **1500**.

Table details:

```
COLUMN_NAME                    DATATYPE
------------------------------ --------------------------------
TEST_COLUMN                    VARCHAR2(1500 BYTE) 
```

Initially, being the noobie I am, I thought that the **1500** limit, which was set to the column, was a unit of number of **CHARACTER**, but found out later that it actually is the unit of number of **BYTE**.

What I am aiming at is to limit the number of character's to **1500**, thus setting `VARCHAR2(1500)` would only apply to single-byte encoding.

So because I am using UTF-8, which uses multi-byte encoding, I was wondering what would be the correct value to set on my column width which would limit it to **1500** multi-byte character?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T20:14:53.630

When you create the column you need to specify character length semantics, like this:

```
test_column varchar2(1500 char) 
```

You can set a default through [NLS_LENGTH_SEMANTICS](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams150.htm#CHDFHDJI). It's possible that your scripts may have worked correctly in a different environment because of the server or session parameters. But it is probably better to explicitly set each column.

# php - 使搜索结果可链接？

> ID：13163088
> 
> 赞同：0
> 
> 时间：2012-10-31T17:00:45.193
> 
> 标签：php, search, hyperlink

我制作了这个定位用户的小搜索脚本，并试图使搜索结果可点击。我正在尝试将 url 指向个人资料 ID，但运气不佳。基本上每个配置文件的 id 为 1,2,3,4 等，我需要找到一种方法使搜索结果在单击时与配置文件 id 相对应。有人可以帮忙吗？

```
<form method="get" action="">
<input type="text" name="query" class="search" placeholder="Search Name/Location" style="width:120px;"/>
<input type="image" src="../PTB1/assets/img/icons/loginarrow1.png" class="searchbutton" name="submit" value="Start Search" />
</form>

<?php
//PHP CODE STARTS HERE

if(isset($_GET['submit'])){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root";
$db_password="";
$db_name="database";
$db_tb_name="ptb_profiles";
$db_tb_atr_name="display_name";

//Now we are going to write a script that will do search task
// leave the below fields as it is except while loop, which will display results on screen

mysql_connect("$db_host","$db_username","$db_password");
mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT * FROM `$db_tb_name` 
        WHERE display_name like '%".$query."%' 
        OR location LIKE '%".$query."%' OR orientation LIKE '%".$query."%'");
echo "<div class=\"results\">";
while($data_fetch=mysql_fetch_array($query_for_result))
{
    echo "<div class=\"spacing\"><a href=\"profile.php?id={$profile['user_id']}\">";
    echo substr($data_fetch[$db_tb_atr_name], 0,160);
    echo "</a></div>";

}

mysql_close();
}

?> 
```

我试图使用这个功能，但它只是列出了所有用户，基本上不是我想要的。

```
function get_searched_users() {
            global $connection;
            $query = "SELECT *
                        FROM ptb_users, ptb_profiles
                        WHERE ptb_users.account_type = \"user\"
                        AND ptb_users.account_status = \"Active\"
                        AND ptb_profiles.user_id = ptb_users.id
                        AND display_name like '%".$query."%' 
        OR location LIKE '%".$query."%' OR age LIKE '%".$query."%'";
            $search_set = mysql_query($query, $connection);
            confirm_query($search_set);
            return $search_set;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:08:37.727

尝试这个：

```
while ($data_fetch=mysql_fetch_array($query_for_result))
{
    echo "<div class=\"spacing\">";
    echo "<a href=\"profile.php?id={$data_fetch['user_id']}\">";
    echo substr($data_fetch[$db_tb_atr_name], 0,160);
    echo "</a></div>";
} 
```

实际上，您需要使用该`$data_fetch`变量并且您正在使用该变量`$profile`。

# video - FFmpeg将图像序列转换为视频导致空白视频

> ID：13163106
> 
> 赞同：5
> 
> 时间：2012-10-31T17:01:46.793
> 
> 标签：video, ffmpeg

我有一系列 361 .png 文件，我正在尝试将其转换为视频，无论出于何种原因，生成的视频都是黑色的。这是我正在使用的 FFmpeg 代码：

```
ffmpeg -f image2 -i "FeatureTour_%05d.png" -r 30 -vcodec libx264 -b:v 9600k "FeatureTour.mp4" 
```

文件格式正确 ( `FeatureTour_00001.png`) 并且没有引发错误。它只会产生一个 160kb 的黑色 mp4 文件。

知道我做错了什么吗？

**编辑**

这是我使用上述代码后的输出：

```
ffmpeg version N-46206-g0e4d34e Copyright (c) 2000-2012 the FFmpeg developers
  built on Oct 30 2012 23:07:44 with llvm-gcc 4.2.1 (LLVM build 2336.11.00)
  configuration: --enable-gpl --enable-version3 --enable-nonfree --enable-postproc --enable-libaacplus --enable-libass --enable-libcelt --enable-libfaac --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-openssl --enable-libopus --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvo-aacenc --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxvid --prefix=/usr/local
  libavutil      52\.  1.100 / 52\.  1.100
  libavcodec     54\. 70.100 / 54\. 70.100
  libavformat    54\. 35.100 / 54\. 35.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 20.113 /  3\. 20.113
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 16.100 /  0\. 16.100
  libpostproc    52\.  1.100 / 52\.  1.100
[image2 @ 0x7fa68381e200] max_analyze_duration 5000000 reached at 5000000
Input #0, image2, from 'FeatureTour_%05d.png':
  Duration: 00:00:14.44, start: 0.000000, bitrate: N/A
    Stream #0:0: Video: png, rgb24, 114x151 [SAR 2835:2835 DAR 114:151], 25 fps, 25 tbr, 25 tbn, 25 tbc
[libx264 @ 0x7fa683826c00] using SAR=1/1
[libx264 @ 0x7fa683826c00] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
[libx264 @ 0x7fa683826c00] profile High 4:4:4 Predictive, level 3.0, 4:4:4 8-bit
[libx264 @ 0x7fa683826c00] 264 - core 125 - H.264/MPEG-4 AVC codec - Copyleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=4 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=abr mbtree=1 bitrate=9600 ratetol=1.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'FeatureTour.mp4':
  Metadata:
    encoder         : Lavf54.35.100
    Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuv444p, 114x151 [SAR 1:1 DAR 114:151], q=-1--1, 9600 kb/s, 15360 tbn, 30 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (png -> libx264)
Press [q] to stop, [?] for help
frame=  432 fps=0.0 q=-2.0 Lsize=     152kB time=00:00:14.33 bitrate=  86.9kbits/s dup=71 drop=0    
video:146kB audio:0kB subtitle:0 global headers:0kB muxing overhead 3.905020%
[libx264 @ 0x7fa683826c00] frame I:3     Avg QP: 0.06  size:  8557
[libx264 @ 0x7fa683826c00] frame P:135   Avg QP: 0.10  size:   653
[libx264 @ 0x7fa683826c00] frame B:294   Avg QP: 0.43  size:   120
[libx264 @ 0x7fa683826c00] consecutive B-frames:  8.8%  0.9%  1.4% 88.9%
[libx264 @ 0x7fa683826c00] mb I  I16..4: 30.0%  0.4% 69.6%
[libx264 @ 0x7fa683826c00] mb P  I16..4:  2.1%  0.0%  1.9%  P16..4:  7.5%  1.2%  0.8%  0.0%  0.0%    skip:86.5%
[libx264 @ 0x7fa683826c00] mb B  I16..4:  0.2%  0.0%  0.1%  B16..8:  4.4%  0.3%  0.2%  direct: 0.9%  skip:93.8%  L0:46.5% L1:48.9% BI: 4.5%
[libx264 @ 0x7fa683826c00] final ratefactor: -45.15
[libx264 @ 0x7fa683826c00] 8x8 transform intra:0.7% inter:19.3%
[libx264 @ 0x7fa683826c00] coded y,u,v intra: 44.4% 32.1% 31.5% inter: 2.3% 1.6% 1.4%
[libx264 @ 0x7fa683826c00] i16 v,h,dc,p: 25% 75%  0%  0%
[libx264 @ 0x7fa683826c00] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 30% 40% 10%  0%  5%  0% 10%  0%  5%
[libx264 @ 0x7fa683826c00] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 71%  5%  1%  1%  1%  2%  1%  2%
[libx264 @ 0x7fa683826c00] Weighted P-Frames: Y:0.0% UV:0.0%
[libx264 @ 0x7fa683826c00] ref P L0: 88.0%  3.9%  5.0%  3.1%
[libx264 @ 0x7fa683826c00] ref B L0: 85.4% 12.4%  2.1%
[libx264 @ 0x7fa683826c00] ref B L1: 98.1%  1.9%
[libx264 @ 0x7fa683826c00] kb/s:82.86 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-31T20:15:44.957

### 添加`-vf format=yuv420p`（或别名`-pix_fmt yuv420p`）作为输出选项

```
ffmpeg -framerate 30 -i input_%05d.png -vf format=yuv420p output.mp4 
```

否则`ffmpeg`将尝试保留尽可能多的颜色信息，但大多数播放器只能解码 YUV 4:2:0。

# windows-phone-7 - Windows Phone 8 申请记录

> ID：13163112
> 
> 赞同：0
> 
> 时间：2012-10-31T17:02:20.380
> 
> 标签：windows-phone-7, nfc, windows-phone, windows-phone-8

有没有办法在**Windows Phone 8上重现****Android Application Record**之类的东西 ？Android 应用程序记录 - NDEF 记录告诉手机从该记录中搜索应用程序，如果已安装它以启动它以处理 NFC 消息，如果设备上未安装此类程序，则启动 Play Store 应用程序并搜索此应用程序 [通过包裹]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:01:23.773

WP8 不支持从 NFC 标签启动任意应用程序。应用程序必须选择加入 app2app 自定义协议才能从 NFC 标签启动。

订阅 app2app 自定义协议的任何应用程序都可以通过具有该 URI 自定义协议的 NFC 标签从该 URI 启动。一旦支持自定义协议，启用 NFC 的应用程序就不需要任何东西。

请参阅有关如何实现 app2app 自定义协议的说明 @ [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987(v=vs.105).aspx)

# opencv - 无法绘制最大轮廓

> ID：13163113
> 
> 赞同：1
> 
> 时间：2012-10-31T17:02:29.190
> 
> 标签：opencv, drawing, contour

我有以下代码来绘制最大的轮廓。但似乎我做错了什么。请指教

```
if(inputImage.data == NULL)
        return HandInfo2();
        Mat outputImage =  Mat::zeros( inputImage.size(), CV_8UC1);
        vector<vector<Point> > contours;
        vector<Vec4i> hierarchy;
        vector<Point> largestContour;
        int largestArea = -1;

    findContours( inputImage, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0, 0) );

    /// Approximate contours to polygons
    vector<vector<Point> > polyContours( contours.size() );

    for( int i = 0; i < contours.size(); i++ )
    { 
        approxPolyDP( Mat(contours[i]), polyContours[i], 3, true );
    }

    for( int i = 0; i < contours.size(); i++ )
    { 
        int area = fabs(contourArea(polyContours[i],false));
        if(area > largestArea && area > size)
        {
            largestArea = area;
            largestContour = polyContours[i];
        }   
    }

    Scalar color = Scalar( 255 );

    if(largestContour.size()>0)
    drawContours( outputImage, largestContour, 0, color, 1, 8, vector<Vec4i>(), 0, Point() ); 
```

调用 drawContours() 时，出现以下错误

> OpenCV 错误：未知函数中的断言失败 (i < 0)，文件 ..\..\..\src\opencv\modules\core\src\matrix.cpp，第 957 行

![错误](../Images/f591f275e1d7286add8bc9a3384da758.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:36:11.093

好的，只针对犯同样错误的人。

我需要 a`vector<vector<Point>> largestContour;`而不是向量最大轮廓；

并将代码从更改`largestContour = polyContours[i];`为`largestContour.push_back(polyContours[i]);`

就是这样。现在我可以提取最大的轮廓。

# html - 垂直对齐div中的图像

> ID：13163119
> 
> 赞同：2
> 
> 时间：2012-10-31T17:02:56.990
> 
> 标签：html, css, image, alignment, vertical-alignment

好的，这就是问题所在，我有不同尺寸的图像，但这并不重要，因为它们的宽度总是大于它们的高度，并且所有图像都被调整为 100px 宽度（每个图像的高度仍然不同）

我正在尝试垂直对齐 100px x 100px 的 div 内的图像。我尝试了各种各样的事情。line-height，margin's auto，表格单元格方法都不适用于我......

这是html：

```
<div class="kassabon_product_image">
<img src="product1.png" />
</div> 
```

这是CSS

```
.kassabon_product_image{
float: left;
display:table-cell;
width: 100px;
height: 100px;
background-color: red;
border: 1px solid #D5D0C6;
line-height: 100px;
vertical-align:middle;
}

.kassabon_product_image img{
width: 100px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:16:32.887

```
.kassabon_product_image{
    display:table-cell;
    vertical-align:middle;
} 
```

从 img 中删除垂直对齐，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:15:04.113

看评论

```
.kassabon_product_image{
float: left;
text-align: center; /*using text-align:center in the outer div will center all elements inside the div*/
display:inline-block;
width: 100px;
height: 100px;
background-color: red;
border: 1px solid #D5D0C6;
line-height: 100px;
}

.kassabon_product_image img{
width: 100px;
/*vertical-align:middle;*/ /*this is the wrong place to align*/
} 
```

# filesystems - 通过 SMB 或其他网络协议公开自定义文件系统

> ID：13163125
> 
> 赞同：0
> 
> 时间：2012-10-31T17:03:31.157
> 
> 标签：filesystems, smb

我们编写了一个库，它在自定义数据库系统之上实现了类似文件系统的 API。

我们希望能够将该文件系统作为普通文件系统从网络上的其他机器上挂载。

是否有任何库可以在用户空间中运行，让网络上的其他机器挂载它并将其视为普通文件系统？（最好在 Python 或 C++ 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:25:44.790

一种选择是使用我们的回调文件系统并将文件系统公开为虚拟磁盘，可以使用常规 Windows 共享机制进行共享。回调文件系统包括完成工作所需的内核模式驱动程序，并提供用户模式 ​​C++ API，您可以使用该 API 将数据公开为文件系统。

曾经有一个名为 WinFUSE 的 SMB 服务器的 .NET 实现，但它早已不复存在，几乎没有留下任何痕迹。

更新：在 linux 上，您可以使用 FUSE 实现文件系统并挂载它，然后使用一些机制（不一定是库）将挂载的文件系统公开为 SMB 共享。

# javascript - div不会在单击图像时显示

> ID：13163126
> 
> 赞同：-1
> 
> 时间：2012-10-31T17:03:31.483
> 
> 标签：javascript, css, html-table

不知道问题出在哪里，尝试了各种方法，但我没有任何运气。我过去曾成功完成过此操作，但现在无法正常工作，任何帮助都会很棒...

HTML 片段：

```
<tr>
    <td class="tableContent noBorderSides paddingAll"><img class="imgResize" src="images/emptyCircle.png" onclick="expandItem()"/>

<div id="Expand" class="hiddenDiv">

HELLO?

</div> 
```

JavaScript：

```
function expandItem() {

if (document.getElementById("Expand").style.display == 'block') {
    document.getElementById("Expand").style.display = 'none';

}
else if (document.getElementById("Expand").style.display == 'none') {
    document.getElementById("Expand").style.display = 'block';

}
} 
```

CSS：

```
.hiddenDiv {
display: none;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:04:57.723

在您的 CSS 中设置的初始`display`值将无法从该`.style`属性访问。

像这样做：

```
function expandItem() {
    var expand = document.getElementById("Expand");
    if (expand.style.display == '') {
        expand.style.display = 'block';
    }
    else if (expand.style.display == 'block') {
        expand.style.display = '';
    }
} 
```

或者像这样短一点：

```
function expandItem() {
    var expand = document.getElementById("Expand");
    expand.style.display = (expand.style.display == '') ? 'none' : '';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:06:47.130

用于[`.getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)获取与给定元素关联的任何样式属性。请注意，返回的对象是**read only**，因此您需要在初始`if`语句中使用它，然后像上面那样设置样式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T17:10:09.930

您可以从定义隐藏属性的元素中删除该类，并在您想要隐藏时添加：

```
if (document.getElementById("Expand").className == '') {
    document.getElementById("Expand").className = 'hiddenDiv';

}
else if (document.getElementById("Expand").className == 'hiddenDiv') {
    document.getElementById("Expand").className = '';

} 
```

请注意，如果您在该元素上有其他类，则需要进行一些字符串操作，而不仅仅是直接检查和删除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T17:19:15.990

```
//Temporary solution 
//Replace your javascript code with following code

if (document.getElementById("Expand").style.display == 'block') {
    document.getElementById("Expand").style.display = 'none';
}
else{
    document.getElementById("Expand").style.display = 'block';
}

//Note :- Javascript detect '' (empty) when it try to search display property for expand block 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T17:14:02.693

如果您只需要使用 javascript，@user1689607 的答案是正确的。如果您可以访问 jQuery，您可以这样做

`$("#Expand").toggle();`

还有一个简单的 jsfiddle 来演示：http: [//jsfiddle.net/P36YA/](http://jsfiddle.net/P36YA/)

# algorithm - 射线三角相交

> ID：13163129
> 
> 赞同：21
> 
> 时间：2012-10-31T17:03:40.217
> 
> 标签：algorithm, graphics, geometry, rendering

我看到经常推荐 Moller 和 Trumbore 的[Fast Minimum Storage Ray/Triangle Intersection 。](http://www.cs.virginia.edu/~gfx/Courses/2003/ImageSynthesis/papers/Acceleration/Fast%20MinimumStorage%20RayTriangle%20Intersection.pdf)

问题是，我不介意预先计算和存储任何数量的数据，只要它可以加快交叉路口的速度。

所以我的问题是，不关心内存，进行射线三角形相交的最快方法是什么？

编辑：我不会移动三角形，即它是一个静态场景。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T21:35:26.290

正如其他人所提到的，加快速度的最有效方法是使用加速结构来减少所需的射线三角形交叉点的数量。也就是说，您仍然希望您的射线三角形相交速度快。如果您乐于预先计算内容，可以尝试以下方法：

将您的射线线和三角形边缘转换为[Plücker 坐标](http://en.wikipedia.org/wiki/Pl%C3%BCcker_coordinates)。这使您可以确定您的射线线是否以每条边 6 次乘法/加法通过三角形。您仍然需要将您的光线起点和终点与三角形平面（每点 4 个乘法/加法）进行比较，以确保它实际上击中了三角形。

最坏情况下的运行时间开销是 26 次乘法/加法的总和。另外，请注意，您只需为每个光线/边缘组合计算一次光线/边缘符号，因此如果您正在评估网格，您可以使用每个边缘评估两次。

此外，这些数字假设一切都是在齐次坐标中完成的。您可以通过提前对事物进行规范化来减少乘法的数量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-06-30T02:33:04.903

我已经做了*很多*基准测试，我可以自信地说，*最快*（已发布）的方法是 Havel 和 Herout 发明并在他们的论文[Yet Faster Ray-Triangle Intersection (Using SSE4)](http://ieeexplore.ieee.org/abstract/document/5159346/)中提出的方法。即使*不使用 SSE*，它的速度也大约是 Möller 和 Trumbore 算法的两倍。

我的 Havel-Herout 的 C 实现：

```
 typedef struct {
        vec3 n0; float d0;
        vec3 n1; float d1;
        vec3 n2; float d2;
    } isect_hh_data;

    void
    isect_hh_pre(vec3 v0, vec3 v1, vec3 v2, isect_hh_data *D) {
        vec3 e1 = v3_sub(v1, v0);
        vec3 e2 = v3_sub(v2, v0);
        D->n0 = v3_cross(e1, e2);
        D->d0 = v3_dot(D->n0, v0);

        float inv_denom = 1 / v3_dot(D->n0, D->n0);

        D->n1 = v3_scale(v3_cross(e2, D->n0), inv_denom);
        D->d1 = -v3_dot(D->n1, v0);

        D->n2 = v3_scale(v3_cross(D->n0, e1), inv_denom);
        D->d2 = -v3_dot(D->n2, v0);
    }

    inline bool
    isect_hh(vec3 o, vec3 d, float *t, vec2 *uv, isect_hh_data *D) {
        float det = v3_dot(D->n0, d);
        float dett = D->d0 - v3_dot(o, D->n0);
        vec3 wr = v3_add(v3_scale(o, det), v3_scale(d, dett));
        uv->x = v3_dot(wr, D->n1) + det * D->d1;
        uv->y = v3_dot(wr, D->n2) + det * D->d2;
        float tmpdet0 = det - uv->x - uv->y;
        int pdet0 = ((int_or_float)tmpdet0).i;
        int pdetu = ((int_or_float)uv->x).i;
        int pdetv = ((int_or_float)uv->y).i;
        pdet0 = pdet0 ^ pdetu;
        pdet0 = pdet0 | (pdetu ^ pdetv);
        if (pdet0 & 0x80000000)
            return false;
        float rdet = 1 / det;
        uv->x *= rdet;
        uv->y *= rdet;
        *t = dett * rdet;
        return *t >= ISECT_NEAR && *t <= ISECT_FAR;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T17:13:10.773

一个建议可能是实施八叉树 (http://en.wikipedia.org/wiki/Octree) 算法将您的 3D 空间划分为非常精细的块。分区越精细，所需的内存就越多，但树的准确性就越高。

您仍然需要检查射线/三角形的交点，但想法是树可以告诉您何时可以跳过射线/三角形的交点，因为保证射线不会击中三角形。

但是，如果您开始四处移动三角形，则需要更新八叉树，然后我不确定它是否会为您节省任何东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-01T02:05:19.570

找到丹星期天的这篇文章：

> 根据直到第一次拒绝测试完成的操作计数，该算法的效率比 MT（Möller & Trumbore）算法略低，[...]。然而，MT 算法使用两个叉积，而我们的算法只使用一个叉积，而我们使用的那个计算三角形平面的法线向量，这是计算线参数*rI*所必需的。但是，当已经为场景中的所有三角形预先计算并存储了法线向量时（通常是这种情况），我们的算法根本不需要计算这个叉积。但是，在这种情况下，MT 算法仍然会计算两个叉积，并且效率低于我们的算法。

[http://geomalgorithms.com/a06-_intersect-2.html](http://geomalgorithms.com/a06-_intersect-2.html)

# moodle - 向moodle数据库添加表

> ID：13163130
> 
> 赞同：2
> 
> 时间：2012-10-31T17:03:48.987
> 
> 标签：moodle

我在moodle中有一些桌子。如何在其中添加表格？我首先在 xmldbeditor 中构建了我的表。然后，将 php 代码粘贴到 db/upgrade.php 中并将其版本更改为最新版本 (2012103000)。最后，我将 version.php 更改为该版本。但我认为它不是创建的。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:29:40.153

您需要创建适当的插件，最好的地方是本地插件文件夹。

如果您创建一个新插件，那么您可以在 local/pluginname/db/install.xml 中添加您的表

install.xml 只会在第一次安装插件时调用。

之后，如果要更改结构，则需要将代码放入 db/upgrade.php 并需要更改版本并打开 admin/index.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:00:43.183

我通常会备份我已经拥有的表中的数据，卸载插件然后去通知页面重新安装它。**当您在 version.php 中输入新版本号然后访问通知页面时，应该**调用Update.php ，但是当我开发插件时，我倾向于不依赖它。

或者，在 Moodle 上的 XMLDB 编辑器中加载表，然后单击“[查看 SQL 代码]”链接。这将生成可以在 PHPMyAdmin 或 MySQL Workbench 上执行以直接创建表的 SQL 代码。

# security - 如何通过（私有）API 保护帐户创建？

> ID：13163132
> 
> 赞同：1
> 
> 时间：2012-10-31T17:03:51.237
> 
> 标签：security, api

前段时间，智能手机应用程序打开浏览器进入带有验证码的注册页面，或者要求通过网络单独注册是很常见的，因为 API 注册被视为易受攻击。

现在大多数应用程序似乎都通过本机形式提供注册，尽管这方面的端点通常没有记录在他们的公共 API 中。我还没有看到很多关于这种被滥用来创建垃圾邮件帐户的报告。

这是怎么做到的？是否有标准的加密/握手过程来验证真实注册，或者注册通常依赖于未记录的端点和简单的 API 密钥传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:52:50.587

嵌入产生更好的体验，但有你提到的问题。是的，另一端的服务所有者仍然担心这个问题并解决这个问题。未记录的 API 无济于事，服务所有者知道这一点。

如今，工具箱中的工具之一是分配给可用于节流的设备的键。这基本上可以让您限制每个设备可以使用的服务量，并且它需要您有一个设备（或者可以从一个设备中窃取密钥）才能提供服务。只要向新设备颁发密钥的过程很强大（一个可解决的问题），那么您就可以在您愿意为设备提供的范围内提供无验证码的注册体验。

我还要注意，您还可以使用其他众所周知的方法，例如 IP 限制和与其他服​​务提供商（例如电话运营商）的握手。根据问题域，这些也在桌面上......

# objective-c - 如何在 NSUserDefaults 中存储带有块变量的自定义对象

> ID：13163134
> 
> 赞同：0
> 
> 时间：2012-10-31T17:04:00.653
> 
> 标签：objective-c, ios, nsuserdefaults, objective-c-blocks

我想在 NSUserDefaults 中存储一个带有块的自定义对象。我已经实现了

```
- (void)encodeWithCoder:(NSCoder *)encoder and - (id)initWithCoder:(NSCoder *)decoder 
```

有没有办法在这个调用期间存储 myblock 变量？像这样的东西：

```
- (void)encodeWithCoder:(NSCoder *)encoder
{
    [encoder encodeSomething:self->_myblock forKey:@"myblock"];
} 
```

我已经尝试过 encodeObjectf 并且它似乎不起作用......如果有人已经尝试过这个，我可能会感谢你的帮助:-)

埃兰达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:13:12.583

看来不能直接。您可以间接执行此操作，这里建议的很好的解决方案：[Is there any way to serialize / unserialize an Objective-C block?](https://stackoverflow.com/a/3326124/1032151)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:14:48.177

我认为最好对数据而不是块进行存储。创建一些自定义类并存储您的数据，并且在运行时您始终可以使用该数据创建块。AFAIK 块不向 NSCoding 确认（如果我在这里错了，请纠正我）。

-曼

# ajax - 从 REST Spring MVC Web 应用程序发送 HTML/JSON

> ID：13163135
> 
> 赞同：0
> 
> 时间：2012-10-31T17:04:04.633
> 
> 标签：ajax, json, rest, spring-mvc

我已经使用 Spring MVC 开发了一个 REST Web 应用程序，并且可以将 JSON 对象发送到客户端。

我想构建一个连接到我的 Web 应用程序的 Javascript/AJAX 客户端，但我不知道如何发送第一个 HTML 页面（使用 JSP）。我知道我应该为 JSP 页面提供一些嵌入式 AJAX。此 AJAX 将向我的 Web 服务发送请求。

**更新：** 我无法实现的要求是`http://localhost:8084`在浏览器中编写默认 URI ( ) 并查看我在 JSP 页面 ( `home.jsp`) 中编写的 HTML 页面。

我的方法如下：

我有一个发送根 JSP 页面的**控制器**

```
@Controller
public class SessionController {

    @RequestMapping(value="/", method=RequestMethod.GET)
    public String homeScreen(){
        return "home";
    }
} 
```

但是当我运行服务器时，我收到了这个警告

```
WARNING: No mapping found for HTTP request with URI [/home] in DispatcherServlet with name 'dispatcher' 
```

并且浏览器中没有加载任何内容。

这是我的**应用程序上下文**文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-3.1.xsd       
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
       http://www.springframework.org/schema/context       
       http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="com.powerelectronics.freesun.web" />

    <mvc:annotation-driven />

</beans> 
```

和**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
         http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

我的方法正确吗？我在任何基本概念上都错了吗？我可以修改代码中的某些内容以使其运行吗？我希望看到在浏览器中加载的第一页并继续朝那个方向前进。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:13:50.557

尝试`@ResponseBody`在方法上添加注释：

```
@Controller
public class SessionController {

    @RequestMapping(value="/", method=RequestMethod.GET)
    @ResponseBody
    public String homeScreen(){
        return "home";
    }
} 
```

这应该`home`在页面上输出。

如果您想使用*View 技术，例如 JSP，请查看官方**Spring Framework 文档*的以下章节：http : [//static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/ spring-framework-reference.html#view](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#view)

**更新**

“就像您与 Spring 集成的任何其他视图技术一样，对于 JSP，您将需要一个视图解析器来解析您的视图”。如果您想使用 JSP，您应该将以下内容添加到您的 Web 应用程序上下文中，然后返回要处理的文件的名称：

```
<!-- the ResourceBundleViewResolver -->
<bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
  <property name="basename" value="views"/>
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
  <property name="prefix" value="/WEB-INF/jsp/"/>
  <property name="suffix" value=".jsp"/>
</bean> 
```

以上内容是否存在于您的 Web 应用程序上下文中？您可以查看官方文档以获取更多信息：[http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#view-jsp-resolver](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#view-jsp-resolver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:02:56.083

在 web.xml 文件中放置一个欢迎文件标记。

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

您必须在 WEB-INF 之外拥有这个 index.jsp。将以下代码放入其中。

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Insert title here</title>
    </head>
    <body>
        <%
            response.sendRedirect("home");
        %>
    </body>
</html> 
```

当应用程序被加载时，它会调用 index.jsp 并且 jsp 会将它重定向到 /home 动作。

然后你的控制器将被调用。

```
@Controller
public class SessionController {

    // see the request mapping value attribute here, it is /home

    @RequestMapping(value="/home", method=RequestMethod.GET)
    public String homeScreen(){
        return "home";
    }
} 
```

这将调用您的主页 jsp。

如果你想从你的 spring 控制器返回 JSON，那么你需要在 spring 上下文 xml 文件中初始化 jackson mapper bean。

```
<beans:bean id="jacksonMessageChanger" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
    <beans:property name="supportedMediaTypes" value="application/json" />
</beans:bean>

<beans:bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <beans:property name="messageConverters">
        <util:list id="beanList">
            <beans:ref bean="jacksonMessageChanger" />
        </util:list>
    </beans:property>
</beans:bean> 
```

您需要添加 jar 或 maven 依赖项才能使用 jackson mapper。

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>1.8.5</version>
</dependency> 
```

要从控制器返回 JSON，方法如下：

```
@RequestMapping(value="/getContacts", method=RequestMethod.GET)
public @ResponseBody List<Contacts> getContacts(){
        List<Contacts> contactList = prepareContactList();
        return contactList;
} 
```

这样就可以在ajax调用成功函数中以对象的形式得到List，通过迭代可以得到详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:48:00.993

最后，我仅通过以不同方式在 web.xml 中配置调度程序来解决此问题。

首先，按照 David Riccitelli 的建议，我将视图解析器添加到 servlet 配置文件中：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"
    p:prefix="/WEB-INF/jsp/" p:suffix=".jsp"/> 
```

然后我在 web.xml 中配置了 servlet 映射：

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

这就是我一直在寻找的，不需要额外的配置。这样做我调用我的根 URL `http://localhost:8084`，我可以看到我已经编码的主屏幕`home.jsp`。

感谢您的支持和建议。

# python - 在python中将函数转换为类的方法

> ID：13163137
> 
> 赞同：1
> 
> 时间：2012-10-31T17:04:19.220
> 
> 标签：python, class, function, methods

我正在尝试掌握 python 2.6 的窍门，这是我对编程语言的介绍。我正在关注 Learn Python the Hard Way，我一定错过了一些东西。我有一组想要组合成一个类的函数。这些函数都包含[在这里](http://pastebin.com/QDbVRALq)。我试图将它们组合成一个名为“Parsers”的类。此代码包含[在此处](http://pastebin.com/0tqbktKb)。

函数本身在类之外工作。我正在尝试像这样从类中调用函数：

导入模块：

```
>>> from ex48 import parser2 
```

分配班级：

```
>>> parser_class = parser2.Parsers() 
```

调用一个函数：

```
>>> parser_class.parse_subject(word_list, ('noun', 'player')) 
```

我得到以下信息：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "ex48/parser2.py", line 60, in parse_subject
    verb = parse_verb(word_list)
NameError: global name 'parse_verb' is not defined 
```

不知道为什么它告诉我。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:12:18.657

你对你的代码在做什么感到困惑。

这不会分配一个类，它会创建一个实例，并将该实例分配给一个变量：

```
parser_class = parser2.Parsers() 
```

这会在该实例上调用一个方法：

```
parser_class.parse_subject(word_list, ('noun', 'player')) 
```

下面告诉你没有全局函数（或者实际上是任何类型的变量）`parse_verb`：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "ex48/parser2.py", line 60, in parse_subject
    verb = parse_verb(word_list)
NameError: global name 'parse_verb' is not defined 
```

我希望您想将其更改为`verb = self.parse_verb(word_list)`，这将调用`parse_verb`同一对象 ( `self`) 的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:31:56.580

这里有两个问题，一个是机械的，一个是概念的。我先处理后者。

一个类的全部意义在于它的实例代表了你的世界模型中的某种对象。例如，“句子”是一个对象，因此有一个名为 的类是有意义的`Sentence`，但“解析器”不是一个对象，因此`Parsers`可能会成为一个混淆类。从不那么抽象的角度来看，一个类通常具有某种状态，封装在其方法工作的数据成员中。

您在这里真正拥有的是一个解析器函数，它返回一个`Sentence`对象（或引发 a `ParserError`）。这个函数可以是 的一个方法`Sentence`，也可以是一个自由函数；如果您的模型中有任何理由存在这样的对象，它也可能是`Parser`类的方法，但似乎没有。

如果您只是想封装所有这些辅助函数，以便它们不会乱扔全局命名空间（这本身就是一个好主意），那么您不需要滥用类来做到这一点。只需将它们制作成内部的本地函数`parse_sentence`，或者将它们放在一个名为`parsers`.

现在，关于机械问题：如果你在一个类中有一个方法，你通常只能通过点语法调用它：`someObject.methodName(params)`. 当一个方法调用同一对象的另一个方法时，您可以使用特殊`self`参数（您已正确地将其列为每个方法的第一个参数）来执行此操作。所以：

```
verb = self.parse_verb(word_list)
obj = self.parse_object(word_list) 
```

... 以此类推，适用于您的示例中的所有其他方法调用。

并非每种语言都需要这样的显式`self`。例如，在 C++ 或相关语言（Java、C# 等）中，一个方法可以在不指定目标的情况下调用另一个方法，并且隐式假定目标是`this`（C++ 等价于`self`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:08:57.400

看起来您正在使用 python 交互式会话。

如果您`parser2.py`在导入后进行了任何更改`parser2`，那么您必须

```
reload(parser2) 
```

使交互式解释器知道这些更改。

# sql - 按sql中的字符列“优先级”排序

> ID：13163139
> 
> 赞同：3
> 
> 时间：2012-10-31T17:04:32.370
> 
> 标签：sql, tsql

我有一个具有列名称优先级的表，其中包含值：

```
Urgent, medium, low, high. 
```

我想应用 order by 这样在 order by 值之后的排序如下：

```
urgent
high 
medium
low 
```

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T17:06:10.140

您可以为此使用`CASE`表达式：

```
ORDER BY CASE Priority 
    WHEN 'urgent' THEN 1
    WHEN 'high' THEN 2
    WHEN 'medium' THEN 3
    WHEN 'low' THEN 4
    END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:07:01.737

```
select * from your_table
order by case when priority = 'urgent' then 1
              when priority = 'high' then 2
              when priority = 'medium' then 3
              when priority = 'low' then 4
         end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:08:54.810

您可以执行一种`ORDER BY` `CASE WHEN`查询，为每个文本分配一个数值，但我建议使用整数直接指示数据中的优先级。

# python - 将 Python 稀疏矩阵的行和列乘以数组中的元素

> ID：13163145
> 
> 赞同：6
> 
> 时间：2012-10-31T17:05:04.543
> 
> 标签：python, sparse-matrix, operations

我有一个 numpy 数组，例如：

```
array = [0.2, 0.3, 0.4] 
```

（这个向量实际上是 300k 密集的，我只是用简单的例子来说明）

以及使用 Scipy 创建的稀疏对称矩阵，如下所示：

```
M = [[0, 1, 2]  
     [1, 0, 1]  
     [2, 1, 0]] 
```

（表示为密集只是为了说明；在我真正的问题中，它是一个（300k x 300k）稀疏矩阵）

是否可以将所有行乘以数组中的元素，然后对列进行相同的操作？

这将首先导致：

```
M = [[0 * 0.2, 1 * 0.2, 2 * 0.2]
     [1 * 0.3, 0 * 0.3, 1 * 0.3]
     [2 * 0.4, 1 * 0.4, 0 * 0.4]] 
```

（行乘以数组中的元素）

```
M = [[0, 0.2, 0.4]
     [0.3, 0, 0.3]
     [0.8, 0.4, 0]] 
```

然后列相乘：

```
M = [[0 * 0.2, 0.2 * 0.3, 0.4 * 0.4]
     [0.3 * 0.2, 0 * 0.3, 0.3 * 0.4]
     [0.8 * 0.2, 0.4 * 0.3, 0 * 0.4]] 
```

最终导致：

```
M = [[0, 0.06, 0.16]
     [0.06, 0, 0.12]
     [0.16, 0.12, 0]] 
```

我试过应用我在[这个线程](https://stackoverflow.com/questions/12237954/multiplying-elements-in-a-sparse-array-with-rows-in-matrix)中找到的解决方案，但没有奏效；我按照建议将 M 的数据乘以数组中的元素，然后转置矩阵并应用相同的操作，但结果不正确，仍然不明白为什么！

只是指出这一点，我将运行此操作的矩阵有点大，它有 2000 万个非零元素，所以效率非常重要！

我感谢您的帮助！

**编辑：**

按位解决方案效果很好。这里计算这个操作需要 1.72 秒，但这对我们的工作来说没问题。天呐！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T23:15:15.037

通常，您希望避免循环并使用矩阵运算来提高速度和效率。在这种情况下，解决方案是简单的线性代数，或者更具体地说是矩阵乘法。

要将 M 的列乘以数组 A，请乘以 M*diag(A)。要将 M 的行乘以 A，请乘以 diag(A)*M。两者都做：diag(A)*M*diag(A)，可以通过以下方式完成：

```
numpy.dot(numpy.dot(a, m), a) 
```

diag(A) 这里是一个除对角线有 A 外全为零的矩阵。您可以使用方法轻松创建此矩阵（例如 numpy.diag() 和 scipy.sparse.diags()）。

我希望它运行得非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:19:52.070

以下应该有效：

```
[[x*array[i]*array[j] for j, x in enumerate(row)] for i, row in enumerate(M)] 
```

例子：

```
>>> array = [0.2, 0.3, 0.4]
>>> M = [[0, 1, 2], [1, 0, 1], [2, 1, 0]]
>>> [[x*array[i]*array[j] for j, x in enumerate(row)] for i, row in enumerate(M)]
[[0.0, 0.059999999999999998, 0.16000000000000003], [0.059999999999999998, 0.0, 0.12], [0.16000000000000003, 0.12, 0.0]] 
```

[由于浮点运算](http://docs.python.org/2/tutorial/floatingpoint.html#floating-point-arithmetic-issues-and-limitations)的限制，数值略有偏差。如果舍入误差不可接受，请使用[十进制模块。](http://docs.python.org/2/library/decimal.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-25T17:15:52.233

我使用这种组合：

```
def multiply(matrix, vector, axis):
    if axis == 1:
        val = np.repeat(array, matrix.getnnz(axis=1))
        matrix.data *= val
    else:
        matrix = matrix.multiply(vector)
    return matrix 
```

当轴为 1（乘以行）时，我复制[此解决方案](https://stackoverflow.com/a/49254531/14116418)的第二种方法，当轴为 0（乘以列）时，我使用[乘法](https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.multiply.html?highlight=multiply#scipy.sparse.csr_matrix.multiply)

就地结果 (axis=1) 更有效。

# java - 具有属性的关联实体的 DAO 类 - 如何实现它？

> ID：13163146
> 
> 赞同：0
> 
> 时间：2012-10-31T17:05:05.600
> 
> 标签：java, hibernate, jpa, dao

我有类 CreatureType 和 Weapon（用来对付某些生物的最佳武器），我需要模拟武器对特定 CreatureType 具有各种效率的事实。所以我创建了具有效率属性的关联实体 CreatureTypeWeapon。

我是这样编码的（原理一样）[http://uaihebert.com/?p=1674&page=22](http://uaihebert.com/?p=1674&page=22)

我问这个问题的原因是我不知道如何为关联实体实现dao类。

我有 CreatureType 的 DAO 类，我有 Weapon 的 DAO 类，它实现了带有 CRUD 操作的接口。

但我不知何故错过了处理关联实体上的 CRUD 操作的方法。假设我有这个 DAO

```
public class CreatureTypeWeaponDAOImpl implements CreatureTypeWeaponDAO {

    @Override
    public void create(CreatureTypeWeapon creatureTypeWeapon) {
        // implementation
    }
    // ... other CRUD methods
} 
```

我这样使用它：

```
// this is like a person
CreatureType creatureType = new CreatureType();
creatureType.setName("alien");
creatureType.setMaxHitPoints(200);

// this is like a dog
Weapon weapon = new Weapon();           
weapon.setName("ak-47");

// this is like PersonDog
CreatureTypeWeapon creatureTypeWeapon = new CreatureTypeWeapon();
creatureTypeWeapon.setWeapon(weapon);
creatureTypeWeapon.setCreatureType(creatureType);
// this is like "adoptionDate" in the link posted
// 0.5 means when I hit it with ak-47 it takes half of its max hit points
// so I have to fire 2 times on it and it will die.
creatureTypeWeapon.setEfficiency(0.5);

// this is actually injected
CreatureTypeWeaponDAO dao = new CreatureTypeWeaponDAOImpl();
dao.create(creatureTypeWeapon); 
```

但问题是，如何实施？我能够正常坚持它，但假设我要删除这种关系：

```
dao.remove(creatureTypeWeapon); 
```

可以这样实现

```
public class CreatureTypeWeaponDAOImpl implements CreatureTypeWeaponDAO {
    void remove(CreatureTypeWeapon arg) {
        CreatureTypeWeapon toRemove = em.find(/* WHAT TO PUT HERE */);
        em.remove(toRemove);
    }
} 
```

通常，我放在那里

```
em.find(CreatureTypeWeapon.class, arg.getId()); 
```

但是关联实体中没有“id”....

**更新**

好的，这就是我在 CreatureTypeWeaponDAOImpl 中获取 CreatureTypeWeapon 实例的方式

```
TypedQuery<CreatureTypeWeapon> query = 
    em.createQuery(
        "SELECT ctw FROM CreatureTypeWeapon ctw WHERE "
            + "creatureType = :creatureType "
            + "AND "
            + "weapon = :weapon", 
        CreatureTypeWeapon.class);

    CreatureType creatureTypePersisted = 
        em.getReference(CreatureType.class, creatureType.getId());
    Weapon weaponPersisted = em.getReference(Weapon.class, weapon.getId());

    query.setParameter("creatureType", creatureTypePersisted);
    query.setParameter("weapon", weaponPersisted);
    return query.getSingleResult(); 
```

获取似乎没问题，但是当我要在删除方法中删除它时，就像 em.remove(creatureTypeWeapon); （根据建议）我收到此错误：

```
javax.persistence.NoResultException: No entity found for query at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:291)
at cz.muni.fi.pa165.creatures.dao.impl.CreatureTypeWeaponDAOImpl.get(CreatureTypeWeaponDAOImpl.java:101) 
```

这是我测试它的一种方式：

```
public void testRemoveCreatureTypeWeapon() {

    Weapon w = new Weapon("ak-47");
    weaponDAO.create(w);

    CreatureType ct = new CreatureType("alien", 200);
    creatureTypeDAO.create(ct);

    assertNotNull(weaponDAO.get(w.getId()));
    assertNotNull(creatureTypeDAO.get(ct.getId()));

    CreatureTypeWeapon ctw = new CreatureTypeWeapon();
    ctw.setCreatureType(ct);
    ctw.setWeapon(w);
    ctw.setEffectivity(new Float(0.5));
    creatureTypeWeaponDAO.create(ctw);

    CreatureTypeWeapon ctw2 =
            creatureTypeWeaponDAO.get(ctw.getCreatureType(), ctw.getWeapon());

    ctw2.setCreatureType(ctw.getCreatureType());
    ctw2.setWeapon(ctw.getWeapon());

    creatureTypeWeaponDAO.remove(ctw);

    assertNull(creatureTypeWeaponDAO.get(ctw2.getCreatureType(), ctw2.getWeapon()));
} 
```

**更新#2**

好的，我明白了，出现这种错误的原因是，当 query.getSingleResult() 抛出 NoResultException 时，这意味着当我在测试中删除实体后尝试获取实体时，没有这样的记录，因此该方法会抛出一个执行，这很好。我是这样处理的：

```
try {
    return query.getSingleResult();
} catch(NoResultException ex) {
    return null;
} 
```

这样做之后，可以正常删除它，（甚至在它之前也是可行的，但我很困惑并认为错误在那里）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:26:45.137

你不能直接删除`CreatureTypeWeapon`实体吗？我认为您不需要进行**find**，只需删除`CreatureTypeWeapon`实体即可删除与`CreatureType`and的关联`Weapon`。

```
public class CreatureTypeWeaponDAOImpl implements CreatureTypeWeaponDAO {
    void remove(CreatureTypeWeapon arg) {
        /*Some init codes here*/
        session.delete(arg);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:27:27.960

您需要定义一个新表，它是表`CreatureType`和`Weapon`. 例如：

```
@Entity
public class CreatureTypeWeapon implements Serializable {

    @Id
    @ManyToOne
    @PrimaryKeyJoinColumn(name = "creature_id", referencedColumnName = "id")
    private CreatureType creatureType;

    @Id
    @ManyToOne
    @PrimaryKeyJoinColumn(name = "weapon_id", referencedColumnName = "id")
    private Weapon weapon;
} 
```

然后，您可以按如下方式定义您的查询：

按生物查找

```
"SELECT CreatureTypeWeapon WHERE creatureType = ?" 
```

按武器查找

```
"SELECT CreatureTypeWeapon WHERE weapon = ?" 
```

按生物和武器查找

```
"SELECT  CreatureTypeWeapon WHERE creatureType = ? AND weapon = ?" 
```

删除

```
em.delete(creatureTypeWeapon); 
```

# erlang - 如何从依赖项中加载 Rebar 插件以进行“预编译”？

> ID：13163147
> 
> 赞同：1
> 
> 时间：2012-10-31T17:05:05.537
> 
> 标签：erlang, rebar

我有许多应用程序需要在编译之前生成头文件。这似乎是 Rebar 插件的完美候选者，因此我创建了一个带有`pre_compile`函数的插件，将其放入 Git 存储库中，并将其列为`rebar.config`其他应用程序中的依赖项。

但是插件必须先编译后才能加载，所以我运行的时候`rebar compile -v`发现rebar报错找不到插件，然后编译依赖，然后编译我的应用程序失败，因为头文件还没有生成。

有没有办法通过 Rebar 插件来完成我想要实现的目标，还是我需要找到另一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:05:05.537

选项是你的`plugin_dir`朋友：

```
{plugin_dir, "deps/my_plugin/src"}. 
```

如果 Rebar 已经在代码路径中找不到它，这会使 Rebar 尝试从该源目录编译插件。

# ajax - ajax 调用未执行

> ID：13163152
> 
> 赞同：0
> 
> 时间：2012-10-31T17:05:19.720
> 
> 标签：ajax, recursion

我正在抛出一个下载一些图像的 ajax 调用。同时，我需要另一个循环来检查是否所有图像都已下载（我知道将下载多少）。我这样做：

```
function check_download(){
    ajax_call...
    success: function(amount){if(amount < 40) check_download()}
} 
```

调用 download_images(); // 这开始下载图像的过程 call check_download();

所以我开始下载并发送一个 ajax 调用来检查它是否已经下载了 40 个图像。如果没有，那么我想启动另一个 ajax 调用以再次检查，依此类推。

但它只抛出 2 个 ajax 调用。第二个被冻结，它没有返回任何值，所以没有循环完成，我无法检查下载进度。

关于如何启动几个 ajax 调用来实现这一点的任何想法？

# ios - 使用 2 个 UITextFields 确认密码

> ID：13163154
> 
> 赞同：2
> 
> 时间：2012-10-31T17:05:40.257
> 
> 标签：ios, uitextfield

我希望用户确认他输入的密码......所以我使用两个文本字段..但不知何故，即使两者都有相同的密码，它似乎认为 2 字符串不同

```
 if (![self.typePTextField.text isEqualToString:self.retypePLabel.text]) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", @"Error") message:NSLocalizedString(@"Passwords do not match \n please retype", @"Passwords do not match \n please retype") delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];
    self.typePTextField.text = @"";
    self.retypePLabel.text = @"";
    return;
} 
```

即使我两次键入相同的字符串也会出现警报......并且只有第一个文本字段被重置为@“”......什么会解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:12:14.883

我猜是 isEqual: 方法

```
self.retypePLabel.text 
```

应该

```
self.retypePTextField.text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:19:19.687

`self.retypePLabel.text`? 你确定你问这个，因为我认为它应该像`self.retypePTextField.text`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T12:06:46.843

尝试

```
 if (![self.typePTextField.text isEqualToString:self.sometextfield.text]) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", @"Error") message:NSLocalizedString(@"Passwords do not match \n please retype", @"Passwords do not match \n please retype") delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        self.typePTextField.text = @"";
        self.sometextfield.text = @"";
        return;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-20T08:12:09.767

```
if([_txtPassword.text isEqual:_txtconfirmPassword.text])
    {
         NSLog(@"Password =%@   , ConfirmPassword = %@ ",_txtPassword.text,_txtconfirmPassword.text);
     }
     else {
        //// code show alert////
     } 
```

# php - 如何从第二组引号中获取单词/内容？

> ID：13163155
> 
> 赞同：0
> 
> 时间：2012-10-31T17:05:40.407
> 
> 标签：php, expression, quotes

我有一个循环，它返回如下所示的字符串......

*   s:20:"D111 免费送货**";s:4:"0.00"
*   s:32:"D111 3/5 天送货服务***";s:4:"6.99"
*   s:32:"D111 2/3 天送货服务***";s:4:"8.99"

我有正则表达式从第一组引号中获取内容。

`$shipping_name = preg_match('/"(.+?)"/', $shipp_option, $matches);`

但我也想得到第二组引号内的数字，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:08:20.193

[`explode()`](http://php.net/explode)分隔符上的字符串`;`，然后[`unserialize()`](http://php.net/unserialize)它们：

```
$string = 's:20:"D111 Free Delivery**";s:4:"0.00"';
$array = explode( ';', $string);
list( $str, $number) = array_map( 'unserialize', $array);
echo $str . ' ' . $number; 
```

[您可以在这个演示](http://viper-7.com/PdntMF)中看到它的工作，对于您的三个测试用例，输出：

```
D111 Free Delivery**
0.00
D111 3/5 day delivery service***
6.99
D111 2/3 day delivery service***
8.99 
```

*编辑以显示如何在其自己的变量中捕获每个字段。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:21:57.657

爆炸！！！！

```
//inside your loop
    $halves = explode(';', $shipp_option);
    $first_half = explode(':', $halves[0]);
    $second_half = explode(':', $halves[1]);
    $shipping_name = trim($first_half[2], '"');//eg. D111 Free Delivery**
    $shipping_price = trim($second_half[2], '"');//eg. 0.00
//end inside your loop 
```

或者……快一点：

```
//inside your loop
    $shipp_arr = explode(';:', $shipp_option);
    $shipping_name = trim($shipp_arr[2], '"');//eg. D111 Free Delivery**
    $shipping_price = trim($shipp_arr[5], '"');//eg. 0.00
//end inside your loop 
```

# tortoisesvn - TortoiseSVN 切换分支

> ID：13163160
> 
> 赞同：21
> 
> 时间：2012-10-31T17:06:09.230
> 
> 标签：tortoisesvn

我使用 svn 有一段时间了，但最近有几个团队加入了这个项目。其中一个团队创建了一个新分支，并要求我检查他们的一些更改。我进入目录，右键单击，svn->switch并选择新分支。我进去并试图在我所在的页面上回应一些东西，看看我是否在新分支中工作，而我不是。这有点超出了我的工作范围，但是随着项目变得如此之大，我需要学习这一点。

基于此，我的问题..还有什么我没有做的吗？将工作副本切换到这个新分支后，我该如何处理它？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-31T17:09:50.920

checkout 和 switch 之间的区别可能会增加混乱。我认为在您的情况下，将分支检出到不同的文件夹会更简单，因为您只是在进行审核，并且无论如何这可能是最直接的方法。

[请参阅Tortoise 文档中的](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-branchtag.html)此部分：

**结帐或切换...**

> ...那是（不是真的）问题。当结帐从存储库中的所需分支下载所有内容到您的工作目录时，TortoiseSVN → Switch... 仅将更改的数据传输到您的工作副本。有利于网络负载，有利于您的耐心。:-)
> 
> 为了能够使用新生成的分支或标签，您有几种方法来处理它。你可以：
> 
> TortoiseSVN → Checkout 在空文件夹中进行新的结帐。您可以签出到本地磁盘上的任何位置，并且可以从存储库中创建任意数量的工作副本。
> 
> 将您当前的工作副本切换到存储库中新创建的副本。再次选择项目的顶级文件夹并使用 TortoiseSVN → Switch... 从上下文菜单中。
> 
> 在下一个对话框中输入您刚刚创建的分支的 URL。选择 Head Revision 单选按钮并单击 OK。您的工作副本将切换到新的分支/标签。
> 
> Switch 的工作方式与 Update 类似，它从不丢弃您的本地更改。当您进行切换时，您对工作副本所做的任何尚未提交的更改都将被合并。如果您不希望这种情况发生，那么您必须在切换之前提交更改，或者将您的工作副本恢复为已提交的修订版（通常是 HEAD）。
> 
> 如果你想在主干和分支上工作，但又不想花费新的结账，你可以使用 Windows 资源管理器在另一个文件夹中复制你的主干结账，然后 TortoiseSVN → 切换...那个副本到你的新的分支。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T17:11:35.240

在常规的“属性”对话框（右键单击 Windows 资源管理器）中，您有一个“Subversion”选项卡，它将告诉您文件或目录指向的 URL。使用它来验证您是否确实切换到了正确的分支。

任何未提交的本地更改仍将在您的工作副本中，这也毫无价值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-24T11:11:12.940

**可能存在以下**误解**`svn switch`**：

起初，我认为 switch 命令的存在意味着存在一个“当前”或“选定”的工作副本，用于 SVN 的正常运行。就像我目前正在处理主干一样，然后我正在处理分支 B，因此从工作副本“切换”到另一个。事实是：**没有当前工作副本这样的东西**！只有许多本地工作副本：一个用于主干，一个用于分支，另一个用于标签，依此类推。但是没有一个会被“隐式选择”。

正如 Paul Sasik 所引用的：`switch`例如，将允许只有一个工作副本，比如主干，然后将该本地工作副本与远程存储库中的目标分支或标签合并。`switch`仅同步本地和远程之间的差异，因此避免对解决方案进行全面检查。过去执行命令后，工作副本上的每一次进一步提交都将发生在已切换到的远程存储库文件夹中，该文件夹已成为目标。无论该本地文件夹的初始签出是什么。

# ios - Ad hoc OTA 部署可在所有 ipad 上运行，除了带有 IOS 6 的 iPad 3

> ID：13163165
> 
> 赞同：1
> 
> 时间：2012-10-31T17:06:16.330
> 
> 标签：ios, ipad, ios6, ipa, ipad-3

我的公司遇到了一个奇怪的问题。我已经为我的 ipad 应用程序设置了一个构建，它是使用 AD hoc 配置文件构建的。我按照有关如何设置的所有说明进行操作，并且可以正确使用配置文件和其他 5 台 ipad 的应用程序。我注意到的是，由于某种原因，它不能在带有 IOS6 的 iPad 3 上运行。这是我在尝试时在控制台中遇到的错误：

```
Oct 31 12:00:56 Scotts-iPad SpringBoard[66] <Warning>: could not save thumbnail for downloading icon: image=(null) path='/var/mobile/Library/SpringBoard/DownloadingIconImageCache/com.localbix.online.ipad-9885BA22-13CA-4388-96A0-08EDCABF459E'
Oct 31 12:00:56 Scotts-iPad SpringBoard[66] <Warning>: could not save thumbnail for downloading icon: image=(null) path='/var/mobile/Library/SpringBoard/DownloadingIconImageCache/com.localbix.online.ipad-5C37022E-5875-4C48-A135-03ADD4AA75B8'
Oct 31 12:00:56 Scotts-iPad installd[30] <Error>: 0x343000 handle_install: Install of "/var/mobile/Media/Downloads/8020495531107338408/6723207522652074632" requested by itunesstored
Oct 31 12:00:56 Scotts-iPad installd[30] <Error>: 0x343000 extract_package: Could not extract archive
Oct 31 12:00:56 Scotts-iPad installd[30] <Error>: 0x343000 stage_package: Could not extract /var/mobile/Media/Downloads/8020495531107338408/6723207522652074632 to /var/tmp/install_staging.oIwDCd/foo_extracted
Oct 31 12:00:56 Scotts-iPad installd[30] <Error>: 0x343000 MobileInstallationInstall_Server: Could not stage the package
Oct 31 12:00:56 Scotts-iPad itunesstored[64] <Error>: 0x1c65000 MobileInstallationInstall: failed with -1
Oct 31 12:00:56 Scotts-iPad installd[30] <Error>: 0x343000 handle_install: API failed
Oct 31 12:01:05 Scotts-iPad profiled[4231] <Notice>: (Note ) profiled: Idled.
Oct 31 12:01:05 Scotts-iPad profiled[4231] <Notice>: (Note ) profiled: Service stopping. 
```

该证书确实列出了那些 ipad UUID，因此不是那个问题。关于可能是什么问题，我已经没有想法了。有任何想法吗？我和其他几个人谈过，他们说他们也注意到了最新 ipad 上的问题，但不知道。还有其他人遇到这个问题吗？

非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:19:53.817

我想出了答案。这就像我在 ipad 上的 wifi 设置定义了我们的公司代理服务器一样简单。由于这个 websense 阻止了 .ipa 文件的下载。因此，如果我使用相同的 URL 并将其放在桌面浏览器上，我会看到它被阻止了。关闭代理解决了这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:35:38.943

我有类似的东西，虽然没有 VPN，只是一个普通的 Wi-Fi 设置。运行 iOS6 的 iPhone4、iPhone5 和 iPad2 都可以毫无问题地安装 OTA。同时，运行 iOS5 的 iPhone4S 和 iPad1 无法安装应用程序 OTA。通过 iTunes 同步正常安装适用于所有设备。这显然是操作系统版本的问题，但我不知道下一步该去哪里寻找。它是在应用程序的构建设置中还是与服务器配置相关的东西（在这种情况下是 IIS）......

# c# - 如何创建虚拟音频设备

> ID：13163166
> 
> 赞同：8
> 
> 时间：2012-10-31T17:06:17.707
> 
> 标签：c#, audio, dll, virtual, device

我正在使用 C# 开发一个项目，我需要为其创建多个虚拟音频设备。稍后我将自己与他们进行一些切换。

也许有人知道一个不错的库，可以让我自己解决问题。创建音频设备的实例。（商业可以，但免费的.dll会更好）

另一种解决方案，这将是一个可选的解决方案，是找到一个根据我的需要创建虚拟音频设备的软件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T07:02:36.637

不幸的是，您将无法在 C# 中创建虚拟音频设备。您需要使用C/C++ 中的[Windows Driver Kit创建 Windows 设备驱动程序。](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)

在[这里](https://superuser.com/questions/117625/how-to-create-a-virtual-audio-device-and-stream-audio-input-with-it)查看一些指向商业虚拟音频设备的链接。

# django - 如何获取值为 0 的 models.DecimalField 的 Django 管理表单字段不使用 E 表示法

> ID：13163167
> 
> 赞同：4
> 
> 时间：2012-10-31T17:06:21.360
> 
> 标签：django, django-admin

我们使用 django admin 作为面向客户端的后端，因此我们需要使其用户友好。我有一个模型，其中包含一组代表营养数据的 DecimalFields。

所有字段看起来像这样：

```
g_carbs = DecimalField(max_digits=13, decimal_places = 8, null=True, blank=True) 
```

如果该字段留空，或者如果提供了非零值，则管理表单看起来和工作得很好。例如，对于像 10.5 这样的非空白、非零值，它会显示类似 的`10.50000000`内容，这很好。

问题是，对于任何 0 值，表单字段显示`0E-8` 的内容虽然在技术上是正确的，但不会为我的客户削减它，他们绝对不是科学家或工程师，并且不熟悉 E 表示法。

我没有使用自定义表单或任何自定义管理技巧。它正是 django 管理员为该模型自动渲染的内容。我正在考虑为此向 django 提交票证，但与此同时，我可以用自定义表单做些什么或解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T15:50:55.050

这就是最终对我有用的东西（到目前为止）。这既可以防止 E 表示法，也可以删除小数点后的尾随 0。

```
class NonscientificDecimalField(DecimalField):
    """ Prevents values from being displayed with E notation, with trailing 0's 
        after the decimal place  truncated. (This causes precision to be lost in 
        many cases, but is more user friendly and consistent for non-scientist 
        users)
    """
    def value_from_object(self, obj):
        def remove_exponent(val):
            """Remove exponent and trailing zeros.
               >>> remove_exponent(Decimal('5E+3'))
               Decimal('5000')
            """
            context = decimal.Context(prec=self.max_digits)
            return val.quantize(decimal.Decimal(1), context=context) if val == val.to_integral() else val.normalize(context)

        val = super(NonscientificDecimalField, self).value_from_object(obj)
        if isinstance(val, decimal.Decimal):
            return remove_exponent(val) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:53:20.533

一种简单的方法可能是继承 DecimalField 并更改其格式。

```
from django.db.models.fields import DecimalField

class NonscientificDecimalField(DecimalField):
    def format_number(self, value):
        """
        Overrides DecimalField's usual format_number by making sure 
        that the result is never in exponential notation for zero.
        """
        if value == 0:
            return "0.00000000"
        else:
            return super(DecimalField, self).format_number(value) 
```

顺便说一句，您不应该将此作为 Django 错误提交 - 这是 Python 小数的工作方式，与 Django 几乎没有关系。打开一个shell并尝试`str(Decimal("0.00000000"))`，你会看到`Decimal('0E-8')`。

如果你想`10.50000000`显示为`10.5`，你可以调用`normalize`你的小数。这也将解决您的`0E-8`问题：

```
import decimal
from django.db.models.fields import DecimalField

class NonscientificDecimalField(DecimalField):
    def format_number(self, value):
        """
        Overrides DecimalField's usual format_number to remove trailing zeroes.
        """
        if isinstance(value, decimal.Decimal):
            context = decimal.Context(prec=self.max_digits)
            value = value.normalize(context=context)
        return super(DecimalField, self).format_number(value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-02T14:12:29.307

似乎已经修复了它：[https](https://code.djangoproject.com/ticket/19220) ://code.djangoproject.com/ticket/19220但我不确定它是否完全有效，因为我使用的是 django 1.6.5 并且管理员显示`0E-8.00000000`或`0E-8`用于`0`.

```
models.DecimalField(max_digits=12, decimal_places=8, null=True) 
```

@Ben Roberts：你还有问题吗？

谢谢

# blackberry-10 - Blackberry 10 - 在后台运行应用程序

> ID：13163169
> 
> 赞同：3
> 
> 时间：2012-10-31T17:06:22.787
> 
> 标签：blackberry-10, blackberry-qnx

在新的黑莓 10 平台上，如何开发一个需要每 10 分钟左右联系服务器并接收来电的 VoIP 应用程序。我认为没有像Android平台这样的后台服务选项。用户是否可以让应用程序继续运行，如果可以，用户可以在不停止现有应用程序的情况下启动电子邮件等新应用程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T23:33:27.853

您可以在后台运行 BlackBerry 10 应用程序，完全没有问题。您需要做的就是`<permission>run_when_backgrounded</permission>`在您的`bar-descriptor.xml`. 这使用户知道您的应用程序需要在后台运行，并允许他们批准或拒绝它。

查看：[https](https://developer.blackberry.com/cascades/documentation/dev/fundamentals/index.html) ://developer.blackberry.com/cascades/documentation/dev/fundamentals/index.html了解更多信息。

# android - Phonegap android youtube视频流

> ID：13163170
> 
> 赞同：0
> 
> 时间：2012-10-31T17:06:23.920
> 
> 标签：android, cordova, youtube

我有 android 和 phonegap 的问题。我正在寻找从 youtube 加载在线视频流的最佳方法，我的代码如下：

视频不会加载，它会显示一个带有红色 youtube 按钮的屏幕，但视频永远不会在播放时加载...

非常感激您的帮忙..

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:27:44.400

如果您在 Android 上使用 HTML5 视频，Android 2.x 设备上的操作系统不支持它。试试这个原生插件：[https ://github.com/phonegap/phonegap-plugins/tree/master/Android/VideoPlayer](https://github.com/phonegap/phonegap-plugins/tree/master/Android/VideoPlayer)

# wpf - WPF 优化 UI 线程上的加载

> ID：13163173
> 
> 赞同：3
> 
> 时间：2012-10-31T17:06:39.037
> 
> 标签：wpf, wpf-controls, prism

我正在尝试优化我的 WPF prism 应用程序的加载时间。加载基本上是一个循环，使用反射创建 UI 元素的实例，然后将它们添加到选项卡控件中的主窗口（外壳）。

由于我们仅限于使用单个线程来创建所有对象，那么加速加载/创建更好用户体验的最佳方式是什么？

这些是我到目前为止的选择：

1.  使用延迟加载。仅在用户第一次单击它时加载选项卡。但这将在第一次打开时延迟 4-5 秒，因为它是按需初始化的。

2.  缓存所有反射调用。我实际上是这样做的，但它根本没有加快任何速度。大多数时间发生在控件的渲染过程中......

3.  ?

对于这个棘手的问题，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:59:42.857

你几乎被卡住了，因为你只能在主线程上加载对象，所以我认为你不会让它加载得更快。

你可以做的是分散用户的注意力：我有一个动画启动屏幕，它需要大约 10 秒才能完成动画序列。这有多种用途：

1.  它显示了用户的动作 - 所以他们有一个视觉提示，表明某事正在发生
2.  它分散了他们的注意力并填充了初始负载所占用的空间

为确保动画流畅，您需要创建第二个调度程序。这是我的做法：

```
public class AppEntry : Application
    {
        private static ManualResetEvent _resetSplashCreated;

        internal static Thread SplashThread { get; set; }

        internal static SplashWindow SplashWindow { get; set; }

        private static void ShowSplash()
        {
            SplashWindow = new SplashWindow();
            SplashWindow.Show();
            _resetSplashCreated.Set();
            Dispatcher.Run();
        }

        [STAThread]
        public static void Main()
        {
            _resetSplashCreated = new ManualResetEvent(false);
            SplashThread = new Thread(ShowSplash);
            SplashThread.SetApartmentState(ApartmentState.STA);
            SplashThread.IsBackground = true;
            SplashThread.Name = "Splash Screen";
            SplashThread.Start();

            _resetSplashCreated.WaitOne();

            var app = new App();
            app.DispatcherUnhandledException += new DispatcherUnhandledExceptionEventHandler(app_DispatcherUnhandledException);
            app.InitializeComponent();
            app.Run();

        }

        static void app_DispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
        {
           // MessageBox.Show(e.Exception.StackTrace);
        }
    } 
```

我在项目属性/应用程序选项卡中将 AppEntry 类设置为我的启动对象。
我在 App 中的 OnStartup 方法结束时关闭了初始屏幕：

```
 AppEntry.SplashWindow.Dispatcher.BeginInvoke(DispatcherPriority.Background,
                                                             new Action(() => AppEntry.SplashWindow.Close())); 
```

这更快吗？否 用户是否认为它更快？是的

有时，如果你不能给他们速度，你可以给他们活动。这是一个很好的安慰剂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T01:12:51.783

正如你所提到的，如果你的对象是 DependencyObjects，你就不能多线程。[Kent Boogart 讨论了这一点](http://kentb.blogspot.com.ar/2009/03/view-models-pocos-versus.html)。这就是为什么您必须利用[INotifyPropertyChanged](http://wpftutorial.net/INotifyPropertyChanged.html)并做 POCO 对象来保存你的数据。这样你就可以多线程来获取数据，然后将它们绑定到你的 UI。使用 DependencyObjects 的另一个缺点是您将应用程序过多地绑定到 WPF 框架（DependencyObject 是在 WPF 程序集的 System.Windows 命名空间中定义的类（不记得是 PresentationCore 还是 PresentationFramework））。如果重构不是一种选择，您将不得不考虑像 LastCoder 提出的解决方案。请注意，您将能够执行很少的多线程（如果有的话），因此您的应用程序不会一直响应非常快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T19:21:15.400

我会实现一个计时器，它会在每个滴答（迭代）时加载一些控件或选项卡。计时器将在与 UI 相同的线程上运行（它的控制消息将在 Windows 消息循环中排队）。完成所有工作后，您可以终止计时器。

计时器间隔和每个滴答要加载的控件数量将归结为使用测试；尝试像 100ms 和 2 个控件的滴答声，每秒将给您大约 20 个控件，因此如果您有 10 个选项卡，每个选项卡有 15 个控件，则需要大约 8 秒，但 UI 不应该锁定为糟糕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T18:48:35.577

加快加载速度的最佳答案是在构建可视化树时简单地隐藏容器。

这可以防止屏幕不断需要更新自身。

当所有元素都添加到可视化树中时，将容器可见性设置为可见会渲染选项卡容器一次。

我们还对选项卡控件项实现了一些简单的延迟渲染。

最终结果：加载时间从 2 分钟缩短到大约 20 秒。

# asp.net - 如何在.net 中动态地将这种效果应用于图像？

> ID：13163177
> 
> 赞同：1
> 
> 时间：2012-10-31T17:06:59.110
> 
> 标签：asp.net, image, 3d

所以我想创建在我的 asp.net 应用程序中上传的图像的缩略图，看起来像这样。我打算在上传时生成缩略图。最简单的方法是什么？

![在此处输入图像描述](../Images/9d187643f9dffc29963f962711e3730c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:24:00.280

一种方法：

使用您最喜欢的图像编辑器创建一个“模板”图像，包含白色背景、框边和阴影。

当图像上传到您的网站（或其他）时，使用`System.Drawing`命名空间执行以下操作：

*   加载您的模板图像
*   加载上传的图片
*   使用适当的变换矩阵在模板图像上绘制上传的图像
*   保存生成的图像/缩略图

# git - 当另一个客户端克隆存储库时，在存储库中编辑源代码是否安全？

> ID：13163184
> 
> 赞同：3
> 
> 时间：2012-10-31T17:07:21.970
> 
> 标签：git, version-control

我的另一台机器正在我的主机上克隆一个 repo，我想通过在主机 repo 上进行更改来进行多任务处理。

这会安全吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T17:16:41.763

是的，克隆存储库根本不会查看工作副本。否则无法克隆裸存储库。

即使您使用提交或重置等操作对实际存储库进行更改，它仍然是安全的。克隆完成时可能会稍微过时，但这与您在克隆完成后立即进行更改没有什么不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:19:46.593

克隆是对您正在克隆的存储库的只读操作。所以没有危险。此外，这些操作在 git 中是非常原子的，并且始终由 SHA1 完整性检查支持。因此，如果克隆正在抓取一个引用并且在克隆期间引用发生了变化，那么克隆将继续使用它最初抓取的值。要更多地了解这一点，请谷歌“有向无环图”以了解其工作原理。结构的简单性是 Git 如此成功的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T16:34:34.920

Mercurial 的答案是：

克隆时无法提交文件系统存储库。提交将等待消息

```
waiting for lock on repository ... held by ... 
```

# c# - Word 2010 表格

> ID：13163185
> 
> 赞同：0
> 
> 时间：2012-10-31T17:07:23.500
> 
> 标签：c#

我有一个充满书签的单词模板，但是在尝试插入表格时我被卡住了...首先我收到了一个 COMException 说请求的集合成员不存在..我认为这意味着书签是set 的名称与我现在的表名称不同..无论如何，表格根本不显示..我在数据输入表格之前设置了格式...
像这样：

```
 // Insert Table

            Word.Table tbl1 = this.Tables[1];
            Tables.Add(Range: tbl1.Range, NumColumns: 2, NumRows: 2);
            tbl1.Range.Font.Size = 10;
            tbl1.Range.Font.Name = "Georgia";
            tbl1.Range.Font.Bold.Equals(true);
            tbl1.Range.Font.ColorIndex = Word.WdColorIndex.wdBlue;
            tbl1.Range.Cells.Shading.Texture = Word.WdTextureIndex.wdTexture10Percent;
            tbl1.Range.Cells.Shading.BackgroundPatternColorIndex = Word.WdColorIndex.wdBlue;
            tbl1.Range.Cells.VerticalAlignment = Word.WdCellVerticalAlignment.wdCellAlignVerticalCenter;
            tbl1.Rows.SetHeight(RowHeight: 24, HeightRule: Word.WdRowHeightRule.wdRowHeightAtLeast);
            tbl1.Columns[1].SetWidth(ColumnWidth: 170, RulerStyle: Word.WdRulerStyle.wdAdjustNone);
            tbl1.Columns[2].SetWidth(ColumnWidth: 310, RulerStyle: Word.WdRulerStyle.wdAdjustNone);
            tbl1.Borders.InsideLineStyle = Word.WdLineStyle.wdLineStyleNone;
            tbl1.Borders.OutsideLineStyle = Word.WdLineStyle.wdLineStyleNone;

            // end of table insert 
```

然后填充表格的代码在......

```
 if (multipleLimits.Equals(false))
            {
                tbl1.Cell(1, 1).Range.Text = "Indemnity Limit:";
            }
            else
            {
                tbl1.Cell(1, 1).Range.Text = IndemlimitsText(iIndemnLimit).ToString();
            }

            switch (typeOfInsID)
            {
                case "4":
                    tbl1.Cell(1, 1).Range.Text = "Public/Products Liability:";
                    break;
            }

            tbl1.Cell(2, 1).Range.Text = "Excess:";

            if (multipleLimits.Equals(false))
            {
                tbl1.Cell(1, 2).Range.Text = sCurType + iIndemnLimit;
            }
            else
            {
                tbl1.Cell(1, 2).Range.Text = stripIndemLimitCode(iIndemnLimit).ToString();
            } 
```

等等，等等……
我的问题是，即使没有要解析的数据，表格是否应该显示……说我是否想逐行测试解析数据？或者填充表格的代码是否需要存在并正确才能显示表格？？？
我希望我没有啰嗦太多，把我的问题弄糊涂了……
谢谢大家！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:38:51.440

答案是肯定的，表格应该显示，即使所有单元格都是空的。我想你的范围是这里的问题，因为

```
object endOfDoc = "\\endofdoc";
object missing = System.Reflection.Missing.Value;
string totRows = 2;
string totColumns = 2;

word.Range wrdRng = doc.Bookmarks.get_Item(ref endOfDoc).Range;
oTable = doc.Tables.Add(wrdRng, totRows, totColumns, ref missing, ref missing); 
```

将包含 2 列和 2 行的表格添加到文档的末尾。您尝试添加到表格的范围（tbl1.Range），但这可能是表格本身内部的内部范围（可以说包含您的单元格）您想添加到段落或表格之外的其他内容。endOfDoc 是一个书签，可用于在文档末尾添加内容。

因为我不知道您使用的是什么模板，您可以先尝试一下，然后找出您需要的正确书签名称。这可以像上面代码中的 endOfDoc 一样定义，

# c# - 将 16 位字符串拆分为 4 部分并将它们存储在 C# 中的数组中

> ID：13163186
> 
> 赞同：4
> 
> 时间：2012-10-31T17:07:28.797
> 
> 标签：c#, string, variables, split

我有一个由 16 位数字（十六进制数）组成的字符串，它将作为一个大数字输入到文本框中。例如，“1111222233334444”。

我需要

*   读入这个数字，
*   将其分为四组，如 1111 2222 3333 4444。
*   将组存储到四个变量或数组中

我找到了一些方法来做到这一点，但他们只是写信给控制台。因此，在用户输入该数据后，我需要有类似的东西：

```
 string first = 1111; 
    string second = 2222; 
    string third = 3333; 
    string fourth = 4444. 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T17:11:17.223

您可以使用子字符串来做到这一点。

```
string strNumber = "1111222233334444";

string []strArr = new string[4];

for(int i=0; i < 4; i++)
{
   strArr[i] = strNumber.Substring(i*4, 4);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:19:13.990

这里是：

```
string initial_string = TextBox1.Text;  //read from textbox 

string [] number = new string[4];

number[0] = initial_string.Substring(0,4);
number[1] = initial_string.Substring(4,4);
number[2] = initial_string.Substring(8,4);
number[3] = initial_string.Substring(12,4); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T17:16:09.940

您可以使用 Regex 在一行中执行此操作：

```
var res = Regex.Split(str, "(?<=\\G\\d{4})"); 
```

**注意：**这在 Microsoft .NET 下运行良好，但不适用于 Mono 的 Regex 实现。

# git - 确定是否在 git 中的 2 次提交之间修改了文件

> ID：13163188
> 
> 赞同：2
> 
> 时间：2012-10-31T17:07:33.977
> 
> 标签：git, version-control, rake

我正在创建一个 rake 任务，当它在 HEAD 和 HEAD^1 之间发生更改时，它将在 S3 中重新上传文件。我应该使用哪个 git 命令来执行此操作。`hash-object`比较这两者有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:09:10.497

您可以使用

```
git log --stat HEAD^..HEAD 
```

获取已更改文件的列表。还有其他类似的修饰符`--raw`将确保显示完整路径。您还可以使用`--stat=200`来指示 log 假设输出为 200 个字符宽，然后仅截断路径。

要考虑的一件事是，有时您不会只有一个新的提交。您将不得不使用`HEAD@{1}`而不是`HEAD^`查看最后一次提交是什么。然后你需要使用

```
git diff --stat HEAD@{1}..HEAD 
```

`HEAD@{1}`被解释为“HEAD 上次指向的位置”。所以`HEAD@{2}`意思是“在你改变它两次之前 HEAD 在哪里”。如果您查看文档，`reflog`那里会进一步解释。

对于脚本，我会使用`--numstat`而不是，`--stat`因为它根本不缩写路径。您现在可以使用此列表仅移动那些文件或删除任何标记为已删除的文件。

您还可以比较每次提交的树对象，然后您可以递归地查看 SHA1 的不同之处。

补充一点，如果你在更新钩子中编写脚本，钩子的参数会给你`oldref`和`newref`分支名称，这样你就知道分支当前是什么以及它被设置为什么。

但这不是理想的。如果可以，请尝试覆盖整个工作树，以免自己头疼。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:25:02.150

如果要检查提交是否更改了单个已知文件，可以使用

```
git diff --quiet HEAD^ HEAD -- <filename> 
```

然后检查退出代码以确定它是否已更改，如果是，退出代码将为 1，如果未更改，则退出代码将为 0。使用此方法，您无需解析输出以查看它是否提及文件你关心的。

在这种情况下，亚当建议使用`HEAD@{1}`而不是`HEAD^`仍然值得考虑。

# c# - ItemList 在靠齐到一侧时消失

> ID：13163189
> 
> 赞同：0
> 
> 时间：2012-10-31T17:07:35.247
> 
> 标签：c#, windows-8

我的代码在下面，由于某种原因，当我将窗口捕捉到任何一侧（左侧或右侧）时，会发生一些奇怪的事情并且 ListView 中的内容消失了。我很确定 xaml 中出了点问题，但我不知道是什么：/

```
<common:LayoutAwarePage
    x:Name="pageRoot"
    x:Class="Jeans.reader"
    DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Jeans"
    xmlns:common="using:Jeans.Common"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>

        <!-- Collection of items displayed by this page -->
        <CollectionViewSource
            x:Name="itemsViewSource"
            Source="{Binding Items}"/>
    </Page.Resources>

    <!--
        This grid acts as a root panel for the page that defines two rows:
        * Row 0 contains the back button and page title
        * Row 1 contains the rest of the page layout
    -->
    <Grid Style="{StaticResource LayoutRootStyle}">
        <Grid.RowDefinitions>
            <RowDefinition Height="140"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="primaryColumn" Width="610"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Back button and page title -->
        <Grid x:Name="titlePanel">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button
                x:Name="backButton"
                Click="GoBack"
                IsEnabled="{Binding DefaultViewModel.CanGoBack, ElementName=pageRoot}"
                Style="{StaticResource BackButtonStyle}"/>
            <TextBlock x:Name="pageTitle" Grid.Column="1" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
        </Grid>

        <!-- Vertical scrolling item list -->
        <ListView
            x:Name="itemListView"
            AutomationProperties.AutomationId="ItemsListView"
            AutomationProperties.Name="Items"
            TabIndex="1"
            Grid.Row="1"
            Margin="-10,-10,0,0"
            Padding="120,0,0,60"
            ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
            IsSwipeEnabled="False"
            SelectionChanged="ItemListView_SelectionChanged"
            ItemTemplate="{StaticResource Standard130ItemTemplate}" SelectionMode="None" ItemClick="itemListView_ItemClick" IsItemClickEnabled="True"/>

        <!-- Details for selected item -->
        <ScrollViewer
            x:Name="itemDetail"
            AutomationProperties.AutomationId="ItemDetailScrollViewer"
            Grid.Column="1"
            Grid.RowSpan="2"
            Padding="70,0,120,0"
            DataContext="{Binding SelectedItem, ElementName=itemListView}"
            Style="{StaticResource VerticalScrollViewerStyle}">

            <Grid x:Name="itemDetailGrid" Margin="0,60,0,50">
            <WebView x:Name="detailsWeb"/>

            </Grid>
        </ScrollViewer>

        <VisualStateManager.VisualStateGroups>

            <!-- Visual states reflect the application's view state -->
            <VisualStateGroup x:Name="ApplicationViewStates">
                <VisualState x:Name="FullScreenLandscapeOrWide"/>

                <!-- Filled uses a simpler list format in a narrower column -->
                <VisualState x:Name="FilledOrNarrow">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="primaryColumn" Storyboard.TargetProperty="Width">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="420"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="ItemTemplate">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource Standard80ItemTemplate}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="Padding">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="60,0,66,0"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <!--
                    The page respects the narrower 100-pixel margin convention for portrait, and the page
                    initially hides details to show only the list of items
                -->
                <VisualState x:Name="FullScreenPortrait">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>

                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="Padding">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="100,0,90,60"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <!--
                    When an item is selected in portrait the details display requires more extensive changes:
                     * Hide the master list and the column is was in
                     * Move item details down a row to make room for the title
                     * Move the title directly above the details
                     * Adjust margins and padding for details
                 -->
                <VisualState x:Name="FullScreenPortrait_Detail">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>

                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="primaryColumn" Storyboard.TargetProperty="Width">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="(Grid.Row)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="1"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="(Grid.RowSpan)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="1"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="titlePanel" Storyboard.TargetProperty="(Grid.Column)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="1"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetailGrid" Storyboard.TargetProperty="Margin">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0,0,0,60"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="Padding">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="100,0,90,0"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <!--
                    The back button and title have different styles when snapped, and the page
                    initially hides details to show only the list of items
                -->
                <VisualState x:Name="Snapped">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                        </ObjectAnimationUsingKeyFrames>

                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="primaryColumn" Storyboard.TargetProperty="Width">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="320"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="ItemTemplate">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource Standard80ItemTemplate}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="Padding">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="20,0,0,0"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <!--
                    When snapped and an item is selected the details display requires more extensive changes:
                     * Hide the master list and the column is was in
                     * Move item details down a row to make room for the title
                     * Move the title directly above the details
                     * Adjust margins and padding for details
                     * Use a different font for title and subtitle
                     * Adjust margins below subtitle
                 -->
                <VisualState x:Name="Snapped_Detail">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                        </ObjectAnimationUsingKeyFrames>

                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="primaryColumn" Storyboard.TargetProperty="Width">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="(Grid.Row)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="1"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="(Grid.RowSpan)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="1"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="titlePanel" Storyboard.TargetProperty="(Grid.Column)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="1"/>
                        </ObjectAnimationUsingKeyFrames>
                        <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetailTitlePanel" Storyboard.TargetProperty="(Grid.Row)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetailTitlePanel" Storyboard.TargetProperty="(Grid.Column)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
                        </ObjectAnimationUsingKeyFrames>-->
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="Padding">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="20,0,20,0"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetailGrid" Storyboard.TargetProperty="Margin">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0,0,0,60"/>
                        </ObjectAnimationUsingKeyFrames>
                        <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemTitle" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource TitleTextStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemTitle" Storyboard.TargetProperty="Margin">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemSubtitle" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource CaptionTextStyle}"/>
                        </ObjectAnimationUsingKeyFrames>-->
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid></common:LayoutAwarePage> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:23:21.693

您应该尝试在 Blend 中编辑它，它非常适合在 UI 上工作。打开相关页面时，选择左上角的设备选项卡，在视图中选择“捕捉”，如果勾选“启用状态记录”复选框，则可以编辑列表框在捕捉视图中的外观。该项目可能已经为快照视图定义了一些视觉状态。

要进入 Blend，请右键单击项目并选择“在 Blend 中编辑”

# c++ - Windows 上的默认 64 位地址数据类型

> ID：13163190
> 
> 赞同：0
> 
> 时间：2012-10-31T17:07:36.810
> 
> 标签：c++, c, 64-bit, memory-address

我需要在 Windows 7 64 位上操作 64 位地址，我目前正在使用类似的东西

```
BYTE m_myAddress[8]; 
```

但如果我需要添加`0x60`到地址，它变得相当棘手。我可以转换它，但我想问什么数据类型最适合这个。

应该使用什么数据类型来存储 64 位地址？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T17:09:19.343

我会认为`void*`或者`char*`是最自然的。`char*`特别是如果您想对地址进行算术运算。

```
char* addr = ...;
...
addr += 0x60; 
```

# php - 在类别上显示不带最后一个逗号

> ID：13163200
> 
> 赞同：0
> 
> 时间：2012-10-31T17:08:20.877
> 
> 标签：php, mysql, show

我有这个代码：

```
<?
$kate=mysql_query("select category_id from movies_cat where movie_id='$ids'");
   while($cat=mysql_fetch_array($kate)){
      $kate2=mysql_query("select name_cat from categories where id='$cat[category_id]'");
        while($cat2=mysql_fetch_array($kate2)){
            print $cat2['name_cat'];
    }

   }

?> 
```

现在在此显示类别：ActionsComedyMystery，我想显示 Actions,Comedy,Mystery（末尾没有逗号）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:10:40.607

将类别插入数组并使用`implode()`函数连接它们。

```
$result = implode(",", $items); 
```

用你的例子：

```
<?
$items = Array();

$kate=mysql_query("select category_id from movies_cat where movie_id='$ids'");
while($cat=mysql_fetch_array($kate)){
  $kate2=mysql_query("select name_cat from categories where id='$cat[category_id]'");
  while($cat2=mysql_fetch_array($kate2)){
    $items[] = $cat2['name_cat'];
  }
}

echo implode(",", $items);
?> 
```

**编辑：**使用 Mysqli 并加入：

```
<?
$db = @new mysqli( 'host', 'user', 'pass', 'database' );

$items = Array();

$kate = $db->query("select movies_cat.category_id, categories.name_cat from movies_cat, categories where movies_cat.category_id = categories.name_cat AND WHERE movie_id='$ids'");
while($cat = $kate->fetch_array($kate)){
    $items[] = $kate['name_cat'];
}

echo implode(",", $items);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:11:26.987

您可以将类别保存到 var 然后在结束时回显该变量省略最后一个字符，如下所示：

```
$out = '';
$kate=mysql_query("select category_id from movies_cat where movie_id='$ids'");
   while($cat=mysql_fetch_array($kate)){
      $kate2=mysql_query("select name_cat from categories where id='$cat[category_id]'");
        while($cat2=mysql_fetch_array($kate2)){
            $out .= $cat2['name_cat'] . ',';
    }

   }

echo substr($out,0, -1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:13:56.850

首先定义一个变量。使用 PDO 代替 mysql_query。尝试优化你的逻辑。

```
$category = "" 
```

现在，

```
$kate=mysql_query("select category_id from movies_cat where movie_id='$ids'");
   while($cat=mysql_fetch_array($kate)){
    $kate2=mysql_query("select name_cat from categories where id='$cat[category_id]'");
    while($cat2=mysql_fetch_array($kate2)){
        $category .= $cat2['name_cat'].",";
   }

 }

echo substr_replace($category ,"",-1); 
```

# javascript - onclick 中的两个函数 - 第二个中的 Ajax 调用（跨浏览器）

> ID：13163201
> 
> 赞同：0
> 
> 时间：2012-10-31T17:08:23.367
> 
> 标签：javascript, html, ajax, cross-browser

我有

```
<a href="url" onclick="var msg = confirm('Confirm?'); submit(msg, event);">Click me</a> 
```

我想要做的是获取确认框结果（真/假），将其传递给提交按钮，然后如果它为假则终止 href 调用。

我让它在我的开发环境中工作，但是当我将它加载到跨浏览器场景中时，第二个调用不起作用：

```
function submit(msg, evt) {

     if(msg == true) {
         $.ajax({
             type:"POST",
             data:{answer:'Correct'},
             url:'https://myurl/p'
          });
     }
     else { evt.preventDefault(); return false; }
} 
```

传递的 URL 只是 URL，没有数据（在生产中）。这个确切的代码在我的环境中运行良好，但在跨浏览器场景中它失败了。如果我删除确认框，一切正常。

我感觉它与取消确认框时的 preventDefault 调用有关。是否会 preventDefault 禁用具有相同链接的下一个呼出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:14:00.767

首先，请不要使用内联事件处理程序，您可以从标记中删除它并在它所属的 js 中处理它：

HTML：

```
<a href="url" id="myanchor">Click me</a> 
```

JS：

```
anchor = $('#myanchor')[0];
anchor.on('click',function(){
    var msg = confirm('Confirm?'); 
    submit(msg, event);
}); 
```

其次，如果 msg 为真，则 ajax 调用会立即被页面重定向中断，这没有多大意义。我相信您希望在 ajax 调用完成后进行重定向，在这种情况下您应该使用：

```
function submit(msg, evt) {

     if(msg == true) {
         $.ajax({
             type:"POST",
             data:{answer:'Correct'},
             url:'https://myurl/p',
             complete: function(){window.location="url";}
          });
     }
     evt.preventDefault();
     return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:19:53.570

```
<a href="url" ID="myUrlID">Click me</a>

$(function(){
    $("#myUrlID").click(function(event){
        event.preventDefault();

        var msg = confirm('Confirm?');

        if(msg == true) {
            $.ajax({
                type:"POST",
                data:{answer:'Correct'},
                url:'https://myurl/p'
            });
        }
    });
}); 
```

# c# - 使用MVC通过url传递参数？

> ID：13163202
> 
> 赞同：2
> 
> 时间：2012-10-31T17:08:32.253
> 
> 标签：c#, html, asp.net-mvc, razor, asp.net-mvc-routing

我知道你可以通过 url 传递参数，`.com/MyPage/?controlID=5`但是你怎么能用类似的东西`.com/MyPage/5`呢？因此不需要变量名或问号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:12:48.650

您将定义自定义路由，或使用模型绑定来获得预期效果。在您的情况下，路线将类似于：

```
routes.Add("someRoute",
    "{controller}/{action}/{controlId}",
    new { controller = "Home", action = "Index", controlId = UrlParameter.Optional }
    );

public ActionResult Index(int? controlId)
{
} 
```

现在，这条路线的唯一“陷阱”是，如果您还指定了默认路线，这两条路线将发生争用，而您定义的第一个路线将获胜。如果存在某种形式的区分值（例如，该 controlId 始终与某种模式匹配），那么您始终可以向路由添加 HttpRouteConstraint 以区分您的新路由和默认路由。

或者，如果您仍在使用默认路由，您可以将操作方法​​上的参数重命名为 be `id`，并将查询字符串键更改为“id”：

```
public ActionResult Index(int? id)
{
   // Do Stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:10:55.037

在 MyPageController 中创建一个方法：

```
public ActionResult Index (int id)
{
} 
```

这将适用于默认路由

# ssis - Biztalk 和 SSIS 之间的界限模糊

> ID：13163204
> 
> 赞同：5
> 
> 时间：2012-10-31T17:08:35.707
> 
> 标签：ssis, biztalk, biztalk-2010

我正在构建一个从遗留应用程序接收位置平面文件的应用程序，对于每个详细信息行，我需要在第三个应用程序中搜索一些数据，然后填写我的数据库。如果文件中有任何格式错误的行，我需要停止处理并记录格式错误的字符串的行和位置。

至少现在，这些文件最多。50MB。

我很困惑谁最适合这种情况，Biztalk 和 SSIS 具有相似的功能，而且据我所知，两者都适合这种情况。这是一项我可以充分利用 Biztalk 的任务，还是我应该使用 ETL 解决方案（集成服务）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T11:42:27.073

我通常推荐 BizTalk 左、右和中，但在这种情况下，我会选择 SSIS，原因有两个：

1.  考虑到 BTS 处理文件中每条记录的方式，无论您在 BizTalk 上投入多少资源，在 50Mb 以上的文件上，您都将从 SSIS 中获得更好的性能。当然，这里有一些策略，但 SSIS 会胜出（尽管我认为无论您选择哪种解决方案，Web 服务都可能成为您的瓶颈）；和

2.  除非您编写自定义的平面文件反汇编程序（这几乎是火箭科学，BizTalk 的上帝领域），否则标准反汇编程序将在到达格式错误的行时简单地停止，将错误记录到事件日志中，并且不会进行进一步的消息处理.

顺便说一句，我参与了太多项目，其中客户有一个用 BizTalk 编写的解决方案，其中正在执行批处理操作。最初的开发和测试是在平面文件上完成的 c. 1Mb - 10Mb。当 50Mb - 100Mb+ 的文件需要这么长时间来处理时，客户就会感到困惑！

在项目开始时为问题选择正确的解决方案（恕我直言，SSIS）要好得多，而不是在不合适的产品上使用解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-31T17:45:08.297

我可能会在 SSIS 中这样做。它似乎是一个 ETL 工作。考虑到长期数据源，BizTalk 可能会为您提供更好的灵活性，但如果您说它是一个 Web 服务，那么这可以在 SSIS 中完成。

一般来说，SSIS = 批处理和直接数据翻译。BizTalk = 可能需要或可能不需要同步的消息传递/水平系统请求/响应。

但不要相信我的话。包括工作量、软件成本（如果重要）以及此过程的寿命。

# windows - 在 Windows 中使用 FreeNAS 而不是共享磁盘的好处

> ID：13163206
> 
> 赞同：0
> 
> 时间：2012-10-31T17:08:36.730
> 
> 标签：windows, networking, nas

我可以使用 Microsoft Windows 操作系统并将一个磁盘作为共享磁盘。网络中的任何人都可以访问它。取而代之的是，我可以使用 FreeNAS 并为我的网络制作网络附加存储。Apple Windows 或 Linux 可以访问此存储。那没问题。但是使用 NAS 有什么好处呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T17:16:05.753

使用 NAS 的好处是：-

*   以经济实惠的方式增加容量
*   使用现有网络从任何 PC 或 Mac 计算机存储和访问文件，无需多个硬盘驱动器
*   与其他方（供应商、客户）共享容量
*   提供可自动化的全面防护 (RAID) 中央备份，以提供额外的数据保护
*   通过网络共享 USB 打印机
*   自动持续备份您的数据，让您高枕无忧，我们所有的文件都是安全可靠的

查看此链接：- [http://www.inc.com/articles/201107/benefits-of-network-attached-storage-and-how-to-set-one-up.html](http://www.inc.com/articles/201107/benefits-of-network-attached-storage-and-how-to-set-one-up.html)

# php - Cookie 超载创建错误请求，无法使用 php 或 js 删除

> ID：13163209
> 
> 赞同：0
> 
> 时间：2012-10-31T17:08:55.087
> 
> 标签：php, javascript, cookies, http-headers, akamai

网站经常出现 HTTP400 Bad Request 错误，这是由 2 个 cookie 太大引起的。

我使用 livestream.com 播放实时视频（使用 Flash），似乎他们使用 Akamai Analytics 为我的域设置 4 个 cookie。clientLastHTimes clientLastPTimes AkamaiAnalytics_VisitIsPlaying AkamaiAnalytics_VisitLastCloseTime

前两个是在上次崩溃时出现超过 8000 个字符的问题。

所以尝试了 php 的方式来删除这些 cookie 这样做

```
setcookie(
  'clientLastPTimes', '', time() - 3600, '/','mydomain.com', false, false
); 
```

或者

```
setcookie('clientLastPTimes', '', 1); 
```

不工作。

然后尝试在页面加载和卸载时对 Javascript 执行相同的操作。

```
function Delete_Cookie( name, path, domain ) {
  document.cookie=name+"="
  + ((path) ? ";path="+path:"")
  + ((domain)?";domain="+domain:"") 
  + ";expires=Thu, 01 Jan 1970 00:00:01 GMT";
}

Delete_Cookie('clientLastPTimes', '/', 'mydomain.com') 
```

这些该死的饼干还在。有时它会创建其他具有相同名称的 cookie。发现这通常是由于路径或域略有不同。也试图只编辑他们的内容，而不设置向后的日期。

所以真的很挣扎这个。如果您知道如何删除这些 cookie 或做任何其他事情来避免 HTTP400 cookie 过载......我会非常感激。

非常感谢

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:20:00.437

试试下面的代码。还要注意以下几点：[https ://stackoverflow.com/a/6319162/881551](https://stackoverflow.com/a/6319162/881551)

```
<?php

// I am using a larger expiration to account for server timezone differences.
// http://php.net/manual/en/function.setcookie.php#96813

$cookies = array(
    'clientLastHTimes', 
    'clientLastPTimes', 
    'AkamaiAnalytics_VisitIsPlaying', 
    'AkamaiAnalytics_VisitLastCloseTime'
);

foreach ($cookies as $cookie) {
    if (isset($_COOKIE[$cookie])) {
        $_COOKIE[$cookie] = '';
    }
    setcookie($cookie, "", time() - 90000);
    setcookie($cookie, "", time() - 90000, "/", $_SERVER['HTTP_HOST'], 0); // just in case
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:04:44.063

所以对于任何可能有类似问题的人......我找到了问题的根源，cookie删除并没有真正起作用。这是 Chrome 的问题，当用户存在时，所有浏览器都会终止会话 cookie，但默认情况下不是 chrome。因此需要在 chrome 中添加选项来终止特定站点的会话。有点疯狂，但这是谷歌为恢复浏览器关闭时所做的选择。

# javascript - 使用 jquery 切换 LinkBut ton 的启用/禁用状态

> ID：13163218
> 
> 赞同：1
> 
> 时间：2012-10-31T17:09:28.247
> 
> 标签：javascript, jquery, asp.net, .net, html

我有一个需要使用 jquery 启用或禁用的 LinkBut​​ton（最初禁用），但似乎使用我正在使用的方法禁用按钮会删除 href 属性，因此当我重新启用它时，按钮看起来已启用，但它不可点击。

```
<asp:LinkButton Id="lbSave" runat="server" Text="Save" Enabled="False" ClientIDMode="Static" />

Disable:
$('#lbSave').attr('disabled', 'disabled');

Enable:
$('#lbSave').removeAttr('disabled'); 
```

启用/禁用 LinkBut​​tons 的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:23:08.020

问题是客户端浏览器中控件的 id**不是** `lbSave`，但 WebForms 会将其修改为类似`ctl00_nameofanynestedaspnetcontainercontrols_morenestedcontainernames_lbSave.`

Praveen 建议的解决方法是，不要尝试通过 id 查找控件，而是给它一个唯一的类名 - 网络表单不会破坏 - 瞧，问题就解决了。

另一种方法是让 asp.net 在您的标记中为您插入正确的 id：

启用： $('# **<%=** lbSave.ClientID **%>** ').attr('disabled', '');

禁用： $('# **<%=** lbSave.ClientID **%>** ').removeAttr('disabled');

（如果您使用的是 Asp.Net 4 WebForms 这个页面[http://weblogs.asp.net/scottgu/archive/2010/03/30/cleaner-html-markup-with-asp-net-4-web-forms -client-ids-vs-2010-and-net-4-0-series.aspx](http://weblogs.asp.net/scottgu/archive/2010/03/30/cleaner-html-markup-with-asp-net-4-web-forms-client-ids-vs-2010-and-net-4-0-series.aspx)为您提供了另一种更简单的解决方案）。

但是如果你在 Asp.Net 4 中做新项目，你真的很想使用 Asp.Net MVC，所有这些问题都会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:13:41.403

您可以执行以下操作：

```
<asp:LinkButton Id="lbSave" runat="server" Text="Save" Enabled="False" CssClass="lbSave" /> 
```

禁用：

```
$(".lbSave").attr("disabled", "disabled"); 
```

使能够：

```
$(".lbSave").removeAttr("disabled"); 
```

希望这可以帮助！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T17:16:37.127

试试这个[链接 使用 jQuery 禁用超链接](https://stackoverflow.com/questions/5085584/disable-a-hyperlink-using-jquery)

所以你可以试试

$('#<%= lbSave.ClientID %>').bind('click', false);

启用

$('#<%= lbSave.ClientID %>').unbind('click', false);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T17:54:23.317

在 ASP.NET LinkBut​​ton 上设置 Enabled=False 会删除 href 属性，因此 jquery 永远无法重新启用它。所以这是一个适合我的解决方案：

```
In javascript:
$(document).ready(function() {
  _href = $('#lbSave').attr('href');
  $('#lbSave').attr('disabled', 'disabled');
  $('#lbSave').removeAttr('href');
});

Disable:
$('#lbSave').attr('disabled', 'disabled');
$('#lbSave').removeAttr('href');

Enable:
$('#lbSave').removeAttr('disabled');
$('#lbSave').attr('href', _href); 
```

# angularjs - AngularJS ngRepeat 未正确更新显示

> ID：13163227
> 
> 赞同：4
> 
> 时间：2012-10-31T17:10:02.467
> 
> 标签：angularjs, plupload

我有一个页面，我正在使用 plupload 上传文件并且遇到一个奇怪的问题，即 ng-repeat 没有正确更新。以下是相关代码：

```
<div ng:app>
  <div name="myForm" ng-controller="Ctrl">
    <input ng-model="test" type="text" />{{test}}<div id="container" class="controls">
    <div id="filelist">
      <div ng-repeat="file in filesToUpload">{{file.name}} ({{file.size}}) <b>{{file.percent}}</b></div>
      </div>
      <br />
      <a id="pickfiles" href="#">[Select files]</a>
    </div>
  </div>
</div>​

function Ctrl($scope) {
    $scope.test = '';$scope.filesToUpload = [{id: 1, name: 'test', size: '123kb'}];

    $scope.addItem = function(object) {
        $scope.filesToUpload.push(object);
    }

    $scope.uploader = new plupload.Uploader({
        runtimes : 'html5,flash,browserplus,gears',
        browse_button : 'pickfiles',
        container : 'container',
        max_file_size : '10mb',
        url : 'upload.php',
        flash_swf_url : '/plupload/js/plupload.flash.swf'
    });

    $scope.uploader.init();

    $scope.uploader.bind('FilesAdded', function(up, files) {
        $scope.filesToUpload = [];
        $.each(files, function(i, file) {
            $scope.addItem({
                id: file.id,
                name: file.name,
                size: plupload.formatSize(file.size)
            });
        });

        console.log($scope.filesToUpload);

        up.refresh(); // Reposition Flash/Silverlight
    });
}​ 
```

这是一个精简的 jsfiddle，显示了正在发生的问题：

[http://jsfiddle.net/9HuUC/](http://jsfiddle.net/9HuUC/)

要重现此问题，请执行以下操作：

1.  单击 [选择文件] 并选择一些文件（注意您在输出的任何位置都看不到文件）
2.  在输入框中键入任何字符（神奇地出现您选择知道的文件）

什么会导致这种行为？我的意思是我知道数据已正确设置在 $scope.filesToUpload 中，因为我在那里有 console.log() ，甚至在 Batarang 中检查了它，它在那里看起来很好，但由于某种原因，需要更新其他内容以进行显示要被更新。

有趣的是，我有另一个 ng-repeat 在同一页面上运行良好。我想知道它是否与代码的位置有关（在上传程序的 FilesAdded 事件中）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T17:25:59.237

问题是由于 FilesAdded 回调在 AngularJS 范围之外执行（由上传者调用），因此不会触发范围更新。

要解决这个问题，只需`$scope.$apply`在回调中添加调用，封装您现有的代码：

```
$scope.uploader.bind('FilesAdded', function(up, files) {
    $scope.$apply( function() {
        $scope.filesToUpload = [];
        $.each(files, function(i, file) {
            $scope.addItem({
                id: file.id,
                name: file.name,
                size: plupload.formatSize(file.size)
            });
        });

        console.log($scope.filesToUpload);

        up.refresh(); // Reposition Flash/Silverlight
    });
}); 
```

通过此更新，它可以正常工作。参考见*AngularJS官方文档*，**scope**对象 的**$apply**方法：http: [//docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$rootScope.Scope

# .net - DynamoDB 忽略空 PrimitiveList

> ID：13163230
> 
> 赞同：1
> 
> 时间：2012-10-31T17:10:20.513
> 
> 标签：.net, amazon-web-services, amazon, amazon-dynamodb

我在 DynamoDB 中保存用户配置文件，并使用属性将 .net 类型转换为 dynamo 条目

所以这是我正在使用的转换器：

```
public class DictRoomClassHouseInfoConverter : IPropertyConverter
{
    ...

    public DynamoDBEntry ToEntry(object value)
    {
        var dictionary = value as Dictionary<RoomClass, HouseInfo>;

        if (dictionary == null)
        {
            throw new ArgumentException("Invalid type");
        }

        var entry = new PrimitiveList();

        foreach (var kvp in dictionary)
        {
            entry.Add(new Primitive { Value = string.Format("{0}|{1}|{2}", (int)kvp.Key, kvp.Value.House, kvp.Value.TimesSold) });
        }

        return entry;
    }
} 
```

现在的问题是，当 Dictionary 为空并且`PrimitiveList`返回一个空时`ToEntry`，此 Dictionary 的更改将不会被保存

所以如果我做类似的事情：

```
var profile = GetProfile(id);
//profile.DictProp has 3 items; 

profile.DictProp.Clear();
//profile.DictProp has 0 items;

SaveProfile(profile);

var p = GetProfile(id);
//profile.DictProp has 3 items; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T21:19:09.470

@jtlebi 正确回答该服务不接受空字符串或空集。.NET SDK 以此为基础，如果您尝试保存一个空的 PrimitiveList，SDK 将忽略它并且属性不会改变。

但是，仍有一种方法可以删除属性：将 .NET 对象上的字段设置为 null 或从 IPropertyConverter.ToEntry 方法返回 null。然后，当您调用 DynamoDBContext.Save 时，SDK 将为该特定属性发出 DELETE 命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:57:51.220

`ValidationException`如果您尝试保存具有空属性的元素，DynamoDB 将始终返回 a 。

避免这种情况的唯一方法是在没有此字段的情况下保存项目。

这就是说，我不知道.NET SDK，但我很惊讶它不能自动处理这个？

有关 DynamoDB 棘手限制的列表，请参阅[http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/Limits.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/Limits.html)。

# php - 使用分页传递 $_GET（或 $_POST）变量（SESSION 不工作）

> ID：13163232
> 
> 赞同：1
> 
> 时间：2012-10-31T17:10:25.593
> 
> 标签：php, pagination

我知道这是一个常见问题，因为我在决定发布之前已经搜索了答案，但我似乎无法找到解决方案。

问题：我有一个用于搜索结果的分页脚本 (PHP)。显然很常见，第一页结果显示正常，然后在移动到第 2、3 页等时失败。

单击第 2、3 页等时，我在搜索中使用的每个变量都出现“未知索引”错误。

所以我从我的表单中 $_GET 这些变量：

```
$_SESSION['var1']= $_GET['var1'];
$_SESSION['var2']= $_GET['var2'];
$_SESSION['var3']= $_GET['var3']; 
```

需要注意的一点：我的header中已经启动了一个Session；我使用 $_GET 是因为如果用户“返回”，我不希望出现“重新提交”警告；变量都被清理了（只是没有在代码中显示，因为它已经足够长了）；我必须在 WHILE 循环中使用 $_GET 变量，因为它们计算每个结果的距离、年龄等。

我的分页脚本：

```
$limit = 4; 

$query = "SELECT COUNT(*) as num FROM $tableName";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages['num'];

$stages = 3;
$page = mysql_escape_string(isset($_GET['page'])) ? (int)$_GET['page'] : 1;
if($page) {
  $start = ($page - 1) * $limit; 
} else {
  $start = 0;   
}   

// Get page data
$query1 = "SELECT * FROM $tableName ORDER BY joindate DESC LIMIT $start, $limit";
$result = mysql_query($query1);

// Initial page num setup
if ($page == 0){$page = 1;}
$prev = $page - 1;  
$next = $page + 1;                          
$lastpage = ceil($total_pages/$limit);      
$LastPagem1 = $lastpage - 1;                    

$paginate = '';
if($lastpage > 1) {
$paginate .= "<div class = 'hp1col'><div class='paginate'>";
$pagetotal = $total_pages.' Results';

// Previous
if ($page > 1){
$paginate.= "<a href='$targetpage?page=$prev'>Previous</a>";
} else {
$paginate.= "<span class='disabled'>previous</span>";}

// Pages    
if ($lastpage < 7 + ($stages * 2))  // Not enough pages to breaking it up
{   
for ($counter = 1; $counter <= $lastpage; $counter++)
{
if ($counter == $page){
$paginate.= "<span class='current'>$counter</span>";
}else{ $paginate.= "<a href='$targetpage?page=$counter'>$counter</a>";}                 
}
}

// Next
if ($page < $counter - 1){ 
$paginate.= "<a href='$targetpage?page=$next'>Next</a>";
} else {
$paginate.= "<span class='disabled'>Next</span>";
}
$paginate.= "</div></div>";     
}

while($row = mysql_fetch_array($result))
{
if (($part1 >= $_SESSION['var1']) AND  ($part2 <= $_SESSION['var2']) AND ($part3 <= $_SESSION['var3'])) {
echo 
"[Results]  
}
}
echo $paginate; 
```

我尝试在这个 if 语句中开始一个新会话，但它没有帮助：

```
if ($page > 1){
$paginate.= "<a href='$targetpage?page=$prev'>Previous</a>";
} else {
$paginate.= "<span class='disabled'>previous</span>";} 
```

我希望有人能帮帮忙。我为问题中的代码板道歉，但我认为最好只是把所有东西都放好，希望有人能够提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:21:32.043

因此，您需要将这些查询参数传递到下一页。如果您的页面希望`$_GET['var1']`出现，但您没有`?var1=foo`在 URL 中，那么它显然不会工作。处理此问题的最简单方法是[`http_build_query`](http://www.php.net/http_build_query)：

```
printf('<a href="%s?%s">Next</a>',
       $targetpage,
       http_build_query(array('page' => 2) + $_GET)); 
```

这将保留所有当前值`$_GET`并向其中添加`page=2`参数。根据您的情况进行修改。

# highcharts - Highcharts，如何在任意时间启动 xAxis

> ID：13163233
> 
> 赞同：0
> 
> 时间：2012-10-31T17:10:28.110
> 
> 标签：highcharts

我有一个带有日期时间 xAxis 的折线图。我需要每 10 分钟显示一次刻度，因为我已将 tickInterval 设置为 10*60*1000，我的问题是我需要从第一个日期开始每 10 分钟显示一次刻度，例如，如果我的第一个点显示在 10 :33，我需要在 10:33、10:43、10:53 等显示刻度，但我所拥有的是 10:30、10:40、10:50 等的刻度，有什么办法可以做这个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:20:47.153

这并不是那么简单，因为当 x 轴是“日期时间”类型时，Highcharts 会自动确定要使用的标签：

“[在日期时间轴中，数字以毫秒为单位，刻度线放置在适当的值上，例如完整的小时或天](http://api.highcharts.com/highcharts#xAxis.type)”

要设置像“10:33”这样的标签，您需要创建自己的类别。幸运的是，这些可以简单地从您的数据和所需的时间间隔中得出。

这是一个工作示例：http: [//jsfiddle.net/Rt7ZV/](http://jsfiddle.net/Rt7ZV/)

我们只取给定的开始日期、间隔和点数，并构建一个类别数组，用作 x 轴标签。

```
function getTimes(numTimes, interval) {

    var ms = (new Date(2012, 02, 30, 10, 33)).getTime();
    var times = [];
    var startDate = new Date(ms);
    times.push(startDate.getHours() + ":" + startDate.getMinutes());

    for (var i = 1; i< numTimes; i++)
    {
        ms += interval;
        var nextTime = (new Date()).setTime(ms);
        var nextDate = new Date(nextTime);
        times.push(nextDate.getHours() + ":" + pad(nextDate.getMinutes(), 2));
    }

    return times;

}

function pad(num, size) {
    var s = num+"";
    while (s.length < size) s = "0" + s;
    return s;
}

var data = [1, 2, 3, 4, 5, 3, 2, 5, 7, 6, 4];
var interval = 10*60*1000
var timeCategories = getTimes(data.length, interval);

$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                zoomType: 'x',
                spacingRight: 20
            },
            title: {
                text: 'Time series'
            },
            xAxis: {
                categories: timeCategories,
                title: {
                    text: null
                },
                startOnTick: false
            },
            yAxis: {
                title: {
                    text: 'Exchange rate'
                },
                startOnTick: false,
                showFirstLabel: true
            },
            tooltip: {
                shared: true
            },
            legend: {
                enabled: false
            },

            series: [{
                type: 'line',
                name: 'time series',
                data: [
                    1, 2, 3, 4, 5, 3, 2, 5, 7, 6, 4
                ]
            }]
        });
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:12:32.510

我在 xAxis 上找到了 tickPositions 属性，该属性没有记录在 highcharts 上，仅在 highstock 上，但似乎在两者上都可以正常工作。使用此属性，您可以指定要打勾的值，并完美地解决我的问题。

# c# - 获取不同语言的系统时区

> ID：13163241
> 
> 赞同：14
> 
> 时间：2012-10-31T17:11:28.767
> 
> 标签：c#, asp.net, timezone

我目前正在获取所有时区的列表，如下所示：

```
var TheListOfAllTimezones = TimeZoneInfo.GetSystemTimeZones(); 
```

因此，例如，巴黎的时区`DisplayName`具有`W. Europe Standard Time`. 现在我如何用另一种语言获得这个列表？例如，对于法国的用户，我想显示`Heure Europe de l'Ouest`.

谢谢。

![在此处输入图像描述](../Images/bcb90c48544e84925ea9c7c78e713c8b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T20:43:27.103

**Changing the `CurrentCulture` doesn't work** as the information comes from the registry (XP) or from the Multilingual User Interface (MUI) DLL (Vista, Windows 7).

On Vista or Windows 7, you may install other languages and change the display language (*Region and Language* -> *Keyboards and languages* -> *Display language*). A reboot is required. This, and only this, will actually change the language used in `TimeZoneInfo`.

On Windows 7, only Ultimate and Enterprise allow the installation of other languages - by means of installing *Multilingual User Interface Packs*.

Once you installed other languages, you should be able to find the DLLs in the *system32* folder (look for `tzres`) and maybe export the resources with Visual Studio.

As to **credible/official sources** - how about [an article on msdn of the BCL Team](http://blogs.msdn.com/b/bclteam/archive/2007/06/07/exploring-windows-time-zones-with-system-timezoneinfo-josh-free.aspx):

> ...the display strings are loaded either from the **Multilingual User Interface (MUI) DLL**, tzres.dll, or straight from the registry, when MUI support is unavailable. MUI-enabled operating systems such as Windows Vista contain `MUI_Display`, `MUI_Std`, and `MUI_Dlt` keys, which are indirectly controlled by the operating systems regional settings. On down-level platforms such as Windows XP and Windows Server 2003, only the `Display`, `Std`, and `Dlt` keys exist. **The `Display`, `Std`, and `Dlt` key values are localized only in the default language of the operating system.**

So what did they write about `CurrentUICulture` ?

> Because of the Windows time zone registry architecture, **CurrentUICulture settings do not impact the values of these TimeZoneInfo properties**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:25:14.193

如果您的线程是法语（“fr-FR”），并且如果该语言是您的 Windows 版本的“本地”语言，`CurrentCulture`那么属性似乎将是法语。`StandardName``DaylightName`

**编辑：**

看起来改变`CurrentCulture`线程不会有帮助。时区都来自注册表（请参阅 Jim Mischel 的路径答案），看起来 Windows 安装的语言决定了这些值。ID（注册表路径中的键）始终为英文，而其他属性取决于 Windows 语言。

以下代码的输出是什么：

```
Console.WriteLine(CultureInfo.InstalledUICulture.DisplayName);

var tzi = TimeZoneInfo.FindSystemTimeZoneById("W. Europe Standard Time");
Console.WriteLine(tzi.Id);              // always English
Console.WriteLine(tzi.DisplayName);     // localized
Console.WriteLine(tzi.StandardName);    // localized
Console.WriteLine(tzi.DaylightName);    // localized 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:22:36.290

从[文档中](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.getsystemtimezones.aspx)：

> 此方法返回的集合使用当前区域性按显示名称排序。

在获取列表之前，您是否尝试过将当前文化更改为用户的文化？

那可能行不通。唯一可用的显示名称可能是已安装的 Windows 版本的显示名称。也就是说，如果您有美国英语版本的 Windows，则可能不存在法语显示名称。查看我的注册表 ( `HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Time Zones`)，我只看到英文名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T06:37:26.710

如何创建像“TimeZoneInfoExtension”这样的类，该类将具有名为 ToLocolizedString 的静态方法：

```
public static class TimeZoneInfoExtensions
{
    public static string ToLocalizedString(this TimeZoneInfo timeZone)
    {
        switch (timeZone.Id)
        {
            case "Dateline Standard Time":
                return i18n.DatelineStandardTime;

            case "UTC-11":
                return i18n.UTC11;

            case "Hawaiian Standard Time":
                return i18n.HawaiianStandardTime;

            case "Alaskan Standard Time":
                return i18n.AlaskanStandardTime;

            ....

            default:
                throw new NotImplementedException();
        }
    }
} 
```

其中 i18n 是一个有资源的类。是的，您必须手动填写翻译。但我只是在不同的系统语言中使用了类似的东西来生成翻译：

```
Regex rgx = new Regex("[ +-]");
foreach (var timeZone in TimeZoneInfo.GetSystemTimeZones())
{
    Console.WriteLine("  <data name=\"{0}\" xml:space=\"preserve\">", rgx.Replace(timeZone.Id, string.Empty));
    Console.WriteLine("    <value>{0}</value>", timeZone.DisplayName);
    Console.WriteLine("  </data>");
} 
```

然后你可以根据你的 CurrentCulture 来使用它，如下所示：

```
foreach (var timeZoneInfo in TimeZoneInfo.GetSystemTimeZones())
{
    Console.WriteLine(timeZoneInfo.ToLocalizedString());
} 
```

# facebook-graph-api - 蒙特利尔加拿大人队 Facebook Graph API 未返回任何帖子

> ID：13163245
> 
> 赞同：1
> 
> 时间：2012-10-31T17:11:48.610
> 
> 标签：facebook-graph-api, graph

我正在使用 Graph API 返回所有 NHL 球队的 Facebook 帖子。除了蒙特利尔加拿大人队不返回任何帖子外，每个团队都可以很好地返回帖子。我确认他们的墙上有帖子，并且我使用的 Facebook ID 是正确的（请参阅[此处](http://graph.facebook.com/110877132302973)）

当我尝试为加拿大人使用此链接时，我得到一个空的 JSON 列表： [https](https://graph.facebook.com/110877132302973/posts?access_token=(my) ://graph.facebook.com/110877132302973/posts?access_token=(my access token)&limit=10

任何帮助，将不胜感激！谢谢。

昊天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:22:45.973

该页面上的帖子都有自定义隐私设置 - 您需要确保您尝试使用满足他们应用的任何限制的用户的用户访问令牌来访问它们。

应用程序或页面访问令牌将无法查看帖子，不符合限制的用户的用户令牌也将无法查看

# build - 带有 Code::Blocks 的 Gtk+ 在构建时失败

> ID：13163246
> 
> 赞同：3
> 
> 时间：2012-10-31T17:11:51.137
> 
> 标签：build, compiler-errors, gtk, config, codeblocks

首先，我很抱歉我的英语不好，我是法国人。

我尝试使用 Code::Blocks 安装 Gtk+ 库，并且我创建了一个项目只是为了尝试使用这些东西。

所以，我使用了这个页面给出的方法： http: [//forums.codeblocks.org/index.php?topic=16468.0](http://forums.codeblocks.org/index.php?topic=16468.0)

我把这个测试代码放在 main.c 中：

```
#include <stdlib.h>
#include <gtk/gtk.h>

void OnDestroy(GtkWidget *pWidget, gpointer pData);

int main(int argc,char **argv)
{
    GtkWidget *pWindow;
    gtk_init(&argc,&argv);
    pWindow = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_position(GTK_WINDOW(pWindow), GTK_WIN_POS_CENTER);
    tk_window_set_default_size(GTK_WINDOW(pWindow), 320, 200);
    gtk_window_set_title(GTK_WINDOW(pWindow), "Chapitre Fenetre");
    g_signal_connect(G_OBJECT(pWindow), "destroy", G_CALLBACK(OnDestroy), NULL);
    gtk_widget_show(pWindow);
    gtk_main();
    return EXIT_SUCCESS;
}

void OnDestroy(GtkWidget *pWidget, gpointer pData)
{
    gtk_main_quit();
} 
```

我尝试构建，但在 Code::Blocks 构建日志中出现此错误：

**'mingw32-g++.exe -o "bin\Debug\Simulation POP.exe" obj\Debug\main.o -LC:/MinGW/lib -lgtk-win32-2.0 -lgdk-win32-2.0 -latk-1.0 的执行-lgio-2.0 -lpangowin32-1.0 -lgdi32 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lpango-1.0 -lcairo -lgobject-2.0 -lgmodule-2.0 -lgthread-2.0 -lglib-2.0 -lintl' 在 'C:\Users\ Habib\Documents\Simulation POP' 失败。**

拜托，你有解释吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:55:07.670

事实上，我卸载了 Code::Blocks、Gtk+ 和所有其他的东西，我只是像这样重新启动：

**(1)** C:\Program Files\Code::Blocks\ **(2)** C:\Program Files\Code::Blocks\Gtk+\

然后，我将路径 (2)\bin\ 放在变量路径环境中。我在没有教程的情况下配置了 Code::Blocks，只使用了 bin、gtk+ 和 lib 目录。我执行了 main.c Hello Word，一切都很好。如果有人有同样的问题，请给我发邮件或在同一主题中提问。

# jquery - 使用 jquery 在 div 中插入元素

> ID：13163247
> 
> 赞同：0
> 
> 时间：2012-10-31T17:12:04.320
> 
> 标签：jquery

我有 6 张使用 .cycle 的页面图片

主图在自动生成的#up div下，但是我想在#up图片中添加.thumbnail类或者插入

```
$(function() {
        $('#up').after('<ul id="slide">').cycle({
            fx:     'fade',
            speed:  'fast',
            timeout: 0,
            pager:  '#slide',
            pagerAnchorBuilder: function(idx, slide) {
                return '<li><a href="#"><img src="' + slide.src + '" width="100" height="100" /></a></li>';
            }
        });
        $('#up').children('img').addClass('.thumbnail');
    }); 
```

如果你想要一个好的笑声，这是我正在处理的页面 -

[http://homeplan.com/HPS%20LP/work.html](http://homeplan.com/HPS%20LP/work.html)

乔伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:15:53.327

你几乎做对了，使用时`addClass()`你不需要输入类的典型起始点，所以这样做：

```
$('#up').children('img').addClass('thumbnail'); 
```

# r - 是否可以在需要/加载包后覆盖对包（重新）安装的阻止？

> ID：13163248
> 
> 赞同：4
> 
> 时间：2012-10-31T17:12:04.377
> 
> 标签：r, installation, package, overriding

## 实际问题

是否可以在需要/加载包后覆盖对包（重新）安装的阻止？

我知道，一旦包被使用，阻止“真正”**重新安装**到加载包的**同一个**库是非常有意义的。但我的用例有点不同

## 背景

我喜欢拥有一个“沙盒库”来测试自己的包的想法。除了要测试的包之外，这些沙箱库还包含干净的基础 R 安装的所有基础包**以及**一些必要的 contrib 包，以便我的整个包构建和测试框架能够正常工作（例如`digest`，`stringr`等等）。但是，我的框架从标准库加载了后者的包，**然后**需要将它们安装到沙箱库 - 这被阻止了。因此，我的问题是是否可以覆盖它，因为我并没有真正做人们在实施该块时所想到的事情。

## 插图

指定两个库的路径

```
lib         <- file.path(R.home(), "library")
lib.sandbox <- file.path(tempdir(), "library") 
```

创建沙盒库

```
dir.create(lib.sandbox, showWarnings=FALSE) 
```

将包安装到标准库并加载它

```
install.packages("digest", lib=lib)
require("digest", lib.loc=lib) 
```

然后也安装到沙盒库

```
> install.packages("digest", lib=lib.sandbox)
Warning: package 'digest' is in use and will not be installed 
```

我的框架在加载某些也应该安装到沙盒库的包**之后计算出某些东西，所以我不能将“安装到沙盒库”步骤放在初始加载步骤之前。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:43:39.187

这是您在回答中建议的一般版本。这将在安装之前卸载包，然后从同一位置重新加载包。

```
install.packages.sandbox <- function(pkgs, lib, repos=getOption("repos"), ...) {
    if (is.null(repos)) 
        stop("Can't install from source. Need package name.")
    pkg.pos <- grep(pkgs, search())
    pkg.path <- searchpaths()[grep(pkgs, searchpaths())]
    in.use <- length(pkg.pos) > 0
    # detach
    if (in.use) do.call(detach, 
                  list(pkg.pos), 
                  envir=.GlobalEnv)
    # install
    utils::install.packages(pkgs, lib, repos, ...)
    # re-attach from original library location
    if (in.use) library(pkgs, 
                  character.only=TRUE, 
                  lib.loc=.libPaths()[sapply(.libPaths(), grepl, pkg.path)])
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:07:28.063

不是我在概念上追求的，而是一种实用的解决方法：在安装之前分离包

指定两个库的路径

```
lib         <- file.path(R.home(), "library")
lib.sandbox <- file.path(tempdir(), "library") 
```

创建沙盒库

```
dir.create(lib.sandbox, showWarnings=FALSE) 
```

将包安装到标准库并加载它

```
install.packages("digest", lib=lib)
require("digest", lib.loc=lib) 
```

拆包

```
detach(package:digest) 
```

然后也安装到沙盒库

```
> install.packages("digest", lib=lib.sandbox)
trying URL 'http://cran.at.r-project.org/bin/windows/contrib/2.15/digest_0.5.2.zip'
Content type 'application/zip' length 79053 bytes (77 Kb)
opened URL
downloaded 77 Kb

package 'digest' successfully unpacked and MD5 sums checked

The downloaded binary packages are in
    C:\Users\wwa418\AppData\Local\Temp\Rtmp6XSVYq\downloaded_packages 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-29T11:59:15.453

除了已经提到的搜索路径更改方法之外，可能值得注意的是，此警告和行为来自（至少从 R 3.6.2 开始）来自`utils:::.install.winbinary`对附加包进行检查的地方。

因此，为了避免这个问题，我们可以做的是不使用二进制安装方法，而是从源代码安装包：

```
library(digest)
utils::install.packages("digest", lib = tempdir(), type = "source") 
```

如果包需要编译 C/C++/Fortran 代码，这当然会带来一些潜在的警告，如`help("install.packages")`为 Windows 编写的：

> 如果包不包含需要编译的 C/C++/Fortran 代码，则使用 type = "source" 的包总是有效的。否则，您将需要按照“R for Windows FAQ”中的说明安装 Rtools 集合，并且您必须按照 Rtools 的要求设置 PATH 环境变量。
> 
> ...

# android - 在片段中使用片段

> ID：13163249
> 
> 赞同：1
> 
> 时间：2012-10-31T17:12:06.873
> 
> 标签：android, android-fragments, android-viewpager, fragment

我正在使用 FragmentStatePagerAdapter 为对象列表创建视图寻呼机。每个页面都是一个片段。

但是，在该页面上，我还使用片段来显示其他一些数据。

这样做时我遇到了问题。我想知道我可以把片段放在片段中。或者任何其他解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:36:24.143

当前的片段实现不支持嵌套片段（Android 工程师 Diane 也在[这里](https://stackoverflow.com/a/6847770/1235698)回答了这个问题：

> 当前不支持嵌套片段。试图将一个片段放在另一个片段的 UI 中会导致未定义且可能会损坏的行为。

但这并不意味着它不可行 - 它可以实现，但是需要编写更多代码而不仅仅是片段。其他用户在同一线程中有评论：

> 我通过扩展 FragmentActivity、FragmentManager 和 FragmentTransaction 来管理它。基本前提是在我的活动中扩展 DeferringFragmentActivity，提供相同的 api，因此无需更改其他代码。当我调用getFragmentManager 时，我得到一个DeferringFragmentManager 实例，当我调用beginTransaction 时，我得到一个DeferredTransaction。此事务使用调用的方法和参数存储 POJO。当调用 commit 时，我们首先查找任何挂起的 DeferredTransactions。提交所有事务后，我们开始一个真正的事务并使用 args 运行所有存储的方法

一般来说 - 除非你绝望，否则只需重新设计你的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:28:18.403

**片段不能容纳其他片段。** 不支持（状态错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:47:13.960

我在项目的片段中使用了片段。我最终做的方式是通过代码添加这些内部片段并使用附加到活动的片段作为另一个片段的“代理”，因此在片段的 oncreateview() 上实例化内部片段， ondestroyview() 你删除内部碎片等等。

# java - 在 Java 中以编程方式创建 IBM 队列

> ID：13163256
> 
> 赞同：4
> 
> 时间：2012-10-31T17:12:21.527
> 
> 标签：java, ibm-mq

如何使用`MQQueueManager`和`MQQueue`对象以编程方式创建新队列？

是否有关于如何使用这些类的指南？javadocs 没有说太多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:10:44.670

要创建动态队列，您只需打开一个模型队列。动态队列被创建并且你得到它的句柄。还提供了队列的名称，您可以将其放在请求消息的Reply-To-Queue 字段中。

如果您想创建一个永久队列，请查看[`com.ibm.mq.pcf`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/pcf/package-frame.html)信息中心。要从应用程序执行任何 WMQ 管理命令，请将可编程命令格式 (PCF) 消息提交到`SYSTEM.ADMIN.COMMAND.QUEUE`. 必须授权应用程序将消息放入队列才能使其工作。此外，命令服务器将使用消息头中的用户 ID 来查找正在执行的特定命令的授权。要创建队列，提交者必须`+crt`对队列具有权限。

请注意，任何能够创建永久队列的人或应用程序都是事实上的管理员。如果他们的 ID 未被授权创建授权控制列表条目，他们只需在命令队列上创建一个别名，然后就可以欺骗管理用户 ID。出于这个原因，很少有任何非管理员被授予创建队列的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T10:26:06.427

如果您安装了 IBM WMQ，请转至系统上的此位置。

C:\Program Files\IBM\WebSphere MQ\tools\pcf\samples (Windows)

他们给出了如何使用 JAVA 和 PCF 进行一些基本操作的代码示例。

# c# - LightSwitch - “引用属性不能设置为已删除或丢弃的实体。”

> ID：13163263
> 
> 赞同：0
> 
> 时间：2012-10-31T17:12:46.847
> 
> 标签：c#, exception, visual-studio-lightswitch

尝试定义另一条数据中包含的数据成员时遇到此异常。

例子：

```
Container newRecord = this.DataWorkspace.ApplicationData.Containers.AddNew();
newRecord.SubContainer = this.DataWorkspace.ApplicationData.SubContainers.AddNew(); 
```

`"Reference properties cannot be set to deleted or discarded entities."`第二行遇到异常 , 。

我不明白它在谈论什么实体被丢弃或删除，所以对于这个问题的任何帮助将不胜感激。

代码行位于 LightSwitch 中定义的接口函数中，该函数从 Silverlight 项目中调用，将数据从该项目传递到 LightSwitch 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:35:31.970

在确定我需要在“逻辑”线程上之后，我最终设法做到了这一点，而我不是。我花了一点时间试图找到一个`this.DataContext`但找不到（我的 Silverlight 项目有这个但没有 LightSwitch 项目）。

最终，尽管我发现了我需要做的事情：

```
this.Details.Dispatcher.BeginInvoke(() =>
{
Container newRecord = this.DataWorkspace.ApplicationData.Containers.AddNew();
newRecord.SubContainer = this.DataWorkspace.ApplicationData.SubContainers.AddNew();
newRecord.exampleIntProperty=2;
newRecord.SubContainer.innerString="Example";
}); 
```

然后我可以将数据分配给`newRecord`它所包含的对象的属性和属性（例如 example`SubContainer`的属性），尽管显然在指示 LightSwitch 保存其数据之前不会保存新记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:32:42.193

您的代码需要稍作更改：

```
Container newRecord = this.DataWorkspace.ApplicationData.Containers.AddNew();
SubContainer newSub = newRecord.SubContainers.AddNew(); 
```

如果导航属性不称为*SubContainers*，只需将其替换为正确的名称。

# php - PHP更新sql记录

> ID：13163269
> 
> 赞同：0
> 
> 时间：2012-10-31T17:13:07.547
> 
> 标签：php, html, sql

不知何故，我在尝试更新我的 sql 数据库中的记录时遇到了我的 sql 错误

这是我当前的代码

html表单：

```
<html>
<head>
<title>title here</title>
</head>
<body>
<form action="end.php" method="POST">
<input type="text" id="comment" name="comment" placeholder="Kommentar"><p>
<input type="submit" value="Stop arbejde">
</form>
</body>
</html> 
```

结束.php

```
<?php
$host="localhost";
$username="root";
$password="password";
$db_name="db";
$tbl_name="log";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$comment=$_POST['comment'];
$datetime=date("y/m/d H:i:s");
$editit=date("W/D");

$sql="UPDATE log SET end=$datetime, comment=$comment WHERE editid='$editit'";
$result=mysql_query($sql);

if($result){
echo "Successful<BR>";
}
else {
echo "Fejl";
}
mysql_close();
?> 
```

自从我收到错误“Fejl”以来，我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T17:13:55.423

字符串必须用单引号括起来

```
$sql="UPDATE log SET end='$datetime', comment='$comment' WHERE editid='$editit'"; 
```

但您的查询很容易出现`SQL Injection`. 请花时间阅读下面的文章

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:20:47.800

$sql 中的变量名应该在单引号内。

```
$sql="UPDATE log SET end='$datetime', comment='$comment' WHERE editid='$editit'"; 
```

此外，您应该从表单标签中的 html 代码中删除段落标签。

# node.js - 使用 openssl lib 提取带有 v8 的 PKCS#7 消息的内容？

> ID：13163270
> 
> 赞同：1
> 
> 时间：2012-10-31T17:13:09.057
> 
> 标签：node.js, openssl, v8

我正在尝试构建一个 NodeJS/V8 桥来执行 openssl 操作。

其中之一是提取 PKCS#7 信封的内容。我想要的是相当于这个 cmd ：

```
openssl smime -verify -inform DER -noverify 
```

这只是在 PKCS#7 信封内输出纯内容。

我正在查看 CMS_* 操作，但看起来 CMS_verify 只应该返回一个 int （参见[。http://www.openssl.org/docs/crypto/CMS_verify.html](http://www.openssl.org/docs/crypto/CMS_verify.html)），我正在寻找字符串/如果验证成功，则为二进制内容。

这是我到目前为止得到的。如果实现这一点的代码对你们中的任何人来说都是微不足道的......那真是太棒了，因为 openssl 文档很烂，看起来整个网络上没有一个关于 CMS 的 C 代码......最后，这就是我一生中第一次做任何 C++！

PS：关于这些`DecodeWrite`东西的额外问题，知道这是做什么的吗？

```
static Handle<Value> Verify(const Arguments& args) {
    HandleScope scope;

    ASSERT_IS_BUFFER(args[0]);
    ssize_t klen = Buffer::Length(args[0].As<Object>());

    if (klen < 0) {
        return ThrowException(Exception::TypeError(String::New("Bad argument")));
    }

    // No clue of what these three lines do !
    char* kbuf = new char[klen];
    ssize_t kwritten = DecodeWrite(kbuf, klen, args[0], BINARY);
    assert(kwritten == klen);

    Handle<Object> options = args[1]->ToObject();
    options->Get(String::New("inform"))

    //@todo!
    //int CMS_verify(CMS_ContentInfo *cms, STACK_OF(X509) *certs, X509_STORE *store, BIO *indata, BIO *out, unsigned int flags); 
```

# android - 如何从 phoneStateListener 类调用 startActivity(intent)？

> ID：13163272
> 
> 赞同：0
> 
> 时间：2012-10-31T17:13:10.297
> 
> 标签：android

我正在创建一个应用程序来发送邮件。我正在使用扩展 phoneStateListener 类的类。这在 startActivity 函数时给出了问题，它表示“方法 startActivity(Intent) 未定义为 PhoneCallListener 类型”，其中 PhoneCallListener 是由 phonestatelistener 扩展的类，并且将以下代码写入其中。

```
 String to = "a.crack@gmail.com";
          String subject = "testing";
          String message = "this is it";
         Intent email = new Intent(Intent.ACTION_SEND);
          email.putExtra(Intent.EXTRA_EMAIL, new String[]{ to});

          email.putExtra(Intent.EXTRA_SUBJECT, subject);
          email.putExtra(Intent.EXTRA_TEXT, message);

          //need this to prompts email client only
          email.setType("message/rfc822");

              startActivity(Intent.createChooser(email, "Choose an Email client :")); 
```

请帮助我如何开始活动以发送我的邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:09:38.330

```
 public class MyPhoneReceiver extends BroadcastReceiver {
        Intent in;
            @Override
            public void onReceive(Context context, Intent intent) {
                Bundle extras = intent.getExtras();
                if (extras != null) {
                in = new Intent(context, Second.class);
                    in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(in);

                }
            }
    } 
```

确保在清单文件中添加接收器。

# animation - 使用 RaphaelJS 的断断续续的文本动画

> ID：13163289
> 
> 赞同：0
> 
> 时间：2012-10-31T17:14:05.603
> 
> 标签：animation, text, svg, raphael

我正在尝试使用 RaphaelJS 为文本设置动画，但遇到了断断续续的动画（“颤抖”？）。我四处寻找与此相关的其他问题，但到目前为止我只能找到特定于 jQuery 或非 SVG 的主题。如果我忽略了类似的问题，请告诉我！

本质上，我试图在一个矩形元素中直观地包装一个文本元素，并通过动画同时翻译它们。我知道 'g' 元素，但我不想使用它，因为旧版本的 Internet Explorer 不支持它。相反，我对文本和矩形使用单独的 Raphael 动画：

```
var raphRect = paper.rect(
    (paperWidth/2)-rectWidth/2
    ,paperHeight-rectHeight
    ,rectWidth
    ,rectHeight            
    ,rectHeight/2
)
...
,raphText1 = paper.text(
    paperWidth/2
    ,paperHeight-(2*fontSize)
    ,'this is jumpy text?'
)
...
raphRect.animate({y : -rectHeight}, risingTime, 'linear');
raphText1.animate({y : -2*fontSize}, risingTime, 'linear'); 
```

我假设抖动是由文本元素的每个动画帧中的舍入像素引起的。有什么方法可以减轻或防止这种抖动？（减少动画时间不是一种选择......而且看起来甚至没有帮助。）

[（我有一个我在这里](http://jsfiddle.net/dousedfirepants/h26rZ/18/)尝试做的例子。我已经包含了两行文本和一个粗体笔划，用于 rect 以强调抖动。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-08T10:34:12.437

我有同样的问题，并试图用不同的方式来解决它。我发现很少有适合我的技巧。但他们都有一个相同的想法：你应该让文本不那么直。

```
"transform" : "R 0.01" 
```

例如，它以小角度旋转文本。结果如下： [jsfiddle](http://jsfiddle.net/IlyaB/84hp8nmk/)。我不能保证它会在您的浏览器中运行。在稳定的 Chrome 36 中它运行良好，在 beta 或 canary 中效果更差。

您也可以尝试 no so straigth font [jsfiddle](http://jsfiddle.net/IlyaB/3eab6ddx/)。它适用于FF。

```
"font-family" : "Comic Sans MS" 
```

其他更糟糕的尝试：

*   增加字体大小

*   使用粗体字

*   使用文本路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:12:27.837

这个想法实际上是从罗伯特朗森关于文本渲染属性的信息中借来的。Raphael 确实没有提供对这个功能的直接访问，但它确实为您提供了一个到 dom 节点的链接——所以它只是自己应用这种样式的第二步，它确实在 Firefox 中产生了更好的结果至少。

使用 jquery：

```
$(raphText1.node).attr( 'text-rendering', 'geometricPrecision' );
$(raphText2.node).attr( 'text-rendering', 'geometricPrecision' ); 
```

[在这里](http://jsfiddle.net/kevindivdbyzero/uCxBa/)上演。

# ruby-on-rails - Rails：使用 json 返回错误消息

> ID：13163291
> 
> 赞同：1
> 
> 时间：2012-10-31T17:14:20.420
> 
> 标签：ruby-on-rails, json

我的 rails 应用程序用作我的 android 应用程序的 API。我想知道当请求遇到任何问题时，有没有办法检测它在服务器端是哪个错误并返回特定代码？

例如，在我的`users_controller.rb`,

```
if @user.save
  respond_with(@user)
else  
  render json: {errors: @user.errors.full_messages}
end 
```

输出如下所示：

```
{"errors":["Username can't be blank","Password is too short (minimum is 6 characters)","Email has already been taken"]} 
```

如何检查是否是由于电子邮件错误或控制器中的密码错误？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:29:17.477

您可以使用@user.errors[:field_name] 检查特定字段的错误。检查特定字段是否无效的一种快速方法是使用`.any?`

IE

```
@user.errors[:field_name].any? 
```

如果此字段有任何问题，将返回 true。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-31T17:31:09.110

*   转到 Rails 控制台
*   类型：u = User.new
*   类型：u.valid?
*   类型：u.errors

检查结果。你应该能够弄清楚。

或者阅读文档：[http ://api.rubyonrails.org/classes/ActiveModel/Errors.html](http://api.rubyonrails.org/classes/ActiveModel/Errors.html)

提示：errors 只是一个带有一些额外便利方法的 OrderedHash 对象，例如 full_messages。它包含您要查找的所有信息，只是不在 full_messages 中。

# excel - Excel VBA Shell() 函数出现未知错误

> ID：13163293
> 
> 赞同：1
> 
> 时间：2012-10-31T17:14:25.343
> 
> 标签：excel, vba

我有以下 Excel VBA 函数来打开一个日志文件进行查看，它做的一切都是正确的，除了它总是在我关闭文件查看后抛出一个错误：

```
Private Sub ViewLog_Click()
  On Error GoTo LogFileOpenHandler:
    If Shell("notepad.exe " & LOG_FULL_FILENAME, vbMaximizedFocus) <> 0 Then
      ' Log file opened successfully
      MsgBox "log file opened"
    Else
      MsgBox "Oopsies! Could not open log file for viewing."
    End If

LogFileOpenHandler:
  MsgBox "Oops...Unknown error occured. Could not open log file for viewing."
  On Error GoTo 0
End Sub 
```

但是，如果我将 a`Exit Sub`作为最后一条语句插入，`If Shell(...) <> 0 Then`则不会发现任何错误。

有人可以向我解释错误是什么以及为什么会抛出它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:20:49.077

它说有错误的原因是因为你`Exit Sub`在块之后没有（就像你提到的那样）`If`。因此，每次程序运行时，它都会一直运行并在下面生成消息框，`LogFileOpenHandler:`因为没有什么可以阻止代码执行该脚本。

如果您`Exit Sub`重新添加，它将按照您的意愿运行：

```
Private Sub ViewLog_Click()
  On Error GoTo LogFileOpenHandler:
    If Shell("notepad.exe " & LOG_FULL_FILENAME, vbMaximizedFocus) <> 0 Then
      ' Log file opened successfully
      MsgBox "log file opened"
    Else
      MsgBox "Oopsies! Could not open log file for viewing."
    End If

    Exit Sub 

LogFileOpenHandler:
  MsgBox "Oops...Unknown error occured. Could not open log file for viewing."
  On Error GoTo 0
End Sub 
```

# php - 用 PHP 分割字符串

> ID：13163294
> 
> 赞同：-4
> 
> 时间：2012-10-31T17:14:28.697
> 
> 标签：php, string, split

我有一些看起来像这样的 id：

```
100000584438452_522814274414716
1050090160_4191766746351
704475642_509010235785154 
```

我需要将每个分开，并获得_之后的数字

我需要将 _ 后面的数字放在变量 $object_id 中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:17:58.997

您可以将字符串拆分为下划线，然后将 $object_id 设置为最后一个值，如下所示：

```
$chunks = explode("_", $number_id);
$object_id = end($chunks); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:17:37.690

我敢肯定，如果您阅读此网址[http://php.net/manual/en/function.split.php](http://php.net/manual/en/function.split.php) ，您会明白的。甚至有一些例子可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:18:47.330

split() 已被弃用。试试[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T17:22:46.317

```
$arrayOfIds = explode("_", $yourIdsSeparatedByUnderscore);
$objectId = $arrayOfIds[1]; 
```

# directx - 从 ID2D1BitmapBrush 中检索 IDXGISurface

> ID：13163295
> 
> 赞同：0
> 
> 时间：2012-10-31T17:14:32.437
> 
> 标签：directx, direct2d

我的应用程序使用 2 个 DXGISurfaceRenderTargets。

第一个渲染目标用于创建`ID2D1Bitmap`，然后`ID2D1BitmapBrush`从中创建。

结果`ID2D1BitmapBrush`用于第二个渲染目标上的 FillGeometry。

是否可以从或检索`IDXGISurface`用于创建的？`ID2D1BitmapBrush``ID2D1BitmapBrush``ID2D1Bitmap`

Windows 8 有`ID2D1Bitmap1`with`GetSurface`方法，但我在 Windows 7 上需要这个。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:28:53.870

不，你不能，正如你所指出的，只有 ID2D1Bitmap1 可以通过调用 Getsurface 来检索表面，而且这只适用于 Windows 8。

如果你想使用表面，你可以在创建后将它存储起来，然后将它作为参数传递给使用它的函数吗？

[D2D1位图](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371109%28v=vs.85%29.aspx)

[D2D1位图1](http://msdn.microsoft.com/en-us/library/windows/desktop/hh404349%28v=vs.85%29.aspx)

# eclipse-plugin - Eclipse RCP 目标平台：更新和备份

> ID：13163296
> 
> 赞同：0
> 
> 时间：2012-10-31T17:14:35.630
> 
> 标签：eclipse-plugin, eclipse-rcp, target-platform

我刚刚为我的应用程序创建了一个 Eclipse 目标定义/平台，选择使用[我遵循的教程](http://eclipse.dzone.com/articles/creating-eclipse-rcp-target)中推荐的软件站点（而不是本地文件/安装）以及同一作者稍后[发布的最佳实践。](http://www.modumind.com/2012/10/23/rcp-best-practices-set-up-a-target-platform/)

软件站点都是外部站点（eclipse、sourceforge 等）

一切似乎都运行良好，尽管我有两个担忧：

1.  如果组件被更新（由软件提供商），它是否也会在目标定义文件中自动更新？
2.  是否可以备份目标平台，以便可以（例如）在没有 Internet 连接的计算机上进行配置，或者在远程站点不可用时使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:05:03.730

您可以创建 Eclipse p2 存储库的镜像。在组织内部执行此操作很常见，这样可以快速访问存储库的副本，并且不依赖于某些第三方继续托管它。[Eclipse Wiki](http://wiki.eclipse.org/Equinox_p2_Repository_Mirroring)上有一个指南。

据我所知，您的目标定义只能反映它指向的 p2 存储库中的内容。如果开发人员用更新的版本替换了一个包，它会选择它。如果您需要更好地控制它，那么选择性地镜像内容可能是要走的路。

从那个 wiki 页面来看，默认情况下它不会删除镜像中的内容（即使它已在远程中删除），除非您指定`-writeMode clean`.

# php - 图像验证

> ID：13163297
> 
> 赞同：0
> 
> 时间：2012-10-31T17:14:38.700
> 
> 标签：php, image, validation

我是 PHP 新手，我正在尝试使用 TYPE 和 SIZE 进行图像验证，但我失败了。谁能帮帮我吗 ？

这是我的代码：

```
if($fileName)
    {
        $filePath="images/admin/".$fileName;
        if(file_exists($filePath))
        {
            $a=gmdate("Yzhis");
            move_uploaded_file($_FILES["image"]["tmp_name"], "images/admin/".$a.$_FILES["image"]["name"]);
            $fileName=$a.$_FILES["image"]["name"];

        }
        else
        {
            move_uploaded_file($_FILES["image"]["tmp_name"], "images/admin/".$_FILES["image"]["name"]);

        }
    } 
```

此代码可以正常上传文件，但没有进行验证。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:31:44.350

图像验证可以随心所欲地复杂化，但最简单的方法是良好的旧[getimagesize()](http://php.net/getimagesize)函数。测试它的输出`false`，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:34:37.353

您可以同时使用这两个功能。

```
filesize () 
```

[http://php.net/manual/en/function.filesize.php](http://php.net/manual/en/function.filesize.php)

```
getimagesize () 
```

[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

获取 GD 和 Image 函数的完整列表。 [http://www.php.net/manual/en/ref.image.php](http://www.php.net/manual/en/ref.image.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:15:23.607

您可以使用[“gd”](http://php.net/manual/en/book.image.php)或类似的库来验证和操作 PHP 中的图像。

# c++ - c++11 STL的binomial_distribution极慢

> ID：13163305
> 
> 赞同：6
> 
> 时间：2012-10-31T17:15:18.257
> 
> 标签：c++, gcc, random, c++11, libstdc++

我正在使用 STL 的“随机”生成二项式分布的随机数。当范围很大时，它变得非常慢。对于范围 40，生成 100 个数字需要 12 秒。对于更大的范围，时间会急剧增加（我需要大约 10000 的范围）。它似乎不依赖于概率参数。我正在使用 g++ 4.5.0。

```
#include <iostream>
#include <random>

using namespace std;

vector<int> v;

default_random_engine gen(123);
binomial_distribution<int> rbin(40,0.7);

int main(){
  v.reserve(2000);
  for(int i=0; i<100;++i){
    v.push_back(rbin(gen));
   }
} 
```

输出：

```
50.~/.../fs/> g++ -std=c++0x q.cpp 
51.~/.../fs/> time ./a.out 
real    0m12.102s
user    0m12.094s
sys     0m0.002s
52.~/.../fs/> 
```

我可以使用正态近似，但它对概率参数的极值不利。

## 更新：

使用“-O3”选项，时间变为~2 秒。使用 g++ 4.6.3，问题完全消失了——时间几乎不依赖于范围，生成 100 个数字需要 5 毫秒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T17:46:00.697

For large ranges, libstdc++ will use an efficient rejection algorithm (after Devroye, L. *Non-Uniform Random Variates Generation*), but only if C99 TR1 math is available (`_GLIBCXX_USE_C99_MATH_TR1`). Otherwise, it will fall back to a simple waiting time method, which will have performance linear in the range.

I'd suggest checking the value of `_GLIBCXX_USE_C99_MATH_TR1` and whether performance improves on more recent versions of g++.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:24:08.610

当性能很重要时，您应该确保启用优化。

此外，您应该查看可用的随机数引擎，并确保您使用的是满足您的性能/大小/质量要求的引擎。

如果问题确实是`std::binomial_distribution::operator()`性能不佳，您可能必须使用不同的标准库实现，或`std::binomial_distribution`. boost 应该有一个替代实现`<random>`，您应该可以毫不费力地使用它，libc++ 也有一个替代实现，但它会更难使用，因为您必须替换整个标准库实现。

# math - 线上的所有点

> ID：13163308
> 
> 赞同：1
> 
> 时间：2012-10-31T17:15:23.750
> 
> 标签：math, geometry

如果我从（2,3）到（42,28）画一条线，我怎样才能在点列表中获得线上的所有点？我尝试使用斜坡，但我似乎无法掌握它的窍门。需要明确的是：我想要线条覆盖的所有像素。所以我可以让这条线“可点击”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:17:29.080

这是一道数学题。直线方程为：

```
y = mx + c 
```

因此，您需要计算出梯度 (m) 和截距 (c)，然后插入 x 的值以获得 y 的值。

但是“一条线上的所有点”是什么意思？如果 x 和 y 是实数，则点数是无限的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:07:30.597

您可以使用公式 (x-x1)/(x1-x2) = (y-y1)/(y1-y2)。并且您知道 x 值从 2 到 42 的点在线上，并且必须找到它们相关的 y 值。如果任何结果 y 值不是整数，则应正确近似。如果两个连续的 y 值相差超过 1，则缺失的 y 值应映射到最后一个 x 值。

这是伪代码（试图抓住算法的症结所在）

```
prevY = y1

for(i=x1+1;i<=x2;++i)
{

  y = computeY(i);

  if(diff(y,prevY)>1) dump_points(prevY,y,i);

  prevY = y;

  dump_point(i,y);

}

dump_points(prevY,y2,x2); 
```

我可能不会在这里涵盖所有案例（尤其是角落案例）。但想法是，对于一个 x 值，可能会有多个 y 值，反之亦然，具体取决于线的斜率。算法应该考虑这一点并生成所有点。

# xslt - 将 XSL 参数传递给模板的通用方法

> ID：13163309
> 
> 赞同：0
> 
> 时间：2012-10-31T17:15:28.710
> 
> 标签：xslt, xslt-2.0

我有几个样式表和模板，我想为它们添加一些行为。让我们这样说：

```
<xsl:template match="*" priority='10'>
    <xsl:apply-templates select="." mode="someFunStuffsToDo"/>
    <xsl:next-match/>
</xsl:template> 
```

但是，由于我需要一些通用模板，所以我对参数有疑问，因为我不知道我可以拥有的所有不同类型的参数。

有没有什么“简单”的方式可以说这样的话：

```
<xsl:template match="*" priority='10'>
    <xsl:param select="All the params you get"/>
    <xsl:apply-templates select="." mode="someFunStuffsToDo">
         <xsl:with-param select="All the params you got"/>
    </xsl:apply-templates>
    <xsl:next-match/>
</xsl:template> 
```

我可以想象一些基于通用参数的解决方案，其中将包含参数节点，但我需要重写我的大部分实际模板以切换通用参数的不同细节参数声明......

编辑：好的，我想我只是在发布我的问题之前找到了一个解决方案：隧道参数。据我了解，这是否符合我的目的，我的意思是

```
<xsl:template match="*" priority='10'>
    <xsl:apply-templates select="." mode="someFunStuffsToDo"/>
    <xsl:next-match/>
</xsl:template> 
```

如果我只是在属性 tunnel='yes' 之前和之后设置我的参数，会起作用吗？（我还没有测试过，让我感到羞耻，但我认为下一场比赛将保留当前模式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:45:57.403

是的，`tunnel`参数有帮助，但是您需要确保您的传递代码和接收模板`<xsl:with-param name="foo" tunnel="yes" select="bar"/>`分别具有`<xsl:param name="foo" tunnel="yes"/>`. 但是介于两者之间的任何模板，例如您拥有的模板，都不需要`with-param`.

# asp.net - formview插入命令后重定向

> ID：13163312
> 
> 赞同：3
> 
> 时间：2012-10-31T17:15:52.537
> 
> 标签：asp.net, insert, formview

在表单视图上成功插入命令后，我试图重定向。这是我所拥有的：

细节.aspx：

```
<asp:FormView id="formview1"...datasourceid="detailsSQLDS">
   <InsertItemTemplate>
        DateOfService: 
        <asp:TextBox ID="DateOfServiceTextBox" runat="server" 
            Text='<%# Bind("DateOfService") %>' />
        <br />
        InsurancePrimary:
        <asp:TextBox ID="InsurancePrimaryTextBox" runat="server" 
            Text='<%# Bind("InsurancePrimary") %>' />
        <br />
        <asp:LinkButton ID="InsertButton" runat="server" CommandName="Insert" Text="Insert" />

   </InsertItemTemplate>
</asp:FOrmView>
....
<asp:SqlDataSource ID="detailsSQLDS" runat="server" 
    ConnectionString="..." 
    InsertCommandType="StoredProcedure"
    InsertCommand="usp_Insert"
 > 
```

代码背后：

```
protected void formview1_ItemInserted(object sender, FormViewInsertedEventArgs e)
{
    Response.Redirect( "List.aspx?mrn=" + Request.QueryString["mrn"] );
} 
```

插入工作正常，但不是重定向。我认为它不会触发函数 formview1_ItemInserted(....)。有没有办法告诉formview在成功插入后触发这个函数，或者其他方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:23:43.120

啊，我找到了。我需要将 OnItemInserted="formview1_ItemInserted" 声明添加到我的表单视图中。所以我有：

```
 <asp:FormView id="formview1"...datasourceid="detailsSQLDS" OnItemInserted="formview1_Item_Inserted"> 
```

现在效果很好。

# c++ - msvcrt.dll 和 pcre 库出错

> ID：13163318
> 
> 赞同：2
> 
> 时间：2012-10-31T17:16:16.307
> 
> 标签：c++, c, windows, dll, pcre

我编写了一个 C 程序并且在 Windows 7 和 Linux 上运行良好，但是当我在 Windows XP 上执行它时出现错误：

```
"_except_handler4_common could not be located in the dynamic link library msvcrt.dll" 
```

我研究了一下，有人说要删除我没有的DLL“dwmapi.dll”，所以这不是我的问题。

有人告诉我使用它`depends walker(depends.exe)`来查找谁在使用`msvcrt.dll`. 我做了并发现该`pcre`库正在使用它，实际上它存在问题，但我不知道如何解决这个问题。谁能帮我？

这是取决于沃克向我展示的图像：

![在此处输入图像描述](../Images/98b91dc07c4f586cdd86ed5eb033d4ad.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:50:21.450

Reason possibilities (afaiu):

> a) You linked to msvcrt.dll specifically when building - this should not happen according to Microsoft support *unless* you specifically do it.
> 
> b) Some other installed or copied program/driver on your XP that links to "wrong" version of msvcrl.dll is being triggered.

Depending on what the reason is, here are few ideas to resolve:

> 1) There might be some program/driver/etc. installation on your XP machine that has introduced "Vista/Win7 related crap" onto it. It is said (by the internets) that PCRE3.DLL belongs to "GnuWin32 Non-system processes". That means you can try to find it and rename/delete it. Or delete the program you that uses it.
> 
> 2) Installing the redist for XP of the C++ redistributable that *you used to build* on Win7 might help. This is link for VS2005: (darn.. use google - i can only give two links per post :P)

Rebuilding:

> 3) Just build the file from sources on your XP machine using some VisualStudio version you can get on it. And check those VS project properties!
> 
> 4) Fix your build on Windows7\. You might be linking to _except_handler4_common in msvcrt.dll in your Windows 7 build. Make sure that you do not do that. You can specifically instruct the linker not to link to it in VisualStudio project properties "/NODEFAULTLIB:msvcrt80.lib". You also did not specify what are you using for building. VS2005, VS2008, VS2010, gcc?

Answer based on educated guesses and [Jeffrey Tan research here](http://bytes.com/topic/net/answers/611031-vista-xp-msvcrt-dll-error):

and [research here](https://www.google.fi/search?aq=f&sugexp=chrome,mod=1&sourceid=chrome&ie=UTF-8&q=PCRE3.DLL):

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:46:56.660

（代表欧普）

问题出在 pcre3.dll 上，正如我之前所说，我只是更改了它的版本，我使用的是 7.x 版本并更改为调用 pcre.dll 而不是 pcre3.dll 的 4.4，这解决了我的问题，如果有人有同样的问题。

这是正确库的链接： [pcre-4.4-dll.zip](http://www.psyon.org/projects/pcre-win32/pcre-4.4-dll.zip)

# php - $_SESSION 和 WordPress 的斗争

> ID：13163319
> 
> 赞同：2
> 
> 时间：2012-10-31T17:16:16.893
> 
> 标签：php, wordpress

我正在尝试使用 WordPress 实现我以前从未尝试过的东西，以尝试避免使用非常复杂的类别结构。

**我想做的是：**

访问站点时，有一个变量被声明但保留为 NULL。在访问使用某个模板的页面时，可以说“template-x.php”。该变量是根据页面上的钩子设置的。即用户访问'Shop X'并且变量设置为'Shop X'。在另一个模板中，我想根据变量过滤显示的内容。

**实际用法是：**

我的客户有 4 家商店，并希望为每家商店选择产品。他们希望他们的产品在一个地方，并标记到他们申请的商店。产品分为4类。因此，4 家商店各有 4 种产品类型。

我想避免必须为每个商店产品类型创建一个类别，从而产生 20 个类别。

因此，我的想法是使用这个变量来进一步过滤产品。所以他们访问商店页面，单击产品类型 1，模板使用该变量仅显示带有该商店标记的产品类型 1。

$_SESSION 是解决这个问题的正确方法吗？我已经尝试了几天以使其正常工作，但无济于事。

提前谢谢了。

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:37:01.900

查看[列表类别帖子](http://wordpress.org/extend/plugins/list-category-posts/)插件。

为产品分配一个标签，即 store1。

然后在商店 1 的页面上将此代码添加到 HTML：

```
[catlist tags=store1] 
```

你也可以做一些标签，比如小部件、whatsits 和 thingambobs：然后在每个商店上，编辑页面：

```
//store 1, widgets and thingamabobs:
[catlist tags=widgets,thingamabobs]
//store 2, whatsits:
[catlist tags=whatsits]
//store 3, some_category products:
[catlist name=some_category] 
```

[“其他注释](http://wordpress.org/extend/plugins/list-category-posts/other_notes/)”页面上还有许多其他选项。

# internet-explorer - IE8打印网站放大

> ID：13163321
> 
> 赞同：1
> 
> 时间：2012-10-31T17:16:27.127
> 
> 标签：internet-explorer, printing-web-page

我对 IE8 有一个特别有趣的问题。

该网站在 Firefox、chrome、ie9 中打印良好，但从 IE8 打印时，页面比应有的大 50% 左右，导致右侧被切断。

这可以通过将打印预览的缩放比例缩小到 70% 来解决，但客户对此解决方案并不满意。

我没有任何运气通过谷歌和 SO 找到太多信息或类似问题。

有人对我有什么建议吗？

当您在 Mac 上工作时，也很难解决从 IE8 打印的问题 :(（客户提出了这个问题）。

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T16:50:40.493

我遇到了同样的问题（仅使用 IE8）并意识到 IE8 似乎正在根据它遇到的第一个 div 的宽度进行缩放。在我的例子中，第一个 div 是 456px 宽，而第二个是 920px。因此，第二个 div 在右侧被切断。

我的解决方案是在所有其他 div 之前添加一个空 div（宽 920 像素，高 1 像素）。这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:18:47.593

你需要对IE8进行特殊的css或查询，这很正常。

# c# - ComboBox 不显示来自数据库的信息

> ID：13163327
> 
> 赞同：0
> 
> 时间：2012-10-31T17:17:09.153
> 
> 标签：c#

我必须创建一个自动柜员机应用程序来访问包含样本客户记录的数据库。我在组合框中显示 accountInformation 表（数据库）中的帐号时遇到问题。我很确定我正确地创建了数据库连接，并且我认为我拥有的代码会显示组合框中的数字，所以我不确定问题是什么。我需要更改组合框属性中的某些内容吗？这是我的代码：

```
using SQLDll;

namespace WindowsFormsApplication14
{

public partial class Form1 : Form
{
    private Connection myConnection;
    private Statement myStatement;
    private ResultSet myResultSet;
    String databaseURL = "http://www.boehnecamp.com/phpMyAdmin/razorsql_mysql_bridge.php";

    public Form1()
    {
        InitializeComponent();

        try
        {
            //connect to database
            SQL sql = new SQL();
            myConnection = sql.getConnection(databaseURL);
            //create Statement for executing SQL
            myStatement = myConnection.createStatement(databaseURL);
        }
        catch (Exception)
        {
            Console.WriteLine("Cannot connect to database server");
        }
        //close statement and database connection 
       myStatement.close();
       myConnection.close();
    }
    private void Form1_Load(object sender, EventArgs e)
    {
       loadAccountNumbers();
    }

    public void setText(string text)
    {

    }
    //load account numbers to ComboBox
    private void loadAccountNumbers()
    {
        //get all account numbers from database
        try
        {
            myResultSet = myStatement.executeQuery("SELECT accountNumber FROM accountInformation");
            // add account numbers to ComboBox
            while (myResultSet.next())
            {
                accountNumberComboBox.Items.Add(myResultSet.getString("accountNumber"));
            }
            myResultSet.close(); // close myResultSet
        }//end try
        catch (Exception)
        {
            Console.WriteLine("Error in loadAccountNumbers");
        }
    }//end method to loadAccountNumbers 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:30:45.880

我建议将所有内容都放在一种方法中。它更具可读性，即使发生异常，您也可以确保所有内容都关闭。

公共部分类Form1：Form {私有连接myConnection; 私人声明 myStatement; 私有结果集 myResultSet; String databaseURL = "http://www.boehnecamp.com/phpMyAdmin/razorsql_mysql_bridge.php";

```
public Form1()
{
    InitializeComponent();
    loadAccountNumbers();
}

//load account numbers to ComboBox
private void loadAccountNumbers()
{
    SQL sql = new SQL();
    using (myConnection = sql.getConnection(databaseURL))
    using (myStatement = myConnection.createStatement(databaseURL))
    using (myResultSet = myStatement.executeQuery("SELECT accountNumber FROM accountInformation"))
    {
        // add account numbers to ComboBox
        while (myResultSet.next())
            accountNumberComboBox.Items.Add(myResultSet.getString("accountNumber"));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:35:11.320

我发现出了什么问题。我知道我必须在某个地方调用 loadAccountNumbers()，但我不确定在哪里。我把它放在 public Form1() 中，这解决了我的问题！感谢所有的帮助。

# jquery - 使用fadeIn fadeOut 进行悬停状态时如何保持活动子导航可见

> ID：13163328
> 
> 赞同：1
> 
> 时间：2012-10-31T17:17:10.247
> 
> 标签：jquery, menu, fadein, fadeout, nav

我被困在一些 jquery 上，我在子导航的悬停状态上有淡入和淡出。

我的不足之处是，一旦您将鼠标悬停在活动状态上/下，子导航就会淡出，但我希望它保持可见。

jQuery：

```
$("ul#main-nav li").hover(function() { //Hover over event on list item
$(this).find("span").fadeIn("slow"); //Show the subnav
    } , function() { //on hover out...
$(this).find("span").fadeOut("slow"); //Hide the subnav 
```

我在 JF 上有我的代码：

[http://jsfiddle.net/ByteMyPixel/g8W5Y/](http://jsfiddle.net/ByteMyPixel/g8W5Y/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:35:00.123

如果它是活动项，则退出淡出：

```
$("ul#main-nav li").hover(function() { //Hover over event on list item
    $(this).find("span").fadeIn("slow"); //Show the subnav
}, function() { //on hover out...
    if($(this).hasClass('active')) {
          return;   
    }
    $(this).find("span").fadeOut("slow"); //Hide the subnav
}); 
```

# android - 在自定义图像视图周围绘制边框

> ID：13163329
> 
> 赞同：2
> 
> 时间：2012-10-31T17:17:13.387
> 
> 标签：android, android-imageview

我想在自定义 ImageView 周围添加黑色边框。目前我正在使用这个类在 ImageView 中实现圆角：

```
public class RoundedBitmapDisplayer implements BitmapDisplayer {

    private Context ctx;
    public RoundedBitmapDisplayer(Context context) {
        this.ctx = context;
    }
    @Override
    public Bitmap display(Bitmap bitmap, ImageView imageView) {
        Bitmap roundBitmap;
        try {

            roundBitmap = getRoundedCornerBitmap(ctx, bitmap, 10, bitmap.getWidth(), bitmap.getHeight(),
                      false, false, true, true);
        } catch (OutOfMemoryError e) {
            Log.e(ImageLoader.TAG, "Can't create bitmap with rounded corners. Not enough memory.", e);
            roundBitmap = bitmap;
        }
        imageView.setImageBitmap(roundBitmap);
        return roundBitmap;
    }

    /*
    private Bitmap getRoundedCornerBitmap(Bitmap bitmap) {
        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(0xFFFFFFFF);
        canvas.drawRoundRect(rectF, roundPixels, roundPixels, paint);

        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return output;
    }*/
    public static Bitmap getRoundedCornerBitmap(Context context, Bitmap input, int pixels , int w , int h , boolean squareTL, boolean squareTR, boolean squareBL, boolean squareBR  ) {

        Bitmap output = Bitmap.createBitmap(w, h, Config.ARGB_8888);
        Canvas canvas = new Canvas(output);
        final float densityMultiplier = context.getResources().getDisplayMetrics().density;

        final int color = 0xff424242;
        final Paint paint = new Paint();

        final Rect rect = new Rect(0, 0, w, h);
        final RectF rectF = new RectF(rect);

        //make sure that our rounded corner is scaled appropriately
        final float roundPx = pixels*densityMultiplier;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        //draw rectangles over the corners we want to be square
        if (squareTL ){
            canvas.drawRect(0, 0, w/2, h/2, paint);

        }
        if (squareTR ){
            canvas.drawRect(w/2, 0, w, h/2, paint);

        }
        if (squareBL ){
            canvas.drawRect(0, h/2, w/2, h, paint);

        }
        if (squareBR ){
            canvas.drawRect(w/2, h/2, w, h, paint);

        }

        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));

        canvas.drawBitmap(input, 0,0, paint);
        return output;
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:00:35.813

您可以在画布中绘制线条。确保传递正确的坐标。在 onDraw()

```
 Paint bp= new Paint();
    bp.setColor(Color.RED);//set a color
    bp.setStrokeWidth(5);// set your stroke width
    // w and h are width and height of your imageview
    canvas.drawLine(0, 0, w, 0,bp);
    canvas.drawLine(0, 0, 0, h,bp);
    canvas.drawLine(w,h,w,0,bp);
    canvas.drawLine(w, h, 0,h , bp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:36:20.870

Create image_border.xml file in drawable

```
<gradient 
    android:angle="270">
</gradient>
<stroke 
    android:width="2dp" 
    android:color="#3b64a8" />
<corners 
    android:radius="2dp" />
<padding 
    android:left="1dp" 
    android:top="1dp" 
    android:right="1dp"
    android:bottom="1dp" /> 
```

and use this xml in your imageview xml entry

```
<ImageView android:id="@+id/image"
    android:background="@drawable/image_border"   <!--add xml like this-->
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:src="@drawable/image" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:32:29.283

您可以设置包含的背景 xml drawable`<stroke />`

# objective-c - ARC声明的属性属性——理解

> ID：13163336
> 
> 赞同：1
> 
> 时间：2012-10-31T17:17:33.590
> 
> 标签：objective-c, properties, uml, automatic-ref-counting

[就UML表示法](http://en.wikipedia.org/wiki/Object_composition#UML_notation)`strong`而言，属性指的是对象组合，而`weak`属性指的是对象聚合，这是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:01:53.457

有趣的问题。

我会说它们相似但不同。

在 Objective-C 中，弱引用的存在理由通常被描述为一种手动打破保留循环的方法——这是必需的，因为 ARC（至少目前）不支持收集此类循环。这并不是真正使用聚合。

您还将看到它们用于通知之类的事情，只要后者存在，一个对象就会向另一个对象发送通知。这可能被视为更接近聚合，但实际上是“如果目标存在就做某事”而不是“如果我死了就不要杀死目标”。

您当然可以在 Obj-C 中使用弱引用来实现聚合，但您可能无法获得您期望的行为。

考虑您参考中的 C++ 示例：

```
class Professor;

class Department
{
   ...
private:
   // Aggregation
   Professor* members[5];
   ...
}; 
```

在 Objective-C 中可能是：

```
@interface Department

@property (weak) NSArray *members;
...

@end 
```

当 C++ 对象被销毁时，*数组*也会被销毁，但数组的元素不会。然而，在 Objective-C 中，数组也不会被破坏——`NSArray`总是保持对其成员的强引用，所以它们会一直存在。你当然可以为 Objective-C 设计弱集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:01:20.413

我认为这与组合和聚合之间的区别没有任何关系，因为它们都在两种情况下都使用。

您的链接中的示例：

*   一对一的情况下：
    1.  汽车有`strong`参考化油器。
    2.  化油器`weak`参考了汽车。
*   在一对多的情况下：
    1.  Pond`strong`引用了一组 Ducks。
    2.  该数组包含`strong`对每个包含的 Duck 的引用。
    3.  鸭子有`weak`池塘的参考。

在这两种情况下，都存在具有引用的所有者和具有反向引用的`strong`拥有对象。`weak`

所以我会说`strong`和`weak`是表示组合或聚合的 UML 连接线的两个端点。

# data-binding - How to make a for (i=0; i Possible Duplicate: 问问题

> ID：13163338
> 
> 赞同：0
> 
> 时间：2012-10-31T17:17:39.157
> 
> 标签：data-binding, for-loop, ember.js, handlebars.js, view-helpers

> **Possible Duplicate:**
> [Custom for-loop helper for EmberJS/HandlebarsJS](https://stackoverflow.com/questions/10307723/custom-for-loop-helper-for-emberjs-handlebarsjs)

I use [Handlebars](http://handlebarsjs.com/) for a website and I have an important question :

Sometimes you give to your template a full array and you just want to show the n first element... how do you do that with handlebars? I can't find...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:20:29.510

这是我的做法（它有效！！！）

首先，我在我的模型中有一个“预览”属性/函数，它只在数组中返回 arrayController：

```
objectToLoop = Ember.Object.extend({ 
        ...
    arrayController: [],
    preview: function() {
        return this.get('arrayController').toArray();
    }.property('arrayController.@each'),
        ...
}); 
```

然后，我添加了一个新的 Handlebars 助手：

```
Handlebars.registerHelper("for", function forLoop(arrayToLoop, options) {
    var data = Ember.Handlebars.get(this, arrayToLoop, options.fn);

    if (data.length == 0) {
        return 'Chargement...';
    }

    filtered = data.slice(options.hash.start || 0, options.hash.end || data.length);

    var ret = "";
    for(var i=0; i< filtered.length; i++) {
        ret = ret + options.fn(filtered[i]);
    }
    return ret;     
}); 
```

多亏了所有这些魔法，我可以在我看来这样称呼它：

```
<script type="text/x-handlebars"> 
    <ul>
        {{#bind objectToLoop.preview}}
            {{#for this end=4}}
                <li>{{{someProperty}}}</li>
            {{/for}}
        {{/bind}}
    </ul>
</script> 
```

就是这样。

我知道这不是最佳的，所以谁知道如何改进它，请告诉我:)

# javascript - 在Javascript中使字符串中的单词可选？

> ID：13163345
> 
> 赞同：1
> 
> 时间：2012-10-31T17:18:02.620
> 
> 标签：javascript, jquery, regex, string

我需要通过在可选择的单词周围添加跨度标签来使用 Javascript 中的正则表达式使字符串中的单词可选择。一个词可以选择的条件很少。他们是，

1) 可选单词可以由字母和数值组成，以空格分隔。

2) 出现在单词之间的任何特殊字符或特殊字符组合也将成为可选文本的一部分。例如 HTML#CSS 是一个可选择的单词

3) 任何出现在单词前面或后面的特殊字符或特殊字符组合都不能选择。例如 HTML #CSS 是两个可选择的词（HTML 和 CSS）

第 3 点的例外 - 单词前面的 $（美元符号）将是可选单词的一部分。- 单词末尾的'（撇号）将成为可选单词的一部分。

例如，

```
$45 will be <span>$45</span>
#45 will be #<span>45</span>
end. will be <span>end</span>.
said' will be <span>said'</span>
html#css will be <span>html#css</span> 
```

有人可以帮我用正则表达式吗？如果需要更多信息/说明，我随时待命。谢谢你。

这就是我到目前为止所提出的 -`/([A-Za-z0-9\$]+)([A-Za-z0-9]+)([A-Za-z0-9']+)/g` 但如果一个单词中至少有 3 个字符，它就会成功运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:33:42.600

你可以使用这个正则表达式

```
(?:\s|^)([^a-zA-Z\d\$]*?)([a-zA-Z\d\$][^\s]*?)([^a-zA-Z0-9'-]*?)(?=\s|$) 
```

现在你可以像这样替换它

```
$1<span>$2</span>$3 
```

# google-app-engine - 我的 Google App Engine 应用程序网址无法正常工作

> ID：13163350
> 
> 赞同：1
> 
> 时间：2012-10-31T17:18:24.587
> 
> 标签：google-app-engine

我最近创建了我的 Google App Engine 帐户，并上传了我的应用程序，并运行了一个所述应用程序的实例。

我可以通过 localhost:8080 访问我的应用程序，但是当我尝试使用 myappid.appspot.com 时，我收到 500 服务器错误（当然，我将“myappid”替换为我的应用程序名称）。这就是它所说的：

“错误：服务器错误

服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。”

任何人都可以帮助我使 URL 正常工作吗？我需要我的团队能够从任何地方访问这个应用程序。我不知道它可能有什么问题，我对 GAE 很陌生。经过大量搜索后，我发现人们说他们的 apppot URL 有效，并且想要其他选项。但我只希望我的应用程序 URL 能够首先工作！

更多信息：

这是一个 Python 应用程序，使用 GAE Python SDK，我正在运行 Windows 7，并使用 GAE Launcher GUI 来部署和运行该应用程序。

提前致谢！

编辑：这是我的日志中的错误：

：没有名为 flask Traceback 的模块（最近一次调用）：文件“/base/data/home/apps/s~luxtestapp/1.362824400913245138/bootstrap.py”，第 19 行，从应用程序导入 create_app 文件“/base/data/ home/apps/s~luxtestapp/1.362824400913245138/app/ **init** .py"，第 10 行，从烧瓶导入烧瓶

显然，该应用程序使用 Flask 而不是 Webbapp2。老实说，我不太确定这一切，因为这是我下载并部署的预构建应用程序。我没写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:22:03.057

在 apppot 上您的应用程序的控制面板中，转到日志部分。

[应用引擎](https://appengine.google.com)

看看最新的条目是怎么说的。过滤到“错误”。

此外，当您创建应用程序（python webapp2 示例）时，打开调试：

```
app = webapp2.WSGIApplication([
    ('/', MainHandler)], 
    debug=True) 
```

你会得到一个信息量更大的错误屏幕，而不是“500”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:55:46.467

您需要将烧瓶文件夹复制到您的项目文件夹中。通常，GAE 不支持的每个包（请参阅[支持的库](https://developers.google.com/appengine/docs/python/tools/libraries27)列表）都必须存在于项目文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-19T07:58:03.470

尝试在部署之前/之后设置环境变量。转到本地项目文件夹，打开 bash 粘贴此命令：ps：忽略 $ 符号

$ 设置 HTTP_PROXY= [http://cache.example.com:3128](http://cache.example.com:3128) $ 设置 HTTPS_PROXY= [http://cache.example.com:3128](http://cache.example.com:3128)

查看此链接以获取帮助：cloud.google.com/appengine/docs/python/tools/uploadinganapp

# javascript - 单击元素时呈现不同模板的一种模式

> ID：13163351
> 
> 赞同：6
> 
> 时间：2012-10-31T17:18:26.580
> 
> 标签：javascript, backbone.js, underscore.js, backbone-views

我有不同的按钮（一个用于创建“冲刺”，另一个用于创建评论等）。执行这些任务的表单被附加到一个模式对话框中，当您单击不同的按钮时会显示该对话框。

这些是流程：

*单击“Sprint”按钮>附加“Sprint”表单>显示模式*

然后，如果您单击其他按钮：

*单击“评论”按钮>空模式内容>附加“评论”表单>显示模式*

目前，不同的内容保存在一个字符串中，并在您单击按钮时附加到模式中。

但是现在我正在使用 Backbone 和 Underscore 模板，我不知道如何做同样的事情。我不想将所有模板都包含在模式中并根据您单击的按钮显示它们；我想在点击时附加一个已经缓存的模板。

有没有办法用 Backbone 和 Underscore 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:28:02.453

Shvetusya 有大致的想法，但这里有一个具体的例子，希望能更清楚：

```
var Modal = Backbone.View.extend({
    render: function() {
        this.$el.append(this.options.form.render().$el);
    }
});

var SprintForm = Backbone.View.extend({
    render: function() {
        // Use your templating engine to make a "sprint" form
        // eg. this.$el.html(sprintTemplate());
    }
});

var CommentForm = Backbone.View.extend({
    render: function() {
        // Use your templating engine to make a "comment" form
        // eg. this.$el.html(commentTemplate());
    }
});

// handler for: click on "Sprint" button >
handleSprintButtonClick: function() {
    var sprintForm = new SprintForm();
    var modal = new Modal({form: sprintForm});
    $(document.body).append(modal.render().$el); 
}

// handler for: click on "Comment" button >
handleCommentButtonClick: function() {
    var commentForm = new CommentForm();
    var modal = new Modal({form: commentForm});
    $(document.body).append(modal.render().$el); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:35:16.120

我通过将模态容器分离到自己的视图中解决了类似的问题。

然后，当单击“冲刺”按钮时，渲染“冲刺”表单视图并将该视图的 el 附加到模态，然后打开模态。

同样，当单击“评论”按钮时，呈现“评论”表单视图并将其 el 附加到模态。

这样您就可以使用“sprint”表单和“comment”表单的模板。

也在这里查看这篇文章（我将它用于我当前的设置）：

[使用 Backbone 和 Marionette 管理模态对话框](http://lostechies.com/derickbailey/2012/04/17/managing-a-modal-dialog-with-backbone-and-marionette/)

# arrays - std:: 列表中缺少向量

> ID：13163354
> 
> 赞同：0
> 
> 时间：2012-10-31T17:18:45.957
> 
> 标签：arrays, vector, codeblocks

我输入 std:: 但向量条目不在列表中。是否还需要包含任何库？我只有`#include <iostream>`.

我正在使用 Codeblocks 10.05，编译器是 GCC 4.4.1。我被告知不能调整数组的大小，所以我唯一的选择是向量。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:19:35.520

你需要，

```
#include <vector> 
```

# mysql - 获取查询结果的子集

> ID：13163357
> 
> 赞同：0
> 
> 时间：2012-10-31T17:18:53.713
> 
> 标签：mysql, sql, union

该表`request`具有外键字段`job`和`user`. 我需要提取一个用户同时拥有`job`= 35 和`job`= 34 的行的行子集。

此查询是否正确完成工作？我相信是的。

```
SELECT * FROM `request` 
WHERE `job` = 35 AND `fulfilled` is NULL 
AND 
`user` IN 
(SELECT `user` FROM `request` WHERE `job` = 34 AND `fulfilled` is NULL ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T17:21:17.130

```
SELECT user
FROM   request
WHERE  job IN (34,35) AND `fulfilled` is NULL 
GROUP BY user
HAVING COUNT(DISTINCT job) = 2 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/a627c/1)

# textmate - 在 textmate 的项目抽屉中显示隐藏的文件和文件夹

> ID：13163358
> 
> 赞同：5
> 
> 时间：2012-10-31T17:18:59.500
> 
> 标签：textmate

默认情况下，textmate 不会显示项目抽屉中的所有文件和文件夹。

如何让 textmate 项目抽屉显示隐藏文件，特别是所有以点开头的文件和目录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T17:18:59.500

点击`Preferences > Advanced > Folder References`,

编辑`File Pattern`（对原始默认值的最小更改）：

```
!(/\.(?!\W*)[^/]*|\.(tmproj|o|pyc)|/Icon\r|/svn-commit(\.[2-9])?\.tmp)$ 
```

以及`Folder pattern`（对原始默认值的最小更改）：

```
!.*/(\.(?!\W*)[^/]*|CVS|_darcs|_MTN|\{arch\}|blib|.*~\.nib|.*\.(framework|app|pbproj|pbxproj|xcode(proj)?|bundle))$ 
```

这仅适用于新项目文件夹。对于现有的，您需要在文件夹引用上单击鼠标右键并选择 后编辑模式`Show Information`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-08-18T11:19:56.667

7 年后，TextMate (v2.0.6) 显示了这些选项**：**

默认“排除文件匹配” **：**
  `{*.{o,pyc&#125;,Icon\r,CVS,_darcs,_MTN,\}arch\},blib,*\~.nib}`
默认“包括文件匹配” **：**
  `{*,.tm_properties,.htaccess}`
非文本文件**：**
  `{*.{ai,bz2,flv,gif,gz,icns,ico,jpg,jpeg,m4v,nib,o,pdf,png,psd,pyc,rtf,scssc,swf,tar,tbz,tgz,tif,tiff,zip},Icon\r}`

要在 TextMate 的文件浏览器窗格中显示所有隐藏的 (MacOS) 文件+文件夹，需要更改**什么？**

转到 TextMate > Preferences > Projects：
将“Include...”框正则表达式代码更改为**：**
  `{*,\.*}`
如下所示：
[![TextmMate-首选项-项目](../Images/3ef46aa72f41bca3f87b4f2cd3c07b82.png)](https://i.stack.imgur.com/euW7F.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T06:05:37.460

@Viktor Tron 的答案是完美的......只是想添加这个评论（但有一张图片，*所以我会添加这个答案*）......一旦你`.dot`通过他时髦的正则表达式显示“不可见”（）文件......你可能想要清除一些其他无关的文件，这些文件现在会使您的项目层次结构变得混乱......只需通过特定项目文件夹的“显示信息......”上下文菜单来完成......

在这个例子中，我想忽略（他妈的）`.DS_Store`文件。所以我只是添加`!\.DS_Store`到“文件模式”部分。

![在此处输入图像描述](../Images/4d7163ff3666b7cb2b1bab60554b5279.png)

# c# - 如何使用 C# 更改 txt 文档中的一行

> ID：13163362
> 
> 赞同：1
> 
> 时间：2012-10-31T17:19:10.840
> 
> 标签：c#

我这里有问题。我有一个 .txt 文件，其中一行包含“消息”，这是我要更改的行。但我无法让这段代码工作，任何人都可以帮助我吗？我这里有这段代码，它只用于替换字符串，但我不知道该怎么做，所以它改变了整行。

```
public void t()
{
   string filename = @"F:\test\test.txt";
   StringBuilder result = new StringBuilder();

   if (System.IO.File.Exists(filename))
   {
       using (StreamReader streamReader = new StreamReader(filename))
       {
           String line;
           while ((line = streamReader.ReadLine()) != null)
           {
              string newLine = String.Concat(line, Environment.NewLine);
              newLine = newLine.Replace("message", "HEJHEJ ");
              result.Append(newLine);
           }
       }
   }

   using (FileStream fileStream = new FileStream(filename, FileMode.Open, FileAccess.ReadWrite))
   {
       StreamWriter streamWriter = new StreamWriter(fileStream);
       streamWriter.Write(result);
       streamWriter.Close();
       fileStream.Close();
   }
} 
```

此代码将“”更改为“HEJHEJ”，但我想将 txt 文档中的整行更改为“HEJHEJ”，而不仅仅是“消息”部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:21:33.493

如何改变这个：

```
string newLine = String.Concat(line, Environment.NewLine);
newLine = newLine.Replace("message", "HEJHEJ ");
result.Append(newLine); 
```

对此：

```
string newLine;
if (line.Contains("message")) {
    newLine = String.Concat("HEJHEJ ", Environment.NewLine);
}
else {
    newLine = String.Concat(line, Environment.NewLine);
}
result.Append(newLine); 
```

当然，有很多更清洁的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:40:18.880

我的 txt 文档中包含以下内容：

消息你好世界

使用您的代码，此行更改为：

海杰杰

世界

//我希望它是：

海杰杰

所以最后，我希望它更改/替换为包含“消息”的整行文本

# c# - 从泛型类型参数派生的解决方法

> ID：13163368
> 
> 赞同：1
> 
> 时间：2012-10-31T17:19:21.560
> 
> 标签：c#, .net, generics, refactoring

我意识到不可能从泛型类型参数派生，并且我理解如果允许会出现的所有复杂情况。

*   [泛型常见问题解答](http://msdn.microsoft.com/en-us/library/aa479859.aspx#fundamentals_topic15)
*   [为什么做不到](https://stackoverflow.com/questions/1842636/why-cannot-c-sharp-generics-derive-from-one-of-the-generic-type-parameters-like/1842855#1842855)

所以我的问题是，我该如何解决这个问题？我正在尝试消除一些重复的代码，而我想出的最佳解决方案（这不是解决方案，因为它无法完成）将是执行以下操作：

```
public class Proxy<T> : T where T : CommonBaseClass 
```

我想要这样做的原因是覆盖`CommonBaseClass`.

这是我项目中的一些实际代码示例：

```
public class ReportingServiceProxy : ReportingService2010
{
    protected override WebResponse GetWebResponse (WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
        // Do override stuff here
        return response;
    }
}

public class ReportingExecutionProxy : ReportExecution2005
{
    protected override WebResponse GetWebResponse (WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
        // Do override stuff here
        return response;
    }
} 
```

在上面的示例中，`ReportingService2010`&`ReportExecution2005`类都派生自`SoapHttpClientProtocol`哪个派生自`HttpWebClientProtocol`。和 中的覆盖方法`GetWebResponse`和`GetWebRequest`两者的覆盖方法`HttpWebClientProtocol`是相同的。这些方法是我试图重构的代码重复存在的地方。

为了完整起见，这里有一些额外的代码，我在其中实现了上面的代码：

```
public abstract class SSRSReportBase<T> where T : new()
{        
    protected T ssrs;
    protected abstract void ServiceLogon();

    public SSRSReportBase()
    {
        ServiceLogon();
        // Do other common constructor work here.
    }
}

// Implementation #1
public class SSRSReportExecution : SSRSReportBase<ReportExecutionProxy>
{
    protected override void ServiceLogon()
    {
        ssrs.LogonUser("LoginName", null, null);
    }

    // Create additional wrapper methods for ReportExecution2005
}

// Implementation #2
public class SSRSReportingService : SSRSReportBase<ReportingServiceProxy>
{
    protected override void ServiceLogon()
    {
        ssrs.LogonUser("LoginName", null, null);
    }

    // Create additional wrapper methods for ReportingService2010
} 
```

我想出的唯一解决方案不是一个可能的解决方案，所以显然它不是一个解决方案。这是*错误*的代码：

```
public class ReportProxy<T> : T where T : HttpWebClientProtocol, new()
{
    protected override WebResponse GetWebResponse (WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
        return response;
    }
}

// Implementation #1
public class SSRSReportExecution : SSRSReportBase<ReportProxy<ReportExecution2005>>
{
}

// Implementation #2
public class SSRSReportingService : SSRSReportBase<ReportProxy<ReportingService2010>>
{
} 
```

**问题：** *所以我的问题是，如何重构此代码以删除重复代码（`GetWebRequest`和`GetWebResponse`覆盖）？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:37:00.030

一个解决方案是根本不使用泛型并使用工厂模式。而不是具有`BaseClass`和`new()`约束的通用参数。键入所有内容`BaseClass`并为`new()`. 这可以是完整的工厂类或轻量级工厂委托。

```
public interface IProtocolFactory
{
    ProtocolBaseClass Create();
}

public class SomeDerivedProtocolFactory : IProtocolFactory
{
    public ProtocolBaseClass Create()
    {
        return new SomeDerivedProtocol();
    }
} 
```

您甚至可以在工厂中添加额外的初始化代码。

```
public class ReportProxy
{
    private IProtocolFactory _factory;

    public ReportProxy(IProtocolFactory factory)
    {
        _factory = factory;
    }

    public void DoSomething()
    {
        ProtocolBaseClass protocol = _factory.Create();
        ...
    }
} 
```

使用委托

```
 private Func<ProtocolBaseClass> _createProtocol;

    public ReportProxy(Func<ProtocolBaseClass> createProtocol)
    {
        _createProtocol= createProtocol;
    }

    public void DoSomething()
    {
        ProtocolBaseClass protocol = _createProtocol();
        ...
    } 
```

# tornado - 数组是否为空。如何选择使用 Tornado 渲染页面

> ID：13163370
> 
> 赞同：0
> 
> 时间：2012-10-31T17:19:23.620
> 
> 标签：tornado, empty-list

在 Tornado Web 服务器的处理程序中，我有以下代码：

```
class NetworkSensorsHandler(BaseHandler):
# Requires authentication 
@tornado.web.authenticated
@tornado.web.removeslash
def get(self, nid):
    # Mandatory argument action = ['view' | 'edit']
    # Used only for visualization purposes
    action = self.get_argument('action').lower()
    if action not in ['view', 'edit']:
        raise tornado.web.HTTPError(404, "Unknown action: " + str(action))
    # Retrieve the current user 
    usr = self.get_current_user()
    usr_id = usr['id']

    self.lock_tables("read", ['nets_permissions as n'])
    perm = self.db.get("SELECT n.perm FROM nets_permissions as n \
                          WHERE n.network_id=%s AND n.user_id=%s", nid, int(usr_id))
    self.unlock_tables()

    # Check whether the user has access to the network
    perms = self.check_network_access(nid, perm['perm'])

    self.lock_tables("read", ['devices'])
    # Retrieve the sensors 
    sens = self.db.query("SELECT * FROM devices \
                          WHERE network_id=%s", nid)
    self.unlock_tables()
    # get network info
    net = self.get_network(nid);
    # get the permissions on the network
    writeable = self.get_network_access(net.id, PERM_WRITE)
    #s['commands'] = sensors_config[net['ntype']][s['type']]['commands']
    sens_config = sensors_config[net.ntype]

    # Retrieve the current user 
    net_id = net['id']

    # Retrieve the current rights
    self.lock_tables("read", ['users as u', 'nets_permissions as m'])
    user = self.db.query("SELECT u.id, u.name, n.perm FROM users as u LEFT OUTER JOIN (SELECT * FROM nets_permissions as m WHERE network_id=%s) as n on u.id = n.user_id WHERE (n.perm <> 3 or n.perm is NULL)", int(net_id))
    self.unlock_tables()      

    # Render the networks page
    self.render("sensors.html", sensors=sens, perms=perms, net=net, action=action, writeable=writeable, sens_config=sens_config, users=user) 
```

现在在 html 页面中，我有一部分代码是这样的：

```
 {% for sens in sensors %}
 .............
 {% end %} 
```

但很明显，当我有一些传感器然后我删除它们时，在最后一次传感器删除后我得到这个错误：

*UnboundLocalError：分配前引用的局部变量“sens”*

因为我认为 Tornado 中的 sens 数组是空的。如果我在数据库表中手动添加一个传感器，页面工作正常！

如果我将 if...end 块放在 {% if sensors %}...{% end %} 块中是相同的，因为页面没有同时识别变量 sens。

如果查询结果 sens 为空，如何排除 if...end 语句中的部分？或者我必须在 Tornado 处理程序中初始化 sens 变量？

非常感谢。请帮我！

**编辑**

完整的回溯是这样的：

```
Traceback (most recent call last):

 File "/usr/lib/python2.6/site-packages/tornado/web.py", line 988, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/tornado/web.py", line 1739, in wrapper
    return method(self, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/tornado/web.py", line 1096, in wrapper
    return method(self, *args, **kwargs)
  File "./wsn.py", line 699, in get
    self.render("sensors.html", sensors=sens, perms=perms, net=net, action=action, writeable=writeable, sens_config=sens_config, users=user)
  File "./wsn.py", line 349, in render
    tornado.web.RequestHandler.render(self, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/tornado/web.py", line 474, in render
    html = self.render_string(template_name, **kwargs)
  File "/usr/lib/python2.6/site-packages/tornado/web.py", line 586, in render_string
    return t.generate(**args)
  File "/usr/lib/python2.6/site-packages/tornado/template.py", line 253, in generate
    return execute()
  File "sensors_html.generated.py", line 363, in _execute
    _tmp = sens.id  # sensors.html:203 (via base.html:152)
UnboundLocalError: local variable 'sens' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:50:20.137

您能否输入完整的 HTML 或验证您的 sensors.html 中的第 203 行是否在您的“for”循环之间。

```
{% for sens in sensors %}
............. # line 203
{% end %} 
```

# android - 如何使用 glDrawTexfoes 缩放平铺位图？

> ID：13163371
> 
> 赞同：0
> 
> 时间：2012-10-31T17:19:23.697
> 
> 标签：android, opengl-es

我有一个专门为图形使用 glDrawTexfoes() 的游戏。当然是二维的。直到现在，我在绘制图形时都没有拉伸它们：我有 2 套，一套小一套，适用于不同的设备。这种方法已经达到了极限（坦率地说，我不应该使用它——但那是两年前的事了）。

所以现在我正在尝试使用一组图像并使用 glDrawTexfoes 来缩放它们以填充显示。除了我平铺图像的地方之外，它大部分都在工作。我已经包含了显示结果的图像。垂直线不应该在那里。

![按钮问题](../Images/1df2edcb312eb6b36c1d1b75d83b4498.png)

我已经尽可能多地使用纹理参数，但我无法摆脱这个问题，所以我转向 SO。这里有一些细节：图像不是2的幂。它没有使用精灵表，每个精灵都有自己的位图。

我使用此代码创建纹理

```
 bitmap.prepareTexture(_glMaxTextureSize);

    gl.glGenTextures(1, mTextureNameWorkspace, 0);

    int error = gl.glGetError();
    if (error != GL10.GL_NO_ERROR) {
        Log.d("Texture Load 1", "GLError: " + error + " (" + GLU.gluErrorString(error) + "): " + bitmap.toString() );
    }

    assert error == GL10.GL_NO_ERROR;

    bitmap.textureName = mTextureNameWorkspace[0];

    gl.glBindTexture(GL10.GL_TEXTURE_2D, bitmap.textureName);

    error = gl.glGetError();
    if (error != GL10.GL_NO_ERROR) {
        Log.d("Texture Load 2", "GLError: " + error + " (" + GLU.gluErrorString(error) + "): " + bitmap.toString());
    }

    assert error == GL10.GL_NO_ERROR;

    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);

    gl.glTexEnvf(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_REPLACE); //GL10.GL_REPLACE);

    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap.textureHanlde, 0);

    error = gl.glGetError();
    if (error != GL10.GL_NO_ERROR) {
        Log.d("Texture Load 3", "GLError: " + error + " (" + GLU.gluErrorString(error) + "): " + bitmap.toString());
    }

    bitmap.releaseTextureBitmap();

    assert error == GL10.GL_NO_ERROR;

    mCropWorkspace[0] = 0;
    mCropWorkspace[1] = bitmap.getHeight();
    mCropWorkspace[2] = bitmap.getWidth();
    mCropWorkspace[3] = -bitmap.getHeight();

    ((GL11) gl).glTexParameteriv(GL10.GL_TEXTURE_2D, GL11Ext.GL_TEXTURE_CROP_RECT_OES, mCropWorkspace, 0);

    error = gl.glGetError();
    if (error != GL10.GL_NO_ERROR) {
        Log.d("Texture Load 4", "GLError: " + error + " (" + GLU.gluErrorString(error) + "): " + bitmap.toString());
    }

    assert error == GL10.GL_NO_ERROR; 
```

使用以下代码创建 opengl 上下文

```
 /*
    * Some one-time OpenGL initialization can be made here probably based
    * on features of this particular context
    */
   gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);

   gl.glClearColor(0.0f, 0.0f, 0.0f, 1);
   gl.glShadeModel(GL10.GL_FLAT);
   gl.glDisable(GL10.GL_DEPTH_TEST);
   gl.glEnable(GL10.GL_TEXTURE_2D);
   /*
    * By default, OpenGL enables features that improve quality but reduce
    * performance. One might want to tweak that especially on software
    * renderer.
    */
   gl.glDisable(GL10.GL_DITHER);
   gl.glDisable(GL10.GL_LIGHTING);

   gl.glTexEnvx(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_MODULATE);

   gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT); 
```

视口按以下方式设置

```
 float scaleX = (float)w / _screenWidth;
  float scaleY =  (float)h / _screenHeight;
  final int viewportWidth = (int)(_screenWidth * scaleX);
  final int viewportHeight = (int)(_screenHeight * scaleY);
  gl.glViewport(0, 0, viewportWidth, viewportHeight);
  mScaleX = scaleX;
  mScaleY = scaleY;

  /*
   * Set our projection matrix. This doesn't have to be done each time we
   * draw, but usually a new projection needs to be set when the viewport
   * is resized.
   */
  float ratio = (float) _screenWidth / _screenHeight;
  gl.glMatrixMode(GL10.GL_PROJECTION);
  gl.glLoadIdentity();
  gl.glFrustumf(-ratio, ratio, -1, 1, 1, 10); 
```

最后，请原谅代码墙，绘图完成了

```
 gl.glShadeModel(GL10.GL_FLAT);
   gl.glEnable(GL10.GL_BLEND);
   gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);
   gl.glColor4x(0x10000, 0x10000, 0x10000, 0x10000);

   gl.glViewport(0, 0, (int)viewWidth, (int)viewHeight);
   gl.glMatrixMode(GL10.GL_PROJECTION);
   gl.glLoadIdentity();
   gl.glOrthof(0, viewWidth, viewHeight, 0.0f, 0.0f, 1.0f);
   gl.glMatrixMode(GL10.GL_MODELVIEW);
   gl.glLoadIdentity();

   gl.glEnable(GL10.GL_TEXTURE_2D);

   [loop over sprites]
           final float screenScale = 800/600f; // hardcoded to test stuff out
           final float snappedX = ((x  + transX)*screenScale); //+ e.speedX * interpolation;
           final float snappedY = _screenHeight - (y + height + transY ) * screenScale;//+ e.speedY * interpolation);
           final int texName = ob.textureName;

           gl.glBindTexture(GL10.GL_TEXTURE_2D, texName);

           _cropWorkspace[0] = left;
           _cropWorkspace[1] = top + height;
           _cropWorkspace[2] = width;
           _cropWorkspace[3] = -height;

           if( operation == Drawer.MIRROR_X )
           {
              _cropWorkspace[0] = left + width;
              _cropWorkspace[2] = -width;
           }

           ((GL11) gl).glTexParameteriv(GL10.GL_TEXTURE_2D, GL11Ext.GL_TEXTURE_CROP_RECT_OES, _cropWorkspace, 0);
           ((GL11Ext) gl).glDrawTexfOES(snappedX, snappedY, 1, width * screenScale, height * screenScale ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:42:14.450

I figured out the problem: due to the scaling and the oversampling, I needed to add a border/padding around the crop space of the bitmap to avoid the black lines.

```
_cropWorkspace[0] = left + padding;
_cropWorkspace[1] = top + height - padding;
_cropWorkspace[2] = width - padding * 2;
_cropWorkspace[3] = -(height-padding*2); 
```

# ios - iOS App 内存在 Debug 和 Adhoc 中的差异（分布）

> ID：13163374
> 
> 赞同：2
> 
> 时间：2012-10-31T17:19:33.910
> 
> 标签：ios, debugging, memory, distribution, adhoc

我的应用程序似乎在 Debug 中运行得非常完美。内存占用似乎是合理的，但无论出于何种原因，当我运行 Adhoc 版本的游戏时，内存占用显着增加。

以下是我在仪器中看到的照片：

调试：http: [//i.stack.imgur.com/JsjZ2.png](http://i.stack.imgur.com/JsjZ2.png)

临时：http : [//i.stack.imgur.com/MYlcr.png](http://i.stack.imgur.com/MYlcr.png)

我注意到 Adhoc 构建的对象列表中有四个 4MB 分配在调试中不存在。这是 Adhoc 构建时发生的特殊情况吗？两次运行我都与调试器断开连接。

这种内存增加导致应用程序在只有 256 MB 内存的设备上非常频繁地崩溃。我能做些什么来解决这个问题，还是刚刚发生的 iOS 问题？我不认为我们在构建设置上有任何差异会使应用程序膨胀得那么大，而且我们不会对我所知道的 Adhoc 构建进行任何特殊分配。

任何帮助将不胜感激。

谢谢！

# mp4 - 播放 MP4 内容

> ID：13163381
> 
> 赞同：0
> 
> 时间：2012-10-31T17:19:49.963
> 
> 标签：mp4, drm, playready

是否有任何工具可用于为 MP4 内容添加 Playready 保护？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:46:39.193

您必须使用 Microsoft Expression Encoder 来转换 MP4 -> WMV。然后您需要获取 PlayReady SDK 并运行加密器来加密 WMV 文件。

这会给你你所需要的。

如果您需要保护内容以便通过自适应流进行共享，请使用 Transformation Manager IIS 扩展。

# php - 使用 curl 加载 HTML 文件，使用 JS 提交外部表单

> ID：13163382
> 
> 赞同：1
> 
> 时间：2012-10-31T17:19:50.137
> 
> 标签：php, javascript, curl

我需要一点帮助：

我有 2 个文件

*   索引.php
*   form0.html

form0.html 自动填写表格并发送。当我直接填充时它工作正常，但是当我尝试通过我的 php 脚本访问它时它不会工作，除非我打印结果。

PHP代码：

```
<?php

set_time_limit(30);
$delay_time = 2; // time to wait before looping again.
$loop_times = 1; // number of times to loop.
$url = array("http://localhost/htmlfile0.html");

for($x=0;$x<$loop_times;$x++)
{
    echo count($url);
    for($i=0;$i<count($url);$i++)
    {
        $url1=$url[$i];
        $curl = curl_init(); // Initialize the cURL handler

        $header = array();
        $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
        $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
        $header[] = "Cache-Control: max-age=0";
        $header[] = "Connection: keep-alive";
        $header[] = "Keep-Alive: 30000";
        $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
        $header[] = "Accept-Language: en-us,en;q=0.5";
        $header[] = "Pragma: "; // browsers keep this blank.
        $var_host = parse_url($url1,PHP_URL_HOST);

        $cookieJar = 'cookies/'.$var_host.'.txt'; // change it according to your requirement. make dynamic for multi URL
        curl_setopt($curl, CURLOPT_HTTPHEADER, $header); // Browser like header
        curl_setopt($curl, CURLOPT_COOKIEJAR, $cookieJar);  // file for cookies if site requires
        curl_setopt($curl, CURLOPT_COOKIEFILE, $cookieJar); // file for cookies if site requires

        curl_setopt($curl, CURLOPT_HEADER, 0);
        curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9) Gecko/2008052906 Firefox/3.0');
        curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate');
        curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1); // Follow any redirects, just in case
        curl_setopt($curl, CURLOPT_AUTOREFERER, true);

        curl_setopt($curl,CURLOPT_RETURNTRANSFER, true); // set curl to return the page

        curl_setopt($curl, CURLOPT_POSTFIELDS, '');
        curl_setopt($curl, CURLOPT_POST, true); //post the form

        curl_setopt($curl, CURLOPT_URL, $url1); // Set the URL
        $ch=curl_exec($curl); // Display page                  
        curl_close($ch); // Close cURL handler

        echo date('h:i:s') . "\n";
        if($ch) echo "Success: ".$url1;
        else echo "Fail: ".$url1;
        echo '<hr>';
        sleep(5);
        echo date('h:i:s') . "\n";
    }
    if($x < $loop_times) sleep($delay_time);
}
?> 
```

我怎样才能通过这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:41:56.953

如果我错了，请纠正我，但您尝试使用 CURL 请求执行 JS，但至少不能直接执行。

当您直接进入文件时，它工作正常 - 您的浏览器的 JS 解释器正确执行 JS 并提交表单，但是通过使用 cURL 您正在做一些不同的事情 - 您正在将 http 请求标头发送到某个 URL(http://localhost/htmlfile0 .html) 并且您可能会也可能不会获取响应内容。

如果您确实获取内容（并在浏览器的 js 解释器中解析 JS），则 javascript**可能会被**设置为拒绝正确的操作，基于它是或不正确的 url。

例子：

*如果它是正确的 URL，请执行一些操作*- 如果您到达了代码`http://example.com/script.html`

*如果它不在 URL 之上，则不要执行任何操作*- 当您使用 cURL php 脚本执行操作以到达上述 URL 并以`http://localhost`.

# php - PHP Curl - 如果用户断开连接，则操作中止

> ID：13163385
> 
> 赞同：2
> 
> 时间：2012-10-31T17:19:59.593
> 
> 标签：php, curl

我在这里有这段代码，允许用户通过我的服务器下载文件：

```
$ch_2 = curl_init();
curl_setopt($ch_2, CURLOPT_USERAGENT, 'Mozilla/4.0');
curl_setopt($ch_2, CURLOPT_URL, $download_link);
curl_setopt($ch_2, CURLOPT_AUTOREFERER, true);
curl_setopt($ch_2, CURLOPT_BINARYTRANSFER, true);
curl_setopt($ch_2, CURLOPT_COOKIESESSION, false);
curl_setopt($ch_2, CURLOPT_FAILONERROR, true);
curl_setopt($ch_2, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch_2, CURLOPT_FORBID_REUSE, true);
curl_setopt($ch_2, CURLOPT_FRESH_CONNECT, true);
curl_setopt($ch_2, CURLOPT_NOSIGNAL, true);
curl_setopt($ch_2, CURLOPT_RETURNTRANSFER, false);
curl_setopt($ch_2, CURLOPT_CONNECTTIMEOUT, 60);
curl_setopt($ch_2, CURLOPT_TIMEOUT, 86400);
curl_setopt($ch_2, CURLOPT_LOW_SPEED_LIMIT, 10240);
curl_setopt($ch_2, CURLOPT_LOW_SPEED_TIME, 60);
curl_setopt($ch_2, CURLOPT_MAX_RECV_SPEED_LARGE, 500);
curl_exec($ch_2);
$curl_errno_2 = curl_errno($ch_2);
curl_close($ch_2); 
```

这些文件（链接在 $download_link 中）非常大，大约 1-3 GB。

**此代码工作正常，但我的问题是，当用户断开连接或中止下载时，脚本不会停止，直到服务器收到完整文件（$download_link）。**

如果我设置“ignore_user_abort(true)”，那么脚本会停止，但是是否可以在脚本中检查客户端断开连接或下载中止并且可以处理这个问题？例如，更新[MySQL](http://en.wikipedia.org/wiki/MySQL)数据库条目或其他内容？

我知道我可以通过使用“readfile()”或 fopen、fread 来更改此代码，但我将（并且必须）使用此[cURL](http://en.wikipedia.org/wiki/CURL)代码。

是否可以检查此用户断开连接或下载中止，因为我只允许用户每个[IP 地址](http://en.wikipedia.org/wiki/IP_address)建立一个下载连接？因此，如果他们中止下载，我将无法更新我的 MySQL 数据库以管理来自该 IP 地址的下载连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:27:32.930

您可以注册关机功能。这将在脚本完成、用户中止或调用 exit() 或 die() 时调用。[http://php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)

例如，（来自`php.net`）：

```
<?php
    function shutdown()
    {
        // This is our shutdown function, in
        // here we can do any last operations
        // before the script is complete.

        echo 'Script executed with success', PHP_EOL;
    }

    register_shutdown_function('shutdown');
?> 
```

那是你最接近的。

> “因为我只允许用户每个IP地址建立一个下载连接？”

我建议你这样做：

1.  使用[APC](http://php.net/manual/en/book.apc.php)存储当前正在下载内容的 IP 地址
2.  注册关闭功能以从 APC 中删除 IP 地址，从而允许他们下载其他内容

# svn - 提交从标签到主干的更改

> ID：13163387
> 
> 赞同：1
> 
> 时间：2012-10-31T17:20:04.760
> 
> 标签：svn, branching-and-merging

在 subversion repo 中，我不小心使用了标签而不是主干。从那以后我进行了一些更改，但它们没有反映回主干。如何将标签合并回主干？多谢你们

```
trunk     tag
  |
rev53 -- rev53
           |
          ...
           |
 ??<--   rev62 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T17:40:06.323

是的你可以。svn-repo 中的任何 URL 都可以与任何其他 URL 合并。标签（RO）和分支（RW）的分离只是惯例

**PS**：合并后不要忘记杀死坏标签

# php - 暂时停止客户端连接到套接字

> ID：13163388
> 
> 赞同：0
> 
> 时间：2012-10-31T17:20:05.110
> 
> 标签：php, sockets

我需要制作一个同时作为服务器和客户端的脚本。

这需要从倾听到尝试连接交替进行。

有没有办法在进入客户端模式并尝试连接时暂时阻止任何客户端连接？

据我所知，只有一种永久性的方法可以阻止这种情况，即重新开始倾听，我正在努力避免这种情况。

这个想法是这将在多个服务器上运行，并且必须连接到自身。

每次建立连接时，一旦他们交换了他们需要交换的内容，每一方都会从（客户端/目的地）列表中删除另一方。

因此，我需要一种方法来阻止侦听器，因为它在极少数情况下尝试连接，因为在极少数情况下，两个尝试在完全相同的时间相互连接并购买了等待被拾取的挂起，但这并没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:21:49.727

你可以这样做：

*   close() 监听套接字（可能在需要时重新打开它）
*   如果侦听套接字变得可读，则不要调用 accept() （您可以在几秒钟内摆脱这个，但它确实使用操作系统资源）
*   确实调用accept()，但立即close() 生成的套接字。（这是相当粗鲁的......）

以上三个选项来自系统调用/操作系统级别。我不知道 PHP 如何实现（或包装）它们。

# javascript - 我返回的数据不是用 connect.compress() 压缩的

> ID：13163393
> 
> 赞同：3
> 
> 时间：2012-10-31T17:20:21.577
> 
> 标签：javascript, node.js, gzip, connect

我正在尝试使用`connect.compress()`中间件来压缩我对客户端的响应。我可以部分让它工作，但是当我使用响应添加自己的响应时`res.end`，不再压缩。

压缩响应：

```
app = connect()
      .use(connect.compress())
      .use(connect.query())
      .use(connect.json()); 
```

未压缩的响应：

```
app = connect()
      .use(connect.compress())
      .use(connect.query())
      .use(connect.json())
      .use(function (req, res) {
        res.end('hello');
      }); 
```

**我希望能够回复我自己的消息，但仍将内容压缩。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-12T03:25:09.667

我对小型 HTTP 响应主体也有同样的问题。如果响应体的 Content-Length < compress' 阈值（默认为 1024 字节），则响应将**不会**被压缩，没有警告（参见[源代码](http://www.senchalabs.org/connect/compress.html)）。

解决方案是禁用阈值。

```
app.use(connect.compress({ threshold: false })); 
```

作为 Connect 的新玩家，我希望 API 会记录哪些默认值将到位（即：不指定默认值为 1024 字节的阈值）。我个人认为不指定阈值应将其默认为 0；我不想要一个阈值，否则我会在配置中指定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:08:58.980

尝试替换这个：

`res.end('hello');`

有了这个：

```
res.end(new Buffer('hello', 'utf8')); 
```

如果可行，则可能是您的连接中间件版本中的错误。

# sql - SQL部门给出错误的答案

> ID：13163395
> 
> 赞同：2
> 
> 时间：2012-10-31T17:20:29.810
> 
> 标签：sql, sql-server, sum, divide

> **可能重复：**
> [此 SQL Server 查询除法计算有什么问题？](https://stackoverflow.com/questions/11112462/what-is-wrong-with-this-sql-server-query-division-calculation)

我在 SQL 中划分两个值，例如

```
SELECT SUM(totalCalls), 
    SUM(EnteredBTN), 
    SUM(EnteredBTN) * 100 / SUM(totalCalls),
    SUM(EnteredACC), 
    SUM(EnteredACC) / SUM(totalCalls), 
    SUM(SentToTrans),
    SUM(SentToTrans) * 100 / SUM(totalCalls),
    SUM(Complete_Information), 
    SUM(Complete_Information) * 100 / SUM(SentToTrans) 
```

现在当我做`SUM(EnteredACC)/SUM(totalCalls)`ie **7/48**时，它应该给我**.14**但它给了**0**。

当我这样做时`SUM(EnteredACC)*100/SUM(totalCalls)`，它应该给出**14.58**（或四舍五入时为**15 ），但结果是****14**。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:24:05.130

答案很简单，很可能是列的数据类型，`EnteredACC`并且`totalCalls`是`INT`（或`SMALLINT`，`BIGINT`等），因此您的结果是`INT`. 因此，14.58 变为 14，0.14 变为 0。您需要对数据类型进行强制转换（隐式或显式）：

```
SUM(CAST(EnteredACC AS DECIMAL(16,4))/SUM(totalCalls) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:22:20.080

尝试：`select cast(cast(7 as decimal(18,2))/cast(48 as decimal(18,2)) as decimal(18,2))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:23:37.147

您需要浮点除法，而不是整数除法。

```
SELECT SUM(totalCalls), 
    SUM(EnteredBTN), 
    SUM(EnteredBTN)*100/CAST(SUM(totalCalls) as FLOAT),
    SUM(EnteredACC), 
    SUM(EnteredACC)/SUM(totalCalls), 
    SUM(SentToTrans),
    SUM(SentToTrans) * 100 / SUM(totalCalls),
    SUM(Complete_Information), 
    SUM(Complete_Information) * 100 / CAST(SUM(SentToTrans) as FLOAT) 
```

# javascript - 为什么我不能将一串数字指定为 javascript 对象中的键？

> ID：13163400
> 
> 赞同：-2
> 
> 时间：2012-10-31T17:20:57.173
> 
> 标签：javascript

这是在节点外壳中完成的：

```
> results = []
[]
> num = 5
5
> results[num] = []
[]
> results
[ , , , , , [] ]
> 
```

即使我尝试对数字进行字符串化：

```
> results = []
[]
> num = 5
5
> results[num.toString()] = []
[]
> results
[ , , , , , [] ]
> results['5'] = []
[]
> results
[ , , , , , [] ]
> 
```

似乎javascript将字符串解释为对象定义中的数字？

我希望结果如下所示：

```
results = [ { '5' : [
                   { key : value },
                   { key2 : value }
                  ]
            }
          ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:26:27.563

您的代码按书面方式工作，但缺少您想要的功能，因为您试图将数组索引设置为一个值，而不是使用非数组 javascript 对象。请参阅下面的示例

```
results = [];
results[0] = { '5': [ { /* ... * / } ] }; 
```

这将导致

```
[ { '5':  [ {} ] } ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:26:03.380

这就是您实现所需结构的方式，尽管我相信您可能会找到一种更简单的方法来表示这些数据。

```
var results = [];
results.push({
    '5': []
});
results[0]['5'].push({
    key: value
});
results[0]['5'].push({
    key2: value2
}); 
```

[http://jsfiddle.net/jumY2/](http://jsfiddle.net/jumY2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:53:11.440

这就是数组的工作方式。数组的长度由它的最高索引决定。如果给第五个位置赋值，则数组长度为 6。

您看到的输出（即`[ , , , , , [] ]`）只是控制台输出数组的方式。

它仍然只会分配一个元素，如果你这样做了，你可以看到`console.dir(results)`。

拥有像这样的稀疏数组非常好，但如果你真的想要像哈希图这样的东西，你应该使用对象而不是数组。

* * *

**注意：**`results[5]`所有属性（也是数组索引，因为数组只是特殊对象）都转换为字符串，所以和之间真的没有区别`results['5']`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T17:23:44.510

您不是在使用任何类型的对象。 `[]`是一个数组，并且具有某些神奇的属性——其中之一是非负整数外观的键扩展了数组。即使它们是字符串，也没关系——无论如何，所有对象键都是字符串，而数组仍然是对象。

如果您不希望数组对看起来是整数的键进行特殊处理，请尝试使用`{}`而不是。`[]`

```
> results = {}
{}
> results[5] = []
[]
> results
{ '5': [] } 
```

当然，如果您也希望将值设为一组键/值对，您可以考虑说`results[5] = {}`.

```
> results = {}
{}
> results[5] = {}
{}
> results[5]['key'] = 'value'
'value'
> results
{ '5': { key: 'value' } }
> results[5]['key2'] = 'value'
'value'
> results
{ '5': { key: 'value', key2: 'value' } } 
```

`[]`在大多数情况下，您要求的s 似乎有点损坏。Javascript 对象本质上是字典，并且将它们列表与一个键/值对每个似乎增加了复杂性而没有真正的收益。例外情况是，如果您希望每个键都有一堆值，*并且*愿意忍受每次要查找某些内容时都必须遍历整个对列表的丑陋。

# php - 代码点火器 | 将 Base64 图像保存到文件

> ID：13163402
> 
> 赞同：3
> 
> 时间：2012-10-31T17:21:08.657
> 
> 标签：php, jquery, codeigniter, image-processing, base64

我创建了一个自定义产品配置器，它将画布元素保存为 base64 编码图像。当我在浏览器中将图像作为图像 src 回显时，它可以正常工作。

所以像这样的工作：

```
$base64Image = $_POST['dataUrl'];
echo '<img src="'.$base64Image.'" />'; 
```

我的问题是codeigniter不会将此base64图像src添加到会话中，可能是因为它太大了。我尝试了一些人们用来将图像写入服务器的方法，但它们都会抛出错误。有谁知道我如何将此 base64 字符串写入服务器上的图像，例如 images/custom 文件夹中的“myimage.png”？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T17:25:47.033

你也可以使用

```
$decoded=base64_decode($base64Image);
file_put_contents('newImage.JPG',$decoded); 
```

参考链接：http: [//j-query.blogspot.in/2011/02/save-base64-encoded-canvas-image-to-png.html](http://j-query.blogspot.in/2011/02/save-base64-encoded-canvas-image-to-png.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:26:12.280

使用[tempnam()](http://www.php.net/manual/en/function.tempnam.php)在可由脚本写入的目录中获取唯一的文件名。您可以将会话变量“thisUsersTempFile”映射到该文件名。

或者，如果它不是临时的，您可以将关联存储在其他地方。如果您需要清理 tmp 文件，您可能需要这样做，因为我认为您无法挂钩会话破坏。您可以轮询现有会话并删除与已销毁会话关联的 tmpfile。您可以为此使用 cron 作业。

# tomcat7 - 设置了tomcat 7的芝麻2.6.9将不起作用

> ID：13163410
> 
> 赞同：1
> 
> 时间：2012-10-31T17:21:37.900
> 
> 标签：tomcat7, sesame

我正在尝试安装芝麻。我首先按照以下说明操作：[http ://www.openrdf.org/doc/sesame2/users/ch06.html](http://www.openrdf.org/doc/sesame2/users/ch06.html)

要将tomcat安装为prerequesite，我使用了本教程： http: [//www.howtogeek.com/howto/linux/installing-tomcat-6-on-ubuntu/](http://www.howtogeek.com/howto/linux/installing-tomcat-6-on-ubuntu/)（我在自动启动部分之前停止了）

设置教程说“部署过程是特定于容器的，请参阅容器的文档以了解如何部署 Web 应用程序。” 根据本教程：[http](http://www.snee.com/bobdc.blog/2009/02/getting-started-with-sesame.htmlmit) ://www.snee.com/bobdc.blog/2009/02/getting-started-with-sesame.htmlmit说

“为了在 Tomcat 上安装 Sesame 服务器，我将 openrdf-sesame-2.2.4\war 中的两个 war 文件复制到 apache-tomcat-6.0.18\webapps。关闭并重新启动 Tomcat 后，将浏览器发送到ttp://localhost:8080/openrdf-workbench 和 ttp://localhost:8080/openrdf-sesame 显示了有关这些应用程序如何正常运行的欢迎屏幕。”

我做到了。ttp://localhost:8080 显示一个 tomcat 欢迎页面， ttp://localhost:8080/openrdf-workbench 显示一个站点，但是 ttp://localhost:8080/openrdf-sesame 只给出 404 错误。我也不能在工作台站点上做任何事情，因为它迫使一个人留在“更改服务器”输入字段上。尝试在输入字段下方输入“ie ttp://localhost:8080/openrdf-sesame”所建议的路径仅显示“无效的服务器 URL”在页面顶部它还显示

```
Current Selections
Sesame server   none    change
Repository  none    change 
```

这看起来与应有的完全不同，就像这里一样：http: [//www.jenitennison.com/blog/node/153](http://www.jenitennison.com/blog/node/153)

我挖掘了更多，发现了这个：[http](http://www.openrdf.org/doc/sesame/users/ch02.html) ://www.openrdf.org/doc/sesame/users/ch02.html 但它似乎已经过时了，因为根本没有 [SESAME_DIR]/WEB-INF/system.conf .example 在那里。我还发现了这个：[http](http://www.openrdf.org/forum/mvnforum/viewthread?thread=658) ://www.openrdf.org/forum/mvnforum/viewthread?thread=658但是也没有“示例文件”要重命名。

我也用tomcat bin文件夹中的shutdown.sh脚本关闭了tomcat，并用startup.sh脚本重新启动了几次，但这似乎也没有任何帮助。

我错过了什么吗？正如“芝麻入门”博客文章指出的那样，将它们复制到 webapps 文件夹应该就足够了，但它不能正常工作......

谢谢你的帮助！

* * *

编辑 1： 直接访问 localhost:8080/openrdf-sesame/home/overview.view 的解决方法很遗憾也不起作用。我也不明白，如果芝麻服务器运行正常并且问题只是重定向，工作台应该找到服务器，但事实并非如此。

* * *

编辑 2： catalina.2012-11-01.log 包含以下内容：

```
Nov 01, 2012 11:49:28 AM org.openrdf.workbench.proxy.WorkbenchGateway canConnect
WARNING: java.io.FileNotFoundException: http://localhost:8080/openrdf-sesame/protocol
java.io.FileNotFoundException: http://localhost:8080/openrdf-sesame/protocol
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1613)
    at java.net.URL.openStream(URL.java:1037)
    at org.openrdf.workbench.proxy.WorkbenchGateway.canConnect(WorkbenchGateway.java:130)
    at org.openrdf.workbench.proxy.WorkbenchGateway.isValidServer(WorkbenchGateway.java:303)
    at org.openrdf.workbench.proxy.WorkbenchGateway.findWorkbenchServlet(WorkbenchGateway.java:209)
    at org.openrdf.workbench.proxy.WorkbenchGateway.service(WorkbenchGateway.java:100)
    at org.openrdf.workbench.base.BaseServlet.service(BaseServlet.java:40)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.openrdf.workbench.proxy.CookieCacheControlFilter.doFilter(CookieCacheControlFilter.java:52)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

它似乎在寻找一些协议文件，但该文件甚至不存在于 war 包中，所以我有点不知道它想要什么......

* * *

编辑 3：因此，在试图找出到底出了什么问题时，我厌倦了根据下面的答案查找它，以便使用 Tomcat 的 Web 应用程序管理器进行查找。虽然我仍然没有让那个工作（尽管编辑了 tomcat-users.xml，但仍然出现“403 Access Denied”错误），但在此过程中一定是意外地完成了魔法。我唯一的猜测是关闭它并重新启动它至少十几次可能会有所帮助，因为除了编辑 tomcat-users.xml 文件并在每次尝试让管理器工作时重新启动它之外，我真的没有做任何其他事情。我不知道，为什么这在以前没有帮助，通过，我之前至少重启过 4 次 tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:23:22.043

[这里](http://gasw.blogspot.co.uk/2010/09/deploying-sesamewar-into-tomcat.html)有一个不错但有点过时的演练，当我遇到你上面提到的同样的麻烦时，它给了我需要的关键提示。

这种策略有一个关键区别：它*从 Tomcat 管理器*( `/home/joe/sesame/core/http/server/target/openrdf-sesame.war`)中部署 WAR 文件（对我来说：） ，而不是通过[docs](http://www.openrdf.org/doc/sesame/users/ch02.html#d0e233)中的命令行调用。也许关键特性只是它部署到而不是......*`http://localhost:8080``jar -xf [PATH/TO/]sesame.war``openrdf-sesame``sesame`*

 *无论如何，现在当我访问时，`http://localhost:8080/openrdf-sesame/home/overview.view`我收到一个抱怨说我没有使用 OpenRDF 工作台......但除此之外一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:47:22.807

FileNotFoundException 表示 Sesame 服务器没有运行。但是，它并没有告诉我们*为什么*它没有运行。您可以仔细检查您是否已`openrdf-sesame.war`正确部署文件？如果您进入 Tomcat 的 Web 应用程序管理器，OpenRDF Sesame webapp 是否列出（并已启动）？tomcat 日志中是否还有其他指示问题的错误或警告？

如果部署正确，另一个可能的原因是芝麻服务器没有足够的权限写入磁盘。Sesame 为配置文件和持久化数据创建一个应用程序数据目录，默认情况下（在 Linux 上）在`$HOME/.aduna`（其中 $HOME 是运行 Tomcat 的用户的主目录）中。你能验证它有足够的权限在那里写吗？我隐约记得这是 Ubuntu Linux 发行版附带的默认 Tomcat 设置的问题。

如果您无法更改权限，您还可以为 Sesame 配置不同的位置以用作数据目录。有关详细信息，请参阅[Sesame 文档第 5 章](http://www.openrdf.org/doc/sesame2/users/ch05.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-16T22:05:12.397

我意识到这个答案对你没有太大帮助，但我遇到了和你一样的问题，我找到了一个对我有用的解决方案。就我而言，这只是权限问题：一旦我运行

```
chmod -R 777 /location/of/my/webapps 
```

一切都开始顺利进行。我希望这可以帮助任何偶然发现这个问题的人。

ps：请注意，在任何文件夹上设置 777 权限通常被认为是不明智的，因此请尝试查阅 chmod 的手册页并尝试一些组合，看看哪个最适合您。*

# http - HTTP GET 请求结构

> ID：13163414
> 
> 赞同：2
> 
> 时间：2012-10-31T17:21:42.607
> 
> 标签：http, get-request

考虑以下超链接：

```
<a href="http://www.cs.rutgers.edu/∼shklar/"> 
```

浏览器会提交什么 HTTP/1.0 请求？浏览器会提交什么 HTTP/1.1 请求？

如果将浏览器配置为联系 HTTP 代理，这些请求会改变吗？如果是，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:00:17.170

虽然您可以`tcpdump`用来转储实际的网络流量，`curl`但从命令行测试 HTTP 对话肯定更方便。

HTTP/1.0 请求：

```
curl -v -0 http://www.cs.rutgers.edu/∼shklar/
* About to connect() to www.cs.rutgers.edu port 80 (#0)
*   Trying 128.6.4.24...
* connected
* Connected to www.cs.rutgers.edu (128.6.4.24) port 80 (#0)
> GET /∼shklar/ HTTP/1.0
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: www.cs.rutgers.edu
> Accept: */*
> 
< HTTP/1.1 404 Not Found
< Date: Wed, 31 Oct 2012 17:57:31 GMT
< Server: Apache/1.3.26 (Unix)
< Content-Type: text/html; charset=iso-8859-1
< Connection: close 
```

HTTP/1.1 请求：

```
curl -v http://www.cs.rutgers.edu/∼shklar/ 
* About to connect() to www.cs.rutgers.edu port 80 (#0)
*   Trying 128.6.4.24...
* connected
* Connected to www.cs.rutgers.edu (128.6.4.24) port 80 (#0)
> GET /∼shklar/ HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: www.cs.rutgers.edu
> Accept: */*
> 
< HTTP/1.1 404 Not Found
< Date: Wed, 31 Oct 2012 17:59:47 GMT
< Server: Apache/1.3.26 (Unix)
< Content-Type: text/html; charset=iso-8859-1
< Transfer-Encoding: chunked 
```

使用`-x (or --proxy) <[protocol://][user@password]proxyhost[:port]>`开关使用代理并查看结果。

更多关于 curl 的信息：http: [//curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)

# javascript - mousedown jquery 除了与否

> ID：13163417
> 
> 赞同：1
> 
> 时间：2012-10-31T17:21:57.550
> 
> 标签：javascript, jquery, exception

我有以下 javascript，如果用户单击 .field_trip_mini_div 内的删除 div，我不希望触发此 mousedown 函数。删除 div id 是“删除”。如果用户单击删除 div，我应该添加什么代码以便鼠标按下功能不会继续？我尝试将第一行更改为

```
$(".field_trip_mini_div :not('#delete')").live({ 
```

但这没有用。有没有办法可以在第二行代码中阻止它？

```
$(".field_trip_mini_div").live({  
    mousedown: function(){     
    $.ajax({
        type: "POST",
        url: "/field_trips/"+selected_field_trip_id+"/reload_div",
        data: {id: selected_field_trip_id},
        success: function(response)
           {
            $('#selected_fieldTrip_div').html(response);
           }
        });
}); 
```

编辑：我最初使用#，谢谢你的回答，但这是一个堆栈溢出输入错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:23:30.467

由于 delete 是 id use #，我建议你使用[**on**](http://api.jquery.com/on/) as `live is deprecated`。

```
$(".field_trip_mini_div :not('#delete')").live({ 
```

或者您可以在单击删除时跳过代码

```
$(".field_trip_mini_div").live({  
    mousedown: function(evt){    
    if (evt.target.id == "delete") 
       return;
      $.ajax({
          type: "POST",
          url: "/field_trips/"+selected_field_trip_id+"/reload_div",
          data: {id: selected_field_trip_id},
          success: function(response)
             {
              $('#selected_fieldTrip_div').html(response);
             }
          });        
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:24:53.117

用这个：

```
$(".field_trip_mini_div :not('#delete')").on({ 
```

注意：不要使用“live”，因为它已被弃用；改用“开”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:25:07.007

`delete`里面有元素吗`field_trip_mini_div`？如果是这样，您可以使用以下命令检查单击元素的目标 ID `e.target`：

```
$(".field_trip_mini_div").live({  
    mousedown: function(e){    
      if ($(e.target).attr("id")!= "delete") // This line right here
      {
        $.ajax({
            type: "POST",
            url: "/field_trips/"+selected_field_trip_id+"/reload_div",
            data: {id: selected_field_trip_id},
            success: function(response)
               {
                $('#selected_fieldTrip_div').html(response);
               }
            });
      }
  }); 
```

有关事件和`event`对象的一些信息：http: [//www.w3schools.com/jsref/dom_obj_event.asp](http://www.w3schools.com/jsref/dom_obj_event.asp)

# shell - PuTTY 运行 sh 无法安装 fileinfo 扩展

> ID：13163421
> 
> 赞同：-1
> 
> 时间：2012-10-31T17:22:04.757
> 
> 标签：shell, ssh, command, putty, fileinfo

我有一个[DreamHost](http://en.wikipedia.org/wiki/DreamHost)服务器，我想安装 fileinfo 扩展。

我设法创建了一个`php.ini`很酷的自定义文件，但我完全被[他们文档](http://wiki.dreamhost.com/Fileinfo)中的这一部分困住了：

> 如果您使用基于 Windows 的编辑器创建此文件，请确保从 shell 运行“dos2unix fileinfo_ext.sh”。

所以我在 Windows 上运行 PuTTY，我对这部分一无所知。

我复制`fileinfo_ext.sh`到我`cgi-bin`的自定义`php.ini`文件所在的目录，但我该如何走得更远？我完全迷失了如何运行这个命令。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:28:54.433

"dos2unix" 是一个用于将文件从 Windows 行结尾 (CR+LF) 转换为 Unix 行结尾 (LF) 的实用程序。

因此，如果您使用[记事本](http://en.wikipedia.org/wiki/Notepad_%28software%29)编辑文件，它将具有 Windows 行结尾。因此，在通过 FTP 发送文件之前（或者如果您有 ssh 访问权限并且他们有 dos2unix，则在主机上执行它）之前，应该在您的计算机上使用 dos2unix（对于该文件）。

但是，如果您已经使用了支持转换为 Unix 行尾的编辑器，例如[UltraEdit](http://en.wikipedia.org/wiki/UltraEdit)或[Notepad++](http://en.wikipedia.org/wiki/Notepad_%28software%29)，那么您只需要在保存文件之前执行“转换为 Unix”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:28:18.553

您按照消息中的说明运行命令。SSH 到服务器并登录。然后`cd`到文件的位置，类似于`cd /path/to/your/site/cgi-bin`然后运行`dos2unix fileinfo_ext.sh`​​.

我希望这有帮助。

# javascript - 有没有办法在 PhantomJS 中请求新的 Tor 身份？

> ID：13163422
> 
> 赞同：0
> 
> 时间：2012-10-31T17:22:12.887
> 
> 标签：javascript, ajax, phantomjs, tor

我正在尝试使用 PhantomJS 抓取网站，同时使用 Tor 更改我的 IP 地址。我想知道有没有办法在 Javascript 中请求新的 Tor 身份。我见过[这个问题](https://stackoverflow.com/questions/11585681/request-new-identify-from-tor-in-javascript)，但不明白如何使用 AJAX 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:06:18.763

你并不完全“在 AJAX 中做”。相反，您使用 AJAX 调用服务器端脚本，该脚本执行您尝试执行的任何操作。在这种情况下，这意味着将 AJAX 请求写入调用您链接到的函数的 PHP 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T07:51:26.430

您必须使用服务器端 javascript、Node JS。使用 linux 服务器并运行 `apt-get install tor`

这将在您的服务器上创建一个守护程序代理，您可以在其中连接 PhantomJS。

# qunit - 如何测试 Web SQL 异常？

> ID：13163427
> 
> 赞同：0
> 
> 时间：2012-10-31T17:22:21.543
> 
> 标签：qunit, web-sql

发布在 jQuery 论坛[http://forum.jquery.com/topic/how-do-i-test-for-web-sql-exceptions](http://forum.jquery.com/topic/how-do-i-test-for-web-sql-exceptions)但我想我会在这里问。我正在尝试针对我正在开发的 Web SQL api 编写单元测试。我要考虑的情况是未提供参数时。下面是一些示例代码：

Web SQL 帮助器对象：

```
var sql = function () {
return {
    getDb: function () {            
        return openDatabase("sampleDb", "1.0", "sampleDb", 5 * 1024 * 1024);
    },

    initDb: function () {
        var db = this.getDb();
        if (db) {
            db.transaction(function (tx) {
                tx.executeSql("CREATE TABLE IF NOT EXISTS SampleTable (Key TEXT UNIQUE NOT NULL,Value TEXT NOT NULL)");
            });
        }
    },

    insertRecord: function (key, value) {
        var db = this.getDb();
        if (db) {
            db.transaction(function (tx) {
                tx.executeSql("INSERT INTO SampleTable (Key, Value) VALUES (?, ?)", [key, value],
                    function () {
                    },
                    function (tx, error) {
                        throw (error.message);
                    });
            });
        }
    }
} 
```

}();

下面是我的单元测试：

```
asyncTest("test1", function () {
raises(function () {
    sql.initDb();
    sql.insertRecord(null, null);
    start();
},
"exception expected"); 
```

});

我预计会引发异常，因为未提供键和值参数；但是，当测试完成执行时，它说没有抛出异常。虽然我没有显式抛出异常，但会引发异常，因为如果不提供 key 和 value 参数就无法执行动态生成的 sql 语句。

是否可以编写测试来解释这些类型的场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:13:20.010

为什么不先测试异步异常测试？据我所知，您的测试与 WebSQL 无关。

qunit 异步测试也可能需要`expect()`在调用之前`start()`。如果不是，则所有测试都通过，无需等待异步工作流。

# javascript - 使用 HREF 的 id 将动态数据定位在 TD 给定的差异中。页面

> ID：13163429
> 
> 赞同：0
> 
> 时间：2012-10-31T17:22:29.517
> 
> 标签：javascript, jquery

是否有一种非 hackish 的方式来附加或使用一些元素（由 id 表示）并附加到它，但在块元素之前。不知道如何解释这一点。

我有各种页面。而且我必须插入一些数据（通过 ajax 生成）。现在，在页面加载后检索此数据，因此，我必须注入一些内容 - 但因为页面不同（我想使用插件，所以我可以将其放入这些页面并繁荣 - 动态内容是放置适当）。

** 编辑 ::: 如果 HREF 之后有文本，我*插入*的项目必须在它之后（以及后续的 br 标记）。我在想，也许我在 href 之后插入到最后一个块元素（div），或者如果不是，则插入 div 的底部（在最后一个示例中注明）。

对于某些页面，布局是这样的..

```
<td>
  <div>
     <a href="someurl" id="uniqueIDhere">monsters</a>  come see this show!!<br>
     // span with content injected here
  </div> 
```

或者

```
<td>
  <div>
     <a href="someurl" id="uniqueIDhere">monsters</a>
     // span with content injected here
  </div> 
```

或者

```
 <td>
     <a href="someurl" id="uniqueIDhere">monsters</a>
     // span with content injected here
 </td> 
```

或者

```
<td>
  <div>
    <span>
     <a href="someurl" id="uniqueIDhere">monsters</a> yo you yo yo yo<br>
    </span>
     // span with content injected here
  </div> 
```

因此，该 href 可以包含在 DIV 或 SPAN 中，也可以不包含在 TD 中。但它总是在 TD 中。所以，基本上我想在 TD 的最后一个 div 中注入我的“新动态”数据，或者如果没有，就在 td 的末尾（但仍在其中）。

有任何想法吗？我想使用href ID（应该使用它，因为我必须这样做一些链接），获取父TD，然后以某种方式附加到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:30:29.560

好像您正在寻找 jQuery[`after()`](http://api.jquery.com/after/)方法：

> 在匹配元素集中的每个元素之后插入由参数指定的内容。

```
$("#uniqueIDhere").after("<div>INSERT WHATEVER HERE</div>") 
```

**编辑**：

再次阅读此问题后，我想您可能正在寻找[`.append()`](http://api.jquery.com/append/)：

```
$("div").has("#uniqueIDhere").append("<div>INSERT WHATEVER HERE</div>")​ 
```

这里我们使用[`.has()`](http://api.jquery.com/has/)过滤`div`不包含的元素列表，`uniqueIDhere`然后使用[`.append()`](http://api.jquery.com/append/)添加文本、html等到..的末尾`div`。

**[例子](http://jsfiddle.net/hLFmS/4/)**

# java - JAXB 编组由 XmlAdapter 创建的 ArrayList

> ID：13163430
> 
> 赞同：4
> 
> 时间：2012-10-31T17:22:30.450
> 
> 标签：java, arraylist, jaxb, marshalling, xmladapter

`HashMap`我想使用 .xml 来调整字段的 XML 表示`XmlAdapter`。我用一个`ArrayList`来做到这一点。但是，在编组时`ArrayList`根本没有编组。这是为什么？

编码

```
@XmlRootElement
public class Foo {

    private HashMap<String, String> hashMap;

    public Foo() {
        this.hashMap = new HashMap<String, String>();
    }

    @XmlJavaTypeAdapter(HashMapAdapter.class)
    public HashMap<String, String> getHashmap() {
        return hashMap;
    }

    public void setHashmap(HashMap<String, String> hashMap) {
        this.hashMap = hashMap;
    }

} 
```

```
public final class HashMapAdapter extends XmlAdapter<ArrayList<HashMapEntry>, HashMap<String, String>> {

    @Override
    public ArrayList<HashMapEntry> marshal(HashMap<String, String> arg0) throws Exception {
        ArrayList<HashMapEntry> result = new ArrayList<HashMapEntry>();
        for(Entry<String, String> entry : arg0.entrySet())
            result.add(new HashMapEntry(entry.getKey(), entry.getValue()));
        return result;
    }

    @Override
    public HashMap<String, String> unmarshal(ArrayList<HashMapEntry> arg0) throws Exception {
        HashMap<String, String> result = new HashMap<String, String>();
        for(HashMapEntry entry : arg0)
            result.put(entry.key, entry.value);
        return result;
    }

} 
```

```
public class HashMapEntry {

    @XmlElement 
    public String key;

    @XmlValue
    public String value;

    public HashMapEntry() {

    }

    public HashMapEntry(String key, String value) {
        this.key = key;
        this.value = value;
    }
} 
```

结果

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><foo><hashmap/></foo> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:37:24.453

在您的情况下，`XmlAdapter`您需要将 转换`HashMap`为具有`List`属性的对象的实例，而不是直接转换为`ArrayList`.

**哈希映射适配器**

```
package forum13163430;

import java.util.*;
import java.util.Map.Entry;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public final class HashMapAdapter extends XmlAdapter<HashMapAdapter.AdaptedHashMap, HashMap<String, String>> {

    @Override
    public AdaptedHashMap marshal(HashMap<String, String> hashMap) throws Exception {
        AdaptedHashMap adaptedHashMap = new AdaptedHashMap();
        for(Entry<String, String> entry : hashMap.entrySet()) {
            adaptedHashMap.item.add(new HashMapEntry(entry.getKey(), entry.getValue()));
        }
        return adaptedHashMap;
    }

    @Override
    public HashMap<String, String> unmarshal(AdaptedHashMap adaptedHashMap) throws Exception {
        HashMap<String, String> result = new HashMap<String, String>();
        for(HashMapEntry entry : adaptedHashMap.item)
            result.put(entry.key, entry.value);
        return result;
    }

    public static class AdaptedHashMap {
        public List<HashMapEntry> item = new ArrayList<HashMapEntry>();
    }

    public static class HashMapEntry {

        @XmlAttribute 
        public String key;

        @XmlValue
        public String value;

        public HashMapEntry() {
        }

        public HashMapEntry(String key, String value) {
            this.key = key;
            this.value = value;
        }
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xmladapter-jaxbs-secret-weapon.html](http://blog.bdoughan.com/2010/07/xmladapter-jaxbs-secret-weapon.html)

* * *

**更新**

> 谢谢，这行得通。但是，随后我在生成的 XML 中获得了额外级别的注释。有没有办法避免这种情况？

如果您使用[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)作为您的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)提供程序，那么您可以利用`@XmlPath`此用例的扩展。我将在下面用一个例子来演示。

**富**

在附加的`hashmap`属性上，`@XmlJavaTypeAdapter`我添加了 MOXy 的`@XmlPath`注释。的 XML 路径`"."`指示应将子元素编组到父 XML 元素中。

```
package forum13163430;

import java.util.HashMap;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
public class Foo {

    private HashMap<String, String> hashMap;

    public Foo() {
        this.hashMap = new HashMap<String, String>();
    }

    @XmlPath(".")
    @XmlJavaTypeAdapter(HashMapAdapter.class)
    public HashMap<String, String> getHashmap() {
        return hashMap;
    }

    public void setHashmap(HashMap<String, String> hashMap) {
        this.hashMap = hashMap;
    }

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

由于 MOXy 是符合 JAXB (JSR-222) 的实现，因此可以使用标准 API 将对象从 XML 转换为 XML。

```
package forum13163430;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum13163430/input.xml");
        Foo foo = (Foo) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**输入.xml/输出**

下面是运行演示代码的输入和输出。

```
<?xml version="1.0" encoding="UTF-8"?>
<foo>
   <item key="b">B</item>
   <item key="c">C</item>
   <item key="a">A</item>
</foo> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)

# c# - 停止电脑输出显示

> ID：13163439
> 
> 赞同：4
> 
> 时间：2012-10-31T17:23:12.540
> 
> 标签：c#, .net, windows

我希望能够停止计算机输出到显示器或能够暂时隐藏此输出。我使用了一个名为 AnyPlace 的 VNC 应用程序，它允许控制计算机隐藏显示器的输出并停止键盘输入，但我不知道他们是如何做到的。由于您仍然可以从远程应用程序控制计算机，我假设他们不只是加载黑屏应用程序。我想过这样做，但我不能保证我会成为最重要的应用程序。当我使用控制系统关闭应用程序并在后台打开另一个应用程序然后恢复输出时，我需要能够隐藏屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:38:20.957

某些程序使用 DPMS 强制显示器进入省电模式。其他人可能会使用 HUD 覆盖在屏幕顶部绘制而实际上没有窗口（这些通常与音量控制键等一起使用）。在 Windows 中，您可以使用“窗口站/桌面”GUI 包含 API 临时切换到整个其他桌面。

# asp.net - asp.net 链接按钮属性

> ID：13163441
> 
> 赞同：0
> 
> 时间：2012-10-31T17:23:26.100
> 
> 标签：asp.net, asplinkbutton

我有一个应用程序，它基于链接按钮中的 .text 属性（以编程方式设置，通常是“添加”或“保存”），系统添加或保存到数据库。链接按钮是独立的，不在网格视图或类似的东西中。现在客户只想在所有情况下都看到“保存”，这使我的逻辑无效。我希望尽可能多地使用应用程序的现有逻辑。不幸的是，链接按钮没有像.nonvisibletext 这样的属性，所以我想知道它是否有一个属性，我可以在其中放入一个我不使用的字符串，我正在查看CommandName。我确实在gridview处理中使用它，但不在链接按钮中使用。我可以安全地使用 CommandName 而不是 Text 吗？或者这个属性有内部使用吗？一世' 到目前为止，我在研究中没有发现任何表明一种或另一种方式的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:28:03.320

据我所知，您可以毫无问题地使用 LinkBut​​ton 的 CommandName/Command Argument 属性。唯一的变化是应该删除“OnClick”事件并添加“OnCommand”。

希望这可以帮助！！

# c# - 检测winforms中的箭头键

> ID：13163447
> 
> 赞同：7
> 
> 时间：2012-10-31T17:23:42.230
> 
> 标签：c#, .net, keypress

> **可能重复：**
> [向上、向下、向左和向右箭头键不触发 KeyDown 事件](https://stackoverflow.com/questions/1646998/up-down-left-and-right-arrow-keys-do-not-trigger-keydown-event)

首先看代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
namespace winform_project
{
 public partial class Form1 : Form
 {

    public Form1()
    {
        InitializeComponent();

    }

    private void Form1_KeyPress(object sender, KeyPressEventArgs e)
    {
        MessageBox.Show("Hello");
    }
 }
} 
```

我能够检测到字母数字键。但是我无法检测到箭头键。

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-31T18:05:00.247

好的，经过一些研究，我发现处理箭头键事件的最简单方法是覆盖 ProcessCmdKey 方法。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
     if(keyData == Keys.Left)
     {
       MessageBox.Show("You pressed Left arrow key");
       return true;
     }
     return base.ProcessCmdKey(ref msg, keyData);
} 
```

希望这可以帮助。

# swiftmailer - 从我的网站上的 Authorize.net 交易发送电子邮件收据

> ID：13163460
> 
> 赞同：0
> 
> 时间：2012-10-31T17:24:22.993
> 
> 标签：swiftmailer, authorize.net

我在我的网站上使用 Authorize.net AIM 来接受捐款/付款。Authorize.net 会在客户购买后自动向他们发送电子邮件收据，但我希望禁用此功能并使用我自己的电子邮件收据模板（在 .html 中）发送电子邮件。
以前，在我从我的网站上的表单中将用户名和电子邮件地址插入 mySQL 后，我使用这种格式发送了电子邮件——效果很好。我现在希望做同样的事情，但不是将信息插入数据库，而是使用他们捐赠的信息（金额、电子邮件地址、确认）向他们发送电子邮件。

我正在使用 Swift 发送电子邮件。这很好用。

我将如何使用 php 做同样的事情，但使用来自我的 authorize.net 编码的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-23T07:40:45.377

您可以使用 Authorize.net 的 API 和 SDK，并使用 transId 调用[GetTransactionDetailsRequest](https://github.com/AuthorizeNet/sample-code-php/blob/master/TransactionReporting/get-transaction-details.php)，并使用您自己的自定义 HTML 电子邮件模板将结果通过管道发送到客户的电子邮件。

# linux - 基本的linux内核模块

> ID：13163462
> 
> 赞同：0
> 
> 时间：2012-10-31T17:24:32.980
> 
> 标签：linux, kernel-module

每个版本的linux都有一些基本的内核模块吗？比如每个版本的linux都加载parport模块吗？

我想在内存中搜索一些模块名称，并获取模块的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:49:33.113

> > Is there some basic kernel modules in linux in every version?

No, there isn't some kernel module that is present in every version. It is still possible (and, for some environments, preferred) to disable kernel module support altogether.

> > I want to search some module name in the memory, and get the location of the module.

Check for the existence of `/proc/modules`. If it exists, parse it. Each module is listed there. The first field of each line is the name of a module. The sixth field is its address.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:46:21.023

要获取正在运行的内核中的所有模块，您可以使用该`lsmod`命令。

要搜索特定模块，您可以将其 grep 为...

```
lsmod | grep "your_module_without_inverted_comma" 
```

它将提供一些信息作为模块使用的大小。

用于获取模块的内存位置

```
cat /proc/modules | grep "your_module_without_inverted_comma" 
```

# hadoop - 为什么Reducer.class 不能在Hadoop MapReduce 中用作真正的reducer？

> ID：13163463
> 
> 赞同：0
> 
> 时间：2012-10-31T17:24:38.050
> 
> 标签：hadoop, mapreduce

我注意到 Mapper.class 可以用作阶段中的真正映射器，以及用户定义的 reducer。例如，

```
Phase 1:
Mapper.class ->  WordCountReduce.class 
```

这将起作用。但是，Reducer.class 不能以相同的方式使用。即类似

```
Phase 2:
WordReadMap.class ->  Reducer.class 
```

不管用。

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:33:27.410

我不明白为什么只要输出与输入属于同一类，它就不会。[新 API 中](http://hadoop.apache.org/docs/r0.23.4/api/src-html/org/apache/hadoop/mapreduce/Reducer.html)的默认值只是写出您传递给它的任何内容，它被实现为

```
@SuppressWarnings("unchecked")
protected void reduce(KEYIN key, Iterable<VALUEIN> values, Context context
                       ) throws IOException, InterruptedException {
    for(VALUEIN value: values) {
      context.write((KEYOUT) key, (VALUEOUT) value);
    }
} 
```

对于旧的 API，它是一个`interface`，你不能直接实例化一个接口。如果您正在使用它，那么这就是它失败的原因。再说一次，这`Mapper`也是一个接口，你不应该实例化它......

# css - CSS似乎无法摆脱默认边框

> ID：13163467
> 
> 赞同：3
> 
> 时间：2012-10-31T17:24:45.583
> 
> 标签：css

所以我有 1 个输入类型的文本字段，我喜欢`5px border-radius`它，但我似乎无法摆脱默认的白色高亮边框。即使输入字段的边缘有点圆，默认边框仍然是矩形，知道如何删除它吗？谢谢你。

```
<input type="text" name="username" id="usrinput" size="36" value="Username" style="color:rgba(102,102,102,0.3);font-family: 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;font-weight:600;" /> 
```

CSS：

```
#usrinput
{
    /*border:1px solid rgba(0,0,0,0.5);*/
    border:none;
    height:32px;
    border-radius:5px;
    outline:1px solid rgba(255,255,255,0.2);
    padding-left:10px;
    padding-right:10px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:29:55.007

你看到的是轮廓，而不是边界。

利用：

```
 outline:none; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:18:43.483

希望这对您有所帮助。

HTML：

```
<input type="text" name="username" class="input" /> 
```

CSS：

```
.input{
    border:1px solid #000;
    width:200px;
    height:30px;
} 
```

您也可以自定义课程。

# php - 如果 MySQL 上已经存在，请勿重复 VALUE

> ID：13163474
> 
> 赞同：0
> 
> 时间：2012-10-31T17:25:18.610
> 
> 标签：php, sql, duplicates

我一直在努力做到这一点，但作为其他问题，我就是想不通。我一直在阅读可能的解决方案，但没有一个符合我的代码，或者如果他们这样做，我不知道如何或在哪里使用它们。

我有一个用户发送记录的数据库。该数据库由几个表组成，其中包含以下“**姓名、姓氏、电话**”。如果这些值中的任何一个是重复的，我希望我的代码能够识别并**忽略**表单的提交，**如果所有这些值已经存在于 DB 上**。

这是我的代码：

```
 <?php

        $con = mysql_connect("HOST","USER","PASS");
        if (!$con)
          {
          die('Could not connect: ' . mysql_error());
          }

        mysql_select_db("testdb", $con);
        $sql="INSERT INTO people (Name, LastName, Phone)
        VALUES
        ('$_POST[Name]','$_POST[LastName]','$_POST[Phone]')";

        if (!mysql_query($sql,$con))
          {
          die('Error: ' . mysql_error());
          }

        echo "Record Added";

        mysql_close($con);
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:26:47.567

该`mysql_*`功能现在已全部弃用，不应使用。更改您的代码以执行以下操作：

```
//Set up a PDO connection to MySQL
$host = 'host_name';
$dbname = 'database_name';
$user = 'user_name';
$pass = 'user_pass';
try
{
    $DB = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass); 
}
catch(PDOException $e)
{  
    echo $e->getMessage();  
}

//Determine whether the appropriate values have been passed.
if(isset($_POST['Name']))
{
    $name = $_POST['Name'];
}
else
{
    echo "You must provide a name!";
        exit; //This may not be what you want to do here, it's an example action
}

if(isset($_POST['LastName']))
{
        $name = $_POST['LastName'];
}
else
{
    echo "You must provide a last name!";
        exit; //This may not be what you want to do here, it's an example action
}

if(isset($_POST['Phone']))
{
        $name = $_POST['Phone'];
}
else
{
    echo "You must provide a phone number!";
        exit; //This may not be what you want to do here, it's an example action
}

//Set up the query using anonymous values
$sql="INSERT INTO people (Name, LastName, Phone) VALUES ('?','?','?')";
$sth = $DB->prepare($sql);

try
{
        //Attempt to execute the insert statement
        $sth->execute(array($_POST[Name], $_POST[LastName], $_POST[Phone]));
        echo "Record Added";

}
catch(PDOException $e)
{
        //If the insert failed, then you can handle the error, and determine
        //what further steps need to be taken.
        echo "Record Not Added";
} 
```

这是另一个具有类似设置的问题，可能对您也有用：

[https://stackoverflow.com/a/10414922/1507210](https://stackoverflow.com/a/10414922/1507210)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:32:12.253

插入前在表中搜索

```
 <?php

        $con = mysql_connect("HOST","USER","PASS");
        if (!$con)
          {
          die('Could not connect: ' . mysql_error());
          }

        mysql_select_db("testdb", $con);

        $name =  mysql_real_escape_string($_POST[Name]);
        $LastName=  mysql_real_escape_string($_POST[LastName]);
        $Phone=  mysql_real_escape_string($_POST[Phone]);

         $search_res=mysql_query("SELECT * from people where Name='$Name' OR LastName='$LastName' OR Phone='$Phone'");

        if(mysql_num_rows($search_res) < 1){

             $sql="INSERT INTO people (Name, LastName, Phone)
             VALUES
                ('$Name','$LastName','$Phone')";

               if (!mysql_query($sql,$con))
              {
              die('Error: ' . mysql_error());
              }

        echo "Record Added";
       }else{
          echo "User Already exits";
       }

        mysql_close($con);
        ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:45:12.040

试试这个简单的解决方案

```
$result = mysql_query("SELECT * FROM TABLE WHERE Column = 'value' ");

if( mysql_num_rows($result) < 1) {
    mysql_query("INSERT INTO table (column) VALUES ('value') ");
} 
```

# sql - 包括自动增量列的更新

> ID：13163478
> 
> 赞同：0
> 
> 时间：2012-10-31T17:25:32.837
> 
> 标签：sql, postgresql

我正在使用 PostgreSQL，我想更新一个包含自动编号列 ID 的表。我知道这可能很简单，但我做过这样的事情；

```
CREATE SEQUENCE  SEQ_ID
MINVALUE 1
START WITH 1
INCREMENT BY 1
CACHE 10

update trk2
set (id, track_id, track_point) =
           (select nextval('seq_id'), trk1.track_fid, trk1.wkb_geometry
              from track_points_1 as trk1
             where track_fid = 0) 
```

问题是它给了我以下错误（*代码重新格式化*）：

```
ERROR:  syntax error at or near "select"
LINE 3: set (id, track_id, track_point)=(select nextval('seq_id'), t... 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:01:08.770

您的查询在几个地方有问题。它可能看起来像这样：

```
UPDATE trk2
SET   (id, track_id, track_point) = 
      (next_id, x.track_fid, x.wkb_geometry)
FROM  (
   SELECT id
         ,nextval('seq_id') AS next_id
         ,track_fid
         ,wkb_geometry
   FROM   track_points_1
   WHERE  track_fid = 0
   ) x
WHERE  trk2.id = x.id;  -- adapt to your case 
```

或*更简单*（首选语法）：

```
UPDATE trk2
SET   (id, track_id, track_point) = 
      (nextval('seq_id'), x.track_fid, x.wkb_geometry)
FROM   track_points_1 x
WHERE  x.track_fid = 0
AND    trk2.id = x.id;   -- adapt to your case 
```

### 要点：

*   仅当您确实需要更改表中的每一行时，`UPDATE`没有子句才有意义。`WHERE`否则它是错误的或至少是次优的。

    当您从另一个表中检索值时，`CROSS JOIN`如果您不添加`WHERE`将目标与源连接的子句，则会在目标和源之间得到一个 - 这意味着目标表的每一行都将使用源表中的每一行进行更新。这可能需要很长时间并导致任意结果。最后`UPDATE`获胜。简而言之：这几乎总是完全无稽之谈，而且非常昂贵。

    在我的示例中，我按`id`列链接目标和源。您必须用适合您情况的任何内容替换它。

*   您*可以*`SET`在 中的一个子句中分配多个值`UPDATE`，但您只能从相关的子选择表达式中返回一个值。`SET`因此，在具有多个值的子句中严格不可能有子选择。

*   您的初始语法错误来自您的子选择周围缺少一对括号。但是添加它只会揭示上面提到的错误。

*   根据您所追求的，您可以直接包含`nextval('seq_id')`在子查询或`SET`子句中。这可能会导致非常不同的结果，尤其是当子查询中有未在`UPDATE`.

    我把它放在`SET`子句中是因为我怀疑这就是你想要的。行的顺序仍然是任意的。如果您想更好地控制分配的号码，您需要定义您想要的，然后采取不同的路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:51:54.940

Tyler Eaves 是正确的，**这个动作是不可取**的。

但是，如果您坚持，这可能会有所帮助：

一旦你在列上有一个序列，你就不必`nextval()`在`SET`语句中调用。只需将其保留，该列将自动递增。

```
UPDATE
    trk2
SET 
    (
        track_id = [track_id Value],
        track_point = [track_point Value]
    ) 
```

或者，包括它并将其设置为`default`或`null`

```
UPDATE
    trk2
SET 
    (
        id = default,
        track_id = [track_id Value],
        track_point = [track_point Value]
    ) 
```

使用您的示例：

```
UPDATE
    trk2
SET 
    (
        track_id, 
        track_point
    ) = (
        SELECT 
            trk1.track_fid,
            trk1.wkb_geometry
        FROM 
            track_points_1 AS trk1
        WHERE
            track_fid = 0
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:58:33.917

我认为您需要在 SET 子句的 RHS 上添加第二组括号：

```
UPDATE trk2
SET (id, track_id, track_point) =
          ((SELECT nextval('seq_id'), trk1.track_fid, trk1.wkb_geometry
              FROM track_points_1 as trk1
             WHERE track_fid = 0)); 
```

第一组括号与 SET 子句的 LHS 上的括号匹配。第二组包装子查询以供重用。

# ios - NSCache 和背景

> ID：13163480
> 
> 赞同：14
> 
> 时间：2012-10-31T17:25:38.407
> 
> 标签：ios, nscache

我注意到当应用程序进入后台时 NSCache 会驱逐其所有对象。这是预期的行为吗？有没有办法避免它？

我希望它在设备内存不足时而不是在应用程序进入后台时立即驱逐对象。

你知道任何有效的替代方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T08:20:24.330

在我的例子中，当存储在 NSCache 中的对象不符合 NSDiscardableContent 协议时，就会发生这种情况。当我添加上述协议时，应用程序进入后台时对象的驱逐消失了。

此外，基于我在[这里](http://svn.gna.org/svn/gnustep/libs/base/trunk/Source/NSCache.m)找到的 NSCache.m 的来源，不符合 NSDiscardableContent 协议的对象在运行时永远不会被删除，即使应用程序需要更多内存并且应该驱逐它的一些元素。也许这就是当应用程序进入后台时非 NSDiscardableContent 对象被驱逐的原因，因为这是驱逐它们的好时机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-20T20:40:13.440

NSCache 仍然是荒谬的。从 SDK 的第一天开始，我就一直是一名 iOS 开发人员，直到今天我才发现这个有用的帖子。

这些年来，我认为它像任何普通缓存一样工作，但不！我再也不会使用它了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:37:46.890

此相关帖子中的评论表明，当应用程序进入后台时，会清除 NSCache。 [NSCache 不驱逐数据](https://stackoverflow.com/questions/11520815/nscache-is-not-evicting-data)

# android - 即使 LogCat 中显示数据，getView 也不会呈现

> ID：13163486
> 
> 赞同：0
> 
> 时间：2012-10-31T17:25:59.690
> 
> 标签：android, arraylist, android-listview, logcat

我正在处理 android`ListView`并且在充气时遇到了奇怪的错误`ListItem`。`getView`即使数据已经显示在`LogCat`. 有任何想法吗 ？

```
private ListViewAdapter m_adapter;
public ArrayList<String> cat = new ArrayList<String>();
private SharedPreferences preferences;
private SharedPreferences.Editor editor;
String title, character, thumbnail, totalPages;
int Code;
ViewHolder vh;
TextView titleView, charView, totalView;
ImageView thumbView, removeView;
Uri thumbUri;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setTheme(android.R.style.Theme_Black_NoTitleBar);
    getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.myputet);
    init_UI();
}

public void init_UI() {
    preferences = getApplicationContext().getSharedPreferences(
            Constants.SHARED_PRED, 0);
    editor = preferences.edit();

    title = preferences.getString("TITLE", "");
    character = preferences.getString("CHAR", "");
    thumbnail = preferences.getString("THUMB", "");
    thumbUri = Uri.parse(thumbnail);
    totalPages = preferences.getString("TOTAL", "");
    Code = preferences.getInt("CODE", 0);

    System.out.println("Getting Title " + title);
    System.out.println("Getting character " + character);
    System.out.println("Getting thumbnail " + thumbnail);
    System.out.println("Getting thumbUri " + thumbUri);
    System.out.println("Getting totalPages " + totalPages);

    Log.v("ArrayList", cat.toString());
    ListView lv = (ListView) findViewById(R.id.listview);

    m_adapter = new ListViewAdapter(this, R.layout.myputet_item, cat);
    lv.setAdapter(m_adapter);
}

private class ListViewAdapter extends ArrayAdapter<String> {
    private ArrayList<String> items;

    public ListViewAdapter(Context context, int textViewResourceId,
            ArrayList<String> items) {
        super(context, textViewResourceId, items);
        this.items = items;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.myputet_item, null);
        }

        Log.v("Title View", title);
        titleView = (TextView) v.findViewById(R.id.titleTxtView);
        charView = (TextView) v.findViewById(R.id.charTxtView);
        totalView = (TextView) v.findViewById(R.id.totalTxtView);
        thumbView = (ImageView) v.findViewById(R.id.charImageView);
        removeView = (ImageView) v.findViewById(R.id.removeListItem);
        if (titleView != null) {
            titleView.setText(title);
            Log.v("Update Title", title);
        }
        charView.setText(character);
        Log.v("Update character", character);
        totalView.setText(totalPages);
        Log.v("Update totalPages", totalPages);
        thumbView.setImageURI(thumbUri);

        return convertView;
    }
} 
```

`LogCat`输出

```
10-31 23:52:34.438: V/Title View(4568): မိခ်ိဳေစ်းကအျပန္
10-31 23:52:34.438: V/Update Title(4568): မိခ်ိဳေစ်းကအျပန္
10-31 23:52:34.438: V/Update character(4568): ကိုေရႊထူး(ျပည္)
10-31 23:52:34.438: V/Update totalPages(4568): 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:32:23.880

您需要返回您修改的视图`getView()`：

```
return v; // not convertView 
```

另一方面，您的 ListView 中的每一行都将是相同的... `title`,`character`等永远不会改变，因此它们将一遍又一遍地显示。

最后，请观看 Android 的 Romain Guy[讨论高效适配器](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)以帮助您加快速度。

# android - ActionBarSherlock 溢出列表视图

> ID：13163487
> 
> 赞同：0
> 
> 时间：2012-10-31T17:26:01.323
> 
> 标签：android, actionbarsherlock

在我的 android 应用程序中集成 ActionBarSherlock 后，我注意到当用户点击溢出按钮时下降的下拉菜单在 2.* 和 4.* 之间有所不同。

我已经成功地用正确的颜色为 2.* 自定义了这个下拉菜单，但是 4.* 中的下拉菜单以白色和黑色文本显示，我所做的任何事情似乎都没有修改这个菜单。

我需要做一些特别的事情来自定义 4.* 中的这个下拉菜单吗？甚至有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:22:12.540

当您为 ABS 添加样式时，您必须确保还包含正确的 Android 标签。例如

不只是

```
<item name="actionBarStyle">@style/ActionBar</item> 
```

但

```
<item name="actionBarStyle">@style/ActionBar</item>
<item name="android:actionBarStyle">@style/ActionBar</item> 
```

前者只控制 ABS，该库使用 4.x 上的标准 Action Bar。

# jdbc - 用 JDBC 替换 Tuxedo 调用

> ID：13163492
> 
> 赞同：0
> 
> 时间：2012-10-31T17:26:10.643
> 
> 标签：jdbc, transactions, service-layer, tuxedo

我的任务是用等效的 JDBC 调用替换一些 Tuxedo 服务。

考虑到单个 Tuxedo 服务，我首先创建了一个 JDBC DAO，它实现了与现有 Tuxedo DAO 相同的接口。我从一个新的服务层调用这个方法。我计划在我的服务层上使用 Spring @Transactional 注释来处理 JDBC 事务。

Tuxedo 在内部处理事务，因此单个 Tuxedo DAO 方法调用与 JDBC DAO 上的多个方法调用相当，后者将从新的服务层调用。

鉴于上述情况，我认为 Tuxedo DAO 应该是一个服务级别的实体。那有意义吗？

任何关于从服务/DAO 层角度进行布局的最佳方式的想法都将不胜感激。我需要保留 Tuxedo DAO 用于遗留目的，但如果需要，将其重构到服务层应该不是问题。

谢谢杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:08:07.077

出色地，

这很有道理。事实上，Tuxedo 服务（取决于它是否只是一个数据库访问或是否有更多业务逻辑）可以被一个简单的 DB-DAO 或某种服务（EJB、WebService 等，具体取决于标准技术）取代用于企业）。

我会尝试从对服务进行分类开始，这样您就可以决定如何处理每个服务，并可能修复一些策略。诸如“DB-DAO”、“OTHER-DATASTORE-DAO”、“更复杂的服务”之类的东西。

完成这项工作后，您可以构建您的直接 DAO 和服务。如果您决定在不同的基础架构上部署服务（扩展问题或仅仅因为许多应用程序将使用它们并且您希望保持清晰的可见性），您仍然可以编写 DAO 来使用它们并尊重原始调用接口，但是后面有新的实现。

问候

# javascript - ajax 加载的 URL hashchange 问题

> ID：13163497
> 
> 赞同：3
> 
> 时间：2012-10-31T17:26:33.917
> 
> 标签：javascript, ajax, wordpress, url, hashchange

我有一个功能性的 wordpress 主题，可以通过 ajax 加载内容。我遇到的一个问题是，当直接加载页面时，ajax 脚本不再起作用。例如，链接结构如下所示，而在 www.example.com 上单击 about 页面链接后，链接变为 www.example.com/#/about。但是当我直接加载独立页面 www.example.com/about 时，从该页面单击的其他链接会变成 www.example.com/about/#/otherlinks。[我从这个教程http://www.deluxeblogtips.com/2010/05/how-to-ajaxify-wordpress-theme.html](http://www.deluxeblogtips.com/2010/05/how-to-ajaxify-wordpress-theme.html)稍微修改了代码。这是我的代码。谢谢您的帮助。

```
jQuery(document).ready(function($) {
var $mainContent = $("#container"),
    siteUrl = "http://" + top.location.host.toString(),
    url = ''; 

$(document).delegate("a[href^='"+siteUrl+"']:not([href*=/wp-admin/]):not([href*=/wp-login.php]):not([href$=/feed/]))", "click", function() {
    location.hash = this.pathname;
    return false;
}); 

$(window).bind('hashchange', function(){
    url = window.location.hash.substring(1); 

    if (!url) {
        return;
    } 

url = url + " #ajaxContent"; 

    $mainContent.fadeOut(function() {
        $mainContent.load(url,function(){
            $mainContent.fadeIn();
        });        
      });
    });

  $(window).trigger('hashchange');

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:49:35.007

你所表达的问题并不容易解决。有多个因素处于危险之中，但归结为：

*   对 URL 的任何更改都会触发页面重新加载
*   唯一的例外是如果只有 URL 的哈希部分发生变化

如您所知，网址 www.example.com/about/ 中没有散列部分。因此，这部分不能由您的脚本更改，否则它将触发页面重新加载。
知道这一事实后，您的脚本只会通过添加新的散列部分或修改现有的散列部分来更改 URL，而只保留 URL 的“路径名”部分。所以你会得到像 www.example.com/about/#/otherlinks 这样的 URL。

现在，从我的角度来看，有两种方法可以解决您的问题。

首先，有一个[API 可以在不重新加载的情况下修改整个 URL 路径名](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)，但[它并非无处不在](http://caniuse.com/#feat=history)。使用此解决方案并回退到旧浏览器的经典页面重新加载是[更清洁的方法](http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs)。

否则，您可以强制页面重新加载一次以将 URL 重置为 www.example.com/ 并从良好的基础开始。这是执行此操作的代码：

```
$(document).delegate("a[href^='"+siteUrl+"']:not([href*=/wp-admin/]):not([href*=/wp-login.php]):not([href$=/feed/]))", "click", function() {
    location = location.assign('#' + this.pathname);
    return false;
}); 
```

应该注意的是，如果您的站点不在路径名的根目录中，则此脚本将不起作用。因此，要使其适用于 www.example.com/mysite/，您将需要更改正则表达式。

请让我知道进展如何。

# java - 您如何将正确的 ABI 版本与 GCJ 链接到 Foregin jar？

> ID：13163506
> 
> 赞同：2
> 
> 时间：2012-10-31T17:27:09.010
> 
> 标签：java, minecraft, gcj

我决定尝试将 minecraft 编译成原生二进制文件。

为此，我使用了以下内容（大约，优化可能有所不同）：

```
gcj -c -O2 -fjni -findirect-dispatch ./minecraft.jar &
gcj -c -O2 -fjni -findirect-dispatch ./jinput.jar & 
gcj -c -fjni -findirect-dispatch ./lwjgl.jar &
gcj -c -fjni -findirect-dispatch ./lwjgl_util.jar & 
```

然后我尝试链接：

```
gcj -o mc_out -findirect-dispatch -fjni -L/natives/*64.so \
    -L/usr/lib/jvm/java-1.5.0-gcj-4.4/jre/lib/amd64/server \
    ./*.o -ljvm \
     --main=net.minecraft.client.Minecraft 
```

但是如果我运行二进制文件，我会得到：

```
ryan@ryan ~/.minecraft/bin_native_test $ ./mc_out
libgcj failure: gcj linkage error.
Incorrect library ABI version detected.  Aborting.

Aborted 
```

现在，我改用：

```
gcj -o mc_out -findirect-dispatch -fjni -L/natives/*64.so ./*.o \
    --main=net.minecraft.client.Minecraft 
```

我得到：

```
ryan@ryan ~/.minecraft/bin_native_test $ ./mc_out
Exception in thread "main" java.lang.ExceptionInInitializerError
   at java.lang.Class.initializeClass(libgcj_bc.so.1)
   at org.lwjgl.LWJGLUtil.getPlatform(mc_out)
   at org.lwjgl.Sys.createImplementation(mc_out)
   at org.lwjgl.Sys.<clinit>(mc_out)
   at java.lang.Class.initializeClass(libgcj_bc.so.1)
   at org.lwjgl.Sys.getTime(mc_out)
   at net.minecraft.client.Minecraft.F(mc_out)
   at net.minecraft.client.Minecraft.main(mc_out)
Caused by: java.nio.InvalidMarkException
   at java.nio.Buffer.reset(libgcj_bc.so.1)
   at java.nio.DirectByteBufferImpl.duplicate(libgcj_bc.so.1)
   at java.nio.DirectByteBufferImpl.asReadOnlyBuffer(libgcj_bc.so.1)
   at org.lwjgl.LWJGLUtil.loadIcon(mc_out)
   at org.lwjgl.LWJGLUtil.<clinit>(mc_out)
   at java.lang.Class.initializeClass(libgcj_bc.so.1)
   ...7 more 
```

有人建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-10T10:55:21.090

所以在我看来，你想反编译 Minecraft，大概是为了改装。如果是这样，请查看 Minecraft Coder Pack。它是一系列真正使反编译、重新编译和重新混淆变得非常容易的程序。

您可以在[此处](http://www.minecraftwiki.net/wiki/Minecraft_Coder_Pack)查看该程序。

但是，如果您出于改装原因没有进行反编译，那么请忽略这一点:)

# jquery - 确定用户单击了哪些列/行

> ID：13163510
> 
> 赞同：4
> 
> 时间：2012-10-31T17:27:29.970
> 
> 标签：jquery, jquery-plugins, datatables

使用 JQuery，我需要知道用户点击的是链接还是第三列，并且需要获取第一列中变量的值。我该怎么做呢？

我的html：

```
<div id="test">
<table id="tablex" cellpadding="0" cellspacing="0" border="0" class="display">
    <thead>
        <tr>
            <th>Cod</th>
            <th>Name completo</th>
            <th>&nbsp;</th>
        </tr>
    </thead>
    <tbody>
         <tr>
             <td>1</td>
             <td>John Foster 1</td>
             <td><img entity_id="1" class="image-selector" src='imagens/grid_cancel.png' title=''  /></td>
         </tr>
    </tbody>
</table> 
```

我的 jQuery：

```
$("#tablex tbody").on("click", "td", function(event){
   alert($(this).text());
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:29:02.340

```
$("#tablex tbody").on("click", "td", function(event){
    alert($(this).index());
    alert($(this).siblings("td:first").text());
}); 
```

`$(this).index()`将为您提供单击列的从零开始的索引。 `$(this).siblings("td:first").text()`将为您提供第一列中的文本。

在这里，有一个小提琴：http: [//jsfiddle.net/adrianonantua/EAEsG/](http://jsfiddle.net/adrianonantua/EAEsG/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:32:06.213

这将为您提供单击列的列号，以及第一列的值...

```
$("#tablex tbody").on("click", "td", function(event){
   var index = $(this).index();
   var col1value = $(this).parent().find("td").first().text();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:41:25.480

```
 <script type="text/javascript">
  $(document).ready(function() {     
   $(".image-selector").on("click", function(event){
    var colvalue = $(this).parent().parent().find("td").first().text();
    alert(colvalue);
});  
 }); 
 </script> 
```

如果您希望它基于 TD 点击而不是图像点击，请将类移动到 td 而不是图像

**然而**，这是我认为更干净的选择，使用 HTML5 数据属性

HTML

```
 <td>1</td>
  <td>John Foster 1</td>
  <td><div data-value='1' class='image-selector'><img src='imagens/grid_cancel.png' title=''  /></div></td> 
```

jQuery

```
 <script type="text/javascript">
  $(document).ready(function() {     
   $(".image-selector").on("click", function(event){
    var colvalue = $(this).data('value');
    alert(colvalue);
  });    
 }); 
 </script> 
```

# php - 使用 PHP 的 JasperServer

> ID：13163515
> 
> 赞同：0
> 
> 时间：2012-10-31T17:27:47.633
> 
> 标签：php, jasperserver

我尝试运行 JasperServer 附带的示例 PHP 代码。当我加载`index.php`时，我收到以下消息：

> 已弃用：在第 412 行的 C:\xampp\php\pear\HTTP\Request.php 中不建议通过引用分配 new 的返回值
> 
> 不推荐使用：在第 736 行的 C:\xampp\php\pear\HTTP\Request.php 中不推荐使用通过引用分配 new 的返回值
> 
> 不推荐使用：通过引用分配 new 的返回值在第 749 行的 C:\xampp\php\pear\HTTP\Request.php 中已弃用
> 
> 不推荐使用：通过引用分配 new 的返回值在第 794 行的 C:\xampp\php\pear\HTTP\Request.php 中已弃用
> 
> 严格标准：在第 124 行的 C:\xampp\php\pear\Net\URL.php 中为类 Net_URL 重新定义已定义的构造函数
> 
> 注意：未定义索引：第 12 行 C:\xampp\htdocs\registration\php-sample\index.php 中的用户名
> 
> 注意：未定义索引：第 13 行 C:\xampp\htdocs\registration\php-sample\index.php 中的密码

我该如何解决这个问题？

我将 JasperServer 4.7 与 PHP 5.4.7 (XAMPP 1.8.1) 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:34:47.400

您可以更改 PHP 的 error_reporting 设置以不显示弃用/严格警告。[http://php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T13:43:15.507

这个错误：

```
Redefining already defined constructor for class Net_URL in C:\xampp\php\pear\Net\URL.php on line 124 
```

是因为 Net_URL PEAR 包中具有 PHP4 兼容性，导致更新版本的错误。最好的办法是用更现代的东西（例如 NET_URL2）替换 Net_URL - 但如果您需要快速修复以使遗留代码正常工作，只需编辑文件 URL.php（从错误消息中获取位置）并删除或注释掉以下块：

```
/**
* PHP4 Constructor
*
* @see __construct()
*/
function Net_URL($url = null, $useBrackets = true)
{
    $this->__construct($url, $useBrackets);
} 
```

# python - Scapy如何获取ping时间？

> ID：13163516
> 
> 赞同：12
> 
> 时间：2012-10-31T17:27:47.563
> 
> 标签：python, networking, time, ping, scapy

我正在尝试编写一个可以平均 ping 时间的 scapy 脚本，因此我需要获取发送 ICMP 回显/回复数据包和收到回复数据包之间经过的时间。现在，我有这个：

```
#! /usr/bin/env python
from scapy.all import *
from time import *

def QoS_ping(host, count=3):
  packet = Ether()/IP(dst=host)/ICMP()
  t=0.0
  for x in range(count):
      t1=time()
      ans=srp(packet,iface="eth0", verbose=0)
      t2=time()
      t+=t2-t1
  return (t/count)*1000 
```

问题是使用 time() 函数不会产生好的结果。例如，我在一个域上找到了 134 毫秒，而在同一个域上使用 ping 系统功能，我找到了 30 毫秒（当然是平均值）。

我的问题是：有没有办法得到 scapy 发送数据包和接收数据包之间的确切时间？我不想使用 popen() 函数或其他系统调用，因为我需要 scapy 来进行未来的数据包管理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T09:40:17.863

Scapy 很慢，因为它是纯 python 解析用户空间中的整个数据包......[绕过 scapy 的吞吐量限制并不是什么不寻常的事情](https://stackoverflow.com/questions/10898846/not-getting-all-icmp-time-exceeded-messages-why/10902783#10902783)。

做一个苹果对苹果的比较......我有一个 Xeon 服务器，它有一个直接连接到互联网的千兆以太网管道，但我的流量非常少。当我对它所连接的 Cisco 路由器运行正常 ping 时，我平均每个大约 60 微秒......

```
[mpenning@Bucksnort ~]$ ping -W 1 -c 3 192.0.2.1
PING 192.0.2.1 (192.0.2.6) 56(84) bytes of data.
64 bytes from 192.0.2.1: icmp_req=1 ttl=64 time=0.078 ms
64 bytes from 192.0.2.1: icmp_req=2 ttl=64 time=0.062 ms
64 bytes from 192.0.2.1: icmp_req=3 ttl=64 time=0.062 ms

--- 192.0.2.1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1998ms
rtt min/avg/max/mdev = 0.062/0.067/0.078/0.010 ms
[mpenning@Bucksnort ~]$ 
```

scapy 中的相同目的地......也以毫秒为单位......

```
[mpenning@Bucksnort ~]$ sudo python new_ping_ip.py
Ping: 0.285587072372
Ping: 0.230889797211
Ping: 0.219928979874
AVERAGE 245.468616486
[mpenning@Bucksnort ~]$ 
```

Scapy 的结果几乎是 bash 提示符 (245.469 / 0.062) 的基线 ping 的**4000**倍...我自己运行电缆，它不到 Cisco 路由器的 10 英尺电缆。

你能做些什么来获得更好的结果？正如评论中提到的，在解析之前先查看`sent_time`并填充`time`...`Packet.time`这仍然比来自 shell 的 ping 慢，但可能有助于您在 scapy 中捕获数据包。

```
#! /usr/bin/env python
from scapy.all import *

def QoS_ping(host, count=3):
  packet = Ether()/IP(dst=host)/ICMP()
  t=0.0
  for x in range(count):
      ans,unans=srp(packet,iface="eth0", filter='icmp', verbose=0)
      rx = ans[0][1]
      tx = ans[0][0]
      delta = rx.time-tx.sent_time
      print "Ping:", delta
      t+=delta
  return (t/count)*1000

if __name__=="__main__":
    total = QoS_ping('192.0.2.1')
    print "TOTAL", total 
```

样品运行...

```
[mpenning@Bucksnort ~]$ sudo python ping_ip.py
Ping: 0.000389099121094
Ping: 0.000531911849976
Ping: 0.000631093978882
TOTAL 0.51736831665
[mpenning@Bucksnort ~]$ 
```

即使使用`Packet.time`and`Packet.sent_time`与 shell 调用相比也很慢......

```
>>> from subprocess import Popen, PIPE
>>> import re
>>> cmd = Popen('ping -q -c 3 192.0.2.1'.split(' '), stdout=PIPE)
>>> output = cmd.communicate()[0]
>>> match = re.search('(\d+\.\d+)\/(\d+\.\d+)\/(\d+\.\d+)\/(\d+\.\d+)\s+ms', output)
>>> if not (match is None):
...     print "Average %0.3f" % float(match.group(1))
... else:
...     print "Failure"
...
Average 0.073
>>> 
```

`ping -q -c 3`提供 3 个 ping 的摘要输出，而没有打印单个 ping。

如果要捕获 ping 数据包（通过 shell ping 调用）以供以后`scapy`处理，`tcpdump -c <num-packets> -w <filename> icmp and host <host-addr> &`请在运行 CLI ping 之前生成...然后使用 scapy[`rdpcap()`](http://www.secdev.org/projects/scapy/doc/usage.html#importing-and-exporting-data)从`tcpdump`. 请务必正确计算您将在 pcap 文件中捕获的数据包数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T20:28:49.427

顺便说一句，使用无缓冲的 python（python -u 启动它）增加了计时精度，因为 python 不等待缓冲区决定转储。使用上面的脚本，它将我的结果从 0.4 毫秒关闭到 0.1-ish 关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T09:03:56.373

迈克，只是为了获得平均时间的一个小修复，改变：

```
print "Average %0.3f" % float(match.group(1)) 
```

至：

```
 print "Average %0.3f" % float(match.group(2)) 
```

因为 (match.group(1)) 将获得最小时间，而不是前面提到的平均值。

# actionbarsherlock - SherlockFragmentActivity 与 SherlockListFragment

> ID：13163518
> 
> 赞同：2
> 
> 时间：2012-10-31T17:28:00.270
> 
> 标签：actionbarsherlock

我有 3 个选项卡，所有选项卡里面都有列表（当然是不同的）。当我单击选项卡时，我看到了正确的结果（我想得到的结果）。

我知道如何获取单击的项目信息并向数据库发出有关该项目的请求并获取结果并创建新意图并将该结果作为额外的内容放入其中。但我不知道如何在不创建新意图的情况下在同一个片段中显示我的结果。因为当我创建新意图并以新意图显示结果时，我的标签显然会消失，但我需要它们始终存在。

我的主要活动：

```
public class MainActivity extends SherlockFragmentActivity
{
  @Override
  public void onCreate(Bundle savedInstanceState)
  {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      ActionBar actionBar = getSupportActionBar();
      actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

      actionBar.setDisplayShowTitleEnabled(true);
      Tab tab = actionBar.newTab()
                .setText("Dictionary")
                .setTabListener(new DictionaryFragment())
                .setIcon(R.drawable.android);

      actionBar.addTab(tab);

      tab = actionBar.newTab()
                .setText("Play")
                .setTabListener(new PlayFragment())
                .setIcon(R.drawable.apple);

      actionBar.addTab(tab);

      tab = actionBar.newTab()
            .setText("Manage")
            .setTabListener(new ManageFragment())
            .setIcon(R.drawable.apple);

      actionBar.addTab(tab);
  }
} 
```

我的片段之一：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{   
  built_in_DB_setup dbOpenHelper = new built_in_DB_setup(getActivity().getBaseContext(), DB_NAME);
  database = dbOpenHelper.openDataBase();
  fillFreinds();
  ArrayAdapter<String> adapter = new
  ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_expandable_list_item_1, friends);
  setListAdapter(adapter);
  return super.onCreateView(inflater, container, savedInstanceState);
} 
```

这是此类中的项目单击侦听器

```
public void onListItemClick(ListView l, View v, int position, long id)
{
    super.onListItemClick(l, v, position, id); 
    String a=getData(((TextView) v).getText().toString()); 
    Intent i = new Intent("com.example.fragmenttest.VIEWWORD"); 
    i.putExtra("result", a); 
    startActivity(i); 
} 
```

我有从 onListItemClick 获得的 String a 我如何用这个字符串替换当前的 Tab 数据？

# ruby-on-rails - 为什么 Git 会提交我计算机上的所有内容？

> ID：13163521
> 
> 赞同：-2
> 
> 时间：2012-10-31T17:28:08.320
> 
> 标签：ruby-on-rails, git

使用 Michael Hartl 的 Ruby on Rails 说明，我在命令行中输入了以下内容：

```
$ git init
$ git add .
$ git status 
```

我得到的输出没有意义。看起来我计算机上的所有内容都已提交，即我的网络浏览历史记录。

```
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage) 
#
#   modified:   .DS_Store
#   new file:   .Trash/.DS_Store
#   modified:   .bash_history
#   modified:   .gem/specs/rubygems.org%80/latest_specs.4.8
#   new file:   .gem/specs/rubygems.org%80/quick/Marshal.4.8/treetop-1.4.12.gemspec
#   new file:   .gem/specs/rubygems.org%80/quick/Marshal.4.8/tzinfo-0.3.34.gemspec 
#   modified:   .gem/specs/rubygems.org%80/specs.4.8
#   modified:   Desktop/.DS_Store
#   modified:   Library/Application Support/AddressBook/Metadata/.info
#   modified:   Library/Application Support/AddressBook/Sources/7A5B88B6-2E8C-44D5-B3C5-96C523D66818/Metadata/.info
#   modified:   Library/Application Support/CrashReporter/Intervals_31838DA3-3634-5B48-BAA4-074D9844D0AB.plist
#   modified:   Library/Application Support/Dock/FD847662-EDEA-43DC-8969-18D1DD48507E.db
#   modified:   Library/Application Support/Sublime Text 2/Settings/Auto Save Session.sublime_session
#   modified:   Library/Application Support/Ubiquity/peer-0773FD5E-421F-A363-E209-F9D5E42A0F5F-v23/item-info.db
#   new file:   Library/Caches/Metadata/Safari/Bookmarks/2AD8D7AF-5B59-4BF5-9C80-749756908961.webbookmark
#   modified:   Library/Caches/Metadata/Safari/History/.tracked filenames.plist
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-282.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-283.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-284.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-285.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-286.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-287.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-288.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-289.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-290.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-291.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-292.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-293.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-294.webhistory
#   new file:   Library/Caches/Metadata/Safari/History/Safari history item-295.webhistory 
```

在尝试提交之前，我`$ rails server`在另一个终端中运行并得到以下输出：

```
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-10-31 12:30:26] INFO  WEBrick 1.3.1
[2012-10-31 12:30:26] INFO  ruby 1.9.3 (2012-10-12) [x86_64-darwin12.2.0]
[2012-10-31 12:30:26] INFO  WEBrick::HTTPServer#start: pid=3773 port=3000

Started GET "/assets/rails.png" for 127.0.0.1 at 2012-10-31 12:52:53 -0400
Connecting to database specified by database.yml
Served asset /rails.png - 200 OK (3ms) 
```

从上一个问题，我知道`$ rails server`将继续运行，直到我关闭终端窗口。请帮忙！为什么我的计算机中的所有内容，包括网络历史记录都提交给 Git？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T17:29:12.937

因为您在主文件夹中运行了该命令。您需要使用`cd /path/to/your/code`以确保您在代码文件夹中。用于`pwd`查看您当前所在的目录。

# c# - 从窗体调用 ASP.NET 页面

> ID：13163526
> 
> 赞同：0
> 
> 时间：2012-10-31T17:28:31.987
> 
> 标签：c#, asp.net, html, forms

我有一个包含表单的静态页面。

```
<form METHOD="post" ACTION="...">           
  <input type="submit" value="Verzenden"  />        
</form> 
```

单击提交按钮时，我希望将表单字段发送到 ASP.NET 页面，在该页面中我接收表单字段并对其进行处理（例如发送邮件）。

我正在考虑做这样的事情：

```
<form METHOD="post" ACTION="http://localhost:3384/mail.aspx">           
  <input type="submit" value="Verzenden"  />        
</form> 
```

但是我怎样才能在后面的mail.aspx代码中接收到这些数据呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:51:35.503

```
<form action="Default.aspx" method="post">
<input type="text" name="fullname">
<select name="color">
    <option value="Red">Red $10.00</option>
    <option value="Blue">Blue $8.00</option>
    <option value="Green">Green $12.00</option>
</select>
<select name="size">
    <option value="Small">Small</option>
    <option value="Large">Large</option>
</select>
<input type="submit" value="Verzenden" />
</form> 
```

![在此处输入图像描述](../Images/c7c9981011b0a3f5b0b06d26563f8852.png)

```
protected void Page_Load(object sender, EventArgs e)
{
    FullNameLabel.Text = Request.Form["fullname"];
    ColorLabel.Text = Request.Form["color"];
    SizeLabel.Text = Request.Form["size"];
} 
```

![在此处输入图像描述](../Images/d1dc5907417b89084b80b0a0fe7e1b52.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:33:54.513

只需使用`Request.Form`集合：

```
string verz = Request.Form["Verzenden"];
etc... 
```

这样做`Page_Load`是最简单的。为了简单起见，最好避免在该页面上使用典型的回发表单；否则，您必须进行测试`IsPostBack`以确保您应该读取这些`Form`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:35:57.577

或从查询字符串 `Request.queryString["fieldname"];`

# javascript - javascript（jquery？）和运算符不起作用

> ID：13163528
> 
> 赞同：1
> 
> 时间：2012-10-31T17:28:38.663
> 
> 标签：javascript, jquery, file, size, operators

我的javascript代码有一个问题。我设置了最小的帖子文件大小我的代码是：

```
if(f.size >= 512)
upload_file(f); 
```

我也想设置最大尺寸，然后添加这个

```
if(f.size >= 512 && f.size <= 1512)
upload_file(f); 
```

但是当我只测试最小大小的脚本时，我上传一个 245B 的文件会返回错误，但是我上传了一个 10MB 的图片它成功上传了，有人知道脚本有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:37:03.970

实际上，您的 1kB 文件不应返回错误，因为 1024 > 512。[文件 API 以字节返回文件大小](http://www.w3.org/TR/FileAPI/#dfn-size)。

因此，我假设您的脚本中还有其他错误，例如：

返回文件大小的 File API 的属性被调用`size`，而不是`fileSize`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:37:07.137

根据您的逻辑，您根本不应该出错，因为您没有其他条件并且没有抛出异常。如果有任何被抛出，它们会被抛出到upload_file 中，这意味着问题出在其他地方。

这里的代码只有在你的条件满足的情况下才会运行`upload_file`，如果不满足就什么都不做，这和你看到的结果是一致的。实际上，每次抛出异常，都表明条件**成功**，并且不为假。

例如，当你向它传递一个大小为 1kb 的文件时会出现错误，这意味着条件为真，并且`upload_file`必须对文件进行处理。在 10Mb 示例中，不会引发错误，因为文件永远不会通过错误`upload_file`函数。

# android - 即使在使用 AsyncTask.Status.FINISHED 之后，异步也会返回 null

> ID：13163532
> 
> 赞同：0
> 
> 时间：2012-10-31T17:28:55.153
> 
> 标签：android, android-asynctask

下面是我的异步课程

```
public class GetBitMapFromURL   extends AsyncTask<String, Integer, String>
{
    byte[] tempByte;
    private Bitmap bmap;
@Override
    protected String doInBackground(String... params) 
    {
        // TODO Auto-generated method stub
        String stringUrl = params[0];
        //bmap = null;
        try 
        {
            URL url = new URL(stringUrl);
            InputStream is = (InputStream) url.getContent();
            byte[] buffer = new byte[8192];
            int bytesRead;
            ByteArrayOutputStream output = new ByteArrayOutputStream();
            while ((bytesRead = is.read(buffer)) != -1) 
            {
                output.write(buffer, 0, bytesRead);
            }
            tempByte = output.toByteArray();
        }
        catch (MalformedURLException e) 
        {
            e.printStackTrace();

        } 
        catch (IOException e) 
        {
            e.printStackTrace();

        }
        return "Success";
    }

    @Override
    protected void onPostExecute(String result) 
    {
        super.onPostExecute(result);
        Bitmap tempBitMap = BitmapFactory.decodeByteArray(tempByte, 0, tempByte.length);
        //Log.d("Bitmap bmap value on PostExecute", "bmap="+bmap);
        setBitMap(tempBitMap);
        //imageView.setImageBitmap(bImg);
    }
    void setBitMap(Bitmap bitMapSet)
    {
        this.bmap  = bitMapSet;
        //Log.d("Bitmap bmap value", "bmap="+bmap);
    }
    Bitmap returnBitmap()
    {
        //Log.d("Bitmap bmap value", "bmap="+bmap);
        return bmap;
    }

} 
```

尽管在我的活动中执行了以下操作，returnBitMap() 返回 null。

```
GetBitMapFromURL gbmap1 = new GetBitMapFromURL();       //Obtain medium bitmap
    gbmap1.execute(applicationImageMediumURL);
    if(gbmap1.getStatus() == AsyncTask.Status.FINISHED)
    {
        applicationMediumBitMap = gbmap1.returnBitmap();
     } 
```

建议我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:01:38.990

不要那样做，使用 AsyncTask.onPostExecute() 方法来更新 UI

```
@Override
protected void onPostExecute(String result) 
{
    super.onPostExecute(result);
    applicationMediumBitMap  = BitmapFactory.decodeByteArray(tempByte, 0, tempByte.length);
    //Log.d("Bitmap bmap value on PostExecute", "bmap="+bmap);

   // call any method on the activity to continue the process..
   otherStuff();
} 
```

并删除代码

```
 if(gbmap1.getStatus() == AsyncTask.Status.FINISHED)
   {
        applicationMediumBitMap = gbmap1.returnBitmap();
    }

   // other stuff code 
```

在 Activity onCreate() 中（我猜）。将任何以下代码放在它自己的 Activity 方法中，并在 onPostExecute() 中调用它。

```
private void otherStuff() {
   // other stuff code
} 
```

# iis-6 - 如何通过命令行设置 IIS6 设置

> ID：13163534
> 
> 赞同：-1
> 
> 时间：2012-10-31T17:29:00.917
> 
> 标签：iis-6

我正在使用连续构建服务器（Finalbuilder）来创建一些 IIS6 网站。但是，Finalbuilder 没有将“启用匿名访问”设置为 true 的选项。

是否有提供服务器名称、物理目录等的命令行选项，我可以从命令行启用匿名访问？在 IIS7 中有 appcmd.exe，但我找不到 IIS6 的等价物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:59:25.053

我使用 cscript.exe 执行以下操作：

```
Dim Siteobj
Dim Site
Dim SiteName
Dim SiteId
Dim SiteLocation

SiteName=WScript.Arguments( 0 )

Set SiteObj = GetObject("IIS://localhost/W3SVC")

for each Site in Siteobj

  if Site.keytype="IIsWebServer" Then  

    if Site.ServerComment = SiteName Then

      SiteId=Site.Name     

      SiteLocation = "IIS://LocalHost/w3svc/" & SiteId
      SiteLocation = SiteLocation & "/root"

      Dim SiteObj1
      Set SiteObj1  = GetObject(SiteLocation)
      SiteObj1.authflags=5
      SiteObj1.SetInfo

   Dim objFSO 'As FileSystemObject
    Dim objTextFile 'As Object

    Const ForReading = 1
    Const ForWriting = 2
    Const ForAppending = 8

    'write the siteid to a file to use in other scripts
    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Set objTextFile = objFSO.CreateTextFile("siteid.txt", True)
    objTextFile.Write (SiteId)
    objTextFile.Close

    End if    
  End if 
Next 
```

# objective-c - 取消所有本地通知；不适用于 iPhone 3GS

> ID：13163535
> 
> 赞同：1
> 
> 时间：2012-10-31T17:29:03.057
> 
> 标签：objective-c, ios, xcode

所以我的应用程序已经存在 5 天了，iPhone 3GS 用户报告说当按钮切换时他们的通知没有取消。该按钮执行以下代码：

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

但是，此代码适用于 iPhone 4、iPhone 4S、iPhone 5 和 iPad。这是 iPhone 3GS 的已知错误吗？或者 3GS 是否需要不同的代码来实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-03T04:16:13.457

我在 iPhone 6+ 上的 iOS 8.1 上遇到了这个问题。原来cancelAllLocalNotifications不是同步调用，所以不能保证返回时取消已经完成。我不得不实施以下解决方法

```
- (void) clearNotifications
{
    NSLog(@"Clearing notifications");
    [[UIApplication sharedApplication] cancelAllLocalNotifications];
    long count;
    while ((count = [[[UIApplication sharedApplication] scheduledLocalNotifications] count]) > 0) {
        NSLog(@"Remaining notificaitons to cancel: %lu",(unsigned long)count);
        [NSThread sleepForTimeInterval:.01f];
    }
    NSLog(@"Notifications cleared");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:48:27.213

不知道为什么，但我不得不通过通知 ID 而不是 iPhone 3GS 上的 CancelAll 取消所有通知

# regex - 字符串模式和正则表达式

> ID：13163536
> 
> 赞同：-2
> 
> 时间：2012-10-31T17:29:08.203
> 
> 标签：regex, sed, awk, grep

我有一个包含不同行的文件，其中我有一些行

```
173.194.034.006.00080-138.096.201.072.49934 
```

模式是 3 个数字，然后是一个点，然后是 3 个数字，然后是一个点，等等。

为此，我想使用 awk、grep 或 sed。我如何表达这个正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:58:32.303

在 awk 中，我可能会构建字符串，然后将其搜索为：

```
BEGIN {
   p  = "[.]"
   d  = "[[:digit:]]"
   d3 = d d d                     # or d"{3}"
   d5 = d d d d d                 # or d"{5}"
   re = d3 p d3 p d3 p d3 p d5    # or "(" d3 p "){4}" d5
}
$0 ~ re "-" re 
```

但这真的完全取决于你想用它做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:37:12.347

假设您想获得 123 等 1 个系列的行。存在，请执行

```
 grep '[0-9][0-9][0-9]\.' file > numbersFile 
```

如果你想要像 123.345 这样的 2 个系列，那就做

```
 grep '[0-9][0-9][0-9]\.[0-9][0-9][0-9]\.' file > numbersFile 
```

等等等等

每种`[0-9]`方法仅匹配 0-9 (0,1,2,3,4,5,6,7,8,9) 范围内出现的一个字符。

因为'.' char 在普通的 grep 正则表达式中具有特殊含义，您可以逃避它，就像`\.`表示“只需匹配 '。” 字符（仅限！）;-)

grep 有一些花哨的扩展，允许您指定一次模式，并包括一个限定符，如`{3}`or 有时`\{3\}`（表示 3 次重复）。但是这个扩展不能移植到 Solaris、AIX 等旧的 Unix 上。

这是一个简单的测试，看看您的系统是否支持限定符。（欢迎超级 Grep-heads 更正我的术语 :-)。

```
 echo "173.194.034.006.00080-138.096.201.072.49934" | grep '[0-9]\{10\}\.'
   echo "173.194.034.006.00080-138.096.201.072.49934" | grep '[0-9]\{2\}\.' 
```

第一个测试应该失败，如果你的 grep 支持限定符，第二个测试会成功。

学习长期解决方案（如上）并没有什么坏处，您可以确定这适用于任何 grep。

IHTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:59:38.410

从外观上看，这些是 IP 地址，然后是端口号、破折号，然后是 IP 地址/端口号组合。

如果您使用的是现代 UNIX/Linux 系统，那么

```
grep -P '(\d{3}\.){4}\d{5}-(\d{3}\.){4}\d{5})' 
```

会做的伎俩 - 虽然可能不是最便携的方式来做到这一点。这使用“-P”表示“使用 Perl 正则表达式”选项，有些人可能认为这是作弊！

你没有说在这些字符串之前或之后是否有额外的文本。如果有，那么您可以使用“-o”选项来提取匹配的文本并忽略其他所有内容。

# symfony - 不能在 Symfony2/PHPUnit 测试中包含 Phactory

> ID：13163540
> 
> 赞同：0
> 
> 时间：2012-10-31T17:29:20.030
> 
> 标签：symfony, phactory

我正在尝试让 Phactory 与 Symfony2 项目一起工作。这是我在一个单元测试中的内容：

```
<?php
namespace VNN\PressboxBundle\Tests\Entity;
namespace VNN\PressboxBundle\Entity;
use VNN\PressboxBundle\Entity\User;
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;
use Phactory\Sql\Phactory;

class UserTest extends EntityTest
{
    public function testCreate()
    {   
        Phactory::define('user', array(
            'username' => 'jasonswett',
        )); 
    }   
} 
```

当我尝试运行该测试时遇到的错误是：

```
PHP Fatal error:  Class 'Phactory\Sql\Phactory' not found in /Users/jason/Web/pressbox/src/VNN/PressboxBundle/Tests/Entity/UserTest.php on line 12 
```

很公平。如何让这个文件与 Phactory 对话？如果有帮助，我知道`Phactory`该类已定义，`vendor/chriskite/phactory/lib/Phactory/Sql/Phactory.php`并且它的前几行如下所示：

```
<?php

namespace Phactory\Sql;

class Phactory { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:34:52.060

只需将`Phactory`命名空间添加到`autoload.php`.

另外，我更喜欢将 PHPUnit 的`bootstrap`参数设置为`autoload.php`in `phpunit.xml.dist`：

```
<phpunit
    ...
    bootstrap = "autoload.php"
> 
```

这对于基于 Composer 的 Symfony 2.1 项目非常有效，但我不确定 2.0 的项目。

# java - 语言之间的服务器客户端首选项

> ID：13163541
> 
> 赞同：0
> 
> 时间：2012-10-31T17:29:22.250
> 
> 标签：java, c++, networking, client-server, tcp-ip

当不同语言之间的 TCP/IP 网络连接时，与另一种语言相比，在一种语言上使用服务器是否有优势？我在 C++ 和 Java 之间进行通信，想知道使用特定语言的服务器是否会提高其整体效率，或者客户端服务器关系在效率方面是否不可知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:32:00.583

我会使用任何你觉得更容易使用的东西。我们不能告诉你那是哪一个。

如果您仍然不知道，我建议 Java 对初学者来说更容易，而且更难用 ;)

在您有具体的、可衡量的要求衡量您的应用程序的性能之前，我不会担心性能。

# java - 制作基于 GUI 的应用程序的过程

> ID：13163542
> 
> 赞同：0
> 
> 时间：2012-10-31T17:29:29.470
> 
> 标签：java, user-interface, optimization, coding-style

**在为 GUI 程序编写代码之前有什么方法可以遵循吗？
对于以前的程序，我在为普通程序编写代码之前有算法和/或类图（那些在学习 GUI 之前完成的）

我们在制作 GUI 时是否应该遵循类似的东西？** 

我刚刚制作了一个小游戏（Book cricket），其中涉及使用存储在文件中的数据和一些计算。我一次只做一件事就完成了游戏，所以我有很多代码。我只是想知道在制作基于 GUI 的应用程序时是否有任何程序可以用来优化和使代码易于阅读和调试？

更具体地说：
**1**。我们应该设计不同类别的所有面板吗？

**2** . 如果对象有 actionListeners，那么我应该将它们与对象的创建一起放置吗？

**3** . 在使用 cardLayout 来管理应该可见的面板时，我经常不得不转换与面板静态相关的所有字段，以便我可以在其他面板中的 actionEvents 上修改一个面板中的字段。

这是一个标准的事情还是我应该做一些不同的事情。

**4** . 我使用终端来编写我的代码。由于我刚刚开始使用 GUI，我认为使用终端会是更好的学习体验。我应该继续使用终端还是切换到 Eclipse/netBeans 之类的 IDE？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:06:26.927

你想写什么样的程序：它是一个游戏还是只是一个应用程序？对于每一种事情，通常都有一些模式可以做到这一点。此外，对于每种游戏或应用程序，构建框架的方法有很多。换句话说，它是多样性的，并且很好地依赖于程序。

不过，总的来说，当您开始设计程序时，会有一些建议。例如，您可以通过以下方式将 MVC（模型-视图-控制器）应用于此：

**查看**：这是一个 GUI，只是一个 GUI。它包含构建 GUI 的代码，为某些对象（例如按钮）构建动作侦听器 .... 当此 GUI 上出现某些动作时，例如，有人单击按钮，它将在 Controller 中调用适当的动作。所以，事实上，View 并没有真正理解任何事情。它不知道（也不关心）这个按钮或那个按钮应该做什么。

**控制器**：连接视图和模型。它将初始化视图和模型。它将接收来自视图的操作，并从模型中调用适当的方法并再次将结果返回给视图。控制器知道如何控制来自用户的数据流。

**模型**：一个类，你的应用程序可以执行一系列操作。模型并不真正知道如何操作您的程序，它只是保存程序的状态。

希望这有帮助:)

# iframe - 将 keyup 操作添加到 niceEdit 版本的 iframe

> ID：13163545
> 
> 赞同：1
> 
> 时间：2012-10-31T17:29:43.067
> 
> 标签：iframe, nicedit, keyup

我正在使用 iframe 格式的 nicEdit。每次用户在编辑器中写任何东西（keyup 事件）时，我都需要运行另一个 js/jquery 函数。如何将此自定义键操作添加到所需的 iframe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:10:16.370

答案其实在于js代码。在 nicEdit.js 中搜索：

```
var nicEditorIFrameInstance = nicEditorInstance.extend({ 
```

在这里面，在`initFrame`函数中，寻找`this.frameDoc.addEvent`. 这是添加事件的地方（通过 addEvent）。这包括您的 keyup 声明：

```
addEvent('keyup',this.YOURFUNCTIONAME.closureListener(this)) 
```

您需要添加`closureListener(this)`才能使其正常工作。然后在 initFrame 函数之后创建 YOURFUNCTION ，如下所示：

```
YOURFUNCTIONAME: function() {
//Do what you like. Probably call any JS function that lies in the file where 
//you have included the nicEdit.js
}, 
```

这种方法对我有用。希望它也适合你。nicEdit 是迄今为止我遇到的记录最差的第三方内容。

# java - 使用HashMap统计实例

> ID：13163547
> 
> 赞同：5
> 
> 时间：2012-10-31T17:29:43.623
> 
> 标签：java, hashmap, equals, hashcode

我有以下代码来计算数组中不同字符串的实例；

```
String words[] = {"the","cat","in","the","hat"};
HashMap<String,Integer> wordCounts = new HashMap<String,Integer>(50,10);
for(String w : words) {
    Integer i = wordCounts.get(w);
    if(i == null) wordCounts.put(w, 1);
    else wordCounts.put(w, i + 1);
} 
```

这是正确的做法吗？一个简单的任务似乎有点啰嗦。结果`HashMap`对我很有用，因为我将按字符串对其进行索引。

我担心线路

```
else wordCounts.put(w, i + 1); 
```

可能会插入第二`key-value`对，因为

```
new Integer(i).equals(new Integer(i + 1)); 
```

会是假的，所以两个`Integers`最终会在同一个`String`密钥桶下，对吧？还是我只是过度思考自己陷入了困境？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T17:33:05.937

您的代码将*起作用*`HashMultiset`-但从[Guava](http://guava-libraries.googlecode.com)使用它会更简单。

```
// Note: prefer the below over "String words[]"
String[] words = {"the","cat","in","the","hat"};
Multiset<String> set = HashMultiset.create(Arrays.asList(words));

// Write out the counts...
for (Multiset.Entry<String> entry : set.entrySet()) {
    System.out.println(entry.getElement() + ": " + entry.getCount());
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T17:31:43.977

是的，您正在以正确的方式进行操作。如果提供了相同的键，HashMap 会替换值。

来自 Java 文档[`HashMap#put`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#put%28K,%20V%29)

> 将指定的值与此映射中的指定键相关联。如果映射先前包含键的映射，**则替换旧值。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T17:31:52.783

您的代码非常好。您将字符串映射到整数。没有任何东西是重复的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T17:32:11.987

HashMap 不允许重复**键**，因此无法在您的映射中拥有多个 SAME 键值对。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-03T21:45:30.270

这是一个特定于字符串的计数器，它应该被泛化并具有 toString() 的按值排序选项，但它是该问题的面向对象的包装器，因为我找不到类似的东西：

```
package com.phogit.util;

import java.util.Map;
import java.util.HashMap;

import java.lang.StringBuilder;

public class HashCount {

    private final Map<String, Integer> map = new HashMap<>();

    public void add(String s) {
        if (s == null) {
            return;
        }
        Integer i = map.get(s);
        if (i == null) {
            map.put(s, 1);
        } else {
            map.put(s, i+1);
        }
    }

    public int getCount(String s) {
        if (s == null) {
            return -1;
        }
        Integer i = map.get(s);
        if (i == null) {
            return -1;
        }
        return i;
    }

    public String toString() {
        if (map.size() == 0) {
            return null;
        }
        StringBuilder sb = new StringBuilder();
        // sort by key for now
        Map<String, Integer> m = new TreeMap<String, Integer>(map);
        for (Map.Entry pair : m.entrySet()) {
            sb.append("\t")
              .append(pair.getKey())
              .append(": ")
              .append(pair.getValue())
              .append("\n");;
        }
        return sb.toString();
    }

    public void clear() {
        map.clear();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-26T13:04:59.190

您的代码对我来说看起来不错，并且没有问题。由于 Java 8 的特性，它可以简化为：

```
String words[] = {"the","cat","in","the","hat"};
HashMap<String,Integer> wordCounts = new HashMap<String,Integer>(50,10);
for(String w : words) {
     wordCounts.merge(w, 1, (a, b) -> a + b);
} 
```

以下代码

```
System.out.println("HASH MAP DUMP: " + wordCounts.toString()); 
```

会打印出来。

```
HASH MAP DUMP: {cat=1, hat=1, in=1, the=2} 
```

# eclipse - 如何从build.xml文件构建hadoop1.0.4 eclipse插件？

> ID：13163550
> 
> 赞同：2
> 
> 时间：2012-10-31T17:29:44.290
> 
> 标签：eclipse, hadoop, eclipse-plugin, hadoop-plugins

我必须在 Eclipse 中为 Hadoop1.0.4 编写 MapReduce 程序。

此版本的 Hadoop 不包含 eclipse 插件。

但是 build.xml 文件可以在 $HADOOP_HOME/src/contrib/eclipse-plugin 中找到。

如何从 build.xml 文件生成或构建 eclipse 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:33:20.020

vi 到 build.xml 文件中。默认参数是我做的 jar`$HADOOP_HOME/src/contrib/eclipse-plugin: ant jar` 并且期待 plugin.jar 文件，但它说 build failed because of autoconf 。查看这些以供参考 [http://wiki.apache.org/hadoop/EclipsePlugIn](http://wiki.apache.org/hadoop/EclipsePlugIn) http://rohanlopes.blogspot.com/2012/08/download-hadoop-103-plugin-for-eclipse.html [http://linuxjunkiemonkey .wordpress.com/2012/04/22/eclipse-apache-hadoop-plugin-build-1-0-2/](http://linuxjunkiemonkey.wordpress.com/2012/04/22/eclipse-apache-hadoop-plugin-build-1-0-2/)

我将获取 plugin.jar 文件捆绑了 2 天，最后不得不回滚到 0.20.2 。请让我知道您是如何使构建工作的，或者如果它对您有用，请将 hadoop1.0.4-eclipse-plugin.jar 发送给我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:48:37.107

打开 build.xml 文件

搜索：

```
<fileset dir="${eclipse.home}/plugins/"> 
```

用真实路径替换 ${eclipse.home}

打开你的终端。

cd 到 $HADOOP_HOME/src/contrib/eclipse-plugin

$ sudo 蚂蚁罐

它将在 build.xml 文件中描述的文件夹中创建一些 jar 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:11:38.553

您需要修改 build.xml 以设置 eclipse.home 环境变量。你至少可以用两种方式编译它，

1）在linux env下，你先构建hadoop common。然后，将 eclipse.home 设置为编译 eclipse 插件。

2) 修改 build.xml 以指向二进制 hadoop jar 文件并设置 eclipse.home。然后，您构建 eclipse 插件。

您也可以从这里下载构建 jar 文件：http: [//yiyujia.blogspot.com/2012/10/eclipse-mapreduce-plugin-build-for.html](http://yiyujia.blogspot.com/2012/10/eclipse-mapreduce-plugin-build-for.html)。

# ruby-on-rails-3 - 引导 css 不起作用

> ID：13163555
> 
> 赞同：0
> 
> 时间：2012-10-31T17:30:04.170
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我在我的 ruby​​ on rails 项目中使用 gem twitter-bootstrap-rails。但是 css 类“icon-white”不起作用。我可以在 gem toolkit 中看到“icon-white”的定义。但是在 chrome 开发工具中，我找不到它。为什么？怎么解决？

```
<h2>Sign in</h2>

<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
<div><%= f.label :email %><br />
<%= f.email_field :email %></div>

<div><%= f.label :password %><br />
<div class = "icon-user icon-white"></div>
<%= f.password_field :password %></div>

<% if devise_mapping.rememberable? -%>
<div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
<% end -%>

<div><%= f.submit "Sign in" %></div>
<% end %>

<%= render "devise/shared/links" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:39:03.223

引导图标适用于`<i>`元素。

```
<i class="icon-user icon-white"></i> 
```

他们不会在一个`<div>`

[http://twitter.github.com/bootstrap/base-css.html#icons](http://twitter.github.com/bootstrap/base-css.html#icons)

（向下滚动到“如何使用”）

# c# - 从同一个文本框中读取不同的 int

> ID：13163560
> 
> 赞同：2
> 
> 时间：2012-10-31T17:30:31.763
> 
> 标签：c#, textbox, serial-port, int

我对 C# 并不陌生，我在这里遇到了一些问题：

我想通过串口将我的年龄以十六进制代码发送到我的电脑所连接的设备。我有这些代码，但我必须从 textBox 中读取输入的年龄。

例如：在 textBox 我输入我的年龄 (24)，每个数字都有一个十六进制代码。那么我如何从文本框中读取每个数字？我认为这就是我必须做的，我读取数字 2，发送十六进制代码，然后读取第二个数字并发送十六进制代码。我说清楚了吗？

**编辑：** 我得到 awnsered 后只是向你们展示我的代码。谢谢大家:)

```
 private void btnConfirmaIdade_Click(object sender, EventArgs e)
    {
        string allValue = mtxbIdade.Text;

        foreach (char c in allValue)
        {
            MandaIndadeSerial(c);
        }

    }

    public void MandaIndadeSerial(char c)
    {
        switch (c)
        {
            case '1':
                EnviarComando("0232363b3bde03");// send hexa code to device by serial
                    break; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:33:14.840

```
foreach(char c in TextBox.Text)
{
  // TODO: send current number. Cast to string if needed: (string)c 
} 
```

此代码从左到右遍历 TextBox 中的所有数字/字符，并允许您分别处理/发送它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:33:27.073

```
string numbers = new string[2];
numbers[0] = textbox.Text.Substring(0,1);  //first character in textbox
numbers[1] = textbox.Text.Substring(1,1);  //second character 
```

# facebook-graph-api - 随着 Facebook 弃用其 REST API，附属关系会怎样？

> ID：13163573
> 
> 赞同：-1
> 
> 时间：2012-10-31T17:31:17.853
> 
> 标签：facebook-graph-api

> **可能重复：**
> [如何使用 Facebook Graph API 获取用户的网络信息？(PHP)](https://stackoverflow.com/questions/4522830/how-to-get-users-network-information-using-facebook-graph-api-php)

如何获取 Facebook 用户所属的大学或高中网络？之前有 affiliations 元素，但在新的 Graph API 中不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:57:01.373

无法使用 Graph API 获取此信息。图形 API的[用户对象](http://developers.facebook.com/docs/reference/fql/user/)包含 和 的键`work`，`education`但这些与用户的网络从属关系不同，不能通过图形 API 访问。

您需要做的是使用 FQL。[您可以使用user 表](http://developers.facebook.com/docs/reference/fql/user/)`affiliations`的列获取用户的网络从属关系。如果这*真的*是你想要做的，那么这就是你所需要知道的。

 *但是，如果（似乎很可能）您对用户的网络从属关系并不完全感兴趣，而是对他们的教育历史更广泛感兴趣，请注意！如前所述，与 Facebook 的数据`affiliations`不同并存`work`在于`education`Facebook 的数据中。无法保证进入特定高中或大学进入其个人资料的“教育”部分的用户也加入了该学校或大学的网络……但他们可能已经加入。更糟糕的是，例如，如果某人将一所大学添加到他们的教育部门并加入了该大学的网络，则该大学可能以*不同的名称出现*在“网络”栏和“教育”栏。这意味着要获得一份不重复某人就读过的学校或大学的完整列表并非易事，并且需要一些聪明的技巧。

例如，当从用户表中进行选择时`affiliations`，`education`我的一个朋友显示如下：

```
"affiliations": [
        {
          "nid": 16777585, 
          "name": "Oxford University", 
          "type": "college"
        }, 
        {
          "nid": 33585181, 
          "name": "Queens College, Taunton", 
          "type": "high school"
        }
      ], 
      "education": [
        {
          "school": {
            "id": 110611448960664, 
            "name": "Queens College, Taunton"
          }, 
          "type": "High School"
        }, 
        {
          "school": {
            "id": 16686610106, 
            "name": "University of Oxford"
          }, 
          "type": "College"
        }
      ] 
```

请注意，她的教育部门包括“牛津大学”，但在她的附属机构中，它是“牛津大学”。如果您希望能够干净地提取用户的教育历史，您需要做一些聪明的事情来识别这些是您的重复。

要了解您面临的混乱情况，请运行[此查询](https://developers.facebook.com/tools/explorer/?fql=SELECT%20uid%2C%20name%2C%20affiliations%2C%20education%0AFROM%20user%0AWHERE%20uid%20in%20%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20SELECT%20uid1%0A%20%20%20%20%20%20%20%20%20%20%20%20%20FROM%20friend%0A%20%20%20%20%20%20%20%20%20%20%20%20%20WHERE%20uid2%20%3D%20me%28%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%29)以查看您所有朋友的“教育”和“从属关系”字段。

祝你好运！*

# javascript - JavaScript onFocus 和 onClick 强制在 IE7 中的下拉菜单上单击 2 次

> ID：13163576
> 
> 赞同：1
> 
> 时间：2012-10-31T17:31:26.427
> 
> 标签：javascript, internet-explorer-7, prototype

```
$('fltr1').onfocus = function() {
                    $('fltr1').setStyle({width: "auto"});
                } 
```

使用 Prototype.js，我试图让一个 IE7 兼容的下拉菜单框在用户单击它时将其宽度更改为自动。就像现在一样，当用户单击此框时，它成功扩展了它的宽度，但是直到您再次单击该框才打开，需要单击 2 次。第一次单击会展开，第二次单击会打开允许您选择项目的框。就像第一次单击触发设置宽度事件，然后停止其他所有内容并强制关闭下拉菜单。我试过onclick，它做同样的事情，调整宽度但关闭下拉菜单，直到你第二次点击。

我怎样才能阻止这需要两次点击？设置宽度时导致下拉菜单关闭的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:03:35.677

我认为您无法使用当前在 IE7 中的方法来完成这项工作。当浏览器重新绘制选择框时，它会关闭下拉菜单。您认为可以使用单击事件手动重新打开它，但使用本机选择框则不可能，请参阅此讨论： [How can you programmatically tell an HTML SELECT to drop down（例如，由于鼠标悬停）？](https://stackoverflow.com/questions/249192/how-can-you-programmatically-tell-an-html-select-to-drop-down-for-example-due)

作为一种解决方法，您可以将调整大小移动到鼠标悬停事件？如果您想保留其他浏览器中的行为，也许仅适用于 IE7？

```
$('fltr1').onmouseover = function() {
    this.setStyle({width: "auto"});
} 
```

# javascript - Windows.open - 当它被关闭时我该如何处理？

> ID：13163585
> 
> 赞同：0
> 
> 时间：2012-10-31T17:31:50.473
> 
> 标签：javascript

通过调用`window.open`我从我的 Sinatra 应用程序中打开一个带有外部网站的新窗口：

```
%a{:href=>"some_external_website.com", :target=>"blank", :onclick=>"popupWin = window.open(this.href, 'test', 'location,width=600,height=500,top=0'); popupWin.focus(); return false; window.open('')"} 
```

我想处理用户关闭窗口的时刻。我该怎么做？当然，在javascript中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T17:37:05.640

将[`onunload`](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)处理程序添加到窗口。使用您当前的方法：

```
var popupWin = window.open(this.href, 'test', 'location,width=600,height=500,top=0');
popupWin.focus();
// add an onunload handler
popupWin.onunload = function () { ... };
return false;
window.open('') // this is dead code, unconditional return above... 
```

# handlebars.js - else if 的车把 js 自定义助手

> ID：13163586
> 
> 赞同：20
> 
> 时间：2012-10-31T17:31:51.313
> 
> 标签：handlebars.js

我已经开始使用 Handlebars.js。似乎没有像 else if 这样的内置条件。我想要这样的东西

```
{{#if type.one }}
     do something ... IF
{{else if type.two}}
     do something ... ELSE IF
{{else}}
     do something ... ELSE
{{/if}} 
```

但这不起作用。我如何用车把做 ELSE IF？编写自定义助手是唯一的选择吗？如果是，请提供一些指示来编写此帮助程序。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-31T19:31:40.133

您不能使用自定义助手来执行此操作，因为 Handlebars if-ish 助手只了解两个部分：“if”部分和“else”部分。你可以嵌套一些东西：

```
{{#if type.one}}
    do something ... IF
{{else}}
    {{#if type.two}}
        do something ... ELSE IF
    {{else}}
        {{#if type.three}}
            ...
        {{else}}
            ...
        {{/if}}
    {{/if}}
{{/if}} 
```

这种事情会很快变得讨厌，所以你可能不想这样做。更好的方法是（与 Handlebars 一样）将逻辑推送到您的 JavaScript 中，以便至多有一个`type.one`, `type.two`, `type.three`, ... 为真；那么你可以：

```
{{#if type.one}}
    ...
{{/if}}
{{#if type.two}}
    ...
{{/if}}
{{#if type.three}}
    ...
{{/if}} 
```

如果您有很多选择`type`或者如果您`{{#if}}`的 s 中的主体很复杂，您可以切换到部分。但是，您必须添加一个自定义帮助程序才能基于模板变量构建部分名称；像这样的东西：

```
Handlebars.registerHelper('show_type', function(type) {
    var types = ['one', 'two', 'three'];
    var partial;
    for(var i = 0; i < types.length; ++i) {
        if(!type[types[i]])
            continue;
        partial = '_partial_' + types[i];
        break;
    }
    if(partial)
        return Handlebars.partials[name](this);
    else
        return '';
}); 
```

然后，假设您的部分都已注册并一致命名，您可以说：

```
{{show_type type}} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-19T08:25:22.073

由于 Handlebars 3.0，OP 描述的语法确实可以开箱即用！有关更多信息，请参阅：[https ://github.com/wycats/handlebars.js/pull/892。](https://github.com/wycats/handlebars.js/pull/892)

*注意：对于 Ember，从 1.10 及更高版本开始，这也可以。另见： [http ://emberjs.com/blog/2015/02/07/ember-1-10-0-released.html#toc_chained-else-blocks](http://emberjs.com/blog/2015/02/07/ember-1-10-0-released.html#toc_chained-else-blocks)*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-18T13:25:02.950

如果您使用类似 ember 的框架，

```
{{#if isAtWork}}
     Ship that code!
{{else if isReading}}
      You can finish War and Peace eventually...
{{/if}} 
```

链接： http: [//guides.emberjs.com/v1.12.0/templates/conditionals/](http://guides.emberjs.com/v1.12.0/templates/conditionals/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-23T07:48:43.783

你可以这样做：

```
{{#if type.one}}
  ...
{{else}} {{#if type.two}}
  ...
{{else}} {{#if type.three}}
  ...
{{else}}
  ...
{{/if}}{{/if}}{{/if}} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-24T15:48:23.097

如果您想要切换行为，您可能对[Dan Harper 的助手](https://github.com/danharper/Handlebars-Helpers)感兴趣，您将能够执行以下操作：

```
{{#is type 1}}
    <p>Do something when 1.</p>
{{else}}{{#is type 2}}
    <p>Do something when 2.</p>
{{else}}{{#is type 3}}
    <p>Do something when 3.</p>
{{/is}}{{/is}}{{/is}} 
```

这是[jsfiddle](https://jsfiddle.net/199jdzn2/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-08T18:01:49.320

OP 编写的确切语法将在今天 `ember-htmlbars-inline-if-helper`启用功能标志的 Ember Canary 中工作。

# dynamics-crm - 看不到某些类别的 CRM 2011

> ID：13163593
> 
> 赞同：-1
> 
> 时间：2012-10-31T17:32:08.420
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-4

我正在为 CRM 2011 开发我的第一个应用程序。我已经导入了开发所需的所有 .dll。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xrm.Sdk;
using Microsoft.Xrm.Sdk.Query;
using Microsoft.Crm.Sdk.Messages; 
```

但是当我调用一些简单的类时，比如“Annotation”、“Letter”、“Email”，Visual Studio 没有检测到这些类。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:58:25.160

您需要使用 SDK 附带的工具 CrmSvcUtil 来生成强类型类。

[使用代码生成工具 (CrmSvcUtil.exe) 创建早期绑定实体类](http://msdn.microsoft.com/en-us/library/gg327844.aspx)

# java - Android：如何在 24 小时后注销用户？

> ID：13163602
> 
> 赞同：0
> 
> 时间：2012-10-31T17:32:23.107
> 
> 标签：java, android

我认为的一种方法是检查从上次运行到当前时间戳的时间戳，并确定用户是否需要注销（从应用程序的成员部分）。另一位开发人员建议创建 Android 服务。想知道自上次运行用户 24 小时后自动强制注销用户的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:36:52.033

要在 24 小时后自动强制注销用户，您需要在服务器上保存注销时间，每次应用启动时检查并注销他/她。这是因为应用程序可能会被卸载，然后所有保存的时间戳数据都将丢失。

请注意，当应用程序被卸载并重新安装时，保存时间戳并重新启动登录过程是完全可以的。许多应用程序都这样做。但是，如果这是一个金融应用程序，那么控制从服务器注销是个好主意，它为您提供了更大的灵活性和控制力。

# jquery - 使用 jQuery 避免两个同时的 ajax 调用

> ID：13163604
> 
> 赞同：0
> 
> 时间：2012-10-31T17:32:35.900
> 
> 标签：jquery, ajax

> **可能重复：**
> [Ajax 请求正在进行 jQuery](https://stackoverflow.com/questions/2872287/ajax-request-in-progress-jquery)

我试图实现的是：

```
var calling = {};
if(!calling[resourceId]){
    $.ajax(...);
    calling[resourceId] = true;
} 
```

显然，我想避免同时对同一资源进行两次调用。但是我发现为此在我的脚本中使用全局变量很难看。我想知道你是否知道用 jQuery 直接处理这个问题的好方法？

我能想到的最好的解决方案是 jQuery.ajax 上的猴子补丁，为它提供一些“resourceId”参数，并且在任何调用之前，jQuery.ajax() 函数本身会检查是否已经使用该“进行调用”资源标识”。我在 $.ajax 文档中找不到这样的选项，我想知道为什么！？

谢谢你。

**更新：我在“扩展 Ajax”文档页面上的 jQuery 的 Prefilters 选项中找到了我正在寻找的内容。：[http ://api.jquery.com/extending-ajax/](http://api.jquery.com/extending-ajax/)**

感谢提示人们:)

# php - Mysql，检查行是否存在，如果它确实获取值，如果不插入

> ID：13163607
> 
> 赞同：0
> 
> 时间：2012-10-31T17:32:42.007
> 
> 标签：php, mysql, insert

我有两张表，一张是存储“tid”（自动增量）和“name”（标签名称）的“标签”。第二个表“tags_data”存储每个标签上的数据。该表具有字段“tid”（来自第一个表）和其他一些字段。

这样人们就可以在我的网站上标记内容。当我标记内容时，我想首先检查该标记是否已存在于第一个表中。如果它不存在，那么我们将标签插入数据库并使用 tid 插入第二个表。到目前为止，我有这部分工作。

问题是当标签已经存在于数据库中时，我想获取现有的 tid 并在我的第二个查询中使用它。

这是我到目前为止的代码：

```
 // check if tag already exists
$tagexists = "SELECT COUNT(*) as cnt FROM tags WHERE 'name' = '$usetag' LIMIT 1";
$results = mysql_query($tagexists) or die('Invalid query: ' . mysql_error());
if ($results['cnt'] == 0) {
    // tag is not yet in DB
    $tagquery1 = "INSERT INTO tags (name) VALUES ('$usetag')";
    $result = mysql_query($tagquery1) or die('Invalid query: ' . mysql_error());
    $lastid = mysql_insert_id();
    $tagquery2 = "INSERT INTO tags_data (tid, nid, uid) VALUES ($lastid, $nid2, $uid)";
    $result = mysql_query($tagquery2) or die('Invalid query: ' . mysql_error());
} else {
    // tag is already in DB, grab the tid
    $grabtid = "SELECT tid FROM tags WHERE 'name' = '$usetag' LIMIT 1";
    $results = mysql_query($grabtid) or die('Invalid query: ' . mysql_error());
    $row = mysql_fetch_array($results);
    $lastid = $row['tid'];
    $tagquery2 = "INSERT INTO tags_data (tid, nid, uid) VALUES ($lastid, $nid2, $uid)";
    $result = mysql_query($tagquery2) or die('Invalid query: ' . mysql_error());        
} 
```

我检查标签是否已经存在的方式有问题。我正在使用 COUNT 在线遵循指南，但它似乎无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:36:17.993

`$results['cnt'] == 0`是错的。你忘记了得到结果。（$results 是一个资源 ID。）

```
if(mysql_result($results) == 0){ 
```

同样，获取现有数据的第二部分`if`也缺少它。你想在`$data = mysql_fetch_assoc($result);`那里使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:38:29.760

我认为你的代码是错误的

```
$tagexists = "SELECT COUNT(*) as cnt FROM tags WHERE 'name' = '$usetag' ";
$res = mysql_query($tagexists) or die('Invalid query: ' . mysql_error());
$results = mysql_fetch_assoc($res);
if ($results['cnt'] == 0) {
    // tag is not yet in DB
    $tagquery1 = "INSERT INTO tags (name) VALUES ('$usetag')";
    $result = mysql_query($tagquery1) or die('Invalid query: ' . mysql_error());
    $lastid = mysql_insert_id();
    $tagquery2 = "INSERT INTO tags_data (tid, nid, uid) VALUES ($lastid, $nid2, $uid)";
    $result = mysql_query($tagquery2) or die('Invalid query: ' . mysql_error());
} else {
    // tag is already in DB, grab the tid
    $grabtid = "SELECT tid FROM tags WHERE 'name' = '$usetag' LIMIT 1";
    $results = mysql_query($grabtid) or die('Invalid query: ' . mysql_error());
    $row = mysql_fetch_array($results);
    $lastid = $row['tid'];
    $tagquery2 = "INSERT INTO tags_data (tid, nid, uid) VALUES ($lastid, $nid2, $uid)";
    $result = mysql_query($tagquery2) or die('Invalid query: ' . mysql_error());        
} 
```

# c++ - C++：编写头文件以提高程序效率

> ID：13163608
> 
> 赞同：0
> 
> 时间：2012-10-31T17:32:44.417
> 
> 标签：c++

创建我们自己的头文件的方法，因为它应该包含在我们的代码中，以便代码可以使用预定义的语句......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:35:17.340

这是编写头文件的好教程。希望这会有所帮助。[http://www.learncpp.com/cpp-tutorial/19-header-files/](http://www.learncpp.com/cpp-tutorial/19-header-files/)

# windows - 说明您不应该写入 Program Files 区域的指南在哪里？

> ID：13163611
> 
> 赞同：13
> 
> 时间：2012-10-31T17:32:52.020
> 
> 标签：windows

关于 SO 的许多问题都说“Windows 开发人员指南”或“Windows 设计指南”说您不应该将临时数据或程序数据写入 Program Files 区域，但据我所知，它们都没有真正链接到文档说了这么多。搜索 MSDN 没有产生任何结果。Windows 将使该区域成为只读区域，因此它可以由操作系统强制执行，但这并不意味着开发人员无论如何都不会尝试在那里写入（例如，在移植旧版本、XP 和更早版本的程序时）。

我意识到在 Windows 开发的后期问这个问题似乎很奇怪（因为，正如下面的评论者指出的那样，操作系统已经强制执行了十多年），但有时需要一份这样说明的文件才能满足人们.

考虑到这一点，Microsoft 是否发布了一份文档说明我们不应将应用程序数据写入 Program Files 区域，如果是，它在哪里？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T17:42:30.640

来自*Windows 7 客户端软件徽标计划的技术要求*：

> ## 默认安装到正确的文件夹
> 
> 用户应该对文件的默认安装位置有一致且安全的体验，同时保留将应用程序安装到他们选择的位置的选项。还必须将应用程序数据存储在正确的位置，以允许多人使用同一台计算机，而不会破坏或覆盖彼此的数据和设置。
> 
> * * *
> 
> Windows 在文件系统中提供特定位置来存储程序和软件组件、共享应用程序数据以及特定于用户的应用程序数据：
> 
> *   默认情况下，应用程序应安装到 Program Files 文件夹。***由于为此文件夹配置了安全权限，用户数据或应用程序数据绝不能存储在此位置***（已*添加重点*）
> *   必须在计算机上的用户之间共享的所有应用程序数据都应存储在 ProgramData 中
> *   所有特定用户专有且不与计算机的其他用户共享的应用程序数据必须存储在 Users\<username>\AppData
> *   切勿直接写入“Windows”目录和/或子目录。使用正确的方法安装文件，例如字体或驱动程序
> *   在“每台机器”安装中，用户数据必须在首次运行时写入，而不是在安装期间写入。这是因为在安装时没有正确的用户位置来存储数据。应用程序在安装后尝试在机器级别修改默认关联行为将不成功。相反，必须在每个用户级别声明默认值，这可以防止多个用户覆盖彼此的默认值。

而且我很确定NT 系列的每个Windows 版本都有类似的东西可以追溯到Windows NT 4 甚至更早的版本。

* * *

另请参阅[此问题](https://stackoverflow.com/questions/5622681/looking-for-documentation-on-the-right-way-to-install-apps-on-windows-7)。

* * *

*编辑：*这篇文章中指向 Windows 7 徽标程序的原始链接不再存在。[在这里，您可以找到指向Windows 桌面应用程序认证要求](https://msdn.microsoft.com/en-us/library/mt674655%28v=vs.85%29.aspx)的当前链接。请参阅第 10 节，*应用程序必须默认安装到正确的文件夹*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:48:46.117

在更高版本的 Windows（Vista、7，当然还有服务器版本）中，“特殊文件夹”（包括“程序文件”）的访问权限受到限制。即使您的程序被提升到有足够的权限写入这个文件夹，这仍然是一个坏主意。

我不知道任何说明这一点的准则，但有[一个特殊文件夹列表及其](http://msdn.microsoft.com/en-us/library/s2esdf4x%28v=vs.100%29.aspx)用途。事实上，我可以为几乎所有类型的数据创建一个特殊文件夹，这意味着无需使用程序文件文件夹。![特殊文件夹列表](../Images/84fe367ec35e5f0447a2bdb1721b5035.png)

# firefox - 当容器在 Firefox 中具有 css3 转换时，选择标记无法正常工作

> ID：13163613
> 
> 赞同：2
> 
> 时间：2012-10-31T17:32:55.457
> 
> 标签：firefox, css

我有一个问题，我想使用 css3 转换为我的容器框设置动画，其中包含诸如选择保管箱之类的内容。问题是在 Firefox 16.0.2 中，选择功能不起作用。这是非常错误的。删除转换，它工作正常。

任何可能的解决方法而不诉诸jquery animate？

编辑：

[http://jsfiddle.net/DZjPr/](http://jsfiddle.net/DZjPr/)

对不起！我已经准备好了 jfiddle 但忘记添加链接

```
 <div id="container" style="transform: translate(0px, 17px); -webkit-transform: translate(0px, 17px); -moz-transform: translate(0px, 17px);">

        <div>

             <select name="amt">

              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>

            </select>

        </div>
    </div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:52:35.080

我发现的最佳解决方案是禁用 Firefox 的转换：

```
@-moz-document url-prefix() {
    .parent {
        transform: none;
    }
} 
```

里面也可以定义一些css fallback for transform (eg left: 100px)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:09:45.780

这是一个 Mozilla 问题：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=664707) ://bugzilla.mozilla.org/show_bug.cgi?id=664707 该补丁尚未发布。

# android - 正确使用 Fragments 和 TabListener

> ID：13163615
> 
> 赞同：2
> 
> 时间：2012-10-31T17:33:00.350
> 
> 标签：android, android-fragments

我的问题是关于带有标签的片段。我有一个基本上有一个空布局的活动，我动态地向它添加片段。一旦我开始活动，我就会添加一个带有列表视图的片段，当我单击列表中的一个项目时，我会删除带有列表视图的片段并添加另一个带有详细信息的片段。现在还可以看到一些选项卡。单击其中一个选项卡会显示有关列表视图中项目的其他详细信息。

我确实有工作代码，但似乎我完全在破解它。

这是其中的一些内容：

## 活动：

```
// In onCreate:
@Override
  protected void onCreate(Bundle savedInstanceState) {
    // Check that the activity is using the layout version with
    // the fragment_container FrameLayout
    if (findViewById(R.id.fragment_container) != null) {
      // However, if we're being restored from a previous state,
      // then we don't need to do anything and should return or else
      // we could end up with overlapping fragments.
      if (savedInstanceState != null) {
        return;
      }
      // Create an instance of FList
      fList = new FList();
      // Add the fragment to the 'fragment_container' FrameLayout
      getFragmentManager().beginTransaction().add(R.id.fragment_container,fList).commit();
    }
  }

// After clicking on an item of the listview changeFragment() is called
public void changeFragment() {
  FragmentTransaction ft = getFragmentManager().beginTransaction();
  fSpeed = new FSpeed();
  ft.add(R.id.fragment_container, fSpeed);

  // this might be necessary
  if (actionBar != null)
    actionBar.selectTab(tabSpeed);
  ft.commit();
}

// In the activity I also setup the ActionBar with tabs
private void setupActionBar() {
  tabSpeed = actionBar.newTab();
  // and a few more tabs...
  tabSpeed.setTabListener(this);
  actionBar.addTab(tabSpeed);
  // But the tabs are not visible because of the navigation mode
  actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
}

// Here is the tabListener - very hacky!
@Override
  public void onTabSelected(Tab tab, FragmentTransaction ft)
    if (fm == null)
      fm = getFragmentManager();
    Fragment f = null;
    switch (tab.getPosition()) {
    case 0:
      if (fSpeed == null)
        fSpeed = new FSpeed();
      f = findFragment(fSpeed);
      if (f != null) {
        ft.setCustomAnimations(R.anim.fragment_alpha_0_1, R.anim.fragment_alpha_1_0);
        ft.remove(f);
        ft.add(R.id.fragment_container, fSpeed);
      } else {
        Log.d(TAG, "fSpeed is " + f);
        return;
      }
      break;
      case 1:
        // more tabs - similar code
    }

// the findFragment() method
private Fragment findFragment(Fragment selectedFragment) {
  if (fm.findFragmentById(R.id.fragment_container) == fSpeed && selectedFragment != fSpeed)
    return fSpeed;
  // more ifs for other fragments
  else
    return null;
} 
```

这一切都很好，但是在选项卡之间切换 x 次后，事情开始看起来很有趣，例如 fList 可见，选项卡图标消失了，......我可以追踪错误并添加一些空检查，但我认为我错了方法。这就是为什么我将 TabListener 更改为以下内容：

```
// Still in activity
public static class MyTabListener<T extends Fragment> implements TabListener {
  private Fragment mFragment;
  private final Activity mActivity;
  private final String mTag;
  private final Class<T> mClass;
  /**
  * * Constructor used each time a new tab is created. 
  * * * @param
  * activity * The host Activity, used to instantiate the fragment 
  * * @param
  * tag * The identifier tag for the fragment 
  * * @param clz * The
  * fragment's Class, used to instantiate the fragment
  */
  public MyTabListener(Activity activity, String tag, Class<T> clz) {
    mActivity = activity;
    mTag = tag;
    mClass = clz;
    }

  /* The following are each of the ActionBar.TabListener callbacks */
  public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // Check if the fragment is already initialized
    if (mFragment == null) {
      // If not, instantiate and add it to the activity
      mFragment = Fragment.instantiate(mActivity, mClass.getName());
      ft.add(R.id.fragment_container, mFragment, mTag);
    } else {
    // If it exists, simply attach it in order to show it
      ft.attach(mFragment);
    }
  }

public void onTabUnselected(Tab tab, FragmentTransaction ft) {
  if (mFragment != null) {
    ft.detach(mFragment);
  }
}

// The tabs are now assigned to MyTabListener
tabSpeed.setTabListener(new MyTabListener<FSpeed>(this, "speed", FSpeed.class)); 
```

这是问题开始的地方。在使用新的 TabListener 从列表视图中单击一个项目后，onTabSelected 和 onTabUnSelected 会被无休止地轮流调用。

## 问题：

我的问题是如何在单击列表视图的项目后从带有列表视图的片段转到另一个片段（并且仍然使用相同的活动）。我自己写的方法 changeFragment() 是错误的方法吗？我仍然想使用 MyTabListener。

*注意 1：我买了 Commonsware 的书来了解更多关于片段的信息，但我找不到更复杂的示例，不同的片段一起工作，也找不到后退按钮是如何处理或覆盖的。例如，如果片段 1、2 或 3 可见，则单击后退按钮后始终显示片段 4。如果有人在书中找到一个，请告诉我章节（名称）/页码吗？如果没有的话，在下一次更新中提供一个普通人将是非常友好的。*

*注 2：项目中使用了全局变量，如 fSpeed、tabSpeed、...*

*注意 3：如果您需要更多代码或解释，请在评论中告诉我。感谢您的帮助！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:31:28.720

> 我自己写的方法 changeFragment() 是错误的方法吗？

您正在添加一个片段，而不是替换一个。要替换片段，请使用`replace()`，而不是`add()`。

# asp.net - 缓慢的开发环境（DNN/ASP.NET）？

> ID：13163616
> 
> 赞同：0
> 
> 时间：2012-10-31T17:33:04.717
> 
> 标签：asp.net, dotnetnuke

我有一个运行 dotNetNuke 的网站，并进行了很多自定义。在生产中，该站点运行良好，速度相对最佳，等等。在开发中，它非常缓慢（每个动作慢 10-30 秒）。谁能推荐有关如何诊断此问题的任何工具/想法？环境非常相似（开发数据库不如生产数据库强大，但不足以保证这种延迟）。我正在寻找可以帮助确定请求的所有联系点等的东西。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:39:47.997

**尝试以下工具：**

**[YSlow](http://yslow.org/)** : YSlow 根据 Yahoo! 的高性能网站规则分析网页以及网页速度慢的原因

**[PageSpeed](https://developers.google.com/speed/pagespeed/)**：PageSpeed 系列工具旨在帮助您优化网站的性能。PageSpeed Insights 产品将帮助您确定可应用于您的网站的性能最佳实践，而 PageSpeed 优化工具可以帮助您自动化该过程。

**[Firebug 和网络监控](http://getfirebug.com/network)**：查看站点网络活动的详细测量值。

**[提琴手](http://www.fiddler2.com/fiddler2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:13:01.493

YSlow、PageSpeed 和 Firebug 是您绝对应该使用的出色工具，但您只在开发环境中看到问题的事实似乎暗示问题不是站点，而是开发环境的问题。通常，我发现这些情况下的大多数缓慢都与磁盘和/或 RAM 问题有关。使用任务管理器验证机器是否有足够的 RAM 用于当前负载。确保有足够的可用磁盘空间来进行适当的缓存。您可能需要更快的硬盘驱动器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:28:01.007

在发布模式下运行站点 lokal，看看它是否改变了一些东西。

如果您可以在调试模式下运行实时站点，看看它是否会像在 lokal 环境中一样减慢。

# ruby-on-rails - LinkedIn API：如何获取用户的公共网址

> ID：13163629
> 
> 赞同：3
> 
> 时间：2012-10-31T17:33:42.923
> 
> 标签：ruby-on-rails, api, plugins, linkedin

我目前正在开发一个需要用户通过 LinkedIn 登录的 Rails Web 应用程序。之后，我想将`Member Profile`插件嵌入他/她的个人资料页面。

为此，我需要拥有公共 URL，没有它，插件将无法工作。我已经拥有`r_fullprofile`LinkedIn 登录的完整个人资料权限。但我仍然无法找到提取公共 url 的 API。

有没有办法得到那个网址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T00:03:26.727

您可以指定`public-profile-url`为默认字段：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :linkedin, "consumer_key", "consumer_secret", :scope => 'r_fullprofile r_emailaddress r_network', :fields => ["id", "email-address", "first-name", "last-name", "headline", "industry", "picture-url", "public-profile-url", "location", "connections"]
end 
```

然后使用[pengwynn LinkedIn](https://github.com/pengwynn/linkedin) gem，您可以像这样访问 URL：

```
client = LinkedIn::Client.new
client.authorize_from_access("access_token", "access_token_secret")
client.profile(:fields => ["public-profile-url"]) 
```

# c++ - 如果我不自己分配数组元素的值是多少

> ID：13163632
> 
> 赞同：2
> 
> 时间：2012-10-31T17:33:55.527
> 
> 标签：c++, arrays

如果我写这个会是什么结果

```
int array1[2];
cout << array1[0] ; 
```

我该怎么做这个伪代码：

```
if array1[0] doesn't have a value then assign its value to 1 
```

我在 DevCPP 上使用 C++

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T17:35:55.687

的元素`array`未*初始化*，在写入之前读取它们是*未定义的行为。*你的程序格式不正确。没有办法对此进行“检查”；编写正确的程序是*您的责任。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:35:31.070

未分配的数组值的初始值是未定义的（除非数组元素类型是类/结构，在这种情况下，将为每个数组元素调用默认构造函数）。在您的第一个示例中，行为未定义，因为您在使用数组元素之前尚未对其进行初始化。

如果要保留“未分配”状态，则需要使用封装此状态的类，例如对值类型使用可为空模式。

考虑使用[Boost.Optional](http://www.boost.org/doc/libs/1_51_0/libs/optional/doc/html/index.html)：您将数组声明为`boost::optional<int> array1[2];`，然后您可以测试`if (array1[0])`该特定元素是否具有值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T18:04:54.807

到目前为止，我看到的答案似乎错过了一点。这取决于您的数组的定义位置。

如果数组是函数的本地数组，例如：

```
int f() { 
    int array1[2];
    cout << array1[0] ;
} 
```

...那么其他答案是正确的： 的内容`array1`包含未指定的值，并且您尝试读取该值并将其发送`cout`给未定义的行为。

另一方面，您可能已定义`array1`为全局变量：

```
int array1[2];

int f() { 
    cout << array1[0];
} 
```

在这种情况下，`array1`对于任何算术类型，都需要将 的内容初始化为 0（对于指针数组，则需要初始化为 NULL）。在这种情况下，将值写出`array1[0]`非常好，并给出定义的结果——它必须为 0。在这种情况下，没有任何方法可以判断包含该值的数组元素是否`0`具有该值，因为它被自动初始化为 0，或者后来被分配了那个值。

如果您真的需要知道一个值是否已写入变量，则可以编写一个可以执行此操作的类：

```
template <class T>
class value { 
     T val;
     bool assigned;
public:
     value(T const init=T()) : assigned(false), val(init) {}

     value &operator=(T const &t) { 
         assigned = true;
         val = t;
     }
     operator T() { return val; }

     bool was_assigned() { return assigned; }
};

// ...

value<int> array2[2];

if (!array2[0].was_assigned())
    array2[0] = 1; 
```

将类型定义为始终初始化为已知值*通常*更容易和更有效，因此您永远不会真正关心它是否被分配。简而言之，尽管这支持您的要求，但我的直接反应是，可能有更好/更清洁的方式来实现您的最终目标。在你甚至考虑使用这样的东西之前，我*强烈*建议你退出你正在做的事情，并尝试找出是否有更好的方法来做到这一点。我的猜测是有/将会有（如果你找不到它，你可能想问另一个问题，告诉我们你为什么要这样做，看看是否有人可以看到更直接的方法完成你的目标）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T17:35:13.097

据我记得这取决于操作系统

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T17:42:44.260

正如其他用户所说，您需要初始化`a`然后使用 for 循环来逐个测试每个值并修改它们，如果它们满足条件，我给您留下一个 C 代码段：

```
/* Variable declaration and initialization to 0s (You can use another value as default )*/
int a[ 5 ] = { 0 };

/* If the array[ i ] has 0 as value */
for( i = 0; i < 5; i++){
   if ( a[ i ] == 0  ){ 
      a[ i ] = 1;
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-23T16:14:32.587

如果您不自己初始化元素，则元素将从现在存储的内存位置获取值（并且很可能会将其转换为其数据类型）。考虑这个程序：

```
#include <iostream>
using namespace std;

int foo(int A[])
{
    cout << A[0] << A[1];
}

int main()
{
    int array[2];
    foo(array);
} 
```

这将给出输出 00。

但现在考虑这段代码：

```
int main()
{
    int array[2];
    cout << array[0] << array[1];
} 
```

它将给出一些随机整数输出。之所以如此，是因为未初始化的数组获取了存储在它现在占用的内存位置上的值。`&array[0]`对于一些发人深省的问题，您可以检查它的内存地址并以不同的数据类型打印它。

如：`cout << &array[0] << char(array[0]) << bool(array[0])`等。

# powershell - 为什么 "for($i=1; $i -le 1000000; $i++){}" 的执行时间比 "for([int]$i=1; $i -le 1000000; $i++){}" 快电源外壳

> ID：13163635
> 
> 赞同：7
> 
> 时间：2012-10-31T17:34:07.433
> 
> 标签：powershell

示例代码：

```
# Step 1
$start = get-date
for($i=1; $i -le 1000000; $i++){}
$end = get-date
($end-$start).TotalMilliseconds
Remove-Variable i

# Step 2
$start = get-date
for([int]$i=1; $i -le 1000000; $i++){}
$end = get-date
($end-$start).TotalMilliseconds
Remove-Variable i

# Step 3
$start = get-date
for([int64]$i=1; $i -le 1000000; $i++){}
$end = get-date
($end-$start).TotalMilliseconds
Remove-Variable i

# Step 4
$start = get-date
for([float]$i=1; $i -le 1000000; $i++){}
$end = get-date
($end-$start).TotalMilliseconds
Remove-Variable i

# Step 5
$start = get-date
for([double]$i=1; $i -le 1000000; $i++){}
$end = get-date
($end-$start).TotalMilliseconds
Remove-Variable i

# Step 6
$start = get-date
for($i=1; $i -le 1000000; $i++){}
$end = get-date
($end-$start).TotalMilliseconds
Remove-Variable i 
```

结果：

1845.1056
3160.1808
5029.2877
5521.3158
4504.2576
1804.1032

毫无疑问，步骤 2-6 之间的差异。但是 1 和 2 和 6 之间的差异是莫名其妙的：在这些情况下，$i 的类型为“System.Int32”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T20:20:32.310

如果您想很好地解释第 1 步和第 2 步之间的区别，只需在命令提示符下尝试：

```
Remove-Variable i
Trace-Command -Name TypeConversion -Expression {for($i=1; $i -le 1000000; $i++){}} -PSHost 
```

进而 ：

```
Remove-Variable i
Trace-Command -Name TypeConversion -Expression {for([int]$i=1; $i -le 1000000; $i++){}} -PSHost 
```

这证实了@zdan 假设差异在于每个循环中完成的演员表。步骤 1 和 6 相同。

# c - 确定数组的步幅

> ID：13163643
> 
> 赞同：0
> 
> 时间：2012-10-31T17:34:55.043
> 
> 标签：c, compiler-construction, llvm, clang

我正在尝试对 LLVM 中的数组执行 LoopDependenceAnalysis。为此，我编写了 LLVM LoopPass。我能够使用 GetElementPtr 检测数组。我无法确定循环中使用的数组的步幅。

例如，我有 ac 代码

```
int b[10];
for(int i = 0; i < 10; i++)
{
    b[i] = b[i+2];
} 
```

现在在两个数组访问中，第一个数组访问 (b[i] ) 的步幅为 0，而第二个的步幅为 2。如何确定这些值？

# javascript - 谷歌关闭引入错误

> ID：13163646
> 
> 赞同：4
> 
> 时间：2012-10-31T17:35:02.463
> 
> 标签：javascript, google-closure-compiler, google-closure

**编辑**

在@Alex 的帮助下学到的教训是，你永远不应该将函数声明放在块范围内。不是我打算这样做，但如果你滑倒了，它可能会导致大问题。

* * *

我有一个似乎通过 Google Closure 错误地压缩的脚本文件。当我使用原始代码运行我的应用程序时，一切正常。但是当我尝试使用 Google Closure 压缩它时，会引入一些错误。

**我没有使用高级选项；我正在使用基本的默认模式**

显然我不能指望任何人调试压缩文件，但我希望有人可以查看未压缩的代码并让我知道我是否以某种方式做了一些疯狂愚蠢的事情会欺骗 Closure。

关于缩小代码的一些注释：

闭包是**内联** `BEFramework.prototype.hstreamLoad`的and `BEFramework.prototype.hstreamEvalJson`，并且似乎完全删除了辅助函数`getDeleteValue`,`getValueToDisplay`和`getDisplayForLabel`可能的其他函数。

未压缩文件如下。

此代码可以[通过此处的关闭手动编译](http://closure-compiler.appspot.com/home)，应该会重现上述症状。

```
(function() {
    var $ = jQuery;

    // Load and display the messages ("healthstream") for a given module.
    // This requires that the module's HTML have specific features, see
    // dashboard.htm and contactsManager/details/default.htm for examples.
    // This also requires that the `request` support `pageIndex` and `pageSize`,
    // so we can handle paging.
    //
    // Args:    `options`       An options object with these keys:
    //                              `channelId`     The channel ID of the module (for transmitRequest)
    //                              `translationId` Optional alternate ID for translation (if not given,
    //                                              `channelId` is used).
    //                              `action`        The action (for transmitRequest)
    //                                                  - Must support `pageIndex` and `pageSize`
    //                              `request`       The request (for transmitRequest)
    //                                                  - Must include `pageIndex` and `pageSize`
    //                              `complete`      Optional callback triggered when the load is complete.
    //                              `showOptions`   Optional callback if an options menu is supported
    //                                              by the calling module. Receives a raw event instance
    //                                              and the item on which the options were triggered:
    //                                                  function showOptions(event, item)
    //                              `context`       Optional context (`this` value) for the call to
    //                                              `complete` and/or `showOptions`
    BEFramework.prototype.hstreamLoad = hstreamLoad;
    function hstreamLoad(options) {
        var inst = this;

        var channelId, translationId, action, request, complete, showOptions, context,
            pageIndex, pageCount, pageSize, pageCount,
            btnPrevious, btnNext,
            dataShownFlags;

        // Get our arguments (with defaults)
        channelId = options.channelId;
        translationId = options.translationId || options.channelId;
        action = options.action;
        request = $.extend({}, options.request);    // Create a *copy*, because we modify it when doing paging
        complete = options.complete;
        if (typeof complete !== "function") {
            complete = undefined;
        }
        showOptions = options.showOptions;
        if (typeof showOptions !== "function") {
            showOptions = undefined;
        }
        context = options.context;  // (undefined will automatically become the global object)

        // Grab the initial pageIndex and pageSize
        pageIndex = request.pageIndex || 1;
        pageSize = request.pageSize || 100;

        // Disable the button and show "searching" label
        $('#healthStreamSearchButton')
            .button("disable")
            .button("option", "label", BETranslate(translationId, 'HealthStreamSearching'));

        // Hook up the buttons; be a bit paranoid that they've been hooked before and clear previous handlers
        btnPrevious = $('#healthStreamPagePrevious');
        btnNext = $('#healthStreamPageNext');
        btnPrevious.hide().unbind("click.paging").bind("click.paging", goToPreviousPage);
        btnNext.hide().unbind("click.paging").bind("click.paging", goToNextPage);

        // Do it
        doLoad();

        // === Support functions

        // Trigger a load request
        function doLoad() {
            request.pageIndex = pageIndex;
            request.pageSize = pageSize;
            inst._transport.transmitRequest(channelId, action, request, hstreamLoaded);
        }

        // Hndle the load response
        function hstreamLoaded(objResponse) {
            var healthStream = objResponse.items;
            var total = objResponse.total;
            var tbody = $('#healthStreamList');

            // Need to make this update optional
            $('#pageHeaderName').html(BETranslate(translationId, 'HeaderActivity') + ' (' + String(total) + ')');
            $('#healthStreamSearchButton')
                .button("enable")
                .button("option", "label", BETranslate(translationId, 'HealthStreamSearch'));
            tbody.empty();
            btnPrevious.hide();
            btnNext.hide();

            if (healthStream.length > 0) {
                pageCount = Math.ceil(total / pageSize);

                if (pageCount > 1) {
                    if (pageIndex > 1) {
                        btnPrevious.show();
                    }
                    if (pageIndex < pageCount) {
                        btnNext.show();
                    }
                }

                var item;
                var tr;
                var tdMain;
                var daysHash = {};
                var creationDate;
                var key;
                var today = new Date();
                var yesterday = new Date();
                var msg;
                yesterday.setDate(yesterday.getDate() - 1);

                dataShownFlags = {};

                for (var x = 0; x < healthStream.length; x++) {
                    item = healthStream[x];
                    msg = inst.hstreamEvalJson(item);

                    if (msg.length > 0) {
                        creationDate = new Date(item.CreationDate);
                        key = [creationDate.getYear(), creationDate.getMonth(), creationDate.getDate()].join('-');

                        if (!daysHash[key]) {
                            if (isDateEqual(creationDate, today)) {
                                addRowHeader(tbody, BETranslate(inst._channelId, 'HSToday'));
                            }
                            else if (isDateEqual(creationDate, yesterday)) {
                                addRowHeader(tbody, BETranslate(inst._channelId, 'HSYesterday'));
                            }
                            else {
                                addRowHeader(tbody, creationDate.toString('MM/dd/yyyy'));
                            }
                            daysHash[key] = true;
                        }

                        tr = $(
                            "<tr>" +
                                "<td class='date' style='white-space:nowrap;'>" + new Date(item.CreationDate).toString('h:mm tt') + "</td>" +
                                "<td class='main'><span class='name'>" + msg + "</span>" +
                                "</tr>"
                        );
                        tbody.append(tr);
                        if (showOptions) {
                            tr.find("td.main").prepend($("<em rel='opt'>&nbsp;</em>").click(makeShowOptionsHandler(item)));
                        }
                    }
                }

                // If any of the templates created links with a `data` attribute, hook them up
                $('#healthStreamList a[data]').click(showTitle).each(function (index) {
                    this.id = 'data' + index;
                });

            }
            else {
                tbody.html('<tr><td colspan="2">' + BETranslate(inst._channelId, 'HSNoActivity') + '</td></tr>');
            }

            // Trigger completion callback
            if (complete) {
                complete.call(context, objResponse);
            }
        }

        function makeShowOptionsHandler(item) {
            // Our event comes to us from jQuery, but we pass on the raw
            // event to the callback
            return function (event) {
                showOptions.call(context, event.originalEvent || event, item);
            };
        }

        function addRowHeader(listRef, name) {
            listRef.append(
                "<tr>" +
                    "<td colspan='2' class='divider'>" + name + "</td>" +
                    "</tr>"
            );
        }

        function showTitle(event) {

            $.stopEvent(event);

            var link = this;
            var $link = $(this);
            var href = $link.attr("href");  // We want the attribute, not the property (the property is usually expanded)
            var hrefTitle = $link.attr('hreftitle') || BETranslate(inst._channelId, 'HSMoreInfo');
            var data = $link.attr('data') || "";
            var linkId = link.id;

            if (!dataShownFlags[linkId]) {
                dataShownFlags[linkId] = true;
                if (data) {
                    var div = $(
                        "<div class='data'>" +
                            "<span data-linkId='" + linkId + "' class='close'>x</span>" +
                            "<table><thead></thead></table>" +
                            "</div>"
                    );
                    $link.parent().append(div);

                    var thead = div.find("thead");
                    var arr = data.split('~');
                    var splitEntry;

                    for (var x = 0; x < arr.length; x++) {
                        splitEntry = arr[x].split('|');
                        if (splitEntry[0] === 'Changed length') {
                            splitEntry[1] = splitEntry[1].replace(/\d+/g, BEFramework.prettyTime);
                        }
                        if (splitEntry.length > 1 && splitEntry[1].length > 0) {
                            thead.append(
                                "<tr>" +
                                    "<td class='hslabel'>" + splitEntry[0] + ":</td>" +
                                    "<td>" + splitEntry[1] + "</td>" +
                                    "</tr>"
                            );
                        }
                    }

                    div.find("span:first").click(hideTitle);

                    if (href && href !== "#") {
                        $("<a target='_blank'>" + hrefTitle + "</a>").attr("href", href).appendTo(div);
                    }
                }
            }
        }

        function hideTitle(event) {
            var $this = $(this),
                linkId = $this.attr("data-linkId");
            delete dataShownFlags[linkId];
            $this.parent().remove();
            return false;
        }

        function goToPreviousPage(event) {
            --pageIndex;
            doLoad();
            return false;
        }
        function goToNextPage(event) {
            ++pageIndex;
            doLoad();
            return false;
        }
    }

    var ___x = false;
    var __i = 0;

    BEFramework.prototype.hstreamEvalJson = hstreamEvalJson;
    function hstreamEvalJson(item) {
        var inst = this;

        if (item.Action === 'saveinsurance' && !___x && __i != 0){
            var start = +new Date();
            __i = 1;
        }

        var userId = inst._BEUser ? inst._BEUser.getId() : -1;
        var json = eval('(' + item.JSON + ')');
        var key = 'HS' + item.Module + '_' + item.Action;
        var msg = BETranslate(inst._channelId, key);
        var fromIsMe = item.CreatedByContactId == userId;
        var toIsMe = item.ContactId == userId;
        var fromString = (fromIsMe) ? '<strong>' + BETranslate(inst._channelId, 'HSYou') + '</strong>' : '<a class="vcard" contactId="' + item.CreatedByContactId + '">' + item.CreatedByName + '</a>';
        var toString = (toIsMe) ? '<strong>' + BETranslate(inst._channelId, 'HSYour') + '</strong>' : '<a class="vcard" contactId="' + item.ContactId + '">' + item.ContactName + '</a>';
        var fromString2 = (fromIsMe) ? '<strong>' + BETranslate(inst._channelId, 'HSYour').toLowerCase() + '</strong>' : '<a class="vcard" contactId="' + item.CreatedByContactId + '">' + item.CreatedByName + '</a>';
        var toString2 = (toIsMe) ? '<strong>' + BETranslate(inst._channelId, 'HSYou').toLowerCase() + '</strong>' : '<a class="vcard" contactId="' + item.ContactId + '">' + item.ContactName + '</a>';
        var subFormat, subProps;
        var configObject = (BEFramework.healthStreamConfig[item.Module] && BEFramework.healthStreamConfig[item.Module][item.Action]) || {};
        var standardCase = configObject.standardCase;
        var suppress = configObject.suppress || [];
        var propertiesInOrder = configObject.displayOrder || [];

        if (msg.indexOf('not found in module') != -1) {
            try {
                switch (item.Module) {
                    case 'contacts':
                        if (item.Action == 'setpermission' || item.Action == 'deleterelationship' || item.Action == 'addinvite') {
                            msg = BETranslate(inst._channelId, key + json.type.toString());
                        }
                        break;
                    case 'tasks':
                        if (item.Action == 'savetask') {
                            msg = BETranslate(inst._channelId, key + json.type.toString());
                        }
                        break;
                    default:
                        msg = '';
                }
            } catch (ex) {
                msg = '';
            }
        }

        for (var prop in json) {
            if (typeof (json[prop]) == 'object') {

                if (prop === 'changes' || prop === 'deleted'){
                    subProps = json[prop];

                    for (var propName in subProps) {
                        if (indexInArrayCI(propName, propertiesInOrder) === -1 && indexInArrayCI(propName, suppress) === -1){
                            propertiesInOrder.push(propName);
                        }
                    }
                }

                if (prop == 'changes') {
                    var changes = '';
                    var changeFrom = BETranslate(inst._channelId, 'HSChangedFrom');
                    var changeTo = BETranslate(inst._channelId, 'HSChangedTo');

                    for (var i = 0; i < propertiesInOrder.length; i++) {
                        var subprop = propertiesInOrder[i];
                        if (getObjectValCI(subProps, subprop) == null) continue;

                        var subSplit = stripHtml(getObjectValCI(subProps, subprop)).split('|');

                        if (subSplit.length === 1) {
                            subFormat = BETranslate(inst._channelId, 'HS' + item.Module + '_changes_' + subprop);
                            if (subFormat.indexOf('not found in module') < 0) {
                                changes += $.sandr(subFormat, '#{value}', subSplit[0]);
                            }
                            else {
                                changes += "*|" + subprop + " " + subSplit[0] + "~";
                            }
                        }
                        else {
                            var fromValue = stripHtml(subSplit[0]);
                            var toValue = stripHtml(subSplit[1]);

                            var packetInfo = processChangedValues(subprop, fromValue, toValue);
                            if (packetInfo.skip) continue;

                            changes = changes + changeFrom + packetInfo.display + '|' + packetInfo.fromValue + '<b>' + changeTo + '</b>' + packetInfo.toValue + '~';
                        }
                    }

                    msg = $.sandr(msg, '#{' + prop + '}', changes);
                } else if (prop == 'deleted') {
                    var deleted = '';

                    for (var i = 0; i < propertiesInOrder.length; i++) {
                        var subprop = propertiesInOrder[i];
                        var currentValue = getObjectValCI(subProps, subprop);

                        if (currentValue == null || currentValue.toString().length === 0) continue;

                        deleted = deleted + getDisplayForLabel(subprop) + '|' + getDeleteValue(subprop, currentValue) + '~';
                    }

                    msg = $.sandr(msg, '#{' + prop + '}', deleted);
                }
            } else {
                msg = $.sandr(msg, '#{' + prop + '}', $.sandr(json[prop], '"', ' '));
            }

            function processChangedValues(label, fromValue, toValue){
                var typeFormat = (getObjectValCI(configObject, label) || {}).type;
                var result = {};

                if (typeFormat === 'date'){
                    var d1 = new Date(fromValue);
                    var d2 = new Date(toValue);

                    if (isDateEqual(d1, d2)) result.skip = true;
                }

                result.fromValue = getValueToDisplay(fromValue, typeFormat);
                result.toValue = getValueToDisplay(toValue, typeFormat);

                result.display = getDisplayForLabel(label)

                return result;
            }

            function getDeleteValue(label, value){
                var typeFormat = (getObjectValCI(configObject, label) || {}).type;

                return getValueToDisplay(value, typeFormat);
            }

            function getValueToDisplay(rawValue, typeFormat){
                if (typeFormat === 'date'){
                    var d = new Date(rawValue);
                    return isNaN(d.getTime()) ? rawValue : d.toString('MM/dd/yyyy');
                } else if (typeof typeFormat === 'function') {
                    return typeFormat(rawValue)
                } else {
                    return rawValue;
                }
            }

            function getDisplayForLabel(label){
                var fixCaseOfProperty = standardCase === '*' || indexInArrayCI(label, standardCase) > -1;
                var rawConfigForLabel = getObjectValCI(configObject, label) || {};

                return (rawConfigForLabel && rawConfigForLabel.display)
                        || (fixCaseOfProperty ? fixCase(label) : null)
                        || label;
            }
        }

        msg = $.sandr(msg, '#{contactId}', item.ContactId);
        msg = $.sandr(msg, '#{from}', fromString);
        msg = $.sandr(msg, '#{to}', toString);
        msg = $.sandr(msg, '#{from2}', fromString2);
        msg = $.sandr(msg, '#{to2}', toString2);
        msg = $.sandr(msg, '#{recordId}', item.RecordId);

        msg = msg.replace(/#{[\S]*}/g, '');

        if (item.Action === 'saveinsurance' && !___x && __i == 1){
            var end = +new Date();
            ___x = true;
            //alert(end - start);
        }

        if (item.Action === 'saveinsurance') __i++;

        if (msg.indexOf('not found in module') == -1) {
            return msg;
        } else {
            return '';
        }
    }

    function stripHtml(html) {
        var tmp = document.createElement('DIV');
        tmp.innerHTML = html;
        return tmp.textContent || tmp.innerText;
    }

    function isDateEqual(date1, date2) {
        if (date1.getDate() === date2.getDate() &&
            date1.getMonth() === date2.getMonth() &&
            date1.getYear() === date2.getYear()) {
            return true;
        }
        else {
            return false;
        }
    }

    function getObjectValCI(obj, key){
        for (var k in obj){
            if (k.toLowerCase() === key.toLowerCase()){
                return obj[k];
            }
        }
    }

    function indexInArrayCI(item, arr){
        if (!$.isArray(arr)) arr = [];

        var target = item.toString().toLowerCase();

        for (var i = 0; i < arr.length; i++){
            if (target === arr[i].toLowerCase()) return i;
        }
        return -1;
    }

    function fixCase(str){
        return str.replace(/[a-z][A-Z]/g, function(match) { return match.charAt(0) + ' ' + match.charAt(1).toLowerCase(); }).toLowerCase()
            .replace(/\sid\s/g, ' ID ')
            .replace(/\sid$/g,  ' ID')
            .replace(/^id$/g,  'ID');
    }
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:48:05.547

当你使用闭包编译器时，你放弃了对代码的一些控制。它将执行各种技巧，并可能删除未使用的代码。

看起来好像您的函数没有被删除，而是被重命名了。

例如，您致电`getDeleteValue`...

```
getDeleteValue(subprop, currentValue) 
```

就是现在...

```
l(g,r) 
```

因为`getDeleteValue`没有导出，所以 Closure 重命名了它。

使用 Closure Compiler 需要一些技巧和大量的文档搜索，直到您熟悉它的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:58:56.557

好吧，有太多的错误要考虑。首先，我不明白你是想要静态引用还是实例化值。您没有使用 jsDoc 标签或类似的东西。Compiler 仅使用相应的 jsDoc 标签才能做到最好。你的逻辑很奇怪，而且表述不当。原型交替等都发生在 IIFE（立即调用的函数表达式）中。你的函数是静态的吗？他们是构造函数吗？我们是人还是舞者？

IIFE 在浏览器触发 DOMContentLoaded 事件之前执行。您最多可以做一个 jQuery IIFE 等效项`$(function() {})();`，它将它绑定到 DOMReady 或 DOMContentLoaded 回调。您在块内定义内联函数，这甚至不在 ECMA 语言中。

虽然大多数脚本引擎支持块内的函数声明，但它不是 ECMAScript 的一部分（参见[ECMA-262](http://www.ecma-international.org/publications/standards/Ecma-262.htm)，第 13 和 14 条）。更糟糕的实现彼此不一致，也与未来的 EcmaScript 提案不一致。ECMAScript 只允许在脚本或函数的根语句列表中使用函数声明。而是使用使用函数表达式初始化的变量来定义块内的函数。

```
var myFunctionName = function (params) {}; 
```

您还缺少大量分号。在解释你的 JS 时自动插入分号并不是完美无缺的，所以要养成它的习惯。

依赖隐式插入可能会导致微妙的、难以调试的问题。不要这样做。你比那更好。

有几个地方缺少分号特别危险：

```
// 1.
MyClass.prototype.myMethod = function() {
  return 42;
}  // No semicolon here.

(function() {
  // Some initialization code wrapped in a function to create a scope for locals.
})();

var x = {
  'i': 1,
  'j': 2
}  // No semicolon here.

// 2\.  Trying to do one thing on Internet Explorer and another on Firefox.
// I know you'd never write code like this, but throw me a bone.
[normalVersion, ffVersion][isFF]();

var THINGS_TO_EAT = [apples, oysters, sprayOnCheese]  // No semicolon here.

// 3\. conditional execution a la bash
-1 == resultOfOperation() || die(); 
```

那么会发生什么？

JavaScript 错误 - 首先调用返回 42 的函数，并将第二个函数作为参数，然后“调用”数字 42 导致错误。当它试图调用`x[ffVersion][isIE]()`. die 被调用 unless `resultOfOperation()`is`NaN`并被`THINGS_TO_EAT`分配`die()`. 为什么？

JavaScript 要求语句以分号结尾，除非它认为可以安全地推断出它们的存在。在这些示例中的每一个中，都在语句中使用了函数声明或对象或数组字面量。右括号不足以表示语句的结束。如果下一个标记是中缀或括号运算符，则 Javascript 永远不会结束语句。

这确实让人们感到惊讶，因此请确保您的作业以分号结尾。

# android - 不同实施方法的好处和局限性

> ID：13163647
> 
> 赞同：3
> 
> 时间：2012-10-31T17:35:07.207
> 
> 标签：android

我刚开始学习 Android 开发，我读到基本上有 3 种“构建视图”的主要方法是：

> *   基于 Java：使用 Java 定义字符串、布局窗口、创建 GUI 控件和分配事件处理程序。就像 Swing 编程一样。
> *   基于 XML：使用 XML 文件定义字符串、布局窗口、创建 GUI 控件和分配事件处理程序。Java 方法将从 XML 文件中读取布局并将其传递给 setContentView
> *   混合：使用 XML 文件定义字符串、布局窗口和创建 GUI 控件。使用 Java 分配事件处理程序

**这 3 种不同方法的优点和局限性是什么？**

**初学者或成熟的程序员应该使用哪一个？**

我不是在这里要求主观答案（在被标记之前:)）。一定有一些**事实**使这些方法彼此不同（速度、可维护性、可读性......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:13:30.027

**基于 XML 就像在网页中使用 CSS。**使用 XML 将关注点巧妙地分离到 MVC（模型-视图-控制器）模式中。如果一切都在 XML 中指定，那么您的 Activity 可以为不同的屏幕使用不同的布局文件，并且只需更改为新的 XML 文件即可轻松更新这些元素的呈现。这是一种很好的软件开发实践，在重新设计或重用组件时有很大帮助。在某些情况下，您可能仍需要在 Java 中动态设置某些内容，但您应该尝试将所有与表示相关的内容放入 XML 文件中。

在我看来，事件处理程序仍应在 Java 中设置和定义。这与演示无关，因此不属于 XML 文件。我不使用 onclick XML 属性。此外，如果您在 onclick 属性中设置它，如果您在 Java 中重构方法名称但忘记更新 XML 文件，则可能会中断连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:42:59.407

尽可能使用 XML 的好处是所有的 Android 工具都提供了对这种编程风格的支持（UI 编辑器等）。如果你用代码做所有事情，你就靠自己了。（想查看更改基于代码的布局的效果吗？构建您的应用程序并在模拟器中运行它。使用基于 XML 的布局，您可以在进行更改的 XML 编辑器中预览它。）

关于事件处理程序，在 XML 中声明它们（例如，使用`android:onClick`属性）的主要优点是您不必声明事件处理程序类。这里的优势虽然不是特别强，但我经常使用您所描述的混合方法。

我建议刚入门的 Android 程序员（无论是否有其他编程经验）在 Android 推动的 XML 样式方面打下坚实的基础。

# php - 教义不一致且无声地无法加载模型

> ID：13163649
> 
> 赞同：0
> 
> 时间：2012-10-31T17:35:09.563
> 
> 标签：php, codeigniter, doctrine-orm

好的，我按照[Joel Verhagen](http://www.joelverhagen.com/blog/2011/05/setting-up-codeigniter-2-with-doctrine-2-the-right-way/)的思路在 Codeigniter 中使用 Doctrine2 ，一切正常，但现在我遇到了一个神秘的问题。

销毁物品时，一切正常：

```
$delete = $this->doctrine->em->getRepository('Entities\Item')->findOneBy(array('slug' => $item));
$this->doctrine->em->remove($delete);
$this->doctrine->em->flush(); 
```

但是在 getRepository() 之后，更新项目会默默地失败：

```
$item = $this->doctrine->em->getRepository('Entities\Item')->findOneBy(array('id' => $id));
$item->setDescription(html_entity_decode($_POST['content']));
$this->doctrine->em->persist($item);
$this->doctrine->em->flush(); 
```

相同的控制器，这就是每个动作中的所有代码。我所有的其他控制器都很好，但这失败了，没有任何日志。拆分 getRepository 和 find 调用在 getRepository 之后立即终止。将 getRepository 移动到 __construct 会导致 update() 因查找而死。

想法？线索？似乎 SO 上的其他任何人最终要么走向不同的方向，要么从未解决过问题。

谢谢！

* * *

编辑：添加模型

yaml

物品

```
Entities\Item:
    type: entity
    table: items
    id:
        id:
            type: integer
            primary: true
            notnull: true
            generator:
                strategy: AUTO
    fields:
        title:
            type: string(255)
            notnull: true
        slug:
            type: string(255)
            notnull: true
        description:
            type: string(255)
    manyToOne:
        type:
            targetEntity: Type
            inversedBy: item
            joinColumn:
                name: type_id
                referencedColumnName: id
    options:
        charset: utf8
        type: InnoDB 
```

类型

```
Entities\Type:
    type: entity
    table: types
    id:
        id:
            type: integer
            primary: true
            notnull: true
            generator:
                strategy: AUTO
    fields:
        title:
            type: string(255)
            notnull: true
        slug:
            type: string(255)
            notnull: true
        description:
            type: string(255)
    oneToMany:
        items:
            targetEntity: Item
            orphanRemoval: true
            mappedBy: type
    manyToMany:
        fields:
            targetEntity: Field
            inversedBy: types
            joinTable:
                name: fields_types
                joinColumns:
                    type_id:
                        referencedColumnName: id
                inverseJoinColumns:
                    field_id:
                        referencedColumnName: id
    options:
        charset: utf8
        type: InnoDB 
```

* * *

PHP

物品

```
<?php

namespace Entities;

use Doctrine\ORM\Mapping as ORM;

/**
 * Entities\Item
 */
class Item
{
    /**
     * @var integer $id
     */
    private $id;

    /**
     * @var string $title
     */
    private $title;

    /**
     * @var string $description
     */
    private $description;

    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     */
    private $fields;

    /**
     * Constructor
     */
    public function __construct()
    {
        $this->fields = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set title
     *
     * @param string $title
     * @return Item
     */
    public function setTitle($title)
    {
        $this->title = $title;

        return $this;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Set description
     *
     * @param string $description
     * @return Item
     */
    public function setDescription($description)
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get description
     *
     * @return string 
     */
    public function getDescription()
    {
        return $this->description;
    }

    /**
     * Add fields
     *
     * @param Entities\Field $fields
     * @return Item
     */
    public function addField(\Entities\Field $fields)
    {
        $this->fields[] = $fields;

        return $this;
    }

    /**
     * Remove fields
     *
     * @param Entities\Field $fields
     */
    public function removeField(\Entities\Field $fields)
    {
        $this->fields->removeElement($fields);
    }

    /**
     * Get fields
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getFields()
    {
        return $this->fields;
    }
    /**
     * @var Entities\Type
     */
    private $types;

    /**
     * Set types
     *
     * @param Entities\Type $types
     * @return Item
     */
    public function setTypes(\Entities\Type $types = null)
    {
        $this->types = $types;

        return $this;
    }

    /**
     * Get types
     *
     * @return Entities\Type 
     */
    public function getTypes()
    {
        return $this->types;
    }
    /**
     * @var Entities\Type
     */
    private $type;

    /**
     * Set type
     *
     * @param Entities\Type $type
     * @return Item
     */
    public function setType(\Entities\Type $type = null)
    {
        $this->type = $type;

        return $this;
    }

    /**
     * Get type
     *
     * @return Entities\Type 
     */
    public function getType()
    {
        return $this->type;
    }
    /**
     * @var string $slug
     */
    private $slug;

    /**
     * Set slug
     *
     * @param string $slug
     * @return Item
     */
    public function setSlug($slug)
    {
        $this->slug = $slug;

        return $this;
    }

    /**
     * Get slug
     *
     * @return string 
     */
    public function getSlug()
    {
        return $this->slug;
    }
} 
```

类型

```
<?php

namespace Entities;

use Doctrine\ORM\Mapping as ORM;

/**
 * Entities\Type
 */
class Type
{
    /**
     * @var integer $id
     */
    private $id;

    /**
     * @var string $title
     */
    private $title;

    /**
     * @var string $description
     */
    private $description;

    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     */
    private $items;

    /**
     * Constructor
     */
    public function __construct()
    {
        $this->items = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set title
     *
     * @param string $title
     * @return Type
     */
    public function setTitle($title)
    {
        $this->title = $title;

        return $this;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Set description
     *
     * @param string $description
     * @return Type
     */
    public function setDescription($description)
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get description
     *
     * @return string 
     */
    public function getDescription()
    {
        return $this->description;
    }

    /**
     * Add items
     *
     * @param Entities\Item $items
     * @return Type
     */
    public function addItem(\Entities\Item $items)
    {
        $this->items[] = $items;

        return $this;
    }

    /**
     * Remove items
     *
     * @param Entities\Item $items
     */
    public function removeItem(\Entities\Item $items)
    {
        $this->items->removeElement($items);
    }

    /**
     * Get items
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getItems()
    {
        return $this->items;
    }
    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     */
    private $fields;

    /**
     * Add fields
     *
     * @param Entities\Field $fields
     * @return Type
     */
    public function addField(\Entities\Field $fields)
    {
        $this->fields[] = $fields;

        return $this;
    }

    /**
     * Remove fields
     *
     * @param Entities\Field $fields
     */
    public function removeField(\Entities\Field $fields)
    {
        $this->fields->removeElement($fields);
    }

    /**
     * Get fields
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getFields()
    {
        return $this->fields;
    }
    /**
     * @var string $slug
     */
    private $slug;

    /**
     * Set slug
     *
     * @param string $slug
     * @return Type
     */
    public function setSlug($slug)
    {
        $this->slug = $slug;

        return $this;
    }

    /**
     * Get slug
     *
     * @return string 
     */
    public function getSlug()
    {
        return $this->slug;
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T20:47:23.770

我修好了它。不幸的是我不知道为什么。如果有人可以向我解释为什么这会修复它（或者一开始就坏了），我会接受你的回答。

加载项目存储库时，它会静默失败。加载类型存储库，并首先对其进行 findAll 修复。这可能都是因为 Items 是 Type 的子项，但是为了能够加载特定的 Item 事先必须执行 findAll() 似乎很奇怪。

例如，在 __construct() 中执行此操作：

```
$this->typeR = $this->doctrine->em->getRepository('Entities\Type');
$data['types'] = $this->typeR->findAll();
$this->itemR = $this->doctrine->em->getRepository('Entities\Item'); 
```

允许我在需要时为该控制器加载项目。

同样，这只是在服务器上。在本地，一切正常。

# java - 如何为字符串构建正则表达式？

> ID：13163654
> 
> 赞同：0
> 
> 时间：2012-10-31T17:35:17.150
> 
> 标签：java, android, regex

我怎样才能把它写成正则表达式？

“blocka#123#456”

我用#符号来分割数据中的参数，参数是块名，startX坐标，start Y坐标

这是嵌入在我的二维码中的数据。所以当我扫描二维码时，我想检查他们正在扫描的二维码是否正确。为此，我需要上述语法的正则表达式。

我的方法体

```
public void Store_QR(String qr){
   if( qr.matches(regular Expression here)) {
      CurrentLocation = qr;
   }
   else // Break the operation
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:37:48.840

您指定的信息根本不使用正则表达式。

尝试以更一般的方式从中获取。

如果您确实需要扫描“blocka#123#456”，请使用`qr.contains("blocka#123#456");`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:37:44.793

这取决于你想匹配什么。

1.  以下是一些正则表达式命题：

    ```
    ^blocka#[0-9]{3}#[0-9]{3}$
    ^blocka#[0-9]+#[0-9]+$
    ^blocka(#[0-9]{3}){2}$
    ^blocka(#[0-9]+){2}$
    ^blocka(#[0-9]{3})+$
    ^blocka(#[0-9]+)+$ 
    ```

2.  否则，只需使用`contains()`或类似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T20:09:41.750

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T17:44:58.350

我建议：

```
[a-z]+#\d+#\d+ 
```

如果你想捕捉这 3 个部分：

```
([a-z]+)#(\d+)#(\d+) 
```

`Matcher.group( 1, 2 or 3 )`退回零件

# c++ - 没有它，程序不会放弃最低分数并计算平均值

> ID：13163661
> 
> 赞同：1
> 
> 时间：2012-10-31T17:36:02.457
> 
> 标签：c++

代码运行良好，只是它不会降低最低分数然后计算它。

输出示例：

您想输入多少个考试成绩？
3
输入所需的测试分数：
分数 1：58
分数 2：96
分数 3：78
测试分数 平均得分最低为：116.00

问题：正如您在输出示例中看到的那样，这是不正确的。它必须显示平均值，不包括最低值。您能否查看我的代码并让我知道我哪里出错了？我也有几个人看过它，但他们无法在我的代码中看到任何错误。下面是我的代码：

代码：

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
    //To dynamically allocate an array, Accumulator, to hold the average scores.
    double *score;      
    double total = 0;  
    double average; 

    //int for counter, to hold the number of test scores.
    int count; 
    int numTest; 

    // To obtain the number of test scores the user would like to enter.
    cout << "How many test scores would you like to enter? " << endl;
    cin >> numTest; 

    //Dynamically allocates an array large enough to hold the amount of test scores to enter.
    score = new double[numTest];

    //Get the test scores.
    cout << "Enter the test score desired. " << endl;
    for (count = 0; count < numTest; count++)
    {
        cout << "Score " << (count + 1) << ": ";
        cin >> score[count];
    }

    //Find lowest score.
    int lowest = score[count];
    for (count = 1; count < numTest; count++)
    {
        if (score[count] < lowest) 
            lowest = score[0];
    }

    //Calculate the total test scores.
    for (count = 0; count < numTest; count++)
    {
        total += score[count];
        total -= lowest;
    }

    //Calculate the test scores average minus the lowest score. 
    average = total / (numTest - 1);

    //Display the results
    cout << fixed << showpoint << setprecision(2);
    cout << "Test Scores Average with the lowest dropped is: " << average << endl;

    //Free dynamically allocated memory
    delete [] score;
    score = 0; // Makes score point to null.

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T17:38:30.550

您在此代码中有三个重大错误：

首先， 的初始值`lowest`：

```
//Find lowest score.
int lowest = score[count];  // ERROR
for (count = 1; count < numTest; count++)
{
    if (score[count] < lowest) 
        lowest = score[0];
} 
```

错误在这里：

```
int lowest = score[count]; 
```

它需要是这样的：

```
int lowest = score[0]; 
```

接下来，**在循环内**：

```
lowest = score[0]; // ERROR 
```

应该：

```
lowest = score[count]; 
```

所以你的循环应该是这样的：

```
//Find lowest score.
int lowest = score[0];
for (count = 1; count < numTest; count++)
{
    if (score[count] < lowest) 
        lowest = score[count];
} 
```

最后，总数的计算也是错误的。计算所有分数的总和**后**减去最低分数，*然后*除以分数减一的数量：

```
//Calculate the total test scores.
for (count = 0; count < numTest; count++)
{
    total += score[count];
    total -= lowest; // ERROR: should not be here. should be AFTER the loop
} 
```

应该 ：

```
for (count = 0; count < numTest; count++)
    total += score[count];
total -= lowest; // note: NOT in the loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:39:39.183

当你这样做时：

```
//Find lowest score.
int lowest = score[count]; 
```

您的`count`变量等于，`numTest`因为您刚刚离开了前面的循环。

你应该写

```
//Find lowest score.
int lowest = score[0]; // Error here
for (count = 1; count < numTest; count++)
{
    if (score[count] < lowest) 
        lowest = score[count]; // Error here too
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:38:42.157

`lowest`代码从`total`每次循环中减去。将那条线移到循环之外，它会更好地工作。

编辑：并且，正如@WhozCraig 指出的那样，`lowest`没有得到正确的初始值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T17:39:31.100

在这一行：

```
int lowest = score[count]; 
```

你觉得`count`是什么？

# php - 从网站填写现有的动态和复杂的 PDF 表单

> ID：13163663
> 
> 赞同：0
> 
> 时间：2012-10-31T17:36:15.047
> 
> 标签：php, pdf, libraries, dynamically-generated, livecycle

我已经看到很多关于通过使用几个 PDF 库从网站填写的 PDF 表单的问题，但我找不到直接回答我的担忧的问题。我有一个非常复杂的 PDF，有人用 LiveCycle 构建了它，其中包括用于在表格中动态添加行的按钮之类的东西。我想知道是否可以从网站表单或 DDBB 填写此表单，以及是否有任何库可以实现诸如向表中添加额外行和/或窥视内部 PDF 的 javascript 以了解其逻辑. Adobe LiveCycle 甚至不是一个选择，因为他们的服务器解决方案的价格远远超出了凡人的承受能力。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:32:37.223

如果您手动编写解析器（这是一项壮举......），这是可能的，但这非常困难。简单地生成一个新的 pdf，并将所需信息存储为静态文本，这可能是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:06:47.780

经过一些实验，我发现您唯一需要做的就是修改 PDF 中包含的 XDP 文件中的 XFA 行（当它是 LiveCycle 生成的文件时），一切都会正常工作。可以在此处找到解释： [如何将数据合并到 XDP 文件中并返回 PDF（通过 .NET）？](https://stackoverflow.com/questions/1757397/how-can-i-merge-data-into-an-xdp-file-and-return-a-pdf-via-net)

# vb.net - 在VB中将列表转换为字典

> ID：13163666
> 
> 赞同：5
> 
> 时间：2012-10-31T17:36:16.783
> 
> 标签：vb.net, list, dictionary

我有一个字符串列表。我想创建一个字符串字典，字符串，其中“Id”作为每个条目的键，列表的内容作为值。

IE

```
myList= { "string1", "string2", ...etc } 
```

因此

```
myDictionary = {{"Id1", "string1"}, {"Id2", "string2"}, ...etc} 
```

我一直在尝试使用 List.ToDictionary 方法创建字典，但无济于事

```
List.ToDictionary(Of String, String)("Id", Function(p) p.key) 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T17:45:20.890

尝试这样的事情： -

```
 Dim list As List(of string)
  Dim dict As IDictionary(Of String) = list.ToDictionary(Function(p) "Id", Function(p) p) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T18:06:55.630

> 我想创建一个字符串字典，字符串，以“Id”作为每个条目的键

这是不可能的。字典中的每个条目都必须有一个唯一的键。

# c# - 如何从 FileInfo[] 获取文件名？

> ID：13163668
> 
> 赞同：-1
> 
> 时间：2012-10-31T17:36:25.093
> 
> 标签：c#

我有这个代码：

```
_fi = new DirectoryInfo (subDirectoryName).GetFiles("*.bmp");
label15.Text = _fi.Length.ToString();
for (int i = 0; i < myNumbers.Count; i++)
{
    if (myNumbers[i] >= max_min_threshold)
    {
        FileName = i.ToString("D6") + ".bmp";
        if (File.Exists(subDirectoryName + "\\" + FileName))
           ...
    }
} 
```

现在 _fi 包含 2255 个索引；在每个索引中都有一个文件名，例如在 index[0] 我看到：{000001.bmp}
In index[1] {000002.bmp}

然后我运行了 myNumbers，其中每个索引都包含 2256 个索引。例如在 index[0] 中有 225000 在 index[1] 中有 223000 等等。

我想要做的是使用此循环或其他方式以及每次迭代将文件名从 _fi 变量获取到 FileName 变量中。

所以在第一个变量中 FileName 将是 000001.bmp 在第二次迭代中 FileName 将是 000002.bmp 等等。

问题是 FileName 现在在第一次迭代中将是 000000.bmp ，它在硬盘中不存在。我在 _fi 中看到第一个文件是 000001.bmp

那么我怎样才能让它工作呢？

编辑：

试图这样做：

```
if (i == _fi.Length)
                            {
                                break;
                            }
                            FileName = (i + 1).ToString("D6") + ".bmp"; 
```

问题是，休息后它进入这部分：

```
button5.Enabled = true;
                        myTrackPanelss1.trackBar1.Maximum = counter;
                        myTrackPanelss1.trackBar1.Value = 0;
                        setpicture(0); 
```

现在设置图片（0）；将在 pictureBox1 中显示帧/图像编号 1，即文件：000001.bmp 这是 setpicture 函数：

```
private void setpicture(int indx)
        {
            if (_fi == null)
            {
                pictureBox1.Image = Lightnings_Extractor.Properties.Resources.Weather_Michmoret;
                button5.Enabled = false;
                label5.Visible = true;
            }
            else
            {
                if (indx >= 0 && indx <= myTrackPanelss1.trackBar1.Maximum && _fi.Length > indx)
                {
                    try
                    {
                        label19.ForeColor = Color.Red;
                        fileToolStripMenuItem.Enabled = true;
                        label19.Visible = false;
                        label20.Visible = false;
                        label14.Visible = true;
                        label15.Visible = true;
                        label8.Visible = true;
                        label9.Visible = true;
                        myTrackPanelss1.trackBar1.Enabled = true;
                        using (FileStream fs = new FileStream(_fi[indx].FullName, FileMode.Open))
                        {
                            this.label8.Visible = true;
                            this.label9.Visible = true;
                            this.label9.Text = _fi[indx].Name;
                            Image img = null;
                            Bitmap bmp = null;
                            Image imgOLd = null;

                            try
                            {

                                img = Image.FromStream(fs);
                                bmp = new Bitmap(img);

                                imgOLd = this.pictureBox1.Image;
                                this.pictureBox1.Image = bmp;
                                if (imgOLd != null)
                                    imgOLd.Dispose();

                                img.Dispose();
                                img = null;
                            }
                            catch
                            {
                                if (img != null)
                                    img.Dispose();
                                if (bmp != null)
                                    bmp.Dispose();
                                if (imgOLd != null)
                                    imgOLd.Dispose();
                            }
                        }
                    }
                    catch
                    {
                        button1.Enabled = false;
                        label1.Visible = false;
                        label2.Visible = false;
                        label3.Visible = false;
                        label4.Visible = false;
                        label11.Visible = false;
                        label12.Visible = false;
                        checkBox2.Enabled = false;
                        label19.Visible = true;
                        label19.ForeColor = Color.Green;
                        label19.Text = "The Selected Directory Is Access Denied";
                        label20.Visible = true;
                        label20.ForeColor = Color.Green;
                        label20.Text = "Please Set A Different Directory";
                        fileToolStripMenuItem.Enabled = false;
                        label14.Visible = false;
                        label15.Visible = false;
                        label8.Visible = false;
                        label9.Visible = false;
                        myTrackPanelss1.trackBar1.Enabled = false;
                        timer2.Stop();
                        return;
                    }
                }
                else
                {
                    Image imgOLd = this.pictureBox1.Image;
                    //this.pictureBox1.Image = null;

                    if (imgOLd != null)
                    {
                        imgOLd.Dispose();
                        imgOLd = null;
                    }

                    Application.DoEvents();
                }
            }
        } 
```

在线上：

```
using (FileStream fs = new FileStream(_fi[indx].FullName, FileMode.Open)) 
```

我现在遇到了异常，这不是在我休息之前；如果 i == _fi.Length 但在我这样做之后，我在这条线上遇到异常，它移动到捕获区域并扔给我：

该进程无法访问文件“D:\New folder (7)\MVI_3041.MOV_Automatic\000001.bmp”，因为它正被另一个进程使用。

```
System.IO.IOException was caught
  Message=The process cannot access the file 'D:\New folder (7)\MVI_3041.MOV_Automatic\000001.bmp' because it is being used by another process.
  Source=mscorlib
  StackTrace:
       at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
       at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
       at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
       at System.IO.FileStream..ctor(String path, FileMode mode)
       at Extracting_Frames.Form1.setpicture(Int32 indx) in D:\C-Sharp\Extracting_Frames\Extracting_Frames\Extracting_Frames\Form1.cs:line 508
  InnerException: 
```

我不知道为什么现在我得到了这个以前没有的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:45:06.937

像这样创建文件名

```
FileName = (i + 1).ToString("D6") + ".bmp"; 
```

* * *

## 更新：

为了访问`FileInfo`s in `_fi`，我会将它们添加到字典中以便快速查找。

```
Dictionary<string, FileInfo> fileDict = _fi.ToDictionary(f => f.Name); 
```

（一定要有一个`using System.Linq;`。）

然后你可以找一个文件

```
FileInfo fi;
if (fileDict.TryGetValue(FileName, out fi)) {
    DoSomethingWithTheFile(fi);
} 
```

这比打电话要快得多`if (File.Exists(...))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:38:23.640

如果你真的想从 FileInfo[] 获取文件名：

```
string[] names = new DirectoryInfo(subDirectoryName)
        .GetFiles("*.bmp")
        .Select(fi => fi.Name)
        .ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T20:49:56.640

找到解决方案：

```
using (FileStream fs = new FileStream(_fi[indx].FullName,FileMode.Open, FileAccess.Read, FileShare.ReadWrite)) 
```

现在它的工作。

谢谢你们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T17:44:39.887

也许我不明白你的问题，但如果你只想遍历文件列表，你可以这样做......

```
_fi = new DirectoryInfo (subDirectoryName).GetFiles("*.bmp");

foreach (var file in _fi)
{
    FileName = file.Name;

    // The rest of your code...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T17:38:20.667

从 1 而不是 0 开始 for 循环。这就是它首先寻找 000000.bmp 的原因。

编辑：为此，您需要更改数组引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T17:41:19.193

如果您知道您的第一个文件名是 .000001.bmp，您似乎只需要更新打印以便 i 从 1 而不是 0 开始。（我在这里假设您对 ToString 的“D6”覆盖只是将 i 的值左移小数点后 6 位。

所以代替 i.toString("D6") 尝试 (i+1).toString("D6")。

这是又快又脏。更“干净”的方法是在上面的循环中从 1 开始 i ，但是您必须更改数组引用以免错过 0 索引

# xcode - 如何以独立方式使用 Xcode 4 合并工具？

> ID：13163670
> 
> 赞同：2
> 
> 时间：2012-10-31T17:36:33.277
> 
> 标签：xcode, git, merge

我有时不得不在控制台上进行 git 合并。到目前为止，为了解决冲突，我一直在使用 Xocde 3 的 FileMerge（您可以使用“opendiff 命令”在控制台上打开它）。如果出现冲突，我会使用“git mergetool”，它会为每个冲突文件自动调用 opendiff。

但是，当我在 Xcode 4 上执行拉取操作并且发生冲突时，使用了更好的合并工具（我相信它是 Xcode 4 可执行文件的一部分）。它允许您实时预览结果，并根据具体情况手动编辑合并，这非常有用。

使用'git mergetool'时有什么方法可以使用Xcode 4 mergetool？

我在 Xcode 4 包中找不到此工具的可执行文件。任何实现这一目标的黑客都会受到欢迎。

# php - MYSQL SUM 查询与 Group By 和 Join 问题

> ID：13163679
> 
> 赞同：0
> 
> 时间：2012-10-31T17:37:22.190
> 
> 标签：php, mysql, sql

我正在使用 MYSQL 和 PHP 来执行服务器端脚本。我在尝试构建一个聚合一些评论数据的查询时遇到了麻烦，这些数据需要与一些关于评论对象的信息相结合。

我有两张桌子。一个称为“学校”，包含有关学校的一般信息，另一个称为“评论”，包含用户提供的评论信息。

学校表的结构如下：

id、schoolName、schoolCity、schoolCountry（用于字段名称）

以示例返回数据为：

1，ASD，迪拜，阿联酋
2，DAA，迪拜，阿联酋

等等

“评论”表有 57 列：

RID、schoolID、profileID、dateCreated、Q1、Q2、Q3、...Q51、Q52、freeReview（作为字段名称）

返回的数据如下：

1, 8, 55, 2012-10-10 05:16:05, 10, 8, 9, 2, 3....

从 Q1 到 Q25，这些是评论表单中的问题，以 0-10 之间的整数形式返回。其他列与个人资料表和学校表相关联（如上）。

我可以为个别学校创建一个查询，对给定学校的所有评论求和，并根据为该学校提交的评论数量生成该学校的平均分数。

我遇到的问题是我想创建一个页面，在一个表格中列出所有（按分页划分）具有平均和 SUM-ed 分数的学校。

这是我生成一所学校的总体平均分数的查询。

```
$singlereviewtotal = mysql_query("
SELECT ROUND(
((SUM(Q1+Q2+Q3+Q4+Q5+Q6+Q7+Q8+Q9+Q10+Q11+Q12+Q13+Q14+Q15+
Q16+Q17+Q18+Q19+Q20+Q21+Q22+Q23+Q24+Q25+Q26+Q27+Q28+Q29+Q30+
Q31+Q32+Q33+Q34+Q35+Q36+Q37+Q38+Q39+Q40+Q41+Q42+Q43+Q44+Q45+
Q46+Q47+Q48+Q49+Q50+Q51+Q52)/((52*10)*
(SELECT COUNT(*) FROM reviews WHERE schoolID='$schoolvalue')))*10), 2)
AS total
FROM reviews
WHERE schoolID='$schoolvalue'") or die(mysql_error()); 
```

这会生成所有列和行的正确总和和平均值，四舍五入到小数点后两位。WHERE 子句来自页面中的 PHP 值，该值告诉查询要使用哪个学校 ID。

这是我试图将所有学校都列在一个列表中的尝试。

```
$sumreviews = mysql_query("SELECT *, 
 ROUND(
 ((Q1+Q2+Q3+Q4+Q5+Q6+Q7+Q8+Q9+Q10+Q11+Q12+Q13+Q14+Q15+
 Q16+Q17+Q18+Q19+Q20+Q21+Q22+Q23+Q24+Q25+Q26+Q27+Q28+Q29+Q30+
 Q31+Q32+Q33+Q34+Q35+Q36+Q37+Q38+Q39+Q40+Q41+Q42+Q43+Q44+Q45+
 Q46+Q47+Q48+Q49+Q50+Q51+Q52)/(52*10)
 *10),2) AS atotal 
 FROM reviews
 RIGHT JOIN schools ON schools.SID = reviews.schoolID
 GROUP BY schools.schoolName, reviews.schoolID
 ORDER BY atotal DESC")or die(mysql_error()); 
```

这个查询给了我学校的列表，但是“总”的输出只给了我那个给定学校的第一行的总和（在这种情况下是 7.31 - 可以在输出的下方看到，但平均分数应为 7.23）。

如果我在上面的查询中删除 GROUP BY，我会得到所有学校的列表，以及一些有更多评论的学校的额外行——比如迪拜美国学校。

> 学校名称、城市、国家、评级
> 美国迪拜学校，迪拜，阿联酋 7.31
> 迪拜美国学院，迪拜，阿联酋 7.19 迪拜
> 美国学校，迪拜，阿联酋 7.15
> 曼谷国际学校，泰国班克克，
> 里约热内卢美国学校, 巴西
> 
> 布达佩斯美国学校, 匈牙利布达佩斯
> 
> 苏黎世国际学校, 苏黎世, 瑞士

我想知道，如何构造查询，以便对所有给定学校的“AS 总计”行进行分组和平均？如果我将 7.31 与 7.15 列为迪拜美国学校的个人评论分数进行平均，我会得到正确的 7.23。答案就在那里，但我似乎无法将它连接在一起。

对于我缺乏“造型”问题，我提前道歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:53:07.293

你有没有尝试过类似的东西

```
 SELECT schools.schoolName,
 ROUND(AVG(
 ((Q1+Q2+Q3+Q4+Q5+Q6+Q7+Q8+Q9+Q10+Q11+Q12+Q13+Q14+Q15+
 Q16+Q17+Q18+Q19+Q20+Q21+Q22+Q23+Q24+Q25+Q26+Q27+Q28+Q29+Q30+
 Q31+Q32+Q33+Q34+Q35+Q36+Q37+Q38+Q39+Q40+Q41+Q42+Q43+Q44+Q45+
 Q46+Q47+Q48+Q49+Q50+Q51+Q52)/(52*10)
 *10)),2) AS average
 FROM reviews
 RIGHT JOIN schools ON (schools.SID = reviews.schoolID)
 GROUP BY schools.SID
 ORDER BY average DESC; 
```

您的最后一个查询没有任何聚合函数，因此这可能是它没有返回预期结果的原因。

尚未测试查询，但如果您提供 SQLFiddle 或我可以验证的示例测试数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:07:36.967

我没有测试查询，但我认为最好这样写第一个：

```
SELECT ROUND(AVG((Q1+Q2+Q3+Q4+Q5+Q6+Q7+Q8+Q9+Q10+Q11+Q12+Q13+Q14+Q15+
    Q16+Q17+Q18+Q19+Q20+Q21+Q22+Q23+Q24+Q25+Q26+Q27+Q28+Q29+Q30+
    Q31+Q32+Q33+Q34+Q35+Q36+Q37+Q38+Q39+Q40+Q41+Q42+Q43+Q44+Q45+
    Q46+Q47+Q48+Q49+Q50+Q51+Q52)/52),2) AS total
FROM reviews
WHERE schoolID='$schoolvalue' 
```

它更容易书写和阅读。

对于第二个查询，问题在于 SELEC 子句上没有聚合函数 AVG。看看Iserni的答案，我认为它是正确的。

# delphi - 使用 DirectShow 检测何时从 Camera Stream 显示新帧

> ID：13163682
> 
> 赞同：1
> 
> 时间：2012-10-31T17:37:39.213
> 
> 标签：delphi, directshow, multimedia

我使用以下代码连接到设备并流式传输视频，它的效果很好，除了我不知道如何检测实际帧何时发生变化

变量

```
fGraph: iGraphBuilder;
fBuilder: iCaptureGraphBuilder2;
fDevEnum: iCreateDevEnum;
fClassEnum: iEnumMoniker;
fMoniker: iMoniker;
fSrc: iBaseFilter;
fFetched: pLongInt;
fvideoWindow: iVideoWindow;
fmediaControl: iMediaControl;
fEvent: IMediaEvent;
fMediaEvent: IMediaEventEx; 
```

代码：

```
fGraph := createComObject(CLSID_FilterGraph) as iGraphBuilder;
fBuilder := createComObject(CLSID_CaptureGraphBuilder2) as iCaptureGraphBuilder2;
fBuilder.SetFiltergraph(fGraph);
fDevEnum := createComObject(CLSID_SystemDeviceEnum) as iCreateDevEnum;
fDevEnum.createClassEnumerator(CLSID_VideoInputDeviceCategory , fClassEnum , 0);
fClassEnum.next(1 , fMoniker , fFetched);
fMoniker.bindToObject(nil , nil , IID_IBaseFilter , fSrc);
fGraph.addFilter(fSrc , 'Video Capture');
fGraph.queryInterface(IID_IMediaControl , fmediaControl);
fGraph.queryInterface(IID_IVideoWindow , fvideoWindow);
fGraph.queryInterface(IID_IMediaEvent , fEvent);
fEvent.queryInterface(IID_IMediaEventEx , fMediaEvent); // TForm(fOwner)
fMediaEvent.SetNotifyWindow(self.Handle , WM_MMNOTIFY , Integer(self));
fBuilder.renderStream(@PIN_CATEGORY_PREVIEW , @MEDIATYPE_VIDEO , fSrc , nil , nil);
fvideoWindow.put_windowStyle(WS_CHILD or WS_CLIPSIBLINGS);
fvideoWindow.setWindowPosition(0 , 0 , self.width , self.height);
fvideoWindow.put_owner(self.Handle);
fmediaControl.run; 
```

如您所见，我尝试使用 IMediaEvent 和 IMediaEventEx，但仅在视频流开始或停止时触发，每次添加新帧时我都需要知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:51:47.800

视频渲染器不会报告帧呈现，例如使用回调。当帧到达视频渲染器时，它会根据可能附加的时间戳排队等待呈现。然后视频渲染器决定是否丢弃、呈现或排队数据。

如果您绝对需要知道演示时间，您可能想做的是

*   在渲染器之前连接一个 Sample Grabber 过滤器
*   确保数据已解压缩
*   通过删除`SampleCB`抓取回调中的相应标志来剥离帧的时间

一旦视频渲染器收到该帧，该帧将很快呈现。不过，在它发生之前你仍然可以控制。如果您*之后*需要它，您需要一个自定义过滤器，该过滤器实际上将媒体样本传递给渲染器，并且在将控制权返回给您的过滤器时，您知道该帧刚刚呈现给用户。

# javascript - 更换 ”。” 在一个字符串的多个 url 中进入 [dots]

> ID：13163685
> 
> 赞同：2
> 
> 时间：2012-10-31T17:37:45.207
> 
> 标签：javascript, regex, node.js, optimization, logic

我想替换“。” 从输入下方到输出下方进入像 [dot] 这样的标记

输入

> 这是一个test.for一个问题。在 stackoverflow.com 上学习的最佳场所。编程。测试 www.wikipedia.com

输出

> 这是一个test.for一个问题。在 stackoverflow[dot]com 上学习的最佳场所。编程。测试 www[dot]wikipedia[dot]com

问题

1.  有可能`test.for`我们不能使用好的正则表达式，`/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}/gi`我认为最好使用下面的东西
2.  也许我找到了解决方案；

`found = string.match(/([a-zA-Z0-9]+\.(com|co\.cc)|more\.domains)/gi);`

这项工作很棒，我无法将它们加入/替换为原始字符串。任何解决方法，例如[我们如何使用 javascript 在数组中使用正则表达式过滤数组中的元素？](https://stackoverflow.com/questions/13107078/how-can-we-filter-elements-in-array-with-regex-in-array-with-javascript)

你将如何解决这个问题？顺便说一句，我使用 nodejs 其他语言是可以接受的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:23:30.353

这可以`www.example.com`正确处理：

```
tld = ["com", "org", "edu", "net"] // feel free to add more

var input = "this is a test.for a question. at www.stackoverflow.com " 
    + "the best place to learn. "
    + "programming.test wikipedia.com and windows.microsoft.edu";

re = new RegExp('\\S+\\.(' + tld.join('|') + ')\\b', 'g')

var dotted = input.replace(re, function($0) {
    return $0.replace(/\./g, "[dot]");
});

// this is a test.for a question. at www[dot]stackoverflow[dot]com the best place to learn. 
// programming.test wikipedia[dot]com and windows[dot]microsoft[dot]edu 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:40:50.253

```
var input = "this is a test.for a question. at stackoverflow.com the best place to learn. programming. test wikipedia.com";
var dotted = input.replace(/(\S+)\.(com|org|edu|net)\b/gi, '$1[dot]$2');
// "this is a test.for a question. at stackoverflow[dot]com the best place to learn. programming. test wikipedia[dot]com" 
```

# ios - 将 plist 文件打印到 NSLog

> ID：13163686
> 
> 赞同：0
> 
> 时间：2012-10-31T17:37:45.577
> 
> 标签：ios

我有一个正在创建的 plist 文件，但我不想写入文件，而是想将其内容作为字符串打印到 NSLog：

```
NSMutableDictionary* root = [NSMutableDictionary dictionaryWithCapacity:1];
NSMutableArray* puzzle = [NSMutableArray arrayWithCapacity: [self.puzzlePieces count] ];
root[@"puzzle"] = puzzle;

[self.puzzlePieces enumerateObjectsUsingBlock:^(KTPuzzlePiece* piece, NSUInteger idx, BOOL *stop) {
    NSMutableDictionary* pieceInfo = [piece.pieceInfo mutableCopy];
    pieceInfo[@"x"] = [NSNumber numberWithFloat: piece.position.x];
    pieceInfo[@"y"] = [NSNumber numberWithFloat: piece.position.y];

    [puzzle addObject:pieceInfo];
}];

NSData *data = [NSPropertyListSerialization dataFromPropertyList:root
                                                          format:NSPropertyListXMLFormat_v1_0
                                                errorDescription:nil]; 
```

但是，以下输出十六进制值

```
 NSLog(@"Data: %@", data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:04:18.050

你只是少了一步。您需要将您的 NSData 转换为一个字符串，您应该很高兴：

```
NSData *data = [NSPropertyListSerialization 
                       dataFromPropertyList:root
                                     format:NSPropertyListXMLFormat_v1_0
                           errorDescription:nil];

NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

NSLog(@"%@", string); 
```

# visual-studio - 使用 Firebird 的 Visual Studio 数据库项目

> ID：13163689
> 
> 赞同：3
> 
> 时间：2012-10-31T17:37:47.327
> 
> 标签：visual-studio, firebird, database-project

我想知道是否有人知道是否可以在 Visual Studio 中使用 Firebird 中的数据库项目？似乎项目属性中部署选项卡中目标连接中的数据源已锁定到 Microsoft SQL Server，“导入数据库对象和设置”也是如此。能够像我可以版本控制和处理 MS SQL 数据库一样进行版本控制和处理 Firebird 数据库会非常好。

如果这是不可能的，有没有人知道版本控制 Firebird 数据库的好方法？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T20:30:02.450

你不能。这仅适用于 MS SQL。

实际上，您仍然可以将它与 Firebird 一起使用，但您将无法使用 90% 的功能，因为它需要 MS SQL - 连接到数据库或语法或...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:01:15.247

也许这个 Sourceforge 项目可以提供帮助：http: [//sourceforge.net/projects/fbnetinstaller/](http://sourceforge.net/projects/fbnetinstaller/) :)

# css - IE8中CSS下拉菜单上的奇数间距

> ID：13163691
> 
> 赞同：0
> 
> 时间：2012-10-31T17:37:54.097
> 
> 标签：css, internet-explorer-8

我继承了一个网站，我正在更改导航。在我的页面上，我使用了一个 CSS 下拉菜单（在我的例子中是下拉菜单），它显示了下拉列表的嵌套列表项之间的一些不寻常的间距。此外，如果我尝试将鼠标悬停在下拉项目上，当鼠标点击元素之间的空白区域时，列表就会消失。

![项目间距异常](../Images/984e781d50e77809a7d5e3692d812da2.png)

它在 Chrome、Safari 和 FF 上看起来不错。IE8 似乎是问题所在......我知道我必须正盯着错误而不是看到它。任何帮助表示赞赏。

我的（相关）HTML：

```
<table cellpadding="0" cellspacing="0" border="0" align="center" width="1000" height="32">
    <tr>
        <td align="left" valign="top" width="10" height="32"><img src="images/divider1.gif" alt="" width="10" height="32" border="0"></td>
        <td align="left" valign="top" width="980" height="32">
    <ul id="midnav">

      <!-- Accommodations -->
      <li onmouseover="acco.src='images/accommodations-on.gif'" onmouseout="acco.src='images/accommodations-off.gif'">
        <a href="accommodations/" class="pointer"><img src="images/accommodations-off.gif" alt="Accommodations" width="136" height="32" border="0" id="acco" name="acco"></a>
        <ul>
          <li>
            <img src="images/accom_top_strip.png" width="136" height="24" border="0">
            <a href="accommodations/guest-services.cfm" onmouseover="accom_gs.src='images/accom_guest_services_on.png'" onmouseout="accom_gs.src='images/accom_guest_services_off.png'" class="pointer"><img src="images/accom_guest_services_off.png" alt="Guest Services" width="136" height="24" border="0" id="accom_gs" name="accom_gs"></a>
                    </li>
          <li>
            <a href="luxury-townhomes.cfm" onmouseover="accom_lth.src='images/luxury_townhomes_on.png'" onmouseout="accom_lth.src='images/luxury_townhomes_off.png'" class="pointer"><img src="images/luxury_townhomes_off.png" alt="Luxury Townhomes" width="136" height="24" border="0" id="accom_lth" name="accom_lth"></a>
                    </li>
          <li>
            <a href="three-bedroom-condo.cfm" onmouseover="accom_3bc.src='images/three_bed_condo_on.png'" onmouseout="accom_3bc.src='images/three_bed_condo_off.png'" class="pointer"><img src="images/three_bed_condo_off.png" alt="Three Bedroom Condo" width="136" height="24" border="0" id="accom_3bc" name="accom_3bc"></a>
                    </li>
          <li>
            <a href="two-bedroom-condo.cfm" onmouseover="accom_2bc.src='images/three_bed_condo_on.png'" onmouseout="accom_2bc.src='images/two_bed_condo_off.png'" class="pointer"><img src="images/two_bed_condo_off.png" alt="Two Bedroom Condo" width="136" height="24" border="0" id="accom_2bc" name="accom_2bc"></a>
                    </li>
          <li>
            <a href="one-bedroom-condo.cfm" onmouseover="accom_1bc.src='images/one_bed_condo_on.png'" onmouseout="accom_1bc.src='images/one_bed_condo_off.png'" class="pointer"><img src="images/one_bed_condo_off.png" alt="One Bedroom Condo" width="136" height="24" border="0" id="accom_1bc" name="accom_1bc"></a>
                    </li>
          <li>
            <a href="studio.cfm" onmouseover="accom_studio.src='images/studio_on.png'" onmouseout="accom_studio.src='images/studio_off.png'" class="pointer"><img src="images/studio_off.png" alt="Studio" width="136" height="24" border="0" id="accom_studio" name="accom_studio"></a></li>
        </ul>
      </li>
</ul>
 </td>
<td align="left" valign="top" width="10" height="32"><img src="images/divider2.gif" alt="" width="10" height="32" border="0"></td>
    </tr>
</table> 
```

我的 CSS：

```
/* Main CSS */

ul {
    margin-top:13px;
    margin-bottom: 20px;
    margin-right: 0px;
    padding: 0px;
    margin-left: 50px;  
  }
li{
    list-style-image: url(../images/bullet.gif);
    vertical-align: middle;
    color: #9a631b; 
    margin-bottom: 13px;
    line-height: 18px;
    padding-left: 30px;
}

/* Mid Page Navigation */

ul#midnav {
    margin:0;
    padding:0;
    height:32px;
    width:980px;
    position:relative;
    z-index:10000;
    list-style:none;
    font-size:0;    
}
ul#midnav li {
    list-style-image:none;
    float:left;
    padding:0;
    margin:0;
    height:32px;
}
ul#midnav li a {
    list-style:none;
    display:block;
    margin:0;
    padding:0;
    text-decoration:none;
}
ul#midnav li ul {
    list-style:none;
    display:none;
    margin:0;
    padding:0;
    font-size:0;
}
ul#midnav li:hover ul, ul#midnav li.hover ul {
    list-style:none;
    display:block;
    position:absolute;
    bottom:100%;
    margin:0;
    padding:0;
    z-index:10001;
}
ul#midnav li:hover li, #midnav li.hover li {
    list-style-image:none;
    float:none;
    margin:0;
    padding:0;
    vertical-align:auto;
    line-height:normal;
    height:auto;
}
ul#midnav li:hover li a, #midnav li.hover li a {
    line-height:none;
} 
```

和一个小 JS 使悬停在 IE 中工作：

```
$(document).ready(function(){
   $('ul#midnav li').hover(
        function(){
            $(this).addClass("hover");
        },
        function(){
            $(this).removeClass("hover");
        }
     ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:55:00.647

直到你`table`用来建立网站，它是一种旧方法。使用`DIV`以获得更好的外观。

# apache-pig - 我可以在 Pig 脚本中将参数传递给 UDF 吗？

> ID：13163694
> 
> 赞同：6
> 
> 时间：2012-10-31T17:38:04.700
> 
> 标签：apache-pig

我对 PigScript 比较陌生。我想知道是否有办法在 Pig 中将参数传递给 Java UDF？

这是场景：我有一个日志文件，它有不同的列（每个代表另一个表中的主键）。我的任务是获取所选列中不同主键值的计数。我编写了一个 Pig 脚本，它可以获取不同的主键并计算它们。但是，我现在应该为每一列编写一个新的 UDF。有一个更好的方法吗？就像我可以将行号作为参数传递给 UDF 一样，它避免了我编写多个 UDF 的需要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:39:45.553

做到这一点的方法是使用`DEFINE`和 UDF 的构造函数。所以这里是一个客户“拆分器”的例子：

```
REGISTER com.sample.MyUDFs.jar;
DEFINE CommaSplitter com.sample.MySplitter(',');

B = FOREACH A GENERATE f1, CommaSplitter(f2); 
```

希望这能传达这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T07:21:05.587

要传递参数，您可以在 pigscript 中执行以下操作：

```
UDF(document, '$param1', '$param2', '$param3') 
```

> 编辑：不确定这些参数是否需要包裹在“”中

在您的 UDF 中，您执行以下操作：

```
public class UDF extends EvalFunc<Boolean> {

public Boolean exec(Tuple input) throws IOException {

    if (input == null || input.size() == 0)
        return false;

    FileSystem fs = FileSystem.get(UDFContext.getUDFContext().getJobConf());

    String var1 = input.get(1).toString();
    InputStream var1In = fs.open(new Path(var1));

    String var2 = input.get(2).toString();
    InputStream var2In = fs.open(new Path(var2));

    String var3 = input.get(3).toString();
    InputStream var3In = fs.open(new Path(var3));

    return doyourthing(input.get(0).toString());
}
} 
```

例如

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:49:18.500

是的，您可以在 UDF 的元组参数输入中传递任何参数：

```
exec(Tuple input) 
```

并使用

```
input.get(index) 
```

# java - 在 JAX-RS 服务器中监控数据库

> ID：13163700
> 
> 赞同：0
> 
> 时间：2012-10-31T17:38:29.647
> 
> 标签：java, rest, servlets, jersey, jax-rs

我正在编写一个应用程序，它将 HTTP 消息发送到带有后备数据库的 JAX-RS/Jersey 服务器。

当服务器收到来自客户端的请求时，它会在数据库中存储一些数据（id、时间戳等）。然后它应该等待一定的时间间隔，看看是否有其他类似的请求进来：

```
SERVER receives a request:
  --> DB insertion 
  --> "observes" the DB for 3 sec for a similar request to come in
  --> if it does, send response immediately
  --> otherwise, send response at timeout 
```

我可以观察数据库，看看是否在3秒超时之前插入了另一个客户端的数据？如果是这样，最好的方法是什么？

# javascript - 背景颜色改变 JavaScript

> ID：13163702
> 
> 赞同：0
> 
> 时间：2012-10-31T17:38:30.187
> 
> 标签：javascript, background-color

我想以此为目标：

```
<h3 id='month'>Oct</h3> 
```

我这样做了：

```
 var changeColor = function () {
        var monName = new Array ('Jan' ... 'Dec'); //ellipsis to make code short
        var now = new Date();

        if(monName == monName[now.getMonth()]) {
           switch(monName) {
                case 'Jan':
                   document.getElementById('month').style.backgroundColor = '#ff3300';
                   break;
                   .
                   .
                   .
                   .
                case 'Dec':
                   document.getElementById('month').style.backgroundColor = '#c2dd8a';
                   break;
                default:
                   alert('Error');

                }     
        }
}; 
```

我在 html body 元素中调用了该函数（脚本标签之间的外部 js 文件已经正确获取）：

```
<script type='text/javascript' src='time.js'></script>
<body onload='changeColor();'> 
```

它似乎没有用。我怀疑我如何定位 h3 元素存在错误。我的总体想法是随着目标元素的月份变化而改变背景颜色。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:41:50.393

尝试将您的`if`陈述更改为：

```
if(document.getElementById('month').innerHTML == monName[now.getMonth()]) 
```

此外，您的`switch`陈述应该是：

```
switch(monName[now.getMonth()]) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T17:44:35.663

我会完全删除 if 测试。

# ruby-on-rails - Rails 从所有选择 * 类型查询中隐藏特定记录

> ID：13163704
> 
> 赞同：1
> 
> 时间：2012-10-31T17:38:31.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我在表格中有一条记录，用作各种占位符，不代表实际数据。我知道这是糟糕的设计，但我有一些非常尴尬的要求必须处理，而且我没有看到其他解决方案，所以它本身就是一个修补程序。

现在假设我在整个应用程序中有一系列 SELECT *s，我不想为它们中的每一个显式排除该单个记录。有什么我可以放入我的模型中以将其从所有查询中排除，除了明确调用它的那些？或者也许我可以将一些逻辑直接放入我的 PG 数据库中？

这是表中 ID 为 0 的第一条记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:42:19.007

一种解决方案是定义一个`default_scope`排除这些记录的方法，请参阅[文档](http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Default/ClassMethods.html#method-i-default_scope)

所以在做的时候`YourModel.all`，如果`default_scope`on`YourModel`排除了正确的记录，你会得到你想要的。

但正如你所说，这是糟糕的设计！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:43:43.717

创建一个不包括它的视图：

```
create view v as
select *
from t
where id != 0 
```

现在从视图中选择：

```
select *
from v 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T17:53:49.020

添加默认范围

```
default_scope where('id != 0') 
```

对你的模型...

在任何情况下，您都想在某些查询中避免使用默认范围，您可以在`Model.unscoped...`那里...

# android - 在高 PPI 屏幕上，使用 CSS background-size 在 WebView 中产生模糊的图像

> ID：13163706
> 
> 赞同：3
> 
> 时间：2012-10-31T17:38:39.937
> 
> 标签：android, css, webview, retina-display

我无法在 Android WebView 中显示高 dpi 图像。

首先，我在我的 HTML 中使用了这个指令：

```
<meta name="viewport" content="width=device-width" /> 
```

背景图像在我的 CSS 中指定如下：

```
.button {
    width: 100px;
    height: 50px;
    /* button.png is really 200x100 */
    background: url('../img/button.png') no-repeat 50% 50%;
    background-size: contain;
} 
```

在 Android 版 Chrome 上，此图像看起来非常清晰。然而，在 WebView 中，图像是模糊的——就好像它是 72dpi 被放大了一样。

奇怪的是，如果我指定：

```
<meta name='viewport' content='target-densitydpi=device-dpi'> 
```

然后图像看起来很清晰，尽管页面的其余部分也是半分辨率。

我已经添加了诸如`android:hardwareAccelerated="true"`和之类的东西`android:anyDensity="true"`，`AndroidManifest.xml`但似乎没有任何区别。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T10:04:33.537

尝试这个，

```
img{
image-rendering: optimizeQuality;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T13:54:02.230

在 css 中强制硬件加速会给你一个“清晰”的图像。

```
-webkit-transform: translate3d(0,0,0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T18:19:59.340

尝试添加：

```
image-rendering: -webkit-optimize-contrast; 
```

更多信息[https://css-tricks.com/almanac/properties/i/image-rendering/](https://css-tricks.com/almanac/properties/i/image-rendering/)

# java - 在 Java 中读取文件时从我离开的地方继续

> ID：13163708
> 
> 赞同：1
> 
> 时间：2012-10-31T17:38:43.110
> 
> 标签：java, line

我正在尝试从文件中读取信息并根据该信息创建对象。文件的每 6 行左右是一个不同的单元，这意味着第一组行与对象 A 相关，下一组与对象 B 相关，依此类推。

我可以从文件中读取并创建我的对象——对于第一组。我的问题是，我不知道如何让读者在创建下一个对象时从它离开的地方继续阅读......

（注意：创建文件的 read() 方法是正在创建的新对象的一部分，而不是在 main() 或类似的东西中）。以下是相关的代码：

司机：

```
public class CSD{

    public static void main (String[] argv){
        Vector V=new Vector(10);
        CoS jon=new CoS();
        jon.display();
    }//end main
} 
```

它调用 CoS，其构造函数是：

```
public CoS(){
    try{
        String fileName=getFileName();
        FileReader freader=new FileReader(fileName);
        BufferedReader inputFile=new BufferedReader(freader);
        this.read(inputFile);
        setDegree(major);
        setStatus(credits);
    } catch(FileNotFoundException ex){
    }//end catch
} 
```

它同时调用 read() 和 getFileName()：

```
public void read(BufferedReader inputFile){
    try{
        int n;
        super.read(inputFile);
        String str=inputFile.readLine();
        if (str!=null){
            n=Integer.parseInt(str);
            setCredits(n);
            str=inputFile.readLine();
            setMajor(str);
        }//end if
    }catch(IOException ex){}
}//end method

public String getFileName() {
    Scanner scan = new Scanner(System.in);
    String filename;
    System.out.print("Enter the file name and path ==> ");
    filename = scan.nextLine();
    System.out.println("");
    return filename;
} 
```

提前谢谢各位！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:57:21.753

为什么不使用 ObjectInputStream 和 ObjectOutputStream？或者任何一种真正的序列化？

javadoc：[http ://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)

示例代码：[http ://www.javadb.com/writing-objects-to-file-with-objectoutputstream](http://www.javadb.com/writing-objects-to-file-with-objectoutputstream)

基本上，由于您将对象写入文件并希望处理它们所在的行，因此我将建议其他一些序列化替代方案。

一个是 Object * Stream - 您在文件上创建一个 ObjectStream 并通过它写入对象。稍后，当您阅读时，您会以与您编写对象相反的顺序阅读对象，并且它们会像您编写它们一样返回。

另一种是**实现 Serializable**。还记得那个*瞬态*关键字吗？在您不想保存到文件的字段上使用它。

然后是原始的“手动”方法，您只保存要保存的内容，稍后通过将这些初始化值传递给它们的构造函数来重建对象。有点像人们建议您将文件行作为ctor的参数:)

编辑：猜测使用 Object*Streams 编写需要您实现 Serializable 或 Externalizable。

但如果示例代码不够清晰，请询问:)

# java - 包 oracle.jdbc.driver 不存在

> ID：13163715
> 
> 赞同：5
> 
> 时间：2012-10-31T17:39:09.450
> 
> 标签：java, jdbc

以下代码中的错误！[发生错误][1]

```
import java.sql.*;

public class DBConnect{
public static void main(String a[]) throws SQLException{
    // *package oracle.jdbc.driver does not exist*
    Driver d=new oracle.jdbc.driver.OracleDriver();
    DriverManager.registerDriver(d);
    System.out.println("Driver is registered");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T17:45:03.863

您必须将 ocjdbc jar 添加到您的类路径中并像这样尝试。

如果您的 jar 文件和 java 源位于同一位置。使用命令提示符并将目录更改为该位置。并执行以下

```
 javac -classpath ocjdbc14.jar DBConnect.java 
```

看看。

```
import java.sql.*;
import oracle.jdbc.driver.OracleDriver;

public class DBConnect{
 public static void main(String a[]) {
   try{
    Driver d=new OracleDriver();
    DriverManager.registerDriver(d);
    System.out.println("Driver is registered");
  }catch(SQLException e){
     System.out.println("Error occured "+e.getMessage());
     }
}
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:43:45.167

您需要`oracle driver jar`在项目构建路径中添加一个，

下载[Ojdbc14.jar](http://mirrors.ibiblio.org/pub/mirrors/maven/mule/dependencies/maven1/oracle-jdbc/jars/ojdbc14.jar)文件并将其放入您的类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-31T12:48:10.237

如果您使用的是 intellij，则需要执行以下步骤

1.  下载jdbc7或任何版本
2.  将此 jar 添加到以下路径 File>>Project Structure>>Libraries>> [Image 1](https://i.stack.imgur.com/q8YBo.png)
3.  如果您仍然遇到问题，请单击 Modules 并在那里添加 jar，那么您必须看到以下问题 [Image 2](https://i.stack.imgur.com/au8yE.png)
4.  现在点击问题>>修复>>添加到如下 [图3](https://i.stack.imgur.com/o98af.png)的依赖项 希望这将解决您的问题

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-11-30T16:19:13.310

先在netbeans中运行程序，将Ojdbc14.jar文件添加到程序库中，就可以执行了。

在 NetBeans 中执行后，单击`Clean & Build Project...`。这将创建一个 jar 文件，然后 `java -jar "C:\Users\s\Documents\NetBeansProjects\jdbcTest_course\dist\jdbcTest_course.jar"`将提供类似的路径。

在命令提示符 ( `cmd`) 中输入它，它将运行。

# wpf - 标签不是有效的 XAML 元素？

> ID：13163719
> 
> 赞同：2
> 
> 时间：2012-10-31T17:39:35.043
> 
> 标签：wpf, xaml, windows-8, visual-studio-2012, winrt-xaml

今天早上我尝试再次运行我的 C#/XAML 应用程序（这里提到的早期问题：[为什么我的 XAML 突然崩溃？](https://stackoverflow.com/questions/13150291/why-did-my-xaml-suddenly-crash)）。

这一次，我至少得到了一些具体的错误消息，即“成员“ShowGridLines”无法识别或无法访问。” 和“Windows 应用项目中不支持标签。”

这是完整的 XAML：

```
<Page
    x:Class="TimeAndSpaceLines.View.SectionN"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:TimeAndSpaceLines.View"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid MinHeight="600" ShowGridLines="True" Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"></ColumnDefinition>
                <ColumnDefinition MaxWidth="800"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    
<RowDefinition/>                    

            </Grid.RowDefinitions>
            <StackPanel Orientation="Horizontal">
                <Label MinWidth="40" Content="From"></Label>
                <TextBox x:Name="textBoxFromDate" MinWidth="120">
                </TextBox>
            </StackPanel>
            <StackPanel Grid.Row="1" Orientation="Horizontal">
                <Label MinWidth="40">at
                </Label>
                <TextBox x:Name="textBoxFromTime" MinWidth="120" Grid.Row="1">
                </TextBox>
            </StackPanel>
            <StackPanel Grid.Row="2" Orientation="Horizontal">
                <Label MinWidth="40">To
                </Label>
                <TextBox x:Name="textBoxToDate" MinWidth="120">
                </TextBox>
            </StackPanel>
            <StackPanel Grid.Row="3" Orientation="Horizontal">
                <Label MinWidth="40">at
                </Label>
                <TextBox x:Name="textBoxToTime" MinWidth="120" Grid.Row="1">
                </TextBox>
            </StackPanel>
            <Button
         x:Name="buttonFindLocForDateRange"
         MaxWidth="200"
         Grid.Row="4"
         Content="Find Location for Date Range">
            </Button>
            <Label
         x:Name="labelPerson1_Red"
         Grid.Row="5"
         Content="(Person1_Red)"
         Foreground="Red">
            </Label>
            <Label
         x:Name="labelPerson2_Orange"
         Grid.Row="6"
         Content="(Person2_Orange)"
         Foreground="Orange">
            </Label>
            <Label
         x:Name="labelPerson3_Yellow"
         Grid.Row="7"
         Content="(Person3_Yellow)"
         Foreground="Yellow">
            </Label>
            <Label
         x:Name="labelPerson4_Green"
         Grid.Row="8"
         Content="(Person4_Green)"
         Foreground="Green">
            </Label>
            <Label
         x:Name="labelPerson5_Blue"
         Grid.Row="9"
         Content="(Person5_Blue)"
         Foreground="Blue">
            </Label>
            <Label
         x:Name="labelPerson6_Indigo"
         Grid.Row="10"
         Content="(Person6_Indigo)"
         Foreground="Indigo">
            </Label>
            <Label
         x:Name="labelPerson7_Violet"
         Grid.Row="11"
         Content="(Person7_Violet)"
         Foreground="Violet">
            </Label>
            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <Image>
                </Image>
                <Label>Prev
                </Label>
                <Label x:Name="labelSectionN" Content="(Section N)">
                </Label>
                <Label>Next
                </Label>
            </StackPanel>
            <!-- Add a Bing Map component: Grid.Column="1" Grid.Row="1" Grid.RowCount="11" -->
        </Grid>
</Page> 
```

注意：唯一的区别是 XAML 的初始和命名空间部分是这样的：

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"> 
```

...并且在 Grid 属性中没有 Background="{StaticResource ApplicationPageBackgroundThemeBrush}" ，此 XAML 在 Kaxaml 中按应有的方式显示（目前非常难看，但此时这是可以预料的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:51:01.850

你编写了一些仅支持 WPF 应用而不支持 WinRT 的 XAML。
WinRT 不包含 Label 控件，并且 Grid 没有 ShowGridLines 属性，这就是您的代码无法正常工作的原因。

WPF 和 WinRT 是两种独立的技术——两者都恰好使用 XAML 来创建用户界面——但你不应该期望用 WPF 编写的 XAML 可以在 WinRT 中工作，反之亦然。

# c# - 如何使用 Automapper 完成以下映射？

> ID：13163724
> 
> 赞同：2
> 
> 时间：2012-10-31T17:39:58.183
> 
> 标签：c#, asp.net-mvc, entity-framework, automapper

我想映射类（实体），

```
public class Source {
   public int x;
   public string y;
   public bool z;

   public int a;
   public int b;
   public int c;

   //bunch of other fields
   //...
   //..
   //.
} 
```

到以下类（视图模型）：

```
public class Destination {
   public MyClass1 A;
   public MyClass2 B;
} 
```

其中 MyClass1、MyClass2 定义如下：

```
public class MyClass1 {
   public int x;
   public string y;
   public bool z;
}

public class MyClass2 {
   public int a;
   public int b;
   public int c;
} 
```

Automapper可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T18:22:38.493

刚刚测试了这个，它可以独立工作......

```
 Mapper.CreateMap<Source, MyClass1>();
        Mapper.CreateMap<Source, MyClass2>();

        Mapper.CreateMap<Source, Destination>()
            .ForMember(x => x.A, m => m.MapFrom(p => p))
            .ForMember(x => x.B, m => m.MapFrom(p => p));

        var source = new Source() { a = 1, b = 2, c = 3, x = 4, y = "test", z = true };
        var destination = new Destination() { A = new MyClass1(), B = new MyClass2() };
        Mapper.Map<Source, Destination>(source, destination); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:13:10.810

Automapper 自动处理展平[，](http://www.codeproject.com/Articles/61629/AutoMapper)这似乎是您在这里所要求的。但是，它与通常的方式相反，因此它可能会窒息。如果是这样，您可以使用单独`.ForMember()`的映射来处理它。

在您的情况下，它看起来类似于以下内容：

```
Mapper.CreateMap<Source, Destination>()
    .ForMember(cv => cv.Destination, m => m.MapFrom(
    s => new Class1(s.x, s.y, s.z)) 
```

我现在没有能力在环境中运行它，所以请指出任何语法错误，我会纠正它们。

# php - 仅在输入密码后才在特定页面上显示文本（在 WP 密码保护页面上）

> ID：13163726
> 
> 赞同：0
> 
> 时间：2012-10-31T17:39:59.417
> 
> 标签：php, wordpress, if-statement, widget

如果用户在 X 页面上并且在输入页面密码（wordpress）后，我正在尝试显示文本：

```
<?php if ( is_page('1361') ) && if ( !post_password_required() ) { echo 'TEST'; } ?> 
```

不幸的是没有显示..我做错了什么？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:44:24.030

您的脚本中有一些错误

```
 if ( is_page('1361') ) && if ( !post_password_required() ) { echo 'TEST'; } 
                      ^     ^ ^ 
```

它应该是

```
if (is_page('1361')  && !post_password_required()) {
    echo 'TEST';
} 
```

或者

```
if (is_page('1361')) {
    if (! post_password_required()) {
        echo 'TEST';
    }
} 
```

**我的建议**： [获取一个 PHP IDE](https://stackoverflow.com/questions/116292/what-is-the-best-ide-for-php) ，您将很容易发现这些简单的错误

# javascript - 使用 Windows Azure 通知服务在 HTML5 中的多个用户会话之间进行通信

> ID：13163734
> 
> 赞同：0
> 
> 时间：2012-10-31T17:41:10.590
> 
> 标签：javascript, jquery, html, azure

我们正在构建一个 HTML5 应用程序，我们需要两个用户之间的协作，就像在 Google Docs 中两个用户可以同时编辑文档并且他们可以看到彼此的变化一样。

在我们的例子中，文档永远不会存储在服务器端。我们只会在 XBOX、Windows PC（7 或 8）和 Windows Phone（7.5 和 8）上的 IE10 中运行 HTML5 应用程序。

用户将在同一个 WiFi 网络上。

我们在哪里可以找到一些示例来了解我们如何在此场景中使用 Windows Azure 服务/移动服务。

谢谢，纳夫尼特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:56:26.773

您可能正在查看类似这样的内容：http: [//laktek.com/2010/05/25/real-time-collaborative-editing-with-websockets-node-js-redis/](http://laktek.com/2010/05/25/real-time-collaborative-editing-with-websockets-node-js-redis/)

对于 HTML5，您可以使用 Websockets...可以使用 Node.js 在 Azure 中实现，也可以使用 SignalR (http://signalr.net/) 在 ASP.NET 中抽象 websockets/polling 并在 Windows Azure 中运行。

# c - 声明结构时出现语法错误

> ID：13163738
> 
> 赞同：-1
> 
> 时间：2012-10-31T17:41:29.730
> 
> 标签：c

这是我的代码有语法错误。

```
struct cell{
        bool in;
        bool up;
        bool left;
        int prevx, prevy;
};
cell MAZE[xsize][ysize]; 
```

这段对我来说看起来不错的代码在“单元格”行返回了这个错误：

```
error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before 'MAZE' 
```

你们中的任何人都可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T17:44:02.833

声明结构的正确方法是：

```
struct cell MAZE[xsize][ysize]; 
```

你也可以这样做：

```
typedef struct {
    bool in;
    bool up;
    bool left;
    int prevx, prevy;
} cell;

cell MAZE[xsize][ysize]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:44:31.127

在 C 中，您必须编写：

```
struct cell MAZE[xsize][ysize]; 
```

在 C++ 中，有一个“自动 typedef”，但在 C 中没有。

你也可以写：

```
typedef struct cell cell; 
```

那么您的声明（不是初始化）将是正确的。

通常，像 MAZE 这样的全大写名称是为 C 中的宏保留的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:51:10.043

你也可以这样做。

```
struct cell{
        bool in;
        bool up;
        bool left;
        int prevx, prevy;
}MAZE[xsize][ysize]; 
```

# rest - 如何通过 HTTP NTLM 与 CentOS 中的 Restlet 进行身份验证？

> ID：13163740
> 
> 赞同：2
> 
> 时间：2012-10-31T17:41:45.387
> 
> 标签：rest, dynamics-crm-2011, restlet

我在通过 REST 在 CRM Dynamics 中进行身份验证时遇到问题。仅当我尝试从具有 CentOS 的机器（在 Ubuntu 和 Windows 中工作）连接时才会出现此问题。

```
2012-10-31 14:55:00,940 WARNING [org.restlet.engine.security.AuthenticatorUtils] (schedulerFactoryBean_Worker-1) Couldn't find any helper support the HTTP_NTLM challenge scheme.
2012-10-31 14:55:01,005 ERROR [com.zenvia.wrapper.ServiceWrapper] (schedulerFactoryBean_Worker-1) Can't get the metadata for http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/ (response's status: Unauthorized (401) - Unauthorized)
2012-10-31 14:55:01,007 INFO  [com.zenvia.wrapper.ServiceWrapper] (schedulerFactoryBean_Worker-1) Get the metadata for http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/ at http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/$metadata
2012-10-31 14:55:01,010 INFO  [org.restlet.ext.net.HttpClientHelper] (schedulerFactoryBean_Worker-1) Starting the HTTP client
2012-10-31 14:55:01,156 WARNING [org.restlet.engine.security.AuthenticatorUtils] (schedulerFactoryBean_Worker-1) Couldn't find any helper support the HTTP_Negotiate challenge scheme.
2012-10-31 14:55:01,158 WARNING [org.restlet.engine.security.AuthenticatorUtils] (schedulerFactoryBean_Worker-1) Couldn't find any helper support the HTTP_NTLM challenge scheme.
2012-10-31 14:55:01,161 ERROR [com.zenvia.wrapper.ServiceWrapper] (schedulerFactoryBean_Worker-1) Can't get the metadata for http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/ (response's status: Unauthorized (401) - Unauthorized)
2012-10-31 14:55:01,163 INFO  [com.zenvia.wrapper.ServiceWrapper] (schedulerFactoryBean_Worker-1) Get the metadata for http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/ at http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/$metadata
2012-10-31 14:55:01,167 INFO  [org.restlet.ext.net.HttpClientHelper] (schedulerFactoryBean_Worker-1) Starting the HTTP client
2012-10-31 14:55:01,317 WARNING [org.restlet.engine.security.AuthenticatorUtils] (schedulerFactoryBean_Worker-1) Couldn't find any helper support the HTTP_Negotiate challenge scheme.
2012-10-31 14:55:01,319 WARNING [org.restlet.engine.security.AuthenticatorUtils] (schedulerFactoryBean_Worker-1) Couldn't find any helper support the HTTP_NTLM challenge scheme.
2012-10-31 14:55:01,322 ERROR [com.zenvia.wrapper.ServiceWrapper] (schedulerFactoryBean_Worker-1) Can't get the metadata for http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/ (response's status: Unauthorized (401) - Unauthorized)
2012-10-31 14:55:01,325 INFO  [com.zenvia.wrapper.ServiceWrapper] (schedulerFactoryBean_Worker-1) Get the metadata for http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/ at http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/$metadata
2012-10-31 14:55:01,328 INFO  [org.restlet.ext.net.HttpClientHelper] (schedulerFactoryBean_Worker-1) Starting the HTTP client
2012-10-31 14:55:01,512 WARNING [org.restlet.engine.security.AuthenticatorUtils] (schedulerFactoryBean_Worker-1) Couldn't find any helper support the HTTP_Negotiate challenge scheme.
2012-10-31 14:55:01,514 WARNING [org.restlet.engine.security.AuthenticatorUtils] (schedulerFactoryBean_Worker-1) Couldn't find any helper support the HTTP_NTLM challenge scheme.
2012-10-31 14:55:01,517 ERROR [com.zenvia.wrapper.ServiceWrapper] (schedulerFactoryBean_Worker-1) Can't get the metadata for http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/ (response's status: Unauthorized (401) - Unauthorized)
2012-10-31 14:55:01,519 WARNING [org.restlet.ext.odata.Query] (schedulerFactoryBean_Worker-1) Can't parse the content of http://<HOST>:5555/zenvia/xrmservices/2011/OrganizationData.svc/zenvia_operacaoSet?$filter=statuscode/Value eq 1 and zenvia_tipoOperacao/Value eq 300000005: java.lang.Exception: Can't execute the query without the service's metadata. 
```

有人知道这些警告（“找不到任何支持 HTTP_Negotiate 质询方案的助手。”和“找不到任何支持 HTTP_NTLM 质询方案的助手。”）？

```
Client: CentOS 5.6
Client: Windows 7 SP1
Server AD: Windows Server 2008 R2
CRM Dynamics 2011
Restlet 2.1
JBoss 7.1.1
Java SE 6 
```

蒂亚戈·马丁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:34:26.507

您应该使用网络连接器并调用：

```
// Create your own authenticator
Authenticator a = new Authenticator() {
    public PasswordAuthentication getPasswordAuthentication() {
        return (new PasswordAuthentication("<your account>", "<your password>".toCharArray()));
    }
};

// Sets the default Authenticator
Authenticator.setDefault(a); 
```

此处提供说明： [http ://wiki.restlet.org/docs_2.0/13-restlet/27-restlet/46-restlet/112-restlet/364-restlet.html](http://wiki.restlet.org/docs_2.0/13-restlet/27-restlet/46-restlet/112-restlet/364-restlet.html)

# android - Android中的软键盘事件监听器

> ID：13163743
> 
> 赞同：5
> 
> 时间：2012-10-31T17:41:57.690
> 
> 标签：android, cordova, keyboard

我正在制作 android phonegap 应用程序。
我在 CordovaWebView 下设置了 editText。我想获得键盘显示/隐藏事件。
尝试计算视图高度，但失败。当 editText 具有焦点时，将显示键盘。但是 CordovaWebView 上升了，并且视图大小没有改变。所以我无法获得键盘显示事件。

为什么视图会上升？

这是我的部分代码。

主活动 onCreateMethod()

```
int layoutId = R.layout.blank;
layout = new LinearLayout(this);
setContentView(layoutId);
layout.setOrientation(LinearLayout.VERTICAL);

textedit = ((Activity) this).getLayoutInflater().inflate(R.layout.main,null);

layout.addView((View) appView.getParent());
layout.addView(textedit);

layout.getChildAt(0).setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1));
setContentView(layout); 
```

资源/布局/空白.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
</LinearLayout> 
```

资源/布局/main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <EditText
    android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
</LinearLayout> 
```

请帮忙....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:36:16.760

Have you tried listening for the "showkeyboard" and "hidekeyboard" events? They should be fired every time the soft keyboard is show/hidden.

```
document.addEventListener("showkeyboard", function() {
    console.log("Yay the keyboard is here");
}, false);
document.addEventListener("hidekeyboard", function() {
    console.log("Boo the keyboard is gone");
}, false); 
```

# python - python信号，中断系统调用

> ID：13163744
> 
> 赞同：4
> 
> 时间：2012-10-31T17:41:59.717
> 
> 标签：python, signals

我正在用python编写一个程序。我希望从标准输入读取，并处理 sigchld。我想在输入时处理任何一个输入，而不需要旋转（推测性地对输入进行采样）。

我无法在每次通话时捕捉到被信号中断的系统调用。

我会以错误的方式解决这个问题吗？我可以在不尝试/例外的情况下让它工作吗？

到目前为止，我主要担心的不是 try/except 我在代码中的尝试。但是在程序中的任何其他代码行中，我都需要数百个。对我来说，它似乎不是模块化的。

这是一些测试代码：

```
#!/usr/bin/python

from time import sleep
import select
import signal
import fcntl
import os
import sys

pipe_r, pipe_w = os.pipe()
flags = fcntl.fcntl(pipe_w, fcntl.F_GETFL, 0)
flags = flags | os.O_NONBLOCK
fcntl.fcntl(pipe_w, fcntl.F_SETFL, flags)

signal.signal(signal.SIGCHLD, lambda x,y: None)
signal.signal(signal.SIGALRM, lambda x,y: None)
signal.siginterrupt(signal.SIGCHLD,False) #makes no difference
signal.siginterrupt(signal.SIGALRM,False) #makes no difference
signal.set_wakeup_fd(pipe_w)
signal.setitimer(signal.ITIMER_REAL, 2, 2)

poller = select.epoll()
poller.register(pipe_r, select.EPOLLIN)
poller.register(sys.stdin, select.EPOLLIN)

print "Main screen turn on"
while True:
    events=[]
    try:
        events = poller.poll()
        try:
            for fd, flags in events:
                ch=os.read(fd, 1)
                if fd==pipe_r:
                    sys.stdout.write( "We get Signal" )
                if fd==sys.stdin.fileno():
                    sys.stdout.write( ch )
                sys.stdout.flush()
        except IOError as e:
            print "exception loop" + str(e)
    except IOError as e:
        print "exception poll" + str(e) 
```

版本：

```
#python --version
python 2.7.3
#uname -a
Linux richard 3.2.0-32-generic #51-Ubuntu SMP Wed Sep 26 21:33:09 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T17:59:08.207

是的，你正在以正确的方式解决这个问题。（好吧，我可能会使用`select`or`poll`而不是`epoll`，因为这样您的代码将可移植到非 Linux 平台......）

我在这里假设轮询两个或多个 fds 对您的设计来说是必不可少的。如果您只添加了 epoll 循环来处理信号，那么这部分不是必需的；你所需要的只是一个简单的围绕`read`调用的 EINTR 循环。但是，一旦你有一个用于其他目的的管道，将它作为信号唤醒管道连接是一件合理的事情，然后你和你所做的一切都隐含在从多个 fd 中读取。

无论哪种方式，你真的无法避免`try`障碍。（这并不完全正确。您始终*可以*`sigblock`使用/等阻止信号。`sigprocmask`它们不在 Python 的`signal`模块中，但您始终可以使用`ctypes`它们。但是您通常需要稍微多一点的代码，使用`try`/`finally`而不是`try`/ `except`，并且您的代码变得更难以调试，因此沿着这条路走下去没有多大意义，除非在少数情况下您正在处理无法中断且必须被 sigblocked 的代码。）

许多系统调用可以被信号中断，这是 POSIX 的一个标准特性，在这种情况下，它们会因 EINTR 而失败。

大多数特定平台将可以中断的调用列表限制为比 POSIX 允许的更小的集合，因此您必须查看 linux 文档以确切确定什么是和不安全的，但`epoll`方法系列，以及///`read`和`recv`朋友，几乎可以肯定是不安全的。`write``send`

照常使用`siginterrupt`可能会有所帮助，但不能解决问题。特别是，不需要调用来重新启动而不是中断，并且在某些情况下，它们需要中断或完成部分结果而不是重新启动。我很确定`select`并且`poll`永远不会重新启动，所以很有可能这个`epoll` 家庭也不是，但你必须检查一下。无论如何，大多数 BSD 衍生产品都默认重启，所以如果 linux 是相同的，你不会改变任何东西。

Python 可以用隐式 EINTR 循环来包装所有这些，我相信一些高级方法（如`sendall`）会这样做，但低级方法不会。但是你可以自己把事情包起来。例如（在我的脑海中，未经测试）：

```
def dopoll(poller):
    while True:
        try:
            return poller.poll()
        except IOError as e:
            if e.errno != EINTR:
                raise 
```

然后，无论您会打电话到哪里，都改为`poll`打电话。`dopoll`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T12:23:03.933

我编写了一个 python 库，将信号呈现为流，因此我可以使用 select/poll/epoll 等。它使用 libc（Gnu C 库）来完成艰苦的工作。希望它是有用的。

[https://github.com/richard-delorenzi/pysigstream](https://github.com/richard-delorenzi/pysigstream)

如果你想改进它，那么你可以分叉它，并请发送一个拉取请求。

# c# - 当 Provider 实现有依赖关系时如何使用 Unity 和 Provider 模式

> ID：13163747
> 
> 赞同：1
> 
> 时间：2012-10-31T17:42:21.057
> 
> 标签：c#, dependencies, unity-container, provider

我正在使用[提供者模式](http://dotnetslackers.com/articles/designpatterns/HowToWriteAProviderModel.aspx)和 Unity。

这是典型的提供者实现。我有`SomeProvider`作为抽象基础提供者的抽象方法以及实例化`defaultProvider`.

```
public abstract class SomeProvider : ProviderBase
{
    #region provider boilerplate

    private const string PROVIDER_NAME = "someProvider";
    private static volatile SomeProvider defaultProvider = null;
    public static SomeProvider Provider
    {
        get { return defaultProvider; }
    }
    private static object providerLockObject = new object();
    static SomeProvider()
    {
        LoadProvider();
    }
    private static void LoadProvider()
    {
        if (defaultProvider == null)
        {
            lock (providerLockObject)
            {
                if (defaultProvider == null)
                {
                    // exception handling omitted for brevity
                    var section = ConfigurationManager.GetSection(PROVIDER_NAME)
                        as BaseProviderConfigurationSection;
                    defaultProvider = ProvidersHelper.InstantiateProvider(
                        section.Providers[section.DefaultProvider], typeof(SomeProvider)) as SomeProvider;
                }
            }
        }
    }

    protected SomeProvider() { }

    #endregion

    #region abstract methods

    public abstract bool DoSomething();

    #endregion
} 
```

这是`ASomeProvider`实现的`SomeProvider`。请注意，`ASomeProvider`具有依赖性`ADependency`但`SomeProvider`没有。

```
public class ASomeProvider : SomeProvider
{
    #region provider boilerplate

    private string name;
    public override string Name
    {
        get { return name; }
    }

    public override void Initialize(string name, NameValueCollection config)
    {
        this.name = name;
        base.Initialize(name, config);
    }

    #endregion

    // Provider pattern needs parameterless ctor and calls this
    public ASomeProvider() { }
    // constructor injection
    public ASomeProvider(ADependency aDependency)
    {
        this.ADependency = aDependency;
    }

    [Dependency]
    public SomeDependency ADependency { get; set; }

    #region methods

    public override void DoSomething()
    {
        // do something
    }

    #endregion
}

class SomeDependency {} 
```

我`ASomeProvider`在业务层中使用如下：

```
public class SomeBusinessLayer
{
    public SomeProvider someProvider;

    public SomeBusinessLayer(SomeProvider someProvider)
    {
        this.someProvider = someProvider;
    }

    #region methods
    public bool DoSomethingWrapper()
    {
        return someProvider.DoSomething();
    }
    #endregion
} 
```

我有`BusinessLayerFactory`使用 Unity 连接对象并返回对象的工厂，如下所示：

```
public static class BusinessLayerFactory
{
    private static UnityContainer container;

    private static void WireUp()
    {
        container = new UnityContainer();

        container.RegisterInstance(SomeProvider.Provider);
        container.RegisterInstance(new SomeDependency());
        container.RegisterType<SomeBusinessLayer>(new ContainerControlledLifetimeManager());
    }
    public static SomeBusinessLayer SomeBusinessLayer_Unity
    {
        get
        {
            return container.Resolve<SomeBusinessLayer>();
        }
    }
    public static SomeBusinessLayer SomeBusinessLayer_Self()
    {
        var asomeProvider = SomeProvider.Provider as ASomeProvider;
        if (asomeProvider != null && asomeProvider.ADependency == null)
            asomeProvider.ADependency = new ADependency();
        return new SomeBusinessLayer(SomeProvider.Provider);
    }
} 
```

我遇到的问题是，当我解决 get 时`SomeBusinessLayer`，`someProvider`它的依赖项`ADependency`为 null。

```
var someBusinessLayer = BusinessLayerFactory.SomeBusinessLayer_Unity; 
```

`((ASomeProvider)someBusinessLayer.someProvider).ADependency`是`null`。

原因是提供者模式使用辅助方法`ProvidersHelper.InstantiateProvider(ProviderSettings providerSettings, Type type)`来实例化默认提供者，而不是通过 Unity 的`Resolve<T>()`方法。

我可以考虑在没有 Unity 的情况下执行此操作，如我在`SomeBusinessLayer_Self`where I new `ADependency`if中所示，`null`但只是想知道 Unity 是否以及如何处理此问题。

方法注入或Ctor注入对我来说很好。

我该如何解决这个问题并让 Unity 和 Provider 模式一起工作？我使用 Unity 的主要原因是在工厂中连接对象。

我没有使用 MVC。

**更新：**

**要解决此问题：** . 给[@seth-flowers的小费](https://stackoverflow.com/users/444610/seth-flowers)

如果没有明确的演员表，我想不出办法`container.BuildUp<ASomeProvider>(aSomeProvider)`。

```
container.RegisterInstance(new SomeDependency());

//this does not build up the object with dependency
container.BuildUp(SomeProvider.Provider);
//this works and does build up
var aSomeProvider = SomeProvider.Provider as ASomeProvider;
if(aSomeProvider != null)
    container.BuildUp<ASomeProvider>(aSomeProvider);
//compile error
container.BuildUp<ASomeProvider>(SomeProvider.Provider);

container.RegisterInstance(SomeProvider.Provider);

container.RegisterType<SomeBusinessService>(new ContainerControlledLifetimeManager()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:01:56.517

难道你不能在你的方法中使用[UnityContainer.BuildUp](http://msdn.microsoft.com/en-us/library/ee651459.aspx)来充实你的实例`BusinessLayerFactory.WireUp`的依赖关系吗？`SomeProvider.Provider`您的对象仍将通过您的提供者实现构建，但将通过统一进行依赖注入。

例如：

```
private static void WireUp()
{
    container = new UnityContainer();

    container.RegisterInstance(SomeProvider.Provider);
    container.RegisterInstance(new SomeDependency());
    container.RegisterType<SomeBusinessLayer>(
        new ContainerControlledLifetimeManager());

    container.BuildUp<ASomeProvider>(SomeProvider.Provider as ASomeProvider);
} 
```

[BuildUp](http://msdn.microsoft.com/en-us/library/ee651459.aspx)的文档说明如下：

> 当您不控制实例的构造（例如，通过 XAML 创建的 ASP.NET 页面或对象）但仍希望执行属性和其他注入时，此方法很有用。

# windows-8 - Windows 8 应用商店应用容器内的桌面应用

> ID：13163751
> 
> 赞同：2
> 
> 时间：2012-10-31T17:42:39.077
> 
> 标签：windows-8, windows-runtime, windows-store-apps, desktop-application

是否可以将 Metro 应用程序创建为包含传统桌面应用程序的*容器屏幕？*

我正在尝试找出一种方法来强制某些应用程序与新界面无缝运行，从而无需每次都切换到桌面。

有没有人想象有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:54:31.910

如果您在 Citrix 工作，也许您可​​以在窗口内进行某种远程桌面会话...

# delphi - 进入项目选项的 RAD Studio 2010 上的访问冲突

> ID：13163754
> 
> 赞同：0
> 
> 时间：2012-10-31T17:42:51.603
> 
> 标签：delphi, delphi-2010, access-violation

也许任何人都可以告诉我们为什么会发生这种违规行为。

我们使用 Emabrcadero RAD Studio 2010。有时，项目已损坏，我们无法进入项目选项。如果我们尝试进入，它会显示下一条错误消息：

```
Access violation at address 00000000\. Read of address 00000000 
```

如果我们再次尝试输入它，它会显示：

```
Access violation at address 209931F1 in module 'coreide140.bpl'. Read of address 00000000 
```

从这一点开始，所有项目都会抛出相同的错误，直到我们重新启动 IDE。当我们重新启动它时，项目工作正常，除了损坏的项目。我们找到的唯一解决方案是创建一个新项目并将单元复制到那里（太乏味了）。

今天，它发生在一个特定文件夹中的所有项目上（其他时候它只发生在一个项目上）。

任何人都知道为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:53:53.780

尝试以下步骤：

1.  卸载所有第三方组件 - 一个一个。卸载每个组件后，检查问题是否仍然存在。这可以缩小查找故障组件的范围（如果这是当然的问题）
2.  安装 madExcept / EurekaLog。它们与 IDE 集成。重新启动 IDE。打开一些项目的选项。如果错误仍然存​​在，您可以查看调用堆栈并最终找到问题的原因
3.  使用[SysInternal 的进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)并在打开项目的选项和您看到的异常之间捕获事件。分析转储 - 可能存在错误或损坏的 dll/bpl
4.  修复IDE安装
5.  [在 Embarcadero 打开支持案例](https://support.embarcadero.com/Forms/product/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T11:36:55.667

启用 Windows 防火墙服务。我不知道为什么，但它解决了同样的问题。

# macos - 如何使用applescript发出咆哮通知？

> ID：13163759
> 
> 赞同：1
> 
> 时间：2012-10-31T17:43:15.770
> 
> 标签：macos, growl, growlnotify

我正在使用一个脚本来更新我的 SVN 工作副本。

我已经安装了咆哮。一旦我的脚本完成更新我的 SVN 工作副本，我想发出 Growl 通知。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:53:21.533

在 Google 和 Growl 的网站上进行一点搜索就可以解决您的问题。

[点击这里](http://growl.info/documentation/applescript-support.php)了解它。

或者直接将这段代码复制粘贴到你的苹果脚本编辑器中，看看它是如何工作的。

```
tell application "System Events"
    set isRunning to (count of (every process whose bundle identifier is "com.Growl.GrowlHelperApp")) > 0
end tell

if isRunning then
    tell application id "com.Growl.GrowlHelperApp"
        -- Make a list of all the notification types 
        -- that this script will ever send:
        set the allNotificationsList to ¬
            {"Test Notification", "Another Test Notification"}

        -- Make a list of the notifications 
        -- that will be enabled by default.      
        -- Those not enabled by default can be enabled later 
        -- in the 'Applications' tab of the Growl preferences.
        set the enabledNotificationsList to ¬
            {"Test Notification"}

        -- Register our script with growl.
        -- You can optionally (as here) set a default icon 
        -- for this script's notifications.
        register as application ¬
            "Growl AppleScript Sample" all notifications allNotificationsList ¬
            default notifications enabledNotificationsList ¬
            icon of application "Script Editor"

        --       Send a Notification...
        notify with name ¬
            "Test Notification" title ¬
            "Test Notification" description ¬
            "This is a test AppleScript notification." application name "Growl AppleScript Sample"

        notify with name ¬
            "Another Test Notification" title ¬
            "Another Test Notification :) " description ¬
            "Alas — you won't see me until you enable me..." application name "Growl AppleScript Sample"

    end tell
end if 
```

我希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:28:57.277

我真的更喜欢在脚本中使用 GrowlNotify (http://growl.info/extras.php#growlnotify)。这是通过 AppleScript 咆哮的一种更简单、更直接的方式。

# javascript - WebSocket - “流失” - 事件？

> ID：13163760
> 
> 赞同：0
> 
> 时间：2012-10-31T17:43:27.160
> 
> 标签：javascript, stream, websocket

许多 node.js 流，包括一些 WebSocket 实现，都有“drain”事件，它通知程序排队的数据已经发送/写入。

我想知道是否有可能在客户端也获得此事件。

我在[https://github.com/VanCoding/channel.js](https://github.com/VanCoding/channel.js)创建库“channel.js”，它需要这个事件知道何时可以发送新数据而无需排队。

有任何想法吗？

# ios - iPhone/iPod Touch 将应用程序上传到应用商店时出错

> ID：13163764
> 
> 赞同：0
> 
> 时间：2012-10-31T17:43:45.397
> 
> 标签：ios, upload, app-store

> **可能重复：**
> [iOS 6 Xcode 4.5 不支持架构 armv7s](https://stackoverflow.com/questions/12832232/ios-6-xcode-4-5-unsupported-architecture-armv7s)

我打算将我的应用程序上传到应用商店，但是当我发送它时，我收到以下消息：

图片：http: [//i.stack.imgur.com/dQMwh.png](https://i.stack.imgur.com/dQMwh.png)

有人知道这是什么吗？对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:47:48.600

听起来您可能正在使用旧版本的库。我建议检查您正在使用的库，并获取最新版本。ARMv7s 指令集用于新的 iPhone 5 处理器 (A6)，我相信是第 5 代 iPod Touch。检查项目中的架构设置以确保其设置正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:22:43.860

尝试继续项目属性。

选择你的目标 点击 Build Settings On Architectures，双击 Valid Architectures。然后去掉armv7s，只留下armv7。

# python - Python中的数字出现计数器

> ID：13163767
> 
> 赞同：2
> 
> 时间：2012-10-31T17:43:53.743
> 
> 标签：python, algorithm, python-3.x

我对编程相当陌生，并且一直在开发一个程序来计算 0-9 中的每个值在数字字符串中出现的次数（该程序必须使用调用它的函数和主函数）。如果用户输入数字 123512378，我希望它告诉我 1 出现 2 次 2 出现 2 次...... 8 出现 1 次等等。现在我正在尝试将一个字符串传递给一个函数，然后返回一个带有数字的列表发生的顺序。但是我的只是返回我在开始时生成的空列表。这是我的代码：

```
def countdigits(aString,Result):
  countValue=0
  while countValue>=9:
    Result[countValue]=(aString.count(str(countValue)))
    countValue=countValue+1
  return Result

def main():
  emptyList = 10 * [0]
  numbers=str(input("Pleas enter a string of numbers: "))
  print(countdigits(numbers,emptyList))

main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:46:29.557

使用`while countValue<=9:`. 你用了一个`>=`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:30:19.863

而不是 while 你可以使用

```
for i in range(10): 
    Result[i]=(aString.count(str(i))) 
```

或者干脆

```
return [aString.count(str(i)) for i in range(10)] 
```

但这看起来是一种非常低效的方法（**请参见下面的编辑**），您循环了 10 次（aString.count 必须搜索整个字符串），但是您可以通过只循环一次并在进行时计数来计数，例如

```
import collections
def countdigits(aString):
  count_map = collections.defaultdict(int)
  for c in aString:
      count_map[c] += 1
  return count_map

print countdigits("123456789") 
```

输出：

```
defaultdict(<type 'int'>, {'1': 1, '3': 1, '2': 1, '5': 1, '4': 1, '7': 1, '6': 1, '9': 1, '8': 1}) 
```

如果你想要它可以很容易地转换为数组，`Result`但我认为没有任何优势

编辑：看起来第二个版本应该很快，因为它循环一次但它不是，`list.count`在 C 中并且超级快并且会进行快速搜索，但是在 python 中循环太慢，所以 timeit 显示谁是真正的赢家

```
import collections

def countdigits1(aString):
    return [aString.count(str(i)) for i in range(10)]

def countdigits2(aString):
    count_map = collections.defaultdict(int)
    for c in aString:
        count_map[c] += 1
    return count_map

import timeit
text = "0123456789"*10
print timeit.timeit('countdigits1("%s")'%text, setup="from __main__ import countdigits1", 
                    number=10000)
print timeit.timeit('countdigits2("%s")'%text, setup="from __main__ import countdigits2", 
                    number=10000) 
```

输出：

```
0.106333017349
0.952333927155 
```

第二个版本慢了 9 倍以上。

# python - 正则表达式在哈希符号处失败

> ID：13163772
> 
> 赞同：2
> 
> 时间：2012-10-31T17:44:06.380
> 
> 标签：python, regex, bottle

我正在尝试使用@route 匹配任何字母、符号和/或特殊字符的字符串。

这是我所拥有的：

```
@route('/create/<mypath:re:[#!@$%^&*()\_\-.,A-Za-z0-9//:]+>') 
```

问题是一旦达到哈希符号，字符串的其余部分就会被忽略。

例如： `test123!!!.....he#llo!`将只匹配：`test123!!!.....he`

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T17:47:54.060

好吧，这是我问题的答案：http: [//osdir.com/ml/python-bottle-general/2011-11/msg00012.html](http://osdir.com/ml/python-bottle-general/2011-11/msg00012.html)

# multithreading - Is it possible to break on thread exit with specific error code?

> ID：13163785
> 
> 赞同：10
> 
> 时间：2012-10-31T17:44:53.670
> 
> 标签：multithreading, visual-studio-2008, visual-studio-debugging, exit-code

I was wondering if it was possible to configure visual studio 2008 debugger to stop execution when a thread exits with a precise error code (or at least any non-zero value). My app use a tremendous number of threads, so it's impossible to track them all manually.

Is there a way to tell VS2008 to break when ANY thread in the program hits "exit(X);" (X being different from 0) and display source ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T18:26:07.687

Yes, set a breakpoint in the function `_RtlExitUserThread@4`, and add a condition of `*(int*)(ESP+4) == 42` to test if the exit status is a particular value (42, in this example); for 64-bit programs, use `ESP+8` instead of `ESP+4`.

However, if the thread exited by returning from its main thread procedure (the usual case) instead of directly calling `ExitThread` or one of its wrappers, then you won't have any information about what thread it was or what caused it to exit other than the exit status and the thread ID.

Note: The function name `_RtlExitUserThread@4` is an implementation detail that might change in future versions of Windows; `_RtlExitUserThread@4` is the name on Windows 7\. To find out what the actual is on your system, run `dumpbin /exports C:\Windows\system32\kernel32.dll` and look for the name that `ExitThread` maps to.

# ios - 我的应用程序中的核心数据问题

> ID：13163789
> 
> 赞同：1
> 
> 时间：2012-10-31T17:45:05.073
> 
> 标签：ios, core-data

我正在制作一个非常简单的应用程序来学习核心数据的概念。在这个应用程序中，我的目标是在 tableView 中显示人员列表。

我从一个空应用程序开始，并确保核心数据和 ARC 被勾选。我还设法创建了 *.xcdatamodeld、*.storyboard 和 *.h/m 文件来对视图/功能进行编程。

在应用程序中，如果用户单击`+`导航栏上的按钮`MainScreenViewController`，应用程序会打开另一个视图控制器（`InputDetailsViewController`），让用户输入姓名、电话号码、电子邮件和标签。`MainScreenViewController`当用户单击 Save 按钮时，应用程序会保存数据并在前一个 viewController ( )的表格上显示输入的信息。

为了管理数据，我创建了两个实体：`BasicInfo`和`DetailedInfo`. `BasicInfo`有两个属性：`name`和`phone`和关系：`details`连接到目的地`DetailedInfo`。同理，`DetailedInfo`有两个属性：`email`and`tag`和关系：`basic`connected to `BasicInfo`。一旦定义了这些属性和关系，我`NSManagedObject`就为每个实体创建了子类。

我还设法创建了在上述属性中输入信息的字段。但是当我按下保存按钮时`InputDetailsViewController`，我收到以下消息：

`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name 'BasicInfo''`

我的代码的相关部分如下：

InoutDetailsViewController.h：

```
#import <UIKit/UIKit.h>
#import "BasicInfo.h"
#import "DetailedInfo.h"

@interface InputDetailsViewController : UIViewController

@property (weak, nonatomic) IBOutlet UITextField *nameField;
@property (weak, nonatomic) IBOutlet UITextField *phoneField;
@property (weak, nonatomic) IBOutlet UITextField *emailField;
@property (weak, nonatomic) IBOutlet UITextField *tagField;
@property (nonatomic,strong) NSManagedObjectContext* managedObjectContext;

- (IBAction)closeKeyboard;
- (IBAction)saveFields; 
```

InputDetailsViewController.m:

```
#import "InputDetailsViewController.h"

@interface InputDetailsViewController ()
@end

@implementation InputDetailsViewController

@synthesize nameField, phoneField, emailField, tagField;
@synthesize managedObjectContext;

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (IBAction)closeKeyboard
{
    [nameField resignFirstResponder];
    [phoneField resignFirstResponder];
    [emailField resignFirstResponder];
    [tagField resignFirstResponder];
}

- (IBAction)saveFields
{
    if (self.managedObjectContext == nil) {
    NSLog(@"NSManagedObjectContext is nil");
    }

    BasicInfo *basicInfo = (BasicInfo *)[NSEntityDescription insertNewObjectForEntityForName:@"BasicInfo" inManagedObjectContext:managedObjectContext]; //*
    DetailedInfo *detailedInfo = (DetailedInfo *)[NSEntityDescription insertNewObjectForEntityForName:@"DetailedInfo" inManagedObjectContext:managedObjectContext]; //*

...
} 
```

@结尾

`//*`是应用程序抛出异常的地方。

为了找出问题所在，我做了以下工作：

1.  我将我的代码与 raywenderlich 教程（http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started 和其他 3 个教程）上的源代码进行了比较。
2.  通过使用方法中的语句检查是否`managedObjectContext`有`nil`任何机会。`if ()``saveFields`
3.  确保 xcdatamodeld 中的拼写和文件中的变量相同。

除此之外，我不知道如何找到错误或为什么我的应用程序突然终止。

我真诚地感谢您的意见。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:38:40.497

从评论部分：

这就是您收到错误的原因。您需要将 self.managedObjectContext 分配给 AppDelegate 中的 managedObjectContext。完成后，您的错误应该消失

# javascript - 滚动到相对于 ID 的位置

> ID：13163794
> 
> 赞同：1
> 
> 时间：2012-10-31T17:45:19.323
> 
> 标签：javascript, jquery, scroll

我需要做什么才能滚动到距离 ID X 像素的位置？例如，我想滚动到#ex 上方 200 像素。

```
<script> 
    $(document).ready(function(){

        $("#ko1").click( function(){
            $("html, body").animate({ scrollTop: $('#in').offset().top }, 1000 );
        });
        $("#ko2").click(function(){
            $("html, body").animate({ scrollTop: $('#ex').offset().top }, 1000);
        });
    });
 </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T17:50:06.270

```
$(document).ready(function(){

    $('#ko1').click(function () {

        $('html, body').animate({
            scrollTop: $('#in').offset().top - 200
        });

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:50:09.493

只需减去 200`offset().top`

# css - 水平对齐 2 个不同高度的 div 并保持在各自的列内换行

> ID：13163799
> 
> 赞同：1
> 
> 时间：2012-10-31T17:45:41.857
> 
> 标签：css

我需要将 2 个 div 浮动在一起，以便它们水平对齐。如果右侧的 div 较高，则它不应位于其下方，而应包裹在其下方。

```
<html>

<style>
#left, #right {float:left; border:1px solid black; margin:10px;}
</style>

<div id="container">

<div id="left">
this is an image, the hight and width can vary
</div>
<div id="right">
this div should never wrap underneath the image.  if it is higher than left image it needs to wrap under itself so the space directly beneath the image is respected
</div>

</div>
<div style='clear:both;'></div>

<hr>

<div id="left">
this is an image, the hight and width can vary
</div>
<div id="right">
this div should never wrap underneath the image.  if it is higher than left image it needs to wrap under itself so the space directly beneath the image is respected
</div>

</div>
<div style='clear:both;'></div>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:50:03.903

```
#left, #right {float:left; border:1px solid black; margin:10px; width:45%;} 
```

# ios - 横向模式下的 UIImagePicker - 如何旋转 UIAlertViews？

> ID：13163803
> 
> 赞同：1
> 
> 时间：2012-10-31T17:45:55.440
> 
> 标签：ios, xcode

在 iOS6 中，当设备处于横向模式时，如何在 UIImagePicker 顶部旋转 UIAlertViews？它们仅以纵向加载，但该应用程序仅是横向的。我必须手动旋转自定义 cameraOverlayView (UIView)，但我不知道如何使用警报来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:11:52.950

问题是 UIImagePickerController 只支持纵向模式：

**来自 Apple 文档** *UIImagePickerController 类仅支持纵向模式。此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改，但有一个例外。您可以将自定义视图分配给 cameraOverlayView 属性，并使用该视图来呈现附加信息或管理相机界面和代码之间的交互。*

So, when the picker is open, the device orientation is reported as portrait, and the UIAlertView are showed in portrait mode. 当然，使用一些“hack”你可以旋转 UIAlertView，但应用程序可能会在审查期间被拒绝。

唯一“合法”的方式是创建自己的图像选择器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:04:12.547

为此，您需要对该类进行子`UIImagePicker`类化。

```
@interface yourImagePicker :UIImagePicker 
{
}
@end 
```

并且您需要在实现中实现该`shouldAutoRotate`方法并仅返回横向模式

```
@implementation yourImagePicker 

- (BOOL)shouldAutorotate
{
    return [[UIDevice currentDevice] orientation] != UIInterfaceOrientationPortrait;
}
@end 
```

你需要创建`yourImagePicker`实例而不是`UIImagePicker`

# c# - 我可以在不使用 Microsoft Interop Assembly 的情况下创建 Microsoft Excel 文件吗？

> ID：13163805
> 
> 赞同：1
> 
> 时间：2012-10-31T17:45:58.163
> 
> 标签：c#, sql-server, ms-office, office-interop

> **可能重复：**
> [如何在不安装 Office 的情况下以编程方式创建、读取、编写 Excel？](https://stackoverflow.com/questions/1369361/how-can-i-programatically-create-read-write-an-excel-without-having-office-ins)

我可以在不使用 Microsoft Office 互操作程序集的情况下创建 Microsoft Excel 文件吗？我需要将 sql server 表中的所有值导出到 Excel 文件。总行数可以在 50000 到 1200000 行之间变化。我需要从我的 C#.net 代码生成 Excel 文件，我将在其中读取表的值。我唯一的限制是我不能使用 Microsoft Office 互操作程序集。

我不能使用 CSV，或者使用 HTML 表格技巧，因为一些文件将包含多个选项卡，其中每个选项卡将包含来自不同表格的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:49:26.617

Your best bet might be to just export your data in a CSV file. This is beneficial for a number of reasons:

1.  CSVs are generally smaller than excel workbooks (read: faster to create via code)
2.  Excel can open CSVs just like normal documents and edit them and such.
3.  It will be very simple to create a CSV using a few loops and some elbow grease in C#.

The only downfall to this is if you were somehow planning on formatting your data, especially before you got it into a workbook form.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:55:27.167

你可以使用这个：

[http://netoffice.codeplex.com/](http://netoffice.codeplex.com/)

特点是（但不仅是）：

*   包括 Office 版本 2000、2002、2003、2007、2010、2013 的所有功能。
*   没有依赖关系，没有互操作程序集，不需要 VSTO
*   在语法和语义上与 Microsoft 互操作程序集相同

# .net - System.Text.Encoding 类如何工作？

> ID：13163813
> 
> 赞同：0
> 
> 时间：2012-10-31T17:46:35.017
> 
> 标签：.net, character-encoding, mscorlib

在 .NET 中，有一个在 .NET 中调用的`System.Text.Encoding`类`mscorlib`。但是当你这样做时`System.Text.Encoding.ASCII`，你可以访问 ASCII 编码类。

起初，我认为这是一类中的一类：

```
class Encoding {
    class ASCII { ... }
    ...
} 
```

但令人困惑的是，您也可以使用`System.Text.ASCIIEncoding`来访问相同的功能。

无法反编译 .NET（因为 .NET Reflector 需要花钱，而且我不太了解 IL [所以没有 ildasm]），我无法理解这两个类是如何相等的。会是这样吗？

```
class ASCIIEncoding {
    internal ASCIIEncoding() { ... }
    /* static functions */
}
static class Encoding {
    public static readonly ASCIIEncoding ASCII = new ASCIIEncoding();
    ...
} 
```

这似乎是最有可能的方式，但函数原型是

```
public static Encoding ASCII { get; } 
```

返回派生自的类`Encoding`没有意义，因为 Encoding 是具有 Encoding 类型（ASCII、UTF-(7/8/16/32) 等）的类，所以这意味着`ASCIIEncoding`也需要这些变量，不是吗？

任何人都可以帮助消除这种困惑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:48:50.830

> 返回从 Encoding 派生的类没有意义，因为 Encoding 是具有 Encoding 类型（ASCII、UTF-（7/8/16/32）等）的类，因此这意味着 ASCIIEncoding 也需要这些变量，不？

不，因为`Encoding.ASCII`etc 是*静态*属性，可能由*静态*`ASCIIEncoding`字段支持（尽管这是一个实现细节 - 该属性每次都可以创建一个新实例，或者可能有一个它使用的静态内部字段等）。

就像这样：

```
public class BaseClass
{
    private readonly static BaseClass firstDerived = new FirstDerived();
    private readonly static BaseClass secondDerived = new SecondDerived();

    public static BaseClass First
    { 
        get { return firstDerived; } 
    }

    public static BaseClass Second
    { 
        get { return secondDerived; } 
    }
}

public class FirstDerived : BaseClass {}
public class SecondDerived : BaseClass {} 
```

这是完整的代码——尽管派生类实际上*做*任何事情都没有用。确保您了解其工作原理的每一点，然后将其应用于`Encoding`...

# ruby - 使用 RVM 安装 Ruby 后全局 gemset 不可见

> ID：13163814
> 
> 赞同：-1
> 
> 时间：2012-10-31T17:46:43.100
> 
> 标签：ruby, gem, rvm, gemset

我以通常的方式安装了 RVM：

```
curl -L https://get.rvm.io | bash -s stable --ruby 
```

在安装过程中显示了这些消息：

```
ruby-1.9.3-p286 - #configure
ruby-1.9.3-p286 - #download
(...)
ruby-1.9.3-p286 - #extract
ruby-1.9.3-p286 - #validate
ruby-1.9.3-p286 - #setup
'ruby' was not found, cannot install rubygems unless ruby is present (Do you have an RVM ruby installed & selected?)
Saving wrappers to '/home/rmaruszewski/.rvm/bin'.
ruby-1.9.3-p286 - #importing default gemsets (/home/rmaruszewski/.rvm/gemsets/)
Creating alias default for ruby-1.9.3-p286.
Recording alias default for ruby-1.9.3-p286.
Creating default links/files
Saving wrappers to '/home/rmaruszewski/.rvm/bin'. 
```

“'ruby' was not found”消息很可疑......

而且，当我打电话时`gem list`，列表是空的。

```
*** LOCAL GEMS *** 
```

但后来我打电话给`rvm use ruby@global`then `gem list`，我得到：

```
*** LOCAL GEMS ***

bundler (1.2.1)
rake (0.9.2.2)
rubygems-bundler (1.1.0)
rvm (1.11.3.5) 
```

所以，显然，我的“全局”gemset 在“default”gemset 中是不可见的。你能告诉我为什么吗？

这是`rvm info`“全局”gemset 的输出：

```
ruby-1.9.3-p286@global:

  system:
    uname:       "Linux rmaruszewski 3.2.0-32-generic #51-Ubuntu SMP Wed Sep 26 21:33:09 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux"
    system:      "ubuntu/12.04/x86_64"
    bash:        "/bin/bash => GNU bash, version 4.2.24(1)-release (x86_64-pc-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.16.17 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "12 minutes 37 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p286"
    date:         "2012-10-12"
    platform:     "x86_64-linux"
    patchlevel:   "2012-10-12 revision 37165"
    full_version: "ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-linux]"

  homes:
    gem:          "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286@global"
    ruby:         "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286"

  binaries:
    ruby:         "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/bin/ruby"
    irb:          "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/bin/irb"
    gem:          "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/bin/gem"
    rake:         "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286@global/bin/rake"

  environment:
    PATH:         "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286@global/bin:/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/bin:/home/rmaruszewski/.rvm/bin:/home/rmaruszewski/bin:/home/rmaruszewski/bin/build:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/opt:/opt/AccurevTools/bin:/opt/accurev/bin:/home/rmaruszewski/bin/gitscripts:/srv/git/development/tools/gts/bin:/srv/git/build/Build:/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/bin:/opt/grails/bin:/opt/gradle/bin"
    GEM_HOME:     "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286@global"
    GEM_PATH:     "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286@global"
    MY_RUBY_HOME: "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286"
    IRBRC:        "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/.irbrc"
    RUBYOPT:      ""
    gemset:       "global" 
```

这是针对“默认”宝石集的：

```
ruby-1.9.3-p286:

  system:
    uname:       "Linux rmaruszewski 3.2.0-32-generic #51-Ubuntu SMP Wed Sep 26 21:33:09 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux"
    system:      "ubuntu/12.04/x86_64"
    bash:        "/bin/bash => GNU bash, version 4.2.24(1)-release (x86_64-pc-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.16.17 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "18 minutes 26 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p286"
    date:         "2012-10-12"
    platform:     "x86_64-linux"
    patchlevel:   "2012-10-12 revision 37165"
    full_version: "ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-linux]"

  homes:
    gem:          "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286"
    ruby:         "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286"

  binaries:
    ruby:         "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/bin/ruby"
    irb:          "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/bin/irb"
    gem:          "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/bin/gem"
    rake:         "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286@global/bin/rake"

  environment:
    PATH:         "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286/bin:/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286@global/bin:/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/bin:/home/rmaruszewski/.rvm/bin:/home/rmaruszewski/bin:/home/rmaruszewski/bin/build:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/opt:/opt/AccurevTools/bin:/opt/accurev/bin:/home/rmaruszewski/bin/gitscripts:/srv/git/development/tools/gts/bin:/srv/git/build/Build:/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/bin:/opt/grails/bin:/opt/gradle/bin"
    GEM_HOME:     "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286"
    GEM_PATH:     "/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286:/home/rmaruszewski/.rvm/gems/ruby-1.9.3-p286@global"
    MY_RUBY_HOME: "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286"
    IRBRC:        "/home/rmaruszewski/.rvm/rubies/ruby-1.9.3-p286/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:52:03.837

我想我遇到了同样的问题，除了在 Mac OSX 10.7 上。

我是红宝石新手。我正在阅读 netuts 教程 (http://net.tutsplus.com/tutorials/ruby/singing-with-sinatra-the-recall-app-2/)。

我安装了 RVM，升级到最新的 Ruby（mac 自带 1.8.7），将 rvm 设置为默认为 1.9.3，gem 安装了 sinatra、datamapper 等，但是当我尝试在 IRB 或.rb 文件，我收到“LoadError: cannot load such file -- datamapper”错误。

我 gem 安装了 data_mapper ，这似乎有效，但是，这似乎是某种我不明白的配置问题。

我发帖是因为我看到 RVM (1.16.17) 和 ruby​​ (1.9.3-p286) 的版本与您相同，并且我的 gem 列表 --local (rvm 1.11.3.5) 中的 RVM 版本相同。

不确定我如何拥有 RVM 1.16.17 并且 gem 说 rvm 1.11.3.5。此外，rubygems 应该在 1.9 中“包含”，但在 irb 中，如果我键入 require “rubygems”，它会返回 false。

我讨厌成为一个 n00b ......对不起，我没有答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T04:29:13.847

您是否首先使用了红宝石：

```
rvm use ruby 
```

# python - 用于距离聚类的 Python 库

> ID：13163815
> 
> 赞同：3
> 
> 时间：2012-10-31T17:46:44.627
> 
> 标签：python, cluster-analysis

我正在寻找一个 python 库来将一组坐标组织成簇。我的输入是（纬度，经度）坐标列表，我想获得根据距离对它们进行分组的集群列表。

我事先不知道我需要获得多少个集群，所以我不能使用类似 K-Means（如[集群模块](http://pypi.python.org/pypi/cluster/1.1.0b1)）算法的东西（至少不是一个人，也许我有一个算法可以用来获得该数字基于输入数据）。

我也查看了[clusterpy](http://www.rise-group.org/risem/clusterpy/)，但它似乎对任务来说过于复杂，并且文档不是很有指导性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:24:24.923

您可能需要研究[DBSCAN (Wikipedia)](https://en.wikipedia.org/wiki/DBSCAN)和[OPTICS (Wikipedia)](https://en.wikipedia.org/wiki/OPTICS_algorithm)等算法。我不知道周围是否有任何好的 Python 实现。我在这里看到的关于 SO for OPTICS 的内容似乎非常不正确和不完整。DBSCAN 很简单，你可以自己实现。

一些关键的好处：

*   您可以使用更适合 lat/lng 坐标的大圆距离。由于 180° 的环绕，K-means 会出现问题 - 均值不稳定
*   您需要设置两个阈值：半径 epsilon（仅适用于 DBSCAN），其距离以公里为单位，并且大致为最小集群大小。根据您的用例，该参数应该很容易设置。
*   如果你有空间索引，它可以将算法加速到`O(n log n)`.
*   您不需要集群数量的启发式方法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-21T13:30:39.160

我会推荐[scikit learn](http://scikit-learn.org/stable/modules/clustering.html)。链接页面对不同的聚类算法进行了很好的讨论。对于地理聚类（正如上面已经建议的那样）DBSCAN 效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:49:40.660

几年前，我使用 Python 对基因序列做了完全相同的事情，这是完全可行的。

要从初始数据中获得最佳数量的集群，您需要在遍历它们时使用惩罚器。Hastie-Tibshirani-Friedman 的著作 Elements of Statistical Learning 中有一个很好的部分解释了如何做到这一点：[http ://www-stat.stanford.edu/~tibs/ElemStatLearn/](http://www-stat.stanford.edu/~tibs/ElemStatLearn/)

这是我学习的地方，希望对你有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T22:49:39.520

我有一些朋友使用过[NetWorkX](http://networkx.lanl.gov/)来解决这类问题。它写得很好，文档也很好。

# java - 在java程序中构建android应用程序

> ID：13163816
> 
> 赞同：0
> 
> 时间：2012-10-31T17:46:47.887
> 
> 标签：java, android, ant

我正在尝试使用 java 中的 ant 构建一个 android apk。

```
ProcessBuilder pb = new ProcessBuilder(new String[] { "cmd.exe", "/c",   "D:\\Softwares\\Android\\tools\\android.bat update project -p ArithmeticAndroid"});
          pb.directory(new File("D:\\test\\ArithmeticAndroid"));
Process p = pb.start();
int exitStatus = p.waitFor(); 
```

这是我的代码片段，exitStatus 为 0，但 android.bat 对 ArithmeticAndroid 没有影响，我正在尝试构建的项目。我真的被困在了这个。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:31:59.453

```
ProcessBuilder pb = new ProcessBuilder(new String[] { "cmd.exe", "/c", "D:\\Softwares\\Android\\tools\\android.bat","update","project","-p","."});
pb.directory(new File("D:\\Final-App-   Templates\\"+ftm.getpName()));
Process p = pb.start();
p.waitFor(); 
```

# php - 一页中的查询请求过多

> ID：13163818
> 
> 赞同：1
> 
> 时间：2012-10-31T17:46:54.270
> 
> 标签：php, mysql

我正在尝试以更好的方式重新编码我的一个旧应用程序。它不是太大，但在加载时会运行大约 80 个查询。但仍会在 2 秒内加载到浏览器中。我可以优化几个查询，没关系。我的问题是我应该担心这个还是一切都好。加载页面的平均查询请求应该是多少？我想知道标准限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:59:59.493

我会从不接触查询开始，而是通过测量这些查询需要多少时间

*   数据库连接/数据库查询
*   后端处理（业务）逻辑
*   网络滞后
*   HTML 渲染 + 任何 javascript 执行

其中任何一个都可能是罪魁祸首，甚至可能是其他原因。不过，可能是其中之一。当您知道究竟是什么在花费时间时，它应该在解决问题时为您指明正确的方向。

做一些真实的性能测试来支持这些数字也没有什么坏处……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:55:52.377

每页没有“标准查询计数”。例如，您可以使用“连接”，这可能会删除数百个单独的查询！

但是，我更关心你的“不到 2 秒”加载意味着它超过 1 秒！如果它是针对公共用户（例如，不是 Intranet），那么即使在普通计算机上也应该低于 0.5 秒！为了帮助实现这一点，请确保整个页面的输出缓冲处于打开状态（在 php.ini 中设置），因为这将大大提高页面加载速度。有关输出缓冲和压缩的更多信息，请参阅我的帖子：[Flushing the HTML document early - with ini_set('zlib.output_compression','ON')?](https://stackoverflow.com/questions/12935840/flushing-the-html-document-early-with-ini-set-zlib-output-compression-on/13074918#13074918)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:54:04.937

每页查询没有限制。您确实有超时限制，但您显然在其中。

如果您要遍历 n 个结果，即。在嵌套数据模型中，这完全没问题。如果你不是，我相信这是有原因的。2 秒对于页面加载来说有点长，但我当然对你的页面一无所知。

一个页面上的 80 个查询确实没有错，我只是问自己一个问题，为什么？

查找长查询的一个简单技巧，看看实际查询需要多长时间：

```
$start = microtime(1);
mysql_query('SELECT blah blah');
echo (microtime(1) - $start); 
```

# java - Eclipse 插件功能？

> ID：13163823
> 
> 赞同：2
> 
> 时间：2012-10-31T17:47:22.613
> 
> 标签：java, eclipse, eclipse-plugin

我正在开发一个 Eclipse 插件项目，它可以从 git 服务器克隆其他已安装的 eclipse 插件的代码。

我是插件开发的新手，所以我真的需要一些基本的想法。

1.  插件是否可以将按钮添加到某个对话框？例如：在eclipse菜单中，点击Help->About Eclipse SDK->Installation Details 在这个窗口中，是否可以通过插件在这个窗口底部添加一个按钮？如果是这样，我可以获得提示或示例示例吗？

2.  插件是否可以从某个对话框加载信息？例如：在 Q1 的同一个窗口中，插件可以访问这些表吗？如果是这样，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:31:15.477

一般来说，为了让您向另一个插件的对话框（或一般的 UI）添加内容，该插件需要实现从其他插件获取额外 UI 组件并支持这些 UI 组件产生的用户事件的能力。如果要这样做的话，这样做的方式是让其他插件定义一个其他插件可以扩展的扩展点。如果您查看几乎所有 plugin.xml 文件，您会看到 XML 描述了该插件为插件的先决条件提供的扩展点提供的扩展。

我怀疑您正在寻找的扩展点是否存在，但您可以通过查看提供该对话框的插件的 plugin.xml 来确定。查看该 plugin.xml 是否定义了您可以使用的任何扩展点。

至于访问另一个插件的内部状态，您必须查看实现该状态的类（表）并查看这些类是否在您的插件中可见。同样，我怀疑您是否可以访问所需的内容，但这是确定的方法。

# git - github fork 从原始存储库中获取所有更改

> ID：13163828
> 
> 赞同：2
> 
> 时间：2012-10-31T17:47:31.627
> 
> 标签：git, version-control, github, fork

昨天我在 github 上做了第一次 fork。

我修改了一些东西，然后向原始仓库发出了拉取请求。

然后我发现我做错了什么，现在我想将我的 fork 同步到原始 repo，以便我所做的所有更改（创建新文件，修改一些..）都将被删除。

我试过了

git fetch 上游 git 合并上游/master

同时对原始仓库所做的更改会同步到我的 fork **，但我所做的更改仍保留在我的 fork 中**！

我希望我的存储库与原始存储库相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:13:16.683

您可以通过向原始存储库添加远程来修复您的分叉，从那里获取，重置您的分支以匹配拉出的分支，然后强制将分支推送到您的分叉。

假设您的分叉存储库由 origin 表示，下面是一个示例，其中 master 作为您拥有的唯一分支：

```
git remote add upstream http://github.com/original.git
git fetch upstream
git reset --hard upstream/master
git push -f origin master 
```

现在 master 将在两个 repos 中的相同位置。当您进行合并时，您要么向前移动引用（称为快进合并），因为您身边不存在任何东西，要么您进行新的提交，因为两者都有更改。如果你想丢弃你的提交，重置是这里的答案——而不是合并。

如果您有其他分支要重置回它们在初始存储库中的位置，您可以在不检查它们的情况下执行此操作：

```
git push -f . upstream/feature1:feature1
git push -f origin feature1 
```

说在同一个仓库中`.`推送。这是移动分支指针而无需签出分支的聪明方法。push 中的冒号语法表示`<source>:<destination>`. 如果`:<destination>`省略，则表示同名，这就是为什么您不经常看到带有推送示例的语法的原因。一个更常见的示例是，当您将本地分支推送到具有不同名称的远程分支时：`git push origin myexperiment:dev`会将远程上的 dev 分支更新为 myexperiment 指向的内容。

# c# - DLL 上的嵌入式 Xaml 页面

> ID：13163832
> 
> 赞同：2
> 
> 时间：2012-10-31T17:47:39.120
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我正在使用新的 Metro Design (WinRT) 开发一些 UI 组件，以便将它们提供给第三方公司。我们在部署控件包时遇到了一些问题。当他们引用我们在新项目上的控件生成的 .dll 文件时，他们可以访问所有对象并实例化它们，但是在编译时，会出现以下类型的错误：

`"Payload file '...\bin\Debug\Charts\Line\Line.xaml' does not exist."`. （如果我们提供 /bin .dll）

或者

`XamlParseException at Windows.UI.Xaml.Application.LoadComponent(Object component, Uri resourceLocator, ComponentResourceLocation componentResourceLocation)`（如果我们使用 /obj 文件夹中的 .dll）

我们知道“解决此问题的方法是部署/提供 xaml”文件以及 .dll 给我们的客户，但我们真的希望避免显示我们的 XAML 代码。

提前致谢

NG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:19:51.100

XAML 文件是 Windows 8 WinRT/XAML 中的松散文件，因此如果您想使用将 XAML 和代码绑定在一起的内置工具，则必须共享 XAML 文件。

您可能想在此处阅读 Tim Heuer 关于构建可部署控件的[文章](http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx)。他提到了两种共享控件的方法——使用 VS Extensions SDK 将它们安装到 Visual Studio 中，或者作为可以共享 NuGet 包的 NuGet 包。这样，当您第一次查看您共享的组件时，这些文件将不可见，尽管它们将包含在项目文件夹中，因此如果有人仔细观察 - 他们将看到您的 XAML。

您似乎想要避免的替代方法是将 dll + xaml 文件作为文件共享以放入项目中。您需要将 xaml 文件放入与 dll 同名的文件夹（无文件扩展名），以便工具可以找到它们。只是使用工具的替代方案。

如果您查看从商店安装的应用程序 - 您可以看到它们附带的所有 XAML 文件。除了编写大量代码以某种方式将 XAML 嵌入到您的二进制文件中或用后面的代码替换它之外，目前没有其他好的选择。

# pdf - UICollectionView 在滚动后显示错误的单元格 - 出队问题？

> ID：13163834
> 
> 赞同：17
> 
> 时间：2012-10-31T17:47:50.383
> 
> 标签：pdf, uicollectionview, uicollectionviewcell

我在 UIViewController 中有一个 UICollectionView。在 collectionView cellForItemAtIndexPath: 方法中，它根据数据源创建一系列自定义单元格。自定义单元格又包含一个 UIView，子类化以绘制单个 PDF 页面。

它的设置方式是将 PDF 文件拆分为单个页面，因此单元格 1 包含 PDF 第 1 页，单元格 2 包含 PDF 第 2 页，依此类推。到目前为止一切顺利，这是我的问题：

当我向下滚动时， UICollectionView 开始显示错误的单元格。例如，在一个 34 页的文档中，它以正确的顺序显示单元格/第 1-16 页，但随后开始显示*似乎*已进一步出列的页面，例如单元格 1、单元格 2、单元格 4。我从来没有到达任何地方靠近单元格/第 34 页。

我过去曾在 UITableView 中看到过类似的行为，并且认为这与单元格的出列或委托方法有关。不太确定 - 任何帮助表示赞赏。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

//create custom cell
CustomCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"cellID" forIndexPath:indexPath];

//set file name (always the same; one PDF file)
cell.fileName = fileName;
cell.backgroundColor = [UIColor clearColor];

//set the title to the page number
cell.title = [NSString stringWithFormat:@"page %@", [countArray objectAtIndex:indexPath.row]];

//set the current page (which indicates which page to display) according to the pageCount
cell.currentPage = [[countArray objectAtIndex:indexPath.row] intValue];

return cell; } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T08:47:25.327

我有类似的问题。这很可能是因为重用的单元格不会自己重绘。在您的自定义单元格的**内容**类（您的 PDF 视图）中，如果框架更新，则触发重绘：

```
-(void)setFrame:(CGRect)frame {
    [super setFrame:frame];
    [self setNeedsDisplay]; // force drawRect:
} 
```

这对我有用。此外，如果您的单元格大小可能会发生变化，请设置自动调整大小掩码，使其填充空间

```
self.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

在初始化期间。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-19T10:45:17.140

使用 prepareForReuse 方法修复了类似问题

只需将此方法添加到您的自定义单元实现中

```
- (void)prepareForReuse {

     self.fileName = nil;
     self.title = nil;

     // add remaining properties 

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-31T12:20:36.723

我根据 Asatur Galstyan 的回答迅速解决了一个类似的问题。

将自定义类关联到情节提要中的单元格后，可以覆盖 prepareForReuse() 函数：

```
import UIKit

class SomeCollectionViewCell: UICollectionViewCell {

    @IBOutlet weak var exampleView: UIView!
    @IBOutlet weak var exampleLabel: UILabel!

    override func prepareForReuse(){
        super.prepareForReuse()
        exampleLabel.textColor = nil
        exampleView.backgroundColor = nil
        exampleView.layer.cornerRadius = 0
    }
} 
```

prepareForReuse() 的默认实现什么都不做（至少在 iOS 10 中），但[Apple 建议在覆盖时调用 super.prepareForReuse()](https://developer.apple.com/documentation/uikit/uicollectionreusableview/1620141-prepareforreuse)。

# c#-4.0 - MVVM silverlight 项目中的 usercontrol keydown

> ID：13163837
> 
> 赞同：0
> 
> 时间：2012-10-31T17:47:54.780
> 
> 标签：c#-4.0, silverlight-4.0, user-controls

我是 MVVM 世界的新手，我有一个 XAMl

```
<UserControl x:Class="KeyDownMVVM.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="186,125,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
    </Grid>
</UserControl> 
```

我想处理 userlcontrol keydown 事件来捕捉键盘修饰符和键，但使用 MVVM 模式有任何想法。我使用银光 4 。大部分教程都讲具体的控制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:05:13.433

我建议查看[MVVMLight](http://mvvmlight.codeplex.com/)框架中的“EventToCommand”。它将允许您指定一个在您的视图模型上调用命令的事件。有很多关于如何在 SO 或其他地方使用它的例子。

# c# - OpenCV：src.size() == dst.size() && dst.type() == CV_32FC1 .Net C# 中的错误

> ID：13163838
> 
> 赞同：2
> 
> 时间：2012-10-31T17:47:56.343
> 
> 标签：c#, c#-4.0, opencv, wrapper, edge-detection

我从视频中加载了一张图片：

```
 Image<Gray, byte> imGray=cap.QueryGrayFrame(); 
```

现在，我想使用 openCv 中的 cvCornerHarris 函数，如下所示：

```
 Image<Gray, byte> harRes = new Image<Gray, byte>(imGray.Size);  
 CvInvoke.cvCornerHarris(imGray, harRes, 8, 3, 0.04); 
```

但我得到一个 cvException：

```
OpenCV: src.size() == dst.size() && dst.type() == CV_32FC1 Error 
```

![在此处输入图像描述](../Images/41d7b8239ffee219af9917991fa9d6b1.png)

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:54:28.520

我不确定 C# 包装器，但在 C++ 中，您可以使用以下行更改像素格式：

```
imGray.convertTo(A, CV_32F); 
```

错误说，图像的大小应该匹配（你的代码做同样的事情）并且像素格式应该是 float32，而你的可能不是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T19:11:35.460

您可以从给定的异常中推断出目标图像的类型应该是`CV_32FC1`.

在您的情况下，目标图像是`harRes`，您已将其声明为：

```
Image<Gray, byte> harRes = new Image<Gray, byte>(imGray.Size); 
```

此图像的类型是`CV_8UC1`。

它应该声明为：

```
Image<Gray, float> harRes = new Image<Gray, float>(imGray.Size); 
```

现在它的类型是`CV_32FC1`，这是函数所期望的类型`cvCornerHarris`。

# html - 在页面锚点在 Firefox 中不起作用

> ID：13163841
> 
> 赞同：2
> 
> 时间：2012-10-31T17:48:12.250
> 
> 标签：html, anchor

我的代码如下所示，每页的镜头数量都不同。我的目标是打开一个弹出窗口，然后直接通过 url 去那个特定的镜头，比如

`www.example.com/shot/#12`.

出于某种原因，这在 IE 和 chrome 中运行良好，但在 Firefox 中则不行。在 Firefox 中，它会指向不同的东西，但会打开弹出窗口。

```
<repeater>
    <div>
        <div>
            <a href="#ShotNumber" name="#12">
            </a>
        </div>
        <div>
            HTML FOR EACH SHOT
        <div>
    <div>
<repeater> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T18:02:17.537

锚

```
<a name="Anchorname"></a> 
```

例如：正常方式

```
 <div>
   <a href="#ShotNumber">Go to ShotNumber</a> <!-- Link to ShotNumber -->
   <a href="#12">Go to 12</a> <!-- Link to 12-->
 </div>
 <!-- more stuff -->
 <div>
   <a name="ShotNumber"></a> <!-- Anchor name=ShotNumber -->
   HTML FOR ShotNumber
 </div>
 <!-- more stuff -->
 <div>
   <a name="12"></a> <!-- Anchor name=12 -->
   HTML FOR 12
 </div> 
```

像这样称呼它：

```
example.com/myShot.html#ShotNumber 
```

**编辑：** [html5：文档的指示部分](http://dev.w3.org/html5/spec/single-page.html#the-indicated-part-of-the-document)

如果 DOM 中有一个元素的**ID**与 decoded fragid 完全相同，那么树顺序中的第一个这样的元素就是文档的指示部分；在这里停止算法。

如果DOM 中有一个**a元素的****name**属性的值正好等于 fragid（未解码的 fragid），那么树顺序中的第一个这样的元素就是文档的指示部分；在这里停止算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:52:26.930

尝试 `<a name="12">This is item number 12</a>`

然后 `<a href="#12">Go to item number 12</a>`。

此外，他们说，HTML5 不支持锚 id。[这可能很有趣](https://stackoverflow.com/questions/484719/html-anchors-with-name-or-id)。

# javascript - 在输入框中添加破折号

> ID：13163842
> 
> 赞同：1
> 
> 时间：2012-10-31T17:48:15.323
> 
> 标签：javascript, jquery, jquery-validate, inputbox

如何制作一个在六位数字后自动添加破折号的输入字段。也应该只能在输入字段中写入数字。

这可以使用 jQuery 完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:11:30.343

借用这篇文章的代码：[如何使用 jQuery 在 HTML 输入框中只允许数字（0-9）？](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery?page=1&tab=votes#tab-top)

您可以添加条件来捕获长度。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/jquery-ui.min.js"></script>

<script>
$(document).ready(function() {
    $("#txtboxToFilter").keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
             // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
                 return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {   
                event.preventDefault(); 
            }   
        }

        if(  $("#txtboxToFilter").val().length == 6 )
       {
            event.target.value = event.target.value + "-";
       }
    });
});
</script>

<form>

<input type="text" id="txtboxToFilter">

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:55:15.187

```
jQuery('#inputFieldId').keydown(function(event) {
            var enteredValue = jQuery(this).val();
            if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
                   (event.keyCode == 65 && event.ctrlKey === true) || (event.keyCode >= 35 && event.keyCode <= 39) || 
                   (event.keyCode>=48 && event.keyCode<=57) || (event.keyCode>=96 && event.keyCode<=105)) // allow numbers
                {
                   if(enteredValue.length==6 && ((event.keyCode>=48 && event.keyCode<=57) || (event.keyCode>=96 && event.keyCode<=105)))
                   {
                    jQuery(this).val(enteredValue+"-")
                   }
               }
            else
            {
                event.preventDefault();
            }
        }); 
```

现在更正了代码，试试这个。

# php - websocket connection with mysql

> ID：13163843
> 
> 赞同：2
> 
> 时间：2012-10-31T17:48:21.063
> 
> 标签：php, javascript, jquery, websocket

So i have been trying to make my canvas game work in real time multiplayer with long polling right now which connects to my mysql database, but I am now trying to switch to web sockets. I am a little confused on where the websockets in storing information and on how it is being organized when it is stored. Do the websockets connect to a mysql server? Does the information stored using websockets reset when the server resets? any help is appreciated. Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T20:55:35.393

**免责声明：此答案针对 OP 评论。提供的脚本绝不是安全的。[最好使用Ratchet](http://socketo.me)等第三方固件**

我认为您误解了 PHP 的工作原理。让我给你一个例子，并从中建立一些解释......

* * *

您有一个带有 2 个文件的网络服务器（example.com）：a.php 和 b.php。

一个.php

```
<?php
$varA = "I'm var A";
echo $varA; 
```

b.php

```
<?php
echo $varA; 
```

要运行脚本 a.php，请将浏览器定向到[http://example.com/a.php](http://example.com/a.php)。输出是：

> 我是变种 A

但是去[http://example.com/b.php](http://example.com/b.php)会打印一个通知说

> 注意：未定义变量：第 2 行 /path/to/webroot/b.php 中的 varA

这是为什么？

这是因为这两个脚本是完全独立的。他们甚至不知道彼此的存在。

现在让我们稍微改变一下 b.php：

b.php

```
<?php
include 'a.php';
echo $varA; 
```

输出：

> 我是 var AI 是 var A

这基本上告诉 b.php 包含 a.php，因此“共享”变量、对象、类和函数定义。

* * *

**发布和获取**

在脚本之间传递数据的另一种方法是使用 POST 或 GET。

c.php

```
<?php
if (isset($_GET['c']) {
    $varC = $_GET['c'];
} else {
    $varC = 'NONE';
}
echo $varD; 
```

转到[http://example.com/c.php](http://example.com/c.php)将输出

> 没有任何

去[http://example.com/c.php?c=something](http://example.com/c.php?c=something)会输出

> 某物

将变量从 d.php 传递给 c.php。您可以使用 GET 请求。

d.php

```
<?php
$varD = urlencode("i'm from d");
echo "<a href=\"http://example.com/c.php?c=$varD\">pass value</a>"; 
```

或者

```
header('Location: http://example.com/c.php?c='.urlencode("i'm from d")); 
```

转到 d.php 并单击传递值将输出

> 我来自 d

您可以执行 POST 请求，而不是使用 GET。（我们稍后会介绍）

* * *

**$_SESSION**

在“访问”之间呢？

每次访问 php 文件时，脚本都会从头到尾运行。

这是另一个文件（e.php）

```
<?php
if (!isset($i)) {
    $i = 0;
}
++$i; 
```

该脚本告诉您，如果未定义 var $i，则 $i=0 然后将其加一。

访问[http://example.com/e.php](http://example.com/e.php)将始终输出 1。访问之间不存储任何数据。

除非...您使用 $_SESSION 变量（或将数据存储在持久媒体中）。

ii.txt

```
0 
```

e.php

```
<?php
session_start();
if (!isset($_SESSION['i'])) {
    $_SESSION['i'] = 0;
}
++$_SESSION['i'];

$ii = file_get_contents('ii.txt');
++$ii;
file_put_contents('ii.txt', $ii);

echo "session counter: " . $_SESSION['i'];
echo '<br/>';
echo "file counter: " . $ii; 
```

每次访问 e.php 时，两个计数器都会增加。

但是... $_SESSION 变量不是持久媒体。当会话被销毁（或过期）时，会话计数器将重置。但是，文件计数器将始终增加，因此它是一种持久性媒体。当然，您可以使用数据库来存储变量。原理是一样的。

* * *

**在不同服务器之间传递变量：**

在同一服务器的文件之间传递变量时，原理是一样的。但是，您不能（通常）包含或要求位于另一台服务器中的 php 文件。此外，最好从两个位置发送信息以保护数据。这是一个使用套接字连接的示例。

a.php（位于 client.com）

```
<?php
//Our Data
$dataArray = array('foo' => 'some data', "bar" => 42);

// Data convertion into URL parameters -> foo=some%20data&bar=42
$data = http_build_query($dataArray);

//extract the parts of the url 
$url = parse_url("http://server.com/b.php");

$host = $url['host']; //server.com
$path = $url['path']; //b.php

$fp = fsockopen($host, 80, $errno, $errstr, 30);

if ($fp) {

    //HEADERS
    fputs($fp, "POST $path HTTP/1.1\r\n"); //POST method
    fputs($fp, "Host: $host\r\n"); //The host
    fputs($fp, "Referer: myApp\r\n"); //who's the referer
    fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n"); //Content type: a form post that is url encoded
    fputs($fp, "Content-length: ". strlen($data) ."\r\n"); //data length (size in chars)
    fputs($fp, "Connection: close\r\n\r\n");
    //DATA
    fputs($fp, $data);

    $result = '';
    // Request result
    while(!feof($fp)) {
        $result .= fgets($fp, 128);
    }
} else { 
    // Something went bad
    echo "ERROR: $errstr ($errno)";
}
// Socket close
fclose($fp);

//SUCCESS
// split the result header from the content
$result = explode("\r\n\r\n", $result, 2);
$header = isset($result[0]) ? $result[0] : '';
$content = isset($result[1]) ? $result[1] : '';

echo "HEADER: $header<br><br>";
echo "CONTENT:<br>$content"; 
```

b.php（位于 server.com）

```
<?php
header('Content-type: text/plain');
if (isset($_POST)) {
    file_put_contents('data.txt', $_POST, FILE_APPEND);
    file_put_contents('data.txt', PHP_EOL, FILE_APPEND);
    print file_get_contents('data.txt');

} else {
    echo "NOT OK";
} 
```

当访问[http://client.com/a.php](http://client.com/a.php)时，一个 POST 请求被发送到 b.php。如果成功，b.php 将数据存储在名为 data.txt 的文件中并返回该文件的内容。

希望这有助于理解套接字和 PHP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T18:58:36.153

你的帖子很混乱。

> 现在进行长轮询，连接到我的 mysql 数据库

AFAIK 没有从浏览器到 mysql 数据库的直接桥接 - 因为您已将其标记为 PHP，所以我假设两者之间有一个脚本。

> websockets在哪里存储信息

Websockets 不存储信息，它们是传输数据的管道。

> websockets 是否连接到 mysql 服务器？

不-您仍然需要介于两者之间的东西。即使 yopu 可以在 javascript 中实现 MySQL 协议，您也无法以这种方式访问​​数据库 - websockets 通过基于流 (TCP) 的连接来隧道基于数据报的协议。至于中间应该是什么，是的，PHP 可以成为解决方案的一部分。

那里有很多 websocket 服务器/适配器，其中许多要么用 PHP 实现，要么支持 PHP 后端 - 尝试用谷歌搜索它们并通读示例代码。

> 当服务器重置时，使用 websockets 存储的信息是否会重置？

见上文 - websockets 不存储信息。

# php - Magento 升级耗时太长且永远无法完成

> ID：13163847
> 
> 赞同：4
> 
> 时间：2012-10-31T17:48:43.893
> 
> 标签：php, magento

我正在将 magento 从 1.4.0.1 升级到 1.7.0.2。最初有一些错误；修复这些之后，现在升级运行了 5 个小时并且永远不会完成。没有错误显示。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T11:36:03.527

我最近将客户端 magento 从 V1.4 升级到 V1.7.2.0，我按照以下步骤操作：- 以下是将网站从 Magento v1.4.0.0 升级到 v1.7.2.0 的要点：-

1.  以压缩格式收集实时数据库备份，不包含下表：-

    *   “log_customer”</li>
    *   “log_quote”</li>
    *   “日志摘要”</li>
    *   “log_url”</li>
    *   “log_url_info”</li>
    *   “log_visitor”</li>
    *   “log_visitor_info”</li>

    “log_visitor_online”</p>

2.  在您自己的文件系统中的任何文件夹中解压缩压缩的备份数据库。

3.  启动本地 WAMP / XAMPP，并使用 Web 应用程序“phpMyAdmin”创建一个测试数据库“test_something”或任何其他名称。

4.  打开命令提示符窗口，然后键入“mysql”以启动 MySQL 命令提示符。

5.  将解压后的数据库导入到测试数据库中，使用命令提示符，这样会快很多，不会出错。

6.  成功导入后，从 phpMyAdmin 运行文件“DB Changes.txt”中提到的 SQL。

7.  在本地 WAMP / XAMPP 中提取一个新的 Magento v1.7.2.0，然后使用带有旧现场数据的测试数据库开始安装这个 Magento。

8.  成功安装 Magento 后，使用命令提示符以压缩格式导出和转储新升级的数据库，这样会更快而不会出现任何错误。

9.  解压新压缩的 Magento 或将 v1.7.2.0 的新解压缩 Magento 上传到实时服务器的文件系统中，无需安装任何东西。

10.  将此压缩数据库上传到实时服务器的文件系统中，然后打开实时服务器的 PuTTY。

11.  上传本地 WAMP / XAMPP 的“app/etc/local.xml” Magento 文件的副本，以替换实时 Magento 的“app/etc/local.xml”文件。请记住根据新的实时服务器更改此文件的所有数据库凭据，然后再将其上传到实时服务器。

12.  请记住不要从 Web 浏览器浏览 Magento 以获取实时 Web 服务器，直到第 14 点完成。

13.  使用 PuTTY 命令，提取压缩后的数据库，然后将其导入到直播网站的新数据库中。

14.  导入成功后，搜索“core_config_data”数据库表，“path”列值为“%base_url%”。将“value”列的所有值替换为活动站点“http://www.livesite.com/”的完整 URL，而不提及“index.php”。

15.  将主题及其相关文件上传到新服务器的文件系统。

16.  上传扩展/模块检查兼容性。

17.  确保在系统配置中配置所需的模块来自管理面板。

    DB Changes.txt 如下：- CREATE TABLE IF NOT EXISTS `log_customer`( `log_id`int(10) unsigned NOT NULL AUTO_INCREMENT, `visitor_id`bigint(20) unsigned DEFAULT NULL, `customer_id`int(11) NOT NULL DEFAULT '0', `login_at`datetime NOT NULL DEFAULT '0000 -00-00 00:00:00', `logout_at`datetime DEFAULT NULL, `store_id`smallint(5) unsigned NOT NULL, PRIMARY KEY ( `log_id`), KEY `IDX_VISITOR`( `visitor_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='客户日志信息';

    * * *

    --

    ## -- 表的表结构`log_quote`

    如果不存在则创建表`log_quote`（ `quote_id`int（10）无符号非空默认值'0'， `visitor_id`bigint（20）无符号默认空值， `created_at`日期时间非空值默认值'0000-00-00 00:00:00'， `deleted_at`日期时间默认空值，主键（`quote_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='引用日志数据';

    * * *

    --

    ## -- 表的表结构`log_summary`

    如果不存在则创建表`log_summary`( `summary_id`bigint(20) unsigned NOT NULL AUTO_INCREMENT, `store_id`smallint(5) unsigned NOT NULL, `type_id`smallint(5) unsigned DEFAULT NULL, `visitor_count`int(11) NOT NULL DEFAULT '0', `customer_count`int(11) NOT NULL DEFAULT ' 0', `add_date`datetime NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY ( `summary_id`) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='摘要日志信息';

    * * *

    --

    ## -- 表的表结构`log_url`

    如果不存在则创建表`log_url`( `url_id`bigint(20) unsigned NOT NULL DEFAULT '0', `visitor_id`bigint(20) unsigned DEFAULT NULL, `visit_time`datetime NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY ( `url_id`), KEY `IDX_VISITOR`( `visitor_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='URL 访问历史';

    * * *

    --

    ## -- 表的表结构`log_url_info`

    CREATE TABLE IF NOT EXISTS `log_url_info`( `url_id`bigint(20) unsigned NOT NULL AUTO_INCREMENT, `url`varchar(255) NOT NULL DEFAULT '', `referer`varchar(255) DEFAULT NULL, PRIMARY KEY ( `url_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='有关的详细信息网址访问';

    * * *

    --

    ## -- 表的表结构`log_visitor`

    如果不存在则创建表`log_visitor`（ `visitor_id`bigint(20) unsigned NOT NULL AUTO_INCREMENT, `session_id`char(64) NOT NULL DEFAULT '', `first_visit_at`datetime DEFAULT NULL, `last_visit_at`datetime NOT NULL DEFAULT '0000-00-00 00:00:00', `last_url_id`bigint(20) unsigned NOT NULL DEFAULT '0', `store_id`smallint(5) unsigned NOT NULL, PRIMARY KEY ( `visitor_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='系统访问者日志';

    * * *

    --

    ## -- 表的表结构`log_visitor_info`

    如果不存在则创建表`log_visitor_info`（ `visitor_id`bigint（20）无符号非空默认值'0'， `http_referer`varchar（255）默认空值， `http_user_agent`varchar（255）默认空值， `http_accept_charset`varchar（255）默认空值， `http_accept_language`varchar（255）默认空值， `server_addr`bigint（20） DEFAULT NULL, `remote_addr`bigint(20) DEFAULT NULL, PRIMARY KEY ( `visitor_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='访客的附加信息';

    * * *

    --

    ## -- 表的表结构`log_visitor_online`

    如果不存在则创建表`log_visitor_online`( `visitor_id`bigint(20) unsigned NOT NULL AUTO_INCREMENT, `visitor_type`char(1) NOT NULL, `remote_addr`bigint(20) NOT NULL, `first_visit_at`datetime DEFAULT NULL, `last_visit_at`datetime DEFAULT NULL, `customer_id`int(10) unsigned DEFAULT NULL, `last_url`varchar(255) DEFAULT NULL, PRIMARY KEY ( `visitor_id`), KEY `IDX_VISITOR_TYPE`( `visitor_type`), KEY `IDX_VISIT_TIME`( `first_visit_at`, `last_visit_at`), KEY `IDX_CUSTOMER`( `customer_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

    截断`report_event`；

    截断`report_viewed_product_index`；

    截断`report_compared_product_index`；

    截断`dataflow_batch_export`；

    ALTER TABLE `orders`CHANGE `url` `parent_id`VARCHAR( 255 ) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL;

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T19:12:19.690

我通过更改**lib\Varien\Db\Adapter\Pdo\Mysql.php**文件中的以下行来进行查询日志记录

```
protected $_debug               = true;
protected $_logAllQueries       = true;
protected $_debugFile           = 'var/debug/pdo_mysql.log'; 
```

然后通过分析**pdo_myql.log**文件，我知道查询正在执行错误，因此 magento 安装程序一次又一次地运行它。

错误是。

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry ''11199-1' for key 'UNQ_INCREMENT_ID' 
```

所以我删除了数据库表和**pdo_mysql.log**中的条目，现在正在显示其他查询并且升级完成。

在 magento 升级上工作了很多天，我总结了将 magento 从 1.4.0.1 成功升级到 1.7.0.2 的步骤。其他项目显示的这些错误会有所不同，因为每个项目都有不同的数据。

1.  为新版本创建一个**新数据库**。（我使用 **SQLyog**是因为它适用于大型数据库的导入和导出）。

2.  **在www**或**htdocs**中提取并安装新版本 1.7.0.1 。我的项目名称是**magento171**。

3.  创建**新数据库**，因为我们在**修复步骤**中需要新的**数据库**。

***   将**旧数据库**数据导入**新数据库**。

    *   在新安装的 magento 版本中更改**etc/local.xml中的****新数据库**名称。

    ***   在**etc/local.xml 中**找到并将**SET NAMES utf8**更改为**SET NAMES utf8；设置 FOREIGN_KEY_CHECKS=0；SET UNIQUE_CHECKS=0；**.

    *   将旧项目文件复制到新版本的 magento 中。我在空白文件夹中有主题。如果默认文件夹中有模板文件，则复制默认值。

    • 应用\设计\前端\默认\空白

    • 应用\代码\本地

    • 皮肤\前端\默认/空白

    • app\etc\modules（复制不在新版本中的文件）。

    *   **通过更改lib\Varien\Db\Adapter\Pdo\ Mysql.php**中的以下行，在 MySql 查询日志记录中

     **```
     protected $_debug               = true;
     protected $_logAllQueries       = true;
     protected $_debugFile           = 'var/debug/pdo_mysql.log'; 
    ```** ***   搜索并将 **CREATE TABLE**更改 为**CREATE TABLE IF NOT EXISTS** In code/core/mage/。

    *   **更改表core_config_data**中的以下条目（使用您的项目文件夹名称）。

    ```
     • web/unsecure/base_url | http://localhost/magento171/
      • web/secure/base_url   | http://localhost/magento171/ 
    ```

    *   **将/errors/local.xml.sample**重命名为**/errors/local.xml**以启用 error_reporting 。

    *   **通过删除var\cache**中的所有数据来清除 magento缓存。

    *   转到浏览器并键入您的项目路径。 **http://localhost/magento171/**并密切关注浏览器和**var/debug/pdo_mysql.log**文件。

    *   我遇到的第一个错误是：文件中的错误：“D:\xampp\htdocs\magento171\app\code\core\Mage\Sales\sql\sales_setup\mysql4-upgrade-1.3.99-1.4.0.0.php”

    *   SQLSTATE [23000]：违反完整性约束：1062 键 'PRIMARY' 的重复条目 '7'

    修复：我从**pdo_mysql.log**文件中发现问题出在**sales_flat_order**表中，这意味着存在许多重复的主键条目，因此我截断了所有销售表。这实际上是我的旧数据库中的错误。在新版本中，increment_id 是唯一的。我们不能跳过主键检查，所以我截断了所有与销售相关的表。如果您有相同的问题，则截断与该功能相关的所有表，例如如果在客户中重复则截断所有客户表，或者如果在目录中则截断目录表。但是请记住，应该在发生错误时进行截断，因为如果在安装开始之前截断，安装程序将不会读取现有数据，最后您会丢失一些记录，例如丢失一些订单或发票。

    ```
    SET FOREIGN_KEY_CHECKS = 0;
    TRUNCATE `sales_flat_creditmemo`;
    TRUNCATE `sales_flat_creditmemo_comment`;
    TRUNCATE `sales_flat_creditmemo_grid`;
    TRUNCATE `sales_flat_creditmemo_item`;
    TRUNCATE `sales_flat_invoice`;
    TRUNCATE `sales_flat_invoice_comment`;
    TRUNCATE `sales_flat_invoice_grid`;
    TRUNCATE `sales_flat_invoice_item`;
    TRUNCATE `sales_flat_order`;
    TRUNCATE `sales_flat_order_address`;
    TRUNCATE `sales_flat_order_grid`;
    TRUNCATE `sales_flat_order_item`;
    TRUNCATE `sales_flat_order_payment`;
    TRUNCATE `sales_flat_order_status_history`;
    TRUNCATE `sales_flat_quote`;
    TRUNCATE `sales_flat_quote_address`;
    TRUNCATE `sales_flat_quote_address_item`;
    TRUNCATE `sales_flat_quote_item`;
    TRUNCATE `sales_flat_quote_item_option`;
    TRUNCATE `sales_flat_quote_payment`;
    TRUNCATE `sales_flat_quote_shipping_rate`;
    TRUNCATE `sales_flat_shipment`;
    TRUNCATE `sales_flat_shipment_comment`;
    TRUNCATE `sales_flat_shipment_grid`;
    TRUNCATE `sales_flat_shipment_item`;
    TRUNCATE `sales_flat_shipment_track`;
    SET FOREIGN_KEY_CHECKS = 1; 
    ```

    *   安装时间太长，所以我检查了**pdo_mysql.log**文件，并且一次又一次地显示以下错误。显示错误：SQLSTATE[23000]：完整性约束违规：1062 键 'UNQ_INCREMENT_ID'' 的重复条目 ''11199-1' 修复：所以我删除了表中的第一个条目。

    *   **数据库修复步骤：**需要使用**magento-db-repair-tool-1.1** (http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool) 用新数据库修复新数据库。报告结束时将显示所有修复。

    *   现在您可以简单地将网站转移到实时服务器。****** 

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T11:49:41.890

我认为关于 Magento 1.4 到 1.7.x 升级最全面的描述是这样的，由交钥匙网站提供：

在继续进行 Magento 升级的这一部分之前，重要的是查看 Magento 升级脚本将升级您的商店的版本。输入此命令以检查：

```
1
./mage list-upgrades 
```

如果你会看到这个结果：

```
Updates for community:
Mage_All_Latest: 1.4.2.1 => 1.7.0.2
Lib_Js_Mage: 1.4.2.0 => 1.7.0.2
Lib_Varien: 1.4.2.0 => 1.7.0.2 
```

这意味着您的 Magento 将升级到 1.7.0.2 版本。如果这不是您需要的，您可以将升级通道更改为“测试版”并将您的 Magento 升级到 RC（测试版）版本。

1 – 输入此命令将升级通道更改为稳定（请记住，“稳定”通道会将您的 Magento 升级到最新的 1.7.x 稳定版本）：

```
1
./mage config-set preferred_state stable 
```

在此之后，“./mage list-upgrades”命令将显示以下结果：

社区更新：

```
 Mage_All_Latest: 1.4.2.1 => 1.7.0.2.
    Lib_Js_Mage: 1.4.2.0 => 1.7.0.2.
    Lib_Varien: 1.4.2.0 => 1.7.0.2.
    Lib_Phpseclib: 1.4.2.0 => 1.7.0.2.
    Mage_Core_Adminhtml: 1.4.2.0 => 1.7.0.2.
    Mage_Core_Modules: 1.4.2.0 => 1.7.0.2. 
```

2 – 选择频道后，您可以使用以下命令将 Magento 升级到 Magento 1.7.0.2)：

```
1
./mage upgrade-all --force 
```

如果“./mage upgrade-all –force”不起作用，您可以尝试执行以下命令：

```
1
./mage install connect20.magentocommerce.com/community Mage_All_Latest --force 
```

您将在屏幕上看到升级的软件包：

```
…

    Package upgraded: community/Mage_Locale_en_US 1.7.0.2
    Package upgraded: community/Lib_Mage 1.7.0.2
    Package upgraded: community/Lib_ZF 1.11.1.0
    Package upgraded: community/Lib_Js_Prototype 1.7.0.2.
    Package upgraded: community/Lib_ZF_Locale 1.11.1.0 
```

现在升级完成，您可以在浏览器中访问您的 Magento 商店执行数据库升级，此过程需要几分钟，请耐心等待。如果一切都正确升级，您将在浏览器中看到升级后的商店。在数据库升级之前，建议增加 PHP 引擎的时间和内存限制。

如果无法增加，可以尝试通过 SSH 进行数据库升级，例如：

```
1

    php -f ./index.php 
```

数据库升级完成后，您可以在 Magento 管理面板的页脚查看您的商店的版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T18:28:07.470

检查您的 apache 日志。但是，听起来它在升级过程中的某个地方被卡住了。确保你所有的文件都是新版本，备份你的数据库，并确保你的数据库连接信息是正确的。

您可能还需要仔细检查数据库的大小。如果您的数据库很大，magento 可能会超时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T19:46:04.810

当前（1.4.0.1）数据库有多大？最近当我不得不在本地服务器上升级 7GB 数据库时，整个周末都在本地服务器上 - 如此漫长的过程的原因是 1.6 版有新的索引器并且数据库结构被重建 - 安装脚本意味着在第一次加载更新代码时触发正在删除大量外键并创建具有很多约束的新键。****

# performance - query many sql azure atomic units as fast as possible

> ID：13163850
> 
> 赞同：1
> 
> 时间：2012-10-31T17:48:49.837
> 
> 标签：performance, task-parallel-library, azure-sql-database, async-await, federation

I have a SQL Federation with 97 members, i.e. physical shards. Each member has 1-16 virtual shards, i.e. atomic units. This data tier powers a search lookup web service (on an Azure web role web server), which requires all atomic units to respond before it knows enough to answer the user response.

Given the search parameters, the web server is able to determine the atomic unit IDs that it needs to query, but not their associated federation members (I am using USE Federation for this translation). The goal is to have the web server query all atomic units (wherever they are) as quickly as possible.

Currently, the best solution I have for this works as follows:

1.  Generate list of needed atomic units.
2.  Generate USE Federation and SQL statement for each atomic unit. Currently, the best performance I have found specifies FILTERING = OFF in the USE Federation statement, while manually specifying the predicate for the atomic unit in the SQL statement (rather than relying on FILTERING = ON to add these predicates for me).
3.  For each atomic unit, open a SqlConnection to the Federation Root, execute the USE Federation statement, and then the SQL query, both asynchronously. I use the TPL Dataflow library and async/await to wait for all of the atomic unit queries to conclude, after which I apply (optional, depending on what web request it was) business logic to the results and send back the response.

Each atomic unit in these queries will return between 100-600 records, never more than 2000\. The design objective is to query at most 200 atomic units at once => so 400,000 records is the maximum amount that the web server will ever need to apply business logic to, although that logic is never more than "get one object of each distinct numerical ID in the result," for which I have implemented IEqualityComparer.

This approach does not seem to scale *that* well. Even when querying 30-40 atomic units, there is a marked increase in response time, even though I can test and see that individual atomic unit responses each take less than 1 second.

I think likely places for my issues are:

1.  Using a separate SqlConnection for each atomic unit query => am I leveraging connection pooling effectively?
2.  Business logic and object serialization => should I be approaching the distinct operation across atomic units differently? What if I want to do sum operations on other fields as well (not the default use-case, but a common one).

If anyone has a favorite way of handling this, I would love to hear about it. Thanks.

Current solution:

 `````
 #region Identify atomic units of search query from search parameters (static methods, no i/o, very fast)
        List<string> AtomicUnits = AtomicUnitsOfSearch(data);
        #endregion                       

        #region Atomic unit-targeted subqueries setup
        var atomicUnitQueries = AtomicUnits.Select(au => 
            {                    
                return GetItemsFromAtomicUnit(
                    CreateConstraintSQLQuery(data), 
                    au,
                    verbosity);
            });            
        #endregion

        #region Execute async query across relevant shards; Distinct result item summary query business logic
        if (Verbosity.basic.Equals(verbosity)) // return one item per conceptid
        {
            return (await TaskEx.WhenAll(atomicUnitQueries)).SelectMany(a => a)                    
                .Distinct(new SimpleItemComparer()).ToList(); // Distinct() the fan-out results based on ID
        }
        else // assume _count verbosity => pick one item per Id, sum Categories and Item counts across atomic units (do not double-count for synonyms)
        { 
            // create the ending schema before executing the results lookup
            List<Item> atomicResults = (await TaskEx.WhenAll(atomicUnitQueries)).SelectMany(a => a).ToList();
            List<Item> distinctResults = new List<Item>();
            foreach (IGrouping<int, Item> g in atomicResults.GroupBy(a => a.Id)) // gets the lists of equivalent items across all atomic units queried
            {
                Item f = g.First();
                distinctResults.Add(new Item(f.Id, f.Name, g.Sum(a => a.CategoryCount), g.Sum(a => a.ItemCount)));
            }
            return distinctResults;                
        }                        
        #endregion 
`````

# c++ - Use a function return value directly as reference in c++

> ID：13163855
> 
> 赞同：1
> 
> 时间：2012-10-31T17:49:04.407
> 
> 标签：c++, pointers, reference

Recently I have to use C++ for a course at university. I'm aware of the concept of pointers and references, but i'm humbling at a specific point.

consider following class definition:

```
class test{
    public:
        test(int i);
        ~test();
        int* getint();
    private:
        int *asdf;
};

test::test(int i){
     asdf = new int();
    *asdf = i;
}

int* test::getint(){
    return asdf;
} 
```

and the following code:

```
void fun1(int*& i){
    *i +=1;
}

int main(){
    test *a = new test(1);
    fun1(a->getint());
} 
```

If i'm compiling it with g++ i'll get an error message:

```
error: invalid initialization of non-const reference of type ‘int*&’ from an rvalue of type ‘int*’ 
```

I see where the problem is, and that it can be solved by declaring a new pointer like this:

```
int main(){
    test *a = new test(1);
    int* b = a->getint();
    fun1(b);
} 
```

But is there any other way to use the return value directly as a reference? If my C++ code is terrible, you're welcome to correct it (it's basicly my first week of C++).

EDIT: changed fun1 to use reference and corrected initilization of class variable (as suggested by enrico.bacis

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:57:20.750

您正在`asdf`隐藏实例变量的类测试的构造函数中定义一个新变量。

换行：

```
int* asdf = new int(); 
```

和：

```
asdf = new int(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:00:39.897

有几个问题，如在 C++ 中，您必须正确管理内存，并且不能一直调用 new 而不处理以后的删除。

我认为这

```
void fun1(int* i)
{
  *i +=1;
} 
```

会给 +=1 比 * 更高的运算符优先级，所以你需要这样做：

```
void fun1(int* i)
{
  (*i) +=1;
} 
```

请注意，该函数需要`int*`作为参数 not `int *&`。`int *&`如果您想修改指针本身，而不是它指向的内容，您只会采用。在这种情况下，您无法传递`getint()`似乎给您编译器错误的返回值。

# html - Positioning element on right side of table header

> ID：13163861
> 
> 赞同：1
> 
> 时间：2012-10-31T17:49:22.320
> 
> 标签：html, css, html-table

I'd like to have a little handle on the right side of my tables that can be used for resizing the column. I've got some relatively clean CSS and markup that seems to do the trick ([fiddle](http://jsfiddle.net/aaronj1335/NVYJK/)):

### HTML:

```
<table>
  <thead>
    <tr>
      <th>
        <span class=resize> </span>
        <div class=label>
          Column 1
        </div>
      </th>
      <th>
        <span class=resize> </span>
        <div class=label>
          Column 2
        </div>
      </th>
    </tr>
  </thead>
</table> 
```

### CSS:

```
table thead th {
  position: relative;
}

table thead th .resize {
  width: 8px;
  background-color: gray;
  position: absolute;
  right: 0px;
  top: 0px;
  bottom: 0px;
  z-index: 1;
  cursor: col-resize;
} 
```

This seems to work great in WebKit and IE 8, but fail miserably in Firefox.

How do I make this work in Firefox as well?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:55:08.367

您需要在元素`div`内提供一个容器并在容器上使用`th``position: relative;``div`

[演示](http://jsfiddle.net/NVYJK/2/)

说明：在[CSS 2.1 Spec](http://www.w3.org/TR/CSS21/visuren.html#propdef-position)`position: relative`中未定义对表格元素的影响，所以为了让你的东西正常工作，在你的元素中使用一个包装 div 并分配给它`th``position: relative;``div`

HTML

```
<table>
  <thead>
    <tr>
      <th>
          <div class="container">
        <span class="resize"> </span>
        <div class="label">
          Column 1
        </div>
          </div>
      </th>
      <th>
          <div class="container">
        <span class="resize"> </span>
        <div class="label">
          Column 2
        </div>
           </div>
      </th>
    </tr>
  </thead>
</table> 
```

CSS

```
table thead th {
  position: relative;
}

.container {
position: relative;
}

table thead th span.resize {
  width: 8px;
  background-color: gray;
  position: absolute;
  right: 0px;
  top: 0px;
  bottom: 0px;
  z-index: 1;
  cursor: col-resize;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:54:05.157

快速回答似乎只是将标题单元格的内容包装在一个 div 中：

### HTML：

```
<table>
  <thead>
    <tr>
      <th>
        <div class=wrapper>
          <span class=resize> </span>
          <div class=label>
            Column 1
          </div>
        </div>
      </th>
      <th>
        <div class=wrapper>
          <span class=resize> </span>
          <div class=label>
            Column 2
          </div>
        </div>
      </th>
    </tr>
  </thead>
</table> 
```

### CSS

```
table thead th .wrapper {
  position: relative;
}

table thead th .resize {
  width: 8px;
  background-color: gray;
  position: absolute;
  right: 0px;
  top: 0px;
  bottom: 0px;
  z-index: 1;
  cursor: col-resize;
} 
```

[http://jsfiddle.net/NVYJK/1/](http://jsfiddle.net/NVYJK/1/)

# tomcat - Birt Viewer running on tomcat

> ID：13163863
> 
> 赞同：0
> 
> 时间：2012-10-31T17:49:26.477
> 
> 标签：tomcat, report, birt, viewer

I downloaded the birt runtine viewer, i tried an example report and it works OK. But if I put the same report in a folder it doesn't work, i changed the path into the hiperlink at index.jsp.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:31:54.963

您在浏览器中输入的 URL 字符串是什么？我们的报告在目录树中，例如链接如下所示：

```
http://localhost:8080/birt-viewer/frameset?__report=reports/test1.rptdesign&sample=my+parameter 
```

报告将是来自 birt-viewer 根目录的目录，然后您可以根据需要深入到任意级别。

# c# - 如何检测用户是否远离键盘？

> ID：13163865
> 
> 赞同：6
> 
> 时间：2012-10-31T17:49:48.517
> 
> 标签：c#

> **可能重复：**
> [使用 .NET 检测用户离开 PC](https://stackoverflow.com/questions/4516179/detecting-that-the-user-is-away-from-the-pc-with-net)

我想创建一个函数来确定某人当前是否处于 AFK 状态。为此，我想听键盘键。任何想法如何实现这样的功能？

正常`KeyPressed`事件仅在 Form 获得焦点时才有效，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:51:43.393

这是正确的。您需要更全局的东西，因为用户不会将焦点设置在单个应用程序上。看看这篇[CodeProject 文章](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)/ [Codeplex 项目](http://globalmousekeyhook.codeplex.com/)

无论语言和框架如何，这都是即时消息等应用程序确定用户是否处于 AFK 状态的方式。应该注意的是，这可以用于恶意目的，例如键盘记录器。

**抽象的：**

> 此类允许您点击键盘和鼠标和/或检测它们的活动，即使应用程序在后台运行或根本没有任何用户界面。此类使用 KeyEventArgs 和 MouseEventArgs 引发常见的 .NET 事件，因此您可以轻松检索所需的任何信息。

# jquery - Adding jQuery placeholders to dynamically created form elements

> ID：13163872
> 
> 赞同：0
> 
> 时间：2012-10-31T17:50:27.640
> 
> 标签：jquery, forms, placeholder

Has anyone successfully added jQuery placeholder text for IE8 to dynamically created form elements.

For example, I click a button and a form appears that is loaded through AJAX, I need to hit the new form with placeholder text.

I have tried using jQuery .live, .bind, .on etc... but neither are catching the new elements when they are created.

I've also tried placing it in a click function so that when they click the button the placeholder function is activated.

```
$('input[placeholder]').on("focus", function() {
    var input = $(this);
    if (input.val() == input.attr('placeholder')) {
        input.val('');
        input.removeClass('placeholder');
    }
}).blur(function() {
    var input = $(this);
    if (input.val() == '' || input.val() == input.attr('placeholder')) {
        input.addClass('placeholder');
        input.val(input.attr('placeholder'));
    }
}).blur().parents('form').submit(function() {
    $(this).find('input[placeholder]').each(function() {
        var input = $(this);
        if (input.val() == input.attr('placeholder')) {
            input.val('');
        }
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:58:39.753

```
$(document).on({
    focus: function() {
        var input = $(this);
        if (input.val() == input.attr('placeholder')) {
            input.val('');
            input.removeClass('placeholder');
        }
    },
    blur: function() {
        var input = $(this);
        if (input.val() == '' || input.val() == input.attr('placeholder')) {
            input.addClass('placeholder');
            input.val(input.attr('placeholder'));
        }
    }
},"input[placeholder]");

$(document).on("submit","form",function() {
    $(this).find('input[placeholder]').each(function() {
        var input = $(this);
        if (input.val() == input.attr('placeholder')) {
            input.val('');
        }
    });
});

$('input[placeholder]').blur(); 
```

让我知道这个重构是否有效。

# sql-server-2008-r2 - 无法从 CTE 中删除 - MSG 4405

> ID：13163876
> 
> 赞同：2
> 
> 时间：2012-10-31T17:50:53.047
> 
> 标签：sql-server-2008-r2, common-table-expression, sql-delete

为什么此 CTE 会给出错误消息？

```
;with del as (
    SELECT t1.*
    FROM t1 
          INNER JOIN t2
            ON t1.tid = t2.tid
)
DELETE del; 
```

它给出了错误信息

> 消息 4405，级别 16，状态 1，第 5 行视图或函数“t”不可更新，因为修改会影响多个基表。

完全相同的语法适用于更新，但不适用于删除。

编辑：如果 t2 不是基表，而是基于常量的 cte，则相同的语法有效。

[http://sqlfiddle.com/#!6/dcc10/2](http://sqlfiddle.com/#!6/dcc10/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-07T06:50:57.447

老问题，但这是一种使用 cte 执行此操作而不会出现多个基表错误的方法：

```
;with del as (
    SELECT t1.*
    FROM t1
    WHERE
        t1.tid in (select t2.tid from t2)
)
DELETE del; 
```

通过使用 in 比较，它会比连接慢，但它允许您拥有一个基表。此外，值得注意的是，您可以在完全不使用 cte 的情况下执行相同类型的删除：

```
DELETE FROM t1
where t1.tid in (select t2.tid from t2); 
```

和（最佳性能）：

```
DELETE t1
FROM t1
INNER JOIN t2
    ON T1.tid = t2.tid; 
```

# c++ - c++ output of an array using void display(ostream&)

> ID：13163877
> 
> 赞同：0
> 
> 时间：2012-10-31T17:50:52.863
> 
> 标签：c++

> **Possible Duplicate:**
> [singly linked chain printing c++](https://stackoverflow.com/questions/13390449/singly-linked-chain-printing-c)

How can I get my void display function to display the array found in my Set function; also how would I reference that display function in my driver file?

Thanks.

Relevant files are below

header file

```
#ifndef SET_
#define SET_

using namespace std;

#include <iostream>

class Set
{
  private:

    unsigned Cap;    // Current capacity of the set
    unsigned Num;    // Current count of items in the set
    int * Pool;      // Pointer to array holding the items

  public:

    // Return information about the set
    //
    bool is_empty() const { return Num == 0; }
    unsigned size() const { return Num; }
    unsigned capacity() const { return Cap; }

    // Initialize the set to empty
    //
    Set()
    {
      Cap = Num = 0;
      Pool = NULL;
    }

    // De-initialize the set
    //
    ~Set();

    // Initialize the set using an existing set
    //
    Set( const Set& );

    // Assign into the set from another set
    //
    Set& operator=( const Set& );

    // Test for presence of a specified item in the set
    //
    bool is_present( int ) const;

    // Remove a specified item from the set, if possible
    //
    bool remove( int );

    // Insert a specified item into the set, if possible
    //
    bool insert( int );

    // Display the set
    //
    void display( ostream& ) const;

    // Produce the union of two sets
    //
    friend Set operator+( const Set&, const Set& );

    // Produce the intersection of two sets
    //
    friend Set operator^( const Set&, const Set& );
};

#endif 
```

my implementation file

```
using namespace std;

#include <iostream>
#include "/user/cse232/Projects/project07.set.h"

void bubbleSort(int arr[], int n)
{
        bool swapped = true;
        int j = 0;
        int tmp;

        while(swapped)
        {
                j++;
                for(int i = 0; i < n-j; i++)
                {
                        if(arr[i] > arr[i+1])
                        {
                                tmp = arr[i];
                                arr[i] = arr[i+1];
                                arr[i+1] = tmp;
                                swapped = true;
                        }
                }
        }
}

Set::~Set()
{
        Cap = 0;
        Num = 0;
        delete [] Pool;
        Pool = NULL;
}

/*bool Set::is_present(int X) const
{
        bool Flag = false;

        while(unsigned Z=0;Z<=Num;Z++)
        {
                if(Pool[Z] = X)
                {
                        Flag = true;
                }
        }
        return Flag;
}*/
bool Set::insert(int X)
{
        bool Flag = false;

        if(Num == Cap)
        {
                //reallocate memory
                const unsigned Inc = 3;

                try
                {
                        int * temp = new int[Cap+Inc];

                        for(unsigned J=0; J<Num; J++)
                        {
                                temp[J] = Pool[J];
                        }
                        delete [] Pool;
                        Pool = temp;
                }
                catch(std::bad_alloc)
                {
                        cerr << "\n*** UNABLE TO INCREASE CAPACITY ***\n\n";
                }
        }
        if(Num < Cap)
        {
                //insert stuff
                Pool[Num+1] = X;
                Num++;

                bubbleSort(Pool,Num);

                Flag = true;
        }

        return Flag;
}
void display(ostream &out) const
{
        //print the array
} 
```

# c# - 如何确定处理器是否在 32 位操作系统上支持 64 位

> ID：13163879
> 
> 赞同：2
> 
> 时间：2012-10-31T17:51:07.117
> 
> 标签：c#, .net

目前我正在使用：

```
ManagementObjectSearcher searcher = 
                   new ManagementObjectSearcher("Select * FROM WIN32_Processor");
ManagementObjectCollection mObject = searcher.Get();

foreach (ManagementObject obj in mObject)
{
  var architecture = obj.GetPropertyValue("Architecture");
} 
```

`architecture`= 0

这篇[文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx)显示0表示x86

电脑运行的处理器是[intel core 2 duo E7500](http://ark.intel.com/products/36503)

操作系统是 Windows XP 32 位

CPU-Z 显示

![在此处输入图像描述](../Images/e6e4d6b206012653f293a69b9fd874ba.png)

有没有办法确定 Windows XP 计算机是否具有支持 64 位的处理器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:51:23.930

这可能并不理想，但使用 VC++ 等创建（本机）DLL 并直接查询处理器的功能相对简单。然后可以从您的 C# 应用程序中 PInvoked 此方法。

`true`当在支持 64 位的处理器和`false`仅 32 位的处理器（无论操作系统是 32 位还是 64 位）上运行时，以下 C++ 方法将返回：

```
bool __declspec(naked) IsCPU64BitCapable()
{
    __asm
    {
        // Save EBX since it's affected by CPUID
        push ebx
        // Determine whether the CPU supports retrieving extended feature data
        mov eax, 0x80000000
        cpuid
        cmp eax, 0x80000000
        // No extended data => no 64 bit
        jbe no_extended_data
        // Request extended feature data
        mov eax, 0x80000001
        cpuid
        // Bit 29 of EDX will now indicate whether the CPU is 64 bit capable
        mov eax, edx
        shr eax, 29
        and eax, 1
        jmp extended_data
    no_extended_data:
        xor eax,eax
    extended_data:
        // Restore EBX
        pop ebx
        ret
    }
} 
```

然后可以使用以下方法从 C# 中使用此方法：

```
[DllImport("Test64Bit.dll")]
private static extern bool IsCPU64BitCapable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:01:21.087

一个简单但并非万无一失的方法是检查注册表中的 CPU，应该在`HKLM\HARDWARE\DESCRIPTION\CentralProcessor\0`.

就像是

```
var rk = Registry.LocalMachine.OpenSubKey("HARDWARE\\DESCRIPTION\\System\\CentralProcessor\\0");
if (rk.GetValue("Identifier").ToString().IndexOf("64") > 0)
{
   // Is 64 bits
} else {
   // Is 32 bits
} 
```

不知道这对你来说是否足够

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T00:18:51.827

这篇[kb 文章](http://support.microsoft.com/kb/952978?wa=wsignin1.0)可能会描述您所看到的内容。建议的解决方法是转到注册表项，在该注册表项`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\ACPI`下将有一个带有处理器友好名称的键。您可以根据友好名称是否包含 Intel64 或 x86 来推断架构。

# php - javascript Reservation system, checkin checkout date with already booked date

> ID：13163882
> 
> 赞同：2
> 
> 时间：2012-10-31T17:51:18.667
> 
> 标签：php, javascript, jquery

I am looking for help in coding. I ve a booking system similar to airbnb. My issue is related to booking date. To be more specific i ll give you one example

One appartment is already booked for those following dates 2 dec 2012 till 5 dec 2012:

if a new customer select the following dates from 4 dec 2012 till the 6 dec 2012, it displayed message saying "those dates are already booked".

But if the customer select dates like those one 1 dec til the 6 dec or 29 nov and 10 dec. The system let the customer proceed like if the dates are availables.

To sum up: i d like to make sure that customer will have the message " those dates are already booked" if the period he selected includes dates that have already been booked.

I am not an expert in coding, not at all. But i am quite sure that the problem comes from the javascript that display available Flats.

I will put the entire Js.

The message " those dates are already booked" corresponds to #book_it_disabled_message.

Thank you in advance for you time and skills.

```
function check_inputs(b, c, a) {
b = typeof (b) != "undefined" ? b : true;
c = typeof (c) != "undefined" ? c : "checkin";
a = typeof (a) != "undefined" ? a : "checkout";
if (calendar_is_not_set_date(c)) {
    if (b) {
        calendar_show_cal(c)
    }
    return false
}
if (calendar_is_not_set_date(a)) {
    if (b) {
        calendar_show_cal(a)
    }
    return false
}
return true
}

function copy_checkin_checkout_fields() {
var a = check_inputs(false);
if (a) {
    jQuery("#message_checkin").val(jQuery("#checkin").val());
    jQuery("#message_checkout").val(jQuery("#checkout").val());
    jQuery("#message_number_of_guests").val(jQuery("#number_of_guests").val());
    check_availability_of_dates()
}
}

function copy_message_fields_to_book_it() {
jQuery("#checkin").val(jQuery("#message_checkin").val());
jQuery("#checkout").val(jQuery("#message_checkout").val());
jQuery("#number_of_guests").val(jQuery("#message_number_of_guests").val())
}

function refresh_subtotal() {
var a = function (c, e, d) {
        var b;
        if (c.available) {
            jQuery("#book_it_disabled").hide();
            jQuery("#book_it_enabled").show();
            b = jQuery("#price_amount").html(c.price_per_night).data("nightly-price", c.price_per_night);
            jQuery("#service_fee").html(c.service_fee);
            CogzidelRooms.staggered = c.staggered;
            if (CogzidelRooms.staggered === true) {
                if (CogzidelRooms.stayOffered !== 0) {
                    jQuery("#payment_period").hide();
                    jQuery("#per_month").show();
                    CogzidelRooms.$cancellationVal.text(Translations.long_term);
                    jQuery("#includesFees").show();
                    jQuery("#book_it_default").addClass("monthly")
                }
                jQuery("#subtotal_area").hide();
                jQuery("#show_more_subtotal_info").hide();
                jQuery("#price_amount").text(Cogzidel.Utils.decode(c.staggered_price));
                b.data("monthly-price", c.staggered_price);
                CogzidelRooms.hideMonthlyPriceDetails()
            } else {
                if (CogzidelRooms.stayOffered === 2) {
                    jQuery("#per_month").hide();
                    CogzidelRooms.$cancellationVal.text(CogzidelRooms.originalCancellationPolicy);
                    jQuery("#includesFees").hide();
                    jQuery("#book_it_default").removeClass("monthly");
                    jQuery("#payment_period").show()
                }
                jQuery("#subtotal_area ").show();
                jQuery("#subtotal_area").find("p").show();
                jQuery("#show_more_subtotal_info").show();
                jQuery("#subtotal").html(c.total_price);
                jQuery("#payment_period").val("per_night");
                b.removeAttr("data-monthly-price");
                CogzidelRooms.showMonthlyPriceDetails()
            }
            if (c.can_instant_book) {
                Page3.showInstantBookButton()
            } else {
                Page3.showBookItButton()
            }
        } else {
            if (CogzidelRooms.stayOffered === 1) {
                jQuery("#payment_period").hide();
                jQuery("#per_month").show();
                CogzidelRooms.$cancellationVal.text(Translations.long_term);
                jQuery("#includesFees").show();
                CogzidelRooms.hideMonthlyPriceDetails()
            } else {
                jQuery("#book_it_default").removeClass("monthly");
                jQuery("#payment_period").show();
                jQuery("#per_month").hide();
                  CogzidelRooms.$cancellationVal.text(CogzidelRooms.originalCancellationPolicy);
                jQuery("#includesFees").hide();
                jQuery("#price_amount").html(jQuery("#price_amount").data("nightly-price"));
                CogzidelRooms.showMonthlyPriceDetails()
            }
            jQuery("#book_it_disabled_message").html(c.reason_message);
            jQuery("#book_it_enabled").hide();
            jQuery("#book_it_disabled").show();
            jQuery("#show_more_subtotal_info").hide()
        }
        jQuery("#book_it_status").pulsate(1, 600)
    };
jQuery("#book_it_button").removeAttr("disabled");
jQuery("#subtotal_area").find("p").hide();
jQuery("#subtotal_area").show();
if (calendar_is_not_set_date("checkin") || calendar_is_not_set_date("checkout")) {
    a = function () {};
    jQuery("#book_it_disabled").hide();
    jQuery("#book_it_enabled").show();
    jQuery("#subtotal_area").hide();
    jQuery("#show_more_subtotal_info").hide()
} else {
    jQuery("#subtotal, #book_it_disabled_message").html('<img src="'+base_url+'images/spinner.gif" alt="" height="16" width="16" />')
}
jQuery.getJSON(base_url+"rooms/ajax_refresh_subtotal", jQuery("#book_it_form").serialize(), a)
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:17:42.787

从这一行：

```
if (calendar_is_not_set_date("checkin") || calendar_is_not_set_date("checkout")) { 
```

看来您正在互斥功能中测试日期 1 和日期 2。如果您一次只测试 1 天，您还必须在 (checkin) 和 (checkout) 之间的每一天进行测试。

也许您需要一个接受签入和签出日期作为 2 个参数的函数，并测试该日期块是否可用。

# ruby-on-rails - RSpec 中出现意外的 nil 变量

> ID：13163885
> 
> 赞同：2
> 
> 时间：2012-10-31T17:51:46.453
> 
> 标签：ruby-on-rails, rspec, capybara

我有一个非常基本的 RSpec 示例，它不起作用。这是代码：

```
require 'spec_helper'

describe "Referral-type functionality" do
  describe "Affiliate system" do
    before { @affiliate = Affiliate.create(account_id: 1) }
    subject { @affiliate }

    describe "URL should work" do
      visit @affiliate.aff_url
    end

  end
end 
```

但是，当我运行它时，rspec 给出了 NoMethodError，因为 @affiliate 为 nil。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T17:55:58.090

块中定义的实例变量在`before`示例块 ( `it`, `specify`) 中可见，但在块中不可见`describe`。例如：

```
specify 'URL should work' do
  visit @affiliate.aff_url
end 
```

# maven - 在部署期间覆盖 Maven 发布存储库

> ID：13163890
> 
> 赞同：19
> 
> 时间：2012-10-31T17:52:16.453
> 
> 标签：maven, plugins, release

我正在开发一个开源库，并希望将版本发送到内部工件服务器。我一直在使用 Maven`distributionManagement`并覆盖`altDeploymentRepository`指向内部服务器（所以它永远不会在 pom 中）。当我这样做时这很好用，`deploy:deploy`但是当我使用 maven 发布插件时，这似乎被忽略了。

```
mvn clean -DaltDeploymentRepository=central::default::internalhost deploy ## works
mvn clean -DaltDeploymentRepository=central::default::internalhost release:perform ## fails, doesn't pick up this setting 
```

当发布插件运行部署时，如何通过命令行覆盖存储库？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-08-12T00:46:12.017

利用

```
altReleaseDeploymentRepository 
```

它具有与 altDeploymentRepository 相同的语法

更多内容：[https ://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html](https://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-06T11:17:03.630

> mvn 发布：执行 -Darguments=-DaltDeploymentRepository=myvalue

诀窍是：'-Dargument'

有效的解决方案在**yorkw**注释中（对于 2.7 版中的 maven-deploy-plugin） 当您使用更高版本的 maven-deploy-plugin（例如 2.8）时，请使用参数 altReleaseDeploymentRepository。

[maven-deploy-plugin 文档](https://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T19:20:06.113

在您正在使用的版本上，您应该编辑 pom 以更改分发管理部分以使用您的内部存储库。

# c# - 如何为单个字符着色并保持适当的间距/字距调整/对齐？

> ID：13163894
> 
> 赞同：2
> 
> 时间：2012-10-31T17:52:33.080
> 
> 标签：c#, gdi+, drawstring

我想使用 Graphics.DrawString 使用单独的颜色绘制字符。

问题是每次调用 DrawString 时，我都必须知道相对于其他字符的位置（使用点或矩形）。

考虑到在具有 StringFormat 的矩形中使用 DrawString 时发生的字距调整和换行，这几乎是可能的。StringFormat 对于指定对齐、换行、修剪等很重要。

理想情况下，我能够告诉 DrawString 如何单独为每个字符着色。另一种选择是如果我可以使用 StringFormat 测量矩形中的字符串，然后检索每个字符索引的 X 和 Y 位置，以便我可以用自己的画笔绘制每个字符。

我尝试单独测量每个字符，但这不起作用，因为字符串中的字符组合与单独测量的每个字符的宽度不同。

**编辑**：当我取一个字符串，获取 Region 数组，用红色和蓝色交替填充这些区域，然后尝试在这些区域中绘制每个单独的字符时，会发生以下情况：

![在此处输入图像描述](../Images/2f7e372751cb9ac36f0477a2ff0ddbb2.png)

我按如下方式调用 DrawString：

```
g.DrawString(character, font, brush, region.GetBounds(g)); 
```

还尝试了以下方法：

```
Rectangle bounds = Region.GetBounds(g);
g.DrawString(character, font, brush, new PointF(bounds.Left, bounds.Top)); 
```

和，

```
g.DrawString(character, font, brush, region.GetBounds(g), stringFormat); 
```

结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:39:26.840

GDI+ 的 DrawString 正在填充结果，它解释了你得到的左偏移量。

尝试使用 GDI 来测量字符串。幸运的是，这是实现的，并且很容易通过`TextRenderer()`对象 f.ex 从 .Net 访问：

```
Size sz = TextRenderer.MeasureText(character, 
                                   font, 
                                   new Point(Integer.MaxValue, Integer.MaxValue),
                                   TextFormatFlags.NoPadding); 
```

您还可以查看`TextRenderer.DrawText()`.

当然，您始终可以修改您的`StringFormat`实例以使用中心对齐并`DrawString`使用矩形而不是点。

```
StringFormat sf = new StringFormat();
sf.Alignment = StringAlignment.Center;
Rectangle cr = new Rectangle(x, y, w, h); //same as the colored region
g.DrawString(character, font, brush, cr, sf); 
```

希望这可以帮助。

# python - Python Twitter 工具 - 将多个用户添加到列表失败 (lists.members.create_all)

> ID：13163895
> 
> 赞同：1
> 
> 时间：2012-10-31T17:52:40.447
> 
> 标签：python, api, list, twitter, http-status-code-404

我正在使用[Python Twitter 工具 API](https://github.com/sixohsix/twitter)尝试使用Twitter API v1.1 的[lists.members.create_all](https://dev.twitter.com/docs/api/1.1/post/lists/members/create_all)将多个成员添加到列表中，但出现此错误：

Twitter 为 URL 发送状态 404：1.1/lists/members/create_all.json {"errors":[{"message":"抱歉，该页面不存在","code":34}]}

其他调用工作正常，将单个成员添加到列表工作正常。我的代码如下，希望有人能就如何正确使用lists.members.create_all 提供帮助！

```
#!/usr/bin/python
from twitter import *

OAUTH_TOKEN = 'my oauth token'
OAUTH_SECRET = 'my oauth secret'
CONSUMER_KEY = 'my consumer key'
CONSUMER_SECRET = 'my consumer secret'

USERNAME =  "my username"
LIST_NAME = "fud"

def main():

  twitter = Twitter(api_version='1.1', auth=OAuth(OAUTH_TOKEN, OAUTH_SECRET, CONSUMER_KEY,     CONSUMER_SECRET))
  try:

    # view a users lists
    lists = twitter.lists.list(user=USERNAME)
    # create a list
    create_list = twitter.lists.create(name=LIST_NAME)
    # view list members
    list_members = twitter.lists.members(slug=LIST_NAME, owner_screen_name=USERNAME)
    # add single user to list
    twitter.lists.members.create(owner_screen_name=USERNAME, slug=LIST_NAME, screen_name="microsoft")

    # add multiple users to list - fails !!!
    twitter.lists.members.create_all(owner_screen_name=USERNAME, slug=LIST_NAME, screen_name="twitter,python")

  #Produces error:
  #Twitter sent status 404 for URL: 1.1/lists/members/create_all.json using parameters: 
  #{"errors":[{"message":"Sorry, that page does not exist","code":34}]}

  except TwitterHTTPError as twerr:
    import zlib
    print twerr, zlib.decompress(twerr.response_data, 16+zlib.MAX_WBITS) # gunzip response error info 

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:46:01.843

我相信你的电话`create_all()`是正确的。诀窍是（我最近下载的版本）Python Twitter 工具在调用 Twitter API 来创建列表成员时默认为 GET 请求而不是 POST 请求。

需要 POST 的方法列表存储在`twitter_globals.py`. 我添加`'create_all'`到`POST_ACTIONS`列表中，这似乎有效。

# ruby - 如何查找所有并按计数排序？

> ID：13163897
> 
> 赞同：1
> 
> 时间：2012-10-31T17:52:50.237
> 
> 标签：ruby, mongodb, mongoid3

如何构建一个查询，返回按嵌入式帖子 ID 计数排序的所有实体？

样本数据：

```
{ "_id" : ObjectId( "5090f8061e7bf28095000012" ),
  "name" : "test",
  "post_ids" : 
    [ ObjectId( "5090f8061e7bf28095000010" ) ],
    [ ObjectId( "5090f8061e7bf28095000011" ) ] },
{ "_id" : ObjectId( "5090f8061e7bf28095000012" ),
  "name" : "test2",
  "post_ids" : [ 
    ObjectId( "5090f8061e7bf28095000010" ), 
    ObjectId( "509104ec1e7bf2989b00000b" ), 
    ObjectId( "509105001e7bf2989b00000f" ) ] }

#my actual query returns only count:
tags_by_count = Tag.desc(:post_ids).count 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:06:47.713

我认为这在 MongoDB 中是不可能的。我正在阅读的所有内容都建议为数组的长度创建第二个字段并对其进行索引。

这有点旧，但可能仍然相关：

[https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/zSSnj6ldfLE](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/zSSnj6ldfLE)

此外，即使有可能，它也会很慢，因为它需要使用 javascript 而不是索引排序，因为你绝对不能索引数组长度。

# jquery - 如何使用jquery carousel在非活动元素li上设置不透明度

> ID：13163900
> 
> 赞同：0
> 
> 时间：2012-10-31T17:53:00.430
> 
> 标签：jquery, carousel

我试图尝试一些不同的轮播，我希望有可能改变轮播本身中非活动元素的不透明度。

```
 <section class="wrap">

<div></div>   
</section>    

<section id="carousel">
<ul>
    <li>

            <div class="col">1</div>
            <div class="col">2</div>
            <div class="col">3</div>

    </li>
   <li>

            <div class="col">4</div>
            <div class="col">5</div>
            <div class="col">6</div>

    </li>
    <li>

 $(document).ready(function() {
$("#carousel ul").jcarousel({
        scroll:1,
        auto:5,
        wrap:'both',
        easing: 'easeInOutBack',
        buttonNextHTML: null,
        buttonPrevHTML: null
    });

});​ 
```

在下面的这个[链接](http://jsfiddle.net/AntonioCapuozzo/GCJNP/embedded/result/)中有一个例子，我想从中央 div 开始。col ，让其他元素，左边一个和右边一个几乎看不见，这可能吗？？？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:59:24.120

我找到了插件作者的一个例子，我相信它可以满足你的需求。您可以查看此链接：

[https://github.com/jsor/jcarousel/tree/91b1616fab0e3dfbdb8f39e42f39c48cbe6000d6/examples/feature_slider](https://github.com/jsor/jcarousel/tree/91b1616fab0e3dfbdb8f39e42f39c48cbe6000d6/examples/feature_slider)

// 编辑，你可以试试这个，稍微摆弄一下它应该可以工作。

CSS -`.jcarousel-item { opacity : 0.1 } .jcarousel-item.active { opacity: 1 !important }`

JS-

```
jQuery(document).ready(function() {
   jQuery('#mycarousel').jcarousel({
    visible: 3,
    scroll: 1,
    itemVisibleInCallback: {
    onAfterAnimation: function ( c, o, i, s ) {
        i = ( i - 2 ) % $('#mycarousel li').size();
        jQuery('.jcarousel-item').removeClass('active');
        jQuery('.jcarousel-item').eq( i ).addClass('active');
    }
}
}); 
```

});

​</p>

​</p>

# objective-c - 检测窗口何时关闭？

> ID：13163904
> 
> 赞同：2
> 
> 时间：2012-10-31T17:53:13.113
> 
> 标签：objective-c, cocoa, class, window, nswindowcontroller

我的一个班级分配了一个 custom `NSWindowController`，我的班级如何知道窗口何时关闭？

```
CustomNSWindowController *wc = [[CustomNSWindowController alloc] init];
[wc showWindow:self];
//how to detect when window is closed? 
```

我想要做的是让原始类（分配自定义窗口控制器的那个）知道窗口何时关闭，以便我可以在不再需要窗口时设置 wc = nil :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:56:27.583

如果您的`NSWindowController`类被设置为窗口的委托，您可以简单地响应该`-windowWillClose:`方法。

```
- (void)windowWillClose:(NSNotification *)notification
{
    /* ... */
} 
```

否则，由于这也是一个通知，您可以注册以接收来自任何班级的通知。

```
- (void)myWindowWillClose:(NSNotification *)notification
{
    /* ... */
}

...
CustomNSWindowController *wc = ...;
[[NSNotificationCenter defaultCenter]
    addObserver:self
    selector:@selector(myWindowWillClose:)
    name:NSWindowWillCloseNotification
    object:[wc window]];
[wc showWindow:self]; 
```

请参阅[NSWindow 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)、[NSWindowDelegate 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSWindowDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:57:38.620

我猜你可以发送一个通知，或者让你的父类成为 CustomNSWindowController 的代表。

[编辑] - 迪特里希是对的 - 我忘记了 NSWindow 委托协议。您可以将父类设置为 windowController 的窗口的委托

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:11:38.107

使用委托**- (BOOL)isWindowLoaded**检查它是否关闭：
到此委托的文档 [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/参考.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html)

如果你想看看关闭的窗口里面

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html)

# php - 使用.htaccess在php localhost中重写url不起作用

> ID：13163908
> 
> 赞同：-1
> 
> 时间：2012-10-31T17:53:21.363
> 
> 标签：php, .htaccess, url-rewriting, apache2

我想重写网址

```
http://localhost/Ent/Movie/Info.php?year=2011&movie=any_movie 
```

到

```
http://localhost/Ent/Movie/Info/2011/any_movie 
```

我在.htaccess中尝试了很多代码，比如

```
Options +FollowSymLinks 
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteBase /Ent/Movie/
RewriteRule ^Info/([0-9]+)/([a-zA-Z0-9]+)$ Info.php?year=$1&movie=$2 [L] 
```

请注意，我的 .htaccess 文件位于网站的根目录中。

我的 .htaccess 位置错误**还是**.htaccess 中的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:27:08.193

从外部将浏览器重定向到更好看的 URL（不带查询字符串）：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /Ent/Movie/Info\.php\?year=([^&]+)&movie=([^&\ ]+)([^\ ]*)
RewriteRule ^ /Ent/Movie/Info/%2/%3?%4 [L,R=301] 
```

然后在内部重写它

```
RewriteRule ^/?Ent/Movie/Info/([0-9]+)/(.*)$ /Ent/Movie/Info.php?year=$1&movie=$2 [L,QSA] 
```

这些规则位于文档根目录中，它们将位于以下位置：

```
Options +FollowSymLinks 
RewriteEngine on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:09:09.190

```
RewriteRule ^Info/([0-9]+)/([a-zA-Z0-9]+)$ Info.php?year=$1&movie=$2 
```

会以相反的方向匹配重写，因此您需要将逻辑反转为：

```
RewriteRule ^Info.php?year=([0-9]+)&movie=([a-zA-Z0-9]+)$ Info/$1/$2 
```

首先是您要匹配的内容，第二个参数是您要生成的模式。请参阅[mod_rewrite 教程](http://httpd.apache.org/docs/current/rewrite/intro.html#regex)。

# image-processing - 如何打开 .xv 文件？

> ID：13163910
> 
> 赞同：2
> 
> 时间：2012-10-31T17:53:25.280
> 
> 标签：image-processing, matlab

如何在 Matlab 中打开 .xv 文件（Khoros 可视化图像）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:10:43.687

似乎它只适用于我提到的图像。（第一个 KB 包含一些其他相关信息，然后是图像数据）

```
 function d = loadimg(fn)
                      fid = fopen(fn,'r');
                      data = fread(fid);
                      fclose(fid);

                      d = data(1025:end);
                      d = reshape(d, 64,64);
                   end 
```

谢谢您的帮助..

# heroku - 生产应用程序中断。“H20 - 应用程序启动超时”

> ID：13163912
> 
> 赞同：6
> 
> 时间：2012-10-31T17:53:41.490
> 
> 标签：heroku

我们的生产应用程序正面临一个严重的`Outage with H20 - App boot timeout`错误记录。

证据有力地指向了heroku平台问题。我们需要一些快速的支持。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T19:35:50.653

刚遇到这个。我不确定是什么原因造成的，但“heroku ps：restart”似乎可以解决它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T00:30:48.587

经过几次尝试，“heroku ps:restart”通过几分钟的停机时间解决了这个问题。当我单独尝试“heroku restart”时，它没有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-07T04:36:29.717

收听 127.0.0.1 会导致我们出现**code=H20 desc="App boot timeout"**问题。将**监听地址改为 0.0.0.0 即可**解决问题。

另外，不要使用您自己的端口，而是**使用环境变量 PORT**，它由 heroku 传递给您的应用程序环境变量。否则，你也会遇到这个问题。

这是我们的节点代码：

```
const { PORT=3000, LOCAL_ADDRESS='0.0.0.0' } = process.env
server.listen(PORT, LOCAL_ADDRESS, () => {
  const address = server.address();
  console.log('server listening at', address);
}); 
```

因此，请尝试记录您的侦听地址和端口并首先检查它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-06T20:27:24.010

我的解决方案是**CHANGE THE PORT**，这是一般的想法。

就我而言，我使用了 NODEJS：

```
const app = express();    
app.set('port', process.env.PORT || 3000); // Process.env.PORT change automatically the port IF 3000 port is being used.
app.listen(app.get('port'), () => console.log(`Node server listening on port ${app.get('port')}!`)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-10T21:43:27.613

我刚遇到这个问题 -`heroku restart`并`heroku ps:restart`没有帮助我。

我暂时升级了测功机（迫使新的测功机接管）。这解决了这个问题。

# ios - IOS：展开一个imageView全屏

> ID：13163919
> 
> 赞同：0
> 
> 时间：2012-10-31T17:54:04.390
> 
> 标签：ios, uiimageview, scaletransform

我有这种情况

![在此处输入图像描述](../Images/3cb73c10270f20a416f531969cbd6aaf.png)

橙色区域是我的视图，绿色区域是 ImageView；现在我想问你是否有办法放大这个 imageView 全屏并用动画将它扩展到所有视图。我知道如何制作动画，我认为我可以使用

imageView.transform=CGAffineTransformMakeScale(x, y);

但这不简单，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T17:59:51.473

这应该是您需要做的所有事情。它将设置 imageView 的大小以匹配 orangeView 的大小并定位 imageView 使其覆盖 orangeView。

```
[UIView animateWithDuration:0.5f animations:^{
    imageView.frame = orangeView.bounds;
}]; 
```

# java - 使用 Jsoup 进行抓取的更好方法

> ID：13163922
> 
> 赞同：0
> 
> 时间：2012-10-31T17:54:16.977
> 
> 标签：java, jsoup

我今天开始使用 JSoup。因此，作为一个例子，我开始从这个[站点](http://www.samair.ru/proxy/socks01.htm)抓取代理。

在玩了很多之后，我能够抓取代理，但没有它们的端口号，因为它们使用的是 JavaScript。我想知道我们是否也可以使用 JSoup 刮取这些端口号。由于这是我的第一次尝试，我想知道我采取的方法是否正确。所以我发布了可以获取代理的代码。

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.jsoup.safety.Whitelist;

public class ListLinks
{
    public static void main(String[] args)
    {
        try
        {
            Document doc = Jsoup.connect("http://www.samair.ru/proxy/socks01.htm").get();
            Elements content = doc.select("table.tablelist tbody tr ");
            for(Element com: content)
            {
                Element fi=com.select("td").first();
                String e=fi.text();
                String safe=Jsoup.clean(e,Whitelist.basic());
                System.out.println(safe);
            }

        }
        catch(Exception e)
        {
          System.out.print("Problem");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:27:07.957

是的，你的方法没问题。

但有一件事：没有必要`String safe=Jsoup.clean(e,Whitelist.basic());`
因为`String e=fi.text();`会给你一个干净的字符串。

# android - 相机不工作 - startPreview 失败

> ID：13163924
> 
> 赞同：2
> 
> 时间：2012-10-31T17:54:24.577
> 
> 标签：android, exception, camera, surfaceview

在 Android 2.x 设备上运行时，我的相机应用程序总是出现异常。在较新的 Android 设备上，该应用程序运行良好。

堆栈跟踪：

```
10-31 19:51:52.187: W/System.err(14904): java.lang.RuntimeException: startPreview failed
10-31 19:51:52.195: W/System.err(14904):    at android.hardware.Camera.startPreview(Native Method)
10-31 19:51:52.195: W/System.err(14904):    at com.example.MainActivity.startCamera(MainActivity.java:418)
10-31 19:51:52.195: W/System.err(14904):    at com.example.MainActivity.surfaceChanged(MainActivity.java:467)
10-31 19:51:52.195: W/System.err(14904):    at android.view.SurfaceView.updateWindow(SurfaceView.java:558)
10-31 19:51:52.195: W/System.err(14904):    at android.view.SurfaceView.dispatchDraw(SurfaceView.java:350)
10-31 19:51:52.195: W/System.err(14904):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
10-31 19:51:52.195: W/System.err(14904):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-31 19:51:52.195: W/System.err(14904):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
10-31 19:51:52.195: W/System.err(14904):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-31 19:51:52.195: W/System.err(14904):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
10-31 19:51:52.195: W/System.err(14904):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-31 19:51:52.195: W/System.err(14904):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
10-31 19:51:52.195: W/System.err(14904):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-31 19:51:52.195: W/System.err(14904):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
10-31 19:51:52.203: W/System.err(14904):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-31 19:51:52.203: W/System.err(14904):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
10-31 19:51:52.203: W/System.err(14904):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-31 19:51:52.203: W/System.err(14904):    at android.view.View.draw(View.java:6883)
10-31 19:51:52.203: W/System.err(14904):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
10-31 19:51:52.203: W/System.err(14904):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1964)
10-31 19:51:52.203: W/System.err(14904):    at android.view.ViewRoot.draw(ViewRoot.java:1529)
10-31 19:51:52.203: W/System.err(14904):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1266)
10-31 19:51:52.203: W/System.err(14904):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1867)
10-31 19:51:52.203: W/System.err(14904):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-31 19:51:52.203: W/System.err(14904):    at android.os.Looper.loop(Looper.java:130)
10-31 19:51:52.203: W/System.err(14904):    at android.app.ActivityThread.main(ActivityThread.java:3687)
10-31 19:51:52.203: W/System.err(14904):    at java.lang.reflect.Method.invokeNative(Native Method)
10-31 19:51:52.203: W/System.err(14904):    at java.lang.reflect.Method.invoke(Method.java:507)
10-31 19:51:52.203: W/System.err(14904):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
10-31 19:51:52.203: W/System.err(14904):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
10-31 19:51:52.203: W/System.err(14904):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T17:54:24.577

在 SurfaceView Holder 上，确保将类型设置为 SURFACE_TYPE_PUSH_BUFFERS

```
@Override
public void onCreate(Bundle savedInstanceState) {
   // ...
   SurfaceView s=(SurfaceView)findViewById(R.id.surface);
   SurfaceHolder h=s.getHolder();
   h.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
} 
```

# php - 请帮助我，需要来自mysql查询的循环

> ID：13163927
> 
> 赞同：-3
> 
> 时间：2012-10-31T17:54:28.133
> 
> 标签：php, loops, while-loop

我有一张包含以下信息的表格：

```
id ctype weeknum  daynum   posting
1  2     2        3        15.55
2  2     4        5        60.50
3  2     15       1        10.00
4  2     17       2        100.55 
```

我希望使用此循环在正确的行和列上使用“发布”。

```
for($row=1;$row<=52;$row++) // 52 weeks in a year
{
for($col=1;$col<=7;$col){                // 7 days in a week

$query=mysql_query("select * from table where ctype=2");
$weekday=mysql_fetch_array($query);

if($row==$weekday['weeknum'] && $col==$weekday['daynum']){

echo "<input type='text' value'".$posting['posting']."' />";
} else {

echo "<input type='text' />";     // will display a blank textbox

}
}
} 
```

这样的事情是我想要实现的。[http://tvends.com/sample/sample.jpg](http://tvends.com/sample/sample.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:28:11.123

它应该是这样的

```
$mysql = new mysqli("localhost", "root", "", "test");
$result = $mysql->query("SELECT * FROM stack  WHERE ctype = 2");

$map = array();

while ( $row = $result->fetch_assoc() ) {
    $map[$row['weeknum']][$row['daynum']] = $row['posting'];
}

print("<table><thead><tr>");
printf("<td>Week</td>");
for($i = 1; $i <= 7; $i ++) {
    printf("<td>%s</td>", "Day $i");
}
print("</tr></thead>");

print("<tbody>");

for($w = 1; $w <= 52; $w ++) {
    print("<tr>");
    printf("<td>%d</td>", $w);
    for($d = 1; $d <= 7; $d ++) {
        $key = "day_{$w}_{$d}";
        if (isset($map[$w][$d])) {
            printf("<td><input type='text' value='%s' name='%s' /></td>", $map[$w][$d], $key);
        } else {
            printf("<td><input type='text' name='%s' /></td>", $key);
        }
    }
    print("</tr>");
}

print("</tbody></table>"); 
```

# c++ - 在 USB 设备上使用 readFile 时为空缓冲区

> ID：13163931
> 
> 赞同：1
> 
> 时间：2012-10-31T17:54:54.963
> 
> 标签：c++, usb, readfile, createfile

此代码应从 USB 闪存驱动器的零扇区读取一些数据，然后打印出一些数据。但是，当我运行它时，缓冲区中没有任何内容。

```
int _tmain(int argc, _TCHAR* argv[])
{
    int ReadSect = 0;
    char diskname[60];
    sprintf_s(diskname, "\\\\.\\K:", 'K');

    HANDLE DiskHandle = CreateFile((LPCTSTR) diskname , GENERIC_READ,FILE_SHARE_READ,     NULL, OPEN_EXISTING, 0, NULL);
        // set up the offsets for the addresses passed to setFilePointer, and ReadFile
    long lo_offset, hi_offset;
    LPDWORD temp = 0;
    lo_offset = ReadSect << 9;
    hi_offset = ReadSect >> 23;
    (void) SetFilePointer( DiskHandle, 0, &hi_offset, FILE_BEGIN);

    char buf[1024];
    for(int i = 0; i<512;i++) {
        buf[i]='X'; 
    }

    if (! ReadFile(DiskHandle, buf, 512, (LPDWORD)&lo_offset, NULL) )  {
        printf("error reading sector %ld\n", ReadSect);
    CloseHandle(DiskHandle);
    }
    for(int i = 0; i<512;i++) {
        cout<<(char)buf[i];
    }
    cout<<endl<<endl<<endl;
    getchar();
} 
```

# android - Horizo ntalListView 选择器

> ID：13163936
> 
> 赞同：2
> 
> 时间：2012-10-31T17:55:20.167
> 
> 标签：android

我有一个 Horizo​​ntalListView [https://github.com/vieux/Android-Horizo](https://github.com/vieux/Android-Horizontal-ListView) ​​ntal- ListView 里面有几个项目，每个项目都有一个包含一些文本和图像的相对布局。我已经为这个相对布局添加了一个选择器，它在较新版本的 android 中效果很好，将每个项目的相对布局设置为白色，按下时将其设置为白色。

问题是，在旧版本的 android 中，当我滚动时，Horizo​​ntalListview 开始表现得很奇怪，这是因为我将 android:clickable="true" 添加到每个相对布局中。如果我删除此属性，HLV 开始正常工作，但选择器将无法工作。

这是我的布局：

```
<RelativeLayout
        android:id="@+id/marcoNota"
        android:layout_width="@dimen/tile_width"
        android:layout_height="@dimen/tile_height"
        android:background="@drawable/tile_selector"
        android:clickable="true"
        android:paddingBottom="2dp"
        android:paddingTop="2dp"
        android:paddingLeft="2dp"
        android:paddingRight="2dp"> 
</RelativeLayout> 
```

我什至尝试在适配器上设置一个 onTouchListener 以获得相同的结果。

我想知道是否可以使用选择器设置 Clickable="true" 或任何解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T23:19:30.213

我解决了在 Horizo​​ntalListView.java 中实现以下方法的问题：

这用于检测 Action_UP（当用户将手指从所选视图上抬起并将相对布局绘制为默认颜色时）：

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
        if(habilitar){
            if (event.getAction() == android.view.MotionEvent.ACTION_UP ||event.getAction() == android.view.MotionEvent.ACTION_CANCEL){
                for(int i=0;i<getChildCount();i++){
                    View child = getChildAt(i);
                    if (isEventWithinView2(event, child)) {
                        if(mOnItemUnSelectedListener != null){
                            mOnItemUnSelectedListener.onItemUnSelected(child);
                        }
                        break;
                    }
                    if(mOnItemUnSelectedListener != null && child != null){
                        mOnItemUnSelectedListener.onItemUnSelected(child);
                    }
                }
            }
        }

        return true;
    } 
```

在 mOnGesture 手势检测器声明中，我将此功能添加到 onDown 方法。当用户在视图上按下时，这允许绘制包含内容的选定项目的相对布局：

```
for(int i=0;i<getChildCount();i++){
                    View child = getChildAt(i);
                    if (isEventWithinView2(e, child)) {
                        if(mOnItemSelected != null){
                            mOnItemSelected.onItemSelected(HorizontalListView.this, child, mLeftViewIndex + 1 + i, mAdapter.getItemId( mLeftViewIndex + 1 + i ));
                        }
                        break;
                    }
                } 
```

然后我添加了一些侦听器以允许适配器绘制按下的视图，对于取消选择侦听器，我实现了以下接口：

```
private OnItemUnSelectedListener mOnItemUnSelectedListener;

public void setOnItemUnSelectedListener(OnItemUnSelectedListener listener ){
        mOnItemUnSelectedListener = listener;

}
public interface OnItemUnSelectedListener{
    public void onItemUnSelected(View v);
} 
```

对于选定的监听器，我使用了类中已经定义的监听器：

```
private OnItemSelectedListener mOnItemSelected; 
```

最后在我的适配器中，我设置了监听器：

```
HorizontalListView listview = (HorizontalListView) retval.findViewById(R.id.listviewH);
listview.setOnItemSelectedListener(this);
listview.setOnItemUnSelectedListener(this); 
```

我根据用户是否按下视图来设置布局的颜色

```
@Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
        if(arg1.findViewById(R.id.marcoNota) != null){
            arg1.findViewById(R.id.marcoNota).setBackgroundColor(Color.WHITE);
        }

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {

    }

    @Override
    public void onItemUnSelected(View v) {
        if(v.findViewById(R.id.marcoNota) != null){
        v.findViewById(R.id.marcoNota).setBackgroundColor(Color.BLACK);
        }
    } 
```

我知道这是一个非常具体的问题，但如果有人需要这样做的话。

# perl - 在 Perl 中解码 UTF-8 URL

> ID：13163937
> 
> 赞同：7
> 
> 时间：2012-10-31T17:55:22.483
> 
> 标签：perl, decode, encode

考虑：

```
use URI::Escape;
print uri_unescape("%C3%B3"); 
```

输出：×

[使用此http://meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)解码

输出：ó

这是预期的。

我应该使用什么 Perl 库来获得正确的输出？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T18:06:16.637

如果您知道字节序列是[UTF-8](http://en.wikipedia.org/wiki/UTF-8)，那么使用`Encode::decode`：

```
use Encode;
use URI::Escape;

my $in = "%C3%B3";
my $text = Encode::decode('utf8', uri_unescape($in));

print length($text);    # Should print 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T17:58:59.923

该代码`Encode::decode('utf8', uri_unescape($in))`对我不起作用，但以下代码运行良好。

```
sub smartdecode {
    use URI::Escape qw( uri_unescape );
    use utf8;
    my $x = my $y = uri_unescape($_[0]);
    return $x if utf8::decode($x);
    return $y;
} 
```

此代码来自[http://lwp.interglacial.com/ch05_02.htm](http://lwp.interglacial.com/ch05_02.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-28T21:09:06.947

# c# - 覆盖 WPF 中的 UserControl 属性

> ID：13163945
> 
> 赞同：0
> 
> 时间：2012-10-31T17:56:02.130
> 
> 标签：c#, wpf, user-controls

我是**WPF**的新手，所以我对如何做到这一点有点不知所措。我今天创建了一个非常简单的视觉效果`UserControl`，它由一个网格组成，显示一个圆圈，两条虚线穿过它。目的是显示给定半径大小的圆。我希望*能够*隐藏高度和宽度，并使用一个名为的自定义属性`RadiusSize`来设置控件的大小。

后面的代码定义了`RadiusSize`依赖属性，如下所示：

```
public static readonly DependencyProperty RadiusSizeProperty =
    DependencyProperty.Register("RadiusSize", typeof(double), typeof(Radius));

public double RadiusSize
{
    get { return (double)GetValue(RadiusSizeProperty); }
    set 
    { 
        SetValue(RadiusSizeProperty, value);
        Height = value * 2;
        Width = value * 2;
        RaisePropertyChanged("RadiusSize");
    }
} 
```

`Radius`不幸的是，在为给定控件设置 XAML 并将其传递时，高度或宽度属性没有可见的变化`RadiusSize`。如果删除，它们只是默认为`Auto`. 我想做的事可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:07:41.840

问题是您已将逻辑放入 DependencyProperty 周围的“clr 包装器属性”的设置器中。这在 WPF 中不起作用。您应该将您的代码放入 DependencyProperty 声明中的 DependencyPropertyChangedCallback。看看[这个教程](http://www.wpftutorial.net/dependencyproperties.html)

除此之外，您可以使用 Ellipse 在屏幕上绘制一个圆圈，而不必自己实现。

你的 RaisePropertyChanged 方法是做什么的？您不应在基于 DependencyObject 的类中实现 INotifyPropertyChanged。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T18:07:44.507

是的，有可能。不，你做得不对。

很难说出您是如何在圆上设置宽度/高度的，但是您在代码中遇到的明显新手错误是您在 DependencyProperty 的设置器中做事。

DP*不能通过您的属性的 getter/setter 访问*`Binding`。 绑定系统在幕后工作，因此如果您绑定到类上的 DP，则在更新绑定时不会调用 getter/setter。

 *那么，有哪些替代方案？许多。您可以将[PropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.propertymetadata.aspx)实例添加到指定回调的属性声明中，并在该回调中更新其他属性......或者您可以完全避免它。我会选择第二个。

如果我要创建一个带有椭圆和其他绘图的 UserControl，我只需将视觉效果放在[ViewBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)中，让它自动拉伸到 UserControl 的大小，而忘记整个半径的事情。

*但是*，如果您仍然对半径感兴趣，您可以使用 IValueConverter 来完成这项工作。

```
public class RadiusConverter : IValueConverter
{
    public object Convert(object value, /*snip*/)
    {
        // check null, type, and double.NaN here
        return (double)value * 2;
    }
    /* snip, on the round trip same as before but / 2 */
} 
```

然后，`Radius`在您的 UserControl 中定义一个属性，并且

```
<UserControl x:Class="Derp"
    Width="{Binding Radius, Converter={StaticResource RadiusConverter}, RelativeSource={RelativeSource Self} />
<!-- snip --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:06:21.967

看起来不错，只是，当您设置控件的高度时，您可能不会修改内部圆圈的高度，请尝试设置您还包含的圆圈和网格的高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T18:07:56.660

正如另一位海报指出的那样，您将无法使用属性系统设置高度和宽度。相反，如果您想要自动设置控件的高度和宽度，您将需要为您的`RadiusSizeProperty`DependencyProperty 定义一个回调。

当你设置 RadiusSize 时，这样的东西会为你设置高度和宽度：

```
 Public Shared RadiusSizeProperty As DependencyProperty = DependencyProperty.Register("RadiusSize",
                                                             GetType(Double),
                                                             GetType(Radius),
                                                             New PropertyMetadata(0.5, Sub(s, e)

                                                                                           Dim p As DependencyPropertyChangedEventArgs = e
                                                                                           Dim o As DependencyObject = s
                                                                                           o.SetValue(HeightProperty, p.NewValue)
                                                                                           o.SetValue(WidthProperty, p.NewValue)
                                                                                       End Sub)) 
```*

# objective-c - 在 iOS6 中更新后 AVAudioRecorder 不起作用

> ID：13163946
> 
> 赞同：0
> 
> 时间：2012-10-31T17:56:20.483
> 
> 标签：objective-c, ios6, avaudiorecorder

在我为 iOS 6 更新应用程序后，`AVAudioRecorder`无法在设备上运行，并且在`[soundRecorder prepareToRecord]`.

更新。：`audioRecorderDidFinishRecording:successfully:`委托方法在之后立即触发`[soundRecorder record];`

有没有人找到一些修复？

```
- (IBAction)recordSound {
    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    [appDelegate.audioPlayer stop];
    appDelegate.audioPlayer = nil;

    [self stopPlaying];

    if (soundRecorder.recording) {
        [soundRecorder stop];
        soundRecorder = nil;
        [timer invalidate];
        timer = nil;
        NSError *error;
        [[AVAudioSession sharedInstance] setActive: NO error: &error];
        NSLog([error localizedDescription]);
    }else{
        NSManagedObject *oldSound = _sight.sound;
        if (oldSound != nil) {
            [__managedObjectContext deleteObject:oldSound];
        }
        [self saveContext];

        if (!soundRecorder)
        {
            NSError *errorAudioSession;
            [[AVAudioSession sharedInstance]
             setCategory: AVAudioSessionCategoryPlayAndRecord
             error: &errorAudioSession];
            NSLog([errorAudioSession description]);

            NSDictionary *recordSettings =
            @{AVFormatIDKey: @(kAudioFormatMPEG4AAC),
        AVNumberOfChannelsKey: @1,
        AVEncoderAudioQualityKey: @(AVAudioQualityMedium)};

            NSError *error;
            AVAudioRecorder *newRecorder =
            [[AVAudioRecorder alloc] initWithURL: soundFileURL
                                        settings: recordSettings
                                           error: &error];
            NSLog([error description]);
            soundRecorder = newRecorder;
            soundRecorder.delegate = self;

        }

        [soundRecorder stop];
        [soundRecorder prepareToRecord];
        [soundRecorder record];
        timer = [NSTimer scheduledTimerWithTimeInterval:0.1f target:self selector:@selector(updateRecordStatus) userInfo:nil repeats:YES];

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:46:53.847

当我告诉它在 iOS6 中第一次之后开始录音时，我遇到了录音结束的问题（在 iOS5 中效果很好）。问题是我正在设置 AVAudioRecorder 的委托，但在 iOS6 AVAudioSession 的委托已被弃用，删除委托使我的应用程序再次工作。

[http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instp/AVAudioSession/delegate](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instp/AVAudioSession/delegate)

**编辑：**正如@Flink 所问。我有一个使用 AVAudioRecorder 录制音频的包装类（仅扩展 NSObject）。代码的相关部分如下：

```
...
NSError *error = nil;
audioRecorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSettings error:&error];
//the relevant part of code is this "if"
if(SYSTEM_VERSION_LESS_THAN(@"6") && delegate){
  audioRecorder.delegate = self.delegate;
}

BOOL ok = [audioRecorder prepareToRecord];

if (ok){
  if(duration){
    ok = [audioRecorder recordForDuration:duration];
  }
  else {
    ok = [audioRecorder record];
  }

  if(!ok) {
    LogError(...);
  }else {
    LogInfo(@"recording");
  }             
}else {
  LogError(...);    
}
... 
```

# service - 如何从服务更新一组 JavaFX2.2 文本字段？

> ID：13163947
> 
> 赞同：2
> 
> 时间：2012-10-31T17:56:18.273
> 
> 标签：service, javafx-2, textfield

我正在尝试了解如何使用服务更新 JavaFX2.2 UI 中的一组文本字段，但文档中没有示例或提示。Addressbook 和 Ensemble 示例都处理表格。该服务将返回一个 ObservableList 字符串。如何进行绑定？

textField0 <---> observableList[0]

textField1 <---> observableList[1]

我修改了 ServiceSample （并发 | 服务示例[http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html)）有一个**TextFields 的 ListView**但我不知道该怎么做绑定。我应该放什么而不是

```
tableView.itemsProperty().bind(service.valueProperty()); 
```

这一行甚至不会编译：

```
listView.itemsProperty().bind(service.valueProperty()); 
```

修改并发 | [http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html)上的服务示例

```
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.stage.Stage;
import java.util.Date;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.concurrent.Service;
import javafx.concurrent.Task;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.scene.control.Button;
import javafx.scene.control.ListView;
import javafx.scene.control.ProgressIndicator;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.TextField;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.layout.Region;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBox;

/**
 * A sample showing use of a Service to retrieve data in a background thread.
 * Selecting the Refresh button restarts the Service.
 *
 * @see javafx.collections.FXCollections
 * @see javafx.concurrent.Service
 * @see javafx.concurrent.Task
 * @see javafx.scene.control.ProgressIndicator
 * @see javafx.scene.control.TableColumn
 * @see javafx.scene.control.TableView
 */
public class ServiceSample extends Application {

    final GetDailySalesService service = new GetDailySalesService();

    private void init(Stage primaryStage) {
        Group root = new Group();
        primaryStage.setScene(new Scene(root));

        VBox vbox = new VBox(5);
        vbox.setPadding(new Insets(12));
        ListView<TextField> listView = new ListView<TextField>();
        Button button = new Button("Refresh");
        button.setOnAction(new EventHandler<ActionEvent>() {

            public void handle(ActionEvent t) {
                service.restart();
            }
        });
        vbox.getChildren().addAll( listView, button);

        Region veil = new Region();
        veil.setStyle("-fx-background-color: rgba(0, 0, 0, 0.4)");
        ProgressIndicator p = new ProgressIndicator();
        p.setMaxSize(150, 150);

        p.progressProperty().bind(service.progressProperty());
        veil.visibleProperty().bind(service.runningProperty());
        p.visibleProperty().bind(service.runningProperty());
        // what to put here ? tableView.itemsProperty().bind(service.valueProperty());

        StackPane stack = new StackPane();
        stack.getChildren().addAll(vbox, veil, p);

        root.getChildren().add(stack);
        service.start();
    }

    /**
     * A service for getting the DailySales data. This service exposes an
     * ObservableList for convenience when using the service. This
     * <code>results</code> list is final, though its contents are replaced when
     * a service call successfully concludes.
     */
    public class GetDailySalesService extends Service<ObservableList<String>> {

        /**
         * Create and return the task for fetching the data. Note that this
         * method is called on the background thread (all other code in this
         * application is on the JavaFX Application Thread!).
         *
         * @return A task
         */
        @Override
        protected Task createTask() {
            return new GetDailySalesTask();
        }
    }

    public class GetDailySalesTask extends Task<ObservableList<String>> {       
        @Override protected ObservableList<String> call() throws Exception {
            for (int i = 0; i < 500; i++) {
                updateProgress(i, 500);
                Thread.sleep(5);
            }
            ObservableList<String> sales = FXCollections.observableArrayList();
            sales.add(new String("A1"));
            sales.add(new String("A2"));
            return sales;
        }
    }

    @Override public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
    }
    public static void main(String[] args) { launch(args); }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T23:51:55.260

此答案演示了使用绑定从服务更新一组 JavaFX 2 文本字段。答案的基础是您问题中发布的原始示例代码。更新有效，因为 ListView (Strings) 的值类型现在与从服务返回的值的类型相匹配。

对您的原始代码进行以下修改：

改变：

```
ListView<TextField> listView = new ListView<TextField>(); 
```

至：

```
ListView<String> listView = new ListView<String>(); 
```

改变：

```
// what to put here ? tableView.itemsProperty().bind(service.valueProperty()); 
```

至：

```
listView.itemsProperty().bind(service.valueProperty()); 
```

现在 listView 将根据服务结果进行更新（为了演示更改，您可以在服务任务中添加一些随机数据，而不是使用固定数据）。

所以现在你有一个 ListView，它的数据会根据传入的列表的值进行更新。但是你想要一个 TextField 列表，而不是静态标签列表。要将 TextFields 放入 ListView，您需要创建自己的单元工厂。

这是对原始示例的更新。该更新提供了几个单元工厂来处理 TextField 创建。InstantEditingCell 为所有项目创建文本字段。ClickableEditingCell 在您单击项目时创建单元格（该类的代码是从[JavaFX TableView 示例文档](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)中的 EditingCell 复制的）。

```
import java.util.Random;
import javafx.application.Application;
import javafx.beans.value.*;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.stage.Stage;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.concurrent.Service;
import javafx.concurrent.Task;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.scene.control.*;
import javafx.scene.layout.Region;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBox;
import javafx.util.Callback;

/**
 * A sample showing use of a Service to retrieve data in a background thread.
 * Selecting the Refresh button restarts the Service.
 *
 * @see javafx.collections.FXCollections
 * @see javafx.concurrent.Service
 * @see javafx.concurrent.Task
 * @see javafx.scene.control.ProgressIndicator
 * @see javafx.scene.control.TableColumn
 * @see javafx.scene.control.TableView
 */
public class ServiceSample extends Application {

    final GetDailySalesService service = new GetDailySalesService();
    final Random random = new Random();

    private void init(Stage primaryStage) {
        Group root = new Group();
        primaryStage.setScene(new Scene(root));

        VBox vbox = new VBox(5);
        vbox.setPadding(new Insets(12));
        ListView<String> listView = new ListView<>();
        listView.setEditable(true);
        Button button = new Button("Refresh");
        button.setOnAction(new EventHandler<ActionEvent>() {
            @Override public void handle(ActionEvent t) {
                service.restart();
            }
        });
        listView.setCellFactory(new Callback<ListView<String>, ListCell<String>>() {
            @Override public ListCell<String> call(ListView<String> param) {
                return new InstantEditingCell();
            }
        });
        listView.setPrefHeight(200);
        vbox.getChildren().addAll( listView, button);

        Region veil = new Region();
        veil.setStyle("-fx-background-color: rgba(0, 0, 0, 0.4)");
        ProgressIndicator p = new ProgressIndicator();
        p.setMaxSize(150, 150);

        p.progressProperty().bind(service.progressProperty());
        veil.visibleProperty().bind(service.runningProperty());
        p.visibleProperty().bind(service.runningProperty());
        listView.itemsProperty().bind(service.valueProperty());

        StackPane stack = new StackPane();
        stack.getChildren().addAll(vbox, veil, p);

        root.getChildren().add(stack);
        service.start();
    }

    /**
     * A service for getting the DailySales data. This service exposes an
     * ObservableList for convenience when using the service. This
     * <code>results</code> list is final, though its contents are replaced when
     * a service call successfully concludes.
     */
    public class GetDailySalesService extends Service<ObservableList<String>> {

        /**
         * Create and return the task for fetching the data. Note that this
         * method is called on the background thread (all other code in this
         * application is on the JavaFX Application Thread!).
         *
         * @return A task
         */
        @Override
        protected Task createTask() {
            return new GetDailySalesTask();
        }
    }

    public class GetDailySalesTask extends Task<ObservableList<String>> {       
        @Override protected ObservableList<String> call() throws Exception {
            for (int i = 0; i < 500; i++) {
                updateProgress(i, 500);
                Thread.sleep(5);
            }
            ObservableList<String> sales = FXCollections.observableArrayList();
            sales.add("A1: " + random.nextInt());
            sales.add("A2: " + random.nextInt());
            return sales;
        }
    }

    @Override public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
    }
    public static void main(String[] args) { launch(args); }

    class InstantEditingCell extends ListCell<String> {
        @Override public void updateItem(String item, boolean empty) {
            super.updateItem(item, empty);

            if (empty) {
                setGraphic(null);
            } else {
                final TextField textField = new TextField(getString());
                textField.setMinWidth(this.getWidth() - this.getGraphicTextGap()* 2);
                textField.focusedProperty().addListener(new ChangeListener<Boolean>(){
                    @Override public void changed(ObservableValue<? extends Boolean> value, Boolean wasFocused, Boolean isFocused) {
                        if (!isFocused) {
                            commitEdit(textField.getText());
                        }
                    }
                });
                setGraphic(textField);
            }
        }

        private String getString() {
            return getItem() == null ? "" : getItem().toString();
        }
    }

    class ClickableEditingCell extends ListCell<String> {

        private TextField textField;

        public ClickableEditingCell() {
        }

        @Override
        public void startEdit() {
            if (!isEmpty()) {
                super.startEdit();
                createTextField();
                setText(null);
                setGraphic(textField);
                textField.selectAll();
            }
        }

        @Override
        public void cancelEdit() {
            super.cancelEdit();

            setText((String) getItem());
            setGraphic(null);
        }

        @Override
        public void updateItem(String item, boolean empty) {
            super.updateItem(item, empty);

            if (empty) {
                setText(null);
                setGraphic(null);
            } else {
                if (isEditing()) {
                    if (textField != null) {
                        textField.setText(getString());
                    }
                    setText(null);
                    setGraphic(textField);
                } else {
                    setText(getString());
                    setGraphic(null);
                }
            }
        }

        private void createTextField() {
            textField = new TextField(getString());
            textField.setMinWidth(this.getWidth() - this.getGraphicTextGap()* 2);
            textField.focusedProperty().addListener(new ChangeListener<Boolean>(){
                @Override public void changed(ObservableValue<? extends Boolean> arg0, 
                    Boolean arg1, Boolean arg2) {
                        if (!arg2) {
                            commitEdit(textField.getText());
                        }
                }
            });
        }

        private String getString() {
            return getItem() == null ? "" : getItem().toString();
        }
    }

} 
```

因为 TextField 是可编辑对象而不是静态对象，所以您可能还想想办法将您的编辑提交回原始数据的来源。

示例程序输出：

![文本字段列表](../Images/b88903ddbd42dbed2d193de257208315.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T22:05:01.410

这种排序有效，但没有“自动”方式将文本字段列表绑定到服务的输出。

```
import java.lang.String;
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.stage.Stage;
import java.util.List;
import java.util.ListIterator;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.concurrent.Service;
import javafx.concurrent.Task;
import javafx.concurrent.WorkerStateEvent;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.scene.Node;
import javafx.scene.control.Button;
import javafx.scene.control.ProgressIndicator;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.TextField;
import javafx.scene.layout.Region;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBox;

/**
 * A sample showing use of a Service to retrieve data in a background thread.
 * Selecting the Refresh button restarts the Service.
 *
 * @see javafx.collections.FXCollections
 * @see javafx.concurrent.Service
 * @see javafx.concurrent.Task
 * @see javafx.scene.control.ProgressIndicator
 * @see javafx.scene.control.TableColumn
 * @see javafx.scene.control.TableView
 */
public class ServiceSample extends Application {

    final GetDailySalesService service = new GetDailySalesService();

    private void init(Stage primaryStage) {
        Group root = new Group();
        primaryStage.setScene(new Scene(root));

        final VBox vbox = new VBox(5);
        vbox.setPadding(new Insets(12));

        Button button = new Button("Refresh");
        button.setOnAction(new EventHandler<ActionEvent>() {

            public void handle(ActionEvent t) {
                service.restart();
            }
        });
        TextField tf1, tf2, tf3;
        tf1 = new TextField();
        tf1.setId("0");
        tf2 = new TextField();
        tf2.setId("1");
        tf3 = new TextField();
        tf3.setId("2");        
        vbox.getChildren().addAll(tf1,tf2,tf3,button);

        Region veil = new Region();
        veil.setStyle("-fx-background-color: rgba(0, 0, 0, 0.4)");
        ProgressIndicator p = new ProgressIndicator();
        p.setMaxSize(150, 150);

        p.progressProperty().bind(service.progressProperty());
        veil.visibleProperty().bind(service.runningProperty());
        p.visibleProperty().bind(service.runningProperty()); 
        StackPane stack = new StackPane();
        stack.getChildren().addAll(vbox, veil, p);

        root.getChildren().add(stack);
            service.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
            @Override
            public void handle(WorkerStateEvent t) {
                System.out.println("done:" + t.getSource().getValue());
                List list = service.valueProperty().getValue();
                String[] sa = (String[]) list.toArray(new String[0]);
                for(int i=0; i<sa.length;i++) {
                    TextField tf = (TextField) vbox.lookup("#"+i);
                    tf.setText(sa[i]);
                }
            }
        });
        service.start();
    }

    /**
     * A service for getting the DailySales data. This service exposes an
     * ObservableList for convenience when using the service. This
     * <code>results</code> list is final, though its contents are replaced when
     * a service call successfully concludes.
     */
    public class GetDailySalesService extends Service<ObservableList<String>> {
        /**
         * Create and return the task for fetching the data. Note that this
         * method is called on the background thread (all other code in this
         * application is on the JavaFX Application Thread!).
         *
         * @return A task
         */
        @Override
        protected Task createTask() {
            return new GetDailySalesTask();
        }
    }

    public class GetDailySalesTask extends Task<ObservableList<String>> {       
        @Override protected ObservableList<String> call() throws Exception {
            for (int i = 0; i < 500; i++) {
                updateProgress(i, 500);
                Thread.sleep(5);
            }
            ObservableList<String> sales = FXCollections.observableArrayList();
            sales.add(new String("A1 " + System.currentTimeMillis()));
            sales.add(new String("A2 " + System.currentTimeMillis()));
            sales.add(new String("A3 " + System.currentTimeMillis()));
            return sales;
        }
    }

    @Override public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
    }
    public static void main(String[] args) { launch(args); }
} 
```

# android - 活动（后）订单管理

> ID：13163950
> 
> 赞同：0
> 
> 时间：2012-10-31T17:56:45.930
> 
> 标签：android, android-activity, android-lifecycle

这是理论上的问题，但我需要一些建议。我在我的活动之间切换的逻辑很复杂。一部分很简单：ActualActivity --> 接下来开始。问题在于previousActivity <-- ActualActivity（例如通过后退按钮）。如果我可以骑自行车怎么办？**当我实现逻辑过程的最后一个活动时，我需要完成此过程之前的最后 4 个活动！？**当然，我不想回电话给他们每个人。

这是我决定默认对每个活动调用 finish() 的原因之一。我覆盖了 StartActivity 并放在那里完成（）。我还为每个 Activity 修复了 set backIntent。但有时这还不够。**是否可以通过某种方式将 Intent 发送到另一个 Activity？**为了更好地理解我的想法：*intent.putExtra(BackIntent)*

我很清楚，这不是常见且好的解决方案。**如何管理不需要的“onPaused”活动？如何确定活动是否已暂停并对其调用恢复？**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:00:52.827

我认为您需要阅读有关**Intent Flags**的文档：

*   [http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/](http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/)
*   [http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

这就是您可以控制与活动堆栈和故事板相关的所有内容的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:13:20.013

我认为您的问题可以通过“startactivityforresult”解决

```
//Activity A
private void someMethod()
{
   this.startActivityForResult(intentForActivityB, 123456);
}

@Override
protected void onActivityResult(int request, int result, Intent intent)
{
   if(request == 123456 && result == Activity.RESULT_OK)
       this.finish();

   super.onActivityResult(request, result, intent);
}

//Activity B
private void someMethod()
{
   this.setResult(Activity.RESULT_OK);
   this.finish();

} 
```

这将在活动 B 正常（setResult）时关闭活动 A，仅在这种情况下

# c# - 跳过数据流 TransformBlock 中的项目

> ID：13163951
> 
> 赞同：22
> 
> 时间：2012-10-31T17:56:56.567
> 
> 标签：c#, .net, task-parallel-library, tpl-dataflow

[TPL Dataflow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)提供了一个`TransformBlock`用于转换输入的方法，例如：

```
var tb = new TransformBlock<int, int>(i => i * 2); 
```

是否可以不输出某些输入，例如，如果输入未通过某些验证测试？

```
var tb = new TransformBlock<InputType, OutputType>(i =>
{
    if (!ValidateInput(i))
    {
        // Do something to not output anything for this input
    }
    // Normal output
} 
```

如果这不可能，那么实现这一目标的最佳模式是什么？
像下面这样的东西？

```
BufferBlock<OutputType> output = new BufferBlock<OutputType>();

var ab = new ActionBlock<InputType>(i =>
{
    if (ValidateInput(i)) 
    {
        output.Post(MyTransform(i));
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-31T20:47:56.890

关于如何执行此操作有多种选择：

1.  按照 Jon 的建议使用`TransformManyBlock`并返回包含 1 或 0 个项目的集合。
2.  `TransformBlock`与一些表示“无值”的特殊值一起使用（例如`null`），然后使用`LinkTo()`with 过滤器将其删除。您还必须在没有过滤器的情况下链接`TransformBlock`到空块 ( [`DataflowBlock.NullTarget<T>()`](http://msdn.microsoft.com/en-us/library/hh462765.aspx))，以排出特殊值。
3.  我会认为这是一种 hack，但您也可以使用`Task`基于 - 的构造函数`TransformBlock`：`Task.FromResult()`当您想要返回某些东西时使用，而当您不想返回时使用`null`。例如：

    ```
    new TransformBlock<int, int>(i => i % 2 == 0 ? Task.FromResult(i * 2) : null) 
    ```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-31T18:01:03.363

我自己没有使用过 DataFlow，但我*认为*您可以使用 a [`TransformManyBlock`](http://msdn.microsoft.com/en-us/library/hh194784.aspx)，并让每个步骤返回一个空集合或单个项目。

```
var tmb = new TransformManyBlock<InputType, OutputType>(i =>
{
    if (!ValidateInput(i))
    {
        return Enumerable.Empty<OutputType>();
    }
    ...
    // Or return new[] { outputValue };
    return Enumerable.Repeat(outputValue, 1);
}); 
```

您甚至可以将其概括为`FilterBlock<T>`仅*具有*过滤谓词的 a，并通过适当的匹配（就像`Where`在 LINQ 中一样）。您最初可以使用`TransformManyBlock`上述方法实现此功能，但稍后会提高效率。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-04T16:41:27.583

一个有点老的问题，想在这里补充一些经验：您可以为您的数据引入a[`BufferBlock`](https://msdn.microsoft.com/en-us/library/hh160414.aspx)而不是，并使用带有条件谓词的扩展方法，因此有效值将转到，而无效值将被忽略。要丢弃它们，您可以简单地使用块，它只是忽略它接收到的数据。所以最终的代码可能如下所示：[`ActionBlock`](https://msdn.microsoft.com/en-us/library/hh194684.aspx)[`LinkTo`](https://msdn.microsoft.com/en-us/library/hh194832.aspx)[`TransformBlock`](https://msdn.microsoft.com/en-us/library/hh194782.aspx)[`NullTarget`](http://msdn.microsoft.com/en-us/library/hh462765.aspx)

```
var input = new BufferBlock<int>();
var tb = new TransformBlock<int, int>(i => i * 2);
var output = new BufferBlock<int>();

// valid integers will pass to the transform
input.LinkTo(tb, i => ValidateInput(i));

// not valid will be discarded
input.LinkTo(DataflowBlock.NullTarget<int>());

// transformed data will come to the output
tb.LinkTo(output); 
```

也可以通过[`DataflowLinkOptions`](https://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.dataflowlinkoptions.aspx)其他[重载`LinkTo`来](https://msdn.microsoft.com/en-us/library/hh462705.aspx)调整链接。

# javascript - 如何计算此数组对象中的响应数量？

> ID：13163952
> 
> 赞同：0
> 
> 时间：2012-10-31T17:57:08.607
> 
> 标签：javascript, jquery

如何计算每个“响应”部分中的响应数量？

```
 var json = {
  "Answers": [
    {
      "Responses": [
        {
          "ResponseID": 5,
          "RespondingUser": null,
          "ResponseDate": "\/Date(1351700419747)\/"
        },
        {
          "ResponseID": 6,
          "RespondingUser": null,
          "ResponseDate": "\/Date(1351700437387)\/"
        },
        {
          "ResponseID": 7,
          "RespondingUser": null,
          "ResponseDate": "\/Date(1351700448550)\/"
        }
      ],
      "AnswerID": 3,
      "AnswerText": "No"
    },
    {
      "Responses": [
        {
          "ResponseID": 9,
          "RespondingUser": null,
          "ResponseDate": "\/Date(1351700419747)\/"
        },
        {
          "ResponseID": 6,
          "RespondingUser": null,
          "ResponseDate": "\/Date(1351700437387)\/"
        },
        {
          "ResponseID": 7,
          "RespondingUser": null,
          "ResponseDate": "\/Date(1351700448550)\/"
        }
      ],
      "AnswerID": 4,
      "AnswerText": "Probably not"
    },
    {
      "Responses": [
        {
          "ResponseID": 50,
          "RespondingUser": null,
          "ResponseDate": "\/Date(1351700419747)\/"
        },
        {
          "ResponseID": 6,
          "RespondingUser": null,
          "ResponseDate": "\/Date(1351700437387)\/"
        },
        {
          "ResponseID": 7,
          "RespondingUser": null,
          "ResponseDate": "\/Date(1351700448550)\/"
        }
      ],
      "AnswerID": 5,
      "AnswerText": "Definitely not"
    }
  ],
  "QuestionID": 2,
  "QuestionText": "Steve Lamaq?",
  "ClosingDate": "\/Date(1351958948793)\/",
  "AskingUser": null
}; 
```

任何建议都会很棒！非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:01:14.760

```
var i = json.Answers.length,
    total = 0;

while(i--){
 total += json.Answers[i].Responses.length;
} 
```

**[例子](http://jsfiddle.net/MdGvN/1/)**

# c++ - SS_NOTIFY 和 WM_SETCURSOR

> ID：13163954
> 
> 赞同：1
> 
> 时间：2012-10-31T17:57:15.963
> 
> 标签：c++, windows, winapi

我正在尝试使用 C++ 模仿对话框上的超链接。

我正在使用设置了 SS_NOTIFY 的静态控件，以便用户可以单击控件并转到网页：

```
 LTEXT           "Caption2",IDC_SETTINGS,9,36,219,13,SS_NOTIFY 
```

设置 SS_NOTIFY 后，我可以拦截点击，因为它是针对静态注册的：

```
case IDC_STC_URL:
ShellExecute(NULL, "open", "http://google.co.uk", NULL, NULL, SW_SHOWNORMAL);
return TRUE; 
```

我还通过拦截 WM_SETCURSOR 消息将光标更改为手：

```
case WM_SETCURSOR:
POINT pt;
RECT rect;

GetCursorPos( &pt );
GetWindowRect( GetDlgItem(hwnd,IDC_SETTINGS), &rect );

if (PtInRect(&rect, pt))
{
    SetCursor(LoadCursor(NULL, IDC_HAND));
}
else
{
    SetCursor(LoadCursor(NULL, IDC_ARROW));
}
return TRUE; 
```

但是，当设置 SS_NOTIFY 时，光标更改不起作用。当 SS_NOTIFY 被禁用时，它会这样做。但是随后单击未针对静态注册，因此 ShellExecute() 无法打开 URL。

有人对我做错了什么有建议吗？

谢谢，提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T18:45:29.903

对话框 proc 的返回值与窗口 proc 的返回值不同。（对话框 proc 的文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms645469](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645469(v=vs.85).aspx) (v=vs.85).aspx - 值得仔细阅读。）对话框的返回值只是`TRUE`or `FALSE`，表示消息是否被处理，但是 window proc 的返回值是窗口消息处理的返回值。

如果窗口消息具有有意义的返回值（大多数没有，但`WM_SETCURSOR`确实有），则在对话过程中，您需要在从对话`SetWindowLong(hwnd,DWL_MSGRESULT,value)`过程返回之前使用它来设置结果`TRUE`。

我认为默认`DWL_MSGRESULT`值为零，因此在此代码中，您将从消息中`FALSE`返回`WM_SETCURSOR`。这表明静态应该做自己的事情 - 即设置箭头光标。

# sql - 查找对于某些列具有唯一值的行

> ID：13163955
> 
> 赞同：-2
> 
> 时间：2012-10-31T17:57:16.230
> 
> 标签：sql, sql-server-2008

我的 SQL 表是这样的：

```
id, name, value1, value2, value3, value4
1, xyz, 1, 2, 4, 1
2, xyz, 4, 2, 4, 1
3, abc, 4, 2, 4, 1
4, abc, 4, 2, 2, 1
5, abc, 4, 2, 2, 1 
```

我想编写一个 Sql 查询，它返回其**任何**值（读取：value1、value2、value3、value4）已更改的行。所以结果输出将是：

```
id, name, value1, value2, value3, value4
1, xyz, 1, 2, 4, 1
2, xyz, 4, 2, 4, 1
4, abc, 4, 2, 2, 1 
```

我明白，如果我只需要输出中的值，我可以使用 Distinct 或 Group by，例如：

```
select distinct value1,value2,value3,value4 from table; 
```

但是，在这里我也需要输出中的 id 和 name 列。

想知道我是否真的需要编写子查询或创建虚拟/内部表来获得我的结果。或者，有更聪明的方法吗？

我的问题与[如何找出表是否有一些独特的列不同](https://stackoverflow.com/questions/6941049/how-to-find-out-whether-a-table-has-some-unique-columns)。如果您有其他想法，请告诉我，我可以澄清一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:24:04.033

尝试这个

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/4c513/4)

```
select *
from table
where id in (select min(id) from temp group by value1,value2,value3,value4) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T18:24:13.207

好吧，对于您更新的问题，我相信您可以这样做：

```
;WITH CTE AS
(
    SELECT  *, 
            RN = ROW_NUMBER() OVER(PARTITION BY value1, value2, value3, value4 ORDER BY ID)
    FROM YourTable
)
SELECT id, name, value1, value2, value3, value4
FROM CTE
WHERE RN = 1; 
```

# c# - 过滤 IQueryable 给定用户输入

> ID：13163956
> 
> 赞同：0
> 
> 时间：2012-10-31T17:57:17.993
> 
> 标签：c#, linq, dynamic, filtering

有没有办法做这样的事情：

```
//Create Connection.
NMBSReportViewer.Models.SchoolEntities db = new NMBSReportViewer.Models.SchoolEntities();

//Get the Data Using the Report's Stored QueryString.
String QueryString = report.Query; //"SELECT VALUE c FROM SchoolEntities.Courses AS c WHERE c.Credits > 0";
IQueryable<dynamic> data = db.CreateQuery<dynamic>(QueryString);

//Given String FieldName, String Operator, & String Value, from user, Filter the Above dataset.
data.Where(c => c.'FieldName' 'Operator' 'Value'); 
```

我假设没有像我上面那样的东西，但是有没有办法达到相同的最终结果？我将为用户提供字段和运算符的下拉列表，然后他们将在三个值的文本框中输入他们想要的值，因此 FieldName 应该始终是集合中的一个可行字段。

LINQ 中有没有办法做这样的事情？如果没有办法做到这一点......有没有办法创建一个静态类型为“SchoolEntities.Course”的IQueryable，只给出字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:54:10.337

很抱歉造成混乱，我想实体框架毕竟不是一个选择。

最后，我想我将不得不使用这种方法，以便在每次数据库获得或丢失表时保持重新部署项目的自由。

```
static void Main(string[] args)
{
//Connection String
String ConnectionString = @"Data Source = localhost\SQLEXPRESS; Initial Catalog = School; Trusted_Connection=True;";

//Create the Connection
SqlConnection DbConn = new SqlConnection(ConnectionString);

//Open the Connection
DbConn.Open();

//Query String
String QueryString = "SELECT * FROM COURSE";

//Create the SqlCommand Object
SqlCommand QueryCommand = new SqlCommand(QueryString, DbConn);

//Use the SqlCommand to create the DataReader Object.
SqlDataReader QueryCommandReader = QueryCommand.ExecuteReader();

//Create the Datatable.
DataTable DataT = new DataTable();

//Load the Data into the Table.
DataT.Load(QueryCommandReader);

//Get the User Input
String Expression = "Credits > 3";

//Create DataRows and Filter Table.
List<DataRow> FilteredData = new List<DataRow>();
FilteredData = DataT.Select(Expression).ToList();
} 
```

感谢您的帮助和信息。抱歉，这不是一个完全明确的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:05:53.317

你的意思是：

```
IQueryable<Course> data = db.CreateQuery<Course>(QueryString); 
```

您还可以像这样查询 Course 实体：

```
IQueryable<Course> data  = db.Course.Where(c => c.Credits > 0 && c.Name == "Bob"); 
```

# jquery - 如何使用纯 CSS 按钮（无图像）更改输入按钮？

> ID：13163963
> 
> 赞同：0
> 
> 时间：2012-10-31T17:57:45.593
> 
> 标签：jquery, css, button, input, field

> **可能重复：**
> [样式 <input type=“file”>](https://stackoverflow.com/questions/4532733/styling-input-type-file)
> [样式输入类型文件？](https://stackoverflow.com/questions/4909228/style-input-type-file)

我正在尝试使用由 css 创建的按钮更改默认输入类型 =“文件”按钮。这是我的html代码：

```
<input type="file" name="name" value="" />
<a href="#" class="button">Browse</a> 
```

...这是我的 CSS 按钮代码：

```
.button {
    display:inline;
    -moz-box-shadow:inset 0px 1px 0px 0px #fff6af;
    -webkit-box-shadow:inset 0px 1px 0px 0px #fff6af;
    box-shadow:inset 0px 1px 0px 0px #fff6af;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ffec64), color-stop(1, #f3b415) );
    background:-moz-linear-gradient( center top, #ffec64 5%, #f3b415 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffec64', endColorstr='#f3b415');
    background-color:#ffec64;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #f3b415;
    display:inline-block;
    color:#333333;
    font-family:arial;
    font-size:15px;
    font-weight:bold;
    padding:6px 24px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffee66;
}
.button:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f3b415), color-stop(1, #ffec64) );
    background:-moz-linear-gradient( center top, #f3b415 5%, #ffec64 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f3b415', endColorstr='#ffec64');
    background-color:#f3b415;
}
.button:active {
    position:relative;
    top:1px;
}​ 
```

另外，你可以[在这里查看](http://jsfiddle.net/AAtM3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:17:46.127

按照[QuirksMode](http://www.quirksmode.org/dom/inputfile.html)给出的技巧构建一个[Demo](http://jsfiddle.net/AAtM3/2/)。阅读它以获得解释。

**HTML**

```
<div class="fileinputs">
    <input type="file" class="file" />
    <div class="fakefile">
        <a href="#" class="button">Browse</a>

    </div>
</div> 
```

**CSS**

```
.button {
    display:inline;
    -moz-box-shadow:inset 0px 1px 0px 0px #fff6af;
    -webkit-box-shadow:inset 0px 1px 0px 0px #fff6af;
    box-shadow:inset 0px 1px 0px 0px #fff6af;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ffec64), color-stop(1, #f3b415) );
    background:-moz-linear-gradient( center top, #ffec64 5%, #f3b415 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffec64', endColorstr='#f3b415');
    background-color:#ffec64;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #f3b415;
    display:inline-block;
    color:#333333;
    font-family:arial;
    font-size:15px;
    font-weight:bold;
    padding:6px 24px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffee66;
}
.button:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f3b415), color-stop(1, #ffec64) );
    background:-moz-linear-gradient( center top, #f3b415 5%, #ffec64 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f3b415', endColorstr='#ffec64');
    background-color:#f3b415;
}
.button:active {
    position:relative;
    top:1px;
}

div.fileinputs {
    position: relative;
}

div.fakefile {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 1;
}

input.file {
    position: relative;
    text-align: right;
    -moz-opacity:0 ;
    filter:alpha(opacity: 0);
    opacity: 0;
    z-index: 2;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:02:42.747

据我所知，您不能对“浏览”按钮进行样式设置。您在这里唯一的解决方法是使用 Z-Index 在其上覆盖另一个按钮；这可能不是一个很好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:02:45.277

文件输入由操作系统呈现，它们不是 HTML 规范的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T18:04:05.333

您可以将输入调整为一个按钮，然后编写一个 jQuery 函数来调出文件：

```
 <input type="button" name="name" value="Browse" class="button"/> 
```

# c++ - C++。将 1 除以任意数得到 0

> ID：13163964
> 
> 赞同：7
> 
> 时间：2012-10-31T17:57:49.273
> 
> 标签：c++, division

当我尝试除以 1/60 或 1/(60*60) 时，它给出 0。即使在调试器窗口中也是如此。我有点困惑它可能是什么，因为 2/3 或 2.5/6 给出了结果。

我的代码：

```
int main()
{   
    double k1 = 1/60;
    cout << k1
        << endl;
    double k2 = 1/(60*60);
    cout << k2
        << endl;

    return 0;
} 
```

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T18:00:26.793

由于您的两个操作数都是整数，因此编译器会执行整数除法（不计算小数部分）。如果至少一个操作数是浮点类型（如在您的其他示例中），则另一个被提升并执行浮点除法。

***修复***

制作至少一个浮点类型的操作数（`double`或`float`）；你可以这样做，例如：

*   使其成为`double`文字²（`60`是整数，`60.0`甚至`60.`是`double`，`60.f`是`float`）
*   使用强制转换 ( `double(60)`, `(double)60`)。

就我个人而言，我更喜欢直接使用`double`文字 - 并不是说​​强制转换对中等体面的编译器有任何性能损失，但就仅使用正确类型的文字而言，它感觉“错误”和冗长。（显然，当两个操作数都是变量而不是文字时，您*必须*使用强制转换）

***常见的反对意见***

*   ***“但我将它分配给一个`double`！”***

    许多新手对这个事实感到困惑，因为他们认为将结果分配给 a应该是对编译^器`double`的某种暗示。事实上，它不是。

    对表达式进行的计算/提升*完全独立*于目的地的类型，这只是最后一步。子表达式的求值方式与结果的使用方式无关，因此所有类型提升/操作仅取决于操作数的类型。

*   ***为什么要整数除法？***

    即使参数都是整数（例如 VB6、IIRC），一些语言也会自动执行浮点除法，因为它对新手来说感觉更直观。这与 C/C++ 中的情况不同：当参数为整数时，除法是整数，因为在许多情况下您只是不关心小数，和/或出于性能原因最好不要使用 FPU（背景哲学在 C 和 C++ 中是“你不用为你不使用的东西付费”）。

    显然，可以使用单独的整数除法运算符来解决问题（VB 再次使用`\`），但恕我直言，我们在 C++ 中有足够的运算符。:)

* * *

1.  Nitpickers'corner：是的，这里实际上是一个初始化，而不是一个赋值，但我们谈论的是同一种误解。
2.  “文字”是源代码中包含的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:59:07.997

分母也必须是十进制数。

```
double k1 = 1/60.0; //Should work 
```

否则，您的程序基本上会截断所有小数。

LITTLE EXTRA：当你的分母是一个变量时，你必须转换它：

```
double k2 = 1/(double)myDenom; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T18:00:00.027

该行`double k1 = 1/60`将由编译器评估为编译时常量。由于数字末尾没有“.0”，`1/60`因此将通过整数除法进行评估，因此为 0。

# vim - Vim - 如何使用 Pathogen 安装这个简单的降价预览插件？

> ID：13163966
> 
> 赞同：0
> 
> 时间：2012-10-31T17:57:53.687
> 
> 标签：vim, markdown, pathogen

我找到了一个小插件来帮助我从 Vim 预览 markdown 文件。它会让我在默认浏览器中看到 HTML 文件。您可以在此处阅读有关插件的信息：http: [//blog.natesilva.com/post/5256838248/how-to-preview-a-markdown-document-in-vim](http://blog.natesilva.com/post/5256838248/how-to-preview-a-markdown-document-in-vim)

安装说明说：

```
To install: Place markdown.vim in ~/.vim/ftplugin or " %USERPROFILE%\vimfiles\ftplugin. 
```

但是，我正在使用 Tim Pope 的`Pathogen`插件加载系统来加载其他几个插件，这些插件存储在 bundle 目录下它们自己的目录中。我可以对这个做同样的事情吗？我尝试创建一个`bundle/markdown-preview/`目录并将其放入`markdown.vim`其中，但我无法让它以这种方式工作。我不明白什么？在这种情况下甚至有必要使用 Pathogen 吗？它将为我解决什么问题？

另外，为了看看插件是否有效，我按照建议将它安装在 ftplugin 目录中。现在，当我按下时，`,p`Vim 会自行停止并在我的浏览器中打开预览文件。我收到消息：

```
[1]+  Stopped                 vim ./.dotfiles/vim/bundle/fugitive/README.markdown 
```

看到预览后，如何恢复 Vim 并返回编辑文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:01:10.407

> 我尝试创建一个 bundle/markdown-preview/ 目录并将 markdown.vim 放入其中，但我无法让它以这种方式工作。

您应该尝试将其放入`bundle/markdown-preview/ftplugin`，而不是您声称尝试放入的位置。可能仍然有一些事情阻止它在这个位置工作。

对于第二个问题：遵循[此](https://gist.github.com/960015#gistcomment-561405)评论并`:redraw!`在函数末尾添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:02:00.563

为了让 Pathogen 找到插件，我将`markdown.vim`文件放入`bundle/markdown-preview/plugin/`. 这个链接帮助了我： http://news.ycombinator.com/item?id= [1711760](http://news.ycombinator.com/item?id=1711760)

# silverlight - 在 windows phone 7 中搜索存储卡中的所有 mp3 文件

> ID：13163970
> 
> 赞同：0
> 
> 时间：2012-10-31T17:58:26.170
> 
> 标签：silverlight, windows-phone-7, memory, mp3

我想从 Windows Phone 上的存储卡中获取所有音频文件（MP3 等）。我不知道如何实现这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:01:39.817

请注意，您只能访问用户在音乐应用中拥有的曲目。这是操作系统的限制。无法访问其他应用程序的声音文件。

您必须使用 XNA 框架中的[MediaLibrary](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.aspx)类。有关如何使用它的详细说明，请参阅此[博客文章。](http://www.ginktage.com/2011/11/how-to-get-the-list-of-songsgenresalbums-from-the-windows-phone-medialibrary/)

# netbeans - Netbeans 7.1.2 - 显示键绑定

> ID：13163973
> 
> 赞同：0
> 
> 时间：2012-10-31T17:58:34.393
> 
> 标签：netbeans

我刚刚意识到键绑定不会出现在不同的 IDE 功能旁边。例如，它曾经在 Source>Format 选项旁边显示 Shift+ctrl+F。我查看了设置，但没有找到将其恢复的方法。任何人都知道是否有办法做到这一点？我正在运行 OSX 版本的 netbeans。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:24:02.317

在选项下（Mac 上的 Netbeans 菜单 -> 首选项，Windows IIRC 的工具菜单下），有键盘映射。如果他们都在那里，我不是 100%，但这是一个好的开始。

# jakarta-ee - 使用 CDI 将 Logger 注入 Ejb

> ID：13163976
> 
> 赞同：7
> 
> 时间：2012-10-31T17:58:48.760
> 
> 标签：jakarta-ee, ejb, cdi

我正在努力将我认为是一项简单的任务放在一起。我有一个无状态单例 Bean，我将把它用作我的应用程序的“加载器”。bean 包含在一个 Jar (loader.jar) 文件中，并位于我的 EAR 的 lib 文件夹中。

EAR 的根目录中有另一个 jar，其中包含将由我的应用程序使用的无状态会话 Bean 的实现。

然后我创建了一个小型记录器类，它实际上包装了 log4j：

```
 import javax.annotation.PostConstruct;
    import javax.annotation.PreDestroy;
    import javax.enterprise.context.RequestScoped;
    import javax.enterprise.inject.Produces;
    import javax.enterprise.inject.spi.InjectionPoint;
    import javax.inject.Named;

    import org.apache.log4j.Logger;

    public class LoggerFactory {
        private Logger logger;

        public LoggerFactory(){
            logger = Logger.getLogger(this.getClass().getName());
        }

        @Produces Logger getLogger(InjectionPoint caller){
            return Logger.getLogger(caller.getMember().getDeclaringClass().getName());
        }
    } 
```

然后我把它放在一个罐子里，我把它命名为 utils.jar。在这个 jar 中，按照 CDI 规范，我在 META-INF 文件夹中创建了一个空 beans.xml 文件。utils.jar 位于我的 EAR 的 lib 文件夹中。

现在，在我之前提到的无状态 Singleton Bean 中（加载器）

我只写了这个

```
 import javax.annotation.PostConstruct;
    import javax.ejb.Singleton;
    import javax.ejb.Startup;
    import javax.inject.Inject;

    import org.apache.log4j.Logger;

    @Startup
    @Singleton
    public class Core {
        @Inject 
        private Logger logger;

        @PostConstruct
        void init(){
            logger.info("Core started");
        }
    } 
```

当我在 glassfish 3.1.2 上部署我的应用程序时，我在 Loader bean 中第一次调用记录器时得到了一个普通的 NPE。这让我认为 CDI 调用根本没有发生，但我真诚地理解我做错了什么。

到目前为止，我的EAR结构如下：

```
 EAR
         |
         +---lib
         |     +--loader.jar
         |     +--utils.jar
         |     +--log4j.xx.jar
         |
         +--MyStatelessSessionBean.jar 
```

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:19:50.520

你的文字和你的EAR结构有些不一致，即你讲了一个`utils.jar`但是你的EAR结构图中没有这样的.jar。

尽管如此，您提到您`@EJB`的包装在里面`loader.jar`，而它又位于`/lib`您的 EAR 文件夹中。既然`loader.jar`是你的`ejb-jar`，它不应该在 之下`/lib`，而应该在你的 EAR 的顶层。

在`application.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd" version="6">
    <module>
        <ejb>loader.jar</ejb>
    </module>
    ...
    <library-directory>lib</library-directory>
</application> 
```

希望这可以解决您的问题。

# jquery - jQuery 语法，平衡括号

> ID：13163981
> 
> 赞同：0
> 
> 时间：2012-10-31T17:59:15.797
> 
> 标签：jquery

上面的脚本中是否有任何语法问题，平衡括号？还是另一个错误？

```
$(document).ready(function() {
    var winW;
    if (window.innerWidth) {
        winW = window.innerWidth;
    }
    if (winW > 768) {
        $("#refinebox").addClass("in"); 
    }); 
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:01:44.777

最好在每个 ( 或 { 处使用缩进来帮助您查看问题所在。

```
$(document).ready(
      function() {
        var winW;
        if (window.innerWidth) {
              winW = window.innerWidth;
        }
        if (winW > 768) {
          $("#refinebox").addClass("in"); 
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:01:18.053

```
}); 
); 
```

应该

```
} 
}); 
```

你有大括号结束问题..

```
$(document).ready(function() {
    var winW;
    if (window.innerWidth) {
        winW = window.innerWidth;
    }
    if (winW > 768) {
        $("#refinebox").addClass("in"); 
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:02:33.590

是的，你有一个支架问题。第二个 if 语句应该用右花括号关闭，或者因为 if 内只有一行代码，所以根本不需要花括号。

```
$(document).ready(function() {
var winW;
if (window.innerWidth) {
    winW = window.innerWidth;
}
if (winW > 768) 
$("#refinebox").addClass("in");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T18:02:40.703

是的，您缺少一个花括号来关闭您的功能，并且您有一个额外的 ); 在末尾。应该：

```
$(document).ready(function() {
    var winW;
    if (window.innerWidth) {
        winW = window.innerWidth;
    }
    if (winW > 768) {
        $("#refinebox").addClass("in"); 
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T18:03:09.340

你在最后有一点纠结。您的代码应如下所示：

```
$(document).ready(function() {
    var winW;
    if (window.innerWidth) {
        winW = window.innerWidth;
    }
    if (winW > 768) {
        $("#refinebox").addClass("in"); 
    }
}); 
```

# python - 为什么要同时使用 Tornado 和 Flask？

> ID：13163990
> 
> 赞同：43
> 
> 时间：2012-10-31T17:59:43.543
> 
> 标签：python, web, webserver, flask, tornado

据我所知，Tornado 是一个服务器和一个框架。在我看来，一起使用 Flask 和 Tornado 就像添加另一个抽象层（更多开销）。为什么人们一起使用 Flask 和 Tornado，有什么优势？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-31T18:18:07.853

根据[这个问题](https://stackoverflow.com/questions/8143141/using-flask-and-tornado-together)，这是因为 Flask 是阻塞的，而 Tornado 是非阻塞的。

如果使用[Tornado 作为 WSGI 服务器，使用 Flask 作为 url 路由 + 模板](http://flask.pocoo.org/docs/latest/deploying/wsgi-standalone/#tornado)，则不应该有任何开销。使用这种方法，您不会使用 Flask 的 Web 服务器，因此实际上并没有额外的抽象层。

但是，如果一个人只是将 Flask 用于模板，他们可以将 Tornado 与[Jinja2](http://jinja.pocoo.org/docs/)一起使用，这是 Flask 使用的模板引擎。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-01T00:09:24.573

我一直认为将 Flask 和 Tornado 一起使用是愚蠢的，但它确实是有道理的。但它增加了复杂性；我的偏好是只使用 Tornado，但如果你连接到 Flask，那么这个设置就可以了。

Flask（据报道）非常好用，而且比 Tornado 更简单。然而，[Flask 需要一个用于生产的 WSGI 服务器](http://flask.pocoo.org/docs/deploying/)（或 FCGI，但这更复杂）。Tornado 设置为 WSGI 服务器非常简单：

```
from tornado.wsgi import WSGIContainer
from tornado.httpserver import HTTPServer
from tornado.ioloop import IOLoop
from yourapplication import app

http_server = HTTPServer(WSGIContainer(app))
http_server.listen(5000)
IOLoop.instance().start() 
```

在这种情况下，开发人员只需要担心 Flask 应用程序。Tornado 只是充当服务器。

也可以使用 Tornado 处理一些请求（例如，websockets，它不能很好地与 WSGI 配合使用），并且仍然可以在 Flask 中完成大部分工作。理论上，您将获得 Flask 的简单性和 Tornado 的异步性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T14:00:21.537

您将使用 Tornado（当然，由于 WSGI 的同步特性而作为阻塞服务器），而不是使用 Apache 作为您的服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T07:23:58.043

将每一种都用于更擅长的领域，但要考虑到混合并不总能获得您正在寻找的性能提升。

例如，此基准测试[https://gist.github.com/andreif/6088558](https://gist.github.com/andreif/6088558)质疑哪种框架组合更快，您必须使示例适应您的主要用例。在这个例子中，flask+tornado 没有提供预期的性能提升。

# c# - 是否可以在 HTML5 Windows 8 Metro 应用程序中开发动态磁贴？

> ID：13163991
> 
> 赞同：3
> 
> 时间：2012-10-31T17:59:43.983
> 
> 标签：c#, html, windows-8, microsoft-metro

是否可以在 HTML5 Windows 8 Metro 应用程序中开发动态磁贴，或者我们是否需要为此使用 C# 和 XAML 进行开发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:44:01.020

以任何语言编写的应用程序都使用 WinRT API 管理磁贴更新，因此从这个角度来看，功能没有区别。创建活动磁贴的磁贴更新是您发送到 TileUpdater.Update 方法的简单 XML 片段，应用磁[贴和徽章示例](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)、[辅助](http://code.msdn.microsoft.com/windowsapps/Secondary-Tiles-Sample-edf2a178)磁贴示例以及[推送和定期通知示例等示例](http://code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603)都向您展示了变化关于主题。

在服务器端——创建一个定期通知服务或一个可以发布推送通知的服务——你几乎可以使用任何你想要的服务器端语言，比如 PHP、ASP.NET 等，因为这只是生成的问题切片的 XML 有效负载。

我新发布的电子书的第 13 章，*[使用 HTML、CSS 和 JavaScript 编程 Windows 8 应用程序](http://blogs.msdn.com/b/microsoft_press/archive/2012/10/29/free-ebook-programming-windows-8-apps-with-html-css-and-javascript.aspx)*。这本电子书是免费的，所以没有理由不下载它：）

.克雷格

# opengl - 在哪里可以找到 GluCylinder 的源代码及其调用的函数

> ID：13163997
> 
> 赞同：0
> 
> 时间：2012-10-31T18:00:12.270
> 
> 标签：opengl, glut

我需要它的源代码`gluCylinder`和它调用的函数，以便我可以更改它们。我做了一些谷歌搜索，但我没有找到任何东西。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T19:11:50.427

它就在[台面 git 树](http://cgit.freedesktop.org/mesa/glu/tree/src/libutil/quad.c#n150)中：

```
void GLAPIENTRY
gluCylinder(GLUquadric *qobj, GLdouble baseRadius, GLdouble topRadius,
        GLdouble height, GLint slices, GLint stacks)
{
    GLint i,j;
    GLfloat sinCache[CACHE_SIZE];
    GLfloat cosCache[CACHE_SIZE];
    GLfloat sinCache2[CACHE_SIZE];
    GLfloat cosCache2[CACHE_SIZE];
    GLfloat sinCache3[CACHE_SIZE];
    GLfloat cosCache3[CACHE_SIZE];
    GLfloat angle;
    GLfloat zLow, zHigh;
    GLfloat sintemp, costemp;
    GLfloat length;
    GLfloat deltaRadius;
    GLfloat zNormal;
    GLfloat xyNormalRatio;
    GLfloat radiusLow, radiusHigh;
    int needCache2, needCache3;

    if (slices >= CACHE_SIZE) slices = CACHE_SIZE-1;

    if (slices < 2 || stacks < 1 || baseRadius < 0.0 || topRadius < 0.0 ||
        height < 0.0) {
    gluQuadricError(qobj, GLU_INVALID_VALUE);
    return;
    }

    /* Compute length (needed for normal calculations) */
    deltaRadius = baseRadius - topRadius;
    length = SQRT(deltaRadius*deltaRadius + height*height);
    if (length == 0.0) {
    gluQuadricError(qobj, GLU_INVALID_VALUE);
    return;
    }

    /* Cache is the vertex locations cache */
    /* Cache2 is the various normals at the vertices themselves */
    /* Cache3 is the various normals for the faces */
    needCache2 = needCache3 = 0;
    if (qobj->normals == GLU_SMOOTH) {
    needCache2 = 1;
    }

    if (qobj->normals == GLU_FLAT) {
    if (qobj->drawStyle != GLU_POINT) {
        needCache3 = 1;
    }
    if (qobj->drawStyle == GLU_LINE) {
        needCache2 = 1;
    }
    }

    zNormal = deltaRadius / length;
    xyNormalRatio = height / length;

    for (i = 0; i < slices; i++) {
    angle = 2 * PI * i / slices;
    if (needCache2) {
        if (qobj->orientation == GLU_OUTSIDE) {
        sinCache2[i] = xyNormalRatio * SIN(angle);
        cosCache2[i] = xyNormalRatio * COS(angle);
        } else {
        sinCache2[i] = -xyNormalRatio * SIN(angle);
        cosCache2[i] = -xyNormalRatio * COS(angle);
        }
    }
    sinCache[i] = SIN(angle);
    cosCache[i] = COS(angle);
    }

    if (needCache3) {
    for (i = 0; i < slices; i++) {
        angle = 2 * PI * (i-0.5) / slices;
        if (qobj->orientation == GLU_OUTSIDE) {
        sinCache3[i] = xyNormalRatio * SIN(angle);
        cosCache3[i] = xyNormalRatio * COS(angle);
        } else {
        sinCache3[i] = -xyNormalRatio * SIN(angle);
        cosCache3[i] = -xyNormalRatio * COS(angle);
        }
    }
    }

    sinCache[slices] = sinCache[0];
    cosCache[slices] = cosCache[0];
    if (needCache2) {
    sinCache2[slices] = sinCache2[0];
    cosCache2[slices] = cosCache2[0];
    }
    if (needCache3) {
    sinCache3[slices] = sinCache3[0];
    cosCache3[slices] = cosCache3[0];
    }

    switch (qobj->drawStyle) {
      case GLU_FILL:
    /* Note:
    ** An argument could be made for using a TRIANGLE_FAN for the end
    ** of the cylinder of either radii is 0.0 (a cone).  However, a
    ** TRIANGLE_FAN would not work in smooth shading mode (the common
    ** case) because the normal for the apex is different for every
    ** triangle (and TRIANGLE_FAN doesn't let me respecify that normal).
    ** Now, my choice is GL_TRIANGLES, or leave the GL_QUAD_STRIP and
    ** just let the GL trivially reject one of the two triangles of the
    ** QUAD.  GL_QUAD_STRIP is probably faster, so I will leave this code
    ** alone.
    */
    for (j = 0; j < stacks; j++) {
        zLow = j * height / stacks;
        zHigh = (j + 1) * height / stacks;
        radiusLow = baseRadius - deltaRadius * ((float) j / stacks);
        radiusHigh = baseRadius - deltaRadius * ((float) (j + 1) / stacks);

        glBegin(GL_QUAD_STRIP);
        for (i = 0; i <= slices; i++) {
        switch(qobj->normals) {
          case GLU_FLAT:
            glNormal3f(sinCache3[i], cosCache3[i], zNormal);
            break;
          case GLU_SMOOTH:
            glNormal3f(sinCache2[i], cosCache2[i], zNormal);
            break;
          case GLU_NONE:
          default:
            break;
        }
        if (qobj->orientation == GLU_OUTSIDE) {
            if (qobj->textureCoords) {
            glTexCoord2f(1 - (float) i / slices,
                (float) j / stacks);
            }
            glVertex3f(radiusLow * sinCache[i],
                radiusLow * cosCache[i], zLow);
            if (qobj->textureCoords) {
            glTexCoord2f(1 - (float) i / slices,
                (float) (j+1) / stacks);
            }
            glVertex3f(radiusHigh * sinCache[i],
                radiusHigh * cosCache[i], zHigh);
        } else {
            if (qobj->textureCoords) {
            glTexCoord2f(1 - (float) i / slices,
                (float) (j+1) / stacks);
            }
            glVertex3f(radiusHigh * sinCache[i],
                radiusHigh * cosCache[i], zHigh);
            if (qobj->textureCoords) {
            glTexCoord2f(1 - (float) i / slices,
                (float) j / stacks);
            }
            glVertex3f(radiusLow * sinCache[i],
                radiusLow * cosCache[i], zLow);
        }
        }
        glEnd();
    }
    break;
      case GLU_POINT:
    glBegin(GL_POINTS);
    for (i = 0; i < slices; i++) {
        switch(qobj->normals) {
          case GLU_FLAT:
          case GLU_SMOOTH:
        glNormal3f(sinCache2[i], cosCache2[i], zNormal);
        break;
          case GLU_NONE:
          default:
        break;
        }
        sintemp = sinCache[i];
        costemp = cosCache[i];
        for (j = 0; j <= stacks; j++) {
        zLow = j * height / stacks;
        radiusLow = baseRadius - deltaRadius * ((float) j / stacks);

        if (qobj->textureCoords) {
            glTexCoord2f(1 - (float) i / slices,
                (float) j / stacks);
        }
        glVertex3f(radiusLow * sintemp,
            radiusLow * costemp, zLow);
        }
    }
    glEnd();
    break;
      case GLU_LINE:
    for (j = 1; j < stacks; j++) {
        zLow = j * height / stacks;
        radiusLow = baseRadius - deltaRadius * ((float) j / stacks);

        glBegin(GL_LINE_STRIP);
        for (i = 0; i <= slices; i++) {
        switch(qobj->normals) {
          case GLU_FLAT:
            glNormal3f(sinCache3[i], cosCache3[i], zNormal);
            break;
          case GLU_SMOOTH:
            glNormal3f(sinCache2[i], cosCache2[i], zNormal);
            break;
          case GLU_NONE:
          default:
            break;
        }
        if (qobj->textureCoords) {
            glTexCoord2f(1 - (float) i / slices,
                (float) j / stacks);
        }
        glVertex3f(radiusLow * sinCache[i],
            radiusLow * cosCache[i], zLow);
        }
        glEnd();
    }
    /* Intentionally fall through here... */
      case GLU_SILHOUETTE:
    for (j = 0; j <= stacks; j += stacks) {
        zLow = j * height / stacks;
        radiusLow = baseRadius - deltaRadius * ((float) j / stacks);

        glBegin(GL_LINE_STRIP);
        for (i = 0; i <= slices; i++) {
        switch(qobj->normals) {
          case GLU_FLAT:
            glNormal3f(sinCache3[i], cosCache3[i], zNormal);
            break;
          case GLU_SMOOTH:
            glNormal3f(sinCache2[i], cosCache2[i], zNormal);
            break;
          case GLU_NONE:
          default:
            break;
        }
        if (qobj->textureCoords) {
            glTexCoord2f(1 - (float) i / slices,
                (float) j / stacks);
        }
        glVertex3f(radiusLow * sinCache[i], radiusLow * cosCache[i],
            zLow);
        }
        glEnd();
    }
    for (i = 0; i < slices; i++) {
        switch(qobj->normals) {
          case GLU_FLAT:
          case GLU_SMOOTH:
        glNormal3f(sinCache2[i], cosCache2[i], 0.0);
        break;
          case GLU_NONE:
          default:
        break;
        }
        sintemp = sinCache[i];
        costemp = cosCache[i];
        glBegin(GL_LINE_STRIP);
        for (j = 0; j <= stacks; j++) {
        zLow = j * height / stacks;
        radiusLow = baseRadius - deltaRadius * ((float) j / stacks);

        if (qobj->textureCoords) {
            glTexCoord2f(1 - (float) i / slices,
                (float) j / stacks);
        }
        glVertex3f(radiusLow * sintemp,
            radiusLow * costemp, zLow);
        }
        glEnd();
    }
    break;
      default:
    break;
    }
} 
```

# java - 二叉树：方法删除子树

> ID：13163998
> 
> 赞同：2
> 
> 时间：2012-10-31T18:00:13.280
> 
> 标签：java, binary-tree

我有一个无序的二叉树，我必须做一个删除根 x 的子树的方法。如果元素 x 在二叉树中多次出现，则该方法仅删除根 x 的一个子树（它找到的第一个子树）。如果执行了删除，则返回 true。如果元素 x 不存在于二叉树中，则返回 false。所以方法是：

```
 public class BinaryTree 
{
    protected class Node 
    {
        Integer element;
        Node left;
        Node right;

        Node(int element) 
        {
            this.element = element;
            left = right = null;
        }

        Node(int element, Node left, Node right) 
        {
            this.element = element;
            this.left = left;
            this.right = right;
        }

    protected Node root;

    public BinaryTree() 
    {
        root = null;
    }

    private class BoolNode 
    {
        boolean ft;
        Node nodo;

        BoolNode(boolean ft, Node nodo) 
        {
            this.ft = ft;
            this.nodo = nodo;
        }
    }

    public boolean removeSubtree(int x) 
    {
        BoolNode ris = removeSubtree(x, root);
        //root = ...;
        return ris.ft;
    }

    private BoolNode removeSubtree(int x, Node node) 
    {
        return null;
    }
} 
```

我不知道如何开始，有人知道吗？甚至伪代码..谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:03:26.703

应该去这样的事情......

*   找到包含值 X 的节点 N
*   如果 N 是叶子，则删除叶子
*   如果 N 是父母，

    ```
     removeNodes(N.left);
     removeNodes(N.right);
     remove(N); 
    ```

*   重复直到你碰到一片叶子

    ```
     private void removeNodes(Node base);  //prepare for this when the teacher asks you why it's private
     // - because you do not want to expose this functionality outside of the class;
     // the only 'interface' exposed is the wrapper call removeSubtree(...) as the user shouldn't worry about the internal functionality. 
    ```

removeSubtree() 是递归 removeNodes() 的包装器；

编辑：好的，澄清你的谜团。假设我们有这棵树

```
 1 --- this is root
            / \
           3   7
          / \ / \
     (a) 5  4 3  2  //these branches don't matter right now
        / \
       5   6
      / \  / \
     5  4 3   2 
```

现在，假设您调用 removeSubtree(5, root);

它将遍历树，直到它碰到节点 (a) - 左边的前 5 个。您当前代码的编写方式将执行此操作：它将找到值为 X (5) 的节点；然后对于他所有的左右子孩子，它将寻找值 5。

让我们专注于此

```
 1 --- this is root
            / \
           3   7
            \ / \
            4 3  2 
```

这是调用 removeSubtree(5, root); 后你应该得到的。换句话说，在找到第一个值为 5 的节点并删除它的子节点后，查看应该删除的子树

```
 5  -- we should delete all of these starting from here
        / \
       5   6
      / \  / \
     5  4 3   2 
```

但是您的代码随后将在该子树中查找要删除的值 5。这就是为什么您需要一个通用的 deleteSubtree() 例程来遍历树并删除它找到的所有内容。您的 removeSubtree(int, node) 例程必须依赖它或通过实现该机制本身来“内联”它。

现在你的代码只会删除这个

```
 1 --- this is root
            / \
           3   7
          / \ / \
     (a) 5  4 3  2  //these branches don't matter right now
        / \
  (b)  5   6
      / \  / \
(c)  5  4 3   2 
```

换句话说，它将落在节点 A（前 5 个）上，而不是删除节点 (a) 以下的所有内容，而是搜索 A 下面的另一个值 5，找到 (b) 并尝试删除它的子树，仅匹配节点（C）。

最终结果将是这样 - 您的代码将仅删除三个五并留给您

```
 1 --- this is root
            / \
           3   7
          / \ / \
         x  4 3  2  
        / \
       x   6
      / \  / \
     x  4 3   2 
```

你现在知道为什么不能递归使用相同的函数了吗？:) 至少不是你现在想要的方式。但是，你可以试试这个 -

```
 removeSubtree(node.left.value, node);
 removeSubtree(node.right.value, node);
 removeNode(node); 
```

这将有效地找到正确的子树 - 节点 (a)，然后调用自身来匹配它的子节点 - 节点 5 和 6（在节点 (b) 的深度），从而删除它们。在任何情况下，您都不能像以前那样在这些调用中重复使用值 X

```
 removeSubtree(x, node.left);
 removeSubtree(x, node.right);
 removeNode(node); 
```

我希望能澄清一些事情：）嘿，也许我应该教这个：D