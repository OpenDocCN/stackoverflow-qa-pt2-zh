# StackOverflow 问答 13421000-13421999

# visual-studio - VisualStudio - 如何转义这个字符

> ID：13421001
> 
> 赞同：1
> 
> 时间：2012-11-16T16:55:16.527
> 
> 标签：visual-studio, escaping, character, special-characters, unicode-escapes

我想我需要在这里转义特殊字符：

```
Process.Start(userSelectedFilePath, "\u0007" & ThisDir.Path & "\u000B" & checkedpath1 & "\u0007") 
```

结果必须是这样的： userselecfilepath "a blackquoted path\and other folder"

我做错了什么？

谢谢你

**更新**

解决方案：

```
ControlChars.Quote & Path.Combine(ThisDir.Path, checkedpath1) & ControlChars.Quote 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:56:55.570

尝试这个：

Process.Start（userSelectedFilePath，“\\”＆ThisDir.Path＆“\\”＆checkedpath1＆“\\”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:58:29.250

```
Process.Start(userSelectedFilePath, Path.Combine(ThisDir.Path, checkedpath)); 
```

**[路径组合](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)**

> 如果 path1 不是驱动器引用（即“C:”或“D:”）并且不以 DirectorySeparatorChar、AltDirectorySeparatorChar 或 VolumeSeparatorChar 中定义的有效分隔符结尾，则 DirectorySeparatorChar 在连接之前附加到 path1。
> 
> 如果 path2 不包含根（例如，如果 path2 不以分隔符或驱动器规范开头），则结果是两个路径的连接，中间有分隔符。如果 path2 包含根，则返回 path2。
> 
> 如果参数有空格，则不会对其进行解析。因此，如果 path2 包含空格（例如，“c:\”），Combine 方法会将 path2 附加到 path1 而不是仅返回 path2。
> 
> 并非所有目录和文件名的无效字符都被 Combine 方法解释为不可接受的，因为您可以将这些字符用于搜索通配符。例如，虽然 Path.Combine("c:\", "*.txt") 如果您要从中创建文件可能无效，但它作为搜索字符串是有效的。因此，Combine 方法成功地解释了它。

# jquery - 未捕获的 ReferenceError：jQuery 未定义“jquery-ui.js:338”

> ID：13421009
> 
> 赞同：1
> 
> 时间：2012-11-16T16:55:45.880
> 
> 标签：jquery

我的 jquery 脚本参考是：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js" type="text/javascript"></script> 
```

我正在使用 Chrome 版本 23.0.1271.64 m - 我在第 338 行遇到错误

```
})( jQuery );  //--> line 338 is highlighted 
```

这对我来说是第一次，正在寻找答案。

我正在学习如何使用 API 并拥有一个简单的网页

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />
    <meta http-equiv="PRAGMA" content="NO-CACHE" />

    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(function() {
        $( "#edit-user" )
                .button()
                .click(function() {
                    $( "#dialog-form" ).dialog( "open" );
                });         
     });
    </script>

</head>
<body>
<button id="edit-user">Edit User</button>
<div id="dialog-form" title="Radio Dialog">
        <form>
            <fieldset>
                <input type='radio' value='A' name='myRadio'>A
                <input type='radio' value='B' name='myRadio'>B
                <input type='radio' value='C' name='myRadio'>C
            </fieldset>
        </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:54:30.197

由于您提供的信息有限，我假设您希望打开某种对话框，对吗？

无论如何，您的对话框实际上已经存在，但是为了看到正在发生的事情，请先隐藏它（但是当您稍后真正实现它时，请使用 .css 来执行此操作）：

```
<div id="dialog-form" title="Radio Dialog" style='display:none;'> 
```

然后，您似乎需要在打开对话框之前创建对话框。这很可能是阻止您前进的原因：

```
$(function() {

        $( "#dialog-form" ).dialog({
            autoOpen: false      
        });      

        $( "#edit-user" ).click(function() {
                    $( "#dialog-form" ).dialog( "open" );
         });         
     }); 
```

看看这个[jsfiddle](http://jsfiddle.net/NjpBU/)

希望这可以帮助您解决您遇到的任何问题！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-02T11:21:47.027

您需要先包含 jquery

# java - 创建 FileReader 哪种方式更适合优化？

> ID：13421012
> 
> 赞同：2
> 
> 时间：2012-11-16T16:56:04.073
> 
> 标签：java, file, file-io, filereader, java-io

从优化的角度来看，像这样单独声明文件更好吗

```
File f = new File("sample.txt");
FileReader fr = new FileReader(f); 
```

还是像这样内联更好

```
FileReader fr = new FileReader(new File("sample.txt));] 
```

不确定它是否真的很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T16:57:31.470

没有什么不同的。在您的特定情况下做任何更具可读性的事情。

它*可能*会影响`File`对象何时有资格进行垃圾收集，但我会*非常*惊讶地看到这种情况存在显着差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T16:57:33.077

如果您`new File("sample.txt)`稍后要在代码中引用刚刚创建的实例，那么`File f = new File("sample.txt");`将是必需的。您将能够通过引用变量访问它`f`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:16:55.583

**-**无论您是否创建一个`Object Reference Variable`类型`File`来引用该`File`对象，它仍然会出现在`heap`.

**-**是的，当您下次需要它时，拥有一个`Object Reference Variable`将帮助您参考该对象是非常有效的......`File`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T17:34:34.530

*不同之处显然是在内联版本的代码中无法轻松访问文件对象。它使代码的可读性、可维护性和可调试性降低。*

# c# - 如何以编程方式在 Excel 中禁用公式错误检查

> ID：13421018
> 
> 赞同：1
> 
> 时间：2012-11-16T16:56:09.770
> 
> 标签：c#, excel, formula

我尝试通过几个步骤将公式设置为 C# 中的 Excel 单元格，但是在我设置它的过程中，Excel 似乎由于公式无效而引发异常。我想知道如何关闭 C# 中的公式错误检查。谢谢

编辑公式太长，超过 255 个字符。所以我不能一步设置公式。必须设置一个简短的公式，然后替换参见[http://netoffice.codeplex.com/discussions/402947](http://netoffice.codeplex.com/discussions/402947)

请参阅下面的代码，但在 rng.Formula = onePart; 中出现错误

其中常量.CUT_LENGTH = 253，常量.MAX_FORMULA_LENGTH = 255，分隔符 =“||” 我尝试将 EvaluateToError 设置为 false，仍然出现错误

```
 XLApp.ErrorCheckingOptions.InconsistentFormula = false;
                XLApp.ErrorCheckingOptions.EvaluateToError = false;

                SetFormula(rangeFunction, formula);  

    public static void SetFormula(Range rng, string origFormula)
    {
        int i = 0;
        foreach (var onePart in CutStringIntoSubstrings(origFormula))
        {                
            if(i==0)
            {
                rng.Formula = onePart;
                i++;
            }
            else
            {
                rng.Replace(Constants.Separator, onePart);
            }
        }
    }
    public static IEnumerable<string> CutStringIntoSubstrings(string origFormula)
    {
        if (origFormula == null) yield return string.Empty;
        if (string.IsNullOrEmpty(origFormula)) yield return string.Empty;
        if (origFormula.Length <= Constants.MAX_FORMULA_LENGTH) yield return origFormula;

        int startIdx = 0;
        int endIdx = startIdx + Constants.CUT_LENGTH;
        while(endIdx < origFormula.Length)
        {
            var substr = origFormula.Substring(startIdx, Constants.CUT_LENGTH);
            if(startIdx + Constants.CUT_LENGTH < origFormula.Length)
            {
                substr += Constants.Separator;
            }
            yield return substr;
            startIdx += Constants.CUT_LENGTH;
            endIdx = startIdx + Constants.CUT_LENGTH;
        }
        if (startIdx < origFormula.Length) yield return origFormula.Substring(startIdx);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:15:22.993

你可以参考这篇文章

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.errorcheckingoptions_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.errorcheckingoptions_members.aspx) http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel .error.ignore(v=office.11​​).aspx

可能会有所帮助:)

# oracle - 是否可以在 from 子句中使用 2 列的连接值作为表名

> ID：13421020
> 
> 赞同：0
> 
> 时间：2012-11-16T16:56:23.137
> 
> 标签：oracle, select, oracle10g, sqlplus

我想连接来自 2 个选定列的值并将结果用作另一个选择语句的表名：

```
select a.ColumnA,
       a.ColumnB, 
       b.ColumnG, 
       (a.ColumnA || '.' || a.ColumnB) "TABLENAME"
       (select t.ColumnX from TABLENAME t where t.ColumnY = 'whatever') "GOAL"
from
       table a,
       table b,
where
       .... 
```

所以假设

```
table a:
ColumnA ColumnB ColumnC ...
    dev    town      15

table b:
ColumnF ColumnG ColumnH ...
    aaa    bbb      ccc 
```

架构 dev 中的某个地方存在表 town，可以使用名称 dev.town 进行查询：

```
table dev.town:
ColumnX   ColumnY ColumnZ ...
    Joe  whatever      Mr 
```

所以“我的查询”返回

```
ColumnA ColumnB ColumnG TABLENAME GOAL
--------------------------------------
    dev    town     bbb  dev.town  Joe 
```

有没有办法得到我需要的结果？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:49:44.150

不在 Oracle 的 SQL 语句中。如果您深入了解 PL/SQL，那么您可以使用`EXECUTE IMMEDIATE`语句来动态生成所需的表。

# sql-server - SQL Server：更改表 A 而表 B 执行 CRUD？

> ID：13421022
> 
> 赞同：1
> 
> 时间：2012-11-16T16:56:23.883
> 
> 标签：sql-server, asp.net-mvc, entity-framework

在这种情况下，我应该将我的数据库一分为二吗？

**设想**

当客户在`Order`表中创建、编辑、保存订单时，网站所有者调用存储过程来更改表中的表属性`Email`。

**更新**

Order 表与 Email 表的唯一关系是 userId (FK on Email 表)。那么，如果在客户下订单时，我会同时在电子邮件表中添加一个可以为空的“CcAddressId”列，这会产生什么后果。此订单成功后会出现问题吗？

**问题：**

*   如果这些事件同时发生，是否会产生潜在的错误？
*   将数据库分成组会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:28:39.480

简短的回答是不要将数据库一分为二，因为您将失去外键强制执行的引用完整性，更不用说其他人在上面提出的其他问题了。您需要做的是查明当您将数据插入 Orders 表时，SQL Server 是否会为您的 EMails 表发出任何类型的锁定。您可以以此为起点进行实验并自己找出答案：

[http://aboutsqlserver.com/2012/04/05/locking-in-microsoft-sql-server-part-13-schema-locks/](http://aboutsqlserver.com/2012/04/05/locking-in-microsoft-sql-server-part-13-schema-locks/)

更改表将尝试发出与任何其他类型的锁不兼容的模式修改锁 (SCH-M)。因此，如果在被更改的表上发生任何活动（我假设这将是因为正在验证外键约束），您的模式修改语句将被阻塞很长时间。

这就是为什么最好在数据库负载不重时运行模式更改语句的原因。

# php - 时间相关算法的性能

> ID：13421026
> 
> 赞同：13
> 
> 时间：2012-11-16T16:56:36.520
> 
> 标签：php, performance, algorithm, merging-data

我有一个函数，它需要 2 个数组（$schedule，$remove），它们都是包含时间的天数组，它会从 schedule 中删除时间。

现在，如果我有 1 到 20 个用户，则此功能可以正常工作，生成日历需要 2-4 秒，这很好，但是当有 20 多个用户有很多日程表条目时，它会达到 15 秒以上。

我正在使用 CodeIgniter，并且我在一个被大量调用的助手中拥有这个函数。

所以我想知道你们是否能找到更好的方法来处理我的问题或我对算法所做的调整以使其更快。

**注意：** 在下面的代码中，我看到的最大问题是每次修改结构时递归调用和循环中断。

我在两个数组上循环并进行测试以查看缺席是否在可用性内部/重叠/相等/外部，然后如果结构被修改，则调用该函数，如果不返回最终结构。

**笔记2 ：**

在本地 Apache 崩溃，因为递归函数有时被调用超过 100 次。

**这是我的代码：**

```
 function removeSessionsFromSchedule($schedule, $remove) {

    $modified = false;
    if (is_array($schedule) && count($schedule) > 0 && is_array($remove) && count($remove) > 0 && checkArrayEmpty($remove)) {

        // Minimise the iterations
        $remove = minimiseRemoveSchedule($remove);
        foreach ($schedule as $s => $dispo) {

            if ($modified) {
                break;
            }

            $pos        = 0;
            $countdispo = count($dispo);

            foreach ($dispo as $d) {

                $abs = isset($remove[$s]) ?  $remove[$s] :null;
                $counter = 0;
                // availability start/end
                $dis_s = strtotime($d['heure_debut']);
                $dis_e = strtotime($d['heure_fin']);
                if (is_array($abs) && count($abs) > 0) {
                    foreach ($abs as $a) {
                        // absence start/end
                        $abs_s = strtotime($a['heure_debut']);
                        $abs_e = strtotime($a['heure_fin']);
                        // Tests to see the if there is overlap between absence and availability
                        // (2) [a_s]---[ds - de]---[a_e]
                        if ($abs_s <= $dis_s && $abs_e >= $dis_e) {
                            // delete availability
                            unset($schedule[$s][$pos]);
                            $modified = true;
                            break;
                        }
                        // (7)[as == ds] && [ae < de]
                        else if ($abs_s == $dis_s && $abs_e < $dis_e) {
                            unset($schedule[$s][$pos]);
                            $schedule[$s][$pos] = $d;
                            $schedule[$s][$pos]['heure_debut'] = date("H:i", $abs_e);
                            $schedule[$s][$pos]['heure_fin'] = date("H:i", $dis_e);
                            $modified = true;
                            break;
                        }
                        // (6) [ds -de] --- [as  ae] return dispo as is
                        else if ($abs_s >= $dis_e) {
                            unset($schedule[$s][$pos]);
                            $schedule[$s][$pos] = $d;
                            $modified ?: false;
                        }
                        // (5)[as  ae] [ds -de] ---  return dispo as is
                        else if ($abs_e <= $dis_s) {
                            unset($schedule[$s][$pos]);
                            $schedule[$s][$pos] = $d;
                            $modified ?: false;
                        }
                        // (1)[ds] --- [as] --- [ae] --- [de] (duplicate dis with new times)
                        else if ($abs_s > $dis_s && $abs_e <= $dis_e) {
                            // new times as : // s1 = ds-as &&  s2 = ae-de
                            unset($schedule[$s][$pos]);
                            $schedule[$s][$pos] = $d;
                            $schedule[$s][$pos + 1] = $d;

                            $schedule[$s][$pos]['heure_debut'] = date("H:i", $dis_s);
                            $schedule[$s][$pos]['heure_fin'] = date("H:i", $abs_s);
                            $schedule[$s][$pos + 1]['heure_debut'] = date("H:i", $abs_e);
                            $schedule[$s][$pos + 1]['heure_fin'] = date("H:i", $dis_e);

                            // a revoir si ca ne cause pas d'autre problem qu'on fasse pos++ ...
                            $pos++;

                            $modified = true;
                            break;
                        }
                        // (3)[as] -- [ds] --- [ae] -- [de]
                        else if ($abs_s < $dis_s && $abs_e < $dis_e) {
                            unset($schedule[$s][$pos]);
                            $schedule[$s][$pos] = $d;
                            $schedule[$s][$pos]['heure_debut'] = date("H:i", $abs_e);
                            $schedule[$s][$pos]['heure_fin'] = date("H:i", $dis_e);
                            $modified = true;
                            break;
                        }
                        // (4) [ds]---[as]--- [de]--- [ae]
                        else if ($abs_s > $dis_s && $abs_s < $dis_e && $abs_e > $dis_e) {
                            unset($schedule[$s][$pos]);
                            $schedule[$s][$pos] = $d;
                            $schedule[$s][$pos]['heure_debut'] = date("H:i", $dis_s);
                            $schedule[$s][$pos]['heure_fin'] = date("H:i", $abs_s);
                            $modified = true;
                            break;
                        } else {
                            $modified ?: false;
                        }
                    }

                    // if($modified == true) { break;}

                } else {
                    $modified = false;
                }
                $pos++;
            }
        }
    } else {
        $modified = false;
    }

    if ($modified) {
        $schedule = resetIndexes($schedule);
        $schedule = sortByTime($schedule);
        $schedule = removeSessionsFromSchedule($schedule, $remove);
    }

    return $schedule;
} 
```

**相关助手**

```
function checkArrayEmpty($array) {
    if(is_array($array) && !empty($array)) {
        foreach($array as $arr) {
            if(is_array($arr) && !empty($arr)) {
                return true;
            }
        }
    }
    return false;
}

function subval_sort_by_time($a, $subkey) {
    if (is_array($a) && count($a) > 0) {
        foreach ($a as $k => $v) {
            $b[$k] = strtotime($v[$subkey]);
        }
        asort($b);
        foreach ($b as $key => $val) {
            $c[] = $a[$key];
        }
        return $c;
    }
    else
        return $a;
}

// Reset Index function 
function resetIndexes($array) {
        $new = array();
        foreach($array as $date => $arr) {
            //$new[$date]= array_values($arr);
            $new[$date]= array_merge(array(),$arr);
        }
        return $new;
    }

// sort by time
function sortByTime($array) {
    $sorted = array();
    if(is_array($array) && !empty($array)){
        foreach ($array as $s => $val) {
            $sorted[$s] = subval_sort_by_time($val, 'heure_debut');
        }
    }
    return $sorted;
  }

 function minimiseRemoveSchedule($array) {
    $new = array();
    foreach($array as $date => $arr) {
        $i=0;
        if(is_array($arr) && !empty($arr)) {

            foreach($arr as $a) {

                if(isset($new[$date][$i])) {
                    if($new[$date][$i]['heure_fin'] == $a['heure_debut']) {
                        $new[$date][$i]['heure_fin']  = $a['heure_fin'];
                    }
                    else {
                        $i++;
                        $new[$date][$i]['heure_debut'] = $a['heure_debut'];
                        $new[$date][$i]['heure_fin']   = $a['heure_fin'];
                    }

                } else {
                    $new[$date][$i]['heure_debut'] = $a['heure_debut'];
                    $new[$date][$i]['heure_fin']   = $a['heure_fin'];
                }
            }
        }
    }
    return $new;
} 
```

我通过的数组示例：

```
$schedule = Array(
    '2012-11-12' => Array(),
    '2012-11-13' => Array(),
    '2012-11-14' => Array( 0 => Array("employe_id" => 8 , "heure_debut" => '16:00' ,"heure_fin" => '20:00' ,"date_seance" => 2012-11-14 , "jour_id" => 3)),
    '2012-11-15' => Array( 
        0 => Array("employe_id" => 8 , "heure_debut" => '09:00' ,"heure_fin" => '15:00' ,"date_seance" => 2012-11-15 , "jour_id" => 4),
        1 => Array("employe_id" => 8 , "heure_debut" => '16:00' ,"heure_fin" => '21:00' ,"date_seance" => 2012-11-15 , "jour_id" => 4)
    ),
    '2012-11-16' => Array(),
    '2012-11-17' => Array(),
    '2012-11-18' => Array(),
    '2012-11-19' => Array(0 => Array("employe_id" => 8 ,"heure_debut" => '10:00' ,"heure_fin" => '22:00' ,"date_seance" => 2012-11-19 ,"jour_id" => 1)),
    '2012-11-20' => Array(
        0 => Array("employe_id" => 8 ,"heure_debut" => '09:00' ,"heure_fin" => '15:00' ,"date_seance" => 2012-11-20 ,"jour_id" => 2),
        1 => Array("employe_id" => 8 ,"heure_debut" => '16:00' ,"heure_fin" => '20:00' ,"date_seance" => 2012-11-20 ,"jour_id" => 2)
    )
); 
```

对于第二个数组：

```
$remove = array(
    '2012-11-12' => Array(),
    '2012-11-13' => Array(),
    '2012-11-14' => Array(),
    '2012-11-15'  => Array(),
    '2012-11-16' => Array(),
    '2012-11-17' => Array(),
    '2012-11-18' => Array(),
    // in this example i only have 1 absence ... I could have N absences
    '2012-11-19' => Array(0 => Array("employe_id" => 8 ,"date_debut" => 2012-11-19,"date_fin" => 2012-11-19  ,"heure_debut" => '12:00:00',"heure_fin"   => '14:00:00')),
    '2012-11-20' => Array(),
    '2012-11-21' => Array()
); 
```

结果数组将是：

```
$result = array(
Array
(
       [2012-11-12] => Array()
       [2012-11-13] => Array()
       // no change 
       [2012-11-14] => Array( [0] => Array("employe_id" => 8 , "heure_debut" => 16:00 ,"heure_fin" => 20:00 ,"date_seance" => 2012-11-14 , "jour_id" => 3))
       // no change
       [2012-11-15] => Array( 
                              [0] => Array("employe_id" => 8 , "heure_debut" => 09:00 ,"heure_fin" => 15:00 ,"date_seance" => 2012-11-15 , "jour_id" => 4),
                              [1] => Array("employe_id" => 8 , "heure_debut" => 16:00 ,"heure_fin" => 21:00 ,"date_seance" => 2012-11-15 , "jour_id" => 4)
                            )
       [2012-11-16] => Array()
       [2012-11-17] => Array()
       [2012-11-18] => Array()
       // since absence from 12 to 14 and  we had availability from 8 to 22 instead we will have 8->12 and 14->22
       [2012-11-19] => Array(
                          [0] => Array("employe_id" => 8 ,"heure_debut" => 08:00 ,"heure_fin" => 12:00 ,"date_seance" => 2012-11-20 ,"jour_id" => 1),
                          [1] => Array("employe_id" => 8 ,"heure_debut" => 14:00 ,"heure_fin" => 22:00 ,"date_seance" => 2012-11-20 ,"jour_id" => 1)
                        )
       // no changes since no absence during those time
       [2012-11-20] => Array(
                          [0] => Array("employe_id" => 8 ,"heure_debut" => 09:00 ,"heure_fin" => 15:00 ,"date_seance" => 2012-11-20 ,"jour_id" => 2),
                          [1] => Array("employe_id" => 8 ,"heure_debut" => 16:00 ,"heure_fin" => 20:00 ,"date_seance" => 2012-11-20 ,"jour_id" => 2)
                        )
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T16:19:17.527

我不明白为什么您需要指数时间递归来执行此任务。您可以通过嵌套循环摆脱 O(r * e^2) 解决方案（其中 e 是每天的平均可用性/移除次数，r 是移除次数的大小）。伪代码如下：

```
for removeday in remove:
    define scheduleday := schedule[removeday.date]
    if scheduleday not found:
        continue
    for removesegment in removeday:
        define temparray := empty
        for availsegment in scheduleday:
            if availsegment.employeid != removesegment.employeid:
                continue
            if no overlap:
                temparray.add(availsegment)
            if partial overlap:
                temparray.add(availsegment.split(removesegment))
        scheduleday = temparray
    schedule[removeday.date] := scheduleday
return schedule 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T02:07:27.607

如果您不想在函数中添加递归，那么您必须首先将其转换为可用调度数组矩阵的秒数。这里的想法：

```
function scheduleToSecondsMatrix($value, $available=true){

    if(!is_array($value) || empty($value))
        return false;

    $object = array();

    foreach($value as $v) {
        $s = strtotime('1970-01-01 ' . $v['heure_debut'] . (!$available ? ' +1 seconds' : '')); // ref. http://stackoverflow.com/questions/4605117/how-to-convert-a-hhmmss-string-to-seconds-with-php
        $e = strtotime('1970-01-01 ' . $v['heure_fin'] . (!$available ? ' -1 seconds' : ''));

        if($e < $s) continue; // logically end time should be greater than start time

        while($s <= $e) {
            // i use string as key as this result will be merged: http://php.net/manual/en/function.array-merge.php
            $object["in_" . $s] = $available; // means in this seconds range is available
            $s++;
        }
    }

    return $object;
}

/**
 * This function assume: 
 * - all parameters refer to only one employee
 */
function removeSessionsFromScheduleRev($schedule, $remove) {

    if(!is_array($schedule) || !is_array($remove) || empty($schedule) || empty($remove)) return false;

    foreach($schedule as $s => &$dispo){

        if(empty($remove[$s]))
            continue;

        // convert the schedule to seconds array matrix, that's i call it :)
        $seconds_available = scheduleToSecondsMatrix($dispo, true);
        $seconds_not_available = scheduleToSecondsMatrix($remove[$s], false);

        if( !$seconds_available || !$seconds_not_available ) continue; // nothing changed

        $seconds_new = array_merge($seconds_available, $seconds_not_available);
        $seconds_new = array_filter($seconds_new); // remove empty/false value

        $new_time_schedule = array();
        $last_seconds = 0;

        $i=0;

        foreach($seconds_new as $in_seconds => $val){

            $in_seconds = intval(str_replace('in_', '', $in_seconds));

            if($in_seconds > ($last_seconds+1)){
                if(!empty($new_time_schedule)) $i++;
            }

            if(empty($new_time_schedule[$i]['start'])) $new_time_schedule[$i]['start'] = $in_seconds;
            $new_time_schedule[$i]['end'] = $in_seconds;

            $last_seconds = $in_seconds;
        }

        foreach($new_time_schedule as $idx => $val){
            if($idx && empty($dispo[$idx])) $dispo[$idx] = $dispo[$idx-1];

            $dispo[$idx]['heure_debut'] = date('H:i:s', $val['start']);
            $dispo[$idx]['heure_fin'] = date('H:i:s', $val['end']);
        }
    }

    return $schedule;
} 
```

我尚未对性能进行基准测试，因此您可以在自己的代码上尝试此代码。我希望它有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-20T09:33:19.903

下面的代码为给定的示例生成相同的输出，但我没有测试所有可能的情况。

[**工作演示**](http://codepad.org/eWD0Z7zd)

```
function removeSessionsFromScheduleHelper(&$schedule,&$remove) {

    $change = false;

    foreach($remove as $date => &$remove_ranges) {

        if(empty($remove_ranges) || !isset($schedule[$date]))
            continue;

        foreach($remove_ranges as &$remove_range) {
            foreach($schedule[$date] as $day_key => &$time) {

                //start after finish, no overlap and because schedules are sorted
                //next items in schedule loop will also not overlap
                //break schedule loop & move to next remove iteration
                if($time['heure_debut'] >= $remove_range['heure_fin'])
                    break;

                //finish before start, no overlap
                if($time['heure_fin'] <= $remove_range['heure_debut'])
                    continue;

                //complete overlap, remove
                if($time['heure_debut'] >= $remove_range['heure_debut']
                  && $time['heure_fin'] <= $remove_range['heure_fin']) {
                    unset($schedule[$date][$day_key]);
                    continue;
                }

                //split into 2 ranges
                if($time['heure_debut'] < $remove_range['heure_debut']) {

                    if($time['heure_fin'] > $remove_range['heure_fin']) {
                        $schedule[$date][] = array(
                            'heure_debut' => $remove_range['heure_fin'],
                            'heure_fin' => $time['heure_fin']
                        );
                    }

                    $change = true;
                    $time['heure_fin'] = $remove_range['heure_debut'];                     
                    continue;
                }

                if($time['heure_debut'] >= $remove_range['heure_debut']) {
                    $change = true;
                    $time['heure_debut'] = $remove_range['heure_fin'];
                }                
            }
        }
    }

    if($change) {    
       foreach($schedule as &$values) {
          usort($values,'compare_schedule');
       }
    }

    return $change;
}

function compare_schedule($a,$b) {
    return strtotime($a['heure_debut']) - strtotime($b['heure_debut']);
}

function removeFromSchedule(&$schedule,$remove) {

    foreach($remove as $k => &$v) {
        foreach($v as $k2 => &$v2) {
            $v2['heure_debut'] = substr($v2['heure_debut'],0,5);
            $v2['heure_fin'] = substr($v2['heure_fin'],0,5);
        }
    }

    while(removeSessionsFromScheduleHelper($schedule,$remove));    
}

removeFromSchedule($schedule,$remove);
print_r($schedule); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T23:45:06.780

我认为**jma127**的伪代码是正确的。让我用一些评论来补充他们的回答。

您的基本结构是遍历 的条目`$schedule`，然后为每个条目从 中拉出相应的条目`$remove`，并进行一些更改。一旦发生变化，你就会跳出循环，重新开始。您用来重新开始的控制结构是递归调用。当您重新开始时，您将再次循环浏览`$schedule`您已经检查过且不再需要更改的所有条目。

数组`$schedule`和数组`$remove`通过共享下标关联。对于给定的索引*i*，`$remove[i]`仅影响`$schedule[i]`而不影响其他部分。如果没有条目`$remove[i]`，则`$schedule[i]`不变。因此， **jma127**正确地重组循环以首先遍历 的条目`$remove`，并具有一个内部代码块来组合 和 的`$remove[i]`条目`$schedule[i]`。不需要递归。无需反复迭代`$schedule`。

我相信这是您的代码随着条目数量的增加而变慢的主要原因。

对于 和 中给定日期的条目，`$remove`组合`$schedule`它们的方式基于开始时间和结束时间。**jma127**正确地指出，如果您按时间对当天的条目进行排序（首先是开始时间，然后是结束时间），那么您可以一次通过两个数组，并最终得到正确的结果。无需递归或重复循环。

我相信这是您的代码变慢的次要原因。

关于您的代码，我注意到的另一件事是您经常将代码放在不受循环影响的循环中。将它放在循环之外会更有效。例如，您对`$remove`and的有效性检查`$schedule`：

```
if (is_array($schedule) && count($schedule) > 0 \
  && is_array($remove) && count($remove) > 0)... 
```

每次递归调用例程时都会重复。`$remove`您可以改为将此检查移至调用内部函数的外部函数，并且内部函数不需要`$schedule`再次检查：

```
function removeSessionsFromSchedule_outer($schedule, $remove) {

    if (   is_array($schedule) && count($schedule) > 0 
        && is_array($remove) && count($remove) > 0     ) {
        $schedule = removeSessionsFromSchedule($schedule, $remove);
    }

    return $schedule;
} 
```

相似地，

```
foreach ($dispo as $d) {
    if (isset($remove[$s])) {
        $abs = $remove[$s];
    } else
        $abs = null;
    // rest of loop....
}/*foreach*/ 
```

可以改写为：

```
if (isset($remove[$s])) {
    $abs = $remove[$s];
} else
     $abs = null;
foreach ($dispo as $d) {
    // rest of loop....
}/*foreach*/ 
```

另一个小的低效率是您的数据结构不包含您需要的格式的数据。而不是接收包含以下数据的结构：

```
[2012-11-14] => Array( [0] => Array(..."heure_debut" => 16:00 ...)) 
```

并且每次在循环期间，进行数据转换，如：

```
$abs_s = strtotime($a['heure_debut']); 
```

让上游调用者自己转换数据怎么样：

```
["2012-11-14"] => Array([0]=>Array(..."heure_debut"=>strtotime("16:00") ...)) 
```

另一个小细节是您使用类似`2012-11-14`and的语法`16:00`。PHP 将它们视为字符串，但如果您将它们放在引号中以明确它们是字符串，您的代码会更清晰。请参阅[*为什么 $foo[bar] 错误？*在 PHP 文档**数组**](http://www.php.net/manual/en/language.types.array.php)中。

我不会尝试重写您的代码来进行所有这些更改。我怀疑你可以自己弄清楚，看看我的评论和**jma127**的回答。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T00:24:30.223

您有一个可用性时间表，实现为日期和条目编号的二维数组，以及一个缺勤时间表，以相同的方式实现，都按时间排序，并希望首先使用第二个进行更新。

两个数组在其主要维度上的索引方式相同（使用日期），因此我们可以安全地处理这些行中的每一行，而不必担心修改其余数组。

## 对于给定的一天：

在一天之内，最简单的方法是遍历所有`$remove`条目，对于employee_id 上的每个匹配项，检查时间并相应地修改时间表（您已经实现了一些，因此我们可以重用其中的一些）。您希望按时间顺序保持日程安排。原始数组排序良好，如果我们在创建顺序时将修改存储在新数组中，之后就不必对其进行排序。

```
<?php

// create a schedule entry from template, with begin & end time
function schedule($tmpl, $beg, $end) {
    $schedule = $tmpl;
    $schedule['heure_debut'] = date("H:i", $beg);
    $schedule['heure_fin'] = date("H:i", $end);
    return $schedule;
}

// return one updated entry of a schedule day, based on an absence
function updateAvailability($d, $a){
    // absence start/end
    $dis_s = strtotime($d['heure_debut']);
    $dis_e = strtotime($d['heure_fin']);
    $abs_s = strtotime($a['heure_debut']);
    $abs_e = strtotime($a['heure_fin']);
    // Tests to see the if there is overlap between absence and availability
    // (2) [a_s]---[ds - de]---[a_e]
    if ($abs_s <= $dis_s && $abs_e >= $dis_e) {
        return array();
    }
    // (7)[as == ds] && [ae < de]
    else if ($abs_s == $dis_s && $abs_e < $dis_e) {
        return array(schedule($d,$abs_e,$dis_e));
    }
    // (1)[ds] --- [as] --- [ae] --- [de] (duplicate dis with new times)
    else if ($abs_s > $dis_s && $abs_e <= $dis_e) {
        // new times as : 
        // s1 = ds-as &&  s2 = ae-de
        return array(schedule($d,$dis_s,$abs_s), schedule($d,$abs_e,$dis_e));
    }
    // (3)[as] -- [ds] --- [ae] -- [de]
    else if ($abs_s < $dis_s && $abs_e < $dis_e) {
        return array(schedule($d,$abs_e,$dis_e));
    }
    // (4) [ds]---[as]--- [de]--- [ae]
    else if ($abs_s > $dis_s && $abs_s < $dis_e && $abs_e > $dis_e) {
        return array(schedule($d,$dis_s,$abs_s));
    }
    return array($d);
}

// move through all the entries of one day of schedule, and change
function updateDaySchedule($day, $absence){
    $n = array();
    foreach($day as $avail){
        // intersect availability with absence
        $a = updateAvailability($avail,$absence);
        // append new entries
        $n = array_merge($n, $a);
    }
    return $n;
}    

function removeSessionsFromSchedule($schedule, $remove) {
    if (!checkValidScheduleInput($schedule,$remove) 
        return $schedule;
    foreach($remove as $day => $absences) {
        // only update matching schedule day
        if (isset($schedule[$day])) {
            foreach ($absences as $abs)
                $schedule[$day] = updateDaySchedule($schedule[$day], $abs);
        }
    }
    return $schedule;
}

?> 
```

还有一些改进的空间：

*   中的`$dis_s`,`$dis_e`等值`updateAvailability`每次都重新计算，而有些可以计算一次，并作为参数传递给函数。不过，这可能不值得麻烦。

*   `'heure_debut'`等常量可以作为定义的常量：

    `define('HD','heure_debut');`

    这避免了可能的拼写错误（如果一个常量拼错了，php 会告诉你，但它不会告诉你字符串字面量），并且如果键名必须更改，则更容易重构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T17:59:15.923

函数的递归性质是你的问题，你的函数中没有其他东西需要太多的处理能力，所以这应该很快。您确实需要找到一种方法来进行此处理而无需递归。

# ruby - 我可以使用 Sequel 从将结果限制为单个表中的字段的复杂查询中检索对象吗？

> ID：13421035
> 
> 赞同：1
> 
> 时间：2012-11-16T16:57:15.037
> 
> 标签：ruby, sequel

我有一个模型，我总是想根据另一个关联模型中的值对其行进行排序，我认为实现这一点的方法是`set_dataset`在模型中使用。但是，这导致查询结果以哈希而不是对象的形式返回，因此在迭代数据集时不能使用该类中的任何方法。

我基本上有两个班

```
class SortFields < Sequel::Model(:sort_fields)
    set_primary_key :objectid
end

class Items < Sequel::Model(:items)
    set_primary_key :objectid
    one_to_one :sort_fields, :class => SortFields, :key => :objectid
end 
```

一些背景故事：数据从遗留系统导入 mysql。中的值`sort_fields`是根据一些复杂的规则从多个其他关联表（一些一对多，一些多对多）中计算出来的。可能的解决方案是将值添加`sort_fields`到`items`（我想将导入的数据与计算的数据分开，但我不必这样做）。不过，首先，我只想了解您可以使用数据集走多远，并且仍然可以获取对象而不是哈希。

如果我将数据集设置为`items`像这样对字段进行排序

```
class Items < Sequel::Model(:items)
    set_primary_key :objectid
    one_to_one :sort_fields, :class => SortFields, :key => :objectid
    set_dataset(order(:sortnumber))
end 
```

然后将预期的子句添加到生成的 SQL 中，例如：

```
>> Items.limit(1).sql
=> "SELECT * FROM `items` ORDER BY `sortnumber` LIMIT 1" 
```

并且查询仍然返回对象：

```
>> Items.limit(1).first.class
=> Items 
```

如果我按相关字段排序...

```
class Items < Sequel::Model(:items)
    set_primary_key :objectid
    one_to_one :sort_fields, :class => SortFields, :key => :objectid
    set_dataset(
        eager_graph(:sort_fields).
        order(:sort1, :sort2, :sort3)
    )
end 
```

...我得到哈希

```
?> Items.limit(1).first.class
=> Hash 
```

我的第一个想法是，发生这种情况是因为`sort_fields`结果中包含所有字段，也许如果只选择其中的字段，`items`我会`Items`再次获得对象：

```
class Items < Sequel::Model(:items)
    set_primary_key :objectid
    one_to_one :sort_fields, :class => SortFields, :key => :objectid
    set_dataset(
        eager_graph(:sort_fields).
        select(:items.*).
        order(:sort1, :sort2, :sort3)
    )
end 
```

生成的 SQL 是我所期望的：

```
>> Items.limit(1).sql
=> "SELECT `items`.* FROM `items` LEFT OUTER JOIN `sort_fields` ON (`sort_fields`.`objectid` = `items`.`objectid`) ORDER BY `sort1`, `sort2`, `sort3` LIMIT 1" 
```

它返回与版本相同的行，`set_dataset(order(:sortnumber))`但它仍然不起作用：

```
>> Items.limit(1).first.class
=> Hash 
```

在我将排序字段添加到`items`表中以便它们都可以在同一个模型中愉快地生活之前，有没有办法告诉 Sequel 在它想要返回哈希时返回对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:19:28.803

如果使用`#eager_graph`，则必须使用`#all`而不是`#each`检索结果才能处理图形（因为如果没有预先设置所有实例，您无法急切加载），或者使用`eager_each`插件（在内部进行`#each`调用`#all`）。

# php - 如何通过 SimpleXML 从未知节点获取节点名称

> ID：13421039
> 
> 赞同：1
> 
> 时间：2012-11-16T16:57:22.633
> 
> 标签：php, simplexml, nodename

例如，我的 xml 文件中有两种类型的节点：

```
 1) <book>
    2) <author> 
```

一个名为 $node 的变量指向特定的节点（未知类型）。如何访问此节点的名称？它必须是这样的：

```
 if($node->name()=="book")
    process_book($node);
    else
    process_author; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:00:29.427

`SimpleXMLElement`有一个[`getName()`](http://www.php.net/manual/en/simplexmlelement.getname.php)方法：

```
echo $node->getName(); 
```

**假设：** `$node`是一个 SimpleXMLElement 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:22:55.637

我可能遗漏了一些东西，但这是一个简单的解决方案。如果您使用文件，请 更改`simplexml_load_string`为。`simplexml_load_file`

```
$xml_string = <<<XML
<root>
    <item>
        <book>Book 1</book>
        <author>Author 1</author>
    </item>
    <item>
        <book>Book 2</book>
        <author>Author 2</author>
    </item>
    <item>
        <book>Book 3</book>
        <author>Author 3</author>
    </item>
</root>
XML;

$xml = simplexml_load_string($xml_string);

foreach($xml->item as $node){
    if(isset($node->book)){
        process_book($node);
    }
} 
```

# ios - 开始使用 Storyboards -iOS 后，应用程序委托不起作用

> ID：13421044
> 
> 赞同：0
> 
> 时间：2012-11-16T16:57:32.193
> 
> 标签：ios, storyboard, appdelegate

我的游戏有一个小问题。我想在游戏中断时停止游戏。

当我在使用 xib 文件时调用它时，我的`stopGame`方法正在工作。`applicationWillResignActive`当我将它更改为情节提要时，它停止工作..`applicationWillResignActive`仍然适用于情节提要并且我的`stopGame`方法被调用，但由于某种原因，我的游戏并没有停止..

有人遇到过这样的问题吗？并请可能的解决方案..提前谢谢..

一些代码

应用代表：

```
- (BOOL) application: (UIApplication *) application
didFinishLaunchingWithOptions: (NSDictionary *) launchOptions
{    
        mainViewController = [[MainViewController alloc] init];

        [self.window addSubview: mainViewController.view];
        [self.window makeKeyAndVisible];

        return YES;
}

- (void) applicationWillResignActive: (UIApplication *) application
{    
    [mainViewController stopGame];
} 
```

主视图控制器

```
- (IBAction) stopGame
{
        self.gameRunning = NO;
        [currentLevel deactivate];
} 
```

1级

```
- (void) deactivate
{
        [levelTimer invalidate];
        levelTimer = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:48:44.327

当您使用故事板时，应用程序的默认主入口点是故事板，从最初的 viewController（带有来自故事板左边距的箭头的那个）开始。在应用程序启动时，初始视图控制器未归档、初始化，并且其视图动态添加到主窗口。因此，您在 applicationDidFinishLaunching 中的代码正在分配**另一个**VC，这与应用程序加载的不同。由于这个原因，您将 stopGame 消息发送到错误的 VC。从 applicationDidFinishLaunching 和 applicationWillResignActive 中删除所有引用 mainViewController 的代码，然后在 applicationWillResignActive 中添加：

```
[(MainViewController *)self.window.rootViewController stopGame]; 
```

# e-commerce - 确认？> 使用这些文件的旧版 FoxPro crm 2 网络软件：silverware.exe、电梯.fxp

> ID：13421045
> 
> 赞同：0
> 
> 时间：2012-11-16T16:57:35.210
> 
> 标签：e-commerce, foxpro

我有一个客户，我正在考虑保持一定的距离。他们使用传统的基于 FoxPro 的 CRM（或类似）系统，该系统与电子商务系统连接，该系统提供包含以下内容的 url：

http://[DOMAIN]/scripts/silverware.exe/[USER]@D:/elevclients/[USRDIR]/ELEVATOR.FXP?[PARAMS]

有谁知道他们使用的是什么软件/解决方案提供商？它看起来大约是 15 到 18 岁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:05:45.897

它似乎来自[Silverware Business Solutions](http://silverw.com/crm.html)。

# sql-server - sql server 2008 - 没有外键的整数列

> ID：13421046
> 
> 赞同：0
> 
> 时间：2012-11-16T16:57:45.133
> 
> 标签：sql-server

继承了旧的 Sql 服务器数据库后，我想按表列出所有没有外键的整数列，因为有些会缺少 FK，有些只是整数列。任何人都可以建议查询来显示此信息吗？显然这里涉及到一些人为干预。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:10:29.353

您可以从 information_schema 中获取它。我会从这样的事情开始：

```
SELECT * from INFORMATION_SCHEMA.COLUMNS c
LEFT JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE k 
ON 
    c.TABLE_CATALOG = k.TABLE_CATALOG
    AND c.TABLE_SCHEMA = k.TABLE_SCHEMA
    AND c.TABLE_NAME = k.TABLE_NAME 
    AND c.COLUMN_NAME = k.COLUMN_NAME
WHERE c.DATA_TYPE in ('int') AND CONSTRAINT_NAME is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:18:38.983

这个使用 sql-server-only 视图：

```
select so.name as TableName, col.name as ColumnName
from 
    sys.objects so
        inner join sys.columns col on so.object_id = col.object_id and col.system_type_id in (48,52,56,127)
        left outer join sys.foreign_key_columns fkc on fkc.parent_object_id = so.object_id and fkc.parent_column_id = col.column_id
where 
    so.type='U'
    and fkc.constraint_column_id is null
order by so.name 
```

# javascript - 我可以从 javascript 调用 Linux 终端吗？

> ID：13421048
> 
> 赞同：-1
> 
> 时间：2012-11-16T16:57:53.823
> 
> 标签：javascript, linux, terminal

我知道javascript（客户端脚本）被限制使用系统资源！

我如何从 javascript 调用 Linux 终端？在执行 shell 之前询问用户确认是可以的。

有人有解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:07:59.003

从浏览器调用 Linux 终端是完全不可能的。

然而，有一个基于 Javascript 的 PC 模拟器可以运行 Linux

[http://bellard.org/jslinux/](http://bellard.org/jslinux/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:09:04.107

大号

唯一的方法是对将为您执行 linux 调用的服务器进行 ajax 调用。

# excel - 关闭第二个工作簿后激活第一个工作簿？

> ID：13421050
> 
> 赞同：3
> 
> 时间：2012-11-16T16:57:59.603
> 
> 标签：excel, vba

情况：

1.  打开工作簿 A。
2.  A 中的代码打开工作簿 B。

    *   B 现在是活动的 WB。
    *   B中的代码以`ThisWorkBook.Close`
3.  B 关闭，所以 A 出现。

问题是：在 WB B 关闭后，我无法让`Activate`WB A 中的任何事件自动触发。

但是，如果我手动关闭 WB B，使用鼠标“x”出 WB，或通过菜单，则 WB A 会触发`Activate`事件。

不知何故，使用 VBA 关闭 WB B 会阻止触发 WB A Activate 事件。

Excel 97 和 2003 中的结果相同

我错过了什么，还是有解决方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T17:23:07.230

在打开工作簿 B 之前，将工作簿 A 设置为定义的名称：

```
 Dim wb as workbook

 set wb = activeworkbook

 'run your code

 wb.Activate 
```

编辑：

将此放在您的子书的每个 workbook_close() 事件中：

```
 windows("A.xlsm").activate 
```

这将在您的一个子 wbs 关闭时激活您的主表（您可能需要添加一个检查 A.xlsm 是否打开，如果没有打开它或退出子）

# javascript - 如何使用 jquery 制作自定义选项卡？

> ID：13421052
> 
> 赞同：0
> 
> 时间：2012-11-16T16:58:13.697
> 
> 标签：javascript, jquery

我有以下 html，我想使用 jquery 制作简单的标签

```
<td style="border-color: black; border-style: solid; border-width: 1px 0 1px 1px;">
    <div id="cont-1-1">
        My first tab content
    </div>
    <div id="cont-2-1">
        My second tab content
    </div>
</td>
<td style="width: 30px">
    <div id="tab-box">
    <div style="height: 121px;"><img class="cont-1-1" src="/Images/Tab1.png" /></div>
    <div style="border-left: 1px solid Black;"><img class="cont-2-1" src="/Images/Tab2.png" /></div>
    <div style="border-left: 1px solid Black; height: 40px;"></div>
    </div>
</td>
</td> 
```

我的选项卡标题在哪里`Tab1.Png`以及是选项卡内容，我不想为此使用任何 jquery 插件，只需要在单击选项卡时进行一些简单的操作，隐藏和显示内容`Tab2.Png``div id :cont-1-1 and 2-1`

这就是我正在尝试的：

```
$(document).ready(function () {
                $('#tab-box').each(function () {
                    // For each set of tabs, we want to keep track of
                    // which tab is active and it's associated content
                    var $active, $content, $links = $(this).find('img');

                    // If the location.hash matches one of the links, use that as the active tab.
                    // If no match is found, use the first link as the initial active tab.
                    $active = $(Find First Tab from div);
                    $active.addClass('active');
                    $content = $($active.attr('class'));

                    // Hide the remaining content
                    $links.not($active).each(function () {
                        $($(this).attr('href')).hide();
                    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:10:07.500

最好的方法（仅使用 JavaScript/jQuery）是在 div（或 spans 等）中包装你的“选项卡”，然后将它们的所有 css 显示设置为无（默认的第一个选项卡除外）。然后在点击时，您可以根据需要隐藏/显示。

使它跨浏览器兼容需要一些额外的（仅几行），但我已经不止一次这样做了。

此示例假定 id 为 pic1 的元素是被“单击”的“选项卡”，并且还有 3 个其他选项卡（pic2、pic3 和 pic4）。根据您希望页面设置的方式（使用箭头，或通过单击突出的未突出显示的选项卡等）将这些命令放在您需要的每个 .click 函数中（分别隐藏和显示必要的页面）。

```
$(document).ready(function (){
$("#pic1").click(function (){
    $("#pic1").prop("hidden", false);
    $("#pic2").prop("hidden", true);
    $("#pic3").prop("hidden", true);
    $("#pic4").prop("hidden", true);
    $("#pic1").css("display", "inline");  //if using div, use display block instead
    $("#pic1").css("display", "normal");
    $("#pic2").css("display", "none");
    $("#pic3").css("display", "none");
    $("#pic4").css("display", "none");
});
}); 
```

我不确定为什么你必须如此冗余（同时使用“隐藏”和 .css("display", none) 并将显示设置为元素的正常显示和自然显示）等，但没有使用所有在这里，它要么在 IE 中不起作用，要么在 FireFox 中不起作用，或者两者兼而有之。

此外，您可能认为您可以使用显示“初始”而不是“内联”或“块”或任何默认显示用于重新显示的元素，但我自己永远无法让它以这种方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:15:41.857

[**使用jQueryUI 选项卡**](http://jqueryui.com/tabs/)怎么样[](http://jqueryui.com/tabs/)

 **如果你真的知道你正在开发的东西在未来不太可能改变并且永远不会那么复杂，那么你可以自己创建标签。

否则，为什么不使用提供您将来可能需要的可扩展性的坚如磐石的库。**

# django - 用户名已经存在，当想要在 django 中更新用户配置文件时

> ID：13421053
> 
> 赞同：0
> 
> 时间：2012-11-16T16:58:26.060
> 
> 标签：django

每当我尝试在 django 驱动的网络上更新用户配置文件时，我都会收到错误消息：“用户名已经存在，请提供另一个。” 我试图让它识别经过身份验证的用户。尽管其他一切都有效，但在我指定新用户名之前它不会更新。

视图.py

```
@login_required
def editprofile(request):
    registeredmember = request.user.get_profile()
    if request.method == 'POST':
        userprofile_edit = RegistrationForm(request.POST, instance = registeredmember)
        if userprofile_edit.is_valid():
            userprofile_edit.save()
            return HttpResponseRedirect('/profile/')
    else:
        userprofile_edit = RegistrationForm(instance = registeredmember)
    return render_to_response('carloan/editprofile.html', {'userprofile_edit': userprofile_edit}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:49:48.957

在编辑配置文件时，您必须排除用户名字段。

你的`RegistrationForm`.

```
class RegistrationForm(forms.form):
   #other code

   class Meta:
       exclude = ['username',] 
```

您可以添加多个您不想包含在表单中的字段名称

# probability - 计算婴儿是右撇子的概率

> ID：13421059
> 
> 赞同：0
> 
> 时间：2012-11-16T16:58:38.663
> 
> 标签：probability, probability-theory

一位医生说，仰卧时主要将头转向右侧的婴儿将是右撇子，相反，主要转向左侧的婴儿将是左撇子。婴儿艾莉主要把头转向左边。众所周知，90% 的人口是右撇子。

如果该方法的准确率为 90%，那么 Allie 是右撇子的概率是多少？使用布尔 rv TR 表示婴儿将头向右转，使用布尔 rv RH 表示婴儿是右撇子。

我的答案：P(RH | TR) = 0.9 和 P(not RH | not TR) = 0.9 P(RH) = 0.90 P(RH(Allie)) = P(RH | not TR) = 1 - P(not RH | 不是 TR) = 0.1

以上是正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T17:52:06.783

是的，这是正确的。实际上，这个任务被设计成一个陷阱。您可以放心地忽略有多少人口是左撇子，因为您知道该方法的准确性。

无论人口中的左撇子比例如何，这种方法的“准确性”都是均匀分布在人口中的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:26:52.273

我认为人口统计数据为您提供了 RH 的先验，该方法的准确性是可能性 p(TR | RH)。这种解释允许您利用所提供的所有信息——但它的措辞有点奇怪。我认为这是家庭作业：写下两个答案，解释为什么你有两个不同的结果。

# visual-studio-2010 - 如何为 VS 设置 Ogre 应用程序向导

> ID：13421061
> 
> 赞同：0
> 
> 时间：2012-11-16T16:58:48.127
> 
> 标签：visual-studio-2010, ogre

所以我正在尝试将 Ogre 与 Visual Studio 2010 集成以使用此程序[https://bitbucket.org/jacmoe/ogreappwizards/downloads](https://bitbucket.org/jacmoe/ogreappwizards/downloads)获取 Ogre 项目向导。我已经正确设置了我的食人魔目录的 OGRE_HOME 路径，并且示例项目工作正常。我还从上面的网站安装了 Ogre App Wizard，但 id 不起作用。我应该怎么办 ？

# python - 如何每分钟自动更新模型？

> ID：13421063
> 
> 赞同：0
> 
> 时间：2012-11-16T16:59:01.100
> 
> 标签：python, django

我正在构建一个股票跟踪应用程序，需要每分钟使用当前价格自动更新股票模型（从谷歌财经中提取）。我需要知道如何以更有效的方式做到这一点，因为有几千条记录，而我目前的方法非常缓慢且效率低下。

```
#models.py

class Stock(models.Model):
    ticker = models.CharField(max_length=200)
    current_price = models.DecimalField(max_digits=20, decimal_places=5) 
```

下面的脚本每分钟通过一个 crontab 运行

```
#script set to run on a crontab
from takestock.stock_getter import get_quotes
from takestock.models import Stock

class Command(BaseCommand):
    help = 'Gathers current stock prices from Google Finance using stock_getter script (imported) and updates all stocks in the database to reflect the current stock price.'

def get_stock_dict(self):
    all_stocks = Stock.objects.all()
    stock_names = []

    for single_stock in all_stocks:
        stock_names.append(str(single_stock.ticker))

    stock_values = get_quotes(stock_names) #a list of values which corresponds to the list of names
    stock_dict = dict(zip(stock_names, stock_values)) #stock tickers and stock values zipped into dict (see below)

    return stock_dict
        #stock_dict looks like: {'GOOG': '73.84', 'AAPL': '520.34'}

def handle(self, *args, **options):

    stock_dict = self.get_stock_dict()
    for ticker, value in stock_dict.items():
        stock_obj = Stock.objects.get(ticker=ticker)
        stock_obj.current_price = value
        stock_obj.save() 
```

这种方法有效，但速度很慢，我想它是数据库密集型的。有没有更好的方法可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:08:50.540

使用[`update`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#update)而不是您的获取/保存例程：

```
Stock.objects.filter(ticker=ticker).update(current_price=value) 
```

不要每次都获取所有的代码，特别是如果你的代码没有改变。获取它们一次，将它们缓存在一个快速的 k/v 存储中；但如果您必须获取它们，请使用*仅*[`only`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#only)获取股票代码而不是价格。

 *很可能，最慢的部分是从谷歌获取。由于您尚未发布该代码，因此很难提供任何其他提示。*

# c# - 如何制作可以包含编译时未定义的属性的自定义配置部分？

> ID：13421065
> 
> 赞同：2
> 
> 时间：2012-11-16T16:59:20.820
> 
> 标签：c#, configuration, configurationsection

请注意，这不是实际情况，而只是一个简化的示例。

假设我有一个 Log 类，然后 Sub 分类，我有一个文件日志和一个电子邮件日志。现在假设我想要一个配置部分，例如

```
 Logs>
     Log Type="file" fileName="log.txt" Verbosity="3"/>
     Log Type="email" emailAddress="email@server.com" Verbosity="1"/>
   /Logs> 
```

目前我有一个解决方案，将允许

```
 Logs>
     Log Type="file" Verbosity="3"/>
     Log Type="email" Verbosity="1"/>
   /Logs> 
```

但是，一旦我尝试添加 fileName 或 emailAddress*（这只是一个示例），我就会收到错误消息，因为基本日志类的配置部分不包含特定于子日志类型的 configurationProperties。有什么办法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:02:55.433

您可以重写[OnDeserializeUnrecognizedAttribute](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelement.ondeserializeunrecognizedattribute.aspx)方法并将值存储在某种属性包中。如果您查看 System 程序集中的 System.Diagnostics.ListenerElement 类，您会发现它就是这样做的；您需要获取框架源代码或为此使用反编译器。

# java - 如何使用 Java 创建格式良好的请求以使用 XML-RPC 在 Wordpress 上发布？

> ID：13421067
> 
> 赞同：2
> 
> 时间：2012-11-16T16:59:26.903
> 
> 标签：java, wordpress, xml-rpc, xmlrpcclient

我在 Internet 上找到了本指南，可在我的 Java 项目中使用 XML-RPC 在 Wordpress 上发布，例如，我希望在每次指定日期时在我的博客上显示一条消息。 [http://wordpress.rintcius.nl/post/look-how-this-wordpress-post-got-created-from-java](http://wordpress.rintcius.nl/post/look-how-this-wordpress-post-got-created-from-java)

现在，我已按照指南进行操作，并试图让它运行，但我还不明白我的帖子的参数究竟是如何工作的。例如使用我调用的方法 blogger.NewPost：

```
    公共整数帖子（字符串内容）抛出 XmlRpcException {
    对象 [] 参数 = 新对象 [] {
        blogInfo.getApiKey(),
        blogInfo.getBlogId(),
        blogInfo.getUserName(),
        blogInfo.getPassword(),
        内容，
        postType.booleanValue()
    };
    返回（整数）client.execute（POST_METHOD_NAME，params）；
    }

```

我的*“内容”*价值是：

```
    [title]看看这个 wordpress 帖子是如何从 java 创建的！[/title]"
        + "[类别]6[/类别]"
        + FileUtils.getContentsOfResource("rintcius/blog/post.txt");

```

（我使用“[”而不是“<”和“]”而不是由stackoverflow处理的“>”）

现在，我如何以这种 XML 方式使用所有参数？这里的参数：http: [//codex.wordpress.org/XML-RPC_MetaWeblog_API#metaWeblog.newPost](http://codex.wordpress.org/XML-RPC_MetaWeblog_API#metaWeblog.newPost)

而且，它的内容只是一个没有任何标签的“字符串”？

非常感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:21:57.963

仍然不知道为什么它会给我带来错误，但我认为它只是有点过时了。找到了其他完美运行的库 [http://code.google.com/p/wordpress-java/](http://code.google.com/p/wordpress-java/)

我建议所有人都使用它，因为另一个已经过时了 谢谢大家

# ios - 将坐标发送到 Web 服务器并根据这些坐标检索数据

> ID：13421075
> 
> 赞同：0
> 
> 时间：2012-11-16T16:59:56.857
> 
> 标签：ios, database, xcode, gps, core-location

目前我有一个基本上是城市指南的 iPhone 应用程序。它向用户展示他们周围的不同事物，并按距离顺序列出它们。

目前，该应用程序的数据位于在线 MySQL 数据库中，然后一个 php 脚本将该数据库的不同部分（例如银行）转换为 XML 文档，因此我有一个用于银行的 XML 文档，一个用于酒吧等的 XML 文档。每个 XML文档有自己的 URL。

然后我的 iPhone 应用从 URL 中读取 XML 文档，解析 XML 文档，然后使用 CoreLocation 计算 XML 文档中每个位置与用户之间的距离，然后将数据放入按距离排序的 TableViews 中，最接近的在前。（可能值得注意的是，数据库中的每条数据（酒吧、银行等）都附有坐标）。

这工作正常，当有多达几百个位置要解析和计算距离时，没有问题。但是，一旦您开始进入数千个，它开始需要很长时间。

基本上我想知道是否有人知道一种方法，而不是下载所有数据然后计算距离，我可以将手机 GPS 位置发送到服务器/数据库或其他任何东西，然后它返回最近的 20 个位置，然后我可以像以前一样解析和显示.

我知道这是一个很大的问题，我不是在寻找帮助我创造一切的人，我只需要知道如何做到这一点的方法。或者，如果有人做过类似的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:03:30.153

您已经在您的问题中定义了正确执行此操作的方法。您需要将用户的坐标传递到 Web 服务中。Web 服务或存储过程应实现将结果过滤到仅附近事物的逻辑。如果您需要建议的特定部分，请澄清。

您真的应该让数据库引擎在这里完成繁重的工作。在 mySQL 中，你会使用这样的东西：

```
SELECT ((ACOS(SIN($lat * PI() / 180) * SIN(lat * PI() / 180) + 
     COS($lat * PI() / 180) * COS(lat * PI() / 180) * COS(($lon - lon) * 
     PI() / 180)) * 180 / PI()) * 60 * 1.1515) AS distance 
FROM members 
HAVING distance<='10' ORDER BY distance ASC 
```

以下是带有参数的 JSON 获取请求的一些 AFNetworking 代码注意（这是最相关的代码片段，不会单独执行）：

```
NSString *latString = [NSString stringWithFormat:@"%f", lastLocation.coordinate.latitude];
    NSString *lonString = [NSString stringWithFormat:@"%f", lastLocation.coordinate.longitude];
    NSString *accString = [NSString stringWithFormat:@"%f", lastLocation.horizontalAccuracy];

    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:[defaults valueForKeyPath:@"sessionRP"] , @"sessionRP",  [defaults valueForKeyPath:@"partnerID"], @"pid", appointment.scheduleRowPointer, @"srp", latString, @"lat", lonString, @"long", status, @"stat", @"0", @"cached", accString, @"acc", nil];
    NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET" path:myPath parameters:params];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) { 
```

# uiview - 一个电话有效，但另一个电话无效（相同） w AssetLibrary / UIImage

> ID：13421076
> 
> 赞同：0
> 
> 时间：2012-11-16T16:59:58.913
> 
> 标签：uiview, alassetslibrary, custom-cell

在我的“newPlayerVC”中有一个 UIIMagePickerController，它将缩略图（在我将其调整为 100x100 像素之后）保存到 AssetLibrary，没有任何问题。

保存图像后，我直接再次调用 AssetLibrary 以获取刚刚保存的图像以显示用户（并检查它是否正常工作）。那个电话看起来像这样；

```
// Display new thumbnail via AssetLIbrary call
    __block UIImage *_image = nil;
    [assetLib assetForURL:(playerImageURL)
              resultBlock:^(ALAsset *asset) {
                  _image = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]];
                  NSLog(@"Got the asset thumbnail, %@",_image);
                  [playerImageButton setImage:_image forState:UIControlStateNormal];
              }

             failureBlock:^(NSError *error) {
                 NSLog(@"Asset (image) fetch failed because %@",error);
             }]; 
```

**到目前为止，它工作得很好。** 终端确认日志：“p.playerImage = assets-library://asset/asset.JPG?id=A79242D5-BC91-490B-BC37-0A9F529675EE&ext=JPG”和“获取资产缩略图，UIImage：0xcb5b8a0” - 所以我知道它正在从资产库中获取图像。

但是后来我尝试从我的“playerTableVC”中进行一个非常类似的调用，以将具有先前保存的图像的 tableview 填充到我的自定义单元格中的 UIView - 它只是不起作用（自定义单元格没问题并且可以使用静态图像）。我也没有从 Xcode 收到任何错误或警告。该代码在函数“- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath”中看起来像这样

```
// Set up Asset library
ALAssetsLibrary *assetLib = [[ALAssetsLibrary alloc]init];

__block UIImage *_image = nil;
[assetLib assetForURL:[NSURL URLWithString:p.playerImage]
          resultBlock:^(ALAsset *asset) {
              _image = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullResolutionImage]];
              NSLog(@"Got the asset thumbnail, %@", _image);
          }

 failureBlock:^(NSError *error) {
     NSLog(@"Asset fetch failed: %@",error);
 }];

// If no cell, create new
if (cell == nil) {
    cell = [[CellPlayer alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
}

// If cell present, assign values
NSLog(@"p.playerImage = %@", p.playerImage);  // Check = ok

// Check if imageurl is empty = default image else the user choosen image
if ([p.playerImage isEqualToString:@""]) {
    cell.cellPlayerIcon.image = [UIImage imageNamed:@"defaultImageFrame_114x114"];
    // Add sortingorder ("player position") to tableview
    cell.cellPlayerStarIcon.text = [NSString stringWithFormat:@"%i", (indexPath.row +1)];
} else {
    cell.cellPlayerIcon.image = _image;  // = NO IMAGE IN CELL?
    // Add sortingorder ("player position") to tableview
    cell.cellPlayerStarIcon.text = [NSString stringWithFormat:@"%i.", (indexPath.row +1)];
}

cell.cellPlayerName.text = p.playerName;
cell.cellPlayerTime.text = p.playerTime;
cell.cellPlayerTimestamp.text = [NSString stringWithFormat:@"%@", p.playerTimeStamp];  // @"2012-10-01 @ 8:06";

return cell; 
```

}

我相信我在填充上面的单元格时 UIIMage 的设置有问题。其他一切都可以正常工作，也可以使用静态 UIImage。尝试了很多这样的变体，相信我知道终于消失了“code-flind”...... ;-)

有任何解决方案、提示、指针等吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:14:17.133

**解决了！**

事实证明，该块没有保留上述“_image”变量中的图像。只需将“_image”传递给块内的局部变量（如 UIImage“myImage”）以保留它即可解决。现在它工作得很好，我的单元格按预期从资产库中获取图像:-)

# wysiwyg - 如何更改 PyroCMS 的默认编辑器选项？

> ID：13421078
> 
> 赞同：1
> 
> 时间：2012-11-16T17:00:10.940
> 
> 标签：wysiwyg, pyrocms

我不确定是否`TinyMCE`正在使用，但是否可以向文本编辑器添加其他选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T08:34:15.037

it is `CKEditor` and yes you can change the default configuration. Just go to admin panel and go to `settings`, there is an editor tab witch lets you edit the configuration.

# visual-c++ - 列表框 gettext 错误

> ID：13421082
> 
> 赞同：1
> 
> 时间：2012-11-16T17:00:35.030
> 
> 标签：visual-c++, mfc

我正在尝试将 alistbox 中的项目添加到 cstringarray。但文本始终为空。请建议更改

```
 int count = m_OutList.GetCount();

for ( i = 0; i <m_OutList.GetCount(); i++)
    {
        m_OutList.GetText( buf[i], text );
        m_selcomponents->Add(text);

//      getb  //Add();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:16:32.760

如果`text`在您的示例中是 CString，则需要编写`m_OutList.GetText(i,text)`- 如果您传递 CString&，则不需要缓冲区变量。`buf[i]`是缓冲区的一部分，具有随机值。

# ios - UINavigationController 推送和弹出后 UIScrollView 子跳转

> ID：13421084
> 
> 赞同：5
> 
> 时间：2012-11-16T17:00:42.843
> 
> 标签：ios, xcode, uiscrollview, interface-builder, xcode-storyboard

所以我`UIScrollView`在我的 iPad 应用程序上有一个带有单个子视图（它本身是所有控件的父级）。滚动一切正常。旋转效果很好（整个视图适合纵向，横向滚动）。一旦在 上推动一个新屏幕`UINavigationController`，然后回来打破它。

相对于滚动位置，滚动视图的子视图看起来好像向上移动了，但滚动视图仍保持在底部（整个子视图已向上移动）。

我已经尝试与`Constraints`故事板中的内容作斗争，实际上是几个小时，但无法找出可能导致这种情况的原因。

![它是如何开始的](../Images/4d45f33de9138cb56b0262b35b3ca2f8.png) ![导航和返回后的样子](../Images/318da0392f69affe4a9c4070defabc01.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T21:39:03.433

我在滚动视图和自动布局方面遇到了同样的问题（iOS 6 - 不工作，iOS 7 - 工作正常），当然这不是完美的解决方案，但似乎它可以工作。希望对您有所帮助：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self performSelector:@selector(content) withObject:nil afterDelay:0.0];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    offset = self.scrollView.contentOffset;
}

- (void)viewDidDisappear:(BOOL)animated
{
   [super viewDidDisappear:animated];

   self.scrollView.contentOffset = CGPointZero;
}

- (void)content
{
    [self.scrollView setContentOffset:offset animated:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T06:42:08.067

Get the frame of the subview before it disappears then manually reset the frame of the subview every time the view appears in -(void)viewWillAppear:(BOOL)animated.

```
-(void)viewWillDisappear:(BOOL)animated{
[super viewWillDisappear:animated];
globalFrameVariable = subview.frame;
[subview removeFromSuperview];
}

-(void)viewWillAppear:(BOOL)animated{
[super viewWillAppear:animated];
[subview setFrame:globalFrameVariable];
[scrollView addSubview:subview];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T03:22:20.357

这是我找到的一个简单的解决方案。（假设父视图是为了跨越整个 contentSize）使用 UIScrollView 的这个子类：

```
@interface BugFixScrollView : UIScrollView
@end
@implementation BugFixScrollView
-(void)layoutSubviews
{
    [super layoutSubviews];
    UIView *view=[self.subviews firstObject];
    if(view)
    {
        CGRect rect=view.frame;
        rect.origin=CGPointMake(0, 0);
        view.frame=rect;
    }
}
@end 
```

每次自动布局搞砸时，它都会简单地重置原点。这个类可以在InterfaceBuilder中使用，只需在放置UIScrollView后更改类名即可。

# linux - 关于计算 gvim 中的列数

> ID：13421085
> 
> 赞同：3
> 
> 时间：2012-11-16T17:00:44.760
> 
> 标签：linux, vim

在 gvim 中打开一个大的 csv 文件后，我怎么知道这个文件中有多少列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:35:14.800

csv.vim[插件](http://www.vim.org/scripts/script.php?script_id=2830)提供了很多处理 CSV 数据的功能。它包括一个`:NrColumns`命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T17:22:13.323

一个快速肮脏的黑客将是做类似的事情：

```
:s/,//gn 
```

这将为您提供单行上的逗号数。添加一个，您就有了列数（当然，假设没有尾随逗号）。

我说这既快又脏，因为它没有考虑可以包含逗号的引用列。我敢肯定，可能有一种方法可以通过正则表达式考虑到这一点，但这可能并非易事。

# ms-access - 集合更改变量类型，使用 Access 和 VBA

> ID：13421087
> 
> 赞同：1
> 
> 时间：2012-11-16T17:00:47.290
> 
> 标签：ms-access, collections, types, vba

我正在使用 Collection 来存储 Type 的变量，`SubForm`但是当我去检索对象时，它是 type `Controls`。有人能告诉我这是为什么吗？

```
For Each ctl In Me.controls
        Select Case ctl.ControlType
            Case acSubform
                Debug.Print "subform: " & TypeName(ctl)
                If (ctl.Name = "a" Or ctl.Name = "b") Then
                    frmCollection.Add (ctl)
                End If
        End Select
Next

For Each frm In frmCollection
    Debug.Print "Control: " & TypeName(frm)
Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:21:53.797

子窗体是一种控件。根据上下文，`TypeName()`似乎返回一般或特定类型，但我不明白它是如何做出选择的。

但是，您可能会发现`TypeOf`确定是否`frm`是子表单很有用。

```
For Each frm In frmCollection
    If TypeOf frm Is SubForm Then
        Debug.Print "Control is a subform"
    Else
        Debug.Print "Control is not a subform"
    End If
Next 
```

# windows-store-apps - 如何解决 Windows 8 商店应用程序中的本机图像生成器失败错误？

> ID：13421089
> 
> 赞同：0
> 
> 时间：2012-11-16T17:00:49.837
> 
> 标签：windows-store-apps

使用 WACK Kit 验证 windows 8 应用程序时，出现原生图像生成器失败错误。不知道怎么解决，哪位大神能说一下解决方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:05:09.347

以下是从 Microsoft 支持[自动生成本机映像](http://support.microsoft.com/kb/2716152)的一些已知问题。如果故障排除步骤不起作用，它还包括一种解决方法。

# meteor - 重新渲染列表模板导致页面滚动到顶部

> ID：13421090
> 
> 赞同：5
> 
> 时间：2012-11-16T17:00:54.527
> 
> 标签：meteor

我有一些看起来大致像这样的模板：

```
<template name="items">
  <div class="item-list">
    {{#each items}}
      {{> item}}
    {{/each}}
  <div>
  {{> loadMore}}
</template>

<template name="item">
  <div class="item" id="{{unique_string}}">
    <!-- stuff here -->
  </div>
</template>

<template name="loadMore">
  <a href="#">Load more...</a>
</template> 
```

使用相关的 javascript：

```
Template.items.items = function() {
  return Items.find({}, {limit: Session.get("itemCount")});
}

Template.loadMore.events({
  "click": function() {
    Session.set("itemCount", Session.get("itemCount") + 10);
  }
}) 
```

所有这些或多或少地给了我一些类似于无限滚动部分的东西。（实际的代码还有一些移动的部分，但这是重要的一点。）

但是，每当我单击 时`loadMore`，它都会拉下更多数据*并将*我滚动回页面顶部，从而违背了无限滚动的目的。我可以输入一些 javascript 来向下滚动到它应该在的位置，但是当页面快速跳跃时，会留下令人讨厌的闪烁。

我已经尝试`preserve`在整个列表以及每个项目上`div`使用以防止它们被更新，但这似乎并没有停止滚动。我也尝试过在`{{#isolate}}`任何东西周围放置积木，但没有任何运气。

我可以在这里做些什么来使页面在重新渲染时不滚动？以不同的方式编写模板？我错过的`preserve`或某些方面？`{{#isolate}}`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T15:33:14.967

页面滚动到顶部，因为您 `<a href="#">Load more...</a>`将使页面滚动到顶部。当您的 href 链接到“#”时，页面将滚动到带有 #“element id”的 DOM 元素。单击仅带有“#”的链接将滚动到顶部。

你有两个选择：

1.  防止点击事件的默认行为（简单选项）：

    ```
    Template.loadMore.events({
    "click": function(event) {
      event.preventDefault();
      Session.set("itemCount", Session.get("itemCount") + 10);
    }   }) 
    ```

    这将停止页面重新加载

2.  更好的是：创建`<a href="#">Load more...</a>`链接，`"#{{_id}}"`然后页面将自动滚动到具有您提供的 id 的元素。这将需要对模板进行一些重组，并且可能需要模板中的辅助方法来为您提供最后一项的 id。但这会使您的页面准确地加载到您想要的位置。

# wordpress - 带有 foreach 和 WP_Qurey 的 WordPress 术语循环作为嵌套循环问题

> ID：13421091
> 
> 赞同：0
> 
> 时间：2012-11-16T17:00:54.153
> 
> 标签：wordpress

我为常见问题解答和自定义分类法创建了一个自定义帖子类型来组织问答。

我还创建了一个单页模板，使用以下代码显示我的常见问题解答

```
$terms = get_terms(
    'faq_categories',
    array(
        'orderby'   =>  'name',
        'order'     =>  'ASC'
    )
);

foreach($terms as $term)
{
    ?>
    <h3><?php echo $term->name; ?></h3>
    <?php

    $q_args = array(
        'post_type'         =>  'faq',
        'tax_query'         =>  array(
            'taxonomy'  =>  'faq_categories',
            'field'     =>  'slug',
            'terms'     =>  $term->slug
        ),
        'posts_per_page'    =>  -1
    );

    wp_reset_postdata();
    wp_reset_query();

    $ans    =   new WP_Query($q_args);

    while($ans->have_posts())
    {
        $ans->the_post();

        ?>
        <h5><?php echo the_title(); ?></h5>
        <?php
    }
} 
```

我的问题是，当我得到问题标题时，这些问题没有按常见问题类别分组，并且在每个类别下，我都会重复获得所有可用的问题。

结果如下所示：

```
Sale [FAQ Category]
    How to buy? [FAQ Question]
    What is the cost? [FAQ Question]
    How can I contact you? [FAQ Question]
    What is your address? [FAQ Question]
Contacts [FAQ Category]
    How to buy? [FAQ Question]
    What is the cost? [FAQ Question]
    How can I contact you? [FAQ Question]
    What is your address? [FAQ Question] 
```

此外，我在 WP_Query 循环之前和之后尝试使用**wp_reset_postdate()**和**wp_reset_query()**，并且我也尝试将它们删除但没有运气。

关于如何解决该问题的任何想法？

亲切的问候梅里亚诺斯尼科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:45:15.147

tax_query 接受一个数组数组。

```
$q_args = array(
    'post_type'         =>  'faq',
    'tax_query'         =>  array(
        array(
            'taxonomy'  =>  'faq_categories',
            'field'     =>  'slug',
            'terms'     =>  $term->slug
        )
    ),
    'posts_per_page'    =>  -1
); 
```

或者重写你的查询，你真的不需要tax_query：

```
$ans = new WP_Query("post_type=faq&faq_categories=$term->slug&posts_per_page=-1"); 
```

# c# - MaskedEditValidator not working on client side

> ID：13421092
> 
> 赞同：1
> 
> 时间：2012-11-16T17:00:55.843
> 
> 标签：c#, asp.net, validation, maskededitextender

I am trying to enforce 15-minute granularity for time information entered by the user. So, for example, 12:15 PM and 3:45 am and 9:30 A.M. are all acceptable, but 2:35 PM would not be allowed. Server-side validation works, but it would be nice if the user was told their input was invalid when the text box loses focus, before they click the submit button. Here is the code:

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="True" UpdateMode="Always">
            <ContentTemplate>
                <asp:TextBox ID="txtStartTime" runat="server" AutoPostBack="True" CausesValidation="True"/>
                <Ajax:MaskedEditExtender ID="txtStartTime_MaskedEditExtender" runat="server" 
                    TargetControlID="txtStartTime" MaskType="Time" AcceptAMPM="True"
                    Mask="99:99">
                </Ajax:MaskedEditExtender>
                <asp:RequiredFieldValidator runat="server" ID="StartTimeRequired" 
                    ValidationGroup="EventAddEditControls" ControlToValidate="txtStartTime" 
                    EnableClientScript="True" SetFocusOnError="True">*</asp:RequiredFieldValidator>
                <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
                    ErrorMessage="Invalid time format." ControlToValidate="txtStartTime" 
                    ValidationGroup="EventAddEditControls" SetFocusOnError="True" 
                    EnableClientScript="True" Text="Invalid time format."
                    ValidationExpression="^([1-9]|0[1-9]|1[012]):(00|15|30|45)\s?[aApP]\.?[mM]\.?$" />
                <Ajax:MaskedEditValidator ID="MaskedEditValidator1" ControlToValidate="txtStartTime"
                    ControlExtender="txtStartTime_MaskedEditExtender" IsValidEmpty="False" 
                    ValidationGroup="EventAddEditControls" 
                    ValidationExpression="^([1-9]|0[1-9]|1[012]):(00|15|30|45)\s?[aApP]\.?[mM]\.?$" 
                    EnableClientScript="True" SetFocusOnError="True" Text="Time format is invalid."
                    runat="server"></Ajax:MaskedEditValidator>
            </ContentTemplate>
        </asp:UpdatePanel> 
```

How can I get the MaskedEditExtender to enforce the 15-minute granularity constraint on the client side also (assuming that this is possible)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:00:26.240

This seems overly simple, but it seems to work.

The first thing I did was to comment out the `RegularExpressionValidator` - you don't really need both this and the `MaskedEditValidator`. To prove the point, apply the fix below but don't comment out the `RegularExpressionValidator`. Upon a failed validation you will see both errors.

The last thing was to replace the `Text` property of the `MaskedEditValidator` with the `InvalidValueMessage` property:

```
<Ajax:MaskedEditValidator ID="MaskedEditValidator1" ControlToValidate="txtStartTime"
    ControlExtender="txtStartTime_MaskedEditExtender" IsValidEmpty="False" 
    ValidationGroup="EventAddEditControls" 
    ValidationExpression="^([1-9]|0[1-9]|1[012]):(00|15|30|45)\s?[aApP]\.?[mM]\.?$" 
    EnableClientScript="True" SetFocusOnError="True"
    InvalidValueMessage="Time format is invalid." runat="server">
</Ajax:MaskedEditValidator> 
```

[This example](http://asp-net-example.blogspot.co.nz/2009/11/ajax-maskededitvalidator-how-to-use.html) gave me the hint regarding the correct property to use.

Doing both of these things resulted in the validation occurring when tabbing out of the control. This also indicates that the `MaskedEditValidator` was validating all along.

# java - JComboBox 不能很好地与 GroupLayout 配合使用

> ID：13421094
> 
> 赞同：3
> 
> 时间：2012-11-16T17:00:59.603
> 
> 标签：java, swing, jcombobox

将`JComboBox`组件放入`GroupLayout`. 我已将代码简化为以下最小示例，其中包含一个`JComboBox`由`GroupLayout`.

观察到的行为如下：

*   当框架小于展开的组合框列表（带有虚拟条目 a、b、c）时，单击组合框上的小向下箭头会正确打开它。
*   当我将框架的大小调整为大于展开的组合框列表时，展开的组合框列表不会打开！

我已经发现了什么：

*   当 JComboBox 的父窗口太小时，javax.swing.PopupFactory 会创建一个 HEAVY_WEIGHT_POPUP 组件。
*   当父窗口足够大时，会创建一个 LIGHT_WEIGHT_POPUP。
*   该行为肯定与 GroupLayout 或它的一些副作用有关，因为我尝试过的任何其他布局管理器都可以正常工作。
*   在 GroupLayout 中使用 addGap() 时，问题发生了一些变化，即 JComboBox 未显示的窗口大小发生了变化。

这是示例代码 - 欢迎评论：

```
import java.awt.BorderLayout;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JRootPane;

public class DummyUI_cbdiagnosis extends javax.swing.JPanel {
    private javax.swing.JComboBox cbCategory;

    public DummyUI_cbdiagnosis() {
        initComponents();
    }

    private void initComponents() {
        cbCategory = new JComboBox();
        cbCategory.setModel(new javax.swing.DefaultComboBoxModel(new String[] {
                "a", "b", "c" }));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(
                javax.swing.GroupLayout.Alignment.LEADING).addGroup(
                layout.createSequentialGroup().addComponent(cbCategory,
                        javax.swing.GroupLayout.PREFERRED_SIZE,
                        javax.swing.GroupLayout.PREFERRED_SIZE,
                        javax.swing.GroupLayout.PREFERRED_SIZE)));
        layout.setVerticalGroup(layout.createParallelGroup(
                javax.swing.GroupLayout.Alignment.LEADING).addGroup(
                layout.createSequentialGroup().addComponent(cbCategory)
        ));
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JRootPane rootPane = frame.getRootPane();
        rootPane.setLayout(new BorderLayout());

        DummyUI_cbdiagnosis panel = new DummyUI_cbdiagnosis();
        rootPane.add(panel, BorderLayout.NORTH);

        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T17:06:38.350

永远不要将组件添加到`RootPane`自身，而是将它们添加到`contentPane`.

```
frame.add(panel); 
```

或者

```
frame.setContentPane(panel); 
```

A`RootPane`可以控制放置以下内容的位置：

*   菜单栏。
*   内容。
*   玻璃板。
*   最重要的是，轻量级弹出窗口（包括`JComboBox`）、对话框、拖放等。

`RootPane`使用名为 的特殊布局管理器`RootLayout`，不应更改为`BorderLayout`.

# html - 将网站图标添加到网站

> ID：13421096
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:01:05.967
> 
> 标签：html, favicon

我在我建立的网站上添加了一个图标，但问题是它没有出现在 Google Chrome 和 Safari 上。这就是我所做的：

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="shortcut icon" type="icon/icon" href= Jo.ico />
<title>My site</title>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:09:15.130

好吧，您还没有在 href 部分放置语音标记。而且，你应该给你的内容一个更独特的标识符，因为 text 和 html 是关键字，所以浏览器可能会假设性地误解它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:11:16.870

你为什么不试试这个：

```
<link href="Jo.ico" rel="icon" type="image/x-icon"> 
```

您的浏览器也可能正在缓存该图标。请确保您的浏览器缓存已正确清除。

此外，请确保图标的路径正确（“Jo.ico”假定图标与包含上述 HTML 行的文件位于同一目录中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:28:38.837

**方法一**

HTML 4.01：

```
<link rel="icon" type="image/png" href="favicon.png"> 
```

XHTM 1.0：

```
<link rel="icon" type="image/png" href="favicon.png" /> 
```

**方法二**

```
<link rel="shortcut icon" href="favicon.ico"> 
```

苹果设备：

```
<link rel="apple-touch-icon" href="apple-touch-icon.png"> 
```

**方法三**

```
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"> 
```

**方法4**（暂不支持）

HTML 5：

```
<link rel="icon" href="demo_icon.gif" type="image/gif" sizes="16x16" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:27:07.833

将您的图标保存到您网站的根文件夹，名称为：favicon.ico

# php - 从文件中获取 uniq 随机行并使用 php 将它们写入另一个文件

> ID：13421102
> 
> 赞同：2
> 
> 时间：2012-11-16T17:01:38.230
> 
> 标签：php, random, lines

我的文件由 10000 条不同的行组成。我需要从这个文件中取出 100 条随机 uniq 行并将它们写入另一个文件。使用php最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:05:05.917

一种*天真*的方式：

```
$lines = file('somefile.txt');
shuffle($lines);
$random_lines = array_slice($lines, 0, 10); 
```

**注意：**这完全忽略了系统资源的考虑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T17:44:37.177

更快的解决方案更大的生产线

```
function m1($file) {
    $fp = fopen($file, "r");
    $size = filesize($file);
    $list = array();
    $n = 0;
    while ( true ) {
        fseek($fp, mt_rand(0, $size));
        fgets($fp);
        $pos = ftell($fp);
        isset($list[$pos]) or $s = trim(fgets($fp)) and $list[$pos] = $s and $n ++;
        if ($n >= 100)
            break;
    }
    return $list;
}

function m2($file) {
    $lines = file($file);
    shuffle($lines);
    $list = array_slice($lines, 0, 100);
    return $list;
} 
```

具有公认解决方案的简单基准

10,000 行

```
Array
(
    [m1] => 0.013591051101685 <------ M1 Faster
    [m2] => 0.033689975738525
) 
```

10万行

```
Array
(
    [m1] => 0.014040946960449 <------ M1 Faster
    [m2] => 0.094476938247681
) 
```

[完整的基准代码](http://pastebin.com/TJK5urCb)

[使用的文件](http://bayfiles.com/file/s4M5/b52m3O/log.txt)

# php - 有人知道以下代码段的简短版本吗？

> ID：13421106
> 
> 赞同：2
> 
> 时间：2012-11-16T17:01:59.753
> 
> 标签：php, if-statement

```
if(isset($_GET['tag'])) { 
  define("NJ_THISCATSUB","tag: ".$_GET['tag']);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:04:31.810

可能有几种方法，其中没有一种是真正推荐的，而不是你所拥有的。

除了省略if假设***未定义***when未设置时，`{}`您无法通过将其打包到三元运算符（例如）中来真正缩短。坚持你所拥有的——它清晰易读、正确。`NJ_THISCATSUB`*`$_GET['tag']`*

 *```
// About as short as you're going to get:
// In other words, your method is fine and I don't recommend changing it.
if(isset($_GET['tag'])) define("NJ_THISCATSUB","tag: ".$_GET['tag']); 
```

### 三元示例：

但是，`NJ_THISCATSUB`在没有 的情况下被定义为 null 或空值`$_GET['tag']`，您可以使用三元：

```
// Define as NULL, absent $_GET['tag'] (not the same as what you have!)
define('NJ_THISCATSUB', isset($_GET['tag']) ? "tag: ".$_GET['tag'] : NULL); 
```

不过，这似乎不是您所追求的行为。

* * *

### 通过短路`&&`

`&&`您可以通过这种方式利用逻辑和逻辑，节省几个字符。如果左侧`&&`为真，则继续检查右侧，并且必须评估`define()`以执行此操作。如果左侧是`FALSE`，它将短路而不评估右侧。因此这有效：

```
isset($_GET['tag']) && define("NJ_THISCATSUB","tag: ".$_GET['tag']); 
```

*不过，上述内容在 PHP 中有点不合常规*（如果 PHP 中有约定），并且在 JavaScript 或 Ruby 等语言中更适用。`if ()`使用最初发布的更简单的代码，您更有可能遇到 PHP 代码。

```
// Simple console demonstration
// Define X if $x is set:
php > $x = 123;
php > isset($x) && define('X', $x);
php > echo X;
// 123

// Define Y if $y is set (it isn't)...
php > isset($y) && define('Y', $y);
php > echo Y;
PHP Notice:  Use of undefined constant Y - assumed 'Y' in php shell code on line 1

Notice: Use of undefined constant Y - assumed 'Y' in php shell code on line 1
// Oops, Y is not defined as a constant... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:09:05.327

如果您可以允许半填充常量：

```
define("NJ_THISCATSUB", @"tag: $_GET[tag]"); 
```

请注意，这仅在以后可能要调试缺少的输入参数时才有意义。随着`isset`它一去不复返，[`@()`](http://php.net/)您可以带回通知。

另请注意，仅在双引号字符串上下文中才允许缺少数组键引号。*

# sql - 如何知道 SQL Server 2008 中存储过程的最后更改日期？

> ID：13421107
> 
> 赞同：0
> 
> 时间：2012-11-16T17:02:05.247
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

如何知道 Sql Server 2008 中存储过程的最后更改日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:05:22.740

```
select modify_date
from sys.procedures
WHERE object_id = OBJECT_ID('dbo.YourProc') 
```

# c++ - 多态性

> ID：13421109
> 
> 赞同：-2
> 
> 时间：2012-11-16T17:02:11.000
> 
> 标签：c++, inheritance, polymorphism

假设有类 A 和继承 A 的类 B。使用 B 对象的正确方法是什么？我在“cplusplus.com”中看到他们以这种方式“使用”B 对象：

```
B b;
A* a=&b; 
```

使用类“A”指针和使用 b 有什么区别？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:09:04.073

他们这样做只是为了表明您*可以*，并且在您这样做时会调用多态性。

如果你只想使用你的`B b`，就使用它；不需要`A*`。

顺便说一句，从互联网教程中学习 C++ 类似于通过分析你在街上找到的一些口香糖来学习如何烹饪。更喜欢[一本合适的、经过同行评议的书](http://jcatki.no-ip.org/fncpp/Resources)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:09:30.627

当您拥有虚函数时，使用指向基类的指针的优势就来了。想象以下

```
class A {
    A(){}
    virtual ~A(){} // note virtual destructor
    virtual void func(){ cout << "A func" << endl; }
};

class B : public A {
    B(){}
    virtual ~B(){}
    virtual void func(){ cout << "B func" << endl; }
};

class C : public A {
    C(){}
    virtual ~C(){}
    virtual void func(){ cout << "C func" << endl; }
} 
```

现在，如果我们有一个指向基类的指针，我们可以调用`func()`它，并根据指针实际指向 a `A`、 a`B`还是 a来调用正确的函数`C`。例子：

```
A* p1 = new A;
A* p2 = new B;
A* p3 = new C;
p1->func();
p2->func();
p3->func(); 
```

将输出以下内容

```
A func
B func
C func 
```

现在你可能会说为什么不分别使用三个不同的指向 A、B 和 C 类型的指针，但是如果你想要一个指针数组呢？那么它们都需要是相同的类型，即`A*`. 这种类型的多态性对于将功能或精神相似但实现不同的事物分组很有用。

# sql - 等待存储过程等待其他存储过程执行

> ID：13421114
> 
> 赞同：2
> 
> 时间：2012-11-16T17:02:32.440
> 
> 标签：sql, sql-server-2008, stored-procedures

如何依次运行SQL Server存储过程？

我希望程序在执行下一个程序之前等待终止。

我正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T17:14:12.890

你的意思是像这里描述的那样吗？

[http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/00ab0007-e46f-4047-b758-e0ab1c56e84c](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/00ab0007-e46f-4047-b758-e0ab1c56e84c)

# c# - 在没有 linq C# 的情况下反序列化结构不佳的 XML

> ID：13421122
> 
> 赞同：0
> 
> 时间：2012-11-16T17:03:13.490
> 
> 标签：c#, xml, linq, serialization

我有一个结构很差的外部 xml 提要，所以我不确定如何直接反序列化它。

我不能在我的程序集中使用 System.IO.Linq，所以我知道的唯一解决方案不能使用。

这个xml的例子是

```
<body>
    <route>
        <stop tag="Info I need to get"/>
        <stop tag="Info I need to get"/>
        <path>
            <point tag="info I need to get"/>
            <point tag="info I need to get"/>
            <point tag="info I need to get"/>
        </path>
        <path>
            <point tag="info I need to get"/>
        </path>
        <path>
            <point tag="info I need to get"/>
            <point tag="info I need to get"/>
        </path>
    </route>
</body> 
```

如果我能以某种方式将所有路径点解析成一个数组，我就可以轻松地获取标签内的数据。

我所指的 linq 解决方案在[How to parse multiple single xml elements in .Net C#中提到](https://stackoverflow.com/questions/6166992/how-to-parse-multiple-single-xml-elements-in-net-c-sharp)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:16:14.480

您可以使用**XPath**选择具有`tag`属性的所有节点

```
XmlDocument doc = new XmlDocument();
doc.Load("myfile.xml");

foreach (XmlElement node in doc.SelectNodes("//*[@tag]"))
{
    Console.WriteLine(node.Name + ": " + node.GetAttribute("tag"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:09:09.383

你可以使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)吗？

您可能需要学习一些 XPath 才能很好地导航它，但这应该可以解决问题。

你也可以像这样简单地做一些事情：

```
XmlDocument doc = new XmlDocument();
doc.Load("myfile.xml");
foreach(XmlNode node in doc.SelectNodes("point"))
{
    var valueYouWant = node.Attributes["tag"].Value;
    // etc.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T17:09:08.903

我会推荐使用数组列表，因为我猜你现在不知道确切的节点数

```
ArrayList list = new ArrayList();
XmlDocument doc = new XmlDocument();
doc.Load("sample.xml");
XmlElement root = doc.DocumentElement;
XmlNodeList nodes = root.SelectNodes("point"); // You can also use XPath here
foreach (XmlNode node in nodes)
{
   list.Add(node);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:11:51.700

您可以使用 XmlSerializer ：

这是一个很好的例子：[Simple XmlSerializer example](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&sqi=2&ved=0CEcQFjAD&url=http://www.jonasjohn.de/snippets/csharp/xmlserializer-example.htm&ei=Z3SmUNWGIIuc9QS_zoHQCg&usg=AFQjCNHYn9JlJugrHHc3ZynSQuzVnqLQ9A&sig2=B0MECiVUDY-eogdBGwHsKQ)

这将允许您序列化对象以进行存储。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T17:21:52.923

另一种方法是使用 xml 阅读器[XML Reader MSDN](http://msdn.microsoft.com/en-us/library/cc189056%28v=vs.95%29.aspx)，您只需查找类型为**path**的元素并使用类似于[Reading Attributes的内容加载属性数据](http://msdn.microsoft.com/en-us/library/by2bd43b.aspx)

# linux - 直接从操作系统启动程序

> ID：13421124
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:03:16.257
> 
> 标签：linux, windows, operating-system, distro

我正在开发一个类似于 xbmc 但仅适用于电影的程序。我想知道是否有任何非常简单的操作系统基本上可以启动并运行我正在开发的程序？类似于 openelec 为 XBMC 所做的。我可以在 Windows 上运行它，但我希望能够将它放在像树莓派这样的机器上，而不必拥有整个 Windows 或 Linux 操作系统。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:05:42.327

看看专门用于嵌入式系统的相当苗条的 linux 发行版，如防火墙发行版等。

然后，如果它是一个图形应用程序，您必须确保启动到运行级别 5（图形）并将您的应用程序配置为默认用户的登录 shell。

* * *

您可能还对 openSUSE 项目提供的两项服务感兴趣：Open Build Service (OBS) 和 SUSE Studio：

*   OBS 允许您自动获取构建和打包的应用程序包，以便在许多广泛分布的发行版中使用。

*   Studio 允许您更进一步，为您自己的目的创建自定义发行版：您可以将其称为“您的”操作系统，为您的目的完全预配置，安装所有必需的软件和您自己的应用程序。之后您只需下载 CD 映像！

# sql - 将 SQL 转换为 LINQ 以进行同一个表查询

> ID：13421126
> 
> 赞同：1
> 
> 时间：2012-11-16T17:03:28.470
> 
> 标签：sql, linq, linq-to-sql, asp.net-mvc-4

我一直在尝试编写一个 linq 查询，但 groupby 的性能非常慢，所以我用 SQL 编写了我的查询，它真的很快，但我无法让 linq pad 为我将它转换为 linq。任何人都可以帮我将此sql转换为Linq吗：

```
(SELECT mm.rcount, * FROM
(SELECT m.TourID AS myId, COUNT(m.RecordType) AS rcount FROM
(
((SELECT *
FROM Bookings h
WHERE h.RecordType = 'H' AND h.TourArea like '%bull%')
union
(SELECT *
FROM Bookings t
WHERE t.RecordType = 'T' and t.TourGuideName like '%bull%'))
) m
group by m.TourID) mm
INNER JOIN Bookings b ON mm.myId= b.TourID
WHERE b.RecordType = 'H'); 
```

这是我的 LINQ 工作，但迭代 200 多条记录需要 20 秒：

```
 var heads = from head in db.GetTable<BookingType>()
                    where head.RecordType == "H" &&
                    head.TourArea.Contains("bull")
                    select g;

        var tgs = from tourguides in db.GetTable<BookingType>()
                  where tourguides.RecordType == "T" &&
                  tourguides.TourGuideName.Contains("bull")
                  select tourguides;

        var all = heads.Union(tgs);
        var groupedshit = from r in all
                          group r by r.BookingID into g
                          select g;

        return heads; 
```

**编辑1：** 这是我的数据库结构：

预订ID [PK] | 旅游ID | 记录类型 | 旅游区 | 导游姓名 | ALoadOfOtherFields

这是一些示例数据：

1 | 1 | H | 斗牛场 | 无效的

2 | 1 | T | 空 | 斗牛犬

3 | 2 | H | 斗牛场 | 无效的

4 | 2 | T | 空 | 斗牛犬

5 | 2 | T | 空 | 公牛邮票

只会有一个 H（头部）记录，但可能有许多 T（导游）记录。分组后，如果我在 .Contains('bull') 上使用 .Count() 选择一个新的（例如这个问题：[如何使用 LINQ to SQL 创建排名搜索结果？](https://stackoverflow.com/questions/4585995/how-to-use-linq-to-sql-to-create-ranked-search-results)），然后我可以获得排名搜索（即本练习的全部要点）。

**编辑 2：** 我在类本身中添加了搜索排名的属性，以避免将结果转换为键/值对的问题。我不知道这是否是最佳做法，但它有效。

```
 /// <summary>
    /// Search Ranking
    /// </summary>
    public int? SearchRank { get; set; } 
```

然后我直接使用 linq-to-sql 执行 SQL 查询：

```
 IEnumerable<BookingType> results = db.ExecuteQuery<BookingType>
        ("(SELECT  mm.rcount AS SearchRank, b.* FROM (SELECT m.TourID AS myId, COUNT(m.RecordType) AS rcount FROM (((SELECT * FROM Bookings h WHERE h.RecordType = 'H' AND h.TourArea like '%{0}%') union (SELECT * FROM Bookings t WHERE t.RecordType = 'T' and t.TourGuideName like '%{0}%')) ) m group by m.TourID) mm INNER JOIN Bookings b ON mm.myId= b.TourID WHERE b.RecordType = 'H')", "bull"); 
```

我现在可以添加任意数量的“AND”和“OR”，而无需 Linq-to-sql（它生成的查询长达 200 行！

排名搜索中提琴！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:14:23.100

你根本不必使用`union`。你可以使用`Where OR AND`这样的东西应该工作：

```
 var result=    from b in DB.GetTable<Booking>()
                where (b.recordType =="H" || b.recordType=="T") 
                       &&b.TourArea.Contains("bull")
                group b by b.Booking_Id into g
                select g; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:55:17.560

为什么要转换它？您可以只调用您已优化的 SQl。

# msbuild - 了解用于编译 Ansi C90 的 MsBuild 项目文件

> ID：13421131
> 
> 赞同：0
> 
> 时间：2012-11-16T17:03:37.740
> 
> 标签：msbuild, ansi, c89, project-files

下面主要想通过msbuild编译

```
#include <stdio.h>

int main (int argc, char *argv[])
{
    char Buffer[2000];
    printf("TEST");
    gets(Buffer);
} 
```

批处理文件调用 msbuild：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild main.vcxproj
pause 
```

msbuild 项目文件如下。

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Label="ProjectConfigurations">
    <ProjectConfiguration Include="Debug|Win32">
      <Configuration>Debug</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Release|Win32">
      <Configuration>Release</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
  </ItemGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
  <ItemGroup>
    <ClCompile Include="main.c" />
  </ItemGroup>
</Project> 
```

到目前为止，整个设置都有效，但我需要找到一个好的资源来帮助我了解有关 msproject 文件的更多信息。我想学习很多东西。我怎样才能：

*   摆脱“导入”选项并自己定义导入的零件
*   使用命令行参数编译一组文件...（ %param%.c %param%TEST.c ，...）
*   使用项目文件立即启动程序（%param%Test.exe）
*   编译多个目标，...发布，调试等
*   编译后复制：Subproject/release/%param%.obj -> c:\accurateVersion\%param%.obj
*   重建前清洁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:16:58.840

有一本很棒的书，里面有很多示例代码来完成你所说的一切。

[Microsoft® Build Engine 内部：使用 MSBuild 和 Team Foundation Build](http://www.microsoft.com/learning/en/us/book.aspx?id=12999&locale=en-us)

这是您如何调用 clean 然后调用构建目标并让它编译调试和发布配置的方法。C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild main.vcxproj /t:clean;build /p:Configuration=Debug;Release /p:platform=Win32

复制任务：

```
<ItemGroup>
    <MySourceFiles Include="c:\MySourceTree\**\*.*"/>
</ItemGroup>

<Target Name="CopyFiles">
    <Copy
        SourceFiles="@(MySourceFiles)"
        DestinationFiles="@(MySourceFiles->'c:\MyDestinationTree\%(RecursiveDir)%    (Filename)%(Extension)')"
 /> 
```

此链接可能会帮助您解决其他一些问题。

[演练：使用 MSBuild 创建 Visual C++ 项目](http://msdn.microsoft.com/en-us/library/dd293607.aspx)

# c++ - C++：如何将数据输出到多个 .dat 文件？

> ID：13421133
> 
> 赞同：1
> 
> 时间：2012-11-16T17:03:40.170
> 
> 标签：c++, c, gnuplot, string-building

我有一个正在研究的项目。我是 C++ 和一般编程的初学者。我已经编写了一个程序，可以生成随着时间的推移在连续空间上移动的相互作用粒子。我的程序输出的唯一内容是每个时间步长中每个粒子的 XY 坐标。

我想可视化我的发现，以了解我的粒子是否按照应有的方式移动。我的教授说我必须使用`gnuplot`. 由于我找不到将数据输出到一个文件中以便`gnuplot`识别它的方法，因此我想到了以下策略：

a) 对于每个时间步，生成一个 XY 坐标格式为“ `output_#.dat`”的文件。

b)`.png`为它们中的每一个生成一个文件`gnuplot`。

`.png`c) 用所有文件制作移动粒子的电影。

稍后我会担心 b 和 c，但到目前为止，我可以使用以下代码将所有数据输出到一个文件中：

```
 void main()
{
    int i = 0;
    int t = 0; // time
    int j = 0; 
    int ctr = 0;
    double sumX = 0;
    double sumY = 0;
    srand(time(NULL)); // give system time as seed to random generator

    Cell* particles[maxSize]; // create array of pointers of type Cell.

    for(i=0; i<maxSize; i++) 
    {
        particles[i] = new Cell(); // initialize in memory
        particles[i]->InitPos(); // give initial positions
    }

    FILE *newFile = fopen("output_00.dat","w"); // print initial positions
    for(i=0; i<maxSize; i++)
    {
        fprintf(newFile, "%f %3 ", particles[i]->getCurrX());
        fprintf(newFile, "%f %3 \n", particles[i]->getCurrY());
    }
    fclose(newFile);

    FILE *output = fopen("output_01.dat","w");
    for(t = 0; t < tMax; t++)
    {
        fprintf(output, "%d ", t);
        for(i=0; i<maxSize; i++) // for every cell
        {
            sumX = 0;
            sumY = 0;
            for(j=0; j<maxSize; j++) // for all surrounding cells
            {
                sumX += particles[i]->ForceX(particles[i], particles[j]);
                sumY += particles[i]->ForceY(particles[i], particles[j]);
            }
            particles[i]->setVelX(particles[i]->getPrevVelX() + (sumX)*dt); // update speed
            particles[i]->setVelY(particles[i]->getPrevVelY() + (sumY)*dt);
            particles[i]->setCurrX(particles[i]->getPrevX() + (particles[i]->getVelX())*dt); // update position
            particles[i]->setCurrY(particles[i]->getPrevY() + (particles[i]->getVelY())*dt);

            fprintf(output, " ");
            fprintf(output, "%f %3 ", particles[i]->getCurrX());
            fprintf(output, "%f %3 \n", particles[i]->getCurrY());
        }
    }
    fclose(output);
} 
```

这确实生成了 2 个文件，`output_00.dat`第`output01.dat`一个包含初始随机生成的位置，第二个包含我的所有结果。

我可以感觉到在嵌套`for`循环中，我正在更新 XY 坐标的速度和位置，我可以有一个`FILE*`将存储每个时间步的坐标，然后在增加时间之前关闭它。这样，我将不需要同时打开多个指针。至少这是我的直觉。

我不知道如何生成递增的文件名。我偶然发现了`ofstream`，但我不明白它是如何工作的......

我想我希望我的程序在这一点上做的是：

1) 使用基本名称和当前循环计数器值生成新文件名。

2）打开该文件。

3) 写出该时间步长的坐标。

4) 关闭文件。

5) 重复。

任何帮助将不胜感激。感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:17:16.507

使用 ofstream 代替 fopen 会更好地使用 C++ 标准库，而现在您正在使用 C 标准库调用，但是您现在所做的事情本身并没有*错。*

**看起来您真正的核心问题是如何从整数生成文件名，以便您可以在循环中使用它：**

这是一种方法：

```
// Include these somewhere
#include <string>
#include <sstream>

// Define this function
std::string make_output_filename(size_t index) {
   std::ostringstream ss;
   ss << "output_" << index << ".dat";
   return ss.str();
}

// Use that function with fopen in this way:
for (size_t output_file_number=0; /* rest of your for loop stuff */)  {
  FILE *file = fopen(make_output_filename(output_file_number).c_str(), "w");
  /* use the file */
  fclose(file);
} 
```

这使用 std::ostringstream" 使用流操作构建文件名，并返回构建的 std::string。当你将它传递给 fopen 时，你必须给它一个 const char * 而不是 std::string，所以我们使用仅为此目的而存在的 .c_str() 成员。

# java - 如何在 android 上构建路线图应用程序？

> ID：13421136
> 
> 赞同：2
> 
> 时间：2012-11-16T17:03:45.993
> 
> 标签：java, android, map, graph-algorithm, path-finding

我想建立一个在 android 上离线工作的路线图。我可以找到从 A 到 B 的最短路径。我以前没有使用过地图。我应该从哪里开始？我正计划使用一些算法（如`A*`. 知道如何在 Android 上做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:32:24.120

离线地图库的建议

1.  最受欢迎的[Osmdroid](http://code.google.com/p/osmdroid/)。 [教程](http://www.haakseth.com/?p=30)
2.  [地图锻造](http://code.google.com/p/mapsforge/)。[所以问题](https://stackoverflow.com/q/9645235/1050058)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:41:25.983

有几个开源导航软件：像[navit](http://www.navit-project.org/)和[osmand](http://osmand.net/)。但许可证相当严格和其他限制。graphhopper[获得](http://graphhopper.com)Apache 许可并在服务器+桌面+Android 上工作。免责声明：我是作者，这是一个年轻的项目。

如果您真的想推出自己的系统，我不会推荐数据库。使用简单数组并通过数组索引访问节点。如果图形太大而无法放入可用 RAM，内存映射文件也可能会有所帮助。

# linux - Case 语句在我的 shell 脚本中不起作用

> ID：13421137
> 
> 赞同：0
> 
> 时间：2012-11-16T17:03:50.493
> 
> 标签：linux, macos, shell, switch-statement

我正在尝试为 Mac OSX Mountain Lion (10.8.2) 编写一个 shell 脚本。但是，无论我尝试什么，我都无法让 switch 语句工作。他是脚本的一个非常简化的版本：

```
#!/bin/bash

while getopts "ei" opt; do
  case $opt in
    e)
      echo "Got option e"
      ;;
    i)
      echo "Got option i"
      ;;
    \?)
      echo "Invalid option: -$opt"
      ;;
  esac
done 
```

无论我尝试什么，我都没有得到任何输出。有任何想法吗？我过去做过这样的脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:09:07.633

您可能错误地传递了选项，不要忘记`-`

```
script.sh -e 
```

请注意，您还应该在无效选项后退出：

```
\?)
  echo "Invalid option: -$opt"
  exit 1
  ;; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:06:18.433

尝试更换

```
\?)
  echo "Invalid option: -$opt"
  ;; 
```

和：

```
*)
  echo "Invalid option: -$opt"
  ;; 
```

# git - 使用 git 在远程主机 AWS 上删除的文件夹

> ID：13421138
> 
> 赞同：1
> 
> 时间：2012-11-16T17:03:51.467
> 
> 标签：git, github, amazon-web-services

我正在使用 git 将我的本地文件上传到亚马逊网络服务，我遇到了这个问题：

我在 gitinore 文件中添加了一个文件夹（图像/成员），但是当我执行 git push 时，它在 AWS 上被删除。我只想忽略 images/members 文件夹下的任何文件和子文件夹，因为应用程序会在其下创建动态文件夹。

我做的步骤：

1) 在位于 web 根目录的 .gitignore 文件中添加以下行：

**图片/会员/**

2) 混帐初始化

3) 混帐添加。

4) git commit -m "test"

5) git aws.push

我的所有更改都已发布，但文件夹**成员**但是当我的应用程序中的成员在图像/成员下创建一个文件夹时，当我执行另一个 git aws.push 时它会被删除。我只想忽略文件夹而不是删除它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:12:33.003

如果 git 已经在跟踪这些文件，那么您将不得不将`git rm`它们添加回来。

有可能另一个 .gitignore - 全局或该目录中的设置覆盖设置，请参阅手册页条目以获取优先级：

```
order of precedence, from highest to lowest (within one level of precedence, the last matching pattern decides the outcome): Patterns read from the command line for those commands that support them.

   o   Patterns read from a .gitignore file in the same directory as the path, or in any
       parent directory, with patterns in the higher level files (up to the toplevel of the
       work tree) being overridden by those in lower level files down to the directory
       containing the file. These patterns match relative to the location of the .gitignore
       file. A project normally includes such .gitignore files in its repository, containing
       patterns for files generated as part of the project build.

   o   Patterns read from $GIT_DIR/info/exclude.

   o   Patterns read from the file specified by the configuration variable core.excludesfile 
```

# java - 有没有办法从 Eclipse 的显示视图访问私有方法和变量？

> ID：13421139
> 
> 赞同：0
> 
> 时间：2012-11-16T17:03:51.683
> 
> 标签：java, eclipse, debugging, runtime

是否有设置允许`private/protected`从 Eclipse 的显示视图访问具有访问修饰符和变量的方法？由于您可以从 Detail 内部访问它们，`Formatter`因此 Eclipse 似乎确实可以在运行时访问它们？

注意我无法在一个简单的示例中重新创建它。当我可以清楚地重现问题时，我会更新。

# r - ggplot geom_bar：堆栈和中心

> ID：13421141
> 
> 赞同：6
> 
> 时间：2012-11-16T17:04:01.680
> 
> 标签：r, ggplot2, bar-chart

我有一个数据框，其中包含百分比份额，代表不同项目的列，行代表不同类别回答的受访者的各自份额。我想制作一个堆叠的条形图。

```
library(ggplot2)
library(reshape2)
 test<-data.frame(i1=c(16,40,26,18),
               i2=c(17,46,27,10),
               i3=c(23,43,24,10),
               i4=c(19,25,20,36))
 rownames(test)<-c("very i.","i.","less i.","not i.")

test.m<-melt(test)

ggplot(test.m, aes(x=variable, y=value, fill=value)) + 
   geom_bar(position="stack", stat="identity") 
```

看起来不错，但我想要
a) 居中条形：肯定答案（非常 i. 和 i.）向上和底部两个类（更少 i.而不是 i.）向下。
b) 每个类别（非常 i，i，less i，not i，）具有相同的颜色。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T20:02:11.053

最好使用类别名称而不是行名称作为分隔符：

```
test$category <- factor(c(3,4,2,1), labels=c("very i.","i.","less i.","not i.")) 
```

（因子水平的排序是根据堆积条形图（最低：`not i.`，最高：`very i.`）完成的。

```
test.m <- melt(test) 
```

要回答您的问题：

1.  如果某些值高于而其他值低于零，则堆叠条形图效果不佳。因此，创建了两个单独的条形图（一个具有负值，一个具有正值）。
2.  新列`category`用于`fill`将每个类别映射到不同颜色的参数。

完整代码：

```
ggplot(test.m, aes(x=variable, fill=category)) + 
      geom_bar(data = subset(test.m, category %in% c("less i.","not i.")),
               aes(y = -value), position="stack", stat="identity") +
      geom_bar(data = subset(test.m, !category %in% c("less i.","not i.")), 
               aes(y = value), position="stack", stat="identity") 
```

![在此处输入图像描述](../Images/79576d7618c572bd5c2ef6d3ed44972a.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-04T15:58:45.940

另一个专门为此目的设计的工具是`likert()`在 HH 包中。这个甜蜜的函数绘制了适合李克特、语义差异和评级量表数据的发散堆积条形图。

```
library(HH)
# note use of t(test)[,4:1] to transpose and mirror dataframe for easy plotting
# test dataframe is otherwise unaltered from OP's question

likert(t(test)[,4:1], horizontal = FALSE,
       main = NULL, # or give "title",
       xlab = "Percent", # becomes ylab due to horizontal arg
       auto.key = list(space = "right", columns = 1,
                     reverse = TRUE)) 
```

![在此处输入图像描述](../Images/7d21ac4d9f59382c0867d93badf638ac.png)

一个特别吸引人的功能`likert()`是能够以 ReferenceZero 参数为中心的中性响应。（注意它如何为参考响应使用适当的灰色）：

```
likert(t(test)[,4:1], horizontal=FALSE,
       main = NULL, # or give "title",
       xlab = "Percent", # becomes ylab due to horizontal arg
       ReferenceZero = 3,
       auto.key=list(space = "right", columns = 1,
                     reverse = TRUE)) 
```

![以一个响应为中心的李克特数据](../Images/38b7a402687d7f0427e0c4a995cdc3ca.png)

（这些示例使用垂直条很常见，但`horizontal=TRUE`通常更好，尤其是如果想要包含问题或比例名称。）

# android - 在 Android 中从 SQLite 数据库创建嵌套数组

> ID：13421146
> 
> 赞同：0
> 
> 时间：2012-11-16T17:04:26.040
> 
> 标签：android, sqlite

我正在 Android 中创建一个简单的多项选择琐事游戏，其中用户有三个选择。正确答案选项直接从数据库中提取，另外两个错误选项使用方法随机选择。我将正确和 2 个错误的答案放在一个数组中，然后对数组进行洗牌。当在随机选择方法中我只从行中抓取一列时，游戏运行良好。现在我想从每个随机行中抓取 3 列。那么我的问题是如何编写“获取两个随机三列的行并将生成的数组放入一个可以洗牌的数组”的代码。这是我的工作代码：

```
 DBAdapter:
// ---Grabs 2 RANDOM ---
public String[] getRandomHA() {
    Cursor cursor = this.db.query(
            "hdtable Order BY RANDOM() LIMIT 2",
            new String[] { KEY_HA }, null, null, null, null, null);

    if (cursor != null) {
        int i = 0;
        String colStrings[] = new String[cursor.getCount()];
        while (cursor.moveToNext())
        {
            colStrings[i] = cursor.getString(0);
            i++;
            //cursor.close();
           }
        return colStrings;
        }
    return null;
    }

// --- END Grabs 2 RANDOM ---

Main Activity:
// --- Random 2 answers ----
public void getRandom() {
    dba.open();
    String[] wrong2 = dba.getRandomHA();
    dba.close();
}

shuffle an Array:
    // --- shuffle array ----       

    String[] numbArray = { rightAnswer[2], wrong2[0], wrong2[1] };
    List<String> aList = new ArrayList<String>();
    for (String s : numbArray)
        aList.add(s);
    Collections.shuffle(aList);
    TextView[] tVs = { optionA_TV, optionB_TV, optionC_TV };
    for (int i = 0; i < tVs.length; i++) {
        tVs[i].setText(aList.get(i));
    }
    // --- END shuffle array ---- 
```

那么这就是我编写数据库适配器方法的方式吗？

```
 // ---Grabs 2 RANDOM ---
public String[] getRandomHA() {
    Cursor cursor = this.db.query(
            "hdtable Order BY RANDOM() LIMIT 2",
            new String[] { KEY_Y, KEY_MD, KEY_HA }, null, null, null, null,         null);

    if (cursor != null) {
        int i = 0;
        String colStrings[] = new String[cursor.getCount()];
        while (cursor.moveToNext())
        {
            colStrings[i] = cursor.getString(0);
            colStrings[i] = cursor.getString(1);
            colStrings[i] = cursor.getString(2);
            i++;
            //cursor.close();
           }
        return colStrings;
        }
    return null;
    }

// --- END Grabs 2 RANDOM --- 
```

如果上述方法是正确的，那么我将如何编写主要活动方法来反映嵌套数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:12:25.910

我首先想到的是使用[java.util.Random](http://docs.oracle.com/javase/7/docs/api/index.html)类的一个实例来调用其中一个`nextXXX()`方法来生成一个随机数。使用该数字从数据库中选择一行作为您的随机错误答案。

# sqlite - 为设备选择嵌入式 Linux

> ID：13421147
> 
> 赞同：1
> 
> 时间：2012-11-16T17:04:29.557
> 
> 标签：sqlite, qt, embedded-linux

我开始使用 sqlite 为手持设备创建 QT 应用程序。我的项目经理要求我为设备选择一个操作系统（嵌入式 linux）（我们不考虑 android）。

与桌面一样，是否有许多用于设备的嵌入式 Linux 发行版？如果是这样，我应该考虑哪个嵌入式 linux？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-27T14:51:52.063

你有多种选择，但我会建议更容易和 - 在我看来 - 更好的两个。

*   **[Buildroot](http://buildroot.uclibc.org/)** - 是一组生成文件，可让您创建自定义嵌入式分发。也可以负责构建 Linux 内核、工具链和裸机或 U-Boot 引导加载程序。易于扩展，学习曲线几乎为零。您在几个小时内就拥有了一个完整的工作系统。
*   **[Yocto](https://www.yoctoproject.org/)** - 一个成熟（且复杂）的构建系统。当您需要大量软件包/组件并且可能需要灵活地直接在本地扩展系统时，建议通过 Buildroot。你能做什么基本上取决于可用的“层”（构建事物的规则集）：你将层组合在一起以获得你的系统。具有陡峭的学习曲线，但被多个供应商（例如：Atmel、TI）使用和直接支持。

无论如何，除非您有充分的理由，否则我强烈建议前者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:10:23.480

有几个 Linux 发行版可与 ARM 一起使用。也许你应该考虑 Fedora ARM [https://fedoraproject.org/wiki/Architectures/ARM](https://fedoraproject.org/wiki/Architectures/ARM)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:03:45.423

如果不了解更多有关项目需求（不仅是软件需求，还包括非功能性需求）和平台功能，这是一个很难回答的问题。

[Angstrom](http://www.angstrom-distribution.org)（基于 OpenEmbedded）是 Linux 的另一种可能性。

我会挑战操作系统必须是 Linux 的假设。为什么？如果上市时间或商业支持很重要，您最好使用商业嵌入式或 RT 操作系统，例如[VxWorks](http://www.windriver.com/products/vxworks/)或[QNX](http://www.qnx.org.uk)。

还有专业支持的 Linux 发行版，例如[Montavista](http://www.mvista.com)

虽然免费的 linux 发行版是免费的，但您通常是靠自己的，您的团队的时间不是免费的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-02T06:51:56.033

您可以将 Qt 用于嵌入式设备，它速度快且与许多硬件兼容，如果您的硬件不受支持，将其移植到新硬件并不难，而且它具有特殊的渲染系统

# sql-server - Left Outer Join 添加额外行，逗号分隔列的解决方法？

> ID：13421151
> 
> 赞同：1
> 
> 时间：2012-11-16T17:04:50.677
> 
> 标签：sql-server, left-join

我对 SQL 很陌生，但热衷于学习（使用 SQL 服务器）。

我的数据表有：

[关键字] 、 [来源] 、 [访问次数] 列

关键字列具有重复值。

[关键字] 中的值示例

```
google

google analytics

how to use google analytics

bing

bing vs google 
```

我的 KeywordDefinition 表有：

```
[Keyword Branded ID]     [Keyword Branded Group]

google                 branded google
bing                   branded bing 
```

关键字列只有唯一值，所以这将是关键。

我正在使用 LEFT OUTER JOIN 将 [Keyword Branded Group] 插入到我的数据表中，该表实际上根据每个关键字是否匹配 google 或 bing 为每个关键字分配一个标签。

```
SELECT 

ISNULL(c1.[Keyword Branded Group],'Other Branded') AS [Keyword Branded Group],
a.*

FROM [mychoice-data-b9BwZvd] a

LEFT OUTER JOIN [mychoice-keyworddims] c1 ON a.[Keyword] LIKE '%'+ c1.[Keyword Branded ID] +'%' 
```

但是，我的问题是，基于“bing vs google”同时匹配 Google 和 Bing 的事实，这会导致额外的行。无论如何，这是我的理解。

有人建议我可以保留 Data 表中的原始行数，并将新列 [Keyword Branded Group] 作为逗号分隔值 'Branded Google, Branded Bing' 而不是以更多行结束。

可悲的是，他们没有说更多，我不知道要查找哪些 SQL 命令！任何人都可以帮忙吗？我只需要有人指出我正确的方向！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:23:35.110

我能想到的最好的方法是将外部连接移动到 UDF 中。首先创建一个函数

```
CREATE FUNCTION dbo.GetAllKeywords (@Keyword varchar(max)) RETURNS varchar(max)
AS BEGIN
    DECLARE @return varchar(max)
    SET @return = ''

    SELECT @return = @return + ',' + [Keyword Branded Group]
    FROM KeywordDefinition
    WHERE @Keyword LIKE '%'+ [Keyword Branded ID] +'%'

    IF (LEN(@return) > 2)
        RETURN substring(@return, 2, len(@return) - 2)
    ELSE
        RETURN 'Other Branded'
END 
```

然后您可以将 UDF 作为子查询放入：

```
SELECT dbo.GetAllKeywords(a.Keyword), a.*
FROM [mychoice-data-b9BwZvd] a 
```

# numpy - 两台计算机上相同numpy均值计算的不同结果

> ID：13421159
> 
> 赞同：5
> 
> 时间：2012-11-16T17:05:15.273
> 
> 标签：numpy, python-2.7

我有两台计算机，python 2.7.2（win32 上的 MSC v.1500 32 位（Intel）]）和 numpy 1.6.1。但

```
numpy.mean(data) 
```

返回

```
1.13595094681 on my old computer 
```

和

```
1.13595104218 on my new computer 
```

在哪里

```
Data = [ 0.20227873 -0.02738848  0.59413314  0.88547146  1.26513398  1.21090782
1.62445402  1.80423951  1.58545554  1.26801944  1.22551131  1.16882968
1.19972098  1.41940248  1.75620842  1.28139281  0.91190684  0.83705413
1.19861531  1.30767155] 
```

在这两种情况下

```
s=0
for n in data[:20]:
  s+=n
print s/20 
```

给

```
1.1359509334 
```

谁能解释为什么以及如何避免？

麦兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:19:19.520

如果您想避免两者之间的任何差异，请明确将它们设为 32 位或 64 位浮点数组。NumPy 使用其他几个可能是 32 位或 64 位的库。请注意，您的打印语句中也可能发生舍入：

```
>>> import numpy as np
>>> a = [0.20227873, -0.02738848,  0.59413314,  0.88547146,  1.26513398,
         1.21090782, 1.62445402,  1.80423951,  1.58545554,  1.26801944,
         1.22551131,  1.16882968, 1.19972098,  1.41940248,  1.75620842,
         1.28139281,  0.91190684,  0.83705413, 1.19861531,  1.30767155]
>>> x32 = np.array(a, np.float32)
>>> x64 = np.array(a, np.float64)
>>> x32.mean()
1.135951042175293
>>> x64.mean()
1.1359509335
>>> print x32.mean()
1.13595104218
>>> print x64.mean()
1.1359509335 
```

需要注意的另一点是，如果您有多线程的较低级别的库（例如，atlas、lapack），那么对于大型数组，由于可能的操作顺序和浮点精度的可变，您的结果可能会有所不同.

此外，您处于 32 位数字的精度极限：

```
>>> x32.sum()
22.719021
>>> np.array(sorted(x32)).sum()
22.719019 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:40:34.503

This is happening because you have `Float32` arrays (single precision). With single precision, the operations are only accurate to 6 decimal place. Hence your results are the same up to the 6th decimal place (after the decimal point, rounding the last digit), but they are not accurate after that. Different architectures/machines/compilers will yield the different results after that. If you want the same results you should use higher precision arrays (e.g. `Float64`).

# selenium-rc - 在浏览器最小化的情况下运行 Selenium 测试套件

> ID：13421163
> 
> 赞同：2
> 
> 时间：2012-11-16T17:05:46.427
> 
> 标签：selenium-rc

作为我们 Web 应用程序部署的一部分，我需要在部署后进行基本的冒烟测试。

我正在使用 Selenium RC 在部署结束时自动运行冒烟测试。

现在如何在运行测试套件时运行最小化（不弹出）的浏览器。

以下是用于运行测试套件的命令

java -jar D:\Selenium\RC\selenium-server-standalone-2.25.0.jar -htmlSuite *firefox [https://abc.com](https://abc.com) C:\Users\abc\Desktop\testsuite.html results.html -firefoxProfileTemplate C :\Users\331036\AppData\Roaming\Mozilla\Firefox\profiles\imvteil2.selenium

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:16:45.387

我有一个可以满足您需求的替代解决方案。您可以将 WebDriver 的位置设置在您的视图之外。这样，它在运行时就看不见了。（它可能从一个可见的位置开始，但它只会在那里一瞬间。）

```
FirefoxDriver driver = new FirefoxDriver();
driver.manage().window().setPosition(new Point(-2000, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:46:52.703

我不认为这是可能的，浏览器会弹出，你必须手动最小化它

# sql-server - 从字符串转换日期和/或时间时转换失败

> ID：13421164
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:05:53.457
> 
> 标签：sql-server, stored-procedures

我写了一个实际搜索记录的程序。当我执行它时，它给出了一个错误，上面写着：

> *从字符串转换日期和/或时间时转换失败。*

陈述：

```
((CONVERT(varchar, DATEPART(YYYY, Tbl_Contract.ContractDate), 101)) = @Year or @Year = '') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:59:51.663

您似乎正在将日期转换为年份值：

```
DATEPART(YYYY,@ContractDate) 
```

然后尝试将其转换回日期：

```
CONVERT(varchar, DATEPART(YYYY, @ContractDate),101) 
```

你可以试试这个：**编辑**

```
datepart(yyyy, CONVERT(datetime, @ContractDate)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:01:13.047

因为`ContractDate`是 a`Varchar`你可以`directly`用

```
SubString(ContractDate, x, 4) = @YearString 
```

或者你可以封装条件

```
Case when IsDate(ContractDate) = 1 
      then ((CONVERT(varchar, DATEPART(YYYY, @a), 101))) 
      else NULL 
end 
```

# git - jenkins, git, assembla : 无法克隆 & 权限被拒绝

> ID：13421167
> 
> 赞同：0
> 
> 时间：2012-11-16T17:06:13.570
> 
> 标签：git, jenkins, assembla

1.  在 Jenkins 中，使用源代码管理，git 插件无法克隆远程 repo。输入：git.cmd 和 git@git.assembla.com:myfork

2.  在 Jenkins 中，未使用源代码管理，在 Execute Windows Batch 命令中，“gitex pull –fetch –quiet”无法正确启动 git Extensions（“GitExtensions.exe [3784] 中发生未处理的异常”）。

3.  对于 git，在窗口提示符或从开始菜单运行 Gitbash 时，“git fetch/pull”失败，权限被拒绝。环境：HOME 路径正确（c:/users/username）。密钥在文件夹中（%HOME%/.ssh 和 c:/git/.ssh）；公钥被添加到 assembla 用户帐户中。选美正在运行，添加了 .ppk 密钥。 **如果从 GitExtensions 启动 git bash，则 git pull/fetch 工作正常。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:05:13.537

1 和 3 似乎是因为 Jenkins 服务器无法通过 ssh 对 assembla 进行身份验证。确保使用 jenkins 的服务器使用可以访问您的存储库的 ssh 密钥 - 在 assembla 中创建一个机器人用户并将他作为成员添加到空间并将 ssh 密钥从服务器上传到他的个人资料，或者将您的私有/公共 ssh 密钥上传到 jenkins 服务器.

# linux - Linux：是否可以在远程主机上添加文件协议支持？

> ID：13421169
> 
> 赞同：0
> 
> 时间：2012-11-16T17:06:15.363
> 
> 标签：linux, cross-platform, protocols

我`test.txt`在远程主机上有一个文件`myhost`。

在 Windows 中，我可以使用以下 URL 访问文件：`file://myhost/test.txt`并且`myhost`可以在我的`Network`

但是，Linux 似乎使用不同的协议来访问此 URL。

我尝试使用相同的 URL，但找不到该文件。我猜可能是因为`myhost`没有安装在 Linux 中。

是否可以在不安装或安装额外包的情况下在**远程**主机上添加文件协议支持？

提前致谢！

# html - html 页面在插入 3D 购物车时看起来很奇怪

> ID：13421171
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:06:18.180
> 
> 标签：html, css

我创建了 html 页面并安装在 3D Cart 在线商店管理器上。但是html页面看起来很奇怪。下面是截图和代码！[图表截图][1]

在上图中，有一个包含 9 个下拉列表的图表，这是我开发的 html 页面。当我插入它时，它移到了最左边，使屏幕看起来很奇怪。下面是来自 Pastbin 的 html 代码。 [html代码](http://pastebin.com/STP9dUK3)

请建议我如何解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:24:05.513

最后，我错过了关闭表格并添加为“table”而不是“/table”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:24:29.210

顺便说一句，您的 html 中有一些错误。

`<h3>`标签被打开两次，而不是打开和关闭；

`<form>`标签在 外部打开`<div id="chart">`，但在内部关闭；

要获得完整的错误列表（显然是 14 个），请将您的整个原始数据粘贴到[w3c 验证器](http://validator.w3.org)中，通过直接输入对其进行验证。

作为一个测试，`margin: 0 auto`从你的代码中找到并删除你的所有东西，他们通常是这种“居中错误”的负责人......

# javascript - Ajax 调用返回整个页面

> ID：13421172
> 
> 赞同：0
> 
> 时间：2012-11-16T17:06:23.453
> 
> 标签：javascript, jquery, ajax, wordpress

我有以下页面，其中包含一些随机提示： `http://www.javaexperience.com/tips`

我只想在网站的其他页面上显示提示，所以我正在进行 ajax 调用并将 ajax 响应返回的任何内容添加到 Div 的 HTML。

DIV html 是：

```
<div id="tips"><div> 
```

ajax 调用是：

```
jQuery("#tips").load("/tips/"); 
```

问题是 ajax 调用导致整个页面内容被添加到 div （因为页面被附加到 div，上面的 jQuery 代码被无限调用），而我只想添加提示部分。有什么简单的出路吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T17:09:02.310

这是 load 方法的预期行为，它总是会下载整个内容。您可以指定将加载页面的某个部分解析并放入调用容器中。

```
jQuery('#tips').load('url #tip1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:09:11.797

你需要：

```
$('#tips').load('ajax/test.html #container'); 
```

更多关于加载的信息在[这里](http://api.jquery.com/load/)

# c - 为什么我的递归程序给我一个分段错误？

> ID：13421173
> 
> 赞同：-2
> 
> 时间：2012-11-16T17:06:34.893
> 
> 标签：c, recursion, segmentation-fault

运行程序时，我不断遇到分段错误。当程序试图访问计算机无法物理寻址的内存时，通常会发生分段错误。我无法确定问题出在哪里。

编辑：我在扫描变量时更改了添加 & 但这并不能解决分段错误的问题

这是我的代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <stdbool.h>

    void userEnter(int*pattern, int n);
    void print( int * s, int n);
    void recurs( int * s, int * a, int n, int wpegs, int bpegs);
    bool Done (int*s);
    bool bPegs(int*a ,int*s, int bpegs, int wpegs, int n);
    bool wPegs(int* modcom, int* modoriginal, int*s, int wpegs, int w);
    void change(int*modoriginal, int*modcom, int i, int k, int w);

    int main(void)
    {
        int i, n, bpegs, wpegs;

        printf("Enter the pattern length: ");
        scanf("%d",&n);
        int *a = (int*)malloc((n)*(sizeof(int)));
        printf("Input the guess pattern: ");
        int pattern[n];
        userEnter(pattern, n);  
        printf("Enter the number of black pegs in the feedback: ");
        scanf("%d",&bpegs);
        printf("Enter the number of white pegs in the feedback: ");
        scanf("%d",&wpegs);
        printf("The possible key patterns are: ");
        for(i=0; i<=n-1; i++)
        {
            a[i]=0;
        }
        print(a, n);
        recurs(a, pattern, n, wpegs, bpegs);

    }

    void userEnter(int*pattern, int n)
    {
        char input[n];
        scanf("%s",&input);

        int i;
        for(i = 0; i < n-1; i++)
        {
            pattern[i] = input[i]-65;
        }
    }

    void print( int * s, int n)
    {
        int i; 
        printf( "\n" );
        for( i = n-1; i >= 0; i-- )
        {
            printf( "%c", ( s[ i ] + 65 ) );
        }
    }

    void recurs( int * s, int * a, int n, int wpegs, int bpegs)
    {

        int i;

        if(Done(s))
        {
            print( s, n);
            printf( "\nAccomplisshed!\n" );
        }

        else{
            s[ 0 ] += 1;
            for( i = 0; i < n-1; i++ )
            {
                if( s[ i ] == 6 ){
                    s[ i ] = 0;
                    s[ i + 1 ] += 1;
                }
            }
            if(bPegs(a ,s, bpegs, wpegs, n))
            {
            print( s, n);
            }
            recurs(s, a, n, wpegs, bpegs);
        }
    }

    bool Done (int*s)
        {
            int i;
            bool done=true;
            for (i=0;i<=11;i++)
            {
                if(s[i]!=5)
                {
                    done=false;
                }
            }
            return done;
        }

    bool bPegs(int*a ,int*s, int bpegs, int wpegs, int n)
    {
        int i,j,c=0;
        bool d = false;
        for(i=0; i<n-1; i++)
        {
            if(a[i]==s[i])
            {
                c++;
            }
        }
        int x =n-c;
        int* modcom; 
        int*modoriginal;
        modcom=(int*)malloc((x)*(sizeof(int)));
        modoriginal=(int*)malloc((x)*(sizeof(int)));
        int w=0;
        for(j=0; j<n-1; j++)
        {
            if(a[j]!=s[j])
            {
                modcom[w]=s[j];
                modoriginal[w]=a[j];
                w++;
            }       
        }
        if(c==bpegs)
        {
            d = wPegs(modcom, modoriginal, s, wpegs, w);
        }

        return d;

    }

    bool wPegs(int*modcom, int*modoriginal, int*s, int wpegs, int w)
    {
        int i, k, count=0;
        for(i=0; i<=w; i++)
        {
            for(k=0; k<=w; k++)
            {
                if (modoriginal[i]==modcom[k])
                {
                    count++;
                    change(modoriginal, modcom, i, k, w);
                }
            }
        }
        if(wpegs==count)
        {
            return true;
        }
        else
        {
            return false;
        }

    }

    void change(int*modoriginal, int*modcom, int i, int k, int w)
    {
        int c, o;
        for(c=i-1; c<w-1; c++)
        {
            modoriginal[c]=modoriginal[c+1];
        }
        for(o=k-1;o<w-1;o++)
        {
            modcom[o]=modcom[o+1];
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:08:58.523

因为您没有`scanf`正确传递参数，正如编译器所报告的那样：

```
13421173.c:25: warning: format ‘%d’ expects type ‘int *’, but argument 2 has type ‘int’
13421173.c:25: warning: format ‘%d’ expects type ‘int *’, but argument 2 has type ‘int’
13421173.c:27: warning: format ‘%d’ expects type ‘int *’, but argument 2 has type ‘int’
13421173.c:27: warning: format ‘%d’ expects type ‘int *’, but argument 2 has type ‘int’ 
```

正确用法如下：

```
scanf("%d", &bpegs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:08:36.253

我还没有检查所有的代码，但你应该改变

```
scanf("%d",bpegs);
printf("Enter the number of white pegs in the feedback: ");
scanf("%d",wpegs); 
```

至

```
scanf("%d",&bpegs);
printf("Enter the number of white pegs in the feedback: ");
scanf("%d",&wpegs); 
```

即传递指向您希望 scanf 写入的整数的指针

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T18:09:39.017

的参数`scanf`是格式和指向相同格式类型变量的指针。在整数`%d`需要 &d 的情况下，其中 d 的类型为`int`。对于一个字符串，比如你的函数中的输入`userEnter()`，`%s`需要一个类型`char*`，输入是一个数组，这意味着没有大括号的输入已经是一个指针，所以你只写

```
scanf("%s",input); 
```

此外，您应该检查您的`for`cicles 中的限制。例如，在`bPegs()`您为 modcom 和 modoriginal 的大小**x = n - c**分配内存时，在下一个 cicle 中，您的限制变为 n-1，这会产生分段错误，除非 c = 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:11:30.607

就像是：

```
scanf("%d",bpegs); 
```

进行从 int 到 int 指针的隐式转换，以便读取的整数将写入某个随机地址。这个随机地址取决于未初始化的 bpegs 的值。如果你多次使用 scanf，那么你有纠正所有这些错误，并传递要更改的值的地址，而不是值。

# java - 通知声音

> ID：13421176
> 
> 赞同：0
> 
> 时间：2012-11-16T17:06:42.910
> 
> 标签：java, android, audio, notifications

我想在`Notification`触发时播放 mp3 声音。为此，我在“res/raw”文件夹中放置了一个 mp3 文件，并使用以下说明：

`notification.sound=Uri.parse("android.resource://"+getPackageName()+"/" + R.raw.mySound);`.

但是当它出现时我没有声音`Notifications`！

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:11:14.290

我在这里找到了一个例子 -

*   [如何播放安卓通知声音](https://stackoverflow.com/questions/4441334/how-to-play-an-android-notification-sound)

这是使用的代码

```
try {
        Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        Ringtone ring = RingtoneManager.getRingtone(getApplicationContext(), notification);
        ring.play();
    } catch (Exception e) {} 
```

另一方面，如果您想自定义声音（就像我想的那样），您应该使用从[这里获取的代码](https://stackoverflow.com/questions/8414495/android-notification-to-play-sound-only/ "这里”")

```
notification.sound = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.notifysnd);
notification.defaults = Notification.DEFAULT_LIGHTS | Notification.DEFAULT_VIBRATE 
```

;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:11:25.080

只需将下面的代码放在将在通知发生时触发的块中。

```
mMediaPlayer = new MediaPlayer();
mMediaPlayer = MediaPlayer.create(this, R.raw.mySound);
mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mMediaPlayer.setLooping(true);  // Set false if you don't want it to loop
mMediaPlayer.start(); 
```

# php - SugarCRM 中生成的 URL 以显示在列表视图中 - 将记录添加到数据库

> ID：13421199
> 
> 赞同：1
> 
> 时间：2012-11-16T17:09:04.063
> 
> 标签：php, mysql, sugarcrm

我试图弄清楚如何在 SugarPro 6.0.4 版中修改模块。该模块包含一个“键”，它基本上是一串字符，我想将此键附加到基本 URL 并使其成为`keys_c`模块中的新字段 ( )。有数千个这样的密钥，所以如果它可以自动生成就好了。

我让它按预期工作，但有一个例外（和误解）。模块字段的`base_url{key}`生成 URL 选项有效，但它仅显示在模块详细信息视图中。在模块列表视图中它不显示。我浏览了所有`listviewdefs.php`我能找到的文件，它们似乎都还可以，但也许我不知道要查找什么。

结果应如下所示：

`example.com?page=key&key=1a2b3c4d5e6f7g`

回顾一下：这`base_url{key}`可行，但仅显示模块的详细信息视图。在编辑视图中，字段缺失（例如，不可编辑），列表视图也缺失。这里的目标是让它显示在列表视图中。

然后我查看了数据库，新字段显示为`keys_c`, 用于自定义。事实上，数据库显示了一个名为 的新表`keys_cstm`，与键表相邻。新`keys_cstm`表有一个`id_c`和`keys_c`行。所以现在我有`keys`和`keys_cstm`桌子。的默认值为`keys_c`：

`example.com?page=key&key={key}`

但是在 Sugar 中，当我转到其中一个键的详细信息视图（这有效）时，我看到了新字段（好），然后在数据库中创建了一条新记录。

看起来该值并未最终出现在数据库中，而是动态生成的。我想这就是“生成 URL”的意思。所以我的问题变成了：如何生成所有这些 URL 并将它们存储在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:28:46.900

Sugar 中此选项的全部意义在于动态创建链接。我已经正确使用了这个功能，它按预期工作。但是，问题是，我想要系统中不可用的其他东西。

# javascript - 自定义函数中的回调函数

> ID：13421211
> 
> 赞同：4
> 
> 时间：2012-11-16T17:09:16.800
> 
> 标签：javascript, jquery

有没有办法在另一个完成后调用自定义函数。许多 jquery 包含一种回调方法，例如当动画完成时，您可以给它另一个函数作为最后一个参数。但是有什么可以串起来`function1(params, function1(){alert('2');})`的吗？老实说，我不知道它会是什么样子。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T17:12:16.797

您可以使用以下内容创建函数指针：

```
var yourCallback = function() {
    alert('2');
} 
```

您可以将其视为包含函数本身（而不是其返回值）的对象。由于它是一个对象，因此您可以将其传递给其他函数。

然后将其作为参数传递给您正在调用的函数（不要使用 调用它`()`，因为这会传递它的返回值）：

```
function1(params, yourCallback); 
```

最后，在 function1 中，在需要时调用您的回调：

```
function function1(args, callback) {
    //Some code
    if (callback) {
        callback();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:12:13.410

从技术上讲，您要求的模式是：

```
function myFunctionNeedsACallback(param1, callback) {
    //do stuff with param1
    if(typeof callback === "function"){
        callback.call(yourThisParam, anyOtherParams);
    }
} 
```

虽然这是一个有用的模式......过度使用会导致丑陋、不可测试和不可维护的代码。谨慎使用。

您的示例可以正常工作：

```
myFunctionNeedsACallback(param, function() { alert('2'); });

//will alert 2 after running the rest of the contents of the function 
```

**编辑**

为了解决托马斯的情况：

```
function ajaxCall1(){
    return $.ajax(/*your parameters NO SUCCESS CALLBACK NEEDED*/);
}

function ajaxCall2(){
    return $.ajax(/*your parameters NO SUCCESS CALLBACK NEEDED*/);
}

function ajaxCall3(){
    return $.ajax(/*your parameters NO SUCCESS CALLBACK NEEDED*/);
}

$.when(ajaxCall1(), ajaxCall2(), ajaxCall3()).then(function(results1, results2, results3) {
    //do stuff with all 3 results without "nesting" things
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:12:17.110

```
function doSomething(arg1, callback){
    // bla bla bla
    callback();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:17:25.357

你会像这样构建你的函数：

```
function one(x, y, z, callback) {
   // do operations here

   callback();
} 
```

然后，由于函数是对象，你可以通过回调参数传入一个函数，IE：

```
one(1, 2, 3, function(){alert('hello');}); 
```

或者

```
var func = function() { alert('hello'); };
one(1, 2, 3, func); 
```

或者

```
function func() {
  alert('hello');
}

one(1, 2, 3, func); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T17:21:30.537

虽然回调很方便，但过度使用会导致代码丑陋且无法维护。除了其他答案中显示的标准回调之外，您可能还想查看其他模式，例如 deferred/promises 和 AOP。

在 jQuery 中，promise 是通过[when() 和 then()](http://api.jquery.com/jQuery.when/)实现的。

[requirejs](http://requirejs.org/)也是一个很好的起点。

# java - solr StandardTokenizer：如何使用通配符处理下划线？

> ID：13421215
> 
> 赞同：5
> 
> 时间：2012-11-16T17:09:30.333
> 
> 标签：java, solr

所以，我有一个 Solr 实例，它使用`StandardTokenizer`（以及`ClassicFilterfactory`，`LowercaseFilterFactory`和`Stopfilterfactory`）处理输入和查询。

在我的索引中，有许多带有下划线分隔名称的文件（例如。`some_indexed_file.jpg`）。

我注意到，如果我查询`some_indexed_file.jpg`，我会正确返回要查找的文件。

但是，如果我另外搜索`some_indexed_file.jp*`, （带有星号，我假设它充当通配符），据我了解应该会产生类似的结果，但我没有得到任何结果。

知道发生了什么：我认为我对 solr 处理查询的方式有误解？

**编辑**：根据要求，这里是架构 XML 配置条目：

```
 <fieldType name="default" class="solr.TextField">
        <analyzer type="index">
            <tokenizer class="solr.StandardTokenizerFactory" />
            <filter class="solr.ClassicFilterFactory" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.StopFilterFactory" />
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.StandardTokenizerFactory" />
            <filter class="solr.ClassicFilterFactory" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.StopFilterFactory" />
        </analyzer>
    </fieldType>

   <field name="filename" type="default" multiValued="true" omitNorms="false" termVectors="false"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:22:48.693

好吧，更多的研究已经解决了这个问题：基本问题是 Solr 没有将文本分析应用于通配符查询。

这意味着它正在搜索与`some_indexed_file.jp*`. 但是，当文件名被索引时，它被标记为“一些”“索引”和`file.jpg`，这与这个搜索词不匹配。
搜索`some_indexed_file.jpg`被正确标记，因此返回正确的结果。

# c - C函数参数优化：(MyStruct const * const myStruct) vs. (MyStruct const myStruct)

> ID：13421218
> 
> 赞同：0
> 
> 时间：2012-11-16T17:09:35.367
> 
> 标签：c, optimization, pointers, constants, pass-by-value

[ideone.com](http://ideone.com/PmhyMT)上提供的示例：

```
int passByConstPointerConst(MyStruct const * const myStruct)
int passByValueConst       (MyStruct const         myStruct) 
```

您是否希望编译器优化上面的两个函数，使得它们都不会真正复制传递的 MyStruct 的内容？

我确实了解许多优化问题特定于单个编译器和优化设置，但我不能为单个编译器进行设计。相反，我想对是否需要传递指针以避免复制有一个普遍的期望。似乎使用`const`并允许编译器处理优化（在我配置它之后）应该是一个更好的选择，并且会产生更清晰和更不容易出错的代码。

在[ideone.com](http://ideone.com/PmhyMT)的示例中，编译器显然仍在将数据复制到新位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:30:30.160

在第一种情况下（将 const 指针传递给 const）不会发生复制。

在第二种情况下，复制确实发生了，如果没有其他原因，我*不*希望它被优化，因为对象的地址被获取，然后通过省略号传递到函数中，从编译器的角度来看，谁知道该函数对该指针的作用？

更一般地说，我不认为将按值调用更改为按引用调用是编译器所做的事情。如果您想通过引用进行复制，请自行实现。

从理论上讲，编译器是否有可能检测到它可以将函数转换为按引用传递？是的; C标准中没有任何内容说它不能..

你为什么担心这个？如果您关心性能，那么按值进行的分析是否显示为您软件的一个重要瓶颈？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:46:53.253

常见问题解答解决了此主题`comp.lang.c`：

[http://c-faq.com/struct/passret.html](http://c-faq.com/struct/passret.html)

当大型结构按值传递时，通常通过实际传递对象的地址而不是副本来优化。然后，被调用者确定是否需要制作副本，或者它是否可以简单地使用原始对象。

参数上的 const 限定符没有区别。它不是类型的一部分；它只是被忽略了。也就是说，这两个函数声明是等价的：

```
int foo(int);
int foo(const int); 
```

声明可以省略 const，但定义可以省略，反之亦然。调用的优化不能取决于`const`声明中的这一点。这`const`不是创建对象按值传递的语义的原因，因此无法修改原始对象。

优化必须保留语义；它必须看起来好像确实传递了对象的副本。

有两种方法可以判断副本未通过：一种是对明显副本的修改会影响原始副本。另一种方法是比较地址。例如：

```
 int compare(struct foo *ptr, struct foo copy); 
```

里面`compare`我们可以取 的地址`copy`看是否等于`ptr`。如果即使我们已经这样做了优化仍然发生，那么它就会向我们展示自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T18:03:37.023

第二个声明实际上是用户直接请求接收传递的结构的*副本*。

`const`修饰符消除了对本地副本进行任何修改的可能性，但是，它并不能消除复制的所有原因。

首先，副本必须保持其地址标识，这意味着在第二个函数内部，`&myStruct`表达式应该产生一个与任何其他对象的地址*不同的值。*`MyStruct`当然，智能编译器可以检测依赖于对象地址标识的情况。

其次，混叠带来了另一个问题。想象一下，程序有一个全局指针`MyStruct *global_struct`，并且在第二个函数中有人修改了`*global_struct`. 有可能`*global_struct`是作为参数传递给函数的相同结构对象。如果没有复制，对 的修改`*global_struct`将通过本地参数可见，这是一场灾难。在编译时解决别名问题要困难得多（通常情况下不可能），这就是编译器通常无法优化复制的原因。

所以，我希望任何编译器都能按要求执行复制。

# c - 如何在 C 中读取图像的 RGB 通道？

> ID：13421220
> 
> 赞同：1
> 
> 时间：2012-11-16T17:09:50.073
> 
> 标签：c, cuda

我正在使用 pycuda 来计算图像像素的强度。为此，我将图像发送到 GPU，如下所示。

```
 img = np.float32(np.array(img.imread('my_image.jpg')))
 img_gpu = gpuarray.to_gpu(img) 
```

然后，在内核中（当然是用 c 编写的），我想得到如下的 RGB 值（在伪代码中）。

```
__global__ void get_intensities(float* img, float* intensities) {
    intensities[globalIndex] = R(x, y) + G(x, y) + B(x, y)
} 
```

我现在的大问题是在 C 中获取 RGB 通道。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:33:23.807

尽管这最终取决于图像的存储方式，但在这种情况下我会利用结构。例如：

```
image = np.uint8(np.array(img.imread('my_image.jpg')))
img_gpu = gpuarray.to_gpu(image)

__global__ void intensity(uchar3* img, int* intensities)
{
    ...
    intensities[globalIndex] = img[globalIndex].x + img[globalIndex].y + img[globalIndex].z;
    ...
} 
```

请参阅[http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#built-in-vector-types](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#built-in-vector-types)

# sql - 在 T-SQL 中，如何根据第二列的条件取一行的值？

> ID：13421222
> 
> 赞同：1
> 
> 时间：2012-11-16T17:10:02.810
> 
> 标签：sql, sql-server, tsql

我有一个看起来像这样的表：

```
InvoiceNumber   AccountNumber   SumAmount
---------------------------------------------
1765            4150            20687.5000
1765            1100            20687.5000
1766            4150            41895.0000
1766            7730               20.0000
1797            4150                0.0000
1797            7730               20.0000
1797            1100             6652.3400
1797            4990             6652.3400 
```

它是由这个查询生成的：

```
SELECT InvoiceNumber
    ,AccountNumber
    ,SUM(Amount) AS SumAmount
FROM vINVOICE_TABLE
GROUP BY InvoiceNumber
    ,AccountNumber
ORDER BY InvoiceNumber 
```

我想应用这个逻辑：

*   如果`SumAmount_Account 1 > SumAmount_Account2`，取`Account1`
*   如果`SumAmount_Account 1 == SumAmount_Account2`，取较大的帐户

所以，结果应该是这样的：

```
InvoiceNumber   AccountNumber
---------------------------------
1765            4150
1766            4150
1797            4990 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:32:30.447

这可以做到。

```
SELECT InvoiceNumber, AccountNumber
FROM 
(
    SELECT  
        Row_Number() OVER(
            Partition BY InvoiceNumber  
            ORDER BY SUM(Amount) DESC, AccountNumber DESC
        ) rowNumber,
        InvoiceNumber,
        AccountNumber
    FROM vINVOICE_TABLE
    GROUP BY InvoiceNumber, AccountNumber 
)inv
WHERE rowNumber = 1 
```

# javascript - 在函数外使用变量

> ID：13421225
> 
> 赞同：1
> 
> 时间：2012-11-16T17:10:13.263
> 
> 标签：javascript, variables, return, parameter-passing, declare

你好我有这个功能

```
locDistance(alat[i-1], alon[i-1], alat[i], alon[i]);

function locDistance(lat1, lon1, lat2, lon2) {
    //Radius of the earth in:  1.609344 miles,  6371 km  | var R = (6371 / 1.609344);
    //var R = 3958.7558657440545;
    var R = 3958.7558657440545; 
    var dLat = toRad(lat2-lat1);
    var dLon = toRad(lon2-lon1); 
    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * 
            Math.sin(dLon/2) * Math.sin(dLon/2); 
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
    var d = R * c;
    var dist = d;
};

function toRad(Value) {
    /** Converts numeric degrees to radians */
    return Value * Math.PI / 180;
} 
```

我知道我必须在函数外部声明变量才能在另一个地方使用它，所以我在页面顶部定义了

```
var dist = 0; 
```

我想在这里的另一个函数中使用 de 变量“dist”

```
$('.content').append(dist); 
```

但问题是由于 dist 变量，我一直得到 0。

我已经检查过，但在 de locDistance 函数内部， dist 变量具有不同的值，因为它应该是，所以函数不是这里的问题

我究竟做错了什么？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:14:47.147

上面的代码不起作用的原因是在 locDistance 方法中使用了 var 关键字，因此每次调用函数时都将 dist 设置为局部变量，而将全局 dist 设置为 0。

话虽如此...

也许您宁愿让 locDistance 返回值，然后在需要时调用该函数，例如：

```
$('.content').append(locDistance(alat[i-1], alon[i-1], alat[i], alon[i]));

function locDistance(lat1, lon1, lat2, lon2) {
    //Radius of the earth in:  1.609344 miles,  6371 km  | var R = (6371 / 1.609344);
    //var R = 3958.7558657440545;
    var R = 3958.7558657440545; 
    var dLat = toRad(lat2-lat1);
    var dLon = toRad(lon2-lon1); 
    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * 
            Math.sin(dLon/2) * Math.sin(dLon/2); 
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
    var d = R * c;
    return d;
}

function toRad(Value) {
    /** Converts numeric degrees to radians */
    return Value * Math.PI / 180;
} 
```

# sql - 如何连接具有来自同一个表的多个外键的表？

> ID：13421227
> 
> 赞同：1
> 
> 时间：2012-11-16T17:10:20.050
> 
> 标签：sql, sql-server

愚蠢的问题，但我找不到正确的搜索这个问题，我有一个思维障碍。我有一个包含引用表中的键的表，我想避免使用循环来选择没有重复的记录。我需要加入模式 1-5，这样我才能获得名称而不会重复。请留下评论，以便我澄清。

Mode(1-5) 是 ModeID

例子：

要加入的表

```
ID
Mode1
Mode2
Mode3
Mode4
Mode5 
```

参考表

```
ModeID
ModeName 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T17:14:39.213

这是您的问题的答案：

```
SELECT 
    m1.ModeName,
    m2.ModeName,
    m3.ModeName,
    m4.ModeName,
    m5.ModeName
FROM Modes m
LEFT JOIN Ref m1 on m1.ModeID = m.Mode1
LEFT JOIN Ref m2 on m2.ModeID = m.Mode2
LEFT JOIN Ref m3 on m3.ModeID = m.Mode3
LEFT JOIN Ref m4 on m4.ModeID = m.Mode4
LEFT JOIN Ref m5 on m5.ModeID = m.Mode5 
```

但我建议您的数据库设计存在问题。您应该使用连接表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:27:44.550

我认为，从长远来看，对于许多选择查询而言，在视图中取消透视表将有助于克服表设计。（尤其是当有人有添加第六种模式的天才想法时 :-)

```
CREATE VIEW UnpivotedTable AS
    SELECT 
        ID, Mode, ModeId 
    FROM 
        TableToJoin
    UNPIVOT (ModeId FOR mode IN (Mode1,Mode2,Mode3,Mode4,Mode5)) AS t
GO 
```

然后，您的查询将成为一个相当“经典”的 PIVOT 查询（但这并不是我回答的真正重点。不可透视的观点是）

```
select Id, Mode1, Mode2, Mode3, Mode4, Mode5
from (
    select 
        Id, Mode, ModeName 
    from 
        UnpivotedTable 
            inner join 
        ReferenceTable 
            on ReferenceTable.ModeId = UnpivotedTable.ModeId
        ) as sourcetable
    pivot (
        max(ModeName) 
        for Mode in (Mode1, Mode2, Mode3, Mode4, Mode5)
        ) as pivotTable 
```

希望从长远来看，这将有所帮助。抱歉回复晚了

# vb.net - 通过扫描切换窗体时，主菜单不会在 Windows 窗体上打开

> ID：13421228
> 
> 赞同：1
> 
> 时间：2012-11-16T17:10:21.280
> 
> 标签：vb.net, menu, windows-mobile, compact-framework

我在 Windows Mobile 6.5 应用程序的 Windows 窗体中使用主菜单控件。它是经过编程的，所以如果我扫描条形码，程序会将我带到不同的页面。但是，如果我在主菜单打开时扫描页面，我将无法再在子屏幕上打开主菜单。我尝试在我的解码器事件（隐藏菜单）中对父表单执行“单击”，但菜单仍然不会显示在子屏幕上。如何让菜单在子屏幕上再次工作？如果扫描时菜单未打开，它工作正常。

```
Public Shared Sub DecodeEvent(ByVal sender As System.Object, ByVal e As HandHeldProducts.Embedded.Decoding.DecodeAssembly.DecodeEventArgs, ByVal scanInformation As ICurrentScanInformation, ByVal dashboardScreenServiceClient As DashboardScreenServiceClient)
    Dim oDecodeAssembly As New DecodeAssembly
    If scanInformation IsNot Nothing AndAlso scanInformation.AllowedScans IsNot Nothing Then
        ShowOffenderDialog(scanInformation.ScreenName, CType(scanInformation, Form), sourceId, source, True, e.Message) 
    Else
        MsgBox.ExclamationMsg("This type of barcode scan is not allowed.")
    End If
End Sub

Public Shared Sub ShowOffenderDialog(ByVal parentScreenName As String, ByVal owner As Form, ByVal sourceId As System.Int32, ByVal source As System.String, ByVal scan As System.Boolean, Optional ByVal offenderCd As String = "")
    Try
        /*open up a new screen*/
        offenderDetails = New frmOffenderDetails(parentScreenName, offenderCd, sourceId, source, scan)
        offenderDetails.ShowDialog()

        owner.BringToFront()
    Catch ex As Exception
        Utility.DisplayApplicationMessage(parentScreenName, "ShowDialog", ex)
    End Try
End Sub 
```

如果我跳过所有的 frmOffenderDetails 代码，菜单仍然不会显示，因此它与该表单没有任何关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:35:30.097

使用 RemoteSpy++，我确定菜单的名称是我设备上的 MNU。所以我使用以下代码来查找菜单：

**解决方案 1（适用于霍尼韦尔掌上电脑设备）：**

```
Dim menuHandle As IntPtr = HandHeldProducts.Embedded.Utility.WinAPI.sysFindWindow("MNU", Nothing) 
```

我无法通过在解码事件之前关闭菜单来修复 Honeywell Pocket PC 设备上的错误，所以我只是通知用户它已打开并在关闭菜单的情况下重试：

```
If Not menuHandle.ToInt64 = 0 Then
    MsgBox.ExclamationMsg("The menu must be closed before scanning a barcode. Please try your scan again with the menu closed.")
Else
    Decoder.DecodeEvent(sender, e, CurrentScanInformation, dashboardScreenServiceClient)
End If 
```

**解决方案2：**

我没有尝试过，但假设如果您没有霍尼韦尔设备，您也可以 P/Invoke。

声明以下函数：

```
<DllImport("coredll.dll", EntryPoint:="FindWindow")> _
Private Shared Function FindWindow(ByVal lpClassName As String, _
                                   ByVal lpWindowName As String) As IntPtr
End Function 
```

并像这样调用它来找到菜单的句柄：

```
Dim menuHandle As IntPtr = FindWindow("MNU", Nothing) 
```

第二部分与解决方案1相同：

```
If Not menuHandle.ToInt64 = 0 Then
    MsgBox.ExclamationMsg("The menu must be closed before scanning a barcode. Please try your scan again with the menu closed.")
Else
    Decoder.DecodeEvent(sender, e, CurrentScanInformation, dashboardScreenServiceClient)
End If 
```

# php - 邮件不会直接进入收件箱

> ID：13421232
> 
> 赞同：1
> 
> 时间：2012-11-16T17:10:34.963
> 
> 标签：php, email, spam, inbox

这是我的代码。当我从一个 id 向其相同的 id 发送电子邮件时，电子邮件会变成垃圾邮件。无法确定这段代码有什么问题。例如，我发送这样的电子邮件

From = abc@yahoo.com To = abc@yahoo.com 然后直接转垃圾。

```
 <?php

     $name=$_POST['fName'];
     $yemail = $_POST['yEmail'];
     $femail=$_POST['fEmail'];
     $message=$_POST['message']; 
     $from=$yemail;
     $to=$femail;
     $subject="Invitation for you";
     $mailBody ="<table width='628' border='0'>

    <tr><td align='left' valign='middle'><p><br><br>Hello,<br><br>This email is a       notification to let you know that your friend has invited you to <br>visit this link <a      href=www.heed-association.org>Heed Association.</a><br><br> Your friend is using this to        help people living in Pakistan by donating some money.<br><br>So your can also contribute in the areas of Health, Education, Environment and Sustainable Development<br> in the earthquake affected areas of Kashmir to improve living conditions and alleviate community distress<br><br><hr><br><br><strong>Regards<br><br>Heed Association</p></td></tr></table>";

   $headers  = 'MIME-Version: 1.0' . "\r\n";

    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

   $headers .= 'From:  <'.$yemail.'>' . "\r\n";

   if (mail($to, $subject, $mailBody, $headers)) {

   echo "<script language='javascript'>
            window.location = 'index.php';
            </script>";

   } else {
    echo "<script language='javascript'>
            window.location = 'tell_a_form.php';
            </script>";
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:24:02.850

我会说检查你的垃圾邮件过滤器。听起来很傻，将电子邮件添加到安全发件人列表中。您的代码中似乎没有发生任何真正时髦的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:18:19.620

这可能是一个过度敏感的垃圾邮件过滤器。许多程序可以检测电子邮件是否实际上不是从“发件人”列中列出的电子邮件地址发送的。通常避免这种情况的方法是让电子邮件来自“no-reply@yourdomain.com”。

# php - 如何使用 Symfony2 在一次 Web 服务调用中上传文件？

> ID：13421236
> 
> 赞同：2
> 
> 时间：2012-11-16T17:10:52.057
> 
> 标签：php, web-services, api, symfony, restful-architecture

在我的 Restful API 中，我想一次调用上传文件。在我的测试中，表单同时被初始化和绑定，但是我所有的数据字段表单都是空的，结果是我的数据库中的一条空记录。

如果我通过表单视图然后提交它，一切都很好，但我想一次调用 Web 服务。Web 服务注定要由主干应用程序使用。

谢谢你的帮助。

我的测试：

```
$client = static::createClient();
$photo = new UploadedFile(
        '/Userdirectory/test.jpg',
        'photo.jpg',
        'image/jpeg',
        14415
);
$crawler = $client->request('POST', '/ws/upload/mydirectory', array(), array('form[file]' => $photo), array('Content-Type'=>'multipart/formdata')); 
```

有我的控制器动作：

```
public function uploadAction(Request $request, $directory, $_format)
{
    $document = new Media();
    $document->setDirectory($directory);
    $form = $this->createFormBuilder($document, array('csrf_protection' => false))
        /*->add('directory', 'hidden', array(
             'data' => $directory
        ))*/
        ->add('file')
        ->getForm()
    ;
    if ($this->getRequest()->isMethod('POST')) {

        $form->bind($request);
        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($document);
            $em->flush();
            if($document->getId() !== '')
                return $this->redirect($this->generateUrl('media_show', array('id'=>$document->getId(), 'format'=>$_format)));
        }else{
            $response = new Response(serialize($form->getErrors()), 406);
            return $response;
        }
   }

    return array('form' => $form->createView());
} 
```

我的媒体实体：

```
 <?php

    namespace MyRestBundle\RestBundle\Entity;
    use Symfony\Component\Serializer\Normalizer\NormalizableInterface;
    use Symfony\Component\Serializer\Normalizer\NormalizerInterface;
    use Doctrine\ORM\Mapping as ORM;
    use Symfony\Component\Validator\Constraints as Assert;
    use Symfony\Component\HttpFoundation\File\UploadedFile;
    use Symfony\Component\HttpFoundation\Request;
    /**
     * @ORM\Entity
     * @ORM\HasLifecycleCallbacks
     */
    class Media
    {
        /**
         * @ORM\Id
         * @ORM\Column(type="integer")
         * @ORM\GeneratedValue(strategy="AUTO")
         */
        protected $id;

        /**
         * @ORM\Column(type="string", length=255, nullable=true)
         */
        protected $path;

        public $directory;

        /**
         * @Assert\File(maxSize="6000000")
         */
        public $file;

        /**
         * @see \Symfony\Component\Serializer\Normalizer\NormalizableInterface
         */
        function normalize(NormalizerInterface $normalizer, $format= null)
        {
            return array(
                'path' => $this->getPath()
            );
        }

        /**
         * @see
         */
        function denormalize(NormalizerInterface $normalizer, $data, $format = null)
        {
            if (isset($data['path']))
            {
                $this->setPath($data['path']);
            }
        }

        protected function getAbsolutePath()
        {
            return null === $this->path ? null : $this->getUploadRootDir().'/'.$this->path;
        }

        protected function getWebPath()
        {
            return null === $this->path ? null : $this->getUploadDir().'/'.$this->path;
        }

        protected function getUploadRootDir()
        {
            // the absolute directory path where uploaded documents should be saved
            return __DIR__.'/../../../../web/'.$this->getUploadDir();
        }

        protected function getUploadDir()
        {
            // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view.
            return 'uploads/'.(null === $this->directory ? 'documents' : $this->directory);
        }

        /**
         * @ORM\PrePersist()
         * @ORM\PreUpdate()
         */
        public function preUpload()
        {
            if (null !== $this->file) {
                // do whatever you want to generate a unique name
                $this->path = $this->getUploadDir().'/'.sha1(uniqid(mt_rand(), true)).'.'.$this->file->guessExtension();
            }
        }

        /**
         * @ORM\PostPersist()
         * @ORM\PostUpdate()
         */
        public function upload()
        {
            if (null === $this->file) {
                return;
            }

            // if there is an error when moving the file, an exception will
            // be automatically thrown by move(). This will properly prevent
            // the entity from being persisted to the database on error
            $this->file->move($this->getUploadRootDir(), $this->path);

            unset($this->file);
        }

        /**
         * @ORM\PostRemove()
         */
        public function removeUpload()
        {
            if ($file = $this->getAbsolutePath()) {
                unlink($file);
            }
        }

        /**
         * Set Directory
         *
         * @param string $directory
         * @return Media
         */
        public function setDirectory($directory)
        {
            $this->directory = $directory;

            return $this;
        }

        /**
         * Set Path
         *
         * @param string $path
         * @return Media
         */
        public function setPath($path)
        {
            $this->path = $path;

            return $this;
        }

        /**
         * Get path
         *
         * @return string
         */
        public function getPath()
        {
            $request = Request::createFromGlobals();
            return $request->getHost().'/'.$this->path;
        }

        /**
         * Get id
         *
         * @return string
         */
        public function getId()
        {
            return $this->id;
        }
    } 
```

我的路由：

```
upload_dir_media:
  pattern:      /upload/{directory}.{_format}
  defaults:     { _controller: MyRestBundle:Media:upload, _format: html }
  requirements: { _method: POST } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:38:31.070

试着把这个问题分解成一个简单的状态。您将如何通过一篇文章将“文本”或变量发布到 Web 服务？因为图像只是一个长字符串。查看 php 函数[imagecreatefromstring](http://php.net/manual/en/function.imagecreatefromstring.php)或[imgtostring](https://stackoverflow.com/questions/8502610/how-to-create-a-base64encoded-string-from-image-resource)。这通常是图像传输协议的幕后发生的事情。一旦您解决了更简单的问题，您将证明您可以解决原始问题。

# iphone - iOS - 尝试将 PDF 保存到设备并使用 Webview 加载

> ID：13421237
> 
> 赞同：1
> 
> 时间：2012-11-16T17:10:55.280
> 
> 标签：iphone, objective-c, cocoa, nsurl

我在这方面还很陌生，并且尝试解决这个问题已经有一段时间了。我想从 url 下载文件并将其保存到设备上的文档文件夹中。之后，我想将其加载到 Webview。如果我手动复制文件，webview 部分似乎可以工作，但是当我保存 URL 时，它只显示使用正确文件名保存的 5529 个字节？

以后我需要从安全的网络服务器加载文件，因此需要连接身份验证方法。

```
@interface ViewController ()

@end

@implementation ViewController
@synthesize webView;
@synthesize webData;

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

-(void)handleDocumentOpenURL:(NSURL *)url
{
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
    [webView setUserInteractionEnabled:YES];
    [webView loadRequest:req];
}
-(void)loadFileFromDocumentFolder:(NSString *) filename
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *file = [documentsDirectory stringByAppendingPathComponent:filename];
    NSURL *urlPdf = [NSURL fileURLWithPath: file];
    [self handleDocumentOpenURL:urlPdf];

}
- (IBAction)btnSave:(id)sender
{
    NSString *urlString = @"http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIWebView_Class/UIWebView_Class.pdf";

    NSURL *url = [NSURL URLWithString:urlString];

    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

    NSURLConnection *urlConnection = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];

    if (urlConnection)
    {
       webData = [NSMutableData data];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error !" message:@"Error has occured, please verify internet connection"  delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];

        [alert show];

    }
}
- (IBAction)btnLoad:(UIButton *)sender
{
    [self loadFileFromDocumentFolder:@"test.pdf"];
}

#pragma mark - NSURLConnection Delegate Methods
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    return YES;
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{

        [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"did fail");
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{

    NSLog(@"did receive data");
    [webData appendData:data];
    }
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"did receive response");
    [webData setLength:0];
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    BOOL isSuccessfull;
    NSLog(@"did finish loading. Bytes Received: %d", [webData length]);

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pdfPath = [documentsDirectory stringByAppendingPathComponent:@"test.pdf"];

    isSuccessfull = [webData writeToFile:pdfPath atomically:YES];

}
@end 
```

# python - ElasticSearch - 多字段的一个子字段中的值不正确

> ID：13421240
> 
> 赞同：1
> 
> 时间：2012-11-16T17:11:07.177
> 
> 标签：python, search, elasticsearch, tokenize

ElasticSearch 使用“名称”的多字段索引我的业务文档，以便我可以加权不同程度的名称匹配（精确匹配、多个单词之一等）。这是我的映射中的一个片段

```
"name" : {

                "type" : "multi_field",
                "fields": {
                    "name":          {"type" : "string", "store" : "yes", "index_analyzer"  : "AutoCompleteIndexAnalyzer",   "search_analyzer" : "AutoCompleteSearchAnalyzer"},
                    "exact_match":   {"type" : "string", "store" : "yes", "index_analyzer"  : "ExactMatchNameIndexAnalyzer", "search_analyzer" : "ExactMatchNameSearchAnalyzer"},
                    "auto_name":     {"type" : "string", "store" : "yes", "index_analyzer"  : "keyword",                     "search_analyzer" : "keyword"},
                 }
            }, 
```

因为它是一个多字段，所以我只提供一次值——ES 只是多次分析它。

所以我完全不知道“完整”子字段如何获得完全不正确的值，而“名称”子字段是正确的。我不明白为什么完全匹配不起作用，所以我编写了一个脚本字段来在搜索结果中给我“exact_match”标记：

```
"exact_match_tokenized_name": [
            "santininewyorkstyledeli"
        ],
"name": "Sal NY Pizza",
"name.auto_name": "Sal NY Pizza" 
```

如果有人对此有任何想法，我将不胜感激。

谢谢！

# java - 为什么我得到 java.util.PropertyPermission faces.PROJECT_STAGE 的 AccessControlException？

> ID：13421246
> 
> 赞同：0
> 
> 时间：2012-11-16T17:11:25.890
> 
> 标签：java, security, tomcat

我正在尝试部署一个 MyFaces 应用程序，启用 Tomcat 安全性（因为我的主机需要它）但是当我在本地部署来测试它时，我收到了这个错误。

我试过添加

`permission java.lang.PropertyPermission "faces.PROJECT_STAGE", "read";`

接着

`permission java.lang.PropertyPermission "javax.faces.PROJECT_STAGE", "read";`

到我的 catalina.policy 文件，但都没有任何影响。

有人可以让我知道如何解决这个问题吗？

谢谢，尼尔

下面的完整堆栈跟踪：

```
SEVERE: An error occured while initializing MyFaces: access denied (java.util.PropertyPermission faces.PROJECT_STAGE read)
java.security.AccessControlException: access denied (java.util.PropertyPermission faces.PROJECT_STAGE read)
        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
        at java.security.AccessController.checkPermission(AccessController.java:546)
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
        at java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:1285)
        at java.lang.System.getProperty(System.java:650)
        at org.apache.myfaces.application.ApplicationImpl.getProjectStage(ApplicationImpl.java:757)
        at javax.faces.context.FacesContext.isProjectStage(FacesContext.java:411)
        at org.apache.myfaces.config.FacesConfigurator.configureLifecycle(FacesConfigurator.java:978)
        at org.apache.myfaces.config.FacesConfigurator.configure(FacesConfigurator.java:429)
        at org.apache.myfaces.webapp.AbstractFacesInitializer.buildConfiguration(AbstractFacesInitializer.java:370)
        at org.apache.myfaces.webapp.Jsp21FacesInitializer.initContainerIntegration(Jsp21FacesInitializer.java:73)
        at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:143)
        at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:119)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:124)
        at org.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:146)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:777)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

# sql - 根据字段值更新 COLUMN

> ID：13421248
> 
> 赞同：2
> 
> 时间：2012-11-16T17:11:36.187
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

所有，我在一个表中有四列（`A INT`、`B INT`和）。我想将列中的值移动到或基于. 因此，如果我想将值移动到. 我怎样才能做到这一点？`C INT``D VARCHAR(1)``TableName``C``A``B``D``D = 'A'``C``A`

```
DECLARE @Column COLUMN;
UPDATE TableName 
SET (@Column = 
    (CASE 
        WHEN D = 'A' THEN A 
        WHEN D = 'B' THEN B
     END)) = C; 
```

*笔记。我明白以上是疯狂的，但我试图尽可能清楚地表达这个问题。我也竭尽全力寻找答案。我对 SQL 并不陌生，但这个让我很难过。任何帮助一如既往，非常感谢。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T17:15:17.073

这里，

```
UPDATE TableName
SET A = (CASE WHEN D = 'A' THEN C ELSE A END),
    B = (CASE WHEN D = 'B' THEN C ELSE B END) 
```

在这种情况下，只有 1 列将被更改，因为`D`一次只有一个值。

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!3/6816f/1)

# matlab - 超出矩阵维度的索引

> ID：13421255
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:12:03.690
> 
> 标签：matlab, markov-chains

我试图在 matlab 中获得这个低阶递归函数。我想在下一个时间步计算一个站点的状态概率，因为我有一个状态的初始概率。

```
P= Probability
x= status(0,1)
Dij= probability to pick a site
P(Status of Site(i) being x at next time step)= Summation[P(Status of Site(i) being x at previous time step)*Dij] 
```

这就是我所做的！但我的索引总是超过矩阵尺寸！我需要这方面的帮助。

```
clear all;
clc;

%function [t,i]= CopyingInfluenceModel
%%Define constants
%% generate some random weights vectori.e. the transition matrix=C
 % C=[0 (1,2) 0 (1,4) 0 0 0;
 %    (2,1) 0 (2,3) 0 0 0 0;
 %    0 (3,2) 0 (3,4) 0 0 0;
 %    (1,4) 0 (4,3) 0 (4,5) 0 0;
 %    0 0 0 (5,4) 0 (5,6) (5,7);
 %    0 0 0 0 (6,5) 0 (6,7);
 %    0 0 0 0 (7,5) (7,6) 0];
 %copying probabilities=branch weights
 onetwo=0.47;
 twothree=0.47;
 threefour=0.47;
 onefour=0.47;
 fourfive=0.023;
 fivesix=0.47;
 fiveseven=0.47;
 sixseven=0.47;
 selfweight1=0.06;
 selfweight2=0.037;
 % SourceNodes - a list of Nodes that are forced to be kept in one side of the cut.
 % WeightedGraph - symetric matrix of edge weights. Wi,j is the edge
 % connecting Nodes i,j  use Wi,j=0 or Wi,j == inf to indicate unconnected Nodes                  

 WeightedGraph=[0 onetwo 0 onefour 0 0 0;
 onetwo 0 twothree 0 0 0 0;
 0 twothree 0 threefour 0 0 0;
 onefour 0 threefour 0 fourfive 0 0;
 0 0 0 fourfive 0 fivesix fiveseven;
 0 0 0 0 fivesix 0 sixseven;
 0  0 0 0 fiveseven sixseven 0];
 Dij=sparse(WeightedGraph);

 % Initializing the variables
 t=[];
 i=[];
 %assigining the initial conditions
 t(1)=0;
 p(1)= 0.003; %% initial probability of status
 %set index no i to 1(initial condition for i=1)
 i=1;
 %repeating calculating new probabilities

 %% If the probability is zero, terminate while loop
 while p(i)>=0
    %calculate at the next time step for given index no
    t(i+1)= t(i);
    %calculate the status_probability at given time t=(i+1)
    [p(i+1)]=[p(i)]+sum([p(i)]*[Dij(i)]);
    [NextStatus(i)]= [p(i+1)]

%index i increases by 1 to calculate next probability
i=i+1;
end 
```

堆栈跟踪是：

```
%%??? Index exceeds matrix dimensions. 
%%Error in ==> CopyingInfluenceModel at 54 
%%[p(i+1)]=[p(i)]+sum([p(i)]*[Dij(i)]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:19:00.290

问题`Dij`不是`p`。`Dij`具有固定长度，因此当`i`超过该长度时程序会抛出错误。

添加：

我在代码中看不到你的逻辑，但我有一种强烈的感觉，你在计算错误。`Dij`是一个 7 x 7 矩阵，但您可以通过调用将其视为向量`Dij(i)`。如果您试图将某物乘以行或列，则需要`Dij(i,:)`or`Dij(:, i)`符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:27:56.950

您发布的逻辑不起作用，本质上， p(i+i) 尚未定义。有几种方法可以做到这一点，具体取决于您是否要保留 p 。我将发布一个保留 p 的方法，但可以做一些工作来提高代码效率。

```
p=[p;p(i)+sum(p(i)*Dij(i))];
NextStatus(i)= p(i+1) 
```

# mysql - MySQL 慢查询日志记录快速查询

> ID：13421266
> 
> 赞同：11
> 
> 时间：2012-11-16T17:12:29.327
> 
> 标签：mysql, database, mysql-slow-query-log

我遇到了一个问题，MySQL 似乎在慢查询日志中记录比指定时间快的查询。我已将 MySQL 配置为记录以下内容：

```
Server version: 5.1.54-1ubuntu4-log

+---------------------+-------------------------------+
| Variable_name       | Value                         |
+---------------------+-------------------------------+
| log_slow_queries    | ON                            |
| long_query_time     | 2.000000                      |
| slow_query_log      | ON                            |
| slow_query_log_file | /var/log/mysql/mysql-slow.log |
+---------------------+-------------------------------+
4 rows in set (0.00 sec) 
```

但是，在我的慢查询日志中，我可以看到它正在记录亚秒级查询：

```
# Time: 121116 17:09:00
# User@Host: user[user] @ ip-10-x-x-x.ec2.internal [x.x.x.x]
# Query_time: 0.007098  Lock_time: 0.000075 Rows_sent: 50  Rows_examined: 2693 
```

我已经使用“SET GLOBAL ...”动态设置了上述变量，但在此之前 long_query_time 被设置为 1.000000 秒。

知道为什么 MySQL 可以记录比指定更快的查询吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-16T17:24:31.973

根据[文档](http://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html)，还有另一个选项可能导致查询记录在慢查询日志中：

[`log_queries_not_using_indexes`](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_log-queries-not-using-indexes)

# openssl - 创建 P12 证书时出现 OpenSSL 私钥错误

> ID：13421269
> 
> 赞同：5
> 
> 时间：2012-11-16T17:12:38.827
> 
> 标签：openssl

我正在尝试从从 OpenSSL 创建的一些现有 .der 文件创建 P12 证书。

当我尝试运行以下命令时，出现错误。

```
C:\Windows\system32>openssl pkcs12 -export -out bundle.p12 -inkey <PATH>/PrivKey.der -in <PATH>/ClientSignedCert.der -certfile <PATH>/CACert.der 
```

我收到的错误：

```
Loading 'screen' into random state - done
unable to load private key
5688:error:0906D06C:PEM routines:PEM_read_bio:no start line:.\crypto\pem\pem_lib
.c:696:Expecting: ANY PRIVATE KEY 
```

我不明白这一点。我给 OpenSSL 一个私钥 (PrivKey.der)。此错误的原因可能是什么？

OpenSSL 1.0.1 2012 年 3 月 14 日（库：OpenSSL 1.0.1c 2012 年 5 月 10 日）
Windows 7 专业版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:20:24.327

根据 openssl PKCS12 文档，您的`-in`和`-inkey`certfile 文件必须是 PEM 格式。

要将证书从 DER 转换为 PEM：

```
x509 –in ClientSignedCert.der –inform DER –out ClientSignedCert.crt –outform PEM
x509 –in CACert.der –inform DER –out CACert.crt –outform PEM 
```

要将密钥从 DER 转换为 PEM：

```
rsa –in PrivKey.der –inform DER –out PrivKey.key –outform PEM 
```

[Openssl PKCS12 文档](http://www.openssl.org/docs/apps/pkcs12.html)

# r - 将 % 符号添加到 r 中的表中的数据

> ID：13421274
> 
> 赞同：0
> 
> 时间：2012-11-16T17:13:00.520
> 
> 标签：r

我想将表格另存为图形（使用 gridExtra 包中的“tableGrob”）。这没有任何问题。

但在此之前，我需要在表中的所有值中添加“%”符号。但是，将符号粘贴到表中会将表转换为向量。

```
my.table <- table(diamonds$cut, diamonds$color)

str(my.table)
'table' int [1:5, 1:7] 163 662 1513 1603 2834 224 933 2400 2337 3903 ...
- attr(*, "dimnames")=List of 2
..$ : chr [1:5] "Fair" "Good" "Very Good" "Premium" ...
..$ : chr [1:7] "D" "E" "F" "G" ...

my.table <- format(100*my.table, 2)

          D        E        F        G        H        I        J      
Fair      "16300"  "22400"  "31200"  "31400"  "30300"  "17500"  "11900"
Good      "66200"  "93300"  "90900"  "87100"  "70200"  "52200"  "30700"
Very Good "151300" "240000" "216400" "229900" "182400" "120400" "67800"
Premium   "160300" "233700" "233100" "292400" "236000" "142800" "80800"
Ideal     "283400" "390300" "382600" "488400" "311500" "209300" "89600" 
```

仍然可以，但下一个命令会破坏表：

```
my.table <- paste(my.table, '%')
str(my.table)
"character" 
```

你知道有什么办法可以规避吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:23:49.570

您可以做的一件事就是重建表：

```
m <- paste(my.table, '%')
matrix(m,5,7,dimnames = dimnames(my.table)) 
```

但是，如果这个表看起来很可能会在 LaTeX（或类似的东西）中输出，那么`%`在将其转换为您正在使用的任何标记语言时添加符号可能更有意义，而不是在 R 中的数据结构中.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:54:46.103

其他方式：

```
replace(my.table, TRUE, sprintf('%d%%', my.table)) 
```

我同意@joran 的观点，即 R 不适用于排版漂亮的表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:12:50.413

您可以复制属性来恢复表格形式：

```
my.table2 <- paste(my.table, '%')
attributes(my.table2) <- attributes(my.table)
my.table <- my.table2 
```

如果你想避免额外的名称，下面的代码可以做到这一点，虽然它更难阅读：

```
my.table <- `attributes<-`(paste(my.table, '%'), attributes(my.table)) 
```

# css - IE7 和 IE8 的 last-child 和 nth-child

> ID：13421278
> 
> 赞同：2
> 
> 时间：2012-11-16T17:13:20.057
> 
> 标签：css, internet-explorer, internet-explorer-8, internet-explorer-7

好的，所以我需要为所有表的最后一行添加背景颜色，除了最后一个表，我需要为最后三行添加背景颜色。

```
table tbody tr:last-child    
table:last-child tbody tr:nth-last-child(-n+3) 
```

如何在 IE7 和 IE8 中进行这项工作？

最好是纯 CSS 解决方案。像 Modernizr 这样的解决方案会解决这个问题吗？我不喜欢使用 jQuery 遍历 dom 并使用我自己的脚本添加自定义类/样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:20:55.350

CSS-only solution not possible, you are dealing with browsers that are way too old. On the upside, you don't need your own script as [Selectivzr](http://selectivizr.com/) does just this, or alternatively the all-in-one solution that is [IE9.js](http://code.google.com/p/ie7-js/) (fixes a ton of other IE bugs, not just add new selectors).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:18:12.140

简短的回答：不支持纯 CSS 解决方案；

modernizr 不会给旧的 css 引擎，即任何附加功能。您最好的选择是**a)**将类添加到您想要以不同方式设置样式的行中，或者**b)**使用 javascript 来完成。如果您正在动态生成表（例如使用 php），那么添加类会更容易。

# gcc - 使用 GCC 编译并重新定位链接库

> ID：13421279
> 
> 赞同：1
> 
> 时间：2012-11-16T17:13:32.470
> 
> 标签：gcc, linker

我有我的`soft.c`，我成功编译它并将它链接到`/usr/lib/myLib.so`.

一切都很好，除了它不是我想要的，我想管理考虑链接的最终路径，换句话说，我希望 GCC 考虑库`/usr/lib/myLib.so`，但我也希望最终链接成为相对路径，有点像`../myLib.so`.

通常的情况是

`./soft`链接到->`/usr/lib/myLib.so`

我想

`./soft`链接到->`../myLib.so`

显然，我还需要 GCC 来管理任何交叉引用的库，例如，如果`/usr/lib/myLib.so`链接到其他库，我希望所有涉及的库都重新定位在相对路径中，以便`../myLib.so`可以从相对路径完全工作。

如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:35:18.247

您可以在二进制文件中包含运行时搜索路径信息，使用`-rpath`链接器的选项（作为`-Wl,-rpath,`.

请注意，发行版维护人员通常不赞成这样做，因为应该有一个单一的系统范围的库搜索路径，以便及早发现冲突。

# c# - MVC RouteUrl 性能与约束中的数据库查找

> ID：13421284
> 
> 赞同：0
> 
> 时间：2012-11-16T17:13:57.247
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我们的 MVC3 路由引擎有几个条目，它们有一个约束，涉及数据库查找来评估。例如：

```
 routes.MapRoute(
            "Product",
            "{manufacturer}/{partNumber}",
            new { controller = "Product", action = "Details", manufacturer = "" },
            new { manufacturer = new ManufacturerConstraint() }
        );
        routes.MapRoute(
            "Store",
            "{store}/{action}",
            new { controller = "Store", action = "Index" },
            new { store = new StoreConstraint() }
        ); 
```

where`ManufacturererConstraint()`涉及数据库查找，`StoreConstraint()`但不涉及。

我们`RouteUrl`用于生成类似于以下内容的链接：

```
RouteUrl("Product", new { manufacturer = product.Brand, partNumber = product.PartNumber }); 
```

三个问题由此而来：

1.  我们的使用会导致数据库查找吗？
2.  如果我为“Store”路由生成了一个路由，它是否还会在针对所有路由对其进行测试时生成一个查找？还是只对指定路线进行一次测试？
3.  如果它在这种用法中确实命中了数据库，有没有办法使用`RouteUrl`它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:49:32.130

> 我们的使用会导致数据库查找吗？

是的，如果将约束设置为在 UrlGeneration 上工作。`Url.RouteUrl`运行所有约束，就像`Url.Action`. 唯一的区别是您明确说明要使用哪个路由，而不是测试每条路由直到匹配。

> 如果我为“Store”路由生成了一个路由，它是否还会在针对所有路由对其进行测试时生成一个查找？还是只对指定路线进行一次测试？

我想我在上面回答了这个问题。

> 如果它在这种用法中确实命中了数据库，有没有办法使用不会的 RouteUrl？

设置约束，使其不在 UrlGeneration 上运行（使用`routeDirection`参数）。就个人而言，我会缓存查找数据。

# jquery - 如何动态设置跨度标签的标题属性

> ID：13421290
> 
> 赞同：6
> 
> 时间：2012-11-16T17:14:24.170
> 
> 标签：jquery, asp.net

我无法设置跨度标签的标题属性...我正在使用以下代码

```
 $('.className').find("span").attr("title",'Some_text'); 
```

它不工作...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-16T17:32:18.740

也许问题是您正在类中搜索 span 元素，这对您有用。

```
$('span.className').attr('title','New Title');​ 
```

在这里，您将标题应用于该类的所有 span 元素。

希望它可以帮助你。

[小提琴](http://jsfiddle.net/eddiarnoldo/yEyBd/)

# jquery - jQuery悬停功能超时

> ID：13421303
> 
> 赞同：4
> 
> 时间：2012-11-16T17:15:23.407
> 
> 标签：jquery, ios, hover

我目前正在使用下面的代码，当用户将鼠标悬停在图像上时，使用 jQuery 和悬停功能淡入“标题”元素。这在桌面浏览器上非常有效，但是在使用 iPad 等移动触摸设备进行测试时，需要用户点击图像以触发悬停功能，标题会按预期淡入，但在用户选择页面上的另一个对象之前保持活动状态。

我想知道一种简单的方法来修改我的 javascript 代码以检测移动触摸设备，然后在标题中添加某种排序或计时器，以便它在一段时间后自动淡出？

```
<!-- include jQuery library -->
<script type="text/javascript" src="./_js/jquery.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {

    //On mouse over those thumbnail
    $('.item-caption').hover(function() {

        //Display the caption
    $(this).find('.caption').stop(false,true).fadeIn(200);
    },
    function() {    

    //Hide the caption
    $(this).find('.caption').stop(false,true).fadeOut(600);
});

});
</script>

</head>
<body>

    <div class="item-caption"><a href="http://www.domain.com">
        <div class="caption">   
            <ul>
                <li><h2>TITLE</h2></li>
                <li><h3>Description</h3></li>
            </ul>       
        </div>
        <img src="./_img/example_image.jpg"></a>
    </div>

</body> 
```

任何想法，想法将不胜感激。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:27:07.677

您可以通过特征检测来检测触摸设备，然后通过延迟时间相应地调整您的行为`fadeOut()`：

```
$(document).ready(function() {

    function hasTouch() {
        try {
           document.createEvent("TouchEvent");
           return(true);
        } catch (e) {
           return(false);
        }    
    }
    var touchPresent = hasTouch();

    //On mouse over those thumbnail
    $('.item-caption').hover(function() {

        //Display the caption
        var caption = $(this).find('.caption');
        caption.stop(true, true).fadeIn(200);
        // on touch systems, fade out after a time delay
        if (touchPresent) {
            caption.delay(5000).fadeOut(600);
        }
    }, function() {    

        //Hide the caption
        $(this).find('.caption').stop(true, true).fadeOut(600);
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:33:19.530

您可以使用 navigator.userAgent.match 来检测移动设备，如下所示：

```
onMobile = false;
// Mobile device detect - terrible, yes, but whatever
if( navigator.userAgent.match(/Android/i) ||
navigator.userAgent.match(/webOS/i) ||
navigator.userAgent.match(/iPhone/i) ||
navigator.userAgent.match(/iPod/i) ||
navigator.userAgent.match(/iPad/i) ||
navigator.userAgent.match(/Blackberry/i)
){
onMobile = true;                   
} 
```

现在在您的 document.ready 或任何您想要的地方 - 检查 onMobile 是否为真，如果是，则执行您的操作。

# silverlight - 我可以在 Silveright 相对 URI 中使用查询字符串吗？如果是这样，怎么做？如果不是，为什么不呢？

> ID：13421304
> 
> 赞同：1
> 
> 时间：2012-11-16T17:15:25.437
> 
> 标签：silverlight, query-string, relative-url

我有一个 Silverlight 应用程序，我试图通过包含查询字符串的相对 URL 从服务器加载图像。具体来说，我正在访问一个名为 proxy.jsp 的代理页面，该页面采用参数“url”。我已验证我传递给 System.Uri 构造函数的字符串具有查询字符串，但似乎 Silverlight 正在剥离或忽略它。这是一些示例代码：

```
string proxyUrl = "../proxy.jsp?url=anything";
Uri uri = new Uri(proxyUrl, UriKind.Relative);
BitmapImage im = new BitmapImage(uri);
someSilverlightImage.Source = im; 
```

我知道我的基本 URL 是正确的，因为如果 url 参数为空，我的 proxy.jsp 将返回它返回的默认图像。为了好玩，我尝试使用 MessageBox 显示属性 uri.Query，并得到一个异常说 Query 属性仅支持 UriKind.Absolute。 *但是*，如果我显示`uri.ToString()`，我会得到我传入的完整 URL。

我的问题是：

1.  我的结论是否正确，默认情况下，Silverlight 在请求相对 URI 时会忽略查询字符串？
2.  如果是这样，我可以做任何配置来覆盖默认值吗？
3.  如果我不能覆盖默认值，那么对设计或实现问题的任何洞察会导致这种看似明显的遗漏吗？

谢谢！

# ruby-on-rails - 显示记录数的时间顺序

> ID：13421305
> 
> 赞同：0
> 
> 时间：2012-11-16T17:15:26.543
> 
> 标签：ruby-on-rails, controller, html-table

在rails中显示表记录列表时，我有一列显示每条记录的id（以便查看表中存在多少条记录）唯一的问题是例如如果记录号3被删除，那么id 也被删除（由于唯一性）。

在查看列表时，有没有办法可以列出 1、2、3、4、5 等，而不是显示 id？在一张桌子上？

这是我的桌子：

```
 <center>
  <p class="recordnumber"><%= pluralize(@ranches.size, 'Ranch') %> found<p>

  <%= render :partial => "shared/newlink" %>

  <table class="listing" summary="Ranches">
   <tr>
    <th>#</th>
    <th>Ranch Name</th>
    <th>Address</th>
    <th>Telephone</th>
    <th>Actions</th>
   </tr>
   <% @ranches.each do |ranch| %>
   <tr class="<%= cycle('odd', 'even') %>">
    <td><%= ranch.id %></td>
    <td><%= ranch.name %></td>
    <td><%= ranch.address_line_1 %>,</br><%= ranch.town_city %>,</br><%= ranch.postcode %></td>
    <td><%= ranch.telephone %></td>
    <td>
     <%= link_to("Edit", {:action => 'edit', :id => ranch.id}, :class => 'buttons') %>
     <%= link_to("Delete", {:action => 'delete', :id => ranch.id}, :class => 'buttons') %>
    </td>
    </tr>
   <% end %>
  </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:17:36.117

是的。替换`each`成`each_with_index`这样：

```
<% @ranches.each_with_index do |ranch, i| %>
   <tr class="<%= cycle('odd', 'even') %>">
    <td><%= i + 1 %></td>
    <td><%= ranch.name %></td>
.... 
```

存在是`i + 1`因为`each_with_index`从零开始。

# perl - 当我访问 Twitter 时 OAuth::Lite::Consumer 超时

> ID：13421307
> 
> 赞同：2
> 
> 时间：2012-11-16T17:15:32.663
> 
> 标签：perl, oauth

我正在使用 perl 5.16.2、OAuth::Lite(1.31) 编写 Web 服务。服务器是 CentOS release 6.3 (Final), 2.6.32-279.14.1.el6.x86_64。

问题是当我为 twitter oauth 请求令牌时，`OAuth::Lite get_request_token`阻止服务器执行 30 秒，有时返回正确响应，有时浏览器请求超时。

重现问题的最小代码如下，

```
use OAuth::Lite::Consumer;                                                            

my $consumer = OAuth::Lite::Consumer->new(                                      
  request_token_path => 'https://api.twitter.com/oauth/request_token',          
  consumer_key       => '[CONSUMER KEY]',                               
  consumer_secret    => '[CONSUMER SECRET]',            
  callback_url       => '[CALLBACK]',                    
);                                                                              

my $rtoken = $consumer->get_request_token(); 
```

将在 30 秒后返回。

我阅读了代码，并`my_readline`在 Net::HTTP::Methods 行 259-260 in Net::HTTP 6.05 中找出了该方法

```
die "read timeout" unless $self->can_read;
my $n = $self->sysread($_, 1024, length); 
```

阻止请求。`my_readline`试图阅读的标题是

```
HTTP/1.1 200 OK
Date: Fri, 16 Nov 2012 16:16:39 GMT
Status: 200 OK
X-MID: 266cca0268c8eb68e76eedda256c77829ea9b22e
X-Transaction: 784ff126dfead993
Tag: "382e5356bb65e976f6b117bacdfa05e4"
Cache-Control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0
X-Runtime: 0.02892
Pragma: no-cache
Expires: Tue, 31 Mar 1981 05:00:00 GMT
X-Frame-Options: SAMEORIGIN
Content-Type: text/html; charset=utf-8
Last-Modified: Fri, 16 Nov 2012 16:16:39 GMT
Set-Cookie: k=10.36.55.109.1353082599368934; path=/; expires=Fri, 23-Nov-12 16:16:39 GMT; domain=.twitter.com
Set-Cookie: guest_id=v1%3A135308259937793094; domain=.twitter.com; path=/; expires=Mon, 17-Nov-2014 04:16:39 GMT
Set-Cookie: _twitter_sess=BAh7CCIKZmxhc2hJQzonQWN0aW9uQ29udHJvbGxlcjo6Rmxhc2g6OkZsYXNo%250ASGFzaHsABjoKQHVzZWR7ADoHaWQiJTJlZGJiN2MyOTMyNmM0OGY0MjJmZmY0%250AMTU3YzllYTI0Og9jcmVhdGVkX2F0bCsI0vcBCjsB--21ab24a6dd6596b1dcc78651c0b6a4836b320621; domain=.twitter.com; path=/; HttpOnly
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 150
Server: tfe 
```

此标头超过 1024 个字符。所以我将 1024 更改为 2048，它开始工作正常......我想弄清楚这个问题的原因。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:40:37.643

多年前，我在使用 LWP::Protocol::https（也被 OAuth::Lite 使用）时有过糟糕的体验，尤其是在 CentOS 上。长话短说：试图在那个平台上编译 Net::SSLeay 太沮丧了，导致我用 WWW::Curl 替换了 LWP::UserAgent。编译得很好。并且非常适合那个简单的应用程序。然而，OAuth::Lite 与 LWP 紧密耦合，重新实现一切毫无意义。还有另一种将 libcurl 与基于 LWP 的代码一起使用的方法：http: [//blogs.perl.org/users/stas/2012/11/libcurl-as-lwp-backend-or-all-your-protocol-are-属于我们.html](http://blogs.perl.org/users/stas/2012/11/libcurl-as-lwp-backend-or-all-your-protocol-are-belong-to-us.html)

# dynamics-crm - 有没有办法重新排序 Microsoft Dynamics CRM 2011 工作流中的步骤？

> ID：13421308
> 
> 赞同：7
> 
> 时间：2012-11-16T17:15:36.333
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在 Microsoft Dynamics CRM 2011 中创建工作流。我有一个步骤，然后有几个条件。我不小心把应该在第三个条件下的台阶和主台阶放在了同一层。有没有办法在不删除和重新创建步骤的情况下将步骤向上移动到主要步骤条件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T11:54:34.597

简短的回答是否定的，因为基于浏览器的设计器非常有限。如果您认为重新创建错误步骤所涉及的工作量很大，则稍长一点的答案是肯定的。

您可以通过解决方案导出导出工作流并直接编辑 XAML，然后重新导入。XAML 工作流是一种受支持的创建工作流的方法，并且在 Visual Studio 2010 中提供工具支持（CRM 2011 工作流是本机 WF4）。SDK 可以提供更多信息。

但是，一旦执行此操作，您就无法在 Web 设计器界面中重新加载工作流。您将始终必须将其导出/编辑为 XAML 工作流。最后，您只能在本地执行此操作，因为 CRM Online 目前不支持 XAML 工作流。

如果您确实选择坚持使用基于浏览器的设计器，请始终通过解决方案导出定期导出工作流以防止出现此问题。我很欣赏您目前的情况，这种说法基本上没有用，但值得重申。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T00:51:12.393

不，但是如果在错误位置的步骤在工作流的末尾是正确的，您可以通过在它们上方插入反向条件来停止工作流来作弊。所以如果你想要：

```
If foo = bar
   Do Stuff (several steps) 
```

但你有：

```
If foo = bar
   <no steps here>
Do stuff (not inside the condition). 
```

然后用相反的条件替换该条件并停止

```
If foo != bar
   Stop Workflow
Do stuff (not inside the condition, and no explicit "otherwise" (else) needed. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T08:22:16.040

有一个第 3 方工具可用于使本地工作流程的编辑更加灵活和宽容。我将它作为测试版玩过，它按照它所说的做了。用户界面中有一些怪癖，但与您描述的不得不洗牌的痛苦相比，这没什么。我已经有一段时间没有看它了，所以这些怪癖可能已经解决了。如果没有，它仍然值得一看。

[http://www.teamknowledge.co.uk/tk-process-builder.php](http://www.teamknowledge.co.uk/tk-process-builder.php)

# sql - 使用 UTF-8 创建表时出错

> ID：13421309
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:15:38.720
> 
> 标签：sql, sqlite

我的代码正是“line.sql”中的代码

```
CREATE TABLE haltestellen (
id integer primary key autoincrement,
name varchar(64)
); 
```

当我打开 sqlite3.exe 并输入“.read line.sql”时，我得到了这个：

[截屏](http://www.pictureshack.us/images/89291_error.png)

很奇怪..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:17:36.407

查询本身有效。请参阅[此 SQLFiddle 示例](http://sqlfiddle.com/#!7/1ac10)。您的文件开头可能有一个不可见的特殊字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:33:10.557

看起来像 Unicode 字节顺序标记。检查文本编辑器中的选项以保存不带字节顺序标记的文件，或以不同的编码保存文件。

# c# - 从 2 个不同的页面导航到同一个页面都传递参数

> ID：13421311
> 
> 赞同：0
> 
> 时间：2012-11-16T17:15:52.427
> 
> 标签：c#, silverlight, windows-phone-7

我想从 2 个不同的页面 p2 和 p3 导航到页面 p1。p2 和 p3 页都将参数传递给 p1 页。这是页面p2和p3的按钮代码

第 p2 页：

```
private void button1_Click_1(object sender, RoutedEventArgs e)
{
    ListBoxItem l = (ListBoxItem)listBox1.SelectedItem;
    string s = (string)l.Content;
    NavigationService.Navigate(new Uri("/Page1.xaml?ok=" + s, UriKind.RelativeOrAbsolute));
} 
```

第 3 页：

```
private void button1_Click_1(object sender, RoutedEventArgs e)
{
    ListBoxItem l = (ListBoxItem)listBox1.SelectedItem;
    string s = (string)l.Content;
    NavigationService.Navigate(new Uri("/Page1.xaml?ko=" + s, UriKind.RelativeOrAbsolute));
} 
```

我想知道 p1 页中 OnNavigatedTo 函数的代码，以便它可以接收两个参数并将它们显示在 2 个不同的文本块中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:30:54.423

由于您的参数名称不同，因此查询每个参数都不是什么大问题。

```
string ok = string.Empty;
NavigationContext.QueryString.TryGetValue("ok", out ok);

string ko = string.Empty;
NavigationContext.QueryString.TryGetValue("ko", out ko); 
```

# php - 查找定义了对象方法的 PHP 文件（在运行时）

> ID：13421317
> 
> 赞同：0
> 
> 时间：2012-11-16T17:16:26.063
> 
> 标签：php, method-declaration

这个问题类似于[Find the PHP File (at run time) where a Class is Defined](https://stackoverflow.com/questions/2420066/finding-the-php-file-at-run-time-where-a-class-was-defined/2420104#2420104)

我可以找到定义对象的文件：

```
$reflector = new ReflectionClass(get_class($object));
echo $reflector->getFileName(); 
```

但是，我需要找到方法，例如： $object->method() 定义在 /var/www/html/object.php 行 201

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:40:39.760

我的第一个猜测是读取 php 文件并找到声明使用一些正则表达式的行：

```
function getLineWhereMethodIsDefined($object, $method_name) {
    $class_name = get_class($object);
    $reflector = new ReflectionClass($class_name);
    $file_name = $reflector->getFileName();
    foreach (file($file_name) as $i => $line) {
        if (preg_match("'function\s+ " . $method_name . "\('s")) {
            $text = $class_name."::".$method_name."()";
            $text .= " is defined in ".$file_name." on line ".($i + 1);
            return $text;
        }
    }
    return false;
} 
```

这可以在内存使用方面得到改善，因为`file()`将整个文件读入内存，因此`while(false !== gets()) { }`如果您有大文件要解析，那么内存效率会更高。

**注意：**根据[ReflectionClass](http://php.net/manual/en/class.reflectionclass.php)文档，您可以获得的关于类中方法的唯一信息是[ReflectionMethod](http://www.php.net/manual/en/class.reflectionmethod.php)对象，它们没有关于方法声明位置的信息。因此，上述解决方案似乎是恕我直言的唯一方法。

# c# - 如何使用 XmlLayoutSchemaLog4j 布局在 Log4Net 中记录 throwable？

> ID：13421325
> 
> 赞同：1
> 
> 时间：2012-11-16T17:17:13.290
> 
> 标签：c#, log4net, log4net-configuration

我的 Log4Net 配置如下所示：

```
 <appender name="MainLogFileAppender" type="log4net.Appender.RollingFileAppender">
    <param name="File" value="${log4net_log_file_name}"/>
    <param name="AppendToFile" value="true"/>
    <rollingStyle value="Size"/>
    <maxSizeRollBackups value="1"/>
    <maximumFileSize value="1MB"/>
    <staticLogFileName value="true"/>
    <layout type="log4net.Layout.XmlLayoutSchemaLog4j">
      <locationInfo value="true" />
    </layout>
  </appender>

  <appender name="MemoryAppender" type="log4net.Appender.MemoryAppender" >
    <onlyFixPartialEventData value="true" />
  </appender>
</log4net> 
```

我们正在记录异常，如下所示：

```
 private readonly ILog _log = LogManager.GetLogger(typeof(LastChanceHandler));

        private void LogException(Exception ex)
        {
            _log.Fatal("Unhandled exception", ex);
        } 
```

当我们记录错误时，我从未在日志中看到 Throwable 节点。使用当前布局是因为我们将 XML 转换为 DTO 并将它们显示在 UI 中。

我没有找到任何东西来解释为什么 Throwable 没有被设置并存储在日志中。有什么想法（我正在考虑让我的开发盒可扔掉。窗外）？

这是我的日志中的一个错误：

```
<log4j:event logger="Hsbc.Ice.Shell.ViewModels.ShellViewModel" timestamp="1353076754456" level="ERROR" thread="1"><log4j:message>14 modules did not terminated in a timely manner : TradingCockpitModule,AuthenticationModule,ConfigurationModule,EntitlementsModule,Hsbc.Ice.CreditServices,EncryptionModule,ReportsModule,DiagnosticsModule,InterProcessCommunication,Layout,Logging,PersistenceModule,StorageModule,ICEExplorerManagerServiceModule</log4j:message><log4j:properties><log4j:data name="log4net:UserName" value="HBEU\steveget" /><log4j:data name="log4net:Identity" value="HBEU\steveget" /><log4j:data name="log4jmachinename" value="E8262XDZW4LZKEC" /><log4j:data name="log4japp" value="Hsbc.Ice.Shell.exe" /><log4j:data name="log4net:HostName" value="E8262XDZW4LZKEC" /></log4j:properties><log4j:locationInfo class="Hsbc.Ice.Shell.ViewModels.ShellViewModel" method="&lt;.ctor&gt;b__3" file="d:\CreditFlow\Tools\Hudson\data\jobs\Credit Shell\workspace\src\Shell\Hsbc.Ice.Shell\ViewModels\ShellViewModel.cs" line="107" /></log4j:event> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:30:10.970

从[log4j 文档](http://logging.apache.org/log4j/companions/extras/apidocs/org/apache/log4j/EnhancedPatternLayout.html)：

> throwable：用于输出已绑定到 LoggingEvent 的 Throwable 跟踪，默认情况下，这将输出完整的跟踪，正如通常通过调用 Throwable.printStackTrace() 找到的那样。

Throwable 是[一个 Java 类](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html)，因此在 .Net 中不可用：也许可以替换异常堆栈跟踪，但尚未实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:34:00.273

只需更换；

```
 private void LogException(Exception ex)
    {
        _log.Fatal("Unhandled exception", ex);
    } 
```

和;

```
 private void LogException(Exception ex)
    {
        _log.Fatal("Unhandled exception:" + ex.ToString(), ex);
    } 
```

您也可以使用`ex.StackTrace()`来获取信息。

如果您想要 .NET 中的整个堆栈跟踪

.NET 中没有可抛出的配置（或者至少我在文档中找不到任何关于它的内容），搜索只会产生有意义的 Java 结果，因为`throwable`在 C# 中没有像 Java 中那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:49:41.767

看完答案后，我决定根据上面 Stuart Dunkeld 的答案尝试一些东西（授予他答案，为了完整起见，我把它放在这里）。

基本上，我创建了一个自定义布局，它继承并覆盖了现有的布局 xml 格式化程序：

覆盖方法中的重要一点是：

```
 if (exceptionString!=null && !string.IsNullOrEmpty(exceptionString.StackTrace))
    {
        writer.WriteStartElement("log4j:throwable");
        Transform.WriteEscapedXmlString(writer, exceptionString.StackTrace, InvalidCharReplacement);
        writer.WriteEndElement();
    } 
```

为了完整起见，这是整个课程。这使我们能够捕获错误的堆栈跟踪以及它的消息：

```
 public class Log4NetErrorLogger : XmlLayoutSchemaLog4j
    {
        private static readonly DateTime Date1970 = new DateTime(1970, 1, 1);
        protected override void FormatXml(XmlWriter writer, LoggingEvent loggingEvent)
        {
            if (loggingEvent.LookupProperty("log4net:HostName") != null &&
                loggingEvent.LookupProperty("log4jmachinename") == null)
            {
                loggingEvent.GetProperties()["log4jmachinename"] = loggingEvent.LookupProperty("log4net:HostName");
            }
            if (loggingEvent.LookupProperty("log4japp") == null && !string.IsNullOrEmpty(loggingEvent.Domain))
            {
                loggingEvent.GetProperties()["log4japp"] = loggingEvent.Domain;
            }
            if (!string.IsNullOrEmpty(loggingEvent.Identity) &&
                loggingEvent.LookupProperty("log4net:Identity") == null)
            {
                loggingEvent.GetProperties()["log4net:Identity"] = loggingEvent.Identity;
            }
            if (!string.IsNullOrEmpty(loggingEvent.UserName) &&
                loggingEvent.LookupProperty("log4net:UserName") == null)
            {
                loggingEvent.GetProperties()["log4net:UserName"] = loggingEvent.UserName;
            }
            writer.WriteStartElement("log4j:event");
            writer.WriteAttributeString("logger", loggingEvent.LoggerName);
            writer.WriteAttributeString("timestamp",
                                        XmlConvert.ToString(
                                            (long)
                                            (loggingEvent.TimeStamp.ToUniversalTime() - Date1970)
                                                .TotalMilliseconds));
            writer.WriteAttributeString("level", loggingEvent.Level.DisplayName);
            writer.WriteAttributeString("thread", loggingEvent.ThreadName);
            writer.WriteStartElement("log4j:message");
            Transform.WriteEscapedXmlString(writer, loggingEvent.RenderedMessage, InvalidCharReplacement);
            writer.WriteEndElement();
            object obj = loggingEvent.LookupProperty("NDC");
            if (obj != null)
            {
                string text = loggingEvent.Repository.RendererMap.FindAndRender(obj);
                if (!string.IsNullOrEmpty(text))
                {
                    writer.WriteStartElement("log4j:NDC");
                    Transform.WriteEscapedXmlString(writer, text, InvalidCharReplacement);
                    writer.WriteEndElement();
                }
            }
            PropertiesDictionary properties = loggingEvent.GetProperties();
            if (properties.Count > 0)
            {
                writer.WriteStartElement("log4j:properties");
                foreach (DictionaryEntry dictionaryEntry in properties)
                {
                    writer.WriteStartElement("log4j:data");
                    writer.WriteAttributeString("name", (string) dictionaryEntry.Key);
                    string text = loggingEvent.Repository.RendererMap.FindAndRender(dictionaryEntry.Value);
                    writer.WriteAttributeString("value", text);
                    writer.WriteEndElement();
                }
                writer.WriteEndElement();
            }
            var exceptionString = loggingEvent.ExceptionObject;
            if (exceptionString!=null && !string.IsNullOrEmpty(exceptionString.StackTrace))
            {
                writer.WriteStartElement("log4j:throwable");
                Transform.WriteEscapedXmlString(writer, exceptionString.StackTrace, InvalidCharReplacement);
                writer.WriteEndElement();
            }
            if (LocationInfo)
            {
                LocationInfo locationInformation = loggingEvent.LocationInformation;
                writer.WriteStartElement("log4j:locationInfo");
                writer.WriteAttributeString("class", locationInformation.ClassName);
                writer.WriteAttributeString("method", locationInformation.MethodName);
                writer.WriteAttributeString("file", locationInformation.FileName);
                writer.WriteAttributeString("line", locationInformation.LineNumber);
                writer.WriteEndElement();
            }
            writer.WriteEndElement();
        }
    } 
```

# python - 为什么 Pypy 的双端队列这么慢？

> ID：13421326
> 
> 赞同：12
> 
> 时间：2012-11-16T17:17:15.070
> 
> 标签：python, deque, pypy

[这是对Project Euler Problem 49](http://projecteuler.net/problem=49)的一次（略显凌乱的）尝试。

我应该直截了当地说，这`deque`不是一个好的选择！我的想法是缩小质数集以测试成员资格会导致循环加速。然而，当我意识到我应该使用 a `set`（而不用担心删除元素）时，我得到了 60 倍的加速。

```
from collections import deque
from itertools import permutations
from .sieve import sieve_of_erastothenes  # my own implementation of the Sieve of Erastothenes

primes = deque(prime for prime in sieve_of_erastothenes(10000) if prime > 1000 and prime != 1487)  # all four-digit primes except 1487
try:
    while True:
        prime = primes.popleft()  # decrease the length of primes each time to speed up membership test
        for inc in xrange(1,10000 + 1 - (2 * prime)):  # this limit ensures we don't end up with results > 10000
            inc1 = prime + inc
            inc2 = prime + 2*inc

            if inc1 in primes and inc2 in primes:
                primestr = str(prime)
                perms = set(''.join(tup) for tup in permutations(primestr))  # because permutations() returns tuples
                inc1str = str(inc1)
                inc2str = str(inc2)
                if inc1str in perms and inc2str in perms:
                    print primestr + inc1str + inc2str
                    raise IOError  # I chose IOError because it's unlikely to be raised
                                   # by anything else in the block. Exceptions are an easy
                                   # way to break out of nested loops.
except IOError:
    pass 
```

无论如何，在我想使用 a 之前`set`，我在 Pypy 中进行了尝试。我发现结果相当令人惊讶：

```
$ time python "problem49-deque.py"
296962999629

real    1m3.429s
user    0m49.779s
sys 0m0.335s

$ time pypy-c "problem49-deque.py"
296962999629

real    5m52.736s
user    5m15.608s
sys 0m1.509s 
```

为什么 Pypy 在这段代码上要慢五倍以上？我猜 Pypy 的版本`deque`是罪魁祸首（因为它在`set`版本上运行得更快），但我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-16T17:48:37.263

缓慢的部分是`inc1 in primes and inc2 in primes`。我会看看为什么 PyPy 这么慢（基本上感谢性能错误报告）。请注意，正如您所提到的，代码可以变得非常快（在 PyPy 和 CPython 上）——在这种情况下，只需在循环`primes`之前将双端队列复制到一个集合中。`for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:21:41.540

您应该期望双端队列中的成员资格测试（具有 python 性能特征）会很慢，因为列表中的任何成员资格测试都涉及线性扫描。相比之下，set 是针对成员资格测试优化的数据结构。从这个意义上说，这里没有错误。

# google-chrome - 即使我将它编译为 js，我的 Dart 项目也不起作用。它仅适用于 dartium

> ID：13421328
> 
> 赞同：1
> 
> 时间：2012-11-16T17:17:21.313
> 
> 标签：google-chrome, dart, dartium

我正在使用画布在 dart 中编写一个基本应用程序，它基本上有 2 个正方形，其中一个从屏幕的右到左移动，第二个在用户按下箭头键时移动。

现在的问题是，当我在 Dartium 中尝试它时，它工作正常。但如果我尝试在 Chrome/Firefox 中打开它，我只能看到一个空矩形。

Dart 编辑器不会显示任何错误，即使我将其编译为 javascript 代码也是如此。

但是当我查看 Chrome 的 Inspect 元素的控制台时，会出现该错误消息：

```
Uncaught TypeError: Object [object Window] has no method 'webkitRequestAnimationFrame$1' 
```

对该方法的调用在这里：

```
 void main() { 
  var maincharacter = new Player(10,10, 70, 70, "red");
  var secondCharacter = new Player(400,250, 50,50, "yellow");
  player = maincharacter;

  sprites = new Set();
  randomnumbergenerator = new Random();
  window.on.keyDown.add(myKeyDownEvent);
  CanvasElement element = query("canvas");  
  context = element.context2d;
  maincharacter.context = context;
  secondCharacter.context = context;
  maincharacter.type = 'player';
  sprites.add(maincharacter);
  sprites.add(secondCharacter);  
  window.webkitRequestAnimationFrame(animate);   
} 
```

和这里：

```
void animate(num time){
  enemyCreator(time);
  context.clearRect(0,0,400,400);  
  for(final sprite in sprites){
    if(!sprite.isPlayer()) {
      sprite.move(5, 0);
      // sprite.isOutside(0);
      if(!(sprite.posx<0)){ 
        query('#text').text = " Posx: ${sprite.posx.toString()} Length: ${sprites.length}";
        sprite.draw();
      } else {
        query('#text').text = "Destroyed";
        sprites.remove(sprite);
      }      
    } else {
      sprite.draw();
      query('#text').text = " Time: $counter Length: ${sprites.length}";
    }
  }
  window.webkitRequestAnimationFrame(animate);  
} 
```

这是引发异常的 javascript 行：

```
 $.window().webkitRequestAnimationFrame$1($.animate) 
```

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:15:23.893

该方法`requestAnimationFrame()`不在`webkitRequestAnimationFrame()`Dart 中调用：http: [//api.dartlang.org/docs/bleeding_edge/dart_html/LocalWindow.html#requestAnimationFrame](http://api.dartlang.org/docs/bleeding_edge/dart_html/LocalWindow.html#requestAnimationFrame)

> int requestAnimationFrame(RequestAnimationFrameCallback 回调)

正如约翰所说，尝试：

```
window.requestAnimationFrame(animate); 
```

您可能将 Dart 的方法与“本机”DOM 方法混淆了

> Window.prototype.webkitRequestAnimationFrame

在 Dart 中，您没有指定该前缀。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T21:02:33.440

尝试

```
window.requestAnimationFrame(animate); 
```

反而。

# algorithm - Expression from an array of numbers

> ID：13421332
> 
> 赞同：1
> 
> 时间：2012-11-16T17:17:35.337
> 
> 标签：algorithm, math, data-structures, np, np-hard

You are given three things

1) An array of 'n' positive and negative integers. 2) A number 'x'. 3) Operators : '+', '-', '%', '/'

Form an expression with the array such that when you evaluate it, the result becomes 'x'.

For example, consider the array [5,3,-1,6,2,3] and x=2, one possible solution would be

5 / 3 + (-1) + 6 / 2 - 1

Assume the result of 5 / 3 is 1(Always the integer division).

I have one more complex variant of this.

In the complex variant of this problem, assume that BODMASS rule don't apply. So, at any point of time you traversed through elements 'm' and you have the intermediate result 'y'. You can apply any of the operators to the 'y' and a[m + 1].

For example, in the variant 1,

5 + 3 - 2 / 2 = 7 ( 2 / 2 evaluated first, so 5 + 3 - 1)

in the variant 2,

5 + 3 - 2 / 2 = 3 (5 + 3 = 8\. The array reduced to 8 - 2 / 2\. Now, 8 -2 = 6\. And array reduced to 6 / 2 which evaluate to 3).

Algo/Math/DS experts?

Is this a NP hard?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:52:19.657

There are 4 operators, so you have 4^(n-1) possible values for a set of n terms. You can construct a graph of the search space where each path represents a set of operator values and the end point is the result of the calculation.

Of all those end points, only those which give the correct answer will end at the correct end point.

Note, however, that if you start with the end point, you can traverse backward; only if you have a valid set of operators will you end on the first value.

So traverse it from both ends, and the two calculations will meet in the middle. This is a much smaller space, of 4^(n/2) = 2^n from each direction. To match the two sets of answers you will need to sort the lists you get in the middle, although you may prefer to do this at every step to permit you to prevent duplicate paths being followed. At this point it looks much like a maze traversal.

One known NP-complete problem is that of [Boolean satisfiability](http://en.wikipedia.org/wiki/Boolean_satisfiability_problem), which is "the problem of determining if the variables of a given Boolean formula can be assigned in such a way as to make the formula evaluate to TRUE". I suspect that since the search space is demonstrably larger than that of a the boolean satisfiability problem, and that since a solution would also determine that a formula was satisfiable (and is thus at least as hard as solving the satisfiability), then the problem should be NP-complete.

In the maze sense, partial solutions whose values diverge from zero would be less likely to be the correct solution, and given an initial sweep of the parameters it should be clear what limits there are to size (i.e. all multiplies), which is not the case in the boolean problem.

Edit: To clarify the tree I mentioned at the beginning. Suppose our list is

```
 1 ? 2 ? 5 = X 
```

Then the graph is something like this:

```
 r1 -->  r2  ---> r3 (X)

 1  +2    3  +5    8
             -5   -2
             *5   15
             /5    0

    -2   -1  +5    4
             -5   -6
             *5   -5
             /5    0

    *2    2  +5    7
             -5   -3
             *5   10
             /5    0

    /2    0  +5    5
             -5   -5
             *5    0
             /5    0 
```

As you can see, if X is -5, then it could be 1 -2 *5 or 1 /2 -5\. Working backwards, from -5:

```
-5 +5    0
   -5  -10
   *5  -25
   /5   -1 
```

So if we had stepped from each end, we'd be at the middle column and the only common values would be -1 and 0, yielding the two paths with 8 calculations rather than the 16 going in one direction only.

A point that this raises, which I had missed, is that the integer division is not a 1:1 mapping, so stepping backward is ambiguous; -4/5 -> 0, -3/5 -> 0 etc up to 4/5 -> 0\. 0 is the worst case because it is approached from either side of 0, but even 20/10 to 29/10 all map to the same value, 2\. This is quite a hurdle; it raises the number of possible nodes when stepping backwards by the size of the number being divided, so for a 5, there are 3+5 = 8 possible states rather than 4.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:59:19.887

Here's an attempt at a recursive solution (for the simple version):

```
Gen {'x'} = {'x'}
Gen {'x', 'y'} = {'x + y', 'x - y', 'y - x', 'x / y', 'y / x', 'x % y', 'y % x'}
S0 = {a[0]}
Gen S(i + 1) = {j ∈ S(i) | Gen {j, a[i + 1]}} 
```

Final answer would be: `∃ j ∈ S(n). x = [[ j ]]`

That is, we incrementally build all the possible **values** (as expressions) and then finally evaluate all of them to see if one of them can produce `x` (evaluation can be done incrementally as well).

However, here I'm assuming that the values from `a` are used linearly when building the expression. Which I realized is not the case with your problem...

# python - 设计模式/ OOP：如何将操作拆分为类

> ID：13421337
> 
> 赞同：0
> 
> 时间：2012-11-16T17:17:59.637
> 
> 标签：python, oop, design-patterns, selenium, pageobjects

我正在使用 python Page Object 进行自动化。我有一个 basePageObject(ChangePasswordPage)，它还有 4 个其他子页面，它们的不同之处在于页面上的字段。所有这些更改密码页面都在同一个 URL 上运行，但它们因字段而异，这取决于用例。例如一个有，旧密码字段，另一个没有，还有一个带有安全问题和答案之类的。这就是为什么我为所有这些变体创建了不同的子类。

现在我的问题是，我必须编写一个操作，递归地尝试使用给定的密码集更改密码。我不能在子更改密码页面中编写该操作，因为该递归操作需要子类的“changePassword”操作。此外，每个子类的这种递归操作是不同的。所有子类的情况都不一样。那么哪种模式最适合这种情况。我在哪里编写这个新的递归操作，如何创建新类以及如何应用 OOP 原则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:16:04.560

It's a general question, but I think you can try the [Strategy Pattern](http://en.wikipedia.org/wiki/Strategy_pattern). You write the methods needed for the "change password" use cases and keep them abstract in the `basePageObject`. In all the `ChangePasswordPageObject` you implement a concrete password-changing method.
So you have basically the same method call in all cases but it performs different actions depending on the use case/password page.

# php - 按计数顺序对数组desc进行排序php

> ID：13421338
> 
> 赞同：-2
> 
> 时间：2012-11-16T17:18:06.653
> 
> 标签：php, arrays, sorting, multidimensional-array

按键的数量对数组进行排序。

```
<?php
$key_a='a';
$key_b='b';
$key_c='c';

$myarray[$key_a][]='1';
$myarray[$key_a][]='2';
$myarray[$key_a][]='3';

$myarray[$key_b][]='2';
$myarray[$key_b][]='2';

$myarray[$key_c][]='a';
?> 
```

我想最终得到以下数组：

```
<?php
$myarray[$key_a][]='1';
$myarray[$key_a][]='2';
$myarray[$key_a][]='3'; //$key_a with 3 values

$myarray[$key_b][]='2';
$myarray[$key_b][]='2'; //$key_b with 2 values

$myarray[$key_c][]='a'; //$key_c with 1 value
?> 
```

需要一个自定义函数来获取按最高值排序的新数组吗？

此外 - 如果总键/值的数量匹配，我想使用 $key_a、$key_b 和 $key_c 对它们进行排序 - 在这种情况下，如果 $key_b 数组有 3 个值，则 $key_a 声明为如果对 alpha 进行排序，'a' 将首先出现在新数组中。但它会是数字，如果两个子数组具有相同数量的键，那么它们最好按数字键排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:19:43.880

```
uksort($myarray, function ($a, $b) use ($myarray) {
    $valDiff = count($myarray[$a]) - count($myarray[$b]);

    if ($valDiff != 0) {
        return $valDiff;
    } else {
        return strcmp($a, $b);
    }
}); 
```

[http://php.net/uksort](http://php.net/uksort)

# java - Phonegap 2.2 升级：在 NPObject（Javascript 接口）上调用方法出错

> ID：13421342
> 
> 赞同：0
> 
> 时间：2012-11-16T17:18:18.500
> 
> 标签：java, android, cordova

我正在开发一个 Phonegap 应用程序（在 Android 上），我用 Phonegap 2.2 更新了我的应用程序。不幸的是，现在我在使用 Javascript 接口时遇到错误。

```
Uncaught Error: Error calling method on NPObject. at file:///android_asset/www/dossier_med_list.html#/android_asset/www/dossier_med_new.html:22 
```

使用 Javascript 接口函数时发生错误：

```
var tel = window.language_classe.getSystemPhoneNumber() ; 
```

这就是类的制作方式：

```
import org.apache.cordova.DroidGap;

import android.content.Context;
import android.telephony.TelephonyManager;
import android.webkit.WebView;

public class LanguageClass {
    private WebView mAppView;
    private DroidGap mGap;
    private Context mContext;

    public LanguageClass( DroidGap gap, WebView view, Context context) {
        mAppView = view;
        mGap = gap;
        mContext = context;

    }

    public String getSystemPhoneNumber() {
        TelephonyManager tMgr = (TelephonyManager) mContext.getSystemService(Context.TELEPHONY_SERVICE);
        return tMgr.getLine1Number();
    }

} 
```

这就是我初始化我的应用程序的方式：

```
 public class App extends DroidGap
   {
    private LanguageClass language;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.init();
        language = new LanguageClass(this, appView, this.getBaseContext());
        appView.addJavascriptInterface(language, "language_classe");

        super.setIntegerProperty("loadUrlTimeoutValue", 60000);
        super.setIntegerProperty("splashscreen", R.drawable.splash);
        super.loadUrl("file:///android_asset/www/accueil.html", 150000);
    }

} 
```

任何线索为什么会发生这种情况？我在文档中没有看到任何关于此问题的内容，并且在更新到 Phonegap 2.2.0 时我没有更改此功能的任何内容。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:07:31.990

你真的应该让 LanguageClass 从 PhoneGap 扩展 Plugin 类。这样你就可以避免这些奇怪的问题。

我在您的 App 类中看到的是您调用没有参数的 LanguageClass() 构造函数，但在您的 LanguageClass 类中没有相应的构造函数。

# php - Facebook 分享按钮和 ajax 生成的内容

> ID：13421344
> 
> 赞同：0
> 
> 时间：2012-11-16T17:18:35.800
> 
> 标签：php, jquery, ajax, facebook, dom

好吧，我有点迷路了。我正在尝试在 Facebook 上分享一个图片库页面。我有一个独特的 url，它可以告诉画廊哪个缩略图是当前的，它会正确加载图像。这个唯一的 URL 会提示一个 ajax 脚本来显示所有必要的 HTML。

问题是，当 Facebook 扫描 HTML 以确定要用于我的直播的照片时，它一无所获，它只看到了一些 javascript，仅此而已。

不幸的是，除了与此问题无关的简单设置之外，我没有任何访问权限或修改此页面上任何内容的能力。虽然我可以使用我上传的任何 PHP 页面在此服务器上运行 PHP。如果我检查浏览器上的元素，我能做些什么来帮助 Facebook 了解正在共享的页面并以几乎相同的方式查看 HTML？

我想到了一个 PHP 脚本，它可以筛选 HTML，但我什至不知道这是否可行。想法？建议？我应该认输吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:22:56.693

我不确定我是否完全理解您想要的内容，但是如果您想在使用 ajax 加载页面后解析 facebook 元素，这可能会对您有所帮助：

> [https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

# iphone - iAd Testads 仅在 iPhone4 上显示，从不在 iPad 和 iPhone3GS 上显示

> ID：13421347
> 
> 赞同：1
> 
> 时间：2012-11-16T17:18:41.273
> 
> 标签：iphone, ios, xamarin.ios, iad, ad-hoc-distribution

我对有关 Betatest 的 iAds 库有疑问。

首先。我使用 Monotouch，该应用程序是为 iPhone 构建的。所有测试均在运行 iOS6 的设备上完成。

这些设备是 iPad2,3、iPhone3GS 和 2xiPhone4

问题是 AdBannerView 测试广告只出现在 2 部 iPhone4 上。但也适用于 iPhone 模拟器（视网膜和非视网膜）

所以 iPad 和 Iphone3GS 没有显示广告。

由于这不是 iPad 应用程序，因此广告无法在 iPad 上运行可能存在一些逻辑。尽管我会说这很奇怪，因为您可以在 iPad 上安装 iPhone 应用程序。

但更奇怪的是它在 iPhone3GS 上不起作用。

我可以发布一些代码，但我觉得问题与设置有关。即我见过的很多地方我必须使用 iTunes Connect 在我的应用程序中启用 iAds。但据我所知，这只是在我发布应用程序时。

有没有人知道为什么会发生这种情况？

它只会发生在 TestAds 上吗？

顺便说一句：这个人有一个类似的问题，尽管他没有提到他是否谈论 TestAds [iAD 仅在某些设备上工作](https://stackoverflow.com/questions/9700796/iad-working-only-on-some-devices) 但他的问题没有得到回答。

BTW2：我住在一个不支持 iAd 的国家。但据我所知，这不应该是关于 TestAds 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:36:31.333

首先确保您的所有设备都启用了开发。

接下来，比较您的设备设置，哪些是*有效*的，哪些是**无效**的。你会发现这个：

**设置 > 开发者 > iAd 开发者应用测试**

# plot - 在 Mathemaitca 中将网格线添加到输出图中

> ID：13421349
> 
> 赞同：3
> 
> 时间：2012-11-16T17:18:48.290
> 
> 标签：plot, wolfram-mathematica

我正在尝试将网格线添加到 Mathematica 中的输出密度图。该图是通过 Mathematica 中的长时间计算生成的，当我绘制该图时，我忘记添加 Mesh->True 选项。我不想进行所有计算并再次生成绘图，因为它需要很长时间。是否可以仅使用手头的输出图添加网格线或网格线来绘制？

例如，如果我有一个情节 p。是否可以添加网格线仅操作 p？

在普通的一维图中，这将起作用

```
p1 = Plot[Sin[x], {x, -3, 3}];

Insert[p1, GridLines -> Automatic, -1] 
```

![在此处输入图像描述](../Images/47dcee043ec000e5d30facf82e593009.png)

但是当我尝试密度图时，似乎网格线总是在图下方，并且只能在图像边缘区域看到。

```
p2 = DensityPlot[Sin[x + y^2], {x, -3, 3}, {y, -2, 2}, PlotRangePadding -> 0.2];
Insert[p2, GridLines -> Automatic, -1] 
```

![在此处输入图像描述](../Images/ae8591b997af3d9e15d0b987f43e1b14.png)

**更新数据**

输出图上的 Mesh 选项将不起作用，因为 Mesh 不是 Graphics 的选项：

```
Show[p2,Mesh->True] 
```

将给出一条消息“渲染图形时遇到无法识别的选项名称（网格）”谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-01T17:56:45.107

最好的方法是通过`"GridLinesInFront"`方法选项`Graphics`：

```
DensityPlot[Sin[x + y^2], {x, -3, 3}, {y, -2, 2}, 
 PlotRangePadding -> 0.2, GridLines -> Automatic, 
 Method -> {"GridLinesInFront" -> True}] 
```

[![在此处输入图像描述](../Images/8e2d02dd19f23b41045572aea6c9840e.png)](https://i.stack.imgur.com/6lsDR.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T05:22:11.147

好的，这是一个可怕的黑客，但它确实有效（至少有时）。这个想法是在密度图中创建一个易于计算但在其他方面类似于您的 p2 的网格，然后提取网格。

```
Show[p2, Graphics[Cases[DensityPlot[0, {x, -3, 3}, {y, -2, 2}, 
      Evaluate[Sequence @@ Append[Options[p2], Mesh -> True]]][[1]] //
     Normal, _Line, \[Infinity]]]] 
```

# f# - 重复流水线的 F# 语法

> ID：13421351
> 
> 赞同：5
> 
> 时间：2012-11-16T17:18:49.013
> 
> 标签：f#

F# 中是否有任何语法允许简洁地按函数列表进行流水线操作？例如，

```
 x |> fun1 |> fun2 |> fun3 ... 
```

或者是否有一种设计模式使这项任务变得不必要？就我而言，我正在制作一个（天真的）数独求解器，并具有如下所示的功能：

```
let reduceByRows poss = 
    poss 
    |> reduceBy (rowIndeces 1) |> reduceBy (rowIndeces 2) |> reduceBy (rowIndeces 3)
    |> reduceBy (rowIndeces 4) |> reduceBy (rowIndeces 5) |> reduceBy (rowIndeces 6)
    |> reduceBy (rowIndeces 7) |> reduceBy (rowIndeces 8) |> reduceBy (rowIndeces 9) 
```

有没有办法清理这样的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T17:59:09.267

看待这个的一种方法是折叠流水线操作符`|>`而不是折叠数据：

```
{1..9} |> Seq.map (rowIndices >> reduceBy)
       |> Seq.fold (|>) poss 
```

一般来说，如果`fun1`,`fun2`等具有相同的签名，您可以应用`|>`一系列函数，即*重复流水线*：

```
 [
   fun1; 
   fun2; 
   fun3;
   //...
         ] |> List.fold (|>) x 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T17:23:04.833

对我来说看起来像一个折叠。关于什么

```
let reduceByRows poss = 
  Seq.fold (fun p i -> reduceBy (rowIndices i) p) poss {1..9} 
```

# ios - libsqlite3.0 导致应用程序无法运行。无法在所选目标上运行

> ID：13421352
> 
> 赞同：0
> 
> 时间：2012-11-16T17:18:48.503
> 
> 标签：ios, iphone, xcode

在我开始将 facebook 框架添加到应用程序之前，我的应用程序运行良好，没有任何问题。一旦我将 libsqlite3.0 添加到链接中，我就会弹出“无法在所选目标上运行”的弹出窗口

我尝试清理项目，删除派生数据，重新启动计算机。我不知道还能做什么。我也用谷歌搜索了它并查看了其他论坛，他们都说要从受支持的拱门中删除 armv7，但这也无济于事。

有任何想法吗？

# c# - 电子邮件发件人 - 收件人代码错误

> ID：13421353
> 
> 赞同：-3
> 
> 时间：2012-11-16T17:18:57.693
> 
> 标签：c#, email, foreach, sender

嗨，我在 4 天内完成了我的项目，我从[http://www.youtube.com/watch?feature=player_embedded&v=mGDnQchFZJg#](http://www.youtube.com/watch?feature=player_embedded&v=mGDnQchFZJg#)获得了代码！，我真的可以使用帮助，在此先感谢。

```
jet it gives me an error in foreach loop 
```

错误 1 ​​当前上下文中不存在名称“s”

```
 MailMessage poruka = new MailMessage();
        poruka.From = new MailAddress(textBox4.Text);
        poruka.Subject = textBox2.Text;
        poruka.Body = textBox3.Text;
        foreach (string s in textBox1.Text.Split()) ;
        poruka.To.Add(s);

        SmtpClient client = new SmtpClient();
        client.Credentials = new NetworkCredential(textBox4.Text, textBox5.Text);
        client.Host = "smtp.yahoo.com";
        client.Port = 587;
        client.EnableSsl = true;
        client.Send(poruka); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:22:30.660

`;`您的 foreach 末尾有 a ，这意味着`s`当您将其添加到时不在范围内`poruka`. 把它改成这样：

```
foreach (string s in textBox1.Text.Split())
{
    poruka.To.Add(s);
} 
```

这就是我个人总是喜欢使用大括号而不是内联我的 foreach 的原因。

# ruby - 如何在正则表达式中排除某些匹配项

> ID：13421354
> 
> 赞同：3
> 
> 时间：2012-11-16T17:18:57.517
> 
> 标签：ruby, regex

我想匹配以 结尾的字符串，`bar`例如：`foobar`或`bar`. 这样的正则表达式可能是：`/^.*bar$/`.

我还想排除带有`u`前缀的字母的字符串`bar`，例如，这些字符串不应该与正则表达式匹配：`ubar`或`fooubar`。我试过`/^.*[^u]?bar$/`了，但它不起作用。我们怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:22:19.983

只需将整个前缀括在括号中

```
^(.*[^u])?bar$ 
```

通过这样做，如果之前至少有一个非`u`字符，则您只允许更前面的字符`bar`。

或者，如果您的正则表达式引擎支持[负后瞻](http://www.regular-expressions.info/lookaround.html)，您可以这样做：

```
^.*(?<!u)bar$ 
```

当此正则表达式到达该位置之前`bar`，它会查看其左侧的字符并尝试匹配`u`. 如果这不可能，比赛将继续进行。如果`u`找到了，则向后查找将使模式失败。如果有非`u`字符并且它是字符串的开头，这两种方法都有效。

`^.*`正如sawa在评论中指出的那样，如果您只想检查字符串是否以 结尾，您甚至不需要`bar`：

```
(?<!u)bar$ 
```

当然，如果您出于某种原因（使用多行模式替换或匹配行）想要在匹配中包含整个字符串，那么这`^.*`是必要的。请注意，在第一个正则表达式中，您不能将其排除在外。但是，您可以将其更改为

```
([^u]|^)bar$ 
```

这也将避免匹配整个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:21:51.127

`?`将in之前的所有内容分组`()`。这具有说*“前面的整个可选结构`bar`，如果存在，不得以`u`”*结尾的效果。

例如在 JavaScript 中：

```
/^(.*[^u])?bar$/.test("foobar");
// true

/^(.*[^u])?bar$/.test("fooubar");
// false

/^(.*[^u])?bar$/.test("bar");
// true

/^(.*[^u])?bar$/.test("ubar");
// false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:39:34.020

使用后视：

```
def match_bar? string
  string =~ /(?<!u)bar\z/
end

%w{foobar ubar fooubar}.each do |example|
  puts "#{example} does #{match_bar?(example) ? '' : 'not'} match the regex."
end 
```

输出：

```
foobar does  match the regex.
ubar does not match the regex.
fooubar does not match the regex. 
```

# c# - 调试时防止执行存储过程

> ID：13421356
> 
> 赞同：0
> 
> 时间：2012-11-16T17:19:06.497
> 
> 标签：c#, asp.net, sql

每次使用调试器时，都会执行我的一个存储过程，即使我在到达负责将数据保存到数据库的代码行之前停止调试器也是如此。

我怎样才能防止这种情况发生？我不想在数据库中有不完整的行。

```
POrder po = new POrder();          
po.PODate = DateTime.Parse(txtPODate.Text);  <-- Breakpoint here

po.POVendorID = int.Parse(ddPOVendors.SelectedValue);  <-- Stop Debugging here 
```

我还没有到达`po.AddNewOrder`并且我停止了调试器，所以我还没有执行存储过程

```
po.AddNewOrder(); 
```

`POrder`班级：

```
 public DateTime  PODate { get; set; }
    public int POVendorID { get; set; }

    public void AddNewOrder()
    {
        SqlConnection con = new SqlConnection(ss.GetConectionString());

        SqlCommand cmd = new SqlCommand("uspAddNewPOrder", con);
        cmd.CommandType = CommandType.StoredProcedure;

        SqlParameter parPODate = new SqlParameter("@PODate", SqlDbType.Date);
        parPODate.Value = PODate;
        cmd.Parameters.Add(parPODate);

        SqlParameter parPOVendorID = new SqlParameter("@POVendorID", SqlDbType.Int);
        parPOVendorID.Value = POVendorID;
        cmd.Parameters.Add(parPOVendorID);

        try
        {
            con.Open();
            cmd.ExecuteNonQuery();
        }
        catch (Exception exp) 
        {
            throw new Exception(exp.Message.ToString());
        }
        finally
        {
            cmd.Dispose();
            con.Close();
        }
    } 
```

存储过程代码：

```
ALTER PROCEDURE [dbo].[uspAddNewPOrder] 
(
        @PODate datetime = null,
        @POVendorID int= null
)
AS
BEGIN
    INSERT INTO PurchaseOrders.[dbo].[tblPurchaseOrders]
    (
       PODate,
       POVendorID

    )
    VALUES
    (
       @PODate,
       @POVendorID
    )
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:34:10.567

您可以使用`preprocessor directives`跳过在给定条件下执行的代码部分（例如，在您的情况下调试期间）。看看这个[MSDN 链接](http://msdn.microsoft.com/en-us/library/4y6tbswk%28v=vs.71%29.aspx)

```
#define DEBUG
public class YourClass 
{
    POrder po = new POrder();          
    po.PODate = DateTime.Parse(txtPODate.Text);
    Break point here ->

    po.POVendorID = int.Parse(ddPOVendors.SelectedValue);
    #if (!DEBUG)
        po.AddNewOrder(); //this will not be executed during debug.
    #endif
    ....      
} 
```

# jquery - jQuery Google Maps 根据点击获取地址

> ID：13421357
> 
> 赞同：0
> 
> 时间：2012-11-16T17:19:09.353
> 
> 标签：jquery

我正在构建一个谷歌地图功能。当用户单击按钮时，jquery 脚本应该从文本框中获取地址，但它不能正常工作。有人知道我做错了什么吗？

```
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;language=en"></script>
<script type="text/javascript" src="<?=base_url()?>data/gmap3.js"></script>

<script>
    $(document).ready(function() {
        function getAddress() {
            $("#addressClick").click(function() {
                $('#address').val();
            });
        }
        $("#my_map").gmap3({
            marker: {
                address: getAddress()
            }, map:{
                options:{
                    zoom: 14
                }
            }
        });
    });
</script>
<input id="address" type="text" placeholder="Please type in your address"><input type="button" value="Go to location" id="addressClick">
<div id="my_map" style=" height: 350px; width: 300px;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:39:58.853

在单击按钮之前，您似乎不想加载地图。但是，您将在页面准备好后立即加载地图。你`undefined`作为地址传递：

```
address: getAddress() 
```

该函数`getAddress()`没有返回值，因此当您将其值分配给属性时，该属性的值为`undefined`. 所做的只是为您的按钮分配一个`getAddress()`点击处理程序。在点击处理程序中，文本框的值被读取，但该值被忽略。

如果要在单击按钮后加载地图，则需要移动代码以在单击处理程序中加载地图。此外，将该单击处理程序绑定移到函数之外`getAddress()`。

```
$(document).ready(function() {
    $("#addressClick").click(function() {
        $("#my_map").gmap3({
            marker: {
                address: $('#address').val()
            }, map:{
                options:{
                    zoom: 14
                }
            }
        });
    });
}); 
```

**工作演示：** [jsfiddle.net/wFxDR](http://jsfiddle.net/wFxDR/)

# c# - Web 服务方法问题。请求永远不会到达 Web 服务方法（无错误）

> ID：13421358
> 
> 赞同：1
> 
> 时间：2012-11-16T17:19:14.547
> 
> 标签：c#, asp.net, .net, web-services, soap

好的，我在 Web 服务中编写了一个用于发送电子邮件的方法（不重要）。

站点方面，我将 MailMessage 对象反序列化为 XML（我编写的自定义例程）。然后将其作为参数传递给 Web 服务中的 Web 方法。一切正常，直到邮件中的文件附件变得大于 144kb 左右。

邮件消息的 XML 字符串最终看起来像这样（作为未格式化的字符串参数传递）：

```
 <MailMessage>
      <To>xx.xx@Domain.com</To>
      <From>NoReply@Domain.com</From>
      <Body>blah blah</Body>
      <Attachment ContentType="application/vnd.ms-excel" fileName="Test.xls">
        <byte>00</byte>
        <byte>05</byte>
        <byte>6F</byte>
        …etc 
```

我可以成功接收的最大附件大小为 144kb，高于此大小，并且请求永远不会到达 Web 服务方法。我知道这是一个事实，因为我的 web 方法的第一行是记录请求已收到。IIS 日志显示 web 服务正在接收 POST 消息（据我所知），但没有证据表明它到达了我的 web 方法中。没有错误，尽管我能想到的所有内容都尝试捕获块。

是否有某种我不知道的默认最大大小/超时？我不是这类东西的大师，所以我想我在这里遗漏了一些微不足道的东西。

谁能告诉我我可能做错了什么？如果需要，我可以发布代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:35:58.750

在 web.config 中增加 maxMessageLength 的值应该允许将更大的肥皂消息传递到服务器。

```
<configuration>
  <system.web>
  <httpRuntime maxMessageLength="409600"
    executionTimeoutInSeconds="300"/>
  </system.web>
</configuration> 
```

有关详细信息，请参阅此链接。

[大肥皂](http://msdn.microsoft.com/en-us/library/aa528822.aspx)

# iphone - 目标c中的self.propertyName与_propertyName

> ID：13421361
> 
> 赞同：2
> 
> 时间：2012-11-16T17:19:27.907
> 
> 标签：iphone, ios, ipad

我了解两者之间的区别：`self.propertyName`使用访问器方法而`_propertyName`直接访问实例变量。因此，据我了解，您不想使用的*唯一*一次*是*在属性的访问器方法中，因为它会导致无限循环。只要我遵循该规则，每次需要在类方法中获取/设置该属性时使用 self.propertyName 是否可以，并且可能出于一致性的考虑？*`self.propertyName`*

 *非常感谢你的智慧！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:35:49.767

与 setter 和 getter 一样，你应该避免在你的`init`和`dealloc`方法中使用点符号，因为在一个半构造或半破坏的类上调用已发布的方法是不安全的。

特殊的风险是子类可能已将逻辑添加到其访问器中。如果您调用访问器，`dealloc`那么您将在子类自行释放*后*调用它。如果您调用访问器，`init`那么您将在子类初始化*之前*调用它。

如果你有任何 key-value 观察者，同样的事情也会发生——你调用一个 setter，然后他们会收到变化的警报，并不管你当前的状态如何，都会给你一个参考。因此，如果您严格禁止子类化，这甚至是不安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T17:28:56.483

是的，你很准。在所有这些中，一致性是最重要的。我个人的偏好是尽可能使用点符号，但如果需要（例如，在 getter/setter 中）使用直接实例变量。

话虽如此，如果您也在属性设置器方法中，您要小心，因为`self.property = val`inside`setProperty:`也会调用无限循环；解决方案是`_property = val`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:34:31.270

正确使用属性将进一步保持一致性（如前所述）也允许更好的子类化:)

* * *

仍然......在某些情况下......例如在你希望东西是原子的线程上下文中，你必须回退到var*

# css - 动画 div 部分超出框架，没有滚动条

> ID：13421362
> 
> 赞同：0
> 
> 时间：2012-11-16T17:19:34.800
> 
> 标签：css

我想用内容为 div 设置动画，使其左上角距离窗口右边缘 30px，但浏览器不会将其检测为需要滚动到的内容。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:21:58.430

确保 div 的父级（外部）已将溢出设置为隐藏

```
<div id='outer' style='overflow:hidden;'>
    <div id='yourdiv'></div>
</div> 
```

# ruby-on-rails - 淘汰赛和 Rails：从 rails 对象填充 viewModel

> ID：13421363
> 
> 赞同：0
> 
> 时间：2012-11-16T17:19:34.300
> 
> 标签：ruby-on-rails, ruby, knockout.js

这可能是一个简单的问题：我可以使用 rails 实例对象填充我的淘汰视图模型吗？例如，我在 mysite.com/person/1 上有一个编辑页面。控制器找到那个人，视图可以使用@person 来呈现它的数据。

我可以使用@person 来填充我的视图模型吗？喜欢：

```
self.name = ko.observable(@person.name); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T08:27:59.967

是的，但是您必须使用 erb 输出变量，例如

```
ko.observable("<%=  @person.name %>"); 
```

但是，通常，您不想将特定变量传递给特定的可观察对象，您希望将资源本身传递给视图模型的新立场，然后从中设置视图模型变量，我将使用更好的示例进行更新当我使用电脑时，但基本上：

```
ko.applyBindings(new viewModel("<%= resource.to_json.html_safe %>")); 
```

用更好的例子更新

一个人视图模型我会大致像这样构造，注意括号，我不确定为什么需要它们，但如果我没记错的话，没有它们它就行不通。

```
var personViewModel = function(person){

  var self = this;
  self.first_name = ko.observable(person.first_name);
  self.last_name = ko.observable(person.last_name);
  self.friends = ko.observableArray(person.friends);

}

person_json = <%= (@person.to_json.html_safe) %>;

ko.applyBindings(new personViewModel(person_json)); 
```

然而，这些天我喜欢在我的视图模型中使用coffeescript，作为每个视图模型的一个类，这里​​是coffeescript中相同的代码（工作，粗略等价，使用类而不是函数）。

view_models/personviewmodel.js.coffee

```
class PersonViewModel
  constructor: (person) ->
    @first_name = ko.observable(person.first_name)
    @last_name = ko.observable(person.last_name)
    @friends = ko.observableArray(person.friends)

window.PersonViewModel = PersonViewModel 
```

然后在您附加的表单下方的实际视图中。

```
person_json = <%= (@person.to_json.html_safe) %>;

ko.applyBindings(new PersonViewModel(person_json)); 
```

# python - 雅虎财经 - 不完整的检索组件

> ID：13421364
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:19:37.533
> 
> 标签：python, api, yahoo-finance

我正在尝试在 python 中写下一个函数来检索索引的组件列表。因此，假设我想查看 FTSE100 (^FTSE)，我想获取它的所有组件（其中 100 个）甚至更多信息。

我可以通过添加标志来获得有关组件的更多信息（请参阅[this](http://resources.mdbitz.com/2010/02/understanding-yahoo-finance-stock-quotes-and-sl1d1t1c1ohgv/)）。

但是，给定索引，我只能检索前 51 个组件（第一页： http: [//finance.yahoo.com/q/cp?s=](http://finance.yahoo.com/q/cp?s=%5EFTSE&c=0) %5EFTSE&c=0 ）。

我的功能是：

```
at = '%40'
def getListComponents(symbol):
    url = 'http://finance.yahoo.com/d/quotes.csv?s=%s%s&c=1&f=s' % (at, symbol)
    return urllib.urlopen(url).read().strip().strip('"')

Output example: 
'AAL.L"\r\n"ABF.L"\r\n"ADM.L"\r\n"ADN.L"\r\n"AGK.L"\r\n"AMEC.L"\r\n"ANTO.L"\r\n"ARM.L"\r\n"AV.L"\r\n"AZN.L"\r\n"BA.L"\r\n"BAB.L"\r\n"BARC.L"\r\n"BATS.L"\r\n"BG.L"\r\n"BLND.L"\r\n"BLT.L"\r\n"BNZL.L"\r\n"BP.L"\r\n"BRBY.L"\r\n"BSY.L"\r\n"BT-A.L"\r\n"CCL.L"\r\n"CNA.L"\r\n"CPG.L"\r\n"CPI.L"\r\n"CRDA.L"\r\n"CRH.L"\r\n"CSCG.L"\r\n"DGE.L"\r\n"ENRC.L"\r\n"EVR.L"\r\n"EXPN.L"\r\n"FRES.L"\r\n"GFS.L"\r\n"GKN.L"\r\n"GLEN.L"\r\n"GSK.L"\r\n"HL.L"\r\n"HMSO.L"\r\n"HSBA.L"\r\n"IAG.L"\r\n"IHG.L"\r\n"IMI.L"\r\n"IMT.L"\r\n"ITRK.L"\r\n"ITV.L"\r\n"JMAT.L"\r\n"KAZ.L"\r\n"KGF.L"\r\n"LAND.L' 
```

这样解析组件的标题非常容易。

如何获得剩余的 49 个组件？考虑到，如果我查看的是 FTSE250 或更高，则未检索到的组件可能会更多。

**没有答案：**

所以我做了一些研究，尝试了许多标志组合，找到并阅读了这条评论：code.google.com/p/yahoo-finance-managed/wiki/csvQuotesDownload；并且我得出结论，不可能将索引的所有组件下载为 CSV。

如果你有/遇到过同样的问题，而不仅仅是使用 BeautifulSoup。您可能不喜欢这种方法，但没有其他方法。

**[解决我的大部分问题](https://github.com/sic2/yahooFinanceApi)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T17:23:50.757

如果你这样做，表格顶部有一个小链接，上面写着`last`- 它会给你最后的页码 - `http://finance.yahoo.com/q/cp?s=%5EFTSE&c=2`（来自你的例子）然后将其拆分以创建一个`range(number)`循环和请求的范围页面类似于您目前的情况。

1.  打开初始页面
2.  通过 lxml.html 或 BeautifulSoup 提取链接
3.  解析出最后的页码
4.  循环检索每个页面的数量

顺便说一句，我很确定雅虎！必须有一些API？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-04T14:47:37.033

我是 Python 新手，正在寻找自己的脚。

我一直在寻找相同问题的解决方案，但最终写了自己的。我的代码效率低下、冗长且丑陋 - 但它有效，如果很少使用，我会使用。我期待向更聪明的人学习。

def getIndexComponents（符号）：

```
# function to retrieve the component list of equity index
# from Yahoo Finance, if available

import requests
p = 0

while p < 12:

    if p == 0:

        url = 'http://finance.yahoo.com/q/cp?s=%5E' + symbol
        text = requests.get(url).content
                                                                              # </a></b></td><td
        componentSubset = [text[n-10:n] for n in xrange(len(text)) if text.find('</a></b></td><td', n) == n]

        for comp in range(len(componentSubset)):

            componentSubset[comp] = componentSubset[comp][(1+componentSubset[comp].index('>')):]

        components = componentSubset

    else:

        url = 'http://finance.yahoo.com/q/cp?s=%5E' + symbol + '&c=' + str(p)
        text = requests.get(url).content

        componentSubset = [text[n-10:n] for n in xrange(len(text)) if text.find('</a></b></td><td', n) == n]

        for comp in range(len(componentSubset)):

            componentSubset[comp] = componentSubset[comp][(1+componentSubset[comp].index('>')):]

        components.extend(componentSubset)

    p = p + 1

components = set(components)

return components 
```

# 似乎工作

getIndexComponents('FTSE')

# sql-server - 数据库 'databasename' 的事务日志已满。

> ID：13421370
> 
> 赞同：22
> 
> 时间：2012-11-16T17:20:00.193
> 
> 标签：sql-server

数据库 '' 的事务日志已满。要找出日志中的空间不能被重用的原因，请参阅 sys.databases 中的 log_reuse_wait_desc 列。请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-16T21:12:29.227

毫无疑问，您正在运行数据库`Full Recovery Mode`，并且未能进行事务日志备份。

在 SQL Server 管理器中右键单击您的数据库，然后检查“选项”页面。将恢复模式从 切换`Full`到`Simple`然后再次右键单击数据库。选择`Tasks` `Shrink`, `Files`。将日志文件缩小到合适的大小（我通常坚持数据文件大小的 20-25%）。

切换回`Full Recovery Model`，并立即进行完整的数据库备份。

您现在需要确定是否需要将数据库恢复到某个时间点的能力。如果是这样，请根据您的业务需求安排定期事务日志和差异备份。

如果企业可以承受一定数量的数据丢失，请安排完整备份并切换到`Simple`模式。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-16T21:02:04.703

最可能的答案是您需要运行**日志备份**或者有一个**打开的事务**。

这里还有一点可以帮助你...

在您的服务器上运行此脚本：

```
-- last FULL backup
;with FULLBUs 
as (
    select d.name, max(b.backup_finish_date) as 'Last FULL Backup'
    from sys.databases d
        join msdb.dbo.backupset b
            on d.name = b.database_name
    where b.type = 'D'
    group by d.name
),

-- last LOG backup for FULL and BULK_LOGGED databases
LOGBUs
as (
    select d.name, max(b.backup_finish_date) as 'Last LOG Backup'
    from sys.databases d
        join msdb.dbo.backupset b
            on d.name = b.database_name
    where d.recovery_model_desc <> 'SIMPLE'
        and b.type = 'L'
    group by d.name
)

-- general overview of databases, recovery model, and what is filling the log, last FULL, last LOG
select d.name, d.state_desc, d.recovery_model_desc, d.log_reuse_wait_desc, f.[Last FULL Backup], l.[Last LOG Backup]
from sys.databases d
    left outer join FULLBUs f
        on d.name = f.name
    left outer join LOGBUs l
        on d.name = l.name
where d.name not in ('model', 'TempDB')
order by d.name 
```

此查询将为您提供数据库的粗略概述、它们使用的恢复模式、日志已满的原因以及上次 FULL 和 LOG 备份的运行时间。

查看标记为**log_reuse_wait_description**的列。很可能它说**BACKUP**。下一个最可能的原因是**TRANSACTION**。

如果是**备份**，这里有一些信息：

基本上，对于您的 SIMPLE 数据库，每天运行一次完整备份。对于 FULL 数据库，每天运行一次 FULL 备份，每小时运行一次 LOG 备份。调整 LOG 数据库的频率以匹配您在保住工作的同时丢失数据的能力。

管理备份的最简单方法是使用[Ola Hallengren 的维护脚本](http://ola.hallengren.com/)。访问他的网站并尝试使用它们。

如果您看到**TRANSACTION**作为原因，请尝试运行：

```
dbcc opentran 
```

并追踪拥有未结交易的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-05T21:03:45.413

如果您的数据库恢复模式已满且您没有日志备份维护计划，您将收到此错误，因为事务日志因`LOG_BACKUP`.

这将阻止您对该数据库执行任何操作，例如收缩，并且 SQL Server 数据库引擎将引发 9002 错误。

为了克服这种行为，我建议您检查此[数据库“SharePoint_Config”的事务日志已满，因为 LOG_BACKUP](https://blog.devoworx.net/2016/04/26/the-transaction-log-for-database-sharepoint_config-is-full-due-to-log_backup/)显示了解决此问题的详细步骤，例如日志备份维护计划。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T08:16:06.833

执行此操作右键单击数据库节点->任务->备份->常规（在选项卡中）->将“备份类型”设置为“事务日志”->确定。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-28T08:25:56.967

右键单击数据库\属性\文件。

您将拥有一个包含数据库文件的表，其中有一个日志文件。只需将初始大小扩大到合理的数量。

# android - 如何使特殊字符在所有版本的 Android 的 web 视图中正确显示？

ID：13421371

赞同：1

时间：2012-11-16T17:20:06.773

标签：android, webview

# linux - Windows http.sys alternative for linux platform

> ID：13421372
> 
> 赞同：4
> 
> 时间：2012-11-16T17:20:08.320
> 
> 标签：linux, windows, http.sys

Windows has a Kernel based http.sys Web server. The main advantage of it is that it is kernel based. This gives performance advantages but (for me) more importantly: flexibility.

For example two applications can respond to the same port but different HTTP subkeys So /store can be handled by app1 and /status by app2\. I am talking about static and dynamic content.

My question is:

Is there something similar / an alternative on the Linux platform?

# ruby - Ruby /替换哈希数组中的值

> ID：13421376
> 
> 赞同：5
> 
> 时间：2012-11-16T17:20:20.427
> 
> 标签：ruby

如何用 31 代替年龄？

```
[{"name"=>"Bob"}, {"age"=>"30"}] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T17:29:11.163

另一种方式，使用 find

```
1.9.3p194 :007 > array1 = [{"name"=>"Bob"}, {"age"=>"30"}]
 => [{"name"=>"Bob"}, {"age"=>"30"}] 
1.9.3p194 :008 > hash1 = array1.find { |h| h['age'] == "30" }
 => {"age"=>"30"} 
1.9.3p194 :009 > hash1['age'] = 31
 => 31 
1.9.3p194 :010 > array1
 => [{"name"=>"Bob"}, {"age"=>31}] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-27T17:46:40.203

使用地图！（将替换包含它的所有哈希中的年龄值）

```
a = [{"name"=>"Bob"}, {"age"=>"30"}]
a.map! do |h|
  h['age'] = 31 if h['age']
  h
end
a
=> [{"name"=>"Bob"}, {"age"=>31}] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T17:59:13.680

为什么不将数组转换成更容易、更灵活的东西呢？您的数组迫切需要成为一个值对象：

```
class Person
  attr_accessor :name, :age
  def initialize arr
    arr.each { |h| h.each { |k,v| instance_variable_set("@#{k}", v) } }
  end
  def to_hash_array
    instance_variables.each_with_object([]) do |iv, arr|
      arr << {iv.to_s.sub('@','') => instance_variable_get(iv)}
    end
  end
end

def hash_array_to_person arr
  person = Person.new
  arr.each { |h| h.each { |k,v| person.send("#{k}=", v) } }
  person
end

example = [{"name"=>"Bob"}, {"age"=>"30"}]
bob = Person.new(example)

p bob
p bob.to_hash_array
bob.age = 31
p bob.to_hash_array 
```

输出：

```
#<Person:0x00000000fe8418 @name="Bob", @age="30">
[{"name"=>"Bob"}, {"age"=>"30"}]
[{"name"=>"Bob"}, {"age"=>31}] 
```

Ruby 不是 C，您可以使用比基本的原始数据类型更多的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T17:24:34.313

由于您真正拥有的是哈希数组，因此您可以索引该数组以获取第二个哈希，然后通过`"age"`作为键传递来更新值：

```
1.9.3p194 :001 > h = [{"name"=>"Bob"}, {"age"=>"30"}]
 => [{"name"=>"Bob"}, {"age"=>"30"}] 
1.9.3p194 :002 > h[1]["age"] = 31
 => 31 
1.9.3p194 :003 > h
 => [{"name"=>"Bob"}, {"age"=>31}] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T17:24:44.507

这将做：

```
[{"name"=>"Bob"}, {"age"=>"30"}][1]["age"] = 31 
```

# java - Java - 从字符串中获取整数

> ID：13421381
> 
> 赞同：0
> 
> 时间：2012-11-16T17:20:51.387
> 
> 标签：java, string, integer

让我们假设我有一个这样的字符串：

类：类shapes_assignment.SquareX-坐标：314Y-坐标：50

如何从中提取两个数字（即 314 和 50）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T17:23:34.580

**使用正则表达式：**

```
String s = "Class:class shapes_assignment.SquareX-Coordinate:314Y-Coordinate:50";
  Pattern pat = Pattern.compile("(\\d)+");
  Matcher mat = pat.matcher(s);

  while(mat.find()){

   System.out.println(mat.group()); // You can store these numbers in variables
} 
```

**您可以使用以下代码转换和存储数字：**

```
ArrayList<Integer> numbers = new ArrayList<Integer>();

while(mat.find()){

    System.out.println(mat.group());

    numbers.add(Integer.parseInt(mat.group()));  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:27:56.830

你可以使用`Matcher.matches()`：

```
String str = "Class:class shapes_assignment.SquareX-Coordinate:314Y-Coordinate:50";
Matcher m = Pattern.compile(".*?(\\d+).*?(\\d+).*").matcher(str);
if (m.matches()) {
   System.out.println(m.group(1));
   System.out.println(m.group(2));
} 
```

输出：

```
314
50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:23:41.490

遍历字符串的每个字符。如果字符匹配 0 - 9，则将其添加到新字符串 foo。当字符不是连续顺序的数字时，停止向该字符串添加字符。

完成后，将字符串 foo 转换为整数。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:25:54.323

您可以将字符串拆分为非数字字符：

```
String s = "Class:class shapes_assignment.SquareX-Coordinate:314Y-Coordinate:50"; 
String[] numbers = s.split("[^\\d]+"); 
```

请注意，如果输入以非数字字符开头，则第一个元素将为空字符串。

然后，您可以使用 解析数组的每个非空字符串`Integer.parseInt()`。

完整的工作代码：

```
public static void main(String[] args) {
    String s = "Class:class shapes_assignment.SquareX-Coordinate:314Y-Coordinate:50";
    String[] numbers = s.split("[^\\d]+");
    for (String number : numbers) {
        if (!number.isEmpty()) {
            int i = Integer.parseInt(number);
            System.out.println("i = " + i);
        }
    }
} 
```

# c# - 会话管理 Windows Azure

> ID：13421384
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:21:02.753
> 
> 标签：c#, .net, azure, azure-storage

azure 如何管理 asp.net 样式的会话管理。例如，当多个用户点击应用程序时，一般的 asp.net 应用程序。用户名存储在会话中，每个用户都可以使用。如何使用 windows azure 管理具有表单身份验证的多个实例上的站点。应用程序结构缓存是替代方案，但是当多个用户访问该站点时，缓存密钥如何共享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:29:51.720

这与 Azure 之外的多个实例上的会话管理没有什么不同。您显然不能使用内存中的会话状态，但除此之外，您还有很多选择。例如，您可以使用 SQL 存储提供程序，或者为 Azure 表使用一个。

更好的是，尽可能尝试设计完全使用会话状态。

# c++ - c++ Include files not carried over

> ID：13421385
> 
> 赞同：0
> 
> 时间：2012-11-16T17:21:16.337
> 
> 标签：c++, templates

I have three files:

*   domain.h defines some plain structs. one of the fields is a boost::optional
*   convert.h defines template specialization that convert the plain structs to some other type.
*   lib.cpp that uses domain.h and converts.h

So, the includes are:

```
//domain.h
#include <boost/optional>
//convert.h 
#include "domain.h"
#include <boost/optional>
//lib.cpp  --- version 1 does not work
#include "domain.h"
#include "convert.h" 
```

The compiler(VS2010) gave a uninformative error message. I tried adding the boost optional include:

```
//lib.cpp  --- version 2 works
#include <boost/optional>
#include "domain.h"
#include "convert.h" 
```

How come the boost/optional header include wasn't carried over from domain.h and/or convert.h to lib.cpp?

EDIT:

The compiler complained it could find a template specialization for boost::optional.

I found a problem. there's another file which defines the conversion specialization for boost::optional, convert-boost-optional.h

If I change convert.h to

```
#include "domain.h"
#include <convert-boost-optional.h> 
```

then version 1 works too. What puzzles me is how come version 2 compiles without including convert-boost-optional.h anywhere?

EDIT: I got myself confused. I actually included `<convert-boost-optional.h>` in lib.cpp in version 2\. Everything makes sense now. Sorry!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:24:35.517

我假设听者没有标题保护，所以你可以将它们放在你的代码中：

```
#ifndef _BOOST_OPTIONAL_H_
#define _BOOST_OPTIONAL_H_
#include <boost/optional>
#endif 
```

如果你把它放在你包含它们的两个场合中，你应该不再体验它。

* * *

但是，您可能想知道：**您真的需要包含在头文件中吗？**

即使您需要头文件中的头文件中的某些内容，您也可能不需要包含头文件。了解[前向声明](http://c2.com/cgi/wiki?ForwardDeclaration)以及[何时不能使用它们](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)。

# r - 根据 POSIXlt 时间创建一个因子？

> ID：13421387
> 
> 赞同：1
> 
> 时间：2012-11-16T17:21:30.070
> 
> 标签：r, split, dataframe, cut, posixct

我目前正在处理存储在数据框中的数据，时间在一列中。我必须把一整天分成几个时段。到目前为止，我一直在根据完整的时间来做这件事

```
workingdata <- read.csv(filename)
workingdata$dateI <- as.POSIXlt(workingdata$dateI,format="%Y-%m-%d %H:%M:%S")
workingdata$hourI <- workingdata$dateI$hour
workingdata$shift <- cut(workingdata$hourI, breaks=c(0,6,13,23),
                         labels=c("morning","midday","evening"),
                         include.lowest=TRUE,right=TRUE) 
```

这很好用，并创建了三个级别的因子 -`morning`从 0:00 到 6:59、`midday`从 7:00 到 13:59 以及`evening`从 14:00 到 23:59 的时间。

现在我想做类似的事情，但基于分钟/秒的削减，例如`midday`从`11:34:12`. 有没有办法通过纯粹基于 POSIXlt 的削减来做到这一点？最好的方法是什么？

**编辑：**我尝试将剪切指定为 POSIXlt 对象，但它似乎总是包含日期，所以这不是我想要的......

```
> brk<-as.POSIXlt("11:34:12",format="%H:%M:%S")
> brk
[1] "2012-11-16 11:34:12" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:47:54.283

您可以计算您的数据与您的数据来源之日之间的差异，并将它们与您的截止点进行比较。

```
foo <- as.POSIXlt(runif(100,min=0,max=1000009),origin="2012-01-01")
bar <- rep(NA,length(foo))
morning <- 
    foo-as.POSIXlt(paste(1900+foo$year,"-",1+foo$mon,"-",foo$mday,sep=""))<
    11*60+34+12/60
bar[morning] <- "morning" 
```

中夜班和`bar`变成一个因素留给读者练习；-)

# java - 在 Session 范围内存储对象列表 Spring MVC 的 ApplicationListener

> ID：13421388
> 
> 赞同：0
> 
> 时间：2012-11-16T17:21:36.273
> 
> 标签：java, spring, spring-mvc

我试图在我的 Spring MVC 应用程序的会话中存储一个对象列表，以便我可以在我的 JSP 中遍历它们以在下拉列表中创建选项。

在阅读了大约两个小时的帖子和博客后，我感到非常困惑。事实上，我什至不知道从哪里开始。谁能指出我符合以下标准的基于 Spring 的解决方案 [文档、教程、示例] 的方向吗？

1.  列表的值是从数据库表中提取的。
2.  该列表在应用程序启动期间加载。
3.  它不直接访问控制器内的会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:45:31.700

`org.springframework.beans.factory.InitializingBean`通过实现接口创建一个读取值并放入列表的类，例如：

```
 public class ListLoader implements InitializingBean{
       ....
       ....
       public List<String> getMyList(){
         ...
         ...
       }
     } 
```

在配置文件中添加 bean：

```
 <bean id="myListLoader" class="com.....ListLoader">
    ...
   </bean> 
```

要访问它：

```
 ListLoader myListLoader= (ListLoader)context.getBean("myListLoader");
   List<String> myValues= = myListLoader.getMyList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:13:39.707

为了进一步说明我是如何解决这个问题的，我选择回答我自己的问题。

**1\. 正如 DigitalJoel 的回答中所建议的，我创建了一个`ApplicationListener`bean。每次刷新上下文时都会触发此侦听器。**

*LookupLoader.java*

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationListener;
import org.springframework.context.event.ContextRefreshedEvent;
import org.tothought.entities.SkillCategory;
import org.tothought.repositories.SkillCategoryRepository;

public class LookupLoader implements ApplicationListener<ContextRefreshedEvent> {

    @Autowired
    SkillCategoryRepository repository;

    private List<SkillCategory> categories;

    public List<SkillCategory> getCategories() {
        return categories;
    }

    public void setCategories(List<SkillCategory> categories) {
            this.categories = categories;           
    }

    @Override
    public void onApplicationEvent(ContextRefreshedEvent event) {
        if(this.categories == null){
            this.setCategories(repository.findAll());               
        }
    }
} 
```

**2\. 接下来，我在我的应用程序配置中注册了这个 bean。**

*application-context.xml (Spring-Config)*

```
<bean id="lookupLoader"
    class="org.tothought.controllers.initializers.LookupLoader" /> 
```

**3\. 然后将这个 bean 放入每个请求中，我创建了一个在`HandlerInterceptorAdapter`每次收到请求时执行的。在这个 bean 中，我自动装配了 LookupLoader 并在请求中设置了我的列表。**

*LookupHandlerInterceptor.java*

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;
import org.tothought.controllers.initializers.LookupLoader;

public class LookupHandlerInterceptor extends HandlerInterceptorAdapter {
    @Autowired
    LookupLoader loader;

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
            throws Exception {
        request.setAttribute("skillCategories", loader.getCategories());
        return super.preHandle(request, response, handler);
    }
} 
```

**4.在Spring MVC web应用配置中注册HandlerInterceptor**

*servlet-context.xml*

```
<!-- Intercept request to blog to add paging params -->
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/**"/>
        <bean class="org.tothought.controllers.interceptors.LookupHandlerInterceptor" />
    </mvc:interceptor>
</mvc:interceptors> 
```

**5\. 通过 JSP & JSTL 访问列表**

```
<c:forEach var="category" items="${skillCategories}">
    ${category.name}
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:40:37.090

你应该定义一个spring bean。[您可以在此问题](https://stackoverflow.com/questions/6684451/executing-a-java-class-at-application-startup-using-spring-mvc)的答案中了解如何在启动时在 bean 中运行代码。像 ApplicationListener 这样的东西应该可以工作。在该启动代码中，您可以将表加载到内存中（听起来这就是您要查找的内容。）

在您的控制器中，您注入 spring bean，它具有获取所需值的方法。然后，您将这些值添加到请求处理程序中的模型（而不是会话）中，并且模型由视图（您的 JSP 页面）使用，该视图可以迭代这些值并显示它们。

# c++ - 使用 C++ 的 Unicode 文件函数

> ID：13421391
> 
> 赞同：4
> 
> 时间：2012-11-16T17:21:52.147
> 
> 标签：c++, visual-c++, unicode, io

我正在尝试读取 Unicode 文本文件并将读取的数据写回文本文件。这是代码。读取工作正常。我可以判断，因为它在控制台上显示了一个错误字符，但输出文本文件为空。任何帮助，将不胜感激！

```
int main() {
    wchar_t *filename=L"normal.txt";
    FILE *infile;
    infile=_wfopen(filename,L"r");
    wchar_t  b[2];
    fwscanf(infile,L"%ls",b);
    wprintf(L"The string read was :%ls\n",b);//Read a character from the file
    FILE *outfile;
    wchar_t *filetwo = L"one.txt";
    outfile=_wfopen(filetwo,L"w, ccs=UTF-16LE");
    fwprintf(outfile,L"%ls",b);
    fclose(outfile);
    getch();
    return 0;
} 
```

另外，我需要特别处理梵文脚本。它们占用多少字节？如果它是 4，关于如何处理那些使用的任何线索，`wchar_t`因为它只有 2 个字节宽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T18:33:52.623

梵文代码点都在 BMP 中（主块位于 U+0900，另外一些位于 U+A8F0），因此如果文本文件编码为 UTF-16，则所有字符仅占用一个 16 位字每个。
（不要以为情况总是如此。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T18:50:48.877

找到了解决办法！！我只需要以二进制模式打开文件。否则，某些字符显然会被忽略。非常感谢所有帮助的人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T18:33:46.407

只回答第二个问题：

梵文脚本字符在[基本多语言平面](http://en.wikipedia.org/wiki/Basic_Multilingual_Plane#Basic_Multilingual_Plane)中。它们都是 16 位宽的，所以你在那里很安全。否则，您将不得不弄乱[代理对](http://en.wikipedia.org/wiki/Surrogate_pair)。

# c - 'for'循环后分号的效果

> ID：13421395
> 
> 赞同：11
> 
> 时间：2012-11-16T17:22:06.760
> 
> 标签：c, loops, for-loop

`for`假设我想使用循环在 C 中打印五次消息。为什么如果我在 for 循环之后添加一个分号，如下所示：

```
for (i=0;i<5;i++); 
```

消息没有打印 5 次，但是如果我不把分号放在那里，它会打印吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-16T17:24:22.003

分号是一个合法的语句，称为*空语句* ^*，表示“什么都不做”。由于`for`循环执行单个操作（可能是包含在 中的块`{}`），因此分号被视为循环的主体，从而导致您观察到的行为。

以下代码

```
 for (i=0;i<5;i++);
 {
     printf("hello\n");
 } 
```

解释如下：

*   重复五次`for (i=0;i<5;i++)`
*   ...什么都不做（分号）
*   为局部变量打开一个新范围`{`
*   ...打印“你好”
*   关闭范围`}`

如您所见，重复的操作是`;`，而不是`printf`。

* * *

^*见[K&R](http://en.wikipedia.org/wiki/The_C_Programming_Language)，第 1.5.2 节

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-16T17:23:34.113

```
for (i=0;i<5;i++); 
```

相当于

```
for (i=0;i<5;i++){} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T17:37:07.223

`;`仅由标记组成的语句称为*null 语句*，它只是……什么都不做。

例如，这是有效的：

```
void foo(void)
{
     ;
     ;
     ;
} 
```

它可以在可以使用语句的任何地方使用，例如：

```
if (bla)
    ;
else
    ; 
```

请参阅 C 标准段落：

> （C99，6.8.3p3）“空语句（仅由分号组成）不执行任何操作。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T17:42:50.333

下面的代码将打印“Hello”5次..

```
 for(i=0;i<5,printf("Hello\n");i++); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-16T16:24:00.167

当您在 for 循环后放置分号时，许多编译器会显示语法错误，但根据 gcc 编译器（Linux）或 Dev-cpp，您可以在 for 循环后放置分号，它不会显示任何错误。

例如

```
for(int i=0;i<=5;i++); 
```

或者

```
for(int i=0;i<=5;i++) 
{//blank body} 
```

从上面的示例中可以清楚地看出，如果我们在 for 循环之后放置空括号或分号，这意味着我们还没有输入任何变量。

现在来回答你的问题。
如果要打印 hello 5 次，则必须将程序编写为

```
for(int i=0;i<5;i++)
{
    printf("hello");
} 
```

我希望你能理解
干杯！！
拉胡尔·瓦西斯

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-25T04:02:31.890

当 for 循环体仅包含单个语句时，则无需在 for 循环体`{}`周围使用花括号。

```
for(i=0; i<5; i++)
{
    printf("Napoleon");
    printf("Bonaparte");
}

for(j=0; j<5; j++)
    printf("Napoleon"); 
```

所以`for(j=0; j<5; j++);`将自己评估为

```
for(j=0; j<5; j++)
    ; 
```

所以这是一个带有单个语句的 for 循环，它是`;`空语句。null 语句什么都不做。当循环运行 5 次时，null 语句执行 5 次，但它没有按照定义执行任何操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-29T16:32:27.497

```
#include <stdio.h>

int main() {
    int sum = 0; // variable initialization  
    int k = 1;  
    //for(int i = 1; i <= 10; i++);
    {
        sum = sum + k;  
        k++;
    }  
    printf("The  value of sum is %d", sum);  
    return 0;
} 
```

如果 for 循环后面有分号，则花括号中的代码将被视为常规主体，并将正常执行。

在上面的程序中，我已经对`for`循环进行了注释，它的作用与放在循环`;`末尾相同`for`。它打印总和，`1`因为花括号内的代码执行一次。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-12-22T04:32:30.357

它的功能与：

**for(i=0;i<5;i++) {}**

在这里，它在大括号内没有任何内容，只会将 i 的值增加到 5。 *您可以使用下一行的 print 语句检查并获得 i=5。*

`[这里编译的代码ss！！！](https://i.stack.imgur.com/tibHN.jpg)

# android - 多个答案，但我只想要一个

> ID：13421398
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:22:12.030
> 
> 标签：android

我创建了几个 if else 语句，以及解析一个 double ，然后答案是 double = 每个 else 语句。当我运行程序时，它运行得很好，除了每个答案如果给出......

```
//Makes a variable for the entered amount
            double mercurypf;
            double venuspf;
            double earthpf;
            double marspf;
            double jupiterpf;
            double saturnpf;
            double uranuspf;
            double neptunepf;
            double plutopf;

            // constants
            final double mercuryforce = 0.38; 
            final double venusforce = 0.91; 
            final double earthforce = 1.00; 
            final double marsforce = 0.38; 
            final double jupiterforce = 2.34; 
            final double saturnforce = 1.06; 
            final double uranusforce = .92;
            final double neptuneforce = 1.19;
            final double plutoforce = 0.06;

            // Code used to determine which planet RadioButton is checked:

            if(mercury.isChecked())
            {
                mercurypf = mercuryforce * weight;
            }
            else
            {
                mercurypf = 0.00;
            }

            if(venus.isChecked())
            {
                venuspf = venusforce * weight;
            }
            else
            {
                venuspf = 0.00;

            }
            if(earth.isChecked())
            {
                earthpf = earthforce * weight;
            }
            else
            {
                earthpf = 0.00;
            }
            if(mars.isChecked())
            {
                marspf = marsforce * weight;
            }
            else
            {
                marspf = 0.00;
            }
            if(jupiter.isChecked())
            {
                jupiterpf =jupiterforce * weight;
            }
            else
            {
                jupiterpf = 0.00;
            }
            if(saturn.isChecked())
            {
                saturnpf = saturnforce * weight;
            }
            else
            {
                saturnpf = 0.00;
            }

            if(uranus.isChecked())
            {
                uranuspf = uranusforce * weight;
            }
            else
            {
                uranuspf = 0.00;
            }

            if(neptune.isChecked())
            {
                neptunepf = neptuneforce * weight;
            }
            else
            {
                neptunepf = 0.00;
            }

            if(pluto.isChecked())
            {
                plutopf = plutoforce * weight;
            }
            else
            {
                plutopf = 0.00;
            }

            //Creates a textview object, assigns the xml r.id, and then changes the     text to report the amount.
         TextView t = (TextView)findViewById(R.id.ansTextView); 
            t.setText("Your planetary weight is: " + plutopf + neptunepf + uranuspf     + saturnpf + jupiterpf + marspf + earthpf + mercurypf + venuspf);

        }
    } 
```

答案将是 0.0 0.0 0.0 9.1 0.0 0.0 等等......除了被选中的星球之外的所有东西都剩下 0.0> 我知道这是由于 MY =mercurypf + plutopf ... 有没有办法避免不得不这样做，但仍然返回他们选择的单选按钮的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T17:28:31.387

只需将您的结构更改为以下

```
 // constants
        final double mercuryforce = 0.38; 
        final double venusforce = 0.91; 
        final double earthforce = 1.00; 
        final double marsforce = 0.38; 
        final double jupiterforce = 2.34; 
        final double saturnforce = 1.06; 
        final double uranusforce = .92;
        final double neptuneforce = 1.19;
        final double plutoforce = 0.06;

  TextView t = (TextView)findViewById(R.id.ansTextView); 
  if(uranus.isChecked())
        {
            double uranuspf = uranusforce * weight;
            t.setText("Your planetary weight is: " + uranuspf;
        }
   else if(mercury.isChecked())
        {
            double mercurepf = mercuryforce * weight;
            t.setText("Your planetary weight is: " + mercurypf;
        }
   else if( ... 
```

并继续这样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:32:04.000

更改为以下内容，因为您不关心每个星球的重量：

```
 double pf = 0.0;
  TextView t = (TextView)findViewById(R.id.ansTextView); 
  if(mercury.isChecked())
     pf = mercuryforce * weight;
  else if(venus.isChecked())
     pf = venusforce * weight;
  .....
  else if (pluto.isChecked())
     pf = plutoforce * weight;

  t.setText("Your planetary weight is: " + pf); 
```

或者，让它变得更好

```
double mult = 0.0;
if (mercury.isChecked())
   mult = mercuryForce;
else if (venus.isChecked())
   mult = venusForce;
....
else if (pluto.isChecked())
   mult = plutoForce;

t.setText("Your Planetary weight is: " + mult * weight); 
```

# c++ - C++ 中获取桌面分辨率的便携方式

> ID：13421399
> 
> 赞同：11
> 
> 时间：2012-11-16T17:22:13.827
> 
> 标签：c++, gcc, portability, screen-resolution

我正在制作一个 C++ 游戏，我希望它能够自动获取用户的桌面分辨率。

到目前为止，我已经找到了仅限 Windows 的解决方案 - 有没有办法/库在 Windows/Mac/Linux 上找到分辨率？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T17:41:52.923

有几个库可以帮助您解决低级问题。无论如何，您可能在这些平台上需要更多东西，所以我将列出一些：

*   [SFML](http://www.sfml-dev.org/)是一个**C++ 库**，抽象了许多 I/O 内容，包括显示管理。还支持多个平台。
*   经典的[SDL](http://www.libsdl.org/)虽然是一个**C 库**，但被广泛用于平台无关的游戏开发，并支持多个平台。与 SFML 一样，它不仅仅是显示管理。
*   [GLFW](http://www.glfw.org/index.html)，见[wardds answer](https://stackoverflow.com/a/13421669/1248008)，也是一个**C 库**，也构成了一个抽象层，但更专注于显示和键盘/鼠标 I/O，而不是更广泛的 I/O（音频等）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T17:39:32.930

[GLFW](http://www.glfw.org/index.html)提供了一种跨平台（适用于 Windows、Mac 和 Linux）的方式来获取桌面视频模式。它是一个**C api**，但它**可以在 C++ 中工作。**相关功能（和文档）在这里：

`void glfwGetDesktopMode( GLFWvidmode *mode )`

**参数**

`mode` 指向`GLFWvidmode`结构的指针，该结构将由函数填充。

**返回值**

mode 指向的`GLFWvidmode`结构用桌面视频模式填充。

**描述**

该函数以`GLFWvidmode`结构返回桌面视频模式。有关结构`glfwGetVideoModes` 的定义，请参阅`GLFWvidmode`。

**笔记**

即使桌面不使用 RGB 或 RGBA 颜色格式，桌面显示器的颜色深度也始终报告为每个单独颜色分量（红色、绿色和蓝色）的位数。例如，一个索引为 256 色的显示器可能会报告 RedBits = 3、GreenBits = 3 和 BlueBits = 2，总计 8 位。

桌面视频模式是打开 GLFW 窗口时桌面使用的视频模式，而不是当前的视频模式（如果 GLFW 窗口是全屏窗口，可能与桌面视频模式不同）。

```
typedef struct {
  int Width, Height; // Video resolution
  int RedBits; // Number of red bits
  int GreenBits; // Number of green bits
  int BlueBits; // Number of blue bits
} GLFWvidmode; 
```

有关替代方案，请参见[Jonas Wielicki 的答案](https://stackoverflow.com/a/13421705/1431696)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-07T00:44:57.390

我做了一个跨平台的c++函数：

```
#if WIN32
  #include <windows.h>
#else
  #include <X11/Xlib.h>
#endif

//...

void getScreenResolution(int &width, int &height) {
#if WIN32
    width  = (int) GetSystemMetrics(SM_CXSCREEN);
    height = (int) GetSystemMetrics(SM_CYSCREEN);
#else
    Display* disp = XOpenDisplay(NULL);
    Screen*  scrn = DefaultScreenOfDisplay(disp);
    width  = scrn->width;
    height = scrn->height;
#endif
}

int main() {
    int width, height;
    getScreenResolution(width, height);
    printf("Screen resolution: %dx%d\n", width, height);
} 
```

# statistics - 计算幂律、指数和指数截断幂律的 AIC 的软件

> ID：13421402
> 
> 赞同：2
> 
> 时间：2012-11-16T17:22:22.210
> 
> 标签：statistics

我正在尝试将网络累积分布的对数对数图拟合到三个模型之一： Exponential `(P(k)~e^(-ak))`、 Exponentially truncated power law`(P(k)~k^(a-1)e^(k/kc))`和 Power law `(P(k)~k^-a)`。我知道这是一个低信息测试，但我只是想确定三个模型中哪一个最适合（或者可能是最不适合的！）

我有一个 Excel 表，其中包含`logCPK`网络（B 列）和三个模型（C、D 和 E 列）的拟合值。我还计算了三个模型（G、H 和 I 列）的总平方和 (SST)（F 列），然后是误差平方和 (SSE)。

对于这三个模型中的每一个，我计算`1-(sum(SSE)/sum(SST))` 以估计每个模型的简单线性回归的 R^2 值，该值在 Excel 工作表底部以黄色突出显示。所以，现在我有三个 R^2 值（幂律 = 0.507，指数 = 0.777，指数截断幂律 = 0.899）。

起初，指数截断幂律似乎最适合（最高 R^2 值）。但是，我不确定如何解释指数截断幂律的自由度为 2，而其他两个模型的自由度为 1 的事实。

当我联系另一个统计在线资源时，我被告知我应该使用“似然比检验”。据我了解，最佳拟合的“对数似然”负值最小。然而，指数截断幂律的“对数似然”一开始似乎负值最小（因为它有两个 df，而其他两个模型只有一个 df），所以我必须测试它是否真的仍然存在考虑了自由度后，负值较小。

我*想*我知道如何在 Excel 中理论上计算*其中的一部分*：

1) 使用 chidist(A,B) 其中 A 是

```
2*(log.likelihood of Exponentially
truncated - log.likelihood of Power law) 
```

B 是 df (2-1=1) 的差值。如果 p 值小于 0.05，则指数截断确实比幂律更适合。2) 使用 chidist(A,B) 其中 A 是

```
2*(log.likelihood of Exponentially
truncated - log.likelihood of Exponential) 
```

B 是 df (2-1=1) 的差值。如果 p 值小于 0.05，则指数截断确实比指数更适合。

然后我可以得出结论，哪个模型最合适。

这就是我的问题所在（取决于我上面的想法是否正确），如何计算对数（可能性）？我已经搜索过，但仍然迷路。似乎这种手工计算是一头野兽（除非我可以简单地使用我在 Excel 中已有的东西），所以我也在询问软件。

另一种选择是计算 AIC（也向我建议），尽管我相信我仍然会遇到同样的问题，我需要计算 AIC 方程的对数（可能性）`(AIC = 2k - 2ln(L))`。

所以我的具体问题是如何直接从 Excel 中的内容或使用软件计算这三个模型的 AIC 和/或 log（可能性）。

先感谢您！

PS：我研究过 R 编程，发现它有一个 AI{stats} 和 logLik{stats} 函数，但我从文档中不明白我是否有所有必要的输入信息来运行这些函数，如果有，如何运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:20:50.097

对于幂律，您可以使用以下公式和指南：

```
Newman MEJ (2005) Power laws, Pareto distributions and Zipf’s law. 
Contemporary Physics   46: 323–351\. doi:10.1080/00107510500052444. 
```

或者也

```
Xiao X, White E, Hooten M, Durham S (2011) On the use of log-transformation vs. 
nonlinear regression for analyzing biological power-laws. Ecology 92: 1887–1894.
doi:10.1890/11-0538.1. 
```

他们有一个在线附录，其中包含 R 中的代码

之后，您将对如何使用其他发行版有更好的了解。

# ios - 如何创建可以在 IB 中拖放的可重用 UIView？

> ID：13421405
> 
> 赞同：0
> 
> 时间：2012-11-16T17:22:32.610
> 
> 标签：ios, xcode, interface-builder, xcode4.5

我正在使用 XCode 4.5。对于我当前的项目，我需要构建一个类似于文本字段的 UI 元素。因为我将不得不在一大堆 ViewControllers 中重用这个自定义元素，所以我正在寻找一种方法来构建这个自定义文本字段，以便我可以在 XCode 界面构建器中使用它进行拖放，而不是添加它只是以编程方式（这是我到目前为止发现的）。

我怎样才能做到这一点？*我正在寻找一个在一个简单的示例项目中解释整个过程的教程。*

**规格：**

我想要的结果是拥有一个自定义 UIView，我可以像使用其他所有预定义的 UI 元素（例如文本字段）一样使用它。这意味着我希望能够将它从对象库拖放到我的故事板中的某个控制器中，使用属性检查器编辑其属性，尤其是自定义属性，并获得有关 IB 中更改的视觉反馈。我不想一遍又一遍地将预定义的 UIView 子类化，原因有两个：

1.  首先，为预定义的 UI 元素添加自定义子类意味着更多的工作，因为我需要为我需要自定义的每个元素一遍又一遍地重复这一点。我的应用程序的整个视觉部分或多或少将构建自定义 UI 元素，以匹配我必须为我的客户实现的特定设计。
2.  其次，更重要的是，如果我通过在应该包含自定义功能的子类中自定义其外观以编程方式构建它的最大部分，我真的不知道我的 UI 最终将如何显示。
3.  最后，我认为通过生成我的程序的静态 UI 部分来打破 iOS SDK 提供的漂亮的 MVC 分离是一种不好的编码实践，这些部分在运行时永远不会在控制器部分以编程方式更改。

这就是为什么我需要设计一个自定义 UI 元素（我们称其为相应的类 UITextFieldCustom），我可以在设计 UI 的过程中使用它，就像任何其他预制库对象（如文本字段）一样。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:16:28.683

这将需要一个 Interface Builder 插件 (IBPlugin)。不幸的是，对此的支持在 Xcode 4 中被删除，但存在于 Xcode 3 中。似乎也从 Apple Developer Library 中删除了此功能的文档。可以在[http://www.brandonwalkin.com/bwtoolkit/](http://www.brandonwalkin.com/bwtoolkit/)找到使用 IBPlugin 实现的自定义控件的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:27:23.543

就像 'titaniumdecoy' 指出的那样，[这](https://stackoverflow.com/questions/5400493/how-do-i-add-custom-uibutton-to-nib-file-in-xcode/5400519#5400519)是一个很好的解决方案：将内置类型拖到情节提要中，例如文本字段。然后在实用工具栏中的身份检查器中定义自定义类，例如 MyTextField。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:40:42.557

您可以简单地复制粘贴它，在 IB 中选择您的 uiview 按 CMD + C 然后转到要粘贴的其他 nib 文件，单击空白区域并按 CMD + V

# c++ - C 代码调用 Fortran 子程序时，子程序顶部出现分段错误

> ID：13421406
> 
> 赞同：0
> 
> 时间：2012-11-16T17:22:36.853
> 
> 标签：c++, gcc, segmentation-fault, fortran, gfortran

我在文件中有 C++ 代码，它在文件`test-Q.cpp`中调用 Fortran 子例程`getqpf.F`。在 file`test-Q.cpp`中，我已将 Fortran 代码声明为外部代码，并且我正在使用`getqpf_()`名称修改约定调用该函数。和编译`gcc`器`gfortran`正在 GNU/Linux 上使用。

这是 C++ 文件顶部的片段：

```
extern "C" {
            void  getqpf_  (double *tri, 
                    int nsamp, 
                    int lwin,
                    int nfreqfit, 
                    double dt, 
                    float null, 
                    int L2,
                    double df,
                    double *qq, 
                    double *pf, 
                    double *ampls, 
                    double *work1, 
                    double *work2, 
                    double *work3, 
                    double *work4,
                    int mem, 
                    int morder, 
                    int nfs, 
                    double *xReal, 
                    double *xImag, 
                    double *xAbs,
                    double *x1,
                    int cen,
                    int top,
                    int bot, 
                    float cut,
                    int nfst,
                    int raw);  

        } // end 
```

这是来自 Fortran 文件的相应片段：

```
 subroutine getqpf (tri, nsamp, lwin, nfreqfit, dt, null, L2, df,
     1                   qq, pf, ampls, work1, work2, work3, work4,
     2                   mem, morder, nfs, xReal, xImag, xAbs, x1,
     3                   cen,top,bot, cut,nfst,raw)

      integer  morder, lwin, nsamp, nfreqfit, delay, nfs

      real     tri(*)
      real     qq(*), pf(*), ampls(*)

      real * 8 work1(*), work2(*), work3(*), work4(*)
      real * 8 xReal(*), xImag(*), xabs(*), x1(*)

      real * 8 dt8, cut8, df8
      real     null, cut
      integer  nfst
      logical  mem, L2, cen, top, bot, raw

      integer nf

C program logic code starts here
          nf = nfreqfit
          delay = 0
          dt8  = dt
          cut8 = cut 
```

Fortran 代码调用其他 C 代码函数。`gfortran`在使用和编译器的 GNU/Linux 上，`gcc`我以下列方式编译并链接了所有文件：

```
 g++ -c test-Q.cpp -I./boost/boost_1_52_0/ -g
 gcc -c paul2.c -g
 gcc -c paul2_L1.c -g
 gcc -c paul6.c -g
 gcc -c paul6_L1.c -g 
 gcc -c fit_slope.c -g
 gfortran -c getqpf.F -g
 g++ -o test-Q test-Q.o paul2.o paul2_L1.o paul6.o paul6_L1.o fit_slope.o getqpf.o -g 
```

尽管我能够成功构建二进制文件，但在行发生了段错误`nf = nfreqfit`。它位于 Fortran 文件的最顶部。在二进制文件上运行`gdb`会产生以下输出：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000406fd3 in getqpf (tri=..., nsamp=Cannot access memory at address 0x3e9
) at getqpf.F:44
44        nf = nfreqfit 
```

这里发生了什么，为什么会出现段错误？似乎没有在 C++ 代码和 Fortran 代码之间正确传递内存。

**更新**

正如 IanH 在下面的答案中提到的，问题是由于没有通过引用传递参数。使用 C++，函数必须声明为：

```
 extern"C" {
            void  getqpf_  (float *tri, 
                    int &nsamp, 
                    int &lwin,
                    int &nfreqfit, 
                    float &dt, 
                    float &null, 
                    int &L2,
                    float &df,
                    float *qq, 
                    float *pf, 
                    float *ampls, 
                    double *work1, 
                    double *work2, 
                    double *work3, 
                    double *work4,
                    int &mem, 
                    int &morder, 
                    int &nfs, 
                    double *xReal, 
                    double *xImag, 
                    double *xAbs,
                    double *x1,
                    int &cen,
                    int &top,
                    int &bot, 
                    float &cut,
                    int &nfst,
                    int &raw);  

        } // end 
```

请注意与号的存在。然后，可以在代码中调用该函数：

```
getqpf_ (tri,       
    nsamp, 
    lwin,
    nfreqfit, 
    dt, 
    null, 
    L2,
    df,
    qq, 
    pf, 
    ampls, 
    work1, 
    work2, 
    work3, 
    work4,
    mem, 
    morder, 
    nfs, 
    xReal, 
    xImag, 
    xAbs,
    x1,
    cen,
    top,
    bot, 
    cut,
    nfst,
    raw); 
```

请注意，诸如变量`nsamp`声明为`int nsamp = 1001`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:02:15.323

在支持 MSB 关于使用 F2003 的 C 互操作性的建议时，请注意您的具体问题是按引用传递/按值传递不匹配（即使使用 C 互操作性，这仍然是您必须考虑的问题）。典型的 Fortran 实现通过引用传递所有参数，而在 C(++) 中默认是按值传递。在 C++ 方面，请注意所有 int 和 float 参数以及一些 double 参数都缺少指针说明符 ( `*`)。这些参数是按值传递的——但 Fortran 方面没有任何东西可以表明这一点。在 F2003 之前，这通常使用 Fortran 代码中的编译器特定指令来完成。

使用 F2003 的 C 互操作，将参数传递给具有 BIND(C) 属性的过程的默认约定是通过引用。按值传递的参数需要在其声明中具有 VALUE 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:50:01.233

我推荐使用 Fortran ISO C 绑定。Stackoverflow 和 gfortran 手册中有示例。它是 Fortran 2003 语言标准的一部分，在此之前是 Fortran 95 的技术报告。这使其编译器和平台可移植。您不必担心编译器特定的调用约定或名称修改。

# php - 使用 PHP 显示来自两个表的数据

> ID：13421416
> 
> 赞同：0
> 
> 时间：2012-11-16T17:23:24.583
> 
> 标签：php, sql, database, phpmyadmin

我正在尝试显示来自 phpMyadmin 数据库的两个表中的数据。我有一个带有表单的网站，您可以在其中放置您要查找的信息，然后应该从数据库中的两个表中显示此信息。我知道我必须使用 SQL JOIN，我尝试了不同的方法但无法解决这个问题。我将不胜感激

这是我的php代码：

```
 <?php
//connect to database:
$con = mysql_connect("SERVER", "LOGIN", "PASS") or die("Connection Failed");
mysql_select_db("TABLE", $con) or die ("Connection Failed");

//create a PHP variable to hold the value from HTML form
$from = $_POST['arrival'];
$to = $_POST['destination'];
$time = $_POST['time'];
$tailnumber = $_POST['tailnumber'];

$error_status = false;

// validating input
if (empty($_POST['arrival'])){
echo "Please enter the origin.";
$error_status = true;
} 
if (empty($_POST['destination'])){
echo "</br></br> Please enter the destination.";
$error_status = true;
} 
if (empty($_POST['time'])){
echo "</br></br> Please enter the date.";
$error_status = true;
} 
if (empty($_POST['tailnumber'])){
echo "</br></br> Please enter the tail number.";
$error_status = true;
} 

//create the query for selecting all the records which equal to the value from the form
if(!$error_status) {
$query = "SELECT *
FROM INBOUND_FLIGHT
INNER JOIN OUTBOUND_FLIGHT 
ON INBOUND_FLIGHT.TAIL_NUMBER = OUTBOUND_FLIGHT.TAIL_NUMBER
WHERE INBOUND_FLIGHT.ARRIVAL_TIME = '$time' AND INBOUND_FLIGHT.TAIL_NUMBER = '$tailnumber' AND INBOUND_FLIGHT.AIRCRAFT_FROM = '$from'AND OUTBOUND_FLIGHT.AIRCRAFT_TO = '$to'";

//run query
$result = mysql_query($query);
// creating a table
echo "<table border='1'>
<tr>
<th>ARRIVAL TIME</th>
<th>AIRCRAFT TYPE</th>
<th>TAIL NUMBER</th>
<th>CREW NAME</th>
<th>ORIGIN</th>
<th>DESTINATION</th>
</tr>";

//Print the record that matches the criteria of the query
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
echo "<tr>";
echo "<td>" . $row['INBOUND_FLIGHT.ARRIVAL_TIME'] . "</td>";
echo "<td>" . $row['INBOUND_FLIGHT.AIRCRAFT_TYPE' ] . "</td>";
echo "<td>" . $row['INBOUND_FLIGHT.TAIL_NUMBER'] . "</td>";
echo "<td>" . $row['INBOUND_FLIGHT.CREW_NAME'] . "</td>";
echo "<td>" . $row['INBOUND_FLIGHT.AIRCRAFT_FROM'] . "</td>";
echo "<td>" . $row['OUTBOUND_FLIGHT.AIRCRAFT_TO'] . "</td>";
}}
//close the connection
mysql_close($con);
echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:24:23.517

我让它工作。

我用了

```
SELECT *
FROM INBOUND_FLIGHT, OUTBOUND_FLIGHT
... 
```

然后改变了回声显示

```
echo "<td>" . $row['ARRIVAL_TIME'] . "</td>";
...
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:25:40.053

`'$from'`在下面的查询部分中放置一个空格：

```
 AND INBOUND_FLIGHT.AIRCRAFT_FROM = '$from'AND 
```

作为

```
 AND INBOUND_FLIGHT.AIRCRAFT_FROM = '$from' AND 
```

# infix-notation - 如何使用堆栈在一次扫描中评估中缀表达式？

> ID：13421424
> 
> 赞同：52
> 
> 时间：2012-11-16T17:23:41.490
> 
> 标签：infix-notation, stack

我想知道是否有一种方法可以使用 2 个堆栈一次性解决中缀表达式？堆栈可以是一个用于运算符，另一个用于操作数......

分流码算法求解的标准方法是将中缀表达式转换为后缀（反向抛光）然后求解。我不想先将表达式转换为后缀。

如果表达式是 like `2*3-(6+5)+8`，如何解决？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-17T19:28:25.730

很晚了，但这是答案。

取两堆：

1.  `operator stack`{ 用于运算符和括号 }。
2.  `operand stack`.

# 算法

如果存在要读取的字符：

1.  如果字符是`operand`推`operand stack`，如果字符是`(`，推`operator stack`。
2.  否则，如果字符是`operator`
    1.  虽然顶部的`operator stack`优先级不低于此字符。
    2.  `operator`从弹出`operator stack`。
    3.  从 中弹出两个`operands`（`op1`和`op2`）`operand stack`。
    4.  存储`op1 op op2`在`operand stack`背面到 2.1。
3.  否则，如果字符是`)`，则与 2.2-2.4 相同，直到遇到`(`。

其他（没有更多字符可供阅读）：

*   弹出运算符直到`operator stack`不为空。
*   弹出顶部2`operands`和`push op1 op op2`.`operand stack`

从 中返回最高值`operand stack`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-25T12:30:19.923

[链接](http://csis.pace.edu/~murthy/ProgrammingProblems/16_Evaluation_of_infix_expressions)中给出的方法非常好。

让我引用来源：

```
We will use two stacks:

Operand stack: to keep values (numbers)  and

Operator stack: to keep operators (+, -, *, . and ^).  

In the following, “process” means, (i) pop operand stack once (value1) (ii) pop operator stack once (operator) (iii) pop operand stack again (value2) (iv) compute value1 operator  value2 (v) push the value obtained in operand stack.          

Algorithm:

Until the end of the expression is reached, get one character and perform only one of the steps (a) through (f):

(a) If the character is an operand, push it onto the operand stack.

(b) If the character is an operator, and the operator stack is empty then push it onto the operator stack.

(c) If the character is an operator and the operator stack is not empty, and the character's precedence is greater than the precedence of the stack top of operator stack, then push the character onto the operator stack.

(d) If the character is "(", then push it onto operator stack.

(e) If the character is ")", then "process" as explained above until the corresponding "(" is encountered in operator stack.  At this stage POP the operator stack and ignore "(."

(f) If cases (a), (b), (c), (d) and (e) do not apply, then process as explained above.

 When there are no more input characters, keep processing until the operator stack becomes empty.  The values left in the operand stack is the final result of the expression. 
```

我希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-29T09:39:38.460

1.  创建一个空的运算符堆栈。
2.  创建一个空的操作数堆栈。
3.  对于输入字符串
    a 中的每个标记。获取中缀字符串中的下一个标记。
    湾。如果下一个是操作数，则将其放在操作数堆栈中。
    C。如果下一个标记是运算符
    *   评估运营商。
4.  当运算符堆栈不为空时，弹出运算符和操作数（左和右），评估左运算符右并将结果压入操作数堆栈。
5.  从运算符堆栈中弹出结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-25T14:48:30.713

下面是我在 java 中的中缀表达式求值的尝试。如果您发现任何错误，请告诉我:)

```
import java.util.*;

public class ArithmeticExpressionEvaluation {

    public static void main(String[] args) {
        Scanner readExpression = new Scanner(System.in);
        System.out.print("Enter the expression: ");
        String expression = readExpression.nextLine();
        System.out.println(expression);
        System.out.println("Result: " + calculateExpression(expression));
    }

    public static long calculateExpression(String expression) {

        Stack<Long> operandStack = new Stack<>();
        Stack<Character> operatorStack = new Stack<>();

        if (!isValidExpression(expression)) {
            System.out.println("Not a valid expression to evaluate");
            return 0;
        }

        int i = 0;
        String currentInteger = null;
        while (i < expression.length()) {

            // System.out.println(expression.charAt(i));
            if (expression.charAt(i) >= '0' && expression.charAt(i) <= '9') {

                currentInteger = expression.charAt(i) + "";
                i++;
                while (i != expression.length() && (expression.charAt(i) >= '0' && expression.charAt(i) <= '9')) {
                    currentInteger = currentInteger + expression.charAt(i);
                    i++;
                }

                operandStack.push(Long.parseLong(currentInteger));
            } else {

                if (expression.charAt(i) == ')') {

                    while (operatorStack.peek() != '(') {
                        performArithmeticOperation(operandStack, operatorStack);
                    }
                    operatorStack.pop();
                } else {

                    Character currentOperator = expression.charAt(i);
                    Character lastOperator = (operatorStack.isEmpty() ? null : operatorStack.peek());

                    if (lastOperator != null && checkPrecedence(currentOperator, lastOperator)) {
                        performArithmeticOperation(operandStack, operatorStack);
                    }
                    operatorStack.push(expression.charAt(i));

                }
                i++;
            }

        }

        while (!operatorStack.isEmpty()) {
            performArithmeticOperation(operandStack, operatorStack);
        }

    //    System.out.println(Arrays.toString(operandStack.toArray()));
    //    System.out.println(Arrays.toString(operatorStack.toArray()));

        return operandStack.pop();

    }

    public static void performArithmeticOperation(Stack<Long> operandStack, Stack<Character> operatorStack) {
        try {
            long value1 = operandStack.pop();
            long value2 = operandStack.pop();
            char operator = operatorStack.pop();

            long intermediateResult = arithmeticOperation(value1, value2, operator);
            operandStack.push(intermediateResult);
        } catch (EmptyStackException e) {
            System.out.println("Not a valid expression to evaluate");
            throw e;
        }
    }

    public static boolean checkPrecedence(Character operator1, Character operator2) {

        List<Character> precedenceList = new ArrayList<>();
        precedenceList.add('(');
        precedenceList.add(')');
        precedenceList.add('/');
        precedenceList.add('*');
        precedenceList.add('%');
        precedenceList.add('+');
        precedenceList.add('-');

        if(operator2 == '(' ){
            return false;
        }

        if (precedenceList.indexOf(operator1) > precedenceList.indexOf(operator2)) {
            return true;
        } else {
            return false;
        }

    }

    public static long arithmeticOperation(long value2, long value1, Character operator) {

        long result;

        switch (operator) {

            case '+':
                result = value1 + value2;
                break;

            case '-':
                result = value1 - value2;
                break;

            case '*':
                result = value1 * value2;
                break;

            case '/':
                result = value1 / value2;
                break;

            case '%':
                result = value1 % value2;
                break;

            default:
                result = value1 + value2;

        }
        return result;
    }

    public static boolean isValidExpression(String expression) {

        if ((!Character.isDigit(expression.charAt(0)) && !(expression.charAt(0) == '('))
                || (!Character.isDigit(expression.charAt(expression.length() - 1)) && !(expression.charAt(expression.length() - 1) == ')'))) {
            return false;
        }

        HashSet<Character> validCharactersSet = new HashSet<>();
        validCharactersSet.add('*');
        validCharactersSet.add('+');
        validCharactersSet.add('-');
        validCharactersSet.add('/');
        validCharactersSet.add('%');
        validCharactersSet.add('(');
        validCharactersSet.add(')');

        Stack<Character> validParenthesisCheck = new Stack<>();

        for (int i = 0; i < expression.length(); i++) {

            if (!Character.isDigit(expression.charAt(i)) && !validCharactersSet.contains(expression.charAt(i))) {
                return false;
            }

            if (expression.charAt(i) == '(') {
                validParenthesisCheck.push(expression.charAt(i));
            }

            if (expression.charAt(i) == ')') {

                if (validParenthesisCheck.isEmpty()) {
                    return false;
                }
                validParenthesisCheck.pop();
            }
        }

        if (validParenthesisCheck.isEmpty()) {
            return true;
        } else {
            return false;
        }
    }
} 
```

# azure - 存储阿拉伯语文本时从 Azure SQL Server 数据库获取未知字符

> ID：13421426
> 
> 赞同：0
> 
> 时间：2012-11-16T17:23:47.807
> 
> 标签：azure, azure-sql-database

我试图从 Azure SQL Server 数据库中获取阿拉伯文本

我在创建数据库时为我的数据库定义了许多排序规则，但它们仍然不起作用。将文本插入数据库我总是在阿拉伯语数据之前添加 'N' 字符。

与本地 SQL 服务器一起工作没问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:18:32.053

使用`NVARCHAR`列类型应该没有问题。我成功地将阿拉伯语文本放入 SQL Azure 表中（使用谷歌翻译将“Hello World”翻译成阿拉伯语，所以如果这些词实际上是其他词，请不要笑或辱骂）：

![SQL Azure 阿拉伯语](../Images/b505bf0fbe411fa82a1d5f17b39341a2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-10T20:20:46.393

在值（阿拉伯语）之前添加 N 是类型应该是 nvarchar ofcourse

# vim - vim - 在“替换”表达式中调用函数

> ID：13421430
> 
> 赞同：14
> 
> 时间：2012-11-16T17:23:54.483
> 
> 标签：vim

我知道您可以在 vim 搜索/替换操作中调用函数。例如：

```
%s/regex/\=localtime()/g 
```

将用当前纪元时间替换任何匹配“正则表达式”的内容。问题是，我无法在“替换”表达式中添加任何其他内容。例如：

```
%s/regex/epoch: \=localtime()/g 
```

不再将“本地时间”视为函数。相反，它只是将 'epoch: =localtime()' 打印为替换文本中的字符串。目的是让它打印'epoch：1353085984'。

有没有办法从替换表达式的任意部分调用函数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T17:31:39.677

一旦你使用了一个替换表达式，它必须是整个替换。您可以在表达式中使用字符串连接（并通过`submatch(1)`代替 引用捕获的元素`\1`），如下所示：

```
:%s/regex/\='epoch: ' . localtime()/g 
```

# c# - 计算 IEnumerable 的非空元素

> ID：13421433
> 
> 赞同：2
> 
> 时间：2012-11-16T17:24:07.450
> 
> 标签：c#, asp.net-mvc-3, count, ienumerable, httppostedfilebase

我在 asp .net mvc 3 中有一个视图模型

```
IEnumerable<HttpPostedFileBase> files 
```

在视图中，我有一个为这些文件创建 9 个输入标签的 for 循环。

我想在服务器端进行检查，以确保至少上传了 3 个文件。

我试着提出一个条件

```
if(files.Count() > 2) { // code here } 
```

但是，这会返回 9，因为它还计算空元素。

我可以考虑自己实现一个计数器，如下所示：

```
int count = 0;
@foreach(var file in files) {
  if(file != null && file.ContentLength > 0) { 
    count++; 
  }
} 
```

这是执行此操作的最佳方法，还是在 asp .net mvc 中已经为此提供了功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T17:26:26.767

```
files.Count(file=>file != null && file.ContentLength > 0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T17:27:26.330

使用谓词过滤计数：

```
files.Where(file => file != null).Count() 
```

或者更简单，只是`files.Count(file => file != null)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:37:13.037

任何时候你看到你的范式`enumerable.Count() > X`都可以使用下面的方法，一旦你知道你有足够的物品，它就会给你带来结束的好处：

```
public static bool HasAtLeast<T>(IEnumerable<T> source, int number)
{
    return source.Skip(number - 1).Any();
} 
```

鉴于该方法，您可以编写：

```
if(files.Where(file => file != null && file.ContentLength > 0)
    .HasAtLeast(2))
{
    //code goes here
} 
```

现在，这是一项重大改进吗？不，可能不是。您需要执行此代码很多很多次，有一个巨大的枚举，或者有一个枚举成本很高的枚举（例如，如果它是执行长时间运行方法的 LINQ 查询的结果），它才能事情。如果您不使用`HasAtLeast`它自己的方法，它也会降低可读性，因此仅此一项就不值得（通常很小）的性能优势。

# c++ - C++ STL map::find() 问题

> ID：13421434
> 
> 赞同：-2
> 
> 时间：2012-11-16T17:24:14.437
> 
> 标签：c++, stl, maps, find, breadth-first-search

我正在为一个简单的编程问题编写解决方案，但我无法让 map::find() 工作。我在使用 BFS 时使用地图来标记访问的顶点。我知道我可以使用其他一些数据结构，例如 2D bool 数组，但我真的很想让它与地图一起使用。这是我的代码： http: [//pastebin.com/mANej4vp](http://pastebin.com/mANej4vp)

问题是visited[tempR] 始终为真，即使尚未访问tempR 位置。而且visited.size() 为1，但它同时响应visited[now] 和visited[tempR] 为真；而 tempR 不等于现在。

Duom.in 文件应包含以下内容：http: [//pastebin.com/L7qMG0bd](http://pastebin.com/L7qMG0bd)

你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:36:56.053

你的`operator<`和 `operator==`不一致

两个职位

```
pos p1 = {1, 2, 3, 4};
pos p2 = {1, 10, 20, 30};

bool b1 = !(p1 < p2) && !(p2 < p1);
bool b2 = p1 == p2; 
```

`b1`是真的，所以`b2`根据定义必须是真的，但事实并非如此。

换句话说，重写你`operator<`做适当的比较，而不仅仅是`Hx`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:34:06.857

我还没有调试过你的代码，我也不是很理解，但是`bool operator<(const pos& a) const`对我来说似乎是相反的语义。

考虑到 std::map 只使用那个应该返回的成员运算符， `this->Hx < a.Hx`至少如果 Hx 代表一个正坐标。它应该是一个*总*顺序，作为 2D 坐标似乎你应该使用 x & y 的组合......

# c# - 我应该在哪里实现用户权限

> ID：13421437
> 
> 赞同：0
> 
> 时间：2012-11-16T17:24:24.503
> 
> 标签：c#, database, postgresql, database-design

我将使用 C# 和数据库`PostgreSQL`通过.NET 编写一个 .NET 应用程序`Npgsql`。该应用程序将允许用户访问数据库。每个用户都有自己的 ID 和密码。一些用户能够编辑/更新他们的数据，而另一些用户则不能，他们只能读取数据。

我想问一下我应该如何/在哪里实现用户权限/权限，在数据库引擎或应用程序本身上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:25:06.970

我只会在应用程序中处理它。如果用户 A 有这样的帐户类型，那么他可以执行 1 和 2，依此类推。然后只需基于此调用适当的方法。

# c - 如何将一个文件拆分为两个文件以获取 40 万条记录

> ID：13421438
> 
> 赞同：2
> 
> 时间：2012-11-16T17:24:23.750
> 
> 标签：c, file, split, data-cleaning

我正在尝试根据标签将我的输入数据文件分成两个输出文件。下面是我的代码。下面的代码仅适用于较少数量的记录，但它进入分段错误更多没有。行。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main(int argc,char *argv[])
{
        FILE *fp,*fp1,*fp2,*fp3;
        char *filename,line[80],line1[80];
        char *token,*token1,mystr[10];

        filename=(char *)argv[1];
        fp=fopen(filename,"r");

        if(fp ==NULL) //Checking whether the command line argument was correctly or not.
        printf("There is no such file in the directory.\n");

        if(remove("sales_ok_fraud.txt") != 0) //Checking for file existence.
        perror("Error in deleting the file.\n");
        else
        printf("The existing cleansed data file is successfully deleted.\n");

        if(remove("sales_unknwn.txt") != 0) //Checking for file existence.
        perror("Error in deleting the file.\n");
        else
        printf("The existing cleansed data file is successfully deleted.\n");

        while(fgets(line,80,fp)!=NULL) //Reading each line from file to calculate the file size.
        {
                strcpy(line1,line);
                token = strtok(line,",");
                token = strtok(NULL,",");
                token = strtok(NULL,",");
                token = strtok(NULL,",");
                token = strtok(NULL,",");
                token = strtok(NULL,",");
                token1 = strtok(token,"\n");
                memcpy(mystr,&token1[0],strlen(token1)-1);
                mystr[strlen(token1)-1] = '\0';

                if( strcmp(mystr,"ok") == 0 )
                {
                        fp1=fopen("sales_ok_fraud.txt","a");//Opening the file in append mode.
    fprintf(fp1,"%s",line1);//Writing into the file.
                        fclose(fp2);//Closing the file.

                        //printf("Inside ok - %s\n",mystr);
                }
                else if( strcmp(mystr,"fraud") == 0)
                {
                        fp2=fopen("sales_ok_fraud.txt","a");//Opening the file in append mode.
                        fprintf(fp2,"%s",line1);//Writing into the file.
                        fclose(fp2);//Closing the file.
                        //printf("Inside fraud - %s\n",mystr);
                }
                else
                {
                        fp3=fopen("sales_unknwn.txt","a");//Opening the file in append mode.
                        fprintf(fp3,"%s",line1);//Writing into the file.
                        fclose(fp3);//Closing the file.
                        //printf("This is unknown record.\n");
                }
        }

        fclose(fp);

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:38:37.203

我在您的代码中看到了一些问题，首先返回*不*`strlen`包括空字节的字符串长度，所以您不需要（这就是为什么它可能与任何不匹配的原因）*`-1``strcmp`*

 *```
memcpy(mystr, &token1[0], strlen(token1));
mystr[strlen(token1)] = '\0'; 
```

在这里我认为你应该关闭`fp1`

```
fp1=fopen("sales_ok_fraud.txt","a");  //you open f1
fprintf(fp1,"%s",line1);              //you write
fclose(fp2);//Closing the file.       //you close fp2 
```

注意：你应该确保它`token1`不会溢出`mystr`。*

# .htaccess - 使用 htaccess 重定向端口：2082

> ID：13421444
> 
> 赞同：0
> 
> 时间：2012-11-16T17:24:33.003
> 
> 标签：.htaccess, mod-rewrite, redirect, cpanel, whm

我做了很多搜索，也看到了很多结果，实际上没有任何效果。

无论如何，我想要做的是将端口 2083 重定向到不同的 URL，例如使用端口 1234、127.0.0.0:1234 的 IP（这是用于 cpanel 顺便说一句），访问时如下：

```
domain.com:2083 
```

它应该重定向到：

```
127.0.0.1:1234 
```

我已经将 domain.com/cpanel 重定向到上面显示的 127.0.0.1 示例，并在我的 htaccess 中使用以下代码：

```
RedirectMatch 301 /cpanel(.*) http://127.0.0.1:1234/$1 
```

但只是这个端口无法正常工作。

基本上，我想做的是禁用通过 domain.com 登录到 cpanel/WHM 并只允许通过服务器 IP，但我想这是不可能的，因为我配置的 Web 服务器以充当代理服务器的方式，所以我可以做的是将 domain.com:2082 重定向到原始服务器 IP。

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:38:43.773

这对 cPanel 不起作用，因为 cPanel 正在侦听端口 2083，而不是 Apache。我建议使用 iptables 规则来实现您的目标：

```
iptables -I INPUT -p tcp --dport 2083 -j REJECT
iptables -I INPUT -p tcp --dport 2083 -s 127.0.0.1 -j ACCEPT 
```

这些命令的运行顺序很重要，因为 iptables 规则是按顺序处理的。

# c# - wp7列表框元素点击“发件人”对象的唯一性

> ID：13421450
> 
> 赞同：2
> 
> 时间：2012-11-16T17:24:41.617
> 
> 标签：c#, windows-phone-7, listbox

listboxitem 内部发件人出现了一个奇怪的情况（我只是认为这个发件人是罪魁祸首，但不确定......）

ListBox有**ItemTemplate**：

```
<ListBox x:Name="list">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel x:Name="stack_panel">
                    <Image Source="{Binding ImageSource}" Tap="Image_Tap"></Image>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
</ListBox> 
```

ListBox 中的每个项目都有一个带有**点击**事件的图像：

```
private void Image_Tap(object sender, GestureEventArgs e)
{
   Image i = (Image)sender;
   i.Source = new BitmapImage(new Uri("Images/yellow.png", UriKind.RelativeOrAbsolute));
} 
```

此外，还有一个用于轻松更改图像的**类：**

```
public class listItems
{
    public string ImageSource { get; set; }
} 
```

对。现在我准备在列表框中添加一些元素：

```
for (int i = 0; i < 100;i++)
   list.Items.Add(new listItems
   {
       ImageSource = "Images/black.png"
   }); 
```

所以，让我们点击第零个太阳图像：

![图 1](../Images/000d9cabb44a9d569b923e76cdaeebab.png)

一切都好！让我们继续，然后点击第二张图片：

![图 2](../Images/85d5e2fd1e2c881eb0f8eb89304c82d6.png)

对，阳光明媚……但是……停下，那是什么？0_o

![在此处输入图像描述](../Images/b91f168c4475174912a7107a30c092cd.png)

我没有点击这个项目，但它的图像已经改变了！这不仅发生在 th 项目上，也发生在其他一些随机项目（53、81、...）

你怎么看待这件事？发件人可以参考许多元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:31:41.443

> 你怎么看待这件事？

默认情况下，列表框控件重用可视项来优化性能。您可以根据需要将其关闭，但是对于您的 100 个项目，性能当然会下降。

有更好的解决方案。您应该将选择状态存储在模型中的某个位置，而不仅仅是在可视化树中，而不是您正在做的事情。

您的项目类别可能是：

```
public class listItems: INotifyPropertyChanged
{
    bool _selected = false;
    public bool isSelected
    {
        get { return _selected; }
        set 
        {
            if( value == _selected )
                return;
            _selected = value;
            var pc = this.PropertyChanged;
            if( null != pc )
                pc( this, new PropertyChangedEventArgs( "ImageSource" ) );
        }
    }

    public string ImageSource { get { return _selected ? "Images/yellow.png" : "Images/black.png"; } }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

INotifyPropertyChanged 接口允许通知可视化树关于属性更改。

这是水龙头处理程序：

```
void Image_Tap( object sender, GestureEventArgs e )
{
    Image img = (Image)sender;
    listItems item = (listItems)img.DataContext;
    item.isSelected = true;
} 
```

# php - 如何根据 MediaWiki 用户表哈希密码验证密码？

> ID：13421457
> 
> 赞同：1
> 
> 时间：2012-11-16T17:25:10.600
> 
> 标签：php, hash, passwords, mediawiki

我正在尝试将我的聊天应用程序登录名与我的 MediaWiki 登录名结合起来。聊天应用程序有一种奇怪的身份验证方式，我已对其进行了修改以与数据库一起使用。

我试图将用户在聊天登录中输入的密码与存储在 MediaWiki 用户表中的密码匹配，但我无法弄清楚 MediaWiki 如何散列其密码。我知道我正在使用默认的加盐哈希。有没有人有可以重新创建这个的功能？

我努力了：

```
hash('md5', $password); 
```

但还有更多我无法弄清楚的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:49:49.253

这一切都在我的脑海中，但是：

```
<?php
//let's pretend these were entered by the user trying to authenticate
$username = 'ted';
$password = 'password';

//PDO-like syntax. I wrote my own class around it and I don't remember how to do it raw.
$query = "SELECT pw_hash FROM user_table WHERE username = ?";
$rs = $dbh->doQuery($query, array($username));
if( count($rs) == 0 ) { throw new Exception('no user'); }

//will be either
//:A:5f4dcc3b5aa765d61d8327deb882cf99
//:B:838c83e1:e4ab7024509eef084cdabd03d8b2972c

$parts = explode(':', $rs[0]['pw_hash']);
print_r($parts); //$parts[0] will be blank because of leading ':'

switch($parts[1]) {
    case 'A':
        $given_hash = md5($password);
        $stored_hash = $parts[2];
        break;
    case 'B':
        $given_hash = md5($parts[2] . md5($password));
        $stored_hash = $parts[3];
        break;
    default:
        throw new Exception('Unknown hash type');
        break;
}

if( $given_hash === $stored_hash) {
    echo "login was succesful.";
} else {
    echo "login failed.";
} 
```

[通过此链接](http://www.mediawiki.org/wiki/Manual_talk%3aUser_table)到 mediawiki 文档，支持杰克对问题的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:40:46.637

如果相信[此 wiki 页面](http://www.mediawiki.org/wiki/Manual_talk%3aUser_table)，要根据存储的数据库值验证密码，您可以执行以下操作：

```
list($dummy, $type, $salt, $hash) = explode(':', $db_password);

$pwd_hash = md5($user_password);
if ($type == 'B' && md5("$salt-$pwd_hash") === $hash) {
    // yay success, type B
} elseif ($type == 'A' && $salt === $pwd_hash) {
    // yay success, type A
} else {
    // password is wrong or stored password is in an unknown format
} 
```

Assuming`$db_password`是数据库值，并且`$user_password`是提供的要验证的密码。

# sql - 使用 SQL 使数据库中的列与相等的行相等

> ID：13421461
> 
> 赞同：1
> 
> 时间：2012-11-16T17:25:32.337
> 
> 标签：sql, ruby-on-rails, ruby, postgresql

**表结构：**

```
uid       : integer
answer_id : integer 
```

我需要运行一个查询，它会告诉我哪个 uid 的答案与其他 uid 的答案相同。例如，这里有一些测试数据：

```
answer_id   uid
1           555
4           555
7           555
10          555
1           123
5           123
7           123
10          123 
```

所以我们可以从这些数据中看到，他们每个人都以相同的方式回答了 3/4 的问题。

我正在努力编写一个查询，该查询会告诉我哪个 uid 匹配相同答案的 3/4 或 4/4。基本上，我试图找到具有 75% (3/4) 或更高 (4/4) 类似答案的用户。

这是 Ruby on Rails 应用程序的一部分，所以我构建了所有模型 [User, UserAnswers etc..] 但我假设这只是一个 SQL 查询，不一定是 ActiveRecord 的一部分

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:39:51.007

此查询显示每个用户彼此共有的答案数量：

```
declare @uid int

select
  ans1.uid as user1,
  ans2.uid as user2,
  count(*)
from 
  ans ans1 inner join ans ans2
  on ans1.answer_id = ans2.answer_id
     and ans1.uid <> ans2.uid
where uid = @uid
group by user1, user2
having count(*)>0 
```

这还显示了每个用户已回答的问题数量：

```
 select
  ans1.uid as user1,
  ans2.uid as user2,
  count(distinct ans1.answer_id) as total1,
  count(distinct ans2.answer_id) as total2,
  sum(case when ans1.answer_id = ans2.answer_id then 1 else 0 end) as common
from 
  ans ans1 inner join ans ans2 on ans1.uid <> ans2.uid
group by user1, user2
having count(*)>0 
```

（这第二个查询可能很慢）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T18:33:18.920

FThiella 的回答很有效。但是，不需要进行笛卡尔积连接。以下版本产生相同的计数，但没有如此复杂的连接：

```
select ans1.uid as user1,
       ans2.uid as user2,
       max(ans1.numanswers) as total1,
       max(ans2.numanswers) as total2,
       count(*) as common
from (select a.*, count(*) over (partition by uid) as numanswers,
      from UserAnswers a
     ) ans1 inner join
     (select a.*, count(*) over (partition by uid) as numanswers
      from UserAnswers a
     ) ans2
     on ans1.uid <> ans2.uid and
        ans1.answer_id = ans2.answer_id
group by ans1.uid, ans2.uid 
```

与其他答案一样，这不包括没有共同答案的用户对。

# .htaccess - htaccess 访问控制允许来源

> ID：13421463
> 
> 赞同：170
> 
> 时间：2012-11-16T17:25:35.957
> 
> 标签：.htaccess, cors, cross-domain

我正在创建一个在其他站点上从外部加载的脚本。它加载 CSS 和 HTML 并在我自己的服务器上正常工作。

但是，当我在另一个网站上尝试它时，它会显示这个可怕的错误：

```
Access-Control-Allow-Origin 
```

在这里你可以看到它完美加载： http: [//tzook.info/bot/](http://tzook.info/bot/)

但在这个其他网站上显示错误： [http ://cantloseweight.co/robot/](http://cantloseweight.co/robot/)

我将加载脚本上传到 jsfiddle：http: [//jsfiddle.net/TL5LK/](http://jsfiddle.net/TL5LK/)

我尝试像这样编辑 htaccess 文件：

```
<IfModule mod_headers.c>    
    Header set Access-Control-Allow-Origin *
</IfModule> 
```

或者像这样：

```
Header set Access-Control-Allow-Origin * 
```

但它仍然不起作用。

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2012-12-14T00:40:09.090

在外部根文件夹的 .htaccess 中试试这个：

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule> 
```

如果它只涉及 .js 脚本，你应该将上面的代码包装在这个里面：

```
<FilesMatch "\.(js)$">
...
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-12-08T11:47:30.747

没有人说您还必须启用**mod_headers**，所以如果仍然无法正常工作，请尝试以下操作：

（以下提示适用于 Ubuntu，不知道其他发行版）

你可以检查加载的模块列表

```
apache2ctl -M 
```

启用 mod_headers 你可以使用

```
a2enmod headers 
```

当然，在 Apache 中进行任何更改后，您必须重新启动它：

```
/etc/init.d/apache2 restart 
```

然后你可以使用

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule> 
```

如果 mod_headers 没有激活，这条线将什么也不做。您可以尝试跳过 if 子句并仅添加`Header set Access-Control-Allow-Origin "*"`您的配置，然后如果 mod_headers 未激活，它应该在启动期间抛出错误。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-06-14T14:37:02.057

根据我的经验；

如果它不能从内部工作，`php`那么`.htaccess`它对我有用

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin http://www.vknyvz.com  
    Header set Access-Control-Allow-Credentials true
</IfModule> 
```

*   凭据可以是真或假，具体取决于您的 ajax 请求参数

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2015-04-07T05:46:52.797

`.htaccess`如果在访问字体时遇到问题，请将具有以下指令的文件添加到字体文件夹。可以轻松修改以用于**.css**或**.js**文件。

```
<FilesMatch "\.(eot|ttf|otf|woff)$">
    Header set Access-Control-Allow-Origin "*"
</FilesMatch> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-01-13T05:40:39.163

在 Zend Framework 2.0 中我遇到了这个问题。可以通过两种方式解决 .htaccess 或 php header 我更喜欢 .htaccess 所以我修改了 .htaccess 从：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

到

```
RewriteEngine On

<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule>

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

它开始工作

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-04-07T08:01:04.833

其他答案对我不起作用，这就是最终为 apache2 做的伎俩：

1）启用标题模块：

`sudo a2enmod headers`

2）创建`/etc/apache2/mods-enabled/headers.conf`文件并插入：

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule> 
```

3）重启你的服务器：

`sudo service apache2 restart`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-04-03T22:56:43.447

顺便说一句：.htaccess 配置必须在托管 API 的服务器上完成。例如，您在 x.com 域上创建一个 AngularJS 应用程序并在 y.com 上创建一个 Rest API，您应该在 y.com 的根文件夹上的 .htaccess 文件中设置 Access-Control-Allow-Origin "*" 而不是 x .com :)

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule> 
```

同样正如 Lukas 提到的，如果您使用 Apache，请确保您已启用 mod_headers

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-17T19:48:12.323

确保您没有发生重定向。如果您未在 URL 中包含尾部斜杠，则可能会发生这种情况。

有关更多详细信息，请参阅此答案– [https://stackoverflow.com/a/27872891/614524](https://stackoverflow.com/a/27872891/614524)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-29T12:10:53.327

如果您的主机不在 pvn 或专用，则很难重新启动服务器。

我提供了更好的解决方案，只需编辑您的 CSS 文件（在另一个域或您的子域）调用字体 eot、woff 等到您的来源（您的域或 www yourdomain）。它会解决你的问题。

我的意思是，将 css 上的相对 url 编辑为绝对 url 源域

# ruby - sinatra 错误重定向

> ID：13421465
> 
> 赞同：2
> 
> 时间：2012-11-16T17:25:45.163
> 
> 标签：ruby, heroku, sinatra

我在 Sinatra 模块化应用程序中重定向错误时遇到问题。我在 Heroku 上进行部署，当出现错误时，应用程序会死掉。

我希望它能够捕捉到这个错误，重定向到错误页面并正常运行。

我在我的基类中设置了如下内容：

```
set :raise_errors, false 
```

和

```
error do
    redirect to('/')
end 
```

但是当我`raise`从路由块内出错时，它只会进入标准的 Sinatra 错误页面。

我需要做什么来捕获我的错误并重定向？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T00:38:05.223

你还需要

```
set :show_exceptions, false 
```

这是一个简单的演示

```
require "sinatra"

class App < Sinatra::Base

    set :raise_errors, false
    set :show_exceptions, false

    get '/' do
        return 'Hello, World!'
    end

    get '/error' do
        return 'You tried to divide by zero!'
    end

    get '/not-found' do
        return 'There is nothing there'
    end

    get '/raise500' do
        raise 500
    end

    get '/divide-by-zero' do
        x = 5/0
    end

    error do
        redirect to('/')
    end

    error 404 do
        redirect to('/not-found')
    end

    error ZeroDivisionError do
        redirect to('/error')
    end

end 
```

没有`:show_exceptions`设置`/raise500`并`/divide-by-zero`返回通用的 Sinatra 错误页面，但有了它，它们会按照您的预期重定向。

# jquery - 如何修复显示在 DOM 末尾而不是其选择器旁边的 Bootstrap 工具提示

> ID：13421470
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:26:01.993
> 
> 标签：jquery, twitter-bootstrap, tooltip

我之前已经实现了 twitter 引导工具提示。但是这次当我这样做时，工具提示 div 显示在 DOM 的末尾，紧挨着`</body>`标记之前。我有工具提示设置来处理任何 href rel="tooltip"。[您可以在http://papershare.ravennainteractive.com/publish/](http://papershare.ravennainteractive.com/publish/)看到问题页面中间是（测试）此链接应该显示工具提示。当您将鼠标悬停时，工具提示出现在 DOM 上（使用 Chrome 检查器），但在页面上不可见。

我很困惑为什么它会这样做。我已经检查了引导站点并搜索了几个小时，现在试图自己解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:27:48.623

那么这是你的问题：

book.css 第 44 行：

.tooltip { 可见性：隐藏；}

# android - 使用 textview 的 Android 计算器

> ID：13421471
> 
> 赞同：-4
> 
> 时间：2012-11-16T17:26:14.510
> 
> 标签：android, textview

我正在尝试构建一个计算器应用程序。每当用户单击按钮时，我都会使用 textview 从按钮接收值。但是当用户第二次点击按钮时，textview 中的值会被前一个按钮的值覆盖。但我想在 textview 中获得全部价值。例如：假设用户点击 1 然后 2，然后 3 出现在 textview 中的数字将是 123。所以请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T17:27:55.760

> 当用户第二次单击按钮时，textview 中的值将被前一个按钮的值覆盖

使用[`append()`](http://developer.android.com/reference/android/widget/TextView.html#append%28java.lang.CharSequence%29)而不是`setText()`添加到 TextView 中的现有字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:29:11.213

为此，您需要将数字添加到文本视图中的字符串，而不是替换它。将以下内容放入`onClick`每个按钮的方法中

```
String s = textview.getText().toString();
textview.setText(s + "1") 
```

# excel - 即使在调用 Quit 后，Excel 进程仍然有效

> ID：13421472
> 
> 赞同：0
> 
> 时间：2012-11-16T17:26:23.907
> 
> 标签：excel, devexpress, export-to-excel, excel-interop

我正在使用 Devexpress Exporter 创建 Excel 表，然后将文件保存在特定位置。

创建文件后，我必须打开它，添加项目的下拉列表，然后将其再次保存在同一位置。

完成所有操作后，文件必须自动通过电子邮件发送到数据库中的电子邮件地址。

现在，如果我有 1000 个电子邮件地址，并且为了自动化这个过程，它会创建超过 10 个 Excel 实例。

如何停止创建这些实例以及如何在不使用更多内存的情况下使用 excel 操作。

代码如下：

```
protected string CreateExcelFile(string FilterName)
{       
    Random ranNumber = new Random();
    int number = ranNumber.Next(0, 10000000);
    string FileName = "TestDoc"+DateTime.Now.Year.ToString()+number.ToString()+DateTime.Now.Second.ToString()+".xls";
    string path = @"c:\TestDocuments\"+FileName;            
    Directory.CreateDirectory(Path.GetDirectoryName(path));
    FileStream fs = new FileStream(path, FileMode.OpenOrCreate);
    XlsExportOptions options = new XlsExportOptions();
    options.ExportHyperlinks = false;
    ASPxExporter.WriteXls(fs, options);
    fs.Close();     
    AddDropDownToExcel(path);   
    return path;    
}
//Adding The Dropdownlist Of Items TO Generated Excel Sheet
protected void AddDropDownToExcel(string path)
{
         Microsoft.Office.Interop.Excel.Application application = new Microsoft.Office.Interop.Excel.Application();     
    string fileName = path.Replace("\\", "\\\\");
    string RowCount = "F" + (testgrid.VisibleRowCount + 1).ToString();
    // Open Excel and get first worksheet.      
    var workbook = application.Workbooks.Open(fileName);
    var worksheet = workbook.Worksheets[1] as Microsoft.Office.Interop.Excel.Worksheet;
    // Set range for dropdownlist
    var rangeNewStatus = worksheet.get_Range("F2", RowCount);
    rangeNewStatus.ColumnWidth = 20;
    rangeNewStatus.Validation.Add(Microsoft.Office.Interop.Excel.XlDVType.xlValidateList, Microsoft.Office.Interop.Excel.XlDVAlertStyle.xlValidAlertStop,
    Microsoft.Office.Interop.Excel.XlFormatConditionOperator.xlBetween, "Item1,Item2,Item3,Item4");
    // Save.
    workbook.Save();
    workbook.Close(Microsoft.Office.Interop.Excel.XlSaveAction.xlSaveChanges, Type.Missing, Type.Missing);
    application.Quit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:02:41.877

首先，我真诚地希望这不是在服务器上运行。

然后，如果您的问题是创建了太多的 Excel 实例，那么一个想法是“不要每次都创建一个实例”。不是每次调用 AddDropDownToExcel 时都启动 Excel，您可以重用同一个实例吗？

您遇到的问题经常出现在 Excel 互操作场景中；即使您完成并告诉 Excel 关闭，它“仍然存在”。这通常是由于您的应用程序仍然持有对尚未释放的 COM 对象的引用，从而阻止 Excel 关闭。这个 StackOverflow 答案提供了一些指示：[https ://stackoverflow.com/a/158752/114519](https://stackoverflow.com/a/158752/114519)

通常，为避免该问题，您需要遵循“单点”规则。例如，在您的代码中：

```
var workbook = application.Workbooks.Open(fileName); 
```

将是一个问题，因为创建了工作簿的“匿名”包装，并且可能无法正确处理。“一个点”规则会说“在使用 Excel 互操作时不要使用多个点”，在这种情况下：

```
var workbooks = application.Workbooks;
var workbook = workbooks.Open(fileName); 
```

一个完全不同的想法——你不能使用 OpenXML 来生成 Excel 文件，而不是使用 Interop？我从未尝试过用它来创建下拉菜单，但如果它支持它，它会比 Interop 快得多，而且不会发生你遇到的那种问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:44:26.070

据我所知，runnig excel.exe 进程数量的增长是 excel 的“正常”情况 :)
最愚蠢的建议就是有时杀死它的进程。但是，如果您在应用程序工作期间使用 excel，这种方式绝对没有帮助，因为您宁愿不知道哪个 excel.exe 是您的。

# python - 如何在 django 模板中打印有关用户（已登录）的信息？

> ID：13421480
> 
> 赞同：0
> 
> 时间：2012-11-16T17:27:01.013
> 
> 标签：python, django

我有这样的模板：

```
<html>
<body>
You are logged as John Kowalski
</body>
</html> 
```

我想显示用户的名字和姓氏，但这不起作用：

```
<html>
<body>
You are logged as {{ request.user.first_name }} {{ request.user.last_name }}
</body>
</html> 
```

如何在模板中获取用户对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:35:19.537

你需要做几件事：

首先，将以下内容添加到您的设置中：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.request', 
) 
```

（您可以添加其他上下文处理器，但这是相关的。）

其次，在您看来：

导入这个：

```
from django.template import RequestContext 
```

在您的视图中，返回您的模板，如下所示：

```
return render_to_response('something.html', context_instance=RequestContext(request)) 
```

您现在可以访问`request`模板中的对象。

在此处了解更多信息：[https ://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)

# deployment - 部署 MVC 4 应用程序 4.5 框架 1and1 托管

> ID：13421488
> 
> 赞同：1
> 
> 时间：2012-11-16T17:27:15.470
> 
> 标签：deployment, asp.net-mvc-4, web-deployment, http-status-code-403

我正在尝试通过 1and1.com 上的 FTP 在 vs2012 中部署一个 mvc 4 项目

这就是我得到的。

> HTTP 错误 403.14 - 禁止 Web 服务器配置为不列出此目录的内容。

1and1 上是否有设置我需要在某处设置，因为它是 MVC 项目或 webconfig 中的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T22:56:34.510

@dright，您还遇到问题吗？看来 1and1.com 已经更新了他们的托管包以支持 4/4.5 框架及其基本 Windows 托管计划 ( [https://www.1and1.com/windows-hosting?linkId=hd.subnav.windowshosting](https://www.1and1.com/windows-hosting?linkId=hd.subnav.windowshosting) )。我购买了一个计划作为沙盒，用于部署我开发的小应用程序。

我已经使用 WebMatrix IDE 成功部署了一个 Asp.Net 应用程序。但我一直在努力使用 VS2013 模板/默认应用程序的 Web.Config。我很好奇你有没有运气。

谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T00:29:57.650

1and1 windows 包不支持 MVC。您需要更新到他们的服务器包。~59/月

# duplicates - 如何在 MS Access 2010 中查找和分组重复项？

> ID：13421489
> 
> 赞同：1
> 
> 时间：2012-11-16T17:27:20.447
> 
> 标签：duplicates

我正在尝试在 Access 2010 中的 2 列中查找重复条目并将它们组合在一起而不影响数据完整性（我总共有 20 列，其中 2 列包含随机行中的重复项）。我希望将包含重复项的行排成一行。

我有这个公式来查找重复项，但它似乎不起作用并且无论如何都不会对重复项进行分组。

```
SELECT t.IsParent, tbl.*
FROM (SELECT 
     parent.id , 1 AS IsParent, parent.[company url] as Col
FROM 
    tbl AS child INNER JOIN tbl AS parent ON child.domain_name = parent.[company url]
WHERE (((parent.domain_name)<>[parent].[company url]))
union all
SELECT 
    child.id , 0 AS IsParent,  child.[company url] as Col
FROM 
    tbl AS child INNER JOIN tbl AS parent ON child.domain_name = parent.[company url]
WHERE (((parent.domain_name)<>[parent].[company url]))
)  AS t INNER JOIN tbl ON t.id = tbl.id; 
```

我非常感谢帮助解决这个问题。

谢谢

# castle-windsor - 如何让 WcfFacility 和 Wcf 全局异常处理工作？

> ID：13421492
> 
> 赞同：0
> 
> 时间：2012-11-16T17:27:30.680
> 
> 标签：castle-windsor, castle, wcffacility

我已经部署了我的服务并将 Visual Studio 附加到进程以在一个 Visual Studio 实例中进行调试，而在另一个实例中我有一个在调试模式下运行的客户端控制台测试应用程序，我可以看到我调用的两种服务方法都在调试器中执行，但是在我故意抛出异常的第二个中，我根本看不到 ErrorHandlerBehavior 中的代码被调用。我对 ErrorHandlerBehavior 的注册不正确吗？

*我想知道我是否需要为此在我的服务配置中有一个行为扩展？*

我的全局异常处理基于此[示例](http://ianfnelson.com/archives/2010/04/09/wcf-global-exception-handling/)

这是我的服务程序主方法中的容器注册：

```
container.AddFacility<WcfFacility>(f => f.CloseTimeout = TimeSpan.Zero);

    container
        .Register(Component.For<WcfProtoType.IServiceProtoType>()
            .ImplementedBy<WcfProtoType.ProtoTypeService>()
            .Named("ProtoTypeService")
            .AsWcfService( new DefaultServiceModel()
                .AddEndpoints(WcfEndpoint
                    .BoundTo(new BasicHttpBinding(BasicHttpSecurityMode.None))
                    .At(baseUrl)

                    ).PublishMetadata(o => o.EnableHttpGet())),Component.For<ServiceBase>().ImplementedBy<MyService>(),
                    Component.For<ErrorHandlerBehavior>().Attribute("scope").Eq(WcfExtensionScope.Services)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:51:21.650

我查看了[Castle Windsor](https://en.wikipedia.org/wiki/Castle_Project#Features)的源代码，据我所知 EndPointBehavior 需要先像这样注册：

```
container
    .Register(Component.For<ErrorHandlerBehavior>().Attribute("scope").Eq(WcfExtensionScope.Services),
        Component.For<WcfProtoType.IServiceProtoType>()
            .ImplementedBy<WcfProtoType.ProtoTypeService>()
            .Named("ProtoTypeService")
            .AsWcfService( new DefaultServiceModel()
                .AddEndpoints(WcfEndpoint
                    .BoundTo(new BasicHttpBinding(BasicHttpSecurityMode.None))
                    .At(baseUrl)
                    ).PublishMetadata(o => o.EnableHttpGet())),Component.For<ServiceBase>().ImplementedBy<MyService>()); 
```

# google-app-engine - wtforms 应用引擎

> ID：13421495
> 
> 赞同：0
> 
> 时间：2012-11-16T17:27:35.597
> 
> 标签：google-app-engine, model, wtforms

我正在切换到在应用引擎中使用 webapp2。

我以前使用过 djangoforms，现在不支持。

我试过 wtforms，但似乎给了我错误：

进口

```
 from wtforms.ext.django.orm import model_form 
```

模型

```
class Systems(db.Model):
 field = db.StringProperty() 
```

看法

```
SystemsForm = model_form(Systems) 
```

错误

```
 model_fields = ((f.attname, f) for f in model._meta.fields)
AttributeError: type object 'Systems' has no attribute '_meta' 
```

# ios - Xcodebuild 存档位置

> ID：13421500
> 
> 赞同：13
> 
> 时间：2012-11-16T17:27:58.600
> 
> 标签：ios, xcode, command-line, archive, xcodebuild

我目前正在尝试使用以下命令行构建 .xcarchive：

```
xcodebuild -project onething.xcodeproj -target onething archive 
```

这将 .xcarchive 放置在一个很难找到的文件位置，所以我想知道是否有配置可以为存档设置文件位置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-22T15:53:58.920

xcode->首选项->位置->存档

![归档变化](../Images/8fe0415d26b85d07ee19f749aba9201e.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-06T16:36:01.147

xcodebuild 现在接受一个`-archivePath`参数。使用它来明确定义存档的输出位置。请注意，如果使用此功能，Organizer 将无法找到该文件。

[xcodebuild 手册页](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-18T09:02:21.720

Xcode 打开 Project 并进入 Build setting ，找到 enable Bitcode ，默认为 YES 设为 NO 并保存

还检查 build.json packageType 与 Apple id 证书的匹配，即开发

# c - atoi() 从 char 数组返回 0

> ID：13421501
> 
> 赞同：-3
> 
> 时间：2012-11-16T17:28:01.343
> 
> 标签：c

我正在编写一个程序，其中将标准输入读入缓冲区，然后进行处理。绝大多数需要处理的项目是字符串（或者是字符数组）。但是，我确实有一项需要作为字符数组读入，然后转换为 int 以便将来使用。

```
for(i=0; i<n; i++){
    num[i] = buff[(i)];
    printf("%c", num[i]);
}

convert = atoi(num); 
```

所以我确定正确的字符组被读入 num 因为 printf 是正确的。但是，当我尝试打印 convert 时，我最终得到了 0，而且我对自己做错了什么感到非常困惑。我知道返回 0 意味着无法执行有效的转换，但我不知道是什么使它无效。有小费吗？

编辑：抱歉之前没有包括这些>_<

n 是 buff 数组中的字符数 buff 是读取到的缓冲区数组 stdin

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:31:21.210

`atoi`是一个让您无法分析错误条件的函数。最重要的是，它在溢出情况下会产生未定义的行为。永远不要在现实生活中使用`atoi`（或小组中的`atof`任何东西）。`ato...`它实际上是没有用的。

要执行字符串到数字的转换，请使用`strtol`（和`strto...`组中的其他函数）。

现在，`num`在你打电话给你的那一刻，你的内心是什么`atoi`？您的`num`零终止是否正确？

# jquery - 使用响应式设计的 iPhone 设备上的链接和自动对焦问题

> ID：13421502
> 
> 赞同：2
> 
> 时间：2012-11-16T17:28:04.863
> 
> 标签：jquery, iphone, html, responsive-design, tel

我有一个非常奇怪的问题。我已将我们的网站转换为第一个响应式设计。在我们的移动版本中，我有一个带有 tel:(电话号码) 的 href，样式显示为图像。

链接下方是我们拥有的表格。有 javascript 将光标聚焦在第一个表单字段中。

我遇到的麻烦特别是在 iPhone 上。这只发生在页面的第一次加载第一次尝试触摸电话链接以拨打电话号码时。尝试再次点击电话号码，它会按预期运行。但是第一次尝试点击电话号码时，屏幕会跳下来并集中在一个表单字段上。但它实际上甚至不关注我关注的默认值。它将专注于第二个或第三个领域，它会有所不同。

现在，如果我从页面中删除自动对焦 javascript，那么问题就会消失。麻烦的是，我绝对希望在桌面版页面上使用此代码。

我正在加载 jquery 库 1.8.2、jquery 工具 1.2.7 和 Modernizer 2.6.2。不确定这些是否会导致冲突。

我会对三种信息解决方案中的任何一种感兴趣

1.  如何通过浏览器宽度关闭 javascript 以进行响应式设计。
2.  iPhone调试工具也许。
3.  或者当然是一个直接的解决方案。=)

感谢您的阅读和任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:20:09.737

这个方便的工具可以让你基于媒体查询运行 JS：[https ://github.com/paulirish/matchMedia.js/](https://github.com/paulirish/matchMedia.js/)

1.  从标记中删除自动对焦。

2.  设置类似：

    if (matchMedia('only screen and (min-width: 480px)').matches) { $('需要自动对焦的元素').attr('autofocus','TRUE'); }

我承认我不知道在我头顶上的元素上自动对焦的适当设置，而不是将值设置为“TRUE”，它可能需要一个“自动对焦”值。

# java - 如何从另一个类中获取私有字段？

> ID：13421503
> 
> 赞同：0
> 
> 时间：2012-11-16T17:28:05.077
> 
> 标签：java

我有一个名为 date 的课程：

```
public class Date{
    private String monthAndDate;
    public Date(String inputMonthAndDate){
        monthAndDate = inputMonthAndDate;
    }
} 
```

我有另一个班级叫做病人。是否可以从 Date 类中获取 monthAndDate 的语法并将其传递给 Patient 类中的私有字段？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T17:29:09.350

并非没有在您的`Date`课程中添加吸气剂。这是将字段设为私有*的一部分。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:30:23.303

您正试图违反数据封装概念。 `private`字段/方法只能在类中本地访问，对其他类不可用。

添加访问器方法，例如`getMonthAndadte()`返回类中的`monthAndDate`值`Date`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:30:37.960

注意：您应该避免使用标准 JDK 已经使用的名称来命名类。

要回答您的问题，您只需在 Date 类中提供一个吸气剂：

```
public class Date{
    private String monthAndDate;
    public Date(String inputMonthAndDate){
        monthAndDate = inputMonthAndDate;
    }
    public String getMonthAndDate(){
        return monthAndDate;
    }
} 
```

您现在可以调用：

```
String s = someDate.getMonthDate(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T17:30:48.643

您可以通过反射轻松完成此操作，但只有`Date`在您无法控制、没有合法的 API 来执行此操作且您绝对必须在考虑所有后果后才能使用它时才建议这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T17:30:58.237

访问您的私有字段的示例场景在此代码中：

```
public class Date
{
    private String monthAndDate;

    public Date(String inputMonthAndDate)
    {
        monthAndDate = inputMonthAndDate;
    }

    public String getMonthAndDate()
    {
        return monthAndDate;
    }
}

public class Parent
{
   private yetAnotherField;

   Parent()
   {
       this.yetAnotherField = (new Date("some string")).getMonthAndDate();
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-16T17:31:31.440

**2种方法来做到这一点：**

**-**在需要访问该字段的类中`Getter`用于字段`monthAndDate`和使用原则。`Composition`

**-**使用`Reflection`，这对初学者来说会有点困难。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-16T17:31:42.223

不是，`private`但你考虑过使用“包私有”吗？如果某些东西是“包私有的”，那么它只能被同一个包中的其他类看到。令人困惑的是它没有关键字......它是默认范围。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-16T17:32:12.757

您可以使用反射，但提供 getter 方法将是更好的解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-16T17:52:27.923

使用反射：

```
final Field field = Date.class.getDeclaredField("monthAndDate");
field.setAccessible(true);

final String monthAndDate = (String)field.get(date); 
```

（和

```
Date date = new Date("anything"); 
```

)

# objective-c - 在 UIWebview 中显示一组来自 REST api 调用的文章，其中包含 start 和 limit 参数

> ID：13421504
> 
> 赞同：0
> 
> 时间：2012-11-16T17:28:08.197
> 
> 标签：objective-c, ios, ios5, ios4

我想将一组带有介绍文本的文章从网站显示到 UIWebview 中。REST api 已经完成。

REST api 方法采用以下形式来检索一组文章： [http ://example.com/articles?start=0&limit=10](http://example.com/articles?start=0&limit=10)

"start" 和 "limit" 参数是可选的，如果未提供，REST api 将分别为 start 和 limit 参数采用默认值 0 和 10。

我检索了前 10 篇文章并将它们显示到 UIWebview 中。

当用户滚动到 UIWebview 的底部时，我想加载接下来的 10 篇文章，即我想触发以下查询并在 Web 视图中显示结果：

[http://example.com/articles?start=11&limit=10](http://example.com/articles?start=11&limit=10)

但是，我无法做到这一点。

我是 IOS 编程的新手，在这个主题上找不到任何帮助。感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:47:47.493

您必须创建自己的 UIWebView 子类。此类实现 UIScrollViewDelegate 协议，而这些正是您必须在此类子类中重写的方法。看看[这里的 UIScrollViewDelegate 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)

例如，您可能想要实施`- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate`

并跟踪参数的`contentOffset`属性`scrollView`。当它达到某个阈值时，您可以从 API 中检索更多内容，并相应地增加开始和限制并将其提供给您的 webview。对于您的 webview，这将是一种非常简单的延迟加载技术。

# jquery - Kendo UI Grid：按部分加载数据

> ID：13421505
> 
> 赞同：0
> 
> 时间：2012-11-16T17:28:16.193
> 
> 标签：jquery, kendo-ui, jquery-events

我有一个**网格**，我在其中显示来自大型数据库的数据；但是我需要**按部分显示数据**。我的意思是，我的数据库中有一个包含 10,000 行的表，我想在页面仅加载我的 Kendo UI Grid 中的前 10 行时显示，并且当用户**使用滚动并返回时进行新查询**（按块，例如第二次加载时为 200-300）并显示新数据而不会丢失前一个数据。

我在 DataTables 框架中看到了一些类似的东西，但是使用 kendo 选项我无法做到这一点。如果您需要更多信息，请询问我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:45:10.400

您正在寻找的是*远程数据的虚拟化，*您在 KendoUI 网站[http: //demos.kendoui.c​​om/web/grid/virtualization-remote-data.html 中有一个演示，并且在](http://demos.kendoui.com/web/grid/virtualization-remote-data.html)[此处输入链接描述](http://docs.kendoui.com/api/web/grid)中的文档。

基本上，您必须在网格中定义：

```
scrollable: {
     virtual: true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:04:44.043

```
@model IEnumerable<KendoUIMvcApplication1.Models.SiteMonitoring>

@{
    ViewBag.Title = "Site Monitoring";
}

<h2>@ViewBag.Message</h2>

@(Html.Kendo().Grid(Model)    
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(s => s.SiteId).Groupable(false);
        columns.Bound(s=> s.SiteName);
        columns.Bound(s=>s.SiteStatus);
        columns.Bound(s => s.UpdateTime);
        columns.Bound(s=>s.FuelLevel);
        columns.Bound(s => s.BatteryStrength);
        columns.Bound(s => s.DGStatus);
        columns.Bound(s => s.ACStatus);
        columns.Bound(s => s.DoorOpen);
    })

    ***.Scrollable(scrollable => scrollable.Virtual(true).Height(280))***

    .DataSource(dataSource => dataSource
     .Ajax()
    .PageSize(2)
    .Read(read => read.Action("Index", "SiteMonitoring"))
)
) 
```

当我向下滚动以查看下一条记录时，该页面需要无限时间来加载（实际上并未加载）。不知道是什么问题？

# android - SharedPreferences 麻烦的 nullpointerexception

> ID：13421509
> 
> 赞同：0
> 
> 时间：2012-11-16T17:28:44.297
> 
> 标签：android, nullpointerexception, sharedpreferences, android-preferences

（删除了帖子的旧内容）

编辑＃2：好的，所以现在我很清楚是编辑器试图达到导致空指针异常的首选项。关于如何解决它的任何帮助？

这是更新的活动：

```
 public SharedPreferences sharedPreferences;
 Editor editor;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // requesting to turn the title OFF
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // making it full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    // set our MainGamePanel as the View
    setContentView(new MainGamePanel(this));

 // Restore preferences

        this.sharedPreferences = getPreferences(MODE_PRIVATE);
        this.editor = sharedPreferences.edit();

        try {
        int wins = GetPreferences("wins");
        int fails = GetPreferences("fails");
        gamePanel.winn = wins;
        gamePanel.failn = fails;
        } catch (NullPointerException npe) {
            Log.d(TAG, "Nothing to load");
        }

    //INIT SOUND
    mSoundManager.initSounds(getBaseContext());
    //SOUNDS
    mSoundManager.addSound(1, R.raw.draw);
    mSoundManager.addSound(2, R.raw.cheer);
    mSoundManager.addSound(3, R.raw.boo);

}

@SuppressWarnings("deprecation")
@Override
public void onBackPressed() 
{
    super.onBackPressed();
    if (gamePanel.gamei==true) {
        gamePanel.back();
    } else if (gamePanel.menui==true) {
        finish();
        System.runFinalizersOnExit(true);
        System.exit(0);
    }
}

public void onPause() 
{
    super.onPause();
    //KILL ALL
    finish();
    System.runFinalizersOnExit(true);
    System.exit(0);
}

@Override
protected void onStop(){
   super.onStop();
  //KILL ALL
  finish();
  System.runFinalizersOnExit(true);
  System.exit(0);
}

public int GetPreferences(String key) {
    return sharedPreferences.getInt(key, 0);
}

public void SavePreferences(String key, int value) {
editor.putInt(key, value);    
editor.apply();  
} 

public void writeWin () { 
    SavePreferences("wins", gamePanel.winn);
}
public void writeFail () { 
    SavePreferences("fails", gamePanel.failn);
} 
```

*编辑器是导致 nullpointerexception: 的原因`this.editor = sharedPreferences.edit();`。*编辑：它是导致 nullpointerexception 的 sharedPreferences，而不是编辑器。

编辑器似乎无法达到 Preference: `this.sharedPreferences = getPreferences(MODE_PRIVATE);`。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:34:53.210

我终于通过使用监听器解决了它！它显然是在活动内部为空的游戏面板。转到此处了解更多信息： [尝试访问活动时出现 nullpointerexception](https://stackoverflow.com/questions/13439377/nullpointerexception-when-trying-to-reach-activity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:56:23.263

它看起来像声明

编辑编辑；

应该

SharedPreferences.Editor 编辑器；

# regex - 在 Perl 的帮助下更改文本

> ID：13421511
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:29:06.923
> 
> 标签：regex, perl

我想在 Perl 的帮助下更改一些文本。我想找到字符串“#blah bla blah” - 取消注释并在此字符串之后添加字符串“abс hhhh”、“dddd ccccc”。我如何在 /m、/s 或.. 的帮助下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:46:35.693

这应该取消注释并添加`$suffix`到末尾：

```
my $suffix = 'abс hhhh dddd ccccc';
$string =~ s{#(blah bla blah)}{$1 $suffix}g; 
```

更多信息在[perldoc perlre](http://perldoc.perl.org/perlre.html)和[perldoc perlretut](http://perldoc.perl.org/perlretut.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:32:19.503

```
use strict; use warnings;

while (<>) {
     s/^#(blah bla blah)/$1 abс hhhh dddd ccccc/;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:40:47.933

假设您拥有的文本在变量中`$text`：

```
$text =~ s/(#blah bla blah)/$1 abс hhhh dddd ccccc/g; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T18:12:46.613

```
perl -pi -e 's/^#blah bla blah/blah bla blah abс hhhh dddd ccccc/g' your_file 
```

# javascript - 如何从 MAP 的事件处理函数中获取对 IMG 元素的引用？

> ID：13421518
> 
> 赞同：0
> 
> 时间：2012-11-16T17:29:30.290
> 
> 标签：javascript, html, imagemap

假设我们有一个具有属性的`IMG`( `id`less) 元素。`usemap="#hotmap"`然后我们有这个`<MAP name="hotmap">`元素（在 中`BODY`）包含大量的`AREA`s（比如 >1000）。很明显，我们希望将`AREA`s 的事件处理委托给`MAP`元素，而不是创建数百个事件监听器。

现在在 eventhandler 函数 (for `MAP`) 中，我们希望获得对`IMG`使用`MAP`哪个触发事件的引用。但是，`MAP`is 在`BODY`and`IMG`元素中不能有 HTML，因此`MAP`不能在其子元素中。所以问题是，我们如何才能`IMG`在这个事件处理程序中捕捉到？

一个简单的例子：

```
<img src="some_image.png" usemap="#hotmap" />
                ...
<map id="map" name="hotmap">
    <area shape="circle" coords="100,100,50" />
                ...
</map>

map.addEventListener('click', function (e) {
    var area = e.target,
        image = ?; // How to refer the img
        ...
}, false); 
```

* * *

**旁注**

我正在开发一个 HTA 项目，我需要一个对象，该对象可以为具有某些自定义属性的图像动态创建和分配热图。该对象从外部文件中获取`AREA`s 的数据，一切正常，除了这个小细节。现在，我添加一个自定义属性，其中包含对 "user" 的引用`IMG`，每个`AREA`. 尽管这将是不必要的，但如果它只能在事件处理程序中执行一次。

**编辑**

[jsFiddle](http://jsfiddle.net/V2ZmT/3/)的现场演示，（不包括 HTA，适用于任何（？）现代浏览器）

* * *

**编辑二**

我刚刚意识到，我不能重用`MAP`，因为它也可以根据`IMG`. 所以我把对的引用`IMG`而`MAP`不是它`AREA`的s。

虽然这解决了我的问题，但我仍然想知道，`IMG`一般来说，如何获取事件处理程序。建议的`querySelector()`解决方案似乎不起作用（之前遇到过，现在返回了`undefined`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:04:21.577

**首先：**
小心你在那里使用的方法，HTA 默认使用 IE7（标准模式内容）或 IE5（怪癖模式内容）运行，因此你不能依赖 IE 中可用的功能。我建议只使用 IE5 中可用的方法，例如使用`attachEvent`而不是`addEventListener`.

按照[这篇文章](http://msdn.microsoft.com/de-de/library/ms536496%28v=vs.85%29.aspx#Compatibility) ，您应该能够定义兼容性，但对我来说它不起作用。

**与问题相关：**

不是观察地图的点击事件，而是观察对 img 的点击。
当您观察地图上的点击，并且该地图被多个图像使用时，无法找到地图和图像之间的关系。

# javascript - 通过单击带有 Javascript 的单词/链接来更改 div 内容

> ID：13421521
> 
> 赞同：0
> 
> 时间：2012-11-16T17:29:40.133
> 
> 标签：javascript, html, hyperlink

我基本上是想让一个词（第 2 页）可点击并充当显示不同 div 内容的链接。当他们选择选项 2，然后单击下一步按钮时，他们应该能够单击“第 2 页”测试并使其显示 id="test1"（选择 1，第 1 页）内容。我尝试了一些变量，但无法使任何变量起作用。我能做的最好的就是让它带你回到选择选项，但我想消除任何用户错误，直接进入他们应该做出的选择的第一页。
任何帮助将不胜感激。抱歉，JQuery 不是一个选项。

```
<!DOCTYPE html>
<html>
<center>
<head>
<title>Test2</title>
<script>
function formReset()
{
    document.getElementById("home").innerHTML ="";
    document.getElementById("main").style.display = 'block';
    document.getElementById("1").checked = false;
    document.getElementById("2").checked = false;
}
function nextPage()
{
    if (document.getElementById("1").checked == true){
        document.getElementById("home").innerHTML = document.getElementById("test1").innerHTML;
        document.getElementById("main").style.display = 'none';
        }
        else
    if (document.getElementById("2").checked == true){
        document.getElementById("home").innerHTML = document.getElementById("test2").innerHTML;
        document.getElementById("main").style.display = 'none';
        }
    return true;
}
function otherPage()
{
    switch (document.getElementById('home').innerHTML)
    {
        case document.getElementById("test2").innerHTML:
            (document.getElementById("home").innerHTML = document.getElementById("choice2_page2").innerHTML)
            break;
    }
}
</script>
</head>
<body>
 <h1>This is a test of the radio buttons</h1>
 <br />
 <div>
<form>
    <div id="home"></div>
    <div id="main">
    <input type="radio" name="grp1" id="1">1<br>
    <input type="radio" name="grp1" id="2">2<br>
    <br />
    <input type="button" name="button" value="Next" onClick="nextPage()">
    </div>
</form>
</div>
<div name="test1" id="test1" style="display:none"><!-- Display this content -->
  <h2>Choice 1<br>Page 1</h2>
  <input type="button" value="Reset" id="reset_form" onClick="formReset()">
</div>
<div name="test2" id="test2" style="display:none">
  <h2>Choice 2<br>Page 1</h2>
  <input type="button" value="Next" id="page_choice" onclick="otherPage()">
  <input type="button" value="Reset" id="reset_form" onClick="formReset()">
</div>
<div name="choice2_page2" id="choice2_page2" style="display:none">
<h2>You should have chose<br><b>Choice 1</b></h2><!-- When clicked, this "Choice 1" should display the contents of id="test1" (Choice 1, Page 1)-->
<input type="button" value="Reset" id="reset_form" onClick="formReset()">
</div>
</body>
</center>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:28:01.607

好的，我认为这就是您想要的，它可能有点大，但我猜它是您问题的完整解决方案。主要是你有一些页面，用户可以选择，先看哪个页面，然后你强迫用户一个接一个地看到所有的下一页，直到最后。至少，这是我在这里所做的。

您可以在 textContent 数组中添加任意数量的文本片段（页面），只需检查您是否有相应数量的单选按钮。

```
<html>
<head></head>
<body>
<div id="mainDiv" style="text-align: center">
    <div id="textDiv"></div>
    <div id="radioDiv">
        <input type="radio" id="rad1" name="radGrp"><label for="rad1">1</label><br>
        <input type="radio" id="rad2" name="radGrp"><label for="rad2">2</label><br>
        <input type="radio" id="rad3" name="radGrp"><label for="rad3">3</label><br>
        <input type="radio" id="rad4" name="radGrp"><label for="rad4">4</label><br>
        <input type="radio" id="rad5" name="radGrp"><label for="rad5">5</label><br>
    </div>
    <div id="btnDiv">
        <input type="button" id="btn" value="show"><br>
    </div>
</div>
    <script type="text/javascript">

        /*here we push the onclick attribute in js, so the code is unobtrusive*/
        document.getElementById("btn").onclick = function(){formContent();};

        var radios = document.getElementsByName("radGrp"),
            idCurrent = 0,
            firstRun = true,
            textContent = [
                "<h3>option 1</h3><p>here is the text of option 1 :(</p>",
                "<h3>option 2</h3><p>here is the text of option 2 :)</p>",
                "<h3>option 3</h3><p>here is the text of option 3!</p>",
                "<h3>option 4</h3><p>here is the text of option 4 :-D</p>",
                "<h3>option 5</h3><p>here is the text of option 5 :-P</p>"
            ];

        function hideDivs(){
            document.getElementById("textDiv").style.display = "block";
            document.getElementById("radioDiv").style.display = "none";
            document.getElementById("btn").value = "next";
            firstRun = false;
        }

        function restoreDivs(){
            idCurrent=0;
            document.getElementById("textDiv").style.display = "none";
            document.getElementById("radioDiv").style.display = "block";
            document.getElementById("btn").value = "show";
            firstRun = true;
        }

        /*function to find the id of a checked radio from the group*/
        function findChecked(){
            for (var i=0; i<radios.length; i++) {
                if (radios[i].checked) idCurrent = radios[i].id;
            }

            /*since the id is in text, we cut the first part and leave*/
            /*just the number*/
            idCurrent = parseInt(idCurrent.slice(3));
        }

        /*actual function*/
        function formContent(){
            if (idCurrent == 0) findChecked();
            if (firstRun) {
                hideDivs();
            }
            /*pushing into textDiv values from textContent array, which*/
            /*is your pages content*/
            document.getElementById("textDiv").innerHTML = textContent[idCurrent - 1];
            if (idCurrent<radios.length) {
                idCurrent++;
                /*changing the button value if the current piece of text*/
                /*is the last one*/
            } else if (idCurrent == radios.length) {
                idCurrent++;
                document.getElementById("btn").value = "finish!";
                /*if there is no more text, we just restore everything to*/
                /*the initial state*/
            } else {
                restoreDivs();
                idCurrent = 0;
            }
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:47:44.897

我认为这就是您可能正在寻找的

```
function showPage(id)
{
     document.getElementById(id).style.display = 'block';
}

<a href="javascript:showPage('test1');">Choice 1</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:29:35.843

好的，所以在这里我添加了后续步骤，可以分为一些类别（这里：3），如果您从某个类别中选择一个步骤，您将只需阅读它。希望有帮助；）

```
<html>
<head></head>
<body>
<div id="mainDiv" style="text-align: center">
    <div id="textDiv"></div>
    <div id="radioDiv">
        <input type="radio" id="rad1" name="radGrp"><label for="rad1">1\. reinstall os (step 1)</label><br>
        <input type="radio" id="rad2" name="radGrp"><label for="rad2">2\. reinstall os (step 2)</label><br>
        <input type="radio" id="rad3" name="radGrp"><label for="rad3">3\. reinstall os (step 3)</label><br>
        <input type="radio" id="rad4" name="radGrp"><label for="rad4">4\. reinstall os (step 4)</label><br>
        <input type="radio" id="rad5" name="radGrp"><label for="rad5">5\. watering a plant (step 1)</label><br>
        <input type="radio" id="rad6" name="radGrp"><label for="rad6">6\. watering a plant (step 2)</label><br>
        <input type="radio" id="rad7" name="radGrp"><label for="rad7">7\. reading alphabet (step 1)</label><br>
        <input type="radio" id="rad8" name="radGrp"><label for="rad8">8\. reading alphabet (step 2)</label><br>
        <input type="radio" id="rad9" name="radGrp"><label for="rad9">9\. reading alphabet (step 3)</label><br>
        <input type="radio" id="rad10" name="radGrp"><label for="rad10">10\. reading alphabet (step 4)</label><br>
    </div>
    <div id="btnDiv">
        <input type="button" id="btn" value="show"><br>
    </div>
</div>
    <script type="text/javascript">

        document.getElementById("btn").onclick = function(){formContent();};

        var radios = document.getElementsByName("radGrp"),
            idCurrent = 0,
            planCurrent,
            firstRun = true,
            instructions = [
                [0,1,2,3], /* your instruction plans */
                [4,5], /* this is the second plan (with index = 1) and it has steps 5 and 6 */
                [6,7,8,9] /* this is the third plan (with index = 2) and it has steps 7, 9, 9 and 10 */
            ],
            textContent = [
                "<h3>reinstall os (step 1)</h3><p>download .iso from torrent</p>",
                "<h3>reinstall os (step 2)</h3><p>burn it to a cd of usb</p>",
                "<h3>reinstall os (step 3)</h3><p>change bios settings</p>",
                "<h3>reinstall os (step 4)</h3><p>boot, install, enjoy</p>",
                "<h3>watering a plant (step 1)</h3><p>pour some water into a flask</p>",
                "<h3>watering a plant (step 2)</h3><p>water the plant, enjoy</p>",
                "<h3>reading alphabet (step 1)</h3><p>read letter \"a\"</p>",
                "<h3>reading alphabet (step 2)</h3><p>read letter \"b\"</p>",
                "<h3>reading alphabet (step 3)</h3><p>read letter \"c\"</p>",
                "<h3>reading alphabet (step 4)</h3><p>read all the other letters, enjoy</p>"
            ];

        function hideDivs(){
            document.getElementById("textDiv").style.display = "block";
            document.getElementById("radioDiv").style.display = "none";
            document.getElementById("btn").value = "next";
            firstRun = false;
        }

        function restoreDivs(){
            document.getElementById("textDiv").style.display = "none";
            document.getElementById("radioDiv").style.display = "block";
            document.getElementById("btn").value = "show";
            idCurrent=0;
            firstRun = true;
        }

        /*function to find the id of a checked radio from the group*/
        function findChecked(){
            for (var i=0; i<radios.length; i++) {
                if (radios[i].checked) idCurrent = radios[i].id;
            }
            idCurrent = parseInt(idCurrent.slice(3))-1;
        }

        /*find which plan checked id belongs*/
        function findPlan(){
            for (var m=0;m<instructions.length;m++){
                for (var n=0;n<instructions[m].length;n++){
                    if (instructions[m][n] == idCurrent) planCurrent = m;
                }
            }
        }

        /*actual function*/
        function formContent(){
            if (firstRun) {
                findChecked();
                findPlan();
                hideDivs();
            }
            /*pushing into textDiv values from textContent array, which is your pages content*/
            document.getElementById("textDiv").innerHTML = textContent[idCurrent];

            /*check that we read just the current plan*/
            if (idCurrent < instructions[planCurrent][instructions[planCurrent].length - 1]){
                idCurrent++;
            } else if (idCurrent == instructions[planCurrent][instructions[planCurrent].length - 1]) {
                idCurrent++;
                document.getElementById("btn").value = "finish!";
            } else {
                restoreDivs();
            }
        }
    </script>
</body>
</html> 
```

# perl - 重命名 File::Find 文件夹中的项目遍历

> ID：13421526
> 
> 赞同：2
> 
> 时间：2012-11-16T17:30:06.367
> 
> 标签：perl, recursion, tree

我应该遍历整个文件夹树并将所有内容（包括文件夹）重命名为小写。我环顾四周，发现最好的方法是使用[`File::Find`](https://metacpan.org/module/File%3a%3aFind). 我测试了这段代码：

```
#!/usr/bin/perl -w

use File::Find;
use strict;

print "Folder: ";
chomp(my $dir = <STDIN>);

find(\&lowerCase, $dir);

sub lowerCase{
    print $_," = ",lc($_),"\n";
    rename $_, lc($_);
} 
```

它似乎工作正常。但是谁能告诉我我是否会在这段代码中遇到麻烦？我记得我可能会因为在文件之前重命名文件夹或类似的东西而遇到麻烦的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:41:40.013

1.  如果您**在 Windows 上**，如评论所述，那么不，以任何顺序重命名文件或文件夹都不是问题，因为路径与 Windows`DIR1/file1`相同。`dir1/file1`

    不过，这可能是 Unix 上的问题，在这种情况下，您最好手动执行递归 BFS。

2.  此外，在执行重命名等系统调用时，始终检查结果：

    ```
     rename($from, $to) || die "Error renaming $from to $to: $!"; 
    ```

3.  如评论中所述，注意将“ABC”重命名为“abc”。在 Windows 上不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:57:48.610

就个人而言，我更喜欢：

1.  列出要重命名的文件`find dir/ > 2b_renamed`
2.  使用选择的编辑器手动查看列表（`vim 2b_renamed`在我的情况下）
3.  在该列表中使用[来自 CPAN 的重命名：](https://metacpan.org/module/rename)`xargs rename 'y/A-Z/a-z/' < 2b_renamed`

*手动审查*对我来说非常重要，即使我可以轻松地回滚更改（通过 git 甚至 Time Machine）。

# python - 更新动态 QGridLayout - Python PyQt

> ID：13421531
> 
> 赞同：5
> 
> 时间：2012-11-16T17:30:19.350
> 
> 标签：python, layout, pyqt, qscrollarea, qgridlayout

我最近开始学习 Python，现在我正在使用 PyQt 库制作一个带有 GUI 的软件。

这是我的问题：我创建了一个滚动区域，我在这个滚动区域中放入了一个包含 QGridLayout 的小部件。

```
 sa = QtGui.QScrollArea()
    sa_widget = QtGui.QWidget()
    self.sa_grid.setSizeConstraint(QtGui.QLayout.SetMinAndMaxSize)
    sa_widget.setLayout(self.sa_grid)
    sa.setWidgetResizable(True)
    sa.setWidget(sa_widget) 
```

然后我添加 10 个 QLabel （这当然只是一个例子，在这个例子中我使用 QGridLayout 就像一个垂直布局）：

```
 i = 0
    while i<100:
        i = i +1
        add = QtGui.QLabel("Row %i" % i)
        self.sa_grid.addWidget(add) 
```

然后我创建一个调用函数“function_name”的按钮，我希望这个函数删除一行，到目前为止这是我写的：

```
 tmp = QtGui.QWidget()
    tmp = self.sa_grid.itemAt(0)
    self.sa_grid.removeItem(tmp) 
```

它删除了第一行，gridlayout 的每 x 行变为第 x-1 行，但是，它不会删除文本“第 1 行”，所以我在同一行上看到“第 0 行”和“第 1 行”。

任何人都可以帮助我吗？

非常感谢，大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:18:32.987

从布局中删除项目不会将其删除。该项目将成为一个没有关联布局的自由浮动对象。

如果您想完全摆脱该对象，请显式删除它：

```
def deleteGridWidget(self, index):
    item = self.sa_grid.itemAt(index)
    if item is not None:
        widget = item.widget()
        if widget is not None:
            self.sa_grid.removeWidget(widget)
            widget.deleteLater() 
```

# c# - 应用栏中的多个按钮

> ID：13421533
> 
> 赞同：5
> 
> 时间：2012-11-16T17:30:25.717
> 
> 标签：c#, xaml, windows-8

恐怕我在这里遗漏了一些简单的东西，但我试图在我的应用栏中放置多个按钮。

这是初始应用栏的代码

```
<common:LayoutAwarePage.TopAppBar>
    <AppBar HorizontalAlignment="Left">
        <Button  x:Name="resetButton" Content="Reset" HorizontalAlignment="Left" VerticalAlignment="Stretch" Click="resetButton_Click" />
    </AppBar>
</common:LayoutAwarePage.TopAppBar> 
```

现在这段代码有效，但我想添加第二个按钮。

我认为这很容易做到，我尝试：

```
<common:LayoutAwarePage.TopAppBar>
    <AppBar HorizontalAlignment="Left"> <!-- line 19 -->
        <Button  x:Name="resetButton" Content="Reset" HorizontalAlignment="Left" VerticalAlignment="Stretch" Click="resetButton_Click" />
        <Button  x:Name="newButton" Content="NewButton" />  <!-- line 21 -->
    </AppBar>
</common:LayoutAwarePage.TopAppBar> 
```

但我收到以下错误：

```
The property "Content" can only be set once. (line 19)
The property "Content" can only be set once. (line 21)
Duplication assignment to the 'Content' property of the 'AppBar' object (line 21) 
```

我认为可能有一些`AppBar`我缺少的控件。我如何在其中放置第二个按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T17:32:49.627

简单地把所有东西都放在一个`StackPanel`in`AppBar`

```
<common:LayoutAwarePage.TopAppBar>
    <AppBar HorizontalAlignment="Left"> <!-- line 19 -->
        <StackPanel Orientation="Horizontal">
            <Button  x:Name="resetButton" Content="Reset" HorizontalAlignment="Left" VerticalAlignment="Stretch" Click="resetButton_Click" />
            <Button  x:Name="newButton" Content="NewButton" />  <!-- line 21 -->
        </StackPanel>
    </AppBar>
</common:LayoutAwarePage.TopAppBar> 
```

为了更好地控制，您可以使用 a`Grid`这将允许您在双方都有内容：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="auto"/>
    </Grid.ColumnDefinitions>
    <StackPanel x:Name="LeftPanel" Orientation="Horizontal" Grid.Column="0" HorizontalAlignment="Left">
        <!-- Left Content here -->
    </StackPanel>
    <StackPanel x:Name="RightPanel" Orientation="Horizontal" Grid.Column="1" HorizontalAlignment="Right">
        <!-- Right Content here -->
    </StackPanel>
</Grid> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T17:33:26.550

您正在设置内容两次，这正是错误所说的。相反，将内容设置为可以接受多个子项的内容，例如“StackPanel”，如下所示：

```
<common:LayoutAwarePage.TopAppBar>
    <AppBar HorizontalAlignment="Left"> <!-- line 19 -->
        <StackPanel Orientation="Horizontal">
            <Button  x:Name="resetButton" Content="Reset" HorizontalAlignment="Left" VerticalAlignment="Stretch" Click="resetButton_Click" />
            <Button  x:Name="newButton" Content="NewButton" />  <!-- line 21 -->
        </StackPanel>
    </AppBar>
</common:LayoutAwarePage.TopAppBar> 
```

# css - 创建 CSS 列

> ID：13421539
> 
> 赞同：-2
> 
> 时间：2012-11-16T17:30:47.260
> 
> 标签：css, html, positioning

> **可能重复：**
> [创建两列布局 - html/css 语义](https://stackoverflow.com/questions/12914570/creating-two-columns-layout-html-css-semantics)

我有一个跨越整个浏览器的 div 和另一个居中的 div，使用下面的代码：

```
.wrapper {width: 1024px; margin: 0 auto; clear: both;} 
```

如何在包装器中创建两列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:52:57.887

使用浮点数（并清除它们）或使用`display:inline-blocks`.

在这里，我给你做了一个[丰富多彩的例子](http://jsfiddle.net/c37p8/)。

html

```
<div class="wrapper">
    <div id="col1">a</div>
    <div id="col2">b</div>    
    <br style="clear:both" />
</div>

<hr />

<div class="wrapper">
    <div class="col">a</div>
    <div class="col">b</div>   
</div> 
```

css

```
body {background:blue;}
.wrapper {width: 80%; margin:0px auto; background:red;height:300px;}

#col1 {width:50%;float:left;background:green; height:200px;}
#col2 {width:50%;float:right;height:200px;background:lightblue;}

.col {display:inline-block; width:49%;height:200px;background:pink;} 
```

# c++ - 带有不同类型编译器警告的“名称”的 C++ 重新定义

> ID：13421544
> 
> 赞同：0
> 
> 时间：2012-11-16T17:31:09.677
> 
> 标签：c++

`redefiniton of 'reader' with a different type`当我尝试将 fstream 对象从 main() 传递到另一个类的构造函数以供读取时，为什么编译器会抱怨？我知道这可能是我愚蠢的做法，我真的应该只使用一个字符串作为参数来询问文件名，然后将它传递到我在类的构造函数中分配的 fstream 中。但无论如何我想知道为什么这不起作用，编译器警告是神秘的。

我的主要功能：

```
fstream reader;
reader.open("read.txt");
Markov(reader); 
```

Markov.h 类中的构造函数：

```
class Markov {
public:
/** Constructor */
    Markov(fstream inStream) {
    Map<string, Vector<string> > array0;

    char ch;
    while (inStream.good())
    {
        ch = inStream.get();
        cout << ch << endl;
    }
    cout << "End: " << ch;

    order0(array0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:35:37.927

该行`Markov(reader);`正在创建一个名为`reader`type的变量`Markov`。它相当于以下内容：`Markov reader;`. 当然，由于编译器认为您正在声明另一个名为 的变量`reader`，因此会引发此错误。要创建 的实例`Markov`，请执行以下操作：

```
Markov m(reader); 
```

这是 C++ 语法中的歧义，它总是被视为变量的声明，而不是临时的构造。事实上，您可以在声明中的变量名周围有任意数量的括号：`Markov (((((reader)))))`.

`Markov(reader)`当然，它是创建临时类型的完美语法`Markov`，只要它不在可以被解析为声明的语句中。例如，如果它在一个表达式的中间，你会没事的。在人为的表达式`something += Markov(reader) - 6`中，它不能被解释为声明。

同样，如果有多个参数被传递给构造函数`Markov(reader, writer)`，或者如果单个参数不是标识符，`Markov("foo")`则它不是模棱两可的。

如果您使用的是 C++11 编译器，您确实可以使用新的初始化语法创建一个使用单个参数标识符的临时（尽管我认为没有理由这样做）：

```
Markov{reader}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:37:40.807

您可能希望`fstream`通过**引用**传递它。

```
Markov(fstream& inStream) 
```

当您使用它时，如果您仅将其用于输入服务，请改用 an `ifstream&`。

# java - 如何将 Apache Camel 集成到 Java Spring 3.0 Web 应用程序中以导入数据

> ID：13421545
> 
> 赞同：1
> 
> 时间：2012-11-16T17:31:10.650
> 
> 标签：java, spring-mvc, apache-camel, spring-3

我正在开发一个基于 Spring 3.0 框架的 Web 应用程序。

不，我想集成 Apache Camel 以通过 CSV 文件将数据导入数据库。我设法运行 Camel 并按照[Apache Camel Spring 配置示例](http://camel.apache.org/spring-java-config-example.html)在数据库中进行导入。

但现在我想将 Camel 集成到 Web 应用程序中，以便它一起启动。但我不知道该怎么做。目前，似乎 Camel 在 Web 应用程序旁边启动并使用它自己的上下文。特别是它似乎是在 Web 应用程序之前启动的，因为当 Camel 尝试自动连接作为 Web 应用程序一部分的数据库存储库时会引发异常。

```
10:57:36.730 [main] ERROR o.s.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'routeConfiguration': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.data.neo4j.repository.GraphRepository com.isarsoftware.ysura.config.RouteConfiguration.graphRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in class path resource [com/isarsoftware/ysura/config/GraphDBConfig.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.repository.GraphRepository com.isarsoftware.ysura.config.GraphDBConfig.userRepository()] threw exception; nested exception is java.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call 'refresh' before multicasting events via the context: Root WebApplicationContext: startup date [Fri Nov 16 10:57:35 CET 2012]; root of context hierarchy 
```

我必须承认，我离成为 Spring 职业选手还很遥远。但直到现在，我还是通过阅读博客和教程让一切正常工作。但是对于这个问题，我还找不到任何指导。

谁能给我推荐一个关于谁来解决我的问题的教程或示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:02:24.830

见[http://camel.apache.org/tutorial-on-using-camel-in-a-web-application.html](http://camel.apache.org/tutorial-on-using-camel-in-a-web-application.html)

基本上，只需将 spring 侦听器添加到您的 web.xml 文件中

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

然后，使用您的 CamelContext 创建一个 /WEB-INF/applicationContext.xml 文件

```
<beans...>
    <camelContext xmlns="http://camel.apache.org/schema/spring">
        <route>
          <from uri="seda:foo"/>
          <to uri="mock:results"/>
        </route>
    </camelContext>
</beans> 
```

# c# - 配置 DataGridView 的“AutoGenerateColumns”属性

> ID：13421548
> 
> 赞同：4
> 
> 时间：2012-11-16T17:31:26.027
> 
> 标签：c#, winforms, data-binding, datagridview, windows-forms-designer

我有一个 datagridview 配置为根据我的类自动生成列（使用数据绑定）。

它适用于我的所有 type 属性`string`。但是，我有一个枚举类型的属性，使用类型转换器将其转换为图像。

我希望我的 Grid 自动生成列以生成 a`DataGridViewImageColumn`而不是`DataGridViewTextBoxColumn`.

唯一似乎有用的 DGV 方法是添加列。但是，您不能在那里设置列，只能获取和修改。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:10:37.760

据我所知，自动生成不是很可配置，但您可以为自己制作一个替代自动生成：

设置 autogen = false，注册这些事件：

*   OnDataMemberChanged
*   OnDataSourceChanged

添加一个将为两者触发的函数，它将为给定的数据源创建列：

*   标题 = 列名
*   列类型=根据你想要的
*   数据绑定 = 列名
*   等等

# ruby-on-rails - 设计中的空指针错误

> ID：13421549
> 
> 赞同：0
> 
> 时间：2012-11-16T17:31:27.773
> 
> 标签：ruby-on-rails, ruby, devise, confirmation, devise-confirmable

我的设计设置发生了一些非常奇怪的事情。

我有一个自定义的 ConfirmationsController 用于设计自定义行为。

我的客户模型：

```
class Customer
include Mongoid::Document

after_create      :prepare_demo_app

devise :validatable,
       :registerable,
       :database_authenticatable,
       :confirmable,
       :trackable,
       :rememberable,
       :recoverable,
       :mailchimp

## Confirmable
field :confirmation_token,   :type => String
field :confirmed_at,         :type => Time
field :confirmation_sent_at, :type => Time 
```

我的自定义控制器

```
 class ConfirmationsController < Devise::ConfirmationsController
    def create
        puts "resource #{resource}"
        puts "resource name #{resource_name}"
        super
    end
enter code here 
```

我的路线.rb

```
 devise_for :customers,
               :controllers => {:confirmations => "confirmations" },
               :skip => [:sessions, :passwords], :format => false do
               #... other gets and posts but nothing to do with confirmations 
               #...
    end 
```

当我根据我的路由文件点击这个控制器时，我输入了一封电子邮件。单击提交并获取资源的空指针。但不是资源名称。有没有人知道我可能会错过什么，或者为什么客户会以空值的身份出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:24:26.380

`resource`没有在任何地方设置。[默认情况下`ConfirmationsController`](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/confirmations_controller.rb)，Devise`resource`会像这样初始化（取决于您正在运行的版本）：

```
self.resource = resource_class.send_confirmation_instructions(resource_params) 
```

如果你把你的语句放在`super` *前面*，应该设置。`puts``resource`

# php - IE8 弹出错误

> ID：13421556
> 
> 赞同：1
> 
> 时间：2012-11-16T17:31:48.767
> 
> 标签：php, internet-explorer-8

嗨，这是我的第一个问题，希望不是转发，我已经搜索但没有找到任何东西，我有一个调用弹出文件的按钮，它在 Chrome 中运行良好，但在 IE8 中没有，它返回的错误是“无效参数”。在这一行：

```
function searchBox() {
    newwindow=window.open('searchEmp.php','Search Employee','height=500,width=600');
    if (window.focus) {newwindow.focus()}
    return false;
} 
```

这是我调用弹出窗口的摘录：

```
$employeeSelect='<input readonly="readonly" value"search" id="ssoreadonly" name="sso1"><input type="button" id="search" onClick="return searchBox()" value="Search" />'; 
```

希望有人可以帮助我谢谢！

# asp.net-web-api - Web API 路由映射到根

> ID：13421557
> 
> 赞同：1
> 
> 时间：2012-11-16T17:31:50.020
> 
> 标签：asp.net-web-api, asp.net-mvc-routing, asp.net-web-api-routing

我正在设置一个 ASP.NET MVC 4 Web API 来接受来自第 3 方服务器的请求，但我根本不知道如何设置路由映射。假设第 3 方服务器期望获得以下响应：

1.  `http://[my_server]/authorize?user=[user name]&session=[session token]&item=[item]`
2.  `http://[my_server]/release?user=[user name]&session=[session token]`

或者，请求可以使用专用路径，即：

1.  `http://[my_server]/***api***/authorize?user=[user name]&session=[session token]&item=[item]`
2.  `http://[my_server]/***api***/release?user=[user name]&session=[session token]`

我希望能够支持这两种选择。

也应该按照更传统的`/controller/id`形式实现其他请求，但我想重点关注上述内容（我什至不确定 Web API 是否适合这里）。

我编写了以下控制器：

```
public class MyController : ApiController
{
    [HttpGet]
    [ActionName("authorize")]
    public string Authorize(string user, string session, string item)
    {
        ...
        // return "OK" or "DENY";
    }

    [HttpGet]
    [ActionName("release")]
    public string Release(string user, string session)
    {
        ...
        return "OK";
    }
} 
```

并尝试了我在 SO 和其他地方可以找到的所有内容`WebAppConfig.Register`，但是当我在浏览器中尝试请求时，我不断收到 404 错误：

```
http://localhost:22332/api/authorize?user=ury&session=token&item=an_item 
```

`WebAppConfig.Register`我的问题是，为了满足上述请求（假设我的测试 URL 是正确的......），我必须做什么 - 特别是在控制器中和控制器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:06:51.690

您会被用于将 URL 中的控制器名称与控制器类匹配的 Web API 约定绊倒。

如果您的控制器的名称是“MyController”，那么请求的 URL 是：

```
http://localhost:22332/api/my/authorize?user=ury&session=token&item=an_item 
```

要支持 URL 中没有“api”位的请求，只需在 WebApiConfig.cs 的 Register 方法中添加第二个路由定义。由于您还在 URL 中使用“操作”，因此您需要以下两条路线：

```
 config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    config.Routes.MapHttpRoute(
        name: "RootWebApiRoute",
        routeTemplate: "{controller}/{action}/{id}",
        defaults: new { id = RouteParameter.Optional }
    ); 
```

如果您想省略“api”前缀以及控制器参数，我认为您需要不同的路由定义。就像是：

```
 public static void Register(HttpConfiguration config) {
        config.Routes.MapHttpRoute(
            name: "ActionOnlyRoute",
            routeTemplate: "{action}",
            defaults: new { controller = "My" }
        );
    } 
```

在这里，我们只会在 URL 中查找“动作”并将所有内容路由到您的“MyController”类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:04:01.010

经过几个小时的工作并得到了[Route Debugger](http://nuget.org/packages/routedebugger)的大力帮助- 谢谢 Phil Haack！- 我找到了问题和解决方案。

问题：路由映射匹配是**有序**的，并且`RouteTable.Routes`，应用程序的路由映射从中初始化，包含其中不少。我正在寻找的请求模式也匹配其中一些映射（例如，“授权”被匹配为控制器）。

解决方案：在默认映射*之前*添加“我的”路由映射。

对，对...

由于 不支持大多数操作`HttpRouteCollection`，因此生成的代码有点难看，但它可以工作：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        routesCopy = new RouteBase[RouteTable.Routes.Count];

        RouteTable.Routes.CopyTo(routesCopy, 0);

        config.Routes.Clear();
        config.Routes.MapHttpRoute(name: "AuthorizeWebApiRoute", routeTemplate: "authorize", defaults: new { controller = "My", action = "authorize" });
        config.Routes.MapHttpRoute(name: "ReleaseWebApiRoute", routeTemplate: "release", defaults: new { controller = "My", action = "release" });

        foreach (var route in routesCopy)
        {
            RouteTable.Routes.Add(route);
        }
    }
} 
```

只要“我的”路由映射与默认映射不匹配（我使它们足够具体不匹配），我都很好 - 我认为......

# c# - 如何从 C# .NET COM 引发异常

> ID：13421558
> 
> 赞同：3
> 
> 时间：2012-11-16T17:31:50.300
> 
> 标签：c#, delphi, com, delphi-7

如何从 C# .NET COM 引发异常。事实上，我在使用 Borland Delphi 7.0 构建的 Win32 应用程序中，我正在尝试使用 .NET 中的函数。一切正常，除了在 C# 中引发异常的事实没有重新路由到 Delphi，我想我想念某种方法装饰器。这里有一段代码：

```
void iLinkV2.FindLinkedClientEng(string SourceApp, string SourceClientID,
     ref object ClientID, ref object Engagement)
{
    throw new COMException("errClientNotFound",
        (int)ExceptionsType.errClientNotFound);
    ClientID  = SourceClientID; 
}

[ComVisible(true),
 Guid("D731C821-EEA2-446E-BC5A-441DCA0477F5"),
 InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface iLinkV2
{ ...
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T17:57:25.997

你不需要。异常不是 COM 互操作规范的一部分，不应跨越模块边界。您可以使用状态代码来指示任何错误。

在方法退出之前捕获异常（在每个 COM 接口方法中）。将结果转换为错误代码。如果您使用 an`HRESULT`那么您可以使用它`safecall`并让 Delphi 编译器在栅栏的另一边重新引发异常。

# jquery - jQuery masonry 从字符串预加载图像

> ID：13421560
> 
> 赞同：3
> 
> 时间：2012-11-16T17:31:52.500
> 
> 标签：jquery, mysql, jquery-masonry

我正在使用砖石和一种实际上不使用库的无限滚动版本。初始图像正确进入布局，但添加的图像没有......它们只是连续添加。

我相信这是因为它们是从一个字符串加载的，它们没有高度/宽度属性来选择位置。我是这么认为的，因为当我将它们包装在预定大小的 div 中时，它们会正确地进入布局（但图像的高度都不同）

我在页面加载上有一组图像，它们可以正确地将砌体应用到它们的布局中。

然后使用 PHP 调用 sql，我收集了一个图像路径数组，我将其转换为一个 javascript 数组：

```
var images = [
<?php
foreach ($images as $image) {
echo "'/$image',\n";
} ?>
];
$(images).each(function() {
var image = $('<img />').attr('src', this);
});
</script> 
```

然后我在触发事件上一次加载它们 5 个，使用附加用于砌体：

```
$appendage +=  '<div class="box append"><img src="' + images[i] + '" /></div>';
count++;
    }   

var $container = $('#result');      
$container.append( $appendage ).masonry( 'appended', $appendage ); 
```

我尝试了各种预加载图像的方案都无济于事..

```
 $(images).each(function() {
     (new Image).src = this;
    }); 
```

任何人都可以提出一种方法，也许是一种更好的方法，从图像路径数据库作为起点，到滚动到底部时加载到砌体中的图像作为附加

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T05:42:26.360

你看过这个吗？ [http://masonry.desandro.com/demos/infinite-scroll.html](http://masonry.desandro.com/demos/infinite-scroll.html)

以下是相关的 JavaScript：

```
$(function(){

    var $container = $('#container');

    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector: '.box',
        columnWidth: 100
      });
    });

    $container.infinitescroll({
      navSelector  : '#page-nav',    // selector for the paged navigation 
      nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
      itemSelector : '.box',     // selector for all items you'll retrieve
      loading: {
          finishedMsg: 'No more pages to load.',
          img: 'http://i.imgur.com/6RMhx.gif'
        }
      },
      // trigger Masonry as a callback
      function( newElements ) {
        // hide new items while they are loading
        var $newElems = $( newElements ).css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
        $newElems.imagesLoaded(function(){
          // show elems now they're ready
          $newElems.animate({ opacity: 1 });
          $container.masonry( 'appended', $newElems, true ); 
        });
      }
    );

  }); 
```

# jquery - 使用 jquery 1.3.2 创建的简单工具提示

> ID：13421563
> 
> 赞同：0
> 
> 时间：2012-11-16T17:31:58.243
> 
> 标签：jquery

我很难弄清楚为什么这段代码不起作用。我的目的是在用户单击工具提示 div 时显示一条消息。将鼠标光标移出 div 后，工具提示应关闭。我需要在单个页面上显示消息的最简单的方式。我需要使用 jquery 1.3.2。有人可以帮忙吗？谢谢

```
<html>
<head>
<script type="text/javascript" src="/jquery/jquery-1.3.2.min.js"></script>
<script type="text/javascript">

$(document).ready(function(){

    $('.wrapper').live('click', showBox).live('mouseleave', hideBox);

    function showBox(e){
        var x = e.pageX + 20;
        var y = e.pageY + 20;
        $('.tooltip').fadeIn();
        $('.tooltip').offset({ left: x, top: y });
    }
});

function hideBox(){
    $('.tooltip').fadeOut();
}

</script>
<style>
  .div{ margin:10px;padding:12px;
         border:2px solid #666;
         width:60px;
       }
  </style>
</head>
<body>
<div class="wrapper">sometext</div>
<div class="tooltip">tooltip1</div>
</body>
</html> 
```

编辑：这是 Juan Mendes 的工作代码[http://jsfiddle.net/HUG2Z/3/](http://jsfiddle.net/HUG2Z/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:43:51.013

我无法弄清楚你为什么使用`live`on `mouseleave`。在没有看到其余代码的情况下，在其中任何一个上使用它都没有意义`click`。`live`出于某种原因，在 1.7 版中已弃用它，因此您不应使用它，除非您真正了解它的作用及其缺点。

以下代码有效[http://jsfiddle.net/HUG2Z/1/](http://jsfiddle.net/HUG2Z/1/)

```
$(document).ready(function(){

    $('.somefield').click(showBox).mouseleave(hideBox);

    function showBox(e){
        var x = e.pageX + 20;
        var y = e.pageY + 20;
        $('.tooltip').fadeIn();
        $('.tooltip').offset({ left: x, top: y });
    }

    function hideBox(){
        $('.tooltip').fadeOut();
    }
}); 
```

如果这是您现在想要的，只需更改 jsfiddle 以更好地代表您的场景并将其发布在您的问题上（此处不作为评论）

# android - 想从游标中获取一行

> ID：13421571
> 
> 赞同：0
> 
> 时间：2012-11-16T17:32:21.867
> 
> 标签：android

我想得到一行，这一行有 2 列命名`username`，`password`我的代码在这里：

```
String selection = PROFILE_COLUMN_USERNAME + " = '" + userName+ "' AND " +PROFILE_COLUMN_PASSWORD + " = '" + password + "'";
Cursor cursor = database.query(TABLE_NAME, new String[] {PROFILE_COLUMN_USERNAME, PROFILE_COLUMN_PASSWORD }, selection,null, null, null, null); 
```

我在我的数据库上得到了一个示例数据`username = erdem`，`password= c`但是当我编写此示例并写入时，`username` 如下所示：

```
String s =cursor.getString(cursor.getColumnIndex(PROFILE_COLUMN_USERNAME)); 
```

它不起作用。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:34:14.117

使用`moveToFirst`，[阅读文档](http://developer.android.com/reference/android/database/Cursor.html#moveToFirst%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:37:13.660

尝试如下操作：这里的“path_on_server”是正在提取其值的 DB 表中的列的名称。您可以将其更改为表的列名。

```
 String query = "some query";
        Cursor c = newDB.rawQuery(query, null);

        if (c != null) {
            if (c.moveToFirst()) {
                do {
                    mPathOnServer = c.getString(c
                            .getColumnIndex("path_on_server"));
                } while (c.moveToNext());
            }
        }
    } catch (SQLiteException se) {
        Log.e(getClass().getSimpleName(),
                "Could not extract information from DB");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:52:35.787

试试这个方法...

```
Cursor cursor = null;

try {
    String queryString = "SELECT * FROM Table_Name";

    cursor = myDatabase.rawQuery(queryString, null);
            if (cursor != null && cursor.moveToFirst()) {

                do {
                    String nextUser = new String(cursor.getString(cursor
                            .getColumnIndex("driver_fname")));

                } while (cursor.moveToNext());

            }
        } catch (Exception e) {
            e.printStackTrace();

        } finally {
            if (cursor != null && !cursor.isClosed()) {
                cursor.deactivate();
                cursor.close();
                cursor = null;
            }
            if (myDatabase != null) {
                myDatabase.close();
            }
        } 
```

# highcharts - Highcharts Legend 标题在向下钻取和返回后发生变化？

> ID：13421575
> 
> 赞同：0
> 
> 时间：2012-11-16T17:32:42.197
> 
> 标签：highcharts, legend, series

我在这里有问题的示例代码：http: [//jsfiddle.net/MuydK/](http://jsfiddle.net/MuydK/)

在我钻入和钻出后，与图表下键中的图例标题有关的问题正在发生变化。

他们应该保持“实际”和“目标”，并且正在更改为“系列 1”和“系列 2”。

```
$(function () {
    var chart;
    $(document).ready(function () {
        var colors = Highcharts.getOptions().colors,
        categories1 = ['1011', '1112', '1213', '1415'],
        name1 = 'Actual', 
```

我想我可能在向下钻取配置或 setChart 代码中遗漏了一些东西？如果基于上面发布的代码的图表，我遇到了同样的问题。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:46:21.193

希望这是你需要的，

[JSFiddle - 图例名称问题](http://jsfiddle.net/zaheerahmed/MuydK/4/)

代码：

```
function setChart(name, categories, data, color) {
       console.log(name, categories, data, color);
       chart.xAxis[0].setCategories(categories);
       while (chart.series.length > 0) {
            chart.series[0].remove(true);
       }
       for (var i = 0; i < data.length; i++) {
            chart.addSeries({
                name: name[i],
                data: data[i],
                color: color[i]
           });
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:41:09.157

Edit2：问题出在下面函数中的 else 语句中。

```
click: function() {
    var drilldown = this.drilldown;
    if (drilldown) { // drill down
        setChart(drilldown.name, drilldown.categories, [drilldown.data], drilldown.color);
    } else { // restore
        setChart(name, categories1, [data1, data2], 'white');
    }
}​ 
```

取而代之的是摆脱`name1 = 'Actual'`并且只拥有`data1`和`data2`添加它们`name`然后`color`你可以这样做

```
click: function() {
    var drilldown = this.drilldown;
    if (drilldown) { // drill down
        chart.xAxis[0].setCategories(drilldown.categories);
        setChart([drilldown.data]);
    } else { // restore
        chart.xAxis[0].setCategories(categories);
        setChart([data1, data2]);
    }
}

// add code for removing series
chart.addSeries({
    data
});​ 
```

我希望你能理解，但如果你构建`data1/2`为一个 highcharts 对象会更容易，只需将向下钻取部分添加到它。所以你可以改变；

```
series: [{
    name: name1,
    data: data1,
    color: colors[0]},
{
    name: name2,
    data: data2,
    color: colors[1]}], 
```

到：

```
series: [data1, data2],​ 
```

编辑：当您进行以下操作时，您不应该将 redraw 设置为`true`，它会快得多。添加系列也是如此。`chart.redraw()`在删除和添加图表之前，您无需致电。并且向后删除东西更容易。所以改变：

```
while (chart.series.length > 0) {
    chart.series[0].remove(true);
} 
```

到

```
for (var i = chart.series.length; i >= 0; i--){
    chart.series[i].remove(false);
}
// add series with redraw == false
chart.redraw(); 
```

# .net - 试图在 .NET 中保存缩略图，只获取文件徽标

> ID：13421577
> 
> 赞同：1
> 
> 时间：2012-11-16T17:32:52.590
> 
> 标签：.net, vb.net, thumbnails

[所以按照这里](https://stackoverflow.com/questions/1439719/c-sharp-get-thumbnail-from-file-via-windows-api)的指示，我在 VB.NET 中重新创建了以下 3 行

```
 Dim shellFile As ShellFile = shellFile.FromFilePath(tmpFile)
 Dim shellThumb As Bitmap = shellFile.Thumbnail.ExtraLargeBitmap
 shellThumb.Save("C:\Users\erizvi\Desktop\thumb", ImageFormat.Bmp) 
```

但是，当我执行这些行时，我得到的只是“word”徽标的缩略图，而不是实际文件，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:43:48.380

只有某些文件类型（主要是视觉媒体文件）支持 Windows 中的缩略图。如果您的文件不是图像或视频文件，则除了与该文件类型关联的图标（通常由使用它们的主应用程序分配，例如 .doc/.docx 文件的 Word）之外，实际上没有任何内容可显示。基本上，如果 Windows 没有在 Windows 资源管理器中的文件夹的缩略图或幻灯片视图中呈现文件的图像表示，您将无法使用 ShellFile API 包装器做得更好。

# redis - IRedisClient 使用后未处理

> ID：13421578
> 
> 赞同：1
> 
> 时间：2012-11-16T17:32:53.707
> 
> 标签：redis, servicestack

我正在使用 ServiceStack IRedis 客户端，如下所示

```
public static IRedisList<MyType> getList(string listkey)
{
   using(var redis = new RedisClient())
   {
      var client = redis.As<MyType>();
      return client.Lists[listkey];
   }

}

public void AddSomething(MyType newType)
{
   var list = getList("somekey);
   list.Add(newType);.

} 
```

根据 Redis-Server 的输出，每次我这样做时都会添加一个新的客户端连接，并且它永远不会被释放。（客户数量一直在增加）。

我不应该这样操纵`IRedisList`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:34:39.650

`IRedisList`就像redis 服务器端列表的**代理包装器，其中包含对创建它的****RedisClient**的引用，以便与 Redis 通信。

该`using(var redis = new RedisClient()) { ... }`语句确实处理了客户端连接，不幸的是，当您使用 Disposed 客户端进行任何进一步调用时，它会再次重新打开连接，并且由于它不在 using 语句中或未手动处理，因此将保持连接打开。

为了防止这种情况发生，您不应该在创建它的 RedisClient 的使用范围之外访问 RedisList 代理。如果您仍想引用此范围之外的列表，则应将内容克隆到 In-Memory 列表中：

```
var disconnectedInMemoryCopy = client.Lists[listKey].ToList(); 
```

`List<T>`这将返回一个与 RedisList 代理分离的填充普通 C# 。

# java - 堆空间错误 - 如何优化此代码

> ID：13421579
> 
> 赞同：0
> 
> 时间：2012-11-16T17:32:58.410
> 
> 标签：java, memory-management, out-of-memory, heap-memory

下面的代码出现**堆空间错误。**

任何人都知道**如何优化此代码**。

这发生在大文件 [180MB] 上。方法参数有大约 50 个元标记*键值*对应于每个语言环境。处理 4500 页后出现错误。

**注意：**我尝试将*foreach更改* **为** *iterator*以使用*iterator.remove()*来释放空间。

```
public static String myChildPropsToString(final UnicodeProperties myLayoutProps) {       
    final StringBuilder sb = new StringBuilder(myLayoutProps.size());

    final String[] matchTarget = new String[] { StringPool.RETURN_NEW_LINE, StringPool.NEW_LINE, StringPool.RETURN };
    final String[] replaceTargetBy = new String[] { "_SAFE_NEWLINE_CHARACTER_", "_SAFE_NEWLINE_CHARACTER_",
            "_SAFE_NEWLINE_CHARACTER_" };

     //COMMENTED TO TRY OUT ITERATOR.REMOVE
    //
    // for (final Map.Entry<String, String> entry : myLayoutProps.entrySet()) {
    // final String value = entry.getValue();
    //
    // if (Validator.isNotNull(value)) {
    // StringUtil.replace(value, matchTarget, replaceTargetBy);
    //
    // sb.append(entry.getKey());
    // sb.append(StringPool.EQUAL);
    // sb.append(value);
    // sb.append(StringPool.NEW_LINE);
    // }
    // }

    final Iterator<Entry<String, String>> propsIterator = myLayoutProps.entrySet().iterator();
    while (propsIterator.hasNext()) {
        final Entry<String, String> entry = propsIterator.next();

        if (Validator.isNotNull(entry.getValue())) {
            StringUtil.replace(entry.getValue(), matchTarget, replaceTargetBy);

            sb.append(entry.getKey());
            sb.append(StringPool.EQUAL);
            sb.append(entry.getValue());
            sb.append(StringPool.NEW_LINE);
        }
    }
    propsIterator.remove();

    return sb.toString();
} 
```

从我的代码中，我将其设置为父属性 obj，如下所示：

```
UnicodeProperties myParentProps = new UnicodeProperties();
//Set some values to parent
UnicodeProperties myLayoutProps = new UnicodeProperties();
//Set some values to child
....
myParentProps.setProperty("childProp",myChildPropsToString(myLayoutProps)); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:42:30.207

尝试把 propsIterator.remove(); 一会儿里面。

```
final Iterator<Entry<String, String>> propsIterator = myLayoutProps.entrySet().iterator();
    while (propsIterator.hasNext()) {
        final Entry<String, String> entry = propsIterator.next();

        if (Validator.isNotNull(entry.getValue())) {
            StringUtil.replace(entry.getValue(), matchTarget, replaceTargetBy);

            sb.append(entry.getKey());
            sb.append(StringPool.EQUAL);
            sb.append(entry.getValue());
            sb.append(StringPool.NEW_LINE);
        }
        propsIterator.remove();
    } 
```

# android - Parcelable 内的捆绑包被添加到 Parcel

> ID：13421582
> 
> 赞同：11
> 
> 时间：2012-11-16T17:33:09.027
> 
> 标签：android, parcelable

在我的项目中，我有一个模型，其中包含有关模型的基本信息。例如，假设模型是汽车。然后有许多不同种类的汽车，它们分配了不同的数据。所有模型都必须是可包裹的。

不同车的差异很小，可能只是几个数据字段。因此，这是通过为不同的汽车创建演示者（只是一个保存数据的类）来解决的。然后演示者将知道它应该保存哪些额外数据。因为演示者本身不可打包，所以它的所有数据都有一个 Bundle，然后 Car 类将添加到 Parcelable 中。我不想让演示者变成包裹。

所以 Car 从演示者那里获取 Bundle 并将其放入它的包裹中：

```
 public void writeToParcel(Parcel parcel, int flags) {
    parcel.writeBundle(getPresenter().getBundle());
  } 
```

然后它会解压它：

```
 public Car(Parcel parcel) {    
    getPresenter().setBundle(parcel.readBundle());
  } 
```

在演示者将可打包对象添加到捆绑包之前，这可以正常工作。然后我得到这个错误：

```
11-16 15:06:37.255: E/AndroidRuntime(15193): FATAL EXCEPTION: main
11-16 15:06:37.255: E/AndroidRuntime(15193): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.activity}: android.os.BadParcelableException: ClassNotFoundException when unmarshalling: com.example.model.engine
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2185)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.app.ActivityThread.access$600(ActivityThread.java:142)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.os.Looper.loop(Looper.java:137)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.app.ActivityThread.main(ActivityThread.java:4931)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at java.lang.reflect.Method.invokeNative(Native Method)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at java.lang.reflect.Method.invoke(Method.java:511)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at dalvik.system.NativeStart.main(Native Method)
11-16 15:06:37.255: E/AndroidRuntime(15193): Caused by: android.os.BadParcelableException: ClassNotFoundException when unmarshalling: com.example.model.engine
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.os.Parcel.readParcelable(Parcel.java:2077)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.os.Parcel.readValue(Parcel.java:1965)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.os.Parcel.readMapInternal(Parcel.java:2226)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.os.Bundle.unparcel(Bundle.java:223)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at android.os.Bundle.getString(Bundle.java:1055)
11-16 15:06:37.255: E/AndroidRuntime(15193):         at com.example.cars.CarPresenter.getExtraString(CarPresenter.java:34)
11-16 15:06:37.255: E/AndroidRuntime(15193):         ... 11 more 
```

所以它以某种方式无法从 Bundle 中读取任何内容。

这可以通过将 readBundle 调用修改为：

```
 public Car(Parcel parcel) {    
    getPresenter().setBundle(parcel.readBundle(engine.class.getClassLoader()));
  } 
```

但是，这是否意味着我的包裹中只能包含一种类型的包裹？例如，如果另一个演示者想要将另一个可打包对象添加到捆绑包中怎么办？

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T00:19:46.917

类加载器是 Java 中最不为人所知的特性之一。它们提供“命名空间”，事实上，这些命名空间可以“嵌套”，因为如果当前类加载器没有找到一个类，它可以检查一个“父”类加载器。

对于 Android 应用程序，有两个 ClassLoader。一种知道如何从您的 APK 中加载类，另一种知道如何从 Android 框架中加载类。前者将后者设置为“父”类加载器，因此通常您不会注意到。但是，由于 Bundle 是一个框架类，并且由框架类加载器加载，您需要告诉它 ClassLoader 用于在您的 APK 中查找类。Bundle 默认使用的类加载器是框架 ClassLoader，它是一个比包含 APK 类的命名空间“更低”的命名空间。

因此，通过告诉捆绑包使用哪个 ClassLoader，您就是在告诉它它需要检查 APK ClassLoader 中的类。它默认检查框架 APK，因为这是加载 Bundle 类的 ClassLoader，因此是它知道如何在其中查找类的唯一“命名空间”。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-23T00:38:21.610

你在评论中写道：

> 但是，我的问题是更多地说明为什么在这种情况下我什至必须指定一个类加载器

Android 框架工程师 Dianne Hackborn[写道](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/QFjqaD_5470)：

> 当包从包裹中读取时，它只是提取数据。直到稍后您从捆绑包中检索内容时，它才真正从该数据中解包。

在[Bundle 源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/os/Bundle.java)中，我们看到该`setClassLoader()`方法设置了字段`mClassLoader`：

```
public void setClassLoader(ClassLoader loader) {
     mClassLoader = loader;
 } 
```

如果我们不使用`setClassLoader()`或构造函数`Bundle(ClassLoader loader)`，该`mClassLoader`字段将被设置为默认值`ClassLoader`：

```
public Bundle(int capacity) {
     //...
     mClassLoader = getClass().getClassLoader();
 } 
```

`mClassLoader`然后用于在方法中解组打包的数据`unparcel()`：

```
 mParcelledData.readMapInternal(mMap, N, mClassLoader);
 mParcelledData.recycle();
 mParcelledData = null; 
```

Net，如果你不设置`ClassLoader`它，它会在解组它的打包数据时默认为系统`ClassLoader`，我们会`ClassNotFoundException`在解组我们的自定义`Parcelable`对象数据时得到一个，

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-23T22:57:11.530

你写了：

> 这可以通过将 readBundle 调用修改为：
> 
> `public Car(Parcel parcel) {` `getPresenter().setBundle(parcel.readBundle(engine.class.getClassLoader()));` `}`
> 
> 但是，这是否意味着我的包裹中只能包含一种类型的包裹？例如，如果另一个演示者想要将另一个可打包对象添加到捆绑包中怎么办？

实际上，没有。当您将 classLoader 设置为 时`engine.class.getClassLoader()`，您实际上是在提供一个知道如何从 APK 加载所有类的类加载器。因此，您可以使用相同的类加载器来解包应用程序中实现 Parcelable 的所有其他自定义类。

您看到的问题是，当您**不**指定类加载器时，（默认）系统类加载器用于解包`Bundle`. 系统类加载器只知道如何加载 Android 系统已知的类，不知道如何加载任何特定于应用程序的类。

只是为了澄清，（通常）没有“每个类的类加载器”，有一个系统类加载器，然后有一个“每个应用程序的类加载器”。我希望这回答了你的问题。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-11-22T18:45:37.757

这是我实现 Parcelable 的模型：

```
public class ProgramModel implements Parcelable
{
    private int id = -1;
    private String title = "";
    private String time = "";
    private String day = "";
    private String organization = "";
    private String participants = "";
    private String description = "";
    private String descriptionFull = "";
    private String location = "";
    private String locationCaption = "";
    private int locationCode = 0;
    private String locationMap = "";
    private String imageUrl = "";
    private String color = "";
    private int colorId = -1;
    private int columnId = -1;
    private String startTime = "";
    private String endTime = "";
    private Date convertedTimeStart = null;
    private Date convertedTimeEnd = null;
    private String theme = "";
    private ArrayList<TagModel> tags = new ArrayList<TagModel>();
    private ArrayList<Integer> tagsId = new ArrayList<Integer>();

    public ProgramModel()
    {
    }

    private ProgramModel(Parcel in)
    {
        id = in.readInt();
        title = in.readString();
        time = in.readString();
        day = in.readString();
        organization = in.readString();
        participants = in.readString();
        description = in.readString();
        descriptionFull = in.readString();
        location = in.readString();
        locationCaption = in.readString();
        locationCode = in.readInt();
        locationMap = in.readString();
        imageUrl = in.readString();
        color = in.readString();
        colorId = in.readInt();
        columnId = in.readInt();
        startTime = in.readString();
        endTime = in.readString();
        convertedTimeStart = new Date(in.readLong());
        convertedTimeEnd = new Date(in.readLong());
        theme = in.readString();
        in.readTypedList(tags, TagModel.CREATOR);
        in.readList(tagsId, Integer.class.getClassLoader());
    }

    public int getId()
    {
        return id;
    }

    public void setId(int id)
    {
        this.id = id;
    }

    // Other getters and setters

    @Override
    public int describeContents()
    {
        return 0;
    }

    // this is used to regenerate your object
    public static final Parcelable.Creator<ProgramModel> CREATOR = new Parcelable.Creator<ProgramModel>()
    {
        public ProgramModel createFromParcel(Parcel in)
        {
            return new ProgramModel(in);
        }

        public ProgramModel[] newArray(int size)
        {
            return new ProgramModel[size];
        }
    };

    @Override
    public void writeToParcel(Parcel out, int flags)
    {
        out.writeInt(id);
        out.writeString(title);
        out.writeString(time);
        out.writeString(day);
        out.writeString(organization);
        out.writeString(participants);
        out.writeString(description);
        out.writeString(descriptionFull);
        out.writeString(location);
        out.writeString(locationCaption);
        out.writeInt(locationCode);
        out.writeString(locationMap);
        out.writeString(imageUrl);
        out.writeString(color);
        out.writeInt(colorId);
        out.writeInt(columnId);
        out.writeString(startTime);
        out.writeString(endTime);
        out.writeLong(convertedTimeStart.getTime());
        out.writeLong(convertedTimeEnd.getTime());
        out.writeString(theme);
        out.writeTypedList(tags);
        out.writeList(tagsId);
    }
} 
```

在Activity中将数据写入intent：

```
Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
intent.putExtra("ProgramModel", programDetailsModel);
startActivity(intent); 
```

在 Activity 中从 bundle 中读取数据：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    savedInstanceState = getIntent().getExtras();
    if (savedInstanceState != null)
    {
        fromBundleModel = savedInstanceState.getParcelable("ProgramModel");
    }
} 
```

# macos - NSSharingService 在消息编辑器中填写“收件人：”字段

> ID：13421584
> 
> 赞同：3
> 
> 时间：2012-11-16T17:33:10.733
> 
> 标签：macos, operating-system, imessage

是否可以在消息编辑器中填写接收者电话号码（Apple id）以通过 [NSSharingServicesharingServiceNamed:NSSharingServiceNameComposeMessage] 分享？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-25T05:22:11.687

您可以使用`recipients`NSSharingService 的属性。它是一个可以填充多个接收器的数组。

```
let service = NSSharingService(named: NSSharingServiceNameComposeMessage)

let items = [<someItems>] as [AnyObject]
service?.recipients = ["mail@provider.com", ...]
service?.delegate = self
service?.performWithItems(items) 
```

# javascript - 在 iframe 中跟踪导航

> ID：13421588
> 
> 赞同：3
> 
> 时间：2012-11-16T17:33:25.537
> 
> 标签：javascript, html, iframe

假设`iframe`我的 HTML 页面中有一个。

```
<html>
<body> 
This is my page
<button> Button </button>
<iframe src="www.example.com"></iframe>
</body>
</html> 
```

因此用户可以点击`www.example.com`iframe 中页面上的链接。是否可以使用 JavaScript 来跟踪用户导航到的链接，然后当用户单击时`Button`，将这些链接发送到我的服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:55:48.920

您将无法从托管 iFrame 的页面跟踪 iFrame 中的事件。您可能会从 iFramed 页面中跟踪导航，然后使用`window.postMessage`. 这将要求您控制 iFrame 内的页面，并且您只能跟踪您控制的页面上的点击，并且这些页面已正确设置为向父级发送邮件。

您可以阅读有关`[window.postMessage]`[以下链接](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)的更多信息。需要注意的是，一些较旧的浏览器 (IE7) 不支持*postMessage*，因此您可以使用像[Window postMessage plugin](http://postmessage.freebaseapps.com/)这样的库，它对这些浏览器使用`window.location.hash`轮询。我以前使用过这个库并取得了成功。

# amazon-s3 - 未使用 SinkMode.REPLACE 删除级联 S3 Sink Tap

> ID：13421593
> 
> 赞同：3
> 
> 时间：2012-11-16T17:33:34.770
> 
> 标签：amazon-s3, directory, amazon, hdfs, cascading

我们正在运行 Cascading，其中 Sink Tap 被配置为存储在 Amazon S3 中，并且面临一些 FileAlreadyExistsException（请参阅 [1]）。这只是不时的（大约 100 次有 1 次）并且不可重现。

深入研究 Cascading codem，我们发现 Hfs.deleteResource() 被 BaseFlow.deleteSinksIfNotUpdate() 调用（其中包括）。顺便说一句，我们对沉默的 NPE 非常感兴趣（评论“当 fs 到达根目录时，hack to get around npe throw away”）。

从那里，我们用我们自己的 Tap 扩展了 Hfs Tap，以在 deleteResource() 方法中添加更多操作（参见 [2]），并使用直接调用 getFileSystem(conf).delete 的重试机制。

重试机制似乎带来了改进，但我们仍然有时会遇到失败（参见[3]中的示例）：听起来HDFS返回isDeleted=true，但直接询问文件夹是否存在，我们收到exists=true，应该不会发生。当流程成功时，日志还会随机显示 isDeleted true 或 false，这听起来像是返回的值无关紧要或不可信。

任何人都可以通过这样的行为带来他自己的 S3 体验：“文件夹应该被删除，但不是”？我们怀疑是 S3 问题，但它也可能出现在 Cascading 或 HDFS 中吗？

我们在 Hadoop Cloudera-cdh3u5 和 Cascading 2.0.1-wip-dev 上运行。

[1]

```
org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory s3n://... already exists
    at org.apache.hadoop.mapreduce.lib.output.FileOutputFormat.checkOutputSpecs(FileOutputFormat.java:132)
    at com.twitter.elephantbird.mapred.output.DeprecatedOutputFormatWrapper.checkOutputSpecs(DeprecatedOutputFormatWrapper.java:75)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:923)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:882)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1278)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:882)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:856)
    at cascading.flow.hadoop.planner.HadoopFlowStepJob.internalNonBlockingStart(HadoopFlowStepJob.java:104)
    at cascading.flow.planner.FlowStepJob.blockOnJob(FlowStepJob.java:174)
    at cascading.flow.planner.FlowStepJob.start(FlowStepJob.java:137)
    at cascading.flow.planner.FlowStepJob.call(FlowStepJob.java:122)
    at cascading.flow.planner.FlowStepJob.call(FlowStepJob.java:42)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.j 
```

[2]

```
 @Override
  public boolean deleteResource(JobConf conf) throws IOException {
    LOGGER.info("Deleting resource {}", getIdentifier());

    boolean isDeleted = super.deleteResource(conf);
    LOGGER.info("Hfs Sink Tap isDeleted is {} for {}", isDeleted,
        getIdentifier());

    Path path = new Path(getIdentifier());

    int retryCount = 0;
    int cumulativeSleepTime = 0;
    int sleepTime = 1000;

    while (getFileSystem(conf).exists(path)) {
      LOGGER
          .info(
              "Resource {} still exists, it should not... - I will continue to wait patiently...",
              getIdentifier());
      try {
        LOGGER.info("Now I will sleep " + sleepTime / 1000
            + " seconds while trying to delete {} - attempt: {}",
            getIdentifier(), retryCount + 1);
        Thread.sleep(sleepTime);
        cumulativeSleepTime += sleepTime;
        sleepTime *= 2;
      } catch (InterruptedException e) {
        e.printStackTrace();
        LOGGER
            .error(
                "Interrupted while sleeping trying to delete {} with message {}...",
                getIdentifier(), e.getMessage());
        throw new RuntimeException(e);
      }

      if (retryCount == 0) {
        getFileSystem(conf).delete(getPath(), true);
      }

      retryCount++;

      if (cumulativeSleepTime > MAXIMUM_TIME_TO_WAIT_TO_DELETE_MS) {
        break;
      }
    }

    if (getFileSystem(conf).exists(path)) {
      LOGGER
          .error(
              "We didn't succeed to delete the resource {}. Throwing now a runtime exception.",
              getIdentifier());
      throw new RuntimeException(
          "Although we waited to delete the resource for "
              + getIdentifier()
              + ' '
              + retryCount
              + " iterations, it still exists - This must be an issue in the underlying storage system.");
    }

    return isDeleted;

  } 
```

[3]

```
INFO [pool-2-thread-15] (BaseFlow.java:1287) - [...] at least one sink is marked for delete
 INFO [pool-2-thread-15] (BaseFlow.java:1287) - [...] sink oldest modified date: Wed Dec 31 23:59:59 UTC 1969
 INFO [pool-2-thread-15] (HiveSinkTap.java:148) - Now I will sleep 1 seconds while trying to delete s3n://... - attempt: 1
 INFO [pool-2-thread-15] (HiveSinkTap.java:130) - Deleting resource s3n://...
 INFO [pool-2-thread-15] (HiveSinkTap.java:133) - Hfs Sink Tap isDeleted is true for s3n://...
 ERROR [pool-2-thread-15] (HiveSinkTap.java:175) - We didn't succeed to delete the resource s3n://... Throwing now a runtime exception.
 WARN [pool-2-thread-15] (Cascade.java:706) - [...] flow failed: ...
 java.lang.RuntimeException: Although we waited to delete the resource for s3n://... 0 iterations, it still exists - This must be an issue in the underlying storage system.
    at com.qubit.hive.tap.HiveSinkTap.deleteResource(HiveSinkTap.java:179)
    at com.qubit.hive.tap.HiveSinkTap.deleteResource(HiveSinkTap.java:40)
    at cascading.flow.BaseFlow.deleteSinksIfNotUpdate(BaseFlow.java:971)
    at cascading.flow.BaseFlow.prepare(BaseFlow.java:733)
    at cascading.cascade.Cascade$CascadeJob.call(Cascade.java:761)
    at cascading.cascade.Cascade$CascadeJob.call(Cascade.java:710)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:21:07.233

首先，仔细检查 Cascading 兼容性页面以获取支持的发行版。

[http://www.cascading.org/support/compatibility/](http://www.cascading.org/support/compatibility/)

注意 列出 Amazon EMR 是因为它们会定期运行兼容性测试并报告结果。

其次，S3 是一个最终一致的文件系统。HDFS 不是。因此，关于 HDFS 行为的假设不会延续到针对 S3 存储数据。例如，重命名实际上是复制和删除。副本可能需要几个小时。亚马逊已经修补了他们的内部分布以适应许多差异。

第三，S3 中没有目录。这是一种 hack，不同的 S3 接口（jets3t vs s3cmd vs ...）支持不同。考虑到前面的观点，这肯定是有问题的。

第四，网络延迟和可靠性至关重要，尤其是在与 S3 通信时。从历史上看，我发现在使用 EMR 与标准 EC2 实例时，在 S3 上处理大量数据集时，Amazon 网络表现得更好。我也相信他们是 EMR 中的一个补丁，也可以改善这里的问题。

所以我建议尝试运行 EMR Apache Hadoop 发行版，看看你的问题是否得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:56:33.050

在 Hadoop 上运行使用 S3 中的文件的任何作业时，必须牢记最终一致性的细微差别。

我帮助解决了许多应用程序的问题，这些应用程序的根本问题是删除竞争条件相似——无论它们是在级联或 Hadoop 流中，还是直接用 Java 编写。

在给定的键/值对被完全删除后，有一次讨论来自 S3 的通知。我没有跟上该功能的位置。否则，最好设计系统——同样，无论是在 Cascading 中还是在任何其他使用 S3 的应用程序中——使得由批处理工作流使用或生成的数据在 HDFS 或 HBase 或键/值框架中进行管理（例如，为此使用了 Redis）。然后 S3 用于持久存储，但不用于中间数据。

# sublimetext2 - Sublime Text 2，查找和替换正则表达式的更快替代方法？

> ID：13421594
> 
> 赞同：2
> 
> 时间：2012-11-16T17:33:39.060
> 
> 标签：sublimetext2

```
$_POST['daily_limit'];
$whatever = $_POST['smoke'];
$_POST['soup'] + $_POST['cake']; 
```

至

```
$this->input->post('daily_limit');
$whatever = $this->input->post('smoke');
$this->input->post('soup') + $this->input->post('cake'); 
```

在这个例子中，有没有更快的方法来切换，`$_POST[]`而`$this->input->post()`无需编写正则表达式查找和替换？我不在乎它是否需要多个步骤。为此（查找：`\$_POST\[(.*?)\]`替换：）编写正则表达式`\$this->input->post\($1\)`比手动更改它们需要更长的时间（也许我只是不擅长正则表达式）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:03:19.650

### @nnnn 我对您的版本进行了修改以删除 wtfh4xxy 部分。

选择：`$_POST`

`alt``f3`

类型：`$this->input->post(`

`ctrl``shift``m`

`ctrl``x`

`ctrl``shift``m`

`ctrl``v`

类型：`)`

崇高的文字ftw！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:07:40.310

我在这里做了一个粗鲁的假设，即每对括号内只有一个变量，并且变量仅包含字母数字字符。`['soup'+'bacon']`会打破这个把戏，也会`['soup-with-bacon']`。

使用光标，突出显示`$_POST[`- 仅此而已。

如果您使用的是 Windows/Linux，请点击`Alt`+ （在 Mac 中是 +？）`F3``Cmd``Shift``G`

尝试滚动浏览并查看所选的所有内容是否都是您要替换的所有内容。

类型`$this->input->post(`- 没有别的。

按`→</kbd> to move all cursors to the right of the first quote.`

按`Ctrl`+`→</kbd> (this is the only remotely wtfh4xxy part of the process, and only if you're not used to navigating by word with the cursor) to navigate over the variable.`

按`→</kbd> twice to move all cursors to the right of the next quote.`

将 替换`]`为`)`。

# java - jquery + grails，如何将输入数据从对话框传递到控制器

> ID：13421595
> 
> 赞同：1
> 
> 时间：2012-11-16T17:33:55.630
> 
> 标签：java, javascript, html, grails, groovy

我是 grails 和 jquery 的新手。

我创建了一个像这个例子一样的 jquery 对话框：http: [//jqueryui.com/dialog/#modal-form](http://jqueryui.com/dialog/#modal-form)

打开一个对话框，输入数据，然后在主页面的表格中显示数据。

表是动态的，将所有条目添加到表中后我想创建一个保存按钮，它将所有数据保存到数据库中，我的问题是如何将表中的所有数据传递到控制器中，以便控制器可以持久化数据？

这是我的gsp：

```
 <fieldset class="form">
            <h2>ReportInstance</h2>
            <table id="reportInstances" class="ui-widget ui-widget-content">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Template</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <button id="create_new_reportInstance">Create new Report
                Instance</button>
        </fieldset>

        <fieldset class="buttons">
            <g:submitToRemote controller="NewReport" action="saveReport"
                update="page-body" value="save" />
        </fieldset>
    </g:form>

 javascript:

           $("#dialog-form").dialog(
               {
                autoOpen : false,
                    height : 300,
                    width : 350,
                    modal : true,
                buttons : {
                 "Create an account" : function() {
                          var bValid = true;
                           allFields.removeClass("ui-state-error");
                                if (bValid) {
                                    $("#reportInstances    tbody").append(
                                    "<tr>" + "/<td>" + name.val() + "/</td>"
                                            + "/<td>" + template.val()
                                            + "/</td>" + "/<td>" + "/</tr>");

                            $(this).dialog("close");
                        }
                    },
                    Cancel : function() {
                        $(this).dialog("close");
                    }
                },
                close : function() {
                    allFields.val("").removeClass("ui-state-error");
                }
            });

    $("#create_new_reportInstance").button().click(function() {
        $("#dialog-form").dialog("open");
    }); 
```

我只想将 name.val() 和 template.val() 传递给控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:20:22.690

我根本不会使用`submitToRemote`。由于您已经在使用 jQuery，您可以通过 Ajax 发布此内容：

```
if(bValid) {
    $.ajax({
        url: "/yourApp/newReport/saveReport",
        type: "POST",
        data: {"name": name.val(), "template": template.val()},
        success: function(data) {
            $("#reportInstances tbody").append( "" + "/" + name.val() + "/" + "/" + template.val() + "/" + "/" + "/");
            $(this).dialog("close");
        },
        error: function(xhr, textStatus, error){
           //whatever you need to do here - output errors etc.
           console.log(xhr.statusText);
           console.log(textStatus);
           console.log(error);
        }

    });
} 
```

在您的控制器中，您将获得 a`params.name`和 a`params.template`

还要注意控制器名称上的小写首字母 - 在 Grails 中，`NewReportController`访问方式为`newReport`

# web-services - 是否有任何版本的 Delphi（不是 .net）支持 Document/literal 或 RPC/literal 绑定 SOAP 服务？

> ID：13421600
> 
> 赞同：3
> 
> 时间：2012-11-16T17:34:07.390
> 
> 标签：web-services, delphi, soap

我为我们的一些服务提供了一个 SOAP 服务器 API，其中一位客户说他们不会与至少不提供 WS-I Basic Profile 合规性绑定的服务集成。

那么，问题是任何版本的 Delphi 都支持 Document/literal 或 RPC/literal 绑定吗？

**编辑：**看起来 RemObjects 支持 Document/literal 或 RPC/literal。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:28:24.790

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms996466.aspx#rpc_literal_topic5)（2003 年 4 月）：

> **WS-I Basic Profile 和 RPC/literal**
> 
> 不幸的是，WS-I Basic Profile 明确地允许使用 document/literal 和 RPC/literal。鉴于上述分析，我认为有两种消息格式是不必要的，最终无助于互操作性。希望大多数（如果不是全部）Web 服务开发人员会忽略 RPC/literal，并向 WS-I 提供必要的反馈，以便在基本概要的未来版本中解决这个问题。

所以我建议完全忽略 RPC/literal。

[http://en.wikipedia.org/wiki/WS-I_Basic_Profile](http://en.wikipedia.org/wiki/WS-I_Basic_Profile)也指向不同版本的 WS-I Basic - 1.2（2010 年 11 月完成）和 2.0（2010 年 11 月发布）似乎是最新版本。我会检查您的通信伙伴所期望的版本级别。

* * *

**解决方案**

将 Web 服务从 Delphi 移至符合 WS-I 的框架，Delphi 仍然提供逻辑，但在内部通过 IPC 与新框架进行对话。

[Wikipedia 文章中列出](http://en.wikipedia.org/wiki/WS-I_Basic_Profile)的大多数兼容框架都是开源的，具有良好的文档和庞大的安装用户群，因此它们可用于生产且稳定。

从长远来看，使用兼容的框架将减少混乱和变通方法，并且还允许支持其他 WS-I 标准而无需额外的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:56:01.100

我最近深入研究了 Delphi 代码，因为我无法使用 MS Exchange Server WDSL（这似乎是 SOAP 1.1“文档/文字包装”）。
我不是这方面的专家，但我在 Delphi XE2 单元 Soap.OPToSOAPDomConv 中遇到了这段代码，这对我来说看起来不正确：

```
if not IsRPC then
begin
  if IsBareLiteral then
  begin
    [snip]
  end
  else
  begin
    // IsWrappedLiteral ! 
```

和

```
function TSOAPDomConvHelper.IsRPC: Boolean;
begin
  Result := not (soDocument in Options);
end;

function TSOAPDomConvHelper.IsBareLiteral: Boolean;
begin
  Result := Options * [soDocument, soLiteralParams] = [soDocument, soLiteralParams];
end;

function TSOAPDomConvHelper.IsWrappedLiteral: Boolean;
begin
  Result := Options * [soDocument, soLiteralParams] = [soDocument];
end; 
```

尽管您的问题是关于 WSDL 生成（而不是关于它的消耗），但以上内容向我表明“文档/文字包装”没有得到适当的支持。

简

# objective-c - MailCore 并发支持

> ID：13421602
> 
> 赞同：1
> 
> 时间：2012-11-16T17:34:13.240
> 
> 标签：objective-c, ios, multithreading, nsoperationqueue, mailcore

我正在使用 MailCore 框架（基于 C 库 LibEtPan）开发邮件客户端。我想处理服务器连接和新线程或队列中的所有请求，并将信息推送到主队列以进行 UI 更新。

MailCore 变量似乎无法跨线程共享的问题。

```
@implementation Controller
{
    NSOperationQueue *_queue;
    CTCoreAccount *_account;
    CTCoreFolder *_inbox;
    NSArray *_messages;
}

- (id)init
{
   // stuff

    _queue = [[NSOperationQueue alloc] init];

    [_queue addOperationWithBlock:^
     {
         _account = [[CTCoreAccount alloc] init];

         BOOL success = [_account connectToServer:@"imap.mail.com" port:993 connectionType:CTConnectionTypeTLS authType:CTImapAuthTypePlain login:@"me@mail.com" password:@"Password"];

         if (success)
         {
             CTCoreFolder *inbox = [_account folderWithPath:@"INBOX"];
             NSArray *messages = [inbox messagesFromSequenceNumber:1 to:0 withFetchAttributes:CTFetchAttrEnvelope];

             [[NSOperationQueue mainQueue] addOperationWithBlock:^
              {
                  _messages = [messages copy];
                  // UI updates here
              }];
         }
     }];

     // Other stuff
} 
```

稍后，例如可以调用此方法：

```
- (void)foo
{
    [_queue addOperationWithBlock:^
     {
         CTCoreMessage *message = [_messages objectAtIndex:index];

         BOOL isHTML;
         NSString *body = [message bodyPreferringPlainText:&isHTML];

         [[NSOperationQueue mainQueue] addOperationWithBlock:^
          {
              // UI Updates
          }];
     }];
} 
```

这里，`body`是空的，因为 CTCore 变量无法执行来自`_queue`.

根据此[评论](https://github.com/mronge/MailCore/issues/29#issuecomment-8164205)，每个线程需要自己的 CTCoreAccount 等...... iOS 上的线程应该具有共享内存。我不完全理解为什么跨线程重用相同的 CTCoreAccount 不起作用，即使在 LibetPan 库中使用了引用。如何定义一个唯一的 CTCoreAccount 或 CTCoreFolder “附加”到可以多次重用的不同线程或队列？

任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:49:52.977

MRonge[在这里](https://github.com/mronge/MailCore/issues/29)给出了答案。

> One way is to create an object that contains both the NSOperationQueue (with the maxConcurrentOperationCount=1) and the CTCoreAccount. All work for that account goes through the object, and is only executed on one thread at a time. Then you can one of these objects for each account you want to access.

# c# - 绑定到项控件中的用户控件属性

> ID：13421604
> 
> 赞同：1
> 
> 时间：2012-11-16T17:34:20.563
> 
> 标签：c#, xaml, windows-8, windows-runtime

有人能告诉我为什么我在这里绑定数据的方式不起作用吗？我可以通过使用 GridView 来做到这一点。我不确定为什么数据没有在这里传递给用户控件，此外它编译得很好并显示带有默认文本的用户控件

Main.xaml.cs：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Media.Imaging;
using Windows.UI.Xaml.Navigation;

// The Blank Page item template is documented at http://go.microsoft.com/fwlink/?LinkId=234238

namespace ItemsControlSample
{
/// <summary>
/// An empty page that can be used on its own or navigated to within a Frame.
/// </summary>
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
    }

    /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        PopulateData(); 

    }

    public class someKindaOfDataHolder
    {
        public string Text1;
        public string Text2; 
    }

    private void PopulateData()
    {
        List<someKindaOfDataHolder> dataAndStuff = new List<someKindaOfDataHolder>(); 

        for (int i = 0; i < 5; ++i)
        {
            dataAndStuff.Add(new someKindaOfDataHolder()
            {
                Text1 = "data spot 1: " + i.ToString(),
                Text2 = "data spot 2: " + (i + 2).ToString() 
            }); 

        }

        ListOfAUserControls.ItemsSource = dataAndStuff; 
    }

}
} 
```

主文件

```
<Page
x:Class="ItemsControlSample.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:ItemsControlSample"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ScrollViewer>
            <ItemsControl x:Name="ListOfAUserControls" ItemsSource="{Binding}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                        <local:CustomUserControl DynamicText1Text="{Binding Text1}"  DynamicText2Text="{Binding Text2}" Margin="0,0,10,0"/> 
                    </DataTemplate>
            </ItemsControl.ItemTemplate>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="100,46,-50,0"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

        </ItemsControl>
    </ScrollViewer>

</Grid>
</Page> 
```

CustomUserControl.xaml.cs：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;

// The User Control item template is documented at http://go.microsoft.com/fwlink/?LinkId=234236

namespace ItemsControlSample
{
public sealed partial class CustomUserControl : UserControl
{

    public static readonly DependencyProperty DynamicText1Property =
     DependencyProperty.Register("DynamicText1Text", typeof(string), typeof(CustomUserControl), new PropertyMetadata(null, OnDynamicText1PropertyChanged));

    public string DynamicText1Text
    {
        get { return (string)GetValue(DynamicText1Property); }
        set { SetValue(DynamicText1Property, value); }
    }

    public static readonly DependencyProperty DynamicText2Property =
     DependencyProperty.Register("DynamicText2Text", typeof(string), typeof(CustomUserControl), new PropertyMetadata(null, OnDynamicText2PropertyChanged));

    public string DynamicText2Text
    {
        get { return (string)GetValue(DynamicText2Property); }
        set { SetValue(DynamicText2Property, value); }
    }

    public CustomUserControl()
    {
        this.InitializeComponent();
    }

    private static void OnDynamicText1PropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var obj = d as CustomUserControl;
        obj.DynamicText1.Text = e.NewValue.ToString();
    }

    private static void OnDynamicText2PropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var obj = d as CustomUserControl;
        obj.DynamicText2.Text = e.NewValue.ToString();
    }
}
} 
```

CustomUserControl.xaml：

```
<UserControl
x:Class="ItemsControlSample.CustomUserControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:ItemsControlSample"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="800"
d:DesignWidth="800">

<Grid Background="Blue">
    <Grid.RowDefinitions>
        <RowDefinition Height="6*"/>
        <RowDefinition Height="2*"/>
    </Grid.RowDefinitions>

    <Image  Source="ms-appx:///Assets/MSIcon.png" />
    <StackPanel Grid.Row="1"   Margin="25">
        <TextBlock Text="Obay" FontSize="45" />
        <TextBlock x:Name="DynamicText1" Text="DynamicText1" FontSize="35" />
        <TextBlock x:Name="DynamicText2" Text="DynamicText2" FontSize="35" />
    </StackPanel>
</Grid>
</UserControl> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:09:17.223

您需要在某处设置[DataContext 。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.datacontext)没有它 - 您的绑定没有上下文并且它们失败（在调试 Debug 构建时查看 VS 中的输出窗口以查看绑定错误）。您正在设置 ItemsSource="{Binding}" 绑定没有上下文。

再说一遍 - 你正在用你的“ListOfAUserControls.ItemsSource = dataAndStuff;”覆盖其他地方的 ItemsSource 打电话，所以这可能不是最终导致您的问题的问题。ItemsControl 中项目的 DataContext 应自动设置为 ItemsSource 集合中的项目。

另一个可能会阻止你的问题是 someKindaOfDataHolder.Text1 在你的情况下是一个字段，它应该是一个与绑定一起使用的属性 - 试试这个：

```
public string Text1 { get; set; } 
```

# asp.net-mvc - ASP.NET MVC 中的 Facebook UI 调用未返回应有的图片

> ID：13421605
> 
> 赞同：0
> 
> 时间：2012-11-16T17:34:22.410
> 
> 标签：asp.net-mvc, facebook

有谁知道为什么图片属性在 Facebook UI 调用中不起作用？

```
function postToWallUsingFBUi()
    {   
        var data=
        {
        method: 'stream.publish', 
        message: "Posted using FB.ui and picture.",
        display: 'iframe',
        caption: "Caption",
        name: "Name",
        //ver 1 picture: 'http://www.somedomain.com/albums/s339/rockaja/fb-520.png',   
        //ver 2 picture: '@Url.Action("Action", "Controller", new { PageId = Model.PageTabId }, Request.Url.Scheme)',
        picture: 'https://localhost/MyVirtualDirectory/Controller/Action/283659015078395',
        link: "http://www.mydomain.com/",  // Go here if user click the picture
        description: "Description field",
        actions: [{ name: 'action_links text!', link: 'http://www.mydomain.com' }]           
        }
        FB.ui(data, onPostToWallCompleted);
    } 
```

如您所见，图片属性使用来自本地主机的图片。如果我将此 URL 粘贴到浏览器的地址字段中，我会得到预期的图片。

我还注释掉了其他两个版本：版本 1 按预期正常工作，但版本 2 不工作（这是一个 ASP.NET MVC 调用，但这一事实不影响结果）。

可能是因为我请求了 localhost-ed 图片？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:14:30.860

我从来没有在 FB API 上工作过，所以请接受我的建议。

根据我对 Facebook 工作原理的理解，您在用户墙上分享的任何图片都会首先进入 FB 的数据存储，并且总是从该存储中提取。

在这里，Facebook API 可能会从您提供的 URL 下载图片并将其推送到自己的商店中，然后再将其发布到用户的墙上。当您使用 localhost url 时，下载图片的调用显然会失败。

必须有另一个版本的 API，您应该能够将图片内容作为字节数组发送。如果有，那么您可以自己从磁盘加载图片并在 API 中发送字节数组

# svn - 我的 svn 状态显示“C”。我该如何解决？

> ID：13421610
> 
> 赞同：3
> 
> 时间：2012-11-16T17:34:42.680
> 
> 标签：svn, conflict

这是我的 bash 命令提示符：

```
-bash-4.1$ svn st
 C      .
C       my_sysconfig.ini 
```

`C`手段冲突，对吧？我想在它上面使用`mf`( `mine-full`) 命令来接受我的文件版本。我怎么做？

另外，有人知道`.`是什么吗？这是`.svn`文件夹吗？如果是，为什么会出现在我的`svn status`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T17:39:19.137

是的，`C`是为了冲突。你要：

```
svn resolve --accept mine-full my_sysconfig.ini 
```

指的`.`是当前目录，并且该条目的 C 在第二列中的事实意味着它是当前目录的元数据/属性冲突。例如，这可能是 svn:mergeinfo 等中的冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:45:47.687

您将需要解决冲突。取决于您的 svn 和您使用的工具，您可能有以下选项：

```
$ svn update
Updating '.':
Conflict discovered in 'foo.c'.
Select: (p) postpone, (df) diff-full, (e) edit,
        (mc) mine-conflict, (tc) theirs-conflict,
        (s) show all options: p
C    foo.c 
```

如果您想接受您的更改，您可以使用以下 svn 命令。

```
svn resolve --accept mine-full foo.c 
```

# c# - C# 和 PHP 上的 Blowfish 加密产生不同的结果

> ID：13421611
> 
> 赞同：1
> 
> 时间：2012-11-16T17:34:44.360
> 
> 标签：c#, php, encryption, blowfish

我正在尝试进行 Blowfish 加密，但导致解密 C# 加密的代码不一样。我在 C# 中使用了这个库： [https](https://defuse.ca/source/blowfish.cs) ://defuse.ca/source/blowfish.cs 和这个自写的代码来加密：

```
$td = MCRYPT_BLOWFISH;
$iv_size = mcrypt_get_iv_size($td, MCRYPT_MODE_CBC);
$iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

echo "Original data: $data<br />"; 

$encrypted_data = mcrypt_encrypt($td, $blowfish_key, $dec, MCRYPT_MODE_CBC, $iv);

echo "Encrypted data: " . bin2hex($encrypted_data)  . "<br />";
$x ="1e9a532f6391071e04ac46dfd4ffa1e324665ef7f1e75b8c2ea6ebabd75fd04d8"; //result from C#
$data = mcrypt_decrypt($td, $blowfish_key, $x /*$encrypted_data*/, MCRYPT_MODE_CBC, $iv);

echo trim($data); 
```

有人可以帮我解决这个问题吗？提前致谢。甲烷

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T18:27:24.443

您的 PHP 代码有 2 个问题：

首先：mcrypt 需要二进制数据...没有带有十六进制编码字节的字符串...（hex2bin() 或 pack() 将为您转换）

第二：IV ...您的blowfish.cs为您生成一个随机IV，并将其（8个字节）放在密文前面...而您的php代码生成一个新的随机IV，该IV不适用于解密

建议：

C＃

```
var fish = new BlowFish("0000000000000000");
var cs_output=fish.Encrypt_CBC("This is a test of the blowfish.cs file"); 
```

php

```
$cs_output="27c7c634ead1d28bfe64821a28ef909311e1f655150f24eec27abff1376a7a8712e7962fdbb0150bfc0882078cb99e67";

$iv=pack("H*" , substr($cs_output,0,16));
$blowfish_key=pack("H*" , "0000000000000000"); // key in this example is all zero
$x =pack("H*" , substr($cs_output,16)); 
$data = mcrypt_decrypt(MCRYPT_BLOWFISH, $blowfish_key, $x , MCRYPT_MODE_CBC, $iv); 
```

# android - OnItemClick 没有响应带有复选框和自定义光标适配器的列表视图

> ID：13421612
> 
> 赞同：0
> 
> 时间：2012-11-16T17:34:47.137
> 
> 标签：android

带有复选框和 CustomCursorAdapter 的列表视图

在 ListActivity.java

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.list);

    ListView listView = (ListView) findViewById(R.id.lists);
    listView.setItemsCanFocus(false);
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);

    //create Cursor called cursor
    listAdapter = new DetailListAdapter(this, cursor);
    getLoaderManager().initLoader(LOADER_ID, null, this);
    listView.setAdapter(listAdapter);
    listView.setOnItemClickListener(new OnItemClickListener(){
        @Override
        public void onItemClick(AdapterView<?> arg0, View v, int arg2, long arg3)
        {
            //want to call startactionmode with class implementing ListView.MultiChoiceModeListener
        }

    });

} 
```

在 DetailListAdapter.java 中

```
public class DetailListAdapter extends CursorAdapter 
{
    private Context         context;
    private ArrayList<Boolean> checked = new ArrayList<Boolean>();
    private LayoutInflater  mLayoutInflater;

    public DetailListAdapter(Context context, Cursor c)
    {
        super(context, c);
        mContext = context;
        mLayoutInflater = LayoutInflater.from(context);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent)
    {
        View v = mLayoutInflater.inflate(R.layout.list_item, parent, false);
        return v;
    }

    @Override
    public void bindView(View v, Context context, Cursor c)
    {
        final View view = v;
        final int position = c.getInt(0);
        String data = c.getString(c.getColumnIndexOrThrow("DATA"));

        /**
         * Next set the name of the entry.
         */
        TextView list_text = (TextView) view.findViewById(R.id.listitemtext);

        CheckBox checkbox_text = (CheckBox) view.findViewById(R.id.listitemcheckbox);

        list_text.setText(data);

        checked.add(position - 1, false);
        checkbox_text.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                if (isChecked)
                {
                    view.setBackgroundColor(Color.GRAY);
                    checked.set(position - 1, true);
                } else
                {
                    view.setBackgroundColor(Color.BLACK);
                    checked.set(position - 1, false);
                }
            }
        });

        checkbox_text.setChecked(!checkbox_text.isChecked());
    }
} 
```

列表行 xml 是，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:descendantFocusability="blocksDescendants">

<CheckBox
    android:id="@+id/check1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="20dp"
    android:focusable="false"
  />

<TextView
    android:id="@+id/text1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/check1"
    android:layout_toRightOf="@+id/check1"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" 
   />

<TextView
    android:id="@+id/text2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/text1"
    android:layout_alignBottom="@+id/text1"
    android:layout_marginLeft="20dp"
    android:layout_toRightOf="@+id/text1"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" 
   />

<TextView
    android:id="@+id/text3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/text2"
    android:layout_below="@+id/text1"
    android:layout_toRightOf="@+id/check1"
    android:text="Small Text"
    android:textAppearance="?android:attr/textAppearanceSmall" 
   />

 </RelativeLayout> 
```

当我单击模拟器中的列表项时，复选框被选中并且行变为灰色。但是 onitemclick 没有被调用。我在布局中的所有项目上都有 android:focusable="false" 和 android:focusableInTouchMode="false" ，这会在列表中创建一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:01:25.887

> 我希望选中复选框并在顶部显示菜单，其中包含可以在该选定列表项上执行的操作。

不能从一次触摸事件中调用两个 OnClickListener。如您所见，第一个侦听器的 `onCheckedChanged()`方法消耗了阻止它到达该`onItemClick()`方法的事件。

我建议在您的行中使用 Checkable 布局，该布局将为您维护检查状态并更改您的适配器`getView()`以根据视图回收器设置适当的背景颜色。

（如果您需要帮助，请在您的问题中发布您的 XML。）

# ruby-on-rails - Rails + Heroku：邮件程序的 SMTP 错误 (Net::SMTPAuthenticationError (535-5.7.1) ，但只是有时？

> ID：13421613
> 
> 赞同：0
> 
> 时间：2012-11-16T17:34:49.043
> 
> 标签：ruby-on-rails

我有一个应用程序，当用户注册时，他们会收到一封确认电子邮件。

这是用户控制器创建操作：

```
def create
  @user = User.new(params[:user])

  respond_to do |format|
    if @user.save
      UserMailer.registration_confirmation(@user).deliver
      log_in(@user)
      format.html { redirect_to @user, notice: "Welcome to Pholder, #{@user.name}!" }
      format.json { render json: @user, status: :created, location: @user }
    else
      format.html { render action: 'new' }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

正如您在@user.save 之后看到的，有一个邮件程序。但是，一个人刚刚告诉我他在尝试注册后在 heroku 上遇到了错误（“我们很抱歉，出了点问题”），所以我自己尝试了一下，也遇到了错误

```
2012-11-16T17:21:28+00:00 app[web.1]: Net::SMTPAuthenticationError (535-5.7.1 Please log in with your web browser and then try again. Learn more at
2012-11-16T17:21:28+00:00 app[web.1]: ): 
```

在查看了我的代码后，我尝试创建另一个用户，但这次成功了。有谁知道为什么？我在另一篇文章中读到，这可能是因为如果有太多用户同时注册（因为发送了太多电子邮件），它会失败，但我认为当时没有人注册，因为没有多少人知道我的应用.

smtp 设置：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => 'pacific-ravine-3563.herokuapp.com',
  :user_name            => ENV["EMAIL"],
  :password             => ENV["PASSWORD"],
  :authentication       => "plain",
  :enable_starttls_auto => true
}

config.action_mailer.default_url_options = { :host => 'pacific-ravine-3563.herokuapp.com' } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T20:43:13.140

在您证明自己是人类之前，Google 可能会阻止您。尝试通过网络浏览器登录此 Gmail 帐户。如果它不起作用，请尝试在登录并完成测试时访问[此链接。](https://www.google.com/accounts/DisplayUnlockCaptcha)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-07T06:36:41.887

如果它对任何人有帮助，我必须去这里并将活动“识别”为我自己的活动（它来自 Heroku 托管的服务器）：[https ://security.google.com/settings/security/activity](https://security.google.com/settings/security/activity)

# python - 'webapp2_extras.sessions' 缺少配置键：['secret_key']

> ID：13421614
> 
> 赞同：4
> 
> 时间：2012-11-16T17:34:50.297
> 
> 标签：python, google-app-engine, webapp2

我在 appengine 上的项目中添加了 webapp2 会话，该项目使用 webapp2 进行请求处理，使用 django 进行模板。

在[此页面](http://webapp-improved.appspot.com/api/webapp2_extras/sessions.html)之后，我将以下内容添加到我的脚本中

```
import webapp2

from webapp2_extras import sessions

class BaseHandler(webapp2.RequestHandler):
    def dispatch(self):
        # Get a session store for this request.
        self.session_store = sessions.get_store(request=self.request)

        try:
            # Dispatch the request.
            webapp2.RequestHandler.dispatch(self)
        finally:
            # Save all sessions.
            self.session_store.save_sessions(self.response)

    @webapp2.cached_property
    def session(self):
        # Returns a session using the default cookie key.
        return self.session_store.get_session()

config = {}
config['webapp2_extras.sessions'] = {
    'secret_key': 'my-super-secret-key',
} 
```

但是，现在我收到以下错误

```
Traceback (most recent call last):
  File "/home/user/google_appengine/lib/webapp2/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/home/user/google_appengine/lib/webapp2/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/home/user/google_appengine/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/home/user/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/home/user/sites/project2n/main.py", line 804, in dispatch
    self.session_store = sessions.get_store(request=self.request)
  File "/home/user/google_appengine/lib/webapp2/webapp2_extras/sessions.py", line 454, in get_store
    store = request.registry[key] = factory(request)
  File "/home/user/google_appengine/lib/webapp2/webapp2_extras/sessions.py", line 308, in __init__
    required_keys=('secret_key',))
  File "/home/user/google_appengine/lib/webapp2/webapp2.py", line 1361, in load_config
    self._validate_required(key, config, required_keys)
  File "/home/user/google_appengine/lib/webapp2/webapp2.py", line 1375, in _validate_required
    'Missing configuration keys for %r: %r.' % (key, missing))
Exception: Missing configuration keys for 'webapp2_extras.sessions': ['secret_key'] 
```

我已经设置了密钥，使用 config. 我没有在会话中使用其他任何东西。其他进口是

```
import os,sys, string, time, sha, Cookie
from django.template import Context, Template
from django.template.loader import get_template 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T17:41:51.693

您需要在某处包含此配置，例如在您创建的 WSGI 应用程序中：

```
app = webapp2.WSGIApplication([('/path', MyHandler)],
                              config=config,
                              debug=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T05:24:35.550

顺序很重要：

```
config = {}
config['webapp2_extras.sessions'] = {
    'secret_key': 'my-super-secret-key',
}

app = webapp2.WSGIApplication([
    ('/', HomeHandler),
], config=config) 
```

[https://webapp-improved.appspot.com/api/webapp2_extras/sessions.html](https://webapp-improved.appspot.com/api/webapp2_extras/sessions.html)

# jsf - 如何禁用/启用 h:datatable

> ID：13421620
> 
> 赞同：0
> 
> 时间：2012-11-16T17:35:26.120
> 
> 标签：jsf, datatable

我有一个带有 ah:selectOneMenu 的页面和一个数据表。我想根据我在 h:selectOneMenu 中选择的内容来加载/渲染/启用我的 h:datatable。这可能吗？

这是一些代码

```
<tr class="portlet-table-body" >
<td width="20%" class="porlet-padding-left"><h:outputText value="${operatorProgramBundle.NextGenerationWorkflow}" /></td>
<td width="450px">
    <h:selectOneMenu id="ngw" styleClass="portlet-dropdown"  value="${CRUDOperatorProgram.selectedNextGenWorkflow}">
        <f:selectItems value="${CRUDOperatorProgram.nextGenWorkflowList}" />
    </h:selectOneMenu>
</td> 
```

```
<h:dataTable id="DispatchConfigurationCustom" columnClasses="portlet-table-same portlet-table-cell"
headerClass="portlet-table-same portlet-table-cell" value="#{CRUDOperatorProgram.workflowConfigList}" var="workflowConfig" width="100%" >
<h:column>
    <f:facet name="header">
        <h:outputText value="Include" />
    </f:facet>
    <h:selectBooleanCheckbox id="includeInd" value="#{workflowConfig.isIncludedInd}"/>
</h:column>
<h:column>
    <f:facet name="header">
        <h:outputText value="Automate" />
    </f:facet>
    <h:selectOneRadio id="onOff" value="#{workflowConfig.isAutomatedInd}">
        <f:selectItem id="onButton" itemLabel="On" itemValue="0" />
        <f:selectItem id="offButton" itemLabel="Off" itemValue="0" />
    </h:selectOneRadio>
</h:column>
</h:dataTable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T02:13:22.063

鉴于您使用的是 JSF 2.x，只需`<f:ajax>`在下拉列表中使用以更新数据表的最近父级，并让数据表的`rendered`属性评估`true`或`false`相应地取决于所选项目。

假设您只想在选择项目值“foo”时显示数据表，请执行以下操作：

```
<h:selectOneMenu value="#{bean.selectedItem}">
    <f:selectItems value="#{bean.availableItems}" />
    <f:ajax render="table" />
</h:selectOneMenu>

<h:panelGroup id="table">
    <h:dataTable rendered="#{bean.selectedItem == 'foo'}">
        ...
    </h:dataTable>
</h:panelGroup> 
```

# android - 必须在后台工作并将自身推到前台的应用程序

> ID：13421621
> 
> 赞同：1
> 
> 时间：2012-11-16T17:35:29.493
> 
> 标签：android, android-intent

我正在开发一个应用程序，因为在需要帮助之前我从未做过 Android 开发。我有一个与 API 对话的应用程序。API 是拉式的，这意味着如果服务器想向我发送一些东西，它会将其推送到我的消息框中，我必须要求它。

我的应用要做的是每 15 秒检查一次新消息并启动另一个 Activity。

还有一个要求是应用程序必须在后台运行，当有新消息进来时，应用程序需要将自己推到前台（不要担心可用性，它不是流行消费的应用程序）。

首先，我有一个 AsyncTask，但是如果您在后台从 AsyncTask 启动一个活动，它不会将应用程序推到前台。

我应该为此使用什么设计？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:33:47.153

你可以考虑AlarmManager：http: [//developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

要恢复您的活动而不是开始一个新活动，您可能需要使用“singleTop”等活动属性。

另一个有用的东西是服务：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

# forms - Spring MVC 3 - 表单提交失败后重置模型

> ID：13421624
> 
> 赞同：1
> 
> 时间：2012-11-16T17:35:40.083
> 
> 标签：forms, spring, spring-mvc

我正在开发一个 Spring MVC3 应用程序，我试图了解如何在表单提交发布后重置表单支持模型中的值。

*   例如，考虑一个显示有关客户及其服务的信息的应用程序（称为“评论”页面）。
*   Review 页面中有 2 个编辑链接，一个用于修改客户的个人资料信息（“编辑个人资料”），另一个用于修改他们选择的服务（“编辑服务”）。
*   “编辑个人资料”有一个提交和取消按钮

在这种情况下，我可能需要帮助来更新最后一次成功提交的模型。

1.  客户点击“编辑个人资料”并更改他们的个人资料（例如更改姓名、电话）并点击“提交”。
2.  没有服务器端验证错误，模型使用最新信息更新，“审查”页面很好。
3.  客户再次单击“编辑配置文件”并尝试更改配置文件的另一部分（例如电子邮件）并单击“提交”。
4.  这一次，出现服务器验证错误（“电子邮件已被其他用户占用”），客户被带回“编辑个人资料”页面。但是，由于提交了表单，“编辑个人资料”页面上会出现无效的电子邮件（这是预期的）。
5.  现在，客户点击“编辑资料”页面中的“取消”按钮。
6.  用户被引导回带有无效电子邮件的“审核”页面（因为表单支持模型已通过在步骤 3 中完成的提交进行了更新）。

我的问题是，当用户在“编辑配置文件”页面上单击“取消”到最近成功提交的表单时，如何更新模型。我无法将其从数据库中拉回，因为客户可能在遇到验证错误之前已成功提交。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:27:58.373

如果我理解正确，您有一组有状态的页面，您想在一切准备好更新数据库的单个提交之前按顺序处理这些页面？如果是这种情况，您可以考虑使用[Spring Web Flow](http://www.springsource.org/spring-web-flow)。

# c# - 时间：2019-05-10 标签：c#backgroundworker与一个正在运行的类

> ID：13421625
> 
> 赞同：2
> 
> 时间：2012-11-16T17:35:46.873
> 
> 标签：c#, winforms, backgroundworker

我想从表单启动后台工作人员。

```
 private void button2_Click(object sender, EventArgs e)
    {
        backgroundWorker2.RunWorkerAsync();
    }

    private void backgroundWorker2_DoWork(object sender, DoWorkEventArgs e)
    {
        ExtClass.doit("Hello", "World");
    } 
```

后台工作人员在文本框中插入“Hello World”。

```
 public static void doit(string a, string b)
    {
        Form F1 = Application.openForms[0] as Form1;
        F1.textbox1.Text = a + b;
    } 
```

但我得到一个例外。如何从后台工作人员访问表单控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:43:03.280

后台工作人员在后台工作（顾名思义）。

所有`Control`对象都被设计为**不是**线程安全的。您只能从创建它们的线程（通常称为 UI 线程）访问它们。

虽然有多种方法可以在 UI 线程中执行代码块，但您应该首先从根本上了解您的设计。使用后台工作者的想法是在后台工作；*不*涉及与用户界面交互的 工作。

如果您需要从 UI 获取信息来完成工作，您应该在启动后台工作程序之前获取它并将信息作为参数传递给工作方法。如果您想使用操作结果更新 UI，您应该使用已完成的事件处理程序。（这将始终在 UI 线程中运行；BGW 类会为您处理。）如果您需要使用进度更新进度条或标签，您应该使用进度更新事件并在 BGW 上调用更新进度。进度更新事件也在 UI 线程中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:41:24.890

```
F1.Invoke(new MethodInvoker(()=> { F1.textbox1.Text = a + b; })); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:05:50.220

我需要一点帮助。

我在另一个 c# 项目中运行后台工作程序。问题是这个项目有一个巨大的组合框和文本框，后台工作人员在运行时访问。

那么我如何在 GUI 中访问控件而不将它们全部放在一个，

textbox1.Invoke(new MethodInvoke(()............})); 选项...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:41:25.980

您需要返回对表单的引用，并使用 Invoke 或 Begin/End Invoke 传入修改表单的方法。

要保存引用，我建议您使用传递控件的[RunWorkerAsync(Object)](http://msdn.microsoft.com/en-us/library/f00zz5b2.aspx)并通过 DoWork Arg 的[Argument](http://msdn.microsoft.com/en-us/library/system.componentmodel.doworkeventargs.argument.aspx)获取引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T18:03:02.810

为了解决这个问题，你应该创建`Form1`引用而不是引用，`Form`因为`Form`没有`textBox1`字段但你`Form1`有，这是异常的来源，你应该改变这个：

```
Form F1 = Application.OpenForms[0] as Form1; 
```

进入这个

```
Form1 F1 = Application.OpenForms[0] as Form1; 
```

然后您应该调用对 textBox1 字段的访问（如果需要），因为您正在从另一个线程访问它（DoWork 在另一个线程中执行，但 RunWorkerCompleted 在 UI 线程中）。因此，完整的代码应该是这样的：

```
public static void doit(string a, string b)
{
    Form1 F1 = Application.openForms[0] as Form1;
    if(F1.InvokeRequired)
        F1.Invoke(new MethodInvoker(delegate() { F1.Text = a + b; });
    else
        F1.Text = a + b;
} 
```

# c# - 如何检索 Exchange Server 2007 的所有房间列表

> ID：13421628
> 
> 赞同：0
> 
> 时间：2012-11-16T17:35:50.850
> 
> 标签：c#, asp.net, exchange-server, exchangewebservices, exchange-server-2007

我正在尝试使用 c# 查找 Exchange Server 2007 的所有会议室。我通过使用 EWS 托管 API 找到了一种简单的方法：http: [//msdn.microsoft.com/en-us/library/exchange/hh532566 (v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/hh532566(v=exchg.80).aspx)

不幸的是，GetRoomLists() 不适用于 Exchange Server 2007。我希望如果有人已经工作或知道如何在 Exchange Server 2007 上找到会议室，那将是一个很大的帮助。我想查看 Exchange 服务器上所有可用的会议室，然后想使用它们的属性。

有没有办法可以显示所有现有房间，然后使用其属性，如电话/便笺选项卡信息？

任何帮助或建议将不胜感激。提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:48:54.393

根据我使用 Exchange 2003 和 2007 的经验，根据数据的存储和结构方式，这是不可能的。资源（房间）只是另一个联系人/用户/邮箱，在您创建事件之前，您可以将该联系人指定为房间（通过[AttendeeType](http://msdn.microsoft.com/en-us/library/exchange/exchangewebservices.attendeetype.attendeetype%28v=exchg.80%29.aspx)）。

在 EWS 2007 中，您可以使用[ResolveName](http://msdn.microsoft.com/en-us/library/exchange/aa493895%28v=exchg.80%29.aspx)方法来查找联系人/房间。

# javascript - jQuery将行为添加到表中的匹配复选框

> ID：13421630
> 
> 赞同：0
> 
> 时间：2012-11-16T17:35:56.973
> 
> 标签：javascript, jquery

我有这个带有标签和复选框的数据表。

当前设置为同时单击主行复选框。该表还具有每个主行的子行，我需要将行为添加到相同标签也同时单击的子行。例如：当我检查主行A的第一个子行时，那么主行B的第一个子行也会被检查。

我目前正在使用的表的结构与 ID 和类的结构相同。

我正在尝试的摘要：单击子行的复选框时，下面的相同子行复选框也被选中。

我是否将子行添加到数组中，并在单击复选框时以某种方式扫描它们以识别匹配项？有人可以为我指出如何解决这个问题的正确方向吗？谢谢。

[http://jsfiddle.net/c7EcH/](http://jsfiddle.net/c7EcH/)

```
$(document).ready(function() {
    $("label:contains('PRIMARY ROW A')").closest('tr').attr('id', 'prime-row-a');
    $("label:contains('PRIMARY ROW B')").closest('tr').attr('id', 'prime-row-b');
    var primeRowA = $("label:contains('PRIMARY ROW A')").prev('input');
    var primeRowB = $("label:contains('PRIMARY ROW B')").prev('input');

    primeRowA.change(function(){
        primeRowB.attr('checked', $(this).is(':checked'));
    });
    primeRowB.change(function(){
        primeRowA.attr('checked', $(this).is(':checked'));
    });
});  

<table width="550" border="0" cellspacing="0" cellpadding="5">
 <tr>
   <td>
     <input type="checkbox">
     <label><span>PRIMARY ROW A</span></label></td>
 </tr>
 <tr>
   <td>
     <input type="checkbox">
     <label><span id="01">01 - SUB ROW A</span></label></td>
   </tr>
 <tr>
   <td>
    <input type="checkbox">
    <label><span id="02">02 - SUB ROW B</span></label></td>
 </tr>
 <tr>
   <td>
    <input type="checkbox">
    <label><span id="03">03 - SUB ROW C</span></label></td>
   </tr>
 <tr>
   <td>
    <input type="checkbox">
    <label><span>PRIMARY ROW B</span></label></td>
 </tr>
 <tr>
  <td>
    <input type="checkbox">
    <label><span id="01">01 - SUB ROW A</span></label></td>
 </tr>
 <tr>
  <td>
   <input type="checkbox">
   <label><span id="02">02 - SUB ROW B</span></label></td>
 </tr>
 <tr>
  <td>
   <input type="checkbox">
   <label><span id="03">03 - SUB ROW C</span></label></td>
 </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:51:15.500

首先，ID 应该是唯一的，因此您不应该为多个元素提供相同的 id。

您可以为每组复选框分配相同的类，当您单击一个时，设置具有相同类的所有其他复选框的状态

```
$(document).ready(function() {
    $('input[type="checkbox"]').change(function () {
        var cls = $(this).attr('class');
        $('.' + cls).attr('checked', $(this).is(':checked'));
    });
}); 
```

[http://jsfiddle.net/rdmond/PGLjg/](http://jsfiddle.net/rdmond/PGLjg/)

这实际上重新选中了您刚刚选中的框，但调整它以仅更改具有相同类的*其他复选框并不难。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:51:44.133

首先使用唯一的名称和 ID - 你可以为你的`input`字段命名，例如 - 对于第 1 行

```
<label for="row1">ROW 1</label>
<input name = "row1" type = "checkbox" /> // row1
<input name = "subrow1a" type = "checkbox" /> // sub row of row1
// you can also use arrays of name i.e. like `name = subrow1[]` 
```

对于第 2 行

```
<label for="row2">ROW 2</label>
<input name = "row2" type = "checkbox" /> // row 2
<input name = "subrow2a" type = "checkbox" /> // sub row of row2 
```

其次..您还可以在检查时调用 Jquery/JavaScript 函数，即`onclick()`执行所需的操作。

# javascript - 使用javascript在可克隆表单文本字段中插入值

> ID：13421631
> 
> 赞同：0
> 
> 时间：2012-11-16T17:35:56.653
> 
> 标签：javascript, jquery, forms, twitter-bootstrap

我有一个名为的文本字段。它可以被克隆。还有一个链接可用于选择值。

我创建了一个 js fiddle 来展示给你看。

完整页面查看：http: [//jsfiddle.net/ZpEK9/embedded/result/](http://jsfiddle.net/ZpEK9/embedded/result/)

来源：http: [//jsfiddle.net/ZpEK9/](http://jsfiddle.net/ZpEK9/)

如您所见，如果您单击“选择名称”链接，它将弹出一个窗口。该窗口有名称和选择名称的链接。

当用户时钟“插入名称”链接时，我想在文本字段中插入该名称。谁能帮我用jquery代码..

PS：表单字段是可克隆的。

这就是我的代码的样子..

```
<form>
    <div class="control-group success">

  <div class="controls">
      <p class="clone"><input type="text" name="name[]"><span class="help-inline"><a data-toggle="modal" href="#myModal">Select a name</a></span></p>
    <span class="help-inline"><a href="#" class="add" rel=".clone">Add More</a></span>
  </div>
</div>
</form>
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
           <div class="row-fluid">
            <ul class="thumbnails">
              <li class="span4">
                <div class="thumbnail">
                  <div class="caption">
                    <h3>Sam</h3>
                    <p><a href="#" class="btn btn-primary">Insert name</a></p>
                  </div>
                </div>
              </li>
              <li class="span4">
                <div class="thumbnail">
                  <div class="caption">
                    <h3>Linda</h3>
                    <p><a href="#" class="btn btn-primary">Insert name</a></p>
                  </div>
                </div>
              </li>
              <li class="span4">
                <div class="thumbnail">
                  <div class="caption">
                    <h3>Lucy</h3>
                    <p><a href="#" class="btn btn-primary">Insert name</a></p>
                  </div>
                </div>
              </li>
              <li class="span4">
                <div class="thumbnail">
                  <div class="caption">
                    <h3>Jenifer</h3>
                    <p><a href="#" class="btn btn-primary">Insert name</a></p>
                  </div>
                </div>
              </li>
            </ul>
          </div>
          </div>​ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:48:46.670

试试这个。我已经更改了输入名称并`option`为每个`<a>`.

```
$('a.option').on('click', function() {
  $('input[name="name"]').val($(this).parent().parent().find('h3').text())
  $('.modal').toggle()
});​ 
```

[**小提琴**](http://jsfiddle.net/ZpEK9/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T18:13:04.490

我在这里用一个可行的解决方案分叉了你的 JSFiddle：

[http://jsfiddle.net/jg5C7/3/](http://jsfiddle.net/jg5C7/3/)

在链接中添加了“选择名称”类：

```
 <span class="help-inline">
        <a class="select-name" href="#myModal">Select a name</a>
    </span> 
```

为链接添加了绑定：

```
 $('a.select-name').click(function() {
        $('#myModal').data('current-input', $(this));
        $('#myModal').modal('show');
    });

    $('#myModal .btn').click(function() {
        $('#myModal').data('current-input').closest('p').find(':text').val($(this).data('value'));
        $('#myModal').modal('hide');
    }); 
```

为按钮添加了数据值属性，例如：

```
 <p><a href="#" data-value="Sam" class="btn btn-primary">Insert name</a></p> 
```

因为您正在使用插件来做一些魔术，所以它不是一个优雅的解决方案，但实际上对您当前所做的唯一更改是我手动触发模式打开/关闭，以便我可以挂钩点击“选择名称”链接的事件。

# php - 无法解析位置 41 (i) 的时间字符串：双时区规范

> ID：13421635
> 
> 赞同：23
> 
> 时间：2012-11-16T17:36:27.193
> 
> 标签：php, jquery

我正在使用 jquery [daterangepicker](https://github.com/filamentgroup/jQuery-UI-Date-Range-Picker)，而后者又使用 jQuery [datapicker](http://jqueryui.com/datepicker/)。

我的 Ubuntu 系统运行良好。浏览器正在发送一个可解析的字符串：

```
$dateStarted = new \DateTime($post['startDate']); // Thu Nov 15 2012 00:00:00 GMT-0700 (MST)
print_r($dateStarted); 
```

输出：

```
DateTime Object
(
    [date] => 2012-11-15 00:00:00
    [timezone_type] => 1
    [timezone] => -07:00
) 
```

在我们的测试人员 Windows 系统上，浏览器在字符串中发送一个扩展的时区：

```
$dateStarted = new \DateTime($post['startDate']); // Thu Nov 15 2012 00:00:00 GMT-0700 (Mountain Standard Time)
print_r($dateStarted); 
```

抛出和异常：

```
Exception: DateTime::__construct(): Failed to parse time string 
 (Thu Nov 15 2012 00:00:00 GMT-0700 (Mountain Standard Time)) 
 at position 41 (i): Double timezone specification 
```

我四处搜索，找不到有关此特定 PHP 错误的任何资源。

我通过删除返回相同结果的括号文本来“解决”这个问题：

```
$dateString = strstr($dateString, " (", true); // Thu Nov 15 2012 00:00:00 GMT-0700 
```

这似乎很糟糕，我正在寻找有关如何正确执行此操作的建议。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-16T20:55:57.710

正如 Marc B 所建议的那样使用[DateTime::createFromFormat()](http://ca1.php.net/manual/en/datetime.createfromformat.php)似乎是一个更好的解决方案。

我最终得到的是：

```
$dateStarted = \DateTime::createFromFormat('D M d Y H:i:s e+', $post['startDate']); // Thu Nov 15 2012 00:00:00 GMT-0700 (Mountain Standard Time)
print_r($dateStarted);
print_r(\DateTime::getLastErrors()); 
```

现在输出正确的日期：

```
DateTime Object
(
    [date] => 2012-11-15 00:00:00
    [timezone_type] => 1
    [timezone] => -07:00
)

Array
(
    [warning_count] => 1
    [warnings] => Array
        (
            [33] => Trailing data
        )

    [error_count] => 0
    [errors] => Array
        (
        )

) 
```

`+`格式末尾的 是使这项工作发挥作用的魔力。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T18:13:28.383

我会说这是一个错误。使用此字符串时，您会收到相同的错误

```
$dateStarted = new \DateTime("Thu Nov 15 2012 00:00:00 GMT-0700 (abcdefg)"); 
```

少一个

```
$dateStarted = new \DateTime("Thu Nov 15 2012 00:00:00 GMT-0700 (abcdef)"); 
```

它被“正确”解析。

似乎时区字符串限制为 6 个字符。除非您能够并且愿意配置您的 Windows 客户端，否则我会说剥离“时区”是一个可行的“解决方案”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T09:42:32.800

我正在使用 laravel 5.6 在 php 7.2 中工作。大多数upvoted unswer 不起作用，因为在此php 版本中找不到该方法。（我不确定，但它给出了一个错误，说找不到该方法）。但相反，有一种方法与解决原始问题的方法完全相同（**将 javascript 日期对象转换为时间戳**）。

```
$fromDate = date_create_from_format('D M d Y H:i:s e+', $fromDate); 
```

然后可以将其用于数据库查询或用作日期对象。

# macos - Mac 上的 clustalw 安装

> ID：13421637
> 
> 赞同：0
> 
> 时间：2012-11-16T17:36:36.540
> 
> 标签：macos, dmg

我真的很困惑如何安装clustalw2。

我下载了一个 macosx.dmg 文件，当我双击它时，我看到一个文件夹，里面有两个图标，一个是帮助页面（我确实读过，但它使用 clustalw 而不是安装）

当我单击另一个图标时，它会打开一个终端，我可以使用它来对齐，但这不是我想要做的......我想在一段代码中使用以下命令

从生物进口 Clustalw

我不知道该怎么做。

我尝试了 clustalx（GUI 版本），它再次执行它并给我一个窗口来选择要对齐的文件，但在 python 路径中再次没有安装。

（我尝试使用标签“clustalw，但我无法使用它，因为它从未被使用过，而且我没有准备好开始新标签，以防有人想知道我为什么没有使用它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:26:46.973

我发现我可以使用

FINK安装clustalW

我想我会分享这个以防其他人也需要它。

# marmalade - 在果酱中使用 Iw2d 时如何绘制 TrueTypeFont？

> ID：13421647
> 
> 赞同：2
> 
> 时间：2012-11-16T17:37:38.313
> 
> 标签：marmalade

在使用 Iw2D 完成的游戏中，我想使用 IwGx 模块支持的 TTF 字体。我读到将 IwGxFont 模块与 Iw2D 一起使用是可行的，但由于文本没有出现，我必须遗漏一些东西。它编译并运行，只是没有文本。

代码：

```
Iw2DInit();
DPI::dpiInit();
IwResManagerInit();
IwGxFontInit();
IwGetResManager()->LoadGroup("IwGxFontTTF.group");
font = (CIwGxFont*)IwGetResManager()->GetResNamed("Serif_6", "CIwGxFont");
...
while (!s3eDeviceCheckQuitRequest()) {
    s3ePointerUpdate();
    s3eKeyboardUpdate();
    if (s3eKeyboardGetState(s3eKeyAbsBSK) & S3E_KEY_STATE_DOWN) {
        break;
    }

    current_time = s3eTimerGetMs();
    const float dt = (current_time - last_frame_time)/1000.0f;
    last_frame_time = current_time;

    Iw2DSurfaceClear(0xffffffff);
    game->draw(dt);

    IwGxFontSetCol(0xffa0a0a0);
    IwGxFontSetRect(CIwRect(10,40,(int16)IwGxGetScreenWidth()-20,40));
    IwGxFontSetAlignmentVer(IW_GX_FONT_ALIGN_BOTTOM);
    IwGxFontSetFont(font);
    IwGxFontDrawText("Lorem ipsum dolor sit amet");
    IwGxFlush();
    Iw2DSurfaceShow();

    s3eDeviceYield(0);
    logger.log(dt);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T15:34:04.173

给定的代码缺少调用 Iw2DFinishDrawing。应该：

```
Iw2DSurfaceClear(0xffffffff);
game->draw(dt);
Iw2DFinishDrawing();

IwGxFontSetCol(0xffa0a0a0);
IwGxFontSetRect(CIwRect(10,40,(int16)IwGxGetScreenWidth()-20,40));
IwGxFontSetAlignmentVer(IW_GX_FONT_ALIGN_BOTTOM);
IwGxFontSetFont(font);
IwGxFontDrawText("Lorem ipsum dolor sit amet");
IwGxFlush();
Iw2DSurfaceShow(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T05:47:46.443

好吧，我只知道您必须使用`FontBuilder`工具为字体创建 .gx 文件，并且只能使用这些字体。该`IwGxFont`模块仅适用于 .gx 字体文件。您使用的方法只能用于 gx 字体。

~~所以如果你想使用TTF字体，要么有任何其他方法，要么根本没有其他方法，除了将字体转换为GX格式。~~

**编辑：-**

在阅读了api之后，我知道还有另一种使用TTF字体的方法，虽然你的问题已经解决了。我想我应该更正我的答案。方法是使用 ttf 字体到具有预定义大小和样式的组文件中，就像 fontbuilder 工具在创建 gx 字体时所做的那样。在组中添加以下行将允许 ttf 字体能够从 IwResManager 加载。

```
CIwGxFont
{
    name "Serif_8"

    ttf ".\Fonts\serif.ttf"
    ttfPointSize 8
} 
```

# mysql - MySQL 表设计和规范化帮助

> ID：13421648
> 
> 赞同：6
> 
> 时间：2012-11-16T17:37:39.380
> 
> 标签：mysql, database-design, normalization

注意：此问题已于 2012 年 11 月 19 日重新表述以进行澄清。我通常在这里没有太多问题，但在为客户站点设计新产品系统时遇到了困难。我们提供一套产品，每位客户都可以出售给他的客户。我们可能随时添加新产品，但它们都遵循以下格式：

1.  类别
2.  类型
3.  产品

举一个使用之前结构的真实示例：

*   棒球装备
    *   手套
        *   罗林斯
        *   耐克
        *   美津浓
    *   蝙蝠
        *   伊斯顿
        *   路易斯维尔重击手
*   足球装备
    *   鞋
        *   耐克
        *   锐步
        *   阿迪达斯
    *   足球
        *   耐克
        *   树苗
        *   威尔逊

上面的列表显然还在继续，可能会大得多，但它给出了整体思路。

目前，我将特定客户可以销售的产品类型存储在一个单一的平面格式表中，如下所示：

```
ID  | clientID | categoryID | typeID | productID | customURL
=============================================================
1   |  111     |    1       |   1    |   1       | 1111
2   |  111     |    1       |   2    |   2       | 2222
3   |  111     |    1       |   2    |   3       | 3333
4   |  111     |    2       |   3    |   4       | 4444
5   |  222     |    1       |   1    |   1       | 5555
6   |  222     |    2       |   3    |   4       | 6666 
```

*   在上面的示例中，类别 1 可以是“棒球装备”，类别 2 是“足球装备”
*   对应的 categoryID、typeID 和 productID 的名称将存储在具有 FK 关系的 3 个单独的表中（innodb），以保持规范化。
*   类型指的是二级物品（手套、球棒、鞋子、足球等）。这些数字永远不会相交（这意味着即使一般产品相同，也永远不会有相同的 typeID（棒球鞋的 ID 与足球鞋的 ID 不同）。
*   在此表中，clientID 1 可以销售 4 个产品，3 个在类别 1，1 个在类别 2。ClientID 2 可以销售 2 个产品，每个类别一个。

我倾向于使表格保持结构化，但知道在其他设计中我可能出于标准化目的将表格分开，我不确定是否适用于此。如果我把它们分开，我会看到这从一张桌子变成了 4 张或更多，如下所示：

## 产品提供表

```
ID  | clientID | productID | customURL
======================================
1   |  111     | 1       | 1111
2   |  111     | 2       | 2222
3   |  111     | 3       | 3333
4   |  111     | 4       | 4444
5   |  222     | 1       | 5555
6   |  222     | 4       | 6666 
```

## 产品定义表

```
ID  | productID | typeID | productName
======================================
1   |  1        |    1   | rawlings glove
2   |  2        |    2   | product2
3   |  3        |    2   | product3
4   |  4        |    3   | product4 
```

## 类型定义表

```
ID  | typeID | categoryID | typeName
=====================================
1   |  1     |    1       | Gloves
2   |  2     |    1       | Bats
3   |  3     |    2       | Shoes
4   |  4     |    2       | Footballs 
```

## 类别定义表

```
ID  | categoryID | catName
=============================
1   |  1         | Baseball Equipment
2   |  2         | Football Equipment 
```

我是不是想太多了？两种方法不是以相同的方式获得最终解决方案吗（后者只涉及几个连接来收集平面表，如图 1 所示）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T22:43:11.937

归一化的目的和好处是它使输入异常数据变得更加困难（理想情况下是不可能的）。

例如，在您的图 1 中，什么可以防止您意外存储 typeid 3 和 categoryid 1 的行？除了编写绝对完美的应用程序代码之外，什么都没有。

但是，如果您使用单表方法，并且必须更改 typeid 3 的父类别，则必须更改一百万个位置的数据以反映更改。这意味着在执行清理时锁定表，否则可能会同时插入新数据。

规范化有助于消除冗余存储信息，如果每个离散事实（例如 typeid 3 属于 categoryid 2）只存储一次，那么很容易原子地进行更改，并且自动更改对该行的所有引用的含义。

你是对的，需要更多的连接——但前提是你在整个地方都使用伪键，就像你正在做的那样。您不一定需要这样做，您可以改用自然键，并且对它们的引用将使用级联外键声明，因此查找表中的更改也会自动更新引用表。

当然，*规范化*规则并不要求使用伪键。这些规则对它们只字未提。

* * *

回复您的评论：*伪*键或[*代理键*](http://en.wikipedia.org/wiki/Surrogate_key)是用于标识行的“id”列。通常，这些值是通过自动递增机制分配的，该机制确保唯一性，同时允许并发事务插入行。id 的值对于它标识的行没有任何意义。

* * *

下面显示了您的表在正常形式下的样子，但没有代理键。

## 产品提供表

```
client | product        | customURL
===================================
Smith  | Rawlings Glove | 1111
Smith  | Product 2      | 2222
Smith  | Product 3      | 3333
Smith  | Product 4      | 4444
Jones  | Rawlings Glove | 5555
Jones  | Product 4      | 6666 
```

## 产品定义表

```
product        | type
=======================
Rawlings Glove | Gloves
Product 2      | Bats
Product 3      | Bats
Product 4      | Shoes 
```

## 类型定义表

```
type      | category
==============================
Gloves    | Baseball Equipment
Bats      | Baseball Equipment
Shoes     | Football Equipment
Footballs | Football Equipment 
```

## 类别定义表

```
category
==================
Baseball Equipment
Football Equipment 
```

使用非整数作为主键列的数据类型是完全符合关系数据库设计和规范化的，因此外键从其他表中引用它们。

为了性能或简洁性或允许其他列中的值自由更改，有充分的理由使用代理键。但是*规范化*并不要求使用代理键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:38:16.450

我会采用标准化方法，因为无论如何您都必须使用平面方法维护类别和类型名称（以及可能的其他属性）的单独查找表。

您可能会考虑使用以下表格将类别和类型更改为通用树结构：

```
 create table product_hierarchy(
    id integer primary key,
    name character,
    parent_id references product_hierarchy) 
```

...因为它可以让客户灵活地增加层次结构的深度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T22:39:29.367

要尝试解决您的直接问题：

> 我是不是想太多了？

取决于您的应用程序有多大，以及您使用什么引擎来存储数据。由于您打算将其放入 MySQL 表中，因此您的想法非常合适。

> 两种方法不是以相同的方式获得最终解决方案吗（后者只涉及几个连接来收集平面表，如图 1 所示）？

嗯，是的，但是[引用维基百科](http://en.wikipedia.org/wiki/Database_normalization)，

> 数据库规范化是组织关系数据库的字段和表以最小化冗余和依赖性的过程。规范化通常涉及将大表划分为较小（且冗余较少）的表并定义它们之间的关系。目标是隔离数据，以便仅在一个表中对字段进行添加、删除和修改，然后通过定义的关系传播到数据库的其余部分。

将您的数据分解为您描述的结构（顺便说一句，我同意），将使您能够最轻松地维护您的数据。将类别和类型数据与“提供的产品”保持在同一个表中会产生大量冗余数据。当然，我真的无法想象您需要在哪里更新这些数据，但如果您这样做了，您将不得不更新很多记录。在您建议的结构中，要更新的记录数最少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T22:31:13.873

在第一种方法中，您忘记了每个类别、类型和产品 ID 的名称列。如果您添加此信息，它可以工作，但其他方法似乎已经工作。当您使用 4 个不同的表时，您有更多空间。

# javascript - RoR如何通过javascript函数在参数中传递应用程序ID

> ID：13421650
> 
> 赞同：1
> 
> 时间：2012-11-16T17:37:43.790
> 
> 标签：javascript, ruby-on-rails, controller, params

这个问题必须有一个简单的答案，但我仍然无法让它工作。

我有一个 Ruby On Rails 应用程序，它允许用户使用数据库管理项目（创建、更新、显示、编辑、销毁……等）。例如，当用户编辑项目时，她/他会被带到一个页面，例如 http://:3000/projects/3/edit，她/他可以在那里修改表单中的条目。请注意，在此示例中，用户正在编辑项目 3。

要编辑项目，用户单击此按钮

```
<td><%= button_to 'Edit', { :action => "edit", :id => project }, :method => :get %></td> 
```

调用此方法

```
# GET /projects/1/edit
def edit
  @project = Project.find(params[:id])
end 
```

这很好用。

但是，我添加了另一个方法调用 updateFields，以便在修改字段时运行名为 updateFields 的 javascript 函数并调用修改表单中其他相关字段的 AJAX 请求。以下是 updateFields 的摘录：

```
<script language="JavaScript" type="text/javascript">
function updateFields(){
    $.ajax({
        url: "<%= update_fields_projects_url %>",
        data: {
            project_year: $('.project_year_class').val(),
            project_type: $('.project_type_class').val(),

            <snip>

        }
    });
}
</script> 
```

在控制器中，我可以在 params 数组中获取我需要的所有信息，如下所示：

```
# PUT /projects/1
# PUT /projects/1.json

def update_fields

  @project = Project.find(params[:project])
  @project_year = params[:project_year]
  @project_type = params[:project_type]

  <snip>

  respond_to do |format|
    if @project.update_attributes(params[:project])
      format.js
      format.html
    else
      format.html { render :action => "update" }
      format.json { render :json => @project.errors, :status => :unprocessable_entity }
    end
  end
end 
```

我遇到的问题是我无法更新表单，在服务器上，我看到以下错误消息

```
ActiveRecord::RecordNotFound (Couldn't find Project without an ID):
app/controllers/projects_controller.rb:101:in `update_fields'

Rendered /var/lib/gems/1.8/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
Rendered /var/lib/gems/1.8/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
Rendered /var/lib/gems/1.8/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (10.8ms) 
```

如果我直接指定项目ID，一切正常

```
@project = Project.find(3) 
```

我的问题是如何通过 javascript 函数以与 project_year 和 project_type 相同的方式将参数中的 id 传递给控制器​​？在本例中，它是 3，但每个项目都会有所不同，因为它是在创建项目时分配的。

更新1

```
<%= form_for(@project, :html => {:name => "ProjectInfo"}) do |f| %>

  <input type=button id=project_info_button_id value="Show Details" onclick="showHideDiv('project_info_id','project_info_button_id');">

  <div class="form input", id='project_info_id', style='display:none'>
    <% concat "Project Year" %>
    <%= f.text_field :ProjectYear, {:class=>"project_year_class", :Size=>6, :style=>"text-align:right"} %>

    <snip>

  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:11:55.147

`ProjectsController`正在尝试找到正确的`Project`ID，但您没有指定任何 ID。您应该`id`在`$.ajax`'`data`值中添加一个指定项目 ID 的值，然后将 更改`find`为 for `params[:id]`。

顺便说一句，您不需要额外的`update_fields`方法来处理对`Project`. Rails 会将任何`PUT`to路由`/projects/:id`到`ProjectsController`'s`update`方法（假设您`resources :projects`在路由文件中有）。而不是指向您将使用（或您将项目存储`$.ajax`在其中的任何变量）并且您不必手动包含项目 ID。`update_fields_projects_url``project_url(project)`

更多信息：您正在绕过 Rails 允许您更新资源的默认方式，这意味着您正在手动完成很多您不需要的工作。

在视图中，使用表单助手：

```
<%= form_for @project do |project_form| %>
    <%= project_form.text_field :year %>
    <%= project_form.text_field :type %>
<%= end %> 
```

然后你只需要处理`update`控制器中的方法，你主要写在`update_fields`：

```
def update_fields

  @project = Project.find(params[:id])

  respond_to do |format|
    if @project.update_attributes(params[:project])
      format.js
      format.html
    else
      format.html { render :action => "update" }
      format.json { render :json => @project.errors, :status => :unprocessable_entity }
    end
  end
end 
```

当您这样做时，`form_for`将构建文本字段，导致控制器获取`params[:project]`. 您不必手动提取每个属性并应用它，您可以免费获得它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:31:25.693

您需要在 ajax 请求的数据部分传递项目 ID：

```
<script language="JavaScript" type="text/javascript">
function updateFields(){
    $.ajax({
        url: "<%= update_fields_projects_url %>",
        data: {
            project_year: $('.project_year_class').val(),
            project_type: $('.project_type_class').val(),
            id: <%= @project.id %>,
            <snip>

        }
    });
}
</script> 
```

# assembly - win xp 上的 INT 21H 函数#9

> ID：13421651
> 
> 赞同：0
> 
> 时间：2012-11-16T17:37:49.937
> 
> 标签：assembly, tasm

我尝试编译并执行以下汇编代码。

```
 .model small
 .stack 2000H
 .data
 msg db 'Enter $';
 .code
 .startup
 main:
 call readeq;
 jmp exitl;
 readeq proc near
 mov ah,9;
 mov dx,0;
 lea dx,msg;
 int 21H;
 ret;
 readeq endp
 exitl:
 end;
 .exit 
```

结果是：

`Enter ê♦FGÇ= u⌠░ eê♦F_X├PS.Ç>‼m☺t♠eí δ╕ ♥ΦyïHe☼╢]☺♥√;╟~ eâ= t♦Gδ≤∙GG[X├S3  e9E☻tTïï╪X.Ç>‼m☺t♠eï↔â╟&;√}Φº r☻δ∩∙δ☺°[├QRS3█3 .Ç>‼m☺t♥â╟&e8♣tΦâ r♂δ⌠CYQ;┘t♣δ≡∙δ☺°[ZY├Φ╬ ╦Φÿ ╦Φ. ╦ΦH ╦Φ[ ╦╦`... ETC。

知道我在 Windows XP 上使用 TASM 和 TLINK，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:43:51.373

要正确终止您的程序，如果它是 COM，您可以执行`RET`, 或`INT 20h`（旧的 CP/M 方式）。如果您是 EXE，请使用`AX=4C00`(0 是退出代码) then `INT 21h`.

# php - PHP 中过时的 Picasa 提要

> ID：13421652
> 
> 赞同：0
> 
> 时间：2012-11-16T17:37:52.837
> 
> 标签：php, xml, feed, delay, picasa

这个问题真的让我很困惑。我将首先解释我正在尝试做的事情：

在我正在开发的网站上，我想显示从 Picasa 上的特定帐户检索到的照片的相册。为此，我使用了 XML 提要 ( [http://picasaweb.google.com/data/feed/api/user/userID](http://picasaweb.google.com/data/feed/api/user/userID) )。我使用 SimpleXMLElement 对象加载此提要。

现在奇怪的是，当我在相册中添加/删除照片时，更改需要一些时间（通常是几分钟）才能生效。PHP 对象仍然接收旧数据。现在这并不奇怪，考虑到 Google 可能希望限制请求的数量，但是，当在 Firefox 中加载提要时，更改会立即显示。

是什么导致了这种延迟，我能做些什么吗？检索提要时，FF 和 PHP 有什么区别吗？我注意到这个问题已经被问[过一段时间了](https://stackoverflow.com/questions/11738778/how-to-avoid-delay-when-displaying-picasa-photos-using-picasa-api)，但没有任何答案，我认为它太老了，无法解决它。

我曾尝试同时使用 file_get_contents 和 curl，但似乎都不起作用。显然问题不在于 PHP，因为在另一个问题中使用了 C#。

编辑 - 这是来自 Firefox 的请求标头：

```
Expires: Fri, 16 Nov 2012 19:22:45 GMT
Date: Fri, 16 Nov 2012 19:22:45 GMT
Cache-Control: private, max-age=0, must-revalidate
Content-Type: application/atom+xml; charset=UTF-8; type=feed
Vary: Accept, X-GData-Authorization, GData-Version, Cookie
GData-Version: 2.0
Etag: W/"DEEBQnk9fyp7ImA9WhNQEEU."
Last-Modified: Fri, 16 Nov 2012 17:24:13 GMT
Content-Encoding: gzip
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE

200 OK 
```

以及 curl 的响应标头：

```
HTTP/1.1 200 OK
Expires: Fri, 16 Nov 2012 19:30:26 GMT
Date: Fri, 16 Nov 2012 19:30:26 GMT
Cache-Control: private, max-age=0, must-revalidate, no-transform
Set-Cookie: _rtok=lL_1sPFA07ra; Path=/; HttpOnly
Set-Cookie: S=photos_html=jHfi_UGm4xVujZVehiIOpw; Domain=.google.com; Path=/; HttpOnly
Content-Type: application/atom+xml; charset=UTF-8; type=feed
Vary: Accept, X-GData-Authorization, GData-Version, Cookie
GData-Version: 2.0
ETag: W/"DEEBQnk9fyp7ImA9WhNQEEU."
Last-Modified: Fri, 16 Nov 2012 17:24:13 GMT
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE
Transfer-Encoding: chunked 
```

编辑2：我想我想通了！显然，匿名查看时，提要每隔几分钟更新一次。但是，Firefox 存储了我的 Picasa 登录会话，因此它被视为授权请求。Chrome 没有此会话，因此也没有立即更新。一旦我还允许 Picasa 在 Chrome 中存储 cookie，它确实会立即更新，而 Opera 仍然延迟。万一发帖人仍然感兴趣，我会回答另一个问题。

感谢评论中的提示，这使我发现了原因。如果你能把它写下来作为答案，我会接受那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:56:15.947

检查 PHP 请求和 Firefox 请求的请求/响应标头。这应该可以深入了解为什么它在一种情况下而不是另一种情况下起作用。

就您而言，正如您自己确定的那样（顺便说一句，干得好），Firefox 拥有您的 Picasa 授权凭据，可以检索非缓存版本。

# android - 关闭时应用程序崩溃

> ID：13421655
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:38:03.867
> 
> 标签：android

我想知道是否有人可以帮助我，我是android新手，我正在尝试编写一个小应用程序，显示前置摄像头的摄像头预览，一切正常，但是当我关闭应用程序时手机冻结然后崩溃，我一直在寻找对此的答案，但似乎无法在任何地方找到答案，代码如下

```
import android.app.Activity;
import android.hardware.Camera;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.ImageView;
import android.widget.Toast;

public class PreviewDemo extends Activity {

  private SurfaceView preview=null;
  private SurfaceHolder previewHolder=null;
  private Camera camera=null;
  private boolean inPreview=false;
  private boolean cameraConfigured=false;   
  public ImageView imageview1;
  public MediaPlayer mp;
  public MediaPlayer mp2;
  public MyCountDownTimer counter = new MyCountDownTimer(6000,1000);
  public MyCountDownTimer2 counter2 = new MyCountDownTimer2(2000,1000);

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mp = MediaPlayer.create(PreviewDemo.this, R.raw.shatter);
    mp2 = MediaPlayer.create(PreviewDemo.this, R.raw.beep);
    preview=(SurfaceView)findViewById(R.id.preview);
    previewHolder=preview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    imageview1 = (ImageView) this.findViewById(R.id.imageView1);
    counter2.start();

  }

  @Override
  public void onResume() {
    super.onResume();
    int cameraCount = 0;
    Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
    cameraCount = Camera.getNumberOfCameras();
            for ( int camIdx = 0; camIdx < cameraCount; camIdx++ ) {
        Camera.getCameraInfo( camIdx, cameraInfo );
        if ( cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT  ) {
            try {
                camera = Camera.open( camIdx );
                camera.setDisplayOrientation(90);
            } catch (RuntimeException e) {
                ;
            }
        }
    startPreview();
  }
  }
  @Override
  public void onPause() {
    if (inPreview) {
      camera.stopPreview();
    }

    camera.release();
    camera=null;
    inPreview=false;

    super.onPause();
  }
  public void onFinish(){
  }

  private Camera.Size getBestPreviewSize(int width, int height,
                                         Camera.Parameters parameters) {
    Camera.Size result=null;

    for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
      if (size.width<=width && size.height<=height) {
        if (result==null) {
          result=size;
        }
        else {
          int resultArea=result.width*result.height;
          int newArea=size.width*size.height;

          if (newArea>resultArea) {
            result=size;
          }
        }
      }
    }

    return(result);
  }

  private void initPreview(int width, int height) {
    if (camera!=null && previewHolder.getSurface()!=null) {
      try {
        camera.setPreviewDisplay(previewHolder);
      }
      catch (Throwable t) {
        Log.e("PreviewDemo-surfaceCallback",
              "Exception in setPreviewDisplay()", t);
        Toast
          .makeText(PreviewDemo.this, t.getMessage(), Toast.LENGTH_LONG)
          .show();
      }

      if (!cameraConfigured) {
        Camera.Parameters parameters=camera.getParameters();
        Camera.Size size=getBestPreviewSize(width, height,
                                            parameters);

        if (size!=null) {
          parameters.setPreviewSize(size.width, size.height);
          camera.setParameters(parameters);
          cameraConfigured=true;
        }
      }
    }
  }

  private void startPreview() {
    if (cameraConfigured && camera!=null) {
      camera.startPreview();
      inPreview=true;
    }
  }

  SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() {
    public void surfaceCreated(SurfaceHolder holder) {
      // no-op -- wait until surfaceChanged()
    }

    public void surfaceChanged(SurfaceHolder holder,
                               int format, int width,
                               int height) {
      initPreview(width, height);
      startPreview();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        camera.stopPreview();
        camera.setPreviewCallback(null); 
        camera.release();
        camera = null;

    }
  };
  public class MyCountDownTimer extends CountDownTimer{

      public MyCountDownTimer(long millisInFuture, long countDownInterval) {
      super(6000, 1000);
      }

      @Override
      public void onFinish() {
          imageview1.setVisibility(View.VISIBLE); 
          mp.start();
      }

      public void onTick(long millisUntilFinished) {
          mp2.start();
        }

      }

  public class MyCountDownTimer2 extends CountDownTimer{

      public MyCountDownTimer2(long millisInFuture, long countDownInterval) {
      super(2000, 1000);
      }

      @Override
      public void onFinish() {
          counter.start();
      }

      public void onTick(long millisUntilFinished) {

        }

      }
} 
```

提前干杯马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:47:25.653

您需要检查是否`camera`有效，因为您`camera = null`在多个地方设置，例如`onPause()`SurfaceView`onSurfaceDestroyed()`回调。您的`onPause()`方法应如下所示：

```
@Override
public void onPause() {
    if(camera != null) {
        if (inPreview) {
          camera.stopPreview();
        }

        camera.release();
        camera=null;
    }
    inPreview=false;

    super.onPause();
} 
```

同样的逻辑也适用于`onSurfaceDestroyed()`。`closeCamera()`此外，如果您将此逻辑移动到方法中并从有效位置调用此方法，您的代码可能更易于维护。

# jquery - Jquery .find 在除 IE7 之外的所有浏览器中工作

> ID：13421656
> 
> 赞同：0
> 
> 时间：2012-11-16T17:38:08.593
> 
> 标签：jquery, internet-explorer, internet-explorer-7

我在 page.load 加载了以下 Jquery 代码段

```
function appendFileSizes() {
var attachmentSize = $j172("#<%= AttachmentsFileSize_HiddenField.ClientID %>").val();
var uploadControlFileList = $j172("#<%=Attachments_HiddenField.ClientID %>").val().split("|");
var files = attachmentSize.split("||");
files.splice(files.length-1, 1);
for (var i = 0; i < files.length; i++) {
    var fileInfo = files[i].split("|");
    var fileIndex = $j.inArray(fileInfo[0], uploadControlFileList);
    if (fileIndex > -1) {
        var label = document.createElement("div");

        label.setAttribute("class", "contactUsAttachmentFileSize");
        label.localName = "fileSize";
        label.innerHTML = "(" + bytesToSize(fileInfo[1], 2) + ")";
        label.style.fontSize = 10;

        var row = $j172("span.ruUploadSuccess:contains('" + fileInfo[0] + "')").parent().parent();
        if (!row.find("div.contactUsAttachmentFileSize").length) {
            $j172(row).append(label);
            uploadControlFileList.splice(fileIndex, 1);
        }
    }
} 
```

}

问题是它适用于除 IE7 之外的所有浏览器，其中 if ( .find) 不起作用并且我的行每次都被添加，而不仅仅是一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:44:41.000

如果您完全可以在 IE7 中找到一种方法，您可以使用条件注释来专门为 IE7（或者不是 [！] IE7，就此而言）编写脚本，这将提供跨浏览器的可行解决方案。

[http://www.domincpettifer.co.uk/Blog/32/ie-browser-detection-for-css--using-conditional-comments-](http://www.dominicpettifer.co.uk/Blog/32/ie-browser-detection-for-css--using-conditional-comments-)

# c# - 是否应该为任何异步操作添加延迟？

> ID：13421659
> 
> 赞同：8
> 
> 时间：2012-11-16T17:38:31.883
> 
> 标签：c#, windows-8, async-await, windows-store-apps, deferred

根据 Likness（第 164 页，“使用 C# 和 XAML 构建 Windows 8 应用程序”），“执行异步任务时，您必须请求延期。”

所以，如果我没有把他断章取意，这段代码：

```
private async Task<System.Collections.Generic.KeyValuePair<string, string>> SelectAContactForASlot()
{
    KeyValuePair<string, string> kvp; 
    var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker();
    contactPicker.CommitButtonText = "Select";
    var contact = await contactPicker.PickSingleContactAsync();
    if (contact != null)
    {
        kvp = new KeyValuePair<string, string>(contact.Name, contact.Emails[0].ToString());
        return kvp;
    }
    return kvp = new KeyValuePair<string, string>("No Name found", "No email found");
} 
```

...应该是这样的：

```
private async Task<System.Collections.Generic.KeyValuePair<string, string>> SelectAContactForASlot()
{
    var deferral = e.SuspendingOperation.GetDeferral();
    KeyValuePair<string, string> kvp; 
    var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker();
    contactPicker.CommitButtonText = "Select";
    var contact = await contactPicker.PickSingleContactAsync();
    if (contact != null)
    {
        kvp = new KeyValuePair<string, string>(contact.Name, contact.Emails[0].ToString());
        return kvp;
    }
    return kvp = new KeyValuePair<string, string>("No Name found", "No email found");
    deferral.Complete();
} 
```

正确的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T18:27:58.270

请记住，`async`方法在遇到 an并且必须（异步）等待时*返回。*`await`

当您从必须在返回之前完成`await`的方法中执行操作时，您需要延迟。`async void`这种“事件”真的是一个*命令*。例如，“鼠标移动”只是一个事件——系统并不关心你是否处理这个事件。但是“挂起”是一个命令——系统假设当你从命令返回时，你已经做好了被挂起的准备。在这种情况下，延迟是必要的，以通知系统即使您要返回，但您还没有完成。

同样，如果您的后台任务`async`实现了`Run`. 因为当`Run`返回时，您的后台任务被认为已完成，您需要一种方式来说明您还没有真正完成。

您可以通过方法的存在来判断事件处理程序是否支持这一点`GetDeferral`。例如，`Suspending`支持 deferral 因为`SuspendingEventArgs`有一个`SuspendingOperation`属性有一个`GetDeferral`方法。在后台任务场景中（即你有一个`async void Run`），你可以调用传入`GetDeferral`的.`IBackgroundTaskInstance``Run`

你的例子`SelectAContactForASlot`退货示例`Task`，因此不需要延期。

# php - 收到“间接修改重载属性无效”通知

> ID：13421661
> 
> 赞同：46
> 
> 时间：2012-11-16T17:38:39.480
> 
> 标签：php

我想使用注册表来存储一些对象。这是一个简单的 Registry 类实现。

```
<?php
  final class Registry
  {
    private $_registry;
    private static $_instance;

    private function __construct()
    {
      $this->_registry = array();
    }

    public function __get($key)
    {
      return
        (isset($this->_registry[$key]) == true) ?
        $this->_registry[$key] :
        null;
    }

    public function __set($key, $value)
    {
      $this->_registry[$key] = $value;
    }

    public function __isset($key)
    {
      return isset($this->_registry[$key]);
    }

    public static function getInstance()
    {
      if (self::$_instance == null) self::$_instance = new self();
      return self::$_instance;
    }
}

?> 
```

当我尝试访问此类时，我收到“对重载属性的间接修改无效”的通知。

```
Registry::getInstance()->foo   = array(1, 2, 3);   // Works
Registry::getInstance()->foo[] = 4;                // Does not work 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-11-03T04:08:12.660

我知道这现在是一个相当古老的话题，但这是我今天第一次遇到的事情，我认为如果我用自己的发现扩展上面所说的内容，可能会对其他人有所帮助。

据我所知，这不是 PHP 中的错误。事实上，我怀疑 PHP 解释器必须付出特别的努力才能如此具体地检测和报告这个问题。它与您访问“foo”变量的方式有关。

```
Registry::getInstance()->foo 
```

当 PHP 看到这部分语句时，它做的第一件事就是检查对象实例是否有一个名为“foo”的可公开访问的变量。在这种情况下，它没有，所以下一步是调用其中一个魔术方法，要么是 __set()（如果你试图替换“foo”的当前值），要么是 __get()（如果你是试图访问该值）。

```
Registry::getInstance()->foo   = array(1, 2, 3); 
```

在这个语句中，你试图用 array(1, 2, 3)*替换*"foo" 的值，所以 PHP 用 $key = "foo" 和 $value = array(1, 2, 3），一切正常。

```
Registry::getInstance()->foo[] = 4; 
```

但是，在此语句中，您正在*检索*“foo”的值，以便您可以修改它（在这种情况下，通过将其视为一个数组并附加一个新元素）。代码暗示您要修改实例持有的“foo”的值，但实际上您正在*修改*__get () 返回的 foo的*临时副本*，因此 PHP 发出警告（如果您通过引用而不是通过值将 Registry::getInstance()->foo 传递给函数）。

您有几个选项可以解决此问题。

**方法一**

您可以将“foo”的值写入变量，修改该变量，然后将其写回，即

```
$var = Registry::getInstance()->foo;
$var[] = 4;
Registry::getInstance()->foo = $var; 
```

功能强大，但非常冗长，因此不推荐。

**方法二**

让你的 __get() 函数通过引用返回，正如 cillosis 所建议的那样（没有必要让你的 __set() 函数通过引用返回，因为它根本不应该返回一个值）。在这种情况下，您需要注意 PHP 只能返回对已经存在的变量的引用，并且如果违反此约束，可能会发出通知或行为异常。如果我们查看适用于您的班级的 cillosis 的 __get() 函数（如果您确实选择走这条路，那么出于下面解释的原因，请坚持使用 __get() 的这种实现，并在阅读之前认真地进行存在性检查从您的注册表）：

```
function &__get( $index )
{
    if( array_key_exists( $index, $this->_registry ) )
    {
        return $this->_registry[ $index ];
    }

    return;
} 
```

这很好，前提是您的应用程序永远不会尝试获取注册表中尚不存在的值，但是当您这样做时，您将点击“返回”；声明并获得“仅应通过引用返回变量引用”警告，并且您无法通过创建后备变量并返回该变量来解决此问题，因为这会给您“重载属性的间接修改无效”警告再次出于与以前相同的原因。如果您的程序不能有任何警告（警告是一件坏事，因为它们会污染您的错误日志并影响您的代码对 PHP 的其他版本/配置的可移植性），那么您的 __get() 方法将不得不创建条目在返回它们之前不存在，即

```
function &__get( $index )
{
    if (!array_key_exists( $index, $this->_registry ))
    {
        // Use whatever default value is appropriate here
        $this->_registry[ $index ] = null;
    }

    return $this->_registry[ $index ];
} 
```

顺便说一句，PHP 本身似乎对它的数组做了一些与此非常相似的事情，即：

```
$var1 = array();
$var2 =& $var1['foo'];
var_dump($var1); 
```

上面的代码将（至少在某些 PHP 版本上）输出类似“array(1) { ["foo"]=> &NULL }" 的内容，意思是“$var2 =& $var1['foo'];” 语句可能会影响表达式的*两边*。但是，我认为允许通过*读取*操作更改变量的内容从根本上说是不好的，因为它会导致一些严重讨厌的错误（因此我觉得上述数组行为*是*一个 PHP 错误）。

例如，让我们假设您只打算在注册表中存储对象，并且您修改 __set() 函数以在 $value 不是对象时引发异常。存储在注册表中的任何对象还必须符合特殊的“RegistryEntry”接口，该接口声明必须定义“someMethod()”方法。因此，注册表类的文档说明调用者可以尝试访问注册表中的任何值，结果将是检索有效的“RegistryEntry”对象，如果该对象不存在，则返回 null。我们还假设您进一步修改注册表以实现[Iterator](http://us2.php.net/manual/en/class.iterator.php)接口，以便人们可以使用 foreach 构造遍历所有注册表项。现在想象下面的代码：

```
function doSomethingToRegistryEntry($entryName)
{
    $entry = Registry::getInstance()->$entryName;
    if ($entry !== null)
    {
        // Do something
    }
}

...

foreach (Registry::getInstance() as $key => $entry)
{
    $entry->someMethod();
} 
```

这里的理由是 doSomethingToRegistryEntry() 函数知道从注册表中读取任意条目是不安全的，因为它们可能存在也可能不存在，因此它会检查“null”情况并做出相应的行为。一切都很好。相比之下，循环“知道”任何对注册表的*写入*操作都会失败，除非写入的值是符合“RegistryEntry”接口的对象，因此它不会费心检查以确保 $entry 确实是这样的对象可以节省不必要的开销。现在让我们假设在尝试读取任何尚不存在的注册表项之后的某个时间到达此循环的非常罕见的情况。砰!

在上述场景中，循环会生成一个*致命错误*“调用非对象上的成员函数 someMethod()”（如果警告是坏事，致命错误就是灾难）。发现这实际上是由上个月更新添加的程序中其他地方看似无害的*读取操作引起的，这并不是一件容易的事。*

就个人而言，我也会避免这种方法，因为虽然它在大多数情况下表现得很好，但如果被激怒，它真的会咬你一口。令人高兴的是，有一个*更*简单的解决方案可用。

**方法三**

只是不要定义 __get()、__set() 或 __isset()！然后，PHP 将在运行时为您创建属性并使它们可公开访问，以便您可以在需要时直接访问它们。根本不需要担心引用，如果你希望你的注册表是可迭代的，你仍然可以通过实现[IteratorAggregate](http://us2.php.net/manual/en/class.iteratoraggregate.php)接口来做到这一点。鉴于您在原始问题中给出的示例，我相信这是迄今为止您最好的选择。

```
final class Registry implements IteratorAggregate
{
    private static $_instance;

    private function __construct() { }

    public static function getInstance()
    {
        if (self::$_instance == null) self::$_instance = new self();
        return self::$_instance;
    }

    public function getIterator()
    {
        // The ArrayIterator() class is provided by PHP
        return new ArrayIterator($this);
    }
} 
```

实现 __get() 和 __isset() 的时间是当你想给调用者只读访问某些私有/受保护属性的时候，在这种情况下你不想通过引用返回任何东西。

我希望这个对你有用。:)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-16T18:00:13.317

此行为已多次报告为错误：

*   [https://bugs.php.net/bug.php?id=42030](https://bugs.php.net/bug.php?id=42030)
*   [https://bugs.php.net/bug.php?id=41641](https://bugs.php.net/bug.php?id=41641)

我不清楚讨论的结果是什么，尽管它似乎与“按值”和“按引用”传递的值有关。我在[一些类似代码](http://subversion.assembla.com/svn/enzane/trunk/sources/core/registry.php)中找到的解决方案是这样的：

```
function &__get( $index )
{
   if( array_key_exists( $index, self::$_array ) )
   {
      return self::$_array[ $index ];
   }
   return;
}

function &__set( $index, $value )
{
   if( !empty($index) )
   {
      if( is_object( $value ) || is_array( $value) )
      {
         self::$_array[ $index ] =& $value;
      }
      else
      {
         self::$_array[ $index ] =& $value;
      }
   }
} 
```

请注意它们如何使用`&__get`以及`&__set`在分配值时使用 use `& $value`。我认为这是完成这项工作的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T14:17:30.630

在不起作用的示例中

```
Registry::getInstance()->foo[] = 4;                // Does not work 
```

您首先执行该操作`__get`，然后它使用返回的值向数组添加一些内容。所以你需要`__get`通过引用传递结果：

```
public function &__get($key)
{
  $value = NULL;
  if ($this->__isset($key)) {
    $value = $this->_registry[$key];
  }
  return $value;
} 
```

我们需要使用`$value`，因为只有变量可以通过引用传递。我们不需要添加`&`符号，`__set`因为这个函数应该什么都不返回，所以没有什么可以引用的。

# php - PHP 4：无法理解 OOP 行为

> ID：13421665
> 
> 赞同：1
> 
> 时间：2012-11-16T17:38:54.107
> 
> 标签：php, oop, class, object, php4

在练习认证时，我遇到了一个 MCQ 问题。如下所示。

问：考虑以下脚本。它会输出什么？

```
<?php
$global_obj = null;
class my_class
{
   var $value;
   function my_class()
   {
      global $global_obj;
      $global_obj = &$this;
   }
}
$a = new my_class;
$a->my_value = 5;
$global_obj->my_value = 10;
echo $a->my_value;
?> 
```

选择正确的一个 **选项：**

*   A. 5
*   B. 10
*   C、没有
*   D.构造函数会抛出错误
*   E. 510

我选择 B: 10 是因为在`my_class`构造函数`$global_obj`中是由`$this`. 当我交叉检查时，**我的答案是错误的**

**作为描述，他们提到**

这是一个非常棘手的问题。乍一看，似乎 的构造函数将对 `my_class`自身的引用存储在`$global_obj variable`. 因此，可以预期，当我们稍后将 的值更改`$global_obj->my_value`为 10 时，$a 中的相应值也会发生变化。不幸的是，new 运算符不返回引用，而是新创建对象的副本。因此，脚本将输出 5，正确答案为 A。

* * *

是的，我同意描述已经足够好了，但我仍然无法消化它，因为我们已经明确指定`$global_obj`了 $this 的引用，那么这怎么可能呢？谁能详细解释一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T17:47:09.637

> 我们已经明确为 $global_obj 分配了 $this 的引用，那么这怎么可能呢？

**您在**构造函数中分配全局变量。那时，您正在引用一种临时对象。然后构造函数返回该临时对象的**副本**。这是 $a 将引用的副本（而全局 var 仍然引用临时对象）。

使用 php 4 进行 OOP 是疯狂的。我猜你不应该理解 PHP 4 的 OOP 行为，而只是接受它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:19:24.913

此脚本将输出“5”，即 A 以及以下警告警告：从空值创建默认对象

原因是当你设置这个

```
 `$global_obj = &$this;` 
```

您的分配是对当前对象的引用

这篇文章可能会有所帮助

[http://www.webmaster-source.com/2010/02/25/why-do-some-php-variables-have-an-ampersand-before-them/](http://www.webmaster-source.com/2010/02/25/why-do-some-php-variables-have-an-ampersand-before-them/)

# git - 即使忽略它，也会显示未跟踪的文件夹

> ID：13421668
> 
> 赞同：0
> 
> 时间：2012-11-16T17:39:28.567
> 
> 标签：git

我正在使用 git 存储库跟踪我的主文件夹。做完之后`git status`，我得到了这个：

```
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   workspace/
no changes added to commit (use "git add" and/or "git commit -a") 
```

为什么显示那条线？这是我的`.gitignore`文件：

```
*
!*/
!.vim/plugin/*
!.vim/doc/* 
```

例如，我必须添加`!*/`以跟踪内部的变化`.vim/plugin`，正如我在[这里](https://stackoverflow.com/questions/9162919/git-whitelisting-files-in-a-complex-directory-structure)看到的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:43:31.063

您忽略了第一行的所有内容：'*'。

然后你用第二行忽略目录：'！* /'。

瞧，你没有忽略目录！

# python - 为什么这个 Python 脚本偶尔会递归？

> ID：13421671
> 
> 赞同：3
> 
> 时间：2012-11-16T17:39:34.180
> 
> 标签：python, infinite-loop

我正在自学 Python，并编写了一个用于交换圣诞礼物的小脚本（这不是家庭作业）。我的家人喜欢每个人送一件礼物给一个同性别的人。以下脚本大部分时间都有效，但有时会因无限递归而失败。我不知道为什么，因为我认为基本情况最终会得到满足。

```
import random

family = {'Joe': 'm', 'Jane': 'f', 'John': 'm', 'Jill': 'f', 'James': 'm', 'Jade': 'f'}
receivers = family.copy()
givers = family.copy()

def match(giver):
    index = random.randrange(len(receivers))
    giverGender = givers[giver]
    receiver = receivers.keys()[index]
    receiverGender = receivers.values()[index]

    if giver != receiver and giverGender == receiverGender:
        del receivers[receiver]
        return giver + ' to ' + receiver
    else:
        return match(giver)

# main program
for i in givers:
    print match(i) 
```

这是错误（编辑添加完整错误）：

```
Traceback (most recent call last):
  File "C:\...\christmasGifts.py", line 22, in <module>
    print match(i)
  File "C:\...\christmasGifts.py", line 18, in match
    return match(giver)

  ...

  File "C:\...\christmasGifts.py", line 18, in match
    return match(giver)
  File "C:\...\christmasGifts.py", line 9, in match
  index = random.randrange(len(receivers))
  File "C:\Python27\lib\random.py", line 184, in randrange
istart = int(start)
RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T17:53:49.900

首先让我们只考虑女性。如果您的程序运行并将 Jane 与 Jill 匹配，然后将 Jill 与 Jane 匹配，Jane 是唯一剩下的女性，并且因为她无法匹配自己，您的程序将无限期地运行而没有匹配。

让我提出一种替代方法来解决您的问题。随机打乱你的送礼者/接受者的顺序，让每个人给列表中的以下人送礼，并让列表中的最后一个人给第一人送礼。看起来像这样：

```
from random import shuffle
women = ['Jane', 'Jill', 'Jade']
shuffle(women)
print women[-1] + ' to ' + women[0]
for i in range(len(women) - 1):
    print women[i] + ' to ' + women[i+1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:53:31.927

简对吉尔和吉尔对简

翡翠送给谁？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:54:34.330

这是脚本的简单迭代变体。它工作得很好。

作为一个假设，我认为，基于概率论，有时你只是调用 match 函数太多次，所以它会导致程序达到递归限制

```
import random

family = {'Joe': 'm', 'Jane': 'f', 'John': 'm', 'Jill': 'f', 'James': 'm', 'Jade': 'f'}
receivers = family.copy()
givers = family.copy()

def match(giver):
    giverGender = givers[giver]

    Found = False
    while not Found:
        index = random.randrange(len(receivers))
        receiver = receivers.keys()[index]
        receiverGender = receivers.values()[index]
        if giver != receiver and giverGender == receiverGender:
            Found = True
            del receivers[receiver]
    return giver + ' to ' + receiver

# main program
if __name__=='__main__':
    for i in givers:
        print match(i) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T18:10:00.543

有一种更容易理解的方法：

```
from itertools import izip_longest
from random import shuffle

family = {
    'Joe': 'm',
    'Jane': 'f',
    'John': 'm',
    'Jill': 'f',
    'James': 'm',
    'Jade': 'f'
}

females = [k for k, v in family.iteritems() if v == 'f']
for num in range(5):
    shuffle(females) # muck up the order a bit
    print list(izip_longest(females, females[1:], fillvalue=females[0]))

[('Jade', 'Jill'), ('Jill', 'Jane'), ('Jane', 'Jade')]
[('Jane', 'Jill'), ('Jill', 'Jade'), ('Jade', 'Jane')]
[('Jade', 'Jane'), ('Jane', 'Jill'), ('Jill', 'Jade')]
[('Jade', 'Jane'), ('Jane', 'Jill'), ('Jill', 'Jade')]
[('Jill', 'Jane'), ('Jane', 'Jade'), ('Jade', 'Jill')] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T20:17:02.660

下面的版本实际上允许更多的选择可能性。

```
from random import randint

giver = ['Jane', 'Jill', 'Jade', 'Nicole', 'Charlotte']

receiver = [i for i in giver]

def match(giver, receiver):
    for i in giver:

        #get random receiver
        rec = receiver[randint(0,len(receiver)-1)]

        #check to see if only two remain, so person doesn't pick self in loop.
        if len(receiver) == 2:
            rec = receiver[1]

        #make sure person doesn't select themself.
        while i == rec:
            rec = receiver[randint(0,len(receiver)-1)]

        print i + " gives to " + rec
        #reduce receiver pool
        receiver.remove(rec) 
```

编辑：不知何故，我认为这破坏了在感恩节戴帽子画画的乐趣.... :)

# macos - 安装 Valgrind 时 make 失败

> ID：13421675
> 
> 赞同：23
> 
> 时间：2012-11-16T17:39:42.710
> 
> 标签：macos, makefile, valgrind, darwin

我正在尝试在带有 Snow Leopard 的 Mac 上安装 Valgrind，但出现错误。这就是我在终端中输入的内容。

```
$ curl -O http://valgrind.org/downloads/valgrind-3.8.1.tar.bz2
$ md5sum valgrind-3.8.1.tar.bz2
$ tar -xjvf valgrind-3.8.1.tar.bz2
$ cd valgrind-3.8.1
$ ./configure
$ make 
```

这是我得到的错误。

```
Making all in coregrind
make[2]: *** No rule to make target `/usr/include/mach/mach_vm.defs', needed by `m_mach/mach_vmUser.c'.  Stop.
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

我该如何纠正这个错误？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2015-05-27T01:28:48.040

确保安装命令行工具。

```
xcode-select --install 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-03T12:05:10.697

正确编译 valgrind 的最佳方法是使用上述答案中提到的“xcode-select --install”命令。但是，作为次优 hack，您可以通过将以下文件从[OSX /mach 源](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/osfmk/mach/)下载到 /usr/include/mach 来编译它（创建此目录）：

```
mach_vm.defs    
task.defs
thread_act.defs
vm_map.defs 
```

这是一个有点脏的 hack，但如果你真的不想下载/安装大型 Xcode 原始文件，它应该能让你继续前进。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T22:53:06.587

显然，要在 Macintosh 上编译，valgrind 需要`/usr/include/mach/mach_vm.defs`存在该文件。虽然我无法找到关于`mach_vm.defs`成为 XCode 一部分的具体参考资料，但似乎大多数常用内容`/usr/include/mach`都是在 XCode 安装时安装的。

如果由于某种原因您无法在您的机器上安装 XCode，您可以从[苹果开源网站的这一部分](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/osfmk/mach/)获取该特定目录的大部分源文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-27T03:36:08.247

自从 OSX 上安装了系统完整性保护系统以来，用户，即使不是 root，也可以修改`/usr`. 因此，修改 /usr/include/mach 以添加必要的文件变得不可能。现在唯一的选择是编辑生成文件本身。

手头的 Makefile 应位于`coregrind/Makefile`，而 mach 文件应位于附近`/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/usr/include/`（将 MacOSX10.12.sdk 替换为适当版本的 OSX）。

应该`am__append_17`在第 160 行左右定义一个名为的符号（对于不同的版本，可能在其他地方）。

它应该看起来像这样：

```
am__append_17 = \
    /usr/include/mach/mach_vm.defs \
    /usr/include/mach/task.defs \
    /usr/include/mach/thread_act.defs \
    /usr/include/mach/vm_map.defs 
```

用 替换每个实例`/usr/include`，`/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/usr/include/`使其看起来像：

```
am__append_17 = \
    /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/usr/include/mach/mach_vm.defs \
    /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/usr/include/mach/task.defs \
    /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/usr/include/mach/thread_act.defs \
    /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/usr/include/mach/vm_map.defs 
```

在此之后，valgrind 应该可以正确编译

# jquery - ajax url 参数作为变量。如何？

> ID：13421677
> 
> 赞同：0
> 
> 时间：2012-11-16T17:39:47.110
> 
> 标签：jquery, ajax, url, parameters

有没有办法用变量设置 ajax url？

```
function ajaxDialog() {
$.ajax({
    url: url,
    type: "POST",
    DataType: "html"
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T18:07:30.893

您也可以使用变量作为参数。

```
var url="";
var var1 = "somevalue"

function ajaxDialog() {
  $.ajax({
    url: url,
    type: "GET",
    data:{
       data1: var1   
         }
      });
} 
```

[小提琴](http://jsfiddle.net/eddiarnoldo/pGJbY/)

# actionscript-3 - Greensock/LoaderMax，转换F4V父类的属性

> ID：13421681
> 
> 赞同：0
> 
> 时间：2012-11-16T17:39:59.750
> 
> 标签：actionscript-3, video, netstream, gsap

我创建了一个`Player`类，该类扩展并包含一个F4V`MovieClip`文件数组，这些文件通过以下方式加载`LoaderMax.parse`...`Main`没有看到转换....看来我必须直接从 Main 类中引用内容。例如，如果我只是尝试设置`player.visible=false`，在我已经将视频内容添加到舞台之后，它不会粘住，但如果我引用`player.video.content.visible=false`它，它会起作用......

我真正想做的是在我导航回主导航屏幕之前淡出播放器对象。我可以单独淡化每个`video.content`，但我宁愿只写一个影响整个班级的补间。我错过了一些简单的东西还是比我想象的要大？

...此外，这些转换确实适用于驱动 f4vs 的 NetStream。但正如我们所知，循环 w netStream 是丑陋的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:56:30.120

想通了......我正在将实际的视频内容添加到，所以它绕过了我对......的`stage`所有转换。`Player`

简单的！

# spring - 使用 Maven 打包 jar 时为 org/springframework/context/support/ClassPathXmlApplicationContext 获取 NoClassDefFoundError

> ID：13421684
> 
> 赞同：1
> 
> 时间：2012-11-16T17:40:15.437
> 
> 标签：spring, pom.xml

我相信这个问题之前也被问过。我已经尝试过提到的其他选项，但没有成功:(

**背景：**使用 maven 打包一个包含所有依赖项的 jar。

**pom.xml**

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <executions>
        <execution>
            <id>assembly:package</id>
            <phase>package</phase>
            <goals>
                <!-- Work around for http://jira.codehaus.org/browse/MASSEMBLY-97 
                    as the goal should be attached. -->
                <goal>single</goal>
            </goals>
            <configuration>
                <descriptors>
                    <descriptor>src/main/assembly/assembly.xml</descriptor>
                </descriptors>
            </configuration>
        </execution>
    </executions>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <mainClass>com.Application</mainClass>
            </manifest>
            <manifestEntries>
                <Class-Path>config/</Class-Path>
            </manifestEntries>
            <manifest>
                <addClasspath>true</addClasspath>
                <classpathPrefix>lib/</classpathPrefix>
            </manifest>
        </archive>
    </configuration>
</plugin> 
```

**类路径**

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src/main/java" />
    <classpathentry kind="src" path="src/main/resources" />
    <classpathentry exported="true" kind="con"
        path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER" />
    <classpathentry kind="con"
        path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jre7" />
</classpath> 
```

当我使用运行导出的 jar 时

```
java -cp Scheduler-0.0.1-SNAPSHOT-exe.jar com.Application 
```

我得到了例外

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/springframework/c
ontext/support/ClassPathXmlApplicationContext
        at com.Application.main(Application.java:13)
Caused by: java.lang.ClassNotFoundException: org.springframework.context.support
.ClassPathXmlApplicationContext
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method) 
```

对此有什么想法吗？我为所有依赖的 jar 使用 spring 版本 3.0.6。

谢谢 Gendaful

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:13:55.323

您提到的类路径是eclipse项目的类路径。在使用构建目标准备 JAR 时，maven 构建工具不会考虑它。您应该在 pom.xml 中将 spring jar 指定为依赖项，如下所示，以便 Maven 在打包应用程序时考虑它们。

```
<dependencies>
    ...

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>

    ...
</dependencies> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T11:42:28.063

尝试在你的 pom.xml 插件中添加这个插件。

```
 <!-- Adding depenencies to jar file -->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.1</version>
        <configuration>
         <configuration>
              <transformers>
                <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                  <resource>META-INF/spring.handlers</resource>
                </transformer>
                <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                  <resource>META-INF/spring.schemas</resource>
                </transformer>
              </transformers>
            </configuration>
        </configuration>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
          </execution>
        </executions>
      </plugin> 
```

# machine-learning - 如何在 Infer.NET 的 BPM 中包含更多结果？

> ID：13421692
> 
> 赞同：4
> 
> 时间：2012-11-16T17:40:44.500
> 
> 标签：machine-learning

如何修改[Infer.NET](http://research.microsoft.com/infernet)的[教程 4：贝叶斯点机器](http://research.microsoft.com/en-us/um/cambridge/projects/infernet/docs/Bayes%20Point%20Machine%20tutorial.aspx)以包含更多结果？

例如，如何添加 willRent 并获得 willBuy 和 willRent 的单独概率？

```
 double[] incomes = { 63, 16, 28, 55, 22, 20 };
        double[] ages = { 38, 23, 40, 27, 18, 40 };
        bool[] willBuy = { true, false, true, true, false, false };
        bool[] willRent = { false, false, true, false, true, false }; 
```

编辑 - 这是复制/粘贴格式的示例：

```
static void Main()
{
    double[] incomes = { 63, 16, 28, 55, 22, 20 };
    double[] ages = { 38, 23, 40, 27, 18, 40 };
    bool[] willBuy = { true, false, true, true, false, false };

    // Create x vector, augmented by 1
    Vector[] xdata = new Vector[incomes.Length];
    for (int i = 0; i < xdata.Length; i++)
        xdata[i] = Vector.FromArray(incomes[i], ages[i], 1);
    VariableArray<Vector> x = Variable.Observed(xdata);

    // Create target y
    VariableArray<bool> y = Variable.Observed(willBuy, x.Range);

    Variable<Vector> w = Variable.Random(new VectorGaussian(Vector.Zero(3), PositiveDefiniteMatrix.Identity(3)));
    Range j = y.Range;
    double noise = 0.1;
    y[j] = Variable.GaussianFromMeanAndVariance(Variable.InnerProduct(w, x[j]), noise) > 0;

    InferenceEngine engine = new InferenceEngine(new ExpectationPropagation());
    VectorGaussian wPosterior = engine.Infer<VectorGaussian>(w);
    Console.WriteLine("Dist over w=\n" + wPosterior);

    double[] incomesTest = { 58, 18, 22 };
    double[] agesTest = { 36, 24, 37 };
    VariableArray<bool> ytest = Variable.Array<bool>(new Range(agesTest.Length));
    BayesPointMachine(incomesTest, agesTest, Variable.Random(wPosterior), ytest);
    Console.WriteLine("output=\n" + engine.Infer(ytest));

    Console.ReadKey();
}

static void BayesPointMachine(double[] incomes,double[] ages,Variable<Vector> w,VariableArray<bool> y)
{
    // Create x vector, augmented by 1
    Range j = y.Range;
    Vector[] xdata = new Vector[incomes.Length];
    for (int i = 0; i < xdata.Length; i++)
        xdata[i] = Vector.FromArray(incomes[i], ages[i], 1);
    VariableArray<Vector> x = Variable.Observed(xdata, j);

    // Bayes Point Machine
    double noise = 0.1;
    y[j] = Variable.GaussianFromMeanAndVariance(Variable.InnerProduct(w, x[j]), noise) > 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:03:21.927

这里有 4 个变量。

```
 Will Buy?
                  ^        ^
                 /          \
                Age        Income
                 \          /
                  v        v
                   Will Rent? 
```

给定`(Age,Income)`和是自变量`Will Buy`，`Will Rent`即[条件独立](http://en.wikipedia.org/wiki/Conditional_independence)。

这样您就可以构建两个单独的贝叶斯点机器：

*   一个为`Age`和。`Income``Will Rent`
*   一个为`Age`和。`Income``Will Buy`

# vb.net - DataReader 过期连接对象

> ID：13421695
> 
> 赞同：0
> 
> 时间：2012-11-16T17:40:57.543
> 
> 标签：vb.net

请看下面的代码：

```
Private objCommand As SQLCommand 

Public Overrides Function ExecuteDataReader(ByVal strCommandType As String, ByVal sqlCommandString As String) As DbDataReader
    Dim objDR As SqlDataReader

    Try
        _objCon = getConnection()
        _objCon.Open()
        Using _objCon
            Using _objCommand
                _objCommand.Connection = _objCon
                _objCommand.CommandText = sqlCommandString
                _objCommand.CommandType = strCommandType
                objDR = _objCommand.ExecuteReader
                ExecuteDataReader = objDR
            End Using
        End Using
    Catch ex As Exception
        Throw
    Finally
        _objCon = Nothing
        _objCommand.Dispose()
        _objCommand = Nothing
        objDR = Nothing
    End Try
End Function 
```

返回关闭，`DataReader`因为它在连接对象关闭时关闭。连接对象的寿命如何`DataReader`？

我一直在寻找类似的问题，我发现了这个问题：[DataReader not closed when Connection is closed,后果？](https://stackoverflow.com/questions/6182884/datareader-not-closed-when-connection-is-closed-consequences). 但是，它没有回答我的具体问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:03:41.870

您的连接过早关闭的原因是您在退出`Using`块之前不会从函数返回。离开 Using 块的行为将强制您的连接立即关闭。将 datareader 设置为返回的对象是不够的。即使使用显式的 Return 语句也不够……离开函数仍然意味着离开 Using 块，因此在您使用数据读取器之前，您的连接仍然关闭。

* * *

为了解决所有这些问题，我使用了如下所示的模式：

```
Public Iterator Function ExecuteDataReader(Of T)(ByVal sql As String, ByVal addParams as Action(Of SqlParameterCollection), ByVal castRow As Funnction(Of IDataRecord, T)) As IEnumerable(Of T)

    Using cn As SqlConnection = getConnection(), _
          cmd As New SqlCommand(sql, cn)

        addParams(cmd.Parameters)
        cn.Open()

        Using rdr As SqlDataReader = cmd.ExecuteReader()
            While rdr.Read()
                Yield castRow(rdr)
            End While
        End Using
    End Using
End Function 
```

然后我会这样调用该函数：

```
Dim results As IEnumerable(Of Customer) = ExecuteDataReader( _
           "SELECT * FROM Customer WHERE Sales> @MinSales", _
      Sub(p) p.Add("@MinSales", SqlDbType.Double).Value = 10000.0, _
      Function(r) New Customer() With {Name=r("Name"), Address=r("Address"), Sales=r("Sales") })

For Each c As Customer in results
   '...
Next 
```

让我们稍微回顾一下这个模式，因为有些事情会让人困惑……即我想涵盖委托参数。

首先是 addParameter 参数。您需要了解的是，*您的原始模式被严重破坏了*，因为它迫使您创建充斥着 Sql 注入漏洞的代码，因为没有其他方法可以发送参数信息。这是一个**巨大**的问题。幸运的是，它很容易解决。这就是 addParameter 参数的用途。这不是唯一的方法——也就是说，你也可以做一些简单的事情，比如传递一个键/值/类型的数组——但我喜欢它，因为它避免了通过数组的重复工作或存储参数数据的重复内存两次。

接下来是 castRow 参数。这是必要的，因为没有它，您会遇到与示例类似的问题。在这里，代码仍然会运行，但是因为您在其他地方不断产生相同的目标代码，最终将全部使用结果中的最终记录。这样，您可以获得正确的预期结果，并且以强类型的方式获得它们。

继续前进，希望您已经熟悉 Iterator 和 Yield 关键字，但由于它们对 VB.Net 来说相对较新，如果您不熟悉也没关系。只要知道它们会导致编译器将此代码转换为可以迭代您的数据读取器对象的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:04:50.713

您可以使用 ExecuteReader 的过载并传递 CommandBehaviour.Close，然后当阅读器处理完其余部分时，它会变得混乱，并且您会失去对生命周期的控制。

我的建议是不要这样做，我在一个项目中做过，虽然我仍然喜欢 DataReader 作为一种轻量级访问，并且不喜欢 Datatable，但我不再传递 raeders，错误的范围太大。这是代码、连接池和垃圾收集器之间的持续斗争，你不会赢。

使用 DataTable、EF、Linq 或只是老式的 IEnumberable

# php - PHP while循环中没有条件？

> ID：13421696
> 
> 赞同：3
> 
> 时间：2012-11-16T17:41:09.990
> 
> 标签：php, mysql, content-management-system, while-loop, conditional-statements

所以，我正在使用 PHP 构建我的第一个超级基本 CMS。我不想简单地复制我正在看的教程中的代码，但真的理解它。困扰我的一件事是使用 while 循环来获取帖子。在下面的代码中，我看不到圆括号内的语句如何构成条件。在我看来，它所做的只是将一个数组分配给变量 $post。我想，你怎么能遍历不是条件的东西是我的问题。谢谢！

```
function get_posts () {
   $query = mysql_query("SELECT * FROM posts") or die(mysql_error());

   while ($post = mysql_fetch_assoc($query)) {
      echo $post['Content'];
   }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T17:43:56.883

## 停止！

您正在观看的教程已严重过时！[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

至于具体问题，这一行

```
while ($post = mysql_fetch_assoc($query)) { 
```

是条件。`mysql_fetch_assoc()`如果有更多结果，则返回一个数组，如果没有，则返回一个数组`false`。如果它返回`false`，则条件将评估为`false`并且循环将中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:44:57.110

基本上你正在获取新行并将其分配给`$post`变量：

```
while ($post = mysql_fetch_assoc($query)) 
```

[mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php)：

> 返回值
> 
> 返回与获取的行相对应的字符串关联数组，如果没有更多行，则返回**FALSE 。**

因此，当`mysql_fetch_assoc`返回时`false`，它被分配给`$post`变量，然后在 内求值`while`，然后循环停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:45:06.847

[如mysql_fetch_assoc](http://php.net/mysql_fetch_assoc)的手册页中所述：

> 返回值：返回与获取的行相对应的字符串关联数组，如果没有更多行，则返回 FALSE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:45:17.610

```
while ($post = mysql_fetch_assoc($query)) 
```

意味着第一个 $post 得到一个值。mysql_fetch_assoc 在出现错误时返回 false。

while 循环检查 $post 是否为假，它可以是真、整数、数组等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T17:49:48.017

它是 PHP 的一部分。赋值的结果是被赋值的值。这允许这样的事情：

```
$x = $y = $z = 7; 
```

它分配`7`给所有 3 个变量。因此，给定

```
while($row = mysql_result(...)) { 
```

当没有更多数据要获取时，mysql_result 将返回一个行数据数组或布尔值 false。该数组/布尔值分配给 $row。由于这个赋值有 while() 包裹它，所以数组/布尔值传播到 while()。

如果你得到一行数据，它是一个数组，被 while 视为布尔值 true，循环继续。如果没有更多数据，mysql_fetch 返回一个布尔值 false，它被赋值给 $row，而这个 false 也是赋值的结果，意味着 while() 得到一个 FALSE，并且循环终止。

# linq-to-sql - linq to sql join 有多个条件

> ID：13421697
> 
> 赞同：0
> 
> 时间：2012-11-16T17:41:13.723
> 
> 标签：linq-to-sql

我知道我们通过使用匿名类在连接中实现了多个条件，但是任何人都可以确认以下方法不起作用吗？似乎没有，我很难验证。

```
 ...
join up in db.UserProfiles on
new { UserId = uf.UserId, IsDeleted = false, IsApproved = true } equals
new { UserId = up.UserId, IsDeleted = up.IsDeleted ?? false, IsApproved = up.aspnet_User.aspnet_Membership.IsApproved } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:52:38.263

“我想要所有被批准且未被删除的用户配置文件”

只需使用 linq 并尽量不要重新创建 SQL ......必须猜测一下关系，但你会得到图片

```
Var x= From up in db.UserProfiles 
         where up.aspnet_User.aspnet_Membership.IsApproved  == true &&
          (! up.Isdeleted == true)
         select up; 
```

或模仿 Coalesce

```
 Var x = From up in db.UserProfiles 
             where up.aspnet_User.aspnet_Membership.IsApproved  == true &&
             (up.Isdeleted == false || up.Isdelete == null )
             select up; 
```

（我会这样做！在这种情况下是错误的，因为 null 显然有一些问题 - 但是我从未经历过它们，你可以查看[LINQ 查询 - null date](https://stackoverflow.com/q/2509044/532498)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:20:28.113

要回答我自己的问题，linq to sql 连接中匿名类中的“常量”属性是有效的，并且确实会带来预期的结果。我注意到的意外行为的根本原因是一个完全不同的问题 -[在这里描述](https://stackoverflow.com/questions/13426765/linq-to-sql-multiple-foreign-keys-to-same-primary-key-visual-studio-intellisen)

# objective-c - ObjC：用于打印 C 字节数组的“NSLog”与“printf”

> ID：13421698
> 
> 赞同：1
> 
> 时间：2012-11-16T17:41:23.330
> 
> 标签：objective-c, printf, nslog

当需要将 C 字节数组（不是 ASCII）的内容打印到控制台时，'printf' 的优势在于，在单步执行数组时，它不会在每次使用后返回。因此，阵列被简洁地打印在屏幕上。但是，打印输出实际到达屏幕通常需要一段时间，并且在绝望中，我有时会打开或关闭“终端”，因为这似乎会清除打印输出（“fflush”不会）。

另一方面，“NSLog”打印速度很快，但人们经常在这里和其他地方看到它必须在数组的每一步中应用。不幸的是，这会在每次使用后插入一个返回，甚至导致一个短数组覆盖页面并使其难以阅读或复制。

作为记录，我认为值得指出的是，有一个简单的解决方案，使用“NSMutableString”和“appendFormat”，可以在页面上打印。这是带有逗号、空格和括号的“花里胡哨”版本，我可以方便地进行测试。它构造为 C 函数并以十进制 (%d) 打印；[对于其他格式，请参阅https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/introStrings.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/introStrings.html)上的 Apple 的“字符串编程指南” 。

```
void byteArrayLog(unsigned char *bArray, int numBytes)
{
    int i;  
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSMutableString* dString = [NSMutableString stringWithCapacity:5*numBytes];//Create a mutable string. Note the length.
    [dString appendString:@"{"];//Start with "{".
    for(i = 0; i < numBytes-1; i++)
        [dString appendFormat:@"%d, ", bArray[i]];//Format a byte, follow with a comma and a space.
    [dString appendFormat:@"%d}", bArray[i]];//Format the final byte, finish with a "}".

    NSLog(@"Array contents = %@", dString);//Print to the console.

    [pool drain];//Clean up.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:25:53.573

`NSLog()`打印到标准错误流 ( `stderr`)，而`printf()`打印到标准输出 ( `stdout`)。似乎标准输出没有正确刷新，但标准错误流是 - 尝试使用

```
fprintf(stderr, "format string: %d", array[index]); 
```

为了`stderr`使用`printf()`-style 函数打印。

# forms - 如何在 express.js 中获取嵌套表单数据？

> ID：13421701
> 
> 赞同：11
> 
> 时间：2012-11-16T17:41:27.370
> 
> 标签：forms, node.js, express

在 Rails 中，如果你有一个带下划线的表单，它会在 params 中假设一个嵌套的布局结构：

```
<input type="text" name="person_first" />
<input type="text" name="person_last" /> 
```

在服务器上，您将获得：

```
params #=> { person: { first: "Tom", last: "Hanks" } } 
```

当我在 node.js 中使用 Express.js 时，bodyparser 似乎没有做同样的事情。查看 bodyparser 的代码，它只是在上面运行 JSON 解析器，结果是：

```
params #=> { person_first: "Tom", person_last: "Hanks" } } 
```

当我使用 Express 时，有什么方法可以获取嵌套表单数据，例如在 Rails 中？有没有图书馆可以让我做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-16T22:52:54.120

如果您正在使用`express.bodyParser`，您可以使用数组表示法来传递嵌套数据。

在控制器之前添加`express.bodyParser`中间件。

```
app.use(express.bodyParser()); 
```

现在你可以在你的 html 代码中使用这个符号：

```
<input type="text" name="person[first]" />
<input type="text" name="person[last]" /> 
```

或者

```
<input type="text" name="person[name][first]" />
<input type="text" name="person[name][last]" /> 
```

## Express 4 更新

这里的关键是设置`extended: true`

```
app.use(bodyParser.urlencoded({
  extended: true
})); 
```

# javascript - PhoneGap 2.1 >> 2.2 升级后，XCode 不显示 console.log() 消息

> ID：13421708
> 
> 赞同：0
> 
> 时间：2012-11-16T17:42:03.643
> 
> 标签：javascript, jquery, xcode, cordova, jquery-mobile

1.  在 Android 中启动 PhoneGap 应用程序，一旦我喜欢我所看到的，我会将 www/ 同步到 XCode 项目，然后我在那里进一步测试 + 微调。
2.  我更新到 PhoneGap 2.2，突然之间，我`console.log()`在 XCode 控制台中看不到消息。
3.  我有一个带有完全相同的 HTML/CSS/JS 的 PhoneGap 2.1 应用程序，它仍然使用当前代码运行，并按预期输出到 XCode 控制台。
4.  在带有 Eclipse 控制台的 Android 中运行良好。 `console.log()`下面的消息会产生预期的行为。
5.  我在 XCode 控制台中没有看到任何错误或任何类型的不当行为
6.  我看到应用程序本身的错误行为。
7.  我同时使用 jQuery Mobile 1.1.1 和 jQuery 1.7.1

我特别坚持这个，任何帮助将不胜感激

```
$(document).bind('pageinit', function()
{
    console.log("mobile init---------------");
    $.mobile.touchOverflowEnabled = true;
    $.mobile.defaultPageTransition = 'slide';
    $.mobile.loadingMessageTextVisible = true; 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:57:15.747

我有这个问题。

运行 ./create 后生成的 PhoneGap 样板代码包含一个带有“deviceready”类的 DOM 元素。在我的 index.js 文件中，由于我删除了该 DIV，receivedEvent 方法正在静默失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:23:13.587

不确定您的意思是不是字面上的＃3 - 您是否也更新了 javascript 组件？即使您认为您确实替换了 javascript，但更新有时并没有真正进入设备。

jquery mobile init可以在phonegap deviceready之前触发吗？使用 phonegap，console.log 实际上类似于插件调用。由于它与时间相关，因此保留 $.mobile.autoinitializepage 可能在大多数情况下都有效，但如果 2.2 deviceready 需要稍长的时间，您会看到类似于您所描述的内容。

# c++ - vim 没有高亮一些 c++ 关键字

> ID：13421709
> 
> 赞同：8
> 
> 时间：2012-11-16T17:42:04.933
> 
> 标签：c++, vim, syntax-highlighting, vi, vim-syntax-highlighting

我用`vim`（安装在`cygwin`）写`c++`程序，但它没有突出一些`c++`关键字，如`new`, `delete`, `public`, `friend`, `try`，但突出其他关键字如`namespace`, `int`, `const`, `operator`, `true`, `class`, `include`。它也不会改变操作员的颜色。

我从未更改过它的语法文件。它出什么问题了？非常感谢。

我使用定制的配色方案；当我将其更改为`desert`配色方案时，突出显示没有问题，但我需要使用该配色方案并且不能将其更改为其他内容。

我希望它显示程序如下图（我在图中使用了这个配色方案和记事本++）：

![正确着色的示例](../Images/c1f22972e4c4fd0b276684fe2f8b459f.png)

但现在如下图所示： ![没有正确着色](../Images/9c75c02c696b2695f7ff520731a3f3c7.png)

在`colorscheme`这里：

```
"Tomorrow Night Bright - Full Colour and 256 Colour
" http://chriskempson.com
"
" Hex colour conversion functions borrowed from the theme "Desert256""

 " Default GUI Colours
 let s:foreground = "eaeaea"
 let s:background = "000000"
 let s:selection = "424242"
 let s:line = "2a2a2a"
 let s:comment = "969896"
 let s:red = "d54e53"
 let s:orange = "e78c45"
 let s:yellow = "e7c547"
 let s:green = "b9ca4a"
 let s:aqua = "70c0b1"
 let s:blue = "7aa6da"
 let s:purple = "c397d8"
 let s:window = "4d5057"

 set background=dark
 hi clear
 syntax reset

 let g:colors_name = "Tomorrow-Night-Bright"

 if has("gui_running") || &t_Co == 88 || &t_Co == 256
" Returns an approximate grey index for the given grey level
fun <SID>grey_number(x)
    if &t_Co == 88
        if a:x < 23
            return 0
        elseif a:x < 69
            return 1
        elseif a:x < 103
            return 2
        elseif a:x < 127
            return 3
        elseif a:x < 150
            return 4
        elseif a:x < 173
            return 5
        elseif a:x < 196
            return 6
        elseif a:x < 219
            return 7
        elseif a:x < 243
            return 8
        else
            return 9
        endif
    else
        if a:x < 14
            return 0
        else
            let l:n = (a:x - 8) / 10
            let l:m = (a:x - 8) % 10
            if l:m < 5
                return l:n
            else
                return l:n + 1
            endif
        endif
    endif
endfun

" Returns the actual grey level represented by the grey index
fun <SID>grey_level(n)
    if &t_Co == 88
        if a:n == 0
            return 0
        elseif a:n == 1
            return 46
        elseif a:n == 2
            return 92
        elseif a:n == 3
            return 115
        elseif a:n == 4
            return 139
        elseif a:n == 5
            return 162
        elseif a:n == 6
            return 185
        elseif a:n == 7
            return 208
        elseif a:n == 8
            return 231
        else
            return 255
        endif
    else
        if a:n == 0
            return 0
        else
            return 8 + (a:n * 10)
        endif
    endif
endfun

" Returns the palette index for the given grey index
fun <SID>grey_colour(n)
    if &t_Co == 88
        if a:n == 0
            return 16
        elseif a:n == 9
            return 79
        else
            return 79 + a:n
        endif
    else
        if a:n == 0
            return 16
        elseif a:n == 25
            return 231
        else
            return 231 + a:n
        endif
    endif
endfun

" Returns an approximate colour index for the given colour level
fun <SID>rgb_number(x)
    if &t_Co == 88
        if a:x < 69
            return 0
        elseif a:x < 172
            return 1
        elseif a:x < 230
            return 2
        else
            return 3
        endif
    else
        if a:x < 75
            return 0
        else
            let l:n = (a:x - 55) / 40
            let l:m = (a:x - 55) % 40
            if l:m < 20
                return l:n
            else
                return l:n + 1
            endif
        endif
    endif
endfun

" Returns the actual colour level for the given colour index
fun <SID>rgb_level(n)
    if &t_Co == 88
        if a:n == 0
            return 0
        elseif a:n == 1
            return 139
        elseif a:n == 2
            return 205
        else
            return 255
        endif
    else
        if a:n == 0
            return 0
        else
            return 55 + (a:n * 40)
        endif
    endif
endfun

" Returns the palette index for the given R/G/B colour indices
fun <SID>rgb_colour(x, y, z)
    if &t_Co == 88
        return 16 + (a:x * 16) + (a:y * 4) + a:z
    else
        return 16 + (a:x * 36) + (a:y * 6) + a:z
    endif
endfun

" Returns the palette index to approximate the given R/G/B colour levels
fun <SID>colour(r, g, b)
    " Get the closest grey
    let l:gx = <SID>grey_number(a:r)
    let l:gy = <SID>grey_number(a:g)
    let l:gz = <SID>grey_number(a:b)

    " Get the closest colour
    let l:x = <SID>rgb_number(a:r)
    let l:y = <SID>rgb_number(a:g)
    let l:z = <SID>rgb_number(a:b)

    if l:gx == l:gy && l:gy == l:gz
        " There are two possibilities
        let l:dgr = <SID>grey_level(l:gx) - a:r
        let l:dgg = <SID>grey_level(l:gy) - a:g
        let l:dgb = <SID>grey_level(l:gz) - a:b
        let l:dgrey = (l:dgr * l:dgr) + (l:dgg * l:dgg) + (l:dgb * l:dgb)
        let l:dr = <SID>rgb_level(l:gx) - a:r
        let l:dg = <SID>rgb_level(l:gy) - a:g
        let l:db = <SID>rgb_level(l:gz) - a:b
        let l:drgb = (l:dr * l:dr) + (l:dg * l:dg) + (l:db * l:db)
        if l:dgrey < l:drgb
            " Use the grey
            return <SID>grey_colour(l:gx)
        else
            " Use the colour
            return <SID>rgb_colour(l:x, l:y, l:z)
        endif
    else
        " Only one possibility
        return <SID>rgb_colour(l:x, l:y, l:z)
    endif
endfun

" Returns the palette index to approximate the 'rrggbb' hex string
fun <SID>rgb(rgb)
    let l:r = ("0x" . strpart(a:rgb, 0, 2)) + 0
    let l:g = ("0x" . strpart(a:rgb, 2, 2)) + 0
    let l:b = ("0x" . strpart(a:rgb, 4, 2)) + 0

    return <SID>colour(l:r, l:g, l:b)
endfun

" Sets the highlighting for the given group
fun <SID>X(group, fg, bg, attr)
    if a:fg != ""
        exec "hi " . a:group . " guifg=#" . a:fg . " ctermfg=" . <SID>rgb(a:fg)
    endif
    if a:bg != ""
        exec "hi " . a:group . " guibg=#" . a:bg . " ctermbg=" . <SID>rgb(a:bg)
    endif
    if a:attr != ""
        exec "hi " . a:group . " gui=" . a:attr . " cterm=" . a:attr
    endif
endfun

" Vim Highlighting
call <SID>X("Normal", s:foreground, s:background, "")
call <SID>X("LineNr", s:selection, "", "")
call <SID>X("NonText", s:selection, "", "")
call <SID>X("SpecialKey", s:selection, "", "")
call <SID>X("Search", s:background, s:yellow, "")
call <SID>X("TabLine", s:foreground, s:background, "reverse")
call <SID>X("StatusLine", s:window, s:yellow, "reverse")
call <SID>X("StatusLineNC", s:window, s:foreground, "reverse")
call <SID>X("VertSplit", s:window, s:window, "none")
call <SID>X("Visual", "", s:selection, "")
call <SID>X("Directory", s:blue, "", "")
call <SID>X("ModeMsg", s:green, "", "")
call <SID>X("MoreMsg", s:green, "", "")
call <SID>X("Question", s:green, "", "")
call <SID>X("WarningMsg", s:red, "", "")
call <SID>X("MatchParen", "", s:selection, "")
call <SID>X("Folded", s:comment, s:background, "")
call <SID>X("FoldColumn", "", s:background, "")
if version >= 700
    call <SID>X("CursorLine", "", s:line, "none")
    call <SID>X("CursorColumn", "", s:line, "none")
    call <SID>X("PMenu", s:foreground, s:selection, "none")
    call <SID>X("PMenuSel", s:foreground, s:selection, "reverse")
end
if version >= 703
    call <SID>X("ColorColumn", "", s:line, "none")
end

" Standard Highlighting
call <SID>X("Comment", s:comment, "", "")
call <SID>X("Todo", s:comment, s:background, "")
call <SID>X("Title", s:comment, "", "")
call <SID>X("Identifier", s:red, "", "none")
call <SID>X("Statement", s:foreground, "", "")
call <SID>X("Conditional", s:foreground, "", "")
call <SID>X("Repeat", s:foreground, "", "")
call <SID>X("Structure", s:purple, "", "")
call <SID>X("Function", s:blue, "", "")
call <SID>X("Constant", s:orange, "", "")
call <SID>X("String", s:green, "", "")
call <SID>X("Special", s:foreground, "", "")
call <SID>X("PreProc", s:purple, "", "")
call <SID>X("Operator", s:aqua, "", "none")
call <SID>X("Type", s:blue, "", "none")
call <SID>X("Define", s:purple, "", "none")
call <SID>X("Include", s:blue, "", "")
"call <SID>X("Ignore", "666666", "", "")

" Vim Highlighting
call <SID>X("vimCommand", s:red, "", "none")

" C Highlighting
call <SID>X("cType", s:yellow, "", "")
call <SID>X("cStorageClass", s:purple, "", "")
call <SID>X("cConditional", s:purple, "", "")
call <SID>X("cRepeat", s:purple, "", "")

" PHP Highlighting
call <SID>X("phpVarSelector", s:red, "", "")
call <SID>X("phpKeyword", s:purple, "", "")
call <SID>X("phpRepeat", s:purple, "", "")
call <SID>X("phpConditional", s:purple, "", "")
call <SID>X("phpStatement", s:purple, "", "")
call <SID>X("phpMemberSelector", s:foreground, "", "")

" Ruby Highlighting
call <SID>X("rubySymbol", s:green, "", "")
call <SID>X("rubyConstant", s:yellow, "", "")
call <SID>X("rubyAttribute", s:blue, "", "")
call <SID>X("rubyInclude", s:blue, "", "")
call <SID>X("rubyLocalVariableOrMethod", s:orange, "", "")
call <SID>X("rubyCurlyBlock", s:orange, "", "")
call <SID>X("rubyStringDelimiter", s:green, "", "")
call <SID>X("rubyInterpolationDelimiter", s:orange, "", "")
call <SID>X("rubyConditional", s:purple, "", "")
call <SID>X("rubyRepeat", s:purple, "", "")

" Python Highlighting
call <SID>X("pythonInclude", s:purple, "", "")
call <SID>X("pythonStatement", s:purple, "", "")
call <SID>X("pythonConditional", s:purple, "", "")
call <SID>X("pythonFunction", s:blue, "", "")

" JavaScript Highlighting
call <SID>X("javaScriptBraces", s:foreground, "", "")
call <SID>X("javaScriptFunction", s:purple, "", "")
call <SID>X("javaScriptConditional", s:purple, "", "")
call <SID>X("javaScriptRepeat", s:purple, "", "")
call <SID>X("javaScriptNumber", s:orange, "", "")
call <SID>X("javaScriptMember", s:orange, "", "")

" HTML Highlighting
call <SID>X("htmlTag", s:red, "", "")
call <SID>X("htmlTagName", s:red, "", "")
call <SID>X("htmlArg", s:red, "", "")
call <SID>X("htmlScriptTag", s:red, "", "")

" Diff Highlighting
call <SID>X("diffAdded", s:green, "", "")
call <SID>X("diffRemoved", s:red, "", "")

" Delete Functions
delf <SID>X
delf <SID>rgb
delf <SID>colour
delf <SID>rgb_colour
delf <SID>rgb_level
delf <SID>rgb_number
delf <SID>grey_colour
delf <SID>grey_level
delf <SID>grey_number
endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T08:50:18.917

将此添加到 C 突出显示段落：

```
call <SID>X("Statement", s:purple, "", "") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T19:39:06.780

您提到的所有关键字最终都链接到标准`Statement`语法组。也许那个被清除了。尝试

```
:verbose highlight Statement 
```

如果它显示`xxx cleared`，则您更进一步，现在需要调查为什么您的颜色方案未定义颜色。

# c# - 如何在模板中设置 RadioButton 集？

> ID：13421713
> 
> 赞同：1
> 
> 时间：2012-11-16T17:42:30.317
> 
> 标签：c#, windows-phone-7, radio-button

我有以下场景：我有一个预定义的、已经初始化的**Dictionary**结构。该字典的元素通过**ListBox**显示。在每一行中，有两个**TextBoxes**和一个**RadioButton**，它们引用字典中的 Country 结构变量。当我单击一个单选按钮时，我将国家名称保存在首选项中，当我重新加载视图时，保存的选项会恢复。我的代码如下：

在 .XAML 文件中：

 **```
<ListBox Height="Auto" Margin="0, 0, 0, 16" x:Name="CountryCodeSelect_countrylist">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid x:Name="CountryCodeSelect_listfields" Margin="16" Height="64" Width="432" Background="#F2F2F2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock
                    Margin="16,0,0,0"
                    Text="{Binding Key}"
                    Foreground="Black"
                    FontSize="24"
                    FontWeight="Black"
                    VerticalAlignment="Center"
                    Grid.Row="0" Grid.Column="0"/>
                <TextBlock
                    Margin="16,0,8,0"
                    Text="{Binding Value.CountryCode}"
                    Foreground="Black"
                    FontSize="24"
                    FontWeight="Black"
                    VerticalAlignment="Center"
                    Grid.Row="0" Grid.Column="1"/>
                <RadioButton
                    Margin="0,0,24,0"
                    IsChecked="{Binding Path=IsChecked, Converter={StaticResource radioBoolToIntConverter}, ConverterParameter=Value.CountryName}"
                    GroupName="CountryCodeSelect_countries"
                    DataContext="{Binding Value.CountryName}"
                    Grid.Row="0" Grid.Column="2"
                    HorizontalAlignment="Right"
                    Click="RadioButton_Click" />
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```*  *还有我的模型 .CS 文件：

 **```
public Dictionary<string, Country> countries = new Dictionary<string, Country>() {
    { "Afghanistan", new Country("Afghanistan", ".com", 93, false) },
    { "Albania", new Country("Albania", ".com", 355, false) },
    { "Algeria", new Country("Algeria", ".com", 213, false) },
    . . .
    . . .
    . .
    .
}

public CountryCodeSelect() {
    InitializeComponent();
    // reload previous saved value
    string cn = Persistence.load_countryName();
    if (cn != null) {
        Country c;
        countries.TryGetValue(cn, out c);
        c.Checked = true;
        countries.Remove(c.CountryName);
        countries.Add(c.CountryName, c);
    }
    CountryCodeSelect_countrylist.ItemsSource = countries;
}

private int _IsChecked;
public int IsChecked { get { return _IsChecked; } set { _IsChecked = value; } } 
```*  *我的问题/问题是：**如何将单选按钮初始化为“已选中”？**我使用此代码达到的行为是完整列表，显示了国家名称，并设置了变量。但是我的单选按钮都没有显示为选中状态。我想知道是否需要“刷新”页面，但如果需要，我该怎么做？****

# javascript - node.js，可以外部请求更改正在运行的函数中的变量

> ID：13421715
> 
> 赞同：0
> 
> 时间：2012-11-16T17:42:39.570
> 
> 标签：javascript, mysql, node.js, asynchronous

我已经设置了一个节点服务器来保存日志信息。预计会有非常大量的请求进入。我正在使用 mongo 数据存储，但它的性能太不可靠了。读取事物报告方面的数据通常需要异常长的时间。所以我改用经典的mysql。如果您准备批量插入而不是单例插入，那么显然有显着的写入吞吐量优势。于是我找到了这个人：

[https://gist.github.com/3078520](https://gist.github.com/3078520)

我喜欢它的简单。它只有几行，非常强大。它有两个主要功能`add()`，将记录添加到队列中，然后`flush()`在队列达到一定大小时调用。然后它将`flush()`队列加入一个长字符串并创建一个长的批量插入语句，然后将其发送到 mysql 驱动程序（我从提供的链接简化了函数：

```
this.flush = function () {
/*1*/    var sql = queryTemplate.replace('{values}', '\n('+ queue.join('),\n(') +')');
/*2*/    handle.query(sql, callback);
/*3*/    queue = [];
} 
```

这本质上是一个类函数，它是请求处理程序拥有的单个类实例的一部分。所以我的问题是，这安全吗？是`queue`一个类变量。当`flush()`被调用时，它处理队列。我能看到的唯一问题是如果`flush()`被调用，则执行第 1 行以生成 sql 语句（只是一个字符串），**然后****调用`add()`另一个`queue`**向`query()`. 在这种情况下，第二个进程添加的记录将丢失，因为第一个进程在创建 sql 语句时不知道它，并且在清除`queue`. 这可能吗？

这个问题的更一般化的形式如下。一旦一个函数开始执行，其他任何外部因素都会影响其范围之外的变量吗？这是一个非常简单的示例，假设不同的请求调用这两个函数，是否**可以**在此示例中执行 console.log：

```
var global_number;
function a(){
  global_number=2;
}
function b(){
  global_number=1;
  if(global_number==2){
    console.log("a() influenced global_number in the middle of b()'s execution")
  }
} 
```

这主要是一个是/否的问题，但我正在寻找更多。一个简短的解释或指向我可以了解更多信息的页面的链接会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:03:44.433

如果一个函数是同步的，那么在函数开始执行和完成之间，没有任何东西可以影响该函数引用的变量。

但是，如果函数调用异步函数（例如 MySQL 查询），则函数本身是异步的，其他代码可以在函数运行时间和异步函数回调时间之间修改函数的父/全局范围内的变量运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T18:12:07.620

是的，如果函数的执行是异步的，那么您可能会遇到全局变量拥有的数据的问题。这是测试场景；

```
var globalVariable = 10;

function a ()
{
    var timer = setInterval(function() {
        globalVariable--;
        console.log(globalVariable)
    }, 1000);
}

function b ()
{
    setTimeout(function() {
        globalVariable = 20;
    }, 3000);
}

a();
b(); 
```

这将输出：

```
9
8
7
19
18
17
16 
```

如果你要求函数执行中断不是异步的，没办法！请参阅示例。

```
var globalVariable = 1000000000;
function a () {
    for(var i=0; i < 1000000000; i++)
    {
        if(globalVariable == 20000) console.log('From a() : ' + globalVariable);
        globalVariable--;
        if(globalVariable == 0) break;
    }
}

function b () {
    setTimeout(function() {
        console.log('From b() : ' + globalVariable);
        globalVariable = 20000;
        console.log('From b() : ' + globalVariable);
    }, 1);
}

b();
a(); 
```

这将始终输出：

```
From a() : 20000
From b() : 0
From b() : 20000 
```

因此，您的问题答案是否定的，您不能中断同步功能的执行。

然而; 在您的代码片段示例中，似乎可以清空，`queue`因为您已经在第 1 行使用了`queue`with`queue.join`中的数据。另一方面，这种方法会受到回滚操作的影响。例如，当 sql 返回错误时，您可能无法重新填充`queue`.

# java - 为什么数据库连接在几次后失败

> ID：13421716
> 
> 赞同：1
> 
> 时间：2012-11-16T17:42:39.783
> 
> 标签：java, mysql, jdbc, database-connection

我正在使用 MYSQL 数据库和基本的 JDBC 连接池来连接数据库。应用程序部署在 tomcat 服务器中。几次操作后，数据库连接为空。

任何人都可以让我知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:47:33.923

这可能有几个不同的原因：

1.  当你用完它们时不要调用`close()`你的资源。`Connection`这可能会导致你的连接池在所有的`Connection`s 都被分发并且没有关闭之后被耗尽。
2.  不止一次调用`close()`你的资源。`Connection`关闭 a`Connection`会将其返回到池中，以便另一个线程可以获取它。如果你`close()`第二次调用，你现在已经为另一个线程关闭了它。
3.  您的代码实际上是将您的`Connection`实例设置到`null`某个地方。
4.  您让`Connection`资源处于打开和空闲状态的时间过长，并且对您来说超时了。如果您的代码在查询之间有一些长时间运行的操作，请考虑在查询之间关闭`Connection`并获取一个新的。
5.  数据库服务器出于某种原因关闭了您的连接，而您的连接池对此一无所知。为了缓解这种情况，您可以将连接池配置为在借用时进行测试。这基本上会在连接上发出一个测试查询，以确保它在将其交给您的应用程序之前是活动的。注意：那里有一些开销。

# c++ - C/C++ 函数中的引用、指针或值语义

> ID：13421731
> 
> 赞同：1
> 
> 时间：2012-11-16T17:43:35.670
> 
> 标签：c++, pointers, reference

我有简单的代码来修剪字符串

```
std::string TrimEnd(const std::string& str, const std::string& chars)
{
    std::string trimmed = str;
    int index = 0;
    if((index = trimmed.find_last_not_of(chars)) < trimmed.length() - 1)
            trimmed.erase(index + 1);
    return trimmed;
} 
```

我使用参数引用和函数返回值。有没有偏好使用指针来代替？在我的情况下，将返回修剪后的字符串的副本。在某些函数中，会返回 const 引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:46:24.987

不，不是一般意义上的。如果您需要能够传入一个 NULL 化的指针，或者需要对参数进行一些指针运算，请传递一个指针。否则，默认传递引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:48:57.370

对于 C++ 风格，您按值返回。通过引用/常量引用传递。（ POD 的值） *永远不会*通过引用返回，除非它引用静态存储，或者如果您想公开对它们的访问权限（通常 const & 将用于此）.. 是的，按值返回会生成另一个副本，但是较旧的 c++ 标准允许编译器对其进行优化。并且新的 c++ 11 标准允许移动构造函数更棒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T17:49:42.700

如果您返回一个新字符串，则没有理由通过引用传递，并且您当然不想返回对的引用，`trimmed`因为它的作用域就是`TrimEnd`方法。

除非您尝试优化代码，否则我会按值传递。如果您正在编写自己的字符串类（或类似的东西）并且性能是您的首要任务，那么我会通过参考来做所有事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:52:43.910

在这里，由于无论如何您都在制作第一个参数的副本，您不妨按值传递它：

```
std::string TrimEnd(std::string str, const std::string& chars)
{
    int index = 0;
    if((index = str.find_last_not_of(chars)) < str.length() - 1)
        str.erase(index + 1);
    return str;
} 
```

一般来说：

*   通过`const`引用传递对象类型。

*   当您需要可变副本时，按值传递原语（例如，`int`）以及对象类型。

*   当指针可能为空时，通过指针传递参数。

*   按值或智能指针返回（例如，`unique_ptr`）；原始指针的所有权不明确。

# python - SingPath 和 Python 帮助！-“创建问题集模式”中的无限循环错误

> ID：13421732
> 
> 赞同：1
> 
> 时间：2012-11-16T17:43:43.220
> 
> 标签：python, python-3.x

SingPath 是一个交互式问题集网站，可跟踪您在多种编程语言中的进度。不幸的是，它有一些错误。最大的错误是：

> 您的代码返回时间过长。您的解决方案可能陷入无限循环。请再试一次。

运行问题集代码时出现多次。现在，在回答问题集问题时，要纠正错误，您只需重新运行代码即可。

**但是**，在问题创建者中，它会产生一个巨大的问题。本质上，您可以运行代码，直到它也可以在创建者中运行，这不是测试的问题。问题源于提交，`problem/solution`因为提交按钮会重新运行代码。这意味着您需要获得几乎不可能获得的两个连续正确答案（我已经尝试了一个小时）。需要在问题集中继续*创建*问题这一事实对错误的创建者来说是非常糟糕的。

所以（最后）这是我的问题，我怎样才能让下面的代码在没有这个错误的情况下在创建者中运行？

代码：

```
import string
import random

# Takes a blank string then replaces it with 3 random letters/numbers.

def string3(s1):    
    s2 = ''
    def randstring (size = 3, chars = string.ascii_lowercase + string.digits):
       a = ''.join(random.choice(chars) for x in range(size))
       return a

    ''' If the string brought in isnot equal to the string generated keep
        rerunning the random string generator '''

    while s1 != s2:    
        s2 = randstring()

    return 'True' 
```

* * *

示例函数调用：

```
>>> string3('abc')
'True'
>>> string3('a2d')
'True'
>>> string3('234')
'True' 
```

代码的作用：

无限猴子定理指出

> 如果有足够的时间，假设一只猴子随机打字，作为其输出的一部分，几乎肯定会产生莎士比亚的所有戏剧。

创建一个函数，该函数`string3`将随机生成 3 个字符的字符串，直到这些字符等于从函数接收到的字符串。提示：搜索随机字符串生成器以供参考。字符串中的所有字符都是小写的。

我是一名初学者程序员，我希望能发表一些评论，以便我可以理解更复杂的解决方案，尽管我将不胜感激任何帮助/建议！

另外，我已经通知了 SingPath 的支持人员该错误，但我想在今天尽可能多地练习！如果不可能在客户端修复错误，我完全理解！祝你好运！

**重要编辑**

我忘了提到无论代码中的循环如何，都会发生此错误。虽然我的程序对字符的不断随机分配非常紧张，但我知道这不是问题（它可能是一个问题，但不是问题 XD）。如果您不相信我，请尝试在这里制造问题：http: [//singpath.appspot.com/](http://singpath.appspot.com/)

即使是简单的函数声明和返回，例如：

```
def add_one(n):
       return n+1 
```

可能导致循环错误！如果我可以做任何事情（例外声明？）请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:06:13.643

您的代码可能很慢，但无论您做什么都会看到该错误。我刚刚登录那里并开始沿着 Python 路径走下去，但在计算密集度不高的情况下遇到了同样的错误：

```
oops=317 
```

该网站似乎正在发生的事情是，它被太多的流量猛烈抨击。（过去，我会说它们被斜线点缀，但我想说它们被堆栈溢出更正确。;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T16:31:32.427

From the original question (posted as an answer):

> After multiple attempts of letting the program run and then submitting I finally got lucky and it submitted my problem "Sir Monkey Shakespeare". Crappy name for a problem I know but it finally got the job done. If you are having the same bug try to remove any private tests as it will provide correct answers almost every time due to the lack of having to run the code again.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T18:02:45.170

这不是错误或错误，而是设计决策。您所做的计算量非常大（请参阅下面的说明），并且该网站的硬件预算可能有限。如果他们允许每个学生按照自己的意愿运行错误的无限代码，那么业务将很快陷入困境。所以他们决定你的代码应该被杀死。

有 27^n 个可能的 n 字符单词由（英语）拉丁字母的 27 个小写字符组成。这是要尝试的大量事情，即使 n 只有 3。此外，您正在随机生成字符串，因此不可避免地会重复一些内容，您可能需要生成超过 27^n 个字符串才能找到那个你正在寻找。

这是一个重要的教训——把需要一年才能完成的东西变白很容易。

# javascript - 在 JavaScript 中获取滚动条

> ID：13421744
> 
> 赞同：-3
> 
> 时间：2012-11-16T17:44:35.317
> 
> 标签：javascript, scrollbar

我想在 JavaScript 中的数据上创建滚动条。我从 JSON 获取数据，如下所示：

```
$.getJSON(url, function(json) {
try {
var abc = json.abc;
 for ( var i = 0; i < abc .length; i++) {
   abcHtml = abcHtml + abc [i].value + "<br/>";
  } 
```

要应用滚动条，我使用`overflow:scroll;`

但它显示一个正常的弹出菜单，而不是滚动条。但是，每当我打开 Firebug 选项卡或移动 Firebug 选项卡时，我都会在弹出菜单中看到列表的滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:57:24.133

不知道你的意思是你得到一个正常的弹出菜单。

abcHtml 是一个 div 吗？

```
var container = document.createElement('div');
container.style.overflowY = 'scroll';
container.style.height = '300px';

...
{   var abc = json.abc;
    var out = '';
    for (var i = 0; i < abc.length; i++) {
        out += abc[i].value + "<br/>";
    }
    container.innerHTML = out;
} 
```

这会给你一个在内容大小> 300px 后滚动的 div

# objective-c - 左侧实现不完整

> ID：13421747
> 
> 赞同：1
> 
> 时间：2012-11-16T17:44:40.283
> 
> 标签：objective-c, ios, xcode

我的实现页面上有不完整的实现警告（相同的功能在 right.m 文件中）：

左.m 文件

```
#import "left.h"
#import "shareL.h"

@interface left ()

@end

@implementation left    // Incomplete implementation

- (IBAction)shareL {

    shareL *screen = [[shareL alloc] initWithNibName:nil bundle :nil];
    screen.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:screen animated:YES];

}

- (IBAction)backButton {

    [self dismissModalViewControllerAnimated:YES];

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

为什么执行不完整？在右侧，我有相同的功能，一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:10:13.170

通过打开不完整的实现警告，您可以准确找出您可能缺少哪些方法的实现。下面是一个截图，说明了问题可能是什么。在我的例子中，我注释掉了一个名为 fadeAction 的方法

![在此处输入图像描述](../Images/030c21b75e4a7e60d656fa274279aa71.png)

# javascript - Twitter Bootstrap / jQuery - 如何暂时防止模式被关闭？

> ID：13421750
> 
> 赞同：35
> 
> 时间：2012-11-16T17:44:41.330
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog, twitter-bootstrap-2

我正在使用 Twitter Bootstrap 模态，默认选项可以单击背景或按 [Esc] 关闭模态。

但是，当我在模态中启动 ajax 操作时，我想禁止模态以任何方式关闭。所以我禁用按钮并隐藏模式的关闭按钮，但我不知道如何禁用背景和 [Esc] 键。

我试过：

```
$('#myModal').modal({
    backdrop: 'static',
    keyboard: false
}); 
```

但这似乎并不能即时奏效。

ajax 操作完成后，我还需要重新启用背景和键盘。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T19:05:54.943

**注意**：此解决方案针对[twitter bootstrap 2.x](http://getbootstrap.com/2.3.2/javascript.html#modals)！根据引导程序 3，请参阅[此答案（如下）以了解差异。](https://stackoverflow.com/a/20183890/1407478)

* * *

*在不*修改原始源的情况下扩展引导模式功能。

感谢@David 和他在[How to Extend Twitter Bootstrap Plugin 中](https://stackoverflow.com/questions/9137311/how-to-extend-twitter-bootstrap-plugin/12689534#12689534)的建议，我终于让它工作了。这是他的解决方案的略微修改版本，添加了模态“锁定”。我将其作为附加答案发布，因为我认为这可能是其他像我一样在这个问题上苦苦挣扎的人的起点。

```
// save the original function object
var _superModal = $.fn.modal;

// add locked as a new option
$.extend( _superModal.defaults, {
    locked: false
});

// create a new constructor
var Modal = function(element, options) {
    _superModal.Constructor.apply( this, arguments )
}

// extend prototype and add a super function
Modal.prototype = $.extend({}, _superModal.Constructor.prototype, {
    constructor: Modal

    , _super: function() {
        var args = $.makeArray(arguments)
        // call bootstrap core
        _superModal.Constructor.prototype[args.shift()].apply(this, args)
    }

    , lock : function() {
        this.options.locked = true
    }

    , unlock : function() {
        this.options.locked = false
    }

    , hide: function() {
        if (this.options.locked) return
        this._super('hide')
    }
});

// override the old initialization with the new constructor
$.fn.modal = $.extend(function(option) {
    var args = $.makeArray(arguments),
    option = args.shift()

    // this is executed everytime element.modal() is called
    return this.each(function() {
        var $this = $(this)
        var data = $this.data('modal'),
            options = $.extend({}, _superModal.defaults, $this.data(), typeof option == 'object' && option)

        if (!data) {
            $this.data('modal', (data = new Modal(this, options)))
        }
        if (typeof option == 'string') {
            data[option].apply( data, args )
        }
    });
}, $.fn.modal); 
```

使用这种技术，不需要更改 bootstrap.js，并且可以更轻松地在 bootstrap 项目之间共享相同的功能。此方法应适用于所有其他引导插件。到目前为止只尝试过按钮，但我不知道为什么不应该这样做。

见工作小提琴-> **[http://jsfiddle.net/Sz7ZS/](http://jsfiddle.net/Sz7ZS/)**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-24T21:10:37.953

有一种更简单的方法可以做到这一点。[这个](https://github.com/twbs/bootstrap/issues/1202)引导拉取请求解释了更多。该解决方案禁用所有关闭模式的方法（键盘、鼠标单击、关闭按钮）。

禁用关闭模式所需要做的就是：

```
$('#myModal').data('bs.modal').isShown = false; 
```

要再次启用关闭：

```
$('#myModal').data('bs.modal').isShown = true; 
```

**例子**

下面是一些与 jQuery get 结合使用的示例代码：

```
// disable closing the modal
$('#myModal').data('bs.modal').isShown = false;

// Send an HTTP GET request to the server - replace this with getJSON, post or ajax as needed
$.get( "ajax/test.html", function( data ) {
  // enable closing the modal
  $('#myModal').data('bs.modal').isShown = true;

  // Do something with the data
  $( ".result" ).html( data );
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-17T16:54:10.403

您不是唯一缺少该功能的人。我觉得bootstrap有时候太“简约”了，后面的人有很多想法应该在“实现层”做，但是当bootstrap jQuery插件本身无法实现时，它就没有用了！

**您必须自己实现该功能，如下所示**：

在`bootstrap.js`v2.1.1 中，模式从第 61 行开始。

在 中`Modal.prototype`，添加两个函数，`lock`和`unlock`，所以看起来是这样的（我这里只显示开头`modal.prototype`，因为代码太多）

```
 Modal.prototype = {

      constructor: Modal

      //add this function
    , lock: function () {
        this.options.locked = true
      }

      //add this function
    , unlock: function () {
        this.options.locked = false
      }

    , toggle: function () {
    ... 
    ... 
```

然后，同样在 Modal.prototype 中，找到 function `hide`，并添加一行，使其看起来像这样（同样，只显示了 hide 的顶部）

```
, hide: function (e) {
    e && e.preventDefault()

    var that = this

    //add this line
    if (that.options.locked) return

    e = $.Event('hide')
    ...
    ... 
```

最后，更改`$.fn.modal.defaults`为：

```
 $.fn.modal.defaults = {
      backdrop: true
    , keyboard: true
    , show: true
    , locked: false //this line is added
  } 
```

现在，您的引导模式中具有即时锁定/解锁功能，可防止用户在关键时刻关闭模式。

**示例**：

[这是来自http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)的“现场演示”的修改版本

```
<!-- Button to trigger modal -->
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary" onclick="$('#myModal').modal('lock');">lock</button>
    <button class="btn btn-primary" onclick="$('#myModal').modal('unlock');">unLock</button>
  </div>
</div>
<script type="text/javascript"> 
```

我插入了两个按钮，“锁定”和“解锁” - 单击时，它们将模式设置为锁定模式或正常模式（初始化设置）

**编辑**，在您的情况下，您只需在执行 ajax 时调用 lock/onlock ：

```
$("myModal").modal('lock');
$.ajax({
    url: url,
    ...
    ...
    , success(html) {
       ...
       ...
       $("#myModal").modal('unlock');
    }
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-09-16T11:01:32.257

您可以创建一个变量 isBlocked ，您可以在将 AJAX 调用设置为 true 时设置该变量，然后您可以通过以下方式在 bootsrap modal hide 事件中检查它：

```
$('#myModal').on('hide.bs.modal', function (e) {
      //Prevent modal from closing is isBlocked is true
      if(isBlocked) return e.preventDefault();
}) 
```

我认为这种方式比扩展 Bootsrap 更容易，希望它可以帮助某人：D

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-11-25T02:43:42.680

感谢@davidkonrad 在这方面所做的工作。我也试图实现这一点，似乎事情已经随着 bootstrap 3 而改变了。现在而不是：

`_superModal.defaults`

它现在附加到构造函数，所以你必须做

`_superModal.Constructor.DEFAULTS`

构造函数也发生了变化，这意味着我必须复制并修改它，这不太理想。相反，我提出了以下代码，它可以工作并且不会复制构造函数，并且如果引导程序发生变化，应该更加万无一失。试试吧：

```
// save the original function object
var _superModal = $.fn.modal;

// add locked as a new option
$.extend( _superModal.Constructor.DEFAULTS, {
    locked: false
});

// capture the original hide
var _hide = _superModal.Constructor.prototype.hide;
// console.log('HIDE:', _hide);

// add the lock, unlock and override the hide of modal
$.extend(_superModal.Constructor.prototype, {
    // locks the dialog so that it cannot be hidden
    lock: function() {
        // console.log('lock called');
        // console.log('OPTIONS',this.options);
        this.options.locked = true;
    }
    // unlocks the dialog so that it can be hidden by 'esc' or clicking on the backdrop (if not static)
    ,unlock: function() {
        // console.log('unlock called');
        this.options.locked = false;
    }
    // override the original hide so that the original is only called if the modal is unlocked
    ,hide: function() {
        // console.log('hide called');
        if (this.options.locked) return;

        _hide.apply(this, arguments);
    }
}); 
```

所以为了锁定模态：

`$('#dlg').modal('lock');`

并解锁：

`$('#dlg').modal('unlock');`

耶！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-16T07:33:29.993

我更新了这个很棒的脚本以使用 Bootstrap 4。

```
var _superModal = $.fn.modal;

    $.extend(_superModal.Constructor.Default, {
        locked: false
    });

    var _hide = _superModal.Constructor.prototype.hide;

    $.extend(_superModal.Constructor.prototype, {
        lock: function () {
            this._config.locked = true;
        },
        unlock: function () {
            this._config.locked = false;
        },
        hide: function () {
            if (this._config.locked) return;

            _hide.apply(this, arguments);
        }
    }); 
```

# java - 搜索Java中的空指针异常

> ID：13421755
> 
> 赞同：1
> 
> 时间：2012-11-16T17:45:04.567
> 
> 标签：java, eclipse

```
//TestEmployeesProgram driver with menu & object array.
import java.util.*;
public class TestEmployeesProgram {

public static Scanner console = new Scanner(System.in);

public static void main(String[] args)
{
    final int MAX = 7;

    Employee employee[] = new Employee[MAX];

    int choice,k;
    String name;
    boolean notFound;

    employee[1] = new Manager("Joe Bloggs","gdr",4,32.5);
    employee[2] = new Admin("Mary Jennings","nnv",35.3,88.5,34.3);
    employee[3] = new Clerk("Brian Jones","bbl",42.4,78.5,23.5,45.3);
    employee[4] = new Manager("John Bloggs","gvr",5,33.5);
    employee[5] = new Admin("Bridget Jennings","nvv",45.3,98.5,36.3);
    employee[6] = new Clerk("Jack Jones","bbb",43.4,78.5,23.5,47.3);

    //Initial Read
    choice = showMenu();

    //Continue Until 4/Exit
    while (choice != MAX)
    {
        switch (choice)
        {
        case 1://Manager

            System.out.println();
            System.out.printf("%s %-16s %-10s %6s","Name","Id","Hours Worked","Pay");
            System.out.println("\n==================================================");

            for (k = 0; k < MAX; ++k)
            {
                if (employee[k] instanceof Manager){ //use of string method instance of.

                    System.out.println(employee[k].toString());
                }
            }
            break;

        case 2://Administration

            System.out.println();
            System.out.printf("%s %-16s %-10s %6s %-19s","Name","Id","Hours Worked","Pay","Admin Quota");
            System.out.println("\n==================================================");

            for (k = 0; k < MAX; ++k)
            {
                if (employee[k] instanceof Admin){
                System.out.println(employee[k].toString());

                }
            }
            break;

        case 3://Clerk

            System.out.println();
            System.out.printf("%s %-16s %-10s %6s %-19s","Name","Id","Hours Worked","Pay","Admin Quota","Units Sold");
            System.out.println("\n==================================================");

            for (k = 0; k < MAX; ++k)
            {
                if (employee[k] instanceof Clerk){
                System.out.println(employee[k].toString());
                }
            }
            break; 
```

switch 语句中的这种情况给了我`NullPointerException`. 我已经检查了所有内容以查看它是否已正确初始化，但似乎无法找到问题所在。此外，如果未找到名称，搜索功能会绕过名称搜索以获取默认消息。一些指导将不胜感激。

```
 case 4://Name search

            System.out.print("Enter employee name: ");
            name = console.nextLine();

            k = -1;
            notFound = true;

            while ((k < MAX-1) && (notFound))
            {
                ++k;
                if (name == employee[k].getName()){

                    System.out.println();
                    System.out.printf("%s %-16s %-10s %6s %-19s","Name","Id","Hours Worked","Pay","Admin Quota","Units Sold");
                    System.out.println("\n==================================================");

                    System.out.println(employee[k].toString());
                    System.out.println();
                    notFound = false;
                }

            }//end of case 4 while.
             if (notFound){
                System.out.println("Employee name not found\n");
            }
            break;

        case 7://exit
            System.out.println("Program exiting...");
            System.exit(0);

        default:
            System.out.println("Invalid menu choice 1..3 of 7 to Exit");    
        }//end of switch

        //sub read 
        choice = showMenu();

    }//end of while 
}//end of main

//Menu method for employee selection.
public static int showMenu()
{

    int choice;
    System.out.println();

    System.out.println("Employee Program Menu");

    System.out.println("1.Show Manager pay details ");
    System.out.println("2.Show Admin pay details ");
    System.out.println("3.Show Clerk pay details ");
    System.out.println("4.Search by employee name ");
    System.out.println("7.Exit");

    System.out.print("Enter option: ");
    choice = console.nextInt();

    return choice;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:49:10.410

您没有在`0th`索引处设置任何值，因此`if (name == employee[0].getName()){}`在尝试访问时生成异常`employee[0].getName()`。

您应该将值设置为索引 0，因为数组以索引 0 开始并以大小 -1 结束...

```
employee[0] = new Manager("Joe Bloggs","gdr",4,32.5);
employee[1] = new Admin("Mary Jennings","nnv",35.3,88.5,34.3);
...
employee[6] = new Clerk("Jack Jones","bbb",43.4,78.5,23.5,47.3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:51:28.673

在 Java 中可能会变形，但是，您是否忘记将新 Employee 设置为 employee[0] ？

因为在案例 4 中，您从 k 等于 -1 开始，然后将其递增到 0，但是您在employee[0] 处根本没有 Employee....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:55:49.427

*编辑*再看一遍后，你到处都这样做。因此，请检查您的代码，并确保您的数组已正确初始化。您也可以尝试为您的 switch 语句使用命名常量，我发现它们有助于提高可读性（如果您是像我这样的学生，不会因为幻数而失去分数）。

```
 final int MANAGER = 1;

    final int CLERK = 2; 

    switch(choice)
    {
          case MANAGER: foo;
              break;
           case CLERK: foo;
              break;
    } 
```

这是您的问题代码。当控制流到达 if 语句时，k 等于 0，并且你的数组中没有第 0 个元素，所以 java 抛出空指针异常。

另外为了将来参考，请尝试查看编译器给您的实际错误。编译器会为您提供一个行号，这应该可以让您很容易地追踪错误。当涉及到空指针时，Java 对你来说真的很好，c++ 将继续运行，使用它在错误位置找到的任何值。

```
 k = -1;
        notFound = true;

        while ((k < MAX-1) && (notFound))
        {
            ++k;
            if (name == employee[k].getName()) 
```

# ruby-on-rails-3 - 卡住 Piggybak 安装

> ID：13421760
> 
> 赞同：0
> 
> 时间：2012-11-16T17:45:34.680
> 
> 标签：ruby-on-rails-3, rails-engines

我遵循了基本应用程序和安装文档。我已经安装并捆绑了 Devise、Rails_Admin 和 Cancan。我想我也遵循了那些安装文档。我已经设置了管理员，我可以添加用户。但是当我进行 piggybak 安装时，我得到一个错误。我已经撤回了我的回购并做了三遍，但仍然无法通过这里。任何成功安装 piggybak 的人的帮助。

> $ piggybak安装
> 
> 在 GEMFILE 中添加对设计的引用
> 
> 插入 GEMFILE

/home/jason/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/actions/inject_into_file.rb:99:in `binread'：没有这样的文件或目录 - /家/杰森/工作/kpipe/GEMFILE (Errno::ENOENT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:10:11.603

在您的主项目中创建一个临时链接以指向您的 Gemfile

```
ln -s Gemfile GEMFILE 
```

然后运行 ​​piggybak 安装。

假设这是piggybak中的错误，也许他们在大小写无关紧要的Windows机器上开发它。

# wcf - 在远程计算机上找不到 MSMQ 消息

> ID：13421762
> 
> 赞同：1
> 
> 时间：2012-11-16T17:45:46.580
> 
> 标签：wcf, msmq

我有一个 WCF 服务，它设置为使用 MSMQ 传输到另一台机器上的服务。我们正在尝试将客户端移动到另一台机器上，但它不起作用。启用 MSMQ.End2End 事件日志给我们

```
Message with ID {6940f8fa-3d31-4db0-ae2b-59bc98c99f2c}\25321 was sent to queue DIRECT=OS:iisapp1-vvpm\private$\TransactionalEmailService/TransactionalEmail.Service.TransactionalEmailService.svc 
```

这让我认为它在我们的机器上正常工作，但我们在目标机器上找不到它的任何痕迹。服务没有被调用，我们在死信队列（或我们能想到的任何其他地方）中找不到消息。

此外，直接从我的机器上的 Visual Studio 运行代码会使其工作。

将接收队列更改为 DEV 机器也会导致代码工作，这让我进一步认为这是接收机器的问题。（我只是不知道是什么）

**更新 1：** 我回到它并注意到我试图在事务死信队列中发送的所有消息。错误消息是“到达队列的时间已过”。查看连接状态，它处于非活动状态，发送另一条消息不会导致它变为连接状态。我重新启动机器，它再次“连接”。我尝试再次发送消息，并查看队列状态。有 12 条消息，所有消息都未确认（0 条未处理）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:09:11.117

因此，一旦端点机器重新启动，它就会再次发生。我遇到了这篇文章，这是真正的解决方案：

[http://blogs.msdn.com/b/johnbreakwell/archive/2007/02/06/msmq-prefers-to-be-unique.aspx](http://blogs.msdn.com/b/johnbreakwell/archive/2007/02/06/msmq-prefers-to-be-unique.aspx)

（如果链接消失：）

看起来 MSMQ 中有一个 ID 作为消息的一部分发送。远程主机使用该 ID 作为缓存中的键来确定将 ack 发送回给谁。如果您克隆一台机器，它会在注册表中为该 ID 获取相同的值，这使得另一台机器不知道将其发回给谁。所以它会把它发送到错误的机器上，而错误的机器会丢弃它，而另一台机器会被一堆它一直试图发送的消息卡住。这也解释了为什么它一天才开始工作......缓存过期并且“正确”的机器被放入作为端点。

在克隆的机器上重新安装 MSMQ 可以解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:04:34.923

我真的不确定这里可能是这种情况（我在 MSMQ 的上下文中没有使用 WCF 的任何经验），但是您所说的这种行为的一个更常见的原因是缺少强制性使用 MessageQueue 构造函数（如 'FormatName:DIRECT=...'）时，队列名称中的 FormatName 上的驼峰式大小写，或以某种方式错误地获取名称。消息中的队列名称与 svc 结尾看起来有点奇怪，但这可能只是 WCF 的事情吗？希望这至少有助于让您朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:53:59.157

不知道在这里说什么，但它现在有效。阅读一些内容帮助我了解了队列的状态（单击功能/消息队列下的传出队列）。从那里我发现了这篇带有修补程序的知识库文章：http: [//support.microsoft.com/kb/976438](http://support.microsoft.com/kb/976438)它似乎并不适用，但人们遇到的症状都是一样的。我们的人试图安装它，但它失败了，他们没有重新启动......但由于某种原因，消息队列开始工作。

如果有人提出了一些见解，我会很乐意支持他们或给他们赏金（如果足够快的话）。但我现在只接受这个作为答案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T05:47:22.150

这通常是由远程队列的权限引起的，通常的情况是，如果您使用的是私有队列并且由您的 wcf 服务远程访问。

尝试使用公共队列。

# cakephp - 如何为 PHP IDE Netbeans 7.2 安装 CakePHP 插件

> ID：13421766
> 
> 赞同：0
> 
> 时间：2012-11-16T17:46:01.030
> 
> 标签：cakephp, plugins, netbeans, netbeans-7.2

我有 NetBeans 7.2 的 PHP IDE 版本并已成功安装插件（它在插件列表中显示为启用并出现在项目属性中）。但是，在下载页面 (http://plugins.netbeans.org/plugin/44579) 中，我看不到选择框架的地方。创建新 IDE 时没有第 4 步，只有 1、2 和 3 步……所以显然缺少了一些东西。是否有我需要的依赖插件，或者我需要完整的、巨大的 NetBeans 版本？

我正在使用 Windows 7、PHP 5.3、CakePHP 2.1.2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:50:53.347

该插件工作正常，但是它要求在与 CakePHP lib 文件夹相同的目录中的项目文件夹中只有 1 个应用程序。NetBeans 项目文件夹不是包含 Controllers 和 Views 文件夹的“app”文件夹，而是必须是包含 app 和 lib 文件夹的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T09:13:44.277

只需转到 NetBeans 的主菜单`Tools > Plugins > Available Plugins`。选择你想要的插件并安装它。

# c++ - 多线程从磁盘读取？

> ID：13421767
> 
> 赞同：17
> 
> 时间：2012-11-16T17:46:07.517
> 
> 标签：c++, multithreading, io, openmp

假设我需要从磁盘上保存的同一个文件中读取许多不同的、独立的数据块。

这个上传可以多线程吗？

相关：同一处理器上的所有线程是否使用相同的 IO 设备从磁盘读取？在这种情况下，多线程根本不会加快上传速度——线程只会排队等待。

（我目前正在使用 OpenMP 进行多线程处理。）

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-16T18:27:30.643

对的，这是可能的。然而：

> 同一处理器上的所有线程是否使用相同的 IO 设备从磁盘读取？

是的。磁盘上的读磁头。例如，尝试并行而不是串行复制两个文件。并行需要更长的时间，因为操作系统使用调度算法来确保两个线程/进程之间的 IO 速率是“公平的”或相等的。正因为如此，读磁头会在磁盘的不同部分之间来回跳跃，从而大大减慢了处理速度。与查找数据的时间相比，实际读取数据的时间非常短，而且当您一次读取磁盘的两个不同部分时，您大部分时间都在查找。

请注意，所有这些都假设您使用的是硬盘。~~如果您使用的是 SSD，并行运行速度不会变慢，但也不会变快。~~编辑：根据评论，SSD 的并行实际上更快。使用 RAID，情况会变得更加复杂，并且（显然）取决于您使用的 RAID 类型。

这就是它的样子（我将圆形磁盘展开成一个矩形，因为 ascii 圆圈很难，并简化了数据布局以使其更易于阅读）：

假设文件被盘片上的一些空间分隔，如下所示：

```
|         | 
```

系列阅读看起来像（`*`表示阅读）

```
space ----->
|        *|  t
|        *|  i
|        *|  m
|        *|  e
|        *|  |
|       / |  |
|     /   |  |
|   /     |  V
|  /      |
|*        |
|*        |
|*        |
|*        | 
```

虽然并行读取看起来像

```
|       \ |
|        *|
|       / |
|     /   |
|   /     |
|  /      |
|*        |
|  \      |
|    \    |
|     \   |
|       \ |
|        *|
|       / |
|     /   |
|   /     |
|  /      |
|*        |
|  \      |
|    \    |
|     \   |
|       \ |
|        *| 
```

ETC

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T18:51:06.660

如果您在 Windows 上执行此操作，您可能需要查看[ReadFileScatter](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365469%28v=vs.85%29.aspx)函数。它将允许您在单个异步调用中从文件中读取多个段。这将允许操作系统更好地控制文件 IO 瓶颈，并有望优化读取。

Windows 上匹配的写入调用将是[WriteFileGather](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365749%28v=vs.85%29.aspx)。

对于 UNIX，您正在使用[readv](http://pubs.opengroup.org/onlinepubs/009695399/functions/readv.html)和[writev](http://pubs.opengroup.org/onlinepubs/009695399/functions/writev.html)来做同样的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T19:13:18.957

如其他答案中所述，并行读取可能会更慢，具体取决于文件物理存储在磁盘上的方式。因此，如果头部必须移动很长一段距离，则可能会导致实际减速。话虽如此，但有些存储系统可以有效地支持多个同时读取和写入。我能想象的最简单的是SSD磁盘。我本人曾使用 IBM 的出色存储系统，它可以同时执行读取和写入而不会减慢速度。因此，让我们假设您有这样一个文件系统和物理存储，在并行读取时不会减慢速度。

在这种情况下，并行读取是非常合乎逻辑的。一般来说，有两种方法可以实现：

1.  如果您想使用标准 C/C++ 库来执行 IO，那么您唯一的选择是为每个线程保留一个打开的文件句柄（描述符）。这是因为文件指针（指向从文件中读取或写入的位置）按句柄保存。因此，如果您尝试从同一个文件句柄同时读取，您将无法知道您实际阅读的内容。
2.  使用平台特定的 API 来执行异步 (OVERLAPPED) IO。在 Windows 上，您将 WinAPI 函数与所谓的 OVERLAPPED IO 一起使用。在 Unix/Linux 上，您有 posix AIO，尽管我知道不鼓励使用它，尽管我没有看到任何令人满意的解释来说明为什么会这样。

我自己在 linux 和 windows 上实现了 fd/thread 方法，在 windows 上实现了 OVERLAPPED 方法。两者都工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T17:50:32.377

您将无法加快**读取**磁盘的过程。如果您在写作的同时进行计算，并行化会有所帮助。但是纯粹的写入将受到处理器和硬盘驱动器之间的通道带宽的限制，更值得注意的是，受到硬盘驱动器本身的限制（我的硬盘驱动器为 30 MB/s，我听说过 120 MB/s 以上的 raid 设置网络，但不要依赖它）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T18:20:47.983

如果您使用标准系统功能，则从磁盘进行多次读取应该是线程安全的，如果您使用标准系统功能，则无需手动锁定它，但以只读方式打开文件。（否则你会得到文件访问错误。）

顺便说一句，您实际上不需要从磁盘读取，操作系统将决定它从哪里为您服务。它通常从内存中预取读取和服务。

# sql - 未使用 .build 或 update_attributes 将属性保存到数据库

> ID：13421774
> 
> 赞同：0
> 
> 时间：2012-11-16T17:46:37.783
> 
> 标签：sql, ruby-on-rails

我可以在帖子消息中看到所有正确的参数，但它们没有被保存到数据库中。这是控制器代码：

```
 def create
    @ask = current_user.asks.build(params[:ask])
    @ask.save
  end

def update
    @ask = current_user.asks.find_by_id(params[:id])
    next_step = @ask.check_change(params[:ask])
    if next_step == "ask2"
      @ask.update_attributes(params[:ask])
      ask2
      flash[:notice] = "Description added"
    elsif next_step == "ask3"
      @ask.update_attributes(params[:ask])
      ask3
      flash[:notice] = "Helper and public added"
    elsif next_step == "ask4"
      @ask.update_attributes(params[:ask])
      ask4
      flash[:notice] = "Category added"
    else
      @ask.update_attributes(params[:ask])
      flash[:notice] = "Not sure what to do"
    end 
```

这是SQL：

```
Started POST "/asks" for 127.0.0.1 at 2012-11-16 12:39:22 -0500
Processing by AsksController#create as JS
  Parameters: {"utf8"=>"√", "authenticity_token"=>"n10gHRjvRpu4z40z+jDSTyOdNJrIm
NQdkPgNeS3XM14=", "ask"=>{"description"=>"new ask description is going here"}, "
commit"=>"Add a need"}
  ←[1m←[35mUser Load (0.0ms)←[0m  SELECT "users".* FROM "users" WHERE "users"."i
d" = ? LIMIT 1  [["id", 12]]
  ←[1m←[36m (0.0ms)←[0m  ←[1mbegin transaction←[0m
  ←[1m←[35mSQL (1.0ms)←[0m  INSERT INTO "asks" ("category", "created_at", "date_
done", "date_followed_up", "description", "done", "followed_up", "helper", "publ
ic", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["categ
ory", nil], ["created_at", Fri, 16 Nov 2012 17:39:22 UTC +00:00], ["date_done",
nil], ["date_followed_up", nil], ["description", nil], ["done", false], ["follow
ed_up", false], ["helper", nil], ["public", false], ["updated_at", Fri, 16 Nov 2
012 17:39:22 UTC +00:00], ["user_id", 12]]
  ←[1m←[36m (7.0ms)←[0m  ←[1mcommit transaction←[0m
  Rendered shared/_error_messages.html.erb (0.0ms)
  Rendered asks/_ask2.html.erb (5.0ms)
  Rendered layouts/_debug.html.erb (1.0ms)
  Rendered asks/create.js.erb (10.0ms)
Completed 200 OK in 38ms (Views: 25.0ms | ActiveRecord: 8.0ms) 
```

我确定我在控制器中做错了什么，但我尝试了许多排列但无法弄清楚。

# android - 如何缩小使用 Netbeans 开发的 sencha touch 2.1 + cordova/phonegap 2.2.0 应用程序？

> ID：13421776
> 
> 赞同：0
> 
> 时间：2012-11-16T17:46:52.287
> 
> 标签：android, cordova, netbeans, sencha-touch, apk

在开发基于 sencha touch 2.1 和 cordova/phonegap 2.2.0 的应用程序时，我注意到 netbeans 的一个奇怪行为。

当我的应用程序变大时，我开始使用 sencha cmd (3.0.0.250) 来缩小（生产构建）我的 js-css-html 代码。所以我创建了一个批处理文件并将其添加到 build.xml（预编译）中。我还编辑了活动类以指向 sencha cmd 构建输出。所以在`Assets/www`路径中有我的“可读”js、html、...代码以及缩小的代码。

现在，当我构建应用程序时，apk 文件最大为 8mb。

但是当我在构建之前删除“可读”的 js-html-css 代码（也不使用批处理脚本）时，我的 apk 的大小只有 600kb。

在这两种情况下，性能是相同的。

这是 Netbeans 的正常行为吗？如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:22:54.977

现在我理解了这种行为。assets/www 中的所有文件都放入 apk 中。

我的项目包括所有（sencha 的东西，phonegap 的东西）。我认为将它们分开更好。现在我有一个项目，其中包含 js/html/css 的东西——例如使用 chrome 进行快速调试。对于每个目标平台，我都有一个自己的项目（用于构建）。例如 android-10、android-15、ios ...我让我们使用一些 ant 预编译命令来首先构建 sencha，然后复制输出并最终构建应用程序。

# c++ - 方法指针的映射，编译器说他们不接受任何争论

> ID：13421778
> 
> 赞同：0
> 
> 时间：2012-11-16T17:46:59.867
> 
> 标签：c++, visual-studio-2010, winapi

这个类要大得多，但我只会发布有问题的代码。

```
template<class T>
class BaseWindow : public IWindow
{
   typedef void(T::*HandlerPtr)(WPARAM, LPARAM)

public:
   LRESULT CALLBACK BaseWindow<T>::WndProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam);

   // various stuff

private:
   void AddHandler(long id, HandlerPtr func);

private:
   std::map<long, void(T::*)(WPARAM, LPARAM)> m_MessageHandlers;
}

template<class T>
void BaseWindow<T>::AddHandler(long id, HandlerPtr func)
{
    m_MessageHandler.insert(std::pair<long, HandlerPtr>(id, func));
}

template<class T>
LRESULT CALLBACK Dapper32::BaseWindow<T>::WndProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
{
    if(m_MessageHandlers.count(msg) == 1)
    {
        auto it = m_MessageHandlers.find(msg);
        it->second(wparam, lparam);   // <-- error here for all template instantiations
        return 0;
    }

    return DefWindowProc(hwnd, msg, wparam, lparam);
} 
```

这里有一点背景。为了好玩和练习，我正在制作一个 win32 包装器，因为它看起来是一个有趣、冗长的项目来解决。经过一番深思熟虑，我决定我更喜欢将消息处理程序存储在映射中的系统，而不是每条消息都到达自己的虚拟函数，或者更糟糕的是，使用巨大的 switch 语句。这里的目标是，您从这个 BaseWindow 类派生，然后模板参数就是该派生类。就像是

```
class MyWindow : public BaseWindow<MyWindow> 
```

然后您创建将处理特定消息的私有方法，然后调用传递消息 id 的 AddHandler 函数，然后是指向该方法的指针。像蛋糕一样简单，我已经验证它们已正确输入到地图中。但是，在 BaseWindow 类中，我收到错误：

```
error C2064: term does not evaluate to a function taking 2 arguments 
```

我觉得这很奇怪，因为我在指针周围传递的每个地方，声明肯定有两个参数。当我删除括号和争论使其看起来像：

```
it->second; 
```

它编译并运行，当然，没有调用任何处理程序，但是当调用具有两个参数的函数指针而不使用争论列表时，它怎么能编译呢？有些东西很可疑，坦率地说我不明白。你们有没有聪明的头脑对此有任何见解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:51:26.610

你需要这样做：

```
(it->second)(wparam, lparam);  // note parens 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:10:46.747

无法删除这个问题，所以我想我会解释我是如何解决它的。完全摆脱了方法指针，在映射中使用了 std::functions，然后在添加处理函数调用中使用了 std::bind。更容易使用系统和方法指针更难一起存储在映射中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:02:35.350

试试这个代码：

```
(*this.*(it->second))(wparam , lparam) 
```

# javascript - IE8中未定义的JQuery

> ID：13421779
> 
> 赞同：1
> 
> 时间：2012-11-16T17:47:00.867
> 
> 标签：javascript, jquery, internet-explorer

在我的页面底部，我是一个不执行异步调用的 jquery 函数。它在 Chrome、FireFox 中运行良好。但是在 IE8 中它说 jQuery 是未定义的。这可能是什么原因造成的？

```
<script src="/scripts/jquery" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        jQuery.ajax( "dev/js/templates", {
                async : false,
                success: function (data) {
                    $("#tpl_scripts").html(data);
                }

    })

    </script> 
```

请注意，该脚本是从 PHP 返回的，标题为

```
<?php 
$script = file_get_contents('/libs/scripts/jquery.1.8.2');
if (extension_loaded("zlib") && (ini_get("output_handler") != "ob_gzhandler")) {
            ini_set("zlib.output_compression", 1);
    }

    header('Content-type: text/javascript');

echo $script;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T18:11:33.037

这将是一个很长的镜头，但从你的评论来看，我知道发生了什么。

您说 PHP 将多个 JavaScript 文件连接在一起并一次性提供服务；这通常是一个好主意（尽管我会进行静态编译并且仍然只使用 Web 服务器）。

Internet Explorer 因在对象中放置逗号而臭名昭著，例如

```
var a = {
    x: 123,
    y: 456,
} 
```

`y`看到属性声明后多余的逗号了吗？大多数浏览器并不关心这些东西，大多数 PHP 开发人员*总是*为了方便而使用它。

另一方面，Internet Explorer 对此进行了轰炸，并停止运行后面的其余代码。在您的情况下，如果它前面有您自己的代码，则可能包括 jQuery（因为 John Resig 永远不会犯“n00b”错误:)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T18:00:39.403

尝试将 .php 添加到 script 标签的 src 属性

```
<script src="/scripts/jquery.php" type="text/javascript"></script> 
```

# objective-c - PhoneGap 项目 Armv6

> ID：13421782
> 
> 赞同：0
> 
> 时间：2012-11-16T17:47:11.677
> 
> 标签：objective-c, ios, cordova, armv6

我构建了一个 Phonegap 2.0.1 项目，并在 CordovaLib.ecodeproj 的构建设置下显示

```
Architectures: Standard (armv7, armv7s) - $(ARCHS_STANDARD_32_BIT) 
Valid Architectures: 1386 armv7 armv7 
```

但是在我的项目 .xcodeproj 的构建设置下，我有

```
Architectures: Standard (armv6, armv7)
Valid Architectures: armv7 armv7 
```

所以他们似乎相互矛盾：S。

主要问题是 PhoneGap 已经放弃了对 armv6 的支持，但是在当前设置下，该应用程序可以在 iphone 3g 等 armv6 设备上正常安装和加载，但很快就会挂起:(。

我尝试将我的项目构建设置更改为：

```
Architectures: Standard (armv7, armv7s) - $(ARCHS_STANDARD_32_BIT) 
```

然而，这导致 xcode 开始尖叫 CordovaLib 文件中的一些错误：S

正确的设置应该在这里，我不希望人们在 armv6 上安装我的应用程序并让它崩溃:(，我如何确保只有 armv7 设备能够安装它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:45:07.360

您使用的是哪个版本的 Xcode？PhoneGap 已经放弃了对旧版本的支持，因为 Apple 已经 - 要在应用商店发布内容，您需要支持 iOS6，这意味着使用最新版本的 Xcode 并且不支持 armv6。

由于 $(ARCHS_STANDARD_32_BIT) 是原生 iOS 项目的默认设置，而不仅仅是 PhoneGap，我认为您可以指望应用商店系统仅部署到受支持的设备。

# iis - 来自 wwwroot 外部的图像未显示（尽管有映射）

> ID：13421784
> 
> 赞同：1
> 
> 时间：2012-11-16T17:47:15.123
> 
> 标签：iis, coldfusion

在我的 ColdFusion 应用程序中，我想将 wwwroot 之外的图像保存在此文件夹中：C:\extSite\stdImages

我在 wwwroot\WEB-INF\jrun-web.xml 中创建了一个映射，如下所示：

```
<virtual-mapping>
    <resource-path>/extStdImages</resource-path>
    <system-path>C:\extSite\stdImages\</system-path>
</virtual-mapping> 
```

要显示图像，我这样做：

```
<img src="/extStdImages/abc.jpg"> 
```

这在我的开发站点（使用 ColdFusion 的内置 Web 服务器）上运行良好，但图像不会在生产中显示（我使用 IIS）。我想知道是否必须在 IIS 或生产服务器上的其他地方进行一些调整以允许访问这些文件。

任何人都可以帮忙吗？提前致谢！

彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T18:43:53.677

在 iis 中，您需要创建一个指向图像文件夹的虚拟目录。尽管将图像放在 wwwroot 之外是没有意义的，因为它们必须可以通过网络访问才能显示在网页上。这样做的唯一原因是。如果您使用密码保护版权图像而不是直接链接到它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T18:45:42.783

如果你在 IIS 上，你可能想为你的 web.config 查看这个

[http://www.iis.net/configreference/system.applicationhost/sites/site/application/virtualdirectory](http://www.iis.net/configreference/system.applicationhost/sites/site/application/virtualdirectory)

这是一个示例：

```
<site name="Contoso" id="2" serverAutoStart="true">
   <application path="/">
      <virtualDirectory path="/" physicalPath="C:\Contoso\Content" />
   </application>
   <application path="/CRM">
      <virtualDirectory path="/" physicalPath="C:\Contoso\Content\CRM" />
      <virtualDirectory path="/Images" physicalPath="E:\Images" />
   </application>
   <bindings>
      <binding protocol="http" bindingInformation="*:80:www.contoso.com" />
   </bindings>
</site> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T10:25:29.823

这是错误的 C:\extSite\stdImages\ 您必须对 CF 使用斜杠而不是反斜杠 这是正确的并且有效 C:/extSite/stdImages/

# database - 如何在 sqlite 数据库中使用 Unicode 字符，例如日耳曼元音变音符号？

> ID：13421785
> 
> 赞同：1
> 
> 时间：2012-11-16T17:47:22.477
> 
> 标签：database, sqlite

我想在我的 sqlite 数据库中使用“Ä、Ö 和 Ü”，但是当我使用下面的代码片段时，我无法检索重音字符。

我正在使用 android 或通过 sqlite3 访问数据库

```
CREATE TABLE haltestellen (
id integer primary key autoincrement,
name varchar(64)
);

insert into haltestellen(name) values("Bärenhof"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:16:05.863

Sqlite 仅支持 UTF-8 和 UTF-16（请参阅[此问题](https://stackoverflow.com/questions/4276215/make-sure-the-sqlite-on-android-uses-utf-8-as-a-charset)），您的字符集应该没有问题。

我猜您用来进行查询的终端或工具不支持 UTF-8（或者没有启用它）。只需使用支持 UTF-8 的终端或工具，就可以了。

由于您没有提供更多信息，我假设您使用的是 windows 终端 cmd.exe。您可以尝试[此问题](https://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how)中的建议：

`chcp 65001`

不过，为了获得更合适的答案，您必须提供有关您的设置的更多信息，例如您实际在哪里尝试什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:09:28.490

```
CREATE TABLE haltestellen (
id integer primary key autoincrement,
name varchar(64) charset utf8
);

insert into haltestellen(name) values("Bärenhof"); 
```

如果这不起作用，您应该显示您使用的代码并确保所有内容都使用 utf8

# facebook-graph-api - 在 C# SDK 中请求页面访问令牌

> ID：13421787
> 
> 赞同：2
> 
> 时间：2012-11-16T17:47:30.083
> 
> 标签：facebook-graph-api, oauth, facebook-c#-sdk

作为一个简单后台应用程序的概念证明，我使用 Graph API Explorer 为我的应用程序创建了一个访问令牌，以将某些内容发布到我维护的页面的墙上。它工作得很好。但是，令牌自然会过期。

所以现在我试图让后台应用程序在每次运行时自动请求一个新的页面访问令牌。而且我很难找到如何做到这一点的具体定义。关于 Facebook 和 Access Tokens 的信息并不缺乏，但似乎没有什么可以说明如何将后台应用程序发布到页面。（不张贴到用户的墙上，不向用户显示登录对话框，因为它是后台应用程序等）

通过读取来自 Web 请求的响应，我可以很容易地在代码中获取访问令牌：

```
https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id={MY_APP_ID}&client_secret={MY_APP_SECRET} 
```

当然，当试图发布到页面的墙上时，那个“访问令牌”不起作用。它表示用户尚未授权应用程序执行此操作。我正在执行的操作非常简单：

```
var client = new FacebookClient(GetFacebookAccessToken());
dynamic parameters = new ExpandoObject();
parameters.message = "this is a test";
dynamic result = client.Post("{MY_PAGE_ID}/feed", parameters); 
```

我在某些地方读到，我需要使用第一个访问令牌发出第二个请求，以获取页面访问令牌。但我似乎找不到如何做到这一点的例子。

有人可以为我解释一下吗？

*   我有一个 Facebook 页面。
*   我有一个 Facebook 应用程序，除了为本地后台应用程序提供访问所述页面的方法外，没有其他目的。
*   我只需要该应用程序能够进行身份验证，以便它可以将某些内容发布到页面。
*   （如果我需要在 Facebook UI 中执行某个步骤以永久授予应用程序执行此操作的权限，我想我已经执行了该步骤，但最好以某种方式仔细检查。）

**编辑：** 有人向我描述，我需要获得一个长期存在的用户访问令牌，并使用它来获得一个页面访问令牌。理论上，所述页面访问令牌不会过期。但是，我不清楚的是如何做到这一点。

我已经阅读[了描述弃​​用的页面`offline_access`](https://developers.facebook.com/roadmap/offline-access-removal/)，以及[描述服务器端访问的页面](https://developers.facebook.com/docs/howtos/login/server-side-login/)。但是，我显然误解了一些东西。在前者中，它引用后者来获取正确的令牌。然而，后者包括向用户显示登录、让他们接受权限以及使用来自该登录的响应的步骤。

作为一个无人值守的后台进程，向用户（可能是我）提出任何类型的问题并不是一个真正的选择。我还被告知，我不能从浏览器发出一次性请求来获取访问令牌，因为根据定义，这是客户端交互，而不是必要的服务器端流程的一部分。（我觉得奇怪的是，服务会关心 RESTful 请求是来自 Web 浏览器还是来自应用程序，但我对 OAuth 或 Facebook API 还不够熟悉，无法真正进行调用。）

那么，如果我可以执行一些手动步骤来获取应用程序的永久访问令牌以发布到 Facebook 页面，那么这些步骤是什么？相反，如果我可以在应用程序中执行一些自动化步骤以在每次运行时获取访问权限，那么这些步骤是什么？

（从应用程序进行更多的 API 调用会为原本一天一次的流程增加一到两秒的运行时间，因此对我来说采用哪种方法没有区别。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T21:45:07.127

起初我只是进入 Facebook 应用程序设置并重新启用已弃用的“离线访问”权限。可以在这样的 URL 中找到所述应用程序设置：

```
https://developers.facebook.com/apps/{APPLICATION_ID}/advanced 
```

但是，由于所有内容都将该设置称为“已弃用”，因此我不想将其用作长期解决方案。它可能会被完全删除，在某些情况下可能不安全，等等。最好使用推荐的功能。

所以这就是我通过更新的文档、过时的文档、大量过时的互联网帖子和 PHP 代码从寻宝中拼凑起来的东西，这些代码大多对并非在所有情况下都正确的功能做出假设......

访问[Graph API Explorer](https://developers.facebook.com/tools/explorer)并从下拉菜单中选择您的 Facebook 应用程序。单击“获取访问令牌”并选择所需的权限。（对于我来说，我转到“扩展权限”选项卡并选择“托管页面”和“发布流”。）您将被提示（在我的浏览器中，它位于一个新选项卡中）与 Facebook 应用程序询问的熟悉屏幕您，用户，授予它您刚刚选择的权限。（如果您以前曾同意使用 Facebook 应用程序，那么您之前已经看到过。）

它在 Graph API Explorer 中产生的值（一长串随机字符）是您的“短期用户访问令牌”。

如“场景 4：客户端 OAuth 和通过新端点延长 Access_Token 过期时间”中所述，在您的 Web 浏览器中访问此 URL [：](https://developers.facebook.com/roadmap/offline-access-removal)

```
https://graph.facebook.com/oauth/access_token?
  client_id={APPLICATION_ID}
  &client_secret={APPLICATION_SECRET}
  &grant_type=fb_exchange_token
  &fb_exchange_token={SHORT_LIVED_USER_ACCESS_TOKEN} 
```

（您可以`{APPLICATION_SECRET}`在您的 Facebook 应用程序的基本设置页面上获取该值`https://developers.facebook.com/apps/{APPLICATION_ID}/summary`：）

这将返回另一个访问令牌，如下所示：

```
access_token={LONG_LIVED_USER_ACCESS_TOKEN}&expires=5184000 
```

这个`access_token`值（另一个长串随机字符）是您的“长期用户访问令牌”。该`expires`值以秒为单位，转换为 60 天。

现在我们跳到[Page API 参考](https://developers.facebook.com/docs/reference/api/page)并看一下[Page Access Tokens](https://developers.facebook.com/docs/reference/api/page/#page_access_tokens)部分。这一点，连同[此处](https://developers.facebook.com/docs/reference/api/)举例说明的 Graph API 请求的基本结构（向下滚动到它显示包含说明符的示例链接的项目符号列表的部分`access_token`，您需要在此处指定这些说明符，因为您正在请求非公开信息）引导您在浏览器中请求：

```
https://graph.facebook.com/{FACEBOOK_USER_ID}/accounts?
  access_token={LONG_LIVED_USER_ACCESS_TOKEN} 
```

这将返回一个 JavaScript 对象，其中包含有关您的用户帐户控制的 Facebook 页面和 Facebook 应用程序的大量有用信息。在我的情况下，页面和应用程序具有相同的名称，但是很容易将它们与值区分开来，`category`或者，如果所有其他方法都失败，则可以将它们区分开来`id`。找到您机器上运行的后台应用程序需要访问的页面并复制它`access_token`（第三个也是最后一个随机字符长字符串）。整个节点看起来像这样：

```
{
  "name": "Some Facebook Application Name",
  "access_token": "{LONG_LIVED_PAGE_ACCESS_TOKEN}",
  "category": "Musician/band",
  "id": "{APPLICATION_ID}",
  "perms": [
    "ADMINISTER",
    "EDIT_PROFILE",
    "CREATE_CONTENT",
    "MODERATE_CONTENT",
    "CREATE_ADS",
    "BASIC_ADMIN"
  ]
} 
```

这是您的“长寿命页面访问令牌”。这是您在代码中用于初始化 FacebookClient 对象的值。然后，发布一个简单的状态更新就像这样简单：

```
var client = new FacebookClient("{LONG_LIVED_PAGE_ACCESS_TOKEN}");
dynamic parameters = new ExpandoObject();
parameters.message = "This is a my status update.";
dynamic result = client.Post("{FACEBOOK_PAGE_ID}/feed", parameters); 
```

假设这个“长寿命页面访问令牌”不会*像*“长寿命用户访问令牌”那样在 60 天后过期。我想我会在 59 天内找到答案。

* * *

注意：我的示例中的花括号是实际值占位符的一部分。不要在实际请求中使用花括号。所以是这样的：

```
https://developers.facebook.com/apps/{APPLICATION_ID}/advanced 
```

变成这样，例如：

```
https://developers.facebook.com/apps/123456/advanced 
```

`123456`实际的 Facebook 应用程序 ID在哪里。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T01:32:12.090

> 作为一个无人值守的后台进程，向用户（可能是我）提出任何类型的问题并不是一个真正的选择。

正如我已经说过的，您只需执行**一次**。

您获得了不会过期的页面访问令牌，将其复制并粘贴到您的应用程序中——从那时起，您的应用程序就可以在服务器端做任何它想做的事。

> 我还被告知，我不能从浏览器发出一次性请求来获取访问令牌，因为根据定义，这是客户端交互，而不是必要的服务器端流程的一部分。

用于获取用户访问令牌的服务器端身份验证流程也需要部分参与浏览器。

没关系，您是通过客户端身份验证流程获得短期令牌并在之后扩展它，还是使用服务器端身份验证流程获得长期令牌。

> （我觉得奇怪的是，服务会关心 RESTful 请求是来自 Web 浏览器还是来自应用程序 [...]）

Facebook 不希望用户将其登录凭据提供给任何第三方。因此，获取*用户*访问令牌的过程总是必须参与浏览器，用户登录到 Facebook。

> 那么，如果我可以执行一些手动步骤来获取应用程序的永久访问令牌以发布到 Facebook 页面，那么这些步骤是什么？

获取具有 manage_pages 权限的长期用户访问令牌。（或者得到一个短暂的，并延长它）。然后，按照文档中描述的方式，使用该长期令牌请求目标页面的页面访问令牌。

# java - spring 事务回滚时如何发送异常消息？

> ID：13421788
> 
> 赞同：0
> 
> 时间：2012-11-16T17:47:31.597
> 
> 标签：java, web-services, spring, jakarta-ee, transactions

我有一个 Spring Web 服务，其中我有一个带有一个方法 add() 的 DAO，该方法用 @Transactional 注释，如下所示：

```
class MyDAOClass {

    @Transactional(rollbackFor = Exception.class)
    add(){
        doAdd1();
        doAdd2();
        doAdd3();
    }

    ...

    doAdd2() throws MyException {
        throw new MyException ("My Exception Message");
    }

    ...

} 
```

服务层：

现在当我调用webservice时，服务层内部调用了这个类的add()方法。服务层捕获 MyException e 并获取消息并将响应对象放入编组并发送回客户端。但是，当 doAdd2() 方法抛出异常时，事务被回滚，而不是 "My Exception Message" ，我在客户端收到以下错误消息：

```
<SOAP-ENV:Body>
  <SOAP-ENV:Fault>
     <faultcode>SOAP-ENV:Server</faultcode>
     <faultstring xml:lang="en">Transaction rolled back because it has been marked as rollback-only</faultstring>
  </SOAP-ENV:Fault> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:47:31.597

没关系。我发现了这个问题。我的服务类也用@Transactional 注释。删除此注释后问题解决。我只是为那些可能想知道为什么会收到此消息的人保留它。

# sas - 从 SAS 元数据服务器获取用户 ID

> ID：13421791
> 
> 赞同：1
> 
> 时间：2012-11-16T17:47:34.127
> 
> 标签：sas, sas-metadata

我正在使用 IOM 连接到元数据服务器的配置中工作 - 因此我的环境中没有自动宏变量来确定用户 ID（我们正在使用具有通用主机帐户的池工作区服务器）。

是否有一小段代码可用于查询元数据服务器以获取 SAS 用户 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:37:48.697

以下内容相当冗长，可能会缩短 - 但它确实有效！

```
data _null_;
call symput('login_id',''); /* initialise to missing */
n = 1;
length loginUri person $ 512;
nobj = metadata_getnobj("omsobj:Login?*",n, loginUri);
if (nobj>0) then do;
    length __uri __objName __porig personUri $256;
    __porig = loginUri;
    __uri = '';
    __objName = '';
    __n = 1;
    __objectFound = 0;
    personUri = "";
    __numObjs = metadata_getnasn(__porig ,"AssociatedIdentity", 1, __uri);
    do until(__n > __numObjs | __objectFound );
        __rc = metadata_getattr(__uri, "PublicType", __objName);
        if __objName="User" then do;
            __rc=metadata_getattr(__uri, "Name", __objName);
            __objectFound = 1;
            personUri = __uri;
        end;
        else do;
            __n = __n+1;
            rc = metadata_getnasn(__porig, "AssociatedIdentity", __n, __uri);
        end;
    end;
    if upcase("N")="Y" and not __objectFound then do;
        put "*ERROR*: Object with  PublicType=" "User" " not found for parent " loginUri " under AssociatedIdentity association";
        stop;
    end;
    ;
    rc = metadata_getattr(personUri, "Name", person);
    call symput("login_id", trim(person));
end;
run;
%put &login_id; 
```

# events - 将谷歌地图信息窗口中的信息放入 HTML 文本框

> ID：13421793
> 
> 赞同：0
> 
> 时间：2012-11-16T17:47:40.257
> 
> 标签：events, google-maps, marker

我有一张地图，上面有很多从数据库中提取的标记。每个都显示一个带有地名和位置的纬度和经度的信息窗口。我需要在单击时将地名与添加到 HTML 文本框的标记相关联。我似乎找不到任何关于此的教程。也许有人可以指出我正确的方向。我正在尝试自己学习这一点，如果设计草率，我深表歉意。提前感谢您的帮助。

```
function load() {
  var map = new google.maps.Map(document.getElementById("map_canvas"), {
    center: new google.maps.LatLng(41.640078, -102.669433),
    zoom: 3,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  downloadUrl("mymap.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + point;

      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {

    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
} 
```

它需要进入一个简单的文本框，如下所示：

```
<input type = "text" id = "address_box" value = ""/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:35:45.783

要在 HTML 文本框中显示该数据，请更改您的 bindInfoWindow 函数，在其中添加代码以将数据放入文本框中：

```
function bindInfoWindow(marker, map, infoWindow, html, name) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
    document.getElementById("address_box").value = name;
  });
} 
```

并将名称添加到对其的调用中：

```
 bindInfoWindow(marker, map, infoWindow, html, name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:23:41.780

你的意思是，当 infoWindow 打开时，你想在文本框中显示一些信息？如果是这样，这段代码可能会帮助你（我希望）。

```
 var infoWindow = new google.maps.InfoWindow;

  var address_box = document.getElementById("address_box");
  google.maps.event.addListener(infoWindow, "domready", function() {

    address_box.value = infoWindow.get("Content");
  }); 
```

# visual-studio-2010 - VS2010 和 IE10 附加脚本调试器处理 iexplore.exe 失败

> ID：13421797
> 
> 赞同：121
> 
> 时间：2012-11-16T17:47:48.960
> 
> 标签：visual-studio-2010, visual-studio, internet-explorer-10, windows-7-x64

所以我在 VS2010 中使用 Win7 x64 并安装了 IE10 Win7 Preview 和 ReSharper 6.1。

当我尝试开始调试时，我收到以下信息：

> “将脚本调试器附加到机器'MINE'上的处理'[1111] iexplore.exe'失败。已附加调试器。”

我可以单击“确定”并查看附加的调试会话 - [1111] 显示为灰色，并且还有另一个带有我的解决方案标题的 iexplore.exe 实例。我可以手动附加，它工作正常。

我想也许因为有两个 iexplore.exe pids 会有问题，没有打开两个选项卡或窗口，我禁用了自动崩溃恢复。

试过这个： [在机器'NAME'上附加脚本调试器以处理'[XXXX] IEXPLORE.EXE'失败](https://stackoverflow.com/questions/3232995/attaching-the-script-debugger-to-process-xxxx-iexplore-exe-on-machine-name)

不工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：306
> 
> 时间：2013-03-01T22:42:07.163

IE10 中的 JavaScript 调试问题有一个更简单的修复：

1.  关闭 IE
2.  在提升的 cmd 提示符下运行以下命令：

    ```
    regsvr32.exe "%ProgramFiles(x86)%\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll" 
    ```

（或`%ProgramFiles%`在 32 位操作系统上）

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-22T09:43:25.320

IE10 升级重置了一大堆东西。我按照两个步骤来解决这个问题。

1.  在 IE 高级设置中，在浏览下取消勾选“禁用脚本调试（Internet Explorer）”
2.  在命令提示符下运行它（具有管理员权限）： -

    regsvr32.exe "%ProgramFiles(x86)%\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll

这两个和浏览器重启的组合当然为我修复了它。

我也同意，上面标记的卸载解决方案几乎不是一个合适的解决方案。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-20T07:42:19.770

我有完全相同的问题..我找到了一个临时解决方案但我必须每次执行相同的序列如下。

1.  点击菜单“调试”
2.  点击“窗口”菜单
3.  点击菜单“进程”
4.  并右键单击 iexplorer.exe 并“分离进程”

问题是每次我每次编译我的项目时都必须重复这个过程......

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-12-29T16:44:41.743

我在使用 VS2010 和 IE10 (Win7) 时遇到了同样的问题。经过数周尝试解决此问题后，我终于决定启动 VS2012 来调试我的网站。我还将 VS2012 更新到 SP1 并重新启动了我的机器，现在 VS2010 调试在 IE10 中工作正常。

所以尝试安装 VS2012 SP1 来修复 VS2010 & IE10 的兼容性问题。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-05-17T08:46:47.960

有人建议在提升的命令提示符下运行它可以解决问题：

```
regsvr32.exe "%ProgramFiles(x86)%\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll" 
```

我试过了，它报告找不到dll。我搜索了 msdbg2.dll 并没有找到。显然，它是隐藏的。

我跑了：

```
regsvr32.exe "C:\Program Files (x86)\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll" 
```

它奏效了。

这是在 Windows 7、64 位、VS2010 Premium 上

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-12T22:53:31.720

去年 12 月，我在 WIN7 + IE10 CTP 上的 VS2010 和 VS2012 也遇到了同样的问题。我希望这个问题在IE10的RTM版本中得到解决，今天发现并没有。

我已经尝试了这篇文章中的所有解决方案，甚至安装了 VS2012 update 2 CTP 4，但没有解决问题。

我决定恢复到 IE9。我没有使用 MonteChristo 的答案中描述的正确步骤。

我通过执行以下操作卸载了 IE10：

1.  赢 + R
2.  应用程序向导
3.  打开或关闭 Windows 功能。
4.  取消选中 Internet Explorer 10
5.  重启

现在这不会恢复到 IE9。只是删除了 IE10。不是我想要的。因此，我使用与上述相同的步骤再次安装了 IE10。

在那之后，我忍不住再次测试它，令人惊讶的是，它成功了，我恢复了我的 Javascript 调试。我注意到的是以下内容。在我卸载 IE10 之前，运行/浏览（见下图）列出`Internet Explorer`了两次。

卸载后安装 IE10 只列出一次。我不知道这是否相关，但我想提一下。

![在此处输入图像描述](../Images/4ba37286062e86daa8f76d49a340d2c5.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-27T19:19:14.270

尝试重置您的 IE 设置，然后取消选中“工具”->“Internet 选项”->“高级”下的“禁用脚本调试器（Internet Explorer）”并重置您的计算机。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-29T09:25:21.733

我在 PC 上有 VS2010 和 VS2012。这是 ASP.NET 项目，它不适用于 JS 调试。我试了两个版本结果是一样的。我所做的一切都没有成功：

1.  regsvr32.exe `"%ProgramFiles(x86)%\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll"`-**没有**帮助
2.  属性页面上选中/未选中的“Silverlight”复选框 -**否**
3.  从 IE 10 降级 -> IE 9 -> IE 8 -**不走运**
4.  修复 VS 2010 -**对我不起作用**
5.  在 IE 的“高级设置”中取消选中“禁用脚本调试（Internet Explorer）”和“禁用脚本调试（其他）” -**否**

最后，我安装了“Visual Studio 2012 更新远程工具”和“VS2012 更新 4”。我不确定什么是固定问题，但它消失了。并且 VS2010 和 VS2012 开始调试 JavaScript。因此，似乎某些组件已损坏。今天，我认为，解决这个问题的最佳选择应该是重新安装 IE，我的意思是降级并重新安装，进一步你可以安装 VS2012 的 Update 4。

请注意：

> **“必须取消选中在属性页窗口中的“Silverlight”复选框”**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-26T17:46:52.673

Even with the newly released IE10 for Win 7, the problem persisted. However, got the hint that installing VS2012 SP1 fixed this issue so I installed Visual Studio 2012 Express via Web Platform Installer (v4.5) -- seems to be fixed!

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-19T15:29:43.787

我有`VS2010 & 12`和`IE10`，`Win 7 x64`。

我尝试了上述所有方法（`IE9`显然，降级到 除外）无济于事。

我有一种预感`VS2012 Update 2`可能会解决这个问题，我是对的。

不`cmd`，没有重新安装，没有重新启动。它修复了它`VS2010 & 12`。

我希望它也对其他人有所帮助。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-11-19T06:56:26.597

在将 IE9 更新到 IE10 后，我遇到了类似的问题（使用 VS2012 RC）——我修复了它以修复 VS2012 安装——我到了那里，因为我在调试下拉列表中有一个可疑的 Internet Explorer 重复项，即使正在启动调试器，我找不到加载的符号。

在 VS2010 中肯定没有那个下拉菜单，但也许尝试修复可能是一个修复。

* * *

## 回答 #12

> 赞同：-19
> 
> 时间：2012-11-20T16:33:32.227

自从在运行 VS 2010 SP1 的 Win 7 Pro 机器上更新到 IE 10 后，我遇到了同样的问题。

我尝试了很多建议，但没有一个奏效。我终于通过降级到 IE 9 来修复它，也就是说：

1.  在开始球下的 Win 7 搜索框中键入“appwiz.cpl”，然后点击 。
2.  点击“查看已安装的更新”
3.  搜索“Internet Explorer 10”
4.  右键单击“Internet Explorer 10”并选择“卸载”
5.  重启。

调试再次工作。

# ruby-on-rails - FactoryGirl 问题 - `factory'：参数数量错误（0 代表 1）（ArgumentError）

> ID：13421800
> 
> 赞同：4
> 
> 时间：2012-11-16T17:47:57.467
> 
> 标签：ruby-on-rails, ruby, factory

我正在完成 Ruby on Rails 教程，我已经接近尾声了，但是 Factory Girl 对我来说并不容易。

我无法运行任何需要工厂的规范文件。

```
require 'spec_helper'
require 'factory_girl_rails'

describe User do

 before(:each) do
    @attr = { :name => "Example User", 
                :email => "user@example.com",
                :password => "foobar",
                :password_confirmation => "foobar"
                }
    end

    it "should create a new instance given valid attributes" do
    User.create!(@attr)
    end

    it "should require a name" do
    no_name_user = User.new(@attr.merge(:name => ""))
    no_name_user.should_not be_valid
    end

    it "should require an email address" do
    no_email_user = User.new(@attr.merge(:email => ""))
    no_email_user.should_not be_valid
    end

    it "should reject names that are too long" do
    long_name = "a" * 51
    long_name_user = User.new(@attr.merge(:name => long_name))
    long_name_user.should_not be_valid
    end

    it "should accept valid email addresses" do
    addresses = %w[user@foo.com THE_USER@foo.bar.org first.last@foo.jp]
    addresses.each do |address|
        valid_email_user = User.new(@attr.merge(:email => address))
        valid_email_user.should be_valid
    end
    end

    it "should reject invalid email addresses" do
    addresses = %w[user@foo,com user_at_foo.org example.user@foo.]
    addresses.each do |address|
        invalid_email_user = User.new(@attr.merge(:email => address))
        invalid_email_user.should_not be_valid
        end
        end

    it "should reject duplicate email addresses" do
    #put user with given email address into the database
        User.create!(@attr)
        user_with_duplicate_email = User.new(@attr)
        user_with_duplicate_email.should_not be_valid
    end

    it "should reject email addresses identical up to case" do
        upcased_email = @attr[:email].upcase
        User.create!(@attr.merge(:email => upcased_email))
        user_with_duplicate_email = User.new(@attr)
        user_with_duplicate_email.should_not be_valid
    end

    describe "password validations" do

        it "should require a password" do
            User.new(@attr.merge(:password => "", :password_confirmation => "")).should_not be_valid
            end

        it "should reject short passwords" do
        short = "a" * 5
        hash = @attr.merge(:password => short, :password_confirmation => short)
        User.new(hash).should_not be_valid
        end

        it "should reject long passwords" do
        long  = "a" * 41
        hash = @attr.merge(:password => long, :password_confirmation => long)
        User.new(hash).should_not be_valid
        end

    end

    describe "password encryption" do
        before(:each) do
            @user = User.create!(@attr)
    end
        it "should have an encrypted password attribute" do
        @user.should respond_to(:encrypted_password)
    end
        it "should set the encrypted password" do
        @user.encrypted_password.should_not be_blank
        end

    it "should be true if passwords match" do
        @user.has_password?(@attr[:password]).should be_true
    end

    it  "should be false if the passwords don't match" do
        @user.has_password?("invalid").should be_false
    end

    describe "authenticate method" do
        it "should return nil on email/password mismatch" do
        wrong_password_user = User.authenticate(@attr[:email], "wrongpass")
        wrong_password_user.should be_nil
        end

        it "should return nil for an email address with no user" do
        nonexistent_user = User.authenticate("bar@foo.com", @attr[:password])
        nonexistent_user_should be_nil
        end

        it "should return the user on email/password match" do
        matching_user = User.authenticate(@attr[:email], @attr[:password])
        matching_user.should == @user
        end
    end

    end 

    describe "admin attribute" do
        before(:each) do
            @user = User.create!(@attr)
        end

        it "should respond to admin" do
            @user.should respond_to(:admin)
        end

        it "should not be an admin by default" do
            @user.should_not be_admin
        end

        it "should be convertible to an admin" do
            @user.toggle!(:admin)
            @user.should be_admin
        end
    end

    describe "micropost associations" do
        before(:each) do
            @user = User.create{@attr}
            @mp1 = FactoryGirl.create(:micropost, :user => @user, :created_at => 1.day.ago)
            @mp2 = FactoryGirl.create(:micropost, :user => @user, :created_at => 1.hour.ago)

        end

        it "should have a microposts attribute" do
            @user.should respond_to(:microposts)
        end

        it "should have the right microposts in the right order" do
            @user.microposts.should == [@mp2, @mp1]
        end

        it "should destroy associated microposts" do
            @user.destroy
            [@mp1, @mp2].each do |micropost|
                Micropost.find_by_id(micropost.id).should be_nil
            end
        end     
    end 
end 
```

工厂.rb

```
 #by using the symbol ':user', we get Factory Girl to simmulate the User model
require 'spec_helper'

FactoryGirl.define do
    factory :user do |user|
        user.name                           "User Name"
        user.email                      "user@ex.com"
        user.password                   "foobar"
        user.password_confirmation  "foobar"
    end

    factory.sequence :email do |n|
        "person-#{n}@example.com"
    end

    factory :micropost do |micropost|
        micropost.content "Foo bar"
        micropost.association :user
    end
end 
```

这是我收到的错误消息：

```
 /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:15:in `factory': wrong number of arguments (0 for 1) (ArgumentError)
    from /Users/samanthacabral/rails_projects/sample/spec/factories.rb:13:in `block in <top (required)>'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:49:in `instance_eval'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:49:in `run'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:7:in `define'
    from /Users/samanthacabral/rails_projects/sample/spec/factories.rb:4:in `<top (required)>'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:16:in `block in find_definitions'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:15:in `each'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:15:in `find_definitions'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/factory_girl_rails-4.1.0/lib/factory_girl_rails/railtie.rb:26:in `block in <class:Railtie>'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:34:in `call'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/railties-3.2.8/lib/rails/application/finisher.rb:59:in `block in <module:Finisher>'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/samanthacabral/rails_projects/sample/config/environment.rb:5:in `<top (required)>'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /Users/samanthacabral/rails_projects/sample/spec/spec_helper.rb:81:in `<top (required)>'
    from /Users/samanthacabral/rails_projects/sample/spec/models/user_spec.rb:12:in `require'
    from /Users/samanthacabral/rails_projects/sample/spec/models/user_spec.rb:12:in `<top (required)>'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `block in load_spec_files'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `map'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run'
    from /Users/samanthacabral/.rvm/gems/ruby-1.9.3-p286@rails3tutorial/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `block in autorun' 
```

我还尝试重新启动 spork 和此处建议的一些组合，用于使用 FactoryGirl 的语法。

帮助！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:08:52.940

在工厂创建对象时不需要循环，同时定义对象时可以使用序列，试试这个：

```
FactoryGirl.define do  
    factory :user do
        sequence(:name) { |n| "User Name #{n}" }                         
        sequence(:email) { |n| "person-#{n}@example.com" } 
        password "foobar"
        password_confirmation "foobar"
    end

    factory :micropost do
        content "Foo bar"
        user
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:02:59.053

我认为问题在于您通过传递一个块来声明工厂的方式。`micropost`例如，尝试这样声明一个工厂：

```
factory :micropost do
    content "Foo bar"
    association :user
end 
```

# c++ - stl c++项目中的字符串类

> ID：13421801
> 
> 赞同：0
> 
> 时间：2012-11-16T17:48:08.887
> 
> 标签：c++, string, stl

是否可以在 c++ stl 项目中使用 String.cpp 和 String.h 创建 String 类？

```
String.h

#include <string> 
class String {
public:
    static std::string Replace(const std::string& str, const std::string& oldValue, const std::string& newValue);
}; 
```

除非将类重命名为 Stringy 之类的其他名称，否则会出现编译错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:54:44.867

您可以在 C++ 中使用命名空间，而不是仅具有静态成员的类。

```
#include <string>

namespace String {
    std::string Replace(const std::string& str, const std::string& oldValue, const std::string& newValue);
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T17:52:22.867

您需要从类声明中删除静态，然后您发布的代码就可以正常工作。

# java - 为什么 IntelliJ 在简单的 java 程序中显示错误？

> ID：13421802
> 
> 赞同：0
> 
> 时间：2012-11-16T17:48:23.083
> 
> 标签：java, intellij-idea, println

我运行 IntelliJ。简单的项目并收到红色的 println。

```
package test;

public class Main {

public static void main(String[] args) {
    System.out.println("Console is.");
 }
} 
```

错误：

```
Cannot resolve method 'println'... 
```

我已经在模块设置中检查了 JDK 是。我还应该检查什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:50:22.000

安装后我需要重新启动 IntelliJ。

# objective-c - 块与代表

> ID：13421803
> 
> 赞同：9
> 
> 时间：2012-11-16T17:48:28.197
> 
> 标签：objective-c, delegates, objective-c-blocks

> **可能重复：**
> [代码块是否完全取代了委托？](https://stackoverflow.com/questions/4584404/do-code-blocks-completely-replace-delegates)

我刚刚从一个论坛遇到了以下声明：

> “代表是过去。街区是未来。”

1) 区块是不是代表“委托”职责 的*首选方式？*
2）使用委托与块有什么特别的好处吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-16T19:43:11.130

我认为对代表做什么和块做什么有一点误解。

在 Objective-C 中，有三种方法来处理回调：

1.  委托 -> 使一个对象成为另一个对象的*委托*，您必须指定委托对象将响应的“父”对象生成的事件类型。

2.  Target-Action -> UI 交互中的典型，其中 UI 子视图（按钮、滑块等）基于由预定义事件处理程序（通常是一些 Objective-开发人员指定的 C 方法）。

3.  通知 -> 对象注册自己的实例`NSNotificationCenter`以“侦听”任何类型的事件并响应这些事件中的一个或多个。

块本身不是处理委托或任何其他回调的方法。

它们是独立的代码片段，可以访问调用方法的局部变量和参数。它们可用于定义一堆不同上下文中的行为。块的主要好处（如我所见）是它可以通过消除多余的过于具体的方法来简化代码，这些方法会使您的代码库变得混乱。块有助于将代码本地化到最有意义的地方：就在回调机制中。

基本上，使用它们可以增强可读性并使代码更易于维护。

这些好处是否使块成为处理回调的“首选”方法绝对是个人意见和经验的问题。;)

# html - li:last-child 元素高度 100%

> ID：13421806
> 
> 赞同：2
> 
> 时间：2012-11-16T17:48:41.600
> 
> 标签：html, css

我正在尝试将最后一个列表项的高度拉伸到 100% 以匹配 div 向右浮动的动态高度。

```
ul.menu li:last-child {height:100%} 
```

我在哪里的例子..

[http://jsfiddle.net/kvtV8/1/](http://jsfiddle.net/kvtV8/1/)

![在此处输入图像描述](../Images/9f8d53b729dbc42f033b530a639915ce.png)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:07:32.057

您所要求的可以完成，但恕我直言，当前的 CSS 中没有很好的解决方案。这是一种可行的可能性（有点）。

为了让列表知道它旁边的浮动元素的大小，两者都需要包含在同一个元素（容器）中：

```
<div id="container">
  <ul class="menu">
    …
    <li>…&lt;/li>
  </ul>
  <div id="floated">…&lt;/div>
</div> 
```

为了让该容器知道其中浮动元素的大小，它也需要浮动：

```
#container {
  float: left;
} 
```

因为容器元素的下一个兄弟元素会在它旁边浮动（除非它的`clear`属性设置为`left`or `both`），你可能需要在它之后清除：

```
<div id="container">
  …
</div>
<div style="clear: both; width: 0; height: 0; line-height: 0"><!-- for MSHTML --></div>

<!-- next sibling here --> 
```

为了让列表项元素的下边界与浮动元素的下边界对齐，它需要定位`absolute`——</p>

```
ul.menu li:last-child {
  position: absolute;
  bottom: 0;
} 
```

– 并且容器需要定位`relative`，以使`li`元素`bottom: 0`与浮动元素底部的距离为零（除非它没有列表那么高）：

```
#container {
  position: relative;
  float: left;
} 
```

但是，如果您像这样定位最后一个列表项，您将丢失其左边界和上边界的动态计算坐标。

如果您知道最后一个列表项上方的列表项占用了多少空间，我只能看到一种方法，并且只有一种可能性来解决最后一个问题。这将更难维护，但如果你想这样做，你在这里：

```
ul.menu li:last {
  position: absolute;

  /* in your case */
  left: 0;

  /*
   * Assumption: 3 items above, each has a computed height of 1em, no margins
   * in-between.  (Obviously, until CSS3 Computed Values becomes widely adopted,
   * you would need to use the same unit of length here as you use for the
   * heights of the list items above and possible margins between them.)
   */
  top: 3em; 

  bottom: 0;
} 
```

显然，`ul`元素*不能*被定位，否则你的`li`坐标将被关闭。

总之，CSS –</p>

```
#container {
  position: relative;
  float: left;
}

/* AIUI from your original code */
#container #floated {
  float: right;
}

#container ul.menu li:last-child {
  position: absolute;

  /* see above */
  left: 0;
  top: 3em;
  bottom: 0;
} 
```

– 和标记：

```
<div id="container">
  <ul class="menu">
    …
    <li>…&lt;/li>
  </ul>
  <div id="floated">…&lt;/div>
</div>
<div style="clear: both; width: 0; height: 0; line-height: 0"><!-- for MSHTML --></div>

<!-- next sibling here --> 
```

Chromium 22 中的 WFM。但是 AISB，它并不漂亮。您应该重新考虑为什么需要像这样拉伸最后一个列表项。也许您*真正*想做的是扩展列表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:07:20.277

我认为您必须将 html 和 body 高度设置为 100%

尝试使用这一行：

```
html, body, section {width:100%; height:100%;} 
```

# java - CardLayout 显示下一个面板 - java Swing

> ID：13421809
> 
> 赞同：2
> 
> 时间：2012-11-16T17:48:58.927
> 
> 标签：java, swing

我遇到了 CardLayout 的一些问题。我有一个面板和一个下一步按钮。单击它后，我想显示第二个面板。在我的代码中，当我单击“下一步”按钮时，不会显示下一个面板。有人可以帮我解决这个问题吗？

```
package com.test;

import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import java.awt.CardLayout;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class CardLay extends JFrame {

    private JPanel contentPane;
    private CardLayout ca;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    CardLay frame = new CardLay();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public CardLay() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        ca =new CardLayout(0, 0);

        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(ca);

        JPanel panel = new JPanel();
        panel.setLayout(null);

        contentPane.add("1",panel);

        JButton btnNext = new JButton("NEXT");
        btnNext.setBounds(131, 93, 117, 29);
        btnNext.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                ca.show(contentPane,"1");
                System.out.println("button clicked");
            }
        });
        panel.add(btnNext);

        JPanel panel_1 = new JPanel();
        contentPane.add(panel_1, "name_1353086933711396000");

        JCheckBox chckbxNewCheckBox = new JCheckBox("New check box");
        panel_1.add(chckbxNewCheckBox);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:57:24.683

您需要致电：

```
ca.show(contentPane, "name_1353086933711396000"); 
```

为此，您必须像这样添加第二个面板：

```
contentPane.add("name_1353086933711396000", panel_1); 
```

使用时`CardLayout`，请确保将导航按钮保留在“卡片”本身之外的单独容器上，以便它们在整个导航过程中可见。在这里，您可以在框架的`BorderLayout.SOUTH`位置放置一个新的导航容器。对于顺序导航，可以使用[previous](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#previous%28java.awt.Container%29)和[next](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#next%28java.awt.Container%29)方法。

还要避免使用绝对定位（`null`布局）。请参阅[不使用布局管理器（绝对定位）](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)。

```
public CardLay() {
   setDefaultCloseOperation(EXIT_ON_CLOSE);
   setSize(500, 400);

   ca = new CardLayout(0, 0);

   contentPane = new JPanel();
   contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
   contentPane.setLayout(ca);

   JPanel panel1 = new JPanel();
   panel1.add(new JButton("Test Button"));
   contentPane.add("card1", panel1);

   JPanel panel2 = new JPanel();
   contentPane.add("card2", panel2);
   JCheckBox chckbxNewCheckBox = new JCheckBox("New check box");
   panel2.add(chckbxNewCheckBox);

   JPanel navigationPanel = new JPanel();

   JButton btnPrevious = new JButton("< PREVIOUS");
   btnPrevious.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        ca.previous(contentPane);
    }
   });
   navigationPanel.add(btnPrevious);

   JButton btnNext = new JButton("NEXT >");
   btnNext.addActionListener(new ActionListener() {
       public void actionPerformed(ActionEvent e) {
      ca.next(contentPane);
    }
   });
   navigationPanel.add(btnNext);

   add(contentPane);
   add(navigationPanel, BorderLayout.SOUTH);
} 
```

**推荐：** [如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

# entity-framework - 绕过实体框架的模式验证？

> ID：13421811
> 
> 赞同：0
> 
> 时间：2012-11-16T17:49:15.950
> 
> 标签：entity-framework

我有一种情况，我需要更改我的模型（代码优先）并在数据库上手动镜像更改。迁移不是一种选择。不幸的是，这会导致实体框架在针对模型验证架构时抛出异常（使用 __MigrationHistory 表）。有没有办法禁用实体框架所做的模式验证？我专门使用 EF 4.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:53:52.967

我想你可以创建自己的实现`IDatabaseInitializer`，它什么都不做，并使用`Database.SetInitializer()`.

# java - 发送arraylist值并在php中获取该数组值

> ID：13421813
> 
> 赞同：0
> 
> 时间：2012-11-16T17:49:21.050
> 
> 标签：java, php, android, mysql

我正在尝试从 php 文件中获取值。

我有一个这样的java文件

```
ArrayList<NameValuePair> al = new ArrayList<NameValuePair>();

for (int i = 0; i < name.size(); i++) 
{
    al.add(new BasicNameValuePair("names["+i+"]",String.valueOf(name.get(i))));

    System.out.println("arr is " +String.valueOf(name.get(i)+ "arrrr"+name.get(i)));
} 
```

这里， `name`是一个 ArrayList。

现在我希望将该名称 ArrayList 发送到 php 并循环该数组并插入数据库

这是我的 php 文件

```
$con = mysql_connect("localhost","aaa","aa");
mysql_select_db("aa", $con);

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

$arr[] = $_POST['names[]'];

foreach ($arr as $key) 
{
    $query="insert into Orders1(names) values('$key')";
    mysql_query($query);
} 
```

它在数据库中插入`""`（空）值请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:54:16.537

编辑：现在你已经删除了你的php代码，所以下面的内容没有多大意义......

* * *

如果您在 html 表单中使用基于数组的字段名称，例如

然后在提交表单时`[]`不会出现在 $_POST 数组中**。**相反，`$_POST['foo']`成为输入到这些表单字段中的各种值的子数组。

这意味着

```
$arr[] = $_POST['names[]']; 
```

几乎可以肯定是一个未定义的数组键，返回 a `NULL`，然后将其附加到`$arr`数组中。您遍历 $arr 并插入值，但只插入那个空值。

试试，简单地说：

```
foreach($_POST['names'] as $val) {
  $v = mysql_real_escape_string($val);
  $sql = "ISNERT INTO .... VALUES ('$v');
} 
```

注意转义函数的使用。您的代码极易受到[SQL 注入攻击](http://bobby-tables.com)，并且会使您的服务器完全受到远程攻击。

# jquery-ui - 如何使用 Knockout 观看样式

> ID：13421818
> 
> 赞同：1
> 
> 时间：2012-11-16T17:49:40.300
> 
> 标签：jquery-ui, knockout.js, jquery-ui-resizable

我想要做的是跟踪 (top, left, width, height, zIndex) 样式属性。但是由于包含这些样式的元素直到第三方代码被引入之后才存在，所以我无法以正常方式进行操作。

这是我到目前为止所得到的：

```
 my.Module = function (module) {
    return {
            top: ko.observable(200);,
            left: ko.observable(100);,
            width: ko.observable(100);,
            height: ko.observable(100);,
            zIndex: ko.observable(0);,
        };
    }; 
```

这将是正常的绑定上下文：

```
<div data-bind="style:{width:width, top:top, left:left, height:height, zindex:zIndex}"></div> 
```

但是第三方的东西最终将我传递给另一个的 div 包装起来，这是我无法改变的。因此，我开始创建自定义绑定处理程序：

```
 ko.bindingHandlers.Window = {
        init: function (element, valueAccessor) {
            var value = ko.utils.unwrapObservable(valueAccessor());

            //Do third party creation stuff here...

            ko.applyBindingsToNode(elemToActuallyWatch, {
                style: {
                    width: value.width() + 'px',
                    height: value.height() + 'px',
                    top: value.top() + 'px',
                    left: value.left() + 'px',
                    zIndex: value.zIndex()
                }
            });
        }, 
```

现在这将上述样式应用于适当的 div，但是当数据更改和元素更改时，我仍然需要更改上述值。

我觉得不应该需要我必须在末端添加的“px”，但这是我可以让它们应用的唯一方法。

**从这一点开始有没有办法，可以说我正在使用 jqueryUI 可拖动和调整大小，并且用户移动/调整值将自动更新视图模型数据的元素？**当然，最好使用非 jquery 特定的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:48:43.277

`style`是一种单向绑定，从模型到视图。它不会从视图更新模型。您可能需要使用该[`resize`选项](http://api.jqueryui.com/resizable/#event-resize)并从那里更新模型。

# html - 是否可以在 CSS 中更改图像的 alt 属性的大小

> ID：13421819
> 
> 赞同：0
> 
> 时间：2012-11-16T17:49:41.670
> 
> 标签：html, css

我有一张图像，我想在显示图像时显示 alt 值：

HTML：

```
<div id="demo">
<li><img src="images/cpu.jpg" alt="Over All CPU" /></li>
</div> 
```

CSS：

```
#demo img { font:italic 100px Georgia, Times, Serif; color: #000; text-shadow: 0px 2px 4px #222; margin:10px 20px; } 
```

是否有可能使alt大小变大？如果没有，有没有办法在显示时为图像添加标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:28:31.657

> 是否有可能使alt大小变大？

如上所述，没有办法设置 alt 的样式。alt 属性有两个用途。

1.  如果图像无法加载或用户关闭图像，则会显示该图像。
2.  alt 中的文字报告给辅助技术，例如 JAWS，因此用户可以获得平等的体验。

> 如果没有，有没有办法在显示时为图像添加标题？

你不能简单地做：

```
<figure>
 <img src="" alt="Over All CPU">
 <figcaption>Your title goes here, which should not be Over All CPU</figcaption>
</figure> 
```

[参考](http://html5doctor.com/the-figure-figcaption-elements/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:06:29.103

您可以使用 onload() 事件处理程序或 onmouseover() 事件处理程序以您想要的任何样式在图像上显示文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:51:02.233

alt 属性是图像标签的属性，它本身不是一个元素。您不能将 alt 属性设置为与 src 相同的样式

但是你可以使用 [jQuery Tooltip 插件](http://docs.jquery.com/Plugins/Tooltip)来获得这个效果

# css - 复杂的 CSS 选择器

> ID：13421826
> 
> 赞同：0
> 
> 时间：2012-11-16T17:50:03.900
> 
> 标签：css, selector

我有一个噩梦 CMS 可以使用 - 它只会在表中的表中吐出表等，有些是嵌套的，有些是同级的。没有`class`es 或`id`s，所以我试图以唯一的方式选择。

在 Firebug 中将鼠标悬停在 HTML 上时，它会显示如下所示（简化版）：

```
html/body/div/div[3]/table[3] 
```

我尝试了这个 CSS 选择器来复制它：

```
html body div div:nth-child[3] 
```

但它不起作用；它在 :nth-child 选择器处分解。如何编写 CSS 选择器来访问上述元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:53:51.530

这里：

```
body > div > div:nth-child(3) > table:nth-child(3) 
```

但这与 CSS 选择器一样低效。您确定您的 CMS 没有为您提供任何 ID 或类吗？

# teamcity - TeamCity：扫描所有文件以获取文本

> ID：13421829
> 
> 赞同：0
> 
> 时间：2012-11-16T17:50:10.267
> 
> 标签：teamcity

我目前使用 CC.NET 来运行 NAnt 构建文件。在 NAnt 脚本中，我使用 grep 任务来扫描 TODO/BUG/HACK 注释，然后该报告被折叠到主构建报告中。我想知道这是否已经以某种方式内置于 TeamCity 中？

或者我应该创建另一个构建步骤来运行相同的 NAnt 脚本。如果是这种情况，我应该*在哪里转储该扫描的结果，然后如何将该 XML 转储提取到 TeamCity 构建结果中*？这就是我的 NAnt 目标的样子：

```
<target name="todoScan" description="Generate report on TODO items remaining in code">
    <grep output="${base.report.dir}\${projectname}_todoscan.xml" pattern="(?'Type'TODO|BUG|HACK): (?'Text'[^\n\r]*)">
       <fileset basedir="${projectdir}">
            <include name="**\*.vb" />
            <include name="**\*.js" />
            <include name="**\*.aspx" />
            <include name="**\*.ascx" />
            <exclude name="**\*-vsdoc.js" />
            <exclude name="**\jquery-1.3.2.js" />
        </fileset>
     </grep>
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:29:58.540

我不知道将执行该操作的任何内置 TeamCity 功能。

只要您将文件写入可访问的目录，您就可以将其包含在使用“1.常规设置”下的“工件路径”字段发布的工件中。然后可以从仪表板上的工件选项卡访问该文件。

如果您愿意，您可以在仪表板中添加一个新选项卡，如果您转到“管理”、“服务器配置”、“报告选项卡”并单击“创建新的报告选项卡”，它将在每个构建中显示您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-07T20:03:22.037

我实际上处于同样的情况，来自 Jenkins，我使用插件来显示诸如 IDEA/TODO/MUDO 之类的东西。因为我最近也搬到了 TeamCity，所以我为此做了一个插件。这是非常新的和非常基本的，但它可以为我做它需要做的事情。如果您有兴趣，可以在 GitHub 上找到它：[Todo TeamCity 插件](https://github.com/rvdginste/todo-teamcity-plugin)。

# google-apps-script - 可以使用 Google CalendarApp 创建事件并发送给其他人吗？

> ID：13421830
> 
> 赞同：0
> 
> 时间：2012-11-16T17:50:18.663
> 
> 标签：google-apps-script

我编写了一个将提醒排队的脚本，并通过电子邮件向他们发送一个委派用户。我想向此人发送日历事件，而不是电子邮件。

我的问题是：是否可以使用 CalendarApp 创建事件并将其发送给另一个 gCalendar 用户？我看到 API 用于查询所有权，但不是用于设置它。具有匿名所有权的事件也将很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:50:52.440

这里有两种方法。

1.  您可以设置您的脚本，以便它以想要日历邀请的用户身份运行。您可以在“发布”菜单选项下看到这一点

2.  [或者，您可以使用addGuest](https://developers.google.com/apps-script/class_calendarevent#addGuest) API将该人添加为访客。

没有其他方法可以访问其他人的日历并添加他们拥有的事件。听起来给定当前设置#2 将是最简单的。

# c# - 在 Azure 中下载 BlockBlob

> ID：13421832
> 
> 赞同：1
> 
> 时间：2012-11-16T17:50:22.527
> 
> 标签：c#, azure, azure-blob-storage

我目前正在试用 Azure TableStorage，并且有一个关于 BlockBlob 的问题：我可以使用 REST（以及如何）通过其 BlockID 下载特定的 BlobBlocks 吗？

我认为它可能类似于：[http://storagename.blob.core.windows.net/test/hello.zip?&blockid=001](http://storagename.blob.core.windows.net/test/hello.zip?&blockid=001)，但这会返回整个文件。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T18:54:13.643

目前这是不可能的，但它肯定是一个很好的要求。

作为替代方案，您可以执行以下操作：

1.  首先获取阻止列表
2.  计算偏移量（使用与每个块关联的长度）
3.  对该偏移量/长度发出 Range Get 请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:48:44.227

您必须按字节范围下载块。`Range`选项必须在 HTTP 标头中设置（不在 url 查询字符串中）。

例子：

```
GET /test/hello.zip HTTP/1.1
Range: bytes=0-102399
Host: storagename.blob.core.windows.net 
```

[http://msdn.microsoft.com/en-us/library/windowsazure/dd179440.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179440.aspx)

# css - CSS 活动属性无法正常工作

> ID：13421833
> 
> 赞同：0
> 
> 时间：2012-11-16T17:50:26.323
> 
> 标签：css

请查看[http://jsfiddle.net/mrto2/nD2eB/](http://jsfiddle.net/mrto2/nD2eB/)。
我给了

```
 #filters li a:active {
  border-top: 2px solid #EB2F26;
  color: #EB2F26;
  } 
```

对于活动字体和边框颜色，但是当我们单击某个菜单时，它的颜色和边框会发生变化，但在释放鼠标时会变回来。那么我们该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:03:50.550

没有简单的 CSS 方法来处理这个问题，因为`link:active`选择器适用于`<a>`被点击的 s。您可以通过定义一个`li.active`css 类并通过 js 将其动态添加到链接来解决此问题。

```
li a.active {
  border: 2px red solid;
} 
```

```
<ul class="nav">
  <li><a>Link 1</a></li>
  <li><a>Link 2</a></li>
  <li><a>Link 3</a></li>
  <li><a>Link 4</a></li>
<ul> 
```

```
// Using Jquery
$('ul.nav li').on('click', function(){
  $(this).parent().find('a').removeClass('active');
  $(this).addClass('active');
}); 
```

# windows-8 - 计划吐司显示多次

> ID：13421834
> 
> 赞同：1
> 
> 时间：2012-11-16T17:50:29.130
> 
> 标签：windows-8

我有一个日历应用程序，它能够设置药丸提醒。

```
ScheduledToastNotification recurringToast = new ScheduledToastNotification(
toastXml,startDay.AddDays(1), new TimeSpan(0, 0, 1, 0), 3); 
```

如您所见，它的 MaxSnoozeCount = 3 和SnoozeInterval = 1 分钟。问题是，当我单击出现的 toast 作为文档状态时，应该再次显示 toast，因为它没有被“暂停”。然而，不管我每次点击它，它都出现了 4 次。

有什么想法有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:33:43.137

单击计划的 toast 后，您的应用程序应处理 toast 激活事件并删除计划的 toast 以防止再次看到它。计划的 toast 将根据其创建参数继续显示，直到应用程序明确地将其从计划中删除。

用于[`ToastNotifier.GetScheduledToastNotifications`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.toastnotifier.getscheduledtoastnotifications.aspx)检索感兴趣的 toast，然后调用[`ToastNotifier.RemoveFromSchedule`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.toastnotifier.removefromschedule)以阻止它在将来显示。

# python - 有效地将长numpy数组转换为字符串

> ID：13421840
> 
> 赞同：1
> 
> 时间：2012-11-16T17:50:59.127
> 
> 标签：python, arrays, numpy

我有 1,000 个元素的 numpy 数组，我想将其转换为字符串。

我试过了：

```
map(str, a) 
```

它很慢。还有其他选择吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:02:26.010

如果要将 numpy 数组写入文本文件，请使用[`numpy.savetxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html). 根据您的评论，这就是您想要的。

但是，为了回答您的原始问题，如果您可以使用固定长度的字符串，则有更快的方法将 numpy 数组转换为字符串。

对于简单的事情，您可以将其转换为固定长度的字符串数组。

例如

```
import numpy as np

# Generate some random floating-point data
x = np.random.random(100)

# Convert it to fixed-length strings with a maximum length of 5 characters
y = x.astype('|S5')

print 'Original Array'
print x
print 'Converted to fixed-length strings'
print y 
```

这输出：

```
Original Array
[ 0.25669986  0.55193955  0.39582629  0.40559555  0.75836284  0.13031881
  0.84448005  0.20825593  0.32131777  0.5738351   0.72200185  0.14700912
  0.62306299  0.21549908  0.96927738  0.13327512  0.06948689  0.34436446
  0.58785565  0.58557563  0.3229981   0.0356056   0.67621536  0.07334146
  0.25804432  0.59477881  0.10382583  0.47255438  0.0747982   0.41586059
  0.54310507  0.68426668  0.14454108  0.62950246  0.30748958  0.56605352
  0.25072476  0.70945076  0.72311872  0.2357644   0.59668047  0.27536644
  0.96557189  0.97749755  0.95629738  0.15902741  0.32879056  0.60324024
  0.07463531  0.77562818  0.20181969  0.53088481  0.85723283  0.25163771
  0.06770161  0.45302361  0.3500556   0.37980214  0.87567327  0.94278158
  0.28586752  0.35682239  0.8746877   0.99562283  0.38323688  0.90561641
  0.64439454  0.53465359  0.37486244  0.33196021  0.99762377  0.29295412
  0.50162051  0.17312773  0.80100872  0.04233855  0.69062118  0.59194923
  0.65409137  0.25636784  0.40616824  0.82858658  0.90618301  0.87036914
  0.37534268  0.566982    0.55454063  0.75048023  0.56582157  0.62779239
  0.05196828  0.86418784  0.9862007   0.43015164  0.43576519  0.64918536
  0.99522735  0.81158283  0.02115479  0.47745413]
Converted to fixed-length strings
['0.256' '0.551' '0.395' '0.405' '0.758' '0.130' '0.844' '0.208' '0.321'
 '0.573' '0.722' '0.147' '0.623' '0.215' '0.969' '0.133' '0.069' '0.344'
 '0.587' '0.585' '0.322' '0.035' '0.676' '0.073' '0.258' '0.594' '0.103'
 '0.472' '0.074' '0.415' '0.543' '0.684' '0.144' '0.629' '0.307' '0.566'
 '0.250' '0.709' '0.723' '0.235' '0.596' '0.275' '0.965' '0.977' '0.956'
 '0.159' '0.328' '0.603' '0.074' '0.775' '0.201' '0.530' '0.857' '0.251'
 '0.067' '0.453' '0.350' '0.379' '0.875' '0.942' '0.285' '0.356' '0.874'
 '0.995' '0.383' '0.905' '0.644' '0.534' '0.374' '0.331' '0.997' '0.292'
 '0.501' '0.173' '0.801' '0.042' '0.690' '0.591' '0.654' '0.256' '0.406'
 '0.828' '0.906' '0.870' '0.375' '0.566' '0.554' '0.750' '0.565' '0.627'
 '0.051' '0.864' '0.986' '0.430' '0.435' '0.649' '0.995' '0.811' '0.021'
 '0.477'] 
```

这会快得多，但您仅限于固定长度的字符串。（显然，您可以更改长度。只需使用`x.astype('|S10')`或任何您想要的长度。）

但是，如果您只是想将数据写入文件，请再次使用`savetxt`.

# android - AudioManager.setStreamMute 不能独立用于 STREAM_RING 和 STREAM_NOTIFICATION？

> ID：13421842
> 
> 赞同：2
> 
> 时间：2012-11-16T17:51:02.807
> 
> 标签：android, android-notifications, android-audiomanager

我正在尝试使铃声静音，同时允许通知响起，反之亦然。在 Eclipse 中，我正在查看表达式窗口，并且对我所看到的值感到困惑，并希望任何人都可以对此有所了解：

```
 amanager.setStreamMute(AudioManager.STREAM_NOTIFICATION, true); //notifications
Toast.makeText(MyApplication.getAppContext(), "Stream Notification Muted", Toast.LENGTH_SHORT).show();

amanager.setStreamMute(AudioManager.STREAM_RING, false);//mute ringer = off
Toast.makeText(MyApplication.getAppContext(), "Stream Ringer UN-Muted", Toast.LENGTH_SHORT).show(); 
```

在表达式窗口中，我正在查看以下值：

```
 amanager.getStreamVolume(AudioManager.STREAM_RING) 
   amanager.getStreamVolume(AudioManager.STREAM_NOTIFICATION) 
```

它们开始时的音量都是 7。`amanager.setStreamMute(AudioManager.STREAM_NOTIFICATION, true)`执行时，它们都移动到 0。

然后，当`amanager.setStreamMute(AudioManager.STREAM_RING, false);`执行时，它们都移动到 7。

任何人都可以对此有所了解吗？我读到，从 ICS 开始，铃声和通知流现在是相互关联的，但是当我使用 API 级别 10 的模拟器时，我也看到了这一点。

有什么想法吗？提前致谢！

# java - Java JSON 无法获取数据库值

> ID：13421843
> 
> 赞同：0
> 
> 时间：2012-11-16T17:51:05.727
> 
> 标签：java, json

我对 Java 比较陌生，似乎无法找出问题所在，我调查了此事，即使我按照教程进行操作，我似乎仍然无法使其工作，它会看到文件，因为它给出了不同的当我尝试打开实际上不存在的文件时出错，但它无法从数据库中获取变量

我的代码：

```
 String userEnteredString = UserEntered.getText(); 
    String userHomeLocal = Tutschedule.userHome; 
    FileReader dataFile = null; 
    try {
        dataFile = new FileReader(userHomeLocal+"/Users/"+userEnteredString+".data");
    } catch (FileNotFoundException ex) {
        Logger.getLogger(LoginForm.class.getName()).log(Level.SEVERE, null, ex);
    }
    String dbData = dataFile.toString(); 
    System.out.println(dbData); 
    JSONObject dataInfo = (JSONObject)dbData.parse(dataFile); 
```

这是我的进口：

```
import java.io.*;
import java.util.Iterator;
//import java.io.FileNotFoundException;
import org.json.*;
//import java.io.FileReader; 
import java.util.logging.Level;
import java.util.logging.Logger;
import org.json.simple.parser.*; 
```

这是写入数据库的部分，我确信问题不在于这里，因为它写得很好，因为我检查了它创建的数据库及其在其中（当我发送用户登录表单的行不存在时现在想创建一个用户）：

```
public class Tutschedule {

// TODO Add the MySQL Database Support 

public static String userHome; 

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws JSONException {
boolean loggedIn = false; 

if (loggedIn != true) { 
LoginForm.LoginForm(); 
}

     userHome = System.getProperty("user.home")+"/TutSchedule"; 

System.out.print(userHome); 

Scanner scan = new Scanner(System.in); 

String username = scan.next(); 
String password = scan.next(); 

JSONObject user = new JSONObject(); 
user.put("username", username);
user.put("password", password); 

boolean dirCreate; 
String directories =userHome+"/Users"; 

dirCreate = (new File(directories)).mkdirs();

try {
FileWriter userDataFile = new FileWriter(userHome+"/Users/"+username+".data");
userDataFile.write(user.toString()); 
userDataFile.flush(); 
userDataFile.close();
} catch (IOException  e) { 
e.printStackTrace(); 
}
System.out.print(user); 
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:59:22.463

我怀疑你可能需要改变这个

```
JSONObject dataInfo = (JSONObject)dbData.parse(dataFile); 
```

至

```
JSONObject dataInfo = (JSONObject)JSONValue.parse(dataFile); 
```

因为 dbData 是一个字符串并且没有 parse() 方法。

# makefile - 如何在 GNU Make 的定义中使用 ifeq？

> ID：13421848
> 
> 赞同：10
> 
> 时间：2012-11-16T17:51:42.477
> 
> 标签：makefile

我正在尝试在 Makefile 中的定义中执行 ifeq，但我似乎遇到了一些错误，我想知道我是否遗漏了一些东西。我有以下 Makefile：

```
$(info ---- start ----)
ifeq ("X","Y")
$(info DOES not appear_1)
endif

define TESTDEF
ifeq ("X","Y")
$(info SHOULD not appear)
# $(error DEFINITELY SHOULD not error...)
endif
endef

$(eval $(call TESTDEF, 1,2,3)) 
```

我收到以下错误：

```
---- start ----
SHOULD not appear
Makefile:14: *** DEFINITELY SHOULD not error....  Stop. 
```

有什么我错过的技巧吗？是否可以在 ifeq 内部定义？（注意：这发生在我的原生 GNU 3.81 make 和我的 mips uclibc 交叉编译器上）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T18:32:15.303

当你使用`call`这个函数时，Make 使用你提供的任何参数来评估定义（在这种情况下不相关）。因此，如果定义包含类似`$(info ...)`or的内容`$(error ...)`，*即使在注释*中，Make 也会对其进行评估，您将看到结果（请参阅[文档](https://www.gnu.org/software/make/manual/html_node/Makefile-Contents.html)；我已经在 GNUMake 3.81 中对其进行了测试）。

要获得您想要的行为，请添加几个美元符号：

```
define TESTDEF
ifeq ("X","Y")
$$(info SHALL not appear)
# $$(info DEFINITELY SHALL not error...)
endif
endef

$(eval $(call TESTDEF)) 
```

# c++ - 模拟动态加载器以修复共享库偏移量

> ID：13421851
> 
> 赞同：11
> 
> 时间：2012-11-16T17:51:55.367
> 
> 标签：c++, c, embedded, shared-libraries

我在工作中有一个有趣的情况，我正在努力寻找一个好的解决方案。我们有在多核 MIPS 裸机（无内核）上运行的代码。我们需要与一些需要升级的第 3 方代码集成。我正在考虑将第 3 方代码编译为 PIC，然后在下载此代码时更改代码/数据符号的 GOT（我可以控制代码所在的位置）。此外，假设第 3 方代码的接口没有改变，因此没有新的 PLT/GOT 条目。这会工作吗？我还应该考虑哪些其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:24:45.747

Is the correct answer longer than "embed a dynamic linker/loader"? Your problem seems the same as that solved by ld.so and the likes. Describing all the things which a dynamic linker/loader must consider is the topic of books such as [Linkers and Loaders](http://www.iecc.com/linker/) by John Levine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:20:27.593

Linux/Unix binutils`objcopy`会是您正在寻找的吗？假设您正在一次构建所有二进制文件，而不是实际上想要在运行时以随机顺序动态加载它们[并且您没有足够的内存将它们分散到该内存中]，那么我认为这会起作用。

当然，如果您只需要修复 GOT，那么我不明白您为什么不能这样做 - 写一些东西并没有那么困难。但是 objcopy 已经写好了，并且可以做相当多的二进制/可执行“搞砸”（我已经用它为各种系统制作引导 rom，包括用于 PC 的 BIOS rom 等）[不是我想出来的有了这个想法，更像是我拿了某人的makefile，其中恰好有objcopy - 我只是看看它做了什么来了解它是如何在某个时候出现问题时制作rom的]

# android - 以编程方式将控件添加到自定义对话框

> ID：13421852
> 
> 赞同：1
> 
> 时间：2012-11-16T17:51:56.563
> 
> 标签：android, android-dialog

我想显示一个带有约 50 个自定义控件（开关按钮）的对话框。因此，最好的方法是在循环中以编程方式添加它们。我试图用一个包含唯一一个 GroupView 元素的布局制作一个 dilog：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:background="#AAAAAA"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <ViewGroup
        android:layout_height="500dp"
        android:layout_width="500dp"
        android:id="@+id/dlg_view"/>
</LinearLayout> 
```

然后只需使用以下方法在其中添加我的控件： onCreateDialog(...) 方法：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
LayoutInflater inflater = getLayoutInflater();
builder.setView(inflater.inflate(R.layout.geomap_menu, null))
          .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
              @Override
              public void onClick(DialogInterface dialog, int id) {
                 // sign in the user ...
              }
          })
          .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                  //LoginDialogFragment.this.getDialog().cancel();
              }
});

Dialog res = builder.create();
ViewGroup dlgView = (ViewGroup)res.findViewById(R.id.dlg_view);
MyControl myControl = new MyControl(this);
dlgView.add(myControl); 
```

但它不能以这种方式工作（它会抛出 InflateException）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:10:56.587

您的代码中的问题非常明显：

*   在您的布局文件中，您使用`ViewGroup`的是一个抽象类（Android 中所有布局的根）并且无法实例化，因此它很可能是您所说的膨胀异常的原因。使用`ViewGroup`, like`LinearLayout`等的子类之一`RelativeLayout`，哪个更适合您。

*   即使在完成我上面写的修改之后，您的代码仍然可以使用机器人。首先，`ViewGroup`该类没有`add`方法，您可能指的是其中一种`addView`方法。其次`dlgView`是`null`因为那一刻`Dialog`没有显示，所以没有`View`找到。您可以通过在`Runnable`您的一个视图上发布一个来延迟设置视图直到`Dialog`显示：

    ```
    final Dialog res = builder.create();
    oneOfYourViews.post(new Runnable() {

        @Override
        public void run() {
            ViewGroup dlgView = (ViewGroup) res.findViewById(R.id.dlg_view);
            MyControl myControl = new MyControl(context);
            dlgView.addView(myControl);             
        }
    }); 
    ```

代码补充：

```
View contentView = inflater.inflate(R.layout.geomap_menu, null)
ViewGroup dlgView = (ViewGroup) contentView.findViewById(R.id.dlg_view);
MyControl myControl = new MyControl(this);
dlgView.addView(myControl); // or add the other views in the loop as many as you want
builder.setView(contentView);
// rest of your code 
```

# ruby-on-rails - Rails - 在 Heroku 上创建“巨大”的 XML 文件

> ID：13421858
> 
> 赞同：1
> 
> 时间：2012-11-16T17:52:10.990
> 
> 标签：ruby-on-rails, ruby, heroku, amazon-s3

每月一次，我需要在我的 Rails 应用程序中创建将近 40MB 的 XML 文件并保存该文件。作为存储，我使用 Amazon S3 平台。当我在本地主机（Webrick 服务器）上执行此任务时，此任务大约需要 5 分钟 => 文件保存在 Amazon 的存储桶中。所有人都很高兴。

但是当我在 Heroku 上运行这个任务时，应用程序没有响应 45 分钟，并且文件没有保存在亚马逊中。

我知道 heroku 只允许运行一个任务 30 秒，但是在这段时间之后会显示一条错误消息并且任务正在后台运行。虽然此操作是应用程序“空闲”。

但是，文件没有被创建和保存怎么可能呢？Heroku 对文件传输或类似的东西有任何限制吗？

我整个下午都在寻找问题，但直到现在都没有成功。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:49:23.133

我很确定该进程在 30 秒后被终止，而不是按照您的建议在后台运行。使用delayed_job 获取后台，详见此处：[https](https://devcenter.heroku.com/articles/delayed-job) ://devcenter.heroku.com/articles/delayed-job 。如果你有一个创建和传输文件的方法，你可以使用delayed_job的延迟方法。请注意，delayed_job 会启动它自己的小环境。因此，在我的情况下，我将文件写入 tmp，然后将其传输到 S3，并注意所有工作都必须在同一个作业中完成，因为当第一个作业完成时，tmp 目录就会消失。

# c# - 在同一函数中使用 streamreader 和 streamwriter 时的范围问题

> ID：13421861
> 
> 赞同：1
> 
> 时间：2012-11-16T17:52:22.180
> 
> 标签：c#, scope, streamreader, streamwriter

这个问题包含了我在 C# 中遇到的两个问题（很可能是相互关联的）。我真的希望这在其他地方没有得到明确的回答，因为我不确定要使用什么搜索词，到目前为止还没有遇到任何可以令人满意地向我解释它的东西。我有一个`isHighScore()`在我的 C# 文字游戏中调用的函数。基本上发生的事情是，无论我尝试以不同的方式对其进行格式化、删除使用、try/catch，我似乎都无法将变量写入文件。我已经为第一次阅读本文的人大幅编辑了代码，以说明（对我而言）似乎更多的范围问题。

```
private void isHighScore() //Having problems...
    {
        string strHighScore;

        try
        {
            StreamReader readHighScore = new StreamReader(strPath + "WAHS.txt")

            strHighScore = readHighScore.ReadLine(); 
        }
        catch (Exception e)
        {
                MessageBox.Show(Convert.ToString(e.Message));
        }
... 
```

接下来，我将使用 StreamWriter 插入一个类似的块，并且我对 userScore 大于 strHighScore 的比较似乎没有评估为 true。是因为我的变量超出范围吗？如何在该 try-catch 范围之外读取更改的值，或者就此而言，如何读取带有 StreamReader 的 using 语句（我知道这是首选方法）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:59:13.987

我强烈敦促您完全摆脱*手动*调用`Close`。改用`using`语句。`StreamReader`实际上，如果您使用以下提供的便捷方法，则根本不需要`File`：

```
string fileName = Path.Combine(path, "WAHS.txt");
string highScoreLine = File.ReadLines(fileName).First();

string beforeSpace = highScoreLine.Split(" ")[0];
int highScore = int.Parse(beforeSpace);

int userScore = int.Parse(txtScore.Text);
if (userScore > highScore)
{
    MessageBox.Show("Congratulations! You set a new high score!", "High Score");
    File.WriteAllText(fileName, userScore.ToString());
} 
```

上述代码抛出的任何异常都应该在堆栈更高的其他地方捕获和处理。

（请注意，您*当前*的代码只会将现有的高分写回文件，而不是新的。）

如果您确信该文件将*仅*包含该行文本，则可以`File.ReadAllText`改用。

不过，解决您的困惑背后的根本问题可能更重要。你明白*为什么*`readHighScore`在你试图关闭它的地方无法访问吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:04:18.393

一切都与范围有关

`Try-catch`创建一个**新**的范围..

例如

```
try
{
int x=100;
}

catch
{
}
x=55;//you cant access x here 
```

但是，这会工作

```
int x=0;
try
{
x=100;
}
catch
{
}
x=55;//valid.. 
```

因此，`Finally`块`Catch`不能访问在`Try`块内声明的变量。

更多信息[在这里](https://stackoverflow.com/questions/94977/why-arent-variables-declared-in-try-in-scope-in-catch-or-finally)

更多一般信息[在这里](https://stackoverflow.com/questions/2049330/c-sharp-variable-scoping)

# google-tv - Google Anymote 协议 - 如何在没有键码的情况下发送字符

> ID：13421862
> 
> 赞同：0
> 
> 时间：2012-11-16T17:52:22.603
> 
> 标签：google-tv

我正在尝试使用[Anymote](https://developers.google.com/tv/remote/docs/anymote)协议为 Google TV 构建屏幕键盘。发送此处列出的密钥可以正常工作：

[http://code.google.com/p/anymote-protocol/source/browse/proto/keycodes.proto](http://code.google.com/p/anymote-protocol/source/browse/proto/keycodes.proto)

如何发送没有键码的键（如**& 号）**？在谷歌电视遥控器上，我按左移然后@。有没有可能效仿这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:07:56.693

您是否尝试过数据事件：[https ://developers.google.com/tv/remote/docs/anymote](https://developers.google.com/tv/remote/docs/anymote)

# xslt - 使用 xslt 更改 xml 结构

> ID：13421867
> 
> 赞同：-3
> 
> 时间：2012-11-16T17:52:32.913
> 
> 标签：xslt

我想使用 xslt 转换将以下源 xml 结构转换为目标 xml 结构。我无法使用 xslt 将以下源 xml 转换为目标 xml。请帮助我们解决这个问题。

源 XML

```
<XxhrPiEmpcompOutIntCollection>
  <XxhrPiEmpcompOutInt>
    <employeeNumber>
        200000562
    </employeeNumber>
    <competencyName>
        Comp1
    </competencyName>
    <proficiencyLevel>
        Prof1
    </proficiencyLevel>
    <compDateTo>
        16-NOV-12
    </compDateTo>
  </XxhrPiEmpcompOutInt>

   <XxhrPiEmpcompOutInt>
    <employeeNumber>
        200000562
    </employeeNumber>
    <competencyName>
        Comp2
    </competencyName>
    <proficiencyLevel>
        Prof2
    </proficiencyLevel>
    <compDateTo>
        16-NOV-12
    </compDateTo>
  </XxhrPiEmpcompOutInt>

</XxhrPiEmpcompOutIntCollection> 
```

目标 xml

```
<EmployeeCompetencyRequest>
    <EmployeeNumber>200000562</EmployeeNumber>
    <Competencies>
        <Competency>
            <Name>Comp1</Name>
            <ProficiencyLevel>Prof1</ProficiencyLevel>
            <EndDate>16-NOV-12</EndDate>
        </Competency>
        <Competency>
            <Name>Comp2</Name>
            <ProficiencyLevel>Prof2</ProficiencyLevel>
            <EndDate>16-NOV-12</EndDate>
        </Competency>
    </Competencies>
</<EmployeeCompetencyRequest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:30:52.803

对于 XSLT 1.0，您必须分组 widht xsl:key：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
              version="1.0">
<xsl:output method="xml" indent="yes"/>      

<xsl:key name="groups" match="/XxhrPiEmpcompOutIntCollection/XxhrPiEmpcompOutInt" use="employeeNumber" />

<xsl:template match="/">
    <EmployeeCompetencyRequest>
    <xsl:apply-templates select="//XxhrPiEmpcompOutInt[generate-id() = generate-id(key('groups', employeeNumber)[1])]"/>
    </EmployeeCompetencyRequest>
</xsl:template>

<xsl:template match="XxhrPiEmpcompOutInt">
    <Name><xsl:value-of select="employeeNumber"/></Name>
    <Competencies>
        <xsl:for-each select="key('groups', employeeNumber)">
                <Competency>
                    <Name><xsl:value-of select="competencyName"/></Name>
                    <ProfiencyLevel><xsl:value-of select="proficiencyLevel"/></ProfiencyLevel>
                    <EndDate><xsl:value-of select="compDateTo"/></EndDate>
                </Competency>
            </xsl:for-each>
    </Competencies>
</xsl:template>    
</xsl:stylesheet> 
```

我无法使用 Oracle 对其进行测试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:42:01.210

您可以使用 for-each-group 对用户进行分组：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
               exclude-result-prefixes="xs"
               version="2.0">
<xsl:output indent="yes"/>    

<xsl:template match="/">

    <EmployeeCompetencyRequest>
        <xsl:for-each-group select="//XxhrPiEmpcompOutInt" group-by="employeeNumber">
            <Name><xsl:value-of select="current-grouping-key()"/></Name>
            <Competencies>
            <xsl:for-each select="current-group()">   
                <Competency>
                    <Name><xsl:value-of select="competencyName"/></Name>
                    <ProfiencyLevel><xsl:value-of select="profiencyLevel"/></ProfiencyLevel>
                    <EndDate><xsl:value-of select="compDateTo"/></EndDate>
                </Competency>
            </xsl:for-each>
            </Competencies>
        </xsl:for-each-group>
    </EmployeeCompetencyRequest>

</xsl:template> 
```

致敬，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T18:32:37.923

一些提示：

```
<EmployeeCompetencyRequest>
 template match /XxhrPiEmpcompOutIntCollection
   for-each-group XxhrPiEmpcompOutInt group by employeeNumber
      <EmployeeNumber> value-of current-group-key </EmployeeNumber>
      <Competencies>
       for-each current-group
         <Competency>
            value-of name  
            value-of proficiencyLevel
         </competency>
      /for-each
     </Competencies>
  /for-each-group
 <EmployeeCompetencyRequest> 
```

希望你能完成它。

# unit-testing - 如何在 Jasmine 中模拟 Angular 服务的功能

> ID：13421869
> 
> 赞同：3
> 
> 时间：2012-11-16T17:52:39.973
> 
> 标签：unit-testing, mocking, angularjs, jasmine

我有以下角度控制器

```
function IndexCtrl($scope, $http, $cookies) {   

    //get list of resources
    $http.get(wtm.apiServer + '/v1/developers/me?access_token=' + $cookies['wtmdevsid']).
    success(function(data, status, headers, config) {
        // snip 
      }).
      error(function(data, status, headers, config) {
        // snip
      });

$scope.modal = function() {
      // snip
}

return;
} 
```

我想要做的是模拟 $http 服务上的 get 方法。这是我的单元测试代码：

```
describe('A first test suite', function(){
    it("A trivial test", function() {
         expect(true).toBe(true);
    });
});

describe('Apps', function(){
describe('IndexCtrl', function(){
    var scope, ctrl, $httpBackend;
    var scope, http, cookies = {wtmdevsid:0};

    beforeEach(inject(function($injector, $rootScope, $controller, $http) {
        scope = $rootScope.$new();

         ctrl = new $controller('IndexCtrl', {$scope: scope, $http: $http, $cookies: cookies});
         spyOn($http, 'get');
         spyOn(scope, 'modal');

    }));

    it('should create IndexCtrl', function() {
        var quux = scope.modal();
        expect(scope.modal).toHaveBeenCalled();
        expect($http.get).toHaveBeenCalled();
    });
  });
}); 
```

当我运行它时，我得到 ReferenceError: wtm is not defined。

wtm is a global object and of course it wouldn't be defined when I run my test because the code that it is declared in is not run when I run my test. What I want to know is why the real $http.get function is being called and how do I set up a spy or a stub so that I don't actually call the real function?

(inb4 hating on globals: one of my coworkers has been tasked with factoring those out of our code :) )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T18:55:50.017

我建议所有按照您在此处描述的方式使用的全局变量都应该通过`$window`服务使用。

所有可用的全局变量，例如 window.wtm，也将在 $window.atm 上可用。

然后，您可以完全删除您的 wtm 引用并以您已经描述的相同方式对其进行监视：

```
 var element, $window, $rootScope, $compile;

  beforeEach(function() {
    module('fooApp', function($provide) {
        $provide.decorator('$window', function($delegate) {

            $delegate.wtm = jasmine.createSpy();

            return $delegate;
        });
    });

    inject(function(_$rootScope_, _$compile_, _$window_) {
        $window = _$window_;
        $rootScope = _$rootScope_;
        $compile = _$compile_;
    });     

  }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T18:20:24.893

您需要在测试之前连接您的`whenGET`方法`$httpBackend`。`beforeEach()`尝试在您的测试功能中设置它......在“使用模拟后端的单元测试”下[有一个很好的例子。](http://docs.angularjs.org/api/ngMock.%24httpBackend)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T16:12:54.877

也许您可以围绕 $httpBackend 创建一个自定义包装模拟来处理您的特殊需求。

**详细地说，Angular 使用后到先服务的**策略覆盖同名组件，这意味着加载模块的顺序在测试中很重要。

当您定义另一个具有相同名称的服务并在第一个之后加载它时，将注入最后一个而不是第一个。例如：

```
apptasticMock.service("socket", function($rootScope){
  this.events = {};

  // Receive Events
  this.on = function(eventName, callback){
    if(!this.events[eventName]) this.events[eventName] = [];
    this.events[eventName].push(callback);
  }

  // Send Events
  this.emit = function(eventName, data, emitCallback){
    if(this.events[eventName]){
      angular.forEach(this.events[eventName], function(callback){
        $rootScope.$apply(function() {
          callback(data);
        });
      });
    };
    if(emitCallback) emitCallback();
  }

}); 
```

该服务提供完全相同的接口，其行为与原始服务完全相同，只是它从不通过任何套接字进行通信。这是我们要用于测试的服务。

考虑到角度的加载顺序，测试看起来像这样：

```
describe("Socket Service", function(){
  var socket;

  beforeEach(function(){
    module('apptastic');
    module('apptasticMock');

    inject(function($injector) {
      socket = $injector.get('socket');
    });
  });

  it("emits and receives messages", function(){
    var testReceived = false;

    socket.on("test", function(data){
      testReceived = true;
    });

    socket.emit("test", { info: "test" });
    expect(testReceived).toBe(true);
  }); 
```

});

这里重要的是`module('apptasticMock')`在`module('apptastic')`. 这会用模拟的套接字实现覆盖原始套接字实现。其余的只是正常的依赖注入过程。

[我写的这篇文章](http://southdesign.de/blog/mock-angular-js-modules-for-test-di.html)对你来说可能会很有趣，因为它涉及到更多的细节。

# java - Appengine 的计时器替换

> ID：13421872
> 
> 赞同：-2
> 
> 时间：2012-11-16T17:52:44.580
> 
> 标签：java, google-app-engine, gwt, timer

我正在从事 GWT Appenginge 项目。我从外部 api 获取数据，我想每分钟更新一次数据库。我刚刚发现 appengine 不允许使用计时器！为什么？？有什么解决方法，或者你认为我有一般的设计缺陷。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T18:01:31.347

您是否尝试过 App Engine cron 任务？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:58:23.747

您可能正在寻找与此类似的内容：[GWT、Google App Engine、TimerTask 或 ServiceImpl 中的线程抛出异常](https://stackoverflow.com/questions/1276984/gwt-google-app-engine-timertask-or-thread-in-serviceimpl-throw-exception)

此外，您可能想要更新您的问题标题 - 它似乎与您的问题无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-07T23:54:42.997

按要求回答您的问题：

> 我刚刚发现 appengine 不允许使用计时器！为什么？？

java.util.Timer 是使用 Thread 实现的，AppEngine 不允许，除非使用它自己的 API。所以当你尝试使用 java.util.Timer 时，你会得到一个异常：

```
java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "modifyThreadGroup")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:375)
    at java.security.AccessController.checkPermission(AccessController.java:565)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at com.google.apphosting.runtime.security.CustomSecurityManager.checkPermission(CustomSecurityManager.java:56)
    at com.google.apphosting.runtime.security.CustomSecurityManager.checkAccess(CustomSecurityManager.java:131)
    at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:315)
    at java.lang.Thread.init(Thread.java:378)
    at java.lang.Thread.<init>(Thread.java:432)
    at java.util.TimerThread.<init>(Timer.java:499)
    at java.util.Timer.<init>(Timer.java:101)
    at java.util.Timer.<init>(Timer.java:132) 
```

禁止任意线程创建使 AppEngine 系统更容易管理同一台机器上的多个应用程序，而不会过多地相互干扰。

AppEngine 正在提供一项名为“托管 VM”的新服务，该服务将允许您想要的任何环境，包括可以具有后台线程的完整 JVM： [https ://developers.google.com/appengine/docs/managed-vms/](https://developers.google.com/appengine/docs/managed-vms/)

请注意，此 API 当前处于“预览”状态，这意味着尚不建议将其用于可靠的生产用途。

# php - 使用 PHP 将 PDF 转为文本 - Windows Server

> ID：13421873
> 
> 赞同：0
> 
> 时间：2012-11-16T17:52:58.233
> 
> 标签：php, search, pdf, text

> **可能重复：**
> [如何从 PDF 文档中提取文本？](https://stackoverflow.com/questions/6999889/how-to-extract-text-from-the-pdf-document)

问题/应用程序：我正在运行 Apache 的 Windows 2008 服务器上使用 PHP/Java 构建系统。这个概念是用户将上传一个 PDF 文件。然后，我希望系统分析上传的 PFD 文件并使用我要设计的算法生成标题/描述。稍后我的搜索引擎将能够搜索存储的标题/描述以找到与搜索相关的 PDF。这将允许我搜索存储的 PDF 文件，而无需在搜索期间访问 PDF。

我需要的是一个脚本或代码，将 PDF 转换为文本并将其存储到一个数组或其他东西，然后我可以分解以获得我需要的东西。

我发现了其他使用 unix/linux 命令行技术的线程。但是，我还没有找到任何脚本可以让我在 Windows 上为 Apache 服务器执行所需的操作。

我可以为此使用的任何建议或替代技术将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:03:42.650

由于文本在其中的表示方式（作为二维表面上的绘图指令），将 PDF 文件转换为纯文本是有问题的，尤其是当源是多列时。

您可以使用许多开源工具和专有工具，但是在查看了所有工具之后，我可以自信地声明没有一个适用于所有情况。Google 搜索“PDF 到文本转换”会显示其中的大部分内容。

您可能还希望探索使用内置 PDF 转换的文本搜索引擎，如 SOLR 或弹性搜索，它们都是开源的并且基于 Apache Lucene。同样，谷歌搜索任何一个都会指向你他们各自的主页。

# python-3.x - 列表的有序列表

> ID：13421874
> 
> 赞同：0
> 
> 时间：2012-11-16T17:53:02.883
> 
> 标签：python-3.x, nested-lists

我需要创建一个 python 函数，该函数从名为“food.txt”的文件中读取和列出杂货，这样当在文本文件中找到新行时，就会在通用列表中创建一个新的列表分组。

食物.txt：

```
milk
cheese
bread

steak
chicken
potatoes 
```

^ 每个单词应该在自己的一行上，组之间有一个新行

输出：[['牛奶'，'奶酪'，'面包']，['牛排'，'鸡肉'，'土豆']]

到目前为止，我有：

```
 def build_grocery_list(file_name):
        outer_list=[]
        inner_list=[]

        food_list=open(file_name,"r")
        for line in food_list:
            line.strip('\n') # no white spaces in the list 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:00:08.700

试试这个（这是一个[要点](https://gist.github.com/4089505)）：

```
list_of_lists=[]
category=0
list_of_lists.append([])

f = open(file_name,'r')

for line in f.readlines():
    item = line.strip('\n') # no white spaces in the list
    if len(item) > 0:
         #add to current category
         list_of_lists[category].append(item)
    else:
         #add new category
         list_of_lists.append([])
         category = category + 1
f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:03:47.880

这是一个好的开始！您可以检查您正在阅读的行是否为空（`len(line.strip('\n')) > 0`）如果不是，则将行内容附加到`inner_list`，如果为空，则将完整附加`inner_list`到`outer_list`并以新的`inner_list`.

# java - 重新定义命名 Excel 范围，然后使用 Apache POI 保存

> ID：13421876
> 
> 赞同：6
> 
> 时间：2012-11-16T17:53:06.977
> 
> 标签：java, excel, apache-poi

使用 Apache POI，我可以找到一个命名范围：

```
XSSFName[] ranges = new XSSFName[workbook.getNumberOfNames()];
for (int i = 0; i < _wb.getNumberOfNames(); i++)
    ranges[i] = workbook.getNameAt(i); 
```

有了这个，我可以单元格一个AreaReference：

```
AreaReference area = new AreaReference(ranges[0].getRefersToFormula()); 
```

最后我可以得到该范围内的所有单元格：

```
CellReference[] cells = area.getAllReferencedCells(); 
```

这一切都很好。Burt 我有一个用例，我必须重新定义范围覆盖的区域。有没有办法做到这一点？我注意到该`range.getRefersToFormula()`方法返回一个字符串，类似于`MySheet!$A$1:$B$8`. 有一个`range.setRefersToFormula(String formula)`，但我必须相信除了自己编写一个 excel 范围公式解析器之外，还有其他方法。有没有办法用一组`Cell`更类型安全的引用来生成 AreaReference？我真的必须生成一个`String`来代表新的范围吗？我认为在某个地方会有 API 可以帮助我解决这个问题，但我似乎找不到它。

**更新**

我找到了一些API，但它似乎不起作用，至少它没有正确保存。这就是我所做的。

```
AreaReference newArea = new AreaReference(firstCell, lastCell);
ranges[0].setRefersToFormula(newArea.formatAsString()) 
```

似乎正确设置了公式，但是当我将工作簿流式传输回磁盘时，范围完全错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-17T17:36:53.677

您可以更新现有参考并根据您的要求进行设置。假设引用包含`TestSheet!$A$1:$B$8`并且您想将其更改为 `MySheet!$B$5:$C$12`

对于任何单元格，例如“B5”，在运行时，

```
cell.getReference(); 
```

将为您提供单元格引用（例如......它将返回“B5”）

```
char startCellColRef = cell.getReference().toString().charAt(0); 
```

将为您提供列参考（如果当前单元格为 B5，将为您提供“B”）。现在

```
int startCellRowRef = cell.getReference().toString().charAt(1); 
```

会给你行索引（如果当前单元格是 B5，会给你“5”）。

通过同样的方式，您可以获得开始和结束单元格引用（例如 B5 和 C12）。

现在来了如何更新现有的引用。只需使用新创建的引用字符串更新其值

```
Name reference = wb.getName("NameReferenceInExcelSheet");
referenceString = sheetName+"!$"+startCellColRef+"$"+startCellRowRef+":$"+endCellColRef+"$"+endCellRowRef;
reference.setRefersToFormula(referenceString); 
```

# error-handling - 在动作调用后在 Struts 2 拦截器中添加动作消息

> ID：13421880
> 
> 赞同：1
> 
> 时间：2012-11-16T17:53:24.190
> 
> 标签：error-handling, struts2, struts, action, interceptor

在 JSON 结果中传递操作消息时，我遇到了一个独特的问题。

现在，如果我在我的操作中添加一个操作消息（在 JSON 操作中），我将在 JavaScript 中获取它并捕获操作消息并通过 JGrowl 提醒用户。但是，我不希望在每个操作中添加操作消息的逻辑。我有一个在请求之间共享请求上下文的底层服务项目，我可以在那里添加警告消息。我想做的是将这些警告消息转换为在我的前端使用的操作消息，但操作永远不必知道它们。这很有用，因为我可以在访问数据库时插入警告，或者如果有毛茸茸的业务规则等。

正如我之前提到的，直接在动作中添加它们时它已经工作了，所以我知道 JSON 结果可以正常工作并正确传递动作消息。我们已经有一个拦截器，每次都会被命中来管理这个请求上下文，所以我想在这个拦截器中的操作消息上附加到被调用的操作。

但是，我发现的问题是我需要先调用 actionInvocation.invoke() ，因为会因此生成任何警告消息。之后，我检查消息并尝试将它们作为操作消息应用。这些操作消息永远不会出现在我的 JSON 响应中，所以我想知道是否可以在调用 invoke() 之后将这些消息添加到拦截器的响应中。这是我的拦截方法的大部分内容：

```
 try {           
        // Invoke the action.
        String result = actionInvocation.invoke();

        //add all warning messages as an action message to be displayed on that front end
        if (CollectionUtils.isNotEmpty(context.getWarningMessages())) {

            ActionSupport action = (ActionSupport) actionInvocation.getAction();

            for (String s : context.getWarningMessages()) {
                action.addActionError(s);
            }
        }

        return result; 
```

我尝试添加逻辑以在 finally 块中添加操作消息，而不是在调用 invoke() 之后无济于事。

谢谢，安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:40:45.257

结果已经由时间`invoke`返回呈现。

您需要按照[“编写拦截器”文档](http://struts.apache.org/2.x/docs/writing-interceptors.html)中的讨论[实现 a`PreResultListener`](http://struts.apache.org/2.x/docs/preresultlistener.html)。

# jquery - 让我的列表视图滚动而不是消失在我的页脚后面

> ID：13421882
> 
> 赞同：2
> 
> 时间：2012-11-16T17:53:33.013
> 
> 标签：jquery, list, mobile

这就是我目前正在做的事情：http: [//i.imgur.com/QyGiM.png](http://i.imgur.com/QyGiM.png)

基本上，它是一个使用 jQuery 和一些 AJAX 访问 Web 服务的列表，该服务访问数据库并根据用户在上一个菜单中的选择拉出相应的狗。

这是针对移动应用程序的，我希望能够向上/向下滚动列表，同时将页眉/页脚保持在各自的位置。

以下是相关代码：

列表 ：

`<div ID="dogs" style="text-align:center;width:100%;overflow:auto ">`

页脚：

`<div data-role="footer" id="footer" class="footer" style="background: url('images/footer.png');width:100%;height:87px;"> footer {position: absolute; bottom: 0; z-index: 1;}`

现在，在进行研究时，我发现在使用 touchOverflow 之前，我必须添加以下内容：

`<script> $(document).bind("mobileinit", function(){ $.mobile.touchOverflowEnabled = true; }); </script>`

我有，但没有运气。所以在我看来，我要么需要做一些 CSS 魔术，要么 jQuery 为我准备了其他东西。无论哪种方式，我都喜欢你的帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:02:15.993

试试`position: fixed`你的页脚。

# css - 在 IE 9 中无法正确显示字体大小

> ID：13421888
> 
> 赞同：1
> 
> 时间：2012-11-16T17:53:56.220
> 
> 标签：css, internet-explorer-9

在网站[http://hanling.focusww.com](http://hanling.focusww.com)

与 Firefox、Chrome 或 Safari 相比，IE 9 中的 h2 标记中的标题文本很大。

我正在寻找解决此问题的建议。

这是一个wordpress网站。

（这篇文章是从 Wordpress Stack 交换中迁移而来的）

建议的答案：如果您确实迁移，请查看此内容以获取可能的答案。

似乎 IE9 不能很好地处理所有字体，所以你可能想提供你自己的 IE9 来阅读这里[https://github.com/twitter/bootstrap/issues/3116](https://github.com/twitter/bootstrap/issues/3116)和这里[@font-face 在 IE8 中工作但不是IE9](https://stackoverflow.com/questions/4607560/font-face-works-in-ie8-but-not-ie9)

似乎是字体粗细问题

回应：我们没有嵌入任何字体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T18:40:30.260

答案就在您的`font-family`声明中：

```
font-family: Bookman, serif; 
```

如果未找到*Bookman ，浏览器将回退到链中的下一个可用字体。*在这种情况下，您只有一个回退，并且设置为*serif*。

问题是 Firefox 正在回退到它的默认衬线字体：*Times New Roman*，而 IE9 正在回退到它的默认衬线字体（这是不同的）：*Batang*。您可以通过将声明更改为以下内容来解决此问题：

```
font-family: Bookman, "Times New Roman", serif; 
```

所以现在它会首先回退到 Times New Roman，如果该字体不可用，那么它将回退到*serif*，这将是浏览器默认的 serif 字体。

# wpf - Wpf面板布局 - 一个孩子，几个位置

> ID：13421890
> 
> 赞同：2
> 
> 时间：2012-11-16T17:54:11.660
> 
> 标签：wpf, layout, panel, instance

我正在开发具有自定义布局逻辑的 WPF 面板衍生产品，有时在遵循该布局逻辑时，该组件可能应该在两个地方可见。同一组件的两个实例将被部分裁剪。是否可以这样做 - 在排列过程中在两个不同的位置布置一个子组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:16:08.827

我认为面板行为是用于在视图中排列项目，而不是用于复制项目。我认为这是不可能的。如果你复制一个视觉元素，那么它就不一样了。如果您想获得这种效果，您可以使用 a`VisualBrush`并用它绘制一些区域，并将您可能想要复制的控件设置为画笔。使用`VisualBursh`您将看到一个控制副本，但您将无法对其进行修改。另一种方法是使用自定义控件来制作此效果。其他方式可能是使用两个不同的自定义面板，它们都具有相同的项目源（在某些情况下是`ItemsPanel`某个集合）。

希望这个回答对你有帮助...

# php - 检索控制器外部 url 传递的路由参数，symfony2

> ID：13421893
> 
> 赞同：1
> 
> 时间：2012-11-16T17:54:25.763
> 
> 标签：php, symfony

我正在尝试在我的控制器之外访问我的 slug 参数。

我有一个这样的路由 YML：

```
adgroup:
    pattern:  /adgroup/{id}
    defaults: { _controller: ExampleBundle:AdGroup:index }
    requirements:
        id: \d+ 
```

..和这样的网址：

```
http://example.com/adgroup/25 
```

我需要一种方法来访问 {id} 变量而不从我的控制器获取它，我的控制器工作正常。但是，我正在尝试构建一个对象，该对象将严重依赖传入的 Slugs。

到目前为止，搜索文档和许多许多示例让我无处可去。

**我试过什么：** 我已经 var_dumped 整个 Request::createFromGlobals 方法，它的孩子们看看它是否存储在那里。事实并非如此。

另外，由于我在开发环境中，symfony 中的调试工具栏在分析器中清楚地显示 Request: id: 25 。

所以问题是......我如何从控制器外部获取我的 slugs / slug 值？

我有太多的控制器来尝试从那里一个一个地传递它们，并且通过爆炸 URL 来破解它只是一个坏主意。:-)

我想有一些我不知道的方法来访问这些？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T18:59:06.433

我认为这段代码会帮助你

```
$params = $container->get('request')->attributes->get('_route_params');
$id = $params['id']; 
```

# javascript - Jquery对角滚动Div

> ID：13421895
> 
> 赞同：-1
> 
> 时间：2012-11-16T17:54:29.633
> 
> 标签：javascript, jquery, html, scroll

如果你看这个插件：[http ://cubiq.org/infiniwall](http://cubiq.org/infiniwall)

您可以在任何方向滚动 div 容器，而不仅仅是水平或垂直，您还可以在滚动期间更改方向而无需移开手指。

我怎样才能做到这一点？我似乎找不到允许它的插件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:59:54.847

我相信你只需要注意`<div id="infiniwall">`使用`var iw = new InfiniWall('#infiniwall');``<!DOCTYPE html>`

[https://github.com/cubiq/infiniwall/tree/master/demos/simple](https://github.com/cubiq/infiniwall/tree/master/demos/simple)

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>InfiniWall - Indefinitely panning layer in Javascript</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <script src="../../src/infiniwall.js"></script>
</head>

<style>
* {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

body, ul, li {
    padding: 0;
    margin: 0;
    border: 0;
}

#infiniwall {
    margin: 140px auto 0 auto;
    width: 510px;
    height: 420px;
    background: #ddd;
    overflow: hidden;
    position: relative;
}

ul {
    position: absolute;
    top: -140px;
    left: -170px;
    width: 850px;
    height: 700px;
    list-style: none;

    -webkit-transform: translate(0px, 0px) translateZ(0);
    -moz-transform: translate(0px, 0px) translateZ(0);
    -ms-transform: translate(0px, 0px) translateZ(0);
    -o-transform: translate(0px, 0px) translateZ(0);
    transform: translate(0px, 0px) translateZ(0);
}

li {
    display: block;
    position: relative;
    float: left;
    width: 170px;
    height: 140px;
    -webkit-transform: translate(0px, 0px) translateZ(0);
    -moz-transform: translate(0px, 0px) translateZ(0);
    -ms-transform: translate(0px, 0px) translateZ(0);
    -o-transform: translate(0px, 0px) translateZ(0);
    transform: translate(0px, 0px) translateZ(0);
    display: block;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    border-right: 1px solid #000;
    border-bottom: 1px solid #000;
    overflow: hidden;
}

li img {
    position: absolute;
}

.spinner {
    display: block;
    position: absolute;
    width: 40px;
    height: 40px;
    left: -9999px;
    top: 50%;
    margin-top: -35px;
    margin-left: -20px;
    background: url(images/loading.png) no-repeat;
}

.loading .spinner {
    left: 50%;
    -webkit-animation: spin 2s linear infinite;
    -moz-animation: spin 2s linear infinite;
    -o-animation: spin 2s linear infinite;
    animation: spin 2s linear infinite;
}

@keyframes spin {
    from {
        -webkit-transform: rotate(0deg);
        -moz-transform: rotate(0deg);
        -ms-transform: rotate(0deg);
        -o-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    to {
        -webkit-transform: rotate(360deg);
        -moz-transform: rotate(360deg);
        -ms-transform: rotate(360deg);
        -o-transform: rotate(360deg);
        transform: rotate(360deg);
    }
}

@-moz-keyframes spin {
    from {
        -webkit-transform: rotate(0deg);
        -moz-transform: rotate(0deg);
        -ms-transform: rotate(0deg);
        -o-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    to {
        -webkit-transform: rotate(360deg);
        -moz-transform: rotate(360deg);
        -ms-transform: rotate(360deg);
        -o-transform: rotate(360deg);
        transform: rotate(360deg);
    }
}

@-webkit-keyframes spin {
    from {
        -webkit-transform: rotate(0deg);
        -moz-transform: rotate(0deg);
        -ms-transform: rotate(0deg);
        -o-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    to {
        -webkit-transform: rotate(360deg);
        -moz-transform: rotate(360deg);
        -ms-transform: rotate(360deg);
        -o-transform: rotate(360deg);
        transform: rotate(360deg);
    }
}

@-o-keyframes spin {
    from {
        -webkit-transform: rotate(0deg);
        -moz-transform: rotate(0deg);
        -ms-transform: rotate(0deg);
        -o-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    to {
        -webkit-transform: rotate(360deg);
        -moz-transform: rotate(360deg);
        -ms-transform: rotate(360deg);
        -o-transform: rotate(360deg);
        transform: rotate(360deg);
    }
}

.loading img {
    left: -9999px;
}

li span {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: rgba(0,0,0,0.6);
    color: #fff;
    padding: 5px;
    font-size: 19px;
}

</style>
<body>
    <div id="infiniwall">
        <ul>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>

            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>

            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>

            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>

            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>

<script>
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
var iw = new InfiniWall('#infiniwall');
</script>

</body> 
```

# oracle - Oracle中的stuff函数的使用方法

> ID：13421902
> 
> 赞同：0
> 
> 时间：2012-11-16T17:55:01.847
> 
> 标签：oracle

几个月前我问了 Oralce 中的 stuff 函数问题，并想重新讨论这个问题。问题是在使用 WM_CONCAT 函数（在 Oracle 中）时，结果在我想要填充的字段的前面或前面包含 (,)。

我用谷歌搜索找到解决方案，但到目前为止没有成功。为了删除我想要填充的字段的额外空字符串，我应该在 WM_CONCAT 函数中包含什么？

我在下面有一些示例记录

```
CREATE TABLE #TEMP
(
  COMPANY VARCHAR (50),
  ID INT,
  PRODUCT VARCHAR(50)
)

INSERT INTO #TEMP VALUES ('APPLES', '123', 'IPHONE4')
INSERT INTO #TEMP VALUES ('APPLES', '123', 'IPHONE4S')
INSERT INTO #TEMP VALUES ('APPLES', '123', 'IPHONE5')

INSERT INTO #TEMP VALUES ('SAMSUNG', '124', 'GALAXY S2')
INSERT INTO #TEMP VALUES ('SAMSUNG', '124', 'GALAXY S3')
INSERT INTO #TEMP VALUES ('SAMSUNG', '124', 'GALAXY S4')

INSERT INTO #TEMP VALUES ('NOKIA', '125', 'C5-02')
INSERT INTO #TEMP VALUES ('NOKIA', '125', 'C5-03')
INSERT INTO #TEMP VALUES ('NOKIA', '125', 'C5-04') 
```

运行此查询时，它生成为

```
SELECT
COMPANY,
ID,
WM_CONCAT(PRODUCT) AS PRODUCT, --STUFF PRODUCT COLUMN
FROM
(
   SELECT
   COMPANY,
   ID,
   PRODUCT
   FROM #TEMP
 )
GROUP BY COMPANY, ID

COMPANY     ID      PRODUCT
APPLES      123     IPHONE4, IPHONE4S, IPHONE5
SAMSUNG     124     ,GALAXY S2, GALAXY S3, GALAXY S4
NOKIA       125     ,C5-02, C5-03, C5-04 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:02:19.010

只需更换：

```
WM_CONCAT(PRODUCT) 
```

和：

```
LTRIM(WM_CONCAT(PRODUCT),',') 
```

这将从您的列中删除所有前导逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:04:04.040

尝试使用以下查询

```
SELECT
COMPANY,
ID,
WM_CONCAT(PRODUCT) AS PRODUCT
FROM
(
   SELECT
   COMPANY,
   ID,
   PRODUCT
   FROM TEMP
 )
GROUP BY COMPANY, ID 
```

这是您正在寻找的输出吗？

```
NOKIA   125 C5-02,C5-04,C5-03
APPLES  123 IPHONE4,IPHONE5,IPHONE4S
SAMSUNG 124 GALAXY S2,GALAXY S4,GALAXY S3 
```

查询也可以这样

```
SELECT
COMPANY,
ID,
WM_CONCAT(PRODUCT) AS PRODUCT
FROM TEMP
--(
--   SELECT
--   COMPANY,
--   ID,
--   PRODUCT
--   FROM TEMP
-- )
GROUP BY COMPANY, ID 
```

# android - 如果该号码已占用，则重拨或重新加载 href 电话

> ID：13421909
> 
> 赞同：3
> 
> 时间：2012-11-16T17:55:31.723
> 
> 标签：android, href, tel

我正在使用 href tel: 为 Android 等手机成功创建可点击链接。但是，如果该号码正在使用/忙碌（无法访问），则似乎没有 fall=back 选项来重拨或重新加载页面。

如果在操作系统内部发生这种情况，是否可以刷新或重拨页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-08T18:49:11.840

该功能显然不在网站或网络应用程序的控制范围内，因为到那时它已经将呼叫的控制权转移到了电话应用程序。

因此，不，您将无法从电话应用程序向网页发送“回调”等指示失败的信息。事实上，无论如何，这可能是一个隐私问题。

至于刷新或重拨，您可能得到的最接近的方法是将“刷新页面”挂钩放在单击 href tel: 与 javascript 的链接的操作上，这是一个相对简单的过程，在其他地方有很好的记录。

# java - 从文档侦听器返回一个值

> ID：13421910
> 
> 赞同：1
> 
> 时间：2012-11-16T17:55:31.387
> 
> 标签：java, listener, jtextpane, documentlistener, documentfilter

我有 2 个 java 类。一旦将文档侦听器添加到文档（HTMLDoc）。另一个是实现 DocumentListener 的类。

我希望能够向此类返回一个值，以便我知道文档何时更改，以便我可以删除不需要的 html，这些 html 被粘贴并导致 JTextPane 出现问题。

```
doc = (HTMLDocument) kit.createDefaultDocument();
//setContentType("text/html");
doc.addDocumentListener(new CTextPaneListener()); 
```

这是监听器类

```
public class CTextPaneListener implements DocumentListener
{

    // Gives notification that an attribute or set of attributes changed.
    @Override public void  changedUpdate(DocumentEvent e)
    {
        //System.out.println("DEBUG: changedUpdate() called");
    }

    //Gives notification that there was an insert into the document.        
    @Override public void insertUpdate(DocumentEvent e)
    {
        // I want to be able to return a value or a form a detection
        // so I can tell when there has been a insert.
    }

    //Gives notification that there was a remove from the document.                     
    @Override public void   removeUpdate(DocumentEvent e)
    {
        //System.out.println("DEBUG: removeUpdate called");
    }
} 
```

我做了一点java，但已经有几年了，所以我有点生疏了。谢谢你的时间。

编辑：这是我的自定义 DocumentFilter，我最初认为这会捕获粘贴，但是似乎只有 DocumentListener 正在捕获粘贴。

```
public class CTextPaneFilter extends DocumentFilter
{
    public CTextPaneFilter(Document doc)
    {
        this(doc, 0);
    }

    public CTextPaneFilter(Document doc, int maxChars) {
        this.doc = doc;
        maxCharacters = maxChars;
    }       
    /**
    * Specifies the maximum text input length of the text pane.
    */
    public void setMaxLength(int len)
    {
        maxCharacters = len;
    }
    /**
    * Invoked prior to insertion of text into the specified Document. 
    */
    @Override public void insertString(DocumentFilter.FilterBypass fb, int offset,      String string, AttributeSet attr) throws BadLocationException
    {
    /**
    * Teuncates the inserted string so the contents
    * would be exactly maxCharacters in length.
    */
    System.out.println("insert");

    if (maxCharacters == 0 || (doc.getLength() + string.length()) <= maxCharacters) {
                        fb.insertString(offset, string, attr);
    } else {
        if (doc.getLength() < maxCharacters) {
            fb.insertString(offset, string.substring(0, maxCharacters - doc.getLength()), attr);
        }
    //Toolkit.getDefaultToolkit().beep();
    }
// other overridden methods below 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:13:33.720

看看[DocumentFilter](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/DocumentFilter.html)。它允许您在将文本写入文档之前重新格式化文本。

# silverlight - 处理文本（字体、字符）的新应用程序的最佳框架

> ID：13421912
> 
> 赞同：0
> 
> 时间：2012-11-16T17:55:45.107
> 
> 标签：silverlight, letter-spacing

我需要创建应用程序，用户可以使用它来处理图形界面中的文本。用户可以在父面板/画布或其他东西内移动文本对象、更改字体、更改字符大小（高度、宽度）、字符间距等。

申请对象：

在处理文本结束时（或处理时），用户将获得每个字符的位置、字符的高度和宽度、字符之间的距离（间距）。所有这些度量必须采用相同的度量单位（像素、点）。

所以问题是：什么样的框架（.NET、Silverlight、XNA、Flash、Java、HTML 5、Javascript 等）可以用于此。

我“出卖了我的灵魂”给了微软（之前只使用过 .NET），但在 Flash、HTML、Javascript、Java 方面有一些经验。所以欢迎所有建议

尝试使用 Silverlight，但唯一的问题是间距（动态变化），当尝试使用 Glyphs 时，它以某种方式工作，唯一的问题是：当使用 Glyphs 间距发生变化时（所有字符都相同），视觉间距不同所有字符。所以间距问题是目前最大的。

另一种方法可以是处理文本作为字符的集合，并自己计算字符之间的距离。但是在应用程序中，每个用户都可以使用自己的自定义字体（我的知识还不够）。所以我担心我们需要创建（绘制）字体的每个字符才能使用自定义字体。

我在 Internet 上发现一些应用程序做几乎相同的事情（在 Javascript 中完成），但在开始之前想要获得有关其他可能性的更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T05:56:37.277

# wget - 使用下载的 wget

> ID：13421920
> 
> 赞同：1
> 
> 时间：2012-11-16T17:56:19.443
> 
> 标签：wget

`wget`我下载了使用的源代码`apt-get source wget`。我想稍微修改一下，然后使用它`wget`而不是我在`/usr/bin/wget`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:09:59.343

`apt-get source wget`正在检索您的发行版的源代码`wget`。

您可能希望使用真正的上游`wget`源代码，您可以`wget`通过以下链接获取（使用某些或某些浏览器）[http://www.gnu.org/software/wget/](http://www.gnu.org/software/wget/)

然后您配置、构建和安装 - 通常使用，`./configure; make; sudo make install`但细节可能因包而异。您应该查看名为`README`和`INSTALL`

您也可能对[libcurl感兴趣](http://curl.haxx.se/libcurl/)

请注意，如果您重新分发改进的软件二进制文件的补丁版本， [GPL](http://www.gnu.org/licenses/gpl.html)许可证或多或少需要您发布补丁（以源代码形式）`wget`

# google-apps-script - 在 Google Apps 脚本中构建应用程序的限制

> ID：13421921
> 
> 赞同：2
> 
> 时间：2012-11-16T17:56:23.380
> 
> 标签：google-apps-script

我们是 Google Apps for Your Domain 企业帐户和房地产经纪公司。我们想要构建一个将多个 Google Apps 服务联系在一起的 Web 应用程序。如果我们可以在 Google Apps Script 中完成这一切，那就太好了，但同时可能会扩展 Google Apps Script 中可能的限制。我们没有时间或资源使用 Google Web Toolkit (GWT) 进行完整的应用程序开发。框架方法是正确的解决方案吗？

我们想要构建一个应用程序，允许我们的代理创建房地产列表记录。每条记录很大，每条记录有 300 - 400 个表单字段，具体取决于属性类型。许多字段是“查找”字段，具有选择列表格式或多复选框格式的特定值。（例如屋顶类型 = 选择一项：石板、瓦片、卷屋顶；电器 = 选择所有：冰箱、炉灶、洗碗机等）

每条记录还需要原始高分辨率格式的相关照片以及在各种环境中显示的较小分辨率集。每条记录将有 24-50 张 1MB 照片。我认为我们可以为照片使用和集成 Google Drive，因为可以简化用户将文件夹从桌面拖放到 Google Drive 的过程。将图像存储在 Google Drive 中，并且仅从应用程序中引用将解决部分隐含的存储问题。我读到 Google Apps Script 中有一个 200MB 的 [ScriptDb 配额，](https://stackoverflow.com/questions/11286412/scriptdb-quota-in-google-apps-script)因此我可以看到仅对“数据”而言，这可能是一个潜在的交易破坏者。我没有确切的数据库存储要求，但我知道我们将有 700 条记录开始，这个数字将增长到几千条。

该应用程序的用户都是内部用户，因此 GAFYD 身份验证集成是一个很好的好处。

目前还没有表单api，那么我们首先如何创建数据输入表单呢？看来我们需要手动创建表单，或者创建一个示例电子表格来自动生成表单。但是，我们如何增强表单以修改选择列表和附加验证规则，以及动态表单行为，例如根据用户输入创建/显示/隐藏其他元素（例如输入房间数；然后输入每个房间的尺寸）。

另一个潜在的阻碍是调整照片的大小。我们希望访问原始照片以创建进一步的营销材料，但是在应用程序 UI 中，我们需要使用更小尺寸的各种尺寸的图像以提高效率。（例如，用一个缩略图显示属性列表以表示每条记录）我猜 Google Drive api 中会有一些方法来创建子文件夹来存储调整大小的图像，但是是否可以访问像 gd 这样的图形处理软件（可能通过API 到 picasa）？

一条记录应该可以在不同的布局和视图中查看。例如完整的记录详细信息、摘要视图、营销传单视图。

创建记录后，需要将消息发送给创建记录的代理，以及处理记录的内部团队，以处理包括文案撰写/审查 + 营销在内的工作流。这似乎可能适合新的 Google 群组？一旦记录被“批准”，则应用程序需要向数百个外部收件人生成营销电子邮件；根据来自各种池的业务规则进行选择。因此，应用程序需要额外的存储空间，或者可能需要集成地址簿才能管理联系人。

未来对记录的编辑（例如价格更改、照片更改）需要触发审查/批准工作流程。

Google Apps 脚本是否能够处理此类应用程序的大小、范围和复杂性？或者，推荐的路线是使用诸如[http://bcosca.github.com/fatfree/](http://bcosca.github.com/fatfree/)之类的微框架来使用它们各自的 API 将所有 Google Apps 组件联系在一起吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T01:14:32.913

> 目前还没有表单api，那么我们首先如何创建数据输入表单呢？

实际上有两个：UiApp（以及它的拖放式 GUI Builder）和 HtmlService 都可以显示任意复杂的表单。

> 我认为我们可以为照片使用和集成 Google Drive，因为可以简化用户将文件夹从桌面拖放到 Google Drive 的过程。

Drive 与 Apps 脚本集成。

> 我没有确切的数据库存储要求，但我知道我们将有 700 条记录开始，这个数字将增长到几千条。

您可能想尝试将 Google Cloud SQL 作为您的存储，它在 Apps Script 中得到 100% 的原生支持，并且是一个“真正的”SQL 数据库。但是，如果您将照片存储在 Drive 中，那么几千条记录是很小的……在这种情况下，ScriptDb 可能会扩展到几百万条记录。

集成了 Google 群组和联系人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T01:15:43.497

谷歌的文档可以在这里找到：[https ://developers.google.com/google-apps/](https://developers.google.com/google-apps/)

Google Apps 脚本有时非常强大，但对于您所暗示的数据量而言，它的速度不会很快。

正如您所说，ScriptDB 有大小限制，因此它不能存储所有内容。电子表格限制为每张工作表 256 列和 400000 个单元格。我解决这个问题的方法是将我的数据分成一组带有一组工作表的电子表格。如果您从事房地产行业，您可能可以按地区和社区/区域拆分数据以实现类似的目标。如果你真的想压缩东西，你可以将一行数据作为字符串化的 JSON 对象存储在一个单元格中。但是，它将不再是人类可读的。

除非您愿意为存储支付额外费用，否则您的图片听起来会很快填满云端硬盘帐户。我不熟悉小工具中的图像，所以我不确定它们是否可以从云端硬盘中嵌入。

我没有使用 Forms 的经验，但是您可以使用 UiApp 构建一个小工具并在电子表格上调用 appendRow 以添加所有字段的内容。通过像这样构建您的应用程序，您可以为事物指定有效值（并从“配置”电子表格中读取这些值）。

# tfs-sdk - TFS API：保存测试运行后无法添加测试点

> ID：13421927
> 
> 赞同：3
> 
> 时间：2012-11-16T17:57:01.980
> 
> 标签：tfs-sdk

（环境：VSTS2010 使用 IronPython 和 TFS SDK）

**工作流程 #1** 以下工作流程的行为符合我的预期：

1.  创建一个新的测试运行
2.  添加测试点
3.  保存测试运行

*我的预期行为*：测试运行与测试点一起保存。

*观察到的行为*：符合我的预期行为 - 已通过 testrun.QueryTestResults() 调用验证。

**工作流程 #2** 以下工作流程的行为与我预期的不同：

1.  创建一个新的测试运行
2.  添加测试点
3.  保存测试运行
4.  添加另一个测试点
5.  保存测试运行

*我的预期行为：*测试运行应该与测试点一起保存。

*观察到的行为：*第一个测试点被保存。初始保存后的所有其他测试点都不会保存。没有错误抛出或来自 SDK 的任何反馈指示失败。

**工作流程 #3** 同样，以下工作流程的行为与我预期的不同：

1.  通过 id testManagementService.QueryTestRuns("SELECT * FROM TestRun WHERE TestRunId=%s" % testrunId) 获取现有的测试运行
2.  添加测试点
3.  保存测试运行

*我的预期行为：*测试运行应该与测试点一起保存。
*观察到的行为：*未添加添加的测试点。没有错误抛出或来自 SDK 的任何反馈指示失败。

谁能解释为什么观察到的行为与我在工作流 #2 和 #3 上的预期行为不同？

**更新 (2012-11-16 12:00 CST)**

回答（编辑）我自己的问题，因为挖掘这个问题并不简单。

在执行 msdn.microsoft.com 搜索后，我在[http://blogs.msdn.com/b/nidhithakur/archive/2011/04/08/importing-testcase-results-to-mtm.aspx](http://blogs.msdn.com/b/nidhithakur/archive/2011/04/08/importing-testcase-results-to-mtm.aspx)找到了以下段落（搜索术语：itesrun 添加测试点失败）。

> 为了能够将结果添加到此测试计划中，请在测试计划中创建一个新的测试运行。映射字典中存在的测试点并添加到此测试运行中。理想情况下，您应该能够在将测试点添加到运行时添加结果，**但 run.Save() API 现在仅适用于单个 Save**。因此，您需要添加所有测试点，保存测试运行，然后遍历运行集合以单独添加结果。为了获得更好的性能，请在添加/更新所有结果后保存一次结果集合。

所以这似乎是 VSTS2010 的一个限制。您无法在第一次测试运行保存后添加测试点。

# .net - 隐藏变量

> ID：13421928
> 
> 赞同：4
> 
> 时间：2012-11-16T17:57:04.913
> 
> 标签：.net, vb.net, visual-studio-2010

快速愚蠢的问题：是否可以隐藏 VB.NET 中属性使用的变量名？

我主要是一名 C# 程序员，目前正在帮助朋友解决一些 VB.NET 的问题。无论如何，我有一个名为 的字符串`stateprovincename`和一个名为 的属性`StateProvinceName`。VS 似乎不喜欢这种命名约定，并声明它们实际上是一回事。想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T18:01:00.883

VB.Net[不区分大小写](https://stackoverflow.com/questions/2300983/is-vb-really-case-insensitive)。

*   尝试类似`_stateProvinceName`或（[此处](https://stackoverflow.com/questions/2526346/naming-conventions-for-private-members-of-net-types)`mStateProvinceName`讨论命名约定）。
*   或者使用[自动属性](https://stackoverflow.com/questions/5582836/does-vb-net-support-automatic-getters-and-setters-on-properties)，它会隐式声明一个隐藏的后备变量，但您将无法在`Get`and中编写自定义代码`Set`。`Public Property StateProvinceName As String`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T18:00:50.740

与大多数其他语言不同，VB.Net 对变量名称不区分大小写，因此标准约定是在本地添加某种前缀以将其与属性区分开来。

# python-2.7 - pandas：按二级索引范围切片 MultiIndex DataFrame

> ID：13421929
> 
> 赞同：4
> 
> 时间：2012-11-16T17:57:11.160
> 
> 标签：python-2.7, pandas, multi-index

已经发布了可以在多索引熊猫系列上对第二个索引进行切片：

```
import numpy as np
import pandas as pd

buckets = np.repeat(range(3), [3,5,7])
sequence = np.hstack(map(range,[3,5,7]))

s = pd.Series(np.random.randn(len(sequence)), 
              index=pd.MultiIndex.from_tuples(zip(buckets, sequence)))

print s

0  0    0.021362
   1    0.917947
   2   -0.956313
1  0   -0.242659
   1    0.398657
   2    0.455909
   3    0.200061
   4   -1.273537
2  0    0.747849
   1   -0.012899
   2    1.026659
   3   -0.256648
   4    0.799381
   5    0.064147
   6    0.491336 
```

然后要获取第一个索引 = 1 的前三行，您只需说：

```
s[1].ix[range(3)]

0   -0.242659
1    0.398657
2    0.455909 
```

这适用于一维系列，但不适用于 DataFrame：

```
buckets = np.repeat(range(3), [3,5,7])
sequence = np.hstack(map(range,[3,5,7]))

d = pd.DataFrame(np.random.randn(len(sequence),2), 
                 index=pd.MultiIndex.from_tuples(zip(buckets, sequence)))

print d

            0         1
0 0  1.217659  0.312286
  1  0.559782  0.686448
  2 -0.143116  1.146196
1 0 -0.195582  0.298426
  1  1.504944 -0.205834
  2  0.018644 -0.979848
  3 -0.387756  0.739513
  4  0.719952 -0.996502
2 0  0.065863  0.481190
  1 -1.309163  0.881319
  2  0.545382  2.048734
  3  0.506498  0.451335
  4  0.872743 -0.070985
  5 -1.160473  1.082550
  6  0.331796 -0.366597

d[1].ix[range(3)]

0  0    0.312286
   1    0.686448
   2    1.146196
Name: 1 
```

无论第一个索引级别如何，它都会为您提供“第 1”列数据和前三行。对于多索引 DataFrame，如何获取第一个 index=1 的前三行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:42:03.293

```
d.xs(1)[0:3]

          0         1
0 -0.716206  0.119265
1 -0.782315  0.097844
2  2.042751 -1.116453 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T17:41:32.790

.loc 效率更高，并且可以同时进行评估

s.loc[pd.IndexSlice[1],:3] 将返回第 0 级 = 1 和 [0:3] 条目。

# php - Mysql / PHP 添加 AND 如果输入了多个 $_POST 数据

> ID：13421930
> 
> 赞同：0
> 
> 时间：2012-11-16T17:57:17.247
> 
> 标签：php, mysql, post, if-statement

我在一个表单中有多个 POST 数据字段并想查询 mysql 数据库，如果只输入一个 POST 数据字段，一切正常，但如果有两个或更多字段，我会收到错误，因为我需要在我的问题之间输入 AND。

```
$sql ="SELECT * FROM  `medlem` WHERE";

if(!empty($_POST[fnamn])){
    $a=mysql_real_escape_string($_POST['fnamn']);
    $sql .= " `Fornamn` LIKE '%$a%'";
}
if(!empty($_POST[enamn])){
    $a=mysql_real_escape_string($_POST['enamn']);
    $sql .= " `Efternamn` LIKE '%$a%'";
}
if(!empty($_POST[adress])){
    $a=mysql_real_escape_string($_POST['adress']);
    $sql .= " `adress` LIKE '%$a%'";
}
if(!empty($_POST[postnr])){
    $a=mysql_real_escape_string($_POST['postnr']);
    $sql .= " `postnr` LIKE '%$a%'";
}
if(!empty($_POST[stad])){
    $a=mysql_real_escape_string($_POST['stad']);
    $sql .= " `stad` LIKE '%$a%'";
}
if(!empty($_POST[pnr])){
    $a=mysql_real_escape_string($_POST['pnr']);
    $sql .= " `pnr` LIKE '%$a%'";
}
if(!empty($_POST[tfn])){
    $a=mysql_real_escape_string($_POST['tfn']);
    $sql .= " `tfn` LIKE '%$a%'";
}
if(!empty($_POST[mobil])){
    $a=mysql_real_escape_string($_POST['mobil']);
    $sql .= " `mobil` LIKE '%$a%'";
}
if(!empty($_POST[epost])){
    $a=mysql_real_escape_string($_POST['epost']);
    $sql .= " `epost` LIKE '%$a%'";
} 
```

如果用户填写了两个帖子字段，我会得到“SELECT * FROM `medlem`WHERE Fornamn `LIKE 'foo' Efternamn`LIKE 'bar'，并且它们之间缺少 AND。这个问题有简单的解决方案吗？

皮疹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:06:52.393

您可以循环执行

```
$params = array(
    'fnamn' => 'Fornamn',
    'enamn' => 'Efternamn',
    'adress' => 'adress',
    'postnr' => 'postnr',
    'stad' => 'stad',
    'pnr' => 'pnr',
    'tfn' => 'tfn',
    'mobil' => 'mobil',
    'epost' => 'epost'
);
$condition = array();
foreach ($params as $key => $field) {
    if (isset($_POST[$key]) && !empty($_POST[$key])) {
        $a = mysql_real_escape_string($_POST[$key]);
        $condition[] = "`{$field}` LIKE '%{$a}%'";
    }
}

$slq = 'select * from `medlem` where '.implode(' and ', $condition); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T18:00:40.117

## 停止！

欢迎来到堆栈溢出！[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

您看到这个的原因是因为您正在构建没有`OR`or的查询`AND`。（需要分隔逻辑语句）。

最好的解决方案是将所有查询部分添加到一个数组中，并使用`" AND "`.

# c# - 连接两个 ViewModel

> ID：13421943
> 
> 赞同：3
> 
> 时间：2012-11-16T17:58:02.527
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, entity-framework

我有两个要连接的相同 ViewModel 实例：

```
var queryNew = from a in ICDUnitOfWork.AlphaGroups.Find()
                           join e in ICDUnitOfWork.Alphas.Find()
                               on a.AlphaGroupID equals e.AlphaGroupID into g
                           join c in ICDUnitOfWork.Codes.Find()
                               on a.CodeID equals c.CodeID into co
                           select new HomeSearchViewModel
                                      {
                                          Alphas = g,
                                          AlphaGroups = a,
                                          AlphaGroupCode = co.FirstOrDefault(),
                                          SearchTerm = searchTerm,
                                          AlphasCodes = null
                                      };

var codequery = from a in ICDUnitOfWork.Alphas.Find()
                join c in ICDUnitOfWork.Codes.Find()
                on a.CodeID equals c.CodeID into g
                select new HomeSearchViewModel
                       {
                          AlphasCodes = g
                       };

var allResults = queryNew.Concat(codequery); 
```

这给了我一个错误说明：

> *“ICD.ViewModels.HomeSearchViewModel”类型出现在单个 LINQ to Entities 查询中的两个结构不兼容的初始化中。可以在同一个查询中的两个位置初始化一个类型，但前提是在两个位置都设置了相同的属性并且这些属性以相同的顺序设置。*

我怎样才能将这些结果结合在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:17:15.427

那么解决方案对我来说真的很愚蠢。我在尝试加入的表中添加了一个导航属性，现在一切正常。

哎呀！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:09:41.113

您可以尝试事先评估查询，调用类似“ToList()”的内容：

```
var allResults = queryNew.ToList().Concat(codequery.ToList()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:14:58.017

如果您不介意将其作为两个查询进行，那么调用`AsEnumerable()`将毫无问题地在本地内存中连接。

```
var result = queryNew.AsEnumerable().Concat(codequery); 
```

在这里`AsEnumerable()`仍然会推迟查询的执行（这是您的代码似乎建议的），但是如果您想立即执行 Arthur 建议并调用缓存函数，例如`ToList()`或`ToArray()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T14:34:27.413

您必须填写 null 所有其他属性

```
var codequery = from a in ICDUnitOfWork.Alphas.Find()
                join c in ICDUnitOfWork.Codes.Find()
                on a.CodeID equals c.CodeID into g
                select new HomeSearchViewModel
                       {
                          Alphas = null,
                          AlphaGroups = null,
                          AlphaGroupCode = null,
                          SearchTerm = null,
                          AlphasCodes = g
                       };

var allResults = queryNew.Concat(codequery); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T18:13:03.497

`Concat`在这里做的事情并不正确，一个简单的`for`循环就足够了。从您查询的外观来看，您可能会使用`AlphaGroupCode`作为映射的唯一标识符，例如

```
var codequery = ...
                select new HomeSearchViewModel
                {
                    AlphaGroupCode = c.FirstOrDefault()
                    AlphasCodes = g
                };

foreach (var q in queryNew)
{
    q.AlphaCodes = codequery.Where(x => x.AlphaGroupCode == q.AlphaGroupCode)
                            .FirstOrDefault()
                            .AlphaCodes;
} 
```

# android - 带有 UI 和内存泄漏的保留片段

> ID：13421945
> 
> 赞同：33
> 
> 时间：2012-11-16T17:58:19.437
> 
> 标签：android, memory-leaks, android-fragments

我已经读过`.setOnRetainInstance(true)`在呈现 UI 的片段上的设置可能会导致内存泄漏。

有人可以解释为什么以及如何发生这种情况吗？我在任何地方都没有找到详细的解释。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-16T19:06:14.853

在`Fragment`with UI 中，您经常将一些`View`s 保存为实例状态以加快访问速度。例如指向您的链接，`EditText`这样您就不必一直访问`findViewById`它。

问题是 a`View`保持对`Activity`上下文的引用。现在，如果您保留 a`View`您还保留对该上下文的引用。

如果上下文仍然有效但典型的保留情况是重新启动 Activity，那没问题。例如，经常用于屏幕旋转。活动重新创建将创建一个新的上下文，而旧的上下文将被垃圾收集。但它现在不能被垃圾收集，因为你`Fragment`仍然引用旧的。

以下示例显示了如何不这样做

```
public class LeakyFragment extends Fragment {

    private View mLeak; // retained

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        mLeak = inflater.inflate(R.layout.whatever, container, false);
        return mLeak;
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        // not cleaning up.
    }
} 
```

为了摆脱这个问题，你需要清除所有对你的 UI 的引用`onDestroyView`。一旦`Fragment`实例被重用，您将被要求在`onCreateView`. 将 UI 保留在`onDestroyView`. Ui 不会被使用。

此示例中的修复只是更改`onDestroyView`为

```
@Override
public void onDestroyView() {
    super.onDestroyView();
    mLeak = null; // now cleaning up!
} 
```

除了保留对`View`s 的引用之外，您显然不应该保留对`Activity`（例如 from `onAttach`- clean on `onDetach`）或任何`Context`（除非它是`Application`上下文）的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T18:03:23.090

`setRetainInstance(true)`用于在 Activity 重新创建期间保留动态片段的实例，例如屏幕旋转或其他配置更改。但这并不意味着 Fragment 将被系统永远保留。

当 Activity 因其他原因终止时，例如用户完成 Activity（即按回），Fragment 应该有资格进行垃圾回收。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-03T16:24:43.697

保留与 Activity 耦合的某些对象时要小心。

**注意：**虽然您可以返回任何对象，但您绝不应该传递与 Activity 相关联的对象，例如**Drawable**、**Adapter**、**View**或与 Context 关联的任何其他对象。如果这样做，它将泄漏原始活动实例的所有视图和资源。（资源泄漏意味着您的应用程序会保留它们并且它们不能被垃圾收集，因此可能会丢失大量内存。）

[http://developer.android.com/guide/topics/resources/runtime-changes.html#RetainingAnObject](http://developer.android.com/guide/topics/resources/runtime-changes.html#RetainingAnObject)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-21T21:21:35.493

“setRetainInstance”用于在重新创建活动时维护片段的状态。根据官方文档：如果我们使用“setRetainInstance”，片段生命周期的2个方法（onCreate，onDestroy）将不会被执行。但是，片段中包含的视图将被重新创建，这是因为生命周期将从“onCreateView”执行。在这些情况下，如果我们在“onSaveInstanceState”中保存了一些数据，我们应该在“onActivityCreated”而不是“onCreate”中请求它。

官方信息：[https://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean)](https://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean))

更多信息：[https ://inthecheesefactory.com/blog/fragment-state-saving-best-practices/en](https://inthecheesefactory.com/blog/fragment-state-saving-best-practices/en)

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2016-04-14T09:18:33.590

您可以覆盖`onDestroy()` 并调用垃圾收集器。

```
 @Override
public void onDestroy() {
    super.onDestroy();
    System.gc();
    System.gc();
} 
```

# matplotlib - 在熊猫时间序列图中从 Axes.get_xlim() 获取可用日期

> ID：13421947
> 
> 赞同：6
> 
> 时间：2012-11-16T17:58:23.760
> 
> 标签：matplotlib, pandas

我正在尝试从使用熊猫创建的时间序列图中将绘图的 xlimits 作为 python 日期时间对象。使用`ax.get_xlim()`将轴限制返回为 a `numpy.float64`，我不知道如何将数字转换为可用的日期时间。

```
import pandas 
from matplotlib import dates
import matplotlib.pyplot as plt
from datetime import datetime
from numpy.random import randn

ts = pandas.Series(randn(10000), index=pandas.date_range('1/1/2000',
    periods=10000, freq='H')) 
ts.plot()
ax = plt.gca()

ax.set_xlim(datetime(2000,1,1))
d1, d2 = ax.get_xlim()
print "%s(%s) to %s(%s)" % (d1, type(d1), d2, type(d2))

print "Using matplotlib: %s" % dates.num2date(d1)
print "Using datetime: %s" % datetime.fromtimestamp(d1) 
```

返回：

```
262968.0 (<type 'numpy.float64'>) to 272967.0 (<type 'numpy.float64'>)
Using matplotlib: 0720-12-25 00:00:00+00:00
Using datetime: 1970-01-03 19:02:48 
```

根据[pandas timeseries docs](http://pandas.pydata.org/pandas-docs/stable/timeseries.html)，pandas 使用 numpy.datetime64 dtype。我正在使用熊猫版本'0.9.0'。

我使用`get_xlim()`的是直接访问 pandas 系列，因为当用户在绘图区域中移动时，我使用 `xlim_changed`回调来做其他事情。

## 破解以获取可用值

对于上面的示例，限制从 Epoch 开始以*小时为单位返回。*所以我可以转换为自 Epoch 以来的*秒数*`time.gmtime()`，并使用它来获得可用的地方，但这仍然感觉不对。

```
In [66]: d1, d2 = ax.get_xlim()

In [67]: time.gmtime(d1*60*60)
Out[67]: time.struct_time(tm_year=2000, tm_mon=1, tm_mday=1, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=5, tm_yday=1, tm_isdst=0) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-13T20:20:51.573

[matplotlib.dates](http://matplotlib.org/api/dates_api.html)的当前行为：

> datetime 对象被转换为浮点数，表示自 0001-01-01 UTC 以来的天数加上 1。例如，0001-01-01, 06:00 是 1.25，而不是 0.25。辅助函数 date2num()、num2date() 和 drange() 用于促进轻松转换为日期时间和数字范围。

pandas.tseries.converter.PandasAutoDateFormatter() 似乎建立在此之上，所以：

```
x = pandas.date_range(start='01/01/2000', end='01/02/2000')
plt.plot(x, x)
matplotlib.dates.num2date(plt.gca().get_xlim()[0]) 
```

给出：

```
datetime.datetime(2000, 1, 1, 0, 0, tzinfo=<matplotlib.dates._UTC object at 0x7ff73a60f290>) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T20:28:22.530

```
# First convert to pandas Period
period = pandas.tseries.period.Period(ordinal=int(d1), freq=ax.freq)
# Then convert to pandas timestamp
ts = period.to_timestamp()
# Then convert to date object
dt = ts.to_datetime() 
```

# sql - 如何为 char(10) 类型的对象预留时间

> ID：13421948
> 
> 赞同：0
> 
> 时间：2012-11-16T17:58:25.783
> 
> 标签：sql, postgresql, postgresql-9.2, schedule

`Postgresql 9.2`保留表包含`objekt2`类型为 的列`char(10)`。

以下代码用于创建非重叠预订表：

```
CREATE TABLE reservat (
  id serial primary key,
  objekt2 char(10) references yksus2,
  during tsrange,
  rida int references rid on delete cascade not null,
  EXCLUDE USING gist (objekt2 text_pattern_ops WITH =, during WITH &&)
); 
```

这会导致错误：

> 错误：访问方法“gist”不存在运算符类“text_pattern_ops”

如何修复此错误，以便`char(10)`类型列可用于预订，并且不允许相同`objekt2`值的重叠预订？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:37:34.900

您需要使用[btree_gist](http://www.postgresql.org/docs/9.2/static/btree-gist.html "btree_gist")扩展。文档中有一个关于此的示例：[范围约束](http://www.postgresql.org/docs/9.2/static/rangetypes.html#RANGETYPES-CONSTRAINT)

# fortran - PGI Fortran 整数格式

> ID：13421949
> 
> 赞同：1
> 
> 时间：2012-11-16T17:58:31.543
> 
> 标签：fortran

我有一个包含整数记录的输入文本文件，例如：

```
1 
```

在 Fortran 代码中读取为：

```
read(iunit,'(i4)') int_var 
```

这适用于 Gfortran，但使用 PGI Fortran 编译器编译的相同代码需要 4 个字符宽的字段（实际记录只有 1 个字符）并引发错误。现在我知道格式指定了宽度，根据 Fortran 标准，这可能是正确的行为，也可能不是正确的行为，但我的问题是 - **PGI 是否有一个编译器选项可以使它在这方面表现得像 Gfortran？**

我正在使用的这个第 3 方代码有很多（数百或数千）这样的读取语句，并且输入数据有很多“错误”宽度的记录，因此修改代码或输入数据都需要付出很大的努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:23:15.057

我不认为这与`blank`. 这`read`不会导致错误，除非您使用`pad="no"`. 默认为 allways `pad="yes"`，如果输入记录太短，则会用空格填充。

你确定，你使用正确的输入文件，正确的行结束？源自 Windows 和 Unix 的文本文件可能存在问题，可以在输入记录中读取 CR。在这种情况下，使用该`unix2dos`实用程序可能会有所帮助。您可以尝试`character(4)`使用编辑描述符读取字符串`a4`来测试这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:14:08.783

PGI Fortran 是否支持开放关键字blank="null"？我认为这会将读取更改为您想要的行为并最大限度地减少对代码的修改。blank="null" 与 blank="zero" 在 gfortran 4.7 中似乎没有区别。

# jquery - 我在使用 jQuery 加载和解析 XML 时遇到问题，我做错了什么？

> ID：13421951
> 
> 赞同：2
> 
> 时间：2012-11-16T17:58:38.160
> 
> 标签：jquery, xml, ajax

我正在尝试从 XML 文件中读取设置。我认为我没有正确加载对象，或者我的选择器没有按照我的想法进行。函数内部的日志消息`appendImages`不执行，我不知道为什么。

```
$(document).ready(function() {
  $.ajax({
    type: "GET",
    url: "banner_slider/settings.xml",
    dataType: "xml",
    success: startSlider
  });
});

function startSlider(xml) {
  var bWidth = $('#banner').width(), bHeight = $('#banner').height();
  bWidth += 'px';
  bHeight += 'px';
  $('#banner').attr( 'style', 'height: '+bHeight );
  $('#banner').attr( 'style', 'width: '+bWidth );
  $('#banner img').attr( 'id', 'origImg');
  appendImages( bWidth, bHeight, xml );
  $('#origImg').remove();
  $('#banner').cycle();
}

function appendImages( bWidth, bHeight, xml ) {
  console.log('appendImages executed');
  $(xml).find('img').each(function() {
    var path = $(this).text(); 
    console.log('path: '+path); 
    $('#banner').append('<img width="'+bWidth+'" height="'+bHeight+'" src="'+path+'" />');
  });
} 
```

XML 示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<images>
    <img>test1</img>
    <img>test2</img>
    <img>test3</img>
</images> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:14:41.200

试试这个，你必须将响应传递给成功处理程序，我已经修改了你的代码以删除设置，但你可以添加它们并使用[`.parseXML`](http://api.jquery.com/jQuery.parseXML/)而不是使用 jquery 的 DOM 遍历方法来遍历 xml

```
 function startSlider(xml) {  
     console.log("xml recieved successfully");
     console.log(window.$xml);
  appendImages(window.$xml);

}

function appendImages( xml ) {
  console.log('appendImages executed');
  xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc ),
    $imgArr = $xml.find( "img" );
    console.log($imgArr);
    $($imgArr).each(function(i,j){
    console.log($(j).text());

    });

}
$(function(){
    window.$xml="<images><img>test1</img><img>test2</img><img>test3</img></images>";

$.ajax({
     type: "GET",
     url: "/echo/json/",
     dataType: "xml",  
     success: startSlider(window.$xml)
 });
}); 
```

[DMEO](http://jsfiddle.net/xMEmH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:04:24.877

我认为您需要将数据从 ajax 回调正确地移交给您的函数。

```
 success: function(data, textStatus, jqXHR) {
        startSlider(data);
   } 
```

[在JSFIDDLE](http://jsfiddle.net/ymdEj/)上查看这个演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:25:31.470

一旦 Musa 修复了语法错误，我的代码就会按预期运行。谢谢你。

```
$(document).ready(function() {
  $.ajax({
    type: "GET",
    url: "banner_slider/settings.xml",
    dataType: "xml",
    success: startSlider
  });
});

function startSlider(xml) {
  var bWidth = $('#banner').width(), bHeight = $('#banner').height();
  bWidth += 'px';
  bHeight += 'px';
  $('#banner').attr( 'style', 'height: '+bHeight );
  $('#banner').attr( 'style', 'width: '+bWidth );
  $('#banner img').attr( 'id', 'origImg');
  appendImages( bWidth, bHeight, xml );
  $('#origImg').remove();
  $('#banner').cycle();
}

function appendImages( bWidth, bHeight, xml ) {
  console.log('appendImages executed');
  $(xml).find('img').each(function() {
    var path = $(this).text(); 
    console.log('path: '+path); 
    $('#banner').append('<img width="'+bWidth+'" height="'+bHeight+'" src="'+path+'" />');
  });
} 
```

示例 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<images>
    <img>test1</img>
    <img>test2</img>
    <img>test3</img>
</images> 
```

[http://jsfiddle.net/mowglisanu/yQLx6/](http://jsfiddle.net/mowglisanu/yQLx6/)

# node.js - 如何更改节点运行时版本

> ID：13421952
> 
> 赞同：0
> 
> 时间：2012-11-16T17:58:41.663
> 
> 标签：node.js, cloud-foundry

我想在 cloud Foundry 中使用 nodejs 0.6 或更高版本。目前我的应用程序使用 v0.4.12。我在 manifest.yaml 下尝试过，但没有运气。接下来我该怎么做？任何帮助，将不胜感激

谢谢

```
--- 
applications: 
  .: 
    name: shanbhag
    framework: 
      name: node06
      info: 
        mem: 64M
        description: Node.js Application
        exec: 
    url: ${name}.${target-base}
    runtime: node06
    mem: 64M
    instances: 1
    services: 
      mongodb-fc654: 
        type: mongodb 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T18:49:33.410

部署应用程序时，像这样指定运行时版本；

```
vmc push myapp --runtime=node06 
```

或者对于 node.js 0.8

```
vmc push myapp --runtime=node08 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T18:08:54.290

你有 package.json 文件吗？如果是这样，请更新引擎部分：

```
"engines": {
    "node": "0.8.x"
  } 
```

[此外，位于http://docs.cloudfoundry.com/frameworks/nodejs/nodejs.html](http://docs.cloudfoundry.com/frameworks/nodejs/nodejs.html)的 Cloud Foundry 文档包含有关此主题的一些信息。您可能需要运行他们提到的一些命令。

# c++ - 在c中创建一种查找表

> ID：13421955
> 
> 赞同：-5
> 
> 时间：2012-11-16T17:59:04.147
> 
> 标签：c++, arrays, string

这是我的代码：

```
int month()
  {
      //this array contains all of the months names
       char months[24] = {'JANUARY', 'FEBURARY',  'MARCH ', 'APRIL', 'MAY', 'JUNE',      'JULY',
                 'AUGUST', 'SEPTEMBER', 'OCTOBER', 'NOVEMBER', 'DECEMBER', 'JAN',
                 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEPT', 'OCT', 'NOV',         'DEC'};

       char month_name[10];  // a null terminating char array for your month of birth
       cin >> month_name;

       for(int j = 0; j <= 24; j++ )
           {
             if(month_name == months[j])
           {
              return month_name;
           }
             else
           {
             cout << "\n" << endl;
             show_error();
             cout << "\n" << endl;
             bFlag = false;
             return bFlag;
           }
          }

        } 
```

每当我尝试运行它时，我都会收到消息警告：隐式常量转换溢出。这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:08:49.533

首先，您的月份名称应该在`"`引号之间，并使其成为一个数组`char *`

char* 月[] = {“一月”、“二月”、...“十二月”}

然后，如果返回值是，而不是使用`==`use来比较字符串，则您有一个匹配项。`_stricmp``0`

`i`in表示忽略大小写（因此通过`_stricmp`对小写字母进行比较，“January”和“january”被认为是相等的），否则使用`strcmp`

`_stricmp`记录[在这里](http://msdn.microsoft.com/en-us/library/k59z8dwe%28v=vs.80%29.aspx)（`stricmp`在 Visual Studio 中已弃用）但检查来自 mux 的评论，我不熟悉该功能，但他可能是对的！

正如 Nik B. 指出的那样，您应该始终返回一个 int。当您找到月份时，返回其索引 ( `j`)。看看您现在如何为月份添加短名称，您可以使用 0 到 11 与 1 月到 12 月保持对应关系

```
return j % 12; 
```

# java - Android 上的 IPv6 套接字

> ID：13421962
> 
> 赞同：10
> 
> 时间：2012-11-16T17:59:23.527
> 
> 标签：java, android, sockets, tcp, ipv6

我正在尝试在两个 Android 设备之间创建 IPv6 TCP 连接。但是创建套接字总是失败。

如果我这样实例化它：

```
Inet6Address dest = (Inet6Address) InetAddress.getByName(addressString);
Socket socket = new Socket(dest, portNumber); 
```

我得到以下异常：

```
java.net.ConnectException: failed to connect to *address* (port *portNumber*): connect failed: EINVAL (Invalid argument) 
```

如果我像这样实例化我的 IPv6Address 对象：

```
Enumeration<NetworkInterface> networkInterfaces = NetworkInterface.getNetworkInterfaces();
NetworkInterface wifiInterface = null;
while (networkInterfaces.hasMoreElements()) {
  NetworkInterface networkInterface = networkInterfaces.nextElement();
  if (networkInterface.getDisplayName().equals("wlan0") || networkInterface.getDisplayName().equals("eth0")) {
    wifiInterface = networkInterface;
    break;
  }
}
Inet6Address dest = Inet6Address.getByAddress(null, addressBytes, wifiInterface );
Socket socket = new Socket(dest, portNumber); 
```

调用 Socket 构造函数时出现此错误：

```
java.net.ConnectException: failed to connect to *address* (port *portNumber*): connect failed: EADDRNOTAVAIL (Cannot assign requested address) 
```

这发生在带有 Jelly Bean 的 Galaxy Nexus 和带有 Gingerbread 的 Nexus One 上。

难道我做错了什么？创建这样的套接字的正确方法是什么？

另外：[这篇文章](https://stackoverflow.com/questions/10563018/android-and-ipv6-in-java)建议使用构造函数

```
Inet6Address getByAddress (String host, byte[] addr, int scope_id) 
```

在这种情况下，我必须使用什么作为 scope_id？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T16:50:22.277

由于您的 IP 地址是本地链接，因此可能必须使用范围 ID 或接口创建它，以便操作系统知道将其绑定到哪个接口。至于指定 scope_id，Android 文档似乎有些欠缺。[此处](http://docs.oracle.com/javase/6/docs/api/java/net/Inet6Address.html)的 Oracle 文档表明范围 ID 是系统特定的，无法以编程方式确定。

因此，我会尝试使用您明确指定要使用的 NetworkInterface 的备用工厂方法。有关详细信息，请参见[此处](http://developer.android.com/reference/java/net/Inet6Address.html#getByAddress%28java.lang.String,%20byte%5B%5D,%20java.net.NetworkInterface%29)。NetworkInterface 类中有一些方法可以发现系统上存在哪些接口。

# c++ - 无法分配抽象类型的对象 - 但该类不是抽象的！(C++)

> ID：13421963
> 
> 赞同：3
> 
> 时间：2012-11-16T17:59:24.037
> 
> 标签：c++

我正在做系统编程作业。我必须实施一所大学。我有一个 Course 课程，有子课程 ComputerScience 课程课程、PG 课程课程和选修课程课程。

```
class Course
{
public:
    virtual void teach();
    virtual void reg(Student &s)=0;
    std::string getName();
    std::string getDepartment();
    int getSemester();
    int getMinGrade();
    void addStudent(Student *s);
    void removeStudent(Student *s);

protected:
    std::string _department;
    std::string _name;
    int _semester;
    int _minGrade;
    std::vector<Student*> studentsList;  
};

class CSCourse : public Course
{
public:
    CSCourse();
    CSCourse(std::string department, std::string name, int semester, int mingrade);
    ~CSCourse();
    std::string getName();
    std::string getDepartment();
    int getSemester();
    int getMinGrade();
    void addStudent(Student *s);
    void removeStudent(Student *s);
}; 
```

（PG课程和选修课子类是一样的）在Course类的函数中（不是void，比如getSemester等）我只是做dynamic_cast来确定它是什么类型的课程。

我有这个问题：

课程向量是：

```
std::vector<Course*> coursesVector 
```

dp 变量是一个包含 CS、PG 或 Elective 的字符串。总的来说，我这样做：

```
if (dp == "CS")
{
    CSCourse *csCourse = new CSCourse(dp, name, semester, minGrade);
    coursesVector.push_back(csCourse);
} 
```

它给了我“无法分配抽象类型 CS 课程的对象”。PG和选修课也是如此！

但是，在我对 hte 课程的定义中，CS 课程并不是抽象的！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T18:01:41.490

`CSCourse`类*是*抽象的。

您已在 中声明了纯虚函数，但未在 中提供`reg`实现。`Course``CSCourse`

毫无疑问，您的编译器也准确地告诉了您这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T18:01:32.173

您从一个很好的抽象类继承，但您永远不会实现基类定义的纯虚函数。

此外，您的基类中还需要一个虚拟析构函数；）

编辑：您还在做其他可能不必要的事情，例如重新声明大多数派生类函数。我敢打赌他们的实现与您的基类完全相同？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T18:01:45.543

您尚未`reg`在派生类中实现纯虚函数：

`virtual void reg(Student &s)=0;`

所以是的，你的课程是抽象的。

# fileutils - Ruby roo 找不到复杂的文件名

> ID：13421964
> 
> 赞同：1
> 
> 时间：2012-11-16T17:59:25.680
> 
> 标签：fileutils

我正在使用 roo 处理一些具有复杂文件名的 Excel 文件（例如“Patient Status Up-Date-V2 051812.xlsx”）。它们是通过操作系统命令正确转义的，但不是来自 Ruby roo（使用 fileutils）：

```
ls -lt Patient\ Status\ Up-Date-V2\ 051812.xlsx 
```

显示：

> -rw-r--r-- 1 hamid hamid 128770 May 22 09:22 Patient Status Up-Date-V2 051812.xlsx

但

```
ruby -rubygems ./findbi.rb Patient\ Status\ Up-Date-V2\ 051812.xlsx 
```

给出：

> /usr/local/lib/ruby/gems/1.8/gems/roo-1.10.1/lib/roo/excelx.rb:103:in `initialize': file Patient\ Status\ Up-Date-V2\ 051812.xlsx不存在 (IOError)

我尝试了许多转义变体（例如在“-”上）、权限更改、以 root 身份运行等都无济于事。excelx.rb 中的第 103 行是 line: raise IOError, "file #{@filename} doesn't exist"

在我拿出 Perl 之前请帮忙！

谢谢，哈米德。

# c++ - 使用 cin.get 获取整数

> ID：13421965
> 
> 赞同：17
> 
> 时间：2012-11-16T17:59:36.097
> 
> 标签：c++, casting

我想一个一个地得到一串数字，所以我使用一个`while`循环`cin.get()`作为函数来一个一个地获取我的数字。

但是`cin.get()`将数字设为`char`s，即使我尝试使用强制转换，我也无法让我的变量包含数值，而不是作为输入的数字的 ascii 值。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-16T18:01:48.273

`cin.get`无法解析数字。您可以手动完成 - 但是既然它已经存在，为什么还要重新实现这个功能呢？^*

```
int number;
std::cin >> number; 
```

通常，流运算符 ( `<<`and `>>`) 负责*格式化*输出和输入，`istream::get`另一方面仅提取原始字符。

* * *

^*当然，如果你*必须*重新实现这个功能，那也没用。

要从数字字符中获取数值，您可以利用十进制数字 0-9 的字符代码是连续的。所以下面的函数可以隐藏它们：

```
int parse_digit(char digit) {
    return digit - '0';
} 
```

# nginx - 用于 nginx 的 api 询问请求何时完成？

> ID：13421967
> 
> 赞同：1
> 
> 时间：2012-11-16T17:59:44.550
> 
> 标签：nginx

我有一个滚动重启脚本，在将节点从 nginx 池中取出后，它现在正在休眠。最好查询我们从池中取出的服务器上有多少未完成的请求，这样当它下降到零时，我们可以立即停止网络服务器，升级并重新启动它。

我们基本上有5个步骤

1.  rollingRestartStep1 - 从 LB 中移除节点 1，休眠，然后升级它
2.  直接在节点上测试（确保它已启动等）
3.  rollingRestartStep2 - 将节点 1 放回 LB 的轮换中
4.  在 LB 上进行一些测试，直到它到达新节点，确保它正常工作
5.  rollingRestartStep5 - 这在所有其他节点上一遍又一遍地执行步骤 1 和 3
6.  基础测试

理想情况下，我们真的很想停止睡眠，因为它现在会导致 30 分钟的滚动重启时间，这很容易避免。

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:09:31.200

如果您正在使用 nginx 进行正常关闭，那么它会在退出之前为所有当前请求提供服务。[http://nginx.org/en/docs/control.html](http://nginx.org/en/docs/control.html)

# mysql - 从 SELECT 查询中获得最高数字？

> ID：13421972
> 
> 赞同：-1
> 
> 时间：2012-11-16T18:00:01.167
> 
> 标签：mysql, sql

想象一下，例如，我有一组**30 条记录**

> `users : {user_id, name, category}`

我做了这个查询：

```
 SELECT name
     FROM users
     WHERE category = "Student"
     AND id < 30
     ORDER BY user_id
     LIMIT 5 
```

这将为我提供 id 从 1 到 5 的用户，但是如果我想获得小于 30 的最高 id 值，在这种情况下，所需的结果将是 24 -29 的 id。

附言。我真正的问题比这要复杂一些，我只是想了解基本理论。另请注意，我会使用另一个 AND 子句来表示 > 23，但这不适用于我的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:01:54.233

您可以按降序对同一查询的结果进行排序：

```
SELECT name
FROM users
WHERE category = "Student"
AND id < 30
ORDER BY user_id DESC
LIMIT 5 
```

这将返回最大的五个 ID。尽管可能值得详细说明您实际要完成的工作。按 ID 列排序有点可疑。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:16:08.897

尝试这个：

```
SELECT name
FROM users
WHERE category = "Student"
AND id < 30
ORDER BY user_id 
LIMIT 25,5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T18:17:18.200

您可以将 Dan J 写的内容包装成一个集合并从中选择，然后应用 ASC 顺序。不确定 MySQL 语法，但在 MS SQL 中它会是：

```
SELECT * FROM
   (Dan J's code) a
ORDER BY user_id [ASC] 
```

ASC 是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T18:17:32.610

您可以尝试子查询：

```
 SELECT name
     FROM users
     WHERE category = "Student" AND
         id >((SELECT MAX(id) FROM users)-5) AS temp
     ORDER BY user_id
     LIMIT 5 
```

根据您的表结构，您可以移动`category = "Student"`到子查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T18:23:02.950

你指的是这样的逻辑吗？ [* 在 SQLFiddle 上](http://sqlfiddle.com/#!2/dbb20/22)

```
SELECT * FROM 
    (SELECT quiz_name
    FROM cursos
    WHERE id < (select max(id) from cursos)
    ORDER BY ID DESC
    LIMIT 5) ) tbl 
ORDER BY id ASC 
```

它从您的表中获取 MAX 行 ID 并获得最高的 5 个 ID 值。例如 MAX = 9，它为您提供*8、7、6、5、4。 编辑：*添加 ASC 外部选择顺序后，您将得到 4、5、6、7、8。

PS：忽略我的表模式，这是我刚刚用于此示例的旧表模式。

**编辑版：** - 对不起，我的网坏了。

您确实应该使用 Sebt 提到的嵌套 SELECT 包装。但是，您需要在嵌套选择中包含 ID，因此您可以从 tbl 外部选择查询中选择它。

# wpf - WPF 按钮（图像和标签）阴影

> ID：13421973
> 
> 赞同：1
> 
> 时间：2012-11-16T18:00:01.480
> 
> 标签：wpf, image, button, label, shadow

我想创建包含图像和文本的按钮并获得漂亮的阴影。特别是，我希望图像和标签具有浅灰色阴影，但是当将鼠标移到按钮上时，我想要一种蓝色阴影。移开会使它变回浅灰色。我需要一些帮助，因为我不知道如何实现它（我是 WPF 新手）。

按钮看起来像...

```
<Button>
   <Button.Content>
      <StackPanel Orientation="Vertical">
         <Image Source="Images/preferences-system.png" />
         <Label HorizontalAlignment="Center">Settings</Label>
      </StackPanel>
   </Button.Content>
</Button> 
```

画布去...

```
<Canvas DockPanel.Dock="Left" Background="#FF349EBC">
   <Canvas.Resources>

      <DropShadowEffect x:Key="dropMouseOverShadow" Color="#FFD9EDF3" Opacity="80" Direction="270" />
      <DropShadowEffect x:Key="dropLightShadow" Color="LightGrey" Opacity="10" Direction="270" BlurRadius="20" />

      <Style TargetType="{x:Type Button}">
         <Style.Setters>
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="{x:Null}" />
            <Setter Property="BorderBrush" Value="{x:Null}" />
            <Setter Property="Background" Value="{x:Null}" />
            <Setter Property="Template">
               <Setter.Value>
                  <ControlTemplate TargetType="{x:Type Button}">
                     <Border Background="{TemplateBinding Background}" CornerRadius="2">
                        <ContentPresenter />
                     </Border>
                     <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                           <Setter Property="Effect" Value="{StaticResource dropMouseOverShadow}" />
                        </Trigger>
                     </ControlTemplate.Triggers>
                  </ControlTemplate>
              </Setter.Value>
            </Setter>
         </Style.Setters>
      </Style>

      <Style TargetType="{x:Type Image}">
         <Style.Setters>
           <Setter Property="Effect" Value="{StaticResource dropLightShadow}" />
         </Style.Setters>
         <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
               <Setter Property="Effect" Value="{x:Null}" />
            </Trigger>
         </Style.Triggers>                  
     </Style>

     <Style TargetType="{x:Type Label}">
        <Style.Setters>
           <Setter Property="FontSize" Value="18" />
           <Setter Property="FontWeight" Value="Normal" />
           <Setter Property="FontFamily" Value="Gill Sans MT" />
           <Setter Property="Effect" Value="{StaticResource dropLightShadow}" />
        </Style.Setters>
        <Style.Triggers>
           <Trigger Property="IsMouseOver" Value="True">
              <Setter Property="Effect" Value="{x:Null}" />
           </Trigger>
        </Style.Triggers>
     </Style>

 </Canvas.Resources> 
```

我得到的是开始时图像和标签上的浅灰色阴影。将鼠标移到按钮上，灰色和浅蓝色混合在一起。当在图像上进一步移动时，它只会变成浅蓝色。标签也是如此。

当我将鼠标悬停在按钮而不是图像和标签本身时，如何将阴影切换为浅蓝色？任何人的想法或完全其他的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:36:06.677

将 LightGray 应用`Effect`到`ContentPresenter`. 然后在`IsMouseOver`Trigger 上，将 的`Effect`属性设置`ContentPresenter`为 blue `Effect`。

注意：通过设置 的`x:Name`属性`ContentPresenter`，然后通过使用`ContentPresenter`按名称访问来完成此操作。`Setter``TargetName`

注意：删除`Effect`子元素样式中的各种其他设置。将 应用于`Effect`导致`ContentPresenter`子元素继承`Effect`.

```
<Canvas DockPanel.Dock="Left" Background="#FF349EBC">
   <Canvas.Resources>

  <DropShadowEffect x:Key="dropMouseOverShadow" Color="#FFD9EDF3" Opacity="80" Direction="270" />
  <DropShadowEffect x:Key="dropLightShadow" Color="LightGrey" Opacity="10" Direction="270" BlurRadius="20" />

  <Style TargetType="{x:Type Button}">
     <Style.Setters>
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Foreground" Value="{x:Null}" />
        <Setter Property="BorderBrush" Value="{x:Null}" />
        <Setter Property="Background" Value="{x:Null}" />
        <Setter Property="Template">
           <Setter.Value>
              <ControlTemplate TargetType="{x:Type Button}">
                 <Border Background="{TemplateBinding Background}" CornerRadius="2">
                    <ContentPresenter x:Name="cp" Effect="{StaticResource dropLightShadow}"/>
                 </Border>
                 <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                       <Setter TargetName="cp" Property="Effect" Value="{StaticResource dropMouseOverShadow}" />
                    </Trigger>
                 </ControlTemplate.Triggers>
              </ControlTemplate>
          </Setter.Value>
        </Setter>
     </Style.Setters>
  </Style>

 <Style TargetType="{x:Type Label}">
    <Style.Setters>
       <Setter Property="FontSize" Value="18" />
       <Setter Property="FontWeight" Value="Normal" />
       <Setter Property="FontFamily" Value="Gill Sans MT" />
    </Style.Setters>
 </Style> 
```

# javascript - 调用三个后续回调函数

> ID：13421975
> 
> 赞同：0
> 
> 时间：2012-11-16T18:00:05.017
> 
> 标签：javascript, jquery

我正在尝试应用我在[这篇文章](https://stackoverflow.com/questions/13421211/callback-function-in-custom-function/13421257#comment18342656_13421257)中学到的关于回调函数的知识，将其扩展到 3 个函数，但是在让事情正常工作时遇到了一些麻烦。有人可以帮我理解如何让这三个功能依次触发吗？

```
var yourCallback = function(args, second) {
    var t = setTimeout(function() {
        $('body').append(args);
    }, 800);

    second('3-');

}

var yourSecondCallback = function(args) {
    var t = setTimeout(function() {
        $('body').append(args);
    }, 800);
}

function function1(args, callback, yourSecondCallback) {
    $('body').append(args);
    if (callback) {
        callback('2-');
    }

}

function1('1-' , yourCallback);​ 
```

[http://jsfiddle.net/loren_hibbard/WfKx2/3/](http://jsfiddle.net/loren_hibbard/WfKx2/3/)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:06:13.410

您需要嵌套回调以使它们按顺序调用。

```
var yourCallback = function(args, second) {
    var t = setTimeout(function() {
        $('body').append(args);
        second('3-');
    }, 800);
}

var yourSecondCallback = function(args) {
    var t = setTimeout(function() {
        $('body').append(args);
    }, 800);
}

function function1(args, callback) {
    $('body').append(args);
    if (callback) {
        callback('2-', yourSecondCallback);
    }

}

function1('1-' , yourCallback);​ 
```

[这是你改过的小提琴](http://jsfiddle.net/blesh/WfKx2/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:03:22.653

如果您的第一个参数并且唯一将成为所有回调的输入，那么此代码可用于无限参数

```
var yourCallback = function(args, second) {
    var t = setTimeout(function() {
        $('body').append(args + ' first function');
    }, 800);

}

var yourSecondCallback = function(args) {
    var t = setTimeout(function() {
        $('body').append(args + ' second function');
    }, 800);
}

function function1(args) {
    var callbacks = arguments.length - 1;
    for (i = 1; i < arguments.length; i++) {
        if (typeof(arguments[i] == 'function')) {
            arguments[i](arguments[0]);
        }
    }
}

function1('1-', yourCallback, yourSecondCallback);​ 
```

小提琴 - [http://jsfiddle.net/8squF/](http://jsfiddle.net/8squF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T18:05:51.013

您的函数名称使我感到困惑，因此我将编造一些以演示一种简单的方法：

```
function1('-1', function(){
    secondCallback(...);
    thirdCallback(...);
    ...
}); 
```

有什么理由像这样的简单方法对您不起作用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T18:05:52.793

不确定您在这里尝试做什么，但是当您在以下位置执行此操作时`function1`：

```
callback('2-'); 
```

您正在调用此方法：

```
var yourCallback = function(args, second) 
```

但是你没有为 提供一个值`second`，所以你得到一个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-14T02:59:19.927

我有一个函数**mainMethod**，它调用了三个回调函数。

**mainFunction**将调用第一个回调函数（一个）并将第一个参数传递给它。

**一个**将第二个参数传递给第二个回调函数（两个）。

**二**将第三个参数传递给最后一个回调函数（三）。

**三个**将只记录传递给它的最后一个参数。

```
function mainFunction(callback1, callback2, callback3){

      var first_parameter = "ONE"
      callback1(first_parameter);
}

function one(a){

         console.log("one: " + a);
         var second_parameter = "TWO"
         two(second_parameter);
}

function two(b){

         console.log("two: " + b);
         var third_parameter = "THREE";
         three(third_parameter);
}

function three(c){

         console.log("three: " + c);
}

mainFunction(one, two, three);
```

# java - 奇数节点总和和偶数节点总和的二叉树差异

> ID：13421980
> 
> 赞同：2
> 
> 时间：2012-11-16T18:00:29.200
> 
> 标签：java, binary-tree

如何编写函数来返回奇数高度节点的值之和与偶数高度节点的值之和的差。考虑到二叉树的根节点高度为 1

**输入：**

```
 1
                              2                3
                          4        5       6        7
                      8     9  10    11  12  13   14  15 
```

输出：-74 解释：

```
[ (1 + 4 + 5 + 6 + 7 ) - (2 + 3 + 8 + 9 + 10 + 11 + 12 + 13 + 14 + 15) = -74 ] 
```

代码：

```
public static int diff(Node n) {
    if (n == null)
        return 0;
    return Sum(n) - Sum(n.left) - Sum(n.right);

}
public static int Sum(Node root) {
    int sum = 0;
    if (root == null) {
        return sum;
    }
    sum = sum + root.data;
    if (root.left != null) {
        sum = sum + Sum(root.left.left) + Sum(root.left.right);
    }
    if (root.right != null) {
        sum = sum + Sum(root.right.left) + Sum(root.right.right);
    }
    return sum;
} 
```

我已经给出了这个解决方案，但没有被选中......我不知道这有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:13:37.033

```
public static int Sum(Node root) {

    if (root == null) {
        return 0;
    }
    return root.data-Sum(root.left)-Sum(root.right);
} 
```

这是我找到解决方案的最简单和最聪明的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T14:52:26.190

这里的解决方案简而言之使用recurssion来解释..

否定当前级别（当前节点的级别）下的所有级别，然后在递归的每个步骤中执行此操作。

```
sum[l1] – (sum[l2] – (sum[l3] – (sum[l4] – … = sum[l1] – sum[l2] + sum[l3] – sum[l4]… 
```

www.crazyforcode.com/binary-tree-diff-sum-even-nodes-sum-odd-nodes/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T19:43:27.220

怎么样...

```
public static int diff(Node n) {
    return sumtree(Node n, 1);
}

public static int sumtree(Node n, int level) {

   if (n == null) return 0;

   if (level % 2 == 0) { 
      return sumtree(n.left, level + 1) + sumtree(n.right, level +1 ) - n.value;
   } else {
      return sumtree(n.left, level + 1) + sumtree(n.right, level + 1) + n.value;
   }
} 
```

在奇数级数（1、3、5 7...）上添加值，在偶数级数上减去（2、4、6、8...）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T16:55:23.163

我采用的方法是首先找到一种添加所有叶子的方法，然后如果水平是你添加的水平，则只需添加一个“水平因子”，否则你减去。这可能看起来与其他人相似，但我觉得它更干净。

在 ANSI C 上

```
int diffOddAndEven(Node *root)
{
    return sumLevel(root, 0);
}

int sumLevel(Node *root, int level)
{
    int sum=0;
    int levelFactor = level%2 ? -1 : 1;

    if(!root)
        return 0;

    sum = root->value * levelFactor;

    sum += sumLevel(root->left, level+1);
    sum += sumLevel(root->right, level+1);

    return sum;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T07:13:28.050

查看我的解决方案

```
traverse(root,1);  //1 is passed since we want oddlevelsum - evenlevelsum,pass -1 for opposite

int traverse(Tree* root,int level){

    if(root==NULL)return 0;
    return (level*root->data)+ traverse(level*-1,root->left_node)
       + traverse(level*-1,root->right_node);

} 
```

# linux - 如何将 perf（Linux 工具）的输出保存到文件中？

> ID：13421985
> 
> 赞同：2
> 
> 时间：2012-11-16T18:00:46.190
> 
> 标签：linux, bash, unix, ubuntu

我想在运行 perf 命令后保存结果，例如。

> perf stat -B dd if=/dev/zero of=/dev/null count=1000000 &> result1

我尝试了几种方法，比如

```
 (perf stat -B dd if=/dev/zero of=/dev/null count=1000000 &>result1) > result2
    (perf stat -B dd if=/dev/zero of=/dev/null count=1000000 &>result1) 2> result2
    (perf stat -B dd if=/dev/zero of=/dev/null count=1000000 &>result1) &> result2
    ((perf stat -B dd if=/dev/zero of=/dev/null count=1000000 &>result1) &> result2) > result3 
```

好吧，这些实际上都没有给我想要的东西。

结果是

'dd if= `enter code here`/dev/zero of=/dev/null count=1000000' 的性能计数器统计信息：

```
 235.959041 task-clock                #    0.998 CPUs utilized          
            20 context-switches          #    0.000 M/sec                
   .........(too long, dont want to have all of them here)
   0.236448007 seconds time elapsed" 
```

我只想将这些保存到文件中。

非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:10:45.517

`strace`显示`perf`写入文件描述符 0，所以这应该工作：

```
perf stat -B dd if=/dev/zero of=/dev/null count=1000000 0> result1 
```

# ruby - 如何将语句作为参数传递给方法中的块？

> ID：13421988
> 
> 赞同：2
> 
> 时间：2012-11-16T18:00:59.807
> 
> 标签：ruby, proc

我正在尝试弄清楚如何将语句作为方法参数传递 - 用作块过滤条件的一部分。例如，我有以下代码：

```
def method
  other_method.persons.each do |ped|

    next if ped.first_name.nil? or ped.last_name.nil?

    puts ped.id
    puts ped.full_name
  end
end 
```

我希望能够做的如下（因此我可以更改方法中使用的过滤条件）。是否可以将包含块引用的语句从参数传递给块？：

```
def method(statement)
  other_method.persons.each do |ped|

    next if statement

    puts ped.id
    puts ped.full_name
  end
end 
```

我很欣赏这方面的一些方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T18:08:40.953

您不通过“声明”，而是通过了块。传递的块通过调用`yield`或捕获到 proc 中并使用 调用`Proc#call`。

```
def method
  other_method.persons.each do |ped|
    next if yield(ped)

    puts ped.id
    puts ped.full_name
  end
end

method { |ped| ped.first_name.nil? or ped.last_name.nil? } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:42:20.733

```
Ped = Struct.new(:first_name, :last_name, :full_name, :id)

# generate some test data
peds = ['Bob', 'Hope', 'Bob Hope', 1, 'Bing', nil, 'Bing Crosby', 2, nil, 'Bacon', 'Kevin Bacon', 3].each_slice(4).map{ |x,y,z,id| Ped.new(x,y,z,id) }

filter_criteria = lambda { |ped| ped.first_name.nil? or ped.last_name.nil? }

peds.find_all(&filter_criteria).each { |ped| p ped } 
```

输出：

```
#<struct Ped first_name="Bing", last_name=nil, full_name="Bing Crosby", id=2>
#<struct Ped first_name=nil, last_name="Bacon", full_name="Kevin Bacon", id=3> 
```

用另一个 Proc/lambda 更改 filter_criteria 以更改过滤。另一种方法是将 find_all 包装在一个方法中以获取如下过滤块：

```
def filter list, &criteria
  list.find_all(&criteria)
end

filter(pedlist) { |ped| some filter criteria }.each { |ped| do something } 
```

然后可以根据需要使用生成的枚举。