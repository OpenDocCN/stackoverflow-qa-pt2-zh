# StackOverflow 问答 13020000-13020999

# php - $.get is not working

> ID：13020001
> 
> 赞同：-2
> 
> 时间：2012-10-22T21:14:11.313
> 
> 标签：php, jquery

I don't know what is wrong here I tried [this link](http://www.passer-by.net/2011/09/18/how-to-set-get-cookie-via-ajax/#codesyntax_2) to know how can I interact between php and jquery

here is my code but it will alert an empty box,I'm sure that it can't read the test.php but I don't know why?!

mytest.php

```
<?php
if($_GET['cookie']!='')
{
    setcookie("cookie", $_GET['cookie']);
    echo 'set cookie: ' . $_GET['cookie'];
}
else
    echo 'get cookie: ' . $_COOKIE["cookie"];

?> 
```

test.html:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>Ajax Set &amp; Get Cookie</title>
  <script type="text/javascript" src="jquery.min.js"></script> 

<script type="text/javascript">

$(document).ready( function() {

        $("#setcookie").click(function() {
            if($("#cookievalue").val() != '')
                setCookie( $("#cookievalue").val() );
        });

        $("#getcookie").click(function() {
            getCookie();
        });

     });

function setCookie(value)
{

    $.get("mytest.php", { cookie: value},
        function(data){
            alert(data);
        }
    );
}

function getCookie(value)
{

    $.get("mytest.php", { },
        function(data){
            alert(data);
        }
    );
}

</script> 

</head>

<body>
<div align="center">

    Cookie: <input type="text" id="cookievalue" value="" />
    <br />
    <input type="button" id="setcookie" value="Set Cookie"  />
    <input type="button" id="getcookie" value="Get Cookie"  />

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:18:09.390

您需要将cookie添加到查询字符串

```
$.get("mytest.php?cookie=12345" 
```

# assembly - How to convert C++ program to Mips assembly language in MARs assembler?

> ID：13020002
> 
> 赞同：0
> 
> 时间：2012-10-22T21:14:12.427
> 
> 标签：assembly, mips, mips32

C++ program to be converted to mips assembly language

```
 #include <iostream>
    using namespace std;

    int main() {

int a = 1; 
int b = 1; 
    int array[a];
   while ( a < 10)
    {   
     array[a] = b + a;
 cout << array[a] << endl; // print elements in array //check values in array
        a +=1;
    }
      system("pause");  
    return 0;
    } 
```

Mips assembly language program

```
 .data
     str: .ascii "abcdef"
     array: .space 20
    .text
    main: 
     li $s0, 1 # a = 1
     li $s2, 1 # b = 1         
     loop:
     la  $t1, array
     slti $t0, $s0, 3   # t0<- 1 if a < 3
     beq $t0, $zero, exit
     sll $t0, $s0, 2    # t1<- 4*a
     add $t1, $t1, $t0  # new base addr
     add $t2, $s2, $s0  # t2<- a+b   
     sw  $t1, 0($t2)    # D[a]=a+b
     addi $s0, $s0, 1   # a = a +1
     j loop             # goes to loop: label 
     exit:
     li $v0, 10 # v0<- (exit)
     syscall 
```

I've tried lw, sw, lb, sb to put the value of register $t2 in the array, but I continue to get an error when I single step run program in Mars compiler

Updated Mips assembly language program

```
 .data
     str: .ascii "abcdef"
     .align 2
     array: .space 40
     .text
     main: 
     li $s0, 1 # a = 1
     li $s2, 1 # b = 1
     loop:
     la  $t1, array
     slti $t0, $s0, 3   # t0<- 1 if a < 3
     beq $t0, $zero, exit
     sll $t0, $s0, 2   # t1<- 4*a
     addu $t2, $t1, $t0 # new base addr
     add $s1, $s0, $s2 # s1<- a+b
     sw  $s1, 0($t2)   # D[a]=a+b

     li  $v0, 1        # load appropriate system call code into register $v0;
               # code for printing integer is 1
     lw $a0, 0($t0)
     addiu $t0, $t0, 4
     syscall           # call operating system to perform print operation

     addi $s0, $s0, 1  # a = a +1
     j loop            # goes to loop: label          
     exit:
     li $v0, 10 # v0<- (exit)
     syscall 
```

I run this program and I get this error: "address out of range 0x00000004" I want to print the values of my array to check if it is right.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:29:30.383

您的代码中有几个错误。关于数组中项目的存储，你必须将数组的基地址与索引相加（乘以4）才能得到要存储的项目的地址。

假设`$s0`持有 a 并`$s2`持有 b，要存储`D[a] = a + b`您将：

```
la $t1, array
sll $t0, $s0, 2
addu $t2, $t1, $t0  # $t2 is &D[a]
add $s1, $s0, $s2    # $s1 = a + b
sw $s1, 0($t2)  # D[A] = a + b 
```

请注意，您没有保留足够的内存来保存数组 D 中的 10 个项目，假设一个 int 是 32 位宽，那么每个项目是 4 个字节长，因此您应该保留 40 个字节...

您还应该确保数组在字边界处正确对齐。为此，您可以指示汇编器使用`.align 2`指令为您进行对齐，例如：

```
.align 2
array: .space 40 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T16:47:10.933

```
intN;
cout<<"Enter the array size: ";
cin>>N; //size must be less than MAX_SIZE

int one[MAX_SIZE]; 
int two[MAX_SIZE]; 
cout<<"Ente the elements of array one:"<<endl;
for(inti = 0; i<N;i++)
    cin>>one[i];

cout<<"Ente the elements of array two:"<<endl;
for(inti = 0; i<N;i++)
    cin>>two[i];

int result = compare(one,two,N);

if(result == 0)
    cout<<"Array one is Equal to array two"<<endl;
elseif(result==-1)
    cout<<"Array one is less than array two"<<endl;
elseif(result==1)
    cout<<"Array one is greater than array two"<<endl; 
```

# c++ - Visual C++ conditional debugging

> ID：13020005
> 
> 赞同：2
> 
> 时间：2012-10-22T21:14:24.120
> 
> 标签：c++, visual-studio, debugging, c-preprocessor, conditional-compilation

I am trying to setup a project with conditional debugging. What i want is to have a macro `debug` which is #defined to some kind of printf/cout/anything when I'm running in debug mode and #defined to null statement when running in production mode. How can I do this:

I have tried using the macro `_DEBUG` but I always see my arguments printing regardless of which mode I am running in:

```
struct debugger{template<typename T> debugger& operator ,(const T& v){std::cerr<<v<<" ";return *this;}}dbg;
#if _DEBUG
    #define debug(...) {dbg,__VA_ARGS__;std::cerr<<std::endl;}
#else
    #define debug(...) // Just strip off all debug tokens
#endif 
```

In my main:

```
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int a=1,b=2,c=3;
    debug(a,b,c);
    cin>>a;
} 
```

If it helps, I am using Visual studio 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:55:53.200

您的示例中的代码是正确的。问题是定义`_DEBUG`的来源。在正确的设置中，它应该来自/不来自您的 MSVC 项目，而不是来自其他任何地方。在这种情况下，根据构建类型，您将拥有您所期望的。

很可能您已在自己的代码或包含的标头之一中定义了它。

您的帖子中没有足够的信息来推断`_DEBUG`.

在调试模式下，来自 MSVC 的定义将如下所示：

```
#define _DEBUG 
```

这意味着即使在 DEBUG 构建中，您也不应该看到任何东西。一旦你看到输出，这意味着 defn 存在并且它不是空的。此定义不是来自 MSVC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:11:09.383

尝试这个

```
struct debugger{template<typename T> debugger& operator ,(const T& v){std::cerr<<v<<" ";return *this;}}dbg;
#if _DEBUG
    #define debug(...) {dbg,__VA_ARGS__;std::cerr<<std::endl;}
#else
    #define debug
#endif 
```

# php - Using LinkedIn API to search and display a member's profile using keyword search

> ID：13020006
> 
> 赞同：1
> 
> 时间：2012-10-22T21:14:25.727
> 
> 标签：php, json, api, search, linkedin

I would like to use the LinkedIn API to display the publicly available information of a person, after passing it keywords as a search term

I can get my code to display various profile info using a search URL such as:

```
http://api.linkedin.com/v1/people-search:(people:(id,first-name,last-name,picture-url,site-standard-profile-request,headline),num-results)?first-name=FOO&last-name=BAR 
```

However when I change this to:

```
http://api.linkedin.com/v1/people-search:(people:(id,first-name,last-name,picture-url,site-standard-profile-request,headline),num-results)?keywords=FOO%20BAR 
```

I get 0 results

Any ideas??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:32:34.120

两者似乎都在测试控制台上工作；这是您的第一个查询的结果：

[https://snap.apigee.com/TCWiFS](https://snap.apigee.com/TCWiFS)

对于第二个查询：

[https://snap.apigee.com/UtGAm6](https://snap.apigee.com/UtGAm6)

你在找什么名字？

# python - How to populate the defects attribute of object using FeedParser

> ID：13020008
> 
> 赞同：2
> 
> 时间：2012-10-22T21:14:31.467
> 
> 标签：python, email

Reading up on the FeedParser API, I understand it can parse an email message object and if it finds a non-compliant header format, it would populate the defects attribute of the object. I tried playing with this today, but I could not get it to populate the defects which I know to be there.

For example, here is the beginning part of the message header I'm feeding to FeedParser:

```
Received from geronimo.server11.kingtut.local ([172.16.50.50])
by ryu.objectgenerator.net (Lotus Domino Release 8.5.1FP5)
with ESMTP id 2012102117563555-21066 ;
Sun, 21 Oct 2012 17:56:35 +0800 
Return-Path: <3ff.d.13239334.D893343-342613@bounce.objectgenerator.net> 
```

The 1st line does not contain a colon separating the header field from the rest. Also, the 2nd line is not indented/folded properly.

Here is the code I'm testing:

```
>>> import email
>>> import email.parser
>>> file = open('bad.eml').read()
>>> bad_feed = email.parser.FeedParser()
>>> bad_feed.feed(file)
>>> msg_object = bad_feed.close()
>>> msg_object.defects
[]
>>> 
```

I suspect that I'm not passing the 'file' in a proper manner to FeedParser. Could someone please point out what I'm doing wrong?

# jenkins - 在 Jenkins 上为从站定义可执行文件

> ID：13020010
> 
> 赞同：0
> 
> 时间：2012-10-22T21:14:36.817
> 
> 标签：jenkins

我对 Jenkins 等 CI 系统非常陌生。

我有一个在 Ubuntu 上运行的主 Jenkins 服务器。我有一个 Ubuntu slave（通过 SSH 管理），专门用于 Android 构建，有 Android SDK 和其他已经可用。

我的问题是如何告诉 Jenkins master 从服务器上 android SDK 的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:51:19.313

转到 Manage Jenkins -> Manage Nodes，然后打开从节点的配置页面。添加环境变量，然后将其仅提供给该从站。

如果您定义了 SDK 默认使用的环境变量，那么这就足够了。否则，您还必须编辑作业以使用这些（我的意思是，就像在执行 shell 脚本构建步骤中一样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:11:19.923

我不熟悉Andriod SDK，但你能把它作为参数传递给构建吗？

# java - nutch 教程后面的“致命错误”“根目录后面的文档中的标记必须格式正确”

> ID：13020015
> 
> 赞同：2
> 
> 时间：2012-10-22T21:14:50.233
> 
> 标签：java, xml, nutch

我正在关注 Apache Nutch 的教程。

我的 conf/nutch-site.xml 配置如下：

```
<property>
 <name>http.agent.name</name>
 <value>Nutch Spidah</value>
</property>

<configuration>

</configuration> 
```

我收到此错误：

[致命错误] nutch-site.xml:11:2：文档中根元素之后的标记必须格式正确。

我知道我遗漏了一些明显的东西。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:18:00.510

您的属性必须出现在配置标签内：

```
<configuration>
   <property>
      <name>http.agent.name</name>
      <value>Nutch Spidah</value>
   </property>
</configuration> 
```

请参阅此[示例](http://wiki.apache.org/nutch/nutch-site.xml)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:18:35.910

尝试将配置标签放在属性标签周围

# ios - Creating Video from array of images and saving it to camera roll

> ID：13020023
> 
> 赞同：2
> 
> 时间：2012-10-22T21:16:08.313
> 
> 标签：ios, video, save, avassetwriter, avasset

I was trying to make a video from a set of images and I found some code and got it to work

but the video won't be saved to the photo library it gives me this error :

Documentsa.mov cannot be saved to the saved photos album: Error Domain=NSOSStatusErrorDomain Code=2 "This movie could not be played." UserInfo=0x922cf60 {NSLocalizedDescription=This movie could not be played.}

Here's the code I use :

```
 NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    UIImage * i = [UIImage imageNamed:@"IMG_1650.JPG"];
    CGAffineTransform  transform = CGAffineTransformMakeRotation((M_PI/180)*90);
    GPUImageTransformFilter * filter = [[GPUImageTransformFilter alloc]init];
    [filter setAffineTransform:transform];
   UIImage * im = [filter imageByFilteringImage:i];
    im = [filter imageByFilteringImage:im];

    [self writeImagesToMovieAtPath:[NSString stringWithFormat:@"%@/%@",documentsDirectoryPath,@"a.mov"] withSize:CGSizeMake(i.size.width, i.size.height)];

    NSString* exportVideoPath = [NSString stringWithFormat:@"%@%@",documentsDirectoryPath,@"a.mov"];

    UISaveVideoAtPathToSavedPhotosAlbum (exportVideoPath,self, @selector(video:didFinishSavingWithError: contextInfo:), nil); 
```

And this is the code I use to create the video :

```
-(void) writeImagesToMovieAtPath:(NSString *) path withSize:(CGSize) size
{
    NSLog(@"Write Started");

    NSError *error = nil;

    AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:
                                  [NSURL fileURLWithPath:path] fileType:AVFileTypeQuickTimeMovie
                                                              error:&error];
    NSParameterAssert(videoWriter);

    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                                   [NSNumber numberWithInt:size.height], AVVideoHeightKey,
                                   nil];

    AVAssetWriterInput* videoWriterInput = [[AVAssetWriterInput
                                             assetWriterInputWithMediaType:AVMediaTypeVideo
                                             outputSettings:videoSettings] retain];

    AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor
                                                     assetWriterInputPixelBufferAdaptorWithAssetWriterInput:videoWriterInput
                                                     sourcePixelBufferAttributes:nil];

    NSParameterAssert(videoWriterInput);
    NSParameterAssert([videoWriter canAddInput:videoWriterInput]);
    videoWriterInput.expectsMediaDataInRealTime = YES;
    [videoWriter addInput:videoWriterInput];

    //Start a session:
    [videoWriter startWriting];
    [videoWriter startSessionAtSourceTime:kCMTimeZero];

    CVPixelBufferRef buffer = NULL;

    //convert uiimage to CGImage.

    int frameCount = 1;
    int kRecordingFPS = 30;
    UIImage * im = [UIImage imageNamed:@"IMG_1650.JPG"];

    CGAffineTransform  transform = CGAffineTransformMakeRotation((M_PI/180)*90);
    GPUImageTransformFilter * filter = [[GPUImageTransformFilter alloc]init];
    [filter setAffineTransform:transform];
    UIImage * i = [filter imageByFilteringImage:im];
    i = [filter imageByFilteringImage:im];
    NSArray * imageArray = [[NSArray alloc]initWithObjects:i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i, nil];

    for(UIImage * img in imageArray)
    {
        buffer = [self pixelBufferFromCGImage:[img CGImage] andSize:size];

        BOOL append_ok = NO;
        int j = 0;
        while (!append_ok && j < 30)
        {
            if (adaptor.assetWriterInput.readyForMoreMediaData)
            {
                printf("appending %d attemp %d\n", frameCount, j);

                CMTime frameTime = CMTimeMake(frameCount,(int32_t) kRecordingFPS);
                append_ok = [adaptor appendPixelBuffer:buffer withPresentationTime:frameTime];

                if(buffer)
                    CVBufferRelease(buffer);
                [NSThread sleepForTimeInterval:0.05];
            }
            else
            {
                printf("adaptor not ready %d, %d\n", frameCount, j);
                [NSThread sleepForTimeInterval:0.1];
            }
            j++;
        }
        if (!append_ok) {
            printf("error appending image %d times %d\n", frameCount, j);
        }
        frameCount++;
    }

    //Finish the session:
    [videoWriterInput markAsFinished];
    [videoWriter finishWriting];
    NSLog(@"Write Ended");
} 
```

I tried to check if the video is compatible using

```
UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(videoPath) 
```

and I found out that the video isn't compatible

but i don't know why or how to fix this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:57:24.317

视频路径

```
NSString* exportVideoPath = [NSString stringWithFormat:@"%@%@",documentsDirectoryPath,@"a.mov"]; 
```

是错的。您缺少“/”分隔符。

改成这个

```
NSString* exportVideoPath = [NSString stringWithFormat:@"%@/%@",documentsDirectoryPath,@"a.mov"]; 
```

希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:38:53.427

你说的克服是什么意思？我相信您可以将文件从文档发送到任何后端服务器以存储它，并且具有更好（您知道我的意思）视频支持的其他设备将能够播放它。但是，即使可能通过一些“黑客”来超越操作系统限制也不太可能顺利。

我的意思是 1080p 是库中最大的视频文件分辨率，因为库中的媒体**必须**是可播放的。您仍然可以将文件存储在应用程序文档中并手动解码，这听起来像是一项有趣的任务:) 确保您不会将其与 iCloud 同步，以避免大量流量泄漏使客户发疯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:51:11.457

我在之前的评论中尝试了 A-Live 的解决方案

问题原来是图像的尺寸太大

有没有办法克服这个？

# php - 无法使用 PHP 和 DOM 从 Word DOCX 中提取邮件合并字段

> ID：13020024
> 
> 赞同：1
> 
> 时间：2012-10-22T21:16:11.683
> 
> 标签：php, xml, ms-word, docx

我正在尝试提出一个解决方案，允许用户上传启用邮件合并的 Word DOCX 模板文件。理想情况下，系统将读取 DOCX 文件，提取 XML，找到邮件合并字段并将它们保存到数据库中以供将来映射。我可能会使用诸如 Zend LiveDocX 或 PHPDOCX 之类的 SOAP 服务或完全使用其他东西——但现在我需要弄清楚如何识别 DOCX 文件中的字段。为此，我从这篇文章开始： http: [//dfmaxwell.wordpress.com/2012/02/24/using-php-to-process-a-word-document-mail-merge/](http://dfmaxwell.wordpress.com/2012/02/24/using-php-to-process-a-word-document-mail-merge/)

我已经根据我的需要对其进行了一些调整（这可能是一个问题，尽管我在原始代码中也遇到了同样的错误。）具体来说，我现在没有使用它来执行邮件合并，我只是想要来识别字段。这是我所拥有的：

```
 $newFile = '/var/www/mysite.com/public_html/template.docx';

    $zip = new ZipArchive();
    if( $zip->open( $newFile, ZIPARCHIVE::CHECKCONS ) !== TRUE ) { echo 'failed to open template'; exit; }
    $file = 'word/document.xml';
    $data = $zip->getFromName( $file );
    $zip->close();

    $doc = new DOMDocument();
    $doc->loadXML( $data );
    $wts = $doc->getElementsByTagNameNS('http://schemas.openxmlformats.org/wordprocessingml/2006/main', 'fldChar');

    $mergefields = array();

    function getMailMerge(&$wts, $index) {
        $loop = true;
        $counter = $index;
        $startfield = false;
        while ($loop) {
            if ($wts->item($counter)->attributes->item(0)->nodeName == 'w:fldCharType') {
                $nodeName = '';
                $nodeValue = '';
                switch ($wts->item($counter)->attributes->item(0)->nodeValue) {
                    case 'begin':
                        if ($startfield) {
                            $counter = getMailMerge($wts, $counter);
                        }
                        $startfield = true;
                        if ($wts->item($counter)->parentNode->nextSibling) {
                            $nodeName = $wts->item($counter)->parentNode->nextSibling->childNodes->item(1)->nodeName;
                            $nodeValue = $wts->item($counter)->parentNode->nextSibling->childNodes->item(1)->nodeValue;
                        }
                        else {
                            // No sibling
                            // check next node
                            $nodeName = $wts->item($counter + 1)->parentNode->previousSibling->childNodes->item(1)->nodeName;
                            $nodeValue = $wts->item($counter + 1)->parentNode->previousSibling->childNodes->item(1)->nodeValue;
                        }
                        if (substr($nodeValue, 0, 11) == ' MERGEFIELD') {
                            $mergefields[] = strtolower(str_replace('"', '', trim(substr($nodeValue, 12))));
                        }
                        $counter++;
                    break;
                case 'separate':
                    $counter++;
                    break;
                case 'end':
                    if ($startfield) {
                        $startfield = false;
                    }
                    $loop = false;
                }
            }
        }
        return $counter;
    }

    for ($x = 0; $x < $wts->length; $x++) {
        if ($wts->item($x)->attributes->item(0)->nodeName == 'w:fldCharType' && $wts->item($x)->attributes->item(0)->nodeValue == 'begin') {
            $newcount = getMailMerge($wts, $x);
            $x = $newcount;
        }
    } 
```

我用 ZipArchive() 打开 DOCX 文件没有问题，如果我使用 print_r($doc->saveHTML()); 我看到 XML 数据很好。问题是，当我执行我的代码时，我得到了致命错误：在指向此的非对象上调用成员函数 item()：

```
$nodeName = $wts->item($counter)->parentNode->nextSibling->childNodes->item(1)->nodeName; 
```

谷歌在试图找出这个错误时让我失望了，谁能指出我正确的方向？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:40:34.877

找到了一个解决方案——它并不像我希望的那样优雅，但是就这样。

使用 xml_parser_create_ns 我可以在 DOCX 文件中搜索我需要的键，特别是“HTTP://SCHEMAS.OPENXMLFORMATS.ORG/WORDPROCESSINGML/2006/MAIN:INSTRTEXT”，它标识所有标记为“MERGEFIELD”的字段。然后我可以将结果转储到一个数组中并使用它们来更新数据库。以机智：

```
 // Word file to be opened
    $newFile = '/var/www/mysite.com/public_html/template.docx';

    // Extract the document.xml file from the DOCX archive
    $zip = new ZipArchive();
    if( $zip->open( $newFile, ZIPARCHIVE::CHECKCONS ) !== TRUE ) { echo 'failed to open template'; exit; }
    $file = 'word/document.xml';
    $data = $zip->getFromName( $file );
    $zip->close();

    // Create the XML parser and create an array of the results
    $parser = xml_parser_create_ns();
    xml_parse_into_struct($parser, $data, $vals, $index);
    xml_parser_free($parser);

    // Cycle the index array looking for the important key and save those items to another array
    foreach ($index as $key => $indexitem) {
        if ($key == 'HTTP://SCHEMAS.OPENXMLFORMATS.ORG/WORDPROCESSINGML/2006/MAIN:INSTRTEXT') {
            $found = $indexitem;
            break;
        }
    }

    // Cycle *that* array looking for "MERGEFIELD" and grab the field name to yet another array
    // Make sure to check for duplicates since fields may be re-used
    if ($found) {
        $mergefields = array();
        foreach ($found as $field) {
            if (!in_array(strtolower(trim(substr($vals[$field]['value'], 12))), $mergefields)) {
                $mergefields[] = strtolower(trim(substr($vals[$field]['value'], 12)));
            }
        }
    }

    // View the fruits of your labor
    print_r($mergefields); 
```

# javascript - 在可观察数组中添加和替换项目的函数

> ID：13020026
> 
> 赞同：0
> 
> 时间：2012-10-22T21:16:28.523
> 
> 标签：javascript, knockout.js

我正在尝试编写一个函数，该函数 1\. 将一个项目添加到可观察数组中，2\. 如果该项目已存在于数组中，则替换该项目

```
self.addNotification = function (name, availability, note) {
    //see if we already have a line for this product
    var matchingItem = self.notifications.indexOf(name);

    if (matchingItem !== undefined) {
        self.notifications.replace(self.notifications()[index(matchingItem)],
            new Notification(self, name, availability, note));
    }
    else {
        self.notifications.push(new Notification(self, name, availability, note));
    }
}; 
```

我究竟做错了什么？

问候安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:18:25.830

好吧，`Array.prototype.indexOf`永远不会回来`undefined`。它是`-1`（*未找到*`0`）或以数组索引开头的任何数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:16:38.523

这是我的答案： [小提琴](http://jsfiddle.net/Jn9hB/)

在 Chrome 中按 F12 或在 FireFox 中使用 FireBug 来查看控制台日志输出。

```
var notifications = {
    notifs: [],
    updateNotifications: function(notification) {
        'use strict';

        var matchIndex;

        for (matchIndex = 0; matchIndex < this.notifs.length; matchIndex += 1) {
            if (this.notifs[matchIndex].name === notification.name) {
                break;
            }
        }
        if (matchIndex < this.notifs.length) {
            this.notifs.splice(matchIndex, 1, notification);
        } else {
            this.notifs.push(notification);
        }
    }
};

notifications.updateNotifications({
    name: 'John',
    available: false,
    note: "Huzzah!"
});
notifications.updateNotifications({
    name: 'Jane',
    available: true,
    note: "Shazam!"
});
notifications.updateNotifications({
    name: 'Jack',
    available: true,
    note: "Bonzai!"
});
notifications.updateNotifications({
    name: 'Jane',
    available: false,
    note: "Redone!"
});
console.log(notifications);​ 
```

# python - hamming distance through recursion

> ID：13020029
> 
> 赞同：0
> 
> 时间：2012-10-22T21:16:35.427
> 
> 标签：python, algorithm, recursion

I have a problem I'm supposed to solve using recursion:

Hamming distance. The Hamming distance between two bit strings of length `n` is equal to the number of bits in which the two strings differ. Write a program that reads in an integer `k` and a bit string `s` from the command line, and prints out all bit strings that have Hamming distance at most k from `s`. For example if `k` is `2` and `s` is `0000` then your program should print out:

```
0011 0101 0110 1001 1010 1100 
```

Hint: choose `k` of the `N` bits in `s` to flip.

I have no idea where to begin could someone point me in the right direction?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:07:25.143

要递归地解决问题，您需要做一些少量的工作，将其分解为类似但更小的问题。

在您的情况下，您有一个字符串，即一个字符序列。在 k 个位置与 S 不同的字符串集合由一些字符串组成，这些字符串要么首先同意 S，要么不同意。这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:12:10.623

代码如下。基本思想只是考虑字符串 t = s[:-1]。您将所有汉明距离小于 k-1 的字符串连接到 t 与 s[-1] 的翻转，再加上您将所有汉明距离等于 k ​​的字符串连接到 t 与 s[-1]。

```
def flip(c): return str(1-int(c))

def flip_s(s, i):
   t =  s[:i]+flip(s[i])+s[i+1:]
   return t

def hamming(s, k):
 if k>1:
      c = s[-1]
      s1 = [y+c for y in hamming(s[:-1], k)] if len(s) > k else []
      s2 = [y+flip(c) for y in hamming(s[:-1], k-1)]
      r = []
      r.extend(s1)
      r.extend(s2)
      return r
 else:
   return [flip_s(s,i) for i in range(len(s))]

>>> print hamming("0000", 2)
>>> ['1100', '1010', '0110', '1001', '0101', '0011'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:58:45.393

让一组长度为具有汉明距离的`H(s, k)`位串，然后我们可以使用较小的集合轻松计算它，其中没有 最后一个字符：`len(s)``k``s``H(s[:-1], k-1)``H(s[:-1], k)``s[:-1]``s`

```
def H(s, k):
    # invariant: H yields `len(s)`-bit strings that have k-bits flipped
    if len(s) < k:
        return  # produce nothing; can't flip k bits
    if k == 0:
        yield s  # only one n-bit string has Hamming distance 0 from s (itself)
    else:
        for s_k_minus_one_flipped in H(s[:-1], k - 1):
            yield s_k_minus_one_flipped + flip(s[-1])  # flip last bit
        for s_k_flipped in H(s[:-1], k):
            yield s_k_flipped + s[-1]  # don't flip last bit

def flip(bit):
    assert bit == "0" or bit == "1"
    return "0" if bit == "1" else "1"

print(" ".join(H("0000", 2)))
# -> 0011 0101 1001 0110 1010 1100 
```

[演示](http://ideone.com/575C8P)

# types - 这种构造导致代码不像类型注释所指示的那样通用。类型变量 'x 已被限制为类型 y'

> ID：13020030
> 
> 赞同：6
> 
> 时间：2012-10-22T21:16:38.347
> 
> 标签：types, f#

此代码将生成以下警告

```
module TimeSeries

open System

type TimedValue<'T> = { ts : DateTime; value: 'T}
type TimeSerie<'T> = TimedValue<'T> seq

let t : TimedValue<'double> = { ts = DateTime.Today; value=5} 
```

警告：

> 这种构造导致代码不像类型注释所指示的那样通用。类型变量“double”已被限制为“int”类型。

我对 F# 很陌生，我认为 5 被解释为一个 int 并且不知何故 F# 告诉我我问了一个 double 但它将是一个 int。

当我尝试用这个替换`5`时`5.`告诉我它仍然受到浮点类型的限制。

我应该以某种方式将其转换为 double 还是仅删除声明部分`: TimedValue<'double>`并让 F# 处理类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T21:20:02.310

去掉前面的撇号`double`。

```
let t : TimedValue<double> = { ts = DateTime.Today; value=5.0} 
```

前导撇号用于声明类型参数。因此，您已经声明了一个通用值，但是通过指定`value=5`您将类型 arg 限制为`int`。您还可以使用通配符代替类型 arg：

```
let t : TimedValue<_> = { ts = DateTime.Today; value=5.0} 
```

或完全删除类型注释：

```
let t = { ts = DateTime.Today; value=5.0} 
```

# ios - in-app purchase, partially usage of credit

> ID：13020033
> 
> 赞同：0
> 
> 时间：2012-10-22T21:17:02.720
> 
> 标签：ios, in-app-purchase, credits

I have IAP question. Basically, my app needs calculate how many times a user is using a function, and I would like to charge accordingly. I probably going to charge 1 cent or so per usage of the function, so if IAP is $1 minimum, that's credit for 100 usages.

Now my question is that what type of IAP I should choose: consumable, non-consumable, subscription.

Second part of the question is: If the user pays $1 for the IAP, s/he could use the function 100 times. How should I track the usage time and where to temporarily store the usage value? I know I could write/read in/out of a file in the sandbox, would that be secure? The user may use 10 times and quit and come back to continue. I need give the user credit for another 90 usages.

Do I have to go the way that you buy IAP once and enjoy all time. By that way, I have to set IAP price higher and attract much fewer purchases.

Any idea? Thanks!

the code I have seems to have problem. user can re-install and get full initial credits again.

```
 initialCredit = 500;

 defaults = [NSUserDefaults standardUserDefaults];
 if (![defaults objectForKey:theAppCrediteKey]) {
      [defaults setObject:[NSNumber numberWithFloat:initialCredit]               forKey:theAppCrediteKey];
 }
 readingCredits = [defaults objectForKey:theAppCrediteKey];
 if ([readingCredits floatValue] < 0) {
 readingCredits = [NSNumber numberWithFloat:0];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:58:06.390

这绝对是一个消耗品购买——如果他们用完 100 个积分，他们可以再花 1 美元再购买 100 个积分。

为什么不在你的用户偏好中实现一个计数器——在购买 1 美元的 IAP 时，你向计数器添加 100 个积分，并在每次调用该函数时递减它？

[编辑] 例如，这是一个快速而简单的解决方案，假设一切都发生在同一个模块中，并且不检查商店收据或其他任何东西。

确保密钥在标准用户默认值中可用：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if (![defaults objectForKey:@"Credits"])
    [defaults setObject:[NSNumber numberWithInt:0] forKey:@"Credits"];

NSNumber *credits = [defaults objectForKey:@"Credits"]; 
```

当递减动作发生时：

```
credits = [NSNumber numberWithInt:[credits intValue]-1]; 
```

或在 IAP 上：

```
credits = [NSNumber numberWithInt:[credits intValue]+100]; 
```

适当时将值保存为用户默认值：

```
[defaults setObject:credits forKey:@"Credits"];
[defaults synchronize]; 
```

# java - Android与库冲突的HttpClient

> ID：13020037
> 
> 赞同：2
> 
> 时间：2012-10-22T21:17:35.367
> 
> 标签：java, android, apache-httpclient-4.x, android-library, apache-httpcomponents

我有一个使用 Apache HTTP 库的库（不是 Android 库）。我想在 Android 应用程序中使用这个库。它还需要与其他类型的框架一起使用。这是否会导致与 Android 中的 Apache 库发生任何冲突，有没有办法让它在包含在 Android 中时使用 Android 的 Apache 库？必须传入HTTP客户端才能使用真的很不方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:35:12.683

> 这会导致与 Android 中的 Apache 库发生冲突吗

这取决于您如何定义“冲突”。

您不控制运行时类路径，固件总是胜出。因此，对于 Android SDK 中存在的所有 HTTPClient 类，将使用 Android 版本的 HTTPClient。

如果您的其他库依赖于*不同版本*的 HTTPClient，您可能会遇到麻烦。

> 有什么方法可以让它在包含在 Android 中时使用 Android 的 Apache 库

你别无选择：只要有重复，就会使用 Android 的类。

# javascript - 每个表格单元格只允许一个查询结果

> ID：13020038
> 
> 赞同：0
> 
> 时间：2012-10-22T21:17:35.947
> 
> 标签：javascript, jquery, html

我有一个 jquery 脚本，它访问一个数据库并返回一个数字结果并将该结果写入一个表格单元格。该脚本在页面加载时运行，并且在下拉菜单更改时运行。我希望每个表格单元格只能限制 1 个结果。

现在，当页面加载时，它将结果写入单元格，当下拉菜单更改时，它只是将新结果添加到单元格而不是替换它。

我进行了相当多的搜索，试图弄清楚如何做到这一点，但无法提出任何建议。有人能帮我吗？

这是jQuery：

```
$(document).ready(function(){

$('.typeval').change(function(){
    var movement    =  $(this).val();
    var client_id   = $(this).parent().siblings().find('.clientval').val();
    var class_id    = <? echo $class_id; ?>;
        $count      = $(this).parents('tr').find('label.count');

$.ajax({ 
  type: "POST",
  url: "movement_count.php",
  data: {movement:movement, client_id:client_id, class_id:class_id},
  dataType: "json", 
  async: false,
  success:(function(output) {      

      $.each(output, function(index, value){
     //alert(value);
     $count.append(output[index]);
     }); // each
     })     
}) // ajax

}).change(); // .typeval

});  // document 
```

这是表格单元格，我一次只想显示一个结果。

```
<td><label class="count">5</label></td> 
```

如果我没有提供足够的信息来获得所需的帮助，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:19:50.320

使用`.text()`代替`.append()`：

```
$count.text(output[index]); 
```

顾名思义，`.append()`就是将内容添加到容器的末尾。然而，`.text()`设置容器中显示的文本，覆盖任何现有文本。

实际上，`.html()`, 的行为更像`.append()`是`.text()`，但我不建议使用`.html()`，除非您实际设置`.html()`. 既然你说结果是数字的，`.text()`那就更好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:19:48.193

在添加新结果之前尝试更新您的 AJAX 调用以清除内容：

```
$.ajax({ 
    type: "POST",
    url: "movement_count.php",
    data: {movement:movement, client_id:client_id, class_id:class_id},
    dataType: "json", 
    async: false,
    success:(function(output) {      

        $.each(output, function(index, value){
            //alert(value);

            $count.html(''); // Clear current content

            $count.append(output[index]); // Append new content

        }); // each
     }) 
```

}) // ajax

# mysql - 复杂的选择 - 州和县

> ID：13020039
> 
> 赞同：5
> 
> 时间：2012-10-22T21:17:38.523
> 
> 标签：mysql

我无法让这个复杂的选择为我工作。

这是我的结构图。 [http://www.bandwise.com/files/tester_db.png](http://www.bandwise.com/files/tester_db.png)

结构和样本数据的 SQL 文件。 [http://www.bandwise.com/files/tester_db.sql](http://www.bandwise.com/files/tester_db.sql)

简单地说，我有一张叫做“租约”的桌子和一张叫做“公寓”的桌子。租赁和公寓之间存在一对多的关系。公寓标识了它们所属的美国州和县。因此，一个给定的租约可能有许多分散在全国各地的公寓。

我需要做的是仅选择包含一个或多个公寓的美国州，并返回申请租约的数量。由于某些租约可能在多个州拥有公寓，因此可能需要将多个州的租约计算在内。

这是我正在使用的测试查询。

```
SET @timenow = 1360855314;

SELECT l.lid, c.aid, c.leaseid, c.serialnum, c.state, c.county
FROM leases l, apartments c
WHERE c.leaseid = l.lid
    AND l.closebidding > @timenow AND l.status = 1; 
```

我可以在这里看到我在状态 #1（德克萨斯州）有 6 个租约，在状态 #2（路易斯安那州）有 2 个租约。如何从 states 表向外查询以根据他们的公寓所在的位置获取租约数量？

返回应该是这样的。

```
---------------------------
|  state      |   total   |
---------------------------
|  Texas      |     6     |
---------------------------
|  Louisiana  |     3     |
--------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:37:53.370

使用`count(distinct l.lid)`：

```
SELECT s.state_name,count(distinct l.lid) 
FROM 
  leases l
  JOIN apartments c ON c.leaseid = l.lid
  JOIN states s ON s.state_id = c.state
WHERE
  l.closebidding > @timenow AND l.status = 1 
GROUP BY s.state_name; 
```

## [SQL小提琴](http://sqlfiddle.com/#!2/3b275/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:12:55.760

利用

```
WHERE s.stateid = s2.stateid AND s2.dateadded > [unix timestamp] and s2.TOTAL <> 0 
```

# jquery - .load() 在图像准备好之前触发

> ID：13020041
> 
> 赞同：3
> 
> 时间：2012-10-22T21:17:53.597
> 
> 标签：jquery, ajax, dynamic-data

我有一些动态加载的图像，这些图像会根据用户单击的链接而变化。

我需要在显示图像之前获取图像的宽度和高度，以便可以正确格式化页面，但是 .load() 事件将在图像完全加载之前触发，并且我的宽度/高度调用返回 NULL 或 0。

在尝试获取尺寸之前，我需要一种方法来检查图像是否实际加载。

有什么帮助吗？

代码：

阿贾克斯调用

```
function loadImages() {
    //___ Variables
    var xmlhttp;
    var responseArray = [];

    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {

        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            $("#preload").empty();
            //___ Get server response / Convert to Array / Drop last field
            var responseArray = xmlhttp.responseText.split(',');
            responseArray.pop();

            var windowHeight = $(window).height();
            var imgHeight = windowHeight * .9
            if (imgHeight > 1000) {//___ if WindowHeight is > 1000px make images max 900px
                imgHeight = 900;
            }

            //___ Place images in preload
            //$("#preload").append("<div id='contain'></div>");
            for(var i=0;i<responseArray.length;i++){
                $("<img src='"+responseArray[i]+"' id='responseImage"+i+"'>").appendTo("#preload");
            }
            ready();
        }

    };
    //console.log(portLink); //Display link clicked
    xmlhttp.open("GET","includes/displayimagesLive.php?portname="+portLink,true);
    xmlhttp.send();
} 
```

准备好（）函数：

```
function ready() {
    var div = document.getElementById("preload").childNodes;
    var count = $(div).length;
    console.log(count);

    $("#responseImage0")
        .load(function() {
            //alert("Loaded");
            alert($("#responseImage"+count).width());
        })
        .error(function() {
            alert("Error");
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:00:48.850

同事[undefined](https://stackoverflow.com/users/848164/undefined)向我指出了一个很棒的 gitHub 插件，叫做[imagesLoaded](https://github.com/desandro/imagesloaded)，它完美地完成了这项工作。

不可思议，真的。

在对 MAMP 和 live 进行了大量研究和研究之后，我使用了[lazyLoad](http://www.appelsiini.net/projects/lazyload)来完成工作。主要是因为我的图像很大，但不是很大，需要预加载。

# javascript - 取消绑定 jQuery ajaxSuccess 事件

> ID：13020043
> 
> 赞同：7
> 
> 时间：2012-10-22T21:18:05.953
> 
> 标签：javascript, jquery

无法解除绑定全局 ajaxSuccess 事件处理程序。

每次我运行以下代码然后测试 ajax 函数时，每次运行代码时都会调用一次方法挂钩。

```
var hook = function() { console.log('hey'); };
$(document).unbind('ajaxSuccess', hook); // not working
$(document).bind('ajaxSuccess', hook); 
```

我也尝试过使用

```
$(document).ajaxSuccess(hook); 
```

但上面的内容并没有取代现有的 hook 引用，并且具有与上面相同的行为。

可能相关的一件事是我使用的是非常旧版本的 jQuery (1.3.2)。

我敢肯定，我在这里缺少一个明显的解决方案，但是大脑今天无法正常工作。任何帮助将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T21:34:03.627

in 中的第二个参数`.unbind()`应该是对当前绑定的函数的引用。如果将变量更改为指向不同的函数，它将不起作用。

因此，如果您首先绑定`ajaxSuccess`到名为 的函数`hook`：

```
var hook = function () { console.log("a"); };
$(document).bind("ajaxSuccess", hook); 
```

然后更改`hook`并尝试解除绑定：

```
hook = function () { console.log("b"); };
$(document).unbind("ajaxSuccess", hook);
$(document).bind("ajaxSuccess", hook); 
```

这将失败，因为`hook`不再包含对原始函数的引用。相反，在更改 的值之前取消绑定`hook`：

```
$(document).unbind("ajaxSuccess", hook);
hook = function () { console.log("b"); };
$(document).bind("ajaxSuccess", hook); 
```

或者，如果这是不可能的，例如，因为原来`hook`的不再在范围内，你可以省略第二个参数来删除*所有*绑定的处理程序：

```
$(document).unbind("ajaxSuccess"); 
```

当然，如果您有另一个绑定到 的处理程序`document.ajaxSuccess`，它也将是未绑定的。

# wso2 - WSO2 CEP 与 BAM

> ID：13020044
> 
> 赞同：1
> 
> 时间：2012-10-22T21:18:06.687
> 
> 标签：wso2, wso2carbon, complex-event-processing, wso2bam, wso2cep

我试图了解整个 WSO2 SOA 拓扑，但无法理解 CEP 和 BAM 如何组合在一起

1.  CEP 能否提供已处理事件的可视化监控，例如与 WSO2 GS 的集成
2.  尽管 WSO2 网站说 CEP 与 BAM 紧密集成以进行后处理，但我找不到任何解释相同或如何完成的场景..（CEP 可以提供 BAM 吗？如何配置相同）
3.  为什么要将 CEP + BAM 放在一起？任何用例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:17:13.693

答案

1.  所有 WSO2 项目都能够相互集成，因为它们基于相同的底层平台（WSO2 Carbon）。在这种特殊情况下，WSO2 CEP 和 GS。一种方法是将来自 CEP 的处理结果保存在数据存储或文件中，并从小工具后端读取它，以便小工具（前端）可以在 GS 中对其进行可视化。如果需要，您也可以在 CEP 之上安装 GS 功能（仪表板、小工具 repo 等）并使用相同的服务器运行时。但是，对于后者，它必须基于相同的 Carbon 版本

2.  这意味着，同一个数据代理可以向 BAM 和 CEP 发送事件。它们都共享 Thrift 和 REST API。与 1 类似，CEP 和 BAM 可以存在于同一个运行时中，也可以单独下载使用。一篇相关文章在[这里](http://wso2.org/library/articles/2012/07/creating-custom-agents-publish-events-bamcep)

3.  主要用例是为 CEP 的实时分析和 BAM 的实时（近实时）批处理处理相同的事件。例如：服务器的处理时间相关分析可以分解为适合两台服务器。对于 CEP，查询可以执行，提醒我服务器在 30 秒内没有响应 3 个请求。对于 BAM，您可以绘制一个小时/天/周内的正常运行时间趋势。

# jquery - 单击时启用/禁用 div

> ID：13020056
> 
> 赞同：1
> 
> 时间：2012-10-22T21:19:00.190
> 
> 标签：jquery, click, overlay

我想在点击时启用覆盖`div`并在点击时禁用它。

现在我的代码看起来像这样。也许`.on .off`使用不当？

```
$(function() {
    $("#sec_a_div").on("click","#wrapper_overlay");

    var docHeight = $(document).height();

    $("#wrapper_overlay")
      .height(docHeight)
      .css({
         'opacity' : 0.4,
         'position': 'absolute',
         'top': 0,
         'left': 0,
         'background-color': '#666666',
         'width': '100%',
         'z-index': 100
      })

    $.off("click","#wrapper_overlay");

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:20:44.493

您可以使用`show()`and`hide()`来“启用”和“禁用”覆盖：

```
$("#sec_a_div").on("click", function() {
    $("#wrapper_overlay").show();
});

$("#wrapper_overlay")
  .height($(document).height())
  .css({
     "opacity": 0.4,
     "position": "absolute",
     "top": 0,
     "left": 0,
     "background-color": "#666666",
     "width": "100%",
     "z-index": 100,
     "display": "none"
  })
  .on("click", function() {
      $(this).hide();
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:36:22.947

我猜你想要以下内容：

```
$(function() {
    var docHeight = $(document).height();
    var overlay = $("#wrapper_overlay")
      .height(docHeight)
      .css({
        'opacity' : 0.4,
        'position': 'absolute',
        'top': 0,
        'left': 0,
        'background-color': '#666666',
        'width': '100%',
        'z-index': 100
      }).hide();

    overlay.on('click', function(){
        $(this).hide();
    });

    $("#sec_a_div").on('click', function(){
        overlay.show();
    });
}); 
```

理解 jQuery`.on`和`.off`方法并不难：

```
$(elementSelector).on(eventName, eventHandler);
$(elementSelector).off(eventName, eventHandler); 
```

**在哪里：**

1.  `elementSelector`可以是从 CSS 选择器字符串到 DOM 对象集合或较早创建的 jQuery 选择的任何内容。
2.  `eventName`是事件的名称，可以是默认事件之一（`click`、`mouseover`、`keydown`等）或由`$(elementSelector).trigger(eventName);`调用触发的自定义事件
3.  `eventHandler`是事件发生时执行的函数，其中给这个函数的第一个参数是jQuery的事件对象。

并且

```
$(elementSelector).on('click', function(){
}); 
```

是相同的

```
$(elementSelector).click(function(){
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T21:34:08.003

你最好把那个CSS放在一个类中

CSS

```
#wrapper_overlay
{
 opacity : 0.4;
 position: absolute;
 top: 0;
 left: 0;
 background-color: #666666;
 width: 100%;
 z-index: 100;
 display:none;
} 
```

JAVASCRIPT

```
$("#sec_a_div").on("click",function () { 
  $("#wrapper_overlay")
    .height($(document).height())
    .show();
});

$("#wrapper_overlay").on("click", function() { $(this).hide()); 
```

# java - AbsoluteLayout 在 NetBeans 中丢失

> ID：13020059
> 
> 赞同：1
> 
> 时间：2012-10-22T21:19:10.477
> 
> 标签：java, netbeans, netbeans-6.9, absolutelayout

我在一台机器上使用 NetBeans 制作了一个带有 AbsoluteLayout 的 Java 应用程序，然后我将项目数据文件移动到另一台机器上，在那里我收到了一些库的参考问题消息，包括 AbsoluteLayout 库。
我修复了项目库并从项目库中删除了 AbsoluteLayout.jar，并使用 Netbeans 的添加库选项再次添加它。
现在在`Set Layout`菜单中没有`AbsoluteLayout`！（适用于所有项目！！）

如何再次将 AbsoluteLayout 添加到 Netbeans 的 SetLayout 菜单？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:45:07.993

解决许多 Netbeans 问题（特别是与用户配置相关的问题）的根本解决方案是删除用户目录并让 Netbeans 重新创建它。

在 NB 7.2 之前，此文件夹位于 HOME 用户目录（`/home/user`或`C:\Users\user`）内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T18:35:55.683

正如@madth3 所[指出](https://stackoverflow.com/questions/13020059/absolutelayout-lost-in-netbeans#comment17674305_13020059)的，这很容易做到。`AbsoluteLayout`是`Library`对话框中的第一个条目，它的类路径可以成为快速单击的目标`Remove`。

作为这个更[激进的解决方案的替代方案](https://stackoverflow.com/a/13035377/230513)，导航到库配置目录。

```
cd config/org-netbeans-api-project-libraries/Libraries 
```

应该有一个名为`absolutelayout.xml`包含更改配置的最新文件。

```
$ ls
absolutelayout.xml 
```

删除错误文件，NetBeans 将在重新启动时恢复原始类路径。

```
rm absolutelayout.xml 
```

作为参考，Mac OS X 上原始 NetBeans 8 的完整路径是

```
/Applications/NetBeans/NetBeans\ 8.0.app/Contents/Resources/NetBeans/platform/config/Modules/org-jdesktop-layout.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-20T11:53:16.890

我面临与 netbeans 相同的问题，不允许我添加构建 AbsoluteLayout 库。作为替代解决方案，我搜索了这个 jar 文件并在 netbeans 安装目录下找到了它。就我而言，它处于以下路径-

C:\Program Files\NetBeans 8.0.2\java\modules\ext

从这里我将它放入我的库结构中，一切正常，希望这篇文章可以帮助其他人。快乐编码！！！

# python - 使用 Python 解析 XML

> ID：13020062
> 
> 赞同：0
> 
> 时间：2012-10-22T21:19:22.630
> 
> 标签：python, xml

```
<?xml version="1.0" encoding="UTF-8"?>
<WindowElement xmlns="http://windows.lbl.gov">
    <WindowElementType>System</WindowElementType>
    <Optical>
        <WavelengthData>
            <LayerNumber>System</LayerNumber>
            <Wavelength unit="Integral">Visible</Wavelength>
            <SourceSpectrum>CIE Illuminant D65 1nm.ssp</SourceSpectrum>
            <DetectorSpectrum>ASTM E308 1931 Y.dsp</DetectorSpectrum>
            <WavelengthDataBlock>
                <WavelengthDataDirection>Transmission Front</WavelengthDataDirection>
                <ColumnAngleBasis>LBNL/Klems Full</ColumnAngleBasis>
                <RowAngleBasis>LBNL/Klems Full</RowAngleBasis>
                <ScatteringDataType>BTDF</ScatteringDataType>
                <ScatteringData> 1, 2, 3, 3 
                             </ScatteringData>
            </WavelengthDataBlock>
        </WavelengthData>
    <WavelengthData>
        <LayerNumber>System</LayerNumber>
        <Wavelength unit="Integral">Visible</Wavelength>
        <SourceSpectrum>CIE Illuminant D65 1nm.ssp</SourceSpectrum>
        <DetectorSpectrum>ASTM E308 1931 Y.dsp</DetectorSpectrum>
        <WavelengthDataBlock>
            <WavelengthDataDirection>Transmission Back</WavelengthDataDirection>
            <ColumnAngleBasis>LBNL/Klems Full</ColumnAngleBasis>
            <RowAngleBasis>LBNL/Klems Full</RowAngleBasis>
            <ScatteringDataType>BTDF</ScatteringDataType>
            <ScatteringData> 555, 555
....... 
```

如何使用 Python 读取`1, 2, 3, 3`ScatteringData 元素并将其更改为`5, 8, 8`

有两个称为 ScatteringData 的元素，只有第一个被更改。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:28:51.117

您应该查看可用于在 python 中使用 XML 的库。你可以从这里开始[http://wiki.python.org/moin/PythonXml](http://wiki.python.org/moin/PythonXml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:59:22.183

如果你必须处理 xml，我建议你看看[`lxml`](http://lxml.de/).

他们说 lxml 是 Python 语言中用于处理 XML 和 HTML 的功能最丰富且易于使用的库。它比它的替代品更快、更健壮。并在 SO 中搜索 lxml 和其他内容，因为在之前的问题中有很多关于使用哪一个的建议。

```
from lxml import etree as ET

In [14]: root = ET.fromstring(datafragment)

In [15]: root.xpath('.//scatteringdata')[0].text='blah'

In [16]: print ET.tostring(root,pretty_print=True)
...
<scatteringdata>blah</scatteringdata>
... 
```

如果您必须在多个地方进行更改，请使用循环：

```
for i in root.xpath('.//scatteringdata'):
    i.text='smth' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T21:46:40.627

这是使用[美丽汤](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)的解决方案。基本上，它允许您直接查看数据并根据需要对其进行修改。

```
import BeautifulSoup
soup = BeautifulSoup.BeautifulSoup(open("waves.xml"))
soup.scatteringdata.string = "5, 8, 8"
print soup.prettify() 
```

哪个输出：

```
 ...
  <scatteringdatatype>
    BTDF
   </scatteringdatatype>
   <scatteringdata>
    5, 8, 8
   </scatteringdata>
  </wavelengthdatablock>
  ... 
```

如果您想先查看数据，可以使用

```
originalData = soup.scatteringdata.string 
```

然后按照您的意愿处理

# asp.net-mvc-4 - ASP.Net MVC 4 如何创建一个没有密码的简单会员帐户

> ID：13020065
> 
> 赞同：4
> 
> 时间：2012-10-22T21:19:42.670
> 
> 标签：asp.net-mvc-4, user-registration

我正在构建一个 MVC4 应用程序，其中用户将由站点管理员注册。站点管理员当然会输入除密码以外的所有内容。然后我生成一个令牌并通过电子邮件发送给他们设置密码。但是，我看不到创建没有密码的用户的方法。我可以随机生成一个或在代码中分配一个。在创建帐户时处理没有密码的最佳方法是什么？

编辑：我在创建帐户时使用 Membership.GeneratePassword 生成密码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:22:22.623

创建一个随机密码，并在确认帐户后允许他们更改。解决了许多问题。

# eclipse - 将 Eclipse JUnit 导出的 XML 转换为 HTML

> ID：13020068
> 
> 赞同：3
> 
> 时间：2012-10-22T21:19:52.633
> 
> 标签：eclipse, junit

我有一个 JUnit 测试套件，我在 Eclipse 中作为插件测试套件运行。当我运行测试时，结果会显示在 JUnit 视图中。我想将结果作为 HTML 文件获取，以便可以在内部网站上显示它们。

视图菜单有一个导出选项，但这会生成 XML 而不是 HTML。我已经尝试在 XML 文件上运行 Ant JUnitReport 任务，但我收到一个错误，指出它的格式不正确。

有没有一种简单的方法可以以某种方式从 JUnit 视图导出 HTML 文件，或者有一种将导出的 XML 转换为 HTML 的方法？如果这已经是一个已解决的问题，我不想自己编写变压器。（我知道一种简单的方法是截取 JUnit 视图的屏幕截图并将其作为图像发布，但如果可能的话，我想要一个更好的解决方案。）

# jquery - 在 Jquery ajax 调用上传递多个参数时出错？

> ID：13020069
> 
> 赞同：3
> 
> 时间：2012-10-22T21:19:53.997
> 
> 标签：jquery, .net, json, web-services, jsonp

我正在使用[本教程](http://www.codeproject.com/Articles/43038/Accessing-Remote-ASP-NET-Web-Services-Using-JSONP)使用 JSONP 实现 .net webservice (asmx) 。

当我调用我的 web 服务时，它使用单个参数。但是，当我尝试使用多个参数调用时，我不断收到 Network 500 错误。我尝试`"data: JSON.stringify({ jewellerId: filter, locale: 'en-US' }),"`按照这个 stackoverflow 问题中的描述使用：将[多个参数传递给 jQuery ajax 调用](https://stackoverflow.com/questions/1916309/pass-multiple-parameters-to-jquery-ajax-call)。但是它不起作用。

她的是我的剧本：

```
function getData() 
{
    var key = "123";
    var code = "12458";
    jQuery.ajax({ url: http://service.com/test.asmx,
        data: JSON.stringify({ Key: key, Code: code }),
        dataType: "jsonp",
        success: function(json) 
        {
            alert(json.d);
        },
        error: function() {
            alert("Hit error fn!");
        }
    });
} 
```

因此，当我将 web 服务更改为仅采用一个参数时，我将数据更改为： `data: {Key: JSON.stringify("123") }` 它有效。

有什么建议我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:26:15.273

如果您将数据作为 GET 发送（这是 jsonp 请求的情况），请不要对数据进行字符串化

```
function getData() {
    var key = "123";
    var code = "12458";
    jQuery.ajax({ url: http://service.com/test.asmx,
        data: { Key: key, Code: code },
        dataType: "jsonp",
        success: function(json) {
            alert(json.d);
        },
        error: function() {
            alert("Hit error fn!");
        }
    });
} 
```

# telerik - 如何按需使用 Kendo Grid Ajax Read 事件

> ID：13020070
> 
> 赞同：5
> 
> 时间：2012-10-22T21:19:56.280
> 
> 标签：telerik, telerik-grid, telerik-mvc, kendo-ui

我有 DropDownList 和 Telerik 的 Kendo UI Grid Control 页面。第一次打开页面时，DropDownList 中没有选择任何项目。只有当用户在 DropDownList 中选择值时，Grid 才会对服务器进行 Ajax 调用并加载相应的数据。

当用户在 DropDownList 中选择项目时，我的代码工作正常，但问题是第一次打开页面时，DropDownList 中没有任何值，并且 Grid 不应该调用服务器。

我的问题是，如果 DropDowList 中没有选择项目，如何防止网格不调用服务器？

```
 <div>
@Html.Kendo().DropDownList().Name("broker").DataTextField("GrandParentName").DataValueField("Id").BindTo(Model).SelectedIndex(@selectedIndex).Events(e => e.Change("brokerChanged"))
    </div>

    @(Html.Kendo().Grid<OrderViewModel>()
          .Name("Orders")
          .HtmlAttributes(new {style = "height: 500"})
          .Columns(c =>
              {
                  c.Bound(p => p.Id)
                      .Width(50)
                      .Title("")
                      .Sortable(false)
                      .IncludeInMenu(false)
                      .ClientTemplate((@Html.ActionLink("Edit", "Index", "Splits", new {Id = "OrderId"}, null).ToHtmlString().Replace("OrderId", "#=Id#")));
                  c.Bound(p => p.TradeDate)
                      .Title("Trd Dt")
                      .Format("{0:d}")
                      .Width(90)
                      .HtmlAttributes(new {style = "text-align: right"});
                  c.Bound(p => p.Price)
                      .Title("Price")
                      .Format("{0:n}")
                      .Width(100)
                      .HtmlAttributes(new {style = "text-align: right"});
                  c.Bound(p => p.Status)
                      .Title("Status");
                  c.Bound(p => p.Notional)
                      .Title("Notional")
                      .Format("{0:n}")
                      .HtmlAttributes(new {style = "text-align: right"});
              })
          .Sortable()
          .Scrollable()
          .ColumnMenu()
          .Pageable(x =>
              {
                  x.Enabled(true);
                  x.PreviousNext(false);
                  x.PageSizes(false);
                  x.Info(true);
                  x.Input(false);
                  x.Numeric(false);
                  x.Refresh(true);
                  x.Messages(y => y.Display("{2} Order(s)"));
              })
          .Resizable(resize => resize.Columns(true))
          .Reorderable(reoder => reoder.Columns(true))
          .DataSource(ds => ds.Ajax()
                            .ServerOperation(false)
                            .Read(read => read.Action("Action", "MyController").Data("selectedBrokerId")))
          )

<script type="text/javascript">
    function brokerChanged() {
        var grid = $("#Orders").data("kendoGrid");
        grid.dataSource.read();
    }

    function selectedBrokerId() {
        var obj = { brokerId: $("#broker").data("kendoDropDownList").value() };

        return obj;
    }
</script> 
```

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T04:22:45.320

网格有一个[自动绑定](http://docs.kendoui.com/api/web/grid#autobind%20booleandefault)功能。您可以使用它来确定是否在页面首次加载时进行阅读。这应该有效（假设 selectedIndex 确定是否选择了下拉值）：

```
@(Html.Kendo().Grid<OrderViewModel>()
      .Name("Orders")
      .HtmlAttributes(new {style = "height: 500"})
      .AutoBind(selectedIndex > 0) 
      //rest of your grid declaration 
```

# matlab - vision.VideoPlayer 对象的鼠标点击回调

> ID：13020075
> 
> 赞同：2
> 
> 时间：2012-10-22T21:20:04.697
> 
> 标签：matlab, computer-vision, matlab-cvst

在 MATLAB 中，可以执行类似的操作来处理图形图像轴上的鼠标点击

```
frame = imread('image.jpeg');
imHandle = imshow(frame);
set(imHandle, 'ButtonDownFcn', {@onclick, gca}); % @onclick is callback function 
```

但是，我使用的是计算机视觉系统工具箱中的视频播放器。例如，

```
videoPlayer = vision.VideoFileReader(filename, 'VideoOutputDataType', 'uint8');
for i=1:1:10 
    frame = mov(i).cdata;      % read frame from a movie structure
    step(videoPlayer, frame);  % Original video
end 
```

本质上，我想为`vision.VideoPlayer`对象编写鼠标单击回调，其方式与 MATLAB 句柄图形对象相同。回调函数可以返回，例如，点击在视频中的位置。我没有在 MathWorks 网站上找到这方面的示例。这对`vision.VideoPlayer`对象可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:49:46.547

每个 MATLAB 支持。vision.VideoPlayer 对象实际上是一个句柄图形对象。有一个未记录且不受支持的命令，我们可以通过它获取它的句柄：

```
findall(0, 'type', 'axes', 'tag', 'VideoAxes') 
```

请注意，更改 video.VideoPlayer 对象的句柄图形属性可能会导致意外行为，并且这样做不是受支持的功能。

# php - 我如何知道命令行中的任务何时完成？

> ID：13020081
> 
> 赞同：1
> 
> 时间：2012-10-22T21:20:39.457
> 
> 标签：php, linux, command-line, interaction

这非常重要，因为我在 Google 中找不到任何我想要的东西。

我如何知道由命令行执行的应用程序（或者将其称为任务更合适？）何时完成？如果我这样做，PHP如何知道复制多个文件的任务是否完成：

```
 exec("cp -R /test/ /var/test/test"); 
```

即使命令仍在后台运行以进行复制，PHP 脚本是否继续转到下一个代码？还是 PHP 脚本等到复制完成？以及命令行应用程序在完成时如何通知脚本（如果有的话）？一定有某种互动正在发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:30:45.883

php 的 exec 返回一个字符串，所以是的。您的网页将冻结，直到命令完成。例如这个简单的代码

```
<?PHP
echo exec("sleep 5; echo HI;");
?> 
```

执行时会在页面加载 5 秒时出现，然后显示：

```
 HI; 
```

如果我这样做，PHP如何知道复制多个文件的任务是否完成？

Php 不知道，它只是简单地运行命令，并不关心它是否有效，而是返回从该命令生成的字符串。这就是为什么最好使用 PHP 的复制命令，因为它在统计时返回 TRUE/FALSE。或者创建一个 bash/sh 脚本，该脚本将返回 0/FALSE 或 1/TRUE 以确定如果您要走这条路线，命令是否成功。然后你可以这样 PHP：

```
<?PHP
$answer = exec("yourScript folder folder2");
if ($answer=="1") {
//Plan A Worked
} else {
//Plan A FAILED try PlanB
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:23:13.647

它一直等到 exec 调用返回，无论它返回什么。

然而，退出调用可能会返回，尽管它已启动的命令尚未完成。如果您从控件中分离出来，例如通过在命令末尾显式指定“&”，则可能会出现这种情况。

# mysql - 使用同一表中的值更新表内容

> ID：13020083
> 
> 赞同：0
> 
> 时间：2012-10-22T21:20:52.840
> 
> 标签：mysql

我有一个 10000 行的简单表

产品编号 | 价格 | price_inc_vat | 增值税率

我希望能够根据 price 的值更新 price_inc_vat 的值

我试过这个

```
UPDATE 1_products AS s3, 
       1_products AS t3

SET    t3.price_inc = ROUND(s3.price*1.3,2)

WHERE  s3.vat_rate = 20 AND t3.vat_rate=20; 
```

它没有错误，但似乎需要很长时间，因为我不得不在 1/2 小时后终止查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:23:31.277

为什么要加入？

```
UPDATE products SET price_inc_vat = ROUND(price*1.3,2) WHERE vat_rate=20; 
```

**已更新** 我不太确定您通过将产品的“Inc. price”更新为另一个产品价格来达到什么目的，但是您的查询需要这么长时间的原因是因为您加入的方式。

```
mysql> create table t1 (product_id integer unsigned primary key, price decimal(10,2), price_inc_vat decimal(10,2), vat_rate integer unsigned);

mysql> insert into t1 values (1, 1.00, 1.20, 20), (2, 2.00, 2.40, 20), (3, 1.00, 1.30, 30);

mysql> select * from (t1 as s3, t1 as t3) where s3.vat_rate=20 and t3.vat_rate=20;
1   1.00    1.20    20  1   1.00    1.20    20
2   2.00    2.40    20  1   1.00    1.20    20
1   1.00    1.20    20  2   2.00    2.40    20
2   2.00    2.40    20  2   2.00    2.40    20

mysql> select s3.*, t3.*, round(s3.price * 1.3, 2) from (t1 as s3, t1 as t3) where s3.vat_rate=20 and t3.vat_rate=20;
1   1.00    1.20    20  1   1.00    1.20    20  1.30
2   2.00    2.40    20  1   1.00    1.20    20  2.60
1   1.00    1.20    20  2   2.00    2.40    20  1.30
2   2.00    2.40    20  2   2.00    2.40    20  2.60

mysql> update (t1 as s3, t1 as t3) set t3.price_inc_vat=round(s3.price*1.3, 2) where s3.vat_rate=20 and t3.vat_rate=20;

mysql> select * from (t1 as s3, t1 as t3) where s3.vat_rate=20 and t3.vat_rate=20;
1   1.00    1.30    20  1   1.00    1.30    20
2   2.00    1.30    20  1   1.00    1.30    20
1   1.00    1.30    20  2   2.00    1.30    20
2   2.00    1.30    20  2   2.00    1.30    20 
```

如果您尝试根据之前的价格设置来设置产品价格，那么以下内容可能有助于澄清问题：

```
mysql> create table t1 (
  product_id integer unsigned, 
  vat_rate integer unsigned, 
  price decimal(10,2), 
  price_inc_vat decimal(10,2), 
  primary key(product_id, vat_rate)
);

mysql> insert into t1 (product_id, price, price_inc_vat, vat_rate) values (1, 1.00, 1.20, 20), (2, 2.00, 2.40, 20), (1, 1.00, 0, 30), (2, 2.00, 0, 30);

mysql> create temporary table tmp1 like t1;

mysql> insert into tmp1 select * from t1;

mysql> select * from t1;
1       20      1.00    1.20
1       30      1.00    0.00
2       20      2.00    2.40
2       30      2.00    0.00

mysql> select * from tmp1;
1       20      1.00    1.20
1       30      1.00    0.00
2       20      2.00    2.40
2       30      2.00    0.00

mysql> update t1 left join tmp1 on t1.product_id=tmp1.product_id and t1.vat_rate > tmp1.vat_rate set t1.price_inc_vat = round(tmp1.price*(1+t1.vat_rate/100), 2) where tmp1.vat_rate = 20;

mysql> select * from t1;
1       20      1.00    1.20
1       30      1.00    1.30
2       20      2.00    2.40
2       30      2.00    2.60 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:36:42.003

所以你有一个字段 for`price`和另一个 for `price_inc_vat`，还有一个 for `vat_rate`？为什么不在需要时存储`price`和`vat_rate`计算`price_inc_vat`呢？

另外，当您的目标增值税似乎是 20% 时，为什么还要乘以 1.3？

抛开所有这些逻辑上的不一致，你不能做以下事情吗？

```
UPDATE products
SET price_inc_vat = ROUND(price * 1.3, 2)
WHERE vat_rate = 20 
```

或者在增值税更改后更新所有内容，忽略 10% 的加价：

```
UPDATE products
SET price_inc_vat = ROUND(price * (1+vat_rate/100), 2) 
```

# opengl - 为 OpenGL 子类型化数字参数的最佳方法是什么？

> ID：13020094
> 
> 赞同：2
> 
> 时间：2012-10-22T21:21:56.280
> 
> 标签：opengl, ada, specifications

在 OpenGL 规范中，某些参数采用一组 from 的值，`GL_OBJECTENUMERATIONi`其中 i 的范围从 0 到由类似`GL_MAX_OBJECT`. （作为一个例子，灯光是一个“对象”。）很明显，指示的数字是上限，将通过提供某种间接性的 glGet 函数传递。

**但是**，根据 OpenGL 规范的字面解释，[glActiveTexture](http://www.opengl.org/sdk/docs/man/xhtml/glActiveTexture.xml) `must be one of GL_TEXTUREi, where i ranges from 0 (GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS - 1)`的“纹理”参数意味着接受的常量集**必须**是`GL_TEXTURE0`to，`GL_TEXTURE35660`因为该常量是值 35661 的常量。

除了语言律师之外，这种设置意味着子类型不仅可以是不相交的，而且也可以是乱序的，因此以下 C-ish 映射将是有效的：

```
#define GL_TEXTURE0             0x84C0
#define GL_TEXTURE1             0x84C1
#define GL_TEXTURE2             0x84C2
#define GL_TEXTURE3             0x84A0
#define GL_TEXTURE4             0x84A4
#define GL_TEXTURE5             0x84A5
#define GL_TEXTURE6             0x84A8
#define GL_TEXTURE7             0x84A2 
```

首先，这是一个问题实际上是一个问题，还是常量**总是**像`GL_OBJECTi`= `GL_OBJECTi-1`+1 一样排列？

如果这种关系成立，那么就有可能使用 Ada 的子类型功能来避免传入无效参数......

理想情况下，类似：

```
-- This is an old [and incorrect] declaration using constants.
-- It's just here for an example.
SubType Texture_Number is Enum Range
  GL_TEXTURE0..Enum'Max(
            GL_MAX_TEXTURE_COORDS - 1,
            GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS - 1); 
```

但是，如果最大值是动态确定的，那么我们必须做一些胡闹：

```
With GL_Constants;
Generic
  GL_MAX_TEXTURE : Integer;
  -- ...and one of those for EACH maximum for the ranges.
Package Types is
    Use GL_Constants;

    SubType Texture_Number is Enum Range
       GL_TEXTURE0..GL_MAX_TEXTURE;    
End Types; 
```

实例化`Package GL_TYPES is new Types( GL_MAX_TEXTURE => glGet(GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS) );`然后使用这个新`GL_TYPES`包......比直接子类型化多一点工作，而且更麻烦一点。

其中大部分来自于对 OpenGL 完全陌生并且没有完全了解/理解它；但它确实提出了一些有趣的问题，即构建良好、厚实的 Ada 绑定的最佳方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:48:14.967

> 表示接受的常量集必须是 GL_TEXTURE0 到 GL_TEXTURE35660，因为该常量是值 35661 的常量。

不，不是这个意思。GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS 是一个依赖于实现的值，将在运行时使用`glGetIntegerv(GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS, out)`

关于其余部分：OpenGL 规范声明 GL_TEXTURE = GL_TEXTURE0 + i，对于所有其他对象类型类似，`i < n`其中*n*是一个合理的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T22:09:46.843

这是其中一种情况，我不认为让这些类型变得特别性感会给你带来很多好处。

如果您只是为 GL_TEXTURE ( `type GL_TEXTURE is 16#84C0# .. 16#8B4C#;`) 创建一个特殊的整数类型，并将该类型用于查找 GL 纹理的所有参数，编译器将阻止用户在这些和其他整数对象之间进行数学运算。那可能就足够了。它肯定比那些可怜的 C/C++ 程序员所坚持的要好得多！

再说一次，我从来都不是超厚 Ada 绑定的支持者。应该使用 Ada 绑定来使类型更像 Ada，并将 C 错误代码转换为异常。如果有其他方法可以为用户节省一些工作，那就去做吧。但是，不要抽象出 API 的任何功能！

* * *

关于我选择使用单独的数字类型而不是整数子类型的评论中有多个问题。

实际上，当子类型可以使用时，开始为自己创建自定义数字类型`integer`，然后对必须进行的所有类型转换感到恼火，这是一个常见的 Ada 菜鸟错误。典型的例子是有人为速度创建了一种类型，然后为距离创建了另一种类型，然后为力创建了另一种类型，然后发现他们必须对每一个该死的数学运算进行类型转换。

但是，有时需要自定义数字类型。特别是，**只要该类型的对象应该存在于与普通整数不同的类型域中，您就希望使用自定义数字类型**。最常见的情况发生在 API 绑定中，其中有问题的数字实际上是某些资源的 C-ish 名称。这就是我们这里的确切情况。在 s 上你唯一想做的数学运算`GL_Texture`就是与类型的边界进行比较，以及按字面量进行简单的加减运算。（很可能`GL_Texture'next()`就足够了。）

作为一个巨大的好处，将其设为自定义类型将防止将 GL_Texture 值插入 API 调用中的错误参数的常见错误。C API 调用确实喜欢他们`int`的...

事实上，如果坐下来把它们全部输入是合理的，我怀疑你会很想把它作为一个枚举。如果没有转换，那将更不兼容`Integer`，但这里没有人会三思而后行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T23:15:22.493

好的，关于 OpenGL，您需要了解的第一条规则：*每当*您看到“从 X 到 Y”的内容，并且其中一个值是 a`GL_THINGY`时，它们*并不是*在谈论 的数值`GL_THINGY`。他们正在谈论您使用查询的依赖于实现的*值* `GL_THINGY`。这通常是一个整数，因此您可以使用某种形式的[`glGetIntegerv`](http://www.opengl.org/wiki/GLAPI/glGet)来查询它。

下一个：

> 这种设置意味着子类型不仅可以是不相交的，而且也可以是乱序的，因此以下 C-ish 映射将是有效的：

不，它不会。

OpenGL 中的每个实际枚举器都由 ARB 分配一个特定的值。命名 GL_TEXTURE''i'' 枚举器的 ARB 分配值为：

```
#define GL_TEXTURE0 0x84C0
#define GL_TEXTURE1 0x84C1
#define GL_TEXTURE2 0x84C2
#define GL_TEXTURE3 0x84C3
#define GL_TEXTURE4 0x84C4
#define GL_TEXTURE5 0x84C5
#define GL_TEXTURE6 0x84C6
#define GL_TEXTURE7 0x84C7
#define GL_TEXTURE8 0x84C8 
```

注意它们是如何按顺序排列的。

至于其余的，让我从 OpenGL 4.3 规范中引用您的内容[`glActiveTexture`](http://www.opengl.org/wiki/GLAPI/glActiveTexture)：

> 如果指定了无效纹理，则会生成 INVALID_ENUM 错误。texture 是 TEXTURE''i'' 形式的符号常量，表示要修改纹理单元 ''i''。常量服从 TEXTURE''i'' = TEXTURE0 + ''i'' 其中 ''i'' 在 0 到 ''k'' - 1 的范围内，而 ''k'' 是 MAX_COMBINED_TEXTURE_IMAGE_UNITS 的值）。

如果您要使用某种语言创建绑定，一般的想法是：“不要强类型化某些值”。尤其是这个。只要拿走用户给你的任何东西并传递它。如果用户得到一个错误，他们就会得到一个错误。

更好的是，公开一个更合理的版本，`glActiveTexture`它需要一个“整数”而不是一个枚举器，然后自己进行加法。

# winforms - 将信息显示为小工具或 winform NotifyIcon？

> ID：13020095
> 
> 赞同：0
> 
> 时间：2012-10-22T21:22:02.013
> 
> 标签：winforms, windows-desktop-gadgets

我将开发一个应用程序，该应用程序将定期查询数据库并显示其产品流程的最新调度程序/队列信息。

我最初的想法是一个小工具可以做到这一点，因为主要功能是显示信息，并且该信息应该在大多数时间都可以在没有用户干预的情况下随时可用。但似乎微软停止了小工具的阅读。我应该担心这一点并改用 winform NotifyIcon 吗？我突然想到，像小工具这样的东西更简单，而且由于它的简单性可能对用户更友好？

或者还有其他我不知道的选择吗？这将是一个简化业务流程的简单应用程序，我认为可以安全地假设机器是 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:43:37.187

我会专注于当前的桌面。由于您当前的目标是 Windows 7，因此我不会太担心。企业似乎不太可能转向 Windows 8。

此外，对于 Windows 8，您可能想要制作某种 Metro 应用程序。

# mysql - 在 mysql 数据库中创建所有表 innoDb 类型

> ID：13020102
> 
> 赞同：0
> 
> 时间：2012-10-22T21:22:31.500
> 
> 标签：mysql, database, innodb

我正在开发一个大型网站，并在其上添加许多功能。我想知道将数据库中的所有表都设置为InnoDB类型是否有任何问题，因为我在数据库中有20个表的所有表中有太多的外键连接，并且数据库中的所有表都是连接的莫名其妙地在一起，这有什么问题吗，或者没关系，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:28:28.543

InnoDB 优于 MyISAM，如果您有外键约束，那么无论如何您都应该使用 InnoDB，因为 MyISAM 不支持外键。

此外，如果您想使用 InnoDB，通常建议所有表都使用 InnoDB。无论如何，它提供了许多优势，所以我会说是的，除非您有充分的理由不这样做（即您需要 MyISAM 地理空间扩展或全文并且您的 InnoDB 版本不支持这些功能），否则创建所有表 InnoDB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:28:02.857

完全没有问题，您应该使用任何可用的功能，例如 INNODB 引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:31:15.017

问题，没有。但是你用的是什么dbm？（InnoDB 是 MySQL 的默认存储引擎）所以应该没有问题，假设您使用的是 MySQL 或任何其他支持 InnoDB 的。但是你在用桌子做什么，什么会导致问题，或者你认为会导致问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T22:23:08.057

据我所知，选择 MyISAM 而不是 InnoDB 的唯一重要原因是全文索引。除此之外，InnoDB 对事务和外键约束的支持使其成为绝大多数应用程序的更好选择。

也就是说，如果您需要 MyISAM 的某些功能，没有什么能阻止您在 InnoDB 表旁边使用一些 MyISAM 表。

# iis-7 - WebApi 的 {"message":"an error has occurred"} 在 IIS7 上，不在 IIS Express 上

> ID：13020103
> 
> 赞同：185
> 
> 时间：2012-10-22T21:22:35.880
> 
> 标签：iis-7, asp.net-mvc-4, asp.net-web-api

我正在使用 ASP.NET MVC 4 WebApi，并且在我的本地计算机上的 IIS Express 上运行它很有趣。我也将 IIS Express 配置为为远程计算机提供服务，因此我公司中的其他人正在使用我的计算机作为我们的网络服务器。

在确定这是一个不太理想的解决方案后，我们决定在安装 .NET 4.5 后将 WebApi 放在远程服务器上。当我使用提琴手并将 POST 发送到本地计算机上的控制器时，它返回正确的响应，但是当我将域更改为运行 IIS7 的网络服务器时，相同的 POST 返回一个神秘的

> {“消息”：“发生错误”}

信息。有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2012-10-24T03:37:56.923

问题是缺少不在服务器上但在我的本地计算机上的依赖项。在我们的例子中，它是一个 Devart.Data.Linq dll。

为了得到这个答案，我打开了 IIS 跟踪 500 错误。这提供了一些信息，但真正有用的是在 web.config 中设置`<system.web><customErrors mode="Off"/></system.web>`This 指向缺少动态加载的依赖项。添加此依赖项并告知将其复制到本地后，服务器开始工作。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2015-11-20T20:01:00.460

### 基本上：

`IncludeErrorDetailPolicy`如果`CustomErrors`不能为您解决问题，请改用（例如，如果您的 ASP.NET 堆栈大于 2012）：

```
GlobalConfiguration.Configuration.IncludeErrorDetailPolicy 
= IncludeErrorDetailPolicy.Always; 
```

注意：小心返回详细的错误信息可能会向“黑客”泄露敏感信息。请参阅下面西蒙对此答案的评论。

### TL;DR 版本

对我来说`CustomErrors`并没有真正的帮助。它已经设置为`Off`，但我仍然只收到一条微不足道的`an error has occurred`消息。我想公认的答案是从 3 年前开始的，这在如今的网络词中已经很长时间了。我正在使用 Web API 2 和 ASP.NET 5 (MVC 5)，微软已经放弃了仅 IIS 的策略，而`CustomErrors`旧的 skool IIS ;)。

无论如何，我有一个本地没有的生产问题。然后发现我在 Chrome 的网络选项卡中看不到错误，就像在我的开发机器上一样。最后，我设法通过在我的生产服务器上安装 Chrome，然后在服务器本身上浏览到应用程序（例如，在“本地主机”上）来解决它。然后更详细的错误出现在堆栈跟踪和所有内容中。

后来才发现[这篇来自 Jimmy Bogard 的文章](https://lostechies.com/jimmybogard/2012/04/18/custom-errors-and-error-detail-policy-in-asp-net-web-api/)（注：Jimmy 是[AutoMapper 先生！](http://automapper.org/)）。有趣的是，他的文章也来自 2012 年，但在其中他已经解释说`CustomErrors`这不再有帮助，但是您可以通过`IncludeErrorDetailPolicy`在全局 WebApi 配置中设置不同的值来更改“错误详细信息”（例如`WebApiConfig.cs`）：

```
GlobalConfiguration.Configuration.IncludeErrorDetailPolicy 
= IncludeErrorDetailPolicy.Always; 
```

幸运的是，他还解释了如何设置 webapi (2) 监听您的`CustomErrors`设置。这是一个非常明智的方法，这可以让你回到 2012 年：P。

注意：默认值为'LocalOnly'，这解释了为什么我能够在找到这篇文章之前按照我描述的方式解决问题。但我知道，并不是每个人都可以远程生产和启动浏览器（我知道在我决定成为自由职业者和 DevOps 之前我大多不能）。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2017-10-25T23:39:39.327

其他答案都不适合我。

这样做了：（在 Startup.cs 中）

```
public class Startup
{
    public void Configuration(IAppBuilder app)
    {
        var config = new HttpConfiguration();

        WebApiConfig.Register(config);

        // Here: 
        config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;
    }
} 
```

（或者你可以把它放在 WebApiConfig.cs 中）：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        // Web API routes
        config.MapHttpAttributeRoutes();

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        // Here: 
        config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;
    }
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-02-06T21:34:58.627

当我在测试环境中遇到错误时，我总是会遇到这个问题并记住，“我以前做过，但是我可以直接在 web.config 中进行，而无需修改代码并重新部署到测试环境，但需要进行 2 次更改……又是什么？”

备查

```
<system.web>
   <customErrors mode="Off"></customErrors>
</system.web> 
```

和

```
<system.webServer>
  <httpErrors errorMode="Detailed" existingResponse="PassThrough"></httpErrors>
</system.webServer> 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-05-15T07:25:17.350

发布到 WebAPI 端点时，我遇到了类似的问题。通过打开 CustomErrors=Off，我能够看到缺少 dll 之一的实际错误。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-05-19T08:25:40.667

如果这对任何人都有帮助：

我有一个类似的问题，并按照我添加的 Nates 说明：

```
<system.web>
     <customErrors mode="Off"/>
 </system.web> 
```

这向我展示了有关该错误的更多信息：

> “ExceptionMessage”：“无法加载指定的元数据资源。”，“ExceptionType”：“System.Data.Entity.Core.MetadataException”，“StackTrace”：“在 System.Data.Entity.Core.Metadata.Edm.MetadataArtifactLoaderCompositeResource .LoadResources(...

这是当我记得我已将 edmx 文件移动到其他位置并且忘记更改配置中的连接字符串节点时（连接字符串节点使用“configSource”放置在单独的文件中，但这是另一回事）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-26T06:28:15.097

我的招摇 XML 文件没有部署到 \bin：

```
GlobalConfiguration.Configuration
  .EnableSwagger(c =>
  {
    c.SingleApiVersion("v1", "SwaggerDemoApi");
    c.IncludeXmlComments(string.Format(@"{0}\bin\SwaggerDemoApi.XML", 
                         System.AppDomain.CurrentDomain.BaseDirectory));
    c.DescribeAllEnumsAsStrings();
  }) 
```

[http://wmpratt.com/swagger-and-asp-net-web-api-part-1/](http://wmpratt.com/swagger-and-asp-net-web-api-part-1/)

[![在此处输入图像描述](../Images/584019117d14f0f4c64f759dd253aba9.png)](https://i.stack.imgur.com/l7IXy.png)

它必须在发布配置和调试配置中进行设置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-16T21:54:06.977

如果您`<deployment retail="true"/>`在 .NET Framework 的 machine.config 中有，您将不会看到详细的错误消息。确保该设置为假或不存在。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-30T09:52:22.457

所以我尝试了所有建议的解决方案都无济于事。我所做的只是设置从服务器运行应用程序并完整显示错误，当我将 customErrors 模式设置为 false 时这应该可以工作，但它没有。当我浏览服务器的 API 表单时，我就发现了问题。

# hadoop - 用于 Hadoop 的 DynamoDB 输入格式

> ID：13020104
> 
> 赞同：3
> 
> 时间：2012-10-22T21:22:51.060
> 
> 标签：hadoop, amazon-web-services, mapreduce, amazon-dynamodb, elastic-map-reduce

我必须使用 Hadoop map reduce 处理一些保存在 Amazon Dynamo DB 中的数据。

我在互联网上搜索 Dynamo DB 的 Hadoop InputFormat，但找不到。我不熟悉 Dynamo DB，所以我猜有一些与 DynamoDB 和 Hadoop 相关的技巧？如果有这种输入格式的任何实现，你能分享一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:36:22.893

经过大量搜索后，我在 Amazon 的一个库中找到了 DynamoDBInputFormat 和 DynamoDBOutputFormat。

在 amazon elastic map reduce 上有一个名为 hive-bigbird-handler 的库，其中包含 dynamoDB 的输入和输出格式。完整的类名是：org.apache.hadoop.hive.dynamodb.write.DynamoDBOutputFormat 和 org.apache.hadoop.hive.dynamodb.read.DynamoDBInputFormat

我希望这些课程对社区有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:02:10.500

找不到可以直接在 MapReduce 中使用的 InputFormat。但是，这里有一篇文章[AWS HowTo：使用 Amazon Elastic MapReduce 和 DynamoDB（Guest Post）](http://aws.typepad.com/aws/2012/01/aws-howto-using-amazon-elastic-mapreduce-with-dynamodb.html)来使用 Hive 运行 MarReduce 作业。

# java - 如何将json数组中的值转换为java字符串

> ID：13020109
> 
> 赞同：0
> 
> 时间：2012-10-22T21:23:07.200
> 
> 标签：java, arrays, json

我需要从 JSON 数组中获取值并显示它们。下面是我使用的代码。

`getresponse`类将向 PHP 页面发送 HTTP 请求并获取相关的 JSON 数组，公共变量**res**将保存返回的 JSON 数组。

```
public class JSONConverter {
     public void convert(){
        getresponse gr=new getresponse();
        String json = gr.res;
        Data data = new Gson().fromJson(json, Data.class);
        System.out.println(data);
    }
}

class Data {
    private String city;
    private int reserve_no;

    public String getCity() { return city; }
    public int getReserve_no() { return reserve_no; }

    public void setTitle(String city) { this.city = city; }
    public void setId(int reserve_no) { this.reserve_no = reserve_no; }

    public String toString() {
        return String.format(city);
    } 
} 
```

**getrespose 类**

```
public class getresponse {
public static String res;
  public void counter() {
 try {
    URL url = new URL("http://taxi.net/fetchLatest.php");
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.setRequestMethod("GET");
    conn.setRequestProperty("Accept", "application/json");

    if (conn.getResponseCode() != 200) {
        throw new RuntimeException("Failed : HTTP error code : "
                + conn.getResponseCode());
    }

    BufferedReader br = new BufferedReader(new InputStreamReader(
        (conn.getInputStream())));
            String str;
    while ((str =br.readLine()) != null) {                                  
                    res=str;

    }

    conn.disconnect(); 
```

以下是返回的 JSON 数组的示例。

> [{"reserve_no":"20","city":"city2","street":"street1234","discription":"discription123","date":"2012-10-22 04:47:54" "客户":"abc"}]

此代码不显示返回的 JSON 数组的城市名称。有人可以通过更正代码或建议更好或更简单的方法来帮助我吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:30:54.267

Gson 根据您的类属性名称将 json 字符串映射到您的类。所以`Data`类具有`title`应该映射到`city`json 数组中的属性。您需要将您的属性重命名为，`city`以便 Gson 可以找出`city`从 json 数组中放置的位置。
或者您可以使用注释显式映射`city`到`title`. 检查这个：[https ://sites.google.com/site/gson/gson-user-guide#TOC-JSON-Field-Naming-Support](https://sites.google.com/site/gson/gson-user-guide#TOC-JSON-Field-Naming-Support)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T22:49:28.783

Nikita 已经为您提供了正确的解决方案，但在这里，一步一步来。

我将您的问题简化为这个最小的测试：

```
import com.google.gson.Gson;

public class TestGSON 
{
    public static void main( String[] args )
    {
        // that's your JSON sample
        String json = "[{\"reserve_no\":\"20\",\"city\":\"city2\",\"street\":\"street1234\",\"discription\":\"discription123\",\"date\":\"2012-10-22 04:47:54\",\"customer\":\"abc\"}]";
        // note: we tell Gson to expect an **array** of Data
        Data data[] = new Gson().fromJson(json, Data[].class);
        System.out.println(data[0]);
    }
} 
```

问题是您的 JSON 片段实际上是一个对象**数组**，而不仅仅是一个对象（因此 [] 围绕它）。因此，您需要告诉 GSon 它必须期待一个 Data 数组，而不仅仅是一个 Data 对象。顺便说一句，按原样执行代码时引发的异常已经告诉您：

```
Exception in thread "main" com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 2 
```

当然，除非它被一个空`catch`块吞没

关于 Data 类：在重写 toString 方法之前请三思而后行，就像在这里所做的那样。我会放弃那个方法，然后做

```
System.out.println( data[0].getCity() ); 
```

# jquery - jquery 不在本地网络上工作

> ID：13020110
> 
> 赞同：0
> 
> 时间：2012-10-22T19:33:44.367
> 
> 标签：jquery, apache, permissions

我有一个运行 apache Web 服务器的 Fedora 服务器。服务器连接到家庭网络。我有一台笔记本电脑连接到同一个网络。我可以在笔记本电脑的浏览器中输入我的服务器的 IP 地址，然后调出位于 Fedora 主服务器文档根目录中的 index.html 文件。index.html 文件包含 jquery 代码。jquery 代码仅在我在浏览器中本地打开它时才有效（例如，右键单击使用 firefox 打开），但是当我尝试从我的笔记本电脑查看网页时，jquery 代码不会执行。

代码在下面。

```
<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script>
    $(document).ready(function() {
        $('#form').hide();
        $('input[type=text]').focus(function() {
            $(this).val('');
        });
        $('input[type=password]').focus(function() {
            $(this).val('');
        });
        $('.form').hide();
        $('#log').click(function(){
            $('#form').toggle();
        });
        $('#reg').click(function(){
            $('.form').toggle();
        }); 
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:35:58.857

您将需要根目录中的文件 jquery-1.8.2.js 或包含代码的文件所在的任何位置（在服务器上），以及围绕代码的以下标签。

```
<script type="text/javascript">
// code here
</script> 
```

打开 Firebug 或类似的扩展并转到控制台以调试代码的任何其他最终问题。

# google-bigquery - bq CLI 说我的 JSON 模式无效，而浏览器 GUI 说没问题。我哪里错了？

> ID：13020123
> 
> 赞同：1
> 
> 时间：2012-10-22T21:24:08.390
> 
> 标签：google-bigquery

我有一个 JSON 模式：

[{"name":"timestamp","type":"integer"},{"name":"xml_id","type":"string"},{"name":"prod","type": "string"},{"name":"version","type":"string"},{"name":"distcode","type":"string"},{"name":"origcode", "type":"string"},{"name":"overcode","type":"string"},{"name":"prevcode","type":"string"},{"name": "ie","type":"string"},{"name":"os","type":"string"},{"name":"payload","type":"string"},{ “名称”：“语言”，"type":"string"},{"name":"userid","type":"string"},{"name":"sysid","type":"string"},{"name": "loc","type":"string"},{"name":"impetus","type":"string"},{"name":"numprompts","type":"record","mode ":"repeated","fields":[{"name":"type","type":"string"},{"name":"count","type":"integer"}]},{ "name":"rcode","type":"record","mode":"repeated","fields":[{"name":"offer","type":"string"},{"name “：“代码”，”type":"integer"}]},{"name":"bw","type":"string"},{"name":"pkg_id","type":"string"},{"name" :"cpath","type":"string"},{"name":"rsrc","type":"string"},{"name":"pcode","type":"string"}, {"name":"opage","type":"string"},{"name":"action","type":"string"},{"name":"value","type":" string"},{"name":"other","type":"record","mode":"repeated","fields":[{"name":"param","type":"string" },{"名称":"值",“类型”：“字符串”}]}]

（[http://jsoneditoronline.org/](http://jsoneditoronline.org/)用于漂亮的打印）

通过浏览器 GUI 加载时，模式被接受为有效。cli 抛出以下错误：

```
BigQuery error in load operation: Invalid schema entry: "fields":[{"name":"type" 
```

我指定的架构有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:20:25.373

如果您将架构作为 json 传递，则应将其写入文件并将文件名作为架构参数传递。在命令行上传递模式内联只允许用于简单的平面模式。

# android - iPhone/Android webapp 包装器

> ID：13020124
> 
> 赞同：9
> 
> 时间：2012-10-22T21:24:14.433
> 
> 标签：android, iphone, ios, web-applications, cordova

我在一家大型公司工作，该公司正在研究构建仅供内部使用的应用程序（iPhone/iPad）。我们正在寻找一种创建应用程序的简单方法，这些应用程序本质上只是一个具有预定义 URL 且没有地址栏/选项卡等的 Web 浏览器。本质上是一个带有自定义徽标的非常愚蠢的浏览器。实现这一目标的最简单方法是什么？

我们显然会分发这些我们自己的东西，并且它们不会在 App Store 中提供，因此应用指南不是问题。我们在 Windows 机器上并且是 Java/Web 开发人员，所以如果可能的话，我们宁愿不要过多地使用 C 语言，仅供参考。基本上，如果该工具（如果存在的话）允许我们给它一个 URL、一个图标图像并从那里构建应用程序，那就太好了。

当我们开始使用 Apple 设备时，我们需要跨平台兼容我们使用的任何工具，因为我可以想象他们以后决定购买 Android 或 WindowsPhone 设备的那一天。

移动互联？电话间隙？Appcelerator Titanium SDK？这些中的任何一个都可以满足我们的需要吗？还有什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:59:38.293

对 MobiOne 来说是一个很大的“不”。我花了 99 美元买了它。正如他们所宣传的那样，我能够在几个小时内创建一个静态应用程序。但这几乎是 MobiOne 可以做的。当您开始使用 html、javascript 甚至音频时，各种问题似乎都在蔓延。他们的论坛也没有支持。我关于使用音频播放器的基本问题已经一个月没有答案了。

这是最糟糕的部分：该工具的模拟器构建不佳。通常，我的应用程序在模拟器中运行良好，但在部署到真实设备时无法运行。有时，我也看到反之亦然。

从那以后，我切换到PhoneGap（它是免费的）。我花了 2 天时间才把我的环境设置好。但是一旦我完成了环境设置，只需几分钟就可以将我的应用程序部署到虚拟设备中。

看看你的要求，我会说你安全的赌注是PhoneGap。

我没有 Titanium 的工作知识，但我在很多论坛上读到，与 PhoneGap 相比，它支持的平台更少。Titanium 似乎给应用程序带来了更原生的感觉，但这也意味着您无法在不更改代码的情况下将其移植到多个平台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T21:45:39.037

如果它所做的只是将网站包装在 WebView 中，Apple 可能会拒绝您的应用程序。您需要在您的应用程序中拥有更多的功能，而不仅仅是加载网页。

来自 iOS 的应用审查指南：

2.12 不是很有用、只是捆绑为应用程序的网站或不提供任何持久娱乐价值的应用程序可能会被拒绝

您需要向应用程序添加额外的屏幕，例如关于页面和联系我们页面，以免您的应用程序被拒绝。

正如您所说您了解 JavaScript，请查看 appcelerator.com，它允许您构建跨平台应用程序并且只编写一次代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:43:00.090

我会重新评估您最初希望将这些项目创建为应用程序的原因。您希望您的网页现在没有哪些应用程序功能？您没有在问题中提及任何表明这需要成为应用程序的内容。

在 Apple 设备上，您可以创建一个指向网站的图标。您可以以隐藏地址栏的方式定义页面。最后，网页可以很容易地跨平台。

将其包装到应用程序中可能会使过程复杂化。您可能需要将更新的应用程序代码部署到设备，在浏览器中进行刷新同样有效。

# javascript - Ajax - 参数不传递 - 没有 jQuery

> ID：13020126
> 
> 赞同：0
> 
> 时间：2012-10-22T21:24:18.987
> 
> 标签：javascript, ajax, parameter-passing

不幸的是，我似乎只得到了 jQuery 结果。我正在寻找通过 AJAX 传递参数的正确方法，不需要旧的浏览器回退，但请不要使用库。如果我错过了另一个线程，请链接=）

我正在使用 $，但它是自定义对象/无论如何，而不是 jQuery。

```
$.ajax({
    't':'POST',
    'u':e, 
    'd':{ajax:'1'},
    's':function(data){
        console.log(data.response);
        document.getElementById('mainc').innerHTML = data.response;
    },
    'e':function(data){
        console.log(data);
    }
}); 
```

哪个电话：

```
$.ajax = function(a){
if(!a.u){return false;};
a.t=a.t||"GET";
typeof a.a=='undefined'?true:a.a;
a.e=a.e||function(){return false;};
a.s=a.s||function(){return true;};
var x=new XMLHttpRequest();
x.open(a.t,a.u,a.a);
x.onreadystatechange=function(){
    if(x.readyState===4){
        if(x.status===200){
            a.s(x);
        }else{
            a.e(x);
        }
    }
};
a.t==="post" ? x.setRequestHeader("Content-Type", "application/x-www-form-urlencoded") : null;
x.send(a.d); 
```

}

`x.send(a.d)`应该通过`{ajax:'1'}`。我试过`{'ajax':'1'}`了，也`'ajax=1'`一样。不知道为什么我尝试传递的参数都没有使它成为服务器端。我非常确定参数没有到达服务器，尽管请求似乎可以毫无问题地发送和接收。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:45:45.857

`XMLHttpRequest.send()`如果您设置，则不接受 javascript/JSON 对象`x.setRequestHeader("Content-Type", "application/x-www-form-urlencoded")`。

您应该格式化为此处提到的 urlencoded 变量：

[Javascript 对象的查询字符串编码](https://stackoverflow.com/questions/1714786/querystring-encoding-of-a-javascript-object)

或`x.setRequestHeader("Content-Type", "application/json")`像建议的另一个答案一样使用。

还：

`a.t==="post"`应该是`a.t==="POST"`因为它不会因为区分大小写检查而更改请求标头。

完整的工作代码（带有 urlencoded 数据）：

```
$ = {}

$.ajax = function(a){
if(!a.u){return false;};
a.t=a.t||"GET";
typeof a.a=='undefined'?true:a.a;
a.e=a.e||function(){return false;};
a.s=a.s||function(){return true;};
var x=new XMLHttpRequest();
x.open(a.t,a.u,a.a);
x.onreadystatechange=function(){
    if(x.readyState===4){
        if(x.status===200){
            a.s(x);
        }else{
            a.e(x);
        }
    }
};
a.t==="POST" ? x.setRequestHeader("Content-Type", "application/x-www-form-urlencoded") : null;
x.send(a.d);

}    

$.ajax({
    't':'POST',
    'u':'/', 
    'd':"ajax=1",
    's':function(data){
        console.log(data.response);
        document.getElementById('mainc').innerHTML = data.response;
    },
    'e':function(data){
        console.log(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:35:55.270

尝试将请求标头设置为

```
x.setRequestHeader("Content-Type", "application/json") 
```

看看[这个](https://stackoverflow.com/questions/6055714/how-to-send-json-object-or-string-data-from-javascript-xmlhttprequest-to-mvc-c)。

# ruby-on-rails - Ruby on Rails：build_model 有什么作用？

> ID：13020129
> 
> 赞同：4
> 
> 时间：2012-10-22T21:24:35.353
> 
> 标签：ruby-on-rails, database, nested-forms

我有一个用户和个人资料模型，我使用相同的表单来填充它们。在我的控制器中，我有一行：@user.build_profile

我想知道这条线是做什么的。用户和个人资料是一一对应的，个人资料属于用户。

我还有一个名为 image 的新模型，我想使用嵌套属性与用户建立一对多的关系。在用户 coltroller 中的新操作中，我应该使用与上述类似的行吗？@user.build_image

完整的新动作：

```
def new         
    @user = User.new
    @user.build_profile

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T21:31:47.947

build_profile 将创建一个空的配置文件对象（属于@user）。稍后在创建操作中，您将调用

```
@user.save 
```

这会将配置文件（连同用户）保存到数据库中。

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html) -解释它

编辑：对于 has_many 关系，您可以调用

```
@user.images.build 
```

创建一个新的图像模型。这个铁轨铸件越过它

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# python - 弹出执行错误

> ID：13020131
> 
> 赞同：0
> 
> 时间：2012-10-22T21:24:48.713
> 
> 标签：python

这就是我的代码的外观，并且在使用 Popen 时出现错误

测试.py

```
import subprocess
import sys

def test(jobname):
    print jobname
    p=subprocess.Popen([sys.executable,jobname,parm1='test',parm2='test1'])

if __name__ == "__main__":
   test(r'C:\Python27\test1.py') 
```

测试1.py

```
def test1(parm1,parm2):
  print 'test1',parm1

if __name__ = '__main__':
  test1(parm1='',parm2='') 
```

错误

语法错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:26:39.297

**在 test1.py 中：**

您需要两个等号：

```
if __name__ = '__main__': 
```

改为使用

```
if __name__ == '__main__': 
```

因为您想将 的值`__name__`与字符串进行比较`'__main__'`，所以不要将值分配给`__name__`.

* * *

**在 test.py 中：**

`parm1='test'`是一个语法错误。您不能为列表中间的变量赋值：

```
p=subprocess.Popen([sys.executable,jobname,parm1='test',parm2='test1']) 
```

* * *

看来您想为函数提供不同`parm1`的值。你不能通过调用来做到这一点，因为那里是硬编码的。`parm2``test1.test1``python test1.py``parm1=''``parm2=''`

如果要从 Python 运行非 Python 脚本，请使用`subprocess`. 但是当您想在子进程中运行 Python 函数时，请使用[multiprocessing](http://docs.python.org/library/multiprocessing.html)：

```
import multiprocessing as mp
import test1

def test(function, *args, **kwargs):
    print(function.__name__)
    proc = mp.Process(target = function, args = args, kwargs = kwargs)
    proc.start()
    proc.join()  # wait for proc to end

if __name__ == '__main__':
    test(test1.test1, parm1 = 'test', parm2 = 'test1') 
```

# c# - 持久性设计模式

> ID：13020136
> 
> 赞同：0
> 
> 时间：2012-10-22T21:25:19.497
> 
> 标签：c#, design-patterns

我正在从事一个项目，我正在努力尝试从一种持久性模式转移到另一种持久性模式。

我查看了*Patterns of Enterprise Application Architecture*、*Design Patterns*，并在[此](http://msdn.microsoft.com/en-us/magazine/dd569757.aspx#id0400008)MSDN 文章中寻求帮助。我们当前的模式是 MSDN 文章中描述的 Active Record 模式。作为向更加模块化的代码库迈出的第一步，我们试图将我们的一些业务对象（又名表）分解为多个接口。

例如，假设我有一个类似这样的商店应用程序：

```
public interface IContactInfo
{
    ...
}

public interface IBillingContactInfo: IContactInfo
{
    ...
}

public interface IShippingContactInfo: IContactInfo
{
    ...

}

public class Customer: IBillingContactInfo, IShippingContactInfo
{
    #region IBillingContactInfo Implementation
    ...
    #endregion

    #region IShippingContactInfo Implementation
    ...
    #endregion

    public void Load(int customerID);
    public void Save();
} 
```

Customer 类代表我们的客户表中的一行。尽管 Customer 类是一行，但它实际上实现了两个不同的接口：IBillingContactInfo、IShippingContactInfo。

从历史上看，我们没有这两个接口，我们只是在各处传递整个 Customer 对象并对其进行任何我们想要的更改，然后保存它。

这就是问题所在。现在我们有了这两个接口，我们可能有一个控件，它接受一个 IContactInfo，将其显示给用户，并允许用户在错误时更正它。目前，我们的 IContactInfo 接口没有实现任何 Save() 来允许对其进行的更改保持不变。

在不完全切换到其他众所周知的解决方案的情况下，有什么好的设计模式可以绕过这个限制吗？我真的不想通过并为我的所有接口添加一个 Save() 方法，但这可能是我最终需要做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:58:33.670

`IContactInfo`您计划拥有多少种不同的衍生产品？

也许我错过了重点，但我认为你会更好地使用一个在 each 中调用`ContactInfo`a`BillTo`和一个`ShipTo`实例的类`Customer`。由于您的`IShippingContactInfo` 和`IBillingContactInfo`接口继承自同一个`IContactInfo`接口，因此您的类将通过一组字段`Customer`满足两个基接口。`IContactInfo`那将是一个问题。

最好制作这些单独的实例。然后，保存你`Customer`的就更直接了。

您是否计划序列化以实现持久性或保存到数据库或其他东西？

对 Customer 和 ContactInfo 使用具体类型肯定会涵盖前两个。

（平面文件适用于您的原始设置，但我希望您不打算这样做。）

~~我认为这一切都取决于您期望拥有多少 IContactInfo 的衍生产品。在您的图表中添加更多的地形并没有错。如果这意味着一条记录具有多个部分（您的示例），或者这是一对多关系（我的示例），或者它是列出类型（ShipTo、BillTo 等）的多对多关系。 ) 在连接表中。多对多肯定会减少 Customer 和各种 ContactInfo 类型之间的关系，但是当您需要具体关系时，它会在应用程序开发中产生开销。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:58:09.017

您可以通过简单地实现一个接口来轻松地将`Save()`方法约束添加到继承的接口，该接口强制执行该方法。那么任何有的也有，因此必须有。您也可以使用and - or 来执行此操作，语义更正确，and 。`IContactInfo``IPersistable``Save()``IContactInfo``IPersistable``Save()``ILoadable``Load(int ID)``IRetrievable``Retrieve(int ID)`

这完全取决于您如何使用您的`ContactInfo`对象。如果这对您的使用没有意义，请发表评论/更新您的问题，我将重新审视我的答案。

# java - 具有空白类型的 Android ClassCastException

> ID：13020143
> 
> 赞同：8
> 
> 时间：2012-10-22T21:25:59.597
> 
> 标签：java, android, exception, classcastexception, android-package-managers

我的行为很奇怪，我想我更多的是寻找解释而不是解决方案（尽管也欢迎解决方案！）。

这是代码：

```
PackageManager pm = context.getPackageManager();
List<PackageInfo> pkgList = pm.getInstalledPackages(PackageManager.GET_UNINSTALLED_PACKAGES);
if (pkgList == null)
   return null;
for (PackageInfo pkgInfo : pkgList) {
   ApplicationInfo appInfo = pkgInfo.applicationInfo;
   // do some stuff, doesn't modify pkgInfo or appInfo or pkgList
} 
```

在某些情况下，我会收到以下错误日志：

> java.lang.ClassCastException：无法转换为 android.content.pm.PackageInfo

报告线路：

```
for (PackageInfo pkgInfo : pkgList) 
```

奇怪的是，通常情况下，`ClassCastException`通常看起来像（AFAIK）：

> java.lang.ClassCastException: **foo.bar.ClassA**不能转换为**foo.bar.ClassB**

但是，我看到的错误在第一部分显示为空白。

我决定研究一下，如果返回列表的函数在内部转换错误的对象列表并返回它或其他东西，可能会发生这种情况。所以我看了看：

[`ApplicationPackageManager.getInstalledPackages()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/ApplicationPackageManager.java?av=f)

```
@SuppressWarnings("unchecked")
@Override
public List<PackageInfo> getInstalledPackages(int flags) {
    try {
        final List<PackageInfo> packageInfos = new ArrayList<PackageInfo>();
        PackageInfo lastItem = null;
        ParceledListSlice<PackageInfo> slice;

        do {
            final String lastKey = lastItem != null ? lastItem.packageName : null;
            slice = mPM.getInstalledPackages(flags, lastKey);
            lastItem = slice.populateList(packageInfos, PackageInfo.CREATOR);
        } while (!slice.isLastSlice());

        return packageInfos;
    } catch (RemoteException e) {
        throw new RuntimeException("Package manager has died", e);
    }
} 
```

好的，所以返回的列表是从`ParceledListSlice.populateList()...`

[`ParceledListSlice.populateList()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/content/pm/ParceledListSlice.java#ParceledListSlice)

```
public T populateList(List<T> list, Creator<T> creator) {
    mParcel.setDataPosition(0);

    T item = null;
    for (int i = 0; i < mNumItems; i++) {
        item = creator.createFromParcel(mParcel);
        list.add(item);
    }

    mParcel.recycle();
    mParcel = null;

    return item;
} 
```

因此，该项目是从`PackageInfo.CREATOR.createFromParcel()`...创建的

最后`creator.createFromParcel`的`PackageInfo`

```
public static final Parcelable.Creator<PackageInfo> CREATOR
        = new Parcelable.Creator<PackageInfo>() {
    public PackageInfo createFromParcel(Parcel source) {
        return new PackageInfo(source);
    }

    public PackageInfo[] newArray(int size) {
        return new PackageInfo[size];
    }
}; 
```

所以一切似乎都很好。它正在创建 a `ParceledListSlice`of type `PackageInfo`，因此`populateList`它正在创建一个`PackageInfo`项目并将其放入 a `List`of 中`PackageInfo`，这是返回的列表。所有类型/类对我来说似乎都很好。

所以我的问题，

1.  上面的 ClassCastException 怎么会发生？
2.  为什么它会显示错误消息的“空白”类型？
3.  什么是可能的解决方案？

我正在考虑将列表作为列表`Object`并检查“ `instanceof`”，但我认为这也行不通，因为它可能最终会说

> ClassCastException: cannot be cast into java.lang.Object" 什么的。

任何关于如何发生这种情况的见解和解释将不胜感激。

1.  Dalvik/JVM 只是搞砸了吗？
2.  内存是否损坏？

我只能胡乱猜测=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:48:48.010

如果你确定你`ClassCastException` 正好在这条线上

```
for (PackageInfo pkgInfo : pkgList) 
```

当一个原因出现时 - 不知何故`pkgList`包含一个非`PackageInfo`类的值。我认为这是`NULL`价值。为什么您在 ClassCast 错误消息中看不到它，因为`className`NULL 对象只是空字符串。

现在，如何解决这个问题 - 使用手动 for 循环。`for each`loop`Iterator`在幕后使用，因此您无法控制每次迭代的类转换。但是，如果您将使用这样的代码：

```
for (int i = 0; i < pkgList.length; i++) {
    Object pkgInfoObj = pkgList.get(i);
    if (pkgInfoObj instanceof PackageInfo) {
        PackageInfo pkgInfo = (PackageInfo) pkgInfoObj;
        ApplicationInfo appInfo = pkgInfo.applicationInfo;
        // do some stuff, doesn't modify pkgInfo or appInfo or pkgList
    }
} 
```

您将能够控制类转换。

此外，您可以**抓住** `ClassCastException`并跳过这个循环步骤到下一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T22:20:57.913

这似乎是Android本身的一个问题。我发现了一些针对 Android 的错误报告，它们表现出类似的行为：

[问题 26644：ClassCastException 和 IncompatibleClassChangeError](http://code.google.com/p/android/issues/detail?id=26644)

[问题 36560：（SensorManager.java:521）中的异常](http://code.google.com/p/android/issues/detail?id=36560)

我还看到了问题 26644 中提到的 IncompatibleClassChangeError。我唯一的猜测是，这些看似不可能的异常/错误是由于一些奇怪的内存损坏或 dalvik/jvm 问题造成的。代码本身似乎没有任何问题。如果其他人有更好的解释，请随时加入 =)

# html - 浏览器自动设置内容 div 的高度

> ID：13020148
> 
> 赞同：0
> 
> 时间：2012-10-22T21:26:14.177
> 
> 标签：html, css

我已经使用 wordpress 生成了一个网站。该站点的页面具有包含在 div 中的内容，如下所示：

```
<div id="content">
  <!-- content -->
</div> 
```

作为参考，这里是css规则：

```
#content {
  background: white url('images/hatch-light.png') repeat;
  box-shadow: 0px 0px 2px #333;
  -moz-box-shadow: 0px 0px 2px #333333;
  -webkit-box-shadow: 0px 0px 2px #333;
  width: 760px;
  position: absolute;
  left: 200px;
  z-index: 15;
} 
```

当我查看此来源时，我看到了这一点。但是，如果我检查内容元素使用 chrome，我会看到高度被插入到 div 样式中。我懂了：

```
<div id="content" style="height: 702px;"> 
```

高度是我的浏览器窗口的高度。我遇到的问题是内容 div 不再封装它的内容（例如，内容 div 具有背景样式，并且此背景样式不再延伸到浏览器定义的高度以下）。

谁能告诉我如何防止浏览器设置高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:53:50.627

感谢 Kevin Butcher 和其他评论者指出这一点。高度是由一段 javascript 插入的（height.js，你相信吗）。因此，它在检查元素时可见，但在查看源代码时不可见。

@chchrist 提供了一个解决方法（向 div 添加一个 height:auto!important 属性），同时我想出了如何从 wordpress 中删除脚本。

# php - 如何使用 PHP 根据会话 ID 控制对可下载文件的访问？

> ID：13020151
> 
> 赞同：0
> 
> 时间：2012-10-22T21:26:15.283
> 
> 标签：php

我有一个测试系统，可以记录用户输入的答案，然后对测试进行评分。完成后，它会创建一个易于阅读的答案表和用户获得的分数。我想记录该文件并将其放入日志文件中。

因此，我使用用户的用户名设置了一个文件，并将所有测试结果记录在该文件中。问题是，这些文件对公众开放。我有一个登录系统，它检查会话 ID 并允许或不允许访问，但我无法将代码放入那些新生成的文件中。

那么我应该怎么做呢？我已经使用该`.htaccess`文件来阻止对该文件夹的访问，但我希望有一个更流畅的解决方案。

是否可以使用 PHP 将 PHP 代码动态写入新创建的文件？（因此它会自动将登录检查生成到其每个自动生成的日志文件中）

提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:27:51.187

将文件保存在 Web 根目录之外。任何外部的`public_html`（或任何您的 Web 根目录）都完全无法从 Web 访问，但可以通过 PHP 文件访问，例如，如果它看到您已登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:31:38.410

> 是否可以使用 PHP 将 PHP 代码动态写入新创建的文件？（因此它会自动将登录检查生成到其每个自动生成的日志文件中）

是的。您可以创建一个仅包含登录检查的模板文件 file_get_contents ，然后将其写入文件顶部。然后，使用[__halt_compiler()](http://php.net/manual/en/function.halt-compiler.php)阻止 PHP 解释文件的其余部分。然后，您可以开始阅读`__COMPILER_HALT_OFFSET__`并将其回显给客户端。

如果您想要一个比使用更简单的解决方案，`__halt_compiler()`您可以简单地创建一个 php 文件，该文件将在会话检查后将结果回显给用户。

更好的是，您可以将所有结果插入数据库。然后，您只需要一个页面来检查用户名，获取结果，然后将其全部输出给用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:34:53.463

在创建表格文件之前，您还可以对该文件进行简单的追加，您将在其中插入表格代码和 PHP 会话检查代码。您可以使用 PHP[**文件写入函数**](http://php.net/manual/en/function.fwrite.php)来做到这一点。

由于 PHP 会话检查代码将保持不变，因此这种方法要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T21:46:31.673

a) 将文件存储在站点文档根目录之外的某个位置，因此无法通过 URL 直接访问它们。

b) 有一个 PHP 脚本作为访问这些文件的网关。代码很像

```
<?php

$fileID = $_GET['id'];

if (user_is_allowed_access($fileID)) {
    send_file_to_user($fileID);
} else {
    die("go away");
} 
```

一旦你解决了访问/权限检查的问题，文件的实际发送就可以像字面意思一样简单`readfile('/path/to/file/on/server')`

# ruby-on-rails - 测试失败 Michael Hartl Ruby on Rails Turorial Chapter 10.28

> ID：13020152
> 
> 赞同：1
> 
> 时间：2012-10-22T21:26:18.347
> 
> 标签：ruby-on-rails, railstutorial.org

我使用 Michael Hartl 的教程。目前我在[第 10 章](http://ruby.railstutorial.org/chapters/user-microposts#top)。在第 10.28 部分中，当我尝试运行测试时：

```
bundle exec rspec spec/requests/authentication_pages_spec.rb 
```

我收到此错误：

```
Failures:

  2) Authentication authorization for non-signed-in users in the Microposts
     controller submitting to the destroy action Failure/Error: before { delete   
     microposts_path (FactoryGirl.create(:micropost)) } ActionController::RoutingError:
     No route matches [DELETE] "/microposts.1" 
     # ./spec/requests/authentication_pages_spec.rb:115:in`block(6 levels) in
     <top required)>' 
```

这是我的 authentication_pages_spec.rb：

```
require 'spec_helper'

describe "Authentication" do
  let(:user) { FactoryGirl.create(:user) } 
    subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1', text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do

    before { visit signin_path } 

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

      describe "after visiting another page" do
          before { click_link "Home"}
          it { should have_selector('div.alert.alert-error') }
      end
    end

    describe "with valid information" do     
      let(:user) { FactoryGirl.create(:user) } 
      before do
        fill_in "Email",    with: user.email
        fill_in "Password", with: user.password
        click_button "Sign in"
      end

      it { should have_selector('title',    text: user.name) }

      it { should have_link('Users',        href: users_path) }
      it { should have_link('Profile',      href: user_path(user)) }
      it { should have_link('Settings',     href: edit_user_path(user)) }
      it { should have_link('Sign out',     href: signout_path) }

      it { should_not have_link('Sign in',  href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Email",    with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end    

        describe "after signing in" do

          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end

          describe "when signing in again" do
            before do
              delete signout_path
              visit signin_path
              fill_in "Email",    with: user.email
              fill_in "Password", with: user.password
              click_button "Sign in"
            end

            it "should render the default (profile) page" do
              page.should have_selector('title', text: user.name)
            end
          end
        end
      end

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end

        describe "visiting user index" do
          before { visit users_path }
          it { should have_selector('title', text: 'Sign in') }
        end
      end  

      describe "in the Microposts controller" do

        describe "submitting to the create action" do
          before { post microposts_path }
          specify { response.should redirect_to(signin_path) }
        end

        describe "submitting to the destroy action" do
          before { delete microposts_path(FactoryGirl.create(:micropost)) }
          specify { response.should redirect_to(signin_path) }
        end
      end
    end        

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path)}
      end
    end

    describe "as non-admin user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:non_admin) { FactoryGirl.create(:user) }

      before { sign_in non_admin }

      describe "submitting a DELETE request to the Users#destroy action" do
        before { delete user_path(user) }
        specify { response.should redirect_to(root_path) }
      end
    end
  end
end 
```

Rake 路线的结果：

```
 users GET    /users(.:format)             users#index
                  POST   /users(.:format)             users#create
         new_user GET    /users/new(.:format)         users#new
        edit_user GET    /users/:id/edit(.:format)    users#edit
             user GET    /users/:id(.:format)         users#show
                  PUT    /users/:id(.:format)         users#update
                  DELETE /users/:id(.:format)         users#destroy
         sessions POST   /sessions(.:format)          sessions#create
      new_session GET    /sessions/new(.:format)      sessions#new
          session DELETE /sessions/:id(.:format)      sessions#destroy
       microposts POST   /microposts(.:format)        microposts#create
        micropost DELETE /microposts/:id(.:format)    microposts#destroy
             root        /                            static_pages#home
           signup        /signup(.:format)            user#new
           signin        /signin(.:format)            sessions#new
          signout DELETE /signout(.:format)           sessions#destroy
static_pages_home        /static_pages/home(.:format) static_pages#home
             help        /help(.:format)              static_pages#help
            about        /about(.:format)             static_pages#about
          contact        /contact(.:format)           static_pages#contact 
```

我尝试使用 Micheal Hart 的 github 更正我的代码，但没有结果。有人知道吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T15:17:48.403

在您的测试中，您可以这样写：

```
before { delete microposts_path(FactoryGirl.create(:micropost)) } 
```

这将告诉测试框架生成对在您的路由中`DELETE`创建的路径的请求`microposts_path`。

你的`rake routes`输出有这个：

```
 microposts POST   /microposts(.:format)        microposts#create
    micropost DELETE /microposts/:id(.:format)    microposts#destroy 
```

看上面的`microposts`vs。`micropost`你应该`micropost_path`在你的测试中使用。

# vb6 - 仅在 VB 中搜索和替换整个单词

> ID：13020156
> 
> 赞同：4
> 
> 时间：2012-10-22T21:26:40.057
> 
> 标签：vb6

文字处理器程序具有搜索和替换功能。但是，部分单词（单词中的字符组合）也会被替换。为了解决这个问题，我计划删除多余的空格并使用 split 函数通过使用 " " 作为分隔符将字符串更改为单词数组。

但是，一旦我在数组中搜索，替换适当的单词，并将数组放回以空格分隔的字符串，用户的原始格式将丢失。例如，如果原始字符串是**“这是一个句子”。**并且用户希望将“a”替换为“the”，输出将是“This is the sentence.”，没有额外的空格。

所以，我的问题是是否有任何方法可以搜索和替换整个单词，同时仍然保留 Visual Basic 中用户的格式（额外空格）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:40:47.603

使用正则表达式怎么样？

在正则表达式中，代码`\b`是单词边界，因此例如，只有当 *a*是整个单词时，正则表达式`\ba\b`才会匹配*a 。*

 *例如，您的代码将是：

```
Dim strPattern As String: strPattern = "\ba\b"
Dim regex As New RegExp

regex.Global = True
regex.Pattern = strPattern
result = regex.Replace("This is a sentence.", "the") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:21:32.310

为什么你的格式丢失了？如果您按空格分割文本，则在从数组中组合回每个元素时，只需在每个元素后附加一个空格。但是您还必须考虑不是以空格而是标点符号结尾的单词。

在“This is a simple sentence, eh?”中，“eh”将存储为“eh?” 因为你被空间分割。因此，您必须编写一个复杂的标点符号友好公式或简单地使用正则表达式。做好准备 - 正则表达式......很棘手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T03:03:46.753

如果您在不删除多余空格的情况下使用**拆分**功能，则您的数组中将包含空项目，这样您就不会丢失多余的空格，并且可以使用原始格式完整地重建文档。*

# c++ - SQLite3 API 的 C++ 包装器 - sqlite3pp 的替代品

> ID：13020157
> 
> 赞同：6
> 
> 时间：2012-10-22T21:26:42.520
> 
> 标签：c++, sql, sqlite, wrapper

> **可能重复：**
> [什么是 sqlite 的好的 OO C++ 包装器](https://stackoverflow.com/q/818155/3168107)

我正在寻找 SQLite3 API 的 C++ 包装器。到目前为止，我只找到[sqlite3pp](http://code.google.com/p/sqlite3pp/)。然而，它似乎是最新的，在解决之前我想看看是否有任何替代方案。大家知道吗？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T00:14:37.223

我不知道为什么我再也找不到从 SQLite 主页链接的 Wiki。但它列出了许多 C++ 包装器：[http ://www.sqlite.org/cvsrac/wiki?p=SqliteWrappers](http://www.sqlite.org/cvstrac/wiki?p=SqliteWrappers)

# windows - 从 Windows Azure 中的 blob 存储逐行读取

> ID：13020158
> 
> 赞同：19
> 
> 时间：2012-10-22T21:26:43.073
> 
> 标签：windows, azure

有没有办法从 Windows Azure 的 blob 存储中的文本文件中逐行读取？

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-23T01:26:12.923

是的，你可以用流来做到这一点，它不一定需要你拉整个文件，但请阅读到最后（答案的......不是有问题的文件），因为你可能想拉整个文件反正文件。

这是代码：

```
StorageCredentialsAccountAndKey credentials = new StorageCredentialsAccountAndKey(
    "YourStorageAccountName",
    "YourStorageAccountKey"
);
CloudStorageAccount account = new CloudStorageAccount(credentials, true);
CloudBlobClient client = new CloudBlobClient(account.BlobEndpoint.AbsoluteUri, account.Credentials);
CloudBlobContainer container = client.GetContainerReference("test");

CloudBlob blob = container.GetBlobReference("CloudBlob.txt");
using (var stream = blob.OpenRead())
{
    using (StreamReader reader = new StreamReader(stream))
    {
        while (!reader.EndOfStream)
        {
            Console.WriteLine(reader.ReadLine());
        }
    }
} 
```

我将一个名为 CloudBlob.txt 的文本文件上传到了一个名为 test 的容器中。该文件大小约为 1.37 MB（我实际上使用了 GitHub 上的 CloudBlob.cs 文件，将其复制到同一个文件中六七次）。我使用 BlockBlob 进行了尝试，这很可能是您将要处理的内容，因为您正在谈论一个文本文件。

这会像往常一样获得对 BLOB 的引用，然后我从 CloudBlob 对象中调用[OpenRead](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.cloudblob.openread.aspx) () 方法，该方法会返回一个 BlobStream ，然后您可以将其包装在 StreamReader 中以获得 ReadLine 方法。我用这个运行 fiddler 并注意到它最终调用了 3 次来获取额外的块来完成文件。看起来 BlobStream 有一些属性，您可以使用这些属性来调整您必须执行的预读量，但我没有尝试调整它们。根据[一个参考资料](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/11/13/windows-azure-storage-client-library-cloudblob-downloadtofile-may-not-entirely-overwrite-file-contents.aspx)，我发现重试策略也适用于最后一次读取级别，因此它不会再次尝试重新读取整个内容，只是最后一次失败的请求。在此引用：

> 最后，DownloadToFile/ByteArray/Stream/Text() 方法在单个流式获取中执行它的整个下载。如果您使用 CloudBlob.OpenRead() 方法，它将利用 BlobReadStream 抽象，该抽象将在消耗 Blob 时一次下载一个块。如果发生连接错误，则只需要重新下载一个块（根据配置的 RetryPolicy）。此外，这可能有助于提高性能，因为客户端可能不需要在本地缓存大量数据。对于大型 blob，这可能会有很大帮助，但请注意，您将对服务执行更多的整体事务。——乔·贾迪诺

**我认为重要的是要注意 Joe 指出的警告，因为这将导致针对您的存储帐户的总体交易数量增加。** 但是，根据您的要求，这可能仍然是您正在寻找的选项。

如果这些是大量文件并且您正在执行大量此类操作，那么它可能会执行很多很多事务（尽管您可以查看是否可以调整 BlobStream 上的属性以增加一次检索的块数量等）。在 CloudBlob 上执行 DownloadFromStream 可能仍然有意义（这将拉下整个内容），然后以与我上面相同的方式从该流中读取。

唯一真正的区别是，一个是一次提取较小的块，另一个是立即提取整个文件。每个都有优点和缺点，这在很大程度上取决于这些文件的大小以及您是否计划在读取文件中间的某个时间点停止（例如“是的，我找到了我正在搜索的字符串！）或者如果您仍然打算读取整个文件。如果您打算无论如何都提取整个文件（例如，因为您正在处理整个文件），那么只需使用 DownloadToStream 并将其包装在 StreamReader 中。

注意：我用 1.7 SDK 试过这个。我不确定这些选项是由哪个 SDK 引入的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:37:20.333

要直接回答您的问题，您必须先编写代码以在本地下载 blob，然后再读取其中的内容。这主要是因为您不能只进入一个 blob 并在中间读取它的内容。如果您使用过 Windows Azure 表存储，您肯定可以读取表中的具体内容。

由于您的文本文件是一个 blob 并且位于 Azure Blob 存储中，因此您真正需要的是在本地下载 blob（作为本地 blob 或内存流），然后读取其中的内容。您必须完全或部分下载 blob，具体取决于您上传的 blob 类型。使用页面 blob，您可以在本地下载特定大小的内容并对其进行处理。很高兴知道在这方面[块和页面 blob 之间的区别。](http://msdn.microsoft.com/en-us/library/windowsazure/ee691964.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-23T11:14:17.990

这是我用来逐行获取文件的代码。该文件存储在 Azure 存储中。使用了文件服务而不是 blob 服务。

```
//https://docs.microsoft.com/en-us/azure/storage/storage-dotnet-how-to-use-files
//https://<storage account>.file.core.windows.net/<share>/<directory/directories>/<file>
public void ReadAzureFile() {

    CloudStorageAccount account = CloudStorageAccount.Parse(
    CloudConfigurationManager.GetSetting("StorageConnectionString"));
    CloudFileClient fileClient = account.CreateCloudFileClient();
    CloudFileShare share = fileClient.GetShareReference("jiosongdetails");
    if (share.Exists()) {
        CloudFileDirectory rootDir = share.GetRootDirectoryReference();
        CloudFile file = rootDir.GetFileReference("songdetails(1).csv");
        if (file.Exists()) {
            using(var stream = file.OpenRead()) {
                using(StreamReader reader = new StreamReader(stream)) {
                    while (!reader.EndOfStream) {
                        Console.WriteLine(reader.ReadLine());
                }
                }
            }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-11T00:10:08.267

如果有人发现自己在这里，适用于 Azure Blob 存储 (v12) 的 Python SDK 现在有一个简单的[`download_blob()`](https://azuresdkdocs.blob.core.windows.net/$web/python/azure-storage-blob/12.0.0/azure.storage.blob.html#azure.storage.blob.BlobClient.download_blob)方法，它接受两个参数 - 偏移量和长度。

使用 Python，我的目标是从 blob 存储中的（许多）文件中提取标题行。我知道所有文件的位置，所以我创建了一个 blob 客户端列表——每个文件一个。然后，我遍历列表并运行 download_blob 方法。

创建 Blob 客户端后（[直接通过连接字符串](https://github.com/Azure/azure-sdk-for-python/tree/master/sdk/storage/azure-storage-blob#downloading-a-blob)或使用[`BlobServiceClient.get_blob_client()`](https://docs.microsoft.com/en-au/python/api/azure-storage-blob/azure.storage.blob.blobserviceclient?view=azure-python#get-blob-client-container--blob--snapshot-none-)方法），只需下载前（例如）4k 字节以覆盖任何长标题行，然后使用行尾字符 ('\n '）。结果列表的第一个元素将是标题行。我的工作代码（仅针对单个文件）如下所示：

```
from azure.storage.blob import BlobServiceClient

MAX_LINE_SIZE = 4096 # You can change this..
my_blob_service_client = BlobServiceClient(account_url=my_url, credential=my_shared_access_key)
my_blob_client = my_blob_service_client.get_blob_client('my-container','my_file.csv')

file_size = my_blob_client.size
offset = 0 
```

然后，您可以编写一个循环来逐行下载文本，方法是计算第一个行尾的字节偏移量，并获取下一个 MAX_LINE_SIZE 个字节。为了获得最佳效率，最好知道一条线的最大长度，但如果你不知道，请猜测一个足够大的长度。

```
while offset < file_size - 1:
    next_text_block = my_blob_client.download_blob(offset=offset, length=MAX_LINE_SIZE)
    line = next_text_block.split('\n')[0]
    offset = len(line) + 1

    # Do something with your line.. 
```

希望有帮助。这里明显的权衡是网络开销，每次调用一行文本并不快，但它达到了你逐行阅读的要求。

# vb.net - vb.net 类 MustInherit 接口

> ID：13020163
> 
> 赞同：1
> 
> 时间：2012-10-22T21:27:15.173
> 
> 标签：vb.net, interface, abstract

我在 VB.Net 工作。

我有几个`X`对象。每一个都需要有这个`Y`功能，所以我需要选择`Interface`or `MustInherit`。我还需要`Z`为每个对象提供完全相同的功能。此函数仅由对象的抽象/实现方法使用，例如此类对象的打印输出。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:53:23.983

不是很明白你的问题。如果你想要一个好的答案，你可能想让你的问题更清楚。据我了解，您想知道如何使用继承来创建两个以上的对象，这些对象继承相同的 MustInherit 类并使用不同的实现执行类似的操作。我不明白你的 X 函数和 Z 函数之间的区别。

```
Public MustInherit Class theBase
    Public MustOverride Sub ZPrint()
End Class

Public Class a
    Inherits theBase
    Public Overrides Sub ZPrint()
        ' the "a" way to print
    End Sub
End Class

Public Class b
    Inherits theBase
    Public Overrides Sub ZPrint()
        ' the "b" way to print
    End Sub
End Class

Public Class theClass
    Public Sub run()
        Dim myA As theBase
        Dim myB As theBase
        myA = New a
        myB = New b
        myA.ZPrint()
        myB.ZPrint()
    End Sub
End Class 
```

创建 theClass 的实例并执行 run() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:29:59.757

如果您希望有实现`Y`但不需要该`Z`功能的类，我只会使用接口。

`Z`鉴于所有子类都需要该功能，我会选择抽象。如果`Z`仅在类中使用，请将其标记为`Protected`仅对子类可见。

```
MustInherit Class BaseX
    Public MustOverride Sub Y();

    Protected Sub Z()
        ' TODO: Implement common version of Z.
    End Sub
End Class

Class FirstX Inherits BaseX
    Public Overrides Sub Y()
        ' TODO: Implement first version of Y.
        ' Call Z() as required.
    End Sub
End Class

Class SecondX Inherits MyBaseClass
    Public Overrides Sub Y()
        ' TODO: Implement second version of Y.
        ' Call Z() as required.
    End Sub
End Class 
```

**注意：**我希望我的 VB 是正确的。我没有安装它，所以我无法验证我的语法。

# excel - 将单元格字符串拆分为单个单元格

> ID：13020165
> 
> 赞同：4
> 
> 时间：2012-10-22T21:27:21.223
> 
> 标签：excel, vba, excel-formula

我无法将单个单元格的值拆分为两个不同的字符串并将这两个字符串放在不同的单元格中。

例如，我想`10ft x 20ft`在一个单元格中获取一个测量值`10ft`并将其放入另一个单元格中，然后`20ft`将其放入一个完全不同的单元格中。

我想使用分隔符`x`或其他东西，但我只是不知道如何进行这些分隔并在拆分后对它们做一些事情。

任何提示将不胜感激。我对 VBA 宏还是很陌生。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:34:34.327

最好的解决方案是使用 SPLIT

```
Dim strX As String
Dim sx() As String
Dim i as Integer
strX = "10FT x 20FT"
sx = Split(strX, "x") 
```

或者你可以使用 instr 函数

```
Dim sVar1 as string
Dim sVar2 as string

I = InStr(1, strX, "x") 
```

现在你知道在哪里可以拆分 int 两个变量

```
sVar1 = mid(strX, 1, I)
sVar2 = mid(strx,i+1) 
```

该函数的问题在于，如果链中有多个要用来分隔函数的键，则会返回一个更大的数组。例如： Dim var as string var = "x 20XP 10XP"

返回

```
array (0) = "10"
array (1) = "p"
array (2) = "20"
array (3) = "p" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T23:09:19.967

您实际上并不需要 VBA。您可以使用 Excel 的文本到列

例如，在[excel-2010](/questions/tagged/excel-2010 "显示标记为“excel-2010”的问题")

1.  数据.....*文本到列*
2.  选择`delimited`并按*下一步*
3.  检查*空间*并将“x”放入*其他*并按*下一步*
4.  结束

![在此处输入图像描述](../Images/47ec03b3e3d1f0857dbde7d0f77e63fd.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T21:36:40.433

我想我只是需要看起来更努力一点。

```
Sub Split_CutArea()
Dim str1() As String
Dim str2() As String
Dim avarsplit As Variant

avarsplit = Split(Cells(4, "B").Value, "x")
splitValues = Split(ActiveSheet.Cells(4, "B").Value)

ActiveSheet.Cells(22, "B").Value = splitValues(0) & splitValues(1)
ActiveSheet.Cells(23, "B").Value = splitValues(3) & splitValues(4)   
End Sub 
```

# ruby - 为什么这个会话 != params 会在 Sinatra 中旅行？

> ID：13020166
> 
> 赞同：0
> 
> 时间：2012-10-22T21:27:25.437
> 
> 标签：ruby, heroku, sinatra, csrf

我正在使用 Sinatra 并使用 sinatra-authentication gem 进行身份验证，以及自定义表单（如联系表单）。

为了帮助解决 CSRF 问题，我设计了一个小解决方案，可以使用来自 sinatra-authentication 的预定义路由以及自定义路由。

```
before do
  if request.post?
    if session[:csrf] != params[:csrf]
      halt 503, erb('<h1>500: oops</h1>')
    end
  end 

  time = Time.now.to_s
  @key = Digest::SHA1.hexdigest(time)
  session[:csrf] = @key
end 
```

因此，在每个页面请求上，它都会设置一个会话，该会话是当前时间的哈希值。这个散列也使用隐藏元素设置到每个表单`<input type="hidden" name="csrf" value="<%= @key %>" />`。提交表单时，它会在原始表单中`before`检查存储在会话中的项目，并将提交的项目作为隐藏值。简单的！

但是...这在 localhost 上运行良好，在我的 herokuapp.com 域上运行良好，在我的`www`域上运行良好（这是 herokuapp.com 域的 cname），但它不适用于`non-www`域（这是 A 记录对于 Heroku 的 IP 集）。

我能看到的唯一区别是`non-www`DNS 中具有 A 记录的域似乎正在设置清漆标头，因此必须在某处通过清漆，但由于会话在 rack.session 内，我想知道清漆是否正在过滤这个出去。

那么最终，为什么要`if session[:csrf] != params[:csrf]`返回`true`？

# javascript - 如何在 Firefox 中传递事件和变量？

> ID：13020167
> 
> 赞同：1
> 
> 时间：2012-10-22T21:27:26.180
> 
> 标签：javascript, firefox

这适用于 IE，但不适用于 Firefox。我知道 Firefox 中不存在 window.event ，但我无法弄清楚使其工作的正确语法。

HTML：`<tr onclick="getDETAILS('getTASKS');"`

Javascript：

```
 function getDETAILS(action) {
     if (window.event.ctrlKey) { 
        //doing something with action
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:29:19.127

**以下适用于 IE、Firefox 和 Chrome。**（最新版本）

HTML：

```
<tr onclick="getDETAILS(event, 'getTASKS');"> 
```

JavaScript：

```
function getDETAILS(evt, action) {
  if(evt.ctrlKey) {
    //doing something with action
  }
} 
```

现场演示：http: [//jsfiddle.net/vYUS8/2/](http://jsfiddle.net/vYUS8/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:36:09.140

跨浏览器解决方案：

```
<tr onclick="getDETAILS('getTASKS', event);"> 
```

**JS：**

```
function getDETAILS(action, e) {
    e = e || window.event;
    if (e.ctrlKey) {
        alert('do stuff');
    }
}​ 
```

[**小提琴**](http://jsfiddle.net/ult_combo/McpKf/)

在所有现代浏览器中，该`event`对象将被传递给函数的形参。`e`

如果传递的`event`对象是`undefined`（旧版本的 IE），`e`则设置为`window.event`.

# linux - 从命令行执行一个 gui 应用程序并将其发送到后台

> ID：13020168
> 
> 赞同：1
> 
> 时间：2012-10-22T21:27:26.693
> 
> 标签：linux, shell, ubuntu

是否有一个命令行实用程序可用于执行基于 X 的应用程序，它将我的应用程序与终端分离，以便在终端关闭时它们不会关闭？

我想这样的应用程序可以被称为`gnome-run`如果它存在的话。

我试过`dtach`了，但似乎你必须提供一个输入起来有点笨拙的套接字文件。我也尝试过`nohup`，但发现在 std out 和 err 重定向到时键入也有点笨拙`/dev/null`。

我想我正在寻找一个简单的程序来做类似的事情：

```
#!/bin/bash

nohup $1 > /dev/null 2>&1 & 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:48:14.553

是的，有一种方法可以做到这一点：首先您需要运行您的 GUI 应用程序并将其发送到后台，然后您（可能）想要将其从 Bash 任务管理中分离出来。例如，如果我想以这种方式运行 gedit：

```
gedit &
disown %1 
```

之后你可以关闭你的终端窗口并且 gedit 不会被杀死。享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:51:57.260

你已经编写了你的​​程序，它被称为一个 shell 脚本，你给它起你喜欢的名字并把它放在某个地方。然后将该目录添加到您的 $PATH 或您设置的 bashrc 中：

```
alias gnome-run=<path>/my-awesome-script.sh 
```

为什么要把地球的资源浪费在一个项目上？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T21:24:31.247

**如果您想像从 GUI 运行一样**运行应用程序（例如 gedit），请使用：

```
xdg-open /usr/share/applications/gedit.desktop 
```

在超级用户上查看[这个](https://superuser.com/a/295961/727679)答案。

# android - .apk IIS 网络服务器在 android 2.3.x 上下载错误

> ID：13020169
> 
> 赞同：1
> 
> 时间：2012-10-22T21:27:31.873
> 
> 标签：android, iis-7.5

我们设置了一个 IIS 网络服务器来为我们正在开发的应用程序分发 .apk 文件。我们通过 IIS 中文件路径的直接链接分发文件我们没有使用任何特殊页面来下载文件，我们只是发送直接链接并在浏览器中打开它开始文件下载。

阅读此站点后，我已设置服务器以处理具有 mime 类型“application/vnd.adroid.package-archive”的 .apk 文件。

在台式机或任何 3.2+ 的 android 设备上下载文件似乎工作得很好。然而到目前为止，任何运行 2.3.x 的 android 设备似乎都无法下载。下载立即出错，如果您转到下载管理器，它会显示“无法下载。此手机不支持该内容。” 似乎 android 2.3.x 设备没有将该文件识别为 .apk 文件。

我不知道是什么导致了这个问题，因为它在桌面浏览器（IE、firefox）和新的 android 设备（3.2+）上工作。

网络服务器正在运行带有 IIS 7.5 的 Win 2008 R2 后端

任何帮助将非常感激。

谢谢

# jquery - jQuery Ajax 不在 MAMP 本地 mySQL 服务器上传递值

> ID：13020177
> 
> 赞同：2
> 
> 时间：2012-10-22T21:27:59.027
> 
> 标签：jquery, mysql, ajax, mamp

我正在使用 MAMP 本地 Apache 和 mySQL 服务器测试应用程序，但是我的代码似乎没有通过 jQuery ajax 函数正确传递数据，因为我在成功输出中不断获得“空”值。我不确定使用本地服务器和 jQuery ajax 通常是否有问题，或者我的代码有问题。这里供参考：

JS 文件：

```
var curX = 2;
var curY = 6;

function boundary(moveX, moveY) {
var world = document.getElementById('overworld');
$.ajax({
    type: "POST",
    url: "php/tilecheck.php",
    dataType: "json",
    data: {x: curX + moveX, y: curY + moveY},
    success: function(data) {
        curX += moveX;
        curY += moveY;

        var left = data.lefttile;
        var right = data.righttile;
        var top = data.toptile;
        var bot = data.bottomtile;
        var xypos = document.getElementById("coord");
        xypos.innerText = curX + ", " + curY;

        if(left == 1){
            $("#aleft").css('display', 'none');
        }
        else {
            $("#aleft").css('display', '');
        }
        if(right == 1){
            $("#aright").css('display', 'none');
        }
        else {
            $("#aright").css('display', '');
        }

        if(top == 1){
            $("#atop").css('display', 'none');
        }
        else {
            $("#atop").css('display', '');
        }
        if(bot == 1){
            $("#abottom").css('display', 'none');
        }
        else {
            $("#abottom").css('display', '');
        }
        world.style.marginTop = -curX * 351 +"px";
        world.style.marginLeft = -curY * 351 +"px";
    }
});
} 
```

我在 html 文件中调用 onload ：

```
<html>
<head>
    <script src="jquery-1.8.2.js"></script>
    <script src="game/bound.js"></script>
</head>
<body onload="boundary(0,0);"> 
```

这是我在 ajax 函数中调用的“tilecheck.php”代码：

```
<?php
    mysql_connect('localhost', 'root', 'root') or die ('Error Connecting');
    mysql_select_db('testing_db') or die ('No Database');

    $x = $_REQUEST['x'];
    $y = $_REQUEST['y'];

    $q = "SELECT bound FROM tiles WHERE xpos = ".($x - 1)." AND ypos = $y LIMIT 1";
    $lefttile = mysql_fetch_assoc(mysql_query($q));

    $q = "SELECT bound FROM tiles WHERE xpos = ".($x + 1)." AND ypos = $y LIMIT 1";
    $righttile = mysql_fetch_assoc(mysql_query($q));

    $q = "SELECT bound FROM tiles WHERE xpos = $x AND ypos = ".($y - 1)." LIMIT 1";
    $toptile = mysql_fetch_assoc(mysql_query($q));

    $q = "SELECT bound FROM tiles WHERE xpos = $x AND ypos = ".($y + 1)." LIMIT 1";
    $bottomtile = mysql_fetch_assoc(mysql_query($q));

    $json = array(
    "x" => $x,
    "y" => $y,
    "lefttile" => $lefttile, "righttile" => $righttile,
    "toptile" => $toptile, "bottomtile" => $bottomtile
);

$output = json_encode($json);
echo $output;

?> 
```

我想要代码做的是从数据库中获取一个值并根据值隐藏或显示箭头按钮。如果您有任何其他问题，请告诉我您的想法。谢谢你。

**更新**

我稍微摆弄了一下代码，将 ajax 函数更改为一个帖子：

```
$.post('php/tilecheck.php', {x: curX + moveX, y: curY + moveY}, function(data) {
    console.log(data); 
```

并将 php 中的 $_REQUEST 更改为 $_POST。运行此脚本时的控制台显示：

```
{"lefttile":"1","righttile":"1","toptile":"0","bottomtile":"1"} 
```

当变量传递“1”（我在 mySQL 中调用的绑定行的值）时，相应的箭头应该消失。但是，当我警告我定义的变量（var left = data.lefttile）并且控制台显示的变量已定义（在本例中为 1）时，它显示为“未定义”。我不确定为什么。谢谢你。

# c# - 在 MVC 3 中设置 DropDownList 的选定值

> ID：13020178
> 
> 赞同：0
> 
> 时间：2012-10-22T21:28:01.063
> 
> 标签：c#, asp.net-mvc-3

我已经尝试了多种方法来尝试设置下拉列表的值，并且必须做一些愚蠢的事情，因为这些方法都不起作用。

```
@Html.DropDownList("startTime", @Model.startTimeList, new { @class = "startTime", style = "width: 100px;" }) 
```

它是一个生成的半小时增量列表。

在我的控制器中，我设置了这个字符串值..

```
model.startTime = myTime + " " + amOrPm;  //ex 10:30 PM 
```

我的列表看起来像这样。

```
List<SelectListItem> startTimeList = new List<SelectListItem>();    

SelectListItem time12 = new SelectListItem { Text = "12:00 PM", Selected = false, Value = "12:00PM" };
startTimeList.Add(time12);

SelectListItem time12Half = new SelectListItem { Text = "12:30 PM", Selected = false, Value = "12:30PM" };
startTimeList.Add(time12Half); 
```

我的列表始终默认为 12:00 PM，因为它是第一个进入列表的。我希望如果 model.startTime 有一个设置为该值的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:31:51.053

您可以使用`DropDownListFor`并让 Razor 引擎完成选择与属性匹配的项目的工作。

```
@Html.DropDownListFor(model => model.startTime, startTimeList) 
```

* * *

`Selected`另一种方法是在匹配的项目上显式设置：

```
startTimeList.First(item => item.Text.Equals(model.startTime)).Selected = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:37:37.903

如果您的模型上有 startTime 属性，并且该属性的值与列表中的值之一匹配（即，它匹配“12:00PM”或“12:30PM”但不匹配“12:00 PM”或“12:30 PM”），那么我认为这*应该*可行：

```
@Html.DropDownListFor(model => model.startTime, 
    @Model.startTimeList, 
    new { @class = "startTime", style = "width: 100px;" }) 
```

# dependency-injection - Automapper 或 Value Injecter 是否使用 DI/IOC？

> ID：13020193
> 
> 赞同：0
> 
> 时间：2012-10-22T21:29:04.267
> 
> 标签：dependency-injection, automapper, ioc-container, valueinjecter

我没有使用这些工具中的任何一个，但我想知道它们中的任何一个是否使用 DI/IOC，或者它们是否是他们自己的 DI/IOC，或者我错过了这些工具的重点？

如果他们中的任何一个确实使用 DI/IOC，而不是他们使用什么 DI/IOC？基本上我对性能感兴趣。

# javascript - 用于表单的 Google Apps 脚本，生成唯一 ID 号

> ID：13020194
> 
> 赞同：3
> 
> 时间：2012-10-22T21:29:10.593
> 
> 标签：javascript, random, google-apps-script, google-forms

我创建了一个简单的 Google 表单，其中包含以下字段：

姓名、电子邮件、薪水和要求。

当用户填写表格时，我想向他/她发送一封包含信息的电子邮件。但是，我想使用“请求”字段插入一个唯一编号，如果用户需要进一步的通信，可以参考该编号。如果用户在“请求”字段中输入任何内容，我想丢弃它并使用我生成的数字（在响应和电子表格中）。

我已经能够使用我找到的其他信息拼凑脚本。它似乎适用于除了返回给用户的电子邮件响应之外的所有内容。-它不包含我想在“请求”字段中使用的数字，而是发回用户在“请求”中输入的任何输入请求”字段。电子表格看起来不错（“请求”字段中有我的号码。）

这是我的脚本：

```
function sendFormByEmail(e) {      
  var capsht = SpreadsheetApp.getActiveSheet();  
  var caprow =  SpreadsheetApp.getActiveSheet().getLastRow();  
  capsht.getRange(caprow,5).setValue("Cap-"+caprow);  

  var admin = "admin@xxx.com";  

  try {  

    var recipient = e.namedValues["Email"];  
    var subject = "Capacity Request Form Received";    

    var s = SpreadsheetApp.getActiveSheet();  
    var headers = s.getRange(1,1,1,s.getLastColumn()).getValues()[0];      
    var message = "";      

    for (var i in headers)  
      message += headers[i] + ' = '+ e.namedValues[headers[i]].toString() + "\n\n";   
      MailApp.sendEmail(recipient, subject, message);   

    }   

  catch (error) {  
    MailApp.sendEmail(admin, "Error with form submission response email", error.message);  
  }  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:28:42.357

像这样尝试：

（在代码中添加注释并删除重复）

```
function sendFormByEmail(e)   
{      
var capsht = SpreadsheetApp.getActiveSheet();  
var caprow = capsht.getLastRow();  
var codenumber = "Cap-"+caprow
capsht.getRange(caprow,5).setValue(codenumber);  

var admin = "admin@xxx.com";  

try {  

var recipient = e.namedValues["Email"];  
var subject = "Capacity Request Form Received";    

var headers = capsht.getRange(1,1,1,capsht.getLastColumn()).getValues()[0];      
var message = "";      

for(var i in headers)  
if(i!=4){ 
message += headers[i] + ' = '+ e.namedValues[headers[i]].toString() + "\n\n";   
}else{  // if i==4 (column nr5)then use your code number
message += headers[i] + ' = '+ codenumber + "\n\n"; 
}
MailApp.sendEmail(recipient, subject, message);   

}   

catch (error)  
{  
MailApp.sendEmail(admin, "Error with form submission response email", error.message);  
}  

} 
```

# performance - cassandra 1 大列与多小列的读取性能？

> ID：13020195
> 
> 赞同：1
> 
> 时间：2012-10-22T21:29:12.730
> 
> 标签：performance, cassandra

我每秒收到大约 1000 个不同的事件（4 个节点集群）。每次活动后，我都需要增加一些计数器。我的问题是，最好有一个只有一列的普通列族，并且所有计数器都被视为带有逗号“，”分隔的字符串（例如：“1,3,5,6,0,2”）或最好创建一个具有多列的 Counter Column 系列？我读了一些文档，它说计数器列系列可以以一致性级别 1 进行读写，这对于阅读来说很快。我不太关心写入性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:38:25.943

我认为这取决于您如何接收事件和延迟要求。

如果您同时从多个来源接收它们并且需要尽快写入数据，那么计数器似乎是更好的方法。对于一个大列，您需要将**所有**写入序列化到**任何**列以及读取当前值。这也可能不必要地使您的应用程序代码复杂化。如果性能有问题，您可以尝试为您的计数器列族启用行缓存。我从未尝试缓存计数器列系列，但我没有看到任何文档说它不受支持。您可以尝试并检查 JMX 统计信息以查看它是否正常工作。

如果您正在接收单线程事件并且可以执行诸如读取 1000 个事件的数据之类的操作，然后在将当前计数器值保存在内存中的同时向 cassandra 写入一次，那么单列可能就可以了。但是您需要意识到，如果您碰巧一次只需要读取几个计数器值，那么每次读取都会获取大量不必要的数据。除非您进行一些测试表明某一列的性能明显更好，否则我会支持计数器。

# rvm - 为什么当我运行'rvm install 1.9.*'时没有创建'config'文件

> ID：13020197
> 
> 赞同：6
> 
> 时间：2012-10-22T21:29:28.613
> 
> 标签：rvm

当我通过 rvm 安装任何 ruby​​ 的新实例并运行“rvm list”时，我得到：

```
rvm rubies

/Users/AirBook/.rvm/scripts/list: line 321: /Users/AirBook/.rvm/rubies/ruby-1.9.2-p320/config: No such file or directory
ruby-1.9.2-p320 [  ]
ruby-1.9.3-p194 [  ]
=* ruby-1.9.3-p286 [  ] 
```

这不是什么大问题，因为我只是将“配置”文件添加到特定的 ruby​​ 文件夹。另外，我没有预见到自己会添加很多不同版本的红宝石。

但仍然想知道这种奇怪的行为，知道它是怎么回事，我应该传递额外的标志吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:22:36.707

这是 rvm 版本 1.16.17 的问题。它已经在当前版本（1.16.17）上修复，您可以在此处看到：[https ://github.com/wayneeseguin/rvm/issues/1254](https://github.com/wayneeseguin/rvm/issues/1254)

您只需要更新 rvm：

```
rvm get stable 
```

或者，如果您愿意，也可以使用以前的版本（我在稳定版本中未包含补丁时这样做）

```
rvm get 1.16.15 
```

干杯

# actionscript-3 - 如何将现有的 SWF 文件转换为 SWC 以用作库？

> ID：13020201
> 
> 赞同：3
> 
> 时间：2012-10-22T21:29:35.943
> 
> 标签：actionscript-3, flash, swc

我是 ActionScript 世界的新手，遇到了一个对我来说很难的问题。我有一个 SWF 文件，其中包含一些我无法从源代码重新编译但想在不同项目中再次使用的类。我看到 SWC 文件包含可以轻松重用的编译类。我的问题是如何将现有的 SWF 文件转换为 SWC 文件，以便可以将其用作常规库？谷歌没有帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:45:11.100

SWC 文件使用 ZIP 压缩，实际上包含一个 SWF。如果您将文件扩展名更改为`.swc`，`.zip`则可以浏览内容和目录结构。它看起来像这样：

```
foobar.swc
    -> catalog.xml
    -> library.swf 
```

通过一些逆向工程，您可以通过构建`catalog.xml`文件并将它们打包到 ZIP 文件中来从 SWF 创建 SWC。

但这似乎相当复杂！[您也可以使用Loader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)简单地将外部 SWF 加载到您自己的 SWF 中。然后，外部 SWF 的所有类、符号和时间线都将可用。当然，这会产生运行时依赖性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:58:42.437

由于您无法将代码重新编译为 SWC，`Loader`因此如果您不需要将类作为编译时访问，我建议您使用 a。

```
[Event(name="complete", type="flash.events.Event")]
public class SWFLibrary extends EventDispatcher
{
    private var loader:Loader;
    private var loaded:Boolean;

    public function SWFLibrary(urlOrBytes:*)
    {
        super();

        loader = new Loader();
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);

        if (urlOrBytes is String) {
            loader.load(new URLRequest(urlOrBytes));
        } else if (urlOrBytes is URLRequest) {
            loader.load(urlOrBytes);
        } else if (urlOrBytes is ByteArray) {
            loader.loadBytes(urlOrBytes);
        } else {
            throw new ArgumentError("Invalid urlOrBytes argument");
        }
    }

    public function getAssetClass(className:String):Class
    {
        if (!loaded) {
            throw new IllegalOperationError("The SWF library isn't loaded");
        }

        return loader.contentLoaderInfo.applicationDomain.getDefinition(className) as Class;
    }

    private function completeHandler(event:Event):void
    {
        loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, completeHandler);
        loaded = true;

        dispatchEvent(new Event(Event.COMPLETE));
    }
} 
```

# c# - 将模型对象传递给 RedirectToAction 而不污染 URL？

> ID：13020202
> 
> 赞同：15
> 
> 时间：2012-10-22T21:29:46.537
> 
> 标签：c#, asp.net-mvc-3, model, controller

这是我正在尝试做的事情：

```
public ActionResult Index()
{
    return View();
}

[HttpPost]
public ActionResult Index(ContactModel model)
{
    if (ModelState.IsValid)
    {
        // Send email using Model information.

        return RedirectToAction("Gracias", model);
    }

    return View(model);
}

public ActionResult Gracias(ContactModel model)
{
    return View(model);
} 
```

所有三个动作方法都在同一个控制器中。基本上，用户在联系表单中输入了一些数据，我想使用他们在模型对象中的名称将他们重定向到感谢页面。

正如代码一样，它可以工作，但是 URL 与 GET 变量一起传递。不理想。

```
http://localhost:7807/Contacto/Gracias?Nombre=Sergio&Apellidos=Tapia&Correo=opiasdf&Telefono=oinqwef&Direccion=oinqef&Pais=oinqwef&Mensaje=oinqwef 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-22T21:35:06.910

听起来像是[TempData](http://www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html)的解决方案！

```
[HttpPost]
public ActionResult Index(ContactModel model)
{
  if (ModelState.IsValid)
  {
    // Send email using Model information.
    TempData["model"] = model;
    return RedirectToAction("Gracias");
  }

  return View(model);
}

public ActionResult Gracias()
{
  ContactModel model = (ContactModel)TempData["model"];
  return View(model);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:39:07.427

而不是做

```
return RedirectToAction("Gracias", model); 
```

你可以做

```
[HttpPost]
public ActionResult Index(ContactModel model)
{
    if (ModelState.IsValid)
    {
        // Send email using Model information.

        return View("Gracias", model);
    }

    return View(model);
} 
```

并删除您的 Gracias 控制器操作。使用上面的“Gracias”视图将与您的 ContactModel 模型一起显示。

如果它使用相同的模型并且是工作流 ex 的锁定步骤的一部分，我认为不需要单独的控制器操作。“成功的 POST 到索引将始终导致显示 Gracias 视图”

您也可以将模型存储在 TempData 中（类似于 1 个请求会话状态），但我认为在您的情况下这样做没有任何意义，因为它只会使事情复杂化

想法？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T21:37:23.667

快速回答是不要传递整个模型，而是传递一些可用于从存储库中检索模型的标识符：

```
[HttpPost]
public ActionResult Index(ContactModel model)
{
    if (ModelState.IsValid)
    {
        // Send email using Model information.

        return RedirectToAction("Gracias", model.ID);
    }

    return View(model);
}

public ActionResult Gracias(int contactID)
{
    ContactModel model = new ContractRepository().GetContact(contactID);
    return View(model);
} 
```

# javascript - 单词的一个字符表示（很少使用的字符）

> ID：13020215
> 
> 赞同：0
> 
> 时间：2012-10-22T21:31:17.973
> 
> 标签：javascript, google-chrome, character, symbols

我想用一个字符来代表一个 chrome 扩展的单词。所以代码可能如下所示：

```
x.replace(/character/g,"a"); 
```

好吧，当我尝试在那个地方使用字符/符号时，它给了我一个错误，说 js 不是 utf-8。我需要为我正在做的事情使用一个字符/符号表示，否则它将不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:32:32.893

它必须是正则表达式吗？你可以这样做：

```
x.replace('b', 'a'); 
```

# javascript - jQuery：多个文件上传而不修改当前的 php 表单

> ID：13020218
> 
> 赞同：2
> 
> 时间：2012-10-22T21:31:39.190
> 
> 标签：javascript, jquery, content-management-system

我们有一个允许我们构建文件上传表单的 CMS，但它一次只允许**一个**文件。我无法更改或编辑 php.ini 文件。

我想知道是否有任何创建解决方案来使用多个文件上传`<input type="file" multiple="multiple" />`，从`files`数组中收集每个文件，然后发布到我已经创建的表单？

目前我们没有能力做任何自定义 php 工作来接受真正的多次上传，因为此时我们必须将所有内容保存在 CMS 中。

这个问题有什么创造性的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:35:07.040

您需要使用 HTML5 来处理这个问题。

```
<input type="file" name="myfiles" multiple="multiple" /> 
```

**HTML5**：[http ://css.dzone.com/articles/working-html5s-multiple-file](http://css.dzone.com/articles/working-html5s-multiple-file)

如果您想在较旧的浏览器上处理此问题，则需要使用 Javascript 解决方案。jQuery 很好地记录了这个过程。

**jQuery**：[http ://docs.jquery.com/Tutorials:Multiple_File_Upload_Magic](http://docs.jquery.com/Tutorials:Multiple_File_Upload_Magic)

然后，在 PHP 端：

```
<?php
    $files = $_FILES['myfiles'];

    foreach ($files as $file) { 
        echo $file['name'];
    }
?> 
```

# c - 使用指针时的错误和警告信息

> ID：13020219
> 
> 赞同：0
> 
> 时间：2012-10-22T21:31:43.467
> 
> 标签：c, function, pointers

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#define CONST 267

void getInput(int *length, int *width, int *height);
void calcoutput(int length, int width, int height, int *squareFootage,int         *paintNeeded);
int getSquareFootage(int length,int width, int height);
double getPaintNeeded(int squareFootage);

int main(void)
{
    int length;
    int width;
    int height;
    int squareFootage;
    double paintNeeded;

    getInput(&length, &width, &height);
    calcoutput(length, width, height,&squareFootage,&paintNeeded);

    return 0;
}   //end main

void getInput(int *plength, int *pwidth, int *pheight)
{
    printf("Enter the length of the room (whole number only): ");
    scanf("%d", plength);
    printf("Enter the width of the room (whole number only): ");
    scanf("%d", pwidth);
    printf("Enter the height of the room (whole number only): ");
    scanf("%d", pheight);
}   //end getInput
void calcoutput(int length, int width, int height, int *squareFootage,int *paintNeeded){

    *squareFootage = getSquareFootage(length,width, height);
    *paintNeeded = getPaintNeeded(squareFootage);

}

int getSquareFootage(int length,int width, int height){
    int i;
    i = 2*(length* height) + 2*(width*height) + (length* width);
return i;
}
double getPaintNeeded(int squareFootage)
{
    double i = double (squareFootage / CONST);
    return i;
} 
```

我正在编写这段代码来计算房间的面积和粉刷房间所需的加仑油漆数量，但是，我对 C 中的指针不太熟悉，似乎有一些错误和警告像这样

```
C:\Users\khoavo\Desktop\hw2b.c||In function 'main':|
C:\Users\khoavo\Desktop\hw2b.c|23|warning: passing argument 5 of 'calcoutput' from incompatible pointer type|
C:\Users\khoavo\Desktop\hw2b.c|8|note: expected 'int *' but argument is of type 'double *'|
C:\Users\khoavo\Desktop\hw2b.c||In function 'calcoutput':|
C:\Users\khoavo\Desktop\hw2b.c|41|warning: passing argument 1 of 'getPaintNeeded' makes integer from pointer without a cast|
C:\Users\khoavo\Desktop\hw2b.c|10|note: expected 'int' but argument is of type 'int *'|
C:\Users\khoavo\Desktop\hw2b.c||In function 'getPaintNeeded':|
C:\Users\khoavo\Desktop\hw2b.c|52|error: expected expression before 'double'|
||=== Build finished: 1 errors, 2 warnings ===| 
```

我将如何解决这些错误和警告？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:42:15.490

错误消息说明了一切：

calcoutput 将 int* 作为其第五个参数，但您将其传递给 double*。将第五个参数更改为双 *。

getPaintNeeded 需要一个 int，但您传递的是一个 int*。我认为在这种情况下你想要的是`getPaintNeeded(*squareFootage)`.

最后一个错误是关于演员表的。您正在使用在 C++ 中支持但在 C 中不支持的函数样式转换，并且您正在编译为 C。要么编译为 C++（将文件扩展名更改为 .cpp），要么将行更改为：

```
double i = (double)(squareFootage / CONST); 
```

实际上你根本不需要强制转换，结果可以隐式转换为双精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:36:03.090

改变

```
void calcoutput(int length, int width, int height, int *squareFootage,int *paintNeeded); 
```

至

```
void calcoutput(int length, int width, int height, int *squareFootage,double *paintNeeded); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:36:15.150

paintNeeded 被声明为双精度，但您将其位置作为指向 int 的指针传递。您传递给它的函数将看到整数而不是双精度值，这会使您的程序运行不正确。

您应该考虑将 calcoutput 中的 int* 转换为 double* ，以便传入paintNeeded 行为正确。

# android - RoboGuice 2.0 和 Robolectric 1.1 测试 RoboAsyncTask

> ID：13020225
> 
> 赞同：3
> 
> 时间：2012-10-22T21:32:27.630
> 
> 标签：android, multithreading, junit, roboguice, robolectric

我目前在我的 Android 应用程序中同时使用 RoboGuice 2.0 和 Robolectric 1.1。我注意到 RoboLooperThread 在 2.0 中消失了，我在调用任何 RoboAsyncTask 时遇到了困难。当主测试线程调用`.execute()`时`RoboAsyncTask`，永远不会调用 RoboAsyncTask 的`call()`方法。我的问题是如何强制测试线程来回切换 UI 线程，以便执行任务？

谢谢，

文斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:40:21.443

我找到了一个可行的解决方案。`RoboAsyncTask`似乎放在 Robolectric 上`UiThreadScheduler`，可以通过以下方式调用`Robolectric.runUiThreadTasksIncludingDelayedTasks();`

# wordpress - 如何使用域名设置 WordPress 3.0（带目录）

> ID：13020229
> 
> 赞同：0
> 
> 时间：2012-10-22T21:32:33.157
> 
> 标签：wordpress, mapping, subdomain

我正在尝试使用单个 WordPress 3.0 安装来设置多个具有唯一域的博客站点。我对 WordPress MU 域映射插件隐约熟悉。

**有没有办法做到以下几点：**

> blogs.rootdomain.com/site1 -> sub1.rootdomain.com/blog
> 
> blogs.rootdomain.com/site2 -> sub2.rootdomain.com/blog

（页面上的所有链接都解析到此路径根）

我已经看到了许多将 MU 域插件解析为域根的示例。但就我而言，我是现有的一个单独博客的子域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:36:41.033

否。域映射要求 WordPress 实例是子域或子目录。不能将两者混合。

它必须是：

```
sub1.rootdomain.com
sub2.rootdomain.com 
```

或者

```
rootdomain.com/site1
rootdomain.com/site2 
```

有关 Multi-Site 的更多信息，我最近做了一个演示，您可以浏览我的幻灯片：

[http://jgill.me/wcslc2012](http://jgill.me/wcslc2012)

# database - 将 3 个表关系映射到单个实体。ORM 最佳实践？

> ID：13020230
> 
> 赞同：1
> 
> 时间：2012-10-22T21:32:42.887
> 
> 标签：database, entity-framework, database-design, orm, mapping

经过几次尝试和一些搜索，我终于决定在这里尝试一下。

简短的故事：**我已经为内容管理系统应用程序创建了一个相当“规范化”的数据库设计，现在我正试图将它映射到 EF 实体。**

![在此处输入图像描述](../Images/65f337d3e837160a3a15e5384289a7a7.png)

我在页面与其内容（ContentVersion 表）之间有 M:N 关系 - 由表 Content 连接。这是因为该应用程序是多语言的，我将存储最近的内容编辑历史。

现在，我可以从我的数据库中创建 DbContext，搭建几个控制器并拥有坚实的基础，但这会有问题。当我尝试创建新页面时，基本上只允许输入标题和标签，但该页面没有内容。我当然可以以某种方式将它与其他实体连接起来，并制作一些分层的业务逻辑，每次都会更新几个实体，但我首先想尝试一种更抽象的方法。

**我想我基本上需要实体拆分 3 个相关表。**我想创建一个实体（我们称之为 FinalPage），它可以用来将页面作为一个整体工作 -> 用它来搭建控制器等。

FinalPage 是用户在创建新页面时填写的内容，因此它将包含：

**Title**（来自 Page 实体）
**Slug**（来自 Page 实体）
**TemplateId**（来自 Page 实体）
**LanguageId**（来自 Content 实体）
**Title**（来自 ContentVersion 实体）
**Body**（来自 ContentVersion 实体）
+ 来自 ContentVersion 实体的其他相关字段

当我为它生成“创建新”页面时，我会填写所有内容，所有内容都会保存到适当的表格中。

我尝试在我的实体模型中创建新实体，将属性映射到不同的表......尝试了几种方法，但从未得到有效的解决方案。主要是因为典型的“你需要映射每个键”错误。我正在查看[Rob Bagby 的这篇文章](http://www.robbagby.com/entity-framework/entity-framework-modeling-entity-splitting/)，但他只连接了两个共享相同密钥的表。

我还尝试了一些感觉非常愚蠢的事情......从页面和内容实体创建实体（entA） - 通过 PageId 属性连接。并从 Content 和 ContentVersion 创建第二个 (entB) - 由 ContentId 连接。然后我想创建第三个（entC）来连接 entA 和 entB。那也没有用（我真的很高兴，因为那将是一个非常奇怪的解决方案）。

我觉得我是：
a.）缺少明显的东西。
b.) 有一个糟糕的数据库设计。
c.) 对英孚的要求太多。

**欢迎任何帮助。
- 如果您在数据库设计中看到一些糟糕的东西，请告诉我。
- 如果你知道，如何实现我的目标，请分享。
- 如果您有使用此类应用程序的经验并有更好的解决方案，我想听听。**

我基本上也在寻找一些最佳实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:43:24.843

听起来您正在尝试使您的 ORM 适合您的 UI 模型，这不是这样做的方法。您应该创建一个表示要从表单中捕获的数据的新类，然后根据需要将其处理到各种表中。因此，您在创建新页面时将使用的模型将是这样的：

```
public class FinalPage{
    public string Title { get; set; }
    public string Slug { get; set; }
    public string Body { get; set; }
    public int TemplateId { get; set; }
    public int LanguageId { get; set; }
} 
```

当用户提交表单时（您没有提到您正在使用的 UI），您会将这些值处理到各种 ORM 对象中。

```
public void SaveData(FinalPage model){
    var page = new Page{
        Title = model.Title,
        ...
    };
    db.Pages.Add(page);

    var contentVersion = new ContentVersion{
        Body = model.Body,
        ...
    };
    db.ContentVersions.Add(contentVersion);

    ...
} 
```

`View Model`这是 a和 a之间的区别`Database Model`，不必相同，并且业务逻辑应用于两个实体之间。我在之前的项目中使用过的另一种方法是拥有一个包含您要使用的 ORM 对象的类，这样您就可以在 UI 中获得 DataAnnotation 验证内容。

```
public class FinalPage{
    public Page Page { get; set; }
    public ContentVersion ContentVersion { get; set; }
    public Content Content { get; set; }
} 
```

然后显示每个内部对象的相应字段。在带有 Razor 的 MVC4 中：

```
@Html.EditorFor(m=>m.Page.Title) 
```

这将产生您期望的验证错误，并且在数据模型中定义，但是您需要注意您可能需要确保以后正确处理对象（例如在 MVC 中，您`ModelState`几乎总是无效） . 我个人会推荐第一种方法，因为这是使用不同 UI 和 ORM 模型进行操作的传统方法。我遵循的一般规则是，如果可以，请使用 ORM 模型，但一旦它变得有点棘手，就切换到 ViewModel 类来表示您的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-11T15:11:53.723

并非所有 ORM 都是相同的，但该模式在[敏捷数据](https://github.com/atk4/data)中运行良好。

虽然大多数 ORM 会让您在敏捷数据中使用多个实体，但您可以通过扩展甚至在对象级别上重用 ContentVersion 的定义：

```
// Single-table model
class ContentVersion extends \atk4\data\Model {
    public $id_field = 'contentVersionId';

    function init() {
        parent::init();
        $this->addField('VerisonTitle', ['actual'=>'Title']); 
        $this->addfield('Body', ['type'=>'text']);
    }
}

// Separate entity for 3-table join
class FinalPage extends ContentVersion {

    function init() {
        parent::init(); // initializes fields from 'Page'

        $j_content = $this->joinLeft('Content.ContentId', 'ContentId');
        $j_content->hasMany('LanguageId', new Language());
        $j_content->addField('ContentId');
        $j_content->addFiled('PageId');

        $page = $this->joinLeft('Page.PageId', 'PageId');
        $page->hasOne('TemplateId', new Template());
        $page->hasOne('ParentId', new Page());

        $page->addField('Slug');
        $page->addField('Title');
    }
} 
```

要使用数据，您可以直接访问它：

```
$fp = new FinalPage($db);
$fp->load($content_version_id);

var_dump($fp->get());

$fp->set('..')
$fp->save(); 
```

该模型将连接所有字段，并与通用的[敏捷 UI](https://github.com/atk4/ui)表单类集成。

```
$form = new \atk4\ui\Form();
$form->setModel(new FinalPage($db));

$html = $form->render(); 
```

表单将包含所有表格中的所有字段，保存后它将自动以正确的顺序保存它们并将表格链接在一起。我不知道有任何其他 ORM 在做类似的事情。

# infragistics - 全局定义 XamDataGrid 属性，允许本地修改

> ID：13020233
> 
> 赞同：0
> 
> 时间：2012-10-22T21:33:05.980
> 
> 标签：infragistics, styling, xamdatagrid

我想为我的应用程序定义一个 XamDataGrid 的全局设置，但我希望其他开发人员能够在不覆盖整个设置的情况下覆盖特定设置。下面的示例 xaml：

```
 <igDP:FieldLayoutSettings x:Key="DefaultFieldLayoutSettings"
    HighlightAlternateRecords="True"
    FilterRecordLocation="OnTop"
    FilterUIType="LabelIcons"
    ReevaluateFiltersOnDataChange="True"
    SummaryDescriptionVisibility="Visible"
    GroupBySummaryDisplayMode="SummaryCellsAlwaysBelowDescription"
    AllowClipboardOperations="Copy"
    AllowRecordFixing="Top"
    AllowAddNew="False"
    AllowDelete="False"
    AutoFitMode="ExtendLastField"
    AutoGenerateFields="False"
    HeaderPrefixAreaDisplayMode="FieldChooserButton"
    HighlightPrimaryField="Highlight"
    FixedFieldUIType="Button"
    FixedRecordUIType="Button"
    DataRecordCellAreaStyle="{StaticResource defaultDataRecordCellArea}"
    />

    <igDP:FieldSettings x:Key="DefaultFieldSettings"
    AllowRecordFiltering="True"
    FilterClearButtonVisibility="Visible"
    FilterStringComparisonType="CaseInsensitive"
    FilterLabelIconDropDownType="MultiSelectExcelStyle"
    AllowSummaries="True"
    CellHeight="200"
    SummaryDisplayArea="BottomFixed"
    SummaryUIType="MultiSelectForNumericsOnly"
    AllowEdit="False"
    AllowFixing="Near"
    AllowGroupBy="True"
    AllowResize="True"
    />
    <Style x:Key="DefaultXamDataGridStyle" TargetType="{x:Type igDP:XamDataGrid}">
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="Theme" Value="Office2010Blue" />
    <Setter Property="IsNestedDataDisplayEnabled" Value="False"/>
    <Setter Property="ClipboardCellDelimiter" Value=","/>
    <Setter Property="ClipboardRecordSeparator" Value=";"/>
    <Setter Property="IsUndoEnabled" Value="True"/>
    <Setter Property="FieldLayoutSettings" Value="{StaticResource   DefaultFieldLayoutSettings}"/>
    <Setter Property="FieldSettings" Value="{StaticResource DefaultFieldSettings}"/>
 </Style> 
```

视图中的实际 xaml。

```
 <igDP:XamDataGrid DataSource="{Binding Path=QueryStatuses}" Style="{StaticResource 
      DefaultXamDataGridStyle}">
            <igDP:XamDataGrid.FieldSettings>        
                <igDP:FieldSettings  CellClickAction="SelectRecord" />
            </igDP:XamDataGrid.FieldSettings>
    </igDP:XamDataGrid> 
```

现在有办法只覆盖本地 fieldSetings 中明确定义的内容并保留其他全局设置。现在，本地 FieldSetting 覆盖了全局 fieldSettings，这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:09:51.093

这在 XAML 中是不可能的，因为 FieldSetings 不是从 FrameworkElement 派生的，因此您不能让样式直接针对它们。当您将 FeildSetting 设置为针对 XamDataGrid 的样式以及定义 XamDataGrid 的位置时，本地的将始终是唯一使用的样式。

一种可能的替代方法是创建一个派生自 FieldSettings 的对象，并在该对象的构造函数中设置所需的设置，然后在使用网格时使用自定义 FieldSettings 对象而不是默认对象。例如：

```
public class CustomFieldSettings:FieldSettings
{
    public CustomFieldSettings():base()
    {
        this.CellClickAction = CellClickAction.SelectRecord;
    }
} 
```

然后你会在 XAML 中使用它：

```
<igDP:XamDataGrid x:Name="XamDataGrid1">
    <igDP:XamDataGrid.FieldSettings>
        <local:CustomFieldSettings CellClickAction="EnterEditModeIfAllowed" />
    </igDP:XamDataGrid.FieldSettings>
...
</igDP:XamDataGrid> 
```

这种方法将允许您创建自定义并编辑任何设置。

# javascript - ajax活动标签ID

> ID：13020241
> 
> 赞同：0
> 
> 时间：2012-10-22T21:33:51.520
> 
> 标签：javascript, jquery, asp.net, ajaxcontroltoolkit, tabcontainer

我有一个 ajax 控制工具包 tabcontainer。如何使用 javascript 或 jquery 确定活动选项卡的 ID？即，如果该选项卡处于活动状态，它将是 Tab_Monitor。

我已经尝试了所有示例，但找不到解决方案。

谢谢达摩

```
<asp:TabContainer ID="TabContainerMain" runat="server" ActiveTabIndex="4" Width="100%"
Height="100%" CssClass="" ViewStateMode="Enabled">
   <asp:TabPanel runat="server" HeaderText="test" ID="Tab_Monitor">
      <ContentTemplate>
         <div class="TabControls">
             <p>Howdy, I'm in Section Tab_Monitor.</p>
         <div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:42:24.903

代码未测试。As I can remeber, when any tab is selected, .ajax__tab_active class is applied to that div. 所以下面可以用来抓取选中标签的ID

```
alert($(".ajax__tab_active").first().attr('id')); 
```

您可以根据需要自定义选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T22:07:57.703

Ajax Control Toolkit TabContainer 客户端组件支持get_activeTab 和get_activeTabIndex 方法。

您可以使用以下 JS 代码访问此方法：

```
$find('<%=TabContainerMain.ClientID %>').get_activeTab(); 
```

**编辑：**

您还可以查看[如何从 TabCointainer (AjaxToolKit) 中选择一个选项卡，](https://stackoverflow.com/questions/6832520/how-to-select-a-tab-from-tabcointainer-ajaxtoolkit)那里的人建议相同。

# xaml - XAML：解析命名空间中的类的问题

> ID：13020245
> 
> 赞同：0
> 
> 时间：2012-10-22T21:34:14.543
> 
> 标签：xaml, namespaces

……

大家好，

我在我的代码中找不到错误。我有一个 XAML 文件，它不会在命名空间中找到类。命名空间仍然存在。班也。并且 XAML 接受由 " 声明的 Namespac `xmlns:n="clr-namespace:ERDBuilder.Resources.Tools"`。但是 XAML 抛出一个错误，该类不存在于这个命名空间中。我不知道如何解决这个问题。有关问题的更多详细信息，请参见图片。

![在此处输入图像描述](../Images/02b96bd8e7a8e04b07b36e6654fb56e8.png)

文件 Brushes.xaml 在这里：

![在此处输入图像描述](../Images/784d1809830bca60de85bda565a4bc84.png)

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:51:09.313

WPF 是什么应用程序类型？银光？地铁？

我注意到在 Metro 应用程序中，您可以执行以下操作：

xmlns:n="使用:ERDBuilder.Resources.Tools"

你可能想试试那个。

# javascript - 使用replace方法删除特殊符号和多余空格并替换为下划线

> ID：13020246
> 
> 赞同：64
> 
> 时间：2012-10-22T21:34:18.953
> 
> 标签：javascript

我想从字符串中删除所有特殊字符和空格并用下划线替换。字符串是

```
 var str = "hello world & hello universe"; 
```

我现在有这个，它只替换空格：

```
 str.replace(/\s/g, "_"); 
```

我得到的结果是`hello_world_&_hello_universe`，但我也想删除特殊符号。

我试过这个`str.replace(/[^a-zA-Z0-9]\s/g, "_")`，但这没有帮助。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-10-22T21:36:40.520

您的正则表达式`[^a-zA-Z0-9]\s/g`表示匹配任何不是数字或字母后跟空格的字符。

删除 \s ，如果您希望每个特殊字符都有一个 _ ，您应该得到您所追求的。

```
var newString = str.replace(/[^A-Z0-9]/ig, "_"); 
```

这将导致`hello_world___hello_universe`

如果您希望它是单个下划线，请使用 + 匹配多个

```
var newString = str.replace(/[^A-Z0-9]+/ig, "_"); 
```

这将导致`hello_world_hello_universe`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-07-07T12:15:25.993

没有要求精确删除重音（仅特殊字符），但我需要。

此处给出的解决方案有效，但它们不会删除重音：é、è 等。

所以，在做 epascarello 的解决方案之前，你还可以这样做：

```
var newString = "développeur & intégrateur";

newString = replaceAccents(newString);
newString = newString.replace(/[^A-Z0-9]+/ig, "_");
alert(newString);

/**
 * Replaces all accented chars with regular ones
 */
function replaceAccents(str) {
  // Verifies if the String has accents and replace them
  if (str.search(/[\xC0-\xFF]/g) > -1) {
    str = str
      .replace(/[\xC0-\xC5]/g, "A")
      .replace(/[\xC6]/g, "AE")
      .replace(/[\xC7]/g, "C")
      .replace(/[\xC8-\xCB]/g, "E")
      .replace(/[\xCC-\xCF]/g, "I")
      .replace(/[\xD0]/g, "D")
      .replace(/[\xD1]/g, "N")
      .replace(/[\xD2-\xD6\xD8]/g, "O")
      .replace(/[\xD9-\xDC]/g, "U")
      .replace(/[\xDD]/g, "Y")
      .replace(/[\xDE]/g, "P")
      .replace(/[\xE0-\xE5]/g, "a")
      .replace(/[\xE6]/g, "ae")
      .replace(/[\xE7]/g, "c")
      .replace(/[\xE8-\xEB]/g, "e")
      .replace(/[\xEC-\xEF]/g, "i")
      .replace(/[\xF1]/g, "n")
      .replace(/[\xF2-\xF6\xF8]/g, "o")
      .replace(/[\xF9-\xFC]/g, "u")
      .replace(/[\xFE]/g, "p")
      .replace(/[\xFD\xFF]/g, "y");
  }

  return str;
}
```

来源：[https ://gist.github.com/jonlabelle/5375315](https://gist.github.com/jonlabelle/5375315)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T21:36:28.597

`\s`从新的正则表达式中删除它应该可以工作 - 空格已经包含在“除字母数字之外的任何内容”中。

请注意，您可能希望`+`在 the 之后添加一个，`]`这样您就不会得到多个下划线的序列。您还可以链接到`.replace(/^_+|_+$/g,'')`以修剪字符串开头或结尾的下划线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-23T07:40:35.357

**如果你有一个文本**

var **sampleText** ="ä_öü_ßÄ_ TESTED Ö_Ü!@#$%^&())(&& *+* +===.XYZ"

替换所有特殊字符 (!@#$%^&())(&& *+* += ==.) 而不替换字符（包括变音符号）

**使用下面的正则表达式**

**sampleText** = sampleText.replace(/[`~!@#$%^&*() *|+-=?;:'",.<>{}[]\/\s]/gi,'* ');

**输出：** sampleText =“ä_öü_ßÄ____TESTED_Ö_Ü_____________________XYZ”

这将用下划线替换所有内容，该下划线作为替换函数的第二个参数提供。您可以根据需要添加任何内容

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-14T05:24:56.423

var str =“你好世界和你好宇宙”

为了一次性替换空格和符号，我们可以使用下面的正则表达式代码。

str.replaceAll("\\W+","")

注意：\W -> 表示非单词（包括空格/特殊字符）| + -> 一个或多个匹配项

尝试一下！

# sql - 在 PostreSQL 中聚合 hstore 列

> ID：13020251
> 
> 赞同：9
> 
> 时间：2012-10-22T21:34:38.260
> 
> 标签：sql, postgresql, aggregate-functions, postgresql-9.1, hstore

我有一张这样的桌子：

```
 Table "public.statistics"

id         | integer                | not null default nextval('statistics_id_seq'::regclass)
goals      | hstore                 | 
```

项目：

```
|id    |goals                  |
|30059 |"3"=>"123"             |
|27333 |"3"=>"200", "5"=>"10"  | 
```

我需要做些什么来通过哈希键聚合所有值？

我想得到这样的结果：

```
select sum(goals) from statistics 
```

返回

```
|goals                 |
|"3"=>"323", "5"=>"10" | 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T00:09:17.783

基于 Laurence 的回答，这是一种纯 SQL 方法，可以将求和的键/值对聚合到新的`hstore`using`array_agg`和`hstore(text[], text[])`构造函数中。

[http://sqlfiddle.com/#!1/9f1fb/17](http://sqlfiddle.com/#!1/9f1fb/17)

```
SELECT hstore(array_agg(hs_key), array_agg(hs_value::text))
FROM (
  SELECT
    s.hs_key, sum(s.hs_value::integer)
  FROM (
    SELECT (each(goals)).* FROM statistics
  ) as s(hs_key, hs_value)
  GROUP BY hs_key
) x(hs_key,hs_value) 
```

我还替换`to_number`为简单的整数转换并简化了键/值迭代。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T21:50:27.993

可能有一些方法可以避免数字转换，但这应该可以完成工作：

```
SELECT 
  key, Sum(to_number(value, '999999999999')) FROM (
  SELECT (each(goals)).key, (each(goals)).value FROM public.statistics
) as s
Group By
  key 
```

[http://sqlfiddle.com/#!1/eb745/10/0](http://sqlfiddle.com/#!1/eb745/10/0)

这是 Postgres 不想这样弯曲的大气味，但是：

```
create table test (id int, goals hstore);

Insert Into Test(id, goals) Values (30059, '3=>123');
Insert Into Test(id, goals) Values (27333, '3=>200,5=>10');

Create Function hagg() returns hstore As 
'Declare ret hstore := ('''' :: hstore); i hstore; c cursor for Select hstore(key, (x.Value::varchar)) From (Select key, Sum((s.value::int)) as Value From (Select (each(goals)).* From Test) as s Group By key) as x; BEGIN Open c; Loop Fetch c into i; Exit When Not FOUND; ret := i || ret; END LOOP; return ret; END' Language 'plpgsql'; 
```

我无法让 sql fiddle 接受多行函数体，在真正的 postgres 中，您应该能够 $$ 引用它并将其分解一下。

[http://sqlfiddle.com/#!1/e2ea7/1/0](http://sqlfiddle.com/#!1/e2ea7/1/0)

# jquery - 同一页面上的多个 Ui 对话框

> ID：13020255
> 
> 赞同：1
> 
> 时间：2012-10-22T21:35:03.510
> 
> 标签：jquery, ajax

我的页面上有多个链接，每个链接都会打开一个不同的 UI 对话框，

**这是对话框代码：**

```
$('#photo-form').dialog({
    autoOpen: false,
    modal:true,
    width: 500,
    height:460,
    buttons: {
        "Save": function() {
            // do some action 
            $(this).dialog('close'); // Close the Confirmation Box
        },
        "Cancel": function() {
            //if the User Clicks the button "cancel"
            $(this).dialog('close');
        }
    }
});

// if a user clicks on the "delete" image
$('a.album').click(function(e) {
    $('#photo-form').dialog('open');
}); 
```

我的问题是，一旦我打开第一个对话框，然后完成我需要对其执行的操作，然后单击保存或取消将其关闭，

**第一：**当我单击第二个对话框的链接时，除非我重新加载页面并且我不想这样做，否则它不会打开。

**第二：**当我尝试再次打开同一个对话框时，它会打开前一个瞬间，我需要重置它。

当我尝试使用`$(this).dialog('destroy')`if`$(this).dialog('close')`来关闭第一个对话框时，我可以打开第二个对话框，但是当我单击第一个对话框的链接时，我无法再次打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:34:21.293

我无法弄清楚你的确切意思。

试试这个jsfiddle

[http://jsfiddle.net/Doinkmeister/gZBgR/](http://jsfiddle.net/Doinkmeister/gZBgR/)

有 2 个对话框，都在单击时打开。

还请提供您的 html 代码，因为问题可能存在。

*$(this).dialog('close');* 应该做的伎俩。

是您在 document.ready() 中的所有代码

尝试将所有代码添加到

```
$(function(){
    $('#photo-form').dialog({
        autoOpen: false,
        modal:true,
        width: 500,
        height:460,
        buttons: {
           "Save": function() {
               // do some action 
               $(this).dialog('close'); // Close the Confirmation Box
            },
            "Cancel": function() {
                //if the User Clicks the button "cancel"
                $(this).dialog('close');
            }
        }
    });

    $('a.album').click(function(e) {
        $('#photo-form').dialog('open');
    });
}); 
```

# javascript - 使用 jquery 或 javascript 通过 AJAX 读取嵌套 JSON 并输出到表

> ID：13020258
> 
> 赞同：9
> 
> 时间：2012-10-22T21:35:19.250
> 
> 标签：javascript, jquery, ajax, json

> **可能重复：**
> [jquery 读取嵌套的 json](https://stackoverflow.com/questions/4017122/jquery-reading-nested-json)

我真的很想有一个快速的方法来遍历 JSON 中的多个记录，每个记录都有潜在的深度嵌套。我只是想输出到一个表。

我不确定 $.each() 或 $.ajax() 成功的 javascript 方法需要通过 function() 传递哪些参数。所有示例似乎都使用通用词“数据”或“obj”，但这些让我感到困惑 - 它们是内置函数参数还是我可以随意命名它们：

```
$.each(foo, function(bar){

}); 
```

以及如何跟踪我在循环/嵌套中的位置？

我更喜欢使用 JQuery，但我也应该知道这样做的直接 JavaScript 方法。而且我还想知道是否可以不用一百行代码。

以这个 JSON 为例：

```
{
  date: " 2012-10-18 16:58:35.104576",
  data: [{
    title: "The Princess Bride",
    rating: "PG",
    length: 128,
    stars: [
      "Gary Elwes",
      "Robin Wright",
      "Christopher Guest"
    ]

  }, {
    title: "This is Spinal Tap",
    rating: "R",
    length: 105,
    stars: [
      "Christopher Guest",
      "Michael McKean",
      "Harry Shearer"
    ]
  }]
} 
```

即使在 StackOverflow 中，我也找不到任何包含嵌套 JSON 的有用示例。

循环遍历每个元素并将每个元素分配给表格单元格的最有效方法是什么？HTML 输出并不重要——我知道如何制作表格……如何获得“星星”？

当我使用 Chrome 控制台时，`$.getJSON('/example');`我只是在 responseText 中返回了整个 JSON，`"{"date":"2012-10-18 ,"data": [{"title": "The Princess Bride",`但是在 JSON 文档、$.getJSON 上的 JQuery 文档以及任何 JavaScript 示例中，我都找不到对`responseText`. 所以，我迷路了。$.getJSON 需要什么参数来客观化 responseText？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T21:36:35.103

尝试

```
obj.data[0].stars      // Will get you the stars in the 1st Object

obj.data[0].stars[0]   // Gary Elwes 
```

[小提琴](http://jsfiddle.net/sushanth009/UwHxq/)

遍历 Stars 对象你可以试试这个

```
$.each(obj.data , function(key , value){ // First Level
    $.each(value.stars , function(k , v ){  // The contents inside stars
        console.log(v)
    });        

}); 
```

[更新的小提琴](http://jsfiddle.net/sushanth009/UwHxq/1/)

**编辑**

```
 $.ajax({
      // Parameters 

      success : function(obj){
            $.each(obj.data , function(key , value){ // First Level
                 $.each(value.stars , function(k , v ){  // The contents inside stars
                     console.log(v)
                 });     
            });
      }
  }); 
```

# android - 自定义适配器 onclicklistener 按钮 NPE *android

> ID：13020260
> 
> 赞同：2
> 
> 时间：2012-10-22T21:35:41.597
> 
> 标签：android, listview

我在我的列表视图上获得了 NPE ..所以当我单击按钮时，它会显示我在另一个表单上设置的数据..

这是我的自定义适配器代码：

```
public class AdapterListPemesananMenu extends BaseAdapter {
    public static ArrayList<MenuInputClass> searchArrayList;

    private LayoutInflater mInflater;

    public AdapterListPemesananMenu(Context context, ArrayList<MenuInputClass> results) {
        searchArrayList = results;
        mInflater = LayoutInflater.from(context);
    }   

    public AdapterListPemesananMenu(OnClickListener onClickListener,
            ArrayList<MenuInputClass> searchResults) {
        // TODO Auto-generated constructor stub
    } 

    public int getCount() {
        return searchArrayList.size(); *********************the NPE is here
    }

    public Object getItem(int position) {
        return searchArrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.list_pemesananmenu_row, null);
            holder = new ViewHolder();
            holder.txtName = (TextView) convertView.findViewById(R.id.txtNamaMasuk);
            holder.txtCityState = (TextView) convertView
                    .findViewById(R.id.txtJumlahMasuk);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.txtName.setText(searchArrayList.get(position).getNama_menu());
        holder.txtCityState.setText(searchArrayList.get(position)
                .getJumlah_menu());

        return convertView;
    }

    static class ViewHolder {
        TextView txtName;
        TextView txtCityState;

    }
} 
```

这是我的活动代码：

```
public class SingleListView_Activity extends Activity{

    Button order;       
    public static ListView list_pemesanan;    
    public static String nama_menu;
    TextView namamenu;
    public static String jumlah_menu;
    EditText jumlahmenu;  
    //public static ArrayList<MenuInputClass> searchResults = GetSearchResults();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_view);  

        ListView list_single_list_view=(ListView)findViewById(R.id.list_single);    
        list_pemesanan = (ListView)findViewById(R.id.list);
        namamenu=(TextView)findViewById(R.id.nama_menu2);
        jumlahmenu = (EditText)findViewById(R.id.txtJumlahOrder);

        order=(Button)findViewById(R.id.btn_order);
        //when this button on click its set the data to my another form
        order.setOnClickListener(new OnClickListener() { 
                @Override
                public void onClick(View v) {                                             

                     ArrayList<MenuInputClass> searchResults = GetSearchResults();              
                      ListPemesanan_Activity.list_pemesanan.setAdapter(new AdapterListPemesananMenu(this,searchResults));   

                }

             });

    }

     private ArrayList<MenuInputClass> GetSearchResults(){
     //this is the data that i set
         ArrayList<MenuInputClass> results = new ArrayList<MenuInputClass>();

         MenuInputClass sr = new MenuInputClass();      
         sr.setJumlah_menu("asdas");
         sr.setNama_menu("2");
         results.add(sr);                
         return results;
        }
} 
```

日志猫：

```
10-23 04:33:19.759: E/AndroidRuntime(14459): FATAL EXCEPTION: main
10-23 04:33:19.759: E/AndroidRuntime(14459): java.lang.NullPointerException
10-23 04:33:19.759: E/AndroidRuntime(14459):    at list_pemesananmenu_view.AdapterListPemesananMenu.getCount(AdapterListPemesananMenu.java:35)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at android.widget.ListView.setAdapter(ListView.java:479)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at list_pemesananmenu_view.SingleListView_Activity$1.onClick(SingleListView_Activity.java:123)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at android.view.View.performClick(View.java:2538)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at android.view.View$PerformClick.run(View.java:9152)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at android.os.Handler.handleCallback(Handler.java:587)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at android.os.Looper.loop(Looper.java:130)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at android.app.ActivityThread.main(ActivityThread.java:3693)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at java.lang.reflect.Method.invoke(Method.java:507)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
10-23 04:33:19.759: E/AndroidRuntime(14459):    at dalvik.system.NativeStart.main(Native Method)
10-23 04:33:19.769: E/(195): Dumpstate > /data/log/dumpstate_app_error
10-23 04:33:20.059: E/AudioPolicyManager(129): stopOutput stream = 1 , mHardwareOutput = 1, output = 1 
```

任何帮助将不胜感激...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:51:09.453

```
order.setOnClickListener(new OnClickListener() { 
   @Override
   public void onClick(View v) {                                             
      ArrayList<MenuInputClass> searchResults = GetSearchResults();              
      ListPemesanan_Activity.list_pemesanan.setAdapter(new AdapterListPemesananMenu(this,searchResults));   
   }
}); 
```

在上面的代码中，您正在调用 new AdapterListPemesananMenu(OnClickListener onClickListener, ArrayList searchResults);

“this”指的是 OnClickListener，而不是本例中的活动，因为您位于新的 OnClickListener() 块内。

该构造函数不会初始化您的 searchArrayList。searchArrayList 仅在采用 (Context, ArrayList) 的构造函数中进行初始化。

如果您想保持其余代码相同，您可以这样做

```
ListPemesanan_Activity.list_pemesanan.setAdapter(new AdapterListPemesananMenu(getApplicationContext(), searchResults)); 
```

并且还摆脱了以 OnClickListener 作为参数的 AdapterListPmesananMenu 构造函数以避免混淆。

这是 NPE 的快速修复/分析，可能有更好的方法来重新排列代码以实现您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:46:32.043

您的直接问题是`searchArrayList`null，但您可能已经知道这一点。您应该做的第一件事是检查空值。您可以使用三元运算符在一行中执行此操作，如下所示：

```
return (searchArrayList == null) ? 0 : searchArrayList.size(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:58:22.803

您只是忘记`ArrayList<MenuInputClass>`在使用过的构造器中设置您的

```
 public AdapterListPemesananMenu(OnClickListener onClickListener,
        ArrayList<MenuInputClass> searchResults) {
     // TODO Auto-generated constructor stub
     searchArrayList = results;

 } 
```

这就是为什么你`searchArrayList`是空的

# haskell - Haskell 是否有像 ActiveRecord 或 Sequel 这样的 SQL 查询组合库？

> ID：13020261
> 
> 赞同：13
> 
> 时间：2012-10-22T21:35:45.803
> 
> 标签：haskell, hdbc

使用 Ruby 的 ActiveRecord 或[Sequel](http://sequel.rubyforge.org/)，您可以逐步构建 SQL 查询，根据运行时的条件向查询添加`where`or `join`or子句。`order`

这是一个简单的例子，取自[ASCIIcasts](http://asciicasts.com/episodes/202-active-record-queries-in-rails-3)：

```
def index  
  @articles = Article.order('name')  

  if params[:hidden]  
    @articles = @articles.where(:hidden =>(params[:hidden] == "1"))  
  end  

  respond_to do |format|  
    format.html # index.html.erb  
    format.xml  { render :xml => @articles }  
  end  
end 
```

该示例显示了如果名为equals`articles`的 HTTP 请求查询参数，如何将 WHERE 子句附加到表上的基础 SQL 查询。`hidden``1`

我一直在查看 Haskell 中的 HDBC 和 postgresql-simple。似乎 postgresql-simple 故意使从动态连接的部分构建 SQL 查询变得困难，以防止 SQL 注入。HDBC 似乎确实足够灵活，可以根据运行时的条件构建不同结构的 SQL 查询，但它似乎没有提供 ActiveRecord 或 Sequel 提供的抽象级别。

任何人都可以建议一种使用 Haskell 数据库库之一来模拟 ActiveRecord 的动态查询构建工具的好方法吗？

如果 HDBC 是要走的路，我可以接受。但一个插图将不胜感激。

我想我正在寻找的是针对 PostgreSQL 后端动态组合查询的能力。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T23:40:34.163

你可能想要[Persistent](http://www.yesodweb.com/book/persistent)，你可能想要[HaskellDB](http://chrisdone.com/posts/2011-11-06-haskelldb-tutorial.html)，你可能想要像 Esqueleto 这样的东西。

以下是对每个权衡的一个很好的讨论： [http ://blog.felipe.lessa.nom.br/?p=68](http://blog.felipe.lessa.nom.br/?p=68)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T22:23:36.273

您可能会发现[http://hackage.haskell.org/package/esqueleto](http://hackage.haskell.org/package/esqueleto)对这个应用程序很感兴趣。

# facebook - 应用在 Facebook 上发帖的限制是什么？

> ID：13020269
> 
> 赞同：2
> 
> 时间：2012-10-22T21:36:05.947
> 
> 标签：facebook, api

假设有一个网站«somesite.com»。只有在他授予站点应用程序所需的权限后，才能使用 FB 应用程序登录它：«somesiteapp»。该应用程序还请求允许在朋友墙上发帖。

此外，当上述用户“John Smith”登录该网站时，该应用程序会在朋友的墙上发布 X 条消息（每个人只发一次），通知他们他们的朋友 John 在 «somesite.com» 注册（带有指向该网站的超链接）。

现在，问题。

1.  该应用程序一次可以向多少个约翰的朋友发布 - 5 个？10？100？有什么限制……</li>
2.  每天都有很多像约翰这样的用户注册。消息总数是否有限制，应用程序可以每天发布？
3.  FB 如何处理上述情况 - 它是被视为垃圾邮件还是合法的？

提前非常感谢，非常感谢。在 FB 手册中找不到任何官方答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:47:12.247

1.  每 48 小时每位用户 24 个提要帖子
2.  没有每个应用程序的限制，只有每个用户
3.  您可能会在几个小时内因垃圾邮件而被关闭。

另请注意，发布到另一个用户的`/feed`连接的功能已被弃用 - 新应用程序根本无法使用它，该功能[计划于 2012 年 2 月 5 日从所有现有应用程序中删除](https://developers.facebook.com/roadmap/)

# iphone - 使用等待对话框导航到另一个 ViewController

> ID：13020274
> 
> 赞同：1
> 
> 时间：2012-10-22T21:36:18.517
> 
> 标签：iphone, objective-c, ios

我正在尝试使用[MBProgressHUD](https://github.com/jdg/MBProgressHUD)在我的应用程序中使用等待对话框。

我的应用程序中有一个按钮。当用户点击它时，我们导航到另一个 viewController：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ViewController2 *yourViewController = (ViewController2 *)[storyboard instantiateViewControllerWithIdentifier:@"FavoritePage"];
[self.navigationController pushViewController:yourViewController animated:YES]; 
```

如您所知，它也可以从`interface builder`.

问题是加载下一页需要很短的时间，我想在此期间显示一个等待对话框：

```
- (IBAction)navigation:(id)sender {
    [MBProgressHUD showHUDAddedTo:self.view animated:YES];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    ViewController2 *yourViewController = (ViewController2 *)[storyboard instantiateViewControllerWithIdentifier:@"FavoritePage"];
    [self.navigationController pushViewController:yourViewController animated:YES];
} 
```

但它不起作用。

当我删除与导航相关的代码时，只需使用它：

```
[MBProgressHUD showHUDAddedTo:self.view animated:YES]; 
```

等待对话框出现，但是当我使用导航代码和这条线时，等待对话框不显示并且导航工作。

我怎样才能让它们一起工作？

只是想添加它来隐藏等待对话框，我也有这个：

```
- (void) viewDidDisappear:(BOOL)animated {
    [MBProgressHUD hideHUDForView:self.view animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:28:07.007

代替，

```
- (IBAction)navigation:(id)sender {
    [MBProgressHUD showHUDAddedTo:self.view animated:YES];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    ViewController2 *yourViewController = (ViewController2 *)[storyboard instantiateViewControllerWithIdentifier:@"FavoritePage"];
    [self.navigationController pushViewController:yourViewController animated:YES];
} 
```

尝试，

```
- (IBAction)navigation:(id)sender {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    ViewController2 *yourViewController = (ViewController2 *)[storyboard instantiateViewControllerWithIdentifier:@"FavoritePage"];
    [self.navigationController pushViewController:yourViewController animated:YES];
    [MBProgressHUD showHUDAddedTo:self.navigationController.view  animated:YES];
} 
```

否则，您需要`showHUDAddedTo`在`ViewController2`'s方法中添加`viewWillAppear`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:17:18.960

我认为问题出在你`- (IBAction)navigation:(id)sender {}` 身上，因为你首先展示了`MBProgressHUD`然后推送到`ViewController2`. 因此， `MBProgressHUD`已经展示了它，但它也推动了新的观点。

如果你想显示等待标志，那么你可以使用`MBProgressHUD`定时器。将计时器设置为 1.0 或 2.0 秒。在那个调用`navigation`方法之后。使计时器无效并删除`MBProgressHUD`.

否则，您可以使用

`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(yourMethod) name:@"notificationName" object:nil];`

在 `- (IBAction)navigation:(id)sender {}。

并`NSNotification`从另一个视图中调用它，例如`[[NSNotificationCenter defaultCenter] postNotificationName:@"notificationName" object:nil];` `

# android - 使用 AChartEngine 时，X 轴上的一些标签会出现乱码（混乱）

> ID：13020286
> 
> 赞同：3
> 
> 时间：2012-10-22T21:37:13.277
> 
> 标签：android, achartengine

我正在使用 AChartEngine 库在我的应用程序中显示折线图。不幸的是，一些 x 轴标签会出现乱码。

![在此处输入图像描述](../Images/4af589b9b9ac50788a0c82ac1ee6c0ad.png)

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:25:19.000

您正在显示默认标签和自定义标签。为了隐藏默认标签，请致电：

```
mRenderer.setXLabels(0); 
```

# exception - Surfaceview - 致命异常：主要

> ID：13020289
> 
> 赞同：1
> 
> 时间：2012-10-22T21:37:24.400
> 
> 标签：exception, android-emulator, surfaceview, main

我是 android 的初学者，我相信我的代码一切正常，但是在模拟器中加载应用程序时，应用程序崩溃并且需要强制关闭。我得到了下面的 logcat，我搜索了错误，但老实说，我不太了解将他们的其他解决方案转换为适合我的解决方案（我确实尝试过）

编辑：从我可以从其他线程中得知，我可能需要在清单中添加一些东西？

有人可以用下面的 logcat 向我解释我应该在我的代码中寻找什么，或者至少指出我可以尝试的东西吗？

如果我还能做些什么来帮助解决这个问题，我非常感激它接缝我的很多项目都受到同样错误的困扰。

提前感谢所有帮助，这是我的第一篇文章，所以很好:)

日志猫

```
10-22 20:59:20.258: D/AndroidRuntime(307): Shutting down VM

10-22 20:59:20.258: W/dalvikvm(307): threadid=1: thread exiting with uncaught        
exception (group=0x4001d800)

10-22 20:59:20.348: E/AndroidRuntime(307): FATAL EXCEPTION: main

10-22 20:59:20.348: E/AndroidRuntime(307): java.lang.RuntimeException: Unable to       
instantiate activity 
ComponentInfo{com.example.w1_t2_surfaceview/com.example.w1_t2_surfaceview.MyGame}:    
java.lang.ClassNotFoundException: com.example.w1_t2_surfaceview.MyGame in loader    
dalvik.system.PathClassLoader[/data/app/com.example.w1_t2_surfaceview-2.apk]

10-22 20:59:20.348: E/AndroidRuntime(307):  at   
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
android.app.ActivityThread.access$2300(ActivityThread.java:125)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
android.os.Handler.dispatchMessage(Handler.java:99)

10-22 20:59:20.348: E/AndroidRuntime(307):  at android.os.Looper.loop(Looper.java:123)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
android.app.ActivityThread.main(ActivityThread.java:4627)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
java.lang.reflect.Method.invokeNative(Native Method)

10-22 20:59:20.348: E/AndroidRuntime(307):  at
java.lang.reflect.Method.invoke(Method.java:521)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)

10-22 20:59:20.348: E/AndroidRuntime(307):  at dalvik.system.NativeStart.main(Native 
Method)

10-22 20:59:20.348: E/AndroidRuntime(307): Caused by:   
java.lang.ClassNotFoundException: com.example.w1_t2_surfaceview.MyGame in loader 
dalvik.system.PathClassLoader[/data/app/com.example.w1_t2_surfaceview-2.apk]

10-22 20:59:20.348: E/AndroidRuntime(307):  at   
dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
java.lang.ClassLoader.loadClass(ClassLoader.java:573)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
java.lang.ClassLoader.loadClass(ClassLoader.java:532)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
android.app.Instrumentation.newActivity(Instrumentation.java:1021)

10-22 20:59:20.348: E/AndroidRuntime(307):  at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)

10-22 20:59:20.348: E/AndroidRuntime(307):  ... 11 more 
```

MyGame类包com.example.game；

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;

public class MyGame extends Activity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(new GameView(this));
}
} 
```

Gameview类包com.example.game；导入 com.example.w1_t2_surfaceview.R；

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color; 
import android.view.SurfaceView;

public class GameView extends SurfaceView {
private Bitmap bmp;

public GameView(Context context) {
      super(context);
      bmp = BitmapFactory.decodeResource(getResources(), R.drawable.icon);
}
@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.CYAN);
    canvas.drawBitmap(bmp, 10, 10, null);
}
} 
```

显现

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />

<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">
    <activity
        android:name=".MyGame"
        android:label="@string/title_surfaceview" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

字符串.XML

```
<resources>
<string name="app_name">W1_T2_SurfaceView</string>
<string name="title_surfaceview">Surface View 2</string>
</resources> 
```

由于开放 1 周而导致线程颠簸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T01:45:43.320

我认为这可能只是与在 Android 模拟器中使用 GLSurfaceView 相关的问题。用实际的设备试试，看看会发生什么。

# audio - 使用 gstreamer 将同步的视频和音频录制到容器文件中

> ID：13020290
> 
> 赞同：3
> 
> 时间：2012-10-22T21:37:28.627
> 
> 标签：audio, video, gstreamer

我正在使用 TI DM365 EVM 来录制视频和音频。我需要对这两个流进行编码并将它们保存在 .avi 或 .mp4 等容器文件中。我正在使用以下 gstreamer 管道：

> gst-launch v4l2src always-copy=FALSE num-buffers=-1 do-timestamp=TRUE ！'video/x-raw-yuv,format=(fourcc)NV12,width=1280,height=720,framerate=30/1' ！队列 ！TIVidenc1 codecName=h264enc engineName=codecServer byteStream=false genTimeStamps=true ！队列 ！多路复用器。alsasrc num-buffers=-1 typefind=TRUE do-timestamp=TRUE ！音频/x-raw-int，宽度=16 ！队列 ！TIAudenc1 codecName=aaclcenc engineName=codecServer genTimeStamps=true name=aenc！队列 ！多路复用器。avimux 名称=多路复用器！文件接收器位置=vidaudtest.avi 同步=true

结果是我得到了一个 .avi 文件，但是当我使用 Totem Movie Player 在 PC 上播放该文件时，视频播放速度过快，而音频则以正常速度播放。例如，在一个 5 分钟的文件中，视频在 40 秒内播放完毕。

此外，在录制时，我收到以下几条消息：

```
WARNING: from element /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0: Can't record audio fast enough
Additional debug info:
gstbaseaudiosrc.c(822): gst_base_audio_src_create (): /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0:
Dropped 33516 samples. This is most likely because downstream can't keep up and is consuming samples too slowly. 
```

有没有其他人看到过这种行为？有什么想法或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:06:58.227

我想问题是您的设备无法以您要求的速率传送帧。一个可能的解决方案是通过一个`videorate`元素运行它来“重新采样”您的视频流：

```
v4l2src ! 'video/x-raw-yuv,format=(fourcc)NV12,width=1280,height=720' ! videorate force-fps=30  ! ... 
```

**更新**：或者这样的东西也可以工作：

```
... ! 'video/x-raw-yuv,format=(fourcc)NV12,width=1280,height=720' ! videorate ! 'video/x-raw-yuv,framerate=(fraction)30/1' ! ... 
```

# javascript - 在 WordPress 帖子中为所有图像设置样式

> ID：13020292
> 
> 赞同：0
> 
> 时间：2012-10-22T21:37:38.270
> 
> 标签：javascript, html, css, wordpress, google-maps-api-3

我正在创建一个包含谷歌地图的 WordPress 帖子。帖子中每张图片的主题都有样式，将宽度设置为 540 像素。这是通过挤压它们来破坏控件。我需要找到一种方法来改变这篇文章的风格。

* * *

我通过使用 JavaScript 创建样式表来设置帖子的样式，并将正确的值设置为覆盖图像的重要性。这有效，但它使它将最大宽度应用于所有图像。

```
<script>
//used to override the default max width style. If this is remove the control image will be squished into the default max-width set in the clf

var sheet = document.createElement('style')
sheet.innerHTML = "img {max-width:1029px !important;}";
document.body.appendChild(sheet);

</script> 
```

我添加了带有自定义字段的样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:54:37.753

有两种方法。

更合适的方法是使用外部样式表。如果您查看您的帖子，然后在您选择的开发工具中检查它，您会看到您的帖子内容将被包装在一个包含帖子 id 作为 html id 的 div 中：

```
<div id="post-153484" ... ></div> 
```

因此，您可以在外部样式表中有一个样式，例如：

```
#post-153484 img {max-width:1029px !important;} 
```

或者可以工作的快速而肮脏的方式，但可能不是最好的做事方式，就是在帖子的正文中包含样式。在 wordpress 中编辑帖子时，将视图更改为 html 模式。

然后在那里添加一些样式：

```
<style>
    img {max-width:1029px !important;}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:52:26.603

有一个插件可以让你为每个帖子添加样式：[http ://wordpress.org/extend/plugins/per-post-scripts-and-styles/](http://wordpress.org/extend/plugins/per-post-scripts-and-styles/)

# java - Java：计算返回错误答案？

> ID：13020297
> 
> 赞同：7
> 
> 时间：2012-10-22T21:38:06.710
> 
> 标签：java

> **可能的重复：**
> [在java中使用双精度保持精度](https://stackoverflow.com/questions/322749/retain-precision-with-doubles-in-java)
> [将小数位移动到双精度](https://stackoverflow.com/questions/4937402/moving-decimal-places-over-in-a-double)

例如，像这样简单的事情：

```
public class WrongAnswer {
  public static void main(String[] args) {
    System.out.println(100*1.1);
  }
} 
```

打印 110.00000000000001 而不是 110。使用其他数字而不是 100*1.1 也会给出很多数字，最后是一些不正确的随机数字..

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T21:40:40.517

浮点表示法的准确度有限。这是一个指南： http: [//floating-point-gui.de/](http://floating-point-gui.de/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T21:41:36.107

大多数浮点计算都涉及舍入误差。在您的情况下，有两个舍入错误：将（十进制）1.1 转换为浮点（在 IEEE 754 浮点中没有 1.1 的精确表示 - 这是 Java 使用的），然后乘以 100。请参阅优秀文章[What Every计算机科学家应该了解浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)以获取更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T21:40:05.700

in`100*1.1`是`1.1`不合格的，所以默认情况下是`double`while`100`是默认情况下`int`。
所以乘法的结果也是`double`由于向上转换，`100`这就是你得到这个结果的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T21:47:27.557

正如所回答的那样，它变成了双倍因此格式。要打印`closest int/long`值，最好使用`Math.round()`函数 as ：

```
 System.out.println(Math.round(100*1.1)); 
```

当您乘以更精确的数字时，这变得很重要，例如

```
 System.out.println(Math.round(100*1.199));  //--> prints 112
    System.out.println((int)(100*1.199)); //--> prints 111 
```

# php - 可捕获的致命错误：类 mysqli_result 的对象无法转换为字符串

> ID：13020298
> 
> 赞同：2
> 
> 时间：2012-10-22T21:38:07.097
> 
> 标签：php, mysqli, fatal-error

试图获得我的第一个多表 MySQL 数据库，但我发现了一个错误，我只能绕开我的脑袋。在我把电脑扔出窗外之前，有人可以建议一种方法吗？

## **设置**

我有两张桌子：

1.  *具有以下行的*客户端：* *id、tourbk_id、tourstart、roomtype1、client_name**
**   *tourprices*包含以下行：*id、tour_id、tourstart、roomtype、roomprice**

 *## **目标**

我打算在*客户*表中查看客户希望购买的旅行的以下查询，比较客户表中的旅行日期+旅行名称+房间类型*，*并回显价格。

## **我的*fubar*查询**

```
 $tourquery = "SELECT t.roomprice 
         FROM clients c, tourprices t 
         WHERE c.roomtype1 = t.roomtype 
         AND c.tourstart = t.tourstart
         AND c.tourbk_id = t.tour_id"; 
$tourresult = $db->query($tourquery); 

echo '<strong>',"Per room amount:  ",'</strong>'.$tourresult. "";

$tourresult->free(); 
```

按原样，结果只是一个错误说明：

> 可捕获的致命错误：类 mysqli_result 的对象无法转换为字符串*

# objective-c - 我们可以确定 iCloud 文件包中发生了什么变化吗？

> ID：13020304
> 
> 赞同：3
> 
> 时间：2012-10-22T21:38:33.780
> 
> 标签：objective-c, ios, icloud, uidocument, nsfilewrapper

我正在尝试使用支持 iCloud 的 UIDocument 和基于目录的 NSFileWrapper（又名文件包）来维护复杂的应用程序状态。在我的应用程序中，用户可以有许多不同的配置（有点像为每个潜在驾驶员提供座位设置的汽车）。

对于每个单独的状态，我将一个常规文件 NSFileWrapper 添加到整个文件包中。

将我的 UIDocument 写入/读取云的工作正常。当文件包更改时，我也会收到通知。

问题是我无法从通知中找出子文件（即状态）的哪些添加或更改导致包更改。

我已经尝试在我的自定义 UIDocument 中覆盖presentedSubitemDidChangeAtURL，但这只会给我包的URL。我还尝试了文件包装器的 matchesContentsOfURL 方法，但这似乎不正确，因为子文件包装器没有“真实”URL。

欢迎提出意见和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:00:21.120

我最终通过根据本地存储的 NSDate 检查每个常规文件的修改日期来解决这个问题。随着 UIDocument 的更新，我会检查上次运行流程循环后更改了哪些项目。需要注意一些，以免再次处理本地更新的文件。

# oracle - 在 PL/SQL 中声明、设置和显示 var

> ID：13020306
> 
> 赞同：1
> 
> 时间：2012-10-22T21:38:43.473
> 
> 标签：oracle, plsql, oracle11g, sqlplus

我是 PL/SQL 的新手，但有很多其他 SQL 经验，包括 Oracle（只是没有那么多脚本）。我想声明一个数字（整数）变量，将其设置为行数，并将其显示在句子换行的字符串中。本练习的最终目标是拥有一个打印字符串“There are 1 rows”的 SQL*Plus 脚本。

在 Unix 上的 SQL*Plus 中，我这样做：

```
SQL> variable v_dCnt number;
SQL> select count(*) into :v_dCnt from dual;

  COUNT(*)
----------
         1

SQL> select 'There are ' || :v_dCnt || ' rows' as MESSAGE from dual;

MESSAGE 
-------------------------------------------------------
There are  rows 
```

请注意它如何显示空白`v_dCnt`而不是值 1

在 Win7 上的 Rapid SQL 中，我会

```
variable v_dCnt number;
select count(*) into :v_dCnt from dual;
select 'There are ' || :v_dCnt || ' rows' from dual; 
```

并得到 ORA-01008: not all variables bound

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:45:51.037

在 SQL*Plus 中，您很可能只需将 放在`SELECT INTO`PL/SQL 块中

```
SQL>  variable v_dCnt number;
SQL> begin
  2    select count(*)
  3      into :v_dCnt
  4      from dual;
  5  end;
  6  /

PL/SQL procedure successfully completed.

SQL> ed
Wrote file afiedt.buf

  1* select 'There are ' || :v_dCnt || ' rows' from dual
SQL> /

'THEREARE'||:V_DCNT||'ROWS'
-------------------------------------------------------
There are 1 rows 
```

# string - 如何 fmt.Printf 带有千位逗号的整数

> ID：13020308
> 
> 赞同：73
> 
> 时间：2012-10-22T21:38:54.603
> 
> 标签：string, go, formatting, printf

Go 是否`fmt.Printf`支持输出带有千位逗号的数字？

`fmt.Printf("%d", 1000)`输出`1000`，我可以指定什么格式来输出`1,000`？

[文档](http://golang.org/pkg/fmt/)似乎没有提到逗号，我无法立即在 source 中看到任何[内容](https://code.google.com/p/go/source/browse/src/pkg/fmt/)。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2017-10-18T13:33:30.283

用于使用[Unicode CLDR](http://cldr.unicode.org/)[`golang.org/x/text/message`](http://godoc.org/golang.org/x/text/message)中任何语言的本地化格式进行打印：

```
package main

import (
    "golang.org/x/text/language"
    "golang.org/x/text/message"
)

func main() {
    p := message.NewPrinter(language.English)
    p.Printf("%d\n", 1000)

    // Output:
    // 1,000
} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-10-23T00:24:24.313

我为此编写[了一个库](https://github.com/dustin/go-humanize)以及其他一些人类表示问题。

示例结果：

```
0 -> 0
100 -> 100
1000 -> 1,000
1000000000 -> 1,000,000,000
-100000 -> -100,000 
```

示例用法：

```
fmt.Printf("You owe $%s.\n", humanize.Comma(6582491)) 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-10-22T21:54:41.603

fmt 打印动词都不支持千位​​分隔符。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-06-25T09:27:43.583

**前言：**我在 中发布了这个具有更多自定义功能的实用程序[`github.com/icza/gox`](https://github.com/icza/gox)，请参阅[`fmtx.FormatInt()`](https://godoc.org/github.com/icza/gox/fmtx#FormatInt)。

* * *

该[`fmt`](https://golang.org/pkg/fmt/)软件包不支持对小数分组。

我们必须自己实现一个（或使用现有的）。

## 编码

这是一个紧凑且非常有效的解决方案（见后面的解释）：

[在Go Playground](https://play.golang.org/p/TjtIWs4E0ki)上尝试一下。

```
func Format(n int64) string {
    in := strconv.FormatInt(n, 10)
    numOfDigits := len(in)
    if n < 0 {
        numOfDigits-- // First character is the - sign (not a digit)
    }
    numOfCommas := (numOfDigits - 1) / 3

    out := make([]byte, len(in)+numOfCommas)
    if n < 0 {
        in, out[0] = in[1:], '-'
    }

    for i, j, k := len(in)-1, len(out)-1, 0; ; i, j = i-1, j-1 {
        out[j] = in[i]
        if i == 0 {
            return string(out)
        }
        if k++; k == 3 {
            j, k = j-1, 0
            out[j] = ','
        }
    }
} 
```

测试它：

```
for _, v := range []int64{0, 1, 12, 123, 1234, 123456789} {
    fmt.Printf("%10d = %12s\n", v, Format(v))
    fmt.Printf("%10d = %12s\n", -v, Format(-v))
} 
```

输出：

```
 0 =            0
         0 =            0
         1 =            1
        -1 =           -1
        12 =           12
       -12 =          -12
       123 =          123
      -123 =         -123
      1234 =        1,234
     -1234 =       -1,234
 123456789 =  123,456,789
-123456789 = -123,456,789 
```

## 解释：

基本上，该`Format()`函数所做的是它在不分组的情况下格式化数字，然后创建一个足够大的其他切片并在必要时复制插入逗号 ( `','`) 分组符号的数字的数字（如果有更多数字，则在 3 的数字组之后）同时取照顾要保留的负号。

**输出长度：**

它基本上是输入的长度加上要插入的分组符号的数量。分组符号数为：

```
numOfCommas = (numOfDigits - 1) / 3 
```

由于输入字符串是一个只能包含数字`'0..9'`（`'-'`记忆）。所以我们可以简单地使用字节而不是符文。所以位数是输入字符串的长度，`1`如果数字是负数，可以选择减去：

```
numOfDigits := len(in)
if n < 0 {
    numOfDigits-- // First character is the - sign (not a digit)
} 
```

因此分组符号的数量：

```
numOfCommas := (numOfDigits - 1) / 3 
```

因此输出切片将是：

```
out := make([]byte, len(in)+numOfCommas) 
```

**处理负号字符：**

如果数字是负数，我们只需对输入字符串进行切片以将其排除在处理之外，然后手动将符号位复制到输出：

```
if n < 0 {
    in, out[0] = in[1:], '-'
} 
```

因此，函数的其余部分不需要知道/关心可选的负号字符。

该函数的其余部分是一个`for`循环，它只是将数字的字节（数字）从输入字符串复制到输出，`','`如果有更多数字，则在每组 3 位数字之后插入一个分组符号 ( )。循环向下，因此更容易跟踪 3 位数字组。完成后（不再有数字），输出字节切片作为`string`.

## 变化

### 递归处理负数

如果您不太关心效率而更关心可读性，您可能会喜欢这个版本：

```
func Format2(n int64) string {
    if n < 0 {
        return "-" + Format2(-n)
    }

    in := strconv.FormatInt(n, 10)
    numOfCommas := (len(in) - 1) / 3

    out := make([]byte, len(in)+numOfCommas)

    for i, j, k := len(in)-1, len(out)-1, 0; ; i, j = i-1, j-1 {
        out[j] = in[i]
        if i == 0 {
            return string(out)
        }
        if k++; k == 3 {
            j, k = j-1, 0
            out[j] = ','
        }
    }
} 
```

基本上，这通过递归调用处理负数：如果数字为负数，则使用绝对（正）值调用自身（递归）并在结果前面加上一个`"-"`字符串。

### 带`append()`切片

这是另一个使用内置[`append()`](https://golang.org/pkg/builtin/#append)函数和切片操作的版本。有点容易理解，但在性能方面不太好：

```
func Format3(n int64) string {
    if n < 0 {
        return "-" + Format3(-n)
    }
    in := []byte(strconv.FormatInt(n, 10))

    var out []byte
    if i := len(in) % 3; i != 0 {
        if out, in = append(out, in[:i]...), in[i:]; len(in) > 0 {
            out = append(out, ',')
        }
    }
    for len(in) > 0 {
        if out, in = append(out, in[:3]...), in[3:]; len(in) > 0 {
            out = append(out, ',')
        }
    }
    return string(out)
} 
```

第一`if`条语句处理第一个可选的“不完整”组，如果存在则小于 3 位，随后的`for`循环处理其余部分，在每次迭代中复制 3 位，`','`如果有更多位，则附加一个逗号 ( ) 分组符号.

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-04-01T14:30:50.113

我在 Github 上发布了一个 Go 片段，该函数根据用户指定的千位分隔符、小数分隔符和小数精度呈现数字（float64 或 int）。

[https://gist.github.com/gorhill/5285193](https://gist.github.com/gorhill/5285193)

```
用法：s := RenderFloat(format, n)

格式参数告诉如何渲染数字 n。

给定 n = 12345.6789 的格式字符串示例：

"#,###.##" => "12,345.67"
“#,###。” => "12,345"
"#,###" => "12345,678"
"#\u202F###,##" => "12 345,67"
"#.###,###### => 12.345,678900
"" (又名默认格式) => 12,345.67

```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-11-14T21:22:34.730

这是一个函数，它接受一个整数和分组分隔符，并返回一个用指定分隔符分隔的字符串。我试图优化效率，在紧密循环中没有字符串连接或 mod/division。根据我的分析，它比我的 Mac 上的 humanize.Commas 实现（~680ns vs 1642ns）快两倍多。我是 Go 新手，希望看到更快的实现！

用法：s := NumberToString(n int, sep rune)

**例子**

说明使用不同的分隔符（',' vs ''），用 int 值范围验证。

s:= NumberToString(12345678, ',')

=> "12,345,678"

s:= NumberToString(12345678, ' ')

=> “12 345 678”

s: = NumberToString(-9223372036854775807, ',')

=> "-9,223,372,036,854,775,807"

**功能实现**

```
func NumberToString(n int, sep rune) string {

    s := strconv.Itoa(n)

    startOffset := 0
    var buff bytes.Buffer

    if n < 0 {
        startOffset = 1
        buff.WriteByte('-')
    }

    l := len(s)

    commaIndex := 3 - ((l - startOffset) % 3) 

    if (commaIndex == 3) {
        commaIndex = 0
    }

    for i := startOffset; i < l; i++ {

        if (commaIndex == 3) {
            buff.WriteRune(sep)
            commaIndex = 0
        }
        commaIndex++

        buff.WriteByte(s[i])
    }

    return buff.String()
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-08-27T21:02:34.550

这是一个使用正则表达式的简单函数：

```
import (
    "regexp"
)

func formatCommas(num int) string {
    str := fmt.Sprintf("%d", num)
    re := regexp.MustCompile("(\\d+)(\\d{3})")
    for n := ""; n != str; {
        n = str
        str = re.ReplaceAllString(str, "$1,$2")
    }
    return str
} 
```

例子：

```
fmt.Println(formatCommas(1000))
fmt.Println(formatCommas(-1000000000)) 
```

输出：

```
1,000
-1,000,000,000 
```

[https://play.golang.org/p/vnsAV23nUXv](https://play.golang.org/p/vnsAV23nUXv)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-05-02T14:12:35.583

我对早期答案中提供的解决方案的性能感兴趣，并[为它们编写了带有基准的测试](https://gist.github.com/prantlf/c70054108908516ea14327ab9a2df509)，包括我的两个代码片段。以下结果是在 MacBook 2018、i7 2.6GHz 上测得的：

```
+---------------------+-------------------------------------------+--------------+
|       Author        |                Description                |    Result    |
|---------------------|-------------------------------------------|--------------|
| myself              | dividing by 1,000 and appending groups    |  3,472 ns/op |
| myself              | inserting commas to digit groups          |  2,662 ns/op |
| @icza               | collecting digit by digit to output array |  1,695 ns/op |
| @dolmen             | copying digit groups to output array      |  1,797 ns/op |
| @Ivan Tung          | writing digit by digit to buffer          |  2,753 ns/op |
| @jchavannes         | inserting commas using a regexp           | 63,995 ns/op |
| @Steffi Keran Rani, | using github.com/dustin/go-humanize       |  3,525 ns/op |
|  @abourget, @Dustin |                                           |              |
| @dolmen             | using golang.org/x/text/message           | 12,511 ns/op |
+---------------------+-------------------------------------------+--------------+ 
```

*   如果您想要最快的解决方案，请获取[@icza 的代码片段](https://stackoverflow.com/a/31046325/623816)。虽然它是逐个数字而不是三个数字一组，但它是最快的。
*   如果您想要最短的合理代码片段，请查看[下面的我](https://stackoverflow.com/a/61560731/623816)的。它增加了最快解决方案一半以上的时间，但代码却缩短了三倍。
*   如果您想要一个单线并且不介意使用外部库，请访问[github.com/dustin/go-humanize](https://github.com/dustin/go-humanize)。它比最快的解决方案慢两倍多，但该库可能会帮助您进行其他格式设置。
*   如果您想要本地化输出，请选择[golang.org/x/text/message](https://godoc.org/golang.org/x/text/message)。它比最快的解决方案慢七倍，但匹配消费者语言的奢侈并不是免费的。

其他手动编码的解决方案也很快，您不会后悔选择其中任何一个，除了使用正则表达式。使用正则表达式需要最短的代码片段，但性能太惨了，不值得。

我对这个主题的贡献，您可以[尝试在操场上运行](https://play.golang.org/p/GKX23B20do3)：

```
func formatInt(number int) string {
    output := strconv.Itoa(number)
    startOffset := 3
    if number < 0 {
        startOffset++
    }
    for outputIndex := len(output); outputIndex > startOffset; {
        outputIndex -= 3
        output = output[:outputIndex] + "," + output[outputIndex:]
    }
    return output
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-06-12T01:20:29.750

使用[https://github.com/dustin/go-humanize](https://github.com/dustin/go-humanize) .. 它有一堆帮手来处理这些事情。除了字节，如 MiB、MB 和其他好东西。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-12-18T11:13:14.273

这绝对不是基准测试的领导者，但谁在乎代码是否清晰且性能是否不重要？

```
package main
import (
    "fmt"
)

func IntComma(i int) string {
    if (i < 0) {
        return "-" + IntComma(-i)
    }
    if (i < 1000) {
        return fmt.Sprintf("%d",i)
    }
    return IntComma(i / 1000) + "," + fmt.Sprintf("%03d",i % 1000)
}

func main() {
    fmt.Println(IntComma(1234567891234567))
} 
```

这是用于基准测试的：实现与 icza 的实现非常相似

```
func IntCommaB(num int) string {
        str := strconv.Itoa(num)
        l_str := len(str)
        digits := l_str
        if num < 0 {
                digits--
        }
        commas := (digits + 2) / 3 - 1
        l_buf := l_str + commas 
        var sbuf [32]byte // pre allocate buffer at stack rather than make([]byte,n)
        buf := sbuf[0:l_buf]
        // copy str from the end
        for s_i, b_i, c3 := l_str-1, l_buf-1, 0; ;  {
                buf[b_i] = str[s_i]
                if s_i == 0 {
                        return string(buf)
                }
                s_i--
                b_i--
                // insert comma every 3 chars
                c3++
                if c3 == 3 && (s_i > 0 || num>0)  {
                        buf[b_i] = ','
                        b_i--
                        c3 = 0
                }
    }
} 
```

输入 -1234567890123456789 比 icza 快 15%

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-09T10:06:02.040

**人性化**的包装可以创造奇迹！[请在此处](https://godoc.org/github.com/dustin/go-humanize)参考此软件包的文档。要使用这个包，首先使用像 Git SCM 这样的工具安装它。如果您使用的是 Git Bash，请打开 shell 窗口并键入：

```
go get -u github.com/dustin/go-humanize 
```

完成后，您可以使用以下解决方案代码（**例如 main.go**）：

```
package main

import (
    "fmt"
    "github.com/dustin/go-humanize"
)

func main() {
    fmt.Println(humanize.Commaf(float64(123456789)));
    fmt.Println(humanize.Commaf(float64(-1000000000)));
    fmt.Println(humanize.Commaf(float64(-100000.005)));
    fmt.Println(humanize.Commaf(float64(100000.000)));
} 
```

还有其他`Commaf`喜欢`BigComma, Comma, BigCommaf`等的变化，这取决于您输入的数据类型。

因此，在使用以下命令运行此程序时：

```
go run main.go 
```

您将看到如下**输出**：

```
123,456,789
-1,000,000,000
-100,000.005
100,000 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-08-04T09:39:42.467

你也可以使用这个小包：[https](https://github.com/floscodes/golang-thousands) ://github.com/floscodes/golang-thousands 。

只需将您的号码转换为字符串，然后使用`Separate`-function 如下：

```
n:="3478686" // your number as a string

thousands.Separate(n, "en") // adds thousands separators. the second argument sets the language mode. 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2015-06-02T15:58:00.870

如果你不想使用图书馆（无论出于何种原因），我把它搞砸了。它似乎可以工作并且可以使用任何指定的符文作为分隔符：

```
import (
    "strconv"
)

func delimitNumeral(i int, delim rune) string {

    src := strconv.Itoa(i)
    strLen := utf8.RuneCountInString(src)
    outStr := ""
    digitCount := 0
    for i := strLen - 1; i >= 0; i-- {

        outStr = src[i:i+1] + outStr
        if digitCount == 2 {
            outStr = string(delim) + outStr
            digitCount = 0
        } else {
            digitCount++
        }
    }

    return outStr
} 
```

**注意：**经过进一步测试，此功能不能完美运行。我建议使用@IvanTung 发布的解决方案，并欢迎任何可以让我完美工作的人进行任何编辑。

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2016-11-18T11:52:56.753

```
import ("fmt"; "strings")

func commas(s string) string {
    if len(s) <= 3 {
        return s
    } else {
        return commas(s[0:len(s)-3]) + "," + s[len(s)-3:]
    }
}

func toString(f float64) string {
    parts := strings.Split(fmt.Sprintf("%.2f", f), ".")
    if parts[0][0] == '-' {
        return "-" + commas(parts[0][1:]) + "." + parts[1]
    }
    return commas(parts[0]) + "." + parts[1]
} 
```

# twitter-bootstrap - Twitter Bootstrap 工具提示和弹出框不透明度和覆盖

> ID：13020310
> 
> 赞同：13
> 
> 时间：2012-10-22T21:39:09.580
> 
> 标签：twitter-bootstrap

我正在尝试决定工具提示或弹出框..或根据需要使用两者。这是问题所在。

我的网站上有一个引导式顶部固定导航栏。该站点是白色的，导航栏是深蓝色的。

使用工具提示时，它会覆盖在导航栏上，并且有点不透明，我真的不在乎。使用弹出框时，它没有不透明度，但隐藏在顶部导航栏后面。

因此，如果我想同时使用两者，我想这是一个双重问题。如何取消工具提示的不透明度并使弹出框悬停在顶部栏上。可以选择同时使用两者是理想的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-22T22:13:49.707

这两个变化都可以使用一点 CSS 来解决。我建议您不要直接修改 Twitter Bootstrap CSS，而是链接到不同的样式表。确保在包含 Bootstrap 样式表之后包含这个新样式表，以便它覆盖 Bootstrap CSS。在撰写本文时，Bootstrap 的最新版本是 2.1.1，因此所有评论都基于该假设。

**对于工具提示**

工具提示的效果在第 5003 行的 .tooltip.in 规则中定义如下：

```
.tooltip.in {
  opacity: 0.8;
  filter: alpha(opacity=80);
} 
```

要删除效果，请在新样式表中插入以下内容：

```
.tooltip.in {
  opacity: 1;
  filter: alpha(opacity=100);
} 
```

**对于弹出框**

在 Web 上，由于 z-index 较低，一个对象被放置在另一个对象之下。popover的z-index在5080行定义如下：

```
.popover {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1010;
  ...
} 
```

然而，在这个版本的 Bootstrap 中，默认（静态）导航栏没有明确的 z-index 设置，所以它默认为 0。既然是这种情况，弹出框应该已经在导航栏上方。如果您使用的是旧版本的 Bootstrap，您可以通过查找导航栏的 z-index 并将弹出框的 z-index 设置为更高的数字来解决此问题。您可以通过将以下代码添加到新样式表中来做到这一点：

```
.popover {
  z-index: ###;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:48:51.500

这取决于您使用的引导程序版本，但不透明度将在*`bootstrap.css`*文件中设置。（我在看v2.0.1）

我可以在*`bootstrap.css`*文件中看到的唯一不透明度设置在第 2963 行：

```
.tooltip.in {
  opacity: 0.8;
  filter: alpha(opacity=80);
} 
```

因此，您可以将不透明度值更改为更适合的值。

至于在导航栏下方浮动，这将是由于它`z-index`相对于导航栏。弹出框的`z-index`2857 行设置：

```
.modal-open .popover {
  z-index: 2060;
} 
```

因此，您可以将其更改为`z-index`高于用于静态导航栏的值。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-30T15:30:36.720

您可以使用此 CSS 覆盖默认设置

```
.tooltip.show {
    opacity: 1 !important;
} 
```

# flash - 如何让孩子跟随父母？

> ID：13020312
> 
> 赞同：0
> 
> 时间：2012-10-22T21:39:54.170
> 
> 标签：flash, actionscript-2, flash-cs5, flash-cs4, flash-cs3

我会尽力解释我的问题，也许我的方法甚至不是这样做的方法，但这里是：

我的任务是重建一个培训辅助设备，让铁路教练可以使用假铁路并根据讨论构建场景。教练从一个只有轨道的铁路场开始，没有汽车或机车。这是一个屏幕截图：

![在此处输入图像描述](../Images/dc90f648a7cdf304986083c1424e1405.png)

讲师将在该地图下方有几个对象，他/她可以将这些对象拖放到铁路场上以说明场景，这是屏幕截图：

![在此处输入图像描述](../Images/30adb3a9240c3845c56e80a873135ace.png)

这些对象在我的库中，当 swf 首次运行时，一个对象被放置在舞台上。我已经创建了一个对象数组，它具有链接名称、x 和 y 坐标，这些坐标是我希望在附加对象时放置对象的位置。这是将项目放在舞台上的对象和循环：

总共有大约 50 项，但本例仅显示两项。

对象数组

```
var _objectArray = [{obj:{name:"detector",x:20,y:680}},{obj:{name:"locomotive",x:270,y:610}}]; 
```

附加电影循环

```
/* pulls objects from library and places on the stage */
for(var _i in _objectArray)
{
    var _name = String(_objectArray[_i].obj.name);
    var _xx   = _objectArray[_i].obj.x;
    var _yy   = _objectArray[_i].obj.y;
    this.attachMovie(_name,_name,this.getNextHighestDepth(),{_x:_xx,_y:_yy});
    this[_name].onRelease = function()
    {
        Clone(this);
    }
} 
```

当教师开始构建场景时，他/她将单击对象，并将该对象的副本放置在对象区域之外的舞台上。然后他/她可以将该副本拖放到舞台上的任何位置。在 for 循环中你可以看到我调用了这个`Clone()`函数，这里是：

克隆功能

```
var _number:Number = 0;
var _cloneArray:Array = [];
function Clone(_mc):Void
{
    var _clone = String("clone" + _number);//used to make unique clone names
    _cloneArray.push(_clone);//build array so I can remove objects from stage

    /* duplicate objects */
    _mc.duplicateMovieClip(_clone,100+_number,{y:580,_x:Stage.width/2});

    /* set press event */
    this[_clone].onPress = function()
    {
        this.swapDepths(10000);//bring to the top
        this.startDrag(false,0,0,1024,580);//drag to constraints
    }

    /* set release event */
    this[_clone].onRelease = function()
    {
        this.stopDrag();
        if(_mc._name == "loco" || _mc._name == "car")
        {
            BuildTrain(this);
        }
    }
} 
```

所有这一切都很好，但我遇到问题的地方是当教练想要“建造”一列火车时。所以我的意思是，指导员将一个机车放在舞台上，然后将一辆油罐车放在舞台上，指导员将油罐车拖到机车顶部，油罐车会在它后面卡住机车内联。当这种情况发生时，如果教官想把它拖到某个地方，油罐车现在将跟随机车。所以现在好像只有一个单元。这位教官可能想要机车后面有 20 节车厢……而且他可能想要建造不止一列火车。这是一个机车和汽车“啪”在一起的截图：

![在此处输入图像描述](../Images/2cbae8f1bac1c4ee47e6523cc86e7cbc.png)

下面是一些代码，可以让我将汽车拼接在一起，效果很好，但我的问题是在所有汽车都被捕捉后，我无法将对象作为一个单元拖动：

构建火车

```
function BuildTrain():Void
{
    for(var _i in _consistArray)
    {
        var _value = _consistArray[_i];
        var _math  = _mc.width + this[_value]._width;
        var _space = 1; // this is the space between cars
        if(eval(_mc._droptarget)._name === _value)
        {
            _mc._x = this[_value]._x + _math / 2 + _space;
            _mc._y = this[_value]._y;
        }
    }
} 
```

`Clone()`如果您想建造一列长火车，也可以将一辆车扣到机车上，然后将车扣到车上。问题出在哪里，我无法弄清楚如何在它们被折断后将它们制成一个单元。我考虑过使用父子关系构建一个数组，但我不确定。

我知道这是一篇很长的帖子，但希望一些背景知识有所帮助。

**更新**

我正在玩弄艾米在下面的想法，因为居住在父母内部的孩子只会跟随父母似乎是合乎逻辑的。我设法生了一个孩子——这还不够，我需要更多的陪伴——但我认为这是正确的道路。我想在最后一辆车上附加一辆车？这是我正在使用的代码：

```
function BuildTrain(_mc):Void
{   
    for(var _i in _consistArray)
    {       
        var _value = _consistArray[_i];
        var _math  = _mc._width + this[_value]._width;
        var _space = 2; // gap between cars
        if(eval(_mc._droptarget)._name == _value)
        {           
            this[_value].attachMovie("tank_car","consist"+_i,this.getNextHighestDepth(),{_x:_math / 2 + _space});           
        }
    }
} 
```

# java - Java 套接字，来往于发送数据？

> ID：13020313
> 
> 赞同：0
> 
> 时间：2012-10-22T21:39:56.787
> 
> 标签：java, sockets, io

好吧，我正在尝试设置一个程序，我必须从套接字接收数据，并将数据发送到套接字。我很难理解如何让套接字的客户端发送特定数据，然后让服务器端发送特定数据。这是我目前拥有的，它只是我的服务器端，因为到目前为止我真的迷失在客户端部分。

为了进一步评估，我想做如下所列，但我不知道要研究什么来编写套接字的客户端，如果有任何代码我需要在服务器端重写? ![进一步评估](../Images/e2b32f73699d27de8a73939d2a149440.png)

```
package sockets;
import java.net.*;
import java.io.*;

public class SocketMain {
    private int port = 0;
    public ServerSocket socket;
    public Socket clientSock;

    public SocketMain() {
        init();
    }

    public static void main(String[] args) {
        new SocketMain();
    }

    private void init() {
        try { 
            socket = new ServerSocket(port);
            System.out.println("Server started, bound to port: "+port);
            clientSock = socket.accept();
            File directory = new File("./Storage/");
            if (!directory.exists()) {
                directory.mkdirs();
            }
            File file = new File(directory + "/Store.dat");
            if (!file.exists()) {
                file.createNewFile();
            }
            DataInputStream in = new DataInputStream(clientSock.getInputStream());  
            FileWriter fw = new FileWriter(file);
            BufferedWriter bw = new BufferedWriter(fw);
            String line;
            while ((line = in.readLine()) != null) {
                System.out.println(line);
                bw.write(line+"\n");
                bw.flush();
                bw.close();
            }
            socket.close();
            clientSock.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T22:05:36.983

**关于你目前拥有的：**

首先映入我眼帘的是这个循环：

```
while ((line = in.readLine()) != null) {
    System.out.println(line);
    bw.write(line+"\n");
    bw.flush();
    bw.close(); // <- Problem
} 
```

每次写一行时，您都会关闭作家。现在，作为[`Writer.close()`](http://docs.oracle.com/javase/6/docs/api/java/io/Writer.html#close%28%29)国家的文件：

> 关闭流，首先刷新它。**一旦流被关闭，进一步的 write() 或 flush() 调用将导致抛出 IOException。**关闭以前关闭的流没有效果。

您应该`IOException`在第一行之后的每一行都得到 s 。但是，您的程序不会崩溃，因为您正在捕获异常。

* * *

其次，您使用`DataInputStream`从客户端读取，但使用`BufferedWriter`. [正如其文档](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html)中的前者所述：

> 数据输入流允许应用程序以与机器无关的方式**从底层输入流中读取原始 Java 数据类型。**应用程序使用数据输出流写入数据，这些数据稍后可以由数据输入流读取。

该类包括布尔、char、int 以及您能想到的任何原始数据类型的多种方法。但是对于[`DataInputStream.readLine()`-method](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html#readLine%28%29)，它明确指出：

> **已弃用**。**此方法不能正确地将字节转换为字符。** 从 JDK 1.1**开始，读取文本行的首选方法是通过 `BufferedReader.readLine()`方法。**

因此，对于读取字符串，您应该使用[`BufferedReader`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html).

* * *

**关于你还没有的：**

套接字上的通信建立在“问-答”基础上。工作流程应该是这样的：

1.  客户端打开连接
2.  服务器接受连接
3.  客户要求一些东西（使用 server-sockets `OutputStream`）
4.  服务器读取请求（使用 client-sockets `InputStream`）
5.  服务器回答（使用 client-sockets `OutputStream`）
6.  客户端读取答案（使用 server-sockets `InputStream`）
7.  如有必要，重复步骤 3-6。
8.  连接已关闭（由客户端、服务器或两者）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:46:35.497

除了：

```
DataInputStream in = new DataInputStream(clientSock.getInputStream());  
while ((line = in.readLine()) != null) { 
```

[`DataInputStream.getLine()`](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html#readLine%28%29)已弃用-您应该只使用[`BufferedReader.getLine()`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)：

> 使用 DataInputStream 类读取行的程序可以通过替换形式的代码转换为使用 BufferedReader 类：
> 
> ```
> DataInputStream d = new DataInputStream(in); 
> ```
> 
> 和：
> 
> ```
> BufferedReader d  = new BufferedReader(new InputStreamReader(in)); 
> ```

# sql - Oracle SQL：来自具有多个连接和条件的表的总和

> ID：13020316
> 
> 赞同：2
> 
> 时间：2012-10-22T21:40:05.243
> 
> 标签：sql, syntax, oracle10g

我正在尝试从单个查询中获取结果以显示数量的总和，即使未找到行也是如此。

这个查询正是我想要的：

```
select max(m.item_number), max(m.item_description), 
       max(m.uom), sum(nvl(i.qty_ordered,0))
from (((dex.ITEM_MASTER m FULL JOIN dex.order_request_items i ON m.item_number = i.item_number)  
                          FULL JOIN dex.order_request h ON h.orderid = i.orderid)
                          FULL JOIN dex.customer c ON h.customer_number = c.customer_number)
where m.item_number in ('199', '198', '11415', '11425', '11435', '1145', '766')
group by m.item_number
order by 1 
```

并返回这个

```
MAX(M.ITEM_NUMBER) MAX(M.ITEM_DESCRIPTION)     MAX(M.UOM) "SUM(NVL(I.QTY_ORDERED,0))"
11415              Bananas HALF CASE GREEN     1/2        0
11425              Bananas HALF CASE GREEN TIP 1/2        0
11435              Bananas HALF CASE RIPE      1/2        0
1145               Bananas HALF CASE           1/2        5
198                Watermelons SEEDLESS        EACH       0
199                Watermelons                 EACH       80
766                Pumpkins EACH               EACH       0 
```

这将显示没有数量的行的零就好了。当我添加缩小数据范围所需的其他条件时，就会出现问题。我需要与此查询中的附加条件相同的结果

```
select max(m.item_number), max(m.item_description), 
       max(m.uom), sum(nvl(i.qty_ordered,0))
from (((dex.ITEM_MASTER m FULL JOIN dex.order_request_items i ON m.item_number = i.item_number)  
                          FULL JOIN dex.order_request h ON h.orderid = i.orderid)
                          FULL JOIN dex.customer c ON h.customer_number = c.customer_number)                      
where m.item_number in ('199', '198', '11415', '11425', '11435', '1145', '766')
and     h.REQUEST_DELIVERY_DATE = TO_DATE('10/24/2012', 'MM/DD/YYYY')
and     c.subcontractorid is null
and     h.request_state <> 'Incomplete'
group by m.item_number
order by 1 
```

该查询虽然返回此结果。

```
MAX(M.ITEM_NUMBER) MAX(M.ITEM_DESCRIPTION)     MAX(M.UOM) "SUM(NVL(I.QTY_ORDERED,0))"
199                Watermelons                 EACH       31 
```

应该显示零的行现在消失了。使用附加条件时，是否可以显示第一个结果中的所有行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:59:09.730

尝试

```
select max(m.item_number), max(m.item_description), 
       max(m.uom), sum(nvl(i.qty_ordered,0))
from (((dex.ITEM_MASTER m FULL JOIN dex.order_request_items i ON m.item_number = i.item_number)  
                          FULL JOIN dex.order_request h ON h.orderid = i.orderid)
                          FULL JOIN dex.customer c ON h.customer_number = c.customer_number)                      
where m.item_number in ('199', '198', '11415', '11425', '11435', '1145', '766')
and     h.REQUEST_DELIVERY_DATE = TO_DATE('10/24/2012', 'MM/DD/YYYY')
and     c.subcontractorid is null
and     nvl(h.request_state,'Complete') <> 'Incomplete'
group by m.item_number
order by 1 
```

当您在 h.request_state 上添加新条件时，您必须考虑可能的 NULL 数据，添加 NVL 会有所帮助。

hth

# uitableview - iOS6 中的字符串和 UITableViewCells

> ID：13020318
> 
> 赞同：0
> 
> 时间：2012-10-22T21:40:09.353
> 
> 标签：uitableview, nsstring, ios6

我正在将应用程序从 iOS5 迁移到 iOS6。在应用程序的一部分中，用户从屏幕底部的 uitabbarviewcontroller 中选择一个选项卡，然后将它们带到 uitableview。当用户选择选项卡时，代码会调用 Web 服务并列出附加到与 CoreData 一起存储并保存在设备本身上的一段数据的最新信息。

无论如何，当我在其中时，`cellForRowAtIndexPath`我从 Web 服务响应中构造了一个字符串，并将单元格的 detailTextLabel 上的 text 属性设置为该字符串的值。

这在 iOS5 中从未引起过问题。现在当我尝试在`cellForRowAtIndexPath`方法中使用这个字符串时，编译器似乎认为我的字符串真的是`NSIndexPath`变量。

例如，如果我尝试检查字符串的长度，应用程序会崩溃，并给我留下一条消息：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSIndexPath length]: unrecognized selector sent to class 0x396cae64' 
```

同样，对于我想用该方法中的字符串做的任何其他事情。

其他几件事：

1.  它发生在模拟器和设备上。
2.  它与字符串本身无关；也就是说，它仍然在仍然安装了 iOS5 的设备上运行良好。另外，我可以将 detailTextLabel.text 设置为我用来设置字符串的值；我只是不能明确地使用字符串。

有没有其他人遇到过这个？如果是这样，您的解决方案是什么？我用谷歌搜索并没有看到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:22:16.320

尝试复制该字符串，然后使用它。

首先复制该字符串

NSString *strTemp=[[NSString stringwithformat:@"%@",yourstring]copy];

现在尝试在你想使用的地方使用 strTemp。

# security - Red5 安全提示

> ID：13020321
> 
> 赞同：3
> 
> 时间：2012-10-22T21:40:28.960
> 
> 标签：security, red5

我最近观看了一段视频，演示了一个只有存根代码的 red5 应用程序能够进行流式传输和录制。这意味着任何人都可以使用我的服务器来传输他们的内容，这是最好的情况。所以我的问题是 1。对我来说，red5 似乎没有认真对待安全性；我认为这是不正确的吗？2\. 他们是否快速发布安全更新？3\. 如果以上是肯定的，那么我应该采取哪些实施预防措施来解决这个和其他“未记录的功能”？

（主题答案很好，我只需要谷歌搜索细节）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T08:00:31.357

为了保护您的流，您可以编辑文件：red5-web.properties（在 $red5/webapps/$your-app/WEB-INF/ 中）

```
webapp.virtualHosts=*,localhost, 127.0.0.1 
```

webapp.virtualHosts 定义了允许连接到 Red5 应用程序的 IP/域。

因此，如果您的应用程序托管在 myserver.com 上，并且您只希望从 myserver.com 加载的 SWF 能够连接到您的流，那么您可以配置 red5-web.properties。

AFAIK：这里的“安全性”是每个 SWF 都会自动向 RTMP 服务器发送一个从中加载它的 IP/域。因此，出于某种动机，您可以使用 Java 或 C++ 构建一个 RTMP 客户端，以模拟来自另一个域的连接。

但是，对于简单的场景，例如保护您的流不被其他网站中的某些 FLV 播放器嵌入，这应该已经有所帮助。

也可以设置 RTMPS 的使用：http:
[//incubator.apache.org/openmeetings/RTMPSAndHTTPS.html](http://incubator.apache.org/openmeetings/RTMPSAndHTTPS.html)
但这不会阻止任何人将您的流嵌入到他的网站中。

在这里查看我的答案：
[https ://stackoverflow.com/a/13006632/1448704](https://stackoverflow.com/a/13006632/1448704)

您可以在我的其他答案中找到更多关于文档和文章的链接：
[https ://stackoverflow.com/a/13006704/1448704](https://stackoverflow.com/a/13006704/1448704)

塞巴斯蒂安

# email - 最好的方法 - 电子邮件

> ID：13020324
> 
> 赞同：0
> 
> 时间：2012-10-22T21:40:36.990
> 
> 标签：email, wordpress, html-email, email-analytics

我们使用 wordpress 插件来构建我们的时事通讯。我们编译特定的 wordpress 帖子以发送给我们的员工。编译完成后，我们会将时事通讯发送到我们的列表服务器，然后电子邮件会被批准并发送给我们的 1000 名员工。

我们想要一种跟踪电子邮件的方法，以查看有多少人阅读了它，或者哪些帖子的可读性最高。这些统计数据将帮助我们改进时事通讯以满足员工的需求。

我们使用的插件会跟踪统计信息，但是一旦电子邮件到达 listserve，它就会停止计数，只显示 1 封电子邮件。

有谁知道更好的插件或方法来跟踪我们的电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:15:28.887

如果您要在电子邮件中发送帖子的链接，请再添加一个参数..并在帖子模板加载时检查该参数..

然后将帖子 ID 存储到 db 表中（字段：post_id，visit_count）.. 然后从下次访问只需更新计数器，这样您就可以实现或跟踪电子邮件中阅读次数最多的帖子。

# wpf - 将浮动窗口返回到 AvalonDock 中的先前停靠位置

> ID：13020327
> 
> 赞同：1
> 
> 时间：2012-10-22T21:40:42.783
> 
> 标签：wpf, avalondock

据我了解，在 Avalondock 中，当您拖动 LayoutDocument 时，会自动创建一个浮动窗口，但如果您不将其停靠在新位置，则保持浮动，这就是我试图避免的。有没有办法强制浮动窗口返回到之前的状态/停靠位置而不是保持浮动？

我在 Visual Studio 2010 中使用 AvalonDock 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:49:47.913

搜索相同，发现 AvalonDock 网站上的讨论，说：

> 您可以调用其 Float() 方法浮动 LayoutContent 并使用 Dock() 或 DockAsDocument() 重新停靠它。

希望它仍然有帮助。

来自讨论：[AvalonDock - 查看讨论](https://avalondock.codeplex.com/discussions/359496)

# apache - 如何在 Fedora 上配置 Munin-2.0.x 以使用 CGI（仅）生成内容？

> ID：13020328
> 
> 赞同：7
> 
> 时间：2012-10-22T21:40:43.783
> 
> 标签：apache, apache2, fedora, fastcgi, munin

我有一个 400+ 节点的 munin-1.4.x 安装，我想升级到 munin-2.x，以利用 munin 主服务器上基于 CGI 的内容生成（html 和图形）。我已经浏览了官方的 dox ( [http://munin-monitoring.org/wiki/CgiHowto2](http://munin-monitoring.org/wiki/CgiHowto2) )，但它根本不起作用。它只涵盖了一个 VirtualHost ( [http://munin.example.com](http://munin.example.com) )，这不是我的设置，但我尝试使用它作为起点。

具体来说，我希望 & 需要[http://example.com/munin](http://example.com/munin)成为动态生成列出所有节点的 html 内容的基本 URL，并带有指向各个节点页面的链接（然后在单击时动态生成/更新） . 增加的问题是我在 Fedora(16) 上执行此操作，并且我发现的绝大多数操作指南都假设 Debian/Ubuntu（或假设通过 cron 生成非 cgi 静态内容）。

官方的 Fedora munin 软件包安装了以下内容：

*   munin 基本目录是 /var/www/html/munin
*   munin 静态内容目录是 /var/www/html/munin/static
*   munin cgi 脚本 (munin-cg-graph & munin-cg-html) 在 /var/www/html/munin/cgi

到目前为止我所做的： * 在 /etc/munin/munin.conf 中设置“html_strategy cgi”和“cgiurl_graph /munin/cgi/munin-cgi-html” * 将以下内容添加到 /etc/httpd/conf/httpd .conf：

```
# Rewrites
RewriteEngine On
Alias /static /var/www/html/munin/static
Alias /munin /var/www/html/munin
# HTML
RewriteCond %{REQUEST_URI} !^/static
RewriteCond %{REQUEST_URI} .html$ [or]
RewriteCond %{REQUEST_URI} =/
RewriteRule ^/(.*)           /var/www/html/munin/cgi/munin-cgi-html/$1 [L]
# Images
# - remove path to munin-cgi-graph, if present
RewriteRule ^/munin/cgi/munin-cgi-graph/(.*) /$1
RewriteCond %{REQUEST_URI}                 !^/static
RewriteCond %{REQUEST_URI}                 .png$
RewriteRule ^/(.*)  /var/www/html/munin/cgi/munin-cgi-graph/$1 [L]
ScriptAlias /munin/cgi/munin-cgi-graph   /var/www/html/munin/cgi/munin-cgi-graph
<Location /munin/cgi/munin-cgi-graph>
        Options +ExecCGI FollowSymLinks
        <IfModule mod_fcgid.c>
                SetHandler fcgi-script
        </IfModule>
        <IfModule !mod_fcgid.c>
                SetHandler cgi-script
        </IfModule>
</Location>
ScriptAlias /munin/cgi/munin-cgi-html   /var/www/html/munin/cgi/munin-cgi-html
<Location /munin/cgi/munin-cgi-html>
        Options +ExecCGI FollowSymLinks
        <IfModule mod_fcgid.c>
                SetHandler fcgi-script
        </IfModule>
        <IfModule !mod_fcgid.c>
                SetHandler cgi-script
        </IfModule>
</Location> 
```

但是，在完成所有这些（并重新启动 apache）之后，当我转到[http://example.com/munin](http://example.com/munin)时，我收到 404 错误，并且在 apache 错误日志中我看到：

```
File does not exist: /var/www/html/munin/cgi/munin-cgi-html/munin/index.html 
```

我希望我只是遗漏了一些明显的东西，但现在我完全不知道还有什么可能需要调整才能完成这项工作。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:30:53.077

问题是，如果您在基于“位置”的设置（而不是在虚拟主机中）中使用配置，则 RewriteRule 的标志是错误的。

根据[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)文档：

```
 L  Stop the rewriting process immediately and don't apply any more rules. 
```

但是，在您的情况下，您希望传递 /munin/cgi/munin-cgi-html 以便 ScriptAlias 实际触发。因此：

```
 PT Forces the resulting URI to be passed back to the URL mapping engine for
    processing of other URI-to-filename translators, such as Alias or Redirect 
```

如果你改变你的规则来阅读

```
RewriteRule ^/(.*)  /munin/cgi/munin-cgi-html/$1 [PT]  
....  
RewriteRule ^/(.*)  /munin/cgi/munin-cgi-graph/$1 [PT] 
```

请注意相对路径，否则 ScriptAlias 不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:12:22.540

我遇到了完全相同的问题，我挣扎了一段时间，但最终我想出了以下配置，它应该完全符合您的要求。

我的系统是 Ubuntu Server 12.10。由于某些原因，我的静态文件位于 /var/cache/munin/www，我不确定这是 Ubuntu 上的标准还是我最近从 Ubuntu 12.04 升级造成的。

```
 RewriteEngine On

    # HTML
    RewriteRule ^/munin/(.*\.html)?$ /munin/munin-cgi/munin-cgi-html/$1 [PT]

    # Images
    RewriteRule ^/munin/munin-cgi/munin-cgi-graph/(.*) /munin/$1
    RewriteCond %{REQUEST_URI} !^/static
    RewriteRule ^/munin/(.*.png)$ /munin/munin-cgi/munin-cgi-graph/$1 [L,PT]

    <Directory /var/cache/munin/www/>
            Order deny,allow
            Allow from all
    </Directory>

    # Ensure we can run (fast)cgi scripts
    ScriptAlias /munin/munin-cgi/munin-cgi-graph /usr/lib/cgi-bin/munin-cgi-graph
    <Location /munin/munin-cgi/munin-cgi-graph>
            Options +ExecCGI
            SetHandler fcgid-script
            Allow from all
    </Location>

    ScriptAlias /munin/munin-cgi/munin-cgi-html /usr/lib/cgi-bin/munin-cgi-html
    <Location /munin/munin-cgi/munin-cgi-html>
            Options +ExecCGI
            SetHandler fcgid-script
            Allow from all
    </Location> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T22:07:21.120

确保安装了 munin-cgi 和依赖项：mod_fcgid。

CentOS 7，没有特殊参数添加到位于 /etc/httpd/conf.d/munin.conf 的文件配置中。

问候。

# jquery - 根据输入字段显示隐藏 div

> ID：13020330
> 
> 赞同：0
> 
> 时间：2012-10-22T21:40:52.160
> 
> 标签：jquery, hide, show

我正在尝试只用一个问题进行简单的测验，我已经到了如果输入正确答案然后显示“正确”消息的阶段，我的问题是我还想要显示“不正确”消息如果在输入字段中键入任何其他内容，则持续 1 秒然后淡出。

我真的不知道如何让这两个功能发生，这是我到目前为止

[http://jsfiddle.net/bloodygeese/3XGGn/36/](http://jsfiddle.net/bloodygeese/3XGGn/36/)

```
 <p>What is 10 x 2 ?</p>
<div id="correct">
That's Correct!
</div>
<div id="incorrect">
Sorry, Try again!
</div>
<input type='text' id="full_day"/>
<input type='button' id="buttontest" value="clickme"/>​

$(document).ready(function(){
$("#buttontest").click(function(){

    if ($('#full_day').val() == 20) {   

        $("#correct").show("fast"); //Slide Down Effect
    } 
    else {
        $("#correct").hide("fast");    //Slide Up Effect
    }
});

});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:47:16.807

只需添加一行即可使其变得简单。在你的其他：

```
else {
     $("#incorrect").show("500").delay("1000").hide("500");
} 
```

示例：http: [//jsfiddle.net/3XGGn/39/](http://jsfiddle.net/3XGGn/39/)

**编辑：**

我看到您已经接受了答案，因此应该令人满意，但是，我现在注意到我误读了您的问题。

> [..]“不正确”消息显示 1 秒钟，然后如果在输入字段中键入任何其他内容，则淡出。

无论输入字段中是否输入任何内容，我给您的内容都会消失。我将为您提供您实际要求的代码，您可以选择要使用的代码。

```
$("#buttontest").click(function(){

    if ($('#full_day').val() == 20) {   

        $("#correct").show("fast"); //Slide Down Effect
    } 
    else {
        $("#correct").hide("fast");    //Slide Up Effect
        $("#incorrect").show("500");
    }
});
$("#full_day").change(function() {
    $("#incorrect").hide("500");
}); 
```

[示例小提琴](http://jsfiddle.net/3XGGn/41/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:45:36.077

您可以只使用一个 div 并更改 html

```
$(document).ready(function(){
    $("#buttontest").click(function(){
        var html = 'That\'s Correct!' ;
        if ($('#full_day').val() != 20) {   
            html = 'Sorry, Try again!' ;
        }
         $("#correct").html(html).show("fast"); //Slide Down Effect
    });
});​ 
```

[小提琴](http://jsfiddle.net/sushanth009/3XGGn/37/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T21:46:34.150

```
$(document).ready(function(){
$("#buttontest").click(function(){

    if ($('#full_day').val() == 20) {   

        $("#incorrect").hide("fast"); 
        $("#correct").show("fast");

    } 
    else {
        $("#correct").hide("fast");
        $("#incorrect").show("fast");
    }
});

});​ 
```

那应该可以解决您的问题，您必须在显示下一个之前隐藏 div！

# php - 如何创建一个以现有类命名的 PHP 类

> ID：13020333
> 
> 赞同：1
> 
> 时间：2012-10-22T21:40:54.077
> 
> 标签：php, list, class

我正在寻找一个名为 List 的类，看起来很简单吧？不是训练有素的眼睛！我正在使用 PHP 5.3.1，由于已经有一个名为 List 的类或关键字，我无法创建具有此名称的类。有什么建议/解决方法吗？最好是不同的命名约定以外的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:42:16.713

[列表](http://php.net/manual/en/function.list.php)是一个关键字。您不能将其用作类名。除了破解 PHP 的源代码之外，没有其他解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:44:05.340

好吧，既然`List`是关键字，这是不允许的。但是，如果它“仅”是一个全局类，则可以使用不同的命名空间：

```
<?php

namespace DigJedi;

class ArrayIterator extends \ArrayIterator
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T21:44:16.523

正如@meagar 指出的那样， List 是一个关键字，因此在这种情况下您无能为力。

但是由于您使用的是 PHP 5.3，因此当您想要定义函数或类时，可以利用[命名空间来避免代码中的命名冲突。](http://www.php.net/manual/en/language.namespaces.rationale.php)

# php - PHP 登录脚本 - 我应该尝试一下吗？

> ID：13020335
> 
> 赞同：3
> 
> 时间：2012-10-22T21:41:18.547
> 
> 标签：php, login

我开始使用 PHP，我认为编写自己的登录/注册脚本会给我一些不错的曝光率。但是，我看到的所有帖子都引用了诸如

“你不是安全专家，你不应该尝试这个”

我应该尝试吗？如果我不应该，你会推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:43:42.617

自己尝试一些东西并没有什么坏处。只要您的登录/注册代码不会给利益相关者带来风险（在财务上？），您可能会在此过程中学到一两件事有关安全性的知识。

这里有一些文档可以帮助您开始了解 appsec（应用程序安全）：

**XSS 漏洞**：[https](https://www.owasp.org/index.php/Cross-site_Scripting_(XSS) ://www.owasp.org/index.php/Cross-site_Scripting_(XSS )

**CSRF 漏洞**：[https](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF) ://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF )

**SQL 注入**：[https ://www.owasp.org/index.php/SQL_Injection](https://www.owasp.org/index.php/SQL_Injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:44:02.760

登录和注册系统可能是您可以使用会话处理做的最基本的事情，所以这绝对是一个好主意。但是，我建议只使用带有用户名（无密码）的登录名。密码是一项棘手的业务，如果您不保护它们，可能会产生严重的影响。尝试使用仅使用用户名的登录系统会更安全，然后在您了解加密后添加密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:58:02.353

“知道是不够的，我们必须申请”——李小龙

良好的安全实践只能通过在实际情况中应用来学习。

**制作安全的登录和注册页面非常简单**：

1.  获得良好的数据库表结构，例如表用户列用户名、名称、密码、电子邮件等

2.  获取用户输入

3.  如果您使用的是本机 mysql 数据库驱动程序，请清理用户输入以防止 SQL 注入。但更好的是，自学有关准备好的语句、MySQLi 或 PDO 等抽象层，使可移植性变得轻而易举。

4.  [散列](http://php.net/manual/en/function.hash.php)您的密码。永远不要以明文形式存储您的密码，但在散列之前先对密码加盐。注意，散列！=加密。哈希实际上是不可逆的（尽管理论上是可逆的，并且有些像 Crc32 一样很容易发生冲突。哈希是例如[MD5](http://php.net/manual/en/function.md5.php)，[SHA256](http://php.net/manual/en/function.hash.php)，[SHA512](http://php.net/manual/en/function.hash.php)，[Bcrypt](http://phpmaster.com/why-you-should-use-bcrypt-to-hash-stored-passwords/)按它们的强度排序。

5.  然后进行查询以存储这些值。确保用户名列设置为唯一。您不能让两个用户具有相同的用户名。

**登录期间：**

- 检查用户/密码组合的准确位置。

- 对于密码，通过您在注册期间传递原始密码的相同的盐哈希算法传递它。

- 设置[会话](http://php.net/manual/en/features.sessions.php)变量以使您能够跟踪用户并确保他们在线。

# python - 与 Python MySQLdb timedelta 搏斗

> ID：13020337
> 
> 赞同：1
> 
> 时间：2012-10-22T21:41:30.577
> 
> 标签：python, mysql, mysql-python

我正在将 PHP 程序转换为 Python。显然 MySQLdb 返回 MySQL 时间字段作为从午夜偏移的时间增量。因此，包含文字“08:00:00”（上午 8:00）的数据库字段返回为 28,800 秒。我发现其他一些帖子证实了这种行为，但找不到可以帮助我获得所需内容的代码示例。

我需要读取记录事件的日期和时间，并确定已经过去了多长时间：

```
event_date = mysql_result[0] # datetime object
event_time = mysql_result[1] # timedelta object

now = datetime.now()         # datetime object
elapsed_minutes = ???        # need integer 
```

我已经阅读了 docs.python.org 上关于 datetime 的冗长文档，但未能成功获取 datetime 和 timedelta 值，与当前时间进行比较，并将经过的分钟数（或秒数）生成为整数。

我并不是说答案不存在或在另一个堆栈溢出帖子中 - 只是我自己完全没有成功地找到并实施它。有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:52:24.820

```
In [82]: import datetime as dt
In [85]: now = dt.datetime.now()

In [129]: event_date = dt.date(2012,10,22)    
In [155]: event_date = dt.datetime(event_date.year, event_date.month, event_date.day)

In [130]: event_time = dt.timedelta(seconds = 28800)    
In [131]: event = event_date + event_time  

In [132]: elapsed = now - event
Out[132]: datetime.timedelta(0, 35008, 781476)    
In [133]: elapsed.total_seconds()
Out[133]: 35008.781476    
In [134]: elapsed.total_seconds() // 60
Out[134]: 583.0 
```

或者，在 Python2.6 中，没有该`total_seconds`方法：

```
In [149]: (elapsed.days*24*60*60+elapsed.seconds+elapsed.microseconds/1e6)//60
Out[149]: 583.0 
```

# javascript - 扩展 Jquery ajax 完整功能

> ID：13020340
> 
> 赞同：1
> 
> 时间：2012-10-22T21:41:37.760
> 
> 标签：javascript, jquery, ajax, callback

我正在使用 jQuery ajax 向服务器发出一些请求。我必须在内容加载后添加一些验证（错误处理）。最简单的方法是在`success()`回调中添加验证。但是，我需要在我已经拥有的所有实现中实现该回调。有没有办法扩展成功回调？将在其余回调代码之前调用的东西？这样，我可以在一个地方为每个成功添加验证，并在每次调用成功回调时执行。

我试过`preFilters`了，转换器，但它们不符合我的需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:28:09.300

来自[`jQuery.ajax`](http://api.jquery.com/jQuery.ajax/)：

> 从 jQuery 1.5 开始，成功设置可以接受**一个函数数组**。每个函数都会被依次调用。

所以，这样的事情应该有效

```
$.ajax(url, {
    success: [
        commonfunction,
        function(...){ /* code */ }
    ],
}); 
```

尽管您仍然需要修改*一些*代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:47:17.347

[您可以使用$.ajaxSetup()](http://api.jquery.com/jQuery.ajaxSetup/)和[$.ajaxSuccess](http://api.jquery.com/ajaxSuccess/)为 AJAX 请求设置默认值

# csv - Pandas：将时间戳和毫秒转换为 DatetimeIndex

> ID：13020346
> 
> 赞同：2
> 
> 时间：2012-10-22T21:42:20.723
> 
> 标签：csv, pandas, date-parsing

和

```
df = read_csv('data\query.csv') 
```

我正进入（状态：

```
 TIMESTAMP   MILLISECONDS    PRICE
0   15.10.2012 08:00:06     350     24.6
1   15.10.2012 08:00:06     630     24.7
2   15.10.2012 08:00:06     640     24.9
3   15.10.2012 08:00:06     650     24.5
4   15.10.2012 08:00:06     710     24.3 
```

我发现这个

```
df = read_csv('data\query.csv', parse_dates=[[0, 1]], index_col=0) 
```

将前两列连接到一个字符串，但仍未将索引识别为 DatetimeIndex

另外这个

```
Import datetime
datetime.datetime.strptime("15.10.2012 15:30:00 890", "%d.%m.%Y %H:%M:%S %f") 
```

正在做转换工作。

问题：如何在 read_csv 中一次完成转换和 DatetimeIndex？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:07:49.937

```
In [188]: from dateutil import parser

In [189]: from StringIO import StringIO

In [190]: data = """\
TIMESTAMP;MILLISECONDS;PRICE
15.10.2012 08:00:06;350;24.6
"""

In [191]: def date_parser(s):
    return parser.parse(s[:-4]).replace(microsecond=int(s[-3:])*1000)
   .....:

In [192]: df = pd.read_csv(StringIO(data), sep=';', parse_dates=[[0, 1]], date_parser=date_parser)

In [193]: df
Out[193]:
       TIMESTAMP_MILLISECONDS  PRICE
0  2012-10-15 08:00:06.350000   24.6

In [194]: df.set_index('TIMESTAMP_MILLISECONDS', inplace=True)
Out[194]:
                            PRICE
TIMESTAMP_MILLISECONDS
2012-10-15 08:00:06.350000   24.6

In [195]: df.index
Out[195]:
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-10-15 08:00:06.350000]
Length: 1, Freq: None, Timezone: None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T20:02:44.150

请考虑将转换器添加到熊猫代码： [https ://github.com/pydata/pandas/blob/master/pandas/tseries/converter.py](https://github.com/pydata/pandas/blob/master/pandas/tseries/converter.py)

另见： [https ://github.com/pydata/pandas/issues/1180](https://github.com/pydata/pandas/issues/1180)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T03:55:15.007

你试过`.to_timestamp()`吗？

```
df_trend = pd.read_csv('googletrends.csv',parse_dates=True, index_col=0)
ts_iphone = df_trend.ix['2007':'2013','iphone'].to_timestamp() 
```

[您可以在此处](https://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.to_timestamp.html)找到文档。

# javascript - HTML打开弹出窗口，无需用户点击

> ID：13020349
> 
> 赞同：0
> 
> 时间：2012-10-22T21:42:25.740
> 
> 标签：javascript, html, popup

如果弹出窗口阻止程序打开，是否有解决方案可以在网页上打开弹出窗口，并且用户不点击某些东西等链接打开。我制作聊天应用程序并在新的弹出窗口中进行私人谈话，而不是模态窗口。如果发件人打开弹出窗口并向接收者发送消息，我希望在接收者端打开带有该消息的弹出窗口。如果弹出窗口阻止程序打开（在接收器端），问题只是打开弹出窗口。

我知道，弹出窗口阻止程序的目的是阻止出现在浏览器中的烦人的广告弹出窗口，但可能存在一些黑客或类似的东西？:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:46:45.710

不，没有这样的解决方案。

您应该考虑一个选项卡式界面，其中每个私人聊天室都是界面中的一个新选项卡。您可以在界面中自由打开选项卡，因为它只是您页面的一部分，并且对用户来说更干净。

# android - GCM：为什么我的应用程序在 GCMRegistrar.checkDevice(this) 中崩溃；

> ID：13020350
> 
> 赞同：8
> 
> 时间：2012-10-22T21:42:28.533
> 
> 标签：android, eclipse, google-cloud-messaging, eclipse-juno

我有一个包含几行代码的简单应用程序，因为我试图弄清楚为什么我的真实应用程序在 GCMRegistrar.checkDevice(this) 中崩溃（如果我删除它，我的应用程序不会崩溃）。任何人都可以帮忙吗？:( :

```
public class DemoActivity extends Activity {
private String TAG = "** pushAndroidActivity **";
private TextView mDisplay;
    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       GCMRegistrar.checkDevice(this);
       GCMRegistrar.checkManifest(this);
        setContentView(R.layout.main);
        mDisplay = (TextView) findViewById(R.id.display);
        mDisplay.setText("ciao");
} 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.registrazionegcm"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" />
<permission android:name="com.example.registrazionegcm.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.example.registrazionegcm.permission.C2D_MESSAGE" />
<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" />
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".DemoActivity"
        android:label="@string/title_activity_demo" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.example.registrazionegcm" />
        </intent-filter>
    </receiver>
    <service android:name=".GCMIntentService" />
</application> 
```

我的错误：

```
10-22 21:54:21.075: E/AndroidRuntime(955): FATAL EXCEPTION: main
10-22 21:54:21.075: E/AndroidRuntime(955): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.registrazionegcm/com.example.registrazionegcm.DemoActivity}: java.lang.UnsupportedOperationException: Device does not have package com.google.android.gsf
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.os.Looper.loop(Looper.java:137)
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-22 21:54:21.075: E/AndroidRuntime(955):  at java.lang.reflect.Method.invokeNative(Native Method)
10-22 21:54:21.075: E/AndroidRuntime(955):  at java.lang.reflect.Method.invoke(Method.java:511)
10-22 21:54:21.075: E/AndroidRuntime(955):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-22 21:54:21.075: E/AndroidRuntime(955):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-22 21:54:21.075: E/AndroidRuntime(955):  at dalvik.system.NativeStart.main(Native Method)
10-22 21:54:21.075: E/AndroidRuntime(955): Caused by: java.lang.UnsupportedOperationException: Device does not have package com.google.android.gsf
10-22 21:54:21.075: E/AndroidRuntime(955):  at com.google.android.gcm.GCMRegistrar.checkDevice(GCMRegistrar.java:98)
10-22 21:54:21.075: E/AndroidRuntime(955):  at com.example.registrazionegcm.DemoActivity.onCreate(DemoActivity.java:16)
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.app.Activity.performCreate(Activity.java:5008)
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-22 21:54:21.075: E/AndroidRuntime(955):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-22 21:54:21.075: E/AndroidRuntime(955):  ... 11 more
10-22 21:54:21.085: W/ActivityManager(167):   Force finishing activity com.example.registrazionegcm/.DemoActivity
10-22 21:54:21.095: W/WindowManager(167): Failure taking screenshot for (246x410) to layer 21010
10-22 21:54:21.205: I/jdwp(265): Ignoring second debugger -- accepting and dropping
10-22 21:54:21.395: I/Choreographer(167): Skipped 40 frames!  The application may be doing too much work on its main thread.
10-22 21:54:21.615: W/ActivityManager(167): Activity pause timeout for ActivityRecord{411d90d0 com.example.registrazionegcm/.DemoActivity}
10-22 21:54:22.177: I/Choreographer(265): Skipped 120 frames!  The application may be doing too much work on its main thread.
10-22 21:54:32.339: W/ActivityManager(167): Activity destroy timeout for ActivityRecord{411d90d0 com.example.registrazionegcm/.DemoActivity} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-22T21:50:13.943

它可能在不支持 GCM 的设备上运行，因此您的调用会`GCMRegistrar.checkDevice( this );`引发异常。检查你的 logcat 以确保。

如果您在模拟器上对其进行测试，请确保您已将模拟器设置为使用 Google API。创建模拟器时，创建新的 AVD 窗口有一个“目标”框。在该框中选择“Google API”。

![使用 google api 创建模拟器](../Images/32808dea2e15c88821190c32938b860b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T09:34:33.540

**请按照以下步骤操作**

**1** . 在应用程序的库中包含**“gcm.jar”**

**2** . Android SDK Manager => Extras => 为 Android 库安装 Google Cloud Messaging（已过时）

**3** . Android SDK 管理器 => Android 4.3 (API 18) => 安装 Google API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-18T08:22:05.027

在日食

1)下载[gcm.jar](https://dl-ssl.google.com/android/repository/gcm_r03.zip)

2）构建路径-->配置构建路径-->库-->外部jar-->path_to_gcmjar

**这是最重要的一点**

3）复制gcm.jar并粘贴到项目的lib文件夹中

# java - 如何从 Java 中的 Lazy bean 中获取真实的 className

> ID：13020351
> 
> 赞同：0
> 
> 时间：2012-10-22T21:42:28.207
> 
> 标签：java, reflection, lazy-evaluation

我在 Java 反射方面做了很多工作，并且我正在使用映射来存储应用程序中每个 bean 的元数据。我使用 className 作为键，所以，问题是当请求一个 bean 的 className 时）。

```
bean.getClass().getName() 
```

我可以得到两个不同的结果，这取决于 bean 是否延迟加载（有些关系是惰性的，有些不是，但我想同时使用它们。

例如，类：

```
package com.factorit.beans;<br>
public class Task  implements java.io.Serializable { 
```

如果在正常加载的对象中调用，它会返回：

```
com.factorit.beans.Task 
```

但如果在惰性初始化对象中调用，它会返回

```
com.factorit.beans.Task$$EnhancerByCGLIB$$f9d61939 
```

我想知道是否有办法得到这个，或者我是否必须解析字符串。

非常感谢您的任何帮助或建议。

**编辑：** 只是添加一些信息：我的懒惰注释看起来像这样：

```
@javax.persistence.ManyToOne(fetch = javax.persistence.FetchType.LAZY) 
```

我正在使用 Struts 2.1.8.1、Hibernate 3 和 Spring 2.5.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:17:29.180

如果是在调试struts2-json-plugin 2.1.8.1，在方法中`JSONWritter.bean(Object object)` 我发现他们正在使用这一行

```
if (clazz.getName().indexOf("$$EnhancerByCGLIB$$") > -1) { 
```

所以，即使他们也必须解析字符串，我想没有更好的方法。感谢@TomaszNurkiewicz 的帮助。

# iphone - 我在 UITableView、cellForRowAtIndexPath 中得到重复项

> ID：13020354
> 
> 赞同：0
> 
> 时间：2012-10-22T21:42:41.013
> 
> 标签：iphone, ios, uitableview

我得到了我的数组的副本，并且在这种方法中错误地显示了单元格：

在这里，我正在初始化数组，并将其添加到 tableView：

```
NSArray *sectionsArray = [NSArray arrayWithObjects: @"Location", @"Front Post", @"Front Fixing", @"Front Footplate", @"Rear Post", @"Read Fixing", @"Rear Footplate", @"Horizontal Bracing", @"Diagonal Bracing", @"Front Beam", @"Front Lock", @"Rear Beam", @"Rear Lock", @"Guard", @"Accessories", @"Comments", @"Off load ref", @"Loc Empty", @"Loc Affected", nil];
[_tableArray setObject:sectionsArray atIndexedSubscript:2];
[_tableView reloadData]; 
```

由于某些奇怪的原因，总是有第四个对象被搞砸了，要么是重复的，要么没有来自 IB 的视图。这是 cellForRowAtIndexPath: 方法：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell;
    if (indexPath.section == 2) {
        cell = [tableView dequeueReusableCellWithIdentifier:@"EntryCell"];
        cell.tag = indexPath.row;
        UILabel *label = (UILabel *)[cell viewWithTag:3];
        [label setText:[[_tableArray objectAtIndex:2] objectAtIndex:indexPath.row]];
    }
return cell;
} 
```

我已经记录了字符串`[[_tableArray objectAtIndex:2] objectAtIndex:indexPath.row]`，它记录了正确的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:57:56.007

消除`cell.tag = indexPath.row;`

因为您正在重用单元格并分配`tag`将混淆它。例如，对于第二行，您分配 tag = 2，然后当您向下滚动时，您将 tag = 6 分配给同一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:19:28.620

添加这些行：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}
else
{

 cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
} 
```

# c# - 如何设置可以在整个应用程序中使用的枚举

> ID：13020355
> 
> 赞同：0
> 
> 时间：2012-10-22T21:42:44.680
> 
> 标签：c#, c#-4.0

我有一个枚举类如下：

```
namespace Import.DataObjects
{
    internal enum EmploymentStatus
    {
        FullTime,
        Terminated,    
    }
} 
```

截至目前，我正在调用 Main 中的一个方法来设置此枚举。问题是，当我设置完枚举并且设置它的方法结束时，枚举又是空白的。如何使用此方法在整个应用程序中保留枚举中的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:45:41.223

枚举类型的变量不会神奇地改变它们的值。这是如何使用它们的示例。

```
class Foo {
    private EmploymentStatus Status;

    void Operation() {
        this.Status = EmploymentStatus.FullTime;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:48:50.910

枚举通常是最终的。ENUM 通常用于以下情况

```
enum DAYS_OF_WEEK
{
 SUNDAY=1
 MONDAY=2
 ...
} 
```

或者

```
 enum ERROR_CODES
   {
     BAD_ACCESS = 0xBADACE55
   } 
```

有关用法示例，请参见[http://msdn.microsoft.com/en-us/library/sbbt4032(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/sbbt4032(v=vs.80).aspx)

通常不建议按照您的建议对它们进行变异。

听起来您所追求的是单例或某种静态配置对象。

# wpf - 需要在 IDE 中更新 WPF 属性

> ID：13020357
> 
> 赞同：1
> 
> 时间：2012-10-22T21:42:51.133
> 
> 标签：wpf, dependency-properties

我有一个实际问题，我需要在 WPF 可视化设计器和 Visual Studio 的属性窗口中自定义开发人员体验。

我有三个属性 AB 和 C：

1.  这三个属性中的每一个都必须出现在属性窗口中；

2.  属性 C 必须是只读的，其值必须根据属性 A 和 B 的值计算得出，属性 A 和 B 是可读写的；和

3.  如果 A 或 B 更改，则应更新 C 的值，*而无需*重新加载设计器。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:53:31.797

与自定义 Visual Studio WPF 和 Silverlight 设计器相关的所有内容都[在这里](http://archive.msdn.microsoft.com/DesignerExtensbility)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:37:02.843

在检查了文档并自己努力之后，我不得不得出结论，我想做的事情是不可能的，因为

1) 只读附加依赖属性不会出现在 Visual Studio 属性窗格中

2) 即使您尝试使用 DesignModeValueProvider 使可编辑属性的行为类似于只读属性，错误输入的值也会存储在 XAML 中。这意味着在运行时您将设置不正确的值。

# php - 使用 WHM 在 Apache 中将 PHP FreeType 版本从 2.2.1 升级到 2.4.4

> ID：13020362
> 
> 赞同：0
> 
> 时间：2012-10-22T21:43:14.570
> 
> 标签：php, apache, cpanel, whm, freetype

我已经在我的本地服务器（MAMP）上使用 GD 创建了一个 PHP 应用程序，一切正常，现在我把它放到网上它显示不同......

通过比较`phpinfo()`本地服务器和实时服务器，我可以看到唯一的区别是 FreeFont 版本（2.2.1 和 2.4.4）。我可以在专用服务器上访问 WHM，但看不到我如何更新这个版本，所以一切都恢复正常了！

我的 Apache 和 WHM 技能有限，但必须有一个半简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:47:45.923

您需要升级 FreeType 的开发库，因此下次通过 WHM EasyApache 编译 PHP 时，它会在构建 FreeType 扩展时使用来自 FreeType 的较新的 lib 文件。

在 CentOS 上，做`yum install freetype-devel`或`yum update freetype-devel`因为你可能已经安装了它。然后通过 EasyApache 重建 PHP，你应该有更新的版本。

# actionscript-3 - 使用 ENTER_FRAME 事件更新元素位置

> ID：13020364
> 
> 赞同：2
> 
> 时间：2012-10-22T21:43:27.643
> 
> 标签：actionscript-3

我在简单的打砖块游戏中更新桨位置时遇到问题，我正在使用以下侦听器做出反应：

```
paddle.addEventListener(Event.ENTER_FRAME, movePaddle) 
```

当`movePaddle()`函数在`Main`一切中定义时工作得很好，但是当我重构代码并将`movePaddle()`函数放入`Paddle`类并将侦听器更改为：

```
paddle.addEventListener(Event.ENTER_FRAME, paddle.movePaddle) 
```

结果是桨叶在所需的每一帧和其他一些值之间改变位置

下面的`movePaddle()`函数：

```
public function movePaddle(event:Event):void
{
    // DEBUG
    trace(this.x);
    trace(this.y);

    this.x = mouseX - this.width / 2;

    if(mouseX < this.width / 2)
    {
        this.x = 0;
    }

    // To much to right
    if(this.x >= stage.stageWidth - this.width)
    {
        // To much to left
        this.x = stage.stageWidth - this.width;
    }
} 
```

第二个问题：`ENTER_FRAME`就游戏优化而言，使用事件是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:19:22.050

正如 Cameron 所提到的，如果您移动`movePaddle()`到`Paddle`类本身，`mouseX`并且`mouseY`将参考 Paddle MovieClip 内的鼠标位置。也就是说，如果 Paddle 在舞台上是 50,50，而鼠标在舞台上是 100, 100，那么您将收到的鼠标坐标将为 50,50。

更安全的选择是使用`mouseX`和`mouseY`给出的值`Stage`：

```
public function movePaddle(event:Event):void
{
    if(stage != null)
    {
        x = stage.mouseX - width / 2;

        if(stage.mouseX < width / 2)
        {
            this.x = 0;
        }

        // To much to right
        if(x >= stage.stageWidth - width)
        {
            // To much to left
            x = stage.stageWidth - width;
        }
    }
} 
```

我要做的另一件事是不要在`Main`课堂上使用这一行：

```
paddle.addEventListener(Event.ENTER_FRAME, paddle.movePaddle); 
```

我会把它放在`Paddle`'s 的构造函数中，如下所示：

```
public function Paddle()
{
    addEventListener(Event.ENTER_FRAME, movePaddle);
} 
```

至于 的性能`ENTER_FRAME`，这很好，但是在结构合理的游戏中，我将有一个`ENTER_FRAME`处理程序，该处理程序循环遍历游戏实体的数组，并且它们通过在每个游戏实体上调用一个方法来更新它们。

# c++ - 从静态对象的内部类调用外部类虚函数

> ID：13020369
> 
> 赞同：0
> 
> 时间：2012-10-22T21:43:44.343
> 
> 标签：c++

比只用文字解释更容易展示

```
class OutterBase{
     protected:
       virtual ItemList buildDefaultItemListForCatagory1();

       class Inner{
           ItemList catagory1, catagory2;
           public: 
               void Inner(){ _initOnce(); }
           private:
               void _initOnce(){ 
                    /* want to be able call the virtual buildDefaultItemListForCatagory1 */
               }
       }

     typedef Singleton<Inner> InnerClassType; //has static getInstance method to get Inner object
}

class OutterDerived: public OutterBase{
   virtual ItemList buildDefaultItemListForCatagory1();
} 
```

所以这就是现在的情况。我希望能够在 Inner::_initOnce 函数中调用虚拟 buildDefaultItemListForCatagory1 。有没有办法做到这一点。

如果不可能，那么我需要重新设计它。我只想在 OutterBase 中有一个 Inner 类的实例，并将它提供给任何派生类。我还需要根据虚拟 buildDefault* 函数构建它。如果上述无法实现，有人可以提出替代的好解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:50:45.007

你可以。

嵌套（内部）类是具有普通成员所有访问权限的成员，因此可以访问其外部类的受保护成员和私有成员。

问题是：在哪个对象上调用它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:53:12.790

您可以将外部对象传递给内部类构造函数并执行以下操作：

```
class OutterBase{
     protected:
       virtual ItemList buildDefaultItemListForCatagory1();

       class Inner{
           ItemList catagory1, catagory2;
           OutterBase *outter;
           public: 
               Inner(OutterBase *_outter){ outter=_outter;_initOnce(); }
           private:
               void _initOnce(){ 
                    outter->buildDefaultItemListForCatagory1();
               }
       }

     typedef Singleton<Inner> InnerClassType; //has static getInstance method to get Inner object
} 
```

# google-chrome - Fancybox Popup 未删除 Chrome 和 IE 中的覆盖

> ID：13020370
> 
> 赞同：0
> 
> 时间：2012-10-22T21:43:45.770
> 
> 标签：google-chrome, internet-explorer-8, fancybox-2

[http://www.teachhub.com/sevcik-tester-ooyala](http://www.teachhub.com/sevcik-tester-ooyala)

Fancybox 关闭事件不会删除 Chrome 和 IE 中的深色覆盖。火狐很好用。我正在使用fancybox 2。下面注释掉的项目，我尝试强制关闭事件，但它不起作用。主窗口关闭，但黑色覆盖仍然存在。

```
<script type="text/javascript">
jQuery(document).ready(function() {
jQuery.noConflict();
});
</script>
<div style="width: 312px;">

<script type="text/javascript">

jQuery(document).ready(function(){

   jQuery("a.videolink").fancybox({

  closeClick  : true,
  helpers   : { 
  overlay : {closeClick: true}
 },

      'afterClose': function () {
      videoPlayer.pause();
      //jQuery("#fancybox-wrap").hide();
      //jQuery("#fancybox-wrap").empty();
//jQuery("#fancybox-overlay").hide();
//jQuery("#fancybox-overlay").empty();
     //jQuery('#fancybox-overlay').unbind();
      }
   });
});
</script>
<script src='http://player.ooyala.com/v3/apikey'></script>

<p style="font-weight: bold; color: red; font-size: 18px; line-height: 21px; margin-bottom: 10px; margin-left: 10px;">Welcome to TeachHUB.com</p>

<!-- The Video Thumbnail -->
<a class="videolink" href="#videocontainer" title="">
<img src="/sites/default/files/homepage-video-player.jpg" style="float: left; padding: 0px 15px 15px 10px;"/>
</a>

<!-- The Video Object -->
<div id="videocontainer">
        <div id='playerwrapper' style='width:480px;height:360px;'></div>

<script>
var videoPlayer = OO.Player.create('playerwrapper','R0ZjB2NTqDw3YRWba9RIpRnF6D9lRYKP',   {
   // additional params go here
});

videoPlayer.play();
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:20:36.423

在 Chrome 中关闭 fancybox 后，它会触发 1500 多个 js 错误......这很可能是一个循环。

尝试加载 jQuery 的单个实例（最好是最新版本）......到目前为止，我发现了 3 个不同的版本（v1.7.2、v1.4.4 和 v1.3.1）。

# c - 带有 Strcat 的 C 指针

> ID：13020371
> 
> 赞同：0
> 
> 时间：2012-10-22T21:43:55.897
> 
> 标签：c, string, pointers, char

我正在尝试 strcat char *. 不过，我注意到了一个问题。

```
struct d{
    struct d* up   //parent
    char *path     //path to d
    char *name     //path + breadth = name
}

for(j=0; j<b;j++){
    struct d* breadth_p;
    breadth_p=malloc(sizeof(struct d));
    char buffer[256];
    snprintf(buffer, sizeof(buffer), "/%d", j)   //prepares buffer to have "/j"
    breadth_p->up=cur_parent;
    breath_path->path=cur_parent->up->name;
    breadth_name=strcat(breadth->path, buffer);
    printf("name: %s\n", breadth_p->name);
    free(breadth_p);
} 
```

所以说我将 cur_parent 名称和路径作为 root 和 b 作为 3。以下打印出来

```
root/0
root/0/1
root/0/1/2 
```

我假设我没有正确释放 width_p，所以它连接了以前的名称。

我期待的结果是

```
root/0
root/1
root/2 
```

谁能帮我弄清楚为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:47:17.160

`strcat()` **就地**修改****它的第一个参数**（将第二个参数附加到它），然后简单地返回修改后的输入缓冲区。[在此处阅读有关此行为的更多信息。](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcat.html)**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:50:36.230

要获得您所期望的，请改用`strcpy()`和它的兄弟`strncpy()`。谷歌的使用。**

# c# - 我的 Web 应用程序中的 DllImport

> ID：13020375
> 
> 赞同：0
> 
> 时间：2012-10-22T21:44:10.843
> 
> 标签：c#, dllimport

我制作了一个 Web 应用程序，它使用 a`DllImport`在我的应用程序中使用特定的打印机。打印机`DLL`在我的`System32`. 如果我将 myweb 应用程序放在我的 Web 服务器中，这将在我的服务器或客户端中`DllImport`搜索这个？`Dll`

如果答案在客户端，我该如何在客户端中进行搜索`Dll`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:45:26.607

将在服务器而不是客户端上搜索 DLL。

您还应该知道，通过 .NET 代码打印的任何内容都将在服务器端打印，因为所有 .NET 代码都在服务器端执行。

# ruby-on-rails - 如何在我的 HAML 模板中获取关系数据值

> ID：13020382
> 
> 赞同：0
> 
> 时间：2012-10-22T21:45:04.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, haml

这是我家模型的一部分。

```
class House < ActiveRecord::Base

    has_many :amenity_appartment
    has_many :amenities, :through => :amenity_appartment

    has_many :category_join_table
    has_many :categories, :through => :category_join_table

    has_one :price
end 
```

因为我们的列表中有超过 100 套房屋，所以我想添加过滤。搜索后，我找到了很好的方法。[http://www.webegg.co.uk/jquery-multiple-filter/](http://www.webegg.co.uk/jquery-multiple-filter/)

我想从 3 个过滤选项开始...价格、类别（乡村住宅、维拉等）和设施（洗碗机、啤酒等）

我只需要用我的房屋关系中的数据值填充我的模板。

例子：

```
#holderwrap
  %ul#holder.filterThis
   %li.1200.design-villa.dishwasher.barbecue.wifi 
```

（每周 1200 欧元 - 设计别墅，配有洗碗机、烧烤和无线网络等设施）

如何填写 LI 标签中的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:49:18.533

在 HAML 中，您可以在哈希中传递 html 类：

```
%li{ :class => "1200 design-villa dishwasher barbecue wifi" } 
```

您需要获取设施名称，将它们翻译成各自的 html 类（如有必要），然后加入字符串。您可能可以将这一切打包到一个`House`实例方法中：

```
def features_to_html_class
  "#{price} #{(amenities + categories).map(&:name).join(' ')}"
end 
```

在您看来：

```
%li{ :class => house.features_to_html_class } 
```

# meteor - 如何让流星客户端保持同步？（动画）

> ID：13020384
> 
> 赞同：4
> 
> 时间：2012-10-22T21:45:06.870
> 
> 标签：meteor

我正在寻找有关如何在制作动画时使客户保持同步的想法。我正在尝试使用流星构建基于浏览器的提词器。我有基本的功能，我可以设置字体大小和滚动速度，但我还没有找到一种可靠的方法来让所有客户端在滚动开始后保持同步。

到目前为止，我已经尝试了两种方法，两种方法都有效，但都不是完美的。

我的第一个想法是在服务器上运行一个间隔来更新一个包含位置的集合。这在 LAN 上运行良好，但是一旦我移动到互联网上，更新之间的滞后时间和在客户端上观察到的更新导致滚动卡顿。这是该代码的样子：

服务器：

```
if(Meteor.isServer){
    Meteor.methods({
        start_scroll: function(){
            interval = Meteor.setInterval(function() {
                var _speed = Prompter.findOne({_var:"prompter_speed"})._val;
                Prompter.update({_var:"prompter_y"}, {$inc:{_val:(-1*_speed/4)}});
            }, 30);
        }, ...
} 
```

客户：

```
if(Meteor.isClient){
    Prompter.find({_var: "prompter_y"}).observe({
        changed: function(pos){
            $("#inner_scroll").css({top: pos._val});
        }
    });
} 
```

上述版本的主要问题是观察更新的任何延迟都会导致动画卡顿。所以，我决定在客户端做动画。这是我想出的：

服务器：

```
if(Meteor.isServer){
    Meteor.methods({
        start_move: function(){
            Prompter.update({_var:"prompter_move"},{$set:{_val:1}});
        }, ...
} 
```

客户：

```
if(Meteor.isClient){
    Prompter.find({_var: "prompter_move"}).observe({
        changed: function(obj){
            if(obj._val == 1){
                interval = Meteor.setInterval(function(){
                    var cp = parseFloat($("#inner_scroll").css("top"));
                    var sp = parseInt(Session.get("_speed"));
                    var mv = cp + (-1 * sp)/4;
                    $("#inner_scroll").css("top", mv);
                }, 30);
            }
            else{
                Meteor.clearInterval(interval);
            }
        }
    });
} 
```

使用此版本的客户端上的动画非常流畅，但是（由于观察“开始”更新的延迟）客户端可能不会同时启动，因此不同步。我注意到的另一个问题是，一些较慢的客户端（就 CPU 性能而言）在此版本中滚动速度较慢。

我正在为此挠头，有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T22:54:30.320

我最终使用时间戳比较来保持一切同步。当服务器收到更新请求时，它会创建一个时间戳。时间戳与更新的数据一起传递，因此客户端可以将时间戳与“现在”进行比较并进行相应调整。

仍然对其他建议持开放态度，但这对我来说效果很好。

# jquery - 如何获取每个href的标题属性并将其作为跨度？

> ID：13020386
> 
> 赞同：1
> 
> 时间：2012-10-22T21:45:08.543
> 
> 标签：jquery

嗨，我正在尝试在 jQuery 中获取每个 a href 的标题属性并将其作为一个跨度并做了这样的事情：

```
$('.menu li').each(function(){
    var title = $('.menu li a').attr("title");
    $(".menu li a span").text(title);
}); 
```

每个链接也添加了不同的标题属性，但是它将第一个标题属性应用于每个跨度，我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:46:49.757

您正在选择循环内的*每个*菜单。`li`您只想影响`<li>`当前的`.menu`：

```
$('.menu li').each(function(){
  var title = $(this).find("a").attr("title");
  $(this).find("a span").text(title);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:46:19.267

您需要在with关键字中引用被迭代的匹配元素（一个`.menu li`元素） ：`each``this`

```
$(".menu li").each(function(){
    var title = $(this).find("a").attr("title");
    $(this).find("a span").text(title);
}); 
```

# javascript - jQuery 和 CSS 定位冲突

> ID：13020388
> 
> 赞同：3
> 
> 时间：2012-10-22T21:45:13.907
> 
> 标签：javascript, jquery, css

我正在为一些图像编写一个小型查看器。我遇到了麻烦，我不确定原因是什么，但我猜这是 CSS 和 jQuery 的混合。

问题是：

*   当其他人正在制作动画时，图像会稍微抽动。
*   第一次动画后，图像移动低于其原始位置

代码可能有点乱，因为我必须更改很多东西才能让小提琴正常工作。

我的 HTML 标记：

```
<html>
    <body>
        <div id="photos">
            <figure class="photo">
                <img class="photo-image" src="http://bite-dose.com/wp-content/uploads/2011/03/cute-baby-animals.jpg"/>
            </figure>
            <figure class="photo">
                <img class="photo-image" src="http://cdn.arkarthick.com/wp-content/uploads/2010/04/blissfully-cute-baby-animals-baby-squirrel-6.jpg"/>
            </figure>
            <figure class="photo">
                <img class="photo-image" src="http://1.bp.blogspot.com/_4CngMC7D0HE/TDDHJ73_qJI/AAAAAAAAALY/-8Rvz41kRnc/s1600/baby_monkey_blanket.jpg"/>
            </figure>
            <figure class="photo">
                <img class="photo-image" src="http://2.bp.blogspot.com/_sIsR_xZ02MY/S_es3PlQIrI/AAAAAAAABGQ/ud3iEaMiu4w/s1600/cute_baby_animals_T3509_seal.jpg"/>
            </figure>
            <figure class="photo">
                <img class="photo-image" src="http://xaxor.com/images/baby-animals-part3-/baby-animals-part3-12.jpg"/>
            </figure>
            <figure class="photo">
                <img class="photo-image" src="http://nrbrose.edublogs.org/files/2011/05/blissfully-cute-baby-animals-baby-elephant-11-178o61g.jpg"/>
            </figure>
        </div>
        <hr/><br/><br/>
    </body>
</html>
​ 
```

我的 CSS：

```
#photos  {
    display : block;
    position: relative;
}

.photo {
    border    : 1px solid #808080;
    box-shadow: 0 0 10px 2px rgba( 0, 0, 0, 0.5 );
    position  : absolute;
    max-height: 250px;
    max-width : 250px;
}

.photo {
    display: block;
}

.photo:hover {
            transform: rotate( 0deg ) !important;
    -webkit-transform: rotate( 0deg ) !important;
       -moz-transform: rotate( 0deg ) !important;
        -ms-transform: rotate( 0deg ) !important;
         -o-transform: rotate( 0deg ) !important;
    z-index: 1;
}

.photo-image {
    display   : block;
    max-height: 100%;
    max-width : 100%;
}

hr {
    border: 0;
    border-top: 1px dashed red;
}
​ 
```

我的 JavaScript：

```
SemiEllipse = function ( a, b, cx, cy ) {
    this.radiusA = a;
    this.radiusB = b;
    this.radiusASquared = a * a;
    this.radiusBSquared = b * b;
    this.centerX = cx || 0;
    this.centerY = cy || 0;
}

SemiEllipse.prototype = {
    getPoint: function ( x ) {
        x -= this.radiusA;
        var y = this.radiusB * Math.sqrt( 1 - ( ( x * x ) / this.radiusASquared ) );

        return { x: x + this.centerX, y: y + this.centerY };
    },

    getAngle: function ( x ) {
        var angle = Math.PI/2 - Math.atan2( this.radiusB, x );
        return angle;
    }
}

$( '#photos' ).each(function () {
    var $photogroup = $( this );
    var $photos     = $photogroup.find( '.photo' );
    var count       = $photos.length;
    var limitHeight = $photos.css( 'max-height' );
    var maxHeight   = 0;

    for ( var i = 0; i < count; ++i ) {
        var $photo = $photos.eq( i );
        var h = $photo.height();

        if ( h > maxHeight ) {
            maxHeight = h;
        }
        if ( maxHeight > limitHeight ) {
            maxHeight = limitHeight;
            break;
        }
    }

    $photogroup.height( 400 );

    var bounds = {
        w   : $photogroup.width(),
        h   : $photogroup.height(),
        padW: $photogroup.innerWidth() - $photogroup.width(), 
        padH: $photogroup.innerHeight() - $photogroup.height(), 
    }
    var halfW = bounds.w / 2;
    var scale = halfW / ( count - 1 );
    var sc = new SemiEllipse( halfW / 2, 100 );

    // PHOTO POSITIONING
    for ( var i = 0; i < count; ++i ) {
        var $photo = $photos.eq( i );
        var p     = sc.getPoint( i * scale );
        var theta = sc.getAngle( p.x ) / 10;

        $photo.css({
            'left'  : p.x + sc.radiusA,
            'bottom': p.y,
            'transform': 'rotate( ' + theta + 'rad )',
            '-webkit-transform': 'rotate( ' + theta + 'rad )',
            '-mox-transform': 'rotate( ' + theta + 'rad )',
            '-ms-transform': 'rotate( ' + theta + 'rad )',
            '-o-transform': 'rotate( ' + theta + 'rad )',
        });
    }

    // HOVER FUNCTIONS
    $photos.each(function () {
        $this = $( this );
        var y = parseFloat( $this.css('bottom') );

        $this.data('mouseOverBottom', y + 10)
        .data('mouseOutBottom',  y - 10)
        .css({
            'transition': 'all .25s ease-in-out',
            '-webkit-transition': 'all .25s ease-in-out', 
            '-moz-transition': 'all .25s ease-in-out', 
            '-o-transition': 'all .25s ease-in-out'
        });
    }).hover(function () {
        $this = $( this );
        $this.css( 'bottom', $this.data( 'mouseOverBottom' ) );
    }, function () {
        $this = $( this );
        $this.css( 'bottom', $this.data( 'mouseOutBottom' ) );
    });
}); 
```

[​http://jsfiddle.net/rNnx4/16/](http://jsfiddle.net/rNnx4/16/)

我不确定图像是否会降低，但我之前已经处理过抽搐。我已经知道这`transform: translateZ(0)`会奏效，但这似乎会扼杀我的轮换。我能想到让它工作的唯一方法是`<div>`在每个图像周围添加一个这样做的类，但我很固执，不想在`<div>`我所有的东西中添加 s。但我想如果这是唯一的方法，我会接受它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:54:53.133

您发现了两个问题：

> *   当其他人正在制作动画时，图像会稍微抽动。

这可以通过`translate3d(0,0,0)`向每个转换添加 a 来解决（在 CSS 和 JS 中）。这种“黑客”迫使浏览器在其自己的层上呈现每个 div，并在适用时添加硬件加速。它可能会影响移动设备的性能/内存。

我不确定根本原因是什么；正如 Niloct 指出的那样，只有“位于顶部”的图像才会受到影响，因此当您将鼠标悬停在大象上方时，不会有任何晃动。如果您以相反的顺序分配各个 z-index（因此仓鼠在顶部），则在将鼠标悬停在仓鼠上时没有任何晃动。

我的猜测是浏览器正在渲染任何需要重新计算的东西（照片上的阴影会出现在悬停的照片上，而`z-index`从 0->1 过渡）在一层上，并且抖动是抗锯齿的过渡中的帧被渲染。

> *   第一次动画后，图像移动低于其原始位置

您的代码中每张照片都从`bottom: 0`. 上`mouseOver`，`bottom: 10`。打开`mouseOut`, `bottom: -10`, 并且在选项卡的剩余生命周期内将保持为 -10。可以通过设置`mouseOver = 20`和来修复`mouseOut = 0`。

这两项更改都在您的小提琴上实现：http: [//jsfiddle.net/rNnx4/19/](http://jsfiddle.net/rNnx4/19/)

# spring-mvc - 尝试使用 PrimeFaces 组件获取 Spring Webflow Travel Sample

> ID：13020392
> 
> 赞同：0
> 
> 时间：2012-10-22T21:45:33.390
> 
> 标签：spring-mvc, primefaces, spring-webflow

尝试使用 PrimeFaces 组件获取 Spring Webflow Travel Sample 工作：

以下是我正在采取的步骤：

```
svn co https://src.springframework.org/svn/spring-samples/webflow-primefaces-showcase
cd webflow-primefaces-showcase
mvn package 
```

然后我必须将以下内容添加到 POM.XML

```
<dependency>
  <groupId>org.primefaces</groupId>
   <artifactId>primefaces</artifactId>
   <version>3.4.1</version>
</dependency> 
```

但现在我在第一个屏幕上得到以下信息：

```
Warning: This page calls for XML namespace http://primefaces.prime.com.tr/ui declared with prefix p but no taglibrary exists for that namespace.
Warning: This page calls for XML namespace http://primefaces.prime.com.tr/ui declared with prefix p but no taglibrary exists for that namespace.
Warning: This page calls for XML namespace http://primefaces.prime.com.tr/ui declared with prefix p but no taglibrary exists for that namespace.
Warning: This page calls for XML namespace http://primefaces.prime.com.tr/ui declared with prefix p but no taglibrary exists for that namespace.
Warning: This page calls for XML namespace http://primefaces.prime.com.tr/ui declared with prefix p but no taglibrary exists for that namespace. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:32:23.670

我找到了解决办法。我不知道它是否是最好的，但我必须改变所有

**http://primefaces.prime.com.tr/ui**

至

**http://primefaces.org/ui"**

# java - 下载网站源码。安卓

> ID：13020400
> 
> 赞同：1
> 
> 时间：2012-10-22T21:45:53.977
> 
> 标签：java, android, networking

我尝试在 Android 中下载网站源时遇到问题。

```
EditText textbox = (EditText) findViewById(R.id.editText1);

URL link;
HttpURLConnection httpcon;
String wynik;

try
{
    link = new URL("http://stackoverflow.com/faq"); //example site

    httpcon = (HttpURLConnection) link.openConnection();
    httpcon.connect();

    InputStream inpText = null;
    inpText = link.openStream();
    byte[] bText = new byte[httpcon.getContentLength()];
    int readSize = inpText.read(bText);
    wynik = new String(bText);
    httpcon.disconnect();
    inpText.close();

    textbox.append(wynik);
}
catch(Exception e)
{
    //
} 
```

当我在 AVD 2.2 上运行此代码时，文本框包含所有网站源代码，但是当我在我的手机上使用 Android 2.3.5（或 ADV 2.3.3）运行此代码时，文本框仅包含几行。

它看起来完全像这样：

*   我的手机 = 1012 字节：

    ```
    <title>Frequently Asked Questions - Stack Overflow</title>
    <link rel="shortcut icon" href="http://cdn.sstatic.net/stackoverflow/img/favicon.ico">
    <link rel="apple-touch-icon" href="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png">
    <link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdn.sstatic.net/js/stub.js?v=8a629d6e9fb6"></script>
    <link rel="stylesheet" type="text/css" href="http://cdn.sstatic.net/stackoverflow/all.css?v=645537e2c00d">

    <script src="http://cdn.sstatic.net/Js/help.js?v=fc9fb0517db2" type="text/javascript"></script>
    <script type="text/javascript">
        StackExchange.ready(function() {
            StackExchange.help.init({ host: 'stackoverflow.com', bgColor: '#FFF', bg 
    ```

*   ADV 2.2 = 50 984 字节

我究竟做错了什么？

提前谢谢你，对不起我的英语。帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:13:35.067

[BufferedReader](https://stackoverflow.com/questions/2492076/android-reading-from-an-input-stream-efficiently?answertab=active#tab-top)会让它变得更好。我认为`InputStream`您可以读取的字节数可能有限。

# android - 输入不同的搜索后，我的列表视图保持不变

> ID：13020402
> 
> 赞同：1
> 
> 时间：2012-10-22T21:45:56.340
> 
> 标签：android, android-listview

我一直在修复一个允许用户搜索联系人的应用程序。我对列出不同联系人或位置的列表视图有疑问。如果您首先按名称搜索，然后在完成该搜索后转身按位置搜索，则列表视图中包含以前的结果。我是 Android 新手，如果有任何帮助，我将不胜感激。谢谢

我的代码在这里

[http://sdrv.ms/RY068w](http://sdrv.ms/RY068w)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:54:16.020

首先，您填充联系人。当您再次搜索时，您必须通知列表视图其内容需要更新。所以你做的和你对联系人所做的一样，但有位置，然后打电话

```
listadapter.notifySetDataChanged() 
```

告诉它重绘

# php - 使用 Curl 和 PHP 保持会话活跃

> ID：13020404
> 
> 赞同：57
> 
> 时间：2012-10-22T21:46:15.960
> 
> 标签：php, session, curl

我正在尝试连接到 API，对用户进行身份验证，然后查看用户详细信息。这是通过首先访问登录端点来完成的

```
http://api.example.com/login/<username>/<password> 
```

登录，然后执行以下操作以查看用户详细信息：

```
http://api.example.com/user/ 
```

这一切都在网络浏览器中工作。但是，一旦我尝试使用 Curl，登录就可以正常工作，但是在尝试查看用户详细信息时，我会返回 401，未经授权的错误。我相信这是因为 Curl 没有正确保存会话 cookie？有人可以指出为什么它不起作用以及如何解决它吗？我尝试过搜索堆栈交换，但是，我尝试过的所有解决方案都不适用于我的情况。我用来卷曲端点的代码如下所示。谢谢！

```
define("COOKIE_FILE", "cookie.txt");

// Login the user
$ch = curl_init('http://api.example.com/login/joe/smith');
curl_setopt ($ch, CURLOPT_COOKIEJAR, COOKIE_FILE); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
echo curl_exec ($ch);

// Read the session saved in the cookie file
echo "<br/><br/>";
$file = fopen("cookie.txt", 'r');
echo fread($file, 100000000);   
echo "<br/><br/>";

// Get the users details
$ch = curl_init('http://api.example.com/user');
curl_setopt ($ch, CURLOPT_COOKIEJAR, COOKIE_FILE); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
echo curl_exec ($ch); 
```

此代码将输出：

```
HTTP/1.1 200 OK Date: Mon, 22 Oct 2012 21:23:57 GMT Server: LiteSpeed Connection: close X-Powered-By: PHP/5.3.14 Set-Cookie: cfapi=f481129c9616b8f69cc36afe16466545; path=/ Expires: Thu, 19 Nov 1981 08:52:00 GMT Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0 Pragma: no-cache Content-Type: application/json X-Powered-By: CFWAPI 0.1a Content-Length: 46 {"status":200,"msg":"Successfully Logged In."}

# Netscape HTTP Cookie File # http://curl.haxx.se/rfc/cookie_spec.html # This file was generated by libcurl! Edit at your own risk. api.example.com FALSE   /   FALSE   0   cfapi 94f63b07ccf7e34358c1c922341c020f 

HTTP/1.1 401 Unauthorized Date: Mon, 22 Oct 2012 21:23:57 GMT Server: LiteSpeed Connection: close X-Powered-By: PHP/5.3.14 Set-Cookie: cfapi=a8eb015a7c423dde95aa01579c4729a4; path=/ Expires: Thu, 19 Nov 1981 08:52:00 GMT Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0 Pragma: no-cache Content-Type: application/json X-Powered-By: CFWAPI 0.1a Content-Length: 49 {"status":401, "msg":"You need to login first!"} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-22T21:53:33.800

您还需要设置选项`CURLOPT_COOKIEFILE`。

该手册将其描述为

> 包含 cookie 数据的文件的名称。cookie 文件可以是 Netscape 格式，或者只是转储到文件中的普通 HTTP 样式的标头。如果名称为空字符串，则不加载任何 cookie，但仍启用 cookie 处理。

由于您使用的是 cookie jar，因此您最终会在请求完成时保存 cookie，但由于`CURLOPT_COOKIEFILE`没有给出，cURL 不会在后续请求中发送任何保存的 cookie。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-22T21:53:27.737

您已正确使用“CURLOPT_COOKIEJAR”（写作），但您还需要设置“CURLOPT_COOKIEFILE”（阅读）

```
curl_setopt ($ch, CURLOPT_COOKIEJAR, COOKIE_FILE); 
curl_setopt ($ch, CURLOPT_COOKIEFILE, COOKIE_FILE); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-03-06T07:06:38.087

这就是您使用会话进行 CURL 的方式

```
//initial request with login data

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.example.com/login.php');
curl_setopt($ch, CURLOPT_USERAGENT,'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/32.0.1700.107 Chrome/32.0.1700.107 Safari/537.36');
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, "username=XXXXX&password=XXXXX");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie-name');  //could be empty, but cause problems on some hosts
curl_setopt($ch, CURLOPT_COOKIEFILE, '/var/www/ip4.x/file/tmp');  //could be empty, but cause problems on some hosts
$answer = curl_exec($ch);
if (curl_error($ch)) {
    echo curl_error($ch);
}

//another request preserving the session

curl_setopt($ch, CURLOPT_URL, 'http://www.example.com/profile');
curl_setopt($ch, CURLOPT_POST, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, "");
$answer = curl_exec($ch);
if (curl_error($ch)) {
    echo curl_error($ch);
} 
```

我在 ImpressPages 上看到过这个

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-10-22T21:49:52.840

是的，通常被称为“cookie jar”，谷歌应该提供很多例子：

[http://devzone.zend.com/16/php-101-part-10-a-session-in-the-cookie-jar/](http://devzone.zend.com/16/php-101-part-10-a-session-in-the-cookie-jar/)

[http://curl.haxx.se/libcurl/php/examples/cookiejar.html](http://curl.haxx.se/libcurl/php/examples/cookiejar.html) <- 恕我直言的好例子

在这里复制最后一个，这样它就不会消失......

> 登录到一个页面，然后获取另一个页面，将所有 cookie 从第一页沿 Written by Mitchell

```
<?php
/*
This script is an example of using curl in php to log into on one page and 
then get another page passing all cookies from the first page along with you.
If this script was a bit more advanced it might trick the server into 
thinking its netscape and even pass a fake referer, yo look like it surfed 
from a local page.
*/

$ch = curl_init();
curl_setopt($ch, CURLOPT_COOKIEJAR, "/tmp/cookieFileName");
curl_setopt($ch, CURLOPT_URL,"http://www.myterminal.com/checkpwd.asp");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, "UserID=username&password=passwd");

ob_start();      // prevent any output
curl_exec ($ch); // execute the curl command
ob_end_clean();  // stop preventing output

curl_close ($ch);
unset($ch);

$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_COOKIEFILE, "/tmp/cookieFileName");
curl_setopt($ch, CURLOPT_URL,"http://www.myterminal.com/list.asp");

$buf2 = curl_exec ($ch);

curl_close ($ch);

echo "<PRE>".htmlentities($buf2);
?> 
```

# sql-server-2008 - 在 T-SQL 中展平 XML 结构

> ID：13020405
> 
> 赞同：0
> 
> 时间：2012-10-22T21:46:16.010
> 
> 标签：sql-server-2008, tsql

我有以下 XML 结构

```
<?xml version="1.0" encoding="utf-8"?>
<DataItems>
    <DataItem>
        <ID>ID1</ID>
        <Metric1>Metric11Value</Metric1>
        <Metric2>Metric12Value</Metric2>
        <OptionalParameters>
           <OptionalParameter>
              <ParameterName>ParamName1</ParameterName>
              <ParameterValue>ParamValue1</ParameterValue>
              <ParameterUnits>ParamUnits1</ParameterUnits>
           <OptionalParamter> 
           <OptionalParameter>
              <ParameterName>ParamName2</ParameterName>
              <ParameterValue>ParamValue2</ParameterValue>
              <ParameterUnits>ParamUnits2</ParameterUnits>
           <OptionalParamter>
           <OptionalParameter>
              <ParameterName>ParamName3</ParameterName>
              <ParameterValue>ParamValue3</ParameterValue>
              <ParameterUnits>ParamUnits3</ParameterUnits>
           <OptionalParamter>
        </OptionalParamters>
    <DataItem>
        <ID>ID2</ID>
        <Metric1>Metric21Value</Metric1>
        <Metric2>Metric22Value</Metric2>
        <OptionalParameters>
           <OptionalParameter>
              <ParameterName>ParamName1</ParameterName>
              <ParameterValue>ParamValue1</ParameterValue>
              <ParameterUnits>ParamUnits1</ParameterUnits>
           <OptionalParamter> 
           <OptionalParameter>
              <ParameterName>ParamName2</ParameterName>
              <ParameterValue>ParamValue2</ParameterValue>
              <ParameterUnits>ParamUnits2</ParameterUnits>
           <OptionalParamter>
           <OptionalParameter>
              <ParameterName>ParamName3</ParameterName>
              <ParameterValue>ParamValue3</ParameterValue>
              <ParameterUnits>ParamUnits3</ParameterUnits>
           <OptionalParamter>
        </OptionalParamters>
    <DataItem>
</DataItems> 
```

我想以一种可以给我一个表格行的方式展平它

```
(ID, Metric1, Metric2, ParamName, ParamValue, ParamUnits) 
```

问题是我不知道如何执行我需要的动态过滤以消除在内部连接或交叉应用期间产生的无效行。所以我基本上总共有 (Number of Data Items)^2 行，其中包含参数名称、值和单位的所有排列。我想知道如何过滤掉无效的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:54:00.383

我认为你的 XML 搞砸了。您有一堆没有匹配**关闭元素的****开放**XML元素。如果你解决了这个问题，那么很容易得到你想要的扁平化输出：

 **```
declare @idoc int, @xml varchar(max) = '
<?xml version="1.0" encoding="utf-8"?>
<DataItems>
  <DataItem>
    <ID>ID1</ID>
    <Metric1>Metric11Value</Metric1>
    <Metric2>Metric12Value</Metric2>
    <OptionalParameters>
      <OptionalParameter>
        <ParameterName>ParamName1</ParameterName>
        <ParameterValue>ParamValue1</ParameterValue>
        <ParameterUnits>ParamUnits1</ParameterUnits>
      </OptionalParameter>
    </OptionalParameters>
    <OptionalParameters>
      <OptionalParameter>
        <ParameterName>ParamName2</ParameterName>
        <ParameterValue>ParamValue2</ParameterValue>
        <ParameterUnits>ParamUnits2</ParameterUnits>
      </OptionalParameter>
    </OptionalParameters>
    <OptionalParameters>
      <OptionalParameter>
        <ParameterName>ParamName3</ParameterName>
        <ParameterValue>ParamValue3</ParameterValue>
        <ParameterUnits>ParamUnits3</ParameterUnits>
      </OptionalParameter>
    </OptionalParameters>
  </DataItem>
  <DataItem>
    <ID>ID2</ID>
    <Metric1>Metric21Value</Metric1>
    <Metric2>Metric22Value</Metric2>
    <OptionalParameters>
      <OptionalParameter>
        <ParameterName>ParamName1</ParameterName>
        <ParameterValue>ParamValue1</ParameterValue>
        <ParameterUnits>ParamUnits1</ParameterUnits>
      </OptionalParameter>
    </OptionalParameters>
    <OptionalParameters>
      <OptionalParameter>
        <ParameterName>ParamName2</ParameterName>
        <ParameterValue>ParamValue2</ParameterValue>
        <ParameterUnits>ParamUnits2</ParameterUnits>
      </OptionalParameter>
    </OptionalParameters>
    <OptionalParameters>
      <OptionalParameter>
        <ParameterName>ParamName3</ParameterName>
        <ParameterValue>ParamValue3</ParameterValue>
        <ParameterUnits>ParamUnits3</ParameterUnits>
      </OptionalParameter>
    </OptionalParameters>
  </DataItem>
</DataItems>'

exec sp_xml_preparedocument @idoc output, @xml

select *
from   openxml(@idoc, '/DataItems/DataItem/OptionalParameters/OptionalParameter', 1)
with   (
          ID varchar(5) '../../ID', 
          Metric1 varchar(18) '../../Metric1', 
          Metric2 varchar(20) '../../Metric2', 
          ParamName varchar(20) 'ParameterName', 
          ParameterValue varchar(20) 'ParameterValue',
          ParameterUnits varchar(20) 'ParameterUnits'
        )

exec sp_xml_removedocument @idoc
go 
```

这会返回：

```
ID    Metric1            Metric2              ParamName            ParameterValue       ParameterUnits
----- ------------------ -------------------- -------------------- -------------------- --------------------
ID1   Metric11Value      Metric12Value        ParamName1           ParamValue1          ParamUnits1
ID1   Metric11Value      Metric12Value        ParamName2           ParamValue2          ParamUnits2
ID1   Metric11Value      Metric12Value        ParamName3           ParamValue3          ParamUnits3
ID2   Metric21Value      Metric22Value        ParamName1           ParamValue1          ParamUnits1
ID2   Metric21Value      Metric22Value        ParamName2           ParamValue2          ParamUnits2
ID2   Metric21Value      Metric22Value        ParamName3           ParamValue3          ParamUnits3 
```**

# c# - 如何获取该网页的url

> ID：13020407
> 
> 赞同：0
> 
> 时间：2012-10-22T21:46:23.360
> 
> 标签：c#

我的最终目标是为自己编写一个简单的程序。它应该定期检查 Thinkpad 在线商店，如果发现任何符合我标准的产品，它会向我发送一封电子邮件。

我做了一些研究。要获取网页的内容，我可以使用代码

```
 WebRequest request = WebRequest.Create("http://www.google.com");
    WebResponse response = request.GetResponse();
    Stream data = response.GetResponseStream();
    string html = String.Empty;
    using (StreamReader sr = new StreamReader(data))
    {
        html = sr.ReadToEnd();
    } 
```

但是对于在线商店网站，我无法获得所需页面的 url。网站网址是这样的格式

> [http://outlet.lenovo.com/SEUILibrary/controller/e/outlet_us/LenovoPortal/en_US/catalog.workflow:expandcategory?current-catalog-id=A4A41B4CA13D4754AE2FB1EBF357¤t-category-id=908B184AED4F29502E6EB3E1E76AFC13&menu-id=product#s /?page-index=1&page-size=10](http://outlet.lenovo.com/SEUILibrary/controller/e/outlet_us/LenovoPortal/en_US/catalog.workflow:expandcategory?current-catalog-id=A4A41B4CA13D4754AE2FB1EBF357&current-category-id=908B184AED4F29502E6EB3E1E76AFC13&menu-id=products&ref-id=products#/?page-index=1&page-size=10)

我过滤结果只显示新 W 系列笔记本电脑，但过滤器更改不会影响浏览器地址栏中的 url。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:00:40.923

要到达任何地方，您应该分析对联想网站的 AJAX 调用（使用 Firebug 或 Chrome 开发者工具是一个好的开始）。

在那里你看到过滤器请求被发送到

[http://outlet.lenovo.com/SEUILibrary/controller/e/outlet_us/LenovoPortal/en_US/catalog.workflow:GetCategoryFacetResults?q=1](http://outlet.lenovo.com/SEUILibrary/controller/e/outlet_us/LenovoPortal/en_US/catalog.workflow:GetCategoryFacetResults?q=1)

那么您需要`POST`一些表单数据到该 URL 以获得过滤结果（以 HTML 形式返回，您必须以某种方式对其进行解析）。

所有这一切都可以通过分析 AJAX 调用来完成。

# java - 使用 Jersey 从客户端调用 RESTFul Web 服务的问题

> ID：13020408
> 
> 赞同：3
> 
> 时间：2012-10-22T21:46:29.990
> 
> 标签：java, web-services, jersey

我正在尝试使用 Jersey 并遵循[此示例](http://www.vogella.com/articles/REST/article.html)来学习 RESTFul Web 服务。我创建了一个示例服务，可在以下位置访问：

```
 http://localhost:8080/de.vogella.jersey.first/rest/hello. 
```

我创建了一个调用此服务的客户端，但是当我运行此客户端时，出现如下异常：

```
 GET http://localhost:8080/de.vogella.jersey.first/rest/hello 
     returned a response status of 404 Not Found Exception in thread "main"  
   com.sun.jersey.api.client.UniformInterfaceException: 
     GET http://localhost:8080/de.vogella.jersey.first/rest/hello 
       returned a response status of 404 Not Found
at com.sun.jersey.api.client.WebResource.handle(WebResource.java:686)
at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:507)
at de.vogella.jersey.first.client.Test.main(Test.java:23) 
```

服务等级是

```
public class Hello {

  // This method is called if TEXT_PLAIN is request
  @GET
  @Produces(MediaType.TEXT_PLAIN)
  public String sayPlainTextHello() {
    return "Hello Jersey";
  }

  // This method is called if XML is request
  @GET
  @Produces(MediaType.TEXT_XML)
  public String sayXMLHello() {
    return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
  }

  // This method is called if HTML is request
  @GET
  @Produces(MediaType.TEXT_HTML)
  public String sayHtmlHello() {
    return "<html> " + "<title>" + "Hello Jersey" + "</title>"
        + "<body><h1>" + "Hello Jersey" + "</body></h1>" + "</html> ";
  }
} 
```

客户代码：

```
public class Test {
  public static void main(String[] args) {
    ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);
    WebResource service = client.resource(getBaseURI());
    System.out.println(service.path("rest").path("hello").accept(MediaType.TEXT_PLAIN).get(ClientResponse.class).toString());  
    System.out.println(service.path("rest").path("hello").accept(MediaType.TEXT_XML).get(String.class));        
    private static URI getBaseURI() {
    return UriBuilder.fromUri("http://localhost:8080/de.vogella.jersey.first").build();
  }
} 
```

奇怪的是，如果我击中，我可以得到正确的结果

```
 http://localhost:8080/de.vogella.jersey.first/rest/hello 
```

从浏览器。任何解决此问题的帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-16T09:50:55.783

网址：de.vogella.jersey.first/rest/hello

1) 确保您已提供 Servlet 映射以从 URL 解析“rest”

```
 <servlet>
    <servlet-name>jersey-serlvet</servlet-name>
        ...
  </servlet>
  <servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping> 
```

2）在方法上面添加`@Path("hello")`声明。

```
 @Path("hello")
  public String sayXMLHello() {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:59:51.070

根据您在服务应用程序中的要求，您在创建类之前没有提到“路径”注释，例如：

```
@Path("hello")
public class Hello {

} 
```

这只是您的服务应用程序中的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:32:25.267

如果您想以另一种方式运行该示例，而不是通过在浏览器中通过以下函数传递的整个 url，那么在此示例中我没有遇到任何问题，您将在主类中获得结果。

```
private String doGet(String url){
        ClientConfig config = new DefaultClientConfig();
        Client client = Client.create(config);
        WebResource resource = client.resource(url);
        ClientResponse response = resource.type("application/x-www-form-urlencoded").get(ClientResponse.class);
        String en = response.getEntity(String.class);
        return en;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-21T14:13:30.317

你应该使用：

```
http://localhost:8080/hello 
```

代替

```
http://localhost:8080/de.vogella.jersey.first/rest/hello 
```

用于测试目的。

# zend-framework - Magento 和 Memcached - HTTPS 错误

> ID：13020414
> 
> 赞同：1
> 
> 时间：2012-10-22T21:46:43.563
> 
> 标签：zend-framework, magento, memcached, zend-cache

我已经尝试在 magento 企业中安装使用 memcached 的快速缓存和整页缓存。第一个通过编辑 local.xml 文件，后者通过编辑 enterprise.xml 文件。

每次我更改其中一个并将其提交到站点时，HTTP 请求都会正常运行，并且数据会添加到 memcached 系统（使用 memcache-top 进行检查）但是 HTTPs 一些 HTTPS 功能似乎不起作用，例如日志记录进入管理员。特别是仪表板似乎永远无法正常工作。

这是来自 magento/var/report 的转储：

```
a:5:{i:0;s:85:"Unknown number format type 'boolean'. Format '' must be a valid number format string.";i:1;s:3529:"#0 /var/www/magento/lib/Zend/Locale/Format.php(305): Zend_Locale_Format::_checkOptions(Array)
#1 /var/www/magento/lib/Zend/Currency.php(186): Zend_Locale_Format::toNumber('133.370000', Array)
#2 /var/www/magento/app/code/core/Mage/Directory/Model/Currency.php(233): Zend_Currency->toCurrency('133.370000', Array)
#3 /var/www/magento/app/code/core/Mage/Directory/Model/Currency.php(216): Mage_Directory_Model_Currency->formatTxt('133.37000000', Array)
#4 /var/www/magento/app/code/core/Mage/Directory/Model/Currency.php(197): Mage_Directory_Model_Currency->formatPrecision('133.37000000', 2, Array, true, false)
#5 /var/www/magento/app/code/core/Mage/Adminhtml/Block/Dashboard/Bar.php(82): Mage_Directory_Model_Currency->format('133.37000000')
#6 /var/www/magento/app/code/core/Mage/Adminhtml/Block/Dashboard/Bar.php(62): Mage_Adminhtml_Block_Dashboard_Bar->format('133.37000000')
#7 /var/www/magento/app/code/core/Mage/Adminhtml/Block/Dashboard/Totals.php(74): Mage_Adminhtml_Block_Dashboard_Bar->addTotal('Revenue', '133.37000000')
#8 /var/www/magento/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Dashboard_Totals->_prepareLayout()
#9 /var/www/magento/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#10 /var/www/magento/app/code/core/Mage/Adminhtml/Block/Dashboard.php(50): Mage_Core_Model_Layout->createBlock('adminhtml/dashb...')
#11 /var/www/magento/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Dashboard->_prepareLayout()
#12 /var/www/magento/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#13 /var/www/magento/app/code/core/Mage/Core/Model/Layout.php(446): Mage_Core_Model_Layout->createBlock('adminhtml/dashb...', 'dashboard')
#14 /var/www/magento/app/code/core/Mage/Core/Model/Layout.php(238): Mage_Core_Model_Layout->addBlock('adminhtml/dashb...', 'dashboard')
#15 /var/www/magento/app/code/core/Mage/Core/Model/Layout.php(204): Mage_Core_Model_Layout->_generateBlock(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element))
#16 /var/www/magento/app/code/core/Mage/Core/Model/Layout.php(209): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
#17 /var/www/magento/app/code/core/Mage/Core/Controller/Varien/Action.php(345): Mage_Core_Model_Layout->generateBlocks()
#18 /var/www/magento/app/code/core/Mage/Core/Controller/Varien/Action.php(270): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#19 /var/www/magento/app/code/core/Mage/Adminhtml/Controller/Action.php(263): Mage_Core_Controller_Varien_Action->loadLayout(NULL, true, true)
#20 /var/www/magento/app/code/core/Mage/Adminhtml/controllers/DashboardController.php(40): Mage_Adminhtml_Controller_Action->loadLayout()
#21 /var/www/magento/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_Adminhtml_DashboardController->indexAction()
#22 /var/www/magento/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#23 /var/www/magento/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#24 /var/www/magento/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#25 /var/www/magento/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#26 /var/www/magento/index.php(80): Mage::run('', 'store')
#27 {main}";s:3:"url";s:102:"/index.php/admin/dashboard/index/key/<<author's_note:this_was_a_hash>>/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:5:"admin";} 
```

是否有使用 magento 打开 memcached 的特殊程序？我读过的指南没有提到任何特别的东西，但后来我看到了一些像这里的东西：http: [//www.magentocommerce.com/boards/viewthread/230185/#t386967](http://www.magentocommerce.com/boards/viewthread/230185/#t386967)

他们提到在我恢复当前的 local.xml 之后关闭所有缓存等。FWIW 后，我所做的一切都不会让网站再次恢复。转储缓存，重新启动 apache 等。我必须更改上面的代码以启动站点，然后再恢复它。

这是正常的magento行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:44:39.530

必须编辑文件 app/etc/local.xml

```
<config>
<global>
    <cache>
        <prefix>alphanumeric</prefix>
        <backend>memcached</backend><!-- apc / memcached / empty=file -->
        <memcached><!-- memcached cache backend related config -->
            <servers><!-- any number of server nodes can be included -->
                <server>
                    <host><![CDATA[127.0.0.1]]></host>
                    <port><![CDATA[11211]]></port>
                    <persistent><![CDATA[1]]></persistent>
                </server>
            </servers>
            <compression><![CDATA[0]]></compression>
            <cache_dir><![CDATA[]]></cache_dir>
            <hashed_directory_level><![CDATA[]]></hashed_directory_level>
            <hashed_directory_umask><![CDATA[]]></hashed_directory_umask>
            <file_name_prefix><![CDATA[]]></file_name_prefix>
        </memcached>
    </cache>
... 
```

`<prefix>alphanumeric</prefix>`修复此错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T12:50:00.403

或使用这个

```
<backend><![CDATA[memcache]]></backend> 
```

# java - 如何以静态和非静态方式使用枚举

> ID：13020418
> 
> 赞同：2
> 
> 时间：2012-10-22T21:46:55.730
> 
> 标签：java, android, oop, static, enums

我有 2 个活动，`ActivityA`每个活动`ActivityB`有 3 个按钮。我`ActivityA`在一台连接的设备和`ActivityB`另一台连接的设备上显示。每个按钮都可以处于 2 种状态中的 1 种状态，但这些状态需要反映在两个设备上。我正在使用具有静态方法的 util 类来接收来自两个活动的按钮按下并将其发送到服务，并在来自服务的回调时更新两个活动中按钮的状态。

现在，每个按钮从 xml 调用其对应活动中的一个函数。例如看起来像这样`Button1`：`onClick`

```
android:onClick="button1Clicked" 
```

该函数（来自其相应的活动）调用 UtilClass 中的一个函数，如下所示：

```
public void button1Clicked(View view) {
    UtilClass.button1Cliked();
} 
```

我设置了一个`enum`in ，因此我知道在服务回调时`UtilClass`要更新哪个按钮（在`ActivityA`和中）。`ActivityB`它看起来像这样：

```
public class UtilClass {

public static Button buttonPressed = WfdOperationButton.NONE;

public enum Button {
    BUTTON1, BUTTON2, BUTTON3
}

public static void button1Cliked() {
        buttonPressed = Button.BUTTON1;
        //call asynctask to tell the service button1 was pushed by passing
        //buttonPressed
}

public static void button2Cliked() {
        buttonPressed = Button.BUTTON2;
        //call asynctask to tell the service button2 was pushed by passing
        //buttonPressed
}
... 
```

我的问题是如何使用 in 中的相同`enum`功能`UtilClass`并`ActivityA`合并`ActivityB`in 中的 3 个`buttonXClicked()`功能`UtilClass`？我尝试的更改`UtilClass`如下：

```
public static void buttonCliked(Button inButton) {
        buttonPressed = inButton;
        //call asynctask to tell the service inButton was pushed by passing
        //buttonPressed
} 
```

这不起作用，因为我不能在静态函数`enum`中`ActivityA`或`ActivityB`静态函数中使用非静态来传递。但我需要枚举是非静态的，因为我需要在`UtilClass`.

我是Android新手，所以如果我做错了什么，如果你指出我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:00:51.003

您可以使用片段而不是活动，并在包含它们的活动中使用您的类的单个实例。

另一种可能的方法是使您的类成为单例并使枚举实例成为类中的简单实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:15:55.993

静态方法的这些问题可能是 OO 设计问题的证据。从快速阅读来看，听起来您在一个班级中尝试做太多事情，而且变得一团糟。一些想法：

为什么在这里将`Button`枚举定义为嵌套类？你可以将它外部化（即移动到它自己的文件），然后共享问题就消失了，假设我在这里理解你。

一般来说，如果你正在编写一个像这样的辅助类`UtilClass`（尽管我怀疑这里是否真的有必要），请考虑使所有内容都成为非静态的。

要正确存储状态，请考虑推荐的 Android 方法之一。对于像这样的简单事情，[共享首选项](http://developer.android.com/guide/topics/data/data-storage.html#pref)可能就足够了。如果您真的不想这样做，则应该使用适当引用枚举的有状态[单例对象来执行此操作。](http://en.wikipedia.org/wiki/Singleton_pattern)然后你的电话看起来像：

```
public void button1Clicked(View view) {
    ButtonState.getInstance().setState(Button.Button1);
    // call wrapper for async call to say Button1 was pressed e.g.:
    serviceClient.sendButtonState(Button.Button1);
} 
```

和

```
class ButtonState {
    private static ButtonState instance = new ButtonState();
    private Button state

    public ButtonState getInstance() {
        return instance;
    }

    public void setState(Button value) {
        state = value;
    }

    public Button getState() {
        return state;
    }
} 
```

或类似的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:16:46.953

我不确定你在一个设备中有活动 A 和在另一台设备中有活动 B 是什么意思，但我会尽我所能回答这个问题。

我猜您正在运行一个服务来处理两个活动之间的通信（可能会或可能不会在同一进程中运行），并且您正试图使状态与共享静态类保持同步。

我不使用静态变量来跟踪更改，而是这样处理它：

1.  仅使用枚举使 Util 类保持简单。

    ```
    public class UtilClass {
       public static enum Button {
          NONE, BUTTON1, BUTTON2, BUTTON3
       } 
    ```

2.  让您的每个活动处理自己的按钮按下并发送消息

    ```
    Button mClickedButton = Button.NONE;
    public void button1Clicked(View v) {
       mClickedButton = Button.BUTTON1;
       // send a message to service to tell which button was clicked
    } 
    ```

在您的服务中，您将向所有活动广播单击的按钮，并且在每个活动中，您将处理来自服务的消息以更新其按钮状态。

# sql - 基于月份的预言机计数

> ID：13020421
> 
> 赞同：2
> 
> 时间：2012-10-22T21:47:06.317
> 
> 标签：sql, oracle

我正在尝试编写 Oracle SQL。

我正在寻找类似的解决方案。请在下面找到我拥有的数据

```
start_date      end_date        customer 
01-01-2012      31-06-2012      a 
01-01-2012      31-01-2012      b  
01-02-2012      31-03-2012      c 
```

我想要那个日期期间的客户数量。我的结果应该如下所示

```
Month   : Customer Count 
JAN-12  :  2 
FEB-12  :  2 
MAR-12  :  2 
APR-12  :  1 
MAY-12  :  1 
JUN-12  :  1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:13:48.500

```
WITH TMP(monthyear,start_date,end_date,customer) AS (
  select LAST_DAY(start_date),
         CAST(ADD_MONTHS(start_date, 1) AS DATE),
         end_date,
         customer
  from data
  union all
  select LAST_DAY(start_date),
         CAST(ADD_MONTHS(start_date, 1) AS DATE),
         end_date,
         customer
  from TMP
  where LAST_DAY(end_date) >= LAST_DAY(start_date)
)
SELECT TO_CHAR(MonthYear, 'MON-YY') TheMonth,
       Count(Customer) Customers
FROM TMP
GROUP BY MonthYear
ORDER BY MonthYear; 
```

[SQLFiddle](http://www.sqlfiddle.com/#!4/28c5d/16/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:05:42.870

一种选择是在另一个查询中单独生成月份并将其加入您的数据表（请注意，我假设您希望客户 A 的结束日期为 2012 年 6 月 30 日，因为没有 6 月 31 日）。

```
SQL> ed
Wrote file afiedt.buf

  1  with mnths as(
  2    select add_months( date '2012-01-01', level - 1 ) mnth
  3      from dual
  4   connect by level <= 6 ),
  5  data as (
  6    select date '2012-01-01' start_date, date '2012-06-30' end_date, 'a' customer from dual union all
  7    select date '2012-01-01', date '2012-01-31', 'b' from dual union all
  8    select date '2012-02-01', date '2012-03-31', 'c' from dual
  9  )
 10  select mnths.mnth, count(*)
 11    from data,
 12         mnths
 13   where mnths.mnth between data.start_date and data.end_date
 14   group by mnths.mnth
 15*  order by mnths.mnth
SQL> /

MNTH        COUNT(*)
--------- ----------
01-JAN-12          2
01-FEB-12          2
01-MAR-12          2
01-APR-12          1
01-MAY-12          1
01-JUN-12          1

6 rows selected. 
```

# php - 结束会话，重定向到另一个页面

> ID：13020425
> 
> 赞同：0
> 
> 时间：2012-10-22T21:47:13.557
> 
> 标签：php, session, redirect, logout

我试图在中断会话并破坏会话变量时重定向到另一个页面。

这是我的注销代码：

```
<?php

_$SESSION['signin'] = null;

session_destroy();

header("Location: /index.php");

?> 
```

我认为这很简单，但是它只是停留在 logout.php 页面上，并没有被重定向到索引页面。

我认为他与破坏会话有关，有点像 php 中的“退出”。

不过，我该如何进行重定向呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:50:00.497

您似乎在第一行出现了一个简单的语法错误：

曾是：

`_$SESSION['signin'] = null;`

它应该是：

`$_SESSION['signin'] = null;`

**注意：**您可能有错误消息被抑制/隐藏。在开发时，您应该启用它们，您会很容易发现这个错误。

# android - Android 上的 JQueryMobile：视口调整为 Listview 中的 Textsize

> ID：13020435
> 
> 赞同：0
> 
> 时间：2012-10-22T21:47:44.010
> 
> 标签：android, listview, mobile, jquery-mobile, viewport

我的问题出现在与 JQuery Mobile 结合使用的内部 Android 浏览器上。当我重新加载当前页面时，内容会缩小以使文本适合列表视图。

**更详细：** 该代码在 iPhone、移动桌面工具和 Androids Firefox 上运行良好。然而，在内部 Android 浏览器上，我对下面的代码有这个奇怪的问题。请参阅下面的我的编辑。

**到目前为止我所尝试的：** 我在视口元标记上玩了很多。无论如何，我认为这不是问题，因为内容在我的应用程序中的每个其他站点上都显示正确。

```
<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1'>

$('meta[name=viewport]').attr('content','width='+$(window).width()+',user-scalable=no'); 
```

像这些帖子建议：

*   [JQuery 移动设备缩放](https://stackoverflow.com/questions/6448465/jquery-mobile-device-scaling)
*   [所有移动浏览器的完整网页和禁用缩放视口元标记](https://stackoverflow.com/questions/11345896/full-webpage-and-disabled-zoom-viewport-meta-tag-for-all-mobile-browsers)

**我的代码：**

```
<html>
    <head>
        <meta name="viewport" content="width=650">
        <!-- CSS and Scripts-->
    </head>
    <body>
        <!-- Page Wrapper -->
        <div data-role="page">

            <section data-role="content">
                <h2>
                   Code Sample
                </h2>

                <div class="ui-grid-solo">
                    <p style="margin-bottom: 38px;">
                        <a href="?id=a" data-ajax="false">A</a>
                        <a href="?id=b" data-ajax="false">B</a>
                        <a href="?id=c" data-ajax="false">C</a>
                    </p>

                </div>

                <!-- Dynamic content-->
                <ul data-role="listview" data-inset="false">
                    <!-- Use ?id to grab and display data (CodeBehind.vb)-->
                </ul>            

            </section>   

        </div>                 
    </body>
</html> 
```

有没有人有想法，或者确实遇到过类似的问题？

**编辑：** 我正在做一些事情，问题似乎发生在这种代码和平中：

```
<!-- Dynamic content-->
<ul data-role="listview" data-inset="false">
    <!-- Use ?id to grab and display data (CodeBehind.vb)-->
</ul> 
```

通常，listView 会替换为末尾带有“dot dot dot”的大文本项，以便它们适合屏幕。在我的情况下，它仍然会这样做，但是在缩短发生之前，文本有很多字符。结果是，一切都缩小了。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:47:42.037

由于我没有得到这个答案，我发布了我的修复：

仅在移动 Safari 浏览器上，listView 项目似乎没有缩短。现在我正在调用一个在[pageinit](http://jquerymobile.com/test/docs/api/events.html)上手动执行此操作的函数：

```
 fixListView: function () {
        var brokenAgent = "Safari";
        var currentUserAgent = navigator.userAgent;
        if (currentUserAgent.indexOf(brokenAgent) != -1) {
            var listItemList = $('.long-text');
            for (var i = 0; i < listItemList.length; i++) {
                var text = listItemList[i].innerText;
                if (text.length > 40) {
                    var newText = text.substr(0, 40);
                    listItemList[i].innerText = newText + "...";
                }
            }
        }
    } 
```

仍然对我的修复不满意，欢迎任何改进的想法！

# javascript - 向谷歌地球添加标记

> ID：13020439
> 
> 赞同：0
> 
> 时间：2012-10-22T21:48:07.307
> 
> 标签：javascript, google-maps

如何向地图添加新标记？我设法显示了地图`function startGoogleMaps()` ，但我的功能 ( `onclick()`) 不起作用。

```
function startGoogleMaps(){    
    var map = new google.maps.Map(document.getElementById('canvasMap'), {
        zoom: 5,
        center: initCenter,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });            
}

document.getElementById("testButton").onclick = function(){
    var marker = new google.maps.Marker({
      position: (37, -97),
      map: map,
      title:"Hello World!"});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:58:38.423

尝试`map`在绑定 click 事件的同一范围内定义对象：

```
var map = null;

function startGoogleMaps(){    
    map = new google.maps.Map(document.getElementById('canvasMap'), {
        zoom: 5,
        center: initCenter,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });            
}

document.getElementById("testButton").onclick = function(){
    var marker = new google.maps.Marker({
      position: (37, -97),
      map: map,
      title:"Hello World!"});
} 
```

另请注意，您需要将您的职位作为以下实例传递`google.maps.LatLng`：

```
 ...
      position: google.maps.LatLng(37, -97),
      ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:58:39.653

请记住，Javascript 使用函数范围。您需要`map`像这样全局声明：

```
var map;

function startGoogleMaps(){    
    map = new google.maps.Map(document.getElementById('canvasMap'), {
        zoom: 5,
        center: initCenter,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });            
}

document.getElementById("testButton").onclick = function(){
    var marker = new google.maps.Marker({
      position: new google.maps.LatLng(37, -97),
      map: map,
      title:"Hello World!"});
} 
```

此外，标记本身可能超出了您的地图范围，因此您可以使用`map.fitBounds`它来正确显示它：

```
document.getElementById("testButton").onclick = function(){
    var marker = new google.maps.Marker({
      position: new google.maps.LatLng(37, -97),
      map: map,
      title:"Hello World!"});

    var latlngbounds = new google.maps.LatLngBounds();
    latlngbounds.extend(new google.maps.LatLng(37, -97));
    map.fitBounds(latlngbounds);
} 
```

# django - 从 done 方法重新启动 FormWizard

> ID：13020449
> 
> 赞同：0
> 
> 时间：2012-10-22T21:48:42.183
> 
> 标签：django, django-formwizard

`done`我正在尝试使用 FormWizard 在向导方法中提交订单“收费” 。扩展文档中的示例，执行信用卡“收费”`done`意味着您无法返回并重新提示信用卡，因为向导在调用该方法`self.storage.reset()` *后执行。*`done`

什么是正确的方法？确认表单`clean()`步骤被多次调用以进行重新验证等，并且似乎从`done()`所有经过验证的表单都可用的地方删除了。

感谢您的任何指示。

肯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:52:17.447

我可以想到这个：

*   在`done()`方法中，您将向用户收费。如果拒绝/失败，请将每个表单数据保存在会话/cookie 中。
*   从获取付款信息​​的特定步骤重新启动向导。[NamedUrlWizard](https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/#usage-of-namedurlwizardview)可能会有所帮助。
*   实现您[`get_form_intial()`](https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.get_form_initial)从会话/cookie 中返回数据以执行该步骤。

但是，我认为验证可能会失败，因为跳过的步骤没有数据。所以你可能需要做更多的事情才能通过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:18:47.283

我想答案是“你不能从这里到达那里”。我打开了一张票 #19189，但不清楚是否会添加此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T19:35:03.440

这是我的解决方案： 1\. 扩展 WizardView，修改 render_done 方法以在其中捕获异常： -[详细说明](http://vasylok.blogspot.com/2014/10/restarting-django-sessionwizard-from.html)

```
from django.contrib.formtools.wizard.views import SessionWizardView

class MySessionWizardView(SessionWizardView):

    def __init__(self, **kwargs):
        super(MySessionWizardView, self).__init__(**kwargs)
        self.has_errors = False

    class RevalidationError(Exception):
        def __init__(self, step, form, **kwargs):
            self.step = step
            self.form = form
            self.kwargs = kwargs

        def __repr__(self):
            return '%s(%s)' % (self.__class__, self.step)
        __str__ = __repr__

    def render_done(self, form, **kwargs):
        final_form_list = []
        for form_key in self.get_form_list():
            form_obj = self.get_form(step=form_key,
                data=self.storage.get_step_data(form_key),
                files=self.storage.get_step_files(form_key))
            if not form_obj.is_valid():
                return self.render_revalidation_failure(form_key, form_obj, **kwargs)
            final_form_list.append(form_obj)

        try:
            done_response = super(MySessionWizardView, self).render_done(form, **kwargs)
        except self.RevalidationError as e:
            return self.render_revalidation_failure(e.step, e.form, **e.kwargs)
        self.storage.reset()
        return done_response 
```

# c# - 从 C#/XAML Metro 应用程序使用 REST 服务？

> ID：13020450
> 
> 赞同：3
> 
> 时间：2012-10-22T21:48:44.357
> 
> 标签：c#, .net, rest, microsoft-metro

我正在学习如何在 Windows 8 中构建 C#/XAML Metro 应用程序，我想知道是否有办法使用该框架调用 RESTful 服务？我能够使用 JS/HTML5 应用程序，但我想从 C#/XAML 执行此操作。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:13:03.133

您应该能够使用[System.Net.HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)和[HttpRequestMessage](http://msdn.microsoft.com/en-us/library/hh159020%28v=vs.110%29)。

这是[在 WinRT 中使用 Json 数据的文章](http://www.bartlannoeye.be/blog/consuming-json-data-in-winrt)

基本上，它的用法如下：

```
HttpClient client = new HttpClient();
string url = "http://yourservice.com/some/resource";
HttpResponseMessage response = await client.GetAsync(url);
return response.Content.ReadAsString(); 
```

如果您需要修改请求或在执行管道期间被调用（添加诸如标头之类的内容），您可以使用[HttpMessageHandler](http://msdn.microsoft.com/en-us/library/system.net.http.httpmessagehandler.aspx)。

这是另一篇有关 WinRT 标头的相关帖子：

[在 WinRT 和 C# 中使用 HttpRequestHeaders](https://stackoverflow.com/questions/10882244/using-httprequestheaders-in-winrt-c-sharp)

# javascript - 想要在用户从 iframe 中的一个页面转到另一个页面后提取 iframe src 的值

> ID：13020454
> 
> 赞同：0
> 
> 时间：2012-10-22T21:49:09.653
> 
> 标签：javascript, jquery, html, iframe, responsive-design

我正在尝试创建一个页面，您可以在其中输入 URL 并检查所有设备上的页面响应能力。

我正在做一些额外的事情，可以在以下位置找到：[http ://dfcb.github.com/Responsivator/](http://dfcb.github.com/Responsivator/)

我想要这样的东西：

我有一个母版页，其中有 7 个 iframe 对应于每个设备的纵向和横向视图。

它可以在[http://sentimentanalysis.comeze.com/responsivator/找到](http://sentimentanalysis.comeze.com/responsivator/)

我正在尝试做什么，例如，如果 iframe 1 转到 iframe 内的页面 A 到页面 B，我也想转到其他 6 个 iframe 的页面 B。

我认为这违反了同源政策。我尝试过绘制 iframe 的 onLoad 事件，但如果 iframe 的 src 在内部发生变化，则使用 jquery 的 src`attr('src')`不会是最新值，它只会给出我在 HTML 中设置的那个 src。

我不知道该怎么做。我搜索了 SO，但我认为没有简单的方法可以做到这一点。但必须有某种方法来做到这一点。

任何人都可以建议任何指针吗？我将感激不尽。

# javascript - 如何在 timepicker js 中在浏览器中设置默认时区

> ID：13020455
> 
> 赞同：0
> 
> 时间：2012-10-22T21:49:14.777
> 
> 标签：javascript, jquery, jquery-ui-timepicker

我尝试了一切在浏览器中为 timpicker js 设置默认时区，但它不起作用。

这是我正在使用的 js：http: [//trentrichardson.com/examples/timepicker/jquery-ui-timepicker-addon.js](http://trentrichardson.com/examples/timepicker/jquery-ui-timepicker-addon.js)

它的定制选项是： [http ://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:43:40.463

你可以加

```
defaultTimezone: "+0400" 
```

其中 +0400 是您首选的默认时区，您将享受愉快的时光。

# java - Android，如何将 int 变量的名称传递给弹出窗口？

> ID：13020457
> 
> 赞同：1
> 
> 时间：2012-10-22T21:49:21.673
> 
> 标签：java, android, popupwindow

单击图像时，如何将 int 变量的名称传递给弹出窗口？我为每个图像设置了一个 int，并且我设置了很多图像。

这就是我在 PopupWindow 上的 textView 中使用 int 的方式。

```
public boolean onLongClick(View v) {
// v.setTag(v);

case R.id.hsv1iv1:
ImageView ivpopup = (ImageView) popupView.findViewById(R.id.pv1);
intcount1++;         // I would like to pass this int name to the popup window. 
break;
case R.id.hsv2iv1:
ImageView ivpopup = (ImageView) popupView.findViewById(R.id.pv1);
intcount2++;         // I would like to pass this int name to the popup window. 
break;

LayoutInflater layoutInflater 
= (LayoutInflater)getBaseContext()
.getSystemService(LAYOUT_INFLATER_SERVICE); 
View popupView = layoutInflater.inflate(R.layout.popup, null); 
final PopupWindow popupWindow = new PopupWindow(
popupView, 
LayoutParams.WRAP_CONTENT, 
LayoutParams.WRAP_CONTENT); 
popupWindow.update(0, 0, 800, 500);
ColorDrawable dw = new ColorDrawable(-005500);
popupWindow.setBackgroundDrawable(dw);
tvpwlikectr = (TextView) popupView.findViewById(R.id.liketv);

Button pwlikebtn =  (Button) popupView.findViewById(R.id.pwlikebtn);

Button btnDismiss = (Button)popupView.findViewById(R.id.cancel);

pwlikebtn.setOnClickListener(new Button.OnClickListener() {

public void onClick(View v) {

intcount1++;
tvpwlikectr.setText(Integer.toString(intcount1));  // this code doesn't work with the intcount1

}});
btnDismiss.setOnClickListener(new Button.OnClickListener(){

public void onClick(View v) {

popupWindow.dismiss();

popupWindow.setTouchable(true);
popupWindow.setFocusable(true);
popupWindow.setOutsideTouchable(true);

}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:58:59.327

你能解释一下你是如何设置每个图像的 INT 的吗？复制并粘贴有关如何为每个图像设置 INT 的代码会很有帮助，因为不清楚您为每个图像设置一个 INT 是什么意思。

另外，您对 int 变量的值或变量的名称感兴趣吗？展示你是如何设置大量图像的，每个图像都带有 int 值，这将有助于澄清你想要做什么。

**-- 看到更新后的代码后添加答案 --**

我将创建一个具有您感兴趣的名称的对象（即 intcount1）和一个 int 以保留实际值。之后，您可以使用 view.setTag 方法将每个按钮/ImaveView 与该对象相关联，并通过 view.getTag 方法获取值。这是一个例子：

```
private class MyTag {
    String mTagName;
    int mCount;
    MyTag(String tagName) {
       mTagName = tagName;
       mCount = 0;
    }
}

// in your onCreate or initializaion code somewhere
ImageView view1 = (ImageView) popupView.findViewById(R.id.hsv1iv1);
MyTag imageTag = new MyTag("intcount1");
view1.setTag(imageTag);
ImageView view2 = (ImageView) popupView.findViewById(R.id.hsv1iv1);

// this will go wherever you handle the onLongClick
public boolean onLongClick(View v) {
   Object tag = v.getTag();
   if (tag instanceof MyTag) {
      MyTag myTag = (MyTag) tag;
      myTag.mCount++;
   }
}

// I'm assuming you are setting the text from the actual clicked object
// so this will go wherever you are setting the text/handling the click
public void onClick(View v) {
    Object tag = v.getTag();
    if (tag instanceof MyTag) {
       MyTag myTag = (MyTag) tag;
       myTag.mCount++;
       tvpwlikectr.setText(myTag.mTagName);
    }
} 
```

底线是，创建一个具有名称/计数值的对象，使用 view.setTag() 函数将每个 View 与其自己的对象相关联，当需要读取值时，使用 view.getTag() 获取对象并读取 mTagName（“变量”名称）和 mCount（“变量”值）。

# java - Java游戏编程：一个对象的多个实例，以同样的方式对待？

> ID：13020458
> 
> 赞同：1
> 
> 时间：2012-10-22T21:49:34.430
> 
> 标签：java, coding-style

对不起，如果标题没有多大意义。我在 Java Eclipse 中制作了一个 Chip's Challenge 风格的游戏，其中像 Player、硬币和可推动块这样的特殊事物是一类。可推块和玩家之间的交互需要大量的碰撞检测逻辑，而且代码变得很糟糕，因为我必须对类的每个实例进行相同的逻辑检查。例如：

```
public void pb1TouchingBaddy() {

    if (pb1.getTileX() == b1.getTileX() & pb1.getTileY() == b1.getTileY()) {
        if (b1.getbUp() == 1 & pb1.getTileY() - 1 != pb2.getTileY()) {
            pb1.move(0, -1);
        } else if (b1.getbDown() == 1
                & pb1.getTileY() + 1 != pb2.getTileY()) {
            pb1.move(0, 1);
        } else if (b1.getbRight() == 1
                & pb1.getTileX() + 1 != pb2.getTileX()) {
            pb1.move(1, 0);
        } else if (b1.getbLeft() == 1
                & pb1.getTileX() - 1 != pb2.getTileX()) {
            pb1.move(-1, 0);
        }
    }

    if (pb1.getTileX() == b2.getTileX() & pb1.getTileY() == b2.getTileY()) {
        if (b2.getbUp() == 1 & pb1.getTileY() - 1 != pb2.getTileY()) {
            pb1.move(0, -1);
        } else if (b2.getbDown() == 1
                & pb1.getTileY() + 1 != pb2.getTileY()) {
            pb1.move(0, 1);
        } else if (b2.getbRight() == 1
                & pb1.getTileX() + 1 != pb2.getTileX()) {
            pb1.move(1, 0);
        } else if (b2.getbLeft() == 1
                & pb1.getTileX() - 1 != pb2.getTileX()) {
            pb1.move(-1, 0);
        }
    }

    if (pb1.getTileX() == b3.getTileX() & pb1.getTileY() == b3.getTileY()) {
        if (b3.getbUp() == 1 & pb1.getTileY() - 1 != pb2.getTileY()) {
            pb1.move(0, -1);
        } else if (b3.getbDown() == 1
                & pb1.getTileY() + 1 != pb2.getTileY()) {
            pb1.move(0, 1);
        } else if (b3.getbRight() == 1
                & pb1.getTileX() + 1 != pb2.getTileX()) {
            pb1.move(1, 0);
        } else if (b3.getbLeft() == 1
                & pb1.getTileX() - 1 != pb2.getTileX()) {
            pb1.move(-1, 0);
        }
    }

    if (pb1.getTileX() == b4.getTileX() & pb1.getTileY() == b4.getTileY()) {
        if (b4.getbUp() == 1 & pb1.getTileY() - 1 != pb2.getTileY()) {
            pb1.move(0, -1);
        } else if (b4.getbDown() == 1
                & pb1.getTileY() + 1 != pb2.getTileY()) {
            pb1.move(0, 1);
        } else if (b4.getbRight() == 1
                & pb1.getTileX() + 1 != pb2.getTileX()) {
            pb1.move(1, 0);
        } else if (b4.getbLeft() == 1
                & pb1.getTileX() - 1 != pb2.getTileX()) {
            pb1.move(-1, 0);
        }
    } 
```

所以你可以看到这三个 if 语句块都是完全相同的逻辑，只是应用于同一对象的不同实例。有什么方法可以写这个而不必重复自己这么多？我能够将四个方向的运动逻辑变成一种方法，并一度认为自己是个天才，但我不知道如何做类似的事情，但要使用同一个对象的多个实例。现在，在我太困惑并且无法为另一个块做逻辑之前，我只被两个可推动的块卡住了。不胜感激任何建议，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:53:29.667

将这些方法放在一个接口中，并使它们都实现该接口。

让你的方法只对那个接口感兴趣，而不用担心实际的具体类型可能是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:55:56.453

```
private function move(PBClass pb1, PBClass pb2, BClass b) {
    if (pb1.getTileX() == b.getTileX() & pb1.getTileY() == b.getTileY()) {
        if (b.getbUp() == 1 & pb1.getTileY() - 1 != pb2.getTileY()) {
            pb1.move(0, -1);
        } else if (b.getbDown() == 1
                & pb1.getTileY() + 1 != pb2.getTileY()) {
            pb1.move(0, 1);
        } else if (b.getbRight() == 1
                & pb1.getTileX() + 1 != pb2.getTileX()) {
            pb1.move(1, 0);
        } else if (b.getbLeft() == 1
                & pb1.getTileX() - 1 != pb2.getTileX()) {
            pb1.move(-1, 0);
        }
    }
}

public void pb1TouchingBaddy() {
    move(pb1, pb2, b1);
    move(pb1, pb2, b2);
    move(pb1, pb2, b3);
    move(pb1, pb2, b4);
} 
```

当然你需要用你的实际类名替换`PBClass`和。`BClass`

如果你有一个对象数组：

```
PBClass[] listPB = { pb1, pb2, pb3, pb4};
BClass[] listB = { b1, b2, b3, b4};

public void pb1TouchingBaddy() {
    for (int i=0; i < listPB.length - 1; i+=2) {
        for (int j=0; j < listB.length; j++) {
            move(pb[i], pb[i+1], b[j]);
        }
    }
} 
```

或者你可以用`ArrayList`同样的方式使用 s

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T21:59:36.443

你需要某种`Iterable`收藏。这样你就可以遍历它。

# php - 文件在被取消之前上传

> ID：13020459
> 
> 赞同：0
> 
> 时间：2012-10-22T21:49:51.877
> 
> 标签：php, jquery, ajax, mysqli

这里有一个小情况，我试图取消文件的上传。我所做的是，如果用户单击“取消”按钮，那么它将简单地删除 iframe，这样它就不会转到将文件上传到服务器并将数据插入数据库的页面。

现在，如果用户在快速的时间内单击“取消”按钮，这可以正常工作，但我意识到的问题是，如果用户很晚单击“取消”按钮，它有时不会及时删除 iframe，这意味着该文件刚刚在用户单击“取消”按钮之前上传。

所以我的问题是，如果在用户单击“取消”按钮之前文件确实以某种方式上传，它是否会删除数据库中的数据并从服务器中删除文件？

下面是图片上传表格：

```
<form action="imageupload.php" method="post" enctype="multipart/form-data" target="upload_target_image" onsubmit="return imageClickHandler(this);" class="imageuploadform" >
  <p class="imagef1_upload_process" align="center">
    Loading...<br/>
    <img src="Images/loader.gif" />
  </p>
  <p class="imagef1_upload_form" align="center">
    <br/>
    <span class="imagemsg"></span>
    <label>Image File: <input name="fileImage" type="file" class="fileImage" /></label><br/>
    <br/>
    <label class="imagelbl"><input type="submit" name="submitImageBtn" class="sbtnimage" value="Upload" /></label>
  </p>
  <p class="imagef1_cancel" align="center">
    <input type="reset" name="imageCancel" class="imageCancel" value="Cancel" />
  </p>
  <iframe class="upload_target_image" name="upload_target_image" src="#" style="width:0px;height:0px;border:0px;solid;#fff;"></iframe>
</form> 
```

下面是控制“取消”按钮的jquery函数：

```
$(imageuploadform).find(".imageCancel").on("click", function(event) {
    $('.upload_target_image').get(0).contentwindow
    $("iframe[name='upload_target_image']").attr("src", "javascript:'<html></html>'");
    return stopImageUpload(2);
}); 
```

下面是上传文件并将数据插入数据库的 php 代码。上面的表格发布到这个 php 页面“imageupload.php”：

```
<body>
<?php

include('connect.php');

session_start();

$result = 0;

//uploads file
move_uploaded_file($_FILES["fileImage"]["tmp_name"],
"ImageFiles/" . $_FILES["fileImage"]["name"]);
$result = 1;

//set up the INSERT SQL query command to insert the name of the image file into the "Image" Table
$imagesql = "INSERT INTO Image (ImageFile) 
VALUES (?)";

//prepare the above SQL statement
if (!$insert = $mysqli->prepare($imagesql)) {
  // Handle errors with prepare operation here
}

//bind the parameters (these are the values that will be inserted) 
$insert->bind_param("s",$img);

//Assign the variable of the name of the file uploaded
$img = 'ImageFiles/'.$_FILES['fileImage']['name'];

//execute INSERT query
$insert->execute();

if ($insert->errno) {
  // Handle query error here
}

//close INSERT query
$insert->close();

//Retrieve the ImageId of the last uploded file
$lastID = $mysqli->insert_id; 

//Insert into Image_Question Table (be using last retrieved Image id in order to do this)
$imagequestionsql = "INSERT INTO Image_Question (ImageId, SessionId, QuestionId)  
VALUES (?, ?, ?)"; 

//prepare the above SQL statement
if (!$insertimagequestion = $mysqli->prepare($imagequestionsql)) { 
  // Handle errors with prepare operation here 
  echo "Prepare statement err imagequestion"; 
} 

//Retrieve the question number
$qnum = (int)$_POST['numimage'];

//bind the parameters (these are the values that will be inserted) 
$insertimagequestion->bind_param("isi",$lastID, 'Exam', $qnum); 

//execute INSERT query
$insertimagequestion->execute(); 

if ($insertimagequestion->errno) { 
  // Handle query error here 
} 

//close INSERT query
$insertimagequestion->close();

?>

<!--Javascript which will output the message depending on the status of the upload (successful, failed or cancelled)-->

<script>
    window.top.stopImageUpload(<?php echo $result; ?>, '<?php echo $_FILES['fileImage']['name'] ?>');
</script>
</body> 
```

更新：

下面是php代码“cancelimage.php”，我想从服务器中删除取消的文件并从数据库中删除记录。它已设置但尚未完成，有人可以完成它以便我可以使用 $_SESSION 检索文件的名称和它的 id 吗？

```
<?php

// connect to the database
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

//remove file from server
unlink("ImageFiles/...."); //need to retrieve file name here where the ... line is

//DELETE query statement where it will delete cancelled file from both Image and Image Question Table
$imagedeletesql = " DELETE img, img_q 
FROM Image AS img 
LEFT JOIN Image_Question AS img_q 
ON img_q.ImageId = img.ImageId 
WHERE img.ImageFile = ?"; 

//prepare delete query
if (!$delete = $mysqli->prepare($imagedeletesql)) {
// Handle errors with prepare operation here
}

//Dont pass data directly to bind_param store it in a variable
$delete->bind_param("s",$img);

//execute DELETE query
$delete->execute();

if ($delete->errno) {
// Handle query error here
}

//close query
$delete->close();

?> 
```

您能否在您的答案中提供一个示例代码，以使我更容易。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:01:58.373

好吧，因为您使用 PDO，您可以使用：

```
$insert->rollBack(); 
```

回滚最近的插入。并找到上传的文件并使用：

```
unlink('test.html'); 
```

查看这些链接以获取更多信息`rollBack`和`unlink`

*   [取消链接](http://us2.php.net/manual/en/function.unlink.php)
*   [回滚](http://php.net/manual/en/pdo.rollback.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:05:56.907

如果`iframe`删除了 并且没有调用告诉上传哪个文件的回调，那么很难知道要删除哪个文件。

尽管您可以将最后上传的文件的 和 存储在`$lastID`并请求其他在数据库中查找文件的页面，然后删除记录，然后从磁盘中删除文件。`$ImageFile``$_SESSION`

我可以提供一些示例代码，但我的建议是您修改当前代码，使其更具可读性并修复缩进..

另一种解决方案是使用以下函数显式中止上传：

```
function abortUpload(){
    var iframeObj = $("iframe[name='upload_target_image']").get(0);
    if (iframeObj.contentWindow.document.execCommand){ 
        // IE
        iframeObj.contentWindow.document.execCommand('Stop');
    }else{
        // other browsers
        iframeObj.contentWindow.stop();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:10:05.373

好的，就像我在之前的回答中所说，您可以使用`$_SESSION`to 存储`$lastID`和`$ImageFile`.

### 例如，`$lastID = $mysqli->insert_id;`插入以下内容后：

```
$_SESSION['lastID'] = $lastID;
$_SESSION['ImageFile'] = $_FILES["fileImage"]["name"]; 
```

这将存储在会话中`lastID`。`ImageFile`

### 在`cancelimage.php`您输入以下内容：

```
unlink("ImageFiles/" . $_SESSION['ImageFile']); 

$delete = $mysqli->prepare('DELETE FROM Image WHERE id = ?');
$delete->bind_param("i",$_SESSION['lastID']);
$delete->execute(); 
```

### 现在向取消按钮添加一个操作，将 iframe 的源更新为`cancelimage.php`

但是有一个风险，因为如果用户之前上传了一个文件，上传一个新文件但文件没有通过（所以没有设置会话变量），那么之前的文件将被删除。

# testing - Hudson - TestNG - 使用 DataProvider - 为所有数据值显示相同的测试名称

> ID：13020461
> 
> 赞同：0
> 
> 时间：2012-10-22T21:49:55.307
> 
> 标签：testing, hudson

我正在从 Hudson 运行我的 testng 测试。运行大约 2000 个测试（即 2000 个数据集传递给单个测试用例）。在 Hudson 报告中，它显示了测试用例名称和一些失败的数据问题。我想覆盖它，以便它应该显示我需要的名称，而不是整个数据集的相同名称。

谢谢马丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:39:58.533

您可以通过实现 ITest 并覆盖 getTestName 方法来尝试。您可以在类的构造函数上使用基于数据提供者的工厂，该构造函数将设置变量 testname 并且 getTestName 应该在输出中返回您想要的名称。

# point-clouds - 3D 到 2D 匹配

> ID：13020472
> 
> 赞同：3
> 
> 时间：2012-10-22T21:50:57.710
> 
> 标签：point-clouds, keypoint

我有显示这些对象的对象和图像的点云（每个点都有一种颜色）。我想在 2D/3D 中找到兴趣点并匹配它们，这样我就知道在点云中找到了我的图像的哪些部分（至少是那些有兴趣点的部分）。

所以我需要首先找到兴趣点，获取它们的描述符并匹配它们。如果可能的话，这应该适用于 OpenCV 的当前快速和节省内存的算法，如 BRISK 或 ORB（没有专利算法！）。但我不知道如何为 3D 实现它们。这甚至可能吗？我找到了一篇论文（Hough Transform and 3D SURF for robust 三维分类），其中谈到了 SURF 的 3D 扩展，这将是一个开始，但我找不到任何关于该 3D 扩展的信息。即便如此，问题是对于 BRISK 或其他当前算法来说，这样的扩展有多可行。

所以，请给我关于如何进行的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:50:23.303

它被称为对极几何和立体匹配。

1）您需要两个图像（2D），从中生成 3D 点云。2）从这两个图像中，您可以创建基本矩阵，然后生成极点。如果您在 MATLAB 中执行此操作非常容易，但不确定 OpenCV。3）来自两个独立图像的那些极点将绘制线到 3D 世界。

我建议您阅读有关 2D -> 3D 的极线几何和立体匹配的信息

# python - 将图像附加到 Django 模型中

> ID：13020477
> 
> 赞同：0
> 
> 时间：2012-10-22T21:51:14.143
> 
> 标签：python, django, image, model

制作一个基本的问答网站，并希望将每个问题与图像相关联（管理员上传），如果没有相应的图像，则将其与默认的“无图像”占位符相关联。

我有两个模型，问题和答案（见下文）。每个问题都需要有一个与之关联的图像，所以我认为最好的方法是将属性 ImageField 与 Question 模型附加在一起。

```
#models.py
class Question(models.Model):
    title = models.CharField(max_length = 500)
    picture = models.ImageField(height_field = '250',
                                width_field = '200',
                                upload_to = 'images')
    def __unicode__(self):
        return self.title 
```

但是，当我运行服务器时，告诉我下载 Python Imaging Library，当我遇到错误时（不同的问题）。

退后一步，在 Django 中将图像添加到模型的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:29:21.373

忘记PIL...

使用位置 URL DB 条目。不要使用 ImageField()，而是使用

```
picturepath = models.CharField(255) 
```

包含图像静态位置的 URL。

所以如果 STATIC_URL = "http://127.0.0.1/static/" 和图片路径 = "images/poots.png"

然后，在视图中传递该信息，并在模板中使用它：

```
<img src="{{ STATIC_URL }}{{ question.picturepath }}"> 
```

会提供

```
<img src="http://127.0.0.1/static/images/poots.png"> 
```

# c# - 如何在 SpecFlow 中捕获负数

> ID：13020480
> 
> 赞同：1
> 
> 时间：2012-10-22T21:51:25.483
> 
> 标签：c#, specflow, gherkin

使用 SpecFlow，我有这种情况：

```
Scenario: Amount is not negative
  Given a Validator
  Given a TestData
    And MinimumAmount is -0.01
  When when validator is invoked
  Then validator sets validation error 
```

SpecFlow 为 MinimumAmount 生成了以下绑定：

```
[Given]
public void Given_MinimumAmount_is_P0(decimal p0)
{
 ....
} 
```

但是在执行时，传递给步骤的值是`0.01`而不是`-0.01`。

如何设置它，以便它捕获减号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:03:36.190

刚刚想通了。看起来“默认”行为是错误的，但是在我为 Give 属性设置正确的文本后，它开始工作。

我将步骤定义更改为：

```
[Given(@"MinimumAmount is (.*)")]
public void Given_MinimumAmount_is_P0(decimal p0)
{
 ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T20:52:28.547

刚刚[提交的 PR来解决这个问题。](https://github.com/techtalk/SpecFlow/pull/623)希望这将使 2.1 版本发布，这似乎是一个简单的修复。将不胜感激您在合并后可以做的任何事情来验证修复

# wsdl - 如何在不修改 WSDL 的情况下强制 CXF 对 base64binary 类型使用 DataHandler？

> ID：13020482
> 
> 赞同：6
> 
> 时间：2012-10-22T21:51:40.850
> 
> 标签：wsdl, cxf, mtom

我正在努力将 SOAP 服务的实现从使用 Axis2 更改为使用 JAX-WS（从技术上讲，是 JBossWS 在 AS 7 上提供的 CXF 实现），我遇到了一个问题，阻止我切换最后的剩余方法到 JAX-WS 风格。

（由于规范似乎不公开，因此略微匿名）方法返回一个包含 base64binary 元素的 Type。

```
<xs:complexType name="BitmapResult">
    <xs:sequence>
        <xs:element minOccurs="0" name="chunkBitmap" nillable="true" type="xs:base64Binary"/>
    </xs:sequence>
</xs:complexType> 
```

在 Axis2 中，这会生成一个使用 DataHandler 处理二进制参数的类，并且默认情况下似乎使用 MTOM 来返回结果。

使用 CXF wsdl2java 工具，这将生成一个使用 byte[] 的类型类，并将参数作为 SOAP 回复本身中的 base64 编码文本返回。

从我读过的所有内容来看，使用 CXF 执行此操作的正确方法是确保您从中生成的 wsdl 包含：`xmime:expectedContentTypes="application/octet-stream"`但由于我们是由外部资源提供的 WSDL，我不希望在本地修改它.

除了修改 WSDL 之外，还有其他方法可以请求 CXF 使用 DataHandler 生成类吗？我已经在使用 jaxb 绑定文件来调整生成的其他一些参数，但是我找不到任何可以让我覆盖这个特定设置的东西。

# php - PHP 或 PHPUnit。从下拉列表中选择一个随机选项，不包括选定的选项

> ID：13020485
> 
> 赞同：0
> 
> 时间：2012-10-22T21:52:07.127
> 
> 标签：php

如果我的下拉菜单有 10 个选项可供选择，并且选择了选项 4，我该如何编写代码以从 1-10 中选择一个选项，但不包括 4？

我知道 rand(1, 10) 会从 1 到 10 中选择一个随机数，但它有时会落在 4 上。如何确保它不会选择数字 4 或任何已经选择的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:59:50.077

一般来说，如果你有 1 和 n 之间的选项，并且选择了第 m 个选项，你可以使用以下算法在 1 和 n 之间均匀随机生成一个数字，不包括 m：

```
<?php
function get_rand($n,$m) 
{
  $r = rand(1,$n-1); //generate one of $n-1 numbers since $m is not selectable
  if($r >= $m) //if $r is smaller than $m we're done
    $r++;      //otherwise add one to $r
  return($r);
}
?> 
```

在您的情况下，n=10 和 m=4，我们将生成一个介于 1 和 9 之间的数字。如果它在 [1,3] 范围内，我们将返回该数字。如果它在 [4,9] 范围内，我们将添加 1 并返回 [5,10] 范围内的数字。这意味着我们以相同的概率返回 [1,3] U [5,10] 范围内的任何整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:57:12.693

那这样的事情呢？

```
<?php

$filtered_key = 4;

$range = range(1, 10);
unset($range[$filtered_key]);
$key = array_rand($range);

echo $key; 
```

# android - 使用 Cling 从媒体服务器获取要播放的媒体 URL

> ID：13020487
> 
> 赞同：1
> 
> 时间：2012-10-22T21:52:34.180
> 
> 标签：android, upnp

我正在研究 android 上 Cling upnp 堆栈的示例 upnpBrowser，我浏览了 merdia 服务器的内容，我可以显示每个文件夹中的媒体列表，现在我想提取视频的 URL 以在播放器，但我被阻止如何提取该 URL !!!

```
UDN serverUdn = ((UpnpControlApplication)getApplicationContext()).server_udn;
//Device server = ((UpnpControlApplication)getApplicationContext()).server;
Device server = upnpService.getRegistry().getDevice(serverUdn, true);
listAdapter.clear();
if(server == null)
{
    Toast.makeText(this, "pbm", Toast.LENGTH_LONG).show();
}
else
{
    if(server.findService(new UDAServiceType("ContentDirectory")) == null)
        Toast.makeText(this, "pbm", Toast.LENGTH_LONG).show();
    upnpService.getControlPoint().execute(new Browse(server.findService(new UDAServiceType("ContentDirectory")),id, BrowseFlag.DIRECT_CHILDREN)
    {
        @Override
        public void received(ActionInvocation actionInvocation, DIDLContent didl) {
            final List<Item> items = didl.getItems();
            String st=didl.getItems().get(0).getFirstResource().getValue(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:14:53.383

```
public void browseServer(final String id)
{

    if(((UpnpControlApplication)getApplicationContext()).server_udn == null)
    {
        new AlertDialog.Builder(this)
        .setTitle("Bad")
        .setMessage("pas de serveur sélectionné, allez à la section LAN et cliquez sur Parcourir pour sélectionner le serveur!")
        .setPositiveButton("OK", new OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                // Some stuff to do when ok got clicked
            }
        })
        .setNegativeButton("Annuler", new OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                // Some stuff to do when cancel got clicked
            }
        })
        .show();
    }
    else
    {
        UDN serverUdn = ((UpnpControlApplication)getApplicationContext()).server_udn;
        //Device server = ((UpnpControlApplication)getApplicationContext()).server;
        Device server = upnpService.getRegistry().getDevice(serverUdn, true);
        listAdapter.clear();
        if(server == null)
        {
            Toast.makeText(this, "désolé", Toast.LENGTH_LONG).show();
        }
        else
        {
            if(server.findService(new UDAServiceType("ContentDirectory")) == null)
                Toast.makeText(this, "pbm", Toast.LENGTH_LONG).show();
            upnpService.getControlPoint().execute(new Browse(server.findService(new UDAServiceType("ContentDirectory")),id, BrowseFlag.DIRECT_CHILDREN)
            {

                @Override
                public void received(ActionInvocation actionInvocation, DIDLContent didl) {

                    final List<Item> items = didl.getItems();

                    //String st = items.getImportUri();
                    //String st=didl.getItems().get(0).getFirstResource().getValue(); 
                    //Log.d("URL IS",st); 
                    //Item item = didl.getItems().get(0);
                    //Item item = didl.getItems().get(0); 
                    //String url = item.getFirstResource().getValue();

                     //System.out.println(" this is the url of item" +item.getTitle()); 
                    // System.out.println(" this is the url of the media");

                     //System.out.println(url);

                    /*final DIDLContent b = didl;
                    String str1 = "bieda";
                    try
                    {
                        str1 = parser.generate(b);
                    }
                    catch(Exception e)
                    {
                        str1 = "smuta";
                    }
                    final String str=str1;
                    runOnUiThread(new Runnable()
                    {
                        public void run()
                        {

                            adb.setTitle("XML").setMessage(str).setPositiveButton("OK", new OnClickListener() {
                                public void onClick(DialogInterface arg0, int arg1) {
                                    // Some stuff to do when ok got clicked
                                }
                            }).show();

                        }
                    });*/

                    runOnUiThread(new Runnable(){
                        public void run()
                        {
                            listAdapter.insert(new ServerContentContainer(s.peek()), 0);
                        }
                    });

                    final List<Container> containers = didl.getContainers();

                    for(final Container c: containers)
                    {

                        runOnUiThread(new Runnable(){
                            public void run()
                            {
                                int pos = listAdapter.getPosition(new ServerContentContainer(c));
                                if(pos >= 0)
                                {
                                    listAdapter.remove(new ServerContentContainer(c));
                                    listAdapter.insert(new ServerContentContainer(c), pos);
                                    System.out.println("eulooooooooo");
                                }
                                else
                                    listAdapter.add(new ServerContentContainer(c));
                            }
                        });
                    }
                    for(final Item i: items)
                    {
                        runOnUiThread(new Runnable(){
                            public void run()
                            {
                                int pos = listAdapter.getPosition(new ServerContentItem(i));
                                if(pos >= 0)
                                {
                                    listAdapter.remove(new ServerContentItem(i));
                                    listAdapter.insert(new ServerContentItem(i), pos);
                                }
                                else
                                    listAdapter.add(new ServerContentItem(i));
                            }
                        });

                    }

                }

                @Override
                public void updateStatus(Status arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void failure(ActionInvocation arg0, UpnpResponse arg1,
                        String arg2) {
                    // TODO Auto-generated method stub

                }

            });
        }
    }
} 
```

这是类 ServerContentItem ：

```
protected class ServerContentItem extends ServerContent
    {
        private Item i;

        public Item getItem()
        {
            return i;
        }

        ServerContentItem(Item i)
        {
            this.i = i;
        }

        public void select()
        {
            if(((UpnpControlApplication)getApplicationContext()).renderer_udn != null)
            {
                Device renderer = upnpService.getRegistry().getDevice(((UpnpControlApplication)getApplicationContext()).renderer_udn, false);
                final Service service = renderer.findService(new UDAServiceType("AVTransport"));
                upnpService.getControlPoint().execute(new SetAVTransportURI(service, i.getFirstResource().getValue()){
                    @Override
                    public void failure(ActionInvocation invocation, UpnpResponse operation, String defaultMsg) {
                        adb.setTitle("Bad").setMessage("No!")
                        .setPositiveButton("OK",new OnClickListener() {
                            public void onClick(DialogInterface arg0, int arg1) {
                                // Some stuff to do when ok got clicked
                            }
                        }).show();
                    }

                    @Override
                    public void success(ActionInvocation invocation)
                    {
                        upnpService.getControlPoint().execute(new Play(service){
                            @Override
                            public void failure(ActionInvocation invocation, UpnpResponse operation, String defaultMsg) {
                                adb.setTitle("Bad").setMessage("Non réussi!")
                                .setPositiveButton("OK",new OnClickListener() {
                                    public void onClick(DialogInterface arg0, int arg1) {
                                        // Some stuff to do when ok got clicked
                                    }
                                }).show();
                            }
                        });
                    }
                });

            }
            else
            {
                adb.setTitle("Bad")
                .setMessage("selection ! need a media player ")
                .setPositiveButton("OK",new OnClickListener() {
                    public void onClick(DialogInterface arg0, int arg1) {
                        // Some stuff to do when ok got clicked         
                        Log.e("bla","blablaa");

                        Intent intent = new Intent().setClass(BrowseServerActivity.this, Newactivity.class);
                        startActivity(intent);

                    }
                }).show();
            }
        }

        @Override
        public String toString()
        {
            return i.getTitle();
        }

        @Override 
        public boolean equals(Object o)
        {
            if(this == o)
                return true;
            if(getClass() != o.getClass())
                return false;
            return i.equals(((ServerContentItem)o).i);
        }
    } 
```

我希望代码很清楚。谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T11:47:46.917

Cling Ressource 类包含一个**URI**字段，获取它并尝试。
[Res CLING 支持 1.0.5 API](http://4thline.org/projects/cling/support/apidocs/org/teleal/cling/support/model/Res.html)

# iphone - ViewController 销毁后，递归 UIView 动画继续，新的 ViewController 创建

> ID：13020496
> 
> 赞同：1
> 
> 时间：2012-10-22T21:53:59.670
> 
> 标签：iphone, ios, uiview, uiviewcontroller, uiviewanimation

**更新**

ViewController 没有被销毁，新的 ViewController 没有被创建。这个：

```
TimerViewController * timerViewController = (TimerViewController *)[segue destinationViewController]; 
```

不创建新实例。然而，这

```
TimerViewController *timerViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"theID"]; 
```

做。所以现在正在使用一个新实例，但同样的问题。

**结束更新**

我有一个简单的“模拟数字计时器”，分钟和秒可以流畅地动画以模拟数字轮的转动。这只是一个带有时间列表的 ParentViewController，选择一个时间对 TimerViewController 执行 segue。TimerViewController 使用递归 UIView 动画来模拟时钟的倒计时。这很好用。

我希望用户能够转换到列表中的下一个计时器，而不必返回 ParentViewController 来选择它。这效果不好。

我尝试了很多变体，基本模式是 TimerViewController 要求其委托（ParentViewController）弹出它，然后使用时间列表中的下一次再次排序到 TimerViewController。初始动画永远不会终止，初始 TimerViewController 实例永远不会“死亡”。当我第二次使用我认为是新实例的 TimerViewController 时，第一个动画似乎仍在运行，动画的持续时间几乎是 1.0 秒，超出了图表（接近 0）。

我尝试了许多不同的、越来越绝望的方法来停止原始动画并杀死原始实例。

```
ParentViewController.m

-(void) timerViewControllerDidSwipe  (TimerViewController *)controller {

  [self.navigationController  popViewControllerAnimated:NO];
  controller = nil; // ?
  [self performSegueWithIdentifier:@"ShowTimer" sender:self];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([[segue identifier] isEqualToString:@"ShowTimer"])
{
    TimerViewController * timerViewController = (TimerViewController *)[segue destinationViewController];
    [timerViewController setDelegate:self];
}

TimerViewController.m  

-(void) swipe:(id)selector {
    // swipe left
     stop = YES; // ivar for ^after to not call [self animate]
    [self.delegate timerViewControllerDidSwipe:self];
}

-(void) animate {

// anim block here..

 void (^after) (BOOL) = ^(BOOL f) {

    if (duration % 60 == 0 && duration >= 60) {

         if (minutesAlt.center.y < minutes.center.y)
         {
             CGPoint a = minutes.center;
             a.y -= 2 * displacement;
             minutes.center = a;
             minutes.text = [NSString stringWithFormat:@"%02d", (duration / 60) -1];
         }
         else
         {
            CGPoint a = minutesAlt.center;
            a.y -= 2 * displacement;
            minutesAlt.center = a;
            minutesAlt.text = [NSString stringWithFormat:@"%02d", (duration / 60) -1];
         }
    }

    if (duration == 0)
    {
        // end
    }
    else if (secondsAlt.center.y < seconds.center.y)
    {
        CGPoint a = seconds.center;
        a.y -= 2 * displacement;
        seconds.center = a;
        duration--;
        seconds.text = [NSString stringWithFormat:@"%02d",duration % 60];

        if (!stop) {[self animate];}
    }
    else 
    {
        CGPoint a = secondsAlt.center;
        a.y -= 2 * displacement;
        duration--;
        secondsAlt.center = a;
        secondsAlt.text = [NSString stringWithFormat:@"%02d", duration % 60];

        if (!stop) {[self animate];}
    }
};

[UIView animateWithDuration:0.50
                      delay:0.50
                    options:UIViewAnimationOptionCurveLinear
                 animations:anim
                 completion:after];
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:37:06.993

[在](https://stackoverflow.com/questions/13202574/uiview-animation-continues-to-run-after-a-new-view-controller-is-pushed-onto-the/13214462#13214462)相关问题中修复。这是一个简单的语法错误（我花了几个星期才找到）。

# javascript - 骨干下划线复选框传递值问题

> ID：13020497
> 
> 赞同：5
> 
> 时间：2012-10-22T21:54:02.010
> 
> 标签：javascript, backbone.js, underscore.js, interpolation

我有一个非常基本的问题，但看不到解决方案。也许我需要改变我的思维方式。基本上我在 JSON 文件中得到了一个模型，但我不知道如何转换`true`为`checked`. 例如，我知道`{{-done}}`要么是`true`要么`false`。

```
input type="checkbox"  id="chkName"   <%= {{-done}} ? "checked" : "" %> 
```

我看到很多这样的例子，但对我不起作用。是不是因为我带回了真/假值的方式。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T22:12:51.230

您的问题是您使用了*错误*类型的 Underscore.js 模板标签，您使用的标签用于插入一个值并将其 HTML 转义。

解释一下，下划线[模板](http://documentcloud.github.com/underscore/#template)中有三种*类型*的标签，

1.  `<%= %>`-**插值**- 评估属性的数据并打印它。
2.  `<%- %>` **Escape**评估数据并以 HTML 转义形式打印。
3.  `<% %>` **评估**允许您在模板中执行 JavaScript。

此外，在模板中执行 JavaScript 时，您可以使用该`Print`方法打印出一些文本（例如属性的结果）。

根据您的情况，您需要在模板中运行条件以打印检查是否*完成*评估为真。因此，您可以执行以下操作

```
<% if(done) { %> 'checked="checked" <% } %> 
```

或者你可以使用`print`方法

```
<% print(done ? 'checked="checked"' : '') %> 
```

编辑：

根据您发布的模板，以下模板应该可以工作

```
 <script id="item-template"  type="text/template">   
         <input type="checkbox" id="toggle" <% print( done ?  'checked="checked"' : '') %> /> 
           <span class="text">{{-done}}</span>
           <a id="dele" data-role="button" data-inline="true" data-icon='delete' >Delete</a>
        </script> 
```

这是使用默认 ERB 样式分隔符的[jsBin的链接](http://jsbin.com/avudig/2/edit)

这是[第二个](http://jsbin.com/avudig/3/edit)使用胡子样式分隔符的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:10:18.803

I tought I had it, but its simply always going in to the first condition. This is what I have. As you can see I'm printing out Done on the next line, which is showing true or false. Your code makes sense, just does not want to play ball. Would it be due to the script declaration?

```
 <div id="items">     
        <script id="item-template"  type="text/template">   
             <input type="checkbox" id="toggle" <% print( done ?  '' : checked) %> 
               <span class="text">{{-done}}</span>
               <a id="dele" data-role="button" data-inline="true" data-icon='delete' >Delete</a>

            </script>
        </div> 
```

# php - 表格自己发布，邮件自己发送。是谷歌吗？

> ID：13020500
> 
> 赞同：0
> 
> 时间：2012-10-22T21:54:09.273
> 
> 标签：php, shopping-cart

我有一个网上商店，每隔几天就会发送一封空邮件，就像订单一样。这很可能是谷歌吗？

我有一个名为 send2.php 的文件，它从会话中获取所有信息，所有发布数据，并通过邮件发送。之后，它会重定向到“谢谢”页面。

谷歌可以并且会发送空表单只是为了查看 send2.php 中的内容吗？防止这种情况发生的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:17:05.357

正如其他人所提到的，有多种方法可以使用`empty()`检查和`robots.txt`. 但是，这些依赖于尊重您网站的机器人。许多机器人会尝试将值注入表单（意味着`empty`检查不起作用）并且这些机器人并不关心（如果：实际上*鼓励*一些机器人在假设您可能的情况下定位您的网站，`robots.txt`我不会感到惊讶 有一些敏感的东西......但这只是猜测）。`robot.txt``Disallow`

 *你最好的最好的就是“人工检查”。在允许提交之前实施验证[码/](http://www.google.com/recaptcha)验证码解决方案，或其他一些计算机难以解决或解析/理解的逻辑测试：“这是什么动物？[普通动物的照片]”，“解决这个简单的方程 [(12/ 4)+1]"等

这些检查**必须是 server-side**。它们通常涉及`$_SESSION`在首次加载表单时为挑战任务设置一个带有“答案”的变量，然后在提交表单后检查他们输入的值与此会话变量是否相符。**永远不要**依赖 Javascript 为您进行验证（正如您在对 x711Li 的评论中提到的那样）。Javascript 验证纯粹是为了方便用户（因此他们可以在提交之前看到问题）或减少服务器上的负载（因此您不必运行/记录大量失败的提交）。任何人或机器人都可以绕过或操纵 Javascript 验证，因此请确保您最终使用的任何方法都涉及服务器端检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:56:31.447

添加一个名为`robots.txt`您的根目录的文件并将其放入其中：

```
User-Agent: *
Disallow: /path/to/send2.php 
```

请记住，这不是一个完美的解决方案。这将阻止（合作的）网络爬虫访问您的页面。

**参考**：[http ://en.wikipedia.org/wiki/Robots_exclusion_standard](http://en.wikipedia.org/wiki/Robots_exclusion_standard)

更好的解决方案涉及用户身份验证（确保提示您的脚本的代理不是机器人）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:07:02.477

如果您收到的邮件是空白值，因为在整个会话期间尚未设置这些值，那么为什么不在发送邮件之前检查这些值，罪魁祸首很可能是爬虫，其中许多（包括 bingbot ) 不会监听 robots.txt 文件，而且 robots.txt 文件是黑客寻找信息收集的第一个地方。

```
<?php 
if(!empty($_SESSION['some_info'])){
    mail(...);
}
?> 
```*

# java - 无法从 Java 中的 Date 对象中获取真实日期

> ID：13020507
> 
> 赞同：0
> 
> 时间：2012-10-22T21:55:21.160
> 
> 标签：java, date

> **可能重复：**
> [为什么 Java 的 Date.getYear() 返回 111 而不是 2011？](https://stackoverflow.com/questions/7215621/why-does-javas-date-getyear-return-111-instead-of-2011)

我试图从日期对象中获取年、月和日，但以下内容给了我一些完全随机的东西：

```
 Date d = new Date();
    System.out.println(d.getYear() + " - " + d.getMonth() + " - " + d.getDay()); 
```

我得到：112 - 9 - 1

有谁知道为什么？你有更好的方法吗？对于我的程序，我需要 Date 对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T21:58:26.007

阅读这三种方法[的javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)（不推荐使用，因此不应该使用，顺便说一句）会告诉你为什么：

*   112：自 1900 年以来的年数
*   9：月份数，从 0 开始（所以 9 表示 10 月）
*   1：月份中的某天

使用 Calendar 获取日期字段，并使用 DateFormat 格式化日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:57:46.897

是的...[文档知道](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html)

具体来说，`getYear`返回的年份是当前公历年减去 1900。

此外，这些吸气剂已被弃用。您应该使用[Calendar](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)类。

如果您*必须*使用 Date 对象，请使用`Calendar.getInstance().setTime(dateObject)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T22:04:24.537

源代码解释了原因。

```
@Deprecated
public int getYear() {
    return normalize().getYear() - 1900;
}
@Deprecated
public int getMonth() {
return normalize().getMonth() - 1; // adjust 1-based to 0-based
}

@Deprecated
public int getDay() {
return normalize().getDayOfWeek() - gcal.SUNDAY;
} 
```

# cordova - Phonegap 到 Phonegap 通信

> ID：13020509
> 
> 赞同：0
> 
> 时间：2012-10-22T21:55:37.597
> 
> 标签：cordova, wifi, communication

我从 Phonegap 和 jQuery Mobile 开始，我想通过 wifi 连接在不同的 Phonegap 设备之间进行通信。实现这一目标的最佳方法是什么？我需要关于哪种技术对此更好的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:33:47.480

[可能您需要通过https://github.com/phonegap/phonegap-plugins/tree/master/Android/Bluetooth](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Bluetooth)中的插件使用蓝牙，或者您必须通过您熟悉的集中式网络服务器建立连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T18:58:24.370

使用Phonegap，您需要使用Bluethooth @sunil_reddy 所说的方式或在通信中使用中介服务器。使用服务器或网络服务，您可以创建聊天、发送文件等...

首先，您将内容发送到服务器，然后服务器与其他设备建立连接。

更简单的模式是蓝牙插件，但取决于你想做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T08:46:00.533

我认为您应该使用 SignalR 服务器。

例如，电话 A 向电话 B 发送消息

*   电话 A CALL SignalR 服务器发送方法，然后
*   SignalR 服务器 CALL 电话 B 接收方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-20T14:33:31.233

我想上面所有的答案在逻辑上都是正确的。我用简单的术语 - 当您尝试从一个设备到另一个设备进行通信时，您可以在它们之间打开一个通信通道（蓝牙允许您创建一个服务器和一个相应的客户端套接字），或者在它们之间使用一个服务器来中继通信。根据您希望达到的具体目标，您需要决定采用哪种模式。既然您提到了 WiFi - 我假设您正在查看通过 WiFi 的 P2P 连接。因此，您可能/应该对此感兴趣：http: [//developer.android.com/reference/android/net/wifi/p2p/package-summary.html](http://developer.android.com/reference/android/net/wifi/p2p/package-summary.html)

# c# - 模拟事件处理程序

> ID：13020511
> 
> 赞同：6
> 
> 时间：2012-10-22T21:55:39.020
> 
> 标签：c#, delegates, mocking, moq, assert

定义了一个接口

```
 public interface IHandlerViewModel {
         EventHandler ClearInputText { get; } 
} 
```

我想测试 ClearInputText 是否被某种方法调用。为此，我做这样的事情

```
SomeType obj=new SomeType();
bool clearCalled = false;
var mockHandlerViewModel=new Mock<IHandlerViewModel>();
mockHandlerViewModel.Setup(x => x.ClearInputText).Returns(delegate { clearCalled = true; });

obj.Call(mockHandlerViewModel.Object);//void Call(IHandlerViewModel);
Assert.IsTrue(clearCalled); 
```

失败了。只是没有调用委托。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-22T23:54:26.387

你举的例子不清楚。你本质上是在测试你自己的模拟。

在模拟代理作为依赖项传递给被测对象的场景中，您无需设置事件处理程序，而是引发它。

```
var mockHandlerViewModel = new Mock<IHandlerViewModel>();
var objectUnderTest = new ClassUnderTestThatTakesViewModel(mockHandlerViewModel.Object);
// Do other setup... objectUnderTest should have registered an eventhandler with the mock instance. Get to a point where the mock should raise it's event..

mockHandlerViewModel.Raise(x => x.ClearInputText += null, new EventArgs());
// Next, Assert objectUnderTest to verify it did what it needed to do when handling the event. 
```

模拟要么使用 .Raise() 替换事件源，要么替换一个对象，该对象将消耗另一个被测类的事件（断言事件已引发），在这种情况下，您使用 .Callback() 记录“处理”本地标志变量中的事件。

# wordpress - 在 WordPress 中更新自定义 PageLine 的部分时的操作挂钩

> ID：13020513
> 
> 赞同：1
> 
> 时间：2012-10-22T21:55:42.307
> 
> 标签：wordpress, wordpress-theming, hook, pagelines

我正在尝试编写一个自定义函数，以便在页眉或页脚区域的内容更新时将页面的页眉和页脚区域发送到 .net Web 服务。我已经制定了更新菜单时的 WordPress 操作挂钩 `add_action( 'wp_update_nav_menu', 'write_html' );` ，但是当通过页面行更新页眉或页脚部分时，我还需要调用我的函数。我们有用于页眉和页脚区域的自定义部分。

我在这里查看了操作挂钩：http: [//api.pagelines.com/hooks](http://api.pagelines.com/hooks) 并在这里观看了挂钩教程：http: [//www.pagelines.com/docs/base-child-theme](http://www.pagelines.com/docs/base-child-theme)

该视频更多地谈论过滤器而不是操作（使用 WordPress 术语），并且 api 页面中的操作列表没有显示任何可能与更新特定部分相关的内容。

所以我有两个问题：

1.  当自定义部分的站点范围设置被更新时，例如通过 PageLines > Page Options 并选择该部分，是否存在预先存在的操作挂钩？

2.  如果没有，如何将自定义动作挂钩添加到部分的更新中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:58:24.973

好的，找到合适的钩子了。因为它在更新菜单时工作，所以`add_action( 'wp_update_nav_menu', 'write_html' );`当 PageLines > Page Options 更新时，它是一个钩子。事实证明，正确的钩子是`add_action( 'update_option_pagelines-special', 'write_html' );`

# wpf - 为没有文本的 WPF 按钮设置键盘快捷键

> ID：13020516
> 
> 赞同：1
> 
> 时间：2012-10-22T21:56:20.020
> 
> 标签：wpf

我有一个看起来像这样的按钮：

```
<Button Margin="3,0,2,0" Command="{Binding AddCommand}">
  <StackPanel Orientation="Horizontal">
     <Image Width="24" Stretch="Uniform"
            Source="pack://application:,,,/MyProj;component/Images/Add.png"/>
   </StackPanel>
</Button> 
```

它没有任何文字。但如果是这样，它会在 StackPanel 中有这个：

```
<Label Margin="2,0,1,0" Content="_Add" /> 
```

这将允许 Alt+A 成为按钮的键盘命令。

有没有办法在按钮上没有文字的情况下进行设置？

注意 AddCommand 是一个 DelegateCommand（它必须是）。所以 RoutedCommand 设置快捷键的方式是行不通的。（除非有办法将 DelegateCommand 改造成 RoutedCommand。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:56:20.020

事实证明这足以让它工作：

```
<Button Margin="3,0,2,0" Command="{Binding AddCommand}">
  <StackPanel Orientation="Horizontal">
     <Image Width="24" Stretch="Uniform"
            Source="pack://application:,,,/MyProj;component/Images/Add.png"/>
     <Label Margin="0" Width="0" Opacity="0" Content="_Add" />
   </StackPanel>
</Button> 
```

有点hack，因为它添加了一个不可见的标签。但它工作得很好。

# annotations - 支持 Servlet 3.0 的嵌入式 Jetty 8

> ID：13020519
> 
> 赞同：1
> 
> 时间：2012-10-22T21:56:28.813
> 
> 标签：annotations, embedded-jetty, servlet-3.0, jetty-8

如何配置 Jetty 以使用带注释的 servlet？来自这里的答案： Jeff Miller 对[嵌入式 Jetty 8.0 中的 Servlet 3.0 支持](https://stackoverflow.com/questions/3463264/servlet-3-0-support-in-embedded-jetty-8-0)没有帮助。没有他提议的行（context.setConfigurations..），提供的war文件中的Web应用程序正在启动-我知道这是因为应用程序的contextListner在应用程序启动时写入控制台。现在，如果我按照 Jeff 的建议添加该行，则应用程序根本不会启动。有没有办法让 servlet 注释在码头中工作，或者我应该将 servlet 注释重写回 web.xml？

# iphone - NSFetchResultsController 委托没有被调用

> ID：13020523
> 
> 赞同：1
> 
> 时间：2012-10-22T21:57:10.603
> 
> 标签：iphone, objective-c, ios, ipad, nsfetchedresultscontroller

我有以下代码：

```
- (NSFetchedResultsController *)fetchedResultsController {
    // Set up the fetched results controller if needed.
    if (fetchedResultsController == nil) {

 NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        // Edit the entity name as appropriate.
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"DiskStory" inManagedObjectContext:self.managedObjectContext];
        [fetchRequest setEntity:entity];

        fetchRequest.predicate = [NSPredicate predicateWithFormat:@"isRemoved == %@", [NSNumber numberWithBool:NO]];

        // Edit the sort key as appropriate.
        NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"created" ascending:NO];
        NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

        [fetchRequest setSortDescriptors:sortDescriptors];

        // Set limit
        [fetchRequest setFetchBatchSize:25];
        // Set batch size
        [fetchRequest setFetchLimit:50];

        NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:kSavedStoryCache];
        aFetchedResultsController.delegate = self;
        fetchedResultsController = aFetchedResultsController;
 }
    return fetchedResultsController;
} 
```

在我看来DidLoad 我有：

```
 NSError *error = nil;
    if (![[self fetchedResultsController] performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    } 
```

我想知道为什么我的：

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {

} 
```

代表，不是叫吗？我在里面放了一个断点。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:09:53.900

我之前遇到过这个问题，第一次调用时不会调用它，`performFetch`而只有在`fetchedResultsController`实际更改数据时才会调用它。例如，当您从此获取结果中的上下文中删除对象时，将调用委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:20:30.863

我想你已经使用了自我。在错误的地方。请看下面的代码；我已对更改添加评论

```
 - (NSFetchedResultsController *)fetchedResultsController {
    // Set up the fetched results controller if needed.
    if (fetchedResultsController == nil) {

        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        // Edit the entity name as appropriate.
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"DiskStory" inManagedObjectContext:self.managedObjectContext];
        [fetchRequest setEntity:entity];

        fetchRequest.predicate = [NSPredicate predicateWithFormat:@"isRemoved == %@", [NSNumber numberWithBool:NO]];

        // Edit the sort key as appropriate.
        NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"created" ascending:NO];
        NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

        [fetchRequest setSortDescriptors:sortDescriptors];

        // Set limit
        [fetchRequest setFetchBatchSize:25];
        // Set batch size
        [fetchRequest setFetchLimit:50];

        NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:kSavedStoryCache];
        aFetchedResultsController.delegate = self;
        fetchedResultsController = aFetchedResultsController;     // -> Shouldn't be self.fetchedResultsController 
 }
    return fetchedResultsController;        // -> Shouldn't be self.fetchedResultsController 
} 
```

此外，如果您已按如下方式合成**fetchedResultsController ：**

```
fetchedResultsController = _fetchedResultsController 
```

然后在`- (NSFetchedResultsController *)fetchedResultsController`方法中，您应该将其称为 _fetchedResultsController

# c++ - 在 C++ 中找到完全匹配的字符串

> ID：13020526
> 
> 赞同：3
> 
> 时间：2012-10-22T21:57:58.250
> 
> 标签：c++, string, match

这是我用来从 txt 文件中检测一行中的字符串的代码：

```
int main()
{
    std::ifstream file( "C:\\log.txt" );

    std::string line;
    while(!file.eof())
    {
        while( std::getline( file, line ) )   
        {
            int found = -1;
            if((found = line.find("GetSA"))>-1)
                std::cout<<"We found GetSA."<<std::endl;
            else if ((found = line.find("GetVol"))>-1)
                std::cout<<"We found GetVol."<<std::endl;
            else if ((found = line.find("GetSphereSAandVol"))>-1)
                std::cout<<"We found GetSphereSAandVol."<<std::endl;
            else
                std::cout<<"We found nothing!"<<std::endl;

        }
    }
    std::cin.get();
} 
```

这是我的日志文件：

```
GetSA (3.000000)

GetVol (3.000000)

GetSphereSAandVol (3.000000)

GetVol (3.000000)

GetSphereSAandVol (3.000000)

GetSA (3.00000) 
```

错误是，程序不会去寻找“GetSphereSAandVol”，因为它在“GetSA”处停止。显然，程序认为“GetSphereSAandVol”包含“GetSA”，所以会执行：

```
if(found = line.find("GetSA"))
    std::cout<<"We found GetSA."<<std::endl; 
```

这不是我想要的，因为我期待程序执行：

```
else if (found = line.find("GetSphereSAandVol"))
    std::cout<<"We found GetSphereSAandVol."<<std::endl; 
```

那么，无论如何我可以避免这种情况吗？得到我真正想要的东西？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:02:08.733

您误解了如何`find`工作。阅读[文档](http://en.cppreference.com/w/cpp/string/basic_string/find)。

条件应该是这样的：

```
if ((found = line.find("xyz")) != line.npos) { /* found "xyz" */ } 
```

* * *

我会这样写你的整个程序：

```
int main(int argc, char * argv[])
{
    if (argc != 2) { std::cout << "Bad invocation\n"; return 0; }

    std::ifstream infile(argv[1]);

    if (!infile) { std::cout << "Bad filename '" << argv[1] << "'\n"; return 0; }

    for (std::string line; std::getline(infile, line); )
    {
        int pos;

        if ((pos = line.find("abc")) != line.npos)
        {
            std::cout << "Found line 'abc'\n";
            continue;
        }

        if ((pos = line.find("xyz")) != line.npos)
        {
            std::cout << "Found line 'xyz'\n";
            continue;
        }

        // ...

        std::cout << "Line '" << line << "' did not match anything.\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T22:03:09.657

两个错误，一个是您询问的，一个是您没有询问的。

你的 if 语句是错误的。您误解了如何`string::find`工作。这是正确的方法

```
 if ((found = line.find("GetSA")) != string::npos)
           ...
        else if ((found = line.find("GetVol")) != string::npos)
           ...
        etc. 
```

如果`string::find`没有找到它正在寻找的东西，它会返回一个特殊的值`string::npos`。这就是您的 if 条件应该测试的内容。

第二个错误，丢失`while (!file.eof())`循环，完全没有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T22:05:29.967

如果未找到，该`string::find`函数将返回。`string::npos`否则它返回一个索引。您假设它返回一个布尔值并进行相应的测试。那是行不通的，因为`string::npos`计算结果为布尔值（非零）。此外，如果子字符串的索引为零，则不会通过。

您必须改为这样做：

```
if( std::string::npos != (found = line.find("GetSA")) )
   // etc... 
```

就个人而言，我不喜欢以这种方式设置值和测试的风格，但这取决于你。我可以用一个简单的辅助函数来代替：

```
bool FindSubString( std::string& str, const char *substr, int& pos )
{
    pos = str.find(substr);
    return pos != std::string::npos;
} 
```

然后：

```
if( FindSubString( line, "GetSA", found ) )
    // etc... 
```

但是在您的情况下，您甚至没有使用该`found`变量。所以你可以忽略我所说的关于风格的内容，然后做：

```
if( std::string::npos != line.find("GetSA") )
    // etc... 
```

# javascript - Chrome 在 localhost 上阻止 javascript

> ID：13020530
> 
> 赞同：46
> 
> 时间：2012-10-22T21:58:14.720
> 
> 标签：javascript, google-chrome, blocking

我正在使用 WAMP 在我的本地计算机（Windows 7 Ultimate x64）上开发一个站点，运行 APACHE v2.2.22、PHP 5.3.13 和 MySQL v5.5.24。我正在使用 Chrome v 22.0.1229.94 进行开发。然而，我在网站中有相当多的 javascript，Chrome 一直在无情地阻止 javascript 在页面上运行。

单击地址栏中的“此页面上被阻止的 javascript”小图标包括已选中“始终允许 Javascript 在 Localhost 上”的下拉菜单，并且我在 Chrome 的设置中也有一个 JavaScript 异常，明确表示始终允许在“http”上使用 JavaScript ：//本地主机'。

Cookie 被允许，“允许所有站点运行 JavaScript”被选中，我不知道为什么 Chrome 不允许运行 JavaScript。

总的来说，我没有必要找出解决方案，因为 IE9 和 Firefox 16.1 都允许 JavaScript 并且我可以使用它们。我只是好奇是否可以在 Chrome 中解决此问题，因为我想继续在 Chrome 中进行开发。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-12-31T17:09:20.157

如果您注意到 JavaScript 仅在控制台打开时被阻止（如某些人所说），则可能是您在控制台设置中禁用了 JavaScript。

1.  打开控制台。
2.  单击右上角的垂直省略号图标（或旧版本上的齿轮图标）并转到设置。
3.  查看是否选中了“禁用 JavaScript”复选框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T06:08:16.690

我有同样的问题，但只有在控制台打开时。当控制台关闭时，JavaScript 会在 localhost 上正常加载。虽然很难调试东西....

我通过在隐身窗口中打开 localhost 来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:26:41.990

你可以给你的本地服务器一个域名，这可能会有所帮助。

1.  在记事本中打开 C:\Windows\System32\drivers\etc\hosts
2.  编辑该文件在末尾添加一个新行 127.0.0.1 mydomain.com
3.  保存，现在转到 chrome 并输入[http://mydomain.com/](http://mydomain.com/)这应该指向您的本地服务器。

由于您不再在“localhost”上运行，因此 chrome 可能会让您通过。

让我知道这是否有效。祝你好运！

# javascript - JavaScript 中传递给函数的参数数量

> ID：13020532
> 
> 赞同：2
> 
> 时间：2012-10-22T21:58:16.577
> 
> 标签：javascript

JavaScript 对我来说是一个启示。我以为它会像另一种经典语言，如 C#、Java 等。但事实并非如此。“动态世界”是艰难而难以预测的。当我读到函数可以接收任意数量的参数时，我感到很惊讶。没有任何错误！我一点也不喜欢。我想要更多的“静态”，我想要某种编译时错误！

我的问题是：我需要担心吗？如果传递的参数数量超过特定函数的预期，抛出异常是一种好习惯吗？

```
function foo(one, two, three)
{
    // Is it good?
    if(arguments.length > arguments.callee.length)
        throw new Error("Wrong quantity of arguments in " + arguments.callee.name + "()");

    /* Stuff */
}

foo(1, 2, 3, 4); // -> Error
foo(1, 2, 3);    // -> OK 
```

我应该担心吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T22:01:58.787

你可能不应该担心。没有关于如何处理此类错误的一揽子规则。这完全取决于错误的类型和情况的类型。在某些情况下，如果这是一个严重的编程错误并且无法继续进行（例如执行所需功能的参数不足），抛出异常或从函数返回错误可能是有意义的。但是，在其他情况下，可以安全地忽略额外的参数，并且您可以继续愉快地进行，就好像该参数从未通过一样。

当你习惯了 javascript，你就会明白许多函数参数可以是可选的，一个函数可以用零个、一个、两个或三个甚至 N 个参数正确调用，并且函数中的代码可以适当地适应。这实际上允许您做一些在更“静态”的语言中不容易做到的事情。甚至可以适应参数的类型，并根据参数的类型适当地做一些事情。虽然这对于只有硬类型语言经验的人来说听起来像是异端，但它实际上非常有用。

随着时间的推移，您会维护一段代码，您还会发现能够将参数添加到函数的定义中是件好事通过并且不必更改任何使用该函数的先前代码，但是一些需要该新参数的新地方可以立即开始使用它。与其遍历整个代码库来修复该函数的每个调用者，不如只在一个文件中进行一次更改，然后立即开始使用该函数的新参数，而无需更改所有其他调用者。这非常有用。

* * *

因此，在更直接地回答您的问题时，传递给函数的额外参数绝不是 javascript 中的严重错误。您的代码可以忽略它并继续。如果您想提醒编写该代码的开发人员传递了意外的参数，您可以在函数/库的“调试”版本中以某种方式通知他们（可能是调试控制台上的一些警告文本），但我看不出任何原因为什么你应该在你的函数/库的“生产”版本中停止执行，而你可以在没有任何伤害的情况下继续执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T22:01:38.813

你不需要担心这个。如果您传递太多参数，该函数将忽略它。如果参数*太少*，您应该只抛出错误。在这种情况下，该功能可能无法运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T22:15:05.587

虽然我同意参数的数量并不重要（只要你在使用它们之前对你得到的参数进行类型检查就不会导致问题），因为一个未使用的、未调用的参数是行不通*的任何东西*，如果您特别担心，您可以创建传递参数的子集并在内部访问该对象：

```
function test(arg1, arg2, arg3) {
    var slice = Array.prototype.slice,
        subset = slice.call(arguments, 0, 3); // depending on how many arguments you want
} 
```

当然，这意味着您现在必须从`args`对象中恢复参数，并且由于多余的参数似乎是完全安全的，这似乎毫无意义。但这仍然是一种选择。

虽然没有必要。

# ms-access - 访问子表单，如何调整列大小以最适合？

> ID：13020534
> 
> 赞同：1
> 
> 时间：2012-10-22T21:58:24.223
> 
> 标签：ms-access, vba

我有一个带有子表单的表单。该子窗体显示动态创建的查询的结果（用户输入条件，我构建 SQL，然后更新 querydef 并显示）。问题是由于列是动态的，所以列的宽度不合适，有些正在切断文本。

有没有办法以编程方式循环遍历列（或在没有循环的情况下执行相同操作）并在刷新查询后将它们全部设置为最适合的宽度？

编辑：这是我的代码现在的样子：

```
CurrentDb.QueryDefs("SearchResults").sql = sql
CurrentDb.QueryDefs.Refresh   

Dim qdf1 As DAO.QueryDef
Dim fld1 As DAO.Field

Set qdf1 = CurrentDb.QueryDefs("SearchResults")

For i = 0 To qdf1.Fields.Count - 1
    Set fld1 = qdf1.Fields(i)
    fld1.CreateProperty "ColumnWidth", dbInteger

    fld1.Properties("ColumnWidth") = -2     'Throws error
    Set fld1 = Nothing
Next i

Me.Child20.SourceObject = "Query.SearchResults" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:02:41.697

您可以像这样设置列宽：

```
Sub SetColumnWidth()
Dim qdf1 As DAO.QueryDef
Dim fld1 As DAO.Field

Set qdf1 = CurrentDb.QueryDefs("query3")

For i = 0 To qdf1.Fields.Count - 1
    Set fld1 = qdf1.Fields(i)
    fld1.CreateProperty "ColumnWidth", dbInteger
    'very narrow indeed
    'fld1.Properties("ColumnWidth") = 200
    'Or -2 : Sizes the column to fit the visible text
    'but it is not quite as useful as it would seem
    fld1.Properties("ColumnWidth") = -2
    Set fld1 = Nothing
Next i

End Sub 
```

另请参阅[http://support.microsoft.com/kb/210427](http://support.microsoft.com/kb/210427)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:11:15.613

所以我刚才遇到了同样的问题。我很幸运有一半的查询工作，而另一半没有。我一直在使用这段代码：

```
Sub QueryData(strSQL As String)
    Dim qryData As DAO.QueryDef
    Dim intcount As Integer

    Set qryData = CurrentDb.QueryDefs("DataQuery")
    qryData.SQL = strSQL
    qryData.CreateProperty "ColumnWidth", dbInteger

    qryData.Fields(0).Properties("ColumnWidth") = 5760

    DoCmd.OpenQuery "DataQuery", , acReadOnly
End Sub 
```

这在我尝试使用它运行的一半查询中产生了错误。我将其追溯到这个奇怪但简单的事实：使用别名构建的列（即所有公式列和表达式）会消除此错误。如果该列只是一个直接的数据拉取，它工作正常。但是，如果该列是一个公式化的显示......它会吐出`no columwidth property`错误。

希望这会帮助别人！我知道这个问题大约一年了，但这是谷歌为我找到的关于这个主题的第一个结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-08T19:05:04.950

我能够抓住打开的表单并在该表单中自动调整选定的子表单。如果您有多个表单/子表单，您只需使用函数末尾的代码行使用新名称调用函数并将它们粘贴到您的程序中。

```
Public Function AutoSizeSbCtrl(frmNameTar, sbCtrlNameTar)
For Each frm In Forms
    frmName = frm.Name
    If frmName = frmNameTar Then
        For Each frmCtrl In frm.Controls
            frmCtrlName = frmCtrl.Name
            If frmCtrlName = sbCtrlNameTar Then
                For Each sbfrmCtrl In frmCtrl.Controls
                    sbfrmCtrlName = sbfrmCtrl.Name
                    On Error Resume Next
                    sbfrmCtrl.ColumnWidth = -2
                    On Error GoTo 0
                Next sbfrmCtrl
            End If
        Next frmCtrl
    End If
Next frm

' paste the lines below in your code where you want it to trigger (i did on an update)
'frmNameTar= "frm12345" ' where frm12345 is the name of the form the subform is in
'sbCtrlNameTar="sbfrm67890" ' where sbfrm67890 is the name of the subform you are trying to autofit
'auSize = AutoSizeSbCtrl(frmNameTar, sbCtrlNameTar)
'end paste
End Function 
```

# linux - 在 Linux 上将 Google Plugin for Eclipse 安装到 /opt 时出错

> ID：13020541
> 
> 赞同：3
> 
> 时间：2012-10-22T21:59:16.380
> 
> 标签：linux, eclipse, installation, file-permissions

我正在按照步骤安装位于此处的 GPE 4.2(Juno) [https://developers.google.com/eclipse/docs/install-eclipse-4.2](https://developers.google.com/eclipse/docs/install-eclipse-4.2)

尝试安装 GPE 时收到以下错误。

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Google Plugin for Eclipse 4.2 3.1.0.v201208080121-rel-r42 (com.google.gdt.eclipse.suite.e42.feature.feature.group 3.1.0.v201208080121-rel-r42) 缺少过滤器要求属性〜= $ 0：Eclipse平台4.2.1.v20120814-120134-9JF7BHVGFyMveli1uX6aTH0q-eAap6PAgOP5mO（org.eclipse.platform.feature.group 4.2.1.v20120814-120134-9JF7BHVGFyMveli1uX6aTH0q-eAap6PAgOP5.O.m **） linux.x86 [1.1.200.v20120522-1148]'**但找不到无法满足依赖关系：来自：Google Plugin for Eclipse 4.2 3.1.0.v201208080121-rel-r42 (com.google.gdt.eclipse.suite.e42.feature.feature.group 3.1.0.v201208080121- rel-r42) 到：org.eclipse.platform.feature.group 3.8.0

我在 linux 64 位系统（Linux Mint 13）上为 java EE（Juno）安装了 eclipse

这只发生在我尝试使用安装在 /opt 下的 eclipse 实例时。我在我的主目录下安装了另一个 eclipse 实例，并没有遇到这个问题。我假设在尝试使用安装在 /opt 下的实例时存在导致问题的路径/权限问题。

我应该怎么做才能解决这个问题？我正在尝试遵守文件系统层次结构标准。我使用此处发布的说明安装 Eclipse [http://colinrrobinson.com/technology/install-eclipse-ubuntu/](http://colinrrobinson.com/technology/install-eclipse-ubuntu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-31T20:22:50.900

您需要使用适当的权限将插件安装到 Eclipse 以访问 /opt。有两种选择：

1.  每当您想安装/更新插件时，使用 sudo 启动 Eclipse。
2.  授予您的用户/组对 /opt/ 的写入权限

我个人使用#2，没有任何问题。

注意：这与 google-plugin-for-eclipse 无关，它只是 Linux 和 Eclipse 安装目录的一般权限问题。

# performance - Loggly 的最大吞吐量是多少？

> ID：13020546
> 
> 赞同：6
> 
> 时间：2012-10-22T21:59:59.437
> 
> 标签：performance, node.js, loggly

Loggly 每秒可以处理多少个来自客户端的请求？我每秒只能处理大约 10-20 个请求，我想知道这是否正常。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T01:42:50.410

我刚刚运行了一堆测试，发现它不能真正通过使用 syslog-ng 的 tcp 连接来处理很多事情。

这是我的测试结果，供任何想尝试的人使用。为此，我使用了 balabit 的“loggen”程序，并将 200 字节的消息发送到 loggly 分配给我的 tcp 端口。请注意，尽管 syslog RFC（至少 3164）声明日志消息不应超过 1024 字节，但为了公平起见，我使用 200 字节数据包，因为许多消息都那么小。

注册了一个免费帐户。为测试配置了一个 TCP 连接。尝试发送各种金额，结果：

测试 1：失败

```
loggen -iS -r 6000  -s 200 -I 100 logs.loggly.com 16225
Send error Broken pipe, results may be skewed.      
average rate = 1392.13 msg/sec, count=18296, time=13.142, (average) msg size=200, bandwidth=271.74 kB/sec 
```

测试 2：失败

```
loggen -iS -r 4000  -s 200 -I 100 logs.loggly.com 16225 
Send error Broken pipe, results may be skewed.       
average rate = 2767.16 msg/sec, count=121146, time=43.779, (average) msg size=200, bandwidth=540.15 kB/sec 
```

测试 3：失败

```
loggen -iS -r 2500  -s 200 -I 100 logs.loggly.com 16225  
Send error Broken pipe, results may be skewed.      
average rate = 1931.27 msg/sec, count=85878, time=44.467, (average) msg size=200, bandwidth=376.98 kB/sec 
```

测试 4：失败

```
loggen -iS -r 2000  -s 200 -I 100 logs.loggly.com 16225    
Send error Broken pipe, results may be skewed.      
average rate = 1617.72 msg/sec, count=83134, time=51.389, (average) msg size=200, bandwidth=315.78 kB/sec 
```

测试 5：失败

```
loggen -iS -r 1000  -s 200 -I 100 logs.loggly.com 16225 
Send error Broken pipe, results may be skewed.      
average rate = 936.50 msg/sec, count=63331, time=67.624, (average) msg size=200, bandwidth=182.81 kB/sec 
```

测试 6：通过配置的持续时间，失败 > 100 秒 - 参见测试 7

```
loggen -iS -r 500  -s 200 -I 100 logs.loggly.com 16225  
average rate = 325.00 msg/sec, count=32501, time=100.001, (average) msg size=200, bandwidth=63.44 kB/sec 
```

测试 7：失败 - 以更长的时间在 500 EPS 下运行新测试，管道在 255 秒后破裂：

```
loggen -iS -r 500  -s 200 -I 10000 logs.loggly.com 16225
Send error Broken pipe, results may be skewed.     
average rate = 323.35 msg/sec, count=82642, time=255.577, (average) msg size=200, bandwidth=63.12 kB/sec 
```

测试 8：失败（以 200 EPS 运行更长时间，但仍然失败）

```
loggen -iS -r 200  -s 200 -I 10000 logs.loggly.com 16225 
Send error Broken pipe, results may be skewed.      
average rate = 163.53 msg/sec, count=234090, time=1431.470, (average) msg size=200, bandwidth=31.92 kB/sec 
```

测试 9：失败（再次，运行时间更长但仍然失败）

```
loggen -iS -r 50  -s 200 -I 10000 logs.loggly.com 16225    
Send error Broken pipe, results may be skewed.    
average rate = 47.36 msg/sec, count=89325, time=1886.014, (average) msg size=200, bandwidth=9.25 kB/sec 
```

测试 10：失败？（结果相同，但又失去了联系。很难相信他们不能处理 10 eps？）

```
loggen -iS -r 10  -s 200 -I 10000 logs.loggly.com 16225 
Send error Broken pipe, results may be skewed.  
average rate = 9.94 msg/sec, count=1568, time=157.770, (average) msg size=200, bandwidth=1.94 kB/sec 
```

是否进行了一些网络搜索以查看 loggly 实际可以做什么，但只有营销材料说它是可扩展的，而不是它的可扩展性。我确实找到了这个： http: [//twitter.com/jordansissel/status/5948244626509824](http://twitter.com/jordansissel/status/5948244626509824) 每秒只有 22 个事件……</p>

完全披露：我是 LogZilla 的创始人，所以我正在测试竞争对手，因为我们正在推出基于云的 syslog 解决方案。我的测试表明，我们的软件每秒能够处理 2,000 到 12,000 个事件，具体取决于我们在云中使用的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:54:37.300

我真的不知道，但我一直在寻找 node.js 的日志记录解决方案，但没有运气。

为什么？

因为我检查过的所有（没有检查所有）都在使用**同步**磁盘写入！......这完全降低了性能。

所以如果你问我——你应该重新考虑你的需求，只记录你真正需要的东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-22T18:27:45.673

我进行了类似于[Clayton answer](https://stackoverflow.com/a/13694867/1608110)中的测试，因为他的结果让我担心如果我同时发送太多消息， [Loggly会丢弃消息。](https://www.loggly.com/)我想看看克莱顿在 2012 年遇到的问题今天是否仍然存在。

也就是说，这是我发现运行 loggen 60 秒每秒生成 100,000 条消息的结果。

```
$ loggen -iS -r 100000 -s 200 -I 60 logs-01.loggly.com port
average rate = 34885.98 msg/sec, count=2093163, time=60.000, (average) msg size=200, bandwidth=6809.74 kB/sec 
```

我也很好奇一些竞争对手会为类似的测试返回什么，我发现了以下内容：

**[纸迹](https://papertrailapp.com/)**

```
loggen -iS -D -r 100000 -s 200 -I 60 logs2.papertrailapp.com PORT
average rate = 24344.71 msg/sec, count=1461327, time=60.026, (average) msg size=200, bandwidth=4752.09 kB/sec 
```

**[日志](https://logentries.com/)**

```
$ loggen -iS -D -r 100000 -s 200 -I 60 api.logentries.com PORT
average rate = 14076.76 msg/sec, count=844609, time=60.000, (average) msg size=200, bandwidth=2747.78 kB/sec 
```

显然，这些并不是随着系统随时间变化而始终不变的硬数字。这只是为我们提供了一个时间点参考，说明他们在我运行测试时如何响应。您的里程会有所不同！

**更新**：我对 Loggly 进行了更长的（近 3 小时）测试并收到以下信息：

```
loggen -iS -r 100000 -s 200 -I 10000 logs-01.loggly.com port 
average rate = 15869.22 msg/sec, count=158692177, time=10000.000, (average) msg size=200, bandwidth=3097.67 kB/sec 
```

# graph - 如何计算 NetworkX 中“节点”的中心性统计信息

> ID：13020556
> 
> 赞同：1
> 
> 时间：2012-10-22T22:00:54.960
> 
> 标签：graph, networkx

我构建了一个 networkx DiGraph 并计算了标准的“图级”指标：度中心性、中介中心性、特征向量中心性和整个图的 pagerank。但是，我对隔离特定节点以及查看与该特定节点相关的指标更感兴趣。

所以问题如下：给定一个图 G 和一个节点 X，哪些节点最（直接）影响那个特定的节点 X？大概我必须建立一个以 X 为中心的子图 H；所以从节点 X 开始，我会“走”图（比如说）三层深度，并使用相应的边来构建一个以节点 X 为中心的子图。然后我会在这个子图 H 上重新运行上面提到的所有标准中心度度量. 这是最好的方法吗？在networkx中有没有一种有效的方法来做到这一点？我应该尝试别的吗？你有什么建议？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:27:28.843

有一种相当简单的方法可以创建以节点为中心的子图。您可以使用 networkx.ego_graph(G,n,radius) 在节点 n 的指定半径内返回 G 的子图。有向与无向、权重等还有其他选项。有关 详细信息，请参阅[http://networkx.lanl.gov/reference/generated/networkx.generators.ego.ego_graph.html#networkx.generators.ego.ego_graph 。](http://networkx.lanl.gov/reference/generated/networkx.generators.ego.ego_graph.html#networkx.generators.ego.ego_graph)

# java - 屏幕关闭时计时器停止工作

> ID：13020564
> 
> 赞同：2
> 
> 时间：2012-10-22T22:01:34.543
> 
> 标签：java, android, timer, handler

嗨，我是 Android 和 Java 语言的新手。我有这个代码可以告诉你你玩了多久。该代码工作正常，除非屏幕关闭或用户按下电源按钮（睡眠模式）它停止工作。任何人都可以建议一个简单的代码来保持我的时间计数，即使在屏幕关闭或处于睡眠模式时也是如此。谢谢...

```
public class test extends Activity 
{
    Handler mHandler = new Handler();

    Runnable mUpdateTime = new Runnable() 
    {
        public void run() 
        { 
            sec += 1;
            if(sec >= 60) 
            {
                sec = 0;
                min += 1;
                if (min >= 60) 
                {
                    min = 0;
                    hour += 1;
                }
            }
            playtime.setText(String.format("%02d:%02d:%02d", hour, min, sec));
            mHandler.postDelayed(mUpdateTime, 1000);
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mHandler.postDelayed(mUpdateTime, 1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:08:28.553

我建议不要计算时间，而是设置一个开始时间，然后从当前时间中减去它以获得经过的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:08:46.077

[Chronometer 小部件](http://developer.android.com/reference/android/widget/Chronometer.html)可能会解决您的问题。

我建议不要在睡眠模式下进行任何可能需要计数的解决方案，因为这会缩短用户的电池寿命。

# iis-7 - MSDeployPublish 上的 MSDeploy“挂起”

> ID：13020570
> 
> 赞同：26
> 
> 时间：2012-10-22T22:02:00.643
> 
> 标签：iis-7, msdeploy

试图让 MSDeploy 工作，它在 MSDeployPublish 任务上“挂起”。它说

> “开始 Web 部署将应用程序/包发布到 `https://myserver:8172/msdeloy.axd?site=mysite`...从源启动 Web 部署任务：archiveDir（归档路径）到目标：auto()。”

它只是停止。在我终止进程之前，它会像这样坐 30 分钟，或者我想更长时间。

在它部署到的服务器上，在本例中为 myserver，MSDeploy 出现错误，内容如下：

> ERROR_SERIALIZER_ALREADY_DISPOSED - 回调线程发生错误。这些错误通常是良性的，并且会自动处理。详细信息如下： System.Web.HttpException：远程主机关闭了连接。错误代码为 0x800704CD。在 System.Web.Hosting.IIS7WorkerRequest.RaiseCommunicationError(Int32 结果，布尔 throwOnDisconnect) 在 System.Web.Hosting.IIS7WorkerRequest.ExplicitFlush() 在 System.Web.HttpResponse.Flush(Boolean finalFlush) 在 System.IO.BufferedStream.FlushWrite( ) 在 System.IO.BufferedStream.Flush() 在 System.Xml.XmlTextWriter.Flush() 在 Microsoft.Web.Deployment.TraceEventStreamSerializer.WriteKeepAliveEvent()

我找不到其他错误日志或消息。我可以点击 url 到 msdeploy，例如，如果我进入`https://myserver:8172/msdeloy.axd`浏览器，我会收到自签名证书警告，然后提示输入凭据，因此服务器上的 MSDeploy 似乎已启动并正在运行。

服务器 (myserver) 是带有 IIS7 的 Windows 2008R2。

真正糟糕的是，如果我重新启动要部署到（myserver）的服务器，它就可以工作了！

关于这里发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-07T15:24:10.727

刚刚经历了同样的事情。这是解决问题的托管公司的回复。

“在调查时，我们发现连接尝试挂在我们这边。需要停止 Web 管理服务以编辑管理服务的设置，但在尝试停止此服务时，它不会关闭，因此我们强行终止了该进程并且在启动它后（没有对设置进行任何更改），Visual Studio 正在与 Web Deploy 建立连接，没有问题。”

# c++ - 指针 - 参考向量

> ID：13020573
> 
> 赞同：1
> 
> 时间：2012-10-22T22:02:19.683
> 
> 标签：c++, pointers

我习惯用 C# 或 Java 编程，所以我在 C++ 方面做得非常糟糕。我相信这很容易，但我就是做不到。请帮我。

我有这个：

```
 void swap(vector  * vet, int i, int j)
{
    int temp = vet[i];
    vet[i] = vet[j];
    vet[j] = temp;
} 

```

我以这种方式调用该方法：

```
 swap(&vet, j, j - 1); 

```

我想要的是使用指针而不是使用值来传递向量。

Obs：没有“*”和“&”，代码编译得很好。

请不要说我必须至少尝试研究指针，因为我做到了。我就是不能让这该死的东西工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T22:07:01.197

您应该通过引用而不是“按指针传递”来获取向量。

```
void swap(std::vector<int>& vet, std::size_t i, std::size_t j)
{
    using std::swap;
    swap(vet[i], vet[j]);
} 
```

[http://en.cppreference.com/w/cpp/algorithm/swap](http://en.cppreference.com/w/cpp/algorithm/swap)

注意更惯用的：

[http://en.cppreference.com/w/cpp/algorithm/iter_swap](http://en.cppreference.com/w/cpp/algorithm/iter_swap)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T22:17:38.723

到目前为止，每个人都通过告诉您使用引用来回应，这是正确的，但他们未能解释为什么您的代码不起作用。这里的问题是您不了解指针运算。

假设我们有一个指向 10 `int`s 的指针：

```
// best to use a vector for this, but for the sake of example...
int *p = new int[10]; 
```

现在，如果我们想改变`int`那块内存中第二个的值，我们可以这样写：

```
*(p + 1) = 20; 
```

或者，等价物：

```
p[1] = 20; 
```

看？这两行做同样的事情。添加`n`到指针会按`n * sizeof *p`字节增加指针的地址。指针算法很方便，因为它对您隐藏了`sizeof`位，并允许您使用逻辑单元（元素）而不是字节。

因此，知道这一点，回到您损坏的代码：

```
vet[i] = vet[j]; 
```

这索引`i * sizeof *vet`远离指针的字节，即*远离基地址的 i 个完整向量*。显然这是错误的，您想`operator[]`在向量上调用，即将它视为一个数组。然而，它不是一个数组，所以正确的语法是：

```
(*vec)[i] 
```

或者

```
vec->operator[](i); 
```

也就是说......只需使用参考。更安全（保证对象有效）和惯用的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T22:07:47.600

你可以尝试类似......

```
void swap(vector<int> &vet, int i, int j)
{
    int temp = vet[i];
    vet[i] = vet[j];
    vet[j] = temp;
} 
```

并将您的交换功能称为

```
swap(vet,i,j); 
```

底线：使用引用变量。它们更像 Java 中的引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T22:14:40.917

事实上，在 C++ 中，你只会说

```
using std::swap;

swap(vet[i], vet[j]); 
```

# c# - 如何转换收藏 to ArrayList< Dictionary >? Hi I currently have a Collection container and I need to dump its contents into an ArrayList or a List. This ArrayList holds a dictionary object. Now if I have 问问题 问问题 2012-10-22T22:02:22.117 848 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Hi I currently have a Collection container and I need to dump its contents into an ArrayList or a List. This ArrayList holds a dictionary object. Now if I have something like this I tried doing ToList but it doesnt work Collection content = new Collection(); ....populate content container..... List <dictionary<string, string="">> lst = new List <dictionary<string, string="">>(); lst= ( List< Dictionary <string, string="">> ) content.ToList(); Any suggestions on how I could do this ? Edit: My content collection should be a list which contains a map. Combining multiple column values into a single column row result I have a query that pulls in group sale orders for a venue. My current query pulls all of the info I need, but gives me multiple rows for each order number: ordCode cltClientName adrCityDesc adrStateDesc adrZipCode gsnValue2 evShow shDescr 739802 Stevens Elementary, Aberdeen WA 98520 64 183 Group - Museum Admission 739802 Stevens Elementary, Aberdeen WA 98520 64 237 Extreme Planets What I would like to see is a single row for each order, but with the last column having results separated by comma: ordCode cltClientName adrCityDesc adrStateDesc adrZipCode gsnValue2 evShow shDescr 739802 Stevens Elementary, Aberdeen WA 98520 64 183 Group - Museum Admission, Extreme Planets The Query: SELECT DISTINCT(ordCode), cltClientName, adrCityDesc, adrStateDesc, adrZipCode, gsnValue2, evShow, shDescr --COUNT(tiCode) from Orders inner join OrderContacts on orcOrderNumber = ordCode inner join Clients on orcClientID = cltCode inner join ClientAddresses on cltCode = claClientCode inner join Addresses on claAddressCode = adrCode inner join Tickets on tiOrder = ordCode inner join dbo.Events on tiEvent = evCode inner join GroupSaleNotes on ordCode = gsnOrderNumber inner join Shows on evShow = shCode WHERE ordOrderTypeTitle = 7 -- Group Sales only and ordOpenDate between '2011-06-01 00:00:00.000' and '2012-05-31 23:59:59.999' and gsnNoteType = '5' and cltIsGroupLeader = '1' --and evShow in (106, 107) GROUP BY ordCode, cltClientName, cltCode, adrCityDesc, adrStateDesc, adrZipCode, gsnValue2, evShow, shDescr ORDER BY adrCityDesc, cltClientName Is there a way to combine this part of the result set? c# 4 1 回答 1 This answer is useful 4 如果您愿意，可以将其转换为 Dictionary，但您必须确保执行运行时检查... lst = content.Cast<dictionary<string, string="">>().ToList(); 于 2012-10-22T22:05:43.660 回答 Related 1 javascript - Angular - orderBy 字符串作为数字 2 android - 无法在 Android 的 OpenGL ES 2.0 中绘制正方形，但可以绘制三角形 1 fopen - Visual Studio，读取文件，获取错误的 ptr 1 php - 从 php 网站解码附件 url 1 sharepoint - 将日期与共享点进行比较 1 c# - 在 c# 中使用 wmi 获取网络利用率 1 java - 如何将字节（位）放入字节 4 windows - 在 32 位 Windows 操作系统上使用 %PROGRAMFILES(x86)% 3 java - 读取文本文件并将文件中的字符串分配给变量 0 wcf - 检查是否存在 WCF 传输会话 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13020574
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：c#

Hi I currently have a Collection container and I need to dump its contents into an ArrayList or a List. This ArrayList holds a dictionary object.

Now if I have something like this I tried doing ToList but it doesnt work

```
Collection<object> content = new Collection<object>();
....populate content container.....
List <Dictionary<string, string>> lst = new List <Dictionary<string, string>>();
lst= ( List< Dictionary<string, string> > ) content.ToList(); 
```

Any suggestions on how I could do this ?

Edit: My content collection should be a list which contains a map.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:05:43.660

如果您愿意，可以将其转换为 Dictionary，但您必须确保执行运行时检查...

```
lst = content.Cast<Dictionary<string, string>>().ToList(); 
```</dictionary<string,></string,></dictionary<string,></dictionary<string,>

# sql - 将多个列值组合成单个列行结果

> ID：13020575
> 
> 赞同：1
> 
> 时间：2012-10-22T22:02:22.603
> 
> 标签：sql, sql-server, sql-server-2005, group-by

我有一个查询，它为一个场所拉入团体销售订单。我当前的查询提取了我需要的所有信息，但为每个订单号提供了多行：

```
ordCode cltClientName          adrCityDesc  adrStateDesc    adrZipCode  gsnValue2   evShow  shDescr
739802  Stevens Elementary,    Aberdeen         WA             98520       64        183    Group - Museum Admission
739802  Stevens Elementary,    Aberdeen         WA             98520       64        237    Extreme Planets 
```

我想看到的是每个订单都有一行，但最后一列的结果用逗号分隔：

```
ordCode cltClientName          adrCityDesc  adrStateDesc    adrZipCode  gsnValue2   evShow  shDescr
739802  Stevens Elementary,    Aberdeen         WA             98520       64        183    Group - Museum Admission, Extreme Planets 
```

查询：

```
SELECT DISTINCT(ordCode),
        cltClientName, 
        adrCityDesc,
        adrStateDesc,
        adrZipCode,
        gsnValue2,
        evShow,
        shDescr

--COUNT(tiCode)
  from Orders 
        inner join OrderContacts on orcOrderNumber = ordCode
        inner join Clients on orcClientID = cltCode
        inner join ClientAddresses on cltCode = claClientCode
        inner join Addresses on claAddressCode = adrCode
        inner join Tickets on tiOrder = ordCode
        inner join dbo.Events on tiEvent = evCode
        inner join GroupSaleNotes on ordCode = gsnOrderNumber
        inner join Shows on evShow = shCode
 WHERE ordOrderTypeTitle = 7 -- Group Sales only
  and ordOpenDate between '2011-06-01 00:00:00.000' and '2012-05-31 23:59:59.999'
  and gsnNoteType = '5'
  and cltIsGroupLeader = '1'
   --and evShow in (106, 107)
 GROUP BY ordCode, cltClientName, cltCode, adrCityDesc, adrStateDesc,
      adrZipCode, gsnValue2, evShow, shDescr
ORDER BY adrCityDesc, cltClientName 
```

有没有办法组合这部分结果集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:09:59.743

您以前有一个用 MySQL 标记的问题，因此 MySQL 的解决方案将使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

```
SELECT ordCode,
  cltClientName, 
  adrCityDesc,
  adrStateDesc,
  adrZipCode,
  gsnValue2,
  group_concat(evShow),
  group_concat(shDescr)
from Orders 
inner join OrderContacts 
  on orcOrderNumber = ordCode
inner join Clients 
  on orcClientID = cltCode
inner join ClientAddresses 
  on cltCode = claClientCode
inner join Addresses 
  on claAddressCode = adrCode
inner join Tickets 
  on tiOrder = ordCode
inner join dbo.Events 
  on tiEvent = evCode
inner join GroupSaleNotes 
  on ordCode = gsnOrderNumber
inner join Shows 
  on evShow = shCode
WHERE
  ordOrderTypeTitle = 7 -- Group Sales only
  and ordOpenDate between '2011-06-01 00:00:00.000' and '2012-05-31 23:59:59.999'
  and gsnNoteType = '5'
  and cltIsGroupLeader = '1'
  --and evShow in (106, 107)
GROUP BY ordCode,
  cltClientName, 
  cltCode,
  adrCityDesc,
  adrStateDesc,
  adrZipCode,
  gsnValue2
ORDER BY adrCityDesc,
  cltClientName 
```

这适用于`GROUP_CONCAT()`the`evShow`和`shDescr`列，因为这两个值都有多个值。

在 SQL Server 中，您可以使用与此类似的内容（*未经测试*）：

```
SELECT ordCode,
  cltClientName, 
  adrCityDesc,
  adrStateDesc,
  adrZipCode,
  gsnValue2,
  stuff((select distinct ', ' + cast(e.evShow as varchar(10))
         from dbo.events e
         where tiEvent = evCode
         FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') evShow,
  stuff((select distinct ', ' + cast(e.shDescr as varchar(10))
         from dbo.events e
         where tiEvent = evCode
         FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') evShow,
from Orders 
inner join OrderContacts 
  on orcOrderNumber = ordCode
inner join Clients 
  on orcClientID = cltCode
inner join ClientAddresses 
  on cltCode = claClientCode
inner join Addresses 
  on claAddressCode = adrCode
inner join Tickets 
  on tiOrder = ordCode
--inner join dbo.Events 
--  on tiEvent = evCode
inner join GroupSaleNotes 
  on ordCode = gsnOrderNumber
inner join Shows 
  on evShow = shCode
WHERE
  ordOrderTypeTitle = 7 -- Group Sales only
  and ordOpenDate between '2011-06-01 00:00:00.000' and '2012-05-31 23:59:59.999'
  and gsnNoteType = '5'
  and cltIsGroupLeader = '1'
  --and evShow in (106, 107)
GROUP BY ordCode,
  cltClientName, 
  cltCode,
  adrCityDesc,
  adrStateDesc,
  adrZipCode,
  gsnValue2
ORDER BY adrCityDesc,
  cltClientName 
```

# php - PHP Apache - 如何创建安全的工作目录，对网络不可见

> ID：13020576
> 
> 赞同：0
> 
> 时间：2012-10-22T22:02:25.583
> 
> 标签：php, security

我创建了一个 PHP 脚本，它需要一个大的 html 文件，并使用 DOMDocument 将其分割成更小的文件。为了节省脚本内存并且不必使用数据库，我按顺序完成了此操作并将它们保存为数百个 html 文件。我的问题是，如何确保这些文件对外界不可见，但仍保留将它们用作未来处理的资源的能力（将各种文件拼凑在一起并显示在页面上）？

我正在使用 Amazon EC2 - Centos 6/Apache。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:07:09.733

将它们放在一个不是您的 Web 根目录的子目录（即公开打开的目录）的目录中。

另一种可能的方法（如果您使用的是 Apache）是在目录中使用`.htaccess`文件`Deny from all`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T22:23:10.663

到目前为止，最好的方法是将它们存储在文档根目录之外（可能低于一级）。

否则，也许在将来，您的设置、`.htaccess`文件`httpd.conf`或其他元素可能会更改并显示目录内容。

将它们存储在 docroot 之外意味着它们将**永远不**可见。

# wpf - WPF 绑定源不是预期的 DataContext

> ID：13020580
> 
> 赞同：0
> 
> 时间：2012-10-22T22:02:47.233
> 
> 标签：wpf, xaml, binding

我有一个简单的绑定问题，因为我觉得我对绑定如何工作的看法缺少一些基本的东西。

我假设由于我已在代码隐藏中将 MainWindow 的 DataContext 设置为 ViewModel，除非另有说明，否则 MainWindow.xaml 中的所有绑定都将假定此 DataContext 的源。当我使用我的 UserControl（它本身有一个 ViewModel 驱动它）时，情况似乎并非如此

我的场景最好用代码描述：

主窗口.xaml.cs

```
private ViewModels.MainMenuViewModel vm;

public MainWindow()
{
    InitializeComponent();

    vm = new ViewModels.MainMenuViewModel();
    this.DataContext = vm;
} 
```

MainWindow.xaml（使用代码隐藏中设置的数据上下文）

```
x:Class="Mediafour.Machine.EditorWPF.Views.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:uc="clr-namespace:Machine.EditorWPF.Views"
xmlns:local="clr-namespace:Machine.EditorWPF"
xmlns:localVM="clr-namespace:Machine.EditorWPF.ViewModels"
Title="MainWindow" Height="350" Width="650">

  <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>
        <uc:MachineTreeView x:Name="MachineTreeView" Grid.Column="0" MachineDocument="{Binding Path=CurrentDocument}" /> 
```

MainWindowViewModel.cs

```
 public class MainWindowViewModel : ObservableObject
    {
       public MainWindowViewModel()
        {
            OpenMachine(@"D:\Projects\Agnes\EditorWPF\Test.machine");
        }

        private void OpenMachine(string filePath)
        {
            MachineDocument currentDocument = MachineDocument.OpenFile(filePath);
            CurrentDocument = currentDocument;
        }

        private MachineDocument _currentDocument;
        public MachineDocument CurrentDocument
        {
            get { return _currentDocument; }
            set
            {
                if (_currentDocument != null)
                {
                    _currentDocument.Dispose();
                    _currentDocument = null;
                }

                _currentDocument = value;
                base.RaisePropertyChanged("CurrentDocument"); //this fires
            }
        } 
```

使用这种方法，MainWindow.xaml 中的绑定语句会出错。查看 Snoop 绑定错误，它指出在**MachineViewModel**中找不到**CurrentDocument属性**

 **```
System.Windows.Data Error: 40 : BindingExpression path error: 'CurrentDocument' property not found on 'object' ''MachineViewModel' (HashCode=27598891)'. BindingExpression:Path=CurrentDocument; DataItem='MachineViewModel' (HashCode=27598891); target element is 'MachineTreeView' (Name='MachineTreeView'); target property is 'MachineDocument' (type 'MachineDocument') 
```

**为什么在MainWindow**中完成绑定时会查看**MachineViewModel**？

 **MainWindow 中的其他绑定属性确实按预期工作，但这是我拥有的唯一 UserControl 绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:34:56.443

要么这是一个简单的错误

*   你正在设置`MainMenuViewModel`而不是`MainWindowViewModel`as`MainWindow.DataContext`

或许

*   您`DataContext`以错误的方式为 UserControl 设置了。看看这个[用于创建可重用用户控件的简单模式，](http://www.scottlogic.co.uk/blog/colin/2012/02/a-simple-pattern-for-creating-re-useable-usercontrols-in-wpf-silverlight/)以正确的方式进行操作。****

# silverlight - Silverlight 自定义字体在运行时不起作用

> ID：13020581
> 
> 赞同：0
> 
> 时间：2012-10-22T22:02:49.333
> 
> 标签：silverlight, silverlight-4.0, fonts

我有一个使用 Visual Studio 2012 Web Express 运行的 Silverlight 4 应用程序。我在项目的 Fonts 文件夹中添加了一个 CustomFont.zip。该文件被标记为“资源”。

当我使用字体时，例如在 TextBlock 中，我可以在 Visual Studio XAML 设计器中看到它。但是当我运行应用程序时，它使用默认标准字体。

这是我的 TextBlock 的示例

```
<TextBlock FontFamily="/Fonts/CustomFont.zip#MyFontName" >Hello World</TextBlock> 
```

我已经尝试过像上面的示例那样使用嵌入式 Zip。我也直接尝试了字体（没有zip）。尝试使用 TTF 和 OTF 字体。总是相同的结果我可以在设计时看到它，但在运行时看不到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T18:23:37.843

I also had same problem and I solved like below. I had to go through a lot of forums including this but none works. But some forum asked me to forcibly load font before I come to point of my interest.

In my TextBlockStyles.xaml resource dictionary I created a styke

```
<Style x:Key="RadWindowTitleTextStyle"
         TargetType="TextBlock">
      <Setter Property="Foreground"
            Value="#FFB9D449" />
      <Setter Property="FontSize"
            Value="18.667" />
      <Setter Property="FontFamily"
            Value="/sampleawebsite.application;component/Assets/Fonts/UBSHead.ttf#UBSHeadline" />
      </Style> 
```

In my MainPage, I just gave below to load my font

```
<TextBlock Text="Do not display Font load purpose only"
                   Width="1"
                   Height="1"
                   Style="{StaticResource RadWindowTitleTextStyle}"
                   Foreground="Transparent" /> 
```

Below is my point of interest in one of my ChildWindow popup styles resource dictionary called RadWindowStyles.xaml

```
<TextBlock Text="{TemplateBinding Title}"
           Style="{StaticResource RadWindowTitleTextStyle}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:28:17.443

我确定您现在已经可以正常工作了，但是我遇到了同样的问题。我通过像下面这样格式化我的 FontFamily 字符串来让它工作，你绝对不希望文件在一个 zip 文件中。我在我创建的名为“Fonts”的项目文件夹中有我的字体。

```
<TextBlock FontFamily="./Fonts/MyFontName.ttf#MyFontName" >Hello World</TextBlock> 
```

# android - getInt 从 sharedPreferences android

> ID：13020584
> 
> 赞同：0
> 
> 时间：2012-10-22T22:02:58.063
> 
> 标签：android, sharedpreferences

我正在尝试使用 getInt 从我的偏好中获取一个整数，因此当用户在偏好中选择一项运动时，它将根据他们选择的运动设置不同的布局

我的爪哇

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (getPrefs.getInt("sports", 1)){

    setContentView(R.layout.main);
    }else if(getPrefs.getInt("sports", 1)){

        setContentView(R.layout.hockey);
    }else if(getPrefs.getInt("sports", 1)){

        setContentView(R.layout.basketball);
    } 
```

我的偏好xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<ListPreference
    android:entries="@array/list"
    android:key="sports"
    android:summary="Choose your sport"
    android:title="Sports" 
    android:entryValues="@array/lValues"
    android:defaultValue="1">
</ListPreference> 
```

我的数组 xml

```
<string-array name="list">

     <item >
        Soccer
    </item>

    <item >
        Lacross
    </item>

    <item >
        Hockey
    </item>

    <item >
        VolleyBall
    </item>

    <item >
        Basketball
    </item>

    </string-array>

     <string-array name="lValues">
          <item >
         1
    </item>

    <item >
         2
    </item>

    <item >
         3
    </item>

    <item >
         4
    </item>
    <item>
        5
    </item>
         </string-array> 
```

我得到了错误

```
 getPrefs.getInt("sports", 1) 
```

如果有区别的话，最小 sdk 和目标 sdk 都是 10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:14:03.127

1 与真实不同。

1 是一个 int 而 true 是一个布尔值。

我想你应该这样做：

```
if(getPrefs.getInt("sports", 1)==1) 
```

或者

```
if(getPrefs.getInt("sports", 1)==2) 
```

顺便说一句，在你的情况下，我会这样做：

```
switch(getPrefs.getInt("sports", 1)){
    case 1:
        setContentView(R.layout.main);
        break;
    case 2:
        setContentView(R.layout.hockey);
        break;
    //blahBlah
} 
```

# string - 如何将两个向量粘贴在一起并在最后填充？

> ID：13020591
> 
> 赞同：4
> 
> 时间：2012-10-22T22:04:09.247
> 
> 标签：string, r, paste

我想将`paste`两个字符串放在一起并在末尾用另一个字符填充以使组合具有一定的长度。我想知道是否有`paste`一个可以通过的选项或我缺少的另一个技巧？我可以通过计算每行的长度然后调用`paste`with来在多行中执行此操作，`rep(my_pad_character,N)`但我想在一行中执行此操作。

例如：pad together`"hi"`和`"hello"`pad with an`"a"`使序列长度为 10。结果将是`"hihelloaaa"`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T22:12:42.790

这是一种选择：

```
s1 <- "hi"
s2 <- "hello"

f <- function(x, y, pad = "a", length = 10) {
   out <- paste0(x, y)
   nc <- nchar(out)
   paste0(out, paste(rep(pad, length - nc), collapse = ""))
}

> f(s1, s2)
[1] "hihelloaaa" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T22:09:46.023

您可以使用该`stringr`功能`str_pad`

```
library(stringr)
str_pad(paste0('hi','hello'), side = 'right', width = 10 , pad = 'a') 
```

# objective-c - 检测 UIScrollView 内的 UIView 上的触摸，最好禁用交互

> ID：13020593
> 
> 赞同：3
> 
> 时间：2012-10-22T22:04:13.117
> 
> 标签：objective-c, ios, xcode, cocoa-touch, uiscrollview

我有一个`UIScrollView`在`UIViews`里面。我正在尝试做的是在 UIView 被触摸/未触摸时捕获触摸事件。

我遇到的问题是`UIScrollView`似乎吞下了所有的触摸事件，特别是如果你在`UIView`.

我最好希望在`UIScrollView`自动滚动时禁用 userInteraction。

这可能吗？

我已经尝试将其子类化，`UIViews`但从未在其中调用过触摸事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:43:10.023

您可以使用以下内容将 a 附加`tapGesture`到您`scrollview`的：

```
 UITapGestureRecognizer* tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapGestureUpdated:)];
   tapGesture.delegate = self;
   tapGesture.numberOfTapsRequired = 1;
   tapGesture.numberOfTouchesRequired = 1;
   [self addGestureRecognizer:_tapGesture]; 
```

然后在您的`- (void)tapGestureUpdated:(UITapGestureRecognizer *)tapGesture`方法中，这是您确定触摸位置并确定您的子视图之一是否有选择的责任。然后，您可以在委托上调用一个方法，通知已触摸特定视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:40:27.343

也许重新排序您的视图，以便具有与之关联的触摸识别器对象的视图是应用程序识别的。将它在文档大纲中移动到顶部（滚动视图）

# wordpress - 一台服务器上有 2 个不同的 wordpress cmses，年轻博客上的子域重定向到旧博客

> ID：13020595
> 
> 赞同：0
> 
> 时间：2012-10-22T22:04:30.497
> 
> 标签：wordpress, dns, freebsd, subdomain

我目前在最新的freebsd 64位服务器9上运行~问题是我有：

*   我的服务器上有 2 个独立的博客，有两个不同的域
*   较旧的是“donosiciele.pl” - 工作正常
*   较新的“digsite.cat”配置了一个子域多站点。

让我们切入正题。我没有 dns 通配符 ( *.digsite.cat )，所以我必须编辑我的 namedb 文件 digsite.cat.db。在 www 之后，我添加了害怕.digsite.cat 等的子域。

```
www                     A       37.59.20.16
scary                   A       37.59.20.16
music                   A       37.59.20.16
fashion                 A       37.59.20.16 
```

问题是当你去 www.digsite.cat 一切都很好，www.donosiciele.pl - 很好

www.music.digsite.cat - 您将被重定向到在 www.donosiele.pl 下运行的“elder/1st”wordpress cms

我不知道如何处理这个问题，为此我彻底搜索了 wordpress 论坛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:34:59.887

答案是为给定的子域创建一个 apache 虚拟主机 :)

# ruby - 获取 404 错误页面响应 ruby 的内容

> ID：13020597
> 
> 赞同：3
> 
> 时间：2012-10-22T22:05:12.590
> 
> 标签：ruby, nokogiri, open-uri

我知道有些语言有一个库，可让您获取 404 或 500 消息的 HTTP 内容。

是否有允许 Ruby 使用的库？

我试过 open-uri 但它只是返回一个 HTTPError 异常，没有 404 响应的 HTML 内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T22:27:32.700

这似乎在文档中说明得不够清楚，但是 HttpError 有一个 io 属性，据我所知，您可以将其视为只读文件。

```
require 'open-uri'

begin
  response = open('http://google.com/blahblah')
rescue => e
  puts e # Error message
  puts e.io.status # Http Error code
  puts e.io.readlines # Http response body
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T22:35:43.847

`Net::HTTP`支持你所需要的。

您可以使用 request_get 方法，无论状态码如何，它都会返回响应。

从脚本/控制台：

```
> http = Net::HTTP.new('localhost', 3000)
=> #<Net::HTTP localhost:3000 open=false>
> resp = http.request_get('/foo') # a page that doesn't exist
=> #<Net::HTTPNotFound 404 Not Found readbody=true>
> resp.code
=> "404"
> resp.body
=> "<html>...</html>" 
```

（如果默认情况下您无法使用该库，您可以执行`require 'net/http'`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T22:39:15.440

也适用于 HTTParty [https://github.com/jnunemaker/httparty](https://github.com/jnunemaker/httparty)

```
require 'rubygems'
require 'httparty'

HTTParty.get("http://google.com/blahblah").parsed_response 
```

有许多可用的 HTTP 客户端，从[https://www.ruby-toolbox.com/categories/http_clients中选择一个你喜欢的](https://www.ruby-toolbox.com/categories/http_clients)

# java - Mac OS X 10.8 上 NetBeans 中的 Java GUI

> ID：13020602
> 
> 赞同：1
> 
> 时间：2012-10-22T22:05:37.757
> 
> 标签：java, macos, netbeans, osx-mountain-lion

我目前正在大学学习一个关于java编程的模块。

我们使用的 IDE 是 NetBeans，我使用的是 Mac OS X 10.8

我们刚刚开始制作一个使用 GUI 的应用程序。

我正在关注工作表并完全遵循它。

目前我被卡住了，因为当我运行我的应用程序时，项目构建得很好，但是当我运行它时 GUI 没有打开。

我的项目由多个包和类组成，我已将 GUI 类设置为主类。

更让我困惑的是，我将项目复制到了我的 Window 7 VM 中，它构建并运行良好，并且 GUI 出现了。

任何人都可以帮助解释为什么 GUI 无法在 OS X 上打开以及是否有解决方案。

**编辑：**

当我尝试在 Mac 上运行我的应用程序时出现以下异常：http: [//pastebin.com/cySzY5Wr](http://pastebin.com/cySzY5Wr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:52:02.153

Netbeans 为特定版本的 Java 构建应用程序。但是，当您运行应用程序时，它将无法运行，因为可执行文件是以前的版本。要更改 Netbeans 中的目标 JDK/Java 版本，您需要：

1.  进入`Project Properties`（右键单击项目并选择属性）。
2.  然后选择`Libraries`选项卡并检查 JDK 版本。在 OSX 上，它应该是 JDK6，除非您从 Oracle 安装了 JDK7。
3.  然后选择`Compile`选项卡（在 下`Build`）并检查 Netbeans 正在编译的版本是否与您正在使用的 JDK 相同或更低。

您可能还想检查您在系统中运行的 Java 版本（因为这将是您双击`.jar`文件时使用的版本。）。您可以通过打开`Terminal.app`（或在 Spotlight 中搜索）并输入`java -version`.

# java - 带有 Java 7 的 Mac OSX 上的透明 JFrame/JWindow

> ID：13020607
> 
> 赞同：3
> 
> 时间：2012-10-22T22:05:44.110
> 
> 标签：java, macos, swing, jframe, transparent

我们有一个屏幕共享小程序，它打开一个 Swing JFrame 并使用 Robot 类来捕获空框架后面的屏幕。

用户可以单击框架并与小程序后面的任何内容进行交互。这在 Windows 上运行良好，并且曾经与 Apple 的 Java 版本一起使用，但在 Java 7 for Mac 上它不起作用。鼠标点击不会通过 JFrame。

JFrame 使用：

```
setAlwaysOnTop(true);
setUndecorated(true); 
```

尝试使用：

```
AWTUtilities.setWindowOpaque(false); 
```

或者

```
setBackground(new Color(0, 0, 0, 0)); 
```

使用 Apple 版本：

```
getRootPane().putClientProperty("apple.awt.draggableWindowBackground", Boolean.FALSE); 
```

呼叫成功了，但这不再有效。

请指教。

谢谢，艾隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T11:56:26.787

这是 jdk 7 中的错误（将在 jdk 9 中修复）。只有使用 jdk 6 的方法。

[错误数据库链接](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8013450)

ps 你有没有找到解决这个问题的方法？

# inheritance - 应用于类继承设计模式的 UML 原型

> ID：13020608
> 
> 赞同：1
> 
> 时间：2012-10-22T22:05:51.947
> 
> 标签：inheritance, uml, papyrus, stereotype

在使用*Papyrus* (+Eclipse) 时，我遇到了一个我最初认为是不一致的问题。但是在思考之后，我开始认为我的 UML 设计的基本概念中可能存在*“错误”*。

好吧，考虑基本的**类继承**问题，其中`Man`和`Woman`是`Person`. （换句话说，`Person`是 and 的超类`Man`）`Woman`。

然后，如果您将**Stereotype** `Worker`（例如包含参数`job`和`salary`）应用于`Person`，子类不应该也收到相同的原型`Worker`吗？它们不应该包含`job`和`salary`参数吗？

我真的虽然 Stereotypes 也是从超类继承的，但是当我在 Papyrus 工具中实现这个设计时，我看不到任何继承的`job`或`salary`. 每个子类都与没有任何应用的 Stereotype 相同。

提前致谢！

**======================已编辑以获取更多信息========================**

我发现在 2000 年针对 UML v1.3 提出了一个关于子类中原型继承的问题。

[问题 3210：刻板印象的继承 (uml-rtf)](http://www.omg.org/issues/issue3210.txt)

在我的解释中，*讨论*中提供的例子正是我上面问的。然而，审稿人似乎理解问题是要求 Stereotype 的子类型，而不是从一个原型类到其子类的约束传播。

这是添加到 UML v1.3 的要点：

> *刻板印象是GeneralizableElements。如果一个原型是另一个原型的子类型，那么它会从它的原型超型继承所有的约束和标记值，并且它必须应用于相同类型的基类。构造型跟踪它可能应用到的基类。*

后来，它在 UML v1.4 中被弃用并在 UML 2 中被删除。

所以，基本上，根据我的解释，问题存在......但UML规范仍然没有指定它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:07:31.737

我也认为刻板印象是继承的，但我在网络或 UML 标准中找不到关于这一点的任何参考。但是根据您的描述，您可能应该使用多重继承或接口。

刻板印象用于扩展类 - 为类元素而不是实例提供更多属性。UML 中的类具有名称、属性（字段）和方法。当您向类添加构造型时，实际上是在向该类添加另一组属性。例如，如果您正在编写 MVC（模型-视图-控制器）系统，并且您想指定哪些类是视图、哪些是模型以及哪些控制器，那么使用构造型将是一个很好的答案，因为您正在描述一个属性类的，而不是特定实例的。这似乎不是你的情况。

# sql - 如何在sqlite中按日期选择行

> ID：13020611
> 
> 赞同：6
> 
> 时间：2012-10-22T22:05:57.750
> 
> 标签：sql, database, sqlite

我必须通过传递日期从数据库中选择所有行。例如获取所有有日期的行`10/23/2012`

在**sqlite db**中，我将其存储在`DATE`列中：

```
01/01/1900 11:00:00 AM 
```

我试图通过使用来获得，`date()`但我什么也没得到：

```
select itemId, date(dateColumn) from items 
```

所以我只需要比较日期，但在sqlite中找不到如何做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T22:23:55.987

首先，将您的日期格式化为 ISO-8601 标准。将它包装在 Date() 中以确保它被作为 DATE 处理。最后，构建您的范围，使其包括从上午 12:00 开始直到第二天上午 12:00 之前的所有内容。

```
select itemId, dateColumn
from items
where dateColumn >= date('2012-10-23')
  AND dateColumn <  date('2012-10-23', '+1 day') 
```

**SQLite 列没有类型化**。但是，如果您将列与所示的 DATE 进行比较，则将列数据强制转换为日期就足够了（如果不可强制，则为 null），并且比较将正常工作。

[SQLFiddle](http://www.sqlfiddle.com/#!5/2223e/1/0)上的示例：

```
create table items (
  itemid, datecolumn);
insert into items select
  1,'abc' union all select
  2,null union all select
  3,'10/23/2012 12:23' union all select
  4,'10/23/2012' union all select
  5,'2012-10-23 12:23' union all select
  6,'2012-10-23' union all select
  7,'2012-10-24 12:23' union all select
  8,'2012-10-24' union all select
  9,date('2012-10-24 12:23') union all select
  10,date('2012-10-24'); 
```

结果：

```
itemid  datecolumn
5       2012-10-23 12:23
6       2012-10-23 
```

请注意，尽管第 3 行和第 4 行***似乎***是日期，但它们不是，因为它们不符合 ISO-8601 格式，这是 SQLite 唯一识别的格式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T22:24:17.553

在 SQLite 中，没有 datatype `DATE`，它存储为字符串。因此，字符串必须*完全*匹配才能相等。

由于我们不希望这样，您需要将日期列中的值“转换”为伪日期，并将您的参数转换为伪日期，以便可以比较它们：

```
SELECT itemId FROM items WHERE date(dateColumn) = date("2012-10-22"); 
```

请注意，日期命令采用格式为 的日期，如[对此较早问题](https://stackoverflow.com/a/4466688/717341)`YYYY-MM-DD`的回答中进一步解释。该问题还表明您可以使用-command 来获取日期，匹配一个范围。`BETWEEN x AND y`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:12:22.440

```
SELECT itemId,dateColumn FROM items WHERE dateColumn=date('YYYY-MM-DD HH:MM:SS'); 
```

[SQLite 参考](http://www.sqlite.org/lang_datefunc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T22:17:42.387

从 dateColumn = @date 的项目中选择 itemId,dateColumn

# bash - 通过用户输入以执行最后一个和剪切命令

> ID：13020615
> 
> 赞同：0
> 
> 时间：2012-10-22T22:06:38.467
> 
> 标签：bash, shell, scripting, cut, tr

我想提示用户从“最后一个”命令中剪切以及要剪切的列。我还想使用 'tr' 来修复空白处的所有差异。这是我的代码：

```
echo -n "What rows and columns would you like to cut: "
read num_int
read num_row
read num_list
last $num_int
cut -f $num_row
tr -d $num_list 
```

当我从命令行运行它时，我得到了提示，所以我按回车键，然后输入一个数字来剪切。然后我再次按回车键，我得到一个打印到屏幕但不会脱离已执行脚本的信息列表。有没有更好的方法来设置这个脚本？这是它在屏幕上回显的一些示例数据：

```
slater   pts/2        78.189.121.247   Sat Sep  1 23:21 - 23:27  (00:05)    
slater   pts/3        77.189.121.247   Sat Sep  1 23:09 - 23:21  (00:12)    
slater   pts/2        76.189.121.247   Sat Sep  1 22:59 - 23:09  (00:10)    
slater   pts/2        74.189.121.247   Sat Sep  1 22:51 - 22:56  (00:05)    
pint     pts/2        74.189.121.247   Sat Sep  1 22:49 - 22:51  (00:01)    
terry    pts/2        74-119-247-134.r Sat Sep  1 19:08 - 19:09  (00:00) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:15:59.313

这样做是否符合您的需求？

```
read -p "What row and column integers would you like to cut >>> " col row
 last | awk -v col=$col -v row=$row 'NR==row{print $col}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:13:07.543

我真的不明白你想在这里做什么。但我很确定您想将这些命令相互传递，以便它们对彼此的输出进行操作：

```
last | cut -f $num_row | tr -d $num_list 
```

`last $num_int`可能不会做你想做的事。`last`期望用户名作为参数。要获得最后`$num_int`几行输出，请尝试`tail`（或者可能`head`）：

```
last | tail -n $num_int | cut -f $num_row | tr -d $num_list 
```

`tr`我特别困惑的命令。你想用它做什么？

# c# - 64位机器上VS2010通过VLC播放RTSP

> ID：13020616
> 
> 赞同：0
> 
> 时间：2012-10-22T22:06:41.417
> 
> 标签：c#, visual-studio-2010, plugins, rtsp, vlc

我正在尝试在 64 位 Windows 机器上的 Win 表单应用程序上播放 RTSP 流。我已将 VLC 播放器添加为 COM 组件。但是，当我什至尝试播放存储的视频文件时，它不会播放。

```
axVLCPlugin1.addTarget("C:\\wildlife.wmv",
                       null,
                       AXVLC.VLCPlaylistMode.VLCPlayListReplaceAndGo,
                       0);
axVLCPlugin1.play(); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:54:41.733

尝试在文件路径之前添加“file:///”。那应该让它从文件中播放。

一旦成功，您就可以使用 VLC 创建 RTSP 流。
1\. 在 VLC 中，转到媒体-> 流
2\. 在文件选项卡下，单击“添加”并选择要流式传输的视频。
3\. 在底部，有一个带有下拉菜单的按钮。选择流，然后单击按钮。
4\. 将弹出一个窗口显示源文件路径。单击“下一步”
5\. 此窗口是您选择输出的地方。将下拉菜单从“文件”更改为“RTSP”，然后单击“添加”
6\. 选择端口号和路径。我将端口保留为 8554 并将路径设置为“/Test”
7\. 单击“下一步”，然后单击“流” 您应该会看到 VLC 播放器开始运行，但视频不会播放。

如果您想测试以确保流正常工作，您可以打开另一个 vlc 实例来查看流。
1\. 转到媒体->打开网络流
2\. 输入“rtsp://127.0.0.1:8554/Test”作为网络 URL。
3\. 单击播放，它应该开始流式传输。

在验证流正在运行后，关闭 VLC 的第二个实例并在您的应用程序中，将这两行代码设置为：

```
axVLCPlugin1.addTarget("rtsp://172.16.10.50:8554/Test", null, VLCPlaylistMode.VLCPlayListReplaceAndGo, 0);
axVLCPlugin1.Play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:11:41.427

我做了很多研究，发现这是通过 VS2010 在 Windows 64 位机器上播放 RTSP 流的最佳解决方案 - [VLCDotNet](https://github.com/ZeBobo5/Vlc.DotNet)

我仍然在 C++ 中寻找类似的东西。

# java - 遍历 Lotus Domino 中的每个文档

> ID：13020620
> 
> 赞同：3
> 
> 时间：2012-10-22T22:06:55.783
> 
> 标签：java, lotus-notes, lotus-domino

我想遍历（可能很大）Lotus Domino 数据库中的每个文档，如果处理中断（网络连接错误、应用程序重新启动等），则能够从最后一个文档继续。我没有对数据库的写访问权限。

我正在寻找一种方法，我不必从服务器上下载那些已经处理过的文档。所以，我必须将一些启动信息传递给服务器，哪个文档应该是（可能重新启动的）处理中的第一个文档。

1.  我检查了`AllDocuments`属性和`DocumentColletion.getNthDocument`方法，但是这个属性是未排序的，所以我猜两个调用之间的顺序可以改变。

2.  另一个想法是使用[公式查询](https://stackoverflow.com/q/12983605/843804)，但这些查询似乎无法进行排序。

3.  第三个想法是`Database.getModifiedDocuments`相应的方法`Document.getLastModified`。看起来不错，但在我看来，返回集合的顺序没有记录，并且基于创建时间而不是最后修改时间。

    以下是基于[官方示例](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_EXAMPLES_GETMODIFIEDDOCUMENTS_METHOD_DB_JAVA.html)的示例代码：

    ```
    System.out.println("startDate: " + startDate);
    final DocumentCollection documentCollection = 
            database.getModifiedDocuments(startDate, Database.DBMOD_DOC_DATA);

    Document doc = documentCollection.getFirstDocument();
    while (doc != null) {
        System.out.println("#lastmod: " + doc.getLastModified() + 
                    " #created: " + doc.getCreated());
        doc = documentCollection.getNextDocument(doc);
    } 
    ```

    它打印以下内容：

    ```
    startDate: 2012.07.03 08:51:11 CEDT
    #lastmod: 2012.07.03 08:51:11 CEDT #created: 2012.02.23 10:35:31 CET
    #lastmod: 2012.08.03 12:20:33 CEDT #created: 2012.06.01 16:26:35 CEDT
    #lastmod: 2012.07.03 09:20:53 CEDT #created: 2012.07.03 09:20:03 CEDT
    #lastmod: 2012.07.21 23:17:35 CEDT #created: 2012.07.03 09:24:44 CEDT
    #lastmod: 2012.07.03 10:10:53 CEDT #created: 2012.07.03 10:10:41 CEDT
    #lastmod: 2012.07.23 16:26:22 CEDT #created: 2012.07.23 16:26:22 CEDT 
    ```

    （我这里没有使用任何`AgentContext`访问数据库。数据库对象来自`session.getDatabase(null, databaseName)`调用。）

有没有办法用 Lotus Domino Java API 可靠地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:39:50.280

如果您有权更改数据库，或者可以要求某人这样做，那么您应该创建一个按唯一键或修改日期排序的视图，然后将“指针”存储到最后处理的文档。

除此之外，您必须自己维护以前处理的文档列表。在这种情况下，您可以使用 AllDocuments 属性并遍历它们。使用 GetFirstDocument 和 GetNextDocument，因为据报道它们比 GetNthDocument 快。

或者，您可以进行两次传递，一次收集您将存储的所有文档的 UNID 列表，然后进行第二次传递以处理您拥有的 UNID 列表中的每个文档（使用 GetDocumentByUNID 方法）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T22:39:19.610

我不使用 Java API，但在 Lotusscript 中，我会这样做：

找到显示数据库中所有文档的视图。如果您希望代理非常快，请创建一个新视图。第一列应该排序并且可以包含文档的通用 ID。其他列包含您要在代理中读取的所有值，在您的示例中，这将是创建日期和最后修改日期。

然后，您的代码可以像这样简单地遍历视图：

```
lastSuccessful = FunctionToReadValuesSomewhere() ' Returns 0 if empty
Set view = thisdb.GetView("MyLookupView")
Set col = view.AllEntries
Set entry = col.GetFirstEntry
cnt = 0
Do Until entry is Nothing
    cnt = cnt + 1
    If cnt > lastSuccessful Then
        universalID = entry.ColumnValues(0)
        createDate = entry.ColumnValues(1)
        lastmodifiedDate = entry.ColumnValues(2)
        Call YourFunctionToDoStuff(universalID, createDate, lastmodifiedDate)
        Call FunctionToStoreValuesSomeWhere(cnt, universalID)
    End If
    Set entry = col.GetFirstEntry    
Loop
Call FunctionToClearValuesSomeWhere() 
```

只需将最后成功的值和通用 ID 存储在数据库中的文本文件或环境变量甚至配置文件文档中。当您重新启动代理时，有一些代码检查值是否为空（然后返回 0），否则返回最后一个成功的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-18T04:20:20.787

代理已经保留了一个字段来描述他们尚未处理的文档，并且这些文档会通过正常处理自动更新。

做你想做的事情的更好方法可能是将搜索结果存储在配置文件文档中。但是，如果您尝试关联数据库中您没有写入权限的文档，您唯一能做的就是保留您已经处理的文档链接的列表（以及您需要保留的有关这些文档的任何信息）文档），或者一个姐妹数据库为每个文档链接保存一个文档以及与您对它们进行的处理相关的多个字段。然后，传输 ID 列表并在客户端执行匹配以执行每个文档的查找。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T23:06:52.957

Lotus Notes/Domino 数据库设计为在复制环境中跨客户端和服务器分布。在一般情况下，您无法保证从给定的创建或模组时间开始会为您带来一致的结果。

如果您 100% 确定没有创建目标数据库的副本，那么您可以使用 getModifiedDocuments 然后编写一个排序例程将 (modDateTime,UNID) 对放入 SortedSet 或其他合适的数据结构中。然后您可以通过 Set 进行处理，如果遇到错误，您可以将尝试处理的元素的 modDateTime 保存为重新启动点。但是，如果有多个文档具有完全相同的 modDateTime 标记，则可能需要制定一些额外的细节以避免重复。

我想说最后一句话。我知道您问的是 Java，但如果您正在为合规性目的开发备份或归档系统，Lotus C API 具有您真正应该查看的特殊功能。

# javascript - jQuery提交表单

> ID：13020622
> 
> 赞同：2
> 
> 时间：2012-10-22T22:07:00.397
> 
> 标签：javascript, jquery, ajax, jquery-ui, dialog

我有以下代码不起作用。我希望你能帮我解决这个问题。

基本上我有一个表单，我想在提交之前先使用 jQuery Dialog 进行确认。所以当我点击提交时，我得到了对话框，但是当我按下是确认没有任何反应时！

```
 $(function() {

        $('#massform').submit(function(e){
           e.preventDefault();
           $('#dialog-mass-confirm').dialog('open');
        });

        $( "#dialog-mass-confirm" ).dialog({
            autoOpen: false,
            resizable: false,
            draggable: false,
            height:180,
            modal: true,
            buttons: {
                "No": function() {
                    $( this ).dialog( "close" );
                },
                "Yes": function() {
                    $("#massform").submit();
                }
            }
        });
    });

<form id="massform" method="post" action="new.php">
    <input type="text" name="email" size="41">
    <input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:18:04.793

看来您可能有一个循环引用，因为您正在重新绑定表单的提交函数，然后从模态调用提交，这将触发最初打开模态的相同事件。我建议采取以下措施来避免这个问题：

```
$(function() {

    $('#submitButton').click(function(e){
       e.preventDefault();
       $('#dialog-mass-confirm').dialog('open');
    });

    $( "#dialog-mass-confirm").dialog({
        autoOpen: false,
        resizable: false,
        draggable: false,
        height:180,
        modal: true,
        buttons: {
            "No": function() {
                $( this ).dialog( "close" );
            },
            "Yes": function() {
                $("#massform").submit();
            }
        }
    });
});

<form id="massform" method="post" action="new.php">
    <input type="text" name="email" size="41">
    <input ID="submitButton" type="button" value="Submit">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:39:33.940

您应该更详细地查找范围和事件触发，以便了解您面临的问题。1.st 你已经创建了一个绑定到你的表单提交事件的 jqery 函数。

```
 $('#massform').submit(function(e){
           e.preventDefault();
           $('#dialog-mass-confirm').dialog('open');
        }); 
```

当您使用提交按钮时，您的事件会被触发，并打开对话框。但是，当您提交表单时

```
 "Yes": function() {
            $("#massform").submit(); 
```

它触发前面指出的绑定函数......这会阻止提交它自己的表单。准确地说，您只需重新打开对话框。但这发生得如此之快以至于你没有注意到它。

如果您出于兼容性原因被迫使用提交操作...您可以使用 loc 变量来完成肮脏的工作...

```
$('#massform').submit(function(e, lock){
   if(lock)
   e.preventDefault();
   $('#dialog-mass-confirm').dialog('open');
}); 
```

而您可以在提交中设置锁定。从未尝试过这种方式，但它应该可以工作。我通常最终使用文档就绪范围中的变量。

当您无法修改表单时，这是一个**肮脏的解决方案。**丑陋但有效。

# jquery - 将数据添加到 .Ajax 数据 + 额外数据

> ID：13020629
> 
> 赞同：1
> 
> 时间：2012-10-22T22:07:30.030
> 
> 标签：jquery

您好，我希望能够向我在 Ajax 上提交的数据添加其他数据：

```
<script type="text/javascript">
$(document).ready(function() {
    //http://www.datatables.net
$('#dataTable').dataTable({
        "sPaginationType": "full_numbers",
        "bJQueryUI": false,
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "/Project/GetDataTables2",
        "aoColumns": [
            { "bSortable": true },
            { "bSortable": true },
            { "bSortable": true },
            { "bSortable": true }
        ],
        "fnServerData": function(url, data, callback) {
            $.ajax({
                "url": url,
                "data": data, //I want to add additional data from here like the QueryString DPID
                "success": callback,
                "contentType": "application/x-www-form-urlencoded; charset=utf-8",
                "dataType": "json",
                "type": "POST",
                "cache": false,
                "error": function() {
                    alert("DataTables warning: JSON data from server failed to load or be parsed. " +
                    "This is most likely to be caused by a JSON formatting error.");
                }
            });
        }
    });
});                    
</script> 
```

我试着做：

```
data: data + "&moredata=" + morevalue 
```

但是我收到一个脚本错误，它不会将它发送到我的 URL...请帮助！

编辑1：

我现在正在传递它，就像这个 DPID 很好但是 dt 没有：

```
<script type="text/javascript">
$(document).ready(function() {
    //http://www.datatables.net
    $('#dataTable').dataTable({
        "sPaginationType": "full_numbers",
        "bJQueryUI": false,
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "/Project/GetDataTables2",
        "aoColumns": [
            { "bSortable": true },
            { "bSortable": true },
            { "bSortable": true },
            { "bSortable": true }
        ],
        "fnServerData": function(url, data, callback) {
            $.ajax({
                "url": url,
                "data": { DPID: "1", dt: data }, //I want to add additional data from here like the QueryString DPID
                "success": callback,
                "contentType": "application/x-www-form-urlencoded; charset=utf-8",
                "dataType": "json",
                "type": "POST",
                "cache": false,
                "error": function() {
                    alert("DataTables warning: JSON data from server failed to load or be parsed. " +
                    "This is most likely to be caused by a JSON formatting error.");
                }
            });
        }
    });
});                    
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T11:38:28.033

Smiter 的解决方案对我不太适用。查看对象的结构，`aoData`您需要创建一个带有`name`和`value`字段的对象：

```
"fnServerParams": function (aoData) {
    aoData.push({
        name: "Name",
        value: "Value"
    });
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:15:27.250

如果要向 ajax 请求添加一些额外的数据，请使用：

```
"fnServerParams": function ( aoData ) {
                aoData.push( { "key": "value" } );
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:08:45.293

数据是一个对象，所以你可以这样做：

```
data.moredata=morevalue 
```

您需要在成功处理程序中执行此操作或根据需要将数据作为参数传递

编辑1：

现在我已经看到了你的信息，试试这个：

```
"fnServerData": function(url, data, callback) {
           data={ DPID: "1", dt: data } 
           $.ajax({
                "url": url,
                "data": data, //I want to add additional data from here like the QueryString DPID
                "success": callback,
                "contentType": "application/x-www-form-urlencoded; charset=utf-8",
                "dataType": "json",
                "type": "POST",
                "cache": false,
                "error": function() {
                    alert("DataTables warning: JSON data from server failed to load or be parsed. " +
                    "This is most likely to be caused by a JSON formatting error.");
                }
            });
        } 
```

# jquery - jQuery：不会使浏览器崩溃的无限循环

> ID：13020630
> 
> 赞同：3
> 
> 时间：2012-10-22T22:07:40.667
> 
> 标签：jquery, loops, infinite-loop

我想知道是否有可能创建一个无限循环，它不会使浏览器崩溃我正在处理一个画廊类型的东西，当它在屏幕上滚动时会产生脉冲。

这是我到目前为止所拥有的（这显然会使浏览器崩溃）：

```
 var i = 0;
    while (i < 1){
        $('.block').each(function(index) {  
            $(this).css('left', $(this).position().left - 10)
            if (($(this).position().left) < ($(window).width() * 0.4)) {
              $(this).html('<p>Test 1</p>');
              $(this).animate({
              width: "500px",
              height: "500px",
              }, 500 );
            }else if (($(this).position().left) < ($(window).width() * 0.2)) {
              $(this).html('<p>Test 1</p>');
              $(this).animate({
              width: "600px",
              height: "600px",
              }, 500 );
            }
        });
    } 
```

任何提示都会很棒！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T22:20:48.507

尝试像下面的代码一样使用[window.setInterval()](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)（它将以 3 秒的间隔执行）：

```
function LoopForever() {
    $('.block').each(function(index) {  
       $(this).css('left', $(this).position().left - 10)
       if (($(this).position().left) < ($(window).width() * 0.4)) {
           $(this).html('<p>Test 1</p>');
           $(this).animate({
              width: "500px",
          height: "500px",
           }, 500 );
       }else if (($(this).position().left) < ($(window).width() * 0.2)) {
           $(this).html('<p>Test 1</p>');
           $(this).animate({
          width: "600px",
          height: "600px",
           }, 500 );
       }
    });
}

var interval = self.setInterval(function(){LoopForever()},3000);

//call code bllow to stop interval
//window.clearInterval(interval); 
```

注：1000 = 1 秒；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-03T21:28:20.040

为了获得更好的性能，请使用 requestAnimationFrame 而不是 setInterval。

[https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:21:08.927

jQuery 动画可以被链接，所以要运行一个动画然后运行另一个，你可以调用 animate 两次。[也可以使用.queue(callback(next))](http://api.jquery.com/queue/#queue2)将非动画添加到队列中。

[jsFiddle 演示](http://jsfiddle.net/KLEgR/)

```
<div class="hello">Hi</div>​

.hello {
    position: relative;
    width: 100px;
    height: 100px;
    background: red;
}​

$(".hello")
    .animate({ left: 200 })
    .animate({ width: 200, height: 200 })​ 
```

额外提示：如果你想要一个无限循环，只需将 true 传递给 while: `while (true) { ... }`。

# c++ - flex 和 bison：g++ 编译错误

> ID：13020631
> 
> 赞同：2
> 
> 时间：2012-10-22T22:07:41.423
> 
> 标签：c++, compiler-construction, bison, flex-lexer

我正在尝试使用 g++ 为玩具语言编译扫描仪和解析器。这是我使用的每个文件的代码（如果需要，我可以将其发布到`pastebin`或其他任何地方）。

`caesar.ll`

```
/* Simple scanner for a Caesar language */
%{
#include "caesar.tab.h"
#include <iostream>
#include <string>
int chars = 0;
int words = 0;
int lines = 0;
%}

/* Define constants */
OWS            [" "\t]*
COMMA          {OWS}","{OWS}
ID             [A-Za-z_][A-Za-z0-9_]*
INT            ([0-9]+)|("0x"[A-Ha-h0-9]+)
FLOAT          [0-9]+"."[0-9]+
BSTREAM        b[\'\"].*[\'\"]
USTREAM        u?[\'\"].*[\'\"]
ARRAY          {LBRACE}({INT}|{FLOAT})({COMMA}({INT}|{FLOAT})){RBRACE}
LIST           {LBRACKET}.*({COMMA}.*){RBRACKET}
RANGE          {LBRACE}{INT}":"{INT}(":"{INT})?{RBRACE}
ARGS           {ID}({COMMA}{ID})*
LPARENTHESIS   "("{OWS}
RPARENTHESIS   {OWS}")"
LBRACE         "{"{OWS}
RBRACE         {OWS}"}"
LBRACKET       "["{OWS}
RBRACKET       {OWS}"]"

%%
%{
/*============================================================================*/
/* Define types */
/*============================================================================*/
%}
{INT} {
  cout << "int: " << yytext << endl;
  yylval = atoi(yytext);
  return INT;
} /* int type */

{FLOAT} {
  cout << "float: " << yytext << endl;
  yylval = atof(yytext);
  return FLOAT;
} /* float type */

{BSTREAM} {
  cout << "bstream: " << yytext << endl;
  return BSTREAM;
} /* bstream type */

{USTREAM} {
  cout << "ustream: " << yytext << endl;
  return USTREAM;
} /* ustream type */

%{
/*============================================================================*/
/* Define operators */
/*============================================================================*/
%}
"+"    { return ADD; }
"-"    { return SUB; }
"*"    { return MUL; }
"/"    { return DIV; }
"//"   { return FDIV; }
"|"    { return ABS; }
"\n"   { return EOL; }

%{
/*============================================================================*/
/* Define statements */
/*============================================================================*/
%}
{RANGE} {
  cout << "range: " << yytext << endl;
  return RANGE;
} /* range function */

%% 
```

`caesar.yy`

```
/* Simple parser for a Caesar language */
%{
#include <iostream>
using namespace std;
%}

/* Define built-in types */
%token INT FLOAT BSTREAM USTREAM 
%token ADD SUB MUL DIV FDIV ABS
%token EOL

%%

calclist: /* nothing */
  | calclist exp EOL {
      cout << $2 << endl;
    }
  | calclist EOL {
      cout << ">>> ";
    }
  ;

exp: factor
  | exp ADD exp { $$ = $1 + $3; }
  | exp SUB factor { $$ = $1 - $3; }
  | exp ABS factor { $$ = $1 | $3; }
  ;

factor: term
  | factor MUL term { $$ = $1 * $3; }
  | factor DIV term { $$ = $1 / $3; }
  ;

term: INT
  | ABS term { $$ = $2 >= 0? $2 : - $2; }
  ;

%%

main()
{
  cout << ">>> ";
  yyparse();
}

yyerror(char *error)
{
  cerr << error;
} 
```

`Makefile`

```
caesar: caesar.ll caesar.yy
    bison -d caesar.yy
    flex caesar.ll
    g++ -o $@ caesar.tab.cc lex.yy.c -lfl 
```

当我尝试使用 编译它时`make`，我看到几个错误：

```
bison -d caesar.yy
caesar.yy: conflicts: 3 shift/reduce
flex caesar.ll
g++ -o caesar caesar.tab.cc lex.yy.c -lfl
caesar.tab.cc: In function 'int yyparse()':
caesar.tab.cc:1281:16: error: 'yylex' was not declared in this scope
caesar.tab.cc:1470:35: error: 'yyerror' was not declared in this scope
caesar.tab.cc:1612:35: error: 'yyerror' was not declared in this scope
caesar.yy: At global scope:
caesar.yy:46:20: error: ISO C++ forbids declaration of 'yyerror' with no type [-fpermissive]
caesar.ll:3:24: fatal error: caesar.tab.h: No such file or directory
compilation terminated.
make: *** [caesar] Error 1 
```

请问你能帮帮我吗？谢谢！

**更新**：我已经修复了函数类型不正确的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T01:45:20.107

首先修复明显的错误——在 caesar.yy 的顶部添加声明：

```
int yylex(void);
void yyerror(const char *); 
```

`main`和返回类型`yyerror`（注意——我还添加`const`到 yyerror 的参数中，以消除有关传递给它的字符串文字的警告）。

您需要对 caesar.ll 进行类似的简单修复：

```
#include "caesar.tab.hh"
using namespace std; 
```

现在您可以看到真正的错误：

```
caesar.yy: conflicts: 3 shift/reduce
caesar.ll: In function ‘int yylex()’:
caesar.ll:79:10: error: ‘RANGE’ was not declared in this scope 
```

第二个首先 - 您的扫描仪正在尝试返回未定义的令牌 RANGE。您可以添加`%token RANGE`to`caesaer.yy`来定义它，但由于您在语法中不使用它（或各种其他标记，如`BSTREAM`or `USTREAM`），它只会导致语法错误。

这给我们带来了语法冲突。这些并不是真正的错误（更像是警告），但您确实需要注意它们。`bison`在命令中添加 -v 标志`Makefile`，您将获得一个`caesaer.output`包含冲突信息的文件。

3 个冲突都来自状态 16，您可以在 .output 文件中看到：

```
state 16

    5 exp: exp . ADD exp
    5    | exp ADD exp .
    6    | exp . SUB factor
    7    | exp . ABS factor

    ADD  shift, and go to state 10
    SUB  shift, and go to state 11
    ABS  shift, and go to state 12

    ADD       [reduce using rule 5 (exp)]
    SUB       [reduce using rule 5 (exp)]
    ABS       [reduce using rule 5 (exp)]
    $default  reduce using rule 5 (exp) 
```

这告诉您所有 3 个冲突都来自您的`exp: exp ADD exp`规则。拥有左递归和右递归的规则总是模棱两可的，但在这种情况下，修复是显而易见的——将其更改为`exp: exp ADD factor`，匹配您的其余规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T22:15:35.827

[http://dinosaur.compilertools.net/flex/flex_19.html](http://dinosaur.compilertools.net/flex/flex_19.html)阅读这篇文章，了解如何`g++`使用`flex`. 这里的问题是您在`C`模式下使用它并且它会生成`C`词法分析器。`flex`与`-+`开关一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:59:03.027

FWIW，手动检测您的代码以查看匹配的规则是没有用的。Flex 和 Bison 都免费为您完成这项工作。Flex参见[http://westes.github.io/flex/manual/Debugging-Options.html，Bison参见](http://westes.github.io/flex/manual/Debugging-Options.html)[http://www.gnu.org/software/bison/manual/bison.html#Tracing](http://www.gnu.org/software/bison/manual/bison.html#Tracing)。

# jquery - 嵌套绝对元素上的 Z-index 以重叠相似的绝对元素？

> ID：13020634
> 
> 赞同：3
> 
> 时间：2012-10-22T22:07:52.007
> 
> 标签：jquery, css

这是小提琴：http: [//jsfiddle.net/hrQG6/](http://jsfiddle.net/hrQG6/)

HTML

```
<div id='map'>
    <div class='hotspot' id='hs1'>
        <div class='info-window'>
            Foobar
        </div>
    </div>
    <div class='hotspot' id='hs2'>
        <div class='info-window'>
            Foobar
        </div>
    </div>
</div> 
```

CSS

```
.hotspot {
    position: absolute;
    z-index: 10;
    background-color: blue;
    height: 30px;
    width: 30px;
} 
.info-window {
    display: none;
    height: 250px;
     width: 250px;   
    background-color: green;
    position: absolute;
    z-index: 9999;
}​ 
```

元素显示`.hotspot`在容器中。`.info-window`默认情况下不显示元素。单击 a`.hotspot`将显示其对应的`.info-window`. 但是，我希望`.info-window`覆盖`.hotspot`它下面的任何元素。

相反，`.hotspot`元素位于元素*之上*`.info-window`。从概念上讲，我误解了`position`and的使用`z-index`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:22:29.743

您的`.info-window`元素是内部`.hotspot`元素，两者都有 equal `z-index`。想象一下：

```
<div></div>
<div></div> 
```

由于我们将两个`<div>`s 设置为相等的`z-index`值，因此它们具有相等的级别。默认情况下，第二个与第一个重叠只是因为标记中的顺序。

现在，考虑一下：

```
<div><div class="inner"></div></div>
<div><div class="inner"></div></div> 
```

不管`z-index`你给第一个`.inner`元素什么，它总是在第二个`<div>`容器下面，因为第一个`.inner`元素的`<div>`容器*已经在第二个下面*。

这就像试图从一楼跳到尽可能高的地方：无论你跳多高，你都永远不会超过二楼，因为你最终会撞到天花板，这会阻止你去任何地方。更高。[1]

更好的方法是使用或多或少相同的标记：

```
<div class="hotspot">
    <div class="info"></div>
</div> 
```

并使用或多或少相同的 CSS 规则`.hotspot`：

```
.hotspot {
    position:absolute;
    z-index:10;
}

.hotspot .info {
    display:none;
} 
```

但是，然后，引入一个覆盖它的标志类：

```
.hotspot.active {
    z-index:20; /* let's raise this a bit */
}

.hotspot.active .info {
    display:block;
} 
```

然后用 Javascript 操作它：

```
var hotspots = $('.hotspot').on('click', function (e) {
    hotspots.removeClass('active');
    $(this).addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T22:22:49.040

通过消除

```
z-index: 10; 
```

从您的 .hotspot 我相信它可以解决您的问题。

[更新的小提琴](http://jsfiddle.net/hrQG6/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T22:20:36.783

您应该为父元素定义`z-index`属性，目前它们都具有相同的 z-index 值。

```
#hs1 { 
    top: 10px;
    left: 20px;
    z-index: 2;
}    
#hs2 { 
    top: 150px;
    left: 120px;
    z-index: 1;
} 
```

[http://jsfiddle.net/MMj8S/](http://jsfiddle.net/MMj8S/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T22:26:09.377

因为您的信息框是热点 div 的子项，所以您必须影响容器 ala 的 zIndex：

```
$('.hotspot').click(function() {
    $('.hotspot').css('zIndex', 1);  //Force all hotspots to the back
    $(this).css('zIndex', 9999);  //force this hotspot to the front
    $('.info-window').hide();  //Hide all infoboxes, in case of overlap
    $(this).find('.info-window').show();     //show the infobox inside this div
});​ 
```

[http://jsfiddle.net/hrQG6/3/](http://jsfiddle.net/hrQG6/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T22:28:24.237

这里的核心问题是 CSS 堆叠上下文，它比乍一看更难理解。

`#hs2`即使它的 z-index 值低于 of 也出现在`.info-window`in之上，因为它是 的后代，它建立了一个新的堆叠上下文。`#hs1``.info-window``.info-window``#hs1`

如果你想阅读这个[MDN](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)，这里有几个很好的链接[，Tim Kadlec 的非常好的博客文章](http://timkadlec.com/2008/01/detailed-look-at-stacking-in-css/)

# c# - 使用 WinForms 在 C# 中将图像的一部分替换为另一个图像

> ID：13020645
> 
> 赞同：2
> 
> 时间：2012-10-22T22:08:59.043
> 
> 标签：c#, winforms, image

我有一个很大的 .PNG，上面有很多小图像。我想用较小的图像替换部分大图像。因此，在 X 和 Y 坐标处，图像的该部分将从左上角开始被替换，而原始图像的其余部分仍保持不变。

我一直在阅读 MSDN 上的 Graphics 方法，还查看了一些类似的例子，但没有找到太多。

有没有人做过类似的事情？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T22:15:53.820

我会建议这种方法。`X`并且`Y`是您要放置小图像的大图像上的坐标。您可以检查`DrawImage`方法重载，其中有 30 个，但我认为这个最适合您的情况：

```
Bitmap bigBmp = new Bitmap("bigBmp.png");
Bitmap smallBmp = new Bitmap("smallBmp.png");
Graphics g = Graphics.FromImage(bigBmp);

Rectangle destRect = new Rectangle(x, y, smallBmp.Width, smallBmp.Height);
Rectangle sourceRect = new Rectangle(0, 0, smallBmp.Width, smallBmp.Height);

g.DrawImage(smallBmp, destRect, sourceRect, GraphicsUnit.Pixel);
g.Dispose(); 
```

编辑：根据 KvanTTT 的评论，我决定为这个问题添加另一个解决方案，`DrawImageUnscaled`因为它是绘制图像的最快方法。这个方法有四个重载，但是这个是最简单的一个。

```
Bitmap bigBmp = new Bitmap("bigBmp.png");
Bitmap smallBmp = new Bitmap("smallBmp.png");

Graphics g = Graphics.FromImage(bigBmp);
g.DrawImageUnscaled(smallBmp, x, y);
g.Dispose(); 
```

# php - 如何在数据库中存储 Symfony2 “access_control”信息？

> ID：13020648
> 
> 赞同：8
> 
> 时间：2012-10-22T22:09:11.390
> 
> 标签：php, symfony

我正在使用 Symfony2，并且我的数据库中已经存储了用户和角色。如果我在其中设置如下`security.yml`内容，效果很好：

```
access_control:
   - { path: ^/admin, role: ROLE_ADMIN}
   - { path: ^/users, role: ROLE_MANAGER} 
```

但我想将此 access_control 信息存储在数据库中，以便我系统中的用户可以使用管理界面自行更改权限。

我查看了 ACL 和 FOSUserBundle，但找不到解决方案。我发现我可以使用类似的东西检查权限，`if ($user->hasRole($role))`但我需要在每个控制器中执行此操作。

有没有办法定义动态的“access_control”功能？可能类似于将 access_control 重定向到某个可以返回 true 或 false 的类。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T22:19:24.410

最好的方法是设置一个特定的角色（例如`DB_ROLE_CHECK`），您在您希望针对您的数据库存储角色进行验证的操作/服务上设置该角色。

然后，您将创建一个安全投票器，它会`DB_ROLE_CHECK`根据您的数据库条目连接并验证您的请求。

看：

*   [为用户动态添加角色](https://stackoverflow.com/questions/8879221/dynamically-adding-roles-to-a-user)
*   [http://symfony.com/doc/current/cookbook/security/voters.html](http://symfony.com/doc/current/cookbook/security/voters.html)（官方文档）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T22:34:46.483

访问地图建立[在这里](https://github.com/symfony/symfony/blob/2.1/src/Symfony/Bundle/SecurityBundle/DependencyInjection/SecurityExtension.php#L170)。

如果没有找到 access_control，则什么也不做。

现在，定义您自己的[AccessMapInterface](https://github.com/symfony/symfony/blob/2.1/src/Symfony/Component/Security/Http/AccessMapInterface.php)实现并用您的类覆盖参数[security.access_map.class 。](https://github.com/symfony/symfony/blob/2.1/src/Symfony/Bundle/SecurityBundle/Resources/config/security_listeners.xml#L33)

您可能需要一个工厂来构建您的 AccessMap。

# web-analytics - 监控网站上个人用户活动的最佳方式

> ID：13020649
> 
> 赞同：2
> 
> 时间：2012-10-22T22:09:24.480
> 
> 标签：web-analytics

大多数网络分析工具会监控网站上的用户活动，但不会将其映射到特定用户。如果我的 Web 应用程序需要用户登录，有没有办法可以在登录用户通过 Web 应用程序时跟踪他/她的进度？

所以简而言之，这就像谷歌分析。但不是匿名用户，我想将某人的浏览习惯映射到我数据库中的用户。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:22:29.583

您可以创建一个带有用户活动功能的 MySql 数据库，这些功能将在用户登陆不同页面并执行不同模块时触发。使用 php，您还可以在服务器端跟踪 IP 地址并记录用户活动。

```
function activity_track($user, $activity){
    $user = $user;
    $activity = $activity;
    $actIp = $_SERVER['REMOTE_ADDR'];
    //write to db
} 
```

然后你可以像这样在任何地方调用这个函数：

```
activity_track("Me", "testing this sweet system"); 
```

# typescript - typescript 基本类型“xxxx”在其声明之前被引用

> ID：13020651
> 
> 赞同：3
> 
> 时间：2012-10-22T22:09:25.823
> 
> 标签：typescript

我正在尝试为 CreateJS ( www.createjs.com ) 制作一个 TypeScript 声明文件。

我有一个如下所示的基类声明：

```
/// <reference path="../geom/Point.d.ts"/>
/// <reference path="../geom/Rectangle.d.ts"/>
/// <reference path="../geom/Matrix2D.d.ts"/>
/// <reference path="../filters/Filter.d.ts"/>
/// <reference path="Shadow.d.ts"/>
/// <reference path="Shape.d.ts"/>
/// <reference path="Stage.d.ts"/>

declare module createjs {
  class DisplayObject {

    // constructor:
    constructor();

    ... additional methods

  }
} 
```

然后我声明了更多从 DisplayObject 派生的类：

```
/// <reference path="DisplayObject.d.ts"/>
declare module createjs {
      class Bitmap extends DisplayObject{
        constructor (imageOrUri:any);

        ... additional methods

      }
    }

   /// <reference path="DisplayObject.d.ts"/>
   declare module createjs {
      class Container extends DisplayObject{
        constructor();

        ... additional methods

      }
    }

    /// <reference path="../../tweenjs/Timeline.d.ts"/>
    /// <reference path="DisplayObject.d.ts"/>
    /// <reference path="Container.d.ts"/>
    declare module createjs {
      class MovieClip extends Container{
        constructor (mode: string, startPosition: number, loop: bool, labels: any);

        ... additional methods

      }
    } 
```

等等等等

但我总是遇到这样的编译器错误：

> 基类型“DisplayObject”在其声明之前被引用，或者基类型“Container”在其声明之前被引用。

我看不出我做错了什么，一切看起来都很好。任何帮助真的很感激......非常感谢提前！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T22:39:15.050

如果您的代码被拆分为多个文件，您需要让开发工具和编译器使用参考来了解其他文件：

```
/// <reference path="createjs.ts" /> 
```

我刚刚在 Visual Studio 中对此进行了测试，它似乎清除了错误，假设您的第一个代码块位于名为 的文件中`createjs.ts`，您可以将其添加到第二个文件的顶部。

如果它们都按照您指定的顺序在同一个文件中，那么这一切都对我有用。

**更新**

我创建了一个包含以下文件的 Visual Studio 项目，并且一切正常 - 我想到的一件事是您可能将代码组织到文件夹中，在这种情况下，您需要使用相对路径，例如：

```
/// <reference path="./createjs/DisplayObject.d.ts" /> 
```

无论如何，这是我在一个空项目中的工作设置：

显示对象.d.ts

```
declare module createjs {
    class DisplayObject {
        // constructor:
        constructor ();
    }
} 
```

位图.d.ts

```
/// <reference path="DisplayObject.d.ts"/>

declare module createjs {
    class Bitmap extends DisplayObject {
        constructor (imageOrUri: any);
    }
} 
```

容器.d.ts

```
/// <reference path="DisplayObject.d.ts"/>

declare module createjs {
    class Container extends DisplayObject {
        constructor ();
    }
} 
```

一切都很幸福。您不需要`export`关键字，因为它们都在同一个模块中。

如果您想查看示例，我很乐意将其压缩到某个地方。

# c++ - 使用 DLL Qt - 未定义的参考

> ID：13020652
> 
> 赞同：0
> 
> 时间：2012-10-22T22:09:39.187
> 
> 标签：c++, qt, dll

我正在尝试在 Qt 中使用和制作 DLL。DLL，**不**使用任何 Qt 框架。这是我图书馆的 .pro 文件：

```
TARGET = MyLib
TEMPLATE = lib

include(Botan.pri)
win32:INCLUDEPATH += "C:/botan/include"
win32:LIBS += "C:/botan/libBotan.a"

unix:INCLUDEPATH += "/usr/local/include/botan-1.10"
unix:LIBS += "/usr/local/lib/libbotan-1.10.a"

HEADERS += \
    HEADERS HERE

SOURCES += \
    SOUCRES HERE 
```

我的库编译成功，并且在我的调试/发布文件夹中得到了一个 MyLib.dll。然后我完全复制了我的库源，并删除了除“includes”文件夹的头文件之外的所有内容。

然后我创建了一个新项目来使用我的库。

我将此添加到我的项目文件中：

```
INCLUDEPATH += "C:/Users/Stevie/Desktop/MyLib/include"
LIBS += "C:/Users/Stevie/Desktop/MyLib/MyLib.dll" 
```

标头没有问题，它发现我的 DLL 很好（如果我将它更改为不存在的路径，它会引发错误。它现在还没有。）

现在，当我进入我的“.cpp”文件时，我包含了我的头文件，并尝试使用我的库，它会抛出“未定义的引用`MyLib::`...”。我不知道为什么，因为我包含了 DLL，并且我相信它应该非常好。

此外，我 99% 确定它与 Botan 无关，因为我经常这样使用 Botan，而且效果很好。无论如何，为了确定，我无论如何都包含了“Botan.dll”，但它不会在 Botan 上抛出未定义的错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:30:28.697

将 LIBS += "C:/Users/Stevie/Desktop/MyLib/MyLib.dll"
替换为
LIBS += -L$$quote(C:/Users/Stevie/Desktop/MyLib)
LIBS += -l$$quote(我的库）

你的图书馆有 Q_DECL_EXPORT / Q_DECL_IMPORT 宏吗？

毕竟清理并重建使用库的项目。

# java - 通过 Apache POI 读取大型 Excel 文件 (xlsx) 时出错

> ID：13020658
> 
> 赞同：10
> 
> 时间：2012-10-22T22:10:00.097
> 
> 标签：java, apache-poi, out-of-memory, xlsx

我正在尝试通过 Apache POI 读取大型 excel 文件 xlsx，例如 40-50 MB。我的内存不足异常。当前堆内存为 3GB。

我可以毫无问题地读取较小的 excel 文件。我需要一种方法来读取大型 excel 文件，然后通过 Spring excel 视图将它们作为响应返回。

```
public class FetchExcel extends AbstractView {

    @Override
    protected void renderMergedOutputModel(
            Map model, HttpServletRequest request, HttpServletResponse response) 
    throws Exception {

    String fileName = "SomeExcel.xlsx";

    response.setContentType("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");

    OPCPackage pkg = OPCPackage.open("/someDir/SomeExcel.xlsx");

    XSSFWorkbook workbook = new XSSFWorkbook(pkg);

    ServletOutputStream respOut = response.getOutputStream();

    pkg.close();
    workbook.write(respOut);
    respOut.flush();

    workbook = null;                    

    response.setHeader("Content-disposition", "attachment;filename=\"" +fileName+ "\"");

    }    

} 
```

我刚开始使用`XSSFWorkbook workbook = new XSSFWorkbook(FileInputStream in);` ，但每个 Apache POI API 的成本都很高，所以我改用 OPC 封装方式，但效果还是一样。我不需要解析或处理文件，只需读取并返回即可。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T13:08:58.253

这是一个使用 sax 解析器读取大型 xls 文件的示例。

```
public void parseExcel(File file) throws IOException {

        OPCPackage container;
        try {
            container = OPCPackage.open(file.getAbsolutePath());
            ReadOnlySharedStringsTable strings = new ReadOnlySharedStringsTable(container);
            XSSFReader xssfReader = new XSSFReader(container);
            StylesTable styles = xssfReader.getStylesTable();
            XSSFReader.SheetIterator iter = (XSSFReader.SheetIterator) xssfReader.getSheetsData();
            while (iter.hasNext()) {
                InputStream stream = iter.next();

                processSheet(styles, strings, stream);
                stream.close();
            }
        } catch (InvalidFormatException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (OpenXML4JException e) {
            e.printStackTrace();
        }

}

protected void processSheet(StylesTable styles, ReadOnlySharedStringsTable strings, InputStream sheetInputStream) throws IOException, SAXException {

        InputSource sheetSource = new InputSource(sheetInputStream);
        SAXParserFactory saxFactory = SAXParserFactory.newInstance();
        try {
            SAXParser saxParser = saxFactory.newSAXParser();
            XMLReader sheetParser = saxParser.getXMLReader();
            ContentHandler handler = new XSSFSheetXMLHandler(styles, strings, new SheetContentsHandler() {

            @Override
                public void startRow(int rowNum) {
                }
                @Override
                public void endRow() {
                }
                @Override
                public void cell(String cellReference, String formattedValue) {
                }
                @Override
                public void headerFooter(String text, boolean isHeader, String tagName) {

                }

            }, 
            false//means result instead of formula
            );
            sheetParser.setContentHandler(handler);
            sheetParser.parse(sheetSource);
        } catch (ParserConfigurationException e) {
            throw new RuntimeException("SAX parser appears to be broken - " + e.getMessage());
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T23:21:32.423

您没有提及是否需要修改电子表格。

这可能很明显，但是如果您不需要修改电子表格，那么您不需要解析它并将其写回，您可以简单地从文件中读取字节并写出字节，就像您使用，例如图像或任何其他二进制格式。

如果您确实需要在将电子表格发送给用户之前对其进行修改，那么据我所知，您可能需要采取不同的方法。

我所知道的用于在 Java 中读取 Excel 文件的每个库都会将整个电子表格读入内存，因此您必须为每个可能同时处理的电子表格提供 50MB 的可用内存。正如其他人指出的那样，这涉及调整 VM 可用的堆。

如果您需要同时处理大量电子表格，并且无法分配足够的内存，请考虑使用可以流式传输的格式，而不是一次性将所有电子表格读取到内存中。CSV格式可以用Excel打开，过去我通过将content-type设置为application/vnd.ms-excel，将附件文件名设置为以“.xls”结尾的东西，但实际上返回的是CSV内容。我已经有几年没试过了，所以 YMMV。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-13T08:51:12.020

在 bellwo 示例中，我将添加一个完整的代码，如何将完整的 excel 文件（对我来说是 60Mo）解析为对象列表，而不会出现“**内存不足”的**任何问题并且工作正常：

```
import java.util.ArrayList;
import java.util.List;

class DistinctByProperty {

    private static OPCPackage xlsxPackage = null;
    private static PrintStream output= System.out;
    private static List<MassUpdateMonitoringRow> resultMapping = new ArrayList<>();

    public static void main(String[] args) throws IOException {

        File file = new File("C:\\Users\\aberguig032018\\Downloads\\your_excel.xlsx");

        double bytes = file.length();
        double kilobytes = (bytes / 1024);
        double megabytes = (kilobytes / 1024);
        System.out.println("Size "+megabytes);

        parseExcel(file);
    }

    public static void parseExcel(File file) throws IOException {

        try {
            xlsxPackage = OPCPackage.open(file.getAbsolutePath(), PackageAccess.READ);
            ReadOnlySharedStringsTable strings = new ReadOnlySharedStringsTable(xlsxPackage);
            XSSFReader xssfReader = new XSSFReader(xlsxPackage);
            StylesTable styles = xssfReader.getStylesTable();
            XSSFReader.SheetIterator iter = (XSSFReader.SheetIterator) xssfReader.getSheetsData();
            int index = 0;
            while (iter.hasNext()) {
                try (InputStream stream = iter.next()) {
                    String sheetName = iter.getSheetName();
                    output.println();
                    output.println(sheetName + " [index=" + index + "]:");
                    processSheet(styles, strings, new MappingFromXml(resultMapping), stream);
                }
                ++index;
            }

        } catch (InvalidFormatException e) {
            e.printStackTrace();
        } catch (OpenXML4JException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        }
    }

    private static void processSheet(StylesTable styles, ReadOnlySharedStringsTable strings, MappingFromXml mappingFromXml, InputStream sheetInputStream) throws IOException, SAXException {
        DataFormatter formatter = new DataFormatter();
        InputSource sheetSource = new InputSource(sheetInputStream);
        try {
            XMLReader sheetParser = SAXHelper.newXMLReader();
            ContentHandler handler = new XSSFSheetXMLHandler(
                    styles, null, strings, mappingFromXml, formatter, false);

            sheetParser.setContentHandler(handler);
            sheetParser.parse(sheetSource);
            System.out.println("Size of Array "+resultMapping.size());
        } catch(ParserConfigurationException e) {
            throw new RuntimeException("SAX parser appears to be broken - " + e.getMessage());
        }
    }
} 
```

你必须添加一个实现

> SheetContentsHandler

```
import com.sun.org.apache.xpath.internal.operations.Bool;
import org.apache.poi.ss.util.CellAddress;
import org.apache.poi.ss.util.CellReference;
import org.apache.poi.xssf.eventusermodel.XSSFSheetXMLHandler.SheetContentsHandler;

import org.apache.poi.xssf.usermodel.XSSFComment;

import java.io.PrintStream;
import java.util.ArrayList;
import java.util.List;

public class MappingFromXml implements SheetContentsHandler {

    private List<myObject> result = new ArrayList<>();
    private myObject myObject = null;
    private int lineNumber = 0;
    /**
     * Number of columns to read starting with leftmost
     */
    private int minColumns = 25;
    /**
     * Destination for data
     */
    private PrintStream output = System.out;

    public MappingFromXml(List<myObject> list) {
        this.result = list;
    }

    @Override
    public void startRow(int i) {
        output.println("iii " + i);
        lineNumber = i;
        myObject = new myObject();
    }

    @Override
    public void endRow(int i) {
        output.println("jjj " + i);
        result.add(myObject);
        myObject = null;
    }

    @Override
    public void cell(String cellReference, String formattedValue, XSSFComment comment) {
        int columnIndex = (new CellReference(cellReference)).getCol();

        if(lineNumber > 0){
            switch (columnIndex) {
                case 0: {//Tech id
                    if (formattedValue != null && !formattedValue.isEmpty())
                        myObject.setId(Integer.parseInt(formattedValue));
                }
                break;
                //TODO add other cell
            }
        }
    }

    @Override
    public void headerFooter(String s, boolean b, String s1) {

    }
} 
```

欲了解更多信息，请访问此[链接](https://poi.apache.org/components/spreadsheet/limitations.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-20T07:17:53.630

我在解析xlsx文件时也遇到了同样的OOM问题……经过两天的努力，我终于发现下面的代码非常完美；

此代码基于 sjxlsx。它读取 xlsx 并存储在 HSSF 表中。

```
 [code=java] 
            // read the xlsx file
       SimpleXLSXWorkbook = new SimpleXLSXWorkbook(new File("C:/test.xlsx"));

        HSSFWorkbook hsfWorkbook = new HSSFWorkbook();

        org.apache.poi.ss.usermodel.Sheet hsfSheet = hsfWorkbook.createSheet();

        Sheet sheetToRead = workbook.getSheet(0, false);

        SheetRowReader reader = sheetToRead.newReader();
        Cell[] row;
        int rowPos = 0;
        while ((row = reader.readRow()) != null) {
            org.apache.poi.ss.usermodel.Row hfsRow = hsfSheet.createRow(rowPos);
            int cellPos = 0;
            for (Cell cell : row) {
                if(cell != null){
                    org.apache.poi.ss.usermodel.Cell hfsCell = hfsRow.createCell(cellPos);
                    hfsCell.setCellType(org.apache.poi.ss.usermodel.Cell.CELL_TYPE_STRING);
                    hfsCell.setCellValue(cell.getValue());
                }
                cellPos++;
            }
            rowPos++;
        }
        return hsfSheet;[/code] 
```

# java - 给 DockLayoutPanel CENTER 区域一个样式名称属性？

> ID：13020659
> 
> 赞同：0
> 
> 时间：2012-10-22T22:10:22.433
> 
> 标签：java, gwt, docklayoutpanel

我在 GWT 中创建了一个新的 DockLayoutPanel，我想在面板的 CENTER 部分给出一个样式名称。有什么建议么？

这是码头布局面板：

```
private DockLayoutPanel doc;

public void onModuleLoad(){

        headerWidget = new HeaderWidget();

        searchWidget = new SearchWidget();

        storeWidget = new StoreWidget();

        doc = new DockLayoutPanel(Unit.EM);

        doc.addNorth(headerWidget, 10);
        doc.addSouth(new HTML("Footer"), 5);
        doc.addWest(WidgetWest(), 20);
        doc.add(searchWidget);

        RootLayoutPanel root = RootLayoutPanel.get();
        root.add(doc);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:11:42.100

```
searchWidget.addStyleName("myStyle"); 
```

# php - 从 mysql 打印与另一个值关联的内容

> ID：13020660
> 
> 赞同：0
> 
> 时间：2012-10-22T22:10:27.370
> 
> 标签：php, mysql

我是 mysql 的新手，我现在正在看一个脚本。但我很好奇这是否可以做到或是否可能。我是 MySQL 新手，所以我可能不知道它是如何工作的。

下面的代码打印与类别内容关联的链接。但我想从正确的 id 中提取 cat_name 。是否有`$row['cat_id']`拉取与from`$cat_record['cat_name']`关联的 cat_name 。喜欢`cat_id``$cat_record`

基本上我会从该 cat_id 中提取关联的 cat_name。

基本上我想打印出与该表中正确的 cat_id 关联的 cat_name。所以我想在该表中打印与 cat_id 关联的 cat_name，它将打印 cat_id 5 的 cat_name。

```
From Events: <a href="<?=$u?>categories/<?=$row['cat_id']?>/1"><?=stripslashes($cat_record['cat_name'])?></a> 
```

不确定这段代码是否有帮助，但我也有这个，我相信它与代码有关。

```
 if(isset($_GET['catid']) and $_GET['catid'] !=''){
     $str = "SELECT * FROM twit_info where cat_id = ". $_GET['catid'] ." order by date_submitted desc";
     $str_cat = "SELECT * FROM category where cat_id = ". $_GET['catid'] ;
     }
     else{
     $str = "SELECT * FROM twit_info where cat_id = (select max(cat_id) from twit_info order by date_submitted desc) and cat_id !=0";
      $str_cat = "SELECT * FROM category where cat_id = (select distinct max(cat_id) from twit_info)";
     }
             $twit = dbConnect($str);
            //if(mysql_num_rows($twit)>0){
              $cat_info = dbConnect($str_cat);  
              $cat_record = mysql_fetch_array($cat_info);
              //print_r($cat_record);
            // } 
```

我对 php 或 mysql 不太了解，但在正确的步骤中推动可能会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:30:53.150

```
$catid = htmlentities($_GET['catid']); 
```

改为这样做

然后做：

```
$str = "SELECT * FROM twit_info where cat_id = ".  $catid ." 
```

事实上，我会将它放入一个 php 函数中，并通过将 $catid 传递给它来调用它。

# java - Web 服务中日期类型的问题

> ID：13020664
> 
> 赞同：0
> 
> 时间：2012-10-22T22:10:47.060
> 
> 标签：java, web-services

我正在开发一个应用程序，它使用一些我必须使用日期类型的服务。WebService 有这个方法：

```
 public TRespuestaPedidosClientes consultarPedidosClientes(int id_cuenta_padre, int nivel_cuenta_padre, int id_cuenta, Date f_inicio, Date f_fin, int estado_pedido, String n_pedido)
 {
     // devuelve los pedidos asociados de una cuenta o de todas las cuentas hijas
     // en un rango de fechas y con estado determinado
     //
     // id_cuenta == 0 -> buscar las cuentas hijas asociadas a la cuenta padre
     //      los pedidos los realizÃ¡n las cuentas de nivel >= 3
     //      cuenta padre es de nivel 1 -> los pedidos son de sus cuentas hijas de nivel 2
     //      cuenta padre es de nivel 2 -> los pedidos son de sus cuentas hijas de nivel 3 y de las hijas de Ã©stas
     // id_cuenta != 0 -> solo los pedidos de Ã©sta cuenta:
     //      - nivel_cuenta_padre = 1 => id_cuenta debe ser de nivel 2
     //      - nivel_cuenta_padre = 2 => id_cuenta debe ser de nivel 3
     //      - nivel_cuenta_padre = 3 => id_cuenta puede ser igual que id_cuenta_padre (ella misma) o puede ser de nivel 4 o 5

     TRespuestaPedidosClientes resultado = new TRespuestaPedidosClientes();
     try
     {

         System.out.println("F_inicio es:"+f_inicio.getTime());
         System.out.println("Tengo la cuenta padre:"+id_cuenta_padre);
         System.out.println("El nivel del padre es"+nivel_cuenta_padre);
         //   A-> nivel cuenta padre = 1
         //          - buscar cuentas hijas -> nivel 2
         //          - por cada cuenta hija de nivel 2: A y C
         //   B-> nivel cuenta padre = 2
         //          - buscar cuentas hijas -> nivel 3
         //          - buscar pedidos
         //   C-> nivel cuenta padre >= 3
         //          - buscar cuentas hijas -> nivel 4
         //          - pedidos de la cuenta actual y de sus hijas

         TRespuestaCuentas result1 = new TRespuestaCuentas();
         switch (nivel_cuenta_padre)
         {
             case 0:
                 {

                     result1 = buscar_Cuentas_Hijas(id_cuenta_padre);
                     if (result1.getError() == -1)
                         throw new Exception("Error al buscar las cuentas hija");

                     for (int i = 0; i < result1.getDatosCuentas().length; i++)
                     {
                         if ((id_cuenta == 0) || (id_cuenta != 0 && id_cuenta == result1.getDatosCuentas()[i].getId_cuenta()))
                         {

                            TRespuestaPedidosClientes resultP = buscar_Pedidos_Cuenta(id_cuenta_padre, result1.getDatosCuentas()[i], 0, estado_pedido, f_inicio, f_fin, n_pedido);
                             if (resultP.getError() == -1)
                                 throw new Exception(resultP.getDescripcion_error());

                             if (resultP.getDatosPedidosClientes() != null)
                             {

                                 for (int k = 0; k < resultP.getDatosPedidosClientes().length; k++)
                                 {
                                     resultP.getDatosPedidosClientes()[k].setCuenta(result1.getDatosCuentas()[i].getNombre());
                                 }

                                 // aÃ±adir pedidos a resultado
                                 resultP.setDatosPedidosClientes(cargar_Datos_PedidosClientes_Array(resultP.getDatosPedidosClientes(), resultado.getDatosPedidosClientes()));
                             }
                         }
                     }

                     break;
                 }

             case 1:
                 {

                     result1 = buscar_Cuentas_Hijas(id_cuenta_padre);
                     if (result1.error == -1)
                         throw new Exception("Error al buscar las cuentas hijas");

                     for (int i = 0; i < result1.getDatosCuentas().length; i++)
                     {
                         if ((id_cuenta == 0) || (id_cuenta != 0 && id_cuenta == result1.getDatosCuentas()[i].getId_cuenta()))
                         {

                             TRespuestaPedidosClientes resultP = buscar_Pedidos_Cuenta(id_cuenta_padre, result1.getDatosCuentas()[i], 0, estado_pedido, f_inicio, f_fin, n_pedido);
                             if (resultP.error == -1)
                                 throw new Exception(resultP.getDescripcion_error());

                             if (resultP.getDatosPedidosClientes() != null)
                             {

                                 for (int k = 0; k < resultP.getDatosPedidosClientes().length; k++)
                                 {
                                     resultP.getDatosPedidosClientes()[k].setCuenta(result1.getDatosCuentas()[i].getNombre());
                                 }

                                 // aÃ±adir pedidos a resultado
                                 resultP.setDatosPedidosClientes(cargar_Datos_PedidosClientes_Array(resultP.getDatosPedidosClientes(), resultado.getDatosPedidosClientes()));
                             }
                         }
                     }

                     break;
                 }
             case 2:
                 {

                         result1 = buscar_Cuentas_Hijas(id_cuenta_padre);
                         if (result1.error == -1)
                             throw new Exception("Error al buscar cuentas hijas");

                         System.out.println("Datos cuentas es:"+result1.getDatosCuentas().length);

                         for (int i = 0; i < result1.getDatosCuentas().length; i++)
                         {
                             if ((id_cuenta == 0) || (id_cuenta != 0 && id_cuenta == result1.getDatosCuentas()[i].getId_cuenta()))
                             {

                               TRespuestaPedidosClientes resultP = buscar_Pedidos_Cuenta(id_cuenta_padre, result1.getDatosCuentas()[i], 0, estado_pedido, f_inicio, f_fin, n_pedido);
                                 System.out.println("ResultP"+resultP.getError());  
                                 if (resultP.getError() == -1)
                                     throw new Exception(resultP.getDescripcion_error());

                                 if (resultP.getError() != 4)
                                 {
                                     // aÃ±adir pedidos a resultado
                                     resultP.setDatosPedidosClientes(cargar_Datos_PedidosClientes_Array(resultP.getDatosPedidosClientes(), resultado.getDatosPedidosClientes()));
                                 }
                             }
                         }

                     break;
                 }
             default:
                 {

                     result1 = buscar_Datos_Cuenta(id_cuenta_padre);
                     if (result1.getError() == -1)
                         throw new Exception("Error al buscar los datos de las cuentas");

                     TRespuestaPedidosClientes resultP = buscar_Pedidos_Cuenta(id_cuenta_padre, result1.getDatosCuentas()[0], id_cuenta, estado_pedido, f_inicio, f_fin, n_pedido);
                     if (resultP.getError() == -1)
                         throw new Exception(resultP.getDescripcion_error());

                     if (resultP.getDatosPedidosClientes() != null)
                     {
                         // aÃ±adir pedidos a resultado
                         resultP.setDatosPedidosClientes(cargar_Datos_PedidosClientes_Array(resultP.getDatosPedidosClientes(), resultado.getDatosPedidosClientes()));
                     }

                     break;
                 }
         }

         resultado.setError(0);
         resultado.setDescripcion_error("");
         return resultado;
     }
     catch (Exception ex)
     {
         resultado.setError(-1);
         resultado.setDescripcion_error(ex.getMessage());
         resultado.setDatosPedidosClientes(null);
         return resultado;
     }
 } 
```

当我从客户端调用此服务时，我会这样做：

```
TRespuestaPedidosClientes pedidosClientes=bsStubcloud.consultarPedidosClientes(params[0].getId_cuenta_padre(), nivel, cuenta, cal, calF, 0, servletRequest.getParameter("edt_pedido").toString()); 
```

其中 cal 和 calF 被转换为 Calendar 类型，我不知道为什么。我使用 Axis，可以通过任何方式保留这些日期类型，并且当我传递这些参数时，它们会得到今天的日期，而不是我发送的日期。我能做些什么？。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:23:21.783

当 JAXB 将 java 对象映射到 xml 时，java 数据类型映射到相应的 xml 模式类型。[您可以在此处](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBWorks4.html)找到有关数据类型映射的更多详细信息。

xml 模式类型 dateTime/date/time 的 java 数据类型是`javax.xml.datatype.XMLGregorianCalendar`

在这种情况下，服务器端创建的 java 日期首先被编组为 xml，在客户端中，xml 日期被解组为 java 日期类型（XMLGregorianCalendar）。因此你得到日历对象。

希望这可以帮助。

# c# - 反序列化xml中的子元素

> ID：13020665
> 
> 赞同：1
> 
> 时间：2012-10-22T22:10:48.047
> 
> 标签：c#, .net, xml, deserialization

我应该如何让`<site-standard-profile-request>`子元素正确反序列化，使其不显示为空？

反序列化过程完善；我只需要让子元素`<site-standard-profile-request>`也进行序列化。

```
 //<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
    //- <person>
    //  <first-name>Storefront</first-name> 
    //  <last-name>Doors</last-name> 
    //  <headline>CEO at StorefrontDoors.NET</headline> 
    //- <site-standard-profile-request>
    //  <url>http://www.linkedin.com/profile?viewProfile=&key=147482099&authToken=-Igm&authType=name&trk=api*a216630*s224617*</url> 
    //  </site-standard-profile-request>
    //  </person>
    [XmlRoot("person")]
    [Serializable()]
    public class LinkedIn
    {
        [XmlElement("first-name")]
        public string FirstName { get; set; }
        [XmlElement("last-name")]
        public string LastName { get; set; }
        [XmlElement("headline")]
        public string Headline { get; set; }
        public string URL { get; set; }
    }

 string profile = oauth.APIWebRequest("GET", "https://api.linkedin.com/v1/people/~", null);
        //

        LinkedIn lkIn = null;

        BufferedStream stream = new BufferedStream(new MemoryStream());
        stream.Write(Encoding.ASCII.GetBytes(profile), 0, profile.Length);
        stream.Seek(0, SeekOrigin.Begin);
        StreamReader sr = new StreamReader(stream);
        XmlSerializer serializer = new XmlSerializer(typeof(LinkedIn));

        lkIn = (LinkedIn)serializer.Deserialize(sr);
        stream.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:54:04.373

您将需要另一个仅将 url 作为属性的可序列化类。例如，

```
[XmlRoot("site-standard-profile-request")]
[Serializable()]
public class StandardProfile
{
    public string url { get;set;}
} 
```

然后你现有的类应该使用它，比如

```
[XmlRoot("person")]
[Serializable()]
public class LinkedIn
{
    [XmlElement("first-name")]
    public string FirstName { get; set; }
    [XmlElement("last-name")]
    public string LastName { get; set; }
    [XmlElement("headline")]
    public string Headline { get; set; }

    public StandardProfile Profile { get;set; }
} 
```

我还没有测试过这段代码，但应该非常接近。

希望有帮助。

# ruby - 您如何开发多个宝石？

> ID：13020669
> 
> 赞同：0
> 
> 时间：2012-10-22T22:11:12.837
> 
> 标签：ruby, rubygems

我正在开发两个 gem：Runel 和 Runic。符文依赖符文。但是，我如何让 Runic 加载以运行 Runel 测试（和捆绑安装）。

我在 Runel 测试中需要 Runic，因为 Runel 的一些类是从 Runic 的类扩展而来的。我想测试它（试一试）作为整个事情（Runel 是一个 VM，Runic 是它的基础）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:33:02.163

如果 Runel 依赖于 Runic，那么 Runic 的测试应该使用 Runel。也就是说，Runic 提供了一个服务，这个服务应该作为一个独立的东西来测试。

同样，您在 Runel 中的单元测试不应该使用 Runic。这种肯定不适用于集成测试。

如果您认为这没有意义，那么也许您的两个宝石实际上应该形成一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:10:42.960

只是它们是预发布版本（0.0.1.dev.1）。

但`bundle install`还是给`Fetching source index for http://rubygems.org/ Could not find gem 'runic (~> 0.0) x86-mingw32', which is required by gem 'runel (>= 0) x86-mingw32', in any of the sources.`

# maven - 无法测试 Jenkins 插件

> ID：13020673
> 
> 赞同：4
> 
> 时间：2012-10-22T22:11:30.387
> 
> 标签：maven, jenkins, jenkins-plugins

我实际上正在尝试使用 maven 开发 Jenkins 插件，但我无法对其进行测试。

我使用命令创建了我的项目`mvn -cpu hpi:create`。我打电话给`project jenkins-plugin-tutorial`. 我用`mvn package`or打包它`mvn install`并用`mvn hpi:run`.

默认情况下，在 Jenkins 配置页面（Jenkins Menu -> Manage Jenkins -> Configure System）或 Build 部分下应该出现一个用于测试目的的 HelloWorlBuilder，但它不会显示。

我通过确保我没有犯错但它仍然无法工作，一步一步地遵循这两个教程（[here](http://blog.codecentric.de/en/2012/08/tutorial-create-a-jenkins-plugin-to-integrate-jenkins-and-nexus-repository/)和[here ）。](https://wiki.jenkins-ci.org/display/JENKINS/Plugin+tutorial)

也许我做错了什么。有人可以给我一些提示如何纠正我的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T07:26:20.627

在`pom.xml`中，尝试将父级更改为：

```
<parent>
    <groupId>org.jenkins-ci.plugins</groupId>
    <artifactId>plugin</artifactId>
    <version>1.454</version>
</parent> 
```

我刚刚对那个 hpi:create 进行了快速测试，它对我有用，我得到了预期的全局和作业配置，但我必须在编译之前对 pom.xml 进行更改。

也就是说，我做了：

*   `mvn hpi:create`
*   提示时输入 groupId `foo.hyde.jenkins.plugins`， artifactId `hello-world`。
*   `cd hello-world`
*   `mvn install`失败的
*   编辑 pom.xml 以更改父级
*   `mvn install`成功了
*   `mvn hpi:run -Djetty.port=8092`成功（使用该端口，因为其他 Jenkins 已经在默认端口中，否则 -D... 不需要。）
*   转到`http://localhost:8092`，检查全局配置，创建作业并添加构建步骤

它对我有用。

我正在使用 Maven 2，版本 2.2.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:48:44.343

我终于找到了我的问题的答案。问题是我使用的是旧版本的 maven，即 2.2.1 版本。所以我换到最后一个版本，3.0.4，现在一切都很好。

# configuration - Drools planner：护士排班场景配置与竞争.xsd

> ID：13020677
> 
> 赞同：0
> 
> 时间：2012-10-22T22:11:47.533
> 
> 标签：configuration, xsd, schema, drools-planner

我正在建模基于[Drools Planner Nurse](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html/useCasesAndExamples.html#d0e1555) Rostering 的人员排班。

我正在玩`*.xml`基于`competition.xsd`模式的示例。架构通常非常清晰，但是配置参数太多，我不确定如何正确配置每个参数。例如，我无法弄清楚如何在标签中正确设置`patterns`它们及其用法。`contracts`

目的是正确建模我的场景`.xml`文件，以避免不必要的约束并正确加权有用的约束。

所以，我正在寻找一些关于`competition.xsd`模式的详细参考资料，也许还有关于模式使用的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:40:14.023

护士排班竞赛文件可在[此处](http://www.kuleuven-kulak.be/nrpcompetition)找到。

[Geoffrey De Smet](https://stackoverflow.com/users/472109/geoffrey-de-smet) 的一篇有用的文章[在这里](http://blog.athico.com/2010/03/nurse-rostering-design-choices.html)。

# asp.net - 必须声明标量变量“Post_ID”

> ID：13020678
> 
> 赞同：0
> 
> 时间：2012-10-22T22:11:55.183
> 
> 标签：asp.net, asp.net-mvc

如果我尝试更新表中的 2 个不同的 ID，我会收到此错误“必须声明标量变量“Post_ID”。换句话说，我可以根据需要进行多次更新，例如 ID #25，但如果我尝试更新 ID # 26 然后我收到上面的错误。我的插入功能只有我的更新功能才能正常工作。请帮助，我感谢您的时间。注意，DateKeyNames = ID。这是我仅用于更新的代码：

```
SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
            SqlCommand cmd = new SqlCommand();

            cmd.CommandText = "UPDATE MyTable SET Post_ID=@Post_ID, Date=@Date, Description=@Description WHERE ID=@ID";

            TextBox myTextBox11 = GV_InlineEditing.Rows[0].FindControl("GV_Post_ID") as TextBox;
            TextBox myTextBox22 = GV_InlineEditing.Rows[0].FindControl("TextBox2") as TextBox;
            TextBox myTextBox33 = GV_InlineEditing.Rows[0].FindControl("TextBox3") as TextBox;

            if (myTextBox11 != null)
            {
                cmd.Parameters.Add("@Post_ID", SqlDbType.VarChar).Value = myTextBox11.Text;
            }
            else
            {
                TextBox GV_Post_ID = GV_InlineEditing.Rows[0].Cells[0].FindControl("GV_Post_ID") as TextBox;

            }

            if (myTextBox22 != null)
            {
                cmd.Parameters.Add("@Date", SqlDbType.VarChar).Value = myTextBox22.Text;
            }
            else
            {
                TextBox GV_Post_ID = GV_InlineEditing.Rows[0].Cells[0].FindControl("Date") as TextBox;

            }

            if (myTextBox33 != null)
            {
                cmd.Parameters.Add("@Description", SqlDbType.VarChar).Value = myTextBox33.Text;
            }
            else
            {
                TextBox GV_Post_ID = GV_InlineEditing.Rows[0].Cells[0].FindControl("Description") as TextBox;

            }
            cmd.Parameters.Add("@ID", SqlDbType.Int).Value = Convert.ToInt32(GV_InlineEditing.Rows[e.RowIndex].Cells[1].Text);

            cmd.Connection = con;
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close();

        }

        GV_InlineEditing.EditIndex = -1;
        BindData(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:40:39.713

您的逻辑有些错误：

```
if (myTextBox11 != null)
{
    //add paramter
    cmd.Parameters.Add("@Post_ID", SqlDbType.VarChar).Value = myTextBox11.Text;
}
else
{
    //declare a different textbox and do not add the SQL parameter
    TextBox GV_Post_ID = GV_InlineEditing.Rows[0].Cells[0].FindControl("GV_Post_ID") as TextBox;
} 
```

对于`myTextBox22`和重复这种模式`myTextBox33`。

我会建议这个逻辑：

```
SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings("MyConnectionString").ConnectionString);
SqlCommand cmd = new SqlCommand();

cmd.CommandText = "UPDATE MyTable SET Post_ID=@Post_ID, Date=@Date, Description=@Description WHERE ID=@ID";

TextBox myTextBox11 = GV_InlineEditing.Rows(0).FindControl("GV_Post_ID") as TextBox;
TextBox myTextBox22 = GV_InlineEditing.Rows(0).FindControl("Date") as TextBox;
TextBox myTextBox33 = GV_InlineEditing.Rows(0).FindControl("Description") as TextBox;

if (myTextBox11 == null) {
    //try an alternate control for myTextBox11
    myTextBox11 = GV_InlineEditing.Rows(0).Cells(0).FindControl("GV_Post_ID") as TextBox;
}

if (myTextBox22 == null) {
    //try an alternate control for myTextBox22
    myTextBox22 = GV_InlineEditing.Rows(0).Cells(0).FindControl("Date") as TextBox;
}

if (myTextBox33 == null) {
    //try an alternate control for myTextBox33
    myTextBox33 = GV_InlineEditing.Rows(0).Cells(0).FindControl("Description") as TextBox;
}

if (myTextBox11 != null & myTextBox22 != null & myTextBox33 != null) {
    //all three textbox controls found
    cmd.Parameters.Add("@Post_ID", SqlDbType.VarChar).Value = myTextBox11.Text;
    cmd.Parameters.Add("@Date", SqlDbType.VarChar).Value = myTextBox22.Text;
    cmd.Parameters.Add("@Description", SqlDbType.VarChar).Value = myTextBox33.Text;
    cmd.Parameters.Add("@ID", SqlDbType.Int).Value = Convert.ToInt32(GV_InlineEditing.Rows(e.RowIndex).Cells(1).Text);

    cmd.Connection = con;
    con.Open();
    cmd.ExecuteNonQuery();
    con.Close();
} 
```

**更新**

为、和添加`else`条件。`Throw New Exception("myTextBox11 is null");``myTextBox11``myTextBox22``myTextBox33`

这将允许您查看两者是否：

```
GV_InlineEditing.Rows(0).FindControl("Date") as TextBox; 
```

和：

```
GV_InlineEditing.Rows(0).Cells(0).FindControl("GV_Post_ID"); 
```

失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:12:03.817

我总是做这样的事情：

```
 protected void Gridview1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {

            GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
            int id = Int32.Parse(GridView1.DataKeys[e.RowIndex].Value.ToString());
            TextBox date = (TextBox)row.FindControl("date");

            SqlCommand cmd = new SqlCommand();
            cmd.CommandText =    "update t_your_table " +
                                 "set " +                                 
                                 "date = @date, " +             
                                 " time = @time  where id = @ID "                             

        cmd.Parameters.Add("@id", SqlDbType.VarChar).Value = id;           
        cmd.Parameters.Add("@date", SqlDbType.VarChar).Value = date.Text; 
```

您必须将 datakeyname 放入变量中。这样，无论单击哪一行，它都会使用该字段。

# python - 列表Python中的重复元素

> ID：13020679
> 
> 赞同：8
> 
> 时间：2012-10-22T22:12:01.397
> 
> 标签：python, string, list, loops, repeat

假设我有一个字符串列表：

```
a = ['a', 'a', 'b', 'c', 'c', 'c', 'd'] 
```

我想列出至少连续出现两次的项目列表：

```
result = ['a', 'c'] 
```

我知道我必须使用 for 循环，但我不知道如何定位连续重复的项目。我该怎么做？

编辑：如果同一项目在 a 中重复两次怎么办？那么set函数就失效了

```
a = ['a', 'b', 'a', 'a', 'c', 'a', 'a', 'a', 'd', 'd']
result = ['a', 'a', 'd'] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T22:13:13.763

在这里尝试[`itertools.groupby()`](http://docs.python.org/library/itertools.html#itertools.groupby)：

```
>>> from itertools import groupby,islice
>>> a = ['a', 'a', 'b', 'c', 'c', 'c', 'b']

>>> [list(g) for k,g in groupby(a)]
[['a', 'a'], ['b'], ['c', 'c', 'c'], ['b']] 

>>> [k for k,g in groupby(a) if len(list(g))>=2]
['a', 'c'] 
```

使用`islice()`：

```
>>> [k for k,g in groupby(a) if len(list(islice(g,0,2)))==2]
>>> ['a', 'c'] 
```

使用`zip()`和`izip()`：

```
In [198]: set(x[0] for x in izip(a,a[1:]) if x[0]==x[1])
Out[198]: set(['a', 'c'])

In [199]: set(x[0] for x in zip(a,a[1:]) if x[0]==x[1])
Out[199]: set(['a', 'c']) 
```

`timeit`结果：

```
from itertools import *

a='aaaabbbccccddddefgggghhhhhiiiiiijjjkkklllmnooooooppppppppqqqqqqsssstuuvv'

def grp_isl():
    [k for k,g in groupby(a) if len(list(islice(g,0,2)))==2]

def grpby():
    [k for k,g in groupby(a) if len(list(g))>=2]

def chn():
    set(x[1] for x in chain(izip(*([iter(a)] * 2)), izip(*([iter(a[1:])] * 2))) if x[0] == x[1])

def dread():
    set(a[i] for i in range(1, len(a)) if a[i] == a[i-1])

def xdread():
    set(a[i] for i in xrange(1, len(a)) if a[i] == a[i-1])

def inrow():
    inRow = []
    last = None
    for x in a:
        if last == x and (len(inRow) == 0 or inRow[-1] != x):
            inRow.append(last)
        last = x

def zipp():
    set(x[0] for x in zip(a,a[1:]) if x[0]==x[1])

def izipp():
    set(x[0] for x in izip(a,a[1:]) if x[0]==x[1])

if __name__=="__main__":
    import timeit
    print "islice",timeit.timeit("grp_isl()", setup="from __main__ import grp_isl")
    print "grpby",timeit.timeit("grpby()", setup="from __main__ import grpby")
    print "dread",timeit.timeit("dread()", setup="from __main__ import dread")
    print "xdread",timeit.timeit("xdread()", setup="from __main__ import xdread")
    print "chain",timeit.timeit("chn()", setup="from __main__ import chn")
    print "inrow",timeit.timeit("inrow()", setup="from __main__ import inrow")
    print "zip",timeit.timeit("zipp()", setup="from __main__ import zipp")
    print "izip",timeit.timeit("izipp()", setup="from __main__ import izipp") 
```

**输出：**

```
islice 39.9123107277
grpby 30.1204478987
dread 17.8041124706
xdread 15.3691785568
chain 17.4777339702
inrow 11.8577565327           
zip 16.6348844045
izip 15.1468557105 
```

**结论：**

与其他替代方案相比，[Poke 的解决方案是最快的解决方案。](https://stackoverflow.com/a/13020768/846892)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T22:13:59.223

这听起来像是家庭作业，所以我将概述我将要做的事情：

1.  迭代`a`，但将每个元素的索引保留在变量中。`enumerate()`会有用的。
2.  在循环内部，从当前项目的索引`for`开始循环。`while`
3.  只要下一个元素与前一个（或原始）相同，就重复循环。`break`在这里会有用。
4.  计算循环重复的次数（为此您需要一些计数器变量）。
5.  `result`如果您的计数器变量为`>=`2 ，则将该项目附加到您的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T22:20:05.820

我的看法：

```
>>> a = ['a', 'a', 'b', 'c', 'c', 'c', 'd']
>>> inRow = []
>>> last = None
>>> for x in a:
        if last == x and (len(inRow) == 0 or inRow[-1] != x):
            inRow.append(last)
        last = x
>>> inRow
['a', 'c'] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-22T23:12:29.590

怎么样：

`set([a[i] for i in range(1, len(a)) if a[i] == a[i-1]])`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-22T22:39:17.530

这是一个 Python one-liner，可以满足我的需求。它使用`itertools`包：

```
from itertools import chain, izip

a = "aabbbdeefggh" 

set(x[1] for x in chain(izip(*([iter(a)] * 2)), izip(*([iter(a[1:])] * 2))) if x[0] == x[1]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T13:39:33.757

编辑后的问题要求避免使用 set()，排除大部分答案。

我想我会将花哨的单行列表理解与来自@poke 的旧循环和我创建的另一个循环进行比较：

```
from itertools import *

a = 'aaaabbbccccaaaaefgggghhhhhiiiiiijjjkkklllmnooooooaaaaaaaaqqqqqqsssstuuvv'

def izipp():
    return set(x[0] for x in izip(a, a[1:]) if x[0] == x[1])

def grpby():
    return [k for k,g in groupby(a) if len(list(g))>=2]

def poke():
    inRow = []
    last = None
    for x in a:
        if last == x and (len(inRow) == 0 or inRow[-1] != x):
            inRow.append(last)
        last = x
    return inRow    

def dread2():
    repeated_chars = []
    previous_char = ''
    for char in a:
        if repeated_chars and char == repeated_chars[-1]:
            continue
        if char == previous_char:
            repeated_chars.append(char)
        else:
            previous_char = char
    return repeated_chars

if __name__=="__main__":
    import timeit
    print "izip",timeit.timeit("izipp()", setup="from __main__ import izipp"),''.join(izipp())
    print "grpby",timeit.timeit("grpby()", setup="from __main__ import grpby"),''.join(grpby())
    print "poke",timeit.timeit("poke()", setup="from __main__ import poke"),''.join(poke())
    print "dread2",timeit.timeit("dread2()", setup="from __main__ import dread2"),''.join(dread2()) 
```

给我结果：

```
izip 13.2173779011 acbgihkjloqsuv
grpby 18.1190848351 abcaghijkloaqsuv
poke 11.8500328064 abcaghijkloaqsuv
dread2 9.0088801384 abcaghijkloaqsuv 
```

所以一个基本的循环似乎比所有的列表理解都快，并且是 groupby 的两倍。然而，基本循环的读写更复杂，所以在大多数情况下我可能会坚持使用 groupby()。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T19:25:26.323

这是一个正则表达式单行：

```
>>> mylist = ['a', 'a', 'b', 'c', 'c', 'c', 'd', 'a', 'a']
>>> results = [match[0][0] for match in re.findall(r'((\w)\2{1,})', ''.join(mylist))]
>>> results
['a', 'c', 'a'] 
```

对不起，太懒了，没时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-27T03:25:40.350

```
a = ['a', 'a', 'b', 'c', 'c', 'c', 'd']
res=[]
for i in a:
    if a.count(i)>1 and i not in res:
        res.append(i)
print(res) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-11T19:36:17.023

使用 enumerate 连续检查两个：

```
def repetitives(long_list)
  repeaters = []
  for counter,item in enumerate(long_list):
    if item == long_list[counter-1] and item not in repeaters:
      repeaters.append(item)
 return repeaters 
```

# google-app-engine - gae 样板文件

> ID：13020681
> 
> 赞同：5
> 
> 时间：2012-10-22T22:12:08.540
> 
> 标签：google-app-engine, boilerplate

在我为 App Engine 寻找一个好的社交登录包时，我正在尝试 gae-boilerplate。但是我发现除了自述文件之外没有任何文档，我认为这根本不够。

我有很多问题，其中包括：

*   样板文件应该用作库还是根据需要下载和修改？
*   样板应该如何更新？
*   每个模型的作用是什么？
*   我的模板应该放在哪里？
*   我应该有不同的路线文件吗？
*   我应该从 BaseHandler 派生我的处理程序吗？
*   一般来说，我应该在我的页面中实现什么？例如，我发现我必须在所有 POST 请求中包含一个 csrf_token。提前知道这一点会很好，以及我在此过程中必须找出的许多其他事情，并且我在不确定是否应该这样做的情况下实施这些事情。
*   还有一些...

我最大的问题是社交登录不起作用，我觉得这个样板是一个大怪物，我不知道从哪里开始。更糟糕的是，很难从任何不是生产机器的机器上调试社交身份验证。这就是为什么我拼命寻找一些文档。

我在SO中没有发现任何东西，我想我的情况一定有更多的人。因此，任何可以帮助更好地理解 gae-boilerplate 的文档指针将不胜感激。

编辑：我在以前工作的站点中切换到 gae-boilerplate。也许我的大部分问题都来自于我尝试将 gae-boilerplate 和我现有的站点集成的方式。因此，我尝试将 gae-boilerplate 视为一个库，并保留我自己的模板、处理程序、静态文件等。

感谢你们！

编辑 2：在尝试了其他选项之后，我不得不说我对 gae-simpleauth 非常满意。它工作得非常好，Alex 的支持也很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:36:29.423

我将尝试在下面回答您的大部分问题：

*   样板文件应该用作库还是根据需要下载和修改？
    *   您可以根据您的具体要求根据需要对其进行修改。
*   样板应该如何更新？
    *   你是什​​么意思？
*   每个模型的作用是什么？
    *   `User`并且`SocialUser`非常不言自明。`LogVisit`并`LogEmail`用于审计目的。
*   我的模板应该放在哪里？
    *   在模板目录中
*   我应该有不同的路线文件吗？
    *   不，您可以将现有文件用于所有路线。
*   我应该从中派生我的处理程序`BaseHandler`吗？
    *   这不是强制性的，但我建议这样做。`BaseHandler`非常方便，提供了很多好东西。
*   一般来说，我应该在我的页面中实现什么？
    *   你到底什么意思？

通常，您可以使用 gae-boilerplate 作为参考，在此基础上您将构建自己的项目。一步一步地研究代码，试着弄清楚每个文件和库的用途是什么，以及它们是如何协同工作的。通过这种方式，您将获得很多知识，例如 jinja 模板、oauth2 等。

希望这可以帮助。

# php - 文件所有者/组 48/48

> ID：13020683
> 
> 赞同：1
> 
> 时间：2012-10-22T22:12:18.787
> 
> 标签：php, filesystems

我有问题。在我的 PHP 主机中，当我创建文件或目录（通过`rename()`或`mkdir()`）时，我的文件是使用 OWNER 48、GROUP 48 而不是 FTP OWNER/GROUP（与其他主机一样）创建的。

问题是，如果我做一个`mkdir()`例如，通过 PHP，我不能管理这个目录（比如放入一些文件，重命名目录或删除），即使在 PHP 中！如果我通过 FTP 创建这个目录，我可以做所有事情。真的很奇怪。

现在我需要知道：我错了还是我的 PHP 主机被窃听了？他们告诉我这是一个代码问题。

我的代码：

```
mkdir($image_dir, 0777, true); 
```

它会在 FTP 上创建类似的东西：

```
NAME   TYPE  DATE   PERMS      OWNER/GROUP
./1967 [DIR] [DATE] fle (0755) 48/48 
```

即使我将 chmod 设置`mkdir()`为 0777，它也会像 0755 一样创建。

所以，我可以做点什么，还是我的主人需要做的？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:23:12.820

起初这并不奇怪，webserver/php 作为与您的 ftp 客户端不同的用户运行是件好事。

`umask(0000);`好吧，这很丑陋，但可能对您有所帮助：在任何文件操作之前在 php 中使用。`0777`当由 php 创建时，它将尝试创建所有文件和目录。

您应该检查 webserver/php 和 ftp 客户端是否至少在同一组中，以便您可以使用 umask 0007。

顺便提一句。php在安全模式下运行吗？它可能会阻止使文件对其他用户可写...无论如何，您应该确保禁用它，因为它自 php 5.3 以来已被弃用，自 5.4 以来已被删除

# objective-c - 持久化核心数据对象的子集

> ID：13020684
> 
> 赞同：1
> 
> 时间：2012-10-22T22:12:21.483
> 
> 标签：objective-c, ios, performance, cocoa, core-data

这有点奇怪，但我想在`NSManagedObjects`Core Data 之外存储一个数组。

Core Data 正在管理我的模型的所有属性和关系。一种这样的关系是与所有`Author`的`Books`。有时以特定顺序了解相同的列表很有用，因此我已将`booksByDate`（例如）添加到`NSManagedObject`作者。

因为排序描述符被证明是昂贵的，我实现了一个缓存，使用一个 iVar on `Author`。这对我遇到的一些滞后的 UI 问题有很大帮助。但是缓存只有在第一次加载后才有用，所以当我的应用程序启动时，我现在去告诉每个`Author`人缓存它的`booksByDate`. 这使我的启动时间增加了几秒钟，但一旦应用程序运行，性能就会大大加快。

我想减少启动时间。我正在试验的一个领域是以某种方式存储每个`Author`缓存的`booksByDate`。在启动时，不是告诉每个`Author`使用昂贵的排序描述符生成它的缓存，我可以将每个存储的缓存传递给它是正确的`Author`。

我如何存储这些缓存以便它们在执行之间持续存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:20:30.770

我认为最好的选择是为每本书设置一个索引成员。当您插入一本新书时，只需遍历该书的作者书籍列表并为该书的索引设置适当的值。这样，每次您索要书籍时，您都可以根据该索引进行排序。这将比按日期比较快得多。

# magento - 没有送货选项 - 创建订单管理面板 - Magento

> ID：13020686
> 
> 赞同：0
> 
> 时间：2012-10-22T22:12:24.890
> 
> 标签：magento

当我尝试直接从 Magento 管理面板创建订单时，没有可用的运输选项。我总是收到消息“抱歉，此时此订单没有可用的报价”。

我尝试更改运输国家、运输邮政编码、产品重量和产品价格以显示运输选项，但没有运气。

“免费送货”选项已启用，并在前端结账时使用。

我在 Magento CE 1.7.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:39:31.073

如果在以下情况下，它会导致在管理面板中创建订单时出现问题：

系统->配置->销售->发货设置

未进行设置。

这能解决吗？

# python - 是否有用于调试 python 的 sublime text 2 插件？

> ID：13020687
> 
> 赞同：10
> 
> 时间：2012-10-22T22:12:26.917
> 
> 标签：python, debugging, sublimetext2

是否有用于调试 python 的 sublime text 2 插件？Sublime Text 是一个非常棒的 python 编辑器，但是一旦项目变得太大，我就不得不使用其他的 IDE（比如 eclipse）进行调试。

你们中的任何*Python 专家*有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T03:22:11.820

尝试[https://github.com/wuub/SublimeREPL](https://github.com/wuub/SublimeREPL)，它使用 pdb 调试 python，并且易于通过包控制器安装

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:47:15.050

尝试[https://pypi.python.org/pypi/PdbSublimeTextSupport](https://pypi.python.org/pypi/PdbSublimeTextSupport) 是的，这不是你不会的，而是一些东西。

# python - 使用 pytz 获取时区的国家代码？

> ID：13020690
> 
> 赞同：15
> 
> 时间：2012-10-22T22:12:40.957
> 
> 标签：python, pytz

我正在使用[pytz](http://pytz.sourceforge.net/#country-information)。我已经阅读了整个文档表，但没有看到如何做到这一点。

我有一个时区：美国/芝加哥。我想要的只是获取该时区的相应国家代码：美国。

它表明我可以做相反的事情，例如：

```
>>> country_timezones('ch')
['Europe/Zurich']
>>> country_timezones('CH')
['Europe/Zurich'] 
```

但我需要反过来做。

这可以在 Python 中使用 pytz （或任何其他方式）来完成吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T22:21:42.570

您可以使用`country_timezones`对象`pytz`并生成逆映射：

```
from pytz import country_timezones

timezone_country = {}
for countrycode in country_timezones:
    timezones = country_timezones[countrycode]
    for timezone in timezones:
        timezone_country[timezone] = countrycode 
```

现在只需使用生成的字典：

```
>>> timezone_country['Europe/Zurich']
u'CH' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T22:33:49.557

这很简单。您`dict`将每个国家/地区映射到时区列表。您希望将每个`list`成员映射回`dict`.

与其只是给出答案，不如让我们看看如何得到它。

首先，如果您只是`dict`将每个国家/地区映射到一个时区，这将是一个简单的反向映射：

```
timezone_countries = {timezone: country 
                      for country, timezone in country_timezones.iteritems()} 
```

但这行不通；您有一个时区列表的映射，并且您希望该列表中的每个时区映射回该国家/地区。英文描述“该列表中的每个时区”可以轻松翻译成 Python：

```
timezone_countries = {timezone: country 
                      for country, timezones in country_timezones.iteritems()
                      for timezone in timezones} 
```

这是在行动：

```
>>> from pytz import country_timezones
>>> timezone_countries = {timezone: country 
                          for country, timezones in country_timezones.iteritems()
                          for timezone in timezones}
>>> timezone_countries['Europe/Zurich']
u'CH' 
```

旁注：您没有提到 Python 2 与 3，所以我假设为 2。如果您在 3 上，请更改`iteritems`为`items`，输出将`'CH'`代替`u'CH'`.

# oracle - 在没有“SQL>”行前缀的文件中获取 SQL*Plus

> ID：13020692
> 
> 赞同：0
> 
> 时间：2012-10-22T22:12:46.357
> 
> 标签：oracle, oracle11g, sqlplus

我正在尝试让 SQL*Plus 在其输出文件中写入进度，该文件应该可以作为报告呈现，即没有应用程序原生的不良格式。特别是，我想摆脱每行似乎都以 SQL> 开头的 SQL>。这是我调用 sqlplus 的 shell 脚本：

```
#!/usr/bin/ksh

$ORABIN/sqlplus $ORADBUSER/$ORADBPASSWD@$ORADB<<!!>./orclTest.log

SELECT 'IN sqlplus' AS MESSAGE1 FROM dual;

VARIABLE rowCnt number;
BEGIN
SELECT COUNT(*) INTO :rowCnt FROM dual;
END;
/

SELECT 'Dual has ' || :rowCnt || ' rows' AS MESSAGE2 FROM  dual;

!! 
```

当我运行它时，这是我在 orclTest.log 中得到的：

```
SQL*Plus: Release 10.2.0.3.0 - Production on Mon Oct 22 18:06:02 2012

Copyright (c) 1982, 2006, Oracle.  All Rights Reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production
With the Partitioning, Automatic Storage Management, OLAP, Data Mining
and Real Application Testing options

SQL> SQL>
MESSAGE1 
----------
IN sqlplus

SQL> SQL> SQL> SQL>   2    3    4
PL/SQL procedure successfully completed.

SQL> SQL>
MESSAGE2
------------------------------------------------------
Dual has 1 rows 
```

告诉 sqlplus 不要给我它的标准格式的任何方法，比如标题和前缀，并且只输出：

```
MESSAGE1 
----------
IN sqlplus

MESSAGE2
------------------------------------------------------
Dual has 1 rows 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:22:50.337

如果你想省略`SQL>`提示

```
 set sqlprompt '' 
```

如果要删除打印的数字以表示多行语句中的后续行

```
set sqlnumber off 
```

# c++ - 在 C++ 中将数据从一个线程发送到另一个线程的最快方法是什么？

> ID：13020695
> 
> 赞同：6
> 
> 时间：2012-10-22T22:12:57.160
> 
> 标签：c++, multithreading, low-latency

我尝试了一个实验，我构建了一个简单的生产者/消费者程序。它们在不同的线程中运行。生产者生成一些数据，消费者在另一个线程中获取它。我实现的消息传递延迟约为 100 纳秒。谁能告诉我这是否合理或者那里有明显更快的实现？

我没有使用锁......只是简单的内存计数器。我的实验在这里描述：

[http://tradexoft.wordpress.com/2012/10/22/how-to-move-data-between-threads-in-100-nanoseconds/](http://tradexoft.wordpress.com/2012/10/22/how-to-move-data-between-threads-in-100-nanoseconds/)

基本上，消费者等待计数器增加，然后调用处理函数。所以真的没有多少代码。我仍然很惊讶它花了 100ns。

消费者看起来像这样：

```
 void operator()()
    {
      while (true)
      {
        while (w_cnt==r_cnt) {};
        auto rc=process_data(data);
        r_cnt++;
        if (!rc)
          break;
      }
    } 
```

生产者在有可用数据时简单地增加 w_cnt。

有更快的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T22:39:13.530

我想你的延迟是操作系统如何安排上下文切换的产物，而不是自旋锁本身，我怀疑你可以做很多事情。

但是，您可以使用环形缓冲区一次移动更多数据。如果一个线程写一个线程读，你可以实现一个没有锁的环形缓冲区。本质上，这将是相同的自旋锁方法（等待直到`tailidx != headidx`），但生产者可以在将多个值切换到消费者之前将多个值泵入缓冲区。这应该会改善您的整体延迟（但不是您的单值延迟）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:02:34.623

If your threads are executed on different cores, then the fastest way to "send message" from one thread to another is [write barrier(sfence)](http://en.wikipedia.org/wiki/Memory_barrier).

When you write to some memory location, you actually write to the [processors write buffer](http://en.wikipedia.org/wiki/Write_buffer), not to the main-memory location. Write buffer is periodically flushed to main memory by the processor. Also, write instruction can be delayed when instruction reordering occurs. When actual write to main memory occurs, cache coherency protocol comes into play and "informs" another processor about memory location update. After that, another processor invalidates cache line and another thread will be able to see your changes.

Store barrier force processor to flush write buffer and prohibit instruction reordering and your program will be able to send more messages per second.

# python - 如何继承 QTableWidgetItem

> ID：13020700
> 
> 赞同：1
> 
> 时间：2012-10-22T22:13:10.957
> 
> 标签：python, pyside

[以下程序是尝试将“C++ GUI Programming with Qt 4 (2nd Edition)”](http://qt-project.org/books/view/c_gui_programming_with_qt_4_2nd_edition_the_official_c_qt_book)中的电子表格示例转换为 Python 和 PySide 的简化示例。我正在尝试子类化`QTableWidgetItem`该类，以便将我自己的元素类型提供给`QTableWidget`.

```
import sys

from PySide.QtGui import QApplication, QTableWidget, QTableWidgetItem

class Cell(QTableWidgetItem):
    def __init__(self, *args, **kwargs):
        super(Cell, self).__init__(*args, **kwargs)

    def clone(self):
        c = Cell()
        return c

class Spreadsheet(QTableWidget):
    def __init__(self, parent=None):
        super(Spreadsheet, self).__init__(parent)
        self.setItemPrototype(Cell())
        self.clear()

    def clear(self):
        self.setRowCount(0)
        self.setColumnCount(0)
        self.setRowCount(999)
        self.setColumnCount(26)
        for i in range(0, 26):
            item = QTableWidgetItem()
            item.setText(chr(ord('A') + i))
            self.setHorizontalHeaderItem(i, item)
        self.setCurrentCell(0, 0)

if __name__ == "__main__":
    app = QApplication(sys.argv)
    s = Spreadsheet()
    s.show()
    sys.exit(app.exec_()) 
```

如果我单击一个单元格，输入一个字符，然后单击第二个单元格，Python 解释器就会崩溃。

我阅读[了这个答案](https://stackoverflow.com/questions/5284648/init-method-for-subclass-of-pyqt-qtablewidgetitem)并尝试了一些变体，例如删除`Cell.__init__()`方法的参数或传递`self`给`Cell()`in `clone()`，但总是得到相同的结果。

我正在使用 Python 2.7.3 win32 和 PySide 1.1.2 。我究竟做错了什么？

# java - 如何在 JFrame 中设置默认图标？

> ID：13020702
> 
> 赞同：2
> 
> 时间：2012-10-22T22:13:22.087
> 
> 标签：java, swing, icons, jframe

所以我正在制作Java，并制作了一个不错的小程序。这是代码：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class aa extends JFrame{
    private JButton jb;
    private JTextField jt0;
    private JTextField jt1;
    private JTextField jt2;
    int jti1;
    int jti2;

    public aa(){
        jb = new JButton(">> FIGHT <<");
        jt0 = new JTextField("", 25);
        jt1 = new JTextField("", 25);
        jt2 = new JTextField("<< BATTLE VICTOR >>", 35);    
        jt0.setText("");
        jt2.setEditable(false);

        jb.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if(jt0.getText().length() > jt1.getText().length())
                    jt2.setText((jt0.getText() + " << IS VICTORIUS OVER >> " + jt1.getText()));
                else if(jt1.getText().length() > jt0.getText().length())
                    jt2.setText((jt1.getText() + " << IS VICTORIUS OVER >> " + jt0.getText()));
                else if(jt1.getText().length() == jt0.getText().length())
                    jt2.setText((jt1.getText() + " << TIED >> " + jt0.getText()));
            };
        }
        );

        add(jt0, BorderLayout.NORTH);
        add(jt1, BorderLayout.NORTH);
        add(jt2, BorderLayout.NORTH);
        add(jb, BorderLayout.CENTER);
    }
} 
```

这是运行脚本：

```
import java.awt.FlowLayout;
import java.awt.Image;
import javax.swing.ImageIcon;
import javax.swing.JFrame;

public class a{
    public static void main(String[] args){
        aa b = new aa();

        b.setLayout(new FlowLayout());
        b.setTitle("BattleWords");
        b.setSize(420, 150);
        b.setVisible(true);
        b.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

}

到目前为止，我已经尝试了整个`setIconImage()`废话，但没有奏效。我想添加 png 或 gif 或 ico 图像。我应该把它放在哪里？代码在哪里，它看起来如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:24:19.600

您实际上使用`JFrame.setIconImage()`. 这是一个代码示例，它可能出现在您的构造函数中，`JFrame`甚至更好地出现在`initComponents`方法中：

```
try {
    Image image = ImageIO.read(aa.class.getResource("/TestImage.png"));
    setIconImage(image);
} (IOException e) {
   // handle exception
} 
```

该图像`TestImage.png`将位于您的类文件所在的根文件夹中。这

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T16:09:19.553

尝试在源之外创建一个文件夹，然后将图标图像放在那里。然后，使用此代码加载您的图标。

```
b.setIconImage(ImageIO.read(new File("res/icon.png"))); 
```

我使用它，它每次都有效。

# cocoa - 哪条数据唯一标识了一个 NSManagedObject？

> ID：13020703
> 
> 赞同：0
> 
> 时间：2012-10-22T22:13:33.740
> 
> 标签：cocoa, core-data, nsmanagedobject

我已经打印出我的一个`NSManagedObject`. 我猜`p457`字符串的部分唯一标识它。我对吗？

```
(Variable *) $1 = 0x0a22b870 <Variable: 0xa22b870> (entity: Variable; id: 0xa22b860 <x-coredata://5CC4CBDE-EB20-483E-AAF2-28BCDB584B4C/Variable/p457> ; data: {
    calcArgPrefix = nil;
    calcArgValue = nil; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:15:41.233

如果您想跟踪它以进行调试，那么是的，它`x-coredata://5CC4CBDE-EB20-483E-AAF2-28BCDB584B4C/Variable/p457`是最后一个斜杠之后的位的表示，`NSManagedObjectID`这将使该实例在同一实体的所有其他实例中唯一。不过要小心——在对象实际保存到磁盘之前，分配的值是临时的，因此`saveContext`如果实例刚刚创建，可能会发生变化。

如果你需要做一些调试之外的事情，你应该使用它`NSManagedObjectID`本身而不是字符串或 URL 表示。

# javascript - JavaScript 堆栈执行问题

> ID：13020710
> 
> 赞同：1
> 
> 时间：2012-10-22T22:14:03.507
> 
> 标签：javascript, stack, execution

我的功能有什么问题？为什么它打印多次而不是一次？

```
$('document').ready(function(){

    //click a button dozen times it invokes submit and write message in console.log
    $('button').live('click', function(){ 
       $this = $(this);
       submit($this); //this function maybe push in stack a lot of times 
   });

});

function submit($this){
   img = $this.nextAll(".submit");

   // and when I click on image it must write one time but it writes a lot of times                                   
   img.on('click', function(){                      
      console.log($this.text() + " ----> click"); // 
   });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:19:11.423

看起来问题在于每次调用函数时将 click 事件绑定到 img ，但您永远不会删除它。

```
 // and when I click on image it must write one time but it writes a lot of times                                   
  img.on('click', function(){                      
     console.log($this.text() + " ----> click"); // 
  }); 
```

我会在函数之外添加点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:32:33.140

你不应该使用`live`，它已被弃用，你可以这样写

```
$(document).ready(function(){
    $(document).on('click', 'button', function(){ 
       img = $(this).nextAll(".submit");
       img.off('click').on('click', function(){                      
           console.log($(this).text() + " ----> click"); // 
       });
    });
}); 
```

[**使用 span 的示例**](http://jsfiddle.net/f2BUd/4/)。

使用`off`取消注册之前添加的`click`事件，这样它只会触发一次。

## 更新：

以下可以替换`live`。您可以使用父包装器代替`document`，[阅读更多](http://api.jquery.com/on/)。

```
$(document).on('click', 'button', function(){ ... }); 
```

# javascript - Xcode中的UIAutomation的accessibilityLabel和Title相同吗？

> ID：13020712
> 
> 赞同：2
> 
> 时间：2012-10-22T22:14:06.190
> 
> 标签：javascript, ios, ui-automation, ios-ui-automation

我在 UIAutomation 上观看了 Apple 的视频，并看到了一些关于它的在线教程。大多数人说要么在代码中设置可访问性标签，例如：

```
self.helpButton.accessibilityLabel = @"helpButton";
self.helpButton.isAccessibilityElement = YES; 
```

或者使用IB。当我尝试上面的代码时，我的脚本发现按钮很好，我可以通过我的脚本点击它。但是，如果在我的故事板中，我单击启用辅助功能复选框，然后我制作标签：helpButton，我的代码找不到此按钮。当我记录 elementTree 时，我得到了这个：

```
UIAWindow ->
  UIAButton: name: Help rect: {...} 
```

我的按钮的标题是帮助，但可访问性标签设置为 helpButton。我不明白为什么 logElementTree() 的按钮名称为 Help（IB 中的标题），而不是 helpButton（accessibilityLabel）。有什么想法吗？谢谢！

# javascript - Rails：在表单内动态显示值

> ID：13020715
> 
> 赞同：0
> 
> 时间：2012-10-22T22:14:34.363
> 
> 标签：javascript, ruby-on-rails

仍在努力解决这个难题。我有一个更完整的例子here。该模型称为 PanOrder。

这是我在 /assets/javascripts/pan_orders.js 中的内容：

```
function pans_total_cost ()
{
    var p;
    var individual_price;
    var n;
    var pans;
    p = document.getElementById("price_per_pan");
    individual_price = p.value;
    n = document.getElementById("number_of_pans");
    pans = n.value;
    if (pans > 0)
    {
        document.getElementById.html("pans_total").value = n * p;
    }
} 
```

...这就是我的 /views/pan_orders/_form.html.erb 中的内容

```
<%= form_for(@pan_order) do |f| %>
  <% if @pan_order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@pan_order.errors.count, "error") %> prohibited this pan_order from being saved:</h2>

      <ul>
      <% @pan_order.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.hidden_field :price_per_pan, :value => 300 %>
    <%= f.hidden_field :extra_shipping, :value => 25 %>
  <div class="field">
    <%= select_tag :number_of_pans, options_for_select(pans_array)%>
  </div>
  <h3>Subtotal: <span id="pans_total"></span></h3>
  <div class="field">
    <%= check_box_tag :expedited_shipping, :checked => false, :onclick => "pans_total_cost()"  %>
    </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

...这就是我的 /helpers/pan_orders_helper.rb 中的内容

```
module PanOrdersHelper
    def pans_array
      numbers = []
      zero = ["0", 0]
      one = ["1", 1]
      two = ["2", 2]
      three = ["3", 3]
      four = ["4", 4]
      five = ["5", 5]
      numbers << zero << one << two << three << four << five
    end
  end 
```

但是，当显示表单时，我从下拉列表中选择了 1 个或多个平底锅，然后单击复选框，“小计”后没有任何内容出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:50:06.417

ID 为的 DOM 元素`number_of_pans`是一个选择标记，但在 JavaScript 中，您正在使用“.value”来尝试获取选定的值，但这是行不通的。此外，您设置 HTML 的代码`<span id="pans_total">`也不起作用。您有“.html”的拼写错误，而且您也不能使用“.value”设置 DOM 元素的 HTML。

我强烈建议您使用 jQuery 或其他一些 JavaScript 框架来帮助动态地操作页面。

此外，您在将两个值相乘的实际计算中也存在拼写错误。使用了错误的变量名。

```
// include jQuery in your <head>

function pans_total_cost ()
{
    var p;
    var individual_price;
    var n;
    var pans;
    p = $("#pan_order_price_per_pan");    // jQuery selector (updated)
    individual_price = p.val(); // this is the jQuery way to get an input's value
    n = $("#number_of_pans");
    pans = n.val(); // this works with select tags too
    if (pans > 0)
    {
        $("#pans_total").html(individual_price * pans); // jQuery way to set the HTML of an element
    }
} 
```

没有 jQuery 的解决方案：

```
function pans_total_cost ()
{
    var p;
    var individual_price;
    var n;
    var pans;
    p = document.getElementById("pan_order_price_per_pan"); // <-- updated ID name
    individual_price = p.value;
    n = document.getElementById("number_of_pans");
    pans = n.options[ n.options.selectedIndex ].value; // <-- updated line
    if (pans > 0)
    {
        document.getElementById("pans_total").innerHTML = individual_price * pans;  // <-- updated line, including variable names!
    }
} 
```

此外，您的[check_box_tag](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/check_box_tag)表单助手调用存在错误。您缺少两个必填字段，因此您的选项未按预期使用。如果您查看生成的 HTML 输出，您没有 onchange="pans_total_cost()" 属性，而是有这个：

假，:onchange=>"pans_total_cost()"}" name="expedited_shipping">

通过设置值以及是否选中它来修复它：

```
<%= check_box_tag "expedited_shipping", "yes", false, { :onchange => "pans_total_cost()" } %> 
```

# silverlight - 如果我在设置器中使用不同的值更改绑定数据，如何刷新绑定数据

> ID：13020718
> 
> 赞同：2
> 
> 时间：2012-10-22T22:14:42.343
> 
> 标签：silverlight, mvvm, inotifypropertychanged

我需要更改 Silverlight 中文本框的格式。数据通过 MVVM 绑定。

例如，有一个 int 属性，我将 1 添加到 setter 中的值并调用 OnPropertyChanged。我想如果我在文本框中输入 1 并丢失 foucs，文本将变为 2。但实际上文本没有改变，仍然是 1。

```
<TextBox Name="txtTime" Text="{Binding PersonID, Mode=TwoWay}" />

        private int _personID;
        public int PersonID
        {
            get 
            {
                return _personID;
            } 
            set
            {
                    _personID = value + 1;
                    OnPropertyChanged("PersonID");
             } 
        } 
```

有什么问题吗？这样做的正确方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:19:26.170

当 TextBox 设置一些值时，它不会调用 get。解决这个问题的方法可能是用 Dispatcher.BeginInvoke(() => OnPropertyChanged("PersonID")) 替换 OnPropertyChanged("PersonID");它会延迟触发该事件.

```
public int PersonID
{
        get
        {
            return _personID;
        } 
        set
        {
            _personID = value + 1;
            Dispatcher.BeginInvoke(() => OnPropertyChanged("PersonID"));
        }
} 
```

希望这能回答你的问题

# linux - 从文件名创建目录并移动 bash

> ID：13020720
> 
> 赞同：8
> 
> 时间：2012-10-22T22:14:52.503
> 
> 标签：linux, bash

我有很多文件

```
BR0200.aaa.tsv
BR0200.bbb.tsv
BR0200.ccc.tsv
BR0210.aaa.tsv
BR0210.bbb.tsv
BR0210.ccc.tsv
W0210.aaa.tsv
W0210.aaa.tsv
W0210.aaa.tsv 
```

我想根据文件名的第一部分创建一系列目录，直到第一个“。”

```
BR0200
BR210
W0210 
```

然后将相关文件移动到正确的目录（即所有BR0200.*文件到BR0200目录）。

我对 bash 脚本进行了尝试，但我不断收到错误消息。任何建议将不胜感激。

```
#!/bin/bash

for file in BR* W0*; do
dir = "${file%%.*}"
if [-e $dir];then
mv "$file" "$dir"
else
mkdir -p "$dir"
mv "$file" "$dir"
fi
done 
```

对不起，如果这是一个基本问题。我试过在网上搜索，但没有结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T22:18:28.227

作业中不允许有空格`=`。

```
dir="${file%%.*}" 
```

相反，测试中*需要*空格。

```
if [ -e $dir ]; then
    ^       ^ 
```

就风格改进而言，做一个不必要的 没有什么坏处`mkdir -p`，所以你可以摆脱这种`if`说法。

作业中不需要引号，因此您可以将它们从`dir=`行中删除。不过，在其他地方引用是个好主意，所以不要删除其他引用。

`.*`在 for 循环中添加额外的内容可能会很好。这样，如果您多次运行脚本，它就不会尝试移动那些新创建的子目录。一个巧妙的技巧（尽管不一定是改进）是缩短`BR*.* W0*.*`为`{BR,W0}*.*`.

```
for file in {BR,W0}*.*; do
    dir=${file%%.*}
    mkdir -p "$dir"
    mv "$file" "$dir"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-21T12:59:32.683

你可以尝试这样的事情：

```
for file in BR* WO*
do
dir=$(echo ${file} | awk -F. '{print $1}' OFS=.)
mkdir $dir
mv $file $dir
done 
```

我有类似的情况，这对我有用。

# hibernate - Spring MVC 和 Hibernate 偶尔会抛出 Null Pointer 异常

> ID：13020724
> 
> 赞同：0
> 
> 时间：2012-10-22T22:15:05.510
> 
> 标签：hibernate, spring-mvc

我偶尔会在以下代码上获得 NPE：我是休眠中的新手，这是从一些我不记得的教程中删除的：

```
@SuppressWarnings("unchecked")
    public static List<RawLine> getLastLines(){
            List<RawLine> result = null;
            Transaction tx = null;
            Session session= HibernateUtil.getSessionFactory().getCurrentSession();

            try{
                tx = session.beginTransaction();

// Line 54 is next:
            result = session.createCriteria(RawLine.class)
                             .add(Restrictions.eq("status", new Integer("0"))).list();

                tx.commit();
            } catch (HibernateException e) {
                tx.rollback();
                e.printStackTrace();
                return null;
            }

            return result;

    } 
```

这是例外。它只是偶尔发生，也许每 5 或 10 次我加载页面就会发生一次。

```
WARNING: StandardWrapperValve[mvc-dispatcher]: PWC1406: Servlet.service() for servlet mvc-dispatcher threw exception
java.lang.NullPointerException
    at pt.itgest.readings.Readings.getLastLines(Readings.java:54)
    at pt.itgest.common.controller.LastReadingsController.printWelcome(LastReadingsController.java:26)
    at sun.reflect.GeneratedMethodAccessor157.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:24:04.637

解决了。这是在另一个类上延迟加载的休眠问题。显式加载对象，`Hibernate.initialize(object)`此问题停止。

# java - 如何在 Struts 2 中提交特定的迭代器条目以执行操作

> ID：13020727
> 
> 赞同：1
> 
> 时间：2012-10-22T22:15:27.733
> 
> 标签：java, javascript, struts2, submit, loops

我正在一个市场上购买虚拟物品，我计划让它成行显示每个物品的详细信息，每个物品旁边都有一个“购买”按钮。这是我所拥有的：

```
<s:form method="post">
    <s:hidden name="shownType"/>
    <table>
        <tr>
            <td>Name</td>
            <td>Image</td>
            <td>Type</td>
            <td>Price</td>
            <td>Buy</td>
        </tr>
        <s:iterator value="items" var="item">
            <tr>
                <td><s:property value="name" /></td>
                <td><s:property value="image" /></td>
                <td><s:property value="type" /></td>
                <td align="center"><s:property value="price" /></td>
                <td><s:submit value="Buy"
                onclick="coinAlert()" action="Buy"
                type="button" theme="simple">
                </s:submit></td>
            </tr>
        </s:iterator>
    </table>
</s:form> 
```

从理论上讲，我想将特定的 Item 对象（名称、图像等）传递给 Buy 操作（特别是传递给名为 buyItem 的 Item）。问题是，我不确定如何引用单击按钮旁边的特定项目。我试过了

```
<s:hidden name="boughtItem.name" value="%{#item.name}"/> 
```

但这会将购买项目的名称设置为列表中所有项目的名称，以逗号分隔。任何使用迭代器一次设置整个购买项目对象的尝试都失败了。

对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:16:00.547

不要使用`submit`按钮，而是使用简单的按钮并使用 javascript 提交表单

```
<s:form method="post" action="Buy" name="myForm">
    <s:hidden name="name" id='name_to_submit'/>
    <s:hidden name="image" id='image_to_submit'/>
    <s:hidden name="type" id='type_to_submit'/>
    <s:hidden name="price" id='price_to_submit'/>
    <table>
        <tr>
            <td>Name</td>
            <td>Image</td>
            <td>Type</td>
            <td>Price</td>
            <td>Buy</td>
        </tr>
        <s:iterator value="items" var="item">
            <tr id="<s:property value="name" />">
                <td><s:property value="name" /></td>
                <td class='image_td'><s:property value="image" /></td>
                <td class='type_td'><s:property value="type" /></td>
                <td class='price_td' align="center"><s:property value="price" /></td>
                <td><input type="button" value="Buy"
                onclick="submitForm('<s:property value="name" />')">
                </td>
            </tr>
        </s:iterator>
    </table>
</s:form> 
```

**JavaScript**

```
function submitForm(name){
   //All this would be very easy if you were using jQuery
   var nameElem = document.getElementById(name);
   //get values for selected row
   var imageVal = nameElem.getElementsByClassName("image_td")[0].innerHTML;
   var priceVal = nameElem.getElementsByClassName("price_td")[0].innerHTML;
   var typeVal = nameElem.getElementsByClassName("type_td")[0].innerHTML;
    //set the values to submit
   document.getElementById("name_to_submit").value = name;
   document.getElementById("image_to_submit").value = imageVal;
   document.getElementById("price_to_submit").value = priceVal;
   document.getElementById("type_to_submit").value = typeVal;

   document.myForm.submit(); //finally submit the form
} 
```

最好使用一些标识符属性作为 id 而不是`name`

# java - Java 集合 消除（）

> ID：13020731
> 
> 赞同：1
> 
> 时间：2012-10-22T22:15:51.493
> 
> 标签：java, generics, collections

为什么在 中`Collection<T>`，方法 boolean`remove(Object o)`未定义为`boolean remove(T o)`？

例如，当我有一个`Collection<String> list`我确定我不想这样做`list.remove(new Date())`时。

编辑：已经解决：[为什么 Java Collections 删除方法不是通用的？](https://stackoverflow.com/questions/104799/why-arent-java-collections-remove-methods-generic)

问题2：

当我上课时：

```
class Value {
   Object getValue() {
   // return something;
   }
} 
```

然后我想实现一个新的酷列表：

```
class CoolList<T extends Value> implements Collection<T> {
    // ...

    @Override
    public boolean remove(Object o) {
        try {
           T value = (T) o; // I mean the cast here
               removeInternal(value);
        } catch (ClassCastException e) {
           return false;
        }
    }
} 
```

如何在不产生警告（未经检查的演员表）且不使用@SuspressWarning 的情况下进行干净演员表，这甚至可能吗？

编辑：在内部我希望列表能够恢复已删除的项目，因此我在内部有一个`List<T> deletedItems`. 因此 removeInternal() 方法将要删除的项目附加到内部 deletedItems 列表中，然后将其删除，因此我需要某种类型的演员表。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:25:32.717

关于你的第二个问题：只做`removeInternal`非通用的。它应该使用与您的第一个问题的答案中描述的相同的逻辑：`removeInternal(o)`删除一个`e`这样的对象`(o==null ? e==null : o.equals(e))`。（如果你实现的逻辑不等同于此，你就违反了`Collection`接口的约定。）不需要泛型`removeInternal`.

**编辑**这是一个如何实现非泛型的示例`removeInternal`：

```
private boolean removeInternal(Object o) {
    for (int i = 0; i < currentSize; ++i) {
        T elt = get(i);
        if (o == null ? elt == null : o.equals(elt)) {
            removeElementAtPosition(i);
            deletedItems.add(elt);
            return true;
        }
        return false;
    }
} 
```

这假设`removeElementAt(int)`将正确地将第`i`^(th)项转移到`deletedItems`并调整项目的内部计数。重要的是要注意，被删除的元素不一定与参数中传递的对象相同；它只是满足相等谓词的第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:27:17.890

这是不可能的，但即使是，你也不应该这样做。

如果它等于另一个项目，您应该删除该项目。故意不要求它是同一类型，因此您应该检查它是否相等然后删除 - 与它是哪种类型无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:25:18.787

您不能转换为这样的泛型类型`T`。在这种情况下，将在您的示例中使用最具体的已知类型`Value`。

你可以做的是`Class<T>`在你的集合构造函数中传递一个类型的参数，然后使用`class.cast()`. 这不会产生未经检查的强制转换警告，但与示例中的代码同样不安全。

# sql - sql查询缺少关键字

> ID：13020756
> 
> 赞同：0
> 
> 时间：2012-10-22T22:18:35.363
> 
> 标签：sql, oracle

不断收到我的 sql 查询中缺少关键字的反馈。

```
select sum(transaction_amnt) 
from cs339.comm_to_cand 
join cs339.committee_master 
join cs339.cmte_id_to_geo 
    on cs339.committee_master.cmte_id=cs339.comm_to_cand.cmte_id 
    and cs339.committee_master.cmte_id=cs339.cmte_id_to_geo.cmte_id 
where cycle=1112 
    and cmte_pty_affiliation='DEM'; 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:21:41.117

您第一次加入时错过了`ON`- 我也为此添加了一些别名：

```
select sum(transaction_amnt) Total
from cs339.comm_to_cand cc
join cs339.committee_master cm
  on cm.cmte_id=cc.cmte_id 
join cs339.cmte_id_to_geo cg
    on cm.cmte_id=cg.cmte_id 
where cycle=1112 
    and cmte_pty_affiliation='DEM'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:20:40.983

第一次加入后没有“开”条件

尝试这个：

```
select sum(transaction_amnt) 
from cs339.comm_to_cand 
join cs339.committee_master 
          on cs339.committee_master.cmte_id=cs339.comm_to_cand.cmte_id 
join cs339.cmte_id_to_geo     
    on cs339.committee_master.cmte_id=cs339.cmte_id_to_geo.cmte_id 
where cycle=1112 
    and cmte_pty_affiliation='DEM'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:24:46.537

好吧，我不知道这是否属实，但我的理解是您需要在每次加入时提供“粘合剂”，所以应该是这样的。

从 cs339.committee_master.cmte_id=cs339.comm_to_cand.cmte_id 从 cs339.committee_cand 中选择 sum(transaction_amnt) 并加入 cs339.committee_master 在 cs339.committee_master.cmte_id=cs339.committee_master.cmte_id=cs339.cmte_id_to_geo.cmte_pid 上的 cs339.cmte_id_to_geo 和 cmte_affiliation= ';

此外，WHERE 子句上的列应该有他们的表父命名，所以如果循环和 cmte_pty_affiliation 列属于 cs339.comm_to_cand 它应该是

其中 cs339.comm_to_cand.cycle=1112 和 cs339.comm_to_cand.cmte_pty_affiliation='DEM';

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T22:22:14.847

我不是 Oracle 开发人员，但第一个`JOIN`是缺少`ON`条件。

# php - 如何为我创建的每个多边形打开不同的信息？谷歌地图 API v3

> ID：13020757
> 
> 赞同：1
> 
> 时间：2012-10-22T22:18:45.787
> 
> 标签：php, google-maps-api-3, polygon, infowindow

这是我当前正在运行的代码：用户能够在他们的多边形显示在地图上后创建自己的多边形我想显示有关每个多边形的一些信息。我现在正在打开一个信息窗口，但我无法获取不同多边形的信息

有什么想法吗？

```
<?php foreach ($area->result() as $f):?>

// Create an array with the coordanates of each area

var area<?=$f->id?>Coords = [
    <?php $latlng=$this->resources_data->field_latlng($f->id);?>
    <?php foreach ($latlng->result() as $point):?>
    new google.maps.LatLng(<?=$point->lat?>, <?=$point->lng?>),
    <?php endforeach;?>
];

// Create a polygon with the points of the area

var area<?=$f->id?>=new google.maps.Polygon({
    paths: area<?=$f->id?>Coords,
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF0000',
    fillOpacity: 0.35
});
// Add the Field to the map.
area<?=$f->id?>.setMap(map);

google.maps.event.addListener(field<?=$f->id?>,'click',function(event){
      infowindow.setContent(contentString);
      if (event) {
         point = event.latLng;
      }
      infowindow.setPosition(point);
      infowindow.open(map);
});

google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
        });

<?php endforeach;?>

var contentString = '<div id="content" class="h300 rad3">'+
    '<div>'+
    '</div>'+
    '<h2 ><?=$f->name?> </h2>'+
    '<div id="bodyContent">'+
    '<div class="bgC m20l glow3cb rad3 h100 w350 inlineB vtop m15b m15r">' +
    ' '+
    ''+
    '<div class="inlineT vtop w180 m5l"> '+
    '<div class="inlineT vtop m5l"> '+
    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:20:17.693

将 infoWindow 内容与多边形相关联的一种方法是使用函数闭包，如[本例](http://www.geocodezip.com/v3_polygon_example_clickable_squares.html)中所做的那样（请参阅 createClickablePoly 函数）。如果您不需要可点击的侧边栏，您可以将该功能简化为：

```
function createClickablePoly(poly, html) {
    var contentString = html;
    google.maps.event.addListener(poly,'click', function(event) {
      infowindow.setContent(contentString);
      infowindow.setPosition(event.latLng);
      infowindow.open(map);
    }); 
} 
```

# unit-testing - Akka 中的 TestKit、TestActorRef 和 TestProbe 是什么？

> ID：13020761
> 
> 赞同：7
> 
> 时间：2012-10-22T22:19:20.487
> 
> 标签：unit-testing, akka

对akka演员来说有点新意

但希望了解 TestKit 、 TastActorRef 和 TestProbe 之间的用途和区别

在akka单元测试中使用。

我已经看到它们用于单元测试 akka 系统，但似乎不理解这个概念

尝试搜索互联网，但看起来文档很少。

欢迎任何简短的解释。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T04:41:21.897

我认为您的搜索技巧需要磨练：

[http://doc.akka.io/docs/akka/snapshot/scala/testing.html](http://doc.akka.io/docs/akka/snapshot/scala/testing.html)

[http://doc.akka.io/docs/akka/snapshot/java/testing.html](http://doc.akka.io/docs/akka/snapshot/java/testing.html)

但简而言之：

*   TestKit 可以用作测试的基类，它提供了一个可以接收回复的内部参与者以及这些回复的一系列断言方法

*   TestProbe 是一个封装好的 TestKit，您可以将其注入到消息流中

这两个是关于集成测试的，接下来是单元测试：

*   TestActorRef 允许您查看actor 内部并以JUnit 样式同步运行其代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:08:31.980

当我开始在 Java 中测试 Akka 时，我发现以下两个链接非常有用（以及 Akka 官方文档）：

*   [http://blog.florian-hopf.de/2012/03/testing-akka-actors-from-java.html](http://blog.florian-hopf.de/2012/03/testing-akka-actors-from-java.html)
*   [https://github.com/write2munish/Akka-Essentials/tree/master/AkkaUnitTest](https://github.com/write2munish/Akka-Essentials/tree/master/AkkaUnitTest)

# opencv - 使用 openCV 进行成像拼接 - 最后阶段的难度

> ID：13020762
> 
> 赞同：0
> 
> 时间：2012-10-22T22:19:22.877
> 
> 标签：opencv, homography, image-stitching

我正在使用 OpenCV 2.4 将视频转换为长（窄）马赛克。这是我第一次使用 OpenCV，但到目前为止，我已经成功地管理了以下内容：

1.  从视频中获取帧。
2.  使用 SIFT 获取关键点描述符。
3.  使用 RANSAC 对异常值进行排序
4.  求单应矩阵。

问题是当我将单应矩阵应用于其中一个帧/图像并尝试生成马赛克时。有时我收到一个错误，抱怨 warpPerspective() 的目标矩阵的大小太小。为了解决这个问题，我猜测尺寸过大以确保结果适合。但是，在将帧副本连接在一起后，我有一个大部分是黑色的巨大图像。所以我的问题是，我怎样才能以一种聪明的方式做到这一点？在将马赛克传递给 warpPerspective() 之前，如何计算我需要的目标矩阵的大小？我一直在尝试使用 ROI/Rect，但我不确定我在做什么。

如果您有任何建议，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:21:42.733

将单应矩阵应用于表示图像帧极端的点：（0,0,1）；(w,0,1) 等。这些将为您提供新图像的范围。

# .net - Thread.Sleep() 与 Monitor.Wait/Monitor.Pulse

> ID：13020764
> 
> 赞同：1
> 
> 时间：2012-10-22T22:19:24.553
> 
> 标签：.net, multithreading

我有一个可以托管一个或多个后台线程的 Windows 服务。每个后台线程启动一个轮询循环来检查工作。我一直在使用以下模式来实现循环：

```
new Thread(DoWork).Start();

private void DoWork()
{
    while(keepRunning)
    {
        Console.WriteLine(DateTime.Now);
        Thread.Sleep(1000);
    }
} 
```

我正在尝试找到一种消耗更少 CPU 的替代方案。我已经能够使用带有递归方法的计时器来实现轮询循环：

```
var timer = new Timer(WakeUp, null, Timeout.Infinite, 1000)
timer.Change(0, 1000);

private void WakeUp(object state)
{
    lock (locker)
        Monitor.Pulse(locker);
}

private void DoWork()
{
    lock (locker)
    {
        if (!keepRunning) return;
        Console.WriteLine(DateTime.Now);
        Monitor.Wait(locker);
        DoWork();
    }
} 
```

使用一种模式比另一种模式有什么优势吗？在后台线程中设置轮询循环是否有更好的模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:23:40.877

> 我正在尝试找到一种消耗更少 CPU 的替代方案。

您是否有任何证据表明它目前实际上正在消耗大量 CPU？除非您有*很多*线程在相似的时间醒来并竞争，否则我希望`Thread.Sleep`它会相当有效。

您的递归`DoWork`方法要*糟糕得多*-除非它经过尾调用优化，否则您最终会因堆栈溢出而崩溃。你为什么不至少循环？为什么不直接在计时器线程中进行实际工作呢？

如果您真的希望每个任务一个线程，每秒执行一次工作，那么您的第一个代码是可以的（尽管您需要确保“看到”任何新值，`keepRunning`如果它只是一个字段 - 考​​虑使用`Interlocked`）。但理想情况下，您根本不应该拥有这些线程 - 只需使用适当的计时器来*安排*每秒一次的工作，并让线程池处理它。

# xaml - Windows 8：禁用返回按钮到已删除项目的框架

> ID：13020765
> 
> 赞同：0
> 
> 时间：2012-10-22T22:19:25.450
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我不确定我是在问正确的问题还是以错误的方式解决这个问题，但我正在使用 GridApp 项目模板开发一个 Windows 8 应用程序。

在 itemdetail 模板中，我可以删除您正在查看的项目。删除它后，我导航回应用程序的主入口页面。

但是，后退按钮在那里，如果我单击它，它会尝试返回到已删除对象的那个框架。

我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:52:02.183

在您的删除功能中，您可以调用`GoBack()`以便在删除后页面自动导航到主页。

后退按钮也应该有以下代码

`IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}"`

哪个启用和禁用后退按钮取决于是否有要返回的页面。

如您所说`GoHome()`，这是解决此问题的最佳方法。

[Windows 8/RT 中页面导航的更多细节](http://mobile.dzone.com/articles/winrt-xaml-navigating-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T08:39:01.413

这是删除所有返回导航。

if (this.Frame != null) { while (this.Frame.CanGoBack) this.Frame.GoBack(); }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:42:02.030

最简单的方法是使用与按钮关联的内置命令机制：

xml:

视图模型：

```
public ViewModel()
{
    _goBackCommand=new DelegateCommand(GoBackMethod,CanGoBackMethod);
}
public ICommand GoBackCommand
{
    get{return _goBackCommand;}
} 

private void GoBackMethod()
{
    Frame.Navigate(blah);
}

private bool CanGoBackMethod()
{
    return _isDeleted;
}

public void Delete()
{
    _isDeleted=false;
    //this forces the command to re-evaluate whether it can execute
    _goBackCommand.RaiseCanExecuteChanged();
} 
```

即使您不使用 MVVM 并且仅使用代码隐藏，您仍然可以将命令绑定到您的按钮对象并对其执行完全相同的操作。如果您需要创建一个具有 RaiseCanExecuteChanged 功能的命令，那么您可以使用它：

```
public class DelegateCommand : ICommand
{
    private readonly Predicate<object> _canExecute;
    private readonly Action<object> _execute;

    public event EventHandler CanExecuteChanged;

    public DelegateCommand(Action<object> execute) 
                   : this(execute, null)
    {
    }

    public DelegateCommand(Action<object> execute, 
                   Predicate<object> canExecute)
    {
        _execute = execute;
        _canExecute = canExecute;
    }

    public override bool CanExecute(object parameter)
    {
        if (_canExecute == null)
        {
            return true;
        }

        return _canExecute(parameter);
    }

    public override void Execute(object parameter)
    {
        _execute(parameter);
    }

    public void RaiseCanExecuteChanged()
    {
        if( CanExecuteChanged != null )
        {
            CanExecuteChanged(this, EventArgs.Empty);
        }
    }
} 
```

如果您使用的是 Prism 或 MvvmLight，那么他们自己的命令开箱即用地实现了这一点。

# ios - 基于平铺矢量的地图 iOS

> ID：13020767
> 
> 赞同：3
> 
> 时间：2012-10-22T22:19:53.163
> 
> 标签：ios, vector, maps, vector-graphics

我正在尝试使用图块创建基于矢量的自定义地图，就像 iOS 6 地图一样。我已经看到了许多基于栅格地图的出色解决方案，但到目前为止还没有基于矢量地图的解决方案。

我在绘图代码中有整个地图，但不幸的是它太大而无法在一个文件中使用。我也有svg。最好，我想要一个不涉及以另一种格式重新创建整个地图的解决方案，而且，如果该解决方案在 iPhone 上很容易，我更愿意，即不会在其上崩溃/执行缓慢。

有没有人有任何想法？

感谢您的热心帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:03:49.827

我认为您最好的选择是将 SVG 输出为 [vector] PDF。这应该是您可以使用用于创建 SVG 的任何软件自动实现的目标。PDF 的优势在于它是 iOS 原生可以理解的矢量格式，并且可以在少量调用中呈现。

然后您可能想要做的是创建一个可以呈现 PDF 的 UIView 子类。您需要深入了解[相关的 Core Graphics C 内容](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGPDFDocument/Reference/reference.html)，但这并不难实现。随机从互联网上拉出一个教程给了我[这个](http://www.cocoanetics.com/2010/06/rendering-pdf-is-easier-than-you-thought/)。

如果你给那个 UIView 一个然后为你的整个地图设置它`layerClass`的`CATiledLayer`大小并将它放在一个滚动视图中，你应该得到与地图、Safari 等完全相同的平铺行为。你不必实现任何特殊的东西——如果你捕获您的视图`drawRect:`，您应该看到它仅被小部分调用。

不要担心任何关于`CATiledLayer`开始引发线程问题的旧教程 - 根据[QA1637](http://developer.apple.com/library/ios/#qa/qa1637/_index.html)，您只允许以正常的 UIKit 方式实现 drawRect: 并且线程从 iOS 4 开始就可以工作。假设您打算支持 iPhone 5 屏幕无论如何，你不能提交早于 4.3 的决议，即使你不是那么我真的不建议你花费精力。

# c# - 在 EF 4 中，列的子集是否可以由 .NET 中的类表示

> ID：13020769
> 
> 赞同：0
> 
> 时间：2012-10-22T22:20:08.867
> 
> 标签：c#, .net, entity-framework, entity-framework-4.1

假设我在 SQL Server (2008) 中设置了以下表格

![](../Images/32d8ee84c227c907d4c90308b3593080.png)

有没有办法生成 EDMX，以便在我的项目中高度、重量和年龄是一个名为的公共非实体类的属性，`Characteristics`并且在代码中，我可以将它们处理为

```
ABoy.Characteristics.Height
ABoy.Characteristics.Weight
ABoy.Characteristics.Age

AGirl.Characteristics.Height
AGirl.Characteristics.Weight
AGirl.Characteristics.Age 
```

我想这样做，因为在我的实际情况下，我的 Characteristic 类还有其他方法。我不想要一个公用表，因为特性不一定需要由 EF 跟踪，除非它们被添加到 BOY 或 GIRL 类。

**编辑：**写下来让我意识到我可以只拥有一个为 BOY 和 GIRL 公开的 Characteristic 类型的部分类，它只会返回一个 Characteristic 类型的对象。我还会有一个跟踪器来始终为每个 BOY 或 GIRL 实例返回相同的对象，并在有修改时对其进行更新。我将把它留给其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:25:05.773

您可以使用数据库视图来完成此操作。实体框架将允许您将视图作为实体导入。请记住，视图不支持 CRUD 操作。

此外，您将需要包含一个主键或某种 EF 唯一标识行的方式。否则，您将获得许多具有相同数据的行。

在代码中，您可以使用 AddCharacteristic(Boy boy, Characteristic characteristic) 方法在 Boy（或 Girl）类上设置这些属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:40:18.480

您还可以在允许标准 EF CRUD 操作的同时通过使用[Table-per-type 继承](http://www.robbagby.com/entity-framework/entity-framework-modeling-table-per-type-inheritance/)来完成，其中您的基本类型可能如下所示：

```
Person
{
  public <guid/int> ID { get; set; }
  public <type> Height { get; set; }
  public <type> Weight { get; set; }
  public <type> Age { get; set; }
} 
```

具有继承表类型：

```
Boy
{
  public <guid/int> ID { get; set; }
}

Girl
{
  public <guid/int> ID { get; set; }
} 
```

（共 3 张桌子）

让您在 EF 中非常有效地进行标准操作。我还强烈建议阅读每表继承类型的性能，尽管像这样的简单表结构不应该妨碍你。

# regex - preg_match_all 适用于片段，但不适用于整个网页

> ID：13020773
> 
> 赞同：1
> 
> 时间：2012-10-22T22:20:22.437
> 
> 标签：regex, preg-match-all

我有一个适用于一小部分代码的正则表达式，但是在整个页面上运行它时，它只返回第一个匹配项。为什么？

我的问题与[preg_match 反向引用以查找结束标签](https://stackoverflow.com/questions/13016458/preg-match-backreference-to-find-ending-tag)有关。但现在我有一个不同的问题。

**来自以下代码的正则表达式**

```
/\{(.*?)_start\}.*\{\1_stop\}/s 
```

**Preg_match_all**

```
$loopPattern = "/\\$this->tokenStartDelimiter(.*?)_start\\$this->tokenStopDelimiter.*\\$this->tokenStartDelimiter\\1_stop\\$this->tokenStopDelimiter/s";
preg_match_all($loopPattern, $this->template, $matches);
foreach ($matches[0] as $match) {
    $this->template = str_replace($match, '', $this->template);
} 
```

**整页**

```
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">

    <title>Appointment-Plus</title>

    <!--<link rel="stylesheet" href="css/themes/default/jquery.mobile.theme-1.2.0.min.css"> -->
    <link rel="stylesheet" href="css/themes/apcv/APCV-Theme.min.css">
    <link rel="stylesheet" href="css/themes/default/jquery.mobile.structure-1.2.0.min.css">

    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="js/jquery.validate.min.js"></script>
    <script type="text/javascript" src="js/pages/all.js"></script>
    <link rel="stylesheet" href="css/mfe.css">
</head>

<body>
<div data-role="page" data-theme="d">
    <!-- Some icons by Yusuke Kamiyamane. -->
    <div data-id="head" data-role="header" data-position="fixed" data-theme="b" data-tap-toggle="false">
        <h1>DB Games</h1>
        <a href="#" id="headingsActionButton" class="ui-btn-right headingsActionButton hidden" data-role="button" data-inline="true" data-icon="check">Save</a>

    </div>

    <div id="mainContent" data-role="content">
    <!--    <div data-role="fieldcontain">
            <div style="width: 100%; height: 100px; position: relative; background-color: #fbfbfb; border: 1px solid #b8b8b8;">
                <img src="https://codiqa.com/static/images/v2/image.png" alt="image" style="position: absolute; top: 50%; left: 50%; margin-left: -16px; margin-top: -18px;">
            </div>
        </div> -->
        <div data-role="fieldcontain">
    <div data-role="collapsible-set" class="mfe_collapsibles" data-theme="c" data-inset="false">

        <div id="appointmentHeading" data-action-id="appointmentNext" data-action-text="Next" data-a data-role="collapsible" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-iconpos="right">
            <h3 class="collapsibleMainHeading">New Appointment</h3>
            <p>
                <script src="js/pages/newAppointment.js"></script>
<div data-role="collapsible-set" data-content-theme="c" class="appointmentMakeCollapsibleSet">
    <div data-role="collapsible" data-collapsed="false" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d">
        <h3>Appointment</h3>
        <p>
            <form id="appointmentPrimaryForm">

    <label for="c_id" class="select required" required>Location: </label>
    <select name="c_id" id="c_id" data-native-menu="true" class="select required" required>
        <option value="" data-placeholder="true">Choose One</option>

        <option value="261"
        selected>Mesa</option>
        <option value="1007"
        >Chandler</option>
    </select>

    {AppointmentStaffSelect_start}
    <label for="apptCreateEditStaff" class="select required" required>With: </label>
    <select name="apptCreateEditStaff" id="apptCreateEditStaff" data-native-menu="true" class="select required" required>
        <option value="" data-service="" data-placeholder="true">Choose One</option>

        <option data-service="{Services}" value="5490"
        >Brian</option>
        <option data-service="{Services}" value="4388"
        >Mckenna</option>
        <option data-service="{Services}" value="4387"
        >Katelyn</option>
        <option data-service="{Services}" value="783"
        >David</option>
        <option data-service="{Services}" value="4389"
        >Ryan</option>
        <option data-service="{Services}" value="4394"
        >Ryan - c</option>
        <option data-service="{Services}" value="784"
        >Tami</option>
        <option data-service="{Services}" value="4390"
        >Jake</option>
    </select>
    {AppointmentStaffSelect_stop}
    <p>{Test}</p>
{AppointmentTest_start}
<p></p>
{AppointmentTest_stop}

    <label for="service_id" class="select required">Service: </label>
    <select name="service_id" id="service_id" data-native-menu="true" class="select required" required>
        <option value="" data-placeholder="true" data-duration="0" data-cost="0.00">Choose One</option>
        <option value="1174|30 Minute Gaming Pass" class="{Classes}" data-cost="3.00" data-duration="30">30 Minute Gaming Pass</option>
        <option value="1176|1 Hour Gaming Pass" class="{Classes}" data-cost="5.00" data-duration="60">1 Hour Gaming Pass</option>
        <option value="1177|2 Hour Gaming Pass" class="{Classes}" data-cost="7.00" data-duration="120">2 Hour Gaming Pass</option>
    </select>

    {AppointmentAddonService_start}
    <fieldset data-role="controlgroup" id="apptCreateEditAddonServicesFieldset">
        <legend>Add-on Service(s):</legend>

        <input type="checkbox" name="aos-5059" id="aos-5059" data-duration="30" data-cost="10.00" class="custom {Classes}"   />
        <label for="aos-5059" class="{Classes}">Unlimited Snack Bar</label>

        <input type="checkbox" name="aos-5060" id="aos-5060" data-duration="30" data-cost="5.00" class="custom {Classes}"   />
        <label for="aos-5060" class="{Classes}">Unlimited Energy Drinks</label>

        <input type="checkbox" name="aos-5061" id="aos-5061" data-duration="30" data-cost="1.00" class="custom {Classes}"   />
        <label for="aos-5061" class="{Classes}">Candy Bar</label>

    </fieldset>
    {AppointmentAddonService_stop}

    <label for="apptCreateEditDate" class="select required" required>Date: </label>
    <select name="apptCreateEditDate" id="apptCreateEditDate" data-native-menu="true" class="select required" required>
        <option value="" data-placeholder="true">Choose One</option>
        {apptCreateEditDateOption_start}
        <option value="{Value}"
        {Selected}>{Name}</option>{apptCreateEditDateOption_stop}
    </select>

    <label for="apptCreateEditTime" class="select required" required>Time: </label>
    <select name="apptCreateEditTime" id="apptCreateEditTime" data-native-menu="true" class="select required" required>
        <option value="" data-placeholder="true">Choose One</option>
        {apptCreateEditTimeOption_start}
        <option value="{Value}"
        {Selected}>{Name}</option>{apptCreateEditTimeOption_stop}
    </select>
</form>
        </p>
    </div>
    <div data-role="collapsible" data-collapsed="true" class="ui-disabled" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d">
        <h3>Children</h3>
        <p>
            Page 2
        </p>
    </div>
    <div data-role="collapsible" data-collapsed="true" class="ui-disabled" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d">
        <h3>Appointment Details</h3>
        <p>

<label for="customer_notes">Special Instructions for Customer: </label>
<textarea cols="40" rows="8" name="customer_notes" id="customer_notes"></textarea>

{apptCreateEditPONumber_start}
<label for="apptCreateEditPONumber" class="{Class}">{LName}: </label>
<input type="text" id="apptCreateEditPONumber" name="apptCreateEditPONumber" class="{Class}" value=""/>
{apptCreateEditPONumber_stop}

{apptCreateEditVehicleMake_start}
<label for="apptCreateEditMakeId" class="select {Class}">{LName}: </label>
<select name="apptCreateEditMakeId" id="apptCreateEditMakeId" data-native-menu="true" class="select {Class}">
    <option value="" data-placeholder="true">Choose One</option>
    {apptCreateEditMakeOption_start}
    <option value="{Value}"
    {Selected}>{Name}</option>{apptCreateEditMakeOption_stop}
</select>
{apptCreateEditVehicleMake_stop}

{apptCreateEditVehicleModel_start}
<label for="apptCreateEditModelId" class="select {Class}">{LName}: </label>
<select name="apptCreateEditModelId" id="apptCreateEditModelId" data-native-menu="true" class="select {Class}">
    <option value="" data-placeholder="true">Choose One</option>
    {apptCreateEditModelOption_start}
    <option value="{Value}" class="{Make}"
    {Selected}>{Name}</option>{apptCreateEditModelOption_stop}
</select>
{apptCreateEditVehicleModel_stop}

{apptCreateEditVehicleYear_start}
<label for="apptCreateEditModelYear" class="{Class}">{LName}: </label>
<select name="apptCreateEditModelYear" id="apptCreateEditModelYear" data-native-menu="true" class="select {Class}">
    <option value="" data-placeholder="true">Choose One</option>
    {apptCreateEditYearOption_start}
    <option value="{Value}"
    {Selected}>{Name}</option>{apptCreateEditYearOption_stop}
</select>
{apptCreateEditVehicleYear_stop}

{apptCreateEditVehicleOther_start}
<label for="apptCreateEditOtherVehicle" class="{Class}">{LName}: </label>
<input type="text" id="apptCreateEditOtherVehicle" name="apptCreateEditOtherVehicle" class="{Class}" value="{ApptCreateEditVehicleOther}"/>
{apptCreateEditVehicleOther_stop}

{apptCreateEditVehicleVIN_start}
<label for="apptCreateEditVIN" class="{Class}">{LName}: </label>
<input type="text" id="apptCreateEditVIN" name="apptCreateEditVIN" class="{Class}" value="{ApptCreateEditVehicleVIN}"/>
{apptCreateEditVehicleVIN_stop}

{apptCreateEditVehicleOdometer_start}
<label for="apptCreateEditOdometer" class="{Class}">{LName}: </label>
<input type="number" id="apptCreateEditOdometer" name="apptCreateEditOdometer" class="{Class}" value="{ApptCreateEditVehicleOdometer}"/>
{apptCreateEditVehicleOdometer_stop}
        </p>
    </div>

    <div data-role="collapsible" class="postRegistrationCollapsible ui-disabled" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d">
        <h3>Register / Login</h3>
        <p>
            <script src="js/pages/postRegistration.js"></script>
<div data-role="fieldcontain" class="hidden">
    <p id="postRegistrationMessage"></p>
</div>
<a href="#registerPopupDiv" class="postRegistrationButtons" data-role="button" data-rel="popup" data-inline="true">Register</a>
<a href="#loginPopupDiv" class="postRegistrationButtons" data-role="button" data-rel="popup" data-inline="true">Login</a>
<div id="registerPopupDiv" data-role="popup" data-overlay-theme="a" class="ui-content" data-corners="true" data-shadow="true" data-position-to="window" data-transition="flow" data-theme="c">
    <form id="registerFormPopup" data-ajax="false">
    <div data-role="fieldcontain" data-inset="false">

<label for="first_name" class="required">First Name1:</label>
<input type="text" id="first_name" name="first_name" value="{Value}" class="required" required/>

<label for="middle_name" class="{Class}">Middle Name:</label>
<input type="text" id="middle_name" name="middle_name" value="{Value}" class="{Class}" {Required}/>

<label for="last_name" class="required">Last Name1:</label>
<input type="text" id="last_name" name="last_name" value="{Value}" class="required" required/>

<label for="email" class="{Class}">eMail:</label>
<input type="email" id="email" name="email" value="{Value}" class="{Class}" {Required}/>

<label for="login" class="{Class}">Login:</label>
<input type="text" id="login" name="login" value="{Value}" class="{Class}" {Required}/>

<label for="password" class="{Class}">Password:</label>
<input type="password" id="password" name="password" value="{Value}" class="{Class}" {Required}/>

<label for="customer_id_unique">Customer ID:</label>
<input type="text" id="customer_id_unique" name="customer_id_unique" value="{Value}" class="readonly" readonly/>

    </div>
    <div data-role="fieldcontain" data-inset="false">
        <input type="button" name="registerPopupButton" id="registerPopupButton" value="Register"/>
    </div>
</form>
</div>
<div id="loginPopupDiv" data-overlay-theme="a" data-role="popup" class="ui-content" data-corners="true" data-shadow="true" data-position-to="window" data-transition="flow" data-theme="c">
    <form id="loginFormPopup" data-ajax="false">
    <div data-role="fieldcontain" class="ui-hide-label">
        <label for="login-username">Username:</label>
        <input type="text" name="login-username" id="login-username" value="" placeholder="Username"/>

    </div>
    <div data-role="fieldcontain" class="ui-hide-label">

        <label for="login-password">Password</label>
        <input type="password" name="login-password" id="login-password" value="" placeholder="Password"/>
    </div>
    <div data-role="fieldcontain" data-inset="false">
        <input type="button" name="loginPopupButton" id="loginPopupButton" value="Login"/>
    </div>
    <div data-role="fieldcontain" data-inset="false">
        <a href="#" id="forgotPopupPassword" data-rel="popup">Forgot Password?</a>
    </div>
</form>
</div>
        </p>
    </div>

    <div data-role="collapsible" data-collapsed="true" class="ui-disabled" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d">
        <h3>Verification</h3>
        <p>
            Page 5
        </p>
    </div>
</div>
            </p>
        </div>

        {RegisterSection_start}
        <div id="registerHeading" class="preRegistration" data-action-id="register" data-action-text="Register" data-role="collapsible" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-iconpos="right">
            <h3 class="collapsibleMainHeading">Register</h3>
            <p>
                <script src="js/pages/register.js"></script>
<form id="registerForm" data-ajax="false">
    <div data-role="fieldcontain" data-inset="false">

<label for="first_name" class="required">First Name1:</label>
<input type="text" id="first_name" name="first_name" value="{Value}" class="required" required/>

<label for="middle_name" class="{Class}">Middle Name:</label>
<input type="text" id="middle_name" name="middle_name" value="{Value}" class="{Class}" {Required}/>

<label for="last_name" class="required">Last Name1:</label>
<input type="text" id="last_name" name="last_name" value="{Value}" class="required" required/>

<label for="email" class="{Class}">eMail:</label>
<input type="email" id="email" name="email" value="{Value}" class="{Class}" {Required}/>

<label for="login" class="{Class}">Login:</label>
<input type="text" id="login" name="login" value="{Value}" class="{Class}" {Required}/>

<label for="password" class="{Class}">Password:</label>
<input type="password" id="password" name="password" value="{Value}" class="{Class}" {Required}/>

<label for="customer_id_unique">Customer ID:</label>
<input type="text" id="customer_id_unique" name="customer_id_unique" value="{Value}" class="readonly" readonly/>

    </div>
    <div data-role="fieldcontain" data-inset="false">
        <input type="button" name="register" id="register" value="Register"/>
    </div>
</form>
            </p>
        </div>
        {RegisterSection_stop}
        <div data-role="collapsible" class="preRegistration" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-iconpos="right">
            <h3 class="collapsibleMainHeading">Login</h3>
            <p>
                <script src="js/pages/login.js"></script>
<form id="loginForm" data-ajax="false">
    <div data-role="fieldcontain" class="ui-hide-label">
        <label for="login-username">Username:</label>
        <input type="text" name="login-username" id="login-username" value="" placeholder="Username"/>

    </div>
    <div data-role="fieldcontain" class="ui-hide-label">

        <label for="login-password">Password</label>
        <input type="password" name="login-password" id="login-password" value="" placeholder="Password"/>
    </div>
    <div data-role="fieldcontain" data-inset="false">
        <input type="submit" name="loginSubmit" id="loginSubmit" value="Login"/>
    </div>
    <div data-role="fieldcontain" data-inset="false">
        <a href="#passwordResetDiv" data-rel="popup">Forgot Password?</a>
    </div>
</form>
<script src="js/pages/passwordReset.js"></script>

<div id="passwordResetDiv" data-overlay-theme="a" data-role="popup" class="ui-content" data-corners="true" data-shadow="true" data-position-to="window" data-transition="flow" data-theme="c">
    <form id="passwordResetForm">
        <div data-role="fieldcontain" class="ui-hide-label">
            <label for="email">Email:</label>
            <input type="text" name="email" id="email" value="" placeholder="Email" class="required" required/>
        </div>
        <div data-role="fieldcontain" data-inset="false">
            <input type="submit" name="submit" id="submit" value="Reset Password"/>
        </div>
    </form>
</div>

            </p>
        </div>

    </div>
</div>
    </div>

</div>
</body>
</html> 
```

**整个页面的结果**

```
Array
(
    [0] => Array
        (
            [0] => {AppointmentStaffSelect_start}
    <label for="apptCreateEditStaff" class="select required" required>With: </label>
    <select name="apptCreateEditStaff" id="apptCreateEditStaff" data-native-menu="true" class="select required" required>
        <option value="" data-service="" data-placeholder="true">Choose One</option>

        <option data-service="{Services}" value="5490"
        >Brian</option>
        <option data-service="{Services}" value="4388"
        >Mckenna</option>
        <option data-service="{Services}" value="4387"
        >Katelyn</option>
        <option data-service="{Services}" value="783"
        >David</option>
        <option data-service="{Services}" value="4389"
        >Ryan</option>
        <option data-service="{Services}" value="4394"
        >Ryan - c</option>
        <option data-service="{Services}" value="784"
        >Tami</option>
        <option data-service="{Services}" value="4390"
        >Jake</option>
    </select>
    {AppointmentStaffSelect_stop}
        )

    [1] => Array
        (
            [0] => AppointmentStaffSelect
        )

) 
```

**加工精细的小部分**

```
{AppointmentStaffSelect_start}
    <label for="apptCreateEditStaff" class="select required" required>With: </label>
    <select name="apptCreateEditStaff" id="apptCreateEditStaff" data-native-menu="true" class="select required" required>
        <option value="" data-service="" data-placeholder="true">Choose One</option>

        <option data-service="{Services}" value="5490"
        >Brian</option>
        <option data-service="{Services}" value="4388"
        >Mckenna</option>
        <option data-service="{Services}" value="4387"
        >Katelyn</option>
        <option data-service="{Services}" value="783"
        >David</option>
        <option data-service="{Services}" value="4389"
        >Ryan</option>
        <option data-service="{Services}" value="4394"
        >Ryan - c</option>
        <option data-service="{Services}" value="784"
        >Tami</option>
        <option data-service="{Services}" value="4390"
        >Jake</option>
    </select>
    {AppointmentStaffSelect_stop}
    <p>{Test}</p>
{AppointmentTest_start}
<p></p>
{AppointmentTest_stop}

    <label for="service_id" class="select required">Service: </label>
    <select name="service_id" id="service_id" data-native-menu="true" class="select required" required>
        <option value="" data-placeholder="true" data-duration="0" data-cost="0.00">Choose One</option>
        <option value="1174|30 Minute Gaming Pass" class="{Classes}" data-cost="3.00" data-duration="30">30 Minute Gaming Pass</option>
        <option value="1176|1 Hour Gaming Pass" class="{Classes}" data-cost="5.00" data-duration="60">1 Hour Gaming Pass</option>
        <option value="1177|2 Hour Gaming Pass" class="{Classes}" data-cost="7.00" data-duration="120">2 Hour Gaming Pass</option>
    </select>

    {AppointmentAddonService_start}
    <fieldset data-role="controlgroup" id="apptCreateEditAddonServicesFieldset">
        <legend>Add-on Service(s):</legend>

        <input type="checkbox" name="aos-5059" id="aos-5059" data-duration="30" data-cost="10.00" class="custom {Classes}"   />
        <label for="aos-5059" class="{Classes}">Unlimited Snack Bar</label>

        <input type="checkbox" name="aos-5060" id="aos-5060" data-duration="30" data-cost="5.00" class="custom {Classes}"   />
        <label for="aos-5060" class="{Classes}">Unlimited Energy Drinks</label>

        <input type="checkbox" name="aos-5061" id="aos-5061" data-duration="30" data-cost="1.00" class="custom {Classes}"   />
        <label for="aos-5061" class="{Classes}">Candy Bar</label>

    </fieldset>
    {AppointmentAddonService_stop} 
```

**小部分页面的结果**

```
Array
(
    [0] => Array
        (
            [0] => {AppointmentStaffSelect_start}
    <label for="apptCreateEditStaff" class="select required" required>With: </label>
    <select name="apptCreateEditStaff" id="apptCreateEditStaff" data-native-menu="true" class="select required" required>
        <option value="" data-service="" data-placeholder="true">Choose One</option>

        <option data-service="{Services}" value="5490"
        >Brian</option>
        <option data-service="{Services}" value="4388"
        >Mckenna</option>
        <option data-service="{Services}" value="4387"
        >Katelyn</option>
        <option data-service="{Services}" value="783"
        >David</option>
        <option data-service="{Services}" value="4389"
        >Ryan</option>
        <option data-service="{Services}" value="4394"
        >Ryan - c</option>
        <option data-service="{Services}" value="784"
        >Tami</option>
        <option data-service="{Services}" value="4390"
        >Jake</option>
    </select>
    {AppointmentStaffSelect_stop}
            [1] => {AppointmentTest_start}
<p></p>
{AppointmentTest_stop}
            [2] => {AppointmentAddonService_start}
    <fieldset data-role="controlgroup" id="apptCreateEditAddonServicesFieldset">
        <legend>Add-on Service(s):</legend>

        <input type="checkbox" name="aos-5059" id="aos-5059" data-duration="30" data-cost="10.00" class="custom {Classes}"   />
        <label for="aos-5059" class="{Classes}">Unlimited Snack Bar</label>

        <input type="checkbox" name="aos-5060" id="aos-5060" data-duration="30" data-cost="5.00" class="custom {Classes}"   />
        <label for="aos-5060" class="{Classes}">Unlimited Energy Drinks</label>

        <input type="checkbox" name="aos-5061" id="aos-5061" data-duration="30" data-cost="1.00" class="custom {Classes}"   />
        <label for="aos-5061" class="{Classes}">Candy Bar</label>

    </fieldset>
    {AppointmentAddonService_stop}
        )

    [1] => Array
        (
            [0] => AppointmentStaffSelect
            [1] => AppointmentTest
            [2] => AppointmentAddonService
        )

) 
```

如何让它解析整个页面并返回所有匹配项？小部分解析得很好，但是当我尝试搜索整个页面时，它似乎只在第一个`{Test}`标记之前返回结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:19:44.450

您应该更改的第一件事是使第二次重复也变得不贪心：

```
/\{(.*?)_start\}.*?\{\1_stop\}/s 
```

现在这不是什么大问题，因为你永远不会有两次相同的标签。但是如果你有，你会从第一个开始匹配到最后一个结束标记。这也应该（在大多数情况下）略微提高性能。

现在我只能假设你为什么只得到第一个匹配的原因是，正则表达式引擎在你的两次重复中都需要太长时间的回溯。

在`{Test}`这种情况下，大致会发生什么情况：回溯的每一步`(.*?)`都会多消耗一个字符。所以首先`T`，然后`Te`，然后`Tes`，然后`Test`，然后`Test}`等等。如果这些匹配中的任何一个后跟下划线，它将在重复后继续。现在您已经可以看到，它`.`匹配任何字符（包括换行符，因为有`s`修饰符）。所以这个东西会为你其余字符串中的每个字符尝试一次（虽然，你知道你只想看直到下一个 close `}`。但它变得更糟。一旦`(.*?)`hast 消耗了从`Test}...`until的所有内容`{AppointmentTest`，它实际上是能够匹配`_start}`. 现在它会假设它已经找到了一个匹配，标签名称是`Test}</p>\n{AppointmentTest`并且将在你的文件的其余部分（一次一个字符）中进行相同的回溯，永远不会找到结束标签。这是特别昂贵的，因为引擎每次遇到`{`. 完成后，它会继续回溯第一个，重复，直到它认为找到了另一个标签，以 开头`Test}...`和结尾`...{AppointmentAddonService`。这发生在您的代码中的所有其他开始标签上。我可以想象这很容易导致正则表达式引擎中止搜索。您可以检查[`preg_last_error`](http://www.php.net/manual/en/function.preg-last-error.php)是否确实如此。

现在如何避免这种情况。让引擎提前停止回溯。也就是说，减少重复的可能性。例如，您知道您的标签永远不会包含一个`}`因为，这就是它们的结尾。因此，如果您简单地说，标签名称可以包含任何字符，除了`}`引擎将最多持续到标签末尾（而不是贯穿整个文件），同时永远无法匹配标签从一个开头`{`到一个无关的`_start}`。您可以使用否定字符类来执行此操作。这也意味着您可以从第一次重复中删除 ungreedy- `?`（因为它永远不会超过开始标签的末尾）：

```
/\{([^}]*)_start\}.*?\{\1_stop\}/s 
```

第二次重复仍然会回溯整个文件，但这并不是真的可以避免的，因为毕竟你的整个文件可能被包装在你的两个标签中。但是，这种回溯最多只执行一次。并且**永远不要**像这样的标签`{Test}`不以`_start`.

另请注意，如果您在标签名称中不允许使用下划线（因此永远不会有类似的东西`{Custom_section_start}`），您还可以在否定字符类中包含下划线，但这是一个相当小的优化。

无论如何，我希望这可以解决您的问题（如果没有，请告诉我`preg_last_error`返回的内容）。

你能从中得到什么？使用前要非常小心`.*`- 特别是如果它应该匹配一些分隔的内容。您可以[在此处](http://www.regular-expressions.info/catastrophic.html)阅读或通过该网站上的教程进行阅读。它写得很好**，**告诉你正则表达式引擎的底层发生了什么。

# c# - 在 ASP.NET 中发送包含成员资格方法的激活电子邮件

> ID：13020782
> 
> 赞同：0
> 
> 时间：2012-10-22T22:21:30.667
> 
> 标签：c#, asp.net

我想在 ASP.NET 中向我的用户发送一封激活电子邮件。我应该指出，我通过创建用户向导间接创建了用户。我的意思是我使用会员方法并手动创建用户。我该怎么办？请通过一些代码告诉我。

```
Membership.CreateUser(TextBox1.Text, result.ToString(), TextBox1.Text);
Roles.AddUserToRole(TextBox1.Text, "Reviewer"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:53:03.147

您可以创建自己的 MembershipProvider。如果您使用 SQL Server 作为您的成员数据存储，您可以从 SqlMembershipProvider 继承，覆盖其 CreateUser 方法，并将您的电子邮件代码放在自定义方法中。您需要通过在 web.config 中放置类似的内容来告诉您的应用程序使用您的自定义成员资格提供程序：

```
<membership defaultProvider="MyMembershipProvider">
    <providers>
      <clear />
      <add name="MyMembershipProvider" type="MyMembershipProviderNamespace.MyMembershipProvider, MyMembershipProviderAssembly" />
    </providers>
  </membership> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T23:12:40.917

不幸的是，ASP.Net 会员在创建用户后没有开箱即用的发送激活电子邮件功能。

由于您自己创建用户，因此您可以轻松地在此之后立即调用 SendEmail 方法。

[从 ASP.Net 4 发送电子邮件 – C# 示例代码](http://bradkingsley.com/sending-email-from-asp-net-4-c-sample-code/)

```
MembershipCreateStatus status;

var membershipUser = Membership.CreateUser(..., out status);

if (status == MembershipCreateStatus.Success)
  SendEmail(...);

public void SendEmail(MailAddress from, MailAddress to, 
  string subject, string body)
{
  var message = new MailMessage();

  message.From = from;
  message.To.Add(to);

  message.Subject = subject;
  message.Body = body;
  message.IsBodyHtml = true;

  var smtpClient = new SmtpClient("localhost");
  smtpClient.Send(message);
} 
```

# php - DragNDrop 然后用 PHP 处理文件以显示在新页面中

> ID：13020788
> 
> 赞同：0
> 
> 时间：2012-10-22T22:22:16.647
> 
> 标签：php, javascript, ajax, file-upload

我有一个表单，允许用户通过“传统”输入文件表单元素上传文件。

提交表单以`$_SERVER["PHP_SELF"]`重新加载页面，`if ($_POST['submit'])`条件触发处理文件并构建显示文件所有内容的表的函数。

现在我想添加拖放文件的可能性。不幸的是，我遇到的所有解决方案都依赖于 XMLHttpRequest 对象，它不允许我用 js 显示任何东西（我不想用 Ajax 取回要显示的数据，只是因为我需要重写一个真的长函数）。

关于如何在不彻底改变工作方式的情况下实现拖放的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:36:06.007

如果您的用户只需要上传单个文件，您可以在触发 drop 事件时手动触发表单上的 submit 事件。

```
$("#formid").submit(); 
```

这确实是我所知道的唯一方法 - 当需要处理多个文件时，它就会失败。

文件有多大？如果它们足够小，您可以在`if($_POST['submit'])`块期间在放置容器中输出上传文件的详细信息，您只需要跟踪所有以前上传的文件，以便您可以继续添加到列表中。

# javascript - JavaScript 通过名称访问 CSS 类？

> ID：13020792
> 
> 赞同：6
> 
> 时间：2012-10-22T22:22:40.790
> 
> 标签：javascript, css, properties

我必须按名称访问 CSS 类，下面的代码有效。但是，如果我尝试`hui["myclass"]`或`hui[".myclass"]`代替`hui[0]`它找不到它。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    <style>
      .myclass {
        color: #00aa00;
      }
    </style>
    <script type="text/javascript">
        function change_class() {
          var hui = document.styleSheets[0].rules || document.styleSheets[0].cssRules;
          hui[0].style["color"]="#ff0000"
        }
    </script>
  </head>
  <body>
    <div class="myclass" onclick="change_class()">Some Text</div>
  </body>
</html> 
```

**编辑：**我需要能够像我在第 1 行中描述的那样访问我不想访问页面上的单个元素，而是直接按类名访问样式表。

所以你们都说我不能只通过索引通过类名访问样式表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T22:34:47.190

不，您不能通过选择器访问它们 - 这是一个简单的列表。您首先必须为它建立一个索引：

```
// assuming those are the right rules (ie from the right stylesheet)
var hui = document.styleSheets[0].rules || document.styleSheets[0].cssRules;

var styleBySelector = {};
for (var i=0; i<hui.length; i++)
    styleBySelector[hui[i].selectorText] = hui[i].style;

// now access the StyleDeclaration directly:
styleBySelector[".myclass"].color = "#ff0000"; 
```

当然这不是万无一失的方法，可能有

*   多个选择器，例如`.myClass, .myOtherClass`
*   一个选择器的多次出现（尽管没关系，最后一个声明无论如何都会覆盖以前的样式）

而不是盲目地分配`color`属性，您首先应该检查声明是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-23T18:26:59.950

是的，Bergi 是对的：
您首先必须为样式列表建立索引。
但要小心：
如果有超过 1 个样式表，您首先必须**遍历样式表**。所以我喜欢改进 Bergis 解决方案：

```
var styleBySelector = {};
for (var j=0; j<document.styleSheets.length; j++)   {
  var styleList = document.styleSheets[j].rules || document.styleSheets[j].cssRules;
  for (var i=0; i<styleList.length; i++)
    styleBySelector[styleList[i].selectorText] = styleList[i].style;
 }

// And then invoke or set the style you wish like this:
styleBySelector[".myStyle"].color = "#ff0000"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:28:17.350

```
document.getElementsByClassName('myclass'); 
```

将返回匹配的元素数组。

您还可以使用以下内容：

```
<body>
    <div id="changethese">
        <div class="myclass" onclick="change_class()">Some Text</div>
    </div>
    <div class="myclass">div two</div>
</body> 
```

Javascript：

```
var changeTheseDivs = document.getElementById('changethese');
changeTheseDivs.getElementsByClassName('myclass') 
```

仅更改所选 div 中的类。

但是，对这种方法的支持只适用于 IE9，所以如果 JQuery 是一个选项，最好使用它。

**编辑：**

我相信我看错了，看起来您想更改实际的 CSS 规则本身，而不是更改元素上的 CSS。理论上，您可以编写一个函数，为您按名称查找规则并更改它们的属性。我想它看起来像这样（未经测试，应该可以）：

```
function findAndChangeCSSRule(ruleName, newRule, newProperty){
    var mysheet=document.styleSheets[0];
    var myrules=mysheet.cssRules? mysheet.cssRules: mysheet.rules
    for (i=0; i<myrules.length; i++){
        if(myrules[i].selectorText.toLowerCase()==ruleName){
             targetrule=myrules[i];
             break;
        }
    }
    targetrule.style[newRule.toString()]=newProperty;
} 
```

然后调用它：

```
findAndChangeCSSRule('my_class', 'color', 'red') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T22:39:49.223

要更改既定规则，这是一种方法：

```
// the [2] index is only because that's where JS Fiddle
// puts the user-entered CSS (from the CSS panel).
var sheets = document.styleSheets[2].rules,
    classString = 'body',
    props = ['color'], // requires a 1:1 relationship between two arrays...ugh
    to = ['#0f0'];

for (var i = 0, len = sheets.length; i < len; i++) {
    if (sheets[i].selectorText == classString) {
        for (var c = 0, leng = props.length; c < leng; c++) {
            sheets[i].style[props[c]] = to[c];
        }
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/WhGnD/)。

还有一个稍微改进的替代方案（一个对象而不是两个数组，需要 1:1 的关系）：

```
var sheets = document.styleSheets[2].rules,
    classString = 'body',
    propsTo = {
        'color': '#0f0'
    };

for (var i = 0, len = sheets.length; i < len; i++) {
    if (sheets[i].selectorText == classString) {
        for (var prop in propsTo) {
            if (propsTo.hasOwnProperty(prop)) {
                sheets[i].style[prop] = propsTo[prop];
            }
        }
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/WhGnD/1/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-27T15:09:22.787

要从 javascript 访问该类，您只需要创建一个分类器（如果它不存在）。

```
document.querySelector("myDiv").classList.add("className"); 
```

这会将新类添加到具有指定类名的 div 中。

别的：

```
document.querySelector(".className"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-22T22:36:37.670

`(document.styleSheets[0].cssRules || document.styleSheets[0].rules)[0].style.color = '#ff0000'` 应该管用。

[Quirksmode CSSOM（DOM CSS）兼容性表](http://www.quirksmode.org/dom/w3c_css.html)

# ruby - 用于机器学习可视化的 Ruby 图形和线性代数库？

> ID：13020793
> 
> 赞同：1
> 
> 时间：2012-10-22T22:22:41.907
> 
> 标签：ruby, graph, gem, machine-learning, linear-algebra

我的目标是用 Ruby 编写一些机器学习算法，并为可视化和线性代数寻找好的候选库，让我感觉像在 Matlab

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:10:05.677

*   线性代数：[linalg](http://linalg.rubyforge.org/)
*   对于数据可视化，请查看[http://effectif.com/ruby/manor/data-visualisation-with-ruby](http://effectif.com/ruby/manor/data-visualisation-with-ruby)

# c++ - Microsoft Visual Studio 2010 没有将构建工具放入 PATH 中以获得干净的目标？

> ID：13020802
> 
> 赞同：4
> 
> 时间：2012-10-22T22:23:20.173
> 
> 标签：c++, visual-studio-2010, makefile, nmake

我已经将 Microsoft Visual Studio 配置为使用 Makefile 配置类型，并且我已经编写了一个 makefile 来使用 Microsoft 工具构建我的项目。在项目配置的 NMake 部分下，我将构建命令行设置为 build.bat，这是一个简单地使用我的 makefile 作为命令行参数调用 nmake 的文件，如下所示：

```
nmake /nologo /f makefile.x86.winnt.msvc2010 
```

这工作得很好。

为了清理，我在我的 makefile 中编写了一个删除所有构建工件的目标。它看起来像这样：

```
#... the rest of the makefile
clean:
    @erase /f /q $(OBJS) $(OUT) $(MAPFILE) $(PDBFILE)
    @echo + clean 
```

所以我将 clean 命令行设置为一个以 clean 为参数的 nmake 调用。像这样：

```
nmake /nologo /f makefile.x86.winnt.msvc2010 clean 
```

我将此文本放入 clean.bat 并将其设置为“清洁命令行”，但它不起作用，因为调用 shell 无法找到 nmake。我在 clean 调用时检查了路径，MSVS 不包括路径中的构建工具（包括 nmake）用于清理。（请注意，从 PATH 中有 nmake 的 shell 运行上述 nmake 命令会成功）。

如何让 MSVS 在 PATH 中包含构建工具，以便可以在干净的命令行中调用 nmake？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:34:54.953

引用[Visual Studio Express 自述文件](http://go.microsoft.com/fwlink/?LinkID=151235)：

> **2\. 已知问题**
> 
> **2.4\. 产品问题**
> 
> **2.4.1。一般问题（产品）**
> 
> **2.4.1.14。清洁解决方案不适用于配置类型：Makefile (2010 RC)**
> 
> 在 nmake 解决方案上执行“清洁解决方案”会报告以下错误：
> 
> ```
> 1>------ Clean started: Project: makefiletest, Configuration: Debug Win32 ------
> 1>  'nmake' is not recognized as an internal or external command,
> 1>  operable program or batch file.
> 1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.MakeFile.Targets(33,5):
>   error MSB3073: The command "nmake /?" exited with code 9009.
> ================= Clean: 0 succeeded, 1 failed, 0 skipped ========== 
> ```
> 
> 要解决此问题：
> 
> 1.  打开 Visual Studio 命令提示符窗口。
> 2.  通过键入打开 Devenv `devenv /useenv`。
> 3.  现在“清洁解决方案”应该可以工作了。
> 
> 或者：
> 
> 将批处理文件传递给 clean 命令。在批处理文件中，设置 nmake 工具以及其他构建环境的 PATH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T23:44:00.270

当然你是对的，MSVC 从来没有把它的构建工具放在路径中！所以你在这里有两个选择：

*   从 VisualStudio 命令提示符运行批处理文件

*   添加`%ProgramFiles%\Microsoft Visual Studio 10.0\VC\vcvarsall.bat`到批处理文件的开头以将所需的路径添加到 PATH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:41:41.070

我认为更好的解决方案是添加`set PATH=$(VSInstallDir)\BC\bin;%PATH%`到批处理文件的开头。

如果您将来升级到 VS2012（或更高版本），这应该是面向未来的构建。

# c++ - 开关总是在猜数字游戏时输出默认值

> ID：13020805
> 
> 赞同：0
> 
> 时间：2012-10-22T22:23:25.550
> 
> 标签：c++

我试图让一个程序工作，它会猜测用户正在考虑的数字，但是它目前每次只输出默认的开关动作。请告诉我我做错了什么？谢谢！

```
srand(time(0));
int lowernum = 1;
int highernum = 1000;
int number=rand()%highernum + lowernum;
string letter = "";
int letternum = 0;

cout<<"\nOkay, think of a number between one and 1000 
and I will try to guess it!\n";
cout<<"\nIs your number higher (h), lower (l) 
or exactly (e): " << number << "\n";
cin>>letter;

if (letter == "h")
{
    letternum = 1;
}
else if (letter == "l")
{
    letternum = 2;
}
else if (letter == "e")
{
    letternum = 3;
}

switch(letternum){
case'1': highernum = number; cout<<"\nIs your number higher (h), 
lower (l) or exactly (e): " << number << "\n"; cin>>letter;
    break;
case'2': lowernum = number; cout<<"\nIs your number higher (h), 
lower (l) or exactly (e): " << number << "\n"; cin>>letter;
    break;
case'3': cout<<"\nWahoooooo! I win! :D\n";
    break;
default:cout<<"\nI don't understand what you just typed in.\n";
    break;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:28:37.740

`letternum`是一个整数，你的 switch 语句使用字符（例如'1'），只需从你的 case 表达式中的字符中删除引号：

```
switch(letternum){
case 1: 
```

ETC...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:29:01.727

因为您的开关标签是字符，但您的 letternum 是 int，所以它们不匹配。

# c++ - 以下 C++ 代码被截断有什么作用？

> ID：13020807
> 
> 赞同：0
> 
> 时间：2012-10-22T22:23:29.417
> 
> 标签：c++, oop, reference, type-conversion

假设 A 是用户定义的类型。

```
A ob1;
A ob2 = (A&) ob1; 
```

现在ob2是什么？我在一个项目中看到了上面的代码，我想知道它的目的是什么。它是复制对象的更快方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:25:44.987

演员阵容毫无意义。对象的副本仍然以相同的方式制作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:29:41.227

这是没有意义的。有人可能看到赋值运算符定义为

```
A& A::operator=(const A& other) 
```

并假设他们必须将其投入使用。

# asp.net - 没有 aspnetdb.mdf 的自己的角色管理器提供程序

> ID：13020814
> 
> 赞同：0
> 
> 时间：2012-10-22T22:24:01.450
> 
> 标签：asp.net, roleprovider, aspnetdb

我正在为我的菜单使用角色管理器和安全修剪。由于我的服务器对这个 ASPNETDB.mdf 不太友好，所以我在 xml 和 c# 类中创建了自己的角色管理器。但 Visual Studio 仍在 APP_DATA 中创建我的 ASPNETDB 文件。现在我通过在 machine.config 文件中注释来防止这种情况发生，但现在我在调试项目时遇到了错误。

我想我已经正确配置了角色管理器，看起来像这样：

```
<roleManager enabled="true" defaultProvider="MyXmlProvider">
  <providers>
    <add type="Personal.Providers.MyXmlProvider" name="MyXmlProvider"/>
  </providers>
</roleManager> 
```

有人能看出什么问题吗？有什么可以帮助解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:24:53.940

在 web.config 设置的开头附加一个 clear ( **<clear /> ) 元素。**这将删除所有其他提供者（甚至是默认提供者）

```
<roleManager enabled="true" defaultProvider="MyXmlProvider">
  <providers>
    <clear />
    <add type="Personal.Providers.MyXmlProvider" name="MyXmlProvider"/>
  </providers>
</roleManager> 
```

# python - 图像不在 Django 运行服务器上以 HTML 格式呈现，但 HTML 在浏览器中工作

> ID：13020816
> 
> 赞同：0
> 
> 时间：2012-10-22T22:24:16.410
> 
> 标签：python, html, css, django, image

使用 Django 和我的 index.html 页面构建站点无法正确呈现图像。当我在浏览器中打开 HTML 文件时，图像加载正常，但是当我`python manage.py runserver`从 powershell 执行时，HTML 页面不会呈现任何图像。

代码如下 - 为什么它在服务器中运行时不呈现，但在我在浏览器中打开时工作？

```
<!DOCTYPE html>
<head>Q&A</head>
<body>
<h1><img src="c:/users/chris/desktop/logo.jpg"></img></h1>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:28:53.910

可能是因为不支持文件符号。

尝试使用`file://`URI 方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:29:01.327

因为您的图像源应该是 URL 而不是文件路径。

您需要将图像上传到网络服务器并链接到它的 URL，例如[http://yourdomain.com/img/logo.jpg](http://yourdomain.com/img/logo.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:34:20.360

Django 需要知道静态内容的位置来为它们提供服务。请执行下列操作：

1.  将 settings/STATIC_DIR 的路径设置为您存储图像的位置
2.  提供一个向客户端显示的 STATIC_URL
3.  将您的视图代码中的 context_instance 传递给模板
4.  使用模板 {{STATIC_URL}}path_to_your_image_from_static_dir 中的 url

# c++ - 将 klib 的 knetfile.c|h 移植到 windows，当我在“windows unistd.h”中子时，我收到错误 C2036: 'void *' : unknown size

> ID：13020818
> 
> 赞同：0
> 
> 时间：2012-10-22T22:24:17.110
> 
> 标签：c++, c, visual-studio, unistd.h

首先，“windows unistd.h”是指位于此处的示例：[“windows 是否有 unistd.h 的替代品？](https://stackoverflow.com/questions/341817/is-there-a-replacement-for-unistd-h-for-windows-visual-c)

我正在尝试按摩[knetfile.c](https://github.com/attractivechaos/klib/blob/master/knetfile.c)以便可以为 windows64 编译它。我的第一步是删除 unistd.h 包含，因为它在 Windows 上不可用。

> 致命错误 C1083：无法打开包含文件：'unistd.h'：没有这样的文件或目录

所以，我想我会用上面链接的插入式替换掷骰子。但是，这显然不起作用，因为我现在收到一系列错误和警告：

> knetfile.c(189)：错误 C2036：'void *'：未知大小 knetfile.c(236)：警告 C4267：'function'：从 'size_t' 转换为 'int'，可能丢失数据
> 
> knetfile.c(264)：警告 C4244：“=”：从“SOCKET”转换为“int”，可能丢失数据
> 
> knetfile.c(271)：警告 C4244：“=”：从“SOCKET”转换为“int”，可能丢失数据
> 
> knetfile.c(300)：警告 C4244：“=”：从“__int64”转换为“int”，可能丢失数据
> 
> knetfile.c(335)：错误 C2143：语法错误：缺少“；” 在“常量”之前
> 
> knetfile.c(336)：错误 C2065：“p”：未声明的标识符
> 
> knetfile.c(336)：错误 C2100：非法间接
> 
> knetfile.c(336)：错误 C2065：“p”：未声明的标识符
> 
> knetfile.c(337)：错误 C2065：“p”：未声明的标识符
> 
> knetfile.c(337)：错误 C2100：非法间接
> 
> knetfile.c(337)：错误 C2065：“p”：未声明的标识符
> 
> knetfile.c(337)：错误 C2100：非法间接
> 
> knetfile.c(337)：错误 C2065：“p”：未声明的标识符
> 
> knetfile.c(338)：错误 C2065：“p”：未声明的标识符
> 
> knetfile.c(338)：警告 C4047：“函数”：“const char *”与“int”的间接级别不同
> 
> knetfile.c(338): 警告 C4024: 'strtoint64' : 形式参数和实际参数 1 的不同类型
> 
> knetfile.c(378)：警告 C4244：“=”：从“__int64”转换为“int”，可能丢失数据
> 
> knetfile.c(410)：警告 C4244：“=”：从“SOCKET”转换为“int”，可能丢失数据
> 
> knetfile.c(430)：警告 C4244：“正在初始化”：从“int64_t”转换为“off_t”，可能丢失数据
> 
> knetfile.c(520)：错误 C2036：'void *'：未知大小
> 
> knetfile.c(537)：警告 C4244：“功能”：从“int64_t”转换为“长”，可能丢失数据
> 
> knetfile.c(544)：警告 C4244：'return'：从 'int64_t' 转换为 'off_t'，可能丢失数据
> 
> knetfile.c(553)：警告 C4244：'return'：从 'int64_t' 转换为 'off_t'，可能丢失数据
> 
> knetfile.c(565)：警告 C4244：“返回”：从“int64_t”转换为“off_t”，可能丢失数据

我想有一小部分宏或 typedef 缺失可以解决这个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:34:20.227

第一个错误

knetfile.c(189)：错误 C2036：'void *'：未知大小

是正确的，而代码是错误的。对头文件进行任何修改都不会改变您无法对 void 指针进行指针运算的事实。

第五个错误

knetfile.c(335)：错误 C2143：语法错误：缺少“；” 在“常量”之前

也是正确的。在 C 中，所有声明都必须在任何语句之前的块开头。可能随着 C99 发生了变化，但 Microsoft 编译器不支持 C99。

# javascript - 如何将 json 加载到我的 angular.js ng-model 中？

> ID：13020821
> 
> 赞同：114
> 
> 时间：2012-10-22T22:24:28.883
> 
> 标签：javascript, ajax, angularjs, model

我有一个我认为可能是一个非常明显的问题，但我无法在任何地方找到答案。

我只是想将一些 JSON 数据从我的服务器加载到客户端。现在，我正在使用 JQuery 通过 AJAX 调用加载它（代码如下）。

```
<script type="text/javascript">
var global = new Array();
$.ajax({
    url: "/json",
    success: function(reports){
        global = reports;
        return global;
        }
    });
</script> 
```

它位于 html 文件中。到目前为止它有效，但问题是我想使用 AngularJS。现在，虽然 Angular 可以使用变量，但我无法将整个内容加载到变量中，因此我可以为每个循环使用一个。这似乎与“$Scope”有关，它通常位于 .js 文件中。

问题是我无法将其他页面的代码加载到 .js 文件中。Angular 的每个示例都只显示如下内容：

```
function TodoCtrl($scope) {
  $scope.todos = [
    {text:'learn angular', done:true},
    {text:'build an angular app', done:false}]; 
```

所以，这很有用，如果 IA）想要手动输入所有这些，并且 B）如果我提前知道我的所有数据是什么......

我事先不知道（数据是动态的），我不想输入它。

因此，当我尝试使用 $Resource 将 AJAX 调用更改为 Angular 时，它似乎不起作用。可能我想不通，但它是一个比较简单的对 JSON 数据的 GET 请求。

**tl:dr 我无法让 AJAX 调用工作以将外部数据加载到角度模型中。**

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-10-23T13:17:44.817

正如 Kris 所提到的，您可以使用该`$resource`服务与服务器进行交互，但我的印象是您正在开始使用 Angular 的旅程——我上周在那里——所以我建议直接开始试验该`$http`服务。在这种情况下，您可以调用它的`get`方法。

如果您有以下 JSON

```
[{ "text":"learn angular", "done":true },
 { "text":"build an angular app", "done":false},
 { "text":"something", "done":false },
 { "text":"another todo", "done":true }] 
```

你可以像这样加载它

```
var App = angular.module('App', []);

App.controller('TodoCtrl', function($scope, $http) {
  $http.get('todos.json')
       .then(function(res){
          $scope.todos = res.data;                
        });
}); 
```

该`get`方法返回一个*promise*对象，第一个参数是*成功*回调，第二个参数是*错误* 回调。

当您添加`$http`作为函数的参数时，Angular 会神奇地将`$http`资源注入您的控制器。

我在这里举了一些例子

*   [http://plnkr.co/edit/Wuc6M7?p=preview](http://plnkr.co/edit/Wuc6M7?p=preview)
*   [https://gist.github.com/3938567](https://gist.github.com/3938567)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-01-24T12:40:49.837

这是一个如何将 JSON 数据加载到 Angular 模型中的简单示例。

*我有一个 JSON 'GET' Web 服务，它从 Microsoft 的 Northwind SQL Server*数据库的在线副本返回客户详细信息列表。

[http://www.iNorthwind.com/Service1.svc/getAllCustomers](http://www.iNorthwind.com/Service1.svc/getAllCustomers)

它返回一些 JSON 数据，如下所示：

```
{ 
    "GetAllCustomersResult" : 
        [
            {
              "CompanyName": "Alfreds Futterkiste",
              "CustomerID": "ALFKI"
            },
            {
              "CompanyName": "Ana Trujillo Emparedados y helados",
              "CustomerID": "ANATR"
            },
            {
              "CompanyName": "Antonio Moreno Taquería",
              "CustomerID": "ANTON"
            }
        ]
    } 
```

..我想用这些数据填充一个下拉列表，看起来像这样......

![角度截图](../Images/9b730950f813dbca09007339c67485ad.png)

我希望每个项目的文本来自“CompanyName”字段，ID 来自“CustomerID”字段。

我该怎么做？

我的 Angular 控制器看起来像这样：

```
function MikesAngularController($scope, $http) {

    $scope.listOfCustomers = null;

    $http.get('http://www.iNorthwind.com/Service1.svc/getAllCustomers')
         .success(function (data) {
             $scope.listOfCustomers = data.GetAllCustomersResult;
         })
         .error(function (data, status, headers, config) {
             //  Do some error handling here
         });
} 
```

...用这组 JSON 数据填充“listOfCustomers”变量。

然后，在我的 HTML 页面中，我会使用这个：

```
<div ng-controller='MikesAngularController'>
    <span>Please select a customer:</span>
    <select ng-model="selectedCustomer" ng-options="customer.CustomerID as customer.CompanyName for customer in listOfCustomers" style="width:350px;"></select>
</div> 
```

就是这样。我们现在可以在网页上看到我们的 JSON 数据列表，可以使用了。

关键在于“ng-options”标签：

```
customer.CustomerID as customer.CompanyName for customer in listOfCustomers 
```

这是一个奇怪的语法，让你头脑清醒！

当用户在此列表中选择一个项目时，“$scope.selectedCustomer”变量将设置为该客户记录的 ID（CustomerID 字段）。

可以在此处找到此示例的完整脚本：

[使用 Angular 的 JSON 数据](http://www.mikesknowledgebase.com/pages/Services/WebServices-Page8.5.htm)

麦克风

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T23:53:13.023

我使用以下代码，在互联网的某个地方找到，但不记得来源。

```
 var allText;
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, false);
    rawFile.onreadystatechange = function () {
        if (rawFile.readyState === 4) {
            if (rawFile.status === 200 || rawFile.status == 0) {
                allText = rawFile.responseText;
            }
        }
    }
    rawFile.send(null);
    return JSON.parse(allText); 
```

# mysql - 总结mysql中的列值

> ID：13020822
> 
> 赞同：0
> 
> 时间：2012-10-22T22:24:37.407
> 
> 标签：mysql

我有一张包含以下数据的“水果”表

```
id  a 
123 apple
223 orange
646 apple
757 banana
876 kiwi
989 orange 
```

我想编写一个 mysql 来总结列“a”的出现并将它们放入 3 个单独的桶中：一个用于苹果，一个用于橙子，其余在“其他”下

```
SELECT 
     count(*) as total
     sum(if(a = 'apple',1,0)) as applecount
     , sum(if(a = 'orange',1,0)) as orangecount
     , sum(`applecount` + `orangecount` - total) as others

FROM fruits 
```

但是在运行查询时，在字段列表中给出以下错误未知列“applecount”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:27:12.183

```
SELECT count(*) as total,
       sum(a = 'apple') as applecount,
       sum(a = 'orange') as orangecount,
       sum(a not in ('orange', 'apple')) as others
FROM fruits 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/2270a/1)

# python - 腌制经过训练的 NLTK 模型

> ID：13020823
> 
> 赞同：6
> 
> 时间：2012-10-22T22:24:37.973
> 
> 标签：python, python-2.7, nltk, pickle, hidden-markov-models

所以我目前正在对一组手术数据训练一个隐马尔可夫模型，如下所示：

```
nltkTrainer = nltk.tag.hmm.HiddenMarkovModelTrainer(range(15),range(90))
model = nltkTrainer.train_unsupervised(data, max_iterations=3) 
```

如果有帮助，“模型”将作为“HiddenMarkovModelTagger 15 个状态和 90 个输出符号”给出

然而，在我的机器上运行这个完整的训练需要将近一个小时。我希望能够序列化 nltk 模型输出“模型”以在会话之间加载和保存。我已经阅读过，每个人似乎都使用 Python 内置的 pickle，它对于已知的数据类型工作得很好而且很花哨。我什至可以使用以下代码腌制我训练有素的模型变量：

```
f = open('my_classifier.pickle', 'wb')
pickle.dump(model, f)
f.close() 
```

但是当尝试加载腌制文件时，我收到错误：

```
/usr/local/lib/python2.7/dist-packages/nltk/probability.pyc in __init__(self, probdist_dict)
   1971         """
   1972         defaultdict.__init__(self, DictionaryProbDist)
-> 1973         self.update(probdist_dict)
   1974 
   1975 ##//////////////////////////////////////////////////////

TypeError: 'type' object is not iterable 
```

有没有人找到解决这个问题的方法？NLTK 有问题吗？

# iphone - 横向 iAd 在 iOS6 中显示纵向图形？

> ID：13020832
> 
> 赞同：2
> 
> 时间：2012-10-22T22:25:39.707
> 
> 标签：iphone, ipad, ios6, orientation, iad

我的应用程序以纵向方向运行，但里面的内容随着加速度计旋转。我在屏幕底部显示 iAd。iAd 在您旋转时改变了位置，但实际界面不旋转（shouldAutorotate 返回 NO，所有旋转都在 OpenGL 中处理）。因此，iAd 被定位，然后设置了一个变换来旋转它，因此它是用户的正确方式。当应用处于纵向时，它是纵向广告。在风景中，它就是风景。自从 iAd 首次发布以来，这一直运行良好......直到现在。

在 iOS6 中，iAd 仍然定位正确，但无论我做什么，内容都不是。似乎 iOS6*决定*了它应该显示哪种类型的广告。我认为这与自动调整大小有关。但我对如何阻止它感到困惑。我最终以横向模式显示纵向图形......在一侧......并且由于更薄的广告空间而被切断。

有没有其他人看到过这种行为？它仅在iOS6下。有谁知道如何阻止 iAd 自动调整大小/内容旋转？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:06:01.600

这可能是由于自动布局，这是 iOS 6 的一项新功能。检查故事板的第一个（“文件检查器”）选项卡，如果勾选了“使用自动布局”，那可能是您的问题！

启用自动布局后，视图基于“约束”而不是以前可用的简单自动调整大小参数。这些约束覆盖了对子视图框架的大多数尝试更改-因此可以解释您的问题。

可以继续使用自动布局并确保您的约束设置正确，但如果您依赖代码来更改广告视图的位置/大小，那么我建议您简单地禁用自动布局，这*应该*会使您的调整大小再次正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:35:37.977

我想您在加载横幅时正在使用与下面类似的方法？

```
 - (void)bannerViewDidLoadAd:(ADBannerView *)banner {

       self.bannerView.frame = CGRectZero;
 } 
```

试着把它改成这样

```
 - (void)bannerViewDidLoadAd:(ADBannerView *)banner {

       self.bannerView.frame = CGRectMake(0, 0, 480, 32);
 } 
```

# javascript - 本地主机与服务器不同

> ID：13020835
> 
> 赞同：1
> 
> 时间：2012-10-22T22:25:45.837
> 
> 标签：javascript

我正在处理的项目在本地主机上的功能与在服务器上的功能不同。我什至在拥有服务器的远程桌面上运行本地主机。当我在服务器上调试时，Firefox 中的 Firebug 在 javascript 中显示错误，但这是一个简单的语法错误，我已经修复了它，它在 localhost 上运行良好。我已经尝试清除浏览器上的缓存并重建项目。我很确定这是导致问题的未更改的 javascript，但我不知道如何更新我的修复程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:27:26.533

尝试删除文件，请求它，然后重新添加它以查看响应是否更改

# qt - Qt获取点击项目的列位置

> ID：13020836
> 
> 赞同：1
> 
> 时间：2012-10-22T22:25:46.630
> 
> 标签：qt, pyqt, pyqt4

我在网格布局中包含三个小部件。当我单击它们时，我想获取它们的列位置，但我找不到小部件本身的任何属性，并且似乎无法通过访问来获取容器`widget.parentWidget()`

我可以使用一些间接方式，例如 itemAt，但我宁愿找到一种不那么复杂的方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T05:25:17.733

您可以简单地询问 QGridLayout 项目在哪里。这是一个例子：

```
class Widget(QtGui.QWidget):

    def __init__(self):
        super(Widget, self).__init__()
        self.resize(600,600)

        self.layout = QtGui.QGridLayout(self)
        for row in xrange(3):
            for col in xrange(3):
                button = QtGui.QPushButton("Button %d-%d" % (row,col))
                button.clicked.connect(self.buttonClicked)
                self.layout.addWidget(button, row, col)

    def buttonClicked(self):
        button = self.sender()
        idx = self.layout.indexOf(button)
        location = self.layout.getItemPosition(idx)
        print "Button", button, "at row/col", location[:2] 
```

您只需要知道单击了哪个小部件。然后您可以使用 查找布局索引`layout.indexOf(widget)`。使用索引，您可以查找实际`(row, col, rowspan, colspan)`使用`layout.getItemPosition(index)`

无需遍历列表的全部内容。此外，通过这种方法，您可以获得当前位置，而不是创建项目时存储的任何列位置。项目添加后可以随时在布局内移动。

如果您发现`self.sender()`方法“unpythonic”，因为您必须询问调用小部件是谁，您还可以使用提前将每个回调与实际按钮小部件打包的方法：

```
from functools import partial 

class Widget(QtGui.QWidget):

    def __init__(self):
        ...
            for col in xrange(3):
                button = QtGui.QPushButton("Button %d-%d" % (row,col))
                cbk = partial(self.buttonClicked, button)
                button.clicked.connect(cbk)
        ...
    def buttonClicked(self, button):
        idx = self.layout.indexOf(button) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:14:36.640

现实（？）伪代码如下。虽然没有测试。

```
int getColoumOfWidgetInGridLayout(QGridLayout* layout, QWidget* widget)
{
  for(int row=0; row<layout->rowCount(); ++row) {
    for(int col=0; col<layout->columnCount(); ++col) {
       if(layout->itemAtPosition(row, col)->widget()==widget) {
          return col;
       }
    }
  }
  return -1;
} 
```

但是如果你觉得很复杂，那么在构建网格布局时使用 QObject::setProperty() 来存储列号。IE，

```
myWidget->setProperty("GridColumn", column);
myGridLayout->addWidget(myWidget, row, column); 
```

然后你可以通过

```
myWidget->property("GridColumn").toInt(); 
```

# c# - 如何知道用户是否对树的父节点有权限？

> ID：13020838
> 
> 赞同：1
> 
> 时间：2012-10-22T22:25:49.980
> 
> 标签：c#, linq, tsql, recursion

我有一个公司的树状表示，它存储在数据库中，如下表：

```
 ID       ParentID     Name
 ==================================
   1        NULL        Company
   2        1           Division one
   3        1           Division two
   4        1           Division three
   5        2           Department 1.1
   6        3           Department 2.1
   7        3           Department 2.2
   8        3           Department 2.3
   9        4           Department 3.1
  10        NULL        Company 2 
```

现在，当我授予用户权限时，我需要将他分配给上表中的组，如果我将他分配给组，他将自动获得子组的权限。如果它是关于一组的，我可以很容易地检查这个。但是例如，如果我授予用户权限（第 2 部分），然后用户正在（部门 2.2）上进行一些交易，我需要找到一种自动允许交易的方法，因为用户已经被允许在父组上。我只能想到检查目标组的递归方法，如果用户对其没有权限并且它有一个父组，那么我会回忆起相同的方法来验证其父组，依此类推，直到我找到一个用户被允许的组对于或到达根组，而不是对用户进行身份验证。请记住，孩子可以在其中拥有另一个孩子，依此类推。

有没有办法以更好的方式做到这一点？使用 Linq 还是普通的旧 T-SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:33:06.723

AFAIK 递归函数是唯一的方法。前段时间我问了类似的问题，并意识到 EF 或 LINQ 无法为您计算。

我的问题：[使用 LINQ 获取子类别中的所有项目](https://stackoverflow.com/questions/12498976/take-all-items-in-sub-categories-using-linq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:12:04.473

我了解您想检查父母的所有孩子。

```
with tmp as (
  select id, parentId, name, 0 as iteration
  from t
  where id = 3 -- you wanted parent
  union all
  select parent.id, parent.parentId, parent.name, child.iteration + 1
  from tmp child
  join t parent on child.id = parent.parentId
)
select id, parentId, name from tmp
order by iteration 
```

演示： [http ://sqlfiddle.com/#!3/b5d1d/10](http://sqlfiddle.com/#!3/b5d1d/10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:50:03.083

这会起作用：

```
public class Permission
{
  public ID { get; set; }
  public ParentID { get; set; }
  public Name { get; set; }
}

int userPermissionID = 3;  // Division two
int objectPermissionID = 7; // Department 2.2
bool hasAccess = false;

List<int> check = new List<int>();
check.add(objectPermissionID);

hasAccess = userPermissionID == objectPermissionID;

while(!hasAccess && check.count > 0)
{
  var permissions = context.Permissions
    .Where(p => check.Contains(p.ID))
    .ToList();

  hasAccess = permissions.Any(p => p.ParentID = userPermissionID)

  check = permissions.Select(p => p.ParentID).ToList();
}

if (hasAccess)
{
  .. 
```

您最多可以访问数据库 X 次，其中 X 是可用的子分支数。

# django-models - 新手疑惑，求大神帮忙

> ID：13020839
> 
> 赞同：2
> 
> 时间：2012-10-22T22:25:53.480
> 
> 标签：django-models, django-forms, django-views, django-1.4

一直在寻找这个答案的日子......在 Django 是全新的，但疯狂地阅读它，虽然还不够......

我想建立一个简单的数据输入系统。CharField 采用文件名，我在选择框中显示文件中的行，允许删除行。其余的在提交时保存。

## 模型.py

```
class Inputmodel(models.Model):
    data = models.CharField(max_length=128) 
```

## 视图.py

```
from forms import InputForm 
from proj.models import Inputmodel

def ipdb_input_add(request):
    if request.method == 'GET':
       form = InputForm(request.GET)
       if form.is_valid():
           dlist = []
           if 'filename' in request.GET and request.GET['filename']:
               filename = request.GET['filename']
               listp = open(filename, 'r').read 
               with open(filename, 'rt') as f:
                   myfile = File(f) 
                   for line in myfile: 
                       dlist.append(line) 
               myfile.close

           for d in dlist:
               item = Inputmodel(data=d)
               item.save 

           return render_to_response('base.html', { 'form': form }) 
```

## 表格.py

```
from django import forms
from ip_db.models import Inputmodel

class InputForm(forms.Form):
    filename = forms.CharField(max_length=128)
    box      = forms.MultipleChoiceField(
                   required=False, 
                   choices=Inputmodel.objects.all().values_list('id', 'ipaddr'),
                   widget=forms.SelectMultiple(attrs={
                       'style':'width:200px;height:300px;'
                   }       
               )) 
```

这不是一项艰巨的任务，我担心我错过了一种更简单的方法。有什么建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T17:08:17.670

可能有帮助的几点：

1.  仅当用户使用“GET”时才呈现表单。这样，当您打开网址时，您什么也看不到。
2.  您应该使用 forms.cleaned_data 来获取表单的值。[在这里](https://docs.djangoproject.com/en/1.4/topics/forms/)检查
3.  如果用户尝试上传文件（我不太明白），我会`docfile = forms.FileField(label='Select a file:', help_text='')`在表单中使用。
4.  然后获取可以`data_raw=request.FILES['docfile'].read()`在视图中使用的文件
5.  最后，一个更简单的实现可能是创建用于选择文件的第一个表单。提交后，我将使用文件的行初始化第二个表单。[在这里](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)初始化表单检查第二次提交将保存数据。

# selenium - Selenium WebDriver 工作但速度慢（Java）

> ID：13020841
> 
> 赞同：11
> 
> 时间：2012-10-22T22:25:58.577
> 
> 标签：selenium, webdriver, screenshot, selenium-webdriver

我正在使用 Selenium WebDriver 截取网页截图。它运行良好。但是，从我在 Eclipse 中运行到屏幕截图显示在我的本地驱动器中的时间是 7-10 秒。大多数延迟似乎是在启动 Firefox。

代码：

```
WebDriver driver = new FirefoxDriver();
driver.get("http://www.cnn.com");
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
FileUtils.copyFile(scrFile, new File("c:\\test\\screenshot.png")); 
```

我怎样才能加快这个过程？有没有办法可以使用已经打开的 Firefox 浏览器来节省打开新浏览器的费用？这段代码有点重吗？

详细信息：在 CentOS 盒子和 Win7 盒子上都使用 eclipse 进行了尝试。myspeedtest.net 显示 22Mbps 下降和 1 Mbps 上升。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T22:36:54.757

您所要求的（允许`WebDriver`附加到正在运行的浏览器）已经成为[近 3 年](http://code.google.com/p/selenium/issues/detail?id=18)的问题。迄今为止，该功能仍未添加。据我所知，没有办法让 Firefox 加载速度更快。不过，您可以尝试其他一些技巧。

```
fp.setPreference("webdriver.load.strategy", "unstable") 
```

引用[此页面](http://code.google.com/p/selenium/wiki/FirefoxDriver)的警告：

> 有一个 beta 功能可以让 firefox 在调用 .get 或 .click 后不等待整个页面加载。这可能会导致立即查找中断，因此请务必使用隐式或显式等待。这仅适用于 Firefox，不适用于其他浏览器。

您也可以尝试[加载配置文件](https://stackoverflow.com/questions/7771592/how-to-make-firefoxdriver-use-existing-profile)，看看是否有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T11:37:17.890

从我在别处学到的东西——

1.  关闭浏览器/插件的自动更新
2.  将您的 IIS（或等效）应用程序超时设置为零
3.  创建用于测试的基本 Selenium Fixture
4.  更新到最新版本的 Selenium
5.  在测试之前预热您的应用程序
6.  短期测试
7.  预填充 cookie。

参考：

[https://sqa.stackexchange.com/questions/1988/selenium-reuse-existing-browser-session-instead-of-opening-new-windows](https://sqa.stackexchange.com/questions/1988/selenium-reuse-existing-browser-session-instead-of-opening-new-windows)

[http://www.codeweavers.net/6-ways-to-speed-up-selenium-tests/](http://www.codeweavers.net/6-ways-to-speed-up-selenium-tests/)

[http://sauceio.com/index.php/2011/02/speed-up-your-selenium-tests/](http://sauceio.com/index.php/2011/02/speed-up-your-selenium-tests/)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-30T15:58:26.213

[这个线程](https://groups.google.com/forum/#!topic/selenium-users/a2fNfF-mD_E)显示了一个可能的解释。

综上所述，Selenium 循环遍历所有网卡，调用一个方法（getHostName），虚拟网卡耗时较长。禁用它们解决了线程中 OP 的问题。

（在我自己的情况下，我无法禁用它们中的任何一个，并且必须在每个测试用例开始时等待......）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-18T13:31:34.550

我在 Windows 中遇到了同样的问题，原因与解决`localhost`. 在这种情况下，有两种方法可以修复它：

*   用 127.0.0.1 替换 localhost （所以转到 url 之类的`http://127.0.0.1`）。但是，`network.automatic-ntlm-auth.trusted-uris`在使用 NTLM 身份验证对 Web 应用程序进行测试时，这会与设置混淆，因为它需要主机名，而不是 IP 地址

*   更改`hosts`（例如 C:\Windows\System32\drivers\etc）直接将 localhost 解析为 127.0.0.1：

    ```
    # localhost name resolution is handled within DNS itself.
    127.0.0.1       localhost
    #   ::1             localhost 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T03:45:53.070

我意识到这个问题已经得到解答，但我希望这可以帮助任何有同样问题的人。

如果您需要做的只是截屏。我推荐使用 Awesomium.NET。 [http://awesomium.com/](http://awesomium.com/)

在 C# 而不是 Java 中执行此操作应该不是主要困难，因为它们具有相似的语法。如果您想在 Linux 上运行应用程序，它还支持 C++。我认为它会比 WebDriver 快得多。

如果您选择 C++，请使用：http: [//labs.awesomium.com/capturing-web-pages-with-c/](http://labs.awesomium.com/capturing-web-pages-with-c/)

对于 C#.NET：[http ://awesomium.com/docs/1_7_rc3/sharp_api/](http://awesomium.com/docs/1_7_rc3/sharp_api/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-17T10:09:40.080

对我来说，它适用于 64 位版本的 IEDriverServer，我添加了属性 requireWindowFocus，其值为：“true”。

```
DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();
capabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true);

capabilities.setCapability("requireWindowFocus", true);
WebDriver driver = new InternetExplorerDriver(capabilities); 
```

# android - 如何从 android 的 void 视图中获取字符串值？

> ID：13020845
> 
> 赞同：0
> 
> 时间：2012-10-22T22:26:24.193
> 
> 标签：android, string, button, void

我试图从下面的 Button onClick 方法中获取字符串**firstChoice**和**secondChoice的值，并在同一个类中使用它。**问题是我知道您不能从 void 方法返回字符串值。请看一下我下面的内容：

```
 public class Question extends Activity implements OnClickListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_question);

        Choice1 = (Button) findViewById(R.id.Choice4);
        Choice1.setOnClickListener(Question.this);

        Choice2 = (Button) findViewById(R.id.Choice5);
        Choice2.setOnClickListener(Question.this);

        firstChoice;
        secondChoice;

    public void onClick(View view) {
            switch(view.getId()) {
              case R.id.Choice4:
                  showSelectPicksDialog();
                  Button b = (Button)view;
                String firstChoice = b.getText().toString();

                break;

              case R.id.Choice5:
                  showSelectPicksDialog2();
                  Button v = (Button)view;
                String secondChoice = v.getText().toString();// 
                break;

              default:
                break;
            }
          } 
```

有没有办法获得这些值？就像现在一样，当我尝试在我的 on Create 方法中调用值时，我收到错误消息，指出 firstChoice 和 secondChoice “无法解析为类型”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:30:17.830

有很多方法，您可以使用类变量，例如：

```
public class Question extends Activity implements OnClickListener{
    String firstChoice;    
    String secondChoice;    
    Button choice1;
    Button choice2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_question);

        choice1 = (Button) findViewById(R.id.Choice4);
        choice1.setOnClickListener(Question.this);

        choice2 = (Button) findViewById(R.id.Choice5);
        choice2.setOnClickListener(Question.this);

        public void onClick(View view) {
            switch(view.getId()) {
            case R.id.Choice4:
                showSelectPicksDialog();
                Button b = (Button)view;
                firstChoice = b.getText().toString();
                break;

            case R.id.Choice5:
                showSelectPicksDialog2();
                Button v = (Button)view;
                secondChoice = v.getText().toString();
                break;

            default:
                break;
            }
        }
    }
} 
```

# vbscript - 使用表格创建 Outlook 签名

> ID：13020846
> 
> 赞同：0
> 
> 时间：2012-10-22T22:26:51.743
> 
> 标签：vbscript, outlook-2010

我正在使用 VBS 在 Outlook 中创建签名以推送给我们的用户。签名中有表格，因此我可以将徽标/用户信息与徽标顶部的标准文本并排放置。（原始表格代码在这里找到： [http](http://www.vbforums.com/showthread.php?526706-resolved-question-with-tables-in-vbscript-for-AD-signature) ://www.vbforums.com/showthread.php?526706-resolved-question-with-tables-in-vbscript-for-AD-signature ）

下面是写入 doc 文件的代码片段。该代码成功地创建了两个列，并将我想要的任何信息放入其中。问题是，如果我在 table1 和 table2 的顶部输入一条水平线，则两个表之间存在间隙。我的问题是，您可以使用 vbs 控制文档的两个表格之间的差距吗？

```
objDoc.Tables.Add objRange, 1, 2
Set objTable = objDoc.Tables(1)

'** Logo column **
'Draw a horizontal line (This only draws it for this frame)
objSelection.InlineShapes.AddHorizontalLineStandard

objTable.Cell(1, 1).select
'Put Logo information here

'** User column **
'Draw a horizontal line (This only draws it for this frame)
objSelection.InlineShapes.AddHorizontalLineStandard

objTable.Cell(1, 2).select
'Put User information here

objSelection.EndKey 6  'Command to end the above tables 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:01:36.690

手动创建 Word 文档时，我永远无法触摸到线条。但是，我实际上已经完全避免了上述问题，从而回答了我自己的问题。我在表格上方添加了一条线。

链接：[使用 VBS 在 MSWord 表格上方添加文本](https://stackoverflow.com/questions/13032677/add-text-above-msword-table-using-vbs/13048396#13048396)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:38:09.913

这段代码实际上是 VBA，其中的诀窍是用 word 记录一个宏，它只做你遇到的一件事，消除差距。因此，手动创建您的表格，找出消除差距的最佳方法，然后记录此操作。然后在生成的宏中查找使用的 vba 代码并将其插入到您的脚本中。如果可行，请在此处发布您的解决方案。成功。

# android - Android：使用 singleTop 或 SingleTask 恢复 Activity

> ID：13020864
> 
> 赞同：6
> 
> 时间：2012-10-22T22:28:49.033
> 
> 标签：android, android-intent, android-activity

我已经为我的问题寻找解决方案很长时间了，但是 Android 文档不是很清楚，网络解决方案也不能完全工作。

我正在开发一个游戏，其中主要活动（游戏发生的地方）可以调用另一个简单的活动然后返回。它会像这样工作：

1.  如果用户点击 Home 按钮然后返回游戏，必须停止并恢复活动，而不通过 onDestroy（否则会丢失游戏状态）
2.  当主Activity调用另一个Activity然后返回游戏时，同样的功能。
3.  当用户按下退出按钮时，游戏必须完全退出

对于前两点，我尝试这样做以确保创建和调用一个且只有一个主 Activity：`android:launchMode="singleTask"`或者`android:launchMode="singleTop"`但不幸的是，第一个适用于第一个问题，第二个适用于第二个问题，而不适用于两者！

我认为问题是：使用 singleTop 时，当第二个 Activity 调用它时，主 Activity 实际上并不在堆栈顶部（要清楚，我不明白我调用的 Activity 应该是什么情况已经在堆栈的顶部！）。相反， singleTask 确保 Activity 在其堆栈中是唯一的，但是在用户单击 Home 按钮并返回到 Application 后，会调用另一个 Task，对吗？

无论如何，这是一个聪明的解决方案，还是我应该在 onStop/onPause 中保存我的游戏状态，然后在 onResume 中恢复它？

对于第三点，我尝试将 Activity 添加`android:noHistory="true"`到每个 Activity，然后当用户单击退出按钮时，我调用一个新的 Activity，它除了 onCreate 上的方法之外什么都不做`finish()`，这个 Activity 被调用`intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_NEW_TASK);`并且它的 launchMode 是`singleInstance`，但它没有t 工作，它只是总是在主 Activity 中返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:11:28.363

你绝对不想弄乱`launchMode`. 这不是解决这个问题的方法，只会给你带来更多的问题。

Android 可以（并且将会）随时终止您的进程（尤其是当您的应用程序在后台时）。因此，您需要将游戏状态保存在 中`onPause()`，因为这是**保证**您拥有的唯一机会。

无论如何，如果您在`onPause()`标准行为中保存游戏将覆盖您的前 2 点。

对于您的第三点，有几个选项：

1.  [您可以在此处](https://stackoverflow.com/a/12266884/769265)`startActivityForResult()`查看我的回答开始所有活动
2.  当你想“退出”时，你可以回到你的根活动（启动你的应用程序的那个）并告诉它你想退出。

像这样：

```
Intent intent = new Intent(this, MyRootActivity.class); // this is the starting activity for your application
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); // tells Android to finish all other activities in the stack
intent.addExtra("exit", "true"); // this tells your root activity that you want to exit
startActivity(intent); 
```

现在，在您`MyRootActivity`想要将此代码添加到`onCreate()`：

```
Intent intent = getIntent();
if (intent.hasExtra("exit")) {
    // User wants to exit
    finish();
} 
```

# c++ - 为什么mingw 4.4说 需要c++0x吗？

> ID：13020865
> 
> 赞同：0
> 
> 时间：2012-10-22T22:28:49.720
> 
> 标签：c++, random, c++11

为什么除了明显的答案之外还这么说。另外我该如何解决这个问题，我不想在这个项目中添加 c++11 代码。

```
#include <random> 
```

mingw 4.4（QTSDK 附带的版本，但不使用 QT 库，只是 QT Creator ）

该文件需要对即将推出的\ISO C++ 标准C++0x 的编译器和库支持。此支持目前是实验性的，必须使用 -std=c++0x 或 -std=gnu++0x 编译器选项启用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T22:37:24.197

标`<random>`头仅添加到 C++0x 中的 c++ 标准中。如果您尝试`<random>`在 C++98 模式下使用，标准库实现者会放入一个预处理器指令来出错，原因有两个：

如果头文件利用了新的 C++0x 语言特性，那么它在默认的 C++98 模式下根本不起作用。那里有 C++0x 错误消息，以便您了解它为什么不起作用，而不必弄清楚“未知关键字”和其他错误消息的汤的含义。

如果头文件不需要任何新的 C++0x 语言特性，那么 C++0x 错误消息就在那里，这样您就不会误以为它在 C++98 中可用。如果您要这样做，然后其他人试图在完全不提供`<random>`标头的仅 C++98 编译器上编译您的代码（例如，您打算通过限制自己来支持的旧版本的 GCC C ++ 98），他们会很生气。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T22:31:25.163

标`<random>`头仅存在于 C++0x（现在称为 C++11）中。

如果您想在没有新标准的情况下生成随机数，您可以包含`<cstdlib>`并使用该`rand()`功能。

注意：`srand()`如果您使用`rand()`，请记住使用独特的东西，比如说当前时间。

另一种选择： use `boost`，因为 C++11 标准库主要基于它。切换到`boost`是微不足道的，但`boost`如果这是一个小项目，可能会太大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T22:33:51.840

如果你想在 C++11 中工作，你可以使用 Boost 的随机库代替 C++11，尽管它可能不是 1to1 端口，但它们都具有相同的功能并且非常相似。`rand`这个解决方案比用 C 的过时函数 重写所有随机位要容易得多，[请参见 boost random here](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_random.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T02:56:10.077

您可以使用随机工具的 TR1 版本，但如果您完全允许使用 C++11，我不会推荐它。进入 C++11 时，TR1 随机工具发生了重大变化。

我可以根据个人经验说，在 gcc (libstdc++) 中，TR1 库处于深度维护模式。只有 std 组件才会受到喜爱。

如果必须使用 C++98

```
#include <tr1/random>
...
   std::tr1::name_of_random_thing(...);
... 
```

# html - 使用 float:left 为元素应用适当的边框

> ID：13020870
> 
> 赞同：0
> 
> 时间：2012-10-22T22:29:26.703
> 
> 标签：html, css, border, pseudo-class

（请参阅行下方的实际问题，如果您需要更多解释，请阅读上面的描述）。

在 CSS 中，:last-child 和 :first-child 给了我很好的选择。表格带有强文本和更多标签，我可以使用 CSS 选择器定位这些标签，因此使用这些工具可以轻松地在表格的所有单元格周围放置适当的边框，而不会在任何一侧出现双边框。

将此应用到一个 DIV 列表中，每个 DIV 都显示在另一个之下，这也是一件简单的事情，因为我需要做的就是删除最后一个孩子的底部边框。

但：

* * *

当我使用一个相邻浮动的 DIV 列表时，例如连续 3 个（在它们的宽度总和超过目标容器的宽度并导致它们换行之前），我总是以一些双边框结束在某些方面。

有没有一个干净整洁的 CSS 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:45:55.907

我认为您正在寻找的那种解决方案根本不可能。当您使用表格时，浏览器可以理解`td`和`th`元素都属于同一个`tr`，并提出简单的规则来确定它们作为一个组的外观。

另一方面，Divs 是高度变化的（理所当然的），并且没有办法使用纯粹的 html 和 css 来创建这种关联。没有办法以语义方式说类似的东西`the children of this div are going to be on the same row, so they should all share a border`。

解决方法很简单：

[http://jsfiddle.net/8uqae/](http://jsfiddle.net/8uqae/)

只需在最后为一个 div 创建一个特殊的类，然后在右侧给其余的 div 一个边框。

**HTML：**

```
<div>
  <div class="left-end fl"></div>
  <div class="middle fl"></div>
  <div class="middle fl"></div>
  <div class="middle fl"></div>
  <div class="middle fl"></div>
  <div class="middle fl"></div>
  <div class="clr"></div>
</div>​ 
```

**CSS：**

```
.fl {
  float: left;
}
.clr {
  clear: both;
}
.left-end, .middle {
    width: 30px;
    height: 20px;
    margin: 0;
    padding: 0;
    border-top: solid 1px black;
    border-right: solid 1px black;
    border-bottom: solid 1px black;
}

.left-end {
  border-left: solid 1px black;
} 
```

正如[srini](https://stackoverflow.com/users/181136/srini-venigalla)指出的那样，有一些框架可以帮助实现这一点，值得研究。在各种尺寸的屏幕上跨浏览器响应式 div 布局可能很棘手，因此考虑使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)等框架是值得考虑的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:32:10.873

最好为此使用 Fluid 框架。

[http://www.1kbgrid.com/#](http://www.1kbgrid.com/#)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:49:50.960

似乎我找到了一种使用伪类的有趣方法，到目前为止我还不知道。

```
:nth-child 
```

使用这个类，您不仅可以选择块中的奇数和偶数元素，还可以选择例如每个第 3、第 6 和第 9 个元素。

[看到这个链接](http://css-tricks.com/how-nth-child-works/)

然而问题是我不知道如何使它适用于列表中的无限数量的元素。此外，它与 IE 不兼容，这使得它几乎无法使用。

# ios - 你如何定义CFBundleIcons、CFBundleIconFiles、CFBundleIconFile？

> ID：13020872
> 
> 赞同：7
> 
> 时间：2012-10-22T22:29:42.133
> 
> 标签：ios, xcode

这是我第一次向App Store提交应用程序，所以请多多包涵。我正在使用 iOS 6.0。

我已经成功完成了最后一步，我需要验证我的应用并将其提交给 Apple 进行评估，然后再将其放到 AppStore 上。但是，最后，它在验证期间给了我这个错误消息：

![在此处输入图像描述](../Images/9b5b024aa4e5b68f3643dabce821540a.png)

因此，我检查了 Info.plist 文件以确保我已包含该应用程序的所有必要图标。我确实拥有它们。

这是我的 info.plist：

![在此处输入图像描述](../Images/4f668b43778df3955dfea8e658fe5edf.png)

在“图标文件”、“图标文件”和“图标文件 (iOS 5)”下，我确实提供了一个默认的 57x57 图标、一个 iPad 图标和一个 iPhone 图标。它们位于项目文件的同一目录中。

我在这里想念什么？（我尝试添加名为“CFBundleIcons/File/Files”的条目，但没有要添加的条目）。

* * *

以下是我遵循 rmaddy 的建议后更新的 info.plist：

![在此处输入图像描述](../Images/b9b95588c55205a3be76f23dda1cc075.png)

现在所有图标文件都已正确更新为正确的尺寸（摘要选项卡上的图像上没有警告黄色三角形）。为什么我仍然收到同样的错误消息？我还想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T00:31:40.083

确保正确设置所有图标和启动图像的最简单方法是转到 Xcode 中项目目标（或多个目标）的摘要选项卡。摘要选项卡上有一个部分用于 iPhone / iPod touch 部署信息，另一个用于 iPad 部署信息。在这两个部分中的每一个中都有一个应用程序图标和启动图像的位置。单击每个并加载正确的图像。如果出现黄色警告三角形，则图像尺寸错误或可能存在其他问题。以这种方式填写所有图像将使用正确的条目正确更新您的 Info.plist。

您发布的屏幕清楚地表明您正在尝试将启动图像（Default.png）和一些屏幕截图放在您的图标所属的位置。Default.png 是启动图像。屏幕截图不会出现在您的项目中。它们在 iTunes Connect 中加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T04:05:09.967

就我而言，我通过确保 plist 文件中的名称与 General->App Icons 下的文件名称匹配来解决了这个问题。它必须有完全相同的情况

# django - 用户注册后如何保留会话信息（Django）？

> ID：13020874
> 
> 赞同：2
> 
> 时间：2012-10-22T22:29:57.607
> 
> 标签：django, session, signals, registration, django-1.4

创建新用户时，我想在他们的会话中保留一些信息

例如，用户在他们的会话中存储的东西，一旦他们注册（或登录）我想使用。

我会在用户模型上使用 post_save 信号（或 auth 登录信号），但似乎这些信号没有将请求或会话放入发送的信号中。似乎我也不能轻易地从用户那里获得会话。

我正在使用 Django 1.4

编辑：让我举个例子。

问题归结为 - 我可能想在用户登录之前保留用户活动的信息，但是在他们登录之前我应该​​在哪里存储这些信息？一个好地方是会话（或者我可以将数据库中保存的数据链接*到*会话，使用会话有点像临时用户）。

无论如何，在他们登录之前，我可以像使用用户凭据一样简单地使用他们的会话，并存储只要他们的 cookie 存在就一直存在的信息（我还能如何可靠地跟踪匿名用户？）。

但是一旦他们注册（或登录），我想将该信息从会话中正确移动到帐户中。一个很好的理由是定期删除匿名用户的数据是有意义的，而注册用户的数据将被保留。

为此，我只想从处理程序访问会话（可以通过请求）到新用户信号，因此我可以从会话中的数据进行一次性传输。但是新用户信号不持有会话（或请求）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:20:24.917

如果您正在使用`django.contrib.sessions`和`django.contrib.auth`工作，则会话数据应在[login](https://github.com/django/django/blob/master/django/contrib/auth/__init__.py#L74)后自动保留。

而且，`user_logged_in`信号实际上是随请求一起发送的。

编辑：

所以使用`user_logged_in`信号。它携带请求。选择一些特定的密钥来存储未经身份验证的用户数据（例如`"_anonymous_data"`）。如果在处理信号时将该键设置为打开`request.session`，只需在`request.user.get_profile()`对象上重写数据，调用`save`和`del request.session["_anonymous_data"]`。

The code to retreive it could look something like:

```
if request.user.is_authenticated():
    user_data = request.user.get_profile()
else:
    user_data = requerst.session["_anonymous_data"] 
```

It's only a scratch of course. You don't want to hardcode session keys or write such logic in views. If you need it application wide, embed it in some abstraction class which takes request in `__init__`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T22:37:21.223

您可以尝试使用会话：

[https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs)

# json - 确定 JSON 解析错误的位置

> ID：13020875
> 
> 赞同：7
> 
> 时间：2012-10-22T22:30:09.373
> 
> 标签：json, parsing, numbers, line

我正在创建一个允许用户以 JSON 格式加载数据的 Web 应用程序。我目前正在使用以下函数来读取我保存在本地磁盘上的 JSON 文件：

```
function retrieveJSON(url, callback)
{
  // this is needed because FireFox tries to parse files as XML
  $.ajaxSetup({ mimeType: "text/plain" });

  // send out an AJAX request and return the result
  $.getJSON(url, function(response) {
    console.log("Data acquired successfully");
    callback(response);
  }).error(function(jqXHR, textStatus, errorThrown) {
    console.log("Error...\n" + textStatus + "\n" + errorThrown);
  });
} 
```

这非常适用于格式良好的 JSON 数据。但是，对于格式错误的数据，控制台日志会显示以下内容：

```
Error...
parsererror
SyntaxError: JSON.parse: unexpected character 
```

这几乎完全没有帮助，因为它没有告诉我意外的字符是什么或可以找到它的行号。我可以使用 JSON 验证器来更正本地磁盘上的文件，但是当页面从 Web 上的远程 URL 加载文件时，这不是一个选项。

如何获取任何错误的位置？如果可能，我想获得令牌，但我至少需要获得行号。有一个项目要求向用户显示 JSON 代码的摘录并突出显示发生任何错误的行。

我目前正在使用 jQuery，但 jQuery 不是项目要求，因此如果另一个 API 或 JSON 解析器提供此功能，我可以改用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:02:10.200

是的，有最后期限的生活从来都不是一件容易的事:)。

这可能会对您有所帮助，经过几个小时的谷歌搜索，我在 Git Hub 上找到[了 jsonlint 。](https://github.com/zaach/jsonlint)它看起来很有希望，它包含一个可以在服务器端使用的[shell 脚本，并且它的](https://github.com/zaach/jsonlint/blob/master/lib/cli.js)[浏览器 JavaScript](https://github.com/zaach/jsonlint/blob/master/lib/jsonlint.js)版本似乎正是您正在寻找的。

希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-16T06:41:21.230

我同意有期限的生活是艰难的。我非常高兴我不必忍受最后期限，我是我自己的老板。

所以为了寻找更好的解决这个问题的方法，我想出了以下方法：

```
...
        readConfig : function () {
            jQuery.ajax({
                type : 'GET',
                url : 'config.json',
                success : function (data, ts, xhr) {
                    var d = JSON.parse(data);
                },
                error : function (xhr, ajaxOptions, thrownError) {
                    if (typeof thrownError.message=='string') {
                        // ./config.json contains invalid data.
                        var 
                        text = xhr.responseText,
                        pos = parseInt(thrownError.message.match(/position (\d+)/)[1]),
                        html = text.substr(0,pos)+'<span style="color:red;font-weight:bold;">__'+text.substr(pos,1)+'__</span>'+text.substr(pos+1, text.length-pos-1);
                        cm.install.displayErrorMsg('Could not read ./config.json :(<br/>'+thrownError+'<br/>'+html);
                    } else {
                        cm.install.displayErrorMsg('Error retrieving ./config.json<br/>HTTP error code : '+xhr.status);
                    };
                }
            });
        },
... 
```

# vba - 自动排序和格式化以及 Excel

> ID：13020878
> 
> 赞同：2
> 
> 时间：2012-10-22T22:30:42.737
> 
> 标签：vba, excel, ms-office, spreadsheet

我在 Excel 中有一个客户表，我希望能够将新客户添加到表格的最后一行，并且 Excel 会自动对表格进行排序，以便客户的名称按字母顺序排序。

此外，格式将类似于上一行。比如第二列是DOB，所以我希望格式和上一行MM/DD/YYYY一样

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:17:10.270

将附加的代码放入您的工作表模块中，它会自动对您的 A 列进行排序。

```
Private Sub Worksheet_Change(ByVal Target As Range)
'turn off updates to speed up code execution
With Application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
    .DisplayAlerts = False
End With

If Not Intersect(Target, Columns(1)) Is Nothing Then

    With ActiveSheet.Sort
        .SetRange Range("A1:X" & Cells(Rows.Count, 1).End(xlUp).Row)
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With

    Columns("B").NumberFormat = "MM/DD/YYYY"

End If

With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
    .DisplayAlerts = True
End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:43:29.623

这是一段 VBA，一旦输入最后一行的第一个单元格，它就会自动添加您的表格。您必须提供 IsChangeInLastLineOfStrRange 函数并从更改事件中调用 AddEmptyRowWhenFull。它可能需要调整，因为我从中删除了一些代码。原来有一个递归计时器来防止......好吧......递归。

```
Public Sub AddEmptyRowWhenFull(SheetName As String, Area As String, Target As Range)
    Dim rngDatabase As Range

    With Sheets(SheetName)
        If IsChangeInLastLineOfStrRange(SheetName, Area, Target) _
        And Target.Value <> "" Then
            Set rngDatabase = .Range(Area)
            AddEmptyRow rngDatabase, rngDatabase.Rows.Count
        End If
    End With
End Sub

Public Sub AddEmptyRow(Database As Range, RowPosition As Long, Optional ClearLine As Boolean = True)
    Dim bScreenupdate, iCalculation As Integer
    Dim colnum As Long, markrow As Long
    Dim bUpdate As Boolean

    bScreenupdate = Application.ScreenUpdating
    iCalculation = Application.Calculation

    Application.ScreenUpdating = False
    Application.Calculation = xlCalculationManual

    With Database
         If RowPosition < .Rows.Count Then
            .Rows(RowPosition - 0).Copy                     'Insert in and after data
        .Rows(RowPosition + 1).Insert shift:=xlDown
         Else
            .Rows(RowPosition - 0).Copy                     'Add line at end by inserting before last line
            .Rows(RowPosition - 0).Insert shift:=xlDown     ' to prevent cell formatting below it to be copied too
             RowPosition = RowPosition + 1                  'Clear last of the copies
         End If

         If ClearLine = False Then                          'Move cursor down
            ActiveSheet.Cells(ActiveCell.row + 1, ActiveCell.column).Activate
         Else
            For colnum = 1 To .Columns.Count                'Preserve formula's
                If Not .Rows(RowPosition).Cells(1, colnum).HasFormula Then 'changed
                       .Rows(RowPosition).Cells(1, colnum).ClearContents
                End If
            Next colnum
         End If

         'Fix rowheight if we shift into other heights

         .Rows(RowPosition + 1).RowHeight = .Rows(RowPosition + 0).RowHeight
    End With

    If bScreenupdate = True Then Application.ScreenUpdating = True
    If Not iCalculation = xlCalculationManual Then Application.Calculation = iCalculation
End Sub 
```

阿让。

# vb.net - Reportviewer1 未在 vb 2010 express windows 窗体应用程序上显示？

> ID：13020883
> 
> 赞同：0
> 
> 时间：2012-10-22T22:31:16.293
> 
> 标签：vb.net, visual-studio-2010

为什么 Reportviewer1 控件/工具栏没有显示在我机器上的 vb 2010 express windows 窗体应用程序上？

我的机器上安装了 Reportviewer.exe redistributable 2010，但是每次我在表单上拖动 reportviewer1 控件时，什么都没有发生，我的意思是，在我的应用程序表单上什么也看不到。请帮忙，我被困住了，绝望了。:(

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:59:06.120

转到您的 .Designer.vb 页面并将此代码键入/粘贴到源视图中...

```
 //
    //ReportViewer1
    //
    Me.ReportViewer1.Location = New System.Drawing.Point(0, -1)
    Me.ReportViewer1.Name = "ReportViewer1"
    Me.ReportViewer1.Size = New System.Drawing.Size(396, 246)
    Me.ReportViewer1.TabIndex = 0 
```

这应该强制您将 ReportViewer 声明到您的表单中。

**编辑 ：**

回顾您的问题时，您是否有一个用于向工具箱报告的图标？如果是这样，是否会出现 ReportViewer 对象？如果不是，您必须从 VS2010 添加它：Tools/ChooseToolboxItem/ 和 .NET 框架组件。（可能也在其他地方，但主要是在这种情况下）选择您需要的任何 CrystalReport 元素。

# javascript - 在 Node.JS 中迭代对象以获取 HTTP 响应

> ID：13020889
> 
> 赞同：1
> 
> 时间：2012-10-22T22:32:07.607
> 
> 标签：javascript, node.js, mongodb

我在 Node.JS 中有一个对象数组，我希望 response.write(); 它到屏幕上，我可以设法取出第一个对象，但循环停止并且只输出第一个对象，任何人都可以指出我正确的方向......

```
db.collection('todo', function(err, collection){            
                    collection.find(function(err, cursor) {
                        cursor.each(function(err, doc) {
                            for(docs in doc){
                                if(docs == "_id"){

                                }else{
                                    var test = docs + " : " + doc[docs];

                                }

                            }
                            data = data.toString("utf8").replace("{{TEST}}", test);
                            response.write(data);
                            response.end(); 
                        })                    
                    });
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:53:36.243

移出`response.end()`循环。那应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:55:17.497

您需要更改`response.end(data);`为`response.write(data);`

请注意，这将异步附加到流向用户的流中。

如果您打算一次将它们全部转储，您也可以尝试：

```
cursor.toArray(function (err, docs) { 
  /** run a for loop over each doc in docs **/
}) 
```

# r - 嵌套 for 循环的效率

> ID：13020892
> 
> 赞同：2
> 
> 时间：2012-10-22T22:32:24.940
> 
> 标签：r

我创建了以下代码，将 for 循环嵌套在 R 中的 for 循环内。它是计算 Power 的模拟。我读过 R 不适合做 for 循环，但我想知道是否有任何效率可以应用来使这个运行更快一点。我对 R 以及任何类型的编程都很陌生。现在我看到的运行时间是：

m=10 我得到 0.17 秒

m=100 我得到 3.95 秒

m=1000 我得到 246.26 秒

m=2000 我得到 1003.55 秒

我希望将采样次数 m 设置为 100K 以上，但我什至不敢将其设置为 10K

这是代码：

```
m = 1000                        # number of times we are going to  take samples
popmean=120                     # set population mean at 120
popvar=225                      # set known/established population 
variance at 225
newvar=144                      # variance of new methodology 
alpha=.01                       # set alpha
teststatvect = matrix(nrow=m,ncol=1)    # empty vector to populate with test statistics
power = matrix(nrow=200,ncol=1)     # empty vector to populate with power

system.time(                    # not needed - using to gauge how long this takes
    for (n in 1:length(power))          # begin for loop for different sample sizes
      for(i in 1:m){                # begin for loop to take "m" samples
      y=rnorm(n,popmean,sqrt(newvar))   # sample of size n with mean 120 and var=144
      ts=sum((y-popmean)^2/popvar)      # calculate test statistic for each sample
      teststatvect[i]=ts            # loop and populate the vector to hold test statistics
      vecpvals=pchisq(teststatvect,n)   # calculate the pval of each statistic
      power[n]=length(which(vecpvals<=alpha))/length(vecpvals) # loop to populate      power vector. Power is the proportion lessthan ot equal to alpha
        }
   }
 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:20:35.880

我重新组织了您的代码并摆脱了内部循环。

*   采样一个长的随机数向量（然后将其折叠成一个矩阵）比重复采样短向量要快得多（`replicate`正如另一个答案中所建议的那样，对可读性很有好处，但在这种情况下，您可以通过对随机数进行采样来做得更好一个块）
*   `colSums`比在`for`循环内求和或使用`apply`.
*   它只是糖（即它实际上并没有更有效），但你可以使用`mean(pvals<=alpha)`代替`sum(pvals<=alpha)/length(alpha)`
*   我定义了一个函数来返回一组指定参数（包括样本大小）的功率，然后用于`sapply`在大小向量上进行范围（不比`for`循环快，但更简洁，可能更容易概括）。

代码：

```
powfun <- function(ssize=100,
                   m=1000,      ## samples per trial
                   popmean=120, ## pop mean
                   popvar=225,  ## known/established pop variance
                   newvar=144,  ## variance of new methodology
                   alpha=0.01,
                   sampchisq=FALSE)  ## sample directly from chi-squared distrib?
{
    if (!sampchisq) {
      ymat <- matrix(rnorm(ssize*m,popmean,sd=sqrt(newvar)),ncol=m)
      ts <- colSums((ymat-popmean)^2/popvar)          ## test statistic
    } else {
      ts <- rchisq(m,df=ssize)*newvar/popvar
    }
    pvals <- pchisq(ts,df=ssize)                    ## pval
    mean(pvals<=alpha)                              ## power
} 
```

您是否真的需要样本大小的*每个*整数值的功率，或者间隔更宽的样本是否可以（如果您需要精确值，插值可能会非常准确）

```
ssizevec <- seq(10,250,by=5)
set.seed(101)
system.time(powvec <- sapply(ssizevec,powfun,m=5000))  ## 13 secs elapsed 
```

这是相当快的，如果你需要，可能会让你赶上`m=1e5`，但我不太确定为什么你需要如此精确的结果——功率曲线相当平滑`m=5000`......

如果您不耐烦地等待长时间的模拟，您还可以通过替换为来打印进度`sapply(ssizevec,powfun,m=5000)`条`library(plyr); aaply(ssizevec,.margins=1,powfun,.progress="text",m=5000)`

最后，我认为您可以通过直接采样卡方值或进行分析能力计算（！）来加速整个过程。我认为这`rchisq(m,df=ssize)*newvar/popvar`相当于循环的前两行，您甚至可以直接对卡方密度进行数值计算......

```
system.time(powvec2 <- sapply(ssizevec,powfun,m=5000,sampchisq=TRUE))
## 0.24 seconds elapsed 
```

（我刚刚尝试过，`m=1e5`以从 1 到 200 的每个样本大小值进行采样……这需要 24 秒……但我仍然认为这可能是不必要的。）

照片：

```
par(bty="l",las=1)
plot(ssizevec,powvec,type="l",xlab="sample size",ylab="power",
     xlim=c(0,250),ylim=c(0,1))
lines(ssizevec,powvec2,col="red") 
```

![在此处输入图像描述](../Images/553b098f5706a519974235fab3a96116.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:53:36.147

一般来说，您希望尽可能利用矢量化，而不是为了速度，而是为了提高可读性/理解力。

`power[n]`为什么要在内循环内部写入（我猜也是计算`vecpals`）？内循环执行后不应该在外循环中吗？您可能希望将平方根的计算移到两个循环之外。

为什么`teststatvect`和被`power`初始化为矩阵（明确地是二维数组）而不是向量（或者更确切地说，作为一维数组，使用`array`）？只是`variance at 225`上一行注释的结尾吗？您可能需要检查格式。（这是作业吗？）

对于您在这里尝试做的事情，您可能希望利用非常方便的函数`replicate`，也许通过编写一个特定的函数来调用它。

# facebook - 页面的官方 Facebook RSS 提要

> ID：13020897
> 
> 赞同：10
> 
> 时间：2012-10-22T22:32:36.657
> 
> 标签：facebook, rss

许多人描述了如何获取 Facebook 页面的 RSS 数据源。
例如：[http ://ahrengot.com/tutorials/facebook-rss-feed/](http://ahrengot.com/tutorials/facebook-rss-feed/)

以下 URL 提供可口可乐页面的提要：http:
[//www.facebook.com/feeds/page.php? format=rss20&id=40796308305](http://www.facebook.com/feeds/page.php?format=rss20&id=40796308305)

但是，我似乎在 facebook.com 上找不到任何描述此界面的文档。有谁知道这个接口是否被 Facebook 官方支持？我不想在我的代码中引用它，只是让它被 Facebook 意外删除。

我知道我可以使用 'page' 对象的 Graph API 'posts' 方法来获取类似的数据，但这需要 SSL 和访问令牌，如果可能的话，我想避免。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-25T06:41:14.403

Facebook 已更改其实现以获取 facebook 页面 RSS Feed

按照步骤获取 Facebook RSS Feed

*   创建 facebook 应用[链接](https://developers.facebook.com/docs/apps/register#create-app)

*   从上面的 App 你会得到 client_id 和 client_secret 然后调用这个 url

    [https://graph.facebook.com/oauth/access_token?client_id=client_id_value&client_secret=client_secret_value&grant_type=client_credentials](https://graph.facebook.com/oauth/access_token?client_id=client_id_value&client_secret=client_secret_value&grant_type=client_credentials)

    *将 client_id_value 和 client_secret_value 替换为其实际值*

*   从上面的 url，你会得到评估令牌，在下面的 url 中传递这个令牌来获取页面 RSS Feed

    [https://graph.facebook.com/v2.2/1242433444/feed?access_token=access_token_value](https://graph.facebook.com/v2.2/1242433444/feed?access_token=access_token_value)

*这里 1242433444 是 Facebook 页面 ID*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T15:47:29.210

似乎 Facebook 更喜欢 JSON 而不是 RSS。迄今为止，它们都支持这两种格式，但 JSON 的寿命可能会超过 RSS。如果您有兴趣，我已经创建了一些代码示例，了解如何使用 PHP 解析 JSON 提要：

[http://liljosh.com/facebook-page-json-rss-feed/](http://liljosh.com/facebook-page-json-rss-feed/)

如果页面已发布（上面链接中的第一步），则不需要访问令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:29:08.210

您不应该依赖 RSS 提要功能。

机器可读数据的最佳方法是查询`statuses`连接，例如`https://graph.facebook.com/facebook/statuses?access_token=<ACCESS_TOKEN>`.

然后，您可以解析 JSON 并将其输出为 RSS。

# python - 如何在组中显示 argparse 子命令？

> ID：13020898
> 
> 赞同：5
> 
> 时间：2012-10-22T22:32:56.470
> 
> 标签：python, argparse

对于具有许多子命令的程序，我想在 --help 输出中按逻辑分组显示它们。Python argparse 有一个[`add_argument_group`](http://docs.python.org/library/argparse.html#argparse.ArgumentParser.add_argument_group)方法，但它似乎与子解析器不兼容。subparsers 只能添加到顶层`ArgumentParser`，并且`_SubParsersAction`不允许参数组。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T02:01:33.997

除了实现 custom 之外，您无法以任何直接的方式真正做到这一点`HelpFormatter`。

[您可以在文档的这一部分中](http://docs.python.org/dev/library/argparse.html#formatter-class)`HelpFormatter`找到有关风味的更多信息。

# spring - 获取所有可用权限spring security acl

> ID：13020905
> 
> 赞同：1
> 
> 时间：2012-10-22T22:33:24.347
> 
> 标签：spring, spring-security, acl

我必须在我的应用程序中实现访问控制，并且我正在为此使用 spring ACL。我的模型有用户、组、权限。

我要解决的问题是为用户获取域对象的权限。我能够获取该用户的所有访问控制条目（主体 sid 和组 sid），并使用它通过对所有权限进行联合来获得最终的一组权限。假设组合掩码为 111，即按照 BasePermissions 中定义的权限的读取、写入和创建权限。
我现在面临的问题是我找不到任何方法来获取所有已定义基本权限的列表，以便我可以将掩码与单个权限进行比较。基本权限类似乎没有提供任何此类方法。我不想在 if-then 子句中硬编码案例，因为将来权限的数量可能会增加。

任何指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:12:32.527

您可以使用[AclPermissionEvaluator](https://github.com/SpringSource/spring-security/blob/master/acl/src/main/java/org/springframework/security/acls/AclPermissionEvaluator.java)检查权限，方法是将 Permission 实例数组作为参数传递给 hasPermission 方法。检查给定链接中的源以进行实施。

```
@Autowired
private PermissionEvaluator permissionEvaluator ;

........

Object permission = new Permission[]{permissionFactory.buildFromName("READ"),permissionFactory.buildFromName("WRITE"), permissionFactory.buildFromName("CREATE")};

permissionEvaluator.hasPermission(authentication, oid, permission); 
```

正如这个[答案](https://stackoverflow.com/questions/10866458/how-do-i-check-my-object-permissions-in-spring-security-acl-instead-of-using-has)中提到的，不要忘记在你的 spring 上下文中注册 AclPermissionEvaluator 。

**更新**：要获得用户对域对象的所有权限——

```
private SidRetrievalStrategy sidRetrievalStrategy = new SidRetrievalStrategyImpl();

.......

List<Sid> sids = sidRetrievalStrategy.getSids(authentication);
// Lookup only ACLs for SIDs we're interested in
Acl acl = aclService.readAclById(oid, sids);
List<AccessControlEntry> aces = acl.getEntries();
List<String> permissionsList = new ArrayList<String>();
for (AccessControlEntry ace : aces ) {
    permissionsList.add(ace.getPermission().getPattern());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T09:17:58.700

正如@Ravi 所说：如果使用 BasicLookupStrategy.class，则使用 JdbcAclService 类中的方法 readAclById 将不起作用。因为 LookupStrategy.readAclsById（忽略了第二个参数 sids）。我建议您编写自定义查找策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T20:24:34.253

您要做的是检查 CumulativePermission 是否具有特定权限。您可以使用以下方法进行操作：

```
public static boolean containsPermission(Permission cumulativePermission, Permission singlePermission) {
    return (cumulativePermission.getMask() & singlePermission.getMask()) == singlePermission.getMask();
} 
```

# python - 使用 Python 进行 SQL 多次插入

> ID：13020908
> 
> 赞同：5
> 
> 时间：2012-10-22T22:33:49.653
> 
> 标签：python, mysql, mysql-python

**更新**
在按照 Nathan 的建议通过 execute() 行列表之后，代码执行得更远，但仍然卡在执行函数上。错误消息如下：

```
 query = query % db.literal(args)
TypeError: not all arguments converted during string formatting 
```

所以它仍然无法正常工作。有人知道为什么现在出现类型错误吗？
**结束更新**

我有一个 .xls 格式的大型邮件列表。我正在使用 python 和 xlrd 将 xls 文件中的名称和电子邮件检索到两个列表中。现在我想把每个名字和电子邮件放入一个 mysql 数据库。我在这部分使用 MySQLdb。显然我不想为每个列表项做一个插入语句。
**这是我到目前为止所拥有的。**

```
from xlrd import open_workbook, cellname
import MySQLdb

dbname = 'h4h'
host = 'localhost'
pwd = 'P@ssw0rd'
user = 'root'

book = open_workbook('h4hlist.xls')
sheet = book.sheet_by_index(0)
mailing_list = {}
name_list = []
email_list = []

for row in range(sheet.nrows):
    """name is in the 0th col. email is the 4th col."""
    name = sheet.cell(row, 0).value  
    email =  sheet.cell(row, 4).value
    if name and email:
        mailing_list[name] = email

for n, e in sorted(mailing_list.iteritems()):
    name_list.append(n)
    email_list.append(e)

db = MySQLdb.connect(host=host, user=user, db=dbname, passwd=pwd)
cursor = db.cursor()
cursor.execute("""INSERT INTO mailing_list (name,email) VALUES (%s,%s)""",
              (name_list, email_list)) 
```

游标执行时的问题。这是错误：`_mysql_exceptions.OperationalError: (1241, 'Operand should contain 1 column(s)')`我最初尝试将我的查询放入一个 var 中，但随后它只是发出一条关于将元组传递给 execute() 的消息。

**我究竟做错了什么？这甚至可能吗？**

列表很大，我绝对不能将插入放入循环中。我查看了使用 LOAD DATA INFILE，但我真的不明白如何格式化文件或查询，当我不得不阅读 MySQL 文档时我的眼睛流血了。我知道我*可能*会使用一些在线 xls 到 mysql 转换器，但这对我来说也是一个学习练习。**有没有更好的方法**？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T22:35:55.047

您需要提供[`executemany()`](http://www.python.org/dev/peps/pep-0249/#executemany)行列表。您不需要将姓名和电子邮件分成单独的列表，只需创建一个包含两个值的列表。

```
rows = []

for row in range(sheet.nrows):
    """name is in the 0th col. email is the 4th col."""
    name = sheet.cell(row, 0).value  
    email =  sheet.cell(row, 4).value
    rows.append((name, email))

db = MySQLdb.connect(host=host, user=user, db=dbname, passwd=pwd)
cursor = db.cursor()
cursor.executemany("""INSERT INTO mailing_list (name,email) VALUES (%s,%s)""", rows) 
```

`executemany()`更新：正如@JonClements 提到的，它不应该是`execute()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T23:47:51.907

要修复`TypeError: not all arguments converted during string formatting`- 您需要使用该`cursor.executemany(...)`方法，因为它接受一个可迭代的元组（多行），而`cursor.execute(...)`期望参数是单行值。

执行命令后，您需要确保事务已提交，以便使用`db.commit()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-29T08:31:35.783

如果您对代码的高性能感兴趣，这个答案可能会更好。

与 `excutemany`方法相比，以下方法`execute`会更快：

```
INSERT INTO mailing_list (name,email) VALUES ('Jim','jim@yahoo.com'),('Lucy','Lucy@gmail.com') 
```

您可以轻松地从@Nathan Villaescusa 修改答案并获取新代码。

```
cursor.execute("""INSERT INTO mailing_list (name,email) VALUES (%s)""".format(",".join(str(i) for i in rows)) 
```

这是我自己的测试结果：

```
excutemany:10000 runs takes 220 seconds

execute:10000 runs takes 12 seconds. 
```

速度差异约为15倍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-02T10:14:26.517

采用@PengjuZhao 的想法，它应该可以简单地为所有要传递的值添加一个占位符。@PengjuZhao 答案的不同之处在于，这些值作为第二个参数传递给 execute() 函数，这应该是注入攻击安全的，因为这只在运行时评估（与“.format()”相反）。

`cursor.execute("""INSERT INTO mailing_list (name,email) VALUES (%s)""", ",".join(str(i) for i in rows))`

仅当这不能正常工作时，请尝试以下方法。

####

@PengjuZhao 的回答表明，***executemany() 要么具有强大的 Python 开销，要么在不需要的地方使用多个 execute() 语句***，否则 executemany() 不会比单个 execute() 语句慢太多。

这是一个将 NathanVillaescusa 和 @PengjuZhao 的答案放在单个 execute() 方法中的函数。

该解决方案构建动态数量的占位符以添加到 sql 语句中。它是一个手动构建的 execute() 语句，具有多个“%s”占位符，它的性能可能优于 executemany() 语句。

例如，在 2 列，插入 100 行：

*   execute(): 200 次 "%s" (= 取决于行数)
*   executemany(): 仅 2 次 "%s" (= 与行数无关)。

**该解决方案有可能具有@PengjuZhao 的答案的高速而不冒注入攻击的风险。**

1.  准备函数的参数：

您将值存储在一维 numpy 数组`arr_name`中，`arr_email`然后逐行转换为串联值列表。或者，您使用@NathanVillaescusa 的方法。

```
from itertools import chain

listAllValues = list(chain([
arr_name.reshape(-1,1), arr_email.reshape(-1,1)
]))

column_names = 'name, email'

table_name = 'mailing_list' 
```

2.  使用占位符获取 sql 查询：

简单地`numRows = int((len(listAllValues))/numColumns)`避免传递行数。如果您在 listAllValues 的 2 列中插入 6 个值，那么显然会产生 6/2 = 3 行。

```
def getSqlInsertMultipleRowsInSqlTable(table_name, column_names, listAllValues):
    numColumns = len(column_names.split(","))
    numRows = int((len(listAllValues))/numColumns)

    placeholdersPerRow = "("+', '.join(['%s'] * numColumns)+")"
    placeholders = ', '.join([placeholdersPerRow] * numRows)

    sqlInsertMultipleRowsInSqlTable = "insert into `{table}` ({columns}) values {values};".format(table=table_name, columns=column_names, values=placeholders)

    return sqlInsertMultipleRowsInSqlTable

strSqlQuery = getSqlInsertMultipleRowsInSqlTable(table_name, column_names, listAllValues) 
```

3.  执行 strSqlQuery

最后一步：

```
db = MySQLdb.connect(host=host, user=user, db=dbname, passwd=pwd)
cursor = db.cursor()
cursor.execute(strSqlQuery, listAllValues) 
```

该解决方案希望不会像@PengjuZhao 的回答那样存在注入攻击的风险，因为它仅使用占位符而不是值填充 sql 语句。`listAllValues`值此时仅在此处单独传递，其中`strSqlQuery`只有占位符而不是值：

```
cursor.execute(strSqlQuery, listAllValues) 
```

execute() 语句获取***带有占位符 %s 的 sql 语句***和两个单独参数***中的值列表***，就像在@NathanVillaescusa 的回答中所做的那样。***我仍然不确定这是否可以避免注入攻击。据我了解，只有将值直接放在sql语句中才会发生注入攻击，如果我错了，请发表评论。***

# html - 使用 PHP 发送的电子邮件有间歇性缺失部分

> ID：13020911
> 
> 赞同：2
> 
> 时间：2012-10-22T22:34:09.640
> 
> 标签：html, email, php

我有一个测试程序，可以将用户的答案和评分记录到日志文件中。我还将它以格式精美的 html 电子邮件通过电子邮件发送给测试管理员。

在大多数情况下，这个系统是有效的。但是我注意到不同的电子邮件客户端正在删除部分代码。这是一个表格，所以很多代码非常重复，每个电子邮件客户端每次删除的部分都是相同的（我测试过的都是outlook和gmail）。例如，如果我有一部分表格：

```
<tr><td style="background:#a66;text-align:center">This is the answer</td></tr> 
```

然后它可能会出现：

```
<tr><td style="backgrouter">This is the answer</td></tr> 
```

而且我找不到它在每个文件中执行此操作的位置之间的任何关联。有时接近尾声，有时接近开始。在某些情况下，如果测试特别长，它甚至不会完成电子邮件。

我让我的 php 将完全相同的 html 输出到服务器上的日志文件中，而且结果总是很完美。

这是怎么回事？我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-01T07:34:05.597

我认为这是因为 MIME 电子邮件每行 998 个字符的限制。

有关更多详细信息，您可以查看以下帖子：

[按照 RFC 2045 的定义，推理 76 是 MIME 部分的行长度限制？](https://stackoverflow.com/questions/4994447/reasoning-behing-76-being-the-line-length-limit-for-mime-sections-as-defined-by)（见appleleaf的回答）

[长行的 HTML 安全换行](https://stackoverflow.com/questions/5498883/html-safe-wrapping-of-long-lines)

我的解决方案是在 HTML 标记之间添加“\r\n”，这样每行不会超过 998 个字符。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:47:15.033

恐怕你的问题有更深层次的问题。

这些客户处理数据的方式有些晦涩难懂，最终重复地从同一个电子邮件地址发送邮件以将其渲染为来自其他邮件的引用。

我建议您检查邮件的 html 一致性，并阅读支持的电子邮件 html。

还要确保您的电子邮件标题说它是 html 格式的电子邮件，而不是纯文本。标题中的格式也很重要，我会命令 utf8

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:43:08.480

我想尝试的一件事是`!important`在每个 CSS 语句中附加一个。

```
<td style="background:#a66 !important;text-align:center !important"> 
```

哦，刚刚注意到你错过了一个 close `;`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T22:44:02.227

这很奇怪！

好的，首先，您是否尝试过间隔和终止所有样式？例如：

```
<tr><td style="background-color: #aa6666; text-align: center;"> 
```

其次，Gmail 可能会采用一些奇怪的 HTML 解释，尽管我想不出发生这种情况的原因（例如样式名称或保留函数名称等）。

否则，我难住了。我只见过雅虎邮件发生这种情况，电子邮件中的 HTML 破坏了雅虎邮件的布局......

我很想使用 css 类并在样式标签中设置它们的样式。我从来没有见过他们打破。

# asp.net-mvc-3 - ASP.NET MVC3 ValueProvider 将字符串输入拖放到双属性

> ID：13020919
> 
> 赞同：1
> 
> 时间：2012-10-22T22:34:55.633
> 
> 标签：asp.net-mvc-3, model-binding, value-provider

我正在尝试验证与`double`模型中类型属性相对应的文本框的输入。如果用户输入`"foo"`我想知道它，那么我可以显示一个错误。但是，`ValueProvider`正在默默地删除值（没有错误添加到`ModelState`）。

在正常的提交中，我填写`"2"`对应的文本框`myDouble`并提交表单。检查`controllerContext.HttpContext.Request.Form`表明`myDouble=2`，以及其他正确的输入。`bindingContext.ValueProvider.GetValue("myDouble") == 2`，正如预期的那样。`bindingContext.ModelState.Count == 6`和`bindingContext.ModelState["myDouble"].Errors.Count == 0`。_ 一切都很好，模型按预期绑定。

然后我在对应的文本框中填写“foo”`myDouble`并提交表单。检查`controllerContext.HttpContext.Request.Form`表明`myDouble=foo`，这是我所期望的。然而，`bindingContext.ValueProvider.GetValue("myDouble") == null`和`bindingContext.ModelState.Count == 5`（确切的数字并不重要，但它比以前少一个）。查看`ValueProvider`, 就好像`myDouble`从未提交过，并且模型绑定就像没有提交一样。这使得很难区分错误输入和无输入。

这是预期的行为`ValueProvider`吗？有没有办法`ValueProvider`在转换失败而不实现自定义时进行报告`ValueProvider`？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:48:08.237

这里的部分问题是您的模型具有`double`.

问题是`double`不能为null，因此默认值为0，因此在提交时..如果`ValueProvider`返回null，该字段的值仍然为0并且验证将通过。

您应该通过使用然后向该属性添加一个Required 属性来使该属性可以为`double`空。`double?`如果不需要类型，则可以添加正则表达式验证器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:58:45.413

您可以通过实现 IModelBinder 来实现自定义模型绑定逻辑。这会将数据验证逻辑置于模型绑定级别 - 因此可用于任何类型的 ValueProvider。在您的情况下，模型绑定器将确定当 myDouble = "foo" 不是双精度时，并向显示无效值的 ModelState 错误添加异常。

```
public class CustomDoubleBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        if (controllerContext == null)
        {
            throw new ArgumentNullException("controllerContext");
        }
        if (bindingContext == null)
        {
            throw new ArgumentNullException("bindingContext");
        }
        decimal tempDouble = 0m;
        if (bindingContext.ValueProvider.GetValue(bindingContext.ModelName) != null)
        {
            if (double.TryParse(bindingContext.ValueProvider.GetValue(bindingContext.ModelName).AttemptedValue, out tempDecimal))
            {
                bindingContext.ModelState[bindingContext.ModelName].Errors.Add("Error parsing double value: " + bindingContext.ValueProvider.GetValue(bindingContext.ModelName).AttemptedValue);
            }
        }

        return tempDouble;
    }
} 
```

创建此自定义模型绑定器后，您需要在 Global.asax 中注册它：

```
protected void Application_Start()
{
   ModelBinders.Binders[typeof(double)] = new CustomDoubleBinder();
} 
```

# java - 为什么我不能将十六进制值放入 java 中的字节数组？

> ID：13020920
> 
> 赞同：25
> 
> 时间：2012-10-22T22:34:58.123
> 
> 标签：java, byte

我的代码如下所示：

```
public byte s[] = {
        0x63, 0x7C, 0x77, 0x7B, 0xF2, 0x6B, 0x6F, 0xC5, 0x30, 0x01, 0x67, 0x2B, 0xFE, 0xD7, 0xAB, 0x76,
        0xCA, 0x82, 0xC9, 0x7D, 0xFA, 0x59, 0x47, 0xF0, 0xAD, 0xD4, 0xA2, 0xAF, 0x9C, 0xA4, 0x72, 0xC0,
        0xB7, 0xFD, 0x93, 0x26, 0x36, 0x3F, 0xF7, 0xCC, 0x34, 0xA5, 0xE5, 0xF1, 0x71, 0xD8, 0x31, 0x15,
        0x04, 0xC7, 0x23, 0xC3, 0x18, 0x96, 0x05, 0x9A, 0x07, 0x12, 0x80, 0xE2, 0xEB, 0x27, 0xB2, 0x75,
        0x09, 0x83, 0x2C, 0x1A, 0x1B, 0x6E, 0x5A, 0xA0, 0x52, 0x3B, 0xD6, 0xB3, 0x29, 0xE3, 0x2F, 0x84,
        0x53, 0xD1, 0x00, 0xED, 0x20, 0xFC, 0xB1, 0x5B, 0x6A, 0xCB, 0xBE, 0x39, 0x4A, 0x4C, 0x58, 0xCF,
        0xD0, 0xEF, 0xAA, 0xFB, 0x43, 0x4D, 0x33, 0x85, 0x45, 0xF9, 0x02, 0x7F, 0x50, 0x3C, 0x9F, 0xA8,
        0x51, 0xA3, 0x40, 0x8F, 0x92, 0x9D, 0x38, 0xF5, 0xBC, 0xB6, 0xDA, 0x21, 0x10, 0xFF, 0xF3, 0xD2,
        0xCD, 0x0C, 0x13, 0xEC, 0x5F, 0x97, 0x44, 0x17, 0xC4, 0xA7, 0x7E, 0x3D, 0x64, 0x5D, 0x19, 0x73,
        0x60, 0x81, 0x4F, 0xDC, 0x22, 0x2A, 0x90, 0x88, 0x46, 0xEE, 0xB8, 0x14, 0xDE, 0x5E, 0x0B, 0xDB,
        0xE0, 0x32, 0x3A, 0x0A, 0x49, 0x06, 0x24, 0x5C, 0xC2, 0xD3, 0xAC, 0x62, 0x91, 0x95, 0xE4, 0x79,
        0xE7, 0xC8, 0x37, 0x6D, 0x8D, 0xD5, 0x4E, 0xA9, 0x6C, 0x56, 0xF4, 0xEA, 0x65, 0x7A, 0xAE, 0x08,
        0xBA, 0x78, 0x25, 0x2E, 0x1C, 0xA6, 0xB4, 0xC6, 0xE8, 0xDD, 0x74, 0x1F, 0x4B, 0xBD, 0x8B, 0x8A,
        0x70, 0x3E, 0xB5, 0x66, 0x48, 0x03, 0xF6, 0x0E, 0x61, 0x35, 0x57, 0xB9, 0x86, 0xC1, 0x1D, 0x9E,
        0xE1, 0xF8, 0x98, 0x11, 0x69, 0xD9, 0x8E, 0x94, 0x9B, 0x1E, 0x87, 0xE9, 0xCE, 0x55, 0x28, 0xDF,
        0x8C, 0xA1, 0x89, 0x0D, 0xBF, 0xE6, 0x42, 0x68, 0x41, 0x99, 0x2D, 0x0F, 0xB0, 0x54, 0xBB, 0x16
    }; 
```

Netbeans 告诉我：

> 可能的精度损失 - 所需字节，找到 int

我究竟做错了什么？如果我使用 short 而不是 int 它可以正常工作。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-22T22:38:59.967

Byte 是 Java 中的有符号数据类型。它可以取值从 -128 (-0x80) 到 127 (0x7f)。您的某些常量不适合此范围，因此不是有效`byte`的。这与 C++ 不同，C++ 通常将 BYTE 定义为`unsigned char`. 此外，Java 对精度损失的数据类型转换更加严格。

所以 0xF2 不是一个有效的`byte`文字。这是一个有效的`short`and 。Java 对类似的值采用了负十六进制文字的疯狂概念。一个负的十六进制文字是.`int``long``0xF2``-0x0e`

根据您的情况，使用更大的数据类型，或使用内联转换（如`(byte)0xF2`），或使用 Excel 之类的东西将值 0x80 及更多的文字转换为负十六进制表示。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-22T22:41:38.697

Java 中的字节（作为所有原始数字类型）是有**符号**的。

字节值的有效范围是 -128 到 127。

因此，没有与整数`0xFF`=具有相同值的字节`255`，但您需要一个强制转换，这是您的编译器警告您的内容。请注意， 255 实际上会变成`-1`.

自己试试下面的代码：

```
byte test = (byte) 0xFF;
System.out.println(test == 0xFFFFFFFF); // True: -1 == -1 (as int)
System.out.println((byte)0xFF == 0xFFFFFFFF); // True: -1 == -1 (as int)
System.out.println(0xFF == (byte) 0xFFFFFFFF); // False: +255 != -1 (as int)
System.out.println((byte)0xFF == (byte) 0xFFFFFFFF); // True: -1 == -1 (as byte)
byte warn = (byte) 0xFF; // "error: possible loss of precision" unless cast
byte nowarn = -0x1; // No error. -0x1 is a *valid* byte in Java!
System.out.println(warn == nowarn); // True: -1 == -1 (as bytes)
System.out.println((int)warn == (int)nowarn); // True: -1 == -1 (as int, too) 
```

如所示，这应该打印`true`, `true`, `false`, `true`, 。`true``true`

您**必须**意识到，`==`当应用于 时`byte == int`，将（有符号）字节转换为（有符号）整数，`byte -1`当然应该成为`int -1`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T22:46:14.227

作为替代方案，在 Java 7 中，您以二进制表示法编写字节文字。例如。`0b101`是 5。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-09-12T03:48:43.977

只需转换每个字节：

```
byte a[]={(byte)0x01,(byte)0x01,(byte)0x01,} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T06:27:07.613

我们可以使用 0X7F 代替 0XFF 并按照以下代码进行操作

```
byte[] ba = new byte[charArray.length*2];
int j = 0;
byte mask = (byte) 0x7f;
System.out.println("mask value is:" + mask);

for (int i = 0; i < charArray.length; ++i, j+=2) {
    byte upper8bits = (byte) ((byte)(charArray[i] >> (1<<3)) & mask);
    byte lower8bits = (byte) ((byte) charArray[i] & mask);
    ba[j] = upper8bits;
    ba[j+1] = lower8bits;
    System.out.println("byte[]:" + Integer.toHexString(ba[j+1]));
} 
```

# c# - 通过互操作为 Microsoft Access 创建宏

> ID：13020923
> 
> 赞同：3
> 
> 时间：2012-10-22T22:35:31.620
> 
> 标签：c#, ms-access, macros, office-interop

是否可以使用 Microsoft Access 中的 Interop 库以与 Word、Excel 或 PowerPoint 类似的方式使用 C# 创建新宏？在其他应用程序中，您可以访问`Microsoft.Vbe.Interop._VBComponent`，它允许您通过 、 或 类注入新`Document`的`Worksheet`宏`Presentation`。看起来 Access 没有类似的东西。Access 有一个`AllMacros`列表，但它似乎是只读的。我知道如何在项目中执行宏，但我需要能够动态添加宏。我将不胜感激任何可以指出我正确方向的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T18:18:03.083

由于HK1的回答，我能够完全按照我的需要去做。我想发布我的代码，因为几乎没有关于如何执行此操作的信息。我会将 HK1 的帖子标记为答案，因为他是导致我这样做的原因。

**通过 Interop 以编程方式将 VB 模块添加到 MS-Access**

```
try
{
    Microsoft.Office.Interop.Access.Application accessApp = new Microsoft.Office.Interop.Access.Application();
    accessApp.Visible = true;

    accessApp.OpenCurrentDatabase(filePath);

    // Get the active VBProject item
    VBProject project = accessApp.VBE.VBProjects.Item(1);

    VBComponent module = project.VBComponents.Add(vbext_ComponentType.vbext_ct_StdModule);

    module.CodeModule.AddFromString(script);
}
catch (Exception ex)
{
    // Trust or the VBA Project Module has not been enabled.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T00:15:00.413

取自 answers.microsoft.com：

*Access 中的宏是一种特殊的数据库对象，这与其他 Office 应用程序中的宏只是不带参数的 VBA 过程不同。据我所知，您无法以编程方式创建 Access 宏。* ***-HansV MVP（2011 年 4 月 27 日）***

在[同一个问题](http://answers.microsoft.com/en-us/office/forum/officeversion_other-customize/how-to-programmatically-create-a-ms-access-macro/177cf24e-5870-e011-8dfc-68b599b31bf5?msgId=c46f263f-9270-e011-8dfc-68b599b31bf5)上发布了另一个答案，说您可以使用 VB 可扩展性库创建新的代码/VBA 对象。

# ruby - 如何使用 activeresource 解析嵌套的 json 属性

> ID：13020924
> 
> 赞同：1
> 
> 时间：2012-10-22T22:35:33.173
> 
> 标签：ruby, json, rest, activeresource, padrino

我正在尝试通过来自 rest-api的[padrino框架中的 activeresource 解析以下 jsons 响应：](http://www.padrinorb.com/)

```
{"result":"Ok","resource":"ProjectRazor::Slice::Model","errcode":0,"command":"models_query_all","response":[{"@uri":"http://192.168.0.50:8026/razor/api/model/5nBqgTngqvxPIxVJJpdeQm","@callback":{},"@version":2,"@uuid":"5nBqgTngqvxPIxVJJpdeQm","@description":"Ubuntu Precise Model","@domainname":"andreasheumaier.de","@counter":0,"@broker_plugin":"agent","@root_password":"/7bbNwa6","@log":[],"@policy_bound":null,"@hostname_prefix":"firebird","@classname":"ProjectRazor::ModelTemplate::UbuntuPrecise","@osversion":"precise","@is_template":false,"@final_state":"os_complete","@node":null,"@req_metadata_hash":{"@domainname":{"validation":"^[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9](\\.[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])*$","example":"example.com","required":true,"description":"local domain name (will be used in /etc/hosts file)","default":"localdomain"},"@root_password":{"validation":"^[\\S]{8,}","example":"P@ssword!","required":true,"description":"root password (> 8 characters)","default":"test1234"},"@hostname_prefix":{"validation":"^[a-zA-Z0-9][a-zA-Z0-9\\-]*$","example":"node","required":true,"description":"node hostname prefix (will append node number)","default":"node"}},"@hidden":false,"@name":"ubuntu_precise","@label":"install_precise","@current_state":"init","@result":null,"@template":"linux_deploy","@noun":"model","@image_prefix":"os","@image_uuid":"4VuDj4mJDHP6bvWeztfXOO"}],"http_err_code":200} 
```

我定义了这个模型

```
class RazorJsonFormatter
  include ActiveResource::Formats::JsonFormat

  def decode(json)
    ActiveResource::Formats::JsonFormat.decode(json)['response']
 end  
end

class Razor < ActiveResource::Base
  include ActiveResource::Formats::JsonFormat
  include ActiveResource::Extend::WithoutExtension

  self.format = RazorJsonFormatter.new
  self.site = "http://yellowbird:8026/razor/api/"
end
class RazorModel < Razor
  set_collection_name 'model'    
end 
```

这会产生以下错误：

```
RazorModel.all
NameError: wrong constant name @callback
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:1428:in `const_defined?'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:1428:in `find_or_create_resource_for'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:1278:in `block in load'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:1264:in `each'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:1264:in `load'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:1006:in `initialize'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:933:in `new'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:933:in `instantiate_record'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:929:in `block in instantiate_collection'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:929:in `collect!'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:929:in `instantiate_collection'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:901:in `find_every'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:814:in `find'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:826:in `first'
    from (irb):27
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/padrino-core-0.10.7/lib/padrino-core/cli/base.rb:68:in `console'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.15.4/lib/thor/task.rb:27:in `run'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.15.4/lib/thor/invocation.rb:120:in `invoke_task'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.15.4/lib/thor.rb:275:in `dispatch'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.15.4/lib/thor/invocation.rb:109:in `invoke'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/padrino-core-0.10.7/lib/padrino-core/cli/base.rb:73:in `c'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.15.4/lib/thor/task.rb:27:in `run'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.15.4/lib/thor/invocation.rb:120:in `invoke_task'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.15.4/lib/thor.rb:275:in `dispatch'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.15.4/lib/thor/base.rb:425:in `start'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/gems/padrino-core-0.10.7/bin/padrino:9:in `<top (required)>'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/bin/padrino:19:in `load'
    from /home/aheumaier/.rvm/gems/ruby-1.9.3-p194/bin/padrino:19:in `<main>'1.9.3p194
(...) 
```

这可以与预定义的 ActiveResource 模式一起使用。[我目前的解决方法是使用rest-client](http://www.padrinorb.com/https://github.com/archiloque/rest-client)从头开始​​编写所有类

如何使用 activeresource 解析 - 或忽略 - 嵌套的 json 属性？

# java - 外部类成员变量 Null 到内部类

> ID：13020927
> 
> 赞同：0
> 
> 时间：2012-10-22T22:35:58.540
> 
> 标签：java, inner-classes, private-members, jmonkeyengine, nifty-gui

我正在使用 JME3 和 Nifty GUI 开发游戏。我有一个外部类，它有一个`Nifty`成员变量。无论访问修饰符如何，内部类都应该能够访问该变量。在构造函数中，我为其分配了一个新`Nifty`对象。但是，当我在内部类中访问该变量时，我遇到了问题。我做了一点调试，发现这是因为内部类认为`Nifty`成员变量为空，我不知道为什么。它在外部类中不为空。由于这是一个 JME3 游戏，我试图让内部类实现`AppState`接口，但它仍然将`Nifty`成员变量显示为 null。这是代码：

```
public class MenuScreen extends SimpleApplication {

/** Used to configure Nifty GUI. */
private Nifty mNifty;

private NiftyJmeDisplay mNiftyDisplay;

private Element popup;

//*******************
// Overridden medhods
//*******************

/** This method is used to initialize everything needed to display the game screen. */
@Override
public void simpleInitApp() {
    guiNode.detachAllChildren();

    initNifty();

    flyCam.setDragToRotate(true);
}

/**
 * The game's main update loop.
 * 
 * @param tpf Time Per Fram, the time it takes each loop to run.
 */
@Override
public void simpleUpdate(float tpf) {
    // not used
}

@Override
public void simpleRender(RenderManager rm) {
    // not used
}

public static void main(String[] args) {
    MenuScreen app = new MenuScreen();
    app.start();
}

/**
* Helper method to initialize and configure Nifty GUI.
*/
private void initNifty() {        
    mNiftyDisplay = new NiftyJmeDisplay(assetManager, inputManager, audioRenderer, guiViewPort);
    mNifty = mNiftyDisplay.getNifty();

    guiViewPort.addProcessor(mNiftyDisplay);

    // If this is being run on a desktop then load the desktop main menu.
    if (Strings.OS_NAME.contains("windows") || Strings.OS_NAME.contains("mac") || Strings.OS_NAME.contains("linux")) {
        mNifty.fromXml("Interface/XML/DesktopMenuScreenGui.xml", "start", new MenuScreen().new MenuScreenGui());
    }
    // If its an Android device load the mobile main menu.
    else if (Strings.OS_NAME.contains("android")) {
        mNifty.fromXml("Interface/XML/MobileMenuScreenGui.xml", "mobile", new MenuScreen().new MenuScreenGui());
    }
}

//**************
// Inner Classes
//**************

/**
 * © Jason Crosby 2012 <p>
 * 
 * This class handles all the GUI interactions like button clicks.
 * 
 * @author Jason Crosby
 */
public class MenuScreenGui implements ScreenController, EventTopicSubscriber<MenuItemActivatedEvent>,
                                      AppState {

    @Override
    public void initialize(AppStateManager stateManager, Application app) {

    }
@Override
    public void cleanup() {

    }

    @Override
    public boolean isEnabled() {
        return false;
    }

    @Override
    public boolean isInitialized() {
        return false;
    }

    @Override
    public void postRender() {

    }

    @Override
    public void setEnabled(boolean active) {

    }

    @Override
    public void stateAttached(AppStateManager stateManager) {

    }

    @Override
    public void stateDetached(AppStateManager stateManager) {

    }

    @Override
    public void render(RenderManager rm) {

    }

    @Override
    public void update(float tpf) {

    }
    @Override
    public void bind(Nifty nifty, Screen screen) {
        // not used
    }

    @Override
    public void onEndScreen() {
        // not used
    }

    @Override
    public void onStartScreen() {
        // not used
    }

    @Override
    public void onEvent(String string, MenuItemActivatedEvent t) {

    }

    //**************
    // Class methods
    //**************

    /**
     * Called when the play button is clicked.
     */
    public void playButton() {

    }

    /**
     * Called when the high scores button is clicked.
     */
    public void highScoresButton() {

    }

    /**
     * Called when the settings button is clicked.
     */
    public void settingsButton() {

    }
    public void quitButton() {
        showDialog();
    }

    /**
     * Called when the rate button is clicked. Only Available on mobile.
     */
    public void rateButton() {

    }

    /**
     * Called when the feedback button is clicked. Only on mobile devices.
     */
    public void feedbackButton() {

    }

    /**
     * Called when the help button is clicked.
     */
    public void helpButton() {

    }

    /**
     * Called when the dialog needs to be shown.
     */
    public void showDialog() {
        System.out.println("WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW");
        popup = new Nifty().createPopup("popup");
        System.out.println("ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ");
        //Menu myMenu = popup.findNiftyControl("#menu", Menu.class);
        //myMenu.setWidth(new SizeValue("100px")); // must be set
        //myMenu.addMenuItem("Click me!", new menuItem("menuItemid", "blah blah")); // menuItem is a custom class
        //mNifty.subscribe(mNifty.getCurrentScreen(), myMenu.getId(), MenuItemActivatedEvent.class, this);
        mNifty.showPopup(mNifty.getCurrentScreen(), popup.getId(), null); 
    }

    public void clsoseDialog() {

    }

    /**
     * Used to return a String to the Nifty xml file.
     * 
     * @param name The name key associated with the String.
     * @return The String associated with the key.
     */
    public String getString(String name) {
        if (name.equals("play")) {
            return Strings.PLAY_BUTTON;
        }
        else if (name.equals("high_score")) {
            return Strings.HIGH_SCORES_BUTTON;
        }
        else if (name.equals("settings")) {
            return Strings.SETTINGS_BUTTON;
        }
        else if (name.equals("quit")) {
            return Strings.QUIT_BUTTON;
        }
        else if (name.equals("rate")) {
            return Strings.RATE_BUTTON;
        }
        else if (name.equals("feedback")) {
            return Strings.FEEDBACK_BUTTON;
        }
        else if (name.equals("rules")) {
            return Strings.RULES_BUTTON;
        }
        return null;
    }
}
} 
```

发生的事情是我单击调用该`quitButton()`方法的退出按钮。这很好用。这反过来又会引发`showDialog()`问题所在。在`showDialog()`方法中是这一行`popup = new Nifty().createPopup("popup");`，它在`mNifty`不应该为空的那一行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:41:43.847

线

```
popup = new Nifty().createPopup("popup"); 
```

不使用`mNifty`。它创建一个新实例，`Nifty`然后调用`creatPopup()`这个新实例。`mNifty`从前面开始，您通过调用看起来像工厂方法的东西进行初始化

```
mNifty = mNiftyDisplay.getNifty(); 
```

`Nifty`获取via很可能`new`不会返回完全初始化的实例。由于您尚未发布代码，`Nifty`因此尚不清楚发生了什么。

我会仔细检查以确保创建`Nifty`via`new`将返回一个完全初始化的实例，并且您真的想要一个新实例。

# javascript - HTML 不调用 Javascript onclick

> ID：13020929
> 
> 赞同：1
> 
> 时间：2012-10-22T22:36:10.007
> 
> 标签：javascript, xhtml

我很难弄清楚这些文件有什么问题。Firebug 会加载 HTML 和 .js 文件，但是当您按下 HTML 文件上的按钮时，它不会执行任何操作。在 firebug 中放置断点表明 .js 代码没有与 HTML 文件对话。我不知道 Javascript 是否因为代码中的其他内容而无法工作，或者我在 HTML 文件中有一个非常愚蠢的错误。谢谢你的帮助。

HTML 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Dice Roller</title>
<style type="text/css">
@import "main.css";
</style>
<script type="text/javascript" src="roller.js"></script>
<script type="text/javascript" src="roller_library.js"></script>

</head>
<body>
<div id="content">

<h1>Dice Roller</h1><br/><br/>
Die 1: <span id="die_1">&nbsp;</span><br /><br />
Die 2: <span id="die_2">&nbsp;</span><br /><br />
<label>Message: </label>
<span id="message">&nbsp;</span><br/><br />
<label>&nbsp;</label>
<input type="button" id="roll" value="Roll the Dice" /> <br/>

</div>
</body>
</html> 
```

滚筒.js

```
var die = new Die();
var pairofDice = PairofDice();

var $ = function (id) { return document.getElementById(id); }

var update_display = function() {
var specialMsg;
var die_1 = ParseInt(Die.getValue1());
var die_2 = ParseInt(Die.getValue2());
 $("die_1").value = die_1;
 $("die_2").value = die_2;

var sum = PairofDice.getSum(die_1, die_2);
switch (sum){
    case "2":
        specialMsg = "Snake eyes"
        break;
    case "7":
        specialMsg = "Craps";
        break;
    case "12":
        specialMsg = "Box Cars";
        break;
    }

 $("message").value = specialMsg;
}

var rollDice_click = function() {
 $("die_1").value = "";
 $("die_2").value = "";

 update_display();
}

window.onload = function() {
$("roll").onclick = rollDice_click;
} 
```

roll_library.js

```
var Die = function(sides) {
this.sides = 6;
return this;
}
Die.prototype.roll = function(sides) {
this.sides = sides;
do{
    number = parseInt (10 * Math.random());
} while (number >this.sides || number <1);

return number;
}
Die.prototype.getValue = function() {
this.roll = Die.roll();
return this;
}

var PairofDice = function(sides) {
this.sides = 6;
return this;
}
PairofDice.prototype.roll = function() {
Die.roll(6);
return number;
}
PairofDice.prototype.getValue1 = function() {
Die.getValue();
return;
}
PairofDice.prototype.getValue2 = function() {
Die.getValue();
return;
}
PairofDice.prototype.getSum = function(d1,d2) {
var sum;

var die1 = parseInt(d1);
var die2 = parseInt(d2);

sum = die1 + die2;

return sum;
} 
```

另一种选择是我不明白我应该做什么，如果是这种情况，请告诉我，以便我可以获得更多一对一的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:16:30.373

在roller_library.js 加载之前roller.js 正在运行，因此当在roller.js 的第1 行使用Die 时，没有定义Die 和PairOfDice。因此，roller.js JavaScript 在该点失败并中止，并且 window.onload 行永远不会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:43:11.920

好的，所以我完全跳过了 onclick 问题，所以我更深入地查看了代码。有几个问题，代码甚至不会运行，即使 onclick 不起作用。所以，我修复了它并添加了一些注释，如果你将它与你的代码进行比较，它们可能会帮助你找出问题所在。这绝不是最佳实践代码，我只是尝试将您的代码想法转化为工作代码，希望您可以从中学习。

请让我知道它是否有帮助或者您需要任何澄清:)

```
// Can't do this at the start of the script as they are undefined
//var die = new Die();
//var pairofDice = PairofDice();

// This is a good idea
var $ = function(id) {
    return document.getElementById(id);
}

// Let's include the model code ahead of the application code
// Our Die, when rolled it should have update it's value
var Die = function(sides) {
    // Let's use the parameter to decide how many sides our die has
    // " || 6" means that if sides has no value, it will default to 6
    // This helps us prevent errors from having no number of sides
    // defined when we roll the dice
    this.sides = sides || 6;

    // We will be able to access the value from elsewhere, but let's give
    // it an initial random value!
    this.value = this.roll();

    return this;
}

// Extending our Die's prototype to allow rolling!
// We don't need the sides parameter anymore, compare this old version
Die.prototype.old_roll = function(sides) {
    // This would remove any value we have previously assigned to sides
    this.sides = sides;
    // This loop will create a bias in the random numbers generated and if
    // the number of sides is greater than 10, it will never show it
    do {
        number = parseInt(10 * Math.random());
    } while (number > this.sides || number < 1);

    return number;
}

// Cleaner version of roll
Die.prototype.roll = function() {
    // Get a random number [ This will be a decimal number between 0 and 1]
    var random_number = Math.random()
    // Multiply it by (#no of sides - 1) 
    // [This will be a decimal value between 0 and the (#no of sides - 1)]
    var scaled_number = (this.sides - 1) * random_number
    // We round the number so it's always an integer number
    // We also add one to the result so we get a number between (1..# of sides)
    // It should be clear that we had to subtract from the number of sides before
    // we multiplied so that whenever we add one here we don't go outside our 
    // desired range of numbers (else the dice would read 1..7 with only 6 sides
    var result = Math.round(scaled_number) + 1

    // Assign the result to our die for future reference
    this.value = result

    // Return the result
    return result
}

/* We have no need for getValue as we can access the value of the dice
Die.prototype.getValue = function() {
    this.roll = Die.roll();
    return this;
}*/

// The PairofDice should help us manage 2 dice   
var PairofDice = function(sides) {
    // The sides parameter will help us initialise the two dice
    this.dice1 = new Die(sides);
    this.dice2 = new Die(sides);

    return this;
}

// When we roll the pair, it should roll each dice individually
// It will return an array with the value of each roll, for convenience
PairofDice.prototype.roll = function() {
    var roll1 = this.dice1.roll();
    var roll2 = this.dice2.roll();
    return [roll1, roll2];
}

// Return the value of the first dice
PairofDice.prototype.getValue1 = function() {
    return this.dice1.value;
}

// Likewise for the second dice
PairofDice.prototype.getValue2 = function() {
    return this.dice2.value;
}

// Return the total score for all dices, there is no need to take
// any parameters to this function as we have all the data within 
// our PairOfDice instace (referenced by 'this' keyword)
PairofDice.prototype.getSum = function() {
    // No need to parseInt on these values as we only store integer values
    var sum = this.dice1.value + this.dice2.value;

    return sum;
}

// Now we can define our variables 
// There is no need to make an instance of Die as we can just use
// PairofDice to manage 2 dice for us, make sure to use the new keyword!
//var die = new Die();
var pairofDice = new PairofDice();    

// Updating the display when a roll is made
var update_display = function() {
    var specialMsg;

    // We can simplify this a lot now
    //var die_1 = ParseInt(Die.getValue1());
    //var die_2 = ParseInt(Die.getValue2());

    // value doesn't set the text on span, so we will use innerText
    $("die_1").innerText = pairofDice.getValue1();
    $("die_2").innerText = pairofDice.getValue2();

    // Get the sum of the roll
    //var sum = PairofDice.getSum(die_1, die_2);
    var sum = pairofDice.getSum();

    // In the switch statement, it should be integer cases instead of string
    switch (sum) {
    case 2:
        specialMsg = "Snake eyes"
        break;
    case 7:
        specialMsg = "Craps";
        break;
    case 12:
        specialMsg = "Box Cars";
        break;
     // we add a default message incase there is no special, because then it will print 'undefined'
    default:
        specialMsg = "No luck";
    }

    // Show the message!
    $("message").innerText = specialMsg;
}

var rollDice_click = function() {
    // These aren't needed as the value will always be updated
    //$("die_1").value = "";
    //$("die_2").value = "";

    // Roll the dice..
    pairofDice.roll();
    // Show the results!
    update_display();
}

window.onload = function() {
    $("roll").onclick = rollDice_click;
}​ 
```

# azure - 安装了 Azure TFS 上的 VM 如何远程访问它

> ID：13020936
> 
> 赞同：2
> 
> 时间：2012-10-22T22:36:40.917
> 
> 标签：azure, tfs, virtual-machine

好的，我已经在 Azure 上成功创建了 VM Server 2008 并安装了 TFS 2012 express。我尝试通过 Visual Studio、Web 界面访问它，但我不能。

虚拟机防火墙上的 8080 端口对公众开放，但通过端口扫描，该端口似乎已关闭。

有什么建议么 ？

注意：我知道[https://tfspreview.com/](https://tfspreview.com/)但是我想在我自己的 VM 上设置我自己的 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:36:48.067

在防火墙上打开正确的端口是一个好的开始。但是您需要让 Windows Azure 哪些端口应该在外部打开并转发到您的 VM（也支持负载平衡）。

为了使端口 8080 可以从外部访问，您需要转到门户中的 VM，转到端点选项卡并在此处添加一个端点（确保它映射到**专用端口**8080）：

![在此处输入图像描述](../Images/f795122e7edf4145584776d3996a15ca.png)

# powershell - Powershell V3 新的 ScheduleJob 和 ScheduleTask cmdlet

> ID：13020938
> 
> 赞同：1
> 
> 时间：2012-10-22T22:36:47.583
> 
> 标签：powershell, task, jobs, schedule

我目前正在学习有关 powershell 版本 3 中新 cmd-let 的所有信息，并尝试使用其中的一些。

我需要安排不同的事情，我正在尝试学习新的 new-scheduledtask 和 new-scheduledjob cmdlet，但我遇到了一点困难。

我想知道是否有人可以帮助我发现通过脚本安排服务重启（在这种情况下为 apache）的最简单方法是什么？当满足某个条件时（基本上是当我需要重新启动以添加新的 apache vhosts 时），该脚本将安排重新启动。

有任何想法吗？目前，我倾向于创建一个脚本块来执行此操作，然后注册一个作业，然后在我想要重新启动的一天中的某个时间（即脚本安排重新启动的那天晚上）注册一个作业触发器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:28:01.977

<#所以这是我想为您提供的一个示例，它每天凌晨 3 点重新启动 BITS 服务，我想您可以使用您的 apache 服务示例修改脚本#>

<#我在这里为作业创建触发器并将其设置为每天凌晨 3 点开始#>

```
$trigger = New-JobTrigger -Daily -At 3am 
```

<# 下面我在每天凌晨 3 点使用名称和 $trigger 的触发器注册 ScheduledJob，还将要执行的脚本放置在脚本块内#>

```
Register-ScheduledJob -Name BitsServiceRestart -Trigger $trigger -ScriptBlock {

<# Suppose Lets say that you want to schedule a restart of BITS Service#>
Restart-Service -ServiceName BITS

} 
```

<# 注册 Job 后，您可以使用 Get-ScheduledJob 获取 Job 详细信息您还可以使用 TaskScheduler --> Windows --> PowerShell #> 查看任务详细信息

```
Get-ScheduledJob BitsServiceRestart | fl * 
```

<# 你可以使用 Recieve Job 接收 Scheduled Job 的输出 #>

```
Receive-Job -Name BitsServiceRestart 
```

# c# - 很奇怪的 C# RemotingException

> ID：13020940
> 
> 赞同：1
> 
> 时间：2012-10-22T22:36:56.157
> 
> 标签：c#, .net-4.0, .net-remoting

当我在调试模式下编译和运行我的程序时，一切都按预期工作。但是，当我在发布模式下编译和运行时，事情变得有点……奇怪。如果我运行发布模式可执行文件，我会收到以下异常

> 发生 RemotingException：异步结果对象为 null 或属于意外类型。

我们确实在我们的应用程序中使用了 .NET 远程处理，但是，我可以确认这不是我的任何远程调用的问题。这发生在我打开程序时，甚至在我进入 Main() 方法之前。除了关于路径太长的建议（但我的工作副本或安装的副本都不应该有足够长的路径来触发这个） . 非常感谢您对此提供的任何帮助，因为我不完全确定如何处理此错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:54:46.987

在这里检查：[将平台目标更改为任何 CPU 时引发的神秘 RemotingException](https://stackoverflow.com/questions/11734658/mystery-remotingexception-raised-when-changing-platform-target-to-any-cpu)

它似乎更改了您要访问的 DLL 的路径。查看链接问题中的路径。它们远远超过 127 个字符，您对此无能为力。

例子：

'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.HostingProcess.Utilities.Sync\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.HostingProcess.Utilities.Sync.dll

编辑：尝试更改为“x86”，看看错误是否消失。

# layout - Zend 框架 2 - 在布局中添加子视图？

> ID：13020941
> 
> 赞同：0
> 
> 时间：2012-10-22T22:36:58.743
> 
> 标签：layout, view, zend-framework2, addsubview, zend-app-bootstrap

我有三个布局视图来呈现我的网页（一个用于登录用户，另一个用于未登录用户，一个用于管理员用户）。这些布局具有相同的页脚部分。此页脚非常复杂，我希望将更改集中到单个页脚视图。

如何在布局视图中添加子视图，以便布局将具有以下代码来呈现由返回的内容`actionControler`？

```
<?php echo $this->content; ?> 
```

以及以下代码，但这始终是相同的模板，并且不会由以下代码返回`actionController`：

```
<?php echo $this->footer; ?> 
```

我必须修改`onBootstrap`方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:13:38.560

如果页脚本身很简单，您应该能够使用`Zend\View\Helper\Partial`帮助程序来呈现 phtml 文件。为此（在您的布局内）：

```
<?php echo $this->partial('view path'); ?> 
```

如果页脚需要一些逻辑，最好看看创建一个视图助手。

# python - 将 Python 的输出合并到 Stata

> ID：13020943
> 
> 赞同：0
> 
> 时间：2012-10-22T22:37:10.140
> 
> 标签：python, merge, python-3.x, stata

我在 Stata 中运行 DO 清理我的数据集，然后调用 Python 运行脚本以生成一些需要的变量（3 列），使用：

`outsheet unique_id group_1 group_2 group 3 group_4 group_5 group_6 group_7 using groups.csv, comma replace`

`shell python.exe group_fix.py`

这将创建一个名为 group_fix.csv 的电子表格，其中包含 4 列 unique_id、group_fix_1、group_fix_2 和 group_fix 3。我想使用 unique_id 字段（在我的数据集和 Py 输出中）来合并这些数据集。所以基本上在 Stata 中，它看起来像在我调用 Py 之前加上我的脚本创建的 3 个新列，这样我就可以继续我的 DO 并进行所需的分析。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:21:35.297

我认为您正在寻找的是一个临时文件。你可以做这样的事情

```
sort unique_id
tempfile original
save "`original'"
clear
insheet using group_fix.csv, comma
sort unique_id
merge unique_id using "`original'" 
```

这将创建一个名为“original”的临时文件，用于存储原始数据集。然后，您将使用 python 脚本清理的数据集与 unique_id 上的原始数据合并。另外值得指出的是，在命令中

```
 save "`original'" 
```

第一个`是tilda下的字符；第二个 ' 是单引号

希望有帮助！

# c# - 文件解密错误：错误数据

> ID：13020949
> 
> 赞同：0
> 
> 时间：2012-10-22T22:37:28.217
> 
> 标签：c#, asp.net, encryption, rsa

我在让 asp.net C# 文件加密/解密过程正常工作时遇到了一些麻烦。我可以上传和加密文件，但无法进行解密。

我得到错误：`Exception Details: System.Security.Cryptography.CryptographicException: Bad Data.`在解密线上：

```
byte[] KeyDecrypted = rsa.Decrypt(KeyEncrypted, false); 
```

这是我的加密功能：

```
 private void EncryptFile(string inFile)
    {
        RijndaelManaged rjndl = new RijndaelManaged();
        rjndl.KeySize = 256;
        rjndl.BlockSize = 256;
        rjndl.Mode = CipherMode.CBC;
        ICryptoTransform transform = rjndl.CreateEncryptor();

        byte[] keyEncrypted = rsa.Encrypt(rjndl.Key, false);

        byte[] LenK = new byte[4];
        byte[] LenIV = new byte[4];

        int lKey = keyEncrypted.Length;
        LenK = BitConverter.GetBytes(lKey);
        int lIV = rjndl.IV.Length;
        LenIV = BitConverter.GetBytes(lIV);

        int startFileName = inFile.LastIndexOf("\\") + 1;
        // Change the file's extension to ".enc"
        string outFile = EncrFolder + inFile.Substring(startFileName, inFile.LastIndexOf(".") - startFileName) + ".enc";

        lblDecryptFileName.Text = outFile;

        using (FileStream outFs = new FileStream(outFile, FileMode.Create))
        {
            outFs.Write(LenK, 0, 4);
            outFs.Write(LenIV, 0, 4);
            outFs.Write(keyEncrypted, 0, lKey);
            outFs.Write(rjndl.IV, 0, lIV);

            using (CryptoStream outStreamEncrypted = new CryptoStream(outFs, transform, CryptoStreamMode.Write))
            {
                int count = 0;
                int offset = 0;
                int blockSizeBytes = rjndl.BlockSize / 8;
                byte[] data = new byte[blockSizeBytes];
                int bytesRead = 0;
                using (FileStream inFs = new FileStream(inFile, FileMode.Open))
                {
                    do
                    {
                        count = inFs.Read(data, 0, blockSizeBytes);
                        offset += count;
                        outStreamEncrypted.Write(data, 0, count);
                        bytesRead += blockSizeBytes;
                    }
                    while (count > 0);
                    inFs.Close();
                }
                outStreamEncrypted.FlushFinalBlock();
                outStreamEncrypted.Close();
            }
            outFs.Close();
        }

    } 
```

这是发生错误的解密函数。

```
 private void DecryptFile(string inFile)
    {

        // Create instance of Rijndael for
        // symetric decryption of the data.
        RijndaelManaged rjndl = new RijndaelManaged();
        rjndl.KeySize = 256;
        rjndl.BlockSize = 256;
        rjndl.Mode = CipherMode.CBC;
        byte[] LenK = new byte[4];
        byte[] LenIV = new byte[4];
        string outFile = DecrFolder + inFile.Substring(0, inFile.LastIndexOf(".")) + ".txt";

        using (FileStream inFs = new FileStream(EncrFolder + inFile, FileMode.Open))
        {

            inFs.Seek(0, SeekOrigin.Begin);
            inFs.Seek(0, SeekOrigin.Begin);
            inFs.Read(LenK, 0, 3);
            inFs.Seek(4, SeekOrigin.Begin);
            inFs.Read(LenIV, 0, 3);

            int lenK = BitConverter.ToInt32(LenK, 0);
            int lenIV = BitConverter.ToInt32(LenIV, 0);
            int startC = lenK + lenIV + 8;
            int lenC = (int)inFs.Length - startC;

            // Create the byte arrays for
            // the encrypted Rijndael key,
            // the IV, and the cipher text.
            byte[] KeyEncrypted = new byte[lenK];
            byte[] IV = new byte[lenIV];

            // Extract the key and IV
            // starting from index 8
            // after the length values.
            inFs.Seek(8, SeekOrigin.Begin);
            inFs.Read(KeyEncrypted, 0, lenK);
            inFs.Seek(8 + lenK, SeekOrigin.Begin);
            inFs.Read(IV, 0, lenIV);
            Directory.CreateDirectory(DecrFolder);

            byte[] KeyDecrypted = rsa.Decrypt(KeyEncrypted, false);

            ICryptoTransform transform = rjndl.CreateDecryptor(KeyDecrypted, IV);

            using (FileStream outFs = new FileStream(outFile, FileMode.Create))
            {

                int count = 0;
                int offset = 0;

                int blockSizeBytes = rjndl.BlockSize / 8;
                byte[] data = new byte[blockSizeBytes];

                inFs.Seek(startC, SeekOrigin.Begin);
                using (CryptoStream outStreamDecrypted = new CryptoStream(outFs, transform, CryptoStreamMode.Write))
                {
                    do
                    {
                        count = inFs.Read(data, 0, blockSizeBytes);
                        offset += count;
                        outStreamDecrypted.Write(data, 0, count);

                    }
                    while (count > 0);

                    outStreamDecrypted.FlushFinalBlock();
                    outStreamDecrypted.Close();
                }
                outFs.Close();
            }
            inFs.Close();
        }

    } 
```

对此的任何帮助都会很棒！我不是 RSA 加密专家，并且已经阅读了很多帖子，但仍然无法提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:35:42.410

我终于想通了。当我在那里尝试时，该代码在桌面应用程序中运行良好。它只是在我试图编写的 asp.net 4 Web 应用程序中不起作用。问题是 RSA 对象没有在会话中持续存在。因此，RSA 对象创建得很好。文件被加密好了。但是当我去解密文件时，RSA 对象并不存在。的错误消息具有`System.Security.Cryptography.CryptographicException: Bad Data`误导性，因为这不是真正的问题，数据很好。

因此，在创建密钥和 RSA 对象时，我使用了以下内容：

```
rsa = new RSACryptoServiceProvider(cspp);
Session["rsa"] = rsa; 
```

接下来，当调用解密函数时，我添加了：

```
if (rsa == null)
     rsa = (RSACryptoServiceProvider)Session["rsa"]; 
```

当然，如果没有 RSA 会话的密钥，也有更多的代码，但这是我遇到的问题的高级解决方案。

如果有人在寻找这个，请告诉我，我可以分享更多代码。

# jquery - jQuery Mobile：添加到代码中的 SELECT 仅适用于桌面浏览器？

> ID：13020951
> 
> 赞同：2
> 
> 时间：2012-10-22T22:37:42.463
> 
> 标签：jquery, jquery-mobile

在桌面浏览器（FF、IE、CR）上，我可以使用这个 jQuery 添加到 Select 中：

```
 var output = [];
        for (var i = 1; i < 32; i++) {
            output.push("<option value='" + i + "'>" + i + "</option>");
        }
        $("#cboDay").append(output.join(' ')).selectmenu('refresh'); 
```

但是，它不适用于 iPhone 或 Android。

供参考，这里的选择：

```
<select name="cboDay" id="cboDay" data-native-menu="false"></select> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:40:26.133

尝试传递一个**真实**的参数来强制刷新..

```
$("#cboDay").append(output.join(' ')).selectmenu('refresh', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:26:43.963

删除**data-native-menu="false"**修复它。

# php - PHP PDO 清理变量

> ID：13020957
> 
> 赞同：3
> 
> 时间：2012-10-22T22:38:16.207
> 
> 标签：php, mysql, pdo

我第一次使用 PDO，我想知道下面的内容是否安全，我试图阅读 mysql_real_escape 的替代方法，似乎“准备”方法足够安全，有人可以为我澄清一下吗？仍然显得脆弱...

```
$UID = $_GET['id'];

$sth = $conn->prepare("SELECT * FROM directory WHERE user_active != '' AND ID = :uid");
$sth->execute(array(':uid' => $UID)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:41:26.437

prepare 方法不仅足够，而且比`mysql_real_escape()`.

您的代码有效，因为`$UID`将使用与 SQL 语句的其余部分不同的协议进行传输。由于数据库对它的处理方式不同，因此无需转义。

# apache-flex - Flex textArea 删除/替换无效的小方块

> ID：13020958
> 
> 赞同：0
> 
> 时间：2012-10-22T22:38:18.000
> 
> 标签：apache-flex, replace, flex4, textarea

这与我之前的 Flex 问题有关：

[Flex TextArea - 从 Word 复制/粘贴 - xml 解析中的 unicode 字符无效](https://stackoverflow.com/questions/12905054/flex-textarea-copy-paste-from-word-invalid-unicode-characters-on-xml-parsing)

但这略有不同，似乎是问题所在。所以我不得不为此创建另一个线程。

当我将文本从 word 复制/粘贴到文本区域时，我看不到任何无效字符。但是当我在这个网址上粘贴相同的文本时：

[http://blog.flexexamples.com/2008/03/07/preventing-line-feeds-in-a-textarea-control-in-flex/](http://blog.flexexamples.com/2008/03/07/preventing-line-feeds-in-a-textarea-control-in-flex/)

我看到一个小方块“”。请将此文本粘贴到 URL 中：

> ```
> Bring the user base between the two applications into sync.
>  
> 2\.    Requirements 
> ```

你应该也能看到。现在我想删除这个无效的字符/符号。有没有办法做到这一点。我认为这是我的 xml 解析器问题的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:32:50.447

我能够通过使用 textArea changedHandler 只允许某些字符来处理它：

```
 if (event.operation is PasteOperation)
        {
            event.preventDefault();
            var txt:String = Clipboard.generalClipboard.getData(ClipboardFormats.TEXT_FORMAT).
                            toString().replace(/[^A-Za-z0-9\s$%&*!@-_().]/ig, "");
                 ......
        } 
```

# sql - ADO.net 源的 SSIS 变量 SQL 命令

> ID：13020960
> 
> 赞同：2
> 
> 时间：2012-10-22T22:38:36.550
> 
> 标签：sql, sql-server-2008, ssis

虽然这似乎是一个基本问题，但我几天来一直在扯头发，试图找到一个有效的解决方案。

我在服务器上有一个值查找表，我使用 C# 脚本任务从中读取并组装成一个字符串。我将此字符串写入一个变量，我想在我的数据流中的 ADO.NET 数据源（来自我只有读取权限的不同服务器）上的大型 SQL 查询中将其作为 WHERE 参数传递。例如，这个字符串就像

```
 ('Frank', 'John', 'Markus', 'Tom') 
```

我会将其附加为我的 WHERE 子句。我不能直接从 ADO.NET 数据源的变量中读取数据，也不能使用“表达式”属性来设置我的 SQL，因为我的 SQL 查询超过 4000 个字符。我可以使用执行 SQL 任务来运行我的查询，将结果加载到记录集中并假设，然后循环遍历记录集，但这非常低效。

最好的方法是什么？我的最终目标是将这些结果放在第一台服务器上的表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:48:05.260

您可以尝试将脚本组件设置为源 - 脚本中的变量和字符串可能超过 4000 个字符，因此您可以将查询放入其中。

设置类似于本文的组件：http: [//beyondrelational.com/modules/2/blogs/106/posts/11119/script-componentsource-part1.aspx](http://beyondrelational.com/modules/2/blogs/106/posts/11119/script-componentsource-part1.aspx) 在这篇文章中，您有示例如何使用获取数据`ExecuteReader`并将其放入脚本组件的输出：http: [//beyondrelational.com/modules/2/blogs/106/posts/11124/ssis-script-component-as-source-adonet.aspx](http://beyondrelational.com/modules/2/blogs/106/posts/11124/ssis-script-component-as-source-adonet.aspx)在这个你有说明如何正确获取连接：[http://www.toadworld.com/platforms/sql-server/b/weblog/archive/2011/05/30/use-connections-properly-in-an-ssis-script-task](http://www.toadworld.com/platforms/sql-server/b/weblog/archive/2011/05/30/use-connections-properly-in-an-ssis-script-task)

通过加入这些信息，您应该能够编写您的源脚本组件，该组件可以使用任何长度的动态构造查询来获取数据。

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:22:53.040

您可以执行一个简单的`select`语句来返回将包含的值列表`('Frank', 'John', 'Markus', 'Tom')`。所以你`select`会回来：

```
Name
----------
Frank
John
Markus
Tom 
```

然后，在 SSIS 中，在主查询中使用 a `Merge Join Component`（将充当 a `INNER JOIN`）而不是 where 子句。

这是实现您想要的最干净的方法。

# ruby-on-rails-3 - Rails 设计条件身份验证_keys

> ID：13020961
> 
> 赞同：2
> 
> 时间：2012-10-22T22:38:45.923
> 
> 标签：ruby-on-rails-3, authentication, devise

有没有办法根据用户类型使 authentication_keys 配置有条件？

例如，在我的用户模型中，我有两个不同的用户，标准用户和学生，由位掩码属性的值定义。我想根据用户名和 school_id 对学生进行身份验证。标准用户不必为 school_id 设置值。为了适应这一点，我有两种类型的登录屏幕，一种用于学生，另一种用于标准用户。学生登录屏幕有一个隐藏的 school_id 字段，用于对他们的学校进行身份验证。

在我的设计配置文件中，我有：

```
config.authentication_keys = [ :username, :school_id ] 
```

但是，使用此设置标准用户无法登录，我的猜测是它期望所有经过身份验证的用户都有一个 school_id。是否可以使身份验证密钥有条件？或者给 school_id 一个 allow_blank 选项？我希望能够将标准用户和学生保持在同一模型中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:22:51.000

是的，只需在您的模型中执行：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, authentication_keys: [:username]
end

class Student < ActiveRecord::Base
  devise :database_authenticatable, authentication_keys: [:username, :student_id]
end 
```

# django - 为什么 Django 的管理详细信息页面会进行如此多的查询？

> ID：13020963
> 
> 赞同：0
> 
> 时间：2012-10-22T22:39:01.213
> 
> 标签：django, django-admin

我正在开发一个相当标准的 Django 应用程序，最近我一直在调整管理员。虽然列表视图以合理的速度加载，但细节和添加视图需要大约 10 秒才能加载。

我不确定为什么会这样——我怀疑这与数据库被过度查询有关，事实上确实如此。打开日志记录后，我发现控制器正在查询表中的每个 id：

```
...
[Mon Oct 22 18:32:52 2012] [error] (0.001) SELECT `courses_course`.`id`, `courses_course`.`semester`,
 `courses_course`.`name`, `courses_course`.`credits`, `courses_course`.`description`, `courses_course
`.`history_id`, `courses_course`.`oldpcr_id`, `courses_course`.`primary_alias_id` FROM `courses_cours
e` WHERE `courses_course`.`id` = 2077 ; args=(2077,)
[Mon Oct 22 18:32:52 2012] [error] (0.000) SELECT `courses_course`.`id`, `courses_course`.`semester`,
 `courses_course`.`name`, `courses_course`.`credits`, `courses_course`.`description`, `courses_course
`.`history_id`, `courses_course`.`oldpcr_id`, `courses_course`.`primary_alias_id` FROM `courses_cours
e` WHERE `courses_course`.`id` = 2078 ; args=(2078,)
[Mon Oct 22 18:32:52 2012] [error] (0.001) SELECT `courses_course`.`id`, `courses_course`.`semester`,
 `courses_course`.`name`, `courses_course`.`credits`, `courses_course`.`description`, `courses_course
`.`history_id`, `courses_course`.`oldpcr_id`, `courses_course`.`primary_alias_id` FROM `courses_cours
e` WHERE `courses_course`.`id` = 2079 ; args=(2079,)
... 
```

有人可以解释为什么会这样吗？我想不出任何可以解释它的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:44:31.147

我在这里找到了答案：[在 Admin 中提高 Django ForeignKey Fields 的性能](https://stackoverflow.com/questions/5108080/improving-performance-of-django-foreignkey-fields-in-admin)

因为 Django 将外键列为`select`列表，所以它必须查询每一个。看起来有几种解决方案是可能的，但最简单的是将字段设置为[raw_id 字段](https://docs.djangoproject.com/en/1.2/ref/contrib/admin/#django.contrib.admin.ModelAdmin.raw_id_fields)。（事实上​​，这样做解决了我的问题。）

# iphone - 带有大量 JSON 数据的 UITableView 字母索引

> ID：13020973
> 
> 赞同：0
> 
> 时间：2012-10-22T22:39:42.100
> 
> 标签：iphone, objective-c, ios, database, api

我有一个从返回一堆 JSON 数据的 web 服务加载数据的表。当用户向下滚动时，我会加载更多数据，因为我正在查询的数据库包含相当多的数据。

我的问题是 - 在这样的表格上实施右侧字母列表是否可行，如何做到这一点？如果我加载所有数据然后在本地对它们进行排序，填充索引并每隔一段时间缓存数据，那绝对是可能的。但是，如果这将是 10K 行或更多数据呢？也许在应用程序首次启动时加载这些数据是一种选择。

那么在性能和可用性方面，是否有人对可以做什么有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:34:31.827

我不认为你应该下载所有数据来制作这些索引，它会减少刷新时间并可能导致内存问题。

但是，如果您认为索引可以产生很大的不同，那么您可以向您的服务器 API 添加一些功能。我会添加一个不同的 API 调用，比如`get_indexes`. 甚至我会添加一个`POST`参数`get_indexes`，该参数将索引数组添加到具有此参数集的任何调用中。

当用户在没有任何下载数据的情况下点击索引时，或者当用户只是强调您的应用程序使索引快速上下滚动时，您应该准备好处理这些情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:34:40.260

先看看数据下载量有多大。如果服务器可以 gzip 数据，它可能会非常小 - 由于重复的密钥，JSON 压缩得非常好。

如果它太大，我建议尽可能修改服务器以让您指定起始字母。这样，如果用户点击索引中的“W”，您应该能够请求所有以“W”开头的项目。

从服务器获取总记录数也很有帮助，这样您就可以提前知道表中有多少行。我还将为每个未知行返回一个“正在加载...”字符串，直到实际数据下降。

# join - ARCGIS 的“空间连接”中最快的“匹配选项”。

> ID：13020976
> 
> 赞同：1
> 
> 时间：2012-10-22T22:39:49.480
> 
> 标签：join, match, arcgis, esri

在 ESRI 的 ARCGIS 软件中，空间连接工具有各种“匹配选项”用于连接您的数据。我想知道以下情况下最快速和可靠的匹配选项：

目标特征：点类连接特征：多边形类

- 点在多边形内 - 没有多边形重叠 - 所有点都在多边形内 - 一些多边形有很多点

我正在考虑的那些（除非另一个更好）是：最近的，相交的，内部的，并且有他们的中心

一旦我选择了其中最快的，包含搜索半径会更快吗？或者 ARC 是否足够聪明，如果您将其留空，它将假定搜索半径为 0。

# jsonp - .getjson 来自外部域。从阵列打印

> ID：13020985
> 
> 赞同：0
> 
> 时间：2012-10-22T22:40:43.567
> 
> 标签：jsonp, getjson

我目前从以下 get 语句中获得 2 个数组。

```
 $.getJSON("http://domain.com?callback=?", function(data){
  $("#results").html(JSON.stringify(data)); 
```

我将结果附加到带有 id 结果的 div 中。

所做的只是显示数组。我需要从数组中提取某些对象，但我不能这样做，因为我只是在打印整个数组。如何从该数组中获取特定信息？

这是附加到 DIV 的一些数据。

{"me":[{"player":{"high_score":110345,"rank":2}}],"all":[{"player":{"@score := s.score":110345, "头像":"http://profile.ak.fbcdn.net/hprofile-ak-snc6/195312_789328764_1121893995_q.jpg","guid":"FE4EC535-B74F-4B68-8F4D-2CA0EBC28FAF","姓名":"查尔斯追逐","排名":1,"分数":110345}},

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:08:40.840

前提是以下是您返回的 JSON 数据

```
{    
    "me": [
                {
                    "player": {
                        "high_score": 110345,
                        "rank": 2
                    }
                }
            ],
            "all": [
                {
                    "player": {
                        "@score := s.score": 110345,
                        "avatar": "http://profile.ak.fbcdn.net/hprofile-ak-snc6/195312_789328764_1121893995_q.jpg",
                        "guid": "FE4EC535-B74F-4B68-8F4D-2CA0EBC28FAF",
                        "name": "Charles Chase",
                        "rank": 1,
                        "score": 110345
                    }
                }
            ]
        }; 
```

您可以使用以下内容从 JSON 对象中获取值

**代码**

```
$.getJSON("http://domain.com?callback=?", function(data){
  alert(data.me[0].player.high_score);
  alert(data.all[0].player.name);
)); 
```

注意`me`和`all`作为数组返回。我希望它有所帮助。

# c - 在 C 中正确使用 strcat()

> ID：13020993
> 
> 赞同：0
> 
> 时间：2012-10-22T22:41:24.173
> 
> 标签：c

我有一个看起来像这样的存档文件：

```
!<arch>
file1.txt/      1350248044  45503 13036 100660  28        `
hello
this is sample file 1 
```

现在在这里，标题中的数字 28 是`file1.txt`大小。要获得该号码，我使用：

```
 int curr_char;
  char file_size[10];
  int int_file_size;

  curr_char = fgetc(arch_file);

  while(curr_char != ' '){
    strcat(file_size, &curr_char);
    curr_char = fgetc(arch_file);
  }

 // Convert the characters to the corresponding integer value using atoi()
 int_file_size = atoi(file_size); 
```

但是，`file_size`每次运行代码时，数组中的值都会发生变化。有时它是正确的，但大多不是。以下是我得到的一些示例`file_size`：

?28`U

2U8U

28 <--- 正确！

派?28

我相信问题出在我的 strcat() 函数上，但不确定。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:43:17.120

`&curr_char`是 a `int*`，因此您正在复制 a 的位，`int`就好像它们表示一个字符串一样。

你应该使用`scanf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:50:56.100

您不应该明智地阅读文件字符。有更高级别的功能可以做到这一点。正如 larsmans 已经指出的那样，您可以`fscanf()`用于此任务：

```
fscanf(arch_file, "%d", &int_file_size); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T22:51:21.467

该表达式`&curr_char`指向单个字符（嗯，实际上是一个整数，因为这就是您声明它的方式）。`strcat`寻找一个字符串，你应该知道的字符串以一个`'\0'`字符结尾。因此`strcat`，在您的情况下，将`&curr_char`指针用作*字符串*的地址并查找终止符。由于没有发现奇怪的事情会发生。

解决这个问题的一种方法是创建`curr_char`一个数组，初始化为零（字符串终止符）并读入第一个条目：

```
char curr_char[2] = { '\0' };  /* Will make all character in array be zero */

...

curr_char[0] = fgetc(...); 
```

还有另一个问题，那就是您试图连接成一个未初始化的字符串。运行程序时，数组`file_size`可以包含*任何*数据，它不会自动归零。这会导致数字*前*出现奇怪的字符。通过初始化数组，这部分解决了与上述问题相同的方式：

```
char file_size[10] = { '\0' }; 
```

# javascript - javascript - 放置、删除和 CRUD

> ID：13020996
> 
> 赞同：-1
> 
> 时间：2012-10-22T22:41:40.913
> 
> 标签：javascript

我只是在新声音云的引擎盖下进行了查看，并注意到了一些我以前从未听说过的东西。我注意到喜欢曲目等时发送了 PUT 和 DELETE 请求。现在，我知道您现在可以直接在 JavaScript 中使用 SQL，所以我认为它们将用于访问数据库，但我看不到发送的太多信息所以我研究了一下。但是，我找不到太多信息，因为我知道这些请求很少使用，因为它不安全并且客户端不能保证该过程已经执行。

任何人都可以提供一些关于 PUT 和 DELETE 的见解，以及为什么你会在通常的带有 JSON 或 PHP 文件的 POST 和 GET 请求中使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:45:27.840

`PUT`并且是[HTTP/1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)`DELETE`中描述的标准 HTTP 动词。

该规范描述了以下用途`PUT`：

> PUT 方法请求将封闭的实体存储在提供的 Request-URI 下。

以下适用于`DELETE`：

> DELETE 方法请求源服务器删除由 Request-URI 标识的资源。

如果根据规范使用，则应`PUT`在要更新给定 URI 下`DELETE`的资源以及要从给定地址删除资源时使用。

该规范对 and 也有特定的意图`GET`，但可能因为它们是浏览器历史上唯一支持的 HTTP 方法，`POST`人们已经开始将它们用于最初创建的目的。`DELETE``PUT`

HTTP 方法的正确应用通常称为[RESTful 编程](https://stackoverflow.com/questions/671118/what-exactly-is-restful-programming)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:45:19.410

这些方法与数据库无关。它们是 HTTP 方法。请参阅[此处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)、[此处](http://www.httpwatch.com/httpgallery/methods/)或 Google 上的任何其他链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:45:24.567

**PUT**和**DELETE**是[HTTP 请求的类型](http://en.wikipedia.org/wiki/HTTP#Request_methods)；它们不是 SQL 数据库命令。在[RESTful API](http://en.wikipedia.org/wiki/Representational_State_Transfer)中，它们用于创建新资源或删除现有资源。

# javascript - 异步，回调，关闭，哦，我的

> ID：13020997
> 
> 赞同：4
> 
> 时间：2012-10-22T22:41:44.813
> 
> 标签：javascript, mongodb, dom, asynchronous

这就是我正在尝试做的事情，但惨遭失败：

我有一个 MongoDB，里面装满了来自连接到汽车的设备的 GPS 读数。读数带有时间戳并具有纬度/经度。

对于每个读数，我想创建一个包含位置、时间戳和其他一些信息的 Position 类。

为了在 Google 地图上绘制它，我想创建一个 Route 类，它由一组 Positions 对象组成。

顶部的主要功能从示例 JSON 文件加载路由（以避免 CSRF 问题......另一个故事），创建 Position 对象和路由对象很好。当我尝试绘制路线时，问题就开始了。

```
var positions = this.getPositions(); 
```

如果我输入

```
console.log(positions); 
```

在该行的正下方，它将很好地打印位置数组。这样做需要一点时间，因为它很大，但它确实有效。

但是，如果我输入

```
console.log(positions[0]); 
```

它不会工作，因为位置还没有加载。

我该怎么办？

我正在使用来自[http://classy.pocoo.org](http://classy.pocoo.org)的 classy.js，但我已经验证这不是问题。

```
function main()
{
    var route = Route('20120928_025650_0');
    route.plot();
}
var Route = Class.$extend({
    __init__ : function(imaging_run_id)  {
        this.imaging_run_id = imaging_run_id;
        this.positions = [];
        this.load();
    },

    getPositions : function() {
        return (this.positions);
    },

    load : function() {
        //var url='http://localhost:5001/gps/by_imaging_run_id/' + this.imaging_run_id;
        var test_url = '/static/20120928_025650_0.json';
        var me = this;
        $.getJSON(test_url, function(route) {
            for(var position in route) {
                var obj = route[position];
                var new_position = Position(obj['_id'], obj['lat'], obj['lng'], obj['timestamp'], obj['epoch_timestamp'], obj['is_valid']);
                me.pushPositions(new_position);
            }
            me.orderPositions();
        })
        .error(function(jqXhr, textStatus, error) {
            alert("ERROR: " + textStatus + ", " + error);
        });
    },

    orderPositions : function() {
        var unsorted_array = this.getPositions();
        var sorted = unsorted_array.sort(function(a,b){ //Custom sort function
            return a['timestamp'] - b['timestamp']; //Sort ascending
        });
        this.setPositions(sorted);
    },

    plot : function() {
        var positions = this.getPositions();
        var points = [];
        var bounds = new google.maps.LatLngBounds();
        for(var i=0; i<positions.length; i++)
        {
            var obj = positions[i];
            var point = new google.maps.LatLng(obj['location'][0], obj['location'][1]);
            points.push(point);
            bounds.extend(point);
        }
        // Create the polyline.
        var route = new google.maps.Polyline({
            path: points,
            strokeColor: '#e81971',
            strokeOpacity: 1.0,
            strokeWeight: 4
        });
        map.fitBounds(bounds);
        route.setMap(map);
    }
});

var Position = Class.$extend({
    __init__ : function(id, lat, lng, timestamp, epoch_timestamp, valid)  {
        this.id = id;
        this.location = [lat, lng];
        this.timestamp = new Date(timestamp);
        this.epoch_timestamp = new Date(epoch_timestamp);
        this.valid = valid;
        this.anchor_location;
    },..... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:47:52.800

如果我理解正确，你会想要做这样的事情：

```
var positions = this.getPositions(function(positions) {
    console.log(positions[0]);
}); 
```

也就是说，您需要以这样一种方式编写“getPositions”，即它接受一个回调参数，一旦位置成功加载，就会调用该参数，并传递给位置数组。`getPositions`你可以检查位置是否已经加载，如果是，直接调用回调。否则，您会将它们添加到回调队列（例如`this.positionsLoadedCallbacks`），在加载所有位置后通过该队列进行迭代（我认为这将在您的`load`函数中的某个位置 near `me.orderPositions()`）。

例如，您的`getPositions`函数可能如下所示：

```
getPositions : function(callback) {
    if(this.positions !== null) {
        callback(this.positions);
        return;
    } 

    this.positionsLoadedCallbacks.push(callback);
}, 
```

在您确定位置已加载（即在 loadJSON 成功回调中）之​​后的某个地方，您需要输入如下内容：

```
for(var i=0; i < this.positionsLoadedCallbacks.length; i++) {
    this.positionsLoadedCallbacks[i](this.positions);
} 
```

并且不要忘记初始化`this.positionsLoadedCallbacks`:)

# console.log 琐事

`console.log(positions)`有效且无效的原因`console.log(positions[0])`很简单：如果您将对象引用传递给`console.log`，则当您单击“展开”小箭头并尝试查看对象/数组*内部时，将检查该对象。*当然，当您单击该箭头时，位置已经加载。但是，如果您传递一个特定的数组元素（例如`positions[0]`），它将直接尝试查找该值，发现它仍然是`undefined`，并将该结果记录在控制台中。

自己试试：

```
var i = [];
console.log([i]);
i.push(123); 
```

上一个片段，在 chrome 24 中，显示`[Array[0]]`在控制台中，但是当我展开它时，它告诉我数组 as`length: 1`并且它的第一个元素是`123`