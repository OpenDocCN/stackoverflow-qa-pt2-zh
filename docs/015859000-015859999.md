# StackOverflow 问答 15859000-15859999

# excel - Excel对特定单元格求和

> ID：15859001
> 
> 赞同：0
> 
> 时间：2013-04-07T04:54:01.120
> 
> 标签：excel, conditional

我想要一个单元格包含与单元格相邻的单元格的总和`#DIV/0!` ![在此处输入图像描述](https://i.stack.imgur.com/fM1Dx.jpg)

所以看看我怎样才能得到我积累的总百分比，但我还想添加我还没有评分的百分比（这些是单元格，`#DIV/0!`并将其记入“缺失（%）”列下。基本上是 E 列中包含`#DIV/0!`. 的单元格左侧的每个单元格的总和。有什么建议或想法吗？我对 excel 非常缺乏经验，只知道基本公式。

我尝试过类似`=SUMIF(D3:D16,ISERROR(E3:E16))`无济于事的事情。（值从第 3 行开始）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:02:04.303

我的建议是通过使用如下公式避免生成#DIV/0 错误： `=IF(ISERROR(A1/B1),0,A1/B1)`在 E 列中。如果没有错误，这将返回 A1/B1，否则将返回 0。（您也可以打印 -1 来识别错误）一旦列中没有错误，您应该能够使用 SUMIF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T05:16:55.853

虽然我同意避免`#DIV/0!`'s 是最好的，但总和可以按原样完成。

试试这个公式，作为数组公式输入（使用 Ctrl-Alt-Enter 完成）

```
=SUM(D3:D16*ISERROR(E3:E16)) 
```

顺便说一句，如果使用 Excel 2007 或更高版本，为避免错误，您应该使用

```
=IFERROR(A1/B1,"Value you want instead of error") 
```

# java - Xuggler: Capture video frames in a separate thread

> ID：15859005
> 
> 赞同：0
> 
> 时间：2013-04-07T04:54:54.897
> 
> 标签：java, multithreading, swing, xuggler

I’m working with Xuggler and trying to create a program that uses frames that are captured from video.

I found this code: [Xuggler: Deocde And Capture Frames](https://code.google.com/p/xuggle/source/browse/trunk/java/xuggle-xuggler/src/com/xuggle/xuggler/demos/DecodeAndCaptureFrames.java?r=142)

I managed to get it working and saving the frames I needed.

Now, I’m trying to integrate it into my GUI program on a separate thread to keep everything from locking up while it grabs the frames. I pretty much just copied everything in main into the run method. The only changes I made were to correct for the args filename. I hard coded it, and I checked in my working program to be sure it was the correct path.

Now, when I try to run the frame grabbing code in its own Runnable thread, it crashes. It seems to crash at this section when opening the file:

```
IContainer container = IContainer.make();

if (container.open(filename, IContainer.Type.READ, null) < 0)
    throw new IllegalArgumentException("could not open file: " + filename); 
```

After some research around the Xuggler site, I looked at the open method for the IContainer file here: [Xuggler: IContainer API open()](http://www.xuggle.com/public/documentation/java/api/com/xuggle/xuggler/IContainer.html#open%28java.lang.String,%20com.xuggle.xuggler.IContainer.Type,%20com.xuggle.xuggler.IContainerFormat%29)

It says “If the current thread is interrupted while this blocking method is running the method will return with a negative value. “</p>

It does return a negative value before it crashes, so I thought this might be my problem. Though, this is the only extra thread currently running in my program. My program is just some basic frames and panels that I'm going to use to display stuff. Then, after creating those, I try to start the frame grabbing thread which crashes.

I’m not sure how to get around this. Could someone point me in the right direction? Thanks.

Edit:

After finding this post: Well, I don't have enough rep to post a third link, so it can be found by googling: icontainer.open xuggler-users

I implemented opening the container using the other open method that required a format and it seemed to work.

Now, it throws this exception when it gets to this section:

```
resampler = IVideoResampler.make(
        videoCoder.getWidth(), videoCoder.getHeight(), IPixelFormat.Type.BGR24,
        videoCoder.getWidth(), videoCoder.getHeight(), videoCoder.getPixelType());
      if (resampler == null)
        throw new RuntimeException(
          "could not create color space resampler for: " + filename); 
```

I tried opening it by setting my own IFormat like so:

```
IContainerFormat format = IContainerFormat.make();        
        format.setInputFormat("mp4"); 
```

And I tried using null as the format like the API says to have the class "guess" the format.

Both throw the same exception though, so I'm not sure where to go from here. I'm still searching though.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:04:02.637

也许您应该使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)来处理线程池。

# sql - Complex SQL query Rails

> ID：15859007
> 
> 赞同：0
> 
> 时间：2013-04-07T04:55:07.717
> 
> 标签：sql, ruby-on-rails, ruby, activerecord, rails-postgresql

```
 Lesson.joins(:custom_attributes).where("custom_attributes.attribute_name_id = 103 AND cast(custom_attributes.value as float) BETWEEN 0 AND 61").where("custom_attributes.attribute_name_id = 103 AND cast(custom_attributes.value as float) BETWEEN 0 AND 61").where("attribute_name_id = 112 AND custom_attributes.value LIKE '%55%'") 
```

Above is an example of what I am trying to achieve. When I try:

```
Lesson.joins(:custom_attributes).where("custom_attributes.attribute_name_id = 103 AND cast(custom_attributes.value as float) BETWEEN 0 AND 61").where("custom_attributes.attribute_name_id = 103 AND cast(custom_attributes.value as float) BETWEEN 0 AND 61") 
```

It returns the right record. But when I chain the query with another, it doesn't get any records even though there are records that satisfy both conditions. I think it has something to do with selecting the custom_attributes.attribute_name_id?

# ruby-on-rails - Rails：创建haml布局的DRYer方式

> ID：15859008
> 
> 赞同：1
> 
> 时间：2013-04-07T04:55:22.583
> 
> 标签：ruby-on-rails, foreach, haml, helper

我是 Rails 新手，已经为此工作了好几个小时。我终于让它工作了，但我觉得我的解决方案有点老套，一点也不干。

我有一个布局，每 2 个项目需要一个新的 div。理想情况下，我想将其抽象为一个助手。

必须有更好的方法来做到这一点......

查看代码：

```
.column-group
  .column
    -Category.products.each_with_index do |category, index|
      -if index == 0 || index == 1
        %h1
          =category.title
        %ul
          -category.components.each do |component|
            %li
              = link_to component.title, component
  .column
    -Category.products.each_with_index do |category, index|
      -if index == 2 || index == 3
        %h1
          =category.title
        %ul
          -category.components.each do |component|
            %li
              = link_to component.title, component
  .column
    -Category.products.each_with_index do |category, index|
      -if index > 3
        %h1
          =category.title
        %ul
          -category.components.each do |component|
            %li
              = link_to component.title, component 
```

这会产生正确的 HTML：

```
<div class="column-group">
  <div class="column">
    <h1> Accessories</h1>
    <ul>
      <li><a href="/components/1">Charge &amp; Connect</a></li>
    </ul>
    <h1>Bedroom</h1>
    <ul>
      <li><a href="/components/2">Beds</a></li>
      <li><a href="/components/3">Chests</a></li>
      <li><a href="/components/4">Dressers</a></li>
      <li><a href="/components/5">Mirrors</a></li>
      <li><a href="/components/6">Nightstands</a></li>
    </ul>
  </div>
  <div class="column">
    <h1>Entertainment</h1>
    <ul>
      <li><a href="/components/7">Audio Component Piers</a></li>
      <li><a href="/components/8">Easy Wire Access System</a></li>
      <li><a href="/components/9">Occasional Tables</a></li>
      <li><a href="/components/10">TV Consoles</a></li>
    </ul>
    <h1>Occasional</h1>
    <ul>
      <li><a href="/components/11">Coffee Tables</a></li>
      <li><a href="/components/12">End Tables</a></li>
      <li><a href="/components/13">Sofa Tables</a></li>
    </ul>
  </div>
  <div class="column">
    <h1>Office</h1>
    <ul>
      <li><a href="/components/14">Bookcases</a></li>
      <li><a href="/components/15">Computer Armoires</a></li>
      <li><a href="/components/16">Computer Carts</a></li>
      <li><a href="/components/17">Conference Tables</a></li>
      <li><a href="/components/18">Computer Credenzas</a></li>
      <li><a href="/components/19">Desks</a></li>
      <li><a href="/components/20">Executive Desks</a></li>
      <li><a href="/components/21">Filing Cabinets</a></li>
      <li><a href="/components/22">Hutches</a></li>
      <li><a href="/components/23">L-Shaped Desks</a></li>
      <li><a href="/components/24">Peninsula Walls</a></li>
      <li><a href="/components/25">Writing Tables</a></li>
    </ul>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T06:06:58.067

试试看[`each_slice`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice)！

```
- Category.products.each_slice(2) do |group|
  .column
    - group.each do |product|
      %h1
        =product.title
      %ul
        - product.components.each do |component|
          %li
            = link_to component.title, component 
```

# javascript - 如何根据 AngularJS 输入类 = ng-invalid 设置 Twitter Bootstrap 类 = 错误？

> ID：15859011
> 
> 赞同：19
> 
> 时间：2013-04-07T04:55:41.870
> 
> 标签：javascript, html, css, twitter-bootstrap, angularjs

我有一个问题，我的 CSS 没有生效（在 Chrome 中），我认为与 Twitter Bootstrap 存在一些冲突。

```
input.ng-invalid {
    border-color: red;
    outline-color: red;
} 
```

我的模式在我的控制器中定义为：

```
$scope.hexPattern = /^[0-9A-Fa-f]+$/; 
```

并从实时 DOM 复制 HTML，我看到两者`ng-invalid`都已`ng-invalid-pattern`设置，所以我`ng-pattern`必须工作。

```
<div class="control-group">
    <label class="control-label" for="salt">Salt: </label>
    <div class="controls">
        <input type="text" id="salt" ng-model="salt" ng-pattern="hexPattern" class="ng-dirty ng-invalid ng-invalid-pattern">
    </div>
</div> 
```

我看到在 Twitter Bootstrap Base CSS 的[表单](http://twitter.github.io/bootstrap/base-css.html#forms)部分的“验证状态”部分中，我看到我需要将该`error`类添加到控制组 div。

```
<div class="control-group error"> 
```

**问题：** 如何设置`class=error`基于子输入`class=ng-invalid`？这可以通过一些柔和的 ng 类表达式来完成吗？我可以通过控制器中的代码进行设置吗？有没有办法“.$watch”像属性变化这样的模式评估？任何其他想法来获得我的“红色”轮廓？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-07T06:53:17.637

您可以使用`ng-class`指令轻松地做到这一点：

```
<form name="myForm">
  <div class="control-group" ng-class="{ error: myForm.salt.$invalid }">
    <label class="control-label" for="salt">Salt: </label>
    <div class="controls">
      <input type="text" name="salt" ng-model="salt" ng-pattern="hexPattern">
    </div>
  </div>
</form> 
```

[http://plnkr.co/edit/RihsxA?p=preview](http://plnkr.co/edit/RihsxA?p=preview)

**编辑**

引导程序 3.3.5 和角度 1.4.2 的示例：

```
<form name="myForm">
  <div class="form-group" ng-class="{ 'has-error': myForm.salt.$invalid }">
    <label class="control-label" for="salt">Salt: </label>
    <input class="form-control" type="text" name="salt" ng-model="salt" ng-pattern="hexPattern">
  </div>
</form> 
```

[http://plnkr.co/edit/5JNCrY8yQmcnA9ysC7Vc?p=preview](http://plnkr.co/edit/5JNCrY8yQmcnA9ysC7Vc?p=preview)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-20T12:30:12.923

我认为更好的解决方案是添加您自己的 CSS 规则。它使代码更简单，并且作为奖励，您可以将规则设置为仅适用于“脏”元素。这样，只有在用户尝试输入内容后，字段才会突出显示。

在我的应用程序中，我刚刚添加了这个 css，基于[AngularJS 表单文档](http://docs.angularjs.org/guide/forms)中的示例。

```
/* Forms */
.ng-invalid.ng-dirty {
  border-color: red;
  outline-color: red;
}
.ng-valid.ng-dirty {
  border-color: green;
  outline-color: green;
} 
```

# javascript - jQuery：当窗口宽度与数组中的任何值匹配时触发函数

> ID：15859018
> 
> 赞同：1
> 
> 时间：2013-04-07T04:56:37.080
> 
> 标签：javascript, jquery, arrays, responsive-design, window-resize

我正在一个响应式网站上工作，并且有几个特定的​​功能我需要在窗口调整大小的某些点触发：当窗口达到定义的“移动宽度”时，当它达到定义的“桌面”宽度时，以及当它达到任何宽度时在指定的数字数组（我的 CSS 断点）中。

这是一个精简的小提琴，显示了我在哪里（所有附加的段落元素都是我的函数将去哪里的占位符）：http: [//jsfiddle.net/ygwug/](http://jsfiddle.net/ygwug/)

正如您通过调整窗口大小看到的那样，我已经让移动/桌面检查工作了，但是断点检查器不起作用。具体与此相关的代码如下：

```
var breakpoints = [320, 480, 550, 650, 720, 790, 1000, 1190];
    window_w = $wind.width();

var breakpointHit = function() {
    $('body').append("<p>Breakpoint was hit!</p>");
}

if ( $.inArray( window_w, breakpoints ) > -1 ) {
    breakpointHit();
} 
```

据我了解，如果数组中不存在该值，则 $.inArray 应返回 -1，如果存在则返回该值的索引，这就是为什么我使用 "> -1" 来确定该值是否存在于数组。但是由于我在开发工具中没有看到任何语法错误，所以我的逻辑中一定有错误。

如果有人能帮助我指出正确的方向，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:14:36.827

检查你原来的 jFiddle 这个修改：http: [//jsfiddle.net/hKRrm/1/](http://jsfiddle.net/hKRrm/1/)

我改变了什么：

*   将断点测试移动到窗口调整大小
*   允许`breakpointHit`接受被命中的断点
*   修改你的断点测试，使其`window_w < breakpoint`尽可能符合预期（`==`永远不会让你到任何地方）
*   添加当前断点的缓存以防止它多次触发
*   将`mobileCheck`调用移到`breakpointHit`它应该在的函数中。我的意思是您只想检查是否在遇到断点时是否在移动设备上，而不是一直。

这可能会或可能不会回答您的问题，但这就是我将您的问题解释为要求的内容。

# hibernate - Hibernate - Open session per view with multiple sessionfactories

> ID：15859022
> 
> 赞同：1
> 
> 时间：2013-04-07T04:57:25.737
> 
> 标签：hibernate, view, sessionfactory

Does anyone have any examples for how to implement open-session-per-view pattern with multiple sessionfactories. My application queries 3 databases. Some views need to be rendered by calls to all three databases.

# c# - No Updation in GridView

> ID：15859023
> 
> 赞同：0
> 
> 时间：2013-04-07T04:57:26.260
> 
> 标签：c#, .net, database

Table employeeTable contain

EmployeeID int primary key. FirstName varchar(50), LastName varchar(50), Title varchar(50), Country varchar(50)

created a GridView Edit, Delete, and Update functionality. but it donot update when click update. my code:

```
 <asp:GridView ID="GridView1" runat="server" GridLines="None" AutoGenerateColumns="false"

    AlternatingRowStyle-BackColor="#EEEEEE" EditRowStyle-BorderColor="Red"

    onrowcancelingedit="GridView1_RowCancelling"  

     onrowdeleting="GridView1_RowDeleting" onrowediting="GridView1_RowEditing" 

     onrowupdating="GridView1_RowUpdating" DataKeyNames="EmployeeID">            

     <Columns>            

       <asp:TemplateField Visible="false" HeaderText="EmployeeID">

        <ItemTemplate>

          <asp:Label runat="server" ID="EmployeeID" Text='<%#Eval("EmployeeID")%>' />

          </ItemTemplate>

         </asp:TemplateField>

         <asp:TemplateField HeaderText="LastName">

        <ItemTemplate>

          <asp:Label runat="server" ID="LastName" Text='<%#Eval("LastName") %>' />

        </ItemTemplate>

        <EditItemTemplate>

        <asp:TextBox runat="server" ID="txtLastName" Text='<%#Eval("LastName") %>' />

        <asp:RequiredFieldValidator runat="server" ID="rfdLastName"                 
           ControlToValidate="txtLastName" ValidationGroup="var1" ErrorMessage="*" />

        </EditItemTemplate>

        </asp:TemplateField>

        <asp:TemplateField HeaderText="Title">

        <ItemTemplate>

          <asp:Label runat="server" ID="Title" Text='<%#Eval("Title") %>' />

        </ItemTemplate>

        <EditItemTemplate>

          <asp:TextBox runat="server" ID="txtTitle" Text='<%#Eval("Title") %>' />

          <asp:RequiredFieldValidator runat="server" ID="rfdTitle"                
                 ControlToValidate="txtTitle" ValidationGroup="var1" ErrorMessage="*" />

        </EditItemTemplate>

     </asp:TemplateField>

       <asp:TemplateField HeaderText="Country">
       <ItemTemplate>

         <asp:Label runat="server" ID="Country" Text='<%#Eval("country") %>'/>

       </ItemTemplate>

       <EditItemTemplate>

         <asp:TextBox runat="server" ID="txtCountry" Text='<%#Eval("country") %>' />

         <asp:RequiredFieldValidator runat="server" ID="rfdCountry"          
                ControlToValidate="txtCountry" ValidationGroup="var1" ErrorMessage="*" />

       </EditItemTemplate>

      </asp:TemplateField>

     <asp:TemplateField HeaderText="Action">

    <ItemTemplate>

   <asp:LinkButton ID="btnEdit" Text="Edit" runat="server" CommandName="Edit" />

  <br />
  <asp:LinkButton ID="btnDelete" Text="Delete" runat="server" CommandName="Delete" />

  </ItemTemplate>

  <EditItemTemplate>

  <asp:LinkButton ID="btnUpdate" Text="Update" runat="server" CommandName="Update" />

  <asp:LinkButton ID="btnCancel" Text="Cancel" runat="server" CommandName="Cancel" />

  </EditItemTemplate>

    </asp:TemplateField>
   </Columns>
  </asp:GridView> 
```

my c# code:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
 using System.Web.UI.WebControls;
 using System.Data.SqlClient;
 using System.Configuration;
 using System.Data;

 namespace new1
{
public partial class WebForm7 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
       {
          SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings    ["vinkpConnectionString"].ConnectionString);
               conn.Open();
               SqlCommand comm = new SqlCommand("select EmployeeID,FirstName,LastName,Title,Country from employeeTable  ", conn);
               comm.ExecuteReader();
               conn.Close();
               SqlDataAdapter da = new SqlDataAdapter(comm);
                   DataTable dt = new DataTable();
                   da.Fill(dt);
                   GridView1.DataSource = dt;
                   GridView1.DataBind();

           }

    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
       {

        GridView1.EditIndex = e.NewEditIndex;

        BindGridData();

        }

    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)

        {

         string s = GridView1.DataKeys[e.RowIndex].Value.ToString();            

         Label EmployeeID = GridView1.Rows[e.RowIndex].FindControl("EmployeeID") as Label;

         TextBox LastName = GridView1.Rows[e.RowIndex].FindControl("txtLastName") as TextBox;

         TextBox Title = GridView1.Rows[e.RowIndex].FindControl("txtTitle") as TextBox;

         TextBox Country = GridView1.Rows[e.RowIndex].FindControl("txtCountry") as TextBox;

         String UpdateQuery = string.Format("UPDATE employeeTable SET LastName,Title,Country WHERE EmployeeID='"+Convert.ToInt32(EmployeeID.Text)+"'",LastName.Text, Title.Text, Country.Text);

           GridView1.EditIndex = -1;

           BindGridData(UpdateQuery);

           }
    private void BindGridData(string Query)

         { 

           string connectionstring  = ConfigurationManager.ConnectionStrings["vinkpConnectionString"].ConnectionString;
           using (SqlConnection conn = new SqlConnection(connectionstring))
             {
             conn.Open();
             using (SqlCommand comm = new SqlCommand(Query +";select EmployeeID,FirstName,LastName,Title,Country from employeeTable ", conn))
                {
                    SqlDataAdapter da = new SqlDataAdapter(comm);
                    DataSet ds = new DataSet();
                    da.Fill(ds);
                    GridView1.DataSource = ds;
                    GridView1.DataBind();

                  }

               }

          }

    protected void GridView1_RowCancelling(object sender, GridViewCancelEditEventArgs e)
       {
            GridView1.EditIndex = -1;
           BindGridData();
        }
   protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)

      {
       string EmployeeID = GridView1.DataKeys[e.RowIndex].Value.ToString();
       string Query = "delete employeeTable where EmployeeID = " + EmployeeID;
          BindGridData(Query);
       }
   private void BindGridData()
      {
          using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["vinkpConnectionString"].ConnectionString))
           {
             conn.Open();
             using (SqlCommand comm = new SqlCommand("select EmployeeID,FirstName,LastName,Title,Country from employeeTable ", conn))

                {
                   SqlDataAdapter da = new SqlDataAdapter(comm);
                   DataSet ds = new DataSet();
                   da.Fill(ds); 
                   GridView1.DataSource = ds;
                   GridView1.DataBind();
                 }

             }

        }

   } 
```

why error occur?any mistake in code?when click edit textboxes appeared.but click update no updation show in Gridview.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:59:39.543

You are binding GridView1 in Page_Load every time page_load event is fired, Which causes lose of changes in `GridView` on `postback`. Bind grid in `!IsPostBack` block to retain its state on postback

```
protected void Page_Load(object sender, EventArgs e)
{
      if(!Page.IsPostBack)
      {   
          SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings    ["vinkpConnectionString"].ConnectionString);
          conn.Open();
          SqlCommand comm = new SqlCommand("select EmployeeID,FirstName,LastName,Title,Country from employeeTable  ", conn);
          comm.ExecuteReader();
          conn.Close();
          SqlDataAdapter da = new SqlDataAdapter(comm);
          DataTable dt = new DataTable();
          da.Fill(dt);
          GridView1.DataSource = dt;
          GridView1.DataBind();
      }
} 
```

# sorting - Google Apps 脚本附加排序规则

> ID：15859024
> 
> 赞同：4
> 
> 时间：2013-04-07T04:57:32.123
> 
> 标签：sorting, google-apps-script, google-spreadsheet-api

我正在开发一个 Google Apps Script 电子表格应用程序，我希望该程序具有的一项功能是根据来自 2 个不同列的数据自动对一系列表单响应进行排序。所以我想按第 16 列中的数据对其进行排序，然后按第 1 列排序。我可以使用以下方法手动实现此功能： [https ://drive.googleblog.com/2010/06/tips-tricks-advanced -sorting-rules-in.html](https://drive.googleblog.com/2010/06/tips-tricks-advanced-sorting-rules-in.html)

目前我正在`Spreadsheet.sort(column, ascending)`使用第一列运行该函数，但我无法对其进行排序，以便它接受第二列作为附加排序规则。Google Apps 脚本中是否有可以用来模拟此功能的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T13:38:40.370

请参阅文档： [https://developers.google.com/apps-script/reference/spreadsheet/range#sort(Object)](https://developers.google.com/apps-script/reference/spreadsheet/range#sort(Object))

```
function sortFormResponses() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();

  // change name of sheet to your sheet name
  var s = ss.getSheetByName("Form Responses");
  var lastCol = s.getLastColumn();
  var lastRow = s.getLastRow();

  // assumes headers in row 1
  var r = s.getRange(2, 1, lastRow - 1, lastCol);

  // Note the use of an array
  r.sort([{ column: 1, ascending: true }, { column: 16, ascending: true}]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:53:04.860

您可以在数组级别进行排序，只需将数据从工作表获取到矩阵并在多遍中对矩阵进行排序，选择要排序的列。

像这样的东西：

```
function test(){
sortSheetOnColumn(2,3)
}

function sortSheetOnColumn(col1,col2){
  var sh = SpreadsheetApp.getActiveSheet();
  var data = sh.getDataRange().getValues();// get all data
  var header = data.shift();
  data.sort(function(x,y){  // Note: sort method changes the original array
//  var xp = Number(x[col2-1]);// use these to sort on numeric values
//  var yp = Number(y[col2-1]);
  var xp = x[col2-1].toLowerCase();// use these for non-numeric values
  var yp = y[col2-1].toLowerCase(); // I used toLowerCase() for my use case but you can remove it or change it to whatever you need
  Logger.log(xp+'   '+yp); // just to check the sort is OK
  return xp == yp ? 0 : xp < yp ? -1 : 1;// sort on column col ascending
  });
  data.sort(function(x,y){  // Note: sort method changes the original array
//  var xp = Number(x[col1-1]);// use these to sort on numeric values
//  var yp = Number(y[col1-1]);
  var xp = x[col1-1].toLowerCase();// use these for non-numeric values
  var yp = y[col1-1].toLowerCase();//
  Logger.log(xp+'   '+yp); // just to check the sort is OK
  return xp == yp ? 0 : xp < yp ? -1 : 1;// sort on column col ascending
  });
// and at the end take back the headers
  data.unshift(header);
  sh.getDataRange().setValues(data);
} 
```

或者更好，遵循亚当的评论：

```
function sortSheetOnColumn2(col1, col2) {
  var sh = SpreadsheetApp.getActiveSheet();
  var data = sh.getDataRange().getValues();// get all data
  var header = data.shift(), x1, y1, x2, y2;
  col1--;
  col2--;
  data.sort(function(x, y) {
    x1 = x[col1].toLowerCase();
    y1 = y[col1].toLowerCase();
    x2 = x[col2].toLowerCase();
    y2 = y[col2].toLowerCase();
    return x1 == y1 ? (x2 == y2 ? 0 : x2 < y2 ? -1 : 1) : x1 < y1 ? -1 : 1;
  });
  data.unshift(header);
  sh.getDataRange().setValues(data);
} 
```

但是**迈克尔的回答如果更聪明地**使用我不知道的 Range.sort 方法中的构建（至少是它的扩展可能性）。

# shared-libraries - GLEW 1.9.0 构建 64 位 .so 即使使用 m32 参数？

> ID：15859031
> 
> 赞同：1
> 
> 时间：2013-04-07T04:59:34.480
> 
> 标签：shared-libraries, 32bit-64bit, cross-compiling, glew

我一直在尝试在 64 位 RedHat 4 机器下编译 GLEW-1.9.0 的 32 位共享库，但似乎无论我尝试什么，它产生的共享库都是 64 位的（这是确定的）在输出目录中使用“file libGLEW*”）。

GLEW 似乎有自己的体系结构检测系统。最终，这归结为“shell uname -m”，我尝试使用“setarch i386”对其进行更改。调用后“uname -m”的输出是“i686”，它不是 i386，但仍应为 32 位。

在我的 32 位构建之前，我一直将 CFLAGS.EXTRA 设置为“-m32 -Wl,-rpath,$(APPDIR32)/lib -fPIC”，其中 $(APPDIR32) 也是我要输出到的目录作为我链接库的地方。这对我的 64 位版本非常有效（字符串中的 '32' 替换为 '64' 除外）。

我一直在使用 GLEW 的 Makefile 如下（在设置了上面提到的变量以及其他不太相关的变量之后）：“make -f Makefile all”

将 LDFLAGS 设置为 -m32 或 melf_i386 对输出文件的格式没有影响，它总是以 ELF_64（而不是 ELF_32）结束。被链接的库都是 32 位的，这就是它抱怨的原因之一，如下所述。

在构建过程中，我收到重复的警告，如下所示...

```
/usr/bin/ld: warning: i386 architecture of input file `tmp/linux/default/shared/glew.o' is incompatible with i386:x86-64 output 
```

一个问题：i686 是 32 位架构吗？维基百科页面对此不清楚。我在该页面中发现了一个点，它说某些 i686 处理器支持 64 位指令集。

另一个问题：我还没有找到任何关于在 64 位环境中为 GLEW 构建 32 位共享库的有用信息。你能给我任何指示吗？

最后一个问题：你能看出我哪里出错了吗，或者你知道我需要采取什么额外的措施来构建一个 32 位共享库吗？

为了响应有关上述警告的确切命令行及其输出的信息请求，如下...

```
cc -shared -Wl,-soname=libGLEW.so.1.9 -o lib/libGLEW.so.1.9.0 tmp/linux/default/shared/glew.o -L/usr/X11R6/lib -L/usr/lib -lXmu -lXi -lGL -lXext -lX11 
/usr/bin/ld: skipping incompatible /usr/lib/libXmu.so when searching for -lXmu
/usr/bin/ld: skipping incompatible /usr/lib/libXi.so when searching for -lXi
/usr/bin/ld: skipping incompatible /usr/lib/libGL.so when searching for -lGL
/usr/bin/ld: skipping incompatible /usr/lib/libXext.so when searching for -lXext
/usr/bin/ld: skipping incompatible /usr/lib/libX11.so when searching for -lX11
/usr/bin/ld: skipping incompatible /usr/lib/libc.so when searching for -lc
/usr/bin/ld: skipping incompatible /usr/lib/libc.a when searching for -lc
/usr/bin/ld: warning: i386 architecture of input file `tmp/linux/default/shared/glew.o' is incompatible with i386:x86-64 output 
```

这是我的 makefile，以防你真的很兴奋并想要更多材料。如果你把这个 makefile 放在与 GLEW-1.9.0 的 Makefile 相同的目录中（直到你尝试 configure32），这个 makefile 就可以正常工作。只要确保设置 TOPDIR。使用'make -f clean'、'make -f configure32'、'make -f all'、'make -f install'。

```
APPLICATION = glew
VERSION = 1.9.0
FULLAPPLICATION = $(APPLICATION)-$(VERSION)

TOPDIR = /home/<username>/dev/project/third-party

APPDIRROOT  = $(TOPDIR)/apps-miles

ARCH=$(shell uname | sed -e 's/-//g')
SHELL = /bin/csh

MACHTYPE32= i386
APPDIR32                = $(APPDIRROOT)/$(ARCH)_$(MACHTYPE32)

MACHTYPE64= x86_64
APPDIR64                = $(APPDIRROOT)/$(ARCH)_$(MACHTYPE64)

#
#   Linux
#

ifeq ($(ARCH), Linux)
CC = gcc 
CXX = g++
CFLAGS.EXTRA32 += -m32 -Wl,-rpath,$(APPDIR32)/lib -fPIC
CFLAGS.EXTRA64 += -m64 -Wl,-rpath,$(APPDIR64)/lib -fPIC
PATH = /sbin:/usr/sbin:/bin:/usr/bin:/usr/X11R6/bin
endif

#
# Darwin
#

ifeq ($(ARCH), Darwin)
CC = gcc 
CXX = g++
CFLAGS.EXTRA32 += -m32 -mmacosx-version-min=10.5 -fPIC
CFLAGS.EXTRA64 += -m64 -mmacosx-version-min=10.5 -fPIC
PATH = /usr/bin:/bin:/usr/sbin:/sbin
endif

V_M_EXIST = $(shell test -e CONFIG.mk && echo 1)
ifeq ($(V_M_EXIST), 1)
include CONFIG.mk
endif

ECHO = echo

all::
    make -f Makefile all

configure32::
    @-/bin/rm CONFIG.mk; touch CONFIG.mk
    @echo "GLEW_DEST = $(APPDIR32)" >> CONFIG.mk
    @echo "export GLEW_DEST" >> CONFIG.mk
    @echo "LIBDIR = $(APPDIR32)/lib" >> CONFIG.mk
    @echo "export LIBDIR" >> CONFIG.mk
    @echo "CFLAGS.EXTRA = $(CFLAGS.EXTRA32)" >> CONFIG.mk
    @echo "export CFLAGS.EXTRA" >> CONFIG.mk

configure64::
    @-/bin/rm VAPOR.mk; touch CONFIG.mk
    @echo "GLEW_DEST = $(APPDIR64)" >> CONFIG.mk
    @echo "export GLEW_DEST" >> CONFIG.mk
    @echo "LIBDIR = $(APPDIR64)/lib" >> CONFIG.mk
    @echo "export LIBDIR" >> CONFIG.mk
    @echo "CFLAGS.EXTRA = $(CFLAGS.EXTRA64)" >> CONFIG.mk
    @echo "export CFLAGS.EXTRA" >> CONFIG.mk

install::
    make -f Makefile install

clean::
    make -f Makefile clean

frog:: 
    @$(ECHO) APPDIR = $(APPDIR32) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:19:56.523

**编辑：**更新以反映看似有效的解决方法

## 第一种方法

由于乍一看将 32 位代码与 64 位库链接起来不起作用，唯一的问题似乎是`config/Makefile.linux`从第 5 行开始的以下片段：

```
M_ARCH ?= $(shell uname -m)
ifeq (x86_64,${M_ARCH})
LDFLAGS.EXTRA = -L/usr/X11R6/lib64 -L/usr/lib64
LIBDIR = $(GLEW_DEST)/lib64
else
LDFLAGS.EXTRA = -L/usr/X11R6/lib -L/usr/lib
LIBDIR = $(GLEW_DEST)/lib
endif 
```

将库搜索路径硬编码为 64 位库。

## 第二眼

作为第一次尝试尝试类似的东西：

```
make  LDFLAGS=-m32 M_ARCH=anything_but_not_x86_64 
```

仍然失败，事实证明，除了不考虑通用约定之外，`LDFLAGS`将不会按照`Makefile`第 108 行的规则将其传递给链接器：

```
lib/$(LIB.SHARED): $(LIB.SOBJS)
    $(LD) $(LDFLAGS.SO) -o $@ $^ $(LIB.LDFLAGS) $(LIB.LIBS) 
```

使用 LDFLAGS.whatever 硬编码到所需的开关。

## 建议的解决方法

虽然任何解决方法都像：

*   `make LDFLAGS.SO="-L/usr/lib -L/usr/X11R6/lib -m32"`

应该工作最容易键入的似乎是以下一种：

*   `make LD="gcc -m32"`

`-m32`将交换机偷运到`LD`宏中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T04:23:51.190

由于其他答案很有用，因此情况可能会随着 glew 发生变化。我有更好的运气

```
make -j LDFLAGS.SO=-m32 LDFLAGS.DYNAMIC=-m32 CFLAGS=-m32 
```

如果您同时构建 32 位和 64 位库，请不要忘记`make clean`在两者之间进行构建。

# javascript - 如何从 JSON 对象中获取值？

> ID：15859039
> 
> 赞同：1
> 
> 时间：2013-04-07T05:01:05.090
> 
> 标签：javascript, json, node.js, express

我想使用多选从表和数据库中删除数据。但它只删除选定的第一行。我还使用 Firebug 为我的 sql 查询的 WHERE 条件获取 req.body.id，它给出了这个 POST 请求：

id 139,138 oper del

它只删除 ID 号为 139 的行。

这是我的查询：

connection.query("DELETE FROM "+content.table+" WHERE ?",content.condition,function(err,result){

```
content.condition= {id:req.body.id}; 
```

所以实际的查询变成了这样：

```
"DELETE FROM TABLE WHERE id = 139,138" 
```

对不起我的英语不好，但我希望有人能帮助我！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:40:30.357

WHERE 的正确语法是`WHERE ID IN (id1, id2, ..., idn)`

# c - How does C handle EOF?

> ID：15859041
> 
> 赞同：2
> 
> 时间：2013-04-07T05:01:09.310
> 
> 标签：c, feof

```
#include <stdio.h>

int main()
{
    FILE* f=fopen("book2.txt","r");
    char a[200];
    while(!feof(f))
    {
        fscanf(f,"%s",a);
        printf("%s ",a);
        printf("%d\n",ftell(f));
    }
    fclose(f);
    return 0;
} 
```

I have the code above. book2.txt contains "abcdef abcdef" with the cursor move to a newline(ie:abcdef abcdef\n). I get the results below.

```
abcdef 6
abcdef 13
abcdef 19 
```

I expect to get

```
abcdef 6
abcdef 13
15 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T05:16:30.057

测试 I/O 操作本身；除非您正在编写 Pascal，否则不要使用`feof()`（并且 C 不是 Pascal！）

```
#include <stdio.h>

int main(void)
{
    FILE *f = fopen("book2.txt", "r");
    char a[200];
    if (f != 0)
    {
        while (fscanf(f, "%199s", a) == 1)
        {
            printf("%s ", a);
            printf("%ld\n", ftell(f));
        }
        putchar('\n');
        fclose(f);
    }
    return 0;
} 
```

请注意，修改后的代码`f`在使用之前会进行测试，并通过指定字符串在转换规范中的长度来防止缓冲区溢出。请注意，`%s`最多读取一个空格字符；除非每行没有空格，否则它不会读取行。

您用于`feof()`区分转换失败、I/O 错误和操作后的 EOF，例如`fscanf()`报告故障。例如：

```
#include <stdio.h>

int main(void)
{
    FILE *f = fopen("book2.txt", "r");
    char a[200];
    if (f != 0)
    {
        while (fscanf(f, "%199s", a) == 1)
        {
            printf("%s ",a);
            printf("%ld\n", ftell(f));
        }
        putchar('\n');
        if (feof(f))
            printf("EOF\n");
        else if (ferror(f))
            printf("I/O error\n");
        else
            printf("Conversion failed\n");
        fclose(f);
    }
    return 0;
} 
```

使用`%s`，您将不会出现转换失败，并且 I/O 错误也不太可能发生。但是，如果转换说明符是`%d`，则数据中的标点符号可能会让您收到“转换失败”。

在超过 25 年的 C 编码中，我的代码中有 2 个地方使用了数千个文件（几个月前`feof()`我进行了[检查](https://stackoverflow.com/a/13113285/15168)），在这两种情况下，代码都区分了 EOF 和错误（大致如图所示）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T05:11:27.613

`feof`*在您***到达文件末尾之前，不会告诉您您已经到达文件***末尾***。从 .检查结果（返回值）`fscanf`。它会告诉您何时无法再读取。如果`fscanf`到达文件末尾，*它将*返回 EOF（并`feof`在发生这种情况后返回 true）。**

 **现在只是为了好玩，看看这种方式。永远不要这样做。

```
while(1) {
    switch(fscanf(f,"%s",a)){
        case 1: 
            printf("%s ",a);
            printf("%d\n",ftell(f));
            continue;
        case EOF:
            break;
    }
    break;
} 
```

这种方式是错误的，因为它很*聪明*。再有一些情况，整个循环的行为将变得非常难以辨别（例如[这个程序](https://codegolf.stackexchange.com/a/8734/2381)）。与您一起`fscanf`，您实际上只需要知道您是否获得了继续所需的所有数据。让下一个输入读取函数在找到 EOF 时对其进行处理。*此*调用`fscanf`需要填充*x*个值，因此，

```
if (fscanf(f,"%d %d %d", &i, &j, &k) != 3)
    /* cannot continue. need i j k values for next computation */ 
```

然后做你的错误响应，或者退出循环，或者你的程序接下来需要做的任何事情。但如果`fscanf`返回 3 以外的任何值，则它不会读取 3 个值。**

# python - 在 VideoCapture 之后读取图像时，OpenCV Python 挂起

> ID：15859044
> 
> 赞同：2
> 
> 时间：2013-04-07T05:01:30.113
> 
> 标签：python, opencv, video

我尝试使用 opencv python 包装器读取视频文件，代码工作正常，但几分钟后 capture.read() 开始返回空图像。我尝试了几个不同的视频文件，并使用了官方文档中指定的所有编码视频格式[：](http://opencv.willowgarage.com/wiki/VideoCodecs)我尝试过使用 virtualdub 和 mencoder。我正在使用 Python 2.7、opencv 2.4.4 和 win7。这是我使用的代码：

```
import cv2
c = cv2.VideoCapture("work.avi")
cv2.namedWindow("input")
f = True
while(f):
    f,img = c.read() # After some minutes all frames returnes are empty and f is false
                     # This doesn't throws any exception
    try:
        cv2.imshow("input",img)
    except cv2.error as e:
        print e # print error: (-206) Unrecognized or unsupported array type
    cv2.waitKey(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:26:46.507

视频文件是否已经结束？

[从http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html)的文档中`cv2.VideoCapture.read`：“如果没有抓取任何帧（相机已断开连接，或者视频文件中没有更多帧），则方法返回 false，函数返回 NULL 指针。”

上面的代码没有检查文件是否已经结束，所以它会一直运行并返回+显示空白图像。

线后

```
f,img = c.read() 
```

添加这个：

```
if not f:
    break 
```

# regex - 如何从正则表达式中提取字符串？

> ID：15859045
> 
> 赞同：0
> 
> 时间：2013-04-07T05:01:45.000
> 
> 标签：regex

如果你有一个像`test\(\d+,[a-z]+\)`. 它与一些字符串匹配，你如何提取匹配的字符串`\d+`and `[a-z]+`。

注意：以上是一个简单的例子，解决方案应该适用于任何情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:02:47.100

添加捕获组：

```
test\((\d+),([a-z]+)\) 
```

# php - 在php中将7天添加到日期时间（而不仅仅是日期）

> ID：15859053
> 
> 赞同：1
> 
> 时间：2013-04-07T05:02:32.857
> 
> 标签：php, mysql, datetime

我目前正在从存储在 mysql 中的表单中获取日期时间，如下所示：

```
2013-03-18 09:00:00 
```

但是，对于我正在构建的功能，我将一个事件插入到每周少于最后一周的日历中，除了开始日期已更改之外，插入基本上是复制的。

所以我得到这样的帖子：

```
if (isset($_POST['submit']))
{
    echo $start = $_POST['startDT'].':00';
} 
```

这行得通。仅放置一周的功能也是如此。我坚持的是在数周内复制它。

所以我的函数看起来像这样：

```
if ($allYear = "yes")
{
    //Get Week in question - gives me the week number for that particular week
    $startW = getStartWeek($start);
        //It'll always be week 56 as the end week of the year
    $endW = 56;
        //while $i is less than or equal to 56, do it and add 1 to $i
    for($i = $startW; $i <= $endw; $i++)
    {
        $query = $mysqli->prepare("INSERT INTO `Events`(`Start`, `End`, `Group`, `Unit`, `Type`, `Room`, `Lecturer`) VALUES ('$start', '$end', '$group', '$unit', '$type', '$room', '$lecturer')");
        /*Here is where I'd add code to make the datetime, for example:
        * $start is 2013-03-18 09:00:00 and $end is 2013-03-18 10:00:00
        * I want $start in the next iteration to be 2013-03-25 09:00:00 and $end
        * to be 2013-03-25 10:00:00\. I then want $start to be 2013-04-01 09:00:00
        * on the iteration after that. And so on.
        */
        $start += strtotime("+1 week");
        $end += strtotime("+1 week");
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T05:06:24.257

您应该真正使用有助于日期操作的 DateTime 类。[http://www.php.net/manual/en/class.datetime.php](http://www.php.net/manual/en/class.datetime.php)

```
$date = DateTime::createFromFormat('Y-m-d H:i:s', '2013-03-18 09:00:00');
$date->modify('+1 week');
echo $date->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-07T05:08:34.520

您可以通过这种方式添加一周的日期：

```
$date = "2013-07-04 08:10:25";
$date = strtotime($date);
$date = strtotime("+7 day", $date);
echo date('Y-M-d h:i:s', $date); 
```

# maven - 如何避免错误“javax.servlet-api-3.0.1.jar - jar not loaded”？

> ID：15859054
> 
> 赞同：7
> 
> 时间：2013-04-07T05:02:34.863
> 
> 标签：maven, grails, maven-2, tomcat7, maven-3

我正在使用 Windows 7、Java 1.7、Grails 2.1.4、Groovy 2.0.4 和 Tomcat 7.0.37。
执行我的项目时，出现以下错误：

```
Apr 5, 2013 11:08:00 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
    INFO: validateJarFile(/software/apache-tomcat-7.0.37/webapps/aaaportal-0.1/WEB-INF/lib/javax.servlet-api-3.0.1.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
    Apr 5, 2013 11:08:13 AM org.apache.catalina.loader.WebappClassLoader loadClass
    INFO: Illegal access: this web application instance has been stopped already.  Could not load org.bouncycastle.jce.provider.JDKKeyPairGenerator$RSABeanInfo.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
    java.lang.IllegalStateException
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1599)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
        at java.beans.Introspector.instantiate(Introspector.java:1444)
        at java.beans.Introspector.findExplicitBeanInfo(Introspector.java:428)
        at java.beans.Introspector.<init>(Introspector.java:377)
        at java.beans.Introspector.getBeanInfo(Introspector.java:164)
        at groovy.lang.MetaClassImpl$15.run(MetaClassImpl.java:2948) 
```

我尝试了不同版本的 servlet-api 和 bcprov-ext-jdk15- *** .jar，但这并没有帮助。

我应该担心这个错误吗？
我怎样才能让它消失？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T10:59:44.340

您只需为您的依赖项使用提供的范围，如下所示：

```
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>javax.servlet-api</artifactId>
  <version>3.0.1</version>
  <scope>provided</scope>
</dependency> 
```

因此它不会再打包在您的 WAR/EAR 文件中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-07T10:33:06.737

`servlet-api`jar 根本不应该在您的 WEB-INF/lib 中，因为它是由容器提供的。警告消息非常明确 - servlet 规范*要求*容器忽略 webapp 中包含`javax.servlet`类的任何 jar 文件。您可以放心地忽略该消息。

关于 bouncycastle 的第二条信息也可能不是看起来的那样。可能还有另一个错误导致 webapp 无法正确启动，并且当其他东西试图从已经关闭的 webapp 加载类时会出现此消息。检查您的其他日志文件，并可能在 Config.groovy 中编辑您的 log4j 设置以使日志记录更加详细，并查看是否显示了真正的潜在错误。

# asp.net - 如何在 ASP.NET MVC 网站上执行定期工作？

> ID：15859057
> 
> 赞同：17
> 
> 时间：2013-04-07T05:03:10.083
> 
> 标签：asp.net, asp.net-mvc, entity-framework

每天一次，我希望我的可能在多个服务器上运行的 ASP.NET MVC4 网站通过电子邮件将报告发送给我。这似乎是一件很常见的事情，但我很难想出一个好方法来做到这一点。

由于几个原因，尝试在服务器上运行计时器来完成这项工作是有问题的。如果我有多个服务器，那么我会在所有服务器上运行计时器（以防服务器出现故障）；我需要在它们之间进行协调，这变得很复杂。此外，尝试从后台线程通过实体框架访问数据库会增加复杂性，即我必须采用锁定策略来序列化周期性后台线程和“前台”控制器线程之间的 DbContext 对象的构造/处置。

另一种选择是在服务器上运行计时器，但让计时器线程对生成并通过电子邮件发送报告的魔术页面执行 GET。这解决了 DbContext 问题，因为数据库访问发生在正常的 Controller 操作中，与所有其他 Controller 对数据库的访问一起序列化。但是我仍然遇到可能运行多个计时器的问题，因此我需要在 Controller 操作中使用一些技巧来忽略多余的报告请求。

有什么建议么？这种事情一般是怎么做的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T08:57:58.023

您不应该在您的 Web 应用程序中执行此任务，因为 Phil Haack 在[`his blog post`](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx).

> 这种事情一般是怎么做的？

您可以从 Windows 服务或什至使用 Windows 调度程序定期运行的控制台应用程序执行此任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T09:01:52.343

正确的解决方案是创建一个独立于您的网站运行的后台服务。但是，如果这不是一个选项，那么您可以使用缓存，如Jeff Atwood[在 ASP.NET 中的简单后台任务中所解释的那样。](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-02T01:32:25.803

几个选项：

*   如果您将 Azure 作为网站托管，请查看最近发布的预览版 WebJobs ( [http://azure.microsoft.com/en-us/documentation/articles/web-sites-create-web-jobs/](http://azure.microsoft.com/en-us/documentation/articles/web-sites-create-web-jobs/) )
*   如果您不想在网站之外提取电子邮件逻辑的痛苦，请在 url 处公开该功能（使用处理程序、mvc 操作等），然后运行按计划访问该 url 的 Windows 计划任务.
*   编写一个简单的控制台应用程序，该应用程序通过 Windows 计划任务类似地执行。
*   或者编写一个简单的 Windows 服务，它在内部循环并检查时间和到达时间，点击该 url，运行该 exe，或者有自己的代码向您发送电子邮件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T11:30:35.073

我建议将 Quartz.NET 作为 Windows 服务运行：

[`Quartz.NET - Enterprise Job Scheduler for .NET Platform`](http://quartznet.sourceforge.net/)

下载中有 Windows 服务的样板代码。

# jquery - 使用 JQuery Load() 函数后不要更改 HTML DOM

> ID：15859066
> 
> 赞同：1
> 
> 时间：2013-04-07T05:05:24.447
> 
> 标签：jquery, ajax

有一个 HTML 页面，它使用`Ajax Load() function`将另一个 HTML 文件加载到当前 HTML 文档中（到指定元素中）。当点击`Links`其他 HTML 页面时加载正确。使用 load() 加载的代码会导致添加到 DOM，但源代码不会更改。您可以在页面中看到更改的 html，但在源代码中看不到。

DOM 在使用时没有操作`JQuery Load() function`吗？

**代码：**

```
<html>
<head>
    <title>JQuery Learning</title>
<script type="text/javascript" src="..//jquery-1.9.0.min.js"></script>

<script type="text/javascript">
    $('document').ready(function(){
        $('#newslinks a').click(function() {
                var url=$(this).attr('href');
                $('#headlines').load(url+' #newsItem');
                return false;
        });
    });

</script>

</head>

<body>
    <ul id='newslinks'>
        <li><a href='today.html'>Today's News</a></li>
        <li><a href='yesterday.html'>Yesterday's News</a></li>
        <li><a href='week.html'>Last Week's News</a></li>
    </ul>

    <div id='headlines'>
        <h3>This is headlines of News</h3>
    </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:07:20.070

> 在加载另一个 HTML 页面后使用 Firebug 查看 HTML 页面源时会出现问题，页面源没有改变！

使用`load()`原因添加加载的代码`DOM`但源代码不会改变。您可以在页面中看到更改`html`，但在源中看不到。

# struts2 - struts2+hibernate中不同用户的区分

> ID：15859068
> 
> 赞同：1
> 
> 时间：2013-04-07T05:05:32.050
> 
> 标签：struts2, actioncontext

struts.xml

```
<package name="admin" extends="struts-default" namespace="/admin">
        <interceptors>
            <interceptor class="interceptor.LoginInterceptor" name="loginInterceptor"/>
            <interceptor-stack name="loginStack">
                <interceptor-ref name="loginInterceptor"/>
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>                 
        </interceptors>     

        <default-interceptor-ref name="loginStack"/>

        <global-results>  
            <result name="login">/login.jsp</result>                        
        </global-results>

        <action name="index">
           <result>/WEB-INF/admin/index.jsp</result>
        </action>

        actions
        .
        .           

</package>

<package name="secure" extends="struts-default" namespace="/secure">
        <interceptors>
            <interceptor class="interceptor.LoginInterceptor" name="loginInterceptor"/>
            <interceptor-stack name="loginStack">
                <interceptor-ref name="loginInterceptor"/>
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>                 
        </interceptors>     

        <default-interceptor-ref name="loginStack"/>

        <global-results>  
            <result name="login">/login.jsp</result>                        
        </global-results>

        <action name="index">
           <result>/WEB-INF/admin/index.jsp</result>
        </action>

        <action class="actions.LoginAction" name="authenticateUser">
             <!-- generate dynamically for success-->
             <result name="input">/login.jsp</result>
             <result name="error">/login.jsp</result>
       </action>

</package> 
```

这是我的迭代器

```
public String intercept(ActionInvocation invocation) throws Exception {        
        final ActionContext context = invocation.getInvocationContext();
        HttpServletRequest request = (HttpServletRequest) context.get(HTTP_REQUEST);
        HttpSession session = request.getSession(true);

        Object user = session.getAttribute("user");
        if (user == null) {
            String loginAttempt = request.getParameter("loginAttempt");
            if(!StringUtils.isEmpty(loginAttempt)){
                return invocation.invoke();            
            }                            
            return "login";
        } else {            
            // Check for user role here
            // and redirect to action of specific namespace
            return invocation.invoke();
        } 
    } 
```

对不起我的错误我问错了。

我的应用程序管理员和客户中有两种用户。我想区分它们并根据角色动态重定向到特定的命名空间操作。

目前只有管理员身份验证功能。

我想出了这个解决方案。

但我不知道如何根据角色将请求 url 映射到特定名称规范的操作，无论是对客户的“安全”还是对管理员的“管理员”。否则显示全局异常。

admin 的所有 JSP 都位于 admin 文件夹中，而 customer 则位于 WEF-INF 文件夹中的 customer 文件夹中。

我还指定了一些我仍然需要填写但不知道该怎么做的评论。对于 cheking 角色我知道，但对于重定向不知道该怎么做。

我还没有实现这个。但我是带着这个想法而来的。甚至我认为可能或不可能。如果有更好的解决方案可以告诉我。

# database - DBMS 中的阻塞因子

> ID：15859070
> 
> 赞同：13
> 
> 时间：2013-04-07T05:05:43.420
> 
> 标签：database, indexing

DBMS 中的阻塞因素是什么，

我看到的那位说它是每条记录的块的下限值（所以 B/R 下限），其中 B 是块大小，R 是记录。我只是想知道，有人可以告诉我它使用的主要原因，以及它是否真的是 FLOORED？

对于任何想知道的人，我对 FLOORED 的理解是 1.5 会下降到 1.0。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-11-08T10:32:11.477

**[是的，这意味着有多少完整的记录适合一个块。](http://encyclopedia2.thefreedictionary.com/blocking+factor)**

（块是底层存储系统（hdd、san fs 等）愿意处理的最小数据单位。它的大小传统上是 512 字节的硬盘驱动器。）

它之所以被搁置是因为如果可以容纳 100 条半记录，那么每个块只能存储 100 条记录。

阻塞因子在许多与 dbms 相关的计算中被大量使用。

例如：

## 问题

我们有 10 000 000 条记录。每条记录长 80 字节。每条记录都包含一个唯一的密钥（假设是社会安全号码）。我们希望通过他们的社会安全号码快速查找某人。

## 但什么是快？

我们需要一些东西来衡量性能。花费最多时间的事情是从硬盘请求一个块。你知道，它是一种机械装置。它必须重新定位它的头部，并且blabla，因此与CPU的速度相比，或者与操作内存（RAM）访问的速度相比，它确实是一个缓慢的操作。好的，假设我们通过它需要多少磁盘访问来衡量操作的性能。我们希望尽量减少磁盘访问次数。好的，现在我们知道如何判断某事是慢还是快。

许多磁盘访问 -> 坏

很少的磁盘访问 -> 好

## 计算我们的数据需要多少块

假设在我们想象的硬件上，每个块是 5000 字节。我们要计算我们需要多少块。首先，我们需要知道有多少记录适合单个块：

`Blocking factor`= `floored((Block size)/(Record size))`= `floored(5000/80)`= `floored(62.5)`=`62 record/block`

我们有 10000000 条记录，所以我们需要`ceiled(10000000/62)=ceiled(161290.32)=161291`块来存储所有这些数据。

## 哇，这是很多数据。如何快速查找某人？

如果要读取所有块以通过键（社会保险号）找到一条记录，那么这将需要 161291 次磁盘访问。不好。

我们可以做得更好。让我们建立一个索引文件。我们将建立一个[稀疏索引](http://en.wikipedia.org/wiki/Database_index#Sparse_index)。

> 数据库中的稀疏索引是一个文件，其中包含数据文件中每个块的键和指针对。此文件中的每个键都与指向已排序数据文件中块的特定指针相关联。在具有重复键的聚集索引中，稀疏索引指向每个块中的最低搜索键。

好的，所以我们将在每个块的索引文件中都有一个指针和一个键。假设在我们想象的硬件上，一个指针有 4 个字节长，而在我们想象的世界中，一个社会安全号码（密钥）占用 6 个字节。

因此，我们将为索引中的每个块存储一个 10 字节长的键指针对。这些对中有多少对适合单个块？

```
Blocking factor of the index file = floored(5000/10) = 500 
```

...所以这意味着 500 个键指针对适合单个块。我们需要存储其中的 161291 个，所以索引文件会占用`ceiled(161291/500)=323`块

索引文件是按键排序的，所以我们可以在其中进行二进制搜索以找到指向包含记录的块的指针。在索引文件中执行二进制搜索会花费大多数`ceiled(log2(323))=9`磁盘访问。我们还需要`+1`磁盘访问来实际读取索引记录指向的数据块。

**哇，我们的查找可以在 10 个磁盘访问中工作。这真是太棒了。我们甚至可以做得更好。:)**

好的，因此您可以看到阻塞因子在此计算中被大量使用。

# c# - 如何突出显示面板网格上的特定区域

> ID：15859076
> 
> 赞同：0
> 
> 时间：2013-04-07T05:06:15.677
> 
> 标签：c#, foreach, panel, picturebox

制作一个面板填充表单，我希望一个角色（由一个图片框表示）继续移动。当我单击角色的图片框时，我希望突出显示一个表示该角色可以移动多远的区域。

下面的图片是我到目前为止所管理的，但这并不是我想要的。红色边框代表图片框，橙色矩形代表高亮区域。每个黑色边框的矩形都是一个面板。

![具有 2 个动作的角色的当前突出显示区域](https://i.stack.imgur.com/WiTJq.png)

一个角色移动到对角线上的面板应该花费 2 次移动，这样如果一个角色有 2 次移动可用，那么当点击图片框时，下面的区域应该被突出显示：

![具有 2 个动作的角色所需的突出显示区域](https://i.stack.imgur.com/VPH7W.png)

我理解为什么我的代码会突出显示一个正方形而不是我想要的区域，但我不知道如何修复它。任何帮助，将不胜感激; 下面是我写的代码。

```
 foreach (Panel pan in grid)
        {
            if (pan.Left <= (selectedCharacter.PictureBox.Left + (selectedCharacter.Movement * 80)) 
                && pan.Left >= (selectedCharacter.PictureBox.Left - (selectedCharacter.Movement * 80)))
            {
                if (pan.Top <= (selectedCharacter.PictureBox.Top + (selectedCharacter.Movement * 100)) 
                    && pan.Top >= (selectedCharacter.PictureBox.Top - (selectedCharacter.Movement * 100)))
                {
                        pan.BackColor = selectedCharacter.PlayerHighlight;
                }
            }
        } 
```

如果我不够清楚，请随时提出问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:04:24.540

这是我想出的解决这个问题的代码。如果您能看到解决此问题的更简单/不同的方法，请随时发表评论。

```
Panel[] highlightedMovement = new Panel[1]; //creates an array of panels to be highlighted
highlightedMovement[0] = characterBeingHighlighted.CurrentPanel; //adds the panel the character is currently on to the array

int z = 1;

//highlights panels adjecent to those already highlighted for as many iterations as the character's movement stat
for (int i = 0; i < characterBeingHighlighted.Movement; i++)
{
    foreach (Panel highlightPanel in highlightedMovement)
    {
        //goes through all panels on the grid and adds them to the array if they are adjacent to any already in the array.
        foreach (Panel gridPanel in grid)
        {
            //checks if the panel is adjacent to any already in the array
            if ((gridPanel.Top == (highlightPanel.Top + 100) && gridPanel.Left == highlightPanel.Left) ||
                (gridPanel.Top == (highlightPanel.Top - 100) && gridPanel.Left == highlightPanel.Left) ||
                (gridPanel.Left == (highlightPanel.Left + 80) && gridPanel.Top == highlightPanel.Top) ||
                (gridPanel.Left == (highlightPanel.Left - 80) && gridPanel.Top == highlightPanel.Top))
            {
                //adds it to the array but only if it isn't already in the array
                if (!highlightedMovement.Contains(gridPanel))
                {
                    Array.Resize(ref highlightedMovement, highlightedMovement.Length + 1);
                    highlightedMovement[z] = gridPanel;
                    z++;
                }
            }
        }
    }
}

//highlights all the panels in the array
foreach (Panel panel in highlightedMovement)
{
    panel.BackColor = characterBeingHighlighted.PlayerHighlight;
} 
```

# python - python中获取一个tgz文件的目录结构

> ID：15859089
> 
> 赞同：1
> 
> 时间：2013-04-07T05:08:06.797
> 
> 标签：python, gzip, listdir

我有一个`.tgz`包含多个文本文件的文件。我可以使用该模块在 Python 中读取它`gzip`，并且我看到第一行包含有关后续文件的一些信息，但尚不清楚如何正确地遍历 Python 中的文件。我希望能够做类似的事情：

```
for file in tgzFile:
  read file
  do stuff for file 
```

我可以读取 gzip 压缩文件的每一行，并且可以尝试从该行的内容中识别文件的开头，但我更喜欢更简洁的方法。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T05:29:29.953

```
import tarfile
tar = tarfile.open("file.tgz")
for file in tar.getmembers():
    print file.name 
```

Tar.getmembers() 返回可以相应使用的 TarInfo 对象列表。 [http://docs.python.org/2/library/tarfile.html#tarfile.TarInfo](http://docs.python.org/2/library/tarfile.html#tarfile.TarInfo)

# c++ - C++ - 如何检查是否不等于 & 运算符

> ID：15859093
> 
> 赞同：2
> 
> 时间：2013-04-07T05:08:56.597
> 
> 标签：c++, bit-manipulation

我正在做一个项目，我们在一个字节中跟踪标志。

可以使用几个选项设置该字节。例如：

```
0x00000001 - Person
0x00000002 - Object
0x00000003 - Vehicle 
```

现在，当需要检查这些对象时，我们可以这样做：

if(flags&0x00000001) { // 这是一个人 }

问题是，我想知道如何检查它是否不是一个人。如果这是一个简单的答案，请原谅我，但我已经尝试过 if !flags&0x00000001 并且它没有检查出来。我也尝试将其与 0 进行比较，但仍然没有运气。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T05:11:19.070

你走近了。`operator!`的[优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)高于`operator&`，因此需要括号：

```
if (!(flags & 0x00000001)) {
    //this is not a person
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T05:13:28.390

运算符“！”的优先级 高于运算符 '&'，因此请改用 !(flags&0x1)。

PS：0x3不能呈现Vehicle，但是呈现的是Person和Object。使用 0x4 表示车辆。

# c# - 子上下文菜单条

> ID：15859096
> 
> 赞同：0
> 
> 时间：2013-04-07T05:09:08.000
> 
> 标签：c#, winforms, contextmenu

我有一个容器，里面有一个控件。我有一个分配给这两个的 ContextMenuStrip。我想要发生的是控件的上下文菜单也包含容器中的所有项目。但是，当我尝试

```
ToolStripManager.Merge(this.ContextMenuStrip, this.Parent.ContextMenuStrip); 
```

整个容器的上下文菜单被删除

编辑：好的，我想我需要澄清一下。我的代码在某种程度上有效。this.ContextMenuStrip 是我为其分配了一个菜单的控件的属性，而 this.Parent.ContextMenuStrip 我已分配了一个不同的菜单。当我合并它们时，父菜单的所有项目都显示在子菜单中，但父菜单不再有菜单。

这就是我设置菜单的方式：

```
this.ContextMenuStrip = contextmenu1;
this.Parent.ContextMenuStrip = contextmenu2; 
```

好的，这是代码

Form1.Designer.cs：

```
namespace FailExample
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.components = new System.ComponentModel.Container();
            this.button1 = new System.Windows.Forms.Button();
            this.contextMenuStrip2 = new System.Windows.Forms.ContextMenuStrip(this.components);
            this.item2ToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
            this.contextMenuStrip1 = new System.Windows.Forms.ContextMenuStrip(this.components);
            this.item1ToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
            this.contextMenuStrip2.SuspendLayout();
            this.contextMenuStrip1.SuspendLayout();
            this.SuspendLayout();
            // 
            // button1
            // 
            this.button1.ContextMenuStrip = this.contextMenuStrip2;
            this.button1.Location = new System.Drawing.Point(86, 82);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(75, 23);
            this.button1.TabIndex = 0;
            this.button1.Text = "button1";
            this.button1.UseVisualStyleBackColor = true;
            // 
            // contextMenuStrip2
            // 
            this.contextMenuStrip2.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
            this.item2ToolStripMenuItem});
            this.contextMenuStrip2.Name = "contextMenuStrip2";
            this.contextMenuStrip2.Size = new System.Drawing.Size(105, 26);
            // 
            // item2ToolStripMenuItem
            // 
            this.item2ToolStripMenuItem.Name = "item2ToolStripMenuItem";
            this.item2ToolStripMenuItem.Size = new System.Drawing.Size(104, 22);
            this.item2ToolStripMenuItem.Text = "Item2";
            // 
            // contextMenuStrip1
            // 
            this.contextMenuStrip1.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
            this.item1ToolStripMenuItem});
            this.contextMenuStrip1.Name = "contextMenuStrip1";
            this.contextMenuStrip1.Size = new System.Drawing.Size(105, 26);
            // 
            // item1ToolStripMenuItem
            // 
            this.item1ToolStripMenuItem.Name = "item1ToolStripMenuItem";
            this.item1ToolStripMenuItem.Size = new System.Drawing.Size(104, 22);
            this.item1ToolStripMenuItem.Text = "Item1";
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(284, 261);
            this.ContextMenuStrip = this.contextMenuStrip1;
            this.Controls.Add(this.button1);
            this.Name = "Form1";
            this.Text = "Form1";
            this.Load += new System.EventHandler(this.Form1_Load);
            this.contextMenuStrip2.ResumeLayout(false);
            this.contextMenuStrip1.ResumeLayout(false);
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.Button button1;
        private System.Windows.Forms.ContextMenuStrip contextMenuStrip2;
        private System.Windows.Forms.ToolStripMenuItem item2ToolStripMenuItem;
        private System.Windows.Forms.ContextMenuStrip contextMenuStrip1;
        private System.Windows.Forms.ToolStripMenuItem item1ToolStripMenuItem;
    }
} 
```

和 Form1.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace FailExample
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            ToolStripManager.Merge(button1.Parent.ContextMenuStrip, button1.ContextMenuStrip);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:24:14.950

当我尝试您的示例时，我得到一个 NullReferenceException 。但这对我有用：

```
ToolStripManager.Merge(contextMenuStrip1, contextMenuStrip2); 
```

我认为您对 ContextMenuStrips 的引用是错误的或相同的。

当我查看 VS 在鼠标悬停时显示的信息时：

*   `this.ContextMenuStrip`指底层形式
*   `this.Parent.ContextMenuStrip`引用表单的父级（为空）
*   无论如何，没有任何参考引用您的上下文菜单`ToolStripContainer`

# c# - C#中的多个资源文件

> ID：15859105
> 
> 赞同：1
> 
> 时间：2013-04-07T05:10:48.473
> 
> 标签：c#, localization, embedded-resource

我一直在寻找类似问题的答案，但这些问题要么相当老，要么没有答案。

**背景**

我们有几个不同的网站共享相同的代码库，它们是分开托管的。所有网站都是英文的，但它们都有本地化的内容（例如英国、澳大利亚和新西兰）。本地化内容可能包括电子邮件地址、电话号码和不同的公司。

该代码已硬编码以使用本地化控件（例如 lit_PhoneAU、lit_PhoneNZ 和 lit_PhoneUK）分隔内容。有代码可以根据位置配置隐藏和显示这些控件。

**问题** 编码的内容可以满足我们之前的需要，但它有其局限性并且不可扩展。

我们喜欢混合使用由数据库表填充的资源文件和对象属性。通过数据库调用加载一些常见的东西是相当直接的，但最好使用资源文件之类的东西来存储更具体和文字的东西。

**Question** 我对C#资源文件的理解是我们可以根据本地化设置如en-AU、en-UK、fr-fr等来切换资源文件。但是，它们不符合我们的目的，因为我们可能在一个位置有多个站点。

有没有办法可以轻松地在资源文件之间切换？还是我误解了资源文件的使用？还是您可以建议任何其他方式来管理文字内容。

**更新**

我必须说得很清楚。我的问题不在于切换 UiCulture，因为我们已经有代码来处理它。这是关于在同一文化中处理多个资源。例如，我们在英国的两个不同站点有相同的代码库。站点 A 是关于 A 部门的，它可能是 SiteA.co.uk，站点标题为 Company A，然后站点 B 是公司的另一个部门，站点可能是 siteB.co.uk。目前管理内容的效率非常低，因此我们试图将内容移动到资源文件或由数据库调用填充的业务对象中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:59:55.893

在请求发生之前，您可以在 Global.asax.cs 中选择您需要的本地化。

```
protected void Application_AcquireRequestState(object sender, EventArgs e)
{
    //Sets default culture to en-UK
    string culture = "en-UK";

    //Here you can choose the culture as you want.
    //If you don't want to have another culture, you can specify a default of any culture, and .resx files will use it.

    //In this example, I check if the culture is the fr-fr we use it, otherwise use en-UK.
    //Try to get values from Accept lang HTTP header
    if (HttpContext.Current.Request.UserLanguages != null &&
        HttpContext.Current.Request.UserLanguages.Length != 0)
    {
        //Gets accepted list 
        string name = HttpContext.Current.Request.UserLanguages[0];
        if (name.Equals("fr-fr", StringComparison.CurrentCultureIgnoreCase))
            culture = "fr-fr";
    }

    CultureInfo info = CultureInfo.CreateSpecificCulture(culture);
    //Finally setting culture for each request
    Thread.CurrentThread.CurrentUICulture = info;
    Thread.CurrentThread.CurrentCulture = info;
} 
```

然后，您可以使用*Thread.CurrentThread.CurrentUICulture*从符合文化的数据库中检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:17:05.903

您可以使用谷歌翻译（免费）到您的网站。它会自动将内容转换为所需的语言。只需浏览文档即可。否则我认为可以使用一些付费翻译..

# c# - .Net Regex Replace - 搜索文件路径时的多行

> ID：15859109
> 
> 赞同：2
> 
> 时间：2013-04-07T05:11:30.257
> 
> 标签：c#, regex

我希望清理包含文件路径的字符串，以删除父路径以获得更安全的日志记录。

它需要：

*   不区分大小写。
*   支持无限捕获替换。
*   在.net 中工作
*   接受提供或替换的路径是自动的（我正在动态创建搜索模式），因此需要以自动方式复制发生的任何字符串 fu

我想要一个多行字符串，如：

```
The file was: C:\\outputpath\\testfile.htm
And the second file was: C:\\OutputPath\\subfolder\\testfile2.htm' 
```

并让它找到并替换为输出：

```
The file was: testfile.htm
The second file was: subfolder\\testfile2.htm 
```

我一直在尝试这个：

```
var pathToRemove = "c:\\outputPath";
var sourceRegex = new Regex(".*(" + pathToRemove + ").*", RegexOptions.IgnoreCase);
var sanity = sourceRegex.Replace(input, String.Empty, 1000); 
```

我遇到了一个例外

`Unrecognized escape sequence \o.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:55:11.793

```
string pathToRemove = @"c:\\outputpath\\";
Regex sourceRegex = new Regex(pathToRemove, RegexOptions.IgnoreCase);
string sanity = sourceRegex.Replace(input, string.Empty); 
```

# jquery - $.focus() 不工作

> ID：15859113
> 
> 赞同：189
> 
> 时间：2013-04-07T05:12:39.457
> 
> 标签：jquery

[jQuery`focus()`文档](http://api.jquery.com/focus/)状态的最后一个示例

```
$('#id').focus() 
```

应该使输入集中（活动）。我似乎无法让这个工作。

即使在本网站的控制台中，我也在尝试搜索框

```
$('input[name="q"]').focus() 
```

我什么也没得到。有任何想法吗？

* * *

## 回答 #1

> 赞同：456
> 
> 时间：2013-04-07T05:20:44.620

实际上，只要您不专注于控制台，您为关注此站点提供的示例就可以正常工作。不起作用的原因仅仅是因为它没有从开发控制台中窃取焦点。如果您在控制台中运行以下代码，然后在浏览器窗口中快速单击，您将看到它聚焦在搜索框：

```
setTimeout(function() { $('input[name="q"]').focus() }, 3000); 
```

至于你的另一个，过去给我带来麻烦的一件事是事件的顺序。您不能在尚未附加到 DOM 的元素上调用 focus()。您尝试关注的元素是否已附加到 DOM？

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2015-12-21T17:26:40.947

在网上其他地方找到了解决方案...

```
$('#id').focus(); 
```

不工作。

```
$('#id').get(0).focus(); 
```

确实有效。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-03-23T08:28:05.500

这里的一些答案建议使用`setTimeout`来延迟关注目标元素的过程。其中一个提到目标位于模态对话框内。`setTimeout`在不知道使用位置的具体细节的情况下，我无法进一步评论解决方案的正确性。

事情的简单事实是，*您不能专注于尚不可见的元素*。如果遇到此问题**，请确保**在尝试聚焦时目标实际上是可见的。在我自己的情况下，我正在按照以下方式做一些事情：

```
$('#elementid').animate({left:0,duration:'slow'});
$('#elementid').focus(); 
```

这没有用。**当我从确实**有效的控制台执行 $('#elementid').focus()` 时，我才意识到发生了什么。*不同之处 - 在我的目标上方的代码中，由于动画可能不完整*，因此无法确定目标实际上是否可见。这就是线索：

```
$('#elementid').animate({left:0,duration:'slow',complete:focusFunction});

function focusFunction(){$('#elementid').focus();} 
```

按预期工作。我最初也提出了一个`setTimeout`解决方案，它也有效。但是，任意选择的超时时间迟早会破坏解决方案，具体取决于主机设备执行确保目标元素可见的过程的速度。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-06-08T02:20:36.293

如果您使用 bootstrap + modal，这对我有用：

```
 $(myModal).modal('toggle');
  $(myModal).on('shown.bs.modal', function() {
    $('#modalSearchBox').focus()
  }); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-08-27T12:47:27.767

以防万一其他人偶然发现这个问题并遇到与我相同的情况 - 我试图在单击另一个元素后设置焦点，但焦点似乎不起作用。事实证明我只需要一个`e.preventDefault();`- 这是一个例子：

```
$('#recipients ul li').mousedown(function(e) {
    // add recipient to list
    ...
    // focus back onto the input
    $('#message_recipient_input').focus();
    // prevent the focus from leaving
    e.preventDefault();
}); 
```

这有助于：

> 如果从 mousedown 事件处理程序调用 HTMLElement.focus()，则必须调用 event.preventDefault() 以防止焦点离开 HTMLElement。来源：[https ://developer.mozilla.org/en/docs/Web/API/HTMLElement/focus](https://developer.mozilla.org/en/docs/Web/API/HTMLElement/focus)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-06-25T13:45:04.800

我也有这个问题。在我的案例中有效的解决方案是在 HTML 元素上使用 tabindex 属性。

我在列表中使用`ng-repeat`了一些 li 元素，但无法使用 .focus() 将焦点放在第一个 li 上，因此我只是在循环期间将 tabindex 属性添加到每个 li。

所以现在`<li ng-repeat="user in users track by $index" tabindex="{{$index+1}}"></li>`

+1 是索引从 0 开始。在调用 .focus() 函数之前，还要确保元素存在于 DOM 中

我希望这有帮助。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-10-23T11:33:03.977

我意识到这是旧的，但今天遇到了。没有一个答案对我有用，我发现有效的是 setTimeout。我希望我的重点放在模式的输入字段上，使用 setTimeout 工作。希望这可以帮助！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-07T19:56:41.247

在 focus() 之前添加延迟。200 毫秒就足够了

```
function focusAndCursor(selector){
  var input = $(selector);
  setTimeout(function() {
    // this focus on last character if input isn't empty
    tmp = input.val(); input.focus().val("").blur().focus().val(tmp);
  }, 200);
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-07T23:55:36.987

对于那些因为使用“$(element).show()”而无法工作的人。我用下一个方法解决了它：

```
 var textbox = $("#otherOption");
 textbox.show("fast", function () {
    textbox[0].focus();
  }); 
```

所以你不需要计时器，它会在 show 方法完成后执行。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-04-09T11:52:49.543

刚才又遇到了这个问题，不管你信不信，我所要做的就是关闭开发者工具。显然，控制台选项卡的焦点优先于页面内容。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-01-29T15:15:14.627

就我而言，如果其他人遇到这种情况，我会加载一个表单以供查看，用户单击“编辑”，ajax 获取并返回值并更新表单。

就在这之后，我尝试了所有这些，但除了：

```
setTimeout(function() { $('input[name="q"]').focus() }, 3000); 
```

我不得不更改为（由于ajax）：

```
setTimeout(function() { $('input[name="q"]').focus() }, **500**); 
```

我终于只使用了 $("#q") 即使它是一个输入：

```
setTimeout(function () { $("#q").focus() }, 500); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-04-01T07:26:05.430

我遇到了类似的问题，将事件包装在`setTimout`函数中对我来说非常有效。但不知何故，感觉这不是解决它的最佳方法（手动延迟事件）。

但是，在我的情况下，焦点事件没有触发，因为元素是不可见/隐藏的，事实证明元素在几毫秒后可见，因为我在`element.on("focus")`函数内触发了焦点事件（这是在元素是单击并且元素集中在）。

这对我有用：

```
element.on("focus", (e) => {
  e.preventDefault();
  if (element.is(":visible")) {
    search_input.trigger("focus");
  }
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-14T20:09:20.563

确保元素及其父元素可见。您不能对隐藏元素使用焦点

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-19T07:41:11.257

专家提示。如果您想从开发控制台打开焦点，只需将控制台作为选项选项卡的单独窗口打开即可。最新的 Firefox 和 Chrome 支持此功能。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-01-21T07:15:53.187

我从 Chrome 的 DevTool 控制台测试了代码，但焦点部分不起作用。我后来发现只有当我从 DevTool 运行它并且我将代码实现到网站时才会出现这个问题，它工作正常。实际上，该元素获得了焦点，但 DevTool 立即将其删除。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-02-03T07:43:19.467

你可以试试这个`id`是`tries`

```
window.location.hash = '#tries'; 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-02-04T15:29:10.303

对于我的情况，我必须指定一个标签索引（`-1`如果只能通过脚本聚焦）

```
<div tabindex='-1'>
<!-- ... -->
</div> 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2017-04-11T10:12:54.890

附加解决方案有同样的问题，焦点（）似乎没有工作，但最终结果证明需要滚动到正确的位置：

*   [https://stackoverflow.com/a/43342974/1335717](https://stackoverflow.com/a/43342974/1335717)

# ssl - 如何在本地使用 Play 应用程序

> ID：15859114
> 
> 赞同：0
> 
> 时间：2013-04-07T05:12:52.280
> 
> 标签：ssl, heroku, playframework

嗨，我是游戏框架和 Heroku 的新手。我被要求开发一个托管在 Heroku 上的游戏应用程序，该应用程序是由其他人编写的。该应用程序附加了一个 PostgreSQL 数据库。

我想知道什么是最好的工作方式。我不想每次进行一些更改以查看结果时都将我的应用程序推送到 heroku。

由于远程数据库问题，“play run”命令无法在本地运行。我复制了 DATABASE_URL 值并将其放在配置文件中，但它仍然无法正常工作，因为它说“SSL 关闭”并且似乎打开 SSL 并不是一件容易的事情。

关于我应该如何处理这个项目的任何想法？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:33:36.853

为了从本地机器访问 Heroku Postgres 数据库，必须使用 SSL 连接。为此，您需要将以下查询参数添加到数据库连接字符串中：

```
?ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory 
```

另外，在本地运行时，我建议使用[Foreman](https://devcenter.heroku.com/articles/procfile#developing-locally-with-foreman)，它可以读取您的 Procfile 并注入环境变量，就像在 Heroku 上一样。要设置要使用的环境变量，请创建（但不要签入）一个`.env`文件，其中包含您希望应用程序可用的键值对。例如，像这样：

```
DATABASE_URL=postgres://user:pass@ec2-107-22-182-123.compute-1.amazonaws.com:5432/db?ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory 
```

然后，您将能够像这样运行您的应用程序：

```
foreman run play run 
```

提示：为了使创建`.env`更容易，请检查[`heroku-config`](https://github.com/ddollar/heroku-config)插件，它提供了`heroku config:pull`将配置从应用程序拉到`.env`文件的命令。当然，您可能希望使用 dev 数据库进行本地开发，但如果您愿意，这会让您投入生产。

# powershell - 对文本文件中的每一行做同样的事情

> ID：15859119
> 
> 赞同：0
> 
> 时间：2013-04-07T05:13:30.320
> 
> 标签：powershell, vbscript, batch-file

我有一个包含代理 IP 地址的文本文件列表，如下所示

```
192.168.1.5:8080
172.18.1.6:8080
195.68.1.7:8080
192.16.1.8:8080
192.15.1.9:8080
92.168.1.88:8080
12.185.1.45:8080
158.1.1.97:8080 
```

现在我想要的是一次设置一个上面文本文件中提到的代理地址，然后在 Internet Explorer 中打开一个网站 www.example.com。

我只想自动打开所有代理地址的网站。

如何使用 powershell、batch 或 vbs 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:36:41.310

您几乎可以修改以下脚本[http://poshcode.org/2897](http://poshcode.org/2897)。还有很多示例如何在 powershell 中修改代理，因此根据您的需要更改上述脚本应该不难

# php - 使用php如何记住文本字段并在下次访问该站点时使用cookie显示它？

> ID：15859120
> 
> 赞同：2
> 
> 时间：2013-04-07T05:13:40.967
> 
> 标签：php, forms, cookies, checkbox

好的，我有简单的文本字段来输入用户/通过记住用户复选框，但不知何故，我不确定我做错了什么，当我选中该框时，不会重新创建 cookie，并且在我重新访问该站点时不会创建 cookie用户名不会显示....这就是我所拥有的

```
function loginForm($userValue,$checkBox)
{

echo "<form action='index.php' method='get'>";
echo "<p>Username: <input type='text' name='user' value='$userValue' /></p>";
echo "<p>Password: <input type='password' name='pass' /></p>";
echo "<p>Remember my username next time I visit this site <input type='checkbox' name='remember'" . $checkBox . "/></p>";
echo "<input type='submit' value='Log In' />";
echo "</form>";

}

if((!(isset($_GET["user"]))) && (!(isset($_COOKIE["username"]))))
{
    loginForm('','');
}
if(isset($_GET["remember"]))
{
    setcookie("username",$_GET["user"], time() + 60);
    loginForm($_COOKIE["username"],"checked");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:35:50.787

看起来你有一些逻辑错误。一方面，您只需检查是否可以在设置 $_GET["remember"] 时使用 cookie 填写表单，这可能意味着表单刚刚提交。这是一个修改后的版本，可能是一个好的开始：

```
function loginForm($userValue,$checkBox)
{

echo "<form action='test.php' method='get'>";
echo "<p>Username: <input type='text' name='user' value='$userValue' /></p>";
echo "<p>Password: <input type='password' name='pass' /></p>";
echo "<p>Remember my username next time I visit this site <input type='checkbox' name='remember'" . $checkBox . "/></p>";
echo "<input type='submit' value='Log In' />";
echo "</form>";

}

if (!isset($_GET["user"]) && !isset($_COOKIE["username"]))
{
    loginForm('','');
}
else if (isset ($_COOKIE["username"]))
{
    loginform ($_COOKIE["username"], '');
}
if (isset($_GET["remember"]))
{
    setcookie("username",$_GET["user"], time() + 60);
} 
```

但是，最大的问题绝对是您仅在刚刚提交表单时才允许 cookie 工作。我刚刚发布的代码对我有用，并且记住了我的用户名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T05:18:40.067

您将 cookie 设置为从当前时间起 60 秒的过期日期。因此，当您重新访问该站点时，它可能刚刚过期。

# excel - Excel：匹配表中的值，然后返回特定列的值

> ID：15859121
> 
> 赞同：-1
> 
> 时间：2013-04-07T05:13:42.357
> 
> 标签：excel, excel-formula

我有一个看起来像这样的表：

```
userID                Payment
--------------------------------------
1                     5000
2                     2489
3                     2529
4                     7423
3                     4328
5                     6475
1                     5644
1                     8585
2                     3214
5                     9876 
```

我已经收集了所有不同的用户 ID 并将它们复制到一个新区域

```
1
2
3
4
5 
```

我想要一个可以放在不同用户 ID 旁边的公式，它将搜索第一个表，匹配用户 ID 并收集付款值的总和......所以我的不同用户 ID 表最终看起来像这样

```
userID        Payment
1             19229
2             5703
3             6857
4             7423
5             16351 
```

我猜我正在寻找带有 vlookup 的东西，但我无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:20:27.993

像这样使用`SUMIF`(userID in `A:A`, Payments in `B:B`)

```
=SUMIF(A:A,D1,B:B) 
```

# c# - 网页浏览器控件中设置控件默认值的函数

> ID：15859123
> 
> 赞同：1
> 
> 时间：2013-04-07T05:13:58.227
> 
> 标签：c#, webbrowser-control

我想定义一个公共函数，通过它我可以在 Web 浏览器控件中设置某些控件的默认值。Web 浏览器显示一个 HTML 文件。到目前为止，这是我想出的；但是，发生了“未处理 NullReferenceException”：

```
public void SetDefaultValue(string ControlID,string Value)
{
    webBrowser1.Document.GetElementById(ControlID).InnerText = Value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:23:37.493

您需要等待文档正确加载

```
public void WebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) 
{
   var webBrowser = sender as WebBrowser;
   webBrowser.DocumentCompleted -= WebBrowser_DocumentCompleted;

  webBrowser1.Document.GetElementById("Name").InnerText = "Hello World";

}    

private void btnClick(object sender, EventArgs e)
{
     var wbrowser = new WebBrowser(); // or can be existing object
      // Add web broswer to form or panel here.. 
     wbrowser.DocumentCompleted +=new WebBrowserDocumentCompletedEventHandler(WebBrowser_DocumentCompleted);
     wbrowser.Navigate("your_page_url_here");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T05:25:32.030

我为你写了一个例子：拳头`Navigate`到你的地址或设置它的`DocumentText`.

```
 private void Form1_Load(object sender, EventArgs e)
        {
             webBrowser1.DocumentText = "<html><body><textarea id=\"Name\" name=\"comments\" cols=\"16\" rows=\"1\">Some Things</textarea></body></html>";
        } 
```

当您的页面加载时，您可以获得它的元素。

```
 private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
         webBrowser1.Document.GetElementById("Name").InnerText="Some Thing";
        } 
```

# batch-file - 寻找批处理文件以将新行插入文本文件

> ID：15859128
> 
> 赞同：0
> 
> 时间：2013-04-07T05:15:31.367
> 
> 标签：batch-file, command-prompt

我有一个批处理文件，它从管理门户获取图像上传目录的内容，并为每个图像生成一个包含 img src 属性的文本文件。

此时，这些文本文件中的每一个都包含 20 多个图像的属性，然后我通过 c# 代码隐藏文件将其拉入 aspx 页面中的 div。

我正在切换到一个新的布局，所以我必须在每 3 行之后添加</li> <li>。

我正在尝试研究如何使用批处理文件来读取包含 img src 的文本并在每 3 行之后插入该代码，但我完全迷路了。bat

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:05:49.433

它可以很容易地使用纯批处理来完成，使用 FOR /F 循环遍历行，SET /A 递增计数器，延迟扩展或调用子例程以及 IF 语句以每隔 3 行添加额外的文本。

但我会使用我已经编写的执行正则表达式搜索和替换的实用程序。它是一个名为 REPL.BAT 的混合 JScript/批处理脚本，适用于任何现代 Windows 平台。如果您知道正则表达式，它非常容易使用，并且比任何纯批处理解决方案都要快得多。

它有一个 M（多行）选项，允许跨换行符进行搜索和替换，还有一个 X（扩展替换）选项，允许在替换文本中转义序列。

假设 REPL.BAT 位于您当前的文件夹中，或者位于您的 PATH 中的某个位置，那么以下简单脚本将`</li><li>`在原始文件的每 3 行之后插入一个新行。

***编辑：*** *参数化“注入每个”计数，并在替换字符串中更改`\n`为`\r\n`*

```
@echo off
setlocal
set "file=test.txt"
set "count=3"
<"%file%" call repl "((.*\n){%count%})" "$1</li><li>\r\n" mx >"%file%.new"
move /y "%file%.new" "%file%" >nul 
```

这是使上述脚本工作的 REPL.BAT 文件。它嵌入了完整的文档。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T07:09:33.497

> 它可以很容易地使用纯批处理来完成，使用 FOR /F 循环遍历行，SET /A 递增计数器，延迟扩展或调用子例程以及 IF 语句以每隔 3 行添加额外的文本。

所以在这里你会得到纯粹的批处理感觉:-)

```
@echo off
setlocal
set "file=test.txt"
set /a counter=0

(for /f "delims=" %%i in ('^<%file% findstr /n "^"') do call:processline "%%~i")>%file%.new
goto:eof

:processline
set "line=%~1"
set /a check=counter%%3
if %check% equ 0 if %counter% neq 0 echo(^</li^>^<li^>
set /a counter+=1
setlocal enabledelayedexpansion
echo(!line:*:=!
endlocal
exit /b 
```

编辑：`findstr`为空行添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T09:12:33.177

```
@ECHO OFF
SETLOCAL
SET count=0
SET injectevery=3
FOR /f "delims=" %%Z IN ('type njacpm.txt^|findstr /n "^"') DO (
SET /a count+=1
SET line=%%Z
SETLOCAL ENABLEDELAYEDEXPANSION
ECHO(!line:*:=!
IF !count!==%injectevery% ECHO.^</li^>^<li^>
ENDLOCAL
SET /a count=count %% %injectevery%
) 
```

注：根据 dbenham 评论调整 20130407-1417

现在 - 如果 NJACPM.TXT 包含

```
===============================
line of text 1

line 3 - 2 was empty
: and this behind colon
but this doesn't
A line of ] many < and >varied %poison ^ characters | like "," and so on
another line
and another

now a real test %path% and !path!
what say you now?
=============================== 
```

输出是：

```
===============================
line of text 1

line 3 - 2 was empty
</li><li>
: and this behind colon
but this doesn't
A line of ] many < and >varied %poison ^ characters | like "," and so on
</li><li>
another line
and another

</li><li>
now a real test %path% and !path!
what say you now?
=============================== 
```

但：

认真的批处理人员会理解……我也尝试`&`过……成功了！

*   njacpm.txt？现在只是一分钟的采棉时间......

# jquery - 使用委托按特定顺序触发？

> ID：15859129
> 
> 赞同：2
> 
> 时间：2013-04-07T05:15:32.813
> 
> 标签：jquery, delegates

我要做的是设置它，以便在单击链接时触发警报。是否可以定义首先触发哪个警报？

```
$("#container").delegate("a.link", "click", function(){                    
    alert("This was message #1");
});

$("#container").delegate("a.link", "click", function(){                    
    alert("This was message #2");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:22:27.647

我在代码中使用的一种方法是为第二个事件侦听器设置第二个事件类型：

```
$("#container").delegate("a.link", "click", function(){                    
    alert("This was message #1");
    $(this).trigger("click-event-2");
});

$("#container").delegate("a.link", "click-event-2", function(){                    
    alert("This was message #2");
}); 
```

另外值得一提的是，[delegate](http://api.jquery.com/delegate/)被[`.on()`](http://api.jquery.com/on/)

```
$("#container").on("click","a.link", function(){                    
    alert("This was message #1");
    $(this).trigger("click-event-2");
});

$("#container").on("click-event-2","a.link", function(){                    
    alert("This was message #2");
}); 
```

# android - Listitem 点击不适用于复选框 Android

> ID：15859134
> 
> 赞同：33
> 
> 时间：2013-04-07T05:16:37.520
> 
> 标签：android, listview, checkbox, android-listview, onitemclicklistener

**编辑（已解决）**对于答案，请转到问题的底部。

我有一个列表视图，我使用 customadapter 增加了其中的一些行。被膨胀的行包含一个复选框。我可以保持复选框的状态，但问题是，我的列表项不再可点击。这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    fl=(ListView)findViewById(R.id.MainMenu);//Mainmenu is listview
    fl.setAdapter(new CustomAdapter(Annotate.this,R.layout.preann2,_dir));//preann2 is row and _dir is the list of objects
    //fl.setOnItemClickListener(this); tried this too
}

public void onItemClick(AdapterView<?> a, View view, int pos, long id) 
{
      //Implementations
}

    public class CustomAdapter extends ArrayAdapter<String>
{
    public CustomAdapter(Context context, int textViewResourceId,String[] objects) {
        super(context, textViewResourceId,objects);
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.preann2, parent, false);
            try
            {

            TextView Name=(TextView)row.findViewById(R.id.title);
            Name.setText("xyz");
            ImageView icon=(ImageView)row.findViewById(R.id.icon);
            row.setFocusable(true);
            row.setClickable(true);
            row.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    checkState[position]=!checkState[position];
                }

            });
            CheckBox c=(CheckBox)row.findViewById(R.id.checkBox);
            c.setChecked(checkState[position]);
            c.setOnCheckedChangeListener(new OnCheckedChangeListener(){

                @Override
                public void onCheckedChanged(CompoundButton v,
                        boolean isChecked) {
                    // TODO Auto-generated method stub
                    CheckBox checkBox=(CheckBox)v;
                    if (isChecked) {
                        checkState[position]=true;
                     }
                    else
                        checkState[position]=false;
                }
            });
            /*  tried this too
                                  c.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    CheckBox checkBox=(CheckBox)v;
                    if (checkBox.isChecked()) {
                        //checkBox.setChecked(false);
                        checkState[position]=true;
                     }
                    else
                        checkState[position]=false;
                }});*/
            icon.setImageResource(R.drawable.ic_launcher);
            }catch(Throwable err)
            {
                err.printStackTrace();
            }
            return row;
        }
} 
```

我希望列表项可以点击，以防用户只想点击一个项目。

**编辑（根据 Akhil 的要求）-** 布局文件夹中的 preann2.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:padding="4dip"
  >

 <ImageView android:id="@+id/icon"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:layout_alignParentTop="true"
android:layout_alignParentBottom="true"
android:layout_marginRight="4dip"/>

  <TextView
  android:id="@+id/title"
  android:layout_width="fill_parent"
  android:layout_height="match_parent"
  android:layout_weight="1"
  android:ellipsize="end"
  android:gravity="center_vertical"
  android:singleLine="true"
  android:textStyle="bold" />

<CheckBox
  android:id="@+id/checkBox"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content" />

</LinearLayout> 
```

布局文件夹中的 main.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/MainMenu"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</ListView>

</LinearLayout> 
```

**编辑（已解决）** 只需将这些属性添加到复选框：

```
 android:focusable="false"
  android:focusableInTouchMode="false" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-04-12T04:20:02.013

问题中提到的解决方案解决了这个问题：

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

[`AbsListView`检查`View#hasFocusable`，如果是这样，将不允许按下该项目。因此，禁用对所有通常可聚焦的项目的关注。](https://stackoverflow.com/a/4518810/9636)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-28T18:33:07.590

在列表项android:descendantFocusability="blocksDescendants"的 rootView 中使用此行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:26:36.180

我确实误解了您的问题..**[请在这里](https://stackoverflow.com/questions/1821871/how-to-fire-onlistitemclick-in-listactivity-with-buttons-in-list)**查看您的问题..希望它能解决您的问题..

# python - Python 2.7.4 安装位置

> ID：15859139
> 
> 赞同：0
> 
> 时间：2013-04-07T05:16:58.543
> 
> 标签：python, python-2.7

我刚刚为 Mac 安装了新版本的 Python (2.7.4)。该网站的二进制文件将其安装在

```
> which python

/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

我`/usr/bin/python`的仍然是 2.7.2。

我这样`cp /Library/Frameworks/Python.framework/Versions/2.7/bin/python /usr/bin`做是为了可以键入`#!/usr/bin/python`以使用 2.7.4，并且 IPython 也会使用 2.7.4

我的问题是：

我这样做是否造成了任何警告，或者我应该安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:32:09.610

安装操作系统会自行安装软件，并且可能定期更新可能会导致警告。这就是为什么会有像[MacPorts](http://www.macports.org/)和[Homebrew这样的](http://mxcl.github.io/homebrew/)*包管理*器。他们试图以受控的方式做到这一点，并将他们的软件包与操作系统的软件包分开。

每个人都有自己的理念：MacPorts 试图将它与操作系统分开一点，而不是 Homebrew，后者共享更多的操作系统库。

包管理器还可以轻松地在不同版本之间切换。使用 MacPorts，您可以：

```
$ port select --list python
vailable versions for python:
    none
    python25-apple
    python26-apple
    python27 (active)
    python27-apple 
```

要更改回操作系统版本：

```
$ sudo port select python27-apple 
```

MacPort 通过更改符号链接来做到这一点。MacPorts 将其包放在单独的树中 ( `/opt/local`)。为此，您需要更改您的*PATH* :`/opt/local/bin`并且`/opt/local/sbin`需要在之前`/usr/bin`并且`/usr/sbin`（请参阅 [MacPorts 安装）

```
$ ls -l /opt/local/bin/python
lrwxr-xr-x  1 root  admin  24 Dec  5  2011 /opt/local/bin/python -> /opt/local/bin/python2.7 
```

# class - VBScript 中的类：为什么这两个示例做同样的事情？

> ID：15859142
> 
> 赞同：5
> 
> 时间：2013-04-07T05:18:01.877
> 
> 标签：class, object, vbscript

我在这个 StackOverFlow 问题上找到了这段代码，[即 Dictionary of Objects/Classes in VBScript](https://stackoverflow.com/questions/13543942/dictionary-of-objects-classes-in-vbscript)。

我的问题是为什么这个“短”类和这个“长”类做同样的事情？为什么还要费心编写长班？短类版本可以与同一类中的其他方法一起使用吗？谢谢！

短班

```
Class employeeclass
    Public first, last, salary
End Class 
```

长班

```
Class employeeclass
    Private m_first
    Private m_last
    Private m_salary

    Public Property Get first
        first = m_first
    End Property
    Public Property Let first(value)
        m_first = value
    End Property

    Public Property Get last
        last = m_last
    End Property
    Public Property Let last(value)
        m_last = value
    End Property

    Public Property Get salary
        salary = m_salary
    End Property
    Public Property Let salary(value)
        m_salary = value
    End Property
End Class 
```

然而，短类的完整脚本，只需将短类替换为长类即可获得相同的结果。

```
Class employeeclass
    Public first, last, salary
End Class

Dim employeedict: Set employeedict = CreateObject("Scripting.Dictionary")

Dim employee: Set employee = new employeeclass
With employee
    .first = "John"
    .last = "Doe"
    .salary = 50000
End With
employeedict.Add "1", employee

Set employee = new employeeclass
With employee
    .first = "Mary"
    .last = "Jane"
    .salary = 50000
End With
employeedict.Add "3", employee

Dim employeedetails: Set employeedetails = employeedict.Item("1")
WScript.Echo "Name: " & employeedetails.first & " " & employeedetails.last & " $" & employeedetails.salary 
WScript.Echo employeedict.Item("3").first & " " & employeedict.Item("3").last & " makes $" & employeedict.Item("3").salary 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T08:31:33.610

[正如@Garath](https://stackoverflow.com/a/15859494/1630171)已经提到的， “short”和“long”类之间的区别在于，前者公开了存储实际值的成员变量，而后者将这些变量封装在属性中。

VBScript 中的属性基本上有两个优点，尽管它们需要更多代码：

*   您可以将属性设置为只读（或只写），这对于成员变量是不可能的。
*   您可以在将值存储到相应的成员变量之前对其进行验证。例如，如果您有一个`ip_addr`采用四点表示法的 IP 地址的属性，您可以检查它是否由 4 个用点分隔的数字组成，每个数字介于 0 和 255 之间，如果检查失败，则会引发错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-07T09:33:20.403

所有编程范式（开发软件的不同方式）都力求以更少的努力构建更好的程序。然而，“更好”和“努力”的概念在数学术语中的定义不那么严格，它们的核心含义会随着时间而变化。

OOP 的基本思想是将复杂的数据（如处理员工所需的信息）与复杂的功能（如操作此类信息所需的操作）捆绑在一起。在 OOP 之前，您可以使用员工结构/记录/类型和漂亮的函数/子程序/程序来提高员工的薪水，但程序员负责以正确的方式将正确的函数应用于正确的数据。

在此基础上，OOP 可以提供进一步的好处，从而提高软件质量并减少工作量和错误风险，尤其是在大型团队创建和重用大型软件组件系统的情况下：

1.  通过自动调用析构函数进行内存管理（例如 C++；其他语言 - 包括 VBScript - 改用垃圾收集）
2.  通过继承重用代码（例如 Java；VBScript 对象不能继承，您必须将对象嵌入到对象中才能获得类似的效果）
3.  信息隐藏/控制访问以降低错误风险并使实施改进成为可能

您的第一个（短）类有数据，但没有方法。让我们添加一个初始化函数：

```
Public Function init(p_first, p_last, p_salary)
  Set init = Me
  first = p_first : last = p_last : salary = p_salary
End Function 
```

所以要得到 10 名员工，你可以写 10 次

```
Set employeedict(nId) = new employeeclass.init("John", "Doe", 12345.67) 
```

而不是 10 次

```
Dim employee: Set employee = new employeeclass
With employee
    .first = "John"
    .last = "Doe"
    .salary = 50000
End With
employeedict.Add "1", employee 
```

现在让我们想象一个做一些计算的 raiseSalary 方法（基于美分而不是美元，以便稍后讨论）

```
Sub raiseSalary()
  (m_)salary = x * (m_)salary / y ...
End Sub 
```

调用此方法 - 并在某些法律发生变化时更改公式一次 - 当然胜过拥有 40 行之类的

```
employeeX.salary = x * (m_)salary / y ... 
```

分散在你的脚本中。（这只是功能抽象，而不是 OOP；在 C++ 或 Java 中，当您处理一长串员工时，很容易/自动地通过不同的公式（多态函数）计算老板的薪水 - 在 VBScript 中，您将拥有诉诸涉及鸭子打字的肮脏/危险的技巧。）

您的第二个（长）类具有 - 样板 - 用于控制数据访问的方法（属性），但没有有效负载功能（如 raiseSalary）。只要您不向设置器（输入验证、转换（例如美元到美分）和现实世界可用的方法）添加有趣的东西，长类就只是浪费编码时间。（当然，如果您的报酬是代码行/小时并且您的经理没有意识到该类，因为它不能防止不完整或错误的初始化，如果不赚钱很容易。）

但是，如果您的 init 函数保证成员数据的完整初始化并验证输入（例如合理范围内的双数）并且您的加薪公式集中在一种方法中，您可以更改计算以使用长数字以获得更好的准确性**并**转换在 init 方法中美元到美分一次 - 使用该类的代码没有变化。

您是否应该防止用户直接通过书籍（私人成员和访问者）或书籍（记录的警告）将工资设置为愚蠢的值，这取决于您的受众。

总结一下：

1.  类应该有有效载荷方法
2.  除了存储参数/返回成员数据之外，没有至少一些附加功能的 Getter/Setter 是无用的
3.  即使在 VBScript 脚本上下文中（一个程序员，针对特定任务的许多临时脚本，很少有可重用的组件/模块，对 OOP 功能的不完全支持）在“更好”的类中组织代码（使用初始化函数、输入验证、集中实现核心功能）是一件好事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T06:12:06.337

它们看起来和做的几乎一样。但第一个使用领域，第二个使用属性。在这里寻找很好的解释[http://blogs.msdn.com/b/vbteam/archive/2009/09/04/properties-vs-fields-why-does-it-matter-jonathan-aneja.aspx](http://blogs.msdn.com/b/vbteam/archive/2009/09/04/properties-vs-fields-why-does-it-matter-jonathan-aneja.aspx)

# javascript - 在 WebDriverJs 中选择下拉菜单

> ID：15859143
> 
> 赞同：23
> 
> 时间：2013-04-07T05:18:05.940
> 
> 标签：javascript, webdriver, selenium-webdriver

我有一个下拉框，我想使用 WebDriverJS 选择一个值。我查看了下面的用户指南，但不知道如何操作

> [https://code.google.com/p/selenium/wiki/WebDriverJs](https://code.google.com/p/selenium/wiki/WebDriverJs)

我什至尝试了一些为 Java 版本记录的东西，如下所示：

```
webdriver.Select(driver.findElement(webdriver.By.id("vote"))).selectByValue("5") 
```

它只是简单地说“选择”不存在。

我浏览了源代码，但仍然找不到任何可以使用的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-26T19:13:33.330

您不需要单击两次来选择一个选项，只需直接单击该选项即可。就像是，

```
driver.findElement(wd.By.css('#month>option[title="November"]')).click(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-26T10:53:41.103

[我分享了一个功能来通过它的文字在这里](https://coderwall.com/p/tjx5zg)选择一个下拉项目。

编码：

```
function selectOption(selector, item){
    var selectList, desiredOption;

    selectList = this.findElement(selector);
    selectList.click();

    selectList.findElements(protractor.By.tagName('option'))
        .then(function findMatchingOption(options){
            options.some(function(option){
                option.getText().then(function doesOptionMatch(text){
                    if (item === text){
                        desiredOption = option;
                        return true;
                    }
                });
            });
        })
        .then(function clickOption(){
            if (desiredOption){
                desiredOption.click();
            }
        });
} 
```

与：

```
driver.selectOption = selectOption.bind(driver);
driver.selectOption(webdriver.By.id('my-dropdown'), 'My Value'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-19T16:20:23.180

```
driver.findElement({id: 'myDropDown'});// select dropdown element you wish to select
driver.sleep(1000);//not necessary
driver.findElement({id: 'myDropDown'}).sendKeys('name_of_option');//sending keys automatically fills dropdown with desired option 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-22T16:01:41.840

我正在使用[webdriverjs](https://github.com/camme/webdriverjs)并想按索引选择选项，所以这样做了：

```
driver.click('#my_select_box').click('#my_select_box option:nth-child(3)') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-07T07:40:36.917

这应该通过

```
selectElem = driver.findElement(webdriver.By.id("vote"))
selectElem.click()
selectElem.findElement(webdriver.By.css("option[value='5']")).click() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-04T14:01:28.277

在这种情况下，将键发送到下拉元素就足够了，例如；

```
driver.findElement(by.id('vote')).sendKeys('5'); 
```

当显示文本中有空格时，webdriver需要更多的关注，添加点击功能就可以解决；

```
var ddlElement = driver.findElement(by.id('vote'));
ddlElement.click();
ddlElement.sendKeys('5');
ddlElement.click(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-23T19:58:57.023

某些浏览器很难使用下拉菜单。我得到了一些想法并拼凑了一个使用 JS 注入的 java 方法，这可能对遇到这个问题的一些人有用。是的，随着时间的推移，这些问题正在得到解决，但这对于那些负责认证旧浏览器的人来说很有用。我希望这会有所帮助，因为这可能会非常令人沮丧！

```
public void getJSDropdown(String dropDown, String elementID)throws Exception{

     JavascriptExecutor executor = (JavascriptExecutor)driver;
     String dropdownScript = "var select = window.document.getElementById('" + 
             dropDown +
             "'); for(var i = 0; i < select.options.length; i++){if(select.options[i].text == '" +
             elementID +
             "'){ select.options[i].selected = true; } }";

     Thread.sleep(2000);
     executor.executeScript(dropdownScript);
     Thread.sleep(2000);

     String clickScript = "if ("+"\"createEvent\""+" in document) {var evt = document.createEvent("+"\"HTMLEvents\""+");     evt.initEvent("+"\"change\""+", false, true); " + dropDown + ".dispatchEvent(evt); } else " + dropDown + ".fireEvent("+"\"onchange\""+");";

     executor.executeScript(clickScript);

 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-09T14:49:30.337

`driver.click('//*[@id="vote"]/option[3]')`

参考：[https ://stackoverflow.com/a/22159563/227578](https://stackoverflow.com/a/22159563/227578)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-10T22:57:03.090

我在 ES6 中使用了以下内容：

```
 let select = driver.findElement(By.css("select"));
 let options = select.findElements(By.css("option"));
 options.then(values => {
     return Promise.all(values.map(el => el.getText())).then(optTexts => {
         return values[optTexts.indexOf('Some option text')].click();
     });
 }); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-25T10:04:46.523

我遇到了同样的问题，上面的解决方案在我的 typeScript 案例中不起作用

但我仍然找到了解决方案：

```
await driver.findElement(By.id("ELEMENT_ID")).sendKeys("SOME_VALUE"); 
```

由于驱动程序在获取**选择器元素时会返回一个承诺**

所以添加**等待**来做接下来的事情

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-25T09:50:49.203

这对我有用（咖啡脚本）

```
selectList.findElements(By.tagName("option")) =
.then (options) ->
    len = options.length         #getting number of options in the select
    driver.wait =>               #verify all promises finished
        for option in options
            option.getText()
            .then (text) =>
                console.log(len)
                len -= 1
                console.log(text)
                if len is 0
                    true
    , 10000 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-21T19:07:55.227

像这样使用xpath

```
await driver.findElement(By.xpath('//[@id="newEventOffices"]/option[3]')).click(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-10T23:04:00.163

找到选择元素并单击它以显示下拉菜单

`driver.findElement(//div//select[@id="elementId"]).click();`

然后从选项中选择并单击它。我认为通过 xpath 选择在这里会更好。

`driver.findElement(By.xpath('//div//select[@id="elementId"]//option[optionIndex]')).click();`

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-06-19T02:17:06.817

这实际上不是单击该选项，但它确实选择了它。

1.  查找**选择**元素
2.  单击**选择**元素
3.  使用 sendKeys() 在选择元素中输入 选项**文本**
4.  单击**选择**元素

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-01-20T18:21:53.790

以下代码定义了 WebDriverJS 中可用的选择器：

```
webdriver.Locator.Strategy = {
  'className': webdriver.Locator.factory_('class name'),
  'class name': webdriver.Locator.factory_('class name'),
  'css': webdriver.Locator.factory_('css selector'),
  'id': webdriver.Locator.factory_('id'),
  'js': webdriver.Locator.factory_('js'),
  'linkText': webdriver.Locator.factory_('link text'),
  'link text': webdriver.Locator.factory_('link text'),
  'name': webdriver.Locator.factory_('name'),
  'partialLinkText': webdriver.Locator.factory_('partial link text'),
  'partial link text': webdriver.Locator.factory_('partial link text'),
  'tagName': webdriver.Locator.factory_('tag name'),
  'tag name': webdriver.Locator.factory_('tag name'),
  'xpath': webdriver.Locator.factory_('xpath')
};

goog.exportSymbol('By', webdriver.Locator.Strategy); 
```

来源：[https ://code.google.com/p/selenium/source/browse/javascript/webdriver/locators.js](https://code.google.com/p/selenium/source/browse/javascript/webdriver/locators.js)

# .net - 如何将最新的 jQuery-UI 库添加到 MVC4 项目？

> ID：15859144
> 
> 赞同：0
> 
> 时间：2013-04-07T05:18:18.157
> 
> 标签：.net, jquery-ui, asp.net-mvc-4

假设我使用默认模板在 MVC4 中创建了一个新的 Internet 应用程序，如何将最新的 jquery ui 包添加到其中？在您选择主题后，我已经下载了您从该网站获得的 zip 文件，但对于我的生活，我无法让它工作。我已将 js 文件复制到 scripts 文件夹，将 redmond 主题复制到 content/themes 文件夹。我尝试在视图中引用文件，我尝试在布局中引用它们。我试图用来测试它的示例是 Tabs 函数。

我只是假设我完全搞砸了。有人可以扔我一根骨头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:23:16.647

使用 nuget。右键单击您的项目，然后管理 nuget 包。找到它并安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:46:39.440

好的 nuget 肯定至少成功了一半，但是我在互联网上找不到的东西，我刚刚发现：

在布局页面中，我需要将以下内容添加到正文部分，在脚本的渲染部分之前

```
<body>
    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryui")
    @RenderSection("scripts", required: false)
</body> 
```

然后在视图本身中，将脚本调用添加到视图底部的脚本 SECTION 中：

```
@section scripts
{
    <script type="text/javascript">
        $(function() {
            $('#tabs').tabs();
        });
    </script>
} 
```

就主题而言，我只是在布局视图中引用了样式表

# css - div对齐不上

> ID：15859152
> 
> 赞同：0
> 
> 时间：2013-04-07T05:19:47.790
> 
> 标签：css, html, alignment

我遇到了我的问题，我`homeWrapperContentRight`无法让它与我的`homeWrapperContentLeft`. 当我这样做时，我有什么建议吗？

[直播网址](http://pyro.agrilife.co.nz/)

**CSS：**

```
.homeWrapperContentLeft{
    width:628px;
    height:825px;
    clear: both;
}

.homeWrapperContentRight{
    float: right;
    width:250px;
    height:849px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:23:42.280

添加`display: inline`到你的`.homeWrapperContentLeft`，你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:24:16.247

试试这个（基于你的 CSS）：

```
.homeWrapperContentLeft {
    display: inline-block;
    width:628px;
    height:825px;
}

.homeWrapperContentRight {
    display: inline-block;
    width:250px;
    height:849px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:25:55.350

```
.homeWrapperContentLeft{
    width:628px;
    height:825px;
    clear: both;
    display: inline;
}

.homeWrapperContentRight{
    float: right;
    width:250px;
    height:849px;
    display: inline
} 
```

我尝试了这些行，它在 Chrome 中工作。希望能帮助到你！

# python - python：如何将有效的 uuid 从 String 转换为 UUID？

> ID：15859156
> 
> 赞同：87
> 
> 时间：2013-04-07T05:21:05.170
> 
> 标签：python, uuid

我收到的数据为

```
 {
        "name": "Unknown",
        "parent": "Uncategorized",
        "uuid": "06335e84-2872-4914-8c5d-3ed07d2a2f16"
    }, 
```

我需要将`uuid`from转换`String`为`uuid`

[我在python 文档](http://docs.python.org/library/uuid.html)上没有找到方法，或者我在这里遗漏了一些基本的东西？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-04-07T05:24:12.890

只需将其传递给`uuid.UUID`：

```
import uuid

o = {
    "name": "Unknown",
    "parent": "Uncategorized",
    "uuid": "06335e84-2872-4914-8c5d-3ed07d2a2f16"
}

print uuid.UUID(o['uuid']).hex 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-02-22T14:43:40.933

不要调用`.hex`UUID 对象，除非您需要该 uuid 的字符串表示形式。

```
>>> import uuid
>>> some_uuid = uuid.uuid4()
>>> type(some_uuid)
<class 'uuid.UUID'>
>>> some_uuid_str = some_uuid.hex
>>> some_uuid_str
'5b77bdbade7b4fcb838f8111b68e18ae'
>>> type(some_uuid_str)
<class 'str'> 
```

然后就像上面提到的其他人将 uuid 字符串转换回 UUID 实例一样：

```
>>> uuid.UUID(some_uuid_str)
UUID('5b77bdba-de7b-4fcb-838f-8111b68e18ae')
>>> (some_uuid == uuid.UUID(some_uuid_str))
True
>>> (some_uuid == some_uuid_str)
False 
```

如果您愿意，您甚至可以设置一个小型辅助实用程序函数来验证`str`并返回 UUID：

```
def is_valid_uuid(val):
    try:
        return uuid.UUID(str(val))
    except ValueError:
        return None 
```

然后使用它：

```
>>> some_uuid = uuid.uuid4()
>>> is_valid_uuid(some_uuid)
UUID('aa6635e1-e394-463b-b43d-69eb4c3a8570')
>>> type(is_valid_uuid(some_uuid))
<class 'uuid.UUID'> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-06-27T21:21:31.740

如果上述答案不适用于您将字符串格式的有效 UUID 转换回实际的 UUID 对象...使用`uuid.UUID(your_uuid_string)`对我有用。

```
In [6]: import uuid
   ...:
   ...: o = {
   ...:     "name": "Unknown",
   ...:     "parent": "Uncategorized",
   ...:     "uuid": "06335e84-2872-4914-8c5d-3ed07d2a2f16"
   ...: }
   ...:
   ...: print uuid.UUID(o['uuid']).hex
   ...: print type(uuid.UUID(o['uuid']).hex)
06335e84287249148c5d3ed07d2a2f16
<type 'str'>

In [7]: your_uuid_string = uuid.UUID(o['uuid']).hex

In [8]: print uuid.UUID(your_uuid_string)
06335e84-2872-4914-8c5d-3ed07d2a2f16

In [9]: print type(uuid.UUID(your_uuid_string))
<class 'uuid.UUID'> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-12-19T09:19:21.750

将 UUID 转换为字符串

```
import uuid

uuid_value_in_string=str(uuid.uuid4()) 
```

如需了解有关 UUID 的更多信息： [https ://www.copilotcode.com/2021/12/get-unique-id-string-or-numberuuid-in.html](https://www.copilotcode.com/2021/12/get-unique-id-string-or-numberuuid-in.html)

# iphone - XCode 编译：“文件存在”错误；我该如何解决？

> ID：15859162
> 
> 赞同：1
> 
> 时间：2013-04-07T05:22:13.410
> 
> 标签：iphone, objective-c, xcode, cordova

我有一个项目，我正在模拟器和本机设备中编译和运行，但我废弃了。从那以后，我创建了一个与我删除的项目同名的新项目。但是，每当我去编译那个新应用程序时，我都会收到以下错误：

```
mkdir: /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator/UnionConnect.app/www/build/native/My: File exists 
```

我努力了：

*   打扫
*   删除 ~/Library/Developer/Xcode/DerivedData 文件夹及其所有内容
*   重新启动 xCode
*   重新安装 xCode
*   重新启动我的 Mac

这些都不起作用。该应用程序根本无法编译，并且每当我尝试这样做时都会出现错误？

我希望我能更具体一些，但由于我什至不知道要寻找什么作为错误的标记，我将不得不等待任何具体的问题，我可以尽力回答。

我在这里做错了什么？

*更新：*这是构建的完整记录：

```
PhaseScriptExecution "Copy www directory" /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/Script-304B58A110DAC018002A0835.sh
    cd /Users/morrissinger/XCodeApplications/UnionConnect
    setenv ACTION build
    setenv ALTERNATE_GROUP staff
    setenv ALTERNATE_MODE u+w,go-w,a+rX
    setenv ALTERNATE_OWNER morrissinger
    setenv ALWAYS_SEARCH_USER_PATHS NO
    setenv APPLE_INTERNAL_DEVELOPER_DIR /AppleInternal/Developer
    setenv APPLE_INTERNAL_DIR /AppleInternal
    setenv APPLE_INTERNAL_DOCUMENTATION_DIR /AppleInternal/Documentation
    setenv APPLE_INTERNAL_LIBRARY_DIR /AppleInternal/Library
    setenv APPLE_INTERNAL_TOOLS /AppleInternal/Developer/Tools
    setenv APPLY_RULES_IN_COPY_FILES NO
    setenv ARCHS i386
    setenv ARCHS_STANDARD_32_BIT i386
    setenv ARCHS_UNIVERSAL_IPHONE_OS i386
    setenv AVAILABLE_PLATFORMS "iphonesimulator macosx iphoneos"
    setenv BUILD_COMPONENTS "headers build"
    setenv BUILD_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products
    setenv BUILD_ROOT /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products
    setenv BUILD_STYLE 
    setenv BUILD_VARIANTS normal
    setenv BUILT_PRODUCTS_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator
    setenv CACHE_ROOT /var/folders/zb/9_ts57jj4_b67zhdd8shsqvh0000gn/C/com.apple.Xcode.501
    setenv CCHROOT /var/folders/zb/9_ts57jj4_b67zhdd8shsqvh0000gn/C/com.apple.Xcode.501
    setenv CHMOD /bin/chmod
    setenv CHOWN /usr/sbin/chown
    setenv CLANG_ENABLE_OBJC_ARC NO
    setenv CLANG_WARN_CONSTANT_CONVERSION YES
    setenv CLANG_WARN_ENUM_CONVERSION YES
    setenv CLANG_WARN_INT_CONVERSION YES
    setenv CLANG_WARN__DUPLICATE_METHOD_MATCH YES
    setenv CLASS_FILE_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/JavaClasses
    setenv CLEAN_PRECOMPS YES
    setenv CLONE_HEADERS NO
    setenv CODESIGNING_FOLDER_PATH /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator/UnionConnect.app
    setenv COMMAND_MODE legacy
    setenv COMPOSITE_SDK_DIRS /var/folders/zb/9_ts57jj4_b67zhdd8shsqvh0000gn/C/com.apple.Xcode.501/CompositeSDKs
    setenv COMPRESS_PNG_FILES YES
    setenv CONFIGURATION Debug
    setenv CONFIGURATION_BUILD_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator
    setenv CONFIGURATION_TEMP_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator
    setenv CONTENTS_FOLDER_PATH UnionConnect.app
    setenv COPYING_PRESERVES_HFS_DATA NO
    setenv COPY_PHASE_STRIP NO
    setenv COPY_RESOURCES_FROM_STATIC_FRAMEWORKS YES
    setenv CP /bin/cp
    setenv CURRENT_ARCH i386
    setenv CURRENT_VARIANT normal
    setenv DEAD_CODE_STRIPPING NO
    setenv DEBUGGING_SYMBOLS YES
    setenv DEBUG_INFORMATION_FORMAT dwarf-with-dsym
    setenv DEFAULT_COMPILER com.apple.compilers.llvm.clang.1_0
    setenv DEPLOYMENT_LOCATION NO
    setenv DEPLOYMENT_POSTPROCESSING NO
    setenv DERIVED_FILES_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/DerivedSources
    setenv DERIVED_FILE_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/DerivedSources
    setenv DERIVED_SOURCES_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/DerivedSources
    setenv DEVELOPER_APPLICATIONS_DIR /Applications/Xcode.app/Contents/Developer/Applications
    setenv DEVELOPER_BIN_DIR /Applications/Xcode.app/Contents/Developer/usr/bin
    setenv DEVELOPER_DIR /Applications/Xcode.app/Contents/Developer
    setenv DEVELOPER_FRAMEWORKS_DIR /Applications/Xcode.app/Contents/Developer/Library/Frameworks
    setenv DEVELOPER_FRAMEWORKS_DIR_QUOTED "\"/Applications/Xcode.app/Contents/Developer/Library/Frameworks\""
    setenv DEVELOPER_LIBRARY_DIR /Applications/Xcode.app/Contents/Developer/Library
    setenv DEVELOPER_SDK_DIR /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs
    setenv DEVELOPER_TOOLS_DIR /Applications/Xcode.app/Contents/Developer/Tools
    setenv DEVELOPER_USR_DIR /Applications/Xcode.app/Contents/Developer/usr
    setenv DEVELOPMENT_LANGUAGE English
    setenv DOCUMENTATION_FOLDER_PATH UnionConnect.app/English.lproj/Documentation
    setenv DO_HEADER_SCANNING_IN_JAM NO
    setenv DSTROOT /tmp/UnionConnect.dst
    setenv DT_TOOLCHAIN_DIR /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain
    setenv DWARF_DSYM_FILE_NAME UnionConnect.app.dSYM
    setenv DWARF_DSYM_FILE_SHOULD_ACCOMPANY_PRODUCT NO
    setenv DWARF_DSYM_FOLDER_PATH /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator
    setenv EFFECTIVE_PLATFORM_NAME -iphonesimulator
    setenv ENABLE_HEADER_DEPENDENCIES YES
    setenv EXCLUDED_INSTALLSRC_SUBDIRECTORY_PATTERNS ".DS_Store .svn .git .hg CVS"
    setenv EXCLUDED_RECURSIVE_SEARCH_PATH_SUBDIRECTORIES "*.nib *.lproj *.framework *.gch (*) .DS_Store CVS .svn .git .hg *.xcodeproj *.xcode *.pbproj *.pbxproj"
    setenv EXECUTABLES_FOLDER_PATH UnionConnect.app/Executables
    setenv EXECUTABLE_FOLDER_PATH UnionConnect.app
    setenv EXECUTABLE_NAME UnionConnect
    setenv EXECUTABLE_PATH UnionConnect.app/UnionConnect
    setenv FILE_LIST /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/Objects/LinkFileList
    setenv FIXED_FILES_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/FixedFiles
    setenv FRAMEWORKS_FOLDER_PATH UnionConnect.app/Frameworks
    setenv FRAMEWORK_FLAG_PREFIX -framework
    setenv FRAMEWORK_SEARCH_PATHS "\"/Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator\" "
    setenv FRAMEWORK_VERSION A
    setenv FULL_PRODUCT_NAME UnionConnect.app
    setenv GCC3_VERSION 3.3
    setenv GCC_C_LANGUAGE_STANDARD c99
    setenv GCC_DYNAMIC_NO_PIC NO
    setenv GCC_INLINES_ARE_PRIVATE_EXTERN YES
    setenv GCC_OBJC_LEGACY_DISPATCH YES
    setenv GCC_OPTIMIZATION_LEVEL 0
    setenv GCC_PFE_FILE_C_DIALECTS "c objective-c c++ objective-c++"
    setenv GCC_PRECOMPILE_PREFIX_HEADER YES
    setenv GCC_PREFIX_HEADER UnionConnect/UnionConnect-Prefix.pch
    setenv GCC_SYMBOLS_PRIVATE_EXTERN YES
    setenv GCC_THUMB_SUPPORT NO
    setenv GCC_TREAT_WARNINGS_AS_ERRORS NO
    setenv GCC_VERSION com.apple.compilers.llvm.clang.1_0
    setenv GCC_VERSION_IDENTIFIER com_apple_compilers_llvm_clang_1_0
    setenv GCC_WARN_ABOUT_RETURN_TYPE YES
    setenv GCC_WARN_UNINITIALIZED_AUTOS YES
    setenv GCC_WARN_UNUSED_VARIABLE YES
    setenv GENERATE_MASTER_OBJECT_FILE NO
    setenv GENERATE_PKGINFO_FILE YES
    setenv GENERATE_PROFILING_CODE NO
    setenv GID 20
    setenv GROUP staff
    setenv HEADERMAP_INCLUDES_FLAT_ENTRIES_FOR_TARGET_BEING_BUILT YES
    setenv HEADERMAP_INCLUDES_FRAMEWORK_ENTRIES_FOR_ALL_PRODUCT_TYPES YES
    setenv HEADERMAP_INCLUDES_NONPUBLIC_NONPRIVATE_HEADERS YES
    setenv HEADERMAP_INCLUDES_PROJECT_HEADERS YES
    setenv HEADER_SEARCH_PATHS "\"/Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator/include\" \"/Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator/usr/local/lib/include\" \"/Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UninstalledProducts/include\" \"/Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator\""
    setenv ICONV /usr/bin/iconv
    setenv INFOPLIST_EXPAND_BUILD_SETTINGS YES
    setenv INFOPLIST_FILE UnionConnect/UnionConnect-Info.plist
    setenv INFOPLIST_OUTPUT_FORMAT binary
    setenv INFOPLIST_PATH UnionConnect.app/Info.plist
    setenv INFOPLIST_PREPROCESS NO
    setenv INFOSTRINGS_PATH UnionConnect.app/English.lproj/InfoPlist.strings
    setenv INSTALL_DIR /tmp/UnionConnect.dst/Applications
    setenv INSTALL_GROUP staff
    setenv INSTALL_MODE_FLAG u+w,go-w,a+rX
    setenv INSTALL_OWNER morrissinger
    setenv INSTALL_PATH /Applications
    setenv INSTALL_ROOT /tmp/UnionConnect.dst
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.0
    setenv JAVAC_DEFAULT_FLAGS "-J-Xms64m -J-XX:NewSize=4M -J-Dfile.encoding=UTF8"
    setenv JAVA_APP_STUB /System/Library/Frameworks/JavaVM.framework/Resources/MacOS/JavaApplicationStub
    setenv JAVA_ARCHIVE_CLASSES YES
    setenv JAVA_ARCHIVE_TYPE JAR
    setenv JAVA_COMPILER /usr/bin/javac
    setenv JAVA_FOLDER_PATH UnionConnect.app/Java
    setenv JAVA_FRAMEWORK_RESOURCES_DIRS Resources
    setenv JAVA_JAR_FLAGS cv
    setenv JAVA_SOURCE_SUBDIR .
    setenv JAVA_USE_DEPENDENCIES YES
    setenv JAVA_ZIP_FLAGS -urg
    setenv JIKES_DEFAULT_FLAGS "+E +OLDCSO"
    setenv KEEP_PRIVATE_EXTERNS NO
    setenv LD_GENERATE_MAP_FILE NO
    setenv LD_MAP_FILE_PATH /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/UnionConnect-LinkMap-normal-i386.txt
    setenv LD_NO_PIE NO
    setenv LEGACY_DEVELOPER_DIR /Applications/Xcode.app/Contents/PlugIns/Xcode3Core.ideplugin/Contents/SharedSupport/Developer
    setenv LEX lex
    setenv LIBRARY_FLAG_NOSPACE YES
    setenv LIBRARY_FLAG_PREFIX -l
    setenv LIBRARY_SEARCH_PATHS "\"/Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator\" "
    setenv LINKER_DISPLAYS_MANGLED_NAMES NO
    setenv LINK_FILE_LIST_normal_i386 /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/Objects-normal/i386/UnionConnect.LinkFileList
    setenv LINK_WITH_STANDARD_LIBRARIES YES
    setenv LOCALIZED_RESOURCES_FOLDER_PATH UnionConnect.app/English.lproj
    setenv LOCAL_ADMIN_APPS_DIR /Applications/Utilities
    setenv LOCAL_APPS_DIR /Applications
    setenv LOCAL_DEVELOPER_DIR /Library/Developer
    setenv LOCAL_LIBRARY_DIR /Library
    setenv MACH_O_TYPE mh_execute
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv MAC_OS_X_PRODUCT_BUILD_VERSION 12C60
    setenv MAC_OS_X_VERSION_ACTUAL 1082
    setenv MAC_OS_X_VERSION_MAJOR 1080
    setenv MAC_OS_X_VERSION_MINOR 0802
    setenv NATIVE_ARCH i386
    setenv NATIVE_ARCH_32_BIT i386
    setenv NATIVE_ARCH_64_BIT x86_64
    setenv NATIVE_ARCH_ACTUAL x86_64
    setenv NO_COMMON YES
    setenv OBJC_ABI_VERSION 2
    setenv OBJECT_FILE_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/Objects
    setenv OBJECT_FILE_DIR_normal /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/Objects-normal
    setenv OBJROOT /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates
    setenv ONLY_ACTIVE_ARCH NO
    setenv OPTIMIZATION_LEVEL 0
    setenv OS MACOS
    setenv OSAC /usr/bin/osacompile
    setenv OTHER_LDFLAGS "-weak_framework CoreFoundation -weak_framework UIKit -weak_framework AVFoundation -weak_framework CoreMedia -weak-lSystem -all_load -Obj-C"
    setenv PACKAGE_TYPE com.apple.package-type.wrapper.application
    setenv PASCAL_STRINGS YES
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin:/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/libexec:/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/local/bin:/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/usr/bin:/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/usr/local/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/local/bin:/Applications/Xcode.app/Contents/Developer/Tools:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PATH_PREFIXES_EXCLUDED_FROM_HEADER_DEPENDENCIES "/usr/include /usr/local/include /System/Library/Frameworks /System/Library/PrivateFrameworks /Applications/Xcode.app/Contents/Developer/Headers /Applications/Xcode.app/Contents/Developer/SDKs /Applications/Xcode.app/Contents/Developer/Platforms"
    setenv PBDEVELOPMENTPLIST_PATH UnionConnect.app/pbdevelopment.plist
    setenv PFE_FILE_C_DIALECTS objective-c
    setenv PKGINFO_FILE_PATH /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/PkgInfo
    setenv PKGINFO_PATH UnionConnect.app/PkgInfo
    setenv PLATFORM_DEVELOPER_APPLICATIONS_DIR /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications
    setenv PLATFORM_DEVELOPER_BIN_DIR /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin
    setenv PLATFORM_DEVELOPER_LIBRARY_DIR /Applications/Xcode.app/Contents/PlugIns/Xcode3Core.ideplugin/Contents/SharedSupport/Developer/Library
    setenv PLATFORM_DEVELOPER_SDK_DIR /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs
    setenv PLATFORM_DEVELOPER_TOOLS_DIR /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Tools
    setenv PLATFORM_DEVELOPER_USR_DIR /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr
    setenv PLATFORM_DIR /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform
    setenv PLATFORM_NAME iphonesimulator
    setenv PLATFORM_PREFERRED_ARCH i386
    setenv PLATFORM_PRODUCT_BUILD_VERSION 10B141
    setenv PLATFORM_VERSION_AVAILABILITY_H_FORMAT 60100
    setenv PLIST_FILE_OUTPUT_FORMAT binary
    setenv PLUGINS_FOLDER_PATH UnionConnect.app/PlugIns
    setenv PRECOMPS_INCLUDE_HEADERS_FROM_BUILT_PRODUCTS_DIR YES
    setenv PRECOMP_DESTINATION_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/PrefixHeaders
    setenv PRESERVE_DEAD_CODE_INITS_AND_TERMS NO
    setenv PRIVATE_HEADERS_FOLDER_PATH UnionConnect.app/PrivateHeaders
    setenv PRODUCT_NAME UnionConnect
    setenv PRODUCT_SETTINGS_PATH /Users/morrissinger/XCodeApplications/UnionConnect/UnionConnect/UnionConnect-Info.plist
    setenv PRODUCT_TYPE com.apple.product-type.application
    setenv PROFILING_CODE NO
    setenv PROJECT UnionConnect
    setenv PROJECT_DERIVED_FILE_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/DerivedSources
    setenv PROJECT_DIR /Users/morrissinger/XCodeApplications/UnionConnect
    setenv PROJECT_FILE_PATH /Users/morrissinger/XCodeApplications/UnionConnect/UnionConnect.xcodeproj
    setenv PROJECT_NAME UnionConnect
    setenv PROJECT_TEMP_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build
    setenv PROJECT_TEMP_ROOT /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates
    setenv PUBLIC_HEADERS_FOLDER_PATH UnionConnect.app/Headers
    setenv RECURSIVE_SEARCH_PATHS_FOLLOW_SYMLINKS YES
    setenv REMOVE_CVS_FROM_RESOURCES YES
    setenv REMOVE_GIT_FROM_RESOURCES YES
    setenv REMOVE_HG_FROM_RESOURCES YES
    setenv REMOVE_SVN_FROM_RESOURCES YES
    setenv REZ_COLLECTOR_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/ResourceManagerResources
    setenv REZ_OBJECTS_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/ResourceManagerResources/Objects
    setenv REZ_SEARCH_PATHS "\"/Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator\" "
    setenv RUN_CLANG_STATIC_ANALYZER NO
    setenv SCAN_ALL_SOURCE_FILES_FOR_INCLUDES NO
    setenv SCRIPTS_FOLDER_PATH UnionConnect.app/Scripts
    setenv SCRIPT_INPUT_FILE_COUNT 0
    setenv SCRIPT_OUTPUT_FILE_COUNT 0
    setenv SDKROOT /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk
    setenv SDK_DIR /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk
    setenv SDK_NAME iphonesimulator6.1
    setenv SDK_PRODUCT_BUILD_VERSION 10B141
    setenv SED /usr/bin/sed
    setenv SEPARATE_STRIP NO
    setenv SEPARATE_SYMBOL_EDIT NO
    setenv SET_DIR_MODE_OWNER_GROUP YES
    setenv SET_FILE_MODE_OWNER_GROUP NO
    setenv SHALLOW_BUNDLE YES
    setenv SHARED_DERIVED_FILE_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator/DerivedSources
    setenv SHARED_FRAMEWORKS_FOLDER_PATH UnionConnect.app/SharedFrameworks
    setenv SHARED_PRECOMPS_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/PrecompiledHeaders
    setenv SHARED_SUPPORT_FOLDER_PATH UnionConnect.app/SharedSupport
    setenv SKIP_INSTALL NO
    setenv SOURCE_ROOT /Users/morrissinger/XCodeApplications/UnionConnect
    setenv SRCROOT /Users/morrissinger/XCodeApplications/UnionConnect
    setenv STRINGS_FILE_OUTPUT_ENCODING binary
    setenv STRIP_INSTALLED_PRODUCT YES
    setenv STRIP_STYLE all
    setenv SUPPORTED_DEVICE_FAMILIES "1 2"
    setenv SUPPORTED_PLATFORMS "iphonesimulator iphoneos"
    setenv SYMROOT /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products
    setenv SYSTEM_ADMIN_APPS_DIR /Applications/Utilities
    setenv SYSTEM_APPS_DIR /Applications
    setenv SYSTEM_CORE_SERVICES_DIR /System/Library/CoreServices
    setenv SYSTEM_DEMOS_DIR /Applications/Extras
    setenv SYSTEM_DEVELOPER_APPS_DIR /Applications/Xcode.app/Contents/Developer/Applications
    setenv SYSTEM_DEVELOPER_BIN_DIR /Applications/Xcode.app/Contents/Developer/usr/bin
    setenv SYSTEM_DEVELOPER_DEMOS_DIR "/Applications/Xcode.app/Contents/Developer/Applications/Utilities/Built Examples"
    setenv SYSTEM_DEVELOPER_DIR /Applications/Xcode.app/Contents/Developer
    setenv SYSTEM_DEVELOPER_DOC_DIR "/Applications/Xcode.app/Contents/Developer/ADC Reference Library"
    setenv SYSTEM_DEVELOPER_GRAPHICS_TOOLS_DIR "/Applications/Xcode.app/Contents/Developer/Applications/Graphics Tools"
    setenv SYSTEM_DEVELOPER_JAVA_TOOLS_DIR "/Applications/Xcode.app/Contents/Developer/Applications/Java Tools"
    setenv SYSTEM_DEVELOPER_PERFORMANCE_TOOLS_DIR "/Applications/Xcode.app/Contents/Developer/Applications/Performance Tools"
    setenv SYSTEM_DEVELOPER_RELEASENOTES_DIR "/Applications/Xcode.app/Contents/Developer/ADC Reference Library/releasenotes"
    setenv SYSTEM_DEVELOPER_TOOLS /Applications/Xcode.app/Contents/Developer/Tools
    setenv SYSTEM_DEVELOPER_TOOLS_DOC_DIR "/Applications/Xcode.app/Contents/Developer/ADC Reference Library/documentation/DeveloperTools"
    setenv SYSTEM_DEVELOPER_TOOLS_RELEASENOTES_DIR "/Applications/Xcode.app/Contents/Developer/ADC Reference Library/releasenotes/DeveloperTools"
    setenv SYSTEM_DEVELOPER_USR_DIR /Applications/Xcode.app/Contents/Developer/usr
    setenv SYSTEM_DEVELOPER_UTILITIES_DIR /Applications/Xcode.app/Contents/Developer/Applications/Utilities
    setenv SYSTEM_DOCUMENTATION_DIR /Library/Documentation
    setenv SYSTEM_LIBRARY_DIR /System/Library
    setenv TARGETED_DEVICE_FAMILY 1,2
    setenv TARGETNAME UnionConnect
    setenv TARGET_BUILD_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator
    setenv TARGET_NAME UnionConnect
    setenv TARGET_TEMP_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build
    setenv TEMP_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build
    setenv TEMP_FILES_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build
    setenv TEMP_FILE_DIR /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build
    setenv TEMP_ROOT /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates
    setenv TEST_AFTER_BUILD NO
    setenv TOOLCHAINS com.apple.dt.toolchain.XcodeDefault
    setenv UID 501
    setenv UNLOCALIZED_RESOURCES_FOLDER_PATH UnionConnect.app
    setenv UNSTRIPPED_PRODUCT NO
    setenv USER morrissinger
    setenv USER_APPS_DIR /Users/morrissinger/Applications
    setenv USER_LIBRARY_DIR /Users/morrissinger/Library
    setenv USE_DYNAMIC_NO_PIC YES
    setenv USE_HEADERMAP YES
    setenv USE_HEADER_SYMLINKS NO
    setenv VALIDATE_PRODUCT NO
    setenv VALID_ARCHS i386
    setenv VERBOSE_PBXCP NO
    setenv VERSIONPLIST_PATH UnionConnect.app/version.plist
    setenv VERSION_INFO_BUILDER morrissinger
    setenv VERSION_INFO_FILE UnionConnect_vers.c
    setenv VERSION_INFO_STRING "\"@(#)PROGRAM:UnionConnect  PROJECT:UnionConnect-\""
    setenv WRAPPER_EXTENSION app
    setenv WRAPPER_NAME UnionConnect.app
    setenv WRAPPER_SUFFIX .app
    setenv XCODE_APP_SUPPORT_DIR /Applications/Xcode.app/Contents/Developer/Library/Xcode
    setenv XCODE_PRODUCT_BUILD_VERSION 4H512
    setenv XCODE_VERSION_ACTUAL 0461
    setenv XCODE_VERSION_MAJOR 0400
    setenv XCODE_VERSION_MINOR 0460
    setenv YACC yacc
    /bin/sh -c /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Intermediates/UnionConnect.build/Debug-iphonesimulator/UnionConnect.build/Script-304B58A110DAC018002A0835.sh

mkdir: /Users/morrissinger/Library/Developer/Xcode/DerivedData/UnionConnect-fxrtfyqfklfejieapsrdftozwzdl/Build/Products/Debug-iphonesimulator/UnionConnect.app/www/build/native/My: File exists 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:21:14.763

感谢所有能够让我朝着正确方向发展的评论，我可以解决这个问题。

问题是我从磁盘上的另一个位置符号链接了我的 www 文件夹（用于 PhoneGap）。然后，当我将其复制过来时，我继续收到错误消息（以及弹出的对话框，仅显示“参数无效”），直到我从 www 目录中删除了“build”目录（它包含在 Sencha Touch 中）。

因此，教训显然是：

1.  不要将 PhoneGap 应用程序中的 www 目录与最新版本的 PhoneGap (2.5.0) 进行符号链接，因为如果不对构建过程进行一些进一步修改，它将无法工作，并且
2.  如果您在最新版本的 PhoneGap 中制作 Sencha Touch 应用程序，请在您的设备上运行该应用程序之前删除 Build 目录，您会得到与我在原始帖子中描述的错误非常相似的内容。

# excel - Excel VBA - 公式R1C1

> ID：15859166
> 
> 赞同：4
> 
> 时间：2013-04-07T05:23:13.057
> 
> 标签：excel, excel-formula, vba

我正在使用 VBA 代码遵循公式，

```
.Range("M2:M" & LastRow).FormulaR1C1 = "=vlookup(RC2 & RC3 & RC6 & RC7,trip_length!A:F,6,False)" 
```

但是当我按 F2 看到公式时，它显示如下：

```
=VLOOKUP($B2 & $C2 & $F2 & $G2,trip_length!A:(F),6,FALSE) 
```

除了 F 周围的括号外，所有内容都是正确的。因此，公式返回错误。

我尝试了很多但无法弄清楚如何使用 FormulaR1C1 的静态范围（另一张表）。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T06:01:51.140

使用 时`.FormulaR1C1`，所有范围引用都必须采用`R1C1`格式。因此，使用：

```
.Range("M2:M" & LastRow).FormulaR1C1 = _
  "=vlookup(RC2 & RC3 & RC6 & RC7,trip_length!C1:C6,6,False)" 
```

# java - 为什么我在 stdout println 之后看不到我的 stderr println？

> ID：15859170
> 
> 赞同：1
> 
> 时间：2013-04-07T05:23:24.557
> 
> 标签：java, stdout, output, stderr, println

```
 public static void algorithmOne(int n){

      long startTime = System.currentTimeMillis();

      search:
      for (int possiblePrime = 2; possiblePrime <= n; possiblePrime++){

         for (int divisor = 2; divisor < possiblePrime; divisor++)
            if ( possiblePrime%divisor == 0 && possiblePrime != divisor )
               continue search;

         System.out.println(possiblePrime);
      }
      long endTime = System.currentTimeMillis();
      System.err.println(endTime - startTime);
   } 
```

这是一种查找素数的方法，我无法弄清楚为什么我没有达到“System.err.println(endTime - startTime);” 线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:29:56.680

我猜你**正在**达到你的时差 println()，但你没有在你期望的地方看到它。这是因为您将它打印到 stderr - 所以您不能保证它在所有 println() 都附加到标准输出之后。

尝试打印到标准输出...

至于你的素数测试算法 - 看看[这](https://stackoverflow.com/questions/2385909/most-elegant-way-to-write-isprime-in-java)两个[关于](https://stackoverflow.com/q/2924452/1593077)决定素数的问题（那里有链接）。[这](https://stackoverflow.com/q/23287/1593077)还讨论了寻找主要因素，这不是同一个问题，但有一些您可能感兴趣的见解。具体来说，请考虑以下内容：

*   您的内部循环只需要上升到`sqrt(n)`，就好像 a 是 n 的一个因子，那么 n/a 也是如此。
*   3 之后的所有质因数都是 6n-1 或 6n+1 的形式（想想看），所以你可以循环 . 如果您想到[Erathostenes 的筛子，](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)您可以想到额外的此类“肮脏”优化。

那是“简单的事情”，你可以做的还有很多。但是，真的，你为什么要自己写一个素性测试呢？您可以使用现有[的代码。](http://www2-fs.informatik.uni-tuebingen.de/~reinhard/krypto/AKSTest/AKSeng.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T05:41:07.973

试试这个：

```
 long startTime = System.nanoTime();

    search: for (int possiblePrime = 2; possiblePrime <= 10; possiblePrime++) {

        for (int divisor = 2; divisor < possiblePrime; divisor++)
            if (possiblePrime % divisor == 0 && possiblePrime != divisor)
                continue search;

        System.out.println(possiblePrime);
    }
    long endTime = System.nanoTime();
    System.out.println(startTime);
    System.out.println(endTime);
    System.out.println("Total time taken is : " + (endTime - startTime)); 
```

# mysql - 连接多个表并创建一个表

> ID：15859172
> 
> 赞同：0
> 
> 时间：2013-04-07T05:23:35.163
> 
> 标签：mysql, sql, database, doctrine

![# 表和结果表](https://i.stack.imgur.com/0UscZ.png)

我有 3 张桌子，名为 Advance、Transport 和 Medicine。我想加入这三个表，并为 emp_id 1 提供一个类似于最后一个表的表。是否可以使用 dql（doctrine）或 sql 在 sql 级别执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:26:55.957

```
CREATE TABLE NewTable
SELECT  Date, 
        Emp_ID,
        Amount As Advance, 
        NULL AS Transport,
        NULL AS Medicine
FROM    Advance
WHERE   Emp_ID = 1           -- remove this WHERE clause to include all emp_ID
UNION   ALL
SELECT  Date, 
        Emp_ID,
        NULL As Advance, 
        Amount AS Transport,
        NULL AS Medicine
FROM    Transport
WHERE   Emp_ID = 1           -- remove this WHERE clause to include all emp_ID
UNION   ALL
SELECT  Date, 
        Emp_ID,
        NULL As Advance, 
        NULL AS Transport,
        Amount AS Medicine
FROM    Medicine
WHERE   Emp_ID = 1           -- remove this WHERE clause to include all emp_ID 
```

*   [创建表...选择语法](http://dev.mysql.com/doc/refman/5.0/en/create-table-select.html)

您也可以`VIEW`在此创建一个，

```
CREATE VIEW EmployeeView
AS
SELECT  Date, 
        Emp_ID,
        Amount As Advance, 
        NULL AS Transport,
        NULL AS Medicine
FROM    Advance
WHERE   Emp_ID = 1           -- remove this WHERE clause to include all emp_ID
UNION   ALL
SELECT  Date, 
        Emp_ID,
        NULL As Advance, 
        Amount AS Transport,
        NULL AS Medicine
FROM    Transport
WHERE   Emp_ID = 1           -- remove this WHERE clause to include all emp_ID
UNION   ALL
SELECT  Date, 
        Emp_ID,
        NULL As Advance, 
        NULL AS Transport,
        Amount AS Medicine
FROM    Medicine
WHERE   Emp_ID = 1           -- remove this WHERE clause to include all emp_ID 
```

*   [创建视图语法](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

# ruby-on-rails - 在 Rails 上使用 'rinruby' gem 时，我无法使用 png("path/to/file.png") & dev.off() 将热图等转储到文件夹

> ID：15859176
> 
> 赞同：1
> 
> 时间：2013-04-07T05:23:59.947
> 
> 标签：ruby-on-rails, ruby, image, r, export

虽然我的原始脚本比这复杂得多，但我什至无法让这个脚本运行`rails c`

这是我尝试过的，但平心而论，示例是什么并不重要。当图形生成过程开始时，功能似乎崩溃了。

**从`rails c`**

```
R.eval("numbers <- c(12,34,56,20,44,65)")
R.eval("png('sample.png')")
R.eval("plot(numbers)")
R.eval("dev.off()")
#nothing happens 
```

**从`irb`**

```
R.eval("numbers <- c(12,34,56,20,44,65)")
R.eval("png('sample.png')")
R.eval("plot(numbers)")
R.eval("dev.off()")
#action! 
```

**所以在rails之外，例如在ruby irb中，一切都运行良好。这是 rails 环境独有的问题**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T21:04:32.073

指定存储文件的 app/assets 路径：

```
require 'rinruby'

R.image_path = Rails.root.join("app", "assets", "sample.png").to_s
R.eval("numbers <- c(12,34,56,20,44,65)")
R.eval("png(filename=image_path)")
R.eval("plot(numbers)")
R.eval("dev.off()") 
```

png 应该显示在 app/assets 目录中，您可以像使用任何其他图像一样在 Rails 视图中使用它。

```
<%= image_tag 'sample.png' %> 
```

# android - 如何在主程序中获取imageview内容描述

> ID：15859178
> 
> 赞同：0
> 
> 时间：2013-04-07T05:24:05.653
> 
> 标签：android, android-imageview

我想在主程序上获取内容描述的值，我不知道，谁能解决我的问题？提前致谢。

xml

```
<string name="world1">Image world1</string>
<string name="world2">Image world2</string> 
```

以上两个值是设置ImageView1 & ImageView2的内容描述

如何在我的主程序上获取这些内容描述值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:25:46.907

视图类有`getContentDescription()`方法。

# rest - 删除操作是否应该考虑乐观锁定？

> ID：15859182
> 
> 赞同：1
> 
> 时间：2013-04-07T05:24:19.540
> 
> 标签：rest, optimistic-locking

在 REST API 中，代理向 /some-resource/666 发送 DELETE 请求

这应该足够了吗？或者他们应该发送资源 ID 以及版本（用于乐观锁定），以便他们可以确保他们正在删除他们读取的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:44:34.133

这在很大程度上取决于上下文。

*   如果您的资源`id`是服务器生成的并且始终是唯一的（例如，它可能`POST /some-resource`返回一个新`id`的资源的 GUID 或 SQL 自动增量列），那么您当然不需要指定任何特定`version`的删除和`DELETE /some-resource/{id}`足够了。

*   如果您的资源`id`是客户端生成的或仅在当前现有资源中唯一（可重复），那么您可以`version`按照您的建议添加查询参数。

    *   但是你必须问的一个问题是：如果你有非唯一或可重复的`id`值，你能否轻松地使它们始终唯一？如果是这样，请选择该解决方案而不是`version`参数 on `DELETE`。

# javascript - 如何在 Chrome 中触发“contextmenu”鼠标事件

> ID：15859185
> 
> 赞同：0
> 
> 时间：2013-04-07T05:24:33.923
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在开发一个 Chrome 扩展程序，我正在使用 Chrome 26。我想在内容脚本中的特定元素上触发“contextmenu”事件。
这是我的代码：

```
var evt = this.src.ownerDocument.createEvent('MouseEvents');
var RIGHT_CLICK_BUTTON_CODE = 2;
evt.initMouseEvent('contextmenu', true, true, window, 1, 
        x, y, clientX, clientY, false, false, false, false, RIGHT_CLICK_BUTTON_CODE, null);
this.src.dispatchEvent(evt); 
```

x, y, clientX, clientY 参数在检查后立即计算。
但是此代码部分无法弹出上下文菜单而没有引发异常。

# x86 - 输入字符串和 ret，x86 的溢出攻击

> ID：15859187
> 
> 赞同：3
> 
> 时间：2013-04-07T05:24:44.027
> 
> 标签：x86, buffer-overflow

在问题之前，这纯粹是为了分配，我不打算以其他方式错误地访问不安全的程序。

我有一个涉及溢出输入字符串的任务，以便`ret`指令将我发送到我想去的某个地址。该字符串预计最多 32 个字节，所以如果我用 32 个字节的垃圾填充它，然后是另外 4 个字节的垃圾，然后是我要访问的地址的 4 个字节，那么我操纵程序调用了错误的函数。我在 32 之后填充 4 个字节的垃圾的原因是因为溢出字符串的函数结束如下：

```
8048bc9: e8 3c ff ff ff     call 8048b0a <Gets>
8048bce: b8 01 00 00 00     mov $0x1,%eax
8048bd3: c9                 leave  
8048bd4: c3                 ret 
```

`<Gets>`是填充字符串的内容。如果我理解正确，那么 4 个字节的垃圾会在`%ebp`期间弹出`leave`，然后我的 4 个字节`ret`基本上是作为跳转到我想去的函数执行的。

这足以解决简单的问题，但在某些情况下，我应该在跳转到我想要的地方之前执行额外的代码`ret`。我不太了解`ret`这样做。如果我想说设置`%eax`为某个值（例如 0x12345678），这怎么可能来自`ret`仍然必须跳转到错误函数的指令？

如果这很重要，它会以 32 位运行。我在问如何执行附加指令，因为第一个问题的地址不变，但后面的问题的地址添加了随机值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:12:02.560

正如哈罗德所提到的，解决方案是让返回函数将我发送到我的字符串缓冲区的开头。

这可以通过溢出 40 个字节（这是 32 位 x86）的字符串缓冲区来完成，这样前 32 个字节在字符串缓冲区中，4 个由`leave`指令弹出，最后 4 个由`ret`指令执行。目标是使最后 4 个字节成为我的字符串缓冲区的地址，以小端形式。在`ret`指令执行完这 4 个字节后，我的机器代码开始从字符串缓冲区的开头执行。

# sql - 如何使用 sqlite 中的视图在特定行中添加列？

> ID：15859194
> 
> 赞同：1
> 
> 时间：2013-04-07T05:26:19.957
> 
> 标签：sql, database, sqlite, view

我在 sqlite 的数据库中有 3 个表

> **表 A**

```
 +-----+-------+
|  id | name  |
+-----+-------+
| 1   | Ann   |
| 2   | Bill  |
| 3   | Mike  |
| 4   | Zoey  |
+-----+-------+ 
```

> **表 B**

```
+-----+-----+
| idA | idC |
+-----+-----+
| 1   | 1   |
| 1   | 2   |
| 2   | 3   |
| 3   | 2   |
| 4   | 1   |
+-----+-----+ 
```

> **表 C**

```
+-----+-----+
|  id | type|
+-----+-----+
| 1   | x   |
| 2   | y   |
| 3   | z   |
+-----+-----+ 
```

我试过了：

```
CREATE VIEW test AS SELECT A.id, A.name, C.type
FROM A, B, C
WHERE B.idA = A.id
AND B.idB = B.id 
```

然后我得到：

```
 **View test**
+-----+-------+-------+
|  id | name  | type  |
+-----+-------+-------+
| 1   | Ann   | x     |
| 1   | Ann   | y     |
| 2   | Bill  | z     |
| 3   | Mike  | y     |
| 4   | Zoey  | x     |
+-----+-------+-------+ 
```

但我想做这样的事情

```
+-----+-------+-------+
|  id | name  | type  |
+-----+-------+-------+
| 1   | Ann   | x,y   |
| 2   | Bill  | z     |
| 3   | Mike  | y     |
| 4   | Zoey  | x     |
+-----+-------+-------+ 
```

没有重复任何行，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:31:59.790

SQLite 支持`GROUP_CONCAT()`

```
CREATE VIEW test 
AS
SELECT  A.id, A.name, GROUP_CONCAT(C.type) AS Type
FROM    A, B, C
WHERE   B.idA = A.id AND 
        B.idC = C.id
GROUP   BY A.id, A.name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!7/251ec/5)

输出

```
╔════╦══════╦══════╗
║ id ║ name ║ Type ║
╠════╬══════╬══════╣
║  1 ║ Ann  ║ x,y  ║
║  2 ║ Bill ║ z    ║
║  3 ║ Mike ║ y    ║
║  4 ║ Zoey ║ x    ║
╚════╩══════╩══════╝ 
```

来自 SQLite 文档

> 该`group_concat()`函数返回一个字符串，它是 X 的所有非 NULL 值的串联。如果存在参数 Y，则它用作 X 实例之间的分隔符。如果 Y 是，则使用逗号 (",") 作为分隔符省略。连接元素的顺序是任意的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:29:50.430

在定义视图时尝试这个查询：

```
SELECT A.id, A.name, GROUP_CONCAT(C.type) type
FROM A
INNER JOIN B ON B.idA = A.id
INNER JOIN C ON C.id = B.idC
GROUP BY A.id 
```

查看 MySQL 文档[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# audio - TravisCI 没有音频设备

> ID：15859196
> 
> 赞同：4
> 
> 时间：2013-04-07T05:26:31.820
> 
> 标签：audio, sdl, alsa, travis-ci

我正在尝试使用[TravisCI](http://about.travis-ci.org/)测试具有音频功能的 SDL 应用程序（但测试不需要它）。

当我在 Travis 的虚拟机中启动该应用程序时，它以以下方式退出：

```
ALSA lib confmisc.c:768:(parse_card) cannot find card '0'
ALSA lib conf.c:4241:(_snd_config_evaluate) function snd_func_card_driver returned error: No such file or directory
ALSA lib confmisc.c:392:(snd_func_concat) error evaluating strings
ALSA lib conf.c:4241:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory
ALSA lib confmisc.c:1251:(snd_func_refer) error evaluating name
ALSA lib conf.c:4241:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory
ALSA lib conf.c:4720:(snd_config_expand) Evaluate error: No such file or directory
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM default
Could not open sound: No available audio device 
```

有什么可以模拟音频设备的，比如[xvfb](http://en.wikipedia.org/wiki/Xvfb)可以模拟视频设备吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:57:22.103

如果您可以加载内核模块，请尝试驱动程序`snd-dummy`。

否则，告诉 SDL 使用设备名称`null`（设置环境变量`AUDIODEV`）。（`null`设备没有正确计时。）

# java - Spring3.2 RequestMapping 产生 = "application/json" 未写入 HttpServletResponse.ContentType

> ID：15859197
> 
> 赞同：2
> 
> 时间：2013-04-07T05:26:34.147
> 
> 标签：java, spring, rest, servlets, content-type

我正在使用Jetty8，jetty的servletResponse实现是org.eclipse.jetty.server.Response，它有一个默认的ContentType“text/html;UTF-8”，

我的请求映射方法：

```
@RequestMapping(value = "/post1", method = RequestMethod.POST, produces = "application/json")
@ResponseBody
public NodeConfig post1(@RequestBody NodeConfig config) {
    return config;
} 
```

A`GSONHttpMessageConverter`将处理返回的值`config`，

```
GSONHttpMessageConverter extends
        AbstractHttpMessageConverter<Object> 
```

我看到`AbstractHttpMessageConverter.write(xxx)`：

```
HttpHeaders headers = outputMessage.getHeaders();
//...
headers.setContentType(contentType); 
```

“应用程序/json”设置为 response.headers，但不是 response.contentType。检查`ServletServerHttpResponse.writeHeaders(xxx)`：

```
if (this.servletResponse.getContentType() == null && this.headers.getContentType() != null) {
                this.servletResponse.setContentType(this.headers.getContentType().toString());
            } 
```

因为默认的 contentType in `servletResponse`，真正的 contentType in`this.headers`没有设置为响应。

有人遇到这个问题吗？将 contentType 设置为 servletResponse 的任何想法？（我不喜欢将 servletResponse 注入我的业务方法）

我添加以下代码来`AbstractHttpMessageConverter.write(xx)`解决它。

```
 if (contentType != null && (outputMessage instanceof ServletServerHttpResponse)) {
        ServletServerHttpResponse response = (ServletServerHttpResponse) outputMessage;
        response.getServletResponse().setContentType(contentType.toString());
   } 
```

# shell - 在 linux/unix 脚本中防止/避免 ^M

> ID：15859199
> 
> 赞同：0
> 
> 时间：2013-04-07T05:26:40.193
> 
> 标签：shell, scripting

我有下面这样的脚本：`testing.sh`

```
#!/bin/bash

while read inputline
do
        plugin="$(echo $inputline | cut -d, -f 3-)"

        echo \"$plugin\" > test1.out
done < $1

exit 0 
```

配置文件：`test.conf`

```
host1-192.168.31.200,Current_Users,check_users -w 20 -c 50 
```

执行脚本后：

```
#./testing.sh test.conf 
```

输出文件：`test1.out`

```
"check_users -w 20 -c 50^M" 
```

如何预防/避免`^M`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:45:19.353

最简单的方法可能是编辑您的 test.conf 文件以将其删除（它是否来自另一个操作系统？）。但是，您也可以使用 tr 来摆脱它：

```
plugin="$(echo $inputline | tr -d \\r | cut -d, -f 3-)" 
```

# python - 如何从 python 中的类属性分配方法装饰器？

> ID：15859200
> 
> 赞同：0
> 
> 时间：2013-04-07T05:26:40.333
> 
> 标签：python

所以，我知道我可以毫无问题地做到这一点：

```
button = widget.libray.Button()

class X():
  @button.on_click
  def click(self, event):
    ... 
```

没有问题。

...但这很烦人，因为现在“按钮”超出了课程范围；我希望这是一个类属性。如何为类成员使用 @blah 装饰语法？

我当然不能使用装饰器，像这样：

```
class UiDemo(cocos.cocosnode.CocosNode):

  def on_enter(self):
    self.b = Button(text='Hello World')
    self.bt = b.event(self.bt) # <--- !!! Instead of decorator!
    vbox = VBox(elements=[self.b])
    self.dialog = Dialog(title='My Dialog', x=100, y=100, content=vbox, width=200, height=100)
    cocos.director.director.window.push_handlers(self.dialog)

  # @self.b.event doesn't work here, obviously.
  def bt(self, button):
     print('Button pressed: %s' % button)

  def on_exit(self):
    cocos.director.director.window.remove_handlers(self.dialog)

  def draw(self):
    self.dialog.on_draw()

class Client:
  def run(self):
    cocos.director.director.init()
    test = UiDemo()
    main_scene = cocos.scene.Scene(test)
    cocos.director.director.run (main_scene) 
```

我的意思是，我看到了问题；该方法是在定义类时在类上定义的（我猜），所以即使你在**init** () 步骤中创建了小部件，它在类定义被解析的时候也不存在，所以它可以'当时不能用作装饰者。

我想知道是否有某种解决方法？

当然，在很多情况下，您希望您的装饰器属性引用附加到该类的某物的实例？

（从我上面的例子可以看出，这*不仅仅是*“假设”的情况；这是本周我第二次使用冗长的 self.func = self.instance.dec(self.func)表格来做到这一点）

有什么建议么？

（......显然，除了使用不这样做的库，因为它很愚蠢；这不是真正的解决方案。：P）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T06:26:56.030

您可以将按钮设为类属性：

```
class X():
  button = widget.libray.Button()

  @button.on_click
  def click(self, event):
    # blah 
```

如果您尝试实例化多个 X 实例，这当然会导致问题（因为它们将共享同一个按钮），但如果您已`button`全局定义，这已经是一个问题。

不过，您已经准确地诊断出问题：修饰发生在类定义时，但您希望方法与实例相关联。最终，试图用这些技巧来强迫它可能会令人困惑。您正在创建的按钮实例在概念上与 X 的一个*实例*相关联，而不是与类本身相关联。您可能会合理地创建一个打算多次实例化的 GUI 类（对于某些特定样式的小部件或其他），在这种情况下，您必须放弃这些技巧，因为您确实需要实例你想绑定事件的时间。

如果你真的想要，你可以设计一个更精细的方案来处理这个问题。例如，您可以让这样的装饰器`@onclick('button')`将名称`button`作为属性存储在方法对象上。然后，您可以在`__init__`其中迭代对象的方法并将它们绑定到具有相应名称的 GUI 小部件上的事件的代码。（也就是说，您创建一个按钮并存储它`self.button`，然后`__init__`将此属性的名称与传递给装饰器的名称链接起来，并绑定事件。）

然而，只做显而易见的事情可能更简单：不要试图花哨并使用装饰器在类级别处理特定于实例的行为。只需在方法代码中绑定事件，如第二个示例所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:03:32.627

在我看来，混乱出现了，因为你想在不需要的时候*装饰。*你真正需要做的是注册一个回调。*除了注册它，装饰*回调也没有意义。

只需将按钮作为成员，就像您已经拥有的一样，然后向它注册回调。

```
def on_enter(self):
    self.b = Button(text='Hello World')
    b.event(self.bt) # register, don't decorate 
```

此外，您**不能**使用装饰器（除非创建 global `Button`），因为装饰是在定义类时完成的，并且该`Button`成员仅在创建对象时才被实例化，因此您不能在那时注册回调观点。

# jquery - 如何删除幻灯片中的暂停？

> ID：15859201
> 
> 赞同：0
> 
> 时间：2013-04-07T05:26:42.930
> 
> 标签：jquery, css

[http://kennenmen.netai.net/home.php](http://kennenmen.netai.net/home.php)

我已经玩了几个小时了，它几乎完成了。唯一给我带来麻烦的是我似乎无法弄清楚为什么我的幻灯片在循环播放所有图像后会暂停。有人知道它为什么这样做吗？

```
function slideSwitch() {
 var $active = $('#slideshow img.active');
if ($active.is(':last')) {
    $active.hide().removeClass('active');
    $('#slideshow img:first').show().addClass('active');
}else{
    $active.hide().removeClass('active').next().show().addClass('active');
}
}

$(function () {
$('#slideshow img').not('.active').hide()
setInterval(slideSwitch, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:40:13.407

未经测试，但您可以尝试以这种方式使用，而`setInterval`不是`setTimeout`：

```
$(function () {
    $('#slideshow img').not('.active').hide()
    setInterval(slideSwitch, 8000);    // this depends on how many images there are 
}); 
```

# c++ - 字符串来提升 posix_time 然后再回来

> ID：15859204
> 
> 赞同：4
> 
> 时间：2013-04-07T05:27:34.150
> 
> 标签：c++, datetime, boost

这里不是问题，只是好奇。我想知道当使用其他语言的 dateTime 实现的类似操作只有 3 或 4 行时，我必须编写多少代码才能实现这一点。

所以我得到的是一个字符串形式的时间戳，即：`06-Feb-2013 00:01:01`

通过使用 boost lib，我将创建输入和输出方面，创建一个字符串流并将 io 方面注入流中。然后，我会将时间戳字符串读入字符串流，然后再将其移出到 posix 时间对象，以在将其移回流中之前添加 1 秒，这样我就可以将其用作字符串。从某种意义上说，我在这里所做的只是将时间戳`06-Feb-2013 00:01:01`变成`06-Feb-2013 00:01:02`.

一个例子是：

```
using namespace boost::posix_time;

ptime timeStamp;
time_facet* outFacet = new time_facet("%d-%b-%Y %H:%M:%S");
time_input_facet* inFacet = new time_input_facet("%d-%b-%Y %H:%M:%S");
std::stringstream ss;
ss.imbue(std::locale(std::locale::classic(), outFacet));
ss.imbue(std::locale(ss.getloc(), inFacet));

ss.str(06-Feb-2013 00:01:01);
ss >> timeStamp;
timeStamp+=seconds(1);
ss.str("");
ss << timeStamp; 
```

代码有效，我没有问题。我只是想知道我是否在考虑到 python/ruby/js 等时以迂回的方式做到了这一点，我所要做的就是：

```
dt = new DateTime("06-Feb-2013 00:01:01", aformat);
dt.addSecond() //or dt += another DateTime object
dt.strformat(aformat) //or trace/print/puts dt 
```

现在我很欣赏 C++ 是较低级别的，但我仍然不禁想知道。那么有什么改进或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T16:18:16.137

如果您愿意接受稍有不同（固定）的时间格式，请使用 std::string to_simple_string(ptime) （格式化 YYYY-mmm-DD HH:MM:SS.fffffffff 字符串，其中 mmm 3 字符月份名称。仅小数秒如果非零，则根据[http://www.boost.org/doc/libs/1_34_0/doc/html/date_time/posix_time.html](http://www.boost.org/doc/libs/1_34_0/doc/html/date_time/posix_time.html)包含）可以简化您的代码以进行输出格式化以及相应的“ptime time_from_string（std： ：细绳）”。

# random - 批处理文件中的随机变量

> ID：15859208
> 
> 赞同：2
> 
> 时间：2013-04-07T05:28:05.450
> 
> 标签：random, batch-file

我正在尝试使用批处理文件创建 0 到 3 之间的随机变量。现在我有以下代码：

```
@echo off
set /a var=%random%/8192
@echo %var%
Pause 
```

该批处理文件每次都返回“2”。如果我直接在命令行中输入相同的命令，它会返回 0 到 3。

任何相关知识将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:19:03.530

**编辑**：我改变了我的答案，因为 OP 改变了他的问题：最初所需随机数的范围是 0 到 4 ......

正确的公式是：

```
set /a var=%random% * 4 / 32768 
```

使用其他运算符（如 / 或 %）来修改随机数分布，因此您将比使用正确的公式更频繁地获得重复结果。

**编辑**：*添加了额外的解释*

以前的代码应该在上面的示例中正确工作。但是，如果您的代码放置在*代码块*内（括在括号中），那么您必须在块内可能修改的*所有*变量（包括 RANDOM ）中使用延迟扩展（正如其他人在他们的答案中指出的那样） 。例如：

```
@echo off
setlocal EnableDelayedExpansion
:ProgStart
(
set /a var = !random! * 4 / 32768
goto target!var!
) 
```

如果你愿意，你可以使用这个更简单的公式，给出等效的结果（0 到 3 之间的随机数）：

```
set /a var = !random! / 8192 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:42:48.893

`if`我认为，您在or`for`代码块中使用 %random% 。在这种情况下，您需要`delayed expansion`和！变量！而不是 %variables%。例子：

```
@echo off & setlocal enabledelayedexpansion
for /l %%i in (1,1,5) do (
    echo %random% !random!
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T06:57:50.720

模数在这种情况下工作得很好：

```
set /a ran=%random% %% 4 + 1 
```

将设置`%ran%`为 1 到 4 之间的数字。但是，这只适用于批处理文件。

在命令提示符下，您需要：

```
set /a num=%random% % 4 + 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T15:17:49.487

你的代码很好。不过我有一个怀疑。在您的完整脚本中，您是否在循环或语句`set var`中检查其值？如果是这样，当您检查结果的值是您的脚本继承为 environment variable的值时，可能是脚本外部命令行测试的保留。`for``if``%var%``%var%`

如果我的评估是正确的，那么您需要一个`setlocal enabledelayedexpansion`and `echo !var!`。否则`for`or`if`将`%var%`使用它当时包含的值`for`或`if`第一次遇到的值进行评估。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T14:44:00.923

您想要的实际命令是：

```
set /a var=%random% %% 4 
```

这将为您提供：0、1、2 或 3。

如果您在 FOR 循环中执行此操作，请使用 !..!-type 变量而不是 %..%-type 变量，在这种情况下，您还需要`setlocal enabledelayedexpansion`靠近批处理文件开头的某个位置。

# ruby-on-rails - 如何在 Rails 3 中使复选框一次更新 2 个表字段？

> ID：15859209
> 
> 赞同：0
> 
> 时间：2013-04-07T05:28:11.073
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的数据库中的表中有两个布尔字段。

两者都默认为 FALSE

这就是我的看法

```
<%= label_tag(:post_draft, "Draft?") %>
<div class="ItemCheckboxAlign"><%= f.check_box :draft %></div> 
```

如您所见，我有一个正常工作。是否可以关联另一个布尔字段，所以如果选中，值也会更改为 TRUE？我想将这两个布尔字段值完全分开，除非我试图用这个复选框来更新两者。

我的架构：

```
 create_table "posts", :force => true do |t|
    t.text     "content"
    t.integer  "user_id"
    t.datetime "created_at",                         :null => false
    t.datetime "updated_at",                         :null => false
    t.boolean  "draft",          :default => false
    t.boolean  "sendreminder",          :default => false
  end 
```

如果在用户发布时选中复选标记，我正在尝试将底部的两个布尔字段更改为 TRUE。我已经有了“草稿”的工作，但只是试图同时改变另一个。

经过下面的一些讨论，我正在尝试应用该`update_attribute(sendreminder, true)`方法。我怎样才能在我的模型中包含它以使 sendreminder=true 仅当草稿 = true 时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:30:10.777

您还可以为模型添加`before_save`回调，并根据模型实例的新状态检查是否需要更新其他字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:25:07.317

在控制器上，您可以执行以下操作：

```
my_model = MyModel.find(params[:id])
my_model.assign_attributes(params[:my_model])
my_model.sendreminder = my_model.draft
if my_model.save
  bla bla bla
else
  bla bla bla
end 
```

只需确保将 MyModel 替换为您正在使用的模型，**bla bla bla**是伪代码 :)

* * *

如果您希望每次保存模型时都一样，您可以在您的模式上使用 before 过滤器。

```
class Post < ActiveRecord:Base
  before_save :associate_draft

  def associate_draft
    self.sendreminder = self.draft unless self.sendreminder == true
  end
end 
```

然后每次保存或更新模型时，都会执行该过滤器，并且 post_draft 的值将始终与 draft 相同。

# javascript - 如何使用对象使用 javascript 存储数据

> ID：15859211
> 
> 赞同：0
> 
> 时间：2013-04-07T05:28:44.550
> 
> 标签：javascript, object, for-loop, store

我写了这段代码：

```
$(".awesome").click(function () {
        var toStore = $("input[name=name]").val();
        if (/^[A-Za-z]+ [A-Za-z]+$/.test(toStore)) {
            $("#contain").children().fadeOut(1000);
            $("#contain").delay(1000).queue(function () {
                $("#contain").append("<h1>Welcome to My Quiz : " + toStore + "</br>" +
                    "Youll Get 10 Questions To Answer </br> " +
                    "Here Is the First One:Who is Prime Minister of the United Kingdom? </h1>");

                var allQuestions = [
                    {question: "Who is Prime Minister of the United Kingdom?",
                        choices: ["David Cameron",
                            "Gordon Brown",
                            "Winston Churchill",
                            "Tony Blair"],
                        correctAnswer: 0}
                ];
                $("#contain").append("<form><input type='radio' name='ans1' value='David Cameron'>David Cameron</br>" +
                    " <input type='radio' name='ans1' value='Gordon Brown'>Gordon Brown</br>" +
                    "<input type='radio' name = 'ans1' value = 'Winston Churchill' > Winston Churchill </br>" +
                    "<input type='radio' name='ans1' value='Tony Blair'>Tony Blair</br>" +
                    "<input type='submit' value='Submit' name='submit'></form>");
                $("input[name=submit]").click(function () {
                    var correctAnswer;
                    if ($("input[name=ans1]").val()) {
                        var x = "choices";
                        allQuestions[x] = "David Cameron";
                        for (var x in allQuestions) {
                            return correctAmswer = false;

                            if (allQuestions[x] === "David Cameron") {

                                return correctAnswer = true;
                            } else {
                                return correctAnswer = false;
                            }

                        }
                    }
                });
            });
        } else {
            alert("You Must Put a Valid Name");
        }
    });
}); 
```

现在你可以看到我有一个名为“allQuestions”的对象。现在我有 3 个属性：“问题”“选择”和“正确答案”。之后我有一个提交按钮，如果你点击它，它会检查输入 name="ans1" 的值，然后我会遍历对象 "allQuestions" 中的所有选项；如果然后答案是“大卫卡梅隆”，我希望它将正确答案存储为 1 而不是 0；否则我不想存储正确答案，它仍然为 0，因为我之后有更多问题。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:44:58.000

*   第一个问题是，如果在添加元素之前注册事件处理程序，则直接事件处理不适用于动态添加的元素。在您的情况下，我认为它有效，因为您在添加元素后注册了事件处理程序。但是您应该将其更改为：

    $("#contain").on("click","input[name=submit]", function(){ your function})

*   第二个问题是您访问 allQuestions 的方式不正确，因为它是一个数组。应该是：allQuestions[0][x];

*   像@Benjamin Gruenbaum 提到的第三个问题。

# php - 将数据从 javascript 数组发送到 php 并返回

> ID：15859212
> 
> 赞同：-3
> 
> 时间：2013-04-07T05:29:07.080
> 
> 标签：php, javascript, mysql, arrays, html

我正在尝试在设计网站上工作，用户可以在 html5 画布上设计一些东西，然后将其保存在服务器上。所有信息都存储在 mysql 数据库中，设计存储在 javascript 数组中。我希望能够将整个数组从 javascript 复制到 php 中，将其保存在数据库中，然后将其检索回 javascript。

我已经在网上搜索了这个，但找不到有效的解决方案。使用 post/get 没有用。如果我使用javascript打印数组，我会得到类似[object OBJECT，object OBJECT]的东西。

无论如何在javascript和php之间传递数组吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:30:38.337

是的，您可以通过使用 AJAX 来做到这一点。[http://en.wikipedia.org/wiki/Ajax_%28programming%29](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

jQuery 可以帮助解决这个[问题 http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:01:53.583

看看这个，这可能有助于 [将 JS 数组传递给 PHP](https://stackoverflow.com/questions/5035547/pass-javascript-array-php)。

一个建议：发帖前先搜索一下stackoverflow，这样可以节省很多时间。

# javascript - 如何在 d3 教程中将节点对象映射到节点 ID？

> ID：15859215
> 
> 赞同：0
> 
> 时间：2013-04-07T05:29:16.177
> 
> 标签：javascript, coffeescript, d3.js

我正在完成本教程 -

[http://flowingdata.com/2012/08/02/how-to-make-an-interactive-network-visualization/](http://flowingdata.com/2012/08/02/how-to-make-an-interactive-network-visualization/)

有一部分我不明白。

“最后，我们将节点 id 映射到节点对象，然后将链接中的源和目标替换为节点对象本身，而不是原始数据中的 id。这使得 D3 的强制布局能够正常工作，并使其成为可能添加/删除节点，而不用担心我们的节点数组和链接数组乱序。”

```
setupData = (data) ->
  # initialize circle radius scale
  countExtent = d3.extent(data.nodes, (d) -> d.playcount)
  circleRadius = d3.scale.sqrt().range([3, 12]).domain(countExtent)
  data.nodes.forEach (n) ->
    # set initial x/y to values within the width/height
    # of the visualization
    n.x = randomnumber=Math.floor(Math.random()*width)
    n.y = randomnumber=Math.floor(Math.random()*height)
    # add radius to the node so we can use it later
    n.radius = circleRadius(n.playcount)
  # id's -> node objects
  nodesMap  = mapNodes(data.nodes)
  # switch links to point to node objects instead of id's
  data.links.forEach (l) ->
    l.source = nodesMap.get(l.source)
    l.target = nodesMap.get(l.target)
    # linkedByIndex is used for link sorting
    linkedByIndex["#{l.source.id},#{l.target.id}"] = 1

  data 
```

这是在关于函数 setupData() 的部分之后说的。我不明白将节点 ID 映射到节点对象意味着什么，因为似乎节点对象是随后由 update() 方法创建的。

这些节点对象是什么？mapNodes() 将如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:04:00.493

创建力有向图时，您必须提供每个节点的数据以及节点的连接方式。它们如何连接的信息由在力图上直接调用的[force.links([])](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-links)方法设置。链接数组中的每个数据点都有一个源和一个目标，它们被定义为索引（数据数组中的位置）或数组本身中的实际对象。

例如。

```
var banana = {type: "fruit", color: "yellow"};
var apple = {type: "fruit", color: "red"};
..etc

var data = [apple, banana, sausage, peach, bagel, kimchee.. etc etc ]

var links = [{source: 1,target: 2}, 
             {source: 2, target: 10}, ....etc. ] //as index 
```

或者

```
 var links = [{source:banana,target:apple},
              {source:apple, target:orange}, 
              ....etc. ] //as object 
```

在[初始数据](http://projects.flowingdata.com/tut/interactive_network_demo/data/call_me_al.json)中，每首歌曲都有一个 id，而源/目标只是定义为指向这些 id。通过这一步，他用与 id 匹配的实际对象替换初始 id 字符串。

# delphi - 在 Delphi 中获取 OpenSSL DLL 的版本和/或位置？

> ID：15859218
> 
> 赞同：3
> 
> 时间：2013-04-07T05:29:36.770
> 
> 标签：delphi, openssl, indy10

出于故障排除目的，我的应用程序是否可以在运行时进行检查：

1.  openssl dll（ssleay32.dll 和 libeay32.dll）是否真的存在并且能够被我的应用程序成功加载？
2.  openssl dll的实际加载路径是什么（所以我可以验证它是从应用程序目录中的副本加载它，还是从某处的系统路径中获取一些杂散副本）
3.  我的应用程序（或 Indy）使用什么版本的 openssl？（如果我知道确切的路径，大多数版本的 openssl dll 都包含我可以通过查看 Windows 文件属性检查的版本信息）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:37:21.937

是的。按照您要求的相同顺序：

1.  用于[`LoadLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)每个 DLL 并检查返回值。
2.  如果 #1 成功，则用于[`GetModuleFileName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)检索已加载 DLL 的完整路径名。
3.  如果#2 成功，用于[`GetFileVersionInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003%28v=vs.85%29.aspx)查看 DLL 是否有可用的文件版本信息。如果是，请用于[`VerQueryValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647464%28v=vs.85%29.aspx)读取版本信息（与您通过查看 Windows 文件属性看到的信息相同）。

它们都可以从`Windows`单位获得。Delphi 中的所有三个示例都可以在 StackOverflow 上找到。如果您找不到它们，请在此处发布单独的问题（见下文），寻求使用它们的帮助。

（这里的帖子应该包含一个问题，这样就可以选择一个答案作为答案。如果您在同一个帖子中包含多个问题，则可以几个人分别回答其中一个；这种情况下，您如何选择哪个？一个接受为正确的？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T16:42:13.010

Indy 10`IdOpenSSLSetLibPath()`在 IdSSLOpenSSLHeaders.pas 单元中有一个函数，因此您可以告诉 Indy DLL 的位置，而不必在操作系统搜索路径上寻找它们。

最好的选择是在你的应用程序的安装目录中提供所需的 DLL，这样就无需猜测你的应用程序将加载什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-05T13:33:21.373

您可以使用 OpenSSL api 获取版本号。[使用此处](http://www.disi.unige.it/person/FerranteM/delphiopenssl/)找到的 Marco Ferrante 的 libeay32.pas和以下函数（我修改了 Marco 的 GetVersion 示例，因为它有点不正确）：

```
function GetOpenSSLVersion: string;
var
  v: cardinal;
  s: PCharacter;
begin
  //Get the numeric release version identifier as described in http://www.openssl.org/docs/crypto/OPENSSL_VERSION_NUMBER.html#
  v := SSLeay;

  //Get text version number and release date, e.g.: "OpenSSL 0.9.5a 1 Apr 2000"
  s := SSLeay_version(_SSLEAY_VERSION);
  result := s + ' (' + IntToHex(v, 9) + ')';
end; 
```

# jquery - 在 div 中隐藏 div

> ID：15859222
> 
> 赞同：0
> 
> 时间：2013-04-07T05:30:05.487
> 
> 标签：jquery, html

我不确定为什么下面的代码没有在我的 div 中隐藏我的两个 div 以获取我的内容。有人可以检查我的代码吗？该代码不会隐藏下面的任何一个 div。谢谢

好的，这是我编辑的代码。在初始化加载时，两个表单都出现在选择类型下，当我选择经销商/客户时，显示正确的表单并选择类型，然后在您选择一个后显示无。我如何让它最初隐藏所有内容？谢谢

```
<div id="contentArea">
            <form action="xxxxx.php" method="post" onsubmit="return checkStuff();" enctype="multipart/form-data">
                Warranty Registration Type:<br/>
                <select id="select"> 
                    <option value ="#blank">Select Type</option>
                    <option value ="#dealerform">Dealer</option>
                    <option value ="#customerform">Customer</option>
                </select>
                <br/>
                <br/>
                <div id="dealerform">
                    Dealer Name:   <input type="text" name="dealername"> <br/>
                    Dealer Address:  <input type="text" name="dealeradd"> <br>
                </div>
                <div id="customerform">
                    First Name:  <input type="text" name="firstname"> <br>
                    Last Name:  <input type="text" name="lastname"> <br>
                </div>
                <script>
                $(document).ready(function(){
                    $('#select').change(function(){
                        $('#dealerform,#customerform').hide();
                        $($(this).find('option:selected').attr('value')).show();
                    });
                });
                </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:35:02.627

可能是因为您的选择没有您在更改事件中使用的 id 'select'。

```
 <select id="select"> 
                    <option value ="#dealerform">Dealer</option>
                    <option value ="#customerform">Customer</option>
                </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:38:11.937

嘿，你应该这样写

```
 $($(this).find('option:selected').attr('value')).show(); 
```

而不是这个

```
 $($(this).find('option:selected').attr('id')).show(); 
```

这样相应的 div 就会隐藏，因为其他人说需要为选择添加 id 或在选择之前删除 #

```
$('select').change(....) 
```

# .net - .NET 如何在同一个处理程序中处理多个事件

> ID：15859226
> 
> 赞同：0
> 
> 时间：2013-04-07T05:30:23.480
> 
> 标签：.net, vb.net, visual-studio-2010

我有两个对象，A 和 B，两个对象都有相同的方法，称为 Hi。所以 A.hi 会显示一个消息框说“hi I'm A”，B.hi 会显示一个消息说“hi I'm B”。他们也都有一个按钮来激活这个方法。

如何在同一个处理程序中处理这两个事件？

例如，如果我分开做，我会为 A 做这个。

```
Private Sub btnHi_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnHiClassA.Click
   A.hi
End Sub 
```

我想在同一个处理程序中处理这两个事件，我可以用这个逻辑做一个乏味的版本；

```
Private Sub btnHi_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnHiClassA.Click, btnHiClassB.Click 
   if sender is btnHiClassA then
      A.hi
   elseif sender is btnHiClassB then
      B.hi
   end if
End Sub 
```

理想情况下，它会是这样的：

```
Private Sub btnHi_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnHiClassA.Click, btnHiClassB.Click
   'theObject = sender
   'theObject.hi
End Sub 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:45:49.030

使用方法 Hi 定义一个接口 IHiSender。

在您的所有课程中实施 IHiSender。

将 EventArgs 的子类定义为 HiSenderEventArgs，并将附加属性 WhoAmI 定义为类型 IHiSender。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:01:27.853

## 我并没有完全了解你想要达到的目标以及你想要如何做到这一点，而是根据我得到它的方式来判断，

我会使用*Ctype*。Ctype 获取对象引用（如发送者）并将其转换为对象，如按钮。通过这种方式，您可以动态获取发件人的属性。因此，如果您有一个事件处理程序，您可以使用任意数量的对象来处理。

### 有很多方法可以做到这一点，但我会创建一个 Private Sub。

```
Private Sub ButtonHi(sender As System.Object, e As System.EventArgs)
    Dim ButtonName As String = CType(sender, Button).Name

    If ButtonName = "ButtonHiA" Then
    Msgbox("Hello World, I'm button A!")
    ElseIf ButtonName = "ButtonHiB" Then
    Msgbox("Hello World, I'm button B!")
    End If
End Sub 
```

如您所见，该 sub 不是真正的处理程序，因此我们必须将一个对象指向它：您可以通过不同的方式实现这一点，以下是两种。

### 在 Form_Load 中添加处理程序：

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    AddHandler ButtonHiA.Click, AddressOf ButtonHi
    AddHandler ButtonHiB.Click, AddressOf ButtonHi
End Sub 
```

### button_click 上的重定向处理程序：

```
Private Sub ButtonHiA_Click(sender As System.Object, e As System.EventArgs) Handles ButtonHiA.Click
    ButtonHi(sender, e)
End Sub

Private Sub ButtonHiB_Click(sender As System.Object, e As System.EventArgs) Handles ButtonHiB.Click
    ButtonHi(sender, e)
End Sub 
```

如果这不是您所追求的，请在下面的评论中澄清。

# solr - 从站上的随机 IllegalStateException (Solr 3.6.1)

> ID：15859228
> 
> 赞同：2
> 
> 时间：2013-04-07T05:30:28.723
> 
> 标签：solr, replication

我们有一个主从 Solr 设置并仅针对从属运行实时查询。完全导入（优化）每天凌晨 2 点在 master 上进行

```
# full-import Lists entity
00 02 * * * curl "http://localhost:8080/solr/List/dataimport?command=full-import&clean=true&optimize=true&entity=Lists" > /dev/null

# delta-import Lists entity
*/5 0-1,4-23 * * * curl "http://localhost:8080/solr/List/dataimport?command=delta-import&entity=Lists" > /dev/null

# delta-import ViewedLists entity
23 0-1,4-23 * * * curl "http://localhost:8080/solr/List/dataimport?command=delta-import&entity=ViewedLists" > /dev/null 
```

我们的应用日志中每天都会出现以下异常情况：

```
...
org.apache.solr.client.solrj.SolrServerException: Error executing query
        at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:95)
        at org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:118)
... 
```

像这样的任意查询：

```
08:26:39,430 ERROR SolrUtil:107 - SOLR QUERY (LIST): q=*:*&fq=-list_type:CONTRIBUTING AND is_source_list:false AND is_blocked_on_hpage:false&start=0&rows=8&sort=first_publish_date desc
org.apache.solr.client.solrj.SolrServerException: java.net.SocketException: Connection reset
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:478)
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:244)
        at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:89)
        at org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:118)
        ... 
```

如果我在solr从服务器上查看tomcat中的localhost.log文件，同时出现如下异常：

```
Apr 06, 2013 7:16:33 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet default threw exception
java.lang.IllegalStateException
    at org.apache.catalina.connector.ResponseFacade.sendError(ResponseFacade.java:407)
    at org.apache.solr.servlet.SolrDispatchFilter.sendError(SolrDispatchFilter.java:389)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:291)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722) 
```

复制设置如下：

```
 <requestHandler name="/replication" class="solr.ReplicationHandler" >
      <lst name="master">
        <str name="enable">${enable.master:false}</str>
        <str name="replicateAfter">startup</str>
        <str name="replicateAfter">commit</str>
        <str name="replicateAfter">optimize</str>
        <str name="confFiles">solrconfig.xml,data-config.xml,schema.xml,stopwords.txt,synonyms.txt,elevate.xml</str>
      </lst>
      <lst name="slave">
        <str name="enable">${enable.slave:false}</str>
        <str name="masterUrl">http://${master.ip}:${master.port}/solr/${solr.core.name}/replication</str>
        <str name="pollInterval">00:00:10</str>
      </lst>
  </requestHandler> 
```

除了完整和增量导入之外，我们还有每 15 分钟加载一次的外部文件字段。在主服务器和从服务器上使用 reloadCache。

是什么导致了这个异常以及如何解决它？

**更新**：`pollInterval`从 10 秒增加到 1 分钟。仍然看到同样的问题。另外，忘记提到该错误在短时间内发生在不同的查询上，因此它不依赖于查询。

**更新 2**：将增量导入频率降低到每 10 分钟一次，并将外部文件字段加载和 reloadCache 降低到每小时一次。仍然看到异常，尽管异常的频率似乎已经降低。

# svn - svn: 无法打开请求的 SVN 文件系统

> ID：15859229
> 
> 赞同：2
> 
> 时间：2013-04-07T05:30:29.427
> 
> 标签：svn, centos, lampp

我尝试在 LAMPP 环境中设置 svn。我的 svn 存储库位于 中`/var/svn/repos`，并且该`repos`目录归`root:root`.

现在，在运行命令时

```
svn import test http://localhost/svn -m 'init' 
```

我看到此错误消息：

```
svn: Could not open the requested SVN filesystem 
```

如何使命令成功运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:43:49.553

您需要 Web 服务器 (Apache) 可以访问存储库。将 user:group 更改为 apache:apache、httpd:httpd 或 www-data:www-data 之类的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T23:37:17.363

我的 subversion (1.6) 在 cent OS 的默认存储库中遇到了同样的问题。最后我卸载了 svn 并安装了最新版本（1.8）。我的问题解决了。

要安装 svn 最新版本，请点击此链接。 [http://tecadmin.net/install-subversion-1-8-on-centos-rhel/](http://tecadmin.net/install-subversion-1-8-on-centos-rhel/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T06:51:23.310

请在运行“chown -R apache:apache *”后在您的 repo 下运行此命令。您还必须更改文件和目录权限

```
 find . -type f -exec chmod 644 {} \;
 find . -type d -exec chmod 755 {} \; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-01T07:05:46.923

转到*SVNParentPath*目录这里我的目录路径是`/var/www/svn`

```
cd /var/www/svn/ 
```

**在SVNParentPath**下创建存储库

 **```
svnadmin create repo_name 
```

授予 Apache 权限

```
chown -R apache:apache repo_name/ 
```

创建一个 SVN 用户

```
htpasswd -m /etc/httpd/conf/.htpasswd username 
```

分配权限

```
vi /etc/svnusers
[repo_name:/]

username=rw 
```

重启 Apache 服务

```
service httpd restart 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-21T15:07:23.680

您可能遇到了自定义错误文档的 SVN 问题。修理它：

> 如果您在存储库位置下启用了自定义 404 ErrorDocument，您可能会遇到“500 无法加载请求的 SVN 文件系统”——通过重置`Location`块中的 ErrorDocument 指令来解决此问题；工作配置如下：
> 
> ```
> <VirtualHost *:80>
>   ServerName localhost
>   DocumentRoot /var/www
>   <Location /svn>
>     DAV svn
>     SVNPath /var/svn/repos
>     ErrorDocument 404 default
>   </Location>
> </VirtualHost> 
> ```

这是来自[RimuHosting 的颠覆 HowTo](http://rimuhosting.com/knowledgebase/applications/subversion)。重要的一行是`ErrorDocument 404 default`——将它添加到`<Location …&gt;`为 SVN 配置位置的块中，重新加载 Apache 配置，应该没问题。

^(（我猜想您的 SVN 存储库可能已映射到`http://localhost/svn/`并相应地调整了报价中的配置指令。）)**

# ruby - UML 图生成器

> ID：15859232
> 
> 赞同：5
> 
> 时间：2013-04-07T05:30:45.920
> 
> 标签：ruby, gem, uml

Ruby 有没有好的 UML 图生成器？我看到了[RailRoady](http://railroady.prestonlee.com/)和[RailRoad](http://railroad.rubyforge.org/)，但它们需要 Rails。

# sql-server - AdventureWorks 数据库安装脚本错误

> ID：15859233
> 
> 赞同：0
> 
> 时间：2013-04-07T05:30:52.993
> 
> 标签：sql-server, sql-server-2008

我正在从[这里](http://msftdbprodsamples.codeplex.com/releases/view/89502)`AdventureWorks 2008`安装示例数据库。我在 SQL Server 2008模式下执行以下脚本，但出现错误`SQLCMD`

> 消息 102，级别 15，状态 1，第 28 行
> ':' 附近的语法不正确。
> Microsoft SQL Server 2008 (RTM) - 10.0.1600.22 (X64) 2008 年 7 月 9 日 14:17:44
> 版权所有 (c) 1988-2008 Microsoft Corporation Developer Edition (64-bit) o​​n Windows NT 6.1 (Build 7600: )
> 
> 开始时间 - 2013-04-07 10:46:30.423
> * 删除数据库
> * 创建数据库
> 
> 消息 5105，级别 16，状态 2，第 2 行
> 发生文件激活错误。物理文件名“$(SqlSamplesDatabasePath)AdventureWorks2008_Data.mdf”可能不正确。诊断并更正其他错误，然后重试该操作。
> 
> 消息 1802，级别 16，状态 1，行 2
> 创建数据库失败。无法创建列出的某些文件名。检查相关错误。
> 
> 消息 5011，级别 14，状态 5，第 2 行
> 用户无权更改数据库“AdventureWorks2008”，数据库不存在，或数据库未处于允许访问检查的状态。
> 
> 消息 5069，级别 16，状态 1，第 2 行
> ALTER DATABASE 语句失败。
> 
> 消息 911，第 16 级，状态 1，第 2 行
> 数据库“AdventureWorks2008”不存在。确保输入的名称正确。. .

这是我正在使用的脚本的一部分：

```
/*============================================================================
  File:     instawdb.sql

  Summary:  Creates the AdventureWorks 2008R2 OLTP sample database.

  SQL Server Version: 10.50.1600
------------------------------------------------------------------------------
  This file is part of the Microsoft SQL Server Code Samples.

  Copyright (C) Microsoft Corporation.  All rights reserved.

  This source code is intended only as a supplement to Microsoft
  Development Tools and/or on-line documentation.  See these other
  materials for detailed information regarding Microsoft code samples.

  All data in this database is ficticious.

  THIS CODE AND INFORMATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY
  KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A
  PARTICULAR PURPOSE.
============================================================================*/

-- Be sure to enable FULL TEXT SEARCH before running this script

-->> WARNING: THIS SCRIPT MUST BE RUN IN SQLCMD MODE INSIDE SQL SERVER MANAGEMENT STUDIO. <<--
:on error exit

-- IMPORTANT
/*
 * In order to run this script manually, either set the environment variables,
 * or uncomment the setvar statements and provide the necessary values if
 * the defaults are not correct for your installation.
 */

setvar SqlSamplesDatabasePath   "C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA"
setvar SqlSamplesSourceDataPath "C:\Users\DEVESH\Downloads\"

IF '$(SqlSamplesSourceDataPath)' IS NULL OR '$(SqlSamplesSourceDataPath)' = ''
BEGIN
    RAISERROR(N'The variable SqlSamplesSourceDataPath must be defined.', 16, 127) WITH NOWAIT
    RETURN
END

IF '$(SqlSamplesDatabasePath)' IS NULL OR '$(SqlSamplesDatabasePath)' = ''
BEGIN
    RAISERROR(N'The variable SqlSamplesDatabasePath must be defined.', 16, 127) WITH NOWAIT
    RETURN
END

SET NOCOUNT OFF;
GO

PRINT CONVERT(varchar(1000), @@VERSION);
GO

PRINT '';
PRINT 'Started - ' + CONVERT(varchar, GETDATE(), 121);
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:34:49.943

问题可能是您没有像脚本警告的那样在 SQLCMD 模式下运行它：

```
-->> WARNING: THIS SCRIPT MUST BE RUN IN SQLCMD MODE INSIDE SQL SERVER MANAGEMENT STUDIO. <<-- 
```

有关如何在 SQL Server Management Studio 中切换到 SQLCMD 模式的信息，请参阅[http://www.mssqltips.com/sqlservertip/2405/sql-server-management-studio-sqlcmd-mode-option/ 。](http://www.mssqltips.com/sqlservertip/2405/sql-server-management-studio-sqlcmd-mode-option/)

# ios - 重新排列数组中的字母并检查排列是否在数组中

> ID：15859238
> 
> 赞同：4
> 
> 时间：2013-04-07T05:32:08.203
> 
> 标签：ios, objective-c, arrays, words, anagram

我正在制作一个 ios 应用程序，您可以在其中输入 9 个字母，它将输出这 9 个字母的字谜。它就像目标词，或论文中的 9 个字母词。喜欢这个链接：

[http://nineletterword.tompaton.com/](http://nineletterword.tompaton.com/)

它不只是为 9 个字母提供字谜，它会为 4 个字母、5 个字母、6 个字母......所有这些都至少包含中间字母。

我想让它成为一个**离线**应用程序，所以我不想引用任何网站或使用在线 json...

我将如何检查是否可以将 9 个字母的数组重新排列成我下载的英语词典中的单词。

例如，我有 (a,b,a,n, **D** ,o,n,e,d) 的输入：如何在一个名为“英语词典”的数组中获得 4 个或更多的英语单词的输出必须包含中间字母“D”——如“abandon”、“bond”、“dead”...

最好的方法是很多很多循环和 if 语句，还是 xcode/objective c 中有一些东西我可以用来获取 4 个字母的列表，然后对其进行所有可能的安排......

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:12:06.450

让我提出一个不同的算法，它依赖于查找，而不是通过数组进行搜索。

设置：

遍历字典中的单词。对于每个单词，创建一个具有相同字符的字符串，按字母顺序排序。使用此字符串作为键，创建原始单词数组的字典。

用法：

现在您可以非常快速地检查任何字符组合：只需像上面那样对字符进行排序，然后在地图中查找生成的键。

例子：

原始数组：`( bond, Mary, army )`

字谜查找图：

```
{
   bdno : ( bond ),
   amry : ( Mary, army ),
} 
```

使用此地图可以非常快速地检查任何单词的字谜。不需要对字典数组进行迭代。

**编辑：**

我提出的算法分为三个部分：

1.  从对象字典构建查找映射的设置方法：`anagramMap`
2.  一种计算逐字符排序键的方法：`anagramKey`
3.  一种算法，查找包含在九个字母单词中的字符的所有排列，并在地图中查找单词：`findAnagrams`.

这是所有三种方法的实现，作为 上的一个类别`NSString`：

```
@interface NSString (NSStringAnagramAdditions)
- (NSSet *)findAnagrams;
@end

@implementation NSString (NSStringAnagramAdditions)

+ (NSDictionary *)anagramMap
{
    static NSDictionary *anagramMap;
    if (anagramMap != nil)
        return anagramMap;

    // this file is present on Mac OS and other unix variants
    NSString *allWords = [NSString stringWithContentsOfFile:@"/usr/share/dict/words"
                                                   encoding:NSUTF8StringEncoding
                                                      error:NULL];

    NSMutableDictionary *map = [NSMutableDictionary dictionary];
    @autoreleasepool {
        [allWords enumerateLinesUsingBlock:^(NSString *word, BOOL *stop) {
            NSString *key = [word anagramKey];
            if (key == nil)
                return;
            NSMutableArray *keyWords = [map objectForKey:key];
            if (keyWords == nil) {
                keyWords = [NSMutableArray array];
                [map setObject:keyWords forKey:key];
            }
            [keyWords addObject:word];
        }];
    }

    anagramMap = map;
    return anagramMap;
}

- (NSString *)anagramKey
{
    NSString *lowercaseWord = [self lowercaseString];

    // make sure to take the length *after* lowercase. it might change!
    NSUInteger length = [lowercaseWord length];

    // in this case we're only interested in anagrams 4 - 9 characters long
    if (length < 4 || length > 9)
        return nil;

    unichar sortedWord[length];
    [lowercaseWord getCharacters:sortedWord range:(NSRange){0, length}];

    qsort_b(sortedWord, length, sizeof(unichar), ^int(const void *aPtr, const void *bPtr) {
        int a = *(const unichar *)aPtr;
        int b = *(const unichar *)bPtr;
        return b - a;
    });

    return [NSString stringWithCharacters:sortedWord length:length];
}

- (NSSet *)findAnagrams
{
    unichar nineCharacters[9];
    NSString *anagramKey = [self anagramKey];

    // make sure this word is not too long/short.
    if (anagramKey == nil)
        return nil;
    [anagramKey getCharacters:nineCharacters range:(NSRange){0, 9}];
    NSUInteger middleCharPos = [anagramKey rangeOfString:[self substringWithRange:(NSRange){4, 1}]].location;

    NSMutableSet *anagrams = [NSMutableSet set];

    // 0x1ff means first 9 bits set: one for each character
    for (NSUInteger i = 0; i <= 0x1ff; i += 1) {

        // skip permutations that do not contain the middle letter
        if ((i & (1 << middleCharPos)) == 0)
            continue;

        NSUInteger length = 0;
        unichar permutation[9];
        for (int bit = 0; bit <= 9; bit += 1) {
            if (i & (1 << bit)) {
                permutation[length] = nineCharacters[bit];
                length += 1;
            }
        }

        if (length < 4)
            continue;

        NSString *permutationString = [NSString stringWithCharacters:permutation length:length];
        NSArray *matchingAnagrams = [[self class] anagramMap][permutationString];

        for (NSString *word in matchingAnagrams)
            [anagrams addObject:word];
    }

    return anagrams;
}

@end 
```

假设一个名为的变量中有一个测试字符串，`nineletters`您将使用以下命令记录可能的值：

```
for (NSString *anagram in [nineletters findAnagrams])
    NSLog(@"%@", anagram); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T06:31:05.667

首先，您需要一种方法来检查一个单词是否是第二个单词的字谜。有许多可能的解决方案（搜索“Objective-C anagram”）。这本质上是来自 [https://stackoverflow.com/a/13465672/1187415](https://stackoverflow.com/a/13465672/1187415)的方法，写法略有不同：

```
- (BOOL)does:(NSString*)longWord contain:(NSString *)shortWord
{
    NSMutableString *longer = [longWord mutableCopy];
    __block BOOL retVal = YES;
    // Loop over all characters (letters) in shortWord:
    [shortWord enumerateSubstringsInRange:NSMakeRange(0, [shortWord length])
                                  options:NSStringEnumerationByComposedCharacterSequences
                               usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
        // Check if letter occurs in longer word:
        NSRange letterRange = [longer rangeOfString:substring];
        if (letterRange.location != NSNotFound) {
            // Yes. Remove from longer word and continue.
            [longer deleteCharactersInRange:letterRange];
        } else {
            // No. Set return value to NO and quit the loop.
            retVal = NO;
            *stop = YES;
        }
    }];
    return retVal;
} 
```

例子：

*   `[self does:@"abandoned" contain:@"bond"] = YES`
*   `[self does:@"abandoned" contain:@"sea"] = NO`，因为第一个单词中没有“s”。
*   `[self does:@"abandoned" contain:@"noon"] = NO`，因为“noon”有2个字母“o”，但第一个单词只有一个“o”。

然后，您可以按以下方式进行：

```
NSArray *englishWords = ...; // Your array of english words

NSString *inputWord = @"abandoned"; // The input string
NSString *middleLetter = [inputWord substringWithRange:NSMakeRange([inputWord length]/2, 1)];

NSPredicate *predicate = [NSPredicate predicateWithBlock:^BOOL(NSString *word, NSDictionary *bindings) {
    // Word must have at least 4 letters:
    if ([word length] < 4)
        return NO;
    // Word must contain the middle letter:
    if ([word rangeOfString:middleLetter].location == NSNotFound)
        return NO;
    // Word must contain only letters of the input word:
    if (![self does:inputWord contain:word])
        return NO;
    return YES;
}];
NSArray *matchingWords = [englishWords filteredArrayUsingPredicate:predicate];
NSLog(@"%@", matchingWords); 
```

# css - app.css 与 app.sass 合并问题

> ID：15859239
> 
> 赞同：0
> 
> 时间：2013-04-07T05:32:11.123
> 
> 标签：css, sass, compass-sass

我在我的项目中使用 sass，并在包含我的样式表的文件夹上使用 compass watch。它工作了一段时间，但现在每次我进行更改并将更改推送到我的仓库时；我的 app.css 不断出现合并问题。我在终端中遇到的错误是

```
git pushremote: Counting objects: 54, done.
remote: Compressing objects: 100% (9/9), done.
remote: Total 30 (delta 21), reused 30 (delta 21)
Unpacking objects: 100% (30/30), done.
From github.com: **********/*********
   a2f68c3..2537c71  master     -> origin/master
Auto-merging public/stylesheets/app.css
CONFLICT (content): Merge conflict in public/stylesheets/app.css
Auto-merging public/sass/app.sass
Automatic merge failed; fix conflicts and then commit the result. 
```

我找到了一种通过删除 app.css，然后在 sass 文件中进行随机更改来通过它的方法。这使它成为一个新的 app.css 并且一切正常，直到下一次推送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:47:36.123

不要将生成的 CSS 检入 git。在需要 CSS 的地方编译 Sass。

# java - 在 Neo4J 编程中使用 java 将结果字符串转换为 ExecutionResult

> ID：15859240
> 
> 赞同：0
> 
> 时间：2013-04-07T05:32:50.733
> 
> 标签：java, neo4j, cypher

在我的应用程序中，对于 Neo4j db，Team 使用的是独立而不是服务器。但是团队提供了一个 jsp 以查看字符串格式的结果。

在 JSP 页面中，我们有一种形式来在 textarea 中编写密码查询，并有按钮来触发对服务器的请求。向服务器发起请求后，测试结果将以字符串的形式打印在网页中。

在这里，我们需要一种机制来将网页中的打印字符串转换为 neo4j 的“ExecutionResult”对象。

有人可以提供转换的代码片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:51:06.387

您可以简单地将 JSON 请求从您的网页发送回服务器，例如

```
$(document).ready(function() {
  $("#log").append($("#query").html());
}) 
```

[http://jsfiddle.net/peterneubauer/WnPYp/](http://jsfiddle.net/peterneubauer/WnPYp/)来获取 HTML 元素并将其与 AJAX 请求一起发送到服务器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:25:47.273

没有相反的方法，您必须自己编写解析器。

但是您可以让客户端不仅有一个文本结果，而且同时有一个更丰富的 JSON 结果和/或将该 json 发布到您的站点的链接。

有关一些想法，请查看[http://console.neo4j.org](http://console.neo4j.org)的代码，该代码位于[http://github.com/neo4j-contrib/rabbithole](http://github.com/neo4j-contrib/rabbithole)

它将转换`ExecutionResult`为 JSON 并将其呈现为客户端中的 jquery 数据表。并且还有一个额外的弹出窗口（查询详细信息）用于详细数据。

# html - 如何确保没有其他文本与我的标题标签在同一行？

> ID：15859243
> 
> 赞同：0
> 
> 时间：2013-04-07T05:33:04.270
> 
> 标签：html, css

我有一个 h3 标签，我不想在它和其他标签之间放置任何其他标签，但我似乎无法确保在其余文本之前有一个换行符。我怎样才能做到这一点？是否可以？我什至试过`clear: both;`。

CSS：

```
.sidebar_info
{
    width:175px;
    padding:15px 10px 15px 10px;
    border-radius: 6px;
    background:url(img/info.png) no-repeat right top #ecf8fd;
    font-size:11px;
    text-align:left;
    line-height:17px;
}

.sidebar_info h3
{
    color:#49bae8;
    float:left;
    font-size:18px;
    font-weight:400;
    margin:0;
    padding:0;
    clear: both;
} 
```

html:

```
<div class="sidebar_info"><h3>RAWR!</h3>Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit...</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:35:25.737

您使用`float: left;`的`h3`元素本质上是块级元素，因此当您向左浮动时，其余空间变空，从而导致其旁边的文本在其余可用空间中向上移动，那么为什么要浮动之后你需要休息的时候它在左边吗？

如果您需要将文本左对齐、右对齐或居中，只需使用`text-align`属性 with`left, right, or center`作为值

如果您仍然需要休息（如果您只是删除 ，在这种情况下您甚至不需要休息`float`）而不是像这样自我清除您的`h3`元素

```
.sidebar_info h3:after {
  content: "";
  display: table;
  clear: both;
} 
```

# database-design - 基于 SaaS 的在线门户架构

> ID：15859245
> 
> 赞同：3
> 
> 时间：2013-04-07T05:33:36.607
> 
> 标签：database-design, architecture, saas, portal

我们计划准备一个基于SaaS模式的产品“在线服装店”。

不同的布料供应商应注册到我们的门户网站。他们将获得网络界面来管理自己的衣服目录。

当最终用户注册系统时，他们可以看到不同供应商的不同目录。当然，他们可以对可用产品进行标准搜索、过滤、排序等。选择后，他们将订购物品。相应的供应商将获得从其目录中选择的那些项目的订单。

最后，我们需要管理面板和客户 CRM。它将为所有客户保留记录和数据。我们需要对客户进行分析。我们将记录客户对不同供应商的不同产品的反应，并根据研究行为。

它需要是非常可扩展的产品。明天就算百万厂商想加入，也应该支持。

我需要有关架构和整体设计的建议：

*   应该使用什么架构？
*   有没有参考系统可供考虑？
*   任何特定的设计模式，我们可以在实现时考虑吗？
*   对数据库设计有什么建议吗？
*   如何确保门户是可扩展的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-30T02:31:34.520

构建 SAAS 软件涉及到一些事情。

> 应该使用什么架构？

强烈推荐 SOA/微服务架构。松散耦合、集群和负载平衡。

> 有没有参考系统可供考虑？

谷歌搜索可能会给出例子。

> 任何特定的设计模式，我们可以在实现时考虑吗？

没有单一的设计模式。坚持 SOA 和高度解耦的子系统会有所帮助。考虑微服务并根据您的要求评估其优缺点。看一下 [SaaS 成熟度模型级别 4 中租户负载均衡器的解释](https://stackoverflow.com/questions/16382787/explanation-of-tenant-load-balancer-in-saas-maturity-model-level-4/16826807#16826807)

[网络应用，SAAS？](https://stackoverflow.com/questions/16121025/web-application-saas/16826885#16826885)

> 对数据库设计有什么建议吗？

有一些数据库模型可以帮助 SAAS 软件。查看[用于在云上构建企业 Web (RIA) 应用程序的数据库架构（单个数据库与客户端特定数据库）](https://stackoverflow.com/questions/15683213/databse-architecture-single-db-vs-client-specific-db-for-building-enterprise-w/15697362#15697362)

> 如何确保门户是可扩展的？

理想情况下，可以根据需要添加新实例的云部署。即使不在云上，也需要启用路由/负载平衡的类似设置，其中可以添加新实例，类似于私有云。

# android - 片段调用 AsyncTask 时获取 java.lang.NullPointerException

> ID：15859247
> 
> 赞同：0
> 
> 时间：2013-04-07T05:34:09.487
> 
> 标签：android, android-asynctask

当我在 onSelectDate 事件被触发时尝试调用 AsyncTask 时，我得到了这个运行时错误（lang.java.nullPointerException）。我花了几个小时通过谷歌搜索来解决这个错误，但我得到了一个线索，有一个对象丢失了。这是我的代码。我也希望有人能让我摆脱这个错误。谢谢。

```
public class CaldroidSampleActivity extends FragmentActivity{
@Override
    protected View onCreateView(LayoutInflater inflater) {
        setRetainInstance(true);
        View v = inflater.inflate(R.layout.activity_main,null);
        final SimpleDateFormat formatter = new SimpleDateFormat("dd MMM yyyy");

        // Setup caldroid fragment
        final CaldroidFragment caldroidFragment = new CaldroidFragment();

        // Setup arguments
        Bundle args = new Bundle();
        Calendar cal = Calendar.getInstance();
        args.putInt("month", cal.get(Calendar.MONTH) + 1);
        args.putInt("year", cal.get(Calendar.YEAR));
        caldroidFragment.setArguments(args);

        FragmentTransaction t = this.getFragmentManager().beginTransaction();
        t.replace(R.id.calendar1, caldroidFragment);
        t.commit();

        // Setup listener
        final CaldroidListener listener = new CaldroidListener() {

            @Override
            public void onSelectDate(Date date, View view) {
                **callGetSelectedDateDetail(this,date);**
                Toast.makeText(context, formatter.format(date),
                        Toast.LENGTH_LONG).show();

            }

            @Override
            public void onChangeMonth(int month, int year) {
                String text = "month: " + month + " year: " + year;
                Toast.makeText(context, text, Toast.LENGTH_LONG)
                        .show();

            }

        };
        caldroidFragment.setCaldroidListener(listener);
        return v;
    }
    **protected void callGetSelectedDateDetail(CaldroidListener caldroidListener,
            Date d)** {
        executeGetSelectedDateDetail(context, d);
        // TODO Auto-generated method stub

   }
    public void executeGetSelectedDateDetail(Context c, Date d)
    {
        if(c!=null){
        new getSelectedDateDetail(c, d).execute();
        }
    }
}

public class getSelectedDateDetail extends AsyncTask<Void, Void, Void> {
@Override
    protected void onPreExecute() {
        if(context!=null){
            Log.i("onPreExecute","onPreExecute");
        }
        // TODO Auto-generated method stub
        super.onPreExecute();
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        Log.i("doInBackground","ok");
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        if(context!=null){
            Log.i("onPostExecute","onPostExecute");
        }
    }
} 
```

这是我在运行时遇到的错误...

```
04-07 04:53:24.790: E/AndroidRuntime(2247): FATAL EXCEPTION: main
04-07 04:53:24.790: E/AndroidRuntime(2247): java.lang.NullPointerException
04-07 04:53:24.790: E/AndroidRuntime(2247):     at android.view.LayoutInflater.from(LayoutInflater.java:210)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at com.bc.ema.base.BaseAdapter.<init>(BaseAdapter.java:72)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at com.bc.ema.async.getSelectedDateDetail.<init>(getSelectedDateDetail.java:32)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at com.bc.ema.view.Fragment_MySchedule.executeGetSelectedDateDetail(Fragment_MySchedule.java:124)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at com.bc.ema.view.Fragment_MySchedule.callGetSelectedDateDetail(Fragment_MySchedule.java:117)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at com.bc.ema.view.Fragment_MySchedule$1.onSelectDate(Fragment_MySchedule.java:94)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at com.caldroid.CaldroidFragment$1.onItemClick(CaldroidFragment.java:410)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at android.os.Handler.handleCallback(Handler.java:725)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at android.os.Looper.loop(Looper.java:137)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at java.lang.reflect.Method.invokeNative(Native Method)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at java.lang.reflect.Method.invoke(Method.java:511)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-07 04:53:24.790: E/AndroidRuntime(2247):     at dalvik.system.NativeStart.main(Native Method) 
```

# python - 为什么我会收到 ImportError：没有名为“PIL”的模块？

> ID：15859251
> 
> 赞同：0
> 
> 时间：2013-04-07T05:35:10.107
> 
> 标签：python, image, import

```
import sys
from PIL import Image

 ........
MY_IMAGE = Image.open(sys.argv[1]).convert('1') 
```

我应该先指定目录吗？我也试过：

```
 import Image
  img = Image.open("/directory/image.jpg")
  img.load() 
```

它没有帮助，我仍然得到 ImportError: No module named 'PIL'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:53:26.927

试试这个链接：[http](http://www.youtube.com/watch?v=ssQAFIQ4oBU) ://www.youtube.com/watch?v= ssQAFIQ4oBU 你需要先安装 PIL

# javascript - 发送数组到控制器

> ID：15859254
> 
> 赞同：1
> 
> 时间：2013-04-07T05:35:24.467
> 
> 标签：javascript, asp.net-mvc

如何将数组发送到控制器？我试过这样：

```
window.location.href = "/SomeController/SomeMethod?fields=" + SomeArray; 
```

所以：

```
window.location.href = "/SomeController/SomeMethod?fields[][]=" + SomeArray; 
```

在控制器中我收到：

```
public ActionResult SomeMethod(int[][] fields) // here fields = null;
{
// Some code
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:51:45.200

使用 jQuery [ajax 方法](http://api.jquery.com/jQuery.ajax/)。

将js对象SomeArray转换为Json，在ajax方法的data属性中传回控制器。下面我使用现代浏览器支持的 JSON.stringify，但您可以包含脚本[json2](http://www.json.org/js.html)以支持旧浏览器。

```
 $.ajax({
                    url: '/SomeController/SomeMethod',
                    type: 'POST',
                    data: JSON.stringify(SomeArray),
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    success: function (result) {
                        alert("Success");
                    },
                    error: function (xhr) {
                        alert(xhr.statusText + " Internal server error")
                    }
                }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:57:53.923

如果您使用的是 jQuery，请尝试`jQuery.param`

```
var  data ={

    fields :[
        [
            'car',
            'bike'
        ]
    ]
};

window.location.href = 'SomeController/SomeMethod?'
                       + decodeURIComponent( $.param(data) ); 
```

# sql - 查询查找帖子没有自定义字段

> ID：15859257
> 
> 赞同：0
> 
> 时间：2013-04-07T05:35:42.397
> 
> 标签：sql, wordpress

我编写此查询以查找具有自定义字段“语言”且其值为“英语”的帖子或帖子根本没有自定义字段“语言”。

```
SELECT DISTINCT wp_posts.* FROM wp_posts, wp_postmeta 
WHERE wp_posts.ID = wp_postmeta.post_id  
AND (wp_postmeta.meta_key = 'language' AND wp_postmeta.meta_value like '%English%' OR NOT EXISTS (SELECT * FROM wp_posts, wp_postmeta Where wp_postmeta.meta_key = 'language' )) 
```

但是，它只返回具有自定义字段“语言”且其值为“英语”的帖子

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:56:32.240

在 where 条件下，你应该小心括号 -

尝试以下查询 -

```
SELECT DISTINCT wp_posts.* FROM wp_posts , wp_postmeta 
WHERE wp_posts.ID = wp_postmeta.post_id  
AND ((wp_postmeta.meta_key = 'language' AND wp_postmeta.meta_value like '%English%' ) OR NOT EXISTS (SELECT * FROM wp_posts, wp_postmeta Where wp_postmeta.meta_key = 'language' )) 
```

还有一件事，您需要对存在子查询中的 ID 的一个条件，如下所示 -

```
SELECT DISTINCT wp_posts.* FROM wp_posts , wp_postmeta 
    WHERE wp_posts.ID = wp_postmeta.post_id  
    AND ((wp_postmeta.meta_key = 'language' AND wp_postmeta.meta_value like '%English%' ) OR NOT EXISTS (SELECT 1 FROM wp_postmeta wp_postmeta1 Where wp_postmeta1.meta_key = 'language' and wp_postmeta1.post_id = wp_postmeta.post_id )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:16:27.077

试试这个，

```
SELECT DISTINCT wp_posts.* FROM wp_posts, wp_postmeta 
WHERE wp_posts.ID = wp_postmeta.post_id  
AND (wp_postmeta.meta_key = 'language' AND 
     wp_postmeta.meta_value like '%English%')
OR (wp_postmeta.meta_key != 'language');  --Not sure if you want (!= language) or null. Change as required. 
```

# php - 单击按钮运行 PHP 并隐藏下载链接

> ID：15859258
> 
> 赞同：0
> 
> 时间：2013-04-07T05:35:42.747
> 
> 标签：php

使用此代码，我想将其转换为当用户单击按钮时，它首先验证他们是否要下载文件，如果单击是，则从 $userpoints 中减去 100 分（然后更新 mysql 表，但我知道如何做到这一点），我需要帮助的是让代码在有人单击按钮时运行。此外，我想给他们下载，而不让他们获得可以重复使用的 url。要么不向他们显示 url，要么使其成为唯一的一次性代码。

```
<?php                       
                    //If submit form was clicked
                    if(isset($_POST['submit'])) {
                        //Server side validation for security purposes
                        if($userpoints >= 100) {
                            mysqli_query($con,"UPDATE users SET points = points - 100 WHERE users.user_name = '$username' LIMIT 1");
                            $filename = 'ibelongwithyou.mp3';
                            $filepath = '/home4/saintfiv/downloads/';
                            header("Content-Length: ".filesize($filepath.$filename));
                            header("Content-Disposition: attachment; filename=I Belong With You.mp3");
                            readfile($filepath.$filename);
                        }else {
                            header("Location: index.php?error=1");
                        }
                    }
                    ?>
                    <form method="post" action="index.php">
                    <?php
                        if ($userpoints >= 100) {
                            echo '<input type="submit" name="submit" value="100pts">';
                        } else {
                            echo '<input type="submit" name="submit" value="100pts" disabled title="You need at least 100 points for this download">';
                        }
                        if(isset($_GET['error']) && $_GET['error'] == 1) {
                            echo "Error, you must have atleast 100points";
                        }
                    ?>
                    </form> 
```

使用此更新的代码，刷新后似乎仍在注册单击提交。还有一些奇怪的事情发生在一堆随机字符上，这些字符一直在页面上向下移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:25:34.463

我没有包含 Javascript/jQuery 来验证按钮单击，这完全取决于您是否包含**客户端**验证。此外，您必须像我所做的那样为将来的 sql 语句存储用户的**user_id**或**用户名**，我假设您正在使用**$_SESSION['user_id']**来查找真实用户。

```
<?php
session_start();

function getPoints() {
    //you must store the user_id atleast for a session or even the username on how you db really done
    //find the data where the USER_ID is the same as $_SESSION['user_id']
    //then we need to get the 'points' field to pass into a variable $userpoints
    $result = mysqli_query($con,"SELECT * FROM users WHERE user_id = ".$_SESSION['user_id']);
    $row = mysqli_fetch_array($result);
    return $row['points'];
}
//If submit form was clicked
if(isset($_POST['submit'])) {
    //Server side validation for security purposes
    if(getPoints() >= 100) {
        mysqli_query($con,"UPDATE users SET points = points - 100 WHERE users.user_name = '$username' LIMIT 1");
    }else {
        header("Location: index.php?error=1");
    }
}
?>
<html>
    <head>
        <title>Sample Point Downloading</title>
        <script><!-- Javascript here for Validation --></script>
    </head>
    <form method="post" action="index.php">
        <?php
        if (getPoints() >= 100) {
            echo '<input type="submit" name="submit" value="100pts">';
        } else {
            echo '<input type="submit" name="submit" value="100pts" disabled title="You need at least 100 points for this download">';  
        }
        if(isset($_GET['error']) && $_GET['error'] == 1) {
            echo "Error, you must have atleast 100points";
        }
        ?>
    </form>
</html> 
```

# amazon-web-services - 使用命令行 API 终止 EC2 实例

> ID：15859261
> 
> 赞同：1
> 
> 时间：2013-04-07T05:36:09.137
> 
> 标签：amazon-web-services, amazon-ec2, ec2-ami, ec2-api-tools

我有 AWS EC2 实例，我正在通过 putty 使用它。

我还下载了 EC2 命令行 API 到该 ec2 实例。

现在我想使用 EC2 命令行 API 在同一个 EC2 实例中终止 EC2 实例。

如何终止 EC2 实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:43:03.867

我认为您正在寻找`ec2-terminate-instances`ec2-api-tools 的命令部分，请查看[此处](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-TerminateInstances.html)

```
PROMPT> ec2-terminate-instances <intance_id> 
```

此处问题的答案[如何从命令行终止我的所有 EC2 实例？](https://stackoverflow.com/questions/638352/how-can-i-kill-all-my-ec2-instances-from-the-command-line)也可以帮助你

# python - 重新渲染 django-tables2 列标题

> ID：15859262
> 
> 赞同：2
> 
> 时间：2013-04-07T05:36:18.797
> 
> 标签：python, django, django-tables2

我已经构建了一个使用 django-tables2 来呈现表格数据的网站。我遇到了一个我无法解决的问题。

在某些表中，我`verbose_name`使用从数据库中提取的值构造一列：

```
setting = Setting.objects.get(site=Site.objects.get_current())
vol_unit = setting.volume_unit
base_vol_unit = Unit.objects.get(id=settings.BASE_VOLUME_UNIT)
total_vol = tables.Column(
    verbose_name="Total Volume (" + vol_unit.symbol + ")") 
```

这很好用，直到用户更改他们的默认音量单位设置。在下一次服务器重新启动之前，它不会反映在表中。

我想我可以在表格的方法中插入一些东西`__init__`，但我无法弄清楚。

有任何想法吗？

非常感谢

弥敦道

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T21:39:27.063

答案有点晚，但迟到总比没有好:)

这有点棘手，但是当你明白这一点时它并不难 - 你实际上不需要从 django-tables2 更改或继承*任何东西*，python 为你提供了你需要的所有工具 :)

因此，问题在于，如果您将字符串作为详细名称传递，则仅对其进行一次评估以找出其值，然后它只是一个静态字符串。你真正需要做的是传递一些可以作为字符串的东西，但每次都会重新评估它的值。

好吧，这只是一个具有`__unicode__`方法的普通类，例如：

```
导入日期时间
Foo类：
    def __unicode__(self):
        返回 unicode(datetime.datetime.now())

```

然后你可以在你的桌子上做类似的事情：

```
MyTable 类（tables.Table）：
    koko = tables.Column(verbose_name=unicode(datetime.datetime.now()) )
    koko2 = tables.Column(verbose_name=Foo())

```

koko 列的标题将始终具有相同的值，但 koko2 的标题会在您每次刷新页面时更改！

蟒蛇FTW！

# jquery - 使用 JQuery 在 HTML 表格中追加一个单元格

> ID：15859266
> 
> 赞同：1
> 
> 时间：2013-04-07T05:37:30.757
> 
> 标签：jquery, html, html-table, append, cell

我的网页中有一个表格，只有以下代码：

```
<table id = "grid" >
</table> 
```

另外，此按钮在一行中添加三列（元素是：文本区域、可放置区域和按钮）。

```
<button class = "plus"> + </button> 
```

单击按钮时运行此函数：

```
$( ".plus" ).button().click(function() {
   $('<tr></tr>').appendTo("#grid");
   $('<td><textarea/></td>').appendTo("#grid tr:last"); 
   $('<td id = "regla"></td>').droppable( drpOptions ).appendTo("#grid tr:last");
   $('<td><button class = "addRow"> + </button></td>').appendTo("#grid tr:last");
}); 
```

这运行顺利，到目前为止一切都很好。我无法做到的是，当单击我要附加的按钮 (class="addRow") 时，该按钮被删除，并且同一组的三个项目（文本区域、可放置和按钮）被附加到该行. 我希望附加的这个新按钮做同样的事情。

我认为代码将如下所示：

```
$(".addRow").button().click(function(){
  var myColumn = $(this).closest("td").prevAll("td").length;
  var myRow = $(this).closest("tr").prevAll("tr").length;
  $("#grid").rows[myRow].cells[myColumn].append('<td><textarea/></td>');
}); 
```

或像这样：

```
$(this).parents("table").find("tr:eq("+myRow+")")(function(){
 $(this).find("td:eq("+myColumn+")").append('<td><textarea/></td>');
}); 
```

你能帮我把它做对还是用正确的方法做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:10:08.930

由于您的新按钮`#addrow`是动态创建的，因此 directe 事件绑定在这里不起作用，您需要将事件委托给现有的事件，例如 table `#grid`。`var addBtn = $(".addRow").button();`您需要在带有处理程序的事件委托中创建并使用此 var `.on()`：

```
var addBtn = $(".addRow").button();

$("#grid").on('click', addBtn, function(){
   var myColumn = $(this).closest("td").prevAll("td").length;
   var myRow = $(this).closest("tr").prevAll("tr").length;
   $("#grid").rows[myRow].cells[myColumn].append('<td><textarea/></td>');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T16:51:34.390

我只是偶然发现自己尝试这样做并最终得到了与此等效的结果：

```
$( ".plus" ).button().click(function() {
   addRow();
});

function addRow() {
   var newRow = $('<tr></tr>').appendTo($('#grid'));
   addRowContents(newRow);
}

function addRowAfter(target) {
  var newRow = $('<tr></tr>');
  addRowContents(newRow);
  target.after(newRow);
}

function addRowContents(row) {
 $('<td><textarea/></td>').appendTo(row); 
   $('<td id = "regla"></td>').droppable( drpOptions ).appendTo(row);
  var buttonCell = $('<td></td>').appendTo(row);
  $('<button></button>').addClass('addRow').text('+').click(function(){
    addRowAfter($(this).closest('tr'));
    $(this).hide();
  }).appendTo(buttonCell); 
} 
```

我相信这就是您所追求的，加号按钮在表格末尾添加一个新行，每行上的按钮在该行之后直接添加一个新行，然后隐藏该按钮。如果您将该代码粘贴到您的小提琴中，它应该可以工作。

有点晚了，但我想我会发布以防万一它有帮助:)

# angularjs - Angularjs $scope 没有更新

> ID：15859269
> 
> 赞同：0
> 
> 时间：2013-04-07T05:38:20.137
> 
> 标签：angularjs

在我的应用程序中，我正在从一个控制器更新 $scope.needs。然后当我单击一个按钮时，它将转到另一个控制器。我得到了 $scope.needs 的更新值。但是当点击后退按钮时，它会转到前一个控制器。我没有得到 $scope.needs 的更新值。如何解决这个问题。

这是第一个控制器。

```
function CommitmentCtrl($scope, $routeParams, $http, UIData, cust, productList) {
  $scope.needs = $scope.customer.priorities.list;
} 
```

在这个控制器中

```
$scope.increment = function(index) {
    $scope.needs[index].commitment = parseFloat   ($('#custom_commitment_'+index).val()) + 1000;

    } 
```

这里 $scope.needs 更新了..rite? 然后当点击按钮时，调用下面的函数

```
$scope.gotoSummary = function(){
  $scope.customer.priorities.list = $scope.needs;
} 
```

这里 $scope.customer.priorities.list 包含更新的值。

这是下一个控制器

```
function SummaryCtrl($scope, $routeParams, $http, UIData, cust) {
  $scope.$parent.needs = $scope.customer.priorities.list;
} 
```

然后单击后退按钮调用第一个控制器，但在 $scope 中，更新的值不存在。

**如何在这两个地方更新 $scope.needs？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:56:28.697

有两种方法可以实现这一点 1）使用 $rootScope 2）使用 Angular 服务

1）使用 $rootScope

```
<html ng-app="jsf">
<head>
    <title></title>

    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js"></script>
</head>
<body>
    <div ng-controller="CategoriesCtrl">
        <input type="button" value="update" ng-click="update()" />
    </div>
      <div ng-controller="secondCtrl">
        <input type="button" value="check" ng-click="check()" />
    </div>
    <script>
        var app = angular.module('jsf', []);

        app.controller('CategoriesCtrl', function ($scope, $rootScope) {
            $rootScope.block = [3, 2, 1, 0];
            $scope.update = function () {
                alert("123");
                $rootScope.block[1] = '5';
            }
        });

        app.controller('secondCtrl', function ($scope, $rootScope) {
            $scope.check = function () {
                alert($rootScope.block[1]);
            }
        });
    </script>
</body>
</html> 
```

2）您必须创建一个角度服务并维护服务内部的价值并在控制器之间共享价值

# java - 将 .XML 转换为 HashMap

> ID：15859272
> 
> 赞同：-1
> 
> 时间：2013-04-07T05:38:27.750
> 
> 标签：java, xml, hashmap

我有这样的 .xml 文件。我想将此文件转换为 HashMap 并在 Java 中反转。您能告诉我如何将其转换为 HashMap 文件吗？谢谢 ...

## 这是 .xml 文件：

```
<RelationShipTypes>
        <RelationShipType key="1" name="Organization Unit"/>
        <RelationShipType key="2" name="Employee"/>
        <RelationShipType key="3" name="Customer"/>
        <RelationShipType key="4" name="Supplier"/>
        <RelationShipType key="5" name="Agency"/>
        <RelationShipType key="6" name="Partner"/>
        <RelationShipType key="7" name="SALES AGENT"/>
        <RelationShipType key="8" name="End User"/>
        <RelationShipType key="9" name="Other"/>
    </RelationShipTypes> 
```

## 这是代码：

```
 public static Map<String, String> convertNodesFromXml(String xml) throws SAXException, IOException, ParserConfigurationException {
        try {
            InputStream is = new ByteArrayInputStream(xml.getBytes());
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setNamespaceAware(true);

            DocumentBuilder db = dbf.newDocumentBuilder();
            Document document = db.parse(is);
            return createMap(document.getDocumentElement());
        } catch (SAXException ex) {
            Logger.getLogger(BaseDataLoader.class.getName()).log(Level.SEVERE, null, ex);
            throw ex;
        } catch (IOException ex) {
            Logger.getLogger(BaseDataLoader.class.getName()).log(Level.SEVERE, null, ex);
            throw ex;
        } catch (ParserConfigurationException ex) {
            Logger.getLogger(BaseDataLoader.class.getName()).log(Level.SEVERE, null, ex);
            throw ex;
        }
    }

    public static Map<String, String> createMap(Node node) {
        Map<String, String> map = new HashMap<String, String>();
        NodeList nodeList = node.getChildNodes();
        for (int i = 0; i < nodeList.getLength(); i++) {
            Node currentNode = nodeList.item(i);
            if (currentNode.hasAttributes()) {
                for (int j = 0; j < currentNode.getAttributes().getLength(); j++) {
                    Node item = currentNode.getAttributes().item(i);
                    map.put(item.getNodeName(), item.getTextContent());
                }
            }
            if (node.getFirstChild() != null && node.getFirstChild().getNodeType() == Node.ELEMENT_NODE) {
                map.putAll(createMap(currentNode));
            } else if (node.getFirstChild().getNodeType() == Node.TEXT_NODE) {
                map.put(node.getLocalName(), node.getTextContent());
            }
        }
        return map;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:45:48.060

您需要先**解析 XML**。尝试使用**DOM 解析器**。谷歌它你会得到示例代码。然后您可以填充**HashMap**中的值。这是[示例代码。](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

# jquery - 单击其他div时切换类中的单个元素Jquery

> ID：15859276
> 
> 赞同：3
> 
> 时间：2013-04-07T05:38:43.660
> 
> 标签：jquery, css

我正在尝试为 wordpress 构建设置一个简单的评论切换。

**CSS**

```
<div class="commenttoggle">
    <p class="popcom">Show Comments</p>
                                     ~~~Clickable Button~~~~~~
</div>
<div id="comments" class="comments-area">
                                     ~~~~PHP code calling WP comments~~~
</div> 
```

**jQuery**

```
 jQuery(document).ready(function($) {
       $('.comments-area').hide();

           $('.commenttoggle').click(function() {
             $('.comments-area').toggle();
           });
       }); 
```

上面的代码有效，但是当我单击一篇帖子下的显示评论按钮时，所有评论部分都会显示。我一直在查看 jQuery api & here at stackoverflow 但似乎找不到任何关于仅切换最接近点击事件的元素的建议。

我试过 .closest & .parent 但我似乎无法让它工作。我真的很感激一些代码，但也有一个解释，因为我刚开始使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:41:17.663

`popcom`您需要使用[each](http://api.jquery.com/jQuery.each/)迭代具有相同类的元素并应用`$(this)`以定位单击的元素

```
$('.popcom').each(function() {
    $(this).click(function() {
        // Your script here              
    });
}) 
```

注意：`.popcom`是你的节目评论按钮的类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T06:02:11.457

这应该做你想要的：

```
jQuery(document).ready(function($) {
    $('.comments-area').hide();
    $('.commenttoggle p').click(function() {
        $(this).closest("div").next('.comments-area').toggle();
    });
}); 
```

# mysql - 列出 10 个 mysql 中最多评论的新闻

> ID：15859278
> 
> 赞同：0
> 
> 时间：2013-04-07T05:38:54.317
> 
> 标签：mysql, sql, select

我有两个表新闻和评论：

**新闻**：newsId、newsTitle、newsDate、newsReadCount

**评论**: ID, newsID, comment, ndate

我根据两个日期之间的值 newsReadCount 选择了 10 行具有最大读取的行：

```
SELECT * FROM news WHERE DATE(newsDate) BETWEEN '20120414' AND '20130414' ORDER BY newsReadCount DESC LIMIT 0, 10 
```

在这里，我想选择 10 个带有 newsTitle 的新闻，从两个日期之间的新闻表中的总评论数根据评论表的关系 newsID 具有最大评论数。我如何在mysql中查询这个？我需要加入吗。请帮助我，我是 mysql 新手。

评论表的newsID是新闻表的新闻ID主键的值。

**编辑：**

选择两个日期之间的新闻，结果如下

**结果：**

```
| newsTitle  | Total Comments |     
-------------------------------    
| onenews    |  25            |    
| another    |  30            | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:27:35.880

你需要`join`, a `group by`, an`order by`和 a `limit`：

```
SELECT
    news.newsTitle, COUNT(comments.ID) AS `Total Comments`
FROM news INNER JOIN comments ON
    news.newsId = comments.newsID AND news.newsDate BETWEEN '20120414' AND '20130414'
GROUP BY news.newsId
ORDER BY `Total Comments` DESC
LIMIT 10; 
```

请看[sql fiddle](http://sqlfiddle.com/#!2/cfb25/14/0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:31:22.077

我认为你可以使用

```
SELECT n.newsTitle, count(c.ID) as totalCount
FROM   News n LEFT JOIN Comments c ON n.newsId = c.newsID
WHERE  DATE(n.newsDate) BETWEEN '20120414' AND '20130414'
GROUP BY n.newsTitle
ORDER BY totalCount DESC
LIMIT   10 
```

# android - Android：BroadcastListner 出现错误

> ID：15859280
> 
> 赞同：3
> 
> 时间：2013-04-07T05:39:27.600
> 
> 标签：android, android-networking, android-broadcast

在我的应用程序中，我不断检查互联网连接。如果在任何时候都没有互联网，用户会收到一条 toast 消息。

为此，我正在制作一个`NetworkStateReceiver`扩展类的`BroadcastReceiver`类。

Java 文件：

```
public class NetworkStateReceiver extends BroadcastReceiver {

    public void onReceive(Context context, Intent intent) {
        super.onReceive(context, intent); // Here I'm getting the error mentioned below
        Log.d("app", "Network connectivity change");
        if (intent.getExtras() != null) {
            NetworkInfo ni = (NetworkInfo) intent.getExtras().get(
                    ConnectivityManager.EXTRA_NETWORK_INFO);
            if (ni != null && ni.getState() == NetworkInfo.State.CONNECTED) {
                Log.i("app", "Network " + ni.getTypeName() + " connected");
            }
        }
        if (intent.getExtras().getBoolean(
                ConnectivityManager.EXTRA_NO_CONNECTIVITY, Boolean.FALSE)) {
            Log.d("app", "There's no network connectivity");
        }
    }
} 
```

错误：

> 无法直接调用 BroadcastReceiver 类型的抽象方法 onReceive(Context, Intent)

这是我在应用程序内的 Android 清单文件中放入的内容：

```
<application>    
    ....
    <receiver android:name=".NetworkStateReceiver" >
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        </intent-filter>
    </receiver>
    ....
</application> 
```

这是我使用的权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" 
```

为什么我会收到此错误`super.onReceive(context, intent);`，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T05:47:23.487

删除线`super.onReceive(context, intent)`。无论如何，基本实现什么都不做（它是一个抽象方法）。

# jquery - 缩略图未排列

> ID：15859287
> 
> 赞同：1
> 
> 时间：2013-04-07T05:40:48.007
> 
> 标签：jquery, html, css, youtube-api

我正在尝试将 youtube api 提要粘贴到此页面上，但缩略图没有正确排列。工作地点可以在[这里](http://netx.clanteam.com/vs/video.html)找到。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Inner page</title>
<link rel="stylesheet" type="text/css" href="css/style.css"/>
</head>
<body>
<div id="main_block">
 <div id="innerblock">

                 <!--Top Panel starts here -->

        <div id="top_panel">

                <a href="index.html" class="logo"><img src="images/logo.jpg" width="255" height="36" alt="" /></a><br />

            <div class="tp_navbg">
                <a href="index.html">Home</a>
                <a href="inner.html">Upload</a>
                <a href="#">Videos</a>
                <a href="#">Channels</a>
                <a href="#">News</a>
            </div>

            <div class="tp_smlgrnbg">
                <span class="tp_sign"><a href="#" class="tp_txt">Sign Up</a>
                <span class="tp_divi">|</span>
                <a href="#" class="tp_txt">Login</a>
                <span class="tp_divi">|</span>
                <a href="#" class="tp_txt">Help</a></span>
            </div>

            <div class="tp_barbg">
                <input name="#" type="text" class="tp_barip" />
                <select name="#" class="tp_drp"><option>Videos</option></select>
                <a href="#" class="tp_search"><img src="images/tp_search.jpg" width="52" height="24" alt="" /></a>
                <span class="tp_welcum">Welcome <b>Guest</b></span>

            </div>

        </div>

                <span class="lp_newvidit1">Video Title</span>

    <link rel="stylesheet" type="text/css" href="files/style6.css">
<script type="text/javascript" src="files/jquery-1.js"></script>
<script type="text/javascript" src="files/jquery.js"></script>
<script>
$(document).ready(function(){

        $("body").append("<div id = 'data'><ul>.</ul></div>");
        var dataContainer = $("#data ul");
        $.ajax({
            url:'http://gdata.youtube.com/feeds/api/users/googledevelopers/uploads?max-results=50&time=today&alt=jsonc&v=2&callback=?',
            dataType: "jsonp",
            timeout: 5000,
            success: function(data){

                     $.each(data.data.items, 
                               function(i, val) {

                                 if (typeof(val.player) !== 'undefined' && typeof(val.title) !== 'undefined') {

                                    dataContainer.append('<div class="d e"><a href='+val.player["default"]+' target="_blank" title="'+val.title+'">'+val.title+'</a><br /><img src="'+val.thumbnail.sqDefault+'" width="120" height="90" alt="'+val.title+'"/><br />Views '+val.viewCount+'</div>');
                                 }
                         });
                    }
                });
            });

</script> 
```

否则缩略图排列。像[这里](http://netx.clanteam.com/test.html) 缩略图排成一列，否则......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:52:49.510

您缺少两个结束标记`</div>`尝试在结束标记之前将它们添加到文档末尾`</body>`并更改：

```
$("body").append("<div id = 'data'><ul>.</ul></div>"); 
```

对此：

```
$("#main_block").append("<div id = 'data'><ul>.</ul></div>"); 
```

添加这个 CSS 属性：

```
#data{
  overflow: auto;
  width: 100%;
} 
```

将包括 jquery 脚本在内的脚本和样式表链接移动到 head 部分并将它们放在`<title></title>`标记之后，这将使文档在加载正文之前先加载这些脚本，这将提高性能并防止潜在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:56:39.007

尝试将这样的内容添加到您的 CSS

```
#data ul{padding-top: 240px;} 
```

此外，当我使用视图源时，您似乎缺少 2 个结束 div 标签，不确定这是否是导致错位的原因。

# c++ - C++ 任务不正确的结果

> ID：15859288
> 
> 赞同：0
> 
> 时间：2013-04-07T05:40:52.917
> 
> 标签：c++

问题如下

￼￼写一个程序，提示用户输入一个员工每小时的工资，当周工作的小时数，计算他的周薪。如果他工作超过 40 小时，他每小时的工资是原来每小时的 1.5 倍，超过 40 小时。从总工资中，6% 用于社会保障税，14% 用于所得税，10 欧元用于工会。如果员工有两个以上的孩子，他支付 35 欧元的健康保险费。计算他的周薪。

我的代码

```
#include "stdafx.h"
#include "iostream"
using namespace std;

int main()
{
    double a,b,c,kid;
    cout << "Enter his salary per hour: " << endl;
    cin >> a;
    cout << "Enter the amount of hours he worked this week: " << endl;
    cin >> b;
    cout << "How many kids does he have: " << endl;
    cin >> kid;

    if ( a > 40 ) {
        if (kid > 2) {
            b = (b-40)*1.5+40;
            c = a*b-a*b*20/100-10-35;
        }
        else {
            b = (b-40)*1.5+40;
            c = a*b-a*b*20/100-10;
        }
    }
    else {
        if (kid > 2)
            c = a*b-a*b*20/100-10-35; 
        else 
            c = a*b-a*b*20/100-10;
    }

    cout << c;
    system("pause");
    return 0;
} 
```

我制作的代码没有给我正确的结果。哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T05:44:33.993

你不应该使用一个字母的、无意义的变量名。否则你会注意到错误：

```
if ( a > 40 ) 
```

您想比较小时数，但您确实比较了薪水。

# java - 如何将 JTextArea 中的选定文本转换为字符串？

> ID：15859289
> 
> 赞同：3
> 
> 时间：2013-04-07T05:40:55.640
> 
> 标签：java, swing, listener, highlight, jtextarea

我正在开发一个带有 java swing 和 layouts 的简单文字处理器，我试图弄清楚如何使单个文本块变为粗体、斜体或不同的字体大小，而不是在我的整个文本块中一次更改文本区域。

当用户用鼠标突出显示 JTextArea 中的文本时，是否有某种方法可以初始化字符串？如果有某种 ActionListener 或 JTextArea 可以检测所有这些并轻松将任何内容保存为字符串，我会喜欢它，但我不确定这是否可能。这样的事情会很棒：

```
String selectedtext;
JTextArea type;

class TextPanel extends JPanel implements ActionListener
{
    public TextPanel()
    {
        type = new JTextArea();
        type.addActionListener(this);
        this.add(type);
    }

    public void actionPerformed(ActionEvent e)
    {
        selectedtext = e.getSelected();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:46:09.987

JTextArea 没有任何内置功能可以做到这一点，但是：

为了让某人选择文本，他们必须单击文本区域，拖动并释放单击。因此，附加一个 MouseListener 并实现 mouseReleased 方法来检查是否选择了任何文本，如果是，则将其保存为字符串：

```
public void mouseReleased(MouseEvent e) {
    if (textArea.getSelectedText() != null) { // See if they selected something 
        String s = textArea.getSelectedText();
        // Do work with String s
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T05:53:51.523

您将无法使用 a 完成此操作`JTextArea`，您将需要支持丰富文本显示的东西，例如 a`JTextPanel`并且您需要为其定义样式，将这些样式应用于特定区域。

[这](https://github.com/bbuck/DragonConsole/blob/master/com/eleet/dragonconsole/util/DocumentStyler.java)是创建样式的实用程序类的示例（链接以给出定义样式的示例）。`addNewStyle`和`changeFont`是两个最重要的参考方法。该`addNewStyle`方法显示了如何将预定义的样式添加到您可以在插入时引用的文档（如果您想使用格式粘贴，主要用于粘贴）。该`changeFont`方法显示了如何创建样式并将其应用于区域（在该方法中，该区域是从`0`到文档的末尾 - 因此是整个文档）。

您可能需要动态制作这些样式，因此您需要从该区域获取它们（如果存在）（我还没有这样做）。所有这一切都是通过一个`StyledDocument`

将带有样式的文本附加到 a`StyledDocument`的示例（纯粹是示例）是：

```
styledDocument.insertString(
                styledDocument.getLength(), textToInsert,
                styledDocument.getStyle(styleName)); 
```

自从我与`JTextPane`s 合作以来已经有一段时间了，`StyledDocuments`所以大部分内容都是从我所做工作的项目中提取的。我希望我能给你更多的信息，而不仅仅是一个起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T07:47:36.543

您可以使用[JTextComponent#setCaretPosition](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setCaretPosition%28int%29)后跟[JTextComponent#moveCaretPosition](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#moveCaretPosition%28int%29)突出显示/选择

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-29T14:34:48.803

为了检测 JTextArea 中的选择更改，最好使用 CaretListener。

```
jTextArea.addCaretListener(new CaretListener(){
   public void caretUpdate(CaretEvent ce)
   {
        int dot=ce.getDot();
        int mark=ce.getMark();

              if(dot!=mark)
              selectedText=jTextArea.getSelectedText();
              else selectedText=null;
   }
}); 
```

现在，如果您想在拖动鼠标时对所选文本进行一些操作，您可以这样做，因为 selectedText 已更新。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-07T05:48:12.053

JTextArea 没有这种能力。你应该看看 [JEditorPane](http://java.sun.com/javase/6/docs/api/javax/swing/JEditorPane.html)

它可以显示 html ，因此您可以使用粗体标签和任何您需要的东西..

# recursion - 分治算法如何处理给定的输入？

> ID：15859302
> 
> 赞同：0
> 
> 时间：2013-04-07T05:43:16.880
> 
> 标签：recursion, input, divide

我用java编写了一个分而治之的算法。问题是，我已经对其进行了测试，但我不确定它为什么或对数据做了什么。我知道它将数组拆分为子部分，但除此之外我很困惑他们返回的所有内容会发生什么。例如，最小的基本情况是否返回它的数字并进行比较？如果函数中有多个递归调用，那么递归的顺序是什么？我的代码是：

```
public static int FindMin(int[] array, int low, int high)
{
int min = 0, min1 = 0, min2 = 0;
int mid = 0;
if (low == high)
    {
    min = array[low];
    }
else if (low == (high - 1))
    {
    if (array[low] < array[high])
        {
        min = array[low];
        }
    else if (array[low] > array[high]);
        {
        min = array[high];
        }
    }
else
    {
    mid = (low + high)/2;
    min1 = FindMin(array, low, mid);
    min2 = FindMin(array, mid+1, high);
    if (min1 < min2)
        {
        min = min1;
        }
    else
        {
        min = min2;
        }
    }
return min;
} 
```

基本上我想知道的是：如果给定输入，算法将如何工作：3,6,1,5,7,2,1。就像它返回的东西和类似的东西。

如果问题有点模棱两可，我很抱歉，但我知道如何编码，我似乎无法理解它如何返回所有内容，无论我开始使用的所有谷歌页面和 pdf 文件。

无论如何感谢所有的帮助！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:15:48.477

虽然调试器很有用，但有时正确的日志文件输出类型可以提供更多洞察力。我在函数末尾添加了对以下函数的`FindMin()`调用，就在`return min;`语句之前：

```
public static void pr (int[] array, int low, int high, int min) {
    System.out.print("low = ");
    System.out.print(low);
    System.out.print(", high = ");
    System.out.print(high);
    System.out.print(", array = ");
    for (int i = low; i <= high; i++) {
        System.out.print(array[i]);
        if (i < high) {
            System.out.print(",");
        }
    }
    System.out.print(" min = ");
    System.out.print(min);
    System.out.print("\n");
} 
```

我得到的输出是：

```
low = 0, high = 1, array = 3,6 min = 6
low = 2, high = 3, array = 1,5 min = 5
low = 0, high = 3, array = 3,6,1,5 min = 5
low = 4, high = 5, array = 7,2 min = 2
low = 6, high = 6, array = 1 min = 1
low = 4, high = 6, array = 7,2,1 min = 1
low = 0, high = 6, array = 3,6,1,5,7,2,1 min = 1 
```

这告诉我，虽然`FindMin()`为这个测试用例返回了正确的答案，但它这样做有点意外。我现在正在寻找为什么...

（编辑）

一个问题是代码：

```
if (array[low] < array[high])
{
    min = array[low];
}
else if (array[low] > array[high]);  // <- stray semi-colon here
{
    min = array[high];
} 
```

...不考虑的情况`array[low] == array[high]`。第一个比较应该是`<=`或第二个应该是`>=`，否则会出现返回值`min`将是其初始化值 0 的情况，因为 will 的两个分支都不`if`适用。

（进一步编辑）

您有一个导致您的错误的杂散分号。我在上面标记的测试后的分号终止了语句。过早终止`else if`的语句之后是另一个语句，无论前面的测试如何，该语句始终设置`min`为相等。`array[high]`

将此代码更改为：

```
if (array[low] < array[high])
    {
    min = array[low];
    }
else 
    {
    min = array[high];
    } 
```

...给出以下输出：

```
low = 0, high = 1, array = 3,6 min = 3
low = 2, high = 3, array = 1,5 min = 1
low = 0, high = 3, array = 3,6,1,5 min = 1
low = 4, high = 5, array = 7,2 min = 2
low = 6, high = 6, array = 1 min = 1
low = 4, high = 6, array = 7,2,1 min = 1
low = 0, high = 6, array = 3,6,1,5,7,2,1 min = 1 
```

...您可以看到每次递归调用都会产生正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:22:35.403

好的，现在我了解了它的作用和工作原理。

这很简单。对于给定的数组，您将其进一步分为两部分。现在每个递归代码都必须在某个点停止，你的在两种情况下停止。

```
A) When the part this recursive needs to process is sized one.
B) When the part this recursive needs to process is sized two. 
```

因此，当满足条件 A 时，您的函数仅返回低，即等于高。

当满足条件 B 时，您的函数会比较`array[low]`和`array[high]`，并返回较低值的索引。

如果递归函数必须处理超过 2 的范围，则将其分成两部分，并将这两部分交给另外两个递归部分。

例如，对于这样的给定数组。

```
array[] = {1, 2, 3, 4, 5}

You will first split it to two parts of {1, 2} [0...1] and {3, 4, 5} [2...4].

    And now since the first part is of size 2, the index 0 gets returned because 1 is smaller than 2, obviously.

    And then the other part {3, 4, 5} gets divided again, to two parts, {3} [2...2], and {4, 5} [3...4].

        The first subpart of sized one, gets returned immediately, because it's of size one, return value = 2.

        And then the second part which is sized two, get compared and returned, return value = 3.

    Now these two return values (2 and 3) gets processed, comparing array[2] and array[3], array[2] is definitely smaller, so it returns 2.

Now those two return values (0 and 2) gets processed, comparing the two, we can see the minima is at index 0, of value 1. 
```

您的代码存在缺陷，在最后一部分，您应该比较`array[min1]`and`array[min2]`并返回`min1`or `min2`。

有点乱，希望大家能理解。另一件事是我的语法，{ `data`}[ `index range`]

# relationship - FileMaker：以一对多关系获取特定的相关记录

> ID：15859304
> 
> 赞同：2
> 
> 时间：2013-04-07T05:43:25.083
> 
> 标签：relationship, filemaker

假设我有两个表，A 和 B。A 有一个 ID 字段，B 有一个 ID、Value 和 Title 字段。这两个 ID 字段是相关的，因此 A 和 B 之间是一对多的关系。

我想要做的是在 A 中添加一个计算字段，以从相关 B 记录中检索特定值的标题。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:57:15.153

有几种方法可以做到这一点，具体取决于您要实现的目标：

```
A::index ---< B::indexOfA 
```

**关系排序顺序**

如果您在 A 中创建一个新的计算字段，计算 = B::Title 将使用第一条记录（按排序顺序）。

示例：B 有一个字段 B::recordDate 并且无论输入记录的顺序如何，您总是想要最新的 recordDate。您将修改 A::index ---< B::indexOfA 关系以按 recordDate 降序排序. 您的 A::titleFromB 计算字段将是：

```
B::Title 
```

**获取NthRecord**

[http://www.filemaker.com/help/html/func_ref3.33.10.html](http://www.filemaker.com/help/html/func_ref3.33.10.html)

如果您想要从关系到 B 的特定记录号，您可以使用 GetNthRecord 函数。

示例：您总是希望显示与 B 的关系的第二条记录。您的 A::titleFromB 计算字段将是：

```
GetNthRecord(B::Title ; 2) 
```

**执行SQL**

在 FileMaker 12 中，您可以使用 ExecuteSQL 计算。

示例：假设您知道要显示其标题的记录的 B::index。您的 A::titleFromB 计算字段将是：

```
ExecuteSQL("SELECT Title from B WHERE index = ?"; ¶ ; "," ; <field, variable or string with index of B> ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T05:19:34.223

您想要构建关系的方式是让每个 A 和 B 都有自己唯一的 ID 字段。然后在 B 中，有一个 id_a 字段（或类似的字段），您可以在其中建立您的关系。

从那里我回应 pft221 所说的关于 ExecuteSQL 的内容。这对我来说是一个很棒的功能。它会是这样的：

`ExecuteSQL ( "SELECT Title FROM B WHERE id_a =? and title = ?"; ""; ""; <id_a value>; <title value> )`

您也可以进行内部连接，但这似乎比它的价值更麻烦。

# mysql - mysql：查找具有多个标签和相同ID的行

> ID：15859309
> 
> 赞同：4
> 
> 时间：2013-04-07T05:44:33.683
> 
> 标签：mysql, sql, select, join

在对两个表进行 JOIN 时，我在计算 mysql 以查找具有两个特定“标签”和相同“hashid”的链接时遇到问题

假设我的表格如下所示：

**链接**

```
md5     url         title   numberofsaves
-----------------------------------------
a0a0    google.com  foo     200
b1b1    yahoo.com   yahoo   100 
```

**标签**

```
 md5    tag
 ---------------
 a0a0   awesome
 a0a0   useful
 a0a0   cool
 b1b1   useful
 b1b1   boring 
```

我想返回具有“有用”和“真棒”标签的行

通过 1 个标签查找链接的当前（工作/快速）查询：

```
SELECT links.title, links.numsaves FROM links LEFT JOIN tags ON links.md5=tags.md5 WHERE tags.tag = 'useful' ORDER BY links.numberofsaves DESC LIMIT 20 
```

阅读一篇[文章](http://gtowey.blogspot.com/2009/12/how-to-fix-comma-separated-list-of-doom.html)后，我尝试使用以下内容：

```
SELECT links.title, links.numsaves FROM links LEFT JOIN tags ON links.md5=tags.md5 GROUP BY tags.md5 HAVING SUM(tags.tag='useful') AND SUM(tags.tag='awesome') ORDER BY links.numberofsaves DESC LIMIT 20 
```

这*确实*有效，但速度慢得令人难以置信，以至于无法使用。

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T05:46:13.907

问题的类型称为`Relational Division`

```
SELECT  a.md5, 
        a.url,
        a.title
FROM    Links a
        INNER JOIN Tags b
            ON a.md5 = b.md5
WHERE   b.Tag IN ('awesome', 'useful') -- <<== list of desired tags
GROUP   BY a.md5, a.url, a.title
HAVING  COUNT(*) = 2                   -- <<== number of tags defined 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5865b/1)
*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

输出

```
╔══════╦════════════╦═══════╗
║ MD5  ║    URL     ║ TITLE ║
╠══════╬════════════╬═══════╣
║ a0a0 ║ google.com ║ foo   ║
╚══════╩════════════╩═══════╝ 
```

# twitter-bootstrap - 如何覆盖 fosuserbundle 注册表单样式

> ID：15859315
> 
> 赞同：2
> 
> 时间：2013-04-07T05:45:26.677
> 
> 标签：twitter-bootstrap, fosuserbundle, symfony-2.2

我想在 fosuserbundle 注册表单中使用引导程序样式。并且登录不能覆盖，但是由于注册表单使用“{{ form_widget(form) }}”，所以我不能覆盖它，我使用 symfony2.2，我也测试使用表单主题，像这样

```
{% block form_row %}
{% spaceless %}
<div class="control-group">
    {{ form_label(form, label|default(null),{ 'attr': {'class': 'control-label'} }) }}
    {{ form_errors(form) }}
    <div class="controls">{{ form_widget(form) }}</div>
</div>
{% endspaceless %}
{% endblock form_row %} 
```

和

在表单模板中，代码是

```
{% form_theme form with '@user/form/fields.html' %}
{% trans_default_domain 'FOSUserBundle' %}
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" class="fos_user_registration_register form-horizontal form-box">
    {{ form_widget(form) }}
    <div>
        <input type="submit" value="{{ 'registration.submit'|trans }}" />
    </div>
</form> 
```

但它输出这个

```
 |form action="/register/"  method="POST" class="fos_user_registration_register form-horizontal form-box"|
        |div id="fos_user_registration_form"|
            |div class="control-group"|
                |label for="fos_user_registration_form_username" class="required"|用户名：|/label|
                |div class="controls"|
                    |input type="text" id="fos_user_registration_form_username" name="fos_user_registration_form[username]" required="required" /|    
                |/div|
            |/div|
            |div class="control-group"|
                |label for="fos_user_registration_form_email" class="required"|电子邮箱：|/label|
                |div class="controls"|
                    |input type="email" id="fos_user_registration_form_email" name="fos_user_registration_form[email]" required="required" /|    
                |/div|
            |/div|
            |div class="control-group"|
                |label for="fos_user_registration_form_plainPassword_first" class="required"|密码：|/label|
                |div class="controls"|
                    |input type="password" id="fos_user_registration_form_plainPassword_first" name="fos_user_registration_form[plainPassword][first]" required="required" /|    
                |/div|
            |/div|
            |div class="control-group"|
                |label for="fos_user_registration_form_plainPassword_second" class="required"|确认密码：|/label|
                |div class="controls"|
                    |input type="password" id="fos_user_registration_form_plainPassword_second" name="fos_user_registration_form[plainPassword][second]" required="required" /|    
                |/div|
            |/div|
            |input type="hidden" id="fos_user_registration_form__token" name="fos_user_registration_form[_token]" value="622a4c73bfc48b4944c5b97ff4fc46c7fa8e9e91" /|    
        |/div|
        |div|
            |input type="submit" value="注册" /|    
        |/div|
    |/form| 
```

这不是我想要的，所以我能为它做些什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T13:11:06.243

试试看：

[https://symfony.com/doc/master/bundles/FOSUserBundle/overriding_forms.html](https://symfony.com/doc/master/bundles/FOSUserBundle/overriding_forms.html) FOS 用户捆绑将文档移至 symfony.com 文档。

编辑：更新链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-18T12:59:49.150

您可以渲染表单的每个部分而不是 form_widget(form)

像

```
{% form_theme form with '@user/form/fields.html' %}

{{ form_errors(form) }}

{{ form_label(form.username) }}
{{ form_widget(form.username) }}
{{ form_errors(form.username) }}

{{ form_label(form.email) }}
{{ form_widget(form.email) }}
{{ form_errors(form.email) }}

{{ form_label(form.plainPassword.first) }}
{{ form_widget(form.plainPassword.first) }}
{{ form_errors(form.plainPassword.first) }}

{{ form_label(form.plainPassword.second) }}
{{ form_widget(form.plainPassword.second) }}

{{ form_rest(form) }} 
```

更多信息在这里：

[https://github.com/FriendsOfSymfony/FOSUserBundle/issues/1077](https://github.com/FriendsOfSymfony/FOSUserBundle/issues/1077)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-13T13:31:19.077

你可以做 ：

```
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST">
<div class="form-group" id="fos_user_registration_form">
    {{ form_widget(form.email, { 'attr': {'class': 'form-control', 'placeholder': 'form.email'|trans } }) }}
    {{ form_errors(form.email) }}

    {{ form_widget(form.username, { 'attr': {'class': 'form-control', 'placeholder': 'form.username'|trans } }) }}
    {{ form_errors(form.username) }}

    {{ form_widget(form.plainPassword.first, { 'attr': {'class': 'form-control', 'placeholder': 'form.password'|trans } }) }}
    {{ form_errors(form.plainPassword.first) }}

    {{ form_widget(form.plainPassword.second, { 'attr': {'class': 'form-control', 'placeholder': 'form.password_confirmation'|trans } }) }}
    {{ form_errors(form.plainPassword.second) }}

    {{ form_rest(form) }}

</div>
<div>
    <input class="btn btn-lg btn-primary btn-block" type="submit" value="{{ 'registration.submit'|trans }}">
</div> 
```

# javascript - 如何使用 JSLint 仅扫描 eval 错误？

> ID：15859317
> 
> 赞同：2
> 
> 时间：2013-04-07T05:45:41.437
> 
> 标签：javascript, jslint

我只想使用 JSLint 扫描我的 Javascript 代码以查找 eval 错误。我想容忍所有其他错误。我知道我需要将所有其他错误类型分别设置为“true”，但有很多选项。有没有更短的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:57:58.280

Notepad++（可能在许多其他文本编辑器中）可以让你快速打开大量文件，并且有一个`search in all open files`功能。这可能会满足您的需求。

至于 JSLint，上次我检查它是一个宗教工具，它在提供帮助之前先强制执行样式，它有一些配置选项，但如果你想挑选特性，它就不起作用。如果你想考虑尝试[JSHint](http://www.jshint.com/)。

# javascript - 可编辑的 URL 弹出窗口

> ID：15859320
> 
> 赞同：2
> 
> 时间：2013-04-07T05:45:52.390
> 
> 标签：javascript, html, popup

您如何为用户打开一个允许用户仍然编辑地址栏的表格弹出窗口？

**目标：**我们正在尝试创建小型表格弹出窗口，以便用户可以在工作时将它们拖到当前应用程序的顶部。但他们有时需要能够稍微改变他们的网址。

例如，如果您有以下代码：

```
<!doctype html>
<div id=test>open</div>
<script>
document.getElementById('test').onclick = function(){
    window.open("http://stackoverflow.com", "_blank", "resizable=yes, scrollbars=yes, titlebar=yes, width=300, height=300, top=10, left=10");
}
</script> 
```

[http://jsbin.com/axomid/1/](http://jsbin.com/axomid/1/)

![图片](https://i.stack.imgur.com/Fqxns.png)

那么如何让用户成功编辑 url bar。

例如，我希望用户能够将 stackoverflow.com 更改为 stackexchange.com。

# delphi - Delphi - 如何列出特定范围内的数字组合？

> ID：15859322
> 
> 赞同：0
> 
> 时间：2013-04-07T05:46:09.783
> 
> 标签：delphi, random, combinations

我需要在 Delphi 7 中编写一个函数，列出 3 个整数的所有可能组合（不重复），使用范围从 1 到 8。例如：

123 124 125 ... 412 413 415 ... 874 875 876

此函数将用于比较目的，所以如果它尽可能快就更好了。

请，有人可以给出一个想法（如果可能的话，用一些代码示例）？

谢谢！

* * *

好吧，这就是我到目前为止所得到的。请，如果有人有任何提示可以使它更好（提高性能，减少代码，...），请帮助我。再次感谢！

```
Function IsNumOnSet(Max, Num: Integer): Boolean;
var
  X, Y, Z: Integer;
Begin
  Result := False;
  For X := 1 to Max Do
    For Y := 1 to Max Do
      For Z := 1 to Max Do
        If (X <> Y) and (X <> Z) and (Y <> Z) Then
          If (IntToStr(X) + IntToStr(Y) + IntToStr(Z) = IntToStr(Num)) Then
          Begin
            Result := True;
            Exit;
          end;
end; 
```

* * *

这是新的和完成的功能，在 Ken 的帮助下。将来可能对其他人有用。谢谢！

```
Function IsNumOnSet(const Min, Max, Num: Integer): Boolean;
var
  X, Y, Z: Integer;
Begin
  Result := False;
  For X := Min to Max Do
    For Y := Min to Max Do
      For Z := Min to Max Do
        If (X <> Y) and (X <> Z) and (Y <> Z) Then
          If (X * 100 + Y * 10 + Z = Num) Then
          Begin
            Result := True;
            Exit;
          end;
end; 
```

如果有人有更好的想法，请告诉我们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T07:17:44.303

您可以在没有循环的情况下解决此问题。

提取您号码中的三位数字，检查它们是否不同，并检查它们是否在最小、最大范围内。

```
uses Math;

function IsNumOnSet(min,max,num : Integer) : Boolean;
var
  d0,d1,d2 : Integer;
begin
  d0 := num mod 100;
  d1 := (num div 10) mod 10;
  d2 := num div 100;
  Result :=
    (d0 <> d1) and (d0 <> d2) and (d1 <> d2) and
    InRange(d0,min,max) and
    InRange(d1,min,max) and
    InRange(d2,min,max);
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T07:58:02.313

这是一个使用 Litbox 和编辑框的小演示。

```
var
  Form1: TForm1;
  mystring                                : string;

implementation

{$R *.dfm}

procedure genstrings
          (lowchar                        : char;
           highchar                       : char;
           var outstring                  : string
          );
var
  char1                                   : char;
  char2                                   : char;
  char3                                   : char;
begin
  outstring := '';
  for char1 := lowchar to highchar do
    for char2 := lowchar to highchar do
      if char1 <> char2 then
        for char3 := lowchar to highchar do
      if (char1 <> char3) and (char2 <> char3) then
        outstring := outstring + ',' + char1 + char2 + char3;
  delete(outstring,1,1)
end;

procedure TForm1.Edit1Change(Sender: TObject);
begin with edit1 do begin
  if length(text) = 3 then
  begin
    if pos(text,mystring) > 0 then
      color := cllime
    else
      color := clred;
    if listbox1.Items.IndexOf(text) >= 0 then
      font.color := clblack
    else
      font.color := clwhite;
  end
  else
  begin
    color := claqua;
    font.Color := clfuchsia;
  end;

end;end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  genstrings('1','8',mystring);
  listbox1.Items.CommaText := mystring;
  edit1change(nil);
end;

end. 
```

`genstrings`生成字符串并将它们编译成逗号分隔的列表。列表被加载到`listbox1`- 都在创建表单时。

自然地，列表框可​​以直接加载并`listbox.commatext`用于提取完整列表。

更改编辑框时，如果其中包含的文本不完全是 3 个字符，则编辑框颜色将更改为蓝色的紫红色。

如果提供的字符串正好是 3 个字符长，则使用两种不同的机制来验证条目。

*   第一个验证是对逗号分隔的有效子字符串的简单 POS。如果找到字符串，则编辑框颜色变为石灰，否则变为红色。
*   第二个验证是尝试在列表框中查找文本（这实际上是 TStringList 的一种可见形式）。如果找到，则编辑框字体颜色变为黑色，否则变为白色。

至于速度和可靠性——在这么小的演示中，速度真的无关紧要。我敢说 POS 方法比 Indexof 方法 FWIW 更快。真正的测试是真正的应用程序。一个字符串能容纳所有的目标元素吗？

自然地，输入`7,1`example 将在 POS 实现中达到目标，因为 '7,1' 是一个子字符串。这个演示很容易治愈`(pos... mod 5) = 1`，但这是一个附带问题。真的取决于我们不知道的东西——真正的目的是什么。例如，如果该条目确实在一个编辑框中，并且该编辑框实际上是一个掩码编辑，则可以轻松控制字符的输入。

# java - 使用 gson 从巨大的 json 文件中获取 3 个第一个 json 对象

> ID：15859325
> 
> 赞同：2
> 
> 时间：2013-04-07T05:46:15.847
> 
> 标签：java, json, gson

我有一个大文件，里面有很多 json，例如：

```
{
   "id":1,
   "text":"foo the bar",
   ...
},
{
   "id":2,
   "text":"foo the bar",
   ...
},
{
   "id":3,
   "text":"foo the bar",
   ...
},
{
   "id":4,
   "text":"foo the bar",
   ...
},... 
```

我想只取 3 个第一个对象，我尝试了这段代码，但我得到一个异常“不是有效的 json 格式”。

```
JsonReader reader = new JsonReader( new FileReader(path) );
reader.beginArray();
int i = 0;
while (reader.hasNext() && i < 3) {
    JsonParser  _parser = new JsonParser();
    JsonElement jsonElement =  _parser.parse(reader);
    JsonObject jsonObject = jsonElement.getAsJsonObject();
    //Do something
} 
```

当然，我试图用 beginObject() 改变我的 reader.beginArray()。我也不想打开所有文件..有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:04:15.997

就像消息中所说的那样，它不是有效的 json 格式。它应该看起来像这样

```
[{
   "id":1,
   "text":"foo the bar",
   ...
},
{
   "id":2,
   "text":"foo the bar",
   ...
},
{
   "id":3,
   "text":"foo the bar",
   ...
},
{
   "id":4,
   "text":"foo the bar",
   ...
},...] 
```

json 对象必须在数组中。

# sift - 了解移除边缘的概念

> ID：15859327
> 
> 赞同：0
> 
> 时间：2013-04-07T05:46:55.803
> 
> 标签：sift

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T10:05:30.353

由于标签 SIFT 表明问题/摘录与计算机视觉中使用的局部图像特征有关。摘录未涵盖您正在研究的算法如何删除边缘。要显示图像的边缘，您可以使用[Wikipedia 上的 Canny Edge Detector](https://en.wikipedia.org/wiki/Canny_edge_detector)。您的摘录基本上解释了如何在灰度图像中检测*角*点，这对于*特征检测*很有用。

动机如下：

*   自然图像包含大量复杂的视觉信息。您希望跨不同图像检测的对象可以旋转、变形、遮挡、在不同的照明条件下查看等。这使问题变得困难。
*   解决这个问题的一个想法是识别对象的较小部分并在图像中重新检测它们。如果这些部分的足够大的子集出现在另一个图像中，并且它们在几何上是一致的，那么您可能会认为该对象在另一个图像中是部分可见的。
*   现在，如果您使用矩形滑动窗口遍历图像，您必须确定该补丁是否包含足够的视觉信息，以便可以在不同的图像中重新检测到它。这是一个开放的问题。另请参阅[Wikipedia 上的兴趣点检测](https://en.wikipedia.org/wiki/Interest_point_detection)

我们试图在低层次上简化问题，并尝试通过使用理论示例来避免概念上的错误。

*   作为简化，忽略颜色，因此我们有一个灰度图像。
*   一块只有白色像素的补丁在白墙上肯定不是唯一可识别的。比例，旋转，除了颜色之外的一切都是模棱两可的。这是您摘录中的**“平坦区域” 。**
*   假设在该局部补丁中有一个像素粗细的黑色直线。现在你有一些不那么模棱两可了。例如，如果您在另一幅图像中发现一条粗细为 2 像素的黑色直线，它可能是同一条线，并且比例因子为 2。但是，这条线从哪里开始，在哪里结束？通常，这被称为**“边缘”**。
*   然而，水平和垂直线的黑色十字很容易识别，而十字“开始”和“结束”的位置没有歧义。
*   类似地，一个**“角”**，即两条线在一个点结束，是一个很好的检测特征。

因此，声明“角落是伟大的关键点”。但是，也有“斑点”和“脊”（[维基百科上的图像特征类型](https://en.wikipedia.org/wiki/Feature_detection_%28computer_vision%29#Types_of_image_features)）。[图像梯度算子](https://en.wikipedia.org/wiki/Gradient)是一个可以突出角状图像区域的函数。

*   将梯度视为两个像素之间的差异。对于垂直线，您会在水平方向上得到一个峰值（高差）。对于水平线，您会在垂直方向上得到一个峰值。
*   现在，如果您将这个梯度算子应用于补丁中的每个像素并从中构建直方图，那么摘录中提到的三种情况都适用。
*   由于补丁可能看起来是旋转的，因此您通常会首先分析[定向梯度的直方图，](https://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)以找到一个主要方向作为关键点的方向。然后看看正交方向是否有第二个峰值。

# sql - 重新调整网页大小

> ID：15859329
> 
> 赞同：-1
> 
> 时间：2013-04-07T05:47:23.913
> 
> 标签：sql, resize, mysqli, webpage

我是一名计算机科学专业的学生，​​我被分配了一项任务，即根据我们作为主题要做的事情来创建一个完整的网站。我的目的是创建一个关于 Google Glass 的网站，目的是让网站重新调整大小，这样它就可以在手机上打开，也可以在我自己以外的其他电脑屏幕上正常显示。我正在寻求有关重新调整网站大小的帮助，因为我一直在调整 SQL 代码的大小，如果有人可以向我展示一个示例，我将非常感谢您的帮助。

> ```
> <html> 
> ```
> 
> 帮助
> 
> ```
> <li><a href="contact.html">Contact</a></li>
> <li><a href="about.html">About</a></li>
> <li><a href="help.php">Help</a></li>
> <li><a href="careers.html">Careers</a></li>
> <li><a href="Purchase.html">Purchase</a></li>    
> <li><a href="index.html">Home</a></li> 
> ```
> 
> //定义一些变量： $db_hostname = 'localhost'; $db_username='root'; $db_password=''; $db_database='玻璃';
> 
> //连接到 MySQL $db_server = mysql_connect($db_hostname, $db_username, $db_password );
> 
> //检查连接是否有错误 if (!$db_server) die("Unable to connect to MySQL: " .mysql_error());
> 
> //…下一步是… 2\. 选择数据库！mysql_select_db($db_database) or die("无法连接 MySQL:" .mysql_error());
> 
> //创建一个SQL查询 $query = "SELECT * FROM help";
> 
> //运行查询 $result = mysql_query($query); if (!$result) die ("无法运行查询" . mysql_error());
> 
> //第五步：输出结果。/*计算查询返回的行数并赋值给一个变量*/ $number_rows = mysql_num_rows($result); //运行循环输出所有行的数据 echo '
> 
> '; //第6步：关闭与MySQL的连接 mysql_close();
> 
> ?>
> 
>     版权所有 2012。©

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:07:23.400

你问了2个问题。我不会做你的任务，但我会推动你朝着正确的方向前进:)

首先，没有“重新调整 SQL 代码大小”之类的东西，除非您的意思是通过消除行来提高代码效率。此外，您发布的代码是**mysql**，（不幸的是已弃用）。你使用**mysqli**。[示例可在此处找到](http://php.net/manual/en/mysqli-result.fetch-array.php)。

使用php连接sql数据库的底线：

```
<?php
  //connect
  $link = mysqli_connect("localhost", "my_user", "my_password", "world");

  //execute query
  $query = "SELECT * FROM myTable";
  $result = mysqli_query($link, $query);

  //loop through results
  while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC)){
    echo $row['myColumn'];
  }

  //disconnect
  mysqli_close($link);
?> 
```

其次，可以在不同分辨率下查看的网页布局称为“流畅”或“响应式”布局。下面是一个流体示例 - 这意味着您在 中指定`width`元素`%`，而不是`px`：

```
<style>
.header{
  height:120px;
  width:100%;
}
.content{
  margin:auto;
  width:80%; 
}
</style>
<body>
  <div class="header">
    <div class="logo"></div>
  </div>
  <div class="content">
  </div>
</body> 
```

以后，请努力尝试解决方案，而不是仅仅要求 StackOverflow 给你分配，干杯:)

# java - 如何防止播放器在 Java 中编辑 stat 文件

> ID：15859335
> 
> 赞同：1
> 
> 时间：2013-04-07T05:48:09.003
> 
> 标签：java

我正在创建一个游戏，我在其中使用文件来记录玩家统计数据（速度、级别等），这样您就可以在退出游戏后继续使用您的角色。我的问题是在我的测试版本中，我使用基本的 Java Filewriter 来保存/读取统计文件，但有人可以用记事本打开它并更改统计信息（我不想要）。

有没有更安全的方法来做到这一点，如果有人可以将教程链接到它？

我听说使用 XML 可能会有所帮助，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:28:17.687

首先，一些一般性的建议：如果你所有的东西都在客户端，你就*无法*保护它。您只能增加某人解密它所需的时间。因此，如果您真的担心玩家操纵他们的存档游戏，您必须将您的游戏变成一个始终在线的云存储解决方案（这有其自身的问题，而不仅仅是技术问题）。

其次，如果您的游戏不在线，您为什么要阻止玩家编辑他们的存档游戏？很多游戏玩家（包括我）喜欢一些好的故事讲述但不一定是所有游戏，而且不止一次我达到了我不再喜欢玩游戏但想知道故事和角色如何发展的地步，或者我只是想尝试一下。如果没有存档编辑器，我会完全脱离游戏，但是由于作弊，我度过了愉快的时光，看到了其余部分的展开（以及单枪匹马击杀某些顽固的敌人的罪恶感）。如果玩家想在单人游戏中作弊，为什么不呢？这是他们的经验，可以让他们保持参与。

防止作弊的两个原因是支持和竞争场景。如果单枪匹马阻止了一个本应以 50% 生命值运行的事件，并且如果我随后抱怨我的游戏处于无法获胜的状态，那么您需要额外的工作来确定保存游戏被操纵并且它不是你身边的虫子。在竞争方面，如果你有成就或排行榜，作弊者是个问题。

但话又说回来，你不能在客户端上 100% 的游戏中拥有竞争元素，因为你无法做任何事情来防止篡改。

以下是一些如何使篡改更加困难的提示：

*   在存档游戏上使用校验和
*   使用存储在代码中的密钥对其进行加密，或者（很脆弱！）使用游戏中某些文件的 SHA1 作为加密密钥
*   保留“有效”状态列表并检测不可能的情况，例如具有 9000 生命值的 3 级角色或未超过故事中第 2 章的 20 级角色，或在云城地牢
*   检测到存档游戏被操纵但让玩家继续，只是让他们知道不会为该存档游戏的问题提供技术支持。

# c# - 在辅助类中处理页面会话

> ID：15859337
> 
> 赞同：1
> 
> 时间：2013-04-07T05:48:44.873
> 
> 标签：c#, asp.net-mvc-4

我有一个 MVC4 网页，我想以毫秒为单位显示页面生成时间。为了帮助代码重用，我创建了一个 PageHelper 静态类，我想要一个“StartTimer”方法和一个“EndTimer”方法。StartTimer 返回 void，EndTimer 返回一个`TimeSpan`.

因为可以在单个“页面点击”中使用几页，所以我将 StartTime 放入一个`Session[]`变量中。

```
public static class PageHelpers
{
    public static void StartPageTimer()
    {
        var StartTime = DateTime.Now;
        Session["StartTime"] = StartTime;

    }

    public TimeSpan StopTimer()
    {
        var EndTime = DateTime.Now;
        TimeSpan duration = (EndTime - DateTime.Parse(Session["StartTime"].ToString()));
        return duration;
    }
} 
```

我面临的问题是 Session 在这个类中似乎不可用......是否有某种形式的 Context 或其他东西，我需要传递给类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:54:52.527

您可以使用`System.Web.HttpContext.Current.Session[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:54:20.557

```
HttpContext.Current.Session 
```

请参考这篇文章。

[如何访问静态函数内的 ASP.NET 会话对象](http://www.apijunkie.com/APIJunkie/blog/post.aspx?id=20113ce7-1fdf-4058-8433-66f042527faa)

# asp.net-mvc - @Ajax.ActionLink 发布表单字段

> ID：15859342
> 
> 赞同：1
> 
> 时间：2013-04-07T05:50:20.140
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, ajax.beginform

我有以下表格，我将项目添加到列表并更新结果表。所以这是我目前拥有的代码：

**查看（强类型）：**

```
@using (Ajax.BeginForm("AddService", "Manager", 
           new AjaxOptions { UpdateTargetId = "servicePartial", 
                             HttpMethod = "Post", 
                             LoadingElementId = "loading" }))
{
       <input type="submit" value="Add New" />                
       <div class="widget-content table-container" id="servicePartial">
            @Html.Partial("_Services", Model)
       </div>
} 
```

**部分的：**

```
@model Project.Model.ServicesViewModel
<table id="demo-dtable-02" class="table table-striped">
<thead>
    <tr>
        <th>Service</th>
        <th>Price</th>
        <td class="action-col">Actions</td>
    </tr>
</thead>
<tbody id="services">
    @if (Model != null)
    {
        if (Model.Services != null)
        {
            if (Model.Services.Count > 0)
            {
                for (int i = 0; i < Model.Services.Count; i++)
                {
                     <tr>
            <th>@Model.Services[i].name</th>
            <th>@Model.Services[i].price</th>
            <td class="action-col">
                 @Html.HiddenFor(x=>x.Services[i].name)
                @Html.HiddenFor(x=>x.Services[i].price)
                @Html.HiddenFor(x=>x.Services[i].serviceId)
                @Ajax.ActionLink(" X ", "Appointment", "Manager", 
                                 new{ model = Model, 
                                      id = @Model.Services[i].serviceId }, 
                                      new AjaxOptions
                                       { 
                                           UpdateTargetId = "servicePartial", 
                                           LoadingElementId = "loading",
                                           HttpMethod="Post" 
                                       })
            </td>

        </tr>
                }                   
            }
        }

    }
</tbody>
</table> 
```

**视图模型：**

```
public class ServicesViewModel
{
    public List<Service> Services { get; set; }
} 
```

现在，通过`Ajax.Beginform`作品的提交按钮发回，我可以发回模型并更新服务（添加一个）并返回它。

我的问题是我也希望能够从列表中删除服务。为此，我想我会使用 a`Ajax.Actionlink`并且它确实使用 id 发回。问题是它只返回 id 而不是模型。

现在环顾四周，显然不可能使用`Ajax.Actionlink`你们将如何处理这个问题将当前模型发送回操作？

我以为我会很聪明，并使用重载`Ajax.Actionlink`并添加 `new{ model = Model, id = @Model.Services[i].serviceId }`到它，但它不行。

ViewModel 中还有很多其他数据（为了空间，我已将其从上述代码中取出），通过上述重载将所有这些数据一一发送对我来说是非常不切实际的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:11:25.637

您可以使用 form.serialize 方法将整个表单发布到使用 ajax 调用的操作。尝试使用按钮，而不是使用操作链接。并在该按钮的 onclick 事件中，序列化表单并提交。

```
$('#deleteButton').click(function(){

    $.ajax( {
      type: "POST",
      url:'@Url.Action("deleteActionName")',
      data: $('form').serialize(),
      success: function( response ) {
        console.log( response );
      }
    } );
  } ); 
```

# scheme - 我无法理解方案定义，lambda，让我们清楚

> ID：15859343
> 
> 赞同：0
> 
> 时间：2013-04-07T05:50:21.770
> 
> 标签：scheme

最近我开始学习方案语言

但我真的不知道如何解决这个问题。

```
(define A
  (lambda()
    (let* ((x 2)
           (C (lambda (P)
                (let ((x 4))
                  (P))))
           (D (lambda ()
                x))
           (B (lambda ()
                (let ((x 3))
                  (C D)))))
      B))) 
```

问：会打印什么？浅绑定和深绑定怎么样？

我简要了解了define、lambda、let*，但我不知道如何解决这个问题。我该如何解决？请评论并详细解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:42:42.647

过程 A 返回过程 B。所以

```
(A) 
```

返回

```
#<procedure:B> 
```

如果你想让它被执行，你必须运行

```
((A)) 
```

这实际上会调用 B 并返回

```
2 
```

那么发生了什么？调用 B 将以 D 作为参数调用 C。因此，C 将调用 D（绑定到参数 P）。D 返回 x，所以打印的是过程 D 中绑定到 x 的任何值。由于 Scheme 是词法范围的，并且 D 对 x 没有任何绑定，因此使用词法上下文的绑定，它来自

```
(let* ((x 2) 
```

这就是打印 2 的原因，而不管其他过程中可能存在的对 D 的任何其他绑定。

# jquery - Jqgrid数据更新实时功能点击但不更新数据

> ID：15859346
> 
> 赞同：0
> 
> 时间：2013-04-07T05:50:38.037
> 
> 标签：jquery, jqgrid, jqgrid-formatter

我正在尝试更新实时功能单击但不更新数据的 Jqgrid 数据更新。

我试过 jQuery('grid').jqGrid('clearGridData'); jQuery('grid').jqGrid('setGridParam', {data: dataToLoad}); jQuery('grid').trigger('reloadGrid');

这也是我的网格代码，它在一个函数中，我为每个按钮点击调用这个函数

```
 jQuery("#procedureResultGrid").jqGrid({
       loadonce:false,
    rowList : [ 10, 20, 50,100 ],
       data : jsonText,
       datatype : 'local',
       gridview: true,
       rowNum : 10,
       width : '100%',
       height : 'auto',
       colModel : [{
           name : 'name',
           sortable:false,
           width : 130,
           classes: "col1"
       },{
           name : 'rowv_1',
           formatter: valueFormatFunctionFirst,
           width : 60,
           sortable:false
       }
       ,{

           name : 'row1',
           width : 25,
           formatter: calculatedFormatFunctionFirst,
           classes: "imageValue"

       },{

           name : 'row4',
           width : 50,
           formatter: calculatedPersendFunctionFirst,
           classes: "persendValue"

        },{
           name : 'rowv_2',
           formatter: valueFormatFunctionSecond,
           width : 60,
           sortable:false
       }
       ,{

           name : 'row3',
           width : 25,
           formatter: calculatedFormatFunctionSecond,
           classes: "imageValue"

       },{

       name : 'row4',
       width : 50,
       formatter: calculatedPersendFunctionSecond,
       classes: "persendValue"
    }
       ,{
           name : 'rowv_3',
           width : 60,
           formatter: valueFormatFunctionThird,
           sortable:false
       }
       ,{

           name : 'row5',
           width : 25,
           formatter: calculatedFormatFunctionThird,
           classes: "imageValue"

       },{

       name : 'row6',
       width : 50,
       formatter: calculatedPersendFunctionThird,
       classes: "persendValue"

    }
       ,{
           name : 'rowv_4',
           formatter: valueFormatFunctionForth,
           width : 60,
           sortable:false
       }
       ,{

           name : 'row5',
           width : 25,
           formatter: calculatedFormatFunctionForth,
           classes: "imageValue"

       },{

       name : 'row6',
       width : 50,
       formatter: calculatedPersendFunctionForth,
       classes: "persendValue"

    },{
        name : 'rowv_4',
        formatter: valueFormatFunctionYTD,
           width : 60,
           sortable:false
       }
       ,{

           name : 'row5',
           width : 25,
           formatter: calculatedFormatFunctionYTD,
           classes: "imageValue"

       },{

       name : 'row6',
       width : 50,
       formatter: calculatedPersendFunctionYTD,
       classes: "persendValue"

    }
       ],
       pager : jQuery('#pager'),
       afterInsertRow: function (rowid, rowdata) {
    if(rowid%2==0)
           $("#procedureResultGrid").jqGrid('setRowData', rowid, false, { background: '#F2F2F2' });
        else
            $("#procedureResultGrid").jqGrid('setRowData', rowid, false, { background: 'white' });
       }

   });

   $("#procedureResultGrid").fluidGrid({
       base : "result-grid",
       offset : -20
   });

   $("#pager").show();
          $("#procedureResultGrid").setGridParam({datatype:'local',sortname:'values.aggregate.'+totalCostIndex+'.data.'+addKeyYear(keyYear), sortorder: 'desc'}).trigger('reloadGrid'); 
```

我也在尝试排序它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:32:34.707

我刚刚从创建网格中添加了

```
 $("#procedureResultGrid").GridUnload(); 
```

然后

```
 $("#procedureResultGrid").trigger('reloadGrid'); 
```

对我来说工作得很好..

谢谢

# php - 我想用 ereg_replace 的功能插入数据给出错误

> ID：15859349
> 
> 赞同：-3
> 
> 时间：2013-04-07T05:51:22.183
> 
> 标签：php

您好，我想使用 php (ereg_replace) 的函数将数据插入到我的数据库中，但我收到此错误消息

```
Deprecated: Function ereg_replace() is deprecated in C:\xampp\htdocs\spdealers\Admin Panel\Property_Insert_Page_exe.php on line 3 
```

请问有人吗？？？

这是php代码：`$propertyid = ereg_replace("[^A-Za-z0-9-]", "", $_POST['propertyid'])`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:53:39.657

这个问题已经在stackoverflow上可用。请至少在 Stackoverflow 上搜索，请查看以下链接：-

[不推荐使用 ereg_replace() 函数 - 如何清除此错误？](https://stackoverflow.com/questions/3132844/function-ereg-replace-is-deprecated-how-to-clear-this-bug)

[如何解决在 Drupal 6.13 中使用 PHP 5.3.0 的弃用函数 ereg()](https://stackoverflow.com/questions/1132912/how-to-solve-the-use-of-deprecated-function-ereg-of-php-5-3-0-in-drupal-6-13)

[不推荐使用函数 ereg()](https://stackoverflow.com/questions/3489151/function-ereg-is-deprecated)

切换到 preg_replace() ，并参考以下链接了解不同之处[http://php.net/reference.pcre.pattern.posix](http://php.net/reference.pcre.pattern.posix)

# java - 删除数组列表中的重复项

> ID：15859353
> 
> 赞同：1
> 
> 时间：2013-04-07T05:52:05.887
> 
> 标签：java

只是一个免责声明：我第二次重复了我的 java mod，所以我的问题可能有点简单，希望我听起来不会太愚蠢。

> 编写一个 removeDuplicates 方法，该方法将已排序的字符串 ArrayList 作为参数，并从列表中消除任何重复项。例如，假设一个名为 list 的变量包含以下值：`{"be", "be", "is", "not", "or", "question", "that", "the", "to", "to"}`调用 removeDuplicates(list) 之后；该列表应存储以下值：`{"be", "is", "not", "or", "question", "that", "the", "to"}`
> 
> 因为值将被排序，所以所有重复项将被分组在一起。

我对此的尝试：

```
public static void removeDuplicates(ArrayList <String>a){
    for(int i=0;i<a.size();i++){
        String word=a.get(i);
        String word2=a.get(i+1);

        if(word.equals(word2)){
            a.remove(word);

        }
        else{
            System.out.print(word);

        }
    }
} 
```

问题是当我用以下方式调用它时：

```
["duplicate", "duplicate", "duplicate", "duplicate", "duplicate"] 
```

它返回`indexoutofbound`。我知道这`i=i-1`与参考`remove`方法有关。尝试在这里和那里插入它，但它不起作用。但我很困惑，因为这适用于我的代码。当我调用它时：

```
["be", "be", "is", "not", "or", "question", "that", "the", "to", "to"] 
```

有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:59:16.460

你的实现有缺陷。

```
String word=a.get(i);
String word2=a.get(i+1); 
```

当你到达最后一个元素时会超出界限。

其次，当您直接从 arraylist 迭代时，您正在删除元素，这将不起作用。你迭代器代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T07:55:37.520

I would suggest you change return type to `ArrayList<String>` and use `Set` to eliminate duplicates . Here's how :

```
public static ArrayList<String> removeDuplicates(ArrayList <String>a){
    return new ArrayList<String>(new HashSet<String>(a));
} 
```

Or , in your current code change upper limit of for loop to `a.size()-1`:

```
for(int i=0;i<a.size()-1;i++) // this should prevent arrayindexoutofbound exception. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:59:01.313

您有两个错误：第一个错误是您尝试访问不存在的对象。时`i = a.size()`，`String word2=a.get(i+1)`不存在！

另一个错误是在迭代列表时删除元素。

你应该`iterator`改用。

一种不使用迭代器来修复它的方法是：使用：

```
for(int i=0;i<a.size() - 1;i++){ 
```

和：

```
if(word.equals(word2)){
    a.remove(word);
    i--;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T05:59:29.470

您可以使用 Set 将在添加时删除重复元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T06:02:32.410

你的 for 循环应该是`i < a.size() - 1`.

让您的大小为 4。当您迭代 for 时`i = 3`，您将获得 word2 的 indexoutofbound，尝试访问索引 4 的值，该值实际上是从 0 到第 3 个索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T06:16:12.077

```
void unique (ArrayList<String> a)
{
  if( a.length() == 0 )
      return;

  int result = 0;
  int first = 0;
  int last = a.length();
  while (++first<last)
  {
      String r = a.get(result);
      String cur = a.get(first);
      if( !cur.euqals(r) )
          a.set(++result,cur);
  }
  a.removeRange(++result,last);
} 
```

我希望这个代码块可以帮助你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-07T06:55:21.813

好的，所以我将向您介绍语法和一些列表迭代概念。振作起来，准备好您的 Java 7 API。

* * *

这个问题的解决方案如下，简单的步骤：

*   遍历列表。
*   检查列表中的相邻元素。
    *   如果它们匹配，请将其删除。
    *   否则，不管它。
*   返回生成的非重复列表。

假设：

*   假定具有不与其他重复元素相邻的重复元素的列表表现出非 Set 行为 - 也就是说，如果我输入 [A, B, B, A] 我希望 [A, BA] 为输出。这就是为什么我**不**建议为此使用 a`Set`的原因。

仅使用时要注意`remove()`-[如果同时访问此列表，那么您将遇到`ConcurrentModificationException`！](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html) 一个首选且稍微干净的方法是使用`Iterator`or`ListIterator`接口。

在迭代之前，我们有四种情况要遇到：

*   空（无元素） - 应该被禁止，因为我们 [实际上] 保证我们不会有一个空列表
*   单例（只有一个元素，没有重复）
*   二进制（两个元素，一个*可能*是重复的）
*   聚（*n* > 2 个元素）

我们必须考虑一个极端情况——超过三个重复的元素。这意味着，当我们迭代时，我们必须同时查看前一个*和*下一个元素以确定是否应该删除它。

以这个示例输入为例：

```
[A, A, A, B, C, D] 
```

如果我们以朴素的方法进行迭代（在前进时查看 i+1），那么我们将完全跳过一个元素。上面不看左右的结果将是：

```
[A, A, B, C, D] 
```

为了解决这个问题，我们使用[`ListIterator`](http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html)，它支持以前的操作。

使用以前天真的方法运行一次会产生比以前更差的结果 - 因为我们已经重置了当前光标的位置，*并且我们已经检查过它*，我们将前进到的*下一个*节点将被错误地视为重复！（具有讽刺意味的是，您不会摆脱前几个重复项。）

为了解决**这个**问题，我们将光标重置到我们向左看之前所在的原始位置。

这是解决方案。它适用于任何大小的列表，就我们上面定义的约束和预期行为而言。

```
public List<String> removeDuplicates(final ArrayList<String> dupeList) {
    if(dupeList.size() == 0) {
        throw new IllegalArgumentException("Zero-length list == evil");
    }
    ListIterator<String> li = dupeList.listIterator();
    String w1;
    String w2;
    if(dupeList.size() == 1) {
        return dupeList;
    } else if(dupeList.size() == 2) {
        w1 = li.next();
        w2 = li.next();
        if(w1.equals(w2)) {
            li.remove();
        }
    } else {
        while(li.hasNext()) {
            if(li.hasPrevious()) {
                w1 = li.previous();
                li.next(); // explained a bit above
            } else {
                w1 = li.next();
            }
            if(li.hasNext()) {
                w2 = li.next();
                if(w1.equals(w2)) {
                    li.remove();
                }
            }
        }
    }
    return dupeList;
} 
```

# iphone - webViewDidStartLoad 和 ..FinishLoad 被依次调用

> ID：15859361
> 
> 赞同：0
> 
> 时间：2013-04-07T05:53:32.753
> 
> 标签：iphone, ios, objective-c, ipad, ios6

我正在开发一个使用 UIWebView 的应用程序。我正在实现[UIWebView 中的手动负载计数方法 - 如何识别“最后一个”webViewDidFinishLoad 消息？](https://stackoverflow.com/questions/908367/uiwebview-how-to-identify-the-last-webviewdidfinishload-message?rq=1)

我可以看到原则上对 start/finish/failLoad 的调用是平衡的。但是，对于一些网页（尤其是 google.com），页面最初加载良好，几秒钟后会自动（似乎）刷新自身。开始/结束顺序如下所示：

```
-[MyWebView webViewDidStartLoad:], 1, 0x895150c
-[MyWebView webView:didFailLoadWithError:], 0, 0x895150c
-[MyWebView webViewDidStartLoad:], 1, 0x895150c
-[MyWebView webViewDidStartLoad:], 2, 0x895150c
-[MyWebView webViewDidFinishLoad:], 1, 0x895150c
-[MyWebView webViewDidFinishLoad:], 0, 0x895150c
-[MyWebView webViewDidStartLoad:], 1, 0x895150c   <-- after a few seconds' gap
-[MyWebView webViewDidFinishLoad:], 0, 0x895150c 
```

第一个参数是被调用的函数，第二个是计数器的值，最后一个值是 loadCounter 的地址，只是为了确认它是同一个 webView 实例（因此也是计数器）被调用。我的线索不多了:(...

有没有人有任何线索，这里可能发生了什么？（顺便说一句，许多其他网站不会发生这种情况，到目前为止只有谷歌）

编辑：为什么对我很重要，因为当它刷新（显然是随机的）时，它会关闭键盘。如果用户已经在输入内容，这很烦人。是否可以在后台继续对站点进行任何进一步的刷新，同时在前面继续用户交互（尤其是键盘）？

TIA，尼基尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:18:18.033

作为避免该问题的解决方法 - 您可以收听键盘显示/隐藏通知。然后当你知道使用键盘时，不要让 web 视图执行请求

更新：

首先，您需要将您的视图控制器设置为 webview 委托，以便它可以响应 web 视图委托消息：

```
@interface myViewController : UIViewController <UIWebViewDelegate> 
```

然后一旦创建了 webview 对象，将视图控制器设置为它的委托：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    someWebView.delegate = self;
} 
```

现在，当 webview 将执行其请求时，它将首先咨询 myViewController，因为它是关联的委托。如果您不想让 webview 执行请求，此时您应该返回 NO。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    if (keyboardIsShown == YES){
        return NO;
    }
    else{
        return YES;
    }
} 
```

您如何知道此时键盘是否可见？看到[这个帖子](https://stackoverflow.com/questions/1490573/how-to-programatically-check-whether-a-keyboard-is-present-in-iphone-app)

# executable - 有一种方法可以在可执行文件上访问和注入“运行中”值吗？

> ID：15859366
> 
> 赞同：1
> 
> 时间：2013-04-07T05:54:01.463
> 
> 标签：executable, code-injection

例如，想象一个名为 chess.exe 的软件；这是一个普通的国际象棋游戏，玩家与计算机。我想发送一个假棋子运动之类的东西，而不是我在游戏中制作的那个。或者查看软件在执行过程中持有什么值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:36:01.123

[作弊引擎](http://www.cheatengine.org/)将为此做到最好。它是开源的，带有一个内存扫描器，可以快速扫描游戏中使用的变量并允许您更改它们，但它还带有一个调试器、反汇编器、汇编器、speedhack、培训师制造商、直接 3D 操作工具、系统检查工具等（在[about](http://www.cheatengine.org/aboutce.php)中引用）。您可以在程序执行期间轻松更改值，不仅适用于游戏，也适用于其他程序。

# java - 不断收到错误属性缺少 android namspace 前缀

> ID：15859369
> 
> 赞同：0
> 
> 时间：2013-04-07T05:54:28.807
> 
> 标签：java, android

不断收到错误属性缺少 android namspace 前缀

我重新编辑了这个以显示一些代码，因为它让我发疯

iv 编辑和更改了一些东西，但仍然无法工作

重新编辑

```
`<games xmlns:android="http://schemas.android.com/apk/res/android">

        <games name="StarCraft"/>
        <games name="RomeTotalWar"/>
        <games name="Half Life"/>
        <games name="Half Life 2" />
        <games name="Sims" />
        <games name="Sims 2" />
        <games name="Sims 3" />
        <games name="Sim City" />

</games>` 
```

我发现了我目前还无法回答自己的问题的问题，但是经过一段时间后很容易弄清楚，真正的解决方案是

```
<games xmlns:android="http://schemas.android.com/apk/res/android">

    <games android:name="StarCraft"/>
    <games android:name="RomeTotalWar"/>
    <games android:name="Half Life"/>
    <games android:name="Half Life 2" />
    <games android:name="Sims" />
    <games android:name="Sims 2" />
    <games android:name="Sims 3" />
    <games android:name="Sim City" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:08:10.557

使用字符串而不是游戏，或者如果代码中存在游戏和游戏类，则在游戏之前提供完整的包名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:36:14.623

您可以通过在 array.xml 中包含以下内容来做到这一点：

```
<?xml version="1.0" encoding="utf-8"?>  
<resources>
    <string-array name="games">
        <item>StarCraft</item>
        <item>Half Life</item>
        <item>CS</item>
    </string-array>
</resources> 
```

然后您可以在创建适配器时调用它，如下所示：

```
 private ArrayAdapter adapter2 = ArrayAdapter.createFromResource(this, R.array.doing, android.R.layout.simple_spinner_item); 
```

因为，我没有确切的想法，你想在哪里使用适配器，你可能需要相应地调整代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T00:29:10.613

将android命名空间添加到代码本身解决了这个问题

```
<games android:name="StarCraft"/>
<games android:name="RomeTotalWar"/>
<games android:name="Half Life"/>
<games android:name="Half Life 2" />
<games android:name="Sims" />
<games android:name="Sims 2" />
<games android:name="Sims 3" />
<games android:name="Sim City" /> 
```

# python - 具有进程和池的 Python 生产者/消费者

> ID：15859374
> 
> 赞同：2
> 
> 时间：2013-04-07T05:55:57.503
> 
> 标签：python, multiprocessing, producer-consumer

我正在尝试使用流程为生产者消费者编写简单的代码。生产者是一个过程。对于消费者，我正在从池中获取进程。

```
from multiprocessing import Manager, Process, Pool
from time import sleep
def writer(queue):
   for i in range(10):
     queue.put(i)
     print 'put 1 size now ',queue.qsize()
     sleep(1)

def reader(queue):
   print 'in reader'
   for i in range(10):
     queue.get(1)
     print 'got 1 size now ', queue.qsize()

if __name__ == '__main__':
    q = Manager().Queue()
    p = Process(target=writer, args=(q,))
    p.start()
    pool = Pool()
    c = pool.apply_async(reader,q) 
```

但我得到错误，

```
Process Process-2:
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
  File "pc.py", line 5, in writer
    queue.put(i)
  File "<string>", line 2, in put
  File "/usr/lib/python2.7/multiprocessing/managers.py", line 758, in _callmethod
    conn.send((self._id, methodname, args, kwds))
IOError: [Errno 32] Broken pipe 
```

谁能指出我，我哪里错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T04:52:02.173

嗨，我找到了这个答案，

```
from multiprocessing import Manager, Process, Pool,Queue
from Queue import Empty

def writer(queue):
   for i in range(10):
     queue.put(i)
     print 'put %i size now %i'%(i, queue.qsize())

def reader(id, queue):
   for i in range(10):
     try:
       cnt = queue.get(1,1)
       print '%i got %i size now %i'%(id, cnt, queue.qsize())
     except Empty:
       pass

class Managerss:
   def __init__(self):
     self.queue= Queue()
     self.NUMBER_OF_PROCESSES = 3

   def start(self):
     self.p = Process(target=writer, args=(self.queue,))
     self.p.start()
     self.workers = [Process(target=reader, args=(i, self.queue,))
                        for i in xrange(self.NUMBER_OF_PROCESSES)]
     for w in self.workers:
       w.start()

   def join(self):
     self.p.join()
     for w in self.workers:
       w.join()

if __name__ == '__main__':
    m= Managerss()
    m.start()
    m.join() 
```

希望能帮助到你

# windows-phone-7 - Windows Phone 身份验证？PubCenter 广告应用程序创建？

> ID：15859376
> 
> 赞同：2
> 
> 时间：2013-04-07T05:56:29.663
> 
> 标签：windows-phone-7, authentication, windows-phone-8

我刚开始开发 Windows Phone 应用程序，我的应用程序通过广告（通过 PubCenter）赚了很多钱。我真的很喜欢 Microsoft 的 Windows Phone 开发中心应用程序，但他们没有可以让您检查广告统计数据的应用程序。我最初想制作一个供个人使用，然后，如果足够完善，就发布一个。问题是我从来没有做过这样的事情。甚至可能吗？我查看了报告页面上的来源，看看我可以从哪里提取今天和本月的收入，但我不知道从哪里开始进行身份验证。有人可以指出我正确的方向吗？（或者如果不可能，请关闭我）

这是有问题的链接 - [https://pubcenter.microsoft.com](https://pubcenter.microsoft.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:21:22.783

大约一个月前我有同样的想法，但后来因为懒得实施而放弃了。这是我找到的 API 资源。我期待看到它。[http://msdn.microsoft.com/en-us/library/aa983013.aspx](http://msdn.microsoft.com/en-us/library/aa983013.aspx)

-RT 应用

# php - 使用 Slim 框架的 REST API 客户端密钥

> ID：15859377
> 
> 赞同：12
> 
> 时间：2013-04-07T05:56:30.517
> 
> 标签：php, rest, slim

我设置了一个简单的 REST API（使用 Slim 框架），用户可以在其中调用这样的页面：

```
subdomain.domain.com/api/musician/id/3273 
```

检索和显示一些简单的 JSON 数据。

我想为此添加一些身份验证，以便只有具有某种客户端 ID（至少）的用户才能访问此数据。我希望用户能够在 URL 中传递他们的客户端密码/ID 信息，但我想在不过多破坏 REST 结构的情况下完成此操作。

是否有特定的框架或库可以特别有效地实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T10:25:25.057

我也有这个问题有一段时间了，我也有一个关于这个话题没有答案的问题（在这里）。

基本上你的选择是 OAuth 或自定义的。

现在，对于 oauth，他们正在开发 2.0 版，您不应该使用 OAuth 1 开始一个新项目，但问题是，oauth2 还远未完成，并且现在对 php 的 oauth2 服务器几乎没有支持。我不想说 oauth2 2-legged/3-legged 很复杂，但它超出了应有的程度，而且在阅读了很多关于此的帖子之后，我决定现在，我应该选择其他东西，而不是 oauth（另外，oauth 的创建者之一离开了该项目，因为他对这个项目的发展方向不满意）因为它处于“未决定”状态（当然人们会争辩说它几乎可以使用了，但我不在乎，我想要一些已经证明的东西，不想成为大公司的实验室老鼠来测试 oauth [是的，oauth 是为了大公司的利益，而不是你的]）。

无论如何，回到我的问题，我一直很喜欢亚马逊使用他们的 api 的方式，它实现起来非常简单，那么为什么不朝着同一个方向前进呢？我的意思是，亚马逊是最大的 api 提供商之一，如果他们使用它，他们有真正的理由这样做。
言归正传，在不到 2 小时的时间里，我的身份验证/授权协议启动并运行，你猜怎么着，这很容易，简单而且我喜欢编写它（不会因为 oauth 而感到沮丧）。一篇帮助我开始的好文章是这样的：[http](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/) ://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/它基本上解释了你必须做什么。

所以，如果我是你，我会从那里开始 :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T13:02:01.700

如果您的 API 客户端没有“代表”您的用户行事，那么我认为 OAuth 是矫枉过正的。

您可以发布的标准 API 密钥将起作用。如果需要，您也可以添加请求签名。

一些 Slim 示例：[这里](http://ericbrandel.com/2013/01/24/quickly-build-restful-apis-in-php-with-slim-part-4/)和[这里](http://websec.io/2013/02/14/API-Authentication-Public-Private-Key.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T10:11:46.133

也许这可能有用[的苗条HttpBasicAuth](https://github.com/codeguy/Slim-Extras/blob/master/Middleware/HttpBasicAuth.php)

您可以对每个请求使用 HTTP 基本身份验证来验证发出请求的用户是否是有效用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:22:41.213

由于 REST 是无状态的，因此如果您想要为不同的用户提供不同的数据表示（ergo - 有状态），您几乎需要将其删除，这意味着对于每个请求，您将提供与特定实体无关的数据（关于用户状态）。

因此，要么每次都对用户进行身份验证，要么是临时 cookie + 会话，或者，如果你有第三方参与，OAuth。

另请参阅[Dave Ingram - API 设计演示](http://www.youtube.com/watch?v=aoiaSkRCObY&t=11:40)

# c++ - 自动重复代码

> ID：15859381
> 
> 赞同：0
> 
> 时间：2013-04-07T05:56:43.897
> 
> 标签：c++

我写了一些代码来将任何字符串转换为摩尔斯电码。代码运行完美，直到我尝试自动重复它。

无论我使用“while”还是“do while”，代码只运行一次然后终止。你能帮忙找出问题所在吗？

```
int main ()
{
    cout<<"Enter the string: ";
    char myStr[81];
    char ch='y';

    while (ch=='Y'||ch=='y')
    {
        getString(myStr);
        toUpper(myStr,strlen(myStr));
        removeSpace(myStr);
        getMorse(myStr,strlen(myStr));
        cout<<"to repeat press Y/y";
        cin>>ch;
    }
    return 0;
} 
```

我添加了 getString() 函数

```
void getString(char myStr[])
{
  cin.getline(myStr,81,'\n');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:51:32.443

用户输入输入后，按回车键。该换行符`'\n'`仍在`cin`流中。你需要`ignore`它：

```
cin >> ch;
cin.ignore(numeric_limits<streamsize>::max(), '\n'); //this ignores all subsequent characters until the newline character 
```

# wpf - 使用窗口 vb.net wpf 缩放所有屏幕元素

> ID：15859392
> 
> 赞同：0
> 
> 时间：2013-04-07T05:58:11.450
> 
> 标签：wpf, vb.net

第一次在 GUI 项目上工作.. 第一次在 Windows 上工作，所以如果这是一个真正的菜鸟问题，请提前道歉。我正在从 vb.net WPF 开始逐步进入 Windows 编程。在 Visual Studio Express 2012 中工作。

我正在尝试弄清楚如何使用窗口本身来缩放窗口中的所有元素。例如，我会创建一个窗口，比如 1280x720，并在窗口中放置一些图像。说一个在顶部，一个在角落。（这是一个基本的基于媒体的应用程序）当我调整那个窗口的大小时，我希望整个窗口随之缩放，所以如果窗口变大，图像 1 和 2 会变大，但是这必须成比例地发生，这样如果我做窗口在一个方向上要大得多，一个图像不能与另一个重叠。想象一下窗口是一个图像，我正在尝试调整它的大小。（在我目前的尝试中，重叠的东西是我最接近让它工作的东西）。

制作中的布局将更加复杂，包括媒体元素（视频）、图像、文本等，并且都必须相应地缩放。这不是用户与之交互的东西，因此没有表单元素等，因此我不需要表单字段等在整个缩放过程​​中保持相同的大小。我只需要像缩放图片一样缩放所有内容。例如，如果我在 1920x1080 屏幕上显示这个 1280x720 (16:9) 布局，最大化它应该看起来相同，只是更大。

希望有人能以此为我指明正确的方向。

到目前为止我所尝试的——我在谷歌上找到的几篇与此相关的文章（我很可能正在搜索错误的东西）导致我将所有元素放在一个视图框中，这导致了我之前提到的重叠。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:37:13.790

我认为您可以使用[ViewBox](http://wpftutorial.net/ViewBox.html)容器。基本思想如下：`ViewBox`像缩放图像一样缩放其内容。这似乎是您在问题中描述的最接近的结果。只需将`Grid`具有绝对大小的列和行的 a 放入`ViewBox`并将其 Stretch 设置为 Uniform：

```
<Viewbox Stretch="Uniform">
    <Grid>
        <..>Your controls, MediaElements, etc
    <Grid>
</Viewbox> 
```

您还可以将它与（例如）[Grid Container](http://wpftutorial.net/GridLayout.html)组合（或完全替换） ：它使您能够指定单元格宽度和大小使用与 html 的百分比语法类似的星形语法。

另一种方法是使用 DockPanel。

总而言之，有很多方法可以实现类似的目标，而要走的路很大程度上取决于您的特殊要求的细微差别。查看[本教程](http://www.codeproject.com/Articles/140613/WPF-Tutorial-Layout-Panels-Containers-Layout-Trans#heading0005)以了解 WPF 容器以及如何使用它们的良好概述。

# java - 来自子进程的 Jave 进程 getInputStream

> ID：15859395
> 
> 赞同：0
> 
> 时间：2013-04-07T05:58:25.743
> 
> 标签：java, process, inputstream, outputstream

我使用processbuilder fork一个子进程，我想获取子进程的输出。所以我使用进程的getInputStream来获取子进程的输出。我发现父进程只有在子进程退出或Std.out时才能读取子进程的输出子进程关闭。

子进程的 System.out.flush() 不起作用。

但我需要多次输出。在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:05:40.210

如果没有看到你的代码，也没有确切地知道你的子进程中有什么，就很难提供帮助。这是一个适用于我的示例，其中子进程打印出文本，等待三秒钟，然后打印出更多文本。在我的机器（Windows XP 上的 Java 6）上，我看到了初始文本、暂停，然后是剩余的文本——所有这些都在子进程退出之前。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;

public class TestProcessBuilder
{
    public static void main(String args[])
    {
        try
        {
            String threeCommands[] = 
                { "cmd", "/c", 
                    "dir", // prints out text 
                    "&&",
                    "ping", "127.0.0.1", "-n", "3", ">", "nul", // waits 3 seconds
                    "&&",
                    "dir" // prints out more text
                };
            ProcessBuilder builder = new ProcessBuilder(threeCommands);
            builder.directory(new File("C://"));
            builder.redirectErrorStream();

            Process subProcess = builder.start();

            // this reads from the subprocess's output stream
            BufferedReader subProcessInputReader = 
                new BufferedReader(new InputStreamReader(subProcess.getInputStream()));

            String line = null;
            while ((line = subProcessInputReader.readLine()) != null)
                System.out.println(line);

            subProcessInputReader.close();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

# javascript - javascript/jquery 表示某事是一个变量

> ID：15859396
> 
> 赞同：0
> 
> 时间：2013-04-07T05:58:43.370
> 
> 标签：javascript, jquery, json, variables

我有一个将用户数据注入 html 文件的函数

json格式是这样的：

```
{"Fname":"abc","LName":"cdf", "Phone":"123456";} 
```

这是一个将数据注入 html 文件的函数：

```
function injectData(data){
    $.each(data, function(key, value) { 

    //notice that in the "data.value", I want 'value' to be a variable
    //so that when I loop over the array, data.value will become data.Fname,
    //and then data.LName and then data.Phone   
        $("#"+key).html(' ' + data.value +'');
}); 
```

如何在调用 data.value 之前强制 javascript 将“值”解释为变量，以便从 JSON 对象中获取实际值？这有点令人困惑。希望你能理解。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:03:27.867

写一些类似的东西：

```
for(key in data){ $("#"+key).html(' ' + data[key] +''); }); 
```

# php - 简单的 HTML DOM 解析器返回错误的元素树

> ID：15859404
> 
> 赞同：0
> 
> 时间：2013-04-07T05:59:31.977
> 
> 标签：php, html, simple-html-dom

我遇到了 HTML DOM 解析器的问题。这是我使用的：

```
$url = 'http://topmmanews.com/2013/04/06/ufc-on-fuel-tv-9-results/';

$page = file_get_html($url);

$ret = $page->find("div.posttext",0); 
```

应该返回我 count($ret->children()) = 10。但是，它只返回 3，即第 3 个之后的所有元素

合并到其中并仅创建一个元素。

谁能帮我知道我的代码是否有问题或者是简单的 HTML DOM 解析器错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:45:58.537

正如所`Álvaro G. Vicario`指出的，您的目标 HTML 格式不正确。我尝试了您的代码，但正如您在此处看到的，它显示了三个子节点和 6 个其他节点：

![在此处输入图像描述](https://i.stack.imgur.com/tq5ar.png)

但是另一种可能有用的方法是使用[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)并且[`DOMXPath`](http://php.net/manual/en/class.domxpath.php)像这样：

```
$url = 'http://topmmanews.com/2013/04/06/ufc-on-fuel-tv-9-results/';
$html = file_get_contents($url);
$dom = new DOMDocument();
$dom->loadHTML($html);

$dom_xpath = new DOMXpath($dom);

// XPATH to return the first DIV with class "posttext"
$elements = $dom_xpath->query("(//div[@class='posttext'])[1]"); 
```

然后您可以遍历子节点并读取值或您想要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:05:30.377

phpquery 使用 DOM，因此它是一个更可靠的解析器，但 html 错误：

```
$html = file_get_contents('http://topmmanews.com/2013/04/06/ufc-on-fuel-tv-9-results/');
$dom = phpQuery::newDocumentHTML($html);
$ret = $dom->find("div.posttext")->eq(0);
echo count($ret->children());
#=> 10 
```

# visual-c++ - 像在 msvc 中一样在 emacs 中打开包含文件（visual c++）

> ID：15859405
> 
> 赞同：2
> 
> 时间：2013-04-07T05:59:35.440
> 
> 标签：visual-c++, emacs, ide, include

MSVC Visual c++ 允许您右键单击#include 指令头文件 (.h) 并选择“打开文档”。这使得浏览源代码变得轻而易举，因为它将整个源代码树基本上变成了一个超链接网站。emacs 是否提供这种便利？是否有其他设备可以自动浏览源代码、您编写的任何代码、创建任何项目？Xcode 有吗？日食吗？有什么事吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T06:13:13.253

`C-c C-o`，它运行命令[`ff-find-other-file`](https://git.savannah.gnu.org/cgit/emacs.git/tree/lisp/find-file.el)，是你正在寻找的。当点在线时，它将打开包含的文件`#include`。

谷歌搜索`emacs code browsing`也显示

*   [ECB](http://ecb.sourceforge.net/)（[Emacs 代码浏览器](http://emacswiki.org/emacs/EmacsCodeBrowser)）
*   [我怎样才能最好地在 Emacs 中浏览源代码？](https://stackoverflow.com/q/4071919/850781)
*   [Emacs 中的代码浏览、重构、自动完成](https://stackoverflow.com/q/671412/850781)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T07:24:23.283

您可以使用[语义智能跳转](https://www.gnu.org/software/emacs/manual/html_node/semantic/Smart-Jump.html#Smart-Jump)，将光标移动到#include行，然后执行命令`semantic-ia-fast-jump`，该命令通常用于跳转到符号，也可以跳转到包含文件。

作为使用的先决条件`semantic-ia-fast-jump`，您需要在[ede 项目](https://www.gnu.org/software/emacs/manual/html_node/ede/ede_002dcpp_002droot.html)中管理您的代码，这里是 C/C++ 项目的示例

假设你的目录结构是这样的：

```
~/myproject/
  |-include/test.h
  |-src/test.c
  |-Makefile 
```

和你的ede项目配置

```
(ede-cpp-root-project "MyProject"
    :file "~/myproject/Makefile"
    :include-path '( "/include" )
    :system-include-path '( "/usr/include/mysql/" ) 
```

测试.c

```
#include <mysql.h>
#include "test.h" 
```

现在，将光标移动到 test.c 中的两行之一，运行`semantic-ia-fast-jump`

# ajax - 为什么 Yii ajax 请求包含一个名为 '_' 的附加参数？

> ID：15859407
> 
> 赞同：0
> 
> 时间：2013-04-07T06:00:10.520
> 
> 标签：ajax, yii

我使用以下代码：

```
echo CHtml::dropDownList('book', 0, CHtml::listData($books,'id','title'),
                     array(
                        'ajax' => array(
                        'type'=>'GET', 
                        'url'=>$this->createUrl('book/allcatalog'), 
                        'data'=>array('book'=>'js:this.value'),
                        'dataType'=>'json',
                        'success'=>'js:function(data){
                            console.log(data);
                        }'
                    ))); 
```

使用 firebug，我发现 ajax 请求是“www.xxxx.com/index.php/book/allcatalog?book=1&_=1365306810200”。为什么会有参数_=1365306810200？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:55:04.547

感谢 DCoder 的帮助。

[最后，我从JQuery.ajax()](http://api.jquery.com/jQuery.ajax/)文档中找到了这个问题的解释。

> 缓存（默认：true，对于 dataType 'script' 和 'jsonp' 为 false） 类型：Boolean 如果设置为 false，它将强制浏览器不缓存请求的页面。注意：将缓存设置为 false 仅适用于 HEAD 和 GET 请求。它通过将“_={timestamp}”附加到 GET 参数来工作。其他类型的请求不需要该参数，除非在 IE8 中对已由 GET 请求的 URL 进行 POST。

也就是说，额外的'_'请求参数是由jquery产生的，默认为cache=true。

# javascript - document.getelementbyid 与 dom.byid

> ID：15859408
> 
> 赞同：2
> 
> 时间：2013-04-07T06:00:11.163
> 
> 标签：javascript, dojo

这是一些代码

```
 var docDiv= document.getElementById("divId");

  var dojoDiv= dom.byId("divId"); 
```

javascript 的 document.getelementbyid 和 dojo 的 dom.byid 有什么区别。这是一个更快。如果你想使用 dom 我们需要加载 dojo.js。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:08:10.390

这是 Dojo 的 dom.byId 的非 IE 版本：

```
dom.byId = function(id, doc){
            // inline'd type check.
            // be sure to return null per documentation, to match IE branch.
            return ((typeof id == "string") ? (doc || win.doc).getElementById(id) : id) || null; // DOMNode
        }; 
```

您会注意到它使用 getElementById。

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:03:37.867

我认为 `document.getElementById()`比`dom.byId()`dojo 在内部使用 `document`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T06:07:58.187

来自dojo github代码[https://github.com/dojo/dojo/blob/master/dom.js#L51](https://github.com/dojo/dojo/blob/master/dom.js#L51)，`document.getElementById`内部使用

```
dom.byId = function(id, doc){
    // inline'd type check.
    // be sure to return null per documentation, to match IE branch.
    return ((typeof id == "string") ? (doc || win.doc).getElementById(id) : id) || null; // DOMNode
}; 
```

使用`document.getElementById`，我们可以避免调用这个`dom.byId`函数！..但性能差异非常小

我更喜欢`dom.byId`，因为它使用起来很短。否则我必须`document.getElementById`在每个地方都写很长！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T09:42:01.537

`document.getElementById()`比 快`dom.byId()`。因为`dom.byId()`需要加载dojo核心文件。

# c++ - 构造函数和 initializer_list

> ID：15859409
> 
> 赞同：3
> 
> 时间：2013-04-07T06:00:53.977
> 
> 标签：c++, c++11, g++, initializer-list

有人能告诉我这背后的理论吗？

为什么最后一次调用不编译？

> test.cc：在函数'int main（）'中：test.cc：15：12：错误：'int'[-fpermissive] test.cc：15：12的初始化器周围的大括号太多：
> 
> 错误：从 '' 到 'int' [-fpermissive] test.cc:9:6 的无效转换：错误：初始化 'void f(std::initializer_list)' [-fpermissive] test.cc:15:12 的参数 1 ：
> 
> 错误：在需要整数的地方使用了聚合值

我认为c ++ 11或g ++ 4.7在这方面被打破了。谢谢！

```
#include <initializer_list>

class A { 
  public:
  A(const std::initializer_list<int>) {}
};

void f(const std::initializer_list<int>) {}

int main() {
  A({1});  // Compile OK
  f({1});  // Compile OK
  A({{{1}}});   // Compile OK
  //f({{{1}}}); // Compile Error.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:15:03.903

这就是我认为 GCC 的想法。

这是你的程序，多出 1 行，有趣的行被编号。

```
int main() {
  A({1});  // 1\. Compile OK
  f({1});  // 2\. Compile OK
  A{{1}};  // 3\. Compile OK, equivalent to 1\. 
  A({{{1}}});   // 4\. Compile OK
  //f({{{1}}}); // 5\. Compile Error.
} 
```

为什么 GCC 编译 4 而不是 5？

为清楚起见，假设 #4 的构造实际上声明了一些东西：

```
A a{{{1}}};   // 4a. Compile OK 
```

GCC 询问构造函数的参数是否`{{1}}`可以隐式转换为`A`. 也是这样：

```
A{{1}} 
```

`{{1}}`从到的有效转换`A`？是的 - 根据 3。

当然，这个推理不适用于#5；因此错误。

如果要阻止 GCC 接受 #4，则通过显式启用构造函数来阻止启用转换：

```
class A { 
    public:
    explicit A(const std::initializer_list<int> il) {}
}; 
```

然后＃4将给出错误：

```
error: converting to ‘A’ from initializer list would use explicit constructor ‘A::A(std::initializer_list<int>)’ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T08:42:03.477

{1} 可以初始化一个 int。{{1}} 可能不应该 - 委员会对此有缺陷报告。GCC 禁止这样做，而 clang 目前只是倾向于发出有关冗余大括号的警告。

当 X 是具有复制或移动构造函数的类时，X ({...}) 可以调用其中一个。请注意， X {...} 也可以，但仅限于不允许用户定义的转换（对于复制或移动构造函数）。

现在使用您的 A ({{{1}}})，第一个大括号被复制/移动构造函数使用。第二个递归地进入初始化列表。第三个进入包含的 int。

根据标准，再添加一个大括号将破坏 A ({{{{1}}}})。因为第二个大括号需要由 A 的复制/移动构造函数使用，但需要用户定义的转换序列。A {{{{1}}}} 也是如此，因此也无效。

# .net - WCF 请求拦截器 - 不再支持？

> ID：15859410
> 
> 赞同：2
> 
> 时间：2013-04-07T06:01:03.663
> 
> 标签：.net, wcf, authorization

我一直在尝试为我的 WCF 服务获取一些自定义身份验证代码，并发现一种方法是通过[REST Starter Kit](http://msdn.microsoft.com/en-us/library/ee391967.aspx)中的 RequestInterceptor 。不过，自从文章发表以来，微软似乎做了一些内部重构，将 Microsoft.ServiceModels.Web 移到了 System.ServiceModels.Web。此命名空间中没有 RequestInterceptor 类，我在文档中找不到对它的任何引用。

有谁知道这样做的最佳做法是什么？我需要将身份验证/授权添加到我的 API 的一部分。

谢谢，
泰加

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T09:44:25.583

我建议你看看 IDispatchMessageInspector 和[IClientMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iclientmessageinspector.beforesendrequest.aspx)

# java - 聊天客户端/服务器 - 如何指示客户端接受来自控制台或服务器的输入

> ID：15859411
> 
> 赞同：0
> 
> 时间：2013-04-07T06:01:07.337
> 
> 标签：java, client-server, client-side

你如何编写一个聊天客户端，以便它同时监听来自服务器和控制台的输入？这是我当前的客户端，它成功发送到服务器并接受来自服务器的输入。正如您所看到的，它没有任何代码可以使它成功地侦听和接受来自控制台的输入，同时也可以打开来自服务器的输入。服务器输入将是来自其他聊天客户端的消息。从任何聊天客户端发送的消息都会广播到所有其他客户端。我对 Java 还是很陌生，即使我感觉答案会非常明显，但我完全被困住了。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

public class ChatClientMain
{
    public static void main(String[] args) throws UnknownHostException, IOException
    {
        //DNS of Chat Server
    final String HOST = "localhost";

    //Port number for chat server connection
    final int PORT = 6789;

    Socket serverSocket = new Socket(HOST, PORT);
    try
        {
        //Will need three streams for communication: console-client, client-server, server-client
        PrintWriter toServer = new PrintWriter(serverSocket.getOutputStream(), true);
        BufferedReader fromServer = new BufferedReader(new InputStreamReader(serverSocket.getInputStream()));
        BufferedReader fromUser = new BufferedReader(new InputStreamReader(System.in));

        //User must be logged in; any username is acceptable
        System.out.print("Enter username > ");
        toServer.println("LOGIN " + fromUser.readLine());

                String serverResponse = null;
        while((serverResponse = fromServer.readLine()) != null)
        {
                    System.out.println("Server: " + serverResponse);
            if(serverResponse.equals("LOGOUT"))
            {
                System.out.println("logged out.");
            break;
            }

            System.out.print("command> ");
            toServer.println(fromUser.readLine());
        }

                toServer.close();
            fromServer.close();
            fromUser.close();
            serverSocket.close();

            }
        catch (IOException e)
        {
        e.printStackTrace();
        }
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:04:52.217

如果您的主线程正在侦听来自服务器的输入，您可以启动另一个线程来继续侦听来自控制台的输入。您必须确保正确处理输入。可以设置一些标志来指示输入是来自服务器还是来自控制台。

# php - 为动态变化的内容网站设置默认页面

> ID：15859413
> 
> 赞同：0
> 
> 时间：2013-04-07T06:01:11.727
> 
> 标签：php, javascript, html

请原谅我，因为我在 Web 开发方面还是个新手。:)

通常，当我创建我的网站时，我会创建一个名为 header.html 和 footer.html 的文件，并将这些文件包含到我的网页中以保持一致，这样我只需更改一次数据，然后添加任何必要的代码。（例如：index.php）

```
<?php
include ('includes/header.html');
include ('html/index.html');
include ('includes/footer.html');
//other php codes
?> 
```

现在我的问题是，在我的一个页面（food-menu.php）上，我有一个侧边栏，其中包含我已设置的链接，可以根据单击的链接检索页面 - 以及我目前正在使用的代码在检索动态内容方面。我唯一的问题是如何在该页面变为动态之前设置默认内容包括在该页面上？

侧边栏是这样的：

```
//Sidebar   
<section class="widget">
        <h3 class="title">Main Menu</h3>
        <ul>
            <li><a href="?link=1" name="link1" title="View all Cold Starters">Cold Starters</a></li>
            <li><a href="?link=2" name="link2" title="View all Hot Starters">Hot Starters</a></li>
            <li><a href="?link=3" name="link3" title="View all Charcoal Grilled">Charcoal Grilled</a></li>
            <li><a href="?link=4" name="link4" title="View all Chef's Special">Chef's Special</a></li>
        </ul>
</section> 
```

那么主文件是（food-menu.php :)

```
<?php
include ('includes/header.html');

$link = $_GET['link'];
if ($link == '1'){
    include 'html/cold-starters.html';
}
if ($link == '2'){
    include 'html/hot-starters.html';
}
if ($link == '3'){
    include 'charcoal-grilled.html';
}
if ($link == '4'){
    include 'chef-special.html';
}
include ('includes/menufooter.html');
?> 
```

文件的检索工作，但我如何设置一个默认的包含页面？就像将 ('html/cold-starters') 设置为他们转到 food-menu.php 网址时的第一页？因为到目前为止，我只包括页眉和页脚，但不包括默认内容页面。

谢谢专家！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:09:51.910

你可以这样修改你的代码：

```
$link = isset($_GET['link']) ? $_GET['link'] : 1; 
```

这里发生的情况是，如果你给了链接的参数，它会接受它，否则，它将采用默认值`1`。

# jquery - INPUT 中的第一个字母没有出现在 jQuery 的 $().keydown 中

> ID：15859419
> 
> 赞同：0
> 
> 时间：2013-04-07T06:02:24.423
> 
> 标签：jquery, ajax

我坚持了几个小时，我不明白为什么当我在输入中输入一个字母并调用 jQuery 的 $().keydown 并用**警告**它时`$(this).val()`，我输入的第一个字母不会显示up 但是当你再次输入一个字母时它会出现。

对此有什么解释吗？

```
<div class="mainboxforfriendfind">
    <div class="findfriend">
        <input type="text" id="findtext" name="friendfinder" placeholder="Enter Text to find a friend"/>
        <button id="buttonfriend" class="findfriendbutton"></button>
    </div>
    <div class="outputfindfriend">  
    </div>
</div>
<script>
    $("#findtext").keydown(function () {
        alert($(this).val());
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:03:33.743

使用 keyup 而不是 keydown

```
$("#findtext").keyup(function () {

    alert($(this).val());

}); 
```

# excel - Excel VBA嵌套使用命名范围的每个循环

> ID：15859421
> 
> 赞同：-2
> 
> 时间：2013-04-07T06:02:30.080
> 
> 标签：excel, foreach, named-ranges, vba

有没有人发现使用嵌套的 For Each 循环给定的命名范围一个障碍？

这是我试图使其工作的情况，认为既然命名范围可以帮助（对我）知道哪个属于什么。

虚构业务的要求有一个程序名称 [名为 ListofPrograms]，它被分配一种颜色（有 9 个），每天 [名为 ListofDates]（超过 10 天）随机分配数量的澳大利亚奶牛 [名为 ListofCows]（out 5) 被放置在彩色程序中，供学生兽医测试，以向他们的老师展示他们的学术研究和临床成果。

这里是我如何做到这一点的 VBA 代码。我现在使用 Debug.Print，因为我不确定如何以这种方式成功填充 Sheets("Outcome")。

```
 Option Explicit
Sub CowsGenerator()
Dim Programrng, Daterng, Cowsrng As Range

With Sheets("Outcome")
    For Each Programrng In Range("ListofPrograms")
            For Each Daterng In Range("ListofDates")
                    For Each Cowsrng In Range("ListofCows")
                        Debug.Print Programrng.Value, Daterng.Value, Cowsrng.FormulaR1C1 = "=RANDBETWEEN(1,5)"
                    Next Cowsrng
            Next Daterng
    Next Programrng
End With
End Sub 
```

这是立即窗口中显示的片段。

```
 6             1            False
 6             1            False
 6             2            False
 6             2            False
 6             2            False
 6             2            False
 6             2            False
 6             3            False
 6             3            False 
```

我不认为 False 是 RANDBETWEEN 的一个好的回应，我注意到它从 6 开始，而不是从 1 开始。

任何建议我可以如何改进这一点，谢谢，彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:39:09.827

您将进入即时窗口的所有内容都是检查公式R1C1 是否等于字符串“=RANDBETWEEN(1,5)”。我怀疑这不是您需要的，您想要一个介于 1 和 5 之间的随机数。

`debug.print`如果您需要存储您的价值，请使用以下内容：

```
Cowsrng.FormulaR1C1 = "=RANDBETWEEN(1,5)"
Debug.Print Programrng.Value, Daterng.Value, Cowsrng.Value 
```

或者，如果您不需要保存的值：

```
Debug.Print Programrng.Value, Daterng.Value, Application.workbookfunction.randbetween(1,5) 
```

# java - 如何将多字输入读入一个字符串？

> ID：15859429
> 
> 赞同：0
> 
> 时间：2013-04-07T06:03:03.290
> 
> 标签：java

如何读取用户输入，一次一行来创建一个对象。然后哪个进入ArrayList？如您所见，当我输入名称时，它会将其分解并仅存储姓氏。或者如果我这样做：first-middle-last name，它存储中间名和姓氏。

我第一次输入名字，先调用search方法，看看这个名字是否已经存在于ArrayList中。这很好用。如果名称不在列表中，则搜索返回 null。然后提示输入和添加方法。

```
case 1: {
            System.out.print("Enter the Students name: ");
            String nameSearch = kbd.next();
            Student stu = dc.search(nameSearch );
            if (stu != null) {
                System.out.println(stu); 
            }
            else {
                System.out.print("Enter name AGAIN: ");
                String nameAdd= kbd.nextLine();

                System.out.print("Enter grade (freshman, sophomore, junior, senior: ");
                String categoryAdd = kbd.nextLine();

                System.out.print("Major: ");
                String majorAdd = kbd.nextLine();

                System.out.print("Enter graduating year: ");
                int yearAdd = kbd.nextInt();

                System.out.print("Enter student ID: (xxxx.xxxx: ");
                double idAdd= kbd.nextDouble();

                dc.add(nameAdd, categoryAdd , majorAdd , 
                        yearAdd , idAdd);
            }
            break;
        } 
```

我的输入：

```
Enter the Students name: John Smith
Not Found(Search Method)
TEST
Enter name AGAIN: TEST2
Enter grade (freshman, sophomore, junior, senior: senior
Major: Computer Science
Enter graduating year: 2013
Enter student ID: 1234.4567 
```

当我打印 ArrayList 时它是如何存储在对象中的：

```
Name: Smith
Grade: senior
Major: Computer Science
Graduating Year: 2013
Student ID: 1234.4567 
```

添加方法：

```
public Student add(String name, String grade,
        String major, int year, double id) {
    Student newStu = new Student(addName, addGrade, addMajor, addYear, addId);
    studentList.add(newStu );
    System.out.println("Added!");
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:06:04.257

应该是`String nameSearch = kbd.nextLine();`。我阅读了多行java教程。希望这可以帮助。某种程度上来说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:05:58.977

这一行：

```
String nameSearch = kbd.next(); 
```

应该是

```
String nameSearch = kbd.nextLine(); 
```

正确的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T07:08:21.820

使**kbd**成为**BufferedReader**（例如`BufferedReader kbd = new BufferedReader(new InputStreamReader(System.in));`），然后执行此操作...

```
case 1: {
            System.out.print("Enter the Students name: ");
            String nameSearch = kbd.readLine();
            Student stu = dc.search(nameSearch );
            if (stu != null) {
                System.out.println(stu); 
            }
            else {
                System.out.print("Enter name AGAIN: ");
                String nameAdd= kbd.readLine();

                System.out.print("Enter grade (freshman, sophomore, junior, senior: ");
                String categoryAdd = kbd.readLine();

                System.out.print("Major: ");
                String majorAdd = kbd.readLine();

                System.out.print("Enter graduating year: ");
                int yearAdd = Integer.parseInt(kbd.readLine());

                System.out.print("Enter student ID: (xxxx.xxxx: ");
                double idAdd= Double.parseDouble(kbd.readLine());

                dc.add(nameAdd, categoryAdd , majorAdd , 
                        yearAdd , idAdd);
            }
            break;
        } 
```

# scala - StackOverflowError 用于 Scala 中的硬币变化？

> ID：15859432
> 
> 赞同：8
> 
> 时间：2013-04-07T06:03:28.230
> 
> 标签：scala

我正在为Scala中的[Coin (change) 问题编写递归函数。](http://en.wikipedia.org/wiki/Coin_problem)

我的实现因 StackOverflowError 而中断，我无法弄清楚它为什么会发生。

```
Exception in thread "main" java.lang.StackOverflowError
    at scala.collection.immutable.$colon$colon.tail(List.scala:358)
    at scala.collection.immutable.$colon$colon.tail(List.scala:356)
    at recfun.Main$.recurs$1(Main.scala:58) // repeat this line over and over 
```

这是我的电话：

```
 println(countChange(20, List(1,5,10))) 
```

这是我的定义：

```
def countChange(money: Int, coins: List[Int]): Int =  {

  def recurs(money: Int, coins: List[Int], combos: Int): Int = 
  {    
      if (coins.isEmpty)
          combos
      else if (money==0)
          combos + 1
      else
          recurs(money,coins.tail,combos+1) + recurs(money-coins.head,coins,combos+1)

  }
  recurs(money, coins, 0)
} 
```

编辑：我刚刚在混合中添加了 else if 语句：

```
else if(money<0)
    combos 
```

它摆脱了错误，但我的输出是 1500 东西 :( 我的逻辑有什么问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-27T00:25:18.310

[如Paaro所述，已](https://stackoverflow.com/a/19061468/458193)[接受答案](https://stackoverflow.com/a/15862778/458193)中的第一个解决方案具有多余的最后一个参数，因此我想摆脱它。我想避免使用第二种解决方案，因为它尚未在第 1 周或我假设您正在学习的 Scala 课程中涵盖。此外，正如作者正确指出的那样，第二种解决方案会慢得多，除非它使用一些记忆。最后，[Paaro 的解决方案](https://stackoverflow.com/a/19061468/458193)似乎有一个不必要的嵌套函数。 `map`

所以这就是我最终的结果：

```
def countChange(money: Int, coins: List[Int]): Int =
  if (money < 0)
    0
  else if (coins.isEmpty)
    if (money == 0) 1 else 0
  else
    countChange(money, coins.tail) + countChange(money - coins.head, coins) 
```

如您所见，这里不需要大括号。

我想知道它是否可以进一步简化。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-07T13:14:09.937

这是基于您的代码的正确解决方案：

```
def countChange(money: Int, coins: List[Int]): Int = {
  def recurs(m: Int, cs: List[Int], cnt: Int): Int =
      if(m < 0) cnt  //Not a change, keep cnt
      else if(cs.isEmpty) {
        if(m == 0) cnt + 1 else cnt // plus cnt if find a change
      }
      else recurs(m, cs.tail, cnt) + recurs(m-cs.head, cs, cnt)
  recurs(money, coins, 0)
} 
```

无论如何，有一个简短的解决方案（但效率不高，您可以缓存中间结果以使其高效。）

```
def countChange(m: Int, cs: List[Int]): Int = cs match {
  case Nil => if(m == 0) 1 else 0
  case c::rs => (0 to m/c) map (k => countChange(m-k*c,rs)) sum
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-27T23:15:17.050

可以省略 cnt 参数，实际上它是从不累加的。recurs 函数总是返回 0 或 1，因此优化的算法将是：

```
def countChange(money: Int, coins: List[Int]): Int = {
  def recurs(m: Int, cs: List[Int]): Int =
      if(m < 0) 0  //Not a change, return 0
      else if(cs.isEmpty) {
        if(m == 0) 1 else 0 // 1 if change found, otherwise 0
      }
      else recurs(m, cs.tail) + recurs(m-cs.head, cs)
  if(money>0) recurs(money, coins) else 0
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-20T17:27:23.797

@Eastsun 解决方案很好，但是当 money=0 时它会失败，因为它返回 1 而不是 0，但您可以轻松修复它：

```
def countChange(money: Int, coins: List[Int]): Int = {
  def recurs(m: Int, cs: List[Int], cnt: Int): Int =
      if(m < 0) cnt  //Not a change, keep cnt
      else if(cs.isEmpty) {
        if(m == 0) cnt + 1 else cnt // plus cnt if find a change
      }
      else recurs(m, cs.tail, cnt) + recurs(m-cs.head, cs, cnt)
  if(money>0) recurs(money, coins, 0) else 0
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-27T16:14:54.123

这是一种DP方法，可以减少递归方法中的大量重新计算

```
object DP {
  implicit val possibleCoins = List(1, 5, 10, 25, 100)
  import collection.mutable.Map

  def countChange(amount: Int)(implicit possibleCoins: List[Int]) = {
    val min = Map((1 to amount).map (_->Int.MaxValue): _*)
    min(0) = 0
    for {
      i <- 1 to amount
      coin <- possibleCoins
      if coin <= i && min(i - coin) + 1 < min(i)
    } min(i) = min(i-coin) + 1
    min(amount)
  }

  def main(args: Array[String]) = println(countChange(97))
} 
```

看[DP从新手到高级](https://www.topcoder.com/community/data-science/data-science-tutorials/dynamic-programming-from-novice-to-advanced/)算法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-23T16:37:02.387

[来自https://github.com/pathikrit/scalgos/blob/9e99f73b4241f42cc40a1fd890e72dbeda2df54f/src/main/scala/com/github/pathikrit/scalgos/DynamicProgramming.scala#L44](https://github.com/pathikrit/scalgos/blob/9e99f73b4241f42cc40a1fd890e72dbeda2df54f/src/main/scala/com/github/pathikrit/scalgos/DynamicProgramming.scala#L44)的想法

```
case class Memo[K,I,O](f: I => O)(implicit i2k:I=>K ) extends (I => O) {
  import scala.collection.mutable.{Map => Dict}
  val cache = Dict.empty[K, O]
  override def apply(x: I) = cache getOrElseUpdate (x, f(x))
}
def coinchange(s: List[Int], t: Int) = {
  type DP = Memo[ (Int, Int), (List[Int], Int),Seq[Seq[Int]]]
  implicit def encode(key: (List[Int], Int)):(Int,Int) = (key._1.length, key._2)

  lazy val f: DP = Memo {
    case (Nil, 0) => Seq(Nil)
    case (Nil, _) => Nil
    case (_, x) if x< 0  => Nil
    case (a :: as, x) => f(a::as, x - a).map(_ :+ a) ++ f(as, x)
  }

  f(s, t)
} 
```

# c++ - 同时等待套接字和 bool var 的便携式 C++11 方法

> ID：15859437
> 
> 赞同：4
> 
> 时间：2013-04-07T06:03:59.000
> 
> 标签：c++, windows, multithreading, sockets, c++11

我有一个无限循环的线程，它接收和处理来自套接字的数据。我希望该线程阻塞（睡眠），直到数据在套接字上可供读取或“退出”布尔变量变为真（由不同的线程设置）。*是否可以在不*轮询和使用任何第三方库（当然套接字库除外）的情况下以可移植的方式做到这一点？如果不可能以可移植的方式进行，那么在 Windows 下最好的方法是什么（仍然没有轮询和第三方库）？

示例代码：

```
bool exit = false; // or "std::atomic<bool> exit" or anything else
void fn()
{
    SOCKET s;
    // init socket, establish connection, etc
    for(;;)
    {
        // This thread goes to wait (blocks) until data becomes available on socket
        // OR exit var is set to true (by a different thread) - how?
        if(exit) break;
        // receive and process data from socket
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:51:42.007

设置消息队列。

这些消息的格式为“PleaseExit”或“DataOnSocket”。

当队列中出现任何内容时，您的线程或任务将被激活，处理队列，然后再次等待队列。如果它得到“请退出”，它就会开始清理。

可能您将不得不在条件变量和套接字上等待不同的线程/任务，以将信息传送到您的统一队列。

我说“线程或任务”，因为有一个专用于等待的整个线程是矫枉过正的。遗憾的是，C++11 线程并不能完美地[支持开箱即用的轻量级任务。](http://bartoszmilewski.com/2011/10/10/async-tasks-in-c11-not-quite-there-yet/)

基本上，该解决方案允许线程通过将每个事件的等待委托给其他线程来等待多个事件，这些线程“向上”发送通知。你可以想象创建一个通用的基础设施，你的线程想要等待多个对象告诉调度中心它在等待什么，然后等待它自己的条件条件变量。

调度中心等待你的线程想要等待的每一件事，当它们发生时继续确定应该通知哪些线程，然后通知它们。

远非理想，但它确实让您在完全符合标准的 C++11 领域中做到这一点。并且可以为您提供一个界面，类似于 Windows 中的“等待多个对象”。（事实上​​，在 Windows 上，如果`native_handle`您的 C++11 同步原语适用，您可以取消大部分机器）。

# javascript - 重写全局 alert() 函数在 Tampermonkey 中不起作用

> ID：15859439
> 
> 赞同：2
> 
> 时间：2013-04-07T06:04:12.123
> 
> 标签：javascript, greasemonkey, alert, tampermonkey

在 Greasemonkey 中，我可以重写全局`alert()`函数：

```
window.alert = function() {...} 
```

它可以在任何地方工作。
但是，在 Tampermonkey (Chrome) 中，它只适用于它自己的脚本。

为什么？我可以让它在全球范围内运作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T07:24:05.007

实际上，这有时只会在 Greasemonkey 中起作用。[授权模式](http://wiki.greasespot.net/@grant)必须是`none`——我不建议这样做。正如您所发现的，意外触发该模式会导致脚本无法移植——以及超出此问题范围的其他罪过。

要使此代码在 Tampermonkey（以及 Greasemonkey 上）上工作，请使用[unsafeWindow](http://forum.tampermonkey.net/viewtopic.php?t=74)，如下所示：

```
// ==UserScript==
// @name     _YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @grant    unsafeWindow
// ==/UserScript==

unsafeWindow.alert = function() {...} 
```

**或者，**使用[此答案](https://stackoverflow.com/a/13485650/331508)中所示的*脚本注入*。

* * *

* * *

该`@grant unsafeWindow`指令用于 Greasemonkey - 恢复沙箱并允许使用`unsafeWindow`. 这使得相同的脚本在 Tampermonkey 和 Greasemonkey 中以相同的方式工作。

# android - 在android中绘制多个位图时ImageView或opengl-es之间的性能

> ID：15859444
> 
> 赞同：1
> 
> 时间：2013-04-07T06:05:34.587
> 
> 标签：android, opengl-es

我要在屏幕上绘制多个位图（图像将在线加载并相应更改）。

我可以使用 ImageView 或 opengl-es 显示它们，所以现在我想知道它们之间是否有任何性能差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:10:00.300

不久前我也有同样的问题。我决定使用 ImageView 小部件，仅仅是因为我试图避免 OpenGLES 的复杂性。ImageView 类非常快，后来我会发现原因：至少在我的设备（Nexus 4 和 Nexus 7）上，ImageView 是使用 OpenGLES 在后台实现的。当我的设备在代码更改一天后开始流式传输 OpenGL 渲染错误时，我发现了这一点。

所以最后我不得不深入研究 OpenGLES 并且无法避免它。

# java - 你如何将字符串从一个活动传递到另一个活动？

> ID：15859445
> 
> 赞同：1
> 
> 时间：2013-04-07T06:05:39.353
> 
> 标签：java, android, string, android-activity

我想知道如何从另一个活动中传递和读取一个活动中的字符串。我有两个活动。我将它们称为 Activity1 和 Activity2。我在 Activity1 中有一个名为`course`. 我想在 Activity2 中读取该字符串。

我试过这样做，但字符串是空的。

`public class Activity2 extends Activity1 {`

我见过人们使用 Intent 功能，但我不知道如何使用它。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T06:10:55.193

使用意图传递值。

在你的第一个活动中

```
 Intent i= new Intent("com.example.secondActivity");
 i.putExtra("key",mystring);
 // for explicit intents 
 // Intent i= new Intent(ActivityName.this,SecondActivity.class);    
 // parameter 1 is the key
 // parameter 2 is the value 
 // your value
 startActivity(i); 
```

在您的第二个活动中检索它。

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
String value = extras.getString("key");
//get the value based on the key
} 
```

要传递自定义对象，您可以查看此链接

[http://www.technotalkative.com/android-send-object-from-one-activity-to-another-activity/](http://www.technotalkative.com/android-send-object-from-one-activity-to-another-activity/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T06:14:36.837

你的第一个活动，`Activity1`

```
public class Activity1 extends Activity {
    Button btn;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity1);

        btn=(Button) findViewById(R.id.payBtn);
        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Intent intent=new Intent(Activity1.this,Activity2.class);
                intent.putExtra("course", "courseValue");
                startActivity(intent);
            }
        });
    }
}

Activity2
public class Activity2 extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity2);

        String course=getIntent().getExtras().getString("course").toString();
        Log.d("course",course);
    }
} 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T06:09:58.983

您走在正确的轨道上 - 您正在使用意图来启动第二个活动。您所要做的就是添加`intent.putExtra("title", stringObject);`其中 stringObject 是您要传递的字符串，并且 title 是您要赋予该对象的名称。您可以使用该名称来引用第二个活动中传递的对象，如下所示：

```
String s = (String)getIntent().getExtras().getSerializable("title"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T06:14:42.510

从 Activity 1 调用这样的东西：

```
Intent intent= new Intent("path.secondActivity");
intent.putExtra("keyString",sampleString);
startActiivty(intent); 
```

在活动 2 中尝试这样的事情：

```
Bundle values = getIntent().getExtras();
if (values != null) {
    String keyString = values.getString("keyString");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-07T06:35:24.383

在你的 MainActivity

```
Intent i= new Intent(MainActivity.this,SecondActivity.class);
i.putExtra("key",yourstring);
startActiivty(i); 
```

在你的第二个活动 onCreate()

```
Bundle extras = getIntent().getExtras();
if (extras != null) { 
String value = extras.getString("key");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T06:08:05.870

试试这个

公共类 Activity2 扩展了 Activity1

# php - PHP 日志文件时区

> ID：15859451
> 
> 赞同：1
> 
> 时间：2013-04-07T06:06:08.330
> 
> 标签：php, timestamp-with-timezone

我正在玩 FengOffice 项目，我是 PHP 的初学者。我想将日志从 GMT 更改为香港时间。但即使我设置

```
[日期]
date.timezone = "Asia/Hong_Kong"

```

或者

```
[日期]
date.timezone = Asia/Hong_Kong

```

PHP 日志仍然显示 GMT 时间，应用程序日志也是如此。

我还尝试在代码中更改时区：

```
ini_set('date.timezone', 'Asia/Hong_Kong');
if(function_exists('date_default_timezone_set')) {
    date_default_timezone_set('Asia/Hong_Kong');
} else {
    putenv('TZ=Asia/Hong_Kong');
} 
```

但没有任何效果。任何人都可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T19:05:53.630

根据[PHP Bug 60723](https://bugs.php.net/bug.php?id=60723 "PHP 错误 60723")，它于 2012 年 10 月修复，应该在 PHP v5.3.18 和 v5.4.8 中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:09:52.667

日志文件不是由 PHP 编写的，而是由`syslog`

这以前在这里被报告为错误：[https ://bugs.php.net/bug.php?id=45191](https://bugs.php.net/bug.php?id=45191)

> 这个是正常的。错误日志不是PHP*写的，而是 syslog 写的。*Syslog 不关心 PHP 的内部时区，因此根据系统时区格式化日志消息。如果不正确，只需更改系统时区。

是 PHP 开发人员收到的响应。要更改日志中的时区，您必须更改系统时间。^^

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T06:10:08.483

```
<?php
date_default_timezone_set('America/Los_Angeles');

$script_tz = date_default_timezone_get();

if (strcmp($script_tz, ini_get('date.timezone'))){
    echo 'Script timezone differs from ini-set timezone.';
} else {
    echo 'Script timezone and ini-set timezone match.';
}
?> 
```

而不是这样做

# c# - Entity Framework 5 - 派生类的基于枚举的鉴别器

> ID：15859452
> 
> 赞同：11
> 
> 时间：2013-04-07T06:06:22.700
> 
> 标签：c#, .net-4.0, ef-code-first, entity-framework-5

我有以下内容（为清楚起见而缩写） - 一个枚举，一个具有该枚举的基类，以及两个将枚举设置为特定值的派生类。

```
public enum MyEnum
{ 
    Value1, Value2
}

public class MyBaseClass
{ 
    public MyEnum { get; protected set; }
}

public class DerivedOne: MyBaseClass
{
    public DerivedOne { MyEnum = MyEnum.Value1; } 
}

public class DerivedTwo: MyBaseClass
{
    public DerivedTwo { MyEnum = MyEnum.Value2; }
} 
```

我想做的是让 Entity Framework 5 自动区分 DerivedOne 和 DerivedTwo，**并使用基于 MyEnum 值的鉴别器**。我应该能够这样做，因为按照惯例，每个 MyEnum == MyEnum.Value1 代表 DerivedOne，而 MyEnum == MyEnum.Value2 代表 DerivedTwo。

我在我的 DbContext 中尝试了这个：

```
public class MyDbContext : DbContext
{
    DbSet<MyBaseClass> MyBaseClass { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<MyBaseClass>()
                    .Map<DerivedOne>(m => m.Requires(x => x.MyEnum == MyEnum.Value1));

        base.OnModelCreating(modelBuilder);
    }
} 
```

但是，这会引发以下 InvalidOperationException：

表达式 'x => (Convert(x.MyEnum) == 0)' 不是有效的属性表达式。表达式应该代表一个属性 (...)

**编辑：**我相信我使用这个更进一步：

```
modelBuilder.Entity<MyBaseClass>().Map<DerivedOne>(m => m.Requires("MyEnum")
                                  .HasValue((Int32)MyEnum.Value1)); 
```

现在我得到了这个 EntityCommandCompilationException：

从第 (...) 行开始映射片段时出现问题 条件成员 'MyBaseClass.MyEnum' 的条件不是 'IsNull=False' 被映射。删除 MyBaseClass.MyEnum 上的条件或将其从映射中删除。

关于如何解决这个问题的任何提示？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T16:43:40.037

据我所知，你不能这样做。明确`Requires`指定鉴别器只是为了给它一个`name`- 而不是将它连接到您的属性。

据我所知，这总是会导致您所描述的错误（稍后）。如果你想指定鉴别器，它必须是“自动”的（至少我从来没有设法这样定义它）

**但是你真的不需要那个**。“枚举”和鉴别器是`built into`您返回的类型 - 基于鉴别器值，EF/CF 正在构造“Base”或“DerivedOne”或 DerivedTwo。

因此，要实现您想要的，您可以执行以下操作...

```
public class MyBaseClass
{
    [NotMapped()]
    public virtual MyEnum MyEnum { get { return MyEnum.Base; } }
}

public class DerivedOne: MyBaseClass
{
    public string OneProp { get; set; }
    public override MyEnum MyEnum { get { return MyEnum.One; } }
}

public class DerivedTwo: MyBaseClass
{
    public string TwoProp { get; set; }
    public override MyEnum MyEnum { get { return MyEnum.Two; } }
} 
```

或者只是使用`is`（如果它适合你）......

```
if (entity is MyBaseClass) // instead of enum 
```

或查询...

```
.OfType<MyBaseClass>(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-11-25T14:16:32.350

从 EF Core 开始，您可以使用**Fluent API**直接使用*Enums*。如果您的*MyBaseClass*未映射（是一个抽象类），您可以删除描述基本鉴别器的第一个*HasValue行。**在ApplicationDbContext*中尝试下一个代码：

 *****```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<MyBaseClass>()
        .HasDiscriminator<MyEnum>("MyEnum")
        .HasValue<MyBaseClass>(MyEnum.Value0)
        .HasValue<DerivedOne>(MyEnum.Value1)
        .HasValue<DerivedTwo>(MyEnum.Value2);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-05T19:27:05.283

从 EF 6.1 开始，我实际上能够使用枚举作为鉴别器列，尽管存在以下错误：

> 附加信息：“MyEnum”类型的值不能用作类型鉴别器值。支持的类型包括 byte、signed byte、bool、int16、int32、int64 和 string。

我所要做的就是这样的：

```
public enum MyEnum
{ 
    Value1, Value2
}

public class MyBaseClass
{ 
    public MyEnum { get; protected set; }
}

public class DerivedOne: MyBaseClass
{
    public DerivedOne()
    {
        MyEnum = MyEnum.Value1;
    } 
}

public class DerivedTwo: MyBaseClass
{
    public DerivedTwo()
    {
        MyEnum = MyEnum.Value2;
    }
}

public class MyDbContext : DbContext
{
    DbSet<MyBaseClass> MyBaseClass { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations
            .Add(new DerivedOneConfiguration())
            .Add(new DerivedTwoConfiguration());
    }
}

public class DerivedOneConfiguration : EntityTypeConfiguration<DerivedOne>
{
    public DerivedOneConfiguration()
    {
        Map<DerivedOne>(_ => _.Requires("MyEnum").HasValue((int)MyEnum.Value1).IsRequired());
    }
}

public class DerivedTwoConfiguration : EntityTypeConfiguration<DerivedTwo>
{
    public DerivedTwoConfiguration()
    {
        Map<DerivedTwo>(_ => _.Requires("MyEnum").HasValue((int)MyEnum.Value2).IsRequired());
    }
} 
```

所以秘密是使用`(int)MyEnum.Value*`而不是`MyEnum.Value*`......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-01T20:29:15.073

基于@rsenna 的回答，但更新了基于 Microsoft 的 Fluent Api 原始文档的映射。

[https://msdn.microsoft.com/en-us/library/jj591617%28v=vs.113%29.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/jj591617%28v=vs.113%29.aspx?f=255&MSPPError=-2147217396)

```
public enum MyEnum
{ 
    Value1, Value2
}

public class MyBaseClass
{ 
    [NotMapped]
    public MyEnum MyEnum { get; protected set; }
}

public class DerivedOne: MyBaseClass
{
    public DerivedOne()
    {
        MyEnum = MyEnum.Value1;
    } 
}

public class DerivedTwo: MyBaseClass
{
    public DerivedTwo()
    {
        MyEnum = MyEnum.Value2;
    }
}

public class MyDbContext : DbContext
{
    DbSet<MyBaseClass> MyBaseClass { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<MyBaseClass>()
            .Map<DerivedOne>(x => x.Requires("MyEnum").HasValue((int)MyEnum.Value1))
            .Map<DerivedTwo>(x => x.Requires("MyEnum").HasValue((int)MyEnum.Value2));
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-20T21:15:58.223

我想知道添加第三个值来`MyEnum`表示基类是否会有所帮助。然后在构造函数中设置`MyBaseClass.MyEnum`为那个特定的“默认”`enum`值。

我认为 Table-per-heirarchy 结构需要每个类型都必须有一个有效的鉴别器。因此，您有 3 种类型：

1.  `MyBaseClass`
2.  `DerivedOne`
3.  `DerivedTwo`

即使您的应用程序永远不会在其基本形式中使用 MyBaseClass，EF 仍然需要一个有效的鉴别器映射。*****

# php - CasperJS/PhantomJS 比 Curl 慢得多

> ID：15859454
> 
> 赞同：7
> 
> 时间：2013-04-07T06:06:51.567
> 
> 标签：php, web-scraping, screen-scraping, phantomjs, casperjs

当我尝试`curl www.yelp.com`时，它需要 1.1 秒。然而，使用 CasperJS 检索页面需要一分钟！

这是正常的吗？我如何找出使 casper/phantom 变慢的原因？我怀疑 casper 没有遵循它的一些 HTTP 重定向？

```
var casper = require('casper').create();
var url = 'http://www.yelp.com';

casper.start(url);
casper.then(function() {
    console.log(  this.getHTML() );
    this.exit();
});

casper.run(); 
```

![在此处输入图像描述](https://i.stack.imgur.com/oe0qz.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:30:19.643

你在 Windows 上吗？如果是，则在使用自动代理时存在神秘的网络问题。有关详细信息，请参阅发行说明：http: [//phantomjs.org/release-1.9.html](http://phantomjs.org/release-1.9.html)。

一般来说，尝试分析网络请求和响应。跟踪网络流量的一种非常简单的方法：

```
page.onResourceRequested = function (request) {
  console.log('Request ' + JSON.stringify(request, undefined, 4));
};
page.onResourceReceived = function (response) {
  console.log('Receive ' + JSON.stringify(response, undefined, 4));
}; 
```

如果您想要时间等，您需要进一步调整它。阅读有关此[网络监控](https://github.com/ariya/phantomjs/wiki/Network-Monitoring)功能的文档。

# javascript - d3.js 圈子没有出现

> ID：15859457
> 
> 赞同：4
> 
> 时间：2013-04-07T06:07:14.137
> 
> 标签：javascript, d3.js

我正在完成本教程

[http://flowingdata.com/2012/08/02/how-to-make-an-interactive-network-visualization/](http://flowingdata.com/2012/08/02/how-to-make-an-interactive-network-visualization/)

我试图让更新节点正常工作（我的数据略有不同）。

```
var updateNodes = function(nodes){
console.log("updateNodes Called");
console.log(nodes);
var node = nodesG.selectAll("circle.node").data(nodes,function(d){
    return d.id;
});
node.enter().append("circle").attr("class","node")
.attr("cx",x)
.attr("cy",y)
.attr("r",1000)
.style("fill","steelblue")
.style("stroke","black")
.style("stroke-width",1.0);

node.exit().remove(); 
```

}

这不会使任何圆圈出现在 DOM 上。

节点G定义为：

```
var nodesG = d3.selectAll("g"); 
```

这个函数是从

```
var update = function(){

force.nodes(data.nodes);
updateNodes(data.nodes);

//force.links(curLinksData);
//updateLinks();

//force.start(); 
```

}

为什么什么都没有出现？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T02:33:28.747

在您的代码中不起作用的第一件事是您没有创建一个`svg`元素来绘制您的圆圈。所以你必须更换

```
 var nodesG = d3.selectAll("g"); 
```

经过

```
 var nodesG = d3.select('body').append('svg'); 
```

然后，您没有很好地定义圈子的属性 x 和 y。我猜这些属性取决于每个节点的属性`x`和`y`。因此，您必须替换以下内容：

```
 .attr("cx", x)
    .attr("cy", y) 
```

经过：

```
 .attr("cx", function(d){return d.x})
    .attr("cy", function(d){return d.y}) 
```

*   最后，您必须`update()`在脚本末尾调用

这是一个有效的 jsFiddle：http: [//jsfiddle.net/chrisJamesC/S6rgv/](http://jsfiddle.net/chrisJamesC/S6rgv/)

# php - mac osx 上的 PHP Fast CGI - phpfcgi.plist 不通过加载运行，也不通过重启运行

> ID：15859461
> 
> 赞同：0
> 
> 时间：2013-04-07T06:07:43.957
> 
> 标签：php, macos, nginx, launchd, launchdagent

我已经加载了 phpcgi.plist 但 php-fastcgi 没有运行。

plist文件是：

```
Michaels-MacBook-Pro:~ michael$ ll com*
-rwxr--r--  1 michael  admin  664  4  7 13:40 com.phpfcgi.plist* 
```

plist XML：

```
Michaels-MacBook-Pro:~ michael$ cat com.phpfcgi.plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>Debug</key>
  <false/>
  <key>EnvironmentVariables</key>
  <dict>
    <key>PHP_FCGI_CHILDREN</key>
    <string>2</string>
    <key>PHP_FCGI_MAX_REQUESTS</key>
    <string>1000</string>
  </dict>
  <key>Label</key>
  <string>com.phpfcgi</string>
  <key>OnDemand</key>
  <false/>
  <key>ProgramArguments</key>
  <array>
    <string>/usr/local/bin/php-cgi</string>
    <string>-b 127.0.0.1:9000</string>
    <string>-q</string>
  </array>
  <key>RunAtLoad</key>
  <false/>
</dict>
</plist> 
```

链接它：

```
Michaels-MacBook-Pro:~ michael$ ll Library/LaunchAgents/com.phpfcgi.plist
lrwxr-xr-x  1 michael  admin  47  4  7 13:27 Library/LaunchAgents/com.phpfcgi.plist@ -> /Volumes/MainHD/Users/michael/com.phpfcgi.plist 
```

我加载它：

```
Michaels-MacBook-Pro:~ michael$ launchctl load -w Library/LaunchAgents/com.phpfcgi.plist
com.phpfcgi: Already loaded 
```

我检查一下：

```
Michaels-MacBook-Pro:~ michael$ ps -A | grep php
 1110 ttys000    0:00.00 grep php 
```

不工作。

但我可以通过运行启动 php fastcgi。

```
Michaels-MacBook-Pro:~ michael$ cat start_php-fastcgi
/usr/local/bin/php-cgi -q -b 127.0.0.1:9000 & 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:26:24.200

加载和开始作业是有区别的。您的作业定义不包含运行条件。您指定了`RunAtLoad false`，告诉`launchd(8)`在加载作业时不要运行作业。如果您是故意这样做的，您可以使用`launchctl start com.phpfcgi`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:52:40.447

**“-b”和主机之间应该没有空格**（我的系统是osx 10.8）

我找到了一条评论：

感谢您提供此 plist 文件！许多教程在“-b”和主机名和端口之间显示一个空格。我的进程一直以 255 的状态死亡，直到我删除了那个空间。– 马特 2012 年 8 月 26 日在 16:24

从[OS X：在系统启动时通过 launchd 自动启动 PHP FCGI](https://stackoverflow.com/questions/7741365/os-x-auto-start-php-fcgi-via-launchd-on-system-start)

它解决了我的问题。

新的 plist：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>EnvironmentVariables</key>
  <dict>
    <key>PHP_FCGI_CHILDREN</key>
    <string>2</string>
    <key>PHP_FCGI_MAX_REQUESTS</key>
    <string>1000</string>
  </dict>
  <key>Label</key>
  <string>com.phpfcgi</string>
  <key>ProgramArguments</key>
  <array>
    <string>/usr/local/opt/php54/bin/php-cgi</string>
    <string>-b127.0.0.1:9000</string>
    <string>-q</string>
  </array>
  <key>RunAtLoad</key>
  <true/>
</dict>
</plist> 
```

# c# - 单独程序集中的 WCF 合同 - 如何将其用作端点合同？

> ID：15859462
> 
> 赞同：2
> 
> 时间：2013-04-07T06:07:50.113
> 
> 标签：c#, .net, wcf

我已经搜索并浪费了一整天的时间来尝试我能想到或找到的一切来解决这个问题：我构建了我的第一个 WCF 服务，并认为将它托管在 IIS 中会很酷。这是一项长期运行的服务，所以这是不行的。从那以后，我在我的解决方案中添加了另一个项目来托管 WCF 服务，引用了 WCF 项目，并且在尝试从代码托管时遇到了不断的困难。我主要遵循[http://msdn.microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)以获得有关实施主机的指导，并针对我的具体情况进行了微调。

当前的挑战只是获取托管项目的 App.config 中定义的服务端点。它无法将“端点”的“合同”属性解析为我的 WCF 服务合同。

WCF 大会

```
namespace WcfFoldingService
{
    [ServiceContract(SessionMode=SessionMode.Required, CallbackContract=typeof(IFoldingUpdaterClientContract))]
    public interface IFoldingUpdaterServiceBehavior
    {
        [OperationContract(IsOneWay = false, IsInitiating = true)]
        void Subscribe();
        [OperationContract(IsOneWay = false, IsTerminating = true)]
        void Unsubscribe();
        [OperationContract(IsOneWay = true)]
        void PublishSomeOperation();
    }
    public interface IFoldingUpdaterClientContract
    {
        [OperationContract(IsOneWay = true)]
        void SomeOperation();
    }
    [ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession, ConcurrencyMode=ConcurrencyMode.Single)]
    public class FoldingUpdaterService : IFoldingUpdaterServiceBehavior
    {
        // Omitted for brevity, but complete implementation exists.
    }
} 
```

/WCF 程序集

主机组装

```
App.config
<system.serviceModel>
<services>
  <service name="WcfFoldingService.FoldingUpdaterService" behaviorConfiguration="httpServiceBehavior">
    <endpoint address="" binding="wsDualHttpBinding" bindingConfiguration="ServiceBindingConfiguration" contract="WcfFoldingService.IFoldingUpdaterServiceBehavior"/>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>
<protocolMapping>
  <add scheme="http" binding="wsDualHttpBinding" bindingConfiguration="ServiceBindingConfiguration"/>
</protocolMapping>
<bindings>
  <wsDualHttpBinding>
    <binding name="ServiceBindingConfiguration">
      <reliableSession ordered="true"/>
      <security mode="None"/>
    </binding>
  </wsDualHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="httpServiceBehavior">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="False"/>
      <serviceThrottling maxConcurrentCalls="1000" maxConcurrentInstances="100" maxConcurrentSessions="100"/>
      <sendMessageChannelCache allowUnsafeCaching="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
</system.serviceModel> 
```

/主机组装

```
Message:
The 'contract' attribute is invalid - The value 'WcfFoldingService.IFoldingUpdaterServiceBehavior' is invalid according to its datatype 'serviceContractType' - The Enumeration constraint failed. 
```

我难住了。Google 提供的相关链接很少，它们主要与我没有遇到的其他配置问题有关。引用了 WCF 程序集，我使用的是完全限定名称，我什至尝试使用 ConfigurationName 属性以防出现命名空间冲突。我是 WCF 的新手，所以我希望这是一个明显的问题！

编辑：我现在使用的是编程配置而不是 App.config XML。最重要的声明是`ContractDescription.GetContract(serviceType)`, 甚至`new ContractDescription("FullNamespace.IContract")`与 XML 配置一样失败了。serviceType 的 FullName 属性的 Type 对象与我的“FullNamespace.IContract”完全相同。我怀疑如果没有在代码中硬引用它就无法加载程序集的问题，但我现在不能确定。目前，这种方法可以正常工作：

```
using (var host = new ServiceHost(typeof(FoldingUpdaterService), baseAddress))
{
    var serviceType = typeof (IFoldingUpdaterServiceBehavior);
    var serviceContract = ContractDescription.GetContract(serviceType);
    var foldingEndpoint = new ServiceEndpoint(serviceContract)
        {
            Binding = new WSDualHttpBinding()
            Address = new EndpointAddress(new Properties.Settings().WcfUpdaterServiceAddress)
        };
    host.Description.Endpoints.Add(foldingEndpoint);
    [...] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-29T16:33:10.970

这是一个老问题，但如果有人遇到同样的问题，这对我有用：尝试关闭 Visual Studio 并删除与解决方案文件 (.sln) 位于同一目录的 .suo 文件。这会重置编辑器缓存。在将服务合同文件移动到不同的程序集并且缓存仍然引用旧位置后，我遇到了同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:20:49.457

自托管应用程序将需要`<host>`标签内的`<service>`标签：

```
<system.serviceModel>
<services>
  <service name="WcfFoldingService.FoldingUpdaterService" behaviorConfiguration="httpServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/Services/"/>
          </baseAddresses>
        </host>
    <endpoint address="" binding="wsDualHttpBinding" bindingConfiguration="ServiceBindingConfiguration" contract="WcfFoldingService.IFoldingUpdaterServiceBehavior"/>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T07:26:01.013

我不知道这对您来说是否仍然是一个问题，但最近偶然发现了同样的问题，它可能会有所帮助。

指定您的服务名称时，您还必须使用您的命名空间。因此，假设您的命名空间将是`myhost`正确的条目将是...

`<service name="myhost.WcfFoldingService.FoldingUpdaterService"...>`

这同样适用于合同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T19:46:11.497

我使用 VS2012 创建的解决方案包含多个 .NET 4.0 项目。我切换到 VS2013，当我添加一个新的 WCF 库项目时，它是使用 .NET 4.5 创建的。将新项目重置为 .NET 4.0 解决了我的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-10T11:23:48.380

确保您在主机中对服务应用程序进行了引用

# java - 将 JDesktopPane 设置为 JInternal Frame 的可访问父级

> ID：15859469
> 
> 赞同：0
> 
> 时间：2013-04-07T06:08:12.773
> 
> 标签：java, swing, jinternalframe, jdesktoppane

我想将 JDesktopPane 设置为 JInternal Frame 的 Accessible Parent。但是 JInternalFrame 属性不会在可访问的父级列表中显示 JdesktopPane。我的 MDI 应用程序在 Jd​​esktopPane 之上加载了 JdesktopPane 和内部框架。我在表单加载时将 Requestfocus 设置为 InternalFrame 上的文本文件时遇到问题，可能是由于这个父问题。有人可以帮助我吗？PS：这是 Java Swing 应用程序。IDE-Netbeans

# c++ - 编译 CUDA 文件、C 文件和 Cuda 头文件

> ID：15859471
> 
> 赞同：1
> 
> 时间：2013-04-07T06:08:44.190
> 
> 标签：c++, c, cuda, makefile

我有一个要从 C 文件启动的 CUDA 内核。我将内核放在一个 .cu 文件中，并制作了一个调用内核的包装函数。然后我制作了一个简单地声明包装函数的头文件。在我的 C 文件中，我包含了头文件并调用了包装函数。

如果我想将这些文件编译为对象然后链接它们，我的 makefile 会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:29:31.717

nvcc 使用文件扩展名自动确定语言和编译轨迹。所以你实际上只需要一个编译语句，它可能很简单：

```
application:     foo.cu bar.c
                 nvcc $(CUDAFLAGS) -XComplier=$(CFLAGS) -Xlinker=$(LDFLAGS) -o $@ $^ 
```

[免责声明：在浏览器中编写，不包含选项卡，从未测试过，确切的形式将取决于使用的 make 风格，使用风险自负]

定义您需要的任何 CUDA 特定选项`CUDAFLAGS`。我认为它可以在不将`CFLAGS`and`LDFLAGS`变量括在引号中的情况下工作，但是您可能需要对此进行一些试验。

# html - 列表元素两边的宽度相等

> ID：15859473
> 
> 赞同：1
> 
> 时间：2013-04-07T06:08:53.103
> 
> 标签：html, css

我正在设计一个菜单，宽度为 980px。我想对它们进行样式设置，使所有 li 的左右填充都相同。表示所有菜单的分割后具有相等的填充。附上例子。

![在此处输入图像描述](https://i.stack.imgur.com/0zoAe.jpg)

使用的 html 和样式是

```
<ul>
    <li>
        <a title="" href="javascript:void(0);"> <span class="catName">Furniture</span>

        </a>
    </li>
    <li>
        <a title="" href="javascript:void(0);"> <span class="catName">Art</span>

        </a>
    </li>
    <li>
        <a title="" href="javascript:void(0);"> <span class="catName">Test</span>

        </a>
    </li>
    <li>
        <a title="" href="javascript:void(0);"> <span class="catName">Testing Cate</span>

        </a>
    </li>
    <li>
        <a title="" href="javascript:void(0);"> <span class="catName">Testing Category</span>

        </a>
    </li>
</ul> 
```

使用风格：-

```
ul li{
    float: left;
    height: 24px;
    border-right: 1px solid #2e2f2f;
    border-left: 1px solid #595a5b;
}
ul li a {
    padding: 0 27px;
    display: block;
    line-height: 23px;
} 
```

任何建议如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:22:05.627

这将使双方的所有内容都`li a`相同`padding`，并允许它们扩展以填充父项：`27px``ul`

```
ul {
    list-style-type: none;
    height: 24px;
    width: 978px; /* 980px - side borders width  --> total width 980px*/
    border-right: 1px solid #2e2f2f;
    border-left: 1px solid #595a5b;
    margin: 0;
    padding: 0;
    display: table;
}
li {
    line-height: 23px;
    display: table-cell;
    text-align: center;
    width: auto;
}
li a {
    display: block;
    border-right: 1px solid #2e2f2f;
    border-left: 1px solid #595a5b;
    height: 24px;
    padding: 0 27px;
} 
```

[演示](http://jsfiddle.net/arcm111/vwtey/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T06:25:58.323

[固定标题宽度（980px）+所有li的左右填充相同+上面发布的匹配图+跨浏览器（chrome+firefox+ie9）。请享用 ：）](http://i.imgur.com/cj4DYjH.jpg)

CSS（填充以 % 指定）：

```
div{
    background:red;
    width:980px;
}
ul{
    display:table;
    list-style:none;
    margin-left:-40px;
    width:100%;
}
ul li{
    background:pink;
    border-left:2px solid black;
    border-right:1px solid black;
    display:table-cell;
    padding:0% 2% 0% 2%;
    text-align:center;
    width:9%;
} 
```

HTML（只是添加了一个外部 div）：

```
<div>
    <ul>
        <li>
            <a title="" href="javascript:void(0);"> <span class="catName">Furniture</span></a>
        </li>
        <!-- and 9 more <li>'s -->
    </ul>
</div> 
```

从技术上讲，它的填充相等。当然，如果您在 980px 区域中只有 5 个小项目，它们将是不相等的。如果您只插入准确的 10 个标签，如图所示，它的填充大致相等（无论如何都足够接近）

# vbscript - 如何使用 vbscript 释放为变量分配的内存

> ID：15859474
> 
> 赞同：1
> 
> 时间：2013-04-07T06:08:53.487
> 
> 标签：vbscript

有没有一种方法可以释放分配给 vbscript 中变量的内存？

例如：x=10 执行此语句时，分配内存并将值存储在该内存中。

有没有办法释放那个内存。

我知道一旦执行结束或变量超出函数的范围，内存就会自动释放，但是有没有释放它的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:42:01.153

擦除[语句](http://msdn.microsoft.com/en-us/library/w8yk5k45%28v=vs.84%29.aspx)

> 重新初始化固定大小数组的元素并释放动态数组存储空间。

对于带有“”的长字符串赋值**可能会**促使垃圾收集器释放现在孤立的长文本。

试图回收数字或日期的记忆将是浪费精力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:56:53.173

每个变量使用一些内存直到存在，甚至`Nothing Is Object`！

```
Set myObj = Nothing
WScript.Echo "IsObject = " & IsObject(myObj)
WScript.Echo "IsNothing = " & (myObj Is Nothing)
'>> IsObject = True
'>> IsNothing = True 
```

（注意：`Is`运算符比较两个对象引用变量。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T06:36:41.250

如果它是一个对象，只需将其设置为 Nothing

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T08:17:49.853

分配给对象变量的内存可以通过将变量设置`Nothing`为[@StephenConnolly](https://stackoverflow.com/a/15859658/1630171)提到的那样释放：

```
Set var = Nothing 
```

没有明确的方法可以释放为标量变量分配的内存。

# android - 以最小纬度/经度显示谷歌地图到最大纬度/经度

> ID：15859476
> 
> 赞同：0
> 
> 时间：2013-04-07T06:09:38.803
> 
> 标签：android, google-maps

我试图在设备屏幕上仅显示从最小纬度/经度到最大纬度/经度的谷歌地图。我所做的是获取纬度和经度的最大值和最小值并显示为

```
map.animateTo(new GeoPoint((int)((maxLatitude + minLatitude)/2),(int)((maxLongitude + minLongitude)/2 ))); 
```

但它不起作用。此行有“GoogleMap 类型的方法 animateTo(GeoPoint) 未定义”的编译错误。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:28:07.633

我使用这种方法并且它有效。

```
Cursor cursor = dbHelp.fetchAllLatLongInTheList();
    LatLngBounds.Builder bld = new LatLngBounds.Builder();
    for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext())
    {
        latitude = latitudelongitudeConverter(cursor.getString(3));
        longitude = latitudelongitudeConverter(cursor.getString(4));
        LatLng ll = new LatLng(latitude, longitude);
        bld.include(ll); 
    } 
```

# java - 编译 GWT 应用程序时出错 (Errai)

> ID：15859477
> 
> 赞同：1
> 
> 时间：2013-04-07T06:09:38.630
> 
> 标签：java, gwt, errai

任何人都可以帮助我理解为什么我的应用程序在运行时抛出这个错误

`mvn gwt:compile`：

```
[INFO] Compiling module org.jboss.errai.ui.demo.App
[INFO]    Scanning for additional dependencies: jar:file:/home/xkm/.m2/repository/org/jboss/errai/errai-ioc/2.2.0.Final/errai-ioc-2.2.0.Final.jar!/org/jboss/errai/ioc/client/Container.java
[INFO]       Computing all possible rebind results for 'org.jboss.errai.ioc.client.QualifierEqualityFactory'
[INFO]          Rebinding org.jboss.errai.ioc.client.QualifierEqualityFactory
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.QualifierEqualityFactoryGenerator
[INFO]                Generating Extensions Bootstrapper...
[ERROR] Apr 07, 2013 1:39:10 PM org.jboss.errai.reflections.Reflections scan
[ERROR] INFO: Reflections took 1387 ms to scan 12 urls, producing 403 keys and 1809 values [using 2 cores]
[INFO]          Rebinding org.jboss.errai.ioc.client.QualifierEqualityFactory
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.QualifierEqualityFactoryGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.QualifierEqualityFactory
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.QualifierEqualityFactoryGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.QualifierEqualityFactory
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.QualifierEqualityFactoryGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.QualifierEqualityFactory
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.QualifierEqualityFactoryGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.QualifierEqualityFactory
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.QualifierEqualityFactoryGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]       Computing all possible rebind results for 'org.jboss.errai.ioc.client.Bootstrapper'
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[ERROR] Apr 07, 2013 1:39:11 PM org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCBootstrapGenerator generate
[ERROR] INFO: generating IOC bootstrapping class...
[ERROR] Apr 07, 2013 1:39:11 PM org.jboss.errai.config.rebind.EnvUtil getAllReachableClasses
[ERROR] WARNING: reachability analysis disabled. errai may generate unnecessary code.
[ERROR] Apr 07, 2013 1:39:11 PM org.jboss.errai.config.rebind.EnvUtil getAllReachableClasses
[ERROR] WARNING: enable reachability analysis with -Derrai.compile.perf.perform_reachability_analysis=true
[INFO]                Checking ErraiApp.properties for configured types ...
[ERROR] Apr 07, 2013 1:39:13 PM org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCBootstrapGenerator generate
[ERROR] INFO: generated IOC bootstrapping class in 1827ms (4034 beans processed)
[ERROR] Apr 07, 2013 1:39:13 PM org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCBootstrapGenerator generate
[ERROR] INFO: using IOC bootstrapping code at: /home/xkm/juno/workspace/myapp/.errai/BootstrapperImpl.java
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]    Scanning for additional dependencies: jar:file:/home/xkm/.m2/repository/org/jboss/errai/errai-marshalling/2.2.0.Final/errai-marshalling-2.2.0.Final.jar!/org/jboss/errai/marshalling/client/api/MarshallerFramework.java
[INFO]       Computing all possible rebind results for 'org.jboss.errai.marshalling.client.api.MarshallerFactory'
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[ERROR] Apr 07, 2013 1:39:13 PM org.jboss.errai.marshalling.rebind.MarshallerGeneratorFactory generate
[ERROR] INFO: generating marshalling class...
[ERROR] Apr 07, 2013 1:39:14 PM org.jboss.errai.marshalling.rebind.MarshallerGeneratorFactory generate
[ERROR] INFO: generated marshalling class in 583ms.
[ERROR] Apr 07, 2013 1:39:14 PM org.jboss.errai.marshalling.rebind.MarshallersGenerator _generate
[ERROR] INFO: considering '/home/xkm/juno/workspace/myapp/src/main/webapp/WEB-INF/classes/' as module output path ...
[ERROR] Apr 07, 2013 1:39:14 PM org.jboss.errai.marshalling.rebind.MarshallersGenerator _generate
[ERROR] INFO:    found '/home/xkm/juno/workspace/myapp/src/main/webapp/WEB-INF/classes' output directory
[ERROR] Apr 07, 2013 1:39:15 PM org.jboss.errai.marshalling.rebind.MarshallersGenerator _generate
[ERROR] INFO: ** deposited marshaller class in : /home/xkm/juno/workspace/myapp/src/main/webapp/WEB-INF/classes
[ERROR] Apr 07, 2013 1:39:15 PM org.jboss.errai.config.rebind.EnvUtil getAllReachableClasses
[ERROR] WARNING: reachability analysis disabled. errai may generate unnecessary code.
[ERROR] Apr 07, 2013 1:39:15 PM org.jboss.errai.config.rebind.EnvUtil getAllReachableClasses
[ERROR] WARNING: enable reachability analysis with -Derrai.compile.perf.perform_reachability_analysis=true
[ERROR] Apr 07, 2013 1:39:15 PM org.jboss.errai.marshalling.rebind.MarshallerGeneratorFactory generate
[ERROR] INFO: generating marshalling class...
[ERROR] Apr 07, 2013 1:39:15 PM org.jboss.errai.marshalling.rebind.MarshallerGeneratorFactory generate
[ERROR] INFO: generated marshalling class in 509ms.
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[ERROR] Apr 07, 2013 1:39:17 PM org.jboss.errai.bus.rebind.RpcProxyLoaderGenerator generate
[ERROR] INFO: generating rpc proxy loader class.
[INFO]    Scanning for additional dependencies: /home/xkm/juno/workspace/myapp/target/.generated/org/jboss/errai/ioc/client/BootstrapperImpl.java
[INFO]       Computing all possible rebind results for 'org.jboss.errai.ioc.client.BootstrapperImpl.org_jboss_errai_ui_demo_client_local_PasswordRequiredPageTemplateResource'
[INFO]          Rebinding org.jboss.errai.ioc.client.BootstrapperImpl.org_jboss_errai_ui_demo_client_local_PasswordRequiredPageTemplateResource
[INFO]             Invoking generator com.google.gwt.resources.rebind.context.InlineClientBundleGenerator
[INFO]                Creating assignment for getContents()
[INFO]                   Finding resources
[INFO]                      [ERROR] Resource org/jboss/errai/ui/demo/client/local/PasswordRequiredPage.html not found. Is the name specified as Class.getResource() would expect?
[INFO]       [WARN] For the following type(s), generated source was never committed (did you forget to call commit()?)
[INFO]          [WARN] org.jboss.errai.ioc.client.BootstrapperImpl_org_jboss_errai_ui_demo_client_local_PasswordRequiredPageTemplateResource_default_InlineClientBundleGenerator
[INFO]    [ERROR] Errors in '/home/xkm/juno/workspace/myapp/target/.generated/org/jboss/errai/ioc/client/BootstrapperImpl.java'
[INFO]       [ERROR] Line 149:  Failed to resolve 'org.jboss.errai.ioc.client.BootstrapperImpl.org_jboss_errai_ui_demo_client_local_PasswordRequiredPageTemplateResource' via deferred binding
[ERROR] Apr 07, 2013 1:39:21 PM org.jboss.errai.databinding.rebind.BindableProxyLoaderGenerator generate
[ERROR] INFO: generating bindable proxy loader class.
[ERROR] Apr 07, 2013 1:39:21 PM org.jboss.errai.enterprise.rebind.JaxrsProxyLoaderGenerator generate
[ERROR] INFO: generating jax-rs proxy loader class.
[INFO]    [ERROR] Cannot proceed due to previous errors 
```

深入研究我可以看到的代码：

```
[ERROR] Resource org/jboss/errai/ui/demo/client/local/PasswordRequiredPage.html not found. Is the name specified as Class.getResource() would expect? 
```

但是，html 页面与相应的 PasswordRequiredPage.java 一起存在：

**PasswordRequiredPage.java**：

```
@Dependent
@Templated("#passwordrequired")
@Page
public class PasswordRequiredPage extends Composite {
} 
```

**PasswordRequiredPage.html**：

```
<div data-field="passwordrequired">
 <!-- Content -->
</div> 
```

我的申请可能出了什么问题？我已经搞定了：

```
 - mvn clean (SUCCESS)
 - mvn gwt:compile (FAIL)
 - mvn gwt:run (FAILE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:32:13.417

虽然您`PasswordRequiredPage.html`在同一个文件夹中，`PasswordRequiredPage.java`但当 gwt 编译器运行时，它应该在类路径中。

您可以通过两种方式修复它：

1.  复制`PasswordRequiredPage.html`到java编译器生成的文件夹，`PasswordRequiredPage.class`完成配置[maven-resources-plugin](http://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html)（目标copy-resources）

2.  将源文件夹添加`.html`到您的编译类路径中。

我从未使用过 Errai，也不知道它是如何使用 gwt 编译器的，但由于某种原因，它正在将 .java 文件添加到类路径（可能也是 .css 和 .png ）但没有 .html 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T23:19:13.427

也许，您必须将路径添加到`@Page`注释中；就像它出现在[官方指南中一样。](https://docs.jboss.org/author/display/ERRAI/Errai+UI+Navigation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T17:24:17.643

不确定，但据我所知，您应该在 HTML 中使用**id**属性进行模板化。数据字段用于在相应的 java 代码中注入小部件或构造元素以对其进行处理。

尝试

```
<div id="passwordrequired">
 <!-- Content -->
</div> 
```

在 java 代码中，“this”将对应于根小部件/复合材料。

# c++ - 恢复 wchar.h c++ 包含文件

> ID：15859482
> 
> 赞同：0
> 
> 时间：2013-04-07T06:10:06.660
> 
> 标签：c++, linux, include

我试图应用一个允许我使用`std::to_string()`. 我在上面使用了 rm `/usr/include/wchar.h`，然后将`wchar.h`我下载的补丁复制到 /usr/include 目录。现在当我尝试编译程序时，它抱怨它找不到`_mingw.h`

在这一点上，我只想找到一种方法来获取旧的副本`wchar.h`并替换“修补”的副本。我会想办法在没有的情况下做到这一点`std::to_string();`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T08:44:00.640

实际上，这与编程关系不大，所以这里可能是题外话。然而...

首先：为您服务。是的。您一直在使用 root 权限，但没有适当注意不要破坏您的系统。有一个单独的 root 帐户是有原因的，不要将它用于日常工作。

其次，有一些方法可以解决这个问题，但它们有点依赖于系统。首先找出安装该标头的软件包，然后重新安装整个软件包。您也可以尝试仅提取和恢复该文件，但这可能更复杂。例如在 Debian 下，运行`dpkg -S /usr/include/wchar.h`以找出安装该文件的软件包，在本例中为 libc6-dev。然后，使用`apt-get install --reinstall libc6-dev`重新安装包，这应该可以解决您的问题。

最后，回到编程，你的方法是有缺陷的。标准头文件通常不能在不同的编译器之间移植。此外，他们可能会声明在更不便携的单独库中实现的功能。我的建议：提出一个新问题，在其中具体详细说明您想要实现的目标以及在哪个系统上。

# iphone - iOS中的Sqlite数据库终止

> ID：15859486
> 
> 赞同：0
> 
> 时间：2013-04-07T06:10:45.390
> 
> 标签：iphone, ios, database, sqlite

我已经构建了一个与 Sql-lite 数据库集成的应用程序，该应用程序按预期工作，但是当我从设备终止应用程序时，数据库文件被删除并且应用程序丢失了所有需要的数据！

我很感激有关终止应用程序后可以用来保存数据库文件的方法的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:21:06.593

*在AppDelegate.m*中关闭您的应用程序之前，尝试显式调用以保存您的数据。这应该可以解决您的问题。

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    // Saves changes in the application's managed object context before the application terminates.
    if (managedObjectContext != nil)
    {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
        {
            // manage db save error
        }
    }
} 
```

如果保存时间超过 5 秒（例如，因为要保留的行太多，或复杂的数据库结构），请不要，那么您可以使用*beginBackgroundTaskWithExpirationHandler*从不同线程中的 ios 请求后台执行时间以保存您的数据。

# mysql - 将int修改为float（mysql）

> ID：15859487
> 
> 赞同：8
> 
> 时间：2013-04-07T06:10:45.943
> 
> 标签：mysql, sql

我正在尝试在 MySQL 中将数据类型从 INT 更改为 FLOAT，如下所示：

```
ALTER TABLE user MODIFY rate float(5) NOT NULL 
```

但当前数据被丢弃。有没有办法用 SQL 将数据从 INT 保存到 FLOAT？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-11-12T15:41:46.127

我刚试过

```
ALTER TABLE user MODIFY rate float(5) NOT NULL 
```

使用 mysql 5.6.26 并且它在不丢失值的情况下工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-07T06:27:06.300

```
ALTER TABLE `user` CHANGE rate intrate INTEGER;
ALTER TABLE `user` ADD rate float(5) NOT NULL DEFAULT 100;
UPDATE `user` SET rate=intrate;
ALTER TABLE `user` DROP intrate; 
```

# java - 在 JTextpane 的所有 4 个边上具有相同大小的边框

> ID：15859497
> 
> 赞同：2
> 
> 时间：2013-04-07T06:12:32.350
> 
> 标签：java, swing, border, jtextpane

我正在`createLineborder`为我的`JTextPane`. `JTextpane`但是与 Left-end 和 top of 相比，right-end 和 bottom of 的边界线略有不同`TextPane`。我在网上搜索，发现这是`lineborder`. 那么任何人都可以告诉我是否有任何边框在所有 4 个边上给出相同的线条大小？

嗨，我无法输入我的代码，因为它非常庞大。所以在这里放一个示例代码。JPanel面板；JTextPane 窗格；

```
public BorderedTextPane() {
    // TODO Auto-generated constructor stub
    pane = new JTextPane();
    panel = new JPanel(null);
    JPanel innerPanel = new JPanel(null);
    innerPanel.setBounds(50,50,300,400);
    pane.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    pane.setSize(new Dimension(innerPanel.getWidth(),innerPanel.getHeight()));
    innerPanel.add(pane);
    panel.add(innerPanel);
    add(panel);
    setVisible(true);
    setSize(new Dimension(500,500));
    setLocationRelativeTo(null);
} 
```

如果您缩放文本窗格或将其保存在文件中，则可以清楚地看到这一点。下图将更好地解释它。比较左右线。 ![在此处输入图像描述](https://i.stack.imgur.com/tsUYh.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:33:15.180

我会说它更多地与使用`null`布局有关......

![在此处输入图像描述](https://i.stack.imgur.com/OxxoT.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.CompoundBorder;
import javax.swing.border.EmptyBorder;

public class TestBorder {

    public static void main(String[] args) {
        new TestBorder();
    }

    public TestBorder() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new BorderLayout());
            setBorder(new EmptyBorder(10, 10, 10, 10));
            JTextPane pane = new JTextPane();
            JPanel panel = new JPanel(new BorderLayout());
            JPanel innerPanel = new JPanel(new BorderLayout());

            pane.setBorder(BorderFactory.createLineBorder(Color.BLACK));
            innerPanel.add(pane);
            panel.add(innerPanel);
            add(panel);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T07:17:32.787

从[`JComponent#setBorder()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBorder%28javax.swing.border.Border%29)API：

> 尽管从技术上讲，您可以在任何继承自 的对象上设置边框`JComponent`，但许多标准 Swing 组件的外观实现不能很好地与用户设置的边框配合使用。一般情况下，当您要在除`JPanel`or之外的标准 Swing 组件上设置边框时`JLabel`，我们建议您将组件放在 a 中`JPanel`，并将边框设置在`JPanel`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T20:09:48.590

请教API setBorder 方法（new EmptyBorder()）；

以及使用变量 JTextPane varible.setBorder (BorderFactory.createLineBorder (Color.xxx);

# windows-8 - 如何在 Windows Store 应用程序中创建子窗口？

> ID：15859499
> 
> 赞同：1
> 
> 时间：2013-04-07T06:13:07.407
> 
> 标签：windows-8, windows-store-apps

我正在将我的 windows phone 应用程序转换为 windows 8。我无法在 windows 8 中找到子 windows 控件。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T06:31:45.063

Windows 应用商店应用具有弹出控件。您可以在其中托管任何控件。

[弹出类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.popup)

[XAML 弹出式示例](http://code.msdn.microsoft.com/windowsapps/XAML-Popup-sample-5ae00a42)

[在 C# Windows Metro (WinRT) 中制作弹出窗口](http://winrtprogramming.wordpress.com/2012/10/16/making-a-popup-window-in-c-windows-metro-winrt/)

# compilation - vxworks 编译成功但“ld”命令失败

> ID：15859502
> 
> 赞同：3
> 
> 时间：2013-04-07T06:13:29.160
> 
> 标签：compilation, vxworks

我使用 IDE WindRiver Workbench 编译 DKM 项目！它编译成功。但是“ld”命令失败，抱怨如下：

```
Warning: module 0x1e2f0b8 holds reference to undefined symbol __GOTT_BASE__.
Warning: module 0x1e2f0b8 holds reference to undefined symbol __GOTT_INDEX__.
Warning: module 0x1e2f0b8 holds reference to undefined symbol _Assert.
Warning: module 0x1e2f0b8 holds reference to undefined symbol _Stoul.
Warning: module 0x1e2f0b8 holds reference to undefined symbol _Getpctype.
Warning: module 0x1e2f0b8 holds reference to undefined symbol _Stderr.
Warning: module 0x1e2f0b8 holds reference to undefined symbol _Getptoupper.
Warning: module 0x1e2f0b8 holds reference to undefined symbol _Getptolower.
Warning: module 0x1e2f0b8 holds reference to undefined symbol _Stod.
Warning: module 0x1e2f0b8 holds reference to undefined symbol _Flt.
Warning: module 0x1e2f0b8 holds reference to undefined symbol _Stdout.
ld(): error loading file (errno = 0xe0005). 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T11:12:05.213

您会收到这些错误，因为在系统符号表中无法解析提到的符号。

来自 VxWorks Kernel Programmer's Guide 6.8，ch。16.3.7（对于加载问题非常有用的章节）

> 系统符号表用于存储系统中已安装的函数和变量的名称和地址。这样做的副作用是，一旦在系统符号表中安装了符号，它们就可用于将来被加载的任何模块进行链接。此外，当尝试解析模块中的未定义符号时，加载器使用编译到目标映像中的所有全局符号，以及先前加载的模块的所有全局符号。

提示：

*   检查您加载模块的顺序是否正确。如果您随后在另一个 DKM 中加载符号，则在该 DKM 上加载将失败。

> [...] 加载模块时必须考虑模块之间的依赖关系，以确保可以使用编译到 VxWorks 映像中的代码或已加载到系统中的模块来解析每个新模块的引用。不这样做会导致不完全解析的代码 [...]

*   “lkup”命令可用于查找先前已加载的符号

# c - Printf 不是 c 语言的一部分。从 stdio.h 执行 PRINTF 的代码时实际发生了什么？

> ID：15859507
> 
> 赞同：2
> 
> 时间：2013-04-07T06:14:34.193
> 
> 标签：c, printf, stdio

```
int printf (const char *__format, ...)
{
  register int __retval;
  __builtin_va_list __local_argv; __builtin_va_start( __local_argv, __format );
  __retval = __mingw_vprintf( __format, __local_argv );
  __builtin_va_end( __local_argv );
  return __retval;
} 
```

以上几行是`stdio`函数对应的库的一部分`printf`。当`printf`被调用时，这些被执行。这些线是什么意思？执行上述每一行时会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T06:16:13.493

这主要是另一个`__mingw_vprintf`执行实际工作的函数的包装器。这里唯一的代码是重新打包变量参数列表。因此，要真正了解 Mingw 是如何做到的，您必须查看该函数以及它调用的任何其他函数。如果您真的对此感兴趣，您应该获得一份 PJ Plauger 的*The Standard C Library*的副本。他告诉您如何使用、编写和测试标准库中的每个函数。

库代码通常被编译成目标文件（就像您的代码一样），然后以存档格式打包。当您的程序被链接时，所需的库对象将从存档中提取并写入同一个可执行文件。这适用于*静态链接*库。

对于动态链接库，库代码存档作为一个整体加载到内存中（并且通常由任何需要使用它的程序共享），并且您的程序在操作系统的帮助下进行库调用以方便内存-分享。

对于这两种类型的库，头文件应该只包含宏、类型和函数原型。它不应该包含任何函数定义（那些属于`.c`文件）。

`printf`这是标准库存在之前的一个古老版本：[链接](http://minnie.tuhs.org/cgi-bin/utree.pl?file=V6/usr/source/iolib/printf.c)（<-- 这实际上是可读的（ish））。奇怪的是，第[7](http://minnie.tuhs.org/cgi-bin/utree.pl?file=V7/usr/src/libc/stdio/printf.c)版看起来很像你上面引用的那个：

```
#include    <stdio.h>

printf(fmt, args)
char *fmt;
{
    _doprnt(fmt, &args, stdout);
    return(ferror(stdout)? EOF: 0);
} 
```

在这种情况下，`_doprnt`是用汇编语言实现的。

# php - 将用户重定向到 MediaWiki wiki 的移动视图

> ID：15859508
> 
> 赞同：0
> 
> 时间：2013-04-07T06:14:34.290
> 
> 标签：php, javascript, mediawiki

我目前正在弄清楚如何将某些设备上的用户重定向到我的 MediaWiki 安装的移动版本。用于手动切换视图的内置链接（由[MobileFrontend](http://www.mediawiki.org/wiki/Extension%3aMobileFrontend)扩展提供）位于底部，但它很小且容易错过。

我首先考虑先在 PHP 中进行某种用户代理字符串检测（*完全披露：完整的 PHP noob*），但这似乎不是一个好的解决方案，原因有几个。首先，除非重定向发生在页面上的任何其他内容被发送之前，否则它不会起作用。其次，用户代理嗅探似乎容易出错。第三，我一开始不知道如何或在何处将代码插入到 MediaWiki 安装中。显然，维基百科使用 Varnish 来检测移动用户，但我没有那个选项（共享主机），我也不知道如何使用它。

我一直在研究的第二个也是当前的解决方案是使用 Javascript 来重定向用户。缺点是必须下载两个页面——桌面页面和移动页面。除此之外，我在让它正常工作时遇到了很多问题。以下所有代码都放置在[MediaWiki:Common.js](http://www.mediawiki.org/wiki/Common.js)中，在每次页面加载时都会为所有用户加载。

**1)**

```
if(document.URL.search("mobile") == -1)
{

  if(document.documentElement.clientWidth <= 735)
  {
    window.location.replace(document.URL + "?useformat=mobile");
  }
} 
```

问题：任意切换到移动视图。我在 Nexus 7 上使用 Chrome 远程调试仔细检查了宽度。有时我会得到 980，有时我会在纵向上得到 601。当它报601时，不会触发移动重定向，但是如果我在桌面的Chrome/Firefox/IE中以相同的宽度打开相同的页面，它就完美地重定向了。

使用 jQuery 似乎不是一种选择，因为它显然使用[相同的方法](http://responsejs.com/labs/dimensions/#viewport)来确定宽度。

**2)**

```
if(document.URL.search("mobile") == -1)
{
  if( navigator.userAgent.match(/Android/i)
   || navigator.userAgent.match(/webOS/i)
   || navigator.userAgent.match(/iPhone/i)
   || navigator.userAgent.match(/iPod/i)
   || navigator.userAgent.match(/BlackBerry/i)
   || navigator.userAgent.match(/Windows Phone/i))
  {
    window.location.replace(document.URL + "?useformat=mobile");
  }
} 
```

问题：这确实有效（当然，不存在的用户代理不会触发重定向），但问题在于粒度。例如，我希望在我的 Galaxy Nexus 或 Nexus 7 上显示移动视图，而不是在 Nexus 10 或 Asus Transformer 上。

**3)** MobileDetect MediaWiki 扩展

问题：此扩展自 2010 年以来未更新，尽管它可能仍然可以正常工作。除此之外，在 PHP 中检测移动设备非常棒，但是移动站点不想为更大的平板电脑用户提供服务的问题仍然存在。另外，听起来很荒谬，我什至不知道移动皮肤的名称是什么（或者它是否是皮肤），或者如果扩展检测到移动设备（因为它执行 PHP 重定向为时已晚）。

我在实验的过程中在这里和那里进行了一些调整，但核心思想总是宽度检测或用户代理嗅探。使用宽度来重定向用户会很棒，但它看起来太挑剔了，我不能相信它。我什至遇到了这样的情况：我的手机或平板电脑会显示桌面版本，而桌面浏览器只会显示移动版本（这是与[detectmobilebrowsers.com](http://detectmobilebrowsers.com/)的功能；我不得不禁用 Javascript 只是为了从 Common 中删除有问题的代码.js）。

必须有一些相当直接的方法将手机和小型平板电脑用户重定向到 wiki 的移动视图。我只是在我的一个解决方案中犯了一个错误，还是有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-13T14:22:01.980

如果您使用 MobileFrontEnd 扩展来显示 Mediawiki 的移动版本，那么您可以设置

```
$wgMFAutodetectMobileView = true; 
```

在您的 LocalSettings.php 文件中包含到 MobileFrontend 包含下方。

唯一的缺点是您将无法使用 FileCaching，因为移动设备将从缓存中提取最后存储的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:15:41.207

我决定使用用户代理方法。我确信它不会捕捉到阳光下的一切，但它应该捕捉到大多数可能访问该站点的设备。代码如下：

```
if(document.URL.search("mobile") == -1)
{
  var ua = navigator.userAgent;

  if(ua.match(/Android/i))
  {
    if(ua.match(/Mobile/i))
    {
      window.location.replace(document.URL + "?useformat=mobile");
    }
  }
  else if((/webos|iphone|ipod|blackberry|windows phone|bada/i).test(ua))
  {
    window.location.replace(document.URL + "?useformat=mobile");
  }
} 
```

手机将获得移动视图，平板电脑、台式机和其他设备将获得桌面视图——区分中型和大型平板电脑太成问题了。手机必须加载两个页面而不是一个页面仍然存在缺点，但 wiki 并不是特别重媒体。请注意，上面的代码似乎也正确地捕捉到了 Kindle Fire 上亚马逊 Silk 浏览器的移动视图（参见[此处](https://developer.amazon.com/sdk/fire/specifications.html)）。

这个[问题](https://stackoverflow.com/questions/11381673/javascript-solution-to-detect-mobile-browser/11381730)有一些关于检测移动浏览器的更多细节，[这个](https://stackoverflow.com/questions/5341637/how-do-detect-android-tablets-in-general-useragent/5344382)问题解释了如何区分 Android 手机和平板电脑。尽管我无法让它可靠地工作，[但这个](https://stackoverflow.com/a/15101864/263356)答案有一种有趣的方法，可以使用基于 em 的媒体查询来区分手机、平板电脑和台式机。

# c - 使用 glade 将用户数据传递给回调函数

> ID：15859511
> 
> 赞同：2
> 
> 时间：2013-04-07T06:14:43.857
> 
> 标签：c, gtk, glade

我正在使用 glade 制作我的 .ui 文件，然后使用`GtkBuilder`我将整个 .ui 文件加载到我的 C 程序中，因此所有小部件和东西都是从构建器文件本身创建的。

早些时候我只从代码本身创建小部件，因此允许我将任何类型的数据传递给回调，因为第二个参数是一个`gpointer`变量，我可以随时创建一个指向自定义结构的指针并将任何类型的数据传递给回调。

但现在要连接到信号，我只是使用这个简单的功能：

```
gtk_builder_connect_signals(builder, NULL); 
```

`builder`指向的指针在哪里`GtkBuilder`。

这将 glade 文件中提到的所有信号与 .c 文件中定义的函数的信号连接起来，除了 Widgets（它们本身只能在 glade 中定义）之外，没有任何传递 user_data 的规定。

谁能告诉我一个解决方案，以便我可以将任何类型的数据传递给我的回调。我不想离开 glade，因为它节省了我很多时间，因此我不想切换到仅通过代码创建小部件的传统方式。

同时使用 g_connect_signal() 和 gtk_builder_connect_signals() 的示例会有所帮助。在这种情况下，首先调用哪个来覆盖信号连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:38:41.980

您可以调用`gtk_builder_get_object`以检索由 Glade 给定的小部件名称创建的任何小部件。`g_connect_signal`然后，您可以使用通常的API将小部件连接到信号。缺点是您不能再简单地“提及”林间空地定义中的信号。

另一种方法是也用于`gtk_builder_get_object`获取对象，但调用`g_object_set_qdata`以将必要的用户数据与`GQuark`您已知的密钥相关联。然后，您的回调可以使用`g_object_get_qdata`相同的键从小部件中获取用户数据。这样做的好处是您仍将使用`gtk_builder_connect_signals`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-12T14:35:06.637

您传入的 NULL 指针**用于**用户数据指针。

```
gtk_builder_connect_signals(builder, NULL);
                                      ^
here----------------------------------| 
```

如果您始终拥有相同的用户数据对象，那么您的问题就解决了。如果不是，您将需要针对不同用户数据指针的某种数据结构，以便每个回调都可以找到正确的。

# visual-studio-2010 - OpenCV GPU 程序未运行

> ID：15859513
> 
> 赞同：0
> 
> 时间：2013-04-07T06:14:53.363
> 
> 标签：visual-studio-2010, opencv, cuda, gpu

这是我的第一篇文章。所以，如果我不能使它成为一个完美的，请原谅我。

我使用 OpenCV 大约 2 个月，现在我想从 GPU 处理开始。因此，我将 OpenCV 2.4.3 的新副本解压缩到另一个位置，并使用带有 CUDA 支持的 CMake 来构建它。我使用了 CUDA 4.2 Toolkit 和 SDK，然后在构建它时使用了它。然后我以完美的方式设置环境变量和包含、目录和二进制属性，如这里许多其他帖子中所述。

但是，当我将 gpu 代码添加到我的项目中时，例如 stereo_match.cpp，我能够成功编译和构建它们，但是当我运行它们时，没有结果。我只是得到一个黑屏，上面写着：

“用法：stereo_match_gpu --left --right #必须纠正 --method #BM | BP | CSBP --ndisp #视差级别数”

程序退出。我尝试阅读代码，但找不到我应该在哪里提供输入图像。我是 CUDA 的菜鸟。所以有人可以告诉我我是否在这里做错了什么。我遵循的构建和运行 GPU 代码的方法是否正确？你能建议我哪里出错了吗？我正在使用带有 OpenCV 2.4.3 的 Visual Studio Ultimate 32 位。GPU 是 NVIDIA GeForce 525M。

附加信息：当我运行构建的代码时，我在控制台中得到以下信息：

```
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\opencv\build\gpu\x86\vc10\bin\opencv_core243.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\Program Files (x86)\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\cudart32_42_9.dll', Binary was not built with debug information.
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\nvcuda.dll', Binary was not built with debug information.
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\user32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\gdi32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\lpk.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\usp10.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\msvcrt.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\advapi32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\sechost.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\rpcrt4.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\sspicli.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\cryptbase.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\setupapi.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\cfgmgr32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\oleaut32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\ole32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\devobj.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\shell32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\shlwapi.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\Program Files (x86)\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\npp32_42_9.dll', Binary was not built with debug information.
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\msvcp100.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\msvcr100.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\opencv\build\gpu\x86\vc10\bin\opencv_gpu243.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\opencv\build\x86\vc10\bin\opencv_imgproc243.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\opencv\build\x86\vc10\bin\opencv_flann243.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\opencv\build\x86\vc10\bin\opencv_features2d243.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\opencv\build\x86\vc10\bin\opencv_calib3d243.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\opencv\build\x86\vc10\bin\opencv_objdetect243.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\opencv\build\x86\vc10\bin\opencv_highgui243.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\comctl32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\avifil32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\winmm.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\msacm32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\msvfw32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\avicap32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\version.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\opencv\build\x86\vc10\bin\opencv_video243.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\nvcuvid.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\nvcuvenc.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\Program Files (x86)\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\cufft32_42_9.dll', Binary was not built with debug information.
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\imm32.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\msctf.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\WINDOWS\SysWOW64\nvinit.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\detoured.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\Nvd3d9wrap.dll', Cannot find or open the PDB file
'CV_Base.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\nvdxgiwrap.dll', Cannot find or open the PDB file
The program '[1568] CV_Base.exe: Native' has exited with code 1 (0x1). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:31:53.527

我认为错误消息只是说您必须将一些参数传递给程序，告诉程序在哪里可以找到图像。首先，您将需要 2 个校正后的图像，例如`left.jpg`和`right.jpg`。然后，您必须指示 Visual Studio 在程序启动时传递正确的参数。有关传递参数的信息，请参见[此处](https://stackoverflow.com/questions/3697299/passing-command-line-arguments-in-visual-studio-2010)。

您需要的参数可能类似于

```
--left left.jpg --right right.jpg --method BM --ndisp 32 
```

请注意，我用实际的图像名称替换了`<left-view>`和`<right-view>`，去掉了解释每个参数的注释 ( `# comments start with hash`)，并为其他参数选择了一些合理的选项。

请注意，如果您只提供文件名，则文件必须与 VS 用于启动可执行文件的工作目录位于同一目录中。如果您愿意，您还可以提供相对或完整路径，或者可能告诉 VS 使用包含图像的文件夹作为工作目录。

# html - 如何在html中访问项目文件夹外的图像文件？

> ID：15859514
> 
> 赞同：0
> 
> 时间：2013-04-07T06:14:54.300
> 
> 标签：html

我将用户上传的图像文件放在项目文件夹之外的本地开发服务器（OS windows）上的单独磁盘分区上。我需要在 web 应用程序的 html 页面中访问这些图像文件。

我尝试给出类似的路径：`http://localhost:8080/C://tmp/thumbnails/pl_2001.JPEG`但没有帮助。未提取图像。如何正确访问 html 页面中的此类文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:46:35.663

您将不得不为此使用重写，这样您就不会显示敏感的文件夹名称。

如果您使用的是 php，您可以使用 .htaccess 重写类似的 slug`images/someimage.mime`并拆分/获取之后的内容，`images/`并有一个 php 函数获取文件名并确保它存在，如果您愿意，您可以检查它是否是有效的 mime 然后发送一个标题说它是一个`image/somemime`所以浏览器可以显示图像而不是乱码，它会在没有它的情况下显示。

```
$filename = "C://tmp/" . $file;
if(file_exists($filename)){
    $img = getimagesize($filename);
    if(in_array($img['mime'], array('jpg','jpeg','gif','png','etc'))){
        header("Content-type: image/" . $img['mime']);
        readfile($filename);
    }else{
        //default image
    }
}else{
    //default image
} 
```

我尚未对此进行测试，但它应该让您对入门有所了解。如果这不是您正在寻找的语言，请尝试为您正在使用的语言搜索类似的内容。

# mysql - 为什么这个 group_concat 不起作用？

> ID：15859520
> 
> 赞同：3
> 
> 时间：2013-04-07T06:15:14.063
> 
> 标签：mysql, sql, database, hierarchical-data

我不明白为什么这个 GROUP_CONCAT 不起作用，就外部查询而言，返回了 3 行，所以我想通过它来 group_concat 但它不喜欢它......

[http://sqlfiddle.com/#!2/24764/3](http://sqlfiddle.com/#!2/24764/3)

```
CREATE TABLE nested_category (
        category_id INT AUTO_INCREMENT PRIMARY KEY,
        name VARCHAR(20) NOT NULL,
        lft INT NOT NULL,
        rgt INT NOT NULL
);

INSERT INTO nested_category VALUES(1,'ELECTRONICS',1,20),(2,'TELEVISIONS',2,9),(3,'TUBE',3,4),
 (4,'LCD',5,6),(5,'PLASMA',7,8),(6,'PORTABLE ELECTRONICS',10,19),(7,'MP3 PLAYERS',11,14),(8,'FLASH',12,13),
 (9,'CD PLAYERS',15,16),(10,'2 WAY RADIOS',17,18);

SELECT GROUP_CONCAT(rs.category_id, ',')
FROM 
    (
        SELECT node.category_id, node.name, (COUNT(parent.name) - (sub_tree.depth + 1)) AS depth
        FROM nested_category AS node,
                nested_category AS parent,
                nested_category AS sub_parent,
                (
                        SELECT node.category_id, node.name, (COUNT(parent.name) - 1) AS depth
                        FROM nested_category AS node,
                                nested_category AS parent
                        WHERE node.lft BETWEEN parent.lft AND parent.rgt
                            AND node.name = 'PORTABLE ELECTRONICS'
                        GROUP BY node.name
                        ORDER BY node.lft
                )AS sub_tree
        WHERE node.lft BETWEEN parent.lft AND parent.rgt
                AND node.lft BETWEEN sub_parent.lft AND sub_parent.rgt
                AND sub_parent.name = sub_tree.name
        GROUP BY node.name
        HAVING depth = 1
        ORDER BY node.lft
    ) as rs
GROUP BY rs.category_id 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T06:20:29.940

两件事情：

第一：更改`GROUP_CONCAT(rs.category_id, ',')`为`GROUP_CONCAT(rs.category_id)`

逗号是默认分隔符，[从文档](http://dev.mysql.com/doc/refman/5.7/en/group-by-functions.html#function_group-concat)中您可以看到，如果您想更改分隔符，则类似于 `GROUP_CONCAT(rs.category_id SEPARATOR '|')`

第二：删除最后一个： `GROUP BY rs.category_id`

如果你`group by`each `category_id`，这意味着每个`category_id`都在它自己的集合中，这样`group_concat`每行只有一个类别。

[http://sqlfiddle.com/#!2/24764/7](http://sqlfiddle.com/#!2/24764/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:27:59.147

试试这个查询

```
SELECT GROUP_CONCAT(rs.category_id)
FROM 
    (
        SELECT node.category_id, node.name, (COUNT(parent.name) - (sub_tree.depth + 1)) AS depth
        FROM nested_category AS node,
                nested_category AS parent,
                nested_category AS sub_parent,
                (
                        SELECT node.category_id, node.name, (COUNT(parent.name) - 1) AS depth
                        FROM nested_category AS node,
                                nested_category AS parent
                        WHERE node.lft BETWEEN parent.lft AND parent.rgt
                            AND node.name = 'PORTABLE ELECTRONICS'
                        GROUP BY node.name
                        ORDER BY node.lft
                )AS sub_tree
        WHERE node.lft BETWEEN parent.lft AND parent.rgt
                AND node.lft BETWEEN sub_parent.lft AND sub_parent.rgt
                AND sub_parent.name = sub_tree.name
        GROUP BY node.name
        HAVING depth = 1
        ORDER BY node.lft
    ) as rs 
```

**输出**

```
| GROUP_CONCAT(RS.CATEGORY_ID) |
--------------------------------
|                       7,9,10 | 
```

# c++ - 在 BB10 中使用 OpenGL ES 的 UI

> ID：15859521
> 
> 赞同：0
> 
> 时间：2013-04-07T06:15:16.680
> 
> 标签：c++, user-interface, opengl-es, blackberry-10

我想在 BB10 中使用 OpenGL ES 绘制按钮、菜单等（与 UI 相关的东西）。我怎样才能完成这项任务？任何源代码参考、教程或开发人员指南都将受到高度重视。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:03:14.463

Check the [Gameplay](http://gameplay3d.org) - 针对独立游戏开发者生态系统的开源跨平台 3D 引擎。它还带有[UI 组件](https://github.com/blackberry/GamePlay/wiki/User-Interface)。

# javascript - 如何使用 express 中的函数在我的 Jade 模板中呈现内容？

> ID：15859530
> 
> 赞同：0
> 
> 时间：2013-04-07T06:16:27.317
> 
> 标签：javascript, node.js, express

我有一个有效的用户注册/登录页面，唯一剩下的就是根据用户是否登录来制作内容。阅读后我想出了这个：

```
app.use(function(req, res, next) {
  db.users.find({rememberToken: req.cookies.rememberToken}, function(err, foundUser) {
    if (err) { next(); }

    if (foundUser[0].length === 0) {
      res.locals.isLoggedIn = false;
      next();
    } else {
      res.locals.isLoggedIn = true;
      next();
    }
  });
}); 
```

然后只是为了测试它，我在我的 Jade 模板中做了这个：

```
!!!
html
 head
  #{isLoggedIn()} 
```

但所发生的只是它说 isLoggedIn 没有定义。

我找不到太多关于这个主题的文档，所以任何信息都会很棒。谢谢！

我基本上想让函数返回 true 或 false，以便我可以根据它加载内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T07:01:48.223

首先，要获得函数的结果，您必须调用该函数，而不是像您那样渲染元素。要调用该函数，请使用以下语法：

```
p #{isLoggedIn()} 
```

要呈现 HTML/jade 的一部分，您可以使用类似

```
- if (isLoggedIn())
  p User is logged in 
```

您的代码示例的真正问题是您正在从您的视图访问数据库，并且您正在从您的视图中使用一个回调（下一个），这将不起作用。一种更好的工作方式是使用一些中间件`isLoggedIn`在你的 res.locals 中设置一个字段。

```
var isLoggedIn = function(req, res, next) {
  db.users.find({rememberToken: req.cookie.rememberToken}, function(err, foundUser) {
    if (err) { console.log('We have an error ' + err ); next();}

    if (foundUser[0].length === 0) {
        console.log('We could not find the user with the rememberToken ' + req.cookie.rememberToken);
        res.locals.isLoggedIn = false;
        next();
    } else {
        console.log('We found the user with the rememberToken ' + req.cookie.rememberToken);
        res.locals.isLoggedIn = true;
        next();
    }
  });
};

app.get('/yourroute', isLoggedIn, routes.yourroute); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:50:15.577

你可以让它工作：

```
!!!
html
 head
  | #{isLoggedIn()} 
```

或者在条件语句中：

```
!!!
html
  head
  - if (isLoggedIn())
    // do something
  - else
    // do something else 
```

但是为什么不创建`isLoggedIn`一个布尔变量而不是一个函数呢？我很确定从 Jade 调用异步函数是行不通的。

# c++ - 只编译 if-else 的一部分

> ID：15859533
> 
> 赞同：0
> 
> 时间：2013-04-07T06:16:44.637
> 
> 标签：c++, if-statement, preprocessor-directive

请看下面的代码

```
#include <iostream>
using namespace std;

    int main (){
        #if true
            int fd = 0;

        #else
            int dd =0;
        #endif
        cout<<fd;
        //cout<<dd;

        system("pause");
        return 0;
    } 
```

在这里，我试图只编译一个块。如果 'if' 编译，那么 'else' 不应该，同样明智。但这不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T06:43:33.833

对于条件编译，代码必须如下所示：

```
#include <iostream>
using namespace std;

int main (){
    #ifdef Somedef
        int fd = 0;
        cout<<fd;
    #else
        int dd =0;
        cout<<dd;
    #endif
    system("pause");
    return 0;
} 
```

然后在编译代码时为定义提供命令行参数，例如：gcc -DSomedef test.c -o test 以包含代码并删除用于删除代码的命令行定义

注意：您已经为条件编译检查了“#if true”，该语句将始终为真，因此在编译时将包含该部分代码。

# python-2.7 - 使用pylab在python中绘制数据点

> ID：15859534
> 
> 赞同：5
> 
> 时间：2013-04-07T06:16:46.580
> 
> 标签：python-2.7, matplotlib

![在此处输入图像描述](https://i.stack.imgur.com/zHJLf.png)我有我必须绘制的数据

X = [0,1,2,3,4,5] Y = [6,7,8,9,10,11,12,13,14,15]

X 属于 1 类，所以我希望它们被绘制成绿色，而 Y 属于 2 类，所以我希望它们被绘制成蓝色。

我所做的是，

```
import pylab as pl
pl.plot(X,'go')
pl.plot(Y,'bo')
pl.show() 
```

但这是在绘制 X 和 Y。我想在图表中显示的只是分别以绿色和蓝色显示的点 X 和 Y。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:43:12.620

它不会将 X 与 Y 绘制成图，只是因为 X 和 Y 的长度不同。假设`x`是变量（水平轴）和`y`结果（垂直轴）。通常你写`pl.plot(x,y)`, where`x`和`y`是相同长度的列表。如果您只提供一个列表，则假定您只提供了一个列表，`y`matplotlib 将为您创建一个 x 轴，如下所示：

```
import pylab as pl

y1 = [0,1,2,3,4,5] 
y2 = [6,7,8,9,10,11,12,13,14,15]

x1 = range(len(y1))
x2 = range(len(y2))

pl.plot(x1, y1,'go')
pl.plot(x2, y2,'bo')
pl.show() 
```

所以我认为在你的情况下你应该定义x轴。

# c - 有没有办法丢弃'\ n'？

> ID：15859540
> 
> 赞同：4
> 
> 时间：2013-04-07T06:17:31.233
> 
> 标签：c, string, buffer

我正在尝试记录用户的响应（使用`getchar()`）。我在`'\n'`插入缓冲区时遇到问题。如果我使用`fgets(char* buf, .. , ..)`,`'\n'`再次进入`buf`，您必须`'\n'`在测试字符串的末尾包含。使用 string.h 函数时（如`strcmp()`）。是否有任何干净的方法可以为此目的编写代码。

```
 #include<stdio.h>
    #include<string.h>
    int main()
    {
    char buf[100];
    fgets(buf, 3, stdin);
    puts(buf);
    int i = strcmp("p\n", buf);
    printf("%d", i);
    //if (!strcmp("CLock to random\n", buf))
    //{
    //puts("sucess");
    //}
    char c;
    c = getchar();
    putchar(c);
    return 0;
    } 
```

现在我想记录响应（单个字符'p'）。如果我使用 getchar() 代替 fgets()，程序会跳过第二个 getchar()(c = '\n')。如果我使用当前代码，我每次都必须在 strcmp() 中包含 \n 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T06:23:34.143

如果要丢弃`\n`：

```
char buf[0x1000];
fgets(buf, sizeof(buf), stdin);
char *p = strchr(buf, '\n');
if (p) *p = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T06:32:32.490

```
#include <stdio.h>
#include <string.h>

char* chomp(char* str){
    size_t len = strlen(str);
    if(len>0 && str[len-1] == '\n')
        str[len-1] = '\0';
    return str;
}

int main(void){
    char buf[128];

    fgets(buf, sizeof(buf), stdin);
    printf("<%s>\n", buf);  //include newline
    printf("<%s>\n", chomp(buf));//drop tail newline
    printf("<%s>\n", chomp(buf));//NC

   return 0;
} 
```

# mysql - MySQL查询，从一张表中查找并插入到第二张表中

> ID：15859544
> 
> 赞同：1
> 
> 时间：2013-04-07T06:18:20.940
> 
> 标签：mysql, sql, sql-update

我正在寻找以下内容：

![在此处输入图像描述](https://i.stack.imgur.com/D1K7U.png)

*   需要具有此条件的行：设备列的常用值和两个表中接口列的前三个字符。

*   然后从Table1中匹配上述条件的行，取出Specified列的值，存储在上述条件匹配的行的Table2的Avgin列中。

有人可以帮我吗？数据库是 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:29:48.763

如果有多个匹配项，则仅使用第一个匹配项。如果没有，将使用 null。如果您想要其他内容，请使用`ifnull()`.

```
UPDATE
  table2
SET
  avgin=ifnull(
    (
      SELECT
        Specified
      FROM
        table1
      WHERE
        table1.Device=table2.Device
        AND substring(table1.Interface,1,3)=substring(table2.Interface,1,3)
      LIMIT 1
    ),
    'default value'
  ) 
```

**编辑**：添加`ifnull()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:32:30.190

`UPDATE`with`JOIN`是您在这里需要的，如下所示：

```
UPDATE Table2 AS t2
INNER JOIN table1 AS t1  ON LEFT(t2.Interface, 3) = LEFT(t1.Interface, 3)
                        AND t1.Device             = t2.Device
SET t2.Avgin = t1.specified; 
```

`JOIN`正如您在问题中所解释的那样：

```
 LEFT(t2.Interface, 3) = LEFT(t1.Interface, 3)
 AND 
 t1.Device             = t2.Device 
```

[`LEFT`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_left)将为您提供两个表左侧的前 3 个字符。

在这里查看它的实际效果：

*   [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/0db8c/1)

这将使`table2`看起来像：

```
|         CID |       DEVICE | INTERFACE |  AVGIN |
---------------------------------------------------
| HDC-HKG-R01 | HDC-TBONE-P1 |   P09/0/0 | 121.36 |
| OCB-OCD-R01 |      OCB-PE1 |     Gi5/2 |   0.17 |
| HDC-BSA-R01 | HDC-TBONE-P1 |   Se9/2/0 | (null) | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T06:34:11.357

使用它来确认您获得了您期望的行（即在更新任何内容*之前）：*

```
SELECT
  t1.Specified

FROM
  table2 t2

  INNER JOIN table1 t1
  ON t1.device = t2.device
  AND LEFT(t1.interface,3) = LEFT(t2.interface,3) 
```

然后，假设这是正确的：

```
 UPDATE table2 t2

  INNER JOIN table1 t1
  ON t1.device = t2.device
  AND LEFT(t1.interface,3) = LEFT(t2.interface,3)

  SET t2.Avgin = ifnull(t1.specified,'Default Value For When t1.Specified is NULL') 
```

请注意，我们使用的是 INNER 连接...这意味着 table2 中在 table1 中没有相应行的行将从结果中丢弃（这是您想要的）。

这`IFNULL`将允许您在连接成功的情况下使用默认值（因为两个表`device`的前三个字符`interface`是通用的），但`table1.specified`该行的值为 NULL。

# ios - 如何从特定位置加载视频

> ID：15859549
> 
> 赞同：1
> 
> 时间：2013-04-07T06:18:48.840
> 
> 标签：ios, objective-c, avplayer

我了解 AVPlayer 的想法以及如何使用它来加载和播放视频。我的问题是如何从屏幕锁定/应用程序背景中恢复播放器。通过恢复，我的意思是，例如用户在视频播放 30:00 分钟时退出播放器。所以稍后，当用户回到播放器时，视频应该从 30:00 重新加载到结束，而不是从 0:00 加载。

我用谷歌搜索了如何实现这一点，但在我看来，我唯一的选择是首先在 0:00 加载视频，然后快速将 seekToTime 加载到 30:00。有没有更好的办法？首先加载 0:00 听起来并不理想......

顺便说一句，我在这里播放的视频 URL 是在本地网络的服务器上以 m3u8 格式获取的。播放器是一个 iOS 应用程序。

提前致谢！

# facebook - Facebook 应用图片发布问题

> ID：15859550
> 
> 赞同：0
> 
> 时间：2013-04-07T06:18:52.583
> 
> 标签：facebook, facebook-php-sdk

我是一名 facebook 应用程序开发人员，我通常会创建照片应用程序，在用户的墙上发布随机照片。

但问题是当我的应用程序在用户的墙上发布图片时，它显示如下：“3 月 3 日通过查找您的昵称”

我看到了一些其他应用程序发布的图像，例如：“Adam 使用[http://apps4urlife.com](http://apps4urlife.com)找到了结果。”

我的应用程序显示如下：

![http://i.imgur.com/6i2L8mw.png](https://i.stack.imgur.com/kDTzN.png)

我希望它显示如下：

![在此处输入图像描述](https://i.stack.imgur.com/a7lIk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:56:51.917

对于这种帖子，您需要使用`facebook-opengraph`，查看[文档](http://developers.facebook.com/docs/opengraph/using-actions/) 。您将需要创建一个名为的对象并将`result`操作`find`与该`result`对象相关联。

# ruby - 使用新的管理界面在 Padrino 0.11 中实现记住我

> ID：15859551
> 
> 赞同：1
> 
> 时间：2013-04-07T06:18:53.230
> 
> 标签：ruby, authentication, cookies, sinatra, padrino

我正在尝试在新的 Padrino 0.11 管理界面中实现“记住我”功能，但由于它与 Rails 之间的差异而遇到了一些麻烦。基本上，我正在关注[http://railscasts.com/episodes/274-remember-me-reset-password](http://railscasts.com/episodes/274-remember-me-reset-password)。

我已经设法让 Remember Me 和 auth_token 轻松工作，当我去查看它时，我可以在开发控制台中看到 cookie。我在弄清楚如何让应用程序在 cookie 存在时对它进行自动登录时遇到了很多*麻烦*。我敢肯定这很愚蠢，但这就是我要做的。

例如，我已经通过会话控制器中的 this 在 Chrome 的开发控制台中创建了一个实际的记住我创建 auth_token 并将其设置为 cookie（我可以在 localhost 上看到）。

*管理员/控制器/会话*

```
post :create do
  if account = Account.authenticate(params[:email], params[:password])
    set_current_account(account)
    if params[:remember_me]
      response.set_cookie('da_app', value: account.auth_token,
                              expires: (Time.now + 1.year + 1.day))
    end
    flash[:success] = "You've successfully logged in as #{account.name}."
    redirect url(:base, :index)
  else
    params[:email], params[:password] = h(params[:email]), h(params[:password])
    flash[:error] = pat('login.error')
    redirect url(:sessions, :new)
  end
end 
```

但是，由于我对 padrino 的经验不足，对于我将在传入请求之前触发、检查 cookie 然后将用户登录的逻辑放置在哪里有点难过。我尝试了以下方法，这并不完美但这绝对是行不通的（尽管不确定为什么... =< ），事实上，检测 cookie 的代码块甚至似乎都没有被触发（这看起来很基本。）。

*admin/app.rb （不确定这实际上是正确的地方）*

```
before '/*' do
  if request.cookies['da_app'].exists?
    set_current_account(Account.find_by_auth_token(request.cookies['da_app']))
    redirect url(:base, :index)
  end
end 
```

所以，我敢肯定它可能很容易解决，但在这个问题上有点难过（而且，我现在真的试图避免使用像 padrino-warden 之类的 gem 插件，并从头开始实现它作为练习.)。

*（此外，帮助解决这个问题的额外业力点，因为我正在实施这个作为全球保护慈善机构的一些无偿工作的一部分。）*

# ember.js - Ember-Rails 和命名空间模板

> ID：15859552
> 
> 赞同：9
> 
> 时间：2013-04-07T06:19:12.210
> 
> 标签：ember.js, ember-rails

我有一个 Rails 应用程序，它被命名为三个部分（几乎 3 个共享模型的应用程序）。我希望每个命名空间部分都有自己的 Ember 应用程序。这些应用程序永远不会以相同的布局加载，因此不必了解彼此的任何信息。事实上，当应用程序最终可以真正拆分时，我希望尽可能地保持代码分离。

我正在尝试使用 ember-rails gem 来做到这一点。

基本上就像这个问题： [如何使用 ember-rails gem 为我的 HandlebarsJS 模板指定替代目录？](https://stackoverflow.com/questions/14948410/how-can-i-specify-an-alternative-directory-for-my-handlebarsjs-templates-with-th)

那里的答案有效，但我很确定使用 templates_root 将我限制在一个命名空间中。所以我不能同时拥有 admin.js 和 admin/templates 命名空间以及 customer.js 和 customer/templates 命名空间。

那么有谁知道 ember-rails 是否会支持多个命名空间的 Ember 应用程序并因此呈现多个模板根？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-14T06:19:35.470

正如[此处](https://github.com/emberjs/ember.js/pull/2354)发布的那样，您可以通过向每个应用程序添加自定义解析器来拥有命名空间模板。

```
App1 = Ember.Application.create({
  Resolver: Ember.DefaultResolver.extend({
    resolveTemplate: function(parsedName) {
      parsedName.fullNameWithoutType = "app1/" + parsedName.fullNameWithoutType;
      return this._super(parsedName);
    }
  })
});

App2 = Ember.Application.create({
  Resolver: Ember.DefaultResolver.extend({
    resolveTemplate: function(parsedName) {
      parsedName.fullNameWithoutType = "app2/" + parsedName.fullNameWithoutType;
      return this._super(parsedName);
    }
  })
});

App3 = Ember.Application.create({
  Resolver: Ember.DefaultResolver.extend({
    resolveTemplate: function(parsedName) {
      parsedName.fullNameWithoutType = "app3/" + parsedName.fullNameWithoutType;
      return this._super(parsedName);
    }
  })
}); 
```

# python - Echo Nest Earworm 分析小型 mp3 的问题

> ID：15859553
> 
> 赞同：0
> 
> 时间：2013-04-07T06:19:13.597
> 
> 标签：python

好的大家，这个是超级小众：

我正在尝试使用 earworm.py 代码来分析非常短的 mp3/曲目（最少 1 秒）的音色和音高特征；但是，代码没有返回任何特征和一个空图。

问题似乎源于函数 get_central(analysis, member='segments')。对于短音轨，'"member = getattr(analysis, member)" 返回空。

为什么是这样？有没有我可以使用的快速修复方法，比如将“member='segments'”更改为更细粒度的东西？

有没有办法使用 EchoNest 从如此短的音轨中提取音色和音高特征？

# php - PHP 除法与指数

> ID：15859555
> 
> 赞同：0
> 
> 时间：2013-04-07T06:19:41.620
> 
> 标签：php, math, division, exponent

在互联网上进行一些搜索后，我还没有找到我需要的资源......我认为，我有一个关于 PHP 中的数学函数的非常简单的问题。

我正在计算一个 ELO 函数（用于团队排名），但不确定我使用的是什么 PHP 数学函数。这是数学函数：http: [//images.wikia.com/leagueoflegends/images/math/5/2/0/5209563cdf8a0d5b21ccc7c08d05c52b.png](http://images.wikia.com/leagueoflegends/images/math/5/2/0/5209563cdf8a0d5b21ccc7c08d05c52b.png)

我不知道如何在 PHP 中制定数学公式。非常感谢任何帮助......我很困惑。做基本除法不是问题，但我不知道如何输入指数。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T06:22:50.910

尝试这个：

```
$Rb = 65; // Set these values according to your data
$Ra = 50;

$Ea = 1 / (1 + pow(10, ($Rb - $Ra)/400)) // $Ea will have the result 
```

查看[PHP 数学函数](http://www.php.net/manual/en/ref.math.php)以获取有关 php 中所有可用数学函数的文档。

# java - 哈希表大小设置

> ID：15859558
> 
> 赞同：1
> 
> 时间：2013-04-07T06:20:41.230
> 
> 标签：java, arrays, algorithm, hash

`array`在创建a`Hashtable`之前，您是否总是需要知道 a 的大小`array`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T06:25:33.760

不，你没有。质量实现 ( `Hashtable`/ `HashMap`) 将随着元素数量的增加而自动调整大小。

如果您谈论的是您自己的实现，答案取决于哈希表是否能够随着其大小的增长而增加存储桶的数量。

如果您担心调整大小对性能的影响，正确的方法是在整个应用程序的上下文中对此进行分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:27:15.327

不，实际上将其固定为某个值是不好的。有关更多信息，您可以从[Wikipedia](http://en.wikipedia.org/wiki/Hash_table#Dynamic_resizing)开始。

# jsf - selectBooleanCheckBox 在 p:dialog 中不能单独工作

> ID：15859559
> 
> 赞同：0
> 
> 时间：2013-04-07T06:21:04.913
> 
> 标签：jsf, jsf-2, primefaces

我有按钮，当我单击它时，会出现对话框，在该对话框中，我有`p:selectBooleanCheckBox`和`h:outputlable`。

第一个问题是当 p:dialog 出现时我不能`p:selectBooleanCheckBox`单独选择。这意味着当我点击其中一个时，全部`p:selectBooleanCheckBox` 选择。

`p:commandButton`第二个问题是当我在对话框中单击时，`actionListener`工作但它不会消失并且它会永久显示。我认为问题是由 Ajax 引起的。你能告诉我如何解决这个问题吗？

```
 <h:panelGrid>
                <p:dialog  appendToBody="true"  header="Selected Values" modal="false" showEffect="fade" hideEffect="fade" widgetVar="dlg">  
                        <h:panelGrid columns="1" id="display">  
                            <p:dataGrid id="AcceptDataGrid" var="tBusinessPartnerRequestInfo" value="#{inviteRequestManagedBean.filterBusinessRequest()}"
                                        columns="1" >
                                <tr>
                                    <td>
                                        <p:selectBooleanCheckbox/>
                                    </td>
                                    <td>
                                        <h:outputLabel value="test"/>
                                    </td>
                                </tr>
                            </p:dataGrid>
                        <p:commandButton  id="acceptCommonButton" value="#{inviteRequest_msg.accept}"  
                                          actionListener="#{inviteRequestManagedBean.acceptRequest(tBusinessPartnerRequestInfo.id)}" 
                                          update="display" />
                        </h:panelGrid> 

                </p:dialog>
            </h:panelGrid> 
```

* * *

```
 <table style="width: 100%" id="tabell">
                <p:selectOneButton  value="#{inviteRequestManagedBean.filterType}">  
                    <f:selectItem itemLabel="#{inviteRequest_msg.request}" itemValue="request" />  
                    <f:selectItem itemLabel="#{inviteRequest_msg.archive}" itemValue="archive" />   
                    <f:ajax event="change"  execute="@form" render="@form" />             
                    <tr>
                        <td>
                            <p:panel></p:panel>

                            <p:dataGrid id="requestDataGrid" var="tBusinessPartnerRequestInfo" 
                                        value="#{inviteRequestManagedBean.filterBusinessRequest()}" columns="1" >

                                <p:column>
                                    <div>
                                        <table border="0"  width="100%">
                                            <tr>
                                                <td>
                                                    <p:graphicImage value="#{tBusinessPartnerRequestInfo.partySender_imageUrl}"/>
                                                </td>
                                                <td>
                                                    <div>
                                                        <table border="0" width="100%">
                                                            <tr>
                                                                <td>
                                                                    <h:outputLabel value="#{tBusinessPartnerRequestInfo.requestDate}"/>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <h:outputLabel value="#{tBusinessPartnerRequestInfo.partySender_fullName}"/>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </td> 
```

这是 p:dialog 调用的地方

```
 <td>

                         <p:commandButton  id="acceptCommonButton" value="#{inviteRequest_msg.accept}"
                                                                      onclick="dlg.show()" />
                                                </td>

                                                <td>
                                                    <p:commandButton  id="noNowCommonButton" value="#{inviteRequest_msg.notnow}"  
                                                                      actionListener="#{inviteRequestManagedBean.notNowRequest(tBusinessPartnerRequestInfo.id)}" 
                                                                      update="@form" />
                                                </td>
                                                <p:blockUI block="acceptCommonButton" trigger="acceptCommonButton"/>
                                                <p:blockUI block="noNowCommonButton" trigger="acceptCommonButton"/>
                                                <p:blockUI block="acceptCommonButton" trigger="noNowCommonButton"/>
                                                <p:blockUI block="noNowCommonButton" trigger="noNowCommonButton"/>

                                                <td>
                                                    <p:panel>
                                                        <p:ajaxStatus>
                                                            <f:facet name="start">
                                                                <p:graphicImage value="../resources/img/loading.gif"/>
                                                            </f:facet>
                                                            <f:facet name="complete">
                                                                <h:outputLabel value=""/>
                                                            </f:facet>
                                                        </p:ajaxStatus>
                                                    </p:panel>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <hr/>
                                </p:column>
                            </p:dataGrid>                   
                        </td>
                    </tr>
                </p:selectOneButton>

            </table>

    </h:panelGrid>
    <h:panelGrid>
        <p:dialog  appendToBody="true"  header="Selected Values" modal="false" showEffect="fade" hideEffect="fade" widgetVar="dlg">  
                <h:panelGrid columns="1" id="display">  
                    <p:dataGrid id="AcceptDataGrid" var="tBusinessPartnerRequestInfo" value="#{inviteRequestManagedBean.loadPartyRelationShipType()}"
                                columns="1" >
                        <tr>
                            <td>
                                <p:selectBooleanCheckbox/>
                            </td>
                            <td>
                                <h:outputLabel value="test"/>
                            </td>
                        </tr>
                    </p:dataGrid>
                 <p:commandButton  id="acceptCommonButton" value="#{inviteRequest_msg.accept}"  
                                  actionListener="#{inviteRequestManagedBean.acceptRequest(tBusinessPartnerRequestInfo.id)}" 
                                  update="display" oncomplete="dlg.hide()"  />

                </h:panelGrid> 

        </p:dialog>
    </h:panelGrid>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:47:19.143

你的标记有点吓人，我不明白为什么你的`<p:selectOneButton`（所有的`<tr>`）里有这么多东西，所以当我开始理解你试图实现的目标时，我不会试图纠正一切，我会给你一个工作的例子。

示例.java

```
public class Sample implements Serializable {

    private String name;

    private boolean checked;

    public Sample() {
    }

    public Sample(String name, boolean checked) {
        this.name = name;
        this.checked = checked;
    }

    // Getter and Setter for name and checked omitted
} 
```

SampleBean.java

```
@ManagedBean
@ViewScoped
public class SampleBean implements Serializable {

    private List<Sample> samples;

    private Sample currentSample;

    public void prepareEdit(Sample sample) {
        this.currentSample = sample;
    }

    public void edit() {
        // Do what you need to do with sample
        // You can get it with : this.currentSample
        RequestContext.getCurrentInstance().execute("dlg.hide()");
    }

    public List<Sample> getSamples() {
        if (this.samples == null) {
            this.samples = new ArrayList<Sample>();

            for (int i = 1; i <= 10; ++i) {
                this.samples.add(new Sample("Sample n°" + i, (i % 3 == 0)));
            }
        }
        return samples;
    }

    public void setSamples(List<Sample> samples) {
        this.samples = samples;
    }

    public Sample getCurrentSample() {
        return currentSample;
    }

    public void setCurrentSample(Sample currentSample) {
        this.currentSample = currentSample;
    }
} 
```

视图.xhtml：

```
<h:form id="myForm">
    <p:dataTable value="#{sampleBean.samples}" var="sample">
        <p:column headerText="Name">
            <h:outputText value="#{sample.name}" />
        </p:column>
        <p:column headerText="Checked?">
            <h:outputText value="#{sample.checked}" />
        </p:column>
        <p:column style="width: 1px; text-align: center;">
            <p:commandButton value="edit"
                             actionListener="#{sampleBean.prepareEdit(sample)}"
                             update=":dialog"
                             oncomplete="dlg.show()" />
        </p:column>
    </p:dataTable>
</h:form>
<p:dialog id="dialog" widgetVar="dlg" header="Editing">
    <h:form rendered="#{!empty sampleBean.currentSample}">
        <h:outputText value="Current sample is #{sampleBean.currentSample.name}" />
        <br />
        <p:selectBooleanCheckbox value="#{sampleBean.currentSample.checked}" />
        <br />
        <p style="width: 100%; text-align: center;">
            <p:commandButton actionListener="#{sampleBean.edit()}"
                             value="Edit"
                             update="@form :myForm" />
        </p>
    </h:form>
</p:dialog> 
```

如您所见，我正在存储一个`currentSample`( `sampleBean` **must** be `@ViewScoped`)，它可以帮助我使用正确的当前信息呈现自定义对话框。

我对您的绑定问题的最后评论`<p:selectBooleanCheckbox`很重要，因为只有当它基于上下文绑定到不同的端点时，您才能获得自定义复选框值（此处`currentSample`）。

如果您有不清楚的地方，请随时发表评论！

# javascript - 根据日期从数组中提取值？

> ID：15859564
> 
> 赞同：0
> 
> 时间：2013-04-07T06:22:05.243
> 
> 标签：javascript, arrays, date, time

我有一组数据点`[date, value]`，就像这样......

```
data_points = [[1310279340, 1], [1310279340, 1]] 
```

我需要创建一个基于“毫秒前”的数组，每秒有十个值，或者每 100 毫秒后退一个值。

新数组的值看起来像`[ms ago, value]`，，像这样......

```
ms_ago_points = [[0,3],[100,6],[200,7]] 
```

所以该数组中的最后一个值表示 [200 毫秒前，值为 7]。

我很难弄清楚如何根据第一个数组中的日期值获取“Xms 前的值”。如果需要，如果轮询数据更容易，我可能能够以数组以外的格式获取初始日期/值。

感谢您的任何指导！

编辑：我希望在它们之间每 100 毫秒滴答声在日期之间重复相同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:22:38.660

```
var now = Date.now(),
    l = data_points.length,
    ms_ago_points = [];

for ( var c = 0; c < l; c++ ) {
  ms_ago_points.push([now - data_points[c][0],data_points[c][1]);
} 
```

也许你需要在`ms_ago_points`之后对它们进行排序，但这应该会给你你想要的数组。 **但是**：我强烈建议您不要使用多维数组，而是使用对象：

```
ms_ago_points= [{ms: 0, value: 3},{ms:100, value: 6}...] 
```

*编辑：这当然假设您`data_points`已经在 100 毫秒的步骤中，否则您必须实现插值:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:40:09.573

我相信这符合您的要求：

```
function msFromDataPoints(nowTime, dataPoints) {
    var d = dataPoints.length,
        i = 0,
        anchor = Math.floor(nowTime.getTime() / 100) * 100,
        ms = anchor,
        msArr = [];
    while (d--) {
        while (ms >= data_points[d][0] * 1000) {
            msArr.push([anchor - ms, dataPoints[d][1]];
            ms -= 100;
        }
    }
    return msArr;
} 
```

[在Js Fiddle](http://jsfiddle.net/ErikE/52Dgc/)中看到它。

注意：我发现数据结构有点奇怪。输入的对象似乎最好：

```
[{date: 1310279340, value: 1}, {date: 1310279340, value: 1}] 
```

而且您的输出数组根本不需要毫秒，因为简单`[1, 1, 5, 5, 3, 2 4]`（或其他）将被理解为意味着毫秒索引从 0 开始并增加 100。如果绝对需要，您可以使用稀疏数组：

```
result = [];
result[0] = 1;
result[100] = 1;
result[200] = 5; // and so on 
```

# twitter-bootstrap - Twitter Bootstrap - 如何根据@media 定义的宽度更改 css 类

> ID：15859566
> 
> 赞同：6
> 
> 时间：2013-04-07T06:22:10.850
> 
> 标签：twitter-bootstrap, responsive-design

这是我在这里的第一个问题，但我只想说这个网站多年来帮助了我无数次。我想我已经到了有自己的问题要问的阶段！

抱歉，如果问题不清楚，我会尝试详细说明：我已经为我的一些元素分配了一个过渡，这样当它们悬停在上面时，它们会向上上升（即；`.example:hover {margin-top: -25px}`）。

你可以看到我在[这个](http://edmundreed.co.uk/bootstrap/)页面上应用了这个。

将鼠标悬停在“即将推出”警报框下方的元素上（即“Pixel Perfect Designs”、“Beautifully Clean Code”和“Over 5 years Experience”）。

一切正常，但是您会注意到，当浏览器窗口重新调整到足够小以使元素垂直堆叠（我相信这是`@media (max-width: 767px)`）时，悬停效果似乎不太干净。当网站以这种方式显示时（对于移动设备），我想完全删除效果。

所以问题是如何根据浏览器的宽度更改类的属性？我想在为移动设备显示时（即< 767px）悬停时删除边距顶部，但在正常查看时将其保留在那里。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T06:10:07.733

你只需要添加一个小东西。

```
@media (max-width: 767px) {
  .shift:hover {
    margin-top: 0;
  }
} 
```

如果在小型设备上工作，那么使用过渡属性有什么好处，因为我们不希望对此视口有任何更改/影响。所以添加它也是为了在移动浏览器上快速渲染。

```
@media (max-width: 767px) {
  .shift {
    transition:none;
    -webkit-transition:none;
    -moz-transition:none;
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T06:38:32.633

只需`@media`像这样包装相应的 CSS 规则：

```
@media (min-width: 768px) {
    .example:hover {
        margin-top: -25px;
    }
} 
```

请注意，我使用的是 min-width - 这*不包括*“电话”视图中的规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T14:09:11.320

样式来自您拥有的 docs.css：

```
.shift:hover {
margin-top: 40px !important;
} 
```

正如@dequis 所指出的，@media 查询是要走的路。由于当 3 列堆叠在移动屏幕上时悬停效果效果不佳，一种可能性是您可以删除垂直过渡并用水平过渡替换它，在 docs.css 中添加如下内容：

```
@media (max-width: 767px) {
.shift:hover {
margin-top: 0 !important; /* it's possible this might need some fine-tuning */
margin-right: -20px;
}

} 
```

一旦它到位，这可能需要一些调整，如果需要的话，这会很容易。

祝你好运！

# android - Android：将文本设置为文本框的滞后

> ID：15859574
> 
> 赞同：0
> 
> 时间：2013-04-07T06:23:22.787
> 
> 标签：android, performance, lag

该程序需要尽可能少的滞后。不幸的是，`inputWord.setText("");`在下面的代码中给出了轻微的滞后。有没有办法绕过这个滞后？非常感谢您的帮助。

```
public void addInputWordListener(){
    inputWord.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {
            if(s.toString().equals("")){
                topView.setTextColor(Color.WHITE);
                return;
            }

            if (s.toString().endsWith(" ")){    //submitting a word
                token = s.toString().trim();
                System.out.println("1");
                if (token.equalsIgnoreCase(topView.getText().toString())){
                    System.out.println("2");
                    inputWord.setText("");
                    System.out.println("3");
                    topView.setText(midView.getText());
                    System.out.println("4");
                    midView.setText(botView.getText());
                    System.out.println("5");
                    botView.setText(MainMenu.we.nextWord());
                    System.out.println("6");

                }else
                {
                    topView.setTextColor(Color.RED);

                }
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

        public void onTextChanged(CharSequence s, int start, int before, int count) {}

    });
} 
```

以下是可疑运行的 LogCat 输出：

```
04-07 02:41:10.539: I/System.out(13152): 1
04-07 02:41:10.539: I/System.out(13152): 2
04-07 02:41:10.549: I/System.out(13152): 3
04-07 02:41:10.549: I/System.out(13152): 4
04-07 02:41:10.549: I/System.out(13152): 5
04-07 02:41:10.549: I/System.out(13152): 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:12:35.303

删除`System.out.println`，这些都严重影响了你的“表现”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:58:09.220

你刚刚被[观察者效应](http://en.wikipedia.org/wiki/Observer_effect_%28information_technology%29)所吸引。

正如 Gabe Sechan 已经说过的，日志很慢，而且它们显示的时间也可能不准确。

尝试在中间之前和中间使用 SystemClock.uptimeMills() 并在您确实需要时减去并打印它们，但是少于几毫秒的时间差根本不准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T07:20:23.017

您还可以通过只转换一次 String 来加快速度：

```
 String inputString = s.toString(); 
```

然后使用 inputString 进行所有比较

您还可以在 TextViews 上缓存文本（即在活动中保留一个副本），以节省必须执行所有 getText() 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T07:00:55.250

`inputWord.setText("");`用替换后看看是否有任何变化`s.clear();`。

# c# - CMake-Made VS2010解决方案中的C#项目必须卸载/重新加载以避免被跳过

> ID：15859576
> 
> 赞同：0
> 
> 时间：2013-04-07T06:23:51.363
> 
> 标签：c#, visual-studio-2010, cmake

我正在使用 CMake 生成具有 C/C++ 项目的 VS2010 解决方案：本机控制台应用程序、静态库和本机 DLL；和 C# 项目：托管控制台应用程序和托管 DLL。
我正在使用带有`include_external_msproject`+`CONFIGURE_FILE`技术的CMake，如此[处](https://stackoverflow.com/a/15418074/135862)所述。

但是，生成的解决方案不断跳过 C# 项目的构建。
在[此](https://stackoverflow.com/a/5243034/135862)之后，如果我“卸载项目”然后“重新加载项目”，项目现在可以正确构建。
每次我用 CMake 重新“生成”解决方案时，我都必须这样做。

为什么会这样？
有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-06T10:54:39.307

这里有同样的问题。

我们的 cmake 生成的解决方案为 Win32 和 x64 平台创建了配置，而外部 C# 项目具有 x86 和 x64 平台。cmake生成解决方案后，所有项目（内部和外部）都设置为使用平台Win32。（检查解决方案配置管理器。）

要强制 cmake 将外部项目包含为 x86，请在调用 include_external_msproject 时指定 PLATFORM 参数。

```
include_external_msproject(TestApp "/TestApp/TestApp.csproj" PLATFORM x86) 
```

（当然要确保您只为 x86 版本执行此操作......）

# css - CSS阴影作为图像

> ID：15859577
> 
> 赞同：0
> 
> 时间：2013-04-07T06:24:14.443
> 
> 标签：css

我有这3个盒子

![在此处输入图像描述](https://i.stack.imgur.com/RmL85.jpg)

其构造方式如下：

```
 <ul class="home_boxs">
        <li class="home_box light_blue">
        <div class="news clearfix"></div>
        </li>
        <li class="home_box blue">
        <div class="news clearfix"></div>
        </li>
        <li class="home_box dark_blue">
        <div class="news clearfix"></div>
        </li>
    </ul> 
```

我现在要做的是在每个框下方添加一个小阴影图像（自定义 png）。实现这一目标的最佳方法是什么？一些建议将不胜感激。

见样本：

![在此处输入图像描述](https://i.stack.imgur.com/jJ9tA.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:43:59.830

你可以这样做：

```
ul {
    list-style: none;
}
li {
    float: left;
}
.home_box {
    position: relative;
    width: 150px; /* to change with your size */
    height: 100px;
    /* To add more styling according to your needs */
}
.home_box:before {
    content:' ';
    position: absolute;
    width: 100%;
    height: 10px;
    background: url(//placehold.it/150x10); /* placeholder */
    border-radius: 50%;
    bottom: -20px;
} 
```

或者，如果您不想使用图像：

```
.home_box:before {
    content:' ';
    position: absolute;
    width: 100%;
    height: 10px;
    background-color: #999999;
    border-radius: 50%;
    bottom: -20px;
    box-shadow: 0 0 10px #999999;
} 
```

有图示例 -[无](http://jsfiddle.net/ragnarokkr/tfe3E/)图[示例](http://jsfiddle.net/ragnarokkr/spL23/)

# android - 将地图视图从全屏切换到小缩略图显示位置

> ID：15859585
> 
> 赞同：1
> 
> 时间：2013-04-07T06:26:41.670
> 
> 标签：android, maps

我正在尝试在“Zomato.com”app.in 中集成地图视图。

地图显示在餐厅详细信息屏幕的一小块区域中。它在屏幕底部显示一个小条状的地图区域。单击它会以完整视图打开地图，并在此处显示关闭按钮。将它带回相同的位置。如果您有任何库功能或可以进行定制，请告诉我吗？

# meteor - 如何在 Meteor 之外使用 Meteor 包？

> ID：15859586
> 
> 赞同：1
> 
> 时间：2013-04-07T06:26:55.877
> 
> 标签：meteor

我想在主 Meteor 应用程序之外使用 Meteor 包（如 minimongo）。此外，我想连接到运行 Meteor 应用程序的 MongoDB 数据库。这样我就可以有一个后台工作人员和类似的东西应该读/写到应用程序数据库。我想使用 minimongo 与 Meteor 真正兼容（比如具有相同的 ID）。而且我希望能够连接到开发中的应用程序数据库。

# javascript - 引用和更改容器内 HTML 按钮的属性

> ID：15859599
> 
> 赞同：1
> 
> 时间：2013-04-07T06:28:21.087
> 
> 标签：javascript, jquery, html

下面是我正在使用的 HTML 代码。它所做的只是创建一个带有两个按钮的元素：“Element1”（TitleButton）和“Add”。通过单击“添加”，元素被克隆并分配 id="element 2"。我不能做的是为克隆元素的 TitleButton 分配值“Element2”。我该怎么做，最好在 addNode() 函数中？如果不可能，那么还有什么其他方法？谢谢

```
<HTML>
<HEAD>
<TITLE>Dynamically add Textbox, Radio, Button in html Form using JavaScript</TITLE> 
<SCRIPT language="javascript">

  function addNode(element) {

    var adding_element = element.parentNode;        
    var added_element=adding_element.cloneNode(true);   
    added_element.setAttribute("id","element 2");

    var cont = adding_element.parentNode;
    cont.appendChild(added_element);   
  }

</SCRIPT>
</HEAD>

<BODY>
<FORM>
  <div name="container" id="container">
    <div name="element 1" id="element 1"> 
      <input type="button" value= "element1"; name="TitleButton" />
      <input type="button" value="Add" name="add[]" onclick="addNode(this)" />
    </div>
  </div>
</FORM>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:36:11.303

你可以使用`firstElementChild`属性。

```
var id = 2;
function addNode(element) {
    var adding_element = element.parentNode;
    var added_element = adding_element.cloneNode(true);
    added_element.setAttribute("id", "element" + id);
    added_element.firstElementChild.setAttribute('value', 'element ' + id);

    var cont = adding_element.parentNode;
    cont.appendChild(added_element);
    id++;
} 
```

[http://jsfiddle.net/SUkYg/1/](http://jsfiddle.net/SUkYg/1/)

# c# - 我们如何返回用户在 webBrowser 控件中单击的按钮的名称？

> ID：15859602
> 
> 赞同：2
> 
> 时间：2013-04-07T06:28:32.337
> 
> 标签：c#, webbrowser-control

我认为我们应该发起一个事件这是我发现的：

```
event OnButtonClicked ()EventArgs;
HTMLButtonClickEventArgs:EventArgs
{
String ButtonName;
} 
```

我正在做一个网络浏览器控件，这是我为单击它的按钮编写的代码，但我想知道用户单击了哪个按钮：

```
 public delegate void ButtonPressedEventHandler(object sender, EventArgs e);
    public event ButtonPressedEventHandler ButtonPressed;

    void OnButtonPressed()
    {
        if (ButtonPressed != null)
            ButtonPressed(this, new EventArgs());            
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:42:43.127

我为你写了一个例子：试试这个：

```
 private void Form1_Load(object sender, EventArgs e)
        {

            webBrowser1.DocumentText = "<html><body><button id=\"btn1\" type=\"button\">Click Me!</button><button id=\"btn2\" type=\"button\">Click Me!</button></body></html>";
        } 
```

**调用点击事件：**

```
 //Edited 
     bool First_Call = true;
    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        if (First_Call)
        {
            webBrowser1.Document.Click += new HtmlElementEventHandler(Document_Click);
            First_Call = false;
        }
    } 
```

**当用户单击文档时获取活动元素但**

```
 void Document_Click(object sender, HtmlElementEventArgs e)
        {
           // **Edited**
           //Check Element is Button 
           if (webBrowser1.Document.ActiveElement.TagName == "BUTTON")
           {
            MessageBox.Show(webBrowser1.Document.ActiveElement.Id);
           }
        } 
```

# configuration - adobe air 原生扩展配置文件

> ID：15859604
> 
> 赞同：2
> 
> 时间：2013-04-07T06:28:53.557
> 
> 标签：configuration, air, adobe, air-native-extension, configuration-files

我一直在用谷歌搜索看似简单的东西，但似乎找不到答案：我正在构建一些 adobe 本机扩展 (ios/android)。本机代码期望找到一个 config.plist (ios) 或 .properties(android) 文件来工作。该文件应位于主资源包 (ios) 或资产文件夹 (android) 中。

adobe air 应用开发者应该如何提供这个文件？显然我不能将它打包到 .ane 文件中，因为它是特定于应用程序的......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T02:49:34.790

我认为您应该查看应用程序描述符以获取此类信息。例如 info.plist 添加可以通过添加 iphone 部分的 InfoAdditions 节点添加到描述符中，例如：

```
<iPhone> 
    <InfoAdditions> 
        <![CDATA[ 
            <key>UIRequiresPersistentWiFi</key> 
            <string>NO</string> 
        ]]>
    </InfoAdditions>
</iPhone> 
```

[http://help.adobe.com/en_US/as3/iphone/WS789ea67d3e73a8b2-48bca492124b39ac5e2-7ffb.html](http://help.adobe.com/en_US/as3/iphone/WS789ea67d3e73a8b2-48bca492124b39ac5e2-7ffb.html)

并且 android 有清单添加：

```
<android>
    <manifestAdditions>
        <![CDATA[            
            <manifest>
                <uses-permission android:name="android.permission.INTERNET"/>

                <application>
                     <receiver ... />
                </application>

            </manifest>
        ]]>
    </manifestAdditions>
</android> 
```

# c++ - asio::placeholder::error 有什么用

> ID：15859605
> 
> 赞同：10
> 
> 时间：2013-04-07T06:29:02.243
> 
> 标签：c++, boost, boost-asio, boost-bind

asio 库在其许多示例中传递了一个错误参数，即； [http://think-async.com/Asio/asio-1.5.3/src/examples/echo/async_tcp_echo_server.cpp](http://think-async.com/Asio/asio-1.5.3/src/examples/echo/async_tcp_echo_server.cpp)

这个参数有什么意义？asio 是否真的用错误填充了这个参数？

如果我从我的处理函数中删除它，它编译得很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T06:49:31.503

实际上，`asio::placeholders::error`相当于`_1`Boost.Bind 占位符，所以`bind(&my_class::handler, this, asio::placeholders::error)`就像`bind(&my_class::handler, this, _1)`.

当 Boost.Asio 完成处理调度程序调用此处理程序时，`error_code`将作为第一个参数传递给此函数。

但是，您始终可以`bind`使用一个期望较少参数的函数（在这种情况下 - 零） - 当绑定器被调用时，[任何额外的参数都会被静默忽略](http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html#with_functions)。

# php - 来自数据库的回显图像显示一堆字符

> ID：15859606
> 
> 赞同：0
> 
> 时间：2013-04-07T06:29:12.553
> 
> 标签：php, image

来自数据库的图像被放入一个数组中，然后保存在 $_SESSION 标题中到新页面，但是当回显出它显示的一堆字符行和它的行时......

```
 while($row = mysql_fetch_assoc($query)){
        $queryArray[] = $row;
    } 
}
else {
    $_SESSION['error'] = true;
    $error = "<hr />0 results for <strong>$searchquery</strong><hr />";
    $_SESSION['error'] = $error;    
}

if($goodQuery){

    $_SESSION['search_output'] = $queryArray;
    header("Location: searchpage.php");

    exit;
} 
```

然后...

```
<?php

        if(isset($_SESSION['error'])){          
            echo $_SESSION['error'];                                    
        } else { 

            echo ($_SESSION['count']);
              foreach($_SESSION['search_output'] as $value){
                $value['id'];  
                $value['links'];
                $value['title'];
                $value['page_body'];
                $value['thumbs'];

                $id = $value['id'];
                $title = $value['title'];
                $link = $value['links'];
                $body = $value['page_body'];
                $thumbs = $value['thumbs'];

                $search_output .= "<a href='".$link."'>".$title."</a> - $body<br>";}
}
?>

    <?php echo $search_output; ?><?php echo $thumbs; ?> 
```

我怎样才能解决这个问题。基本上我希望在每个搜索结果旁边显示一个缩略图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:37:11.003

当链接存储在数据库中时，可能存在编码问题，请确保 db 和 pages 之间的编码工作正常。例如通过使用`mysql_set_charset('utf8')`

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:19:15.070

经过进一步研究，因为它被保存为存储在 mysql blob 中的图像...将图像数据转换为 base64 并将其粘贴在 tagimage 数据中并将其粘贴在 tag 中。*（不是我的话）*

```
echo '<img src="data:image/jpeg;base64,' . base64_encode( $thumbs ) . '" />'; 
```

这成功了！

# java - Java抽象类扩展了两个类

> ID：15859607
> 
> 赞同：2
> 
> 时间：2013-04-07T06:29:15.497
> 
> 标签：java, inheritance, abstract-class

我有一条类似的线路来挖掘一个开源项目：

```
abstract class AbstractClass<A extends ParentClass1,
    B extends ParentClass2> 
```

你能告诉我这实际上是什么意思吗？我认为java不支持多重继承，那么我们实际上在这里做什么？什么是`A`和`B`这里？:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:32:38.327

这里**A 和 B 只是占位符**，可以分别**替换为任何扩展 ParentClass1 和 ParentClass2 的类**。创建此类的对象时，您可以在角括号（<>）中传递参数。这些参数将在编译期间由编译器替换 A 和 B。

上面的代码并不表示多重继承。请详细阅读[泛型](http://my.safaribooksonline.com/book/programming/java/0596009208/16dot-collections-and-generics-data-structures/in_generics_comma_lextendsr_means_lexten)以了解这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:32:39.023

它的泛型类型在这里寻找泛型：[http ://docs.oracle.com/javase/tutorial/java/generics/types.html](http://docs.oracle.com/javase/tutorial/java/generics/types.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T06:38:14.123

如果您删除其中的内容`<>`，那么您只会看到它

```
abstract class AbstractClass 
```

这意味着，该类根本没有扩展任何类。

```
abstract class AbstractClass<A extends ParentClass1,
    B extends ParentClass2> 
```

本质上意味着，该类想要声明 2 个泛型 A 和 B，并强制其类型。这意味着，它希望类的实现者提供分别扩展`ParentClass1`和扩展的 2 个类`ParentClass2`。

请参阅[此](http://docs.oracle.com/javase/tutorial/java/generics/bounded.html)以获得更多说明

# java - netbeans 7.2.1 与 mysql 连接 java.lang.ClassNotFoundException

> ID：15859609
> 
> 赞同：0
> 
> 时间：2013-04-07T06:29:39.967
> 
> 标签：java, mysql, servlets, netbeans, java.lang.class

我正在研究 servlet，当我运行 servlet 时，我在资源管理器中出现错误，上面写着

```
type Exception report

message
descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception
javax.servlet.ServletException: PWC1397: Wrapper cannot find servlet class com.jp.NewServlet or a class it depends on
root cause
java.lang.ClassNotFoundException: com.jp.NewServlet 
```

以下是本身在netbeans下构建的程序代码

```
package com.jp;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class NewServlet extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {

        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet NewServlet</title>");            
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet NewServlet at " + request.getContextPath() + "</h1>");
        out.println("</body>");
        out.println("</html>");
    } finally {            
        out.close();
    }
}

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

@Override
public String getServletInfo() {
    return "Short description";
}
} 
```

在 glassfish 服务器消息下的 netbeans 上显示以下错误

```
SEVERE: WebModule[/JP first-war]Error loading WebappClassLoader (delegate=true; repositories=WEB-INF/classes/) com.jp.loginservlet
java.lang.ClassNotFoundException: com.jp.NewServlet
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
at org.apache.catalina.core.StandardWrapper.loadServletClass(StandardWrapper.java:1403)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1267)
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:1079)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:189)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:619) 
```

我认为以下也是imp错误

```
WARNING: StandardWrapperValve[loginservlet]: PWC1382: Allocate exception for servlet NewServlet
java.lang.ClassNotFoundException: com.jp.NewServlet
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
at org.apache.catalina.core.StandardWrapper.loadServletClass(StandardWrapper.java:1403)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1267)
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:1079)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:189)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:619) 
```

我已经为servet映射和所有正确设置了web.xml文件..问题是当我输入包并且提示显示它时我找不到我的包路径com.jp

你能引导我摆脱这个..吗？这很紧急

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:47:50.873

您的 NewServlet 类的全名是 com.jp.NewServlet。然而，服务器正在搜索名为 com.jp.loginservlet 的类。

在您的 web.xml 中，是否有标签：

```
<servlet>
    <servlet-name>NewServlet</servlet-name>
    <servlet-class>com.jp.loginservlet</servlet-class>
</servlet> 
```

应该

```
<servlet>
    <servlet-name>NewServlet</servlet-name>
    <servlet-class>com.jp.NewServlet</servlet-class>
</servlet> 
```

编辑：以防万一：您是否尝试过“清洁和构建”？在大多数情况下，这可以解决问题。

# c# - 在 OutputStream EndWrite 之后添加 HttpCookie

> ID：15859622
> 
> 赞同：0
> 
> 时间：2013-04-07T06:31:23.050
> 
> 标签：c#, asp.net, outputstream, fileoutputstream

我想在这段代码之后添加 HttpCookie：

```
zipFile.Save(context.Response.OutputStream); 
```

我怎样才能做到这一点？任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:28:10.673

尝试下面的代码来创建 cookie。

```
 HttpCookie cookie = new HttpCookie("Name of cookie");
 cookie.Value = DateTime.Now.ToString();
 cookie.Expires = DateTime.Now.AddMinutes(10d);
 Response.Cookies.Add(cookie); 
```

更多详情[请点击这里](http://msdn.microsoft.com/en-in/library/system.web.httpcookie.aspx)

# ruby-on-rails - Rails API 路由问题

> ID：15859623
> 
> 赞同：1
> 
> 时间：2013-04-07T06:31:27.990
> 
> 标签：ruby-on-rails, api

我在 Rails Routes 中指定了以下内容。我想在这条路线上同时允许**GET**和**POST**，但无论我尝试什么，它只允许 #index 操作，并且在请求 POST 时不访问 #create 操作。

```
match ':user_id/special_deals', to: 'special_deals#index' 
```

我也试过这个：

```
match ':user_id/special_deals', to: 'special_deals#index', :via => [:get, :post] 
```

我需要先指定用户 ID，因为有权访问 API 的人可以访问多个用户的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:39:51.630

它完全按照您的要求工作。如果您想`POST`采取`create`行动，这里是您的路线配置：

```
match ':user_id/special_deals', to: 'special_deals#index', :via => [:get]
match ':user_id/special_deals', to: 'special_deals#create', :via => [:post] 
```

有更简单的方法来编写这些，但我只是想使用您编写的相同格式。请查看[本指南](http://guides.rubyonrails.org/routing.html)以了解它们。

如果您已经有一个`User`控制器，您可以编写更结构化的路由，例如：

```
resources :users do 
  resources :special_deals, :only => [:index, :create]
end 
```

这将为 special_deals 创建路由，例如（#shows 将路由到的位置）：

```
GET /users/:user_id/special_deals  #special_deals#index
POST /users/:user_id/special_deals  #special_deals#create 
```

# c# - C# WPF ComboBox 自动切换号

> ID：15859627
> 
> 赞同：-4
> 
> 时间：2013-04-07T06:32:00.300
> 
> 标签：c#, wpf, controls

如何以简单的方式管理 ComboBox 中的自动切换号码？

![问题示例](https://i.stack.imgur.com/be1tJ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:10:43.327

你不应该那样做。您应该向用户展示可交换的用户控件，哪些用户可以拖放，用鼠标更改顺序。

您的解决方案不是很好，但如果您仍然想这样做，那么在组合框 selectitem 事件中查看具有该值的其他组合框并将其更改为前一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:40:13.023

只需在数据模型中切换值。因此，当数据模型的属性发生更改时，wpf 控件将被更新。

XAML：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:model="clr-namespace:WpfApplication2"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <model:DataModel x:Key="MyModel" />
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ItemsControl Grid.Column="0" Grid.Row="0" DataContext="{StaticResource MyModel}"
                      ItemsSource="{Binding Items}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ComboBox SelectedItem="{Binding SelectedItem}" ItemsSource="{Binding Items}">
                    </ComboBox>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</Window> 
```

代码：

```
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;

namespace WpfApplication2
{
    public class DataModel
    {
        #region Construction and Initialization

        public DataModel()
        {
            var elements = new[] {1, 2, 3, 4, 5};
            Items = new List<ItemsModel>
                {
                    new ItemsModel(elements, 1),
                    new ItemsModel(elements, 2),
                    new ItemsModel(elements, 3),
                    new ItemsModel(elements, 4),
                    new ItemsModel(elements, 5)
                };

            foreach (var itemsModel in Items)
            {
                itemsModel.PropertyChanged += SelectedItemChanged;
            }
        }

        #endregion

        public List<ItemsModel> Items { get; private set; }

        private void SelectedItemChanged(object sender, PropertyChangedEventArgs e)
        {
            if (e.PropertyName == "SelectedItem")
            {
                var model = sender as ItemsModel;
                Debug.Assert(model != null, "model != null");
                int pos = Items.IndexOf(model) + 1;
                Items[model.SelectedItem - 1].SelectedItem = pos;
            }
        }
    }

    public class ItemsModel: INotifyPropertyChanged
    {
        #region Construction and Initialization

        public ItemsModel(IEnumerable<int> items, int selectedItem)
        {
            Items = items;
            _selectedItem = selectedItem;
        }

        #endregion

        public int SelectedItem
        {
            get { return _selectedItem; }
            set
            {
                if (_selectedItem != value)
                {
                    _selectedItem = value;
                    RaisePropertyChanged("SelectedItem");
                }
            }
        }

        private int _selectedItem;

        public IEnumerable<int> Items { get; private set; }

        public event PropertyChangedEventHandler PropertyChanged;

        private void RaisePropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:25:35.550

您可以在 ViewModel 中添加单独的属性，在视图中添加单独的 ComboBox，然后在 ViewModel 中更改值时操作值，但这很麻烦，并且在添加新的 ComboBox（值）时涉及大量工作。

更好的方法是创建一个处理更改的自定义集合：

```
public class ValueHolder<T> : INotifyPropertyChanged
{
    private T _value;
    public T Value
    {
        get { return _value; }
        set
        {
            if (!EqualityComparer<T>.Default.Equals(value, _value))
            {
                T old = _value;
                _value = value;
                OnPropertyChanged("Value");
                OnValueChanged(old, value);
            }
        }
    }

    public ValueHolder()
    {
    }

    public ValueHolder(T value)
    {
        this._value = value;
    }

    public event EventHandler<ValueChangedEventArgs<T>> ValueChanged;
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnValueChanged(T oldValue, T newValue)
    {
        var h = ValueChanged;
        if (h != null)
            h(this, new ValueChangedEventArgs<T>(oldValue, newValue));
    }

    protected virtual void OnPropertyChanged(string propName)
    {
        var h = PropertyChanged;
        if (h != null)
            h(this, new PropertyChangedEventArgs(propName));
    }
}

public class ValueChangedEventArgs<T> : EventArgs
{
    public T OldValue { get; set; }
    public T NewValue { get; set; }

    public ValueChangedEventArgs(T oldValue, T newValue)
    {
        this.OldValue = oldValue;
        this.NewValue = newValue;
    }
}

public class MyCollection<T> : Collection<ValueHolder<T>>
{
    public void Add(T i)
    {
        this.Add(new ValueHolder<T>(i));
    }

    private void AddChangeHandler(ValueHolder<T> item)
    {
        item.ValueChanged += item_ValueChanged;
    }

    private void RemoveChangeHandler(ValueHolder<T> item)
    {
        item.ValueChanged -= item_ValueChanged;
    }

    protected override void InsertItem(int index, ValueHolder<T> item)
    {
        AddChangeHandler(item);
        base.InsertItem(index, item);
    }

    protected override void RemoveItem(int index)
    {
        RemoveChangeHandler(this[index]);
        base.RemoveItem(index);
    }

    protected override void ClearItems()
    {
        foreach (var item in this)
        {
            RemoveChangeHandler(item);
        }
        base.ClearItems();
    }

    protected override void SetItem(int index, ValueHolder<T> item)
    {
        RemoveChangeHandler(this[index]);
        AddChangeHandler(item);
        base.SetItem(index, item);
    }

    private void item_ValueChanged(object sender, ValueChangedEventArgs<T> e)
    {
        ValueHolder<T> v = (ValueHolder<T>)sender;
        for (int i = 0; i < this.Count; i++)
        {
            if (this[i] == v)
                continue;
            if (EqualityComparer<T>.Default.Equals(this[i].Value, e.NewValue))
            {
                this[i].Value = e.OldValue;
                break;
            }
        }
    }
} 
```

然后像这样定义您的 ViewModel：

```
public class MyViewModel
{
    private MyCollection<int> _values;

    public MyViewModel()
    {
        _values = new MyCollection<int>() { 1, 2, 3, 4, 5 };
    }

    public MyCollection<int> Values
    {
        get { return _values; }
    }
} 
```

在你的 xaml 中：

```
<ItemsControl ItemsSource="{Binding Path=Values}" Margin="10">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ComboBox SelectedValue="{Binding Path=Value}" Margin="5">
                <ComboBox.ItemsSource>
                    <Int32Collection >1,2,3,4,5</Int32Collection>
                </ComboBox.ItemsSource>
            </ComboBox>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

这是很多代码！但是很好地完成了任务，并且非常易于维护。

# jquery - JQuery Mobile：按钮区域不能完全点击，只有按钮的左侧部分触发动作

> ID：15859638
> 
> 赞同：2
> 
> 时间：2013-04-07T06:33:40.840
> 
> 标签：jquery, forms, mobile, button

我有一个带有几个按钮的表单，我使用第一个 div 使表单更宽（宽度：330px） - 显然所有东西都调整到这个宽度，但可点击区域：

```
<div data-role="popup" id="popupLogin" data-theme="a" class="ui-corner-all" style="width:330px">
    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Abbrechen</a>
<form id="navigation" name="navigation" onsubmit="return startNav()">
    <div style="padding:15px 20px;">
    <h3 class="h2">Ziel dieser Fahrt:</h3>
    <input type="hidden" name="action" id="action" />
    <label for="un" class="ui-hidden-accessible">Stra&szlig;e (Ziel):</label>
    <input name="strasse" id="strasse" value="" placeholder="Stra&szlig;e, Gesch&auml;ft, Einrichtung" data-theme="c" type="text">
    <label for="pw" class="ui-hidden-accessible">Stadt (Ziel):</label>
    <input name="stadt" id="stadt" value="" placeholder="Stadt oder Ortsbezeichnung" data-theme="c" type="text">
    <button type="submit" id="homenav" name="homenav" value="home" data-theme="a" data-icon="myapp-homenav" data-role="button">nach Hause</button>
    <button type="submit" id="worknav" name="worknav" value="work" data-theme="a" data-icon="myapp-worknav" data-role="button">zur Arbeit</button>
    <button type="submit" id="navnav" name="navnav" data-theme="a" value="input" data-icon="myapp-navnav" data-role="button">Navigation starten</button>
</div>
  </form>
</div> 
```

表单呈现良好，但按钮没有触发全长的点击事件。单击右侧部分，按钮切换但不提交表单。

事实上，点击它只显示从左边框延伸到按钮约 70% 的部分。单击此区域会提交表单。

[![按钮提交区域不拉伸按钮宽度](https://i.stack.imgur.com/Euf2G.png)](https://i.stack.imgur.com/Euf2G.png)

图片： http: [//oi49.tinypic.com/214qoec.jpg](http://oi49.tinypic.com/214qoec.jpg)

# python - 替换python文本文件中的行

> ID：15859639
> 
> 赞同：0
> 
> 时间：2013-04-07T06:33:57.160
> 
> 标签：python

我想替换我的文本文件中的某一行，你是怎么做的？这是文本文件：

```
Description,Shoe Size,Quantity
Reebok 111,11,2
Reebok 111,12,4
Reebok 111,9,10
Reebok 1301,6,4
Reebok 1301,7,4
Reebok 1301,8,4
Reebok 1301,9,4
Reebok 1301,10,40
Reebok A55,8,7
Reebok A55,9,8
Reebok A55,10,41
Asics 193ABC,10,20
Asics 193ABC,12,4
Asics 193ABC,9,10
Asics 293BC,11,2
Asics 293BC,12,42
Asics 293BC,9,100
Nike N1,6,6
Nike N1,7,4
Nike N1,8,2
Nike N1,9,4
Nike N1,10,40
Mizuno P1039,4,12
Mizuno P1039,7,9
Mizuno P1039,8,2
Mizuno P1039,19,8
Mizuno P1039,20,4

Flag for copyright 
```

这是我到目前为止所做的，但这只会在后面添加一条线

```
def modifyQty(dbfilename,modelname,size,newcount):
    o=open(dbfilename,'a')
    dbfilename=open(dbfilename,'r')#opendatafile for read and reassign
    for line in dbfilename:
        values=line.split(',')#split by comma
        if values[0]==modelname and values[1]==size:
            line=line.replace(values[2],newcount)
            o.write(line+'\n')
    o.close()

modifyQty('shoes.txt','Reebok 111','11','1') 
```

我想将第一行 Reebok 111, 11, 2 编辑成 Reebok 111, 11, 1，寻找匹配的型号和尺寸，只更改数量。所以所需的输出是：

```
Reebok 111, 11, 1 
```

谢谢

* * *

这是我所做的，它为 shoes.txt 的编辑版本创建了一个新的文本文件

```
def modifyQty(dbfilename,modelname,size,newcount):
    o = open(dbfilename, 'r')
    new_file = open('shoestextcopy.txt', 'w') #opens lol file
    data = o.readlines()
    for line in data:
        values = line.split(',') # split by comma
        if values[0] == modelname and values[1] == size:
            line = line.replace(values[2], newcount)
        new_file.write(line)
    o.close()
    new_file.close()
modifyQty('shoes.txt','Reebok 111','11','100000000 \n') 
```

感谢所有的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:44:38.713

我建议打开一个新文件进行写入：

```
def modifyQty(dbfilename,modelname,size,newcount):
    o = open(dbfilename, 'r')
    new_file = open('abc.txt', 'w')
    data = o.readlines()
    for line in data:
        values = line.split().split(',') # split by comma
        if values[0] == modelname and values[1] == size:
            line = line.replace(values[2], newcount)
        new_file.write(line + '\n')
    o.close()
    new_file.close()

modifyQty('shoes.txt','Reebok 111','11','1') 
```

# c# - PixelFormat转换麻烦

> ID：15859642
> 
> 赞同：0
> 
> 时间：2013-04-07T06:34:16.223
> 
> 标签：c#, .net, image-processing, aforge, pixelformat

这是我的代码：

```
BitmapData bmpData = bitmap.LockBits(new Rectangle(0, 0, bitmap.Width, bitmap.Height), ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);
UnmanagedImage img = new UnmanagedImage(bmpData);
//MAIN BLOCK
BayerDithering filter = new BayerDithering();
img = new UnmanagedImage(img.ImageData, img.Width, img.Height, img.Stride, PixelFormat.Format8bppIndexed);
filter.ApplyInPlace(img);
//END MAIN BLOCK
bitmap.UnlockBits(bmpData); 
```

这是结果：**[截图](http://img-fotki.yandex.ru/get/6436/63489928.0/0_112c44_8107b87a_orig.png)**

为什么结果没有被编译 Oo？我必须**只**在“ *MAIN BLOCK* ”中改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:12:26.457

```
img = new UnmanagedImage(..., img.Stride, PixelFormat.Format8bppIndexed); 
```

这就是问题开始的地方。您正在传递像素数据和 24bpp 图像的步幅，但撒谎并说它是 8bpp 图像。结果仍然是一个 24bpp 的图像和一个彻底混淆的过滤器。

这是行不通的，从 24bpp 到 8bpp 的转换要复杂得多。8bpp 图像不仅有不同的像素格式和步幅，它还需要一个颜色表（又名调色板）。创建具有 256 种颜色的良好颜色表以生成合理匹配的 8bpp 图像是很困难的。

您需要 AForge.Imaging.ColorReduction 命名空间中的一个类来完成这项工作。

# c++ - 哪个内存区域是 C++ 中的 const 对象？

> ID：15859643
> 
> 赞同：5
> 
> 时间：2013-04-07T06:34:28.510
> 
> 标签：c++, memory-management, constants

**我不是在问堆栈/堆/静态是什么意思，或者它们之间有什么不同。我在问 const 对象在哪个区域？**

C++ 代码：

```
#include <cstdio>

using namespace std;

const int a = 99;

void f()
{
    const int b = 100;
    printf("const in f(): %d\n", b);
}

int main()
{
    const int c = 101;
    printf("global const: %d\n", a);
    f();
    printf("local const: %d\n", c);
    return 0;
} 
```

`a`, `b`, 和in是哪个内存区域`c`？他们的寿命是多少？C语言有什么不同吗？

**如果我拿他们的地址怎么办？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T06:36:36.327

这没有具体说明。在编译您显示的代码时，一个好的优化编译器可能不会为它们分配*任何*存储空间。

事实上，这正是我的编译器 ( `g++ 4.7.2`) 所做的，将您的代码编译为：

```
; f()
__Z1fv:
LFB1:
        leaq    LC0(%rip), %rdi
        movl    $100, %esi
        xorl    %eax, %eax
        jmp     _printf
LFE1:
        .cstring
LC1:
        .ascii "global const: %d\12\0"
LC2:
        .ascii "local const: %d\12\0"

; main()
_main:
LFB2:
        subq    $8, %rsp
LCFI0:
        movl    $99, %esi
        xorl    %eax, %eax
        leaq    LC1(%rip), %rdi
        call    _printf
        call    __Z1fv
        movl    $101, %esi
        xorl    %eax, %eax
        leaq    LC2(%rip), %rdi
        call    _printf
        xorl    %eax, %eax
        addq    $8, %rsp
LCFI1:
        ret 
```

如您所见，常量的值直接嵌入到机器代码中。堆栈、堆或数据段上没有为它们分配的任何内存。

# wxwidgets - QEmu 错误 --- 运行可执行文件时

> ID：15859644
> 
> 赞同：1
> 
> 时间：2013-04-07T06:34:29.343
> 
> 标签：wxwidgets, raspberry-pi, qemu

我在scratchbox中交叉编译了我的项目，它使用：---
1> WX-widget基类（即使用套接字、线程、字符串相关的类......没有GUI东西）（[http://www.wxwidgets. org/](http://www.wxwidgets.org/) )
2> Libwebsocket ( [http://libwebsockets.org/trac](http://libwebsockets.org/trac) )

编译成功，没有错误。目标是 Debian Weezy，处理器是 Raspberry pi。

Scratchbox 使用 QEmu 来运行跨可执行文件。当我在 sb2（scratchbox）下运行可执行文件时。我收到以下错误

```
x$ sb2 -e vscpd
qemu: uncaught target signal 11 (Segmentation fault) - core dumped
Exit reason and status: signal 11 (core dumped) 
```

----------------- Qemu GDB 日志 ------------------------

```
ignite@ignite:~/sbox2/rootfs/rfs-raspbian/home/pi/vscp_software/src/vscp/daemon/linux$ sb2 -t rfs-raspbian -eR gdb vscpd
GNU gdb (GDB) 7.4.1-debian
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "arm-linux-gnueabihf".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/ignite/sbox2/rootfs/rfs-raspbian/home/pi/vscp_software/src/vscp/daemon/linux/vscpd...done.

===========================================================
Welcome to scratchbox2 enabled gdb!

Before starting target program you should run command
'sb2-prepare' that sets breakpoint which is used
to stop target before its main() gets called.  After
the breakpoint is hit, you are able to set furtherbreakpoints and do normal debugging actions.

If you are attaching to already running process or
examining a core dump, this step is not necessary.
===========================================================

(sb2-emulate-gdb) sb2-prepare 
Function "_dl_debug_state" not defined.
Temporary breakpoint 1 (_dl_debug_state) pending.
(sb2-emulate-gdb) run
Starting program: /home/ignite/sbox2/rootfs/rfs-raspbian/home/pi/vscp_software/src/vscp/daemon/linux/vscpd 
qemu: Unsupported syscall: 26
qemu: uncaught target signal 11 (Segmentation fault) - core dumped
qemu: Unsupported syscall: 26
During startup program terminated with signal SIGSEGV, Segmentation fault.
(sb2-emulate-gdb) 
```

请提出这个错误是因为什么？

//卡托赫

# css - CSS错误的底部，向左浮动

> ID：15859645
> 
> 赞同：1
> 
> 时间：2013-04-07T06:34:50.777
> 
> 标签：css, css-float

我将 div 浮动到 body 的右侧，但是当我调整窗口大小并向下滚动时，背景不会填满整个列...我在下面的链接中有一个屏幕截图，这是我的代码->

```
body {
        font-family:'Open Sans', arial, sans-serif;
        background-color:#292929;
        color:#cccccc;
        margin:0;

    }
    #sidebar {
            width:300px;
            background-color:#111111;
            height:100%;
            bottom:0;
        } 
```

[http://i.imgur.com/O0yXvXq.jpg](http://i.imgur.com/O0yXvXq.jpg)

但是，当窗口在列表结束的位置下方展开时，它看起来很好......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:51:20.817

您需要保持 DIV 相对于父级（主体）的位置。即：位置：相对

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:32:33.080

尝试这个。

```
body {
        font-family:'Open Sans', arial, sans-serif;
        background-color:#292929;
        color:#cccccc;
        background-size: 100% 100%; /* Important*/
        margin:0;

    } 
```

祝你好运。

# c - 为什么通过网络发送的数据会转换为网络字节顺序？

> ID：15859649
> 
> 赞同：3
> 
> 时间：2013-04-07T06:03:19.290
> 
> 标签：c, sockets, ipc

我不确定如何使用`hton()`. 理论是通过网络发送的任何数据都应该是网络字节（即大端）格式。假设客户端 A 支持大端，B 支持小端。我正在从 A 向 B 发送数据，并且数据被读取为多字节。然后在网络中，我们需要使用`htonl()`和将数据转换为网络字节顺序`htons()`。由于客户端 A 已经是大端，`htonl()`并`htons()`返回相同的输出。但是 B 是 little-endian，所以这些函数颠倒了顺序。鉴于此，我们怎么能说坚持一种通用格式（即大端）是解决大端和小端机器需要通信的问题的方法呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T10:46:09.817

我会以另一种方式尝试，显示整个流程：

通过网络发送`0x44332211`总是发生在`44 33 22 11`. 发送者`htonl()`通过恢复字节的顺序（在 LE 机器上）或只是让它们保持原样（在 BE 机器上）来确保这一点。接收者通过恢复或离开它们再次将它们`44 33 22 11`变成- 。`0x44332211``ntohl()`

提到的函数`{hton,ntoh}{l,s}()`有助于以可移植的方式进行编程：无论程序在 LE 或 BE 机器上运行，它们总是以应有的方式工作。因此，即使在 BE 机器上，也应该调用函数，即使它们是 noops。

例子：

A (BE) 想要发送`0x44332211`给 B (LE)。

1.  A`0x44332211`在内存中的数字为`44 33 22 11`。
2.  A 调用`htonl()`程序已被编写为可移植的。
3.  该数字*仍然*表示为`44 33 22 11`并通过网络发送。
4.  B 接收`44 33 22 11`并接通`ntohl()`。
5.  B 获取由`11 22 33 44`from表示的值`ntohl()`并将其放入相应的变量中 - 然后得到`0x44332211`所需的结果。

同样，始终调用这些函数的需要使您不必考虑您正在为哪种机器编程 - 只需为各种机器编写程序*并*在需要时调用这些函数中的每一个。

同样的例子可以在不知道 A 或 B 是 BE 还是 LE 的情况下表示：

1.  A 有`0x44332211`内存中的数字。
2.  A 调用`htonl()`，以便通过网络发送号码`44 33 22 11`。这是通过恢复还是离开来完成，由主机 B 的字节序决定。
3.  B 接收`44 33 22 11`并接通`ntohl()`。这个反转与否，取决于主机 B 的字节序。
4.  B 得到`0x44332211`想要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:38:25.620

我认为您认为客户端 B 以“相反的顺序”看到字节意味着它们是错误的。与客户端 A 相比，字节的顺序相反，但这是因为客户端 A 从客户端 B 向后解释整数；两者最终仍会将其解释为相同的数字。例如，一台机器将数字 4 表示为`00 00 00 04`。另一个将其表示为`04 00 00 00`，但两者仍将其视为 4 ——如果您将 1 添加到它，您将分别得到`00 00 00 05`和`05 00 00 00`。`hton`/函数的`ntoh`存在是因为无​​法查看数字并知道它是大端还是小端，因此接收者无法确定解释字节的方式

# .net - TPL Dataflow：这两个代码片段有什么区别？

> ID：15859651
> 
> 赞同：2
> 
> 时间：2013-04-07T06:35:47.910
> 
> 标签：.net, task-parallel-library, async-await, c#-5.0, tpl-dataflow

我正在研究[TPL 数据流](http://msdn.microsoft.com/en-us/library/hh228603.aspx)。[Belwo 是来自官方文档Stephen Toub](http://www.microsoft.com/en-us/download/details.aspx?id=14782)的 2 段代码片段。[TPL 数据流简介 (TPLDataflow.docx)](http://www.microsoft.com/en-us/download/details.aspx?id=14782)。但我并没有完全理解它们之间的区别。

顺便说一句，这两个代码片段是文档中的示例，用于演示目的。它们并不完整。

1.  顺序和**同步下载图像**

    ```
    var downloader = new ActionBlock<string>(url =>
    {
        // Download returns byte[]
        byte [] imageData = Download(url); 
        Process(imageData);
    });

    downloader.Post("http://msdn.com/concurrency");
    downloader.Post("http://blogs.msdn.com/pfxteam"); 
    ```

2.  顺序和**异步下载图像**

    ```
    var downloader = new ActionBlock<string>(async url =>
    {
        byte [] imageData = await DownloadAsync(url);
        Process(imageData);
    });

    downloader.Post("http://msdn.com/concurrency ");
    downloader.Post("http://blogs.msdn.com/pfxteam"); 
    ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T12:45:40.157

在您的第一个示例中，对于发布的每条数据，`ActionBlock`都会将其委托排队到线程池。将`Download`阻塞一个线程池线程，然后`Process`在同一个线程池线程上执行。

在您的第二个示例中，对于发布的每条数据，`ActionBlock`都会将其委托排队到线程池。会`await`异步等待下载，所以在下载过程中线程池线程返回到线程池。下载完成后，该方法的其余部分将排队到线程池，并将`Process`在线程池线程上执行。

所以在一般情况下，第二个例子效率更高。

您可能会发现我的[`async`/`await`介绍](http://blog.stephencleary.com/2012/02/async-and-await.html)很有帮助。

# vb.net - 如何在 Visual Basic 2010 express 中读取 txt 文件并将结果显示在网格标题中？

> ID：15859657
> 
> 赞同：0
> 
> 时间：2013-04-07T06:36:38.657
> 
> 标签：vb.net, datagridview

这听起来很简单，但我在谷歌搜索了一段时间后仍然找不到答案。我在表单上有 DataGridView，它被称为 DataGridView1。我有两个 txt 文件（每个文件都有单列）数据，我希望能够将它们显示为行和列标题（而不是单元格内容）。比如这两个txt文件是

1.  C:\temp\sObj.txt
2.  C:\temp\sQue.txt

现在：
sObj.txt 在单列中包含数据 a、b 和 c，而
sQue.txt 在单列中包含数据 d、e 和 f。现在我想要的看起来像：

```
a  b  c
d
e
f 
```

请帮忙，我是编程的初学者，需要紧急完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:15:48.947

正如我在评论部分已经说过的，您需要`StreamReader`阅读文本文件的行。首先，您必须导入`System.IO`-namespace：

```
Import System.IO 
```

因此`StreamReader`，使用文本文件的文件路径声明您并读取其中的每一行。

然后，您必须将 StreamReader 的文本作为列添加到 DataGridView。第一个参数是ColumnName，第二个是ColumnHeading：

```
Using reader As New StreamReader(@"YOURFILEPATHHERE")
    DataGridView1.Columns.Add(reader.ReadLine(),reader.ReadLine())
End Using 
```

所以现在你已经添加了你的列。添加行更容易：

只需阅读这些行并使用您的`String`(linetext) 作为参数添加您的行：

```
DataGridView1.Rows.Add(reader.ReadLine()) 
```

这很容易，你可以通过最少的研究来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T14:22:19.183

这个答案对我构建自己的解决方案很有用，我想与他人分享；

```
Private Sub LoadColumnsInDGV(FileName As String)
    Try
        Dim sr As New System.IO.StreamReader(FileName)
        Dim TxtNewLine As String
        Dim IsFlagFound As Boolean = True
        Dim NewColName As String
        Dim SplitLine() As String

        Do While sr.Peek() > -1
            TxtNewLine = Trim(sr.ReadLine()) & vbNewLine
            SplitLine = Split(TxtNewLine, vbTab)
            If IsFlagFound Then
                For i = 0 To SplitLine.Length - 1
                    NewColName = Trim(SplitLine(i))
                    NewColName = NewColName.Replace(vbNewLine, Nothing)
                    DataGridView1.Columns.Add(NewColName, NewColName)
                Next
                IsFlagFound = False
            Else
                DataGridView1.Rows.Add(SplitLine)
            End If
        Loop
        sr.Close()
    Catch ex As Exception
        MsgBox("Error on Sub LoadColumnsInDGV " & vbCrLf & ex.Source & vbCrLf & ex.Message)
    End Try
End Sub 
```

# c++ - C++返回0；或返回 1；概念

> ID：15859665
> 
> 赞同：-8
> 
> 时间：2013-04-07T06:38:00.523
> 
> 标签：c++

基本上我想问一下c++中return的概念是什么

?? 有时我们通常使用 return 0; 或有时返回 1；这对我来说很困惑请帮我一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:40:32.580

这完全取决于实现。接口文档通常会记录 the`1`或 the`0`代表的含义。通常，它们将代表调用哪个函数的操作是成功还是失败的状态。
C 语言标准定义了指示失败和成功的两个宏：

```
EXIT_SUCCESS    
EXIT_FAILURE 
```

参考：

**C99 标准：7.20.4.3`exit`功能**
**第 5段**

> 最后，控制权返回到主机环境。如果 status 的值为`zero`或 `EXIT_SUCCESS`，则返回成功终止状态的实现定义形式。如果 status 的值为`EXIT_FAILURE`，则返回状态未成功终止的实现定义形式。否则返回的状态是实现定义的。

# c - C 代码指针拼图

> ID：15859667
> 
> 赞同：2
> 
> 时间：2013-04-07T06:38:21.577
> 
> 标签：c, pointers, segmentation-fault, 64-bit, puzzle

我正在查看一个同学发布的一些代码，为了这个例子，它已经被简化了：

```
int main()
{
    int n = 0x4142;
    char * a = (char *) &n;

    char * b1 = (((char *) &n) + 1);
    char * b2 = (((int) &n) + 1);

    printf("B1 Points to 0x%x - B2 Points to 0x%x\n", b1, b2);

    printf("A Info - 0x%x - %c\n", a, *a);
    printf("B1 Info - 0x%x - %c\n", b1, *b1);
    printf("B2 Info - 0x%x - %c\n", b2, *b2);

   return 0;
} 
```

输出是：

```
B1 Points to 0xcfefb03d - B2 Points to 0xcfefb03d
A Info - 0xcfefb03c - B
B1 Info - 0xcfefb03d - A
Segmentation fault (core dumped) 
```

尝试打印 b2 时出现分段错误。而我认为输出应该包括以下行而不是段错误：

```
B2 Info - 0xcfefb03d - A 
```

为什么会这样？b1 和 b2 都是 char*，它们都指向同一个地址。这是在 64 位机器上，其中 sizeof(char*) == 8 和 sizeof(int) == 4 如果重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T06:43:51.720

> 但它在 64 位计算机上出现段错误

可能的原因是，在您的平台上，指针是 64 位的，而整数是 32 位的。因此，当您将指针投射到 时`int`，您会丢失信息。

我的编译器对此特别警告：

```
test.c:7:19: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast] 
```

使用以下程序很容易看到这一点：

```
#include <stdio.h>

int main()
{
   char *s = "";
   printf("%p %p\n", s, (char*)(int)s);
   return 0;
} 
```

在我的电脑上，这会打印两个不同的地址（第二个地址的最高位被切掉）。

> 我不太明白的是b1和b2都是char *，它们都指向同一个地址

实际上，它们并不指向同一个地址。您的`printf()`格式说明符都是错误的。第一个`printf()`应该是：

```
printf("B1 Points to %p - B2 Points to %p\n", b1, b2); 
```

当你运行它时，你会看到地址不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:45:19.140

`(int)&n`如果指针大小比 int 的大小长（这在 64 位 CPU 上通常是这种情况），则可能会将地址截断`n`到 IOW 中有多少位，您会得到一个虚假的截断地址/指针`int`不能安全地取消引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T06:47:47.533

在您的示例中，由于 an`int`是 4 个字节，因此`&n`当您转换它并尝试将其分配给`b2`. 要将指针值视为整数，请使用`uintptr_t`无符号整数类型，无论平台容量如何，都可以安全地存储指针：

```
char * b2 = (((int) &n) + 1); 
```

应该：

```
char * b2 = ((uintptr_t) &n) + 1; 
```

# hbase - 使用唯一子字符串检索 HBase 中的行

> ID：15859669
> 
> 赞同：0
> 
> 时间：2013-04-07T06:38:25.677
> 
> 标签：hbase

我需要根据特定列的值中的子字符串对 HBase 数据库中的行进行分组。

该列中的值的格式如下：

```
[text1]_[text2]_[text3] 
```

例子：

```
row1: abc_aaa_ababab
row2: abc_aaa_cdcdcd  
row3: abc_bbb_fgfgfg  
row4: def_ccc_ababab  
row5: hij_ccc_jkjkjk 
```

如何列出 [text2] 的所有可能值（例如 aaa、bbb 和 ccc）？

我没有必要一次性检索每一行的所有列。向用户呈现各种 [text2] 并且当他选择“bbb”时，仅检索具有“bbb”的行。我在想我可以使用 FuzzyRowFilter 来做后面的部分。

但我不确定如何列出 [text2] 的值。可以通过使用现有过滤器、自定义过滤器或其他方法来完成吗？

注意：数据库模式是由客户创建的 - 可以更改，但过程繁琐。因此，与使用概述的架构相比，重新设计架构的建议很有价值，但次要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:16:52.733

使用此模式将非常低效，因为您需要对每次搜索进行全表扫描。

我会添加一个表，其中包含所有可能的子字符串到行 ID 的映射

# android - java.lang.SecurityException 请求代码来自

> ID：15859672
> 
> 赞同：2
> 
> 时间：2013-04-07T06:38:34.647
> 
> 标签：android

当我运行我的一个 android 应用程序时，我遇到了以下问题：

```
03-07 18:50:01.485 E/AndroidRuntime( 1344): java.lang.RuntimeException: Unable to stop activity {com.chinamobile.cmi.jego/com.chinamobile.cmi.jego.ui.activity.HomeGroupActivity}: java.lang.SecurityException: Requesting code from com.chinamobile.cmi.jego (with uid 10079)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:2806)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.ActivityThread.handleStopActivity(ActivityThread.java:2851)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.ActivityThread.access$900(ActivityThread.java:123)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1164)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.os.Looper.loop(Looper.java:137)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at java.lang.reflect.Method.invokeNative(Native Method)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at java.lang.reflect.Method.invoke(Method.java:511)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at dalvik.system.NativeStart.main(Native Method)
03-07 18:50:01.485 E/AndroidRuntime( 1344): Caused by: java.lang.SecurityException: Requesting code from com.chinamobile.cmi.jego (with uid 10079)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.ActivityThread.getPackageInfo(ActivityThread.java:1582)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1852)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.LocalActivityManager.dispatchStop(LocalActivityManager.java:577)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at android.app.ActivityGroup.onStop(ActivityGroup.java:82)
03-07 18:50:01.485 E/AndroidRuntime( 1344):     at com.chinamobile.cmi.jego.ui.activity.HomeGroupActivity.onStop(HomeGroupActivity.java:452) 
```

(HomeGroupActivity) 是一个活动组，里面有三个本地活动。
有人有同样的问题吗？你可以帮帮我吗？

# functional-programming - 定点组合器

> ID：15859673
> 
> 赞同：6
> 
> 时间：2013-04-07T06:38:39.747
> 
> 标签：functional-programming, anonymous-function, higher-order-functions, y-combinator, fixpoint-combinators

我是[定点组合器](http://en.wikipedia.org/wiki/Fixed_point_combinator)世界的新手，我猜它们习惯于在匿名 lambda 上递归，但我还没有真正使用它们，甚至无法完全理解它们。

我已经在 J​​avascript 中看到了[Y 组合](https://stackoverflow.com/questions/3883780/javascript-recursive-anonymous-function#answer-3903334)器的示例，但无法成功运行它。

这里的问题是，有人可以给出一个直观的答案：

*   什么是定点组合器（不仅在理论上，而且在某些示例的上下文中，以揭示该上下文中的定点究竟是什么）？
*   除了 Y 组合器之外，还有哪些其他类型的定点组合器？

***加分项：****如果示例不只是使用一种语言，最好也使用**Clojure**。*

**更新：**

我已经能够在[Clojure](http://www.fatvat.co.uk/2009/04/understanding-y-combinator.html)中找到一个简单的示例，但仍然很难理解 Y-Combinator 本身：

```
(defn Y [r]
  ((fn [f] (f f))
   (fn [f]
     (r (fn [x] ((f f) x)))))) 
```

虽然这个例子很简洁，但我发现很难理解函数中发生了什么。提供的任何帮助都会很有用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T15:44:48.367

假设您想编写阶乘函数。通常，你会把它写成类似

```
function fact(n) = if n=0 then 1 else n * fact(n-1) 
```

但这使用显式递归。如果您想改用 Y 组合器，您可以首先将事实抽象为类似

```
function factMaker(myFact) = lamba n. if n=0 then 1 else n * myFact(n-1) 
```

这需要一个参数（myFact），它称之为“真实”事实本身。我把这种风格的函数称为“Y-ready”，意思是它已经准备好被输入到 Y-combinator。

Y 组合器使用 factMaker 构建与“真实”事实等效的东西。

```
newFact = Y(factMaker) 
```

何苦？两个原因。第一个是理论上的：如果我们可以使用 Y 组合器“模拟”它，我们真的不需要递归。

二是更务实。有时我们想用一些额外的代码来包装每个函数调用，以进行日志记录或分析或记忆或许多其他事情。如果我们尝试对“真实”事实执行此操作，则只会为对事实的原始调用调用额外代码，而不是所有递归调用。但是如果我们想对每个调用都这样做，包括所有的递归调用，我们可以做类似的事情

```
loggingFact = LoggingY(factMaker) 
```

其中 LoggingY 是引入日志记录的 Y 组合器的修改版本。请注意，我们根本不需要更改 factMaker！

所有这些都是 Y 组合器重要的动机，而不是对 Y 的特定实现如何工作的详细解释（因为有许多不同的方式来实现 Y）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-23T23:54:03.230

要回答关于 Y 以外的定点组合器的第二个问题。标准定点组合器有无数个，`fix`即满足等式的组合器

```
fix f = f (fix f) 
```

还有很多非标准的定点组合器，它们满足等式

```
fix f = f (f (fix f)) 
```

等等。标准定点组合器是递归可枚举的，但非标准的不是。有关示例、参考和讨论，请参阅以下网页。 [http://okmij.org/ftp/Computation/fixed-point-combinators.html#many-fixes](http://okmij.org/ftp/Computation/fixed-point-combinators.html#many-fixes)

# android - 如何知道 android 上 UsbDevice 实例的 linux usb 设备文件路径？

> ID：15859675
> 
> 赞同：1
> 
> 时间：2013-04-07T06:39:25.107
> 
> 标签：android, linux, android-ndk, usb, root

我必须在 android 上连接到 USB 设备，并且用户应该选择设备并允许访问 USB，所以最后我有了[UsbDevice](http://developer.android.com/reference/android/hardware/usb/UsbDevice.html)实例。我怎么知道将它`/dev/bus/usb/002/001`传递给本机代码的 linux 文件路径（类似于“”）。

它需要android设备*生根*吗？如果是，我可以使用标准的 android 方法请求 USB 设备权限，并且我相信它授予 USB 文件访问应用程序进程的权限。会有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T06:24:31.947

只需使用`getDeviceName()`方法

# ios - 为什么这个 malloc 会在远程 IO 上崩溃？

> ID：15859677
> 
> 赞同：0
> 
> 时间：2013-04-07T06:39:42.627
> 
> 标签：ios, malloc, remoteio

我正在尝试使用 malloc 为远程 IO 的音频缓冲区创建一些内存。它大部分时间都有效。但最近它在一些 iOS 6.0.1 到 6.1.3 上崩溃了，奇怪的是在 iPhone 5 和 iPad 3-4、iPad 3-5 和 iPad 3-6 上。

缓冲区的大小如下。更高性能的设备会因此崩溃不是很奇怪吗？是因为它们被更积极地使用吗？

我对如何修复它的想法是用一个catch来捕获这个尝试，然后在出错时尝试一半的大小。这通常通过麦克风提供 30 秒的“聆听”时间。

谢谢！！

罗恩

```
int num_transfer_buffer_samples = 655350; 

transferBuffer = malloc((num_transfer_buffer_samples) * sizeof(float)); // CRASH 
```

# sql - 使用 SSIS 在事实表中的每周销售总额

> ID：15859681
> 
> 赞同：4
> 
> 时间：2013-04-07T06:40:12.543
> 
> 标签：sql, sql-server, sql-server-2008, ssis, data-warehouse

我有 3 个销售数据表，已转换为 4 个维度表和 1 个事实表。

我已经正确填充了所有内容，并且希望在我的 Fact 表中显示“每日销售”和“每周销售”。

我原来的3张表如下：

*   **`Order`**(order# (PK), product-id (FK), order-date, total-order, customer# (FK))
    域是数字、数字、日期、货币、数字

*   **`Product`**（product-id (PK)、prod-name、unit-cost、manufactur-name）
    域是 numeric、nvarchar、money、nvarchar。

*   **`Customer`**（客户# (PK)、客户名称、地址、电话#）
    域是 Number、nvarchar、nvarchar、nvarchar

数据仓库的 Star Schema 链接在这里：

![在此处输入图像描述](https://i.stack.imgur.com/ejR8R.png)

所以我在每个表中只有 10 条记录（很小！），现在只是在测试概念。Fact 表中的“daily-order”很容易从 Order 表中的“total-order”翻译而来。我的困难是获得每周的总数。我使用派生列和表达式 "DATEPART("wk",[order-date])" 在时间维度中创建我的周列。

所以我想我的问题是，我如何从这一点上获得每周销售额？我的第一个猜测是在用于加载事实表的查找序列结束后使用另一个派生列。我的第二个猜测是......在stackoverflow上寻求帮助。任何帮助将不胜感激，我将提供所需的任何信息！提前致谢！

作为记录，我尝试按照前面的描述创建派生列，但无法找出可以接受的语法......

**编辑**我想按产品级别列出每周销售列，并且当我使用 DATEPART 导出周列时，我不需要最后 7 天，而只需要每周的总数。我的销售数据仅持续 2 周，因此我的事实表应该列出 1 个总共 7 次，第二个总共列出 3 次。我可以从原始 Order 表或我的 DW 环境中的表派生它。最好是后者。需要注意的是，我主要限于 SSIS 及其工具（有“执行 SQL 语法”工具，所以我仍然可以使用查询）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:44:49.850

在您的 数据流中，在加载每日数据时填充该数量是`Fact-sales`一项*挑战。*`weekly-order`您需要使用多播转换，向其中添加一个聚合来总结您对产品、客户、订单和周的价值。这很容易。问题是您将如何将这些数据与数据流中的实际详细级别信息联系起来。可以做到，Merge Join，但不要。

正如`ElectricLlama`评论中指出的那样，您要做的是混合您的粒度级别。如果每周金额*没有*存储在表格中，那么您可以添加所有金额，按您想要的任何维度进行切片。一旦您将每周级别的数据放在同一级别，您的用户将只能汇总每日列。每周的值可能不会是累加的。

我说可能是因为您可以通过累积每周值来伪造它，但只将它们存储在任意记录中：一周的第一天，第三天，最后一天，等等。这解决了加法问题，但现在用户必须记住一周中的哪一天保存了一周的汇总值。另外，除非他们在您选择解决附加价值问题的一周中的*确切*日期下订单，否则您将为该汇总行生成虚假订单记录。

正确的、未经请求的解决方案是`weekly-order`从事实表中删除 并增强您的数据维度以允许人们确定每周的金额。如果您不将数据带出仓库并进入分析引擎，则可以预先计算每周汇总并将其具体化为报告表/视图。

## 源数据

让我们看一个简单的场景。一个客户下了 3 个订单，同一天有两个相同的产品（可能一个是加急发货，其他标准）

```
SalesDate |Customer|Product|Order|Amount
2013-01-01|1       |20     |77   |30
2013-01-01|1       |30     |77   |10
2013-01-02|1       |20     |88   |1
2013-01-02|1       |20     |99   |19 
```

## 事实表

您的用户会将他们选择的工具指向桌面，您将接到电话，因为数字不正确。或者您稍后会接到电话，因为他们只需要重新订购 50 件产品时，他们补充了 150 件产品 20。我不想接听这些电话。

```
SalesDate |Customer|Product|Order|daily-order|weekly-order
2013-01-01|1       |20     |77   |30         |50
2013-01-01|1       |30     |77   |10         |10
2013-01-02|1       |20     |88   |1          |50
2013-01-02|1       |20     |99   |19         |50 
```

# java - 从 ArrayList 中删除项目时出错

> ID：15859693
> 
> 赞同：2
> 
> 时间：2013-04-07T06:42:47.600
> 
> 标签：java, multithreading

我正在尝试使用线程从列表中删除一个值。但是代码失败并给出了异常。请帮助我是线程编程的初学者.....

这是内容`Test.java`

```
import java.util.*;

public class Test {
    private static final List<Integer> Values = new ArrayList<Integer> ();
    public static void main(String args[]) {
        TestThread t1 = new TestThread(Values);
        t1.start();

        System.out.println(Values.size());
    }
} 
```

这是内容`TestThread.java`

```
import java.util.*;

public class TestThread extends Thread {
    private final List<Integer> Values;

    public TestThread(List<Integer> v) {
        this.Values = v;
        Values.add(5);
    }

    public void run() {
        Values.remove(5);
        System.out.println("5 removed");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T06:47:20.453

此行表示：*删除索引 5 处的值*。但索引 5 中没有任何内容。

```
 Values.remove(5); 
```

当前数组中只有 1 个值，因为此行意味着*将值 5 添加到我的列表中*，而不是将 5 值添加到我的列表中。

```
 Values.add(5); 
```

您的错误很可能是`IndexOutOfBoundsException`. 如果您显示列表的大小，您会更清楚地看到它。

```
public void run() {
    System.out.println(Values.size()); // should give you 1
    Values.remove(5);
    System.out.println("5 removed");
} 
```

这是它的外观：

![在此处输入图像描述](https://i.stack.imgur.com/WNTQu.png)

当它被插入时， 5 被自动装箱到一个 Integer 对象中。因此，要成功删除它，您应该将其包装成一个：`new Integer(5)`. 然后发出删除调用。然后它将调用接受 Object 而不是 int 的 remove 的重载版本。

```
Values.remove(new Integer(5)); 
```

表示*从我的列表中删除名为“5”的整数对象*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T06:47:16.017

`List#remove(int)`方法从列表中删除指定位置的元素，因此`Values.remove(5)`将尝试删除索引 5 处确实存在的元素。这里的`int`值 5 不会像`List#remove(int)`已经存在的那样被自动装箱。

你应该使用`List#remove(Object o)` which 实际上`Values.remove(new Integer(5))`。

```
public void run() {
    Values.remove(new integer(5));
    System.out.println("5 removed");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T06:46:41.767

你的电话`Values.remove(5);`没有做你期望它做的事情。您传入参数的 int 是一个索引值，因此它试图删除数组列表中索引 5 处的项目，但其中只有 1 个值。

一种解决方法，使您能够删除给定值的整数

```
int given = 5;
for (int curr = 0; curr < Values.size(); curr++){
    if (Values.get(curr) == given) {
         Values.remove(given);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T07:01:28.933

在[List (ArrayList)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove%28int%29)中有 2 个`remove`方法（重载）

1.  `remove(int)`--> 这意味着在索引处删除
2.  `remove(Object)`--> 这意味着从列表中删除特定对象

当您说`Values.remove(5)`时，编译器将 5 作为`int`并调用该`remove(int)`方法，该方法试图删除索引 5 处的值存储。由于索引 5，dint 有任何值，`IndexOutOfBoundException`被抛出。

为了解决它，比如说`remove(new Integer(5))`，要编译器，调用 remove(Object) 方法。请参阅此[SO 线程](https://stackoverflow.com/questions/11803553/which-method-is-called-integer-a-vs-int-a-int-b)以获得更清晰的信息。

# php - 监控 PHP 变量的值变化

> ID：15859695
> 
> 赞同：5
> 
> 时间：2013-04-07T06:42:56.630
> 
> 标签：php

我实际上是在尝试监视一个 PHP 变量（可能是一个单独的线程，但在 PHP 中是不可能的），并在变量的值发生变化时触发一个 PHP 函数。

例如：让我们取一个变量 $_GLOBALS['foo']=1;

如果在代码中的任何位置，$_GLOBALS['foo'] 的值更改为其他值，我想立即触发 PHP 函数。

变量可以在循环或函数等的任何地方。

**为什么我想要这个**：我有一个变量，它将最后发生的错误存储为文本。如果变量的值从“”变为其他值，我想触发一个错误。我的逻辑可能看起来有点奇怪，但这是我想做的。

提前谢谢。

**编辑：**我试过：[如何在 PHP 中使用监视器？](https://stackoverflow.com/questions/4682120/how-to-use-monitors-in-php)以及[如何在 PHP 应用程序中使用多线程](https://stackoverflow.com/questions/70855/how-can-one-use-multi-threading-in-php-applications)但似乎无法解决问题。

**代码（认为这可以解决您对我的问题的一些疑问）：**

```
public function addtag($tagarray,$uid,$tagtype="1")
{
    $dbobj=new dboperations();
    $uiobj=new uifriend();
    $tagid=$uiobj->randomstring(30,DB_SOCIAL,SOCIAL_TAG,tag_tagid);
    $c=0;
    foreach($tagarray as $tags)
    {
        $c++;
        $tagname=$tags["tagname"];
        $taguid=$tags["tagid"];
        $dbobj->dbinsert("INSERT INTO ".SOCIAL_TAG." (".tag_tagid.",".tag_fuid.",".tag_tuid.",".tag_tagname.",".tag_tagtype.") VALUES
                ('$tagid','$uid','$taguid','$tagname','$tagtype')",DB_SOCIAL);
    }
    if($c==0)
    {
        $lasterror="No tags were added";return "";
    }
    else
    {
        return $tagid;
    }
} 
```

在这里，如果我调用错误处理函数而不是监视变量，则在我的情况下不建议这样做，因为错误处理函数可能会执行任何操作，例如发出警报并重定向到页面或任何类似操作。

我问了这个问题原因，我想如果脚本没有到达行 return ""; 它会影响项目的工作流程。这就是我担心的。

我所说的变量是 $lasterror，我有很多这样的函数，其中使用了 $lasterror。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-25T13:22:22.033

我看到了这个，所以我建立了这个：

[https://github.com/leedavis81/vent](https://github.com/leedavis81/vent)

应该能解决你的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T06:46:57.383

在 PHP 中没有内置的方法可以做到这一点，也没有简单的方法来添加它。无论如何，这种语言的工作方式并不适合。

您可以构建一个处理错误的自定义函数，而不是设置一个变量 - 或者使用 PHP 的内置错误处理功能使用[自定义错误处理程序。](http://php.net/manual/en/function.set-error-handler.php)

另一个接近你想要做的错误处理方法（我认为）是[exceptions](http://php.net/manual/en/language.exceptions.php)。

# iphone - 获取 UITableView 中选中单元格中的值

> ID：15859698
> 
> 赞同：1
> 
> 时间：2013-04-07T06:43:24.630
> 
> 标签：iphone, ios, uitableview

我有一个`UITableView`，每个单元格都有一个`UITableViewCellAccessoryCheckmark`. 用户可以根据自己的喜好选中和取消选中单元格。用户可以在表格视图中检查/选择多个单元格。可以根据用户偏好取消选中和重新选中选中/选中的单元格。我在`UITableViewController`. 单击它时，我需要返回上一个视图，在此之前我必须在选中的单元格中收集文本（仅选中的单元格）。我怎样才能做到这一点。

当一个单元格被选中/选中时，我正计划通过保持`NSMutableArray`并更新它来开发一个逻辑。`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`但是，当每次未选中单元格时，我都必须从数组中删除该项目，如果再次选中该单元格，则必须再次添加它。我认为这不是正确的方法。这样做的正确方法是什么。我在 Stackoverflow 中找不到类似的问题，这很不寻常。如果有人可以发布链接，如果之前有人问过这个问题，那将会很有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T07:50:57.790

维护两个数组，如下所示：

```
@property (nonatomic, retain) NSMutableArray *features, *selectedFeature; 
```

`.m`在文件中合成它们。初始化两个数组，如下所示`viewDidLoad`：

```
self.features = [NSArray arrayWithMyOwnResourceLikeDownloadedFromServerOrWhatever];
self.selectedFeature = [NSMutableArray array]; 
```

然后做这样的事情`didSelectRowAtIndex`：

```
NSString * stirng = [features objectAtIndex:indexPath.row];
if ([self.selectedFeature containsObject:stirng]) {
    [self.selectedFeature removeObject:stirng];
}
else{
   [self.selectedFeature addObject:stirng];
} 
```

在你的`cellForRowAtIndexPath`：

```
NSString * stirng = [features objectAtIndex:indexPath.row];
[cell.textLabel setText:stirng];
if ([self.selectedFeature containsObject:stirng]) {
   //it is selected feature
   [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
}
else{
   //it is un-selected feature
   [cell setAccessoryType:UITableViewCellAccessoryNone];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:16:38.277

创建一个长度与可检查单元格数相同的布尔数组，并更新点击事件的值。如果表格内容是动态的，您可以使用 提供的方法`NSMutabeArray`来保持布尔数组与表格内容一致。返回后使用数组来获取您需要的文本。

# sql - 从 SQL 中的表中选择时，* 和 NULL 有什么区别？

> ID：15859700
> 
> 赞同：0
> 
> 时间：2013-04-07T06:43:35.520
> 
> 标签：sql

我对 SQL 很陌生，在从表中选择时，我无法找到描述 * 和 NULL 之间区别的资源。

例如：

```
SELECT null, null, *, null FROM items 
```

这与以下有什么不同：

```
SELECT null, null, null, null FROM items 
```

这与以下有什么不同：

```
SELECT * FROM items 
```

如果开始时只有四列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:03:49.593

是的，每一个都是不同的。当您从表中选择您提供的查询时，表中的列数无关紧要。亲自查看每个查询的差异。

1.  从项目中选择空、空、*、空；

    [点击这里查看输出](http://www.sqlfiddle.com/#!2/593cf/8/0)

2.  从项目中选择空、空、空、空；

    [点击这里查看输出](http://www.sqlfiddle.com/#!2/593cf/2/0)

3.  选择 * 从项目；

    [点击这里查看输出](http://www.sqlfiddle.com/#!2/593cf/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:11:10.720

第一个查询将显示与表中相同数量的记录。但是在选择查询中这些值将被替换为空值。

```
SELECT null, null, null, null FROM items 
```

这类似于

```
SELECT 5, 5, 5, 5 FROM items 
```

第二个查询，

```
SELECT * FROM items 
```

显示带有值的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T07:13:25.710

添加到 Mahmoud 的回答中，我可以解释一种需要 SELECT NULL 的情况。

假设您有 2 个表，t1 有 3 列，t2 有 4 列。您决定使用 UNION 编写一个涉及这些表的查询。

```
SELECT * FROM   t1
UNION
SELECT * FROM   t2 
```

上述查询将不起作用，因为每个表中的列数不同，因此 SQL 引擎无法执行联合操作。为了克服这个问题，您将从 t1 中选择一个空列，并在访问查询结果集时在您的应用程序代码中正确处理它。

```
SELECT *, null FROM   t1
UNION
SELECT * FROM   t2 
```

现在上面的两个单独的查询都将有 4 列，因此会导致成功的 UNION 操作。

**也就是说，如果使用 UNION ALL，相同的查询将正常工作，因为如果列数不同，它会自动将 NULLS 添加到结果集中。**

我知道这个例子没有多大意义，但我希望你理解使用空值的意义。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-07T06:47:47.320

当然有。

第一个：

```
SELECT null, null, null, null FROM items 
```

将选择四列，`NULL`每列都有值，***无论此表中的值和列是什么`items`***。但是返回的行数将等于`items`表中的行数，如果表中有 n 行`items`，它将返回 n 行，所有列都有`NULL`值。

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/99665/1)

* * *

**然而：**

```
SELECT * FROM items 
```

将选择具有此表中所有值的所有列`items`。

Se 他们是完全不同的。

在您的情况下，因为只有四列，所以第一列将***始终***选择四`NULL`列，第二列将使用包含的值选择它们。

# javascript - D3.js .selectAll 不工作

> ID：15859708
> 
> 赞同：0
> 
> 时间：2013-04-07T06:44:45.017
> 
> 标签：javascript, d3.js

通过这个 [http://flowingdata.com/2012/08/02/how-to-make-an-interactive-network-visualization/](http://flowingdata.com/2012/08/02/how-to-make-an-interactive-network-visualization/)

在这行代码中：

```
var node = nodesG.selectAll("circle.node").data(nodes, function (d) {
        console.log("hello");
        return d.id;
    }); 
```

`console.log`永远不会运行。我不确定为什么。

这是`nodesG`：

```
var vis = d3.select(selection).append("svg")
        .attr("width", width)
        .attr("height", height);
nodesG = vis.append("g").attr("id", "nodes"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:23:36.423

想到2件事。父级不存在，或者数据为空。要么，要么永远无法到达这部分代码。

尝试这个：

```
var data = [1,2,3,4,5]

var body = d3.select("body")
var nothing = d3.select("#wut")

//shouldn't be called
var noparent = nothing.selectAll("div").data(data, function(d){
    alert("no parent CALLED"); return d;
})

var nodata = body.selectAll("div").data([], function(d){
    alert("no data CALLED"); 
    return d;
})

var wrongdata = body.selectAll("div").data({banana:2, apple:3}, function(d){
    alert("wrong data CALLED"); 
    return d;
})

//should be called
var noenter = body.selectAll("div").data(data, function(d){
    alert("no enter CALLED"); 
    return d;
})

var nodes = body.selectAll("div").data(data, function(d){
    alert("normal CALLED"); 
    return d;
}).enter().append("div")
  .text(function(d){ return d}) 
```

编辑：我添加了显示非数组不会导致连接的测试。

# matlab - matlab中订单对的频率

> ID：15859711
> 
> 赞同：0
> 
> 时间：2013-04-07T06:45:57.823
> 
> 标签：matlab, matlab-guide

我在 Matlab 中有两个行向量，比如 X 和 Y（大小相同）。现在我想找到订单对（x，y）的频率。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:01:02.060

用于[`unique`](http://www.mathworks.com/help/matlab/ref/unique.html)查找唯一对及其出现次数

```
[C, ia, ic] = unique( [X Y], 'rows' );
n = hist( ic, 1:size(C,1) ); % count the pairs
freq = n ./ sum(n); 
```

# linux - 如何删除零字节文件

> ID：15859712
> 
> 赞同：1
> 
> 时间：2013-04-07T06:46:20.180
> 
> 标签：linux, unix

我有以下目录结构： -

```
foo/dir1/
foo/dir2/
foo/dir3/
foo/dir1/a.rb
foo/dir1/b.rb
foo/dir1/c.rb
foo/dir1/d.rb
foo/dir2/e.rb
foo/dir2/f.rb
foo/dir2/g.rb
foo/dir2/h.rb 
```

如何从某个文件夹中删除零字节文件（dir1，dir2下的一些文件是零字节）。如何查找和删除此类文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T06:49:35.330

假设您有一个`find`足够兼容 POSIX 2008 的版本来支持该`+`表示法：

```
find foo -size 0 -exec rm -f {} + 
```

如果您不这样做，您可以使用以下变体：

```
find foo -size 0 -print0 | xargs -0 rm -f   # But you probably have + anyway
find foo -size 0 -exec rm -f {} \;          # Slow but reliable
find foo -size 0 -print | xargs rm -f       # Fails with spaces etc in file names 
```

并且接受的重复问题的答案表明`-delete`，当您正在使用它时，这是很好的`find`（因为它通过在内部进行调用避免了执行`rm`命令的开销）：`unlink()``find`

```
find foo -size 0 -delete                    # Not POSIX standard 
```

# jakarta-ee - 在 Eclipse 中设置 log4j 以使用石英作业

> ID：15859715
> 
> 赞同：0
> 
> 时间：2013-04-07T06:46:32.577
> 
> 标签：jakarta-ee, log4j, quartz-scheduler

这是我`log4j.properties`在`WEB-INF/classes`目录中的文件：

```
#SET LEVEL of ROOT-LOGGER, you will like to have Debug in local, but in prod you may just want WARN and ABOVE. This setting is done here!
log4j.rootLogger=all, stdout, R

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

# Pattern to output the caller's file name and line number. (basically, format of log)
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n

# THIS IS WHERE YOU WILL HAVE ALL THE LOG WRITTEN
log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=/Users/miranda_zhang/Documents/workspace/cloud_demo_3/log/speedtest.log

# Maximum size of log file, usually we keep 10MB
log4j.appender.R.MaxFileSize=100KB
# Keep one backup file, usually we keep 10
log4j.appender.R.MaxBackupIndex=1

log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n 
```

在java类中我有类似的东西：

```
import org.quartz.Job;
import org.apache.log4j.Logger;

public class collectSpeedtestDataJob implements Job {

    private static Logger logger = Logger.getLogger(collectSpeedtestDataJob.class);

    public void execute(JobExecutionContext arg0) throws JobExecutionException {

        try {

        } catch (Exception e) {
            logger.error(e);
        }

    }
} 
```

但文件中没有任何记录`/Users/miranda_zhang/Documents/workspace/cloud_demo_3/log/speedtest.log`

以下是**控制台**中显示的消息：

```
Apr 7, 2013 4:24:47 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
Apr 7, 2013 4:24:47 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:demo_3' did not find a matching property.
Apr 7, 2013 4:24:47 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Apr 7, 2013 4:24:47 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Apr 7, 2013 4:24:47 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1993 ms
Apr 7, 2013 4:24:47 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 7, 2013 4:24:47 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.19
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:02 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
log4j:WARN No appenders could be found for logger (org.quartz.impl.StdSchedulerFactory).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Apr 7, 2013 4:25:03 PM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  rest.handler
Apr 7, 2013 4:25:03 PM com.sun.jersey.api.core.ScanningResourceConfig logClasses
Apr 7, 2013 4:25:03 PM com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
Apr 7, 2013 4:25:03 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.12 02/15/2012 04:51 PM'
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:06 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 7, 2013 4:25:07 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Apr 7, 2013 4:25:07 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Apr 7, 2013 4:25:07 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 19119 ms 
```

我已`-Dlog4j.debug=true`在 Eclipse 中添加为 VM 参数。

我尝试了以下调试：

```
public void execute(JobExecutionContext arg0) throws JobExecutionException {
    logger.info("Log - collectSpeedtestDataJob");
    System.out.println("info logged");

    try {

        DB.executeUpdate(speedtest());

    } catch (Exception e) {
        logger.error(e);
    }

} 
```

在**Console**中，我可以看到正在打印，但日志文件中没有任何内容：

```
log4j:WARN No appenders could be found for logger (org.quartz.impl.StdSchedulerFactory).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
info logged 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:48:09.160

好的，我添加了以下代码来解决问题：

```
PropertyConfigurator.configure("absolute/path/to/your/WebContent/WEB-INF/log4j.properties"); 
```

但仍然想知道是否有办法自动检测文件。或者自动获取文件的路径。

```
 ClassLoader loader = Thread.currentThread().getContextClassLoader();
    URL url = loader.getResource("/WebContent/WEB-INF/lib/log4j.properties"); 
```

只给我`null`

# cakephp - 使用 CakeDC 用户插件时出现错误 PDO 异常 SQLSTATE[42000]

> ID：15859720
> 
> 赞同：0
> 
> 时间：2013-04-07T06:47:11.823
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-model, cakedc

我正在使用 cakephp 2.2.1 并尝试使用 cakedc 用户插件，当我尝试创建用户时出现以下错误，任何人都可以提供一些提示或建议来解决此错误 - 我已经使用迁移插件加载了所有表。提前致谢 ：）。

```
2013-04-07 06:31:33 Error: [PDOException] SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'register' at line 1
#0 C:\wamp\www\toppin\lib\Cake\Model\Datasource\DboSource.php(459): PDOStatement->execute(Array)
#1 C:\wamp\www\toppin\lib\Cake\Model\Datasource\DboSource.php(425): DboSource->_execute('register', Array)
#2 C:\wamp\www\toppin\lib\Cake\Model\Datasource\DboSource.php(669): DboSource->execute('register', Array, Array)
#3 C:\wamp\www\toppin\lib\Cake\Model\Datasource\DboSource.php(611): DboSource->fetchAll('register', Array, Array)
#4 C:\wamp\www\toppin\lib\Cake\Model\Model.php(788): DboSource->query('register', Array, Object(User))
#5 C:\wamp\www\toppin\app\Plugin\Users\Controller\UsersController.php(331): Model->__call('register', Array)
#6 C:\wamp\www\toppin\app\Plugin\Users\Controller\UsersController.php(331): User->register(Array)
#7 [internal function]: UsersController->add()
#8 C:\wamp\www\toppin\lib\Cake\Controller\Controller.php(485): ReflectionMethod->invokeArgs(Object(UsersController), Array)
#9 C:\wamp\www\toppin\lib\Cake\Routing\Dispatcher.php(186): Controller->invokeAction(Object(CakeRequest))
#10 C:\wamp\www\toppin\lib\Cake\Routing\Dispatcher.php(161): Dispatcher->_invoke(Object(UsersController), Object(CakeRequest), Object(CakeResponse))
#11 C:\wamp\www\toppin\app\webroot\index.php(92): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#12 {main} 
```

添加功能：

```
public function add() {
        if ($this->Auth->user()) {
            $this->Session->setFlash(__d('users', 'You are already registered and logged in!'));
            $this->redirect('/');
        }

        if (!empty($this->request->data)) {
            $user = $this->User->register($this->request->data);
            if ($user !== false) {
                $this->_sendVerificationEmail($this->User->data);
                $this->Session->setFlash(__d('users', 'Your account has been created. You should receive an e-mail shortly to authenticate your account. Once validated you will be able to login.'));
                $this->redirect(array('action' => 'login'));
            } else {
                unset($this->request->data[$this->modelClass]['password']);
                unset($this->request->data[$this->modelClass]['temppassword']);
                $this->Session->setFlash(__d('users', 'Your account could not be created. Please, try again.'), 'default', array('class' => 'message warning'));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:34:52.837

由于某种原因，`User`CakePHP 没有使用您的模型或该`register()`方法不存在。CakePHP 会将不存在的方法作为 SQL 语句执行。如果一个*模型*没有被使用，CakePHP 会自动*创建*一个模型，基于你的`AppModel`

要发现是否`User`找不到模型，试试这个；

```
public function add()
{
    debug(get_class($this->User));

    // ....
} 
```

这应该输出`User`. 如果它输出`AppModel`或者`Model`CakePHP 正在使用通用模型，这表明它找不到您的用户模型。

*   清除您的`app/tmp/cache/models`和`app/tmp/cache/persistent`目录，或者如果您使用 APC，请清除用户缓存。
*   如果您在控制器中使用多个模型，请检查`User`模型是否在您的`$uses`数组中
*   检查您的 User 模型是否在此文件中：`app/Model/User.php`并且类名是`User`（单数，而不是*复数*）

另一方面，如果您的模型*已*正确加载（调试示例显示`User`，而不是`AppModel`），则检查您是否确实有`register()`方法，如果没有，则应创建 if。

希望这可以帮助。

## [更新]

刚刚意识到您正在使用用户插件，并且可能正在加载*错误*的用户模型。使用插件时，您还需要使用**插件**`User`中的模型，而不是您自己的模型。**`User`**

 **如果你*确实*有你自己的用户模型，你应该将它重命名为`User`（例如`AppUser`）以外的名称，以防止 CakePHP 加载错误的模型。按照插件文档中关于如何在此处扩展插件“组件”的说明：[扩展模型](https://github.com/CakeDC/users#extending-the-model)

但是，如果您想`User`从插件扩展模型，您还需要扩展`UsersController`插件，请参阅[扩展控制器](https://github.com/CakeDC/users#extending-the-controller)

如果您*不需要*扩展插件模型和控制器，最好从您的应用程序中删除它们（例如`app/Model/User.php`和`app/Controller/UsersController.php`）

我保留了上面的原始建议，因为它们在其他情况下仍然可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:26:30.460

你应该检查`$this->request->data`用户表中的内容，也许某些值是不合法的**

# iphone - 什么样的下载代码违反了 App Store Review Guideline？

> ID：15859724
> 
> 赞同：6
> 
> 时间：2013-04-07T06:47:34.697
> 
> 标签：iphone, ios, objective-c, appstore-approval

App Store Review Guidelines 说：“以任何方式或形式下载代码的应用程序都将被拒绝。”

我想制作一个使用 Challenge-Response 进行身份验证的应用程序。该应用程序有一套基本算法，如SHA-1、SHA-256、MD5、DES、AES等。质询服务器包含一个随机排列的算法名称数组和一个字符串名称A。客户端使用质询指示的算法和序列来操作字符串A，并将其作为响应返回给服务器。

虽然我在服务器和客户端之间传输的只是一堆字符串，但它们确实改变了我的应用程序的行为。我应该将它们视为一种代码形式吗？如果不是，为什么Apple禁止下载shell代码执行？我的意思是，shell 代码也是一堆字符串，由运行环境解释。本质区别在哪里？

原谅我的英语:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T07:25:24.210

Apple 担心并希望阻止的是通过批准程序（伪装成良性的东西）然后改变其基本功能的应用程序。

一个极端的例子是应用程序在用户设备上安装后下载新的恶意可执行代码。

Apple 正在使用宽泛的措辞，以便能够拒绝任何以任何方式试图对用户有害的应用程序。不可能具体描述这可能发生的每一种技术和具体方式，因此 Apple 保持措辞宽松。

应用程序一直以某种形式“下载代码”，考虑一个访问返回 JSON 格式响应的 API 的应用程序。从技术上讲，这可以被视为代码，它可以改变应用程序的行为（显示哪个视图，在某个视图上可以使用哪些选项等）。但是以这种方式访问​​ API 的应用程序肯定不会被拒绝。

根据我从您的问题中收集到的信息，听起来您不必担心指南中的特定条款。

# search - Excel 项目名称搜索匹配 - 2 打开文件

> ID：15859732
> 
> 赞同：0
> 
> 时间：2013-04-07T06:48:32.313
> 
> 标签：search, excel, barcode, vba

我一直在尝试处理一个特定的案例，但还不知道从我目前的情况可以去哪里。任何帮助将不胜感激。

我发现了一些我想尝试看看我是否可以从这里构建到我的特定案例的东西。我将内容从 file2 复制到 sheet3 而不是使用两个单独的文件来查看这是否也可以工作。但是，在改变值之后，我仍然得到一个错误（运行时错误 9。下标超出范围）

最初，我有两个 excel 文件。

File1 在 sheet2 中的 A5 之后的列 E 中有项目名称。File2 在工作表 1 中的 A3 之后的列 A 中有项目名称。

我想编写一个宏，该宏可以将数字（条形码）放入 file2 中的 ColumnD 中，从 File1 中的 ColumnD 中找到，对于 file2 中 ColumnA 中与 file1 中 ColumnE 中的单元格值匹配的每个单元格值。

换句话说，File2 列 A 中的项目名称在列 D 中没有条形码，搜索 File1 列 E 中所有项目的列表，找到完全匹配的名称，从包含条形码的列 D 的同一行复制值，将条形码值粘贴到 File2 为空D 列。

```
Sub Find_Barcode()

Dim PartRngSheet1 As Range, PartRngSheet2 As Range
Dim lastRowSheet1 As Long, lastRowSheet2 As Long
Dim cl As Range, rng As Range

lastRowSheet1 = Worksheets("Sheet2").Range("E65536").End(xlUp).Row
Set PartRngSheet1 = Worksheets("Sheet2").Range("A1:A" & lastRowSheet1)

lastRowSheet2 = Worksheets("Sheet3").Range("A65536").End(xlUp).Row
Set PartRngSheet2 = Worksheets("Sheet3").Range("A1:A" & lastRowSheet2)

For Each cl In PartRngSheet1
    For Each rng In PartRngSheet2
        If (cl = rng) Or (cl = rng.Offset(0, 1)) Then
            rng.Offset(0, 4) = cl.Offset(0, 1)
        End If
    Next rng
Next cl

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:08:00.787

试试下面的代码：假设 File1 和 File2 是两个不同的工作簿并且是打开的。

```
Sub Find_Barcode()

    Dim lastRow As Long, rngFind As Range, rngFound As Range
    lastRow = Workbooks("File2").Sheets("sheet1").Range("A65000").End(xlUp).Row

    Workbooks("File1").Activate
    Set rngFind = Workbooks("File1").Sheets("sheet2").Range("E5", Range("E65000").End(xlUp).Row)

    For i = 3 To lastRow

        Set rngFound = rngFind.Find(what:=Workbooks("File2").Sheets("sheet1").Cells(i, 1))
        If Not rngFound Is Nothing Then
            rngFound.Offset(0, -1).Copy Workbooks("File2").Sheets("sheet1").Cells(i, 4)
        End If

    Next

End Sub 
```

# iphone - iPhone 显示器：图像资源是否比自定义绘图更清晰？

> ID：15859733
> 
> 赞同：0
> 
> 时间：2013-04-07T06:48:55.040
> 
> 标签：iphone, ios, quartz-graphics, retina-display

标题主要说明了一切。

我正在查看一些模型，当我尝试实现它们时，似乎自定义绘图，即使线宽为 0.5，也没有我在设备上预览模型时显示的那么清晰. 资产可以比使用石英手动绘制的更清晰吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:18:58.240

> 资产可以比使用石英手动绘制的更清晰吗？

不，如果是这样的话，iOS 图形系统将被严重破坏。

也许如果你展示了你的自定义绘图代码，以及它输出的图像，我们可以提出一些建议。另外，您是否正在使用“Retina”设备？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:20:16.463

这很可能是因为屏幕的分辨率。没有 Retina 显示屏的 MacBook Pro 和 iMac 每英寸大约有 110 像素，Retina 大约是 220，而配备 Retina 的 iPhone 每英寸有 326 像素。

当您以点为单位进行坐标并使用整数时，就好像 iPhone 是每英寸 158 像素（意味着 1 的宽度将是 1/158 英寸宽），而在您的计算机上它很可能是每英寸 110 像素（即大约 1/110 英寸宽）。但是，由于您使用的是 0.5 的宽度，因此非视网膜屏幕将保持与 1.0 宽度相同的分辨率，但是您的设备（很可能是视网膜）正在显示一条宽度为 0.5 点的线，这是一个像素。

因此，宽度为 0.5 点的线在 Retina 设备上将是 1/326 英寸，但在您的计算机上约为 1/110 英寸，这意味着设备上的线将锐利约 3 倍。

# jsf-2 - EL 会话属性和托管 bean 访问

> ID：15859744
> 
> 赞同：0
> 
> 时间：2013-04-07T06:51:16.527
> 
> 标签：jsf-2, el

我对表达式语言 2 bean-view 通信语法感到困惑。首先。是否可以再拥有一个名称相同但范围不同的托管 bean。另一方面，如果通过表达式语言访问它们呢？考虑在会话中有一个名为 DemoBean 的属性，并且还有一个名为 DemoBean 的会话 Scobed 托管 bean，如果我尝试像这样通过 EL 访问这个 bean **#{DemoBean}** // 是指 bean 还是属性？他们说**#{sessionScobe}**是访问会话属性的方式，但
只有 **#{sessionattributename}** 有效？当我将对象放入会话映射时，它是引用还是复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:34:21.537

**JSF**的目标是为您管理会话属性本身。这意味着您应该忘记手动保留/恢复会话映射属性，因为您将能够使用 JSF 的机制来做到这一点。

当您想为整个应用程序保留一些信息时，`@ApplicationScoped`请在托管 bean 中使用注释。`@SessionScoped`您可以使用和注释对会话、请求或具体视图执行相同的操作`@RequestScoped`。`@ViewScoped`

所以，如果你想在会话中存储一些属性：

```
@ManagedBean
@SessionScoped
public class SessionScopedBean{

    public String sessionAttribute;

    //Getter and setter

} 
```

您可以使用以下方法[恢复/更改 bean 的属性](https://stackoverflow.com/questions/2633112/jsf-get-managed-bean-by-name)值`FacesContext`：

```
FacesContext context = FacesContext.getCurrentInstance();
SessionScopedBean bean = (SessionScopedBean) context.getApplication()
    .evaluateExpressionGet(context, "#{sessionScopedBean}", SessionScopedBean.class);
bean.setSessionAttribute("value"); 
```

请记住，JSF bean 默认使用 bean 的名称命名，并且第一个字符小写。还要记住，如果你不初始化自己，这个 bean 在第一次命中时将为**空。**您可以在[要初始化的 bean 中](http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/)[使用 a`PreRenderViewEvent`](http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/)以简单的方式执行此操作，例如在您的登录页面中执行它。这确保了 bean 在会话的剩余时间内保持活动状态。

最后，这就是您从视图中访问会话属性的方式：

`#{sessionScopedBean.sessionAttribute}`

# django - Django 1.4 - 跟踪多个查询和分页

> ID：15859746
> 
> 赞同：4
> 
> 时间：2013-04-07T06:51:29.393
> 
> 标签：django

我有一个网站，它基本上显示了一个巨大的人表，我希望能够过滤、排序和分页。我想在多个视图中执行此操作，这些视图具有不同的预先存在的约束，人们在表中显示这些约束。我的问题是，如果我按状态过滤，例如按名称排序，然后尝试转到下一页，它会重置。例如，如果我过滤一次我得到 my/url/2013/?sort=n&state=MN&page=1; 然后如果我转到第 2 页，我只会得到 my/url/2013/?page=2。它不记得我已经问过什么了。

```
def all(request, year=default_year):

#sorting (sort_options was defined prior to this view)
if 'sort' in request.GET:
    sort = request.GET.get('sort')
    order = sort_options[sort]
else:
    order = '-score'

players = Player.objects.filter(year=year).order_by(order)
url_query = ''

#filtering
if 'position' in request.GET:
    filterData = _filter(request,players)
    players = filterData['players']
    url_query += filterData['url_query']

# pagination
paginator = Paginator(players,25)
page = request.GET.get('page')
try:
    players = paginator.page(page)
except PageNotAnInteger:
    players = paginator.page(1)
except EmptyPage:
    players = paginator.page(paginator.num_pages)

data = {'players':players,'url_query':url_query}

return render_to_response('all.html', data, context_instance = RequestContext(request)) 
```

在我的模板中，我像这样引用 url_query：

```
<th class="name"><a href="?sort=n&{{url_query}}&page={{players.number}}">Name</a></th> 
```

就像这样：

```
<a href="?{{url_query}}&page={{ players.next_page_number }}">Next</a> 
```

这对我来说显然是错误的，但我不知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:03:12.680

当您渲染模板时，您可以传递给上下文（在您的情况下`data`）对象`sort`参数，然后在模板中您可以使用[url](https://docs.djangoproject.com/en/dev/ref/templates/builtins/)来显示要调用的视图。

# ajax - 在 jquery 中将表单发送到服务器

> ID：15859748
> 
> 赞同：0
> 
> 时间：2013-04-07T06:51:42.020
> 
> 标签：ajax, asp.net-mvc, jquery

我正在学习 ASP.NET MVC。在客户端（在 jquery 中）验证后，我必须向控制器端提交一个。如何做到这一点？我应该使用`<form action="#" method="post">`而不是`<form action="Controller/Method" method="post">`在提交按钮的单击事件中添加事件处理程序，以通过 ajax 等发送吗？我应该怎么办？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:54:27.670

你走在正确的轨道上，你的建议会奏效。

更好的方法是保持原始操作不变，为旧浏览器提供向后兼容性。然后，您将照常创建事件处理程序，并包含代码以防止默认提交行为，并改用 ajax。

```
$('#submitbutton').live('click', function(e){ e.preventDefault(); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T06:56:12.397

最简单的方法是使用[jQuery 表单插件。](http://www.malsup.com/jquery/form/)

这是我这类事情的首选插件。基本上它将采用您现有的表单、操作 url 等并将提交自动转换为 ajax 调用。从网站：

> jQuery 表单插件允许您轻松且不显眼地升级 HTML 表单以使用 AJAX。主要方法 ajaxForm 和 ajaxSubmit 从表单元素收集信息以确定如何管理提交过程。这两种方法都支持许多选项，使您可以完全控制数据的提交方式。它对于在特性和功能有限的低成本网络托管服务提供商中托管的网站非常有用。使用 AJAX 提交表单没有比这更容易的了！

如果由于某种原因禁用了 javascript，它也会优雅地降级。看看网站，有一堆清晰的例子和演示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T06:56:36.997

这就是我的做法：

在 jQuery 中：

```
$('document').ready(function() {
    $('input[name=submit]').click(function(e) {
        url = 'the link';
        var dataToBeSent = $("form#myForm").serialize();
        $.ajax({
            url : url,
            data : dataToBeSent,
            success : function(response) {
                alert('Success');
            },
            error : function(request, textStatus, errorThrown) {
                alert('Something bad happened');
            }
        });
        e.preventDefault();
    }); 
```

在另一页中，我获取变量并处理它们。我的表格是

```
<form name = "myForm" method = "post">//AJAX does the calling part so action is not needed.
    <input type = "text" name = "fname"/>
    <input type= "submit" name = "submit"/>
<FORM> 
```

在操作页面中有这样的东西

```
name = Request.QueryString("fname") 
```

**更新：**作为您在 David 帖子中的评论之一，您不确定如何发送表单的值。试试下面的函数，你会清楚地知道这段代码是如何工作的。`serialize()`方法可以解决问题。

```
$('input[name=submit]').click(function(e){
    var dataToBeSent = $("form#myForm").serialize();
    alert(dataToBeSent);
    e.preventDefault();
}) 
```

# iphone - UIButton 放置在 tableviewcell 的顶部

> ID：15859749
> 
> 赞同：2
> 
> 时间：2013-04-07T06:51:42.430
> 
> 标签：iphone, objective-c, uitableview, uibutton

我有 UIButton ，它位于每个 UITableviewCell 的顶部。它是自定义的 tableview 。当我单击 tableviewcell 时，它会进入另一个 tableview，其中 (Tableview) 包含每个单元格中的数据。

这是我获取第二个 tableview 详细信息的方式 .... ***customCellData***是 db 查询方法，它给出单元格编号 ..（例如，如果我单击第一个 tableview customcell 的第二个单元格返回值）（***bookArray*** - 包含第一个 tableviewcell 的第二个单元格中存在的项目列表）

下面的代码是**didSelectForRowAtIndexPath**

```
 NSDictionary *selectedAuthor = nil;

     NSArray *sectionArray=[mainIndexDictionary objectForKey:[allKeysArray objectAtIndex:indexPath.section]];
        selectedAuthor = [sectionArray objectAtIndex:indexPath.row];
        iPath=[[selectedAuthor objectForKey:@"SymptIndexID"] intValue];
        NSLog(@"iPath - %d",iPath);

        authortitleString=[[selectedAuthor objectForKey:@"authorIndexName"]stringByAppendingString:@" cure!"];
    }

    bookArray=[objDB customCellData:(NSInteger)iPath];
    [self.view bringSubviewToFront:authorView];
    [bookTableView scrollRectToVisible:CGRectMake(0.0, 0.0, 320.0,10.0) animated:NO];

    [bookTableView reloadData] 
```

现在我想以这样的方式编程。当我单击第一个 tableview 中的 UIButton 时，它应该包含第二个 tableview 的数据。我无法访问 indexPath，因为我将在单独的方法中执行此***操作（在 didselectrowatindexpath 中，如果我为该特定单元格提供 indexpath，则找到 indexpath）***

有人请帮助我。

***更新代码***

```
in cellForRowAtIndexPath 
  cell.shareFacebookButton.tag = indexPath.row;
            [cell.shareFacebookButton addTarget:self action:@selector(facebookShare:) forControlEvents:UIControlEventTouchUpInside];

            return cell;

    -(IBAction)facebookShare:(id)sender
    {
        UIButton *button = (UIButton *)sender;
        UITableViewCell *cell = (UITableViewCell *)button.superview.superview;
        UITableView *tableView = (UITableView *)cell.superview;
        NSIndexPath *indexPath = [tableView indexPathForCell:cell];

        NSInteger indexPathNumber = indexPath.row;

        NSLog(@"IndexPath is -- > %d" , indexPathNumber);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:09:06.007

**答案已更新**

好的，下面是您需要用于自定义单元格按钮的功能

“cellForRowAtIndexPath”或使用任何其他给定的适当函数。

并确定单击了哪个按钮，请执行以下操作

```
<buttonid>.tag = <indexPath>.row; 
```

问候，拉维

# jquery - 如何在 Html.TextBoxFor 上应用自定义属性

> ID：15859751
> 
> 赞同：0
> 
> 时间：2013-04-07T06:52:13.547
> 
> 标签：jquery, asp.net-mvc-3

我有一个 jquery 自定义属性来屏蔽文本框，我可以像这样在 thml 输入控件上应用它

```
<input data-inputmask="'mask': '9.99 %', 'repeat': 1, 'greedy' : true" /> 
```

但我需要在@Html.TextBoxFor 上应用它

```
for (int i = 0; i < Model.PurchaseContract.Particulars.Count; i++)
{
@Html.TextBoxFor(m => m.PurchaseContract.Particulars[i].StandardReceived, new { @class = "textbox", @style = "width:94%;" })
} 
```

请建议我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:04:55.393

你不必总是坚持`Html Extensions`，我已经很多次直接写html了。Html Extensions 有时很难使用某些属性，例如[我的问题和答案here](https://stackoverflow.com/questions/15828078/post-id-doesnt-work-in-form)。

你可以尝试这样的事情，但请注意我不保证工作。

```
@for (int i = 0; i < Model.PurchaseContract.Particulars.Count; i++)
{
    <input type="text" class="textbox" style="width:94%;" 
           data-inputmask="'mask': '9.99 %', 'repeat': 1, 'greedy' : true"
           name="@Model.PurchaseContract.Particulars[i].StandardReceived"
           id="@Model.PurchaseContract.Particulars[i].StandardReceived" />
} 
```

像这样正确命名的元素将起作用并参与发送到控制器的模型对象。

要使用 提供准确的输出，请`Html.TextBoxFor`首先使用您当前的 Html 扩展名运行项目。在浏览器中检测元素并将输入行复制到您的视图中。更改它`name`并`id`使用下面代码行中的那些并将您的`data-inputmask`属性添加到其中。

# perl - 使用 Text::CSV::Slurp 时如何将空格设置为分隔符

> ID：15859752
> 
> 赞同：0
> 
> 时间：2013-04-07T06:52:28.367
> 
> 标签：perl, text

文本文件如下所示：

```
Interface IP-Address OK? Method Status Protocol
FastEthernet0/0 10.35.195.1 YES NVRAM up up
FastEthernet0/1 unassigned YES manual up down
SSLVPN-VIF0 10.35.195.1 YES unset up up
Loopback0 10.35.255.193 YES NVRAM up up
Loopback1 10.35.255.196 YES NVRAM up up
Loopback2 10.35.255.201 YES NVRAM up up
Loopback3 10.35.255.211 YES NVRAM up up 
```

分隔符 char 是空格而不是 "," ，这是`Slurp`. 如何让它发生？

我尝试`sep_char`如下所示，但失败了。

```
my $data = Text::CSV::Slurp->load(file => 'table.txt',sep_char >= 0x20); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:18:14.043

您有语法问题。

那应该是`=>`之后`sep_char`，不是`>=`。此外，一个简单的`sep_char => ' '`就足够了（而不是`0x20`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:18:30.893

Text::CSV::Slurp 使用[Text::CSV](http://search.cpan.org/perldoc?Text%3a%3aCSV)模块来解析文件的行。您使用的加载方法将选项传递给[Text:CSV 的构造函数](http://search.cpan.org/~hmbrand/Text-CSV_XS-0.97/CSV_XS.pm#new)，您可能有错字：

```
my $data = Text::CSV::Slurp->load(file => 'table.txt', sep_char => ' '); 
```

**重要提示：** Text::CSV_XS 并非旨在检测用于引用和分隔字段的字符。解析是使用预定义的设置完成的。

# javascript - SVG 背景可以是交互式的吗？

> ID：15859754
> 
> 赞同：4
> 
> 时间：2013-04-07T06:52:44.447
> 
> 标签：javascript, css, html, dom, svg

我有一个我创建的 SVG 图像。它是一个长方形，里面有一个圆圈。圆圈使用 JavaScript 跟随用户鼠标。图像由以下代码表示：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlspace="preserve" preserveAspectRatio="xMidYMin slic">
<style>
    * { vector-effect:non-scaling-stroke }
    rect { fill: blue; }
    circle { fill:orange; opacity:0.75; }
</style>
<rect cx="50%" cy="0" width="720" height="1278" id="origin" />
<circle cx="50%" cy="116" r="72" id="dot"    />
<script>
    var svg  = document.documentElement,
        pt   = svg.createSVGPoint(),
        dot  = document.querySelector('#dot');

    svg.addEventListener('mousemove',function(evt){
      var loc = cursorPoint(evt);
        dot.setAttribute('cx',loc.x);
        dot.setAttribute('cy',loc.y);
    },false);

    function rotateElement(el,originX,originY,towardsX,towardsY){
        var degrees = Math.atan2(towardsY-originY,towardsX-originX)*180/Math.PI + 90;
        el.setAttribute(
            'transform',
            'translate('+originX+','+originY+') translate('+(-originX)+','+(-originY)+')'
        );
    }

    // Get point in global SVG space
    function cursorPoint(evt){
      pt.x = evt.clientX; pt.y = evt.clientY;
      return pt.matrixTransform(svg.getScreenCTM().inverse());
    }
</script> 
</svg> 
```

我想用这张图片做的是把它用作 CSS 背景。如果我使用 CSS 将图像设置为背景 { `background: url("image.svg");`} 那么 JavaScript 不再起作用，即圆圈不再跟随光标。我相信这是因为当图像是背景时，它上面会堆叠其他元素。

那么我怎样才能让图像成为背景并保持交互性呢？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:22:25.903

让脚本化背景 SVG 工作的一种方法是使用 CSS4 [`element()`](https://developer.mozilla.org/en-US/docs/CSS/element)。它目前仅在 Firefox 4+ 中通过`-moz-element()`.

[一个例子：](http://jsfiddle.net/2DUuH/4/)

```
<div id="bg" style="width: 400px; height: 400px;">
    <svg width="400" height="400" viewPort="0 0 400 400">
        <!-- force correct 0,0 coordinates -->
        <rect x="0" y="0" width="1" height="1" fill="transparent" />
        <rect x="0" y="0" id="animable1" width="120" height="120" fill="blue" />
        <rect x="0" y="0" id="animable2" width="60" height="60" fill="red" />
    </svg>
</div>

<div id="target" style="border: 4px dashed black; height: 400px; width: 400px; background: gray -moz-element(#bg); background-size: 20%;"></div>

<script type="text/javascript">
    var divTarget = document.getElementById("target");
    var animable1 = document.getElementById("animable1");
    var animable2 = document.getElementById("animable2");
    document.addEventListener("mousemove", function(event){
        var rotation = Math.atan2(event.clientY, event.clientX);
        animable1.setAttribute("transform", "translate(140 140) rotate(" + (rotation / Math.PI * 360) + " 60 60)");
        animable2.setAttribute("transform", "translate(170 170) rotate(" + (360 - rotation / Math.PI * 360) + " 30 30)");
    }, false);
    animable1.setAttribute("transform", "translate(140 140) rotate(0 60 60)");
    animable2.setAttribute("transform", "translate(170 170) rotate(0 30 30)");
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:39:57.157

你应该创建两个文件，一个是.css文件，一个是.css文件。当然，最好有单独的文件，因为它实际上是html容器的一部分。此容器中的 SVG 是 JavaScript。这种分而治之的简化或事件。出于这个原因，外部文件实际上是作为 JavaScript 保存的。这是一种不会在代码中丢失的好方法。

SVG 定义：

```
<div><object id="circle-svg" width="400" height="300" type="image/svg+xml" data="moving_circle.svg"></object></div> 
```

在这里，你描述自己的SVG的部分数据

例如，画布：

```
 canvas = d3.select("#circle-svg")
                    .on("mouseover", mouseover)
                    .on("mousemove", mousemove)
                    .on("mouseout", mouseout); 
```

Part1：看看这段代码（基于html）

```
<head>
<title>Controlling an SVG with Javascript</title>
<script type='text/javascript' src='svg-interaction.js'></script>
   <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>

           <style type="text/css">
            div.tooltip {
                    position: absolute;
                      text-align: center;
                    z-index: 10;
                      width: 140px;
                      height: auto;
                    padding: 8px;
                    font: 24px sans-serif;
                    background: red;
                    color: white;
                    border: solid 1px #aaa;
                    border-radius: 8px;
                    opacity: 0;
            }
    </style>
     <head>

    <body>
    <h2>Controlling SVG with Javascript</h2>
     <div class="page-content">
      <div><object id="circle-svg" width="400" height="300" type="image/svg+xml" data="moving_circle.svg"></object></div> 
```

你可以在那里定义你的脚本

然后你继续第二阶段（你的 SVG 学习）

```
<svg viewBox="0 0 400 400" preserveAspectRatio="none"
 xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"
 a3:scriptImplementation="Adobe"
 onload="init(evt)"
 onzoom="updateTracker(evt)"
 onscroll="updateTracker(evt)"
 onresize="updateTracker(evt)">
<script type="text/ecmascript" a3:scriptImplementation="Adobe"><![CDATA[
    /*****
    *
    *   Globals
    *
    *****/
    var elems = {
        tracker: false,
        cursor:  false,
        trans:   true,
        scale:   true,
        mx:      true,
        my:      true,
        ux:      true,
        uy:      true
    };
    var frame = {
        x_trans: 0,
        y_trans: 0,
        zoom   : 1,
        x_scale: 1,
        y_scale: 1
    }; 
```

# haskell - 使用 CAPI 调用约定时的 GCC 警告

> ID：15859755
> 
> 赞同：2
> 
> 时间：2013-04-07T06:52:57.823
> 
> 标签：haskell, ghc, ffi

像这样使用 CAPI 时：

```
// libvlc.h
libvlc_instance_t *libvlc_new (int argc, const char *const *argv)

// VLC.hs
foreign import capi "vlc/libvlc.h libvlc_new" vlcNew :: CInt -> Ptr CString -> IO (Ptr Libvlc) 
```

我收到警告

```
/tmp/ghc3011_0/ghc3011_0.c: In function ‘ghc_wrapper_d18b_libvlc_new’:

/tmp/ghc3011_0/ghc3011_0.c:10:1:
     warning: passing argument 2 of ‘libvlc_new’ from incompatible pointer type [enabled by default]

In file included from /tmp/ghc3011_0/ghc3011_0.c:7:0: 

/usr/include/vlc/libvlc.h:138:1:
     note: expected ‘const char * const*’ but argument is of type ‘HsInt8 **’ 
```

使用时编译干净`ccall`。

这似乎很好，但它仍然是一个警告。我能做些什么吗？

# c# - 我是否能够制作一个包含一组它将使用的宏的插件？

> ID：15859762
> 
> 赞同：1
> 
> 时间：2013-04-07T06:54:00.640
> 
> 标签：c#, visual-studio-2010, macros, add-in

在我谈论我想要完成的事情之前，这里是我所做的所有详细信息：
我已经制作了一个名为“XSMacros”的宏项目
这是我想做的事情：
我想做一个 VS 添加- 将我的宏嵌入其中，以便在启动 Visual Studio 时，加载项在代码窗口的上下文菜单中创建使用我的宏的上下文菜单项。
现在，我的问题是，如何做到这一点？特别是：

*   在代码窗口的上下文菜单中创建新菜单。
*   在我添加到代码窗口上下文菜单的菜单中创建新的菜单命令用具。
*   单击特定命令项时从 XSMacros 调用宏。

    **（但是，没有在个人项目中导入我的设置和我的宏。）**

    ***另外，我正在使用 VS2010 和 C# 来编写插件！***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T19:15:12.843

您可以像这样将上下文项添加到代码窗口：

```
CommandBars cmdBrs  = ((Microsoft.VisualStudio.CommandBars.CommandBars)_applicationObject.CommandBars);

Microsoft.VisualStudio.CommandBars.CommandBar codeWindowCommandBar = ((Microsoft.VisualStudio.CommandBars.CommandBars)_applicationObject.CommandBars)["Code Window"];

CommandBarPopup myNewPopUpControl = codeWindowCommandBar.Controls.Add(MsoControlType.msoControlPopup) as CommandBarPopup;

myNewPopUpControl.Caption = "MyMenu";
myNewPopUpControl.Visible = true; 
```

您可以添加更多项目，因为它是工具菜单的加载项模板示例。

基于 VS 2012 不支持宏进一步，您可以将宏迁移到 VB 程序集中。这样您也可以提高支持 2012 的兼容性，并且您的宏不会被暴露。

[MZ-Tools HOWTO：将宏方法迁移到 Visual Studio 加载项](http://www.mztools.com/articles/2013/MZ2013016.aspx)

# c++ - C++ 入门：涉及 Sales_item.h 的练习

> ID：15859764
> 
> 赞同：1
> 
> 时间：2013-04-07T06:54:07.767
> 
> 标签：c++, mingw

这是 C++ Primer 4th Edition 的一个问题。我正在使用这个版本，因为它是我唯一可以访问的版本。

> 问题：
> 
> 该网站 ( [http://www.awprofessional.com/cpp_primer](http://www.awprofessional.com/cpp_primer) ) 在第 1 章代码目录中包含一份 Sales_item.h 的副本。将该文件复制到您的工作目录。编写一个程序，循环遍历一组图书销售交易，读取每笔交易并将该交易写入标准输出。

它提供的链接不起作用，所以我从另一个网站下载了 Sales_item.h。

**我在底部粘贴了头文件的内容。**

```
Proposed Solution

#include <iostream>
#include "Sales_item.h"
using namespace std;

int main()
{
   Sales_item item1;
   cout<<"Enter sales item one"<<endl;
   cin>>item1;
   cout<<"Item one is " <<item1;
   return 0;

} 
```

好吧，我可能不明白这个模棱两可的问题，但这不是问题所在。当我用命令编译文件时：

```
g++ salesitem1.cpp -o salesitem1 
```

我得到这个错误

```
In file included from salesitem1.cpp:2:0:
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/Sales_item.h:70:27: er
ror: ISO C++ forbids initialization of member 'units_sold' [-fpermissive]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/Sales_item.h:70:27: er
ror: making 'units_sold' static [-fpermissive]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/Sales_item.h:70:27: er
ror: ISO C++ forbids in-class initialization of non-const static member 'units_s
old'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/Sales_item.h:71:22: er
ror: ISO C++ forbids initialization of member 'revenue' [-fpermissive]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/Sales_item.h:71:22: er
ror: making 'revenue' static [-fpermissive]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/Sales_item.h:71:22: er
ror: ISO C++ forbids in-class initialization of non-const static member 'revenue
' 
```

所以我的问题是：为什么会发生这种情况？这本书有问题吗？如果有，我该如何继续练习？在旁注中，我尝试编译书中的示例并收到类似的错误消息。

感谢您耐心阅读此问题。任何好的答案将不胜感激。

Sales_item.h 源代码

```
/*
 * This file contains code from "C++ Primer, Fifth Edition", by Stanley B.
 * Lippman, Josee Lajoie, and Barbara E. Moo, and is covered under the
 * copyright and warranty notices given in that book:
 * 
 * "Copyright (c) 2013 by Objectwrite, Inc., Josee Lajoie, and Barbara E. Moo."
 * 
 * 
 * "The authors and publisher have taken care in the preparation of this book,
 * but make no expressed or implied warranty of any kind and assume no
 * responsibility for errors or omissions. No liability is assumed for
 * incidental or consequential damages in connection with or arising out of the
 * use of the information or programs contained herein."
 * 
 * Permission is granted for this code to be used for educational purposes in
 * association with the book, given proper citation if and when posted or
 * reproduced.Any commercial use of this code requires the explicit written
 * permission of the publisher, Addison-Wesley Professional, a division of
 * Pearson Education, Inc. Send your request for permission, stating clearly
 * what code you would like to use, and in what specific way, to the following
 * address: 
 * 
 *     Pearson Education, Inc.
 *     Rights and Permissions Department
 *     One Lake Street
 *     Upper Saddle River, NJ  07458
 *     Fax: (201) 236-3290
*/ 

/* This file defines the Sales_item class used in chapter 1.
 * The code used in this file will be explained in
 * Chapter 7 (Classes) and Chapter 14 (Overloaded Operators)
 * Readers shouldn't try to understand the code in this file
 * until they have read those chapters.
*/

#ifndef SALESITEM_H
// we're here only if SALESITEM_H has not yet been defined 
#define SALESITEM_H

// Definition of Sales_item class and related functions goes here
#include <iostream>
#include <string>

class Sales_item {
// these declarations are explained section 7.2.1, p. 270 
// and in chapter 14, pages 557, 558, 561
friend std::istream& operator>>(std::istream&, Sales_item&);
friend std::ostream& operator<<(std::ostream&, const Sales_item&);
friend bool operator<(const Sales_item&, const Sales_item&);
friend bool 
operator==(const Sales_item&, const Sales_item&);
public:
    // constructors are explained in section 7.1.4, pages 262 - 265
    // default constructor needed to initialize members of built-in type
    Sales_item() = default;
    Sales_item(const std::string &book): bookNo(book) { }
    Sales_item(std::istream &is) { is >> *this; }
public:
    // operations on Sales_item objects
    // member binary operator: left-hand operand bound to implicit this pointer
    Sales_item& operator+=(const Sales_item&);

    // operations on Sales_item objects
    std::string isbn() const { return bookNo; }
    double avg_price() const;
// private members as before
private:
    std::string bookNo;      // implicitly initialized to the empty string
    unsigned units_sold = 0; // explicitly initialized
    double revenue = 0.0;
};

// used in chapter 10
inline
bool compareIsbn(const Sales_item &lhs, const Sales_item &rhs) 
{ return lhs.isbn() == rhs.isbn(); }

// nonmember binary operator: must declare a parameter for each operand
Sales_item operator+(const Sales_item&, const Sales_item&);

inline bool 
operator==(const Sales_item &lhs, const Sales_item &rhs)
{
    // must be made a friend of Sales_item
    return lhs.units_sold == rhs.units_sold &&
           lhs.revenue == rhs.revenue &&
           lhs.isbn() == rhs.isbn();
}

inline bool 
operator!=(const Sales_item &lhs, const Sales_item &rhs)
{
    return !(lhs == rhs); // != defined in terms of operator==
}

// assumes that both objects refer to the same ISBN
Sales_item& Sales_item::operator+=(const Sales_item& rhs) 
{
    units_sold += rhs.units_sold; 
    revenue += rhs.revenue; 
    return *this;
}

// assumes that both objects refer to the same ISBN
Sales_item 
operator+(const Sales_item& lhs, const Sales_item& rhs) 
{
    Sales_item ret(lhs);  // copy (|lhs|) into a local object that we'll return
    ret += rhs;           // add in the contents of (|rhs|) 
    return ret;           // return (|ret|) by value
}

std::istream& 
operator>>(std::istream& in, Sales_item& s)
{
    double price;
    in >> s.bookNo >> s.units_sold >> price;
    // check that the inputs succeeded
    if (in)
        s.revenue = s.units_sold * price;
    else 
        s = Sales_item();  // input failed: reset object to default state
    return in;
}

std::ostream& 
operator<<(std::ostream& out, const Sales_item& s)
{
    out << s.isbn() << " " << s.units_sold << " "
        << s.revenue << " " << s.avg_price();
    return out;
}

double Sales_item::avg_price() const
{
    if (units_sold) 
        return revenue/units_sold; 
    else 
        return 0;
}
#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T06:58:21.963

我很确定您不小心获得了使用 C++11 的 C++ Primer 5 的源代码，其中该代码是合法的。查找您正在使用的版本的源代码。我相信[这个链接](http://www.informit.com/store/c-plus-plus-primer-9780201721485)应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-28T05:02:41.683

“Sales_item.h”不是标准库或 C++ 的任何部件库。在书中它实际上声明“我们假设该类名为 Sales_item 并且它已经定义......”这只是书中的一个示例使用。希望这可以帮助。

# asp.net-mvc - 从视图中初始化 asp.net 中的强类型下拉列表

> ID：15859766
> 
> 赞同：0
> 
> 时间：2013-04-07T06:54:26.983
> 
> 标签：asp.net-mvc

我有省、区和村的三个模型。我也有一个 Employee 模型。

员工模型：

```
public class Employee {
 public int EmployeeId {get;set;}
 public string FullName {get;set;}
 public int VillageId {get;set;}
} 
```

省模式：

```
public class Province{
 public int ProvinceId {get;set;}
 public string Name {get;set;}
} 
```

地区模式：

```
public class District{
 public int DistrictId{get;set;}
 public string Name {get;set;}
 public int ProvinceId {get;set;}

 public virtual Province province {get;set}
} 
```

村庄模型：

```
public class Village{
 public int VillageId{get;set;}
 public string Name {get;set;}
 public int DistrictId {get;set;}

 public virtual District district {get;set}
} 
```

现在我希望我的员工强类型视图有三个下拉列表，当我选择一个省时，地区下拉列表必须填写所选省份中的那些地区，当我选择一个地区时，村庄下拉列表必须填充所选区域中的村庄。

村庄下拉列表应该是强类型下拉列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:04:14.843

以下示例展示了如何使用强类型助手创建级联下拉列表。 [http://www.codeproject.com/Articles/258172/Simple-Implementation-of-MVC-Cascading-Ajax-Drop-D](http://www.codeproject.com/Articles/258172/Simple-Implementation-of-MVC-Cascading-Ajax-Drop-D)

[http://www.dotnetpools.com/Article/ArticleDetiail/?articleId=169&title=MVC3-Cascading-DropdownList-Using-Jquery](http://www.dotnetpools.com/Article/ArticleDetiail/?articleId=169&title=MVC3-Cascading-DropdownList-Using-Jquery)

[http://www.deliveron.com/blog/post/Creating-a-Cascading-Dropdown-in-ASPnet-MVC-3-and-jQuery.aspx](http://www.deliveron.com/blog/post/Creating-a-Cascading-Dropdown-in-ASPnet-MVC-3-and-jQuery.aspx)

# matlab - 减少matlab for循环的运行时间

> ID：15859779
> 
> 赞同：0
> 
> 时间：2013-04-07T06:56:59.353
> 
> 标签：matlab

我下面的matlab代码需要很长时间才能运行。我怎么能把它写成只需要几秒钟的时间来运行？如果你能帮助我，我将不胜感激。参数 i、k_hat 和 alpha 是常数。

```
%%%%%%%%%%%%%%%%%%%

p_desired=zeros(1,length(alpha));
p_ICI=zeros(1,length(alpha));
p_MUI=zeros(1,length(alpha));
tic
for ss=1:length(alpha)
    uN=2*pi/N*Ts*abs(sin(alpha(ss)));
    uM=2*pi/M*Ts*abs(sin(alpha(ss)));
    for j=0:M/N-1
        for k=0:N-1
            for q=0:N-1
                for qq=0:N-1
                    for q_hat=0:N-1
                        for qq_hat=0:N-1
                            for n=0:M-1
                                for m=-Ng:M-1
                                    for n_hat=0:N-1
                                        for m_hat=-Ng:N-1
                                            if (n-m-n_hat+m_hat==0)
                                                if (i==j && k==k_hat)
                                                    p_desired(ss)=p_desired(ss)+((sin(-alpha(ss))-1i*cos(-alpha(ss)))/N)^.5*exp(1i/2*k_hat^2*cot(-alpha(ss))*uN^2)*exp(1i/2*q^2*cot(-alpha(ss))*Ts^2)*exp(-1i*2*pi*q*k_hat/N)...
                                                        *((sin(-alpha(ss))+1i*cos(-alpha(ss)))/N)^.5*exp(-1i/2*k_hat^2*cot(-alpha(ss))*uN^2)*exp(-1i/2*q_hat^2*cot(-alpha(ss))*Ts^2)*exp(+1i*2*pi*q_hat*k_hat/N)...
                                                        * ((sin(alpha(ss))-1i*cos(alpha(ss)))/N)^.5*exp(1i/2*qq^2*cot(alpha(ss))*uN^2)*exp(1i/2*k_hat^2*cot(alpha(ss))*Ts^2)*exp(-1i*2*pi*qq*k_hat/N)...
                                                        *((sin(alpha(ss))+1i*cos(alpha(ss)))/N)^.5*exp(-1i/2*qq_hat^2*cot(alpha(ss))*uN^2)*exp(-1i/2*k_hat^2*cot(alpha(ss))*Ts^2)*exp(+1i*2*pi*qq_hat*k_hat/N)...
                                                        *((sin(alpha(ss))-1i*cos(alpha(ss)))/M)^.5*exp(1i/2*(q+N*(i-1))^2*cot(alpha(ss))*uM^2)*exp(1i/2*n^2*cot(alpha(ss))*Ts^2)*exp(-1i*2*pi*(q+N*(i-1))*n/M)...
                                                        *((sin(alpha(ss))+1i*cos(alpha(ss)))/M)^.5*exp(-1i/2*(q_hat+N*(i-1))^2*cot(alpha(ss))*uM^2)*exp(-1i/2*n_hat^2*cot(alpha(ss))*Ts^2)*exp(+1i*2*pi*(q_hat+N*(i-1))*n_hat/M)...
                                                        *((sin(-alpha(ss))-1i*cos(-alpha(ss)))/M)^.5*exp(1i/2*m^2*cot(-alpha(ss))*uM^2)*exp(1i/2*(qq+N*(i-1))^2*cot(-alpha(ss))*Ts^2)*exp(-1i*2*pi*m*(qq+N*(i-1))/M)...
                                                        *((sin(-alpha(ss))+1i*cos(-alpha(ss)))/M)^.5*exp(-1i/2*m_hat^2*cot(-alpha(ss))*uM^2)*exp(-1i/2*(qq_hat+N*(i-1))^2*cot(-alpha(ss))*Ts^2)*exp(+1i*2*pi*m_hat*(qq_hat+N*(i-1))/M)...
                                                        *exp(1i*2*pi/M*(n-n_hat)*e)*exp(-abs(n-m)/gamma)* besselj(0,2*pi*abs(n-n_hat)*fd);
                                                elseif (i==j && k~=k_hat)
                                                    p_ICI(ss)=p_ICI(ss)+((sin(-alpha(ss))-1i*cos(-alpha(ss)))/N)^.5*exp(1i/2*k_hat^2*cot(-alpha(ss))*uN^2)*exp(1i/2*q^2*cot(-alpha(ss))*Ts^2)*exp(-1i*2*pi*q*k_hat/N)...
                                                        *((sin(-alpha(ss))+1i*cos(-alpha(ss)))/N)^.5*exp(-1i/2*k_hat^2*cot(-alpha(ss))*uN^2)*exp(-1i/2*q_hat^2*cot(-alpha(ss))*Ts^2)*exp(+1i*2*pi*q_hat*k_hat/N)...
                                                        * ((sin(alpha(ss))-1i*cos(alpha(ss)))/N)^.5*exp(1i/2*qq^2*cot(alpha(ss))*uN^2)*exp(1i/2*k^2*cot(alpha(ss))*Ts^2)*exp(-1i*2*pi*qq*k/N)...
                                                        *((sin(alpha(ss))+1i*cos(alpha(ss)))/N)^.5*exp(-1i/2*qq_hat^2*cot(alpha(ss))*uN^2)*exp(-1i/2*k^2*cot(alpha(ss))*Ts^2)*exp(+1i*2*pi*qq_hat*k/N)...
                                                        *((sin(alpha(ss))-1i*cos(alpha(ss)))/M)^.5*exp(1i/2*(q+N*(i-1))^2*cot(alpha(ss))*uM^2)*exp(1i/2*n^2*cot(alpha(ss))*Ts^2)*exp(-1i*2*pi*(q+N*(i-1))*n/M)...
                                                        *((sin(alpha(ss))+1i*cos(alpha(ss)))/M)^.5*exp(-1i/2*(q_hat+N*(i-1))^2*cot(alpha(ss))*uM^2)*exp(-1i/2*n_hat^2*cot(alpha(ss))*Ts^2)*exp(+1i*2*pi*(q_hat+N*(i-1))*n_hat/M)...
                                                        *((sin(-alpha(ss))-1i*cos(-alpha(ss)))/M)^.5*exp(1i/2*m^2*cot(-alpha(ss))*uM^2)*exp(1i/2*(qq+N*(i-1))^2*cot(-alpha(ss))*Ts^2)*exp(-1i*2*pi*m*(qq+N*(i-1))/M)...
                                                        *((sin(-alpha(ss))+1i*cos(-alpha(ss)))/M)^.5*exp(-1i/2*m_hat^2*cot(-alpha(ss))*uM^2)*exp(-1i/2*(qq_hat+N*(i-1))^2*cot(-alpha(ss))*Ts^2)*exp(+1i*2*pi*m_hat*(qq_hat+N*(i-1))/M)...
                                                        *exp(1i*2*pi/M*(n-n_hat)*e)*exp(-abs(n-m)/gamma) *besselj(0,2*pi*abs(n-n_hat)*fd);
                                                elseif (i~=j)
                                                    p_MUI(ss)=p_MUI(ss)+((sin(-alpha(ss))-1i*cos(-alpha(ss)))/N)^.5*exp(1i/2*k_hat^2*cot(-alpha(ss))*uN^2)*exp(1i/2*q^2*cot(-alpha(ss))*Ts^2)*exp(-1i*2*pi*q*k_hat/N)...
                                                        *((sin(-alpha(ss))+1i*cos(-alpha(ss)))/N)^.5*exp(-1i/2*k_hat^2*cot(-alpha(ss))*uN^2)*exp(-1i/2*q_hat^2*cot(-alpha(ss))*Ts^2)*exp(+1i*2*pi*q_hat*k_hat/N)...
                                                        * ((sin(alpha(ss))-1i*cos(alpha(ss)))/N)^.5*exp(1i/2*qq^2*cot(alpha(ss))*uN^2)*exp(1i/2*k^2*cot(alpha(ss))*Ts^2)*exp(-1i*2*pi*qq*k/N)...
                                                        *((sin(alpha(ss))+1i*cos(alpha(ss)))/N)^.5*exp(-1i/2*qq_hat^2*cot(alpha(ss))*uN^2)*exp(-1i/2*k^2*cot(alpha(ss))*Ts^2)*exp(+1i*2*pi*qq_hat*k/N)...
                                                        *((sin(alpha(ss))-1i*cos(alpha(ss)))/M)^.5*exp(1i/2*(q+N*(i-1))^2*cot(alpha(ss))*uM^2)*exp(1i/2*n^2*cot(alpha(ss))*Ts^2)*exp(-1i*2*pi*(q+N*(i-1))*n/M)...
                                                        *((sin(alpha(ss))+1i*cos(alpha(ss)))/M)^.5*exp(-1i/2*(q_hat+N*(i-1))^2*cot(alpha(ss))*uM^2)*exp(-1i/2*n_hat^2*cot(alpha(ss))*Ts^2)*exp(+1i*2*pi*(q_hat+N*(i-1))*n_hat/M)...
                                                        *((sin(-alpha(ss))-1i*cos(-alpha(ss)))/M)^.5*exp(1i/2*m^2*cot(-alpha(ss))*uM^2)*exp(1i/2*(qq+N*(j-1))^2*cot(-alpha(ss))*Ts^2)*exp(-1i*2*pi*m*(qq+N*(j-1))/M)...
                                                        *((sin(-alpha(ss))+1i*cos(-alpha(ss)))/M)^.5*exp(-1i/2*m_hat^2*cot(-alpha(ss))*uM^2)*exp(-1i/2*(qq_hat+N*(j-1))^2*cot(-alpha(ss))*Ts^2)*exp(+1i*2*pi*m_hat*(qq_hat+N*(j-1))/M)...
                                                        *exp(1i*2*pi/M*(n-n_hat)*e)*exp(-abs(n-m)/gamma)* besselj(0,2*pi*abs(n-n_hat)*fd);
                                                end
                                            else
                                                p_desired(ss)=p_desired(ss);
                                                p_ICI(ss)=p_ICI(ss);
                                                p_MUI(ss)=p_MUI(ss);
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
end
toc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:47:20.733

1.  去掉“ `for ss=1:length(alpha)`”和对应的“ `end`”
2.  将所有“ `alpha(ss)`”转换为“ `alpha`”
3.  将所有“ `p_desired(ss)`”转换为“ `p_desired`”
4.  将所有“ `p_ICI(ss)`”转换为“ `p_ICI`”
5.  将所有“ `p_MUI(ss)`”转换为“ `p_MUI`”
6.  将所有“ `*`”、“ `/`”和“ ”分别转换`^`为“ `.*`”、“ `./`”和“ `.^`”。
7.  将“ `elseif (i~=j)`”转换为“ `else`”
8.  删除以下代码：

> 别的
> 
> ```
>  p_desired(ss)=p_desired(ss);
> 
>     p_ICI(ss)=p_ICI(ss);
> 
>     p_MUI(ss)=p_MUI(ss); 
> ```

# jquery - jQuery 或 Javascript 解决方案来制作像博主动态视图一样的垂直导航侧边栏

> ID：15859781
> 
> 赞同：-1
> 
> 时间：2013-04-07T06:57:14.137
> 
> 标签：jquery, css, navigation, sidebar

我正在寻找一个简单的 jQuery 或 Javascript 解决方案来制作垂直导航侧边栏。
博主动态视图小工具栏之类的东西：http: [//nildarar.blogspot.com/](http://nildarar.blogspot.com/)

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:25:40.953

我找到了这个脚本，对我有用！
[http://www.designchemical.com/lab/jquery-vertical-mega-menu-plugin/examples/](http://www.designchemical.com/lab/jquery-vertical-mega-menu-plugin/examples/)

> 这个插件从标准的 HTML 嵌套列表创建垂直的巨型菜单，允许用户查看每个顶级菜单项的所有可用菜单选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:02:13.397

您可以同时使用这两种方法，但在 jQuery 中，如果此条件完成，您可以设置您的条件，如果您有此条件，您可以将样式添加到`div/span`您想要滚动的`div`

```
<div id="tableTag" style="height:120px;">
   <table>
      <tr>
         <th>caption1</th>
         <th>caption2</th>
         .
         .
         etc
      </tr>
   </table>
</div> 
```

在这种情况下，我更喜欢使用 JQuery，因为它易于控制且易于添加样式和属性：

```
// get Data
// make your condition :
if(rowCount >= 10)
{
   $("#tableTag").css('overflow', 'auto');
} 
```

# ruby-on-rails - 在 OSX Mountain Lion 上使用 Ruby 2.0.0p0 的 Nokogiri（没有要加载的此类文件）

> ID：15859782
> 
> 赞同：1
> 
> 时间：2013-04-07T06:57:47.767
> 
> 标签：ruby-on-rails, ruby, nokogiri

我在运行 OSX 10.8.3、Ruby 2.0.0p0、Rails 3.2.13 的系统上安装了 nokogiri。尝试运行以开头的简单测试脚本时

```
require 'rubygems'
require 'nokogiri'
require 'open-uri' 
```

我得到错误：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- nokogiri (LoadError)
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
from /Users/jerome/Documents/MyFiles/Developer/testruby.rb:2 
```

nokogiri 目前是否支持 OSX 上的 Ruby 2.0？

编辑：从 Sublime Text 2 构建时出现此问题。脚本在 irb 上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:41:10.603

支持 Nokogiri。

在最初的问题中，我是从 Sublime Text 2 构建的。这产生了错误，而在 irb 上这样做效果很好。

[http://rubenlaguna.com/wp/2012/12/07/sublime-text-2-rvm-rspec-take-2/](http://rubenlaguna.com/wp/2012/12/07/sublime-text-2-rvm-rspec-take-2/)的解决方案对我有用。这改变了 Sublime 查找 Ruby 的默认路径。

解决方案：

更新 ~/Library/Application\ Support/Sublime\ Text\ 2/Packages/Ruby/Ruby.sublime-build 到

```
{
  "env":{
      "PATH":"${HOME}/.rvm/bin:${PATH}"
  },
  "cmd": ["rvm-auto-ruby", "$file"],
  "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
  "selector": "source.ruby"
} 
```

另外，我为我最初没有发布我从 Sublime Text 2 中得到错误的错误道歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:10:52.093

错误输出中显示的路径表明您使用的是系统默认版本的 Ruby (1.8.7)，因为它引用`/System/Library/Frameworks/Ruby.framework/Versions/1.8`. 您可能需要确保使用正确`ruby`的 2.0 二进制文件。

如果你是通过 RVM 安装的，你可以运行类似的东西，或者在你的源项目中`rvm use 2.0.0`使用一个`.ruby-version`或文件。`.rvmrc`或者直接调用 2.0.0`ruby`二进制文件。

# r - rbind 的效率

> ID：15859785
> 
> 赞同：0
> 
> 时间：2013-04-07T06:58:19.740
> 
> 标签：r, performance, rbind

我正在编写一个必须构建一个大型矩阵的脚本。我想为每个名称取一个名称向量从不同的数据框中获取数据对其进行一些操作，然后返回该名称的数据向量。例如：

```
allNew=matrix(ncol=ncol(X)-1);
for(name in list)
    {
    tmpdata=all[grep(names,list$Names),];
    data=(as.data.frame(apply(tmpdata[,2:(ncol(tmpdata)-1)],2,sum))==nrow(tmpdata))*1
    colnames(data)=name;
        data=t(data);
        allNew=rbind(allNew,data);
    } 
```

名称列表的长度在 10000 范围内，每个名称 tmpdata 有 1-5 行。我在我的实验室 linux 服务器上运行我的代码，大约 8 GB 内存，
不知何故，我觉得这比它应该花费的时间要长得多，需要几分钟。我怎样才能更有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:48:12.670

正如评论所指出的，一次增长一个对象比覆盖部分预分配对象要慢得多**。**像这样的东西应该可以工作——尽管没有任何测试数据很难确定。

```
allNew=matrix(NA, ncol=ncol(X)-1, nrow = length(list));
for(i in 1:length(list))
    {
    name <- names(list)[i]
    tmpdata=all[grep(names,list$Names), ]
    data=(as.data.frame(apply(tmpdata[, 2:(ncol(tmpdata)-1)], 2, sum))==nrow(tmpdata))*1
    colnames(data)=name
    allNew[i, ] = t(data)
    } 
```

# c# - 将令牌传递给 WCF 服务

> ID：15859787
> 
> 赞同：1
> 
> 时间：2013-04-07T06:58:24.393
> 
> 标签：c#, wcf

我真的需要知道如何在不向所有合同添加额外参数的情况下将令牌传递给 WCF 服务，例如数字之类的一些值，以便我以后可以在我的服务中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:09:51.323

一种方法是使用[WCFExtras](http://wcfextras.codeplex.com/wikipage?title=HowToUse&referringTitle=Home)并将值放在肥皂标题中。

```
[SoapHeader("MyToken", typeof(Header), Direction = SoapHeaderDirection.In)]
[OperationContract]
string In(); 
```

这将使令牌在 WSDL 中显而易见，以防服务操作需要它。

另一种选择是使用[HTTP 标头](https://stackoverflow.com/a/1408177/477878)，您可以完全不归因于您的方法。这样做的缺点是令牌不会出现在 WSDL 中，因此服务不再完全由 WSDL 描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T22:44:46.757

使用自定义标题解决了这个问题。

您可以像这样为您的客户分配一个自定义标头：

```
 IContextChannel contextChannel = (IContextChannel)myServiceProxy;
            using (OperationContextScope scope = new OperationContextScope(contextChannel))
            {
                MessageHeader header = MessageHeader.CreateHeader("PlayerId", "", _playerId);
                OperationContext.Current.OutgoingMessageHeaders.Add(header);
                act(service);
            } 
```

在服务端，您可以获得此值：

```
 private long ExtractPlayerIdFromHeader()
    {
        try
        {
            var opContext = OperationContext.Current;
            var requestContext = opContext.RequestContext;
            var headers = requestContext.RequestMessage.Headers;
            int headerIndex = headers.FindHeader("PlayerId", "");
            long playerId = headers.GetHeader<long>(headerIndex);
            return playerId;
        }
        catch (Exception ex)
        {
            this.Log.Error("Exception thrown when extracting the player id from the header", ex);
            throw;
        }
    } 
```

另请参阅[此问题](https://stackoverflow.com/questions/3277256/identifying-wcf-client-id/3277754#3277754)，了解如何通过配置文件设置自定义标头。

# ruby-on-rails - 每个并在控制器 Rails 中使用 %w

> ID：15859788
> 
> 赞同：0
> 
> 时间：2013-04-07T06:58:45.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, schema

我有以下效果很好：

```
with_in_schemas :only => %w{schema1 schema2} do
   @user = User.count
end 
```

和输出如

```
@user => 14 
```

我想从帐户中获取架构名称，我有这个：

```
@accounts = Account.all
@accounts.each do |t|
with_in_schemas :only => t.schema  do
   @user = User.count
end
end 
```

但输出为零

```
@user => 0 
```

有`schema1`14 个`user`和`schema2`0 个用户。

更新

我尝试添加 1 个用户`schema2`

现在`schema1`有 14 个`user`和`schema2`1 个用户。

在控制器上

```
@accounts = Account.all
 @accounts.each do |t|
    with_in_schemas :only => t.schema  do
       @user = User.count
    end
 end 
```

和输出

```
@user => 1 
```

我想计算来自`schema1`和的用户`schema2`

```
@accounts = Account.all
@count_user = 0
   @accounts.each do |t|
      with_in_schemas :only => t.schema  do
         @user = User.count
      end
      @count_user = @count_user + @user
   end 
```

和输出

```
@count_user => 2 
```

为什么只有最后一个模式得到用户表的计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:53:10.230

试试这个

```
@user = 0
schemas = Account.all.map(&:schema)

with_in_schemas :only => schemas  do
  @user += User.count
end 
```

# ruby - 基于正则表达式生成随机字符串？

> ID：15859793
> 
> 赞同：7
> 
> 时间：2013-04-07T06:59:50.840
> 
> 标签：ruby, regex, string, random

我想知道是否有一种方法可以从正则表达式生成随机字符串，例如：

```
/[a-z0-9]{5}/.to_s
#=> "dsar3" 
```

我找到了`randexp`（[https://github.com/benburkert/randexp](https://github.com/benburkert/randexp)），但它似乎不适用于上面的基本示例，无论如何我觉得它被遗弃了。

任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T07:13:05.320

Perl 有一个 CPAN 模块可以做到这一点。它通过将正则表达式转换为生成语法来工作。这个概念可能适用于 Ruby，但需要一点工作。

见[http://metacpan.org/pod/Parse::RandGen](http://metacpan.org/pod/Parse::RandGen)和[http://metacpan.org/pod/Parse::RandGen::Regexp](http://metacpan.org/pod/Parse::RandGen::Regexp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T07:39:47.193

不，但如何：

```
(0..255).map(&:chr).select{|x| x =~ /[a-z0-9]/}.sample(5).join
#=> "qif0l" 
```

# google-app-engine - 如何从前端实例访问常驻后端实例的变量

> ID：15859800
> 
> 赞同：0
> 
> 时间：2013-04-07T07:00:52.847
> 
> 标签：google-app-engine

我正在考虑使用后端实例来保存共享变量，因为前端实例的每个请求都访问它们。
如果可能的话，我想知道如何实现它。
假设在这种情况下，memcache 不足以保存共享数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:58:07.793

后端实例是[可寻址](https://developers.google.com/appengine/docs/java/backends/overview#Addressing_Backends)的，这意味着您可以向后端发送 URLFetch 请求，并确保该请求由保存共享变量的同一实例处理。

您可以通过将处理程序/servlet 部署到以共享内存变量的值响应的后端实例来获得所需的效果。然后，前端实例可以通过解析 URLFetch 请求的响应来简单地访问共享变量值，如上所述。

请注意，延迟可能在数百毫秒的数量级，因此这种方法实际上并不是 memcache 的直接替代品。

# php - 为什么 Facebook 使用带有 PHP 链接的 img 标签

> ID：15859803
> 
> 赞同：-2
> 
> 时间：2013-04-07T07:01:22.010
> 
> 标签：php, facebook

我正在调试一些东西，当时我发现了以下图像标签：

```
<img style="-webkit-user-select: none" src="https://pixel.facebook.com/ajax/ego_height.php?sid=ads&amp;fbid=34324234&amp;height=0&amp;asyncSignal=4815&amp;__user=23232323&amp;__a=1&amp;fb_dtsg=AQCVSss"> 
```

为什么 Facebook 使用这个`img`标签来调用[PHP](http://en.wikipedia.org/wiki/PHP)文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:21:40.657

这实际上是一种非常普遍的做法。

由于安全原因，您无法向第三方域发出[Ajax请求。](http://en.wikipedia.org/wiki/Ajax_%28programming%29)你真的别无选择，只能通过加载图像或加载实际上是服务器端代码的 JavaScript 代码来发送数据。或者你可以两者都做（因为[谷歌分析](http://en.wikipedia.org/wiki/Google_Analytics)的工作原理，他们只加载处理页面上所有事件的 JavaScript，并通过加载带有分析参数的像素图像来注册它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:11:13.653

[因为此图像是由PHP](http://en.wikipedia.org/wiki/PHP)脚本动态生成或加载的。src 可以是任何[URI](http://en.wikipedia.org/wiki/Uniform_Resource_Identifier)，而不仅仅是图像文件。

# python - 插值和图像绘制

> ID：15859810
> 
> 赞同：3
> 
> 时间：2013-04-07T07:03:24.137
> 
> 标签：python, python-imaging-library, interpolation

在我的小项目中，我有一个返回点坐标列表的函数。像这样：

```
 points = [(x1, y1), (x2, y2),...] 
```

当我在图像上绘制它时，我会在图像上得到点，但我想要连续的线。我怎么才能得到它？以及如何在图像上绘制插值线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:58:14.953

要绘制线条，请执行以下操作：

```
import Image
import ImageDraw

im = Image.new('RGB',(500,500),(255,255,255))
draw = ImageDraw.Draw(im)
draw.line(points, fill=(255,0,0))
del draw 
im.save('output.jpg') 
```

一旦你理解了上面的代码，你就可以使用[这个问题](https://stackoverflow.com/questions/3122049/drawing-an-anti-aliased-line-with-thepython-imaging-library)的答案来绘制抗锯齿线。

# c# - WPF在Web浏览器C#中查看屏幕偏移量

> ID：15859816
> 
> 赞同：1
> 
> 时间：2013-04-07T07:04:33.610
> 
> 标签：c#, .net, wpf, browser, mshtml

我可以使用以下方法移动到页面的某个位置：

```
HTMLDocument doc2 = (HTMLDocument)webBrowser1.Document;
int offSetTop = 1000;
doc2.parentWindow.scrollTo(0, offSetTop ); 
```

屏幕自动滚动到页面的 point(0,offSetTop)。但是如果我手动滚动到页面的那个位置，如果那里没有元素标签，我怎么能得到 offSetTop 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:17:51.807

您可以`offSetTop`使用属性获取页面的当前位置`scrollTop`：试试这个代码

```
 HTMLDocument doc2;
        private void wb_LoadCompleted(object sender, NavigationEventArgs e)
        {
            doc2 = (HTMLDocument)wb.Document;
        }

        private void GetCurrentpositionOfPage_Click(object sender, RoutedEventArgs e)
        {
            MessageBox.Show( doc2.parentWindow.document.body.getAttribute("scrollTop").ToString());
        } 
```

# android - 将 3d 模型转换为增强现实的 c++ 头文件

> ID：15859826
> 
> 赞同：0
> 
> 时间：2013-04-07T07:06:07.983
> 
> 标签：android, augmented-reality, vuforia

我们正在android上创建AR应用程序。我们在 AR 方面没有太多经验。我们已经下载了适用于 Android 的 Vuforia SDK 和示例项目。同时跟踪一些图像茶壶出现在屏幕上。其详细信息（坐标等）包含在teapot.h 文件中。所以我们想创建自己的 3d 对象并将它们转换为这样的头文件。我们怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T18:44:29.703

您可以从 Blender 导出到 C++ 头文件。你应该试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T14:23:56.927

您可以使用免费的 3d 创作应用程序 Blender ( [http://www.blender.org](http://www.blender.org) )

以及此处提供的 BlenderVuforiaExport 导出器脚本：

[https://github.com/StickyBeat/BlenderVuforiaExport](https://github.com/StickyBeat/BlenderVuforiaExport)

# javascript - 每 2 秒更新一次页面 - 未捕获的 TypeError

> ID：15859827
> 
> 赞同：1
> 
> 时间：2013-04-07T07:06:41.980
> 
> 标签：javascript, runtime-error

在这个程序中 - 页面应该每 2 秒更新一次。
但是运行被打断了 -`Uncaught TypeError: Cannot set property 'value' of undefined`
在这一行 -`document.formal.input.value="Count: " + counter;`
为什么会发生这种情况？怎么了？

**代码：**

```
<html>
    <head>
        <title>Waiting example</title>
            <script>
                var counter=0;
                // call function after evty 2 sec
                id = window.setTimeout("Update();", 2000);

                function Update() {
                    counter++;
                    window.status="Count " + counter;
                    document.formal.input.value="Count: " + counter;
                    // waiting after next value
                    id=window.setTimeout("Update();", 2000);
                }               
            </script>
    </head>
        <body>
            <h1>Waiting Example</h1>
            <hr>
                Value in line status & page are update evry 2 sec.
                Click the button Reset for launch counter from zero, and on stop for stop counter.
            <hr>
                <form name="formal">
                <input type="text" name="input1" size="40"><br>
                <input type="button" value="RESET" onClick="counter=0;"><br>
                <input type="button" value="STOP" onClick="window.clearTimeout(id);"><br>
            <hr>
        </body>
</html> 
```

**问题：**

*   如何解决这个麻烦？
*   为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:18:14.827

采用

```
document.formal.input1.value="Count: " + counter; 
```

`**[LIVE DEMO](http://jsfiddle.net/UQTY2/44/)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:26:48.730

请改用 setInterval。

```
var counter=0;
// call function after evty 2 sec
id = window.setInterval(Update, 2000);

function Update() {
     counter++;
     window.status="Count " + counter;
     document.formal.elements["input1"].value="Count: " + counter;
} 
```

示例：http: [//jsfiddle.net/bLet2/](http://jsfiddle.net/bLet2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:32:03.567

我解决了你的麻烦。更改为此行 -`document.form1.input1.value`
这是**代码：**

```
<html>
    <head><title>Timeout Example</title>
        <script>
            var counter = 0;
            // call Update function in 2 seconds after first load
            ID=window.setTimeout("Update();",2000);
            function Update() {
               counter++;
               window.status="The counter is now at " + counter;
               document.form1.input1.value="The counter is now at " + counter;
            // set another timeout for the next count
               ID=window.setTimeout("Update();",2000);
            }
        </script>
    </head>
        <body>
            <h1>Timeout Example</h1>
            <hr><p>
                The text value below and the status line are being updated every two seconds.
                Press the RESET button to restart the count, or the STOP button to stop it.
            </p><hr>
            <form NAME="form1">
                <input TYPE="text" NAME="input1" SIZE="40"><br>
                <input TYPE="button" VALUE="RESET" onClick="counter = 0;"><br>
                <input TYPE="button" VALUE="STOP" onClick="window.clearTimeout(ID);">
            </form>
            <hr>
        </body>
</html> 
```

# java - 按钮在java中单击一次做一件事，然后单击后做另一件事

> ID：15859834
> 
> 赞同：0
> 
> 时间：2013-04-07T07:08:02.547
> 
> 标签：java, if-statement, applet, awt

我有一个按钮，我希望它在按下一次时执行某些操作，然后在按下时执行某些操作。我尝试了`if(e.getSource)`一次命令，然后在相同的命令之后，但它只是添加了一个标签，然后它立即将其删除。我希望它在单击后添加标签，然后在再次单击时将其删除。给我一个例子，我想明白了。

*请...*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:10:35.170

向相关类添加标志：

`boolean isClicked = false;`

在你的监听器中，检查 isClicked 是真还是假。如果为 false，则在初始单击后执行您想做的任何操作并将标志设置为 true。如果为 true，请在后续点击后执行您想做的任何事情。

```
void onActionPerformed(ActionEvent e){
    if(!isClicked){
         isClicked = true;
         //do work for first click
    }
    else {
         //add label, do other work for clicks after first
    } 
```

# uibutton - 在 Collection View 控制器中添加一项额外的项目

> ID：15859836
> 
> 赞同：0
> 
> 时间：2013-04-07T07:08:46.427
> 
> 标签：uibutton, uicollectionview

我有一个包含 10 个元素的数组。我可以将其设置为集合视图中的项目。现在我想添加第 11 个元素，这将是一个按钮。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T21:30:53.943

我这样做的方法是

```
collectionView:numberOfItemsInSection: 
```

返回比我数组中实际拥有的多一项。然后我在里面做了一个测试

```
collectionView:cellForItemAtIndexPath: 
```

查看 indexPath.row == myArray.count 是否。如果是这样，您知道是时候在最后添加特殊按钮单元格了。否则，您只是将另一个真实单元格添加到集合视图中。

```
- (NSInteger) collectionView:(UICollectionView*)collectionView numberOfItemsInSection:(NSInteger)section
{
    return self->myArray.count + 1;
}

- (UICollectionViewCell*) collectionView:(UICollectionView*)collectionView cellForItemAtIndexPath:(NSIndexPath*)indexPath
{
    if(indexPath.row < self->myArray.count)
    {
        //add regular cell to the list
    }
    else
    {
        //at the end so add special button cell to the list
    }
} 
```

我*不*建议您在呈现集合视图之前简单地向数组添加一个虚拟对象。这是我尝试的第一个方法。确保它在正确的时间出现在列表中，而不是在正确的时间出现在列表中，这是一个很大的痛苦。尤其是如果您要持久化该对象列表，则很容易陷入意外持久化虚拟对象的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:14:57.970

如果我理解得很好，你应该：

1.  子类 UICollectionViewCell 并为按钮添加一个 IBOutlet；
2.  添加一个新的原型单元，对其进行设计，为您的自定义类设置类并连接插座；
3.  如果 indexPath.item 为 10，则修改 cellForItemAtIndexPath: 以包含您的 newCell；

但是，当您可以将单元格“作为”按钮与 didSelectItemAtIndexPath: 方法一起使用时，避免 UICollectionViews 中的按钮是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:21:42.713

如果您通过数组填充集合视图，那么要添加额外的项目或新项目，只需将其添加到您的数组中，通过该数组在方法中使用该数组填充集合视图`cellForItemAtIndexPath:`，这样您就可以包含您的收藏视图中的一个新单元格。

# object - phpunit：比较 with() 的对象参数与 Mock 对象

> ID：15859840
> 
> 赞同：1
> 
> 时间：2013-04-07T07:09:17.417
> 
> 标签：object, mocking, phpunit

我试图将一个对象作为“with”的参数与我的模拟对象进行比较。当我比较`var_dump`预期和实际时，它们看起来是等效的。`->with`我的预感是我在参数中做错了什么。提前致谢

我的测试代码

```
public function testAddEntry()
{
    $expected = new Entry();
    var_dump($expected);
    $dbRef = $this->getMock('EntriesDAO');
    $dbRef->expects($this->once())->method('insert')
        ->with($expected);
    $actual = EntryHelper::addEntry($dbRef, $req); 
```

要测试的功能代码

```
static function addEntry($iDao, $req)
{
$actual = new Entry();
var_dump($actual);
$actual->newId = $iDao->insert($actual); 
```

控制台输出

```
class Entry#212 (4) {
  public $id =>
  NULL
  public $content =>
  string(0) ""
  public $date =>
  string(0) ""
  public $userId =>
  NULL
}
class Entry#209 (4) {
  public $id =>
  NULL
  public $content =>
  string(0) ""
  public $date =>
  string(0) ""
  public $userId =>
  NULL
}

Time: 0 seconds, Memory: 2.75Mb

There was 1 failure:

1) EntryHelperTest::testAddEntry
Expectation failed for method name is equal to <string:insert> when invoked 1 time(s).
Parameter 0 for invocation EntriesDAO::insert(Entry Object (...)) does not match expected value.
Failed asserting that two objects are equal. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:21:36.777

很可能，PHPUnit 正在使用[标识运算符 (===)](http://www.php.net/manual/en/language.oop5.object-comparison.php)来检查对象是否相等。正如手册中所说

> ...当使用恒等运算符 (===) 时，对象变量是相同的当且仅当它们引用同一类的同一实例时

由于您在方法 addEntry() 中创建了一个新的 Entry 实例，因此比较将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:30:14.033

根本原因。我正在将返回的值分配给对象。在我正在测试的功能中，

```
$actual->newId = $iDao->insert($actual); 
```

这一定是在修改比较值。我通过将作业分开来修复它

```
$newId = $iDao->insert($actual); 
```

*注意，在调用模拟之后修改 $actual 仍然会中断测试。所以这行不通。

```
$actual->id = $newId; 
```

# html - 使用 powershell 从 HTML 网站获取图片链接

> ID：15859843
> 
> 赞同：4
> 
> 时间：2013-04-07T07:09:39.567
> 
> 标签：html, image, parsing, powershell, download

我想批量下载一些图片库。这些图像是免费提供的，不需要任何权限。我一辈子都无法让它发挥作用。这就是我到目前为止所拥有的。$pattern 吐出的是整个 HTML 行，而不仅仅是图像链接。你有什么可以给我的指点吗？循环设置为仅运行一次以进行测试。循环将遍历所有按数字组织的页面。

```
# Variables
$i=1        # Webpage Counter
$j=1        # Image Counter
$rootDir = "http://website.com/sport/galleries/"
$saveDir = "C:\Users\user\Desktop\"
$webpagetxt = "C:\Users\user\Desktop\page.txt"
$links = "C:\Users\user\Desktop\links.txt"
$regex = "http://website.com/galleries/[0-9]*/[^\.]*.JPG"

# Create folder to download to
#New-Item -Name SiouxSportsGalleries -ItemType directory

# Start Web Client
$client = New-Object System.Net.WebClient

# Main loop to get image links and download
    For($i=10; $i -le 10; $i++){

        # Download source code of the web page.
        $url = $rootDir+$i+'.htm'
        $webclient = new-object System.Net.WebClient
        $webpage = $webclient.DownloadString($url)
        $webpage > "$webpagetxt"

    # Parse web page and find image link.
       $pattern = Get-Content $webpagetxt | Select-String -pattern $regex -Allmatches
       echo "This is the link" $pattern
    #$pattern > $links

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T08:57:49.800

您需要提取匹配的值。`Select-String`返回对象，当您返回对象时`echo`，发生的事情是`$pattern.ToString()`. `ToString()`返回行，而不是匹配值。这将仅返回所有链接：

```
Get-Content $webpagetxt | Select-String -pattern $regex -Allmatches | % { $_.Matches | % { $_.Value } } 
```

`get-content`顺便说一句，您可以简单地在换行符处拆分字符串以获取数组（如果这是您保存它的唯一原因），而不是保存网页并重新打开它。:-)

```
$webpage -split "`n" | Select-String -pattern $regex -Allmatches | % { $_.Matches | % { $_.Value } } 
```

**编辑**要下载它，您可以使用另一个 foreach 循环来扩展它：

```
$rootDir = "http://website.com/sport/galleries/"
$saveDir = "C:\Users\user\Desktop\"
$webpage -split "`n" | Select-String -pattern $regex -Allmatches | % { $_.Matches | % { $_.Value } } | % {
    #Get local path
    $local = $_.Replace($rootDir, $saveDir)
    #Create path
    $file = New-Item $local -ItemType file -Force
    #Download
    $wb.DownloadFile($_, $file.FullName)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:40:47.650

`Select-String`返回一个带有属性的对象。发送它来`Get-Member`看看你有什么好东西。您需要查看 match 属性，例如`$pattern.matches`. 查看[文档](http://technet.microsoft.com/en-us/library/dd315403.aspx)中的示例 9 。

# iphone - UIImageView / UIButton 在第二个和连续视图上自动调整为错误的帧值

> ID：15859845
> 
> 赞同：0
> 
> 时间：2013-04-07T07:10:03.153
> 
> 标签：iphone, ipad, uiview, interface-builder, autoresize

我有一个包含 UITabBar 和 UINavigationBar 的应用程序，如下所示：

![第一次，预期的结果..完美](https://i.stack.imgur.com/J4rcy.png)

在视图内部，我有 2 个子视图，它们分别占据上半部分（红色）和下半部分（绿色），在这两个视图中，我有一个 UIImageView（或我分配背景图像的 UIButton，我已经测试了这两个对象） . 我使用界面生成器分配位置和自动调整大小值，当我第一次呈现视图控制器时，一切看起来都完全正确，从而显示了包含两个子视图的视图。

但是，当我导航到选项卡栏中的其他选项卡或使用导航控制器并再次返回特定视图时，UIButton 都出错了。在 viewDidAppear 内，大小不再正确（高度变为两倍），并且第二个视图上的 UIButton 的 Y 太大了以至于超出了屏幕

![第二次和连续演出......糟糕透了](https://i.stack.imgur.com/UsCvl.png)

我整天都在调试和调整属性，但不明白出了什么问题。我注意到，如果我不选中 UIViews（红色和绿色视图）的 [Autoresize subviews] 复选框，则布局完好无损，问题就消失了。但是，这不是预期的行为，因为我希望 UIButton（连同它的 backgroundImage）在 iPad 和 4 英寸屏幕设备上被拉伸和动态增长。

附上我对第一个子视图（红色视图）的设置，第二个视图（绿色视图）的设置要么相同，要么锁定到镜像边缘。提前致谢！

![根视图设置](https://i.stack.imgur.com/77ta9.png)

![顶视图设置](https://i.stack.imgur.com/kmI8Z.png)

![顶部 UIButton / UIImageView 设置](https://i.stack.imgur.com/m99sn.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:30:43.480

将您的图像设置为按钮前景而不是按钮背景。作为按钮背景的图像会拉伸，但作为按钮前景的图像不会。

或使用以下代码将您的图像设置为不具有弹性

```
//For image as background    
[button setBackgroundImage:image forState:UIControlStateNormal];

//For image as foreground
[button setImage:image forState:UIControlStateNormal]; 
```

问候，拉维

# windows-8 - 如何捕捉异常 [C++/CX]

> ID：15859848
> 
> 赞同：1
> 
> 时间：2013-04-07T07:11:03.717
> 
> 标签：windows-8, exception-handling, windows-store-apps, c++-cx

我正在开发一个 Windows 8 应用程序 (C++)。我使用了 Windows 8 示例集合中的 httpclient 类。

```
inline void CheckHResult(HRESULT hResult)
{
    if (hResult == E_ABORT)
    {
        concurrency::cancel_current_task();
    }
    else if (FAILED(hResult))
    {
        throw Platform::Exception::CreateException(hResult);
    }
} 
```

当应用程序未连接到互联网时，此函数会引发异常。我试图像这样在下面的 lambda 中捕获异常。

```
return completionTask.then([this, stringCallback](tuple<HRESULT, wstring> resultTuple)
{
    try
    {
        CheckHResult(std::get<0>(resultTuple));
    }

    catch(Exception^ ex)
    {

    }

    return std::get<1>(resultTuple);
}); 
```

但它仍然显示一个未处理的异常：

```
First-chance exception at 0x77194B32 in Sample.exe: Microsoft C++ exception: Platform::COMException ^ at memory location 0x08C7EDF4\. HRESULT:0x800C0005
If there is a handler for this exception, the program may be safely continued. 
```

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:17:29.710

第一次机会异常并不一定表示您的代码有问题，它*与未捕获异常不同*。

[这篇（旧的，但仍然正确的）文章](http://blogs.msdn.com/b/davidklinems/archive/2005/07/12/438061.aspx)描述了第一次机会异常的真正含义，只是向调试器发出异常已引发的通知，无论以后是否会被捕获。

> 调试应用程序时，只要遇到异常，调试器就会收到通知。此时，应用程序被挂起，调试器决定如何处理异常。**第一次通过这种机制称为“第一次机会”异常。**根据调试器的配置，它要么恢复应用程序并传递异常，要么将应用程序挂起并进入调试模式。**如果应用程序处理了异常，它会继续正常运行。**

# sql - 与频率第二高的结果中的关键字匹配的所有结果

> ID：15859849
> 
> 赞同：0
> 
> 时间：2013-04-07T07:11:09.587
> 
> 标签：sql, nested, sql-like

我有一个`query`包含 3 个字段的表`(int)ID`，`(string)query`并且`(int)freq`。我需要找出与第二高频率的查询匹配关键字的所有查询。这是我尝试过的，

```
select * from query 
where query like concat('%',(Select query from query 
where freq = (Select min(freq) from query
where freq in (Select freq from query order by freq desc limit 2))),'%'); 
```

我认为“选择查询来自”行隔离了查询列，之后不选择任何东西。最后 2 个 select 语句给出频率第二高的查询。请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:15:54.980

```
SELECT ID, QUERY, FREQ
FROM
(
SELECT ID, QUERY, FREQ, ROW_NUMEBER() OVER(ORDER BY FREQ DESC) RN
FROM QUERY
) A
WHERE RN = 2 
```

# ruby-on-rails - 使用 NGINX 作为 RAILS 应用程序的负载均衡器时的 SSL 证书

> ID：15859852
> 
> 赞同：0
> 
> 时间：2013-04-07T07:11:14.970
> 
> 标签：ruby-on-rails, nginx, ssl-certificate, load-balancing, passenger

我有一个使用 Nginx 作为网络服务器的 Rails 应用程序（3.2.x）[https://myapp.com](https://myapp.com)（虚构名称），一个运行整个软件堆栈的服务器。注意 https，我安装了有效的 SSL 证书。

随着流量的增加，我想在应用程序前面添加一个负载均衡器，所以想法是：

1 个负载均衡器（使用 Nginx）
4 个应用服务器（运行 RubOnRails / Nginx）
1 个数据库服务器

服务器名称为

lb.myapp.com
app1.myapp.com、app2.myapp.com、app3.myapp.com、app4.myapp.com
db.myapp.com

我想将 SSL 处理保持在应用服务器级别（因为我不一定信任负载均衡器和应用服务器之间的网络流量）。

1.  将服务器名称 app1.myapp.com （分别）放入每个应用服务器的 server_name 配置参数中，并将 lb.myapp.com 放入负载均衡器的 server_config 参数中是否正确？

2.  我是否认为我不必设置负载均衡器中设置的 ssl_on、ssl_certificate 和 ssl_certificate_key 配置参数但仅在应用服务器（应该处理 SSL 部分）上设置是否正确？我只会添加

    ```
    proxy_set_header X-FORWARDED-PROTO https;
    proxy_redirect off; 
    ```

    到负载均衡器？

3.  我需要什么 SSL 证书，只是 myapp.com 一个证书，还是我需要为不同的应用服务器提供不同的证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:43:19.070

1.  仅当您的应用服务器根据 HOST 值为多个站点提供服务时才重要。
2.  错误的假设。您建议的设置意味着 SSL 终止是在 nginx 负载平衡器上完成的。这意味着您的 myapp.com SSL 证书应该在负载均衡器上配置。
3.  您指出您不信任负载均衡器和应用服务器之间的连接。你可以在不同的层面上解决这个问题。一些解决方案是（假设负载均衡器终止 SSL）：
    *   https 到应用服务器（您自己的建议），为此您需要 myapp.com +（自签名）应用服务器 SSL 证书。
    *   VPN beteen 负载均衡器和应用服务器

另一种方法是在应用服务器上进行 SSL 终止。这可以通过例如 HAProxy ( [http://haproxy.1wt.eu/](http://haproxy.1wt.eu/) ) 来实现。这种方法有一些注意事项，例如：到您的应用服务器的所有连接都将以负载均衡器为源。

# apache - Apache 虚拟主机似乎无法正常工作

> ID：15859853
> 
> 赞同：2
> 
> 时间：2013-04-07T07:11:23.360
> 
> 标签：apache, dns, apache2

我已经为我网站的虚拟主机设置了`/etc/apache2/sites-available`. 我创建了一个名为 mysite.com 的文件，里面有：

```
<VirtualHost *:80>
     ServerAdmin email@mail.com
     ServerName mysite.com
     ServerAlias mysite.com
     DocumentRoot /srv/www/mysite.com/public_html/
     ErrorLog /srv/www/mysite.com/logs/error.log
     CustomLog /srv/www/mysite.com/logs/access.log combined
</VirtualHost> 
```

然而，当我使用网络浏览器访问实际域时，它似乎正在服务`/var/www/index.html`. 我的 DNS 正在将帧重定向到我的服务器 IP 地址。我还需要做什么才能使其正常工作？

我是托管自己网站的新手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T07:15:45.400

您需要启用此虚拟主机 + 重新加载 apache 配置：

```
# a2ensite mysite.com
# apache2ctl graceful 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T08:17:18.243

我为此苦苦挣扎了几天，最终得到帮助的是禁用默认虚拟主机。在 ubuntu 14/apache 2.4 中，您将在启用站点的目录中看到“000-default.conf”

所以

```
a2dissite 000-default.conf 
```

还要注意 .conf 扩展名，它是强制性的

# javascript - 无法修改添加到 Number.prototype 的属性

> ID：15859854
> 
> 赞同：2
> 
> 时间：2013-04-07T07:11:42.213
> 
> 标签：javascript

有人可以在 JavaScript 中解释这种行为吗？

```
var a = 6;
a.constructor.prototype.prop = 5;
print(a.prop);
a.prop = 4;
print(a.prop); 
```

然后我在ideone中运行它：

```
5
5 
```

我知道它`a`本身是一个`number`，但它的原型是`object`。但是为什么会存在这样的差异呢？当然，这可能是多个编码错误的根源。这是否被认为是 JavaScript 的“邪恶部分”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T07:34:23.263

问题是这`a`是一个原始值。不是一个对象。您只能将属性分配给对象。不是原始值。

当您尝试将属性分配给原始值时，JavaScript 会立即将其强制转换为对象。例如：

```
var x = true; // x is primitive
x.y = false;  // x is coerced to an object
alert(x.y);   // y is undefined 
```

在此处查看演示：http: [//jsfiddle.net/UtYkA/](http://jsfiddle.net/UtYkA/)

第二行发生的事情是：

```
new Boolean(x).y = false; // x is not the same as new Boolean(x) 
```

因为`x`被强制转换成一个对象并且属性`y`被添加到这个对象，所以没有属性被添加到它`x`本身。

所有原语都是如此——JavaScript 中的布尔值、数字和字符串。这就是`print(a.prop)`总是打印的原因`5`-`a`是原始的，而不是对象。

当您尝试访问`a.prop`它时，它会强制`a`转换为一个对象，但每次都不是同一个对象。因此 JavaScript 将其处理如下：

```
var a = 6;
new Number(a).constructor.prototype.prop = 5;
print(new Number(a).prop);
new Number(a).prop = 4;    // assigning prop to an object which is discarded
print(new Number(a).prop); // accessing prop from an object which has no prop 
```

有关更多信息，请阅读以下答案：[https ://stackoverflow.com/a/15705498/783743](https://stackoverflow.com/a/15705498/783743)

# c# - 如何动态地在另一个控件旁边显示一个控件？

> ID：15859855
> 
> 赞同：0
> 
> 时间：2013-04-07T07:11:48.897
> 
> 标签：c#, .net, winforms

有一个类`NodeButton`，这些`NodeButton`是动态创建的，然后添加到`Parent Control`其中`Panel`。在`NodeButton`里面创建了一个内部`TextBox`，它正确显示在`NodeButton`. **问题是我需要在里面创建另一个`TextBox`，它应该位于`NodeButton`.** `Button`可以`Moved`，应该像`TextBox`第一个一样移动。现在新`TextBox`的不可见，因为它在`Button`的边界之外。如果不为按钮和TextBox创建Wrapper Control，这可能吗，NodeButton类太复杂了..

```
+------+ +-------+
|Button| |TextBox|
+------+ +-------+

public class NodeButton : Button
{
  ...
  public NodeButton()
  {
    TextBox tb = new TextBox()
    {
       Name = ...
       Location = New Point(2,2);
       ...
       Parent = this;
    }
    this.Controls.Add(tb);    

  ..
  }
  ..
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:51:46.520

```
this.Controls.Add(tb); 
```

不要将文本框添加到按钮的控件集合中，将其添加到按钮的父级中。大致：

```
tb.Location = new Point(this.Right + 5, this.Top);
this.Parent.Controls.Add(tb); 
```

请确保父母是有效的，不清楚它可能来自上下文。如果不是，或者您不能确定，那么最好覆盖 OnParentChanged。建议使用 UserControl。所以不是塞满了控件的面板，这往往会使你的 UI 变得爬行。

# javafx - JavaFX、TableView 和 JPA

> ID：15859856
> 
> 赞同：5
> 
> 时间：2013-04-07T07:12:10.677
> 
> 标签：javafx, tableview, pojo

我是 JavaFX 新手，我正在尝试将旧的 Swing 应用程序重构为 JavaFX 应用程序。

我还使用 JPA（带有 EclipseLink 实现）来保存/检索数据。
所以我定义了一些带注释的 POJO。

下面是我带注释的 POJO：

```
import java.io.Serializable;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.persistence.Transient;

/**
 *
 * @author alex
 */
@Entity
@Table(name = "materiale", catalog = "elledia", schema = "")
public class Materiale implements Serializable {
  @Transient
  private static final long serialVersionUID = 1L;

  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  @Basic(optional = false)
  @Column(name = "id")
  private Long id;

  @Basic(optional = false)
  @Column(name = "colata")
  private String colata;

  @Basic(optional = false)
  @Column(name = "dimensione")
  private String dimensione;

  @Basic(optional = false)
  @Column(name = "specifica")
  private String specifica;

  @Basic(optional = false)
  @Column(name = "unita_misura")
  private String unitaMisura;

  @Column(name = "version")
  private Integer version;

  @ManyToOne (fetch = FetchType.LAZY)
  @JoinColumn (name = "certificato_id")
  private Certificato certificato;

  public Materiale(Long id, String colata, String dimensione, String specifica, String unitaMisura, Certificato certificato) {
    this.id = id;
    this.colata = colata;
    this.dimensione = dimensione;
    this.specifica = specifica;
    this.unitaMisura = unitaMisura;
    this.certificato = certificato;
  }

  public Long getId() {
    return id;
  }

  public void setId(Long id) {
    Long oldId = this.id;
    this.id = id;
  }

  public String getColata() {
    return colata;
  }

  public void setColata(String colata) {
    String oldColata = this.colata;
    this.colata = colata;
  }

  public String getDimensione() {
    return dimensione;
  }

  public void setDimensione(String dimensione) {
    String oldDimensione = this.dimensione;
    this.dimensione = dimensione;
  }

  public String getSpecifica() {
    return specifica;
  }

  public void setSpecifica(String specifica) {
    String oldSpecifica = this.specifica;
    this.specifica = specifica;
  }

  public String getUnitaMisura() {
    return unitaMisura;
  }

  public void setUnitaMisura(String unitaMisura) {
    String oldUnitaMisura = this.unitaMisura;
    this.unitaMisura = unitaMisura;
  }

  public Integer getVersion() {
    return version;
  }

  public void setVersion(Integer version) {
    Integer oldVersion = this.version;
    this.version = version;
  }

  public Certificato getCertificato() {
    return certificato;
  }

  public void setCertificato(Certificato certificato) {
    Certificato oldCertificato = this.certificato;
    this.certificato = certificato;
  }

  @Override
  public int hashCode() {
    int hash = 0;
    hash += (id != null ? id.hashCode() : 0);
    return hash;
  }

  @Override
  public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof Materiale)) {
      return false;
    }
    Materiale other = (Materiale) object;
    if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
      return false;
    }
    return true;
  }

  @Override
  public String toString() {
    return "com.alessandrodonato.elledia.certificati.gui.Materiale[ id=" + id + " ]";
  }

} 
```

我在使用 TableViewcontrol 时遇到了一些问题：

*   好的，我已经阅读了有关如何将 POJO 绑定到 TableView 的各种帖子。
*   好的，我必须定义一个 ObservableList 并将其绑定到 TableView 以填充和更新它。
*   但是要定义它，我必须在我的 POJO 属性中使用 SimpleStringProperty 而不是 String ，并且注释不适用于此...

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:02:47.727

[TiwulFX](http://tiwulfx.panemu.com/)提供了`JavaFX`专门设计用于处理`java` **POJO**对象的自定义组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-30T16:41:32.120

在不改变我的 POJO 的情况下为我工作。

```
TableColumn coluna1 = new TableColumn("Nome");
TableColumn coluna2 = new TableColumn("Álbum");
TableColumn coluna3 = new TableColumn("Imagem");
TableColumn coluna4 = new TableColumn("Descrição");
TableColumn coluna5 = new TableColumn("Tags");

coluna1.setCellValueFactory(
    new PropertyValueFactory<>("nome")
);
coluna2.setCellValueFactory(
    new PropertyValueFactory<>("album")
);

...

tabelaItens.getColumns().addAll(coluna1, coluna2, coluna3, coluna4, coluna5);

tabelaItens.setItems(FXCollections.observableArrayList(itens)); 
```

POJO：

```
@Entity
public class Item implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;

    @ManyToOne
    private Album album;

    @Column(name = "nome")
    private String nome;

    @Temporal(javax.persistence.TemporalType.TIMESTAMP)
    @Column(name = "data_criacao")
    private Calendar dataCriacao;

    @Column(name = "data_imagem")
    @Temporal(javax.persistence.TemporalType.TIMESTAMP)
    private Calendar dataImagem;

    @Lob
    @Basic(fetch = FetchType.LAZY)
    @Column(name = "imagem")
    private byte[] imagem;

    @Column(name = "tipo_imagem")
    private String tipoImagem;

    @Column(name = "descricao")
    private String descricao;

    @Column(name = "tags")
    private String tags;

    ...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T09:31:13.727

```
public class MaterialeProperty {
    private Materiale materiale;

    public MaterialeProperty (Materiale materiale) {

        this.materiale= materiale;

        this.setId(materiale.getId());

    }

    private LongProperty id = new SimpleLongProperty() {

        public void set(long l) {
            super.set(l);
            materiale.setId(l);
        }
    };

    public final Long getId() {
        return id.get();
    }

    public final void setId(Long value) {
        id.set(value);
    }

    public LongProperty idProperty() {
        return id;
    }

    ....

} 
```

# css - CSS：不在跨度标签内的文本的选择器

> ID：15859858
> 
> 赞同：3
> 
> 时间：2013-04-07T07:12:23.397
> 
> 标签：css, css-selectors

我有以下 DOM 结构：

```
<label>
    <select>
    ...
    </select>
    records at one one time
</label> 
```

`records at one time`现在，如果使用媒体查询在基于移动的浏览器中查看网页 ，我打算隐藏文本。

我的问题是如何在这里选择文本？请注意，此 DOM 由库（DataTables）自动生成，我无法控制它，因此无法添加跨度类。我希望对于移动浏览器，只显示选择而不是`records at one time`- 如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:41:33.313

There is no such selector in CSS. Selectors can only select elements or pseudo-elements, and there is no pseudo-element that would help here.

You can, however, hide the text with CSS, if the `label` element contains only the `select` element and the text to be hidden. You would hide the `label` element and “unhide” the `select` element. You cannot use `display: none`, since it hides all children. But there are other ways.

Perhaps the simplest is this:

```
label { visibility: hidden;}
select { visibility: visible; } 
```

You can alternatively set the font size to zero and then the desired font size on the `select` element:

```
label { font-size: 0; }
select { font-size: 12pt; } 
```

Unfortunately, you need to set the font size in physical units here (or use the `rem` unit, but its browser support is still limited).

Some browsers have a setting for minimal font size, but it does not seem to apply to a zero font size.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:46:03.867

这个怎么样？

```
label {
   font-size: 0;
}
label p {
   font-size: 14px;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-07T07:29:32.893

我将以这个 HTML 为例：

```
<label>
    <p class="test">This is a test</p>
    records at one one time
</label> 
```

这实际上取决于您要应用哪种样式。只要它不影响元素的[框模型](http://www.w3.org/TR/CSS21/box.html)，您就可以通过为标签应用默认的 css 样式来做到这一点，这将影响带有和不带有 p 标签的文本：

```
label {
    color:red;
} 
```

然后您可以使用以下命令覆盖 p 标签中的文本：

```
label p {
    color:yellow;
} 
```

现在你可以看到只有没有 p 标签的文本是红色的。

[演示](http://jsfiddle.net/LrNeN/)

# php - 拦截控制器 - Symfony2

> ID：15859865
> 
> 赞同：2
> 
> 时间：2013-04-07T07:12:59.570
> 
> 标签：php, symfony

我想拦截所有控制器动作并做两件事之一（取决于一个选项 - 对于这个例子，说 URL 中的一个查询字符串值）：

(1) 返回一个仅包含变量的数组，而不是渲染模板

(2) 准确渲染模板，但忽略该模板内的任何“扩展”操作

这样做的原因是使用相同的服务器端代码，选项 1 允许我只返回 Ajax 请求的变量，选项 2 允许我只返回 HTML 的内容部分（对于 Ajax）而不是完整的带有导航等的 HTML

我尝试过扩展一个控制器，但一直遇到烦人的“与 Symfony\Bundle\FrameworkBundle\Controller\Controller 不匹配”的问题。

我试过使用事件监听器，这似乎让我更接近，但我不认为监听控制器事件实际上运行控制器。

我确定这应该很容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:23:45.567

为此，您可以使用 FOSRestBundle 或仅使用它的一部分。

来自 README.md：

> 启用输出和格式不可知控制器的视图层

[https://github.com/FriendsOfSymfony/FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)

# matlab - 如何使用三相可编程电压源模拟电压骤降/骤升情况？

> ID：15859874
> 
> 赞同：0
> 
> 时间：2013-04-07T07:14:27.327
> 
> 标签：matlab, simulink

我一直在尝试模拟电压骤降、骤升、谐波等电能质量干扰。我想在 Simulink 中使用 SimPowerSystems 的三相可编程电压源模块，但我得到的只是锯齿形信号，尽管输出应该是正弦的。谁能说出上述块集的参数可能出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:04:07.840

锯齿形信号对于太大的仿真步骤来说是典型的。调整`max step size`您的求解器设置。

# javascript - javascript 香蕉卡

> ID：15859881
> 
> 赞同：0
> 
> 时间：2013-04-07T07:16:11.963
> 
> 标签：javascript, html, web

我为一个必须为学校做的项目编写了一个 javascript 代码。我的想法是通过单击按钮在屏幕上显示随机香蕉。所以我写了这段代码..但它不起作用！

```
<script>

function bananenapokalypse() {
    var t=10.20;
    var myVar=setInterval(function(){myTimer()},200);
}
function myTimer()
{
    var zufall=Math.floor(Math.random() * 1100) + 1;
    var zufall2=Math.floor(Math.random() * 1000) + 1;
    var zufall3=Math.floor(Math.random() * 1250) + 1;
    var zufall4=Math.floor(Math.random() * 900) + 1;

    var grose  =Math.floor(Math.random() * 200) + 1;
    var grose2 =Math.floor(Math.random() * 300) + 1;
    var grose3 =Math.floor(Math.random() * 200) + 1;

    document.getElementById("demo").innerHTML+= '<div class="bananenapokalypse" style="top: '+zufall+';right: '+ zufall2+ ';"><img src="./bilder/banane.png" width="'+ grose +'"/></div>';
    document.getElementById("bananenapokalypse").innerHTML+='<div class="bananenapokalypse" style="top: '+zufall2+';right: '+ zufall3+ ';"><img src="./bilder/banane.png" width="'+ grose2 +'"/></div>';
    document.getElementById("bananenapokalypse").innerHTML+= '<div class="bananenapokalypse" style="top: '+zufall3+';right: '+ zufall4+ ';"><img src="./bilder/banane.png" width="'+ grose3 +'"/></div>';
    document.getElementById("bananenapokalypse").innerHTML+='<div class="bananenapokalypse" style="top: '+zufall4+';right: '+ zufall+ ';"><img src="./bilder/banane.png" width="'+ grose +'"/></div>';

}

</script>   
</head>
<body id="bananenapokalypse">

<p id="demo"><a href="javascript:bananenapokalypse()"><button><span class="energie">Energie?</span><br /><br />[Starte die Bananenapokalypse]</button></a></p> 
```

我也知道代码排列不整齐......但它是针对学校的，主题是关于 HTML 而不是 javascript。

你知道为什么它不工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:33:21.573

像这样使用 onclick 事件：

```
<p id="demo"><button onclick="bananenapokalypse()"><span class="energie">Energie?</span><br /><br />[Starte die Bananenapokalypse]</button></a></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T07:34:40.890

1）您的函数与主体 ID 具有相同的名称。

`<a>`2）标签使用方式不当

[http://jsfiddle.net/UQTY2/47/](http://jsfiddle.net/UQTY2/47/)

```
<div id="bananenapokalypse">
    <p id="demo">
        <button onclick="javascript:myFunctionbananenapokalypse();"><span class="energie">Energie?</span>
            <br />
            <br />[Starte die Bananenapokalypse]</button>
    </p>
</div>

<script>
function myFunctionbananenapokalypse() {
    var t = 10.20;
    var myVar = setInterval(function () {
        myTimer()
    }, 200);
}

function myTimer() {
    var zufall = Math.floor(Math.random() * 1100) + 1;
    var zufall2 = Math.floor(Math.random() * 1000) + 1;
    var zufall3 = Math.floor(Math.random() * 1250) + 1;
    var zufall4 = Math.floor(Math.random() * 900) + 1;

    var grose = Math.floor(Math.random() * 200) + 1;
    var grose2 = Math.floor(Math.random() * 300) + 1;
    var grose3 = Math.floor(Math.random() * 200) + 1;

    document.getElementById("demo").innerHTML += '<div class="bananenapokalypse" style="top: ' + zufall + ';right: ' + zufall2 + ';"><img src="./bilder/banane.png" width="' + grose + '"/></div>';
    document.getElementById("bananenapokalypse").innerHTML += '<div class="bananenapokalypse" style="top: ' + zufall2 + ';right: ' + zufall3 + ';"><img src="./bilder/banane.png" width="' + grose2 + '"/></div>';
    document.getElementById("bananenapokalypse").innerHTML += '<div class="bananenapokalypse" style="top: ' + zufall3 + ';right: ' + zufall4 + ';"><img src="./bilder/banane.png" width="' + grose3 + '"/></div>';
    document.getElementById("bananenapokalypse").innerHTML += '<div class="bananenapokalypse" style="top: ' + zufall4 + ';right: ' + zufall + ';"><img src="./bilder/banane.png" width="' + grose + '"/></div>';
}

<script> 
```

# codeigniter - CodeIgniter update() 默认为 insert()

> ID：15859882
> 
> 赞同：4
> 
> 时间：2013-04-07T07:16:20.213
> 
> 标签：codeigniter, sql-update

这可能/真的吗？

例如，如果我想更新 id 为 1 的行，但不存在行，这个函数（更新函数）会自动***插入***一个包含给定数据的新行吗？是否有启用此功能的参数？

如果不是，那么在不使用单独的函数来评估表并在行存在时返回 bool 的情况下处理这个问题（如果可能的话）的最佳方法是什么。（然后从那里更新或插入）

不是什么大问题..只是在寻找澄清并想知道是否有人知道这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-05T11:07:46.193

[我在此链接](http://ellislab.com/forums/viewthread/72906/#360915)中找到了一个很好的解决方案，如果有人仍在寻找**codeigniter**中的解决方案，我希望它会有所帮助：

```
$sql = 'INSERT INTO menu_sub (id, name, desc, misc)
        VALUES (?, ?, ?, ?)
        ON DUPLICATE KEY UPDATE 
            name=VALUES(name), 
            desc=VALUES(desc), 
            misc=VALUES(misc)';

$query = $this->db->query($sql, array( $id, 
                                       $this->validation->name, 
                                       $this->validation->desc, 
                                       $this->validation->misc
                                      )); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T08:15:51.953

也许您正在寻找的是这个[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)- 前提是您使用的是 MySQL 并且您`id`是表上的唯一键。

您必须手动构造查询并传递给`$this->db->query()`函数，而不是像 DB 驱动程序的帮助函数那样的任何内置活动记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:16:16.297

我不知道您为什么要使用它，但是处理此问题的一种方法（根据您的要求使用一个功能）如下：

```
function update_or_insert($data){

    if(!array_key_exists('id',$data))
        return $this->db->insert($data);

    $row = $this->db->get_where('mytable',['id' => $data['id']])->row();

    if(!$row) return false;

    $this->db->where($row->id);
    return $this->db->update('my_table',$data); 
} 
```

$data 可以是从控制器传递的整个 $_POST 数组。我会将这个函数放在代表表（my_table）的模型中。

这是一种应该有效的解决方案。让我们知道。

# php - 尝试从 Twitter 获取个人资料图片，此代码有什么问题？

> ID：15859885
> 
> 赞同：1
> 
> 时间：2013-04-07T07:16:44.447
> 
> 标签：php, twitter

我写了这段代码，它运行但不为我返回个人资料图片。我也仔细检查了获取图片的网址。我到底哪里错了？我还希望返回的图片大小为 150x150px。如何获得要显示的自定义尺寸。谢谢！

```
<?php
define('BASE_URL', 'http://api.twitter.com/1/users/profile_image/screen_name=');

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
  $handle = $_POST['handle'];
  $size = 'bigger';
  if (isset($handle) && isset($size)) {
$twitterURL = BASE_URL . $handle . '&size=' . $size;
 }
}
?>

<!DOCTYPE HTML>
<html lang="it-IT">
<head>
<meta charset="UTF-8">
<title>Get TwitterPic</title>
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="style.css">

</head>
<body>

<div id="wrapper">
<h1>Get image from twitter</h1>

<form action="<?php echo $_SERVER['PHP_SELF'] ?>" method="post">
    <p><label for="handle">Twitter Handle</label>
        <input type="text" id="twitter" name="handle" placeholder="Twitter Handle"></p>

    <p><input type="submit" value="Get Twitter Pic"></p>
    </form>
  <?php if (isset($size) && isset($twitterURL)): ?>
<img src="<?= $twitterURL ?>">
  <?php endif; ?>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:58:58.687

查看 Twitter 的[API 文档](https://dev.twitter.com/docs/api/1/get/users/profile_image/%3ascreen_name)了解此方法：

> 此方法不得用作呈现给应用程序用户的图像源 URL。

此方法不返回图像数据，而是返回 HTTP 302 Redirect 标头，将 HTTP 请求重定向到新源。这不起作用，也不应该起作用。

另外，请注意您使用的是 Twitter API 的 v1，该 API 已被弃用，并且可能随时停止工作。查看 API v1.1 的[users/show](https://dev.twitter.com/docs/api/1.1/get/users/show)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:33:58.357

首先我很好奇，因为它应该工作。然后我在您的代码中发现了多个问题。

你必须使用[https://dev.twitter.com/docs/api/1/get/users/profile_image/:screen_name](https://dev.twitter.com/docs/api/1/get/users/profile_image/:screen_name)

并且必须更改此代码，您的变量名错误：

```
<?php if (isset($size) && isset($twitterURL)): ?>
<img src="<?= $twitterURL ?>">
  <?php endif; ?> 
```

如果您不能使用现代 IDE 来防止这种情况发生，那么在开发过程中使用 error_level = ALL 会有很大帮助。

# ios - 如何在 iOS 中识别用户的语言？

> ID：15859886
> 
> 赞同：2
> 
> 时间：2013-04-07T07:17:23.343
> 
> 标签：ios, objective-c, unicode-string, nslocale

我对 iOS 和 Objective-C 非常陌生，我一直在为 SMS 应用程序开发一个项目，其中该应用程序包含一个消息文本框，并且该框有一个字符计数器，但计数器取决于文本的语言，所以我的问题是如何识别/检测用户使用什么语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:20:55.100

您可以使用以下方法获取用户的首选语言列表`NSLocal`：

```
NSString * language = [[NSLocale preferredLanguages] objectAtIndex:0];
if ([language isEqualToString:@"en"]) {
    NSLog(@"user's prefered first language is English");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:23:53.533

NSString * 语言 = [[NSLocale preferredLanguages] objectAtIndex:0];

看看这个：[Getting current device language in iOS?](https://stackoverflow.com/questions/3910244/getting-current-device-language-in-ios)

# c - UDP 多个套接字高效接收数据和处理 - C & Linux

> ID：15859890
> 
> 赞同：3
> 
> 时间：2013-04-07T07:17:37.947
> 
> 标签：c, linux, multithreading, network-programming, udp

我必须从 15 个不同的客户端接收数据，每个客户端都在 5 个不同的端口上发送。总共15 * 5个插座。

为每个客户端端口号定义和固定。例如客户端 1，端口 3001 到 3005。客户端 2，端口 3051 到 3055 等。它们有一个共同点，即第一个端口（3001，3051）用于发送命令。其他端口发送一些数据。

收到数据后，我必须检查校验和。跟踪recvd数据包，如果丢失重新请求数据包，并且还必须写入硬盘上的文件。

**限制**我无法更改上述设计，也无法从 UDP 更改为 TCP。阅读后我知道的两种方法是

*   使用 select() 进行异步多路复用。
*   每个套接字的线程。

我尝试了第一个，但当我获取数据时，我被困在了这一点上。我能够接收数据。我有一些处理要做，所以我想为每个套接字（或）启动一个线程，让套接字处理（比如所有第一个端口，所有第二个端口等 ..ie3001,3051 等）但是在这里，如果客户端发送任何数据，则 FD_ISSET 变为是的，所以如果我启动一个线程，那么它就会成为每条消息的线程。 **问题：** 如何在此处添加线程代码，假设我在 if(FD_ISSET ..) 中包含 pthread_create，那么对于我收到的每条消息，我都会创建一个线程。但我想要每个套接字一个线程。

```
 while(1)
   {
      int nready=0;
      read_set = active_set;

      if((nready = select(fdmax+1,&read_set,NULL,NULL,NULL)) == -1)
      {
        printf("Select Errpr\n");
        perror("select");
        exit(EXIT_FAILURE);
      }
      printf("number of ready desc=%d\n",nready);

      for(index=1;index <= 15*5;index++)
      {
         if(FD_ISSET(sock_fd[index],&read_fd_set))
         {              
           rc = recvfrom(sock_fd[index],clientmsgInfo,MSG_SIZE,0,
                    (struct sockaddr *)&client_sockaddr_in,
                      &sockaddr_in_length);
           if(rc < 0)
               printf("socket %d down\n",sock_fd[index]);

           printf("Recieved packet from %s: %d\nData: %s\n\n", inet_ntoa(client_sockaddr_in.sin_addr), ntohs(client_sockaddr_in.sin_port), recv_client_message);                                      
                }
         } //for
     } //while 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:57:24.633

您的解决方案需要固定的、相对较少的连接数。

创建一个帮助过程，该过程创建侦听五个端口中的每一个的线程过程，并在 上阻塞`recvfrom()`，处理数据，然后再次阻塞。然后，您可以调用帮助程序 15 次来创建线程。

这避免了所有轮询，并允许 Linux 在 I/O 完成时调度每个线程。等待时不使用 CPU，这可以扩展到更大的解决方案。

如果您需要大规模扩展，为什么不使用一组端口，并从`client_sockaddr_in`结构中获取合作伙伴地址。如果处理需要大量时间，您可以通过保持可用线程池来扩展它，并在每次收到消息时分配一个新线程，然后继续处理消息，并在响应后将线程添加回池中已发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:09:32.413

在程序启动时创建线程并将它们划分为处理数据、命令等

如何？

```
1\. lets say you created 2 threads, one for data and another for the commands.
2\. make them sleep in the thread handler or let them wait on a lock that the main thread
   acquired, seems to be that mainthread got two locks one for each of them.
3\. when any client data or command that got into the recvfrom at mainthread, depending on the 
   type of the buffer(data, commands), copy the buffer into the shared data by mainthread and 
   other threads and unlock the mutex. 
4\. at threads lock the mutex so that mainthread wont' corrupt the data and once processing is 
   done at the threads unlock and sleep. 
```

更好的方法是有一个队列，它由主线程填充，并且可以由其他线程以元素方式访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:13:23.683

我假设每个客户端上下文都独立于其他上下文，即。一个客户端socket组可以单独管理，从socket中拉取的数据可以单独处理。

您表达了处理问题的两种可能性：

1.  异步多路复用：在此设置中，套接字都由一个线程管理。这个线程`select`s 下一个必须读取哪个套接字，并从中拉出数据

2.  每个套接字的线程：在这种情况下，您拥有与套接字一样多的线程，或者更可能是一组套接字，即。客户 - 这是我将建立的解释。

在这两种情况下，线程必须保持其各自资源的所有权，即套接字。如果您开始在线程之间移动套接字，您将使事情变得更加困难。

除了需要完成的工作之外，您还需要处理线程管理：

*   线程如何启动？
*   他们如何以及何时停止？
*   错误处理策略是什么？

您的问题未涵盖这些问题，但它们可能在您的最终设计中发挥重要作用。

场景（2）似乎更简单：你有一个主要的“模板”（我在这里使用这个词的一般含义）来处理一组套接字`select`，并在同一个线程中接收和处理数据。实现起来非常简单，结构体包含特定于上下文的数据（套接字端口、指向用于数据包处理的函数的指针），以及在选择和处理上循环的单个函数，可能还有其他一些错误检查和线程寿命管理。

场景 (1) 需要不同的设置：一个 I/O 线程读取所有数据包并将它们传递给专门的工作线程进行处理。如果发生处理错误，工作线程将不得不生成临时数据包发送给客户端，并将其传递给 I/O 线程进行发送。您将需要两种方式的数据包队列来允许 I/O 和工作人员之间的通信，并让 I/O 线程以某种方式检查工作人员队列以获取重新发送请求。所以这个解决方案在开发方面有点贵，但是将 I/O 争用减少到一个点。它也更加灵活，以防必须对来自多个客户端的数据进行某些处理，或者如果您想以某种方式链接处理。例如，您可以改为每个客户端套接字有一个线程，

当然可以实现这两种解决方案的混合，每个客户端一个 IO 线程和流水线工作线程。

两种概述解决方案的优点是线程数量固定：无需按需生成和销毁线程（尽管您也可以设计一个线程池来处理它）。

对于涉及在线程之间移动套接字的解决方案，问题是：

*   什么时候应该传递这些资源？工作线程读取数据包后会发生什么？它应该将套接字返回给 IO 线程，还是冒着阻塞读取套接字以获取下一个数据包的风险？如果它`select`轮询套接字以获取更多数据包，我们将陷入场景（2），当所有客户端都有网络流量时，每个客户端将拥有自己的 I/O 线程，在这种情况下，获得的收益是多少？初始 I/O 线程执行`select`?

*   如果它把套接字传回来，IO 线程是否应该等待所有工作人员在启动另一个套接字之前返回他们的套接字`select`？如果它等待，它会冒使未服务的客户端等待已经在网络缓冲区中的数据包的风险，从而导致处理延迟。如果它不等待，并返回以`select`避免延迟未服务的套接字，那么服务的套接字将不得不等待下一次唤醒才能看到它们的套接字回到`select`池中。

如您所见，这个问题很难处理。这就是为什么我建议线程独占套接字所有权的原因，如场景 (1) 和 (2) 中所述。

# performance - Indy10，一个简单的 TCP/IP 请求和响应需要 400 毫秒

> ID：15859891
> 
> 赞同：0
> 
> 时间：2013-04-07T07:17:40.837
> 
> 标签：performance, delphi, tcp, indy10

我不明白为什么一个简单的请求和响应需要 400 毫秒才能完成。它只需要不到 1 毫秒就可以在 localhost（环回）上完成。当我从我的虚拟机向我的主开发机器发出请求时，需要 400 毫秒才能完成。最多需要 40 毫秒。这是一个 HTTP 请求的最大值，所以 TCP 应该更快。这是客户端和服务器的代码。我只是看不到我在哪里浪费时间。如果您需要更多信息，我可以介绍。

该代码与 Indy 9 和 10 兼容，这就是 IFDEF-s 的原因。同样连接已经建立，没有连接部分需要400毫秒，只有数据发送和响应。

```
function TIMCClient.ExecuteConnectedRequest(const Request: IMessageData): IMessageData;
var
  DataLength: Int64;
  FullDataSize: Int64;
  IDAsBytes: TIdBytes;
  IDAsString: ustring;
begin
  Result := AcquireIMCData;
  FAnswerValid := False;

  with FTCPClient{$IFNDEF Indy9}.IOHandler{$ENDIF} do
  begin
    Request.Data.Storage.Seek(0, soFromBeginning);
    DataLength := Length(Request.ID) * SizeOf(uchar);
    FullDataSize := DataLength + Request.Data.Storage.Size + 2 * SizeOf(Int64);

    SetLength(IDAsBytes, DataLength);
    Move(Request.ID[1], IDAsBytes[0], DataLength);

    // write data
    {$IFDEF Indy9}WriteInteger{$ELSE}Write{$ENDIF}(FullDataSize);
    {$IFDEF Indy9}WriteInteger{$ELSE}Write{$ENDIF}(DataLength);
    {$IFDEF Indy9}WriteBuffer{$ELSE}Write{$ENDIF}(IDAsBytes{$IFDEF Indy9}[0]{$ENDIF}, DataLength);
    {$IFDEF Indy9}WriteInteger{$ELSE}Write{$ENDIF}(Request.Data.Storage.Size);
    {$IFDEF Indy9}WriteStream{$ELSE}Write{$ENDIF}(Request.Data.Storage);

    // set the read timeout
    ReadTimeout := FExecuteTimeout;
    FullDataSize := ReadInt(FTCPClient);

    // read the message ID
    SetLength(IDAsBytes, 0);
    DataLength := ReadInt(FTCPClient);
    ReadBuff(FTCPClient, DataLength, IDAsBytes);

    if DataLength > 0 then
    begin
      SetLength(IDAsString, DataLength div SizeOf(uchar));
      Move(IDAsBytes[0], IDAsString[1], DataLength);
      Result.ID := IDAsString;
    end;

    // read the message data
    DataLength := ReadInt(FTCPClient);
    ReadStream(Result.Data.Storage, DataLength, False);
    Result.Data.Storage.Seek(0, soFromBeginning);

    // we were succesfull
    FAnswerValid := True;
  end;
end; 
```

服务器端：

```
procedure TIMCServer.OnServerExecute(AContext: TIMCContext);
var
  Request: IMessageData;
  Response: IMessageData;
  DataLength: Int64;
  FullDataSize: Int64;
  IDAsBytes: TIdBytes;
  IDAsString: ustring;
begin
  with AContext.Connection{$IFNDEF Indy9}.IOHandler{$ENDIF} do
  begin
    ReadTimeout := FExecuteTimeout;
    //read the data length of the comming response
    FullDataSize := ReadInt(AContext.Connection);

    // Acquire the data objects
    Request := AcquireIMCData;
    Response := AcquireIMCData;

    // read the message ID
    DataLength := ReadInt(AContext.Connection);
    ReadBuff(AContext.Connection, DataLength, IDAsBytes);

    if DataLength > 0 then
    begin
      SetLength(IDAsString, DataLength div SizeOf(uchar));
      Move(IDAsBytes[0], IDAsString[1], DataLength);
      Request.ID := IDAsString;
    end;

    // read the message data
    DataLength := ReadInt(AContext.Connection);
    ReadStream(Request.Data.Storage, DataLength, False);

    Request.Data.Storage.Seek(0, soFromBeginning);
    try
      // execute the actual request handler
      FOnExecuteRequest(Request, Response);
    finally
      // write the data stream to TCP
      Response.Data.Storage.Seek(0, soFromBeginning);
      DataLength := Length(Response.ID) * SizeOf(uchar);
      FullDataSize := DataLength + Response.Data.Storage.Size + 2 * SizeOf(Int64);

      // write ID as binary data
      SetLength(IDAsBytes, DataLength);
      Move(Response.ID[1], IDAsBytes[0], DataLength);

      // write data
      {$IFDEF Indy9}WriteInteger{$ELSE}Write{$ENDIF}(FullDataSize);
      {$IFDEF Indy9}WriteInteger{$ELSE}Write{$ENDIF}(DataLength);
      {$IFDEF Indy9}WriteBuffer{$ELSE}Write{$ENDIF}(IDAsBytes{$IFDEF Indy9}[0]{$ENDIF}, DataLength);
      {$IFDEF Indy9}WriteInteger{$ELSE}Write{$ENDIF}(Response.Data.Storage.Size);
      {$IFDEF Indy9}WriteStream{$ELSE}Write{$ENDIF}(Response.Data.Storage);
    end;
  end; 
```

我的代码的一位用户报告了同样缓慢的通信。他还测试了从虚拟机到物理机。

**更新：**

以下代码在相同的两台机器之间在 2-3 毫秒内执行。它的 Indy10，最小的可能情况。

```
procedure TForm2.Button1Click(Sender: TObject);
var
  MyVar: Int64;
begin
  TCPClient.Host := Edit1.Text;
  TCPClient.Port := StrToInt(Edit2.Text);
  TCPClient.Connect;
  try
    stopwatch := TStopWatch.StartNew;
    MyVar := 10;
    TCPClient.IOHandler.Write(MyVar);
    TCPClient.IOHandler.ReadInt64;
    stopwatch.Stop;
    Caption := IntToStr(stopwatch.ElapsedMilliseconds) + ' ms';
  finally
    TCPClient.Disconnect;
  end;
end;

procedure TForm2.TCPServerExecute(AContext: TIdContext);
var
  MyVar: Int64;
begin
  if AContext.Connection.IOHandler.InputBuffer.Size > 0 then
  begin
    MyVar := 10;
    AContext.Connection.IOHandler.ReadInt64;
    AContext.Connection.IOHandler.Write(MyVar);
  end; 
```

结尾;

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T15:38:46.083

解决了这个问题。当您找出要做什么以及问题出在哪里时，这很容易。Indy 根本没有立即发送我的数据。我不得不添加

```
OpenWriteBuffer
CloseWriteBuffer 
```

要求 Indy 在我需要时发送数据。对内部运作的简单误解会带来很多麻烦。也许这会节省一些时间。

当缓冲区关闭时，立即发送数据！

# java - 如何识别是否按下了ESC？

> ID：15859893
> 
> 赞同：0
> 
> 时间：2013-04-07T07:17:53.657
> 
> 标签：java

我正在使用 Java，并且有一种方法可以使用`input.next();`. 如果用户在键盘上按 ESC，我需要调用另一种方法。是否可以识别 ESC `input.next();`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:29:37.683

你需要一个叫做[KeyListener的东西](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

```
addKeyListener(new KeyListener() {
...
public void keyReleased(KeyEvent e) {
    if (e.getKeyCode() == 27){   //this is the code for the escape key
    //call other method
    } 
```

让我知道我是否可以更详细地指导您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:29:29.360

我想我有一些有用的链接可以回答你的问题

[http://www.thehelper.net/threads/detecting-the-escape-key-press-in-java.136974/](http://www.thehelper.net/threads/detecting-the-escape-key-press-in-java.136974/)

# javascript - 使 div 用 d3 填满整个屏幕

> ID：15859896
> 
> 赞同：-1
> 
> 时间：2013-04-07T07:18:02.157
> 
> 标签：javascript, d3.js

在 jquery 中，这很容易。只需执行以下操作：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<body style="margin: 0; padding: 0">
<div id="test" style="background: black"></div>
</body>

<script>
$('#test').width($(window).width());
$('#test').height("100%");
</script> 
```

演示：

[http://www.frostjedi.com/terra/scripts/demo/fullsize-jquery.html](http://www.frostjedi.com/terra/scripts/demo/fullsize-jquery.html)

然而，在 D3 中，这对我来说不是很清楚。这就是我正在做的事情：

```
<script src="http://d3js.org/d3.v3.min.js"></script>
<body style="margin: 0; padding: 0">
<div id="test" style="background: black"></div>
</body>

<script>
d3.select("#test").attr("width", window.innerWidth);
d3.select("#test").attr("height", "100%");
</script> 
```

演示：

[http://www.frostjedi.com/terra/scripts/demo/fullsize-d3.html](http://www.frostjedi.com/terra/scripts/demo/fullsize-d3.html)

这就像 div 根本没有被调整大小。

那么我该如何使用 D3 来使用 jquery 呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:36:42.037

jquery 正在设置 css 高度。您可以通过以下方式在 d3 中实现相同的目标：

```
d3.select("#test").style("height", "100%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:27:11.220

也许你可以使用 css 来做到这一点。在 css 文件中：

```
#fullScreen{
    position:absolute;
    left:0;
    right:0;
    top:0;
    bottom:0;
    background-color:#000;
} 
```

并在 html 文件中：

```
<body>
    <div id="fullScreen"></div>
</body> 
```

# serial-port - 串行输入正常但输出队列失败

> ID：15859901
> 
> 赞同：0
> 
> 时间：2013-04-07T07:18:52.447
> 
> 标签：serial-port, pyserial, virtual-serial-port

我在 Windows 7 下使用 Python 2.7，pySerial。

我有 8 个设备，它们通过虚拟 COM 端口（Silicon Labs CP210x USB 到 UART 桥接器）连接到我的 PC，我正在测试它们使用多处理所有 8 个 COM 端口都是打开的，每次我只向一个单元发送命令，没有多线程。

问题是在 X 时间后（可能是 10 分钟或 5 小时），串口的输出队列无法向我发送响应。每次都是不同的端口时，它不是一个特定的端口（可以是多个端口）

重要的是，设备得到我的命令并执行它。失败是得到响应，我正在测试的设备肯定没问题。我正在用串行监视器嗅探端口，所有命令都发送正常并且设备制作它们，只是它没有响应。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T11:21:33.807

可能有n个原因：

*   缓冲区可能已满
*   Com 端口不工作或可能是
*   最后设备出现故障..

看看这些东西可能会对你有所帮助。

# ruby-on-rails - 在 Mac OSX 10.8.3 上安装 Ruby 时出错 - 运行“make -j2”时出错

> ID：15859902
> 
> 赞同：3
> 
> 时间：2013-04-07T07:18:54.130
> 
> 标签：ruby-on-rails, ruby

我正在尝试在 Mac OS X 上安装 Ruby 2.0.0。我正在使用 Homebrew、RVM 并且我已经安装了 Xcode 4.6.1 以及命令行工具。当我运行“rvm install ruby​​-2.0.0-p0”时，我得到以下信息：

```
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-2.0.0-p0.
Continuing with compilation. Please read 'rvm mount' to get more information on binary                rubies.
Installing requirements for osx, might require sudo password.
Already up-to-date.
Certificates in '/usr/local/etc/openssl/cert.pem' already are up to date.
Installing Ruby from source to: /Users/jcanipar/.rvm/rubies/ruby-2.0.0-p0, this may take     a while depending on your cpu(s)...
ruby-2.0.0-p0 - #downloading ruby-2.0.0-p0, this may take a while depending on your     connection...
ruby-2.0.0-p0 - #extracted to /Users/jcanipar/.rvm/src/ruby-2.0.0-p0 (already extracted)
ruby-2.0.0-p0 - #configuring.....................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
ruby-2.0.0-p0 - #compiling......................................................................................
Error running 'make -j2',
please read /Users/jcanipar/.rvm/log/ruby-2.0.0-p0/make.log
There has been an error while running make. Halting the installation. 
```

make.log 文件具有以下内容：

```
[2013-04-07 00:08:20] make
CC = /usr/local/bin/gcc-4.2
LD = ld
LDSHARED = /usr/local/bin/gcc-4.2 -dynamiclib
CFLAGS = -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration   -fno-common -pipe 
XCFLAGS = -include ruby/config.h -include ruby/missing.h -D_FORTIFY_SOURCE=2 -fstack-protector -fno-strict-overflow -fvisibility=hidden -DRUBY_EXPORT
CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libxml2/include -I/usr/local/opt/libxslt/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -I/usr/local/opt/sqlite/include   -I. -I.ext/include/x86_64-darwin12.3.0 -I./include -I.
DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libxml2/lib -L/usr/local/opt/libxslt/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L/usr/local/opt/sqlite/lib  -install_name /Users/jcanipar/.rvm/rubies/ruby-2.0.0-p0/lib/libruby.2.0.0.dylib -current_version 2.0.0 -compatibility_version 2.0.0  -fstack-protector -Wl,-u,_objc_msgSend  -fstack-protector -Wl,-u,_objc_msgSend  
SOLIBS = 
compiling main.c
compiling dmydln.c
compiling dmyencoding.c
compiling version.c
compiling miniprelude.c
compiling array.c
compiling bignum.c
compiling class.c
compiling compar.c
compiling complex.c
compiling dir.c
compiling dln_find.c
compiling enum.c
compiling enumerator.c
compiling error.c
compiling eval.c
compiling load.c
compiling proc.c
compiling file.c
compiling gc.c
compiling hash.c
compiling inits.c
compiling io.c
compiling marshal.c
compiling math.c
compiling node.c
compiling numeric.c
compiling object.c
compiling pack.c
compiling parse.c
compiling process.c
compiling random.c
compiling range.c
compiling rational.c
compiling re.c
compiling regcomp.c
compiling regenc.c
compiling regerror.c
compiling regexec.c
compiling regparse.c
compiling regsyntax.c
compiling ruby.c
compiling safe.c
compiling signal.c
compiling sprintf.c
compiling st.c
compiling strftime.c
compiling string.c
compiling struct.c
compiling time.c
time.c: In function ‘localtimew’:
time.c:1503: warning: ‘tm.tm_isdst’ may be used uninitialized in this function
time.c:1503: note: ‘tm.tm_isdst’ was declared here
compiling transcode.c
compiling util.c
compiling variable.c
compiling compile.c
compiling debug.c
compiling iseq.c
compiling vm.c
compiling vm_dump.c
compiling vm_backtrace.c
compiling vm_trace.c
compiling thread.c
compiling cont.c
compiling ./enc/ascii.c
compiling ./enc/us_ascii.c
compiling ./enc/unicode.c
compiling ./enc/utf_8.c
compiling newline.c
compiling ./missing/setproctitle.c
compiling dln.c
compiling encoding.c
compiling dmyversion.c
linking miniruby
ld: can't map file, errno=22 for architecture x86_64
collect2: ld returned 1 exit status
make: *** [miniruby] Error 1 
```

我完全被难住了。我在这里阅读了很多东西，但没有任何帮助。任何帮助，将不胜感激。

# c++ - make_shared 如何使用非默认内存管理

> ID：15859909
> 
> 赞同：1
> 
> 时间：2013-04-07T07:20:03.907
> 
> 标签：c++, c++11, shared-ptr, make-shared

我有一个关于标准的问题..

所以假设我有管理我的内存分配的池..

我想使用 shared_ptr 并检查了 API ..

正如预期的那样，我看到对于 shared_ptr 我控制指针的分配，我可以给它一个释放函数，完美！

现在我看了STL的讲座，发现maked_shared的内存效率更高（因为它可以在同一个地方分配控制块和ptr）显然我直接去了maked_shared api，才发现make_shared在强迫我仅使用新/删除..所以问题是：

1.  我对么？只有新/删除？
2.  如果是这样，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T07:24:16.990

我相信您可以使用[`std::allocate_shared`](http://en.cppreference.com/w/cpp/memory/shared_ptr/allocate_shared)which 允许您使用自己的分配器。

# c++ - 如果从文件中创建大小大于 128*128 的地形，则会出现堆栈溢出错误

> ID：15859910
> 
> 赞同：0
> 
> 时间：2013-04-07T07:20:08.603
> 
> 标签：c++, directx

当我尝试加载大小大于 128*128 的 heighmap.raw 时，出现堆栈溢出错误

谁能帮我吗？

```
#include<Windows.h>
#include<WindowsX.h>
#include<d3d9.h>
#include<d3dx9.h>
#define CUSTOMFVF (D3DFVF_XYZ|D3DFVF_DIFFUSE)
#define CENTERX 400
#define CENTERY 300
#define RADIUS 100
#include<fstream> 
#define WIDTH  64
#define HEIGHT 64

float eyeX;
float eyeY;
float eyeZ;

#pragma comment(lib,"d3d9.lib")
#pragma comment(lib,"d3dx9.lib")

IDirect3D9 *pDirect3D = NULL;
IDirect3DDevice9 *pDevice = NULL;
IDirect3DVertexBuffer9 *pV_Buffer = NULL;
IDirect3DIndexBuffer9 *pV_Index = NULL;
D3DPRESENT_PARAMETERS pp = {0};
D3DVIEWPORT9 vp={0};
void InitDirectx(HWND hWnd);
bool render();
void Init_graphics(void);
void cleanD3D(void);

struct OURCUSTOMVERTEX
{
    float x,y,z;
     DWORD color;
};

D3DXMATRIX matView;
D3DXMATRIX matProjection;
D3DXMATRIX matWorld;

LRESULT CALLBACK WindowProc(HWND hWnd,UINT msg,WPARAM wParam,LPARAM lParam);

int WINAPI WinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR cmdline,int nCmdShow)
{
    WNDCLASSEX wcex = {0};

    wcex.cbSize = sizeof(WNDCLASSEX);
    wcex.style = CS_HREDRAW | CS_VREDRAW;
    wcex.hInstance = hInstance;
    wcex.lpszClassName = TEXT("DirectX Window");
    wcex.lpfnWndProc = WindowProc;

    ATOM result = RegisterClassEx (&wcex);

    if(result == 0)
    {
        MessageBox(NULL, TEXT("Register class failed"), TEXT("Error"), MB_OK);
    }
    HWND hWnd = NULL;

        hWnd = CreateWindowEx(0,wcex.lpszClassName,TEXT("DirectX Window"),WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,CW_USEDEFAULT,800, 600,NULL,NULL,hInstance,NULL);

    if(hWnd == NULL)
    {
        MessageBox(NULL,TEXT("Window Creation Failed"),TEXT("ERROR"),MB_OK);
    }
    ShowWindow(hWnd,nCmdShow);

    InitDirectx(hWnd);

    MSG msg = {0};

    while(true)
    {
        PeekMessage(&msg,NULL,0,0,PM_REMOVE);
        if(msg.message == WM_QUIT)
            break;
        DispatchMessage(&msg);
        render();
    }
}
LRESULT CALLBACK WindowProc(HWND hwnd,UINT message,WPARAM wparam,LPARAM lparam)
{
    switch(message)
    {
    case WM_KEYDOWN:
        switch(wparam)
        {
        case VK_UP:
            eyeZ = eyeZ - .05;
            break;
        case VK_DOWN:
            eyeZ = eyeZ  + .05;
            break;
        case VK_LEFT:
            eyeX = eyeX - .05;
            break;
        case VK_RIGHT:
            eyeX = eyeX + .05;
            break;
        }
        break;
    case WM_DESTROY:
        {
            PostQuitMessage(0);
            break;
        }
    default : 
        return DefWindowProc(hwnd,message,wparam,lparam);
    }
    return 0;
}

void InitDirectx(HWND hWnd)
{
    pDirect3D = Direct3DCreate9(D3D_SDK_VERSION);

    pp.BackBufferFormat=D3DFMT_A8R8G8B8;
    pp.BackBufferWidth = 800;
    pp.BackBufferHeight = 600;
    pp.hDeviceWindow=hWnd;
    pp.SwapEffect=D3DSWAPEFFECT_DISCARD;
    pp.Windowed =true;

    pDirect3D->CreateDevice(D3DADAPTER_DEFAULT,D3DDEVTYPE_HAL,hWnd,D3DCREATE_SOFTWARE_VERTEXPROCESSING,&pp,&pDevice);

    pDevice->SetRenderState(D3DRS_CULLMODE, D3DCULL_NONE);
    Init_graphics();
}
bool render()
{
    pDevice->Clear(0,NULL,D3DCLEAR_TARGET,D3DCOLOR_XRGB(0,0,0),0.0,NULL);

    pDevice->BeginScene();
    {

    /** create the view matrix **/
    D3DXMatrixLookAtLH(&matView, &D3DXVECTOR3(eyeX, eyeY, eyeZ), &D3DXVECTOR3(0, 0, 1), &D3DXVECTOR3(0, 1, 0));

    pDevice->SetFVF(CUSTOMFVF);

    pDevice->SetTransform(D3DTS_WORLD, &matWorld);
    pDevice->SetTransform(D3DTS_VIEW, &matView);
    pDevice->SetTransform(D3DTS_PROJECTION, &matProjection);

    pDevice->SetRenderState(D3DRS_LIGHTING, FALSE);
    pDevice->SetStreamSource(0,pV_Buffer,0,sizeof(OURCUSTOMVERTEX));
   // pDevice->DrawPrimitive(D3DPT_TRIANGLESTRIP, 2);
    pDevice->SetIndices(pV_Index);
    pDevice->DrawIndexedPrimitive(D3DPT_TRIANGLELIST,0, 0, WIDTH*HEIGHT, 0, (WIDTH-1)*(HEIGHT-1)*2);
    }
    pDevice->EndScene();

    pDevice->Present(NULL,NULL,0,NULL);

    return true;

}

void CleanD3D(void)
{
    pV_Buffer->Release();

    pDevice->Release();

    pDirect3D->Release();
}

void Init_graphics(void)
{
    OURCUSTOMVERTEX Vertices[WIDTH*HEIGHT];
     float flt_HeightData[WIDTH][HEIGHT];

     flt_HeightData[0][0]=0;
     flt_HeightData[1][0]=0;
     flt_HeightData[2][0]=0;
     flt_HeightData[3][0]=0;

     flt_HeightData[0][1]=1;
     flt_HeightData[1][1]=0;
     flt_HeightData[2][1]=2;
     flt_HeightData[3][1]=2;

     flt_HeightData[0][2]=2;
     flt_HeightData[1][2]=2;
     flt_HeightData[2][2]=4;
     flt_HeightData[3][2]=2;
  std::ifstream f_DataFile;

     f_DataFile.open("heightdata.raw", std::ios::binary);

     if (f_DataFile.is_open())
     {

    for (int x=0;x< WIDTH;x++)    {

        for (int y=0; y< HEIGHT;y++)        {
            Vertices[y*WIDTH + x].x = -x;
            Vertices[y*WIDTH + x].y = y;
            Vertices[y*WIDTH + x].z =  f_DataFile.get()/50;
            Vertices[y*WIDTH + x].color = 0xffffffff;
        }
    }

     }
     f_DataFile.close();
        pDevice->CreateVertexBuffer(WIDTH*HEIGHT*sizeof(OURCUSTOMVERTEX), 
        0,
    CUSTOMFVF,
    D3DPOOL_DEFAULT,
    &pV_Buffer,
    NULL);

    VOID *pVoid = NULL;

    pV_Buffer->Lock(0, (WIDTH-1)*(HEIGHT-1)*6*sizeof(OURCUSTOMVERTEX),(void**)&pVoid,0);
    memcpy(pVoid,Vertices,WIDTH*HEIGHT*sizeof(OURCUSTOMVERTEX));
    pV_Buffer->Unlock();

     short s_Indices[(WIDTH-1)*(HEIGHT-1)*6];

    for (int x=0;x< WIDTH-1;x++)    {

        for (int y=0; y< HEIGHT-1;y++)        {
            s_Indices[(x+y*(WIDTH-1))*6+2] = x+y*WIDTH;
            s_Indices[(x+y*(WIDTH-1))*6+1] = (x+1)+y*WIDTH;
            s_Indices[(x+y*(WIDTH-1))*6] = (x+1)+(y+1)*WIDTH;

            s_Indices[(x+y*(WIDTH-1))*6+3] = (x+1)+(y+1)*WIDTH;
            s_Indices[(x+y*(WIDTH-1))*6+4] = x+y*WIDTH;
            s_Indices[(x+y*(WIDTH-1))*6+5] = x+(y+1)*WIDTH;

        }
    }
    pDevice->CreateIndexBuffer((WIDTH-1)*(HEIGHT-1)*6*sizeof(short),    
          0,
        D3DFMT_INDEX16,
        D3DPOOL_MANAGED,
        &pV_Index,
        NULL);

        VOID *pVoid2= NULL;

    pV_Index->Lock(0, (WIDTH-1)*(HEIGHT-1)*6*sizeof(short),(void**)&pVoid2,0);
    memcpy(pVoid2, s_Indices,(WIDTH-1)*(HEIGHT-1)*6*sizeof(short));
    pV_Index->Unlock();

     pDevice->SetRenderState(D3DRS_CULLMODE, D3DCULL_NONE);
     pDevice->SetRenderState(D3DRS_LIGHTING,false);
     pDevice->SetRenderState(D3DRS_FILLMODE,D3DFILL_WIREFRAME);

    /** Reset the world matrix to identity **/
    D3DXMatrixIdentity(&matWorld);

    /** create the projection matrix **/
    D3DXMatrixPerspectiveFovLH(&matProjection, 60, 1.6666F, 1, 1000);

    vp.X= 0;
    vp.Y = 0;
    vp.Width = WIDTH;
    vp.Height = HEIGHT;

    //pDevice->SetViewport(&vp);

    eyeX = 0;
    eyeY = 0;
    eyeZ = +5;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T07:22:19.833

增加堆栈的大小，或者最好在堆上分配数组。在 C++ 中执行此操作的最简单方法是使用`std::vector`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T07:23:15.167

这些

```
OURCUSTOMVERTEX Vertices[WIDTH*HEIGHT];
float flt_HeightData[WIDTH][HEIGHT]; 
```

太大而不能放在堆栈上。您可以使用`new`动态分配它们。

```
OURCUSTOMVERTEX* Vertices = new OURCUSTOMVERTEX[WIDTH*HEIGHT];
float* flt_HeightData = new float[WIDTH*HEIGHT]; 
```

这意味着您需要了解动态堆分配。特别是你会遇到二维`flt_HeightData`数组的问题。

更好，更简单的方法是使用`std::vector`

```
std::vector<OURCUSTOMVERTEX> Vertices(WIDTH*HEIGHT);
std::vector<float> flt_HeightData(WIDTH*HEIGHT); 
```

但又会`flt_HeightData`引起问题。

我想你有一些阅读要做，有很多东西要学。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T07:23:46.163

我想这是罪魁祸首：

```
OURCUSTOMVERTEX Vertices[WIDTH*HEIGHT]; 
```

在堆上分配它，例如：

```
OURCUSTOMVERTEX* Vertices = new OURCUSTOMVERTEX[WIDTH*HEIGHT]; 
```

# ruby-on-rails - 如何获取使用 ruby on rails 在博客中创建文章的用户

> ID：15859919
> 
> 赞同：1
> 
> 时间：2013-04-07T07:21:01.113
> 
> 标签：ruby-on-rails, ruby, blogs

我正在用 ruby​​ on rails 写自己的博客。我在获取在视图上创建文章的用户时遇到了困难。基本上我想获取在我的博客应用程序中创建文章（帖子）的用户的用户名。我有用户，文章表，我在文章表中有 user_id。我不知道如何获取在应用程序中创建文章的用户。基本上我想在 article/index.html 页面上显示创建文章的用户的名称（用户名）。我试图在文章控制器中创建文章时获取用户名

```
def create
      @article = Article.new(params[:article])
      @article.user_id = current_user
      @article.save
      redirect_to article_path(@article) 
```

但无法得到。

目前 users_controller.rb 是空的。

我是否需要在用户和文章表之间加入，或者是否可以不加入导轨。请给我建议。

文章/index.html。

```
<div class="">
  <title> <h2> learning experience blog </h2></title>
</div>

<div style="margin: 0 0 20px; padding: 20px 20px 10px; background: none repeat scroll 0 0 #82b548 ;">

<% @articles.each do |article| %>
  <div style=" border-bottom: none:border: 1px solid #666666;border-radius: 1px 1px 1px 1px;margin: 0 0 20px; padding: 20px 20px 10px;height:280px; background: none repeat scroll 0 0 #FFFFFF ">
    <div style="color:#51702E"><h2><%= article.title %></h2></div>
    <div style="color:#666666; margin-top:10px"> <%= article.created_at %></div> 

    <hr style="border: 1px solid #FA9300;">
    <div style="margin-top:10px; color:"> <%= truncate(article.body, :length => 500, :separator => ' ') %></div>  
    <div style="margin-top:35px">
    <% if current_user.try(:is_admin) %>
     <%= link_to "edit",edit_article_path(article), :class => 'btn btn-warning btn' %>
     <%= link_to "delete",article_path(article),:method => :delete,:confirm => 'Are you sure?',:class => 'btn  btn-danger' %>
    <% end %>
     <%= link_to "view more...",article_path(article), :class => 'btn btn-primary' %> 
   </div>
     </div>
    <% end %>
 <% if current_user.try(:is_admin) %>
  <%= link_to "Create new Article", new_article_path, :class => 'btn btn-large btn-primary' %>
  <% end %> 
```

文章控制器.rb

```
class ArticlesController < ApplicationController
    def index
        @articles = Article.all
    end

    def show
      @article = Article.find(params[:id])
    end

    def new
      @article = Article.new
    end

    def create
      @article = Article.new(params[:article])
      @article.user_id = current_user.id
      @article.save
      redirect_to article_path(@article)
    end

    def destroy
      @article = Article.find(params[:id])
      @article.destroy
      redirect_to action:  'index'  
    end

    def edit
      @article = Article.find(params[:id])
    end

    def update
      @article = Article.find(params[:id])
      @article.update_attributes(params[:article])
      flash.notice = "Article '#{@article.title}' Updated!"
      redirect_to article_path(@article)
     end
end 
```

user.rb 模型

```
class User < ActiveRecord::Base
    has_many :articles
    has_many :comments
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :username, :email, :password, :password_confirmation, :remember_me
   attr_accessible :title, :body
end 
```

文章_rb

```
class Article < ActiveRecord::Base
   attr_accessible :title, :body
   has_many :comments
   belongs_to :user
end 
```

架构.rb

```
# encoding: UTF-8
# This file is auto-generated from the current state of the database. Instead
# of editing this file, please use the migrations feature of Active Record to
# incrementally modify your database, and then regenerate this schema definition.
#
# Note that this schema.rb definition is the authoritative source for your
# database schema. If you need to create the application database on another
# system, you should be using db:schema:load, not running all the migrations
# from scratch. The latter is a flawed and unsustainable approach (the more migrations
# you'll amass, the slower it'll run and the greater likelihood for issues).
#
# It's strongly recommended to check this file into your version control system.

ActiveRecord::Schema.define(:version => 20130406120152) do

  create_table "articles", :force => true do |t|
    t.string   "title"
    t.text     "body"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
    t.integer  "user_id"
  end

  create_table "comments", :force => true do |t|
    t.text     "content"
    t.integer  "user_id"
    t.string   "article_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.boolean  "is_admin"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
    t.string   "name"
    t.string   "username"
    t.boolean  "is_active"
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true
  add_index "users", ["reset_password_token"], :name => "index_users_on_reset_password_token", :unique => true

end 
```

请建议我如何获取创建文章的用户信息。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T07:46:26.827

我相信你的模型中定义了关系。

```
class User
   has_many :articles
end

class Article
  belongs_to :user
end 
```

现在你可以简单地做

```
a = Article.find_by_id(1)
a.user # to get the user for Article 
```

# javascript - Node和Document方法选择依据？

> ID：15859920
> 
> 赞同：1
> 
> 时间：2013-04-07T07:21:02.163
> 
> 标签：javascript, dom

`createElement`像, `createTextNode`,这样的节点创建方法`createComment`是在接口上定义的，而像,那样的`Document`节点插入/删除方法是在接口上定义的。`appendChild``removeChild``Node`

document 只是 Node 的一种。

有人知道这背后的历史或优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T18:26:12.050

DOM-Level-1：

> 接口节点
> 
> 所有者文件：
> 
> 与此节点关联的 Document 对象。这也是用于创建新节点的 Document 对象。当这个节点是一个文档时，它是空的。

因此，在 Document 中使用这些创建方法的主要优点是在新节点中自动处理此引用（顺便说一下，此引用被指定为只读）。

# php - 从 sql 数据库下载 php 中的 .csv 文件时出错

> ID：15859926
> 
> 赞同：-1
> 
> 时间：2013-04-07T07:22:09.433
> 
> 标签：php, sql, phpmyadmin

我正在尝试从 phpmyadmin 数据库下载“.csv”，但它正在下载一些空白文件。相同的查询非常适用于 phpmyadmin 中的 sql。下面是代码：

```
function get_csv()
{ 
 $filename="c:/mydata.csv";
 $var=mysql_query("SELECT * INTO OUTFILE $filename FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY \"\n\" FROM course");
 header("Content-type:  text/plain");
 header("Content-Disposition: attachment; filename=$filename.xls");
 header("Content-Transfer-Encoding: binary");
 header("Pragma: no-cache");
 header("Expires: 0");
 //print "$header\n$data";
 return 0;
} 
```

在取消注释打印语句时，我得到一个显示一些错误的文件：

```
<br />
<b>Notice</b>:  Undefined variable: header in <b>C:\xampp\htdocs\SEN_PROJECT_Latest\SEN-PROJECT\class\database.php</b> on line <b>485</b><br />
<br />
<b>Notice</b>:  Undefined variable: data in <b>C:\xampp\htdocs\SEN_PROJECT_Latest\SEN-PROJECT\class\database.php</b> on line <b>485</b><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:32:07.310

我猜您尝试下载 CSV 文件，无需依赖此函数之外的其他变量，只需使用 readfile() 您应该会看到正在下载的文件。

```
function get_csv()
{ 
  $filename="c:\\mydata.csv";
  $var=mysql_query("SELECT * INTO OUTFILE $filename FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY \"\n\" FROM course") or die(mysql_error());
  header("Content-type:  text/plain");
  header("Content-Disposition: attachment; filename=$filename.xls");
  header("Content-Transfer-Encoding: binary");
  header("Pragma: no-cache");
  header("Expires: 0");
  ob_clean();
  flush();
  readfile($filename);
  return 0;
} 
```

如果该代码未下载文件，您可以检查 c:/mydata.csv 并查看它是否已创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:00:37.987

中的文件名`INTO OUTFILE`需要是字符串文字：

```
"SELECT * INTO OUTFILE '$filename' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY \"\n\" FROM course" 
```

# facebook - 如何使用 Graph API 或 FQL 获取最近的活动？

> ID：15859930
> 
> 赞同：3
> 
> 时间：2013-04-07T07:23:03.510
> 
> 标签：facebook, facebook-graph-api, facebook-fql

有没有办法使用 Graph API 或 FQL 获取最近的活动？我说的是在这个位置可用的信息：http: [//www.facebook.com/vanityname/allactivity?filter_onlyme=on](http://www.facebook.com/vanityname/allactivity?filter_onlyme=on)

我在 FB API 文档中找不到任何内容（不足为奇）。从网站上抓取它看起来也很复杂，因为它是通过调用[http://www.facebook.com/ajax/pagelet/generic.php/TimelineProfileAllActivityPagelet](http://www.facebook.com/ajax/pagelet/generic.php/TimelineProfileAllActivityPagelet)来获取的，它返回的内容很难解析。

如果你们想知道我尝试过的 FQL 是`select post_id,actor_id,created_time,message,description,xid from stream where source_id = me()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T11:52:55.203

无法在 API 中获取此信息。此外，在[https://developers.facebook.com上也没有为此列出任何文档](https://developers.facebook.com)

# python - 当 405 引发时响应重定向到不同的页面

> ID：15859935
> 
> 赞同：1
> 
> 时间：2013-04-07T07:23:28.803
> 
> 标签：python, django

我有一个视图函数，我只想使用请求方法是 POST。我在这里了解了[require_POST](https://docs.djangoproject.com/en/dev/topics/http/decorators/#django.views.decorators.http.require_POST)装饰器，但我想要的是，如果方法不是 POST，则使用`HttpResponseRedirect`. 我怎样才能做到这一点 ？

```
from django.views.decorators.http import require_POST

@require_POST
def my_view(request):
    # I can assume now that only POST requests make it this far
    # ... 
```

我知道我可以通过添加两行代码来做到这一点，而无需在我的方法本身中使用 require_POST 重定向，例如

```
if request.method != 'POST':
    return HttpResponseRedirect(view_url) 
```

但我对使用装饰器本身更感兴趣，当这个装饰器引发 405 时，然后重定向到另一个视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:04:08.607

您将不得不使用自定义装饰器。您可以在[此处查看 Django 装饰器](https://github.com/django/django/blob/master/django/views/decorators/http.py)的代码。在到达您的代码之前，它已经返回了响应，因此无论如何您在视图函数中所做的任何事情都不会运行。

如果请求不是 POST，手动返回重定向没有任何问题。如果您在代码中的几个不同位置使用此模式，我稍后会将其重构为装饰器。但是，如果这是您第一次使用它的地方，那就太矫枉过正了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T09:08:39.813

自定义装饰器是要走的路。

我自己使用一个与您需要的类似的，我会发布代码。

支持@aychedee 的回答，因为他是第一个。:)

```
def require_post_decorator(function=None, redirect_url='/'):
    def _decorator(view_function):
        def _view(request, *args, **kwargs):
            if request.method == 'POST':
                #do some before the view is reached stuffs here.
                return view_function(request, *args, **kwargs)
            else:
                return HttpResponseRedirect(redirect_url)

        _view.__name__ = view_function.__name__
        _view.__dict__ = view_function.__dict__
        _view.__doc__ = view_function.__doc__

        return _view

    if function:
        return _decorator(function)
    return _decorator 
```

# jquery - 通过 AJAX (jQuery / Node.js) 提交包含文件字段的表单

> ID：15859945
> 
> 赞同：3
> 
> 时间：2013-04-07T07:24:06.130
> 
> 标签：jquery, ajax, forms, file-upload

我有一个带有单个文件字段的表单：

```
<form id="myForm" action="/processFile" method="post" enctype="multipart/form-data">
  <input type="file" name="uploadFile">
</form> 
```

我想通过 AJAX 提交表单（在客户端使用 jQuery，在服务器端使用 Node.JS）。

这是我在 jQuery 客户端首先尝试的方法（在查看了类似这样的问题后，[通过 jQuery 中的 AJAX 提交表单](https://stackoverflow.com/questions/9557761/submit-form-via-ajax-in-jquery)）：

```
submitButton.on('click', function(ev) {
  $.ajax({
    type: "GET",
    url: $('#myForm').action
    data: { form: $('#myForm').seralize() }
  }).done(function(res) {
    $('#targetDiv').html(res);
  });
}); 
```

遗憾的是，这不起作用，因为 .seralize() 方法不适用于文件输入。

所以我决定实际发布表单是最好的方法，因为它处理了将文件上传到服务器的异步混乱。所以我尝试了这个：

```
submitButton.on('click', function(ev) {
  $('#myForm').submit(function(err) {
    $.ajax({
      type: "GET",
      url: $('#myForm').action
      data: { form: $('#myForm').seralize() }
    }).done(function(res) {
      $('#targetDiv').html(res);
    });
  });
}); 
```

也就是说，（1）实际提交表单，然后（2）在表单提交的回调中进行我的ajax调用。

遗憾的是，这也不起作用，因为提交表单需要根据“/processFile”的响应重新加载整个页面。

我想要的是（1）**通过 AJAX**尽可能简单地**提交文件输入**，以及（2）使用 URL 的响应来注入一些部分 HTML。似乎您可以使用一些 iFrame 技巧（例如[http://www.jainaewen.com/files/javascript/jquery/iframe-post-form.html](http://www.jainaewen.com/files/javascript/jquery/iframe-post-form.html)）解决这个问题，但有没有更清洁的方法我不是看到？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:37:32.533

如果您使用的浏览器支持 HTML5，您可以使用[`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)允许您实现该目标的新对象。您的代码可能如下所示：

```
submitButton.on('click', function(ev) {
    var form = $('form')[0];
    var fd = new FormData(form);
    var xhr = new XMLHttpRequest();
    xhr.open(form.method, form.action, true);
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
            // handle success case
        }
    };
    xhr.send(fd);
    return false;
}); 
```

如果您的客户端浏览器还不支持 HTML5 或者您无法控制它们，您可以使用文件上传插件，例如[`Uploadify`](http://www.uploadify.com/), [`jQuery.form`](http://www.malsup.com/jquery/form/), [`FineUploader`](http://fineuploader.com/), ... 这将测试浏览器的功能并使用最合适的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:50:08.893

我最终只是通过这里的插件使用了 iframe 技巧： [http ://www.jainaewen.com/files/javascript/jquery/iframe-post-form.html](http://www.jainaewen.com/files/javascript/jquery/iframe-post-form.html)

这是我的代码的样子：

表格：

```
<form id="myForm" action="/processFile" method="post" enctype="multipart/form-data">
  <input type="file" name="uploadFile">
  <input type="submit" id="mySubmitButton" style="display: none;">
</form>
...
<button id="continueButton">Continue</button> 
```

请注意，出于无趣的原因，我想要一个必须驻留在表单之外的按钮才能进行提交。

JS：

```
$('#continueButton').on('click', function(ev) {
  // I click the hidden submit inside the form
  $('#mySubmitButton').click();
});

$('#myForm').iframePostForm ({
  json : false  // my server response is straight HTML
  , post : function() {
    // initiation of waiting sequence
    return true; // returning false aborts the submit
  }
  , complete : function(res) {
    $('#targetDiv').html(res); // I stick the response in the target div
  }
}); 
```

让我绊倒的一件事是这个插件的实现方式，只是调用

```
$('#myForm').submit(); 
```

在 continueButton 的 onclick 内部不起作用。直接触发 form.submit() 必须以某种不好的方式规避 jQuery 的事件处理。所以我的解决方法（如您所见）是在表单中放置一个不可见的表单提交按钮，然后让我的外部按钮单击它。这似乎与 jQuery 和插件配合得很好。

希望这对某人有帮助！我没有发现插件网站上的文档像我希望的那样友好。**

# jquery - 我的 jquery 不起作用

> ID：15859948
> 
> 赞同：-3
> 
> 时间：2013-04-07T07:25:05.220
> 
> 标签：jquery

我讨厌问这样一个愚蠢的问题，但我似乎无法让 jquery 运行。我把这一切都在小提琴中工作：http: [//jsfiddle.net/3FTRE/1/](http://jsfiddle.net/3FTRE/1/) 但是当我把它带到我的网站时它没有工作。这是代码，因此您可以看到它是相同的。

```
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 

<script>
$(document).ready(function(){
    $('#info').keyup(function(){
        $('.info').html($(this).val());
    });

    $('#company').keyup(function(){
        $('.company').html($(this).val());
    });

    $('#info').keyup(function () {
        var left = 170 - $(this).val().length;
        if (left < 0) {
            left = 0;
        }
        $('#counter').text('Characters left: ' + left);
    });
});
</script>
</head> 
```

我一直在使用 fire bug 来尝试诊断问题，它所说的只是“$ 未定义”。

我从字面上将所有内容复制并粘贴到我的程序中，但它不起作用。很想帮助找出问题所在。谢谢您的帮助！

添加了推荐的 NET 图像

![在此处输入图像描述](https://i.stack.imgur.com/tAzyP.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:27:06.523

$ not defined normaly 表示 JQuery 没有正确加载。在 firebug 下选择 net 选项卡。它是否将 JQuery 库显示为正确加载？另外，为什么要加载两次？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:27:17.203

请在下面使用 jquery 库参考。

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
```

如果您使用的是 IE 调试器，请转到脚本选项卡并验证您的所有 js 是否已正确加载。还要确保这个库引用位于所有 js 引用的顶部。

![在此处输入图像描述](https://i.stack.imgur.com/Shis2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T07:27:26.823

e您的问题是您正在双重加载 jQuery：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

删除其中一行，然后它应该可以工作

# graph-theory - 前序遍历是否可能与后序遍历的顺序相同？

> ID：15859952
> 
> 赞同：1
> 
> 时间：2013-04-07T07:25:39.067
> 
> 标签：graph-theory, tree-traversal, preorder, postorder

如果 T 是具有多个节点的有序树。T 的前序遍历是否可能与 T 的后序遍历以相同的顺序访问节点？如果“是”，请您举个例子。如果“否”，您能否解释为什么它不会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:43:00.717

除非我遗漏了一些非常明显的东西，否则答案是否定的。具有 > 1 个节点（例如，2 个节点）的有序树将如下所示。

> ```
>  A    
>  B 
> ```

或者

> ```
>  A
>         C 
> ```

后序遍历按照左-右-根的顺序访问节点，前序遍历按照根-左-右的顺序访问节点。为了让它们产生相同的输出，“left”必须等于“root”，这没有任何意义。在上面的例子中，pre-order 将分别产生 AB 或 AC，post-order 将产生 BA 和 CA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T07:51:04.583

在一般情况下，树的叶子是唯一的，因此，如果您正在执行前序或后序遍历，则应该以相反的方式出现。

但是，我可以看到前序遍历和后序遍历相同的两种情况：单例元素和重复元素。

对于单例，您只有一个节点，因此无论您在寻找零叶之前还是之后访问它都没有关系。

如果你有一棵树，里面有重复的元素怎么办？如果插入策略是接受任何大于或等于根节点的元素，那么它们将显示为右侧的退化树：

```
 A
  \
   A
    \
     A
      \
       A 
```

如果它小于或等于根节点，您仍然会有一棵退化树，但在左侧。

现在，如果您的插入策略是丢弃重复元素，那么您将剩下单例情况，它仍然具有导致相同元素的前序和后序遍历。

# asp.net - Jstree 重命名问题。内联编辑器在根节点上方打开

> ID：15859954
> 
> 赞同：1
> 
> 时间：2013-04-07T07:26:02.850
> 
> 标签：asp.net, jquery, jstree

伙计们，我对重命名和 JsTree 有疑问。我创建了一个 JS Fiddle 来突出这个问题。[http://jsfiddle.net/KJYrs/](http://jsfiddle.net/KJYrs/)。我的情况是我想验证输入的名称不是默认名称或包含特殊字符。当我在初始尝试失败后尝试触发重命名事件时，内联编辑器出现在根节点上方。

```
<script type="text/javascript" class="source">
$(function () {
    $("#demo1").jstree({
        "plugins": ["themes", "html_data", "ui", "crrm", "contextmenu"]
    }).bind("rename.jstree", function (event, data) {
        //let's assume I do some vaidation here and it fails
        //so I want to rename until valid
        if (event.type === 'rename') {
            $("#demo1").jstree("deselect_all");
            $("#demo1").jstree("select_node", "#" + data.rslt.obj[0].id);
            $("#demo1").jstree("rename");
        }
    });
});
</script>

<div id="demo1" class="demo">
    <ul>
        <li id="phtml_1">   <a href="#">Root node 1</a>

            <ul>
                <li id="phtml_2">   <a href="#">Child node 1</a>

                </li>
                <li id="phtml_3">   <a href="#">Child node 2</a>

                </li>
            </ul>
        </li>
        <li id="phtml_4">   <a href="#">Root node 2</a>

        </li>
    </ul>
</div> 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:43:26.680

出现此问题是因为您在重命名内部调用重命名 - 不会崩溃，但会产生其他问题。一个简单的解决方案是在重命名结束后调用，使用`setTimeout`as：

```
$(function () {
    $("#demo1").jstree({
        "plugins": ["themes", "html_data", "ui", "crrm", "contextmenu"]
    }).bind("rename.jstree", function (event, data) {
        //let's assume I do some vaidation here and it fails
        //so I want to rename until valid
        if (event.type === 'rename') 
        {
            setTimeout(function(){
               $("#demo1").jstree("deselect_all");
               $("#demo1").jstree("select_node", "#" + data.rslt.obj[0].id);
               $("#demo1").jstree("rename");
            },100);
        }
    });
}); 
```

结果：http: [//jsfiddle.net/KJYrs/1/](http://jsfiddle.net/KJYrs/1/)

现在您还有其他问题需要解决，取消重命名，并禁用菜单直到结束。

# flash - 使用 addChild() 时，MovieClip 没有播放动画

> ID：15859955
> 
> 赞同：0
> 
> 时间：2013-04-07T07:26:14.920
> 
> 标签：flash, animation, actionscript, movieclip, addchild

我正在尝试制作一个简单的 Flash 游戏。

我一直在寻找这个问题，但我找不到任何对我有帮助的问题/答案，所以这里是：

我正在尝试用来`addChild()`生成口袋妖怪 Movieclips

```
 var comPkm:MovieClip = new bulbasaur;
    comPkm.x = 620;
    comPkm.y = 270;
    comPkm.height = 80;
    comPkm.width = 77;
    addChild(comPkm);
    comPkm.gotoAndPlay("idle"); 
```

问题是：口袋妖怪的“空闲”姿势根本不玩。
但是，如果我将口袋妖怪直接放到时间线上，它会起作用。知道什么是错的，解决方案是什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:08:10.220

不幸的是，设置 MovieClip 的某些属性会导致该剪辑不播放动画。设置 x、y、高度或宽度会中断时间线动画。没有任何消息的无声失败让我困惑了好几次。一种解决方法是创建父占位符并让 ActionScript 修改父或子。例子：

```
comPkm.parent.x = 620;
comPkm.parent.y = 270;
comPkm.parent.height = 80;
comPkm.parent.width = 77; 
```

相关： [使用“scaleX”缩放舞台上的 MovieClip 会破坏时间线动画……真的吗？](https://stackoverflow.com/questions/1669763/scaling-onstage-movieclip-w-scalex-breaks-timeline-animation-really)

> 如果修改包含补间动画的 MovieClip 对象的以下任何属性，则播放头会在该 MovieClip 对象中停止：alpha、blendMode、filters、height、opaqueBackground、rotation、scaleX、scaleY、scale9Grid、scrollRect、transform、visible 、宽度、x 或 y。但是，它不会停止该 MovieClip 对象的任何子 MovieClip 对象中的播放头。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html)

以我的经验，播放头永久损坏，忽略未来对 gotoAndPlay 的调用。

# maven - Maven 3.0 工件存储库 API 弃用

> ID：15859956
> 
> 赞同：4
> 
> 时间：2013-04-07T07:26:23.420
> 
> 标签：maven, maven-3, maven-plugin

我正在尝试使用 ArtifactInstaller 和 ArtifactDeployer 编写一个 Maven 插件。对我来说最有意义的方法已被以下消息弃用：

“我们只想使用 artifact 方法，并确保 artifact.file 设置正确。”

我不知道那个是什么意思。这些类没有“工件方法”。如何安装以及如何使用 Maven 3.0.5 API 部署工件？

[编辑] 再看一遍，我真正需要的是能够创建一个工件来传递给非弃用的方法。`ArtifactFactory`现在不推荐使用所有方法。

[http://maven.apache.org/ref/3.0.5/apidocs/org/apache/maven/artifact/factory/ArtifactFactory.html](http://maven.apache.org/ref/3.0.5/apidocs/org/apache/maven/artifact/factory/ArtifactFactory.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:54:34.183

现在是早晨，我看得更清楚了；我正在回答我自己的问题。诀窍是用 RepositorySystem [2] 替换 RepositoryFactory [1]。对于完整的描述，我试图遵循以下文章的指导。

[http://docs.codehaus.org/display/MAVENUSER/Mojo+Developer+Cookbook#MojoDeveloperCookbook-Foraccessingartifactsandrepositories](http://docs.codehaus.org/display/MAVENUSER/Mojo+Developer+Cookbook#MojoDeveloperCookbook-Foraccessingartifactsandrepositories)

当我查看文档时，ArtifactFactory 中的所有内容都已弃用，似乎没有获得 Artifact 的好方法。我需要做的第一件事是用 RepositorySystem 替换这个类。我还必须更改我的 pom.xml 以包含

```
<dependency>
    <groupId>org.apache.maven</groupId>
    <artifactId>maven-compat</artifactId>
    <version>3.0.5</version>
</dependency> 
```

[1] [http://maven.apache.org/ref/3.0.5/apidocs/org/apache/maven/artifact/factory/ArtifactFactory.html](http://maven.apache.org/ref/3.0.5/apidocs/org/apache/maven/artifact/factory/ArtifactFactory.html)

[2] [http://maven.apache.org/ref/3.0.5/maven-compat/apidocs/org/apache/maven/artifact/deployer/ArtifactDeployer.html](http://maven.apache.org/ref/3.0.5/maven-compat/apidocs/org/apache/maven/artifact/deployer/ArtifactDeployer.html)

# python - 外汇数据 - 分析日内数据

> ID：15859961
> 
> 赞同：3
> 
> 时间：2013-04-07T07:26:55.713
> 
> 标签：python, pandas

我最近刚刚发现了 pandas 和 python。我已经阅读了 Wes 的书，此外，我还反复浏览了 SO 的 pandas 标记问题，以收集这个问题的答案。所以我尝试过......不幸的是，我微薄的编程智慧正在闪耀;）

这是我正在尝试做的事情：

我有盘中外汇数据（每小时），我正在尝试对其进行一些非常简单的分析。我正在寻找测试价格测试每日开盘价并拒绝或通过它的频率。

这对我来说似乎很简单......我只是迷失了将所有组件组合在一起以获得最终的完整解决方案。

在伪代码中，这是我想要实现的目标：

*   通过 read_csv 读取数据
*   计算每个每日开放水平（使用 at_time？）
*   对于所有每小时蜡烛
    *   测试蜡烛低点是否低于每日开盘价
    *   测试蜡烛的收盘价是否高于每日开盘价

如果有人能指出我正确的方向，我将不胜感激。我已经到了要放弃这个的地步了。我觉得答案应该很简单，但我现在迷路了

这是我一直在使用的数据：

```
data = pd.read_csv('data/GBPUSD60.csv', 
                names=['Date','Time','Open','High','Low','Close','Volume'],
                parse_dates={'Timestamp': ['Date', 'Time']},
                index_col=['Timestamp'])

                # Get rid of the volume
                del data['Volume'] 
```

结果DF：

```
 Open    High    Low     Close   
Timestamp                   
2012-11-14 04:00:00  1.58766 1.58890 1.58749 1.58877      
2012-11-14 05:00:00  1.58874 1.58887 1.58819 1.58849      
2012-11-14 06:00:00  1.58849 1.58921 1.58831 1.58890      
2012-11-14 07:00:00  1.58890 1.58895 1.58811 1.58876      
2012-11-14 08:00:00  1.58874 1.58934 1.58841 1.58849 
```

我假设我需要采取以下两种方式之一：

*   或者按天对数据进行分组并遍历行以测试​​日内蜡烛。
*   其次，我可以使用 df.apply 函数并生成一个函数来测试蜡烛

这两种方法的问题在于，我在尝试访问我需要的字段时遇到了各种各样的麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:54:00.007

你的伪代码是正确的。这是语义

第 1 步：制作日期列

```
df['date'] = [i.date() for i in df.index] 
```

第 2 步：获取每日开盘价（假设开盘价是当天第一根蜡烛的开盘价）

```
df['dailyOpen'] = df.groupby('date').open.transform(lambda s: s[0]) 
```

第 3 步：比较

```
df['flag'] = (df.low < df.dailyOpen) & (df.close > df.dailyOpen) 
```

如果您想要一天中发生上述情况的次数，这应该可以

```
res = df.groupby('date').flag.sum() 
```

# php - Mysql LIKE子句和字段中的单独单词

> ID：15859966
> 
> 赞同：4
> 
> 时间：2013-04-07T07:27:16.730
> 
> 标签：php, mysql, sql

我目前使用如下所示的 mysql 语句来搜索帖子标题。

`select * from table where title like %search_term%`

但问题是，如果标题是：`Acme launches 5 pound burger`并且用户搜索了`Acme`，它将返回一个结果。但如果用户搜索`Acme burger`or `Acme 5 pound`，它不会返回任何内容。

当用户搜索多个单词时，有没有办法让它返回结果？在这里使用正确`LIKE`的东西还是可以使用其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T07:40:27.813

要针对文本集合搜索字符串，请使用 MATCH() 和 AGAINST()

```
SELECT * FROM table WHERE MATCH(title) AGAINST('+Acme burger*') 
```

或者为什么不 RLIKE

```
SELECT * FROM table WHERE TITLE RLIKE 'Acme|burger' 
```

或 LIKE 搜索数组，以编译 $keys

```
$keys=array('Acme','burger','pound');
$mysql = array('0');
foreach($keys as $key){
    $mysql[] = 'title LIKE %'.$key.'%'
}
SELECT * FROM table WHERE '.implode(" OR ", $mysql) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T08:30:40.517

您可以使用 REGEXP 匹配搜索字符串中的任何单词：

```
select *
from tbl
where
  title REGEXP CONCAT('[[:<:]](', REPLACE('Acme burger', ' ', '|'), ')[[:>:]]') 
```

请注意，这不会非常有效。[在这里](http://sqlfiddle.com/#!2/78757/1)看小提琴。

如果您需要匹配字符串中的每个单词，可以使用如下查询：

```
select *
from tbl
where
  title REGEXP CONCAT('[[:<:]]', REPLACE('Acme burger', ' ', '[[:>:]].*[[:<:]]'), '[[:>:]]') 
```

[在这里](http://sqlfiddle.com/#!2/b0dfa/1)拉小提琴。但是单词必须按正确的顺序排列（例如，'Acme burger' 会匹配，'burger Acme' 不会）。有一个 REGEXP 可以按任何顺序匹配每个单词，但 MySql 不支持它，除非您安装了支持 Perl regexp 的 UDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T07:31:36.327

您需要做的是构造一个 SQL，例如：

```
select * from table where title like "%Acme%" and title like "%burger%" 
```

简而言之：拆分字符串并`like`为每个部分创建一个。它也可以用 替换空格`%`，但我不确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T07:38:17.187

最好的事情是通过基于空格拆分搜索字符串来执行联合操作，

对于 Acme 5 磅，

```
SELECT * FROM TABLE WHERE TITLE LIKE '%ACME 5 POUND%'
UNION
SELECT * FROM TABLE WHERE TITLE LIKE '%ACME%'
UNION
SELECT * FROM TABLE WHERE TITLE LIKE '%5%'
UNION
SELECT * FROM TABLE WHERE TITLE LIKE '%POUND%' 
```

找出一种方法来优先考虑第一个查询。或者将上述一个作为具有一定优先级的四个单独的查询传递。我认为您正在使用前端 tp 传递查询到数据库，所以对您来说应该很容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T07:38:44.720

```
<?php
$search_term = 'test1 test2 test3';
$keywords = explode(" ", preg_replace("/\s+/", " ", $search_term));
foreach($keywords as $keyword){
 $wherelike[] = "title LIKE '%$keyword%' ";
}
$where = implode(" and ", $wherelike);

$query = "select * from table where $where";

echo $query;
//select * from table where title LIKE '%test1%' and title LIKE '%test2%' and title LIKE '%test3%' 
```

# java - SessionListener 和 Application Context 冲突

> ID：15859969
> 
> 赞同：0
> 
> 时间：2013-04-07T07:27:28.833
> 
> 标签：java, jakarta-ee, jsf-2, el, managed-bean

这是我的会话处理程序类：

```
public class Sessionlistener implements HttpSessionListener {

  @ManagedProperty(value="#{sessionCount}")
  private SessionInfo info;

  @Override
  public void sessionCreated(HttpSessionEvent event) {  
    info.setActive(info.getActive() + 1);
  }

  @Override
  public void sessionDestroyed(HttpSessionEvent arg0) {
    info.setActive(info.getActive() - 1);
  }

} 
```

..这是我的 sessionCount bean：

```
@ApplicationScoped 
@ManagedBean(name="sessionCount",eager=true) 
public class SessionInfo {
  private int active = 0;

  @PostConstruct
  public void init() {
    System.out.println("sessionCount object created");
  }

  public void setActive(int active) {
    this.active = active;
  }

  public int getActive() {
    return active;
  }
} 
```

错误是：当`SessionListener`初始化它时`@ManagedProperty`，由于尚未创建而`null`被注入。`sessionCount`我该如何解决这个问题？另一方面，如果我将`sessionCount`字段放入`SessionListener`类中并使`SessionListener`类成为`@ApplicationScoped`bean，则无法通过`#{applicationContext.listenerBean.active}`.

这里的实际问题是：如果一个类是`HttpSessionlistener`实例，我们不能将它用作应用程序上下文对象吗？是不是真的

# algorithm - 找到 ((a +b)/c)mod m

> ID：15859974
> 
> 赞同：0
> 
> 时间：2013-04-07T07:28:21.807
> 
> 标签：algorithm, math, numbers, number-theory

我想计算：

```
((a+b)/c)mod m 
```

我想知道是否有任何有效的方法，因为`a`is too big but `b`，`c` 并且`m`适合简单的 32 位 int。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:42:47.423

模算术中没有除法运算符。相反，您必须计算分母的模逆，然后相乘。因此，在您的示例中，您将计算 a+b 模 m，计算 c 模 m 的模逆，然后将两个模 m 相乘。可以使用扩展的欧几里得算法找到模逆。如果您不知道如何计算模逆，请询问。

# matlab - 将文本字符插入图像像素

> ID：15859975
> 
> 赞同：0
> 
> 时间：2013-04-07T07:28:26.963
> 
> 标签：matlab

我正在寻找使用 matlab 将字符插入图像的代码。

这`img`是我的封面图片，`msg`也是我的文字。我收到这个错误

```
Error using ==> bitset
Operands to BIT Ops must be numeric. 
```

但我的是数字。它不是？我该如何说清楚？

```
clear all;
img=imread('img.jpg','jpg');
msgopen=fopen('ramz.txt');
msg=fread(msgopen);
msgbin=dec2bin(msg);
msgsize=size(msg);
x=msgsize(1);
msgsizebin=dec2bin(x,8);
imgh=size(img,1);
imgw=size(img,2);
for i=1:imgh;
  for j=1:imgw;
    img(i,j)=bitset(img(i,j),msgbin(i,1));
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:27:48.753

You can use the `text` function and then the `hardcopy` function to create the image with the text coded into the data;

```
img=imread('img.jpg','jpg');
msgopen=fopen('ramz.txt');
msg=fread(msgopen);
hfig=figure;
imshow(img);
hold on;
text(x_loc,y_loc,msg); %x_loc and y_loc are the locations where you want the text to   
                       % appear. msg is assumed to be a string.
orig_mode = get(hfig, 'PaperPositionMode');
set(hfig, 'PaperPositionMode', 'auto');
img_with_text = hardcopy(hfig, '-Dzbuffer', '-r0'); 
```

# javascript - JSFiddle 代码在网站中实现时不起作用，在 Dreamweaver 中编码。JS

> ID：15859985
> 
> 赞同：0
> 
> 时间：2013-04-07T07:31:02.500
> 
> 标签：javascript, loading, dreamweaver, jsfiddle

我是 jQuery 的新手，但我花了一周的时间试图让这个在 JSFiddle 之外工作。我开始使用 JSFiddle，因为它似乎是一个很好的学习平台，但在 JSFiddle 之外编写代码却是一项艰巨的任务。我可能遗漏了一些非常简单的东西，或者 JSFiddle 只是教会了我足够危险。如果我没有在这里和通过谷歌搜索解决方案，我不会在这里问，所以任何帮助将不胜感激。我正在尝试将此代码实现到我在 Dreamweaver CS5 中编码的网站中。

这是 JSFiddle 的链接。[http://jsfiddle.net/OFJavascript/9QtVw/](http://jsfiddle.net/OFJavascript/9QtVw/)

我在“头”标签中链接这样的 CSS

```
<link rel="stylesheet" type="text/css" href="JavaScript/GraphicNav.css" /> 
```

我在“head”标签中链接这样的JavaScript

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="JavaScript/GraphicNav.js"></script> 
```

我将 HTML 放在“body”标签中

这是我的html的第一部分

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html>
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
    <script src="JavaScript/GraphicNav.js"></script>
    <link rel="stylesheet" type="text/css" href="JavaScript/GraphicNav.css" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>TEST</title>
    </head>
<body>
<div id='wrap'>
   <div class='pathnavbg1'></div>
   <div class='pathnavbg2'></div>
   <div class='pathnavbg3'></div>
   <div class='pathnavbg4'></div>
    <div id='action1'><span><div id='link1'><H1 class='pathnavtext'>LINKLINK01</H1></div></span></div>
   <div id='action2'><span><div id='link2'><H1 class='pathnavtext'>LINKLINK02</H1></div></span></div>
   <div id='action3'><span><div id='link3'><H1 class='pathnavtext'>LINKLINK03</H1></div></span></div>
   <div id='inner1'>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce nec nisl ut nibh suscipit molestie. Phasellus bibendum nulla tincidunt mi sagittis vel fermentum elit aliquam. Quisque sit amet odio est. Duis condimentum mattis dolor vitae consectetur. Mauris adipiscing laoreet auctor. Sed vel sapien metus.</div>
   <div id='inner2'>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce nec nisl ut nibh suscipit molestie. Phasellus bibendum nulla tincidunt mi sagittis vel fermentum elit aliquam. Quisque sit amet odio est. Duis condimentum mattis dolor vitae consectetur. Mauris adipiscing laoreet auctor. Sed vel sapien metus.</div>
   <div id='inner3'>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce nec nisl ut nibh suscipit molestie. Phasellus bibendum nulla tincidunt mi sagittis vel fermentum elit aliquam. Quisque sit amet odio est. Duis condimentum mattis dolor vitae consectetur. Mauris adipiscing laoreet auctor. Sed vel sapien metus.</div>
</div>
</body>
</html> 
```

再次希望这是我想念的简单的东西。非常感谢任何帮助，因为我已经用尽了所有方法来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:36:10.947

将所有 .click() 调用放入准备好的函数中。可能在它被调用的时候，元素还没有准备好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:40:59.450

JSFiddle 把你的代码放在ready to function 中，而且功能很简单。

```
<script type="text/javascript">//<![CDATA[
$(function () {
    $("document").ready(function () {
        setTimeout(function () {
            $("#action1").trigger('click');
        }, 10);
    });

    $('#action1').click(

    );
    $("#action1").click(

    );

    $('#action2').click(

    );
    $("#action2").click(

    );
    // code here
});//]]>
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T03:43:55.920

您始终可以查看该页面的 iframe 的源代码，然后将其复制并粘贴到您正在使用的任何程序中，然后将其上传到您的网站。

# android - 尽管在设备中创建了 .sqlite 文件，但未找到 sqlite 表

> ID：15859986
> 
> 赞同：1
> 
> 时间：2013-04-07T07:31:08.687
> 
> 标签：android, sqlite

我是 SQL 新手。我有一个名为 Emergency_no 的数据库，我使用 Sqlite 管理器创建了它。这是一个简单的数据库，只有一个名为“emergency_no”的表。名为emergency_no.sqlite 的数据库位于我的资产文件夹中，但是当我在模拟器上运行它时，它显示：

```
android.sqlite.SQLiteException:no such table :emergency_no: 
```

虽然我在 /data/data/com.citymasetro/database/ 获得了 Emergency_no.sqlite 和 Emergency_no.journel

我的 dbhelper 代码如下

```
package com.citymaestro;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

 public class Dbmanager1 {

public static final String  KEY_ROWID="_id";
public static final String  policeno="police_no";
public static final String  fireno="fire_no";
public static final String  ambulanceno="ambulance_no";
public static final String  womenno="women_cell";

public static final String  DATABASE_NAME="emergency_no";
public static final String DATABASE_TABLE="emergency_no";
public static final int DATABASE_VERSION=1;
private static String DB_PATH = "/data/data/com.citymaestro/databases/";

public Dbhelper ourhelper;
public static Context ourcontext;
public SQLiteDatabase ourdatabase;

private static class Dbhelper extends SQLiteOpenHelper{
    private boolean mCreateDatabase = false;
    private boolean mUpgradeDatabase = false;

    public Dbhelper(Context context) {
        super(context, DATABASE_NAME, null, 1);
        // TODO Auto-generated constructor stub
    }

    public void initializeDatabase(String path) {
           // DATABASE_PATH = path;
            getWritableDatabase();

            if(mUpgradeDatabase) {
                ourcontext.deleteDatabase(DATABASE_NAME);
            }

            if(mCreateDatabase || mUpgradeDatabase) {
                try {
                    createDataBase();
                } catch (IOException e) {
                    throw new Error("Error copying database");
                }
            }
        }

        public void createDataBase() throws IOException
        {
            boolean dbExist = checkDataBase();

            if(dbExist)
            {
                //do nothing - database already exist
            }else{

                this.getReadableDatabase();

                try {

                    copyDataBase();

                } catch (IOException e) {

                    throw new Error("Error copying database");

                }
            }

        }

        private boolean checkDataBase()
        {
            SQLiteDatabase checkDB = null;

            try
            {
                String myPath = DB_PATH + DATABASE_NAME;
                checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS | SQLiteDatabase.CREATE_IF_NECESSARY);

            }catch(SQLiteException e)
            {
                //database does't exist yet.
            }
            if(checkDB != null)
            {
                checkDB.close();
            }

            return checkDB != null ? true : false;
        }
        private void copyDataBase() throws IOException
        {
            //Open your local db as the input stream
            InputStream myInput = ourcontext.getAssets().open(DATABASE_NAME);

            // Path to the just created empty db
            String outFileName = DB_PATH + DATABASE_NAME;

            //Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            //transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer))>0)
            {
                myOutput.write(buffer, 0, length);
            }
            //Close the streams
             myOutput.flush();
            myOutput.close();
            myInput.close();
        }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
    /*  try {
            createDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.d("GAG","oncreatem");
        }
        */
        mCreateDatabase = true;
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        mUpgradeDatabase = true;
    }

}
public Dbmanager1(Context c)
{
    ourcontext=c;
    //Dbhelper dbh=new Dbhelper(ourcontext);

    //Log.d("gag","constru");
}
 public Dbmanager1 open(){
     ourhelper=new Dbhelper(ourcontext);
     ourdatabase=ourhelper.getWritableDatabase();
     return this;
 }

 public void close(){
     ourhelper.close();

 }
 public String getdata() {
        // TODO Auto-generated method stub
        String[] columns= new String[]{ KEY_ROWID,policeno};
        Cursor c =ourdatabase.query(DATABASE_TABLE, columns, null, null,null, null, null);
        String result="";
        int irow=c.getColumnIndex(KEY_ROWID);
        int irow2=c.getColumnIndex(policeno);
        for(c.moveToFirst(); !c.moveToLast();c.moveToNext()){
            result=result + c.getString(irow) + "" +c.getString(irow2) + "\n";
        }

        return result;
    }

} 
```

我从我的 searchscreen.java 调用它

```
 String str;
    db.open();
    // Log.d("TAG","before str");
     try {
        str=db.getdata();
        // Log.d("TAG",str);
         db.open();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.d("TAG",e.toString());
    }
    searchscreen sc;
    //sc= db.getdata(i, k);
    db.close(); 
```

我无法找到错误。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:44:43.483

问题是您正在查询甚至不存在的表，因此您必须先创建表。例如，您的表可能有两个字段（GUIDE_ID 和 PRIMARY_KEY），您应该这样处理：

```
public static final String create_emerg_table =  "create table "+ 
            Constants.EMERG_TABLE + " ("+
            Constants.EMERG_GUIDE_ID + " integer, "+
            Constants.EMERG_PRIMARY_KEY + " integer primary key autoincrement);"; 
```

然后从 onCreate 创建表：

```
@Override
public void onCreate(SQLiteDatabase db) {
    Log.v(TAG, "Creating all the tables");
        try
        {
            db.execSQL(create_emerg_table);
        }catch(SQLException ex)
        {
            Log.e(TAG, ex.getMessage());
        }
} 
```

# php - 出于 WordPress 安全问题从前端预览和发布图像

> ID：15859989
> 
> 赞同：2
> 
> 时间：2013-04-07T07:31:52.667
> 
> 标签：php, wordpress, security, upload

我有一个带有文件输入的前端表单，*任何人*（没有注册用户）都可以上传一个图像，该图像将附加到后端的自定义元字段。要预览图像，我使用的是旧`iframe`技术。我的表格如下所示：

```
<form id="upload-photo" method="post" target="preview-iframe" action="<?= get_template_directory_uri() ?>/inc/upload.php" enctype="multipart/form-data" >
  <div id="preview"><img src="" alt="" /></div>
  <iframe id="preview-iframe" name="preview-iframe" src=""></iframe>
  <input type="file" name="author_photo" />
  <input type="hidden" id="attachment" name="attachment" value=""/>
  <button type="submit" id="upload">Upload</button>
</form> 
```

然后我使用 WordPress 内置函数来处理上传并将文件移动到媒体库中。我使用隐藏字段来存储`id`附件的 WordPress，因此如果用户决定通过上传新图片来更改图片，则旧图片将被删除。这是我的PHP：

```
<?php
define('WP_USE_THEMES', false);
require_once '../../../../wp-load.php';
require_once(ABSPATH .'wp-admin/includes/image.php');
require_once(ABSPATH .'wp-admin/includes/file.php');
require_once(ABSPATH .'wp-admin/includes/media.php');

if (isset($_POST['attachment'])) {
  wp_delete_attachment($_POST['attachment'], true);
}

foreach ($_FILES as $file => $data) {
  if ($data['error'] === UPLOAD_ERR_OK) {
    $attachment = media_handle_upload($file, null);
  }
}

echo wp_get_attachment_image($attachment, 'author', 0, array('id' => $attachment));
?> 
```

最后是 jQuery 将它们粘合在一起：

```
var $preview = $('#preview'),
    $iframe = $('#preview-iframe'),
    $attachment = $('#attachment');

$('#upload').click(function() {
  $iframe.load(function() {
    var img = $iframe.contents().find('img')[0];
    $preview.find('img').attr('src', img.src);
    $attachment.val(img.id);
  });
}); 
```

一切都很完美，但这种简单的方法几乎没有问题：

*   如果 JavaScript 被禁用，图像不会被删除

*   如果用户上传一个文件然后刷新站点然后上传和其他图像，那么前一个不会被删除，因为之前的附件ID由于刷新而不存在。

*   恶意用户可以`attachment`使用不同的 ID 编辑隐藏字段。

我认为将文件上传到文件`/temp`夹仅用于预览目的，然后每 X 次运行一次 cron 作业以将其清空。`/temp`但是，一旦提交了整个表单，我如何使用 WordPress 功能将图像从图库中移动，以便我可以获取附件 ID 以链接到帖子？

请注意，我有两种形式，一种用于处理图像，另一种是包含将要发布的所有内容的全局表单，因为我可以将新帖子作为“草稿”发布，管理员有权决定。但是如何安全地为图像执行此操作？*只有*表单发布成功后，如何预览图像并将其放入图库？

我知道 FileReader API，但我需要与 IE8+ 兼容，这样就不行了。我也知道所有 Flash 和 Silverlight 解决方案，但这也不是一个选项。另外请不要只链接到 WordPress 插件，我正在尝试在这里学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:57:20.300

好吧，看来我又在回答我自己的问题了。这就是我解决它的方法。我发现了一个 WordPress 函数`media_handle_sideload`，它可以让您从其他位置上传文件，而不仅仅是`$_FILES`像以前的函数那样从数组中上传文件。

因此，既然我知道了该功能，我就采用了最初的方法。我基本上将文件上传到一个`/temp`文件夹以进行预览，并给它一个唯一的 ID，我将其存储到隐藏字段中。当用户提交整个表单并通过验证时，我获取存储的 ID 并确定文件是否存在，如果存在，我将其移动到图库。这解决了我对安全性的大部分担忧，因为即使恶意用户找到现有的唯一 ID（不太可能但可能），该文件也不会像以前那样被删除，而只是移动到图库中（没什么大不了的）。

最后，我设置了一个 cron 作业，每隔 X 时间清空临时文件夹。

# java - 我怎样才能延迟每颗子弹？（Java -Slick2d - 游戏）

> ID：15859993
> 
> 赞同：0
> 
> 时间：2013-04-07T07:32:41.273
> 
> 标签：java, slick2d

（事件监听器在另一个类中）当 Game.render = true 时，我得到一个看起来更像激光束的持续子弹流，我希望有间隙。我的意思是，我希望生成的子弹就像是用机关枪发射的一样。我知道我应该添加一个时间或其他东西，但我不知道如何做到这一点，以获得我想要的效果。任何帮助将不胜感激，因为我一直试图让它工作大约一个小时。

```
import java.util.ArrayList;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;

public class Bullet {

// ArrayList
@SuppressWarnings("unchecked")
static ArrayList<Bullet> arrL = new ArrayList();

public Bullet(int x , int y) throws SlickException{

}

public static void update(GameContainer gc, int u) throws SlickException{

// when the left mouse button is clicked Game.fire = true, the key listener is in   another class
    if(Game.fire){

        Bullet b = new Bullet(5,5);
        arrL.add(b);
        reloaded = false;

    }   if(!reloaded){

    }           
}

public static void renderBullets(GameContainer gc, Graphics g, int x, int y) {

         // draws a new bullet for every 'bullet object' in  the ArrayList called arrL
        for(Bullet b : arrL){

            g.drawRect(x,y,10,10);
            x++;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:18:53.150

在这种情况下，我最常做的是添加一个时间变量，我从每次更新中减去 delta（你作为 u 的变量），直到它低于 0，此时我将其重置：

```
// Set this to whatever feels right for the effect you're trying to achieve.
// A larger number will mean a longer delay.
private static int default_bullet_delay = 500;

private static int time = 0;

public static void update (GameContainer gc, int u) throws SlickException {
    time -= u;
    if (time <= 0 && Game.fire) {
        fireBullet();                 // Replace this with your code for firing the bullet
        time = default_bullet_delay;  // Reset the timer
    }

    // The rest of the update loop...
} 
```

基本上，即使 Game.fire 为真，子弹也不会在计时器倒计时之前发射。一旦发生这种情况，就会设置计时器，并且在计时器再次倒计时之前下一个子弹无法发射。如果将其设置为相当小的值，那么每个子弹之间应该有一点间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:20:15.917

**我就是这样做的：**

```
boolean reloaded = false;  // Start with a reload becouse weapon not reload itself
float reloadTime = 100;     // This is the "timer" (the value doesnt matter)
float startReloadTime = 100; // This is the actual reload time

private void shoot(int delta, float screenWidth, float screenHeight) {

    // reload if not reloaded
    if (!reloaded) {
        reloadTime -= 0.5f * delta; // As I said, this is the timer

        // If the reload finished, set the timer back to the reload time
        if (reloadTime <= 0) {
            reloaded = true; // reloaded, we can shoot
            reloadTime = startReloadTime;
        }
    }

    // Shoot only if reloaded
    if (reloaded) {

        // This is some direction calculating, ignore for now
        float mouseWorldX = (x + (mouseX - screenWidth / 2));
        float mouseWorldY = (y + (mouseY - screenHeight / 2));

        float randomX = (float) Math.random() * (2000 / mouseWorldX);
        float randomY = (float) Math.random() * (2000 / mouseWorldY);

        mouseWorldX += randomX;
        mouseWorldY += randomY;

        // Add a new bullet element to the world (where will be rendered)
        world.add(new Shot(world, camera, x + width / 2, y + height / 2, mouseWorldX - 2.5f, mouseWorldY - 2.5f, 5, 5, new Color(1, 0, 0, 1f)));

        // We need to reload
        reloaded = false;
    }
} 
```

# perl - Perl 脚本将 dirA 的文件内容与 dirB 的文件内容进行比较，并将差异输出到单独的文件中

> ID：15859999
> 
> 赞同：1
> 
> 时间：2013-04-07T07:33:30.680
> 
> 标签：perl, file, compare, directory

我只是 perl 的初学者，我需要以下帮助。

DirA 和 DirB 有文件 f1 ,f2 ,f3 ,f4, f5 （不一定是 5 个）。我需要将 DirA 中 f1 的内容与 DirB 中 f1 的内容进行比较，并将结果输出到 f1_diff 中。同样需要对目录 A 和 B 中的所有文件执行此操作。因此在上述情况下，假设所有文件的内容不同，脚本将输出 5 个文件 f1_diff,f2_diff,f3_diff,f4_diff,f5_diff，其中 f1 都缺少行DirA 和 f1 DirB。

例如，如果

```
f1 dir A has  line1, line2,     line3, line4xxxx, line5   
f1 dir B has  line1, line2xxxx, line3, line4,     line5 
```

f1_diff 应该有

```
line2 --> line2xxxx

line4xxxx -->line4 
```

有人可以帮我解决这个问题。

**更新：** 我现在有以下脚本，需要添加以下内容。文件名：不同行数 文件 1 - 1 文件 2 - 30 文件 3 - 在 dir1 中丢失 文件 3a - 在 dir2 中丢失

其次，行数不同。有人可以帮我修改一下吗

```
#!/usr/bin/perl

package Main; { 
use strict;
use warnings;
use Cwd;
my $DirA;
my $DirB;
my $y;

print ("\nChoose one of the entries below\n");
print ("e1\e2\e3\n\n");

print("Enter here --->");
my $dir = <>;  
chomp($dir);    

if ($dir eq "e1"){

$DirA = "./dir1";
$DirB = "./dir2";
}

elsif ($dir eq "e2"){
$DirA = "./dir3";
$DirB = "./dir4";
}

else{
$DirA = "./dir5";
$DirB = "./dir6";
}

opendir my($dh), "$DirA" or die "Couldn't open dir DirA!";
my @files = readdir $dh;
closedir $dh;
system("rm -rf diffs");
system ("mkdir diffs");

foreach my $file (@files) {
    next if -d $file;
    my $diff = `diff -y --suppress-common-lines "$DirA/$file" "$DirB/$file"`;
    open DIFF_FILE, ">$file"."_diff";
    print DIFF_FILE $diff;
    close DIFF_FILE;#}
}
    chdir("./diffs/");
    my $cwd = cwd();
    system("mv ../*_diff .");
    foreach(glob('*.*')) {
    unlink if (-f $_) && !-s _;
}
 print("Total number of differences = "); system("ls *_diff | wc -l");print("\n");
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T07:46:32.307

我推荐使用 CPAN 模块来完成这个任务：

*   查找文件：[File::Find](http://search.cpan.org/~rjbs/perl-5.16.3/lib/File/Find.pm)
*   比较文件：[File::Compare](http://search.cpan.org/~rjbs/perl-5.16.3/lib/File/Compare.pm)
*   显示文件差异：[Text::Diff](http://search.cpan.org/~ovid/Text-Diff-1.41/lib/Text/Diff.pm)

检查 Text::Diff 的输出格式是否是您需要的，它提供了配置功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:01:18.800

你可以使用`Text::Diff`.

```
#!/usr/bin/perl

use Text::Diff;
use strict;
use warnings;

opendir my($dh), "DirA" or die "Couldn't open dir DirA!";
my @files = readdir $dh;
closedir $dh;

foreach my $file (@files) {
    next if -d $file;
    my $diff = diff "DirA/$file", "DirB/$file";
    open DIFF_FILE, ">$file"."_diff";
    print DIFF_FILE $diff;
    close DIFF_FILE;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:18:36.810

如果*并行*可用，这很容易：

```
ls dirA/f* | parallel 'echo {} - dirB/{/} >>{/}_dif ; diff {} dirB/{/} >> {/}_dif ' 
```