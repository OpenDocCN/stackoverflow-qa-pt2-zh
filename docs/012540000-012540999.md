# StackOverflow 问答 12540000-12540999

# javascript - Ext JS 4.1 中的递归树形菜单结构

> ID：12540001
> 
> 赞同：2
> 
> 时间：2012-09-22T01:38:29.067
> 
> 标签：javascript, menu, extjs

首先，我是 ExtJS 的新手。我希望您的帮助让我知道获得包含 n 个递归项的树形菜单的最佳方法。例如：

文件夹

..文件夹

....物品

....文件夹

......物品

......物品

....文件夹

...

我遵循 Sencha 提出的最佳实践。我能够用一个级别做一个树形菜单，但是当尝试为 n 个级别做它时，它失败了（事实上，该应用程序可以工作但显示第一级的无限节点）。显然问题是我的菜单项的模型定义，请参阅：

```
Ext.define('Dashboard.model.MenuItem',{
extend: 'Dashboard.model.AbstractMenuElement',

  fields:
  [
        {name: 'content', type: 'string'},
        {name: 'skeletonFlag', type: 'string'},
        {name: 'fatherId', type: 'int'} 
  ],

  associations:
  [
    {type: 'hasMany', model: 'Dashboard.model.MenuItem', name: 'children', mapping: 'items'}
  ]

}); 
```

所以这个模型递归地创建了无限节点。但是......你知道我应该如何为我的菜单项建模以实现递归菜单吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T17:11:40.663

要在 Ext JS 中显示树状结构，我认为最好的办法是使用[Ext.model.TreeModel](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.TreeModel)、[Ext.model.TreeStore](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.TreeStore)和[Ext.tree.Panel](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.tree.Panel)。

这是一个与您在问题中提到的结构相匹配的简单示例：

```
Ext.create('Ext.tree.Panel', {
    store: Ext.create('Ext.data.TreeStore', {
        root: {
            text: 'Root Folder',
            expanded: true,
            children: [
                {text: 'Folder 1', children: [
                    {text: 'Item 1', leaf: true}
                ]},
                {text: 'Folder 2', expanded: true, children: [
                    {text: 'Item 2', leaf: true},
                    {text: 'Item 3', leaf: true}
                ]},
                {text: 'Folder 3', children: []}
            ]
        }
    }),
    renderTo: Ext.getBody()
}); 
```

您可以在 Plunker 上查看[此示例。](http://plnkr.co/wbusvN)

# sql - 为什么这个空间在这个正则表达式中很重要？

> ID：12540003
> 
> 赞同：2
> 
> 时间：2012-09-22T01:39:01.427
> 
> 标签：sql, regex, postgresql

为什么空间会有所不同？

```
select * from beds where id~'.*Extra large.* (Red).*'; 
```

和

```
select * from beds where id~'.*Extra large.*(Red).*'; 
```

第一个没有返回，第二个按我的意愿行事。我想要匹配的一个例子是：

```
"Extra large" (Red) {2012 model} 
```

我认为第一个会起作用，因为（红色）后面有一个空格？

编辑：即使我用 '\' 转义括号，我仍然不能有空格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T01:56:03.300

问题是你没有逃脱你的括号`"Red"`。你的正则表达式应该是：

```
'.*Extra large.* \(Red\).*' 
```

这使方括号成为文字方括号，但在不转义它们的情况下，它们创建了一个正则表达式组（而不是要匹配的字符）。

您的第一个正则表达式对字符进行了分组，`Red`并且在该组之前需要一个空格`Red`，所以它会匹配`"... Red..."`，但是在您的输入之前有一个括号`Red`，所以它不匹配。

您的第二个正则表达式接受之前的任何字符（通过`.*`）`Red`，因此它匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T01:59:45.347

This is because you're not escaping the `()`.

The brackets around "Red" create a group and are not included in the match. This is the reason why the regexp without the whitespace works.

The `.*` in the regexp **without** the whitespace matches `" (`, then comes `Red` and after that `) {2012 model}`. The brackets are matched by the `.*` operators.

The `.*` in the regexp **with** the whitespace matches `"` and the `(` is not included in the pattern.

So the right pattern would be this:

```
.*Extra large.*\(Red\).* 
```

# android - Android 手机在未连接到任何 AP 时广播数据包

> ID：12540007
> 
> 赞同：1
> 
> 时间：2012-09-22T01:39:58.307
> 
> 标签：android, wifi, broadcast, packet, smartphone

我正在开发一个 Android WiFi 应用程序，并且需要知道是否可以创建一个应用程序以在手机尚未连接到任何接入点 (AP) 时可靠地重复 WiFi 广播数据包。我知道手机本身就可以做到这一点。例如，当手机启动时，它会发出“SSID”名称的数据包，以尝试与存储在其设置中的其中一个 AP 建立连接。我正在尝试创建代码以通过带有 WiFi 广播数据包的智能手机控制定制的电子设备。我现在可以通过 TCP/IP 连接做到这一点，但我真的不需要来自设备的双向（握手）通信响应。我的设备和智能手机类似于通过只有单向广播数据包的智能手机控制机器人。我会发送数据包移动，或发送数据包停止，等等。例如，当我看到它转动时，我真的不需要从机器人那里知道它正在转动。想要这样做的另一个原因是，如果Android不需要在继续之前尝试检测或等待设备的握手响应，我相信我可以在恶劣的环境条件下获得更大的WiFi范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:44:21.257

您是否考虑过将手机设置为 Ad-Hoc 模式并直接与机器人通话？我没有测试过这段代码，但它可能有效：

```
DatagramSocket socket = new DatagramSocket(8001);
socket.setBroadcast(true);
socket.setReuseAddress(false);
DatagramPacket packet = new DatagramPacket(databytes, 7,
getBroadcastAddress(), 8001);
socket.send(packet); 
```

# objective-c - 如何用Objective-C识别鼠标下的窗口？

> ID：12540010
> 
> 赞同：3
> 
> 时间：2012-09-22T01:40:52.313
> 
> 标签：objective-c

我有以下代码：

```
id eventHandler = [NSEvent addGlobalMonitorForEventsMatchingMask:NSMouseMovedMask handler:^(NSEvent * event) {
    CGWindowID windowID = (CGWindowID)[event windowNumber];
    CFArrayRef a = CFArrayCreate(NULL, (void *)&windowID, 1, NULL);
    NSArray *windowInfos = (__bridge NSArray *)CGWindowListCreateDescriptionFromArray(a);
    CFRelease(a);
    if ([windowInfos count] > 0) {
        NSDictionary *windowInfo = [windowInfos objectAtIndex:0];
        NSLog(@"Name:  %@", [windowInfo objectForKey:(NSString *)kCGWindowName]);
        NSLog(@"Owner: %@", [windowInfo objectForKey:(NSString *)kCGWindowOwnerName]);
        //etc.
    }
}]; 
```

这在识别光标下的窗口方面做得很好。但是，为了可靠地识别它们，您必须单击窗口。某些窗口会触发终端和 xcode 等更改，但悬停在桌面上不会触发 Finder 在光标下。但是，如果您单击桌面，则可以正确识别它。有什么想法我可能会错过吗？

# sql-server - 为什么 sp_executesql 需要 ntext/nchar/nvarchar 而不是 text/char/varchar？

> ID：12540011
> 
> 赞同：2
> 
> 时间：2012-09-22T01:41:00.363
> 
> 标签：sql-server, dynamic-sql

为什么 sp_executesql 需要 ntext/nchar/nvarchar 参数和语句而不是 text/char/varchar？

我了解如何解决此问题（通过将所有语句/参数声明为 nvarchar），但为什么 Microsoft 会强制执行此操作？有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:37:03.430

我不确定这是出于特定于该程序的任何特定原因而强制执行的。另一个对数据类型很挑剔的系统存储过程的例子是`sp_trace_create.`

这不仅需要`nvarchar`参数`@tracefile`，而且参数`@maxfilesize`必须作为“bigint”传递，并且它不接受始终能够正确转换的文字整数。

这失败了

```
DECLARE @TraceID int
EXEC sp_trace_create @TraceID OUTPUT, 0, N'X:\Foo', 1, NULL 
```

这成功了

```
DECLARE @TraceID int
DECLARE @x bigint = 1

EXEC sp_trace_create @TraceID OUTPUT, 0, N'X:\Foo', @x, NULL 
```

这两者都在`master`数据库中显示为系统扩展存储过程。我假设这些扩展存储过程的调用机制与常规存储过程的调用机制不同，因此 SQL Server 不会隐式转换参数。

不过，像这样`sp_executesql`强制执行并不一定是坏事。`nvarchar`动态 SQL 可能出现的一个潜在问题是，如果提供的字符串是经过`nvarchar`消毒然后强制`varchar`转换的，则可能会打开 SQL 注入机会。[我在这里的回答就是一个例子。](https://stackoverflow.com/a/12235773/73226)

# .htaccess - 用户身份验证和 mod_rewrite

> ID：12540012
> 
> 赞同：0
> 
> 时间：2012-09-22T01:41:07.420
> 
> 标签：.htaccess, mod-rewrite, basic-authentication

如何让 mod_rewrite 和用户身份验证一起工作？我已经尝试过了，但它只是给了我一个“未指定输入文件” - 当我删除身份验证时，它可以工作，所以我找到了问题，但我自己无法解决。

```
DirectoryIndex index.html index.php

AuthName "Something"
AuthType Basic
AuthUserFile /.htpasswd

require valid-user

<IfModule mod_rewrite.c>

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-s

RewriteRule ^(.*)$ index.php?url=$1 [PT,L]

</IfModule> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:32:51.713

将 a 添加`RewriteBase`到您的规则中：

```
RewriteEngine On

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-s

RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 
```

或者，您可以尝试添加前导斜杠或`index.php`.

# hash - 如果他们已经拥有一个包含所有用户的巨大彩虹表，那么散列的意义何在？

> ID：12540015
> 
> 赞同：0
> 
> 时间：2012-09-22T01:41:50.693
> 
> 标签：hash, sha256

我试图弄清楚这篇文章的一些内容：

[http://techcrunch.com/2012/09/20/facebook-crm-ads/](http://techcrunch.com/2012/09/20/facebook-crm-ads/)

因此，Facebook 声称他们尊重您客户数据库的隐私，这就是他们允许您上传散列电子邮件地址的原因。但是，有什么意义呢？

只有在他们还散列了他们使用的所有电子邮件地址以进行点击时，它才会起作用。

据推测，这样做的唯一好处是 Facebook 不知道您的客户的电子邮件地址，这些客户还不是 Facebook 用户。

我还缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:53:23.407

这不是为了保护电子邮件地址免受 facebook 的侵害，而是为了保护它们的其余部分。如果在此过程中某处发生数据泄漏，则很可能只有散列地址会被泄漏，从而使它们更难被滥用。

# java - 访问跨 Eclipse 项目共享的类中的包私有字段

> ID：12540016
> 
> 赞同：5
> 
> 时间：2012-09-22T01:42:01.010
> 
> 标签：java, eclipse, shared-libraries, access-modifiers, package-private

我有一个在两个 Eclipse 项目中使用的模型类（[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)）。

我们称之为一个项目，它`Producer`是从流中捕获数据并将其存储到数据库中。有问题的模型类，例如`ObjectModel`，用于在序列化和存储在数据库中之前反序列化流以进行操作。

另一个项目，我们称之为`Consumer`，正在提取存储在数据库中的数据并在屏幕上可视化。它使用相同的模型类来反序列化存储的数据，以便在可视化应用程序中使用。

我计划将其放入一个 Eclipse 项目中，以便在和项目`ObjectModel`之间共享其源代码。但是，每个应用程序当前在同一个包中都有类，这些类利用 package-private 访问修饰符来获取和设置.`Producer``Consumer``ObjectModel`

有什么方法可以在多个 Eclipse 项目之间共享源代码，并且仍然使用共享源维护包私有访问？

**更新**：我在 Eclipse 项目之间共享代码时遇到了麻烦，这就是为什么我在发布之前不尝试这个的原因。[终于让那部分工作了，并在这里](https://stackoverflow.com/questions/3342818/how-can-i-share-resources-between-the-different-eclipse-projects-so-as-to-avoid/12569961#12569961)写成另一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:11:57.960

只要 Producer 和 Consumer 项目中的类与 ObjectModel 在同一个包中声明，它就应该可以正常工作。

但是，您可能需要重新考虑您的设计，并在 ObjectModel 中提供公共访问器方法（getter 和 setter）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T18:56:04.463

查看上面的@GreyBeardedGeek 答案：

> 只要 Producer 和 Consumer 项目中的类与 ObjectModel 在同一个包中声明，它就应该可以正常工作。

您正在寻找 Java 中的 C++ 朋友。一般来说，这*可能*是错误设计的征兆。如果你的设计没问题，那么使用“包私有访问”是实现朋友的 Java 标准方式。如果您的课程在不同的项目中，它将在技术上有效......如果您认为您的设计还可以，也许您想考虑使用 *Heper 课程。例如：

```
public class SomeClass {
 void foo(){...
 }
}

public class SomeClassHelper {
 private SomeClass someClass;
 public SomeClassHelper(SomeClass someClass){
  //you can do it better this with some DI Framework,
  //for illustration purpose
  this.someClass=someClass;
 }

 public SomeClassHelper(){
  //for illustration purpose only
  this.someClass=new SomeClass();
 }

 **public** void foo(){
    //this is punch line
    someClass.foo();
  } 
```

}

您应该将 SomeClassHelper 与 SomeClass 放在同一个包中，但 SomeClassHelper 可以位于不同的源文件夹或项目中。

# string - MIPS程序集中的简单整数到字符串/字符？将整数打印到文本文件？

> ID：12540018
> 
> 赞同：1
> 
> 时间：2012-09-22T01:42:20.713
> 
> 标签：string, file-io, integer, char, mips

好的，所以我有一个任务，我必须找到并打印素数。

我已经完成了，但现在我需要将结果打印到文件中。

长话短说，我如何将整数打印到文件中？

*很长的故事*

我可以将整数和字符串打印到控制台，所以我的输出如下：

```
1.) 2
2.) 3 
3.) 5
... 
```

我可以很好地将字符/字符串打印到文件中，但我只能打印：

```
.)
.)
.)
.... 
```

有没有办法将整数转换或存储为 MIPS 程序集中的字符串？我的任务不是做一个 MIPS 版本的 iota，所以如果有一个简单的输出一个整数到文件，我会很感激任何见解。

我已阅读此页面： [MIPS 文件 I/O 示例](http://courses.missouristate.edu/kenvollmar/mars/help/syscallhelp.html)

这就是我学会将字符串打印到文件的方式，但我找不到任何关于如何打印程序中计算的整数的信息。从昨晚开始，我一直在寻找一个简单的解决方案，但它让我无法理解。

这是第一个 MIPS 分配，我们必须编写 ac 程序，然后将其转换为 MIPS 程序集，所以我没有太多经验，因此不胜感激。

提前致谢。

* * *

这是我想要处理的代码部分，如您所见，我正在尝试在文本文件中镜像控制台上所期望的内容。我正在使用 MARS MIPS 模拟器。

```
FOR:
beq $t0, $t1, EndFOR
IF:
jal test_prime
bne $s1, 1, EndIF
addi $s0, $s0, 1        #Increment 'c'.

#Print 'c', the nth counted place of the found Prime Integer.
li $v0, 1
move $a0, $s0
syscall

sw $s0, buffer($0)

li $v0, 15
move $a0, $s7
la $a1, buffer
li $a2, 1
syscall

#Print '.) '
li $v0, 4
la $a0, dotP
syscall

li $v0, 15
move $a0, $s7
la $a1, dotP
li $a2, 3
syscall

#Print the Prime integer, 'i'.
li $v0, 1
move $a0, $t0
syscall

#Print a New Line.
li $v0, 4
la $a0, newL
syscall

li $v0, 15
move $a0, $s7
la $a1, newL
li $a2, 1
syscall
EndIF:

IF2:
beq $s0, 100, EndFOR        #Once 100 Prime Integers have been found, escape out of the 'For' loop.
EndIF2:             #Not Necessary, but just there to have a complete coding style.

addi $t0, $t0, 1            #Increment 'i'.
j FOR
EndFOR: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:16:35.990

汇编就是欣赏高级编程。您应该尝试将整数一一转换为字符并打印它们。为此，您可以将此伪代码转换为汇编（k 是整数）：

```
while(k){
    char c = 0x03|((k%10)&0x0f);
    push(c);
    k=k/10;
}
while(c=pop()){
    printf("%c",c);
} 
```

# batch-file - 使用 xcopy 备份到网络硬盘？

> ID：12540019
> 
> 赞同：0
> 
> 时间：2012-09-22T01:42:22.390
> 
> 标签：batch-file, backup, xcopy, net-use

我想创建一个批处理文件来备份我的计算机。这就是我现在所拥有的：

```
@echo off
:: variables
net use U:\\...more stuff...
set drive=U:\
set backupcmd=xcopy /s /c /d /e /i /r /y

echo ### Backing up My Documents...
%backupcmd% "%USERPROFILE%\My Documents" "%drive%\My Backup\My Documents"

echo Backup Complete!
@pause 
```

这很简单。它适用于物理连接到我的计算机的驱动器。但是，我有一个网络驱动器，我想用它来完成这项任务。我尝试了一些在论坛上找到的东西，但无济于事。在上面的代码中，我开始尝试使用“net use”。当我运行它时，我得到“无效的驱动器规格”或“找不到网络路径”。

我怎样才能让它工作？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:06:49.360

你有：

```
net use U:\\...more stuff... 
```

但驱动器规格和网络共享之间需要有一个空格：

```
net use U: \\...more stuff... 
```

# windows - GINA 实现是否允许我忽略 SAS 内核调用？

> ID：12540023
> 
> 赞同：0
> 
> 时间：2012-09-22T01:43:33.067
> 
> 标签：windows, windows-7, gina

我知道这已经被问过很多次了，但是我花了很多时间查看我能找到的所有这些，但我没有得到一个好的答案。我确实了解 NMI 的概念，并且我知道我无法拦截呼叫。我只是想知道如果我要开发一个 GINA 应用程序，我可以响应操作系统调用的所有钩子以便我可以忽略它们吗？无论我的 GINA 实现如何，是否都会执行一些钩子？我遇到了许多可以为我调整注册表的小实用程序，但我想在不更改注册表的情况下在代码中处理所有这些。

PS，我不想编写自己的键盘驱动程序，也不想在 BIOS 领域乱搞**...**

另外，我读过 Win 7 不使用 GINA。我错了吗？如果不是，我需要实现/替换什么 Windows 组件才能做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T08:21:27.677

吉娜被维斯塔杀死。所以你是对的，它在 Windows 7 中不存在。替换功能是凭据提供程序。他们当然不允许你拦截 SAS。

# html - 为什么每次单击按钮时选项卡都会回到原来的位置？

> ID：12540024
> 
> 赞同：0
> 
> 时间：2012-09-22T01:44:05.780
> 
> 标签：html, jquery-ui

我遇到了问题，每次单击我`btn_register`的选项卡都会返回登录。为什么是这样？

这是我的 JAVASCRIPT 代码：

```
$(function() {
        $("input:submit").button();
        $("#tabs").tabs();
    }); 
```

这是我的 HTML 代码：

```
<section id="tabs">
<ul>
    <li><a href="#login">Login</a></li>
    <li><a href="#register">Register</a></li>
</ul>
<article id="login">
    <p>
        <form>
            <input type="submit" id="btn_login">
        </form>
    </p>
</article>
<article id="register">
        <form>
            <input type="submit" id="btn_register">
        </form>
    </p>
</article> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:47:57.917

It's because JQuery doesn't know which input:submit you are referring to. [Check this out for help](https://forum.jquery.com/topic/determining-which-of-two-submit-buttons-were-clicked-in-a-single-form)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T01:51:05.893

取决于您要做什么，但这是因为我假设这是在登录页面上？我相信默认情况下，当您有输入类型提交时，它会尝试将表单发送到当前页面。如果它不是表单，而只是一个按钮，我建议您改用按钮标签：

```
<button id='btn_register'>Register</button> 
```

在某些浏览器上，按钮标签不会做任何事情，但它仍然可以刷新页面。要停止这种行为，请将其附加到您的代码中：

```
$('#btn_register').on('click',function(e) {
  e.preventDefault();
  //do whatever you want to here        
}); 
```

如果注册按钮只是假设是一个链接到另一个页面，我建议使用锚标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T01:54:54.347

```
 $("#btn_login").button();
    $("#btn_register").button(); 
```

我将代码更改为此。它有效

# cocos2d-iphone - Cocos2D游戏ABC123无法在iPad上运行

> ID：12540025
> 
> 赞同：1
> 
> 时间：2012-09-22T01:44:33.003
> 
> 标签：cocos2d-iphone

我是 Cocos2D 的新手，我现在正在尝试 ABC123（从互联网下载，由 kwigbo 创建）我想知道为什么它在模拟器上一切正常，但是当我使用我的 iPad 测试它时....问题来了up..我尝试了2周但仍然无法解决...希望有人能教我吗？？非常感谢....

本来泡泡会在玩家记住单词的位置后出现，但是使用iPad运行时……启动后很快就会出现泡泡，玩家完全不记得单词的位置来玩游戏了……

我试图将延迟部分从 delayTime = 1.5 更改为 4;：

@GameLayer.m

```
float delayTime = 4.0;
if(dataManager.currentlevel > 10) delayTime = 2.5;

[self runAction:[Sequence actions:[DelayTime actionWithDuration:delayTime], [CallFunc actionWithTarget:self selector:@selector(showBubbles)], nil]]; 
```

它在模拟器中延迟，但在 iPad 中没有改变......

与 OrbSprite.m 有什么关系吗？

@OrbSprite.m 的初始化：

```
Label *l = [[Label alloc] initWithString:@"" dimensions:CGSizeMake(50, 50) alignment:UITextAlignmentCenter fontName:@"Arial Rounded MT Bold" fontSize:45];
self.label = l;
[l release];

//[self initWithFile:@"bubble1.png"];
Animation *bub = [Animation animationWithName:@"bubble" delay:1.0f images:@"bubble1.png", @"bubble2.png", nil];
self.bubble = bub;
[bub release];

[self addAnimation:bubble]; 
```

或者我应该在这条线上做什么？

```
- (void) showBubble
{
    isBubble = YES;

    [self setDisplayFrame:@"bubble" index:1];
    self.scale = .1;
    [self runAction:[Sequence actions: [ScaleTo actionWithDuration:.1 scale:0.1], [ScaleTo actionWithDuration:.1 scale:1], nil]];
    [self removeChild:label cleanup:YES];
} 
```

# jsp - 我想使用jsp将文件上传到mysql数据库

> ID：12540029
> 
> 赞同：2
> 
> 时间：2012-09-22T01:45:59.773
> 
> 标签：jsp, servlets

我想使用 jsp 将文件上传到 mysql 数据库中。当我使用 input type="file" 时，jsp 没有返回完整路径。我需要完整路径才能在 mysql db 中上传文件。

```
<form id="translationFormID" method="post" action="saveTranslation">

<input type="file" name="attachCV" id="attachCVID" value="Attach CV">

<input type="submit" name="submit" />

</form> 
```

这是我的jsp页面。我使用 post 方法调用 servlet 'saveTranslation'。

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String attachCV=null;
    try{
        String attachCV=request.getParameter("attachCV");
        System.out.println("path= "+attachCV);
    }
    catch(Exception){
        e.printStackTrace();
    }
} 
```

这是我的 servlet 代码。这里获取并打印 attachCV 参数。当我打印 attachCV 时，它显示的内容类似于“c:\fakepath\sample.docx”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T11:39:12.583

> *我需要完整路径才能在 mysql db 中上传文件。*

这里有一个重大的思维错误。

想象一下，*我*是想要上传文件的客户端，而*您*是需要获取文件内容的服务器。我`c:\path\to\sample.docx`完全按照您的要求将我的完整本地磁盘文件系统路径作为唯一信息提供给您。作为服务器，您将如何获得其*内容*？您是否与我的本地硬盘文件系统建立了开放的 TCP/IP 连接？真的吗？

这不是上传文件的工作方式。这只有在服务器与客户端在*物理上运行在同一*台机器上时才有效，这样您就可以使用`FileInputStream`该路径。因此，这只能在本地开发环境中工作，但绝对不能在实际生产环境中运行，因为服务器运行在与客户端不同的物理机器上，由 HTTP 连接分隔。

相反，您应该对客户端与 HTTP 请求正文一起发送给您的唯一文件*内容感兴趣。*在 HTML 术语中，您可以`<input type="file">`在`<form enctype="multipart/form-data">`. 可以在此处找到包含完整代码示例的更详细答案：[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)它描述了现代 Servlet 3.0 使用方式`request.getPart()`和以前事实上的标准 Apache Commons FileUpload API。

一旦你以正确的方式实现它，你最终应该得到一个`InputStream`代表你从 Servlet 3.0`part.getInputStream()`或 Apache Commons FileUpload获得的文件内容`item.getInputStream()`。然后，您可以使用[`PreparedStatement#setBinaryStream()`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setBinaryStream%28int,%20java.io.InputStream%29)通常的方式将其存储在数据库中并[`ResultSet#getBinaryStream()`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getBinaryStream%28java.lang.String%29)从数据库中检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:31:46.720

当然，您需要在`enctype = "multipart/form-data"`表单标签中添加一个属性。以下代码解决了您的问题。

```
<form id="translationFormID" method="post" enctype="multipart/form-data"  
 action="saveTranslation">
    <input type="file" name="attachCV" id="attachCVID" value="Attach CV">
    <input type="submit" name="submit" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:36:45.100

您应该使用 Multipart 数据处理程序`MultipartRequest`来读取 servlet 中的文件内容。客户端返回的路径将始终是客户端的本地路径，除了多部分方式之外，您没有其他方式来读取文件。您可以在 SO 本身中搜索以找到多部分请求处理程序的其他替代方案。

# html - xml 如何定义其他标记语言？

> ID：12540031
> 
> 赞同：0
> 
> 时间：2012-09-22T01:46:21.203
> 
> 标签：html, xml

I'm having a web course. And in the course the instructor said xml is a system for defining other markup language. I don't get it. How can xml define other language like html? I think html is defined by dtd.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:08:51.393

XML 是一种通用语言，可用于描述任何类型的标记。它本身可以意味着任何事情。

当与一组特定的需求（通常是模式）结合使用时，可以定义更严格的语法，它是 XML 的子集，并用作特定的标记语言。

XHTML、SVG 是定义标记语言的 XML 子集的示例。

XML 的其他模式定义了 XML 的子集，但不表示标记，因此不能正确地称为标记语言。例如，SOAP、WSDL 甚至 XSD 本身都定义了 XML 在特定模式中的使用，但不是标记文档的一种形式，通常不会被称为标记语言。（无论哪种方式都可以争论 SOAP）。

还有一些标记语言松散地基于 XML，但不遵守 XML 的严格定义。它们通常是标记语言，但不是正确的 XML 标记语言。这方面的例子是 HTML（包括 HTML5）和 CFML。

# java - 每 20 毫秒将值从 Web 服务器推送到客户端（Java MVC）

> ID：12540039
> 
> 赞同：0
> 
> 时间：2012-09-22T01:50:37.557
> 
> 标签：java, model-view-controller, servlets

我是 Java 新手。我正在尝试在 MVC 行上写一些东西，其中我的 Web 服务器有一个 java 方法，它每 20 毫秒一次读取一行文本文件，我想每 20 毫秒向客户端发送（/推送）这个值（即在从 CSV 读取新行的同时）。我读过这个[http://en.wikipedia.org/wiki/Comet_%28programming%29](http://en.wikipedia.org/wiki/Comet_%28programming%29) 但是对这一切都很陌生，不能理解太多。推/拉/流如何工作以及在这里使用什么。此外，如果我应该在这里拉或推价值。我想我应该推送，否则服务器每 20 毫秒就会被如此多的拉取请求阻塞。请建议。任何一段代码都会有很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:58:11.963

您不能将数据从 Web 服务器推送到客户端/浏览器，因为客户端计算机防火墙会阻止您尝试与计算机建立的任何类型的连接。浏览器总是需要从服务器中拉取它。

您可以通过使用来自 Javascript/Ajax 的长寿命 HTTP 连接使用反向 ajax 来实现这一点

示例请参考以下链接

[http://today.java.net/pub/a/today/2007/03/22/developing-applications-using-reverse-ajax.html](http://today.java.net/pub/a/today/2007/03/22/developing-applications-using-reverse-ajax.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T01:59:14.177

推送似乎是这里最好的答案，尽管你可能会遇到一些问题，让一切都在 20 毫秒的往返行程中运行而不会落后，除非这一切都将在本地网络上运行。

当前出现的最先进的推送技术似乎是 HTML5 WebSockets。如果您可以确保使用支持它的最新网络浏览器，我建议您使用它。

[这](http://java.dzone.com/articles/creating-websocket-chat)是一个构建简单 WebSocket 应用程序的示例。

# database - SQL Server CE - 数据库不能为空

> ID：12540042
> 
> 赞同：0
> 
> 时间：2012-09-22T01:51:21.130
> 
> 标签：database, vb.net, winforms, null, sql-server-ce

每当我创建新数据库并插入数据时，我的 WinForms 应用程序都会不断出错。

这就是我创建数据库的方式

```
Public Function CreateDatabase() As String
    Dim ds As String = "Data Source=" + (My.Computer.FileSystem.SpecialDirectories.MyDocuments) + "\" + (Application.ProductName) + "\" + (DBName) + ".wv" + ";Persist Security Info=True;"
    Dim Conn As New SqlCeConnection(ds)
    Dim Cmd1 As New SqlCeCommand()
    Dim Cmd2 As New SqlCeCommand()
    Dim SqlCeDB As New SqlCeEngine(ds)
    Dim Msg As String
    Try
        If Not System.IO.File.Exists(DBName) Then
            Msg = "Database successfully created in " & Application.StartupPath
            SqlCeDB.CreateDatabase()
            Cmd1.Connection = Conn
            Conn.Open()
            'Create acPassword Table
            Cmd1.CommandText = "CREATE TABLE [wvAccount](" & _
                                "[acName] [nvarchar](100) NOT NULL, " & _
                                "[acPassword] [nvarchar](100) NOT NULL," & _
                                "[acKeyFile] [nvarchar](64) NULL, " & _
                                "[acLastLogin] [nvarchar](100) NULL, " & _
                                "[acLastModified] [nvarchar](100) NULL)"
            Cmd1.ExecuteNonQuery()
            'Create pmPassword Table
            Cmd2.Connection = Conn
            Cmd2.CommandText = "CREATE TABLE [wvPassword](" & _
                                "[pmID] [int] CONSTRAINT pmID PRIMARY KEY NOT NULL, " & _
                                "[pmCat] [nvarchar](100) NOT NULL, " & _
                                "[pmTitle] [nvarchar](100) NOT NULL," & _
                                "[pmUsername] [nvarchar](100) NOT NULL," & _
                                "[pmSiteURL] [nvarchar](100) NULL," & _
                                "[pmNotes] [nvarchar](300) NULL)"
            Cmd2.ExecuteNonQuery()
        Else
            Msg = "There is already a Database with that name."
        End If
    Catch ex As Exception
        Msg = ex.Message
    End Try
    Return Msg
End Function 
```

这就是我在创建数据库并填充表后立即插入数据的方式

```
Private Sub ADD_PA()
    Dim StrSQL_vault As String = "INSERT INTO [wvAccount] ([acName], [acPassword], [acKeyFile], [acLastLogin], [acLastModified]) VALUES (@acName, @acPassword, @acKeyFile, @acLastLogin, @acLastModified)"
    classlibrary_vault = New ConnectionLibrary_Vault
    classlibrary_vault.openConnection_vault(strconnection_vault)
    If Not classlibrary_vault.isConnectionOpen_vault() Then
        Exit Sub
    End If
    classlibrary_vault.initializeCommand_vault(StrSQL_vault)
    classlibrary_vault.addParameter_vault("@acName", SqlDbType.NVarChar, txtName.TextLength, txtName.Text)
    classlibrary_vault.addParameter_vault("@acPassword", SqlDbType.NVarChar, txtEncryptedCode.TextLength, txtEncryptedCode.Text)
    classlibrary_vault.addParameter_vault("@acKeyFile", SqlDbType.NVarChar, txtKeyFile.TextLength, txtKeyFile.Text)
    classlibrary_vault.addParameter_vault("@acLastLogin", SqlDbType.NVarChar, txtLastLogin.TextLength, txtLastLogin.Text)
    classlibrary_vault.addParameter_vault("@acLastModified", SqlDbType.NVarChar, txtLastModified.TextLength, txtLastModified.Text)
    Try
        objcommand_vault.ExecuteNonQuery()
        txtAccountName.Text = txtName.Text
        'Set controls
        _Main.NotifyIcon.Visible = True
        _Main.NotifyIcon.ShowBalloonTip(1, Application.ProductName, VAULT_CREATED, ToolTipIcon.Info)
        Me.ParentForm.Controls.Remove(Me)
        controlManagePasswords()
    Catch ex As Exception
        DevComponents.DotNetBar.MessageBoxEx.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Information)
    End Try
End Sub 
```

起初，当我的`wvAccount`桌子上有一个主键时，我没有遇到任何问题，但现在我不断收到

> *数据库不能为 null、空字符串或只有空格的字符串。*

我创建数据库没有问题，唯一困扰我的是当我尝试在`wvAccount`. 顺便说一句，我正在使用 SQL Server CE 4.0 和 VB.Net

该`.wv`扩展允许我以前在我的数据库上读写，所以可能没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:19:36.993

自己解决了。我忘记启动用于创建数据库的相同连接字符串，而是将连接字符串用于不同的数据库。让我哑口无言。我现在真的要睡觉了。

`Dim ds As String = "Data Source=" + (My.Computer.FileSystem.SpecialDirectories.MyDocuments) + "\" + (Application.ProductName) + "\" + (DBName) + ".wv" + ";Persist Security Info=True;"`

# java - 在 WebView 完全加载后执行任务

> ID：12540044
> 
> 赞同：15
> 
> 时间：2012-09-22T01:51:32.137
> 
> 标签：java, javafx, webview, javafx-2

`WebEngine`是否可以在完成加载后自动运行任务？我知道我可以得到一个`Worker`from`WebEngine`来指示加载进度，但似乎反复轮询`Worker`不是一个优雅的解决方案（即锁定程序直到页面加载）。我知道我可以用 a 来做到这一点`Task`，所以我能`Task`以某种方式获得 for`WebEngine`并在完整命令上添加一个执行吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-22T03:34:55.793

基于[WebView 文档](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)的示例：

```
webView.getEngine().getLoadWorker().stateProperty().addListener(
  new ChangeListener<Worker.State>() {
  @Override
  public void changed(
    ObservableValue<? extends Worker.State> observable,
    Worker.State oldValue, Worker.State newValue ) {

    if( newValue != Worker.State.SUCCEEDED ) {
      return;
    }

    // Your logic here
  }
} ); 
```

* * *

作为 lambda 表达式：

```
webView.getEngine().getLoadWorker().stateProperty().addListener(
  (ObservableValue<? extends Worker.State> observable,
    Worker.State oldValue,
    Worker.State newValue) -> {
    if( newValue != Worker.State.SUCCEEDED ) {
      return;
    }

    // Your logic here
  } ); 
```

* * *

如果您只想收听下一页加载而不是每个后续页面加载，请在页面加载后停止收听。

为此，您可以在开始执行后删除监听器（在监听器代码中）：

```
webview.getEngine().getLoadWorker().stateProperty().addListener(
  new ChangeListener<Worker.State>() {
    @Override
    public void changed(
                ObservableValue<? extends Worker.State> observable,
                Worker.State oldValue, Worker.State newValue) {
      switch (newValue) {
        case SUCCEEDED:
        case FAILED:
        case CANCELLED:
          webview
            .getEngine()
            .getLoadWorker()
            .stateProperty()
            .removeListener(this);
      }

      if (newValue != Worker.State.SUCCEEDED) {
        return;
      }

      // Your logic here
      System.out.println("page loaded");
    }
  } ); 
```

# ios - 如何为 armv7s 构建 Facebook iOS sdk？

> ID：12540045
> 
> 赞同：5
> 
> 时间：2012-09-22T01:52:21.643
> 
> 标签：ios, xcode, facebook

是否可以构建 facebook ios sdk 来支持 armv7s（Apple A6 cpu）？我已经尝试使用 build_framework.sh 再次重建，它仍然不支持 armv7s！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:08:51.433

我编译了源代码并在[http://db.tt/QpIjMfWb](http://db.tt/QpIjMfWb)上分享了它。在 fb 更新 SDK 后将被移除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:41:52.073

我今天刚刚关注了这个链接：http: [//developers.facebook.com/bugs/107674376052717](http://developers.facebook.com/bugs/107674376052717) 它说他们将推出一个新的更新来解决这个问题。尝试下载最新的源代码并重新编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T00:34:28.843

检查最新的 3.1 SDK，应该可以解决这个问题。

# php - 在 PHP 中将 foreach 转换为 for

> ID：12540046
> 
> 赞同：0
> 
> 时间：2012-09-22T01:52:35.733
> 
> 标签：php

```
foreach ( $this->parent->get_sections(null, $this->parent->author) as $section)
{
  //...
} 
```

我想做的是强制循环`$section`按我想要的顺序输出每个。每个`$section`人的名字都可以通过`$section->name`. 假设我想先输出`$section`“Section 2”，然后输出“Section 1”（而不是按 的顺序`foreach`）。我怎么能强迫它这样做？我认为正确的方法是一个`for`循环，每次都检查部分名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T01:58:40.713

The proper way would be sorting the results when you call `parent->get_sections()`. How you would do this is entirely up to the implementation of that class and method. Changing this `foreach` to `for` for the sake of sorting seems like a code smell to me.

* * *

For the sake of answering the question as technical as possible.

```
$sections = $this->parent->get_sections(null, $this->parent->author);
$num_sections = count($sections);
for ($i = 0; $i < $num_sections; $i++) {
    // what you do here is up to you $sections[$i]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T02:00:07.927

Especially if you are not aware of the specific number of sections, you could use `usort()` to do a dynamic custom sort on the `get_sections()`-returned array or object and then utilize the existing code. (This is a little more elegant, imo, than doing the same in a for/foreach loop).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T01:58:32.117

```
 $section = $this->parent->get_sections(null, $this->parent->author);
  echo $section[2]->name; 
  echo $section[1]->name;//just output the indexes the way you want 
```

if you want it sorted, in say descending order, you can sort it that way and then use a `for` loop to display.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T02:20:51.640

不知道你的代码结构，我会做类似的事情。

```
// Get Org Sections
$sections = $this->parent->get_sections(null, $this->parent->author);

// Loop thru sections to get an array of names
foreach ( $sections as $key=>$section)
{ 
$sorted_sections[$section->name] = $key;
}

// Sort Array
//ksort — Sort an array by key
//krsort — Sort an array by key in reverse order
krsort($sorted_sections);

foreach ( $sorted_sections as $section)
{ 
// Orig Code
} 
```

# maven - Maven 构建 - SoX / 音频转换

> ID：12540048
> 
> 赞同：1
> 
> 时间：2012-09-22T01:53:16.153
> 
> 标签：maven, audio, build, sox

我正在使用 Maven 作为构建工具，并试图将大量手动流程转换为简化的流程。

我有一个 Web 应用程序，它使用当前在部署时通过 SoX 任务运行的音频文件：[http](http://sox.sourceforge.net/) ://sox.sourceforge.net/将它们转换为所需的采样率和目标文件夹。（使用 .bat 文件的手动步骤）

是否有将音频构建组件集成到 Maven 构建中的插件或简化方法？

我曾考虑过使用嵌入的 Ant 脚本，但不确定这是否是正确的方向。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:00:52.697

It is not difficult to create your own Maven plugin (Mojo). Take a look at the [Mojo Developers Cookbook](http://docs.codehaus.org/display/MAVENUSER/Mojo+Developer+Cookbook)

[*Edit* ] I should also mention that you could run the `.bat` script using the [Exec Maven Plugin](http://mojo.codehaus.org/exec-maven-plugin/exec-mojo.html) as a less portable alternative. The [`exec` plugin source code](http://mojo.codehaus.org/exec-maven-plugin/source-repository.html) is also a good place to start were you to write your own SoX plugin.

# objective-c - iOS 6 模拟器

> ID：12540050
> 
> 赞同：3
> 
> 时间：2012-09-22T01:53:39.613
> 
> 标签：objective-c, cocos2d-iphone

我下载了 iOS6 的 xcode 和模拟器。现在，当我运行我的 cocos2d 项目时，屏幕不跟随设备转动。它总是保持在“向上”位置，而它过去总是保持在“正确”位置。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:37:48.540

iOS 6 引入了一种新机制来指定支持的界面方向；[请参阅UIViewController 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)中的“处理视图旋转” 。

简短的版本是，除非您[`-supportedInterfaceOrientations`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)在视图控制器上实现以进一步限制选项，否则将使用您在 Info.plist 中指定的任何方向。

所以很可能你想在 Xcode 项目导航器的左上角点击你的项目，在右侧内容的左侧栏中选择你的目标，然后在那里选择“摘要”并确保你只有选择横向右方。

例如

![在此处输入图像描述](../Images/0efdb3d0c75f19f0509763c113fe85f8.png)

# memory-leaks - 如何修复 Redis “内存泄漏”

> ID：12540051
> 
> 赞同：4
> 
> 时间：2012-09-22T01:53:43.833
> 
> 标签：memory-leaks, redis, restart, dotcloud

我在 dotcloud 上使用了一个 redis 内存存储，但尽管密钥过期，它的 used_memory 永远不会再次下降。使用redis-cli`flushdb`或`flushall`从 redis-cli 不会导致 used_memory 从它的 ~20Mb 下降。我在 RedisToGo 上遇到了同样的问题。

任何人都知道我如何设法填补它？我怎样才能避免这样做？也许有些字符不应该放入 redis 值或键中？我将它与 EM 和来自 heroku rails 应用程序的 resque 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:52:32.430

Redis 也有一个`mem_fragmentation_ratio`（例如：2.5），因此使用这两个值可能会导致更准确的测量。在非常低的`used_memory`级别（例如：接近零），碎片可能非常高，为了缓解这种情况，您需要手动停止/启动 redis 实例。

RedisToGo 可能以这种方式报告*实际*内存使用情况，作为`used_memory`x的组合`mem_fragmentation_ratio`。

# objective-c - ARC 的内存泄漏

> ID：12540056
> 
> 赞同：7
> 
> 时间：2012-09-22T01:54:23.603
> 
> 标签：objective-c, ios, memory, memory-leaks, automatic-ref-counting

```
+(void)setup {
    UIImage* spriteSheet = [UIImage imageNamed:@"mySpriteSheet.png"];
    CGRect rect;
    animation = [NSMutableArray arrayWithCapacity:numberOfFramesInSpriteSheet];
    int frameCount = 0;

    for (int row = 0; row < numberFrameRowsInSpriteSheet; row++) {
        for (int col = 0; col < numberFrameColsInSpriteSheet; col++) {
            frameCount++;
            if (frameCount <= numberOfFramesInSpriteSheet) {
                rect = CGRectMake(col*frameHeight, row*frameWidth, frameHeight, frameWidth);
                [animation addObject:[UIImage imageWithCGImage:CGImageCreateWithImageInRect(spriteSheet.CGImage, rect)] ];
            }
         }
    }
} 
```

在启用 ARC 的情况下编译上述代码。分析工具报告可能存在内存泄漏，因为 imageWithCGImage:: 返回 UIImage 计数 +1，然后引用丢失。Leaks Instrument 报告根本没有内存泄漏。这里发生了什么？

此外，由于 ARC 禁止使用手动使用`release`ect，如何修复泄漏？

感谢任何可以提供任何建议的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T02:00:34.343

ARC 不管理 C 类型，其中 CGImage 可以考虑。完成后必须手动释放 ref`CGImageRelease(image);`

```
+(void)setup {
    UIImage* spriteSheet = [UIImage imageNamed:@"mySpriteSheet.png"];
    CGRect rect;
    animation = [NSMutableArray arrayWithCapacity:numberOfFramesInSpriteSheet];
    int frameCount = 0;

    for (int row = 0; row < numberFrameRowsInSpriteSheet; row++) {
        for (int col = 0; col < numberFrameColsInSpriteSheet; col++) {
            frameCount++;
            if (frameCount <= numberOfFramesInSpriteSheet) {
                rect = CGRectMake(col*frameHeight, row*frameWidth, frameHeight, frameWidth);
                //store our image ref so we can release it later
                //The create rule says that any C-interface method with "create" in it's name 
                //returns a +1 foundation object, which we must release manually.
                CGImageRef image = CGImageCreateWithImageInRect(spriteSheet.CGImage, rect)
                //Create a UIImage from our ref.  It is now owned by UIImage, so we may discard it.
                [animation addObject:[UIImage imageWithCGImage:image]];
                //Discard the ref.  
                CGImageRelease(image);
            }
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T06:23:02.487

核心基础数据结构都没有处理 ARC。很多时候，这会产生问题。在这种情况下，我们必须手动释放内存。

# json - Data::Dumper 中是否有与 Perls 的 Dumper() 方法等效的 Go 语言？

> ID：12540057
> 
> 赞同：11
> 
> 时间：2012-09-22T01:54:39.877
> 
> 标签：json, xml, perl, go

我查看了标题非常相似的帖子（[Data::Dumper 中是否有一个 C 等效于 Perls 的 Dumper() 方法？](https://stackoverflow.com/questions/1098327/is-there-a-c-equivalent-to-perls-dumper-method-in-datadumper)），关于 C 等效于`Data::Dumper::Dumper();`. 我对 Go 语言有类似的问题。

我是一名 Perl 狂热者，也是一名编程爱好者，`Data::Dumper`每天使用类似的后代数百次。我开始学习 Go，因为它看起来是一门有趣且有趣的语言，它可以让我摆脱 Perl 的陈规陋习，同时让我看到做事的新方法......其中一件事我真正想要的是这样的：

```
fmt.Println(dump.Dumper(decoded_json)) 
```

查看生成的数据结构，例如`Data::Dumper`将 JSON 转换为哈希数组。在 Go 中看到这一点，将帮助我了解如何构建和使用数据。在我学习围棋的过程中，这样的事情会被认为是一个重要的瞬间。

**与C**对应文章中的陈述相反，我相信我们可以写这个，因为我会将 Dumper 传递给 Println，在编译完任何 JSON 字符串或 XML 页面后，我传入并解码。我应该能够看到解码的结果，处于类似 Dumper 的状态......那么，还有没有人知道存在这样的事情？或者也许有一些指针可以完成这样的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T02:09:16.637

嗨，欢迎来到我自己是前 perl 黑客。

至于您的问题， encoding/json 包可能是您发现的最接近 go data 漂亮打印机的包。我不确定你是否真的需要它。Data::Dumper 在 perl 中非常棒的原因之一是因为很多时候你真的不知道你正在使用的数据的结构，而不用肉眼检查它。尽管一切都是特定的类型，并且每个特定的类型都有特定的结构。如果您想知道数据会是什么样子，那么您可能只需要查看它的定义。

您应该查看的其他一些工具包括：

*   `fmt.Println("%#v", data)`将以 go-syntax 形式打印数据。
*   `fmt.Println("%T", data)`将以 go-syntax 形式打印数据的类型。
*   此处记录了更多 fmt 格式字符串选项：http: [//golang.org/pkg/fmt/](http://golang.org/pkg/fmt/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-31T19:33:59.443

我找到了几个包来帮助在 Go 中可视化数据。

我个人最喜欢的 - [https://github.com/davecgh/go-spew](https://github.com/davecgh/go-spew)

还有 - [https://github.com/tonnerre/golang-pretty](https://github.com/tonnerre/golang-pretty)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-22T02:11:25.533

我不熟悉 Perl 和 Dumper，但根据我对您的帖子和相关 C 帖子（以及函数的名称！）的理解，它输出数据结构的内容。

您可以使用[fmt 包](http://golang.org/pkg/fmt/)的 %v 动词来执行此操作。我假设您的 JSON 数据被解码为结构或映射。using`fmt.Printf("%v", json_obj)`将输出值，而 %+v 将添加字段名称（对于结构 - 如果它的映射没有区别， %v 将同时输出键和值），并且 %#v 也将输出类型信息。

# iphone - 无法将对象添加到返回 nil 的可变数组

> ID：12540061
> 
> 赞同：2
> 
> 时间：2012-09-22T01:55:00.327
> 
> 标签：iphone, objective-c, xcode, nsmutablearray

我正在做一个应用程序，但我无法获得一个可变数组来接受对象。我尝试设置断点以查看发生了什么，但它一直说可变数组为零。有人有答案吗？我的代码：

```
- (void)save:(id) sender {

    // All the values about the product
    NSString *product = self.productTextField.text;
    NSString *partNumber = self.partNumberTextField.text;
    NSString *price = self.priceTextField.text;
    NSString *quantity = self.quantityTextField.text;
    NSString *weigh = self.weighTextField.text;
    NSString *file = [self filePath];

    //Singleton class object
    Object *newObject = [[Object alloc] init];
    newObject.product = product;
    newObject.partNumber = partNumber;
    newObject.price = price;
    newObject.quantity = quantity;
    newObject.weigh = weigh;

    //Array declaration
    mutableArray = [[NSMutableArray alloc]initWithContentsOfFile: file];
    [mutableArray addObject:newObject];
    [mutableArray writeToFile:file atomically:YES];

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T05:18:51.727

虽然 initWithContentsOfFile: 可以在 NSMutableArray 上调用，但它是从 NSArray 继承的。返回值是一个不可变的 NSArray。如果要将对象添加到可变数组，则必须执行以下操作：

```
mutableArray = [[[NSMutableArray alloc] initWithContentsOfFile: file] mutableCopy];
[mutableArray addObject:newObject];
[mutableArray writeToFile:file atomically:YES]; 
```

现在， addObject: 调用应该可以工作了。

此致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T02:02:30.373

`[NSMutableArray initWithContentsOfFile:]` [returns nil by default if the file can't be opened or parsed](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/initWithContentsOfFile%3a). Are you sure the file you're loading exists and is formatted correctly?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:51:24.530

尝试检查断点

```
mutableArray = [[NSMutableArray alloc]initWithContentsOfFile: file]; 
```

线。`mutableArray`如果它向您显示`__NSArrayI`这意味着它是一个不可变数组，即您无法更新它，并且如果它向您显示`__NSArrayM`这意味着它是一个可变数组并且您可以更新这个数组，请将您的光标移到上面。在您的情况下，您将获得不可变数组，这就是您无法更新它的原因。所以你有两种方法可以从此文件中获取可变数组 -

**方法：1**

```
mutableArray = [[[NSMutableArray alloc] initWithContentsOfFile: file] mutableCopy]; 
```

**方法：2**

```
NSArray *anyArray = [[NSArray alloc]initWithContentsOfFile: file];
mutableArray = [[NSMutableArray alloc]initWithArray:anyArray]; 
```

在这两种情况下都`mutableArray`将是一个可变数组。你可以更新它。

# javascript - Javascript 导航输出（缩小）

> ID：12540063
> 
> 赞同：0
> 
> 时间：2012-09-22T01:55:54.717
> 
> 标签：javascript, jquery

我有一个页面，我输出以下内容

这是我模板中的 html

```
<ul id="process"><span>Process: </span> 
```

这是我缩小的 Javascript (functions.js)

```
$(window).load(function () {
    var a = $("#slider").children("img");
    currentIndex = 0;
    slideCount = a.length;
    fadeDuration = 1E3;
    navigation = $("#process");
    navCnt = 0;
    navNumFix = 1;
    for (i = 0; i < slideCount; i++) navigation.append('<li><a href="#" class="navItem" data="' + navCnt+++'">' + navNumFix+++"</a></li>&#32;");
    $(".navItem").click(function () {
        var b = $(this).attr("data"),
            c = currentIndex;
        currentIndex = b;
        c != currentIndex && ($(a[c]).fadeOut(fadeDuration), $(a[currentIndex]).fadeIn(fadeDuration))
    })
}); 
```

对于我的滑块，这都输出 ul 标记并通过 Javascript 附加列表项，如下所示：

```
<ul id="process"><span>Process: </span>
<li><a href="#" class="navItem" data="0">1</a></li>
<li><a href="#" class="navItem" data="1">2</a></li> 
</ul> 
```

而不是在我的模板中输出 ul 标签，我怎样才能仅在脚本调用它时输出 ul 标签？有点像上面的列表项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:32:29.857

这应该这样做......首先将您的模板显示为无，然后在添加列表元素后显示它：

```
<ul style="display:none" id="process"><span>Process: </span></ul> 
```

Javascript：

```
$(window).load(function () {
    var a = $("#slider").children("img");
    currentIndex = 0;
    slideCount = a.length;
    fadeDuration = 1E3;
    navigation = $("#process");
    navCnt = 0;
    navNumFix = 1;
    for (i = 0; i < slideCount; i++) navigation.append('<li><a href="#" class="navItem" data="' + navCnt+++'">' + navNumFix+++"</a></li>&#32;");
    $(".navItem").click(function () {
        var b = $(this).attr("data"),
            c = currentIndex;
        currentIndex = b;
        c != currentIndex && ($(a[c]).fadeOut(fadeDuration), $(a[currentIndex]).fadeIn(fadeDuration))
    })

    // Display the ul if there are slides
    if(slideCount > 0)
       navigation.show();
}); 
```

**编辑：**添加了仅在有幻灯片时才显示 ul 的条件

# java - 测试游戏算法速度

> ID：12540064
> 
> 赞同：0
> 
> 时间：2012-09-22T01:56:02.783
> 
> 标签：java, algorithm, testing, artificial-intelligence

我应该如何在速度方面测试我的算法？我制作的增强算法和原始算法搜索相同的深度并且它们都给出相同的移动，它们仅在速度方面有所不同。

你知道我应该如何测试我制作的新算法吗？除了将它开始的系统时间减去它结束的系统时间之外。我想说的是我需要用一点公式做一些正式的测试。我是否应该模拟所有可能的动作并计算每个算法（增强的和原始的）花费时间来决定一个动作？我在这里很无知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:09:45.777

我已经使用以下方法几次并取得了成功。如果您对多线程基准测试感兴趣，请参阅页面底部的链接。

**使用 CPU、系统和用户时间** 为单线程任务计时 使用 CPU、系统和用户时间为单线程任务计时

*   “用户时间”是运行应用程序自己的代码所花费的时间。

*   “系统时间”是代表您的应用程序（例如 I/O）运行操作系统代码所花费的时间。

Java 1.5 引入了 java.lang.management 包来监控 JVM。包的入口点是 ManagementFactory 类。它的静态方法返回各种报告 JVM 信息的不同“MXBean”对象。一个这样的 bean 可以报告线程 CPU 和用户时间。

调用 ManagementFactory 。getThreadMXBean() 获取描述当前 JVM 线程的 ThreadMXBean。bean 的 getCurrentThreadCpuTime() 方法返回当前线程的 CPU 时间。getCurrentThreadUserTime() 方法返回线程的用户时间。这两个报告时间都以纳秒为单位（但请参阅有关时间和（缺乏）纳秒精度的附录）。

不过，请务必先调用 isCurrentThreadCpuTimeSupported()。如果它返回 false（罕见），则 JVM 实现或操作系统不支持获取 CPU 或用户时间。在这种情况下，您将重新使用挂钟时间。

```
import java.lang.management.*;

/** Get CPU time in nanoseconds. */
public long getCpuTime( ) {
    ThreadMXBean bean = ManagementFactory.getThreadMXBean( );
    return bean.isCurrentThreadCpuTimeSupported( ) ?
        bean.getCurrentThreadCpuTime( ) : 0L;
}

/** Get user time in nanoseconds. */
public long getUserTime( ) {
    ThreadMXBean bean = ManagementFactory.getThreadMXBean( );
    return bean.isCurrentThreadCpuTimeSupported( ) ?
        bean.getCurrentThreadUserTime( ) : 0L;
}

/** Get system time in nanoseconds. */
public long getSystemTime( ) {
    ThreadMXBean bean = ManagementFactory.getThreadMXBean( );
    return bean.isCurrentThreadCpuTimeSupported( ) ?
        (bean.getCurrentCpuTime( ) - bean.getCurrentThreadUserTime( )) : 0L;
} 
```

这些方法返回自线程启动以来的 CPU、用户和系统时间。要在线程启动后对任务进行计时，请在任务之前和之后调用其中的一个或多个并获取差值：

```
long startSystemTimeNano = getSystemTime( );
long startUserTimeNano   = getUserTime( );
... do task ...
long taskUserTimeNano    = getUserTime( ) - startUserTimeNano;
long taskSystemTimeNano  = getSystemTime( ) - startSystemTimeNano; 
```

取自[http://nadeausoftware.com/articles/2008/03/java_tip_how_get_cpu_and_user_time_benchmarking#TimingasinglethreadedtaskusingCPUsystemandusertime](http://nadeausoftware.com/articles/2008/03/java_tip_how_get_cpu_and_user_time_benchmarking#TimingasinglethreadedtaskusingCPUsystemandusertime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T02:16:16.707

这是一个捕获时间的示例程序，您可以根据需要进行更改：

```
package com.quicklyjava;

public class Main {

/**
 * @param args
 * @throws InterruptedException
 */
public static void main(String[] args) throws InterruptedException {
    // start time
    long time = System.nanoTime();
    for (int i = 0; i < 5; i++) {
        System.out.println("Sleeping Zzzz... " + i);
        Thread.sleep(1000);
    }

    long difference = System.nanoTime() - time;
    System.out.println("It took " + difference + " nano seconds to finish");

 }

} 
```

这是输出：

```
Sleeping Zzzz... 0
Sleeping Zzzz... 1
Sleeping Zzzz... 2
Sleeping Zzzz... 3
Sleeping Zzzz... 4
It took 5007507169 nano seconds to finish 
```

# c - 在不同的目录中打开文件。在 C 中导致分段错误？

> ID：12540067
> 
> 赞同：2
> 
> 时间：2012-09-22T01:56:17.710
> 
> 标签：c, arrays, unix, segmentation-fault, text-files

我正在尝试从与 Unix 平台上的当前目录不同的目录中读取文本文件“P1-Data”，并创建 GPA 数组以使用 C 语言计算平均 GPA。

这是名为“P1-Data”的文本文件：

```
 Mark Bhatia 852600012  3.23
    Larry Burch 123236399  2.94
    Howard Huge 234123456 3.00
  # Andrew Jackson 123321123 4.00
    Lee David 666656666 3.02
    Norden Bruce 432156978 3.75
    Price Jones 121256435 2.75
    Rountree Travis 123123132 2.89
    Volek Volek 101100100 3.05
  # Fine Students 000000121 4.0
    John Bhatia 952600012  3.93
    Jangla House 123457890 2.03 
  # Tee David 666656667 3.42
  # Moriarty Hodges 898888999 2.04
    Wonder Druce 332156978 3.78
    Price Hones 121256435 2.75
    Flattree Travis 123123134 3.95
    Drew Pete 101100101 3.05 
```

它位于目录：home/.../class1/.../.../P1-DATA

这是名为“stage1.c”的 C 代码，它给了我错误（用 Notepad++ 编写）：

```
 #include <stdio.h>
    #include <math.h>

    int main(int argc, char* argv[]){

    int i = 0;
    float sum = 0.00, n = 0.00, avg = 0.00;

    FILE *fin;

    fin = fopen("P1-DATA", "r");

    // Keep reading in integers (which are placed into "n") until end of file (EOF)
    while(fscanf(fin, "%lf", &n) != EOF){
    // Add number to sum
    sum += n;

    // Increment counter for number of numbers read
    i++;

    // Average is sum of numbers divided by numbers read
    avg = (sum / i);
    }

    // After the loop is done, show the average
    printf("The average is %lf.\n", avg);

    fclose(fin);

    return 0;
    } 
```

这位于目录：home/.../class2/s/name/.../stage.c（**主要点不同的目录**）

我还注意到，我在尝试打开的文件名中放入什么并不重要。我仍然遇到分段错误。所以我想在那之前我错过了一些东西。也许我需要切换到“P1-DATA”文件所在的目录？？如果是这样..我不确定如何在 C 中做到这一点。任何帮助将不胜感激。另外，我的日程安排有点紧……这只是我需要做的第一部分。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T02:20:27.133

你对这条线有一个严重的问题：

```
while(fscanf(fin, "%lf", &n) != EOF){ 
```

因为`n`是 a`float`而不是 a `double`。因为您正在尝试将 64-bit`double`写入 32-bit `float`，所以所有赌注都已关闭（未定义的行为）。

该标准规定，`l`前缀“指定……后面`a`的 , `A`, `e`, `E`, `f`, `F`, `g`, 或`G`转换说明符适用于类型指针指向`double`“的参数。

对于 a `float`，您应该只使用`%f`. 或者你可以把你所有的浮点类型都变成`double`——我很少再使用这种`float`类型了。

* * *

此外，*检查*使用它们指示错误的函数的返回值（连同`errno`）被认为是一种很好的做法。如果`fopen`失败，`fin`则将设置为`NULL`，然后尝试使用它来读取数据将是一个坏主意。就像是：

```
#include <errno.h>
:
fin = fopen("P1-DATA", "r");
if (fin == NULL) {
    printf ("Error %d opening input file\n", errno);
    exit (1);
} 
```

会做。有更友好的方法可以做到这一点，但这至少会让你知道是否发生了错误以及错误是什么。

* * *

根据您的评论，这会给您一个错误代码 2 (ENOENT)，这是因为该文件不存在。您需要*在*运行程序时位于数据文件所在的目录中，或者在`fopen`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T03:14:40.513

您可以将其指定为命令行参数，而不是在代码中指定数据文件的名称。

```
#include <err.h>
#include <stdio.h>

if (argv[1] == NULL)
    err(1, "usage: %s datafile", argv[0]);

if ((fin = fopen(argv[1], "r")) == NULL)
    err(1, "Could not open \"%s\"", argv[1]); 
```

（注意从`fopen()`上面检查返回值。）

然后，您可以使用数据文件的路径作为命令行参数调用您的程序：

```
% ./a.out /path/to/the/data/file 
```

另请注意，您的数据文件似乎比简单的浮点数列表具有更多的结构。尝试使用简单的`"%f"`格式字符串解析该数据不太可能奏效。

# javascript - ajax表单提交后手动重置jquery stars插件

> ID：12540068
> 
> 赞同：0
> 
> 时间：2012-09-22T01:56:31.247
> 
> 标签：javascript, jquery

我目前在我的 rails 应用程序上使用[jQuery Stars 插件。](http://www.fyneworks.com/jquery/star-rating/)我正在使用 ajax 提交包含这些星星的表单，因此在成功提交后页面不会重新加载并且星星不会重置。如何清除这些持久星，以便表单完全重置并准备好下一次提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:48:44.733

原来你需要做的就是这个

```
$('input.star').rating('select', false) 
```

使用 Kishore 的方法，如果您将鼠标悬停在星星上，星星将再次显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T02:28:38.300

看起来没有直接的方法可以清除星星

如果您单击清除开始，请查看此[小提琴，所有星星都被清除。](http://jsfiddle.net/BxTvW/)

所以在你的情况下，如果表单在成功函数中成功提交，请添加此代码

```
$('.ratings').find('input[type=radio]').attr("checked", false);
$('.star-rating-control').find('.star-rating-live').removeClass('star-rating-on'); 
```

您可能必须`ratings`用您正在使用的适当的类替换类。

# android - 在 Eclipse 中添加库时出现 Jar 不匹配错误

> ID：12540071
> 
> 赞同：10
> 
> 时间：2012-09-22T01:57:30.693
> 
> 标签：android, eclipse, jar, shared-libraries, android-viewpager

我是 Android 新手，我正在尝试按照[本教程](http://blog.stylingandroid.com/archives/537)的指示为 viewPagerIndicator 添加一个库。但是，当我添加库时，我收到一条错误消息：

```
Versions found are:
Path: C:\Users\Bryan\workspace\MyPager\libs\android-support-v4.jar
Length: 349252
SHA-1: 612846c9857077a039b533718f72db3bc041d389
Path: C:\Users\Bryan\git\Android-ViewPagerIndicator\library\libs\android-support-v4.jar
Length: 271754
SHA-1: 53307dc2bd2b69fd5533458ee11885f55807de4b
Jar mismatch! Fix your dependencies 
```

如何在不弄乱构建路径的情况下解决此问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-22T03:23:04.557

看起来它找到了两次图书馆。你需要删除一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T08:25:22.430

您正在使用支持库的两个不同版本。**删除所有支持库 jar**并将它们**重新复制**到您的应用程序（以及任何其他依赖项，如果有）。

**android-support-v4.jar 将**自动再次编译。

编辑：应删除**Java 构建路径**中**库**索引中的**Android 依赖项和 Android 私有库**

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T10:23:10.393

尝试从您的 Android 项目中删除不必要的 libs 文件夹的 .jar 文件。****

# java - Proxy Object for getting System Time

> ID：12540073
> 
> 赞同：5
> 
> 时间：2012-09-22T01:57:55.790
> 
> 标签：java, guava

There is a pretty cool concept of a [Ticker](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Ticker.html) in Guava. Unfortunately, it seems like it was designed around generating nano-second focused Stopwatches for measuring execution durations.

I'd like to find something to use like this because, it makes testing classes sensitive to time changes easier. I have run into an issue historically when I used `System.currentTimeMillis()` because its hard to simulate the passage of time in a test. I was thinking of using a similar interface to what Guava has but measuring times in millis instead since that matches more of the available libraries.

I wanted to ask if anyone has seen something similar or has other suggestions before I go write it myself.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T04:32:47.947

正如您所指出的，`Ticker`是用于测量*经过*的时间（`System.nanoTime()`用途），而不是挂钟时间（`System.currentTimeMillis()`用途），您不应该使用它来获取它。

我建议创建一个抽象`Clock`类，`Ticker`但要以毫秒为单位获取挂钟时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T07:15:53.487

这就是我在项目中使用的：

```
public interface Clock {
    LocalDate today();
    LocalTime time();
    LocalDateTime now();
    long timestamp();
} 
```

正如您所说，它使单元测试变得更加简单（甚至可能）。我有一个实现，它总是返回真正的时间和一个`FakeClock`我可以控制的。它的实现非常简单，你可以轻松地自己动手——我认为 Guava 中没有类似的东西。

这种方法也在[越来越多的面向对象软件，由测试指导](http://www.growing-object-oriented-software.com/)中描述和推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T03:26:38.213

编辑：经过进一步思考，我喜欢 Christoph 和 Colin 的建议。为挂钟提供类似功能的想法会很好。

正如所指出的，这里最好的策略可能只是实现一个从 Ticker 读取毫秒时间的方法。

# android - How should onClick Listener by defined and instantiated for an Activity

> ID：12540074
> 
> 赞同：0
> 
> 时间：2012-09-22T01:58:10.527
> 
> 标签：android

My Activity has multiple lists so I have defined MyClickListener as below:

My question is how I should instantiate this class:

```
 MyClickListener mMyClickListener = new MyClickListener(); 
```

Or maybe it is better to instantiate inside the onCreate(Bundle) and just define above. Whats considered the better way? I don't want too much in onCreate() its already full of stuff. Any thoughts on the declaration and instatiation? Whats the best way?

```
private class MyClickListener implements OnClickListener
{

    @Override
    public void onClick(View view) {

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:05:46.890

I use same kind of class mechanism as you mentioned in the question.

this is the way i use,

```
public class myActivity extends Activity
{
    private MyListener listener = null;

    private Button cmdButton = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

                cmdButton = (Button) findViewById(R.id.cmdButton);
                cmdButton.setOnClickListener(getListener());

    }

    // method to fetch the listener object
    private MyListener getListener() 
    {
        if (listener == null) 
        {
            listener = new MyListener();
        }
        return listener;
    }

       private class MyListener implements Button.OnClickListener 
       {
             public void onClick(View v) 
             {
             }
       }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T03:34:54.997

你为什么要首先实例化一个这样的监听器？当您将它分配给您的 listView 时，只需创建一个新的。

```
listView.setOnClickListener( new MyListener()); 
```

# javascript - setTimeout runs faster on iPad vs PC

> ID：12540077
> 
> 赞同：2
> 
> 时间：2012-09-22T01:58:20.240
> 
> 标签：javascript, ios

I'm creating an HTML5 web app meant for the iPad, but which can also be run in a PC browser. I'm using the javascript function setTimeout to synchronize some screen transitions with an audio file playing in the background.

Specifically, the code I'm using is:

```
setTimeout(showStartScreen, 30000);
setTimeout(showInstructionScreen, 60000); 
```

On a PC the timing is perfect and the transition matches up with the audio fine. On an iPad 2, the transition is about a half second faster than on the PC. ON an iPad 3, the transition is even faster.

Is there a more reliable way to time something across different platforms?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T02:03:18.137

Rather than creating a timeout and hoping that the timer keeps in sync, you should poll the audio's `currentTime` and act on it.

```
setInterval(function() {
    var now = audio.currentTime;
    // do something based on the audio's position.
},25); 
```

This assumes you are using HTML5 `<audio>` elements.

# list - Haskell: Splitting a list into 2 at index k

> ID：12540078
> 
> 赞同：8
> 
> 时间：2012-09-22T01:58:23.380
> 
> 标签：list, haskell, split

I'm pretty new to Haskell, and I'm having a little trouble. I'm trying to implement a function that takes a list, and an int. the int is supposed to be the index k at which the list is split into a pair of lists. The first one containing the first k elements of the list, and the second from k+1 to the last element. Here's what I have so far:

```
split :: [a] -> Int -> ([a], [a])
split [] k = error "Empty list!"
split (x:[]) k = ([x],[])
split xs k | k >= (length xs) = error "Number out of range!"
           | k < 0 = error "Number out of range!" 
```

I can't actually figure out how to do the split. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-22T02:26:43.697

首先，请注意您尝试构建的函数已经在标准库中，在`Prelude`- 它被称为`splitAt`. 现在，直接看它的定义是令人困惑的，因为有两种算法，一种根本不使用标准递归结构`splitAt n xs = (take n xs, drop n xs)`- 一种是手动优化的，使它变得丑陋。前者更直观，因为您只需将前缀和后缀放在一对中。然而，后者教导更多，并具有以下整体结构：

```
splitAt :: Int -> [a] -> ([a], [a])
splitAt 0 xs     = ([], xs)
splitAt _ []     = ([], [])
splitAt n (x:xs) = (x:xs', xs'')
  where
    (xs', xs'') = splitAt (n - 1) xs 
```

基本思想是，如果一个列表由一个头和一个尾组成（它的形式是`x:xs`），那么从索引 k+1 开始的列表将与从 k 开始的列表相同第一个元素 - `drop (k + 1) (x : xs) == drop k xs`。要构造前缀，您同样删除第一个元素，取一个较小的前缀，然后将元素重新粘贴到 - 上`take (k + 1) (x : xs) == x : take k xs`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T23:30:06.467

那这个呢：

```
splitAt' = \n -> \xs -> (take n xs, drop n xs) 
```

一些测试：

```
> splitAt' 3 [1..10]
> ([1,2,3],[4,5,6,7,8,9,10])

> splitAt' 0 [1..10]
> ([],[1,2,3,4,5,6,7,8,9,10])

> splitAt' 3 []
> ([],[])

> splitAt' 11 [1..10]
> ([1,2,3,4,5,6,7,8,9,10],[])

> splitAt' 2 "haskell"
> ("ha","skell") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T10:51:11.323

在构建列表时摆脱二次行为的一个常见技巧是向后构建它，然后反转它，修改 Mark Reed 的解决方案：

```
split xs k | k < 0 = error "Number out of range!"
split xs k = (reverse a, b)
  where
    (a,b) = ssplit [] xs k

ssplit p xs 0 = (p, xs)
ssplit p (x:xs) k = ssplit (x:p) xs (k-1)
ssplit p [] k = error "Number out of range!" 
```

ssplit 中的错误检查很好，因为除非存在实际错误，否则不会检查（早期模式之一将匹配）。

在实践中，您可能希望向 ssplit 添加一些严格性注释以管理堆栈增长，但这是进一步的改进。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T02:21:12.233

基本上，您需要某种方式在递归列表时传递部分进度。我使用了第二个接受累加器参数的函数；它从 split 中调用，然后递归调用自身。几乎可以肯定有更好的方法..

**编辑：**删除了所有长度检查。但我相信使用`++`意味着它仍然是 O(n^2)。

```
split xs k | k < 0 = error "Number out of range!"
split xs k = ssplit [] xs k

ssplit p xs 0 = (p, xs)
ssplit p (x:xs) k = ssplit (p++[x]) xs (k-1)
ssplit p [] k = error "Number out of range!" 
```

获取原始帖子中的行为或

```
ssplit p [] k = (p,[]) 
```

获得标准`splitAt`函数的更宽容的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T02:29:59.737

见`splitAt`前奏：

```
ghci> :t flip splitAt
flip splitAt :: [a] -> Int -> ([a], [a])
ghci> flip splitAt  ['a'..'j'] 5
("abcde","fghij") 
```

# git - Git：如何仅将跟踪的文件推送到远程

> ID：12540081
> 
> 赞同：0
> 
> 时间：2012-09-22T01:58:41.073
> 
> 标签：git, push, versioning, dropbox, git-remote

我在 SO 上看到了这个问题的许多变体，但没有一个有我想要的。说我有一个回购`~/MyRepo/`：

```
$ ls -a ~/MyRepo
code.r junk.txt .git 
```

在`MyRepo`只有文件`code.r`被跟踪，而`junk.txt`不是被跟踪。`~/Dropbox/MyShare/`并假设我有一个朋友可以访问的遥控器（例如在 Dropbox 上） （仅用于阅读）。目的是让这个遥控器只包含我*最新**提交的版本*，`code.r`而不包含. 我正在尝试实现以下目标：每当我*提交*时，我都希望能够使用提交的.*`junk.txt` *`code.r``~/Dropbox/MyShare/code.r``~/MyRepo/code.r`**

 **我知道`.gitignore`但对这条路线不感兴趣，因为我有几个我想忽略的未跟踪文件，我只想将我正在跟踪的文件“推送”到远程。我也尝试过`cloning`进入`~/Dropbox/MyShare/`但克隆或拉取的方法似乎总是包含*跟踪*和*未跟踪*的文件，从而污染了我的遥控器。

我目前的解决方案是有一个 post-commit 钩子，`~/MyRepo/.git/hooks/`它具有明确的命令，可以将所有“我关心的文件”单独复制到远程。我不喜欢这个解决方案，因为“我关心的文件”可以改变，而且我不必去更新 post-commit 钩子。

我希望有一种方法可以`~/Dropbox/MyShare/`通过 git 命令的某种组合自动使最后提交的版本可用。我不介意每次提交时都执行一个手动“推送”命令`~/MyRepo/`。

这是我根据以下答案之一尝试过的，但我仍然很难过。

```
# create my repo
mkdir foo
cd foo
git init
touch fileA fileB fileC
git add fileA
git commit -m 'new'

# now create remote 
mkdir ../foo_remote
cd ../foo_remote
git init
cd ../foo
git remote add foo_remote ../foo_remote

bash-3.2$ git remote -v                                                                                                                                                                                                                                                         
foo_remote      ../foo_remote (fetch)                                                                                                                                                                                                                                           
foo_remote      ../foo_remote (push) 
```

现在，当我尝试推送时，我收到了这条平均错误消息：

```
bash-3.2$ git push foo_remote master                                                                                                                                                                                                                                            

Counting objects: 3, done.                                                                                                                                                                                                                                                      
Writing objects: 100% (3/3), 207 bytes, done.                                                                                                                                                                                                                                   
Total 3 (delta 0), reused 0 (delta 0)                                                                                                                                                                                                                                           
Unpacking objects: 100% (3/3), done.                                                                                                                                                                                                                                            
remote: error: refusing to update checked out branch: refs/heads/master                                                                                                                                                                                                         
remote: error: By default, updating the current branch in a non-bare repository                                                                                                                                                                                                 
remote: error: is denied, because it will make the index and work tree inconsistent                                                                                                                                                                                             
remote: error: with what you pushed, and will require 'git reset --hard' to match                                                                                                                                                                                               
remote: error: the work tree to HEAD.                                                                                                                                                                                                                                           
remote: error:                                                                                                                                                                                                                                                                  
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to                                                                                                                                                                                                
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into                                                                                                                                                                                                
remote: error: its current branch; however, this is not recommended unless you                                                                                                                                                                                                  
remote: error: arranged to update its work tree to match what you pushed in some                                                                                                                                                                                                
remote: error: other way.                                                                                                                                                                                                                                                       
remote: error:                                                                                                                                                                                                                                                                  
remote: error: To squelch this message and still keep the default behaviour, set                                                                                                                                                                                                
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.                                                                                                                                                                                                  
To ../foo_remote                                                                                                                                                                                                                                                                
 ! [remote rejected] master -> master (branch is currently checked out)                                                                                                                                                                                                         
error: failed to push some refs to '../foo_remote' 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T02:01:21.793

如果您不添加文件，为什么要将其推送到远程 - 简单的答案不要将文件添加到您不想推送的本地存储库。

要么将文件放入存储库中，要么不要 - DVCS 的重点是在任何地方都有相同的文件。

我会再看一下 .gitignore 它的工作原理-如果您不想共享它，您可以将其保留在本地并且不将其包含在 repo 中-这是此文件的唯一目的，而且您似乎不想使用它奇怪的。有点像说我想编译 C 文件但我不想使用编译器

```
mkdir foo
cd foo
git init
touch fileA fileB fileC fileD
git add fileA
git commit -m "New file"
git push 
```

只有 fileA 会被推送

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T02:08:41.087

这并不能直接回答您的问题，但评论也有点长，我还是想分享它。它可能会帮助一些人摆脱我所感受到的痛苦。

所以我的经验建议是：

不要混合使用 Dropbox 和 github 存储库。

我为此被烧了几次，几乎每个生成的文件都有冲突。

我现在总是将我的 github（即 rails）项目保存在不同的文件夹中。

我创建`~/Dropnot`这个不同文件夹的名称。
和往常一样，我在我的`.bash_aliases`文件中创建了一个别名，在这种情况下`alias not='cd ~/Dropnot'`

然而，当我设置一台新机器时，我经常使用 Dropbox/xfer 文件夹快速进行一次设置以传输我所有的 Dropnot 文件（为此，我将它们复制到另一台机器上）。
接下来，我使用 fetch/pull/push 来更改该目录下的各种 repos。**

# c# - Is there any PHP/Java equivalent of the purely file-based MSSQL db of .net?

> ID：12540083
> 
> 赞同：1
> 
> 时间：2012-09-22T01:59:23.357
> 
> 标签：c#, java, php, .net, database

Am a big fan of the file-based .mdf db of .net which fits the bill just right in terms of portability and ease of implementation for small/medium projects and independent small-scale modules of larger applications.

So is there a similiar thing in PHP/Java?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:02:44.080

You could try SQLite: [http://php.net/manual/en/intro.sqlite.php](http://php.net/manual/en/intro.sqlite.php)

> SQLite is not a client library used to connect to a big database server. SQLite is the server. The SQLite library reads and writes directly to and from the database files on disk.

Features of SQLite: [http://sqlite.org/features.html](http://sqlite.org/features.html)

# iphone - IPhone get current system time zone based time from RubyOnRails time format

> ID：12540084
> 
> 赞同：0
> 
> 时间：2012-09-22T01:59:42.577
> 
> 标签：iphone, ruby-on-rails-3.1, nsdateformatter, nstimezone

> **Possible Duplicate:**
> [Converting an ISO 8601 timestamp into an NSDate: How does one deal with the UTC time offset?](https://stackoverflow.com/questions/5185230/converting-an-iso-8601-timestamp-into-an-nsdate-how-does-one-deal-with-the-utc)

I am writing an iPhone app, which brings time from Ruby on Rails web service. The time string i get from JSON response has following format. "2012-12-01T01:01:00Z" I want to get system time zone based time from this. How can I do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:31:06.430

如果您需要您的时间在服务器和应用程序上匹配，您只需设置用于将 JSON 日期字符串转换为 NSDate 的日期格式化程序的时区，以便在您从 Web 服务获取时使用 GMT。所以你的日期格式化程序应该像这样初始化：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"YYYY-MM-dd'T'HH:mm:ss'Z'"];
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
```

然后从 JSON 中获取您的日期字符串并使用它创建一个日期：

```
NSDate *dateFromServer = [dateFormatter dateFromString:[json valueForKey:@"created_at"]]
// Do something with dateFromServer like save it to CoreData 
```

然后，稍后，当您想显示该日期时，只需创建另一个日期格式化程序，您想用它来显示您本地时间的日期。NSDate 将默认为系统时区，它应该显示正确的时间。

```
NSDateFormatter *displayDateFormatter = [[NSDateFormatter alloc] init];
[dispalyDateFormatter setDateFormat:@"MMM dd, YYYY"]; // ex. Jul 21, 2012

NSDate *dateFromCoreData = [managedObject valueForKey:@"CreatedAt"];
NSString *dateString = [displayDateFormatter stringFromDate:dateFromCoreData];
// Display your date string in a UILabel or Table View Cell, etc. 
```

此致。

# java - Java - Singleton pattern for mysql connection pool - too many connections

> ID：12540088
> 
> 赞同：0
> 
> 时间：2012-09-22T02:00:34.000
> 
> 标签：java, mysql, singleton, tomcat7, connection-pooling

I wrote the code below - I want the DataSource to be a singleton and use the enum idiom for the singleton. I am getting a lot of `Data source rejected establishment of connection, message from server: "Too many connections"` after some time - is my implementation of the Singleton pattern wrong or the cause is somewhere else ?

```
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.sql.DataSource;

class DBConnectionPool {

    private DataSource ds = null;

    private DBConnectionPool() {
        try {
            Context context = new InitialContext();
            Context envctx = (Context) context.lookup("java:comp/env");
            ds = (DataSource) envctx.lookup("jdbc/TestDB");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static enum PoolSingleton {
        POOL_INSTANCE;

        private static final DBConnectionPool singleton = new DBConnectionPool();

        private DBConnectionPool getSingleton() {
            return singleton;
        }
    }

    private static DBConnectionPool getDBConnectionPoolInstance() {
        return PoolSingleton.POOL_INSTANCE.getSingleton();
    }

    static Connection getConnection() {
        try {
            return getDBConnectionPoolInstance().ds.getConnection();
        } catch (SQLException e) {
            e.printStackTrace();
            return null;
        }
    }
} 
```

For completeness sake here are the contents of context.xml :

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/myapp">
    <Resource name="jdbc/TestDB" auth="Container" type="javax.sql.DataSource"
        maxActive="100" maxIdle="30" maxWait="10000" username="root"
        password="root" factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
        driverClassName="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/mydb"
        removeAbandoned="true" removeAbandonedTimeout="60" />
</Context> 
```

**NB :** I am not implementing a connection Pool ! I use the tomcat factory. What I do is wrapping the pool in a Class. The pool is the `ds` object I think is instantiated only once. I do close the connections +sets + statements in a finally block. Example use :

```
public User findByUsername(String username) throws DBExFailure {
        Connection conn = DBConnectionPool.getConnection();
        PreparedStatement statement = null;
        ResultSet set = null;
        final String query = "SELECT * FROM users WHERE username=?";
        if (conn != null) {
            try {
                statement = conn.prepareStatement(query);
                statement.setString(1, username);
                set = statement.executeQuery();
                while (set.next()) {
                    User user = new User();
                    // user.setId(set.getInt("ID"));
                    user.setUsername(set.getString("username"));
                    user.setName(set.getString("name"));
                    user.setSurname(set.getString("surname"));
                    user.setPassword(set.getString("password"));
                    user.setEmail(set.getString("email"));
                    user.setRole(RolesENUM.values()[set.getInt("role")]);
                    return user;
                }
            } catch (SQLException ex) {
                ex.printStackTrace();
                throw new DBExFailure();
            } finally {
                DBConnectionPool.closeResources(set, statement, conn);
            }
        }
        return null;
    } 
```

Where :

```
static void closeResources(ResultSet set, Statement statement,
        Connection conn) {
    if (set != null) {
        try {
            set.close();
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
    }
    if (statement != null) {
        try {
            statement.close();
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
    }
    if (conn != null) {
        try {
            conn.close();
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T02:34:15.187

我不得不说，写一个的正确方法是不写一个：使用现有的库，如[C3P0](http://java-source.net/open-source/connection-pools/c3p0)

这也不意味着是一个“聪明的裤子”答案。这只是一个“不要重新发明轮子”的方法，尤其是线程安全池实现，它很难正确执行，并且通常会创建一个与线程相关的、微妙且难以修复的错误的雷区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T02:46:09.087

您的池很浅 - 它只有一个连接！这将如何扩展？

您已经硬连线了 JNDI 名称。为什么不传进去？

这对于多线程应用程序来说不是很好。连接不是线程安全的。

你得到的最好的建议是“不要这样做”。使用现有池。或者，更好的是，内置在您的 Java EE 应用服务器中的那个。

# .htaccess - .htaccess 导致 403 - 我该如何解决这个问题？

> ID：12540090
> 
> 赞同：1
> 
> 时间：2012-09-22T02:00:50.473
> 
> 标签：.htaccess

我有一个网站，我将 phpbb3 包装在 wordpress 中。它工作得很好，尽管当我将此安全建议添加到我的 .htaccess 时：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_METHOD} ^(HEAD|TRACE|DELETE|TRACK) [NC]
RewriteRule ^(.*)$ - [F,L]
RewriteCond %{QUERY_STRING} \.\.\/ [NC,OR]
RewriteCond %{QUERY_STRING} boot\.ini [NC,OR]
RewriteCond %{QUERY_STRING} tag\= [NC,OR]
RewriteCond %{QUERY_STRING} ftp\:  [NC,OR]
RewriteCond %{QUERY_STRING} http\:  [NC,OR]
RewriteCond %{QUERY_STRING} https\:  [NC,OR]
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|%3D) [NC,OR]
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(\[|\]|\(|\)|<|>|ê|"|;|\?|\*|=$).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(&#x22;|&#x27;|&#x3C;|&#x3E;|&#x5C;|&#x7B;|&#x7C;).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(%24&x).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(%0|%A|%B|%C|%D|%E|%F|127\.0).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(globals|encode|localhost|loopback).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(request|select|insert|union|declare).* [NC]
RewriteCond %{HTTP_COOKIE} !^.*wordpress_logged_in_.*$
RewriteRule ^(.*)$ - [F,L]
</IfModule> 
```

当用户尝试在某些论坛页面上使用搜索表单时，它会导致 403 错误。这是搜索的呈现方式（例如）：

```
<div class="search-box">
<form method="post" id="forum-search" action="./search.php?fid[]=5">
<fieldset>
<input class="inputbox search tiny" type="text" name="keywords" id="search_keywords" size="20" value="Search this forum…" onclick="if (this.value == 'Search this forum…') this.value = '';" onblur="if (this.value == '') this.value = 'Search this forum…';" />
<input class="button2" type="submit" value="Search" />
<input type="hidden" value="5" name="fid[]" />
</fieldset>
</form>
</div> 
```

以“禁止”的形式返回。当我取出 .htaccess 的那一部分时，它工作正常。我知道有关 .htaccess 的基本知识，但无法弄清楚为什么该代码会导致 HTML/PHP 的该部分出现 403。

任何想法将不胜感激...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:38:38.160

它导致 403，因为您在 htaccess 中返回 403，`F`重写规则中的标志就是这样。

您想要这样做可能是有原因的。第一条规则通过 HEAD、TRACE、DELETE 和 TRACK 方法阻止请求。第二条规则阻止带有一堆可能的查询字符串的请求，并且*如果您缺少**wordpress_logged_in** cookie*。因此，如果您没有名为**wordpress_logged_in_**的 cookie ，那么您将得到 403。

# java - count incrementer is wrong

> ID：12540091
> 
> 赞同：0
> 
> 时间：2012-09-22T02:01:06.153
> 
> 标签：java

My assignment calls for the line number to be display with the output. The professor suggested I do it with a counter and as seeing Java doesn't have an easy way to print out the current line number, I just created a counter as suggested. The below code is as follows:

```
 //Count Increment
    for (count = 1; count<= 5; count++)
    {

    }   

    //Display information
    System.out.println(count + "." + " " + "Street:"+ " " + streetName + " " +  "#" + streetNumber);
    System.out.println(count + "." + " " + "Total Rooms:"+ " " + numofRooms);
    System.out.println(count + "." + " " + "Total Area:"+ " " + totalSqFt + " sq.ft");
    System.out.println(count + "." + " " + "The price per Sq. Ft is " + "$" + priceperSqFt);
    System.out.println(count + "." + " " + "The estimated property value is "+ "$" + estimatedPropertyvalue); 
```

However, the output starts the line counter at six as demonstrated here:

```
6\. Street: park avenue #44
6\. Total Rooms: 5
6\. Total Area: 2500.0 sq.ft
6\. The price per Sq. Ft is $120.4
6\. The estimated property value is $301000.0 
```

Removing the brackets doesn't help either. How can I get the line count to correctly state 1,2,3,4,5?

**Please ask for clarification if needed!!** Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:06:31.607

您的打印在 for 循环之外。当计数器为“6”时，您的 for 循环结束，即退出 for 循环。这个变量不会改变，所以当前值为“6”，这就是为什么它总是在你的代码下面打印“6”。如果要打印每条指令的行号，可以执行以下操作：

```
 count = 0;
        System.out.println(++count + "." + " " + "Street:"+ " " + streetName + " " +  "#" + streetNumber); 
```

“++count”，你在写一行的时候增加变量，在第一种情况下它应该打印 1 然后 2 等等。希望这有帮助:)

该循环不是必需的，因为您只计算每行一次。如果您将这些行放在一个从 0 到 5 的循环中，您将计算每行 5 次。由于您只需要计算每一行一次，因此您不需要循环，而只需我之前提到的简单增量。希望这可以清除为什么不需要循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T02:11:30.300

```
class Print{

    static int lineno = 0;

    private int static getLineNo(){
        lineno = lineno + 1;
        return lineno;
    }
}

//Display information
System.out.println(Print.getLineNo() + "." + " " + "Street:"+ " " + streetName + " " +  "#" + streetNumber);
System.out.println(Print.getLineNo() + "." + " " + "Total Rooms:"+ " " + numofRooms);
System.out.println(Print.getLineNo() + "." + " " + "Total Area:"+ " " + totalSqFt + " sq.ft");
System.out.println(Print.getLineNo() + "." + " " + "The price per Sq. Ft is " + "$" + priceperSqFt);
System.out.println(Print.getLineNo() + "." + " " + "The estimated property value is "+ "$" + estimatedPropertyv 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T02:09:09.413

我假设您在此之上的某个地方有一个定义计数的行：

```
int count; 
```

因此，在 for 循环之后，您将 count 增加到 6，然后开始打印，count 位于 for 循环中最后一个递增的值。

因此，删除 for 循环并为每行输出预先增加 count 变量。

```
int count = 0;

//Display information
System.out.println( (++count) + "." + " " + "Street:"+ " " + streetName + " " +  "#" + streetNumber);

... 
```

# loops - Printing out a Diamond with nested for loops

> ID：12540101
> 
> 赞同：2
> 
> 时间：2012-09-22T02:03:16.327
> 
> 标签：loops, for-loop, nested

For my java class one of the exercises is to print out a diamond using nested for loops. In the exercise you need to use the minimum amount of outputs, while using nested for loops. The other stipulation is that each output can only output 1 character such as a single space, a single asterisk, or a single end line statement.

I've finished it but i was wondering if there was an easier way to do it, or if anyone has tips on cleaning up my code. It just seems like ended up writing way more than was needed. Any help and tips are greatly appreciated. :)

Here is what the end result needs to look like:

![](../Images/1575113647aca0681c7984f3cf2dcd3b.png)

Here is my code:

```
public class Diamond 
{
    public static void main(String args[])
    {
        int b = 11; // secondary asterisk loop counter
        int ac = 2; // asterisk count
        int sc = 5; // space count
        int elc = 2; // end line count
        int slc = 1; // space loop count
        int sslc = 1; // secondary space loop count

        for(int e = 1; e < elc && elc < 12;e++)
        {   
            if(elc <= 6)
            {
                for(int a = 1; a < ac; a++)
                {
                        for(;sc <= 5 && sc > 0; sc--)
                        {
                            System.out.print(" ");
                        }

                        System.out.print("*");
                }

                ac += 2;
                sc = 5 - slc;
                slc += 1;
            }

            else if (elc > 6)
            {
                ac -= 2;
                sc = 1;

                for (; b < ac ; b++)
                {

                    for(;sc <= sslc && sc > -2; sc++) 
                    {
                        System.out.print(" ");
                    }

                    System.out.print("*");
                }

                b = 1;
                sslc += 1;

            }
            if(elc != 6)
            {
                System.out.println();
            }

            elc += 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-30T07:34:07.287

```
public class ASultan
{
   public static void main(String[] args) {

    int size = 9;

    for (int i = 1; i < size; i += 2) {
        for (int k = size; k >= i; k -= 2) {
            System.out.print(" ");
        }
        for (int j = 1; j <= i; j++) {
            System.out.print("*");
        }
        System.out.println();
    }

    for (int i = 1; i <= size; i += 2) {
        for (int k = 1; k <= i; k += 2) {
            System.out.print(" ");
        }
        for (int j = size; j >= i; j--) {
            System.out.print("*");
        }
        System.out.println();
    }

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T02:12:50.480

您可以尝试将钻石的 4 个边缘写成方程式（例如 x+y=4；xy=2...）。然后只需对网格中的每个单元格进行嵌套循环，看看是否应该打印空格或星号。测试看起来像

如果 f1(x,y) 或 f2(x,y) 或 f3(x,y) 或 f4(x,y)：打印 '*' 否则打印 ' '

其中 f1,f2,f3,f4 是 4 条对角线的方程。

如果需要尽量减少要打印的字符数，要么使用数组进行准备，然后忽略尾随空格；或使用一些临时规则（比如每行只有 2 颗星，除了第一个和最后一个......）

# python - Python loop define limits trouble

> ID：12540103
> 
> 赞同：0
> 
> 时间：2012-09-22T02:03:18.633
> 
> 标签：python, for-loop, range

I am newbie in Python ... I am dealing with an array of 10 elements A[0,10] trying to do this loop:

```
for i in range(1, 9):
    C.append((A[i+1]-A[i-1])/2) 
```

to find the average value of each point...

afterwards If I wish to print the results :

```
print(i, A[i], C[i])
print(i, A[i], C[i-2]) 
```

the second print is only working, the first is not.. please why this? And I need also to define the first and the last value of C[1] and C[10] and I can't do that because the first value is the C[-2] which is C[9] ...

if someone has any idea how to solve it....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:38:59.043

It's not usual to iterate over python lists (and I assume you mean a `list`) by index. You're operating on pairs of items, so a more idiomatic way to do this would be:

```
for prev, next in zip(a, a[2:]):
    # do whatever 
```

Look up `zip` in the standard documentation. The two variables are assigned from the results of `zip` using *sequence assignment*, which is just where a comma-separated list of variables is bound to the elements of a sequence.

The second thing you're doing that is unidiomatic is to append to a list in a loop. This sort of thing is so common that python has a specific syntax for it:

```
[(next - prev)/2 for prev, next in zip(a, a[2:])] 
```

This is called a *list comprehension*. If you can't guess what that does after pasting it into the interpreter, read about it in the standard documentation and the many articles available via google.

That code in action;

```
>>> import random
>>> a = range(5,15)
>>> random.shuffle(a)
>>> a
[11, 5, 12, 14, 6, 7, 8, 13, 10, 9]
>>> [(next - prev)/2 for prev, next in zip(a, a[2:])]
[0, 4, -3, -4, 1, 3, 1, -2]
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T02:43:12.780

您使用对称差异来查找`C`，但边缘点 (0,9) 只有一个邻居。您可以通过使用边缘点的左右差异来修复它：

```
n = len(A) # 10 in your case
C = [0.] * n

if n > 1:
   C[0] = (A[1] - A[0]) / 2.
   C[-1] = (A[-1] - A[-2]) / 2.

for i in xrange(1, n-1):
    C[i] = (A[i+1] - A[i-1]) / 2. 
```

是否合适取决于您`C`以后希望如何使用该列表。

如果您需要`C[0] = C[1]`，那么它甚至更简单：

```
n = len(A)
C = [0.] * n

for i in xrange(1, n-1):
    C[i] = (A[i+1] - A[i-1]) / 2.

if n > 1:
   C[0] = C[1]
   C[-1] = C[-2] # for symmetry 
```

如果`n == 0`即A为空，则C为空。

如果`n == 1`即，A 正好有一个元素，那么 C 正好有一个元素：`C[0] = 0.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:29:13.357

Python 列表总是从 0 开始索引。如果你这样做

```
c = []         # c is a list
c.append(3)    # append 3 to the end of the list
print c        # => [3]
print c[0]     # => 3 
```

因此，您的代码将 (A[0]+A[2])/2 放入 C[0]，然后将 (A[1]+A[3])/2 放入 C[1]，以此类推。

您可能希望首先将 C 创建为包含适当数量的 0 的列表，例如

```
c = [0.]*10    # create a 10-item list

# calculate smoothed values from a
for i in xrange(1,9):
    c[i] = 0.25*a[i-1] + 0.5*a[i] + 0.25*a[i+2]

# clean up the ends
c[0] = 0.75*a[0] + 0.25*a[1]
c[9] = 0.25*a[8] + 0.75*a[9] 
```

# blackberry - isForeground() 与 onExposed 和 onObscured 之间的区别

> ID：12540104
> 
> 赞同：0
> 
> 时间：2012-09-22T02:03:53.343
> 
> 标签：blackberry, java-me, resources

`onClose()`当我通过覆盖函数将程序发送到后台时，我试图让我的程序使用更少的资源。我的第一步是停止它绘制文本和仪表字段。

我一直在阅读有关效率的文档， [“消除设备上不必要的处理”](http://docs.blackberry.com/en/developers/deliverables/23567/Efficiency_making_your_app_efficient_1383411_11.jsp#Efficiency_eliminating_unnecessary_processing_1383414_11)

> “您可以使用方法在屏幕不可见时停止动画或重新绘制屏幕，​​并在屏幕再次可见时恢复。您可以覆盖 Screen.onExposed()，当您的应用程序的屏幕位于显示器顶部时调用堆栈并显示给用户。您可以覆盖 Screen.onObscured()，当您的应用程序的屏幕未向用户显示或被另一个屏幕遮挡时调用。

我知道如果我使用`isForeground()`，如果我的应用程序在后台，它会阻止它绘画，但如果它被另一个应用程序遮挡，它会做同样的事情吗？使用起来似乎更简单`isForeground()`

```
private boolean isExposed;

protected void onExposed()
{
    isExposed = true;
}
protected void onObscured()
{
    isExposed = false;
}

public void batteryStatusChange(int status) 
{
    // TODO Auto-generated method stub
    if ((status & DeviceInfo.BSTAT_LEVEL_CHANGED) != 0)
    {
//is there a difference between the two if's?

        //if(isExposed)     
        //if(UiApplication.getUiApplication().isForeground())

        {
        batteryStatusField.setText(getBatteryLevel());
        bitGauge6.setValue(DeviceInfo.getBatteryLevel());
        }       

    }
}
    public boolean onClose()
{
    UiApplication.getUiApplication().requestBackground();
    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T07:41:58.743

一般来说，`isForeground()`它会告诉您您的**应用程序**是否在前台运行。但是，当您实现它时，该`isExposed`变量只会告诉您它所属的**屏幕**何时被暴露或隐藏（因为您在`Screen.onExposed()`and`Screen.onObscured()`方法中设置它）。

对于您的应用程序，也许您只有一个`Screen`子类？

大多数应用程序将有*许多*屏幕。因此，在这种情况下，`isExposed`变量只会告诉您是否正在显示*一个*（多个）屏幕。

如果您的应用程序只有一个`Screen`，那么任何一种技术都应该适合您。

但是，正如我在评论中所说，如果您发布的代码显示了您在回调中所做的**一切**`batteryStatusChange()`，那么我认为您真的不需要担心性能。考虑移动设备上的性能是件好事，但是您在该方法中进行的任何 UI 调用都不会产生任何显着的性能成本。

```
 batteryStatusField.setText(getBatteryLevel());
    bitGauge6.setValue(DeviceInfo.getBatteryLevel()); 
```

# haskell - 无法将预期类型 Int 与 Haskell 中的实际类型 Int -> Int 匹配

> ID：12540105
> 
> 赞同：2
> 
> 时间：2012-09-22T02:04:05.130
> 
> 标签：haskell

以下代码会产生错误：

```
power:: Int -> Int -> Int
power a b 
        | a ==0 || b == 0      = 0
        | otherwise   = power ((multiply a a) (b-1))

multiply:: Int -> Int -> Int
multiply a b
        | a <= 0        = 0
        | otherwise     = (multiply (a-1) (b)) + b 
```

返回的错误是

```
power.hs:6:25:
    Couldn't match expected type `Int' with actual type `Int -> Int'
    In the return type of a call of `power'
    Probable cause: `power' is applied to too few arguments
    In the expression: power (multiply (a a) b - 1)
    In an equation for `power':
        power a b
          | b == 0 = 0
          | otherwise = power (multiply (a a) b - 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T02:10:24.403

错误在表达式中`power ((multiply a a) (b-1))`。问题是额外的一对括号。您实际上只将一个参数传递给`power`，即`((multiply a a) (b-1))`. 这个表达式本身是无效的，因为`(multiply a a)`is的结果`Int`不能接受参数。

您应该将其重写为

```
| otherwise   = power (multiply a a) (b-1) 
```

# javascript - 为什么这不能在 Firefox、Chrome 或 Safari 上运行，但在 IE 上运行？

> ID：12540111
> 
> 赞同：2
> 
> 时间：2012-09-22T02:06:19.557
> 
> 标签：javascript, html

我是一名学生，无法理解为什么这不起作用。

```
function addedToCart(x)
            {
            alert( x.value + " has been added to cart\nPress OK to continue.");
            }

<a href="#" value="blue circle" onclick="addedToCart(this)"> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T02:11:22.887

因为`value`不是锚的**有效**`<a>`属性。它旨在用于表单元素，例如`input`或`select`。

更合适（并且具有有效标记）的解决方案是使用 HTML5`data-*`属性，然后`getAttribute`按照@Jeffrey Sweeney 的建议使用它来获取它：

```
<a href="#" data-value="blue circle" onclick="addedToCart(this)"> 
```

进而：

```
alert( x.getAttribute("data-value")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T02:08:53.700

尝试使用该`getAttribute`功能：

```
alert( x.getAttribute("value") + " has been added to cart\nPress OK to continue."); 
```

[https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:12:53.740

2 件事`value`不是本地财产，`<a`而且您不会关闭`</a>`

我希望下面的代码将帮助您理解一种使其工作的类似方法：

```
<script>
    function addedToCart(x) {
        alert(x.value + " has been added to cart\nPress OK to continue.");
    }
</script>

<a href="#" onclick="addedToCart(document.getElementById('txt1'))">blue circle</a>
<input type="text" id="txt1" value="some value"/> 
```

IE 也有自己的方式来解释 html，它的弊大于利，**因为****它**强制没有模式

# sql - SQL：排序查询

> ID：12540115
> 
> 赞同：0
> 
> 时间：2012-09-22T02:07:05.607
> 
> 标签：sql, ms-access

我在 Access 2010 中，正在尝试为以特定方式排序的查询创建排名或行号字段。我已经尝试过`Rank: DCount("id","[Query1]","id <= " & [id])`，但它忽略了我的查询排序，因为订单不是 ID 主键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:44:10.683

我已经看到了您的排序逻辑，似乎我设法通过创建一个附加查询（Temp）来根据它产生一个排名，其中包含一个包含所有排序函数子产品的列。此查询的代码应如下所示：

```
SELECT Table1.Code1, 
    Len(Mid([Code1] & "",1,IIf(InStr([Code1] & "","*")>0,InStr([Code1] & "","*")-1,Len([Table1].[Code1] & "")))) 
    & Mid([Code1] & "",1,IIf(InStr([Code1] & "","*")>0,InStr([Code1] & "","*")-1,Len([Table1].[Code1] & ""))) & 
    Val(Mid([Code1] & "",InStr([Code1] & "","*")+1)) & 
    CStr(Val(Mid([Code1] & "",InStr([Code1] & "","*")+1))) AS OrderCode1
FROM Table1
ORDER BY Len(Mid([Code1] & "",1,IIf(InStr([Code1] & "","*")>0,InStr([Code1] & "","*")-1,Len([Table1].[Code1] & "")))), 
    Mid([Code1] & "",1,IIf(InStr([Code1] & "","*")>0,InStr([Code1] & "","*")-1,Len([Table1].[Code1] & ""))), 
    Val(Mid([Code1] & "",InStr([Code1] & "","*")+1)), 
    CStr(Val(Mid([Code1] & "",InStr([Code1] & "","*")+1))), Table1.Code1; 
```

之后，如果您对这个额外的查询创建一个查询，并`DCount`在参数上使用带有“OrderCode1”列的`WHERE`函数，您应该得到一个顺序排名。像这样的东西：

```
SELECT Temp.Code1, DCount("Code1","[Temp]","OrderCode1 <= '" & [OrderCode1] & "'") AS Rank
FROM Temp; 
```

如果您仍然需要解决方案，您可以检查它是否有效！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T23:21:11.153

希望这可以帮助

```
SELECT ROW_NUMBER() OVER (ORDER BY OrderID) AS RowNo, OrderID FROM Orders 
```

# objective-c - 如何使所有视图仅纵向模式

> ID：12540124
> 
> 赞同：0
> 
> 时间：2012-09-22T02:09:02.073
> 
> 标签：objective-c, xcode, storyboard, mpmovieplayercontroller, ios6

我正在使用带有 xcode 4.5 的情节提要，在 iOS 6 上构建应用程序。我在 mpvideoviewcontroller 中有一个视频。当我观看视频时它会变成横向，但是对于所有其他视图（我喜欢歌曲和新闻），我如何使它成为所有其他选项卡的纵向？我只希望视频是横向的。有什么我想念的吗，我有。每个选项卡上的方向为纵向，在 xcode 项目摘要屏幕上我启用左右。我为那些我只想纵向显示的代码添加了这行代码。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
     return NO;
 } 
```

有什么建议么？

仅供参考：如果我在 Xcode 的摘要页面中将方向的摘要页面更改为仅纵向模式，则每个视图都是纵向的，并且我希望我的视频视图处于横向而不是纵向模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:43:25.387

iOS 6 在 AppDelegate 上支持这个

```
 - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
       // check if you are in video page --> return landscape
       return (isVideoPage)?UIInterfaceOrientationMaskAllButUpsideDown:UIInterfaceOrientationMaskPortrait;
    } 
```

希望有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T00:54:25.287

我想你可以做这样的事情，在我的代码中 prevLayer 是带有视频源的视图，因为这个对象是 AVCapture 类型，它具有 setOrientation，但是你可以做一个变换/旋转一定程度以匹配当前方向，希望它有帮助。

```
-(void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    switch ([[UIDevice currentDevice]orientation]) {
        case UIDeviceOrientationLandscapeLeft:
            [self.prevLayer setOrientation:AVCaptureVideoOrientationLandscapeRight];
            break;
        case UIDeviceOrientationLandscapeRight:
            [self.prevLayer setOrientation:AVCaptureVideoOrientationLandscapeLeft];
            break;
        default:
            [self.prevLayer setOrientation:AVCaptureVideoOrientationLandscapeLeft];
            break;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T03:52:58.543

将该方法更改为仅在纵向模式下返回 true：

```
- (BOOL)shouldAutorotateToInterfaceOrientation (UIInterfaceOrientation)interfaceOrientation {

    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

# c++ - Qt 在子项目中找不到文件

> ID：12540125
> 
> 赞同：2
> 
> 时间：2012-09-22T02:09:02.923
> 
> 标签：c++, qt, cppunit

所以，我正在尝试学习 CppUnit 测试。由于 CppUnit 需要它自己的`main`函数来运行测试，我想我会将我的测试套件移动到它自己的子项目中。如果整个哲学是错误的，请纠正我。然后我将把它推送到我的 Git 服务器并尝试在 Gerrit 触发器上在 Jenkins 中运行测试。最终，我正在尝试学习 Jenkins，我正在创建一个简单的项目来帮助我。但是，当我编译时，我遇到了很多与文件相关的问题，`JenkinsTestSuite`无法在`JenkinsTestMain`. 例如...

```
persontest.cpp:5:20: error: person.h: No such file or directory
In file included from persontest.cpp:7: 
```

我的（基本）目录结构是这样的......

JenkinsTest |-JenkinsTestMain |-JenkinsTestSuite

我的 JenkinsTest.pro 文件如下所示：

```
TEMPLATE = subdirs

SUBDIRS += \
    JenkinsTestSuite \
    JenkinsTestMain

CONFIG += ordered
SUBDIRS += JenkinsTestMain 
```

我的 JenkinsTestMain.pro 文件如下所示：

```
!include(../common.pri) {
    error(Couldn't find the common.pri file!)
}

QT       += core

QT       -= gui

TARGET = JenkinsTest
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp \
    person.cpp

HEADERS += \
        person.h 
```

我的 JenkinsTestSuite.pro 文件如下所示：

```
!include(../common.pri) {
    error(Couldn't find the common.pri file!)
}

QT       += core

QT       -= gui

TARGET = JenkinsTest
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp \
    persontest.cpp \

HEADERS += \
    persontest.h 
```

我的 common.pri 文件如下所示：

```
INCLUDEPATH += . ..
WARNINGS += -Wall

TEMPLATE = lib

UI_DIR = .uics
MOC_DIR = .mocs
OBJECTS_DIR = .objs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:12:26.613

JenkinsTestMain/ 不在 INCLUDEPATH 中，因此未找到 person.h。

在 JenkinsTestSuite.pro 中，您必须添加

```
INCLUDEPATH += ../JenkinsTestMain 
```

或者，在测试中使用#include。

我还建议为每个 INCLUDEPATH += 添加一个 DEPENDPATH +=，否则对 person.h 的更改不会触发 persontest.cpp 被重新编译，这会导致错误的行为和崩溃。

这里的另一个问题是 person.cpp 不是 JenkinsTest 的一部分。您必须为 JenkinsTest 再次编译 person.cpp，或者将该代码放入共享库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-29T17:07:08.517

OP 可能不是这种情况，但由于不同的原因，我遇到了同样的问题。

如果您的项目本身编译良好，但在构建为子项目时失败，则可能是由于另一个项目使用它并且在包含文件夹中丢失了某些内容。例如：如果项目 A 使用项目 B，而项目 B 依赖于文件 X，您可能会收到错误消息，指出项目 B 找不到文件 X，因为项目 A 的包含路径中没有它。（即使项目 B 包含它就好了）

在 qmake 中将依赖项添加到项目 A 的包含路径为我解决了这个问题。

# r - 我怎样才能使我的 R 会话香草？

> ID：12540138
> 
> 赞同：7
> 
> 时间：2012-09-22T02:11:43.670
> 
> 标签：r, environment

这是对上一个问题的后续说明，[如何确保同一服务器上不同用户之间的 R 环境一致？](https://stackoverflow.com/questions/12519273/how-can-i-ensure-a-consistent-r-environment-among-different-users-on-the-same-se)

我想从 R 中输入一个“香草”R 会话，例如，类似于我使用命令启动 R 时获得的结果`R --vanilla`。例如，我想编写一个不受特定用户自定义设置混淆的脚本。

特别是，我想要以下

*   不读取 R 历史、配置文件或环境文件
*   不会从以前的会话中重新加载数据或对象

`help("vanilla")`不返回任何内容，而且我对自定义设置的范围不够熟悉，不知道如何摆脱所有这些设置。

有没有办法进入新的香草环境？（`?new.env`似乎没有帮助）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T02:19:12.633

你不能只是让你当前的会话香草，但你可以像这样从 R 中开始一个新的香草 R 会话

```
> .Last <- function() system("R --vanilla")
> q("no") 
```

* * *

我认为您可能会按原样使用上述方法遇到问题，因为在 R 重新启动后，您的脚本的其余部分将不会执行。使用以下代码，R 将`.Last`在退出之前运行。  `.Last`将告诉它在不读取站点文件或环境文件的情况下重新启动，并且不打印启动消息。重新启动后，它将运行您的代码（以及进行一些其他清理）。

```
wd <- getwd()
setwd(tempdir())
assign(".First", function() {
  #require("yourPackage") 
  file.remove(".RData") # already been loaded
  rm(".Last", pos=.GlobalEnv) #otherwise, won't be able to quit R without it restarting
  setwd(wd)
  ## Add your code here
  message("my code is running.\n")
}, pos=.GlobalEnv)

assign(".Last", function() {
  system("R --no-site-file --no-environ --quiet")
}, pos=.GlobalEnv)
save.image() # so we can load it back when R restarts
q("no") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T12:46:21.773

恕我直言，*可重复的研究*和*互动会议*不能很好地结合在一起。您应该考虑编写从命令行调用的可执行脚本，而不是从打开的交互式会话中调用。在脚本的顶部，添加`--vanilla`到 shebang：

```
#!/path/to/Rscript --vanilla 
```

如果您的脚本需要读取输入（参数或选项），您可以使用`?commandArgs`两个包之一`getopt`或`optparse`从命令行解析它们。

如果用户确实需要在交互式会话中完成自己的工作，那么他仍然可以这样做并通过调用您的脚本`system()`：您的脚本仍将使用其自己的 vanilla 会话。传递输入和输出只是一些额外的工作。

# c++ - C ++参考变量范围问题

> ID：12540140
> 
> 赞同：1
> 
> 时间：2012-09-22T02:11:54.527
> 
> 标签：c++, scope, destructor

我试图弄清楚为什么我的 Tag 类的析构函数被调用

```
map<string, Tag>* TestLoader::loadCompoundTag()
{
    map<string, Tag>* compound = new map<string, Tag>();
    //Create locally scoped variable
    Tag tag;
    string tagName;
    do 
    {
        loadTag(tag, tagName);
            //Copies variable into map
        compound->insert(std::pair<string, Tag>(tagName, tag));
    //Tag destructor is called before debugger breaks on this line
    } while (tag.type != TAG_End);

    return compound;
}

void TestLoader::loadTag( Tag& tag, string& name )
{
    tag.i = 0;
    name = string("Test");
} 
```

谁能给我任何关于为什么在那里调用析构函数的想法？在循环的范围内没有定义任何变量，一个是在循环外创建的，另一个是在函数内创建的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:14:03.973

`Tag tag`返回时超出范围`loadCompoundTag()`，当这种情况发生时，它的析构函数被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T02:25:26.537

为了插入你正在创建一个临时的地图，

```
std::pair<string, Tag>(tagName, tag) 
```

在完整表达结束时，它被破坏了。

你不应该担心那个。如有必要，可以使用 来避免`emplace`，但不要担心。相反，请担心函数的结果类型：

*为什么需要动态分配的地图*？

我很确定您不会，即那是邪恶的过早优化。

因此，我强烈建议，专注于正确性，让编译器完成它的优化工作，然后写……

```
map<string, Tag> TestLoader::loadCompoundTag() const
{
    map<string, Tag> result;
    do 
    {
        Tag tag;
        string tagName;
        loadTag(tag, tagName);
        result->emplace( std::pair<string, Tag>( tagName, tag) );
    } while (tag.type != Tag::end);
    return result;
} 
```

很可能您甚至不需要让您的编译器进行优化，以便在此处获得返回值优化，这意味着显然本地`result`是在调用者提供的内存区域中构造的，因此不会为函数结果。

# php - 如何使用 array_multisort() 对这样的多维数组进行排序？

> ID：12540141
> 
> 赞同：2
> 
> 时间：2012-09-22T02:11:55.533
> 
> 标签：php, sorting, multidimensional-array

假设我们有一个这样的数组

```
array(2) {
  [2012]=>
  array(2) {
    [0]=>
    array(2) {
      ["file"]=>
      string(3) "aaa"
      ["mtime"]=>
      int(1347534106)
    }
    [1]=>
    array(2) {
      ["file"]=>
      string(3) "bbb"
      ["mtime"]=>
      int(1346293592)
    }
  }
  [2011]=>
  array(2) {
    [0]=>
    array(2) {
      ["file"]=>
      string(3) "ccc"
      ["mtime"]=>
      int(1316753224)
    }
    [1]=>
    array(2) {
      ["file"]=>
      string(3) "ddd"
      ["mtime"]=>
      int(1318671936)
    }
  }
} 
```

我希望这个数组按第一个索引 (2012,2011[,2010,...]) 降序排序，每个子数组（根数组的每个值）按 mtime 值降序排序，但我不知道如何将 array_multisort() 应用于这。我可以将第一个键作为“2012”传递，然后它将作为关联数组的键传递，但是如何按 mtime 排序呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:23:37.417

鉴于您的顶级数组是`$array`，您可以这样做：

```
krsort($array);
foreach ($array as &$arr) {
    uasort($arr, 'cmp');
}

function cmp($a, $b) {
    return $b['mtime'] - $a['mtime'];
}

var_dump($array); //to check results 
```

那应该做你想做的事。

**更新**：将 ksort 更改为 krsort 以获得 OP 想要的下降年份。

# java - Hadoop 使用 KeyValueTextInputFormat

> ID：12540145
> 
> 赞同：8
> 
> 时间：2012-09-22T02:12:42.733
> 
> 标签：java, hadoop, mapreduce, word-count

我使用 hadoop 1.0.1 做一些项目，我想让我的输入 .txt 文件成为我需要的“键”和“值”，比如：

如果我有一个`test.txt`文件并且文件内容是

> 1, 10 10

我想我可以使用 "KeyValueTextInputFormat" 并让 "," 成为分隔符，所以输入后，*键*是*"1"*，*值*是*"10 10"*。

但是，我得到的结果是所有信息都是关键，值是空的。我不知道问题出在哪里。

请给我一些帮助，谢谢！

这是示例代码：

```
public class WordCount{
    public class WordCountMapper extends Mapper<Text, Text, Text, Text>{  

        public void map(Text key, Text value, Context context) throws IOException, InterruptedException {
            context.write(value, value);
            context.write(key, key);
        }   
      }
    public static void main(String[] args) throws Exception {
        Configuration conf = new Configuration();
        conf.set("key.value.separator.in.input.line",",");
        String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
        if (otherArgs.length != 2) {
          System.err.println("Usage: wordcount <in> <out>");
          System.exit(2);
        }
        Job job = new Job(conf, "word count");
        job.setJarByClass(WordCount.class);
        job.setMapperClass(WordCountMapper.class);
        job.setInputFormatClass(KeyValueTextInputFormat.class);
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(Text.class);
        KeyValueTextInputFormat.addInputPath(job, new Path(otherArgs[0]));
        FileOutputFormat.setOutputPath(job, new Path(otherArgs[1]));
        System.exit(job.waitForCompletion(true) ? 0 : 1);
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T08:57:14.127

分隔符可以在属性名下指定`mapreduce.input.keyvaluelinerecordreader.key.value.separator`，默认分隔符是制表符`('\t')`。因此，在您的情况下，将行更改`conf.set("key.value.separator.in.input.line",",");`
为

```
conf.set("mapreduce.input.keyvaluelinerecordreader.key.value.separator",","); 
```

这应该可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T09:51:34.657

你正确地使用了这些东西。

[链接](http://www.unmeshasreeveni.blogspot.in/2014/09/can-we-change-default-key-value-input.html) 在运行当前代码时，输​​出就像

```
 10 10   10 10
1   1 
```

为什么会这样是因为

您正在发出 2 个键值对。

第一个键值对是*值值* ，第二个键值对是*键键*

这是正确的一个 *值是10，键是1*

```
public class WordCount{
    public class WordCountMapper extends Mapper<Text, Text, Text, Text>{  

        public void map(Text key, Text value, Context context) throws IOException, InterruptedException {
            context.write("key", key);              //prints key as 1
            context.write("value", value);          //prints value as 10 10
            System.out.println(key.toString());
            System.out.println(value.toString());
        }   
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T09:37:52.007

我刚刚尝试过，`KeyValueTextInputFormat`如果它们之间有一个选项卡，则采用键和值，否则它将把整行作为键，并且没有任何价值。

所以我们必须`1 10,10`使用`1, 10 10`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-24T12:12:17.570

输入文件被转换为键值对，并且将为所有这些对调用 map 函数。现在，在您的示例中，map 的输入将是某个键（可能是 1，因为它是文件中的行号），最重要的是您的值将是 1,10 10。

现在，您可以从映射器输出任何内容，只有在交换和排序映射器的所有输出后，才会进入减速器类的 reduce 函数。

因此，如果您从映射器输出 context.write(value) 并从减速器输出相同的内容，您将从所有文件中获得唯一的行。

我想我没有解释你想要什么，但这是 Hadoop Map-Reduce 中发生的基本事情。

# php - PHP文件不复制

> ID：12540151
> 
> 赞同：2
> 
> 时间：2012-09-22T02:14:15.690
> 
> 标签：php, file, upload, copy

我对以下代码的问题是`if(if(empty($fields['Remuse'])))`声明其他一切正常。我只把它放在一个 if 语句中，以使警告它是空的现在消失了，当有文件时它不会复制 - 在缓存和数据库中显示很好，为什么？

**问题：**

```
 $candidateuploaddir = _MYSITEDIR . '/downloads/refocus_candidates/';
        $candiatefilename = $fields['RenamedResume'];
        $candidatefile = $candidateuploaddir . $candiatefilename;

        if(empty($fields['Remuse']))
        {
                echo 'null';
        }else{
        copy($fields['Resume'],$candiatefilename);
        } 
```

**上传功能：**

```
function uploadResume()
{
    if (!isset($_FILES['UploadResume'])) return false;
    $uploaddir = _CACHEDIR.'/resumes/';
    /* create the upload folder if it does not already exist */
    CMS::RecursiveMkdir($uploaddir);
    $extension = CMS::getFileExtension(basename($_FILES['UploadResume']['name']));
    /* keep producing random filenames until we get a unique one */
    while (empty($filename) || CMS::fileExists($uploaddir.$filename)) {
        $filename = CMS::randomString(10).'.'.$extension;
    }

    $uploadfile = $uploaddir . $filename;

    if (move_uploaded_file($_FILES['UploadResume']['tmp_name'], $uploadfile)){

        return $uploadfile;
        //$uploadfile;
    } else {
        return false;
    }
} 
```

**在提交线上：**

```
$fields['Resume'] = CMS::either(CMS_Plugin_plugin_jobs_apply::uploadResume(), CMS::getFormData('Resume', false)); //upload resume to temporary location 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:22:36.850

是`if(if(empty($fields['Remuse'])))`还是`if(empty($fields['Remuse']))`？

**是`$fields['Remuse']`还是`$fields['Resume']`？**

* * *

```
if (empty($fields['Resume']))
{
    echo 'null';
}

else
{
    copy($fields['Resume'],$candiatefilename);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T14:52:29.360

尝试在和`/`之间添加。`$uploaddir``$filename`

# iphone - iPhone/iPad 应用方向

> ID：12540152
> 
> 赞同：2
> 
> 时间：2012-09-22T02:14:27.017
> 
> 标签：iphone, xcode, orientation

我的应用程序的 iPhone 版本支持`UIDeviceOrientationPortraitUpsideDown`和`UIDeviceOrientationPortrait`，但 iPad 版本支持所有方向。

在我的视图控制器中，我有这个：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation     {
    return YES;
} 
```

我的 Info.plist 文件有这个：

![在此处输入图像描述](../Images/f7b6611d8f2ca0c7543916eafd18ef60.png)

问题是当我将应用程序构建到我的 iPod 时，应用程序不会颠倒过来。iPad 将支持所有方向。

我尝试将`shouldAutorotateToInterfaceOrientation`所有内容一起删除，并且尝试了以下代码：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation = UIDeviceOrientationLandscapeLeft) && (interfaceOrientation = UIDeviceOrientationLandscapeRight) && (interfaceOrientation = UIDeviceOrientationPortraitUpsideDown) && (interfaceOrientation = UIDeviceOrientationPortrait);
} 
```

但是由于某种原因，颠倒是行不通的！有没有其他解决方案？

**编辑：使用 Xcode 4.5 iOS6**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T03:14:47.377

想通了，iOS6 SDK 使用`shouldAutorotate`所以这是我的新代码：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}

-(BOOL)shouldAutorotate {
     return YES;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:08:33.630

如果我理解正确，您希望 iPad 支持所有方向，而您希望 iPhone 仅支持倒置和纵向旋转。试试这个作为解决方案。（这是一种比你上面所做的更简单的方法）

```
 -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
          return YES;
     }

    else {
            return UIInterfaceOrientationIsPortrait(interfaceOrientation);
        }
 } 
```

我还想补充一点，您必须将其添加到每个单独的视图控制器中，以便它也可以旋转到另一个视图。

例如，假设我有 viewcontroller_1 和 viewcontroller_2，我必须进入控制器的两个 .m 文件并添加以下代码。如果您不这样做，它可能不会针对其中一个视图旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T06:16:17.697

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

此方法已**弃用**，`IOS 6`因此您可以使用以下方法代替它。

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

根据您返回方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:14:17.580

支持方向的另一种方法是继承 UINavigationController 并在其中添加方向代码

IE

```
//IOS 5
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return YES;
}
//IOS 6
- (BOOL)shouldAutorotate {
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

这对我有用，使用故事板

# java - 尝试使用 objectdraw 运行 java 程序时线程“主”错误中的异常

> ID：12540153
> 
> 赞同：1
> 
> 时间：2012-09-22T02:14:33.147
> 
> 标签：java, javac

底漆：

下周我将在 UCSD 开始一个 Java 课程，我们的教科书让我们下载一个名为[objectdraw.jar](http://eventfuljava.cs.williams.edu/library.html)的库，我们将在前两章中使用它。我下载了库并将其放在`java_libraries`我的`~/home/dev/`目录中名为的文件夹中。

我正在尝试在 Linux 上运行我的 Java 程序，但当我尝试运行它时出现错误。它编译得很好，但不运行。

为了编译，我从我的`TouchyWindow.java`文件所在的目录发出以下命令`~/dev/java/`：

```
javac -classpath ../java_libraries/objectdraw.jar TouchyWindow.java 
```

**注意：它编译时没有错误或警告。**

要运行该程序，我从我的`TouchWindow.class`文件所在的目录发出以下命令`~/dev/java/`：

```
java -classpath ../java_libraries/objectdraw.jar TouchyWindow 
```

当我尝试执行程序时，出现以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: /home/fhaddad78/dev/java/TouchyWindow
Caused by: java.lang.ClassNotFoundException: .home.fhaddad78.dev.java.TouchyWindow
        at java.net...
        at java.security...
        at java.net...
        at java.lang...
        at sun.misc...
        at java.lang...
Could not find the main class: /home/fhaddad78/dev/java/TouchyWindow. Program will exit. 
```

关于我的系统：

我正在使用 Iceatea Java SDK 在 Gentoo Linux 上执行此操作。我提到这一点是因为我不确定这是否会导致问题。

我是 Java 新手，不太确定这意味着什么，因为它找不到的文件位于它说找不到它的路径中。

**更新** 为了帮助说明程序，我将通过源代码，因为它只有几行。

```
// TouchyWindow.java

import objectdraw.*;
import java.awt.*;

public class TouchyWindow extends WindowController {
  public void onMousePress(Location point) {
    new Text("I'm Touched", 40, 50, canvas);
  }
  public void onMouseRelease(Location point) {
    canvas.clear();
  }
} 
```

objectdraw.jar 库文件处理我的源文件中可能缺少的任何内容。

**更新** 出于好奇，我启动了 Windows，安装了 Java SDK 和 Eclipse。创建了一个新项目，使用与上面相同的代码，并且所有编译和工作都没有任何问题。这对问题的可能指导有帮助吗？

**关于 objectdraw.jar 的更新**

*这可能是我的问题吗？*

以下内容来自教科书的网站。

将 objectdraw 用于应用程序而不是 applet 有一种简单的方法可以将 objectdraw 用于应用程序，该方法是 objectdraw 库 1.1 版和更高版本中新增的。在这些版本的 objectdraw 下，您可以使用名为 startController 的新方法将 WindowController（或 Controller）的扩展作为应用程序运行。此方法包含在 Controller 类中（因此由 WindowController 继承）。

要将本来是 applet 的程序转变为可以作为应用程序运行的程序，只需将以下方法添加到扩展 Controller 或 WindowController 的类中：

public static void main(String[] args) { new MyClassName().startController(400,400); }

在上面，MyClassName 是扩展 Controller 的类名称的占位符，而参数 (400,400) 指定所需的窗口大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:27:28.767

您需要将 .class 文件所在的目录添加到类路径中。

javac 的输出进入一个目录，我们称之为BUILD_DIR。将此构建目录添加到类路径

```
java -classpath ../java_libraries/objectdraw.jar:$BUILD_DIR TouchyWindow 
```

如果 TouchWindow 有一些包，您需要添加包开始的文件夹。在这种情况下，类名必须是 packagename.packagename.ClassName

该库希望您使用小程序。它说添加以下以作为程序运行

```
public static void main(String[] args) { 
   new MyClassName().startController(400,400); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T02:30:51.530

1.  从你的类路径中删除`.jar`文件（java将接受目录并`.jar`自动将所有文件归档）
2.  完全限定您的类 - 没有包，java 将假定它位于顶层（即没有包）

试试这个：

```
java -cp ../java_libraries com.mypackage.TouchyWindow 
```

# java - 接受正则表达式并生成 NFA (Java)

> ID：12540154
> 
> 赞同：3
> 
> 时间：2012-09-22T02:14:43.827
> 
> 标签：java, regex, parsing, nfa

我正在尝试编写一个程序，该程序将接受描述正则表达式的字符串。例如：

```
10(0U1)* 
```

其中 U 是联合运算符， * 是 Kleene 星（我们还看到了隐含的串联）。

我考虑过标记字符串的原子并基于运算符和操作数构建机器。我想用类似于这样的规则对每个原子进行算法操作：[http ://www.cs.may.ie/staff/jpower/Courses/Previous/parsing/node5.html](http://www.cs.may.ie/staff/jpower/Courses/Previous/parsing/node5.html)

我不确定如何以智能方式最好地解析这种类型的输入，以便我可以以编程方式构建 NFA。

我的程序的目标是接受上述输入并输出将由其 5-touple 描述的相应 NFA。非常感谢任何有关实现该目标的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:43:19.353

如果您可以使用外部库，最好让现代解析器生成器（例如[ANTLR](http://www.antlr.org/) ）完成所有解析工作，并为您的正则表达式提供一个抽象语法树，即使它是一种相对简单的语言。

否则，如果您需要从头开始编写它，则需要首先确定是否需要分词器（或“词法分析器”）。如果您的语言由单字符标记组成（如您的示例中所示），那么您可以安全地跳过编写标记器，而只需遍历字符串中的字符。然后你必须编写解析器，一个扫描令牌列表并构建语法树的大循环。

在任何情况下，您都应该得到这样的语法树，例如`10(0U1)*`：

![语法树](../Images/da2bc7fadd5a51e4623bd9c6c773eeee.png)

请注意，在语法树中，所有括号和隐式优先规则都消失了，它们被树的结构所取代。

之后，您必须递归地将树转换为 NFA 图。

**这是一种可能的方法**的粗略草图。

为每种语法节点类型编写翻译方法。该方法将以其开始和结束 NFA 状态作为参数调用，后者是可选的。该方法将绘制自己的图形片段，适当地调用其子级的翻译方法，并返回其结束状态（可能已作为参数省略，因此调用者不知道。）

*   创建一个开始状态并为语法树的根节点调用翻译方法，将开始状态作为其开始状态传递给它。
*   文字语法节点（在您的示例中为 0 和 1）将从其起始状态绘制一个箭头到其结束状态，如果未提供，则创建一个新的结束状态：
    ![在此处输入图像描述](../Images/2e3444cb2d1711d4799f0af84d080158.png)
*   星节点将调用其子节点的转换方法，将其自己的起始状态作为子节点的开始和结束状态（以便 NFA 能够根据需要多次“循环”该状态。）
*   一个 concat 节点将调用第一个子节点，给它它的开始状态，但没有结束状态；然后它将调用第二个孩子，将第一个孩子的结束状态作为起始状态传递给它；依此类推，构建一个子图的单向序列，每个子图一个。

你应该明白了。

在您将 NFA 图构建为状态的链接结构后（并且可能将其显示为实际图，以用于调试或文档目的），您可以将其转换为正式的元组并输出。

# mysql - mySQL：在查询中使用 LIKE 和 SUBSTR？

> ID：12540156
> 
> 赞同：2
> 
> 时间：2012-09-22T02:16:10.457
> 
> 标签：mysql, sql-like

我该怎么做这样的事情：

```
SELECT * FROM .... WHERE wp_users.user_email LIKE '%SUBSTR(wp_callbacks.post_data, INSTR(wp_callbacks.post_data, 'payer_email')+19, 20)%'... 
```

我想要做的是查询 wp_callbacks 表（以 s:11:"payer_email";s:18:"some.email@gmail.com" ... 之类的格式存储它）并查看实际的电子邮件from wp_users 匹配来自 wp_callbacks 表的电子邮件。

问题是我不知道电子邮件本身有多长，所以我在 SUBSTR 调用中选择了一个随机值 (20) 来获取电子邮件本身的前 20 个字符，然后我想检查 user_email 是否为 LIKE '% ...%'那个值。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T02:26:21.300

怎么样 - 虽然没有尝试过

```
SELECT * 
FROM .... 
WHERE wp_users.user_email LIKE 
    CONCAT('%', 
    SUBSTR(wp_callbacks.post_data, INSTR(wp_callbacks.post_data, 'payer_email')+19, 20),
    '%'); 
```

# php - 将变量格式化为地图信息窗口中的链接

> ID：12540162
> 
> 赞同：4
> 
> 时间：2012-09-22T02:17:36.460
> 
> 标签：php, javascript, google-maps

好的，我可以弹出信息窗口并显示我的链接（实际上称为“地址”）但是我不能让它显示为信息窗口中的链接。我试过在地址字段周围放置无济于事。数据显然进入了信息窗口，我无法将其设为链接？

```
downloadUrl("http://xxxxxxxxxxxxxxxxxxxxxxxxxxxx.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var type = markers[i].getAttribute("type");

        var point = new google.maps.LatLng(
            parseFloat(markers[i].getAttribute("lat")),
            parseFloat(markers[i].getAttribute("lng"))
        );

        var html = "<b>" + name + "</b> <br/>" + "address"; x x x x x x x x 
        var icon = customIcons[type] || {};

        var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
        });
        bindInfoWindow(marker, map, infoWindow, html);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:46:13.593

如果变量`address`包含链接引用，那么您可以更改以下行

```
var html = "<b>" + name + "</b> <br/>" + "address"; 
```

到

```
var html = "<strong><a href='" + address + "'>" + name + "</a></strong>"; 
```

这将使类似的东西

```
<strong><a href='http://someLink'>Some name</a></strong> 
```

因此，单击`Some name`将指向`href`属性中的链接。

或者我是你想要这个

```
var html = "<strong>" + name + "</strong> <a href='" + address + "'>address</a>"; 
```

# android - 如何在android中图像的触摸部分执行颜色混合

> ID：12540174
> 
> 赞同：2
> 
> 时间：2012-09-22T02:21:55.280
> 
> 标签：android, image, colors, blending

我正在尝试更改触摸部分中图像的颜色。我尝试了以下两种方法，

1)

```
 mPaint = new Paint();  
  mPaint.setColor(Color.RED);  
  mPaint.setStyle( Paint.Style.STROKE );  
  mPaint.setStrokeJoin( Paint.Join.ROUND );  
  mPaint.setStrokeCap( Paint.Cap.ROUND );  
  mPaint.setStrokeWidth( SettingsActivity.brushsize + 5);  
  mPaint.setFilterBitmap( false ); 
```

结果：在这种情况下混合没有发生，颜色完全覆盖图像。

2)

```
 mPaint = new Paint();  
  ColorFilter filter = new LightingColorFilter(Color.RED, 1);  
  mPaint.setColorFilter(filter);  
  mPaint.setStyle( Paint.Style.STROKE );  
  mPaint.setStrokeJoin( Paint.Join.ROUND );  
  mPaint.setStrokeCap( Paint.Cap.ROUND );  
  mPaint.setStrokeWidth(  5);  
  mPaint.setFilterBitmap( false ); 
```

结果：我总是用这个观察黑色。

如何在图像的触摸部分执行颜色混合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:44:54.767

Use Flood Fill Algorithm. Check out this code :

```
private void FloodFill(Bitmap bmp, Point pt, int targetColor, int replacementColor){
Queue<Point> q = new LinkedList<Point>();
q.add(pt);
while (q.size() > 0) {
    Point n = q.poll();
    if (bmp.getPixel(n.x, n.y) != targetColor)
        continue;

    Point w = n, e = new Point(n.x + 1, n.y);
    while ((w.x > 0) && (bmp.getPixel(w.x, w.y) == targetColor)) {
        bmp.setPixel(w.x, w.y, replacementColor);
        if ((w.y > 0) && (bmp.getPixel(w.x, w.y - 1) == targetColor))
            q.add(new Point(w.x, w.y - 1));
        if ((w.y < bmp.getHeight() - 1)
                && (bmp.getPixel(w.x, w.y + 1) == targetColor))
            q.add(new Point(w.x, w.y + 1));
        w.x--;
    }
    while ((e.x < bmp.getWidth() - 1)
            && (bmp.getPixel(e.x, e.y) == targetColor)) {
        bmp.setPixel(e.x, e.y, replacementColor);

        if ((e.y > 0) && (bmp.getPixel(e.x, e.y - 1) == targetColor))
            q.add(new Point(e.x, e.y - 1));
        if ((e.y < bmp.getHeight() - 1)
                && (bmp.getPixel(e.x, e.y + 1) == targetColor))
            q.add(new Point(e.x, e.y + 1));
        e.x++;
    }
}} 
```

# mysql - 服务器端的 SQLAlchemy 日期时间操作

> ID：12540175
> 
> 赞同：1
> 
> 时间：2012-09-22T02:22:14.250
> 
> 标签：mysql, sqlalchemy

我有一张包含预定付款和过去付款的表格，我需要找出在同一周内是否有针对同一用户/合同的任何两项费用。

```
select count(*) from charge as c1, charge as c2 
where c1.id_contract = c2.id_contract 
  and c1.status = 'SUCCESS' 
  and c2.status in ('SUCCESS', 'PENDING', 'WAITING') 
  and c1.id > c2.id and c2.due_time > (c1.due_time - interval 7 day); 
```

我很难在 sqlalchemy 中重现此查询，主要是因为我找不到如何以与数据库无关的形式将 MySQL 的“间隔”转换为 SQLAlchemy。

到目前为止，我想出了这个，它可以翻译所有内容，但间隔：

```
db.session.query(Charge, OldCharge).filter(Charge.id_contract == OldCharge.id_contract, Charge.status=='WAITING', OldCharge.status.in_(('SUCCESS', 'PENDING')), Charge.id > OldCharge.id).count() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T12:34:15.993

如果您只需要`DAY`s （这是默认间隔），那么只需将您的 SQL 重述为：

```
c2.due_time > ADDDATE(c1.due_time, - 7) 
```

可以用 SA 术语写成：

```
filter(Charge.due_time > func.ADDDATE(OldCharge.due_time, -7)) 
```

如果您需要过滤不同的时间间隔类型（周、月、年），您可能需要编写自定义 SQL 构造编译器（有关详细信息，请参阅[自定义 SQL 构造和编译扩展](http://docs.sqlalchemy.org/en/rel_0_7/core/compiler.html#greatest-function)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:09:11.477

因此，我最终编写了一个自定义 date_diff() 表达式：

```
class date_diff(expression.FunctionElement):
    type = Integer()
    name = 'age'

@compiles(date_diff, 'default')
def _default_date_diff(element, compiler, **kw):  # pragma: no cover
    return "DATEDIFF(%s, %s)" % (compiler.process(element.clauses.clauses[0]),
                                 compiler.process(element.clauses.clauses[1]),
                                 )
@compiles(date_diff, 'mysql')
def _my_date_diff(element, compiler, **kw):  # pragma: no cover
    return "DATEDIFF(%s, %s)" % (compiler.process(element.clauses.clauses[0]),
                                 compiler.process(element.clauses.clauses[1]),
                                 )

@compiles(date_diff, 'sqlite')
def _sl_date_diff(element, compiler, **kw):    # pragma: no cover
    return "julianday(%s) - julianday(%s)" % (compiler.process(element.clauses.clauses[0]),
                                              compiler.process(element.clauses.clauses[1]),
                                              ) 
```

# c++ - 部分特化的显式模板特化

> ID：12540176
> 
> 赞同：1
> 
> 时间：2012-09-22T02:22:20.177
> 
> 标签：c++, templates, overloading, specialization

我正在尝试编写一个定点算术类，其中点位置和基础类型是模板

```
template <int P, typename T>
class basic_fixedpoint{
    //stuff
}; 
```

我还想公开一个模板化的隐式构造函数，然后专门用于各种类型

```
//inside basic_fixedpoint
    template <typename U>
    basic_fixedpoint(const U& arg); 
```

在其他地方，我将为 int、float、double 等实现特化。但是，我还想为具有不同 P 和 T 的任何类型的 basic_fixedpoint 提供通用特化。如何将其作为模板化模板特化？

```
template <int P, typename T> //for the class whose constructor i specialize
template <int OP, typename OT> //for the parameters of the argument
basic_fixedpoint<P, T>::basic_fixedpoint<basic_fixedpoint<OP, OT> >(const basic_fixedpoint<OP, OT>& arg)
    : /*init things here*/ {} // this fails 
```

我试图避免重载构造函数，以便在标题中显示单个接口，告诉用户“这个类将从你给它的任何类型干净地构造自己，否则它将无法编译并给你一个难以理解的段落错误信息”

作为一个子问题：这个类还实现了基本的运算符 int()、运算符 float()、运算符 double() 转换，还提供了重载的算术运算符和数学函数。自然，每当我尝试用这个类调用任何东西时，调用都是模棱两可的，因为每种可能性都是可用的。

我怎样才能让这个类完全灵活，但仍然允许无痛明确的重载函数调用，行为正常（而不是总是将我的类转换为双精度类并返回）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T03:16:00.337

我想你可能要重新考虑你真正想要什么。隐式转换并不总是一个好主意（它们通常是一个坏主意），并且可以隐式转换为相同类型的类始终是一个坏主意（无论何时使用该类都会导致模棱两可的错误和可转换到/从类型一起，因为它可以双向。

您应该回到设计板并决定哪些需要隐式转换，哪些可以*命名*或*显式*转换。

除此之外，关于您的特定问题，您不能专门化该构造函数。函数（以及其中的构造函数）只能是完全特化的，特别是您不能特化作为模板类成员的模板函数，而不完全特化类模板。即你可以专攻：

```
basic_fixedpoint<5,int>::basic_fixed_point<int>(int) 
```

但你不能专攻：

```
template <int N, typename T>
basic_fixed_point<N,T>::basic_fixed_point<int>(int) 
```

作为`N`并且`T`不受该专业化的约束。

# css - 在具有 css 过渡的 Web 应用程序上闪烁黑色方块

> ID：12540180
> 
> 赞同：3
> 
> 时间：2012-09-22T02:23:58.787
> 
> 标签：css, web-applications, css-transitions, css-animations, webkit-transform

我正在为手机开发一个网络应用程序。该应用程序由多个滑动面板（水平）组成，每个面板上都有可点击的元素。我正在使用 touchstart、touchmove、touchend 事件来捕获触摸事件，并使用“-webkit-transform: translate3d”来实际移动元素（使用 Brad Birdsall 的 swipe.js 进行水平滑动 - [https://github.com/bradbirdsall/Swipe](https://github.com/bradbirdsall/Swipe)）。我还在前面板中添加了渐变幻灯片。使用 css 滑动和淡入淡出的动画图像：

```
@-webkit-keyframes slideLeft{
    0% {
        -webkit-transform: translate3d(0px, 0px, 0px);
        opacity:0;
    }
    30%{
        -webkit-transform: translate3d(-60px, 0px, 0px);
        opacity:1;
    }
    70%{
        -webkit-transform: translate3d(-140px, 0px, 0px);
        opacity:1;
    }
    100% {
        -webkit-transform: translate3d(-200px, 0px, 0px);
        opacity:0;
    }
}

.slideLeft{
    -webkit-animation: slideLeft 10000ms linear;
    -moz-animation: slideLeft 10000ms linear;
    -o-animation: slideLeft 10000ms linear;
    animation: slideLeft 10000ms linear;
} 
```

添加几个这样的效果后，应用程序现在无法正确加载超过 50% 的时间。当浏览器加载时，屏幕上的不同位置会随机出现黑色矩形闪烁（有关示例，请参见随附的屏幕截图）。有时它们会闪烁几秒钟然后消失，但有时它们会继续四处移动，导致所有动画变得非常缓慢和紧张。

这是我所看到的示例屏幕截图。方块在屏幕上不断移动：

![在此处输入图像描述](../Images/d9eb30bd59f3535cf2a890f779a0bd58.png) ![在此处输入图像描述](../Images/eee1b4566b2b9ee5b45c12b5fd2b9eb8.png)

这个问题实际上只发生在三星galaxy android手机上，在默认的android浏览器上（chrome工作得很好，但我需要它在默认浏览器中工作）。一切都在 iphone 上运行良好，并且在我迄今为止测试的所有其他机器人上运行良好。在三星上 - 有时一切都正确加载，但大多数时候都没有。我尝试摆脱一些动画，但问题是如此不一致。如果我在不更改代码的情况下不断刷新，我一定会在某个时候看到它。

以前有人遇到过这个问题吗？我制作了一个简化版的应用程序，只有 2 个滑动面板和前面板上的幻灯片。代码在 github 上： [https](https://github.com/mashabelyi/css-transitions-test) ://github.com/mashabelyi/css-transitions-test 。您可以在手机上访问 www.webitap.com/test 上的应用程序

黑色矩形在这个简化版本中出现的频率较低，这让我认为它与正在加载的内容量有关。有时它们在开始时出现，然后消失。我正在对元素进行大量 javascript DOM 操作，以确保应用程序适合任何屏幕尺寸。这可能是问题的潜在原因吗？我尝试使用 translateX 而不是 translate3d 并通过调用 translate3d(0,0,0) 触发一次硬件加速，但问题仍然存在。

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:16:39.643

我解决了这个问题！原来我使用的图像太大了。我压缩了图像，现在一切正常。

# javascript - Jquery如何添加：悬停到css样式表

> ID：12540181
> 
> 赞同：0
> 
> 时间：2012-09-22T02:24:04.633
> 
> 标签：javascript, jquery, css

这是我喜欢转换为 jQuery 代码的 CSS：

```
BUTTON:hover .buttonTextDIV {
background-color: #FFFFFF;
border-right: 4px solid #d1dbea;
border-bottom: 2px solid #d1dbea;} 
```

我在 4.01 Transitional 中使用了一个过滤器，我遇到了 $().hover 事件的问题，其中过滤器的效果被 onmouseleave 函数否定了，$().hover 使用它来“模拟”css :hover 选项离开物体。

所以我需要“硬编码”按钮：使用 jQuery 悬停 .buttonTextDIV。

我想专门将此添加到每个元素中，分别使用： $(".buttontext").each(function(){}

有没有办法做到这一点？

我不希望人们告诉我不要使用 4.01，如果您打算这样做，请继续下一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:47:49.070

JavaScript 不能直接定义或编辑 CSS 的伪类。除非您直接编辑 CSS。但是，如果`hover()`对您不起作用（您没有说明原因？），我只能建议您尝试手动定义自己的事件：

[.mouseenter()](http://api.jquery.com/mouseenter/)
[.mouseleave()](http://api.jquery.com/mouseleave/)

[.mouseover()](http://api.jquery.com/mouseover/)
[.mouseout()](http://api.jquery.com/mouseout/)

# algorithm - 使用给定的操作数和运算符找到总和的不同排列

> ID：12540182
> 
> 赞同：1
> 
> 时间：2012-09-22T02:24:13.417
> 
> 标签：algorithm, permutation

我对 `(+, -, /, * )` 使用这些运算符和操作数的总和的运算符有疑问。

因此，例如，我需要使用 3 个操作数（1、2、3）和 + 运算符得到总共 6 个，该特定结果的排列总数可能是多少。

我什至想不出这种方法。任何人都可以帮助我解决这个问题。我正在使用 Java。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:42:02.897

有许多不同的方法，但为了简要描述所有方法，我首先需要重新阅读我在“童年”时读过的书。试试这个解决方案：创建一个可用于：

*   推送一个值
*   弹出两个最高值并进行支持的算术运算之一，然后将结果推回
*   弹出一个值

这样，您就有了一个简单的堆栈机器，可以让您执行必要的计算。接下来，您需要生成操作数和运算符串联的所有可能排列。当你从这个串联中取出操作数时，你将它压入堆栈。当您拿起操作员时 - 您执行它。在执行运算符时，您检查堆栈中是否至少有两个元素 - 否则您需要跳过此运算符并寻找下一个可能的操作数。当连接序列中没有更多操作数并且堆栈中只有一个元素时 - 这意味着您完成了当前计算。因此，将结果与给定结果进行比较，并在需要时记录序列。然后切换到下一个排列

这绝对不是最佳解决方案 - 有很多优化的可能性。这是最有趣的部分:) 祝你好运

# php - PHP没有写入文件

> ID：12540192
> 
> 赞同：1
> 
> 时间：2012-09-22T02:26:50.720
> 
> 标签：php, io

我正在制作注册表，但似乎无法写入文本文件。在这段代码中，我将一个人的真实姓名放在他们的文件 acc/pplid/[name].txt 中。该文件根本没有写入 - 回显不输出任何内容。我正在使用计算机上的 Microsoft Webmatrix。提前致谢！

```
 $irlname = $_POST["irlname"];
        $name = $_POST["username"];
        $email = $_POST["email"];
        $password = $_POST["password"];
        $name = htmlentities($name);

        echo $name;
        file_put_contents("acc/pplid/".name.".txt", $irlname);
        echo file_get_contents("acc/pplid/".$name.".txt"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:29:00.887

```
file_put_contents("acc/pplid/".name.".txt", $irlname); 
```

应该

```
file_put_contents("acc/pplid/".$name.".txt", $irlname); 
```

除非`name`在其他地方定义，否则我会说检查写权限。使用或之前检查**文件夹**的状态。[`file_exists`](http://php.net/manual/en/function.file-exists.php)[`is_dir`](http://php.net/manual/en/function.is-dir.php)`file_put_contents`

**例子**

```
if(is_dir("acc/pplid") && is_writable("acc/pplid")){
    file_put_contents("acc/pplid/".$name.".txt", $irlname);
} else echo "A problem with the folder occurred"; 
```

# ruby-on-rails - Rails Postgres 部署到 Heroku 问题

> ID：12540193
> 
> 赞同：0
> 
> 时间：2012-09-22T02:26:56.520
> 
> 标签：ruby-on-rails, ruby, postgresql, heroku

我很难将我最新的 rails 3.2 应用程序推送到 heroku。我之前一直在推动它，没有任何问题，自上次工作提交以来我所做的最近的事情是为 postgres 和几个模型添加了一个 hstore 列。这些都可以在我和其他计算机上完美运行。

正在运行

heroku run rake db:migrate 我得到以下输出：

```
james@James-PC:~/tendersave$ heroku run rake db:migrate
Running `rake db:migrate` attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
/app/vendor/bundle/ruby/1.9.1/bin/rake: No such file or directory - pg_dump -i -s -x -O -f /app/db/structure.sql  d36q1tfb51f169 
```

注意最后一行的错误

同样在运行 heroku run db:setup 我得到这个：

```
james@James-PC:~/tendersave$ heroku run rake db:setup
Running `rake db:setup` attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
d36q1tfb51f169 already exists
sh: psql: not found 
```

再次在最后一行出现错误的地方。

然后，如果我检查 heroku 的日志，我会得到以下信息（我想是因为它没有运行迁移）：

```
2012-09-22T02:24:06+00:00 app[web.1]: Started GET "/" for 203.173.199.11 at 2012-09-22 02:24:06 +0000
2012-09-22T02:24:06+00:00 app[web.1]: Processing by ProposalsController#index as HTML
2012-09-22T02:24:06+00:00 app[web.1]:   Rendered proposals/index.html.erb within layouts/application (65.2ms)
2012-09-22T02:24:06+00:00 app[web.1]: Completed 500 Internal Server Error in 295ms
2012-09-22T02:24:06+00:00 app[web.1]: 
2012-09-22T02:24:06+00:00 app[web.1]: ActionView::Template::Error (PG::Error: ERROR:  relation "proposals" does not exist
2012-09-22T02:24:06+00:00 app[web.1]: LINE 4:              WHERE a.attrelid = '"proposals"'::regclass
2012-09-22T02:24:06+00:00 app[web.1]:                                         ^
2012-09-22T02:24:06+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
2012-09-22T02:24:06+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2012-09-22T02:24:06+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2012-09-22T02:24:06+00:00 app[web.1]:              WHERE a.attrelid = '"proposals"'::regclass
2012-09-22T02:24:06+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2012-09-22T02:24:06+00:00 app[web.1]:              ORDER BY a.attnum
2012-09-22T02:24:06+00:00 app[web.1]: ):
2012-09-22T02:24:06+00:00 app[web.1]:     16:     <th></th>
2012-09-22T02:24:06+00:00 app[web.1]:     17:   </tr>
2012-09-22T02:24:06+00:00 app[web.1]:     18: 
2012-09-22T02:24:06+00:00 app[web.1]:     19: <% @proposals.each do |proposal| %>
2012-09-22T02:24:06+00:00 app[web.1]:     20:   <tr>
2012-09-22T02:24:06+00:00 app[web.1]:     21:     <td><%#= proposal.active %></td>
2012-09-22T02:24:06+00:00 app[web.1]:     22:     <td><%= proposal.type %></td>
2012-09-22T02:24:06+00:00 app[web.1]:   app/controllers/proposals_controller.rb:14:in `index'
2012-09-22T02:24:06+00:00 app[web.1]: 
2012-09-22T02:24:06+00:00 app[web.1]:   app/views/proposals/index.html.erb:19:in `_app_views_proposals_index_html_erb__922970733135020301_38000420'
2012-09-22T02:24:06+00:00 app[web.1]: 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:30:23.913

最好的猜测是您有未运行的出色迁移。

试试`heroku run rake db:migrate`。那应该可以清除`relations do not exist`错误。

对于其余的，它们是警告。你可以忽略它们，但你会看到，因为`vendor/plugins`你的项目中的文件夹可能是非空的，当 Rails 4 到来时，它会被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:36:47.080

为了解决这个问题，我只是从它工作时开始检查我的 git，并逐步添加新功能并能够找到问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T21:04:57.177

对于未来的浏览器，[这个问题](https://stackoverflow.com/questions/12413306/error-when-doing-rake-dbmigrate-on-heroku)为我回答了它。只需将其添加到 Rakefile 的底部：

```
Rake::Task["db:structure:dump"].clear unless Rails.env.development? 
```

# ruby-on-rails - Rails：在一定时间后自动更改的时间戳，类似于 Facebook？

> ID：12540196
> 
> 赞同：1
> 
> 时间：2012-09-22T02:27:59.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, timestamp

当您在 Facebook 上发帖时，它会显示“2 秒前”，一段时间后它会更新为“大约一分钟前”。有没有办法在带有默认时间戳的rails中轻松做到这一点？Facebook 会自动执行此操作，无需刷新页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T03:37:16.777

当然......你可以用一些非常简单的 JS 来做到这一点。看看 Ryan McGeary 的 Timeago。它完全符合您的要求，而且非常漂亮。

[http://timeago.yarp.com/](http://timeago.yarp.com/)

很多网站都使用这种功能，包括 Twitter、FB、Basecamp 等……

# android - 为什么我的 WebView 在纯文本 HTML 中显示 rss？

> ID：12540201
> 
> 赞同：2
> 
> 时间：2012-09-22T02:28:50.890
> 
> 标签：android, html, url, webview, plaintext

我是 android 的菜鸟，我遇到的问题与[这篇文章](https://stackoverflow.com/questions/11821233/how-do-i-display-content-from-feedburner-in-webview-in-full-html)中的问题非常相似。我也无法显示 feedburner 内容。它以纯文本形式显示提要，并且由于所有 html 标记而无法读取。我尝试了发布答案中的建议，但没有帮助。我可以以某种方式使用 loadData 并用“html”包围 url。那可能吗？任何帮助表示赞赏。

```
huffingtonpost = (WebView)findViewById(R.id.webView1);
    try{
    huffingtonpost.loadUrl("http://feeds.feedburner.com/GoldMoneyGoldResearch");
    }catch (Exception e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:53:13.710

我相信这是因为返回的页面`http://feeds.feedburner.com/GoldMoneyGoldResearch`不是 HTML 格式，而是 RSS XML 格式。

如果要将其格式化为 HTML，可以使用 XML 解析器从 RSS XML 中提取条目并将其转换为 HTML。[下面](https://stackoverflow.com/questions/1253788/simple-rss-parser-for-android)是一个从 RSS 中提取数据的简短示例。

# objective-c - 如何在视图控制器中运行方法而不触摸按钮

> ID：12540208
> 
> 赞同：-2
> 
> 时间：2012-09-22T02:30:00.720
> 
> 标签：objective-c, ios, xcode

我在做tic Tac Toe

我想制作一种无需触摸按钮即可检查我的游戏获胜者的方法

所以我试着做这个

```
-(void)printSomeThing{

    NSLog(@"Checking ... We Are Playing");
} 
```

试试它是否运行

但它没有

那么如何运行这个方法并打印出那些单词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:51:17.793

我可以看到您在不触摸按钮的情况下使此方法起作用的一些方法：

```
-(void)viewDidLoad {
[self printSomeThing];
} 
```

**或者**

每当你的函数被调用以实现游戏结束时，你告诉它在那里调用函数，就像我在 viewDidLoad 中所做的那样，通过使用：

```
 [self printSomeThing]; 
```

希望这对任何人都有帮助

# vim - 在 Ubuntu 中使用 GVim “无法创建 Ubuntu 菜单代理”

> ID：12540209
> 
> 赞同：8
> 
> 时间：2012-09-22T02:30:18.630
> 
> 标签：vim, ubuntu

尝试时在终端窗口中收到此错误

```
$ gvim
** (gvim:2350): WARNING **: Unable to create Ubuntu Menu Proxy: Timeout was reached 
```

gvim 启动，但随后发生此错误。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T12:02:54.927

您得到的原因是因为 Gvim 默认情况下在 Ubuntu 中没有应用菜单。您可以通过为 Gvim 添加全局菜单来解决此问题。

运行命令`UBUNTU_MENUPROXY= gvim`而不是`gvim`将帮助您摆脱该警告。您还可以考虑将 gvim 别名为上述命令。

有关更多信息，请参阅[如何获取 gvim 的全局应用程序菜单？](https://askubuntu.com/questions/132977/how-to-get-global-application-menu-for-gvim)

# python - Web2py：下载文件/显示图像

> ID：12540213
> 
> 赞同：2
> 
> 时间：2012-09-22T02:31:01.050
> 
> 标签：python, image, file, download, web2py

我最近跳进了 Web2py 框架，我觉得它非常好。但是，我现在遇到了一个“基本”问题。

## 语境

我正在构建的网站是科学代码的界面：人们填写表格并提交。数据（写入共享文件夹内的文件）然后由代码处理，在后台作为守护程序运行（代码与网站没有链接，除了这个共享文件夹和之间的 JSONRPC 链接`code->website`）。该代码会生成我希望向网站用户提供的文件和图像（即，将他们要求的结果返回给他们）。工作完成后，代码使用 JSONRPC 服务链接将结果“推送”到网站，效果很好。结果位于具有生成名称的文件夹中，该名称基本上具有以下结构：

```
unique_folder_name/
        file1.txt
        file2.csv
        file3.xls
        image1.png
        image2.png 
```

## 当前的实现（不能正常工作）

目前我有 3 个数据库：

```
# Job database
db.define_table("job",
    Field('owner', 'string', length=60, required=True, writable=True, readable=True),
    Field('uniq_id', "string", length=60, required=True, unique=True, writable=False, readable=True))

# Result database
db.define_table("result",
    Field("job", "reference job"),
    Field("x", "integer", default=1),
    Field("y", "integer", default=0),
    Field("z", "integer", default=0),
    Field("data", "string", length=500),
    Field("message", "string", length=200))

# File database
db.define_table("file",
    Field("job", "reference job"),
    Field("file", "upload"),
    Field("isimage", "boolean", default=False)) 
```

当代码“推送”结果时，Web2py 中的某些模块会在“结果”数据库中创建条目，并在与作业关联的“文件”数据库中创建条目。由于我没有找到一种方法来使 Web2py 可以使用文件（已经在文件系统上）而不将其复制到上传文件夹，因此我目前存储这样的文件（在一个模块中）：

```
stream = open(os.path.join(directory, _file), 'rb')
current.db.file.insert(job=jid, file=current.db.file.file.store(stream, _file), isimage=isimg) 
```

然后，当我想用​​图像创建一个视图时，我会（在一个模块中）：

```
rows = current.db((current.db.file.job==jid) & (current.db.file.isimage==True)).select()
for row in rows:
    div.append(I(_src=URL(c="default", f="download", args=os.path.join(directory, row.file)), _width="500", _height="500")) 
```

并在视图中：`{{=div}}`

## 问题

这只是行不通......显示页面的源代码如下：

```
<i height="500" src="/mycode/default/download//path/to/directory/file.file.9b7d3a0367de0843.6d732d72732e706e67.png" width="500"></i> 
```

如果我在地址栏中输入此 URL，则文件下载正确，否则图像不会显示在网页上。此外，我必须提供文件的路径，即使 Web2py 确实将文件复制到“上传”文件夹中（使用其新的安全丑名称:)），否则链接不起作用。所以：没有显示图像，而且文件无论如何都会复制到“上传”文件夹中:(

我迷路了，不知道如何解决这个问题。（我还尝试在构建图像 URL 时添加请求对象，并且还尝试了自定义下载功能......到目前为止还没有工作）。

## 编辑（解决方案）

好吧，我的代码中有一个明显的错误，我错过了：图像标签助手不是`I`，但是`IMG`:) 与 twitter bootstrap 图标中使用的标签混淆引起的简单错误`I`......这样就解决了显示问题。对于流文件而不在上传文件夹中复制它们（即不使用`upload`数据库中的字段），**rochacbruno**（非常感谢他）让我走上了正确的轨道。有关完整解决方案，请参阅我自己的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:09:45.137

所以这是我的问题的完整解决方案。

在`db.py`文件中，我用这个定义替换了“文件”表（因此文件保留在原处，并且不会复制到 web2py 上传文件夹中）：

```
# File database
db.define_table("file",
    Field("job", "reference job"),
    Field("name", "string", length=30, required=True),   # stores the filename (without path)
    Field("isimage", "boolean", default=False)) 
```

然后，在控制器（例如“mycontroller”）中，我定义了这个函数来流式传输文件：

```
from mymodule import OUTPUT  # this is the base directory of the files
from gluon.contenttype import contenttype

def export():
    # allow to download files
    jid = request.args(0)
    fid = request.args(1)

    if None in (jid, fid):
        res = 'Invalid URL'
    else:
        # get the file row
        row = db.file(fid)

        # some checks (not necessary if you know what you're doing)
        jrow = db.job(jid)
        if row is None:
            res = "unknown file ID"
        elif jrow.id  is None:
            res = "unknown job ID"
        else:
            filename = row.name
            # jrow.perma_id, is a field in the 'job' DB, that I use to create a unique
            # directory name, so the files of job ID 'jid' are under: OUTPUT/perma_id/
            fullname = os.path.join(OUTPUT, jrow.perma_id, filename)

            ext = os.path.splitext(filename)[1]
            response.headers['Content-Type'] = contenttype(ext)
            response.headers['Content-disposition'] = 'attachment; filename=%s' % filename
            res = response.stream(open(fullname, "rb"), chunk_size=4096)

    return res 
```

请注意，此时我遇到了另一个问题：我首先想到将完整路径作为请求参数传递（例如。`URL(c='mycontroller', f='export', args=(path, filename))`），但它不起作用，因为`path`包含被拆分为多个参数的“/”。 . 如果您没有像我这样的简单路径（即仅更改一个组件），您可以将路径存储到“文件”数据库中。

然后，对于视图（使用模块或任何你喜欢的）：

```
rows = current.db((current.db.file.job==jid) & (current.db.file.isimage==True)).select()
for row in rows:
    div.append(IMG(_src=URL(c="mycontroller", f="export", args=(jid, fid), _width="500", _height="500")) 
```

请注意，`I`助手标签已被正确的标签替换`IMG`。'jid' 是作业 ID，'fid' 是您要显示/下载的文件 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:27:58.900

您必须创建自己的下载功能

```
import os
def my_download():
    base_path = request.args(0) # /path
    subdirectory = request.args(1) # directory
    filename = request.args(2)
    fullpath = os.path.join(request.folder, base_path, subdirectory, filename)
    response.stream(os.path.join(request.folder, fullpath)) 
```

默认/下载旨在与 db 和默认存储方式一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-05T21:18:24.820

**从 Web2Py 视图下载**

来自 Web2Py 书籍：链接到静态文件夹中的音频或视频文件时，如果您想强制浏览器下载文件而不是通过媒体播放器流式传输音频/视频，请在 URL 中添加 ? 附件。这告诉 web2py 将 HTTP 响应的 Content-Disposition 标头设置为“附件”。例如：

```
<a href="/app/static/my_audio_file.mp3?attachment">Download</a> 
```

单击上述链接时，浏览器将提示用户下载 MP3 文件，而不是立即流式传输音频。

我已经成功地将上述内容与 json 和 csv 文件一起使用。请注意，上述内容不适用于*私人*文件夹中的文件。

**从 Web2Py 控制器下载**

```
def my_download():
    directory = '2e6d2ba1-52d7-4927-b91d-c7568b25314d'
    Cat = 'foobar'

    path=os.path.join(request.folder,'static', directory + Cat + '.json')
    return response.stream(open(path,'rb'), attachment=True, filename=Cat) 
```

# mysql - 再次出现 MySQL 错误 #1064

> ID：12540215
> 
> 赞同：-2
> 
> 时间：2012-09-22T02:31:17.193
> 
> 标签：mysql

我们重新来过吧。MySQL 抛出此错误：`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'tinytext not null, FirstName varchar(50) not null, LastName varchar(50) nu' at line 5`

这可能是什么语法问题？

这是代码：

```
 CREATE TABLE posts (
        ID int unsigned not null auto_increment,
        Type enum('article', 'link') not null,
        Title text null,
        Link text null,
        BodyOrig longtext null,
        BodyProc longtext not null,
        URL tinytext not null,
        ShortURL tinytext not null,
        Status enum('drafted', 'published') not null,
        DateEdited timestamp null,
        DatePublished timestamp null,
        Topic enum('') null,

        primary key (ID, URL(255), ShortURL(10))
    );
    CREATE TABLE pages (
        ID int unsigned not null auto_increment,
        Name varchar(25) not null,
        Title text not null,
        BodyOrig longtext null,
        BodyProc longtext not null,
        URL tinytext not null,
        Hero text null,
        Status enum('drafted', 'published') not null,

        primary key (ID, Name, URL(255))
    );
    CREATE TABLE users (
        ID int unsigned not null auto_increment,
        Username varchar(25) not null,
        Password text not null,
        Key tinytext not null,
        FirstName varchar(50) not null,
        LastName varchar(50) null,
        DisplayName tinytext not null,
        Email tinytext not null,

        primary key (ID, Username, Key(255));
    );
    CREATE TABLE settings (
        Version varchar(10) not null,
        SiteName tinytext not null,
        Description tinytext not null,
        ColorScheme char(6) not null
    ); 
```

要么我的眼睛没有处于最佳状态，要么我缺少某些东西（特定格式？）。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T02:33:14.043

您正在尝试创建一个名为 "Key" 的列，它是一个[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。

# symfony - 在 symfony2.1 表单中使用实体字段类型

> ID：12540219
> 
> 赞同：9
> 
> 时间：2012-09-22T02:32:28.580
> 
> 标签：symfony, symfony-forms, symfony-2.1

使用 Symfony 2.1.3-dev 和 Doctrine 2.3

我正在尝试构建一个表单，该表单为用户提供多个选项来过滤返回的数据集（`Entity\EngineCodes`）。该表单由 1 个文本输入字段 ( `id`) 和 3 个选择字段 ( `module`, `type`, `status`) 组成。我正在尝试使用 Symfony2 `entity`form_type 为`EngineCodes`实体中的 3 个选择字段生成值。

因为我想使用任意 3 个选择字段的组合来过滤表格。根据 2.1 文档，我决定创建一个 FormType ( `EngineCodesFilterType`) 并设置三个表单字段来`entity`键入 with`query_builder`语句，以便为每个字段返回一组唯一值。

不幸的是，我收到了跟随错误，我不确定为什么它返回一个数组而不是一个对象。

```
 The form's view data is expected to be an instance of class
    Vendor\IndexBundle\Entity\EngineCodes, but is a(n) array.
    You can avoid this error by setting the "data_class" option
    to null or by adding a view transformer that transforms a(n)
    array to an instance of Vendor\IndexBundle\Entity\EngineCodes. 
```

如果我设置`data_class`为`null`，我会收到此错误：

```
 A "__toString()" method was not found on the objects of type
    "Vendor\IndexBundle\Entity\EngineCodes" passed to the choice
    field. To read a custom getter instead, set the option
    "property" to the desired property path. 
```

由于我仍在学习 Symfony2 的这些功能，我的目标是在结构和格式方面尽可能地匹配 2.1 文档。

这是控制器中的功能：

```
public function displayAction() {

    // ...

    $entity = $this->getDoctrine()->getEntityManager()
        ->getRepository('VendorIndexBundle:EngineCodes')
        ->findAll();

    // ...

    $form = $this->createForm(new EngineCodesFilterType(), $entity);

    // ...

    return $this->render(
        'VendorIndexBundle::layout.html.twig',
        array(
            'entity'  => $entity,
            'form'    => $form->createView(),)); 
```

这是表单类型：

```
class EngineCodesFilterType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add(
            'id',
            'integer',
            array(
                'label' => 'Code ID',));
        $builder->add(
            'status',
            'entity',
            array(
                'label' => 'Code Status',
                'class' => 'VendorIndexBundle:EngineCodes',
                'query_builder' => function(EntityRepository $er)
                    {
                        return $er->createQueryBuilder('u')
                            ->select('u.status')
                            ->add('groupBy', 'u.status');
                    },
                'multiple' => true,));
        $builder->add(
            'type',
            'entity',
            array(
                'label' => 'Code Type',
                'class' => 'VendorIndexBundle:EngineCodes',
                'query_builder' => function(EntityRepository $er)
                    {
                        return $er->createQueryBuilder('u')
                            ->select('u.type')
                            ->add('groupBy' ,'u.type');
                    },
                'multiple' => true,));
        $builder->add(
            'module',
            'entity',
            array(
                'label' => 'Code Module',
                'class' => 'VendorIndexBundle:EngineCodes',
                'query_builder' => function(EntityRepository $er)
                    {
                        return $er->createQueryBuilder('u')
                            ->select('u.module')
                            ->add('groupBy', 'u.module');
                    },
                'multiple' => true,));
    }

    public function getName()
    {
        return 'EngineCodesFilter';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(
            array(
                'data_class'        => 'Vendor\IndexBundle\Entity\EngineCodes',
              /*'data_class'        => null,*/
                'validation_groups' => 'filter',));
    }
} 
```

这是`Vendor\Entity\EngineCodes`课程：

```
/**
 * Vendor\IndexBundle\Entity\EngineCodes
 *
 * @ORM\Table(name="engine_codes")
 * @ORM\Entity(repositoryClass="Vendor\IndexBundle\Entity\EngineCodesRepository")
 * @UniqueEntity(fields="id", message="ID already in use! Enter a unique ID for the code.")
 */
class EngineCodes
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false, unique=true)
     * @ORM\Id
     * @Assert\NotBlank(message="ID cannot be blank!")
     * @Assert\Regex(pattern="/^\d+$/", match=true, message="ID must be an integer!")
     * @Assert\MinLength(limit=8, message="ID must be 8 numbers in length!")
     * @Assert\MaxLength(limit=8, message="ID must be 8 numbers in length!")
     */
    private $id;

    /**
     * @var string $token
     *
     * @ORM\Column(name="token", type="string", length=255, nullable=false, unique=true)
     */
    private $token;

    /**
     * @var boolean $status
     *
     * @ORM\Column(name="status", type="integer", nullable=false)
     * @Assert\NotBlank(message="Status cannot be blank!")
     */
    private $status;

    /**
     * @var string $module
     *
     * @ORM\Column(name="module", type="string", length=255, nullable=false)
     * @Assert\NotBlank(message="Module cannot be blank!")
     */
    private $module;

    /**
     * @var string $submodule
     *
     * @ORM\Column(name="submodule", type="string", length=255, nullable=false)
     * @Assert\NotBlank(message="Submodule cannot be blank!")
     */
    private $submodule;

    /**
     * @var string $type
     *
     * @ORM\Column(name="type", type="string", length=255, nullable=false)
     * @Assert\NotBlank(message="Type cannot be blank!")
     */
    private $type;

    /**
     * @var string $description
     *
     * @ORM\Column(name="description", type="text", nullable=false)
     * @Assert\NotBlank(message="Description cannot be blank!")
     */
    private $description;

    /**
     * @var string $title
     *
     * @ORM\Column(name="title", type="string", length=255, nullable=false)
     * @Assert\NotBlank(message="Title cannot be blank!")
     */
    private $title;

    /**
     * @var string $definition
     *
     * @ORM\Column(name="definition", type="text", nullable=true)
     */
    private $definition;

    /**
     * @var string $color
     *
     * @ORM\Column(name="color", type="string", length=10, nullable=true)
     */
    private $color;

    /**
     * @var \DateTime $createTimestamp
     *
     * @ORM\Column(name="create_timestamp", type="datetime", nullable=false)
     */
    private $createTimestamp;

    /**
     * @var Accounts
     *
     * @ORM\ManyToOne(targetEntity="Accounts")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="create_account_fk", referencedColumnName="id")
     * })
     */
    private $createAccountFk;

    // getters and setters ...

    /**
     * Set createAccountFk
     *
     * @param Vendor\IndexBundle\Entity\Accounts $createAccountFk
     * @return EngineCodes
     */
    public function setCreateAccountFk(\Vendor\IndexBundle\Entity\Accounts $createAccountFk = null)
    {
        $this->createAccountFk = $createAccountFk;

        return $this;
    }

    /**
     * @ORM\PrePersist
     */
    public function setCreateTimestampValue()
    {
        $this->createTimestamp = new \DateTime();
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T07:26:23.533

您的第一个问题是这`$entity`不是单个实体，而是实体数组（这是该`findAll()`方法返回的内容）。当您定义表单类型时，您说您希望从实体构建表单（这就是`data_class`选项的用途），这就是您收到第一个错误的原因。

如果您设置`data_class`为 null，则表示您不希望从实体创建表单，因此它将接受您的实体数组而不是抱怨。但是，为什么要将实体数组传递给表单类型？这只是一个过滤器表单，它允许您选择四个可能的值来过滤您的实体。这不需要实体数组作为其基础数据。如果您认为需要它来获取代码、类型和状态字段的值，则并非如此，因为它们已经通过您的查询构建器获取。所以你的控制器代码应该是：

```
public function displayAction() {

// ...

$entity = $this->getDoctrine()->getEntityManager()
    ->getRepository('VendorIndexBundle:EngineCodes')
    ->findAll();

// ...

$form = $this->createForm(new EngineCodesFilterType());

// ...

return $this->render( // ... 
```

然后您会收到另一个错误，因为您要添加三个表单字段，并且每个字段都允许您从实体列表中进行选择。但是，你如何“展示”这个实体？Symfony 不知道它应该显示哪个字段来代表实体，所以它会抛出这个错误。

这个错误可以通过向 EngineCodes 类添加一个 __toString() 方法来修复，它只是说“嘿，这就是我想展示这个类的方式”，但是虽然不会抛出错误，但它不会按预期工作，因为每个这三个字段想要显示不同的属性。

另一种解决方案是使用`property`表单字段的选项来说明要使用底层对象的哪个属性来显示数据。

例如：

```
$builder->add(
        'status',
        'entity',
        array(
            'label' => 'Code Status',
            'class' => 'VendorIndexBundle:EngineCodes',
            'property' => 'status'
            'query_builder' => function(EntityRepository $er)
                {
                    return $er->createQueryBuilder('u')
                        ->select('u.status')
                        ->add('groupBy', 'u.status');
                },
            'multiple' => true,)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-22T07:17:27.590

您只是缺少“状态”、“类型”和“模块”实体类型中的[属性选项：](http://symfony.com/doc/current/reference/forms/types/entity.html#property)

> 财产
> 
> 类型：字符串
> 
> 这是应该用于在 HTML 元素中将实体显示为文本的属性。如果留空，实体对象将被转换为字符串，因此必须具有 __toString() 方法。

# processing - twitter4j 如何仅从 twitter 流中获取带有位置数据的状态

> ID：12540223
> 
> 赞同：0
> 
> 时间：2012-09-22T02:34:06.277
> 
> 标签：processing, twitter4j

我收到大量“onTrackLimitationNotice”。我想通过仅搜索具有地理位置但所有地理位置的状态来缩小我的谓词？这可以做到吗？我在处理中编码，使用 twitter4j-2.2.6。

编辑：这是一个答案......感动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:40:26.760

我发现查询全局边界框的流，只返回带有地理位置的状态。所以这有效：

```
// cb is an instace of ConfigurationBuilder
TwitterStream twitter = new TwitterStreamFactory(cb.build()).getInstance();
FilterQuery filtro = new FilterQuery();    
double[][] bb= {{-180, -90}, {180, 90}};
filtro.locations(bb);
twitter.addListener(listener);
twitter.filter(filtro); 
```

仅返回带有位置信息的推文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-16T02:59:42.980

不是答案，而是*一个简单的解决方法*：

我知道大多数人在发推文时都没有启用 GPS，而其他人也不想分享他们的位置！

但他们仍在分享他们的位置！你猜怎么着？在他们的个人资料上！他们的家乡，他们的国家大多是可见的，这可以为您提供推文来自的**大致位置！**您可以使用 Rest API 查询用户的个人资料，从而查询他/她的位置

`twitter.showUser(userScreenName).getLocation();`

# mongodb - Zend Framework 2 + Doctrine ODM，“在链配置的命名空间中找不到类”错误？

> ID：12540224
> 
> 赞同：5
> 
> 时间：2012-09-22T02:34:12.640
> 
> 标签：mongodb, doctrine-orm, zend-framework2, doctrine-odm, odm

设置 ZF2 + ODM 时，出现以下错误：

```
The class 'Application\Document\User' was not found in the chain configured namespaces 
```

当前设置如下：

ZF2 稳定，通过 composer.phar 与 composer.json 内容安装的学说 ODM

```
{
    "name": "zendframework/skeleton-application",
    "description": "Skeleton Application for ZF2",
    "license": "BSD-3-Clause",
    "keywords": [
        "framework",
        "zf2"
    ],
    "homepage": "http://framework.zend.com/",
    "minimum-stability": "dev",
    "require": {
        "php": ">=5.3.3",
        "zendframework/zendframework": "2.0.0",
        "doctrine/doctrine-mongo-odm-module": "dev-master"
    }
} 
```

加载的模块

```
'modules' => array(
    'Application',
    'DoctrineModule',
    'DoctrineMongoODMModule',
), 
```

创建 hydrator 和代理目录

```
$ ls -l data/DoctrineMongoODMModule/
total 0
drwxrwxrwx  2 wisu  staff  68 Sep 12 08:34 Hydrators
drwxrwxrwx  2 wisu  staff  68 Sep 12 08:35 Proxy 
```

odm 配置看起来像

```
'driver' => array(
    'odm_default' => array(
        'drivers' => array(
            'Application\Document' => 'aplikasi'
        )
    ),
    'aplikasi' => array(
        'class' => 'Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver',
        'cache' => 'array',
        'paths' => array(
            'module/Application/src/Application/Document'
        )
    )
), 
```

我正在尝试使用以下映射

```
<?php

namespace Application\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/** @ODM\Document(collection="user") */
class User
{
    /** @ODM\Id */
    private $id;

    /** @ODM\Field(type="string") */
    private $name;

    /**
     * @return the $id
     */
    public function getId() {
        return $this->id;
    }

    /**
     * @return the $name
     */
    public function getName() {
        return $this->name;
    }

    /**
     * @param field_type $id
     */
    public function setId($id) {
        $this->id = $id;
    }

    /**
     * @param field_type $name
     */
    public function setName($name) {
        $this->name = $name;
    }

} 
```

但通过调用它

```
<?php

namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Application\Document\User;

class IndexController extends AbstractActionController
{
    public function indexAction()
    {

        $dm = $this->getServiceLocator()->get('doctrine.documentmanager.odm_default');

        $user = new User();
        $user->setName("Gembul");

        $dm->persist($user);
        $dm->flush();

        return new ViewModel();
    }
} 
```

任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:01:51.477

此安装适用于当前版本： [ZF2、MongoDB 和 Doctrine 安装](http://blog.redphoenixsoftware.com/zf2-mongodb-doctrine-installation/)

将 odm 的默认配置文件复制到我们的配置目录。然后，您需要根据您的服务器规范修改 module.doctrine-mongo-odm.local.php。这是您设置服务器主机、端口、用户名和密码的配置文件。例如，我们将假设一切都在同一台本地机器上运行，并且不进行任何修改。

这是一个适用于混合解决方案 ORM / ODM 的应用程序**module.config.php**：

```
'doctrine' => array(
    'driver' => array(
        'orm_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => 'orm_driver'
            )
        ),
        'odm_driver' => array(
            'class' => 'Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver',          
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Document')
        ),
        'odm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Document' => 'odm_driver'
            )
        )                   
    )
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T22:51:13.353

真正的解决方案是不将 module.doctrine-mongo-odm.local.php 添加到 autoload 目录中，这些行作为配置对我有用

```
 'driver' => array(          
        'ODM_Driver' => array(
            'class' => 'Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver',
            'paths' => array(__DIR__ . '/../../module/Application/src/Application/Doctrine/Document')
        ),
        'odm_default' => array(
            'drivers' => array(
                'Application\Doctrine\Document' => 'ODM_Driver'
            )
        ),
    ), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:37:46.563

发现问题了...

配置文件 module.doctrine-mongo-odm.local.php 不在自动加载目录下...

# perl - Crypt::OpenPGP Symkey 解密失败：密钥 ID 无效

> ID：12540226
> 
> 赞同：2
> 
> 时间：2012-09-22T02:34:17.710
> 
> 标签：perl, pgp

我遇到的问题是[Crypt::OpenPGP](https://metacpan.org/module/Crypt%3a%3aOpenPGP)无法解密由 GPG 编码的消息。看来我[不是第一个](http://www.perlmonks.org/?node_id=958887)遇到这个问题的人。但是在那个线程上没有找到解决方案。

```
my $pgp = load_class('Crypt::OpenPGP')->new;
$pgp->handle(
     Data => $encrypted,
) or confess $pgp->errstr; 
```

Crypt::OpenPGP 正确提示输入密钥密码，成功找到密钥，并且我已经测试以确保密码可与 GPG 一起使用。但是当尝试使用 Crypt::OpenPGP 解密消息时，我得到了错误。

`Symkey decrypt failed: Invalid secret key ID`

根据线程以下已测试

1.  用 gpg 加密，用 gpg 解密。
    *   工作正常，符合预期
2.  使用 Crypt::OpenPGP 使用 perl 加密并使用 gpg 解密。
    *   工作正常。
3.  使用 Crypt::OpenPGP 使用 perl 加密，使用 Crypt::OpenPGP 使用 perl 解密
    *   工作正常。
4.  使用 gpg 加密并使用 Crypt::OpenPGP 使用 perl 解密
    *   失败并显示“Symkey 解密失败：密钥 ID 无效”消息。这是上面描述的情况

这似乎反映了我自己的观察，尽管我没有测试过其中的一些。有谁知道原因甚至更好的解决方法？

# python - 整数查找器问题

> ID：12540232
> 
> 赞同：0
> 
> 时间：2012-09-22T02:36:03.030
> 
> 标签：python, random

我正在尝试使用此代码创建一个函数来查找您想要的数字：

```
def get(x):
    y=1
    while (x/y != 1):
        y= y+1
    return y 
```

但它一直给我答案的一半 + 1。就像，如果我输入 6，它给我 4，如果我输入 500，它给我 251。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:42:32.993

Your problem is that it is doing integer division. So, `6/4` evaluates to 1\. (In python3, true division would kick in and I think your test would work)

The best way to fix this would be to do something like:

```
while x != y:
    ... 
```

And of course, these tests should really only be done using integers...once you pass a floating point number in, it's hard to say what will happen.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T02:50:46.180

我认为这就是您要寻找的-

```
 def get(x):
     y=1.0
     while (x/y != 1):
             print y, x
             y= y+1
     return y 
```

试试下面的函数调用 -

```
>>> get(5.0) 
```

1 和 1.0 可以解决问题。查看 python 文档以获得更多理解！

# javascript - appendChild 或 append 或 insert - 没有任何效果。TD插入错误的地方

> ID：12540235
> 
> 赞同：0
> 
> 时间：2012-09-22T02:37:30.737
> 
> 标签：javascript, jquery, prototype

我在这里玩得很开心。这似乎很容易，但我无法让它工作。我的目标是在另一个 TD 之后插入/追加/追加一个 TD ......所以你会有..

```
<table>
<tr>
<td class="eve"></td>
<td class="mo"></td>
</tr>
</table> 
```

简单吧？呐。

这是我的代码。

```
 var r = new Element('tr',{'class':'trclass'});
  var td2 = new Element('td',{'class':'mo'});
  var artDiv = new Element('div',{'class':'summary'});
  var td = new Element('td',{'class':'eve'});
  var div = new Element('div',{'class':'pad1','style':'overflow=hidden'}); 
```

我设置了一些元素。

```
 div.innerHTML = '<a href="' + disp.link + '" class="Link">somelink</a>';
artDiv.innerHTML = '<a href="'+ disp.link +'" class="url">' + disp.name  +'</a>';
td2.innerHTML = '<div class="pad1"><a href="' + disp.link + '" class="mo">' + disp.linkName  +'</a></div>';

  div.appendChild(artDiv);
   td.appendChild( div );
    r.appendChild(td);
    r.appendChild(td2) 
```

我尝试过仅使用原型，仅使用 jquery 等。当我尝试在控制台中执行此操作时，我可以让它工作。但是当它坐在页面中时，无论我做什么......

我明白了：

```
<table>
<tr>
<td class="mo"></td> <-- THIS should be last TD, but no matter what, always goes first.
<td class="eve"></td>  
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:50:11.233

您想要 jQuery 或原型中的解决方案吗？

使用 jQuery，一个简单的解决方案是首先将 id/class 添加到您的表中。在那之后，它是非常直截了当的：

```
$(function() {
  var tdElement = "<td class='eve'></td>"; //the element you are inserting

  //lets say your table class is 'foo'
  $('.foo > tr').append(tdElement);
}); 
```

现在这是假设你只有一排。但这会将 tdElement 附加到 tr 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T02:58:37.403

如果您可以在创建 TR 时为其分配一个 ID，那么您应该能够使用 jQuery 以一种非常简单的方式附加到它们。这是一个快速的[小提琴](http://jsfiddle.net/6agVs/)。

```
$(document).ready(function(){
    var td1 = "<td class='mo'>Cell Mo</td>"
    var td2 = "<td class='eve'>Cell Eve</td>"
    $("#targetRow").append(td1);
    $("#targetRow").append(td2);
});​ 
```

如果您无法分配 TRs ID 值但知道它们在表格中的顺序，您始终可以仅在表格的 TRs 上选择并使用 eq() 作为另一个选项来处理它们。

# codeigniter - 在 Codeigniter 中动态更改默认控制器

> ID：12540238
> 
> 赞同：0
> 
> 时间：2012-09-22T02:38:16.233
> 
> 标签：codeigniter, controller

我想在 codeigniter 中更改我的默认控制器是否可能？对于客人，我想展示不同的控制器和成员另一个

```
if($this->cuser->usercode()){
//loading default controller

$route['memebers_welcome'];

}else{

$route['guests_welcome'];

} 
```

如果可能，请告知，否则我将不得不使用重定向功能，我认为这不是好的做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T03:05:31.120

Perhaps a different perspective on the issue. Instead of trying to choose your controller based on whether a user is logged in, it's quite common to have your 'welcome' controller load a different view for a logged in or not logged in user.

```
class Welcome extends CI_Controller {
    public function index() {
        # ...
        if ($this->cuser->usercode()) {
            $this->load->view('members_welcome');
        } else {
            $this->load->view('guests_welcome');
        }
    }
    # ...
} 
```

Alternatively, if there are completely separate sets of logic that makes sense to make separate functions, you can easily call another controller method without needing to reload the page.

```
class Welcome extends CI_Controller {
    public function index() {
        if ($this->cuser->usercode()) {
            $this->_members_welcome();
        } else {
            $this->_guests_welcome();
        } 
    }

    private function _members_welcome() {
        # ... do stuff for members
    }

    private function _guests_welcome() {
        # ... do stuff for guests
    }
} 
```

It's much better to use this method that to actually direct users as you don't want to cause unecessary overhead and page loads.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T04:46:44.810

是的，你可以。这是重用代码的好方法。

### 创建自己的控制器

例如，如果您想要一个用户控制器和管理员控制器。转到**application/core**文件夹并在那里创建它们：

```
class UserController extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
        if ( !is_logged() )
        {
            show_error('get out of here') // sorry, you are not logged
        }
        // load necessary libraries or helpers for logged user

    }
} 
```

如果你想要一个管理区域的控制器，你可以这样做：

```
class AdminController extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
        if ( !is_admin() )
        {
            show_error('only for admins') // sorry, you are not admin
        }
        // load necessary libraries or helpers for admin

    }
} 
```

### 将控制器加载到系统中

为了让控制器作为 CI 系统的一部分加载，您需要指定它们的驻留位置。因此，在**application/config/config.php**文件的末尾放置：

```
function __autoload($class)
{
    if (strpos($class, 'CI_') !== 0)
    {
        if (file_exists($file = APPPATH . 'core/' . $class . EXT))
        {
            include $file;
        }

        else if (file_exists($file = APPPATH . 'libraries/' . $class . EXT))
        {
            include $file;
        }
    }
} 
```

### 测试你的控制器

现在您可以扩展上述控制器之一以根据您的网站区域使用它：

```
class Logout extends UserController{ 
```

或者

```
class EditUser extends AdminController{ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T02:58:04.550

我不这么认为。你不能因为要更改控制器，首先你必须确保用户是否登录，你可以从控制器中检查它，这是最简单/正确的方法，AFAIK。

因此，只需为这两种类型的用户保留一个默认控制器并检查用户类型，如果用户不是成员，则从该控制器/页面重定向到新的控制器/页面。您可以在默认控制器的构造函数中检查这一点。

# haskell - 最后一个元素没有在树中插入

> ID：12540241
> 
> 赞同：0
> 
> 时间：2012-09-22T02:38:51.170
> 
> 标签：haskell

所以我被要求在 Haskell 中制作一个二叉树，并将整数列表作为输入。下面是我的代码。我的问题是列表的最后一个元素没有插入到树中。例如 [1,2,3,4] 它只插入到树中，直到“3”和 4 没有插入到树中。

```
 data ArbolBinario a = Node a (ArbolBinario a) (ArbolBinario a) | EmptyNode
deriving(Show)

    insert(x) EmptyNode= insert(tail x) (Node (head x) EmptyNode EmptyNode)

    insert(x) (Node e izq der)
     |x == [] = EmptyNode --I added this line to fix the Prelude.Head Empty List error, after I added this line the last element started to be ignored and not inserted in the tree
     |head x == e = (Node e izq der)
     |head x < e = (Node e (insert x izq) der)
     |head x > e = (Node e izq (insert x der)) 
```

关于这里发生了什么的任何想法？非常感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T03:33:15.093

在这里没有帮助的是您正在混淆关注点。为什么不使用一个将列表插入树中的方法，而不是使用一个将单个元素插入树中的函数，然后使用另一个将列表中的所有元素添加到树中的函数呢？例如。

```
data ArbolBinario a = Node a (ArbolBinario a) (ArbolBinario a)
                    | EmptyNode
                    deriving(Show)

-- insert handles only one element
insert :: (Ord a) => a -> ArbolBinario a -> ArbolBinario a
insert x EmptyNode = Node x EmptyNode EmptyNode
insert x n@(Node e izq der)
  | x == e = n
  | x < e = (Node e (insert x izq) der)
  | x > e = (Node e izq (insert x der))

-- insertList folds the list into a tree
insertList :: (Ord a) => [a] -> ArbolBinario a -> ArbolBinario a
insertList xs t = foldl (\a x -> insert x a) t xs 
```

使用类似`foldl`的东西让您不必担心到达列表末尾时会发生什么。结果是：

```
insertList [5, 3, 7, 9, 1, 4, 2, 6] EmptyNode
-- output:
-- Node 5 (Node 3 (Node 1 EmptyNode (Node 2 EmptyNode EmptyNode)) (Node 4 EmptyNode EmptyNode)) (Node 7 (Node 6 EmptyNode EmptyNode) (Node 9 EmptyNode EmptyNode)) 
```

希望有帮助。

**编辑 - -**

我还想指出，遵循其他 Haskell 函数所做的事情并更改参数的顺序可能是一个更好的主意。看到这个：

```
data ArbolBinario a = Node a (ArbolBinario a) (ArbolBinario a)
                    | EmptyNode
                    deriving(Show)

insert :: (Ord a) => ArbolBinario a -> a -> ArbolBinario a
insert EmptyNode x = Node x EmptyNode EmptyNode
insert n@(Node e izq der) x
  | x == e = n
  | x < e = (Node e (insert izq x) der)
  | x > e = (Node e izq (insert der x))

insertList :: (Ord a) => ArbolBinario a -> [a] -> ArbolBinario a
insertList = foldl insert 
```

这意味着您的函数可以更好地与*通常的嫌疑人*一起使用（例如折叠、扫描等）。您可以看到 的定义是如何`insertList`变得更简单的。

仅供参考：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T13:41:43.753

你有一些关于更简洁的方法来编写`insert`函数的建议，但是到目前为止没有人告诉你你的实现出了什么问题，所以让我从这个开始：

```
data ArbolBinario a = Node a (ArbolBinario a) (ArbolBinario a) | EmptyNode
                      deriving(Show)

insert(x) EmptyNode= insert(tail x) (Node (head x) EmptyNode EmptyNode)

insert(x) (Node e izq der)
 |x == [] = EmptyNode
 |head x == e = (Node e izq der)
 |head x < e = (Node e (insert x izq) der)
 |head x > e = (Node e izq (insert x der)) 
```

为简洁起见，我使用较短的列表并缩写`EmptyNode`为`E`.

```
insert [1,2] E
~> insert [2] (Node 1 E E)
--   2 > 1, so the last clause, head x > e, is used
~> Node 1 E (insert [2] E)
-- insertion in empty tree, first equation is used
~> Node 1 E (insert [] (Node 2 E E))
-- Now the first clause of the second equation is used
~> Node 1 E (E) 
```

当所有元素都被插入并且你到达列表的末尾时，你不是什么都不做，而是删除节点。解决此问题的最小更改是将第二个等式的第一个子句更改`insert`为

```
 |x == [] = Node e izq der 
```

但是，这仍然会留下一个失败案例（您已经拥有），

```
insert [] EmptyNode = insert (tail []) (Node (head []) EmptyNode EmptyNode) 
```

会导致`*** Exception: Prelude.tail: empty list`.

除了是上述错误的原因之外，这里的`head`and的使用`tail`也是非常不习惯的。定义这样一个函数的常用方法是在列表上进行模式匹配。也是unidiomatic 是你检查一个空列表，，`x == []`惯用的方法是使用`null x`它。在这种情况下，其他守卫要求元素类型是 的实例`Ord`，因此没有语义变化，但通常对元素类型`x == []`施加`Eq`约束，同时`null x`适用于任意类型。

最后，尽管您认为您的守卫`head x == e`, `head x < e`,`head x > e`涵盖了所有可能性（对于有效的`Ord`实例，它们确实如此 - 除了浮点类型，其中 a`NaN`既不等于也不小于也不大于任何值，但这些`Ord`实例是否有效是一个问题辩论），编译器无法确定这一点，并且会（当被要求对此类事情发出警告时，通常应该使用 进行编译`-Wall`）警告`insert`. 为了以编译器知道所有情况都被覆盖的方式覆盖所有情况，最后一个守卫应该有一个`otherwise`条件。

将您的代码变成更惯用的形式（并修复突出的`insert [] EmptyNode`错误）会导致

```
insert :: Ord a => [a] -> ArbolBinario a -> ArbolBinario a
insert []      t         = t     -- if there's nothing to insert, don't change anything
insert (x:xs)  EmptyNode = insert xs (Node x EmptyNode EmptyNode)
-- Using as-patterns, `l` is the entire list, `x` its head, `t` the entire tree
insert l@(x:_) t@(Node e izq der)
    | x == e             = t
    | x < e              = Node e (insert l izq) der
    | otherwise          = Node e izq (insert l der) 
```

现在我们可以寻找进一步的问题。一个可能意想不到的方面`insert`是，如果要插入的元素列表的头部已经在树中，则整个列表被丢弃并且树完全不变，例如

```
insert [1 .. 10] (Node 1 EmptyNode EmptyNode) = Node 1 EmptyNode EmptyNode 
```

处理此类事情的常用方法是仅删除列表的头部并仍然插入其余元素。这可以通过将定义的最后一个方程更改为

```
insert l@(x:xs) t@(Node e izq der)
    | x == e             = insert xs t
    | x < e              = Node e (insert l izq) der
    | otherwise          = Node e izq (insert l der) 
```

更可能是意想不到的方面

*   `insert xs EmptyNode`总是产生一棵树，其中每个节点只有一个（或没有，对于最低的）非空子树，即构造的树基本上是一个列表。
*   定义的最后一个等式中的子句强烈建议树应该是二叉搜索树，但定义不维护该属性。例如

    ```
    insert [1,10] (Node 3 (Node 2 E E) (Node 7 E E))
    ~> Node 3 (insert [1,10] (Node 2 E E)) (Node 7 E E)
    ~> Node 3 (Node 2 (insert [1,10] E) E) (Node 7 E E)
    ~> Node 3 (Node 2 (insert [10] (Node 1 E E)) E) (Node 7 E E)
    ~> Node 3 (Node 2 (Node 1 E (Node 10 E E)) E) (Node 7 E E)

                           3
                          / \
                         /   \
                        2     7
                       /
                      /
                     1
                      \
                       \
                        10 
    ```

解决这些问题的最好方法是，作为[OJ。之前建议](https://stackoverflow.com/a/12540453/1011995)，将单个元素插入树中的情况分开

```
insertOne :: Ord a => a -> ArbolBinario a -> ArbolBinario a
insertOne x EmptyNode = Node x EmptyNode EmptyNode
insertOne x t@(Node e izq der)
    | x == e    = t
    | x < e     = Node e (insertOne x izq) der
    | otherwise = Node e izq (insertOne x der) 
```

并使用它来插入列表中的每个元素，从顶部找到它的位置：

```
insertList :: Ord a => [a] -> ArbolBinario a -> ArbolBinario a
insertList []     t = t
insertList (x:xs) t = insertList xs (insertOne x t)
-- Alternative way:
-- insertList (x:xs) t = insertOne x (insertList xs t) 
```

这些计算模式非常普遍，以至于它们已在以下定义的函数中被捕获`Prelude`：

```
insertList xs t = foldl (flip insertOne) t xs
-- or, for the alternative way:
-- insertList xs t = foldr insertOne t xs 
```

正如你所看到的`insertOne`，对于左折叠的自然参数顺序，我们需要应用`flip`组合子来交换它的参数顺序，这暗示了列表的自然折叠操作是右折叠的事实`foldr`。

然而，由于`insertOne`在它可以做任何事情之前需要知道它的树参数，所以它不是一个为右折叠而量身定制的函数，在左折叠中使用它可能更有效（但实际上要获得效率增益，人们会必须使用严格的左折叠[`foldl'`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Data-List.html#v:foldl)，可从[`Data.List`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Data-List.html)和更严格的版本`insertOne`)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T03:32:23.883

为了解决这个问题，我使用了另一个函数

```
data Tree a = Node a (Tree a) (Tree a) | EmptyNode deriving(Show)

insert :: Ord a => a -> Tree a -> Tree a
insert x EmptyNode = Node x EmptyNode EmptyNode
insert x (Node y left right)
    | x == y = (Node y left right)
    | x <  y = (Node y (insert x left) right)
    | x >  y = (Node y left (insert x right))

buildtree :: Ord a => [a] -> Tree a
buildtree []     = EmptyNode
buildtree (x:xs) = insert x (buildtree xs)

tree :: Ord a => [a] -> Tree a
tree xs = buildtree (reverse xs) 
```

并且要构造二叉树，您需要调用`buildtree`函数。问题是您需要先反转列表。所以，`tree`会做好工作。

```
*Main> insert 5 (insert 12 (insert 2 (insert 10 EmptyNode)))
Node 10 (Node 2 EmptyNode (Node 5 EmptyNode EmptyNode)) (Node 12 EmptyNode EmptyNode)

*Main> tree [10,2,12,5]
Node 10 (Node 2 EmptyNode (Node 5 EmptyNode EmptyNode)) (Node 12 EmptyNode EmptyNode)

*Main> buildtree [5,12,2,10]
Node 10 (Node 2 EmptyNode (Node 5 EmptyNode EmptyNode)) (Node 12 EmptyNode EmptyNode) 
```

**更新**

你可以避免使用另一个函数，这样：

```
insert2 :: Ord a => [a] -> Tree a -> Tree a
insert2 []     t = t
insert2 (x:xs) EmptyNode = insert2 xs (Node x EmptyNode EmptyNode)
insert2 (x:xs) (Node y left right)
            | x == y = insert2 xs (Node y left right)
            | x <  y = insert2 xs (Node y (insert2 [x] left) right)
            | x >  y = insert2 xs (Node y left (insert2 [x] right)) 
```

但是，它不如使用 foldl 或其他方式高效，唯一的好处是只使用一个函数来完成所有操作，不需要反向。

```
*Main> insert2 [10,2,12,5] EmptyNode
Node 10 (Node 2 EmptyNode (Node 5 EmptyNode EmptyNode)) (Node 12 EmptyNode EmptyNode) 
```

# c++ - 使用现有项目进行 CppUnit 测试

> ID：12540244
> 
> 赞同：1
> 
> 时间：2012-09-22T02:39:31.453
> 
> 标签：c++, qt, unit-testing, cppunit

我是 CppUnit 测试的新手，我有一组基本的问题。

因此，CppUnit 测试需要一个 main 函数来运行。但是，我希望这个 main 与我要测试的项目的 main 分开。因此，由于您不能在一个项目中拥有 2 个主要功能，因此我创建了一个子项目（顺便说一下，我正在使用 Qt）来容纳我的所有测试类。然而，这似乎导致了它自己的一系列问题，因为在 Qt 中我可以指定我想要运行的子项目。这可能意味着我不能让它们成为子项目并将它们分开。

我习惯了 JUnit，其中有一对一的类来测试类，当我想在一个类上运行测试用例时，我会右键单击它并运行。不需要主要功能。

我想我正在寻找有关如何测试当前没有测试的现有成熟项目的解释。我发现的所有内容都假设您正在开发并行项目及其测试。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:01:30.640

CPPUnit 足够灵活，您可以轻松地测试大部分代码的功能区域：我称之为消费端和实现端。

从一个大型的预先存在的库开始，设置外部“消耗”测试用例通常是一个好主意，这些测试用例在 cppunit 中大量使用了 Fixtures。为此，您实际上是在测试对象类的外向内查看功能。您将在夹具中设置您熟悉的对象并为它们编写测试用例。随着时间的推移，添加越来越多的内部测​​试用例，这些测试用例特定于每个类的内部，并在它们与交互的类相关时配对。最终，您编写的所有新代码都将集成或配对测试用例（随着时间的推移，实际上会成百上千）。

我会第一个告诉你 cppunit 不是灵丹妙药，而且远没有*junit*灵活（语言本身缺乏反射是一个重要原因）。但这仍然绝对值得花时间。

# asp.net-mvc - MVC 3 实体数据模型不拾取外键

> ID：12540246
> 
> 赞同：1
> 
> 时间：2012-09-22T02:39:47.497
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, associations, ado.net-entity-data-model

在专注于数据库多年后，我将重返编程领域。我曾经是 VB6 中的一把枪，但 .Net 让我陷入困境。

我正在尝试从已经存在的数据库中构建 MVC 中的 Web 应用程序。我大致遵循这个：http: [//msdn.microsoft.com/en-us/data/gg685489.aspx](http://msdn.microsoft.com/en-us/data/gg685489.aspx)

我正在使用 Visual Web Developer Express 2010 10.0.40219.1 SP1Rel 我不确定如何计算各种模板和插件的版本。

我正在从现有数据库生成实体数据模型。我使用的三个表定义了主键和外键，但是当我导入它时，数据模型中没有创建任何关联

似乎有很多不同的方法来构建支持数据库的 Web 应用程序。如果我更熟悉语法，我现在可以手动编码了。

Q1：知道为什么不创建关联吗？

Q2：您能否验证我需要关联来告诉代码生成器如何将所有内容组合在一起？（即在代码中自动生成适当的方法）。我看不出它会如何工作。

Q3：如果我手动创建关联并构建，我会收到一些错误。似乎创建关联会针对实体（'CustomerCustomer_ID）创建一个属性，这需要映射到某些东西。但是，当我按“表映射”时，它不在要映射的列表中，我无法添加它。

```
Error   1 Error 3004: Problem in mapping fragments starting at line 198:
No mapping       specified for properties Task.CustomerCustomer_ID in Set Tasks.
An Entity with Key (PK) will not round-trip when: Entity is type [zzzz.Task]
Error   2 Error 11009: Property 'CustomerCustomer_ID' is not mapped. 
```

这是我期望会生成关联的两个表的删节 DDL

```
CREATE TABLE [dbo].[Customers](
    [Customer_ID] [int] IDENTITY(1,1) NOT NULL,
    [Customer_Name] [varchar](50) NOT NULL,
........
....
CONSTRAINT [PK_Customers] PRIMARY KEY CLUSTERED 
([Customer_ID] ASC))

CREATE TABLE [dbo].[Tasks](
    [Task_ID] [int] IDENTITY(1,1) NOT NULL,
    [TaskType_ID] [int] NOT NULL,
    [Emp_ID] [int] NOT NULL,
    [Customer_ID] [int] NOT NULL,
    [Status_ID] [int] NOT NULL,
    [Task_Desc] [varchar](300) NULL,
.....
..
CONSTRAINT [PK_Tasks] PRIMARY KEY CLUSTERED 
(
    [Task_ID] ASC
)

ALTER TABLE [dbo].[Tasks]  WITH CHECK ADD  CONSTRAINT [FK_Tasks_Customers] 
FOREIGN KEY([Customer_ID])
REFERENCES [dbo].[Customers] ([Customer_ID])
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:07:45.223

如上所述，这就是我解决此问题的方法：

我创建了剩余的缺失关联，如下所示：

1.  右键单击设计表面，添加关联
2.  定义关联，给它一个名字，设置正确的基数
3.  UNTICK 'Add foreign key properties the ....' 然后按 OK
4.  单击工作服务上的关联，然后在属性页面中单击引用约束属性并定义它（主要是您的“查找”端）

感谢您尝试帮助所有人，但我怀疑我的问题可能难以重现。

# mercurial - unicode filenames on windows mercurial 2.5 (or future)

> ID：12540247
> 
> 赞同：8
> 
> 时间：2012-09-22T02:40:02.160
> 
> 标签：mercurial

First off, I am aware of [Mercurial: Problem with non-ascii letters in filenames between Windows and Linux](https://stackoverflow.com/questions/7256708/mercurial-problem-with-non-ascii-letters-in-filenames-between-windows-and-linux) and [What DVCS support Unicode filenames?](https://stackoverflow.com/questions/829682/what-dvcs-support-unicode-filenames). But they are old, and do not apply to the latest versions of mercurial.

They both mention the [FixUtf8 extension](https://www.mercurial-scm.org/wiki/FixUtf8Extension) - which does **not** work with the latest version of mercurial (2.3.1 as of this writing) and apparently has not worked since mercurial 2.0\. In fact enabling that extension will prevent you from adding any files at all, even plain "vanilla" ascii filenames. The FixUtf8Extension appears to have been abandoned - it's last commit was in 2010.

I have been a happy mercurial user up until now, but I am now on an international project where support for non-ascii filenames is critical. I will have to look at alternate version control systems if this can't be addressed in mercurial.

Is there any support for unicode filenames at all with the latest versions of mercurial on Windows?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T11:12:12.127

不，Mercurial 仍然不支持文件名的转码。也就是说，它将文件名作为二进制字符串签入和签出，如果您需要在文件名编码不兼容的系统之间移动文件，您将遇到问题。

如果您团队中的每个人都使用具有相同代码页的 Windows，那么您可以使用非 ASCII 字符就好了。它们将存储在存储库中您使用的任何代码页中，但每个人都可以使用这些文件。

如果您需要在平台之间移动文件，那么现在坚持使用 ASCII 文件名。

有一个[Windows UTF-8 计划](http://mercurial.selenic.com/wiki/WindowsUTF8Plan)正在进行中，[FUJIWARA Katsunori 一直在努力](http://mercurial.markmail.org/search/?q=from%3A%22FUJIWARA+Katsunori%22+list%3Acom.selenic.mercurial-devel+vfs)，但它还没有准备好（2012 年 9 月）。

# php - 上传没有产生任何结果

> ID：12540248
> 
> 赞同：2
> 
> 时间：2012-09-22T02:40:42.660
> 
> 标签：php, file-upload

我已经制作了这个脚本来上传远程文件，但是文件没有上传到服务器，并且数据库`var1`仍然是空的。这是我的代码。

HTML：

```
<form enctype="multipart/form-data" id="form1" method="post" action="">
    <p><label>Upload songs</label>      
    <input type="text" name="song"><input type="submit" value="Submit" class="button"></p>
</form> 
```

PHP：

```
$uri = copy1_file($_POST['song']);
$story['v1'] = $uri;

        $url = $_POST['song'];
    $file = fopen ($url, "rb");
    if ($file) {
        $newf = fopen ($uri, "wb");
        if ($newf) {
            while(!feof($file)) {
                fwrite($newf, fread($file, 1024 * 8 ), 1024 * 8 );
            }
        }
    }
    if ($file) {
        fclose($file);
    }
    if ($newf) {
        fclose($newf);
    }
    else {
        return false;
    }
} 
```

我检查了错误日志，但什么都没有。我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:52:09.883

阅读[PHP 文件上传](http://php.net/manual/en/features.file-upload.php)。

试试这个来调试你的脚本：

```
var_dump($_FILES); 
```

你看到什么了吗？

**编辑：**好的，我看到你更清楚地定义了“远程文件”。您必须使用“文本”输入来接收 URL。您是如何绕过标准文件选择对话框的？

如果您只是将`<input/>`类型更改为“文本”，您的代码将按原样运行。

**编辑 2：**我注意到你更新了你的帖子，`<input type="text"/>`所以你已经有一个 URL 可以通过你的脚本。检查您的主机是否启用了[allow_url_fopen](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)。否则，您的 URL 将不会被`fopen()`. 您将不得不`cURL`改用。

**编辑 3：**可能是您的`copy1_file`函数从未真正返回 uri 吗？该函数的代码中有很多错误。例如：`copy1_file`正在接收一个 url，为什么它`$file['name']`在顶部？以后`$_POST`直接引用？还有更多错误。仔细检查并更正它们，然后它应该可以正常工作，因为您说`fopen(url)`已知可以与您的主机一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T02:45:20.937

您需要使用`$_FILES`数组来访问上传的文件而不是`$_POST`

这是处理文件上传的示例代码：

```
$pathToSaveFile = '...'; // this is the file path where the uploaded file should be saved
move_uploaded_file($_FILES['song']['tmp_name'], $pathToSaveFile); 
```

**更新**

如果您只需要通过 URL 上传文件，则不需要`<input type="file">`，只需使用简单的`<input type="text">`，在用户插入 URL 并提交后，您可以使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)和[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)函数：

```
file_put_contents($pathToSavePath, file_get_contents($_POST['song'])); 
```

为了能够使用这些函数下载远程文件，请确保`allow_url_fopen`PHP 的选项设置为 TRUE

# java - 使用 Spring 处理 MultipartForm

> ID：12540249
> 
> 赞同：5
> 
> 时间：2012-09-22T02:40:58.337
> 
> 标签：java, spring, resteasy

此代码是处理上传的 RestEasy 代码：

```
@Path("/fileupload")
public class UploadService {
    @POST
    @Path("/upload")
    @Consumes("multipart/form-data")
    public Response create(@MultipartForm FileUploadForm form) 
    {
       // Handle form
    }
} 
```

使用 Spring 有什么类似的东西可以`MultipartForm`像这样处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:05:21.547

Spring 包含一个依赖于[commons-fileupload](http://commons.apache.org/fileupload/)的 multipartresolver ，因此要使用它，您必须将其包含在构建中。

在你的 applicationContext.xml

```
<bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="<max file size>"/>
</bean> 
```

在您的控制器中，使用 org.springframework.web.multipart.MultipartFile。

```
@RequestMapping(method=RequestMethod.POST, value="/multipartexample")
public String examplePost(@RequestParam("fileUpload") MultipartFile file){
    // Handle form upload and return a view
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:55:41.547

这是一个示例，展示了如何使用 MVC Annotations 在 Spring 中实现类似的功能：

```
@RequestMapping(method=RequestMethod.POST, value="/multipartexample")
public String examplePost(@ModelAttribute("fileUpload") FileUpload fileUpload){
    // Handle form upload and return a view
    // ...
}

@InitBinder
public void initBinder(ServletRequestDataBinder binder) {
    binder.registerCustomEditor(byte[].class, new ByteArrayMultipartFileEditor());
}

public class FileUpload implements Serializable {
    private MultipartFile myFile;

    public MultipartFile getMyFile() {
        return myFile;
    }

    public void setMyFile(MultipartFile myFile) {
        this.myFile = myFile;
    }
} 
```

假设文件元素的名称是“myFile”，您应该能够从 html 表单发布到此端点。您的表单可能如下所示：

```
<form:form commandName="fileUpload" id="fileUploadForm" enctype="multipart/form-data">
    <form:input type="file" path="myFile" id="myFile"/>
</form:form> 
```

@InitBinder 代码很重要，因为它指示 Spring 将文件转换为字节数组，然后可以将其转换为 MultipartFile

# django - Django：“模块”对象没有属性“__file__”

> ID：12540257
> 
> 赞同：9
> 
> 时间：2012-09-22T02:42:28.253
> 
> 标签：django

我在 Windows 机器上设置了一个新的开发环境，在成功安装 Python 和 django 之后，我在新机器上克隆了我的存储库。

运行`manage.py syncdb`成功后，我跑了`manage.py runserver`，但是点击`localhost:8000`导致标题上的错误。我从那里跑了`django-admin.py startproject testproject`又跑`manage.py runserver`，那个项目加载得很好，所以我想我可能已经排除了我的 django 安装，但我需要下一步。

这是我的应用程序中炸弹的堆栈跟踪。您能给我的任何帮助将不胜感激。

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'api',
 'contact',
 'lessons',
 'mainsite',
 'piston',
 'registration',
 'utils')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\Users\Matthew\myapp\harmonyschedules\mainsite\views.py" in index
  16\.     return render_to_response('mainsite/index_redes.html', context_instance=RequestContext(request))
File "C:\Python27\lib\site-packages\django\shortcuts\__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "C:\Python27\lib\site-packages\django\template\loader.py" in render_to_string
  169\.         t = get_template(template_name)
File "C:\Python27\lib\site-packages\django\template\loader.py" in get_template
  145\.     template, origin = find_template(template_name)
File "C:\Python27\lib\site-packages\django\template\loader.py" in find_template
  128\.             loader = find_template_loader(loader_name)
File "C:\Python27\lib\site-packages\django\template\loader.py" in find_template_loader
  95\.             mod = import_module(module)
File "C:\Python27\lib\site-packages\django\utils\importlib.py" in import_module
  35\.     __import__(name)
File "C:\Python27\lib\site-packages\django\template\loaders\app_directories.py" in <module>
  24\.     template_dir = os.path.join(os.path.dirname(mod.__file__), 'templates')

Exception Type: AttributeError at /
Exception Value: 'module' object has no attribute '__file__' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-22T04:20:19.693

导入时会出现问题[`settings.INSTALLED_APPS`](https://github.com/django/django/blob/master/django/template/loaders/app_directories.py)：

```
for app in settings.INSTALLED_APPS:
    try:
        mod = import_module(app)
    except ImportError as e:
        raise ImproperlyConfigured('ImportError %s: %s' % (app, e.args[0]))
    template_dir = os.path.join(os.path.dirname(mod.__file__), 'templates') 
```

似乎更容易确定是哪个模块导致了问题。在 Django 中更容易调试此类问题的一种常见方法是使用[Werkzeug](http://werkzeug.pocoo.org)，您可以在其中拥有一个*浏览*器内调试器，以便在发生错误时快速查看变量的值。

现在，我强烈怀疑导致此问题的模块是`piston`[[相关线程](https://bitbucket.org/jespern/django-piston/issue/173/attributeerror-module-object-has-no)]。`__init__.py`您可以通过在任何目录中创建文件来修复它`piston`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-22T10:35:46.227

当尝试使用不是 Python 包的应用程序时会出现此问题，因此请确保您的应用程序`__init__.py`在其根目录中有文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-09T19:29:32.327

Python 3.X 更新

`__init__.py`虽然您可以在没有文件的情况下导入模块，

> 需要这些`__init__.py`文件才能使 Python 将目录视为包含包

[https://docs.python.org/3/tutorial/modules.html](https://docs.python.org/3/tutorial/modules.html)

没有`__init__.py`，模块就没有`__file__`属性。

```
example/
|-- mod1
|   `-- __init__.py
`-- mod2

>>> import mod1
>>> mod1.__file__
'/tmp/example/mod1/__init__.py'
>>> import mod2
>>> mod2.__file__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: module 'mod2' has no attribute '__file__' 
```

# c++ - 二叉树节点成员分配的运行时错误

> ID：12540261
> 
> 赞同：1
> 
> 时间：2012-09-22T02:42:47.073
> 
> 标签：c++, struct, binary-tree, nodes

我正在编写一个实现`Binary Search Tree (BST)`. 因此，我开始将二叉树节点实现为`struct`. 由于二叉树节点包含两个`pointers`到其他二叉树节点，因此该结构包含指向该结构类型变量的指针。为此，我知道需要结构的前向声明。我已经做到了。然而，对于下面的简单程序，我得到一个运行时错误，该程序除了为所述结构的成员分配一个值之外什么都不做。我不明白为什么。请让我知道原因。

```
#include <iostream>
using namespace std;

struct t_node;

struct t_node
{
       int data;
       t_node* left;
       t_node* right;
};

int main()
{
    t_node *root;
    root->data = 2;

    cin.get();
    return 0;
} 
```

我正在使用`Dev-C++ 4.9.9.2`.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:46:41.457

您需要为节点分配内存。使用`new`：

```
t_node* root = new t_node(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T02:49:37.870

```
t_node *root;
root->data = 2; 
```

不好。您正在取消一个未初始化的指针。

```
t_node *root = new t_node;
root->data = 2 
```

将为您的节点分配内存，并解决您的问题。

# android - 什么是 libcore 及其在 android 中的作用？

> ID：12540278
> 
> 赞同：24
> 
> 时间：2012-09-22T02:46:37.627
> 
> 标签：android

我是android和java的新手。一直在看源码，隐隐觉得可能是Java实现。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-08-17T15:03:57.790

根据这张2016 年的[幻灯片](https://blog.linuxplumbersconf.org/2016/ocw/proposals/3741.html)，Libcore 是 Google 对一些核心 Java 库的实现，例如 java.net、java.util、java.icu (Unicode)、java.math、java.reflect 等等。Libcore 还允许来自 Java 的 POSIX 系统调用。

Libcore 的主分支可以在[这里](https://android.googlesource.com/platform/libcore/+/master)找到。Google 的大部分实现都在文件夹 luni 中，但 libcore 也与 Oracle 代码混合。例如，来自 OpenJDK 的 Oracle 的 JNI 实现在 Android 中的 ojluni 文件夹中使用。所以 libcore 替换了 OpenJDK 的一些功能，但不是全部。

# c# - 带有意外标头错误的 WCF RESTful 调用

> ID：12540280
> 
> 赞同：3
> 
> 时间：2012-09-22T02:47:22.640
> 
> 标签：c#, wcf, rest

使用 C# 客户端和服务器通过 WCF 进行 RESTful 调用，客户端跟踪会暴露此错误：

“信封版本 'EnvelopeNone (http://schemas.microsoft.com/ws/2005/05/envelope/none)' 不支持添加邮件标头。”

完整的堆栈跟踪是：

```
System.InvalidOperationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089

Envelope Version 'EnvelopeNone (http://schemas.microsoft.com/ws/2005/05/envelope/none)' does not support adding Message Headers.

at System.ServiceModel.Channels.MessageHeaders.ValidateHeaderKind(HeaderKind headerKind)
at System.ServiceModel.Channels.MessageHeaders.GetHeaderKind(MessageHeaderInfo headerInfo)
at System.ServiceModel.Channels.MessageHeaders.Insert(Int32 headerIndex, MessageHeader header)
at System.ServiceModel.Channels.MessageHeaders.Add(MessageHeader header)
at Microsoft.VisualStudio.Diagnostics.ServiceModelSink.DiagosticsMessage.AddHeader(String scheme, Boolean enableHttpHeaderUsage, Message message, Byte[] networkBuffer)
at Microsoft.VisualStudio.Diagnostics.ServiceModelSink.EnabledClientEventSink.BeforeSendMessage(Int32 eventingLevel, Message request, IClientChannel channel, ClientRuntime runtime, Boolean fCallback, Boolean fSupportAsmx)
at Microsoft.VisualStudio.Diagnostics.ServiceModelSink.StubClientEventSink.System.ServiceModel.Dispatcher.IClientMessageInspector.BeforeSendRequest(Message&amp; request, IClientChannel channel)
at System.ServiceModel.Dispatcher.ImmutableClientRuntime.BeforeSendRequest(ProxyRpc&amp; rpc)
at System.ServiceModel.Channels.ServiceChannel.PrepareCall(ProxyOperationRuntime operation, Boolean oneway, ProxyRpc&amp; rpc)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)
at Fact.Apprentice.WorkflowServer.IWorkflowEngineBase.Dequeue(Int32 wfid, Int32 mqid)
at Fact.Apprentice.WorkflowTools.WorkflowProxyManager.ProcessCallback(Object state, Boolean timedOut)
at System.Threading._ThreadPoolWaitOrTimerCallback.WaitOrTimerCallback_Context(Object state, Boolean timedOut)
at System.Threading._ThreadPoolWaitOrTimerCallback.WaitOrTimerCallback_Context_t(Object state)
at System.Threading.ExecutionContext.runTryCode(Object userData)
at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading._ThreadPoolWaitOrTimerCallback.PerformWaitOrTimerCallback(Object state, Boolean timedOut) 
```

据我所知，我没有添加任何标题。似乎某种 .NET 诊断过程正在添加自己的。

我的理解也是，过去没有使用 MessageHeaders.Add 进行基于 REST 的标头操作。这是 WCF 诊断区域中的错误/错误配置吗？我应该去哪里解决这个问题？

额外：有趣的是，WCF REST 调用确实有效，即使出现此错误。但是，最终超时会导致整个事情失败。不能说超时是否与此有关。

# java - Joda-Time DateTimeFormatter 类线程安全吗？

> ID：12540282
> 
> 赞同：62
> 
> 时间：2012-09-22T02:49:11.500
> 
> 标签：java, thread-safety, jodatime, date-format

[Joda-Time](http://www.joda.org/joda-time/) `DateTimeFormatter`类[线程安全](https://en.wikipedia.org/wiki/Thread_safety)吗？一旦我得到一个实例`DateTimeFormat.forPattern`，它的各种解析方法可以被多个线程调用吗？DateTimeFormatter 的[Javadocs](http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormatter.html)没有提到线程安全。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-09-22T02:52:34.377

[是的，它是](http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormat.html)：

> DateTimeFormat 是线程安全且不可变的，它返回的**格式化程序也是如此。**

[Java 8 版本](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)也是如此

> **实现要求：**这个类是不可变的和线程安全的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-22T02:53:43.340

快速查看[代码](http://grepcode.com/file/repo1.maven.org/maven2/joda-time/joda-time/2.1/org/joda/time/format/DateTimeFormatter.java#DateTimeFormatter)显示 中没有任何可变的共享状态`DateTimeFormatter`，这将使其成为线程安全的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-28T07:06:41.037

*在检查 Java 的 java.time.format.DateTimeFormatter 线程安全性时，在谷歌的答案之上发现了这个问题*

[正如文档所述](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)，Java 自己的 DateTimeFormatter 也是线程安全的：

> 这个类是不可变的和线程安全的

# mongodb - 嵌入文档上的 Mongoid 相交标准

> ID：12540287
> 
> 赞同：0
> 
> 时间：2012-09-22T02:50:37.630
> 
> 标签：mongodb, mongoid, mongoid3

我正在尝试使用 Mongoid 3 在一些嵌入式文档上获取两个查询的交集。

所以（假例子）想象我有：

```
class Post
  embeds_many :comments

  index 'comments.author_id' => 1
end

class Comments
  embedded_in :post
  belongs_to :author
end 
```

如果我想从用户那里获得带有评论的帖子，我可以这样做

```
Post.where(:'comments.author_id' => User.first.id) 
```

但是，如果我想获得这两个用户都发表评论的帖子怎么办：

```
u1 = User.first.id
u2 = User.last.id
Post.where(:'comments.author_id' => u1.id, :'comments.author_id' => u2.id) 
```

这在 mongoid 3 中不起作用。它用第二个comments.author_id 覆盖第一个comments.author_id，所以你会得到这样的结果：

```
command={:count=>"posts", :query=>{"comments.author_id"=>"505d1eb5f8182b7082000017"}} 
```

我尝试过的其他变体没有任何运气：

```
Post.where(:'comments.author_id' => u1.id).where(:'comments.author_id' => u2.id)
Post.where(:'comments.author_id' => u1.id).and.where(:'comments.author_id' => u2.id)
Post.where(:'comments.author_id' => u1.id).intersect.where(:'comments.author_id' => u2.id)
Post.all_of(:'comments.author_id' => u1.id, :'comments.author_id' => u2.id) 
```

有没有更好的方法来构造这个查询？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:13:58.710

这里的问题是，通过示例 Mongoid 没有机会对它做任何事情，因为您提供了一个 Ruby 哈希，在该方法执行之前，它被评估为只有一个键（因为键是相同）：

Post.where(:'comments.author_id' => u1.id, :'comments.author_id' => u2.id)

你想做的是：

Post.any_in(:'comments.author_id' => [ u1.id, u2.id ])

# matlab - 绘图后防止相机重置

> ID：12540288
> 
> 赞同：0
> 
> 时间：2012-09-22T02:50:40.773
> 
> 标签：matlab, camera

我正在尝试使用`trimesh`. 在每次迭代中，我都会绘制网格。在某些迭代中，我还会更改相机位置方向等。但是相机在绘图后会重置。我希望相机位置在进一步的迭代中保持固定。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:45:32.397

如果您执行 a`clf`或`cla`任何地方，那也会清除轴的`camera*`属性。您必须保存它们并在每次迭代时重新设置它们：

```
g = [];
while ~done

    clf;

    ... %# generate mesh and other elements

    %# set previous Camera* properties
    if ~isempty(g)
        set(gca, g); end

    %# possibly adjust them for the current frame
    ...

    %# save all Camera* properties
    g.CameraPosition     = get(gca, 'CameraPosition');  
    g.CameraTarget       = get(gca, 'CameraTarget');    
    g.CameraUpVector     = get(gca, 'CameraUpVector');
    g.CameraUpVectorMode = get(gca, 'CameraUpVectorMode');
    g.CameraViewAngle    = get(gca, 'CameraViewAngle');

    %# Grab the current frame
    ...

end 
```

或者，您可以保存您创建的所有对象的句柄，并在每次迭代时删除它们。AFAIK，这将保留轴的属性：

```
while ~done

    h(1) = trimesh(...)
    h(2) = patch(...)
    ...

    %# grab the frame
    ...

    %# delete all plot elements instead of clf/cla
    delete(h)

end 
```

虽然还没有测试过最后一个，所以你可能想先做一些实验。

# python - 如何将多个 python 文件组织到一个模块中而不像一个包一样？

> ID：12540290
> 
> 赞同：48
> 
> 时间：2012-09-22T02:51:12.550
> 
> 标签：python, module, package

有没有办法将`__init__.py`多个文件组织成一个**模块**？

原因：模块比包更容易使用，因为它们没有那么多层的命名空间。

通常它会打包，我明白了。问题出在一个包上，“import thepackage”给了我一个空的命名空间。然后，用户必须要么使用“from thepackage import *”（不赞成），要么确切地知道其中包含什么并手动将其拉出到可用的命名空间中。

我想要的是用户执行“导入包”并拥有看起来像这样的漂亮干净的命名空间，公开与项目相关的函数和类以供使用。

```
current_module
\
  doit_tools/
  \
   - (class) _hidden_resource_pool
   - (class) JobInfo
   - (class) CachedLookup
   - (class) ThreadedWorker
   - (Fn) util_a
   - (Fn) util_b
   - (Fn) gather_stuff
   - (Fn) analyze_stuff 
```

维护者的工作是避免在不同的文件中定义相同的名称，当项目像我这样小时，这应该很容易。

如果人们可以做`from doit_stuff import JobInfo`并让它检索类，而不是包含该类的模块，那也很好。

如果我的所有代码都在一个巨大的文件中，这很容易，但我喜欢在事情开始变大时进行组织。我在磁盘上的内容看起来像这样：

```
place_in_my_python_path/
  doit_tools/
    __init__.py
    JobInfo.py
      - class JobInfo:
    NetworkAccessors.py
      - class _hidden_resource_pool:
      - class CachedLookup:
      - class ThreadedWorker:
    utility_functions.py
      - def util_a()
      - def util_b()
    data_functions.py
      - def gather_stuff()
      - def analyze_stuff() 
```

我只将它们分开，所以我的文件不会很大且无法导航。它们都是相关的，尽管有人（可能是我）可能想自己使用这些类而不导入所有内容。

我在各个线程中阅读了许多建议，以下是我可以找到的有关如何执行此操作的每个建议的情况：

如果我**不使用`__init__.py`**，我将无法导入任何内容，因为 Python 不会从 sys.path 进入文件夹。

如果我**使用空白`__init__.py`**，当我`import doit_tools`是一个空的命名空间时，其中没有任何内容。我的文件都没有导入，这使得它更难使用。

如果我**在 中列出子模块`__all__`**，我可以使用（皱眉？）`from thing import *`语法，但我所有的类都在不必要的命名空间障碍后面。用户必须（1）知道他们应该使用`from x import *`而不是`import x`，（2）手动重新洗牌，直到他们可以合理地遵守线宽样式约束。

如果我向 中**添加`from thatfile import X`语句`__init__.py`**，我会更接近，但我有命名空间冲突（？）和额外的命名空间，用于我不想在那里的东西。在下面的示例中，您将看到：

1.  JobInfo 类覆盖了名为 JobInfo 的模块对象，因为它们的名称相同。Python 可以通过某种方式解决这个问题，因为 JobInfo 是`<class 'doit_tools.JobInfo.JobInfo'>`. （doit_tools.JobInfo 是一个类，但 doit_tools.JobInfo.JobInfo 是同一个类......这很纠结，看起来很糟糕，但似乎没有破坏任何东西。）
2.  每个文件名都进入了 doit_tools 命名空间，如果有人正在查看模块的内容，则查看起来会更加混乱。我希望 doit_tools.utility_functions.py 保存一些代码，而不是定义新的命名空间。

.

```
current_module
\
  doit_tools/
  \
   - (module) JobInfo
      \
       - (class) JobInfo
   - (class) JobInfo
   - (module) NetworkAccessors
      \
       - (class) CachedLookup
       - (class) ThreadedWorker
   - (class) CachedLookup
   - (class) ThreadedWorker
   - (module) utility_functions
      \
       - (Fn) util_a
       - (Fn) util_b
   - (Fn) util_a
   - (Fn) util_b
   - (module) data_functions
      \
       - (Fn) gather_stuff
       - (Fn) analyze_stuff
   - (Fn) gather_stuff
   - (Fn) analyze_stuff 
```

同样，仅导入数据抽象类的人在执行“from doit_tools import JobInfo”时会得到与他们预期不同的东西：

```
current_namespace
\
 JobInfo (module)
  \
   -JobInfo (class)

instead of:

current_namespace
\
 - JobInfo (class) 
```

那么，这只是组织 Python 代码的错误方式吗？如果不是，那么将相关代码拆分但仍以类似模块的方式收集它的正确方法是什么？

也许最好的情况是执行'from doit_tools import JobInfo'对于使用该包的人来说有点混乱？

也许是一个名为'api'的python文件，以便使用该代码的人执行以下操作？：

```
import doit_tools.api
from doit_tools.api import JobInfo 
```

============================================

回应评论的例子：

在 python 路径中的文件夹 'foo' 中获取以下包内容。

`foo/__init__.py`

```
__all__ = ['doit','dataholder','getSomeStuff','hold_more_data','SpecialCase']
from another_class import doit
from another_class import dataholder
from descriptive_name import getSomeStuff
from descriptive_name import hold_more_data
from specialcase import SpecialCase 
```

`foo/specialcase.py`

```
class SpecialCase:
    pass 
```

`foo/more.py`

```
def getSomeStuff():
    pass

class hold_more_data(object):
    pass 
```

`foo/stuff.py`

```
def doit():
    print "I'm a function."

class dataholder(object):
    pass 
```

做这个：

```
>>> import foo
>>> for thing in dir(foo): print thing
... 
SpecialCase
__builtins__
__doc__
__file__
__name__
__package__
__path__
another_class
dataholder
descriptive_name
doit
getSomeStuff
hold_more_data
specialcase 
```

`another_class`并且`descriptive_name`是否有杂乱无章的东西，并且在它们的名称空间下还有额外的 doit() 副本。

如果我在名为 Data.py 的文件中有一个名为 Data 的类，当我执行“从数据导入数据”时，我会遇到命名空间冲突，因为 Data 是当前命名空间中的一个类，它位于模块 Data 中，不知何故也在当前命名空间。（但 Python 似乎能够处理这个问题。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-22T03:02:00.013

你可以这样做，但这并不是一个好主意，而且你正在与 Python 模块/包的工作方式作斗争。通过在其中导入适当的名称，`__init__.py`您可以使它们在包命名空间中可访问。通过删除模块名称，您可以使它们无法访问。（有关为什么需要删除它们，请参阅[此问题](https://stackoverflow.com/questions/8541716/python-import-package-subpackage-should-not-show-up-in-symbol-table)）。所以你可以用这样的东西接近你想要的东西（in `__init__.py`）：

```
from another_class import doit
from another_class import dataholder
from descriptive_name import getSomeStuff
from descriptive_name import hold_more_data
del another_class, descriptive_name
__all__ = ['doit', 'dataholder', 'getSomeStuff', 'hold_more_data'] 
```

但是，这将破坏后续的尝试`import package.another_class`。通常，如果不将其作为对该模块的可导入引用`package.module`进行访问，则无法从 a 导入任何内容（尽管您可以使用 block ）。`package.module``__all__``from package import module`

更一般地说，通过按类/函数拆分代码，您正在使用 Python 包/模块系统。Python 模块通常应该包含您想要作为一个单元导入的内容。为方便起见，直接在顶级包命名空间中导入子模块组件并不少见，但反过来——试图隐藏子模块并*只*允许通过顶级包命名空间访问它们的内容——将导致到问题。此外，尝试“清理”模块的包命名空间没有任何好处。这些模块应该在包命名空间中；那是他们所属的地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T02:59:10.280

`__all__ = ['names', 'that', 'are', 'public']`在`__init__.py`例如定义：

```
__all__ = ['foo']

from ._subpackage import foo 
```

真实世界的例子：[`numpy/__init__.py`](https://github.com/numpy/numpy/blob/master/numpy/__init__.py#L137).

* * *

你对 Python 包的工作方式有一些误解：

> 如果我不使用`__init__.py`，我将无法导入任何内容，因为 Python 不会从 sys.path 进入文件夹。

您需要`__init__.py`Python 3.3 之前的 Python 版本中的文件来将目录标记为包含 Python 包。

> 如果我使用空白`__init__.py`，当我导入 doit_tools 时，它是一个空的命名空间，其中没有任何内容。我的文件都没有导入，这使得它更难使用。

它不会阻止导入：

```
from doit_tools import your_module 
```

它按预期工作。

> 如果我在 中列出子模块`__all__`，我可以使用（皱眉？）`from thing import *`语法，但我所有的类都在不必要的命名空间障碍后面。用户必须（1）知道他们应该使用`from x import *`而不是`import x`，（2）手动重新洗牌，直到他们可以合理地遵守线宽样式约束。

(1) 您的用户（在大多数情况下）不应*在*`from your_package import *`交互式 Python shell 之外使用。

(2) 你可以`()`用来打破一个长的导入行：

```
from package import (function1, Class1, Class2, ..snip many other names..,
                     ClassN) 
```

> 如果我向 中添加`from thatfile import X`语句`__init__.py`，我会更接近，但我有命名空间冲突（？）和额外的命名空间，用于我不想在那里的东西。

由您来解决命名空间冲突（具有相同名称的不同对象）。该名称可以引用任何对象：整数、字符串、包、模块、类、函数等。Python 无法知道您可能更喜欢哪个对象，即使在这种特殊情况下忽略某些名称绑定也会不一致关于在所有其他情况下使用名称绑定。

要将名称标记为非公开，您可以在它们前面加上`_`例如`package/_nonpublic_module.py`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-11T20:33:22.740

隐藏包的子结构有完全正当的理由（不仅在调试时）。其中包括**便利性**和**效率**。当试图用一个包做一个快速原型时，不得不打断思路只是为了查找完全无用的信息，即特定函数或类的确切子模块可能是什么，这是非常烦人的。

当一切都在包的顶层可用时，成语：

```
python -c 'import pkg; help(pkg)' 
```

显示*整个帮助*，而不仅仅是一些微不足道的模块名称。

您可以随时关闭生产代码的子模块导入，或在开发后清理包模块。

以下是我迄今为止想出的最好的方法。它在尽量不抑制有效错误的同时最大限度地提高便利性。另请参阅[带有 doctest 文档的完整源代码](http://sw-amt.ws/python/_build/html/flat_export.html)。

* * *

定义要导入的包名和子模块以避免容易出错的重复：

```
_package_ = 'flat_export'
_modules_ = ['sub1', 'sub2', 'sub3'] 
```

在可用时使用相对导入（这是必要的，请参阅 参考资料`is_importing_package`）：

```
_loaded = False
if is_importing_package(_package_, locals()):
    for _module in _modules_:
        exec ('from .' + _module + ' import *')
    _loaded = True
    del(_module) 
```

尝试导入包，包括`__all__`.
当在搜索路径中使用包执行模块文件作为脚本时会发生这种情况（例如`python flat_export/__init__.py`）

```
if not _loaded:
    try:
        exec('from ' + _package_ + ' import *')
        exec('from ' + _package_ + ' import __all__')
        _loaded = True
    except (ImportError):
        pass 
```

作为最后的手段，尝试直接导入子模块。
当在包目录中执行模块文件作为脚本时会发生这种情况，而搜索路径中没有包（例如`cd flat_export; python __init__.py`）。

```
if not _loaded:
    for _module in _modules_:
        exec('from ' + _module + ' import *')
    del(_module) 
```

构造`__all__`（省略模块），除非它之前已导入：

```
if not __all__:
    _module_type = type(__import__('sys'))
    for _sym, _val in sorted(locals().items()):
        if not _sym.startswith('_') and not isinstance(_val, _module_type) :
            __all__.append(_sym)
    del(_sym)
    del(_val)
    del(_module_type) 
```

* * *

这是功能`is_importing_package`：

```
def is_importing_package(_package_, locals_, dummy_name=None):
    """:returns: True, if relative package imports are working.

    :param _package_: the package name (unfortunately, __package__
      does not work, since it is None, when loading ``:(``).
    :param locals_: module local variables for auto-removing function
      after use.
    :param dummy_name: dummy module name (default: 'dummy').

    Tries to do a relative import from an empty module `.dummy`. This
    avoids any secondary errors, other than::

        ValueError: Attempted relative import in non-package
    """

    success = False
    if _package_:
        import sys
        dummy_name = dummy_name or 'dummy'
        dummy_module = _package_ + '.' + dummy_name
        if not dummy_module in sys.modules:
            import imp
            sys.modules[dummy_module] = imp.new_module(dummy_module)
        try:
            exec('from .' + dummy_name + ' import *')
            success = True
        except:
            pass
    if not 'sphinx.ext.autodoc' in __import__('sys').modules:
        del(locals_['is_importing_package'])
    return success 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-22T04:23:38.130

python不是java。模块文件名不需要与类名相同。事实上，python 建议使用全部小写的模块文件名。

同样“从数学导入 sqrt”只会将 sqrt 添加到命名空间，而不是数学。

# c# - Js/Jquery绑定Datatable或Datalist

> ID：12540294
> 
> 赞同：0
> 
> 时间：2012-09-22T02:51:27.563
> 
> 标签：c#, javascript, jquery, .net, datatable

**设想**

我有一个邮政编码输入框。当您输入邮政编码时，它会调用 Web 服务并取回所有郊区名称并将它们绑定到一个列表，例如输入下拉列表。

当我`List<string>`从 Web 服务返回一个名称时，这很有效。没问题。

当我将值保存到数据库时出现问题。当它被保存时，我无法在数据库的郊区列中保存郊区的名称。我必须为外键约束保存那个郊区的 id。

所以然后我稍微改变了`List<>`事情并作弊并返回了以下内容。

```
<ArrayOfString>
<string>8213</string>
<string>BROOKFIELD</string>
<string>8214</string>
<string>CHAPEL HILL</string>
<string>8215</string>
<string>FIG TREE POCKET</string> 
```

ETC....

这样做的原因是，我可以`value`将下拉列表中的项目的 id 作为 id，因此可以将其保存在保存后的代码中。

为此，我执行了以下操作：

```
$(result).each(function (index, value) {

            var suburbname;

            var pattern = new RegExp('[0-9*]');
            var m = pattern.exec(value);

            if (m == null) {
                suburbname = value

                var o = new Option(suburbname, suburbid);
                /// jquerify the DOM object 'o' so we can use the html method
                $(o).html(suburbname);
                $(document.getElementById('<%= suburb.ClientID %>')).append($("<option></option>")
                                                                .attr("value", suburbid)
                                                                .text(suburbname));

            }
            else {
                suburbid = value
            } 
```

这也有效......下拉列表只有名称，而这些值是数字

**问题....？**

我在做我不喜欢的假设...即名称永远不会有数字，Web 服务将始终首先返回 id 以在第一次运行添加到下拉列表之前设置 id。*只是感觉不对*……：S（想法？）

因此，如果我将 Web 服务更改为返回数据表，则显示以下内容（这是整个查询返回的内容）：

```
<Suburbs diffgr:id="Suburbs1" msdata:rowOrder="0">
<SuburbID>8213</SuburbID>
<SuburbName>BROOKFIELD</SuburbName>
<StateID>4</StateID>
<StateCode>07</StateCode>
<CountryCode>61</CountryCode>
<TimeZones>10.00</TimeZones>
<Postcode>4069</Postcode>
</Suburbs> 
```

有没有办法在 js/jquery. 因此，当用户输入邮政编码时，Web 服务返回数据表，然后将其绑定到选择，其中 SuburbID 进入`value`，名称进入文本？？？

还有其他方法可以从 Web 服务返回数据来解决这个问题吗？

注意：基本上我需要看起来像这样的选项：

```
<option value="8213">BROOKFIELD</option> 
```

我还想我可以打第二个电话来获取文本绑定上的 id ......但我有点想只打一个电话......

非常感谢，

干杯罗宾

.net、C#、js、jquery、网络服务......

**在比利的指导下解决**

使用下面的其他方法添加到选择中不起作用，但是一旦我有了正确的变量，我的原始方法就可以了，所以就使用它....

服务返回：

```
<ArrayOfMyClass>
<MyClass>
<ID>8213</ID>
<Name>BROOKFIELD</Name>
</MyClass> 
```

... ETC

js是：（注意：它是`onchange`邮政编码输入框。它运行一个Web服务，然后成功运行以下）

```
function OnCompleted(result) {

        var _suburbs = result;
        var i = 0;

        $(_suburbs).each(function () {
            var SuburbName = _suburbs[i].Name;
            var SuburbID = _suburbs[i].ID;

            $(document.getElementById('<%= suburb.ClientID %>')).append($("<option></option>")
                                                               .attr("value", SuburbID)
                                                                .text(SuburbName));
            i = i + 1;
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:15:16.373

您可以让您的网络服务返回它（或任何至少包含 id 和名称的子集）：

```
<Suburbs diffgr:id="Suburbs1" msdata:rowOrder="0">
<SuburbID>8213</SuburbID>
<SuburbName>BROOKFIELD</SuburbName>
<StateID>4</StateID>
<StateCode>07</StateCode>
<CountryCode>61</CountryCode>
<TimeZones>10.00</TimeZones>
<Postcode>4069</Postcode>
</Suburbs> 
```

比使用你的 javascript foreach 像这样：

```
var root = $('#<%= suburb.ClientID %>');

$(result).each(function (index, value) {

    var row = $(value)[0];

    $('<option></option>')
        .attr('value', $('SuburbID', row).text())
        .text($('SuburbName', row).text())
        .appendTo(root);
}​); 
```

**编辑：**这是一个 jsfiddle：http: [//jsfiddle.net/rRqJa/2/](http://jsfiddle.net/rRqJa/2/)

# java - 如何使用 Servlet 从 ArrayList 循环中插入多个输入

> ID：12540299
> 
> 赞同：0
> 
> 时间：2012-09-22T02:53:00.233
> 
> 标签：java, mysql, jsp, servlets

在下面的代码中，我希望用户选择至少 1 个复选框，然后将该输入与输入的 product_id 一起输入，并将它们插入两个不同的表中。所以我遇到的问题是从视图/jsp页面和servlet中的查询语句传递多个component_id

```
<%
  List<Component> components = new ArrayList<Component>();
  components = ComponentDb.selectComponents();
  for (Component component : components) {
   %>
  <tr> 
   <td></td>
   <td><input type="checkbox" name="component_id" value="    
   <%=component.getId()%>" required="required"><%=component.getName()%></td>
   //here i have the end of form and stuff i doubt its necessary 
```

我的servlet是（就这一点而言）

```
String query = "insert into Product         
(product_id,product_name,product_description,product_price) VALUES  
('"+product_id+"','"+product_name+"','"+product_description+"','"+product_price+"');"+
            "insert into PC(product_id,component_id) VALUES 
("+product_id+","+component_id+")";
  //kinda puzzled here on how to pass the values seperately
    try {
        ps = connection.prepareStatement(query);
        int a = ps.executeUpdate(query); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:08:05.633

`INSERT`创建两条语句，一个接一个地执行语句。

```
String query = "insert into Product (product_id,product_name,product_description,product_price) VALUES (?,?,?,?)";
ps=connection.prepareStatement(query);
ps.setInt(1,product_id);
...
ps.executeUpdate();

query="insert into PC(product_id,component_id) VALUES (?,?)";
ps=connection.prepareStatement(query);
String []component_ids=request.getParameterValues("component_id");
for(String componentID: components_ids){
   ps.setString(1,product_id);
   ps.setString(2,componentID);
   ps.executeUpdate();
} 
```

# django - 如何使用反向 url 正确重定向

> ID：12540305
> 
> 赞同：0
> 
> 时间：2012-09-22T02:54:38.777
> 
> 标签：django

我需要将成功提交重定向到特定页面。

```
urlpatterns = patterns('',
url(r'create/$', RestaurantCreate.as_view(), name='restaurant_create'),
url(r'preview/$', RestaurantPreview.as_view(), name='restaurant_preview'), 
```

)

创建餐厅后，我想将其重定向到预览页面到此 url（假设 slug 是“applebees”），如下所示：

```
http://127.0.0.1/restaurant/applebees/preview 
```

这是我的 RestaurantCreate 课程：

```
class RestaurantCreate(CreateView):    
form_class = RestaurantForm
template_name = 'restaurant_form.html'
success_url = 'success'
model = Restaurant

def form_valid(self, form):
    obj = form.save(commit=False)
    obj.slug = unique_slug(obj.name, Restaurant)
    obj.created_by = self.request.user
    obj.save()
    return HttpResponseRedirect('/') 
```

我需要更改上面代码的最后一行。现在，我可以破解它来附加一些字符串并重定向，但我该如何以正确的方式做到这一点（使用命名 url 或反向 url？）。关于如何正确重定向的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:54:24.287

你的 URLconf 应该是这样的

```
urlpatterns = patterns('',
    url(r'^create/$', RestaurantCreate.as_view(), name='restaurant_create'),
    url(r'^(?P<slug>[-\w]+)/preview/$', RestaurantPreview.as_view(), name='restaurant_preview'),
) 
```

你可以使用 django.shortcuts.redirect

```
from django.shortcuts import redirect
def form_valid(self, form):
    obj = form.save(commit=False)
    obj.slug = unique_slug(obj.name, Restaurant)
    obj.created_by = self.request.user
    obj.save()
    return redirect('restaurant_preview', slug=obj.slug) 
```

# python - z3python：将字符串转换为表达式

> ID：12540306
> 
> 赞同：9
> 
> 时间：2012-09-22T02:55:19.100
> 
> 标签：python, z3

鉴于此`x,y,z = Ints('x y z')` 和类似的字符串`s='x + y + 2*z = 5'`，是否有一种将 s 转换为 z3 表达式的快速方法？如果不可能，那么似乎我必须做很多字符串操作才能进行转换。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T03:31:37.360

您可以使用 Python`eval`函数。这是一个例子：

```
from z3 import *
x,y,z = Ints('x y z') 
s = 'x + y + 2*z == 5'
F = eval(s)
solve(F) 
```

该脚本显示`[y = 0, z = 0, x = 5]`在我的机器上。

不幸的是，我们无法在[http://rise4fun.com/z3py](http://rise4fun.com/z3py)执行此脚本。rise4fun 网站拒绝包含`eval`（出于安全原因）的 Python 脚本。

# java - 无法理解 Java 中 volatile 的语义

> ID：12540307
> 
> 赞同：4
> 
> 时间：2012-09-22T02:55:20.710
> 
> 标签：java, volatile

我一直在阅读有关`volatile`在 Java 中使用变量的信息。我了解他们确保即时查看系统中运行在不同内核/处理器上的所有线程的最新更新。但是，不能确保导致这些更新的操作的原子性。我看到以下文献经常被使用

> 对 volatile 字段的写入发生在每次读取同一字段之前。

这是我有点困惑的地方。这是一段代码，可以帮助我更好地解释我的查询。

```
volatile int x = 0;
volatile int y = 0; 

Thread-0:                       |               Thread-1:
                                |
if (x==1) {                     |               if (y==1) {
     return false;              |                    return false; 
} else {                        |               } else {
     y=1;                       |                   x=1;
     return true;               |                   return true;
}                               |               } 
```

由于 x & y are both `volatile`，我们有以下发生前的边缘

1.  在 Thread-0 中写入 y 和在 Thread-1 中读取 y 之间
2.  在 Thread-1 中写入 x 和在 Thread-0 中读取 x 之间

这是否意味着，在任何时候，只有一个线程可以在其“else”块中（因为写入会在读取之前发生）？

很有可能 Thread-0 启动，加载 x，发现它的值为 0，就在它即将在 else 块中写入 y 之前，有一个上下文切换到 Thread-1，它加载 y 发现它的值为 0因此也进入了 else 块。是否`volatile`防止这种上下文切换（似乎不太可能）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T03:04:13.803

所以我认为这个问题有点杂草，要点是`volatile`表明变量的值可能会在当前线程的范围之外发生变化，并且在使用之前必须始终读取它的值。

原则上，您引用的语句实际上是在用当前线程替换值之前，将读取该值。

您的示例是一个竞争条件，两个线程都可能返回 true，都可能返回 true，或者它们可能各自返回不同的值 - 的语义`volatile`不会为您的示例定义执行（我鼓励您编译并运行它并看到输出变化）。

说明其行为的一种常见方法`volatile`是运行两个线程，其中一个线程更新共享状态，并查看标记字段时会发生什么情况，何时未标记：

```
class VolatileTest implements Runnable
{
        // try with and without volatile
        private volatile boolean stopRunning = false;

        public void triggerStop(){
             stopRunning = true;
        }

        @Override
        public void run(){
             while(!stopRunning);
             System.out.println("Finished.");
        }

        public static void main (String[] args) throws java.lang.Exception
        {
            final VolatileTest test = new VolatileTest();
            new Thread(test).start();
            Thread.sleep(1000);
            test.triggerStop() = false;
        }
} 
```

`stopRunning`在此示例中，标记为失败`volatile`可能导致`while`循环永远继续，因为除非`stopRunning`标记为`volatile`不需要在每次迭代中读取值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T03:22:30.320

**易失的语义**

您所指的问题是[Dekker's Algorithm 的](https://en.wikipedia.org/wiki/Dekker%27s_algorithm)一种变体。[谷歌](https://www.google.co.nz/search?q=Dekkers%20Algorithm%20Details)上有很多关于不同实现的细节和关于它的细节。

> 如果两个进程同时尝试进入临界区，算法将只允许一个进程进入，这取决于轮到谁。如果一个进程已经在临界区，另一个进程将忙于等待第一个进程退出。这是通过使用两个标志来完成的，标志 [0] 和标志 [1]，指示进入临界区的意图，以及指示谁在两个进程之间具有优先级的轮流变量。

*维基百科涵盖了`volatile`与 Dekker 算法的相关性*

**易失性信息**

但我发现这篇[文章](https://www.vogella.com/tutorials/JavaConcurrency/article.html#memorymodel_atomic)`volatile`用一句话就能完美解释。

> 如果一个变量被声明为 volatile，那么可以保证任何读取该字段的线程都会看到最近写入的值。（[拉斯沃格尔](https://www.vogella.com/tutorials/JavaConcurrency/article.html#memorymodel_atomic)，2008 年）
> 
> 本质上， volatile 用于指示变量的值将被不同的线程修改。（[javamex](https://www.javamex.com/tutorials/synchronization_volatile.shtml)，2012）

**梅西大学：并发易失性讲座幻灯片**

[![梅西讲座幻灯片](../Images/16a3c7cb0fdc420ca786ac80016171f7.png)](https://i.stack.imgur.com/ZbeRr.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/zbntvu15.jcz.png)）]

资料来源：[Hans W. Guesgen 教授](http://www-ist.massey.ac.nz/hwguesgen/)

如果你还不明白`volatile`看看是如何`atomicity`工作的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T03:35:59.253

> 这是否意味着，在任何时候，只有一个线程可以在其“else”块中（因为写入会在读取之前发生）？

不，不是的。

> volatile 是否可以防止这种上下文切换（似乎不太可能）？

不，它不会对此进行防范。您确定的竞争条件确实存在。

这表明 volatile 不是通用同步机制。相反，它们允许您*避免在某些情况下进行同步*，这些情况围绕可以在单个内存操作中读取或写入的单个变量进行。

在您的示例中，有两个变量...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T03:04:21.167

我认为你在这里有一个不好的例子。两个线程都可以很容易地进入 else 块（线程 0 读取 x 并检查 1，然后线程 1 读取 y 并检查 1）。

感兴趣的例子是这样的：

```
thread 0          thread 1

x = 1             y = 1
if (y == 0) {     if (x == 0) {
}                 } 
```

如果并且是易失性的，则两个线程都不能进入`if`块。`x``y`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T03:05:03.880

在 Java 语言规范中，volatile 字段具有以下属性：

> 一个字段可能被声明为 volatile，在这种情况下，线程必须在每次访问该变量时将其字段的工作副本与主副本进行协调。此外，代表线程对一个或多个易失性变量的主副本的操作由主存储器完全按照线程请求的顺序执行。

综上所述，

> 这是否意味着，在任何时候，只有一个线程可以在其“else”块中（因为写入会在读取之前发生）？

这不会发生，因为 volatile 确保线程正在读取内存中变量的最新值，而不是从它拥有的本地副本中读取。通过将变量声明为 volatile 是不可能阻塞的。您应该使用该`synchronized`概念来序列化对变量的写入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T03:11:24.163

所有变量上的所有 volatile 读取和写入都按总顺序（同步顺序）。

对 volatile 变量 v 的写入发生在任何线程对 v 的所有**后续**读取之前（其中“后续”根据同步顺序定义）

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.4)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-22T03:37:17.937

> **易失性保证可见性，同步性保证可见性和原子性**

它提供的唯一保证是如果`x`或`y`由一个线程更新，则更新将对所有线程可见。执行顺序完全取决于线程的运行方式。上下文切换问题的答案是否定的，因为比较是在进入之前发生的，所以它只会是一次，它将基于当时变量的值。如果您对同一变量进行多次比较，这可能是可能的。

使用 volatile 的最佳方式是维护类的状态变量。任何新分配的位置将反映在访问该类的所有线程中

如果你看 `ThreadPoolExecutor`几个状态变量的源代码都是易失的。

其中之一恰好是`runState`决定`ThreadPoolExecutor`. 现在何时`shutdown()`调用`runState`被更新为，`SHUTDOWN` 以便接受任务的方法`execute` `submit`停止接受任务，这恰好是一个简单的任务`if(runState==RUNNING)`

下面的代码是[ThreadPoolExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)`execute`的方法

`poolSize`在下面的代码中，如果您看到,变量不需要额外的同步，`runState`因为它们是易失的状态变量。

```
public void execute(Runnable command) {
    if (command == null)
        throw new NullPointerException();
    if (**poolSize** >= corePoolSize || !addIfUnderCorePoolSize(command)) {//poolSize  volatile
        if (**runState** == RUNNING && workQueue.offer(command)) {//runstate volatile
            if (**runState** != RUNNING || **poolSize** == 0)//runstate volatile
                ensureQueuedTaskHandled(command);
        }
        else if (!addIfUnderMaximumPoolSize(command))
            reject(command); // is shutdown or saturated
    }
  } 
```

**什么时候不使用？**

> 当需要在原子操作中使用变量或当一个变量值依赖于另一个变量值时，例如 Increment i++。

**选择**

> 原子变量被称为**更好的易失性**，它的内存语义为易失性，但为您提供额外的操作。例如AtomicInteger 提供的incrementAndGet() 操作。

# iphone - 在 iphone 中暂停和恢复 CLLocation 跟踪

> ID：12540308
> 
> 赞同：2
> 
> 时间：2012-09-22T02:55:32.567
> 
> 标签：iphone, objective-c, xcode, cllocation

如何暂停和恢复位置跟踪？我已经开发了用于位置跟踪的代码，但我希望它暂停而不是停止，然后恢复，以便我的距离计算继续。（暂停和恢复由 UIButtons 激活）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:10:37.987

如果您在谈论 CLLocationManager，不，您不能暂停它。但是，您可以设置大距离过滤器。根据 WWDC 2010 核心定位视频，这将减少定位服务消耗的资源。

# linux - 在终端中读取作为命令的变量

> ID：12540310
> 
> 赞同：0
> 
> 时间：2012-09-22T02:55:57.403
> 
> 标签：linux, bash, shell, terminal, command

我这样做效果很好

```
utnso@utnso-vm:~$ read command
ps -fea
utnso@utnso-vm:~$ $command
UID        PID  PPID  C STIME TTY          TIME CMD
root         1     0  0 23:34 ?        00:00:02 /sbin/init
root         2     0  0 23:34 ?        00:00:00 [kthreadd]
root         3     2  0 23:34 ?        00:00:00 [ksoftirqd/0]
... 
```

但是当试图运行这个命令时它失败了......

```
utnso@utnso-vm:~$ read command
ps -fea | grep bash
utnso@utnso-vm:~$ $command
ERROR: Garbage option.
********* simple selection *********  ********* selection by list *********
-A all processes                      -C by command name
-N negate selection                   -G by real group ID (supports names)
-a all w/ tty except session leaders  -U by real user ID (supports names)
-d all except session leaders         -g by session OR by effective group name
-e all processes                      -p by process ID
T  all processes on this terminal     -s processes in the sessions given

   ...
    ...
    ...
    ...
                        ********* misc options *********
-V,V  show version      L  list format codes  f  ASCII art forest
-m,m,-L,-T,H  threads   S  children in sum    -y change -l format
-M,Z  security data     c  true command name  -c scheduling class
-w,w  wide output       n  numeric WCHAN,UID  -H process hierarchy 
```

有人知道怎么回事吗？？

感谢先进！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T03:00:20.247

您不能将重定向放在变量中。让 shell 代替执行内容。

```
$ bash -c "$command" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T04:19:18.707

当您的命令行包含要扩展的单个参数时，例如

```
$ $command 
```

bash 执行以下操作：

1.  展开参数，对结果进行分词。
2.  将第一个单词作为简单命令执行，将其余单词作为参数传递。

就是这样。没有进一步解析扩展来将结果处理为任何类型的复合命令或变量赋值或重定向。

任何更复杂的东西都需要传递给`eval`命令，但**前提**是您完全了解其`eval`工作原理并了解评估任意字符串的安全含义。在我看来，`eval`应该算是不得已而为之的工具，而不是一种方便。

# vb.net - Visual Basic 标签包括文本和表达式

> ID：12540312
> 
> 赞同：2
> 
> 时间：2012-09-22T02:56:36.747
> 
> 标签：vb.net, label, expression

这实际上很尴尬，我不知道该怎么做，我尝试了 3 种不同版本的语法并搜索了大约 4 页的溢出，我希望标签包含百分号和表达式，我该怎么做这？这是我的逻辑。

```
AIbasehealth.Text = "%" And Integer / 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:11:43.320

您需要使用[`ToString`](http://msdn.microsoft.com/en-us/library/3hfd35ad%28v=vs.100%29.aspx)表达式的方法。此外，除法运算符的方向也[有所不同，](http://msdn.microsoft.com/en-us/library/b6ex274z%28v=vs.100%29.aspx)[`/`整数除法`\``\`](http://msdn.microsoft.com/en-us/library/b6ex274z%28v=vs.100%29.aspx)的位置也不同。

IE

```
AIbasehealth.Text = "%" + (theInteger / 5).ToString 
```

或者

```
AIbasehealth.Text = "%" + (theInteger \ 5).ToString 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T03:12:48.157

使用`&`字符串连接运算符或`String.Format()`方法。

```
AIbasehealth.Text = "%" & (varInteger / 5) 
```

或者

```
AIbasehealth.Text = String.Format("% {0}",varInteger / 5)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:58:16.200

```
int theInteger = 50;
AIbasehealth.Text = "%" + (theInteger / 5); 
```

# c - ctime(&rawtime) 擦除 malloc 的字符数组？

> ID：12540313
> 
> 赞同：0
> 
> 时间：2012-09-22T02:56:59.937
> 
> 标签：c, unix, memory-management

老实说，我不知道这里发生了什么，但这是我的解释>

我 malloc 一个字符串数组来保存一个文件名数组，那里没问题。然后我进入一个 while 循环，它保持所有正确的值，直到它打印时间

```
time(&rawtime);
printf("It is now: %s\n\n",ctime(&rawtime)); 
```

然后我的价值观就消失了。在任何地方都找不到它们，我现在似乎有一个空数组。

这是其余的代码

```
#include <sys/types.h>
#include <stdio.h>
#include <unistd.h>
#include <dirent.h>
#include <limits.h>
#include <stdlib.h>
#include <time.h>

int main(void)
{

  int i,j, directSize,start=0,flag=0, menu;
  size_t size;
  char path[1024];  //current working directory path
  char ** files;    //created to store the directory contents in an array of strings
  char buffer ;     //buffer holds menu selection
  time_t rawtime;

  //buffer = (char*) malloc(sizeof(char));
  files = (char**) malloc(sizeof(char*)+1);

  //allocating memory for strings
  for(i=0;i<50;i++)
  {
    files[i] =(char*) malloc(64*sizeof(char));
  }

  getcwd(path,size);

  pid_t child;
  DIR * d;
  struct dirent *de;

  d = opendir(".");

  i=0;

  while((de = readdir(d)))
  {
    files[i] = de->d_name;
    i++;
  }

  directSize = i;
  closedir(d);

  printf("file[0]: %s",files[0]);

  while(flag == 0)
  {
    printf("\nfiles[0]: %s\n",files[0]);    //works 

    printf("Current Working directory: %s\n", path);
    printf("\nfiles[0]: %s\nSize: %d\n",files[0],directSize);   //works

    time(&rawtime);
    printf("It is now: %s\n\n",ctime(&rawtime)); //problem area? 

    printf("files[0]: %s\nSize: %d\n",files[0],directSize);     //doesn't work
    printf("Files:\t\t0\. (..)\n");

    for(i=start;i<start+4;i++)
      printf("\t\t%d. %s \n",i+1, files[i]);

    //formatted print for the command menu 
    printf("\nOperation:\tV View\n\t\tR Run\n\t\tP Previous Files\tN Next Files\n\t\tX Exit\t\t\tH Help\n");

    printf("\nCommand: ");
    scanf("%c", &buffer);
    getchar();
    //if(isalpha(buffer))
    //  strcpy(buffer,toupper(buffer));
    printf("command chosen is: %c\n",buffer);

    //if(buffer != "N" && buffer != "P" && buffer != "X")
    //{
    //  printf("File/Directory #: ");
    //  scanf("%d", &menu);
    //}

    if(buffer == 'E' || buffer == 'e')
      flag=flag+ 1; 

  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:32:29.230

问题是您没有字符串的深层副本。

```
 while((de = readdir(d)))
  {
    files[i] = de->d_name;   /* you just made files[i] pointing to de->d_name, instead of
                              * copy the content to files[i].
                              */
    i++;
  } 
```

所以之后`closedir()`，`libc`会重用内部缓冲区，内容可能会被 的其他功能修改`libc`，然后你得到一个垃圾内容。用 . 替换它`strcpy(files[i], de->d_name)`。

# java - 在excel中创建下拉列表

> ID：12540314
> 
> 赞同：1
> 
> 时间：2012-09-22T02:57:42.857
> 
> 标签：java, excel, apache-poi

我在java中创建了一个excel表。我为此使用 POI 库。单击该按钮后，我不知道如何创建下拉列表。另外，我想为 excel 中的多个单元格创建超链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:52:30.040

如果您正在使用`Apache POI 3.5+`. 它附带了许多您可以探索的高级格式示例。作为参考，请查看[POI 示例](http://poi.apache.org/spreadsheet/examples.html)和[条件格式示例](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/ss/examples/ConditionalFormats.java)

# java - 如何阻止 repaint() 方法闪烁

> ID：12540315
> 
> 赞同：3
> 
> 时间：2012-09-22T02:57:43.550
> 
> 标签：java, image, applet, awt, repaint

基本上当屏幕刷新时，它会闪烁白色，然后一秒钟后，它会再次闪烁。我在 Mac 上工作，在 Eclipse 上，屏幕不会闪烁，但是一旦我将它放入小程序，它就开始闪烁。

```
import java.awt.event.*;
import java.applet.Applet;
import java.applet.AudioClip;
import java.awt.*;
import java.net.URL;
import java.io.*; 
import java.net.*;
import javax.swing.*;
import javax.swing.event.*;     //Copyright MRE Dev
//Anyone that steals this code will be prostituted
public class RadicalRacingApplet extends Applet implements KeyListener {
final int WIDTH = 900, HEIGHT = 650;
double p1Speed = 0;
double p2Speed = 0;
double bullet1Speed = 7;
double bullet2Speed = 7;
final int UP = 0, RIGHT = 1, DOWN = 2, LEFT = 3;
int p1Direction = 1;
int p2Direction = 1;
int counterp1 = 0;
int counterp2 = 0;
int scoreN = 0;
int bullets = 0;
int p1Deaths = 0;
int p2Deaths = 0;
final int shoot = 1;
final int shootOther = 3;
final int shoot2 = 1;
final int shoot2Other = 3;
final int normal = 1;
final int big = 3;
final int normal2 = 1;
final int big2 = 3;
int bullets2 = 0;
int bigBullets = 0;
int bigBullets2 = 0;
String scoreS = " ";

URL eng = this.getClass().getResource ("hit.wav");
AudioClip snd = JApplet.newAudioClip(eng);

Rectangle p1 = new Rectangle(135,220,30,30);
Rectangle p2 = new Rectangle(700,300,30,30);
//Obstacles
Rectangle ob1 = new Rectangle(475,75,50,600);
Rectangle bullets1 = new Rectangle(0,0,10,5);
Rectangle bullets2Rect = new Rectangle(0,0,10,5);
Rectangle powerUp1 = new Rectangle(475,680,50,50);
Rectangle bigBullet = new Rectangle(200,600,50,50);
Rectangle bigBullet2 =  new Rectangle(800,600,50,50);

public void init() {

    Move1 m1 = new Move1();
    m1.start();
    Bullets1 b1 = new Bullets1();
    b1.start();
    Move2 m2 = new Move2();
    m2.start();
    Bullets2 b2 = new Bullets2();
    b2.start();
    PowerUps p1 = new PowerUps();
    p1.start();
    BigBullet1 bg1 = new BigBullet1();
    bg1.start();
    BigBullet2 bg2 = new BigBullet2();
    bg2.start();

    snd.loop();

}

public void paint(Graphics g) {
    super.paint(g);
    super.repaint();
    g.setColor(Color.blue);
    g.fillRect(0,0,1000,750);
    g.setColor(Color.WHITE);
    g.setFont(new Font("Arial",Font.PLAIN,16));

    g.setColor(Color.BLACK);

    g.fillRect(ob1.x, ob1.y, ob1.width, ob1.height);
    g.setColor(Color.WHITE);
    g.drawString(scoreS, 100, 100);

    g.fill3DRect(powerUp1.x, powerUp1.y, powerUp1.width, powerUp1.height, true);
    g.fill3DRect(bigBullet.x, bigBullet.y, bigBullet.width, bigBullet.height,true);
    g.fill3DRect(bigBullet2.x, bigBullet2.y, bigBullet2.width, bigBullet2.height, true);
    g.setColor(Color.YELLOW);
    g.setFont(new Font("Arial",Font.BOLD,30));
    g.drawString("P1 Deaths " + p1Deaths, 200, 50);
    g.drawString("P2 Deaths" + p2Deaths, 400, 50);

    Image img1;
    Image img2;
    Image img3;
    Image img4;
    Image img5;
    Image img6;
    Image img7;
    Image img8;
    try{
        URL url = this.getClass().getResource("p1.png");
        URL url2 = this.getClass().getResource("p1Right.png");
        URL url3 = this.getClass().getResource("p1Left.png");
        URL url4 = this.getClass().getResource("p1Down.png");
        URL url5 = this.getClass().getResource("bullet.png");
        URL url6 = this.getClass().getResource("bullet2.png");
        URL url7 = this.getClass().getResource("bigBullet.png");
        URL url8 = this.getClass().getResource("bigBullet2.png");
        img1 = Toolkit.getDefaultToolkit().getImage(url);
        img2 = Toolkit.getDefaultToolkit().getImage(url2);
        img3 = Toolkit.getDefaultToolkit().getImage(url3);
        img4 = Toolkit.getDefaultToolkit().getImage(url4);
        img5 = Toolkit.getDefaultToolkit().getImage(url5);
        img6 = Toolkit.getDefaultToolkit().getImage(url6);
        img7 = Toolkit.getDefaultToolkit().getImage(url7);
        img8 = Toolkit.getDefaultToolkit().getImage(url8);

    if(p1Direction == UP)  {
        g.drawImage(img1, p1.x, p1.y, this);
    }
    if(p1Direction == RIGHT)  {
        g.drawImage(img2, p1.x, p1.y, this);
    }
    if(p1Direction == LEFT) {
        g.drawImage(img3, p1.x, p1.y, this);
    }
    if(p1Direction == DOWN)  {
        g.drawImage(img4, p1.x, p1.y, this);
    }

    if(p2Direction == UP)  {
        g.drawImage(img1, p2.x, p2.y, this);
    }
    if(p2Direction == RIGHT)  {
        g.drawImage(img2, p2.x, p2.y, this);
    }
    if(p2Direction == LEFT) {
        g.drawImage(img3, p2.x, p2.y, this);
    }
    if(p2Direction == DOWN)  {
        g.drawImage(img4, p2.x, p2.y, this);
    }
    if(bullets == shoot)  {
        g.drawImage(img5, bullets1.x, bullets1.y, this);
    }
    if(bullets == shootOther)  {
        g.drawImage(img6, bullets1.x, bullets1.y, this);
    }
    if(bullets2 == shoot2)  {
        g.drawImage(img6, bullets2Rect.x, bullets2Rect.y, this);
    }
    if(bullets2 == shoot2Other)  {
        g.drawImage(img5, bullets2Rect.x, bullets2Rect.y, this);
    }
    if((bigBullets == big) && (bullets == shoot))  {
        g.drawImage(img7,bullets1.x, bullets1.y, this);
    }
    if((bigBullets2 == big2) && (bullets2 == shoot2Other)) {
        g.drawImage(img7, bullets2Rect.x, bullets2Rect.y, this);
    }
    if((bigBullets2 == big2) && (bullets2 == shoot2))  {
        g.drawImage(img8, bullets2Rect.x, bullets2Rect.y, this);
    }
    if((bigBullets == big) && (bullets == shootOther))  {
        g.drawImage(img8, bullets1.x, bullets1.y, this);
    }
    }
    catch(Exception e)  {
        System.out.println("The images dont work");
    }
}

public class Move1 extends Thread implements KeyListener {
    public void run() {
        addKeyListener(this);
        while(true) {
            try {

                if(p1.intersects(ob1))  {
                    p1.x = 135;
                    p1.y = 220;
                    p1Deaths++;
                }

                if(p1.intersects(p2))  {
                    p1.x = 135;
                    p1.y = 220;
                    p1Deaths++;
                }

                if(p1.x >1000)  {
                    p1.x = 0;
                }
                if(p1.y > 750)  {
                    p1.y = 0;
                }
                if(p1.x <0)  {
                    p1.x = 1000;
                }
                if(p1.y < 0)  {
                    p1.y = 750;
                }

                if(p1Direction == UP) {

                    p1.y-=(int)p1Speed;
                    if(p1Speed <=3)  {
                        p1Speed+=.2;

                    }

                }

                if(p1Direction == DOWN) {

                    p1.y+=(int)p1Speed;
                    if(p1Speed <=3)  {
                        p1Speed+=.2;

                    }
                }
                if(p1Direction == LEFT) {
                    p1.x-=(int)p1Speed;
                    if(p1Speed <=3)  {
                        p1Speed+=.2;

                    }
                }
                if(p1Direction == RIGHT) {
                    p1.x+=(int)p1Speed;
                    if(p1Speed <=3)  {
                        p1Speed+=.2;

                    }
                }

                Thread.sleep(35);

            }
            catch(Exception e) {
                break;
            }
        }

    }

public void keyPressed(KeyEvent event) {}
public void keyReleased(KeyEvent event) {}
public void keyTyped(KeyEvent event) {
    if(event.getKeyChar() == 'a') {
        p1Direction = LEFT;
    }
    if(event.getKeyChar() == 's') {
        p1Direction = DOWN;
    }
    if(event.getKeyChar() == 'd') {
        p1Direction = RIGHT;
    }
    if(event.getKeyChar() == 'w') {
        p1Direction = UP;
    }

}

}
public class Move2 extends Thread implements KeyListener {
    public void run() {
        addKeyListener(this);
        while(true) {
            try {

                if(p2.intersects(ob1))  {
                    p2.x = 700;
                    p2.y = 300;
                    p2Deaths++;
                }

                if(p2.intersects(p1))  {
                    p2.x = 700;
                    p2.y = 300;
                    p2Deaths++;
                }

                if(p2.x >1000)  {
                    p2.x = 0;
                }
                if(p2.y > 750)  {
                    p2.y = 0;
                }
                if(p2.x <0)  {
                    p2.x = 1000;
                }
                if(p2.y < 0)  {
                    p2.y = 750;
                }
                if(p2Direction == UP) {

                    p2.y-=(int)p2Speed;
                    if(p2Speed <=3)  {
                        p2Speed+=.2;

                    }

                }

                if(p2Direction == DOWN) {

                    p2.y+=(int)p2Speed;
                    if(p2Speed <=3)  {
                        p2Speed+=.2;

                    }
                }
                if(p2Direction == LEFT) {
                    p2.x-=(int)p2Speed;
                    if(p2Speed <=3)  {
                        p2Speed+=.2;

                    }
                }
                if(p2Direction == RIGHT) {
                    p2.x+=(int)p2Speed;
                    if(p2Speed <=3)  {
                        p2Speed+=.2;

                    }
                }

                Thread.sleep(35);

            }
            catch(Exception e) {
                break;
            }
        }

    }

public void keyPressed(KeyEvent event) {}
public void keyReleased(KeyEvent event) {}
public void keyTyped(KeyEvent event) {
    if(event.getKeyChar() == 'j') {
        p2Direction = LEFT;
    }
    if(event.getKeyChar() == 'k') {
        p2Direction = DOWN;
    }
    if(event.getKeyChar() == 'l') {
        p2Direction = RIGHT;
    }
    if(event.getKeyChar() == 'i') {
        p2Direction = UP;
    }

}

}
public class Bullets1 extends Thread implements KeyListener{
    public void run()  {
        addKeyListener(this);
        while(true)  {
            try {

                if(bullets1.intersects(p2))  {
                    p2.x = 700;
                    p2.y = 300;
                    p2Deaths++;
                }
                if(bullets1.x > 1000)  {
                    bullet1Speed = 7;
                    bullets = 0;
                    bullets1.x = 0;
                    bullets1.y = 0;
                }
                if(bullets1.x < 0)  {
                    bullet1Speed = 7;
                    bullets = 0;
                    bullets1.x = 0;
                    bullets1.y = 0;
                }
                double p1X = p1.getX();
                double p1Y = p1.getY();
                if(bullets == shoot)  {
                    bullets1.x = (int)p1X;
                    bullets1.y = (int)p1Y;
                    if(bullet1Speed >= 5) {
                        bullet1Speed+=5;

                    }
                    bullets1.x+=(int)bullet1Speed;

                }
                if(bullets == shootOther)  {
                    bullets1.x = (int)p1X;
                    bullets1.y = (int)p1Y;
                    if(bullet1Speed >=5)  {
                        bullet1Speed+=5;
                    }
                    bullets1.x-=(int)bullet1Speed;
                }

                Thread.sleep(20);

            }
            catch(Exception e)  {
                break;
            }
        }
    }

    public void keyPressed(KeyEvent event) {
        if(event.getKeyChar() == 'e') {
            bullets = shoot;
        }
        if(event.getKeyChar() == 'q')  {
            bullets = shootOther;
        }

    }

    @Override
    public void keyReleased(KeyEvent event) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyTyped(KeyEvent event) {
        // TODO Auto-generated method stub

    }
}

public class Bullets2 extends Thread implements KeyListener{
    public void run()  {
        addKeyListener(this);
        while(true)  {
            try {

                if(bullets2Rect.intersects(p1))  {
                    p1.x = 135;
                    p1.y = 300;
                    p1Deaths++;
                }
                if(bullets2Rect.x < 0)  {
                    bullet2Speed = 7;
                    bullets2 = 0;
                    bullets2Rect.x = 0;
                    bullets2Rect.y = 0;
                }
                if(bullets2Rect.x > 1000)  {
                    bullet2Speed = 7;
                    bullets2 = 0;
                    bullets2Rect.x = 0;
                    bullets2Rect.y = 0;
                }
                double p2X = p2.getX();
                double p2Y = p2.getY();
                if(bullets2 == shoot2)  {
                    bullets2Rect.x = (int)p2X;
                    bullets2Rect.y = (int)p2Y;
                    if(bullet2Speed >= 5) {
                        bullet2Speed+=5;

                    }
                    bullets2Rect.x-=(int)bullet2Speed;

                }
                if(bullets2 == shoot2Other)  {
                    bullets2Rect.x = (int)p2X;
                    bullets2Rect.y = (int)p2Y;
                    if(bullet2Speed >=5)  {
                        bullet2Speed+=5;
                    }
                    bullets2Rect.x+=(int)bullet2Speed;
                }

                Thread.sleep(20);

            }
            catch(Exception e)  {
                break;
            }
        }
    }

    public void keyPressed(KeyEvent event) {
        if(event.getKeyChar() == 'u') {
            bullets2 = shoot2;
        }
        if(event.getKeyChar() == 'o')  {
            bullets2 = shoot2Other;
        }

    }

    @Override
    public void keyReleased(KeyEvent event) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyTyped(KeyEvent event) {
        // TODO Auto-generated method stub

    }
}

public class PowerUps extends Thread implements KeyListener  {
    public void run()  {

        addKeyListener(this);
        while(true) {
            try {

                int countPower = 0;
                int countPower2 = 0;
                if(p1.intersects(powerUp1))  {
                    powerUp1.setSize(0,0);
                    countPower = 1;
                }

                if(countPower == 1) {

                        p1Speed = 7;
                        Thread.sleep(10000);
                }
                if(countPower == 0)  {
                    p1Speed = 3;
                }
                if(p2.intersects(powerUp1))  {
                    powerUp1.setSize(0,0);

                    countPower2 = 1;
                }
                if(countPower2 == 1)  {
                    p2Speed = 7;
                    Thread.sleep(10000);

                }
                if(countPower == 0)  {
                        p2Speed = 3;
                    }

                Thread.sleep(35);
            }
            catch (Exception e) {
                break;
            }
        }
    }

    @Override
    public void keyPressed(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyReleased(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyTyped(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }

}

public class BigBullet1 extends Thread {
    public void run()  {
        while(true)  {
            try {

                if(p1.intersects(bigBullet))  {
                    bigBullet.setSize(0,0);
                    bigBullets = big;
                    Thread.sleep(10000);
                    bigBullets = normal;
                }
                if(p2.intersects(bigBullet))  {
                    bigBullet.setSize(0,0);
                    bigBullets2 = big;
                    Thread.sleep(10000);
                    bigBullets2 = normal2;
                }
            }
            catch(Exception e)  {
                break;
            }
        }
    }
}

public class BigBullet2 extends Thread  {
    public void run()  {
        while(true)  {
            try {

                if(p2.intersects(bigBullet2))  {
                    bigBullet2.setSize(0,0);
                    bigBullets2 = big2;

                    Thread.sleep(10000);
                    bigBullets2 = normal2;

                }
                if(p1.intersects(bigBullet2))  {
                    bigBullet2.setSize(0,0);
                    bigBullets = big2;
                    bullets1.setSize(10,10);
                    Thread.sleep(10000);
                    bigBullets = normal2;
                }
            }
            catch(Exception e)  {
                break;
            }
        }
    }
}

@Override
public void keyPressed(KeyEvent event) {
    // TODO Auto-generated method stub

}

@Override
public void keyReleased(KeyEvent event) {
    // TODO Auto-generated method stub

}

@Override
public void keyTyped(KeyEvent event) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T03:01:20.223

First, don't use `Applet`, use `JApplet`

Second, don't override the `paint` methods of a top level container, use something like `JPanel` or `JComponent`, they provide double buffering by default.

Third, don't call `repaint` inside any `paint` method (in fact, don't call anything that might post a `repaint` request...)

Forth, do NOT to load your images in the `paint` method?? See this [Problems when drawing images in java applets](https://stackoverflow.com/questions/12539089/problems-when-drawing-images-in-java-applets) for why...

**UPDATED**

Basically...

```
public class GamePane extends JPanel implements KeyListener {

    final int WIDTH = 900, HEIGHT = 650;
    double p1Speed = 0;
    double p2Speed = 0;
    double bullet1Speed = 7;
    double bullet2Speed = 7;
    final int UP = 0, RIGHT = 1, DOWN = 2, LEFT = 3;
    int p1Direction = 1;
    int p2Direction = 1;
    int counterp1 = 0;
    int counterp2 = 0;
    int scoreN = 0;
    int bullets = 0;
    int p1Deaths = 0;
    int p2Deaths = 0;
    final int shoot = 1;
    final int shootOther = 3;
    final int shoot2 = 1;
    final int shoot2Other = 3;
    final int normal = 1;
    final int big = 3;
    final int normal2 = 1;
    final int big2 = 3;
    int bullets2 = 0;
    int bigBullets = 0;
    int bigBullets2 = 0;
    String scoreS = " ";
    URL eng = this.getClass().getResource("hit.wav");
    AudioClip snd = JApplet.newAudioClip(eng);
    Rectangle p1 = new Rectangle(135, 220, 30, 30);
    Rectangle p2 = new Rectangle(700, 300, 30, 30);
//Obstacles
    Rectangle ob1 = new Rectangle(475, 75, 50, 600);
    Rectangle bullets1 = new Rectangle(0, 0, 10, 5);
    Rectangle bullets2Rect = new Rectangle(0, 0, 10, 5);
    Rectangle powerUp1 = new Rectangle(475, 680, 50, 50);
    Rectangle bigBullet = new Rectangle(200, 600, 50, 50);
    Rectangle bigBullet2 = new Rectangle(800, 600, 50, 50);

    public BadApplet2() {

        Move1 m1 = new Move1();
        m1.start();
        Bullets1 b1 = new Bullets1();
        b1.start();
        Move2 m2 = new Move2();
        m2.start();
        Bullets2 b2 = new Bullets2();
        b2.start();
        PowerUps p1 = new PowerUps();
        p1.start();
        BigBullet1 bg1 = new BigBullet1();
        bg1.start();
        BigBullet2 bg2 = new BigBullet2();
        bg2.start();

        snd.loop();

    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        // This bad, don't do it
        //super.repaint();
        g.setColor(Color.blue);
        g.fillRect(0, 0, 1000, 750);
        g.setColor(Color.WHITE);
        g.setFont(new Font("Arial", Font.PLAIN, 16));

        g.setColor(Color.BLACK);
        g.fillRect(ob1.x, ob1.y, ob1.width, ob1.height);

        g.setColor(Color.WHITE);
        g.drawString(scoreS, 100, 100);

        g.fill3DRect(powerUp1.x, powerUp1.y, powerUp1.width, powerUp1.height, true);
        g.fill3DRect(bigBullet.x, bigBullet.y, bigBullet.width, bigBullet.height, true);
        g.fill3DRect(bigBullet2.x, bigBullet2.y, bigBullet2.width, bigBullet2.height, true);
        g.setColor(Color.YELLOW);
        g.setFont(new Font("Arial", Font.BOLD, 30));
        g.drawString("P1 Deaths " + p1Deaths, 200, 50);
        g.drawString("P2 Deaths" + p2Deaths, 400, 50);

        // This is bad, don't do it...
        // Move these to the field level of the class
        // and load them in the constructor
        /*
        Image img1;
        Image img2;
        Image img3;
        Image img4;
        Image img5;
        Image img6;
        Image img7;
        Image img8;
        */
        //try {
            // This is bad don't do it...
            /*
            URL url = this.getClass().getResource("p1.png");
            URL url2 = this.getClass().getResource("p1Right.png");
            URL url3 = this.getClass().getResource("p1Left.png");
            URL url4 = this.getClass().getResource("p1Down.png");
            URL url5 = this.getClass().getResource("bullet.png");
            URL url6 = this.getClass().getResource("bullet2.png");
            URL url7 = this.getClass().getResource("bigBullet.png");
            URL url8 = this.getClass().getResource("bigBullet2.png");
            img1 = Toolkit.getDefaultToolkit().getImage(url);
            img2 = Toolkit.getDefaultToolkit().getImage(url2);
            img3 = Toolkit.getDefaultToolkit().getImage(url3);
            img4 = Toolkit.getDefaultToolkit().getImage(url4);
            img5 = Toolkit.getDefaultToolkit().getImage(url5);
            img6 = Toolkit.getDefaultToolkit().getImage(url6);
            img7 = Toolkit.getDefaultToolkit().getImage(url7);
            img8 = Toolkit.getDefaultToolkit().getImage(url8);
            */

            if (p1Direction == UP) {
                g.drawImage(img1, p1.x, p1.y, this);
            }
            if (p1Direction == RIGHT) {
                g.drawImage(img2, p1.x, p1.y, this);
            }
            if (p1Direction == LEFT) {
                g.drawImage(img3, p1.x, p1.y, this);
            }
            if (p1Direction == DOWN) {
                g.drawImage(img4, p1.x, p1.y, this);
            }

            if (p2Direction == UP) {
                g.drawImage(img1, p2.x, p2.y, this);
            }
            if (p2Direction == RIGHT) {
                g.drawImage(img2, p2.x, p2.y, this);
            }
            if (p2Direction == LEFT) {
                g.drawImage(img3, p2.x, p2.y, this);
            }
            if (p2Direction == DOWN) {
                g.drawImage(img4, p2.x, p2.y, this);
            }
            if (bullets == shoot) {
                g.drawImage(img5, bullets1.x, bullets1.y, this);
            }
            if (bullets == shootOther) {
                g.drawImage(img6, bullets1.x, bullets1.y, this);
            }
            if (bullets2 == shoot2) {
                g.drawImage(img6, bullets2Rect.x, bullets2Rect.y, this);
            }
            if (bullets2 == shoot2Other) {
                g.drawImage(img5, bullets2Rect.x, bullets2Rect.y, this);
            }
            if ((bigBullets == big) && (bullets == shoot)) {
                g.drawImage(img7, bullets1.x, bullets1.y, this);
            }
            if ((bigBullets2 == big2) && (bullets2 == shoot2Other)) {
                g.drawImage(img7, bullets2Rect.x, bullets2Rect.y, this);
            }
            if ((bigBullets2 == big2) && (bullets2 == shoot2)) {
                g.drawImage(img8, bullets2Rect.x, bullets2Rect.y, this);
            }
            if ((bigBullets == big) && (bullets == shootOther)) {
                g.drawImage(img8, bullets1.x, bullets1.y, this);
            }
        //} catch (Exception e) {
        //    System.out.println("The images dont work");
        //}
    }

    // Add the rest of the code
} 
```

I would do a lot more reading about game threads. Generally, should have a single "game loop" which is responsible for updating the state of the various assets within you game, not dozens of threads.

Take this panel and add it to you `JApplet`. If you don't know how to do that, then you're going to what to read the [Creating a GUI with Swing](http://docs.oracle.com/javase/tutorial/uiswing/index.html)

**UPDATE**

As to your `java.lang.ClassCastException`, I'd imagin you're trying to load the panel as an applet, which obviously won't work.

```
public class RadicalRacingApplet extends JApplet {
    public void init() {
        setLayout(new BorderLayout());
        add(new GamePanel());
    }
} 
```

Should get you around it...

# c# - 将电话号码解析为其部分

> ID：12540319
> 
> 赞同：6
> 
> 时间：2012-09-22T02:58:17.620
> 
> 标签：c#, .net, formatting

我知道 Google libphonenumber 解析库的 C# 端口： [http ://code.google.com/p/libphonenumber/](http://code.google.com/p/libphonenumber/)

我需要的是获取一个电话号码字符串并将其分解为相应的部分，国家代码、区号、前缀、号码和分机。

这个库可以用来做到这一点吗？如果是这样，有人可以在 C# 中发布一个简单的测试来做到这一点吗？我没有在文档中看到如何做到这一点。

顺便说一句，它们可以是国内的或国际的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T03:05:38.283

libphonenumber 库将解析一个号码并验证它是否与国内和国际号码的已知模式匹配。它会告诉您国家代码和任何给定号码在国内或国际上的正确拨号模式。

它不会将其解析为除此之外的组成部分。无区号、前缀、号码、分机解析。

它是开源的，所以如果你需要这样做，它可能是一个很好的起点，但我相信这将是一项艰巨的任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T03:09:34.833

Patrick Mezard 已将库移植到 C#：

[https://bitbucket.org/pmezard/libphonenumber-csharp/wiki/Home](https://bitbucket.org/pmezard/libphonenumber-csharp/wiki/Home)

使用方法可以看官网：

[http://code.google.com/p/libphonenumber/](http://code.google.com/p/libphonenumber/)

Java 代码可以直接翻译成 C#。例如：

*爪哇*

```
String swissNumberStr = "044 668 18 00"
PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
try {
  PhoneNumber swissNumberProto = phoneUtil.parse(swissNumberStr, "CH");
} catch (NumberParseException e) {
  System.err.println("NumberParseException was thrown: " + e.toString());
} 
```

*C＃*

```
String swissNumberStr = "044 668 18 00";
PhoneNumberUtil phoneUtil = PhoneNumberUtil.GetInstance();
try
{
    PhoneNumber swissNumberProto = phoneUtil.Parse(swissNumberStr, "CH");
    Console.WriteLine(swissNumberProto.CountryCode);
}
catch (NumberParseException e)
{
    Console.WriteLine("NumberParseException was thrown: " + e.ToString());
} 
```

祝你好运。

**更新：**

更多示例： [http ://code.google.com/p/libphonenumber/source/browse/#svn/trunk/java/libphonenumber/test/com/google/i18n/phonenumbers](http://code.google.com/p/libphonenumber/source/browse/#svn/trunk/java/libphonenumber/test/com/google/i18n/phonenumbers)

如果你没有看到你需要什么，那么我想你可以自己实现它。

# emacs - 如何将待办事项优先级组织为 emacs 中的列？

> ID：12540320
> 
> 赞同：3
> 
> 时间：2012-09-22T02:58:28.273
> 
> 标签：emacs, elisp, org-mode

我正在考虑使用 emacs org 模式为自己创建一个待办事项列表。我想用优先级编写我的待办事项并生成一个包含不同优先级数量的表格。例如，如果我稍后将紧急重要作为 3 个优先级，则在三列中包含这些值和待办事项。请不要推荐一个应用程序，如果这可以通过在 elisp 中编写代码来完成，我想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:51:11.333

正如 bzg 所说，您可以查看[org-collector.el](http://orgmode.org/worg/org-contrib/org-collector.html)

它允许您对列使用 elisp 表达式，因此您需要做的就是提取我认为使用 org-mode 函数的优先级。

# direct2d - 如何在 Direct2D 中获取路径几何的分段？

> ID：12540323
> 
> 赞同：0
> 
> 时间：2012-09-22T02:58:38.017
> 
> 标签：direct2d

下图显示了 Direct2D 中的路径几何，它包含 5 段，每段是一条直线，我的要求是，给定这样的一座山，我想获得所有 5 条线。

![在此处输入图像描述](../Images/cd02e171d5814e85393415da37906648.png)

但是在Direct2D中似乎没有相关的API可以获取路径几何的段，我看到ID2D1PathGeometry接口提供了GetSegmentCount方法，如果我们不能获取段，为什么微软提供这个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:24:22.277

您可以使用`ID2D1PathGeometry::Stream()`. 您将不得不编写一个实现`ID2D1GeometrySink`. 您可能会发现在广义上实现这一点很有用，这样它就可以抽出一个对象树，而不是寻找您现在需要的确切数据。如果您需要使用哪种类型的对象模型的示例，只需查看 WPF 的`System.Windows.Media.Geometry`( [http://msdn.microsoft.com/en-us/library/system.windows.media.geometry.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.geometry.aspx) )。

您还可以轻松地从这些类转换回`ID2D1PathGeometry`，并使用最适合或适合任何情况的类。我已经编写了这两种转换，一旦我意识到它们使用的是相同的“语言”，它就会变得非常简单。我特别发现它有助于整理我对“图形”和“片段”之间区别的理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:56:05.930

如果你有一个 PathGeometry，那么使用 PathGeometry::Stream() 很好。

但是，如果您有一个基本的几何并且想要完成相同的操作，那么您可以执行以下操作：

1.  实现您自己的 GeometrySink 以“捕捉”几何组件
2.  创建一个空的 PathGeometry
3.  使用 Geometry::Combine 将您的几何图形与空几何图形组合（联合）。

结果将存储在您的 GeometrySink 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T20:35:17.613

实现一个名为 SpecializedSink 的类，该类继承自 ID2D1SimplifiedGeometrySink 接口，由 ID2D1Geometry:: **Simplify调用的扩展****AddLines**方法以检索几何数据。

 **建议您通过扩展 ID2D1SimplifiedGeometrySink阅读 [从几何中检索数据的示例] [http://msdn.microsoft.com/en-us/library/windows/desktop/ee453682%28v=vs.85%29.aspx 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ee453682%28v=vs.85%29.aspx)**

# ruby-on-rails - 将外部文件导入 database.yml 文件

> ID：12540324
> 
> 赞同：0
> 
> 时间：2012-09-22T02:58:48.343
> 
> 标签：ruby-on-rails, ruby

出于安全目的，我不想将我的生产用户名和密码检查到版本控制中。如果我签入它，每个人都可以看到它。这是被检查到版本控制中的 database.yml 文件：

```
# /config/database.yml:
production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: desk_production
  pool: 5
  username: root
  password: password_here 
```

如您所见，“password_here”作为密码签入 - 但如果曾经针对生产数据库进行过检查，这是一个无效的密码。除了将我的实时密码检查到版本控制中之外，我基本上有两个选择：

1.  将生产服务器上的真实 database.yml 文件保存在应用程序根目录上方的目录中。制作一个 capistrano 配方以在部署应用程序时为该文件创建一个符号 lync - 这基本上会覆盖检入版本控制的 database.yml 文件。
2.  保存真正的 database.yml 文件（就像在选项 #1 中一样），但不是制作符号 lync，而是将其导入到版本控制中的 database.yml 文件中。这将允许系统在每次部署应用程序时引用服务器上的现有文件，而无需部署人员担心更改密码或创建符号 lync。另外，我可以将永久 database.yml 文件保留在服务器集上，这样部署者就看不到它了……

我最喜欢第二个选项，它基本上看起来像这样：

```
# Config file permanently stored on the web server:
# ../app_root/database.yml (notice this is one level up from the app so it doesn't get written over)

# This is the file checked into version control:
production:
 << ../app_root/database.yml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T03:19:48.477

或者您可以从环境变量中读取它：

```
production:
  ...
  password: <%= ENV['DB_PASSWORD'] %>
  ... 
```

您只需要确保启动您的 rails 应用程序的用户在他们的配置文件中设置了环境变量，以便它可以在`ENV`哈希中使用。例如，我经常使用`deployer`用户通过 capistrano 部署应用程序，因此我已`export DB_PASSWORD=the_password`在该用户的`~/.bashrc`文件中进行了设置（对于您要部署到的系统而言，它位于适当的位置）。

这样，它是您的源代码控制的一部分，因为每个人都知道在哪里设置密码，但密码本身不是您的源代码控制的一部分。显然，你需要保守这个秘密。

这对我来说也不是很明显，但是`.yml`文件[中可以嵌入 ruby](http://www.ruby-forum.com/topic/75825) ​​，类似于`.erb`模板，尽管我遇到了当环境变量本身包含某些特殊字符时这样的事情不起作用的情况。

# ruby-on-rails - Why is this build association for has_many belongs_to not working in Rails 3.2.8?

> ID：12540330
> 
> 赞同：0
> 
> 时间：2012-09-22T03:00:24.650
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.2

I have 2 models setup as follows:

```
class StripePlan < ActiveRecord::Base
  attr_accessible :location, :name, :price, :plan_type
  has_many :stripe_subscriptions, :foreign_key=>:plan_id
end

class StripeSubscription < ActiveRecord::Base
  attr_accessible :email, :plan_id, :stripe_customer_token, :teacher_id
  belongs_to :stripe_plan
  belongs_to :teacher
end

class Teacher < ActiveRecord::Base
   has_one :stripe_subscription, dependent: :destroy
end 
```

I do something like the following at the rails console:

```
 @stripe_plan = StripePlan.find(params[:plan_id])
 @stripe_subscription = @stripe_plan.stripe_subscriptions.build(:teacher_id=>params[:teacher_id],:plan_id=>params[:plan_id],:email=>params[:email]) 
```

where params={:teacher_id=>1, :plan_id=>1, :email="example@example.com"}. Here you can assume a plan with id of 1 exists, as well as the teacher.

**Now, @stripe_subscription.stripe_plan.nil? evaluates to true.** But it shouldn't. Because if I had a model called "Subscription" and a model called "Plan" with the same setup, then @subscription.plan.nil? evaluates to false. This is puzzling and I've spent a couple of hours to try and figure it out. Have I found a bug or what am I doing wrong? Maybe part of the issue is the :foreign_key is :plan_id instead of :stripe_plan_id? I was getting another bug until I set the :foreign_key attribute in has_many.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:25:03.273

您必须`@stripe_plan.save`将项目保存到数据库。它仍然在记忆中。如果你做了 a`@stripe_plan.stripe_subscriptions`你仍然会看到它，因为它保存到 object `@stripe_plan`。直到你保存`@string_plan`它不会在数据库中。

你也可以做
`@stripe_subscription = @stripe_plan.stripe_subscriptions.create(:teacher_id=>params[:teacher_id],:plan_id=>params[:plan_id],:email=>params[:email])`

这将创建项目并保存到数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:26:01.183

您不需要使用`:plan_id=>params[:plan_id]`in `build`，因为那会使用`stripe_plan`'s `id`。

你应该做的另一件事是看看 cosole。您可能错过了一些未列入白名单的属性。

查看[Rails 3 -- Build not save to database (Railscast 196)](https://stackoverflow.com/questions/6235346/rails-3-build-not-saving-to-database-railscast-196)，您似乎遇到了类似的问题。

# database - DBA (dBASE) encrypted field called 'XPASSWORD', what is this?

> ID：12540335
> 
> 赞同：0
> 
> 时间：2012-09-22T03:01:13.350
> 
> 标签：database, encryption, field, dbase

I'm trying to find the value of a field labeled 'XPASSWORD' in DBF Viewer 2000 ( [http://www.dbf2002.com/](http://www.dbf2002.com/) ). Does anybody know what encryption technique this field uses? Can anyone help me out?

Thanks for any type of assistance in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:54:11.947

什么软件生成了这个字段？它不是标准的 dbf 字段类型。

# html - Align 2 divs where right content is sized to fit and left is truncated

> ID：12540344
> 
> 赞同：2
> 
> 时间：2012-09-22T03:04:56.460
> 
> 标签：html, css

I am trying to align 2 divs where the right content is fixed and the left is truncated to fill the remaining space. I found this [How to place two divs side by side where one sized to fit and other takes up remaining space?](https://stackoverflow.com/questions/7046819/how-to-place-two-divs-side-by-side-where-one-sized-to-fit-and-other-takes-up-rem) (fiddle here [http://jsfiddle.net/ssawchenko/gKnuY/](http://jsfiddle.net/ssawchenko/gKnuY/)) which is close, but I'd like the right div to not be floated right so if the text is small enough to fit the text appears side by side. Is this possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:30:03.093

在上面做这件事似乎是一种疯狂的方式。判断这是否是您想要的：http: [//jsfiddle.net/joplomacedo/gKnuY/404/](http://jsfiddle.net/joplomacedo/gKnuY/404/)

的CSS：

```
.fixed {  
   float:right;
   width: 200px;
}​

.fluid {
    margin-right: 200px; /* same as fixed's width */
} 
```

的HTML：

```
<div class="fixed"></div>
<div class="fluid"></div> 
```

# html - 为什么这个 CSS 会出现？

> ID：12540345
> 
> 赞同：4
> 
> 时间：2012-09-22T03:04:58.920
> 
> 标签：html, css, web

我有一个非常基本的容器，`divs`里面有几个孩子，显示为`inline-block`. 在我真正将内容插入到子 div 中之前，一切正常。当我对它们有内容时，它们似乎无缘无故地向下移动。

[这](http://jsfiddle.net/GtPWX/1/embedded/result/)是一切正常的小提琴。

这是所有混乱（内容）的小提琴[。](http://jsfiddle.net/GtPWX/embedded/result/)

有人可以告诉我为什么会这样以及如何解决吗？

我已经做了几个小时，但似乎无法弄清楚。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:08:24.600

而不是使用`display: inline-block`使用`display: block; float: left;`

[http://jsfiddle.net/GtPWX/2/](http://jsfiddle.net/GtPWX/2/)

或者你可以设置`vertical-align: top`在盒子上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:09:31.677

添加`vertical-align:top`到框中。

# android - Display timer while video recording android

> ID：12540347
> 
> 赞同：1
> 
> 时间：2012-09-22T03:05:06.083
> 
> 标签：android, timer, video-capture

I am making a video recorder and i want to have the time duration of how much time did the user have recorder the video. The time will counts upwards.

in order to calculate the time, im using thread and the calculation start when the user click the start button and it will stop when the user click the stop button.

for the timer thread im referring the tutorial from [here](http://www.fampennings.nl/maarten/android/04timers/index.htm). however my problem here is the timer is not working and i think the thread is not doing its job. below is my logcat.

![enter image description here](../Images/a50599e3b25eb0d870a2ad5079ba32c8.png)

Here's my code for the main activity

```
public class Videotest1Activity extends Activity implements 
    SurfaceHolder.Callback, OnInfoListener, OnErrorListener{

    Camera camera;
    VideoView videoView;
    SurfaceHolder holder;
    TextView msg;
    Button initBtn, startBtn, stopBtn, playBtn, stprevBtn;
    MediaRecorder recorder;

    String outputFileName;
    static final String TAG = "RecordVideo";
    int maxDuration = 7000;//7sec
    int frameRate = 1;//15

String serverIP = "172.19.117.12";
int serverPort = 2000;
Socket socket;

int mCount;
TimerThread mTimer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_videotest1);

    videoView = (VideoView) findViewById(R.id.videoView1);
    initBtn = (Button) findViewById(R.id.initialize);
    startBtn = (Button) findViewById(R.id.button1);
    stopBtn = (Button) findViewById(R.id.button3);
    msg = (TextView) findViewById(R.id.textView1);
    playBtn = (Button) findViewById(R.id.reviewBtn);
    stprevBtn = (Button) findViewById(R.id.stprevBtn);

    mTimer= new TimerThread();
    mTimer.setOnAlarmListener(mSTimer_OnAlarm);
    mTimer.setPeriod(100);
}

public void buttonTapped(View view){
    switch(view.getId()){
    case R.id.initialize:
        initRecorder();
        break;
    case R.id.button1:
        beginRecording();
        break;
    case R.id.button3:
        stopRecording();
        break;
    case R.id.reviewBtn:
        playRecording();
        break;
    case R.id.stprevBtn:
        stopPlayback();
        break;
    }
}

@Override
public void onError(MediaRecorder mr, int what, int extra) {
    Log.e(TAG, "Record error");
    stopRecording();
    Toast.makeText(this, "Recording limit reached", 2500).show();
}

@Override
public void onInfo(MediaRecorder mr, int what, int extra) {
    Log.i(TAG, "recording event");
    if(what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED){
        Log.i(TAG, "...max duration reached");
        stopRecording();
        Toast.makeText(this, "Recording limit info", 2500).show();
    }
}

@Override
public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {

}

@Override
public void surfaceCreated(SurfaceHolder arg0) {
    Log.v(TAG, "in surfaceCreated");

    try{
        camera.setPreviewDisplay(holder);
        camera.startPreview();
    }catch(IOException e){
        Log.v(TAG, "Could not start the preview");
        e.printStackTrace();
    }
    initBtn.setEnabled(true);
    startBtn.setEnabled(true);
    stopBtn.setEnabled(true);
}

@Override
public void surfaceDestroyed(SurfaceHolder arg0) {

}

protected void onResume(){
    Log.v(TAG, "in onResume");
    super.onResume();
    initBtn.setEnabled(false);
    startBtn.setEnabled(false);
    stopBtn.setEnabled(false);
    playBtn.setEnabled(false);
    stprevBtn.setEnabled(false);
    if(!initCamera())
        finish();
}

public boolean initCamera(){
    try{
        camera = Camera.open();
        Camera.Parameters camParam = camera.getParameters();
        camera.lock();
        holder = videoView.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        //Thread thread = new Thread(new hantarThread());
        //thread.start();
    }catch(RuntimeException re){
        Log.v(TAG, "Could not initialize the camera");
        re.printStackTrace();
        return false;
    }
    return true;
}

public void initRecorder(){
    if(recorder == null){
        Toast.makeText(this, "record null", 2500).show();           
    }
    else{
        Toast.makeText(this, "record have", 2500).show();
    }
    outputFileName = Environment.getExternalStorageDirectory() + "/videooutput.mp4";

    File outputFile = new File(outputFileName);
    if(outputFile.exists())
        outputFile.delete();//knp nk dlt?

    try{
        camera.stopPreview();
        camera.unlock();
        recorder = new MediaRecorder();
        recorder.setCamera(camera);

        recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        recorder.setVideoSize(176, 144);
        recorder.setVideoFrameRate(frameRate);//15
        recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setMaxDuration(maxDuration);
        recorder.setPreviewDisplay(holder.getSurface());
        recorder.setOutputFile(outputFileName);

        recorder.prepare();
        Log.v(TAG, "MediaRecorder initialized");
        initBtn.setEnabled(false);
        startBtn.setEnabled(true);
    }catch(Exception e){
        Log.v(TAG, "MediaRecorder failed");
        e.printStackTrace();
    }
}

public void beginRecording(){
    mCount = 0;
    mTimer.start();

    recorder.setOnInfoListener(this);
    recorder.setOnErrorListener(this);
    recorder.start();               

    msg.setText("Recording");
    startBtn.setEnabled(false);
    stopBtn.setEnabled(true);
}

public void stopRecording(){
    if(recorder != null){
        recorder.setOnErrorListener(null);
        recorder.setOnInfoListener(null);
        try{
            recorder.stop();        
            mTimer.stop();
        }catch(IllegalStateException e){
            Log.e(TAG, "Got Illegal");
        }
        releaseRecorder();
        msg.setText("");
        releaseCamera();
        startBtn.setEnabled(false);
        stopBtn.setEnabled(false);
        playBtn.setEnabled(true);
    }
}

private void releaseCamera(){
    if(camera != null){
        try{
            camera.reconnect();
        }catch(IOException e){
            e.printStackTrace();
        }
        camera.release();
        camera = null;
    }
}

private void releaseRecorder(){
    if(recorder != null){
        recorder.release();
        recorder = null;
    }
}

private void playRecording(){
    MediaController mc = new MediaController(this);
    videoView.setMediaController(mc);
    videoView.setVideoPath(outputFileName);
    videoView.start();
    stprevBtn.setEnabled(true);
}

private void stopPlayback(){
    videoView.stopPlayback();
}

//----time thread---
OnAlarmListener mSTimer_OnAlarm= new OnAlarmListener() {
    @Override 
    public void OnAlarm(TimerThread source) {
        mCount++;
        msg.setText("Count="+mCount);
        if( mCount==100) source.stop();
    }
};
//----end time thread--- 
```

here is my code for TimerThread.java

```
 package com.example.videotest1;

import android.os.Handler;

/**
 * A class that implements a simple timer.
 * The timer does not create a separate thread, so there are no multi-threading issues in your activity.
 * The timer uses an event listener as callback when it expires ("alarm") .
 * @author Maarten Pennings 2011 September 26
 */
public class TimerThread {

    // The minimal value for the period of a timer (in milliseconds).
    public static final int MinPeriod = 10; 

    //  Interface definition for a callback to be invoked when a timer expires ("alarm").    
    public interface OnAlarmListener {
        /**
         * Callback that timer 'source' has expired ("alarm").
         * @param source  Timer that expired (when multiple timers use same listener)
         */
        void OnAlarm( TimerThread source );
    }

    protected int             mPeriod= 100;              // what is the period of the timer (in milliseconds)
    protected boolean         mEnabled= false;           // is the timer enabled?
    protected OnAlarmListener mOnAlarmListener= null;    // the listener (callback) for the alarm events
    protected Handler         mHandler= new Handler();   // handler to the thread's queue, allows us to send (timed) messages to that queue 
    protected Runnable        mMessage= new Runnable() { // The message being posted on the message queue
        @Override public void run() 
        { 
            // Call the listener (when it is set).
            if( mOnAlarmListener!=null ) mOnAlarmListener.OnAlarm(TimerThread.this);

              // Cascade, i.e. post a new delayed message to ourselves.
                // NOTE: The listener could have called stop(), this removes the mMessage message form the queue.
                // However, there is no such message, it has just

 been taken out of the queue and is currently being executed.
            // So check if the timer is still enabled before cascading (posting a new delayed message).  
            if( mEnabled ) mHandler.postDelayed(mMessage, mPeriod); 
        } 
    }; 

    /**
     * Set the period of the timer. The timer must be separately enabled before its starts generating alarm events.     
     * @param ms    the period of the timer in milliseconds
     */
    public void setPeriod( int ms ) {
        if( ms<MinPeriod ) throw new IllegalArgumentException("STimer.setPeriod called with too small period ("+ms+"<"+MinPeriod+")" );
        mPeriod= ms;
    }

    /**
     * Returns the current period of the timer.     
     * @return the current period of the timer in milliseconds
     */
    public int getPeriod( ) {
        return mPeriod;
    }

    /**
     * Enables or disables the timer for generating an alarm event every getPeriod milliseconds.     
     * @param enabled   the new state of the timer
     */
    public void setEnabled( boolean enabled ) {
        if( enabled!=mEnabled ) {
            // The enabled state really changes
            if( enabled ) {
                // Post the first message (which will post the next message and so on)
                mHandler.postDelayed(mMessage, mPeriod);  

           } else {
                // Remove any message that is in the queue
                mHandler.removeCallbacks(mMessage);
            }
            // Record the new state
            mEnabled= enabled;
        }
    }

    /**
     * Returns the current enabled/disabled state of the timer.     
     * @return the current enabled/disabled state of the timer
     */
    public boolean getEnabled() {
        return mEnabled;
    }

    /**
     * Register a callback to be invoked each time the timer period expires ("alarm").     
     * @param l   the listener object that will be called-back.
     */
    public void setOnAlarmListener( OnAlarmListener l ) {
        mOnAlarmListener= l;
    }

   // Starts the timer, i.e. a shorthand for setEnabled(true).   
    public void start( ) {
      setEnabled(true);
    }

     // Stops the timer, i.e. a shorthand for setEnabled(false).    
    public void stop( ) {
      setEnabled(false);
    }

} 
```

and last is my OnAlarmListener.java

```
public class OnAlarmListener implements TimerThread.OnAlarmListener {

public void OnAlarm(TimerThread source) {
    // TODO Auto-generated method stub

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:42:38.873

考虑使用 CountDownTimer() ...

```
new CountDownTimer(1000, 1000) {

     public void onTick(long millisUntilFinished) {
         mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     }

     public void onFinish() {
         mTextField.setText("done!");
     }
  }.start(); 
```

[http://developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

# xml - 这里适合什么 XML 转换

> ID：12540356
> 
> 赞同：0
> 
> 时间：2012-09-22T03:07:54.260
> 
> 标签：xml, transformation, configurable

我正在尝试缩小合适的 XML 转换语言/实用程序的范围，这将允许我进行一些非常繁重的 XML 转换（我预计文件大小约为 100 kb）。源文件和目标文件由近 280 个独特元素组成，最多 3 层对象嵌套代表客户技术订单。我有两到三个 XML 文档流，我需要将它们转换为单个 XML 文档（例如：2 个 XML 文档，一个来自订单管理，一个来自资源管理系统，以进行处理以生成单个目标文档）。

转换涉及评估源流中的节点并将它们分配给目标模式节点或进行一些转换，例如为目标模式设置变量值。源模式和目标模式中的节点数不一定相等。理想情况下，我希望规则是可配置的，而不是嵌入在代码中（不确定这是否可行）同时处理光。

我混合了定义为业务规则的评估元素和条件元素（使用脚本和 XPath 的混合，它粗略地看起来像这样“ `If(/OrderData/Servicetype != /ResourceData/ServiceType) then /Target/ServiceType = /OrderData/ServiceType)`”

我仍在评估单程解析器是否足以完成整个转换。我的主要目标是：

1.  有一个可以定义解析规则的可配置文件
2.  可以读取此文件并按规则解析的引擎。主要是可配置的，我认为它需要更多的是基于解释器的，因为我相信可配置性要求会自动将编译推出窗口。
3.  可配置文件可以在一些定义的语法中定义，用于评估、函数等。

对 XML 模式的任何添加显然都需要对规则集进行添加。
理想情况下，我只想更新规则集和 inputXML 模式以使引擎适应新的解析规则/输入。

我希望能够一次性操作整个模式。
尝试解析整个 Target 架构导致抛出 Java 类大小错误，这意味着我需要拆分架构来解析它。
此外，由于这个 XSLT，我认为由于尺寸的原因，它只会导致大量的处理时间。我想这只会给我一个 XML 字符串解析的选项。（我希望有`awk`XML :)）。
如果有人可以指导我找到任何可以提供帮助的资源，我会很高兴。是否有等效的 JAVA 实用程序？

我知道这听起来像是写给圣诞老人的圣诞愿望清单 :) 但如果有人已经做过类似上述的事情，请给我留言或建议。如果需要，我可以共享 XML 模式和定义的确切翻译规则的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:06:30.943

有成千上万的人使用 XSLT 完全按照您的描述进行操作。不要再看了。它甚至可以被合理地描述为“用于 XML 的 awk”。通过使用 XSLT 2.0 而不是 1.0 版，您将获得很多生产力优势，而 1.0 版仍然比 2.0 更广泛可用。对于几百 Kb 的文件大小，您无需担心流式传输。

# django - 在 django 中运行 syncdb 时找不到关系

> ID：12540361
> 
> 赞同：2
> 
> 时间：2012-09-22T03:08:42.740
> 
> 标签：django, postgresql, relation, syncdb

我的 django 应用程序的 models.py 中有这些类。我使用 postgresql 8.3 作为数据库

```
class Course(models.Model):
    students = models.ManyToManyField(User)
    title = models.CharField(max_length=200)
    description = models.TextField()

    def __unicode__(self):
        return self.title

    class Meta:
        verbose_name_plural="Courses"

class CourseChoicesForm(forms.Form):
    courseoption = forms.ChoiceField(choices=[(x.id,x.title) for x in Course.objects.all()]) 
```

当我运行时`python manage.py syncdb`，我收到一个错误，上面写着`relation course is not found`

```
...
File "/home/me/Django-1.4/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/me/dev/python/django/myprj/myapp/models.py", line 50, in <module>
    class CourseChoicesForm(forms.Form):
  File "/home/me/dev/python/django/myprj/myapp/models.py", line 52, in CourseChoicesForm
    courseoption = forms.ChoiceField(choices=[(x.id,x.title) for x in Course.objects.all()])
...
File "/home/me/Django-1.4/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: relation "myapp_course" does not exist 
```

**更新：** 我解决了这个问题如下

```
class CourseChoicesForm(forms.Form):
    courseoption = forms.ChoiceField(choices=[],required=False)
    def __init__(self, *args, **kwargs):
        super(CourseChoicesForm, self).__init__(*args, **kwargs)
        self.fields['courseoption'].choices = [(x.id,x.title) for x in Course.objects.all()] 
```

不过，我不太清楚为什么会发生这种行为。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:04:04.023

将表单放在 models.py 文件中并不是一个好习惯，这正是原因所在。

要`syncdb`运行，它首先需要加载您的模型文件。这当然必须在它可以进行任何数据库更新之前发生。

现在，您的 models.py 文件*还*包含一个表单类，并且该类定义依赖于存在的表。（这只是 Python 工作方式的一部分——您的类定义在导入模块时执行）。因此，在添加表格之前，`syncdb`必须加载一个需要表格存在的模块。

当您更改表单类时，您移动了依赖于新表的行——现在它在一个`__init__`方法中。与类*定义*不同，该方法不会在导入时运行。它仅在您实际创建表单对象时运行。现在`syncdb`可以导入新模块并更新数据库，一切正常。

# c# - 我正在尝试将 HTML 表格导出到 Excel，但没有生成 Excel

> ID：12540367
> 
> 赞同：0
> 
> 时间：2012-09-22T03:10:19.653
> 
> 标签：c#, jquery, html, excel

```
 [HttpPost]
    public ActionResult ExportTableToExcel(string htmlTable)
    {
        EFWPResponse Result = new EFWPResponse() { RequestStatus = false };

        try
        {
             Response.AppendHeader("content-disposition", "attachment;filename=FileEName.xls");
             Response.Charset = "";
             Response.Cache.SetCacheability(HttpCacheability.NoCache);
             Response.ContentType = "application/vnd.ms-excel";
             //this.EnableViewState = false;
             Response.Write(htmlTable);
             Response.End();
        }
        catch (Exception ex)
        {
            ModelState.AddModelError("", ex);
        }
        return Json(Result);
    } 
```

// 代码执行成功，但没有打开 excel 文件。//任何人都可以请做什么来生成用jquery在C#中打开的Excel文件。

# javascript - 如果使用 Javascript 选择了复选框，如何要求字段？

> ID：12540368
> 
> 赞同：0
> 
> 时间：2012-09-22T03:10:43.160
> 
> 标签：javascript, html, validation, input, checkbox

我有一个简短的表格，需要一些验证帮助。当前的 javascript 要求完成每个字段...除了电话号码。但是，如果有人选择联系进行咨询，我希望电话字段是必需的。希望我目前的工作不必被丢弃。任何帮助都会很棒。谢谢！

**Javascript**：

```
<script type="text/javascript"> 

function validateForm(f)
{
    // If they entered an email address, then edit it before submitting the form

    // Require Email Address
    if (f. field_45042.value == '')
    {
        alert('Please enter your email address.')
        f. field_45042.focus()
        return false;
    } 

    // Require First Name
    if (f. field_57841.value == '')
    {
        alert('Please enter your first name.')
        f. field_57841.focus()
        return false;
    } 

    // Require Last Name
    if (f. field_57842.value == '')
    {
        alert('Please enter your last name.')
        f. field_57842.focus()
        return false;
    } 

    // Require Zip Code
    if (f. field_70761.value == '')
    {
        alert('Please enter your zip code.')
        f. field_70761.focus()
        return false;
    } 

    // Require Location
    if (f.field_70694[0].selected == true)
    {
        alert('Please select a store location.')
        f.field_70694.focus()
        return false;
    } 
}

// -->
</script> 
```

**HTML**：

```
Email Address:<input type="text" id="field_45042" class="text_field" size="35" name="45042" value="" />
First Name:<input type="text" id="field_57841" class="text_field" size="35" name="45043[57841]" value="" />
Last Name:<input type="text" id="field_57842" class="text_field" size="35" name="45044[57842]" value="" />
Zip Code:<input type="text" id="field_70761" class="text_field" size="35" name="45045[70761]" value="" />
Telephone:<input type="text" id="field_62646" class="text_field" size="35" name="45046[62646]" value="" />

Preferred Store Location:
<select id="field_70694" class="select field" name="42714[70694]" >
    <option value="Select One of the Following:" >Select one of the following:</option>
    <option value="Store 1" >Store 1</option>
    <option value="Store 1" >Store 2</option>
    <option value="Store 1" >Store 3</option>
</select>

Please contact me for a FREE consultation.
<select id="field_71849" class="select field" name="45924[71849]" >
    <option value="Yes">Yes</option>
    <option value="No" >No</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:16:39.937

这应该有效：

```
if (f.field_71849.value == "Yes" && f.field_62646.value == '') {

    alert('Please enter a phone number.')
    f.field_62646.focus()
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T03:21:46.430

```
 // ...

 // require phone if wants to be contacted
 if(f.field_71849.value == 'Yes' && f.field_62646.value == ''){
   alert('Please enter your phone number');
   return false;
 }

 // ... 
```

# node.js - node.js socket.io 在 Azure 上不起作用

> ID：12540380
> 
> 赞同：0
> 
> 时间：2012-09-22T03:15:08.843
> 
> 标签：node.js, azure, socket.io

一切都在本地运行，但是当推送到 Microsoft Azure 时：

```
http://...... /socket.io/socket.io.js 
```

找不到这个socket.io.js文件，使用socket.io时生成的文件。

我试过什么： 1）我试过不同的端口，我看到有人说端口 81 供服务器监听。

2）我正在使用 Mac - 我可以看到你可以做一些 power shell 的东西。这完全消除了 Node.js 的简单性。

3) var port = process.env.port || 1337;

4）查看： [https ://www.windowsazure.com/en-us/develop/nodejs/tutorials/app-using-socketio/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/app-using-socketio/)

5) 在 Mac 上使用 Powershell 创建一个“工人角色”。不可能？

问候克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:10:46.593

要回答问题 #5，您无法真正在非 Windows 操作系统上创建 Windows Azure 云服务。所有工具都仅限于 Windows。（您需要创建的包实际上是一个 zip 文件，但它是如此奇怪的 zip 文件，我还没有看到没有 Windows Azure SDK 中的工具来创建它的解决方案。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:01:44.437

如果您在 Mac 上，我建议部署到 Windows Azure 网站，您可以获得简单性和可扩展性。

# jquery - Jquery - 按单元格内容第一个字母过滤表格行

> ID：12540381
> 
> 赞同：0
> 
> 时间：2012-09-22T03:15:28.140
> 
> 标签：jquery, select, filter, html-table

我有一个基本表格，想通过几个过滤器过滤表格行。

```
<select id="location">
   <option value="New York">New York</option>                             
   <option value="LA">LA</option> 
   <option value="Boston">Boston</option>  
</select>
<select id="last-name">
    <option>Last name</option>
    <option value="ABCDE">A-E</option>
    <option value="FGHIJ">F-J</option>
    <option value="KLMNO">K-O</option>   
    <option value="PQRST">P-T</option>
    <option value="UVWXYZ">U-Z</option>   
</select>
<table id="personnel">
    <thead>
       <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Location</th>
       </tr>
    </thead>
    <tbody>
       <tr>
          <td class="firstname">Abel</td>
          <td class="lastname">Alpha</td>
          <td class="location">LA</td>
       </tr>
       <tr>
          <td class="firstname">Benny</td>
          <td class="lastname">Bravo</td>
          <td class="location">New York</td>
       </tr>
       <tr>
          <td class="firstname">Cindy</td>
          <td class="lastname">Charlie</td>
          <td class="location">Boston</td>
       </tr> 
   <tbody>
</table> 
```

第一个过滤器我想我可以做这样的事情：

```
$(function() {    
    $('#location').change(function() { 
        $("#personnel td.location:contains('" + $(this).val() + "')").parent().show();
        $("#personnel td.location:not(:contains('" + $(this).val() + "'))").parent().hide();
    });

});​ 
```

但是对于第一个字母过滤器，我需要一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T03:45:05.163

试试这个

```
$('#last-name').change(function() {
    var curr = $(this).val();
    $("#personnel td.lastname").each(function(){
        if(curr.indexOf($(this).text().substr(0,1)) != -1){  //Check if first letter exists in the drop down value
             $(this).parent().show();

        }else{
             $(this).parent().hide();
        }
    });

}); 
```

见[工作小提琴](http://jsfiddle.net/SeFbc/)

我相信这可以改进为更强大，但它应该让你开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:41:50.850

```
$('#last-name').change(function() {
    var val = this.value;

    // with a single chain
    $("#personnel td.lastname")
        .parent()
        .hide()
        .end()  // jump to td.lastname
        .filter(function() {
            var firstChar = $(this).text()[0]; // pick first character
            return val.indexOf(firstChar) >= 0;
        })
        .parent()
        .show();
});​ 
```

***[演示](http://jsfiddle.net/SeFbc/1/)***

# php - PHP文件复制权限错误

> ID：12540385
> 
> 赞同：0
> 
> 时间：2012-09-22T03:16:02.307
> 
> 标签：php, file-upload, permissions

为什么我在复制文件时会出现权限错误？

我有`print_r`， `$candidatefile`这显示了新位置的完整文件路径和正确名称。

`$fields['Resume']`运行时为空白，`print_r`但文件仍上传到缓存

两个文件夹都是`777`

/home/name/mysite0912/cache/resumes/1ZHiYGZj7J.txt Remuse /home/name/mysite0912/downloads/cv_folder/new-filename-cv.txt 新位置

其他的都很甜，除了

**代码部分：**

```
 $candidateuploaddir = _MYSITEDIR . '/downloads/refocus_candidates/';
        $candiatefilename = $fields['RenamedResume'];
        $candidatefile = $candidateuploaddir . $candiatefilename;

        if(empty($fields['Resume']))
        {
                echo 'null';
        }else{
        copy($fields['Resume'],$candiatefilename);
        } 
```

**上传功能：**

```
function uploadResume()
{
    if (!isset($_FILES['UploadResume'])) return false;
    $uploaddir = _CACHEDIR.'/resumes/';
    /* create the upload folder if it does not already exist */
    CMS::RecursiveMkdir($uploaddir);
    $extension = CMS::getFileExtension(basename($_FILES['UploadResume']['name']));
    /* keep producing random filenames until we get a unique one */
    while (empty($filename) || CMS::fileExists($uploaddir.$filename)) {
        $filename = CMS::randomString(10).'.'.$extension;
    }

    $uploadfile = $uploaddir . $filename;

    if (move_uploaded_file($_FILES['UploadResume']['tmp_name'], $uploadfile)){

        return $uploadfile;
        //$uploadfile;
    } else {
        return false;
    }
} 
```

**在提交线上：**

```
$fields['Resume'] = CMS::either(CMS_Plugin_plugin_jobs_apply::uploadResume(), CMS::getFormData('Resume', false)); //upload resume to temporary location 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T06:20:45.993

所以我们是 ($_FILES); 的 print_r；您是否设置了表单的 enctype 以允许文件上传？

在此行之前，添加：

```
copy($fields['Resume'],$candiatefilename);

file_exists($fields['Resume']) or die('can not copy file '.$fields['Resume'].' because it does not  exist !'); 

// else 
copy($fields['Resume'],$candiatefilename); 
```

# c - 从结构打印数组

> ID：12540388
> 
> 赞同：0
> 
> 时间：2012-09-22T03:16:29.157
> 
> 标签：c, struct

我在一个练习中被难住了几个小时，我必须使用函数在结构内建立一个数组并打印它。在我当前的程序中，它编译但在运行时崩溃。

```
#define LIM 10

typedef char letters[LIM];

typedef struct {
    int counter;
    letters words[LIM];
} foo;

int main(int argc, char **argv){
    foo apara;
    structtest(apara, LIM);
        print_struct(apara);

}

int structtest(foo *p, int limit){
    p->counter = 0;
    int i =0;
    for(i; i< limit ;i++){
        strcpy(p->words[p->counter], "x");
                //only filling arrays with 'x' as an example
        p->counter ++;
    }
    return; 
```

我确实相信这是由于我不正确地使用/组合了指针。我试过调整它们，但要么产生“不兼容的类型”错误，要么数组看似空白

```
}

void print_struct(foo p){
    printf(p.words);

} 
```

我还没有成功进入 print_struct 阶段，但我不确定 p.words 是否是要调用的正确项目。在输出中，我希望该函数返回一个 x 数组。如果我犯了某种严重的“我应该已经知道这个”C 错误，我提前道歉。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:23:33.347

structest() 的第一个参数被声明为 foo 类型的指针。

```
int structtest(foo *p, int limit) 
```

在 main 中，您没有传递指向 foo 变量的指针，而只是传递了 foo 变量。

```
structtest(apara, LIM); 
```

尝试将指针传递给 foo 变量，如下所示：

```
structtest(&apara, LIM); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:33:37.187

```
void print_struct(foo p){
    printf(p.words);

} 
```

> 我还没有成功进入 print_struct 阶段，但我不确定 p.words 是否是要调用的正确项目。在输出中，我希望该函数返回一个 x 数组。如果我犯了某种严重的“我应该已经知道这个”C 错误，我提前道歉。谢谢你的帮助。

您不能将数组发送到 printf，就像您可以用其他语言打印数组一样。你必须自己做循环：

```
void print_struct(foo paragraph)
{
   printf("counter: %d\n",paragraph.counter);
   for (int i = 0; i < paragraph.counter; i++)
   {
      printf("words[%d] %s\n",i,paragraph.words[i]);
   }
} 
```

您应该将 main() 函数移到源代码的底部。或者，您必须为定义在 main 下方、main 上方的任何代码添加函数原型：

```
int structtest(foo *p, int limit);
....
main()
{
...
}
int structtest(foo *p, int limit)
{
...
} 
```

# linux - UDP如何使用绑定端口从服务器端的不同端口接收

> ID：12540392
> 
> 赞同：0
> 
> 时间：2012-09-22T03:16:41.997
> 
> 标签：linux, sockets, udp, bind

我在接收来自不同客户端端口的消息时遇到 UDP 套接字端口绑定问题。我正在编译一个 C++ 实用程序来检查 Linux 服务器的 (20K) 端口。我创建客户端线程以通过 pthread_create 发送服务器的不同端口。在服务器端，我必须将套接字绑定到某个端口，所以它只能从（选择像阻塞的 IO）只有 1 个端口。你能给我一些关于 UDP 服务器从不同端口接收消息的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:47:29.320

只是不要在 recvfrom() 中指定源地址，然后它将从所有远程地址和端口接收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:25:53.277

如果要在多个端口上接收数据包，则必须打开多个套接字并使用诸如`select()`多路复用 I/O 之类的东西。Berkeley 套接字 API 不允许一个套接字连接`bind()`多个地址。

# python - 如何在 Python 中将字符添加到现有字符串

> ID：12540395
> 
> 赞同：0
> 
> 时间：2012-09-22T03:19:17.557
> 
> 标签：python, string

我正在尝试用其他文本替换单词中的元音/音节..例如：

输入的单词：`program`

用于替换音节/元音的文本：ab

结果：`pr**ab**ogr**ab**am`

并且如果输入了通配符 (*)，例如：

输入的单词：`dog`

用于替换音节/元音的文本：*b

结果：`d**ob**og`，其中 * 替换为单词中的第一个元音，在本例中为“o”，然后将其替换为输入的单词，在本例中，“b”使“ob”放在元音之前狗中的“o”。

有任何想法吗？我正在尝试仅使用 for、if 和 while 循环来完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:09:58.237

你的意思是这样的？

`re.sub(r'([aeoiu])', r'ab\1', 'program') -> 'prabograbam'`

`re.sub(r'([aeoiu])', r'\1b\1', 'dog') -> 'dobog'`

或者

`re.sub(r'([aeoiu]+)', r'ab\1', 'tooth') -> 'tabooth'`

`re.sub(r'(([aeoiu])[aeoiu]*)', r'\2b\1', 'boat') -> 'boboat`

# php - 提交表单后让 CodeIgniter 保存值

> ID：12540397
> 
> 赞同：3
> 
> 时间：2012-09-22T03:19:43.010
> 
> 标签：php, codeigniter

我是 CodeIgniter 的新手，在简单的 CRUD 应用程序中提交表单后（错误和成功），我真的很难让表单值重新填充。我认为如果我在这里发布我的代码可能会有所帮助，也许有人可以提供帮助。

这是来自我的控制器：

```
function update($id){

        $seller = $this->seller_model->get_seller_byID($id)->row();
        $data['seller'] = $seller;

        $data['title'] = 'Update seller';
        $data['message'] = '';
        $data['action'] = site_url('seller/updateSeller');
        $data['link_back'] = anchor('seller/ManageSellers/','Back to list of sellers',array('class'=>'back'));

        $this->load->view('EditSeller', $data);
    }

    function updateSeller(){

        $data['title'] = 'Update seller';
        $data['action'] = site_url('seller/updateSeller');
        $data['link_back'] = anchor('seller/ManageSellers/','Back to list of sellers',array('class'=>'back'));

        $this->setValidation();

        if ($this->form_validation->run() == FALSE)
        {
        $data['message'] = 'fail';
        }
        else
        {
            $id = $this->input->post('id');

            $seller = array('s_fname' => $this->input->post('fname'),
                            's_lname' => $this->input->post('lname'),
                            's_email' => $this->input->post('email'),
                            's_password' => $this->input->post('pword'));

            $this->seller_model->update_seller($id,$seller);

            $data['message'] = '<div class="success">update seller success</div>';
        }   
        $this->load->view('EditSeller', $data);
    }

    function setValidation()
    {
        $this->form_validation->set_rules('fname', 'First Name', 'required');
        $this->form_validation->set_rules('lname', 'Last Name', 'required');
        $this->form_validation->set_rules('email', 'Email', 'required');
        $this->form_validation->set_rules('pword', 'Password', 'required');
        $this->form_validation->set_rules('status', 'Status', 'required');
        $this->form_validation->set_rules('dealer', 'Dealer', 'required');
    } 
```

这是我的观点：

```
 <html>
<head>

</head>
<body>
        <h2><?php echo $title; ?></h2>

        <?php echo $message; ?>

        <?php echo validation_errors(); ?>

    <div class="content">
        <form method="post" action="<?php echo $action; ?>">
        <div class="data">           

                <p><?php
                    if (isset($seller->s_id))
                    {
                        echo "Id: " . $seller->s_id;
                        echo form_hidden("id", isset($seller->s_id) ? $seller->s_id : '' );
                    }
                ?></p>

                <p>First Name: 
                    <?php 
                        $field = array(  'name' => 'fname', 
                                         'size' => 30, 
                                         'class'=>'input', 
                                         'value' => (isset($seller->s_fname) ? $seller->s_fname : '' ) );
                        echo form_input($field, set_value('fname')); 
                    ?>
                </p>

                <p>Last Name: 
                    <?php 
                        $field = array(  'name' => 'lname', 
                                         'size' => 40, 
                                         'class'=>'input', 
                                         'value' => (isset($seller->s_lname) ? $seller->s_lname : '' ) );
                        echo form_input($field, set_value('lname')); 
                    ?>
                </p>

                <p>Email: 
                    <?php 
                        $field = array(  'name' => 'email', 
                                         'size' => 60, 
                                         'class'=>'input', 
                                         'value' => (isset($seller->s_email) ? $seller->s_email : '' ) );
                        echo form_input($field, set_value('email')); 
                    ?>
                </p>

                <p>Password: 
                    <?php 
                        $field = array(  'name' => 'pword', 
                                         'size' => 20, 
                                         'class'=>'input', 
                                         'value' => (isset($seller->s_password) ? $seller->s_password : '' ) );
                        echo form_password($field, set_value('pword')); 
                    ?>
                </p>

                <p>Status: 
                    <select name="status">
                        <option value="1" <?php echo set_select('status', '1', TRUE); ?>>Verified</option>
                        <option value="2" <?php echo set_select('status', '2'); ?>>Not verified</option>
                    </select>
                </p>

                <p>Dealer:
                    <input type="radio" name="dealer" value="Y" <?php echo set_radio('dealer', '1', TRUE); ?>/> Yes
                <input type="radio" name="dealer" value="N" <?php echo set_radio('dealer', '2'); ?>/> No
                </p>

                <p><?php
                    if (isset($seller->s_startdate))
                    {
                        echo "Start Date: " . $seller->s_startdate;
                    }
                ?></p>

           <input type="submit" value="Save"/>

               <p><?php echo $link_back; ?></p>

        </div>
        </form>
        <br />
    </div>
</body>
</html> 
```

如果我的验证成功，它会正确保存到数据库中，但在重新加载页面时不会填充文本框。当出现验证错误时，数据库不会按预期进行更改，但值不会保留在表单字段中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:09:59.633

改变

```
 $field = array(  'name' => 'fname', 
        'size' => 30, 
        'class'=>'input', 
        'value' => (isset($seller->s_fname) ? $seller->s_fname : '' ) );
  echo form_input($field, set_value('fname')); 
```

至

```
 $field = array(  'name' => 'fname', 
        'size' => 30, 
        'class'=>'input', 
        'value' => set_value('s_fname', (isset($seller->s_fname) ? $seller->s_fname : '' )) );
  echo form_input($field); 
```

（并对所有其他类似事件执行相同操作。

[您可以在此处](http://codeigniter.com/user_guide/libraries/form_validation.html#repopulatingform)了解有关 set_value 和重新填充表单的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T20:10:55.823

问题是，当 updateSeller() 完成时，您没有将 $data['seller'] 信息发送回视图。

这是一个重新设计的 updateSeller() 函数：

```
function updateSeller(){

    $data['title'] = 'Update seller';
    $data['action'] = site_url('seller/updateSeller');
    $data['link_back'] = anchor('seller/ManageSellers/','Back to list of sellers',array('class'=>'back'));
    $data['seller'] = array();

    $this->setValidation();

    if ($this->form_validation->run() == FALSE)
    {
        $data['message'] = 'fail';
    }
    else
    {
        $id = $this->input->post('id');

        $seller = array('s_fname' => $this->input->post('fname'),
                        's_lname' => $this->input->post('lname'),
                        's_email' => $this->input->post('email'),
                        's_password' => $this->input->post('pword'));

        $data['seller'] = $seller; // send form data back to view

        $this->seller_model->update_seller($id,$seller);

        $data['message'] = '<div class="success">update seller success</div>';
    }   
    $this->load->view('EditSeller', $data);
} 
```

# php - 当我按下 ESC 时 PHP 会做什么？

> ID：12540404
> 
> 赞同：4
> 
> 时间：2012-09-22T03:21:58.910
> 
> 标签：php, background-process

假设我有一个相当长的 PHP 脚本，需要 60 秒。

我连接到 mysite.com/thatscript.php，我很确定我已连接，然后脚本开始运行。5秒后，我击中了逃跑。然后我按 Ctrl+R，再等 5 秒，然后重复 12 次。

会发生什么，为什么？

/edit：我实际上进行了测试，它让我等待，但我无法区分 Apache 是否让我等待，或者另一个并发脚本，或者其他什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T03:25:14.463

这取决于 PHP 在做什么。

按 esc 通常会停止浏览器加载页面。

如果您的冗长脚本也在使用会话，那么由于会话锁定，所有其他请求将等到前一个脚本完成。

会话锁定相关：[PHP 中 session_start 是如何锁定的？](https://stackoverflow.com/questions/2531584/how-does-session-start-lock-in-php)

如果您想控制 PHP 如何处理用户停止请求，请查看： http: [//php.net/manual/en/features.connection-handling.php](http://php.net/manual/en/features.connection-handling.php)

# node.js - 如何指定评估 node.js 函数的顺序？

> ID：12540405
> 
> 赞同：1
> 
> 时间：2012-09-22T03:22:19.940
> 
> 标签：node.js

下面，我尝试评估`im.identify`before `console.log(toObtain)`，但似乎`console.log(toObtain)`是 after 调用`im.identify`的。如何确保函数按照我希望它们被调用的顺序被调用？

```
var toObtain; //I'm trying to set the value of this variable to features (inside the callback).

var im = require('imagemagick');
im.identify('kittens.png', function(err, features){
  if (err) throw err
  //console.log(features);
  toObtain = features;
  console.log(toObtain); //this prints { format: 'PNG', width: 400, height: 300, depth: 8 }
})

console.log(toObtain); //This function call is evaluated BEFORE im.identify, which is exactly the opposite of what I wanted to do. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T03:50:27.563

这就是节点的工作方式。这是正常的异步行为。

为了避免在使用节点时发疯，将事情分解为每个都有特定目的的功能很重要。每个函数将根据需要调用下一个传递参数。

```
var im = require('imagemagick');

var identify = function () {

      im.identify('kittens.png', function(err, features){

         doSomething(features) // call doSomething function passing features a parameter.

      })

}(); // this is the first function so it should self-execute.

var doSomething = function (features) {

       var toObtain = features;

       console.log(toObtain) //or whatever you want to do with toObtain variable
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T03:52:31.643

异步意味着事情在准备就绪时发生（彼此之间没有任何同步关系。）

这意味着如果您希望打印或以其他方式对异步函数中创建的值进行操作，则必须在其回调中这样做，因为这是保证该值可用的唯一地方。

如果您希望订购多个活动，以便它们一个接一个地发生，您需要应用以同步方式（一个接一个）“链接”异步函数的各种技术之一，例如caolan 编写的[async javascript 库。](https://github.com/caolan/async)

在您的示例中使用 async ，您将：

```
var async=require('async');

var toObtain;

async.series([

  function(next){ // step one - call the function that sets toObtain

    im.identify('kittens.png', function(err, features){
      if (err) throw err;
      toObtain = features;
      next(); // invoke the callback provided by async
    });

  },

  function(next){ // step two - display it
    console.log('the value of toObtain is: %s',toObtain.toString());
  }
]); 
```

这样做的原因是因为异步库提供了一个特殊的回调，用于移动到系列中的下一个函数，该函数必须在当前操作完成时调用。

有关更多信息，请参阅[async](https://github.com/caolan/async)文档，包括如何通过 next() 回调将值传递给系列中的下一个函数以及作为 async.series() 函数的结果。

可以使用以下命令将 async 安装到您的应用程序中：

```
npm install async 
```

或全局，因此它可用于您的所有 nodejs 应用程序，使用：

```
npm install -g async 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T03:24:37.990

这是正常的，因为 im.identify 接缝是异步的（它需要回调）。因此，回调可以在下一行**之后执行。**

**编辑：**因此，您必须将用户获取的任何代码放入**您**的回调中，之后`toObtain = features;`

# php - 站点安全正则表达式处理程序？(PHP)

> ID：12540412
> 
> 赞同：7
> 
> 时间：2012-09-22T03:24:13.253
> 
> 标签：php, session, mod-rewrite, redirect, login

我工作的一家公司要求我使用他们的一个网站并将其设为另一个网站的子域。然后，他们要求我将“登录/注销”会话控制从他们的主域扩展到他们的子域。

完成此操作后，我发现存在控制/管理问题。由于它们有大量的单独页面，并且由于它们广泛的目录结构，它们太复杂了，无法将 PHP 片段添加到每个页面以根据登录状态进行重定向。

这是我的解决方案..请让我知道任何问题或任何其他对我有帮助的事情。

1.  我将使用 Mod_rewrite 将 subdomin 上的每个请求重定向到特定页面（**handler.php?requested_url=**）。
2.  我将在他们的网站上创建一个“站点允许/禁止规则”部分。本节将包含一个带有如下规则的文本框：

    ```
     +/weather/            ---> will allow anyone access to any url that contains "/weather/" somewhere within it, irregardless of logged-in status.

     -/weather/premium/    ---> will only allow access to a url that contains /weather/premium to logged-in users. 
    ```

    这将输出到存储在文件**rules.php**中的数组，如下所示：

    ```
    $ruleList = array(); 
    $ruleList[] = '+/weather/'; 
    $ruleList[] = '-/weather/premium/'; 
    ```

3.  在**handler.php**中，如果用户登录，我会将它们转发到**requested.url**。如果用户未登录，那么我将首先假设每个页面都仅限于未登录用户。**handler.php**将解析**request_url 并对照 rules.php****检查**它，看看是否有任何明确的权限设置。然后，如果规则允许非登录访问，它会将用户转发到**requested_url**，否则会将它们发送到登录页面。

 ****我可以立即看到的一个问题是，鉴于`Mod_rewrite`规则会将每个请求发送到**handler.php**，我该如何避免无限循环？

重定向是否应该通过其他方法完成`header("Location: ")`？

# **编辑：这是我的斗争的更新：**

在顶级域（example.com）的**.htaccess文件中，我添加了：**

```
 #Prevent catching requests for the sub1 subdomain
    RewriteCond %{REQUEST_URI} ^sub1\.example\.com
    RewriteRule .* – [L] 
```

* * *

然后，在**sub1.example.com子域的****.htaccess**中，我添加了以下内容：

 **```
 IndexIgnore *

    RewriteEngine On
    RewriteBase /path/to/base

    #Avoid infinite loop on outgoing requests
    RewriteCond %{HTTP_REFERER} !^$
    RewriteCond %{REQUEST_URI} !^$
    RewriteCond %{HTTP_REFERER} !^/?handler.php?$
    RewriteCond %{REQUEST_URI} !^/?handler.php?$

        #Check for cookie. Redirect to handler if not found.  (not yet implemented)                               
        #RewriteCond %{HTTP_COOKIE} !session_id
    RewriteRule (.*)$ handler.php?requested_url=$1 [NC,L,QSA] 
```

* * *

这是**handler.php**

```
 <?php

        $url = $_REQUEST['requested_url'];

        //Check list of permissions. For now just assume permitted.
        $permitted = true;
        if ($url == "") $url = "http://sub1.example.com";   
        if ($permitted)
            header("Location: ".$url);
        header("Location: http://sub1.example.com");        

    ?> 
```

我是如此接近，我可以品尝它。不幸的是，目前我几乎在所有地方都得到了“重定向循环”。如果有人可以在正确的方向上轻推我，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T21:49:01.323

只是一个想法，但也许你不需要为 mod_rewrite 苦苦挣扎。如果您想处理所有来自 PHP 的内容，为什么不将前置文件添加到您的 VHOST 中呢？

```
php_value auto_prepend_file handler.php 
```

它将包含在任何 PHP 脚本之前，如果需要，您可以重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T04:03:39.157

您是否有不想使用 apache auth 的原因？我认为它会简单得多。 [http://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)

您可以在虚拟主机中按目录指定访问规则，您的用户信息可以在平面文件或数据库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T21:34:19.633

我认为您的想法中有一个循环，因此应用程序中存在循环。像这样：

1.  用户代理请求子域中的旧资源。

2.  由于 UA 必须具有有效的凭据并且旧资源无法验证凭据，因此 UA 被重定向到处理程序。

3.  处理程序验证凭据，并将 UA 重定向回旧资源。

4.  转到 2。

问题是请求的资源无法区分步骤 1 和步骤 3 中的 UA 请求，因为区别是由 UA 的凭据定义的，旧资源不评估该凭据。

从另一个角度来看，这种矛盾也很明显。想象一下，您解决了循环，并且 UA 被重定向到遗留资源——例如[http://sub1.example.com/foo.php](http://sub1.example.com/foo.php)。对于服务器返回资源，它必须意味着没有评估凭据（因为它不这样做），因此资源实际上是公共的。

为了解决这个问题，您必须通过更改第 2 步或第 3 步的规则来打破僵局：

*   要更改第 2 步，请将凭据评估添加到旧资源的响应中。先前的答案建议`auto_prepend_file()`朝着这个方向发展，但仅适用于 PHP 遗留文件——图像、HTML 等不走运。

*   要更改第 3 步，找到一种无需 UA 直接请求资源即可交付遗留资源的方法。一种可能性是让处理程序从文件系统中获取资源，并将其`readfile()`与一些 HTTP 标头管理连接起来。

也许这些的组合会为您解决问题：`auto_prepend_file()`将身份验证处理应用于遗留 PHP 和`readfile()`非 PHP 内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T20:55:15.577

您只需要一个简单的验证功能。用户要么被允许访问资源，要么被禁止。所以首先设置上下文：

```
$rules          = rules_load();
$uri            = $_SERVER['QUERY_STRING'];
$userIsLoggedIn = user_is_logged_in(); 
```

接下来我们有上述验证函数，默认情况下应该返回`false`并将上下文作为参数：

```
$validation = function (array $rules, $uri, $userIsLoggedIn) {
    $permitted = false;    
    return $permitted;
}; 
```

那么逻辑就很简单了：

```
if ($validation($rules, $uri, $userIsLoggedIn)) {
    # can pass
    echo "can pass";
} else {
    # login first
    echo "login first";
} 
```

这自然已经给了你*“先登录”*。美好的。我们将很快更改该函数的参数。让我们看看彼此的方式`$rules`和立场。`$uri`

每个规则都可以匹配一个 URI，至少*路径*可以。让我们拆分规则：

```
 <sign><path>

 sign    := [+-]
 path    := <segment>*/
 segment := /[a-z]+ 
```

规则匹配或不匹配`$uri`. 如果匹配，则*标志*决定这意味着什么。

所以实际上有两个由*符号*指定的组，可以说是否`$uri`匹配。这又是一个简单的函数，首先规则数组按符号过滤，然后按路径过滤。

考虑一个具有三个输入参数的函数，它以与 uri 匹配的数组形式返回所有规则的子集：

```
function ($sign) use ($rules, $uri) {
    return array_reduce($rules, function ($a, $v) use ($rules, $sign, $uri) {
        $v[0] === $sign && false !== strpos($uri, substr($v, 1)) && $a[] = $v;
        return $a;
    }, array());
}; 
```

这或多或少是对`array_reduce`. 所以让我们假设这将与一个名为的变量相关联`$match`，然后可以替换该变量`$rules`并`$uri`作为`$validation`函数的参数。

```
$validation = function ($match, $userIsLoggedIn) { 
```

所以剩下的部分就是现在制定验证条件：

```
 $permitted = $userIsLoggedIn; 
```

默认情况下，如果用户已登录，则授予权限。只有在用户没有登录的情况下，如果-组不匹配，+组匹配，我们可以授予权限。出于安全原因， - 组应该放在第一位并覆盖任何 + 规则：

```
 $permitted = $userIsLoggedIn ?: !$match('-') && $match('+'); 
```

剩下的就是返回该状态：

```
 return $permitted;
}; 
```

由于这个函数相当简单，我们可以发出它。现在完整的代码：

```
$rules          = rules_load();
$uri            = $_SERVER['QUERY_STRING'];
$userIsLoggedIn = user_is_logged_in();

$match = rules_match($rules, $uri);

$permitted = $userIsLoggedIn ?: !$match('-') && $match('+');

if ($permitted) {
    # can pass
    echo "can pass";
} else {
    # login first
    echo "login first";
}

/**
 */
function rules_match(array $rules, $uri) {
    return function ($sign) use ($rules, $uri) {
        return array_reduce($rules, function ($a, $v) use ($rules, $sign, $uri) {
            $v[0] === $sign && false !== strpos($uri, substr($v, 1)) && $a[] = $v;
            return $a;
        }, array());
    };
} 
```******

# c# - 我可以并且应该强制 DGV 单元格的内容为空吗？

> ID：12540417
> 
> 赞同：0
> 
> 时间：2012-09-22T03:25:11.030
> 
> 标签：c#, winforms, generics, datagridview

我将在 DGV 中输入的值保存到列表`<T`>；它们是十进制值或什么都没有（空）。如果为空，我希望它们被视为 null，以便我的辅助函数将这些空 val 视为 0。但是这里的这一行：

```
rrsr.DuckbillRate = Convert.ToDecimal(GetValAtColRow(colNumber, rowNumber)); 
```

...有时会因“输入字符串格式不正确”而失败（失败时，它尝试转换的值是 string.empty）：

这是我获取单元格值的辅助函数，以便我可以将它们保存在我的列表`<T`>中，并从存储在列表`<T`>中的那些记录的内容中恢复/重新填充单元格：

```
private string GetValAtColRow(int colNum, int rowNum)
{
 DataGridViewRow desiredRow = dataGridViewPlatypi.Rows[rowNum];
 return (desiredRow.Cells[colNum].Value ?? 0).ToString(); 
}

private void SetValAtColRow(int colNum, int rowNum, string val)
{
 string convertedVal = val;
 // If the value is 0, I want to display an empty cell (nothing)
 if (convertedVal.Equals("0"))
 {
  convertedVal = string.Empty;
 }
 DataGridViewRow desiredRow = dataGridViewPlatypi.Rows[rowNum];
 desiredRow.Cells[colNum].Value = convertedVal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:09:33.463

解析在某处变得错误......

当解析不正确时，通常会出现输入字符串格式不正确的错误...

关于其他问题...尝试这样做>>>

```
string a =  dataGridViewPlatypi.Rows[rowNum].Cells[colNum].Value.toString()

if(a=="")
{
.
.
//further things
} 
```

# c++ - 为什么在 c++ 中未指定函数参数的评估顺序？

> ID：12540418
> 
> 赞同：12
> 
> 时间：2012-09-22T03:25:12.043
> 
> 标签：c++, operator-precedence

该标准未使用此行指定参数的评估顺序：

> 参数的评估顺序未指定。

做什么

> 在没有表达式求值顺序限制的情况下可以生成更好的代码

意味着？

例如，要求所有编译器从左到右评估函数参数有什么缺点？由于这个未指定的规范，编译器会执行哪些类型的优化？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-22T03:36:20.177

允许编译器重新排序操作数的评估增加了更多的优化空间。

这是一个完全虚构的示例，用于说明目的。

假设处理器可以：

*   每个周期发出 1 条指令。
*   在 1 个周期内执行加法。
*   在 3 个周期内执行一次乘法。
*   可以同时执行加法和乘法。

现在假设你有一个函数调用如下：

```
foo(a += 1, b += 2, c += 3, d *= 10); 
```

[如果您要在没有OOE](http://en.wikipedia.org/wiki/Out-of-order_execution)的处理器上从左到右执行此操作：

```
Cycle - Operation
0     -    a += 1
1     -    b += 2
2     -    c += 3
3     -    d *= 10
4     -    d *= 10
5     -    d *= 10 
```

现在，如果您允许编译器重新排序它们：（并首先开始乘法）

```
Cycle - Operation
0     -    d *= 10
1     -    a += 1, d *= 10
2     -    b += 2, d *= 10
3     -    c += 3 
```

所以 6 个周期与 4 个周期。

这又是完全人为的。现代处理器比这复杂得多。但你明白了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T15:03:33.897

这是一个简单的例子。假设你有一个函数调用如下：

```
// assume that p is a pointer to an integer
foo(*p * 3, bar(), *p * 3 + 1); 
```

编译器需要取消引用`p`两次（并根据结果进行一些计算）并调用`bar`一次。如果编译器很聪明，它可能会将评估重新排序为

```
int temp = *p * 3;
foo(temp, bar(), temp + 1); 
```

这样，它只需执行一次“取消引用，乘以 3”。这被称为公共子表达式消除。

# sencha-touch - 如何在 Sencha Touch 2 中从简单的 app.js 创建 MVC

> ID：12540424
> 
> 赞同：1
> 
> 时间：2012-09-22T03:26:24.787
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个简单的登录表单，正确登录后会滑动到下一个视图。我发现的两个例子的组合。我想使用 MVC 模式将此登录划分为多个文件。在我在网上看到的许多示例中，这在 Sencha Touch 2 中是小菜一碟。无论我尝试什么，我都无法让它工作。我习惯用 Flex、Java、ActionScript、Php 进行编程，但 Sencha json 完全是另一回事。任何人都可以帮助我吗？我想在推荐的文件夹结构中有一个模型、存储、视图和控制器包：

```
-app
  -controller
    -Controller.js
  -model
    -Model.js
  -store
    -Store.js
  -view
    -Main.js
    -Login.js
    -SecondView.js
-app.js
-app.css
-index.html 
```

这是在一个文件中包含所有逻辑的当前 app.js。

```
Ext.require([
'Ext.form.Panel',
'Ext.form.FieldSet',
'Ext.field.Text',
'Ext.field.Password',

'Ext.data.Store'
]);

Ext.define('User', {
extend: 'Ext.data.Model',

config: {
    fields: [
        {name: 'name', type: 'string'},
        {name: 'password', type: 'string'}
    ]
}
});

Ext.setup({
icon: 'icon.png',
tabletStartupScreen: 'tablet_startup.png',
phoneStartupScreen: 'phone_startup.png',
glossOnIcon: false,
onReady: function() {
    var form;

    var formBase = {
        url: 'login.php',
        standardSubmit: false,
        title:"Login",
        items: [
            {
                xtype: 'fieldset',
                title: 'MyCompony',
                instructions: 'Log in with username and password.',
                defaults: {
                    required: true,
                    labelAlign: 'left',
                    labelWidth: '40%'
                },
                items: [
                    {
                        xtype: 'textfield',
                        name: 'name',
                        label: 'Name',
                        value: 'user',
                        autoCapitalize: false
                    },
                    {
                        xtype: 'passwordfield',
                        name: 'password',
                        label: 'Password',
                        value: 'test'
                    }
                ]
            },
            {
                xtype: 'toolbar',
                docked: 'bottom',
                items: [
                    {xtype: 'spacer'},
                    {
                        text: 'Reset',
                        handler: function() {
                            form.reset();
                        }
                    },
                    {
                        text: 'Login',
                        ui: 'confirm',
                        handler: function() {
                            if (formBase.user) {
                                form.updateRecord(formBase.user, true);
                            }
                            form.submit({
                                waitMsg: {message: 'Submitting'}
                            });
                        }
                    }
                ]
            }
        ],

        listeners: {
            submit: function(form, result) {
                console.log('success', Ext.toArray(arguments));
                view.push({
                    title: 'Second View',
                    padding: 10,
                    items: [
                        {
                            html: 'Second view'
                        },
                        {
                            xtype: 'button',
                            text: 'Pop this view!',
                            width: 200,
                            handler: function() {
                                view.pop();
                            }
                        }
                    ]
                });
            },
            exception: function(form, result) {
                console.log('failure', Ext.toArray(arguments));
            }
        }
    };

    if (Ext.os.deviceType == 'Phone') {
        Ext.apply(formBase, {
            xtype: 'formpanel',
            autoRender: true
        });
    } else {
        Ext.apply(formBase, {
            xtype: 'formpanel',
            autoRender: true,
            padding: 100
        });
    }
    form = Ext.create('Ext.form.Panel', formBase);
    var view = Ext.create('Ext.navigation.View', {
        fullscreen: true,
        items: [
            form
        ]
    });

}
}); 
```

这是一个简单的 php 脚本 (login.php) 来回答登录请求。

```
<?php
$pw = $_REQUEST['password'];
header('Content-Type: application/json');
if($pw == 'asdf'){
    echo '{"success":true, "msg":'.json_encode('This User is authorized').'}';
}else{
    echo '{"success":false, "msg":'.
        json_encode('This User is NOT authorized').
        ', "errors" : { "password" :'.json_encode('Password is required').
        '}'.
        ', "pwd" :'.json_encode($pw).'}';
} 
```

任何人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T03:39:13.750

好的，经过一些研究（几天），这是答案：

索引.html：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Map</title>
    <link rel="stylesheet" href="../../resources/css/sencha-touch.css" type="text/css">
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="../../builds/sencha-touch-all-debug.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body>
</body>
</html> 
```

登录.php：

```
<?php
$pw = $_REQUEST['password'];
header('Content-Type: application/json');
if($pw == 'test'){
    echo '{"success":true, "msg":'.json_encode('This User is authorized').'}';
}else{
    echo '{"success":false, "msg":'.
        json_encode('This User is NOT authorized').
        ', "errors" : { "password" :'.json_encode('Password is required').
        '}'.
        ', "pwd" :'.json_encode($pw).'}';
}
?> 
```

应用程序.js：

```
Ext.Loader.setConfig({ enabled: true });
Ext.application({
    name: 'AddressBook',

    icon: 'resources/images/icon.png',
    tabletStartupScreen: 'resources/images/tablet_startup.png',
    phoneStartupScreen: 'resources/images/phone_startup.png',
    glossOnIcon: true,

    models: ['WorkOrder'],
    stores: ['WorkOrders'],
    views: ['Main','workorder.Map'],
    controllers: ['AppController'],

    launch: function() {
        Ext.Viewport.add({
            xclass: 'AddressBook.view.Main'
        });
    }
}); 
```

werkorders.json

```
[
    {
        "id": "14",
        "lastName": "Franklin",
        "latitude": "52.370216",
        "longitude": "4.895168"
    },
    {
        "id": "2",
        "lastName": "Johnson",
        "latitude": "52.370316",
        "longitude": "4.895868"
    },
    {
        "id": "8",
        "lastName": "Vanderburg",
        "latitude": "52.370516",
        "longitude": "4.895968"
    }
] 
```

应用程序/视图/Main.js：

```
Ext.define('AddressBook.view.Main', {
    extend: 'Ext.navigation.View',
    xtype: 'mainview',

    requires: [
        'AddressBook.view.Login',
        'AddressBook.view.workorder.Map',
        'AddressBook.view.workorder.Edit'
    ],

    config: {
        autoDestroy: false,

        navigationBar: {
            ui: 'sencha',
            items: [
                {
                    xtype: 'button',
                    id: 'editButton',
                    text: 'Edit',
                    align: 'right',
                    hidden: true,
                    hideAnimation: Ext.os.is.Android ? false : {
                        type: 'fadeOut',
                        duration: 200
                    },
                    showAnimation: Ext.os.is.Android ? false : {
                        type: 'fadeIn',
                        duration: 200
                    }
                },
                {
                    xtype: 'button',
                    id: 'saveButton',
                    text: 'Save',
                    ui: 'sencha',
                    align: 'right',
                    hidden: true,
                    hideAnimation: Ext.os.is.Android ? false : {
                        type: 'fadeOut',
                        duration: 200
                    },
                    showAnimation: Ext.os.is.Android ? false : {
                        type: 'fadeIn',
                        duration: 200
                    }
                }
            ]
        },

        items: [
            { xtype: 'loginForm' }
        ]
    }
}); 
```

应用程序/视图/Login.js：

```
Ext.define('AddressBook.view.Login', {
    title: "Luminizer Login",
    extend: 'Ext.form.Panel',
    xtype: 'loginForm',

    config: {
        url: 'login.php',
        standardSubmit: false,
        title: 'Login Luminizer',
        layout: 'vbox',
        items: [
            {
                xtype: 'fieldset',
                title: 'MyCompony',
                instructions: 'Log in with username and password.',
                defaults: {
                    required: true,
                    labelAlign: 'left',
                    labelWidth: '40%'
                },
                items: [
                    {
                        xtype: 'textfield',
                        name: 'username',
                        id: 'username',
                        label: 'Name',
                        value: 'user',
                        autoCapitalize: false
                    },
                    {
                        xtype: 'passwordfield',
                        name: 'password',
                        id: 'password',
                        label: 'Password',
                        value: 'test'
                    }
                ]
            },
            {
                xtype: 'toolbar',
                docked: 'bottom',
                items: [
                    {xtype: 'spacer'},
                    {
                        text: 'Reset',
                        handler: function() {
                            var form = this.parent.parent;
                            form.reset();
                        }
                    },
                    {
                        text: 'Login',
                        ui: 'confirm',
                        handler: function() {
                            var form = this.parent.parent;

                            var username = form.getValues().username;//form.down('#username').getValue();
                            var password = form.getValues().password;//down('#password').getValue();
                            form.fireEvent('login', username, password);
                        }
                    }
                ]
            }
        ]
    },

    resetForm: function() {
        var view = this.parent;
        view.down("#username").setValue("");
        view.down("#password").setValue("");
    }
}); 
```

应用程序/视图/workorder/map.js：

```
Ext.define('AddressBook.view.workorder.Map', {
    extend: 'Ext.Panel',
    xtype: 'map-show',
    requires: [
        'Ext.Map'
    ],
    config: {
        title: 'Information',
        layout: 'card',
        items: [
            {
                xtype: 'map',
                mapOptions : {
                    zoom : 15,
                    mapTypeId : google.maps.MapTypeId.ROADMAP,
                    navigationControl: true,
                    navigationControlOptions: {
                        style: google.maps.NavigationControlStyle.DEFAULT
                    }
                }
            }
        ]
    },

    centerMap: function(newRecord) {
        if (newRecord) {
            this.down('map').setMapCenter({
                latitude: newRecord.data.latitude,
                longitude: newRecord.data.longitude
            });
        }
    },

    setMarkers: function(markers) {
        var mapPanel = this;
        var map = this.down("map")._map;
        mapPanel.markerDataDict = {};
        mapPanel.markerDict = {};

        if(!mapPanel.infowindow) {
            mapPanel.infowindow = new google.maps.InfoWindow({
                content: 'Sencha HQ'
            });
        }
        for(var i = 0 ;i < markers.length; i++) {
            var markerData = markers[i];
            map.setZoom(15);
            var latitude = Number(markerData.data.latitude);
            var longitude = Number(markerData.data.longitude);
            var position = new google.maps.LatLng(latitude, longitude);
            mapPanel.markerDataDict[position] = markerData;
            var marker = new google.maps.Marker({
                position: position,
                title : markerData.data.id,
                map: map
            });
            mapPanel.markerDict[position] = marker;

            google.maps.event.addListener(marker, 'click', function(mouseEvent) {
                var lat = Math.round(mouseEvent.latLng.lat() * 1000000)/1000000;
                var lng = Math.round(mouseEvent.latLng.lng() * 1000000)/1000000;
                var id = mapPanel.markerDataDict[mouseEvent.latLng].data.id;
                mapPanel.infowindow = new google.maps.InfoWindow();
                mapPanel.infowindow.setContent(['Werkorder: '+ id +'<br/>',
                                                'lat.:' + lat + '<br/>',
                                                'long.:' + lng ].join(""));
                if(mapPanel.oldInfowindow)
                    mapPanel.oldInfowindow.close();
                mapPanel.oldInfowindow = mapPanel.infowindow;
                mapPanel.infowindow.open(map, mapPanel.markerDict[mouseEvent.latLng]);
                mapPanel.infowindow.setPosition(mouseEvent.latLng);
                mapPanel.fireEvent('markerClicked', mapPanel.markerDataDict[mouseEvent.latLng])
            });
        }
    }
}); 
```

应用程序/视图/工作订单/Edit.js：

```
Ext.define('AddressBook.view.workorder.Edit', {
    extend: 'Ext.Container',
    xtype: 'contact-edit',

    config: {
        title: 'Edit',
        layout: 'fit',

        items: [
            {
                xtype: 'formpanel',
                items: [
                    {
                        xtype: 'fieldset',
                        defaults: {
                            labelWidth: '35%'
                        },
                        title: 'Information',
                        items: [
                            {
                                xtype: 'textfield',
                                label: 'First Name',
                                name: 'firstName'
                            },
                            {
                                xtype: 'textfield',
                                label: 'Last Name',
                                name: 'lastName'
                            },
                            {
                                xtype: 'textfield',
                                label: 'Title',
                                name: 'title'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        defaults: {
                            labelWidth: '35%'
                        },
                        title: 'Contact Information',
                        items: [
                            {
                                xtype: 'textfield',
                                label: 'Telephone',
                                name: 'telephone'
                            }
                        ]
                    },
                    {
                        xtype: 'fieldset',
                        title: 'Address',
                        defaults: {
                            labelWidth: '35%'
                        },
                        items: [
                            {
                                xtype: 'textfield',
                                label: 'City',
                                name: 'city'
                            },
                            {
                                xtype: 'textfield',
                                label: 'State',
                                name: 'state'
                            },
                            {
                                xtype: 'textfield',
                                label: 'Country',
                                name: 'country'
                            }
                        ]
                    }
                ]
            }
        ],

        listeners: {
            delegate: 'textfield',
            keyup: 'onKeyUp'
        },

        record: null
    },

    updateRecord: function(newRecord) {
        this.down('formpanel').setRecord(newRecord);
    },

    saveRecord: function() {
        var formPanel = this.down('formpanel'),
            record = formPanel.getRecord();

        formPanel.updateRecord(record);

        return record;
    },

    onKeyUp: function() {
        this.fireEvent('change', this);
    }
}); 
```

应用程序/控制器/AppController.js：

```
Ext.define('AddressBook.controller.AppController', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            main: 'mainview',
            editButton: '#editButton',
            contacts: 'contacts',
            loginForm: 'loginForm',
            showMap: 'map-show',
            editContact: 'contact-edit',
            saveButton: '#saveButton'
        },

        control: {
            main: {
                push: 'onMainPush',
                pop: 'onMainPop'
            },
            editButton: {
                tap: 'onContactEdit'
            },
            contacts: {
                itemtap: 'onMarkerSelect'
            },
            loginForm: {
                login: 'onLogin'
            },
            showMap: {
                markerClicked: 'onMarkerSelect'
            },
            saveButton: {
                tap: 'onContactSave'
            },
            editContact: {
                change: 'onContactChange'
            }
        }
    },

    onMainPush: function(view, item) {
        var editButton = this.getEditButton();

        if (item.xtype == "map-show") {
            this.getLoginForm().reset();

            this.showEditButton();
        } else {
            this.hideEditButton();
        }
    },

    onMainPop: function(view, item) {
        if (item.xtype == "contact-edit") {
            this.showEditButton();
        } else {
            this.hideEditButton();
        }
    },

    onMarkerSelect: function(record) {
        var editButton = this.getEditButton();

        if (!this.showEdit) {
            this.showEdit = Ext.create('AddressBook.view.workorder.Edit');
        }

        // Bind the record onto the show contact view
        this.showEdit.setRecord(record);

        // Push the show contact view into the navigation view
        this.getMain().push(this.showEdit);
    },

    onLogin: function(username, password) {
        var controller = this;
        Ext.Ajax.request({
            url: 'login.php',
            method: 'POST',
            disableCaching: true,

            params: {
                username: username,
                password: password
            },

            success: function(response) {
                console.log("Login successful for {username}");
                var editButton = controller.getEditButton();
                if (!controller.showContact) {
                    controller.showContact = Ext.create('AddressBook.view.workorder.Map');
                }

                var store = Ext.getStore("WorkOrders");
                store.load({callback: function(records, operation, success) {
                                if(success) {
                                    console.log(records);
                                    controller.showContact.centerMap(store.data.items[0]);
                                    controller.showContact.setMarkers(store.data.items);
                                    // Push the show contact view into the navigation view
                                    controller.getMain().push(controller.showContact);
                                    controller.getLoginForm().resetForm();
                                }
                            },
                            scope: this
                });

            },

            failure: function(response) {
                console.log("Login failure for {username}");
            }
        });

    },

    onMarkerClicked: function(markerData) {

    },

    onContactEdit: function() {
        if (!this.editContact) {
            this.editContact = Ext.create('AddressBook.view.workorder.Edit');
        }

        // Bind the record onto the edit contact view
        this.editContact.setRecord(this.getShowContact().getRecord());

        this.getMain().push(this.editContact);
    },

    onContactChange: function() {
        this.showSaveButton();
    },

    onContactSave: function() {
        var record = this.getEditContact().saveRecord();

        this.getShowContact().updateRecord(record);

        this.getMain().pop();
    },

    showEditButton: function() {
        var editButton = this.getEditButton();

        if (!editButton.isHidden()) {
            return;
        }

        this.hideSaveButton();

        editButton.show();
    },

    hideEditButton: function() {
        var editButton = this.getEditButton();

        if (editButton.isHidden()) {
            return;
        }

        editButton.hide();
    },

    showSaveButton: function() {
        var saveButton = this.getSaveButton();

        if (!saveButton.isHidden()) {
            return;
        }

        saveButton.show();
    },

    hideSaveButton: function() {
        var saveButton = this.getSaveButton();

        if (saveButton.isHidden()) {
            return;
        }

        saveButton.hide();
    }
}); 
```

应用程序/模型/WorkOrder.js：

```
Ext.define('AddressBook.model.WorkOrder', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            'id',
            'lastName',
            'latitude',
            'longitude'
        ]
    }
}); 
```

应用/商店/WorkOrders.js：

```
Ext.define('AddressBook.store.WorkOrders', {
    extend: 'Ext.data.Store',

    config: {
        model: 'AddressBook.model.WorkOrder',
        autoLoad: false,
        sorters: 'id',
        proxy: {
            type: 'ajax',
            url: 'werkorders.json',
            reader: {
                type: 'json'
            }
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:19:47.987

我强烈建议您观看此视频以了解 Sencha Touch 2 中的 MVC 应用程序

[链接在这里](http://vimeo.com/33311074)

该视频有一个处理表格的示例，您可以根据自己的情况申请。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-22T06:44:11.527

MVC 的全部意义在于分解逻辑。我不能说在问题中保留 app.js 中的所有逻辑有什么问题。但是看了各种例子后，我了解到 app.js 是一个小文件，而不是一个大文件。将逻辑部分移动到各种其他文件（控制器逻辑到 controller.js 和所有文件），然后重试。
我可以快速指出的一个示例是以下代码

```
var formBase = {
    url: 'login.php',
    standardSubmit: false,
    title:"Login",
    items: [
        {
            xtype: 'fieldset',
            title: 'MyCompony',
            instructions: 'Log in with username and password.',
            defaults: {
                ...
            },
            items: [
                {
                    xtype: 'textfield',
                    ...
                },
                {
                    xtype: 'passwordfield',
                    ...
                }
            ]
        },
        {
            xtype: 'toolbar',
            ...
            items: [
                {xtype: 'spacer'},
                {
                    ...
                },
                {
                    text: 'Login',
                    ...
                    handler: function() {
                        ...
                    }
                }
            ]
        }
    ], 
```

应该在 view.js 中。这就是 MVC 的意思。希望它能回答你的问题。

# android - Android AndEngine：正确处理碰撞检测

> ID：12540426
> 
> 赞同：6
> 
> 时间：2012-09-22T03:26:53.760
> 
> 标签：android, collision-detection, andengine, game-engine, collision

我正在开发一个涉及 ff 的简单 AndEngine 游戏。精灵

a.) 坦克 b.) 士兵 c.) 炸弹

我在这里有一个类似的问题：[Android AndEngine：简单精灵碰撞](https://stackoverflow.com/questions/12532918/android-andengine-simple-sprite-collision)

游戏是什么样子的：

![在此处输入图像描述](../Images/47e96ea20271fb30bc05a9a9d138d2e3.png)

然而，在解决了最初的问题后，又出现了另一个问题：

当炸弹（在飞机当前所在的位置产生并垂直下降，直到通过鼠标单击到达目标或地板）击中目标时，例如士兵，士兵精灵必须分离并在其身后留下一个血溅精灵1 秒，以及炸弹的爆炸精灵。但是，游戏力量关闭并给出 indexOutOfBoundError。我知道这可能是炸弹与其目标之间的精灵计数差异导致数组越界错误，但 logCat 根本没有帮助。

```
09-22 11:13:37.585: E/AndroidRuntime(735): FATAL EXCEPTION: UpdateThread
09-22 11:13:37.585: E/AndroidRuntime(735): java.lang.IndexOutOfBoundsException: Invalid  index 5, size is 5
09-22 11:13:37.585: E/AndroidRuntime(735):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
09-22 11:13:37.585: E/AndroidRuntime(735):  at java.util.ArrayList.get(ArrayList.java:304)
09-22 11:13:37.585: E/AndroidRuntime(735):  at org.andengine.entity.Entity.onManagedUpdate(Entity.java:1402)
09-22 11:13:37.585: E/AndroidRuntime(735):  at org.andengine.entity.Entity.onUpdate(Entity.java:1167)
09-22 11:13:37.585: E/AndroidRuntime(735):  at org.andengine.entity.Entity.onManagedUpdate(Entity.java:1402)
09-22 11:13:37.585: E/AndroidRuntime(735):  at org.andengine.entity.scene.Scene.onManagedUpdate(Scene.java:284)
09-22 11:13:37.585: E/AndroidRuntime(735):  at org.andengine.entity.Entity.onUpdate(Entity.java:1167)
09-22 11:13:37.585: E/AndroidRuntime(735):  at org.andengine.engine.Engine.onUpdateScene(Engine.java:591)
09-22 11:13:37.585: E/AndroidRuntime(735):  at org.andengine.engine.Engine.onUpdate(Engine.java:586)
09-22 11:13:37.585: E/AndroidRuntime(735):  at org.andengine.engine.Engine.onTickUpdate(Engine.java:548)
09-22 11:13:37.585: E/AndroidRuntime(735):  at org.andengine.engine.Engine$UpdateThread.run(Engine.java:820) 
```

如此处所见，logCat 没有在我的代码上给出错误，而是在 AndEngine 本身上给出错误，而且很可能不是这种情况。

我在 onCreateScene 更新处理程序中运行的新代码（根据上面链接的先前问题的帮助）：

```
protected void checkSoldierCollision() {
    // TODO Auto-generated method stub

    int numBombs = bombGroup.getChildCount();
    int numTroops = troopsGroup.getChildCount();
    final ArrayList<Sprite> toBeDetached = new ArrayList<Sprite>();
    for (int i = 0; i < numBombs; i++) {
        Sprite s = (Sprite) bombGroup.getChildByIndex(i);
        for (int j = 0; j < numTroops; j++) {
            Sprite s2 = (Sprite) troopsGroup.getChildByIndex(j);

            if (s.collidesWith(s2)) {

                /*Sprite splat = createSplat();
                splat.setPosition(s.getX(), s.getY());
                getEngine().getScene().attachChild(splat);*/

                Sprite splode = createExplosion();
                splode.setPosition(s.getX(), s.getY());
                getEngine().getScene().attachChild(splode);

                // WARNING: cannot detach from the list
                 //while looping through the list
                toBeDetached.add(s);
                toBeDetached.add(s2);

            }
        }
    }
    runOnUpdateThread(new Runnable() {
        @Override
        public void run() {
            for (Sprite s : toBeDetached) {
                s.detachSelf();
                Sprite splode = createExplosion();
                splode.setPosition(s.getX(), s.getY());
                getEngine().getScene().attachChild(splode);

            }
            toBeDetached.clear();
        }
    });

} 
```

我注意到它只能是啪啪声或爆炸，因为它没有错误。如果 splat 和爆炸都在碰撞时填充场景，则会发生错误。

此外，即使炸弹没有击中士兵（但在击中地板时仍然分离并替换为爆炸云），它也会给出类似的错误：

我的 createBomb 函数：

```
 public Sprite createBomb(float x, float y) {
    Sprite bombSprite = new Sprite(x, y, this.mBombTextureRegion,
            getVertexBufferObjectManager());

    MoveYModifier downModBomb = new MoveYModifier(1, 60, FLOOR);

    downModBomb.addModifierListener(new IModifierListener<IEntity>() {

        @Override
        public void onModifierStarted(IModifier<IEntity> pModifier,
                IEntity pItem) {

        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier,
                final IEntity pItem) {
             pItem.detachSelf();
             AnimatedSprite explodeSprite = createExplosion();
             explodeSprite.setPosition(pItem.getX(), FLOOR);
             getEngine().getScene().attachChild(explodeSprite);
        }
    });

    bombSprite.registerEntityModifier(downModBomb); // register action
    return bombSprite;
} 
```

我的 onCreateScene 炸弹函数和碰撞 updateHandler：

```
 scene.setOnSceneTouchListener(new IOnSceneTouchListener() {

        @Override
        public boolean onSceneTouchEvent(Scene pScene,
                TouchEvent pSceneTouchEvent) {
            if (pSceneTouchEvent.getAction() == TouchEvent.ACTION_UP) {
                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        Sprite bomb = createBomb(f16Sprite.getX(),
                                f16Sprite.getY());
                        bombGroup.attachChild(bomb);
                    }
                });

                return true;
            }
            return false;
        }
    });

    // periodic checks
    scene.registerUpdateHandler(new IUpdateHandler() {

        @Override
        public void onUpdate(float pSecondsElapsed) {
            // checkTankCollision();
            // checkSoldierBackCollision();
            checkSoldierCollision();
        }

        @Override
        public void reset() {
        }
    }); 
```

我的 createExplosion 方法：

```
 public AnimatedSprite createExplosion() {
    AnimatedSprite boomSprite = new AnimatedSprite(0, 0,
            this.mExplodeTextureRegion, getVertexBufferObjectManager());

    DelayModifier delay = new DelayModifier(.3f); // delay in seconds, can
                                                    // take float numbers .5
                                                    // seconds
    delay.addModifierListener(new IModifierListener<IEntity>() {

        @Override
        public void onModifierStarted(IModifier<IEntity> pModifier,
                IEntity pItem) {
            ((AnimatedSprite) pItem).animate(new long[] { 100, 100, 100 }, // durations/frame
                    new int[] { 1, 2, 3 }, // which frames
                    true); // loop
        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier,
                final IEntity pItem) {
            ((AnimatedSprite) pItem).detachSelf();
        }
    });

    boomSprite.registerEntityModifier(delay); // register action
    return boomSprite;
} 
```

我该如何补救？循环逻辑并不完全是我的强项。我也对如何实现这一点持开放态度。

更新：刚刚意识到，即使碰撞的结果是飞溅或爆炸，也没关系，如果玩家不断发送垃圾邮件（比如 4-5 次），整个游戏力量就会关闭。

- 每当创建焊料/罐的实例时，似乎都有允许的轰炸次数。每当炸弹击中士兵时，我都会首先关闭创建爆炸（因此血溅只会留在原位而不是两者都保留）。它工作正常，但超过 4-6 炸弹和游戏关闭。当一个新的士兵实例产生时（意味着当旧的士兵离开屏幕并分离时）玩家会在游戏部队关闭之前获得 4-6 颗炸弹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:21:32.270

问题可能是由于您通过调用 runOnUiThread 将炸弹附加到 UI 线程上，但您检查了更新线程上的冲突。尝试在 runOnUpdateThread 中添加炸弹。

通常，您希望在使用什么线程来操作事物时保持一致，否则会出现奇怪的错误，调试起来很痛苦。

附带说明：UI 线程非常适合显示 Toast，请参见以下示例：

```
runOnUiThread(new Runnable() {
    @Override
    public void run() {
        Toast.makeText(GameActivity.this, "Hello!", Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:15:52.787

为了调试它，您需要通过输出（可能通过日志）监视实际添加了多少个`bombGroup`和`troopsGroup`，这应该与应该添加多少个一致。也尝试输出`getChildCount()`你的 i 和 j 参数的值。

对于一个疯狂的猜测，试试这个：

```
for (int i = 0; i < toBeDetached.size(); i++) {

     toBeDetached.get(i).detachSelf();

  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T15:50:51.217

好的，在 JohnEye 先生的帮助下，我已经能够解决我的代码中的问题。考虑以下代码段：

```
 protected void checkSoldierCollision() {
    // TODO Auto-generated method stub

    int numBombs = bombGroup.getChildCount();
    int numTroops = troopsGroup.getChildCount();
    final ArrayList<Sprite> toBeDetached = new ArrayList<Sprite>();
    for (int i = 0; i < numBombs; i++) {
        Sprite s = (Sprite) bombGroup.getChildByIndex(i);
        for (int j = 0; j < numTroops; j++) {
            Sprite s2 = (Sprite) troopsGroup.getChildByIndex(j);

            if (s.collidesWith(s2)) {

                Sprite splat = createSplat();
                splat.setPosition(s.getX(), s.getY());
                getEngine().getScene().attachChild(splat);

                Sprite splode = createExplosion();
                splode.setPosition(s.getX(), s.getY());
                explodeGroup.attachChild(splode);
                // getEngine().getScene().attachChild(splode);

                // WARNING: cannot detach from the list
                // while looping through the list
                toBeDetached.add(s);
                toBeDetached.add(s2);

            }
        }
    }
    runOnUpdateThread(new Runnable() {
        @Override
        public void run() {
            for (Sprite s : toBeDetached) {
                s.detachSelf();
                Sprite splat = createSplat();
                splat.setPosition(s.getX(), s.getY());
                getEngine().getScene().attachChild(splat);

                Sprite splode = createExplosion();
                splode.setPosition(s.getX(), s.getY());
                explodeGroup.attachChild(splode);
                // getEngine().getScene().attachChild(splode);

            }
            toBeDetached.clear();
        }
    });

} 
```

正如我所提到的，游戏崩溃是因为 2 个碰撞对象之间的计数差异。正如 JohnEye 先生指出的那样，当一个精灵在 UI 线程中生成，但在更新线程中也没有生成时，就会发生这种情况。此外，考虑我的 createExplosion、createBomb 和 createSplat 函数：

制造炸弹

```
 public Sprite createBomb(float x, float y) {
    Sprite bombSprite = new Sprite(x, y, this.mBombTextureRegion,
            getVertexBufferObjectManager());

    MoveYModifier downModBomb = new MoveYModifier(1, 60, FLOOR);

    downModBomb.addModifierListener(new IModifierListener<IEntity>() {

        @Override
        public void onModifierStarted(IModifier<IEntity> pModifier,
                IEntity pItem) {

        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier,
                final IEntity pItem) {
            runOnUpdateThread(new Runnable() {
                @Override
                public void run() {
                    pItem.detachSelf();
                }
            });
            AnimatedSprite explodeSprite = createExplosion();
            explodeSprite.setPosition(pItem.getX(), FLOOR);
            explodeGroup.attachChild(explodeSprite);
            // getEngine().getScene().attachChild(explodeGroup);
        }
    });
    bombSprite.registerEntityModifier(downModBomb);
    return bombSprite;
} 
```

创造爆炸

```
public AnimatedSprite createExplosion() {
    AnimatedSprite boomSprite = new AnimatedSprite(0, 0,
            this.mExplodeTextureRegion, getVertexBufferObjectManager());

    DelayModifier delay = new DelayModifier(.3f); // delay in seconds, can
                                                    // take float numbers .5
                                                    // seconds
    delay.addModifierListener(new IModifierListener<IEntity>() {

        @Override
        public void onModifierStarted(IModifier<IEntity> pModifier,
                IEntity pItem) {
            ((AnimatedSprite) pItem).animate(new long[] { 100, 100, 100 }, // durations/frame
                    new int[] { 1, 2, 3 }, // which frames
                    true); // loop
        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier,
                final IEntity pItem) {
            runOnUpdateThread(new Runnable() {
                @Override
                public void run() {
                    ((AnimatedSprite) pItem).detachSelf();
                }
            });
        }
    });

    boomSprite.registerEntityModifier(delay); // register action
    return boomSprite;
} 
```

创建喷溅

```
public Sprite createSplat() {
    Sprite splatSprite = new Sprite(0, 0, this.mSplatTextureRegion,
            getVertexBufferObjectManager());

    DelayModifier delay = new DelayModifier(.3f); // delay in seconds, can
                                                    // take float numbers .5
                                                    // seconds
    delay.addModifierListener(new IModifierListener<IEntity>() {

        @Override
        public void onModifierStarted(IModifier<IEntity> pModifier,
                IEntity pItem) {

        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier,
                final IEntity pItem) {
            runOnUpdateThread(new Runnable() {
                @Override
                public void run() {
                    pItem.detachSelf();
                }
            });
        }
    });

    splatSprite.registerEntityModifier(delay); // register action
    return splatSprite;
} 
```

请注意，它们都在 runOnUpdate 线程中分离/生成其他精灵。游戏在我之前的运行中崩溃，因为我没有在 runOnUpdate 类上分离/生成所有这些精灵。

# objective-c - iOS：UIPasteboard setImage：在 iOS6 和/或 Xcode 4.5 上失败

> ID：12540429
> 
> 赞同：7
> 
> 时间：2012-09-22T03:27:34.090
> 
> 标签：objective-c, ios, ios6

**更新：**在 Apple 网站上添加了错误 12408800。

* * *

我正在将一些或多个 UIImage 复制到 UIPasteboard，并且它一直在工作，直到我的手机升级到 iOS 6。

*   Xcode 4.5 与 iOS 5.1 -**好的**
*   带有 iOS 6.0 的 Xcode 4.4 -**也可以**（[根据这篇文章](http://www.iphonedevsdk.com/forum/iphone-sdk-development/108089-uipasteboard-not-working-anymore-with-xcode-4-5-on-ios-6.html)）
*   Xcode 4.5 与 iOS 6.0 -**失败**

（也测试了通过 TestFlight 分发，因为它的价值 - 仍然失败）

这是我的代码（超级基本等）：

```
// add image to clipboard
UIImage *image = [[UIImage imageNamed:@"testimage"];
[[UIPasteboard generalPasteboard] setPersistent:YES];
[[UIPasteboard generalPasteboard] setImage:image]; 
```

这是当我尝试粘贴到 MMS/iMessage 窗口时发生的情况（抱歉，屏幕截图太大；视网膜显示..）：

![screenshot_of_failure](../Images/853cf834ee4c30c673d45cc384d66bee.png)

..以及 iOS6 模拟器中 Messages 示例应用程序失败的示例（请参阅两个问号..？）：

![另一个截图！](../Images/8d82a89fff287d9126689e22784fe1c8.png)

就像我说的，上面的代码已经工作了很长时间，所以我确信这是新的东西。

有什么想法吗？在链接的帖子中，作者建议在旧版本的 Xcode 上重新编译——但这不会导致其他 iOS6 库停止工作吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T03:23:45.523

这适用于我的 iOS 6 设备的 Xcode 4.5。

```
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];        
NSData *imgData = UIImagePNGRepresentation(@"image");
[pasteboard setData:imgData forPasteboardType:[UIPasteboardTypeListImage objectAtIndex:0]]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T22:44:04.813

仅对于一张图像，您应该使用：

```
#import <MobileCoreServices/UTCoreTypes.h> 
```

对于 JPEG：

```
NSData *jpegData = UIImageJPEGRepresentation(image, 1.0);
[[UIPasteboard generalPasteboard] setData:jpegData forPasteboardType:(id)kUTTypeJPEG]; 
```

或对于 PNG：

```
NSData *pngData = UIImagePNGRepresentation(image);
[[UIPasteboard generalPasteboard] setData:pngData forPasteboardType:(id)kUTTypePNG]; 
```

并避免直接在 UIPasteboardTypeListImage 中建立索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:47:12.117

我向 Apple Developer Technical Support 发送了一封关于此问题的电子邮件，并收到了以下回复：

> 感谢您联系 Apple 开发者技术支持。我们的工程师已经审查了您的请求，并确定最好将其作为错误报告处理。
> 
> [请使用http://bugreport.apple.com](http://bugreport.apple.com)上的 Bug Reporter 工具提交有关此问题的完整错误报告。

所以这肯定是一个错误......

# c# - 在 WPF 的 Listview 中查找项或查找字符串/记录

> ID：12540430
> 
> 赞同：0
> 
> 时间：2012-09-22T03:27:56.263
> 
> 标签：c#, wpf, listview

我整天都在搜索有关在 WPF 的列表视图中搜索记录/项目/字符串的信息，但没有运气。我刚刚开始 WPF 特别是 c#。在我的程序中，我有文本框/文本块按钮和列表视图....假设我已经在列表视图中有一条记录。顺便说一下，在列表视图中，我有参考代码列和详细信息。例如，当我在文本框中输入“12345”并单击“搜索”按钮时，如果记录不存在但如果记录在列表视图中，它将给我一条消息。它会`Selected=True;`

这是我在 VB.net（不是 WPF）中的代码，我想在 WPF C# 中这样做

```
For ist As Integer = 0 To LVNewBill.Items.Count - 1
    LVNewBill.Items(ist).Selected = False
Next

For i As Integer = 0 To LVNewBill.Items.Count - 1
    'If LVNewBill.Items(i).SubItems(0).Text.Contains(str) Then
    If LVNewBill.Items(i).Text.Contains(InsertChange) Then
        LVNewBill.Items(i).Selected = True
        LVNewBill.Items(i).EnsureVisible()

        'If the Record Found it will Update

        With Me.LVNewBill.SelectedItems(0).SubItems
            '.Item(0).Text = txtrefcode.Text
            .Item(1).Text = txtdetails.Text
            .Item(2).Text = txtperiod.Text
            .Item(3).Text = txtduedate.Text
            Dim newtxtamt As Double = txtamt.Text
            .Item(4).Text = newtxtamt.ToString("###,###,##0.#0")
        End With
    Else
        ' add to lvmain
    End If
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:18:20.627

**主要方法：**

```
 private void init()
    {
        listView1.Items.Add(new ListViewItem() { Content = "Hi" });
        listView1.Items.Add(new ListViewItem() { Content = "Hello"});
        listView1.Items.Add(new ListViewItem() { Content = "Buy" });
    }

    private bool find(string str)
    {
        foreach (ListViewItem item in listView1.Items)
        {
            if (item.Content.Equals(str))
            {
                return true;
            }
        }

        return false;
    }

    private void select(string str)
    {
        foreach (ListViewItem item in listView1.Items)
        {
            if (item.Content.Equals(str))
            {
                item.IsSelected = true;
            }
            else
            {
                item.IsSelected = false;
            }
        }
    }

    private void onSelectedClickHandler(object sender, RoutedEventArgs e)
    {
        if (find(searchTextBox.Text))
        {
            select(searchTextBox.Text);
        }
        else
        {
            MessageBox.Show("Not found");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:34:26.230

我会在这里使用 linq 查询。

```
var qry = from t in LVNewBill.Items
          where t.Text.Contains(InsertChange) 
          select t;

foreach(var item in qry)
{
      item.Selected = true;
      item.EnsureVisible();
      item.SubItems[1].Text = txtdetails.Text;
      item.SubItems[2].Text = txtperiod.Text;
      item.SubItems[3].Text = txtduedate.Text;

      //Might want to consider TryParse here
      double newtxtamt  = double.Parse(txtamt.Text); 
      item.SubItems[4].Text = newtxtamt.ToString("###,###,##0.#0");
} 
```

# php - php帮助。与更新混淆

> ID：12540431
> 
> 赞同：7
> 
> 时间：2012-09-22T03:28:17.037
> 
> 标签：php

我有两张表，一张用于学生记录，一张用于学生的兄弟姐妹。

当我想更新表格时，我会将它们回显到 textareas。

我对学生表执行此操作没有任何问题，但对于兄弟姐妹表，如果学生有两个或更多兄弟姐妹，我的更新将失败，因为 textareas 的名称成为最后一行（最后一个兄弟姐妹）。

我该如何处理这种一对多的关系？

这是我的代码：

```
<?php
$database="sy_database"; 
mysql_connect ("localhost", "root", ""); 
@mysql_select_db($database) or die( "Unable to select database"); 
$id=$_GET['up']; 
$sno=$_GET['s_no'];
$order = "SELECT * FROM sy_form WHERE reg_no='$id'";
$result = mysql_query($order); 
$row = mysql_fetch_array($result); 
?>

<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
echo "<form method=post action=ambot.php>";
mysql_select_db("sy_database", $con);
$result = mysql_query("SELECT * FROM sy_form where reg_no='$id'");
echo "<body align=center>";
echo"Student Record";
echo "<table border='1' width=1000px margin=0 padding=0 align=center>
<tr bgcolor=yellow>
<th>Reg No.</th>
<th>Name</th>
<th>Date of Birth</th>
<th>Age</th>
<th>Class</th>
<th>School</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr align=center>";
echo "<td><textarea readonly=readonly rows=1 cols=3 name=reg_no>". $row['reg_no'] ."                    </textarea></td>";
  echo "<td><textarea rows=1 cols=20 name=name>" .$row['name']. "</textarea></td>";
  echo "<td><textarea rows=1 cols=20 name=birth>" . $row['birth'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=3 name=age>" . $row['age'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=3 name=sclass>" . $row['sclass'] . "</textarea>     </td>";
  echo "<td><textarea rows=1 cols=20 name=school>" . $row['school'] . "</textarea></td>";
  echo "</tr>";
  }
echo "</table>";

$result = mysql_query("SELECT * FROM sy_form where reg_no='$id'");
echo "<br><table border='1' width=1250px margin=0 padding=0 align=center>
<tr bgcolor=yellow>
<th>Father's Name</th>
<th>Father's Occupation</th>
<th>Mother's Name</th>
<th>Mother's Occupation</th>
<th>Address</th>
<th>Phone No.</th>
<th>Cellphone No.</th>
<th>Email</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr align=center>";
  echo "<td><textarea rows=1 cols=20 name=fname>" . $row['fname'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=10 name=focc>" . $row['focc'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=20 name=mname>" . $row['mname'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=10 name=mocc>" . $row['mocc'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=25 name=address>" . $row['address'] . "</textarea>        </td>";
  echo "<td><textarea rows=1 cols=8 name=phone>" . $row['phone'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=10 name=cp>" . $row['cp'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=20 name=email>" . $row['email'] . "</textarea></td>";
  echo "</tr>";
  }
echo "</table>";

echo"<br/>Student's Sibling(s)";

$result = mysql_query("SELECT * FROM siblings where reg_no='$id' AND s_no<min($sno)");

echo "<br/><table border='1' margin=0 padding=0 align=center>
<tr bgcolor=yellow>
<th>Reg No.</th>
<th>Sibling No.</th>
<th>Name</th>
<th>Age</th>
<th>School</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr align=center>";
  echo "<td align=right><textarea readonly=readonly rows=1 cols=3 name=reg_no>".     $row['reg_no'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=3>" . $row['s_no'] . "</textarea></td>";
  echo "<td><textarea rows=1 name=sname>" . $row['sname'] . "</textarea></td>";
  echo "<td><textarea rows=1 cols=3 name=sage>" . $row['sage'] . "</textarea></td>";
  echo "<td><textarea rows=1 name=sschool>" . $row['sschool'] . "</textarea></td>";
  echo "</tr>";
  }
echo "</table>";
echo "<input type =submit value =update />";
echo "</form>";
mysql_close($con);
?>

<?php
$database="sy_database"; 
$id=$_POST['id']; 
$ip=$_POST['ip']; 
$mac=$_POST['mac']; 
$location=$_POST['location']; 
$use=$_POST['use']; 
mysql_connect ("localhost", "root", ""); 
@mysql_select_db($database) or die( "Unable to select database"); 
$order = "UPDATE sy_form 
SET name='$name' WHERE reg_no='$reg_no'"; 
$result=mysql_query($order); 

if($result){ 
echo "<p style=margin-top:50px;><BR><BR><BR></p>"; 
echo "<a href='view.php'>Back to Records</a>"; 
} 

else { 
echo "ERROR"; 
echo $name; 
} 
?> 
```

这是我的更新代码：

```
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("sy_database", $con);

$result = mysql_query("UPDATE  sy_form SET name='$name', birth='$birth', age='$age',         sclass='$sclass',  school='$school' , fname='$fname', focc='$focc', mname='$mname',     mocc='$mocc', address='$address', phone='$phone', cp='$cp', email='$email' where reg_no='$reg'");

$result = mysql_query("UPDATE  siblings SET sname='$sname',sage='$sage', sschool='$sschool' where reg_no='$reg'");
echo("record updated.");
mysql_close($con);
?> 
```

这是我插入的 html 代码：

```
<html>
    <head>
        <style type = "text/css">
            body {
            font-family: Arial;
            margin: 0 auto;
            }
            table{
            margin: 0 auto;
            }
            #masterdiv {
            width: 800px;
            margin: 0 auto;
            }
            #header {
            margin: 0 auto;
            width: 796px;
            height: 10;
            background-image: url('header.jpg');
            }
            #fillForm {
            margin: 0 auto;
            width: 800px;
            background-color: #FFFFFF;
            }
            #footer {
            margin: 0 auto;
            width: 798px;
            height: 75px;
            background-image: url('footer.jpg');
            }
        </style>
    <title>Registration Form</title>
    </head>

    <body bgcolor="black">

        <div id = "masterdiv">
            <div id = "header"></div>
            <div id = "fillForm">
            <p align="right" style="color:red;font-size:60px;"/> Registration Form</p>
                <table cellspacing="0" cellpadding="0" border="0">

                <form action = "cc.php" method ="post">
                        <tr bgcolor="red">
                        <td colspan="3">&nbsp;</td>

                        <td><b>Registration No:</b></td>
                        <td><input type = "text" name = "reg_no"></td>
                        </tr>
                    <tr><td>&nbsp;</td></tr>
                    <tr>
                        <td>Name: </td>
                        <td><input type = "text" size = "40" name = "name"></td>
                        <td>&nbsp;</td>
                        <td>Date of Birth: </td>
                        <td><input type = "text" name = "birth"></td>
                    </tr>
                    <tr>
                        <td>Age: </td>
                        <td><input type = "text" size = "20" name = "age"></td>
                        <td>&nbsp;</td>
                        <td>Class as at January: </td>
                        <td><input type = "text" name = "sclass"></td>
                    </tr>
                    <tr>
                        <td>School: </td>
                        <td colspan = "4"><input type = "text" size = "80" name = "school"></td>
                    </tr>
                    <tr>
                        <td>Father's Name: </td>
                        <td colspan = "4"><input type = "text" size = "80" name = "fname"></td>
                    </tr>
                    <tr>
                        <td>Father's Occupation: </td>
                        <td colspan = "4"><input type = "text" size = "80" name = "focc"></td>
                    </tr>
                    <tr>
                        <td>Mother's Name: </td>
                        <td colspan = "4"><input type = "text" size = "80" name = "mname"></td>
                    </tr>
                    <tr>
                        <td>Mother's Occupation: </td>
                        <td colspan = "4"><input type = "text" size = "80" name = "mocc"></td>
                    </tr>
                    <tr><td>&nbsp;</td></tr>
                    <tr><td>&nbsp;</td></tr>
                    <tr>
                        <td colspan = "5">Siblings (if any)</td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>Name</td>
                        <td>Age</td>
                        <td>&nbsp;</td>
                        <td>School</td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>1\. <input type = "text" size = "50" name = "sname"></td>
                        <td><input type = "text" size = "25" name = "sage"></td>
                        <td><input type = "text" size = "30" name = "sschool"></td>
                    </tr>
                    <tr>
                        <td>2\. <input type = "text" size = "50" name = "sname2"></td>
                        <td><input type = "text" size = "25" name = "sage2"></td>
                        <td><input type = "text" size = "30" name = "sschool2"></td>
                    </tr>
                    <tr>
                        <td>3\. <input type = "text" size = "50" name = "sname3"></td>
                        <td><input type = "text" size = "25" name = "sage3"></td>
                        <td><input type = "text" size = "30" name = "sschool3"></td>
                    </tr>
                    <tr align = "right">
                        <td colspan = "3">Address: <input type = "text" size = "80" name = "address"></td>
                    </tr>
                    <tr align = "right">
                        <td colspan = "3">Phone Number: <input type = "text" size = "80" name = "phone"></td>
                    </tr>
                    <tr align = "right">
                        <td colspan = "3">Cellphone Number (Mother/Father)<input type = "text" size = "80" name = "cp"></td>
                    </tr>
                    <tr align = "right">
                        <td colspan = "3">Email: <input type = "text" size = "80" name = "email"></td>
                    </tr>
                    <tr><td>&nbsp;</td></tr>
                    <tr align = "center">
                        <td colspan = "3">
                        <input type = "submit" value = "Submit" name = "Submit">

                        </form>

                        <form action="view.php" method="post" target="_blank">  
                        <input type = "submit" value = "View/Update/Delete" name = "View" >
                        </form>

                        </td>
                    </tr>
                    <tr><td>&nbsp;</td></tr>
                </table>

            </div>
            <div id = "footer"></div>
        </div>
    </body>
</html> 
```

这是 INSERT 的 PHP 代码：

```
<?php   

    //student record details
    $name = $_POST['name'];
    $birth = $_POST['birth'];
    $age = $_POST['age'];
    $sclass = $_POST['sclass'];
    $school = $_POST['school'];
    $fname = $_POST['fname'];
    $focc = $_POST['focc'];
    $mname = $_POST['mname'];
    $mocc = $_POST['mocc'];
    $address = $_POST['address'];
    $phone = $_POST['phone'];
    $cp = $_POST['cp'];
    $email = $_POST['email'];
    $reg = $_POST['reg_no'];

    //siblings record
    $sname = $_POST['sname'];
    $sage = $_POST['sage'];
    $sschool = $_POST['sschool'];

    $sname2 = $_POST['sname2'];
    $sage2 = $_POST['sage2'];
    $sschool2 = $_POST['sschool2'];

    $sname3 = $_POST['sname3'];
    $sage3 = $_POST['sage3'];
    $sschool3 = $_POST['sschool3'];

    // connect to mysql
    $conn = mysql_connect("localhost", "root", "")
            or die("ERR: Connection");

    // connect to database        
    $db = mysql_select_db("sy_database", $conn)
          or die("ERR: Database");

    // create mysql query
    // Insert a row of information into the table "sy_form"
    $sql = "INSERT INTO sy_form (reg_no, name, birth, age, sclass, school, fname, focc, mname, mocc, address, phone, cp, email)
    VALUES('".$reg."', '".$name."', '".$birth."', '".$age."', '".$sclass."', '".$school."', '".$fname."', '".$focc."', '".$mname."', '".$mocc."','".$address."','".$phone."','".$cp."','".$email."')";  
        if (!mysql_query($sql,$conn))
          {
          die('Error: ' . mysql_error());
          }

echo "1 record added";
    // execute query
    $exec = mysql_query($sql, $conn); 

    // Insert a row of information into the table "sy_form" (1st sibling)
    $sql_1 = "INSERT INTO siblings (reg_no,s_no, sname, sage, sschool)
    VALUES('".$reg."','', '".$sname."', '".$sage."', '".$sschool."')";   
        if($sname==null)
        return 0;

        else
        $exec = mysql_query($sql_1, $conn);      

    // Insert a row of information into the table "sy_form" (2nd sibling)
      $sql_2 = "INSERT INTO siblings (reg_no,s_no, sname, sage, sschool)
    VALUES('".$reg."','', '".$sname2."', '".$sage2."', '".$sschool2."')";
        if($sname2==null)
        return 0;

        else
        $exec = mysql_query($sql_2, $conn);
    // Insert a row of information into the table "sy_form" (3rd sibling)       
    $sql_3 = "INSERT INTO siblings (reg_no,s_no, sname, sage, sschool)
    VALUES('".$reg."','', '".$sname3."', '".$sage3."', '".$sschool3."')";
        if($sname3==null)
        return 0;

        else
        $exec = mysql_query($sql_3, $conn);

        echo ("The following data has been added to sy_database");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:39:38.083

您可以将 [] 添加到字段名称的末尾以将其作为数组发布。您没有发布任何更新代码，所以这里有一个简单的通用示例：

HTML：

```
<input type="text" name="sibling[unique_id][reg_no]" />
<input type="text" name="sibling[unique_id][name]" />
<input type="text" name="sibling[unique_id][birth]" />
... and so on 
```

PHP：

```
// connect to your database as normal
// do your student update as normal

// now we're looping through siblings
foreach($_POST['sibling'] AS $sibling){
    $reg_no = $sibling['reg_no'];
    $name = $sibling['name'];
    $birth = $sibling['birth'];
    ... and so on to set all your variables

    // and now you can run your update query
} 
```

如果兄弟姐妹有自己的唯一 ID，您可以在括号中指定，`name="sibling[unique_id]"`然后在 php 中您将拥有`$_POST['sibling']['unique_id']`

# css - 自定义 CSS 菜单，“活动”选项卡保留在“主页”而不是实际页面

> ID：12540432
> 
> 赞同：3
> 
> 时间：2012-09-22T03:28:21.920
> 
> 标签：css, menu

我创建了这个自定义 css 菜单，但是在切换选项卡时，“活动”选项卡设计保留在菜单上的“主页”链接上，而不是我所在的实际页面。知道我如何解决这个问题吗？

**HTML：**

```
<ul class="menu">
    <li><a href="http://caribbeantl.com/"; class="active"><span>Home</span></a></li>
    <li><a href="http://caribbeantl.com/hotels/"><span>Testing post</span></a></li>
</ul> 
```

**CSS：**

```
.menu {margin:0 auto; padding:0; height:30px; width:100%; display:block; background:url('http://media.datahc.com/Affiliates/43817/Brands/Image/topmenuimages.png') repeat-x;}
.menu li {padding:0; margin:0; list-style:none; display:inline;}
.menu li a {float:left; padding-left:15px; display:block; color:rgb(255,255,255); text-decoration:none; font:12px Verdana, Arial, Helvetica, sans-serif; cursor:pointer; background:url('http://media.datahc.com/Affiliates/43817/Brands/Image/topmenuimages.png') 0px -30px no-repeat;}
.menu li a span {line-height:30px; float:left; display:block; padding-right:15px; background:url('http://media.datahc.com/Affiliates/43817/Brands/Image/topmenuimages.png') 100% -30px no-repeat;}
.menu li a:hover {background-position:0px -60px; color:rgb(255,255,255);}
.menu li a:hover span {background-position:100% -60px;}
.menu li a.active,
.menu li a.active:hover {line-height:30px; font:12px Verdana, Arial, Helvetica, sans-serif; background:url('http://media.datahc.com/Affiliates/43817/Brands/Image/topmenuimages.png') 0px -90px no-repeat; color:rgb(255,255,255);}
.menu li a.active span,
.menu li a.active:hover span {background:url('http://media.datahc.com/Affiliates/43817/Brands/Image/topmenuimages.png') 100% -90px no-repeat;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T10:42:14.783

HTML：

```
<div class="menu">
<ul>
  <li><a class="menuLink active" href="#">Home</a></li>
  <li> <a class="menuLink" href="#">Page1</a></li>
  <li><a class="menuLink" href="#">Page2</a></li>
  <li><a class="menuLink" href="#">Page3</a></li>
</ul>
</div> 
```

CSS：

```
.menu
{
height:64px;
width:100%;
background-repeat:repeat-x;
text-align:center;
 }

.menuLink, .menuLink:visited
{
 color:#00000;
background-image:url(img/btk.png);
text-decoration:none;
font-size: 20px;
width:70px;
height: 50px;
padding: 10px;
display:block;
margin-left: 10px;
margin-right: 10px;
margin-top: 6px;
}
.menuLink:hover
{
color:#CC7011;
background-color:aqua;
font-size: 26px;
}
.active{
background-color:aqua;
}
ul,li{
display:inline-block;
list-style:none;
line-height:60px;
vertical-align:bottom;
} 
```

​ jQuery：

```
$('.menuLink').click(function(){
  $('a').removeClass('active');
  $(this).addClass('active');
});​ 
```

现场演示 [http://jsfiddle.net/PYW35/](http://jsfiddle.net/PYW35/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:29:39.773

首先你有一个多余的分号在第一个`<li>`

您需要将 移动`class="active"`到`<li>`您想要激活的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T05:57:12.473

我觉得你需要一些 JavaScript 来完成它，

[这是简单的演示。](http://jsfiddle.net/H9HHq/)

希望这可以帮助

**注意：`getElementsByClassName()`部分浏览器不支持**

看看下面的[比较表](http://www.quirksmode.org/dom/w3c_core.html#fivemethods)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T03:33:26.010

我不知道它的确切答案，但是，我会说找到一些可以获取 url 的东西，如果它与栏中的链接匹配，那么这将使类处于活动状态，否则，没有一个是活动的。

# multithreading - 真的需要一个 CPU 内核的多线程计数锁吗？

> ID：12540433
> 
> 赞同：0
> 
> 时间：2012-09-22T03:28:28.047
> 
> 标签：multithreading, operating-system, thread-safety, locking, multiprocessing

如果我有一些代码看起来像这样（请忽略语法，我想在没有指定语言的情况下理解它）：

```
count = 0

def countDown():
  count += 1

if __name__ == '__main__':
    thread1(countDown)
    thread2(countDown)
    thread3(countDown) 
```

在这里我有一个**只有一个核心**的 CPU ，我真的需要锁定变量**计数**，以防它可能被其他线程覆盖。

不知道，但是如果语言很关心，请在**Java、C和Python**下解释一下，非常感谢。

* * *

谢谢大家，我现在明白我确实需要一把锁。但这里还有一个问题，我什么时候需要使用多线程？

由于CPU只会执行一个instructor，看起来多线程管理线程切换会花费更多时间，并不能节省计算时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T03:35:02.087

从技术上讲，一般来说是的。也许不是在这个特定的例子中。但是想象一下你的原子函数将包含几个指令。操作系统可以并且确实*一次*执行多个线程。它执行一个步骤中的一些步骤，然后切换回选择继续哪个进程/线程的操作系统。它可以启动所有线程并在它们之间切换。即使在一个 CPU 上。然后所有线程将在相同的内存地址上运行并共享变量。

编辑：回答第二个问题。当你有一个核心时，我可以想象只有一种情况需要多线程。这是您的一个线程可以锁定并且您需要在此期间对其进行监视或执行其他操作的时候。一个实际的例子是服务器。如果您想同时为多个客户端提供服务，则需要在它们之间切换。如果您在队列中为他们提供服务，那么一个坏客户可能会挂起整个过程。

如果你在做计算，你可以用它来分割 I/O 和计算。但它必须是一个非常极端的情况才能有用或需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T03:57:22.390

是的，你可能还需要一把锁。你的`countDown`代码可能编译成这样的：

```
load global variable "count" into register x
x = x + 1
save register x into global variable "count" 
```

如果中间有线程切换，那你就有麻烦了。您实际上不需要第二个核心来获得不良行为。

有时`countDown`可能会编译为原子指令。例如， 上有这样的说明`x86`，但我无法保证编译器会使用它们（除了自己编写程序集）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T04:08:38.610

对于简单的事情，比如增加一个计数器，而不是使用锁，在 c 中你可以找到以线程安全方式执行操作的原子函数。GCC 定义了这些原子内置函数，它们通常包含在公共函数调用中，每个特定环境都是 [http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Atomic-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Atomic-Builtins.html)

Mac OS X 定义了这些，例如[https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)

它们有可能比锁更有效，因为它们在功能上比锁更受限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T03:43:46.847

对于最简单的示例，我们创建多个线程共享一个变量并对其执行单个原子指令。无论任何线程在哪里被中断，它的状态要么完全在共享资源指令之前，要么完全在之后。

在这种情况下，x86 增量是原子的，因此是线程安全的。您不需要锁来保持一致性或幂等性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T06:51:35.347

什么时候需要多线程？

对我来说，有两个不同的应用程序：

*   当多个线程（理想情况下每个内核只有一个线程）长时间处理整个问题的一小部分时，并行处理。所需的代码和数据很小，而且 - 在最好的情况下 - 将适合核心的 L1 和 L2 缓存。这里的瓶颈——如果性能很重要——将是内存带宽以及如何尽可能少地使用它。
*   另一种是当程序的不同组件或多或少地相互独立运行并且处理要求随时间变化时。一个示例可能是一个邮件 (SMTP) 服务器，它至少具有三个独立的组件：一个 SMTP 服务器，用于接收来自 SMTP 客户端的邮件，一个 SMTP 客户端，用于将邮件发送到其他 SMTP 服务器，以及一个名称客户端，用于查找真实地址SMTP 客户端应该发送邮件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T09:04:33.763

其他海报已经很好地解释了锁定问题。

另一个问题也相当简单——大多数应用程序都是多线程的，以通过多个可能阻塞的 I/O 流来提高 I/O 性能。我现在正在打字。浏览器必须响应鼠标和键盘上的网络活动和用户输入。通常，它必须“同时”做这两件事。用户输入和网络通信分别非常慢和慢 - 两者都阻塞。因此，GUI 和网络通信在不同的线程上运行。即使只有一个 CPU 内核也需要发生这种情况，并且不这样做会导致旧的“Windows 3.1”风格的“沙漏应用程序”，其中 GUI 通常无响应。请注意，这个需要多个线程的问题也适用于异步 I/O——它看起来像是在一个线程上运行，但受到内核线程/池的支持——大多数阻塞被移入内核。

单核盒子就是这样。您不能使用多个线程来加速 CPU 密集型计算（事实上，您会意识到，您会减慢它们的速度），但您可以将它们用于高性能 I/O。当我们都拥有单核 Pentium 和 Windows 95 时，许多应用程序都是多线程的——以优化 I/O，而不是加快计算速度。

# python - 导入错误：使用 easy_install 后没有名为 pytz 的模块

> ID：12540435
> 
> 赞同：6
> 
> 时间：2012-09-22T03:28:57.537
> 
> 标签：python, python-2.7

今天是我在 Python 的第一天，并且遇到了一些问题。我正在研究的是，“编写一个短程序，从操作系统中提取当前日期和时间，并以以下格式在屏幕上打印：日、月、年、格林威治标准时间的当前时间。证明它有效。 "

我打算使用pytz，所以使用`easy_install pytz` 了这将它安装在我的站点包中（pytz-2012d-py2.7.egg）

这是我能够导入模块的正确目录吗？

在我的 python shell 中，我使用 from pytz import timezone 我得到， `"ImportError: No module named pytz"`

有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T03:38:33.973

`time`模块也可以在这里提供帮助.. UTC 是协调世界时（以前称为格林威治标准时间，或 GMT）

```
In [18]: import time

In [19]: time.gmtime()
Out[19]: time.struct_time(tm_year=2012, tm_mon=9, tm_mday=22, tm_hour=3, tm_min=37, tm_sec=15, tm_wday=5, tm_yday=266, tm_isdst=0)

In [20]: x = time.gmtime()

In [21]: x.tm_year
Out[21]: 2012

In [22]: x.tm_mon
Out[22]: 9

In [23]: x.tm_mday
Out[23]: 22

In [24]: x.tm_hour
Out[24]: 3 
```

您还可以在安装 pytz 时使用以下日志检查日志...

```
C:\>easy_install pytz
Searching for pytz
Reading http://pypi.python.org/simple/pytz/
Reading http://pytz.sourceforge.net
Reading http://sourceforge.net/project/showfiles.php?group_id=79122
Reading http://www.stuartbishop.net/Software/pytz
Reading http://sourceforge.net/projects/pytz/
Best match: pytz 2012d
Downloading http://pypi.python.org/packages/2.7/p/pytz/pytz-2012d-py2.7.egg#md5=
e6f9219ae6eff242f13c6700413df69e
Processing pytz-2012d-py2.7.egg
Moving pytz-2012d-py2.7.egg to c:\python27\lib\site-packages
Adding pytz 2012d to easy-install.pth file

Installed c:\python27\lib\site-packages\pytz-2012d-py2.7.egg
Processing dependencies for pytz
Finished processing dependencies for pytz

C:\>python
Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import pytz
>>> from datetime import datetime, timedelta
>>> utc = pytz.utc
>>> utc.zone
'UTC' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T00:51:05.460

对于它的价值，这里基本问题的答案是 pytz 安装过程实际上并没有提取“.egg”文件（至少，这是我注意到的一个非常相似的问题。）

您可以考虑进入 site-packages 文件夹并自行解压。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-10T09:42:30.380

如果您使用的是 python v2 或 python v3，这一点很重要——它有单独的 easy_install 包！在 debian 中有： python-pip python3-pip

然后是easy_install easy_install3

如果您使用错误版本的 easy_install，您将更新错误的库。

# css - 父 div 的高度为零，即使它有有限高度的孩子

> ID：12540436
> 
> 赞同：66
> 
> 时间：2012-09-22T03:29:10.503
> 
> 标签：css, height, parent-child

我有一个网站，其布局已在图表中显示。主体由 a 组成，`main container`其中由和组成。进一步包含几个如图所示。`header``parent div``footer``parent div``child div`

![网页布局](../Images/93aed6280b88db34e74fcda456573d9b.png)

所有高度的问题`child div`是有限的。但是`parent div`除了子div之外什么都不包含。所有子 div 都是可见的，但父 div 的高度显示为零。我也没有通过给出一些预先指定的值来固定父 div 的高度，因为如果将来孩子的数量增加，它可能会导致错误。

由于父 div 大小为零的问题是我的页脚 div 正在上升并与父 div 的内容发生冲突。这可以通过提供合适的 margin-top 来解决，但这不是我正在寻找的解决方案。

任何人都可以建议我以某种方式使父 div 的高度根据子 div 的高度自动变化。

如果我不清楚我的疑问，请发表评论！

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-09-22T04:04:52.920

好像你有一个[clearfix 类](http://www.webtoolkit.info/css-clearfix.html)的案例。

所以我猜你正在浮动子 div，这就是为什么父 div 的高度为 0。当你使用浮动时，父级不适应子级的高度。

您可以将“clearfix”类应用于浮动元素的父级（当然您需要在样式表中包含它），它会添加一个不可见的“。” 在末尾。然后，您的父母将拥有正确的身高。

请注意，它是跨平台的，兼容 IE6+、Chrome、Safari、Firefox，应有尽有！

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
} 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-09-22T04:01:16.120

尝试将以下内容添加到您的样式表中：

```
#parentdiv:after { 
    content: " "; 
    display: block;
    clear: both;
} 
```

正如代达罗斯在他的评论中所建议的那样，您可能正在浮动子 div。如果是这样，上面的行修复它。

浮动事物时的问题是它们的父元素“忽略”它们。

上面的行创建了一个（伪）元素并将其插入到 #parentdiv 中，该元素被向下推到所有浮动 div 之外。然后父 div，虽然忽略了浮动的子元素，但并没有忽略这个伪元素——按照它应该的行为，它扩展为包含伪元素。现在，由于伪元素位于所有浮动子元素的下方，因此父 div 发生了，或者更好的是，它似乎也“包含”了浮动子元素 - 这正是您想要的。

# magento - 从 Magento 中的可配置产品中删除属性

> ID：12540437
> 
> 赞同：1
> 
> 时间：2012-09-22T03:29:26.283
> 
> 标签：magento, configuration, attributes, admin, product

是否有任何方法可以从可配置产品中删除一个属性，一旦它已经被创建？我试图从属性集中删除一个属性，但如果它已经被分配给一个产品，Magento 将不允许你这样做。我见过的从产品中删除属性的唯一方法是直接在数据库中（**catalog_product_super_attribute**表）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-26T18:28:17.917

您可以使用此模型获取**catalog_product_super_attribute**属性的集合并继续删除记录。

`Mage::getResourceModel('catalog/product_type_configurable_attribute_collection')`

请注意，在 Mage_Catalog_Model_Product_Type_Configurable_Attribute 上有一个 _afterSave 方法会尝试将标签保存到另一个表上，这会在删除时导致异常。

# matlab - 如何在 MATLAB 条形图中增加条形宽度而不重叠？

> ID：12540438
> 
> 赞同：1
> 
> 时间：2012-09-22T03:30:01.763
> 
> 标签：matlab, graph, bar-chart, overlapping

如何在 MATLAB 中增加条形图中条形的宽度而不导致条形重叠？下面的脚本增加了条形宽度，但条形重叠：

```
graph = [ 1 2 ; 3 4 ; 5 6 ; 7 8 ];
bar(graph,'BarWidth',2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T09:04:14.047

我知道这样做的唯一方法是通过多次调用 bar。

```
function h=BarSpecial(data, overallWidth )
    colour = {'r','b'};
    [r,c] = size(data);
    h = zeros(c,1);
    width = overallWidth / c;
    offset = [-width/2 width/2];
    for i=1:c
        h(i) = bar(data(:,i),'FaceColor',colour{i},'BarWidth',width);   
        set(h(i),'XData',get(h(i),'XData')+offset(i));
        hold on               
    end    
end 
```

下面将生成一个条形图，其中条形占据总空间的 90%。

```
BarSpecial(graph,0.9) 
```

编写的函数 BarSpecial 不是通用的，但可以扩展以处理更广泛的输入数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:34:20.263

默认宽度为 = 0.8。
如果宽度为 1，则组中的条相互接触。
值 > 1 会产生重叠条。

设置宽度小于 1。例如

```
figure; bar(graph,0.4); 
```

# ruby-on-rails - Rails - 在迁移期间转换数据

> ID：12540441
> 
> 赞同：0
> 
> 时间：2012-09-22T03:30:17.487
> 
> 标签：ruby-on-rails, rails-migrations

我将模型中的一些数据拆分为一个新数据并在它们之间创建关联。

我添加了`new_model_id`to `OldModel`，`NewModel`使用`address`作为字符串属性创建，并进行了以下迁移：

```
class RemoveAddressFromOldModel < ActiveRecord::Migration
  def up
    OldModel.where("address IS NOT NULL AND address != ''").each do |i|
      j = NewModel.create(address: i.address)
      i.new_model_id = j.id
      i.save
    end
    remove_column :old_models, :address
  end

  def down
    add_column :old_models, :address, :string
  end
end 
```

虽然`NewModel.create`工作正常并获得正确的数据，但`i.save`似乎没有工作，因为`old_models.new_model_id`没有被填充。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:54:13.683

这听起来像是验证失败，尽管它也可能是阻止保存的[before_* 回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html#label-before_validation%2A+returning+statements)。如果没有 OldModel 代码，我无法进一步推测。

`save`当您预计它会失败并计划检查返回值时调用；当您期望它成功时调用`save!`它需要一个异常。我会`save!`在这里使用，因为如果保存失败，我希望迁移失败。

另外：您的迁移将数据从 OldModel 复制到 NewModel 中`up`，但不会以其他方式复制`down`. 在这种配置中，`rake db:migrate:redo`会成功但会默默地丢弃信息。如果此信息对您很重要，我建议 a) 通过将数据复制回来进行双向迁移或 b) 删除`down`以便 Rails 知道它无法撤消。

# sql - 如何从 vb.net 中的连接字符串中删除安全设置

> ID：12540442
> 
> 赞同：0
> 
> 时间：2012-09-22T03:30:18.860
> 
> 标签：sql, vb.net

嗨，我正在尝试将数据添加到由某人创建的数据库中，但是当我尝试插入或删除或更新时，异常正在引发，整个项目无法正常工作，我面临的错误是

*“在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问该服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者： SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）”*

所以现在我应该怎么做才能解决这个错误，我的连接字符串写成

```
Dim CON As New SqlConnection("Integrated Security=SSPI;
    Persist Security Info=False;Initial Catalog=DIGITALGAMES;
                                       Data Source=TEJUS-PC\SQLEXPRESS") 
```

我的连接字符串有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:39:43.597

```
Dim CON As New SqlConnection("Integrated Security=SSPI;
    Initial Catalog=DIGITALGAMES;Data Source=TEJUS-PC\SQLEXPRESS; User ID=yourusername; Password=yourpassword") 
```

并
尝试此[链接](http://www.connectionstrings.com/sql-server-2005) ，其中包含有关连接字符串的有用信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:14:43.467

我认为您尝试访问的服务器不在网络中，或者您没有对该服务器的 Windows 身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T03:36:27.883

此错误通常发生在数据库路径错误即系统启用定位数据库时

PLZ做适当的修改

数据源=TEJUS-PC\SQLEXPRESS

# git - 如何将一个大的 Git 分支拆分为许多较小的分支？

> ID：12540446
> 
> 赞同：36
> 
> 时间：2012-09-22T03:31:08.440
> 
> 标签：git, branch, cherry-pick

我已经从 SVN 导入到 Git，现在我有一个大分支，像这样：

*   处理特征 C
*   处理功能 B
*   处理特征 C
*   处理特征 C
*   处理功能 B
*   处理特征 A

我想要单独的功能分支，用于 A、B、C。我正在挑选新分支的提交，但这不会将它们从原始分支中删除，所以我必须手动跟踪我已经拉出的那些。

大约有 800 个提交需要拆分，可能还有 50 个功能/错误修复。

如果能以某种方式在 git 日志中反映我已拉出的那些，那就太好了，这样我就知道我已经完成了哪些。这可能吗？

我可以 rebase 整个分支，跳过我已经退出的提交，但我担心这会导致很多冲突。我不想每次拉出提交时都解决 500 个冲突。

从一个 uber 分支提取提交到较小的功能分支的最佳方法是什么，同时跟踪您的进度？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-22T08:20:13.897

在这种情况下，我所做的是使用**交互式 rebase**。

在你的`HEAD`，创建你的分支`A`，`B`和`C`。还要创建一个“备份”分支（你可以命名它`backup`），以防万一出现问题并且你需要原来的`HEAD`备份。

```
git branch feature-a
git branch feature-b
git branch feature-c
git-branch backup-before-rebase 
```

然后，在您希望他们开始的提交处创建一个分支，也许在一个方便的稳定提交处。叫它`new_trunk`什么的。

```
git checkout HEAD~50       ## this will be the new tree-trunk
git branch new_trunk 
```

然后，执行 interactive`rebase`并选择要保留在该分支中的提交。用这种方式，基本上就像`cherry-pick`是批量ing。

```
git checkout feature-a
git rebase -i new_trunk    ## -i is for "Interactive" 
```

完成后，您应该有 3 个具有不同历史的分支，如果您仍然需要它，则应该有`new_trunk`一个`backup`反映旧历史的分支。`HEAD`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-22T09:06:51.033

就我个人而言，我真的会考虑如此大的变化的利弊（如果你已经这样做了，再一次考虑）。如果您遇到冲突（这在大型 rebase/cherry-pick 中很烦人且本身难以解决），您在将功能合并回“主”分支时可能会遇到困难。

冻结你的大分支，让它“完成”（或“足够好”）并在其上创建新的功能分支不是更好/更容易吗？（或者只排除一些分支？）

但是对于你的问题：

如果您想自动跟踪更改/丢失的提交，请使用 git cherry 命令。

```
git cherry featureBranch bigBranch 
```

如果在挑选或重新设置功能分支时没有冲突，您可以使用以前的代码和一些额外的管道：

```
git cherry featureBranch bigBranch | awk '{ print "pick " $2 }' | tee remaining 
```

这将打印（并保存到名为“remaining”的文件）featureBranch 中缺少的提交。您可以将此添加到 bigBranch 上的交互式 rebase 以丢弃您不再需要的提交。（也许您可以使用“ed”编辑器作为 git 编辑器编写更多脚本，并将命令传递给交互式变基的标准输入，但我没有尝试过。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-23T21:01:04.573

只是为了进一步简化[威勒的回答](https://stackoverflow.com/a/12542096/1494833)，

制作功能分支和备份，以防万一

```
git branch feature-a
git branch feature-b
git branch feature-c
git branch backup-before-rebase 
```

然后签出一个功能分支并从您希望他们开始的提交中进行交互式变基

```
git checkout feature-a
git rebase -i <safecommit>
enter code here 
```

如果您希望某些功能分支共享一些提交以保持树清洁，请不要在开始时创建稍后的功能分支，但是一旦您获得了重新定位的功能分支，然后使用共享提交引用作为您的下一个*安全提交*

```
#on branch feature-a
git checkout -b feature-d
git rebase -i <sharedcommit> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-17T13:13:11.910

**老实说，除非您有大量需要拆分的提交并且它们是非常独立的功能，否则我不会这样做，即不会更改要解决冲突的同一行。**

正如其他人所建议的那样，为每个功能创建一个新分支并用于`git rebase --interactive`包含所需的提交。

为确保不会误入歧途，请通过以下方式创建`git-rebase-todo`文件的内容

*   编辑所有所需提交的列表并按功能对其进行分类
*   将提交列表分成单独的文件

您可以使用类似的命令创建提交列表

```
git log --oneline --reverse  44e19^... > log.txt 
```

显示提交 44e19 以后。这会给你一个像这样的文件

```
44e1936 dSRGratuities (SummaryRecord)
67fedda Receipt Report HEADER: 20! multiply by Paym_FieldCount
69d70e2 Receipt Report: Payment
.... 
```

编辑时（添加分类：特征 a、b、c 等）可能看起来像我的`sorted.txt`

```
c 44e1936 dSRGratuities (SummaryRecord)
a 67fedda Receipt Report HEADER: 20! multiply by Paym_FieldCount
b 69d70e2 Receipt Report: Payment
c abea7db Receipt Report: Cashback
a cf96185 Receipt Report: Gratuity
c 70e987a Receipt Report: use amount tendered for printing
a 7722ac8 Receipt Report: use amount tendered for calculations
c 47f1754 Receipt Report: store amount tendered
b b69a73f Receipt Report: Use enum Paym_FieldCount
a 9a0b471 Receipt Report HEADER: enum PaymentEntries (with Paym_FieldCount)
c ad67e79 Use SharpReport enum
b 3c510c6 enum SharpReport
a e470e07 m_Gratuities m_dSSGratuities (SalesSummary)
b 4e0c3e4 m_Gratuities m_szGratuities (SalesSummaryRecord)
b bd054f7 _gx_fn_Cashback 
```

然后使用您最喜欢的脚本语言编写脚本，将排序列表转换为`git-rebase-todo`文件集合。您的脚本可能类似于我刚刚编写的脚本。

```
foreachline text sorted.txt {
    set fields  [split $text { }]
    set branch  [lindex $fields 0]
    set commit  [lindex $fields 1]
    set comment [string range $text 10 end]
    set command "echo pick $commit $comment"
    exec cmd /S /C $command >> $branch.txt
} 
```

该脚本逐行读取提交排序文件，并用空格字符 { } 拆分以获取两个字段`branch`和`commit`，并获取一个子字符串（从 10 个字符开始）来描述提交。描述不是必需的，但它对我们人类检查错误很有用。

然后它将一行放入适当的`git-rebase-todo`文件中，为每个功能创建一个文件。我通过执行一个非常丑陋的 Windows`echo string >> file`命令破解了这个问题。

这会创建许多文件，例如我的文件`a.txt`

```
pick 67fedda Receipt Report HEADER: 20! multiply by Paym_FieldCount
pick cf96185 Receipt Report: Gratuity
pick 7722ac8 Receipt Report: use amount tendered for calculations
pick 9a0b471 Receipt Report HEADER: enum PaymentEntries (with Paym_FieldCount)
pick e470e07 m_Gratuities m_dSSGratuities (SalesSummary) 
```

整件事都很丑陋。除非您必须这样做并且擅长编写脚本，否则我不推荐它。

* * *

我前段时间写了上面的文字，我对事情进行了一些反思。上面我暗示这是很多工作，不值得做，但从那以后我看到有人做了上面的事情，而且非常值得。

我记得 Visual Studio for MFC/C++ 的版本，每个新版本都会有编译器更改、IDE 更改、MFC 改进，并在更高版本的 Windows 上运行。这意味着如果您想让您的编译器远离 VS6 和 Windows XP，您可能必须进行语言更改以满足编译器的要求，并更改函数调用以满足 MFC 等。

现在假设微软在开发 Visual Studio 时每周进行一次备份，有人有条不紊地进行旧备份并将代码更改提交到 Git 等版本控制系统中。然后他们开始对变化进行分类......

*   一个。= 编译器更改

*   湾。= 库更改

*   C。= IDE 更改

*   d。= 安全改进

    等等

微软可以为每一个创建分支，并开始拥有最新最好的 IDE（包括在内），在最新的 Windows 上运行，并且仍然能够使用它们编写的语言（否）和库（否）`c`编译旧的遗留程序.`a``b`

以前锁定在遗留软件中的开发人员可以以逻辑和增量的方式进行改进，例如相互独立的语言更改和库更改，并在最新和最好的 Visual Studio 上进行，而无需通过所有中间版本。

例子

```
 <LanguageStandard>stdcpp14</LanguageStandard> 
```

现在我并不是说这就是发生的事情，但在我看来，Visual Studio 的最新版本在允许更新遗留程序方面要好得多，而不是丢弃和（从不？）重写，在我看来是由于版本控制和将旧软件更改组织到逻辑分支：编译器版本、DLL/库版本。

因此，我可以看到将大量旧提交拆分为不同分支的情况可能是值得的。

在 Visual Studio 2019 上，我可以添加该行

```
<PlatformToolset>v141_xp</PlatformToolset> 
```

到一个配置文件，并设法编译和运行一个旧的 Windows 程序，该程序无法编译和链接到 VS 2015 和 VS 2017。看起来很像微软的某个人在一些旧软件上重新定位了性能和安全性改进，同时省略了`breaking changes`这通常伴随着现代化而来。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-04T12:09:56.220

我刚刚发现的另一种方法是使用“git notes”。

[http://alblue.bandlem.com/2011/11/git-tip-of-week-git-notes.html](http://alblue.bandlem.com/2011/11/git-tip-of-week-git-notes.html)

此功能允许在不实际更改分支/需要变基的情况下向现有提交添加注释。跟踪哪些提交已被拉出的一种方法是为每个提交添加一个 git 注释：

`Cherry-picked to features\xyz 925a5239d4fbcf7ad7cd656020793f83275ef45b`

这可以在很大程度上帮助手动过程 - 您可以编写一个小脚本来挑选特定分支的提交，然后将相关的 git 注释添加回原始提交。

或者，如果你想变得非常时髦，你可以通过以下方式自动化整个过程：

1.  为每个提交添加一个 git 注释，说明您希望将其挑选到哪个功能分支：`TOCHERRYPICK: features\xyz`
2.  编写一个脚本来扫描所有 git 注释，并自动创建所有功能分支并挑选正确的选定提交。然后它可以更改 git note 以`CHERRYPICKED: features\xxx at 925a5239d4fbcf7ad7cd656020793f83275ef45b`允许稍后重新运行该工具以挑选更多提交。
3.  如果您真的很想在提交被选中时让它突出，您还可以自动创建具有相似名称的标签：`CHERRYPICKED:<branch>:SHA`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-17T05:28:40.227

// 在开发分支上

```
git diff develop your/branch > diff.patch
git apply diff.patch 
```

# linux - 在 Linux 上带有 UDP 套接字的 SO_REUSEADDR。有必要吗？

> ID：12540449
> 
> 赞同：4
> 
> 时间：2012-09-22T03:31:59.427
> 
> 标签：linux, udp, time-wait, setsockopt

我的 UDP 套接字`bind()`连接到端口 53 (DNS)。UDP 是否有`TIME_WAIT`状态或`SO_REUSEADDR`在 UDP 套接字上使用毫无意义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T03:44:02.520

UDP 没有连接，所以没有类似于 TIME_WAIT 的东西。你不需要使用 SO_REUSEADDR。

如果您正在侦听广播或多播地址，则可能需要使用 SO_REUSEPORT，这样如果同一台机器上有多个侦听器，它们就不会发生冲突。但是，据我所知，这在 Linux 上不存在。

# sql-server - 在 SSRS 的所有页面上重复一个表

> ID：12540452
> 
> 赞同：1
> 
> 时间：2012-09-22T03:32:31.533
> 
> 标签：sql-server, reporting-services, ssrs-2008

我有一个图例表，我想在报告的所有页面上重复它。理想情况下，我想将此表包含在报告的页脚中。但是 SSRS 不允许我在报表页脚中添加表格。有什么方法可以在报告的所有页面上重复此表？请好心给我一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:55:47.383

我从你的问题中感受到的是你提到的表格似乎不是太大，因为你希望它出现在报告的**页脚**

中 所以你可以做的是在报告中插入页脚。

借助文本框和其他工具栏项在报表页脚中创建您想要的表格——通过启用文本框所有 4 侧的边框，然后在表格中写入您想要的内容，然后只需将其拖到您的页脚。

它应该看起来像报告所有页面上的表格！:)

# c# - 在 WPF 列表框中上下移动项目

> ID：12540457
> 
> 赞同：10
> 
> 时间：2012-09-22T03:34:07.540
> 
> 标签：c#, wpf

我有一个列表框，里面有一堆值。我还有一个向上按钮和一个向下按钮。使用这些按钮，我想向上/向下移动列表框中的选定项目。我很难做到这一点。

到目前为止，这是我的代码：

```
 private void btnDataUp_Click(object sender, RoutedEventArgs e)
    {

        int selectedIndex = listBoxDatasetValues.SelectedIndex; //get the selected item in the data list

        if (selectedIndex != -1 && selectedIndex != 0) //if the selected item is selected and not at the top of the list
        {
            //swap items here
            listBoxDatasetValues.SelectedIndex = selectedIndex - 1; //keep the item selected
        }

    } 
```

我不知道如何交换值！任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-22T10:08:29.640

由于您已通过使用 ItemsSource 绑定到 ObservableCollection 来填充列表框，因此您无法修改列表框的 Items 属性。

ItemsSource 只能在 Items 集合为空时设置，Items 只有在 ItemsSource 为空时才能修改。

否则您将收到错误“在使用 ItemsSource 时操作无效...”

您需要做的是修改底层集合，因为它是一个 ObservableCollection，所以 ListBox 将反映所做的更改。

以下代码显示了如何通过交换集合中的项目来上下移动项目。

相应的 XAML 只包含一个名为 lbItems 的列表框和 2 个连接事件处理程序的按钮。

```
public partial class MainWindow : Window
{
    private ObservableCollection<string> ListItems = new ObservableCollection<string>  
    { 
        "Item 1", "Item 2", "Item 3", "Item 4", "Item 5", "Item 6"
    };

    public MainWindow()
    {
        InitializeComponent();
        lbItems.ItemsSource = this.ListItems;
    }

    private void up_click(object sender, RoutedEventArgs e)
    {
        var selectedIndex = this.lbItems.SelectedIndex;

        if (selectedIndex > 0)
        {
            var itemToMoveUp = this.ListItems[selectedIndex];
            this.ListItems.RemoveAt(selectedIndex);
            this.ListItems.Insert(selectedIndex - 1, itemToMoveUp);
            this.lbItems.SelectedIndex = selectedIndex - 1;
        }
    }

    private void down_click(object sender, RoutedEventArgs e)
    {
        var selectedIndex = this.lbItems.SelectedIndex;

        if (selectedIndex + 1 < this.ListItems.Count)
        {
            var itemToMoveDown = this.ListItems[selectedIndex];
            this.ListItems.RemoveAt(selectedIndex);
            this.ListItems.Insert(selectedIndex + 1, itemToMoveDown);
            this.lbItems.SelectedIndex = selectedIndex + 1;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-24T10:09:06.730

我为此做了一些扩展方法：

```
 public static void MoveItemUp<T>(this ObservableCollection<T> baseCollection, int selectedIndex)
    {
        //# Check if move is possible
        if (selectedIndex <= 0)
            return;

        //# Move-Item
        baseCollection.Move(selectedIndex - 1, selectedIndex);
    }

    public static void MoveItemDown<T>(this ObservableCollection<T> baseCollection, int selectedIndex)
    {
        //# Check if move is possible
        if (selectedIndex < 0 || selectedIndex + 1 >= baseCollection.Count)
            return;

        //# Move-Item
        baseCollection.Move(selectedIndex + 1, selectedIndex);
    }

    public static void MoveItemDown<T>(this ObservableCollection<T> baseCollection, T selectedItem)
    {
        //# MoveDown based on Item
        baseCollection.MoveItemDown(baseCollection.IndexOf(selectedItem));
    }

    public static void MoveItemUp<T>(this ObservableCollection<T> baseCollection, T selectedItem)
    {
        //# MoveUp based on Item
        baseCollection.MoveItemUp(baseCollection.IndexOf(selectedItem));
    } 
```

无需为此了解 ListBox。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T21:00:52.523

这是执行此操作的最简单方法，它会触发所有正确的事件，因此您不必担心 XAML。ObservableCollection 有一个很好的方法叫做

```
MoveItem(previousIndex, newIndex) 
```

假设您有一个名为 DataItemList 的 ObservableCollection

```
public void MoveUp()
{
  var currentIndex = DataItemList.SelectedIndex;

  //Index of the selected item
  if (currentIndex > 0)
  {
    int upIndex = currentIndex - 1;

    //move the items
    DataItemList.MoveItem(upIndex,currentIndex);         
  }
} 
```

对于 Down，您将获得前一项的索引。

就那么简单！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-27T06:58:58.920

我会添加评论，但我不能，因为我只有 3 声望：/

Peter Hansen 的解决方案很棒，但是如果没有选中的元素，down_click 会抛出 ArgumentOutOfRange 异常。这是因为如果没有选择任何元素，则 Index 等于 -1。

我会像这样编辑 down_click ：

```
private void down_click(object sender, RoutedEventArgs e)
{
    if (this.lbItems.SelectedIndex != -1) //Added condition
    {
        var selectedIndex = this.lbItems.SelectedIndex;
        if (selectedIndex + 1 < this.ListItems.Count)
        {
            var itemToMoveDown = this.ListItems[selectedIndex];
            this.ListItems.RemoveAt(selectedIndex);
            this.ListItems.Insert(selectedIndex + 1, itemToMoveDown);
            this.lbItems.SelectedIndex = selectedIndex + 1;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T04:25:01.863

```
 if(listBoxDatasetValues.ListIndex > 0)
    {
        // add a duplicate item up in the listbox
        listBoxDatasetValues.AddItem(listBoxDatasetValues.Text, listBoxDatasetValues.ListIndex - 1);
        // make it the current item
        listBoxDatasetValues.ListIndex = (listBoxDatasetValues.ListIndex - 2);
        // delete the old occurrence of this item
        listBoxDatasetValues.RemoveItem(listBoxDatasetValues.ListIndex + 2);
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-22T04:06:56.240

尝试这个：

```
if (listBoxDatasetValues.SelectedItems.Count > 0)
{
    object selected = listBoxDatasetValues.SelectedItem;
    int indx = listBoxDatasetValues.Items.IndexOf(selected);
    int totl = listBoxDatasetValues.Items.Count;

    if (indx == 0)
    {
        listBoxDatasetValues.Items.Remove(selected);
        listBoxDatasetValues.Items.Insert(totl - 1, selected);
        listBoxDatasetValues.SetSelected(totl - 1, true);
    }
    else{
        listBoxDatasetValues.Items.Remove(selected);
        listBoxDatasetValues.Items.Insert(indx - 1, selected);
        listBoxDatasetValues.SetSelected(indx - 1, true);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-22T03:45:06.703

你可以尝试这样的事情：

向上移动：

```
if (listboxName.SelectedIndex == -1 || listboxName.SelectedIndex == 0)
    return;

Object select, previous, temp;
select = listboxName.Items[listboxName.SelectedIndex];
previous = listboxName.Items[listboxName.SelectedIndex-1];

temp = select;
select = previous;
previous = temp;

listboxName.Items[listboxName.SelectedIndex] = select;
listboxName.Items[listboxName.SelectedIndex-1] = previous;

listboxName.SelectedIndex--; 
```

向下移动：

```
if (listboxName.SelectedIndex == -1 || listboxName.SelectedIndex == listboxName.Items.Count-1)
    return;     

Object select, next, temp;
select = listboxName.Items[listboxName.SelectedIndex];
next = listboxName.Items[listboxName.SelectedIndex+1];

temp = select;
select = next;
next = temp;

listboxName.Items[listboxName.SelectedIndex] = select;
listboxName.Items[listboxName.SelectedIndex+1] = next;

listboxName.SelectedIndex++; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-16T16:55:17.067

无需使用可观察集合，您只需依靠 ListBox 内的集合对象就可以更简单，这是@Peter Hansen 答案的优化版本：

```
private void up_click(object sender, RoutedEventArgs e)
{
    var selectedIndex = this.lbItems.SelectedIndex;

    if (selectedIndex > 0)
    {
        var itemToMoveUp = this.lbItems.Items[selectedIndex];
        this.lbItems.Items.RemoveAt(selectedIndex);
        this.lbItems.Items.Insert(selectedIndex - 1, itemToMoveUp);
        this.lbItems.SelectedIndex = selectedIndex - 1;
    }
}

private void down_click(object sender, RoutedEventArgs e)
{
    var selectedIndex = this.lbItems.SelectedIndex;

    if (selectedIndex + 1 < this.lbItems.Items.Count)
    {
        var itemToMoveDown = this.lbItems.Items[selectedIndex];
        this.lbItems.Items.RemoveAt(selectedIndex);
        this.lbItems.Items.Insert(selectedIndex + 1, itemToMoveDown);
        this.lbItems.SelectedIndex = selectedIndex + 1;
    }
} 
```

# c# - 如何替换文本文件中的相同文本

> ID：12540458
> 
> 赞同：0
> 
> 时间：2012-09-22T03:34:31.007
> 
> 标签：c#, .net, io, replace, text-files

我创建了 ac# windows 登录表单，并且我将用户名或密码保存到一个文本文件中，但是每次当我使用相同的用户名或密码时，我已经保存在该文本文件中的新位置之前。

但我想要的是替换已经保存在该文本文件中的相同用户名或密码。

这是我的代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            FileStream fs = new FileStream("data.txt", FileMode.Append,
            FileAccess.Write);
            StreamWriter sw = new StreamWriter(fs);
            sw.Write("Email ID: ");
            sw.WriteLine(textBox1.Text);
            sw.Write("Password: ");
            sw.Write(textBox2.Text);
            sw.WriteLine();
            sw.WriteLine();
            sw.Flush();
            sw.Close();
            fs.Close();
        }
        catch (Exception)
        {
            MessageBox.Show("Error", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            this.Close();
        }
            MessageBox.Show("DONE", "Done", MessageBoxButtons.OK, MessageBoxIcon.Information);
            textBox1.Clear();
            textBox2.Clear();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:51:07.227

首先搜索相同的用户名，即使用“File.ReadAllText”方法读取整个文件进行搜索，您可以通过将用户名文本与文件文本进行比较来搜索。
一旦你得到用户名，使用c#的内置函数计算或获取用户名文本的位置，然后将你的写指针移动到用户名文本，并替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:55:36.003

为什么要更换它？当您已经将它们包含在文件中时，什么也不做。我对您的代码做了一些修改。看看这个：

```
private void button1_Click(object sender, EventArgs e)
{
    try
    {
        string file= File.ReadAllText("data.txt");
        FileStream fs = new FileStream("data.txt", FileMode.Append,
        FileAccess.Write);
        StreamWriter sw = new StreamWriter(fs);
        if(file.Contains(textBox1.Text+"\r\n"+textBox2.Text);
        {
           //Do nothing if you already have them in the file
        }
        else
        {
          sw.WriteLine("Email ID: "+textBox1.Text);
          sw.Write("Password: "+textBox2.Text);
          sw.WriteLine();
          sw.WriteLine();
        }
        sw.Flush();
        sw.Close();
        fs.Close();
    }
    catch (Exception)
    {
        MessageBox.Show("Error", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        this.Close();
    }
        MessageBox.Show("DONE", "Done", MessageBoxButtons.OK, MessageBoxIcon.Information);
        textBox1.Clear();
        textBox2.Clear();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T03:39:36.977

您可以在文本文件中搜索用户名，如果存在，您可以编辑密码.. 但您最好为此使用数据库:)

# io - 在 OCaml 中，如何创建一个写入字符串/缓冲区而不是磁盘上的文件的 out_channel

> ID：12540462
> 
> 赞同：16
> 
> 时间：2012-09-22T03:34:55.203
> 
> 标签：io, ocaml

我有一个类型的函数`in_channel -> out_channel -> unit`，它将输出一些东西到`out_channel`. 现在我想将它的输出作为一个字符串。创建临时文件来写入和读取它看起来很难看，那么我该怎么做呢？`out_channel`除了`Pervasives.open_out`家庭，还有其他的创作方式吗？

实际上，这个函数实现了一个 repl。我真正需要的是以编程方式对其进行测试，所以我想先将它包装成一个 type 的函数`string -> string`。对于创建`in_channel`，似乎我可以使用`Scanf.Scanning.from_string`，但我不知道如何创建`out_channel`参数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T04:13:08.107

OCaml Batteries Included 在其模块中具有`output_string`和`output_buffer`功能`BatIO`似乎可以满足您的需求： http: [//ocaml-batteries-team.github.com/batteries-included/hdoc/BatIO.html](http://ocaml-batteries-team.github.com/batteries-included/hdoc/BatIO.html)

它可能需要您使用他们的输入/输出类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-13T21:17:59.207

如果你不介意你的测试依赖于`Unix`模块，那么你可以使用`Unix.pipe`创建一个文件描述符对，`in_channel`从可读端创建一个，`out_channel`从可写端创建一个，然后将字符串写入可写端并传递`in_channel`给被测代码。

> ```
> val pipe : unit -> file_descr * file_descr 
> ```
> 
> 创建管道。结果的第一个组件被打开以供读取，即管道的出口。第二个组件是打开写的，也就是管道的入口。
> 
> ```
> val in_channel_of_descr : file_descr -> Pervasives.in_channel 
> ```
> 
> 创建从给定描述符读取的输入通道。通道最初是二进制模式；如果需要文本模式，请使用 set_binary_mode_in ic false。
> 
> ```
> val out_channel_of_descr : file_descr -> Pervasives.out_channel 
> ```
> 
> 在给定的描述符上创建一个输出通道。通道最初是二进制模式；如果需要文本模式，请使用 set_binary_mode_out oc false。

Unix 管道对于任何具有高吞吐量的东西来说有点重，但对于测试工具来说它们应该没问题。

# ruby-on-rails-3 - 将特定数据发送到集合部分

> ID：12540464
> 
> 赞同：0
> 
> 时间：2012-09-22T03:35:50.380
> 
> 标签：ruby-on-rails-3, railstutorial.org

我有一`User`堂课`has_many :messages`和一`Message`堂课`belongs_to :user`。在`Message`控制器的show action中有对应的view：

```
<% if @messages.any? %>
  <ol class="microposts">
    <%= render partial: 'shared/message', collection: @messages %>
  </ol>
<% end %> 
```

`shared/_message.html.erb`模板如下所示：

```
<li id="<%= message.id %>">
  <span class="content"><%= message.body %></span>
  <% user_id = message.from %>
  <% user = User.find(user_id) %>
  From: <%= user.name %>
</li> 
```

`Messages`根据我在 Rails 教程中阅读的内容，我觉得应该在控制器中完成以下两行：

```
<% user_id = message.from %>
<% user = User.find(user_id) %> 
```

但是我如何将每条消息的相应`from`值（存储 user.id）传递到部分中？

谢谢，迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T03:46:58.527

到目前为止，我已经了解到`from`您的表中有一个列`messages`存储`user_id`. 因此，如果您调用`message.from`它，则返回`user_id`. 然后您可以执行以下操作

```
class Message < AR::Base
     belongs_to :user, :foreign_key=>'from' 
end 
```

在您的控制器中

```
@messages = Message.all.includes(:user)
#It will load messages and will associated users eager loaded. 
```

现在在您看来，您可以`message.user.name`直接调用以获取用户名。您根本不需要以下两行

~~<% user_id = message.from %>
<% user = User.find(user_id) %>~~

如果我错过了什么，请告诉我。

* * *

### 更新：

这是我尝试过的

**用户模型**

```
class User < ActiveRecord::Base
    attr_accessible :age, :name
    has_many :sent_messages,    :class_name=>'Message', :foreign_key => 'from'
    has_many :received_messages,:class_name=>'Message', :foreign_key => 'user_id'
end
#Contains Data:
#<User id: 1, name: "p1", age: 27, ... ...>, 
#<User id: 2, name: "p2", age: 25, ... ... 
```

**消息模型**

```
class Message < ActiveRecord::Base
    attr_accessible :body, :sender, :title, :receipent
    belongs_to :sender,     :class_name => 'User', :foreign_key => 'from'
    belongs_to :receipent,  :class_name => 'User', :foreign_key => 'user_id'
end 
```

现在说`p1`正在发送消息到`p2`

```
p1.sent_messages.create(title: "test title", body: "test body", receipent: p2)
#Result:
#<Message id: 1, title: "test title", body: "test body", user_id: 2, from: 1 ... ... > 
```

现在对于 a `message`，您可以同时获得`sender`并`receipent`直接喜欢

```
@messages = Message.includes(:sender, :receipent) # You can load only sender or only receipent

#In View
message.sender.name 
#OR
message.receipent.name 
```

# date - 如何在 Magento 中获取订单时间？

> ID：12540465
> 
> 赞同：5
> 
> 时间：2012-09-22T03:35:54.983
> 
> 标签：date, pdf, time, magento-1.7, invoice

我正在尝试在 Magento 中重写我的 PDF 发票。如何在没有订单日期的情况下显示创建时间？

我正在 /app/code/local/Mage/Sales/Model/Order/Pdf/Abstract.php 中准备类 insertOrder()。

```
$page->drawText(Mage::helper('core')->formatDate($order->getCreatedAtStoreDate(), 'short', false), 100, 100, 'UTF-8'); 
```

仅显示时间和日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T08:34:09.687

仅显示时间部分的一种方法是：

```
$sTime = Mage::app()
    ->getLocale()
    ->date(strtotime($order->getCreatedAtStoreDate()), null, null, false)
    ->toString('H:m:s');

$page->drawText($sTime, 100, 100, 'UTF-8'); 
```

Magento 的语言环境使用修改后的`Zend_Date`类进行日期/时间操作。

参看参数信息的`toString()`方法`app/code/core/Zend/Date.php`。

# html - CSS 导航和背景图片

> ID：12540480
> 
> 赞同：1
> 
> 时间：2012-09-22T03:39:36.510
> 
> 标签：html, css, navigation

我有 CSS 导航

```
.navigation{
    float:right;
    width:718px;
    background-image:url('http://inauguralseason.com/images/nav.png');
}

.navigation ul {
    float: right;
    list-style-type: none;
    margin: 0;
}

.navigation li {
    float: left;
}

.navigation ul a {
    color: #FFF;
    display: block;
    padding: 0 65px 0 0;
    text-decoration: none;
} 
```

但是背景图像没有出现，当我删除这一行时

```
.navigation li {
    float: left;
} 
```

出现背景图像，但我的导航未水平对齐。

有任何想法吗？

这是HTML

```
<div class="navigation">
<ul>
<li><a href="#">Shop</a></li>
<li><a href="#">Our Collection</a></li>
<li><a href="#">About Us</a></li>
<li><a href="#">Contact</a></li>
<li><a href="#">News</a></li>

</ul>

</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T03:45:12.387

[检查这个小提琴。](http://jsfiddle.net/wQuXz/)

图像在那里。只是容器（在本例中为 div）不够高，无法显示图像。所以你只看到图像的顶部。

通过强制容器的高度（可能与图像的高度相同），您将显示整个背景图像。

# java - 原始类型在系统中是如何表示的？（以 Integer.toString(int) 为例）

> ID：12540484
> 
> 赞同：0
> 
> 时间：2012-09-22T03:39:55.930
> 
> 标签：java, primitive

对象在 Java 中相当容易理解。对象被构造，在堆中分配空间，你将它分配给指向它的变量名（引用）。没什么大不了。但是原始类型是如何表示的呢？它们位于哪里（堆栈或堆）？

当我想知道该`Integer.toString(int)`方法可能是什么样子时，我想到了这个问题。它无法解析文本，因为......它不是文本。它不能`toString()`显式或隐式调用方法，因为这既是循环逻辑，也是公然无视原始类型不能分配给它们的方法（因为它们不是对象）这一事实。我认为该方法在逻辑上可能对and之间的所有可能值有大量`if/else`条件，但这似乎也比它应该的复杂得多。`int``Integer.MIN_VALUE``Integer.MAX_VALUE`

那么这是如何工作的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T03:45:44.973

> 但是原始类型是如何表示的呢？

原始类型的实例在内存中表示为位模式。例如，an`int`表示为 32 位（4 个字节，1 个 32 位字）。

> 它们位于哪里（堆栈或堆）？

任何一个。这取决于您将原始值保存在哪种变量中。

> 我想知道 Integer.toString(int) 方法可能是什么样子。

该方法的核心是一个简单的算法是一个循环重复

1.  通过取余数 10 取最后一位小数，并且
2.  将数字除以 10。

就像手动将二进制数转换为十进制一样。

（有关详细信息，请查看源代码。每个 Sun / Oracle JDK 都包含核心库的源代码。或者，您可以通过 Google 搜索在 Internet 上轻松找到源代码（各种版本）。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T03:45:34.827

不用想知道是什么[`Integer.toString(int)`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.toString%28int%29)样子（链接显示了 Java 6 的 OpenJDK 实现），它使用了一个包私有帮助器函数[`getChars`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.getChars%28int%2Cint%2Cchar%5B%5D%29)，该函数简单地以 10 为基数除以数字的每个数字。

这是代码的症结所在：（从第 354 行开始）

```
 // Generate two digits per iteration
     while (i >= 65536) {
         q = i / 100;
         // really: r = i - (q * 100);
         r = i - ((q << 6) + (q << 5) + (q << 2));
         i = q;
         buf [--charPos] = DigitOnes[r];
         buf [--charPos] = DigitTens[r];

     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T03:46:32.057

方法是使用[Java 字节码](http://en.wikipedia.org/wiki/Java_bytecode)实现的。查看此参考资料，了解如何使用字节码实现一个简单的方法。通常，[解释器](http://en.wikipedia.org/wiki/Interpreter_%28computing%29)或[即时编译器 (JIT) 会](http://en.wikipedia.org/wiki/Just-in-time_compilation)执行这些字节码。

本质上，有一个堆栈可以包含对象引用或原始类型。字节码允许您对堆栈上的项目进行操作（添加其中两个，或调用一个方法等）。

# c - 调用 malloc 后 p 如何变成二维数组？

> ID：12540488
> 
> 赞同：1
> 
> 时间：2012-09-22T03:41:32.963
> 
> 标签：c, arrays, malloc

以下代码段使用函数声明了一个*4 X 10*的二维数组`malloc`

```
/* Declare a pointer to an array that has 10
ints in each row. */
int (*p)[10];
register int i, j;
/* allocate memory to hold a 4 x 10 array */
p = malloc(40*sizeof(int)); 
```

但我不明白怎么`p`变成二维数组。最初 p 被声明为指向 int 的指针数组。调用 malloc 后会发生什么？我无法理解这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T03:47:57.983

内存，价值 40 个整数，保留给指针 p。p 指向他的内存块。碰巧 p 选择将这个记忆组织为 10 个相等的部分，每个部分恰好容纳 4 个整数的值。

那就是如果这段代码实际上是正确的。我的 C 在这一点上非常生锈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T03:55:09.870

在 C 中，尽管看起来非常相似，但指针和数组并不相同。这`p`是“指向 10 个整数数组的指针”类型。您将它用作“指向 4 个 10 个整数数组的数组的指针”，它是一个内存块（唯一的指针是最外层的指针）。它基本上是一个动态分配的`int[4][10]`.

阅读这些定义的诀窍是意识到它们的编写方式与您使用该项目的方式相同。如果你有：

```
*x[10]; 
```

首先应用数组下标，*然后*是指针解引用。所以如果你定义它是一个指针数组`int *x[10]`。如果您使用括号覆盖正常优先级，则可以首先取消指针引用，因此您有一个指向数组的指针。

令人困惑？它变得更糟。在函数参数中，函数参数的*最外层数组*被转换为指针。

```
int *p[10]; // array of 10 pointer to int
int (*p)[10]; // pointer to array of 10 ints
void foo(int *p[10] /* pointer to pointer to int */);
void foo(int (*p)[10] /* pointer to array of 10 ints */); 
```

此外，当您使用数组时，它们会被转换为指针。

```
int x[10]; // array of 10 int
sizeof(x); // 10 * sizeof(int)
int *y = x; // implicitly converts to a pointer to &x[0]!
sizeof(y); // sizeof(int *) 
```

这意味着您可以为数组数组分配内存，然后让它隐式转换为指向数组的指针，然后您将其用作数组数组！

无论如何，这一切都非常令人困惑，所以请不要在生产代码中使用它——至少，如果没有明确的 typedef：

```
typedef int vector[3];
vector *array_of_vectors; // actually a pointer to a vector, 
                          // but you can use it as an aray to a vector if enough
                          // memory is allocated 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:28:34.330

首先，一些背景资料：

除非它是、 或一元运算符的操作数`sizeof`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of ”类型的表达式将被转换（“衰减”）为表达式类型为“指向”的指针，其值为数组中第一个元素的地址。例如，给定数组`_Alignof``&``T``T`

```
int a[10]; 
```

每当表达式出现在代码中时`a`，其类型都会从“10 元素数组`int`”转换为“指针`int`”或`int *`，*除了*、 和. 如果我们有一个 T 的二维数组，例如`sizeof a``_Alignof a``&a`

```
int a[10][10]; 
```

表达式`a`将从“10 元素数组的 10 元素数组`int`”类型转换为“指向 10 元素数组的指针`int`”，或者**`int (*)[10]`**（看起来很熟悉？那是指针的类型`p`）。

如果我们想动态分配一个类型为 N 元素的数组`T`，我们可以这样写

```
T *p = malloc(N * sizeof *p); 
```

`sizeof *p`相当于`sizeof (T)`。在这种特殊情况下，类型`T`是“10 元素数组`int`”，或者`int [10]`。我们要分配 4 个这样的数组，所以我们可以写

```
int (*p)[10];
p = malloc(4 * sizeof *p); 
```

这为 的 4 个 10 元素数组分配空间`int`，并将结果分配给`p`。( `sizeof *p == sizeof (int [10])`)。

那么这如何变成二维数组呢？

请记住，表达式`a[i]`等价于`*(a + i)`; 我们找到后面类型的第`i`' 个*元素*的地址并取消引用结果。在这种情况下，为我们提供了以下*10 元素数组的*地址。由于我们取消引用指针作为下标操作的一部分，因此表达式的*类型*是“10 元素数组”。因此我们可以再次下标这个表达式并得到。 `T``a``p[i]``i`*`int`*`p`*`p[i]``int``p[i][j]`*

# php - 从 MySQL 调用生成键/值（列名/值）对

> ID：12540490
> 
> 赞同：1
> 
> 时间：2012-09-22T03:41:48.207
> 
> 标签：php, mysql

我查询 SQL 表（我正在使用 php）的常规方法是实现以下行：

```
mysql_query("SELECT * FROM `TABLE_NAME` WHERE SOME CONDITION") or die(mysql_error()); 
```

我想以一种返回键/值对的方式进行查询，其中键是列名。任何人都可以提出一种优雅的方式来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:14:11.060

用于`mysql_fetch_assoc()`从表中读取行。

# python - Python 2.7 - 将用户输入的数字添加到当前时间？

> ID：12540492
> 
> 赞同：0
> 
> 时间：2012-09-22T03:42:07.160
> 
> 标签：python, time, input

所以基本上我需要添加一个用户输入的数字，我只是使用 raw_input，我想以分钟为单位将这个数字添加到当前时间。

所以：

```
breakTime = int(raw_input("How long do you want to have a break for?")) 
```

我想添加他们输入的任何内容

```
datetime.datetime.now() 
```

这可能吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:44:13.643

您可以使用 a [`datetime.timedelta`](http://docs.python.org/library/datetime.html#datetime.timedelta)：

```
import datetime
minutes = int(raw_input("break time"))
dt = datetime.timedelta(minutes = minutes)
later = datetime.datetime.now() + dt 
```

# objective-c - UICollectionView 项数无效，数组增删元素

> ID：12540493
> 
> 赞同：-1
> 
> 时间：2012-09-22T03:42:53.393
> 
> 标签：objective-c, ios, core-data, ios6, uicollectionview

我正在开发一个带有 UICollectionView 的 iPhone 应用程序，并且正在尝试创建像 iPhone 弹簧板这样的文件夹。我让它工作，但在使用核心数据添加和减去单元格时遇到了这个错误。我希望有人能解释我如何避免这个错误？先感谢您。

***由于未捕获的异常'NSInternalInconsistencyException'而终止应用程序，原因：'无效更新：第0节中的项目数无效。更新后现有节中包含的项目数（4）必须等于其中包含的项目数更新前的那个部分 (3)，加上或减去从该部分插入或删除的项目数（0 插入，0 删除），加上或减去移入或移出该部分的项目数（0 移入，0搬出）。'

------主视图控制器

```
 //**Document One**
            //get first doc and create it as a sub doc
            Document * docToCopy = [[self birds] objectAtIndex:longPressFolderLayout.pinchedCellPath.row];
            SubDocument *doc = [[SubDocument alloc] initInsertingIntoManagedObjectContext:managedObjectContext];
            [doc setTitle:docToCopy.title];
            [doc setThumbnail:docToCopy.thumbnail];
            [doc setIsFolder:[NSNumber numberWithInt:0]];
            [doc setDate:docToCopy.date];

            //**Document Two**
            //get second doc and create it as a sub doc
            Document * docToCopy2 = [[self birds] objectAtIndex:cellAttributes.indexPath.row];
            SubDocument *doc2 = [[SubDocument alloc] initInsertingIntoManagedObjectContext:managedObjectContext];
            [doc2 setTitle:docToCopy2.title];
            [doc setThumbnail:docToCopy2.thumbnail];
            [doc2 setIsFolder:[NSNumber numberWithInt:0]];
            [doc2 setDate:docToCopy2.date];
            [self add:@"folder" image:[UIImage imageNamed:@"folderDefaultImage"] date:[NSDate date] folder:[NSNumber numberWithInt:1]];

            //**Folder**
            //create a folder and append both sub docs and then remove the original docs
            Document * origFolder = [[self birds] objectAtIndex:([[self birds]count]-1)];
            [origFolder appendDoc:doc];
            [origFolder appendDoc:doc2];
            [origFolder setIsFolder:[NSNumber numberWithInt:1]];
            currentOpenFolder = origFolder;
            [self removePageAtIndex:longPressFolderLayout.pinchedCellPath.row];
            [self removePageAtIndex:cellAttributes.indexPath.row]; 
```

------DocumentNSManagedObject

```
- (void)appendDoc:(SubDocument *)doc
{
[[self mutableSetValueForKey:@"subDocument"] addObject:doc];
[(NSMutableArray *)[self subDocumentsOrdered] addObject:doc];

    NSError *error = nil;
[[self managedObjectContext] save:&error];
}
- (void)deleteDoc:(SubDocument *)doc
{
    [[self mutableSetValueForKey:@"subDocument"] removeObject:doc];
    [(NSMutableArray *)[self subDocumentsOrdered]removeObject:doc];
    NSError *error = nil;
[[self managedObjectContext] save:&error];
}
- (NSArray *)subDocumentsOrdered
{
if (!subDocumentsOrdered)
{
subDocumentsOrdered = [[[[self subDocument] allObjects] sortedArrayWithOptions:NSSortStable|NSSortConcurrent usingComparator:(NSComparator) ^(SubDocument *stroke1, SubDocument *stroke2)
                          {
                              return [[stroke1 date] compare:[stroke2 date]];
                          }
                          ] mutableCopy];
}
    return subDocumentsOrdered;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:58:43.773

错误消息`UICollectionView`与您在添加和删除项目或响应它的`UICollectionViewDataSource`方法时提供的信息有关，例如`collectionView:numberOfItemsInSection:`

基本上，您正在执行的`UICollectionView`操作不会加起来。

它告诉你，在第 0 节

*   `collectionView:numberOfItemsInSection:`您从该部分中的 3 个项目开始，即您通过返回来响应`3`。
*   您没有插入或移除任何项目。
*   `collectionView:numberOfItemsInSection:`您现在说该部分中有 4 个项目，即您通过返回来响应`4`。

所以`UICollectionView`抱怨你告诉它该部分中有一个额外的项目，但你没有告诉它在哪里插入它。所以这是你需要做的。

与它并没有太大关系，与`core-data`它有关`UICollectionView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:22:51.840

我最近在我的应用程序中遇到了一个非常类似的问题。如果您查看添加页面的位置，我敢打赌您没有将它们保存到 NSManagedObjectContext。一个简单的解决方案就是写：

```
[[self managedObjectContext]save:nil]; 
```

希望这可以帮助。祝你好运。

# html - 如何订购 CSS 元素？

> ID：12540494
> 
> 赞同：0
> 
> 时间：2012-09-22T03:42:59.283
> 
> 标签：html, css, position, z-index

我无法让菜单出现在页面上的其他元素之上。示例页面代码在这里：http: [//jsfiddle.net/JdUTG/13/](http://jsfiddle.net/JdUTG/13/)

关于我可以使用哪些 CSS 属性让菜单始终位于顶部的任何想法？

菜单来自这里： [http ://www.cssplay.co.uk/menus/cssplay-click-click.html](http://www.cssplay.co.uk/menus/cssplay-click-click.html)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:45:18.797

现在看一下：http: [//jsfiddle.net/joplomacedo/JdUTG/5/](http://jsfiddle.net/joplomacedo/JdUTG/5/)

你有`z-index = -1;`而不是`z-index: -1;`. 只是打错字。

# php - 尝试在 php 中刷新页面但出现错误

> ID：12540495
> 
> 赞同：0
> 
> 时间：2012-09-22T03:43:00.623
> 
> 标签：php, javascript, ajax, wordpress

因此，我在 WordPress 主题中有一个文件，其中包含一段 javascript，允许用户将音频上传到 Soundcloud。请参见下面的代码：

```
SC.connect({
  connected: function(){
    $("#uploadStatus").html("Uploading...");
    SC.recordUpload({
      track: {
        title: "My Recording at The Appreciation Engine",
        sharing: "public"
      }
    }, function(track){
      $("#uploadStatus").html("<a href='" + track.permalink_url + "' class='sclink'>" + track.permalink_url + "</a>");        
$.ajax({
type: "POST",
url: "MYPATHGOESHERE/record.php",
data: {
  url: track.permalink_url,
  name: track.name
}
});
    });
    }
}); 
```

上传完成后，新轨道的 URL 将被发送到另一个 PHP 页面，该页面会创建一个新的 WordPress 帖子，其中包含 soundcloud 轨道的 URL 作为帖子内容。请参阅下面的代码

```
header ('Access-Control-Allow-Origin: *');

$parse_uri = explode( 'wp-content', $_SERVER['SCRIPT_FILENAME'] );
require_once( $parse_uri[0] . 'wp-load.php' );

// Create post object
  $my_post = array(
     'post_title' => 'My Appreciation',
     'post_content' =>
         $_POST["url"],
     'post_status' => 'publish'
);

// Insert the post into the database
wp_insert_post( $my_post );

$post_id = wp_insert_post($my_post);
$url = get_permalink( $post_id );
wp_redirect($url);
exit(); 
```

现在，我遇到的问题是我需要浏览器刷新到刚刚在 WordPress 中创建的新帖子，但我不断收到错误消息“XMLHttpRequest cannot load Cannot make any requests from null.”。

关于如何做到这一点的任何想法，或者我在 php 中的重定向代码是否错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:57:58.143

使用标头进行重定向

```
header('Location:http://yoururl.com');exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:25:35.440

与其在通过 AJAX 调用的 PHP 脚本内部进行重定向，不如尝试回显 URL - 然后在 Javascript 中，获取 AJAX 调用的结果（URL）并执行 Javascript 重定向。

编辑：

将 PHP 代码更新为：

```
echo $url;
exit(); 
```

更新 JavaScript 代码以检索 URL 并重定向：

```
$.ajax({
   type: "POST",
   url: "MYPATHGOESHERE/record.php",
   data: {
     url: track.permalink_url,
     name: track.name
   },
   success: function(data) {
       location.href = data;
   }
}); 
```

# wordpress - 将我的博客从 blogger 转移到 wordpress 会影响我的搜索引擎索引和排名吗？

> ID：12540496
> 
> 赞同：2
> 
> 时间：2012-09-22T03:43:12.773
> 
> 标签：wordpress, seo, blogger

我目前在 blogger.com 上有一个带有自定义域名的博客。我决定使用 wordpress 管理我自己的博客，以便能够充分利用所有很酷的 wordpress 插件。请注意，我也在移动我的域。我不会买新的。

我做了一些实验，发现我可以在我的旧博客上复制博客 URL，并在我的新 wordpress 博客上使用相同的 URL。例如，文章的 Blogger URL 类似于 mydomain.com/this-is-my-title.htm。Wordpress url 也可以被操纵成看起来完全一样。

但是，作为预防措施，我想知道这一举动是否仍然会以负面的方式影响我在搜索引擎上的排名（不是说有太多可说的）。

菜鸟与 SEO 的东西。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:54:23.453

如果您完成所有 URL 的完整复制，则它根本不会受到影响。对于您无法模仿但您知道它们已编入索引的 URL - 将您的服务器设置为回退到您博客的主页。

# jquery - jQuery数字动画插件中的冲突动画

> ID：12540498
> 
> 赞同：3
> 
> 时间：2012-09-22T03:43:54.710
> 
> 标签：jquery, jquery-plugins

我一直在研究一个 jQuery 插件，以在两个数值之间为元素的文本设置动画。jQuery 的 animate 函数强制您指定要设置动画的属性。在我的情况下，我基本上需要在每个动画步骤上调用 text() ，所以我必须做一些修改才能让它工作。

由于我没有以正常方式使用 animate() ，因此我将自己暴露在相互冲突的动画中，因为 jQuery 没有为我处理它。例如，如果我开始在 5 秒内将元素的文本设置为“500”，并立即开始在 1 秒内将相同元素的文本设置为“500000”，我会得到奇怪的结果，因为它们相互冲突。

一张图片值一千字，所以这里是 jsFiddle：http: [//jsfiddle.net/XjrNC/](http://jsfiddle.net/XjrNC/)

我的主要问题是：确保在开始新动画时停止以前的动画的最合适方法是什么。

我的第二个问题是：到目前为止，您对我的代码有何反馈？你会采取不同的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T22:38:55.210

我只会分配 ID 而不是按类调用...这将使用您的代码，我在我的版本中进行了大量编辑，所以我什至不会这样做。

```
$(function() {
    $('#oneThousand').tweenText(500, 5000);
    $('#fiveThousand').tweenText(500000, 1000);
}) 
```

在您的代码中，我觉得**tweenText 内部的 $.each**不是很有用，IMO 应该在方法之外。这个概念是对指定的选择器执行此操作，而不是在方法中进行额外的选择。

另外，我强烈建议使用参数对象，而不是传递预定义的集合，那么不需要的参数可以作为 null 传递或直接忽略。

此外，我添加了一个回调函数，以便您可以设置在当前 tweenText 完成时运行的内容。

这是我的修改。

[http://jsfiddle.net/pmZHp/3/](http://jsfiddle.net/pmZHp/3/)

# python - 函数没有返回预期的结果，即使它出现在调试器中

> ID：12540503
> 
> 赞同：0
> 
> 时间：2012-09-22T03:44:41.917
> 
> 标签：python, unit-testing, debugging, return

只是一点背景：这是一个类似 STRIPS 的程序。这个测试一直返回假，即使它应该是真的。从我在调试器中看到的应该是真的，我看不出为什么它会返回假。

![在此处输入图像描述](../Images/b2e75cf003a44b814931c9c25ad5df84.png)

谢谢你的帮助。调试器图像：

世界：

```
def __init__(self):
    self.logic = {}
    self.actions = {}
    self.goals = set()
    self.curr_state = set() 
```

测试用例：

```
def setUp(self):
    self.world = World()

def testWorldis_true(self):
     pred = "on"
     params = ("A", "B")
     self.assertFalse(self.world.is_true(pred, params))
     self.world.logic[pred] = params
     self.assertTrue(self.world.is_true(pred, params)) 
```

输出：

```
======================================================================
FAIL: testWorldis_true (objorstrippertests.TestWorldFunctions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ".stripperAssignment\src\objorstrippertests.py", line 54, in testWorldis_true
    self.assertTrue(self.world.is_true(pred, params))
AssertionError: False is not true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:09:27.183

代替：

```
 self.world.logic[pred] = params 
```

和：

```
 self.world.logic[pred] = set([params]) 
```

甚至更好（保持封装！）：

```
 self.world.set_true(pred, params) 
```

`logic`是从谓词到一组参数元组的映射，而不是单个参数元组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:14:32.090

测试实际上工作正常：

```
>>> d = {}
>>> d['on'] = ('A','B')
>>> ('A','B') in d['on']
False 
```

这是`False`因为`('A','B')`不在元组中`('A','B')`。每次迭代`('A','B')`都将返回`A`and `B`：

```
>>> for x in d['on']:
...    print x
... 
A
B 
```

如果您将退货更改为，`==`那么它将正常工作：

```
>>> d['on'] == ('A','B')
True 
```

# javascript - 使用javascript开发flash

> ID：12540508
> 
> 赞同：-4
> 
> 时间：2012-09-22T03:45:14.553
> 
> 标签：javascript, flash

我只是想知道是否有解决方案可以让我使用 javascript 开发 flash。我熟悉javascript。不希望学习一门新语言。

欢迎任何评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T03:58:30.517

有这个 JavaScript API，但我不认为你能找到一种方法来用 JS 而不是 AS 来做所有事情。

[http://help.adobe.com/en_US/flash/cs/extend/WS5b3ccc516d4fbf351e63e3d118a9024f3f-7fe8.html](http://help.adobe.com/en_US/flash/cs/extend/WS5b3ccc516d4fbf351e63e3d118a9024f3f-7fe8.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:50:31.300

您可以尝试使用 jquery（或任何其他 javascript 库）来执行此操作..

像这样的东西（演示）：[http](http://robot.anthonycalzadilla.com/) ://robot.anthonycalzadilla.com/ 你可以从这里开始：[http://css-tricks.com/jquery-robot/](http://css-tricks.com/jquery-robot/)

# c - 循环永远不会退出 EOF

> ID：12540513
> 
> 赞同：0
> 
> 时间：2012-09-22T03:46:24.647
> 
> 标签：c, while-loop, infinite-loop, eof

我正在用 C 编写自己的 shell，我需要检测 EOF（当我运行时`./myshell < commands.txt`）

commands.txt 包含：

```
ls
pwd 
```

这些都在程序中单独运行良好。但是当我用文本文件运行它时，我得到一个无限循环。

在我`while(1)`的 shell 循环中，我做的第一件事是：

```
if (feof(stdin)) { my_exit(); } 
```

`my_exit`很简单：

```
void my_exit() {
    printf("End of file! Bye\n");
    exit(0);
} 
```

不`exit(0)`结束程序（和循环）？为什么我越来越

> 文件结束！文件结束！文件结束！文件结束！文件结束！文件结束！再见....等

我也尝试过这样做`fgets == NULL`。相同的循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:26:43.453

问题是它会`feof()`告诉您最后一次输入操作是否遇到 EOF。但是在下一次迭代之前你不会检查这个。因此，当您在 EOF 时，您会这样做`fgets()`，然后尝试使用它返回的空结果。

发生的事情是你`fork()`是一个子进程，然后`execvp()`用一个空的命令名调用。这是失败的，所以子进程返回到循环的开头，并做同样的事情。同时，父进程调用`my_exit()`. 因此，每个子进程都会派生出自己的另一个子进程，然后退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:18:21.200

feof 的工作方式是，只要没有读取到达 EOF，它就会返回 false。feof 本身不检查流，而是检查是否设置了 EOF 指示符，这在 fgets 等失败时发生。

在控制循环中使用 feof 确实不是一个很好的做法。

验证 EOF 的示例如下：

```
while( fgets(line, sizeof(line), fp) != NULL )
  fputs(line, stdout); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-22T04:05:41.060

你可以试试这样...

```
int a=1;
while(a)
{
    if (feof(stdin)) {
        a = 0;
    }
}
printf("End of file! Bye\n");
exit(0); 
```

# css - 指向模板中的自定义设置

> ID：12540516
> 
> 赞同：0
> 
> 时间：2012-09-22T03:47:15.577
> 
> 标签：css, django, sass

我想在 settings.py 文件中创建设置，我可以在我使用的模板中访问这些设置，而无需使用 django 在views.py 中传递设置

```
settings.py
CSS_FOLDER_ROOT = "/home/brian/Projects/RaffleThis/RaffleGym/stylesheets" 
```

CSS_FOLDER_URL = SITE_DOMAIN + "/CSS/"

我希望服务器在发送 HttpRequest 时从 CSS_FOLDER_ROOT 提供文件

处理 django 模板 .html 文件和 views.py 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:31:43.610

我想一种方法是创建一个上下文处理器。

在项目的某处创建 context_processors.py

```
import settings    
def css_url(request):
    return {'CSS_URL': settings.CSS_URL} 
```

在您的设置中添加上下文处理器

```
CSS_FOLDER_ROOT = "/home/brian/Projects/RaffleThis/RaffleGym/stylesheets/"
CSS_URL = '/css/'

TEMPLATE_CONTEXT_PROCESSORS += (
    "django_app.context_processors.css_url",
) 
```

然后你可以在你的模板中使用这样的东西。

```
<link rel="stylesheet" href="{{ CSS_URL }}<filename.css>" /> 
```

# php - 一点帮助理解面向对象的 PHP

> ID：12540521
> 
> 赞同：3
> 
> 时间：2012-09-22T03:48:35.060
> 
> 标签：php, oop

> **可能重复：**
> [PHP 方法链接？](https://stackoverflow.com/questions/3724112/php-method-chaining)

我对 PHP 和 OOP 比较陌生，我无法理解数据库代码中弹出的重复结构。

我了解如何创建一个类、对其进行实例化以及访问属性和方法，但`$myobject->function()`目前对我来说已经很复杂了。

这是什么结构？

`$myobject->function()->something`. 我越来越多地反复看到这一点，尤其是当我开始关注 mysql PDO 查询时。例如：

```
$query->function1($arg)
  ->function2($arg)
  ->function3($arg); 
```

这里发生了什么事？它是简单地链接类中多个方法的一次调用，还是那些子函数`function1()`？类定义会是什么样子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T04:12:52.520

这是一种称为[Fluent Interface](http://en.wikipedia.org/wiki/Fluent_interface)的设计模式。它通过一些使用它的著名框架（例如 jQuery）变得流行起来。这是编写紧凑、可读的代码（在某些情况下）的巧妙技巧，但与许多设计模式一样，它并不适合所有情况。

该`->`符号实际上只是一个运算符。类似于`+`或`-`可用于对数字进行操作的方式，`->`运算符可以对对象和成员进行操作。PHP 解释器可以将表达式简化`5 + 4`为 just `9`，它也可以简化表达式`$a->b`。通过在内部查找名为 的成员`$a->b`来评估表达式。`$a``b`

就像`+`运算符可以在表达式中多次使用一样，例如`5 + 2 + 7`，`->`运算符也可以多次使用。PHP 解释器与`+`运算符保持关联，这意味着它的评估`5 + 2 + 7`就像它是写的一样`(5 + 2) + 7`，它评估为`7 + 7`，而后者又评估为`14`。

`->`运算符也是左关联的。因此，表达式 like`$a->b->c`的解释方式与前面的示例类似：首先解释器`$a->b`通过查找调用`b`in的成员进行求值`a`，然后查找调用`c`in that 的成员！这假设`$a->b`实际评估为一个对象；如果没有，那么 PHP 解释器会给你一个错误：“试图获取非对象的属性”。

这种范式可以无限扩展：`$a->b->c->d->e->f->g->....`等等。

在 Fluent Interface 设计模式中，这是通过让所有实例方法返回实例来实现的。所以`$a->b()`返回`$a`。因此，与先调用再调用`$a->b()->c()`是完全一样的。`$a->b()``$a->c()`

有人认为前者比后者更具可读性。在某些情况下这是真的，但在其他情况下则不是。像大多数设计模式一样，在决定是否使用这种模式时，您需要做出良好的判断。请记住，这种模式只有在纯粹为了副作用而调用实例方法时才有效。除了实例本身之外，您不能从实例方法返回任何其他值，否则您将破坏流畅的接口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T03:55:48.473

`$myobject->function()`正在返回一个对象，`->something`将访问该对象上的一个字段。

基本上，这种编程方法的主要概念是对象包含数据和与包含的数据交互的方法（或“函数”）。这些容器可以方便地传递。PHP 为您提供了一些速记，因此您不必将所有内容都分配给变量。

返回对象是一种分层功能的方法，因此具有查询方法的 PDO 对象可能会返回一个行对象。行对象有自己的一组方法（例如用于获取列值），因此您可以调用这些方法。

所以：

```
$pdo->queryOneRow(...)->getValue(<some column>) 
```

真的只是简写：

```
$result = $pdo->queryOneRow(...);
$result->getValue(<some column>) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T04:01:00.600

```
$query->function1($arg) ->function2($arg) ->function3($arg); 
```

方法 ：

```
$some_object1 = $query->function1($arg); 
$some_object2 = $some_object2->function2($arg); 
$final_result = $some_object2->function3($arg); 
```

所以你的函数 1 和函数 2 必须返回某个类的对象。

希望有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T03:57:43.257

-> 语法是用于访问类的方法和成员的运算符。当你做这样的事情时：

$someObject -> function1(arg) -> function2(arg) ...您只是进一步访问返回的对象。

假设你有一个类 Bike。这辆自行车有一个名为 SpeedUp(arg) 的方法，它以浮点数作为参数。SpeedUp 方法返回调用该方法的对象（$this 指针）。为了稍微改变一下，我们将添加一个 SlowDown(arg) 方法。

```
class myBike
{
    private function SpeedUp($arg)
    {
        //Do something with $arg, then return "this"...
        return $this;
    }

    private function SlowDown($arg)
    {
        //Do somethign with $arg, then return "this".
        return $this;
    }
}

Bike myBike;
MyBike -> SpeedUp(50.3) -> SpeedUp(40.3) -> SlowDown(30.4); 
```

那么这里发生了什么？首先，参数的存在是无关紧要的。不管你有没有，你的方法仍然可以返回这个对象。

您可以使用这么多 -> 运算符，因为这辆自行车会将自己返回给调用者。因此，当您调用 MyBike -> SpeedUp() 时，这将返回 MyBike，因此在第二次 SpeedUp 调用中，它本质上将是 myBike -> SpeedUp(40.3)，并且由于再次返回同一辆自行车，您可以将其放慢速度同一行。

免责声明：这个例子确实是通用的，但它应该有助于说明问题的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T04:02:40.513

使用面向对象的编程，对象可以有多个实例。这些实例中的属性可以具有不同的值。

例如。

```
class Person {
    public var $name;
    public var $age:

    public function simpleGetter() {
       echo "name : ". $this->name;
       echo "age : ". $this->age;
       return $this;
    }

    public function addAgeByOne($instance = null) {
        return ++$instance->age;
    }
}

$student = new Person();
$student->name = "Student\'s name";
$student->age = 23;

$teacher = new Person();
$teacher->name = "Teacher\'s name";
$teacher->age = 45;

$student->simpleGetter(); // will display the property value from student instance
$teacher->simpleGetter(); // will display the property value from teacher instance

// yes this is chaining, it will first retrieve the results from simpleGetter() and then
// pass on to addAgeByOne
$student->simpleGetter()->addAgeByOne(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T04:54:43.343

这是一个有趣的简单演示：

```
<?php

class ChainMe {

    public function hello() {
        echo 'Hello ';

        return $this;
    }

    public function good($is = false) {
        if ($is === true) {
            echo 'beautiful ';
        }

        return $this;
    }

    public function day() {
        echo "world!\n\n";

        return $this;
    }

}

$happy = new ChainMe();
$happy
    ->hello()
    ->good(true)
    ->day();

$meh = new ChainMe();
$meh->hello()->good()->day();

?> 
```

[http://codepad.org/zlQEMPqK](http://codepad.org/zlQEMPqK)

如果你对 jQuery 很熟悉并且曾经见过类似的东西：

```
jQuery('#my .awesome[selector]')
    .fadeToggle('fast')
    .addClass('rocks')
    .fadeToggle(); 
```

然后你就体验了链接。例如，查看[`jQuery`](https://github.com/jquery/jquery/blob/master/src/core.js#L28)源中变量的定义：

```
// Define a local copy of jQuery
jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
}, 
```

还有[`jQuery.extend`](https://github.com/jquery/jquery/blob/master/src/core.js#L81), [`jQuery.fn`/`jQuery.fn.init`](https://github.com/jquery/jquery/blob/master/src/core.js#L275)[`$`和`window._$`](https://github.com/jquery/jquery/blob/master/src/core.js#L14). _ 您会看到它的许多成员方法返回`this`（或返回另一个方法，该方法又返回`this`）。反过来有。当 jQuery 首次亮相时，那是许多“Javascript”开发人员第一次看到这种模式。需要一些时间来适应。`:)`

在 jQuery 中，在许多情况下，它应该为方法链提供良好的性能提升（例如，在时间很重要的动画队列中）。我不知道PHP中是否是这种情况，但这完全有可能。我更多的是在浏览器中而不是在服务器上，所以我在 PHP 中没有看到太多。但关键是，这是一个需要掌握的权力概念。

# jquery - 使用 $(window).resize() 存储 jQuery 代码以供以后使用

> ID：12540523
> 
> 赞同：2
> 
> 时间：2012-09-22T03:50:02.787
> 
> 标签：jquery

我有一个 jQuery 内容滑块，其中每张幻灯片都是屏幕的全宽。我正在计算每张幻灯片应该在 jQuery 中的宽度 - 而不是 CSS（我有这样做的理由 - 我不会打扰你用它们）。正如您从下面的代码中看到的那样，我计算了所有尺寸两次 - 第二次是当用户调整窗口大小时。我只是想知道我是否可以存储代码，然后在 $(window).resize(); 中调用它 ? 这应该有一个简单的答案，但目前它正在躲避我！

```
var windowHeight = $(window).height(); //Get the height of the window
var windowWidth = $(window).width(); //Get the width of the window
$(".slide").css("width",windowWidth + "px").css("height",windowHeight + "px"); //Make each slide’s dimensions equal to that of the window

$(".slide").each(function(i, e) {
    //Execute animation
    $("#trigger" + i).click(function(e) {
        $(".slideContainer").stop(true, false).animate({top:-windowHeight * rowIndex + "px" ,left:-windowWidth * slideIndex + "px"},900,'easeInOutExpo'); //The variables here that I use to animate the slide are unimportant to my question. I’ve removed the vars so this code is easier to read.
    });
});

//Resize
$(window).resize(function() {
    var windowHeight = $(window).height(); 
    var windowWidth = $(window).width();
    $(".slide").css("width",windowWidth + "px").css("height",windowHeight + "px");

    $(".slide").each(function(i, e) {
        $("#trigger" + i).click(function(e) {
            $(".slideContainer").stop(true, false).animate({top:-windowHeight * rowIndex + "px" ,left:-windowWidth * slideIndex + "px"},900,'easeInOutExpo');
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:56:33.990

```
function adjustSize(){
    var windowHeight = $(window).height(); //Get the height of the window
    var windowWidth = $(window).width(); //Get the width of the window
    $(".slide").css("width",windowWidth + "px").css("height",windowHeight + "px"); //Make each slide’s dimensions equal to that of the window

    $(".slide").each(function(i, e) {
        //Execute animation
        $("#trigger" + i).click(function(e) {
            $(".slideContainer").stop(true, false).animate({top:-windowHeight * rowIndex + "px" ,left:-windowWidth * slideIndex + "px"},900,'easeInOutExpo'); //The variables here that I use to animate the slide are unimportant to my question. I’ve removed the vars so this code is easier to read.
        });
    });
}
$(window).resize(adjustSize);
adjustSize();  //or $(window).resize(adjustSize).resize(), it works too 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:58:51.957

我认为这是您真正需要的（并且应该可以）：

```
$(function() {
    var $window = $(window),
        windowHeight, 
        windowWidth;
    $(".slide").each(function(i, e) {
        $("#trigger" + i).on("click", function(e) {
            $(".slideContainer")
                .stop(true, false)
                .animate({top:-windowHeight * rowIndex + "px" ,left:-windowWidth * slideIndex + "px"},900,'easeInOutExpo'); 
        });
    });
    function adjustSize(){
        windowHeight = $window.height();
        windowWidth = $window.width();
        //Make each slide’s dimensions equal to that of the window
        $(".slide").css({ width: windowWidth, height: windowHeight });
    }

    $window.resize(adjustSize);
    adjustSize();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T04:20:11.433

解决方案是创建一个函数并在初始化期间调用它一次，然后在窗口调整大小时调用它。

```
$(document).ready(function() {
    //don't need to attach the click handlers everytime... just do it once
    $(".slide").each(function(i, e) {
        //Execute animation
        $("#trigger" + i).click(function(e) {
            $(".slideContainer").stop(true, false).animate({top:-windowHeight * rowIndex + "px" ,left:-windowWidth * slideIndex + "px"},900,'easeInOutExpo'); 
         });
     });

     adjustSize();
})

$(window).resize(adjustSize);

function adjustSize(){
    var windowHeight = $(window).height(); //Get the height of the window
    var windowWidth = $(window).width(); //Get the width of the window
    $(".slide").css("width",windowWidth + "px").css("height",windowHeight + "px"); //Make each slide’s dimensions equal to that of the window
} 
```

# c++ - C++ 列表迭代器 reverse_iterator

> ID：12540527
> 
> 赞同：2
> 
> 时间：2012-09-22T03:50:29.620
> 
> 标签：c++, stdlist

> **可能重复：**
> [为什么 std::list 上的 push_back 会更改用 rbegin 初始化的反向迭代器？](https://stackoverflow.com/questions/10085570/why-does-a-push-back-on-an-stdlist-change-a-reverse-iterator-initialized-with)

我得到一段代码如下：

```
#include <iostream>
#include <list>

int main(){
    std::list<int> l;
    l.push_back(1);
    l.push_back(2);
    std::list<int>::iterator it = l.begin();
    std::cout << *it << std::endl; // 1
    l.push_front(0);
    std::cout << *it << std::endl; // 1
    std::list<int>::reverse_iterator rit = l.rbegin();
    std::cout << *rit << std::endl; // 2
    l.push_back(3);
    std::cout << *rit << std::endl; // 3
} 
```

输出：

```
1
1
2
3 
```

看起来在我定义了前向迭代器之后`it`，如果我调用WILL NOT`push_front()`的位置。`it`但是，在我定义 reverse_iterator 之后`rit`，如果我调用`push_back()`，`rit`WILL 的位置会改变。

这应该被视为不一致吗？对我来说，其中一个移动而另一个保持不变对我来说真的没有任何意义。

提前致谢。:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T06:59:23.020

`std::list`不会使迭代器无效。正如您在常规迭代器中看到的那样，`std::list`即使在列表被修改后，迭代器也指向同一个元素。

另一方面，反向迭代器被实现为`std::reverse_iterator<iterator>`，根据[C++ STL 文档](http://www.cplusplus.com/reference/std/iterator/reverse_iterator/)，它维护一个迭代器，该迭代器指向迭代器返回的元素*之前*的元素，在这种情况下，它是列表的末尾。

# iphone - XCode 4.5 (4G182) + iPhone 5 iOS6 - 选择具有受支持架构的目标以便在此设备上运行

> ID：12540534
> 
> 赞同：29
> 
> 时间：2012-09-22T03:52:37.287
> 
> 标签：iphone, xcode, ios6, iphone-5, xcode4.5

所以我昨晚使用 XCode 4.5 为 iOS6 创建了一个全新的应用程序。我可以在装有 iOS6 的 iPhone 4 上正常开发。

今天我得到了带有 iOS6 的新 iPhone 5，在使用新设备 UUID 更新证书后，我尝试在其上运行我的应用程序并收到此错误：

> XCode 无法使用所选设备运行。选择具有受支持架构的目标，以便在此设备上运行。

![](../Images/a00082a9d163972e618dc55ec68b0c6c.png)

我已启用该设备进行开发。armv7 和 armv7s 都在设置中。

我已经包含了来自 Facebook 3.0 SDK 的源代码和链接器标志“-lsqlite3.0”。我猜这个问题必须是相关的，但无法弄清楚出了什么问题。

任何想法如何解决它？

PS：在模拟器上运行应用程序时也会发生此问题。不知道昨晚到今天我的项目或 XCode 发生了什么变化，除了我有一个新设备和新证书。

> 所选目标不支持构建所选软件的体系结构。切换到支持该架构的目的地以运行所选软件。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-12-03T18:18:28.823

您还需要在中选择编译器 LLVM

**项目 --> 构建设置 --> 构建选项**

![在此处输入图像描述](../Images/a197a419d5f7161c96f1aed3c38f4d80.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-12-27T09:24:39.973

我**在 XCode 5.0 上运行 OLD 项目**时发现了同样的问题，**我的解决方案**是：

您需要执行以下步骤才能解决此问题：

**1.**设置**有效架构**​​：armv7,armv7s

**2.在****Project ---> Build Settings ---> Build Options**中设置**编译器** 为LLVM 。 **![见下图](../Images/ad10625c6e1dc172ec3960c84e610dc5.png)**

 ****3.**正确设置**Base 和 Deployment sdk**。

**这是我的解决方案。很高兴能帮助你。**

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-22T04:15:45.087

您需要在 Target 的 Build Settings 下将 armv7 添加到您的有效架构中。

![更改有效架构](../Images/eb4922b7c011958ba5d6d1bf1a04bfae.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-02-26T09:12:50.933

您`src/Framework/Resources/Info.plist`在将 Facebook SDK 文件添加到项目时包含。只需将其从您的项目中删除，一切都会再次运行。保证！:)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-07T13:50:15.120

我已经使用以下步骤解决了这个问题。

1.  关闭 Xcode
2.  从设备中删除应用程序
3.  重启设备
4.  然后重新运行应用程序

它工作正常..

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-09-16T14:48:34.420

确保包名称（在 plist 文件中）与项目名称相同。我改变了它并且它起作用了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-20T01:56:59.603

我的第 3 方库之一无法在**armv7s**上运行，因此我删除了该选项。我还删除了**armv6**并将**armv7**作为唯一选择。**它仅使用armv7**在手机上构建和运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-04T04:55:05.007

我遇到了这个问题，因为`Build settings-> Complier for C/C++/Objective c`设置错误。

所以我把它改成可用的**默认编译器**，它起作用了！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-05T12:41:24.663

我已经使用以下步骤解决了这个问题。

关闭 Xcode 从设备中删除应用程序 重新启动设备，然后重新运行应用程序，它工作正常..

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-14T07:37:49.863

只需要在里面选择编译器LLVM

目标 --> 构建设置 --> 构建选项

![我们只需要将不支持的编译器更改为默认编译器:)](../Images/23eb3acee7ae1147ae6ba028e9a4faa4.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-05-14T11:12:02.863

我遇到了同样的问题。当我检查编译器时，它显示编译器不兼容。你需要使它有效。要设置有效的编译器，请按照以下步骤操作

选择你的

> 项目---->构建设置-->

在搜索栏类型编译器和搜索现在您可以在构建选项下找到构建选项，您会发现**c/c++/objective c 的编译器**将其设置为有效的。![在此处输入图像描述](../Images/ca013667ed73cdac5450ab74a4865304.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-05T15:57:17.273

好的，不确定这是否是您项目中的问题。但是为我解决的问题是更改 Info.plist 文件的名称。

1.  我将名称从 Info.plist 更改为 my-project-info.plist
2.  还可以在 target-build-settings/Packaging/Info.plist 下更改它
3.  比从设备/模拟器中删除应用程序并通过 Xcode 重新运行应用程序

就我而言，从那以后一切都很好。在我的案例**中，plist 文件中的规范或有效的架构没有任何问题**。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-22T05:10:27.020

所以基本上我创建了一个新项目，复制了所有源代码，一切似乎都运行良好。至少应用程序运行。

我不确定是哪个设置导致了问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-11-22T00:19:22.133

我遇到了为 iOS 4.x 构建的数据库不足的问题，我正在为支持 iPhone 5 的 iOS 6 构建一个新应用程序。我收到了这个错误，我解决它的唯一方法是让 armv7 成为我的项目和目标构建设置中列出的唯一架构和有效架构。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-07-04T06:36:40.017

删除 info.plist 参考。然后将 info.plist 重新拖到 proj 但不要复制到“target”

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-13T05:56:13.070

当您的项目在 xcode 4.5 中构建并且您尝试在 xcode 5.0 中运行时，有时会发生这种情况。所以就我而言，我找到了解决方案。

更改 C/C++/ObjectiveC 的编译器转到构建

> Settings->Build OPtions->compiler for C/C++/ObjectiveC；选择默认（Apple LLVM5.0）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-08-05T10:32:26.027

您只需转到 Build setting Then valid architecture Replace armv7 armv7s 而不是 armv7 。然后它会正常工作。**

# c - 从数据文件中查找最小值和最大值

> ID：12540535
> 
> 赞同：1
> 
> 时间：2012-09-22T03:52:40.213
> 
> 标签：c, input, max, min

我正在尝试编写一个简单的程序，它从数据文件中读取整数并输出最小值和最大值。输入文件的第一个整数将指示将读取多少个整数，然后将列出整数。

示例输入文件：

5 100 -25 42235 7 -1

就这么简单，我不知道从哪里开始。我想我需要创建一个大小 = 第一个整数的数组，然后增加我在数组中的位置并与最小值/最大值进行比较。

我不确定用第一个整数声明数组的语法是什么，然后用剩余的整数填充数组，或者这是否是正确的方法。创建数组后，我应该没有问题将值分配给最小/最大变量，并通过数组增加位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T03:57:12.507

你不需要数组。只需跟踪当前的最小值和最大值（它们从您读取的第一个数字开始）。读完每个数字后，如果低于最小值，则成为新的最小值，如果高于最大值，则成为最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:18:10.353

无需使用数组来存储数据。您只需要从从文件接收的数据中找出最小值和最大值。

```
long lMin = 0, lMax = 0;
int nCount;
long lNo;
// open file
fscanf( file, "%d", &nCount );
for( int i = 0; i < nCount; i++ )
{
   fscanf( file, "%ld", &lNo );
   if( lNo > lMax )
       lMax = lNo;
   if( lNo < lMin )
       lMin = lNo;
}
printf(" Min = %ld Max = %ld\n", lMin, lMax );
// close file 
```

# php - 如果端口不是 80，.htaccess 重定向到错误页面

> ID：12540539
> 
> 赞同：3
> 
> 时间：2012-09-22T03:53:14.767
> 
> 标签：php, wordpress, apache, .htaccess, port

我正在通过 USB 棒运行[便携式服务器。](http://www.server2go-web.de/)问题是我的本地机器上也安装了 WAMP，Apache 不知何故在 Windows 启动时启动，因为一些我现在不记得并且无法更改的随机原因。我想在这种情况下**准备**我的便携式服务器，因此从进程中关闭 httpd.exe 并启动我的便携式服务器不是一种选择。无论如何，由于 httpd.exe 已经处于活动状态，我的便携式服务器的 WordPress 站点只能通过 localhost:81 访问 - 这是一个问题，因为 WP 站点非常依赖于 URL，我不想在 WP 上包含带有端口的 url数据库。

这是我想通过 .htaccess 做的事情：

*   在除 error.php 文件之外的任何路径上检查是否不是端口 80
*   如果不是端口 80 重定向到 /error.php?code=port

它有可能优先于 WP 重定向或 URL 处理吗？

在 error.php 中，我提供了有关如何手动关闭 httpd.exe 等信息，以便我的家人和朋友可以访问便携式站点。它有点像一个画廊和日历应用程序，用于事件和其他类似的东西......

请帮忙？我根本想不通。我知道其他人可能还没有运行 apache，但我想为这种情况做准备。

类似于以下内容，但以下内容不起作用。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
    <If "%{SERVER_PORT} = 80">
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
    </If>
    <Else>
    RewriteEngine On
    RewriteRule ^(error.php)($|/) - [L]
    RewriteRule ^(.*)$ /error.php?code=port [L]
    </Else>
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:57:35.183

```
#  <If "%{SERVER_PORT} = 80">
RewriteEngine On
RewriteBase /
RewriteCond  %{SERVER_PORT} ^80$ 
RewriteRule ^index\.php$ - [L]
RewriteCond  %{SERVER_PORT} ^80$ 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
#</If>
#<Else>
RewriteEngine On
RewriteCond  %{SERVER_PORT} !^80$ 
RewriteRule ^(error.php)($|/) - [L]
RewriteCond  %{SERVER_PORT} !^80$ 
RewriteRule ^(.*)$ /error.php?code=port [L]
#</Else> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:00:21.003

你可以试试这个 apache 配置

```
RewriteEngine on 
RewriteCond  %{SERVER_PORT} !^80$ 
RewriteRule ^(.*) http://%{SERVER_NAME}:80%{REQUEST_URI} 

RewriteCond  %{SERVER_PORT} ^80$ 
RewriteRule .* http://example.com/index.php [L] 
```

第 1 段如果不是 80 则重定向

第二个只是您可以尝试的替代方法，如果您只想匹配 80

有关重写的更多信息， [http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T04:12:19.843

[VirtualHosts](https://httpd.apache.org/docs/2.2/vhosts/name-based.html)是您正在寻找的。

一个关于如何实现`http://wplocal/` **或** `http://wp.local/`指向`/var/www/wp`AND`http://localhost/` **或** `http://http.local`指向的小例子`/another/root/path`。

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerAdmin wp@you.com
    DocumentRoot "/var/www/wp"
    ServerName wplocal
    ServerAlias wp.local
    ErrorLog "/somepath/here"
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin you@you.com
    DocumentRoot "/another/root/path"
    ServerName localhost
    ServerAlias http.local
    ErrorLog "/logs/path"
</VirtualHost> 
```

看到[这个](http://www.thegeekstuff.com/2011/07/apache-virtual-host/)解释这些东西的酷图片。

希望有帮助。

# php - 致命错误：调用成员函数 get_row()

> ID：12540540
> 
> 赞同：-1
> 
> 时间：2012-09-22T03:54:09.803
> 
> 标签：php

我正在为管理员登录工作，请任何人解决这个问题..

`Email: <?php echo $admin->get_email(); ?>`

```
Fatal error: Call to a member function get_row() on a non-object in D:\MyWebSite\business_design\admin\admin-class.php on line 82 
```

编码：

```
public function get_email() {
        $username = $_SESSION['admin_login'];
        global $db;
        $info = $db->get_row("SELECT `email` FROM `user` WHERE `username` = '" . $db->escape($username) . "'");
        if(is_object($info))
            return $info->email;
        else
            return '';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T04:07:24.773

好的，你在使用框架吗？您的`$db`变量未实例化，因此当您调用时`$db->get_row`：

1.  PHP 找不到`$db`对象；所以，
2.  `get_row()`不能存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:37:37.137

首先，确保您知道 $db 应该指代哪个类。同一个类将具有函数“get_row”

首先，您必须将该类文件包含在您的 php 脚本文件中。这可以通过以下脚本轻松完成 -

```
function __autoload($class_name){
    require_once("RELATIVE_ADDRESS_OF_THE_CLASS".$class_name.".php");
} 
```

比如说你有你的类是数据库，所以你应该首先实例化 $db 如下 -

```
$db = new Database(); 
```

稍后，如果所有脚本在“数据库”类中正常工作，它应该可以立即工作......

希望能帮助到你..

# rally - 获取子对象的值

> ID：12540542
> 
> 赞同：1
> 
> 时间：2012-09-22T03:54:32.107
> 
> 标签：rally

我正在尝试使用以下查询获取测试用例结果的值

```
queryConfig[0] = {
      type : 'testcase', 
      key : 'tc',
      query: '(Tags.Name contains OS_Windows)', 
      fetch: 'Name,Results'
     }; 
```

但是，返回的数据包含一个空的结果对象。我正在尝试获取结果中构建的值。“fetch : Results.Build”在 fetch 中返回无效字符。

如何获取 Results 对象的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:00:53.520

您可以通过仅包含您希望在任何级别返回的所有字段来获取子字段。因此，在您的情况下，名称、结果、构建将起作用。即使 TestCase 没有 Build 属性，它也会在 Results 子对象上正确返回。

Fetch 对所有对象类型都以这种方式工作。

# config - 阻止无效的referer

> ID：12540543
> 
> 赞同：0
> 
> 时间：2012-09-22T03:54:44.917
> 
> 标签：config, lighttpd, ddos

最近我的网站受到一些人的攻击，他们的机器人发送垃圾 HT​​TP 请求，一切基本上都是随机的胡言乱语，无法以任何有意义的方式过滤（没有一些非常认真的工作），但我发现的一个不一致之处在于他们引用字符串。

```
[22/Sep/2012:03:27:50 +0000] "GET /vb/ HTTP/1.0" 403 345 "1mc9py1amv.net" "Mozilla/3.0 (compatible; NetPositive/2.2)" 
```

如您所见，他们的 ref 没有协议。有什么方法可以阻止没有协议的引用，同时仍然允许空白（无）引用的东西进入网站？

像，如果它包含“http”或“https”或者是空白的，它会允许，但其他一切都被拒绝？

我尝试了类似的东西

```
$HTTP["referer"] !~ "(http://.*|-)" {
    url.access-deny =  ( "" )
} 
```

但是那禁止空白参考并且不允许https。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:11:49.590

```
 $HTTP["referer"] !~ "^($|https://.*|http://.*)" {
            url.access-deny =  ( "" )
    } 
```

这成功了。如果您遇到类似的事情，这将非常有用。

# jquery - 失去焦点 - 输入不是自动填充

> ID：12540557
> 
> 赞同：0
> 
> 时间：2012-09-22T03:57:47.313
> 
> 标签：jquery

所以我有一个多部分的表格，应该自动填写另一个输入。我已经使用模糊来识别输入何时失去焦点，但我无法让它用失去焦点的输入值自动填充另一个输入。我所拥有的对我来说看起来很简单和合乎逻辑，根本行不通。

任何帮助表示赞赏。

```
 company_name.blur(function(){
        $('#dba').val(company_name.val());
    }); 
```

**更新**

看来，这样做的目的不仅仅是吸引眼球。我下面的简单答案应该是正确的，我想我的代码是正确的，而其他东西正在做肮脏的工作。

***我无法让代码荧光笔与我的代码很好地配合使用，所以我将它放在一个文本文件中供您查看。再次感谢！***

[http://www.codewithphp.com/form.txt](http://www.codewithphp.com/form.txt)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:08:18.687

设置成什么`company_name`？以下对我有用！

HTML

```
<div>Type something here:<input name="editMe" type="text" /></div>

<div>Populates here:<input name="target" type="text" /></div> 
```

jQuery

```
$(document).ready(function() {
    $("input[name=editMe]").blur(function() {
        $("input[name=target]").val($(this).val());
    });
}); 
```

[jsFiddle](http://jsfiddle.net/MtUKa/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:28:41.757

所以，在检查了发生了什么之后。我的原始代码已更改为

```
 $('#company_name').blur(function(){
        $('#dba').val($(this).val());
    }); 
```

并在点击功能之外移动。

它没有感觉的原因是因为在 click 函数内部它没有迭代返回到表单以查看它是否“模糊”..

更好的是，我可以简单地用 company_name.val 填充#dba val 并失去模糊功能。

# python - Google App Engine Jinja2 - 模板未更新

> ID：12540558
> 
> 赞同：0
> 
> 时间：2012-09-22T03:57:48.973
> 
> 标签：python, google-app-engine, jinja2

我的模板没有在 Google App Engine Dev Python Server 中更新时遇到问题。如果我让服务器运行一段时间，我的模板在更改后不会在浏览器中更新。我最好的猜测是 jinja2 以某种方式缓存这些模板？

我正在使用以下代码呈现我的模板：

```
_jinja_environment = jinja2.Environment(
    loader = jinja2.FileSystemLoader(root_dir))

def write_template(self, template_name, template_data = {}):
    template = _jinja_environment.get_template(template_name)
    self.response.out.write(template.render(template_data)) 
```

我尝试重新启动我的应用引擎应用程序，以及取消部署和重新部署，但模板仍然没有更新。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:49:38.460

您是否尝试过以下任何一种方法

1.  清除浏览器缓存，
2.  重命名模板目录，
3.  更改版本

他们都无法解决它，然后我不知道是什么导致了问题。

[这](https://stackoverflow.com/questions/2783082/css-file-not-updating-on-deploy-google-appengine)是一个类似的问题，尽管问题发生在部署之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:35:29.487

尝试以下操作：

*   转到管理控制台。在本地机器上是：“http://localhost:8080/_ah/admin/datastore”

*   选择适当的实体类型，然后单击`List Entities`

*   点击`Flush Memcache`

然后尝试重新加载应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:02:37.253

我刚刚遇到了同样的问题。我有一个 .py 文件和一个 .html 文件。我试图编辑一个文本区域以在其中输出一些文本，但它没有在浏览器中正确刷新。仍然显示旧的 HTML 文件。在我重新启动应用程序引擎后，它工作得很好。

所以我又做了一次，仍然是同样的问题。但是，如果您编辑 .py 文件并保存它，HTML 文件会重新加载到应用引擎中。我不知道为什么，但我认为删除一个字符并撤消它+保存比总是重新启动整个应用程序要快。

也许它有帮助！

# spring - 如何从我的本地选择xml到服务器

> ID：12540561
> 
> 赞同：0
> 
> 时间：2012-09-22T03:58:32.700
> 
> 标签：spring, spring-integration

我正在使用 spring 集成，并且我还开发了一个示例应用程序，但我的查询是我有一个要附加的 xml 文件，我希望这个 xml 文件位于我的系统中名为 abc 的文件夹中，这个 xml 文件的名称是 df.xml 请告知如何制作一个 Spring 集成程序，该程序将选择此 xml 文件并将其保存在服务器上的位置 /var/data ，请就此提出建议

df.xml 的内容是

```
<?xml version="1.0" encoding="UTF-8"?>
<FILE xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" changeId="1" batchNo="Loyalty_TestData">
  <TRANSACTION transactionNo="1">
    <LOYALTY docNo="1">
      <CRUD>P</CRUD>
      <SCHEME_CODE>EMPLOYEE</SCHEME_CODE>
      <SCHEME_NAME>EMPLOYEE DISCOUNT</SCHEME_NAME>
      <SCHEME_TYPE>37002</SCHEME_TYPE>
      <REWARD_TYPE>40002</REWARD_TYPE>
      <REWARD_BY_LINE>1</REWARD_BY_LINE>
      <VALID_ATTEMPTS>3</VALID_ATTEMPTS>
      <LEGAL_TENDER>USD</LEGAL_TENDER>
      <DEC_PLC_SCHEME>0</DEC_PLC_SCHEME>
      <DEC_PLC_ALLOC>0</DEC_PLC_ALLOC>
      <LOG_TXNHEADER>0</LOG_TXNHEADER>
      <LOG_TXNLOYALTY>0</LOG_TXNLOYALTY>
      <LOG_TXNPOINTS>0</LOG_TXNPOINTS>
      <LOG_TXNDETAIL>0</LOG_TXNDETAIL>
      <LOG_TXNDTLLTY>0</LOG_TXNDTLLTY>
      <PARAMETERS> </PARAMETERS>
    </LOYALTY>
  </TRANSACTION>
</FILE> 
```

想到应该有缓冲通道，并且从该缓冲通道中，出站适配器将选择该xml并将其保留在队列中，但从队列中我必须将它放在上面提到的位置的服务器上，请告知如何实现那..！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:34:42.553

我认为您在问题中提供了太多信息。提供 IP 地址、用户名和密码不是一个好主意，周围有一些聪明的人可能会觉得这很有趣！

另外我怀疑你的问题实际上是关于文件传输的，特别是你如何从你的 PC 和 unix 机器上获取文件。我建议你看看 ftp 和 sftp，你可以使用命令行工具来做到这一点，或者有很多 GUI 应用程序。如果您感觉特别懒惰并且在 unix 机器上打开了一个控制台，您甚至可以剪切和粘贴，但不建议这样做（不过我会这样做；）

# python - 将从 JSON 获取的 Python 字典写入文件

> ID：12540564
> 
> 赞同：2
> 
> 时间：2012-09-22T04:00:19.417
> 
> 标签：python, json

我有这个脚本，它从网页中抽象出 json 对象。json 对象被转换成字典。现在我需要将这些字典写在一个文件中。这是我的代码：

```
#!/usr/bin/python

import requests

r = requests.get('https://github.com/timeline.json')
for item in r.json or []:
    print item['repository']['name'] 
```

一个文件有十行。我需要在包含十行的文件中编写字典。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T06:00:31.293

要解决原始问题，例如：

```
with open("pathtomyfile", "w") as f:
    for item in r.json or []:
        try:
            f.write(item['repository']['name'] + "\n")
        except KeyError:  # you might have to adjust what you are writing accordingly
            pass  # or sth .. 
```

请注意，并非每个项目都是存储库，还有要点事件（等？）。

更好的是，将 json 保存到文件中。

```
#!/usr/bin/python
import json
import requests

r = requests.get('https://github.com/timeline.json')

with open("yourfilepath.json", "w") as f:
    f.write(json.dumps(r.json)) 
```

然后，您可以打开它：

```
with open("yourfilepath.json", "r") as f:
    obj = json.loads(f.read()) 
```

# database - ORM 自动捕获数据库中的实时更新

> ID：12540566
> 
> 赞同：-1
> 
> 时间：2012-09-22T04:00:56.310
> 
> 标签：database, jakarta-ee, caching, orm, real-time

我们有一个基于 Java 的 Web 应用程序来显示最近一小时内开始的作业的状态更新。作业状态信息由 MS SQL server 2008 维护。我们需要在数据库中捕获添加到作业状态的新更改，并更新 Web 应用程序服务器中的模型对象缓存。我们通过定期查询数据库并查找作业状态的差异来捕获新的更新。有没有更好的方法来捕获数据库中的新更新？是否有任何 ORM 工具可用于缓存和更新这种实时数据更新？请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:19:51.613

不，这不是 ORM 的工作。

不幸的是，Java 没有 .NET 的响应式扩展 (Rx) 的等价物。

但是，您可以通过在 Web 应用程序中创建作业可以与之通信的接口（服务）来应用这些原则。但在大多数情况下，这些好处不值得为实施它付出代价。

# ruby-on-rails - 从 Rails 视图将 ERB 渲染为 HTML 和 ERB

> ID：12540572
> 
> 赞同：1
> 
> 时间：2012-09-22T04:01:59.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, erb

我正在制作一个样式指南，我在其中输出左侧显示的右侧代码。

我知道添加 %% 转义 ERB

我编写了一个助手，它获取块的内容并在两个地方呈现代码，一个显示 html，我希望另一个显示创建 html 的源 ERB。

问题是我得到了我想要 ERB 的 HTML。

**查看代码**

```
<%= display_code do %>
  <%= link_to "Button", "/style_guide, class: "btn" %>
<% end %> 
```

**助手代码**

```
module StyleGuideHelper
  def display_code(&block)
    content = with_output_buffer(&block)
    html = ""
    html << content_tag(:div, content, class: "rendered-code")
    html << content_tag(:div, escape_erb(content), class: "source-code-preview")
    html.html_safe
  end

  def escape_erb(code)
    code = code.gsub("%=", "%%=")
  end
end 
```

**预期结果** 按钮 <%= link_to "Button", "/style_guide, class: "btn" %>

**实际结果** 按钮 按钮

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:29:48.650

问题是这个助手运行块（`link_to "Button", ...`）——它从不看到块内的源代码，只看到它的输出。您可以替换`escape_erb`为`h`以捕获生成的 HTML，但这不会弹出到生成它的 ERB。

在我看来，您的选择是：

1.  将示例分解为部分，然后创建一个助手，a) 呈现部分并 b) 显示基础文件。
2.  将您的 ERB 片段指定为字符串（heredocs？），将字符串传递给帮助程序，并让帮助程序 a）通过评估它`ERB.new(string).result(binding)`以呈现结果并 b）显示字符串。
3.  让助手确定视图的哪个部分调用了它，然后解析 .erb 以找到该块。需要注意的是，由于视图的编译方式，您所看到的内容的精确格式`callers`如有更改，恕不另行通知。
4.  制作一个助手，使用疯狂的元编程 juju 来评估 ERB 上下文以及您自己的特殊上下文中的块，该上下文拦截正在评估的代码并将其转换回标记。

...按复杂性和成功几率的大致顺序排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T14:53:16.163

下面的代码将允许您检索给定块的代码。

```
class ERBSource
  ERB = ::ActionView::Template::Handlers::ERB

  def self.for(block)
    new(block).source
  end

  attr_reader :block, :file, :line_number
  def initialize(block)
    @block = block
    @file, @line_number = *block.source_location
  end

  def source
    lines = File.readlines(file)

    relevant_lines = lines[(line_number - 1)..-1] || []

    extract_first_expression(relevant_lines)
  end

  private

  def extract_first_expression(lines)
    code = lines.slice[0,1].join # add the first two lines so it has to iterate less

    lines.each do |line|
      code << line
      return code if correct_syntax?(compile_erb(code))
    end
    raise SyntaxError, "unexpected $end"
  end

  def correct_syntax?(code)
    stderr = $stderr
    $stderr.reopen(IO::NULL)
    RubyVM::InstructionSequence.compile(code)
    $stderr.reopen(stderr)
    true
  rescue Exception
    $stderr.reopen(stderr)
    false
  end

  def compile_erb(code)
    ERB.erb_implementation.new(
      code,
      :escape => false,
      :trim => (ERB.erb_trim_mode == "-")
    ).src
  end
end 
```

这是助手的样子

```
module StyleGuideHelper
  def render_example(name, &block)
    code = ERBSource.for(block)
    content_tag(:h2, name) +
      content_tag(:div, &block) +
      content_tag(:pre, content_tag(:code, code))
  end
end 
```

# xpages - 方法绑定错误

> ID：12540574
> 
> 赞同：0
> 
> 时间：2012-09-22T04:02:22.033
> 
> 标签：xpages

我想通过方法绑定从自定义控件传递 SSJS 代码。以下是此示例的操作按钮背后的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xc="http://www.ibm.com/xsp/custom">
<xc:ccSSJS>
      <xc:this.ssjsCode>
         <![CDATA[#{javascript:
            var app = facesContext.getApplication();
            app.createMethodBinding("#{javascript:var control = getComponent('viewPanel1');print(typeof control);}", null); 
         }]]>
      </xc:this.ssjsCode>
   </xc:ccSSJS>
</xp:view> 
```

但是我得到脚本解释器错误，为什么我不能调用 getComponent 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:10:45.163

解释为什么有点复杂......解决方法是使用*FacesUtil*类的*getComponentFor*方法：

 *```
com.ibm.xsp.util.FacesUtil.getComponentFor(view,'viewPanel1') 
```*

# html - 使用“AddThis”类型脚本与手动添加每个社交按钮

> ID：12540575
> 
> 赞同：1
> 
> 时间：2012-09-22T04:02:26.713
> 
> 标签：html, css, facebook, twitter, social

所以我必须创建大约 100 个页面，在每篇文章的顶部都有 twitter、facebook 和 google+ 赞。有趣的是，我已经阅读了几本关于社交媒体营销的书籍，但这是我第一次实际实施它。

因此，访问每个 twitter、facebook 和 google+ 帐户并获取每个自定义代码需要很长时间。然后是设置样式并确保它们对齐以及所有内容的问题（尽管在 CSS 中可能不会花费超过一分钟）。

我的问题是，手动放入按钮是否值得麻烦？我实际上并不了解like按钮是如何工作的。我不需要他们的特定代码来链接到我的网站吗？或者任何带有我的 URL 的通用 javascript 代码都可以解决问题？我注意到有一个警告说 AddMe 按钮在 IE6 或更低版本中不起作用。是否有任何其他问题，例如我应该考虑的速度？

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:12:03.760

使用 addthis 之类的插件，您将在登录 addthis 帐户时获得特定的统计信息（如果您有的话）。只需执行一次就很容易实现，它会添加一个 javascript 为您完成几乎所有工作。

如果您正在动态创建页面（例如通过 PHP），您可以包含 facebook / twitter/ google + 嵌入代码的基础并简单地添加您自己的 URL。通常，如果你比较 2 facebook like embed code，只有 URL 会改变。推特也是如此。

但是，如果您的页面是静态的，那么手动输入 100 个社交嵌入将非常耗时。添加这可能是一个更好的方法。

至于速度，我真的无法回答那部分。我猜 Addthis 会稍微慢一些，因为他们必须考虑所有的可能性。

# mysql - 为什么这个查询不起作用？结合拥有和在哪里

> ID：12540578
> 
> 赞同：1
> 
> 时间：2012-09-22T04:03:11.963
> 
> 标签：mysql, phpmyadmin

```
SELECT fileUser FROM `images` 
HAVING min(imageid) AND 
WHERE (finished=0 and processing=0) 
```

`fileUser`获得最少完成的索引和处理 = 0 的索引似乎是一件简单的事情。`imageID`但是，我似乎无法提出一个有效的查询？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:05:45.457

如果你的问题与你[之前的问题有关](https://stackoverflow.com/questions/12524784/finding-the-min-in-a-column-where-two-other-columns-are-zero)，那么你可以试试这个：

```
SELECT fileUser FROM `images`
WHERE imageid = (SELECT min(imageid) 
                 FROM `images` 
                WHERE finished=0 
                  AND processing=0) 
```

### 请参阅[此 SQLFiddle 演示](http://sqlfiddle.com/#!2/188ec/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:08:26.363

另一种方法是

```
SELECT fileUser 
FROM `images` 
WHERE finished=0 
AND processing=0
ORDER BY imageid
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T04:08:20.933

我认为他实际上想要这个

```
SELECT fileUser FROM `images`
WHERE imageid = (SELECT min(imageid) FROM `images` WHERE (finished=0 and processing=0)) 
```

# java - 等待 Java 进程的回答？

> ID：12540579
> 
> 赞同：2
> 
> 时间：2012-09-22T04:03:14.543
> 
> 标签：java, process

我正在尝试从 Java 调用命令行应用程序（让我们称之为`SomeTerminalApp`），更准确地说，应该发生以下情况。

1.  Java 启动 SomeTerminalApp
2.  SomeTerminalApp 要求 Java 提供的用户输入
3.  SomeTerminalApp 处理输入，一段时间后显示输出并询问新的用户输入。
4.  Java 检测到这一点，处理 SomeTerminalApp 的输出并插入新的用户输入，可能基于先前的输出。
5.  步骤 3-4 重复任意次数（直到满足 Java 中的停止条件，具体取决于输出）
6.  我们完成了：Java 关闭了 SomeTerminalApp 并再次处理自己的事情。

我应该如何最好地做到这一点？目前，我得到了非常幼稚的流程处理

```
Process p = Runtime.getRuntime().exec("/path/SomeTerminalApp -q"); //run in quiet mode
BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(p.getOutputStream())); 
```

具有插入输入并立即读取固定数量的输出行的功能。

```
public ArrayList<String> exec (ArrayList<String> input, int nrOfOutputLines) {
    for (int i=0; i<input.size(); i++) bw.write(input.get(i)+"\n");
    bw.flush();
    ArrayList<String> output = new ArrayList<String>();
    for (int i=0; i<nrOfOutputLines; i++) output.add(br.readLine());
    return output;
} 
```

唉，我经常不知道我必须阅读多少行（因为输出是未知的并且会自动分成多行），而且输出也不会立即出现（可能需要几毫秒到几天才能出现输出）。

*我应该如何正确处理这样的过程，即**听**进程何时完成处理（不仅仅是放置一个固定计时器或没有计时器）并读取**所有**产生的输出作为对最新命令的响应（不仅仅是最后 N 行一个固定的数字 N)？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:15:24.340

你有正确的想法。没有简单的方法可以知道子流程何时完成。它要么必须在空闲（“完成”或其他东西）之前打印可识别为它的最后一个动作的东西，要么它需要退出（你可以在输入中检测为 EOF）。

# doctrine-orm - 学说2：不同的查询方式，不同的结果

> ID：12540583
> 
> 赞同：0
> 
> 时间：2012-09-22T04:03:46.737
> 
> 标签：doctrine-orm, doctrine-query

有人可以解释一下，为什么我会得到不同的结果？

```
$user = new UserEn();
$user->setName("test");
$em->persist($user);

$result1 = $em->find('UserEn', 'test');

$result2 = $em->getRepository('UserEn')->findBy(array('name'=>'test'));

$q = $em->createQuery('select u from UserEn u where u.name = :name');
$q->setParameter('name', 'test');
$result3 = $q->getResult(); 
```

只有 $result1 持有 $user，这是我所期望的，其他都是空的。怎么了？（请不要说我需要调用 $em->flush(); ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:05:17.967

因为 Doctrine 无法确定您正在从查询中明确请求一个`User`具有 name 属性设置为的对象`test`，所以它查询 DB（忽略缓存机制），将结果集映射到实体对象，将它们加载到实体管理器中并返回数组如果找到任何数据，实体对象[s]。所以这里没有实体经理的参与。`find($id)`如果您使用而不是，情况会有所不同，`findBy()`因为现在 Doctrine 将首先检查实体管理器，如果未找到则查询数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:09:20.570

### $结果2

这将返回一个数组，其中包含具有`test`名称的所有实体：

```
$result2 = $em->getRepository('UserEn')->findBy(array('name'=>'test')); 
```

为了只获得一条记录，您应该使用`findOneBy`而不是`findBy`：

```
$result2 = $em->getRepository('UserEn')->findOneBy(array('name'=>'test')); 
```

### $结果3

在`$result3`您应该调用`$q->getSingleResult()`而不是`$q->getResult()`：

```
$result3 = $q->getSingleResult(); 
```

# php - 在父文件夹 PHP 中包含文件

> ID：12540587
> 
> 赞同：-1
> 
> 时间：2012-09-22T04:04:32.337
> 
> 标签：php, codeigniter, include

在我的根 html 目录中，我安装了 SMF，还安装了 CodeIgniter。我正在制作一个用于 CI 的 SMF SSI 自定义库，但在包含 SSI.php 文件时遇到了问题。这是我的 html 根目录的样子：

```
- html/root
  /forums (html/forums)
      -SSI.php
  /application
      /libraries
          -SMF.php(html/application/libraries)
  /system 
```

那么在文件 application/libraries/smf.php 中，我将如何包含 SSI.php？这是我正在使用的，但它说找不到文件

`include('.../forums/SSI.php');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:35:15.373

当您的文件进入`html/application/libraries`文件夹并且您要包含的文件进入`html/forums`文件夹时，您可以使用下面的代码来包含。

```
../../forums/SSI.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:29:03.153

要获取基本目录，请使用以下之一：

```
 $_SERVER['SERVER_NAME']; 
```

或者：

```
 $_SERVER['DOCUMENT_ROOT']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T07:14:05.077

我不知道这在库中是否可用，但 FCPATH 通常指向您的 CI 根目录，而 APPPATH 通常指向您的应用程序目录。希望有所帮助，这些设置在 CI 根 index.php 文件中，您可以尝试回显它们以查看它们是否进入库，如果没有在其中添加设置器，例如

```
/**
 * Storage holder for the include files paths, is changed by $this->include_file()
 *
 * @access protected
 * 
 * @var string
 */
protected $_path;

/**
 * Sets the path for include files.
 *
 * @access private
 * 
 * @param string $path Path of files to include.
 */
private function set_path($path)
{
  $this->_path = $path;
}

// ------------------------------------------------------------------------

/**
 * Includes file.
 * 
 * @param  string $file Filename to include
 * 
 * @return void
 */
function include_file($file)
{
  include($this->_path . $file);
} 
```

然后从 CI 范围设置它

```
<?php
  $this->library->set_path(FCPATH);
  $this->library->include_file('SI.php'); 
```

如果我理解你在寻找什么，这样的事情可能会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T04:08:05.507

这是两个时期，而不是一个时期。一个代表当前目录，两个代表父目录，其他任何代表一个真实目录：

```
require_once('../{URL}'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T04:31:57.353

你最好使用绝对路径。

```
include __DIR__ . '/../../forums/SSI.php';                             // php version >= 5.3 
include dirname(__FILE__) . '/../../forums/SSI.php'              //  php version < 5.3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-09T14:05:00.787

采用

```
include_once FCPATH."forums/SSI.php"; 
```

FCPATH 是 CodeIgniter 安装的根目录

# c# - 图片自动增强算法

> ID：12540592
> 
> 赞同：1
> 
> 时间：2012-09-22T04:05:25.953
> 
> 标签：c#, image

我正在开发自动增强图片的 c# 应用程序。我所说的“自动”是指用户所要做的就是指向一张图片，然后应用程序会找出需要改进的地方并加以改进。

显然，由于它不是针对图片中的某个区域，因此它并不完美，但它非常易于使用。我见过一个算法可以做到这一点，但我找不到它。

如果有人知道执行此操作的此类算法或库的名称，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:10:48.997

“增强”这个词有点笼统。典型照片编辑器中的“增强”按钮执行类似于直方图均衡的功能，可能还伴随着白平衡调整。 [http://en.wikipedia.org/wiki/Histogram_equalization](http://en.wikipedia.org/wiki/Histogram_equalization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:13:22.730

如果您正在寻找图书馆，请使用[Emgu CV](http://www.emgu.com/wiki/index.php/Main_Page "恩古简历")。它是 OpenCV 的 C# 包装器，是目前可用的最全面的图像处理库。

它具有直方图均衡功能以及您可能需要的任何其他过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T04:13:17.047

[直方图均衡](http://en.wikipedia.org/wiki/Histogram_equalization)通常做得很好。我用php做过一次，如果你愿意，你可以[查看它。](http://kishorkundan.blogspot.com/)（请注意，期望的结果可能比您在那里看到的更有趣）

它通常会完成这项工作，但您要寻找更多，然后您将不得不查看@satya 指出的建议。

这就是我所知道的，肯定还有很多其他的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T04:06:39.620

查找卷积矩阵（通常）和不锐化掩蔽。还有高斯和模糊滤镜。

# ipad - 支持的方向与应用程序没有共同的方向，并且 shouldAutorotate 返回 YES'

> ID：12540597
> 
> 赞同：95
> 
> 时间：2012-09-22T04:06:57.343
> 
> 标签：ipad, uipopovercontroller, landscape, ios6

我的应用程序（iPad；iOS 6）是一个仅限横向的应用程序，但是当我尝试使用 UIPopoverController 显示照片库时，它会抛出此错误： `Supported orientations has no common orientation with the application, and shouldAutorotate is returning YES.`我尝试更改很多代码，但我没有运气。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-09-24T23:29:33.053

在 IOS6 中，您在三个地方支持界面方向：

1.  .plist（或目标摘要屏幕）
2.  你的 UIApplicationDelegate
3.  正在显示的 UIViewController

如果您收到此错误，很可能是因为您在 UIPopover 中加载的视图仅支持纵向模式。这可能是由 Game Center、iAd 或您自己的视图引起的。

如果它是您自己的视图，您可以通过覆盖 UIViewController 上的 supportedInterfaceOrientations 来修复它：

```
- (NSUInteger) supportedInterfaceOrientations
{
     //Because your app is only landscape, your view controller for the view in your
     // popover needs to support only landscape
     return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
} 
```

如果不是你自己的视图（比如 iPhone 上的 GameCenter），你需要确保你的 .plist 支持竖屏模式。您还需要确保您的 UIApplicationDelegate 支持以纵向模式显示的视图。您可以通过编辑 .plist 然后覆盖 UIApplicationDelegate 上的 supportedInterfaceOrientation 来做到这一点：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
} 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-10-11T07:28:58.070

在花费大量时间寻找避免子类化和添加大量代码的方法之后，这是我的单行代码解决方案。

新建一个 UIImagePickerController 的类别并添加

```
-(BOOL)shouldAutorotate{
    return NO;
} 
```

这就是所有的人！

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2013-02-01T10:25:41.853

在另一种情况下，可能会出现此错误消息。我找了好几个小时才发现问题。这篇文章在阅读了几次之后非常有帮助。

如果您的主视图控制器旋转到横向并且您调用了一个应该以纵向显示的自定义子视图控制器，则当您的代码如下所示时可能会出现此错误消息：

```
- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationPortrait;
} 
```

这里的陷阱是 xcode 的智能感知建议“UIInterfaceOrientationPortrait”，我不在乎。乍一看，这似乎是正确的。

正确的面具被命名

```
UIInterfaceOrientationMaskPortrait 
```

请注意小中缀**"Mask"**，否则您的子视图将最终出现异常和上面提到的错误消息。

新的枚举被移位。旧枚举返回无效值！

（在 UIApplication.h 你可以看到新的声明：*UIInterfaceOrientationMaskPortrait = (1 << UIInterfaceOrientationPortrait)*）

解决方案是：

```
- (BOOL)shouldAutorotate {

    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {

    // ATTENTION! Only return orientation MASK values
    // return UIInterfaceOrientationPortrait;

    return UIInterfaceOrientationMaskPortrait;
} 
```

迅速使用

```
override func shouldAutorotate() -> Bool {

    return true
}

override func supportedInterfaceOrientations() -> Int {

    return Int(UIInterfaceOrientationMask.Portrait.rawValue)
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-11-12T17:30:31.407

在仅横向应用程序中显示图像选择器时，我遇到了类似的问题。根据 Luiji 博士的建议，我在控制器的开头添加了以下类别。

```
// This category (i.e. class extension) is a workaround to get the
// Image PickerController to appear in landscape mode.
@interface UIImagePickerController(Nonrotating)
- (BOOL)shouldAutorotate;
@end

@implementation UIImagePickerController(Nonrotating)

- (BOOL)shouldAutorotate {
  return NO;
}
@end 
```

在 ViewController .m 文件的 @implementation 之前添加这些行是最简单的。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-01-22T23:37:35.077

我在我的代码中遇到了相同的错误消息。我发现了这个，这是 Apple 报告的一个错误：

[https://devforums.apple.com/message/731764#731764](https://devforums.apple.com/message/731764#731764)

他的解决方案是在 AppDelegate 中修复它。我实现了它，它对我有用！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-09-22T18:02:11.683

我遇到了同样的问题，这个答案[https://stackoverflow.com/a/12523916](https://stackoverflow.com/a/12523916)对我有用。想知道是否有更优雅的解决方案。

**我的代码：**

```
UIImagePickerController  *imagePickerController = [[NonRotatingUIImagePickerController alloc] init];
imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

UIPopoverController  *popoverVC = [[UIPopoverController alloc] initWithContentViewController:imagePickerController];    

[popoverVC presentPopoverFromRect:frame   // did you forget to call this method?
                           inView:view
         permittedArrowDirections:UIPopoverArrowDirectionAny
                         animated:YES]; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-01-16T05:27:42.953

```
- (BOOL)shouldAutorotate {
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

This removes the crash. 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-01-28T17:05:19.327

iOS 8 - 您可以使用 UIModalPresentationPopover 而无需任何技巧即可在弹出窗口中显示。不理想但总比没有好。

```
imagePicker.modalPresentationStyle = UIModalPresentationPopover;
imagePicker.popoverPresentationController.sourceView = self.view;
imagePicker.popoverPresentationController.sourceRect = ((UIButton *)sender).frame; 
```

编辑：也许尝试不同的 UIModalPresentationStyles - 也许更多将在横向工作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-30T01:41:40.523

解决我的问题的另一个选项是创建 UIImagePickerController 的子类并覆盖以下方法

```
@interface MyImagePickerController ()

@end

@implementation MyImagePickerController

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
} 
```

使用它而不是 UIImagePickerController 并且一切正常。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-03-09T03:31:50.480

创建一个类别对于修复这个错误非常有帮助。并且不要忘记导入您创建的类别。这会将缺少的方法添加到 UIImagePickerController 中，并且在 iOS 6 上，它将限制它只能在 Portrait 中工作，因为文档说明了顺便说一句。

其他解决方案可能已经奏效。但是，将 SDK for iOS 8.x 编译为部署在 iOS 6.1 上，这似乎是可行的方法。

**.h 文件：**

```
#import <UIKit/UIKit.h>

@interface UIImagePickerController (iOS6FIX)

- (BOOL) shouldAutorotate;
- (UIInterfaceOrientation) preferredInterfaceOrientationForPresentation;

@end 
```

**.m 文件：**

```
#import "UIImagePickerController+iOS6FIX.h"

@implementation UIImagePickerController (iOS6FIX)

- (BOOL) shouldAutorotate {
    return NO;
}

- (UIInterfaceOrientation) preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
}

@end 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-02-02T14:34:58.863

**斯威夫特 3**

```
let imagePicker = UIImagePickerController()

imagePicker.modalPresentationStyle = .popover
imagePicker.popoverPresentationController?.sourceView = sender // you can also pass any view 

present(imagePicker, animated: true) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-01-05T20:50:37.787

Swift 4 及更高版本假设整个应用程序处于横向状态，并且您需要以纵向显示单个控制器。在必须是纵向的视图控制器中添加以下内容：

```
override open var supportedInterfaceOrientations: UIInterfaceOrientationMask {
    return .portrait
}

open override var shouldAutorotate: Bool {
    return false
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-14T02:06:14.623

**我在隐式****转换`UIInterfaceOrientationPortrait`为`UIInterfaceOrientationMaskPortrait`**返回值时遇到了这个崩溃问题。

更多代码背景`UIPageViewControllerDelegate`，仅供大家参考。

```
 -(UIInterfaceOrientationMask)pageViewControllerSupportedInterfaceOrientations:
(UIPageViewController *)pageViewController
{
    # return UIInterfaceOrientationPortrait;    # wrong
    return UIInterfaceOrientationMaskPortrait;  # correct
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-12-07T10:17:44.697

我刚刚解决了**Swift 4.x的问题**

```
override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()
    configureVideoOrientation()
}

override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransition(to: size, with: coordinator)
    coordinator.animate(alongsideTransition: nil, completion: { [weak self] _ in
        self?.configureVideoOrientation()
    })
}

private func configureVideoOrientation() {
    guard let previewLayer = self.previewLayer, let connection = previewLayer.connection else { return }
    if connection.isVideoOrientationSupported {
        let orientation = UIApplication.shared.statusBarOrientation
        switch (orientation) {
        case .portrait:
            previewLayer.connection?.videoOrientation = .portrait
        case .landscapeRight:
            previewLayer.connection?.videoOrientation = .landscapeRight
        case .landscapeLeft:
            previewLayer.connection?.videoOrientation = .landscapeLeft
        case .portraitUpsideDown:
            previewLayer.connection?.videoOrientation = .portraitUpsideDown
        default:
            previewLayer.connection?.videoOrientation = .portrait
        }

        previewLayer.frame = self.view.bounds
    }
} 
```

也谢谢你们的回答。我刚刚剪切了工作代码并简单地重构了它。

# python - 测试列表的索引是否存在

> ID：12540600
> 
> 赞同：5
> 
> 时间：2012-09-22T04:07:21.693
> 
> 标签：python

好的，所以这实际上是两个问题。首先，我想知道是否有办法测试列表的索引是否存在。例如，我想在每次给定条件为真时使用类似的代码递增 list[i] `list[i] += 1`，但如果索引不存在，则会出现错误。所以我想设置一个测试，在出现错误的情况下，执行类似`list.append(1)`. 什么代码可以完成这样的测试条件？`If list[i]`引发错误。

作为后续问题，一旦建立测试，除了使用上述附加方法之外，还有其他方法可以创建列表索引吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T04:18:59.953

听起来你真正想要的是一个`defaultdict`——与其说是一个列表，不如说是一个整数到某种你看到它们的次数的映射。

（这非常接近 perl 中 autovivificaiton 的概念，如果你以前用过的话）

此代码将起作用：

```
from collections import defaultdict

# don't name a variable 'list'; you'll end up hiding the actual list type
my_List = defaultdict(int) # create a mapping, elements will default to 0 
```

然后你可以使用

```
my_list[i] += 1 
```

对于 的*任何*值`i`。如果它以前见过，那么它将增加它。如果不是，那么`my_list[i]`将得到一个默认值 0，该值将立即增加到 1。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-22T04:18:44.260

测试索引是否存在：

```
if 0 <= i < len(list): ... do something with list[i] ...
else: ... i is out of bounds, do something else ... 
```

在这种情况下，您最好使用 a[`dict`](http://docs.python.org/library/stdtypes.html#dict)而不是数组，并且可能使用[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T04:13:50.023

> 除了使用上述附加方法之外，还有什么方法可以创建列表索引？

是的，[`Range`](http://docs.python.org/library/functions.html#range)方法。

```
indexList = range(len(nameList))  # create a list of indexes
print "Index list:", indexList

for i in indexList:            # Pick items out of the list
    print ">>>", nameList[i] 
```

在 python中测试`null`变量的最佳方法是......（非常重要的`None`是大写而不是小写）。

```
if list[i] != None: #check if there is something there
    print "Oh hello... " + list[i]
else:
    print "Nothing to see here, move along" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T04:26:39.503

> 首先，我想知道是否有办法测试列表的索引是否存在。

您可以利用列表索引是数字的事实（从 0 开始），并在修改列表时重新计算：

```
if i <= len(mylist):
   print mylist[i] 
```

另一种避免的`IndexError`方法是抓住它：

```
try:
  mylist[i] += 1
except IndexError:
  print "No item at ", i 
```

> 除了使用上述附加方法之外，还有什么方法可以创建列表索引？

您不会“创建”索引，它会在您从列表中添加或删除项目时自动设置。因此，创建索引的唯一方法是将项目附加到列表中。

如果您不断地“预先设置”您的列表，通常这是一个糟糕设计的标志——也就是说，您设置了一个具有默认值的大列表，然后逐步执行。

# youtube-api - 如何按国家和关键字查找视频？

> ID：12540609
> 
> 赞同：7
> 
> 时间：2012-09-22T04:08:20.650
> 
> 标签：youtube-api

我想按国家和关键字查找 Youtube 视频。例如：所有在挪威上传的关于奥巴马的视频。

我已经尝试过的事情：

1，标准提要允许特定国家/地区的结果，但不允许关键字搜索。示例： [http ://gdata.youtube.com/feeds/api/standardfeeds/NO/top_rated?v=2](http://gdata.youtube.com/feeds/api/standardfeeds/NO/top_rated?v=2)

2，自定义提要的区域设置甚至不准确。尽管指定了区域，但这会从世界任何地方提取视频。示例： [http ://gdata.youtube.com/feeds/api/videos?q=Obama®ion=NO](http://gdata.youtube.com/feeds/api/videos?q=Obama&region=NO)

3，带有位置坐标和半径的自定义提要效果不佳。我必须添加一个国家所有主要城市的坐标。这本来可以正常工作的，除非 youtube 视频不会出现在提要中，除非它们具有位置元数据，这需要由 youtube 上传者输入。没有多少人在上传视频时包含这些数据。示例： [http ://gdata.youtube.com/feeds/api/videos?q=Obama&location=59.9494,10.7564](http://gdata.youtube.com/feeds/api/videos?q=Obama&location=59.9494,10.7564)

如果我忽略了某些东西，请告诉我。我想在圆孔里放一个方钉吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:20:42.307

关于您的方法的注意事项：

1.  特定国家/地区的标准供稿**不仅**包括在该国家/地区上传的视频。它们只是反映在特定国家/地区的观众中符合某些标准（受欢迎程度等）的视频。

2.  region 参数仅适用于电影排行榜，不能用作一般搜索的参数：[https ://developers.google.com/youtube/2.0/reference#regionsp](https://developers.google.com/youtube/2.0/reference#regionsp)

3.  这是唯一可行的方法。不幸的是，您只能在位置限制中指定圆形区域，但您可以尝试使用一系列圆形来近似您正在寻找的区域。只有具有位置元数据的视频才会出现在搜索结果中这一事实是一项功能，而不是错误——有关视频拍摄地点的数据只有在上传者想要的情况下才会公开显示。

# perl - 如何在另一个 Perl 文件中重复使用一个 Perl 文件

> ID：12540613
> 
> 赞同：0
> 
> 时间：2012-09-22T04:08:41.693
> 
> 标签：perl

我正在执行以下步骤：

*   *读取目录中的所有文本文件并将其存储在名为@files*的数组中
**   在每个文本文件上运行一个 foreach 循环。使用拆分操作提取文件名（剥离 .txt）并创建该特定文件名的文件夹。将该文件重命名为*Test.txt*（以便作为另一个 perl 可执行文件的输入） 通过添加行为每个文件执行 test.pl *require "test.pl"；**

 *它仅适用于一个文件，但不再适用。这是我的代码：

```
opendir DIR, ".";
my @files = grep {/\.txt/} readdir DIR;

foreach my $files (@files) {

    @fn = split '\.', $files;
    mkdir "$fn[0]" 
        or die "Unable to create $fn[0] directory <$!>\n";

    rename "$files", "Test.txt";
    require "test3.pl";

    rename "Test.txt", "$files";
    system "move $files $fn[0]";
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T04:32:10.550

该`require`函数试图变得聪明并仅在尚未加载代码时才加载代码。为什么这么棒？(1.) 我们没有条件包含的 C 预处理器地狱，并且 (2.) 我们节省了时间。

要执行另一个 perl 脚本，我们有*多种*可能。您可能想要的是`do`脚本。`do FILENAME`语法就像 eval，除了你的范围对 ne 文件不可见`do`。

您也可以通过启动另一个解释器`system "./test3.pl"`。

您可以制作`test3.pl`一个模块，例如 with `package test3;`，并将内容打包到`sub`. 您可能会将当前文件名作为参数传递，而不是硬编码文件名。这不仅是更好的编码实践，而且允许您更轻松地扩展您的应用程序，例如多线程。

这是我实现该代码段的方式：

```
use test3; # load the file once

foreach my $file (glob "*.txt") {   # use `glob` to get a list of matching filenames

    (my $newdir) = $file =~ m/^ (.+) \.txt $/x;  # what you probably wanted
    mkdir $newdir 
        or die "Unable to create $newdir directory <$!>\n";

    test3::the_sub($file); # do the action on $file, without renaming circus.
    system "move $file $newdir"; # rather use File::Copy
} 
```

有趣的方面：

`glob`很棒，就像在 shell 中一样工作。

总是使用`my`变量，除非你有一个很好的理由。

我进一步假设该文件`text.en.txt`不应该创建目录`text`，但是`text.en`，并且该文件`.txt`不存在。

这是否有效也取决于您正在调用的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:15:00.457

使用`do`而不是`require`. `require`只加载并运行一次文件。*

# android - 如何提高eclipse中构建android项目的速度？

> ID：12540623
> 
> 赞同：0
> 
> 时间：2012-09-22T04:11:01.617
> 
> 标签：android, debugging, compilation

您好，我有 Eclipse SDK 版本：3.6.2。我正在开发包含所有电话、平板电脑（小、正常、大、xlarge 文件夹）的许多 XML 文件的应用程序。

当我编译项目时，编译需要太多时间。

请对此问题提出任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T06:59:27.060

检查您是否在导出或启动之前标记了跳过打包或 dexing，这将帮助您至少在保存或构建时更快地构建项目，它会在启动时完成，因为打包将在启动期间完成。

![在此处输入图像描述](../Images/161db0a97d25e69ed9526da03bc120b8.png)

# visual-studio-2010 - Web Workbench 智能感知和 LESS 变量文件

> ID：12540627
> 
> 赞同：3
> 
> 时间：2012-09-22T04:11:49.853
> 
> 标签：visual-studio-2010, visual-studio, intellisense, less

我使用一个单独的文件仅用于 less 中的变量。我还有一个引导较少的文件，它在编译时导入所有其他较少的文件。

我的问题是，有没有办法告诉 Web Workbench 使用变量 less 文件作为智能感知的参考？所以如果我在一个不直接导入变量文件的less文件中工作，它仍然会检测智能感知中的变量名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T16:43:38.657

您可以为您的 less 文件添加参考路径。通过为您提供该文件的智能感知，这与在 js 文件中的工作方式相同。

**例子**

```
/// <reference path="variables.less" />

.bacon {
    color: @red; // Should have intellisense now.
} 
```

# c# - 如何在 Windows 手机上的持久存储文件中记录加速度计读数

> ID：12540634
> 
> 赞同：0
> 
> 时间：2012-09-22T04:13:08.573
> 
> 标签：c#, silverlight, timer, windows-phone-7.1, accelerometer

``我正在尝试开发一个 Windows 手机应用程序，它可以每隔 10 秒左右将加速度计读数记录到持久文件存储区域。

为此，我编写了一个程序代码，它获取加速度计读数并分别显示它们（一个文本块用于 x 读数，一个用于 y 读数，一个用于 z 读数）。然后我将所有这些读数一起存储在一个文本框中，并使用 TextChanged 事件记录对文件的更改。读数存储到独立文件存储区。

不同的功能工作正常，但我面临的问题是文件只显示加速度计读取的最后一个值，或者换句话说，文本框只保存最后读取的值。

任何人都可以建议为什么会发生这种情况，我能做些什么来解决这个问题？我使用的代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using Microsoft.Devices.Sensors;
using Microsoft.Xna.Framework;
using System.Windows.Threading;
using System.IO.IsolatedStorage;
using System.IO;

namespace PhoneApp1
{
    public partial class MainPage : PhoneApplicationPage
    {
        Accelerometer a;
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            if (!Accelerometer.IsSupported)
            {
                status.Text = "Sensor not supported";
                start.IsEnabled = false;
                stop.IsEnabled = false;
            }
            }

        private void start_Click(object sender, RoutedEventArgs e)
        {
            if (a == null)
            {
                a = new Accelerometer();

            }
            try
            {
                status.Text = "Starting Accelerometer";
                a.TimeBetweenUpdates = TimeSpan.FromMilliseconds(1000);
                a.CurrentValueChanged += new EventHandler<SensorReadingEventArgs<AccelerometerReading>>(a_CurrentValueChanged);
                a.Start();
            }
            catch (Exception e1)
            {
                status.Text = e1.Message;
            }
        }

        private void stop_Click(object sender, RoutedEventArgs e)
        {
            if (a != null)
            {
                a.Stop();
                status.Text = "Accelerometer stopped";
            }
            else
            {
                status.Text = "Accelerometer not started";
            }
        }
        void a_CurrentValueChanged(Object sender, SensorReadingEventArgs<AccelerometerReading> sr)
        {
            Dispatcher.BeginInvoke(() => UpdateUI(sr.SensorReading));
        }
        void UpdateUI(AccelerometerReading ar)
        {
            DispatcherTimer newTimer = new DispatcherTimer();
            newTimer.Interval = TimeSpan.FromSeconds(1);
            status.Text = "Getting Accelerometer Readings";
            Vector3 xyz = ar.Acceleration;
            values.Text = "X: " + xyz.X.ToString("0.00") + "\t" + "Y: " + xyz.Y.ToString("0.00") + "\t" + "Z: " + xyz.Z.ToString("0.00");
            newTimer.Tick += OnTimerTick;
            newTimer.Start();

        }
        void OnTimerTick(Object sender, EventArgs args)
        {
            IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();
            isoStore.CreateDirectory("Accelerometer");
            IsolatedStorageFileStream fileStream=isoStore.OpenFile("Accelerometer\\myFile.txt",FileMode.Append,FileAccess.Write);
            using(StreamWriter writeFile=new StreamWriter(fileStream))
            {
            writeFile.WriteLine(values.Text);
            writeFile.Close();
            }
        }

        private void read_Click(object sender, RoutedEventArgs e)
        {
            IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
            IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("Accelerometer\\myFile.txt", FileMode.Open, FileAccess.Read);
            fileStream.Position = 0;
            using (StreamReader reader = new StreamReader(fileStream))
            {
                values.Text += "\n" + reader.ReadToEnd();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:20:42.697

我复制粘贴了你的代码，它对我来说很好。尝试调整值 textblock 的大小并将 textwrapping 属性设置为 wrap，也许这就是您看不到它们的原因

此外，我不会每次都使用新的 Dispatchertimer 对象，初始化和启动，整个应用程序可能只有一个

希望对你有帮助！

# java - 如何检查数组是否包含数字

> ID：12540637
> 
> 赞同：1
> 
> 时间：2012-09-22T04:13:26.380
> 
> 标签：java, methods, arraylist

我正在构建一个 ATM，我在我的第二个类中有一个方法，该方法假设检查登录密码以查看它是否存在于`ArrayList`. 虽然我是java新手，但我不确定如何做到这一点？我正在尝试使用`arraylistname.contains`，但我不确定这是否正确。我将发布我的两个课程。

```
import java.util.ArrayList;
import java.util.Scanner;

public class BankMain {
    ArrayList<Integer> cardNum = new ArrayList<Integer>();
    public static void main(String[] args) {
         // TODO Auto-generated method stub
         BankMain main = new BankMain();
         main.menu();
    }

    public void cardNumbers(){
        Scanner cards = new Scanner(System.in);
        Scanner input = new Scanner(System.in);
        Scanner keyboard = new Scanner(System.in);

    System.out.println("Please select a 5 digit card number");
        cardNum.add(input.nextInt());

        System.out.println("Thank you! You're card number is " +cardNum);
        System.out.println("Type 'c' to go back to main menu.");
        String value  = keyboard.next();
        if(value.equalsIgnoreCase("c")){
            menu();
        }else if (!keyboard.equals('c')){
            System.out.println("Invalid Entry!");
        }
    }

    public void menu(){
        System.out.println("What Would you like to do today?");
        System.out.println();
        System.out.println("Create Account = 1");
        System.out.println("Login = 2");
        System.out.println("Exit = 3");
        query();
    }

    public void query(){
        Scanner keyboard = new Scanner(System.in);
        double input = keyboard.nextInt();  

        if (input == 2){
            BankMainPart2 main2 = new BankMainPart2();
            System.out.println("Please enter your 5 digit card number.");
            main2.loginCard(cardNum);
        }else if (input == 1){
            cardNumbers();
        }else if (input == 3){
            System.out.println("Thank you, have a nice day!");
            System.exit(0);
        }
   }
} 
```

而且，这是我的第二节课，使用登录方法：

```
import java.util.ArrayList;

public class BankMainPart2 {
    public static void loginCard(ArrayList<Integer> cardNum){
        if (cardNum.contains(0)) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T04:23:02.820

是的，它有效，但让我们在这里揭示幕后的男人。

发生的事情称为[自动装箱](http://en.wikipedia.org/wiki/Object_type_%28object-oriented_programming%29#Autoboxing)。您要使用的方法需要对象类型。 `int`不是*对象*类型，**而是**. 事实上，所有原始类型都有一个与之关联的装箱对象。`Integer`

 *Java 会很高兴地自动将您的原语转换为装箱对象。这可能会变得很冒险，因为 Java 中的一些内部机制可以快速而松散地运行，而且`Short`自动装箱只是很奇怪，所以在何时何地使用它时要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:15:03.400

是的，如果您正在查找`int`（原始类型），它工作正常，这是您的情况。

如果您通过传递可变对象进行查找，除非您覆盖`hashcode()`和`equals()`方法，否则这可能会给您错误的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T04:28:02.140

```
 cardNum.contains(0)
                   ^^^^   //It should be Card number entered by user. 
```

它之所以有效，是因为`autoboxing`如`Makoto's`答案中所述。*

# javascript - 动态处理布局

> ID：12540640
> 
> 赞同：1
> 
> 时间：2012-09-22T04:14:01.577
> 
> 标签：javascript, extjs, extjs4, extjs4.1

下面是我试过的代码：

```
<script type="text/javascript">
    Ext.require(['*']);
    Ext.onReady(function() {
        Ext.Loader.setConfig({
            enabled: true
        });
        var totalScreenWidth = screen.availWidth;
        var totalScreenHeight = screen.availHeight;
        Ext.QuickTips.init();

        var viewport = Ext.create('Ext.ViewPort', {
            id: 'border-example',
            layout: 'border',
            items: [
            Ext.create('Ext.Component', {
                region: 'north',
                height: totalScreenHeight * 0.05,
                autoEl: {
                    tag: 'div',
                    html: '<p><center>UI Demo</center></p>'
                }
            }), {
                region: 'west',
                stateId: 'navigation-panel',
                id: 'west-panel',
                title: 'Tree View',
                split: true,
                width: totalScreenWidth * 0.2,
                collapsible: true,
                animCollapse: true,
                xtype: 'tabpanel',
                dockedItems: [{
                    dock: 'top',
                    xtype: 'toolbar'
                }],
                minSize: 175,
                maxSize: 400,
                margin: '0 5 0 0',
                activeTab: 1,
                tabPosition: 'bottom',
                items: [{
                    title: 'Tree View',
                    autoScroll: true
                }, {
                    title: 'Graphical View',
                    autoScroll: true
                }]

            },
            Ext.widget('tabpanel', {
                id: 'tabWidgetPanel',
                region: 'center',
                items: [{
                    contentEl: 'Tabs1',
                    title: 'Tab1',
                }, {
                    contentEl: 'Tabs2',
                    title: 'Tab2',
                }]
            })]
        });

        ext.get("hideit").on('click', function() {
            var w = Ext.getCmp('west-panel');
            w: collapsed ? w.expand() : w.collapse();
        });

    });
</script> 
```

当西部导航面板最小化时，tabWidgetPanel 也会向左移动，离开空白屏幕的右侧。

我想要的是当西部导航面板折叠时，我希望tabWidgetPanel的大小增加并占据整个屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T06:32:16.730

从中删除renderTo，添加区域：'center'，删除高度并删除宽度。当您定义此区域时，该区域无法调整。你也在写 reion: 'west'。

# vb.net - 如何在 Visual Basic 设计器中隐藏元素？

> ID：12540656
> 
> 赞同：1
> 
> 时间：2012-09-22T04:16:50.923
> 
> 标签：vb.net, winforms, visual-studio-2012, designer

我正在 Visual Ultimate 2012 (VB.NET) 中制作计算器/转换器。用户选择他想要进行的转换类型，然后出现相应的标签/文本框（在此之前它们是隐藏的），如果用户选择另一种类型，其他标签/文本框会出现在同一位置，但之前的标签/文本框是隐。

问题是在设计器（Form1.vb [Design]）中我无法隐藏标签/文本框，将其他标签/文本框放在同一个地方。

**如何在 Visual Studio Ultimate 2012 的设计器中隐藏元素（标签、文本框等）？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T04:21:18.913

我认为你不需要隐藏你只需设置位置来控制相同并使用带到前面或发送到后面命令

# c# - 服务器控制生成意外标记

> ID：12540658
> 
> 赞同：1
> 
> 时间：2012-09-22T04:17:31.297
> 
> 标签：c#, asp.net, .net, htmltextwriter

我正在使用 .NET 4.0 和 IIS 7 为客户端构建数据库编辑器/业务线工具。我想根据存储在 Session 中的值有条件地在我的页面中包含一些 HTML。我在服务器端执行此操作，为了封装代码，我创建了一个 ASP 服务器控件。

正如您将看到的，服务器控件生成的标记不是我所期望的。我希望有人以前见过这个并且可以帮助我了解如何控制标记生成输出。

这是名为 MyList 的控件的新 RenderContents。它应该使用 <li> 标签生成新的列表条目。

```
protected override void RenderContents(HtmlTextWriter output) {
    output.RenderBeginTag(HtmlTextWriterTag.Li);
    output.WriteEncodedText(this.Text);
    output.RenderEndTag();
} 
```

编译主项目并添加对 MyList 的引用后，我在以下 HTML 中使用 MyList：

```
<h1>Favorite Things</h1>
<ul>
    <cc1:MyList ID="mL1" runat="server" Text="Code that works!" />
    <cc1:MyList ID="mL2" runat="server" Text="Going home before 8" />
    <cc1:MyList ID="mL3" runat="server" Text="Cold drinks in fridge" />
</ul> 
```

它生成以下内容：

```
<h1>Favorite Things</h1>
<ul>
    <span id="MainContent_mL1"><li>Code that works!</li></span>
    <span id="MainContent_mL2"><li>Going home before 8</li></span>
    <span id="MainContent_mL3"><li>Cold drinks in fridge</li></span>
</ul> 
```

现在我添加一个基于 Session 值的测试。WebControl 的 Page 属性为我提供了对控件容器的引用，从而可以访问我的 Session：

```
protected override void RenderContents(HtmlTextWriter output) {
    string backcolor = "Yellow";
    if (this.Page.Session["access"] == null) {
        backcolor = "Red";
    }
    output.RenderBeginTag(HtmlTextWriterTag.Li);
    output.AddStyleAttribute(HtmlTextWriterStyle.BackgroundColor, backcolor);
    output.WriteEncodedText(this.Text);
    output.RenderEndTag();
} 
```

现在标记开始解开。注意“mL1”中的不一致：

```
<h1>Favorite Things</h1>
<ul>
    <span id="MainContent_mL1"><li>Code that works!</li></span>
    <span id="MainContent_mL2" style="background-color:Red;"><li>Going home before 8</li></span>
    <span id="MainContent_mL3" style="background-color:Red;"><li>Cold drinks in fridge</li></span>
</ul> 
```

在我更复杂的真实代码中，标记变成了`span`标签。而且，当我在其中设置断点时，`RenderContents()`它只会在我连续有五个标签时被调用一次。

其他信息：带有 cc1:MyList 控件的页面具有 EnableSession=true。我的 web.config 指定了正常的会话管理器（“rml”和“RoleBasedList”指的是我的“真实”控件，我对其进行了简化以隔离问题并使这篇文章更短）：

```
<system.web>
    <trace enabled="true" localOnly="false" pageOutput="true" requestLimit="20" />
    <compilation debug="true" targetFramework="4.0" />
    <pages>
        <controls>
            <add tagPrefix="rml" assembly="RoleBasedList" namespace="SOTS.ServerControls"/>
        </controls>
    </pages>
    <httpModules>
      <add name="Session" type="System.Web.SessionState.SessionStateModule"/>
    </httpModules>

    <sessionState mode="InProc" cookieless="false" timeout="60"/>
    ...
</system.web> 
```

现在你知道我所做的一切了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:50:06.263

您只需要覆盖`WebControl.TagKey`自定义服务器控件中的属性：

```
protected override HtmlTextWriterTag TagKey
{
    get { return HtmlTextWriterTag.Li; }
} 
```

默认值为`Span`，它解释了您所看到的内容。当然，如果你这样做，你就不会在你的`RenderContents`覆盖中渲染 Li 标签。

另一种方法是覆盖`Render`，完全控制渲染，或者从其派生`Control`。但是你会失去 的一些特性`WebControl`，尤其是你的外部标签的样式。

关于您的第二个问题，您正在致电：

```
output.AddStyleAttribute(HtmlTextWriterStyle.BackgroundColor, backcolor); 
```

它添加了一个样式属性以应用于下一次调用`RenderBeginTag`. 您不调用`RenderBeginTag`，因此这将应用于树中下一个控件中的标记。

`Session`当您的控件在 Visual Studio 设计器中呈现时，另一点将为 null。您应该检查 null，或者检查您是否在设计模式下运行：

```
if ((Site != null) && (Site.DesignMode))
{
    ... running in design mode, Session won't be available
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:31:26.340

避免`System.Web.UI.WebControls`。我建议你`System.Web.UI.Control`直接继承。

正在由您派生的`<span>`类插入（您没有提到）。请注意，您正在覆盖`RenderContents`而不是`Render`，这意味着控件超类可以随意包装 的输出`RenderContents`，在本例中为`<span>`。

# java - 在 java swing 中浏览 html 文件

> ID：12540659
> 
> 赞同：3
> 
> 时间：2012-09-22T04:17:36.857
> 
> 标签：java, swing, html-parsing, jtextcomponent

> **可能重复：**
> [Swing JDialog/JTextPane 和 HTML 链接](https://stackoverflow.com/questions/7291956/swing-jdialog-jtextpane-and-html-links)

我想在摇摆中浏览 HTML 文件，我已经做到了，在 JEditorPane 的帮助下显示了 html 文件的内容，但是 html 文件的链接没有在同一个窗格中打开另一个 HTML 文件。摇摆可能吗？我希望 html 文件应该像纯 HTML 文件一样对待意味着链接应该在 JAVA 编辑器窗格中工作，目前我正在使用以下代码。

```
try
{
  FileInputStream fstream = new FileInputStream("src\\html\\test.html");
  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;
  String text="";
  while ((strLine = br.readLine()) != null)   {
    text=text+strLine+"\n";
  }
  JEditorPane htmlPane = new JEditorPane("text/html",text);
  cp.add(htmlPane);
  htmlPane.setBounds(750,50,600,600);
 }catch(Exception ex){
  JOptionPane.showMessageDialog(null,"exception is"+ex)   ;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T05:36:49.953

这个例子展示了如何在 Swing 中创建一个简单的浏览器。

简单浏览器的课程代码如下：

```
import java.awt.*;
import java.awt.event.*;
import java.net.*;
import java.util.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.text.html.*;

// The Simple Web Browser.
public class MiniBrowser extends JFrame

        implements HyperlinkListener {
    // These are the buttons for iterating through the page list.
    private JButton backButton, forwardButton;

    // Page location text field.
    private JTextField locationTextField;

    // Editor pane for displaying pages.
    private JEditorPane displayEditorPane;

    // Browser's list of pages that have been visited.
    private ArrayList pageList = new ArrayList();

    // Constructor for Mini Web Browser.
    public MiniBrowser() {
        // Set application title.
        super("Mini Browser");

        // Set window size.
        setSize(640, 480);

        // Handle closing events.
        addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                actionExit();
            }
        });

        // Set up file menu.
        JMenuBar menuBar = new JMenuBar();
        JMenu fileMenu = new JMenu("File");
        fileMenu.setMnemonic(KeyEvent.VK_F);
        JMenuItem fileExitMenuItem = new JMenuItem("Exit",
                KeyEvent.VK_X);
        fileExitMenuItem.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                actionExit();
            }
        });
        fileMenu.add(fileExitMenuItem);
        menuBar.add(fileMenu);
        setJMenuBar(menuBar);

        // Set up button panel.
        JPanel buttonPanel = new JPanel();
        backButton = new JButton("< Back");
        backButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                actionBack();
            }
        });
        backButton.setEnabled(false);
        buttonPanel.add(backButton);
        forwardButton = new JButton("Forward >");
        forwardButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                actionForward();
            }
        });
        forwardButton.setEnabled(false);
        buttonPanel.add(forwardButton);
        locationTextField = new JTextField(35);
        locationTextField.addKeyListener(new KeyAdapter() {
            public void keyReleased(KeyEvent e) {
                if (e.getKeyCode() == KeyEvent.VK_ENTER) {
                    actionGo();
                }
            }
        });
        buttonPanel.add(locationTextField);
        JButton goButton = new JButton("GO");
        goButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                actionGo();
            }
        });
        buttonPanel.add(goButton);

        // Set up page display.
        displayEditorPane = new JEditorPane();
        displayEditorPane.setContentType("text/html");
        displayEditorPane.setEditable(false);
        displayEditorPane.addHyperlinkListener(this);

        getContentPane().setLayout(new BorderLayout());
        getContentPane().add(buttonPanel, BorderLayout.NORTH);
        getContentPane().add(new JScrollPane(displayEditorPane),
                BorderLayout.CENTER);
    }

    // Exit this program.
    private void actionExit() {
        System.exit(0);
    }

    // Go back to the page viewed before the current page.
    private void actionBack() {
        URL currentUrl = displayEditorPane.getPage();
        int pageIndex = pageList.indexOf(currentUrl.toString());
        try {
            showPage(
                    new URL((String) pageList.get(pageIndex - 1)), false);
        } catch (Exception e) {}
    }

    // Go forward to the page viewed after the current page.
    private void actionForward() {
        URL currentUrl = displayEditorPane.getPage();
        int pageIndex = pageList.indexOf(currentUrl.toString());
        try {
            showPage(
                    new URL((String) pageList.get(pageIndex + 1)), false);
        } catch (Exception e) {}
    }

    // Load and show the page specified in the location text field.
    private void actionGo() {
        URL verifiedUrl = verifyUrl(locationTextField.getText());
        if (verifiedUrl != null) {
            showPage(verifiedUrl, true);
        } else {
            showError("Invalid URL");
        }
    }

    // Show dialog box with error message.
    private void showError(String errorMessage) {
        JOptionPane.showMessageDialog(this, errorMessage,
                "Error", JOptionPane.ERROR_MESSAGE);
    }

    // Verify URL format.
    private URL verifyUrl(String url) {
        // Only allow HTTP URLs.
        if (!url.toLowerCase().startsWith("http://"))
            return null;

        // Verify format of URL.
        URL verifiedUrl = null;
        try {
            verifiedUrl = new URL(url);
        } catch (Exception e) {
            return null;
        }

        return verifiedUrl;
    }

  /* Show the specified page and add it to
     the page list if specified. */
    private void showPage(URL pageUrl, boolean addToList) {
        // Show hour glass cursor while crawling is under way.
        setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));

        try {
            // Get URL of page currently being displayed.
            URL currentUrl = displayEditorPane.getPage();

            // Load and display specified page.
            displayEditorPane.setPage(pageUrl);

            // Get URL of new page being displayed.
            URL newUrl = displayEditorPane.getPage();

            // Add page to list if specified.
            if (addToList) {
                int listSize = pageList.size();
                if (listSize > 0) {
                    int pageIndex =
                            pageList.indexOf(currentUrl.toString());
                    if (pageIndex < listSize - 1) {
                        for (int i = listSize - 1; i > pageIndex; i--) {
                            pageList.remove(i);
                        }
                    }
                }
                pageList.add(newUrl.toString());
            }

            // Update location text field with URL of current page.
            locationTextField.setText(newUrl.toString());

            // Update buttons based on the page being displayed.
            updateButtons();
        } catch (Exception e) {
            // Show error messsage.
            showError("Unable to load page");
        } finally {
            // Return to default cursor.
            setCursor(Cursor.getDefaultCursor());
        }
    }

  /* Update back and forward buttons based on
     the page being displayed. */
    private void updateButtons() {
        if (pageList.size() < 2) {
            backButton.setEnabled(false);
            forwardButton.setEnabled(false);
        } else {
            URL currentUrl = displayEditorPane.getPage();
            int pageIndex = pageList.indexOf(currentUrl.toString());
            backButton.setEnabled(pageIndex > 0);
            forwardButton.setEnabled(
                    pageIndex < (pageList.size() - 1));
        }
    }

    // Handle hyperlink's being clicked.
    public void hyperlinkUpdate(HyperlinkEvent event) {
        HyperlinkEvent.EventType eventType = event.getEventType();
        if (eventType == HyperlinkEvent.EventType.ACTIVATED) {
            if (event instanceof HTMLFrameHyperlinkEvent) {
                HTMLFrameHyperlinkEvent linkEvent =
                        (HTMLFrameHyperlinkEvent) event;
                HTMLDocument document =
                        (HTMLDocument) displayEditorPane.getDocument();
                document.processHTMLFrameHyperlinkEvent(linkEvent);
            } else {
                showPage(event.getURL(), true);
            }
        }
    }

    // Run the Mini Browser.
    public static void main(String[] args) {
        MiniBrowser browser = new MiniBrowser();
        browser.show();
    }
} 
```

![在此处输入图像描述](../Images/40215384a30da65ad6aa9d860691d7f5.png)

参考：[http ://www.java-tips.org/java-se-tips/javax.swing/how-to-create-a-simple-browser-in-swing-3.html](http://www.java-tips.org/java-se-tips/javax.swing/how-to-create-a-simple-browser-in-swing-3.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:34:52.263

您可以使用 dj 项目嵌入原生浏览器，这样您就可以渲染 html+js+css 并跟随链接甚至渲染 flash。sourceforge.net/projects/djproject/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T04:45:47.340

从[`JEditorPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JEditorPane.html).

> 某些类型的内容可以通过生成超链接事件来提供超链接支持。**如果 JEditorPane*不可编辑***（`JEditorPane.setEditable(false);`已调用），HTML EditorKit将生成超链接事件。...

继续阅读这些文档。对于另一个答案中提到的提示。

* * *

## 顺便提一句

```
 FileInputStream fstream = new FileInputStream("src\\html\\test.html");
  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;
  String text="";
  while ((strLine = br.readLine()) != null)   {
    text=text+strLine+"\n";
  }
  JEditorPane htmlPane = new JEditorPane("text/html",text); 
```

可以换成..

```
 File file = new File("src\\html\\test.html");
  JEditorPane htmlPane = new JEditorPane(file.toURI().toURL()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T04:46:12.680

来自[JEditorPane Javadocs](http://docs.oracle.com/javase/7/docs/api/javax/swing/JEditorPane.html)：

> 某些类型的内容可以通过生成超链接事件来提供超链接支持。如果不可*编辑*（已调用），HTML`EditorKit`将生成超链接事件。如果 HTML 框架嵌入到文档中，典型的响应是更改当前文档的一部分。以下代码片段是一个可能的超链接侦听器实现，它专门处理 HTML 框架事件，并简单地显示任何其他激活的超链接。`JEditorPane`*`JEditorPane.setEditable(false);`*

 *```
class Hyperactive implements HyperlinkListener {

     public void hyperlinkUpdate(HyperlinkEvent e) {
         if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
             JEditorPane pane = (JEditorPane) e.getSource();
             if (e instanceof HTMLFrameHyperlinkEvent) {
                 HTMLFrameHyperlinkEvent  evt = (HTMLFrameHyperlinkEvent)e;
                 HTMLDocument doc = (HTMLDocument)pane.getDocument();
                 doc.processHTMLFrameHyperlinkEvent(evt);
             } else {
                 try {
                     pane.setPage(e.getURL());
                 } catch (Throwable t) {
                     t.printStackTrace();
                 }
             }
         }
     }
 } 
```

* * *

所以：

```
htmlPane.setEditable(false); 
htmlPane.addHyperlinkListener(new Hyperactive()); 
```*

# android - 我可以在 AndroidManifest.xml 中隐藏活动类名称吗？

> ID：12540660
> 
> 赞同：2
> 
> 时间：2012-09-22T04:18:03.783
> 
> 标签：android, android-manifest

有什么方法可以隐藏活动类名，比如 AndroidManifest.xml 中的“xxx”？

```
<activity android:name="xxx" .. /> 
```

或者在另一个文件中配置它？

ps：对于一个好奇的人，我希望它对第三方自动扫描工具隐藏。不像google play，一些android市场（在中国）有恼人的限制性竞争做法，比如禁止使用admob sdk，但使用他们提供的那个。我不想针对每个市场改变我的计划。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T06:54:32.710

我认为您无法隐藏活动课程的真实名称。该名称必须出现在某个地方以向编译器表明它的存在。否则系统会抛出异常`ActivityNotFoundException`

有一个选项 ( `<activity-alias>`) 可以为活动指定别名，但这里也如预期的那样必须给出真实名称以允许映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T07:45:14.597

您不能在清单文件中隐藏或重命名您的活动。因为每当安装 APK 时，它都会从清单文件中查找所有活动、服务和其他资源的信息。

因此，如果您为活动指定不同的名称，它将给出**空指针异常**并且应用程序将强制关闭。

您最好寻找一些技巧来隐藏某些工具或您正在谈论的工具的清单内容。

# python - unibiased flip: 找出正面多少次和反面多少次的概率

> ID：12540661
> 
> 赞同：1
> 
> 时间：2012-09-22T04:18:19.790
> 
> 标签：python

我正在尝试开发一个函数，该函数将打印头的概率作为打印 h 的次数除以打印 h 或 t 的总次数。

这是我的代码 def unbiasedFlip(n,p)：

```
for i in range(n+1):
    p=Pr(Heads)
    n=Totalflips
    if num1>=p and num2<p:
        print(Heads)
    elif num1>=(1-p) and num2<(1-p):
        print(Tails) 
```

num1 和 num2 是应该通过 if 函数生成的两个随机数。和 pr 概率。当我运行程序时，我得到错误，我没有定义 pr 或 head。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:30:32.647

**注意：**此代码可能不是您真正想要的，但我认为它可以在某种程度上帮助您......我希望如此......

无论如何，在查看我的潜在解决方案之前，我建议您尝试学习 Python（语法、如何创建函数、创建随机数等）。您会发现它很容易学习并且您会非常喜欢它！:P

您可以找到几种学习 Python 的方法（书籍、在线课程/文档、沉迷于 Python XD 的朋友等）。

例如，检查以下链接：http: [//docs.python.org/tutorial/](http://docs.python.org/tutorial/)

请记住，拥有清晰易懂的代码有助于我们了解您的问题，并为您提供最好的机会来更好地回答您的问题；）。

* * *

这是一个简单的代码，**我建议您仔细阅读评论**：

```
import random 

# The function "prob_head" below return the number of head divided by the number of coin toss
# The input variable "number_toss" is number of times we toss a coin
def prob_head(number_toss):

    # "heads" is our number of heads. 
    # Initially it is equal to 0
    heads = 0

    # We toss a coin "number_toss" times...
    for i in range(0, number_toss):
        # We create a random number "flip" comprised in {0,1}        
        flip = int(random.random()*2)

        # Let's say we follow the following rule:
        # If "flip" = 0, then it's a head
        # Else, if "flip" = 1, then it's a tail

        if (flip == 0):
            # "flip" = 0, so it's a head !
            # We have to increment the number of "heads" by 1:
            heads=heads + 1 

    return float(heads)/number_toss

# Here's a test of our function: "prob_head"
my_number_toss = 100
my_head_probability = prob_head(my_number_toss)

print "Probability of heads = "+str(my_head_probability) 
```

**输出示例：**

> 正面概率 = 0.41

* * *

上面的代码为您提供了模拟正常抛硬币的想法。

重新阅读您的评论后，我想我更了解您真正想要什么，所以我添加了这个附加部分......

**下面的代码代表了一种模拟“欺骗”/“假”抛硬币游戏的方法**。

请注意我发表的评论...

```
# The function "unbiasedFlip" returns the average probability of heads considering "n" coin 
# The variable "p" is a fixed probability condition for getting a head.
def unbiasedFlip(n, p):

    # The number of heads, initially set to 0
    heads = 0

    # We toss a coin n times...
    for i in range(0, n):

        # We generate "prob_heads": a random float number such that "prob_heads" < 1
        prob_heads = float(random.random())

        # If "prob_heads" is greater of equal to "p", then we have a head 
        # and we increase the number of heads "heads" by 1:
        if prob_heads>=p:
            heads = heads+1

    # We return the average probability of heads, considering n coin tosses
    # Note: we don't need to return the average prob. for Tails since:
    # it's equal to 1-Avg_Prob(Heads)              
    return float(heads)/n

# An example for testing our function...
# We consider 100 coin toss
my_number_toss = 100

# We want a Head only if our generated probability of head is greater or equal to 0.8
# In fact, considering that the random number generator generates equally probability numbers
# (which means that it provides as many chance to give a Tail or a Head)
# it would be like saying: "we want a probability of 1-0.8 =0.2 chance of getting a head"
my_defined_prob_heads = 0.8

# We get our average probability of heads...
average_prob_heads = unbiasedFlip(my_number_toss, my_defined_prob_heads)
# We get our average probability of tails = 1-Avg_Prob(Heads)
average_prob_tails = 1-average_prob_heads

# We print the results...
print "- Number of toss = "+str(my_number_toss)
print "- Defined probability for head = "+str(my_defined_prob_heads)
print "- Average P(Heads) for n tosses = "+str(average_prob_heads)
print "- Average P(Tails) for n tosses = "+str(average_prob_tails) 
```

**输出示例：**

```
- Number of toss = 100
- Defined probability for head = 0.8
- Average P(Heads) for n tosses = 0.24
- Average P(Tails) for n tosses = 0.76 
```

希望这有助于交配。

如果您有任何问题或不清楚的地方，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T02:02:07.630

首先，我们生成一个随机的硬币翻转序列：

```
import random
n = 100 # number of flips
p = 0.5 # P(Heads) - 0.5 is a fair coin
flips = ['H' if (random.random() < p) else 'T' for flipnr in xrange(n)]
print flips 
```

接下来，我们计算正面和反面的数量：

```
nheads = flips.count('H')
ntails = flips.count('T') 
```

并计算机会：

```
phead = float(nheads) / (nheads + ntails) 
```

请注意（在 Python 2 中）我们需要通过将变量之一强制转换为来强制浮点除法`float`（这在 Python 3 中已修复）。

# c++ - c++, levmar 优化, lapack, tnt 库

> ID：12540665
> 
> 赞同：0
> 
> 时间：2012-09-22T04:19:22.637
> 
> 标签：c++, visual-studio, optimization, lapack++

有人可以帮助解决这个问题：

我最近遇到了来自 [http://www.ics.forth.gr/~lourakis/levmar/的 levmar 优化代码](http://www.ics.forth.gr/~lourakis/levmar/)

该库使用 lapack。

我找不到与 c++ Visual Studio 2010 Express Edition 一起正常工作的 lapack。

相反，我从 [http://math.nist.gov/tnt/download.html找到了 TNT 库](http://math.nist.gov/tnt/download.html)

我的问题是有人知道 tnt 是否可以替代 levmar 中使用的 lapack 例程。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T19:02:30.997

我遇到了类似的情况，只是我选择了英特尔的数学内核库（MKL）。只需从英特尔网站下载试用版即可。尽管该程序的试用期仅持续 30 天，但 MKL 库文件仍然可以使用。您可以将您的项目链接到“mkl_rt.lib”文件，一切就绪。

# php - 在我的部分页面上使用 Php“无缓存”的方法？

> ID：12540666
> 
> 赞同：4
> 
> 时间：2012-09-22T04:19:29.503
> 
> 标签：php, forms, browser-cache

我的网站页面上有一个表格。我有一个从提交表单回显的表，我不想缓存它，因为当您输入表单时，缓存的版本会显示并且不会更新。有没有更好的方法来不缓存页面而不是元标记？

我现在使用的代码是

```
 <?php
       $query='select * from article order by `article`.`time` DESC LIMIT 10';
       $result=mysql_query($query); 
       echo '<table class="mytable" width="1000px" border="0">';
       while($row = mysql_fetch_array($result))
       {
    echo "<td><a href='".$row['url']."'>".$row['title']."</a> - ".$row['name']."</td><td>".$row['class']."</td></tr>";
}
echo '<table>';
       ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:23:22.210

```
<?php
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
?> 
```

见[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:22:31.697

它更复杂，但您可以将“非缓存”数据放入`iframe`并在主文档中嵌入 iframe。

但是，除非您的主页非常大，否则我怀疑仅仅缓存页面的一部分是否值得。通常，如果您的`css`,`javascript`和`images`都是外部的，它们应该被正常缓存并构成您的大部分代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T04:22:01.050

这些 php 标头将阻止您的 php 输出的客户端缓存：

```
<?php
//no  cache headers 
header("Expires: Mon, 26 Jul 2012 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T04:33:11.747

利用：

```
header("Cache-Control: post-check=0, pre-check=0", false); 
header("Pragma: no-cache"); 
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT"); 
```

并使用缓冲缓存其余部分`ob`。

# wpf - 获取wpf中嵌入目录的地址

> ID：12540680
> 
> 赞同：0
> 
> 时间：2012-09-22T04:21:45.933
> 
> 标签：wpf, windows

我有一个`Dll`名为（带有图像列表的画廊）的目录。我将其`Dll`作为资源添加到我的主应用程序中。

我想在主应用程序中获取（画廊文件夹）的地址。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:17:15.403

如果我理解正确（获取地址 = 获取资源），那么您可以尝试 Windows API [FindResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648042%28v=vs.85%29.aspx)和[LoadResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648046%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:02:41.737

如果您的 Gallery 文件夹包含在获取基本目录中，请使用此代码

```
 System.AppDomain.CurrentDomain.BaseDirectory 
```

# css - 网站上的 CSS 字体使用

> ID：12540681
> 
> 赞同：-1
> 
> 时间：2012-09-22T04:21:56.650
> 
> 标签：css, fonts

我想问一下我是否可以在我们自己的网站上合法使用字体，谷歌网站之一在这里使用[http://developer.android.com/develop/index.html](http://developer.android.com/develop/index.html)？因为代码和文件是开放使用的，所以我想知道使用它可能产生的后果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:25:18.703

是的，你可以使用它。即使它是由 Google Android 设计的，它也是一种开源字体。

[你可以在这里](http://www.fontsquirrel.com/fonts/roboto)拿到包裹。单击“@font-face 工具包”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:21:14.953

您可以使用其他方式 google webfont 或 cufon 以获取更多信息，请单击下面的链接

```
 http://www.google.com/webfonts 
```

或者：

```
 http://cufon.shoqolate.com/generate/ 
```

# ruby-on-rails - Rails - 设计：更改密码并发送邮件通知

> ID：12540689
> 
> 赞同：0
> 
> 时间：2012-09-22T04:22:58.140
> 
> 标签：ruby-on-rails, devise

我是 Ruby on Rails 的新手。我想发送一封邮件通知您更改了 Devise 中的密码，但我不知道该怎么做。`<%= link_to "Change your password", edit_user_registration_path%>`我通过添加到 application.html.erb 来完成更改密码工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-02T05:23:51.753

自 Devise 3.5.3 起，更改密码后通知功能已内置，但默认情况下已禁用。要启用它，请打开 config/initializers/devise.rb 并进行此更改并重新启动您的应用程序。

```
- # config.send_password_change_notification = false
+   config.send_password_change_notification = true 
```

[https://github.com/plataformatec/devise/wiki/Notify-users-via-email-when-their-passwords-change](https://github.com/plataformatec/devise/wiki/Notify-users-via-email-when-their-passwords-change)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:28:02.123

您想使用 ActionMailer。

有关详细信息，请参阅以下指南之一：

*   [关于 ActionMailer 的 Rails 指南](http://guides.rubyonrails.org/action_mailer_basics.html)
*   [本教程](http://www.tutorialspoint.com/ruby-on-rails/rails-send-email.htm)使用 Rails 发送电子邮件，或
*   Heroku 帮助中[的“从您的应用程序发送电子邮件”](https://devcenter.heroku.com/articles/smtp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:25:24.550

我认为有很多宝石可用于发送邮件。试试这个：[https ://github.com/benprew/pony](https://github.com/benprew/pony)

# ssh - SSH 中的（ftp 命令） !PWD 和 LCD 等价于什么

> ID：12540696
> 
> 赞同：-1
> 
> 时间：2012-09-22T04:24:09.480
> 
> 标签：ssh, ftp

要使用 ftp 传输文件，我一直在设置本地目录，`LCD /home/user/`然后使用`cd /domain/folder`. 要检查我使用的当前文件夹`PWD`（用于远程）或`!PWD`（用于本地）。

有没有类似的方法可以通过 SSH 连接来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T05:15:41.867

你问的是 SSH 还是 SFTP？如前所述，SSH 不是文件传输协议，而是用于不同任务的一系列不同协议。SFTP 是一种通常通过 SSH 运行的远程文件系统访问协议，确实用于文件传输。

SFTP 始终使用绝对路径，当您向其传递相对路径或不传递路径时服务器的行为取决于服务器软件和远程系统的当前设置和权限。因此，您需要更改代码以符合 SFTP 规则，而不是尝试以 FTP 方式使用 SFTP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:25:49.693

不，SSH 不是文件传输协议；它不关心它的本地目录是什么（它也不用它做任何事情）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T05:04:47.627

虽然`ssh`不直接支持您正在尝试做的事情，但它确实有一些可能有用的工具。

**获取 $HOME 的目录。**

```
ssh <user>@<host> ls 
```

**获取 /tmp 的目录。**

```
ssh <user>@<host> "(cd /tmp; ls)" 
```

**将文件上传到您的主目录**

```
scp <filename> <user>@<host>:. 
```

**将文件上传到：/tmp/z.sh**

```
scp <filename> <user>@<host>:/tmp/z.sh 
```

# neo4j - 当条件为真时停止 neo4j/cypher 查询

> ID：12540701
> 
> 赞同：3
> 
> 时间：2012-09-22T04:25:19.940
> 
> 标签：neo4j, cypher

我有一个图，其中每个节点代表一个 java 类，每个节点都有一个名为命名空间的属性。我想匹配起始节点和最终节点共享一个命名空间但所有中间节点不共享该命名空间的模式。对于有 3 个类（A 类 -> B 类 -> C 类）的情况，我有：

```
START inside1 = node(*) 
match inside1 -[:USES]-> outside1 -[:USES] -> inside2  
where inside1.namespace <> outside1.namespace 
  and inside2.namespace = inside1.namespace  
return inside1.name, outside1.name, inside2.name 
```

这似乎工作正常。当我尝试扩展它时，我尝试了：

```
START inside1 = node(*) 
match inside1 -[:USES]-> outside1 -[:USES*] -> inside2  
where inside1.namespace <> outside1.namespace 
  and outside1.namespace <> inside1.namespace 
  and inside2.namespace = inside1.namespace  
return inside1.name, outside1.name, inside2.name 
```

问题是我不想要任何中间节点与 inside1 共享相同命名空间的路径。所以我的问题是，无论如何我可以告诉它“当你点击一个名称空间等于 inside1.namespace 的节点时停止”？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T07:00:50.780

不确定这是否是最简洁的，但我认为这可以满足您的要求吗？首先，它获取您查询的一般情况，然后将其限制为仅`match`使用`with`.

```
 START inside1 = node(*) 
 MATCH inside1-[:USES*]->outside1-[:USES]->inside2 
 WHERE inside1.ns <> outside1.ns 
   AND inside2.ns = inside1.ns 
  WITH inside1, inside2, outside1 
 MATCH inside1-[:USES]->outside2 
 WHERE inside1.ns <> outside2.ns 
RETURN inside1, outside1, inside2 
```

[http://console.neo4j.org/r/m8iqo5](http://console.neo4j.org/r/m8iqo5)

# android - 在android中使用DOM解析xml

> ID：12540702
> 
> 赞同：0
> 
> 时间：2012-09-22T04:25:28.433
> 
> 标签：android

我正在研究 Rss 提要。我正在使用 DOM 解析器

```
The actual link is:

http://news.google.com/news/url?sa=t&fd=R&usg=AFQjCNEd3ZGNLp5P-6bn44JmKbPfQimTyQ&url=http://www.foxnews.com/world/2012/09/21/libyans-storm-ansar-al-sharia-compound-in-backlash-attack-on-us-consulate/

After executing the function    xml = parser.getXmlFromUrl(URL);
URL=https://news.google.com/news/feeds?ned=us&topic=w&output=rss

In xml Iam getting the link as:

http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNHrclA7rxiQuEvAA_o9ZDRlZQFLkg&amp;url=http://www.usatoday.com/news/world/story/2012/09/21/libyans-storm-militia-in-backlash-of-attack-on-us/57821580/1 
```

当我将此网址粘贴到浏览器中时，它显示“这是一个无效的网址”。

```
How to get the a valid url? Could anyone please help me. 
```

下面的函数是从 url 获取 xml：

```
public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:31:49.797

尝试使用一段代码并根据您的变量进行更改....

```
try {
    // Create a URL for the desired page
        String stringURL = "http://link;
        URL url = new URL(stringURL);
        // Read all the text returned by the server
        BufferedReader in = new BufferedReader(new InputStreamReader(
                url.openStream()));
        while ((xml = in.readLine()) != null) {
            stringXml += xml;

        }
        in.close();

            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(new StringReader(stringXml)));
            doc.getDocumentElement().normalize();
            NodeList nodeLst = doc.getElementsByTagName("nodename");
            Node node = nodeLst.item(0);
            String demo1 = node.getTextContent();

            nodeLst = doc.getElementsByTagName("nodename");
            node = nodeLst.item(0);
            String demo2= node.getTextContent();
            nodeLst = doc.getElementsByTagName("nodename");
            node = nodeLst.item(0);
            String demo3= node.getTextContent();
            nodeLst = doc.getElementsByTagName("nodename");
            node = nodeLst.item(0);
            String demo4= node.getTextContent();
            nodeLst = doc.getElementsByTagName("nodename");
            node = nodeLst.item(0);
            String demo5= node.getTextContent();
            nodeLst = doc.getElementsByTagName("nodename");
            node = nodeLst.item(0);
            String demo6= node.getTextContent();

            nodeLst = doc.getElementsByTagName("nodename");
            node = nodeLst.item(0);

            nodeLst = doc.getElementsByTagName("nodename");
            node = nodeLst.item(0);
            password="+username.getText();
            }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T00:10:34.523

我正在使用 dom 进行解析......很高兴了解这是在程序的单个活动中以最佳方式使用的非常非常快捷的方式。你以前没有见过我想的。

公共类 MainActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /** Create a new layout to display the view */
    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(1);

    /** Create a new textview array to display the results */
    TextView name[];
    TextView website[];
    TextView category[];

    try {

        URL url = new URL(
                "http://xyz.com/aa.xml");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(url.openStream()));
        doc.getDocumentElement().normalize();

        NodeList nodeList = doc.getElementsByTagName("item");

        /** Assign textview array lenght by arraylist size */
        name = new TextView[nodeList.getLength()];
        website = new TextView[nodeList.getLength()];
        category = new TextView[nodeList.getLength()];

        for (int i = 0; i < nodeList.getLength(); i++) {

            Node node = nodeList.item(i);

            name[i] = new TextView(this);
            website[i] = new TextView(this);
            category[i] = new TextView(this);

            Element fstElmnt = (Element) node;
            NodeList nameList = fstElmnt.getElementsByTagName("name");
            Element nameElement = (Element) nameList.item(0);
            nameList = nameElement.getChildNodes();
            name[i].setText("Name = "
                    + ((Node) nameList.item(0)).getNodeValue());

            NodeList websiteList = fstElmnt.getElementsByTagName("website");
            Element websiteElement = (Element) websiteList.item(0);
            websiteList = websiteElement.getChildNodes();
            website[i].setText("Website = "
                    + ((Node) websiteList.item(0)).getNodeValue());

            category[i].setText("Website Category = "
                    + websiteElement.getAttribute("category"));

            layout.addView(name[i]);
            layout.addView(website[i]);
            layout.addView(category[i]);

        }
    } catch (Exception e) {
        System.out.println("XML Pasing Excpetion = " + e);
    }

    /** Set the layout view to display */
    setContentView(layout);

} 
```

} ....................在manyfeast你可以添加

# java - 如何在eclipse中编译引用的项目？

> ID：12540707
> 
> 赞同：1
> 
> 时间：2012-09-22T04:26:46.480
> 
> 标签：java, eclipse, projects

所以我在 Eclipse 中有两个项目，我的主项目引用了我的第二个项目中的类，问题是我不断修改这两个项目，当我运行我的主项目时，它并不总是构建第二个项目，我需要 Eclipse 构建这两个项目项目当我运行我的主要项目时，我该怎么做？对不起，我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:31:40.467

将依赖项目作为项目依赖项添加到 Java 构建路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:34:47.900

您应该检查以确保在“项目”菜单下选中“自动构建”。每次保存后，它都会重建所有内容（即使您正在调试它通常也会交换它！）

# javascript - 我可以在 Spidermonkey 中执行 Javascript 函数并获取返回值吗？

> ID：12540713
> 
> 赞同：5
> 
> 时间：2012-09-22T04:28:16.467
> 
> 标签：javascript, delphi, spidermonkey

我刚刚开始使用 Delphi 和 Spidermonkey。以前我会将网页加载到 TWebBrowser 组件中，并与加载的网页中的 Javascript 代码进行交互。这很麻烦，因为要将值返回给 delphi，我必须通过 Javascript 代码将它们加载到 DOM 对象中，然后从 Delphi 检查 DOM 以找到该对象并访问它的*value*属性。

使用 Spidermonkey，我可以执行特定的 Javascript 函数并轻松地直接将返回值返回到 Delphi 中吗？如果是这样，请向我指出一个有用的快速代码示例。Spidermonkey 附带的 3 个样本似乎并没有涉及到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T15:14:39.363

**> 使用 Spidermonkey，我可以执行特定的 Javascript 函数并轻松地直接将返回值返回到 Delphi 中吗？**

是的，有可能。与 Delphi XE2/XE4 兼容的示例。

```
var
    recFunction,
    recReturnValue,
    recJSVar        : jsval;

........

//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
//-=- Find entry point to function.
//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

if JS_LookupProperty (TSMJSEngine.Context, TSMJSEngine.Global.JSObject, PAnsiChar (AnsiString (strFunctionToRun)), @recFunction) <> js_true then
begin
    //-=- Everything very bad :)
end;

if recFunction.asPtr = nil then
begin
    //-=- Everything very bad :)
end;

//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
//-=- Call function 
//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

if JS_CallFunctionValue (TSMJSEngine.Context, TSMJSEngine.Global.JSObject, recFunction, 0, nil, @recReturnValue) = Integer (false) then
begin
    //-=- Everything very bad :)
end;

//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
//-=- Get returning result (type: string).
//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

strResult := JSValToString (TSMJSEngine.Context, recReturnValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T20:17:46.210

我对 delphi 一无所知，但听起来你会想要设置某种类型的 api 或路由以在前端/后端系统之间进行传输。

# c# - 根据属性列表过滤的现有对象创建新对象

> ID：12540714
> 
> 赞同：0
> 
> 时间：2012-09-22T04:28:21.877
> 
> 标签：c#, asp.net, reflection

我想从基于列表的对象中删除所有属性。

原因是在我的 Web 服务调用中，我的响应对象相当大，我希望能够允许客户端限制从对象返回的属性。

例如

```
/api/movie/1?filter=Name,Id,Gross

public class MovieResponse
{
     public string Name {get;set;}
     public int Id {get;set;}
     public double Gross {get;set;}
     public string Director {get;set;}
     public Rating Rating {get;set;}
} 
```

我想根据上面看起来像这样的服务调用返回一个对象

```
public class MovieResponse
{
     public string Name {get;set;}
     public int Id {get;set;}
     public double Gross {get;set;}
} 
```

我假设如果我使用的是 aspnet 或 wcf，我会挂接到请求生命周期中，在我将响应返回给客户端之前我做的最后一件事是运行我的过滤器/行为来过滤并返回将反序列化的新对象转换成 JSON 或 XML

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:35:56.163

我认为这不可能，因为您正在尝试返回一种动态对象，但函数的返回类型必须是类型化的，因​​此，它的属性必须定义良好（尽管可以为**空**）。

您可以尝试返回[Dictionary](http://www.dotnetperls.com/dictionary)并根据其内容重新创建正确的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:36:23.710

如果您选择使用 JSON 进行序列化，您可以创建一个字典，就像@Randolf RF 所说的那样。如果您使用 Json.NET，那么该字典将被[序列化为一个对象](https://stackoverflow.com/questions/3739094/serializing-deserializing-dictionary-of-objects-with-json-net)。

```
public static Dictionary<string, object> FilterMovie(MovieResponse movie, string[] fields)
{
    var data = new Dictionary<string, object>();
    var movieType = movie.GetType();

    foreach (var field in fields)
    {
        data.Add(field, movieType.GetField(field).GetValue(movie));
    }

    return data;
} 
```

然后，另一方面，可以使用 MovieResponse 类完成反序列化。

# css - ipad 上的 z-index 问题（chrome / safari）

> ID：12540719
> 
> 赞同：1
> 
> 时间：2012-09-22T04:29:20.287
> 
> 标签：css, ios, html, z-index

我在 iOS 中遇到 z-index 问题，您可以在此处查看这两个图像[http://imgur.com/n7QCj,BOIHo](http://imgur.com/n7QCj,BOIHo)（桌面和 iOS）。

[http://bit.ly/Q47DBP](http://bit.ly/Q47DBP)

我有 z-index:-11; 在我的 .fondoTop 中，如果我设置为等于或高于 0 的值，则将徽标和 .redes div 放在后面。我试图修改 .redes 和 logo div 的 z-index

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:36:29.587

这是因为您的 .container_12。

除了那个之外，所有的都有 z 索引。所以你可以简单地将这些样式添加到你的 .container_12

```
position:relative;
z-index:20; 
```

然后你可以把一个高于 0 的 z-index 放到 .fondoTop

# highcharts - 高图中的重叠列

> ID：12540720
> 
> 赞同：11
> 
> 时间：2012-09-22T04:29:29.883
> 
> 标签：highcharts, highstock

有没有办法创建重叠列？

例如在[这个 jsFiddle](http://jsfiddle.net/jugal/67BkD/2/)中，蓝色和红色列应该如下所示相互重叠，蓝色在后面，红色在前面。

![重叠列](../Images/1800d2769da5c629620bbbf6d38e8750.png)

澄清一下，我不想要堆叠列，蓝色和红色列都应该从 xAxis (y=0) 开始，而不是一个在另一个之上

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-16T21:44:25.933

您也可以通过设置`grouping: false`.

[http://jsfiddle.net/garrickcheung/67BkD/19/](http://jsfiddle.net/garrickcheung/67BkD/19/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-22T09:16:46.353

**编辑** Highcharts 在他们的 2.3 版中引入了[plotOptions.column.grouping](http://api.highcharts.com/highcharts#plotOptions.column.grouping)开关来处理这个问题。参考[加里克的回答](https://stackoverflow.com/a/14368441/1566575)

我将在下面留下答案，因为它仍然有助于理解 groupPadding 和 pointWidth 如何工作。

**原始答案**

您正在寻找[分组和重叠的列](http://jsfiddle.net/jugal/67BkD/)？

您可以通过将[plotOptions.column.groupPadding](http://api.highcharts.com/highstock#plotOptions.column.groupPadding)设置为 0.5来实现

```
plotOptions: {
    column: {           
        groupPadding: 0.5   // Exactly overlap
        pointWidth: 20,                                     
    }
}, 
```

这是一张图片来说明 groupPadding 是如何工作的 ![组填充](../Images/da2dba9da84e6034c792bf60e6aa6e2a.png)

如您所见，当 groupPadding 为 0.5 时，列宽会受到影响以提供所需的填充，通过指定 pointWidth 您可以对抗这种行为

# google-maps-api-3 - Google map API v3：加载巨大的多边形（区域边界）

> ID：12540721
> 
> 赞同：1
> 
> 时间：2012-09-22T04:29:36.857
> 
> 标签：google-maps-api-3, polygon

我正在处理这个问题：在谷歌地图 API v3 上加载巨大的多边形。它是一个国家或地区的行政边界，所以它很大，很多顶点。我尝试了 02 个选项：

1.  从定义的路径绘制多边形：这很慢
2.  使用google FusionTableLayer，这个速度很快，问题是在某些情况下google的边界数据不正确或者不充分，想用自己的数据。是否可以调整 Google FusionTableLayer 以从我自己的来源获取数据。例如一些像这样的伪代码：

```
var layer = new google.maps.FusionTableLayer(tableid, options);
layer.setData(owndata); // instead of layer.setQuery(query) to get data from Google 
```

有可能做这个黑客吗？谁能给我小费？非常感谢。

代码摘录：

```
var paths=[]; 

var vlist=[.............]; //long list of lon,lat saved in .txt file which may size up to 1.3 Mb 

for(var j=vlist.length-1;j>0;j-=2){ 
paths.push(new google.maps.LatLng(vlist[j],vlist[j-1])) 
} 

var poly = new google.maps.Polygon({paths:paths,...}); 

poly.setMap(mymap); 
thePolygons.push(poly); 

//more polygons, some sparse areas with a lot of islands, the number of polygons may run to 1000 
```

//....

# c# - 如何在 c sharp 中初始化数组列表？

> ID：12540726
> 
> 赞同：0
> 
> 时间：2012-09-22T04:29:59.627
> 
> 标签：c#, winforms

如何初始化数组列表？

```
public void createRect()
{
  Rectangles[] rect = new Rectangles[];
  List<Rectangles> rect= new <Rectangles>();
} 
```

我尝试了这两个陈述，但没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:51:18.757

您可能需要一个列表，其中包含 Rectangle 的对象。
您可以尝试以下操作：

```
List<Rectangle> rec = new List<Rectangle>();
for(int i=0; i<YourCustomSize; i++)
  rec.Add(new Rectangle(){ Property1 = Value1, Property2 = Value2, ...}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:32:15.727

尝试`var rectList = new List<Rectangle[]>();`

`List rect = new ();`没有意义。您需要在`new`关键字后面加上您要创建的内容。例如。`List rect = new List<Rectangle[]>();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T04:35:19.773

数组是固定长度的列表。所以你必须用这个数组的长度来初始化它。例如：如果您需要五个数组元素，您可以通过以下方式初始化：

```
Rectangles[] rect = new Rectangles[5]; 
```

请参考[C# 的数组](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)

因此，如果您需要创建数组列表：

```
Rectangles[] rect1 = new Rectangles[5];
rect1[0] = new Rectangles();
rect1[1] = new Rectangles();
rect1[2] = new Rectangles();
rect1[3] = new Rectangles();
rect1[4] = new Rectangles();

Rectangles[] rect2 = new Rectangles[3];
rect2[0] = new Rectangles();
rect2[1] = new Rectangles();
rect2[2] = new Rectangles();

List<Rectangles[]> rectList= new List<Rectangles[]>();
rectList.Add(rect1);
rectList.Add(rect2); 
```

# javascript - ios6“翻译”方法干扰？

> ID：12540728
> 
> 赞同：0
> 
> 时间：2012-09-22T04:30:09.403
> 
> 标签：javascript, ios6

为什么以下内容在 ios6 上不起作用，但用“something_else”替换“翻译”使其正常工作？

```
<style>
    .body{position:absolute;top:0px;left:0px;right:0px;bottom:0px;z-index:2;}
</style>
<div class="body"></div>
<script language="javascript">
    var add_output = function(html,parent){
        parent.insertAdjacentHTML('afterbegin',html)
        return parent.childNodes[0];
    }
    var new_output = add_output('<div style="position:absolute;top:10px;left:10px;z-            index:1;" class="new_output">0</div>',document.body);
    new_output.translate = function(d){
        this.innerHTML = d;
    }
    document.querySelector('.body').addEventListener('touchmove',function(e){
        e.preventDefault();
        new_output.translate(e.touches[0].pageX);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:10:32.517

HTML5 中添加了一个新[`translate`](http://dev.w3.org/html5/spec/global-attributes.html#the-translate-attribute)属性。您只是将其设置为`true`，因为[根据定义](http://es5.github.com/#x9.2)，所有对象的计算结果都是`true`。

# spring - spring-mvc URL映射问题

> ID：12540730
> 
> 赞同：0
> 
> 时间：2012-09-22T04:30:48.303
> 
> 标签：spring, spring-mvc

我需要将我的 URL 在 spring mvc 中映射为

> www.xyz.com\admin\addproduct, www.xyz.com\admin\usermanagement, www.xyz.com\admin\report,

我在我的 web.xml 中尝试了

```
<url-pattern>/</url-pattern> 
```

我还阅读了关于这个 [Spring MVC url-mapping 的上一篇文章](https://stackoverflow.com/questions/9816642/spring-mvc-url-mapping)

但是当我在 dispatcher-servlet.xml 文件中添加 mvc 资源时，出现以下错误

> 在此行发现多个注释： - 配置问题：找不到元素 [resources] 的 BeanDefinitionParser 违规资源：文件 [D:/STS-3.0-Workspace/Sale365/WebContent/WEB-INF/dispatcher-servlet.xml
> ] - 找不到元素的 BeanDefinitionParser [资源]

调度程序-servlet.xml

```
<context:component-scan base-package="com.company" />
    <bean id="viewResolver"
         class="org.springframework.web.servlet.view.UrlBasedViewResolver">
         <property name="viewClass"
             value="org.springframework.web.servlet.view.JstlView" />
         <property name="prefix" value="/WEB-INF/jsp/" />
         <property name="suffix" value=".jsp" />
     </bean>
     <mvc:annotation-driven />   <mvc:resources mapping="/res/**" location="/admin/" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:10:22.133

您不应该将您的资源/** 映射到您在 Spring 控制器中映射的相同 URL。

在控制器中，您将 /admin/usermanagement、/admin/report 映射到 spring 方法，同时将资源定义到 /admin/ 路径。

改变：

```
<mvc:resources mapping="/res/**" location="/admin/" /> 
```

到存储静态资源的其他路径。例如 /WebContent/resources

```
<mvc:resources mapping="/res/**" location="/resources/" /> 
```

让我知道这是否有效。

# entity-framework - Entity Framework 5.0 中的查找表（多个查找值的单个表）

> ID：12540743
> 
> 赞同：1
> 
> 时间：2012-09-22T04:32:53.603
> 
> 标签：entity-framework, lookup-tables

在我的旧数据库中，我们有以下存储查找表的方式。

```
Lookup Table
----------
1 Category 
2 Country 
3 Region
4 Cities
5 Roles 
```

每个查找表记录将有多个查找详细信息

示例：在 LookupDetails 表中，Country 将包含所有国家/地区列表，Region 将包含所有区域列表，以此类推其他值。

现在我正在尝试访问 Product 表中的 Categories 值。

我的产品表就像

*   产品编号
*   产品名称
*   类别ID

现在 Product 表中的 CategoryID 指的是 LookupDetails 值。有人可以帮我访问 LookupDetails 名称（即在我的情况下类别名称）

如果我们在表之间有适当的关系，我相信 EF 可以顺利运行。由于在这种情况下我的产品表没有引用 Lookupdetails 表，所以事情有点复杂，有人可以帮我解决这个问题吗？

谢谢

# javascript - 如何在MVC视图中隐藏div？

> ID：12540747
> 
> 赞同：0
> 
> 时间：2012-09-22T04:34:19.967
> 
> 标签：javascript, asp.net-mvc-3

我正在开发 MVC 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我添加了一个局部视图，它从数据库加载评论/记录。

在下图中，我们可以看到称为员工索引视图运行时的注释框。

现在我想在用户单击删除按钮时删除 div。

但它现在不工作......

请检查图像...

![在此处输入图像描述](../Images/b52783a25c2a380768c73a066d94ba05.png)

我的应用程序中有以下代码...

```
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>

@model  IEnumerable<CRMEntities.Comment>

  <div class="ParentBlock">

    @foreach (var item in Model)
    {
        <div class="OwnerClass" id="OwnerName" data-comment-id="@item.Id">

         <span class="EmpName"> @Html.ActionLink(item.Owner.FullName, "Details", "EMployee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>

           @Html.DisplayFor(ModelItem => item.CommentDateTime)

          <span class="EmpName"><button type="button" class="deleteComment">Delete</button></span>

          <span class="EmpName"> @Html.ActionLink("Delete", "Delete", "Comment", new { id = item.Id }, new { @style = "color:#1A6690;" })</span>

        <p class="CommentP">
           @Html.DisplayFor(ModelItem => item.CommentText)
        </p>

        </div>

    }

     <p class="p12">

      </p>

</div>

      <p id="ClassPara" class="ShowComments" onclick="chkToggle()">Show All Comments</p>

}

   @Html.TextArea("Comment", "", 5, 80, "asdsd")

    <input type="button" value="Add Comment" id="AddCommentButton"/>                         
    <input type="button" value="Clear" onclick="clearText()"/>                    

    <br />

</body>
</html>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".deleteComment").click(function () {
            alert("asd");
            var commentBlock = $(this).parent('.OwnerClass');
            commentBlock.hide('slow')

     });
    });

</script> 
```

更新脚本....

```
$(document).ready(function () {
    $(".deleteComment").click(function () {

        var commentBlock = $(this).parent('.OwnerClass');

        $.ajax({
            type: 'post',
            url: '/Comment/DeleteComment',
            dataType: 'json',
            data:
            { 

            ////////////////////////////////////////
            //What should I write here ? How can I get comment ID here ? 
            ////////////////////////////////////////
            },
            success: function (data) {

              var commentBlock = $(this).closest('div');
            commentBlock.hide('slow');

            }

        });

 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:52:17.367

试试这个：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".deleteComment").click(function () {
            alert("asd");
            var commentBlock = $(this).closest('div');
            commentBlock.hide('slow');
     });
    });
</script> 
```

此外，您可以使用：

```
<script type="text/javascript">
        $(document).ready(function () {
            $(".deleteComment").click(function () {
                alert("asd");
                var commentBlock = $(this).closest('div');
                commentBlock.html('');
         });
        });
    </script> 
```

# vim - 在 Intellij IDEA 中模拟 Vim 的 ScrollBind 行为

> ID：12540749
> 
> 赞同：1
> 
> 时间：2012-09-22T04:34:31.703
> 
> 标签：vim, intellij-idea

在“拆分模式”中查看时，我真的开始依赖 Vim 的 ScrollBind 功能......但是，如果 Intellij IDEA 中提供了它真的很棒......我已经搜索过但没有太多运气。 .. 是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:07:23.527

差异视图是一种解决方法，但在使用拆分编辑器时，此功能没有直接等效项。考虑为[相关功能请求](http://youtrack.jetbrains.com/issue/IDEABKL-1046)投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:47:38.883

“[比较两个文件](http://www.jetbrains.com/idea/webhelp/comparing-files.html)”似乎可以完成这项工作......

# data-modeling - 我正在使用 ER 图表方法学习数据建模

> ID：12540750
> 
> 赞同：0
> 
> 时间：2012-09-22T04:34:33.407
> 
> 标签：data-modeling, visio, erd

我正在使用 ER 图表方法学习数据建模。有人可以帮助我如何处理这个案子。

该图应包含两个实体，Employee 和 Course。员工实体包含员工 ID 的 PK 和以下附加属性：

1.  员工姓名
2.  出生日期

课程实体包含具有以下附加属性的课程 ID PK。

1.  课程名称
2.  话题

此外，Date Completed 的关系上还有一个属性（property）。如果我想跟踪哪些员工会收到员工完成每门课程的通知，那么在 Visio 中进行建模的正确方法是什么。

这是我到目前为止所尝试的：

![在此处输入图像描述](../Images/a397bd60680d277a36edce651db0d730.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:40:43.833

答案实际上取决于您使用的符号。例如，从图中可以看出您正在使用混合 IE/IDEF1X 表示法。在这种表示法和方法中，关系不能具有属性。在这种情况下，需要创建一个解决关系的交叉实体。有时这也称为关联实体或解析实体。

我从关系和属性猜测，您的交叉实体将类似于 COURSE COMPLETION。然后你会有一些看起来像的东西：

```
EMPLOYEE -completes----< COURSE COMPLETTION > -----completes -- COURSE 
```

COURSE COMPLETION 将继承每个实体的标识符：

```
COURSE COMPLETION
=========================
COURSE ID (PK)
EMPLOYEE ID (PK)
DATE COMPLETED 
```

还想说明这样一个事实，即这只为每个员工/课程对提供一个完成。这可能并不反映现实生活。

我不确定我是否理解您关于通知的其他问题。你能扩展一下吗？

# mysql - 当我有外键时 MySQL 插入多个值

> ID：12540751
> 
> 赞同：0
> 
> 时间：2012-09-22T04:34:39.877
> 
> 标签：mysql, foreign-keys

我已经坚持了很多小时，我需要你的帮助。

我有两个数组：

```
CREATE TABLE if not exists chr(
id_chr int(10) NOT NULL AUTO_INCREMENT,
number int(10),
genename varchar(30) not null,
ensembleid varchar(30) not null,
strand int(10) not null,
band varchar(10) not null, 
genestart int(30) not null,
geneend int(30) not null,
biotype varchar(30),
status varchar(10),
transcriptsnum int(10),
gc float(10) not null,
PRIMARY KEY(id_chr)
); 
```

和

```
CREATE TABLE if not exists gene(
id_gene int(10) NOT NULL AUTO_INCREMENT,
name varchar(30) not null,
transcriptid int(30) not null,
idchr int(10) not null,
PRIMARY KEY(id_gene)
); 
```

到目前为止，我已经将值插入到 chr 表中（大约 8000 行），并且我还想要一个表基因的多重插入。

我得到错误：

```
Error: Cannot add or update a child row: a foreign key constraint fails 
```

问题是，`foreign key`由于我必须插入多行，我如何插入值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:41:46.580

```
Try this:

INSERT INTO gene(name,transcriptid,idchr)
select value1,value2,id_chr from char 
```

# c - 如何解决 2+2 和 2++2 冲突

> ID：12540757
> 
> 赞同：0
> 
> 时间：2012-09-22T04:36:09.570
> 
> 标签：c, parsing, bison, calculator, lex

在更大的程序中，我给出了以下内容（flex/bison）

在弹性：

```
pn [\+|\-]
dig [0-9]+
exp [e|E]{dig}+ 
```

.

.

.

```
"+"             {printf("+ detected\n");
                return PLUS_SIGN;}

{pn}?{dig}+         { printf("digit detected - %s\n",yytext);
                sscanf(yytext, "%d", (int*)&yylval);
                return TYPE_INT;} 
```

在野牛：

```
expr:
    expr PLUS_SIGN expr
      {
        $$ = $1 + $3;
        printf(" $$=%f\n",$$);
      }
    | TYPE_INT
      {     
        $$ = (int)$1;
        printf(" $$=%f\n",$$);
      }
; 
```

问题是：

当我给 2+2 它识别 2 和 +2 而不是 2 , + , 2

我怎样才能让它做加法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T04:47:50.193

```
{pn}?{dig}+ 
```

不要使加号或减号 ( `{pn?}`) 成为数字标记的一部分。将它们视为两个单独的标记，`+`并且`2`. 那么 flex 就没有任何歧义需要解决了。

```
{dig}+ 
```

相反，让 bison 处理一元加号和减号运算符。让它成为解析器的工作，而不是词法分析器的工作。

```
| PLUS_SIGN expr
  {
    $$ = +$2;
    printf(" $$=%f\n",$$);
  }
| MINUS_SIGN expr
  {
    $$ = -$2;
    printf(" $$=%f\n",$$);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:45:53.730

语法显示 PLUS_SIGN 的左边部分和右边部分在减少符号时具有相同的优先级。 PLUS_SIGN 是左组合，所以新的语法如下：

```
expr: expr PLUS_SIGN expr2
      {
         $$ = $1 + $3;
         printf("$$=%f\n", $$);
      }
    | expr2
     {
        $$ = $1;
     }
;
expr2: TYPE_INT
     {     
        $$ = (int)$1;
        printf(" $$=%f\n",$$);
     }
; 
```

# html - Firefox15.0.1 中的设计不兼容问题

> ID：12540758
> 
> 赞同：3
> 
> 时间：2012-09-22T04:36:16.090
> 
> 标签：html, css, firefox

[http://www.atticuspetdesign.com](http://www.atticuspetdesign.com)

这个网站在 google chorme 中看起来不错，但是在 pet Industry 浮动到下一行之后，任何人都可以帮我解决这个问题，我从过去 1 周开始就被困在这件事上。:(

它看起来像

> ![在此处输入图像描述](../Images/52ec8ba3fc91d56054237b2ae088bc6a.png)

但它看起来像

> ![在此处输入图像描述](../Images/a1ba3aeb193e382e060e7bdb21a1b3e6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:58:25.467

我还可以在 15 英寸 MacBook Pro 上的 Firefox 15.0.1 中看到该问题。

您似乎没有设置重置字体大小（例如 14 像素）。在正文上设置默认字体大小，然后使用 em 可能有助于缓解问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:37:58.550

检查您是否意外放大了页面。这可能是导致它看起来很奇怪的原因。

如果您使用的是 Mac，请点击 CMD + 0，这应该会让您处于无缩放状态。Windows 可能是 CTRL + 0，但我不确定。

我在 Firebug 中查看了您的代码。你在哪里：

```
.cation-outer {
    margin: 0 0 60px 35px;
} 
```

将其更改为：

```
.cation-outer {
    margin: 0 0 60px 0;
} 
```

这使它看起来像您在 Firefox 中要求的那样。仔细检查它在其他浏览器中的外观是否仍然符合您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T06:22:23.680

我已经检查了您在 Fireforx 15.0.1 上的页面并得到了同样的错误。我认为这是因为字体大小，您可以更改容器的宽度并解决问题，但这只是浏览器特定的解决方案，该解决方案将设计混搭到 chrome 中。所以，我认为最好的解决方案是更改字体大小。

进入你的`coption-align` 班级，申请`font-size: 81px;`看起来页面在 chrome 和 Firefox 中都可以。

希望这可以解决您的问题。

# c - 构建 wpa_supplicant 时出现 LNK 错误 2001

> ID：12540764
> 
> 赞同：0
> 
> 时间：2012-09-22T04:36:55.937
> 
> 标签：c, visual-studio-2005, wpa

我正在尝试使用 VS2005 在 Windows 上构建 wpa_supplicant 应用程序。当我构建它时，我收到一个链接错误：

```
------ Rebuild All started: Project: wpa_cli, Configuration: Release Win32 ------

Deleting intermediate and output files for project 'wpa_cli', configuration 'Release|Win32'

Compiling...  
wpa_ctrl.c  
wpa_cli.c  
os_win32.c  
common.c  

Linking...  

wpa_cli.obj : error LNK2001: unresolved external symbol _eloop_init  
wpa_cli.obj : error LNK2001: unresolved external symbol _eloop_unregister_read_sock  
wpa_cli.obj : error LNK2001: unresolved external symbol _eloop_register_timeout  
wpa_cli.obj : error LNK2001: unresolved external symbol _edit_redraw  
wpa_cli.obj : error LNK2001: unresolved external symbol _edit_init  
wpa_cli.obj : error LNK2001: unresolved external symbol  _eloop_register_read_sock  
wpa_cli.obj : error LNK2001: unresolved external symbol _eloop_destroy  
wpa_cli.obj : error LNK2001: unresolved external symbol _eloop_terminate  
wpa_cli.obj : error LNK2001: unresolved external symbol _eloop_register_signal_terminate  
wpa_cli.obj : error LNK2001: unresolved external symbol _eloop_run  
wpa_cli.obj : error LNK2001: unresolved external symbol _eloop_cancel_timeout  
wpa_cli.obj : error LNK2001: unresolved external symbol _edit_deinit  
wpa_cli.obj : error LNK2001: unresolved external symbol _edit_clear_line  

D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0
\wpa_supplicant\vs2005\Release\wpa_cli.exe : fatal error LNK1120: 13 unresolved externals 
```

我已经给出了额外的包含目录，其中定义了 eloop_init、eloop_unregister_read_sock 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:49:37.543

另一个常见问题：

除了额外的包含目录（以便您的代码可以编译）之外，您还应该添加链接库（以便您的代码可以链接）：它应该在

> 项目属性/配置属性/链接器/输入/附加依赖

在 VS2010 中，它会是这样的：

![在此处输入图像描述](../Images/8c39cc6754d56e213f36e0206194e5c7.png)

其他版本的 Visual Studio 应该类似。

# asp.net-mvc - 如何限制tinymce文件大小上传？

> ID：12540776
> 
> 赞同：1
> 
> 时间：2012-09-22T04:40:47.200
> 
> 标签：asp.net-mvc, tinymce

有谁知道如何限制 tinymce 中的文件大小上传？

我正在使用带有 asp.net MVC 的netadvimage 插件（ [http://aspnetadvimage.codeplex.com/SourceControl/list/changesets ）。](http://aspnetadvimage.codeplex.com/SourceControl/list/changesets)

南武

# objective-c - 为什么我的新协议只能接受方法中的基本类型？

> ID：12540779
> 
> 赞同：1
> 
> 时间：2012-09-22T04:41:42.623
> 
> 标签：objective-c, cocoa, xcode4.5

```
#import <Foundation/Foundation.h>

@protocol delegate <NSObject>

-(void)test:(NSString *)string;

@end 
```

在我从 xcode 菜单创建一个新协议后，我发现我不能`(NSString *)`在我的协议方法中使用 type 作为参数，但只有 int 和其他基本类型，自动完成功能也不起作用。

这是为什么？

编辑：也许一张图片可以解释我的意思。请在此处查看：http: [//sfault-image.b0.upaiyun.com/4a/cc/4acc50cc82e03404184c35c59c56cfcd_article](http://sfault-image.b0.upaiyun.com/4a/cc/4acc50cc82e03404184c35c59c56cfcd_article)

# wamp - wamp 扫描额外的 php.ini

> ID：12540788
> 
> 赞同：4
> 
> 时间：2012-09-22T04:42:52.893
> 
> 标签：wamp, php

有人知道如何在 localhost 上设置 wampserver 以扫描根目录中的 php.ini 文件吗？

我可以在我的远程服务器上毫无问题地执行此操作，它可以正常工作。但我似乎无法弄清楚如何让 localhost 以相同的方式运行。

编辑（再次）：我的本地主机上有三个处于不同开发阶段的不同网站。我想在特定网站的根目录中放置一个 php.ini 文件，并让这些更改影响该网站。在我的远程服务器上，它按预期工作。但是在 wampserver 上，我无法让它工作。Wamp 不会读取根目录中的 php.ini 文件，也不会读取我放在其他任何地方的文件。

问题：为什么 wamp 不会扫描树中的所有文件夹中的 php.ini 文件？我认为这是标准的，除非另有规定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:57:28.880

试试这个教程

[php.ini 包含路径](https://stackoverflow.com/questions/9345109/php-ini-include-path)

[http://www.howtoforge.com/how-to-set-up-apache2-with-mod_fcgid-and-php5-on-debian-etch-p2](http://www.howtoforge.com/how-to-set-up-apache2-with-mod_fcgid-and-php5-on-debian-etch-p2)

[为 php.ini 设置自定义路径（不在 Apache 中）](https://stackoverflow.com/questions/5046192/setting-custom-path-to-php-ini-not-in-apache)

这将帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:44:25.463

截至[http://php.net/manual/en/configuration.file.per-user.php](http://php.net/manual/en/configuration.file.per-user.php)：

**.user.ini 文件**

自 PHP 5.3.0 起，PHP 包含对每个目录的 .htaccess 样式 INI 文件的支持。这些文件仅由 CGI/FastCGI SAPI 处理。此功能淘汰了 PECL htscanner 扩展。如果您使用的是 Apache，请使用 .htaccess 文件以获得相同的效果。

除了主 php.ini 文件外，PHP 还会扫描每个目录中的 INI 文件，从请求的 PHP 文件的目录开始，一直到当前文档根目录（如 $_SERVER['DOCUMENT_ROOT'] 中设置的那样） ）。如果 PHP 文件位于文档根目录之外，则仅扫描其目录。

只有具有 PHP_INI_PERDIR 和 PHP_INI_USER 模式的 INI 设置才能在 .user.ini 样式的 INI 文件中被识别。

两个新的 INI 指令 user_ini.filename 和 user_ini.cache_ttl 控制用户 INI 文件的使用。

**user_ini.filename**设置 PHP 在每个目录中查找的文件的名称；如果设置为空字符串，PHP 根本不会扫描。默认值为 .user.ini。

**user_ini.cache_ttl**控制重新读取用户 INI 文件的频率。默认值为 300 秒（5 分钟）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T08:34:37.923

有两种可能（也许是第三种，但我现在不在乎）。各有各的缺点。至少为了我的目的。
1）正如“rkosegi”所回答的 .user.ini 文件：[http](http://php.net/manual/en/configuration.file.per-user.php)
: //php.net/manual/en/configuration.file.per-user.php 2）ini.sections：[http ://us3.php.net /manual/en/ini.sections.php](http://us3.php.net/manual/en/ini.sections.php)

我的解决方案是根据正在开发的网站的需要重置和/或更新 wampserver php.ini。

# unix - 将系统调用的返回值传递给freebsd中的用户进程

> ID：12540789
> 
> 赞同：1
> 
> 时间：2012-09-22T04:43:07.170
> 
> 标签：unix, freebsd, system-calls

我已经实现了一个系统调用，它根据进程优先级中的某些条件返回诸如 0、1 和 2 之类的值。我正在执行`syscall()`一个文件。当系统调用返回 0 时，我得到的返回值为`syscall()`0。但是，当它返回 1 或 2 时，我得到 1 的 -1 和任何其他值的系统调用号。请让我知道，是否可以返回 0 和 -1 以外的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:56:20.943

系统调用的内核实现不返回值，而是返回错误代码。您的函数的第一个参数是“结构线程”，您可以通过将 td->td_retval[0] 设置为所需的返回值将返回值传递回用户空间。例如，参见 sys/kern/kern_prot.c 中 getpid() 的实现。

# geany - Geany - 链接库中类的提示列表

> ID：12540792
> 
> 赞同：0
> 
> 时间：2012-09-22T04:43:24.573
> 
> 标签：geany

对于 C++，Geany 中是否有一个功能（或提供此功能的插件）可以启用类的所有成员的建议/提示列表，以及链接库中的类？我的意思是，就像在 Java 中一样，当您在对象实例变量之后键入 dot(.) 时，它的所有成员（显示方法和公共变量）。这也适用于导入包和类。

例如在 Java 中（使用 Eclipse）：

```
Vector<Object> vec = new Vector<Object();
vec.[here after typing a dot(.), all public members of Vector are shown as hints] 
```

我想在 Geany 中拥有这种功能，因为在 C++ 中很难记住正确的函数或标头名称。

Geany 中是否有我上面提到的功能？或者任何插件来实现这一点？我知道 Geany 中有自动完成功能，但它仅在您已经使用或调用过该特定函数/变量一次时才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T04:29:33.787

您将在 Geany 中获得两种类型的“标签”，它们提供自动完成功能。第一个来自会话/工作区，其中仅包含当前打开的文件，第二个来自从“标签”目录读取的“全局标签”（位置取决于平台，请参阅下面的手动链接）。它实际上使用了一个古老但维护良好（可能比 Exuberant Ctags 本身更好）的 Ctags 分支，并且最近添加了对读取普通 Exuberant Ctags 文件的支持。当然，与真正的解析器相比，Ctags 是相当有限的，但我认为这是您要询问的功能。[您可以在手册](http://www.geany.org/manual/current/index.html#global-tags)中找到更多信息。

# python - hashlib.sha1 在被 cron 调用时失败

> ID：12540793
> 
> 赞同：0
> 
> 时间：2012-09-22T04:44:26.983
> 
> 标签：python, cron, hashlib

我有一个简单的 python 脚本来测试 python 中的 hashlib 模块

```
 #testhashlib.py
    import hashlib
    print hashlib.sha1('hello') 
```

该脚本在手动调用时运行良好，但在由 cron 调用时失败（日志文件中没有打印输出）。我还在 crontab 顶部添加了库，以确保 cron 可以看到所有 python 库。

```
 LD_LIBRARY_PATH=/home/adam/python/lib

    * * * * * /home/adam/python/bin/python /home/adam/crons/testhashlib.py >> /home/adam/log/testhashlib.log 
```

知道我在这里缺少什么吗？

# functional-programming - SML 值限制 - 堆

> ID：12540801
> 
> 赞同：0
> 
> 时间：2012-09-22T04:46:21.070
> 
> 标签：functional-programming, sml, smlnj

基本上，我想要一个函数来从一个节点和 2 个子堆中创建一个堆。堆表示如下（其中Cons中的int表示节点的rank）

```
datatype 'a heap = Empty | Heap of int * 'a * 'a heap *  'a heap 
```

我的功能是：

```
fun makeHeap x h1 h2 = Heap ((rank h1)+1, x, h1, h2) 
```

程序编译但当我调用 makeHeap 时，我得到一个奇怪的值而不是堆：

```
makeHeap(#"c", Empty, Empty);
stdIn:72.1-72.29 Warning: type vars not generalized because of
   value restriction are instantiated to dummy types (X1,X2,...)
val it = fn
 : (char * ?.X1 heap * ?.X2 heap) heap
    -> (char * ?.X1 heap * ?.X2 heap) heap
      -> (char * ?.X1 heap * ?.X2 heap) heap 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:39:09.793

您已经`makeHeap`以咖喱形式定义，但使用元组参数调用它。这两种形式意味着不同的类型，因此不可互换。只需将呼叫更改为

```
makeHeap #"c" Empty Empty 
```

或者，将定义更改为

```
fun makeHeap(x, h1, h2) = ... 
```

# php - 在 .htaccess 中，如何 301 重定向动态页面？

> ID：12540809
> 
> 赞同：1
> 
> 时间：2012-09-22T04:47:59.997
> 
> 标签：php, .htaccess, redirect, dynamic

在 .htaccess 中，如何 301 重定向动态页面？

例如，如果我想要一个`www.domain.com/SomeFolder/theThing`重定向到的规则`www.domain.com/theThing`怎么办？

我只想删除`/folder`并保留其他所有内容。我已经尝试过但没有成功。

编辑：

我会尝试更清楚。我有：

1.  www.domain.com/SomeFolder/theThing
2.  www.domain.com/SomeFolder/AnotherThing
3.  www.domain.com/SomeFolder/AndOneMoreThing
4.  ..等等等等。

我想删除它`SOMEFOLDER`，因为所有这些链接都已移至索引。但是其中有很多，我正在考虑使用动态重定向 301 自动执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:51:31.657

这就是你可以做到的。

**使用 php：**

```
<?
 Header( "HTTP/1.1 301 Moved Permanently" );
 Header( "Location: http://www.new-url.com" );
?> 
```

**使用 htaccess**：

使用以下代码创建一个 .htaccess 文件，它将确保您旧域的所有目录和页面都将正确重定向到您的新域。.htaccess 文件需要放在你旧网站的根目录下（即你的索引文件所在的同一个目录）

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*) http://www.newdomain.com/$1 [R=301,L] 
```

除了重定向之外，我建议您联系每个反向链接站点以修改其反向链接以指向您的新网站。

**注意：**这种 .htaccess 重定向方法仅适用于启用了 Apache Mod-Rewrite 模块的 Linux 服务器。

更多方法请参考[这里](http://www.webconfs.com/how-to-redirect-a-webpage.php/)

# android - 我想在应用程序进入后台时启动服务并在应用程序在前台时停止服务

> ID：12540810
> 
> 赞同：1
> 
> 时间：2012-09-22T04:48:14.440
> 
> 标签：android

我创建了一个应用程序，我想在应用程序进入后台时启动服务并在应用程序处于前台时停止服务。我使用了 onPause() 和 onResume()，但我必须在每个活动中处理它。因此，当我从一项活动转移到另一项活动时会调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:53:01.930

使用布尔标志。

```
boolean movingInApp = false;
....
movingInApp = true;
Intent intent...
.....
public void onPause() {
    if(!movingInApp) {
        //start service
    }
}

public void onResume() {
    movingInApp = false;
    //Stop service
} 
```

通过在启动任何意图等之前将值设置`movingInApp`为 true，您可以阻止您的应用程序启动服务。请记住稍后在您的`onResume()`方法中再次将其设置为 false。如果系统让您的应用程序进入后台，这将是错误的，并且您的服务将被启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:03:04.453

> 我使用了 onPause() 和 onResume()，但我必须在每个活动中处理它。

创建一个“基地” `Activity`...

```
public class MyBaseActivity extends Activity {

    // Put any methods you need here that are common to all of your Activities

} 
```

`Activity`然后只需为您创建的所有类扩展您的基础`Activity`......

```
public class ActivityOne extends MyBaseActivity {

    ...

} 
```

通过这种方式，你所有的人`Activities`都会自动处理你需要做的事情。

# ios - iPhone 5 iOS 6 模拟器 imagePickerDidFinish 不工作

> ID：12540812
> 
> 赞同：1
> 
> 时间：2012-09-22T04:49:14.700
> 
> 标签：ios, ios-simulator, uiimagepickercontroller

我正在 iPhone 5 模拟器上测试一些代码。下面的方法似乎在模拟器中不起作用。发生的情况是选择器被关闭，但没有图像添加到 imageView。奇怪的是，这个确切的代码在本周早些时候在 iOS 6 iPhone 模拟器中运行，我很确定。

```
-(void)imagePickerController:didFinishPickingImage:editing Info: 
```

我认为这是一种已弃用的方法，但我也尝试了以下方法。它在模拟器中也不起作用。图像记录为 NULL。这两种方法似乎都适用于 iOS 5 和 6 设备。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [self dismissModalViewControllerAnimated:YES];
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    //if (!image) image = [info objectForKey:UIImagePickerControllerOriginalImage];
    [importedImageView setImage:image];

    NSLog(@"image picked");

    if (image == NULL) {
        NSLog(@"NULL");
    } 
```

我上传了这个项目给任何好奇或好心的人看看。[owolf.net/uploads/StackOverflow/IPhone5Test.zip](http://owolf.net/uploads/StackOverflow/IPhone5Test.zip)

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:20:22.483

你的照片是空的，这就是为什么。

如何在ios模拟器中添加照片：

这篇文章： [将图像添加到 iPhone 模拟器](https://stackoverflow.com/questions/468879/adding-images-to-iphone-simulator)

或者

*   开放野生动物园
*   谷歌搜索图像 320x480，例如
*   按住`Ctrl`+ 按住鼠标或点击图像上的键，它应该会提示您保存它。

然后你可以再次重新测试它。

# jquery - 将 jQuery .draggable() 添加到 TinyMCE 图像

> ID：12540814
> 
> 赞同：3
> 
> 时间：2012-09-22T04:49:27.667
> 
> 标签：jquery, tinymce, draggable

我创建了一个用于 ajax 图像的插件，您可以将嵌入的视频放入 TinyMCE 编辑器中。这很好用，但我找不到将 .draggable() j Query 事件附加到编辑器内的 ajax 图像的方法。

我已经尝试过：（我将图像包装在一个带有博士类的 div 中）

绑定鼠标按下事件，然后设置`$(".dr").draggagle();`. 直接应用到课堂上。

我得到的最接近的是 tinyMCE 初始化代码中的以下代码：

```
 ed.onClick.add(function(ed, e) {
        alert('Editor was clicked: ' + e.target.nodeName);
 }); 
```

但我不能终`draggable()`其`e.target\e.target.nodeName`一生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:13:04.770

由于 tinymce 不等于编辑器源 html 元素（例如 textarea）`$(".dr").draggable();`不会处理所需的元素。您将不得不使用`$(ed.getBody()).find(".dr").draggable();`来获得所需的结果。

马克：让我知道这是否适合您（它适用于我的系统）。

更新：确保在 tinymce 初始化后调用可拖动对象，否则它将不起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T07:43:05.313

在图像周围包裹一个 div 并指定它的宽度和高度。然后在 live 函数中应用 jquery 可拖动函数，例如：

```
$('#mydiv').live(function(){$(this).draggable()}); 
```

# python - 在字典中查找最大值

> ID：12540817
> 
> 赞同：8
> 
> 时间：2012-09-22T04:50:00.317
> 
> 标签：python

> **可能重复：**
> [在字典中获取最大值的键？](https://stackoverflow.com/questions/268272/getting-key-with-maximum-value-in-dictionary)

假设我有一个由整数键和整数值组成的字典。我想找到具有最高对应值的整数键。是否有任何内置方法可以执行此类操作，或者我是否需要实现某种合并/排序算法？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-22T04:55:00.563

你可以使用`max`

```
>>> x = {1:2, 3:6, 5:4}
>>> max(x, key=lambda i: x[i])
3 
```

要不就：

```
>>> max(x, key=x.get)
3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T04:58:59.437

有一些方法可以做到这一点，首选的方法是使用这个：

```
import operator

result = max(your_dict.iteritems(), key=operator.itemgetter(1))[0] 
```

请注意，根据您的需要`operator.itemgetter(1)`，可以替换为`lambda x: x[1]`.

# sql - Visual Studio 2010 中带有 linq-to-sql 的 Sql Server 紧凑型数据库

> ID：12540818
> 
> 赞同：1
> 
> 时间：2012-09-22T04:50:21.770
> 
> 标签：sql, sql-server, linq, sql-server-ce

如何在 Visual Studio 2010 中将 Linq-to-SQL 与 sql server 紧凑型数据库一起使用？

谢谢

# c++ - Binary/Int 文件读取和数组存储

> ID：12540826
> 
> 赞同：0
> 
> 时间：2012-09-22T04:52:30.880
> 
> 标签：c++, arrays, file-io, binary

试图帮助朋友，我不是要代码。

我有一个文本文件，其中包含以二进制形式排序的整数。100010101001010101010。我将如何一次读取 8 个整数来生成一个字节，然后将其存储为整数，然后将其填充到整数数组中。我不能使用字符串或任何具有动态分配的东西。数字在一行上。我必须自己通过程序将它们分开。

我考虑过使用一个带有指针的 for 循环来读取每个 int 并将它们附加到一个 int 上，然后将该 int 扔到数组中。类似的东西（请原谅我解释编码，我有一段时间没碰它了。）

```
while(eof) //end of file
{
    for(int i = 0, i > 9, i ++)
    {
    pointer read file seekg()
    int += seekg()  // minus the part where its mathematically adding im thinking of     str+= str 
    //i know its the wrong code
    }

x++
array [x] = int from for loop
} 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T05:08:32.640

您可以使用循环，并且在每次迭代中，您将遍历每个数字。将第一个数字乘以`2^7`第二个数字，`2^6`然后继续直到您的`8th`数字（乘以`2^0`）。此外，在进行此操作时，添加此数字并存储在向量或数组中。另外，有一个变量来跟踪数字的当前位置。因为，在每个`8`数字之后，您必须执行上述相同的过程才能`8 bit binary`将`byte`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:45:30.183

Here is a C++ example of how to write integers in binary form out to a file, and how to read the binary data back as integers in the same program. Comments are in the program, hopefully this helps.

This assumes your machine acknowledges data type `char` as 1 byte, and `int` as 4 bytes.

```
#include <fstream>
#include <iostream>

using namespace std;

int main() { 

    ofstream outFile; // File which we will write binary data to.
    ifstream inFile;  // File which we will read binary data from.

    outFile.open( "intBin.txt", ios::binary ); // Flag file as binary.

    for( int i = 0; i < 20; ++i ) {
            // This writes 4 bytes out to file.
        outFile.write( reinterpret_cast<const char*>(&i), sizeof(int) );
    }
    outFile.close(); // Must close, since race conditions will occur accessing same file in same process of our program.

    inFile.open("intBin.txt", ios::binary); // Flag file as binary.
    int binVals;
    for( int i = 0; i < 20; ++i ) {
            // This reads 4 bytes back into the file.
        inFile.read( reinterpret_cast<char*>(&binVals), sizeof(int) );
        cout << binVals << endl;
    }
    inFile.close();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T05:11:13.760

好吧，您已经将其分解为以下步骤：

*   一次读取 8 个数字以生成一个字节
*   然后将其存储为 int
*   把它塞进一个整数数组中

那太棒了！让我们看看每一个。

首先，您需要一次读取一个字符。C 标准库为此提供了一个函数：`fgetc`. 传入 a `FILE *`，它会返回它读取的数字的 ASCII 值，或者`EOF`当你到达文件末尾时返回 (-1)。

所以，我们知道我们可以使用`fgetc`，并且没有任何换行符，我们知道它将返回`'1'`,`'0'`或`EOF`。换一种方式：

```
10001101 => successive fgetc() calls will return
  '1', '0', '0', '0', '1', '1,' '0', '1', 'EOF' 
```

这听起来像一个循环：

```
for (int bits = 0; bits < 8; bits++) {
  int digit = fgetc(file);
  if (digit == '0') {
    // something
  } else if (digit == '1') {
    // something else
  } else if (digit == EOF) {
    // done with the file
  }
} 
```

好的。现在，我们如何将 0 和 1 组合成二进制数？答案是位移。我们设置一个变量来保存输出数，然后重复设置最低位并将其他位向上移动。所以：

```
10001101
'1' =>        1
'0' =>       10
'0' =>      100
'0' =>     1000
'1' =>    10001
'1' =>   100011
'0' =>  1000110
'1' => 10001101 
```

所以：

```
int number = 0;
for (int bits = 0; bits < 8; bits++) {
  // shift number up one place
  number = number << 1;

  int digit = fgetc(file);
  if (digit == '0') {
    // do nothing; the lowest bit is 0 already
  } else if (digit == '1') {
    // set number's lowest bit
    number |= 0x01;
  } else if (digit == EOF) {
    // done with the file
  }
} 
```

现在您需要做的就是将其包装在另一个放入`number`数组的循环中。这只是记住您已经存储了多少数字（一个计数器），然后在您到达文件末尾时从循环中转义的问题。

# reporting-services - 当没有可用数据时，对显示的文本使用超链接

> ID：12540827
> 
> 赞同：0
> 
> 时间：2012-09-22T04:52:42.533
> 
> 标签：reporting-services, vbscript

长话短说，当没有为特定表填充数据时，我想显示“请单击此处”（“此处”应该是指向 www.google.com 的超链接）。

因此，当没有数据时，我想显示“请单击此处”，并且“此处”一词应该是用户可以单击并访问 www.google.com 的超链接

在这种情况下，我不能使用“指向 URL”。我可以使用表达式，但我需要弄清楚`="expression"`启用超链接应该是什么？

**更新：**我有一个表格，其中填充了基于用户的数据。如果我们的数据库没有用户的数据，该用户会看到空白页面。我想使用 SSRS 的 NoRowsMessage 属性并在该表上强制执行该属性。我可以直接写文本或写一个表达式。我需要知道如何在该文本中启用超链接？如果我写“请访问 www.google.com”，当我查看报告时，“www.google.com”不会变成超链接，它只是纯文本我希望该 url 成为超链接，以便用户可以点击它并将它们带到 www.google.com 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:58:31.067

据我所知，你不能这样做。一种解决方法是在表格顶部有一个带有 URL 操作的文本框，并切换两者的可见性，以便只有适用的控件可见。

# java - java - Swing 图像未加载

> ID：12540834
> 
> 赞同：1
> 
> 时间：2012-09-22T04:54:37.940
> 
> 标签：java, image, swing, jlabel

每当我尝试添加此图像时，我得到的只是一个空白的 jFrame。我希望有人能告诉我我做错了什么。我还在图像上做了一个 system.out.println 并且它正在加载。

```
 BufferedImage myPicture = ImageIO.read(getClass().getResourceAsStream("image.jpg"));

        javax.swing.JLabel jLabel2 = new JLabel(new ImageIcon(myPicture));            
        jLabel1.add(jLabel2);
        jLabel1.repaint(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T05:07:56.427

```
public class LabelJarSample {

  public static void main(String args[]) {
    String title = "JLabel Sample";
    JFrame frame = new JFrame(title);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    Container content = frame.getContentPane();
    content.setLayout(new GridLayout(2, 2));

    JLabel label1 = new JLabel("Text Label");
    content.add(label1);

    Image warnImage = ImageLoader.getImage(LabelJarSample.class, "Warn.gif");
    Icon warnIcon = new ImageIcon(warnImage);
    JLabel label2 = new JLabel(warnIcon);
    content.add(label2);

    JLabel label3 = new JLabel("Warning", warnIcon, JLabel.CENTER);
    content.add(label3);

    String htmlLabel = "<html><sup>HTML</sup> <sub><em>Label</em></sub><br>"
        + "<font color=\"#FF0080\"><u>Multi-line</u></font>";
    JLabel label4 = new JLabel(htmlLabel);
    content.add(label4);

    frame.setSize(300, 200);
    frame.setVisible(true);
  }
}

final class ImageLoader {

  private ImageLoader() {
  }

  public static Image getImage(Class relativeClass, String filename) {
    Image returnValue = null;
    InputStream is = relativeClass.getResourceAsStream(filename);
    if (is != null) {
      BufferedInputStream bis = new BufferedInputStream(is);
      ByteArrayOutputStream baos = new ByteArrayOutputStream();
      try {
        int ch;
        while ((ch = bis.read()) != -1) {
          baos.write(ch);
        }
        returnValue = Toolkit.getDefaultToolkit().createImage(
            baos.toByteArray());
      } catch (IOException exception) {
        System.err.println("Error loading: " + filename);
      }
    }
    return returnValue;
  }
} 
```

参考：http://www.java2s.com/Code/Java/Swing-JFC/LabelwithImage.htm

注意：还要检查图像位置路径是否正确

# sql - SQL查询动态累计和

> ID：12540841
> 
> 赞同：2
> 
> 时间：2012-09-22T04:56:45.933
> 
> 标签：sql, ms-access-2007

我有以下两个名为`Tran`and的表`SPrices`：

![表](../Images/b4fde4d55a75ff48d8e10888b0ff75d2.png)

从`Tran`表中我知道，`tType = 1`表示`deposit`，`tType = 2`表示`buy`，tType=3 表示`sell`，`cID`是客户端 ID，在下表中`sID = Stock ID`引用。`SPrices`

从`SPrices`表中我感兴趣的是，`sID`这是与和`Tran`的链接。`pDate``lPr`

我正在尝试查看是否可以构建一个提供如下输出的查询。

```
CID    pDate        sID  Qty  lPr     Value  

1004   09/07/2012   584  5    69.99   (69.99 * 5) 
1004   10/07/2012   584  5    69.87   (69.87 * 5)
...
...
1004   26/07/2012   584  5    72.4    (72.4 * 5)
1004   27/07/2012   584  9    71.2    (71.2 * 9)
1004   28/07/2012   584  9    72.2    (72.2 * 9) 
```

我感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T05:14:04.847

毫无疑问，下面的sql有错别字和bug。您可能无法仅将其粘贴并使其完美运行，但这就是我采取所有步骤的原因。解决它们，让我知道哪些不起作用**以及为什么**，我会尝试修复它们。

首先，试试这个只是为了获得累积数量：

```
SELECT Trans1.sID AS sID,
       Trans1.Qty AS Qty,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=Trans1.tDate AND Trans1.sID=Trans2.sID) AS [sum]
FROM Tran AS Trans1
WHERE Trans1.sID = 584; 
```

那应该给

```
sID | Qty | sum
----+-----+----
584 |  5  |  5
584 |  4  |  9 
```

* * *

如果可行，我们应该能够按类型分解数量：

```
SELECT Trans1.sID AS sID,
       Trans1.Qty AS Qty,
       Trans1.tType AS tType,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=Trans1.tDate AND Trans1.sID=Trans2.sID AND Trans2.tType=1) AS deposits,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=Trans1.tDate AND Trans1.sID=Trans2.sID AND Trans2.tType=1) AS purchases,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=Trans1.tDate AND Trans1.sID=Trans2.sID AND Trans2.tType=3) AS sales
FROM Tran AS Trans1
WHERE Trans1.sID = 584; 
```

由于在您的示例中这两个事务都是类型 2，因此应该给出

```
sID | Qty | tType | deposits | purchases | sales
----+-----+-------+----------+-----------+------
584 |  5  |   2   |     0    |      5    |  0
584 |  4  |   2   |     0    |      9    |  0 
```

* * *

现在让我们尝试将两个表连接在一起。我将按 sID 和日期加入，并使用 RIGHT JOIN 以便包括所有日期和价格。

```
SELECT SPrices.pDate AS pDate,
       SPrices.sID AS sID,
       Trans1.Qty AS Qty,
       Trans1.tType AS tType,
       SPrices.lPr AS lPr
FROM Tran AS Trans1
    RIGHT JOIN SPrices ON Trans1.sID = SPrices.sID AND Trans1.tDate=SPrices.pDate
WHERE SPrices.sID = 584; 
```

这应该为 sID 584 的 SPrices 中的每一行提供一行，并在适当的日期列出事务，否则为 NULL 行：

```
pDate      | sID | Qty  | tType | lPr
-----------+-----+------+-------+------
09/07/2012 | 584 |  5   |   2   | 69.99
10/07/2012 | 584 | NULL | NULL  | 69.87
...
26/07/2012 | 584 | NULL | NULL  | 72.40
27/07/2012 | 584 |  4   |   2   | 71.20
28/07/2012 | 584 | NULL | NULL  | 72.20 
```

* * *

好的，如果这很好，我们将把这两部分加在一起（累积和和连接）。我已将累积总和更改为使用 SPrices.pDate，因为我们想要每天的累积总和，无论当天是否有交易：

```
SELECT SPrices.pDate AS pDate,
       SPrices.sID AS sID
       Trans1.Qty AS Qty,
       Trans1.tType AS tType,
       SPrices.lPr AS lPr,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID AND Trans2.tType=1) AS deposits,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID AND Trans2.tType=1) AS purchases,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID AND Trans2.tType=3) AS sales
FROM Tran AS Trans1
    RIGHT JOIN SPrices ON Trans1.sID = SPrices.sID AND Trans1.tDate=SPrices.pDate
WHERE SPrices.sID = 584;

pDate      | sID | Qty  | tType | lPr   | deposits | purchases | sales
-----------+-----+------+-------+-------+----------+-----------+------
09/07/2012 | 584 |  5   |   2   | 69.99 |    0     |      5    |  0
10/07/2012 | 584 | NULL | NULL  | 69.87 |    0     |      5    |  0
...
26/07/2012 | 584 | NULL | NULL  | 72.40 |    0     |      5    |  0
27/07/2012 | 584 |  4   |   2   | 71.20 |    0     |      9    |  0
28/07/2012 | 584 | NULL | NULL  | 72.20 |    0     |      9    |  0 
```

* * *

最后，我将把整个事情包装在另一个选择中，只是为了进行价值计算。我还将删除我们实际上不需要的列。

```
SELECT
    pDate,
    sID,
    lPr,
    deposits,
    purchases,
    sales,
    lPr * (IFNULL(deposits, 0) + IFNULL(purchases,0) - IFNULL(sales,0)) AS [Value]
FROM (
    SELECT SPrices.pDate AS pDate,
           SPrices.sID AS sID,
           SPrices.lPr AS lPr,
           (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID AND Trans2.tType=1) AS deposits,
           (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID AND Trans2.tType=1) AS purchases,
           (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID AND Trans2.tType=3) AS sales
    FROM Tran AS Trans1
        RIGHT JOIN SPrices ON Trans1.sID = SPrices.sID AND Trans1.tDate=SPrices.pDate
    WHERE SPrices.sID = 584
) AS t; 
```

最终结果是：

```
pDate      | sID |  lPr  | deposits | purchases | sales | Value
-----------+-----+-------+----------+-----------+-------+------
09/07/2012 | 584 | 69.99 |    0     |      5    |  0    | 349.95
10/07/2012 | 584 | 69.87 |    0     |      5    |  0    | 349.34
...
26/07/2012 | 584 | 72.40 |    0     |      5    |  0    | 362.00
27/07/2012 | 584 | 71.20 |    0     |      9    |  0    | 640.80
28/07/2012 | 584 | 72.20 |    0     |      9    |  0    | 649.80 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:17:46.573

这应该会有所帮助。

```
SELECT
      Tran.cID,
      sPrices.pDate,
      Tran.sID,
      Tran.Qty,
      sPrices.lPr,
      Tran.Qty * sPrices.lPr AS Value
FROM
      Tran INNER JOIN SPrices
        ON
           Tran.sID = SPrices.sID
WHERE
      Trans.tType = ? 
```

将 替换为`?`正确的事务类型（如果需要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T03:51:37.740

给出所需结果的最终查询......所有功劳归于 jmilloy 实现这一目标..

```
SELECT
pDate,
sID,
lPr,
deposits,
purchases,
sales,
BalQty,
lPr * BalQty as [Value]
FROM (
SELECT SPrices.pDate AS pDate,
       SPrices.sID AS sID,
       SPrices.lPr AS lPr,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID AND Trans2.tType=1) AS deposits,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID AND Trans2.tType=2) AS purchases,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID AND Trans2.tType=3) AS sales,
       (SELECT SUM(Trans2.Qty) FROM Tran AS Trans2 WHERE Trans2.tDate<=SPrices.pDate AND SPrices.sID=Trans2.sID ) AS BalQty
FROM Tran AS Trans1
    RIGHT JOIN SPrices ON Trans1.sID = SPrices.sID AND Trans1.tDate=SPrices.pDate
WHERE SPrices.sID = 584
) AS t; 
```

# phpmyadmin - phpmyadmin 没有“用户”选项卡

> ID：12540843
> 
> 赞同：24
> 
> 时间：2012-09-22T04:57:41.177
> 
> 标签：phpmyadmin

我刚刚安装完 phpmyadmin。但是，主导航面板中的“用户”或“权限”选项卡似乎丢失了。所以我不能将新用户添加到我的数据库中。知道从哪里开始寻找吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-03-17T10:51:24.590

答案是去`127.0.0.1/phpmyadmin`而不是`localhost/phpmyadmin`。有用！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-22T05:00:08.070

它在`Privileges`选项卡中

这就是您可以添加新用户的地方

![在此处输入图像描述](../Images/bff675a9c25e65fc0d7c98d4a3104ff1.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-18T20:23:43.357

如果您以没有权限的用户身份登录，则会在 phpmyadmin（或功能？谁知道）中出现此错误。解决方案是清除浏览器的 cookie。为获得最佳结果，请在使用时重新启动 mySQL 服务器。

我在 Windows 7 上将 XAMPP 包与 Apache 和 mySQL 一起使用，这对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T05:09:24.507

在权限选项卡中单击添加新用户

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T07:06:30.763

i just want to share what I found out

Initially, i have users tab in phpmyadmin, now I can only access it thru `http://127.0.0.1/phpmyadmin`

*   Here's the first thing I think caused me to lose "users" tab

but then i suddenly have my host file modified (in windows "Windows\System32\drivers\etc\hosts")

it says

```
127.0.0.1 somehostname
#127.0.0.1       localhost 
```

*   Another thing but I doubt if its related

then I changed apache config httpd.conf to open my wamp on the network not just localhost

```
<Directory "D:/Program Files (x86)/wamp/www/">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.4/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks
    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride All
    #
    # Controls who can get stuff from this server.
    #
    # Online --> Require all granted

    #   onlineoffline tag - don't remove

    Require local
    allow from all
</Directory> 
```

*   I reverted hosts file and accessed phpmyadmin using localhost which is = 127.0.0.1 and voila!

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-02T18:20:25.560

它显然只在你存在的时候出现`localhost`。因此，请确保您通过该主机名而不是其他虚拟命名服务器访问它。我遇到了同样的问题，因为我使用`local`它设置为别名来访问它`localhost`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-06T01:56:46.647

我有同样的问题。如果你有CPanel，你可以创建一个用户（和创建DB的地方一样），然后通过Cpanel把用户添加到Database中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-01T18:02:19.417

我有同样的问题。我使用的是安装时提示创建的用户名。我正在使用 Crunchbang，一个 Debian 发行版，所以我使用 apt-get 通过命令行安装。当我登录时，用户：字段显示为 username@localhost。我注销并重新登录，但这次我将 root 作为用户名并使用与我的用户帐户相同的密码，并且我获得了访问权限。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-02T20:57:17.600

如果您使用的是 WHM/cPanel，此选项卡最近已被删除。

请参阅：[https ://features.cpanel.net/topic/as-an-administrator-i-want-to-manage-table-level-privileges-in-mysql-so-i-dont-need-to-leave- cpanel-whm-for-this-administrative-duty](https://features.cpanel.net/topic/as-an-administrator-i-want-to-manage-table-level-privileges-in-mysql-so-i-dont-need-to-leave-cpanel-whm-for-this-administrative-duty)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-11T18:01:41.840

我不是在本地主机上而是在bluehost帐户上遇到了同样的问题。出于某种原因，phpMyAdmin 没有 root 访问权限，因此没有权限选项卡。您可以使用 MySQL 数据库而不是 phpMyAdmin 添加用户

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-21T15:32:42.917

执行此步骤并尝试以 root 和新密码登录..

```
To change the mysql password for the root user, do the following: 
```

> 1.  卸载 mysqld.nlm
> 2.  在控制台输入：mysqld_safe --skip-grant-tables --autoclose
> 3.  在服务器控制台输入 mysql

这将带您进入 mysql 提示符。在此提示符下键入以下内容：（其中 ******** 是新密码，注意：需要单引号）

```
mysql> UPDATE mysql.user SET Password=PASSWORD('********') WHERE User='root';
mysql> FLUSH PRIVILEGES; 
```

刷新权限将使更改立即生效。

您可以在 MySQL 3.22 及更高版本中使用 SET PASSWORD 语句：（其中 ******** 是新密码，注意：需要单引号）

```
shell> mysql -u root mysql
mysql> SET PASSWORD FOR root=PASSWORD('********'); 
```

另一种设置密码的方法是使用 mysqladmin 命令：（其中 ******** 是新密码）

```
shell> mysqladmin -u root password ********
shell> mysqladmin flush-privileges 
```

# css - Chrome 截断 Oswald-Light 字体

> ID：12540844
> 
> 赞同：2
> 
> 时间：2012-09-22T04:57:50.527
> 
> 标签：css

我正在使用**Oswald-Light**字体系列，它在 FF 和 IE 上很好，但在 Chrome 上被切断 ![在此处输入图像描述](../Images/2d96f80e9f80dd4297550fea0c2e25be.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:15:44.817

尝试将`font-weight`属性设置为`normal`.

这最近对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T12:27:23.130

我为您的问题找到了这个答案： [https ://code.google.com/p/googlefontdirectory/issues/detail?id=152](https://code.google.com/p/googlefontdirectory/issues/detail?id=152)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T11:56:17.090

如果您在您的电脑/机器上安装 Oswald，就会发生这种情况............发生在我身上，它让我发疯了好几个小时。删除字体后，一切都恢复正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T05:23:23.847

据我所知，部分 Chrome 字体缓存被破坏。要修复您的 OS X 字体缓存，请使用

```
 $ atsutil databases -removeUser

    And then restart the font server using

    $ atsutil server -shutdown
    $ atsutil server -ping 
```

我希望这对你有帮助。

# jquery - jquery（ajax）重定向到另一个域

> ID：12540846
> 
> 赞同：-1
> 
> 时间：2012-09-22T04:58:34.693
> 
> 标签：jquery, json

我有以下格式的 jquery json 请求：

JSON请求：

```
$.getJSON('http://xyz.com',function(result) {}); 
```

如果请求失败（服务器没有响应），我如何重定向到另一个域。例如“http://zxy.com”。（我们在另一台服务器上维护相同的代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T05:05:43.157

我认为最好使用[$.ajax()](http://api.jquery.com/jQuery.ajax/)方法，`error`或者`success`如果服务器根据响应告诉你）。

然后使用它来重定向浏览器。

```
window.location = "http://www.google.com" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T05:15:50.650

$.getJSON() 定义为：

```
jQuery.getJSON=function(url,data,callback){
    return jQuery.get(url,data,callback,"json");
}; 
```

因此，默默地失败了。

要对错误做出反应，您需要直接使用 $.ajax() 函数，该函数允许您定义 onError 处理程序，如下所示：

```
$.ajax({
    url: '...',

    contentType:'json',

    success:function(result,stat,xhr){
        ...
    },

    error:function(xhr,opts,err){
        ...
    }
}); 
```

请参阅[jQuery Ajax 错误处理，显示自定义异常消息](https://stackoverflow.com/questions/377644/jquery-ajax-error-handling-show-custom-exception-messages)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T05:01:51.823

你试过这个吗？

```
function addImage(item) {
 $("<img/>").attr("src", item.media.m).appendTo("#images");
}

    var jqxhr = $.getJSON("http://xyz.com",function(data) {
    $.each(data.items, function(i,item){  //sample
       addImage(item);
    })
    .error(function() { 
              var jqxhrFailover = $.getJSON("http://zzz.com", function(data) {
    $.each(data.items, function(i,item){  //sample
       addImage(item);
    }).error(function(){ alert('both failed!'); }); 
```

# php - 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 6 行的 C:\xampp\htdocs\final2\ah.php 中给出

> ID：12540847
> 
> 赞同：0
> 
> 时间：2012-09-22T04:58:42.400
> 
> 标签：php, sql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我是PHP的新手，所以我为混乱的代码道歉..

我不知道如何解决这个错误：

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 6 行的 C:\xampp\htdocs\final2\ah.php 中给出

请帮助我了解如何解决这个问题。

这是我的php代码：

```
<?php

    include('config_db.php');
    $today = (date('Y-m-d'));
    $query = "select * from inventory.reservation,inventory.machine where inventory.reservation.item_code = inventory.machine.item_code and inventory.reservation.date_to > '$today'";
    $result = mysql_query($query);
    while($row = mysql_fetch_array($result))
    {
        $this->avail_num = $row['avail_num'] + $row['num_reserve'];
        $this->num_reserve = 0;
    }   
    $query = "delete from inventory.reservation where num_reserve = 0";
    mysql_query($query) or die('<p>ERROR, query Failed</p>');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T05:03:16.603

您必须使用`and`而不是第二个 where 子句

```
$query = "select * from inventory.reservation,inventory.machine where inventory.reservation.item_code = inventory.machine.item_code and  inventory.reservation.date_to > '".$today."'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:04:27.333

改变

```
$query = "select * from inventory.reservation,inventory.machine where inventory.reservation.item_code = inventory.machine.item_code where  inventory.reservation.date_to > '$today'"; 
```

到

```
$query = "select * from inventory.reservation,inventory.machine where inventory.reservation.item_code = inventory.machine.item_code AND inventory.reservation.date_to > '$today'"; 
```

您在查询中包含了两个 where ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T05:30:56.210

只需用“and”替换第二个“where”子句，它应该可以工作：

试试这个：

```
select * from inventory.reservation,inventory.machine where inventory.reservation.item_code = inventory.machine.item_code and inventory.reservation.date_to > '$today'"; 
```

注意：如果可能，请使用带有别名的列名从数据库中获取数据：如下所示：

```
SELECT tbl1.Column1 AS 'CusomName', tbl1.Column2 AS 'CustomName',... FROM 'Table1' tbl1 WHERE Condition1 = Condition2 AND Condition3 = Condition4 
```

这可能会帮助您编写复杂的查询，并且在连接两个表时非常有用。

# c# - MenuItem.IsEnabled 绑定在公共 bool 上

> ID：12540849
> 
> 赞同：2
> 
> 时间：2012-09-22T04:59:57.787
> 
> 标签：c#, wpf, binding, properties

我的 WPF 应用程序中有 MenuItem：

```
<MenuItem Header="_Login" Click="Login_Click" Name="mi_Login"> 
```

如何在本地 bool var 上动态绑定 IsEnabled 属性：

```
public bool _IsConnected
    {
        get { return this.IsConnected; }
        set { this.IsConnected = value; }
    } 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:01:33.457

不要忘记在主容器上设置 DataContext ：

```
<Window DataContext="{Binding Path=YourViewModelOrCodeBehindOtherwise}">    
    <MenuItem Header="_Login" Click="Login_Click" Name="mi_Login" 
        IsEnabled="{Binding _IsConnected}" >  
</Window> 
```

# google-chrome-extension - 从 chrome 扩展中检测用户源

> ID：12540853
> 
> 赞同：1
> 
> 时间：2012-09-22T05:00:58.540
> 
> 标签：google-chrome-extension

如何检测用户是否来自 chrome 应用程序，check.php 页面的显示方式与直接来的人和来自 chrome 应用程序的人的显示方式不同。

```
{
  "name": "New App",
  "version": "1",
  "manifest_version": 2,
  "app": {
  "launch": {
      "web_url": "example.com/check.php"
    }
  },
  "icons": {
    "128": "l.png"
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:59:36.630

用这个：

```
"launch": {
    "web_url": "example.com/check.php?source=app"
} 
```

在 PHP 端，检查`$_GET['source']`变量。如果是`app`，则它来自 chrome 应用程序。

FWIW，这就是 Chrome 网上应用店为他们的应用程序所做的。他们检查`utm_source`变量的`chrome-ntp-icon`值。

# python - 如何在 Python 中获取 Excel 单元格属性

> ID：12540856
> 
> 赞同：8
> 
> 时间：2012-09-22T05:01:31.613
> 
> 标签：python, xlrd

实际上我使用的是 xlrd 模块 0.8 版本，但我不知道如何读取单元格属性，如背景颜色、字体以及单元格是否被锁定。

我试着用

```
import xlrd
wb = xlrd.open_workbook(...)
sh = wb.sheet_by_index(...)
sh.sh._cell_xf_indexes(2, 2) 
```

它会引发一个错误，说在读取时需要设置格式信息`wb`，但是如果我有那个参数，那么它表明它仍然没有实现。

是否有另一个模块或如何使该模块本身读取单元属性？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T06:03:18.470

以下适用于我，使用 xlrd 版本 0.7.6：

```
from xlrd import open_workbook

wb = open_workbook('tmp.xls', formatting_info=True)
sheet = wb.sheet_by_name("1")
cell = sheet.cell(6, 0)
print "cell.xf_index is", cell.xf_index
fmt = wb.xf_list[cell.xf_index]
print "type(fmt) is", type(fmt)
print
print "fmt.dump():"
fmt.dump() 
```

`fmt`是 XF 类的一个实例；见[https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html#formatting.XF-class](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html#formatting.XF-class)

该`dump()`方法打印有关格式的所有信息。这是上面代码的输出：

```
cell.xf_index is 497
type(fmt) is <class 'xlrd.formatting.XF'>

fmt.dump():
_alignment_flag: 1
_background_flag: 1
_border_flag: 1
_font_flag: 1
_format_flag: 0
_protection_flag: 0
alignment (XFAlignment object):
    hor_align: 1
    indent_level: 0
    rotation: 0
    shrink_to_fit: 0
    text_direction: 0
    text_wrapped: 0
    vert_align: 2
background (XFBackground object):
    background_colour_index: 64
    fill_pattern: 1
    pattern_colour_index: 17
border (XFBorder object):
    bottom_colour_index: 0
    bottom_line_style: 0
    diag_colour_index: 0
    diag_down: 0
    diag_line_style: 0
    diag_up: 0
    left_colour_index: 0
    left_line_style: 0
    right_colour_index: 0
    right_line_style: 0
    top_colour_index: 56
    top_line_style: 1
font_index: 72
format_key: 0
is_style: 0
lotus_123_prefix: 0
parent_style_index: 0
protection (XFProtection object):
    cell_locked: 1
    formula_hidden: 0
xf_index: 497 
```

其中一些值是工作簿列表中的索引`wb`。例如，`fmt.font_index`是 72，并且`wb.font_list[72]`是`Font`类的一个实例 (https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html#formatting.Font-class)。

# c++ - C++ 访问子类中的数据

> ID：12540861
> 
> 赞同：0
> 
> 时间：2012-09-22T05:02:31.670
> 
> 标签：c++, inheritance

我的问题几乎在下面的代码中。我正在尝试创建一个指向抽象对象的指针数组，每个对象都有一个 ID 和成本。然后我创建像汽车和微波炉这样的对象，并分配指针指向它们。创建它们后，如何访问数组中的子数据？那可能吗。如果类是在堆中创建并指向基类数组，我什至如何访问子对象？

```
class Object
{
public:
    virtual void outputInfo() =0;

private:
    int id;
    int cost;
};

class Car: public Object
{
public:
    void outputInfo(){cout << "I am a car" << endl;}

private:
    int speed;
    int year;

};

class Toaster: public Object
{
public:
    void outputInfo(){cout << "I am a toaster" << endl;}

private:
    int slots;
    int power;
};

int main()
{
    // Imagine I have 10 objects and don't know what they will be
    Object* objects[10];

    // Let's make the first object
    objects[0] = new Car;

    // Is it possible to access both car's cost, define in the base class and car's speed, define in the child class?

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:04:28.500

使用`protected`访问修饰符。

```
class Object
{
public:
    virtual void outputInfo() =0;

protected:
    int id;
    int cost;
}; 
```

并覆盖打印id，成本和其他字段`outputInfo()`的子类。`Object`

调用被覆盖的方法 - `outputInfo()`via,

```
Object *object=new Car;
object->outputInfo();
delete object; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:10:05.117

您需要使用 dynamic_cast 向下转换到子类：

```
if (Car* car = dynamic_cast<Car*>(objects[0]))
{
    // do what you want with the Car object
}
else if (Toaster* toaster = dynamic_cast<Toaster*>(objects[0]))
{
    // do what you want with the Toaster object
} 
```

如果对象的运行时类型实际上是该子类，则 dynamic_cast 返回指向子类对象的指针，否则返回空指针。

# ruby-on-rails - 使用使用 hstore 的 postgres 的 Rails 测试数据库出错

> ID：12540865
> 
> 赞同：6
> 
> 时间：2012-09-22T05:03:32.810
> 
> 标签：ruby-on-rails, postgresql, hstore

在 Rails 3.2 应用程序中的 Postgresql 9.2 中使用 hstore 时，我在搜索测试数据库时收到如下错误消息：

PG::Error: 错误: 类型“hstore”不存在

由于它是从模式构建的，因此测试数据库没有经过开发数据库的 hstore CREATE EXTENSION 迁移。这导致了 rake db:test:prepare 上的错误。

如何解决这个问题？我实际上发现了一个修复，很高兴听到更多。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T05:03:32.810

我只是让我的 postgresql 数据库默认支持 hstore（通过让模板数据库支持 hstore）。运行以下命令来执行此操作：

```
psql -d template0 -c 'create extension hstore;' 
```

然后任何 Rails 测试数据库都会自动支持扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T10:58:46.850

当我尝试运行时`psql -d template0 -c 'create extension hstore;'`（在@Connor 的回答中）出现错误：

`psql: FATAL: database "template0" is not currently accepting connections`

相反，我遵循了[这篇博客文章](http://dwradcliffe.com/2013/01/10/install-hstore-to-default-template.html)中的过程，其中涉及更新 template1。

1) 创建文件“hstore.sql”，其中包含：

```
CREATE EXTENSION hstore; 
```

2）运行它：

`psql -f /usr/local/Cellar/postgresql/9.2.1/share/postgresql/extension/hstore.sql -d template1`

我怀疑这也会起作用（但我没有尝试过）：

`psql -d template1 -c 'create extension hstore;'`

（要查看 template0 和 template1 之间的不同写入权限，我遵循[了这篇文章](https://wiki.postgresql.org/wiki/Adventures_in_PostgreSQL,_Episode_1)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T14:50:16.323

要解决`FATAL`错误并允许 template0 接受连接，请执行以下操作：

`UPDATE pg_database SET datallowconn = TRUE WHERE datname = 'template0';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-07T17:34:20.057

对于**Heroku**

```
heroku pg:psql --app YOUR_APP_NAME 
```

然后运行

```
CREATE EXTENSION hstore; 
```

# java - 如何通过扩展 Action 支持类正确验证 struts 中的方法？

> ID：12540874
> 
> 赞同：1
> 
> 时间：2012-09-22T05:04:44.033
> 
> 标签：java, validation, struts2

这是我的代码片段，

```
public class LoginAction extends ActionSupport {
     private String userId;
 private String password;
     ...........

     public void validate() {
    if (getUserId().length() == 0) {
        addFieldError("userId",getText("userId.required"));
    } 
    else if (!getUserId().equals("va1525252")) {
        addFieldError("userId", "Invalid User");
    }
    if (getPassword().length() == 0) {
        addFieldError("password",getText("password.required"));
    }
} 
```

当 userId 字段为空时，我收到错误说**Login Name is required**我从未设置过这样的错误消息，那么这里有什么问题？

这是我们的 LoginAction.properties 文件，它与 LoginAction 类在同一个包中

```
password.required = Password is required
userId.required = UserId is required 
```

这是我们点击提交时登录页面的屏幕截图，字段为空 ![登录页面](../Images/9c3492d260eb6e45325456ab4a56daf8.png)

# javascript - 我怎样才能使javascript中的IF为假？

> ID：12540876
> 
> 赞同：1
> 
> 时间：2012-09-22T05:05:11.640
> 
> 标签：javascript

我正在尝试在我的网站中阻止某些国家/地区。

此脚本只会加载我在美国、CA（加拿大）和 GB（英国）的网站，如果您在其他国家/地区访问，则会显示警报。

```
<script language="JavaScript">
var geo = disp();
if (geo[0] != 'US' && geo[0] != 'CA' && geo[0] != 'GB'){
   alert('Sorry this site is only accessible from the USA, Canada 
          and Great Britain');
   window.location = ('http://www.yahoo.com');
}
</script> 
```

但我想在特定国家/地区显示警报。

IF..的反义词是什么？

或者我怎样才能使陈述虚假..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T05:07:55.960

在 Javascript 中阻止网站？

您是否意识到这有多么无用，您只能使用 IP 或其他方式阻止后端。但是客户端这是没用的。访客只需禁用 JS 和 tada！你的网站上有。

因此，您可以使用后端的库使用[geoip](http://www.maxmind.com/app/geolite)的数据库来阻止根据 ips 执行的操作。

这是使用[iptables](http://www.cyberciti.biz/faq/block-entier-country-using-iptables/)的一种方法。
而这里直接进入[Apache](http://ipinfodb.com/ip_country_block_htaccess.php)。

通过 IP 阻止并不完美，但您可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:07:39.533

只需使用“其他”：

```
<script language="JavaScript">
var geo = disp();
if (geo[0] != 'US' && geo[0] != 'CA' && geo[0] != 'GB'){
   alert('Sorry this site is only accessible from the USA, Canada and Great Britain');
   window.location = ('http://www.yahoo.com');
} else {
   // some other stuff
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T05:07:49.627

只是

```
if(){
   // if the condition in if is true  
}else{
  // if the condition of if false
} 
```

或使用`!`(NOT) 运算符

```
if(!condition){
   // if the condition in if is false
 } 
```

而 JavaScript 屏蔽其他网站并不是一个好主意，甚至更糟糕的选择。它应该在服务器端完成

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T05:08:46.157

if 的“对立面”是 else。

```
 if(condition) {
   [This gets executed if condition is true]
}
else {   //or if(!condition)
   [This gets executed if condition is false]
} 
```

在发布此类问题之前，您需要查看一些基本的 javascript 教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T05:09:10.330

> 我试图在我的网站中阻止某个国家/地区

```
if (geo[0] == 'The country') {
    alert('Not allowed');
    window.location = 'http://google.com/';
} 
```

如果您只想阻止一个国家​​/地区，则不需要 else。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T05:11:37.157

如果在浏览器上禁用了客户端脚本，那么您的代码将根本无法工作..所以很可能您必须更改您的逻辑或策略..

**你可以做的是：**

您可以通过`IP Addresses`.

# average - 如何计算每组的个人加权分数？

> ID：12540877
> 
> 赞同：2
> 
> 时间：2012-09-22T05:05:17.637
> 
> 标签：average, mean, weighted

我有 20 个问题，每个问题进一步分为一组 4 个问题，这意味着总共有 5 组 A、B、C、D 和 E。每个问题有 5 分，所以在一组中可以得到的最大分数获得的是20。

在为每组进行的两次测试中，我得到以下结果

```
20, 20 ,16, 14, 20 = 90%
16, 14, 20, 20, 20 = 90% 
```

现在我想要的是我想要加重 C 和 D 组的重量，几乎是所有其他组的两倍。要计算加权百分比，请执行以下操作。

```
14*(20/20) + 14*(20/20) + 29*(16/20) + 29*(14/20) + 14*(20/20) = 66.2%
14*(16/20) + 14*(14/20) + 29*(20/20) + 29*(20/20) + 14*(20/20) = 89.64% 
```

现在我想单独计算每组的加权百分比。例如，考虑到之前分别为 100% 和 80%，而没有考虑权重，集合 A 和集合 C（测试 1）的新加权百分比是多少。同样，对于测试 1 和测试 2 的加权平均值分别为 66.2% 和 89.64% 的所有单个百分比。

我试图提出一些逻辑，类似于以下内容，但我没有完全理解。可能你能帮助我吗？

```
100% ? 0.14 = ?
100% ? 0.14 = ?
100%  ? 0.29 = ?
100%  ? 0.29 = ?
100% ? 0.14 = ? 
```

无论如何，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:17:46.407

这更像是一个代数问题。你需要找到正确的因素来乘以你的原始分数。

你有五个分数。它们之和必须为 1。

每个问题类型的平均加权意味着每个分数都是 0.2。

要使两种类型（C 和 D）的权重为其他类型的两倍，假设 A 的权重为 x。那么 B 和 E 的权重也将是 x，而 C 和 D 的权重将是 2x。这意味着

`x + x + 2x + 2x + x = 1`，或 x = 1/7 (0.142859)，因此 2x = 2/7 (0.285914)。

恐怕我不明白你问题的第二部分。

# scala - 模式匹配数组与 Either

> ID：12540881
> 
> 赞同：2
> 
> 时间：2012-09-22T05:06:18.813
> 
> 标签：scala

说我有一些代码：

```
def foo(s:String):Either[Bar, Baz] = // some code here ... 
```

我想将其用作：

```
val a = Array("a", "b", "c")
a.map(foo) match {
   case something => // should match when all elements in array are of type Right
   case _ =>
} 
```

谁能建议“某事”的代码

编辑：更喜欢直接匹配和使用数组，`Right[Bar,Baz]`而不是在匹配后提取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T05:10:25.633

使用该`forall`方法检查数组中的所有元素是否为`isRight`：

```
a.map(foo) match {
  case eithers if eithers.forall(_.isRight) =>
  case _ =>
} 
```

关于您的评论，如果您想一次性完成匹配和转换为正确，请尝试使用自定义提取器：

```
object RightArrayExtractor {
  def unapply(eithers: Array[Either[Bar, Baz]]) =
    eithers.foldLeft(Option(Vector[Right[Bar, Baz]]())) {
      case (Some(z), x @ Right(_)) => Some(z :+ x)
      case (None, _) => None
      case (_, Left(x)) => None
    }
}

a.map(foo) match {
  case RightArrayExtractor(eithers) => // eithers is a Vector[Right[Bar,Baz]]
  case _ =>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T06:38:58.780

您可以方便`collect`地将数组更改为`Right`类型（没有双关语），并且如果所有元素都是，则收集的数组将具有相同的大小`Right`：

```
a.map(foo).collect{case r@Right(_) => r} match {
  case a1 if a1.size == a.size =>
    // do something with a1 of type Array[Right[Bar,Baz]]
  case _ => 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:10:18.460

其他答案非常好，这个例子不像其他例子那么实用。我只想补充一点基础理论。

您所描述的通常称为函数式编程中的**遍历**。你有一个像`Seq[X]`和一个单子（或应用）计算的集合`X => M[Y]`。标准`map`给你`Seq[M[Y]]`，但遍历给你`M[Seq[Y]]`。

在这种情况下，一元计算是产生 的东西`Either[Error,Right]`，在这种情况下`M[_]`是`Either[Error,_]`。所以如果你只是用这样一个函数映射一个集合，你会得到`Seq[Either[Error,Right]]`. 但你想要的是`Either[Error,Seq[Right]]`，这正是遍历所做的。如果函数在序列的任何元素上失败（返回`Left(something)`），那么最终结果就是 this `Left(something)`。如果函数在所有元素上都成功（返回所有元素`Right(...)`），那么最终结果是`Right(sequenceOfResults)`.

Scala 没有内置函数，但[Scalaz](https://code.google.com/p/scalaz/)有，它被称为`traverse`. 一个完整的例子：

```
import scalaz._;
import Scalaz._;
import Applicative._;

object RightMatch extends App {
  // our example function
  def foo(s: String): Either[String,Int] =
    if (s.startsWith("a")) Right(s.length)
    else Left("wrong: " + s);

  // We make an utility function for traversing Sequences wit Eithers:
  def traverseRight[X,L,R](es: Seq[X], f: X => Either[L,R]): Either[L,Seq[R]] = {
    // we need to convert Either to Either.RightProjection
    type RightF[Y] = Either.RightProjection[L,Y];
    es.traverse[RightF,R](x => f(x).right).e; // and back to Either
  }

  // Or, if we just want to convert an existing sequence of eithers:
  def traverseRight[L,R](es: Seq[Either[L,R]]): Either[L,Seq[R]] =
    traverseRight(es, identity[Either[L,R]]);

  {
    val a = Seq("a", "ab", "ac");
    traverseRight(a, foo) match {
      case Right(arr) => println(arr); // we get the array of Ints here
      case Left(err)  => println(err); // we get String here (the first error)
    }
  }
} 
```

（请注意，在 Scalaz`Array`中没有实现可遍历（我不知道为什么），所以我`Seq`改用了。）

如前所述，遍历不仅适用于`Either`s，还适用于任何一元计算。因此，相同的方法可用于解决大量问题，例如对有状态计算进行排序（由 scalaz's 建模`State`）、对非确定性计算进行排序（`List`monad）等。

# apache - 500 Internal Server Error 而不是 404 Page Not Found

> ID：12540890
> 
> 赞同：0
> 
> 时间：2012-09-22T05:08:23.360
> 
> 标签：apache, .htaccess, http-status-code-404

知道为什么我会收到内部服务器错误而不是 404 错误吗？

```
ErrorDocument 404 /404.html 
```

那就是我的 .htaccess 文件中的内容，所以我真的不知道为什么会这样...：/

另请注意，这是在子域上......在主域上它工作正常，但在子域上，htaccess 文件永远不会工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:13:11.750

文件是否`404.html` **存在？**

在某些服务器中，您可能会发现类似*“404 file not found ... 此外，404 page was not found”*。

如果是子域，可能该文件`404.html`也不存在，或者配置错误导致服务器找不到。

# android - 需要帮助来修复布局

> ID：12540894
> 
> 赞同：1
> 
> 时间：2012-09-22T05:08:52.420
> 
> 标签：android, android-layout, horizontalscrollview

我正在为 android 设计应用程序，其中我`HorizontalScrollView`在顶部保留了一个在滚动视图中显示 3 个登录控件（用于用户名和密码的文本框）。我几乎已经实现了我想要的，除了一个小缺陷，它没有占据屏幕的整个宽度，如下图所示。我怎样才能使它的宽度`fill_parent`？

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:panel="http://schemas.android.com/apk/res-auto"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#CCC"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <org.miscwidgets.widget.Panel
        android:id="@+id/mytopPanel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        panel:animationDuration="1000"
        panel:closedHandle="@drawable/top_switcher_collapsed_background"
        panel:content="@+id/mypanelContent"
        panel:handle="@+id/mypanelHandle"
        panel:linearFlying="true"
        panel:openedHandle="@drawable/top_switcher_expanded_background"
        panel:position="top" >

        <Button
            android:id="@+id/mypanelHandle"
            android:layout_width="wrap_content"
            android:layout_height="33dip"
            android:layout_gravity="center_horizontal" />

        <HorizontalScrollView
            android:id="@+id/mypanelContent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <LinearLayout
                    android:id="@+id/linearLayout"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                    <EditText
                        android:id="@+id/editTextUserName"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_margin="3dp"
                        android:layout_marginTop="6dp"
                        android:hint="@string/editUserName" >
                    </EditText>

                    <EditText
                        android:id="@+id/editTextPassword"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_margin="3dp"
                        android:hint="@string/editUserPwd" >
                    </EditText>

                    <TextView
                        android:id="@+id/textView"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:background="#323299"
                        android:gravity="center"
                        android:padding="4dip"
                        android:text="@string/drpDwnTxt"
                        android:textColor="#eee"
                        android:textSize="16dip"
                        android:textStyle="bold" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/linearLayout1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@+id/linearLayout"
                    android:orientation="vertical" >

                    <EditText
                        android:id="@+id/editTextUserName1"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_margin="3dp"
                        android:layout_marginTop="6dp"
                        android:hint="@string/editUserName" >
                    </EditText>

                    <EditText
                        android:id="@+id/editTextPassword1"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_margin="3dp"
                        android:hint="@string/editUserPwd" >
                    </EditText>

                    <TextView
                        android:id="@+id/textView1"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:background="#323299"
                        android:gravity="center"
                        android:padding="4dip"
                        android:text="@string/drpDwnTxt"
                        android:textColor="#eee"
                        android:textSize="16dip"
                        android:textStyle="bold" />
                </LinearLayout>
            </RelativeLayout>
        </HorizontalScrollView>
    </org.miscwidgets.widget.Panel>
</LinearLayout>
</FrameLayout> 
```

![在此处输入图像描述](../Images/1895bc24d0fe8c648c997e57068fc1eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:27:05.650

亲爱的我也面临这个问题我解决了所以你使用这个代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relLayoutLogin"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bkg_poi_ipad"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/tabRowHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/heder_poi_ipad" >

        <Button
            android:id="@+id/btnBack"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:background="@drawable/img_btn_back" />

        <TextView
            android:id="@+id/lblTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="@string/loginTitle"
            android:textColor="#000000"
            android:textSize="30dp"
            android:textStyle="bold" />
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/linearLogin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/lblUsername"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/usernameTitle"
            android:textColor="#FFFFFF"
            android:textSize="20dp" />

        <EditText
            android:id="@+id/txtUsername"
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            android:inputType="text" />

        <TextView
            android:id="@+id/lblPassword"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="@string/passwordTitle"
            android:textColor="#FFFFFF"
            android:textSize="20dp" />

        <EditText
            android:id="@+id/txtpassword"
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            android:inputType="textPassword" />

        <Button
            android:id="@+id/btnLogin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:background="@drawable/btn_login_ipad" />
    </LinearLayout>

</RelativeLayout> 
```

它看起来像这样请参考它.. ![在此处输入图像描述](../Images/5c14e554ee381ae480feec3d3ea5772e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:18:14.777

这是你可以做的。

**在 XML 中：**

定义 1 水平线性布局。

定义 3 个垂直线性布局。

在每个垂直线性布局中，放置一对 EditTexts 作为用户名和密码。[确保它们的宽度属性是，**`"fill_parent"`**即每个editTexts应该填充它们所在的垂直线性布局宽度]

将这 3 个垂直线性布局放在水平线性布局内。

**在 Java 中：**

使水平线性布局（包含其他三个布局）的宽度为显示宽度的 3 倍。

```
Display display = getWindowManager().getDefaultDisplay();
        int width = display.getWidth();
        int height = display.getHeight();
        horizontalLayout = (LinearLayout) findViewById(R.id.yourHorizonatalLinearLayout);
        horizontalLayout.setLayoutParams(new LinearLayout.LayoutParams(
                (width * 3), height)); 
```

现在，对于每个垂直线性布局（放置在水平线性布局内并包含一对用户名和密码字段），使宽度等于设备显示的宽度。

下面的代码用于垂直线性布局之一，您还需要对其他两个重复此操作。类似的代码片段，只需更改 id。

```
firstEditLayout = (LinearLayout) findViewById(R.id.yourFirstVerticalLinearLayout);
        firstEditLayout.setGravity(Gravity.CENTER_VERTICAL);
        firstEditLayout.setLayoutParams(new LinearLayout.LayoutParams(
                (width), height)); 
```

PS：我希望我已经足够清楚让你理解。

# ios - 为什么我的 iOS 应用程序突然无法将状态更新发布到 Facebook

> ID：12540895
> 
> 赞同：2
> 
> 时间：2012-09-22T05:08:54.957
> 
> 标签：ios, facebook, post, status

我能够通过几天前开发的 iOS 应用程序向 Facebook 用户墙发布状态更新。然后我可能不小心删除了一些东西，我现在无法发布并收到错误消息。相关代码为A：

```
 message = @"test";
    [FBRequestConnection startForPostStatusUpdate:message
    completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    } 
```

我还尝试了以下方法B：

```
 [FBRequestConnection startWithGraphPath:@"me/feed" parameters:postParams HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection,id result,NSError *error) 
```

我得到了同样的错误信息：操作无法完成。（com.facebook.sdk 错误 5。）“

我还注意到，无论我使用 FacebookSDK.h 还是 Facebook.h 都没有关系，这两种方法（四种方法）都会得到上面相同的错误消息。我也想知道为什么 FacebookSDK.h 足以支持上述两种方法，为什么教程建议弃用 Facebook.h。

有趣的是，我去检查另一个我记得可以发布 Facebook 状态更新的测试 iOS 应用程序，发现它也不能发布。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:33:45.567

我决定使用 iOS6 功能 SLComposeViewController，这使得发布 Facebook 状态更新变得轻而易举。

在您的 .m 文件中添加社交框架后，您可以这样做：

```
 - (IBAction)clickMe:(UIButton *)sender {
         NSLog(@"you clicked me");
         if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

       SLComposeViewController* myFB = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

          SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result) {
            if (result == SLComposeViewControllerResultCancelled) {
                NSLog(@"cancelled");
           } else {
               NSLog(@"oh yeah");
           }
        [myFB dismissViewControllerAnimated:YES completion:nil];
    };
    myFB.completionHandler = myBlock;
    [myFB setInitialText:@"Posting from my app."];
    [self presentViewController:myFB animated:YES completion:nil];

    }

    } 
```

# command-line - 如何以管理员身份自动打开cmd

> ID：12540901
> 
> 赞同：0
> 
> 时间：2012-09-21T04:05:41.277
> 
> 标签：command-line, batch-file

我正在为我的学校项目创建一个程序，它正在调用一些批处理文件。

除非具有管理员权限，否则某些命令将不会执行。请问我该如何解决？VBS、VB 或批处理代码中的任何解决方案都将受到赞赏，因为我正在使用 Visual Basic 进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:25:24.983

使用此批处理代码：

```
runas /user:ADMINUSERNAME BATCHFILE.BAT 
```

`ADMINUSERNAME`是您计算机的管理员帐户，并且`BATCHFILE.BAT`是您的批处理文件的路径。

# ruby-on-rails-3 - rails-3-jquery 自动完成功能不适用于嵌套模型

> ID：12540906
> 
> 赞同：0
> 
> 时间：2012-09-22T05:10:29.550
> 
> 标签：ruby-on-rails-3, autocomplete, jquery-autocomplete

我使用 gem [https://github.com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)的自动完成功能不起作用。当我尝试单独使用自动完成功能（只有一个模型）时，它可以工作。

这是我的控制器：-

```
autocomplete :location, :name 
```

模型 ：-

```
belongs_to :location 
```

看法 ：-

```
 = fields_for @event.location do |location|

    = location.autocomplete_field :name, autocomplete_location_name_events_path, :placeholder => "Enter the name of the location" 
```

路线：-

```
resources :events do
    get :autocomplete_location_name, :on => :collection
end 
```

application.js.cofee

```
#= require autocomplete-rails 
```

我也无法正确调试以知道究竟是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:53:34.330

尝试

路线：

```
get 'events/autocomplete_location_name' 
```

看法：

```
fields_for :location do |location|
location.autocomplete_field :name, events_autocomplete_location_name, :placeholder => "Enter the name of the location" 
```

# c# - 如何在c#中将文字字符串转换为普通字符串

> ID：12540910
> 
> 赞同：0
> 
> 时间：2012-09-22T05:10:41.960
> 
> 标签：c#, asp.net-mvc-3

例如：`mystr="\"http:\\/\\/somedomain.com\"";`

我想将此字符串转换为`"http://somedomain.com";`

`HttpUtility.HtmlDecode`并且`HttpUtility.UrlDecode`不工作

怎么能转换这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T05:13:27.913

这是因为您需要在 C# 中转义“\”和引号 (") 字符。无需编码/解码。如果您想摆脱令人困惑的反斜杠，请在字符串前添加 @

myStr = @"http://www.google.com"

不过，您的字符串看起来很奇怪，因此您需要获取引号内的文本，然后删除 http:// 部分中那些奇怪放置的“\”。

# c++ - 诅咒填充方块

> ID：12540914
> 
> 赞同：1
> 
> 时间：2012-09-22T05:12:08.983
> 
> 标签：c++, ncurses, curses

我正在使用 c++ 的 curses 库，想知道如何填充一个块而不是插入一个字符。我只想创建一个彩色块，但在网上找不到任何方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:13:56.693

根据所使用的字符编码/代码页，您可以使用块字符（例如代码页 437 上的代码 0xDB）。另请参阅[this other question](https://stackoverflow.com/questions/5117171/output-a-nice-block-character-with-ncurses-and-c)。

# android - 如何在sqlite中选择/删除当前时间前24小时内的所有行

> ID：12540915
> 
> 赞同：1
> 
> 时间：2012-09-22T05:12:16.307
> 
> 标签：android, sqlite

我有一个名为**daily_mood**的表，它有三 (3) 列，如下所示：

```
CREATE TABLE daily_mood (moodid INTEGER PRIMARY KEY autoincrement,mood TEXT,mooddate DATETIME) 
```

![在此处输入图像描述](../Images/059f201ca2bcd000e9d8800f4f600556.png)

它的数据是这样的： ![在此处输入图像描述](../Images/99cf08960812b570b5675923c757d2b2.png)

现在，我想完全根据mooddate 列选择/删除所有行，除了从当前日期到24 小时之前。

我试过这个查询：

```
SELECT *from daily_mood where mooddate>=datetime('now', '-1 day'); 
```

结果应该是上述数据的 1 行（最后一行）。但这里有 2 行![在此处输入图像描述](../Images/bf37f3f9bb64851046d222691e1000dc.png)

结果应该是最后一行。任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T06:10:37.337

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.US);
Calendar c = Calendar.getInstance();
c.setTimeMillis(System.currentTimeMillis());
c.add(Calendar.HOUR_OF_DAY, -24);

String query = "SELECT * from daily_mood WHERE mooddate >= " + "'" + dateFormat.format(c.getTime()) + "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T12:06:20.513

```
SimpleDateFormat  df = new SimpleDateFormat("yyyy-MM-dd",Locale.US);
        Calendar cd = Calendar.getInstance();
        Calendar removeBefore = Calendar.getInstance();
        removeBefore.set(cd.get(Calendar.YEAR), cd.get(Calendar.MONTH),(cd.get(Calendar.DAY_OF_MONTH) - 7));//Here set day before old data to be removed.

try{

  sqlDatabase=getSqlWritable();
            rowaffeted=sqlDatabase.delete(TB3, TB3_Date +" < ? ", new String[]{df.format(removeBefore.getTime())});

        }catch(Exception e){
            e.printStackTrace();
        } 
```

//你需要使用下面的方法

```
public SQLiteDatabase getSqlWritable(){
        if(dbhelper == null)
            dbhelper=new DbOpenHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
        return dbhelper.getWritableDatabase();
    } 
```

# scala - 在 Scalatra 中处理表单提交有什么好的方法吗

> ID：12540916
> 
> 赞同：3
> 
> 时间：2012-09-22T05:12:27.723
> 
> 标签：scala, scalatra

现在我只是使用`params`函数来获取已发布到 URL 的数据。

有没有其他方法可以像在 Play Framework 中那样处理 Scalatra 中的表单？Scalatra 是否支持既可用于创建表单又可自动填写表单的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:34:39.873

Scalatra 没有提供如此复杂的功能。*从难以实施*的意义上说，它并不*复杂*，它的复杂性来自于参与的各方的数量。

 *首先，您需要 a`Model`来表示域中的对象，而 Scalatra 默认情况下不提供任何模型库。然后运行时使用此模型将 HTTP 请求中设置的任意字符串转换为某个模型的实例。例如

*   如果请求是 a`GET`并指定了一个参数 like `user.id`，则绑定软件将此字符串转换为 type 的对象，`User`通过其 ID 在数据库中找到。
*   如果请求是 a `POST`，指定三个参数，如，`user.name`并且`user.password`未**指定**a ，则运行时构建一个类型的对象，该对象准备好放入数据库中班级`user.birthday`**`user.id``User``User.save()``User`**
***   如果请求是 a `PUT`（或 Scalatra 文档中解释的等价物）并且包含`user.id`and `user.birthday`，首先`User`通过 ID 检索 an，然后更新其生日，最后提供给您的控制器，准备调用`User.save()`**

 **如您所见，这需要模型库、绑定库和运行时中的胶水支持。

要生成 HTML 表单，您需要一个帮助程序库来检查模型并为您输出 HTML 位。例如，您的库检查`User`该类，检测到它具有三个公共字段`name`、`password`和`birthday`，并且根据使用`<model>.<property>`作为输入名称的约定，输出

```
<form action="$$$$" method="$$$$">
  <input name="user.name" />
  <input name="user.password" />
  <input name="user.birthday" />
  <input type="submit" />
</form> 
```

注意

*   URL 和方法只能在了解某些上下文（例如路由）后才能填充
*   the same naming convention must be used by the binding library to deserialize a `User` object submitted by this form
*   etc.

Once you have all the pieces put together, you have made up an MVC framework, so what's the point in using a tiny, RESTful software like Scalatra?***

# c++ - C ++中的随机播放向量

> ID：12540918
> 
> 赞同：4
> 
> 时间：2012-09-22T05:13:00.473
> 
> 标签：c++, vector, shuffle

我有一个 std::vector 我需要洗牌。它只有约 20 名成员。每次运行程序时，它还需要产生不同的 shuffle。

现在我正在使用`random_shuffle`，但是每次运行程序时它都会给出相同的结果。我试过[这个](https://stackoverflow.com/questions/6926433/how-to-shuffle-a-stdvector-in-c)`srand(unsigned(time(NULL)));`线程中建议的，但是，这在我的平台上不起作用。

如果可能的话，我只想使用标准代码。

编辑：这是我的实现：

```
vector<Tile>gameTiles;
gameTiles.push_back(Tile(0,0));
gameTiles.push_back(Tile(0,1));
gameTiles.push_back(Tile(0,2));
gameTiles.push_back(Tile(0,3));
gameTiles.push_back(Tile(0,4));
//etc. ~20 member

random_shuffle(gameTiles.begin(), gameTiles.end()); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T05:30:12.637

如果`srand(unsigned(time(NULL)));`没有帮助，那么您的实现不得使用标准`rand()`作为其随机数生成器。在这种情况下，有一个替代版本`random_shuffle`采用自定义随机数生成器。您可以只传递一个包装器`rand()`，如下所示：

```
int MyRand(int n)
{
    return std::rand() % n;
}

// ...
std::random_shuffle(bar.begin(), bar.end(), MyRand);
// ... 
```

如果您想要分布更均匀的东西，请查看 C++11[`<random>`](http://en.cppreference.com/w/cpp/numeric/random)标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:39:50.483

好吧，您给出的实现无法正常工作（您命名了一个类型`foo`并使用了与变量相同的文字）。无论如何尝试这样的事情

```
// random generator function:
ptrdiff_t myrandom (ptrdiff_t i) { return rand()%i;}
// pointer object to it:
ptrdiff_t (*p_myrandom)(ptrdiff_t) = myrandom;

int main(void){
  srand(0)
  vector<Tile>gameTiles;
  gameTiles.push_back(Tile(0,0));
  gameTiles.push_back(Tile(0,1));
  gameTiles.push_back(Tile(0,2));
  gameTiles.push_back(Tile(0,3));
  gameTiles.push_back(Tile(0,4));
  random_shuffle(gameTiles.begin(), gameTiles.end(), p_myrandom);
} 
```

它将确保`random_shuffle`使用标准`rand`并正确初始化。除非您在同一秒内执行两次应用程序，否则它应该会给出不同的结果，这将导致对`rand`. 代码从[这里开始，](http://www.cplusplus.com/reference/algorithm/random_shuffle/)但有任何改变，所以我只是使用它。

# php - 如何验证从 php 应用程序到我的 Web 服务的请求的真实性？

> ID：12540919
> 
> 赞同：2
> 
> 时间：2012-09-22T05:13:23.420
> 
> 标签：php, web-services, authentication

我想接受来自 php 应用程序对我的网络服务的请求。如何验证对 Web 服务的请求是否来自 php 应用程序（或任何授权来源）并且不是伪造的？

我的网络服务依赖于接收到的来自允许域的请求，而不是来自发送数据并预示来自该域的某个机器人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:18:02.630

> 如何验证对 Web 服务的请求是否来自 php 应用程序（或任何授权来源）并且不是伪造的？

好吧，验证他们的身份并在错误或丢失时拒绝。

> 我的网络服务依赖于来自允许域而不是来自某个机器人的接收请求

实际上，您在这里的想法是检查 HTTP 引荐来源网址。这恰好是那些容易被欺骗的领域之一。所以你不应该真的依赖它作为有效性的最终测试。相反，我会执行以下操作：

从谷歌搜索/研究这些主题开始：

*   HTTP 请求，特别是在标头中传递数据
*   生成身份验证令牌
*   将身份验证令牌存储在 cookie 中

所以，基本上，很多时候你会读到以这种方式工作的 API，本质上是：客户端以某种方式执行初始身份验证 API 方法，这将生成一个临时身份验证令牌（通常遵循一种格式，即 md5(userID +timestamp+authlevel+etc+etc)）。然后，在对其他 API 方法发出的所有后续请求的标头中包含您的身份验证令牌。然后您的 API 首先验证该令牌，如果它有效，则执行该方法

有关良好 API 开发的教程/信息，您应该查看[APIGEE](http://apigee.com/about/)

# sql - 练习用的数据库

> ID：12540922
> 
> 赞同：0
> 
> 时间：2012-09-22T05:13:35.097
> 
> 标签：sql, sqlite

我正在寻找可以下载用于 sqlite3 或 csv 文件的数据库来练习。我正在查看这样的政府网站上的一些数据库。

```
series_id   year    period  value   footnote_codes
CUURA000AA0         1986    M12        100.0              
CUURA000AA0         1987    M01        100.6 
```

像这样的东西会很好，但我正在寻找一些对我来说更有意义的东西，并且可以用来练习不同的 SQL 语句和函数。基本上我只需要一些大文件来用作数据库，这样我就不必创建自己的了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:52:57.470

[data.stackexchange.com](http://data.stackexchange.com "data.stackexchange.com")让您可以查询完整的 StackOverflow 数据集，这是一个很好的学习集，您可以在网站上看到相同的数据。我相信每个月都会倾销一次数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:50:15.950

检查这个：

**Sqlite 的 Northwind 数据库**

[Northwind.Sqlite3.sql](http://code.google.com/p/northwindextended/downloads/detail?name=Northwind.Sqlite3.sql&can=2&q=)

# web-deployment-project - 我不知道从哪里开始我想从事的项目的 Web 开发

> ID：12540923
> 
> 赞同：-1
> 
> 时间：2012-09-22T05:13:36.350
> 
> 标签：web-deployment-project

我想建立一个网站，记录我学校的课程和课程，并允许您搜索信息并从结果中选择课程。我对我希望它是什么样子有一个清晰的愿景，但我不确定我需要学习什么来实现目标。

我想将它连接到数据库，并将这些结果显示在具有各种信息列的行中。我希望表格具有交替的背景颜色，我想这很容易，但我希望没有边框并且能够选择和突出显示一行。如果数据在信息之间带有选项卡，并且能够突出显示行并使用鼠标或使用箭头键选择它们，那么在 excel 中具有一堆连接的单元格就构成了行。

老实说，这非常不符合我的要求，但我想通过尝试这个项目来尝试学习。我只是不确定我需要用什么来做这样的事情。

编辑：好点。我的经验。一些机器代码，python 和 java，没什么太复杂的，主要是学校作业之类的。目前正在开始一门课程，我将在其中学习一些 C 和另一门关于数据库管理和操作的课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:23:56.353

您没有提及您的编程经验水平或首选语言，但我建议使用带有 sqlite 后端的[Django作为您想要的原型的最简单方法。](https://docs.djangoproject.com/en/1.4/)在 Django 中建立一个基本项目非常简单，我发现文档是一流的。Admin 应用程序还可以让您轻松管理您的应用程序数据。如果您不太特别，Admin 应用程序可能足以满足您的整个界面。如果您的数据库已经存在并且可供您访问，则不需要 sqlite，只需使用[此信息](https://docs.djangoproject.com/en/1.4/howto/legacy-databases/)即可。

一旦你得到了基本的后端工作（仅 Django 教程甚至可能让你走得更远），[Bootstrap](http://twitter.github.com/bootstrap/)可能是按照你想要的方式设置网站样式的最简单方法。获得您想要的电子表格界面可能不是超级实用。拥有一个仅用于显示所有数据的列表屏幕和用于编辑单个项目的详细信息屏幕要容易得多。但是，如果您在电子表格界面上死心塌地，也许[这](http://www.ibm.com/developerworks/web/library/wa-django/index.html)会有所帮助。

# c++ - 模板类构造函数中的动态分配

> ID：12540928
> 
> 赞同：1
> 
> 时间：2012-09-22T05:15:08.603
> 
> 标签：c++, runtime-error, dynamic-memory-allocation, template-classes

我正在研究一个堆栈类并有两个构造函数。一个感兴趣的是这个。

```
template <typename T>
stack<T>::stack( const int n)
{
 capacity = n ;
 size = 0 ;
 arr = new T [capacity] ;
} 
```

我像这样在 main 内部调用它。

```
stack<int> s1(3) ; 
```

该程序编译良好，但我得到这个运行时错误。

```
1>main.obj : error LNK2019: unresolved external symbol "public: __thiscall
 stack<int>::~stack<int>(void)" (??1?$stack@H@@QAE@XZ) referenced in function _main

1>main.obj : error LNK2019: unresolved external symbol "public: __thiscall    
stack<int>::stack<int>(int)" (??0?$stack@H@@QAE@H@Z) referenced in function _main

1>D:\\Microsoft Visual Studio 10.0\Visual Studio 2010\Projects\Expression
 Evaluation\Debug\Expression Evaluation.exe : fatal error LNK1120: 2 unresolved externals 
```

我正在努力`Microsoft visual studio 2010`，这个问题让我无处可去。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T05:25:35.980

这不是运行时错误，而是链接器错误。问题可能是构造函数和析构函数的实现在源文件中。对于模板类，您必须将所有方法的实现放在头文件中（或在使用它们的源文件中，但这相当于将它们放在头文件中）。

所以基本上这样做：

```
template<class T>
class stack
{
public:
    stack( const int n)
    {
        capacity = n ;
        size = 0 ;
        arr = new T [capacity] ;
    }

    // and the same for all other method implementations
}; 
```

# iis-7.5 - iis7.5 Response.ContentType = "application/pdf" 导致连接重置

> ID：12540929
> 
> 赞同：2
> 
> 时间：2012-09-22T05:15:12.597
> 
> 标签：iis-7.5, content-type

我正在使用 IIS 以经典的 asp 发送 pdf 文档（由 abcpdf 8 生成）。

没有任何东西进入浏览器。

*   FF：连接已重置 - 与服务器的连接在页面加载时已重置。
*   IE：Internet Explorer 无法显示网页 - Internet 连接已丢失
*   Chrome：此网页不可用 - 错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。

这是代码：

```
Set theDoc = CreateObject("ABCpdf8.Doc") 
theDoc.FontSize = 96
thedoc.AddText "Hello World"

theData = theDoc.GetData()

Response.ContentType = "application/pdf" '<-- culprit?
Response.AddHeader "content-length", UBound(theData) - LBound(theData) + 1
Response.AddHeader "content-disposition", "inline; filename=MyPDF.PDF"
Response.BinaryWrite theData 
```

如果我注释掉 ContentType 行，浏览器会加载二进制数据，但是数据当然会显示在浏览器中，并且在这种格式下是不可读的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T21:00:20.487

一位同事解决了这个问题。

```
Response.BinaryWrite
Response.flush  '<-- this fixes it. 
```

如果有人知道为什么会这样，请添加评论。

# css - 在 mixin 参数中使用 LESS 变量

> ID：12540932
> 
> 赞同：1
> 
> 时间：2012-09-22T05:16:00.183
> 
> 标签：css, variables, parameters, less

我希望为边界半径创建 LESS 混合，允许在混合声明中由其他两个参数将两个参数设置为默认值。以下是一个示例，它不起作用，但类似于我想要实现的目标：

```
.border-radius-ext (@topleft: 0, @topright: 0, @bottomright: @topleft, @bottomleft: @topright) {
    border-top-left-radius: @topleft;
    border-top-right-radius: @topright;
    border-bottom-right-radius: @bottomright;
    border-bottom-left-radius: @bottomleft;
} 
```

我意识到我可以将所有值设置为 0。那不是我所追求的。我希望如果 mixin 是这样使用的：

```
blockquote {
    .border-radius-ext(3px, 5px);
} 
```

mixin 会输出：

```
blockquote {
    border-top-left-radius: 3px;
    border-top-right-radius: 5px;
    border-bottom-right-radius: 3px;
    border-bottom-left-radius: 5px;
} 
```

...同时如果 mixin 像这样使用，仍然允许`@bottomright`和被覆盖的默认值：`@bottomleft`

```
blockquote {
    .border-radius-ext(3px, 5px, 7px, 2px);
} 
```

在这种情况下，输出将是：

```
blockquote {
    border-top-left-radius: 3px;
    border-top-right-radius: 5px;
    border-bottom-right-radius: 7px;
    border-bottom-left-radius: 2px;
} 
```

LESS 是不可能的，还是我做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T07:07:26.607

参数的默认值不能是其他参数。但是您可以使用这种方法：

```
.border-radius-ext (@topleft, @topright) {
    .border-radius-ext(@topleft, @topright, @topleft, @topright);
}

.border-radius-ext (@topleft, @topright, @bottomright, @bottomleft) {
    border-top-left-radius: @topleft;
    border-top-right-radius: @topright;
    border-bottom-right-radius: @bottomright;
    border-bottom-left-radius: @bottomleft;
} 
```

现在你可以使用这个带有两个或四个参数的 mixin。如果需要，您还可以轻松创建具有三个参数的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T06:01:33.977

因为您的 mixin 需要 4 个变量 - 您需要输入 4 个。仅当您对所有变量都有默认值并且您什么都不传递时，设置默认值才有效 - 或者（我认为） - 如果您始终将变量放在开头，而将默认值放在末尾。

无论如何，我建议只使用四个变量，可能带有默认值，因为如果另一个开发人员开始使用您的 LESS，它会减少混乱。

这样的事情会很好：

```
.border-radius-ext (@topleft: 0, @topright: 0, @bottomright: 0, @bottomleft: 0) {
    border-top-left-radius: @topleft;
    border-top-right-radius: @topright;
    border-bottom-right-radius: @bottomright;
    border-bottom-left-radius: @bottomleft;
}

.border-radius-ext(3px, 5px, 7px, 2px); 
```

我还推荐使用 LESS 元素，[http](http://lesselements.com/) ://lesselements.com/ ，这是一个很好的预构建 mixin 集合。

# mysql - MySQL：排除在子查询中收集的同一张表中的项目

> ID：12540936
> 
> 赞同：1
> 
> 时间：2012-09-22T05:16:33.913
> 
> 标签：mysql

我在这里尝试完成的事情似乎并不太难，在执行过程中我没有看到我做错了什么，但我得到了一些应该从结果集中否定的结果。

我在手机上写这个，所以请原谅我用手写这些东西：

该表称为“请求”，在程序中人们可以注册接受请求。客户端的特定请求是对已经接受请求的用户隐藏。

这是第 22 个问题：一个请求基于另一个表中的特定实体，并且每个基本实体可以发布多个请求。基本上从系统中删除所述实体的重复项，我想一个不错的方法来处理这个问题是有一个新的关联行，称为请求，它包含一个唯一的 id、请求者的帐户 id、实体的实体 id请求基于该特定可用请求行的接受者的帐户 ID 字段。

正如您所看到的，它的解释开始变得有些混乱，但请记住，这是一个相当晚的更改，并且无法在此阶段更改系统。

所以这是我记得最清楚的查询：

SELECT * FROM requests WHERE completed = 0 AND entity_id != ANY (SELECT GROUP_CONCAT(entity_id) WHERE accepted_account_id = '8')

8 是我在系统中的帐户 ID，系统中有 8 个基本实体（全部从同一个帐户发布，7 个），其中 2 个实体有基于它们的请求，第一个有 4 个请求，第二个有 16 个要求。所以 requests 表中有 20 个请求行。作为用户，我已接受系统中两个实体的单个请求。因此，在请求表中的两行上，RequestID 为 1，实体 ID 为 1，Acceptor Account ID 为 8，RequestID 为 5，实体 ID 为 3，Acceptor Account ID 为 8

而所有其他行包含acceptor_account_id 的空字段

我试图简单地从结果集中否定整个 entity_ids，以免弄乱同一个查询中正在进行的分页（我对分离查询不感兴趣，我 150% 肯定这都可以在一个查询）

如果有人有任何问题，请告诉我，因为这很紧急:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:21:21.190

`SELECT * FROM requests WHERE completed = 0 AND entity_id NOT IN (SELECT entity_id WHERE accepted_account_id = '8' GROUP BY entity_id)`

# php - 如何打印由另一个数组键引用的数组的值

> ID：12540940
> 
> 赞同：1
> 
> 时间：2012-09-22T05:17:43.140
> 
> 标签：php

这是我的代码，

```
//I have set formData array to session array here
$_SESSION['form_data'] = $formData = array();           

//here i have set a value to formData array
$formData[0] = 'insert data done';

//I want to accually echo the value of formData[0] - key's value        
$var = $_SESSION['form_data'][$formData[0]];

var_dump($var); 
```

我是 php 新手，我的要求是构建表单验证并将验证数据发送回表单。所以我使用会话将数据发送到一个 php 文件到另一个。我认为这是我可以将数据从一页发送到另一页的唯一方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:27:20.643

```
// the code only initialize $_SESSION['form_data'] and $formData with an empty array
// after assignment, they're independent.
$_SESSION['form_data'] = $formData = array(); 
// change the $formData won't affect the $_SESSION['form_data']
$formData[0] = 'insert data done'; 
```

正确的顺序是：

```
$formData = array();
$formData[0] = 'insert data done';
$_SESSION['form_data'] = $formData;

$var = $_SESSION['form_data'][0];
var_dump($var); 
```

但是对于表单验证，如果验证失败，您不需要重定向到输入页面。相反，只需使用相同的模板（html 内容），并呈现带有错误消息的页面，这样您就不需要将数据发送回输入页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:29:55.700

像这样使用它

```
$formData[0] = 'insert data done';

$_SESSION['form_data'] = $formData;  

$var = $_SESSION['form_data'];

var_dump($var); 
```

现在您可以`$_SESSION`在任何页面中使用数据。

# c++ - Irrlicht 编译，但执行时崩溃

> ID：12540946
> 
> 赞同：1
> 
> 时间：2012-09-22T05:18:28.897
> 
> 标签：c++, dll, graphics, segmentation-fault, irrlicht

我的电脑上有 irrlicht 1.6，我使用 codeblocks + tdm-gcc MinGW 4.7。什么情况是，当我编译一个示例程序时，它编译得很好，但是当我尝试运行它时，它总是给我一个分段错误错误。它返回代码 -1073741819 (0xC0000005)。在任何尝试使用图形驱动程序时，它总是会出现分段错误。这就是发生分层故障的地方。

```
guienv->addStaticText(L"Hello World! This is the Irrlicht Software renderer!",
    rect<int>(10,10,200,22), true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:26:02.830

我在整个互联网上搜索了解决方案，但找不到任何解决方案。即使我构建了自己的 dll，它还是过大（22mb +）并且不包含 irrlicht 的所有功能。所以，我决定从 tdm-gcc 4.7 降级到 4.6，它可以完美地工作，使用原始 dll 和所有功能。如果有人遇到同样的问题，并想尝试降级，请在[http://sourceforge.net/projects/tdm-gcc/files/TDM-GCC%20Installer/Previous/1.1006.0/获取安装程序](http://sourceforge.net/projects/tdm-gcc/files/TDM-GCC%20Installer/Previous/1.1006.0/)

**更新**

我发现随着 irrlicht 1.8 的发布，它现在可以使用 MinGW 4.7 32 位和 64 位正确编译。

# node.js - Mocha、should.js 和断言异常

> ID：12540948
> 
> 赞同：8
> 
> 时间：2012-09-22T05:18:52.973
> 
> 标签：node.js, tdd, coffeescript, mocha.js, should.js

我有一个文件`app.coffee`：

```
class TaskList

class Task
    constructor: (@name) ->
        @status = 'incomplete'
    complete: ->
        if @parent? and @parent.status isnt 'completed'
          throw "Dependent task '#{@parent.name}' is not completed."
        @status = 'complete'
        true
    dependsOn: (@parent) ->
        @parent.child = @
        @status = 'dependent'

# Prepare scope stuff
root = exports ? window
root.TaskList = TaskList
root.Task = Task 
```

和一个名为`test/taskTest.coffee`：

```
{TaskList, Task} = require '../app'
should = require 'should'

describe 'Task Instance', ->
    task1 = task2 = null
    it 'should have a name', ->
        something = 'asdf'
        something.should.equal 'asdf'
        task1 = new Task 'feed the cat'
        task1.name.should.equal 'feed the cat'
    it 'should be initially incomplete', ->
        task1.status.should.equal 'incomplete'
    it 'should be able to be completed', ->
        task1.complete().should.be.true
        task1.status.should.equal 'complete'
    it 'should be able to be dependent on another task', ->
        task1 = new Task 'wash dishes'
        task2 = new Task 'dry dishes'
        task2.dependsOn task1
        task2.status.should.equal 'dependent'
        task2.parent.should.equal task1
        task1.child.should.equal task2
    it 'should refuse completion it is dependent on an uncompleted task', ->
        (-> task2.complete()).should.throw "Dependent task 'wash dishes' is not completed." 
```

如果我在终端中运行这个命令：`mocha -r should --compilers coffee:coffee-script -R spec`我有一个失败的测试（最后一个）说它期待一个异常“相关任务'洗碗'没有完成。” 但得到“未定义”。

如果我通过删除括号更改`(-> task2.complete()).should.throw`为`-> task2.complete().should.throw`，则测试通过，如果我不抛出异常则失败。但是，如果我将异常消息更改为随机消息，它仍然会通过。难道我做错了什么？如果消息字面上是“相关任务'洗碗'未完成”，测试不应该通过吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T22:40:39.533

您正在使用字符串引发异常，而不是引发错误对象。`throw()`寻找后者。因此，如果您这样做，您的原始代码将起作用：

```
throw new Error "Dependent task '#{@parent.name}' is not completed." 
```

* * *

如果您在 CoffeeScript 中编写的内容产生了没有意义的结果，请尝试将其编译为 js（或将代码粘贴到[try CoffeeScript](http://coffeescript.org)中。您会看到：

```
-> task2.complete().should.throw "Dependent task 'wash dishes' is not completed." 
```

编译为：

```
(function() {
  return task2.complete().should["throw"]("Dependent task 'wash dishes' is not completed.");
}); 
```

它只是定义一个函数而不执行它。这解释了为什么更改字符串没有区别。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T02:24:37.100

首先，这是一些好看的 Coffeescript。

其次，David Weldon 的回答是正确的，您可以将 throw 更改为实际抛出错误并且它可以工作。

这是您的代码放入一个长文件中，只是更改了 throw。

```
class TaskList

class Task
    constructor: (@name) ->
        @status = 'incomplete'
    complete: ->
        if @parent? and @parent.status isnt 'completed'
          throw new Error "Dependent task '#{@parent.name}' is not completed."
        @status = 'complete'
        true
    dependsOn: (@parent) ->
        @parent.child = @
        @status = 'dependent'

# Prepare scope stuff
root = exports ? window
root.TaskList = TaskList
root.Task = Task

should = require 'should'

describe 'Task Instance', ->
    task1 = task2 = null
    it 'should have a name', ->
        something = 'asdf'
        something.should.equal 'asdf'
        task1 = new Task 'feed the cat'
        task1.name.should.equal 'feed the cat'
    it 'should be initially incomplete', ->
        task1.status.should.equal 'incomplete'
    it 'should be able to be completed', ->
        task1.complete().should.be.true
        task1.status.should.equal 'complete'
    it 'should be able to be dependent on another task', ->
        task1 = new Task 'wash dishes'
        task2 = new Task 'dry dishes'
        task2.dependsOn task1
        task2.status.should.equal 'dependent'
        task2.parent.should.equal task1
        task1.child.should.equal task2
    it 'should refuse completion it is dependent on an uncompleted task', ->
        (-> task2.complete()).should.throw "Dependent task 'wash dishes' is not completed." 
```

摩卡那个混蛋，你很高兴。

# forms - 如何使用 express.js 和节点停止表单提交

> ID：12540949
> 
> 赞同：0
> 
> 时间：2012-09-22T05:18:57.293
> 
> 标签：forms, validation, node.js, express, ejs

我正在使用 express-validator 验证我的表单...如果我有错误，阻止表单提交并返回登录页面的最佳方法是什么。这就是我所拥有的，它有效，只是寻找处理这个问题的最佳方法（不确定返回语句）。

```
//routes/index.js
exports.login.post = function(req, res){
  req.assert('username', 'Please enter username').notEmpty();
  req.assert('password', 'Please enter password').notEmpty();
  res.locals.errors = req.validationErrors(true);

  if ( res.locals.errors ) {
    console.log(res.locals.errors);
    var d = { title: 'Login' };
    res.render('login', { d: d });
    return;
  }

 //do login here if no errors
}; 
```

我也不知道如何获取表单模板（ejs）中的原始值。

我尝试将 req.param 传入，但它是空的。

err 对象只有那些有错误的字段，所以如果我输入用户名，但将密码留空，我只会在 err 对象中获得密码，而不是用户名......所以我需要 req.param.username，但是当我通过 { q: req.param} 并使用 <%= inspect(q) %> 它是空的。

**更新：** req.body 给了我原始的帖子参数来预填充表单。所以你需要 err stack 和 req.body stack 才能有好的体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:59:47.893

这就是我所做的

```
app.post('/form_process', validateForm, form.handle)
function validateForm(req, res, next) {
  req.assert('username', 'Invalid Username').notEmpty().isAlpha();
  req.assert('password', 'Invalid Password').notEmpty().isAlpha();

  var errors = req.validationErrors();
  if (errors) {
    //res.send(errors,500);
    var original_values = {
      username: req.param('username'),
      password: req.param('password')
    }
    res.render('login', { errorMsg: errors, original: original_values, title: "Login error" })
    return;
  }
  else next()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T06:07:39.377

我建议做的是使用类似[flashify](https://npmjs.org/package/flashify "闪现")的东西来设置 flash 通知并将请求重定向回视图。

因此，您可以执行以下操作：

```
if ( res.locals.errors ) 
{
  res.flash('error','bad username/password');
  req.session.formData = req.body;
  res.redirect('back');
} 
```

然后在视图中，您只需检查是否`flash.error`存在，如果存在则输出消息，然后：`<%= flash.error %>`:)

# c# - 输入用户名时如何显示密码？

> ID：12540950
> 
> 赞同：0
> 
> 时间：2012-09-22T05:19:08.247
> 
> 标签：c#, javascript, asp.net

我正在使用 ASP.NET 和 C#。登录时，如果用户检查了记住密码，那么我将其存储在 cookie 中。因此，如果他们下次登录，它将显示在密码字段中。

这是我用于创建 cookie 的代码。

```
 HttpCookie cookie = new HttpCookie("user");
                cookie.Values.Add("username", t_uname.Text);
                cookie.Values.Add("password", t_pass.Text);
                Response.Cookies.Add(cookie); 
```

因此，在下次登录时，我正在使用它。

```
 t_uname.Text = HttpContext.Current.Request.Cookies["user"]["username"].ToString();
                string pass= HttpContext.Current.Request.Cookies["user"]["password"].ToString();
                t_pass.Attributes.Add("value", pass); 
```

因此，我需要在输入用户名后在密码字段中显示密码，而不是这样。

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T05:54:11.233

不要将*密码*存储在 cookie 中！Cookie 是纯文本文件，这意味着您用户的 Cookie 将被盗，帐户将被劫持。

为什么不使用`Authentication`ASP.NET 中提供的内置服务？这很容易做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T07:20:47.000

您的要求并不完全清楚。但是，如果你想记住我的实现。看看下面的链接。

[asp.net “记住我” cookie](https://stackoverflow.com/questions/3355601/asp-net-remember-me-cookie)

[为网站实施“记住我”的最佳方式是什么？](https://stackoverflow.com/questions/244882/what-is-the-best-way-to-implement-remember-me-for-a-website)

# javascript - 对象的属性“提交”# 不是函数

> ID：12540953
> 
> 赞同：50
> 
> 时间：2012-09-22T05:20:05.213
> 
> 标签：javascript, jquery, html, forms, submit

谁能向我解释这个错误是什么意思？对于这方面的任何帮助，我将不胜感激。

```
<form class="form" id="form" action="/mailer.php" method="post"> 
```

我使用的 Jquery 代码就是这个。

```
$('#form').submit(); 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-09-22T05:37:41.227

检查表单以查看是否有一个`HTMLInputElement`with id 或 name is `submit`。

这将为 设置一个属性`submit`，`HTMLFormElement`因此`submit`无法执行表单元素原型中的函数。

***例子：***

```
<form class="form" id="form" action="/mailer.php" method="post">
    ​&lt;input type="button" name="submit" value="go"/>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

js：

```
​console.log($("#form")[0].submit)​;​  // will be the button element, not the submit function. 
```

jQuery 的`.submit()`方法会调用`.submit()`原始 dom 元素上的 ，所以会发生错误。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-05T11:32:26.957

**xdazz 很好地**解释了这个问题。

您可以使用 HTMLFormElement 的本机**提交**方法来解决问题：

```
HTMLFormElement.prototype.submit.call($('#form')[0]); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-22T05:48:20.090

如果您有一个名称为 submit 或 id submit 的按钮或输入，我在 IE 中看到了错误。确保您的输入正确命名。这是一篇关于它的文章[http://bugs.jquery.com/ticket/1414](http://bugs.jquery.com/ticket/1414)

# qt - 使用复选框的 Qt 图像

> ID：12540955
> 
> 赞同：0
> 
> 时间：2012-09-22T05:20:10.220
> 
> 标签：qt

我想在 Qt 中添加图像并使它们与复选框一起使用。我怎样才能做到这一点？我可以使用该`ischecked()`功能还是应该使用信号和插槽？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:23:33.560

您可以使用 ischecked 函数在 if 语句中执行此操作。在开始研究 Qt 之前，请先了解 Qt 的基本概念。

# c# - 在 SQL Server CE 上解析查询时出错

> ID：12540956
> 
> 赞同：1
> 
> 时间：2012-09-22T05:20:19.067
> 
> 标签：c#, sql-server-ce

我在 SQL Server CE 中的插入操作有问题，这是例外

![在此处输入图像描述](../Images/71d532c4e8128deaaecc33357ffe10d0.png)

这些是我的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            perintahsql = new SqlCeCommand("INSERT INTO lokasi (Campus, Address, Phone 1, Phone 2, Phone 3, Fax, Ext.number, Longitude, Latitude, Maps) VALUES (@Campus, @Address, @Phone 1, @Phone 2, @Phone 3, @Fax, @Ext.number, @Longitude, @Latitude, @Maps)", koneksi);
            perintahsql.Parameters.AddWithValue("@Campus", comboBox1.Text);
            perintahsql.Parameters.AddWithValue("@Address", textBox1.Text);
            perintahsql.Parameters.AddWithValue("@Phone 1", textBox2.Text);
            perintahsql.Parameters.AddWithValue("@Phone 2", textBox3.Text);
            perintahsql.Parameters.AddWithValue("@Phone 3", textBox4.Text);
            perintahsql.Parameters.AddWithValue("@Fax", textBox5.Text);
            perintahsql.Parameters.AddWithValue("@Ext. number", textBox6.Text);
            perintahsql.Parameters.AddWithValue("@Longitude", textBox7.Text);
            perintahsql.Parameters.AddWithValue("@Latitude", textBox8.Text);
            perintahsql.Parameters.AddWithValue("@Maps", textBox9.Text);
            koneksi.Open();
            perintahsql.ExecuteNonQuery();
            koneksi.Close();
        }
        catch (SqlCeException ex)
        {
            MessageBox.Show("Whoopss!! " + ex, "SQL Server CE Exception Message");
        }
    } 
```

如何修复该错误？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:34:10.657

列名和变量名中不能有空格。如果您在 notepad++ 中打开插入语句（或手动计数），您会发现字符 44 是“Phone 1”中的第一个空格。

"INSERT INTO lokasi (校园、地址、电话"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:35:08.873

尝试重命名变量，SQL 不允许使用空格的变量。将变量@Phone 1 更改为@Phone1 等以及@Ext。编号为@ExtNumber。希望它能解决您的疑问。

# android - 使用 onitemclick 获取列表视图查询单独页面

> ID：12540958
> 
> 赞同：0
> 
> 时间：2012-09-22T05:21:13.920
> 
> 标签：android, android-listview, android-arrayadapter, onitemclicklistener, android-query

当用户单击特定列表时，我想显示列表视图查询单独的页面。我为显示列表视图编写了程序，并实现了 onitemclick。但是当我单击列表视图时，它不会显示查询。例如：如果我点击一个，我想显示一个：一个是第一个数字。

我的代码：

```
public class ListViewSearchExample extends Activity {

    private ListView lv;
    private EditText et;
    private TextView tv;
    private String listview_array[] = { "ONE", "TWO", "THREE", "FOUR", "FIVE",
    "SIX", "SEVEN", "EIGHT", "NINE", "TEN" };
    private ArrayList<String> array_sort= new ArrayList<String>();
    int textlength=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        lv = (ListView) findViewById(R.id.ListView01);
        et = (EditText) findViewById(R.id.EditText01);

        //lv.setAdapter(new ArrayAdapter<String>(this,
        //android.R.layout.simple_list_item_1, listview_array));

        et.addTextChangedListener(new TextWatcher()
        {
        public void afterTextChanged(Editable s)
        {
                                                                        // Abstract Method of TextWatcher Interface.
        }
        public void beforeTextChanged(CharSequence s,
        int start, int count, int after)
        {
        // Abstract Method of TextWatcher Interface.
        }
        public void onTextChanged(CharSequence s,
        int start, int before, int count)
        {
        textlength = et.getText().length();
        array_sort.clear();
        for (int i = 0; i < listview_array.length; i++)
        {
        if (textlength <= listview_array[i].length())
        {
        if(et.getText().toString().equalsIgnoreCase(
        (String)
        listview_array[i].subSequence(0,
        textlength)))
        {
             array_sort.add(listview_array[i]);
        }
        }
        }

        lv.setAdapter(new ArrayAdapter<String>
        (ListViewSearchExample.this,
        android.R.layout.simple_list_item_1, array_sort));
        lv.setOnItemClickListener(new OnItemClickListener(){

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long rowId) {
                 //TODO Auto-generated method stub          

                lv.getItemAtPosition(position);          

                //lv.setBackgroundColor((position & 1) == 1 ? Color.WHITE : Color.LTGRAY);

            }

        });

            }
        });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:41:26.543

在您的 onItemClick 中尝试这样的操作：

```
String number = listview_array[position];
if (number.equals("ONE")) {
    et.setText("One is the first number");
}
else if (number.equals("TWO")) {
...
} 
```

# c - 解析“？” 在 getopt

> ID：12540964
> 
> 赞同：0
> 
> 时间：2012-09-22T05:22:56.287
> 
> 标签：c

```
void display(char * str){
   printf("%s: Missing file\n", str);
}

int main(int argc, char **argv)
{

    int longIndex, opt = 0;
    const char *optString = "h?";

    static const struct option longOpts[] = {
    { "help", no_argument, NULL, 'h' },
    { NULL, no_argument, NULL, 0 }
    };

    opt = getopt_long( argc, argv, optString, longOpts, &longIndex );
    while( opt != -1 ) {
        switch( opt ) {
            case 'h':
            case '?':
                display(argv[0]);
                break;

            default:
                break;
        }

        opt = getopt_long( argc, argv, optString, longOpts, &longIndex );
    }

        return 0;
} 
```

这段代码编译得很好，但是当我像这样运行它时：

```
./a.out ? 
```

它不调用显示。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T05:28:00.097

问号“？” 当 getopt 找到*不在***optstring**中的参数或检测到缺少选项参数时，由**getopt**返回，因此您不应使用 '?' 在**optstring**中，因为它是为此保留的，因此您应该使用更传统的 'h' 来寻求帮助。

 *****请参阅[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/getopt.3.html)

编辑：这是一个例子：

```
switch (opt) {
    case 'n':
        some_flag = 1;
        break;
    case 'h': /* help */
    default: /* '?' unknown opt or missing arg*/
        fprintf(stderr, "Usage: %s [-n nsecs] \n", argv[0]);
        exit(EXIT_FAILURE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-27T17:46:00.623

如果你包括 - ？在您的帮助消息中使用--help，将问号从您的getopt呼叫中删除，将其从case选项中删除，并确保--help是您列表中的第一个case选项，问号会像您一样工作会想要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-22T05:30:20.863

const char *optString = "h?";

上面的行替换为下面的行

const char *optString = "h\?";

这是C语言问号的文字*****

# google-analytics - 谷歌分析事件流

> ID：12540967
> 
> 赞同：3
> 
> 时间：2012-09-22T05:23:26.143
> 
> 标签：google-analytics, flow, event-tracking

我正在尝试使用 Google Analytics 来检查用户在我的网站上的进度。问题是我的网站完全基于 AJAX 运行。

我已经使用以下方法设置了“事件”： `_gaq.push(['_trackEvent', category, action])`

这些正在由 Analytics 记录，但我无法查看用户在每个事件中的进展情况。

换句话说，目前我可以看到有 10 位用户添加了帖子，并且有 7 位用户对帖子添加了评论。

我想看看有多少用户添加了帖子然后还添加了评论。

Analytics 是否允许您查看/跟踪此类用户流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:45:29.477

代替或除此之外，您可以使用虚拟页面视图，然后您可以将其作为目标漏斗中的步骤。虚拟页面浏览量也将添加到整体统计数据中，其中提供了所有相关信息。

`_gaq.push(['_trackPageview', '/post/comment');`

如有必要，您可以将这些页面浏览量从任何您想要的统计信息中过滤掉，而这些数据不会被虚拟页面浏览量夸大。如果您还没有，请创建一个“原始”或未过滤的配置文件，该配置文件是所有统计信息的存储桶，以及您可能需要基于过滤器的任何其他配置文件。

另外，请查看事件下的事件流报告。您可能已经在那里找到了您正在寻找的东西。

# visual-c++ - 默认情况下，如何使用 CMake 使 GTest 构建 /MDd（而不是 /MTd）？

> ID：12540970
> 
> 赞同：16
> 
> 时间：2012-09-22T05:23:48.437
> 
> 标签：visual-c++, cmake, googletest

我正在尝试尽可能无缝地将**GTest**与**CMake集成。**但是我的测试项目的默认构建类型是`/MDd`GTest 默认为`/MTd`. 我正在手动更改 GTest 项目属性以发出调试 DLL。

但每次我对我`CMakeLists.txt`的`/MTd`. 我该如何阻止这个？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-22T17:54:26.133

您可以在包含 gtest 之前定义`gtest_force_shared_crt`to`ON`来实现这一点。您可以通过命令行执行此操作：

```
cmake . -Dgtest_force_shared_crt=ON 
```

或在您的`CMakeLists.txt`：

```
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-03T02:47:00.500

我认为更好的选择是@Fraser 的答案——在这种情况下，cmake + gtest '只是工作'。

值得一提的是，为了覆盖内部 gtest`option`设置，您需要将变量放入 cmake 缓存中：

```
set( gtest_force_shared_crt ON CACHE BOOL "Always use msvcrt.dll" ) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-17T12:51:43.017

如果 Ted Middleton 的回答不起作用，请尝试使用 FORCE：

```
set( gtest_force_shared_crt ON CACHE BOOL "Always use msvcrt.dll" FORCE) 
```

它对我有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T12:51:48.543

我们通过绕过 GTest 自己的构建系统并从其统一构建源文件将 GTest 编译为[CMake 对象库](https://cmake.org/cmake/help/latest/command/add_library.html#object-libraries)`gtest-all.cc`来解决了这个问题：

```
# compile Google Test as an object library
add_library(gtest OBJECT "${CMAKE_CURRENT_SOURCE_DIR}/gtest-1.6.0/src/gtest-all.cc")
set_property(TARGET gtest PROPERTY INCLUDE_DIRECTORIES
    "${CMAKE_CURRENT_SOURCE_DIR}/gtest-1.6.0"
    "${CMAKE_CURRENT_SOURCE_DIR}/gtest-1.6.0/include") 
```

这样，GTest 将始终使用我们用于项目的相同选项进行编译。然后可以通过以下方式构建使用 GTest 的测试可执行文件：

```
add_executable(test_executable ${TESTS_SRC} $<TARGET_OBJECTS:gtest>)
add_test(NAME test COMMAND test_executable) 
```

# jquery - 多个类名并根据类名组合应用 CSS

> ID：12540973
> 
> 赞同：0
> 
> 时间：2012-09-22T05:24:09.897
> 
> 标签：jquery, css, jquery-ui, fullcalendar

我很难理解如何根据类名组合应用多个 CSS。

我这样有两个 div 标签

```
<div class="on appr">
  <div class"sc"> Text1 </div></div>

<div class="ne appr">
  <div class"sc"> Text1 </div></div> 
```

现在我想根据类名组合应用两种不同的样式例如，当类名**打开**并且**应用程序**时，我希望背景颜色为红色。当类名是**ne**和**app**时，我希望背景颜色是绿色......等等

我试过这个：

```
.on.appr{background-color: #7FFFE7;} 
.ne.appr{background-color: #49EEAA;} 
```

但它不起作用，它只是应用一种颜色。

请问有什么帮助来定义这个吗？使用 Jquery 的解决方案对我来说也很好。谢谢！

**使用完整代码更新**

值得一提的是，因为我在我的 CSS 声明中这样做是正确的。我正在使用 FullCalendar，并且正在将 className 传递给 fullCalendar 事件。当我使用萤火虫时，我看到我传递给日历事件的类名。

下面是我在 Firebug 中看到的日历条目。

```
<div class="fc-event fc-event-skin fc-event-hori on appr"
     style="position: absolute;    z-index: 8; left: 0px; width: 1100px; top: 307px;">
    <div class="fc-event-inner fc-event-skin">
    <span class="fc-event-title">(on)Jeff</span>
    </div>
    </div> 
```

下面是我在 .jsp 文件中的代码。

```
 <style type="text/css">

.pen .fc-event-skin
    {
border-color:red;
color:red;
font-weight: bold; 
font-size: 10pt;
background-color: yellow;
    }

.on.appr.fc-event-skin
{
background-color: green;
font-weight: bold; 
font-size: 10pt;
}

   .ne.appr.fc-event-skin
{
background-color: red;
color:yellow;
font-weight: bold; 
font-size: 10pt;

}

</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T05:26:51.070

```
.on.appr{background-color: #7FFFE7;} 
```

改变这个

```
.ne.appr{background-color: 49EEAA;} 
```

至

```
.ne.appr{background-color: #49EEAA;} 
```

您在第二个 CSS 声明中缺少“#”。尝试将其添加到颜色中。如果这不起作用，那么您将在您的 css 文件中以某种方式覆盖它。

# java - 有人可以将其切换为 if 语句而不是 switch 吗？

> ID：12540976
> 
> 赞同：0
> 
> 时间：2012-09-22T05:24:43.377
> 
> 标签：java

当我尝试在旧的 java 机器上编译它时出现此错误。我需要切换到 if 语句？有人可以阐明这一点以切换到 if 语句吗？我收到这个错误

> 发现不兼容的类型
> ：需要 java.lang.String
> ：int

这是代码

```
 switch(name) {

 String label;

 Rotor(){;}

 Rotor(String name){
     switch(name){
         case "B":
             conversion_chart = B;
             break;
         case "C":
             conversion_chart = C;
             break;
         case "I":
             conversion_chart=I;
             notch = NOTCH[0];
             break;
         case "II":
             conversion_chart=II;
             notch = NOTCH[1];
             break;
         case "III":
             conversion_chart=III;
             notch = NOTCH[2];
             break;
         case "IV":
             conversion_chart=IV;
             notch = NOTCH[3];
             break;
         case "V":
             conversion_chart=V;
             notch = NOTCH[4];
             break;
         case "VI":
             conversion_chart=VI;
             notch = NOTCH[5];
             break;
         case "VII":
             notch = NOTCH[6];
             conversion_chart=VII;
             break;
         case "VIII":
             notch = NOTCH[7];
             conversion_chart=VIII;
             break;
        }
    label = name;
    position = 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T05:35:06.707

除非不幸的是使用 Java 7，否则不能在 switch 语句中使用字符串。

只需按照以下模式重写它：

```
Rotor(String name){
    if(name != null ) {
        if(name.equals("B")) {
            convert_chart = B;
        }
        else if(name.equals("C")) {
            convert_chart = C;
        }
        // other cases...
    }
    label = name;
    position = 0;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T06:14:59.603

我发现这些巨大的长 if/elseif on Strings 在实践中并不稳健。选项：

考虑使用枚举。

此外，考虑将所有字符串放入一个列表并使用 indexOf，然后您可以打开索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T05:38:20.400

我经常使用一个技巧，但这可能会引起很多争论。

`switch()`用替换表达式`name.hashCode()`。然后在每个`case`有一个字母的地方 - 用单引号替换双引号。在所有其他地方，您必须输入等于相应字符串的 hashCode() 的数值。

# ruby - Sinatra 应用程序找不到视图目录

> ID：12540977
> 
> 赞同：3
> 
> 时间：2012-09-22T05:24:54.637
> 
> 标签：ruby, views, sinatra

我正在尝试创建一个模块化的 sinatra 应用程序，并且需要我的每个子应用程序`views`在我的项目文件夹的根目录中查找目录。但它只在子目录本身而不是根目录中查找视图目录。这是我的项目的样子：

```
├── config.ru
├── music_catalog
│   └── app.rb
├── public
│   ├── css
│   │   └── site.css
│   └── images
│       ├── content_top_bg.jpg
│       ├── demo_image_01.jpg
│       ├── god_save_http_it_aint_no_human_being.png
│       ├── header_bg.jpg
│       ├── home-showcase.png
│       ├── hover_link_bg.jpg
│       ├── its_little_its_blue_and_its_magical.jpeg
│       ├── linkbar_bg.jpg
│       ├── logo.png
│       ├── main_graphics.jpg
│       ├── placeholder.gif
│       ├── placeholder.jpg
│       ├── placeholder.png
│       ├── right_navbar_bg.jpg
│       └── shadow_left.jpg
└── views
    ├── album.haml
    ├── genre.haml
    ├── index.haml
    ├── layout.haml
    ├── login.haml
    └── not_found.haml 
```

所以在我的 config.ru 我尝试这样做：

```
require 'sinatra'

require './music_catalog/app.rb'

set :root, File.dirname(__FILE__)

# enable :run

map "/" do
   run MusicCatalog
end 
```

在`app.rb`里面`music_catalog`我像这样使用根变量：

```
require 'sinatra/base'

`# I thing I am doing this wrong`

set :views, Proc.new { File.join(root, "sites/#{site}/views") }

class MusicCatalog < Sinatra::Base
   get "/" do
      haml :index
   end
end 
```

但是`index.haml`，它没有将我的根目录拉出，而是像这样出错：

```
Errno::ENOENT at /
No such file or directory - /Users/amiterandole/Dropbox/code/rsandbox/sinatra_music_store/music_catalog/views/index.haml 
```

我在用`ruby 1.9.3p194`

请帮我将视图目录设置到根`views`文件夹中的正确位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T05:35:33.680

好的，我想通了。set :views 语句实际上应该在我的应用程序类中，如下所示：

```
class MusicCatalog < Sinatra::Base

  **set :views, Proc.new { File.join(root, "../views") }**

  get "/" do
    haml :index
  end
end 
```

我之前也以错误的方式加入了根。解决了这个问题。现在 sinatra 正在正确加载我的模板

# iphone - 如何识别从 uiimagePicketController 获取的图像是屏幕截图还是相机图像？

> ID：12540978
> 
> 赞同：-1
> 
> 时间：2012-09-22T05:25:17.027
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)selectedImage editingInfo:(NSDictionary *)editInfo {
NSLog(@"done");

headingLabel.hidden= NO;
//[self playMovie];
[picker dismissViewControllerAnimated:YES completion:nil];
[self setupCroppingTool:selectedImage]; 
```

}

这是代码，所以我如何识别 selectedImage 是屏幕截图或相机图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T05:31:57.480

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)selectedImage editingInfo:(NSDictionary *)editInfo 
```

此方法`image`从**照片库**中挑选。您不能将 a`screenshot image`与 a进行比较，`normal image`因为两者都是`UIImage`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:50:01.600

查看图像元数据 - 日期、关键字、地理位置……并进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:53:00.337

可能有帮助..

我认为对`UIImagePickerController`你有帮助的源属性。

例子。

```
UIImagePickerController *abc = [[UIImagePickerController alloc] init];;
abc.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; 
```

您可以使用其中之一..

```
UIImagePickerControllerSourceTypePhotoLibrary
UIImagePickerControllerSourceTypeCamera
UIImagePickerControllerSourceTypeSavedPhotosAlbum 
```

# android - 使用 Mapview 理解 Android Allocation Tracker

> ID：12540984
> 
> 赞同：2
> 
> 时间：2012-09-22T05:25:56.200
> 
> 标签：android, memory-management, memory-leaks, android-mapview

我正在尝试优化我广泛使用 Mapview 的应用程序，即大量 ItemizedOverlay。在使用应用程序一段时间后尝试在分配跟踪器上查看应用程序时，我正在查看以下内容。

其他信息很少，

1.  应用程序正在扩展 MapActivity。应用程序具有固定方向。

2.  应用程序没有打开任何其他活动（没有来回活动）。

3.  地图在活动中正确显示。

4.  我看过多篇关于内存管理的帖子，也看过这个[Google IO 视频](http://www.youtube.com/watch?v=_CruQY55HOk)，但无法解决这个问题。

5.  应用程序正在 ICS 选项卡上运行。

![在此处输入图像描述](../Images/a5fbdd5310dfd3a4932d13e7de0a46d3.png)

我的问题是，

1.  请看Allocation in column和**android_map_conflict..**值，是否提示是MapView+key冲突的情况？在这种情况下应该如何解决？

2.  **android_map_conflict...**下的内存分配大小不断增加。任何解决方法或更高级别的建议？我知道它可能不需要，但是任何强大的 GC 都可以吗？在哪个地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T13:27:08.443

我不确定我是否完全理解分配跟踪器的输出，但我相信它只反映分配的内存，稍后可以由 GC 释放和恢复。因此，如果您没有内存泄漏（仍然引用的对象比需要的时间更长），分配的内存将被返回给空闲内存。

如果您遇到内存泄漏问题，它们也可能来自其他地方。我建议您按照您参考的视频所示安装 MAT。我已经这样做了，使用版本 Eclipse 插件，它就像一个魅力。我在几分钟内发现了泄漏（花了几个小时后，试图了解应该如何使用 MAT :-)）

祝你好运

# java - 控制反转，依赖注入和策略模式与java中的示例

> ID：12540986
> 
> 赞同：7
> 
> 时间：2012-09-22T05:26:16.540
> 
> 标签：java, spring, dependency-injection, inversion-of-control, strategy-pattern

我经常对这三个术语感到困惑。这三个和我很像。有人可以用例子清楚地向我解释。

我看过类似的帖子，完全不明白。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-22T06:36:00.673

**依赖注入**是指告诉一个类它的依赖关系是什么的模式，而不是要求类知道在哪里可以找到它的所有依赖关系。

所以，例如，你从这个开始：

```
public class UserFetcher {
   private final DbConnection conn = 
      new DbConnection("10.167.1.25", "username", "password");

   public List<User> getUsers() {
      return conn.fetch(...);
   }
} 
```

像这样：

```
public class UserFetcher {
   private final DbConnection conn;

   public UserFetcher(DbConnection conn) { 
      this.conn = conn;
   }

   public List<User> getUsers() {
      return conn.fetch(...);
   }
} 
```

这减少了代码中的耦合，如果您想进行单元测试，这尤其有用`UserFetcher`。现在，您可以将 a 传递给测试数据库，而不是`UserFetcher` *总是*针对在 找到的数据库运行。或者，在快速测试中更有用的是，您可以传入一个甚至不连接到数据库的实现或子类，它只是丢弃请求！`10.167.1.25``DbConnection``DbConnection`

然而，这种原始的依赖注入使得*连接*（为对象提供其依赖项）变得更加困难，因为您已经将使用全局变量（或本地实例化的对象）访问依赖项替换为通过整个对象图传递依赖项.

考虑一个情况，其中`UserFetcher`是 的依赖项`AccountManager`，这是 的依赖项`AdminConsole`。然后`AdminConsole`需要将`DbConnection`实例传递给`AccountManager`，并且`AccountManager`需要将其传递给`UserFetcher`...*即使既不需要`AdminConsole`也不`AccountManager`需要`DbConnection`直接使用！*

**控制**容器（Spring、Guice 等）的反转旨在通过自动连接（提供）依赖项来*简化依赖项注入。*要做到这一点，你告诉你的 IoC 容器如何提供一个对象（在 Spring 中，这称为*bean* *）*，并且每当另一个对象请求该依赖项时，它将由容器提供。

因此，如果我们使用构造函数注入，我们的最后一个示例在 Guice 中可能看起来像这样：

```
public class UserFetcher {
   private final DbConnection conn;

   @Inject //or @Autowired for Spring
   public UserFetcher(DbConnection conn) { 
      this.conn = conn;
   }

   public List<User> getUsers() {
      return conn.fetch(...);
   }
} 
```

我们必须配置 IoC 容器。在 Guice 中，这是通过实现`Module`; 在 Spring中，您通常通过 XML配置*应用程序上下文。*

```
public class MyGuiceModule extends AbstractModule {    
    @Override
    public void configure() {
       bind(DbConnection.class).toInstance(
           new DbConnection("localhost", "username", "password"));
    }
} 
```

现在当`UserFetcher`由 Guice 或 Spring 构建时，`DbConnection`会自动提供。

Guice 有一篇关于依赖注入背后的动机以及进一步使用 IoC 容器[的非常好的 Wiki 文章。](https://github.com/google/guice/wiki/Motivation)值得通读一遍。

**策略模式**只是依赖注入的一个特例，你注入的是*逻辑*而不是一个*对象*（即使在 Java 中，逻辑将被封装在一个对象中）。这是一种解耦独立业务逻辑的方式。

例如，您可能有这样的代码：

```
public Currency computeTotal(List<Product> products) {
   Currency beforeTax = computeBeforeTax(products);
   Currency afterTax = beforeTax.times(1.10);
} 
```

但是，如果您想将此代码扩展到具有不同销售税计划的新司法管辖区怎么办？您可以注入逻辑来计算税收，如下所示：

```
public interface TaxScheme {
    public Currency applyTax(Currency beforeTax);
}

public class TenPercentTax implements TaxScheme {
    public Currency applyTax(Currency beforeTax) {
        return beforeTax.times(1.10);
    }
} 

public Currency computeTotal(List<Product> products, TaxScheme taxScheme) {
    Currency beforeTax = computeBeforeTax(products);
    Currency afterTax = taxScheme.applyTax(beforeTax);
    return afterTax;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T08:05:00.020

控制反转意味着运行时框架将所有组件连接在一起（例如 Spring）。依赖注入是 IoC 的一种形式（我不知道是否存在另一种形式的 IoC）（参见：[http](http://en.wikipedia.org/wiki/Inversion_of_control) ://en.wikipedia.org/wiki/Inversion_of_control ）。

策略模式是一种设计模式（由 GoF 定义），其中算法可以被另一个算法替换（参见：[http](http://en.wikipedia.org/wiki/Strategy_pattern) ://en.wikipedia.org/wiki/Strategy_pattern ）。这是通过提供相同接口的多个实现来存档的。在使用像 Spring 这样的 IoC 时，如果您有多个接口实现，并且可以通过配置从一个实现切换到另一个实现，那么您正在使用策略模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:38:34.337

我也推荐阅读 Spring 文档的介绍章节，主要关注这个问题：[Introduction to Spring Framework](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/overview.html)
前几段应该做的。

这也链接到：[控制容器的反转和依赖注入模式](http://martinfowler.com/articles/injection.html)
这也提供了这些非常重要的核心概念的动机视图。

# asp.net-mvc-2 - Telerik MVC Combobox - 更改项目的背景

> ID：12540988
> 
> 赞同：1
> 
> 时间：2012-09-22T05:26:56.063
> 
> 标签：asp.net-mvc-2, combobox, telerik-mvc

我试图改变一个项目的亮点，它使用：

```
 var combobox = $('#ComboBox').data('tComboBox');
            combobox.highlight(2); 
```

问题是我只能突出显示项目！是否有另一种方法来更改背景或字体（粗体），以便用户可以记住他们选择了哪个项目。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:36:37.820

基本上，要将项目标记为选中，您只需向其添加“t-state-selected”类。因此，例如要选中下拉区域中的所有项目，您可以获得这样的引用并附加类：

```
$('#ComboID').data().tComboBox.dropDown.$items.addClass('t-state-selected'); 
```

# batch-file - 从文件批量添加 (+1) 重写

> ID：12540994
> 
> 赞同：0
> 
> 时间：2012-09-22T05:27:34.467
> 
> 标签：batch-file

我正在制作一个批处理游戏，它在一个名为“Score.txt”的单独文件中计算高分。在该文件中，它读取一个数字，但是当您赢得比赛时，我希望它被下一个最高数字覆盖。EG.. 0 是数字，我赢了比赛，现在显示为 1。

到目前为止，这是我的高分代码......

```
:Score
SetLocal EnableDelayedExpansion
set score=
for /F "delims=" %%i in (Score.txt) do set score=!score! %%i
set /a %score%=%score%+1 
echo %score% >score.txt
exit 
```

但是“Score.txt”只有在我赢了 ECHO 后才会读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T07:05:59.147

我认为这就是你想要做的：

```
:Score
SetLocal EnableDelayedExpansion
set score=
for /F "delims=" %%i in (Score.txt) do set score=%%i
set /a score=!score!+1 
echo !score! >score.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T18:35:19.350

詹姆斯 L. 的回答肯定解决了问题，但没有解释为什么原来的不起作用。

正如 James L. 在他的评论中指出的那样，`!score!`FOR 语句中不需要，尽管它没有造成任何伤害，因为它是未定义的。

此问题不需要延迟扩展。

原始代码失败的原因是`set /a %score%=%score%+1`. 该语句将创建一个以数字为名称的变量。它应该是`set /a score=%score%+1`, or `set /a score=score+1`, or `set /a score+=1`。

使用 FOR /F 有另一种选择

```
@echo off
set "score="
<"Score.txt" set /p "score="
set /a score+=1
>"Score.txt" echo %score% 
```

# php - 如何通过php找到两个地址之间的距离

> ID：12540995
> 
> 赞同：0
> 
> 时间：2012-09-22T05:27:39.020
> 
> 标签：php, distance

我正在寻找一些帮助来通过 php 找到两个地址之间的距离，因为我无法使用谷歌地图 api。所以从这篇文章中得到一个方法

[两个地址之间的距离](https://stackoverflow.com/questions/3172309/distance-between-two-addresses)

但我需要知道如何使用 URL 模式发送请求并获取休息以将它们保存在数据库中。

[http://maps.google.com/maps/api/directions/xml?origin=550+Madison+Avenue,+New+York,+NY,+United+States&destination=881+7th+Avenue,+New+York, +纽约,+美国+美国&传感器=假](http://maps.google.com/maps/api/directions/xml?origin=550+Madison+Avenue,+New+York,+NY,+United+States&destination=881+7th+Avenue,+New+York,+NY,+United+States&sensor=false)

感谢您的任何建议。

///////////////

在这些答案之后，我在那里

```
 $customer_address_url =  urlencode($customer_address);
     $merchant_address_url =  urlencode($merchant_address);

     $map_url = "http://maps.google.com/maps/api/directions/xml?origin=".$merchant_address_url."&destination=".$customer_address_url."&sensor=false";

      $response_xml_data = file_get_contents($map_url);
      $data = simplexml_load_string($response_xml_data); 
```

当我输入此网址时，XML 响应可见：[http ://maps.google.com/maps/api/directions/xml?origin=Quentin+Road+Brooklyn%2C+New+York%2C+11234+United+States&destination= 550+麦迪逊+大道+New+York%2C+New+York%2C+10001+United+States&sensor=false](http://maps.google.com/maps/api/directions/xml?origin=Quentin+Road+Brooklyn%2C+New+York%2C+11234+United+States&destination=550+Madison+Avenue+New+York%2C+New+York%2C+10001+United+States&sensor=false)

但无法打印通过

```
 echo "<pre>"; print_r($data); exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:36:36.750

你可以试试这个。。

```
$url = "http://maps.google.com/maps/api/directions/xml?origin=550+Madison+Avenue,+New+York,+NY,+United+States&destination=881+7th+Avenue,+New+York,+NY,+United+States&sensor=false";
$data = file_get_contents($url); 
```

现在`$data`包含生成的 xml 数据。您可以使用..解析此 xml 数据

[http://php.net/manual/simplexml.examples.php](http://php.net/manual/simplexml.examples.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:36:53.120

使用半[正弦](http://en.wikipedia.org/wiki/Haversine_formula)公式

还要检查[https://developers.google.com/maps/documentation/distancematrix/](https://developers.google.com/maps/documentation/distancematrix/)