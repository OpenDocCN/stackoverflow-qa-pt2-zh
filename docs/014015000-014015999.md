# StackOverflow 问答 14015000-14015999

# c - FFT 和卷积

> ID：14015001
> 
> 赞同：1
> 
> 时间：2012-12-23T21:53:40.470
> 
> 标签：c, image-processing, cuda, fft

我使用图像过滤为学校 2dFFT 写作。我对过滤矩阵有疑问。我做了我的 fft，所以它接受 2^n 输入，并且所有过滤器矩阵都是奇数。

所以我需要解决方案以某种方式将过滤器矩阵转换为我的函数可接受的输入。

我有下一个想法，但我不确定它会如何工作。如果我有过滤矩阵：

```
1 2 3
4 5 6
7 8 9 
```

将其转换为：

```
0 0 0 0
1 2 3 0
4 5 6 0
7 8 9 0 
```

当我将矩阵的“中心”与我的像素匹配时，匹配“子矩阵”的中心，然后提取我需要的值。那可能吗？

还有谁能告诉我我能得到的过滤器的最大尺寸是多少？它比我们说的 32x32 大吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:13:52.900

过滤器掩码用于表示具有紧凑支持的过滤器。紧凑支持意味着信号仅在有限范围内具有非零值。通过使用零值扩展您的过滤器掩码，您实际上是在做一件很自然的事情。零点是原始过滤器的一部分。

然而，真正的问题是另一回事。我假设您根据[卷积定理](http://en.wikipedia.org/wiki/Convolution#Convolution_theorem)使用 FFT 。为此，您需要逐元素乘法。当您的滤波器和信号具有相同数量的元素时，您只能进行元素乘法。因此，您需要将滤波器扩展到信号大小（使用零）。

过滤器掩码大小没有限制。对于卷积，唯一的限制是紧凑的支持（如上所述）。

# html - 带有鼠标悬停的 HTML5 复杂形状

> ID：14015003
> 
> 赞同：0
> 
> 时间：2012-12-23T21:53:55.007
> 
> 标签：html, svg, maps, mouseover, shapes

有谁知道谷歌是如何在 Youtube 的分析部分创建地图数据的？

鼠标悬停在正确的位置，即当您的鼠标离开美国进入加拿大时，加拿大是焦点。我对 HTML 的了解告诉我，浏览器只能识别方形，如果你想制作一个非常复杂的形状，你必须编写很多代码。

例如，主页图标中的左斜面不会拾取鼠标事件 p.walkleftstudios.com/am2.1 使用 HTML5 画布和一点三角函数完成。

例如，在这个例子中，我完全忽略了它（画布太烦人了）p.walkleftstudios.com/am2.2

我在代码中看到了一个 SVG 标签，这可能就是魔法发生的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:49:56.940

大多数 Google 产品都使用 GViz 进行数据可视化。如果你想根据数据输入来绘制地图图表，有它的API。

[https://developers.google.com/chart/interactive/docs/reference](https://developers.google.com/chart/interactive/docs/reference)

对于旧版 IE 浏览器，GViz 输出为 SVG 或 VML，因此您的图表可以在任何地方工作 - 旧版、新版、桌面和移动浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T22:08:03.950

我相信您正在寻找的是**[图像地图](https://developer.mozilla.org/en-US/docs/HTML/Element/map)**。

# javascript - 如何创建 CSS/JavaScript 圆形网格

> ID：14015006
> 
> 赞同：10
> 
> 时间：2012-12-23T21:54:31.270
> 
> 标签：javascript, css

我需要做这样的事情： ![在此处输入图像描述](../Images/d4b7e076c71ea4b0ea16844ceed10bd4.png)

这可能看起来很简单，但有一些要求： - 包含 div 的宽度应该取决于文本长度（在 CSS 中是否可能？） - 所有圆圈都应该随机定位 - 这是最困难的部分我。

当我`border-radius`用于创建圆圈（设置高度、宽度和`border-radius`50%）时，我尝试在 JavaScript 中创建某种网格，在其中迭代每个元素并获取其尺寸。然后我得到前一个元素的位置（如果有的话）并将它们添加到当前元素尺寸。此外，添加一些边距将有助于避免冲突。这是正确的方法吗？

我只是在寻找如何解决我的两个问题的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:29:54.320

## 根据内容大小缩放的圆圈。

*   这是您需要首先解决的问题，因为您无法在不知道它们的尺寸的情况下将它们放置在任何地方。

*   自然地，DIV 的大小首先按宽度扩展，然后按高度扩展。也就是说，必须首先利用容器的最大宽度，然后再进行高度约束。因此，如果不使用相对平均，制作具有相等半径的圆形刻度可能会非常困难。

*   相对平均是根据限制您的内容的 contianer 的现有区域找到您的高度/宽度的平均尺寸。例如：

* * *

可以使用 javascript 检测限制内容的 DIV 的宽度和高度。假设您发现这些属性也分别为 200px x 20px。

你的总面积是宽*高，所以 4000px；但是我们正在尝试实现一个正方形，这样我们就可以应用圆角并形成一个圆角。我们希望找到与相同面积相等的矩形的尺寸，然后应用这些新尺寸。

要获得具有相等宽度 * 高度的相同区域，您可以执行以下操作：

√ 4000 = 63.2455532 因此：63.2455532 x 63.2455532 = 4000

## 随机放置 DIV，避免 DIV 之间发生冲突。

*   找到尺寸后，您将能够在 (X,Y) 坐标上使用 rand 进行放置。将这些坐标和半径推送到数组上。使用递归也将剩余的圆圈放在碰撞失败上。碰撞失败将来自一个元素，该元素具有重叠的 (X,Y)+radius relative 在数组中被成功推送的元素。

# iphone - UIViewController 第一次没有释放内存

> ID：14015007
> 
> 赞同：1
> 
> 时间：2012-12-23T21:54:32.947
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

发生了最奇怪的事情......我有一个非常复杂的 UIViewController 子类，我正在通过一个 NIB 文件加载它。我只需执行以下操作即可推动视图：

```
SecondViewController2 *secV = [[SecondViewController2 alloc]    initWithNibName:@"SecondViewController2" bundle:nil];
        self.secondViewController2 = secV;
[secV release];
[self.navigationController pushViewController:secondViewController2 animated:YES];
[secondViewController2 release];
secondViewController2 = nil; 
```

如您所见，我发布了 secondViewController2。

问题是，当我第一次执行它时，在 secondViewController2 中调用了尽管 dealloc 方法，我仍然在仪器中观察到额外的 2MB 似乎没有被释放。没有任何泄漏，我已经检查过了。

当我第二次、第三次、第四次等执行以下操作时，将调用 dealloc 并且我没有观察到内存中的任何添加。仅此一点就使我确信我没有在我的代码中执行错误，因为相同的代码正在第一次、第二次第三次运行，但只有第一次没有释放大约 2MB。正如我所说，secondViewController2 的 dealloc 仍在运行！！！

任何想法？它是Apple机制中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:27:13.133

首先，如果不分析您的完整实现，就不可能彻底回答您的问题。但是，一般来说，如果我正确理解您的问题，我会说您所描述的情况是正确的。

你应该认为有些行为肯定会对内存占用产生永久影响。

例如，如果您通过 [UIImage imageNamed]` 将一些图像加载到内存中，那么您的图像也会进入图像缓存，当加载图像的类被释放时，该缓存不会被清空。另一个很好的例子是单例：单例类在第一次实例化时会占用一些内存，并且通常永远不会释放它（在程序结束之前 - 当我说单例时，还要读取任何类型的静态全局变量）。

这些只是两个例子，但可能还有更多这样的例子。它可以在您自己的代码中完成，但也可以通过您的控制器使用的某些框架来完成。如果您的控制器是您在应用程序中实例化的第一个使用某种功能的控制器，则这种效果更有可能发生。但基本上，我会说，它不能事先知道，但只有在通过 Instruments 检查您的程序行为之后才能知道。

对您来说真正有价值的信息是，在控制器类的连续实例化/释放时，内存占用不会增加。一般来说，这是两个方面的标志：

1.  你的班级没有内存泄漏；

2.  你的课没有[放弃记忆](http://developer.apple.com/library/ios/#recipes/instruments_help-memory-allocations-help/Finding_Abandoned_Memory/07_Finding_Abandoned_Memory.html)。

1+2 意味着程序的整体内存消耗（就您的控制器而言）是平坦的。（尽管您在首次使用时需要支付费用）。

因此，在我看来，您的问题至多是控制器对内存使用的“优化”之一。正如我所说，你应该确切地知道你的控制器做了什么来知道这些 2MB 是来自某个缓存还是其他任何东西（在某些情况下它也可能不在你的控制之下）。

希望能帮助到你。

# joomla - Joomla 菜单子类别仅显示 4 项

> ID：14015008
> 
> 赞同：1
> 
> 时间：2012-12-23T21:54:40.887
> 
> 标签：joomla, joomla2.5

我能够在 Joomla 的菜单视图中显示子类别中的项目（最后 - 这不是一件容易的事。）

但现在它只显示每个子类别的前 4 个。

从技术上讲，它们都是次要的 - 它应该显示所有这些，因为我将子类别的最大次要设置为 100。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:55:44.970

如果我理解你下面的问题应该对你有用。

它位于编辑菜单项面板中的博客布局选项下。我想我把它与类别选项下的类似选项“子类别级别”混淆了，其中提示说“要显示的子类别级别的数量”。

[阅读更多](http://www.inmotionhosting.com/support/edu/joomla-25/menus/list-all-categories-options)

# wordpress - 条件标签wordpress导航的代码不起作用

> ID：14015010
> 
> 赞同：0
> 
> 时间：2012-12-23T21:54:58.113
> 
> 标签：wordpress

```
if (is_page_template( 'page_blog.php' ) ) {

    remove_action( 'genesis_after_header', 'genesis_do_nav' );
    add_action( 'genesis_before_content', 'genesis_do_nav' );

} 
```

我只想在博客页面档案中显示导航

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:06:15.183

你把代码放在哪里？它需要在包含标题之前。

你也可以放类似的东西

```
?><script>alert ("is page_blog.php");</script><?php 
```

在花括号之间，以确保它完全被触发。

# java - 如何列出实现给定接口集的类路径上的所有类

> ID：14015013
> 
> 赞同：5
> 
> 时间：2012-12-23T21:55:20.750
> 
> 标签：java, spring, ide

大多数 IDE 允许您轻松地为单个接口执行此操作，但我正在寻找同时实现两个接口的类。是否有自动执行此操作（无需手动打开每个实施者并检查）？

如果没有IDE支持，Spring是否有这样的功能。（我知道我可以获得实现特定接口的 bean 列表，但我不确定是否可以为所有类做到这一点。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:03:10.570

从 System.properties 你会得到类路径。

TRY 使用 TRY，像拉链一样打开它。（Inflater 或 Deflater 流）您将参加课程

使用类加载器加载类

使用 xInterface 实例 && yInterface 实例

如果有帮助，请点赞:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:19:06.467

可能[org.reflections](http://code.google.com/p/reflections/)有你需要的东西——除非我仍然误解你的要求。

# sql-server - ADO.net 到 Lightswitch 问题

> ID：14015015
> 
> 赞同：0
> 
> 时间：2012-12-23T21:55:44.393
> 
> 标签：sql-server, ado.net, visual-studio-lightswitch, ado.net-entity-data-model

我已经通过 ADO.net 实体数据模型部署了我的数据库，方法是针对我的预制在线数据库执行其图表输出查询。

我的数据库**仅**包含Lightswitch 支持的关系、一对多、ZeroOne-Many 和 One-ZeroOne。

最后，将我的数据库作为外部数据库附加到我的 Lightswitch 应用程序中，结果令我震惊。

**Lightswitch 将所有 One-ZeroOne 关系转换为 One-Many 关系！**

我怀疑一切，重试数十次试图解决这个奇怪的问题，但没有好消息！

**问题：**

为什么 Lightswitch 将所有 One-ZeroOne 关系转换为 One-Many 关系？不一致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:15:50.167

除非这是一个错误，否则它将取决于您的 PK/FK 的可空性。对于任何不可为空的键属性，LightSwitch 不允许使用 0-1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:19:57.100

最后，我通过类似蛮力的试验解决了它：S

* * *

**解决方案：（**请*不要问我为什么的问题，因为 IDK 将是我的答案*）

添加一对零关系后，您可能会将一两个导航属性添加到关联的表中，但是

1.  您**必须**将外键作为**标量属性**添加到具有**相同类型和****可空属性****的 ZeroOne 表**中。**`true`**

2.  您**必须**通过双击关联线本身来调整关联的**Residential Constrain ，****并使`FK`ZeroOne 表中的 依赖于 One 表`Key`**。

3.  生成数据库脚本，执行它，然后**不要更新 LightSwitch 数据源、`Delete`数据源和`Attach`它，**因为它不会正确更新关系！

# java - 从静态方法调用非静态方法

> ID：14015023
> 
> 赞同：1
> 
> 时间：2012-12-23T21:57:03.303
> 
> 标签：java

谁能解释一下为什么静态方法调用非静态方法是非法的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-23T21:58:04.027

非静态方法是作用于特定*实例（对象）的**实例*方法，并且可以访问该对象的成员。静态方法与特定实例无关。

 *如果您提供实例，则调用非静态方法是合法的：

```
class Foo
{
    public static void f()
    {
        instanceMethod(); // Not OK - no instance provided.
        this.instanceMethod(); // Not OK -  no "this" in static methods.
        new Foo().instanceMethod();  // OK because you provide an instance
    }

    public void instanceMethod() {}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T21:57:55.257

因为调用静态方法不需要类的对象，在哪里调用你需要的非静态方法，

静态方法与非静态方法与状态（对象）相关联的类相关联

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T22:03:43.867

非静态方法是在实例的上下文中执行的方法。如果没有实例，调用一个实例是没有意义的，因此编译器会阻止您这样做——即它是非法的。

如果一个方法不访问任何实例字段（也就是实例变量），那么它可能应该被更改为一个静态方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T22:06:12.640

非静态方法具有静态方法没有的隐式参数`this`（因为没有`this`）单独因为这个事实，不可能从静态方法调用非静态方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T22:09:47.117

静态方法属于类。非静态方法属于一个实例。

非静态方法需要在`this`其上执行实例 ()。静态方法不需要任何实例，因为类本身就是它所属的实例。

如果我有 100 个对象实例，则每个 nonStatic() 方法调用都会影响不同对象的状态。因此，每个非静态方法都是“不同的”，因为它作用于不同的实体。同时，即使我有 100 个对象实例，调用 staticMethod() 也不会影响任何这些实例，因为它只会影响类的静态成员。

每个静态方法或静态成员变量都有 1 个类和 1 个实例。

对于非静态成员，我们将每个方法都关联到类实例。

因此，如果您能够从静态方法调用非静态方法，那么 100 个实例中的哪一个会受到影响？你看：这没有意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T01:45:07.700

静态方法与类相连。常规方法连接到对象。

在静态方法中，没有可以在其上运行非静态方法的对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-13T19:25:23.943

从静态方法调用非静态方法并不违法。每当您调用静态方法时，都不需要类的实例，而在非静态情况下则需要。*

# javascript - 淘汰赛 - 绑定从模型计算的

> ID：14015029
> 
> 赞同：3
> 
> 时间：2012-12-23T21:57:54.717
> 
> 标签：javascript, knockout.js

我正在尝试使用计算出的 observable 来创建自定义 div ID（例如 branch3）。但是，每当我尝试绑定计算时，我都会收到“无法解析绑定”错误。我确信我可以用不同的方式来做这件事，但我只是不明白为什么我不能在这里使用计算。我很确定我已经看到它完成了。

这是我一直在研究的 jsfiddle。

[小提琴](http://jsfiddle.net/ricka/hawMW/1/)

```
var branchList   =[{"Id":1,"Latitude":40.2444400000,"Longitude":-111.6608300000,"StreetAddress":"1525 W 820 N","BranchName":"GPS","City":"Cityplacwe","State":"UT","Zip":"84601"},{"Id":2,"Latitude":40.2455550000,"Longitude":-111.6616100000,"StreetAddress":"123 N Center","BranchName":"GPS Branch 2","City":"Lehi","State":"UT","Zip":"84043"}];

//myMarkers = new Array();

var Branch = function (data) {
  var self = this;
  self.Id = ko.observable(data.Id);
  self.Latitude = ko.observable(data.Latitude);
  self.Longitude = ko.observable(data.Id);
  self.BranchName = ko.observable(data.BranchName);
  self.StreetAddress = ko.observable(data.StreetAddress);
  self.City = ko.observable(data.City);
  self.State = ko.observable(data.State);
  self.Zip = ko.observable(data.Zip);
  this.DivId = ko.computed(function () {
    return self.Id();
  });
  //self.DivId = ko.computed({
  //  //Reading from object to field
  //  read: function () {
  //    return "branch" + self.Id();
  //  },
  //  //writing from field to object
  //  write: function (value) {

  //  }
//});

}

var BranchViewModel = function () {
  var self = this;

  //create knockout array
  self.branchArrayKO = ko.observableArray(branchList);
} 
```

和 HTML

```
<div data-bind="foreach: branchArrayKO">

<div data-bind="attr: {'id': DivId}">
  <p></p>
  <h2></h2>
  <ul>
    <li data-bind="text: Id"></li>
    <li data-bind="text: BranchName"></li>
    <li data-bind="text: StreetAddress"></li>
  </ul>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:04:43.290

您需要将原始 JavaScript 数组转换为`Branch`es 数组。一种方法是使用`ko.utils.arrayMap`迭代列表中的每个项目并创建一个新的`Branch`：

```
var BranchViewModel = function() {
    var self = this;

    //create knockout array
    self.branchArrayKO = ko.observableArray(ko.utils.arrayMap(branchList, function(branch) {
        return new Branch(branch);
    }));
} 
```

**更新示例：http:** [//jsfiddle.net/hawMW/2/](http://jsfiddle.net/hawMW/2/)

另一个可能有用的替代方法是[敲除映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)，您可以使用它来自动化全部或部分映射过程。

# html - CSS 气泡在 Firefox 中不起作用

> ID：14015033
> 
> 赞同：0
> 
> 时间：2012-12-23T21:58:47.887
> 
> 标签：html, css, cross-browser

我有一些 CSS：

```
.bubbledLeft,
.bubbledRight{
    position: relative;
    margin-top: 3px;
    max-width: 99%;
    clear: both;
        min-width: 99%;
}

.bubbledLeft{
    float: left;
    margin-right: auto;
    padding: 14px 10px 4px 15px; /*position within the border*/
}

.bubbledLeft:before{
    z-index: -1;
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    left: 0px;
    content: "";

    border-width: 8px 10px 8px 17px; 
    border-image: url("/assets/chat/speech_bubble_left_2.png") 8 10 8 17 stretch stretch;
    -webkit-border-image: url("/assets/chat/speech_bubble_left_2.png") 8 10 8 17 stretch stretch;
    -moz-border-image: url("/assets/chat/speech_bubble_left_2.png") 8 10 8 17 stretch stretch;
    -o-border-image: url("/assets/chat/speech_bubble_left_2.png") 8 10 8 17 stretch stretch;
}

.bubbledRight{
    float: right;
    margin-left: auto;
    text-align: right;
    text-align: left;
    padding: 4px 15px 4px 15px; /*position within the border*/  
}

.bubbledRight:before{
    z-index: -1;
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    left: 0px;
    content: "";

    border-width: 8px 17px 8px 10px; 
    border-image: url("/assets/chat/speech_bubble_right_2.png") 8 17 8 10 stretch stretch ;
    -webkit-border-image: url("/assets/chat/speech_bubble_right_2.png") 8 17 8 10 stretch stretch ;
    -moz-border-image: url("/assets/chat/speech_bubble_right_2.png") 8 17 8 10 stretch stretch ;
    -o-border-image: url("/assets/chat/speech_bubble_right_2.png") 8 17 8 10 stretch stretch ;
} 
```

HTML：

```
<div class="content">
    <textarea id="messageText" rows="3" style="width: 80%; resize: none;  height: 40px; border: 0px; position: fixed; top: 0px; left: 0px; z-index: 999;" >Napisz wiadomość...</textarea>
    <button id="sendMsgBtn-ajax" class="sendMsgBtn">Wyślij</button>
    <div class="commentArea" id="commentArea">
        <% @msgs.each do |m| %>
            <% if (current_user.blank? == false && m.user.blank? == false && m.user.email == current_user.email) %>
                <div class="bubbledRight">
                    <%= m.body %>
                    <br />
                    <div class="date-right"><%= m.created_at.to_time.strftime("%Y-%m-%d %H:%M") %></div>
                    <div class="nick-right"> ~<%= m.user.blank? == false ? m.user.email : "gość"  %></div>
                </div>
                <br />
            <% else %>
                <div class="bubbledLeft">
                    <%= m.body %>
                    <br />
                    <div class="date"><%= m.created_at.to_time.strftime("%Y-%m-%d %H:%M") %></div>
                    <div class="nick"> ~<%= m.user.blank? == false ? m.user.email : "gość" %></div>
                </div>
                <br />
            <% end %>
        <% end %>
    </div>
</div> 
```

它可以在 Chrome、Opera 和 Safari 上完美运行，但不能在 Firefox 上运行。为什么 ？

截图（左 chrome 右 firefox）：[http ://ge.tt/7dGLW7U?c](http://ge.tt/7dGLW7U?c)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:41:57.630

Firefox 似乎不喜欢`border-width`没有其他边框属性。尝试在您的行之前添加此`border-width`行：

```
border:solid transparent; 
```

更新：

最新的[CSS3 规范](http://dev.w3.org/csswg/css3-background/#the-border-image-slice)说边框图像不应该显示在框的中间，所以 Firefox 的实现是正确的。要在整个框中显示边框图像，请添加该属性的`fill`值`border-image-slice`，或使用简写`fill`中的关键字。`border-image`以下 CSS 应该适合您：

```
-webkit-border-image: url("speech_bubble_left_2.png") 8 10 8 17 fill stretch;
-moz-border-image: url("speech_bubble_left_2.png") 8 10 8 17 fill stretch;
-o-border-image: url("speech_bubble_left_2.png") 8 10 8 17 stretch;
border-image: url("speech_bubble_left_2.png") 8 10 8 17 fill stretch; 
```

请注意，Opera 尚不支持`fill`，但如果您单独使用它，它将起作用`stretch`。此外，对于支持它的浏览器，最好将非前缀属性放在最后，因为这是解析 CSS 规则的顺序。

# asp.net - 检查数据库中是否存在值

> ID：14015037
> 
> 赞同：1
> 
> 时间：2012-12-23T21:59:30.093
> 
> 标签：asp.net, stored-procedures

我正在尝试检查数据库中是否存在值并尝试将其“输出”到 var。并且不能让它变成1...

这是我要检查的代码。

```
 if(!sqlUtil.Check_Person_Exists(txt_FirstName.Text.Trim(),txt_Surname.Text.Trim()))
                        {
                            // Insert
                            // ======
                            sqlUtil.Insert_person(obj);

                            // Redirect
                            // ========
                            Response.Redirect("Default.aspx");

                        }
                        else
                        {
                            txt_FirstName.BackColor = Color.FromName(ConfigurationManager.AppSettings["ErrorColour"]);
                            txt_Surname.BackColor = Color.FromName(ConfigurationManager.AppSettings["ErrorColour"]);
                            lbl_message.Text = " * '" + txt_FirstName.Text + " " + txt_Surname.Text +
                                               "' already Exists!";
                        } 
```

这是检查方法。

```
 public Boolean Check_Person_Exists(String Fname, String Lname)
    {
        // Init()
        // ======
        SqlConnection conn = null;
        SqlDataReader rdr = null;
        SqlCommand cmd = null;
        var iPerson = 0;
        var bPerson = false;

        try
        {
            //  Config
            //  -------
            conn = new SqlConnection(ConfigurationManager.ConnectionStrings["conn"].ConnectionString);
            conn.Open();
            cmd = new SqlCommand("[sp_Check_Person_Exists]", conn);
            cmd.CommandType = CommandType.StoredProcedure;

            //  Param(s)?
            //  ---------
            cmd.Parameters.Add("@s_FirstName", SqlDbType.NVarChar, 50).Value = Fname;
            cmd.Parameters.Add("@s_Surname", SqlDbType.NVarChar, 50).Value = Lname;

            //  Execute
            //  -------
            rdr = cmd.ExecuteReader();

            //  Row(s)?
            //  -------
            if (rdr.HasRows)
            {
                //  Read
                //  ----
                while (rdr.Read())
                {
                    //  Something there?
                    //  ----------------
                    if (rdr["FirstName"].ToString() !=string.Empty)
                    {
                        //  Valid?
                        //  ------
                        Int32.TryParse(rdr["FirstName"].ToString(), out iPerson);
                        if(iPerson > 0)
                        {
                            //  Exists
                            //  ------
                            bPerson = true;
                        }
                    }
                }

            }
            //  Clean up / close down
            //  ---------------------
            cmd.Dispose();
            rdr.Dispose();
            rdr.Close();
            conn.Dispose();
            conn.Close();
        }
        catch (SqlException ex)
        {

            throw ex;
        }
        finally
        {
            //  Clean up / close down
            //  ---------------------
            if (cmd != null)
            {
                cmd.Dispose();
            }
            if ((rdr != null) && (!rdr.IsClosed))
            {
                rdr.Close();
            }
            if ((conn != null) && (conn.State != ConnectionState.Closed))
            {
                conn.Dispose();
                conn.Close();
            }
        }
        // Return
        // ======
        return bPerson;
    }
} 
```

在 // 有效吗？检查我正在尝试使用 iPerson，这就是它失败并且不会填充 iPerson 的地方。

这是我的存储过程。

```
ALTER PROCEDURE [dbo].[sp_Check_Person_Exists]
    @s_FirstName nvarchar(50),
    @s_Surname nvarchar(50) 
AS
BEGIN
SELECT        FirstName, Surname
FROM            tbl_person
WHERE        (FirstName = @s_FirstName) AND (Surname = @s_Surname)
END 
```

我正在分配我的变量，所有这些都可以正常工作，但不会填充 iPerson ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:06:32.307

您正在尝试将人的名字解析为 Int32？您必须查询 ID 并将其解析到 iPerson 中。

# c# - 我需要在 SQL 查询中转义的字符是什么

> ID：14015045
> 
> 赞同：3
> 
> 时间：2012-12-23T22:01:01.010
> 
> 标签：c#, sql, sql-server-2008, escaping

插入字符串时需要检查和转义哪些字符？

```
INSERT INTO gamedata (gamename, url, dlink) 
VALUES ('mady's run', 'http://www.sdfa.com', 'http://extabit.com/sdf')</code> 
```

如何转义这些字符？
我正在使用 C# 并使用 SQL Server Management Studio 2008 管理数据库。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-23T22:03:35.193

不要逃避他们。根本不要在 SQL 中包含这些值。相反，使用*参数化 SQL*并直接为参数提供值。没有转义、没有引用、没有转换——也没有 SQL 注入攻击的风险。

有关示例，请参阅[文档。`SqlCommand.Parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

您应该将此应用于*所有*值 - 而不仅仅是您预期具有“特殊”字符的值。它将代码 (SQL) 与数据 (值) 分离，避免 SQL 注入攻击，还避免不必要的转换（如果您不小心，这确实会导致日期/时间值和数字出现问题）。

# wordpress - 仅显示内容发表评论者

> ID：14015046
> 
> 赞同：0
> 
> 时间：2012-12-23T22:01:01.587
> 
> 标签：wordpress, comments

我们可以在 wordpress 单页中隐藏我们的全部内容吗？

一般; 我想为所有用户提供一些文本，而不是我的 single.php 上的完整帖子

> 如果您阅读全文请写下您的意见:)

如果用户评论了一个帖子，我想向评论者显示完整的帖子，这可能吗？

任何帮助谢谢

简单的 Single.php

```
<?php get_header();?>

<?php the_post(); ?>
<?php the_title(); ?>
<?php the_content(); ?>
<?php comments_template(); ?>

<?php get_footer();?> 
```

# ajax - 动作事件仅在第二次点击 commandLink/commandButton 时触发

> ID：14015048
> 
> 赞同：1
> 
> 时间：2012-12-23T22:01:35.330
> 
> 标签：ajax, jsf-2, primefaces

在 Windows 7.0 上运行带有最新 JRE/JDK 和 Glassfish 3.1 的 Netbeans 7.1.1。

尽管我构建了什么样的应用程序，但出于某种原因，我必须单击任何`commandLink`或`commandButton`两次才能触发事件。

这是如何引起的，我该如何解决？

这是发生此问题的此类视图的示例：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>Time Manager - New Employee</title>
    </h:head>
    <h:body>
        <h:form id="form"">
            <p:panel id="panel" header="New Employee">  
                <p:messages id="msgs"/>  
                <h:panelGrid columns="3">  
                    <h:outputLabel for="fname" value="Firstname: *" />  
                    <p:inputText id="fname" value="#{employee.name}" 
                                 required="true" label="FullName">  
                        <f:validateLength minimum="2" maximum="20" />  
                    </p:inputText>  
                    <p:message for="fname" display="icon"/>  

                    <h:outputLabel for="eml" value="Email: *" />  
                    <p:inputText id="eml" value="#{employee.email}" 
                                 label="Email" required="true">  
                        <f:validateLength minimum="9" maximum="100" />  
                        <p:ajax update="msgEml" event="keyup" />  
                    </p:inputText>  
                    <p:message for="eml" id="msgEml" display="icon"/>  
                </h:panelGrid>  

                <p:button id="btn" value="Cancel" update="panel" 
                          type="button" outcome="/index"/>  

                <p:commandButton id="addEmp" value="Save" update="panel"
                                 actionListener="#{employee.saveEmployee}" 
                                 styleClass="ui-priority-primary"/>
            </p:panel>  
        </h:form>  
    </h:body>
</html> 
```

# database - EntityFramework 单元测试示例

> ID：14015051
> 
> 赞同：4
> 
> 时间：2012-12-23T22:02:12.830
> 
> 标签：database, entity-framework, azure, nunit

我刚刚解决了我自己的问题，但认为我可能仍然对其他人阅读有所帮助，所以决定还是发布它。

* * *

我正在尝试开始使用 azure 开发，目前正处于启动和运行数据库的阶段。经过几次打嗝后，我实现了以下目标：

*   安装了 VS2012、MSSQLSERVER2012、Azure SDK .NET、EntityFramework 6.0.0 alpha 和一堆其他东西
*   编写了我的第一个实体（代码优先）并从中生成了一个数据库。

在我接受下一个挑战之前，我希望看到的最后一件事是首先向我新创建的数据库添加一些内容。我认为最简单的方法是在 nunit 中编写测试。

这是我到目前为止得到的...

实体类**User**：

```
namespace Models.Users
{
    public class User
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string EmailAddress { get; set; }
    }
} 
```

实体类**UsersDb**：

```
using System.Data.Entity;

namespace Models.Users
{
    public class UsersDb : DbContext
    {
         public DbSet<User> Users { get; set; }
    }
} 
```

使用以下 PS 命令生成数据库：

```
enable-migrations -ProjectName Models -ContextTypeName Models.Users.UsersDb
add-migration -ProjectName Models Initial
update-database -ProjectName Models 
```

最后，我编写了以下单元测试

```
using Models.Users;
using NUnit.Framework;

namespace Tests
{
    [TestFixture]
    public class DatabaseTests
    {
        [Test]
        public void AddUserTest()
        {
            var users = new UsersDb();
            var user = new User
                {
                    Id = 1, 
                    Name = "test", 
                    EmailAddress = "test@gmail.com"
                };

            users.Users.Add(user);
            users.SaveChanges();
        }
    }
} 
```

该测试运行，但引发了我无法弄清楚的异常。

System.InvalidOperationException：“System.Data.SqlClient”ADO.NET 的实体框架提供程序类型“System.Data.Entity.SqlServer.SqlProviderServices，EntityFramework.SqlServer，Version=6.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”无法加载提供程序。确保提供程序程序集可用于正在运行的应用程序。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=260882](http://go.microsoft.com/fwlink/?LinkId=260882)。

**解决方案**

我必须做的是打开 NuGet 管理（右键单击解决方案）并按下 EntityFramework 上的管理按钮。在对话框中，在您的测试解决方案前面添加一个复选框，重新构建并继续。

现在，我有一个非常小的解决方案，它通过单元测试创​​建一个新用户并将其保存到我的数据库中。一个不错的启动项目，我现在可以开始扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:03:11.847

在键入问题本身时解决了问题。认为我仍然可以作为其他人的参考。

# java - 实例化通用对象

> ID：14015054
> 
> 赞同：0
> 
> 时间：2012-12-23T22:02:59.107
> 
> 标签：java, generics, polymorphism

我有一个接受 Button2 子类型的方法。此方法进行一些计算并创建按钮以放置在 ArrayList 中，以便它们以图形方式排列。这是我的代码：

```
public void createButtonArray(ArrayList<? extends Button2> buttonList,
        int xLength, int yLength, int width, int height, int inset) {

    // The total size for the inset, or spaces between buttons
    int totalInset = (xLength - 1) * inset;
    // The total height = height of buttons + size of insets
    int totalHeight = totalInset + 5 * height;
    // ... More calculations 
```

它涉及到这一点。我不知道如何说下一行，因为编译器给了我语法错误。如何创建一个属于 Button2 子类型的按钮？

```
Button2<?> button = new Button2(xpos, ypos, width, height);
buttonList.add(button);
counter++; 
```

我也试过这个：

```
buttonList.add(new <? extends Button2>(xpos,ypos,width,height)); 
```

这也给了我一个错误。如何创建此按钮以添加到我的通用 ArrayList？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:43:03.137

您不能将任何对象（null 除外）添加到`ArrayList<? extends Button2>`中，但您可以只传递`ArrayList<Button2>`给您的函数，然后执行`buttonList.add(new Button2(xpos,ypos,width,height))`.

# django - 限制 Django 日志记录错误邮件在生产中不起作用

> ID：14015064
> 
> 赞同：3
> 
> 时间：2012-12-23T22:04:09.010
> 
> 标签：django, email, logging, error-handling, limit

我们有一个每分钟有数千个请求的网站，我想限制 Django 发送给我们的错误管理邮件的最大数量，以防我们的代码出现错误。

在我的本地开发系统上，以下日志配置运行良好。它设置一个缓存值，该值在 10 秒后过期。在此时间间隔内发生的错误根本不会报告。这就是我们想要的。**以下所有代码都放在我们的项目设置文件中。**

```
def limit_error_interval(record):
    from django.core.cache import cache
    if not cache.get('last_error'):
        cache.set('last_error', '1', 10) # 10 sec
        return True

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'error_limit': {
            '()': 'django.utils.log.CallbackFilter',
            'callback': limit_error_interval
        },
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['error_limit',],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins',],
            'level': 'ERROR',
            'propagate': True
        },
    }
} 
```

但是，代码在我们的生产服务器 (NGINX) 上失败。limit_error_interval 被调用，但每个错误仍然通过邮件发送。我们的缓存在代码中工作，但它似乎在这个函数中不起作用。在设置中使用缓存有问题吗？

这种替代方法/片段具有完全相同的问题：适用于本地开发系统，但不适用于生产。

```
class ErrorIntervalFilter(object):
    def filter(self, record):
        from django.core.cache import cache
        if not cache.get('last_error'):
            cache.set('last_error', '1', 10)
            return True

LOGGING = {
    'version': 1, 'disable_existing_loggers': False,
    'handlers': {'mail_admins': {'level': 'ERROR', 'class': 'django.utils.log.AdminEmailHandler', 'filters': ['error_interval'],}},
    'filters': {'error_interval': {'()': ErrorIntervalFilter,}},
    'loggers': {'django.request':{'handlers': ['mail_admins'], 'level': 'ERROR', 'propagate': True,},},
} 
```

任何帮助或提示表示赞赏！：-） 圣诞节快乐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:34:58.447

也许您在生产环境中运行同一个应用程序的多个实例（我猜这个限制将在每个实例中起作用）。

根据我的经验，像[sentry](https://www.getsentry.com/welcome/)这样的日志聚合工具比通过电子邮件接收错误要好得多，因此不值得追查问题的原因。只需安装哨兵并快乐。

# associations - Sencha Touch belongsTo 关联使用 Store on Datalist

> ID：14015067
> 
> 赞同：0
> 
> 时间：2012-12-23T22:04:29.623
> 
> 标签：associations, sencha-touch-2, store, datalist, belongs-to

我想在 datalist 上获取 belongsTo 记录并显示父记录字段。

```
Ext.define('MyApp.model.Customer', {
    extend: 'Ext.data.Model',

    config: {
        fields: ['Id', 
        'EMail'],   
        hasMany:  [{
            model: 'MyApp.model.OutstandingInvoice',
            name: 'OutstandingInvoice',
            primaryKey: 'Id',
            foreignKey: 'customerId',
            foreignStore: 'OutstandingInvoices'
        }]
    }
});

Ext.define('MyApp.model.OutstandingInvoice', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
        'InvoiceDate', 
        'InvoiceID',
        'customerId'
        ],
        belongsTo: [{
            model: 'MyApp.model.Customer',
            name: 'Customer',
            primaryKey: 'Id',
            foreignKey: 'customerId',
            foreignStore: 'Customers'
        }]
    }
});

Ext.define('MyApp.store.OutstandingInvoices', {
    extend: 'Ext.data.Store',

    config: {
        model: 'MyApp.model.OutstandingInvoice',        
        storeId: 'OutstandingInvoiceStore',        
        proxy: {
            useDefaultXhrHeader: false,
            type: 'ajax',            
            url : 'http://localhost/getOutstandingInvoices',            
            reader: {
                type: 'json'
            }
        },
        autoLoad: false
    }
});

Ext.define('MyApp.store.Customers', {
    extend: 'Ext.data.Store',

    config: {
        model: 'MyApp.model.Customer',      
        storeId: 'CustomerStore',        
        proxy: {
            useDefaultXhrHeader: false,
            type: 'ajax',            
            url : 'http://localhost/getCustJList',
            reader: {
                type: 'json'
            }
        },
        autoLoad: false,
        sorters: [{
            property : 'FName',
            direction: 'ASC'
        }]
    }
});

Ext.define('MyApp.view.OutstandingInvoices', {
    extend: 'Ext.Panel',
    xtype: 'outstandingInvoicesXType',
    config: {
        cls : 'invoiceSummaryCls',
        scrollable: 'vertical',
        items: [
        {
            xtype: 'titlebar',
            docked: 'top',
            title: 'Outstanding Invoices'
        },
        {
            xtype : 'list',
            scrollable: false,
            store: 'OutstandingInvoiceStore',
            cls : 'p10',
            itemTpl: [
            '<div>Invoice # {InvoiceID}</div>',
            '<div>{InvoiceDate}</div>',        
            '<div>{Customer.Email}</div>', // I want to show Customer name here as its belongsTo Customer
            ],
            listeners: {
                itemtap:function (list, index, targe, rec, e, eOpts) {                    
                    console.log(rec)
                }
            }
        }
        ] 
    }

}); 
```

我想在数据列表中显示客户名称，但关联或 Xtemplate 有问题我收到此错误

```
Uncaught Error: [ERROR][Ext.XTemplate#apply] Cannot read property 'Email' of undefined 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T22:26:52.740

我建议阅读这篇[文章](http://appointsolutions.com/2012/07/using-model-associations-in-sencha-touch-2-and-ext-js-4)，它很长，但最后的列表部分与您的示例相似。

我认为关键是你不需要单独的商店。Sencha 将在关联的后面自动创建这些。确保将代理移动到模型上并设置 autoLoad: true

# html - @font-face 适用于 Chrome，但不适用于 IE 或 Firefox

> ID：14015068
> 
> 赞同：1
> 
> 时间：2012-12-23T22:04:31.433
> 
> 标签：html, css, font-face

这让我很困惑。我正在使用 font-squirrel 下载一个 web 工具包来显示自定义字体。这是字体的链接：[http ://www.fontsquirrel.com/fontfacedemo/League-Gothic](http://www.fontsquirrel.com/fontfacedemo/League-Gothic)

如果您现在查看主页：[http ://www.simonsayswebsites.com/](http://www.simonsayswebsites.com/)

中间的正文是“为获得更多客户而设计的定制网站”。它在 chrome 中看起来很棒，就像它应该的那样，但是如果你在 Firefox 或 IE 中查看它，自定义字体将不起作用。

这是生成字体的CSS：

```
@font-face {
font-family: 'LeagueGothicRegular';
src: url('http://simonsayswebsites.com/wp-content/themes/twentytenchild/League_Gothic-webfont.eot');
src: url('http://simonsayswebsites.com/wp-content/themes/twentytenchild/League_Gothic-webfont.eot?#iefix') format('embedded-opentype'),
     url('http://simonsayswebsites.com/wp-content/themes/twentytenchild/League_Gothic-webfont.woff') format('woff'),
     url('http://simonsayswebsites.com/wp-content/themes/twentytenchild/League_Gothic-webfont.ttf') format('truetype'),
     url('http://simonsayswebsites.com/wp-content/themes/twentytenchild/League_Gothic-webfont.svg#LeagueGothicRegular') format('svg');
font-weight: normal;
font-style: normal; 
```

}

有人有想法么？我查看了很多关于这一切的案例，但我没有看到一个与我的案例相关的案例，因为我认为我已经为每个浏览器包含了所有不同的必要文件，并将它们上传到他们尊重的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T22:13:08.580

四处闲逛，我发现了 Firefox 的这个有趣的花絮：

~~*同源规则：默认情况下，Firefox 只接受相对链接。如果要使用绝对链接或包含来自不同域的字体，则需要将这些字体与访问控制标头一起发送。*~~

~~尝试将这些字体 URL 更改为相对，看看是否有帮助：~~

```
@font-face {
    font-family: 'LeagueGothicRegular';
    src: url('/wp-content/themes/twentytenchild/League_Gothic-webfont.eot');
    src: url('/wp-content/themes/twentytenchild/League_Gothic-webfont.eot?#iefix') format('embedded-opentype'),
         url('/wp-content/themes/twentytenchild/League_Gothic-webfont.woff') format('woff'),
         url('/wp-content/themes/twentytenchild/League_Gothic-webfont.ttf') format('truetype'),
         url('/wp-content/themes/twentytenchild/League_Gothic-webfont.svg#LeagueGothicRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

编辑：见 Korpela 的回答；问题是与“www”子域不匹配。不过，您可能应该保持 URL 是相对的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T22:58:39.330

问题的原因是（曾经）跨域使用字体。以“http://simonsayswebsites.com”开头的 URL 被视为与“http://www.simonsayswebsites.com”位于不同的域中，即使这两个域名可能指的是同一台计算机。

切换到相对 URL 会有所帮助，因为那时域是相同的。但尽管有相反的传言，Firefox 并不拒绝`@font-face`. 我已经设置了一个简单的[演示](http://www.cs.tut.fi/~jkorpela/css/ff.html)来展示这一点。

据推测，谣言源于这样的案例：如果切换到相对 URL 有帮助，那么很自然地假设 URL 的类型是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-08T08:24:41.217

我也遇到了你的问题，搜索了很多，但什么也没找到……所以我开始在我的 CSS 上试验了几分钟，最后意识到我重复了字体系列名称，我一直在我的两个主题中声明下面的代码和布局页面：

```
<style type="text/css" media="screen, print">
    @font-face 
    {
        font-family: 'foo';
        src: url('~/Assets/fonts/foo.woff') format('woff'),
        url('~/Assets/fonts/foo.ttf') format('truetype'),
        url('~/Assets/fonts/foo.eot') format('eot');
    }
</style> 
```

我只需要删除其中一个，我的代码在所有三个浏览器中都运行良好！

还有一点是，只需删除包含“font-family：'foo';”的行 零件可以解决问题！

# three.js - 服务器端回退渲染

> ID：14015073
> 
> 赞同：6
> 
> 时间：2012-12-23T22:05:02.247
> 
> 标签：three.js

有没有办法让 three.js 在无头服务器（独立服务器、亚马逊 AWS 或类似服务器）上运行服务器端？

目前，当用户的浏览器不支持 WebGL 时，我会退回到画布渲染（仅出于性能原因的线框）。这对于实时交互来说已经足够好了，但是为了让应用程序有意义，用户确实需要能够以某种方式看到带有灯光、阴影、后期处理等的正确渲染版本，即使它具有很大的延迟。

那么......是否有可能创建一个具有功能的three.js实例的服务器端服务？客户端仍将使用 tree.js 画布线框渲染，但在说...一秒钟不活动之后，它会通过 AJAX 请求来自服务器端服务的完整渲染，并将其简单地叠加为图像。

目前是否有任何应用程序、库或任何允许这样的事情（无头，最好是 linux 服务器上的功能性 javascript+webgl+three.js，并且没有 GPU）？

想到 PhantomJS，但显然它还不支持 WebGL：[http ://code.google.com/p/phantomjs/issues/detail?id=273](http://code.google.com/p/phantomjs/issues/detail?id=273)

或者解决问题的任何替代方法？以编程方式控制具有 GPU 和标准 chrome/firefox 实例的完整台式机的路线感觉是可能的，虽然很脆弱，如果有任何纯软件解决方案，我真的不想去那里。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T17:08:51.220

在其 QA 基础架构中，Google 可以使用 Mesa 运行 Chromium 测试（请参阅 issue [97675](http://code.google.com/p/chromium/issues/detail?id=97675)，通过 switch `--use-gl=osmesa`）。最新版 Mesa 中的软件光栅化器非常先进，涉及使用 LLVM 转换着色器并模拟 CPU 上的执行。您的第一次冒险可能是构建 Mesa，构建 Chromium，然后尝试将它们联系在一起。

作为旁注，这也是我为 PhantomJS 本身计划的（在不久的将来），特别是因为 Qt 也在朝着这个方向发展，即使用 Mesa/LLVMpipe 而不是仅使用它自己的光栅引擎。[这些数字](http://blog.qt.digia.com/blog/2011/05/31/qml-scene-graph-in-master/)实际上看起来不错。更好的是，对于离线、非动画的单镜头捕捉，性能会非常令人满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:38:41.277

此线程中的一些输入：[https ://github.com/mrdoob/three.js/issues/2182](https://github.com/mrdoob/three.js/issues/2182)

特别是这个[演示](http://www.screenr.com/8648)展示了如何使用 nodejs 在服务器端生成一些图像。

谢谢，尼科

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-21T17:03:11.900

下面的链接不会解决您使用 AWS 的问题，但会给您一个提示。

我正在开发具有类似架构的应用程序，并遇到了以下示例：

[具有实时 socket.io 的多人游戏](https://github.com/dirkk0/multiplay)

[我关于类似架构的原始问题](https://stackoverflow.com/questions/16719666/run-three-js-on-server-with-a-help-of-node-js-export-model-to-json-and-load-to)

# apache - Htaccess 多语言 mod_rewrite

> ID：14015074
> 
> 赞同：3
> 
> 时间：2012-12-23T22:05:11.717
> 
> 标签：apache, .htaccess, codeigniter, mod-rewrite, redirect

好吧，我已经浪费了很多时间试图弄清楚这一点，但是我越是尝试学习重写规则，我似乎就越不了解发生了什么。我需要为基于 codeigniter 的项目修复一些重写规则。

该应用程序是一个多语言 CMS，它基本上适用于模块、页面和帖子，并且在`.htaccess`文件中我需要检查 url 是页面还是帖子并重定向到适当的控制器。

到目前为止，在我的`.htaccess`文件中，我有以下内容：

```
 #if I'm on the homepage and i have a language id
    RewriteCond $1 ^([a-z]{2})/?$
    RewriteRule ^(.*)$ index.php?homepage/index/$1 [PT,L]

    #if module - this works ok when there is no language id
    RewriteCond $1 ^(gallery|post|products)
    RewriteRule ^(.*)$ index.php?$1 [PT,L]

    # Rewrite all other URLs to index.php/URL - page controller
    RewriteRule ^(.*)$ index.php?page/show/$0 [PT,L] 
```

使用上面的代码，如果我输入

```
http://mydomain.com/gallery/something/9 
```

一切都很好，花花公子，如果我像这样添加语言ID：

```
http://mydomain.com/en/gallery/something/9 
```

它不再起作用，并且我从页面控制器收到页面未找到/404 错误（在 .htaccess 末尾重定向）。

因此，假设我的 url 看起来像这样：

```
 http://mydomain.com/gallery/something/9       
    http://mydomain.com/en/gallery/something/25
    http://mydomain.com/fr/post/something/31 
```

我需要以某种方式将这些网址重定向到

```
 http://mydomain.com/gallery/something/9        
     http://mydomain.com/en/gallery/somethingelse/25
     http://mydomain.com/fr/post/somethingelse/31 
```

请注意，有时我有语言 ID，有时我没有。这是我应该使用 htaccess 做的事情吗？Codeigniter 路由是更好的选择吗？感谢您对堆栈溢出的任何帮助 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:36:56.630

试试看：

```
RewriteCond $1 ^[^/]*/?(gallery|post|products) 
```

# html - 带有 z-index 的交互式 HTML 底层

> ID：14015075
> 
> 赞同：0
> 
> 时间：2012-12-23T22:05:42.097
> 
> 标签：html, css, z-index

如果显示框架图像，我们可以使以下谷歌地图交互吗？

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<input type="button" onclick="$('#frame_image').show();" value="Show frame layer">
<input type="button" onclick="$('#frame_image').hide();" value="Hide frame layer">
<br /><br />

<div style="position: absolute; z-index: 1;">
    <iframe frameborder="0" width="358" height="358" marginheight="0" marginwidth="0" scrolling="no" src="https://maps.google.ca/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=55+Avenue+Road,++Toronto,+Ontario+M5R+3L2+Canada&amp;aq=&amp;sll=43.656877,-79.32085&amp;sspn=0.852471,2.113495&amp;ie=UTF8&amp;hq=&amp;hnear=55+Avenue+Rd,+Toronto,+Ontario+M5R+1C6&amp;t=m&amp;z=14&amp;ll=43.67111,-79.395217&amp;output=embed&iwloc=near" ></iframe>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
    <small><a href="https://maps.google.ca/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=55+Avenue+Road,++Toronto,+Ontario+M5R+3L2+Canada&amp;aq=&amp;sll=43.656877,-79.32085&amp;sspn=0.852471,2.113495&amp;ie=UTF8&amp;hq=&amp;hnear=55+Avenue+Rd,+Toronto,+Ontario+M5R+1C6&amp;t=m&amp;z=14&amp;ll=43.67111,-79.395217" style="color:#0000FF;text-align:left" target="_blank">View Larger Map</a></small>
</div>

<div style="position: absolute; color:red; z-index: 2" id="frame_image">
    <img src="http://torontoclinic.awkwardhosting.com/images/frame.gif" />
</div> 
```

代码也在以下链接上：http: [//jsfiddle.net/pPrZV/](http://jsfiddle.net/pPrZV/)

请让我知道是否有任何其他方式通过 Google Maps API 等。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:51:36.927

只需将此样式应用于`<iframe>`谷歌地图

`<iframe` **样式=“边框半径：250px”** `frameborder="0" width="358" height="358" marginheight="0" marginwidth="0" scrolling="no"...`

[在这里工作 jsFiddle](http://jsfiddle.net/pPrZV/1/)

# sublimetext2 - Sublime Text 2 的 YUI Compressor 插件中的 Unicode 解码错误

> ID：14015077
> 
> 赞同：1
> 
> 时间：2012-12-23T22:05:52.060
> 
> 标签：sublimetext2, yui-compressor

我似乎无法让 Sublime Text 2 的Yui [Compressor](http://www.sublimetext.com/2)[插件](https://github.com/leon/YUI-Compressor)正常工作，并且不断收到如下错误：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0x9e in position 19: ordinal not in range(128)
Writing file /C/Users/Nikola Brežnjak/Desktop/yuicompressor-2.4.7/build/justTesting.js with encoding UTF-8
Running java -jar C:\Users\Nikola Brežnjak\AppData\Roaming\Sublime Text 2\Packages\YUI Compressor\bin\yuicompressor-2.4.7.jar --charset utf-8 --preserve-semi --line-break 150 -o justTesting.min.js C:\Users\Nikola Brežnjak\Desktop\yuicompressor-2.4.7\build\justTesting.js
Traceback (most recent call last):
  File ".\sublime_plugin.py", line 337, in run_
  File ".\exec.py", line 154, in run
  File ".\exec.py", line 45, in __init__
UnicodeDecodeError: 'ascii' codec can't decode byte 0x9e in position 19: ordinal not in range(128) 
```

我通过包管理器安装了插件，并确保已将 java 放入我的 PATH 变量中，如果我通过控制台运行它，YUI Compressor 就会完成它的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:05:52.060

问题在于我的 Sublime Text 的安装路径 - 请注意我姓氏中的**ž**字符。

因此，经过大量搜索后，我在**[这里](https://github.com/misfo/Shell-Turtlestein/issues/6#issuecomment-4249064)**找到了解决方案，并且正如那里所说，它似乎是`exec.py`文件中的错误，可以在您的 Sublime Packages 目录中找到（例如：）`C:\Users\Nikola Brežnjak\AppData\Roaming\Sublime Text 2\Packages\Default`。您必须将第**45 行**更改为：

```
proc_env[k] = os.path.expandvars(v).encode(sys.getfilesystemencoding()) 
```

到：

```
proc_env[k] = os.path.expandvars(v.decode(sys.getfilesystemencoding())).encode(sys.getfilesystemencoding()) 
```

在此之后您必须保存文件，插件会自动重新加载，然后 YUI 压缩插件将完美运行。

# mercurial - Mercurial Windows Server 2008

> ID：14015082
> 
> 赞同：1
> 
> 时间：2012-12-23T22:06:28.553
> 
> 标签：mercurial, clone

我在 windows server 2k8 上安装了 TortoiseHg 2.6.1 和 Mercurial 2.4.1 的一体化下载。我创建了一个存储库，在端口 8000 上为它提供服务。现在没有为这个存储库设置 mercurial 配置文件。也没有全局配置文件。当我尝试通过 eclipse（MercruialEclipse 插件）从互联网上的远程计算机克隆这个 repos 时，我得到：

```
abort: HTTP Error 404: Not Found 
```

这是什么意思？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:19:02.940

找到了解决方案。命令语法不正确。我使用的语法不正确是

```
hg clone http://www.xyz.com:8000/<dirname for the repo clone> 
```

正确的命令是：

```
 hg clone http://www.xyz.com:8000/ <dirname for the repo clone> 
```

还应该提到我正在使用版本 2.3.2(mercurial)

# c# - 如何让文本块显示 5 秒？

> ID：14015086
> 
> 赞同：1
> 
> 时间：2012-12-23T22:06:44.757
> 
> 标签：c#, windows-phone-7

C# windows phone-如何让文本块显示 4 秒然后消失？

这就是我所拥有的：

```
 statusbox.Text = ("Loading...")TimeSpan.FromSeconds(05); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:09:38.317

只需启动[`DispatcherTimer`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx)之后清除文本：

```
DispatcherTimer timer = new DispatcherTimer();
timer.Tick += {
    statusbox.Text = "";
    timer.Stop();
};
timer.Interval = TimeSpan.FromSeconds(4);
timer.Start(); 
```

但是，如果它是为了指示正在加载的内容，为什么不在*完成加载时*清除状态文本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:26:58.630

您也可以为此执行动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T03:05:21.830

我建议使用[Scheduling Task](http://dotnet.dzone.com/articles/scheduling-tasks-windows-phone)，它比计时器好得多。您可以使用操作设置计划。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T00:01:40.113

使用异步函数可以更好地解决这个问题：

```
// in .NET 4
await TaskEx.Delay(4000);
statusbox.Text = String.Empty; 
```

这只是一个需要考虑的额外解决方案，因为它可以更容易地理解正在发生的事情。您需要为 Visual Studio 2010 使用[Async CTP 3](http://www.microsoft.com/en-us/download/details.aspx?id=9983)或[为 VS 2012 使用 Async 目标包](https://nuget.org/packages/Microsoft.Bcl.Async)。如果您使用的是 .NET 5（例如 WP8），您可以使用 Task.Delay 代替上述方法。

# c++ - C# 的 byte[,] 的 C++ 等价物是什么？

> ID：14015091
> 
> 赞同：0
> 
> 时间：2012-12-23T22:07:26.633
> 
> 标签：c++

在 C++ 中，C# 的等价物是`byte[,]`什么？我正在尝试进行转换，但我正在学习。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:12:55.630

您可以使用以下几种方法来模拟它：

一：推荐使用对象。制作一个向量的向量：

```
std::vector <std::vector < std::uint8_t > > twoDArr; 
```

二：不带对象的推荐方式——字节数组：

```
std::uint8_t arr[width][height]; 
```

（这也适用于 C 语言。）

三：在 C 中，这是动态分配数组的唯一选择，但在 C++ 中不建议这样做——只要你想要 C 兼容性：

```
const size_t w = 13;
const size_t h = 37;
uint8_t **arr = malloc(w * sizeof(arr[0]));
for (int i = 0; i < w; i++) {
    arr[i] = malloc(h);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T22:25:04.367

您可以使用向量的向量（2d 向量）

填充二维向量：

```
std::vector<std::vector<std::uint8_t> > dynamicArray;

    for (int i = 0; i < m_nCurrentWidth; ++i)
    {
      std::vector<std::uint8_t> row;
      for (int j = 0; j < m_nCurrentHeight; ++j)
      {
        row.push_back(0xFF);
      }

      dynamicArray.push_back(row);
    } 
```

并遍历它：

```
for (int y = 0; y < m_nCurrentHeight; ++y)
{
    const std::vector<std::uint8_t>& row = dynamicArray[y];
    for (int x=0; x < m_nCurrentWidth; ++x)
    {
       std::cout << row[x] << " ";
    }

  std::cout << endl;
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T22:10:03.123

```
std::vector<std::vector<unsigned char> > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T22:18:24.663

我相信你可以像这样创建一个数组。

```
 unsigned char byteArray[][]; 
```

你可以像这样实例化它。

```
 byteArray = {{byte1A,byte1B},{byte2A,byte2B},...,{byteNA,byteNB}}; 
```

# php - MySQL 家谱：层次结构、婚姻参考和显示

> ID：14015093
> 
> 赞同：1
> 
> 时间：2012-12-23T22:07:41.903
> 
> 标签：php, mysql, hierarchical, family-tree, database-relations

我正在建立一个家谱 + 历史 [PHP] 网站，以展示我妈妈为她父母的圣诞礼物整理的家谱报告。这棵树至少将基于一个 MySQL 数据库（“family”），我目前正在其中使用两个表：“persons”和“marriages”。我还有第三张桌子，“亲子关系”，但后来认为它是不必要的。

表的结构如下：

```
PERSONS
- 'personID' [tinyint, pk]
- 'firstName'
- 'lastName'
- 'sex' [set{'M','F'}]
- 'birthDate'
- 'fatherID' [internal rel = 'personID']
- 'motherID' [internal rel = 'personID']
- 'birthPlace'
- 'deathDate'
- 'deathPlace'
- 'birthRecord' (filename)

MARRIAGES
- 'husbandID' [internal rel = 'persons.personID']
- 'wifeID' [internal rel = 'persons.personID']
- 'date'
- 'place'
- 'record' 
```

“婚姻”表中的 PK 索引由两个 ID 列组成。（*请原谅我使用性别歧视术语；这只是出于结构目的——以防万一，因为我是 MySQL 新手——而且我的家人无论如何都是相当右翼和保守的，但它确实没有'无关紧要，没有任何意义，如果您愿意，不妨将其视为配偶1和配偶2。我个人对任何人都没有同性恋恐惧症或偏见。结束免责声明。愿所有人平安。）

所以......你明白我为什么要为“婚姻”维护一个单独的表：每段婚姻都有自己的数据必须包含在内，在配偶双方的记录中重复每段婚姻的数据是很愚蠢的。我之前在“persons”表中有一个“spouseID”列，但是我还需要手动匹配每个配偶的 ID，并且无法弄清楚如何将该列链接到相应的婚姻列（在“婚姻表）无论如何，所以我放弃了它。

如果有人能告诉我如何让“婚姻”中的两个配偶 ID 列来显示人的姓名，或者这将是盛大的。

但首先我需要知道如何链接这两个表（可能在“persons”表中包含一个“spouse”列，它以某种方式与“marriages”表集成在一起），其次是关于如何显示的任何提示层次树。

非常感激。

PS 这棵树相当广泛，跨越约 6 代。大约有 45 个“人”，我认为有 16 段婚姻，无论这些信息是否值得……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:15:07.783

这是我在 ERD 图中的评论中提出的建议。

![ERD](../Images/a4ed54ccfd577931202f85411ac13908.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:18:14.153

对同一张表的直接 SELECT-JOIN 查询两次将所有婚姻作为一个列表。

```
SELECT m.*,
      h.firstName as husbandFirstName, h.lastName as husbandLastName, 
      w.firstName as wifeFirstName, w.lastName as wifeLastName 
FROM marriages m
LEFT JOIN persons h ON m.husbandID = h.personID
LEFT JOIN persons w ON m.wifeID = w.personID; 
```

对于男性的孩子列表，您可以这样传递父亲的 ID：

```
SELECT p.firstName as fatherFirstName, p.lastName as fatherLastName, 
     c.firstName as childFirstName, c.lastName as childLastName
LEFT JOIN persons c ON c.fatherID = p.personID
WHERE p.personID = $fatherID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-13T22:56:29.247

完全没有答案，但我也一直在想家谱，但我的想法更笼统。也就是说，您拥有的个人表（减去fatherID 和motherID 字段，以及一个单独的关系表。

后者将允许结婚、离婚和孩子。

现在这肯定会在查询时显示一些大量的 CPU 使用率，并且会影响我对连接的理解。但现在它似乎满足了我的需求。

# mysql - 未能删除或截断表

> ID：14015097
> 
> 赞同：1
> 
> 时间：2012-12-23T22:08:26.303
> 
> 标签：mysql, truncate

我尝试了所有方法来截断表格，但我总是收到相同的信息：

```
Cannot delete or update a parent row: a foreign key constraint fails (`mybdd`.`c_member`, CONSTRAINT `fk_cm_c_id` FOREIGN KEY (`c_id`) REFERENCES `comment` (`c_id`)) 
```

在这个网站上看一些帖子我试过这个：

ALTER TABLE`comment` 添加约束`c_member`外键 ( `c_id`) 引用`comment`( `c_id`);

但它不起作用：

无法创建表 'mybdd.#sql-2ee0_3769864' (errno: 150){"success":false,"error":"

# 1005 - 无法创建表 'sameditrbdd.#sql-2ee0_3769864' (errno: 150)</div>"}

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:13:20.457

您需要删除对表的所有引用，包括所有外键约束和索引，然后才能删除表。

外键约束还可以防止您删除特定的行。

或者，您可以关闭外键检查，但再次将它们重新打开可能会导致错误或不可预知的行为（因为数据库中的数据违反了您的约束）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T22:13:05.167

您可以使用：

```
SET foreign_key_checks = 0;
DROP <your_table>
SET foreign_key_checks = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-07T23:27:49.830

很可能有些人或他们的过程将您的餐桌作为人质！！！

您应该尝试通过他们的 spid # 来杀死他们！

要查看谁将您的餐桌作为人质，请打开查询分析器以运行

```
execute sp_who2 'active' -- under the database of interest 
```

然后，自己判断是否可以杀死他们，或者打电话给那些登录的人。

要杀，就做

```
kill 999 -- your spid # found in that table returned by above command 
```

之后，尝试再次截断或丢弃！

好运！！！

# import - Squeryl：从未找到

> ID：14015100
> 
> 赞同：1
> 
> 时间：2012-12-23T22:09:17.850
> 
> 标签：import, squeryl

Squeryl 需要哪个导入

```
from 
```

陈述？

错误说法：

```
def users = from(MySchema.users)(u => where(u.id === user.id.id) select(u)) 
```

错误消息：“未找到：值来自”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:56:04.703

进口

```
import org.squeryl.PrimitiveTypeMode._ 
```

需要。现在它编译了。

似乎我是唯一一个使用 Squeryl 的人……感谢您的收看。

# javascript - 在 ThreeJs 中围绕中心点上下移动 3D 相机

> ID：14015101
> 
> 赞同：2
> 
> 时间：2012-12-23T22:09:20.070
> 
> 标签：javascript, opengl-es, 3d, webgl, three.js

我在 ThreeJs 中做了一个非常基本的应用程序，我在中心有一个对象和 2 个滑块（水平旋转和垂直旋转）。两个滑块都输出一个介于 0 和 360 之间的整数。到目前为止，我设法使用第一个滑块在对象周围水平移动相机。但是我希望能够使用第二个滑块在对象周围上下移动相机，但我无法计算出正确的数学。

这是我目前的方程式：

```
camera.position.x =  originX + radius * Math.cos(horizontal_degrees*(Math.PI/180));
camera.position.z =  originY + radius *Math.sin(controls.horizontal_rotation(Math.PI/180));
camera.position.y=  //??? i can't figure this out.
camera.lookAt(scene.position); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:44:50.750

您可以使用[此示例](http://mrdoob.github.com/three.js/examples/canvas_geometry_panorama_fisheye.html)的代码作为基础：

```
var horizontal_degrees = 0;
var vertical_degrees = 0;

var theta = horizontal_degrees * Math.PI / 180;
var phi = vertical_degrees * Math.PI / 180;

camera.position.x = originX + radius * Math.sin( phi ) * Math.cos( theta );
camera.position.y = originY + radius * Math.cos( phi );
camera.position.z = originZ + radius * Math.sin( phi ) * Math.sin( theta ); 
```

# intellij-idea - 如何在 Intellij IDEA 的实时模板中设置变量的默认值？

> ID：14015108
> 
> 赞同：41
> 
> 时间：2012-12-23T22:10:44.860
> 
> 标签：intellij-idea, live-templates

Intellij IDEA 中的实时模板可能存在一些误解。我的意思是模板中变量的默认值。

假设我们有这个实时模板

![在此处输入图像描述](../Images/bd23a665cc1a5a513543c2bbda90badc.png) ![在此处输入图像描述](../Images/06ef429794b59f3eeb5af6b73a2abf6c.png)

我在这里期望的是，当调用此模板时（输入*jqon*并按*TAB*），我将看到已经输入的默认值，我可以更改或保留原样。像这样

![在此处输入图像描述](../Images/f77d02d3aa3594594e0c0d8795c43920.png)

但不是。我有空字符串而不是默认值

![在此处输入图像描述](../Images/502aa258786ccc5e4c74afc8d8c5aecd.png)

为什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-23T22:10:44.860

我错了*默认值*字段。在我的情况下，我不需要这个。我需要填写*表达式*字段。

如果我只想粘贴一些字符串作为默认值，我应该将此字符串放在*Expression*中的引号中。所以现在我的变量设置是这样的

![在此处输入图像描述](../Images/0ec5ef65f1a3154223f725c4e07ba9e3.png)

一切都按我的意愿进行！

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-05-23T22:07:30.530

如果您想将硬编码字符串作为默认值字段（在编辑变量对话框中），则需要使用双引号 ("ii")。将不带引号的字符串 (ii) 放在那里不会导致错误，但也不起作用。

# jsf - 使用jsf上传后如何显示pdf

> ID：14015113
> 
> 赞同：1
> 
> 时间：2012-12-23T22:11:25.517
> 
> 标签：jsf

我创建了一个文件上传功能，它将所有上传内容保存到某个位置：

```
private String destination = "D:/Documents/NetBeansProjects/FileUpload/uploadedDocuments/"; 
```

这是存放它的好地方吗？我应该把它存放在其他地方吗？

是否有可能在上传完成后显示一个页面，向用户展示他们刚刚上传的内容，例如下面显示预览的框？我该怎么做呢？我是新的。

我已经弄清楚如何显示一个普通的 txt 文件和一个图像，但是让我感到困惑的是 pdf。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:11:52.240

至于上传位置，好像是IDE项目文件夹，那是绝对不对的。您应该在 IDE 项目文件夹之外的某个位置选择一个可配置且固定的位置。您不应`getRealPath()`依赖`java.io.File`. 它会使你的 webapp 不可移植。另请参阅此相关问题：[Uploaded image only available after refresh the page](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page)。

无论您根据上述问题的答案中提供的信息（以及其中的所有链接）选择哪种方式，您最终都应该拥有一个指向相关 PDF 文件的有效 URL，例如[http://example.com/files /一些.pdf](http://example.com/files/some.pdf)。

然后，您可以使用以下任一方式在网页上提供 PDF 文件`<iframe>`：

```
<iframe src="/files/some.pdf" width="600" height="400"></iframe> 
```

或者一个`<object>`：

```
<object data="/files/some.pdf" type="application/pdf" width="600" height="400">
    <a href="/files/some.pdf">some.pdf</a> <!-- This link will only show up when the browser doesn't support showing PDF. -->
</object> 
```

请记住，只有具有 Adob​​e Reader 插件的浏览器才支持在浏览器中显示 PDF。请注意，`<object>`当浏览器不支持显示`application/pdf`内容时，该方法将优雅地降级为链接。

# python - CUDA 中的 scipy.interpolate.griddata 等效项

> ID：14015114
> 
> 赞同：8
> 
> 时间：2012-12-23T22:12:02.387
> 
> 标签：python, cuda, scipy, pycuda

我正在尝试在 python 中执行拟合值迭代（FVI）（涉及使用分段线性插值逼近 5 维函数）。

scipy.interpolate.griddata 非常适合这个。但是，我需要调用插值程序几千次（因为 FVI 是基于 MC 的算法）。

所以基本上，已知函数的点集是静态的（并且很大 - 比如说 32k），但是我需要近似的点（它们是原始集的小扰动）非常大（比如 32k x 5000）。

是否有已移植到 CUDA 的 scipy.interpolate.griddata 的实现？或者，有没有办法以某种方式加快计算速度？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:26:02.353

对于分段线性插值，文档说[`scipy.interpolate.griddata`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html)使用 的方法[`scipy.interpolate.LinearNDInterpolator`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.LinearNDInterpolator.html)，然后使用[qhull](http://www.qhull.org/)对输入点进行 Delaunay 细分，然后执行标准的重心插值，对于每个点，您必须确定每个点在哪个超四面体内部是，然后使用其[重心坐标](http://en.wikipedia.org/wiki/Barycentric_coordinate_system_%28mathematics%29)作为超四面体节点值的插值权重。

曲面细分可能很难并行化，但您可以使用[`scipy.spatial.Delaunay`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.Delaunay.html). 其他两个步骤很容易并行化，尽管我不知道有任何免费可用的实现。

如果您的已知功能点位于常规网格上，则[此处](http://www.hpl.hp.com/techreports/98/HPL-98-95.pdf)描述的方法在 CUDA 中特别容易实现，并且我已经使用它的实际实现，尽管没有公开可用。

所以恐怕你将不得不自己完成大部分工作......

# java - do while 循环的问题

> ID：14015117
> 
> 赞同：0
> 
> 时间：2012-12-23T22:13:04.540
> 
> 标签：java, loops, while-loop, do-while

我试图返回一个必须在两个数字之间的*随机*数，我这样做的方式是设置一个循环来检查它是否在这些数字之间，如果不是，则重新滚动。

我遇到的问题是它永远不会脱离我的循环并且我无法解决它，是因为变量没有从循环中传递出来进行重新测试吗？

如果是这样，我需要做某种回报或休息吗？

代码：

```
int randDamRange = 0
byte DamRange = attack.getM_damageRange(); //In this case 75

//Create a random number from within the attack damage range
do
{
    Random randbetween = new Random();

    randDamRange = randbetween.nextInt(DamRange);
    randDamRange = 75; //Test Should breakout of loop           
}   
while ((randDamRange < DamMin) || (randDamRange < DamMax)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:14:28.513

看看你的循环条件：

```
while ((randDamRange < 50) || (randDamRange < 115)); 
```

现在想想`randDamRange`75岁。你为什么*不*期望它继续下去？75 小于 115。

请注意，由于 50 小于 115，因此您的循环条件完全等同于：

```
while (randDamRange < 115); 
```

我*怀疑*你的意思是：

```
while (randDamRange < 50 || randDamRange > 115) 
```

但如果是这样，在范围内获得一个随机数并添加 50 会简单得多*......*`[0, 65]`根本不需要循环。（目前尚不清楚`getM_damageRange()`事情是如何产生的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T22:15:09.850

获得 50 到 115 之间的随机数的更简单的解决方案是获得 0 到 65 之间的随机数并加上 50：

```
Random randbetween = new Random();
randDamRange = randbetween.nextInt(65);
randDamRange += 50; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T01:40:45.090

在您的情况下，最简单的方法是：

```
int randomNumber = (int)(Math.random() * 76) 
```

一般的方法是：

```
int randomNumber = minimalValue + (int)(Math.random() * ((maximalValue - minimalValue) + 1)) 
```

# cors - 对无效 CORS 请求的预期响应是什么？

> ID：14015118
> 
> 赞同：17
> 
> 时间：2012-12-23T22:13:05.257
> 
> 标签：cors

CORS 规范没有说明服务器应如何响应无效的 CORS 请求。例如，如果请求 Origin 无效，则[CORS 规范声明](http://www.w3.org/TR/cors/#resource-requests)：“终止这组步骤。请求超出了本规范的范围。” 其他错误情况也有类似的语言，例如请求无效的方法或标头。

如果出现 CORS 错误，预期的响应应该是什么？我了解不同的服务器可能需要不同的行为。但我正在寻找一个标准响应或如果服务器所有者不在乎的话可以接受的响应。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-28T03:38:36.497

是的，我意识到我正在回答我自己的问题，但无论如何它都在这里。我对此进行了一些研究，似乎行为分为两个阵营：

**1) 如果 CORS 请求无效，则返回错误。**这是[Java CORS 过滤器](http://software.dzhuvinov.com/cors-filter.html)项目采用的路线。这个库返回

*   400 Bad Request 不符合规范的请求
*   403 Forbidden for invalid origins 或 headers。
*   405 Method Not Allow for invalid方法

**2）在响应中返回 CORS 头，让浏览器整理访问细节。**这似乎是更常见的方法，并且被用于 Amazon S3、SoundCloud、FourSquare 和 Spotify 的 API 使用（后两个 API 受益于仅支持简单的 CORS 请求）。在这种情况下，服务器不做任何错误检查，而只是返回支持的源、方法和标头的 CORS 标头。浏览器仍会发出请求，但如果 CORS 响应标头与用户的请求不匹配，则浏览器会拒绝用户的响应。

这些方法中的每一种都有其优点和缺点。方法 #1 更接近 CORS 规范，但没有向用户提供有用的调试信息。

方法 #2 更深入地了解支持的方法和标头是什么。它也更容易实现，因为无论请求标头如何，服务器都会返回相同的响应标头。然而，这是以在服务器端实际执行请求为代价的，即使浏览器会阻止用户的响应。这对于具有副作用的方法（例如 POST、PUT 或 DELETE）可能是不可取的，并强调了 CORS 不应用作身份验证机制的事实。

（请注意，我上面的研究绝不是详尽无遗的。很难看到许多 API 的真实行为，因为它们要么需要身份验证，要么因其他错误（例如不受支持的方法）而在不同级别阻止请求。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-14T10:55:50.107

我只是想补充一下Monsur的答案。**还有另一种行为**（S3 当前正在使用的行为）：

3.  仅在与请求的 Origin 匹配时发送 CORS 响应标头。否则，根本不发送任何 CORS 标头，让您的浏览器或任何其他客户端自行决定。

至少这对我来说是这样的。

此外，当涉及到 Java 时，发送 403 是很常见的。那个 Java 链接已经很老了，但是 Java 中的事实标准 Spring 方法是相同的。[在这里](https://stackoverflow.com/a/55669917/4470135)查看我的参考资料。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T22:26:59.903

我预计这将取决于错误的性质，但我预计会出现一些 4xx 错误，例如 403（如果请求不符合某些要求的标准）或 404（如果该方法不可用）。

# php - 如何在php中做丰富的片段标记？

> ID：14015119
> 
> 赞同：-1
> 
> 时间：2012-12-23T22:13:06.890
> 
> 标签：php, markup, rich-snippets

我的问题是我所做的网页是完整的 PHP 文件。到处都有如何生成的教程，但是没有说明当它是 PHP 文件时该怎么做。

主文件也是 index.php。当我插入在 HTML 中生成的代码时。

带有很多错误，所以我将其转换为 PHP。

它会开始像

```
echo "..bla bla" "\n" ;

echo "<div property=\"gr:legalName\" content=\"G &amp; Sziladi\"></div>\n"; 
```

这已经很好了，谷歌识别它，但是这将显示在我的页面顶部。我怎样才能将此标记插入 index.php 而不显示，但谷歌必须正确识别它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:39:17.467

如果您喜欢复制和粘贴 HTML，请将其粘贴到 PHP 文件中但在 PHP 标记*之外*：

```
<?php
/*
 * May brand new PHP Website 
 */

$title_prefix = '- Escaping the Tags';

?>
<html>
  <head>
    <title>Supersite Deluxe <?php echo $title_prefix; ?></title>
  </head>
  <body>
   ....
  </body>
</html> 
```

如果您需要大量 HTML，这将特别有用，因为您可以将其粘贴进去。

请参阅[从 HTML 中转义](http://php.net/language.basic-syntax.phpmode)

# ios - 结合导航控制器和标签栏控制器

> ID：14015122
> 
> 赞同：5
> 
> 时间：2012-12-23T22:13:25.200
> 
> 标签：ios, cocoa-touch, uinavigationcontroller, uitabbarcontroller

正如我在标题中提到的，我想添加`Navigation Controller`到我已经有一个`Tab Controller`. [所以试着在这个页面](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerPGforiOSLegacy/CombiningViewControllers/CombiningViewControllers.html)上做一些类似的事情。无论如何，有些不对劲。`UINavigationController`正在寻找一个空白页，即使有一个视图和一些库。

让我从stracht开始：

在我的`AppDelegate`中，我正在设置标签栏控制器，如下所示：

```
@interface MYAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UITabBarController *tabBarController;

@end 
```

这是 .m 文件：

```
@implementation MYAppDelegate

@synthesize window = _window;
@synthesize tabBarController = _tabBarController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    application.applicationSupportsShakeToEdit = YES;
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UINavigationController *viewController1 = [[[MYMainViewController alloc] init] initWithNibName: @"MYMainViewController" bundle:nil];
    UIViewController *viewController2 = [[[MYPageViewController alloc] init] initWithNibName:@"MYPageViewController" bundle:nil];
    UIViewController *viewController3 = [[[MYSearchViewController alloc] init] initWithNibName:@"MYSearchViewController" bundle:nil];
    UIViewController *viewController4 = [[[MYPersonViewController alloc] init] initWithNibName:@"MYPersonViewController" bundle:nil];

    // Initialize tabBarController and add ViewControllers
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects: viewController1, viewController2, 
        viewController3, viewController4, nil];

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

然后，这里是`MYMainViewController`实现，它是`UINavigationController`：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"%@", [self navigationController]); // Logging null
} 
```

我的 .xib 文件有一个`UINavigationController`和，其中有一个视图。尽管如此，当我使用该应用程序时，有空白页面和无标题导航栏。我究竟做错了什么？

如果我可以看到我的视图的内容，我想通过使用后退按钮在两个视图控制器之间导航。

任何帮助或方法对我来说都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T12:12:20.897

尝试从 xib 中删除导航控制器，使其只有视图控制器，然后以编程方式初始化导航控制器：

```
UIViewController *tmpViewController1 = [[[YourViewController alloc] init] initWithNibName:@"YourViewController" bundle:nil];
 UINavigationController *viewController1 =  [[UINavigationController alloc] initWithRootViewController:tmpViewController1]; 
```

# python - 从文本文件 web2py 中读取

> ID：14015128
> 
> 赞同：1
> 
> 时间：2012-12-23T22:14:38.867
> 
> 标签：python, file, web2py

我遇到了 web2py 的问题。我在 modules 文件夹中有一个名为 defVals.txt 的文本文件。`open("defVals.txt")`我尝试使用（在与 defVals.txt 相同的目录中的模块中）读取它，但我收到错误：

```
Traceback (most recent call last):
 File "/home/jordan/web2py/gluon/restricted.py", line 212, in restricted
   exec ccode in environment
File "/home/jordan/web2py/applications/randommotif/controllers/default.py", line 67,     in <module>
 File "/home/jordan/web2py/gluon/globals.py", line 188, in <lambda>
self._caller = lambda f: f()
File "/home/jordan/web2py/applications/randommotif/controllers/default.py", line 13, in index
  defaultData = parse('defVals.txt')
File "applications/randommotif/modules/defaultValParser.py", line 6, in parse
 lines = open(fileName)
IOError: [Errno 2] No such file or directory: 'defVals.txt' 
```

我究竟做错了什么？我应该在哪里放置 defVals.txt

我正在使用 Ubuntu 12.10

谢谢，

约旦

更新：

这是 defaultValParser.py 的源代码：

```
import itertools
import string
import os
from gluon import *
from gluon.custom_import import track_changes; track_changes(True)

#this returns a dictionary with the variables in it.
def parse(fileName):
    moduleDir = os.path.dirname(os.path.abspath('defaultValParser.py'))
    filePath = os.path.join(moduleDir, fileName)
    lines = open(filePath, 'r')
    #remove lines that are comments. Be sure to remove whitespace in the beginning and end of line
    real = filter(lambda x: (x.strip())[0:2] != '//', lines)
    parts = (''.join(list(itertools.chain(*real)))).split("<>")
    names = map(lambda x: (x.split('=')[0]).strip(), parts)
    values = map(lambda x: eval(x.split('=')[1]), parts)
    return dict(zip(names, values)) 
```

如果我导入它并从终端调用它（假设我注释掉胶子导入）它工作正常，但如果我从 web2py 控制器调用它，它会完全失败：

```
Traceback (most recent call last):
  File "/home/jordan/web2py/gluon/restricted.py", line 212, in restricted
   exec ccode in environment
  File "/home/jordan/web2py/applications/randommotif/controllers/default.py", line 71, in <module>
  File "/home/jordan/web2py/gluon/globals.py", line 188, in <lambda>
  self._caller = lambda f: f()
  File "/home/jordan/web2py/applications/randommotif/controllers/default.py", line 17, in index
  defaultData = parse('defVals.txt')
  File "applications/randommotif/modules/defaultValParser.py", line 6, in parse
 IOError: [Errno 2] No such file or directory: 'defVals.txt' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:17:18.283

使用基于`__file__`模块路径的绝对路径：

```
moduledir = os.path.dirname(os.path.abspath('__file__'))

# ..
defaultData = parse(os.path.join(moduledir, 'defVals.txt')) 
```

`__file__`是当前模块的文件名，使用`.dirname()`of 可以为您提供模块所在的目录。我曾经`.abspath()`确保您始终拥有模块文件的绝对路径，避免出现一些您可能遇到的边缘情况。

`moduledir`是您模块中的全局变量。

# mysql - 根据其他 2 个相关表更新表

> ID：14015129
> 
> 赞同：-1
> 
> 时间：2012-12-23T22:14:44.367
> 
> 标签：mysql, relational-database

我有一个奇怪的问题。我得到了一些 CSV 格式的城市、地区和国家的数据，并将它们导入 MySQL 表中。

我有 3 个表和它们的字段

```
1\. City    : id, name, country_code, region_number
2\. Region  : region_number, country_code, name
3\. Country : country_code, name 
```

现在事情变得有点复杂了，因为我在区域表中添加了一个自动生成的 id 列，所以国家 y 的区域 x 将是唯一的。

问题是：现在我正在尝试更新城市字段 region_number 以保存这个唯一值（区域中的新 id 列），这样我就可以建立关系城市->区域。

关系 region->country 或 country->region 是可以的。

是否可以编写一个更新查询来使用正确的值更新城市 region_code（或填充一些新列，例如 region_id）？

如果不是查询，我可以使用什么来将正确的值输入到城市表中？

我有大约 300 万条记录！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:25:17.347

如果我理解正确，我认为您正在寻找这样的东西：

```
UPDATE
  City inner join Region
  on City.country_code = Region.country_code
     and City.region_number = Region.region_number
SET
  City.new_column = Region.id 
```

但是，由于 City 和 Region 之间已经存在关系，我不确定这是正确的做法，因为它会使表格不规范化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T22:33:05.600

> 现在我正在尝试更新城市字段 region_number 以不保存此唯一值

您可以做到这一点的唯一方法是 region_number 唯一标识每个区域 - 如果已经是这种情况，那么您通过创建冗余引用来浪费您的时间。虽然坦率地说，如果这些确实是您的表结构，那么没有理由使用代理键。如果没有理由使用代理键，那么 region 和 country 表就是多余的。

# c++ - c++ 单元测试器中的自定义断言

> ID：14015131
> 
> 赞同：1
> 
> 时间：2012-12-23T22:15:08.430
> 
> 标签：c++, unit-testing, macros, assert

我正在开发一个 c++ 单元测试器（主要是作为练习），并且对我的实现有一些疑问。我希望能够重载我的自定义断言，因此我决定将它们实现为包装在命名空间中的函数。

我目前的实现如下：

```
Tester.h
#include <string>

#define INFO __FILE__, __LINE__

namespace Tester
{
    void Assert(char const* input, char const* file_path, int line_number, std::string error_message);
    ...more overloaded Asserts and some Log functions...
} 
```

当我调用该函数时：

```
#include "Tester.h"
...code...
    Tester::Assert(false, INFO, "Some message");
...code... 
```

这行得通，但我不确定“信息”宏是否是好的做法。我欢迎有关此实现的所有建议和指示，如果它没有意义，请随时告诉我，我应该做一些完全不同的事情；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:21:59.463

INFO 作为一个宏似乎非常好。我更喜欢的另一种选择是有一个宏

```
#define TEST_ASSERT(condition, message) Tester::Asssert(condition, __FILE__, __LINE__, message) 
```

或类似的东西。

如果你有不同数量的参数，这样的事情可能会起作用：

```
#define TEST_ASSERT(condition, ...) Tester::Asssert(condition, __FILE__, __LINE__, __VA_ARGS__) 
```

假设您的编译器足够新，那就是。

# asp.net-mvc - 用于门控登记的无障碍工具

> ID：14015133
> 
> 赞同：1
> 
> 时间：2012-12-23T22:15:15.910
> 
> 标签：asp.net-mvc, tfs, accessibility, wcag

我正在寻找可访问性检查的工具（我正在使用的系统应该符合 WCAG2AA）。目前我们使用来自[squiz labs](http://squizlabs.github.com/HTML_CodeSniffer/)的代码嗅探器，我们手动对我们的页面运行它。

我想更进一步，将它作为 TFS 门控签入的一部分。我知道这不是微不足道的（我们使用 ASP.NET MVC），并且需要一个浏览器引擎来生成 html 作为同一过程的一部分。也可能存在必须添加抑制等的情况。

如果有人能指出我正确的方向，或者可能已经有一个工具（在这种情况下可能是工具的组合），我将不胜感激，我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:48:03.280

可访问性检查不能完全由自动工具进行（例如，它需要人来确定这些标题在页面中是否有意义），但它对于您必须运行的一半测试仍然有很大帮助。

我知道：

*   [Tanaguru](http://tanaguru.org/en/content/welcome-tanaguruorg)，一个可以安装（Java Tomcat 的东西）或作为服务运行的开源解决方案。它将检查您的源代码（在任何 DOM 修改之前）来自[Accessiweb 参考列表](http://www.braillenet.org/accessibilite/referentiel-aw21-en/index.php)的许多测试，这是 WCAG2.0的可理解（双关语）实现。*银*级相当于 AA 一致性级别。
    对于 Tanaguru 服务，如果您的服务器是私有的，您可以提供测试登录名和密码；对于独立代码，作为开源，您可以按照您想要的方式将其添加到您的开发过程中。您可以在这里测试 Tanaguru：http://my.tanaguru.com/?lang= [en](http://my.tanaguru.com/?lang=en)
*   [WAVE 工具栏](http://wave.webaim.org/toolbar)将针对您浏览器中的代码运行。这是一个 Firefox 扩展，请注意[http://wave.webaim.org/](http://wave.webaim.org/)将检查从服务器发送的 HTML 代码，而不是在浏览器中（区别在于 JS 修改 DOM）
*   [Opquast](https://checklists.opquast.com/en/)既是一个关于质量的清单（可访问性和许多其他无关的东西，至少检查一次是值得的；）和付费服务：Opquast 报告。您可以根据 Opquast 清单或[可访问性第一步](https://checklists.opquast.com/en/accessibilityfirststep)和[第二步](https://checklists.opquast.com/en/accessibilitysecondstep)运行您的页面（这不是 WCAG 2.0，它是关于那些非常明显的错误，您应该在进一步改进可访问性之前修复）。
    Opquast 报告将结果导出为 PDF、DOC/ODT 以及 CSV，以便您可以将其与您自己的自动化测试环境一起使用。
    编辑 2014：**[Opquast 桌面](https://desktop.opquast.com/en/)**是一个 Firefox 扩展程序，它将在您的浏览器中测试页面（Win8 有一些怪癖，如果仍然是这种情况，请耐心等待，并且他们不在 AMO 上，因为 Mozilla 会在一夜之间改变他们的要求......但个人了解并拥有为 Opquast 背后的优秀团队工作，我相信他们）
*   [K. Groves 的Tenon.io](http://tenon.io)是我迄今为止几乎没有测试过的一项新服务，但值得一试

相关文章：[http](http://webaim.org/articles/freetools/) ://webaim.org/articles/freetools/ （如果它没有提到 WCAG 2.0，那么它已经很老了，但格式等仍然是一个有趣的读物）

# android - 新版 Google Play 开发者控制台中的扩展文件

> ID：14015134
> 
> 赞同：17
> 
> 时间：2012-12-23T22:15:30.627
> 
> 标签：android, apk, google-play, expansion

我正在尝试使用开发者控制台将我的应用上传到 Google Play。大约一周前，他们已经做到了，这样每个应用程序都有一个唯一的密钥字符串。您必须使用新的开发者控制台来获取您的应用程序的密钥。问题是显然没有办法在新的开发者控制台中上传我的应用程序需要的扩展文件。那么如何获取我的密钥，并将我的带有扩展文件的 apk 上传到 Google Play？

使用旧控制台上传扩展文件很简单，您只需在上传 apk 文件的同时上传即可。

我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-19T09:17:40.477

这是 Google 开发者控制台的一个已知[问题](https://support.google.com/googleplay/android-developer/answer/2481797?hl=en)。

您无法将扩展文件添加到您的第一个 APK。
因此，如果您是第一次上传，则需要生成第二个具有更高 versionCode 的 APK 并再次上传。只有这样，您才能选择在开发者控制台中添加您的扩展文件。

来自谷歌文档：

> 注意：如果您要上传新应用，则无法将扩展文件添加到您上传的第一个 APK 文件中。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-06-06T11:55:08.257

2018 答案：您的 obb 文件的上传对话框隐藏在`+`您的 apk 右侧的标志上。

[![在此处输入图像描述](../Images/df6f20fb9418d45f23e91de8a7b1a346.png)](https://i.stack.imgur.com/pAF94.gif)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-07T10:34:44.170

可以在新的 Google Play 中添加扩展包（obb 文件）。

当您选择一个应用程序时，您需要切换到**“高级模式”**。一旦你上传了你的apk文件，一个额外的字段**“扩展文件”**将变得可见。在那里你必须上传你的obb文件。（见截图）

![在此处输入图像描述](../Images/9697648ab4e01da61855e68c776673f8.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-25T20:49:22.033

您现在可以在新控制台中上传扩展文件，您只需添加一个初始虚拟 .apk。在后续的上传中，它会让你设置扩展文件。您根本不必离开新视图。希望有帮助

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-10T18:51:22.017

在新的 google play 控制台上它非常简单。

上传您的 apk 后，它将显示在上传部分下，如下所示：

[![](../Images/60027f5fab35fe1257a39ab0535d61cf.png)](https://i.stack.imgur.com/DhCtz.png)

在您的右侧，您应该会看到经典的三个点，这将显示此窗口：

[![](../Images/8fd1cf663a946573c92636af9ed3ed62.png)](https://i.stack.imgur.com/dTwPw.png)

点击“上传扩展文件（.obb）”然后就可以了

[![](../Images/33a294d771a326f7c1e14b6ce476efb9.png)](https://i.stack.imgur.com/KPuAY.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-03T12:49:07.343

[新的开发者控制台预览](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=2789662)

“以下功能在新的开发者控制台中尚不支持，如果您需要使用这些功能，您可以随时点击“切换回”来使用旧的开发者控制台。

*   •APK 扩展文件
*   •多APK支持
*   •公告
*   •IE9支持
*   •合作伙伴渠道

我们正在努力添加这些功能以及更多功能，敬请期待！”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-19T20:03:01.557

对于使用 Apportable 将您的 iOS 版本移植到 Android 的任何人，您需要确保您已在配置 json 文件中`"expansion_files"`列出。`FEATURES`

如果没有这个，在将 APK 上传到 Google Play 开发控制台后，您将不会看到上传 OBB 文件的选项。

# css - 动画需要哪些前缀？

> ID：14015135
> 
> 赞同：0
> 
> 时间：2012-12-23T22:15:32.413
> 
> 标签：css, css-animations

我问了我一个问题。当我使用 -webkit- 前缀（或另一个前缀）创建动画时，我只需要使用这个前缀编写属性，或者我必须添加所有前缀。

例如

```
@-webkit-keyframes bounce {
    0% {
        -webkit-transform: scale(0);
    }
    100% {
        -webkit-transform: scale(1);
    }
} 
```

或者

```
@-webkit-keyframes bounce {
    0% {
        -webkit-transform: scale(0);
        -moz-transform: scale(0);
        -ms-transform: scale(0);
        -o-transform: scale(0);
        transform: scale(0);
    }
    100% {
        -webkit-transform: scale(1);
        -moz-transform: scale(1);
        -ms-transform: scale(1);
        -o-transform: scale(1);
        transform: scale(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:21:07.503

因为只有 WebKit 浏览器可以应用`@-webkit-keyframes`规则，所以在这些规则中包含任何其他前缀没有任何意义。

您希望包含`@keyframes`规则的其他前缀，而不是其中的属性。里面的属性在适当的地方使用匹配的前缀：

```
@-webkit-keyframes bounce {
    0% { -webkit-transform: scale(0); }
    100% { -webkit-transform: scale(1); }
}

@-moz-keyframes bounce {
    0% { -moz-transform: scale(0); }
    100% { -moz-transform: scale(1); }
}

@-o-keyframes bounce {
    0% { -o-transform: scale(0); }
    100% { -o-transform: scale(1); }
}

@keyframes bounce {
    0% { transform: scale(0); }
    100% { transform: scale(1); }
} 
```

（没有`@-ms-keyframes`，也没有必要用`-ms-transform`in `@keyframes`。）

# javascript - Rails 3.1 中的第 3 方脚本缓存

> ID：14015137
> 
> 赞同：11
> 
> 时间：2012-12-23T22:15:55.987
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, nginx

我有一个脚本 3rd 方网站正在使用：`/assets/script.js`. 出于显而易见的原因，我不能在每次部署时都要求他们更改链接以指向脚本的最新指纹版本。我遇到了一些缓存问题，用户仍然可以看到旧版本的`/script.js`. 有没有办法让缓存直接消失`script.js`而不是 `script-9dc5afea3571ba2a883a72b0da0bb623.js`？

**更多信息**：Passenger + Nginx 上的 Rails。寻找提供`script.js`文件的方法，而不是指纹文件并在每次部署时使缓存无效。

我考虑过根据部署 git 修订添加 ETag，但不知道如何执行此操作。Nginx 没有内置的 ETags 支持。有不受支持的旧第三方模块可以执行此操作。我可以使用`add_header Etag="something"`它，但是如何在那里添加 git 版本。

还有其他想法和选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T03:44:07.990

如果您有一个名称是公共接口一部分的脚本，那么您需要明确地开始对该脚本进行版本控制，并为旧客户端保留旧版本。

例如 /assets/script.1.0.js、/assets/script.1.1.js 等

关键部分是您需要保留旧的，并且代码不会在没有明确更改名称的情况下更改。Rails 资产管道无法为您执行此操作，因为通常只有最新版本的脚本保持最新。

与所有公共接口一样，与仅用于内部的脚本相比，您将需要花费更多时间来管理此过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T20:59:11.573

我建议使用 ETag。将 ETag 标头添加到您的响应 [http://en.wikipedia.org/wiki/HTTP_ETag](http://en.wikipedia.org/wiki/HTTP_ETag)

对于脚本的每个版本，将 ETag 标头设置为不同的唯一字符串。这将确保浏览器在您部署新版本时获得新版本的脚本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T12:51:29.897

nginx is able to generate etags in the latest version: [http://nginx.org/en/docs/http/ngx_http_core_module.html#etag](http://nginx.org/en/docs/http/ngx_http_core_module.html#etag)

I've also seen the configuration below here: [https://serverfault.com/questions/426260/nginx-cache-control](https://serverfault.com/questions/426260/nginx-cache-control)

```
location /static {
  alias /opt/static/blog/;
  access_log off;
  etags on;
  etag_hash on;
  etag_hash_method md5;
  expires     1d;
  add_header Pragma "public";
  add_header Cache-Control  "public, must-revalidate, proxy-revalidate";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T18:42:08.557

如果您使用 Capistrano，您可以编写一个任务，在您的资产预编译后将脚本从 Public/assets 复制到 Public 中的另一个目录（即 Public/scripts）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T04:17:51.450

我用于更新资产的是：

1.  增加喜欢`config.assets.version`_`config/application.rb`

    ```
    #Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.1' 
    ```

2.  `bundle exec rake assets:precompile RAILS_ENV=production RAILS_GROUPS=assets`

3.  应用重启，清空网络服务器缓存（如果有）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-28T14:00:54.730

遵循 ETag 的建议，您可能会发现这个 gem 很有用：[bust_rails_etags](https://github.com/n8/bust_rails_etags)。它允许您在每次部署时设置用于生成 ETag 的密钥，这样，每次部署您的应用程序时，您的 ETag 都会更改（因此缓存的脚本将失效）。作者使用 Heroku 版本号的示例作为每次部署时更改的密钥。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-15T14:56:05.233

**您想要第三方网站的非指纹资产 URL。** 例如：assets/public_api.js

有一些插件或 gem 将指定的资产排除在指纹之外。然而，rails 以一种也创建非指纹文件的方式改变了预编译过程。因此这不是问题。更多信息[在这里。](https://github.com/rails/rails/pull/3161)

**当资产没有指纹时，如何确保您的客户正在加载最新部署的脚本？**

我建议[youTube 用来公开他们的API](https://developers.google.com/youtube/iframe_api_reference)的解决方案。基本上你所有的 assets/public_api.js 都是这样做的，它将另一个脚本标签注入到 dom 中。注入的那个会加载实际的 API 代码。现在你的 assets/public_api.js 变成 assets/public_api.js.erb 并且看起来像这样：

```
var tag = document.createElement('script');
tag.src = "<%=asset_path('/assets/javascripts/acctual_api')%>";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); 
```

请注意如何**将 tag.src**设置为/assets/javascripts/acctual_api的**当前指纹路径。**这样，您的用户将始终获得最新编译的 acctual_api 脚本。

**如何更新 assets/public_api.js 的 ETAG？**

我想您使用 Capistrano 或类似的基于配方的部署解决方案。也许您可以添加一个部署步骤，在重新启动之前更新服务器配置文件。它应该只是更新：

```
add_header Etag="update_me_on_deploy" 
```

请注意，即使采用这种方法，您仍应使用版本化的 (assets/public_api.0.js) 公共脚本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-15T19:00:26.770

那么您可以删除文件的指纹：

```
asset_path('script.js', :digest => false) 
```

希望能帮助到你

或者，您可以根据需要使用此 gem：[https ://github.com/sophlenz/digestion](https://github.com/spohlenz/digestion)

但是：Rails 资产管道现在可以编译带有和不带有摘要的资产文件。

因此，在您生成资产后，通常您会将 script.js?xxxxx 和 script.js 放入您的 public/assets 文件夹。

# javascript - Javascript ' on.("load", ' 不工作

> ID：14015138
> 
> 赞同：0
> 
> 时间：2012-12-23T22:16:15.853
> 
> 标签：javascript, jquery

```
jQuery(document).ready(function() {
    jQuery('#submit').click(function() {    jQuery("#LoadingImage").show();
        jQuery('#imgRESULT').html('<img id="image1" src="http://johndoe.com/foo.php?username1=' + jQuery('input[name=username1]').val() + '&amp;username2='+ jQuery('input[name=username2]').val() +    '" >');
    });

$('#image1').on("load", function() {
    $("#LoadingImage").hide();
});}); 
```

事情是加载图像的div，生成的图像生成时不会隐藏。

关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:21:05.983

由于`load`事件不会冒泡，因此您不能在此处使用*事件委托*（关于动态插入的元素的标准建议是什么）

所以你最好的方法是直接将加载事件放在新创建的*图像节点*上。

```
jQuery('#imgRESULT').empty().append($('<img>', {
    id:    'image1',
    src:    'http://johndoe.com/foo.php?username1=' + jQuery('input[name=username1]').val() + '&amp;username2='+ jQuery('input[name=username2]').val(),
    load:   function() {
        $("#LoadingImage").hide();
    }
})); 
```

# c++ - 'auto a_class::f(...) -> T const' 在语法中是否模棱两可？

> ID：14015142
> 
> 赞同：25
> 
> 时间：2012-12-23T22:17:30.613
> 
> 标签：c++, c++11, trailing-return-type

下面的成员函数原型应该如何在 C++11 中解释？

```
class C {
 public:
  auto f(...) -> T const;
} 
```

在我看来，它既可以是 C 类的 const 成员函数，也可以是返回 T 类型的 const 值的非 const 成员函数。

我知道我可以把函数写成

```
T const f(...); 
```

或者

```
T f(...) const; 
```

但是，我想与我声明函数的方式保持一致，所以我决定`auto f(...) -> RetType`到处使用新的 C++11 方式。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-23T22:23:17.140

trailing-return-type 出现*在*非静态成员函数的 cv 和 ref 限定符之后。这意味着问题中的示例与 相同`T const f(...);`。

`§8.4.1 [dcl.fct.def.general] p2`

> 函数定义中的声明符应具有以下形式
> 
> `D1`(*参数声明子句*) *cv-qualifier-seq [opt] ref-qualifier [opt] exception-specification [opt] attribute-specifier-seq [opt] trailing-return-type [opt]*

要声明`const`成员函数，您可以编写`auto f(...) const -> T const;`.

# php - 用于集成 PayPal IPN 的示例 php 代码

> ID：14015144
> 
> 赞同：5
> 
> 时间：2012-12-23T22:17:48.570
> 
> 标签：php, paypal, paypal-ipn

有谁知道如何将我网站上的 PayPal IPN 与 PHP 集成？收到付款后，我需要在我的数据库中插入一条记录。但我在 PayPal 开发者网站上几乎找不到这方面的示例代码。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T22:32:03.007

这是`php`来自 PayPal 开发者网站的 IPN 示例代码。我已通过此代码末尾的注释标记了数据库 INSERT 的确切位置：

```
<?php

// STEP 1: Read POST data

// reading posted data from directly from $_POST causes serialization 
// issues with array data in POST
// reading raw POST data from input stream instead. 
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
   if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
   } else {
        $value = urlencode($value);
   }
   $req .= "&$key=$value";
}

// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://ipnpb.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];

    // <---- HERE you can do your INSERT to the database

} else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
}
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-27T13:19:35.860

Paypal 发布了一个 Github 存储库，其中包含 IPN 侦听器的示例代码。我强烈建议根据您的首选语言检查和测试这些内容。

您可以在以下位置查看 Github 存储库：[https ://github.com/paypal/ipn-code-samples](https://github.com/paypal/ipn-code-samples)

您可以在下面找到 IPN PHP 类：

```
<?php

class PaypalIPN
{
    /** @var bool Indicates if the sandbox endpoint is used. */
    private $use_sandbox = false;
    /** @var bool Indicates if the local certificates are used. */
    private $use_local_certs = true;

    /** Production Postback URL */
    const VERIFY_URI = 'https://ipnpb.paypal.com/cgi-bin/webscr';
    /** Sandbox Postback URL */
    const SANDBOX_VERIFY_URI = 'https://ipnpb.sandbox.paypal.com/cgi-bin/webscr';

    /** Response from PayPal indicating validation was successful */
    const VALID = 'VERIFIED';
    /** Response from PayPal indicating validation failed */
    const INVALID = 'INVALID';

    /**
     * Sets the IPN verification to sandbox mode (for use when testing,
     * should not be enabled in production).
     * @return void
     */
    public function useSandbox()
    {
        $this->use_sandbox = true;
    }

    /**
     * Sets curl to use php curl's built in certs (may be required in some
     * environments).
     * @return void
     */
    public function usePHPCerts()
    {
        $this->use_local_certs = false;
    }

    /**
     * Determine endpoint to post the verification data to.
     *
     * @return string
     */
    public function getPaypalUri()
    {
        if ($this->use_sandbox) {
            return self::SANDBOX_VERIFY_URI;
        } else {
            return self::VERIFY_URI;
        }
    }

    /**
     * Verification Function
     * Sends the incoming post data back to PayPal using the cURL library.
     *
     * @return bool
     * @throws Exception
     */
    public function verifyIPN()
    {
        if ( ! count($_POST)) {
            throw new Exception("Missing POST Data");
        }

        $raw_post_data = file_get_contents('php://input');
        $raw_post_array = explode('&', $raw_post_data);
        $myPost = array();
        foreach ($raw_post_array as $keyval) {
            $keyval = explode('=', $keyval);
            if (count($keyval) == 2) {
                // Since we do not want the plus in the datetime string to be encoded to a space, we manually encode it.
                if ($keyval[0] === 'payment_date') {
                    if (substr_count($keyval[1], '+') === 1) {
                        $keyval[1] = str_replace('+', '%2B', $keyval[1]);
                    }
                }
                $myPost[$keyval[0]] = urldecode($keyval[1]);
            }
        }

        // Build the body of the verification post request, adding the _notify-validate command.
        $req = 'cmd=_notify-validate';
        $get_magic_quotes_exists = false;
        if (function_exists('get_magic_quotes_gpc')) {
            $get_magic_quotes_exists = true;
        }
        foreach ($myPost as $key => $value) {
            if ($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) {
                $value = urlencode(stripslashes($value));
            } else {
                $value = urlencode($value);
            }
            $req .= "&$key=$value";
        }

        // Post the data back to PayPal, using curl. Throw exceptions if errors occur.
        $ch = curl_init($this->getPaypalUri());
        curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
        curl_setopt($ch, CURLOPT_SSLVERSION, 6);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);

        // This is often required if the server is missing a global cert bundle, or is using an outdated one.
        if ($this->use_local_certs) {
            curl_setopt($ch, CURLOPT_CAINFO, __DIR__ . "/cert/cacert.pem");
        }
        curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array(
            'User-Agent: PHP-IPN-Verification-Script',
            'Connection: Close',
        ));
        $res = curl_exec($ch);
        if ( ! ($res)) {
            $errno = curl_errno($ch);
            $errstr = curl_error($ch);
            curl_close($ch);
            throw new Exception("cURL error: [$errno] $errstr");
        }

        $info = curl_getinfo($ch);
        $http_code = $info['http_code'];
        if ($http_code != 200) {
            throw new Exception("PayPal responded with http code $http_code");
        }

        curl_close($ch);

        // Check if PayPal verifies the IPN data, and if so, return true.
        if ($res == self::VALID) {
            return true;
        } else {
            return false;
        }
    }
} 
```

IPN 侦听器示例：

```
<?php namespace Listener;

require('PaypalIPN.php');

use PaypalIPN;

$ipn = new PaypalIPN();

// Use the sandbox endpoint during testing.
$ipn->useSandbox();
$verified = $ipn->verifyIPN();
if ($verified) {
    /*
     * Process IPN
     * A list of variables is available here:
     * https://developer.paypal.com/webapps/developer/docs/classic/ipn/integration-guide/IPNandPDTVariables/
     */
}

// Reply with an empty 200 response to indicate to paypal the IPN was received correctly.
header("HTTP/1.1 200 OK"); 
```

# iphone - 在横向模式下制作 iOS 应用

> ID：14015148
> 
> 赞同：1
> 
> 时间：2012-12-23T22:18:21.753
> 
> 标签：iphone, ios

我有一个针对 iOS 5.1 的完全空的单视图应用程序，我试图让该应用程序仅在横向模式下工作。

在项目摘要屏幕中，我选择了横向选项和取消选择纵向选项。

我在 info.plist 中验证了只出现横向。

在情节提要中，我选择了视图控制器转到模拟指标并选择横向作为方向。

当应用程序最初打开时，会以横向模式显示黑屏。当显示纯白色视图时，它处于纵向模式。我已经阅读了许多帖子，但无法找到解决此问题的方法。

我觉得我忽略了一些简单的事情，但是在过去，当我想在横向模式下制作应用程序时，我只是简单地选择了横向并且它起作用了。

任何建议将不胜感激。

```
@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:25:07.657

您是否在根视图控制器中实现了以下功能？

```
 - (NSUInteger)supportedInterfaceOrientations
    {
        return UIInterfaceOrientationMaskLandscapeLeft;
    } 
```

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)

# python - Python：线程不会启动

> ID：14015152
> 
> 赞同：0
> 
> 时间：2012-12-23T22:19:12.407
> 
> 标签：python, multithreading

我有一个继承自`threading.Thread`. 由于某种原因，线程不想启动。

这是我的代码：

```
import time,threading,re,socket

class PyWatch(threading.Thread):

    filename = ""

    def __init__(self,filename):
        threading.Thread.__init__(self)
        print "initiating..."
        self.filename = filename

     def run(self):
        print "running..."
        thefile = open (self.filename)
        thefile.seek(0,2)      # Go to the end of the file
        while True:
                line = thefile.readline()
                if not line:
                     time.sleep(0.1)    # Sleep briefly
                     continue
                yield line
                self.process(line)

    def process(self,line):
        ip =  self.filterIPFromLine(line)
        print ip                

    def filterIPFromLine(self,line):
        ip = None
        if '/var/ossec/active-response/bin/firewall-drop.sh' in  str( line ).lower():
            ip = re.match( "(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])" )

            try:
                socket.inet_aton(ip[0])
                ip = ip[0]
            except socket.error:
                pass
        return ip

tom = PyWatch('example.log')
tom.start() 
```

代码正在运行，它没有返回错误，但由于某种原因它永远不会到达该`run()`部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T22:56:05.477

您需要删除该行：

```
 yield line 
```

这导致`run()`不，好吧......运行！不清楚为什么它首先存在。

根据[Python 文档](http://docs.python.org)，[该`yield`表达式](http://docs.python.org/2/reference/expressions.html#yield-expressions)仅在定义生成器函数时使用，**当调用生成器函数时，它返回一个称为生成器的迭代器**。然后该生成器控制生成器函数的执行。**当调用生成器的方法之一时开始执行。**

由于您没有调用任何生成器方法（例如`next()`），因此该函数不会执行。

这是一个快速演示：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> def fun():
...     print 'Starting'
...     for i in range(10):
...             yield i
... 
>>> fun()
<generator object fun at 0x10678c460>
>>> _.next()
Starting
0
>>> 
```

对于“ [yield](https://stackoverflow.com/a/231855/78845) ”关键字在 Python 中的[作用是什么？](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T22:24:56.547

我无法重现该问题：

当我运行您的代码时，我得到：

```
initiating...
running... 
```

这表明 run() 方法确实执行正确。

您是否在代码之上正确导入了线程模块？

```
import threading 
```

# objective-c - 缩略图存储策略

> ID：14015153
> 
> 赞同：3
> 
> 时间：2012-12-23T22:19:19.073
> 
> 标签：objective-c, ios, thumbnails, photo-gallery

我正在开发需要多个缩略图图像的“照片”类型演示的应用程序的一部分。全尺寸图像很大，每次生成缩略图都需要很长时间，所以我打算缓存缩略图。

创建缩略图后，我很难确定如何最好地将缩略图存储在文件系统上。我能想到几种可能性，但我不喜欢其中任何一种：

*   将缩略图保存在与原始文件相同的目录中，并在文件名中添加 _Thumb（image.png 和 image_Thumb.png）。这会导致目录混乱，我认为性能会成为一个问题，因为一次读取这么多不同的文件要加载。
*   将缩略图保存在自己的子目录中，文件名与原始文件名相同。我认为这稍微干净一些，但我仍在打开许多不同的文件。
*   将所有缩略图保存到缩略图文件中。我认为这通常在 Windows 和 OS X 中完成？我喜欢这个想法，因为我可以打开一个文件并从中读取多个缩略图，但我不确定如何将它们全部存储在同一个文件中并将它们与原始文件相关联。 **编辑：**我想过使用`NSKeyedArchiver/unArchiver`，但据我所知，只要添加/删除缩略图，我就必须重新创建整个档案。也许我忽略了一些东西？
*   **编辑**将缩略图存储在核心数据/sqlite 数据库文件中。多年来，我听说将图像存储在数据库文件中是一个坏主意，因为性能缓慢，并且可能需要（相对）较长时间才能完成写入操作导致数据库损坏。有没有人有使用这种方式的经验？

关于最佳方法的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:10:49.027

我会选择第二种选择。在 iDevices 上，您使用闪存。与 HDD 相比，访问许多文件的性能损失非常低。您还可以在内存中缓存一些内容，以防止过于频繁地读取同一个文件。[SDWebImage](https://github.com/rs/SDWebImage)缓存机制包含一个很好的示例如何做到这一点。

第三种选择 - 为此使用一个文件可能意味着使用数据库文件。如果您存储未压缩的数据，您可以在那里获得一些性能改进。您需要进行一些性能测试，因为加载更多数据（拇指的未压缩形式）可能会减慢速度，从而节省 CPU 以获取更多存储访问权限。

组合方法是将缩略图存储为文件，但采用未压缩格式（不是 .jpg、.png 等）

第四个值得考虑的选项，只要缩略图相当小：将它们保存在 CoreData 中。

# mysql - MySQL存储过程将库存移动转化为库存

> ID：14015157
> 
> 赞同：2
> 
> 时间：2012-12-23T22:20:12.873
> 
> 标签：mysql, stored-procedures

让我们从这张表开始：

```
CREATE  TABLE IF NOT EXISTS `resourceMovement` (
  `resourceID` INT(4) UNSIGNED NOT NULL ,
  `movementDateTime` DATETIME NOT NULL ,
  `movementQuantity` INT(11) UNSIGNED NOT NULL ,
  `fromLocationID` INT(4) UNSIGNED NULL ,
  `fromIndividualID` INT(11) UNSIGNED NULL ,
  `fromDeptID` INT(4) UNSIGNED NULL ,
  `toLocationID` INT(4) UNSIGNED NULL ,
  `toIndividualID` INT(11) UNSIGNED NULL ,
  `toDeptID` INT(4) UNSIGNED NULL ,
  `lastUpdated` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ,
  PRIMARY KEY (`resourceID`, `movementDateTime`, `movementQuantity`) ,
  [ List of foreign key constraints. ] 
```

这会随着时间的推移跟踪特定数量的特定资源 ID 如何从一个部门/位置/人员移动到另一个部门/位置/人员。

我想做的是创造一个……东西。循环遍历 toLocationID/toIndividualID/toDeptID 值并为与这些目的地关联的每个 resourceID 生成运行清单的过程或触发器或视图。

我什至在 MySQL 存储过程方面还不够好，无法有效地做到这一点。

我想我可以创建三个正在运行的库存表，每个用于部门、位置和人员，并有一个触发器来随着移动表的更新而更新这些表。常规表或临时表会更好吗？

细节问题不断出现。所以，我将只留下一般性问题：扫描审核库存移动的表以确定实际运行库存的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:47:02.250

我过去曾实施过类似的系统。将它分成几张桌子似乎是最好的（对我来说）。

> **资源**
> - 资源 id
> - 资源描述
> - 数量
> 
> **更改**
> - 更改 ID
> - 更改日期/时间戳
> - 更改类型
> - 资源 ID
> - 目标 ID
> - 数量
> 
> **目的地**
> - 目的地 id
> - 目的地类型

更改类型将包括：
- 来自分销商的新库存
- 将某些部分分配给个人/地点/事件
- 丢弃库存
- 保修更换
- 销售

目的地将包括：
-人/地点/事件-（在您的情况下，它将是部门、人员和地点）

要了解您有多少（*总计*）库存：

> 从资源中选择

*要了解给定目的地*有多少：

> 从资源中选择加入更改加入目的地标记<=有趣的事件

要查找给定项目的*历史记录：*

> 从资源 = 的更改中选择

因此，您不必运行持续更新..您只需要跟踪更改..它以（合理）标准化的方式发生。

# android - Android：在WiFiSLAM的某些层下，MapView对触摸事件没有反应

> ID：14015158
> 
> 赞同：0
> 
> 时间：2012-12-23T22:20:12.493
> 
> 标签：android, android-mapview

我正在使用室内定位框架 wifislam 并且有一个编程问题。到目前为止，我已经通过WifiSLAM 的interiorLocationView 给出了一个MapView。我正在使用以下代码。

```
 final IndoorLocationManager.Configuration config = new IndoorLocationManager.Configuration();
    indoorLocationManager = new IndoorLocationManager(this, config,
            onServiceConnected, LOCATION_CHOICE);
    indoorLocationView = indoorLocationManager.createLocationView(this,
            GOOGLE_MAPS_API_KEY);

    final View mapContainer = findViewById(R.id.mapcontainer);
    ((ViewGroup) mapContainer).addView(indoorLocationView.getView());
    MapView mapView = indoorLocationView.getGoogleMapView();
    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.pinred);
    itemizedOverlay = new AddItemizedOverlay(drawable, mapView.getContext(), sm);
    mapOverlays.add(itemizedOverlay); 
```

AddItemizedOverlay 有以下方法：

```
@Override
public boolean onTap(GeoPoint geopoint, MapView mapView) {
    mapOverlays.clear();
    // geopoint = mapView.getProjection().fromPixels((int) event.getX(),
    // (int) event.getY());
    // latitude
    if (geopoint != null) {
        this.geopoint = geopoint;
        lat = geopoint.getLatitudeE6();
        // longitude
        lon = geopoint.getLongitudeE6();
        OverlayItem overlayitem = new OverlayItem(geopoint,
                "Task Position", "Derzeitige Position vom Task");
        this.addOverlay(overlayitem);
    }
    return false;
} 
```

我现在的问题是，onTap 方法对触摸设备没有响应或反应。onTouch 事件也没有反应。我认为 wifislam 上面的那些层阻止了我可以到达 MapView。是否有可能到达 MapView，以便我可以在地图上添加一些标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:52:16.663

原因是谷歌地图视图顶部有一个透明视图，它显示了平面图。尝试在 IndoorLocationView#getView 返回的视图上添加一个侦听器，但这可能会搞砸捏缩放/平移控件；您应该仔细检查效果（除非您的标记之一已被点击，否则您可能希望从侦听器返回 false）。

如果这不起作用，您最好联系 WiFiSLAM 支持并提供您的用例，以便他们更新他们的 SDK 以满足您的需求。SDK 网站帮助部分的常见问题解答主题中似乎有一个支持电子邮件地址。

# ios - 苹果应用商店和国家

> ID：14015159
> 
> 赞同：2
> 
> 时间：2012-12-23T22:20:22.917
> 
> 标签：ios, localization, app-store

我正在研究以下问题，但到目前为止还没有多少。希望你能帮助我理解。

1.  假设一个应用发布到美国应用商店；有俄罗斯应用商店设置的用户可以下载吗？
2.  假设应用发布到俄罗斯应用商店；有美国应用商店设置的用户可以下载吗？
3.  是否存在全球可用性之类的东西，或者是否应该将应用程序提交到它应该可用的每个商店？
4.  俄罗斯本地化与向俄罗斯应用商店提交应用版本有何不同？
5.  提交专为非英语受众（在我的情况下为俄语）设计的应用程序的最佳做法是什么？

我愿意阅读相关手册，如果您知道，请指出我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T23:16:29.040

**警告：这个答案很大**

好吧，默认情况下，您的申请会发往所有国家（稍后在帖子中阅读，我将发布所有国家/地区的名称）。如果您没有本地化您的应用程序（例如在俄罗斯，他们会说俄语，并且如果您的应用程序只有英语，那么该应用程序仅对说俄语的用户无用），请购买。

但是，如果我希望我的应用程序仅在美国等地运行怎么办：

*   登录 iTunesConnect 并单击“管理您的应用程序”。

*   选择您的应用并单击“权利和定价”按钮。

*   您可以从此页面选择所需的商店。
*   （如果您在底部看到一行“除非您选择特定商店...”，则您的应用已在所有商店中出售。）

问：如何使用 Xcode 4 本地化我的应用程序？

答：查看此链接：[如何使用 Xcode 4 本地化我的应用程序？](https://stackoverflow.com/questions/5349066/how-to-localize-my-app-with-xcode-4), [http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)和[http://www.youtube.com/watch?v=oMHRYDEbgpg](http://www.youtube.com/watch?v=oMHRYDEbgpg) :)

截至 2012 年 5 月 18 日的国家官方列表：官方列表链接：http: [//support.apple.com/kb/TS3599](http://support.apple.com/kb/TS3599)（向下滚动查看更多国家：）

```
 Algeria 
Angola 
Anguilla 
Antigua & Barbuda 
Argentina 
Armenia 
Australia 
Austria 
Azerbaijan 
Bahamas 
Bahrain 
Barbados 
Belarus 
Belgium 
Belize 
Bermuda 
Bolivia 
Botswana 
Brazil 
British Virgin Islands 
Brunei 
Bulgaria 
Canada 
Cayman Islands 
Chile 
China 
Colombia 
Costa Rica 
Croatia 
Cyprus 
Czech Republic 
Denmark 
Dominica 
Dominican Republic 
Ecuador 
Egypt 
El Salvador 
Estonia 
Finland 
France 
Germany 
Ghana 
Greece 
Grenada 
Guatemala 
Guyana 
Honduras 
Hong Kong 
Hungary 
Iceland 
India 
Indonesia 
Ireland 
Israel 
Italy 
Jamaica 
Japan 
Jordan 
Kazakhstan 
Kenya 
Kuwait 
Latvia 
Lebanon 
Lithuania 
Luxembourg 
Macau 
Macedonia 
Madagascar 
Malaysia 
Mali 
Republic of Malta 
Mauritius 
Mexico 
Montserrat 
Moldova 
Netherlands 
New Zealand 
Nicaragua 
Niger 
Nigeria 
Norway 
Oman 
Pakistan 
Panama 
Paraguay 
Peru 
Philippines 
Poland 
Portugal 
Qatar 
Romania 
Russia 
St. Kitts & Nevis 
St. Lucia 
St. Vincent & The Grenadines 
Saudi Arabia 
Senegal 
Singapore 
Slovakia 
Slovenia 
South Africa 
South Korea 
Spain 
Sri Lanka 
Suriname 
Sweden 
Switzerland 
Taiwan 
Tanzania 
Thailand 
Trinidad & Tobago 
Tunisia 
Turkey 
Turks & Caicos 
Uganda 
United Arab Emirates 
United Kingdom 
United States 
Uruguay 
Uzbekistan 
Venezuela 
Vietnam 
Yemen 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T22:47:30.827

问题 1、2 和 3 相同；-) 当您提交应用程序时，您可以选择它出现在哪个商店。您只需提交一次。

俄语本地化是诸如特定语言之类的东西，如果您在俄罗斯使用俄语设置下载它，就会出现这种情况。如果您的应用程序不支持这一点，那么默认情况下它只会使用英语或您的应用程序使用的任何语言。

# iphone - 将图像上传到 Web 服务会导致图像损坏

> ID：14015167
> 
> 赞同：3
> 
> 时间：2012-12-23T22:22:24.707
> 
> 标签：iphone, ios, web-services, afnetworking

我正在尝试从 iPhone 将图像上传到网络服务，但即使文件成功上传，也无法查看 jpg，它似乎已损坏。

使用以下 c# 代码可以成功上传文件并正常工作：

```
var url = http://myurl.co.uk/services/service.svc/UploadImage?id=108&ext=png;

HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(url);
req.Method = "POST";
req.ContentType = "image/jpeg";

using (var reqStream = req.GetRequestStream())
{
    var bytes = File.ReadAllBytes("C:\\Users\\Chris\\Pictures\\default.png”);
    reqStream.Write(bytes, 0, bytes.Length);
}
HttpWebResponse resp = (HttpWebResponse)req.GetResponse();

Console.WriteLine("HTTP/{0} {1} {2}", resp.ProtocolVersion, (int)resp.StatusCode, resp.StatusDescription); 
```

然而，这是我在 iOS 上尝试的使文件不可见的代码：

获取图像

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    // Resize the image from the camera
    UIImage *scaledImage = [image resizedImageWithContentMode:UIViewContentModeScaleAspectFill bounds:CGSizeMake(_photo.frame.size.width/2, _photo.frame.size.height/2) interpolationQuality:kCGInterpolationHigh];
    // Crop the image to a square (yikes, fancy!)
    UIImage *croppedImage = [scaledImage croppedImage:CGRectMake((scaledImage.size.width -_photo.frame.size.width)/2, (scaledImage.size.height -_photo.frame.size.height)/2, _photo.frame.size.width, _photo.frame.size.height)];
    // Show the photo on the screen
    _photo.image = croppedImage;

    NSData *imgData=UIImageJPEGRepresentation(croppedImage,1);
    NSLog(@"Original size:%d",[imgData length]);
    NSData *smallerImage=UIImageJPEGRepresentation(croppedImage, 0.5);
    NSLog(@"End size:%d",[smallerImage length]);
    imageData = imgData;

    NSString *imageName = @"tempImage.jpg";
    NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
    NSString * documentsDirectoryPath = [paths objectAtIndex:0];

    NSString *dataPath = [documentsDirectoryPath  stringByAppendingPathComponent:imageName];
    NSData* settingsData = UIImageJPEGRepresentation(croppedImage, 0.5);

    [settingsData writeToFile:dataPath atomically:YES];

    [picker dismissModalViewControllerAnimated:YES];
} 
```

上传图片：

```
-(void)uploadImageForOfferID:(NSString *)offerID imageExtention:(NSString *)extension withCompletionBlock:(void(^)(NSError *error))block
{
    NSString *imageName = @"tempImage.jpg";
    NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
    NSString * documentsDirectoryPath = [paths objectAtIndex:0];

    NSString *dataPath = [documentsDirectoryPath  stringByAppendingPathComponent:imageName];
    NSData* imageData = [NSData dataWithContentsOfFile:dataPath];

    AFHTTPClient *client = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:masterURL]];

    NSString *url = [NSString stringWithFormat:@"UploadImage?id=%@&ext=%@", offerID, extension];
    NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:url parameters:nil constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
        [formData appendPartWithFileData:imageData name:@"photo" fileName:@"photo.jpg" mimeType:@"image/jpeg"];
    }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
        NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
    }];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"Complete");
        block(nil);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Failed");
        NSLog(@"FAILED WITH STATUS CODE %d - error description: %@", operation.response.statusCode, error.description);
        block(error);
    }];
    [operation start];
} 
```

此方法首先将图像保存到文件然后上传。我也尝试只上传数据，`NSData *smallerImage=UIImageJPEGRepresentation(croppedImage, 0.5);`但结果相同。

上传时我在这里遗漏了什么吗？

谢谢

编辑 - -

比较模拟器中的文件和上传的文件。模拟器文件是`2,538 bytes (4 KB on disk)`，上传的文件略大`2,698 bytes (4 KB on disk)` 原始模拟器图像显示缩略图，但上传的图像没有！上传的图片可以用 Photoshop 打开，但不能用 Safari 或 Chrome 打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:21:44.113

`image/jpeg`当您在提供的代码中指向的文件实际上是一个`.png`文件并且应该使用时，它是否与您发送带有类型的图像有关`image/png`？

# .net - 将值输入数据库后使用 C#.NET 自动发送短信？

> ID：14015169
> 
> 赞同：0
> 
> 时间：2012-12-23T22:22:42.553
> 
> 标签：.net, c#-4.0

我有一个具有以下结构 Client_Id、M1、M2、M3、M4、M5、Client_Order、Quantity 的表。

现在我的要求是，当客户为披萨、汉堡等下达订单时，我需要从数据库发送自动短信。假设任何客户订购披萨和披萨数量，那么如果我们将值输入到字段中，那么所有值将存储到数据库中，然后我们按下提交或确定按钮，然后单击按钮，应该会在他/她使用 C#.NET 调用的那个号码上向用户或客户端生成一条自动短信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:57:17.247

创建 sql 代理。当用户执行向表中插入内容时调用该代理。在 sql 代理中调用您编写短信发送代码的触发器。因此，当触发器触发时，短信发送会自动执行。

```
[Check below link][1] 
```

# jquery-mobile - 在通过 ajax 获取的 html 文档中加载所有“jquery 移动页面”

> ID：14015175
> 
> 赞同：1
> 
> 时间：2012-12-23T22:23:31.727
> 
> 标签：jquery-mobile

请让我知道如何将 html 文档中的所有“页面”加载到当前页面 dom 中。我尝试使用 $.mobile.loadPage，但只加载了文档的第一个“页面”。我想加载该 html 文档中的所有“页面”。

在谷歌搜索时，我发现了两个插件 ToddThomson/jQuery-Mobile-Subpage-Widget 和一个多视图插件。但是我找不到这两个插件的基本“如何使用”部分。

是否有任何链接显示如何使用这些插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:14:09.013

它可以很容易地完成。

假设您有 2 个 html 文件。第一个有一个 jQM 页面，第二个 html 有两个页面。还可以说第一个 html 页面称为 test1.html，第二个称为 test2.html，test1.html 是要打开的第一个页面。

您唯一需要做的事情（从 test2.html 加载每个页面）是将属性***data-prefetch***添加到通向第二页**的标记链接。**

这是一个例子：

```
<a href="test2.html" class="ui-btn-right" data-prefetch>Next</a> 
```

如果您愿意，请转到我的个人资料并向我发送电子邮件，我将向您发送一个工作示例。

在这里您可以找到有关 jQM 中数据预取的更多信息：http: [//jquerymobile.com/test/docs/pages/page-cache.html](http://jquerymobile.com/test/docs/pages/page-cache.html)

如果您使用 changePage 函数更改页面，您仍然可以使用以下方法预取它：

```
pageContainerElement.page({ domCache: true }); 
```

# android - 没有startService的android访问运行服务

> ID：14015180
> 
> 赞同：0
> 
> 时间：2012-12-23T22:24:31.023
> 
> 标签：android, service, android-activity

我有一个我知道已经在运行的服务，我的活动如何在不重新启动服务的情况下与它通信。

详细地说，我有一个启动服务的小部件，单击时加载一个活动，在这种情况下，服务应该仍在运行。

我该如何做一些事情：

*   有条件地检查服务是否存在
*   访问服务中的方法

基本上，我不想做的主要事情是`startService(new Intent(...))`在我的活动中运行。我不想`onStart`在我的服务中再次运行。

理想情况下，我可以在我的服务类中添加一些方法，然后在我的活动中调用这些方法，就像我会调用项目中的任何其他公共方法一样。

我想在我的服务中启动一些新线程，如果不需要，我不想创建第二个服务类。

感谢您的洞察力

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:32:49.483

上的文档[`startService()`](http://developer.android.com/reference/android/content/ContextWrapper.html#startService%28android.content.Intent%29)可能会有所帮助：

> 请求启动给定的应用程序服务。Intent 可以包含要启动的特定服务实现的完整类名，也可以包含要启动的服务种类的操作和其他字段的抽象定义。如果此服务尚未运行，它将被实例化并启动（如果需要，为它创建一个进程）；如果它正在运行，那么它会继续运行。
> 
> ...
> 
> **退货**
> 
> 如果服务正在启动或已经在运行，则返回实际启动的服务的 ComponentName；否则，如果服务不存在，则返回 null。

因此，如果您的服务已经在运行，`startService()`则不会启动新版本。

# php - 如何使用 php、jquery 和 ajax 从 url 中提取图像？

> ID：14015184
> 
> 赞同：-5
> 
> 时间：2012-12-23T22:24:59.903
> 
> 标签：php, jquery, ajax, image, post

我希望创建一个类似于 Reddit 的链接提交页面，我可以在其中显示给定 URL 的缩略图而无需重新加载页面。最好的方法是什么，有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:34:54.870

1.  您需要使用[cURL](http://php.net/manual/en/book.curl.php)。
2.  要使用 cURL 下载图像，您可以修改[此示例](https://stackoverflow.com/a/6476232/491494)以满足您的需要。
3.  你需要想出一个算法来选择最“有趣”的图像。这是因为很多页面会有多个图像。如果您很懒惰或者这不是主要问题，您可以简单地选择文档中的第一张图片。
4.  要“解析” HTML 并理解它（使用 PHP），您可以使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)。
5.  下载图像后，您应该对其进行裁剪，保存裁剪后的版本，然后删除原件（比简单地即时保存和调整原件大小要好得多）。

一起使用 cURL 和 DOMDocument，你应该能够把一些东西放在一起。

# visual-studio-2012 - 如何在 F# 中指定包含目录路径？

> ID：14015188
> 
> 赞同：-1
> 
> 时间：2012-12-23T22:25:17.670
> 
> 标签：visual-studio-2012

我在 Visual Studio 2012 中使用 F#，这似乎是一个愚蠢的问题，但我无法弄清楚如何指定包含目录，特别是针对二进制文件。我看到如何使用 #I 指令为 F# 交互式执行此操作，并且它在那里工作，但 #I 选项在非交互式形式中不可用。编译器错误消息说使用 -I 编译器选项。我查看了项目属性，其中唯一可见的子部分是应用程序、构建、构建事件、调试和引用路径，它们都没有提供任何明显的方式来指定包含目录路径。帮助系统没有太多帮助，因为它似乎引用了不可用的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:05:09.060

那么我仍然有VS12的问题，但至少我有一个解决方法，通过从命令行调用编译器。您必须使用 -r 选项来指定 dll 的位置： `fsc -r:<complete path to dll> <fname>` 但是，当我尝试 VS 中的相应步骤（通过尝试设置参考路径之一）时，它说在 DLL 文件夹中找不到任何项目。所以也许熟悉CS的人可以帮忙

# macos - Mac 和 Windows 上的 Mercurial - 没有管理员？

> ID：14015192
> 
> 赞同：0
> 
> 时间：2012-12-23T22:26:09.887
> 
> 标签：macos, mercurial, portability

我的工作流程包括必须在没有 Macintosh OSX 工作站上的管理员/安装权限的工作（大学）中进行开发。现在我只是使用 U 盘来携带代码，但这太老式了，没有很好地利用源代码控制原则。

我想开始在我的工作中使用 Mercurial（和/或 Kiln），但是在这种环境下我可以这样做吗？我愿意使用 GUI、命令行、解决方法，例如使用任何奇怪的免费便携式 IDE 配置，仅用于便携式 Mercurial 插件等。

我可以找到很多在 Windows 上执行此操作的链接，但不是 Mac。至少我需要能够提交和更新我的本地代码。其他一切都会锦上添花，但我会满足于 Mac 上真正最小的功能。如果需要，我可以在自己的 Windows 笔记本电脑上进行更密集的操作，在那里我可以安装任何我想要的东西，但是如果没有在锁定的 Mac 环境中提交，它在我的工作中几乎毫无用处。

补充细节：我的工作主要是 Web 开发，最近是 jQuery/HTML5。我的工作流程主要使用 Dreamweaver 进行代码编辑和设计，在我大学的所有 Mac 工作站上都​​可以轻松使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T22:35:39.733

是的。使用 Mercurial 不需要管理员权限。不过，官方的 Mercurial 安装程序似乎确实需要管理员权限（因为它想把东西放进去`/usr/local/bin`），但这是一种耻辱。

如果您四处寻找图形 Mercurial 客户端，您会发现其中一些不需要管理员权限即可安装或使用。[例如， MacHg](http://jasonfharris.com/machg/)似乎没有。下载、解压、运行、享受。[Murky](https://bitbucket.org/snej/murky/wiki/Home)也有一个 zip 下载，所以我猜是一样的。[SourceTree](http://www.sourcetreeapp.com/)有一个 .dmg 可以打开以显示可复制的应用程序，因此也不需要管理员权限 - 它建议您将其复制到 Applications 文件夹，但您可以将其放在任何地方。

我想所有这些程序都在某处包含实际 Mercurial 的副本。在 MacHg 的情况下，它位于`MacHg.app/Contents/Resources/localhg`. 您可以像往常一样从命令行使用它。

# unit-testing - 在 Cakephp 中使用只读自定义数据源进行单元测试

> ID：14015195
> 
> 赞同：0
> 
> 时间：2012-12-23T22:26:45.940
> 
> 标签：unit-testing, cakephp, cakephp-2.0

我目前正在为我的 CakePHP 应用程序编写一些单元测试。我有`datasource`几个模型的自定义。这是一个*只读*数据源。我想使用这个数据源运行一些单元测试，但似乎无法让它工作。

我在顶部创建了一个带有以下内容的夹具：

```
public $useDbConfig = 'test_datafeeds'; 
```

但是我收到了很多错误。如果我从 DataTest 中删除所有固定装置，它可以工作，但是它也使用实际数据库中的所有实际数据 - 对于我的测试，我更愿意使用我为数据库中的数据发送的虚拟数据。

我已经设法使用虚拟数据创建静态夹具来模拟数据源，但我也更喜欢在测试中使用实际数据源的选项。

我得到的一些错误：

```
Notice: Undefined index: prefix in lib/Cake/TestSuite/Fixture/CakeFixtureManager.php on line 169

Warning: in_array() expects parameter 2 to be array, null given in lib/Cake/TestSuite/Fixture/CakeFixtureManager.php on line 171

Warning: in_array() expects parameter 2 to be array, null given in lib/Cake/TestSuite/Fixture/CakeFixtureManager.php on line 174

Fatal error: Call to undefined method DataFeedSource::execute() in lib/Cake/Test/Suite/Fixture/CakeTestFixture.php on line 194 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:12:18.520

我不确定这是否是最好的方法，但它对我有用。我已删除 public $useDbConfig = 'test_datafeeds'; 从夹具开始，它可以工作。似乎只要在我的配置文件中有 test_datafeed 配置就可以了。

非常方便，因为我可以保留我的静态装置，然后通过注释掉它来打开和关闭 test_datafeed。

# javascript - 高亮输入框内的括号

> ID：14015202
> 
> 赞同：3
> 
> 时间：2012-12-23T22:27:24.863
> 
> 标签：javascript, jquery, syntax-highlighting, parentheses

我试图根据括号的级别以及它们是否匹配来突出显示括号。所以第一级得到下面的类`paren_1`，第二级得到`paren_2`等等。如果有的话，我也想突出显示插入符号旁边的括号集。这意味着如果您在括号（打开或关闭）旁边有插入符号，它应该突出显示所述括号及其对应的括号。我的（损坏的）实现显示在小提琴中。

这工作得很好。问题如下

1.  如果输入字符串中有 HTML，那么一切都会分开。我尝试在将 html 发送到 using 之前对其进行转义`jQuery('<div />').text(text).html()`，这可行，但会破坏插入符号的位置。
2.  如果“同一级别”上有多个括号，并且插入符号位于一组旁边，则它突出显示的内容超出了应有的范围。
3.  如果有不匹配的括号，它应该用红色或类似的东西突出显示。这也不起作用，我不知道如何实现它。我已经尽力了，但一切都失败了。

JSFiddle：http: [//jsfiddle.net/yWzWV/1/](http://jsfiddle.net/yWzWV/1/)

大家请注意：我对 javascript 或 jquery 都不太擅长，所以如果这段代码让你眼花缭乱，请原谅我。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T12:53:57.140

问题已解决，但我遇到了另一个问题。这是修复的问题：http: [//jsfiddle.net/Axvgf/](http://jsfiddle.net/Axvgf/)

这是更改后的方法：

```
function colorize(text, pos) {
    var i = 0, current_times = 0;
    var startc = '(', endc = ')';
    var current = -1;

    var entities = {'>': '&gt;','<':'&lt;'}; 
    var p2 = 0;
    var regex = new RegExp(Object.keys(entities).join("|"),'g');   
    var converted = text.replace(regex, function(x, j) {
        if(pos > j) p2 += entities[x].length - 1; 
        return entities[x];
    });

    pos += p2;
    var parens = [], indices = [], o = {};
    var newText = converted.replace(/((?:\\)*)([()])/g, function(full, escape, x, idx) {
        var len = escape.split(/\\/g).length - 1;
        if (len % 2 == 0) {
            indices.push(idx);
            if (x == startc) ++i;
            o[idx] = { selected: false, type: x, depth: i, idx: idx, pair: -1, extra: escape };
            if (idx == pos) o[idx].selected = true;
            if (x == startc) parens.push(idx);
            else {
                if (parens.length > 0) {
                    var p = parens.pop();
                    o[idx].pair = p;
                    if (o[p].selected) o[idx].selected = true;
                    o[p].pair = idx;
                    if (o[idx].selected) o[p].selected = true;
                }
                --i
            }
        }
    });
    newtext = converted;     
    indices = indices.sort(function(x,y) { return Number(y) - Number(x); });
    indices.forEach(function(i) {
        newtext = newtext.substr(0,i) + o[i].extra +
        "<span class='" + (o[i].pair == -1 ? "unmatched " : "paren_" + (o[i].depth % 5)) + 
        (o[i].selected ? " selected_paren": "") + "'>" + o[i].type + "</span>" + 
        newtext.substr(i + 1 + o[i].extra.length)
    });
    return newtext;
} 
```

# linux - 检查 SE Linux 并提示用户说是以禁用它的脚本

> ID：14015203
> 
> 赞同：0
> 
> 时间：2012-12-23T22:27:28.257
> 
> 标签：linux, shell, selinux

我想创建一个脚本，提示用户检查 SE Linux，如果答案是肯定的则禁用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-03T04:30:30.873

更正接受的答案。

a) 使用下面的“getenforce”来编写脚本

```
SELINUX_STATE=$(getenforce)
if [ "$SELINUX_STATE" == "Enforcing" ]; then
  echo "SELinux is enabled"
elif [ "$SELINUX_STATE" == "Permissive" ]; then
  echo "SELinux is permissive"
else 
  echo "SELinux is disabled (or missing)"
fi 
```

b)`setenforce 0`将 selinux 设置为 permissive 模式 - 这与 disabled 不同。禁用的唯一方法是编辑配置并重新启动。

```
sudo sed -c -i "s/\SELINUX=.*/SELINUX=disabled/" /etc/sysconfig/selinux
sudo restart 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T22:36:47.993

```
ENABLED=`cat /selinux/enforce`
if [ "$ENABLED" == 1 ]; then
  echo "SELinux is enabled, disable? (yes/no):"
  read disable
  if [ $disable == "yes" ]; then
    echo "disabling selinux"
    setenforce 0
  fi
fi 
```

此脚本应以 root 身份运行，或具有执行以下操作的权限：

```
cat /selinux/enforce
setenforce 0 
```

# entity-framework - 如何重新加载我的 DbSet 中的所有实体（条目）（不是一个条目）？

> ID：14015204
> 
> 赞同：1
> 
> 时间：2012-12-23T22:27:32.900
> 
> 标签：entity-framework, reload, dbcontext, dbset

如何重新加载我的**DbSet中的****所有**实体（条目）（不是一个条目）？

 **我有 2 个表：

```
Tbl1 (Id, Name, Tel,...)
Tbl2 (Id, Address, DetailInfo,... ) 
```

和 1 个视图：

```
MyView1 (Tb1.Id , Name,Tel , Address , DetailInfo,...) 
```

我使用 RefreshInfo() 函数在网格的数据源中设置 DbSet.ToList() ，编辑一个 Tb1 实体，然后调用 myDbContext.SaveChanges() ，它在数据库中更改，并且 MyView1 在那里显示正确的值**，**但是当我调用 RefreshInfo () 再次，它不显示来自数据库的值！我可以重新加载当前实体并且它有效，但我想重新加载我的 DbSet 中的**所有实体**

每次调用 RefreshInfo() 方法时，我都想从 db 获取新数据。（我用 SqlProfiler 检查过，我看到 ef 向数据库发送了 SELECT 命令，但是作为回报发生了什么？！）

我不想每次都创建新的 dbContext，这不是 *我在 winform 中使用 datagridview 和实体框架 codefirst 的好解决方案。***

# android - 如何在不崩溃的情况下将 Google Maps API v2 实施到 Android 应用程序？

> ID：14015207
> 
> 赞同：0
> 
> 时间：2012-12-23T22:28:18.637
> 
> 标签：android, google-maps

我正在尝试将应用程序作为学校项目，我必须实施谷歌地图。我对 Android 编码还很陌生，现在很少接触 Java。到目前为止，我使用 Google Maps API v2 创建了这个应用程序，我获得了一个密钥，我在清单中添加了所有权限和代码，我添加了默认的 Google 示例代码以使地图简单地出现，但我遇到了崩溃和很多错误运行应用程序时。我还添加了现有代码并将其设置为项目库，我将目标和编译设置为专门使用 API。我一直在“敲我的脑袋”试图让它发挥作用。我看到其他问题也有类似的问题，但我已经完成了一些问题。由于我在通过文本添加代码时遇到了麻烦，我希望你们能理解我使用的正是谷歌发布的教程。我可以'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T01:36:33.267

感谢 newbostonforums，我设法解决了这个问题，我正在为其他寻求帮助的人添加我的发现。您需要将 google-play-services_lib 添加到您的项目中。

右击 IMPORT Android->Existing Code->(SDK/extras/google/google_play_services/libproject/google-play-services_lib)

右键单击项目。属性->Android->库-ADD->(SDK/extras/google/google_play_services/libproject/google-play-services_lib

添加文件夹后，它将与项目“链接”。

在 JAVA 中，您必须添加

确保导入所有红色下划线。

```
public class Main extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    SupportMapFragment fragment = new SupportMapFragment();
    getSupportFragmentManager().beginTransaction()
            .add(android.R.id.content, fragment).commit(); 
```

然后您的 XML 可以由您选择，但它必须包括

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:name="com.google.android.gms.maps.SupportMapFragment"
// POSSIBLY OPTIONAL
android:id="@+id/map" 
```

您可以将 android:name 替换为 class 但我不知道有什么区别。我相信它们都有效。

然而，有很多方法可以让它发挥作用，我正在稍微改变这种方法。

# forms - 使用 ember.js 进行字段和表单验证

> ID：14015208
> 
> 赞同：2
> 
> 时间：2012-12-23T22:28:25.003
> 
> 标签：forms, validation, ember.js

我已经从[jsfiddle为 ember.js 集成](http://jsfiddle.net/kTJCH/)[了 Boronine 的](http://boronine.com/)优秀字段验证代码。虽然这很好，但我仍然需要执行表单级别的验证，以确保当用户提交表单时，一切正常。

最好的方法是什么？有没有一种方法可以将字段标记为已验证，以便表单处理程序可以简单地遍历字段以查看已验证的内容？

```
MP.SignUpFormView = Em.View.extend({
    submitLogin:function (event) {
        // walk through object fields to perform validation here, but how?!
    }
}); 
```

编辑：

为清楚起见，我*正在*使用 Handlebars 和绑定，而不是尝试遍历 DOM 对象等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T04:45:53.047

您尝试使用的模式在遵循文档脚本模式的应用程序中是有意义的，而 Ember 没有。您*可以*强制执行这项工作，但您会发现应用程序中的每个下一步都会变得越来越难。

在 Ember 中，显示由数据对象支持，因此 Ember 应用程序中的表单字段绑定到某个对象的属性，并且在进行更改时，值会立即更新。你甚至不需要一个`<form>`除了造型。

当用户想要对这个对象采取一些行动（比如将它持久化到服务器）时，应用程序的当前状态将回答“当用户现在想要采取这个行动时会发生什么？”这个问题。用户单击此处的按钮并不意味着“现在序列化表单中的数据并执行某项操作”，而是表示“我已经完成了对这个对象的属性的更改，现在想在应用程序中执行其他操作”。

您的车把模板看起来像这样：

```
{{view Ember.Textfield valueBinding="name"}}
{{view Ember.Textfield valueBinding="age"}}

<button {{action save content}}>Save</button> 
```

以及您的应用程序中可以处理的可能状态

```
Ember.Route.extend({
  save: function(router, event){
    if (event.context.validate()){
      router.transitionTo('someNewState')
    }
  }
}) 
```

# c# - 列出从代码后面的图像（ASP.NET C#）到 ASPX 中的图像概述

> ID：14015209
> 
> 赞同：3
> 
> 时间：2012-12-23T22:28:29.823
> 
> 标签：c#, jquery, asp.net, thumbnails, image-gallery

我对 ASP 和 C# 比较陌生，我想了解如何解决以下两个问题：

1.  在后面的代码中，我有一个包含图像的列表（来自数据库）。我想在 ASPX 页面上显示这些图像。我想知道允许 ASPX 页面从后面的代码访问列表的最佳/最简单的方法是什么。关于这个主题的教程让我有点困惑。

2.  我的第二个问题是关于一个不错的 JQuery 库。我能找到的几乎所有插件都是某种滑块，这不是我想要的。理想的插件应该显示页面上的所有（缩略图）图像，并且应该包含下一个和上一个按钮。如果将鼠标光标悬停在图像上后可以显示图像的名称，那也很好。

希望有人能回答我的问题

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:42:28.433

## 问题 1

您可以使用 gridview 来显示图像，但不确定您的代码中到底有什么类型的列表，所以我创建了一个简单的`List<Images>`where`Images`是具有两个属性 Name 和 URL 的类，但我相信您可以相应地更改代码使用您的列表：

**ASPX：**

```
<asp:GridView ID="gvImages" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField DataField="Name" HeaderText="Name" />
        <asp:ImageField DataImageUrlField="URL" HeaderText="Image" 
        ControlStyle-Height="150" ControlStyle-Width="120" />
    </Columns>
</asp:GridView> 
```

**后面的代码：**

```
 protected void Page_Load(object sender, EventArgs e)
    {
        List<Image> images = new List<Image>
        {
            new Image("Picture 1","~/Images/Pic1.jpg"),
            new Image("Picture 2","~/Images/Pic2.jpg"),
        };

        gvImages.DataSource = images;
        gvImages.DataBind();
    }
}

public class Image
{
    public Image(string name, string url)
    {
        this.name = name;
        this.url = url;
    }

    private string name;
    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    private string url;
    public string URL
    {
        get { return url; }
        set { url = value; }
    }
} 
```

## 问题2

看看[jQuery Galleria](http://galleria.io/download/)，它具有列出所有缩略图以及下一个和上一个按钮的功能。如果您想在将鼠标悬停在图像上时显示图像的名称或任何其他描述，只需将`title`HTML 属性更改为期望值：

![在此处输入图像描述](../Images/8b9211d43197b4bf2b7159264ed69eda.png)

# c++ - 在 Qt 中向 centralWidget 添加/调整背景图像的大小

> ID：14015212
> 
> 赞同：1
> 
> 时间：2012-12-23T22:29:31.223
> 
> 标签：c++, qt, qt-creator

我是 Qt 的新手。我在多个网站上搜索了我的问题，但找不到答案。如何将图像添加到 centralWidget？

我试过了：

```
MainWindow w;
w.centralWidget()->setStyleSheet("image: url(image)"); 
```

它工作正常，但图像并未针对整个窗口/小部件进行拉伸。如何调整图像大小`setStyleSheet`？

当应用程序打开时，我想在背景中显示图像而不是灰色。我试着改变颜色。这行得通，但按钮和标签看起来不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:14:41.940

如果你想让它为整个小部件使用而拉伸`background-image`，但我猜你可能想要的是一个在一个方向上扩展的图像，无论是垂直还是水平，在这种情况下，使用`background-position`将它固定到你的小部件的边框之一：

```
image: url(:/path/to/image);
background-position: bottom left; 
```

# vb.net - 在鼠标悬停时更改 datagridview 上的行字体，vb.net

> ID：14015216
> 
> 赞同：3
> 
> 时间：2012-12-23T22:30:09.797
> 
> 标签：vb.net

当鼠标悬停在一行上时，无论选择哪一行，我都想在 datagridview 行上获得下划线字体。

我明白了 - 一半:)

```
Private Sub aDgv_MouseMove(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles aDgv.MouseMove

    Dim hit As DataGridView.HitTestInfo = aDgv.HitTest(e.X, e.Y)
    If hit.Type = DataGridViewHitTestType.Cell Then
        aDgv.Rows(hit.RowIndex).DefaultCellStyle.Font = New Font(aDgv.DefaultCellStyle.Font, FontStyle.Underline)
    End If
End Sub 
```

因此，当我遇到该行中的行文本时（如预期的那样），当我移至下一行时，下一行将变为下划线，但以前不会恢复为正常字体。

怎么做，只有鼠标悬停的行中的文本才会加下划线。
鼠标移到其他行时如何将字体重置为正常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T23:33:41.473

要恢复正常`Font`，只需使用`CellMouseLeave`事件

```
Private Sub DataGridView1_MouseMove(sender As System.Object, e As System.Windows.Forms.MouseEventArgs) Handles DataGridView1.MouseMove
    Dim normalFont = New Font(DataGridView1.DefaultCellStyle.Font, FontStyle.Regular)
    Dim hit As DataGridView.HitTestInfo = DataGridView1.HitTest(e.X, e.Y)
    If hit.Type = DataGridViewHitTestType.Cell Then
        If DataGridView1.Rows(hit.RowIndex).Cells(hit.ColumnIndex).FormattedValue.ToString().Trim().Length > 0 Then
            DataGridView1.Rows(hit.RowIndex).DefaultCellStyle.Font = New Font(DataGridView1.DefaultCellStyle.Font, FontStyle.Underline)
        Else
            DataGridView1.Rows(hit.RowIndex).DefaultCellStyle.Font = normalFont
        End If
    End If
End Sub

Private Sub DataGridView1_CellMouseLeave(sender As System.Object, e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellMouseLeave
    Dim normalFont = New Font(DataGridView1.DefaultCellStyle.Font, FontStyle.Regular)
    If (e.ColumnIndex > -1) Then
        If e.RowIndex > -1 Then
            If DataGridView1.Rows(e.RowIndex).Cells(e.ColumnIndex).FormattedValue.ToString().Trim().Length > 0 Then
                DataGridView1.Rows(e.RowIndex).DefaultCellStyle.Font = normalFont
            Else
                DataGridView1.Rows(e.RowIndex).DefaultCellStyle.Font = normalFont
            End If
        End If
    End If
End Sub 
```

# mysql - MySql CREATE TRIGGER INSERT 也获取刚刚插入的 MAX PK id？

> ID：14015221
> 
> 赞同：2
> 
> 时间：2012-12-23T22:31:06.920
> 
> 标签：mysql, triggers

我`CREATE TRIGGER`在一个名为`Item`.

我想在表中插入一个新行`itemindustrycodeslookup`并取回最大值`itemindustrycodeslookupId`，以便将该值插入`Item`表中。

这是我到目前为止所拥有的：

```
-- Trigger DDL Statements
DELIMITER $$

USE `nextcart`$$

CREATE TRIGGER `insert_itemindustrycodeslookupid` 
    BEFORE INSERT ON `item` FOR EACH ROW 
    BEGIN
        INSERT INTO `itemindustrycodeslookup` SET `itemindustrycodeslookupId` = NULL;
                    #SELECT here..
                    #INSERT here...
    END$$ 
```

在 INSERT 之后我需要一个 SELECT，然后是另一个 INSERT 吗？

另外，我不确定`INSERT INTO`itemindustrycodeslookup `SET`itemindustrycodeslookupId `= NULL;`.. 除了自动递增的 PK id 之外，所有列都可以为空，这就是我对`SET`itemindustrycodeslookupId说的原因`= NULL`

**代码更新：我仍然不确定我的分隔符是否正确，我还没有准备好点击应用按钮，但它正在出现。

```
-- Trigger DDL Statements
DELIMITER $$

USE `nextcart`$$

CREATE TRIGGER `insert_itemindustrycodeslookupid` 
    AFTER INSERT ON `item` FOR EACH ROW 
    BEGIN
        DECLARE fk_id int;
        Set fk_id = LAST_INSERT_ID();
        INSERT INTO `itemindustrycodeslookup` SET `itemindustrycodeslookupId` = NULL;
        UPDATE `item` SET `item`.`itemindustrycodeslookupId` = LAST_INSERT_ID() WHERE `item`.`itemId` = fk_id;
    END$$ 
```

***最新代码更新：这确实有效，从网络上搜集而来。海报说“使用风险自负”，所以希望有更好的解决方案。如果 MySQL 触发了触发器，那么 MySQL 不喜欢更新它自己的表，所以......无论如何，这就是 DID 的工作原理。

```
-- Trigger DDL Statements
DELIMITER $$

USE `nextcart`$$

CREATE
DEFINER=`root`@`localhost`
TRIGGER `nextcart`.`insert_itemindustrycodeslookupid`
BEFORE INSERT ON `nextcart`.`item`
FOR EACH ROW
BEGIN
    INSERT INTO nextcart.itemindustrycodeslookup SET itemindustrycodeslookupId = NULL;
    SET NEW.itemindustrycodeslookupId = (
        SELECT AUTO_INCREMENT - 1 
        FROM information_schema.TABLES 
        WHERE TABLE_SCHEMA = DATABASE() 
        AND TABLE_NAME = 'itemindustrycodeslookup'
      );
END$$ 
```

***解决方案：发现这也有效，这可能是您在下面的答案..

```
-- Trigger DDL Statements
DELIMITER $$

USE `nextcart`$$

CREATE
DEFINER=`root`@`localhost`
TRIGGER `nextcart`.`insert_itemindustrycodeslookupid`
BEFORE INSERT ON `nextcart`.`item`
FOR EACH ROW
BEGIN
    INSERT INTO nextcart.itemindustrycodeslookup SET itemindustrycodeslookupId = NULL;
    SET NEW.itemindustrycodeslookupId = (
        SELECT LAST_INSERT_ID());
END$$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:49:25.400

在插入后调用该`LAST_INSERT_ID()`函数以获取刚刚插入的行的自动增量 id 列的新值。IE：

```
 INSERT INTO `itemindustrycodeslookup` values (...);
 -- no need for a select
 INSERT INTO some_child_of_itemindustrycodeslookup values (..., LAST_INSERT_ID(), ...) 
```

如果您需要再次使用它，请声明一个变量来存储它以供重用，因为它会在插入子项时更改：

```
DECLARE last_id int;

INSERT INTO parent ...
SET last_id = LAST_INSERT_ID();
INSERT INTO child .. -- #1
INSERT INTO child .. -- #2 
```

如果触发器是在要插入的表上定义的，则需要定义触发器以在插入后触发。

# python - Pydev 无法识别 ipython 可以识别的包

> ID：14015222
> 
> 赞同：1
> 
> 时间：2012-12-23T22:31:11.340
> 
> 标签：python, pydev, packaging

我创建了一个包。它可以是“pip安装”

该包在 ipython 中被识别，可以导入，甚至自动完成。

同样的包在同一台计算机上的 Eclipse 中的 pydev 中无法识别，并且不会自动完成。但是，当我运行代码 n pydev 时，它工作正常。

# c++ - 如何将原始数据附加到 boost::shared_array ?

> ID：14015223
> 
> 赞同：2
> 
> 时间：2012-12-23T22:31:14.397
> 
> 标签：c++, boost, shared-ptr

我有：

```
message->data = boost::shared_array<char>(new char[100]); 
```

它充满了数据。

我收到了新的`char * data`（来自旧的 C API）的`int length`. 我想用新数据扩展我的数组，这意味着`data`在我的`message->data`.

怎么做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:40:18.763

为什么不`shared_ptr<vector<char> >`呢？

# php - PHP 给出图像的宽度和高度

> ID：14015225
> 
> 赞同：0
> 
> 时间：2012-12-23T22:31:22.477
> 
> 标签：php, html, image, echo, image-size

如何放置尺寸，我想以 400X400 格式显示边缘图像：

*   高度 = 400
*   宽度 = 400

请给出400X400的代码大小，谢谢。

这是代码：

```
<?php   
    // Grab the data from our people table
    $sql = "select * from njerz";
    $result = mysql_query($sql) or die ("Could not access DB: " . mysql_error());

    while ($row = mysql_fetch_assoc($result))   {
        echo "<div class=\"picture\">";
        echo "<p>";

        // Note that we are building our src string using the filename from the database
        echo $row['fname'] . " " . $row['lname'] . "<br />";
        echo "<img src=\"images/" . $row['filename'] . "\" alt=\"\" /><br ;
        echo "</p>";
        echo "</div>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T22:34:45.963

我不知道我是否理解正确：

```
echo "<img src=\"images/" . $row['filename'] . "\" alt=\"\" height=\"400\" width=\"400\" /><br />"; 
```

如果你想设置尺寸，这就是你所需要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T23:22:01.947

你只需要添加一个样式属性`style="width:400px; height:400px;"`

```
echo '<img src="images/'. $row['filename'] .'" style="width:400px; height:400px;" alt="" /><br />'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-24T10:02:53.527

请检查我的代码

```
list($width, $height, $type, $attr) = getimagesize("PATH_OF_THE_IMAGE/".$row['filename']);

echo "<img src=\"images/" . $row['filename'] . "\" alt=\"\" height=\"".$height."\" width=\"".$width."\" /><br />"; 
```

# web-services - 是否可以构建嗅探器来监听其他站点响应？

> ID：14015231
> 
> 赞同：0
> 
> 时间：2012-12-23T22:32:11.213
> 
> 标签：web-services, sniffer

有一个按属性过滤产品的网站。我想记录**所有用户**返回到该站点的响应（url、ip 和 sessionid） 。

有没有办法建立一个可以做到的嗅探器/爬虫？

只是为了确保 - 它合法吗？

**编辑：**

我稍微修正一下我的愿望。我不想看到我返回该站点的响应。我想看看来自世界各地的所有回复到这个特定网站的回复..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:25:38.440

如果我对您的理解正确，您希望将流量捕获到您无法控制的第 3 方网站。例如竞争对手的网站。

**简短**的回答：不。不可能在本地构建一个嗅探器，它将请求捕获到位于其他地方的第 3 方站点。

**长答案：** 要嗅探所有发往服务器/站点的数据包，您必须在所有这些数据包使用的路由上。如果您不在路线上，您根本看不到它们。
因此，唯一的选择是控制某些网络基础设施，如交换机或路由器，它们非常靠近目标服务器/集群/站点（因此所有或至少许多数据包都使用此路由）或控制目标服务器。两者显然都是非法的。

# keyboard - 如何更改 MS-DOS 程序的输入语言

> ID：14015233
> 
> 赞同：1
> 
> 时间：2012-12-23T22:32:36.377
> 
> 标签：keyboard, dos

我有这个 MS-DOS 程序，我想在另一台计算机上运行，​​但即使语言设置为土耳其语，当我运行这个特定软件时，它也会接受按键，就好像它们来自英文键盘一样。常规命令提示符可以很好地接受密钥，但只有这个程序不允许土耳其语字符。我以前可以在另一台计算机上运行它，但现在它给我带来了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:06:50.080

这是在 KEYBRD2.SYS 和 COUNTRY.SYS 文件中设置的。更多信息在这里：

[http://support.microsoft.com/kb/117850](http://support.microsoft.com/kb/117850)

# python - 无法解决 AttributeError：经过大量研究后，“设置”对象没有属性“ROOT_URLCONF”难题

> ID：14015234
> 
> 赞同：3
> 
> 时间：2012-12-23T22:32:41.603
> 
> 标签：python, django

我有一个问题，我试图解决一段时间。我正在按照站点的说明创建我的第一个 Django 应用程序。我目前正在访问管理页面，但它一直没有工作。另外，我在运行本地服务器时收到“发生服务器错误。请联系管理员”的错误。在我尝试访问 django 管理页面之前，这并没有发生。错误回调的最后一行是：

```
AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF' 
```

完整的回调是：

```
Traceback (most recent call last):
File "/usr/lib/python2.7/wsgiref/handlers.py", line 85, in run
self.result = application(self.environ, self.start_response)
File "/home/username/Desktop/djangoajax/local/lib/python2.7/site-packages/django/contrib/staticfiles/handlers.py", line 67, in __call__
return self.application(environ, start_response)
File "/home/username/Desktop/djangoajax/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 241, in __call__
response = self.get_response(request)
File "/home/username/Desktop/djangoajax/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 82, in get_response
urlconf = settings.ROOT_URLCONF
File "/home/username/Desktop/djangoajax/local/lib/python2.7/site-packages/django/utils/functional.py", line 185, in inner
return func(self._wrapped, *args)
AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF' 
```

manage.py 是：

```
#!/usr/bin/env python
import os
import sys

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

settings.py 是：

```
# Django settings for mysite project.
import os
from django.conf import settings
from django.conf.urls.defaults import *
from mysite import views

DIRNAME = os.path.abspath(os.path.dirname(__file__))
DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    ('My Name', 'email@mysite.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/New_York'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = os.path.join(DIRNAME, 'static/')

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    #'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = 'xan1@gt5(i6uuf8gw)^440-0@0x)s5dgr9-3=#wnczlk)t%$mm'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    #'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'mysite.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'mysite.wsgi.application'

import os.path
TEMPLATE_DIRS = (
         os.path.join(os.path.dirname(__file__), "templates"),
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
}

if settings.DEBUG:
        urlpatterns += patterns('django.clock_skew.static',
            (r'^%s(?P<path>.*)$' % (settings.MEDIA.URL[1:],), 'serve', {
                'document_root': settings.MEDIA_ROOT,
                'show_indexes': True}),)

django.contrib.admin.site.register(directory.models.Entity) 
```

Admin.py如下：

```
import django.contrib.admin
import directory.models

django.contrib.admin.autodiscover()
django.contrib.admin.site.register(directory.models.Entity)
django.contrib.admin.site.register(directory.models.Location) 
```

我真的一直在尝试自己解决这个问题并让本地服务器无错误地运行，但此时我意识到我可能需要一些帮助。我将不胜感激您可以为我提供的任何解决方案。我正在使用 django 1.4.1 和 python 2.7.3。我正在使用`python manage.py runserver 0.0.0.0:8080`命令启动服务器。

非常感谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T22:37:30.500

呸。你在 settings.py 中做了各种不应该在那里做的事情。您正在导入 url 并添加到它们，并导入管理员并注册模型。这两个动作都依赖于已经设置好的设置，所以 Django 感到困惑也就不足为奇了。

删除所有这些导入（除了`os`），并将 URL 修改移动到 urls.py 并将管理员注册移动到相关的 admin.py。

# android - 如何估计两个安卓设备之间的距离？（蓝牙首选）

> ID：14015239
> 
> 赞同：21
> 
> 时间：2012-12-23T22:33:22.513
> 
> 标签：android, bluetooth, distance, wifi-direct

目标是没有真正的距离。这是更简单的事情。
目标是检查**另一个设备是否非常接近**。对或错。假设 10 或 15 厘米很近，所以我们的检查是正确的，任何更远的设备都无法通过检查并且是错误的。

我的第一种方法是使用api的方法`fetchUuidsWithSdp()`，但失败了！
无论是几厘米远的设备还是大房间另一端的设备，延迟似乎都是一样的！

即使没有蓝牙，任何解决方案都是可以接受的。例如，我对**wifi direct p2p**协议完全不熟悉。也许那里可能有一些有用的东西可以粗略估计距离。

编辑：我正在阅读有关接收信号强度指示器（**RSSI**）的信息。这可以用于我们的特殊情况，粗略估计设备之间的距离。但也许可以结合一些东西来提高准确性。

编辑：我将 Ralgha 的答案用于测试。我确实建立了一个连接，并且有一个在设备之间**进行乒乓球**的小协议。
当以**1 字节**进行乒乓球时，非常接近时的平均延迟为 22.6000 毫秒，而在房间的另一个角落时为 22.6087 毫秒。
当用**1024 字节**进行乒乓球时，非常接近时的平均延迟为 40.3173 毫秒，在房间的另一个角落时甚至更小，为 32.3138 毫秒。
毕竟，**延迟确实不携带任何有关距离的信息**！

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T17:16:52.993

你可以[用声音来测量距离](http://iqtainment.wordpress.com/acoustic-ruler/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T14:37:45.133

我研究了蓝牙定位，它就像检测信号强度一样容易。要获得真正准确的结果，您还需要考虑您使用的手机类型、电池类型和电池状况。您还必须考虑环境及其对信号强度的影响，以及可能干扰信号的障碍物，例如人、墙壁、桌子等。

要确定距离，您还需要使用三角测量技术来确定移动设备的位置。您还可以在您的环境中设置多个发射器并针对每个发射器进行测量。了解这些发射器的位置后，您就可以计算出手机的位置。

但是，信号强度会有所不同，您必须进行大量校准。有许多科学论文可以深入了解所需的算法。还有几家公司提供这种服务，用于商场、博物馆等。

也就是说，如果你能得到信号强度，那么你应该能够计算出基本的近或远结果，它只是不会完全准确，在这种情况下，我仍然认为拥有多个发射器仍然有助于很多。

[论文，一些陷阱](http://architecture.mit.edu/house_n/documents/CheungIntilleLarson2006.pdf) [PDF（下载），另一篇论文](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CEkQFjAA&url=http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.136.2471&rep=rep1&type=pdf&ei=FUjkUOHTDsWQ0AXF8YHIDw&usg=AFQjCNH-z--pPfiVR1HSKXxE_Xo1kti9NA&sig2=yVT4fD2ydRJmvGKYFGsfuA&bvm=bv.1355534169,d.d2k)

我从谷歌搜索蓝牙定位中阅读了很多论文，这些论文将为您提供一些指导。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-23T23:07:27.100

我能想到的唯一可行的方法是使用 NFC。要使用蓝牙或 Wi-Fi，您必须通过信号强度来实现，但每个发射器都不同，因此根本不可靠。

延迟是相当无用的，因为无线电波以光速传播，传播一英寸和一英里之间的时间差基本上为零。要测量这种差异，您需要比手机更高的分辨率。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-28T00:40:45.900

您没有指定此距离检测的目标，但如果您可以为此添加一些额外的要求（即手机方向和闪光灯），则可能会使用完全不同的方法。

如果两个设备的方向都使两个摄像头彼此面对，则可以使用闪光灯来验证正确的电话和距离。相机图像中产生的白点大小随距离迅速减小，特定的闪光序列可以区分其他手机闪光灯和其他光源。

这可能需要一些调整才能在户外工作，因为对于相同的距离，光斑尺寸会小得多......

问候。

# php - 如何在包含图像的文件夹名称中用 %20 替换空格？

> ID：14015240
> 
> 赞同：0
> 
> 时间：2012-12-23T22:33:30.860
> 
> 标签：php, opencart

我的朋友 opencart 页面上的 W3 Validator 出现错误：

> 元素 img 上属性 src 的错误值[http://myserver.com/cache/data/product/MY](http://myserver.com/cache/data/product/MY) PRODUCT/product1-290x214.JPG：路径组件中的空格。使用 %20 代替空格。

这表明用户创建了带有空格的文件夹（我的产品）。

需要修改代码以将文件夹名称中的空格转换为 %20？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:34:09.243

虽然`urlencode()`是您应该使用的那个，但您应该在这里做的事情是**教育您的朋友**不要再这样做，重命名它以使其没有空间并更新数据库中的路径。如果您想要一个解决方案，可以在您的购物车中的所有页面上纠正此问题，您可以使用`urlencode()`或`str_replace()`在您的`/catalog/modl/tool/image.php`文件中

```
 $new_image = 'cache/' . utf8_substr($filename, 0, utf8_strrpos($filename, '.')) . '-' . $width . 'x' . $height . '.' . $extension; 
```

将需要更改，要么在其后添加一行以添加`%20`，要么编辑该行以将其包含在一行中。当然，您也应该在 vQmod 中执行此操作，而不仅仅是编辑您的核心文件，以便在您朋友的站点更新到新版本时保留它

## 编辑

如果上面的代码不起作用，您可以在直接构建返回的 URL 后对其进行操作。这是两个返回行（第一个用于 HTTPS 图像，第二个用于 HTTP）

```
 return HTTPS_IMAGE . $new_image;
    } else {
        return HTTP_IMAGE . $new_image; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T22:36:06.563

使用[urlencode](http://php.net/manual/en/function.urlencode.php)。这将解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T22:36:43.577

如果您有完整的 URL，一个简单的[str_replace()应该可以解决问题。](http://php.net/str_replace)像这样的东西：

```
echo str_replace(' ','%20',$full_link); 
```

否则，您可以按照一位评论者的建议使用[urlencode()](http://php.net/urlencode)。如果您已经拥有该站点的路径并且只是添加类似产品名称的内容，这将非常有用：

```
echo 'http://site.name/hello/'.urlencode($product); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T22:05:46.270

如果您在文件夹名称或图像文件名中有空格，Opencart 图像调整大小模型实际上会返回带有空格的图像路径。

尝试使用rationalboss建议的解决方法编辑catalog/model/tool/image.php最后几行：

```
return $this->config->get('config_ssl') . 'image/' . str_replace(' ','%20', $new_image); 
```

和

```
return $this->config->get('config_url') . 'image/' . str_replace(' ','%20', $new_image); 
```

Opencart 仍然上传带有空格、UTF-8 字符等的图像。我认为，这必须在下一个 Opencart 版本中修复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-24T12:21:36.307

简单的解决方案是编辑目录/模型/工具/image.php

```
 if (isset($this->request->server['HTTPS']) && (($this->request->server['HTTPS'] == 'on') || ($this->request->server['HTTPS'] == '1'))) {
        return $this->config->get('config_ssl') . 'image/' . str_replace(' ','%20', $new_image);
    } else {
        return $this->config->get('config_url') . 'image/' . str_replace(' ','%20', $new_image);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-01T19:23:32.920

在您的 /catalog/model/tool/image.php 文件之后

```
$new_image = 'cache/' . utf8_substr($filename, 0, utf8_strrpos($filename, '.')) . '-' . $width . 'x' . $height . $type .'.' . $extension; 
```

添加

```
$new_image = implode('/', array_map('rawurlencode', explode('/', $new_image))); 
```

# javascript - 为什么带有输入文本框和按钮的表单会在输入键时调用 javascript 函数？

> ID：14015243
> 
> 赞同：0
> 
> 时间：2012-12-23T22:34:14.807
> 
> 标签：javascript, html, forms

```
<form action="">
<input id="user_input" onKeyDown="if(event.keyCode == 13)document.getElementById('okButton').click()" >
<input id="okButton" type="button" onclick="JS_function();" value="OK">
</form> 
```

我希望能够在文本框内按回车键来单击按钮。使用我的代码，当我在文本框中按回车键时，按钮被单击，但在页面刷新并且一切重新启动后立即单击，任何想法为什么以及如何防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:41:35.760

我认为问题在于按 Enter 键会触发表单发布。由于您有一个空的动作属性，表单将发布到当前页面，这看起来像是重新加载。

为了防止浏览器默认行为在 Enter 上发布表单，请尝试`false`从您的 onKeyDown-callback 中返回。

```
if(event.keyCode == 13) { document.getElementById('okButton').click(); return false; } 
```

您也可以`.preventDefault()`在事件上调用该方法，这将做同样的事情。

**一种简化和澄清的方法：**

由于单击 okButton 将调用`JS_function()`，而不是触发按钮上的单击事件，您可以`JS_function()`直接从 onKeyDown-event 调用。

```
<input id="user_input" onKeyDown="if(event.keyCode == 13) { JS_function(); return false; }" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T22:41:27.813

在你的 onKeyDown 中使用它

```
if(event.keyCode == 13){event.preventDefault(); document.getElementById('okButton').click();} 
```

它将停止发布的默认操作，并让您执行您的操作，例如单击确定按钮。

# scala - Scala：toSeq 与 Seq（某事：_*）

> ID：14015244
> 
> 赞同：4
> 
> 时间：2012-12-23T22:34:28.030
> 
> 标签：scala, pattern-matching

我写了一个名为*extract*的函数，定义如下：

```
def extract(params: String): Seq[String] = {
  val result = params.split(",") map (param => param.trim())
  result toSeq
} 
```

*然后我对提取*结果执行模式匹配，如下所示：

```
extract(myInputString) match {
  case Nil => // do something
  case head :: Nil => // do something
  case head :: tail => // do something
} 
```

每当我的模式匹配**case Nil =>**分支时，我都会得到一个

```
scala.MatchError: WrappedArray(T) (of class scala.collection.mutable.WrappedArray$ofRef) 
```

另一方面，如果我在*提取函数***中将结果 toSeq**替换为**Seq(result:_*)**，则一切正常。

 *谁能解释一下这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:02:43.170

`Nil`并且`::`是仅匹配类型实例的提取器`List`。您正在传递 a `Seq`，这是一个更普遍的特征，可能是也可能不是 a `List`。

当你构建一个`Seq`using`Seq(...)`时，Scala`List`默认构建一个。不能这样说`toSeq`，它通常将底层集合封装在最合适的`Seq`接口中。例如，`Iterator.toSeq`产生 a `Stream`，而`Array.toSeq`产生 a `WrappedArray`。

这就是为什么您的代码在您调用时不起作用的原因`toSeq`；`String.split`产生一个`Array`（它是来自原始 Java`String`类的方法），并`map`维护它的类型。您可以添加一个案例来处理实例`Seq`或让您的`extract`方法返回一个`List`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:36:12.707

对于 general `Seq`s，您按如下方式进行匹配：

```
extract(myInputString) match { 
  case Seq() => ...
  case Seq(head) => ...
  case Seq(head, tail @ _*) => ...
} 
```

Scala 2.10 具有`Seq`与 on 等效的提取器`List`，因此只需替换为`Nil`和`Seq()`就可以了：`::``+:`

```
extract(myInputString) match {
  case Seq() => ...
  case head +: Seq() => ...
  case head +: tail => ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T22:57:40.243

**现在，终极比赛**

```
extract("a, b") match { 
  case Seq() => "0"
  case Seq(a, b, _*) => "many"
  case Seq(a, _*) => "1"
} 
```

而且，我再次有点怀疑 - 一切都在`List`这里。

**...**

`toList`，或者您的变体`Seq(someething: _*)`将再次创建，`List`*

# javascript - jQuery从输入框中删除部分值

> ID：14015249
> 
> 赞同：0
> 
> 时间：2012-12-23T22:35:07.897
> 
> 标签：javascript, jquery, regex, textinput

如果您看到我的 JSFiddle（帖子底部），我的主要问题是当我从左侧输入框中删除标签时，它们没有从右侧框中删除，我不知道该怎么做它。

基本上我需要从第二个到最后一个逗号之后出现的输入框中删除值的一部分。

**我的问题更详细：**

我正在创建堆栈溢出样式的标记表单。

目前我有2个输入框。左边的那个是用户将使用的那个。当他们将标签添加到此框时，标签的样式为 span 标签，因此看起来对用户友好。

同时，标签也添加到右侧的输入框中（我将隐藏）。右边的框必须有每个标签用逗号分隔，因为这是提交表单时必需的格式。

我到目前为止，但问题是当我从第一个框中删除标签时，它们并没有从右边的框中删除..我不确定该怎么做。也许我必须匹配字符串？

代码：

html:

```
<span id="tags"></span><input id="enterTag" type="text" />

<input id="hiddenbox" type="text"/> 
```

JS：

```
$('#enterTag').keydown(function(event) {
    var tag = $(this).val();
    // 188 is comma, 13 is enter
    if (event.which === 188 || event.which === 13) {
        if (tag) {
            $('#tags').append('<span>' + tag + '</span>');
            $(this).val('');
           $('#hiddenbox').val($('#hiddenbox').val() + tag+', ');
        }
        event.preventDefault();
    }
    // 8 is backspace
    else if (event.which == 8) {
        if (!tag) {
            $('#tags span:last').remove();
            event.preventDefault();
        }
    }
});​ 
```

JSFiddle：http: [//jsfiddle.net/greylien/pUfNu/9/](http://jsfiddle.net/greylien/pUfNu/9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T22:47:47.613

尝试

```
$('#enterTag').keydown(function(event) {
    var tag = $(this).val();
    // 188 is comma, 13 is enter
    if (event.which === 188 || event.which === 13) {
        if (tag) {
            $('#tags').append('<span>' + tag + '</span>');
            $(this).val('');
           $('#hiddenbox').val($('#hiddenbox').val() + tag+', ');
        }
        event.preventDefault();
    }
    // 8 is backspace
    else if (event.which == 8) {
        if (!tag) {
            $('#tags span:last').remove();
            var str = $('#hiddenbox').val();
            var str_a = str.split(',');
            str_a.pop();
            str_a.pop();
            if(str_a.length>0){
                var str_val = str_a.join(',')+', ';
            }else{
                var str_val = '';
            }
            $('#hiddenbox').val(str_val );
            event.preventDefault();
        }
    }
});​ 
```

js文件：

> [http://jsfiddle.net/pUfNu/11/](http://jsfiddle.net/pUfNu/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T22:50:10.123

您可以使用正则表达式执行此操作，只需从字符串中删除最后一段：

```
else if (event.which == 8) {
    if (!tag) {
        $('#tags span:last').remove();
        $("#hiddenbox").val($("#hiddenbox").val().replace(/,[^,]+,\s$/, ", "));
        event.preventDefault();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T22:51:02.070

```
$('#enterTag').keydown(function(event) {
    var tag = $(this).val();
    // 188 is comma, 13 is enter
    if (event.which === 188 || event.which === 13) {
        if (tag) {
            $('#tags').append('<span>' + tag + '</span>');
            $(this).val('');
            $('#hiddenbox').val($('#hiddenbox').val() + tag+', ');
        }
        event.preventDefault();
    }
    // 8 is backspace
    else if (event.which == 8) {
        if (!tag) {
            $('#tags span:last').remove();
            event.preventDefault();
            var s = $('#hiddenbox').val();
            l = s.lastIndexOf(',');
            s=s.substr(0,l);
            l = s.lastIndexOf(',');
            s=s.substr(0,l);
            $('#hiddenbox').val(s);
        }
    }
});​ 
```

[http://jsfiddle.net/alexgeorgiou/TdTZV/1/](http://jsfiddle.net/alexgeorgiou/TdTZV/1/)

# coldfusion - 关闭目录浏览

> ID：14015250
> 
> 赞同：3
> 
> 时间：2012-12-23T22:35:13.030
> 
> 标签：coldfusion, coldfusion-10

在ColdFusion 10 内置的webserver 上，如何打开目录浏览

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T23:06:35.707

它设置在`[ColdFusion dir]/cfusion/runtime/web.xml`.

[Tomcat 配置文档](http://tomcat.apache.org/tomcat-6.0-doc/default-servlet.html)。

# c++ - C++ 数据存储替代 Python pickle

> ID：14015252
> 
> 赞同：2
> 
> 时间：2012-12-23T22:35:41.980
> 
> 标签：c++, python, pickle

今年秋天，我用 Python 为编程课做了一个项目，有一个 20 题风格的游戏，可以从用户的反应中学习。它使用基于对问题的是/否响应的树，并为每个决定以及动物在到达“分支”末端时提出独特的问题。

在课程快结束时，我们在 C++ 中做了一些工作（但我对它还是很陌生），我想在我的休息时间制作一个 C++ 版本的项目——这将使它更容易运行例如，一个可执行文件。但是，我发现 C++ 没有太多用于 pickle 式数据存储的选项，而且我认为 Boost.serialization 或 Boost.Python 不会特别适合这种情况。

还有其他选择吗，或者您对如何在 C++ 中以另一种方式处理数据有什么建议？

原始的 Python 代码包括：

```
 def check(self):
        correct, lastnode = self.ask(self.root) #lastnode is the closest guess to the new animal
        if correct =='n':
            print("Rats! I didn't get it. Please help me improve.")
            newanimal = AnTreeNode(input("What is your animal? "))
            oldanimal = lastnode
            newquestion = input("Please enter a yes/no question that would\n select between a(n) %s \
and a(n) %s: " %(newanimal,lastnode.data))+" "
            direction = input("What would be the correct answer for a(n) %s? " %newanimal)
            newnode = AnTreeNode(newquestion, parent = lastnode.parent)
            if lastnode.parent == None:
                self.root = newnode
            elif lastnode.parent.yes == lastnode:
                newnode.parent.yes = newnode
            else:
                newnode.parent.no = newnode
            if direction == 'y':
                newnode.yes, newnode.no = newanimal, oldanimal
            elif direction == 'n':
                newnode.yes, newnode.no = oldanimal, newanimal
            newanimal.parent = newnode
            oldanimal.parent = newnode
            self.dumpTree()
        elif correct == 'y':
            print("I am soooo smart!")

    def loadTree(self):
        try:
            f = open(self.treefile, "rb")
            self.root = pickle.load(f)
        except:
            self.root = AnTreeNode("frog")  

    def dumpTree(self):
        pickle.dump(self.root, open(self.treefile, 'wb')) 
```

如果我将数据保存到文件或数组中，我想不出一种使树工作的方法（而且我并不特别想制作一个动态数组，尽管如果将内容存储在数组中我可以弄清楚最终工作了。）这些问题是我不确定如何引用特定节点。任何其他选项，或关于如何使用这些选项的想法？谢谢！（还有圣诞快乐！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:39:41.430

实际上 boost::serialization 效果很好，学习基础也不是那么难。

但是，您可能会考虑一些更高级别的库，例如协议缓冲区。这样，您就可以拥有适用于您的 python 和 C++ 版本的数据库。

*编辑*： boost::python 不是正确的解决方案，因为它只允许进行绑定。用它来保存数据真的很痛苦。

Boost serialize 允许序列化（然后轻松地保存在磁盘上）C++ 结构。只需尝试文档中的示例。

协议缓冲区是一种序列化格式，允许以二进制格式交换数据。格式定义明确，因此您可以从不同的语言读取/写入并交换数据。在代码内部操作更容易，例如 XML：[http](http://code.google.com/p/protobuf/) ://code.google.com/p/protobuf/ 但是，我认为它需要比 boost::serialize 更多的努力。任何方式，都值得学习，并且对进一步的项目有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T15:32:12.153

[http://www.picklingtools.com](http://www.picklingtools.com)上有一个开源 C++ 库 ，允许您在 C++ 中腌制对象（可能允许您重新使用 Python 项目中的腌制文件）。它最适合序列化标准 Python 数据结构（dict、list、tuples、ints、float 等），但也可以处理一些需要工作的类（毕竟，Python 类通常使用 dict 作为命名空间来实现）。

一个简单的例子，展示了如何使用 picklingtools 库（并让它与 C++ 和 Python 一起工作）

```
#include "chooseser.h"
#include <iostream>

int main (int argc, char **argv)
{
   // Create a Python style dictionary
   Val v = Tab("{'a':1, 'b':2.2, 'c':'three', 'nested':{ 'zz':1 }");
   v["d"] = "something";

   // print out a nested key
   cout << v["nested"]["zz"] << endl;  

   // Pickle the data structure to disk
   DumpValToFile(v, "state.p0", SERIALIZE_P2);

//  # Python side would read this same file with
// >>> import cPickle
// >>> result = cPickle.load( file('state.p0') ) # load fiigures out which prototcol

} 
```

我可能会使用字典或列表来构建你的树：

```
questions_dict = { 'data': 'COW', 'left': None, 'right': { ''data':'CAT', left': None, 'right': None } }
print questions_dict['right']['data'] # Right child's data

LEFT = 1; RIGHT = 2; DATA = 0
questions_list = ["COW", None, ["CAT", None, None] ]
print questions_list[RIGHT][DATA]  # Right child's data 
```

有了它，您可以在 C++ 和 Python 之间来回切换字典或列表，然后做您需要的事情。您可以按原样使用所有内容。

在文档选项卡下的网站上有关于如何在 C++ 中腌制和取消腌制的重要文档。开始的最佳位置可能是 [http://www.picklingtools.com/documentation](http://picklingtools.com/documentation)和[用户指南](http://www.picklingtools.com/html/usersguide.html#the-c-experience)。

*警告！前方危险！* 您可以使用 C++ 序列化构建类（因此您在 Python 中的相同类将具有 C++ 等价物），但这很重要；y 更困难：如果您可以保持在标准 Python 数据结构中，您的生活会容易得多。为此，您必须在系统中注册一个带有其构造函数的 C++ 类。您必须具有构建功能（请参见下面的简单示例）：

```
// When registering things with the factory, they take in some tuple
// and return a Val: REDUCE tend to be more for built-in complicated
// types like Numeric, array and complex.  BUILD tends to more for
// user-defined types.
typedef void (*FactoryFunction)(const Val& name, 
                                const Val& input_tuple, 
                                Val& environment,  
                                Val& output_result);

// Example of how user-defined classes would probably serialize: the
// user-defined classes tend to be built with BUILD instead of REDUCE,
// which passes slightly different arguments to the tuple.  As an
// example, magine a simple Python class:
//
//   class Scott(object) :
//     def __init__(self, n) : self.data = int(n)
//
// A dumps(a,2) (where a= Scott(100)) looks like
// '\x80\x02c__main__\nScott\nq\x01)\x81q\x02}q\x03U\x04dataq\x04Kdsb.'/
//
// type_object: a tuple (string_name, args). i.e., ('__main__\nScott\n', ()) 
// input: a dictionary                       i.e., {'data', 100 }
inline void BuildScottFactoryFunction (const Val& type_object, 
                       const Val& input,
                       Val& /* environment */,
                       Val& output_result)
{
  cout << "SCOTT:type_object:" << type_object << endl;
  cout << "SCOTT:input:" << input << endl;

  string name = type_object(0);
  Tup&   args = type_object(1);
  cout << "name:" << name << " args:" << args << endl;

  if (name!="__main__\nScott\n") throw runtime_error("Not right name");
  Val& result = input("data");
  output_result = result;
} 
```

然后你必须在你自己的 PickleLoader 中注册这个类。

```
PickleLoader p(buffer, buffer_len);
p.registerFactory("__main__\nScott\n", BuildScottFactoryFunction); 
```

你可以让它工作，这样你就可以让 Python 和 C++ 类看起来和感觉一样，并使用 pickle 进行通信，但它比看起来更难（部分原因是 C++ 没有真正的运行时自省概念（它仅限于 RTTI ))，所以你往往不得不手动地用元组、字典、列表的术语来描述你的整个 C++ 类。然后用 pickle loader 注册这些函数。可以做到，但考虑到您的问题的简单性质，我会坚持使用现有的 Python 数据结构（列表、字典、元组、整数、浮点数、字符串、无）并使用它们来表示您的 20 个问题树。

# python - 在pygtk中隐藏窗口标题栏

> ID：14015253
> 
> 赞同：2
> 
> 时间：2012-12-23T22:36:03.280
> 
> 标签：python, gtk, pygtk

我正在尝试使用 python 在 GTK 中获得一个带有边框装饰但没有标题栏的窗口

我认为这可以在 QT 中完成

```
QMainWindow(parent, Qt::FramelessWindowHint), 
```

set_decorated 为 false 不符合我的需要，因为我还需要窗口周围的常规边框。

我了解了 GDK 常量和 GDK WM 装饰。但我完全迷失了

我也在vala语言中找到了这句话，但我不知道如何在pygtk中做到这一点

```
this.get_window().set_decorations(Gdk.WMDecoration.BORDER); 
```

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T16:48:28.413

使用

```
self.get_window().set_decorations(Gdk.WMDecoration.BORDER) 
```

在 show_all() 解决了我的问题之后

# java - DataSource 无法转换为 com.mchange.v2.c3p0.PooledDataSource

> ID：14015258
> 
> 赞同：1
> 
> 时间：2012-12-23T22:36:50.203
> 
> 标签：java, jdbc

我正在尝试使用此代码创建一个 context.xml：

```
 ComboPooledDataSource cpds = new ComboPooledDataSource();
    try {
        cpds.setDriverClass( "net.sourceforge.jtds.jdbc.Driver" ); //loads the jdbc driver     
        cpds.setJdbcUrl( "jdbc:jtds:sqlserver://10.38.28.77/MyDB" );   
        cpds.setUser("sa");                                  
        cpds.setPassword("password");   
        cpds.setMaxStatements( 180 );
    } catch (PropertyVetoException e) {
        e.printStackTrace();
    }      
    return cpds.getConnection(); 
```

我的意思是，将此硬编码设置转换为 context.xml，例如：

```
 <Resource name="jdbc/MyDBHrd" 
         driverClass="net.sourceforge.jtds.jdbc.Driver"
         maxPoolSize="100"
         minPoolSize="15"
         acquireIncrement="1"
         auth="Container"
         maxStatements="50"
         idleConnectionTestPeriod="3600"
         testConnectionOnCheckin="true"
         automaticTestTable="connection_test"
         maxIdleTime="21600"
         factory="org.apache.naming.factory.BeanFactory"
         type="com.mchange.v2.c3p0.ComboPooledDataSource"
         jdbcUrl="jdbc:jtds:sqlserver://192.168.114.130/MyDB"
         user="sa" password="password" /> 
```

但是这个 context.xml 在使用时：

```
 InitialContext cxt = new InitialContext();
    String jndiName = "java:/comp/env/jdbc/MyDBHrd";
    // Look up our data source
    ComboPooledDataSource dataSource = (ComboPooledDataSource) cxt.lookup(jndiName); 
```

抛出：

```
ClassCastException: org.apache.tomcat.dbcp.dbcp.DataSource cannot be cast to com.mchange.v2.c3p0.PooledDataSource 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:53:11.590

您应该将数据源声明为普通的香草类型，而不是 Combo 的东西。您要求 Tomcat 创建一个数据源，它不会为您创建一个。如果您需要将纯数据源包装在其中之一中，请在 Java 中执行此操作。

# php - PHP preg_match_all 匹配最接近的值

> ID：14015259
> 
> 赞同：0
> 
> 时间：2012-12-23T22:36:56.870
> 
> 标签：php, regex, preg-match, preg-match-all

我的文字是这样的：

```
[if-abc]content of abc[/if] [if-def]content of def[/if] 
```

我想匹配：

```
[if-abc]content of abc[/if] and then [if-def]content of def[/if] 
```

但我当前的功能与整个事情相匹配。我怎样才能使它与关闭 [/if] 标记的第一次出现匹配

```
$m = null;
preg_match_all('/\[if-([a-z-]*)\](.*)\[\/if\]/', $source, $m); 
```

除非在同一行上存在多个条件，否则此方法有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:39:19.887

使用...使您的星量词[不贪婪](http://www.regular-expressions.info/repeat.html#lazy)

```
preg_match_all('/\[if-([a-z-]*)\](.*?)\[\/if\]/', $source, $m); 
```

这样，`.*`构造将从“根本没有符号”状态开始匹配，逐渐扩大它，一次一个符号 - 并且在遇到字符串流中的*第一部分时将停止匹配。* `[/if]`否则，它实际上从消耗*所有*字符串开始，一次释放一个符号 - 并在它面对字符串流的*最后一部分时停止。* `[/if]`

# java - 自函数上次调用以来经过的时间

> ID：14015260
> 
> 赞同：1
> 
> 时间：2012-12-23T22:37:02.903
> 
> 标签：java

我正在尝试编写一个方法，该方法将返回自上次调用该方法以来经过的时间量，它看起来像这样：

```
package JGame.Util;

import java.util.Date;

public class Util{

    protected static Long lastTime = null;

    public static long getLastTime(){
        long time = new Date().getTime();
        if(Util.lastTime == null){
            Util.lastTime = time;
            return 0;
        }
        long ftime = time - Util.lastTime;
        Util.lastTime = time;
        return ftime;
    }
} 
```

然后我在按键事件中调用这样的方法：

```
long lastTime = Util.getLastTime();
if(lastTime > 1000){
    return;
}
System.out.println(lastTime); 
```

我遇到的问题是，当按下键时它会打印出来`lastTime`，但它应该每秒打印一次。

这是输出：

```
122
6
7
13
9
7
10
9
10 
```

在按住键的同时，我期望所有的间隔都非常接近 1 秒。但数字甚至不接近。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T22:42:15.540

你的情况搞错了。看这个：

```
if (lastTime > 1000) {
    return;
} 
```

也就是说，如果该方法最后一次调用是在一秒*多*以前，则不要打印任何内容。因此，如果您快速连续多次调用它，它*总是*会在第一次之后通过此检查。

我怀疑你*认为*你想要

```
if (lastTime < 1000) {
    return;
} 
```

...但这仍然不会真正做你想要的 - 因为现在如果你非常频繁地按下执行该代码，它*只会*在第一次检查时通过。

*如果*超过一秒前，您只需要重置“最后打印”时间。

哦，我建议您使用`System.nanoTime()`而不是`new Date().getTime()`- 它保证单调增加，并且设计用于测量时间差异而不是“当前”挂壁时间。我也会让这*不仅仅是*使用静态变量。我会创建一个允许“阈值”的类，并有一个方法来查看该阈值是否已通过，如果是，则重置计时器：

```
public class TimeRegulator {
    private final long periodMilliseconds;

    private long lastTick = 0L; // 1970 will be long before the current time :)

    public TimeRegulator(long periodMilliseconds) {
        this.periodMilliseconds = periodMilliseconds;
    }

    public boolean checkTime() {
        long now = System.nanoTime();
        long diffNanos = now - lastTick;
        long diffMilliseconds = TimeUnit.NANOSECONDS.toMillis(diffNanos);
        if (diffMilliseconds < periodMilliseconds) {
            return false;
        }
        lastTick = now;
        return true;
    }
} 
```

此外，考虑注入“获取当前时间”的抽象，以使所有这些都可测试......并考虑使用[Joda Time](http://joda-time.sf.net)而不是内置库:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T22:40:39.060

如果最后一次通话距离**超过**1 秒，您将返回，我认为如果距离不到 1 秒，您应该**返回**。

你的代码永远不会做（除非更正）是打印一个高于 1000 的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T22:42:19.683

你的 if 语句是倒置的：

```
if(lastTime > 1000){
    return;
} 
```

如果最后一个间隔超过一秒，您将返回，这与您所描述的相反。尝试将其更改为`if(lastTime < 1000){`

否则我看不出你的代码有什么问题。

# css - 像 Google Play 这样的响应式网格？

> ID：14015263
> 
> 赞同：1
> 
> 时间：2012-12-23T22:38:08.970
> 
> 标签：css, jquery-mobile, responsive-design

我想知道是否有类似 Google Play 商店（应用程序）正在使用的响应式网格 ui？或者有人有一个例子吗？

我正在使用 JQM 和 Cholatechip ui 构建一个移动 webapp，我想实现一个响应式网格 ui 来填充屏幕..所以它看起来像 Google Play 商店的主屏幕（充满图像就像按钮一样）..

可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:04:30.537

有没有可能——绝对是的。

近年来，已经开发出一些非常好的解决方案来帮助您入门，其中[Twitter Bootstrap](http://twitter.github.com/bootstrap/)和[Zurb Framework](http://foundation.zurb.com/)是可用的两个最完整的响应式解决方案。

这两种解决方案都在社区中被广泛采用，Twitter Bootstrap 在社区资源方面可能略领先（EG，[http://www.bootstraphero.com/the-big-badass-list-of-twitter-bootstrap-resources](http://www.bootstraphero.com/the-big-badass-list-of-twitter-bootstrap-resources)）。

如果我要构建一个 Google Play 响应式网站，除了这两个框架中的任何一个，我都不会使用任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T22:51:19.683

这当然是可能的。不知道任何 Google Play 示例，但您可以查看此网站以开始使用[网格布局](http://www.responsivegridsystem.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T23:25:35.950

1140现在是非常好的现代网格。[在这里检查](http://cssgrid.net/)

# php - 通过 html 形式在 mysql 中插入数据（以及更多..）

> ID：14015265
> 
> 赞同：0
> 
> 时间：2012-12-23T22:38:41.053
> 
> 标签：php, html, mysql, forms, row

首先：我是 MYSQL/PHP 的新手 :)。我正在编写一个简单的脚本来学习 php/mysql，但我遇到了几个问题。如果其中一些已经在这个网站上被问过，我真的很抱歉，但我确实搜索了它们，但它们没有与我的意图相结合，所以请不要只 -1 这个帖子！

我有一个带有一些表的数据库。其中一个表名为“leerlingen”，我想将数据添加到该表中。我来自荷兰，“leerlingen”的意思是“学生”。所以，我想在表格中添加一个学生。该表有 4 个内容：leerling_id、leerling_naam、leerling_nummer 和 klas_id。最后一个很奇怪吧？不，因为我有另一个表，只有一列：klas_id。不过，那是以后的事了。

“Klas”的意思是“小组”（是的，我正在学习你们荷兰语哈哈：D），而且我有几个小组。但是，您可以通过另一种形式添加一个新组。

让我们开始吧：我创建了一个 HTML 表单：

```
<!-- start form -->

    <form action="insert_leerling.php" method="post">
<input type="text" name="leerling_naam" class="inp-form">
<input type="text" name="leerling_nummer" class="inp-form">

<?php

$con = mysql_connect("localhost","root","root");
if (!$con)
  {
   die('Could not connect: ' . mysql_error());
  }

mysql_select_db("sms", $con);

 $query = "SELECT * FROM klas ORDER BY klas_id";
 $result = mysql_query($query);

echo "<select class='inp-form' id='klas_id'>\n";

while ($row = mysql_fetch_assoc($result)) {
  if (1 == 1) {
    echo '<option name="'.htmlspecialchars($row['klas_id']).'">'.htmlspecialchars($row['klas_id']).'</option>';
  }
}

echo "</select>";

?>
            <input type="submit" value="Voeg toe" class="form-submit" />

    </form>

<!-- end form  --> 
```

因此，插入了 3 个内容：leerling_naam（表示学生姓名）、leerling_nummer（表示学生编号 = 手机号码）和 klas_id。我从小 php 脚本中获取 klas_id，因此用户会看到一个包含所有 klas（组）的 html 下拉菜单。当我运行表单时，它会将您发送到这段代码（另一页）：

```
 <?php
    $con = mysql_connect("localhost","root","root");
    if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("sms", $con);

$leerling_naam = $_POST['leerling_naam'];
$leerling_nummer = $_POST['leerling_nummer'];
$klas_id = $_POST['klas_id'];

$sql_insert = mysql_query("
                           INSERT INTO leerlingen 
                           (leerling_naam, leerling_nummer, klas_id) 
                           VALUES 
                           ('$leerling_naam', '$leerling_nummer', '$klas_id')
                         ");

?> 
```

现在，这里有问题..

1.  'klas_id' 没有插入到表中，它只是 blanco。
2.  我希望第一列（leerling_id，这是 mysql 表中的正常 id）一直为 +1，我没有使用那段代码。当我添加新数据时，leerling_id 为 +1，但是当我删除第一行时（假设我踢了一个学生），数据并没有自己约会（哈哈，“更新”这个词）

如果你已经读到这里：干得好。我的英语不是那么好（如果你发现一些戏剧性的语法错误，你可以告诉我:)）。我也明白这很难理解，对此感到抱歉..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:43:42.363

```
echo "<select class='inp-form' id='klas_id'>\n"; 
```

应该读

```
echo "<select name='klas_id' class='inp-form' id='klas_id'>\n"; 
```

您没有为您的选择表单元素命名。在这种情况下，Id 和 Name 不可互换。

在回答您的第二个问题时，您为什么希望数据完全按顺序排列？没有简单的方法可以使数据库记录始终按顺序排列，尤其是当这是行的主键时。

而不是从数据库中删除记录，我建议这是“软记录删除”的一个很好的例子，也就是说，在您的表中添加一个名为“活动”的新列，其数据类型为`ENUM('Y','N')`. 如果要删除，只需将此字段标记为`'N'`，查询学生时，只查找`'Y'`活动列中带有a的记录。

如果您想在查询中返回带有序号的学生，请查看行号：`@rownum:=@rownum+1`尽管此数字绝对`id`与数据库中的 没有直接链接。

# javascript - MongoDB / Node.js - 网站崩溃但数据库已更新

> ID：14015273
> 
> 赞同：0
> 
> 时间：2012-12-23T22:40:19.090
> 
> 标签：javascript, json, node.js, mongodb

我之前发过一个帖子，有点类似，但我还没有修复它。

首先，这是我的终端：

```
23 Dec 22:31:23 - Serving request for url[GET] /team
23 Dec 22:31:23 - Successfully created team with Name : Japan
23 Dec 22:31:23 - Serving request for url[GET] /team
TypeError: Cannot read property 'teamName' of undefined
    at module.exports (/home/declan/nodeapps/tournamentManager/routes/index.js:126:24)
    at callbacks (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:160:37)
    at param (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:134:11)
    at pass (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:141:5)
    at Router._dispatch (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:169:5)
    at Object.router (/home/declan/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:32:10)
    at next (/home/declan/nodeapps/tournamentManager/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.handle (/home/declan/nodeapps/tournamentManager/app.js:34:5)
    at next (/home/declan/nodeapps/tournamentManager/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.static (/home/declan/nodeapps/tournamentManager/node_modules/express/node_modules/connect/lib/middleware/static.js:55:61) 
```

所以它成功地在数据库中创建了一个很好的条目，但是在此之后，当它尝试重定向回“/team”时，页面崩溃了：

`index.js`路线文件

```
/**
  * Add a new Team to database
  */
  app.post('/team', function(req, res) {
    util.log('Serving request for url[GET] ' + req.route.path);
    var teamForm = req.body.teamForm;
    var name = teamForm.teamName;

    var newTeam = new Team();
    newTeam.name = name;

    newTeam.save(function(err, savedTeam){
      var message = '';
      var retStatus = '';
      if(!err){
        util.log('Successfully created team with Name : ' + name);
        message = 'Successfully created new team : ' + name;
        retStatus = 'success';
      } else {
        util.log('Error while creating team : ' + name + ' error : ' + util.inspect(err));
        if(err.code === 11000){
          message = 'Team already exists';
        }
        retStatus = 'failure';
      }
      res.json({
        'retStatus' : retStatus,
        'message' : message
      });
    });
  }); 
```

从以前开始我取得了一些进展，我已经添加`bodyParser()`到`app.js`我以前没有做过的文件中，但我被告知它正在崩溃，因为`req.body`没有被解析或者它被认为是错误的格式。

这里也是`team.js`页面：

```
var newTeam = function(){
    $('#teamConfirm').click(function(){
        newTeam.teamForm();
    });
};

newTeam.teamForm = function(){

    var teamForm = {
        teamName : $('#teamName').val()
    };
    // Basic validation
    $.post('/team', {'teamForm' : teamForm}, function(response) {
            console.log(response);
    });
};

newTeam(); 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:06:47.940

问题出在您的`$.post`电话上，它应该发送带有`contentType=application/json`标题的数据。不要问为什么？

所以如果你把它改成这样：

```
$.ajax({
  url:'/team',
  type:"POST",
  data: JSON.stringify({teamFrom:teamFrom}),
  contentType:"application/json; charset=utf-8",
  dataType:"json",
  success: function(response){
    console.log(response);
  }
}) 
```

在节点方面，用于调试 chekc 中的内容`req.body`，通过`console.log( 'body: ', req.body );`

更多阅读 [Jquery - 如何使 $.post() 使用 contentType=application/json？](https://stackoverflow.com/questions/2845459/jquery-how-to-make-post-use-contenttype-application-json)

和

[如何检索 POST 查询参数？](https://stackoverflow.com/questions/5710358/how-to-get-post-query-in-express-node-js)，特别是来自 SooDesuNe 的评论

# string - 致命错误 函数名必须是字符串 24

> ID：14015276
> 
> 赞同：0
> 
> 时间：2012-12-23T22:40:28.467
> 
> 标签：string, php

我在 linux 服务器中收到此错误

> 致命错误：函数名称必须是第 24 行 /home/calaniz1/public_html/system/get_answers.php 中的字符串

```
function print_answers($dom){

$endl = "<br />";
$html = file_get_dom($dom);
$s=2;
$answer = array();
$answer_id = array();
$count_total = 0;
$count_index = 0;
$errflag = false;
foreach ($html('.closed') as $div) {
    foreach ($div('select') as $ab){    
        $id = $ab->name;
        $count_total ++ ;
        $count_index = $count_total -1 ;
        $answer_id[$count_index] = $id;
        $answer[$count_index] = $ab->onmouseover;
    } 
```

但是在我的电脑中我没有收到任何错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:43:47.907

我猜想`file_get_dom()`返回一个闭包/匿名函数，甚至是一个带有`array($object, $methodName)`. 第一个适用于 PHP5.3，第二个适用于 PHP5.4。要么，要么你在做一些完全错误的事情。

经过简短的研究：[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/) `$html`应该是一个对象，您正在寻找的是`$html->find('.closed')`

错误的库，关于评论它是这个：[http](http://code.google.com/p/ganon/) ://code.google.com/p/ganon/ 糟糕，当一切都使用相同的标识符且没有命名空间时；）

# macos - 在 mac os 上运行 azure 时出现 Node.js 异常 201

> ID：14015282
> 
> 赞同：2
> 
> 时间：2012-12-23T22:41:28.420
> 
> 标签：macos, node.js, azure

[我刚刚按照http://www.windowsazure.com/en-us/manage/linux/how-to-guides/command-line-tools/](http://www.windowsazure.com/en-us/manage/linux/how-to-guides/command-line-tools/)中的说明安装了 windows azure sdk 。

安装后，我按照说明运行命令“azure account download”，但出现以下错误：

节点.js:201

```
 throw e; // process.nextTick error, or 'error' event on first tick
          ^ 
```

错误：找不到模块“天蓝色”

```
at Function._resolveFilename (module.js:332:11)
at Function._load (module.js:279:25)
at Module.require (module.js:354:17)
at require (module.js:370:17)
at Object.<anonymous> (/usr/local/azure/lib/utils.js:21:13)
at Module._compile (module.js:441:26)
at Object..js (module.js:459:10)
at Module.load (module.js:348:31)
at Function._load (module.js:308:12)
at Module.require (module.js:354:17) 
```

似乎 node.js 找不到 azure 模块。我是 node.js 和 azure 的新手，有人能给我一些关于这个错误的建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:29:02.690

尝试使用此命令在您的机器上安装 azure 模块。

`npm install -g azure`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:11:16.890

正如评论中的前一张海报所说的那样

npm install -g azure-cli

# ios - 自定义颜色的 UIProgressView 子类化

> ID：14015286
> 
> 赞同：1
> 
> 时间：2012-12-23T22:42:19.807
> 
> 标签：ios, uiview, colors, uiprogressview

我正在尝试继承 ProgressView 以用作游戏的健康栏，当我尝试覆盖 setProgress 时，它不会被调用。

我希望根据进度浮点值更改颜色。

这是我尝试使用的代码：

```
@interface AHHealthbar : UIProgressView
...
- (void)setProgress:(float)progress animated:(BOOL)animated
{

if (progress > .5)
{
    self.progressTintColor = [UIColor greenColor];
}

if (progress <= .5 && self.progress >= .2)
{
    self.progressTintColor = [UIColor yellowColor];
}

if (progress < .2) {
    self.progressTintColor = [UIColor redColor];

}

[super setProgress:progress animated:animated];
} 
```

有没有人知道如何覆盖它？还是有更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:46:27.440

您可能还需要覆盖`-setProgress:`.

# java - AVD Eclipse “很遗憾，计算器已停止。” 新错误

> ID：14015292
> 
> 赞同：-1
> 
> 时间：2012-12-23T22:44:15.423
> 
> 标签：java, android, eclipse, avd

现在我的计算器应用程序出现了一个新问题，因此我可以打开应用程序，然后单击一系列按钮，例如 1 x 3 =

当我单击 ButtonEquals 按钮时，我得到“不幸的是，计算器已停止”。我似乎无法弄清楚为什么。

原始线程：[在 Eclipse AVD 中，我收到“不幸的是，计算器已停止”。API 级别 16](https://stackoverflow.com/questions/14014356/in-eclipse-avd-i-get-a-unfortunately-calculator-has-stopped-api-level-16)（修复了较早的问题）

MainActivity.Java

```
package com.papps.calculator;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    int num1 = 90;
    int num2 = 90;
    int op = 0;
    int ans = 0;

    TextView answer;

    Button ButtonEquals;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        answer = (TextView) findViewById(R.id.answer);
        ButtonEquals = (Button) findViewById(R.id.ButtonEquals);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    //ONE
    public void none(View v) {
        if(num1 == 90) {
            num1 = 1;
        }
        else if(num2 == 90) {
            num2 = 1;
         }
    }
    //TWO
    public void ntwo(View v) {
        if(num1 == 90) {
            num1 = 2;
        }
        else if(num2 == 90) {
            num2 = 2;
         }
    }
    //THREE
    public void nthree(View v) {
        if(num1 == 90) {
            num1 = 3;
        }
        else if(num2 == 90) {
            num2 = 3;
         }
    }
    //FOUR
    public void nfour(View v) {
        if(num1 == 90) {
            num1 = 4;
        }
        else if(num2 == 90) {
            num2 = 4;
         }
    }
    //FIVE
    public void nfive(View v) {
        if(num1 == 90) {
            num1 = 5;
        }
        else if(num2 == 90) {
            num2 = 5;
         }
    }
    //SIX
    public void nsix(View v) {
        if(num1 == 90) {
            num1 = 6;
        }
        else if(num2 == 90) {
            num2 = 6;
         }
    }
    //SEVEN
    public void nseven(View v) {
        if(num1 == 90) {
            num1 = 7;
        }
        else if(num2 == 90) {
            num2 = 7;
         }
    }
    //EIGHT
    public void neight(View v) {
        if(num1 == 90) {
            num1 = 8;
        }
        else if(num2 == 90) {
            num2 = 8;
         }
    }
    //NINE
    public void nnine(View v) {
        if(num1 == 90) {
            num1 = 9;
        }
        else if(num2 == 90) {
            num2 = 9;
         }
    }
    //ZERO
    public void nzero(View v) {
        if(num1 == 90) {
            num1 = 0;
        }
        else if(num2 == 90) {
            num2 = 0;
         }
    }
    //operators

    //MULTIPLY
    public void multiply(View v) {
        op = 1;
    }
    //Divide
    public void divide(View v) {
        op = 2;
    }
    //Add
    public void add(View v) {
        op = 3;
    }
    //Subtract
    public void subtract(View v) {
        op = 4;
    }

    //EQUALS
    //TextView answer = (TextView) findViewById(R.id.answer);
    //Button ButtonEquals = (Button) findViewById(R.id.ButtonEquals);
    public void equals(View v) {
        switch(op) {
        case 1 :
            answer.setText(num1 * num2);
        case 2 :
            answer.setText(num1 / num2);
        case 3 :
            answer.setText(num1 + num2);
        case 4 :
            answer.setText(num1 - num2);
        }
    }
} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="97dp"
        android:layout_marginTop="16dp"
        android:text="@string/app_name"
        tools:context=".MainActivity" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginLeft="14dp"
        android:layout_marginTop="15dp"
        android:text="1"
        android:onClick = "none" />

    <Button
        android:id="@+id/Button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignLeft="@+id/textView1"
        android:layout_marginLeft="15dp"
        android:text="2"
        android:onClick = "ntwo" />

    <Button
        android:id="@+id/Button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/Button2"
        android:layout_alignBottom="@+id/Button2"
        android:layout_marginLeft="34dp"
        android:layout_toRightOf="@+id/Button2"
        android:text="3"
        android:onClick = "nthree" />

    <Button
        android:id="@+id/Button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button1"
        android:layout_below="@+id/button1"
        android:layout_marginTop="36dp"
        android:text="4"
        android:onClick = "nfour" />

    <Button
        android:id="@+id/Button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/Button4"
        android:layout_alignBottom="@+id/Button4"
        android:layout_alignLeft="@+id/Button2"
        android:text="5"
        android:onClick = "nfive" />

    <Button
        android:id="@+id/Button6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/Button5"
        android:layout_alignBottom="@+id/Button5"
        android:layout_alignLeft="@+id/Button3"
        android:text="6" 
        android:onClick = "nsix" />

    <Button
        android:id="@+id/Button7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Button4"
        android:layout_centerVertical="true"
        android:text="7" 
        android:onClick = "nseven" />

    <Button
        android:id="@+id/Button8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@+id/Button3"
        android:text="8" 
        android:onClick = "neight" />

    <Button
        android:id="@+id/Button9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Button6"
        android:layout_centerVertical="true"
        android:text="9"
        android:onClick = "nnine" />

    <Button
        android:id="@+id/Button0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Button8"
        android:layout_below="@+id/Button8"
        android:layout_marginTop="29dp"
        android:text="0"
        android:onClick = "nzero" />

    <Button
        android:id="@+id/ButtonM"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="X"
        android:onClick = "multiply" />

    <Button
        android:id="@+id/ButtonD"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/Button7"
        android:text="/"
        android:onClick = "divide" />

    <Button
        android:id="@+id/ButtonS"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/textView1"
        android:text="-"
        android:onClick = "subtract" />

    <Button
        android:id="@+id/ButtonA"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="14dp"
        android:layout_toRightOf="@+id/ButtonS"
        android:text="+"
        android:onClick = "add" />

    <TextView
        android:id="@+id/answer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/ButtonD"
        android:layout_marginBottom="24dp"
        android:layout_toRightOf="@+id/ButtonD"
        android:text="Answer"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/ButtonEquals"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/answer"
        android:layout_alignBottom="@+id/answer"
        android:layout_toLeftOf="@+id/Button0"
        android:text="="
        android:onClick = "equals" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:19:14.273

你还没有发布你的 LogCat 堆栈跟踪，所以我们只能假设。

你可能想试试

```
 public void equals(View v) {
    switch(op) {
    case 1 :
        answer.setText(""+(num1 * num2));
    case 2 :
        answer.setText(""+(num1 / num2));
    case 3 :
        answer.setText(""+(num1 + num2));
    case 4 :
        answer.setText(""(num1 - num2));
    }
} 
```

我认为 TextView 没有正确更新。还要确保改变`num1`并`num2`成为`double`价值观。这样你的分裂就不会被截断。

# php - 地图上最新的 Foursquare 签到

> ID：14015293
> 
> 赞同：1
> 
> 时间：2012-12-23T22:44:17.013
> 
> 标签：php, javascript, jquery, foursquare

我想在我的网站上显示我上次在 Foursquare 签到的地图。

有一篇很棒的博客文章解释了如何在[**此处**](http://elie.im/blog/web/display-your-latest-foursquare-checkins-on-your-blog-using-foursquare-api-v2-and-php)执行此操作。

但是，我担心我会达到 Foursquare API 速率限制（[**每小时 500 个请求**](https://developer.foursquare.com/overview/ratelimits)），因为地图将显示在网站的侧边栏中，所以每次有人查看网站（或浏览到网站上的不同页面）它将对 Foursquare API 进行新的查询。如您所见，即使流量很小，也可能会达到速率限制。

有没有办法解决这个问题，也许是通过某种缓存或通过 Foursquare API 以外的方法检索我的最后一次签入信息？无论哪种方式，签到都需要显示在谷歌地图上。

我想用 PHP 或 Javascript/jQuery 编写任何脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:49:01.443

您绝对不应该在每次加载页面时都发出 API 请求，这很容易超过每小时配额，假设您有足够的访问者来解决这个问题。

相反，您应该让一些后端定期轮询您的最新签入并存储它，然后让您的博客 JS 从您的后端请求您的最新签入位置。

更好的是，你可以编写你的后端来接受来自 Foursquare API[的实时更新](https://developer.foursquare.com/overview/realtime)，这样它就不需要轮询——每次你签入时它都会得到一个 POST，它可以存储该信息以显示它在你的博客上。

# java - 同时访问 servlet 时出现 OutOfMemoryError

> ID：14015295
> 
> 赞同：0
> 
> 时间：2012-12-23T22:44:24.843
> 
> 标签：java, jdbc

**错误：**

```
java.lang.OutOfMemoryError: unable to create new native thread
    java.lang.Thread.start0(Native Method)
    java.lang.Thread.start(Unknown Source)
    java.util.Timer.<init>(Unknown Source)
    com.mchange.v2.c3p0.impl.C3P0PooledConnectionPoolManager.poolsInit(C3P0PooledConnectionPoolManager.java:158)
    com.mchange.v2.c3p0.impl.C3P0PooledConnectionPoolManager.<init>(C3P0PooledConnectionPoolManager.java:283)
    com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getPoolManager(AbstractPoolBackedDataSource.java:508)
    com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128) 
```

上面的错误是同时访问servlet时发生的

**更新：Java代码：**

```
public class MyServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;
    private static final Log LOGGER = LogFactory.getLog(MyServlet.class);

   private void doRequest(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {

        CallableStatement stmt = null;
        ResultSet rs = null;

        Connection conn = null;
        try {

            conn = getConnection();

            stmt = conn.prepareCall("{call sp_SomeSPP(?)}");
            stmt.setLong(1, getId());

            rs = stmt.executeQuery();

            // set mime type
            while (rs.next()) {
                if (rs.getInt(1)==someValue()) {
                    doStuff();
                    break;
                }
            }

        // ADD THESE LINES
        if (rs != null) { rs.close(); rs = null; }
        if (stmt != null) { stmt.close(); stmt = null; }

            stmt = conn.prepareCall("{call sp_SomeSP(?)}");
            stmt.setLong(1, getId());

            rs = stmt.executeQuery();
            if (rs.next()) {
                // do stuff
            }

            RequestDispatcher rd = getServletContext().getRequestDispatcher("/SomeJSP.jsp");
            rd.forward(request, response);
            return;
        } catch (NamingException e) {
            LOGGER.error("Database connection lookup failed", e);
        } catch (SQLException e) {
            LOGGER.error("Query failed", e);
        } catch (IllegalStateException e) {
            LOGGER.error("View failed", e);
        } finally {
            try {
                if (rs!=null && !rs.isClosed()) {
                    rs.close(); 
                }
            } catch (NullPointerException e) {
                LOGGER.error("Result set closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Result set closing failed", e);
            }
            try {
                if (stmt!=null) stmt.close();
            } catch (NullPointerException e) {
                LOGGER.error("Statement closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Statement closing failed", e);
            }
            try {
                if (conn != null){
                    conn.close();
                    conn = null;
                }
            } catch (NullPointerException e) {
                LOGGER.error("Database connection closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Database connection closing failed", e);
            }
        }

   }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doRequest(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doRequest(request, response);
    }

    protected static Connection getConnection() throws NamingException, SQLException {
    ComboPooledDataSource cpds = new ComboPooledDataSource();
    try {
        cpds.setDriverClass( "net.sourceforge.jtds.jdbc.Driver" ); //loads the jdbc driver     
        cpds.setJdbcUrl( "jdbc:jtds:sqlserver://10.38.28.77/MyDB" );   
        cpds.setUser("sa");                                  
        cpds.setPassword("password");   
        cpds.setMaxStatements( 180 );
    } catch (PropertyVetoException e) {
        e.printStackTrace();
    }      
    return cpds.getConnection();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:11:49.860

您产生了太多线程并超出了操作系统施加的限制。您产生这么多线程的原因可能是因为您每次使用数据库连接时都在实例化一个新的连接池。尝试将连接池实例化一次到静态字段 ( `final static ComboPooledDataSource pool`) 上。

但是请注意，共享连接池引用的推荐方法是使用 Spring 或 Guice 等依赖注入框架。

# php - PHP 中的 {{#}} 是什么？

> ID：14015296
> 
> 赞同：-2
> 
> 时间：2012-12-23T22:44:24.847
> 
> 标签：php, mustache

我在 PHP 代码中看到`{{#variable}}`并使用了很多。`{{/variable}}`尤其是在 MVC 和 Mustache 模板化应用程序中。我也看到`{{^variable}}`并`{{/variable}}`使用过。它们是什么，更重要的是它们的用途是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:49:12.650

这是 Mustache 模板。你可以在[这里阅读它的文档](http://mustache.github.com/mustache.5.html)。

# `{{#variable}}`和`{{/variable}}`：部分

> 根据当前上下文中键的值，部分会渲染文本块一次或多次。
> 
> 一个部分以磅开头，以斜杠结尾。也就是说， `{{#person}}`开始一个“人”部分，同时`{{/person}}`结束它。
> 
> ## 错误值或空列表
> 
> 如果 person 键存在且值为 false 或为空列表，则不会显示井号和斜杠之间的 HTML。
> 
> 模板：
> 
> ```
> 显示。
> {{#nothin}}   
>   从未展示过！
> {{/nothin}}
> ```
> 
> 哈希：
> 
> ```
> {   
>     “人”：真的，
> }
> ```
> 
> 输出：
> 
> 显示。

# `{{^variable}}`和`{{/variable}}`: 倒置部分

> 倒置部分以插入符号（帽子）开始，以斜线结束。那是`{{^person}}`开始一个“人”倒置部分，而 `{{/person}}`结束它。
> 
> 虽然节可用于基于键的值渲染文本一次或多次，但反转节可基于键的反向值渲染文本一次。也就是说，如果键不存在、为假或为空列表，它们将被呈现。

# delphi - 在 TStrings 中搜索

> ID：14015297
> 
> 赞同：4
> 
> 时间：2012-12-23T22:44:46.637
> 
> 标签：delphi, delphi-xe2

如何检查 TStrings 中是否存在特定字符串？例如，我有包含大量文本的 TStrings，我想检查字符串是否为“Hello！” 存在于本文中。

“你好！” 只是一个示例字符串。它可以是任何东西。字符串可以位于其他字符串之间，例如“something Hello！something”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T23:01:04.057

在 TStrings 文本属性上使用 pos 函数：

```
if pos('Hello!', strings.text) > 0 then
begin
end 
```

如果字符串出现在 TStrings 中的任何位置，这将找到该字符串。要找到它出现的字符串，您需要遍历对每个字符串应用 pos 函数的字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T10:46:56.587

您可以使用 TStrings 的 IndexOf 函数

```
if Strings.IndexOf('Hello')<>-1 then
    caption:='Found'; 
```

如果未找到该字符串，此函数返回 -1，否则返回该字符串在 TStrings 中的索引；

# python - 使用 BeautifulSoup 进行 HTML 解析

> ID：14015300
> 
> 赞同：1
> 
> 时间：2012-12-23T22:45:30.963
> 
> 标签：python, beautifulsoup, loops

我正在尝试遍历一堆 html 标签，但需要一些指导。我将如何使用 Beautiful Soup 遍历一堆表格行，并输出链接文本？

HTML：

```
<div id="thisDiv">
    <table class="thisTable">
        <tr>
            <td><a href="blablabl">BLABLABLA1</a></td><td><a href="blablabla2">BLABLABLA2</a></td>
        </tr>
        <tr>
            <td><a href="blablab3">BLABLABLA3</a></td><td><a href="blablabla4">BLABLABLA4</a></td>
        </tr>
        <tr>
            <td><a href="blablab5">BLABLABLA5</a></td><td><a href="blablabla6">BLABLABLA6</a></td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:58:21.323

您不必遍历行。只需找到该表并搜索它包含的所有锚点：

```
soup = BeautifulSoup(doc)
table = soup.find('table', {'class':'thisTable'}) 
for a in table.findAll('a'):
    print a.text 
```

# asp.net - Asp.Net WebPages 网站 - 如何添加 WebApi 控制器

> ID：14015301
> 
> 赞同：3
> 
> 时间：2012-12-23T22:45:33.670
> 
> 标签：asp.net, asp.net-web-api, asp.net-webpages

我正在使用 Asp.Net Webpages 2 和 Razor (C#) 构建我的网站。

我尝试插入 WebApi 控制器，但得到的只是 404。控制器是默认控制器。

我什至尝试添加

```
RouteTable.Routes.MapHttpRoute(
name: "DefaultApi",
routeTemplate: "api/{controller}/{id}",
defaults: new { id = System.Web.Http.RouteParameter.Optional }
); 
```

我仍然得到404。

还需要做什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:06:19.963

我做的。在 Global.asax 你需要添加

```
<%@ Import Namespace="System.Web.Routing" %>
<%@ Import Namespace="System.Web.Http" %> 
```

并在 Application_Start

```
RouteTable.Routes.MapHttpRoute( name: "DefaultApi", routeTemplate: "api/{controller}/{id}", defaults: new { id = System.Web.Http.RouteParameter.Optional } ); 
```

现在它正在按应有的方式工作。它以前不起作用，因为我在 Global.asax.cs 中尝试了相同的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:12:34.803

您也可以使用 _AppStart.cshtml 代替 Global.asax。

```
@using System.Web.Http
@{
    System.Web.Routing.RouteTable.Routes.MapHttpRoute(
           name: "DefaultApi",
           routeTemplate: "api/{controller}/{id}",
           defaults: new { id = System.Web.Http.RouteParameter.Optional }
       );

} 
```

我已经将它用于简单的案例来获取信息，但不确定它是否完全有效。

# javascript - Greasemonkey 警报以确认关闭窗口不起作用？

> ID：14015302
> 
> 赞同：0
> 
> 时间：2012-12-23T22:45:37.843
> 
> 标签：javascript, firefox, greasemonkey

我正在研究应该是一个简单的 Greasemonkey 脚本，以确认如果您输入了冗长的消息，您想要关闭窗口。

几年前我有这个脚本的工作版本，但它工作的网站发生了变化，所以我希望修复它。但是，我什至无法得到一个简单的确认工作：

```
function confirmClose() {
    return 'You have a long message typed. Are you sure you want to close?';
}

window.addEventListener('beforeunload', confirmClose, true); 
```

我很肯定脚本正在它应该运行的页面上运行，但是每当我尝试关闭窗口时，我都没有收到任何确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:46:24.503

作为一项安全措施，[Firefox 不再允许页面为`beforeunload`对话框设置自定义消息。](https://bugzilla.mozilla.org/show_bug.cgi?id=588292)因此，该`return`语句在使用时没有任何效果`addEventListener`（您应该这样做）。

要阻止页面卸载，您需要`preventDefault()`像这样使用：

```
window.addEventListener ('beforeunload', confirmClose, false);

function confirmClose (zEvent) {
    zEvent.preventDefault ();
} 
```

这将抛出不可更改的对话框：

![标准页面退出验证对话框](../Images/c3d4d553e0b9d45de93e1c40120f33ae.png)

如果要显示自定义消息，可以使用***额外的***对话框来实现，如下所示：

```
window.addEventListener ('beforeunload', confirmClose, false);

function confirmClose (zEvent) {
    var doQuitPage = confirm (
        "You have a long message typed. Are you sure you want to close?"
    );
    if ( ! doQuitPage) {
        zEvent.preventDefault ();
    }
} 
```

但请注意两个重要的烦恼：

1.  如果用户按下`OK`，则页面将退出而不再混乱。
    但是，如果用户按下`Cancel`，则会弹出*Are you sure*`Stay on Page`对话框，用户仍然必须按下。

2.  根据 HTML5 规范，未来版本的 Firefox 可能会在[事件](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload#Notes)[期间](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload#Notes)[停止允许。`confirm()``beforeunload`](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload#Notes)

# ruby - 如何使用终端选项运行 Ruby 脚本

> ID：14015303
> 
> 赞同：1
> 
> 时间：2012-12-23T22:46:03.577
> 
> 标签：ruby, bash, terminal

我用 Ruby 构建了一个名为[Vanilla](https://github.com/adhithyan15/vanilla)的 LaTeX 预处理器。它提供了一个名为 的命令行工具`vanilla`，用于`Optparse`解析一些命令行选项。我使用`OCRA`gem 将其编译为 exe，这仅在 Windows 上有用。我想为 Mac 和可能的 Linux 做同样的事情。我知道 Mac 电脑自带 Ruby，你可以打电话`ruby vanilla.rb some options`来实现我想要的。但我正在寻找一种本地方式，以便我可以`vanilla some options`在终端中进行操作。谁能帮我找到任何关于实现这一目标的好教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:01:39.560

`PATH`在 Unix shell 中，可执行文件的名称在环境变量指定的目录列表中查找。因此，如果您使您的脚本可执行并将其放在用户的某个位置`PATH`，他们将能够像任何其他实用程序一样运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:51:01.460

将脚本移动到`bin`项目目录中命名的文件夹中，然后从中删除`.rb`。在文件顶部，输入`#!/usr/bin/env ruby`. 你完成了！

# uml - OCL 中的递归

> ID：14015305
> 
> 赞同：1
> 
> 时间：2012-12-23T22:46:23.023
> 
> 标签：uml, ocl

假设我在 UML 中有这个类图：

![OCL中的递归](../Images/40674b11e532cc8aa631dd28a98ad22d.png)

如何在 OCL 中指定 A 的实例不包含在 list_of_As 递归中？换句话说，A 的实例可能不包含在 A.list_of_As 中，也不包含在 A.list_of_As 中的所有 A 实例的所有 list_of_As 中……？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:16:19.693

您可以使用[传递闭包运算符closure()](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.ocl.doc/help/ProgrammersGuide.html)来获取A 列表。然后，只需检查您不想在该列表中看到的元素是否不存在。

# python - Django 模型作为 Ajax 响应的一部分

> ID：14015308
> 
> 赞同：0
> 
> 时间：2012-12-23T22:46:39.877
> 
> 标签：python, django, json, serialization, model

我想为我的 Ajax 请求放置一个 Django 模型作为响应。目前我的views.py中有这个：

```
def get_account(request, account_id):

    try:
        account = Account.objects.get(pk=account_id)
        success = True
        error_message = None
    except Account.DoesNotExist:
        success = False
        error_message = 'This account does not exist'

    results = {
        'success': success,
        'error_message': error_message,
    }

    return HttpResponse(
        json.dumps(results),
        mimetype='application/json') 
```

我想将`account`模型添加到`results`字典中。`account.__dict__`不会这样做，因为它会引用其中的其他对象。

我找到了 de [django serialize function](https://docs.djangoproject.com/en/1.5/topics/serialization/)，它完全按照我想要的方式对其进行序列化，只是它直接生成了一个 Json 字符串，所以我最终会在 Json 对象中得到一个 Json 字符串（如果你有大型模型，这对带宽不利，因为Json 字符串 get 全部逃逸）。那么我需要在 Javascript 中再次对其进行 json_decode 。

此外，django 序列化函数只接受对象列表，所以我必须创建一个只有一个对象的列表，当我反序列化它时，它会采用列表的第一个值（这不是一个超级大问题，但它添加直到堆）。

如果您可以将模型序列化为python dict，那就太好了。然后你可以随心所欲地用它做任何事情。

有人遇到过同样的问题吗？你是怎么解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:31:52.103

您可以序列化为 Python dict 并将其传递给转换为 JSON：

```
qs_as_dict = serializers.serialize('python', qs)
results['objects'] = qs_as_dict 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T22:51:12.053

与其返回模型对象，不如只返回响应所需的值？

```
results.update({'account': {'id': account.id, 'title': account.title}}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T00:41:38.183

在丹尼尔的回答的帮助下，我能够做到：

```
def get_account_data(account):
    fields = serializers.serialize('python', [account, ])[0]['fields']
    return {field: str(fields[field]) for field in fields} 
```

因为我通过 Ajax 发送它，所以我需要一切都是字符串。如果您使用“python”方法进行序列化，则某些内容（例如 datetime 字段）将在其中包含一个函数（例如`datetime.date(2012, 12, 23)`）。此函数创建一个仅包含字符串值的 dict。

# javascript - 是否可以即时调用不存在的方法然后创建它？

> ID：14015309
> 
> 赞同：3
> 
> 时间：2012-12-23T22:46:45.577
> 
> 标签：javascript, jquery-plugins

这个问题的上下文如下：我已经使用 jQuery 推荐的设计模式编写了一个 jQuery 插件，其中您传递一个字符串作为插件的第一个参数来调用所需（和预定义）的方法，该方法是你的插件方法。如：

```
$("selector").php('method_name'); 
```

然而，对于我的特定插件（它只是通过一个简单的 AJAX 处理程序调用 PHP 函数），我想为其用户提供以这种方式调用给定后端 PHP 函数的能力：

```
$("selector").php.strlen(param); // As an example of calling the PHP strlen function 
```

其中 .strlen 不是 .php 对象（或任何其他对象）的已定义方法。换句话说，有没有办法阻止 JavaScript 抛出异常并捕获用户试图调用的所需方法名称的名称，而实际上该方法尚未定义且不存在？

出于显而易见的原因，我不想为每个 PHP 函数定义方法名称（或接口）。这将是大量的代码开销并且非常耗时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T23:04:14.440

ECMAScript Harmony 支持允许您拦截属性访问的[代理。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Proxy)不幸的是，它还没有得到广泛的支持（Firefox 18 支持它）。

```
var php = new Proxy({}, {
    get: function (target, name) {
        return function () {
            var args = Array.prototype.slice.call(arguments);
            alert('Here you would call ' + name + '(' + args.join(', ') + ')');
        };
    }
});

php.strlen('hello'); 
```

有一个东西叫做[`__noSuchMethod__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/noSuchMethod)，但同样，它似乎并没有得到广泛的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T22:57:57.263

您可以将其包装在 try catch 块中。

```
try {
   $("selector").php.strlen(param);
} catch(err) {
   // do sth
} 
```

# java - 具有嵌入对象的实体的休眠条件

> ID：14015310
> 
> 赞同：11
> 
> 时间：2012-12-23T22:46:55.210
> 
> 标签：java, hibernate, orm, hibernate-criteria

我有一个实体“UserDetails”，它具有以下变量：

1.  字符串用户 ID
2.  字符串用户名
3.  UserContact userContact（其中 UserContact 是一个 Embeddable 类）

UserContact 具有以下变量：

1.  字符串电话号码
2.  字符串电子邮件
3.  弦城

获取以下列表的 Hibernate 标准是什么：

userName = 'sam' 和 city = 'New York' 的用户

我尝试了以下操作并得到了运行时异常，它无法识别变量“city”：

```
List<UserLogin> list = session.createCriteria(UserLogin.class)
    .add(Restrictions.eq("userName","sam"))
    .add(Restrictions.eq("city", "New York"))
    .list(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-23T22:53:37.243

哦，我想通了...

```
List<UserLogin> list = session.createCriteria(UserLogin.class)
   .add(Restrictions.eq("userName","sam"))
   .add(Restrictions.eq("userContact.city", "New York"))
   .list(); 
```

傻，只需要添加'userContact.city'而不是'city'，其中userContact是我实体中UserContact类的对象。

# javascript - javascript中每一行的Textarea限制字符

> ID：14015312
> 
> 赞同：0
> 
> 时间：2012-12-23T22:47:09.437
> 
> 标签：javascript

我正在尝试使用 javascript 限制 textarea 中每一行的字符数。

我在这里看到了一些例子，但并不完全符合我的要求。

我写了一些只有当你每次添加超过限制时才可以的东西。

换句话说，我每行有 10 个字符的限制，如果你总是输入至少 10 个字符就可以了，但是如果你想在第一行输入 5 个字符并按回车键移动到下一行，它不会让我保留将我重定向到第一行并且无法真正弄清楚如何克服这个问题。

```
<textarea onchange="Validate(this)" onkeyup="Validate(this)" class="txtValidation15   textarea" id="txtpr1-0" cols="30" rows="20" name="txtpr1-0"></textarea>

function Validate(control)
 {
    var limit = 10;
    var v = control.value; //var v = $(this).val();
    var vl = v.replace(/(\r\n|\n|\r)/gm,"").length;
    var newtext="";
    for (var i = 0; i < v.length ; i = i + limit)
    {
        v = v.replace(/(\r\n|\n|\r)/gm,"");
        var n = v.substr(i,limit)
        if(i+limit < v.length)
            n= n + '\n';

        newtext += n;
    }
    control.value = newtext;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:05:26.117

首先将它分成几行，这样你的计数是每行而不是聚合。

```
function Validate(control) {
    var limit = 10;
    var v = control.value; //var v = $(this).val();
    var lines = v.split(/(\r\n|\n|\r)/);
    var newtext = "";
    for (var i = 0; i < lines.length ; i++) {
        var line = lines[i];
        if(line.length > limit) {
          line = line.substr(0,limit);
        }
        newtext += line;
    }
    control.value = newtext;
} 
```

将此函数粘贴到 textarea 中会将其截断为：

```
0123456789
function V
    var li
    var v 
    var li
    var ne
    for (v
        va
        if

        }
        ne
    }
    contro
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:33:48.057

做这样的事情怎么办？

JAVASCRIPT：

```
function Validate(control)
 {
    var limit = 10;
    var v = control.value; //var v = $(this).val();
    var vl = v.replace(/(\r\n|\n|\r)/gm,"").length;
    var newtext="";
    for (var i = 0; i < v.length ; i++)
    {
    if (i%limit==0){
        v = v.replace(/(\r\n|\n|\r)/gm,"");
        var n = v.substr(i,limit)
            n= n + '\n';
        newtext += n;
        }
    }
    control.value = newtext;
} 
```

# ruby-on-rails - Rails - 根据与日期相隔的时间更改 html 元素

> ID：14015317
> 
> 赞同：3
> 
> 时间：2012-12-23T22:48:01.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, if-statement, datepicker

好吧，我的标题可能不是描述我正在尝试做的事情的最佳方式，但一般来说，我如何根据远离的时间量来完成更改 div 的颜色（通过应用不同的 css 类）日期？

我正在使用这个：

```
<%= todo.due ? todo.due.strftime("%b %d") : nil %> 
```

显示截止日期。

它包含在一个 div 中，如果到期日期超过一周、3 天、今天或过期，我想更改该 div 的类。

是否应该使用某些控制器逻辑来处理，或者视图中的 if else 语句是否有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T04:51:38.983

你可以在你的助手中做到这一点

```
def css_select(due) 
  css_class = "passed" #=> deadline already passed
  days_due = (due - Date.today).to_i
  if days_due > 0
     css_class = case  days_due
                   when (0..3) then "threedays" #=> between 3 days
                   when (3..7) then "within7days" #=> between 7 days
                   else
                   "morethanweek" #=> more than a week
                end 
  end
  css_class
end 
```

请注意，`threedays, passed, within7days and morethanweek`是您可能想要更改名称的 css 类。

这些是我做的测试

```
p css_select(Date.parse("2012-12-01")) #=> passed
p css_select(Date.parse("2012-12-25")) #=> with in 3 days
p css_select(Date.parse("2012-12-31")) #=> with in 7 days
p css_select(Date.parse("2013-01-10")) #=> more then 7 days 
```

所以在你看来

```
<div class=<%= css_select(Date.parse(todo.due)) %>
  #your code goes here
</div> 
```

因此，当您在视图中时，此答案的灵感来自@Valery Kvon 给出的答案

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T01:51:55.017

太容易了……

帮手：

1) 白天：

```
def style_by_daytime
  case Time.now.hour
  when (6..14) then "morning"
  when (14..20) then "daytime"
  when (20..23) then "evening"
  when (0..6) then "night"
  end
end 
```

2) 时间之前

```
def style_by_days_gone(by_date)
  ago = (Date.today - by_date).round
  case ago
  when (1..7) then "week"
  when (8..14) then "two_weeks"
  when (15..30) then "month"
  when (31..180) then "several_months"
  else
    if ago > 180
      "many_time_ago"
    end  
  end
end 
```

看法：

```
<% if todo.due %>
 <div class="<%= style_by_days_gone(todo.due) %>">
   <%= todo.due.strftime("%b %d") %>
 </div>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T23:18:42.280

您可以使用[content_tag 帮助](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag)程序并提供自定义类值。类值可以放在帮助器中。

看法：

```
<%= content_tag :div, :class => todo_class(todo) do -%>
  <%= todo.title %>
<% end -%> 
```

帮手：

```
def todo_class(todo)
  if todo.due
    'due'
  ...
  end
end 
```

# android - attr.xml 的最小虚拟内容可消除“最后”日食警告

> ID：14015318
> 
> 赞同：0
> 
> 时间：2012-12-23T22:48:29.437
> 
> 标签：android

在 Eclipse 中编程时，我通常会启用几乎所有警告，因为它们可以帮助我发现可能的编程错误或疏忽。然后我试图编写我所有的程序，这样我**就不会**收到任何警告。但是，对于 Android，总是有最后一个警告，我觉得很烦人：

```
* AUTO-GENERATED FILE.  DO NOT MODIFY.
 *
 * This class was automatically generated by the
 * aapt tool from the resource data it found.  It
 * should not be modified by hand.
 */

package foo.bar.someappname;

public final class R {
    ...
    public static final class attr {  /* <<< this empty class creates a compiler warning */
    }
    ...
} 
```

显然，attr-class 是指可以在文件 attr.xml 中定义的一些可选样式数据。我不想定义任何自己的样式，但是对于 attr.xml 来说，在该 attr 类中出现“某物”以使最后一个警告被静音的最小**虚拟内容是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T16:52:33.360

同时，我阅读了更多关于这种风格的东西，并创建了一个 attr.xml 文件，内容如下：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="DummyAttribute_to_silence_compiler_warnings" format="reference|color" />
</resources> 
```

这会在 R.java 文件中生成一个 attr.class，如下所示：

```
 public static final class attr {
        /** <p>May be a reference to another resource, in the form "<code>@[+][<i>package</i>:]<i>type</i>:<i>name</i></code>"
or to a theme attribute in the form "<code>?[<i>package</i>:][<i>type</i>:]<i>name</i></code>".
<p>May be a color value, in the form of "<code>#<i>rgb</i></code>", "<code>#<i>argb</i></code>",
"<code>#<i>rrggbb</i></code>", or "<code>#<i>aarrggbb</i></code>".
         */
        public static final int DummyAttribute_to_silence_compiler_warnings=0x7f010000;
    } 
```

（Android 工具添加了冗长的注释）。

我更喜欢更短的内容或不引起这样的评论（我什至不理解自己），但由于这是一个自动生成的文件，不适合人类消费，我可以忍受......

# c# - 我在哪里将 lambda 表达式标记为异步？

> ID：14015319
> 
> 赞同：271
> 
> 时间：2012-12-23T22:48:30.917
> 
> 标签：c#, lambda, resharper, windows-store-apps, async-await

我有这个代码：

```
private async void ContextMenuForGroupRightTapped(object sender, RightTappedRoutedEventArgs args)
{
    CheckBox ckbx = null;
    if (sender is CheckBox)
    {
        ckbx = sender as CheckBox;
    }
    if (null == ckbx)
    {
        return;
    }
    string groupName = ckbx.Content.ToString();

    var contextMenu = new PopupMenu();

    // Add a command to edit the current Group
    contextMenu.Commands.Add(new UICommand("Edit this Group", (contextMenuCmd) =>
    {
        Frame.Navigate(typeof(LocationGroupCreator), groupName);
    }));

    // Add a command to delete the current Group
    contextMenu.Commands.Add(new UICommand("Delete this Group", (contextMenuCmd) =>
    {
        SQLiteUtils slu = new SQLiteUtils();
        slu.DeleteGroupAsync(groupName); // this line raises Resharper's hackles, but appending await raises err msg. Where should the "async" be?
    }));

    // Show the context menu at the position the image was right-clicked
    await contextMenu.ShowAsync(args.GetPosition(this));
} 
```

...Resharper 的检查抱怨说，“*因为没有等待此调用，所以在调用完成之前继续执行当前方法。考虑将 'await' 运算符应用于调用结果*”（与评论）。

所以，我在它前面加上了一个“await”，但是当然，我还需要在某个地方添加一个“async”——但是在哪里呢？

* * *

## 回答 #1

> 赞同：423
> 
> 时间：2012-12-23T22:55:44.013

要标记 lambda 异步，只需`async`在其参数列表之前添加：

```
// Add a command to delete the current Group
contextMenu.Commands.Add(new UICommand("Delete this Group", async (contextMenuCmd) =>
{
    SQLiteUtils slu = new SQLiteUtils();
    await slu.DeleteGroupAsync(groupName);
})); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2019-06-14T16:59:34.540

对于那些使用匿名表达式的人：

```
await Task.Run(async () =>
{
   SQLLiteUtils slu = new SQLiteUtils();
   await slu.DeleteGroupAsync(groupname);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-15T15:46:33.700

如果您在 LINQ 方法语法中，则在参数之前应用 async 关键字：

```
 list.Select(async x =>
            {
                await SomeMethod(x);
                return true;
            }); 
```

# http - 如何在 heroku 中使用非 www 域？

> ID：14015322
> 
> 赞同：14
> 
> 时间：2012-12-23T22:48:47.723
> 
> 标签：http, heroku, web, http-status-code-301

我知道他们不支持，但是说真的，怎么办？将A记录指向一个仅向heroku提供301的ip？这听起来真的很愚蠢。我错过了什么吗？

有没有更简单的解决方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-02-17T05:21:21.003

有一个更简单的解决方法。

将您的 www CNAME 指向 myapp.herokuapp.com

然后将您的根 url (myapp.com) 转发到 www.myapp.com

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-24T17:58:46.407

According to [Heroku's documentation](https://devcenter.heroku.com/articles/custom-domains#apex-domains-examplecom):

> Zone apex domains (aka “naked” domains or “bare” domains), for example `example.com`, are not officially supported on Heroku apps, because DNS forbids CNAME records on the zone apex. However, some DNS hosts provide a way to get CNAME-like functionality at the zone apex.
> 
> For each provider, the setup is similar: point the ALIAS or ANAME entry for your apex domain to myapp.herokuapp.com, just as you would with a CNAME record.

Heroku's documentation mentioned these providers with "CNAME" support for zone apex:

*   [ANAME at DNS Made Easy](http://www.dnsmadeeasy.com/technology/aname-records/)
*   [ALIAS at DNSimple](http://support.dnsimple.com/questions/32826-What-is-an-ALIAS-record)

Besides, these providers also work:

*   [CloudFlare](http://blog.cloudflare.com/zone-apex-naked-domain-root-domain-cname-supp)
*   [{A}Record](http://www.arecord.net/)

And most DNS providers (such as [ClouDNS](http://www.cloudns.net/features/) and [Namecheap FreeDNS](http://www.namecheap.com/products/freedns.aspx)) have free webhop / web redirect, so you don't need to setup your own web server for the redirect.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-13T04:13:27.383

对于 NameCheap：@ 转到“ [http://www.example.com](http://www.example.com) ” www 转到“myHeroku.herokuapp.com”。

另外，请查看[此答案](https://stackoverflow.com/questions/13715556/how-to-point-subdomain-to-a-heroku-app-and-root-domain-to-another-heroku-app)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-29T22:04:07.247

Heroku 没有自己的 DNS 管理，因此您需要将您的 dns 托管在外部并将记录指向 heroku。这是解决方案（我使用路由 53 来管理 DNS - 它是免费的）

1.将域添加到heroku- www.example.com ，之后heroku会给出一个CNAME记录

2.将此CNAME记录添加到路由53

3.创建一个名为example.com的s3存储桶并将重定向设置为[https://aws.amazon.com/blogs/aws/root-domain-website-hosting-for-amazon-s3/所说的www.example.com](https://aws.amazon.com/blogs/aws/root-domain-website-hosting-for-amazon-s3/)

4.（如果不需要HTTPS，请跳过此步骤）创建云端实例并使用www.example.com的s3存储桶链接进行配置，并仅为www.example.com添加cname条目。

5.在路由53中，为example.com创建一条A记录&点别名为与s3桶相关的云端链接为example.com点别名s3桶的example.com

6.完成

# css - 清除修复ie8和CSS

> ID：14015323
> 
> 赞同：0
> 
> 时间：2012-12-23T22:49:11.367
> 
> 标签：css, internet-explorer-8, clearfix

一直在做一个网站来尝试学习更多的 css 和 html。

以为一切顺利，直到我尝试在 IE 中向某人展示它（我使用 ff）

当我加载页面时，页脚似乎在错误的位置，我无法弄清楚为什么这是一个屏幕截图[http://www.flickr.com/photos/mattcripps/8300226269/](http://www.flickr.com/photos/mattcripps/8300226269/)

您可以在此处查看该网站的代码 [http://www.deltacars.co.uk/testsite/](http://www.deltacars.co.uk/testsite/)

任何帮助都会很棒，因为这是在做 mt head in。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:03:44.720

`<footer>`是一个html5标签。Internet Explorer 8 或更低版本不支持它。您可以使用像[Modernizr这样的 JavaScript 库](http://modernizr.com/)[shim](http://en.wikipedia.org/wiki/Shim_%28computing%29)来绕过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:06:02.193

我认为您应该将页脚带入 page-wrap div。这将解决问题。还添加*clear:left;* 到页脚 css。

# django - 在 Django 管理应用程序中使用自定义表单

> ID：14015332
> 
> 赞同：1
> 
> 时间：2012-12-23T22:50:35.143
> 
> 标签：django, django-forms, django-admin

我基于 Django 的应用维护了一个预订日历，它使用两个类建模：`Calendar`和`CalendarDay`. `Calendar`是各种模型类的集合，其中`CalendarDay`. `CalendarDay`是实际的“肉”并保存预订信息。

在管理应用程序中，我想将两个模型类一起显示为日历：连续 x 个月，每个月格式化为日历月（顶部的星期几和每周格式化的月份的日期）。

由于这超出了标准 Django 管理界面的功能，我正在研究使用最少修改在管理界面中实现此功能的可能性。到目前为止，我提出了以下方法：

1.  [使用Django Forms API](https://docs.djangoproject.com/en/dev/ref/forms/api/#django.forms.Form)创建自定义表单类。

2.  以某种方式在管理应用程序中注册自定义表单类。

3.  创建自定义模板以将表单呈现为 HTML。

4.  以某种方式将自定义表单绑定到`Calendar`从管理应用程序的列表显示中选择的实例。我知道可以通过将数据字典传递给其构造函数来将表单绑定到数据，但是我不确定如何使用管理表单来执行此操作。

我的问题：这是一种可行的方法吗？如果是，我将如何处理 [2] 和 [4]？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:03:27.373

这实际上比我想象的要容易得多。我最终实现了基于[这篇文章](http://kryogenix.org/days/2008/03/28/overriding-a-single-field-in-the-django-admin-using-newforms-admin)的自定义小部件以及 HTMLCalendar 的子类。

**编辑：** 尽管此答案中描述的方法有效，但我对最终结果并不完全满意。它最终成为一个相当复杂的黑客。我按照我的问题中描述的原始思路重新设计了解决方案，这也很容易：

*   我按照[这里](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)`change_form.html`的描述移动了文件。
*   我修改了该模板并添加了一个新块以包含能够呈现预订日历的模板。
*   我对 Python 的`HTMLCalendar`类进行了子类化，以便它能够处理模型的`CalendarDay`对象`Calendar`并生成`CSS styles`在日历中显示每一天的各种状态所需的内容。

在初始创建新`Calendar`的 时，模板会优雅地向用户显示一条消息，表明还没有`CalendarDay`对象。

最终结果：

![在此处输入图像描述](../Images/d3162e88631fa778bdb3172d34b5fe1d.png)

# .net - EF 5.0 Code First 独立表

> ID：14015333
> 
> 赞同：0
> 
> 时间：2012-12-23T22:50:35.877
> 
> 标签：.net, entity-framework, ef-code-first, entity-framework-5

我正在使用 EF 5.0 Code First 开发具有多个关系数据库表的应用程序。在我尝试添加没有任何关系的表（独立）之前，这非常有效。我的数据库中需要一些这些参考/查找表。我像其他类一样编写我的类，但 EF 似乎忽略它们并且不创建它们。有什么我需要告诉 EF 这些应该独立构建的吗？如何？非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:23:00.827

要让 EF 创建一个表，你需要`DbSet<T>`在你的 中`DbContext`，假设你有这个，它将创建表。

对此的一个警告是，如果你有一个不在你上下文中的东西的外键，EF 也将假定它是数据库的一部分并创建它。我认为这是您所看到的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:06:27.533

EF 应该对“独立”表没有任何限制。

当您构建一次 EF 表时，必须进行其他更改

*   更新 Context 类（的子类`DbContext`）
*   添加迁移脚本（生成将使用新表等更新数据库的 API 调用）
*   更新数据库（运行迁移脚本）。

[你可以在这里](http://msdn.microsoft.com/en-us/data/jj193542)找到非常好的教程。

# c# - 如何在 C# 中计算波信号的混响时间

> ID：14015334
> 
> 赞同：8
> 
> 时间：2012-12-23T22:50:40.033
> 
> 标签：c#, .net, audio, signal-processing

我正在尝试用 C# 开发一个控制台应用程序，它使用 WAV 文件作为输入。应用程序应该按顺序做几件事，如下所示。首先，完整的代码：

```
class Program
{
static List<double> points = new List<double>();
static double maxValue = 0;
static double minValue = 1;
static int num = 0;
static int num2 = 0;
static List<double> values = new List<double>();
private static object akima;
static void Main(string[] args)
{
    string[] fileLines = File.ReadAllLines(args[0]);
    int count = 0;
    foreach (string fileLine in fileLines)
    {
        if (!fileLine.Contains(";"))
        {
            string processLine = fileLine.Trim();
            processLine = Regex.Replace(processLine, @"\s+", " ");
            if (Environment.OSVersion.Platform == PlatformID.Win32NT)
            {
                processLine = processLine.Replace(".", ",");
            }
            string[] dataParts = processLine.Split(Char.Parse(" "));
            points.Add(double.Parse(dataParts[0]));
            double value = Math.Pow(double.Parse(dataParts[1]), 2);
            if (value > maxValue)
            {
                maxValue = value;
                num = count;
            }
            values.Add(value);
        }
        count++;
    }
    for (int i = num; i < values.Count; i++)
    {
        if (values[i] < minValue)
        {
            minValue = values[i];
            num2 = i;
        }
    }
    Console.WriteLine(num + " " + num2);
    int between = num2 - num;
    points = points.GetRange(num, between);
    values = values.GetRange(num, between);
    List<double> defVal = new List<double>();
    List<double> defValPoints = new List<double>();
    alglib.spline1dinterpolant c;
    alglib.spline1dbuildakima(points.ToArray(), values.ToArray(), out c);
    double baseInt = alglib.spline1dintegrate(c, points[points.Count - 1]);
    List<double> defETC = new List<double>();
    for (int i = 0; i < points.Count; i += 10)
    {
        double toVal = points[i];
        defETC.Add(10 * Math.Log10(values[i]));
        defVal.Add(10 * Math.Log10((baseInt - alglib.spline1dintegrate(c, toVal)) / baseInt));
        defValPoints.Add(points[i]);
    }
    WriteDoubleArrayToFile(defValPoints.ToArray(), defVal.ToArray(), "test.dat");
    WriteDoubleArrayToFile(defValPoints.ToArray(), defETC.ToArray(), "etc.dat");
    int end = 0;
    for (int i = 0; i < points.Count; i++)
    {
        if (defVal[i] < -10)
        {
            end = i;
            break;
        }
    }
    //Console.WriteLine(num + " " + end);
    int beginEDT = num;
    int endEDT = num + end;
    double timeBetween = (defValPoints[endEDT] - defValPoints[beginEDT]) * 6;
    Console.WriteLine(timeBetween);
    for (int i = 0; i < points.Count; i++)
    {

    }
    Console.ReadLine();
}
static void WriteDoubleArrayToFile(double[] points, double[] values, string filename)
    {
        string[] defStr = new string[values.Length];
        for (int i = 0; i < values.Length; i++)
        {
        defStr[i] = String.Format("{0,10}{1,25}", points[i], values[i]);
        }
        File.WriteAllLines(filename, defStr);
    }
} 
```

1.  从 WAV 文件中提取十进制/浮点/双精度值
2.  从提取的数据创建一个数组
3.  创建一个能量时间曲线，以类似分贝的方式显示噪音/声音的衰减
4.  从步骤 3 中创建的 ETC 创建衰减曲线
5.  根据这个衰减曲线计算早期衰减时间 (EDT)、T15/T20 和 RT60。
6.  在标准输出中显示这些混响时间。

目前，我有点像这个过程的一半。我会解释我做了什么：

1.  我使用 Sox 将音频文件转换为带有数字的 .dat 文件
2.  我使用 C# 创建了一个数组，方法是简单地拆分上面文件中的每一行并将时间放在 TimesArray 中，并将这些点的值放在 ValuesArray 中。
3.  我通过 GNUPlot 显示一个图表，使用这个函数处理的数据：10 * Math.Log10(values[i]); （其中 i 是 for 循环中迭代 ValuesArray 中所有项目的迭代整数）
4.  这就是我开始陷入困境的地方。我的意思是，在这一步中，我使用来自 Alglib 的 Akima Spline 函数来整合一条线。我正在通过这个数学计算进行施罗德积分（反向）： 10 * Math.Log10((baseInt - alglib.spline1dintegrate(c, toVal)) / baseInt); （其中 baseInt 是计算为完整曲线的基本积分的值，因此我计算了反向施罗德积分的底部部分。c 是使用函数 alglib.spline1dbuildakima 时可用的 spline1dinterpolant，它将 timeArray 作为 x values，valueArray 作为 y 值，c 作为向外的样条线 1d 插值。toval 是点数组的 x 值。使用 for 循环选择特定值。
5.  试过了，真的不行。
6.  和上面一样，我没有真正的价值要展示。

我现在很困惑，因为我不确定这是否是正确的方法。如果有人能告诉我如何在 C# 中以快速响应的方式计算混响时间，我会很高兴听到。做的方式可能和我现在的完全不同，没关系，告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T23:03:49.470

也许您需要以不同的方式处理此问题：

1.  从基础数学开始。找出这些函数的数学公式。
2.  使用一个简单的数学函数并手动计算（在 excel 或 matlab 中）应该是什么值（在所有这些事物中，ETC、DC、EDC、T15、T20、RT60）（一个函数，例如最小数字的正弦波您需要的积分）
3.  然后编写一个单独的程序以在 C# 中评估其中的每一个，并验证您的结果与 excel/matlab 的一致性。

在 C# 中，可能将数据存储在一个类中，然后传递给每个方法进行计算。

你的主要功能应该是这样的：

```
main(){

data = new Data();

//1, 2: 
extract_data(data, filename);

//3: 
energy_time_curve(data)

//...4, 5

//6: 
display_results(data);

} 
```

# python - python - 如何使用python中的切片将列表组合成一个？

> ID：14015336
> 
> 赞同：1
> 
> 时间：2012-12-23T22:51:04.490
> 
> 标签：python, list, slice

我正在尝试将 3 个不同的列表合并到 1 个列表中。我可以用 2 个列表来做到这一点，但是当我添加第三个列表时，我开始收到错误消息

```
ValueError: attempt to assign sequence of size 22 to extended slice of size 17\. 
```

每个不同的列表应该交替。如果列表中没有更多项目要包含在“结果”中，它应该只替换其他 2 个列表。关于如何启用此功能的任何建议？

```
 print len(reddit_feed_dic)      #22
    print len(favorites_feed_dic)   #22
    print len(user_videos)          #6

    result = [None]*(len(favorites_feed_dic)+len(reddit_feed_dic)+len(user_videos))
    print len(result)
    result[::3] = reddit_feed_dic
    result[1::3] = favorites_feed_dic
    result[2::3] = user_videos 
```

这是示例数据的示例：

```
reddit_feed_dic = [r1,r2,r3, ...r22]
favorite_feed_dic = [f1,f1,f3, ...f22]
user_videos = [u1, u2 u3, ...u6] 
```

我希望结果是：

```
result = [r1,f1,u1, 
            r2, f2, u2,
            r3, f3, u3,
            r4, f4, u4,
            r5, f5, u5,
            r6, f6, u6,
            r7,f7,
            r8,f8,
            r9,f9,...

            r22,f22] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:20:54.907

最好的方法是使用文档[`roundrobin`](http://docs.python.org/2/library/itertools.html#recipes)提供的配方[`itertools`](http://docs.python.org/2/library/itertools.html#recipes)：

```
>>> from itertools import cycle, islice
>>> def roundrobin(*iterables):
        "roundrobin('ABC', 'D', 'EF') --> A D E B F C"
        # Recipe credited to George Sakkis
        pending = len(iterables)
        nexts = cycle(iter(it).next for it in iterables)
        while pending:
            try:
                for next in nexts:
                   yield next()
            except StopIteration:
                pending -= 1
                nexts = cycle(islice(nexts, pending))

>>> reddit_feed = ['r1','r2','r3']
>>> favorite_feed = ['f1','f2','f3']
>>> user_videos = ['u1','u2','u3']
>>> list(roundrobin(reddit_feed, favorite_feed, user_videos))
['r1', 'f1', 'u1', 'r2', 'f2', 'u2', 'r3', 'f3', 'u3'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T22:58:30.970

```
>>> from itertools import * 
```

如果您想用以下内容填充空格`None`：

```
>>> list(chain(*izip_longest('abcdef', '12345', '#!$')))
['a', '1', '#', 'b', '2', '!', 'c', '3', '$', 'd', '4', None, 'e', '5', None, 'f', None, None] 
```

如果您根本不想要空项目，并假设起始列表中还没有`None`：

```
>>> filter(lambda x: x is not None, chain(*izip_longest('abcdef', '12345', '#!$')))
['a', '1', '#', 'b', '2', '!', 'c', '3', '$', 'd', '4', 'e', '5', 'f'] 
```

如果您的列表中*确实*有`None`，那么这有点棘手。相同的想法，但不是过滤掉，而是`None`过滤掉一个“空”对象，保证不会出现在原始列表中（因为我们刚刚创建了它！）。

```
def interleave(*iterables):
    null = object()
    return ifilter(lambda x: x is not null, chain(*izip_longest(*iterables, fillvalue=null))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T16:13:40.670

```
 python 3.2

    from itertools import zip_longest

    result = [j for i in zip_longest(list1,list2,list3) for j in i if j!=None] 
```

# c# - WebBrowser OnPropertyChange 事件未触发

> ID：14015340
> 
> 赞同：3
> 
> 时间：2012-12-23T22:51:39.533
> 
> 标签：c#, html, winforms, webbrowser-control, propertychanged

我有一个网页，上面有一个输入按钮。单击此按钮，在特定的 div 中加载一些数据。我的问题是我无法捕捉到这些数据。

下面的代码是我尝试解决这个问题，但没有成功。

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    HtmlElement div_result = webBrowser1.Document.GetElementById("div_result");
    div_result.AttachEventHandler("onpropertychange", new EventHandler(resultEventHandler));
}
private void resultEventHandler(object sender, EventArgs e)
{
    MessageBox.Show("Loaded");
} 
```

如果我点击输入按钮，div 的内容会被修改，但`resultEventHandler`不会触发。

所以，我有两个问题：

1.  这段代码我的错在哪里？
2.  是否有“正常方式”（我的意思是不使用计时器或）在 C# 中 `Aplication.DoEvents()`使用控件来处理 ajax ？`WebBrowser`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T10:46:46.017

我不知道为什么 HtmlElement 事件对您不起作用。但我遇到了同样的问题，并通过使用 COM 包装器解决了它：

```
mshtml.HTMLDocumentClass doc = (mshtml.HTMLDocumentClass)webBrowser1.Document.DomDocument;
mshtml.IHTMLElement2 div_result = (mshtml.IHTMLElement2)doc.getElementById("div_result");
mshtml.HTMLElementEvents2_Event events = (mshtml.HTMLElementEvents2_Event)div_result;
events.onpropertychange += resultEventHandler; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:51:33.690

更改子元素的 innerText 或 innerHTML 不会导致父元素的 onpropertychange 事件触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T03:31:59.680

这可能为时已晚，但无论如何，如果您仍然想知道：

1 - HtmlElement div_result = webBrowser1.Document.GetElementById("div_result"); 第 1 行在网页加载完毕并且浏览器调用 DocumentCompleted 事件时执行。在事件处理程序中，您首先检索指向 DOM 元素“div_result”的指针，然后分配一个名为 div_result 的 HtmlElement 类型变量。

2 - div_result.AttachEventHandler("onpropertychange", new EventHandler(resultEventHandler)); 第 2 行 - 注册“onpropertychange”事件并将方法 resultEventHandler 分配为侦听器方法。

每次您单击网页上的按钮时，按钮（我假设）都处于提交的表单中，这会导致网页加载；顺便说一句，您没有指定单击按钮时使用的发布方法（获取或发布）。当网页下载完成并构建 DOM 元素树时，将调用 DocumentCompleted 事件。您在 DocumentCompleted 事件处理程序方法中执行了上述说明。

每次单击按钮时，都会重新加载网页，并为 onpropertychange 事件重新分配事件侦听器。您只是分配事件侦听器。该事件将永远不会被调用。每次单击按钮时都会定义它。你有一个经典的先有鸡或先有蛋的问题。但是在您的情况下，您的鸡是导致 DocumentCompleted 方法运行的按钮单击事件，该方法会重置该方法中所有变量的状态，并且您的蛋需要在网络上单击按钮之前指向 DIV 元素的 onpropertychange 事件的指针页 。在从尚未构造的 DOM 中获取指针之前，如何将事件侦听器分配给 htmlelement？在包含 DocumentCompleted 方法的类中放置一个布尔标志变量并设置其初始状态。将 div_result 变量移到 DocumentCompleted 方法之外，以增加其范围并在按钮单击事件中保存其状态。这样，您将获得指向 div 元素的指针，并在第一次下载网页时设置其 onpropertychange 事件侦听器。如果您只想设置一个指向 DIV 元素的 onpropertychange 事件侦听器的指针，请添加一个测试（我在下面的示例代码中放置了一个），并且下次单击按钮时，您的事件将触发。笔记！确保在存储指向任何网页元素或其事件的指针后，不要向网页添加或删除任何元素。否则，您将不得不重新解析 DOM 以获取指向元素在 DOM 树中的新位置的指针。

//见下文：

```
class SomeClass
{
    bool DocumentHasLoaded = false;
    HtmlElement div_result = null;

    //Constructor and other methods go here....

    //Then change your DocumentCompleted method to look like this:
    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {

        if (DocumentHasLoaded == false)  // I prefer using a ! before the variable instead
        {
            DocumentHasLoaded = true;    // You will have to create your own appropriately timed mechanism to reset this variable's state should you want to execute the whole process again.
            div_result = webBrowser1.Document.GetElementById("div_result");
            div_result.AttachEventHandler("onpropertychange", new EventHandler(resultEventHandler));
        }
    }
} 
```

为了回答您的第二个问题，我需要有关 DIV 中加载的数据的更多信息；例如，它来自哪里，它是什么类型，以及您能想到的任何其他相关信息。

# android - Android OpenGL 2.0 ES 翻译矩阵

> ID：14015344
> 
> 赞同：0
> 
> 时间：2012-12-23T22:53:07.120
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在尝试创建一个简单的 Android OpenGL 2.0 游戏来弄湿我的脚。我参考了有关 OpenGL 的 Androids 教程并启动并运行它，将我的方块移动到我想要的位置，现在我正在尝试通过触摸翻译它。

我读过我必须取消投影当前的正方形......但不理解这一点。如果对在广场上执行翻译有任何帮助，下面是我的代码...

```
 private float mPreviousY;

    @Override
    public boolean onTouchEvent(MotionEvent e) {
        // MotionEvent reports input details from the touch screen
        // and other input controls. In this case, you are only
        // interested in events where the touch position changed.
    float y = e.getY();

    switch (e.getAction()) {
        case MotionEvent.ACTION_MOVE:

            float dy = y - mPreviousY;

            // reverse direction of rotation to left of the mid-line
            if (y < getHeight() / 2) {
              dy = dy * -1 ;
            }

            mRenderer.mOffSet += dy;
            requestRender();
    }

    mPreviousY = y;
    return true;
} 
```

我的 onDrawFrame：

```
 @Override
public void onDrawFrame(GL10 unused) {

    // Draw background color
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Set the camera position (View matrix)
    Matrix.setLookAtM(mViewMatrix, 0, 0, 0, -50, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

    Matrix.translateM(mModleViewProjMatrix, 0, 0, mOffSet, 0);

    // Calculate the projection and view transformation
    Matrix.multiplyMM( mModleViewProjMatrix, 0, mProjMatrix, 0, mViewMatrix, 0);

    // Draw square
    mPaddle.draw(mModleViewProjMatrix);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:19:48.323

非投影意味着反转顶点在变换时所经历的过程。正向变换是

```
v_eye = Modelview · v

v_clip = Projection · v_eye

v_ndc = v_clip / v_clip.w 
```

现在你要做的就是扭转这个过程。我建议你看看 Mesa 的 GLU 函数 gluUnProject 的源代码，可以在这里找到[http://cgit.freedesktop.org/mesa/glu/tree/src/libutil/project.c](http://cgit.freedesktop.org/mesa/glu/tree/src/libutil/project.c)

### 更新

取消投影本质上是在逆转这个过程。

我们看一下 Mesa 的 GLU gluUnProject 代码：

```
GLint GLAPIENTRY
gluUnProject(GLdouble winx, GLdouble winy, GLdouble winz,
        const GLdouble modelMatrix[16], 
        const GLdouble projMatrix[16],
                const GLint viewport[4],
            GLdouble *objx, GLdouble *objy, GLdouble *objz)
{
    double finalMatrix[16];
    double in[4];
    double out[4]; 
```

首先评估复合变换`Projection · Modelview`……</p>

```
 __gluMultMatricesd(modelMatrix, projMatrix, finalMatrix); 
```

……倒置，即倒置；

```
 if (!__gluInvertMatrixd(finalMatrix, finalMatrix)) return(GL_FALSE);

    in[0]=winx;
    in[1]=winy;
    in[2]=winz;
    in[3]=1.0; 
```

然后将窗口/视口坐标映射回 NDC 坐标

```
 /* Map x and y from window coordinates */
    in[0] = (in[0] - viewport[0]) / viewport[2];
    in[1] = (in[1] - viewport[1]) / viewport[3];

    /* Map to range -1 to 1 */
    in[0] = in[0] * 2 - 1;
    in[1] = in[1] * 2 - 1;
    in[2] = in[2] * 2 - 1; 
```

并乘以复合投影模型视图的逆

```
 __gluMultMatrixVecd(finalMatrix, in, out); 
```

最后检查，所谓的同质分量是非零的

```
 if (out[3] == 0.0) return(GL_FALSE); 
```

并且同质划分倒置。

```
 out[0] /= out[3];
    out[1] /= out[3];
    out[2] /= out[3]; 
```

导致投影过程之前的原始顶点位置

```
 *objx = out[0];
    *objy = out[1];
    *objz = out[2];
    return(GL_TRUE);
} 
```

# c - Make with GCC 上的“预期声明说明符”

> ID：14015351
> 
> 赞同：0
> 
> 时间：2012-12-23T22:55:13.977
> 
> 标签：c, gcc, gnome, mate-desktop

我正在尝试将[https://github.com/alexkay/xmonad-log-applet](https://github.com/alexkay/xmonad-log-applet)从 GNOME2 移植到 MATE，到目前为止，我已经完成了配置等，我正在尝试构建。你可以在这里找到我的修改：[https](https://github.com/geniass/xmonad-log-applet) ://github.com/geniass/xmonad-log-applet 。当我运行时`make`，它开始构建，但在最后一行它给出了这些错误：

```
main.c:92:39: error: expected declaration specifiers or ‘...’ before string constant
main.c:92:65: error: expected declaration specifiers or ‘...’ before ‘(’ token
main.c:92:84: error: expected declaration specifiers or ‘...’ before string constant
main.c:92:103: error: expected declaration specifiers or ‘...’ before ‘xmonad_log_applet_factory’
main.c:92:130: error: expected declaration specifiers or ‘...’ before ‘(’ token 
```

我在 stackoverflow 上看到了很多类似的问题，但它们主要是关于省略花括号或方法原型返回类型。我在这里看不到任何东西，但也许我只是错过了一个？除了这种可能性，我完全不知道可能出了什么问题。这些错误对我来说完全没有意义

为了清楚起见，这是删除了 ifdef 的 main.c（给出了相同的错误）：

```
#include "config.h"
#include <stdlib.h>
#include <string.h>
#include <gtk/gtk.h>
#include <dbus/dbus-glib.h>
#include <mate-panel-applet.h>

static void signal_handler(DBusGProxy *obj, const char *msg, GtkWidget *widget)
{
    gtk_label_set_markup(GTK_LABEL(widget), msg);
}

static void set_up_dbus_transfer(GtkWidget *buf)
{
    DBusGConnection *connection;
    DBusGProxy *proxy;
    GError *error= NULL;

    connection = dbus_g_bus_get(DBUS_BUS_SESSION, &error);
    if(connection == NULL) {
        g_printerr("Failed to open connection: %s\n", error->message);
        g_error_free(error);
        exit(1);
    }

    proxy = dbus_g_proxy_new_for_name(
        connection, "org.xmonad.Log", "/org/xmonad/Log", "org.xmonad.Log");
    error = NULL;

    dbus_g_proxy_add_signal(proxy, "Update", G_TYPE_STRING, G_TYPE_INVALID);
    dbus_g_proxy_connect_signal(
        proxy, "Update", (GCallback)signal_handler, buf, NULL);
}

static gboolean xmonad_log_applet_fill(MatePanelApplet *applet)
{
    mate_panel_applet_set_flags(
        applet,
        MATE_PANEL_APPLET_EXPAND_MAJOR |
        MATE_PANEL_APPLET_EXPAND_MINOR |
        MATE_PANEL_APPLET_HAS_HANDLE);

    mate_panel_applet_set_background_widget(applet, GTK_WIDGET(applet));

    GtkWidget *label = gtk_label_new("Waiting for Xmonad...");
    gtk_label_set_ellipsize(GTK_LABEL(label), PANGO_ELLIPSIZE_END);

    gtk_label_set_use_markup(GTK_LABEL(label), TRUE);
    gtk_misc_set_alignment(GTK_MISC(label), 0.0, 0.5);
    set_up_dbus_transfer(label);

    gtk_container_add(GTK_CONTAINER(applet), label);
    gtk_widget_show_all(GTK_WIDGET(applet));

    return TRUE;
}

static gboolean xmonad_log_applet_factory(
    MatePanelApplet *applet, const gchar *iid, gpointer data)
{
    gboolean retval = FALSE;

    if(!strcmp(iid, "XmonadLogApplet"))
        retval = xmonad_log_applet_fill(applet);

    if(retval == FALSE) {
        printf("Wrong applet!\n");
        exit(-1);
    }

    return retval;
}

MATE_PANEL_APPLET_OUT_PROCESS_FACTORY("XmonadLogAppletFactory", PANEL_TYPE_APPLET, "XmonadLogApplet", xmonad_log_applet_factory, NULL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:58:40.283

看起来您缺少提供定义的包含`MATE_PANEL_APPLET_OUT_PROCESS_FACTORY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:00:34.697

原来我只是在使用旧版本的 libmatepanel 库。我使用的是 2.0，而当前版本是 3.0。出于某种原因，我的系统上都有

# php - 使用 Smarty 或 Backbone.js 模板化 javascript

> ID：14015352
> 
> 赞同：4
> 
> 时间：2012-12-23T22:55:38.600
> 
> 标签：php, templates, backbone.js, smarty

我已经开发了一个应用程序 8 个月了，它一直在使用 Smarty for PHP 模板。

我对 Smarty 完全没有任何问题，我已经开始为网站上的用户添加更多的 JavaScript 交互。

我也在考虑使用backbone.js 来模板化JavaScript。

但是我想到了另一个**想法，返回一个 smarty 模板并将其加载到 div 中而不是返回一个 json 并使用backbone.js 来格式化结果会不会是个坏主意？**

无论如何，这会减慢应用程序吗？这样做有什么好处（如果有的话）和坏处？

任何想法都会很棒，

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:52:49.447

使用普通的多页“网站”，用户从一个页面导航到另一个页面，使用该站点的功能。然而，Backbone 最适合单页“Web 应用程序”模型。使用这种方法，加载的唯一 html 页面是第一个；之后，每个“页面转换”实际上都由 Backbone 的路由器处理，它通过 DOM 操作动态地伪造页面转换。每个新页面的元素都是由 Backbone 视图构建的；从未涉及 PHP 生成的 html。

这就是为什么 Backbone 可能不是最适合您的原因。除非您想将 PHP 代码更改为纯粹的服务器端 API 样式结构（实际上不需要 Smarty），否则 Backbone 的大部分价值都会丢失。

# javascript - 通过jQuery淡入淡出循环

> ID：14015353
> 
> 赞同：2
> 
> 时间：2012-12-23T22:55:38.730
> 
> 标签：javascript, jquery, animation, fade

我有一张图片。例如![在此处输入图像描述](../Images/46d65925efcbcb77cb3d0a81c5f7ea46.png)

我想要一些项目淡出，在 img 上淡入循环。有可能 jQuery 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T23:00:28.500

您应该在现有图像上添加其他图像，然后将它们淡入淡出。代码看起来像这样：

```
 <img src='firstStar.jpg' alt='star image' id='firstStar' />

    var loopImages = function(){

         $('#firstStar').fadeIn(1500, function(){

                   $('#firstStar').fadeOut(1500, loopImages);           
         });
    }
    loopImages(); 
```

其他选项可能是在图像上放置透明 div 并在循环中模糊它们。对于后一种方法，您可以使用[blurjs 库。](http://blurjs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T22:57:03.273

如果您通过“某些项目”指代图像本身的某些项目 - 那么答案是否定的。但是，如果你有这个图像说作为一些 div 的背景，那么你可以在图像本身上显示一些其他元素（通过添加`div`s 或`img`s 并相应地定位它们），然后由 jQuery 淡入淡出。

# iphone - iPhone优惠券更新

> ID：14015354
> 
> 赞同：0
> 
> 时间：2012-12-23T22:55:42.160
> 
> 标签：iphone, ios

我目前正在为一家只希望用户能够在他们的应用程序而不是传单上查看他们的优惠券的企业制作一个小应用程序。

由于我是 iPhone 开发的新手，我只是想知道如何做到这一点。现在我只有项目中优惠券的照片。但是，如果我想添加新优惠券，则必须更改源代码，然后更改版本。

每次添加新优惠券时都必须更新应用程序吗？或者有没有一种方法可以动态地做到这一点，而无需用户更新应用程序。

感谢您的任何帮助/想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:58:12.790

每次添加新优惠券时，用户都将被迫更新应用程序。

如果您在服务器上有优惠券图像，并且每次加载应用程序时都从那里加载优惠券，那么用户不需要更新应用程序。您可以简单地将更多优惠券图像放入您的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T23:01:59.987

您将希望在云（您自己的服务器等）中存储和更新您的优惠券，并为其定义一个 RESTful 接口。然后，您的应用程序将在用户打开它时下载（活动）优惠券的最新列表。您可能希望使用诸如[RestKit 之](http://restkit.org/)类的库来避免编写低级 Objective-C http 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T03:04:54.357

或者一种简单的实现方法是创建一个 UIWebView 并将其指向一个网站，您可以在该网站上不断循环优惠券图像，而用户永远不会知道他们正在查看 webview。

# javascript - Javascript document.getElementsByName() 函数对我来说很奇怪

> ID：14015358
> 
> 赞同：0
> 
> 时间：2012-12-23T22:57:01.577
> 
> 标签：javascript

我的简单 javascript 计算器中有以下变量：

```
var distance = parseInt(document.getElementsByName("distance"), 10);
var mins_running = parseInt(document.getElementsByName("mins_running").value, 10);  // the running pace minutes
var secs_running = parseInt(document.getElementsByName("secs_running").value, 10);  //    the running pace seconds
var mins_walking = parseInt(document.getElementsByName("mins_walking").value, 10);  // the walking pace minutes
var secs_walking = parseInt(document.getElementsByName("secs_walking").value, 10);  // the walking pace seconds 
```

问题是，当我尝试使用这些变量时（作为文本从表单输入，但打算用作计算器中的数字）。当我在开发者 console.log 中执行 typeof() 时，我被告知值是“数字”类型，但*下一行*也是一个 console.log('mins_running')，例如，它明确指出值为“NaN”。我的价值是不是一个数字？这是怎么回事？愚蠢的javascript——再正常一点，该死的！

任何合理的输入/帮助将不胜感激。

感谢所有的帮助，伙计们。看起来我又开始使用旧的 Form.elementName.value 了。（如果这是一个非常糟糕的主意或者根本不适合生产代码，请随意说些什么。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T22:59:46.210

```
document.getElementsByName("mins_running") 
```

返回 a `NodeList`，它没有属性`value`。利用

```
document.getElementsByName("mins_running")[0].value 
```

反而。

例子：

HTML：

```
<input type="text" name="mins_running" value="10">
<br><button id="theButton">Click Me</button> 
```

JavaScript：

```
document.getElementById("theButton").onclick = function() {
  // Note we're getting the first match ----------------vvv
  var field = document.getElementsByName("mins_running")[0];
  display("The field's current value is: " +
          parseInt(field.value, 10));
  // And using its value-^^^^^
};

function display(msg) {
  var p = document.createElement('p');
  p.innerHTML = String(msg);
  document.body.appendChild(p);
} 
```

[实时复制](http://jsbin.com/olukit/1)| [资源](http://jsbin.com/olukit/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T23:08:51.590

[Waleed 分享了如何解决它](https://stackoverflow.com/a/14015375/31671)。

你到达那里的技术原因`NaN`是......

您获取对 a 的引用`NodeList`，`document.getElementsByName("distance")`并尝试访问其`value`上的属性。该属性不存在于`NodeList`或原型链上的任何位置。在 JavaScript 中，这意味着`undefined`返回。

当您调用`parseInt()`with`undefined`作为第一个参数时，该函数将`toString()`它并返回`"undefined"`。您明确将基数设置为`10`，这显然只涵盖数字`0`，`9`并且无法解析数字。发生这种情况时，`parseInt()`返回`NaN`. 由于`NaN`is 的`Number`类型（它是 IEEE-754 规范的一部分），`typeof`操作员会告诉您它是`"Number"`.

如果您将基数设置为`31`，它将能够解析`"undefined"`，它会是`26231474015353`:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T23:33:20.393

为您的标签设置 ID 并改用 getElementById。

# android - 使用 android 位置更新服务器

> ID：14015360
> 
> 赞同：0
> 
> 时间：2012-12-23T22:57:36.590
> 
> 标签：android

OnLocationChanged 给我 11 分，每次我有 11 次调用 php 页面。如何确保我每次只发送最后 11 个（可能不是 11 个）位置点。这可能是第一次插入的好方法数据进入 sqlite 数据库，然后调用一个计时器来获取 sqlite 表的最后一行并将其传递给 php 页面，稍后它将删除该表并在 2 分钟内重复所有操作。

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final EditText ed1=(EditText) findViewById(R.id.editText1);
    final EditText ed2=(EditText) findViewById(R.id.editText2);
    final EditText ed3=(EditText) findViewById(R.id.editText3);

    final WebView w=(WebView) findViewById(R.id.webView1);
    final Time t=new Time();

    //deo koji naknadno ubacujem za kriterijum
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setPowerRequirement(Criteria.POWER_LOW);

    //kraj dela koji sam naknadno ubacio

final   LocationManager m=(LocationManager) MainActivity.this.getSystemService(Context.LOCATION_SERVICE);
    //deo koji sam takodje ubacio naknadno
String locationprovider =m.getBestProvider(criteria,true);
//deo koji sam takodje ubacio naknadno kraj

        LocationListener l=new LocationListener() {

                @Override
                public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderEnabled(String arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderDisabled(String arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onLocationChanged(Location arg0) {
                    /*
                    java.text.DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(getApplicationContext());
                    String date = dateFormat.format(new Date());
                */
                    //novi datum 
                    /*
                    Date datum = new Date(); 
                    SimpleDateFormat sdf; 
                    sdf = new SimpleDateFormat("MM/dd/yyyy");
                    String  date=sdf.format(datum);
                    //novi datum
                    */
                    /*
                    //treci datum
                    String pattern = "MM/dd/yyyy";
                     SimpleDateFormat format = new SimpleDateFormat(pattern);
                    String date= format.format(new Date());
                    //treci datum

                     */
                    //cetvrti datum
                    String format="MM/dd/yyyy";
                    SimpleDateFormat sdf = new SimpleDateFormat(format,Locale.US);
                    String date= sdf.format(new Date());
                    //cetvrti datum
                    String url=new String();
                t.setToNow();   

                ed1.setText("");
                ed2.setText("");
                String longitude=new String();
                String latitude=new String();
                String speed=new String();

                if((int)arg0.getSpeed()==0)
                {
                    speed="0";
                }
                else
                {
                speed=""+(((int)arg0.getSpeed()*3600)/1000);
                }
                longitude=""+  arg0.getLongitude();
                latitude=""+ arg0.getLatitude();
                ed1.setText(longitude);
                ed2.setText(latitude);
                ed3.setText(speed);
                Calendar cal=Calendar.getInstance();

                url="http://www.compensatemeonline.com/truckmeonline/TruckMeOnline/UnosLokacijaSaTelefona.php?id=16"+"&longitude="+longitude+"&latitude="+latitude+"&brzina="+speed+"&vreme="+cal.getTime()+"&datum="+date; 
                try{
                w.loadUrl(url);
                }
                catch (Exception e) {
                    // TODO: handle exception
                }
                    // TODO Auto-generated method stub

                }

            };

            // TODO Auto-generated method stub
            m.requestLocationUpdates(locationprovider, 120000, 0, l);

    //      zamenio sam m.requestLocationUpdates(LocationManager.GPS_PROVIDER, 120000, 0, l); sa m.requestLocationUpdates(locationprovider, 120000, 0, l);
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:53:28.060

自己解决了。由于 onlocationchanged 提供了 10 个或更多位置数据，因此我将数据插入到 sqlite 数据库中，添加了一个处理程序以从 sqlite 表中获取最后插入的行，同时删除同一行之前的所有记录。我每 1 分钟执行一次 onlocationchange 并每 1.5 分钟调用一次处理程序，第一次调用处理程序时我不查询 sqlite 数据库，它是这样的：

```
 public class MainActivity extends Activity {
 int indikator=0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final EditText ed1=(EditText) findViewById(R.id.editText1);
    final EditText ed2=(EditText) findViewById(R.id.editText2);
    final EditText ed3=(EditText) findViewById(R.id.editText3);
    final SQLiteDatabase db=openOrCreateDatabase("TruckMe", MODE_PRIVATE, null);
    db.execSQL("create table if not exists lokacije (id INTEGER  PRIMARY KEY AUTOINCREMENT NOT NULL, lokacija VARCHAR(255));");

    final WebView w=(WebView) findViewById(R.id.webView1);
    final Time t=new Time();

    final Button b=(Button) findViewById(R.id.button1);
     b.setTextColor(Color.RED);

     //deo za thread

     final Handler handler = new Handler();
        final Runnable runnable = new Runnable() {
            public void run() {

                if(indikator != 0)
                {
                    Cursor c=db.rawQuery("select * from lokacije", null);
                c.moveToLast();

                try{
                    w.loadUrl(c.getString(c.getColumnIndex("lokacija")));
                    db.execSQL("delete from lokacije where id <"+c.getString(c.getColumnIndex("id")));
                    }
                    catch (Exception e) {
                        // TODO: handle exception
                    }

                }
                indikator=1;
                handler.postDelayed(this, 90000);

            }
        };

    //b.setBackgroundColor(Color.RED);

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

             if(b.getText().equals("SLOBODAN"))
             {

                 b.setText("ZAUZET");
                 b.setTextColor(Color.GREEN);
             }
             else
             {

                 b.setText("SLOBODAN");
                 b.setTextColor(Color.RED);

             }
        }
    });
    //deo koji naknadno ubacujem za kriterijum
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setPowerRequirement(Criteria.POWER_LOW);

    //kraj dela koji sam naknadno ubacio

final   LocationManager m=(LocationManager) MainActivity.this.getSystemService(Context.LOCATION_SERVICE);
    //deo koji sam takodje ubacio naknadno
String locationprovider =m.getBestProvider(criteria,true);
//deo koji sam takodje ubacio naknadno kraj

        LocationListener l=new LocationListener() {

                @Override
                public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderEnabled(String arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderDisabled(String arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onLocationChanged(Location arg0) {

                    String url=new String();
                    String zauzetost=new String();
                    zauzetost=b.getText().toString();

                    String format="MM/dd/yyyy";
                    SimpleDateFormat sdf = new SimpleDateFormat(format,Locale.US);
                    String date= sdf.format(new Date());

                t.setToNow();   

                ed1.setText("");
                ed2.setText("");
                String longitude=new String();
                String latitude=new String();
                String speed=new String();

                if((int)arg0.getSpeed()==0)
                {
                    speed="0";
                }
                else
                {
                speed=""+(((int)arg0.getSpeed()*3600)/1000);
                }
                longitude=""+  arg0.getLongitude();
                latitude=""+ arg0.getLatitude();
                ed1.setText(longitude);
                ed2.setText(latitude);
                ed3.setText(speed);
                Calendar cal=Calendar.getInstance();

                url="Some web site.phpid=1"+"&longitude="+longitude+"&latitude="+latitude+"&brzina="+speed+"&vreme="+cal.getTime()+"&datum="+date+"&zauzetost="+zauzetost;  

                db.execSQL("insert into lokacije (lokacija) values ('"+url+"');");

                    // TODO Auto-generated method stub

                }

            };

            // TODO Auto-generated method stub
            //pozivanje threada
             runnable.run();
            //pozivanje threada
            m.requestLocationUpdates(locationprovider, 60000, 0, l);

    //      zamenio sam m.requestLocationUpdates(LocationManager.GPS_PROVIDER, 120000, 0, l); sa m.requestLocationUpdates(locationprovider, 120000, 0, l);
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

# ruby-on-rails - 更改设计错误

> ID：14015367
> 
> 赞同：0
> 
> 时间：2012-12-23T22:58:16.973
> 
> 标签：ruby-on-rails, ruby, devise, erb

在我的 application.html.erb 文件中，我有

```
<% flash.each do |key,msg| %>
    <div class="message" id="<%= key %>">
        <%= content_tag :div, msg %>
    </div>
<% end %> 
```

显示所有通知。有没有办法在该通知中添加 Devise 的错误？

另外，有没有一种方法可以在出现错误时编辑 HTML 代码。

当出现错误时，它会添加一个带有 id 的 div `field_with_errors`— 我可以更改它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:20:05.337

`rails generate devise:views`会将 Devise 的视图复制到您的应用程序中，以便您可以自由编辑它们。

[https://github.com/plataformatec/devise#configuring-views](https://github.com/plataformatec/devise#configuring-views)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T16:31:15.050

我不知道这是否是您要查找的内容，但它`config/locales/devise.en.yml`允许您更改消息的内容。

# c# - Bing 地图自定义图钉在不移动地图的情况下不显示

> ID：14015369
> 
> 赞同：5
> 
> 时间：2012-12-23T22:58:21.080
> 
> 标签：c#, xaml, windows-8, bing-maps, pushpin

我正在使用 C# 和 XAML 开发 Windows 8 应用程序。该应用程序有一个带有自定义图钉的地图页面。我使用以下代码添加了自定义图钉：

```
 <Style x:Key="PushPinStyle" TargetType="bm:Pushpin">
        <Setter Property="Width" Value="25"/>
        <Setter Property="Height" Value="39"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Image Source="Assets/pushpin_icon.png" Stretch="Uniform" HorizontalAlignment="Left"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>

    </Style> 
```

启用上述代码后，除非用户移动地图，否则图钉不会显示。以下代码用于生成地图。数据模板-

```
 <DataTemplate x:Key="pushpinSelector" >
        <bm:Pushpin Tapped="pushpinTapped" Style="{StaticResource PushPinStyle}">
            <bm:MapLayer.Position >
                <bm:Location Latitude="{Binding Latitude}" Longitude="{Binding Longitude}"/>
            </bm:MapLayer.Position>
        </bm:Pushpin>
    </DataTemplate> 
```

映射 XAML-

```
 <bm:Map.Children>
                <bm:MapItemsControl Name="pushPinModelsLayer" 
                     ItemsSource="{Binding Results}" 
                     ItemTemplate="{StaticResource pushpinSelector}" />
            </bm:Map.Children>
        </bm:Map> 
```

一旦我删除了图钉的自定义样式，默认图钉就会正确显示，而无需移动地图。我希望自定义图钉以类似方式显示，而无需手动移动地图。提前感谢您的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T22:38:04.047

这是一个令人沮丧的问题。

我最终得到的解决方案是在添加图钉时创建摆动效果。每当我更新了我的图钉列表时，我都会更改 MapBounds（通过自定义依赖属性）。

在这种方法中，我稍微弹出地图边界，然后放大到所需的边界，如下所示：

```
public static LocationRect GetMapBounds(DependencyObject obj)
{
    return (LocationRect)obj.GetValue(MapBoundsProperty);
}

public static void SetMapBounds(DependencyObject obj, LocationRect value)
{
    obj.SetValue(MapBoundsProperty, value);
}

public static readonly DependencyProperty MapBoundsProperty = DependencyProperty.RegisterAttached("MapBounds", typeof(LocationRect), typeof(MapBindings), new PropertyMetadata(null, OnMapBoundsChanged));

private static void OnMapBoundsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var map = d as Bing.Maps.Map;
    if (map != null)
    {
        // sigh.  "Wiggle" the view to force map pins to appear
        LocationRect destRect = e.NewValue as LocationRect;
        if (destRect != null)
        {
            LocationRect wiggleRect = new LocationRect(destRect.Center, destRect.Width + 0.001,
                                                        destRect.Height + 0.001);

            map.SetView(wiggleRect, MapAnimationDuration.None);
            map.SetView(destRect, new TimeSpan(0, 0, 1));
        }
    }
} 
```

这会导致视图自动移动，从而使图钉弹出。

这有点骇人听闻，但至少它有效。此外，它还具有弹出视图的副作用，以向用户显示视图已更改。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:22:40.707

您是否尝试过为地图图钉使用自定义控件

使用提供的用户控件模板创建控件，添加必要的组件、事件，进行您需要的自定义。

例子 ：

`CustomPushPin pushpin = new CustomPushPin(); mapView.Children.Add(pushPin); MapLayer.SetPosition(pushPin, location);`

在哪里 ，

1.  CustomPushPin 您的自定义图钉用户控件。
2.  location 的类型是 Location。

如果您仍然遇到问题，请告诉我

# r - Rcpp 安装不正确，R2.15.2

> ID：14015373
> 
> 赞同：0
> 
> 时间：2012-12-23T22:59:26.840
> 
> 标签：r, rcpp

在 Linux Ubuntu 12.04 上安装`Rcpp`，R2.15.2 NB 昨天安装了 R 和 rcpp；所以我希望最新版本，但`Rcpp`安装为过时版本！

```
> old.packages()

     Package LibPath                   Installed  Built    ReposVer  
Rcpp "Rcpp"  "/usr/lib/R/site-library" "0.9.9"    "2.14.1" "0.10.2"  
rgl  "rgl"   "/usr/lib/R/site-library" "0.92.798" "2.12.1" "0.92.894"
     Repository                                 
Rcpp "http://www.stats.bris.ac.uk/R/src/contrib"
rgl  "http://www.stats.bris.ac.uk/R/src/contrib"
> update.packages("Rcpp") 
```

如最后一行所示，它根本没有更新包`Rcpp`；是什么原因造成的，我能做些什么来解决这个问题？

注意：尝试从两个不同的存储库重新安装，这两个存储库都声称拥有最新版本的 rcpp 0.10.2。

问候

杰夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:24:50.250

你简直误会了。

您拥有的 Rcpp 来自**Ubuntu**，并通过`apt-get`et al 安装。当发行版冻结时，该版本被冻结。这类似于 gcc、emacs... 不是现在*可用*的最新版本，而是发行版制作时采用的版本。顺便说一句，即使是那个 Ubuntu 版本现在也有一个版本过时了，因为 12.10 已经发布了......

所以你的问题标题是错误的。您拥有的版本已正确安装*为 Ubuntu 12.04 的一部分。* 现在有意义吗？

现在，如果您通过 CRAN 从 CRAN 安装 Rcpp，`install.packages()`您将获得当前版本，与 rgl 同上。

（并且在启动板上还有一个 PPA，可能两者都作为预构建的 .deb 包。）

最后，前面已经解释过，路径`/usr/lib/R/site-library`是`r-cran-*`您作为 .deb 文件安装的软件包，其中`/usr/local/lib/R/site-library`是您从 R 本身进行的本地安装。由于这种拆分，它的输出`old.packages()`是从前一条路径驱动的，例如`/usr/lib/R/site-library`，由于它是由发行版管理的，所以它被绑定到后面，这里是 Ubuntu。您选择该发行版是因为其组件的稳定性——您可以自由地使用`/usr/local/lib/R/site-library`. 这绝对是一个功能。

从我的 Ubuntu 盒子中见证这一点：

```
R> old.packages(lib.loc="/usr/local/lib/R/site-library/")
NULL
R> 
```

# android - WebView 中的 IndexOutOfBoundsException

> ID：14015393
> 
> 赞同：1
> 
> 时间：2012-12-23T23:03:02.863
> 
> 标签：android, android-webview, indexoutofboundsexception

我最近收到了我的一位用户关于运行 Android 4.1.1 的 ASUS Transformer Pad TF700T 的崩溃报告。我已经看到过类似的 TextViews 崩溃报告，通常会重新添加到一些自定义代码中。这是针对 WebView 的，我编写的任何代码似乎都没有与这次崩溃直接相关。

我没有更多信息，但是当用户单击 webview 中显示的编辑框时，可能会发生这种情况（我知道 webview 中显示的页面的 URL 和内容）。我不知道如何处理这个......

```
java.lang.IndexOutOfBoundsException: setSpan (-4 ... -4) starts before 0
at android.text.SpannableStringBuilder.checkRange(SpannableStringBuilder.java:1021)
at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:592)
at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:588)
at android.text.Selection.setSelection(Selection.java:76)
at android.view.inputmethod.BaseInputConnection.setSelection(BaseInputConnection.java:497)
at android.webkit.WebViewClassic$WebViewInputConnection.setSelection(WebViewClassic.java:482)
at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:288)
at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:77)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:49:52.253

由于某种原因，似乎尝试进行具有负开始索引的文本选择。至少，这就是 stracktrace 告诉你的。：

第 67 行`Selection`：

```
text.setSpan(SELECTION_START, start, start, Spanned.SPAN_POINT_POINT|Spanned.SPAN_INTERMEDIATE); 
```

所以显然`start`有一个值`-4`。它作为参数传入，如果您跟踪回溯，该值将从`DO_SET_SELECTION`消息中解析出来。

我猜测如果在选择过程中选择的文本发生`WebView`变化，但没有任何难以确认的额外细节，则可能会发生错误。

有趣的是，`BaseInputConnection.setSelection(int, int)`它确实包含一个有趣的代码注释，使我之前的猜测更加合理：

```
/**
 * The default implementation changes the selection position in the
 * current editable text.
 */
public boolean setSelection(int start, int end) {
    if (DEBUG) Log.v(TAG, "setSelection " + start + ", " + end);
    final Editable content = getEditable();
    if (content == null) return false;
    int len = content.length();
    if (start > len || end > len) {
        // If the given selection is out of bounds, just ignore it.
        // Most likely the text was changed out from under the IME,
        // the the IME is going to have to update all of its state
        // anyway.
        return true;
    }
    if (start == end && MetaKeyKeyListener.getMetaState(content,
            MetaKeyKeyListener.META_SELECTING) != 0) {
        // If we are in selection mode, then we want to extend the
        // selection instead of replacing it.
        Selection.extendSelection(content, start);
    } else {
        Selection.setSelection(content, start, end);
    }
    return true;
} 
```

有一个越界检查，但仅限于上限，而不是下限。添加一个检查`start < 0 || end < 0`可能会阻止`IndexOutOfBoundsException`你的 stracktrace 中显示的被抛出。不幸的是，这可能不会真正帮助您，因为您不太可能能够从`WebView`...控制事件流

# python - 在 Tornado 类中传递全局变量

> ID：14015396
> 
> 赞同：2
> 
> 时间：2012-12-23T23:03:40.790
> 
> 标签：python, global-variables, tornado

迄今为止，我一直通过将变量`Tornado`声明为`global`. 我认为这可能不是这样做的理想方式。这是我的代码示例：

```
class MHandler(tornado.web.RequestHandler):
@tornado.web.asynchronous

def get(self):
    self.render('index.html')

def post(self):
    global account_age

    age = self.get_argument('age')

    account_age = [age]

class AgeHandler(tornado.websocket.WebSocketHandler):    
@tornado.web.asynchronous
@gen.engine

def open(self):
    global account_age

    print 'Your account is overdue by: ', account_age 
```

我想知道，在这个框架中，共享变量的更合适的方式是什么。

我只做 python 和 Tornado 几个星期，所以请原谅我的无知。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T23:32:42.890

是的，我不会那样做。即使在这个简化的示例中，很明显您在 POST 和 websocket 打开之间存在竞争条件。你怎么能保证发出 POST 的人就是打开 websocket 的人呢？

我通常会在全局列表/字典中保留对每个 websocket 连接的引用。某种参考可以让我将服务器端输出写入正确的连接。

# iframe - 多个 iFrame 未在 FF、Chrome 和 Safari 中显示

> ID：14015402
> 
> 赞同：6
> 
> 时间：2012-12-23T23:05:42.817
> 
> 标签：iframe

我知道强烈建议不要使用 iFrame，但我需要制作在 IE8 和更早版本上运行的应用程序，并且他们已经有使用 iFrames 的大量旧代码。我陷入了有关 iFrame 的问题。这是我的两个 iframe：

```
<div>
 <div width="20%" height="100%">
  <iframe width="20%" name="treestruct" src="menu.html" height="800px"/>
 </div>
 <div  width="70%" height="100%">
  <iframe width="80%" name="mainbody" src="content.html" height="800px"/>
 </div>
</div> 
```

最近，我被要求让它也适用于 Firefox。但是当我试图在 FF 上看到它时，只显示了第一个 iFrame。它在 IE 中运行良好，但在 FF 或任何其他现代浏览器中运行良好。我真的很困惑这里发生了什么。解决方案是什么？我知道这可能是一个小问题，而且我也是 HTML5 的大力支持者，并希望避免使用这些类型的已弃用标签，但我有大量用旧 html 编写的代码，必须让它们在 IE8 和更早版本上工作。我没有选择。有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T23:25:27.287

根据 w3school 的说法，你必须用 . 关闭你的 iframe 标签`</iframe>`。所以把你的代码改成这样：

```
<div>
 <div width="20%" height="100%">
  <iframe width="20%" name="treestruct" src="menu.html" height="800px"></iframe>
 </div>
 <div  width="70%" height="100%">
  <iframe width="80%" name="mainbody" src="content.html" height="800px"></iframe>
 </div>
</div> 
```

试一试。它应该工作得很好......

# python - 获取选定的文本 (python-gtk)

> ID：14015403
> 
> 赞同：0
> 
> 时间：2012-12-23T23:05:48.453
> 
> 标签：python, gtk, selection, textselection, selectedtext

我想使用 gtk 模块在 python 中自动获取选定的文本。有一个代码可以从任何地方获取选定的文本：

```
#!/usr/bin/env python

import pygtk
pygtk.require('2.0')
import gtk

class GetSelectionExample:
    # Signal handler invoked when user clicks on the
    # "Get String Target" button
    def get_stringtarget(self, widget):
        # And request the "STRING" target for the primary selection
        ret = widget.selection_convert("PRIMARY", "STRING")
        return

    # Signal handler called when the selections owner returns the data
    def selection_received(self, widget, selection_data, data):

        # Make sure we got the data in the expected form
        if str(selection_data.type) == "STRING":
            # Print out the string we received
            print "STRING TARGET: %s" % selection_data.get_text()

        elif str(selection_data.type) == "ATOM":
            # Print out the target list we received
            targets = selection_data.get_targets()
            for target in targets:
                name = str(target)
                if name != None:
                    print "%s" % name
                else:
                    print "(bad target)"
        else:
            print "Selection was not returned as \"STRING\" or \"ATOM\"!"

        return False

    def __init__(self):
        # Create the toplevel window
        window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        window.set_title("Get Selection")
        window.set_border_width(10)
        window.connect("destroy", lambda w: gtk.main_quit())

        vbox = gtk.VBox(False, 0)
        window.add(vbox)
        vbox.show()

        # Create a button the user can click to get the string target
        button = gtk.Button("Get String Target")
        eventbox = gtk.EventBox()
        eventbox.add(button)
        button.connect_object("clicked", self.get_stringtarget, eventbox)
        eventbox.connect("selection_received", self.selection_received)
        vbox.pack_start(eventbox)
        eventbox.show()
        button.show()

        window.show()

def main():
    gtk.main()
    return 0

if __name__ == "__main__":
    GetSelectionExample()
    main() 
```

但我不想这样做。

我不想点击一个按钮。我只想查看选定的文本，而不是单击按钮后。当我启动程序时；它必须自动向我显示所选文本（无需单击任何按钮！）。

我想要这个：

```
#!/usr/bin/env python

import pygtk
pygtk.require('2.0')
import gtk

class MyApp (object):
    def __init__(self):
        self.window=gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.connect("delete_event", gtk.main_quit )
        self.entry = gtk.Entry()

        try:
            self.s_text=gtk.SelectionData.get_text
            # i expect that : the selected text (from anywhere)
            # but it returns me :
            #<method 'get_text' of 'gtk.SelectionData' objects>
        except:
            self.s_text="it must be selected text"

        self.entry.set_text("Selected Text is : %s"  % self.s_text )

        self.window.add(self.entry)
        self.window.show_all()
    def main(self):
        gtk.main()

app=MyApp()
app.main() 
```

该程序必须自动在输入框中显示我选择的文本。

只有这个。但我做不到！

我希望“gtk.SelectionData.get_text”会向我显示选定的文本，但它会返回“ `<method 'get_text' of 'gtk.SelectionData' objects>`”。

我也试过`self.s_text=gtk.SelectionData.get_text()`

但它返回我：

```
self.s_text=gtk.SelectionData.get_text()
TypeError: descriptor 'get_text' of 'gtk.SelectionData' object needs an argument 
```

我怎样才能做到这一点？我也是一个初学者的python程序员；如果你能写代码；这对我来说会很好:) 非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:52:12.390

```
self.s_text=gtk.SelectionData.get_text 
```

方法`get_text`尚未调用！您正在分配`self.s_text`给方法（函数）对象本身。将其转换为字符串，`"Selected Text is : %s" % self.s_text`
您应该将其更改为：

```
self.s_text=gtk.SelectionData.get_text() 
```

编辑：但是因为你需要一个 SelectionData 对象来传递给这个方法，所以整个想法是错误的。我将您的两个代码组合为有效的东西：

```
#!/usr/bin/env python

import pygtk
pygtk.require('2.0')
import gtk

class MyApp (object):
    def __init__(self):
        self.window=gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.connect("delete_event", gtk.main_quit )
        self.entry = gtk.Entry()
        self.window.selection_convert("PRIMARY", "STRING")
        self.window.connect("selection_received", self.selection_received)
        self.window.add(self.entry)
        self.window.show_all()
    # Signal handler called when the selections owner returns the data
    def selection_received(self, widget, selection_data, data):
        print 'selection_data.type=%r'%selection_data.type
        # Make sure we got the data in the expected form
        if str(selection_data.type) == "STRING":
            self.entry.set_text("Selected Text is : %s"  % selection_data.get_text())

        elif str(selection_data.type) == "ATOM":
            # Print out the target list we received
            targets = selection_data.get_targets()
            for target in targets:
                name = str(target)
                if name != None:
                    self.entry.set_text("%s" % name)
                else:
                    self.entry.set_text("(bad target)")
        else:
            self.entry.set_text("Selection was not returned as \"STRING\" or \"ATOM\"!")

        return False
    def main(self):
        gtk.main()

app=MyApp()
app.main() 
```

# python - 重新加载已导入另一个模块的模块

> ID：14015405
> 
> 赞同：16
> 
> 时间：2012-12-23T23:05:57.983
> 
> 标签：python, import, module, reload

让我们面对现实吧，更改后重新加载 python 代码的整个业务是一团糟。不久前我发现调用`import <module>`解释器比调用更好`from <module> import <class/function>`，因为这样我就可以调用`reload(module)`来获取更新的代码。

但我现在有更复杂的问题。所以我有这个文件，module1.py，在顶部它说：

```
from module2 import <class1>, <function1>, etc. 
```

然后我去修改module2里面的代码。事实证明，调用`reload(module1)`不会重新加载在 module2 中更改的代码，即使来自 module2 的代码是在 module1 的顶部导入的。有没有办法在不重新启动解释器的情况下重新加载所有内容？

在任何人谈论我的风格之前，我只想说：

1.  我只`reload`从解释器调用，从不在活动代码中调用。这个问题与我测试新代码时有关。
2.  我从不打电话`<module> import *`，我知道这会破坏可读性

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-28T17:13:04.670

看看 IPython。它具有[autoreload](http://ipython.org/ipython-doc/stable/config/extensions/autoreload.html)扩展，可在解释器会话期间自动重新加载模块，然后再调用其中的函数。我引用了登录页面中的示例：

```
In [1]: %load_ext autoreload

In [2]: %autoreload 2

In [3]: from foo import some_function

In [4]: some_function()
Out[4]: 42

In [5]: # open foo.py in an editor and change some_function to return 43

In [6]: some_function()
Out[6]: 43 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-23T23:10:43.413

要重新加载模块，您必须使用`reload`，并且必须在要重新加载的模块上使用它。重新加载模块不会递归地重新加载该模块导入的所有模块。它只是重新加载那个模块。

导入模块时，会存储对它的引用，以后对该模块的导入会重新使用已导入、已存储的版本。当您重新加载`module1`时，它会重新运行该`from module2 import ...`语句，但这只是重用已导入的版本，`module2`而不重新加载它。

解决此问题的唯一方法是更改​​您的代码，使其`import module2`代替（或补充）`from module2 import ...`. `import module`除非模块本身已被导入并绑定到名称（即，使用语句，而不仅仅是语句），否则您无法重新加载模块`from module import stuff`。

请注意，您可以使用两种形式的导入，并且重新加载导入的模块会影响后续`from`导入。也就是说，您可以这样做：

```
>>> import module
>>> from module import x
>>> x
2
# Change module code here, changing x to 3
>>> reload(module)
>>> from module import x
>>> x
3 
```

这对于交互式工作很方便，因为它允许您使用简短的、无前缀的名称来引用您需要的内容，同时仍然能够重新加载模块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-01T22:26:08.943

好的，我不确定在不更改代码的情况下是否有资格作为答案，但是……至少，这不涉及对`module1`.

您可以使用一些模块包装类，它在加载 module1 之前和之后保存加载的模块，并提供一个`reload`方法，如下所示：

```
import sys

class Reloader(object):
    def __init__(self, modulename):
        before = sys.modules.keys()
        __import__(modulename)
        after = sys.modules.keys()
        names = list(set(after) - set(before))
        self._toreload = [sys.modules[name] for name in names]

    def do_reload(self):
        for i in self._toreload:
            reload(i) 
```

然后加载 module1：

```
reloader = Reloader('module1') 
```

假设您可以修改 module2 并将其重新加载到解释器中：

```
reloader.do_reload() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-23T23:48:28.657

与其在重新加载模块方面做得更好，不如在重新启动解释器方面做得更好。例如，您可以将设置代码放入自己的文件中，然后像这样运行它：

```
$ python -i setup.py
>>> 
```

这将运行 setup.py，然后将您留在交互式提示符下。或者，与其在交互式提示中做大量工作，不如编写自动化测试来为您完成工作。

你是对的，在 Python 中重新加载模块是一团糟。该语言的语义使得在进程运行时更改代码变得困难。学会不需要重新加载模块，你会更快乐。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T23:28:47.240

不要忘记导入实际上只是在命名空间中分配名称。因此，您可以在重新加载后重新分配该名称：

```
>>> reload(module2)
>>> module1.class1 = module2.class1 
```

现在`class1`module1 中的对象指的是从 module2 重新加载的版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-02T14:31:20.450

这是您可以使用的递归重新加载函数（归功于@Matthew）： [https ://stackoverflow.com/a/17194836/1020625](https://stackoverflow.com/a/17194836/1020625)

# c++ - 在向量上查找_if并比较成员变量

> ID：14015409
> 
> 赞同：2
> 
> 时间：2012-12-23T23:06:22.163
> 
> 标签：c++, algorithm, boost, stl

我有一个这样的课堂场景：

```
class Renderer;

class Scene
{
public:
    Scene(const std::string& sceneName);
    ~Scene();

    void Render(Renderer& renderer);

    Camera& GetSceneCamera() const;
    SceneNode& GetRootNode() const;
    const std::string& GetSceneName() const;

private:
    const std::string mName;
    Camera mSceneCamera;
    SceneNode mRootNode;
}; 
```

然后我有一个场景向量 ( `vector<Scene>`)。

现在给定一个字符串，我想遍历这个场景向量，如果在场景中找到名称，则返回一个指向它的指针。这是一个天真的尝试，但我遇到了编译错误：

```
Scene* SceneManager::FindScene(const std::string& sceneName)
{
    return std::find_if(mScenes.begin(), mScenes.end(), boost::bind(&std::string::compare, &sceneName, _1));
} 
```

Boost 抱怨参数的数量，所以我的语法一定是错误的.. 这样做的正确方法是什么？

编辑：`No instance of overloaded boost::bind matches the argument list`

EDIT2：不是 C++11

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T01:19:40.700

让我们分步进行。

find_if 将为向量中的每个元素调用一个比较函数，当比较函数返回 true 时停止。该函数需要可以使用`const Scene &`参数调用。

我们可以这样写（*所有这些代码都未经测试）*：

```
struct SceneComparatorName {
    SceneComparatorName ( std::string &nameToFind ) : s_ ( nameToFind ) {}
    ~SceneComparatorName () {}
    bool operator () ( const Scene &theScene ) const {
        return theScene.GetSceneName () == s_;
        }
    std::string &s_;
    }; 
```

现在 - 你如何内联编写它？您的尝试`boost::bind`失败，因为您错过了对 的调用`GetSceneName`，并且您无法将 a`Scene &`与 a进行比较`std::string`

### 在 C++11 中

编写一个完全符合上述结构的 lambda 是很容易的。

```
[&sceneName] (const Scene &theScene ) { return theScene.GetSceneName () == sceneName; } 
```

### 但是你不想要 c++11，所以你必须写这样的东西：

```
boost::bind ( std::string::operator ==, sceneName, _1.GetSceneName ()); 
```

但这不起作用，因为它将在调用中调用 GetSceneName，而不是在调用 bind 创建的仿函数时调用。

但是，Boost.Bind 支持重载运算符，因此您只需编写：

```
 boost::bind ( &Scene::GetSceneName, _1 ) == sceneName 
```

并完成。[有关更多信息，请参阅http://www.boost.org/doc/libs/1_52_0/libs/bind/bind.html#nested_binds](http://www.boost.org/doc/libs/1_52_0/libs/bind/bind.html#nested_binds)上的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:02:04.590

最短的方法可能是手动循环：

```
BOOST_FOREACH(Scene& scene, mScenes) {
    if (scene.GetSceneName() == sceneName) return &scene;
}
return 0; 
```

# android - 如何正确显示图像？

> ID：14015412
> 
> 赞同：1
> 
> 时间：2012-12-23T23:06:40.510
> 
> 标签：android, android-layout

我正在使用它来显示图像背景：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/picture_happy"
    android:padding="20dp"
    android:scaleType="centerCrop"
    tools:context=".MainActivity" > 
```

图像失真。有没有办法以 1:1 显示像素？只是从显示屏上剪下流过的东西？

我不担心被裁掉的东西。

谢谢！埃里克

**更新以添加图像**

![在此处输入图像描述](../Images/342015e8e6ad5f09e85f1948bf67ac85.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T23:09:04.430

将 scaleType 更改为`centerCrop`：

```
android:scaleType="centerCrop" 
```

有关比例类型的更多信息，请参阅此图像：

![在此处输入图像描述](../Images/5fe6d743e93dbdea2b6dd6de8be32d05.png)

顶行（从左到右）：

中心，centerCrop，centerInside。底行 (lr)：fitCenter、fitStart、fitEnd、fitXY。

# python - Django注释多个字段

> ID：14015414
> 
> 赞同：0
> 
> 时间：2012-12-23T23:06:57.977
> 
> 标签：python, django

理想情况下，我想创建一个计数多个字段的注释。这是代码：

```
#the model
class Referral(models.Model):
     product = models.ForeignKey(Product)
     region = models.ForeignKey(Region)
     owner = models.ForeignKey(User, related_name='owner')
     receiver = models.ForeignKey(User, related_name='receiver')
     company_name = models.CharField(max_length=255)
     note = models.TextField(max_length=5000, blank=True)
     timestamp = models.DateTimeField(auto_now_add=True)

 #I know how to get either owner or recipient, but how to annotate owner + recipient combined?
 users = User.objects.annotate(num_referrals=Count('owner')).order_by('-num_referrals')[:3] 
```

有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:32:02.003

尝试这个

```
users = User.objects \
        .extra(select={'total': 'Count(owner)+Count(receiver)'}) \
        .order_by('-total')[:3] 
```

# matlab - 将 ismember() 与包含向量的元胞数组一起使用

> ID：14015419
> 
> 赞同：3
> 
> 时间：2012-12-23T23:07:58.313
> 
> 标签：matlab, vector, comparison, grid-layout, cell-array

我正在使用一个单元格数组以包含 1x2 网格位置向量的形式`[row, col]`。我想检查此单元格数组中是否包含另一个网格位置。

不幸的是，我当前的代码导致错误，我不太明白为什么：

```
in_range = ismember( 1, ismember({[player.row, player.col]}, proximity(:,1)) ); 
```

其中`player.row`和`player.col`是整数，并且`proximity`的第一列是前面提到的网格位置元胞数组

我收到的错误是：

```
??? Error using ==> cell.ismember at 28
Input must be cell arrays of strings. 
```

不幸的是，我无法找到有关`ismember()`以这种方式使用的任何信息，只能将单元格数组作为字符串或在每个单元格中使用单个整数而不是向量。

我考虑过使用`num2str()`and进行转换`str2num()`，但由于我必须在转换之间执行计算，并且由于迭代次数的原因，代码将被循环（10,000 次循环，每个循环 4 次转换），这种方法*似乎*令人望而却步。

在这里的任何帮助将不胜感激，谢谢

编辑：为什么会`ismember()`返回此错误？它是否将元胞数组中的所有向量都视为字符串数组？

编辑：是否有更好/更有效的方法来确定 1 是否在返回的向量中

`ismember( 1, ismember(...))`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:01:55.620

我现在时间不多（作为 Chrissy eve 和所有），所以这将是一个非常快速的答案。

据我了解，问题是查找 xy 坐标是否位于许多 xy 坐标的序列中，如果是，则查找它所在位置的索引。如果是这种情况，并且如果您对效率感兴趣，那么弄乱字符串或单元数组是很浪费的。您应该为此使用数字矩阵/向量。

所以，我的建议：将单元格数组的第一行转换为数值矩阵。然后，将您的 xy 坐标与此数字矩阵的行进行比较。因为您只想知道两个坐标何时与数值矩阵的一行匹配，所以使用`'rows'`选项`ismember`- 它只会在匹配整行而不是匹配单个元素时返回 true。

一些希望对您有所帮助的示例代码如下：

```
%# Build an example cell array with coordinates in the first column, and random strings in the second column
CellOfLoc = {[1 2], 'hello'; [3 4], 'world'; [5 6], '!'};

%# Convert the first column of the cell array to a numerical matrix
MatOfLoc = cell2mat(CellOfLoc(:, 1));

%# Build an example x y coordinate location to test
LocToTest = [5 6];

%# Call ismember, being sure to use the rows option
Index = ismember(MatOfLoc, LocToTest, 'rows'); 
```

请注意，如果您的单元格数组中的索引是字符串形式，那么显然您还需要`str2num`在调用`ismember`.

还有一件事，我注意到你是新成员，所以欢迎来到这个网站。如果您认为此回复令人满意地回答了您的问题，请单击此回复旁边的勾号标记已回答的问题。

# c# - 在两个用户控件之间拖放

> ID：14015421
> 
> 赞同：0
> 
> 时间：2012-12-23T23:08:08.890
> 
> 标签：c#, winforms, user-controls, drag-and-drop

我有

1）一个用户控件UC（由单选按钮和文本框组成）

2) 包含多个UC类型控件的表单

我想在这些 UC 控件之间启用拖放（例如 - 将一个控件拖到另一个控件上会将文本从源控件的组成 TextBox 控件添加到目标控件的组成 TextBox 控件）

到目前为止我做了什么：

1) 我已经设置了 UC 并且它的组成控件 AllowDrop = True

2) 在容器形式中，我为 UC 控制 MouseDown、DragEnter 和 DragDrop 事件编写了方法

结果：

仅当我使用不包含组成控件的 UC 部分进行拖放时，拖放才有效 - 也就是说，如果我在 UC 组成 TextBox 控件上按下鼠标按钮，则不会触发 UC MouseDown（如果我在 UC 上按下鼠标按钮，但不在其组成的 TextBox 或 RadioButton 控件上，则触发 UC MouseDown 事件）

我需要的：

无论是否在组成控件上按下（释放）鼠标按钮，我都需要拖放工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:04:12.247

我需要做的是：

1）在用户控制中 - 制作事件委托（MouseEventHandler，而不是 EventHandler）

```
 public event MouseEventHandler eventName; //this one is accessible from container form 
```

2) 在用户控件中 - 为组成控件的 MouseDown 事件编写一个方法，该方法将组成控件的事件连接到公开的事件

```
 private void method_MouseDown(object sender, MouseEventArgs e) //attached to constituent control's MouseDown event
    {
            if (this.eventName!= null) this.eventName(this, e);
    } 
```

3）在容器形式中，编写一个组件控件暴露事件（eventName）的方法

4) 使用用户控件的 DragDrop 和 DragEnter 事件（无需使用组成控件各自的事件）

5) 子控件的 AllowDrop 属性应为 False，否则在子控件上移动鼠标指针会触发用户控件的 DragLeave 事件

# xslt - .fo 创建的 PDF 文件不如预期

> ID：14015422
> 
> 赞同：0
> 
> 时间：2012-12-23T23:08:32.103
> 
> 标签：xslt, xsl-fo

我有一个输出 XSL-FO 的 XSLT 样式表，用于生成 PDF 文件。我正在返回本周的预订，并希望在 PDF 文件中打印按工作日分组的预订。除了预订所属的工作日外，一切正常。

为了说明我的问题，我对生成的 PDF 文件进行了截图：

[每周计划](http://i50.tinypic.com/j81fld.png)

正如您在图片中看到的，前三个预订属于 25.Dezember.2012。如果我`xsl:for-each`在我发布的代码中添加了like，那么每个预订都会显示工作日。

如果我将`xsl:for-each`表体中的所有预订，无论预订属于 26.dezember 还是 27\. dezember，都分配到 25.dezember。我不知道我做错了什么。如何正确打印带有预订的工作日？

```
<xsl:template match="/">

    <fo:root>

        <!-- defines the layout master -->
        <fo:layout-master-set>
            <fo:simple-page-master master-name="first"
                                   page-height="29.7cm"
                                   page-width="21cm"
                                   margin-top="1cm"
                                   margin-bottom="2cm"
                                   margin-left="2cm"
                                   margin-right="2cm">
                <fo:region-body margin-top="3cm" margin-bottom="1.5cm"/>

                <fo:region-before region-name="kopf" extent="3cm"/>
                <fo:region-after region-name="fuss" extent="1.5cm"/>
            </fo:simple-page-master>

            <fo:simple-page-master master-name="quer"
                   page-width="29.7cm"
                   page-height="21cm"
                   margin-top="1cm"
                   margin-bottom="2cm"
                   margin-left="2cm"
                   margin-right="2cm">
                <fo:region-body margin-top="1cm" margin-bottom="1.5cm" />

              <fo:region-before region-name="kopf" extent="1cm"/>
              <fo:region-after region-name="fuss" extent="0.5cm"/>

            </fo:simple-page-master>
        </fo:layout-master-set>

        <!-- starts actual layout -->
        <fo:page-sequence master-reference="quer">

            <fo:static-content flow-name="kopf">
                <fo:block  font-weight="bold" text-align="center" font-family="Arial" font-size="18pt">
                    <xsl:text>Test</xsl:text>
                </fo:block>

            </fo:static-content>

            <fo:static-content flow-name="fuss">
                <fo:block border-bottom-width="thin" border-bottom-style="solid"
                 border-bottom-color="black" font-weight="bold" text-align="right" font-family="Arial" font-size="9pt">
                    erstellt am:
                    <xsl:value-of select="lfsExtension:FormatDateTime(.//Erstellt, 'dd.MM.yy HH:mm')"/>
                    <xsl:text> Seite: </xsl:text><fo:page-number/>/<fo:page-number-citation ref-id="lastBlock"/>
                </fo:block>
            </fo:static-content>

            <fo:flow flow-name="xsl-region-body">

                 <!--this defines a title level 1 -->

              <xsl:for-each select=".//WeeklyBPlan" >

                  <fo:block

                            line-height="24pt"
                            space-after.optimum="15pt"
                            padding-top="3pt">
                      <xsl:value-of select=".//WEEKDAY" /> 
                    </fo:block>

                <!-- table start -->
                <fo:table table-layout="fixed" border="solid" border-collapse="collapse" border-width="0.5pt">
                    <fo:table-column column-width="25mm"/>
                    <fo:table-column column-width="12mm"/>
                    <fo:table-column column-width="20mm"/>
                                <fo:table-column column-width="50mm"/>
                    <fo:table-column column-width="20mm"/>
                    <fo:table-column column-width="25mm"/>
                                <fo:table-column column-width="10mm"/>
                    <fo:table-column column-width="30mm"/>
                    <fo:table-column column-width="35mm"/>
                    <fo:table-column column-width="35mm"/>
                    <fo:table-header>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Raum</fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Zeit</fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Abteilung</fo:block>
                            </fo:table-cell>
                                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Thema</fo:block>
                            </fo:table-cell>
                                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Mieter</fo:block>
                            </fo:table-cell>
                                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Tel.-Nr</fo:block>
                            </fo:table-cell>
                                            <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">PAnz</fo:block>
                            </fo:table-cell>
                           <fo:table-cell>
                            <fo:block background-color="grey"
                      color="white" text-align="center">Bestuhlung</fo:block>
                           </fo:table-cell>
                                           <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Bemerkung</fo:block>
                            </fo:table-cell>
                                           <fo:table-cell>
                                <fo:block background-color="grey"
                      color="white" text-align="center">Ausstattung</fo:block>
                            </fo:table-cell>
                           </fo:table-row>
                      <fo:table-row>
                      </fo:table-row>
                    </fo:table-header>
                    <fo:table-body>

                            <fo:table-row>
                                <fo:table-cell  border-right-width="0.5pt" border-right-style="solid"  border-bottom-width="0.5pt" border-bottom-style="solid" padding-right="6pt" padding-left="6pt" >
                                    <fo:block font-family="Arial" font-size="9pt"  padding="2pt">
                                        <xsl:value-of select=".//Raum" />
                                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell border-right-width="0.5pt" border-right-style="solid" border-bottom-width="0.5pt" border-bottom-style="solid">
                                    <fo:block font-family="Arial" font-size="9pt"  padding="2pt"  text-align="center">
                                        <xsl:value-of select=".//Zeit" />
                                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell border-right-width="0.5pt" border-right-style="solid" border-bottom-width="0.5pt" border-bottom-style="solid">
                                    <fo:block font-family="Arial" font-size="9pt" padding="2pt" text-align="center">
                                        <xsl:value-of select=".//Abteilung" />
                                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell border-right-width="0.5pt" border-right-style="solid"  border-bottom-width="0.5pt" border-bottom-style="solid" padding-left="6pt" padding-right="6pt">

                                       <fo:block font-family="Arial" font-size="9pt"  padding="2pt" wrap-option="no-wrap" >
                                        <xsl:value-of select=".//Thema" />
                                       </fo:block>

                                </fo:table-cell>
                              <fo:table-cell border-right-width="0.5pt" border-right-style="solid" border-bottom-width="0.5pt" border-bottom-style="solid">
                                <fo:block font-family="Arial" font-size="9pt"  padding="2pt" text-align="center">
                                  <xsl:value-of select=".//Mieter" />
                                </fo:block>
                              </fo:table-cell>
                              <fo:table-cell border-right-width="0.5pt" border-right-style="solid" border-bottom-width="0.5pt" border-bottom-style="solid">

                                <fo:block font-family="Arial" font-size="9pt"  padding="2pt" text-align="center">
                                  <xsl:value-of select=".//Mieter_Tel" />
                                </fo:block>

                              </fo:table-cell>
                              <fo:table-cell border-right-width="0.5pt" border-right-style="solid" border-bottom-width="0.5pt" border-bottom-style="solid">
                                <fo:block font-family="Arial" font-size="9pt"  padding="2pt" text-align="center">
                                  <xsl:value-of select=".//Personen" />
                                </fo:block>
                              </fo:table-cell>
                              <fo:table-cell border-right-width="0.5pt" border-right-style="solid" border-bottom-width="0.5pt" border-bottom-style="solid"> 
                                <fo:block  font-family="Arial" font-size="9pt" padding="2pt" text-align="center">
                                  <xsl:value-of select=".//Bestuhlung" />
                                </fo:block>
                              </fo:table-cell>
                              <fo:table-cell padding-left="8pt" border-right-style="solid" border-bottom-width="0.5pt" border-right-width="0.5pt" border-bottom-style="solid" >
                                <fo:block  font-family="Arial" font-size="9pt" padding="2pt">
                                  <xsl:value-of select=".//Bemerkung" />
                                </fo:block>
                              </fo:table-cell>
                              <fo:table-cell padding-left="6pt" padding-right="6pt" border-bottom-width="0.5pt" border-bottom-style="solid">
                                <fo:block  font-family="Arial" font-size="9pt" padding="2pt">
                                  <xsl:value-of select=".//Ausstattung" />
                                </fo:block>
                              </fo:table-cell>
                              </fo:table-row>

                    </fo:table-body>
                  </fo:table>
                  <!-- table end -->

              </xsl:for-each>

              <fo:block id="lastBlock"/>
            </fo:flow>

        </fo:page-sequence>

    </fo:root>

</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:12:32.600

使用 for-each-group 按日期分组

```
<xsl:for-each-group select=".//WeeklyBPlan" group-by="/WEEKDAY">
 <fo:block line-height="24pt" space-after.optimum="15pt"
                        padding-top="3pt">
                  <xsl:value-of select="current-grouping-key()" /> 
                </fo:block>
    //table header here
    <xsl:for-each select="current-group()">
        // populate table row
    </xsl:for-each>
 </xsl:for-each-group> 
```

# django - 格式化时间字段

> ID：14015426
> 
> 赞同：3
> 
> 时间：2012-12-23T23:09:37.077
> 
> 标签：django, timefield

我正在覆盖我的模型管理表单以更改`TimeField`字段显示时间的格式：

```
class myTimeForm(forms.ModelForm):
    start_time = forms.TimeField(widget=forms.TimeInput(format='%H:%M'))
    class Meta:
        model = MyModel

class MyModelAdmin(admin.ModelAdmin):
    form = myTimeForm 
```

现在，`now`我在默认表单中的时钟按钮已经消失（在下面的屏幕截图中`Start time`，是被覆盖的小部件，`End time`带有默认的小部件。

![在此处输入图像描述](../Images/b92d46053e26e045577f9e1aedcae72a.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:44:32.610

Django 管理员`AdminTimeWidget`使用`forms.TimeInput`. 尝试将您的代码更改为以下内容：

```
from django.contrib.admin.widgets import AdminTimeWidget

class myTimeForm(forms.ModelForm):
    start_time = forms.TimeField(widget=AdminTimeWidget(format='%H:%M'))
    class Meta:
        model = MyModel 
```

# c# - 在运行时查询 dll 中的自定义属性

> ID：14015428
> 
> 赞同：1
> 
> 时间：2012-12-23T23:10:05.133
> 
> 标签：c#, .net

我需要能够用自定义属性装饰一个 DLL，然后在运行时从另一个应用程序中读取它们。

我有一个名为“QueryDLL”的“主”应用程序。它通过以下代码查询 dll：

```
String assemblyName;
        assemblyName = @"..\GenericControl.Dll";
        Assembly a = Assembly.LoadFrom(assemblyName);
        Type type = a.GetType("GenericControl.UserControl1", true);
        System.Reflection.MemberInfo info = type;
        var attributes = info.GetCustomAttributes(false);

        foreach (Attribute attr in attributes)
        {
          string value = attr.Name;  <----- This of course fails as attr is not of type "GenericControl.UserControl1" - How do I get access "name" field here...
        } 
```

我对如何从 dll 中的属性装饰中获取各个字段（例如名称字段）感到困惑。（我检查了其他示例，但不知所措……我怀疑我遗漏了一些简单的东西？）

在上面的 foreach 循环中，如果我打开调试器并检查“属性”集合，它正确包含 dll 中包含的 4 个属性装饰，但我无法提取各个字段（名称、级别、已审核） .

我的 DLL 包含一个定义属性的类：

```
 [AttributeUsage(AttributeTargets.All, AllowMultiple = true)]
    public class DeveloperAttribute : Attribute
    {
        // Private fields. 
        private string name;
        private string level;
        private bool reviewed;

        // This constructor defines two required parameters: name and level. 

        public DeveloperAttribute(string name, string level)
        {
            this.name = name;
            this.level = level;
            this.reviewed = false;
        }

        // Define Name property. 
        // This is a read-only attribute. 

        public virtual string Name
        {
            get { return name; }
        }

        // Define Level property. 
        // This is a read-only attribute. 

        public virtual string Level
        {
            get { return level; }
        }

        // Define Reviewed property. 
        // This is a read/write attribute. 

        public virtual bool Reviewed
        {
            get { return reviewed; }
            set { reviewed = value; }
        }
    } 
```

这个 DLL 也用这个属性修饰：

```
 namespace GenericControl
    {

        [DeveloperAttribute("Joan Smith", "42", Reviewed = true)]
        [DeveloperAttribute("Bob Smith", "18", Reviewed = false)]
        [DeveloperAttribute("Andy White", "27", Reviewed = true)]
        [DeveloperAttribute("Mary Kline", "23", Reviewed = false)]

        public partial class UserControl1: UserControl
        {
          public UserControl1()
           {
             InitializeComponent();
            }
          ... 
```

感谢您提供的任何见解...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:14:13.970

```
foreach (Attribute attr in attributes)
{
   var devAttr = attr as DeveloperAttribute;
   if (devAttr != null)
   {
      string value = devAttr.Name;
   }
} 
```

# qt - 如何在opengl qt中制作振荡动画

> ID：14015435
> 
> 赞同：0
> 
> 时间：2012-12-23T23:13:06.010
> 
> 标签：qt, opengl, animation

我试图让一个角色做一个振荡动作。也就是说，角色首先会旋转到某个角度，比如 60 度，然后慢慢回到直立位置，然后向相反方向旋转小于 60 度的角度，比如 55 度，然后再重复一遍，直到旋转角度达到零，字符停止。目前我正在尝试通过声明全局变量并使用 if 块检查它们并在这些块中将它们的值更改 1 度来实现这一点，这样每次计时器调用paintgl 时，它都会将角度减小 1 度并绘制对象从而使其成为看起来它在慢慢旋转。我无法阻止角色。这是我处理它的代码的一部分；

```
 glRotatef(j,0,1,0);
glRotatef(k,0,1,0);

if(flag)
{
    j = j + 2;
    if (j == 0)
     {
        k = 60;
        flag = !flag;

    }
}

if(!flag)
{

    k = k - 2;
    if(k == 0)
    {
        j = -60;
        flag = !flag;
    }
}

gluCylinder(player, 1,1,8,100,100); 
```

这里圆柱体是我的角色，if 块正在增加/减少全局变量 j 和 k。j 初始化为 -60， k 初始化为 60。

我怎样才能让这件事发挥作用，我怎样才能阻止它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:30:11.333

`k`和`j`浮点变量？如果是这样，精确的比较将不起作用，因为浮点数本质上是不精确的。如果它低于某个阈值，您将不得不采取差异并进行测试。

然而，对于简单的振荡，我只需将时间放入正弦函数中，并将其输出（在 -1…1 范围内）用作缩放和偏移到所需动画状态的函数的输入。

这样做的通用方法是实现动画曲线系统。即，您可以输入用于构造分段插值函数的参数，该函数将时间作为输入变量，并将用户（即您）参数化的插值值作为输出变量。详情请搜索“动画曲线系统”。

# objective-c - &self -- 我是否得到对象的地址

> ID：14015436
> 
> 赞同：1
> 
> 时间：2012-12-23T23:13:18.270
> 
> 标签：objective-c

我创建了同一类的 2 个对象。当我在一个方法中这样做时：

```
NSLog(@"This object is on address %p\n",&self);` 
```

对于同一类的两个不同对象，我得到相同的地址。

当我在课外这样做时：

```
NSLog(@"This object is on address %p\n",&myObject);
and
NSLog(@"This object is on address %p\n",&anotherObject); 
```

我确实得到了两个不同的地址。我是否缺少有关自我工作方式的信息？它不应该是指向对象的指针吗？

不同的角度：如何从对象类的方法中获取对象的地址？

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T23:29:01.053

在 Objective C 中，对类的引用已经是一个指针。通过获取`self`或`myObject`获取存储变量的地址（可能在堆栈上）。

所以只是打印：

```
NSLog(@"This object is on address %p\n", self); 
```

或者

```
 NSLog(@"This object is on address %p\n", myObject); 
```

将打印班级地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:21:14.210

我相信`%p`不需要您传递变量的地址。这是一个 void* 操作。我不在我的开发机器上自己测试这个，但尝试这样做：

```
NSLog(@"This object is on address %p\n", self); 
```

# php - 获取文件时getimagesize失败

> ID：14015444
> 
> 赞同：1
> 
> 时间：2012-12-23T23:15:19.993
> 
> 标签：php, getimagesize

我在使用`getimagesize()`. 上传文件后，将后者放入 . 但是当我调用`getimagesize()`（或`fopen`（））时，我收到此错误消息

> getimagesize(http://mysite.com/files/documents/file_upload.png) [function.getimagesize]：打开流失败：HTTP 请求失败！HTTP/1.1 404

当我将此 URL 放入浏览器时，图像正常显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:19:55.317

联系您要请求镜像的服务器所有者，并询问获取镜像的技术要求。所有者会告诉您您必须做什么，或者是否通常不支持像您一样使用 PHP 脚本请求图像。

但是，只有服务器所有者可以告诉您。HTH。

# c# - 将xml中的“跳过”节点保存到数组中

> ID：14015447
> 
> 赞同：3
> 
> 时间：2012-12-23T23:16:03.083
> 
> 标签：c#, xml, arrays

在我的代码中，我正在下载一个 xml 文件，并且因为其中一个节点是可变的（它们的名称和数量），所以我使用如下代码：

```
XmlNodeList arrivals = airplanes.SelectNodes("/myXml/flights/*/arrivals"); 
```

现在我需要做的是将“*”跳过的节点的名称保存到一个数组或数组列表中，类似的东西。稍后我将需要使用一些 foreach 对每个节点做一些事情，现在保存为字符串。我试过了

```
foreach(* in MyArrayList) 
```

这不起作用，假设我不能在这里使用“ * ”，我在那里得到了一些错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T23:23:23.120

`XmlNode`中的每个`XmlNodeList`都有一个`ParentNode`属性，您应该能够使用它从`arrivals`xml 中的节点导航回该`*`节点。

以下 Linq 查询应获取名称：

```
var names = arrivals.Cast<XmlNode>().Select(x => x.ParentNode.Name).ToList(); 
```

之所以需要，`Cast<XmlNode>`是因为 XmlNodeList 没有实现通用`IEnumerable`接口。

# c++ - 使用 strlen 时不为空终止符添加 +1 会导致在使用 send 时发送额外的垃圾字节

> ID：14015451
> 
> 赞同：-9
> 
> 时间：2012-12-23T23:16:41.927
> 
> 标签：c++, c, string

我试图弄清楚为什么当我手动输入字符串长度（例如（int）18）并给它输入的18长度字符串的相同数据时，当strlen在计算时与（int）strlen（variable [1]）不同在变量 [1] 上产生 18。我希望由于 strlen 函数的结果是 18，因此两者会产生相同的结果，但由于某种原因，strlen 会丢弃垃圾数据，例如 ｮœ 或其他随机字符。为了解决这个问题 (int)strlen(variable[1])+1 有效，但我仍然不明白当这两个函数导致 int 值 18 时它们会产生不同的结果。

编辑：尝试简化我的问题，如何

```
iResult = send( ConnectSocket, argv[2], (int)strlen(argv[2]), 0 ); 
```

与......不同

```
iResult = send( ConnectSocket, argv[2], (int)5, 0 ); 
```

当 argv[2] 为“12345”时？我希望得到相同的结果，但我错了，我想知道如何/为什么。

EDIT2：没关系，我一定做了一些愚蠢的事情，比如在没有意外重新编译的情况下测试程序，因为现在一切都按照我期望的方式工作......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T23:24:07.160

如果字符串末尾没有零，那么任何正在寻找零的东西都会继续运行。strlen() 和其他函数知道字符串结束的唯一方法是因为末尾有一个零。因此，例如，如果您使用`printf("%s", somestring);`并且`somestring`没有终止零， printf 将继续运行，打印字符串之后发生的任何内容 - 这可能是“不可打印”和“外来”字符。

# ruby-on-rails - 如何使用 Mailboxer 获取用户消息

> ID：14015455
> 
> 赞同：0
> 
> 时间：2012-12-23T23:17:27.310
> 
> 标签：ruby-on-rails, messaging

我正在我的应用程序中构建一个简单的消息传递系统，并使用邮箱来执行此操作。我正在尝试列出用户收到的所有消息，包括正文和发件人姓名。我一直在尝试使用[https://github.com/RKushnir/mailboxer-app](https://github.com/RKushnir/mailboxer-app)中的代码作为模板，但我就是无法正常工作。到目前为止，我已经弄清楚如何使用他们拥有的收据获取一个数组，但还没有弄清楚如何获取这些收据获得的通知。

我的用户模型是消息模型。

我已经能够通过

```
@message = current_user.mailbox.inbox.first.messages.first.body 
```

但这似乎效率不高，我正在努力遍历所有对话以提取所有消息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T16:42:15.473

我是这样做的：

```
<h2>Inbox</h2>
<table>
  <%= content_tag_for(:tr, @mail ) do |conversation| %>
    <% message = conversation.messages.first %>
    <td><%= image_tag message.sender.photo.url(:small) %></td>
    <td><%= link_to message.sender.name, message.sender %></td>
    <td><%= message.body %></td>
  <% end %>
</table> 
```

这只适用，因为所有对话都只会附加一条消息，我不确定稍后对话有多个消息时该怎么办。

# java - 创建变换以从一个矩形映射到另一个？

> ID：14015456
> 
> 赞同：9
> 
> 时间：2012-12-23T23:17:37.913
> 
> 标签：java, awt, transformation, rectangles, affinetransform

创建`AffineTransform`将坐标从一个矩形映射到另一个（给出浮动/双矩形）的最简单方法是什么？

**更新 1**

矩形可以完全不同。例如 [(0,0)-(1,1)] 和 [(150,-14)-(-1000,-14.1)]。并且变换应该是均匀变换的。例如，矩形角应该一对一变换。例如坐标 (0,0) 应变为 (150,-14)。

**更新 2**

我需要`AffineTransform`对象，而不仅仅是计算。因为我想将它应用于`Graphics`对象。我也想以一些简单转换的串联形式。

**更新 3**

以下 3 个测试全部失败：

```
public class RectangleTransformTest {

    private static final double delta = 0.001;

    Rectangle2D r1 = new Rectangle2D.Double(-1, 0, 2, 0.01);
    Rectangle2D r2 = new Rectangle2D.Double(10, 20, 400, 300);

    AffineTransform t;

    Point2D src;
    Point2D dst1, dst2;

    @Test
    public void test1() {

        t = new AffineTransform();
        t.translate(+r2.getMinX()-r1.getMinX(), +r2.getMinY()-r1.getMinY());
        t.scale(r2.getWidth()/r1.getWidth(), r2.getHeight()/r1.getHeight());

    }

    @Test
    public void test2() {

        t = new AffineTransform();

        t.scale(r2.getWidth()/r1.getWidth(), r2.getHeight()/r1.getHeight());
        t.translate(+r2.getMinX()-r1.getMinX(), +r2.getMinY()-r1.getMinY());

    }

    @Test
    public void test3() {

        t = new AffineTransform();

        t.scale((r2.getMaxX()-r2.getMinX())/(r1.getMaxX()-r1.getMinX()), (r2.getMaxY()-r2.getMinY())/(r1.getMaxY()-r1.getMinY()));
        t.translate(+r2.getMinX()-r1.getMinX(), +r2.getMinY()-r1.getMinY());

    }

    @After
    public void comparePoints() {

        src = new Point2D.Double(r1.getMinX(), r1.getMinY());
        dst1 =  new Point2D.Double();
        t.transform(src, dst1);
        dst2 = new Point2D.Double(r2.getMinX(), r2.getMinY());

        assertEquals(dst2.getX(), dst1.getX(), delta);
        assertEquals(dst2.getY(), dst1.getY(), delta);

        src = new Point2D.Double(r1.getMinX(), r1.getMaxY());
        dst1 =  new Point2D.Double();
        t.transform(src, dst1);
        dst2 = new Point2D.Double(r2.getMinX(), r2.getMaxY());

        assertEquals(dst2.getX(), dst1.getX(), delta);
        assertEquals(dst2.getY(), dst1.getY(), delta);

        src = new Point2D.Double(r1.getMaxX(), r1.getMinY());
        dst1 =  new Point2D.Double();
        t.transform(src, dst1);
        dst2 = new Point2D.Double(r2.getMaxX(), r2.getMinY());

        assertEquals(dst2.getX(), dst1.getX(), delta);
        assertEquals(dst2.getY(), dst1.getY(), delta);

        src = new Point2D.Double(r1.getMaxX(), r1.getMaxY());
        dst1 =  new Point2D.Double();
        t.transform(src, dst1);
        dst2 = new Point2D.Double(r2.getMaxX(), r2.getMaxY());

        assertEquals(dst2.getX(), dst1.getX(), delta);
        assertEquals(dst2.getY(), dst1.getY(), delta);

    }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-24T00:04:43.257

要从 [(a,b)-(c,d)] 转换为 [(e,f)-(g,h)] 您可以执行以下计算：

```
x' = e + (x - a) * (g - e) / (c - a);
y' = f + (y - b) * (h - f) / (d - b); 
```

这是相应的`AffineTransform`代码，其中`r1`正在转换为`r2`：

```
t = new AffineTransform();
t.translate(r2.getMinX(), r2.getMinY());
t.scale(r2.getWidth()/r1.getWidth(), r2.getHeight()/r1.getHeight());    
t.translate(-r1.getMinX(), -r1.getMinY()); 
```

# c# - 使用正则表达式匹配多个模式

> ID：14015458
> 
> 赞同：6
> 
> 时间：2012-12-23T23:17:53.237
> 
> 标签：c#, .net, regex

我有 3 组：时间、日期和密码。我可以让这条线匹配这条线：

> 26/06/2012 33:06:12a_user_logged_in,3412234,2,3,512,3 33:06:12a_user_logged_in,3412234,2,3,512,3,26/06/2012 26/06/2012 a_user_logged_in_at,33:06:12, 3412234,2,3,512,3

我想匹配`26/06/2012`作为`date`组，`33:06:12`作为`time`和`3412234`作为`pin`组。

我已经成功地这样做了，但只有这条线必须像第一条那样采用某种模式

```
(?<date>[\d]+/[\d]+/[\d]+) (?<time>[\d]+:[\d]+:[\d]+)([ |,][a-zA-z]*)+,(?<pin>[\d]{4,10}).+ 
```

但是当我将此模式应用于其他两行表格时，它不匹配。

我的问题是，无论线路形式如何，如何匹配时间、日期和引脚组？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T23:40:29.973

只需`|`在您的表达式之间添加：

```
(?<date>[\d]+/[\d]+/[\d]+)|(?<time>[\d]+:[\d]+:[\d]+)|(?<pin>(?<=[^/])[\d]{4,10}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T23:24:42.707

如果您不想同时验证模式，则可以使用从字符串开头开始的[前瞻。](http://www.regular-expressions.info/lookaround.html)由于它们实际上不消耗任何东西，因此引擎在完成一次前瞻后跳回开始。因此，三场比赛的顺序无关紧要：

```
^(?=.*(?<date>\d+/\d+/\d+))(?=.*(?<time>\d+:\d+:\d+))(?=.*,(?<pin>\d{4,10})) 
```

注意`,`前面的`pin`组。否则，您可能会发现年份是大头针（因为它也是 4 位数字）。

但话又说回来，为了代码的可读性，您可能只想将其拆分为三个模式（这也避免了捕获，因此它甚至可能不会那么慢）：

```
Pattern for date: \d+/\d+/\d+
Pattern for time: \d+:\d+:\d+
Pattern for pin:  (?<=,)\d{4,10} 
```

这些只会在整个比赛中为您提供所需的值。

# c# - XAML：用户控件不传播对绑定源的更改

> ID：14015459
> 
> 赞同：2
> 
> 时间：2012-12-23T23:18:00.197
> 
> 标签：c#, xaml, binding, user-controls, windows-runtime

我正在为 Metro UI 开发一个 ImagePicker 用户控件。它的原理很简单：它显示一个图像，当点击图像时，会打开一个文件对话框，允许更改当前图像。为此，用户控件只需公开包装图像绑定到的 ImageSource 属性。

```
<local:ImagePicker Source="{Binding PictureUri, Mode=TwoWay}"/> 
```

在启动时，绑定工作正常，并显示来自我的视图模型提供的 PictureUri 属性的图片。问题是，当我点击图像并选择一个新图像时，会显示新图像，但尽管使用了 TwoWay 绑定模式，但**我的视图模型中的绑定值并未更新。**我相信这个问题来自我的用户控制代码，但我不明白为什么当它实际传播到包装图像时该值没有传播到视图模型......

所以这里是 XAML 部分。

```
<UserControl x:Name="ImagePickerUserControl"
    x:Class="ImageUserControl.ImagePicker"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid x:Name="ImagePickerRootGrid" Background="Gray">
        <Image Source="{Binding Source, ElementName=ImagePickerUserControl}"/>
    </Grid>

</UserControl> 
```

和代码部分，对不起长度，但我相信这里一切都很重要。

```
public sealed partial class ImagePicker : UserControl
{
    public ImagePicker()
    {
        this.InitializeComponent();

        // Hookup event to handle when the control is tapped
        this.Tapped += ImagePicker_Tapped;
    }

    public static readonly DependencyProperty SourceProperty =
        DependencyProperty.Register("Source", typeof(ImageSource), typeof(ImagePicker),
        new PropertyMetadata(null, new PropertyChangedCallback(ImagePicker.OnSourceChanged)));

    public ImageSource Source
    {
        get
        {
            return (ImageSource)this.GetValue(ImagePicker.SourceProperty);
        }

        set
        {
            this.SetValue(ImagePicker.SourceProperty, value);
        }
    }

    private static void OnSourceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        // Update Visual State
    }

    private async void ImagePicker_Tapped(object sender, TappedRoutedEventArgs e)
    {
        // Pick up a new picture
        FileOpenPicker filePicker = new FileOpenPicker();
        filePicker.FileTypeFilter.Add(".jpg");
        filePicker.FileTypeFilter.Add(".jpeg");
        filePicker.FileTypeFilter.Add(".png");
        var pngFile = await filePicker.PickSingleFileAsync();

        // If the user picked up a file
        if (pngFile != null)
        {
            BitmapImage bitmap = new BitmapImage();
            await bitmap.SetSourceAsync(await pngFile.OpenReadAsync());

            // Update the source image
            this.Source = bitmap;
        }
    }
} 
```

我相信这个问题只是我的一个错误，但我无法理解这里发生了什么。如果您想尝试运行该项目并更好地查看代码，我将其上传并分享到 SkyDrive：[ImageUserControl](https://skydrive.live.com/redir?resid=6306CB0FD66DCF1A!850&authkey=!AAUOVm9RHmCHtP8)

感谢您耐心阅读这么长的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:07:36.677

如果您在运行代码时查看输出窗口，您将看到以下内容：-

> mscorlib.dll 中出现了“System.ArgumentException”类型的第一次机会异常
> 
> 错误：无法将值从目标保存回源。BindingExpression：路径='PictureUri' DataItem='ImageUserControl.PictureViewModel'; 目标元素是'ImageUserControl.ImagePicker'（名称='ImagePickerUserControl'）；目标属性是“源”（类型“ImageSource”）。

这是因为您将 ImageSource 绑定到 URI 的属性。最简单的解决方法是将图像选择器的源更改为 uri，如下所示：-

```
using System.ComponentModel;
using Windows.UI.Xaml.Media;

namespace ImageUserControl
{
    public class PictureViewModel : INotifyPropertyChanged
    {
        private ImageSource pictureUri;

        public ImageSource PictureUri 
        { 
            get
            {
                return this.pictureUri;
            }

            set 
            {
                if (this.pictureUri != value)
                {
                    this.pictureUri = value;
                    this.RaisePropertyChanged("PictureUri");
                }
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void RaisePropertyChanged(string propertyName)
        {
            var handler = this.PropertyChanged;

            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

然后，您可以按如下方式修改视图模型定位器：-

```
using System;
using Windows.UI.Xaml.Media.Imaging;

namespace ImageUserControl
{
    public class ViewModelLocator
    {
        static ViewModelLocator()
        {}

        public PictureViewModel Main
        {
            get
            {
                return new PictureViewModel
                {                    
                    PictureUri = new BitmapImage(new Uri("ms-resource:/Files/Assets/eels.jpg"))
                };
            }
        }
    }
} 
```

然后该事件会按您的预期触发。如果您确实需要图像的 URI，则必须将其添加为附加属性。

（使用 Eels 专辑封面作为测试图像的奖励积分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:00:16.220

双向绑定不起作用，因为您的依赖属性是 type `ImageSource`，而您的视图模型属性是 type `Uri`。绑定无法将 an 转换`ImageSource`为 an，`Uri`因此未设置该值。您需要`Uri`用户控件上的类型属性来使双向绑定起作用。

编辑：

如果您仅将依赖项属性更改为不同的类型，则如果用户选择了您的应用在没有选择器的情况下无法访问的文件，则内部图像将不再显示。您的应用程序只能通过使用返回的来访问此类文件`StorageFile`，而不是使用其绝对路径。在控件内部，您可以通过具有两个依赖属性来解决这个问题：`ImageSource`就像现在显示内部图像和`Uri`返回路径一样。由于您将绑定到第二个，因此您需要添加一个回调，该回调将`ImageSource`在“Uri”从外部更改时设置属性。

根据您想对用户控制之外的结果做什么，这对您来说可能还不够好。如果您想访问那里的文件，您需要返回 a`StorageFile`或将文件放入[FutureAccessList](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.accesscache.storageapplicationpermissions.futureaccesslist.aspx)并返回令牌。

# java - 构建快速的 Web 服务

> ID：14015460
> 
> 赞同：2
> 
> 时间：2012-12-23T23:18:06.403
> 
> 标签：java, php, performance, web-services, web

我想在不提供这些组件的源代码的情况下向许多 php 网站提供以不同编程语言（Java、C#、php 和 perl）构建的组件，即我想提供服务而不是组件。我正在考虑为这些组件中的每一个构建 Web 服务并将这些 Web 服务提供给网站。

**我的问题是：**

您是否认为这会显着影响网站的性能（在大多数情况下，只有一个 Web 服务调用，很少有页面包含 2-3 个调用）。您是否建议在构建这些 Web 服务以最大程度地减少负面影响时进行任何实践，我的意思是，如果您推荐最后提到的语言之一（Java、C#、php 和 perl），我可以用这种语言重新编程所有组件（注意：大多数组件都是Java）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:28:40.643

最慢的将是：网络通信。调用 web-services 最慢的几秒钟将是数据库查询，如果你在你的组件上这样做的话。

您可以使用文本/xml 进行通信，在 Java 中为 xml <-> 对象编组/解组。JSON 更快一点，因为标签更少。最快的是二进制协议。协议更改不会真正影响您的站点性能，除非您有巨大的流量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T16:24:26.710

这在今天绝非罕见。相反，如果构建正确，它可能会同时提高和降低感知性能。在呈现页面之前，不要在后端进行所有其余的调用，而是发回一个对 Web 服务进行 AJAX 调用的页面。您的初始加载会更短，因为并非所有内容都会首先加载，并且在所有内容出现之前的整体加载将花费更长的时间，但人们已经习惯了。

# android - Android ArrayList.size 返回 notfound

> ID：14015461
> 
> 赞同：0
> 
> 时间：2012-12-23T23:18:34.537
> 
> 标签：android, vector, size

我的应用程序将一个整数值添加到一个向量，然后想知道该向量的大小。

```
if(nearSelected||middleSelected||farSelected){
    ArrayList<Integer> distance = new ArrayList<Integer>();

    //Which distance(s) has the user selected?
    if(nearSelected){distance.add(1);}
    if(middleSelected){distance.add(2);}
    if(farSelected){distance.add(3);}       

    //Attempt to display the number of choices picked to the user
    try {
        Toast.makeText(getBaseContext(), distance.size(), Toast.LENGTH_SHORT).show();
    } catch (Exception e) {
       Log.i(LOG_TAG, e.toString());
    }
} 
```

不幸的是，尝试获取`distance.size()`会导致`NotFoundException`. 代码的所有其他部分运行良好，只是这部分崩溃了。我哪里搞砸了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T23:20:25.563

`Distance.size()`不是导致 a 的原因`Resources.NotFoundException`，它的`Toast.makeText`. 当使用*整数*作为参数调用时，它会查找以该*整数*作为 id的*字符串*资源。如果要将数字显示为字符串，则必须这样告诉它：

 *```
Toast.makeText(getBaseContext(), Integer.toString(distance.size()), Toast.LENGTH_SHORT).show(); 
```*

# css - 如何用浮动设置高度？

> ID：14015463
> 
> 赞同：0
> 
> 时间：2012-12-23T23:18:46.960
> 
> 标签：css

我需要设置`height:100%`。这是我的代码：

```
#wrapper{
    width: 100%;
    height: 100%;
    margin: 0 auto;
    padding: 50px 10px 0 0 !important;
    /*border: 1px solid red;*/
}

#left-side{
    border: 1px solid red;
    float: left;
    background-color: #FFFFFF;
    height: 100%;
    margin: 0 20px 0 10px;
    width: 200px;
}
#right-side{
    border: 1px solid green;
}

<body>
    <div id="wrapper">
        <div id="left-side">
            lol
        </div>
        <div id="right-side">
            <!-- squares -->
        </div>
    </div>
</body> 
```

![图片](../Images/4fc94aadd6a4db66c45db88b9fda470f.png)

哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:30:54.813

我已经对 CSS 进行了一些编辑。检查这是否是你需要的

```
#wrapper{
    width: 1000px;
    margin: 0 auto;
    padding: 50px 10px 0 0 !important;
    /*border: 1px solid red;*/
}

#left-side{
    position:relative;
    border: 1px solid red;
    float: left;
    background-color: #FFFFFF;
    margin: 0 20px 0 10px;
    width: 200px;
}

#right-side{
    width:600px;
    float:right;
    border: 1px solid green;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:35:28.247

当您使用百分比时，它是相对于它的父级的。您`#wrapper`有一个`body`没有定义高度的父级 ( )。

在您的 CSS 中，添加：

```
 html, body { height: 100% } 
```

现在你`#wrapper`可以与它的父母联系起来。这是因为`html`有浏览器窗口作为它的父级，`body html`作为它的父级等等。

[演示小提琴](http://jsfiddle.net/r8E8D/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T23:37:50.583

如果您的目标是简单地拥有相等高度的列，则这些`display: table`属性非常适用：

```
#wrapper{
    width: 100%;
    height: 100%;
    margin: 0 auto;
    padding: 50px 10px 0 0 !important;
    /*border: 1px solid red;*/
    display: table; /* here */
}

#left-side{
    border: 1px solid red;
    display: table-cell; /* replaces the float */
    background-color: #FFFFFF;
    height: 100%;
    margin: 0 20px 0 10px;
    width: 200px;
}
#right-side{
    border: 1px solid green;
    display: table-cell; /* here */
} 
```

[http://jsfiddle.net/VTCxs/](http://jsfiddle.net/VTCxs/)

如果您的目标是简单地防止图像 in`#right-side`流动`#left-side`，那么您需要添加等于 to 宽度的边距或`#right-side`填充`#left-side`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T23:40:04.500

如果 100% 的高度应该意味着全屏，则必须将 html 和 body 标签设置为 100%，以确保包装器确实包装了嵌套容器，您必须为包装器元素添加浮动中断.

```
html,body {
 height:100%;
}

#wrapper{
    width: 100%;
    height: 100%;
    margin: 0 auto;
    padding: 50px 10px 0 0 !important;
    border: 1px solid blue;
}

#wrapper:after {
    content: " ";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;

} 
```

[这是一个小演示](http://jsfiddle.net/axelmichel/fLtfu/)。马上你就会得到一个滚动条，因为你的包装器有 100% 的高度加上 50px 顶部的填充。

# php - 如何按某个键的值对 JSON 对象进行排序

> ID：14015471
> 
> 赞同：3
> 
> 时间：2012-12-23T23:20:20.233
> 
> 标签：php, json, sorting

**我的目标：**

> 按信用对用户的 json 列表进行排序。

**我的问题：**

> 学分是排序的，但它们应该是相反的顺序。

**我的结果：**

```
Position: 1
Username: abc
Credits: 12

Position: 2
Username: bcd
Credits: 123

Position: 3
Username: cde
Credits: 1245 
```

**我需要的：**

```
Position: 1
Username: abc
Credits: 1234

Position: 2
Username: bcd
Credits: 123

Position: 3
Username: cde
Credits: 12 
```

**我的问题：**

> 我怎样才能使名称按照学分排序的正确顺序排列？

**我的PHP代码：**

```
<?php
$json = '{"id":1,"jsonrpc":"2.0","total":50,"result":[{"id":1,"username":"Ashley","credits":684921},{"id":2,"username":"Caroline","credits":113045},{"id":3,"username":"Alexandra","credits":669133},{"id":4,"username":"Katelyn","credits":735955},{"id":5,"username":"Ashley","credits":202478},{"id":6,"username":"Anna","credits":854266},{"id":7,"username":"Lily","credits":406425},{"id":8,"username":"Samantha","credits":430603},{"id":9,"username":"Caroline","credits":380785},{"id":10,"username":"Paige","credits":961596},{"id":11,"username":"Bailey","credits":67660},{"id":12,"username":"Kimberly","credits":610751},{"id":13,"username":"Maya","credits":446787},{"id":14,"username":"Maria","credits":818538},{"id":15,"username":"Ella","credits":789682},{"id":16,"username":"Olivia","credits":906604},{"id":17,"username":"Arianna","credits":177500},{"id":18,"username":"Maya","credits":592490},{"id":19,"username":"Aubrey","credits":58834},{"id":20,"username":"Sophie","credits":324357},{"id":21,"username":"Julia","credits":288688},{"id":22,"username":"Rachel","credits":932145},{"id":23,"username":"Arianna","credits":848696},{"id":24,"username":"Valeria","credits":272258},{"id":25,"username":"Autumn","credits":301136},{"id":26,"username":"Audrey","credits":317305},{"id":27,"username":"Chloe","credits":975642},{"id":28,"username":"Payton","credits":510533},{"id":29,"username":"Morgan","credits":927493},{"id":30,"username":"Mya","credits":166566},{"id":31,"username":"Lauren","credits":840207},{"id":32,"username":"Trinity","credits":255691},{"id":33,"username":"Jocelyn","credits":272653},{"id":34,"username":"Madeline","credits":58344},{"id":35,"username":"Valeria","credits":972228},{"id":36,"username":"Chloe","credits":919646},{"id":37,"username":"Jessica","credits":390647},{"id":38,"username":"Claire","credits":670709},{"id":39,"username":"Savannah","credits":47721},{"id":40,"username":"Zoe","credits":214133},{"id":41,"username":"Taylor","credits":991001},{"id":42,"username":"Gabrielle","credits":295506},{"id":43,"username":"Katherine","credits":295472},{"id":44,"username":"Vanessa","credits":600895},{"id":45,"username":"Olivia","credits":337541},{"id":46,"username":"Mackenzie","credits":32221},{"id":47,"username":"Bella","credits":461298},{"id":48,"username":"Maria","credits":318094},{"id":49,"username":"Lillian","credits":632622},{"id":50,"username":"Kayla","credits":17062}]}';
$decoded = json_decode($json);
$users = $decoded->result;

function my_sort($a, $b)
{
    if ($a-credits > $b->credits) {
        return -1;
    } else if ($a->credits < $b->credits) {
        return 1;
    } else {
        return 0; 
    }
}
rsort($users, 'my_sort');
   $position = 0;
foreach($users as $user){
   $position = $position + 1;
   $username = $user->username;
   $credits = $user->credits;
   //do something with it:
   echo "Postion: $position<br/>\n Username: $username<br/>\n  Credits:$credits <br/>\n <br/>\n";
   if ($position == 3) {
        break;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T04:56:51.240

```
function my_sort($a, $b)
{
    if ($a->credits > $b->credits) {
        return -1;
    } else if ($a->credits < $b->credits) {
        return 1;
    } else {
        return 0; 
    }
}

usort($users, 'my_sort'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-17T21:49:35.267

您需要使用`usort`而不是`rsort`.
请注意，使用 php7，您可以执行 spaceship 运算符：

```
function mySort($a, $b) {
    return $b->credits <=> $a->credits;
}

usort($users, 'mySort'); 
```

# backbone.js - Backbone.js 触摸事件

> ID：14015483
> 
> 赞同：0
> 
> 时间：2012-12-23T23:23:07.610
> 
> 标签：backbone.js, backbone-events

在主干中，将点击事件换成触摸事件的最佳方法是什么。

我采用了适用于 iOS 的 MBP.fastbutton 的路线，但是我正在尝试将我的代码移至 Android 并需要使用 iScroll，它似乎与 MBP.fastbutton 不兼容。

```
initialize: function () {
    addFastButtons(this);
},

events: {
    'fastclick': 'showDetails'
},

showDetails: function (e) {
     // Do stuff
} 
```

我试过用 touchend 换掉点击，即

```
events: {
    'touchend': 'showDetails'
} 
```

但这会导致滚动时出现问题，因为当用户抬起手指时应用程序会做出响应，因此他们可能会意外跳转到其他页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:35:59.390

您应该检查 Junior 代码，他们在他们的框架中为您执行此操作，但您可以窃取代码片段来执行类似的操作。[https://github.com/justspamjustin/junior/blob/master/src/javascripts/junior.js#L3](https://github.com/justspamjustin/junior/blob/master/src/javascripts/junior.js#L3)

# java - 使用 ExpandableList 的 PullToRefresh 布局

> ID：14015487
> 
> 赞同：0
> 
> 时间：2012-12-23T23:23:58.113
> 
> 标签：java, android, android-layout, android-fragments

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.handmark.pulltorefresh.library.PullToRefreshScrollView
        xmlns:ptr="http://schemas.android.com/apk/res-auto"
        android:id="@+id/pull_refresh_scrollview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ExpandableListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/black" />

    <TextView
        android:id="@+id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="No items"
        android:textColor="@color/White" />

    </com.handmark.pulltorefresh.library.PullToRefreshScrollView>

</LinearLayout> 
```

这是我使用 chrisbanes pull 来刷新库的 XML 布局[文件](https://github.com/chrisbanes/Android-PullToRefresh)

出于某种原因，它只会显示可点击项目的可扩展列表中的第一个，当我点击它时它不会展开行，我一直在玩这个并且对为什么会发生这种情况感到困惑，这里是片段类的代码

```
public class TestExpandFragment extends ExpandableListFragment {

    private String[] divideOptions = { "Test1", "Test2", "Test3", "Test4",
            "Test5", "Test6", "Test7", "Test8" };

    PullToRefreshScrollView mPullRefreshScrollView;
    ScrollView mScrollView;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment

        try {

            SimpleExpandableListAdapter expListAdapter = new SimpleExpandableListAdapter(
                    getActivity(), createGroupList(), // Creating group List.
                    R.layout.group_row, // Group item layout XML.
                    new String[] { "1" }, // the
                                            // key
                                            // of
                                            // group
                                            // item.
                    new int[] { R.id.row_name }, // ID of each group item.-Data
                                                    // under the key goes into
                                                    // this TextView.
                    createChildList(), // childData describes second-level
                                        // entries.
                    R.layout.group_child_row, // Layout for sub-level
                                                // entries(second
                    // level).
                    new String[] { "Sub Item" }, // Keys in childData maps to
                                                    // display.
                    new int[] { R.id.grp_child } // Data under the keys above go
                                                    // into these TextViews.
            );
            setListAdapter(expListAdapter); // setting the adapter in the list.

        } catch (Exception e) {
            System.out.println("Errrr +++ " + e.getMessage());
        }

        View view = inflater.inflate(R.layout.test_expandable_fragment, container,
                false);

        /** Implement Pull To Refresh **/
        mPullRefreshScrollView = (PullToRefreshScrollView) view
                .findViewById(R.id.pull_refresh_scrollview);
        mPullRefreshScrollView
                .setOnRefreshListener(new OnRefreshListener<ScrollView>() {

                    @Override
                    public void onRefresh(
                            PullToRefreshBase<ScrollView> refreshView) {

                        new GetDataTask().execute();

                    }

                });

        mScrollView = mPullRefreshScrollView.getRefreshableView();

        return view;
    }

    /* Creating the Hashmap for the row */
    @SuppressWarnings("unchecked")
    private List createGroupList() {
        ArrayList result = new ArrayList();
        for (int i = 0; i < 8; ++i) { // 8 groups........
            HashMap m = new HashMap();
            m.put("1", divideOptions[i]); // the key and it's value.
            result.add(m);
        }
        return (List) result;
    }

    /* creatin the HashMap for the children */
    @SuppressWarnings("unchecked")
    private List createChildList() {

        ArrayList result = new ArrayList();
        for (int i = 0; i < 15; ++i) { // this -15 is the number of groups(Here
                                        // it's fifteen)
            /*
             * each group need each HashMap-Here for each group we have 3
             * subgroups
             */
            ArrayList secList = new ArrayList();
            for (int n = 0; n < 3; n++) {
                HashMap child = new HashMap();
                child.put("Sub Item", "Sub Item " + n);
                secList.add(child);
            }
            result.add(secList);
        }
        return result;
    }

    public void onContentChanged() {
        System.out.println("onContentChanged");
        super.onContentChanged();
    }

    /* This function is called on each child click */
    public boolean onChildClick(ExpandableListView parent, View v,
            int groupPosition, int childPosition, long id) {
        System.out
                .println("Inside onChildClick at groupPosition = "
                        + groupPosition + " Child clicked at position "
                        + childPosition);
        return true;
    }

    /* This function is called on expansion of the group */
    public void onGroupExpand(int groupPosition) {
        try {
            System.out.println("Group exapanding Listener => groupPosition = "
                    + groupPosition);
        } catch (Exception e) {
            System.out.println(" groupPosition Errrr +++ " + e.getMessage());
        }
    }

    /** Sleeper for the PullToRefresh **/
    private class GetDataTask extends AsyncTask<Void, Void, String[]> {

        @Override
        protected String[] doInBackground(Void... params) {
            // Simulates a background job.
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }
            return null;
        }

        @Override
        protected void onPostExecute(String[] result) {
            // Do some stuff here

            // Call onRefreshComplete when the list has been refreshed.
            mPullRefreshScrollView.onRefreshComplete();

            super.onPostExecute(result);
        }
    }

} 
```

如果有人可以告诉我为什么会发生这种情况，因为它只会输出 Test1 但没有任何操作，刷新的拉动将在加载时出现，如果我取消拉动刷新，它确实有效，我已经使用过它以前用其他代码围绕其他类型的布局，并且从未遇到过这个，也许这很愚蠢，我不确定，但我想也许有人可以更快地看到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:31:12.263

我从来没有使用过那个库，但一般来说你不能把 a`ListView`放在里面`ScrollView`（想想看）。但是，查看[库类](https://github.com/chrisbanes/Android-PullToRefresh/tree/master/library/src/com/handmark/pulltorefresh/library)，您应该尝试`PullToRefreshExpandableListView`改用。

# c# - 套接字 - 你能把它换成另一个线程吗？

> ID：14015491
> 
> 赞同：0
> 
> 时间：2012-12-23T23:25:02.940
> 
> 标签：c#, sockets

有点卡在这个我...

设想：

一个套接字处理游戏模拟器，用于发送和接收以 VL64 和其他字符串编码的编码数据。需要支持大约 4000 个套接字请求等。

目前它使用 AsyncCallback 来执行异步服务器角色等。

代码：

```
private static SnowTcpListener mServer;

mServer = new SnowTcpListener(new IPEndPoint(IPAddress.Any, "IP"), backlog, new OnNewConnectionCallback(SessionManager.HandleIncomingConnection)); 
```

Backlog 是 Socket backlog 的 int。

SnowTcp 监听器

```
/// <summary>
    /// Callback to be invoked upon accepting a new connection.
    /// </summary>
    /// <param name="Socket">Incoming socket connection</param>
    public delegate void OnNewConnectionCallback(Socket Socket);

    /// <summary>
    /// Reality simple asynchronous TCP listener.
    /// </summary>
    public class SnowTcpListener : IDisposable // Snow prefix to avoid conflicts with System.Net.TcpListener
    {
        private Socket mSocket;
        private OnNewConnectionCallback mCallback;

        public SnowTcpListener(IPEndPoint LocalEndpoint, int Backlog, OnNewConnectionCallback Callback)
        {
            mCallback = Callback;

            mSocket = new Socket(LocalEndpoint.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
            mSocket.Bind(LocalEndpoint);
            mSocket.Listen(Backlog);

            BeginAccept();
        }

        public void Dispose()
        {
            if (mSocket != null)
            {
                mSocket.Dispose();
                mSocket = null;
            }
        }

        private void BeginAccept()
        {
            try
            {
                mSocket.BeginAccept(OnAccept, mSocket);
            }
            catch (Exception) { }
        }

        private void OnAccept(IAsyncResult Result)
        {
            try
            {
                Socket ResultSocket = (Socket)mSocket.EndAccept(Result);
                mCallback.Invoke(ResultSocket);
            }
            catch (Exception) { }

            BeginAccept();
        } 
```

SessionManager.HandleIncomingConnection：

```
public static void HandleIncomingConnection(Socket IncomingSocket)
        {
            bool Reject = ModerationBanManager.IsRemoteAddressBlacklisted(IncomingSocket.RemoteEndPoint.ToString().Split(':')[0]);

            Output.WriteLine((Reject ? "Rejected" : "Accepted") + " incoming connection from " + IncomingSocket.RemoteEndPoint.ToString() + ".",
                OutputLevel.Informational);

            if (Reject)
            {
                try
                {
                    IncomingSocket.Close();
                }
                catch (Exception) { }

                return;
            }

            lock (mSyncRoot)
            {
                uint Id = mCounter++;
                mSessions.Add(Id, new Session(Id, IncomingSocket));
            }
        } 
```

然后它创建一个新的“会话”

```
public Session(uint Id, Socket Socket)
{
    mId = Id;
    mSocket = Socket;
    mBuffer = new byte[512];
    mPongOk = true;

    mSocket.SendBufferSize = 512;

    BeginReceive();
} 
```

哪个反过来调用 BeginRecieve()

```
private void BeginReceive()
        {
            try
            {
                if (mSocket != null)
                {
                    //TODO: BeginRecieve();
                    mSocket.BeginReceive(mBuffer, 0, mBuffer.Length, SocketFlags.None, new AsyncCallback(OnReceiveData), mSocket);
                }
            }
            catch (Exception)
            {
                SessionManager.StopSession(mId);
            }
        } 
```

OnRecieveData()

```
private void OnReceiveData(IAsyncResult Result)
        {
            int ByteCount = 0;

            try
            {
                if (mSocket != null)
                {
                    ByteCount = mSocket.EndReceive(Result);
                }
            }
            catch (Exception) { }

            if (ByteCount < 1 || ByteCount >= mBuffer.Length)
            {
                SessionManager.StopSession(mId);
                return;
            }

            ProcessData(ByteUtil.ChompBytes(mBuffer, 0, ByteCount));
            BeginReceive();
        } 
```

如果您需要更多代码，请询问。

我将如何创建它以使连接位于单独的线程中，或者我将如何改善我的套接字体验，就像获得一定数量的会话一样，它只是滞后了。我试图增加缓冲区，但它使情况变得更糟。

我现在已经走到了尽头，我已经尝试了几乎所有我能想到的东西，我真的可以在一些帮助下做！

感谢您阅读这篇很长的帖子，如果问题不清楚，请尝试让您更清楚！

干杯迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:34:25.597

您做了哪些工作来评估现有代码中的瓶颈和性能问题？您是否使用任何工具对其进行了分析？

从到目前为止发布的代码中，您只需保持异步接收新连接 (BeginAccept) 和传入数据 (BeginReceive)。这些都不应该导致任何性能下降。但是 BeginReceive 函数调用“ProcessData”，这可能是您所有业务逻辑用于处理消息的地方。我怀疑这就是你的瓶颈所在。但这只是一个猜测。

你说 4000 个套接字，所以“每个连接的线程”听起来不像是正确的设计。

但是由于您已经在做异步套接字，那么正确的方法似乎是在工作池线程中调用 ProcessData。当 ProcessData 完成时，只需对该会话对象再次调用 BeginReceive。类似于以下内容：

```
private void OnReceiveData(IAsyncResult Result)
{
    int ByteCount = 0;
    try
    {
        if (mSocket != null)
        {
            ByteCount = mSocket.EndReceive(Result);
        }
    }
    catch (Exception) { }

    if (ByteCount < 1 || ByteCount >= mBuffer.Length)
    {
        SessionManager.StopSession(mId);
        return;
    }

    ThreadPool.QueueUserWorkItem(ProcessDataInThread, ByteCount);

}

void ProcessDataInThread(object context)
{
    int ByteCount = (int)context;

    ProcessData(ByteUtil.ChompBytes(mBuffer, 0, ByteCount));
    BeginReceive();
} 
```

# c++ - 如何将此变量添加到 ifstream 的路径中？

> ID：14015494
> 
> 赞同：0
> 
> 时间：2012-12-23T23:25:41.187
> 
> 标签：c++

我正在尝试附加我的路径并包含一个变量作为路径的一部分，但出现错误。

它出什么问题了？

```
fstream fin("E:\\Games\\maps\\" + this->MapNumber + ".map", ios::in|ios::binary|ios::ate); 
```

> this->MapNumber 是一个 USHORT
> 
> 错误：13 IntelliSense：表达式必须具有整数或无范围枚举类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:29:57.537

在**C++**中，您不能使用`+`连接文字字符串。您可以使用`+`with `std::string`s 来连接它们，但这不适用于*整数*或其他类型。您需要改用*流*。插入和提取到*流中*会导致支持它的类型将自己表示为文本，但您可能已经从一般*I/O*中知道这一点。

尝试这样的事情：

```
std::stringstream filename;
filename << "E:\\Games\\maps\\" << this->MapNumber << ".map";

std::fstream fin(filename.str().c_str(), ios::in|ios::binary|ios::ate); 
```

就像其他所有东西一样，要使用某些东西，您需要首先*包含*声明它的标头。为了使用`std::stringstream`，您需要包含`<sstream>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:16:57.617

您不能在字符串和其他类型（如字符串）上使用 operator+ 或者您可以：

选项1：将所有变量转换为字符串以附加它们

```
string s = string("E:\\Games\\maps\\") + string(itoa(this->MapNumber)) + string(".map"); 
```

选项2：使用字符串流作为@k-ballo 解释

选项3：使用旧的 C fprintf（我个人最喜欢的）

```
char str[100];
fprintf(str, "E:\\Games\\maps\\ %d .map", this->MapNumber); 
```

# php - 从 URL 获取 GET 值并将其保存在文件中

> ID：14015495
> 
> 赞同：0
> 
> 时间：2012-12-23T23:26:07.323
> 
> 标签：php, formatting, lines

我想从 url 中获取一个 GET 值并将其存储在一个文件中。我只是无法以我想要的格式获得它。

代码：

```
<?php

    $emailaccount = $_GET['email'];
    $emailaccount .= '\n';

    file_put_contents($file, $emailaccount, FILE_APPEND | LOCK_EX);
    echo 'done' . PHP_EOL;

?> 
```

网址如下所示：

```
www.website.com/index.php?email=account@gmail.com 
```

我的 *.txt 文件*应*如下所示：

```
1account@gmail.com
2account@gmail.com
3account@gmail.com 
```

但是我的文件看起来不像这样，每个值都在同一行，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T23:36:59.847

更改`$emailaccount .= '\n';`为`$emailaccount .= "\r\n";`应该这样做。

编辑

原因如下： \r\n 用于系统兼容性，需要双引号以便 PHP 将其解析为换行符而不是文字字符串。

# php - PHP：从函数访问二维数组

> ID：14015496
> 
> 赞同：-3
> 
> 时间：2012-12-23T23:26:15.117
> 
> 标签：php, arrays, function, 2d, multidimensional-array

您好，我不知道如何访问函数返回的二维数组。

我`query($query)`在*Connection*类（内部`Connection.php`）中的函数：

```
public function query($query)
  {
      $result = mysql_query($query);

       $array= array();
      for($i=0; $i<mysql_num_rows($result); $i++)
      {
       $row = mysql_fetch_array($result);
       for($j=0;$j<(sizeof($row)/2);$j++)
       {
         $array[i][j]=$row[$j];
       }
      }
      return $array;
    } 
```

和我的 test.php 文件：

```
<?php
include 'Connection.php';

$obj1 = new Connection();
echo $obj1->toString();

$array=$obj1->query("SELECT * FROM LeCars ORDER BY ID;");
echo $array[0][0];
echo 'asd:',$array[0][0],'<br>';
echo 'asd:',$array[0][1],'<br>';
echo 'asd:',$array[0][2],'<br>';
echo 'asd:',$array[1][0],'<br>';
echo 'asd:',$array[2][4],'<br>';
var_export($array); 
```

?>

test.php 的输出：

ip : 194.00.00.27 登录名: asd123 密码: asd123 表: asdasd1123 查询: asd: asd: asd: asd: asd: array ( 'i' => array ( 'j' => NULL, ), )

Any1 知道如何将该数组正确发送到 test.php 中？

我尝试了什么：循环它，通过引用发送，仔细检查数组 rly 是否有效（它确实有效），但我无法将它发送到那里进行测试和访问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:34:21.660

首先， toString() 应该只返回那个字符串值，而不是打印它。

然后，从函数返回的二维数组就像普通的二维数组一样 - 你没有尝试过：

```
$array=$obj1->query("SELECT * FROM LeCars ORDER BY ID;");
echo $array[0][0]; 
```

?

还请考虑阅读“foreach”和“count”的 PHP 手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:30:12.013

mysql_query() 不返回二维数组。它返回“资源”，这意味着它是 noa ta php 类型的对象。您可以使用特殊功能对其进行操作。

在此处查看文档和示例：http: [//php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

# javascript - knockout.js - 从 DOM 元素获取 ViewModel

> ID：14015497
> 
> 赞同：83
> 
> 时间：2012-12-23T23:26:33.580
> 
> 标签：javascript, knockout.js

是否可以从给定的 DOM 元素中获取绑定的 ViewModel JavaScript 对象？

```
ko.applyBindings( gLoginViewModel, document.getElementById("login-form") );
ko.applyBindings( gLoginViewModel, document.getElementById("register-form") ); 
```

在其他地方 - 在相当不相关的代码中 - 像这样：

```
var viewModel = ko.getViewModel( formElement );
viewModel.someObservable( someData ); // observable available in all ViewModels 
```

如果我能做类似的事情会更好：

```
var viewModel = ko.getViewModel( someChildElement ); 
```

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-12-23T23:47:52.580

Knockout 有两种[实用方法](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)可能会有所帮助。

*   `ko.dataFor`将返回元素绑定到的 ViewModel。
*   `ko.contextFor`返回当前元素的“绑定上下文”。您从此方法返回的对象将返回如下内容：

    ```
    { 
        $data: ...,
        $parents,
        $root
    } 
    ```

所以如果我理解你的问题，你可以`ko.dataFor`在这里使用。[这是一个](http://jsfiddle.net/CCNtR/10/)使用`dataFor`.

# jquery - 来自站点点书的 Jquery 幻灯片代码，rotatePics 函数出错

> ID：14015500
> 
> 赞同：0
> 
> 时间：2012-12-23T23:27:08.900
> 
> 标签：jquery

我不知道出了什么问题（有问题的行有多个星号）这是幻灯片。在 JS 部分，DW 一直告诉我在包含 rotatePics 函数的行上有错误。

这是 HTML 部分：

```
<div id=photos>

<img src="../imgs/dr_gonzalez.jpg" class=show alt="Dr. G">

<img src="../imgs/immunization.jpg" alt="SHOTZ!">

<img src="../imgs/senior_pet.jpg" alt="Former Puppies">

<img src="../imgs/vet_barnes.jpg" alt="Best doctor ever">

</div> 
```

CSS部分：

```
#photos img {position:absolute;

}

 #photos{

 width: 241px;

 height: 329px;

 overflow:hidden;

} 
```

aaaaannnnnnddd JS，这是我需要调试的：

```
$(document).ready(function() {

slideShow();

});

function slideShow() {

  var current = $('#photos .show');

  var next = current.next().length ? current.next() :

  current.siblings().first;

  current.hide().removeClass('show');

  next.fadeIn().addClass('show');

  setTimeout(slideShow, 3000);

 }

$(document).ready(function() {

rotatePics(1);

}

***function rotatePics(currentPhoto){***         

 var numberOfPhotos = $('#photos img').length;
 currentPhoto = currentPhoto % numberOfPhotos;
 $('#photos img').eq(currentPhoto).fadeOut(function (){

    $('#photos img').each(function (i)

    {

        $(this).css('zIndex', ((numberOfPhotos - i) +currentPhoto)            numberOfPhotos);

    });

    $(this).show();

    setTimeout(function ()

    {

        rotatePics(++currentPhoto);

    }, 4000);

    });

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:55:02.220

您似乎没有使用调试器工具来帮助捕获您的简单错误。最好查看浏览器控制台并注意它所说的内容，这可以在错误发生时将您引导至错误。

甚至 jsFiddle 也有 jsLint 工具来提醒您错误！

这是验证的 jQuery 标记，但请记住，这并不能保证您已按预期编写脚本。

```
function slideShow() {

    var current = $('#photos .show');

    var next = current.next().length ? current.next() :

    current.siblings().first;

    current.hide().removeClass('show');

    next.fadeIn().addClass('show');

    setTimeout(slideShow, 3000);

}

function rotatePics(currentPhoto) {

    var numberOfPhotos = $('#photos img').length;
    currentPhoto = currentPhoto % numberOfPhotos;
    $('#photos img').eq(currentPhoto).fadeOut(function() {

        $('#photos img').each(function(i) {
            $(this).css('zIndex', ((numberOfPhotos - i) + currentPhoto));
        });

        $(this).show();

        setTimeout(function() {
            rotatePics(++currentPhoto);
        }, 4000);
    });

}

$(document).ready(function() {
    slideShow();
    rotatePics(1);
}); 
```

请注意，您应该在 jQuery 文档就绪中调用它们之前指定您的函数，尽管您可以使用其中两个就绪函数，但您不需要它。

现在您的 jQuery 代码没有错误，您需要解决导致幻灯片无法按预期运行的错误。

***参考：*** [**jsFiddle Beta 幻灯片**](http://jsfiddle.net/WfqR9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:14:23.643

为什么要把事情搞得这么复杂？您有两个计时器功能，并且您正在操作 zindexs 和隐藏图像等。请参阅此 stackoverflow 问题以获取答案：

[jQuery 不旋转图像](https://stackoverflow.com/questions/15897255/jquery-doesnt-rotate-images/15918163#15918163)

# java - 在 Google app Engine 应用程序中注册 jdbc 驱动程序的正确方法

> ID：14015503
> 
> 赞同：3
> 
> 时间：2012-12-23T23:27:30.800
> 
> 标签：java, google-app-engine, google-cloud-sql

我正在开展一个项目，我们将 GAE 与 Google Cloud SQL 结合使用。我已经按照本教程[https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide#use_with_lang](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide#use_with_lang)学习如何连接到数据库，到目前为止一切都很好，除了驱动程序注册部分。我的直觉告诉我，司机应该只注册一次，但我不知道何时何地是最好的地方。gae中是否有一种初始化功能可以在实例启动时执行一些代码？或者可能是一个可以加载资源的 xml 文件？

到目前为止，我的代码如下所示：

```
 try {
        // Connect to the db.
        DriverManager.registerDriver(new AppEngineDriver());
        Connection c = DriverManager.getConnection(JDBC_CON_STRING);

        // Fetch rows
        String sql = "SELECT * FROM test";
        ResultSet rs = c.createStatement().executeQuery(sql);
        ArrayList<BaseUser> users = new ArrayList<BaseUser>();
        while(rs.next()){
            BaseUser u = new BaseUser();
            u.setFirstname(rs.getString("firstname"));
            u.setLastname(rs.getString("lastname"));
            users.add(u);
        }
        rs.close();
        c.close();
        // Print the users in the console.
        for (BaseUser user : users) {
            logger.info("Firstname: " + user.getFirstname() + ", Lastname: " + user.getLastname());
        }

    } catch (SQLException e) {
        e.printStackTrace();
    } 
```

我想去掉第一行，把它放在一个只会执行一次的地方，然后，每次我收到需要 sql 事务的请求时，我只需要调用 DriverManager.getConnection(...)

谢谢你，罗德里戈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:07:18.937

所以我终于在谷歌的文档中找到了一种更好的方法来“在调用任何 servlet 之前运行自定义逻辑”。这里是：只需在 web.xml 中注册一个 ServletContextListener 并覆盖 contextInitialized 方法，在我的例子中是自定义驱动程序注册。

这是 web.xml 代码：

```
<web-app>
    ...
   <welcome-file-list>
       <welcome-file>index.jsp</welcome-file>
   </welcome-file-list>

   <listener>
       <listener-class>com.my.project.ClassName</listener-class>
   </listener>
</web-app> 
```

和 contextInitializeMethod：

```
@Override
public void contextInitialized(ServletContextEvent arg) {
    try {
        DriverManager.registerDriver(new AppEngineDriver());
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

这是实际谷歌指南的链接：[https ://developers.google.com/appengine/docs/java/config/appconfig#Using_a_ServletContextListener](https://developers.google.com/appengine/docs/java/config/appconfig#Using_a_ServletContextListener)

希望对有类似问题的人有所帮助。

# php - 如果我使用哈希函数，我如何匹配新旧密码？

> ID：14015508
> 
> 赞同：1
> 
> 时间：2012-12-23T23:28:15.383
> 
> 标签：php, security, password-encryption

我将用户密码作为纯文本存储在数据库中。所以很容易更改密码。我用这个代码，

```
while($row = mysql_fetch_array($result)) {
  if($row['Password']==$opass)
    mysql_query(
      "UPDATE information SET Password='$pass' WHERE Username='$name'"
    );
} 
```

首先，我检查用户是否正确输入了旧密码（`$opass`），然后我允许他将其更改为新密码（`$pass`）。我想我可以检查旧密码，因为我将它存储为纯文本。但是如果我使用任何哈希算法，这段`if($row['Password']==$opass)`代码怎么能工作？我认为`$opass`和`$row['Password']`不会一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:29:16.943

只需使用等效的哈希函数对用户输入的密码进行哈希处理，并将其与您存储在数据库中的密码进行比较。

```
while($row = mysql_fetch_array($result)){
 if($row['Password']==yourOneWayPasswordHashingFunction($opass))
  mysql_query("UPDATE information SET Password='$pass' WHERE Username='$name'");} 
```

正如我在评论中提到的，使用[`bcrypt`](http://en.wikipedia.org/wiki/Bcrypt). 密码可能很难，所以用这个，然后去购物，圣诞节也可以:)

还...

> 我将用户密码作为纯文本存储在数据库中。**所以很容易更改密码**。

[强调我的。]

您永远不应该存储纯文本密码，而且*很容易更改*不是正当理由。然而，感谢他们认识到需要为此做点什么。

# php - 1 个客户端对 PHP 的多个 AJAX 请求

> ID：14015510
> 
> 赞同：0
> 
> 时间：2012-12-23T23:28:32.840
> 
> 标签：php, javascript, jquery, ajax

我有一个应用程序通过 jQuery.post 向 PHP 发送多个请求，每个请求都有不同的参数。PHP 脚本是来自 eBay API 的数据请求，需要 1-3 秒才能完成。来自客户端的 AJAX 请求被快速连续发送出去，然后在完成或出错后立即再次请求。

开始发生的是 PHP 首先执行最旧的请求，然后继续执行较新的请求。所以请求 1 在 1-3 秒内完成，但请求 25 超过 12-20 秒。

可以做些什么来缓解这些问题？

**编辑：**一次不发送这么多请求不是一种选择。每个请求都要求 eBay 提供特定信息，并且需要尽可能接近实时。

**EDIT_2：**我知道 PHP 会按照收到请求的顺序处理请求，并且不要认为这是不正确的行为。我的问题是是否有可能绕过这种行为并使 PHP 并行而不是串行执行脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:07:54.580

（恕我直言）你唯一能做的就是尝试消除额外的请求。例如，如果 ajax 请求只是获取拍卖还剩多少时间，则请求一次并根据返回的数据构建一个计时器，这样您就不必继续发送请求。尽可能跳出框框思考。如果您可以一次获取数据并最终模拟 ebay 的行为，则可以保存请求。另外，请查看 ajax 推送引擎。您也许可以将其中一些数据推送到您的应用程序，而不是拉取它。因此，如果一个项目已经结束，您可以在不循环 ajax 请求的情况下获取该信息。

# python - sqlalchemy.exc.ProgrammingError

> ID：14015518
> 
> 赞同：4
> 
> 时间：2012-12-23T23:30:00.503
> 
> 标签：python, sqlalchemy, flask

一直试图解决这个问题一个小时 - 仍然不知道问题是什么。

以下代码导致错误：

```
team = Team.query.filter_by(name=request.form['newTeamName']).first() 
```

有关错误的更多详细信息：

> ProgrammingError: (ProgrammingError) 列 team.user_id 不存在

我应该怎么做才能修复这个错误？

非常感谢你。#freecookiesforanswers

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T23:51:10.740

听起来您在没有更新数据库的情况下修改了模型。您需要通过某种迁移来做到这一点。对于添加新表之类的事情，您可以简单地运行`metadata.create_all(bind=engine)`. 但是，对于添加列等细粒度的更改，您需要自己更改表或使用像 alembic 这样的系统。当然，如果这只是在开发过程中，您可能应该只删除数据库并使用新定义重新创建它。

# php - 多个 PJAX 请求

> ID：14015519
> 
> 赞同：4
> 
> 时间：2012-12-23T23:30:03.683
> 
> 标签：php, javascript, jquery, html, pjax

我正在尝试使用 PJAX 更新 2 个单独的 div。我的 PJAX 失败，只加载了第二个。这是一个例子：

```
<div id="content-1"></div>
<div id="content-2"></div>

<button onclick="
$.pjax({
url: 'content-1.php',
container: '#content-1',
push: false
});

$.pjax({
url: 'content-2.php',
container: '#content-2',
push: false
});
"></button> 
```

问题是 2 个 pjax 请求不能同时运行，并且第二个与第一个重叠，所以只有第二个（id="content-2"）被更新。Push 设置为 false 是有原因的，在这种特殊情况下我不需要推送 url，但我需要它用于站点的其他部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T08:51:08.837

如果不需要更改 URL 地址，则应使用 AJAX 而不是 PJAX。PJAX 和 AJAX 做同样的事情——只更新 HTML 内容的特定部分，而不重新加载整个页面。但是，PJAX 会更改地址栏中的 URL 地址，因此只能以特定方式使用它。

使用 PJAX 和 AJAX 的一个很好的例子是一个简单的画廊。如果页面要改，最好用PJAX，这样可以改地址栏的URL，给页面加一个GET参数。但更适合使用 AJAX 在弹出窗口中获取单击图像的附加信息。

# javascript - jQuery：{ 和 } 是做什么用的？

> ID：14015522
> 
> 赞同：-4
> 
> 时间：2012-12-23T23:30:12.777
> 
> 标签：javascript

我正在试验 jQuery 插件，我注意到一段代码类似于下面的代码：http: [//docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

```
var defaults = {
    value : 'hello, world'
}

var options = $.extend(defaults,options) 
```

我的问题是：什么是 { 和 }？它们像数组吗？如何获得“价值”的价值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:32:48.070

在您的代码中，`{}`是一个对象文字。这是一种包含数据的面向对象的方式。[在这里了解更多](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Using_object_initializers)。

简而言之，对象文字存储键值对的异构列表。例如：

```
var x = { key : value } 
```

不要与您在此处看到的内容和以下内容混淆：

```
var x = function() { .. } 
```

这里的括号表示一个包含函数执行环境的块。这**与**对象文字不同，因为函数旨在在受控环境中运行代码，而对象文字是数据的容器。[在此处了解有关函数的更多信息](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)。

要回答您的问题：要获取 的值，`value`我们必须首先列出创建它的对象，然后是点`.`，最后是属性`value`。像这样：

```
defaults.value; // 'hello, world' 
```

如果您在控制台 ( `console.log`) 中运行它，您将看到该字符串。

请注意，此构造并非特定于 jQuery，而是特定于 JavaScript 本身。jQuery 是由 JS 组成的库，因此遵守 JS 拥有的相同语法规则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T23:34:37.037

`{}`用于定义对象，请参阅：[使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

```
var person = {
  name: 'john',
  age: 43
} 
```

意思是一样的

```
var person = new Object()
person.name = 'john';
person.age = 43; 
```

In your code a simple object is created and passed to the jquery `extend()` function

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T23:32:58.877

和`{`（`}`花括号）用于创建对象字面量。 `value`是的*属性*或*成员*。`defaults`

对象是将多条数据存储为一个单元的方法，并且通常包括可以由它执行的其他操作和动作。它们提供了一种通常直观的方式来使用代码对现实世界中的事物进行建模。

如果要访问存储在 中的字符串`value`，请调用`defaults.value`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T23:34:03.157

它们是哈希（或者严格来说是关联数组），要获取“Value”的值，您可以执行以下操作：

```
 defaults['value']; 
```

交替：

```
 defaults.value; 
```

要检查关联数组是否具有键“值”，您可以执行以下操作：

```
 defaults.hasOwnProperty('value'); 
```

并添加一个带有键“值”的字符串：

```
 defaults['value'] = 'some string'; 
```

# android - 来自 Google Analytics（Android）的令人困惑的高忠诚度统计数据

> ID：14015523
> 
> 赞同：2
> 
> 时间：2012-12-23T23:30:12.777
> 
> 标签：android, google-analytics

3,845 次第一次会议，3,543 次第二次会议。这意味着我们 92% 的用户会第二次回来。

我觉得这样的留存率对于 Android 应用来说是非常不寻常的。我担心我对这些数字的解释不正确

![92% 的用户第二次返回？！](../Images/d7508bb5612e43918b4116bd1ca4bb1c.png)

这是我用来记录会话的代码：

```
public class Tracker {

public static final String TAG = "Tracker";

private static final String flurryId = "********************";

public static void startTrackers(Activity a) {
    Log.v(TAG, "start trackers");

    EasyTracker.getInstance().activityStart(a);
    FlurryAgent.onStartSession(a, flurryId);

    // set flurry properties
    String versionName = Global.getVersionName(a);
    FlurryAgent.setVersionName(versionName);
    FlurryAgent.setUserId(Global.userID(a));
}

public static void endTrackers(Activity a) {
    Log.v(TAG, "end trackers");

    EasyTracker.getInstance().activityStop(a);
    FlurryAgent.onEndSession(a);
} 
```

这些函数`onStart()`在 main 中被调用`Activity`：

```
public void onStart() {
    super.onStart();

    Tracker.startTrackers(this);
    Tracker.trackPageView("/" + LaunchpadFragment.NAME);
}

public synchronized void onStop() {
    super.onStop();
    Tracker.endTrackers(this);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:40:55.593

> 3,845 次第一次会议，3,545 次第二次会议。这意味着我们 92% 的用户会第二次回来。

虽然这对于今天早些时候发布但现在已被删除的问题似乎*非常熟悉......您没有正确读取数据。*这些数字不是累积的。根据您的逻辑：在使用该应用程序 8 次的 659 位用户中，超过 2000 位用户再次使用该应用程序 9-14 次……这没有任何意义。

应读取数据：

*   19% 的用户*只*使用一次应用程序 (3800 / 20500)
*   17%*只*使用该应用两次 (3500 / 20500)
*   ETC

# data-structures - 一棵树的左孩子右兄弟表示是什么？你为什么要使用它？

> ID：14015525
> 
> 赞同：21
> 
> 时间：2012-12-23T23:30:46.947
> 
> 标签：data-structures, tree, binary-tree, multiway-tree

**[许多数据结构使用称为“左孩子，右兄弟”](http://en.wikipedia.org/wiki/Left-child_right-sibling_binary_tree)**表示的表示将多路树存储为二叉树。这是什么意思？你为什么要使用它？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-23T23:30:46.947

左子右兄弟表示 (LCRS) 是一种使用**[二叉树（](http://en.wikipedia.org/wiki/K-ary_tree)****[一种](http://en.wikipedia.org/wiki/Binary_tree)**每个节点都可以最多有两个孩子）。

# 动机

为了激发这种表示的工作原理，让我们首先考虑一个简单的多路树，如下所示：

```
 A
                 //|\ \
               / / | \  \
              B C  D  E  F
              |   /|\   / \
              G  H I J K   L 
```

（为低质量的 ASCII 艺术品道歉！）

在这个树结构中，我们可以从树中的任何节点向下导航到它的任何子节点。例如，我们可以从 A 迁移到 B，A 迁移到 C，A 迁移到 D，等等。

如果我们想在这样的树中表示一个节点，我们通常会在这里使用某种节点结构/节点类（用 C++ 编写）：

```
struct Node {
    DataType value;
    std::vector<Node*> children;
}; 
```

在 LCRS 表示中，我们以每个节点最多需要两个指针的方式表示多路树。为此，我们将稍微重塑树。与其让树中的每个节点都存储指向其所有子节点的指针，不如让每个节点仅存储指向其子节点之一的指针（在 LCRS 中，最左边的子节点），以稍微不同的方式构造树。然后，我们将让每个节点存储一个指向其右兄弟节点的指针，即树中的下一个节点，它是同一父节点的子节点。在上述树的情况下，我们可以用以下方式表示树：

```
 A
           /
          /
         /
        B -> C -> D -> E -> F
       /         /         /
      G         H->I->J   K->L 
```

请注意，在这个新结构中，仍然可以从父节点导航到其第 k 个子节点（零索引）。这样做的过程如下：

*   下降到当前节点的左子节点。（这是其子节点列表中的第一个节点）。
*   跟随那个孩子的右兄弟指针 k 次。（这会将您带到节点的第 k 个子节点）。
*   返回那个节点。

例如，要找到根节点 A 的第三个（零索引子节点），我们将下降到最左边的子节点 (B)，然后跟随三个右链接（访问 B、C、D，最后是 E）。然后我们到达 E 的节点，它包含节点 A 的第三个子节点。

以这种方式表示树的主要原因是，即使任何节点可能有任意数量的子节点，该表示法最多需要每个节点两个指针：一个节点存储最左边的子节点，一个指针存储右边的兄弟节点。因此，我们可以使用更简单的节点结构来存储多路树：

```
struct Node {
    DataType data;
    Node* leftChild;
    Node* rightSibling;
}; 
```

该节点结构与二叉树中的节点形状完全相同（数据加上两个指针）。因此，LCRS 表示可以使用每个节点仅使用两个指针来表示任意多路树。

# 分析

现在让我们看看多路树的两种不同表示的时间和空间复杂度以及一些基本操作。

让我们首先查看初始“动态子数组”表示所需的总空间使用量。n 节点树的总内存使用量是多少？好吧，我们知道以下内容：

1.  每个节点，无论其子节点的数量如何，都会为存储的原始数据 (sizeof(data)) 和动态数组的空间开销贡献空间。动态数组（通常）存储一个指针（指向分配的数组），一个机器字用于动态数组中的元素总数，以及（可选）一个机器字用于数组的分配容量。这意味着每个节点占用 sizeof(Data) + sizeof(Node *) + 2 * sizeof(machine word) 空间。

2.  在树中的所有动态数组中，将有 n - 1 个指向子节点的指针，因为在树中的 n 个节点中，n - 1 个节点有父节点。这增加了一个额外的 (n - 1) * sizeof(Node *) 因子。

因此，总空间使用量为

> n · (sizeof(Data) + sizeof(Node*) + 2 * sizeof(机器字)) + (n - 1) * sizeof(Node *)
> 
> = n * sizeof(Data) + (2n - 1) * sizeof(Node*) + 2n * sizeof(机器字)

现在，让我们将其与 LCRS 树进行对比。LCRS树中的每个节点存储两个指针（2 * sizeof(Node*)）和一个数据元素（sizeof(Data)），所以它的总空间是

> n * sizeof(Data) + 2n * sizeof(Node *)

在这里我们看到了胜利：请注意，我们*没有*存储 2n * sizeof(machine word) 额外内存来跟踪分配的数组大小。这意味着 LCRS 表示比常规多路树使用的内存要少得多。

然而，对 LCRS 树结构的基本操作往往比它们在普通多路树上的相应操作花费更长的时间。具体来说，在以标准形式表示的多路树中（每个节点存储一个子指针数组），从一个节点导航到其第 k 个子节点所需的时间由跟随单个指针所需的时间给出。另一方面，在 LCRS 表示中，执行此操作所需的时间由跟随 k + 1 个指针（一个左子指针，然后是 k 个右子指针）所需的时间给出。因此，如果树具有较大的分支因子，则在 LCRS 树结构中进行查找比在相应的多路树结构中进行查找要慢得多。

因此，我们可以将 LCRS 表示视为在数据结构存储空间和访问时间之间提供[时空权衡。](http://en.wikipedia.org/wiki/Space%E2%80%93time_tradeoff)LCRS 表示比原始多路树具有更少的内存开销，而多路树提供了每个子节点的恒定时间查找。

# 用例

由于 LCRS 表示中涉及时空权衡，除非两个标准之一成立，否则通常不使用 LCRS 表示：

1.  内存极其稀缺，或
2.  不需要随机访问节点的子节点。

如果您需要在主存储器中存储一个惊人的多路树，则可能会出现情况 (1)。例如，如果您需要存储一个[系统发育树](http://en.wikipedia.org/wiki/Phylogenetic_tree)，其中包含许多需要频繁更新的不同物种，那么 LCRS 表示可能是合适的。

情况（2）出现在专门的数据结构中，其中树结构以非常特定的方式使用。例如，许多使用多路树的[堆数据结构](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)可以通过使用 LCRS 表示进行空间优化。主要原因是在堆数据结构中，最常见的操作往往是

1.  移除树的根并处理它的每个子节点，或者
2.  通过使一棵树成为另一棵树的孩子，将两棵树连接在一起。

操作 (1) 可以在 LCRS 表示中非常有效地完成。在 LCRS 表示中，树的根永远不会有右孩子（因为它没有兄弟姐妹），因此移除根仅意味着剥离根节点并下降到其左子树。从那里，可以通过简单地沿着剩余树的右脊柱并依次处理每个节点来处理每个子节点。

操作（2）也可以非常有效地完成。回想一下，在 LCRS 表示中，树的根永远不会有右孩子。因此，在 LCRS 表示中很容易将两棵树连接在一起，如下所示。从这样的两棵树开始：

```
 R1             R2
   /               /
 (children 1)    (children 2) 
```

我们可以通过这种方式将树融合在一起：

```
 R1
            /
           R2
          /  \
(children 2) (children 1) 
```

这可以在 O(1) 时间内完成，而且非常简单。LCRS 表示具有此属性的事实意味着许多类型的堆优先级队列，例如[二项式堆](http://en.wikipedia.org/wiki/Binomial_heap)或[等级配对堆](http://www.cs.princeton.edu/~sssix/papers/rp-heaps-journal.pdf)通常表示为 LCRS 树。

希望这可以帮助！

# android - 动态添加元素到 ArrayAdapter

> ID：14015529
> 
> 赞同：0
> 
> 时间：2012-12-23T23:31:15.013
> 
> 标签：android

我将尝试解释向我添加元素`ArrayAdapter`并刷新的问题`ListView`：

我有两个标签 [TAB1][TAB2]，有两个`Fragments`并附有`TabListeners`.

1.  我请求 a`WebService`检索我的第一个元素（或多或少 15 项）`ListView`，`getLoaderManager().initLoader(0x01, null, this);`
2.  如果我在底部滚动`ListView`，我请求填充更多项目（或多或少 20 个项目），使用`AsyncTask`.
3.  `AsyncTask`向 中添加更多项目`ArrayAdapter`，然后我`mArrayAdapter.notifyDataSetChanged();`
4.  点击【TAB2】，然后返回【TAB1】
5.  `initLoader`再次调用，但`ArrayAdapter`仍然具有第一次调用的元素！

我错过了什么？我需要存储`ArrayAdapter`,`onSaveInstance`或类似的？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:52:33.620

当您创建 ArrayAdapter 时，您会向它发送一个 ListArray。当您想要更改内容时。您只需更改此 listArray，然后您不希望 Listview 显示您已经存在的项目，您应该清空此 listArray。

# php - 用php访问数组中的对象

> ID：14015530
> 
> 赞同：1
> 
> 时间：2012-12-23T23:31:16.800
> 
> 标签：php, arrays, object

希望您能够帮助我。

我尝试了很多不同的方法，但我无法解决这个问题。

我有一个里面有对象的数组：

```
 Array
(
[1] => CntProviderIncentiveResult Object
    (
        [_StartDate:protected] => 1356303600
        [_EndDate:protected] => 1356908400
        [_ProviderRoom:CntProviderIncentiveResult:private] => 1
        [_RoomName:CntProviderIncentiveResult:private] => Doble
        [_RoomCode:CntProviderIncentiveResult:private] => 2370
        [_PropertyCode:CntProviderIncentiveResult:private] => anglers
        [_Occupancy:CntProviderIncentiveResult:private] => 
        [_Currency:CntProviderIncentiveResult:private] => 
        [_AllocationGroup:CntProviderIncentiveResult:private] => 
        [_FreeSaleGroup:CntProviderIncentiveResult:private] => 
        [_StopSaleGroup:CntProviderIncentiveResult:private] => 
        [_ReleaseGroup:CntProviderIncentiveResult:private] => 
        [_MinStayGroup:CntProviderIncentiveResult:private] => 
        [_UpdateRequirement:CntProviderIncentiveResult:private] => 
```

) )

我尝试将其中一个对象分配给设置数组键的新数组：

```
$ConfirmRoom = $ConfirmRoomData[$roomKey]; 
```

`$roomKey`数组的键在哪里。(1, 20, 21)

在我验证是否做得很好之后：

```
if ($ConfirmRoom instanceof CntProviderIncentiveResult) {echo "OK";} 
```

但是新对象`$ConfirmRoom`总是空的。

你能让我看到光明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:57:02.110

尝试`var_dump($ConfirmRoom)`入门。

另外，确保`isset($ConfirmRoomData[$roomKey])`大数组确实在`$ConfirmRoomData`.

这些只是一些基本的调试步骤，可能有助于解决您的问题。我的猜测`$roomKey`是没有正确定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:16:57.983

最后我解决了：

```
foreach ($ConfirmRoomData as $key => $value) {
if (is_object ($value)) {
if ($key == $roomKey){
                                            $ConfirmRoom = $value;
} 
```

} }

# javascript - 如何创建随机数据但具有有意义的关系？

> ID：14015531
> 
> 赞同：0
> 
> 时间：2012-12-23T23:31:17.380
> 
> 标签：javascript, arrays, object, data-structures

```
 var lc_relationship={"sensor1":[
        {
            "ObjectID":"sens1_001",
            "Parent":null,
            "child": sens2_050
            "z cordinate": -5
        },
        {
            "ObjectID":"sens1_002",
            "Parent":null,
            "child": sens2_072
            "z cordinate": -5

        }
       .
       .
       .
   uptill ObjectID : sens1_100
],
"sensor2":[
        {
             "ObjectID":"sens2_001",
            "Parent":sens1_068,
            "child": sens3_010
            "z cordinate": 0 

        },
        {
            "ObjectID":"sens2_002",
            "Parent":sens1_040,
            "child": sens3_080
            "z cordinate": 0

        }
       .
       .
       .
   uptill ObjectID : sens2_100
],
"sensor3":[
        {
            "ObjectID":"sens3_001",
            "Parent":sens2_055,
            "child": null
            "z cordinate": 5

        },
        {
            "ObjectID":"sens3_002",
            "Parent":sens2_029,
            "child": null
            "z cordinate": 5

        }
       .
       .
       .
   uptill ObjectID : sens3_100
] 
```

}

![在此处输入图像描述](../Images/8e912b1d171333a3e643fc748b767b11.png)

我需要将几何关系存储在某些数据结构中，以便以后以明智的方式跟踪以访问派生的几何图形。我做了一张详细的图片，以便人们可以得到更好的主意。有人可以帮忙吗..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:44:49.083

如果我理解你的问题，你有*非常具体*的数据（100 个*锥体*放置在 3 层中），你想要随机化的是它们之间的关系。

如果是这样，那么下一个代码可能会为您提供所需的内容：它从第一层随机选择一个*锥体*，然后设置与第二层中随机选择的*锥体*的关系，为此还设置与第三层中随机选择的锥体*的*关系层（如您的描述中所述，在任何层中都没有选择两次*锥体）。*这是一个具有工作实现的 jsFiddle：http: [//jsfiddle.net/roimergarcia/j2uLE](http://jsfiddle.net/roimergarcia/j2uLE)。

笔记：

*   绘图上的 10x10 网格可以很容易地从*传感器*阵列的索引中生成。
*   如果您要在每层（100000？）或很多层中生成超过 100 个锥体，则可能需要优化此算法。

```
//A helping function
function rightPad(number) {
    var tmpStr = number.toString();
    return ("000" + tmpStr).substring(tmpStr.length, tmpStr.length+3);
}

//The generator function 
function generateData(){

    var nSize = 100,
        lc_relationship,
        aSensor1 = [],
        aSensor2 = [],
        aSensor3 = [],

    lc_relationship = {
        "sensor1":[],
        "sensor2":[],
        "sensor3":[]
    }

    for(i=1; i<=nSize; i++){
        aSensor1.push(i);
        aSensor2.push(i);
        aSensor3.push(i);
    }

    for(n=0; n<nSize; n++){
        var pos1 = Math.floor(Math.random() * (nSize-n));
        var pos2 = Math.floor(Math.random() * (nSize-n));
        var pos3 = Math.floor(Math.random() * (nSize-n));

        var int1 = aSensor1[pos1]; aSensor1.splice(pos1,1);
        var int2 = aSensor2[pos2]; aSensor2.splice(pos2,1);
        var int3 = aSensor3[pos3]; aSensor3.splice(pos3,1);

        lc_relationship.sensor1[int1-1]  = {
            "ObjectID" : "sens1_" + rightPad(int1),
            "Parent":null,
            "child": "sens2_" + rightPad(int2),
            "z cordinate": -5
        } 

        lc_relationship.sensor2[int2-1]  = {
            "ObjectID" : "sens2_" + rightPad(int2),
            "Parent":"sens1_" + rightPad(int1),
            "child": "sens3_" + rightPad(int3),
            "z cordinate": 0
        }

        lc_relationship.sensor3[int3-1]  = {
            "ObjectID" : "sens3_" + rightPad(int3),
            "Parent":"sens2_" + rightPad(int2),
            "child": null,
            "z cordinate": 5
        }

    }

    return lc_relationship;
}

console.log(generateData()); 
```

# ruby-on-rails - Capistrano 尝试创建 /public 目录

> ID：14015532
> 
> 赞同：2
> 
> 时间：2012-12-23T23:31:26.310
> 
> 标签：ruby-on-rails, capistrano, passenger, dreamhost

我目前正在尝试使用 Capistrano 进行我的第一次 Rails 部署，但我遇到了我无法克服的障碍。在`cap deploy`我收到错误“ `mkdir: cannot create directory`/public'`”期间。

## 相关细节：

*   导轨版本：3.2.6
*   Capistrano 版本：2.13.5
*   在 Dreamhost 上运行
*   我正在预编译我的资产（我怀疑这是问题的一部分），所以我已经进入`load 'deploy/assets'`了我的 Capfile。

我已经遵循了这里的指示：[http](http://wiki.dreamhost.com/Capistrano) ://wiki.dreamhost.com/Capistrano大部分情况下，以及在网上搜索有关 Capistrano 的许多其他文章。

## 部署.rb

```
require "bundler/capistrano"

ssh_options[:forward_agent] = true
ssh_options[File.join(ENV["HOME"], ".ssh", "id_rsa-dreamhost")]

set :application, "<app>"
set :repository,  "git@bitbucket.org:<gituser>/#{application}.git"
set :server_name, "<host>"
set :scm, :git # You can set :scm explicitly or Capistrano will make an intelligent     guess based on known version control directory names
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or   `none`
set :checkout, "export"
set :deploy_via, :remote_cache
set :branch, "master"

set :base_path, "/home/<user>/<domain>"
set :deploy_to, "#{base_path}/#{application}"
set :keep_releases, 3

set :user, '<user>'
set :runner, '<user>'

set :use_sudo, false

default_run_options[:pty] = true

set :shared_path, "/home/<user>/<shared_folder>"
set :release_path, "#{base_path}/#{application}"

role :web, "<host>"                          # Your HTTP server, Apache/etc
role :app, "<host>"                          # This may be the same as your `Web` server
role :db,  "<host>", :primary => true # This is where Rails migrations will run

# if you want to clean up old releases on each deploy uncomment this:
# after "deploy:restart", "deploy:cleanup"

# if you're still using the script/reaper helper you will need
# these http://github.com/rails/irs_process_scripts

# If you are using Passenger mod_rails uncomment this:
namespace :deploy do
  task :start do ; end
  task :stop do ; end

  desc "Restart the app by touching the restart.txt file."
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "touch #{File.join(current_path,'tmp','restart.txt')}"
  end

  desc "Update the environment-specific files from the shared folder."
  task :symlink_shared, :roles => [:app] do
    run "ln -s #{shared_path}/app_config.yml #{release_path}/config/"

    run "rm #{release_path}/config/database.yml"
    run "ln -s #{shared_path}/database.yml #{release_path}/config/"

    run "rm #{release_path}/public/.htaccess"
    run "ln -s #{shared_path}/.htaccess #{release_path}/public/"
  end
end

before "deploy:restart", "deploy:symlink_shared"
after "deploy:update_code", "deploy:migrate" 
```

## 上限部署的输出：设置

```
* 2012-12-23 16:49:27 executing `deploy:setup'
  * executing "mkdir -p /home/<user>/<domain>/<app> /home/<user>/<domain>/<app>/releases   /home/<user>/<shared_folder> /home/<user>/<shared_folder>/system  /home/<user>/<shared_folder>/log /home/<user>/<shared_folder>/pids"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 263ms
  * executing "chmod g+w /home/<user>/<domain>/<app>  /home/<user>/<domain>/<app>/releases /home/<user>/<shared_folder>  /home/<user>/<shared_folder>/system /home/<user>/<shared_folder>/log  /home/<user>/<shared_folder>/pids"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 261ms 
```

## 上限部署的输出：检查

```
* 2012-12-23 16:49:45 executing `deploy:check'
  * executing "test -d /home/<user>/<domain>/<app>/releases"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 265ms
  * executing "test -w /home/<user>/<domain>/<app>"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 256ms
  * executing "test -w /home/<user>/<domain>/<app>/releases"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 256ms
  * executing "which git"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 259ms
  * executing "test -w /home/<user>/<shared_folder>"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 263ms
You appear to have all necessary dependencies installed 
```

## 上限输出：部署

```
* 2012-12-23 16:51:41 executing `deploy'
  * 2012-12-23 16:51:41 executing `deploy:update'
 ** transaction: start
  * 2012-12-23 16:51:41 executing `deploy:update_code'
    updating the cached checkout on all servers
    executing locally: "git ls-remote git@bitbucket.org:<gituser>/<app>.git master"
    command finished in 1102ms
  * executing "if [ -d /home/<user>/<shared_folder>/cached-copy ]; then cd /home/<user>/<shared_folder>/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 42dfb6a3f529e2293192f5e22c3214b7da55c9b4 && git clean -q -d -x -f; else git clone -q git@bitbucket.org:<gituser>/<app>.git /home/<user>/<shared_folder>/cached-copy && cd /home/<user>/<shared_folder>/cached-copy && git checkout -q -b deploy 42dfb6a3f529e2293192f5e22c3214b7da55c9b4; fi"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 3233ms
    copying the cached version to /home/<user>/<domain>/<app>
  * executing "cp -RPp /home/<user>/<shared_folder>/cached-copy /home/<user>/<domain>/<app> && (echo 42dfb6a3f529e2293192f5e22c3214b7da55c9b4 > /home/<user>/<domain>/<app>/REVISION)"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 338ms
  * 2012-12-23 16:51:47 executing `deploy:finalize_update'
    triggering before callbacks for `deploy:finalize_update'
  * 2012-12-23 16:51:47 executing `deploy:assets:symlink'
  * executing "ls -x /home/<user>/<domain>/<app>/releases"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 252ms
  * executing "rm -rf /public/assets &&\\\n        mkdir -p /public &&\\\n        mkdir -p /home/<user>/<shared_folder>/assets &&\\\n        ln -s /home/<user>/<shared_folder>/assets /public/assets"
    servers: ["<host>"]
    [<host>] executing command
 ** [out :: <host>] mkdir: cannot create directory `/public'
 ** [out :: <host>] : Permission denied
    command finished in 268ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/<user>/<domain>/<app>; true"
    servers: ["<host>"]
    [<host>] executing command
    command finished in 265ms
failed: "sh -c 'rm -rf /public/assets &&\\\n        mkdir -p /public &&\\\n        mkdir -p /home/<user>/<shared_folder>/assets &&\\\n        ln -s /home/<user>/<shared_folder>/assets /public/assets'" on <host> 
```

您可以在输出底部附近看到 Permission denied 错误，以及最后失败的 shell 命令。我不知道为什么它*会*`/public`尝试对`public`. 我觉得我在某处遗漏了一个变量引用，该引用应该预先添加到 mkdir 命令中，但是我读过的所有文档都没有表明这一点。

我会很感激我能得到的任何帮助，并在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:25:43.980

请不要自行`release_path`设置`shared_path`。让 Capistrano 自动解决。

但是你应该`deploy_to`正确设置：

```
set :deploy_to, "/home/<user>/<domain>/<application>" 
```

还要小心变量。Capistrano的`set`语法并不意味着变量可用于替换。您的问题发生是因为`"#{base_path}/"`is nil 并评估为`"/"`.

[在Capistrano](https://github.com/capistrano/capistrano/wiki/2.x-Significant-Configuration-Variables)的配置 wiki 上了解更多信息。

# c# - 组合框的项目为空时是否为空？

> ID：14015535
> 
> 赞同：6
> 
> 时间：2012-12-23T23:32:09.493
> 
> 标签：c#, combobox, null, resharper, nullreferenceexception

Resharper 希望我更改此代码：

```
foreach (var item in cmbxColor1.Items)
{
    cmbxColor2.Items.Add(item);
    . . . 
```

...因为它说，“可能的'System.NullReferencesException'”

所以应该是这样的：

```
foreach (var item in cmbxColor1.Items)
{
    if (null != cmbxColor2.Items)
    {
        cmbxColor2.Items.Add(item);
. . . 
```

?

我不明白 - 组合框的 Items 怎么可能是 null，除非 null == 为空？如果 null == 为空，那么这正是调用此代码时它们 [s,w] 的样子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:44:51.240

我想 Resharper 在这里是错误的，因为它的`Items`集合`ComboBox`似乎是由它的构造函数初始化的。那是：

```
ComboBox c = new ComboBox();
c.Items.Add("1"); 
```

保证没问题。

这里也只有`get`访问器可供我们使用，因此没有人可以用另一个（或`null`）替换这个集合。虽然我不太确定，但如果有可能在派生时影响这个集合`ComboBox`（我无法立即找到 smth），我想即使那样它仍然保证不为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T23:41:06.793

Null 不为空。

Resharper 团队对许多 .NET 类进行了一些自动代码分析，以确定哪些方法和属性可以返回 null。如果 Resharper 声称它可以为空，那可能是因为有某种方式（也许是模糊的）它实际上可能为空。

> 如果您使用的是外部库（例如`mscorlib.dll`），使用属性为其实体指定合同似乎不可行。输入外部注释。此 ReSharper 功能允许您使用 ReSharper 分析引擎使用的属性来补充已编译的实体。外部注解让你“欺骗”引擎，让它看到在编译库时没有声明的属性（用于方法、参数和其他声明）。为此，必须在位于 .xml 的 XML 文件中指定属性`<ReSharper install directory>\Bin\ExternalAnnotations`。
> 
> 这是安装 ReSharper 时存储在此文件夹中的标准库的合同定义。这些合同是根据源代码分析以及 Microsoft 合同获得的。使用前一种技术获得的合同存储在该类型的文件中`*.Generated.xml`，而使用后一种技术获得的合同存储在该类型的文件中`*.Contracts.xml`。

但是，我同意这不太可能`null`在实践中实现。也可能是 Resharper 过于谨慎 - 证明某些东西是否可以为空是一个难题。如果您认为分析错误并想要更正它，您可以修改注释。

**有关的**

*   [ReSharper NullReferenceException 分析及其契约](http://blogs.jetbrains.com/dotnet/2010/11/resharper-nullreferenceexception-analysis-and-its-contracts/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T23:36:42.690

我宁愿用这种方式。

```
foreach (var item in cmbxColor1.Items)
{
    if (cmbxColor2.Items.Count > 0)
    {
        cmbxColor2.Items.Add(item);
    }
} 
```

# java - 如何在 PLAY 框架中导入 JAVA 中的自定义包

> ID：14015542
> 
> 赞同：0
> 
> 时间：2012-12-23T23:33:24.073
> 
> 标签：java, playframework

我使用 PLAY 框架创建了一个 java 项目。但是当我添加另一个项目的一些外部包时，它给出了编译错误。我还添加了所需的所有相关 jars。并且还使我的原始项目依赖于具有 MyUtils 包的项目。

“错误：包 MyUtils 不存在”

如何解决这个问题？ ![编译错误](../Images/b310ed500bbb4c9d0663f6481480701d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T16:03:15.427

You are talking about projects and dependencies as if you were working on eclipse or similar, and I believe I can guess what you're doing, which will make it compile in eclipse, but is not related to how it will work once you run play on its own.

Make sure that you have the jar that contains the MyUtils package in the **lib** dir of your project.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T23:39:13.823

您是否尝试过创建 lib 文件夹并将您的 jar 添加到该目录？ [http://www.playframework.org/documentation/2.0.4/SBTDependencies](http://www.playframework.org/documentation/2.0.4/SBTDependencies)

# php - Crontab：PHP Wget 或 Curl

> ID：14015543
> 
> 赞同：4
> 
> 时间：2012-12-23T23:33:35.070
> 
> 标签：php, curl, wget, crontab

我有一个关于使用什么命令从 Crontab 运行 PHP 脚本的问题。

这些替代方案中的哪一个最适合使用。

```
* * * * * /usr/bin/php /var/www/project/cron.php
* * * * * /usr/bin/curl --silent --compressed http://localhost/project/cron.php
* * * * * /usr/bin/wget http://localhost/project/cron.php 
```

我希望不要打扰我的问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:38:18.773

如果它是您要在 CLI 环境中运行的 PHP 脚本，我肯定会使用`php`.

如果您想在服务器环境中运行 PHP 脚本，请使用`wget`或`curl`，但我认为应该在 CLI 上执行这样的流程任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T23:38:55.617

使用第一个选项。当您通过控制台运行脚本时，直接运行它们总是一个更好的主意。通过 Web 服务器运行它可能会带来意想不到的可靠性问题。

# haskell - 结果取决于列表的顺序，即使它不应该

> ID：14015546
> 
> 赞同：0
> 
> 时间：2012-12-23T23:34:02.160
> 
> 标签：haskell

我在假期里花了一点时间在 Haskell 上，但现在我遇到了一个问题。我有一个由布尔值组成的列表，我正在尝试创建一个函数，该函数采用整数列表并在相应位置翻转布尔值。

如果您将以下代码加载到 GHCi 中并尝试运行**flipBits testBoard [1,0,2]**结果是*[True, True, False, False]*。如果你用**flipBits testBoard [1,2,0]**运行它，结果是*[True, True, True, False]*。

我希望结果不依赖于传递给 FlipBits 的列表中数字的顺序（显然列表中的 0 会停止执行）。我究竟做错了什么？

```
flipBit board which (x:xs)
    | which == 0 = (not (board !! which)):xs
    | otherwise =  x:(flipBit board (which-1) xs)

flipBits board [] = board
flipBits board (x:xs) = flipBits (flipBit board x board) xs

testBoard = take 4 $ repeat False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:46:14.827

在你的`flipBit`功能

```
flipBit board which (x:xs)
    | which == 0 = (not (board !! which)):xs
    | otherwise =  x:(flipBit board (which-1) xs) 
```

`board`您将要翻转的所有元素替换为`not (board !! 0)`，因为唯一的翻转是在`which`达到 0 时。

你只是想从中删除一个论点，

```
flipBit which (x:xs)
    | which == 0 = not x : xs
    | otherwise  = x : flipBit (which - 1) xs 
```

然后有

```
flipBits board (x:xs) = flipBits (flipBit x board) xs 
```

或者，由于这是一种重复的应用模式，请使用适当的高阶函数，

```
flipBits board ixs = foldr flipBit board ixs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T23:45:16.560

```
 | which == 0 = (not (board !! which)):xs 
```

守卫说 RHS 只有在`which`为 0 时才会被评估，所以这与

```
 | which == 0 = (not (board !! 0)):xs 
```

`board`这是“原始”板，在我们开始沿着它走之前。因此，不是在某个位置翻转该位，而是将该位替换为列表头部的位的倒数。

你应该改为

```
 | which == 0 = not x : xs 
```

然后问自己为什么需要第一个参数来`flipBit`.

# c++ - 如何将矩阵的索引映射到一维数组（C++）？

> ID：14015556
> 
> 赞同：48
> 
> 时间：2012-12-23T23:35:39.893
> 
> 标签：c++, c, arrays, matrix

我有一个 8x8 矩阵，如下所示：

```
char matrix[8][8]; 
```

另外，我有一个包含 64 个元素的数组，如下所示：

```
char array[64]; 
```

然后我将矩阵绘制为表格，并用数字填充单元格，每个数字从左到右，从上到下递增。

如果我在矩阵中有索引 3（列）和 4（行），我知道它对应于数组中位置 35 的元素，正如我绘制的表格中所示。我相信有某种公式可以将矩阵的 2 个索引转换为数组的单个索引，但我不知道它是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-23T23:40:24.623

大多数语言存储多维数组的方式是进行如下转换：

如果`matrix`具有大小，n（行）乘 m（列），并且我们使用“行优先[排序](https://en.wikipedia.org/wiki/Row-_and_column-major_order)”（我们首先沿行计数），那么：

`matrix[ i ][ j ] = array[ i*m + j ]`.

这里 i 从 0 到 (n-1)， j 从 0 到 (m-1)。

所以它就像一个以'm'为底的数字系统。请注意，最后一个维度的大小（此处为行数）并不重要。

* * *

对于概念上的理解，可以考虑一个 (3x5) 矩阵，其中“i”作为行号，“j”作为列号。如果您从 开始编号`i,j = (0,0) --> 0`。对于*'row-major'*排序（像这样），布局看起来像：

```
 |-------- 5 ---------|
  Row      ______________________   _ _
   0      |0    1    2    3    4 |   |
   1      |5    6    7    8    9 |   3
   2      |10   11   12   13   14|  _|_
          |______________________|
Column     0    1    2    3    4 
```

当您沿行移动（即增加列号）时，您只需开始向上计数，因此数组索引为`0,1,2...`. 当您到达第二行时，您已经有`5`条目，因此您从 indices 开始`1*5 + 0,1,2...`。在第三行，您已经有`2*5`条目，因此索引是`2*5 + 0,1,2...`.

对于更高维度，这个想法可以推广，即对于 3D `matrix`L x N x M：

`matrix[ i ][ j ][ k ] = array[ i*(N*M) + j*M + k ]`

等等。

* * *

有关非常好的解释，请参阅：[http://www.cplusplus.com/doc/tutorial/arrays/；](http://www.cplusplus.com/doc/tutorial/arrays/;)或更多技术方面：[http ://en.wikipedia.org/wiki/Row-major_order](http://en.wikipedia.org/wiki/Row-major_order)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-04T11:13:35.173

对于行优先排序，我认为该陈述`matrix[ i ][ j ] = array[ i*n + j ]`是错误的。

偏移量应该是`offset = (row * NUMCOLS) + column`。

您的陈述结果是`row * NUMROWS + column`，这是错误的。

您提供的链接给出了正确的解释。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-23T02:07:19.970

像这样的东西？

```
//columns = amount of columns, x = column, y = row
var calculateIndex = function(columns, x, y){
    return y * columns + x;
}; 
```

下面的示例将索引转换回 x 和 y 坐标。

```
//i = index, x = amount of columns, y = amount of rows
var calculateCoordinates = function(index, columns, rows){
    //for each row
    for(var i=0; i<rows; i++){
        //check if the index parameter is in the row
        if(index < (columns * i) + columns && index >= columns * i){
            //return x, y
            return [index - columns * i, i];
        }
    }
    return null;
}; 
```

# c# - 如果在 c# 中使用 linq to xml 在 xml 中不存在 xml 节点，我该如何捕捉？

> ID：14015557
> 
> 赞同：0
> 
> 时间：2012-12-23T23:36:02.483
> 
> 标签：c#, linq-to-xml

我的问题是，在我的 xml 数据中，有时一个特定的节点不存在，我怎样才能捕捉到它以避免`"Object reference not set to an instance of an object." error`并跳过该值并继续在 listview 中添加项目？

这是我的 linq to xml 的查询

```
var summary = from r in doc.Descendants("TrxDetailCard") 
                      select new 
                      {
                          Account_Type = r.Element("Account_Type_CH").Value,
                          Captured = r.Element("Captured").Value,
                          Trans_Type_ID = r.Element("Trans_Type_ID").Value,
                          Acct_Num_CH = r.Element("Acct_Num_CH").Value,
                          Tip_Amt_MN = r.Element("Tip_Amt_MN").Value,
                          Total_Amt_MN = r.Element("Total_Amt_MN").Value,
                          Date_DT = r.Element("Date_DT").Value,
                      }; 
```

有时`Tip_Amt_MN`不存在

在列表视图中添加项目

```
foreach (var i in summary)
        {
            ListViewItem it = new ListViewItem(i.Account_Type.ToString());
            it.SubItems.Add(i.Captured.ToString());
            it.SubItems.Add(i.Trans_Type_ID.ToString());
            it.SubItems.Add(i.Acct_Num_CH.ToString());
            it.SubItems.Add(i.Tip_Amt_MN.ToString());
            it.SubItems.Add(i.Total_Amt_MN.ToString());
            it.SubItems.Add(i.Date_DT.ToString());
            listView1.Items.Add(it);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:38:43.017

如果您不介意将属性设置为 null，则可以将 XElement 强制转换为字符串。换句话说，如果`Account_Type_CH`元素不存在，这不会抛出异常：

```
Account_Type = (string)r.Element("Account_Type_CH") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T23:42:55.047

在我不想破坏查询的情况下，我倾向于自由使用 FirstOrDefault()：

```
r.Element("Tip_Amt_MN").Value 
```

变成：

```
r.Elements("Tip_Amt_MN").Select(x => x.Value).FirstOrDefault() 
```

# jquery - 寻求帮助 优化一个小的 jQuery 插件

> ID：14015559
> 
> 赞同：1
> 
> 时间：2012-12-23T23:36:22.663
> 
> 标签：jquery, optimization, jquery-plugins

我编写了以下插件 - 它运行完美。它完全符合我希望它在所有情况下所做的 - 但它有点慢。我想我可能会服从一个更聪明的社区，看看是否有人看到我可以显着提高其性能的方法。

基本上，它需要一个结构化的`ul`并具有典型的下拉/抽屉功能。我还发布了它期望的 HTML 片段。

### 警告——我包含了大量的 HTML，因为我想展示它使用了多少项目——这可能会告诉你为什么它很慢。

我相当确定放缓仅仅是因为我告诉它处理的项目数量荒谬。但是因为我希望它在单击任何其他菜单时折叠所有其他菜单，所以我必须将它们全部附加 - 对吗？

我再说一遍——你在这里看到的行为是完全正确的。我还包括一个 jsFiddle，所以你可以看到它的实际效果。

## [jsFiddle 链接（工作中）](http://jsfiddle.net/ciel/tTeuR/)

# jQuery Wiring（文档加载）

```
$(document).ready(function() {
    $(".dropdown > a").addClass("root");

    var $sidebar_dropdown = $('li[data-role="sidebar-dropdown"]');
    var $submenu_dropdown = $('li[data-role="sidebar-sub-dropdown"]');
    var $remote_menus = $('a.remote');

    $sidebar_dropdown.drawer({
        openClass: 'sidebar-dropdown-open'
    });
    $submenu_dropdown.drawer({
        openClass: 'sidebar-sub-dropdown-open'
    });

}); 
```

# 实际插件（Javascript）

```
(function ($) {
    $.fn.drawer = function (options) {
        // Create some defaults, extending them with any options that were provided
        var settings = $.extend({
            openClass: 'open',
            openClassName: function () { return '.' + this.openClass; }
        }, options);

        var open = function (e) {
            // mark this menu as open
            $(e).addClass(settings.openClass);

            // retrieve the appropriate menu item
            var $menu = $(e).children(".dropdown-menu, .sidebar-dropdown-menu");

            // slide down the one clicked on.
            $menu.slideDown(100);
            $menu.addClass('active');
        };

        var close = function (e) {
            $(e).removeClass(settings.openClass);
            // retrieve the appropriate menu item
            var $menu = $(e).children(".dropdown-menu, .sidebar-dropdown-menu");
            // slide down the one clicked on.
            $menu.slideUp('fast');
            $menu.removeClass('active');
        };

        return this.each(function () {
            $(this).on('click', function (e) {
                // transform the selector into a 'className'
                var $className = $('.' + settings.openClass);
                var $node = $(this); // the current node
                var $target = $(e.target); // the actual DOM target
                // examine all existing dropdown menus that are
                // currently open, and close them - excluding the
                // current one.
                $className.not($(this)).each(function () {
                    close($(this));
                });

                if ($target.hasClass("root") && $node.hasClass(settings.openClass)) {
                    close($(this));
                }
                else {
                    // open the selected dropdown menu
                    open($(this));
                }

                // prevent default event propogation
                e.preventDefault();
                e.stopPropagation();
            }).on("mouseleave", function () {
                $(this).children(".dropdown-menu").hide().delay(300);
            });

        })
    };

})(jQuery); 
```

# HTML

```
<div class="page-sidebar">
<ul>
    <li class="dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a class="remote" href="#">Test Menu Item</a></li>
            <li><a class="remote" href="#">Test Menu Item</a></li>
            <li><a class="remote" href="#">Test Menu Item</a></li>
        </ul>
    </li>
    <li class="dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>

    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
            <li><a href="#" class="remote">Test Menu Item</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="#" class="remote">Test Menu Item</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="#" class="remote">Test Menu Item</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li><a href="#" class="remote">
                            Test Menu Item,
                            <br />
                            <small>Test Menu Item Small</small>
                        </a>
                    </li>
                    <li><a href="#" class="remote">
                            Test Menu Item,
                            <br />
                            <small>Test Menu Item Small</small>
                        </a>
                    </li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                </ul>
            </li>
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="#" class="remote">Test Menu Item</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                </ul>
            </li>
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="#" class="remote">Test Menu Item</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                </ul>
            </li>
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="#" class="remote">Test Menu Item</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                </ul>
            </li>
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="#" class="remote">Test Menu Item</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li><a href="#" class="remote">Test Menu Item</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul>
</div>​ 
```

# CSS

```
.page-sidebar {
    display: block;
    width: 213px;
    float: left;
    min-height: 100% !important;
    height: auto;
    background-color: #EBEBEB;
    padding-top: 10px;
    padding-bottom: 10px;
    margin-top: 10px;
    margin-left: 7px;
}
.page-sidebar ul.sub-menu.light {
    background-color: #F9F9F9 !important;
}
.page-sidebar ul.sub-menu {
    padding-top: 5px;
    padding-bottom: 5px;
}
.page-sidebar .sidebar-dropdown-menu {
    display: none;
}
.page-sidebar ul {
    margin-left: 0;
    list-style: none;
    background-color: #EBEBEB;
}
.page-sidebar > ul > li > a {
    font-size: 1.1em;
}
.page-sidebar > ul > li.dropdown {
    position: relative;
}
.page-sidebar li {
    display: list-item;
    line-height: 20px;
    position: relative;
}
.dropdown, .dropdown > a {
    font-weight: 600 !important;
}
ul li, ol li {
    display: list-item;
    font-size: 14px;
    line-height: 20px;
}
.dropdown, .dropdown > a {
    font-weight: 600 !important;
}
.page-sidebar a {
    font-family: 'Almendra', 'Segoe UI', 'Open Sans', Verdana, Arial, Helvetica, sans-serif;
    font-weight: 400;
    font-size: 11pt;
    letter-spacing: 0.01em;
    line-height: 14pt;
    color: black;
    display: block;
    width: 100%;
    padding: 5px 20px 5px 10px;
    white-space: nowrap;
    font-size: 14px;
    cursor: pointer;
}
a, .link {
    font-family: 'Almendra', 'Segoe UI', 'Open Sans', Verdana, Arial, Helvetica, sans-serif;
    font-weight: 400;
    font-size: 11pt;
    color: #2E92CF;
    text-decoration: none;
}
.page-sidebar > ul > li.dropdown::after {
    content: "";
    display: block;
    position: absolute;
    top: 6px;
    left: 100%;
    margin-left: -20px;
    width: 16px;
    height: 16px;
    background: no-repeat;
    background-position: 0 -1586px;
    z-index: 200;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:16:10.467

我试图了解情况。我正在浏览你的插件，它看起来不错。究竟这就是慢？手风琴效果慢？

# java - 我如何知道服务器使用 Java 提供的默认密码套件

> ID：14015563
> 
> 赞同：0
> 
> 时间：2012-12-23T23:37:09.727
> 
> 标签：java, sockets, ssl, network-programming

如果我使用 Java 启动与服务器的 SSL 握手，Java 有一组启用的密码套件，将在握手期间提供。该列表将影响服务器的选择。如果我想知道发球的默认选择是什么，不受客户影响，我可以这样做吗？我应该在客户列表中添加什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:51:45.183

没有“不受客户端影响的服务器的默认选择”之类的东西。这个问题没有任何意义。客户端提供密码套件列表，服务器选择一个，周期。

# arm - 如何更改 Android 手机上的启动优先级/设置（如果可能）

> ID：14015568
> 
> 赞同：-1
> 
> 时间：2012-12-23T20:28:37.387
> 
> 标签：arm

有人知道Android手机的固件是否可以选择从片上系统以外的其他媒体启动？我组装了兼容的 ARM 机器代码并将其放在 SD 卡上，并且想知道是否可以通过这种方式启动我的小型机器指令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:59:53.247

从不同的介质启动实际上与 android 无关，而是主要和可能的辅助引导加载程序。Google 没有强制要求任何特定的启动安排，这在很大程度上取决于手机供应商。

TI OMAP 系列 SoC 具有基于 ROM 的第一阶段引导加载程序，可以调出媒体卡接口并从 FAT 格式的媒体卡引导 - 尽管引导设备的搜索顺序和可用性由上拉电阻和您的手机供应商可能已禁用它。其他 SoC 系列可能也有类似的安排。

即使你的代码启动了，问题是用什么作为 IO？还是您打算回到替换内核？

# c - 无法在c中修改堆栈上的字符串

> ID：14015575
> 
> 赞同：-1
> 
> 时间：2012-12-23T23:39:21.707
> 
> 标签：c, string, stack

> **可能重复：**
> [为什么 char* 会导致未定义的行为，而 char[] 不会？](https://stackoverflow.com/questions/8302290/why-does-char-cause-undefined-behaviour-while-char-doesnt)

以下代码

```
int main() {
  char * st = "abc";
  *st = 'z';
  return 0;
} 
```

正在返回分段错误。如果堆栈上的字符串不可修改，为什么它不会在编译时给出错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:45:37.527

堆栈上的变量 st 是一个指针。分配的值是一个字符串常量（只读）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T23:48:22.643

`char *str = "this is dangerous to modify";`不是你得到的相同意义上的字符串；它被称为字符串文字并根据标准对其进行修改会产生未定义的行为。

如果您想要一个稍后可以修改的字符串，请执行以下操作：

```
char str[] = "Some String"; 
```

然后相应地修改它。

# php - 将 MySQL 数据加载到 PHP 数组中

> ID：14015578
> 
> 赞同：1
> 
> 时间：2012-12-23T23:39:46.933
> 
> 标签：php, mysql

我正在尝试将 ID 列表加载到我可以循环的 PHP 数组中。我使用的 SQL 查询在 PHPMyAdmin 中运行时返回 283 行。但是，当我运行以下 PHP 脚本时，它只返回一行（第一行）。如何修改我的代码以将生成的 SQL 查询中的所有行包含在我的 PHP 数组中？

代码：

```
//Get active listing IDs 
$active = "SELECT L_ListingID FROM `markers`";
$active = mysql_query($active) or die(mysql_error());

if(is_resource($active) and mysql_num_rows($active)>0){
$row = mysql_fetch_array($active);
print_r($row);
}; 
```

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T23:42:04.133

使用 mysql_fetch_array 将只返回第一行，然后推进内部计数器。您需要将其作为循环的一部分来实现，如下所示以获得您想要的。

```
while($row = mysql_fetch_array($active)) {
 // Your code here
} 
```

请记住，mysql_ 函数现在也已被弃用，并计划在未来版本的 php 中删除。使用 mysqli_ 函数或 PDO。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T23:48:32.230

在 PDO 中，它相当简单：

```
$rows = $conn->query($active)->fetchAll(); 
```

请参阅[`PDO::query`^(*文档*)](http://php.net/PDO.query)和[`PDOStatement::fetchAll`^(*文档*)](http://php.net/PDOStatement.fetchAll)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T23:50:54.533

与`mysqli`您一起使用[mysqli_result::fetch_all](http://php.net/manual/en/mysqli-result.fetch-all.php)`PDO`并使用[PDOStatement::fetchAll](http://php.net/manual/de/pdostatement.fetchall.php)将所有行提取到数组中。

mysqli的代码

```
$sql = "SELECT L_ListingID FROM `markers`";
$result = $mysqli->query($sql);
if ($result !== false) {
    $rows = $result->fetch_all();
} 
```

与 PDO 几乎相同

```
$sql = "SELECT L_ListingID FROM `markers`";
$result = $pdo->query($sql);
if ($result !== false) {
    $rows = $result->fetchAll();
} 
```

# c# - WinForm UI 数据绑定到视图模型，如何取消编辑丢弃不需要的更改

> ID：14015585
> 
> 赞同：3
> 
> 时间：2012-12-23T23:40:55.293
> 
> 标签：c#, winforms, data-binding

![在此处输入图像描述](../Images/58c0321a84c93ac7862499d0cbfb4d8c.png)

我的提交表单通过 bindingSource1 绑定到提交 ViewModel。

**我的期望：**编辑时，我不希望将 UI 值分配给 ViewModel。我希望仅在点击“提交”按钮后将值分配给 ViewModel，并且验证 UI 值，然后我将调用`bindingSource.EndEdit();`. 只有到那时，UI 值才应该写入 ViewModel。

**我的经历：**我发现我的理解不正确。在我编辑了一个文本字段后，一旦我失去了对该文本框或组合框的关注，更改就会以这样的方式被记住，无论我点击“取消”还是 [x] 关闭按钮都无关紧要。现在，当此 Form 关闭时，该值已分配到内存中的 ViewModel。（当然，因为我没有点击“提交”，所以没有走完所有的IO逻辑）

当我“取消”/[x] 关闭我的编辑时，我希望 bindingSource 丢弃不需要的更改。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:21:51.803

默认情况下，数据绑定会在验证事件上更新底层数据源。默认情况下，当您离开控件时会发生验证事件。但是，这两种行为都可以自定义。

有关如何使用数据绑定实现取消的信息，请参阅[此答案。](https://stackoverflow.com/a/13983250/897326)您将暂停自动数据绑定更新，然后强制它们在`Submit`.

作为替代方案，您可以`CausesValidation = False`在控件上进行设置。然后，让`Cancel`按钮关闭您的表单，然后`Submit`执行类似于此的操作：

```
control1.CausesValidation = True
control2.CausesValidation = True
control3.CausesValidation = True
Me.ValidateChildren()
control1.CausesValidation = False
control2.CausesValidation = False
control3.CausesValidation = False 
```

如果您决定将上述方法用于生产用途，请枚举一次您的控件（例如 inside `Form_Load`），然后收集那些数据绑定的控件。然后，您可以轻松地循环运行它们并设置`CausesValidation`为`True`或`False`。或者有一个辅助方法来执行此操作，以便在其他表单上重用。

# java - 外部同步 LinkedHashmap

> ID：14015589
> 
> 赞同：5
> 
> 时间：2012-12-23T23:41:21.737
> 
> 标签：java, concurrency

在不使用 Collections.synchronizedMap 的情况下，在外部实现linkedhashmap 同步的最佳方法是什么

当使用 Collections.synchronizedMap 时，整个数据结构都会被锁定，因此性能会受到严重影响。

仅锁定数据结构所需部分的最佳方法是什么。例如，如果线程正在访问密钥 (K1)，它应该只锁定数据结构的 Key(K1) 和 Value(v1) 部分

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:45:30.743

您无法从内置 Java 实现中获得细粒度锁定、FIFO-eviction 并发映射。

查看[Guava`Cache`](https://code.google.com/p/guava-libraries/wiki/CachesExplained)或开源[`ConcurrentLinkedHashMap`项目](http://code.google.com/p/concurrentlinkedhashmap/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:15:25.740

Louis Wasserman 的建议可能是最好的，因为它为您提供了很多有用的功能。然而，即使你锁定了整个地图，你也必须非常非常努力地让它成为瓶颈（例如，你的代码主要是在地图上进行读/写）。如果您不需要 Guava 的附加功能`Cache`，同步地图可能更简单、更好。`ReadWriteLock`如果您主要从地图上阅读，您也可以使用 a 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T23:49:22.853

我想你可能想要同步你做的后续操作，只是来自地图的值：

```
Object value = map.get(key);
synchronized(value) {
    doSomethingWith(value);
} 
```

与从 Map 获取的值同步是有意义的，因为它们可以同时共享和访问；我上面发布的示例应该可以满足您的需要。这应该足够了。

顺便说一句，您还可以在执行两个嵌套同步块的键上进行同步：

```
synchronized(key) {
    Object value = map.get(key);
    synchronized(value) {
        doSomethingWith(value);
    } 
} 
```

密钥 - 通常 - 仅用于访问对象（通过散列）。键由哈希值匹配，因此对我来说同步键没有意义。

或者，也许您可​​以子类`ConcurrentHashMap`添加`LinkedHashMap`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T23:51:19.553

如果您不需要 a `LinkedHaspMap`，请使用包中[`ConcurrentHashMap`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)的a [`java.util.concurrent`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)。

它专为速度和线程安全而设计。它使用尽可能少的锁定来实现其线程安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T23:52:53.837

最好的选择是使用`java.util.concurrent.ConcurrentHashMap`.

我看不出如何仅从外部锁定 zour Map 的一部分，因为您无法通过调用任何 maps 函数来控制内部访问哪些共享数据结构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T00:00:35.840

HashMap 或 LinkedHashMap 中的插入可能会导致重新散列，因为它会增加桶的大小和数量之间的比率。同时拥有两个或多个线程 rehash 将是一场灾难。

即使你只是在做一个获取，另一个线程可能会从同一个桶中删除一个条目，所以你正在扫描一个正在你下面修改的链表。您还可以同时将两个或多个线程附加到主链表。

如果您可以不使用链接，请使用 java.util.concurrent.ConcurrentHashMap，如前所述。

# .htaccess - 在 Drupal 站点上使用 .htaccess 删除扩展

> ID：14015590
> 
> 赞同：0
> 
> 时间：2012-12-23T23:41:28.820
> 
> 标签：.htaccess, mod-rewrite, drupal-7

您如何使用 .htaccess 删除扩展名。在网站上，我希望旧链接能够正常工作，但是网站布局已经改变。我要映射

/算术/whole_numbers/practice/whole_number_rounding.html

重定向（映射）到

/算术/whole_numbers/练习/whole_number_rounding

我已经从一个标准的 html 站点转移到了一个 Drupal 站点，并且新的页面名称已经被定义为看起来像原始页面名称，除了缺少 .html 扩展名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:44:13.000

我知道它不能直接回答你的问题，但是这个呢： [http ://drupal.org/project/path_redirect](http://drupal.org/project/path_redirect)

**编辑**：如果还不够，试试这个：drupal.org/documentation/modules/path

# python - 如何在 Python 中创建新的未知或动态/扩展对象

> ID：14015592
> 
> 赞同：42
> 
> 时间：2012-12-23T23:41:47.167
> 
> 标签：python, oop, class, object, expandoobject

在 python 中，我们如何在没有预定义类的情况下创建一个新对象，然后为它动态添加属性？

例子：

```
dynamic_object = Dynamic()
dynamic_object.dynamic_property_a = "abc"
dynamic_object.dynamic_property_b = "abcdefg" 
```

最好的方法是什么？

**编辑**因为很多人在评论中建议我可能不需要这个。

问题是我有一个序列化对象属性的函数。出于这个原因，由于某些构造函数的限制，我不想创建预期类的对象，而是创建一个类似的对象，比如**模拟**，添加我需要的任何“自定义”属性，然后将其反馈给功能。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-23T23:44:46.377

只需定义您自己的类即可：

```
class Expando(object):
    pass

ex = Expando()
ex.foo = 17
ex.bar = "Hello" 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-04-10T15:38:39.123

如果您从@Martijn 的答案中采用元分类方法，@Ned 的答案可以改写得更短（尽管它显然不那么可读，但做同样的事情）。

```
obj = type('Expando', (object,), {})()
obj.foo = 71
obj.bar = 'World' 
```

或者只是，它与上面使用`dict`参数的作用相同：

```
obj = type('Expando', (object,), {'foo': 71, 'bar': 'World'})() 
```

对于 Python 3，`bases`不需要将对象传递给参数（请参阅[`type`](https://docs.python.org/3/library/functions.html#type) 文档）。

但是对于简单的情况，实例化没有任何好处，所以可以这样做：

```
ns = type('Expando', (object,), {'foo': 71, 'bar': 'World'}) 
```

同时，我个人更喜欢一个简单且易读的临时测试配置案例的普通类（即没有实例化）：

```
class ns:
    foo = 71
    bar = 'World' 
```

# 更新

在 Python 3.3+ 中，*正是*OP 所要求的，[`types.SimpleNamespace`](https://docs.python.org/3/library/types.html#types.SimpleNamespace). 只是：

> 一个简单的`object`子类，提供对其命名空间的属性访问，以及有意义的 repr。
> 
> 与 不同`object`，`SimpleNamespace`您可以添加和删除属性。如果`SimpleNamespace`使用关键字参数初始化对象，则这些参数会直接添加到底层命名空间。

```
import types
obj = types.SimpleNamespace()
obj.a = 123
print(obj.a) # 123
print(repr(obj)) # namespace(a=123) 
```

但是，在 Python 2 和 Python 3 的 stdlib 中[`argparse.Namespace`](https://docs.python.org/3/library/argparse.html#argparse.Namespace)，都有相同的目的：

> 用于存储属性的简单对象。
> 
> 通过属性名称和值实现相等，并提供简单的字符串表示。

```
import argparse
obj = argparse.Namespace()
obj.a = 123
print(obj.a) # 123 
print(repr(obj)) # Namespace(a=123) 
```

请注意，两者都可以使用关键字参数进行初始化：

```
types.SimpleNamespace(a = 'foo',b = 123)
argparse.Namespace(a = 'foo',b = 123) 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-12-24T01:46:45.407

使用一个对象来保存值并不是最 Pythonic 的编程风格。这在没有良好关联容器的编程语言中很常见，但在 Python 中，您可以使用字典：

```
my_dict = {} # empty dict instance

my_dict["foo"] = "bar"
my_dict["num"] = 42 
```

您还可以使用“字典文字”来一次定义字典的内容：

```
my_dict = {"foo":"bar", "num":42} 
```

或者，如果您的键都是合法标识符（如果您计划将它们作为属性名称，它们将是），您可以使用`dict`带有关键字参数的构造函数作为键值对：

```
my_dict = dict(foo="bar", num=42) # note, no quotation marks needed around keys 
```

填写字典实际上是 Python 在您使用对象时在幕后所做的事情，例如在 Ned Batchelder 的回答中。他的`ex`对象的属性存储在字典中`ex.__dict__`，最终应该等于`dict`直接创建的等价物。

除非`ex.foo`绝对需要属性语法（例如 ），否则您也可以完全跳过该对象并直接使用字典。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-24T09:45:06.497

使用[`collections.namedtuple()`类工厂](http://docs.python.org/2/library/collections.html#collections.namedtuple)为您的返回值创建一个自定义类：

```
from collections import namedtuple
return namedtuple('Expando', ('dynamic_property_a', 'dynamic_property_b'))('abc', 'abcdefg') 
```

返回的值既可以用作元组，也可以通过属性访问：

```
print retval[0]                  # prints 'abc'
print retval.dynamic_property_b  # prints 'abcdefg' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-23T23:41:47.167

我发现的一种方法也是创建一个 lambda。它可能有副作用，并带有一些不需要的属性。只是为了兴趣发帖。

```
dynamic_object = lambda:expando
dynamic_object.dynamic_property_a = "abc"
dynamic_object.dynamic_property_b = "abcdefg" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-20T22:03:26.020

我首先定义一个字典，因为它很容易定义。然后我用`namedtuple`它来将它转换为一个对象：

```
from collections import namedtuple

def dict_to_obj(dict):
    return namedtuple("ObjectName", dict.keys())(*dict.values())

my_dict = {
    'name': 'The mighty object',
    'description': 'Yep! Thats me',
    'prop3': 1234
}
my_obj =  dict_to_obj(my_dict) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-11T00:12:00.690

Ned Batchelder 的回答是最好的。我只是想在这里记录一个稍微不同的答案，它避免使用`class`关键字（如果出于指导性原因，关闭演示等有用）

只需定义您自己的类即可：

```
def Expando():
    def inst():
        None
    return inst

ex = Expando()
ex.foo = 17
ex.bar = "Hello" 
```

# html - XQuery：从 onclick 调用函数（提交）？

> ID：14015600
> 
> 赞同：-1
> 
> 时间：2012-12-23T23:43:06.303
> 
> 标签：html, xml, xquery

我在我的 XQuery 文件中创建了一个 HTML 按钮。我只是想知道单击文件时如何调用文件的 XQuery 函数？

```
xquery version "1.0";
declare option exist:serialize "method=xhtml media-type=text/html";
declare function local:fn($str as xs:string) as xs:string
{
   ...
};

<html>
...
<input type="submit" onclick=" ? "/>
</html> 
```

我试过 ：

```
<input type="submit" value="Search" onclick="{local:fn()}"/> 
```

但是没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:11:57.420

[您可以在http://www.xqib.org/js/OnClickEvent.html](http://www.xqib.org/js/OnClickEvent.html)找到一个示例

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>   
    <title>XQIB: Sample page</title>
    <meta charset="UTF-8"/>
    <script type="text/javascript" src="mxqueryjs/mxqueryjs.nocache.js"></script>
    <script type="application/xquery">
      declare sequential function local:listener($loc, $evtObj) {
        b:alert("Hello, World")
      };

      b:addEventListener
        (b:dom()//input[@id="myButton"], "onclick", local:listener#2)
    </script>
  </head>
  <body>
    <h1>Onclick Event</h1>
    <input id="myButton" type="button" value="Click me"/>
  </body>
</html> 
```

# module - zfcUser getState 在另一个模块中

> ID：14015601
> 
> 赞同：2
> 
> 时间：2012-12-23T23:43:17.827
> 
> 标签：module, zend-framework2, zfcuser

我如何从 zfcUser 获取状态

在 view/index.phtml 我从 $this->zfcUserIdentity()->getState();

但现在我需要在其他模块/控制器（这是我的成本模块控制器）中获取这个值（这个用户的状态）

所以我需要从以下位置获取状态：zfcUser/Entity/User 到 myModule/Controller

我看这个[https://github.com/ZF-Commons/ZfcUser/wiki/How-to-check-if-the-user-is-logged-in](https://github.com/ZF-Commons/ZfcUser/wiki/How-to-check-if-the-user-is-logged-in)但这个解决方案没有帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T11:07:00.710

这对我也有帮助：

```
$sm = $this->getServiceLocator();
$auth = $sm->get('zfcuserauthservice');
if ($auth->hasIdentity()) {
    $user_edit = $auth->getIdentity()->getPrem();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:16:12.830

这`state`是来自用户本身的属性。因此，如果您通过识别服务获取用户，则可以从那里获取状态。

```
public function myFooAction()
{
    if ($this->zfcUserAuthentication()->hasIdentity()) {
        $user  = $this->zfcUserAuthentication()->getIdentity();
        $state = $user->getState();
    }
} 
```

请注意，当用户*未登录*时，`if`条件为假。状态也可以是`null`任意值，所以不要期望每个用户都返回一个有效的状态（换句话说，检查返回的值！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T06:52:19.650

按照此代码，我遇到了同样的问题，然后我管理了如何通过 zfcUser 使用登录用户的身份

在顶部的其他模块控制器中，

```
 use Zend\EventManager\EventManagerInterface; 
```

然后在同一个类中创建这两个函数，

```
public function setEventManager(EventManagerInterface $events)
{
     parent::setEventManager($events);

    $controller = $this;
    $events->attach('dispatch', function ($e) use ($controller) {

        if (is_callable(array($controller, 'checkUserIdentity')))
        {
            call_user_func(array($controller, 'checkUserIdentity'));
        }
    }, 100);
}

public function checkUserIdentity()
{

    if ($this->zfcUserAuthentication()->hasIdentity()) {
    echo "<pre>"; print_r($this->zfcUserAuthentication()->getIdentity());die;

        }

} 
```

它会给出这种输出

```
Admin\Entity\User Object
(
[id:protected] => 2
[username:protected] => 
[email:protected] => rajat.modi@softwebsolutions.com
[displayName:protected] => 
[password:protected] => $2y$14$2WxYLE0DV0mH7txIRm7GkeVJB3mhD4FmnHmxmrkOXtUFL7S9PqWy6
[state:protected] => 
) 
```

就是这样，无论用户是否登录，您都将自动获取身份，否则它将重定向到登录页面。

希望这会有所帮助

# c++ - 以向量对象为成员的 C++ Sprite 类

> ID：14015603
> 
> 赞同：0
> 
> 时间：2012-12-23T23:43:34.317
> 
> 标签：c++, sdl, sprite, physics-engine

好的，我的 Sprite 类遇到了这个问题。基本上，精灵类应该有一个 Vector 类的对象作为其成员，而 Vector 是一个具有角度和速度的类。Vector 类有一个 Vector(double,double) 构造函数，因此可以在初始化时设置速度和角度，但是当我创建我的 sprite 类时。它发送一个错误，它调用 Vector()，一个空白构造函数，并且它不存在。我试图弄清楚它为什么调用 Vector()。这是我来自 Sprite 和 Vector 类的代码。

```
#Vector.h
#ifndef VECTOR_H
#define VECTOR_H

class Vector

{
    public:
        Vector(double,double);
        double getX();
        double getY();
        double getSpeed();
        double getAngle();
        void setSpeed(double);
        void setAngle(double);

    private:
        double speed,angle;
};

#endif

#Vector.h
#include "SDL/SDL.h"
#include "vector.h"
#include "math.h"

Vector::Vector(double speed,double angle)

{
    this -> speed = speed;
    this -> angle = angle;
}

double Vector::getX()

{
    return speed*cos(angle);
}

double Vector::getY()

{
    return speed*sin(angle);
}

double Vector::getSpeed()

{
    return speed;
}

double Vector::getAngle()

{
    return angle;
}

void Vector::setAngle(double angle)

{
    this -> angle = angle;
}

void Vector::setSpeed(double speed)

{
    this -> speed = speed;
}

#Sprite.h:
#ifndef SPRITE_H
#define SPRITE_H
#include "vector.h"

class Sprite

{
    public:
        Sprite(int x,int y);
        SDL_Rect getRect();
        SDL_Surface* getImage();
        void setRect(SDL_Rect);
        void move();
        void draw(SDL_Surface*);

    private:
        Vector movement;
        double x,y,lastX,lastY,angle,speed;
        SDL_Rect rect;
        SDL_Surface* image;
};

#endif

#Sprite.cpp:
#include "SDL/SDL.h"
#include "sprite.h"
#include "functions.h"
#include <cmath>

Sprite::Sprite(int x, int y)

{
    this -> x = x;
    this -> y = y;
    lastX = x;
    lastY = y;
    image = loadImage("box.png");
    rect.x = x;
    rect.y = y;
    rect.w = image->w;
    rect.h = image->h;
    speed = 1;
    angle = 0;
}

SDL_Rect Sprite::getRect()

{   
    return rect;
}

SDL_Surface* Sprite::getImage()

{
    return image;
}

void Sprite::setRect(SDL_Rect rect)
{
    this -> rect = rect;
}

void Sprite::move()

{
    lastX = x;
    lastY = y;
    x += speed*cos(angle);
    y += speed*sin(angle);
    rect.x = int(x);
    rect.y = int(y);
}

void Sprite::draw(SDL_Surface* dest)

{
    blit(image,dest,int(x),int(y));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:48:49.070

您的`Sprite`类有一个`Vector`将在构造时`Sprite`构造的成员。目前，`Vector`将使用默认构造函数初始化，因为您没有另外指定。如果要使用特定的构造函数，`Vector`则需要在构造函数中添加初始化列表`Sprite`：

```
Sprite::Sprite(int x, int y)
  : movement(1.0, 0.0)
{
  // ...
} 
```

这将`movement`使用参数`1`和`0`. 事实上，您也可以将其他成员添加到您的初始化列表中：

```
Sprite::Sprite(int x, int y)
  : movement(1.0, 0.0), x(x), y(y), lastX(x), lastY(y) // and so on...
{
  // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T23:48:28.840

`Vector`创建`Sprite::Sprite(int x, int y)`于. 调用空白构造函数`Vector`是因为您没有调用初始化列表中的构造函数：实际上，您`Vector movement`完全未初始化！

做这个：

```
Sprite::Sprite(int x, int y):
  movement(3.14, 2.7)
{
  ...
} 
```

`movement`使用两个参数构造函数进行构造。我会选择比`3.14`and更好的值`2.7`，这些只是样本值。

`Vector`为了便于使用，我还会考虑创建一个公共的无参数构造函数，将速度和角度初始化为零。

# ruby-on-rails - json格式的Rails 3路由不起作用

> ID：14015605
> 
> 赞同：0
> 
> 时间：2012-12-23T23:44:12.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我有一条需要这样调用的路线：

```
/images/get_subcollections.json?id=1234 
```

我的路线文件中有这个：

```
resources :images do
    collection do
      get 'get_subcollections'
    end
  end 
```

我的控制器中有这个：

```
def get_subcollections
    collection = Collection.find(params[:id])
    respond_to do |format|
      format.json { render :layout =>  false, :json => collection.to_json(:methods=>:get_subcollections) }
    end
  end 
```

当我调用 URL 时，该应用程序就在那里。该请求没有被记录或任何东西。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:10:08.040

您是否使用 firebug 或 chrome 的开发工具检查了响应？只是那种布局：false 阻止你看到任何东西吗？

# css - 在 css 中更改我的 web 字体导致我在“em”中定义的旧字体大小值不准确。如何解决？

> ID：14015606
> 
> 赞同：0
> 
> 时间：2012-12-23T23:44:13.160
> 
> 标签：css, font-face, webfonts

我有很多 css 类，我在其中重新定义字体大小，例如：

```
.ko {font-size:2.2em;}
.szik {font-size:2.8em} 
```

现在我用自定义字体替换我的默认字体，我定义了一个新字体：

```
@font-face {
font-family: BebasNeue;
src: url("http://acc-road.com/page/media/BebasNeue.otf") format("opentype");
} 
```

我的问题是旧的字体大小与新的不匹配，这是我重写所有代码的最后机会。我能轻松解决这个问题吗？如何？

我尝试了这个解决方案，但它不起作用。

```
@font-face {
    font-family: BebasNeue;
    src: url("http://acc-road.com/page/media/BebasNeue.otf") format("opentype");
    font-size: 10.5em;
    font-size-adjust: 10.5;
} 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:32:34.680

更改字体系列时，字体大小根本不会改变，但字符的尺寸会发生变化。如果这是一个问题，您需要重新考虑字体系列和字体大小的选择。

你没有描述你如何使用字体，所以我会猜测一下。假设您的复制文本字体是 Arial，并且您使用 Bebas Neue 作为标题。在 Bebas Neue 中，所有字母都与 Arial 中的大写字母差不多高。这是一种奇怪的字体，故意失去了大小写的区别，这有其含义。（例如，如果您使用较大的相对字体大小，如`2.8em`在 BebasNeue 与复制文本 Arial 时，字母的大小将变得更大。）如果您使用它，您只需相应地选择字体大小。如果您以受控方式设置标题字体大小，这应该不是一个大问题。

原则上，您可以使用[`font-size-adjust`](https://developer.mozilla.org/en-US/docs/CSS/font-size-adjust)根据字体系列调整字体大小，但它适用于相对 x 高度（`10.5`将是一个荒谬的值），并且它仅受 Firefox 支持，以一种损坏的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:04:25.520

您不需要重写所有字体大小，只需更改 body 标签的字体大小：

```
body {
  font-size: 15px; /* use an appropriate value */
} 
```

当你在 css 规则中说“1.2em”时，你只是说你想使用继承的字体大小 * 1.2。与使用百分比相同。

# c++ - Qt Creator 中的 OpenCV：无法连接创建者通信套接字 /tmp/qt_temp.T32147/stub-socket：没有这样的文件或目录

> ID：14015610
> 
> 赞同：0
> 
> 时间：2012-12-23T23:44:44.237
> 
> 标签：c++, qt, sockets, ubuntu, opencv

我正在使用 Ubuntu 12.04、OpenCV 2.4.1、qtcreator 2.4.1。当我尝试运行我的第一个 OpenCV 程序时。我面临以下问题

“无法连接创建者通信套接字 /tmp/qt_temp.B32147/stub-socket：没有这样的文件或目录”

有没有人遇到过这个问题？

谢谢尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:56:35.900

我不会称它为问题的解决方案，但使用 QTCreater 2.6.0 解决了我的问题。你可以试试同样的。

他们说该错误已修复，但我不知道为什么它仍然无法正常工作！

# grails - Grails URL Mapping 映射到错误的 url

> ID：14015614
> 
> 赞同：0
> 
> 时间：2012-12-23T23:44:58.870
> 
> 标签：grails, url-mapping

圣杯 1.3.5

在我的应用程序中映射到新控制器时：

```
"/order/$action/$id?" {
  controller = "customerOrder"
} 
```

“/order/show/13”的请求解析为“/( *)/(* )?/(*)?” 如日志中所示：

```
17:53:02 DEBUG  UrlMappingsFilter - Matched URI [/order/show/13] to URL mapping [/(*)/(*)?/(*)?], forwarding to [/grails/home/page.dispatch] with response [class org.codehaus.groovy.grails.web.sitemesh.GrailsContentBufferingResponse] 
```

如果我添加此映射：

```
"/order/show/13"{
  controller = "customerOrder"
  action = "show"
  id = 13
} 
```

它仍然解析为“/( *)/(* )?/(*)?”。我编辑了映射：

```
"/customerOrder/show/13"{
  controller = "customerOrder"
  action = "show"
  id = 13
} 
```

和日志报告：

```
18:50:08 DEBUG  DefaultUrlMappingsHolder - Matched URI [/customerOrder/show/13] with pattern [/customerOrder/show/13], adding to posibilities 
```

后来它还报告：

```
18:50:08 DEBUG  DefaultUrlMappingsHolder - Matched URI [/customerOrder/show/13] with pattern [/(*)/(*)?/(*)?], adding to posibilities 
```

我对这个完全感到困惑。无论哪种方式，它都解决了相同的问题。任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:33:14.923

显然，在 1.3.5 中，您必须在声明视图函数时使用命名闭包而不是函数语法。

```
def show( Long id ) { } 
```

相对

```
def show = {} 
```

后者是正确的。如果有人能解释为什么......

# c# - 在 WPF C# 中动态创建 Expression Blend 控件

> ID：14015617
> 
> 赞同：0
> 
> 时间：2012-12-23T23:45:20.477
> 
> 标签：c#, wpf, wpf-controls, expression-blend

我在 Expression Blend 4 中创建了一个按钮。我想在运行时动态创建此按钮的实例。

该按钮的代码如下：

```
 <Button Content="Button" HorizontalAlignment="Left" Height="139" Margin="46,107,0,0" VerticalAlignment="Top" Width="412" Grid.ColumnSpan="2">
        <Button.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="Black"/>
                <GradientStop Color="White" Offset="1"/>
            </LinearGradientBrush>
        </Button.Background>
    </Button> 
```

除了提供代码之外，您还可以在解释您正在做什么时添加注释，以便我可以了解一般原则。

我知道这是一个简单的问题，所以我一直在阅读以下地方：[Expression blend & WPF](https://stackoverflow.com/questions/5066945/expression-blend-wpf)，[有没有办法“提取”Expression Blend 的 WPF 控件？](https://stackoverflow.com/questions/5356024/is-there-a-way-to-extract-wpf-controls-of-expression-blend)和[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/ffa981b8-9bba-43a2-ab5e-8e59bc10fc0d/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/ffa981b8-9bba-43a2-ab5e-8e59bc10fc0d/)不幸的是，这些都没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:03:39.037

在您的 WPF 应用程序中，您应该有一个`App.xaml`文件，您可以在其中添加`Styles`要在整个 UI 中使用的文件。

例子：

```
<Application x:Class="WpfApplication8.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>

        <!--The style for all your buttons, setting the background property to your custom brush-->
        <Style TargetType="{x:Type Button}"> <!--Indicate that this style should be applied to Button type-->
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="Black"/>
                        <GradientStop Color="White" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>

    </Application.Resources>
</Application> 
```

或者，如果您不想应用到所有按钮，您可以给您`Style`的 a `Key`，这样您就可以应用到 UI 中的某些按钮

```
<Application x:Class="WpfApplication8.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>

        <!--Add a x:Key value so you can use on certain Buttons not all-->
        <Style x:Key="MyCustomStyle" TargetType="{x:Type Button}"> 
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="Black"/>
                        <GradientStop Color="White" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>

    </Application.Resources>
</Application> 
```

要`Style`在 a 上使用它`Button`，只需将绑定添加`Style`到`Button`

```
 <Button Style="{StaticResource MyCustomStyle}" /> 
```

这将适用`Style`于这个`Button`

或者，如果您真的想在后面的代码中执行此操作，只需将`Brush`您想要的添加到后台

```
 Button b = new Button
   {
       Background = new LinearGradientBrush(Colors.Black, Colors.White, new Point(0.5, 1), new Point(0.5, 0))
   }; 
```

将 xaml 转换为代码非常容易，因为 xaml 使用完全相同的属性名称，例如我在上面发布的代码刷：

```
new LinearGradientBrush(Colors.Black, Colors.White, new Point(0.5, 1), new Point(0.5, 0)) 
```

是 ....

```
Brush(firstColor,secondColor,StartPoint EndPoint) 
```

Xaml 只是访问按钮中的属性，它们在 C# 中都将具有相同的名称。

# jquery - google maps api3随着用户输入的变化而动态更新

> ID：14015619
> 
> 赞同：0
> 
> 时间：2012-12-23T23:45:39.413
> 
> 标签：jquery, dynamic, google-maps-api-3, input

将我的脚趾浸入谷歌地图 api (v3)。

首先，我能够使用使用 jquery 选择器播种的预填充值初始化地图，如下所示，一切都按预期工作。

我遇到了动态更新这些值的困难。我确定在某个地方有一个教程或一些示例，但是经过几天的搜索，我无法将其整理出来。

朝着正确的方向轻推 - 或者更好的是一个明确的例子，将不胜感激。对于初学者，我在根据对 mapZoomReturn 的更改更改缩放之后，但会将其应用于列出的所有 var。

非常感谢您的帮助。

```
<script>
//set up variables to contain our input values
var mapIdReturn = null;
var mapZoomReturn = null;
var mapWidthReturn = null;
var mapHeightReturn = null;
var mapTypeReturn = null;
var mapAddressReturn = null;
var mapAddressElement = null;
var mapMarkerReturn = null;
var mapInfoWindowReturn = null;
var infowindowPlace = null;
var mapMarkerImageReturn = null;
var mapKMLReturn = null;
var map = null;
var mapOptions = null;
var tr_gmaps = null;
var output = null;

jQuery(document).ready(function(jQuery) {
    // populate initial values
    mapIdReturn = jQuery('input[id=mapId]').val();
    mapZoomReturn = jQuery('select[id=mapZoom]').val();
    mapWidthReturn = jQuery('input[id=mapWidth]').val();
    mapHeightReturn = jQuery('input[id=mapHeight]').val();
    mapTypeReturn = jQuery('select[id=mapType]').val();
    mapAddressReturn = jQuery('input[id=mapAddress]').val();
    mapMarkerReturn = jQuery('select[id=mapMarker]').val();
    mapInfoWindowReturn = jQuery('textarea[id=mapInfoWindow]').val();
    mapMarkerImageReturn = jQuery('input[id=mapMarkerImage]').val();
    mapKMLReturn = jQuery('input[id=mapKML]').val();
});

function initialize() {
            // my start
    //mapZoomReturn = jQuery('select[id=mapZoom]').change(function(event){ jQuery(this).val(); });

    mapOptions = {
      center: new google.maps.LatLng(43.703793, -72.326187),
      zoom: parseFloat(mapZoomReturn),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var input = document.getElementById('mapAddress');
    var autocomplete = new google.maps.places.Autocomplete(input);
    var infowindow = new google.maps.InfoWindow();
    var marker = new google.maps.Marker({
      map: map
    });

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
      //setTypes([]);
      infowindow.close();
      marker.setVisible(false);
      input.className = '';
      var place = autocomplete.getPlace();
      if (!place.geometry) {
        // Inform the user that the place was not found and return.
        input.className = 'notfound';
        return;
      }
      // If the place has a geometry, then present it on a map.
      if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
      } else {
        map.setCenter(place.geometry.location);
        map.setZoom(parseFloat(mapZoomReturn));
      }
      var image = new google.maps.MarkerImage(
          place.icon,
          new google.maps.Size(71, 71),
          new google.maps.Point(0, 0),
          new google.maps.Point(17, 34),
          new google.maps.Size(35, 35));
      marker.setIcon(image);
      marker.setPosition(place.geometry.location);
      var icon = null;
      var address = null;
      var phone = null;
      var web = null;
      if (place.address_components) {
      //console.log(place.address_components);
        icon = place.icon;
        address = place.formatted_address;
        phone   = place.formatted_phone_number;
        web = place.website;
      }
      infowindowPlace = '<div class="marker inside">';
      infowindowPlace += (icon !== null && icon !== undefined) ? '<img src="' + icon + '" class="marker icon"/>' : '';
      infowindowPlace += '<strong>' + place.name + '</strong><br>';
      infowindowPlace += (address !== null && address !== undefined) ? address + '<br>' : '';
      infowindowPlace += (phone !== null && phone !== undefined) ? phone + '<br>' : '';
      infowindowPlace += (web !== null && web !== undefined) ? '<a href="' + web +'" class="" target="_blank">'+ web +'</a><br>' : '';
      infowindowPlace += (mapInfoWindowReturn !== null && mapInfoWindowReturn !==undefined) ? '<span class="marker extras">' + mapInfoWindowReturn + '</span>' : '';
      infowindowPlace +=  '</div>';
      infowindowPlace += '<a href="' + place.url +'" class="marker jumplink" target="_blank">external map</a>';
      infowindow.setContent(infowindowPlace);
      infowindow.open(map, marker);
    });
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:03:51.493

我终于找到了答案——将以下 addDomListener 添加到初始化函数就可以了。`change`是对下拉列表最有用的事件。

```
 google.maps.event.addDomListener(document.getElementById('mapZoom'),
        'change', function() {
        var mapZoomReturn = parseInt(jQuery('select[id=mapZoom]').val(), 10);
        var mapCurrCenter = map.getCenter(); // center on present location
        map.setZoom(mapZoomReturn);
        map.setCenter(mapCurrCenter);
    } 
```

我的下一个任务是在用户使用地图 gui 更改地图缩放时更新选项选择 DOM 元素。. . .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:55:27.433

`mapZoomReturn`需要是一个数字。`val()`将返回一个字符串，因此您可以更改为：

```
mapZoomReturn = parseInt( jQuery('#mapZoom').val(), 10); 
```

请注意将选择器更改为更有效的 ID 选择器。

您可能还需要将其他值更改为数字。您可以在 API 中找到所有地图方法：

[https://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

您可能还会发现 jQuery gmaps3 插件很有帮助。它是地图 API 的绝佳包装器

[http://gmap3.net/](http://gmap3.net/)

# c++ - Vs2012 编译器错误 C2143：缺失；前 *

> ID：14015620
> 
> 赞同：2
> 
> 时间：2012-12-23T23:45:42.260
> 
> 标签：c++

幸运的是，这可能是很明显的事情从我身边溜走了，但是我已经在 C2143 上苦苦挣扎了很长一段时间，我很困惑。

```
game.h(21): error C2143: syntax error : missing ';' before '*'
game.h(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

游戏.h

```
#ifndef GAME_H_
#define GAME_H_

#include <irrlicht.h>
using namespace irr;
using namespace irr::core;
using namespace irr::scene;
using namespace irr::video;
using namespace irr::io;
using namespace irr::gui;

#include <iostream>

#include "CInput.h"
#include "CAssets.h"
using namespace rtsirr;

IrrlichtDevice *device = 0;
IVideoDriver *driver = 0;
ISceneManager *manager = 0;
CAssets *assets = 0; // Line 21, error here

#endif 
```

CAssets.h

```
#ifndef ASSETS_H_
#define ASSETS_H_

#include "Game.h"

namespace rtsirr {

class CAssets
{
public:
    CAssets();
    virtual ~CAssets();
    ITexture* getTexture(stringw name);
    IMesh* getMesh(stringw name);
    IAnimatedMesh* getAnimatedMesh(stringw name);

    void load();

private:
    map<stringw, ITexture *> *textures;
    map<stringw, IMesh *> *meshes;
    map<stringw, IAnimatedMesh *> *animatedMeshes;
};

}

#endif 
```

似乎 CAssets 没有被识别为有效类型，但我不知道为什么。是什么导致了这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T23:48:04.660

您的*include*中有一个*循环依赖*项。包括在定义之前又包括在内。预处理器的结果会有所不同，具体取决于包含的顺序。*`Game.h``CAssets.h``Game.h``CAssets`*

 *从您的示例代码看来，除了类型之外，似乎`Game.h`不需要了解太多。`CAssets`您可以将包含替换为`CAssets.h`前向声明：

```
class CAssets; 
```

你甚至可以提供一个`CAssets_fwd.h`只做那个的。否则，您将需要打破这两个标头之间的*循环依赖关系。**

# jquery - 奇怪的jQuery症状

> ID：14015621
> 
> 赞同：2
> 
> 时间：2012-12-23T23:45:50.027
> 
> 标签：jquery, jquery-animate, slider

我正在使用 jquery 为导航菜单设置动画，并且我还在网站上使用 jquery 滑块（链接如下）。如果在滑块过渡时滚动导航菜单上的第一个 li，它会在徽标上产生非常奇怪的抖动效果。它仅在滑块过渡时发生。两个脚本同时执行会不会有问题？我是 jquery/javascript 的新手，如果这是一个愚蠢的问题，请原谅我。关于如何解决它的任何想法？

[这是网站。](http://s423839726.onlinehome.us/franklinvineyard/index.php)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:04:15.207

当页面为菜单设置动画时，它会非常巧妙地改变行高。您拥有的徽标的高度与这些细微的变化相关联，因此随着这些变化的发生，您会看到它的潮起潮落。与之相关的代码在 css 中：

```
.logo
{
 /* ... */
 background-size: 100%;
} 
```

删除此`background-size`样式将解决此问题。

# haskell - 万一 Haskell 出错

> ID：14015622
> 
> 赞同：1
> 
> 时间：2012-12-23T23:46:10.583
> 
> 标签：haskell, case

我必须做一个软件来识别 C 中的令牌。我有这个代码：

```
*main = do
   x <- readFile "progc.c"
   let resultado = lexCmm X
   print resultado
lexCmm :: String -> [Tok]
  lexCmm X = case X of
    c:cs   | isSpace c     -> lexCmm cs
    c:cs   | isAlpha c     -> getId s
    c:cs   | isDigit c     -> getInt s
    c:d:cs | isSymb [c,d]  -> TS [c,d] : lexCmm cs
    c:cs   | isSymb [c]    -> TS [c]   : lexCmm cs
    _                      -> []  
   where
    getId s  = lx i : lexCmm cs where (i,cs) = span isIdChar s
    getInt s = TI (read i) : lexCmm cs where (i,cs) = span isDigit s
    isIdChar c = isAlpha c || isDigit c
    lx i = if isReservedWord i then TS i else TI i

  isSymb s = elem s $ words "++ -- == <= >= ++ { } = , ; + * - ( ) < >"

  isReservedWord w = elem w $ words "else if int main printInt return while"* 
```

错误是：

```
file:{Hugs}\prog.hs:7 - Syntax error in input (unexpected `=') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T00:01:54.673

除了上面提到`X`的变量名使用大写的错误之外，你还有一个缩进错误，定义方程`lexCmm`是缩进的，但它应该从最左边的列开始。

如果您取消缩进该行

```
lexCmm :: String -> [Tok]
lexCmm x = case x of 
```

以及 and 的定义`isSymb`，`isReservedWord`你会得到一些其他的错误。

表达式的替代项`case`必须比`case`关键字缩进更多。

在

```
c:cs   | isAlpha c     -> getId s
c:cs   | isDigit c     -> getInt s 
```

您使用的实体`s`不在范围内（因此您可能应该将 to 的参数更改`lexCmm`为`s`，或将这两个`s`更改为`x`.

```
getInt s = TI (read i) : lexCmm cs where (i,cs) = span isDigit s 
```

强烈建议 的构造函数`TI`接受`Tok`一个`Int`参数，但是

```
lx i = if isReservedWord i then TS i else TI i 
```

尝试将其应用于`String`. 你可能想要`TI (read i)`那里。

下面的代码，包含一个`Tok`类型的快速模型编译：

```
module Toks where

import Data.Char

data Tok
    = TS String
    | TI Int
      deriving Show

main = do
   x <- readFile "progc.c"
   let resultado = lexCmm x
   print resultado

lexCmm :: String -> [Tok]
lexCmm s = case s of       -- No indentation for function definition
            c:cs   | isSpace c     -> lexCmm cs    -- alternatives indented further
            c:cs   | isAlpha c     -> getId s      -- than the `case', all to the same level
            c:cs   | isDigit c     -> getInt s
            c:d:cs | isSymb [c,d]  -> TS [c,d] : lexCmm cs
            c:cs   | isSymb [c]    -> TS [c]   : lexCmm cs
            _                      -> []  
      where  -- `where' indented less than the `case', so that it scopes over all alternatives
        getId s  = lx i : lexCmm cs where (i,cs) = span isIdChar s
        getInt s = TI (read i) : lexCmm cs where (i,cs) = span isDigit s
        isIdChar c = isAlpha c || isDigit c
        lx i = if isReservedWord i then TS i else TI (read i)

isSymb s = elem s $ words "++ -- == <= >= ++ { } = , ; + * - ( ) < >"

isReservedWord w = elem w $ words "else if int main printInt return while" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T23:52:26.510

Haskell 变量必须以小写字母开头。以大写字母开头的标识符被解释为类型。

大写`X`可能会导致您出现问题：

```
 lexCmm X = case X of 
```

在这里你混合了小写和大写`x`：

```
 x <- readFile "progc.c"
  let resultado = lexCmm X 
```

用小写替换所有这些`x`可能会解决您的问题。

# installation - 如何安全地删除旧的 InnoSetup 安装？

> ID：14015627
> 
> 赞同：1
> 
> 时间：2012-12-23T23:47:34.030
> 
> 标签：installation, inno-setup, uninstallation

我将 InnoSetup 5.5.1 (a) 用于我的 Delphi 6 软件安装。一位用户刚刚告诉我，如果没有手动卸载，旧的卸载条目会堆积在控制面板删除程序列表中。我正在考虑更改我的安装以自动删除旧条目，但我不想删除有效的旧条目。一些用户喜欢保留一两个旧版本，以防他们不喜欢更高版本或担心更高版本会破坏某些东西。

为了清楚起见，我专门指的是用户通常接受默认安装目录，覆盖现有版本的典型情况。但是，除了一些用户可能将一个或多个版本安装到不同的目录只是为了保留它们，而大多数情况下选择覆盖。我发现这个关于删除旧版本的帖子：

[InnoSetup：如何自动卸载以前安装的版本？](https://stackoverflow.com/questions/2000296/innosetup-how-to-automatically-uninstall-previous-installed-version?rq=1)

但是没有看到任何关于知道如何检测哪些旧版本是多余的。

因此，在安装过程中，如何自动从已安装程序列表中自动删除旧的卸载条目，而不删除用户实际想要保留的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:13:57.833

只要您`AppId`在应用程序的不同版本之间保持相同，无论用户运行安装程序多少次，都只会有一个添加/删除条目。这是典型应用程序的常规和推荐设计，其中用户只有一个副本并希望使其保持最新。

但是，如果用户在以后的一个或多个安装中选择了备用安装位置，那么旧位置可能会“孤立”——运行卸载将删除较新的副本，但将较旧的副本留在后面，没有添加/删除条目。（仍然可以通过手动运行卸载程序来卸载它。）通常建议通过在您的`[Setup]`部分中包含这些选项来避免这种情况：

```
DisableDirPage=auto
DisableProgramGroupPage=auto 
```

使用这些选项将使 Inno 在升级安装时跳过询问这些问题，这有助于防止用户意外制作孤立副本。（如果用户确实想要移动安装，他们仍然可以通过先卸载来完成。）

请注意，我已经稍微回避了您的问题，因为写下来没有意义-如果有多个副本，则无法自动确定哪些是“多余的”，因为这纯粹是对部分的判断的用户。我在这里试图解释的是，您的设计应该旨在阻止这种意外发生。

# arrays - F# - 定义对象数组

> ID：14015630
> 
> 赞同：2
> 
> 时间：2012-12-23T23:48:04.193
> 
> 标签：arrays, f#

我正在尝试为我正在做的项目创建 som 示例数据。为此，我需要一个简单的对象结构，其中对象包含一组对象。在这种情况下，可以保存评论的评论家。代码如下所示：

```
type Review = 
  { MovieName: string;
    Rating: double }

type Critic = 
  { Name: string;
    Ratings: Review[] }

let theReviews = [{ MovieName = "First Movie"; Rating = 5.5 }; { MovieName = "Second Movie"; Rating = 7.5 };]

let theCritic = { Name = "The Critic"; Ratings = [{ MovieName = "First Movie"; Rating = 5.5 }; { MovieName = "Second Movie"; Rating = 7.5 };]  } 
```

“评论”行工作正常，但我无法让“评论家”行工作。我得到的错误是：

> 错误 1 ​​此表达式的类型应为 Review []
> ，但此处的类型为 'a list

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:55:01.697

数组文字使用`[| ... |]`而不是`[ ... ]`列表文字 - 你需要类似的东西

```
let theCritic = { Name = "The Critic"; Ratings = [|{ MovieName = "First Movie"; Rating = 5.5 }; { MovieName = "Second Movie"; Rating = 7.5 };|]  } 
```

这解释了错误 - 您使用了列表文字而不是数组文字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T06:13:21.580

实际上，您在 Review 定义中使用数组，在实现中使用列表。这些是真正不同的野兽，列表是不可变的（更好的并发性）并且支持模式匹配，而数组是可变的。我建议您继续使用列表，除了长集合（真的很长）

如果您希望继续使用列表，您可以这样做：

```
 type Review = 
  { MovieName: string;
   Rating: double }

 type Critic = 
   { Name: string;
    Ratings: Review list } 
```

在这里，您有一个关于列表和数组之间差异的更详细列表：

[http://en.wikibooks.org/wiki/F_Sharp_Programming/Arrays#Differences_Between_Arrays_and_Lists](http://en.wikibooks.org/wiki/F_Sharp_Programming/Arrays#Differences_Between_Arrays_and_Lists) ...

# c++ - C++：向量边界

> ID：14015632
> 
> 赞同：16
> 
> 时间：2012-12-23T23:48:07.850
> 
> 标签：c++, gcc, vector, mingw, bounds

我来自 Java，目前正在学习 C++。我正在使用 Stroustrup 的编程原则和使用 C++ 的实践。我现在正在使用向量。在第 117 页，他说访问向量的不存在元素将导致运行时错误（在 Java 中也是如此，索引超出范围）。我正在使用 MinGW 编译器，当我编译并运行此代码时：

```
#include <iostream>
#include <cstdio>
#include <vector>

int main() 
{ 
    std::vector<int> v(6);
    v[8] = 10;
    std::cout << v[8];
    return 0;
} 
```

它给了我输出 10。更有趣的是，如果我不修改不存在的向量元素（我只是打印它期望运行时错误或至少是默认值），它会打印一些大整数。那么...... Stroustrup 错了，还是 GCC 有一些奇怪的 C++ 编译方式？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-23T23:51:53.810

书有点模糊。它不是“运行时错误”，而是在运行时出现的*未定义行为*。这意味着*任何事情都可能发生*。但是错误完全出在*您身上*，而不是程序执行上，事实上，甚至谈论具有未定义行为的程序的执行也是不可能和不明智的。

C++ 中没有任何东西可以保护您免受编程错误的影响，这与 Java 完全不同。

* * *

正如@sftrabbit 所说，`std::vector`它有一个替代接口，[`.at()`](http://en.cppreference.com/w/cpp/container/vector/at)它总是给出一个正确的程序（尽管它可能会抛出异常），因此它是一个可以推理的程序。

* * *

让我用一个例子来重复这一点，因为我相信这是 C++ 的一个重要的基本方面。假设我们正在从用户那里读取一个整数：

```
int read_int()
{
    std::cout << "Please enter a number: ";
    int n;
    return (std::cin >> n) ? n : 18;
} 
```

现在考虑以下三个程序：

**危险的一点：**这个程序的正确性取决于用户输入！它不一定是不*正确*的，但它是*不安全*的（到了我称之为损坏的地步）。

```
int main()
{
    int n = read_int();
    int k = read_int();
    std::vector<int> v(n);
    return v[k];
} 
```

**无条件正确：**无论用户输入什么，我们都知道这个程序的行为。

```
int main() try
{
    int n = read_int();
    int k = read_int();
    std::vector<int> v(n);
    return v.at(k);
}
catch (...)
{
    return 0;
} 
```

**理智的人：**上面的版本`.at()`很尴尬。最好检查并提供反馈。因为我们执行动态检查，所以实际上保证了未检查的向量访问是没问题的。

```
int main()
{
    int n = read_int();

    if (n <= 0) { std::cout << "Bad container size!\n"; return 0; }

    int k = read_int();

    if (k < 0 || k >= n)  { std::cout << "Bad index!\n"; return 0; }

    std::vector<int> v(n);
    return v[k];
} 
```

（我们忽略了向量构造可能引发自身异常的可能性。）

寓意是，C++ 中的许多操作都是不安全的，并且只能在条件下正确，但程序员希望您提前进行必要的检查。语言不会为你做这件事，所以你不需要为此付费，但你必须记住去做。这个想法是无论如何您都需要处理错误情况，因此与其在库或语言级别执行昂贵的、非特定的操作，责任留给了程序员，他们可以更好地集成检查进入无论如何都需要编写的代码。

如果我想变得有趣，我会将这种方法与 Python 进行对比，Python 允许您编写非常*短*且*正确的*程序，而根本不需要任何用户编写的错误处理。不利的一面是，任何尝试使用与程序员的意图*略有*不同的此类程序的任何尝试都会给您留下非特定的、难以阅读的异常和堆栈跟踪，并且几乎没有关于您应该做得更好的指导。您不必编写任何错误处理程序，而且通常最终不会编写任何错误处理程序。（我无法将 C++ 与 Java 完全对比，因为虽然 Java 通常是*安全*的，但我还没有看到一个*简短*的Java 程序。）</rantmode>

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-23T23:53:21.157

C 和 C++ 并不总是进行边界检查。它可能会导致运行时错误。而且，如果您的数字超出了足够多，例如 10000 左右，那么几乎肯定会导致问题。

你也可以使用vector.at(10)，它肯定会给你一个例外。参见： [http](http://www.cplusplus.com/reference/vector/vector/at/) ://www.cplusplus.com/reference/vector/vector/at/ 对比： [http ://www.cplusplus.com/reference/vector/vector/operator%5B%5D/](http://www.cplusplus.com/reference/vector/vector/operator%5B%5D/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-02-02T12:20:59.773

这是@Evgeny Sergeev 的宝贵评论，我将其推广为答案：

对于 GCC，您可以 -D_GLIBCXX_DEBUG 将标准容器替换为安全实现。最近，这似乎也适用于 std::array。更多信息：gcc.gnu.org/onlinedocs/libstdc++/manual/debug_mode.html

我要补充一点，也可以通过使用 gnu_debug:: 命名空间前缀而不是 std:: 来捆绑单独的“安全”版本的向量和其他实用程序类。

换句话说，不要重新发明轮子，数组检查至少可以使用 GCC。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-29T14:35:31.383

我希望vector的“operator[]”会像“at()”那样检查边界，因为我没有那么小心。:-)

一种方法是继承向量类并覆盖 operator[] 以调用 at()，以便可以使用更具可读性的“[]”，而无需将所有“[]”替换为“at()”。您还可以将继承向量（例如：safer_vector）定义为法线向量。代码将是这样的（在 C++11 中，Xcode 5 的 llvm3.5 中）。

```
#include <vector>

using namespace std;

template <class _Tp, class _Allocator = allocator<_Tp> >
class safer_vector:public vector<_Tp, _Allocator>{
private:
    typedef __vector_base<_Tp, _Allocator>           __base;
public:
    typedef _Tp                                      value_type;
    typedef _Allocator                               allocator_type;
    typedef typename __base::reference               reference;
    typedef typename __base::const_reference         const_reference;
    typedef typename __base::size_type               size_type;
public:

    reference operator[](size_type __n){
        return this->at(__n);
    };

    safer_vector(_Tp val):vector<_Tp, _Allocator>(val){;};
    safer_vector(_Tp val, const_reference __x):vector<_Tp, _Allocator>(val,__x){;};
    safer_vector(initializer_list<value_type> __il):vector<_Tp, _Allocator>(__il){;}
    template <class _Iterator>
    safer_vector(_Iterator __first, _Iterator __last):vector<_Tp,_Allocator>(__first, __last){;};
    // If C++11 Constructor inheritence is supported
    // using vector<_Tp, _Allocator>::vector;
};
#define safer_vector vector 
```

# spring - DispatcherServlet、Resolver 和 Controller 是如何交互的？

> ID：14015642
> 
> 赞同：17
> 
> 时间：2012-12-23T23:49:48.570
> 
> 标签：spring, jsp, spring-mvc

好的，所以我遇到了相当常见的错误：

`WARNING: No mapping found for HTTP request with URI [/WEB-INF/jsp/index.jsp] in DispatcherServlet with name 'app'`

我正在查看现有的答案，但我还没有看到关于组件如何交互的非常好的解释。鉴于我无法根据现有答案解决我的问题，我希望有人可以详细解释`DispatcherServlet`and`Resolver`的功能。

在Eclipse中开发，我有以下结构：

```
/src/com/whiuk/philip/web/controller/IndexController.java
/WebContent
/WebContent/WEB-INF
/WebContent/WEB-INF/web.xml
/WebContent/WEB-INF/app-servlet.xml
/WebContent/WEB-INF/jsp/index.jsp 
```

Eclipse Deployment Assembly 意味着它的部署方式如下：

```
/src -> WEB-INF/classes
/WebContent -> /
/ivy.xml[*] -> WEB-INF/lib 
```

我有一个**web.xml**文件，它定义了一个`DispatcherServlet`和一个到所有文件的映射（`/*`）

```
<servlet>
    <servlet-name>app</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>app</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

我有一个**app-servlet.xml**文件，它扫描包并定义一个`InternalResourceViewResolver`：

```
<context:component-scan base-package="com.whiuk.philip.web" />
<mvc:annotation-driven />
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

我有一个`IndexController`用于索引的 RequestMapping：

```
 @Controller
 public class IndexController {
      @RequestMapping(value = "/index", method = RequestMethod.GET)
      public ModelAndView index() {
             return new ModelAndView();
      }
 } 
```

日志显示这是已注册的：

```
org.springframework.web.servlet.handler.AbstractHandlerMethodMapping registerHandlerMethod
INFO: Mapped "{[/index],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}"
onto public org.springframework.web.servlet.ModelAndView 
com.whiuk.philip.web.controller.IndexController.index() 
```

最后我有一个**index.jsp**文件。

有人可以解释一下导致顶部显示的错误的错误配置是什么，如果可能的话，请提供一个关于 DispatcherServlet、Resolvers 的目的以及它们如何馈入 Controller 的句子。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-24T00:39:34.407

我将尝试解释 Spring Web MVC 应用程序中请求的“流程”。

向您的应用程序发送请求时，会发生以下情况：

*   请求到达您的服务器（例如 Tomcat）。根据 url 中的上下文路径，服务器决定请求属于哪个应用程序。
*   根据应用程序的 web.xml 文件中的 url 和 servlet 映射，服务器知道哪个 servlet 应该处理请求。
*   请求被传递给可以修改或拒绝请求的[servlet 过滤器链](https://stackoverflow.com/questions/2725102/how-to-use-a-servlet-filter-in-java-to-change-an-incoming-servlet-request-url)
*   servlet 控制请求。对于您的 Spring 应用程序，spring Dispatcherservlet 接收请求。现在春天开始了
*   请求由[mvc 拦截器](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor) `preHandle`方法处理
*   请求根据 url 映射到控制器。相应的控制器方法将被调用。
*   您的控制器正在处理请求。控制器中可以返回许多不同的响应（jsp、pdf、json、重定向等）。现在我假设你想渲染一个简单的 jsp 视图。控制器的结果是两件事：一个模型和一个视图。该模型是一个地图，其中包含您稍后要在视图中访问的数据。这个阶段的视图大部分时间是一个包含视图名称的简单字符串。
*   注册的 springs mvc 拦截器可以使用该`postHandle`方法再次启动（例如用于修改模型）
*   控制器的“视图”结果使用`ViewResolver`. 根据 ViewResolver，结果可以是 jsp 页面、[图块视图](http://tiles.apache.org/)、[百里香模板](http://www.thymeleaf.org/)或许多其他“视图”。在您的情况下，`ViewResolver`将视图名称（例如“myPage”）解析为 jsp 文件（例如`/WEB-INF/jsp/myPage.jsp`）
*   使用控制器返回的模型数据呈现视图
*   带有渲染视图的响应将再次传递给 mvc 拦截器（`afterCompletion`方法）
*   响应离开调度程序 servlet。春天的土地到此结束。
*   响应再次通过 servlet 过滤器
*   响应被发送回客户端

如果我不是 100% 正确或者我遗漏了什么，请随时纠正我 :-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-24T00:26:19.797

基本上发生的事情是，由于您将 Spring 的 DispatcherServlet 映射到`/*`，它往往会为每个请求调用（这没关系），但不幸的是，即使请求被分派到 JSP 页面（`/WEB-INF/jsp/index.jsp`）而不是容器默认值，它也会被调用servlet 被调用。

我知道的修复如下：

将其映射到默认的 servlet 路径`/`：

```
<servlet-mapping>
    <servlet-name>app</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

您将在上面看到的一个问题是，不幸的是，您的 webapp 根目录下的资源将由不知道如何处理它的 DispatcherServlet 处理，解决方法是通过[这种方式注册一个 default-servlet-handler](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-default-servlet-handler)：

```
<mvc:default-servlet-handler /> 
```

# algorithm - 周六早餐麦片中的 FrogSort 分析是否正确？

> ID：14015647
> 
> 赞同：23
> 
> 时间：2012-12-23T23:50:30.547
> 
> 标签：algorithm, sorting, complexity-theory

在**[最近的周六早餐谷物漫画](http://www.smbc-comics.com/index.php?db=comics&id=2831#comic)**中，作者描述了一种称为 Frog Sort 的算法，用于对自然数列表进行排序。该算法在漫画中有所描述，但为简单起见，我在这里重印了它：

1.  对于每个要排序的自然数，制作一个盒子，里面有那么多苍蝇。
2.  在每个盒子里放一只青蛙。
3.  虽然并不是所有的青蛙都跳出它们的盒子：
    1.  等待一只青蛙跳出它的盒子。
    2.  写下最初放在盒子里的苍蝇数量。
4.  生成的数字序列是原始数字列表，但按排序顺序。

该算法假设所有青蛙以相同的速度吃苍蝇。结果，第一个从盒子里跳出来的青蛙将是每只青蛙数量最少的青蛙，第二只青蛙吃的苍蝇数量第二少，以此类推。

在漫画的中间，一位老师问学生“最大步数是多少？”我将其解释为“该算法终止所需的最大步数是多少？” 也就是说，算法的运行时间是多少？然后学生回答“原木[青蛙]（盒子）”。

这是对该算法运行时间的准确分析吗？还是作者错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T02:13:36.533

这种运行时分析显然是错误的；我们可以得到一个微不足道的 Ω 运行时间`max(n_elements, largest_element)`（因为我们已经制作了`n_elements`盒子，然后每个盒子的清空时间与其内容的大小一样长）。一个花费不到*n*时间的排序算法会......非常令人惊讶。

如果你想在互联网的某个地方找到更多的分析，这个算法相当于 sleep-sort。如果你不熟悉那个荒谬的算法，这里是 bash：

```
#!/bin/bash

function sort() {
    for num in "$@" ; do
        (
        sleep $num
        echo $num
        ) &
    done
    wait
}

sort 6 1 3 4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T23:50:30.547

我很确定漫画的作者是错的。下面是对该算法的更正式的分析。

首先，我们需要为青蛙如何吃苍蝇制定一些基本规则。我假设所有的青蛙都能以恒定的速率 r 吃掉苍蝇。也就是说，一只青蛙吃掉一只苍蝇需要 r 秒，一只青蛙吃十只苍蝇需要 10r 秒，等等。接下来，让我们做一个（合理的）假设，所有的青蛙都在并行吃东西。我们还假设一只青蛙从一个空盒子里跳出来需要 j 时间。

我们还需要考虑设置时间。假设我们手头有无限数量的苍蝇、青蛙和盒子，假设得到一个盒子需要 b 时间，将一只苍蝇放入盒子需要 y 时间。最后，我们假设将一只青蛙放入一个盒子需要 f 时间。为简单起见，我们假设青蛙在我们明确指示它们之前不会开始吃苍蝇，因此在其他青蛙之前放入盒子中的青蛙不会抢占先机。

最后一个细节——假设写下一个数字需要 w 时间。

在这种情况下，该算法的运行时间如下所示。假设我们要排序的数字列表是 x [1] , x [2] , ..., x [n]。在这种情况下，设置所有框所需的时间为 n(b + f) + y(Σx [i] )。这样做的原因是我们需要得到 n 个盒子并将一只青蛙放入每个盒子（因此是第一项），再加上每只苍蝇的 y 单位时间（因此是第二项）。

在算法的过程中，当青蛙跳出它的盒子时，我们需要准确地写下每个数字一次。这意味着在整个算法中，我们将做 nw 工作来写下排序的序列。

最后，我们必须考虑所有青蛙需要多长时间才能完成。由于所有的青蛙都在同时吃东西，所以我们只需要关心吃苍蝇最多的青蛙。这只青蛙将有 x [max]苍蝇要吃，其中 x [max]是输入列表中的最大数量。因此，青蛙吃东西所花费的时间由 rx [max]给出。考虑到最后一只青蛙的跳跃，所有并行工作的青蛙将在 rx [max] + j 时间内共同完成。

这意味着算法的总时间由下式给出

> n(f + b) + yΣx [i] + nw + rx [max] + j。

如果我们现在假设“一个工作单元”足以完成任何单个操作（让青蛙吃掉一只苍蝇，或者从盒子里跳出来，或者把一只青蛙放进盒子里等等），那么总的所需时间最多

> n + Σ(x [i] ) + x[最大值]+ 1

注意到 x [max] ≤ Σx [i]，我们得到该算法的整体运行时间为**Θ(n + Σx [i] )。**换句话说，运行时间与要排序的数字数量和要排序的数字的总大小成正比。

注意这个runtime里面没有任何对数，所以我们马上可以断定作者的runtime分析是不正确的。

最后，请注意这是一个非常糟糕的排序算法。[计数排序](http://en.wikipedia.org/wiki/Counting_sort)算法可以在O(n + U) 时间内对 n 个自然数进行排序，其中 U 是要排序的最大值，在渐近上优于 FrogSort。[基数排序](http://en.wikipedia.org/wiki/Radix_sort)算法可以在 O(n lg U) 时间内完成此操作，这对于较大的 U 值更好。再一次，这两种算法都需要复杂的机器，这在漫画描述的设置中可能不存在。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:47:59.730

这不是一个答案，但扎克本人对此很感兴趣。它是 cbrain 深奥编程语言[http://esolangs.org/wiki/Cbrain](http://esolangs.org/wiki/Cbrain)中复活节彩蛋的一部分。使用 OpenCOBOL 编译的 bf 衍生产品。为了摆脱困境，条件价值公平可以设置为 2 而不是 1。 COBOL 中的 frogSort。

```
 *> ********************************************************
      *>  frogSort, called for help with 10-94, request for count
      *> ********************************************************
       identification division.
       program-id. frogsort.
       data division.
       working-storage section.
       01 opinion          usage binary-long.
       01 shared-value     pic 99.
          88 fair          value 1.
       01 caveman-count    pic x(12) value "[-]+++++++++".
       01 spacer           pic x(10) value spaces.

       linkage section.
       01 jars.
          05 flies        pic 9 occurs 21 times.

      *> ********************************************************
       procedure division using jars.
       start-here.
       move function length(jars) to shared-value
       display "Grog sort jars.  frogSort" end-display
       display "http://www.smbc-comics.com/?id=2831" end-display
       .

       forkyourself.
           call "fork" returning opinion end-call
           if opinion is zero then
               subtract 1 from shared-value
               if not fair then go forkyourself.
       .

       call "sleep" using by value flies(shared-value) end-call
       display
           "Jar: " function char(shared-value + 65) " reporting "
           caveman-count(1 : flies(shared-value) + 3) " flies,"
           spacer(1 : 10 - flies(shared-value))
           "that would be " flies(shared-value) " to you, futureman."
       end-display
       call "wait" using by value 0 end-call

       stop run returning 107.
       end program frogsort. 
```

用 CALL "frogsort" USING ""012345678901234567890" END-CALL 踢复活节彩蛋

```
$ ./cbrainrun 
10-12 Welcome to cbrain v0.42
cb: 1094
cb: help
Grog sort jars.  frogSort
http://www.smbc-comics.com/?id=2831
Jar: U reporting [-] flies,          that would be 0 to you, futureman.
Jar: K reporting [-] flies,          that would be 0 to you, futureman.
Jar: A reporting [-] flies,          that would be 0 to you, futureman.
Jar: L reporting [-]+ flies,         that would be 1 to you, futureman.
Jar: B reporting [-]+ flies,         that would be 1 to you, futureman.
Jar: M reporting [-]++ flies,        that would be 2 to you, futureman.
Jar: C reporting [-]++ flies,        that would be 2 to you, futureman.
Jar: N reporting [-]+++ flies,       that would be 3 to you, futureman.
Jar: D reporting [-]+++ flies,       that would be 3 to you, futureman.
Jar: O reporting [-]++++ flies,      that would be 4 to you, futureman.
Jar: E reporting [-]++++ flies,      that would be 4 to you, futureman.
Jar: P reporting [-]+++++ flies,     that would be 5 to you, futureman.
Jar: F reporting [-]+++++ flies,     that would be 5 to you, futureman.
Jar: Q reporting [-]++++++ flies,    that would be 6 to you, futureman.
Jar: G reporting [-]++++++ flies,    that would be 6 to you, futureman.
Jar: R reporting [-]+++++++ flies,   that would be 7 to you, futureman.
Jar: H reporting [-]+++++++ flies,   that would be 7 to you, futureman.
Jar: S reporting [-]++++++++ flies,  that would be 8 to you, futureman.
Jar: I reporting [-]++++++++ flies,  that would be 8 to you, futureman.
Jar: T reporting [-]+++++++++ flies, that would be 9 to you, futureman.
Jar: J reporting [-]+++++++++ flies, that would be 9 to you, futureman. 
```

# v8 - 如何让v8生成日志文件？

> ID：14015654
> 
> 赞同：1
> 
> 时间：2012-12-23T23:51:05.133
> 
> 标签：v8, chromium

我已经用命令编译了 chromium `make chrome BUILDTYPE=Release`。现在我想让 v8 生成一个日志文件，我发现[这个](http://code.google.com/p/v8/wiki/V8Profiler#Command_Line)页面建议

```
out/ia32.release/d8 --prof script.js 
```

我的输出文件夹中有一个文件夹“Release”，但在那个文件夹中我没有​​一个名为“ia32.release”或“d8”的文件夹。

我应该怎么办 ？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:40:08.507

`d8`是一个独立的 V8 调试 shell。由于您构建了 Chromium，因此您可能想要分析在 Chromium 中运行的应用程序。在这种情况下，您不需要`d8`，因为您可以简单地使用`--js-flags`命令行选项，如[Profiling Chromium With V8](http://code.google.com/p/v8/wiki/ProfilingChromiumWithV8)和[Run Chromium with flags](http://www.chromium.org/developers/how-tos/run-chromium-with-flags)中所述。

# java - 文件不会在编辑器之外加载

> ID：14015664
> 
> 赞同：1
> 
> 时间：2012-12-23T23:53:04.177
> 
> 标签：java

我应该怎么做才能获得位于我的项目中的图像的路径，以便它在编程时以及在我构建它之后工作？这些文件是我将编译到我的项目中的文件。

我试过这个：

```
public String getProjectLocation(){
    File directory = new File("");
    return directory.getAbsolutePath();
} 
```

然后像这样使用它：

```
public String projectLoc = this.getProjectLocation();
this.setBackground(projectLoc + "/src/media/images/ladscape1.jpg"); 
```

但是一旦我构建项目并在我的编辑器之外运行它，它就不再工作了，它不再加载正确的图像。

# android - 在片段的 OnCreateView 中调试

> ID：14015668
> 
> 赞同：-1
> 
> 时间：2012-12-23T23:53:39.990
> 
> 标签：android, fragment

> 对不起，这是我的错误，项目中有 2 个相同的文件具有不同的包名。我在调试错误的课程。抱歉耽误您的时间

下面的代码工作很清楚，我可以看到 MyListFragment 在活动中。但是当我尝试将断点放入 onCreateView 时，我无法调试。

我尝试了 println 和 log 但没有任何效果。

你有什么主意吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:08:43.057

代替

```
ft.add(...) 
```

使用`FragementTransaction's` [`replace()`](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment%29)方法：

```
ft.replace(R.id.ui_container, new MyListFragment()); 
```

文档状态：

> [replace() 替换] 添加到容器中的现有片段。这本质上与为所有当前添加的片段调用 remove(Fragment) 相同，这些片段使用相同的 containerViewId 添加，然后使用此处给出的相同参数调用 add(int, Fragment, String)。

所以每次你`Activity`被重新创建时，它都会添加一个新`MyListFragment`实例并被`onCreateView()`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:54:01.823

是我的错，调试onCreateview没有问题。很抱歉占用您的时间。

# php - 是否可以伪造 PHP 会话 ID？

> ID：14015669
> 
> 赞同：5
> 
> 时间：2012-12-23T23:53:54.577
> 
> 标签：php, session

如果页面检查是否存在 PHP 会话：

```
if (isset($_SESSION['secret'])) {...grant access to EVERYTHING!!!} 
```

`$_SESSION['secret']`在我无法访问页面后端代码的情况下，是否有可能/如何在我的机器上生成？我正试图侵入国际空间站...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:56:32.913

你不能。或者，你*可以*`$_SESSION['secret']`在*你的*机器上生成一个，但它是一个不同的值，你不能简单地将它放到 ISS 上。`$_SESSION`除非脚本中存在允许您的错误或安全漏洞，否则您无法直接更改超全局。

# tomcat - tomcat在eclipse中找不到index.jsp

> ID：14015673
> 
> 赞同：1
> 
> 时间：2012-12-23T23:55:20.167
> 
> 标签：tomcat

我对 eclipse-tomcat-maven 非常陌生，并且在配置它们时遇到了一些严重的问题。

我从 eclipse->new project->maven project-> mvn-archerype-webapp 创建了一个简单的 webapp，带有一个简单的 Hello world，但是当我选择我的项目并在服务器上运行它时，我收到以下消息： HTTP Status 404 The请求的资源不可用。

我已经尝试了大量的故障排除，例如将服务器位置更改为“用户 Tomcat 安装”，或者将服务器 HTTP/1.1 端口从 8080 更改为 8088 并再次更改为 8080，重新启动 eclipse 和 pc，以及许多其他工作人员但没有作品。

我正在使用 eclipse Juno 和 apache tomcat 6.0。tomcat 服务器启动得很好，但找不到 index.jsp 页面。

我会很感激任何帮助，因为我真的迷路了，我无法继续处理我的 jsp 页面，除非我解决了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T19:34:51.297

实际上问题是：Eclipse 会自动配置与我在工作 IDE 中的文件夹结构不同的文件夹结构。更详细地说：我的工作文件夹结构是：src/main/webapp/WEB-INF 和 src/main/webapp/index.jsp 而在家里 Eclipse 会自动将所有 jsp 页面放入一个名为 WebContent 的新文件夹中！因此，虽然我的项目设置为在 WebContent/... 下查找 index.jsp，但它在 webapp 文件夹下进行了搜索，因此没有找到任何 index.jsp 页面。

我偶然发现，经过几天的搜索，当我单击窗口右侧的 myproject->properties->project facets->Dynamic Web Module->Further Configuration Available 时。

“Further Configuration Available”只能在您第一次导入项目时显示！我花了很多天试图找出问题所在，所以我想分享它以防其他人遇到同样的问题！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-24T13:54:26.467

在安装 Tomcat 并试图让 Eclipse 使用它之后，我起初对此感到困惑。Tomcat 正在运行，但不会显示其起始页。

[从 Eclipse 运行 Tomcat 时](https://stackoverflow.com/questions/14392207/http-error-404-when-running-tomcat-from-eclipse)页面HTTP 错误 404 似乎有答案，但这对我不起作用。

最后，我在以下位置找到了一个完美的修复视频： [How to resolve 404 Error with Tomcat Server and Eclipse](http://www.youtube.com/watch?v=orctlc_F5Y0) Thanks to "facesagar" on Youtube，以及 > 问题：假设您安装了 Tomcat、Java EE 等设置，透视设置为 Java EE ，服务器选项卡显示，并且您已经通过“新服务器”在那里安装了 Tomcat 服务器。

您可以运行服务器，但浏览器从 Tomcat 服务 localhost:8080 返回错误，这意味着 Tomcat 正在运行，但找不到根页面。

给出上述解决方案：

1.  右键单击“服务器”面板中的 Tomcat 服务器，转到“属性”，“常规”选项卡。
2.  单击（切换位置）按钮 - 从工作区更改为“Tomcat ...”设置。
3.  申请。好的。
4.  返回服务器面板中的 Tomcat 服务器。双击打开设置。（注意：在我观看视频之前，我从未想过双击打开服务器配置面板）
5.  转到服务器位置，单击使用 Tomcat 安装按钮。
6.  保存该文件（设置）
7.  在“服务器”面板中重新启动 Tomcat 服务器。
8.  通过在 localhost:8080 重新加载浏览器页面进行测试

哇……成功了！

# c# - 单位转换器 C#

> ID：14015675
> 
> 赞同：3
> 
> 时间：2012-12-23T23:55:31.593
> 
> 标签：c#, .net, winforms, unit-conversion

我今天无事可做，所以我决定尝试创建一个简单的单位转换器。到目前为止，它运行良好，但由于我使用了这么多“if”语句，它花费的时间太长了。我在网上搜索了用 Visual Studio 制作的单位转换器的示例，但我发现的唯一一个是用 VS Basic 制作的货币转换器，它使用在线转换器进行计算。那么有没有更快的方法来创建单位转换器？

![在此处输入图像描述](../Images/f0901731bfa9d07e1c13e2937fc4d0cf.png)

```
public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (listBox1.SelectedItem == listBox2.SelectedItem) 
        {
            txtAns.Text = txtFirstUnit.Text;
        }

        if (listBox1.SelectedItem == "Feet" && listBox2.SelectedItem == "Inches") 
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 12).ToString();
        }

        if (listBox1.SelectedItem == "Inches" && listBox2.SelectedItem == "Feet")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 12).ToString();
        }

        if (listBox1.SelectedItem == "Yard" && listBox2.SelectedItem == "Feet")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 3).ToString();
        }

        if (listBox1.SelectedItem == "Feet" && listBox2.SelectedItem == "Yard")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 3).ToString();
        }

        if (listBox1.SelectedItem == "Yard" && listBox2.SelectedItem == "Inches")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 36).ToString();
        }

        if (listBox1.SelectedItem == "Inches" && listBox2.SelectedItem == "Yard")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 36).ToString();
        }

        if (listBox1.SelectedItem == "Mile" && listBox2.SelectedItem == "Inches")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 63360).ToString();
        }

        if (listBox1.SelectedItem == "Inches" && listBox2.SelectedItem == "Mile")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 63360).ToString();
        }

        if (listBox1.SelectedItem == "Mile" && listBox2.SelectedItem == "Feet")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 5280).ToString();
        }

        if (listBox1.SelectedItem == "Feet" && listBox2.SelectedItem == "Mile")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 5280).ToString();
        }

        if (listBox1.SelectedItem == "Mile" && listBox2.SelectedItem == "Yard")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 1760).ToString();
        }

        if (listBox1.SelectedItem == "Yard" && listBox2.SelectedItem == "Mile")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 1760).ToString();
        }

        if (listBox1.SelectedItem == "Inches" && listBox2.SelectedItem == "Meters")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 39.370).ToString();
        }

        if (listBox1.SelectedItem == "Meters" && listBox2.SelectedItem == "Inches")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 39.370).ToString();
        }

        if (listBox1.SelectedItem == "Meters" && listBox2.SelectedItem == "Feet")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 3.2808).ToString();
        }

        if (listBox1.SelectedItem == "Feet" && listBox2.SelectedItem == "Meters")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 3.2808).ToString();
        }

        if (listBox1.SelectedItem == "Meters" && listBox2.SelectedItem == "Yard")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 1.0936).ToString();
        }

        if (listBox1.SelectedItem == "Yard" && listBox2.SelectedItem == "Meters")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 1.0936).ToString();
        }

        if (listBox1.SelectedItem == "Meters" && listBox2.SelectedItem == "Miles")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) * 0.00062137).ToString();
        }

        if (listBox1.SelectedItem == "Miles" && listBox2.SelectedItem == "Meters")
        {

            txtAns.Text = (double.Parse(txtFirstUnit.Text) / 0.00062137).ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:31:28.397

面向对象的方法将摆脱这些`if (lst.SelectedItem) ==`陈述。

考虑这个代码，它对每个单元都有不同的类。找不到 if 语句。

```
 public Form1()
  {
     InitializeComponent();

     fromList.Items.Add(new CentimeterFromMillimeterConverter());
     toList.Items.Add(new CentimeterToMillimeterConverter());
  }

  void Convert(double amount)
  {
     var from = (FromMillimeterConverter) fromList.SelectedItem;
     var to = (FromMillimeterConverter) toList.SelectedItem;
     to.Convert(from.Convert(amount));
  }

public abstract class ToMillimeterConverter
{
  public abstract double Convert(double unit);
  public override string ToString()
  {
     return GetType().Name.Replace("ToMillimeterConverter", "");
  }
}

public class CentimeterToMillimeterConverter : ToMillimeterConverter
{
  public override double Convert(double centimeters)
  {
     return 10 * centimeters;
  }
}

public abstract class FromMillimeterConverter
{
  public abstract double Convert(double unit);
  public override string ToString()
  {
     return GetType().Name.Replace("FromMillimeterConverter", "");
  }
}

public class CentimeterFromMillimeterConverter : FromMillimeterConverter
{
  public override double Convert(double centimeters)
  {
     return centimeters / 10;
  }
} 
```

# wordpress - 我正在尝试为自定义分类法列出归类为一个术语的所有帖子。

> ID：14015676
> 
> 赞同：0
> 
> 时间：2012-12-23T23:55:44.517
> 
> 标签：wordpress, archive, taxonomy, custom-post-type, term

我正在尝试为自定义分类法列出归类为一个术语的所有帖子。

我创建了一个名为“推荐”的自定义帖子类型，其中包含“推荐类别”的自定义分类。在推荐类别中，我创建了术语“同​​事”和“客户”。我正在尝试创建太多存档页面。一个将列出同事下的所有帖子，另一个列出客户下的所有帖子。我创建了归档页面 taxonomy-testimonial_categories-clients.php 和 taxonomy-testimonial_categories-colleagues.php。并且可以在 cpt testimonials 下创建所有帖子的列表，但不能通过术语同事或客户对其进行过滤。

在对 wordpress.org 进行研究之后，我相信将 tax_query 与新的 WP_Query 一起使用是可行的方法。这是我现在正在使用的代码。

```
 <?php           

 $args = array(
'post_type' => 'testimonial',
'tax_query' => array(
    array(
        'taxonomy' => 'testimonial_categories',
        'field' => 'slug',
        'terms' => 'colleagues'
    )
)
);

$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();    ?>
<span class="frame small alignleft">                 
            <?php the_post_thumbnail(thumbnail); ?>   
            <span>                                           
          <div class="test-content">                                                                                    
        <?php the_content(); ?>                                         
            </div>   
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T13:05:00.837

尽管这里为时已晚是唯一对我有用的解决方案，

```
$my_taxonomy_name = "your taxo. name";
$my_term_name = "your term name";
$my_term_id = -1;

$terms = get_terms($my_taxonomy_name);

if(count($terms)>0){
     foreach ($terms as $term) {
       if($term->name == $my_term_name){
           $term_id=$term->term_id;
           continue;
       }        
     }
$my_posts = array();
$postids_in_term = get_objects_in_term($term_id,'ad_setting'); 
foreach($postids_in_term as $post_id){
    array_push($my_posts,get_post($post_id));
}

var_dump($my_posts);
} 
```

这绝不是优雅的，但是，嘿，它有效！

# node.js - 密码的 Node.js 散列

> ID：14015677
> 
> 赞同：50
> 
> 时间：2012-12-23T23:56:07.267
> 
> 标签：node.js, security, cryptography, passwords, password-hash

我目前正在使用以下方法对密码进行哈希处理：

```
var pass_shasum = crypto.createHash('sha256').update(req.body.password).digest('hex'); 
```

您能否提出改进建议以使项目更安全？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-12-24T00:35:26.797

我使用以下代码对密码进行加盐和哈希处理。

```
var bcrypt = require('bcrypt');

exports.cryptPassword = function(password, callback) {
   bcrypt.genSalt(10, function(err, salt) {
    if (err) 
      return callback(err);

    bcrypt.hash(password, salt, function(err, hash) {
      return callback(err, hash);
    });
  });
};

exports.comparePassword = function(plainPass, hashword, callback) {
   bcrypt.compare(plainPass, hashword, function(err, isPasswordMatch) {   
       return err == null ?
           callback(null, isPasswordMatch) :
           callback(err);
   });
}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-25T18:02:17.967

bcrypt 也可以同步调用。示例咖啡脚本：

```
bcrypt = require('bcrypt')

encryptionUtil = 
    encryptPassword: (password, salt) ->
        salt ?= bcrypt.genSaltSync()
        encryptedPassword = bcrypt.hashSync(password, salt)
        {salt, encryptedPassword}

    comparePassword: (password, salt, encryptedPasswordToCompareTo) ->
        {encryptedPassword} = @encryptPassword(password, salt)
        encryptedPassword == encryptedPasswordToCompareTo

module.exports = encryptionUtil 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-03T01:07:20.537

节点也有 bcrypt-nodejs 模块。[https://github.com/shaneGirish/bcrypt-nodejs](https://github.com/shaneGirish/bcrypt-nodejs)。

之前我使用了这里已经提到的 bcrypt 模块，但是在 win7 x64 上遇到了问题。另一方面，bcrypt-nodejs 是 bcrypt 的纯 JS 实现，完全没有任何依赖关系。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-06-08T02:25:23.903

> bcrypt 与打字稿
> 
> ```
> npm i bcrypt
> npm i -D @types/bcrypt 
> ```

```
 import * as bcrypt from 'bcrypt';

export const Encrypt = {

    cryptPassword: (password: string) =>
        bcrypt.genSalt(10)
        .then((salt => bcrypt.hash(password, salt)))
        .then(hash => hash),

        comparePassword: (password: string, hashPassword: string) =>
            bcrypt.compare(password, hashPassword)
            .then(resp => resp)

    } 
```

示例：加密

```
const myEncryptPassword = await Encrypt.cryptPassword(password); 
```

示例：比较

```
const myBoolean = await Encrypt.comparePassword(password, passwordHash); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-13T13:12:53.600

您可以使用 bcrypt-js 包来加密密码。

1.  试试**npm i bcryptjs**
2.  var **bcrypt = require('bcryptjs')**在顶部。
3.  要散列密码：

```
bcrypt.genSalt(10, function(err, salt) {
    bcrypt.hash("B4c0/\/", salt, function(err, hash) {
        // Store hash in your password DB.
    });
}); 
```

4.  要检查您的密码，

```
// Load hash from your password DB.
bcrypt.compare("B4c0/\/", hash, function(err, res) {
    // res === true
}); 
```

您可以访问[https://www.npmjs.com/package/bcryptjs](https://www.npmjs.com/package/bcryptjs)了解有关 bcryptjs 的更多信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-18T07:57:09.670

Try using Bcrypt, it secures the password using hashing.

```
bcrypt.hash(req.body.password, salt, (err, encrypted) => {
    user.password = encrypted
    next()
}) 
```

Where salt is the cost value which specifies the strength of hashing. While logging in, compare the password using bcrypt.compare method:

```
 bcrypt.compare(password, user.password, (err, same) => {
      if (same) {
           req.session.userId = user._id
           res.redirect('/bloglist')
      } else {
           res.end('pass wrong')
      }
 }) 
```

For more info, refer to this blog: [https://medium.com/@nitinmanocha16/bcrypt-and-nodejs-e00a0d1df91f](https://medium.com/@nitinmanocha16/bcrypt-and-nodejs-e00a0d1df91f)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-12T07:31:10.400

Bcrypt 不是一个糟糕的选择，但[有一些陷阱](https://paragonie.com/blog/2016/02/how-safely-store-password-in-2016#why-scrypt)：

1.  它将截断`NUL`字节。
2.  它将在 72 个字符后截断。如果您使用密码，这可能会意外地削弱您的密码。

截至 2019 年 10 月，[Argon2id](https://password-hashing.net)是最佳选择。

与 Argon2id 交互的首选方式是通过 libsodium（一个提供许多功能的密码库）。有几种绑定可供选择，但最简单的可能是[钠加](https://github.com/paragonie/sodium-plus)。

```
const SodiumPlus = require('sodium-plus').SodiumPlus;
let sodium;
(async function(){
    if (!sodium) sodium = await SodiumPlus.auto(); // Autoload the backend

    let password = 'Your example password goes here. Provided by the user.';

    // Hashing...
    let hash = await sodium.crypto_pwhash_str(
        password,
        sodium.CRYPTO_PWHASH_OPSLIMIT_INTERACTIVE,
        sodium.CRYPTO_PWHASH_MEMLIMIT_INTERACTIVE
    );
    // You can safely store {hash} in a database.

    // Checking that a stored hash is still up to snuff...
    let stale = await sodium.crypto_pwhash_str_needs_rehash(
        hash,
        sodium.CRYPTO_PWHASH_OPSLIMIT_INTERACTIVE,
        sodium.CRYPTO_PWHASH_MEMLIMIT_INTERACTIVE
    );
    if (stale) {
        // Rehash password, update database
    }

    // Password verification
    let valid = await sodium.crypto_pwhash_str_verify(password, hash);
    if (valid) {
        // Proceed...
    }
})(); 
```

Github 上[有关 sodium-plus](https://github.com/paragonie/sodium-plus/tree/master/docs#password-hashing-and-storage)的文档包括密码哈希和存储。

# css - 使用引导程序制作具有宽幅表格的响应式布局的最佳方法是什么？

> ID：14015678
> 
> 赞同：0
> 
> 时间：2012-12-23T23:56:29.970
> 
> 标签：css, twitter-bootstrap, stylesheet

我正在使用引导程序。一切都准备好了，但桌子。
当我用智能手机查看我的网站时，它以响应式设计显示，但表格看起来很乱。
所有的内容都从桌子的边缘伸出来。
处理这种事情的最佳方法是什么？
任何人有任何想法？？？

更新：

![请看右边！](../Images/33158475b107930536191bb3059074d0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:30:32.000

你需要给它一个最小宽度。这事儿常常发生。如果您查看浏览器并将其缩小，您可以在向右滚动时看到同样的问题。背景不是滚动区域，除非它有宽度。

# objective-c - 按字母顺序排列数组中的字符串

> ID：14015681
> 
> 赞同：-1
> 
> 时间：2012-12-23T23:56:44.500
> 
> 标签：objective-c, nsstring, nsarray

> **可能重复：**
> [如何按字母顺序对 NSArray 进行排序？](https://stackoverflow.com/questions/1351182/how-to-sort-a-nsarray-alphabetically)

嘿，我浏览了整个网站并在谷歌上搜索了我的问题的答案。我对 iPhone 编程非常陌生，我认为这个问题应该很容易回答。在我的应用程序中，我有一个用字符串填充的数组。我在 UITableView 中显示数组，每个字符串都在自己的单元格中。但是，字符串以无组织的方式放置。有没有办法通过按字母顺序排列字符串来组织数组的字符串？任何帮助是极大的赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:12:29.347

将来，发布您遇到问题的代码。如所写，您的问题太模糊而无法回答。但是您的评论填写了足够的信息，暗示您正在尝试对可变数组进行排序。

为此，您可以使用任何`NSMutableArray`排序方法；

```
– sortUsingDescriptors:
– sortUsingComparator:
– sortWithOptions:usingComparator:
– sortUsingFunction:context:
– sortUsingSelector: 
```

任君挑选，因为它们中的任何一个都会对数组本身进行排序（而不是生成新数组）。

# php - 从端口读取数据获取结果变化无常的数据

> ID：14015683
> 
> 赞同：0
> 
> 时间：2012-12-23T23:57:18.063
> 
> 标签：php, serial-port, ascii

> **可能重复：**
> [PHP preg_match 在空格后获取一个单词，这是一个单词 KG](https://stackoverflow.com/questions/14032707/php-preg-match-to-get-a-word-after-space-which-is-where-it-a-word-kg)

我正在使用 PHP 开发 Web 应用程序，我的应用程序与规模数字通信，我正在使用 phpserial 类的帮助。我的问题是我的浏览器中输出的数据与数字比例输出不匹配。当数字比例为**16KG**时，浏览器输出为**NT,ST+16KG**然后我再次刷新浏览器得到其他，如**~!NT,ST+16KG, 16KG**。我的问题，如何在仅**16KG**的浏览器中获取数据。

这是读取数据的脚本：

```
<?php
$serial = new phpSerial();
$serial->deviceSet("/dev/ttyUSB1");
$serial->confBaudRate(9600); //Baud rate: 9600 
$serial->confParity("none"); //Parity (this is the "N" in "8-N-1") 
$serial->confCharacterLength(8); //Character length (this is the "8" in "8-N-1") 
$serial->confStopBits(1); //Stop bits (this is the "1" in "8-N-1") 
$serial->confFlowControl("none"); 

$serial->deviceOpen();

$serial->sendMessage(chr(1));
$tes = $serial->readPort();
print_r($tes);
// get result ~!NT,ST+16KG, 16KG or NT,ST+16KG
$serial->deviceClose();
?> 
```

这是 phpSerial 类的代码函数 readPort。

```
function readPort ($count = 0)  {
        if ($this->_dState !== SERIAL_DEVICE_OPENED)
        {
            trigger_error("Device must be opened to read it", E_USER_WARNING);
            return false;
        }

            $content = ""; $i = 0;

            if ($count !== 0)
            {
                do {
                    if ($i > $count) $content .= fread($this->_dHandle, ($count - $i));
                    else $content .= fread($this->_dHandle, 128);
                } while (($i += 128) === strlen($content));
            }
            else
            {
                do {
                    $content .= fread($this->_dHandle, 128);
                } while (($i += 128) === strlen($content));
            }

            return $content;
    } 
```

我正在开发使用 linux，/dev/ttyUSB1 中的端口比例数字检测，我的意思是这个问题是 ASCII，所以任何帮助我解决我的问题。谢谢。

# javascript - 如何在 jQuery Mobile 中延迟页面转换，直到页面数据准备好？

> ID：14015684
> 
> 赞同：20
> 
> 时间：2012-12-23T23:57:50.163
> 
> 标签：javascript, jquery-mobile, knockout.js

我有一个使用 jquery-mobile (jqm) 和淘汰赛构建的移动单页 Web 应用程序。应用程序本身有多个页面，但它们都包含在一个 HTML 文档中。

问题：在将我的“为页面创建视图模型”从同步行为更改为异步行为之后，我遇到了 jquery-mobile 在数据准备好之前触发其事件的问题。

背景：直到最近，我一直在处理示例数据，基本上是一个巨大的 JSON blob，一切都很顺利。使用来自各种来源的视图模型的新异步组合，数据不会立即准备好，我的“buildViewModel”方法需要一个延续回调，而不是仅仅同步返回数据。

我正在订阅 pagebeforecreate 和 pagebeforechange 事件，并触发代码以在此处填充视图模型。问题是，从事件处理程序返回后，jqm 在数据可用之前触发剩余的事件链。这会导致页面转换到未准备好的页面，这是不希望的。

`event.preventDefault`一旦页面准备好a）增强和b）页面转换发生，我尝试调用所有之前的事件并手动调用 $.mobile.changePage ，但没​​有任何运气。

我已经扫描了 jquery-mobile 源，但没有发现任何看起来可以让我延迟`pagebeforeshow`事件的东西，这基本上是我能够正确呈现页面所需要的。

在 jquery-mobile 尝试增强页面之前以及在执行到页面的过渡之前，如何确保 1) 数据可用和 2) 已应用敲除以执行初始 DOM 操作？

我还考虑过使用同步 ajax 来获取资源，但这（我认为）不适用于从设备加载的资源（使用 PhoneGap/Cordova），并且会产生其他我想避免的负面后果。

FWIW，我想避免通过在各处连接点击处理程序来手动处理所有导航事件，但如果需要，我对所有解决方案持开放态度。

抱歉，如果这是重复的；我搜索并阅读了大量问题，但没有找到完全相同的答案或问题。我会是第一个遇到这个问题的人，这听起来令人难以置信，因为我想这是一个常见的场景。

更新：澄清问题场景描述。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T00:52:34.160

我有这个完全相同的问题。

我能想出的唯一解决方案是编写一个[自定义转换处理程序](http://jquerymobile.com/demos/1.2.0/docs/pages/page-customtransitions.html)，该处理程序将延迟启动转换，直到 Ajax 请求完成。

这是一个展示该技术的[小提琴。](http://jsfiddle.net/jdiamond/9yYae/)小提琴不使用淘汰赛，但确实展示了如何推迟过渡。

基本上，由于`$.ajax()`返回了一个 Promise，我可以将它通过管道传递到默认转换处理程序返回的 Promise 中，并从我的新处理程序中返回它。

在我的 pagebeforeshow 处理程序中，我将 Ajax 承诺附加到页面，以便转换处理程序可以访问它。不确定这是否是最好的方法，但我比使用全局变量更喜欢它。

我唯一不喜欢的是它延迟了转换的开始，直到 Ajax 响应到达，所以感觉页面已经“挂起”给用户，让他们再次点击。手动显示加载消息会让人感觉更灵敏一些。

希望这会有所帮助，如果您找到更好的解决方案，请告诉我！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T09:04:15.070

在 jQuery Mobile 中面对动态内容时，延迟到新页面的转换直到其内容准备好是一个非常常见的问题。解决这个问题最方便的方法是：

*   不是经典的 href 类型导航，而是基于“单击”操作的链接，该操作将首先检索内容，在 DOM 中构建一个新页面，然后通过`$.mobile.changePage`. 这种方式的优点是容易到位，缺点是不用经典`href`链接导航

*   在文档级别绑定`pagebeforechange`事件以检测导航时目标页面是否是您的页面之一，该页面应包含动态内容。在这种情况下，您可以防止发生默认导航，花时间生成页面，并在成功时进行转换。[这在动态注入内容](http://jquerymobile.com/test/docs/pages/page-dynamic.html)的 JQM 文档中有所描述。优点是您仍然可以依赖标准`href`链接导航，但它需要更多代码和上游设计才能正确检测和操作页面导航。

    ```
    $(document).on( "pagebeforechange", function( e, data ) {
        if ( typeof data.toPage === "string" ) {
             if ( data.toPage === "myDynamicPageName" ) {
                 e.preventDefault(); //used to stop transition to the page (for now)

                 /*
                    Here you can make your ajax call
                    In you callback, once you have generated the page you can call
                    $.mobile.changePage
                    (you can pass the Div of the new page instead of its name as
                    the changepage parameter to avoid interrupting again the page change) 
                 */
              }
          }
    }); 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T00:31:59.750

将您的链接设置为调用“加载”函数而不是进行页面转换。在您的加载函数中，显示“加载消息”并进行 JSON 调用。最后，在 JSON 回调函数中，将*page*更改为**page2**

加载函数：

```
function loadPage2() {
    /* show wait page */
    $.mobile.loading( 'show', {
            text: 'Loading massively huge dataset',
            textVisible: true
    });

     /* perform JSON call then call callback */
 } 
```

回调函数

```
function callback() {
    $.mobile.changePage("#page2");
} 
```

这是一个有效的 JSFiddle：http: [//jsfiddle.net/8w7PM/](http://jsfiddle.net/8w7PM/)

请注意，如果您不希望用户在等待时能够更新页面 1 中的输入字段，请在页面 1 和页面 2 之间引入“等待页面”，“等待页面”的 init 与“loadPage2”相同.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T19:01:18.840

我有一个小型 jQuery Mobile / KnockoutJS 应用程序，并且遇到了同样的问题。我的应用程序包含大约 5 页。所有内容都包含在单个物理 HTML 文档中，标准`<div data-role="page">`标记分隔各个页面。

`$.mobile.changePage()`由于成功，我最终选择了基于点击的导航并开火`$.ajax`。

`onclick`这种技术的一个缺点是，当依赖于vs`href`属性时，您将失去按钮突出显示。请参阅我的相关帖子：[href vs scripted page transitions and button highlighting](https://stackoverflow.com/questions/13953768/)

后来我选择同时提供两者并依靠`href`来执行导航，同时使用`onclick`调用我的 JavaScript 逻辑来加载 ViewModel 等。我发现这是一个问题的唯一地方是源页面上可能需要验证时。如果失败，则过渡已经开始，然后 UI 会闪回到源页面。丑陋但这只发生在我的应用程序中的有限实例中。

我认为这些都不是 Knockout 特有的。我的确切解决方案可能会给您带来问题，因为您的导航可能在您的模型完全加载之前完成，但如果您依赖`$.mobile.changePage()`，它应该都可以工作并隐藏您的页面，直到它加载之后。过渡应该可以正常工作。

```
<a href="#MyNewPage" data-bind="click:LoadNewPage" data-role="button">
    Load Page
</a>

$.ajax({
    url: url,
    cache: false,
    dataType: "json",
    data: requestData,
    type: "POST",
    async: true,
    timeout: 10000,
    success: function (data, textStatus, jqXHR) {
        // use either href or changePage but not both
        $.mobile.changePage("#NewPage");
    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert("AJAX Error. Status: " + textStatus);
        // jqXHR.status
        // http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T15:56:53.280

我认为您必须为所有要绑定响应数据的小部件再次触发

例如，您必须为元素调用`trigger`with`create`或`refrest`事件 `$("#element").trigger('create');` JQuery Mobile 会将所有默认事件按原样绑定到元素

- - 编辑 - -

我刚刚创建了一个示例代码，我认为这与您的问题相同，请尝试链接[http://jsfiddle.net/ndkhoiits/BneqW/embedded/result/](http://jsfiddle.net/ndkhoiits/BneqW/embedded/result/)

在渲染数据之前，我们必须调用服务来让它们显示，这就是为什么所有被 jqm 绑定的事件都会被删除。

我有一个解决方法，不要让jqm在元素上触发任何东西，我们会在所有数据被knockoutjs绑定后触发它让我们试试固定版本 [http://jsfiddle.net/ndkhoiits/c5a2b/embedded/result /](http://jsfiddle.net/ndkhoiits/c5a2b/embedded/result/)

这是代码[http://jsfiddle.net/ndkhoiits/c5a2b/](http://jsfiddle.net/ndkhoiits/c5a2b/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-28T18:10:46.290

您应该将页面转换的代码放在 AJAX 调用的成功函数中。

```
$.ajax({
    url:"request-url",
    data: data,
    type: "POST",
    success: function(response){
        // Add Transition Code Here
    }  
}); 
```

# javascript - Highcharts 上的双 y 轴匹配

> ID：14015686
> 
> 赞同：8
> 
> 时间：2012-12-23T23:58:05.983
> 
> 标签：javascript, highcharts

我在图形上表示血压，我想同时表示收缩压和舒张压以及图形。通常，这些图形按照以下规则一起显示：

90 收缩压应与 60 舒张压处于同一水平 140 收缩压应与 90 舒张压处于同一水平

所以我认为这是因为 max 和 mins 是以人为基础的，所以我开发了这个来尝试解决这个问题：

```
function getObjectSystolicDiastolic(){
    var min_systolic = getMinValue(80,person.data,10),
        max_systolic = getMaxValue(150,person.data,10),
        min_diastolic = getMinValue(50,person.data,10),
        max_diastolic = getMaxValue(120,person.data,10),
        min_systolic_eq = min_diastolic*(140-90)/(90-60) + 90 - 60*(140-90)/(90-60),
        max_systolic_eq = max_diastolic*(140-90)/(90-60) + 90 - 60*(140-90)/(90-60);

    // Getting the largest range
    var min_total = min_systolic < min_systolic_eq ?  min_systolic : min_systolic_eq;
    var max_total = max_systolic < max_systolic_eq ? max_systolic : max_systolic_eq;

    return {
        min_systolic : min_total,
        max_systolic : max_total,
        min_diastolic : (min_total - 90 + 60*(140-90)/(90-60))*(90-60)/(140-90),
        max_diastolic : (max_total - 90 + 60*(140-90)/(90-60))*(90-60)/(140-90)
    };
} 
```

那，基本上首先从人员数据或提供的值中获取最小值和最大值。例如`getMinValue(80,person.data,10)`，即使所有值都大于该值，也会返回一个不大于 80 的值。

![形象的](../Images/fbb66b5a53388996ec60032c42bc68f4.png)

但它不起作用。它与第一组匹配，但随后失败。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T19:19:23.160

一个非常好的问题！

它更多的是数学/几何问题，而不是编程/高图问题。但是，嘿，这个杂耍有一个完整的主题。***计算机图形学 ！！***

如果我的问题是正确的（我希望我做到了，否则会花一个小时解决一个不存在的问题，然后再起草一个可以理解的答案）。

*   您总是希望 valueX1(90) 与 valueY1(60) 对齐，而 valueX2(140) 与 valueY2(90) 对齐。X 和 Y 绘制在不同的 y 轴上。

这是解决方案。我们需要做的就是正确对齐两个轴的最小值和最大值，以便所需的点也能自行正确对齐。

这是我们如何做到的。

*   接受由 highcharts 计算的最小值和最大值，因为它适用于其中一个轴，并根据以下内容计算另一个轴的最小值和最大值。（接受哪个轴可能很棘手，这将超出这个问题的范围或作为家庭作业=]）。让我们继续接受来自 highchart 的第一个轴的值​​并自己计算第二个值。

*   如何根据 min1/max1 计算 min2/max2？

    我们使用称为求解线性方程组**[的两点形式的方法](http://en.wikipedia.org/wiki/Linear_equation#Two-point_form)**

    ```
    y - y1 = (y2-y1)/(x2-x1)*(x-x1) 
    ```

    这里 x1=90,y1=60,x2=140,y2=90。取一个 x 的值，得到对应的 y 值。放min1得到min2，放max1得到max2。

**代码**

```
var ticksX = {
    t1: 90,
    t2: 140
};
var ticksY = {
    t1: 60,
    t2: 90
};

function findY(X) {
    return ticksY.t1 + (X - ticksX.t1) * (ticksY.t2 - ticksY.t1) / (ticksX.t2 - ticksX.t1);
} 
```

根据图表加载时 series1 的计算（通过 highcharts）最小值/最大值调整 series2 的最小值/最大值

```
var chart = new Highcharts.Chart({...}, function() {
  var minX = this.yAxis[0].getExtremes().min;
  var maxX = this.yAxis[0].getExtremes().max;
  this.yAxis[1].setExtremes(findY(minX), findY(maxX));
});​ 
```

**[在多个轴上对齐刻度 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/3qdkc/)**

您将需要摆弄刻度设置和网格线。将在这里超出范围，因为它们为不同的问题弥补了更多

**更新：根据新的极端值重新调整刻度的代码**

```
//Adjusting ticks
var ticks = 5;
var intervalX = (maxX - minX) / (ticks - 1);
var intervalY = (maxY - minY) / (ticks - 1);
var xTicks = [],
    yTicks = [];
for (var i = 0; i < ticks; i++) {
    xTicks.push(minX + i * intervalX);
    yTicks.push(minY + i * intervalY);
}

chart.yAxis[0].options.tickPositions = xTicks;
chart.yAxis[1].options.tickPositions = yTicks;

chart.yAxis[0].redraw(false);
chart.yAxis[1].redraw(false);
chart.redraw(); 
```

# java - 如何将此反序列化代码从 java 转换为 scala？

> ID：14015687
> 
> 赞同：1
> 
> 时间：2012-12-23T23:58:21.760
> 
> 标签：java, scala, deserialization

我是 Scala/Java 新手，如果这是一个相对简单的解决方案，我很抱歉——但我正在尝试访问外部文件中的模型（Apache Open NLP 模型），但不确定我哪里出错了. [这是你在 Java](http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.sentdetect.detection.api)中的做法，这就是我正在尝试的：

```
import java.io._

val nlpModelPath = new java.io.File( "." ).getCanonicalPath + "/lib/models/en-sent.bin"
val modelIn: InputStream = new FileInputStream(nlpModelPath) 
```

效果很好，但是尝试根据该二进制文件中的模型实例化对象是我失败的地方：

```
val sentenceModel = new modelIn.SentenceModel // type SentenceModel is not a member of java.io.InputStream
val sentenceModel = new modelIn("SentenceModel") // not found: type modelIn 
```

我也尝试过 DataInputStream：

```
val file = new File(nlpModelPath)
val dis = new DataInputStream(file)
val sentenceModel = dis.SentenceModel() // value SentenceModel is not a member of java.io.DataInputStream 
```

我不确定我错过了什么——也许有一些方法可以将 Stream 转换为一些我可以从中提取方法的二进制对象？感谢您的任何指点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T00:52:29.223

问题是您使用了错误的语法（请不要将其视为个人内容，但是如果您打算坚持使用 java 或 scala 一段时间，为什么不先阅读一些初学者的 java 书籍，甚至只是一个教程呢？ )

你会用java编写的代码

```
SentenceModel model = new SentenceModel(modelIn); 
```

在 scala 中看起来很相似：

```
val model: SentenceModel = new SentenceModel(modelIn)
// or just 
val model = new SentenceModel(modelIn) 
```

这种语法的问题是你忘记导入 SentenceModel 的定义，所以编译器根本不知道什么是 SentenceModel。

添加

```
import opennlp.tools.sentdetect.SentenceModel 
```

在您的 .scala 文件的顶部，这将修复它。

# robots.txt - 机器人文本被屏蔽

> ID：14015692
> 
> 赞同：0
> 
> 时间：2012-12-24T00:00:21.083
> 
> 标签：robots.txt, robot

```
header("Content-Type: text/plain; charset=utf-8");
if ($_SERVER['SERVER_PORT'] == 443) {
echo "User-agent: *\n" ;
echo "Disallow: /\n" ;
} else {
echo "User-agent: *\n" ;
echo "Disallow: \n" ;
} 
```

这段代码在 robots.php 中有什么作用？

我在我的服务器上找到了它，它似乎阻止了文本被搜索引擎索引

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:06:11.120

当您在端口 443（通常为安全连接保留）上读取该页面时，例如**https://yoursite.com/robots.php**，返回的内容如下：

```
User-agent: *
Disallow: / 
```

“用户代理：*”表示本节适用于所有机器人。“禁止：/”告诉机器人它不应该访问站点上的任何页面。

否则（`robots.php`在任何其他端口上访问的页面 - **http://yoursite.com/robots.php**）返回的内容如下：

```
User-agent: *
Disallow: 
```

在这种情况下，机器人可以访问网站上的任何页面。

还将`header("Content-Type: text/plain; charset=utf-8");`页面内容显示为常规纯文本。

# solr - 在 Solr 中限制/过滤多值字段

> ID：14015696
> 
> 赞同：2
> 
> 时间：2012-12-24T00:01:19.113
> 
> 标签：solr, filter, multivalue

有没有办法限制或过滤 Solr 中多值字段的返回文本？给定 Solr 中的以下文档结构：

```
...
<doc>
    <str name="title">example</str>
    <arr name="foo">
        <str>bar1</str>
        <str>bar2</str>
        <str>bar3</str>
        <str>bar4</str>
        <str>bar5</str>
        <str>bar6</str>
    </arr>
</doc>
... 
```

我想根据过滤查询请求将响应限制为仅显示 1 个“foo”值。例如，查询：

```
select/?q=example&fq=foo:bar2` 
```

我想要一个回应：

```
...
<doc>
    <str name="title">example</str>
    <arr name="foo">
        <str>bar2</str>
    </arr>
</doc>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:35:04.997

没有。无法过滤随响应返回的多值值。
不过，您可以在客户端轻松完成。

如果可以使用 Facet 获取列表，则可以使用[facet.prefix](http://wiki.apache.org/solr/SimpleFacetParameters#facet.prefix)来限制作为 facet 返回的字段 foo 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T11:23:05.890

如果您知道“foo”的值的样本空间，您是否尝试过使用动态字段？例如：

然后过滤 bar_x:true。您最终会使用大量动态字段。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-02-12T18:50:11.613

[过滤查询](http://wiki.apache.org/solr/CommonQueryParameters)应该可以工作，试试下面的代码

`&fq=+foo:"bar2"`

# python - django模型方法中的get_full_path

> ID：14015701
> 
> 赞同：1
> 
> 时间：2012-12-24T00:02:06.873
> 
> 标签：python, django

我刚从 django 开始（老实说，还有 python）

我正在尝试获取一个模型方法，该方法可以从当前 URL 中删除 self.slug 并将其返回到模板。

这是我尝试的方法：

```
class Category(models.Model):
    ...
    def remove_filter(self):
        url = HttpRequest.get_full_path()
        slug = '/' + self.slug
        return url.replace(slug, '') 
```

但正如你可以想象的那样，它不起作用。

模板片段：

```
{% for object in active_filters %}
    <li><a href="{{ object.remove_filter }}"><i class="icon-remove"></i></a>{{ object }}</li>
{% endfor %} 
```

我的核心目标是通过删除当前对象的 slug 来更改带有 url 的前端图标。

我不知道如何通过意见来做到这一点，但我愿意接受任何建议。

```
def category_page(request, url):
    slugs = url.split('/')
    active = Category.objects.filter(slug__in=slugs)
    sorted_slugs = []
    for i in active:
        sorted_slugs.append(i.slug)
    if slugs != sorted_slugs:
        url = '/'.join(sorted_slugs)
        return redirect('http://127.0.0.1:8000/catalog/' + url)
    inactive = Category.objects.exclude(slug__in=slugs)
    return render(request, 'category.html', {'active_filters': active,
                                              'inactive_filters': inactive}) 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:17:19.633

您可以将所有活动 slug 的列表发送到模板，然后构建自定义模板过滤器来构造修改后的 url。

### 视图.py

```
# Send your list of active slugs to the template

return render(request, 'category.html', {
    'active_filters': active,
    'inactive_filters': inactive,
    'slugs': slugs,
}) 
```

### tags_and_filters.py

```
import copy

from django import template

register = template.Library()

@register.filter(name='remove_filter')
def remove_filter(category, slugs): 
    copied_slugs = copy.copy(slugs)
    slug = category.slug
    if slug in copied_slugs:
        copied_slugs.remove(slug)
    return '/'.join(copied_slugs) 
```

### 你的模板

```
{% for object in active_filters %}
<li>
  <a href="{{ object|remove_filter:slugs }}"><i class="icon-remove"></i></a>{{ object }}
</li>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:01:57.653

您的`remove_filter`方法无权访问当前请求。`HttpRequest`是类，而不是当前请求实例。

我建议你重写`remove_filter`为[自定义标签或过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)。这样您的函数就可以访问类别和请求实例。您还必须在设置中激活[请求模板上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)。

# c# - 如何使用 C# 多选对话框中的特定文件？

> ID：14015702
> 
> 赞同：0
> 
> 时间：2012-12-24T00:02:29.457
> 
> 标签：c#, audio, dialog

我需要使用您从文件对话框中选择的特定文件。

```
OpenFileDialog ofd = new OpenFileDialog();

private void pictureBox23_Click(object sender, EventArgs e)
{
    ofd.Filter = "WAV|*.wav";
    this.ofd.Multiselect = true;
    if (ofd.ShowDialog() == DialogResult.OK)
    {
        label23.Text = ofd.SafeFileName;
    }
    else
    {
        label23.Text = "No files selected...";
    }
} 
```

我需要做的是选择并使用我预先定义的文件，所以如果我用 01.wav 定义一个事件，如果用户选择了一个名为 01.wav 的文件，那么该文件将像这样使用：

```
using (SoundPlayer player = new SoundPlayer(Beatpadpc.Properties.Resources._01))
{
    player.Play();
} 
```

我目前已经对其进行了调整，因为它将从资源中播放它，我需要做的是从文件选择中播放文件，但前提是文件名为“01”.wav

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:10:30.177

好吧，只需过滤名为 Filenames 的 ofd 属性。

```
OpenFileDialog ofd = new OpenFileDialog();
string strAudioFilePath = String.Empty;

private void pictureBox23_Click(object sender, EventArgs e)
{
    ofd.Filter = "WAV|*.wav";
    this.ofd.Multiselect = true;
    if (ofd.ShowDialog() == DialogResult.OK)
    {
        // Here you make a small filter with linq
        label23.Text = strAudioFilePath = ofd.FileNames.FirstOrDefault(x => x.EndsWith("01.wav")); // you change 01.wav to something that make more sense to you
    }
    else
    {
        label23.Text = "No files selected...";
    }
} 
```

然后，如果你想摆脱你的资源文件，只需给你的声音播放器文件的路径就可以了。

```
SoundPlayer simpleSound = new SoundPlayer(strAudioFilePath);
simpleSound.Play(); 
```

# javascript - 创建 DOM 组件列表的测试函数

> ID：14015703
> 
> 赞同：1
> 
> 时间：2012-12-24T00:02:30.970
> 
> 标签：javascript, jquery

我有一个创建组件数组的函数。每个组件都是一个带有几个内部 div 的外部 div。

```
function createDivs(quizQuestions) {
    var returnElements = new Array();
    $.each(quizQuestions.questions, function(i, val){

    // create the div.
    quizDiv = $('<div class="questionContainer radius">')
    questionDiv = $('<div class="question"><b><span>QuestionText</span></b></div>');
    quizDiv.append(questionDiv);

    // Now change the question div text.
    questionDiv.text = val.question;
    answerDiv = $('<div class="answers">');
    // ...
    // ...
    // Now the answers.
    questionDiv.append(answerDiv);
    returnElements[i] = quizDiv;
});
return returnElements; 
```

我通过 JSON，例如：

```
 {questions:[{"question":"Name the best Rugby team?",
   "answers":["Leinster", "Munster", "Ulster", "Connaught"],
   "correct_answer":"Leinster"},
   {"question":"Name the best DJ?",
   "answers":["Warren K", "Pressure", "Digweed", "Sasha"],
   "correct_answer":"Leinster"}]}; 
```

我想写一个简单的单元测试，这样我就可以测试返回的 div 数组是否有意义

有小费吗？

另外，我最好返回一个 DOM 组件还是只返回文本？后者更容易测试。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:33:56.063

不确定您要测试的确切内容，但在字符串中创建尽可能多的 html 以减少函数调用的性能要高得多。append 也很昂贵，因此最终为 JSON 表示的所有新内容创建一个字符串将是最大的性能提升。

在我看来，它还使代码更具可读性，因为片段的顺序与 html 编辑器中的顺序相同

示例（我的首选是创建所有字符串片段的数组，连接也常用）：

```
var newcontent = [];
$.each(quizQuestions.questions, function(i, val) {
    newcontent.push('<div class="questionContainer radius">');
    newcontent.push('<div class="question"><b><span>' + val.question + '< /span></b > < /div>');

    $.each(val.answers, function(idx, answer) {
        newcontent.push('<div class="answers">' + answer + '</div > ')
    })

    newcontent.push(' </div></div > ');
}); 
```

然后向 DOM 添加内容：

```
$('#someDiv').append( newcontent.join('')); 
```

免责声明：未完全检查标签的正确关闭/嵌套。

# java - 查询特定对象的 JVM 堆

> ID：14015704
> 
> 赞同：1
> 
> 时间：2012-12-24T00:02:48.473
> 
> 标签：java

是否有一种 GUI 工具能够将其自身“附加”到 JVM（远程/本地），它允许“查询”堆上的特定对象类型并返回结果，还允许检查其属性。更好的是，允许直接修改属性？

例如。我有一个缓存在内存中的员工 Bean 的 JVM。并且“工具”允许我说获取所有 Employee Bean 实例。它返回一组结果。而且我可以检查单个 Employee Bean 并可能直接更改“地址字段”而无需任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:27:29.917

你试过：与java jdk一起出现的**jvisualvm**（我在这里：/usr/lib/jvm/jdkx.yz/bin/）？还不够吗？Sampler 和 Profiler 选项卡以及带有过滤选项的快照功能应该可以满足您的需求。

# javascript - 删除除 0-9 + - / * 和 ^ 之外的任何字符

> ID：14015705
> 
> 赞同：4
> 
> 时间：2012-12-24T00:02:55.330
> 
> 标签：javascript, regex, regex-negation

我正在尝试进一步了解 JavaScript 中的正则表达式。

所以我有一个表单，允许用户提供任何字符串。我想使用该字符串并删除任何不是数字、括号、+、-、*、/ 或 ^ 的字符。我正在尝试编写一个否定的正则表达式来抓取任何无效的内容并将其删除。到目前为止，有关此问题的代码如下所示：

```
var pattern = /[^-\+\(\)\*\/\^0-9]*/g;
function validate (form) {
    var string = form.input.value;
    string.replace(pattern, '');
    alert(string);
}; 
```

此正则表达式在[http://www.infobyip.com/regularexpressioncalculator.php](http://www.infobyip.com/regularexpressioncalculator.php)正则表达式测试器上按预期工作，但始终使用我提供的确切字符串发出警报，而无需在计算器中进行任何更改。任何建议或指示将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T00:04:40.393

该`replace`方法不会修改字符串。它使用替换结果创建一个新字符串并将其返回。您需要将替换结果分配回变量：

```
string = string.replace(pattern, ''); 
```

# bamboo - Bamboo OnDemand：如何自动生成快照？

> ID：14015706
> 
> 赞同：1
> 
> 时间：2012-12-24T00:03:29.240
> 
> 标签：bamboo, ondemand

我一直在忙于设置我们的竹子按需实例来运行我们之前在本地实例上运行的构建。正如许多其他人已经发布或创建票证一样（参见例如[https://answers.atlassian.com/questions/109719/automated-ebs-snapshots-in-bamboo-ondemand](https://answers.atlassian.com/questions/109719/automated-ebs-snapshots-in-bamboo-ondemand)，[https://jira.atlassian.com /browse/BAM-11525](https://jira.atlassian.com/browse/BAM-11525)，[https://jira.atlassian.com/browse/AOD-3293](https://jira.atlassian.com/browse/AOD-3293)），我在附加的 EBS 卷上面临过时的 maven 存储库的问题，因为这些卷上的内容不会自动保留EC2 实例被终止/关闭。

具体来说，[https://answers.atlassian.com/questions/109719/automated-ebs-snapshots-in-bamboo-ondemand](https://answers.atlassian.com/questions/109719/automated-ebs-snapshots-in-bamboo-ondemand)上的帖子或多或少正是我想要实现的目标：在关机前自动生成快照，以便所有构建工件都被保留，下次实例启动时不需要重新创建。但是，我无法按照上述帖子中的建议运行它。

有没有人成功解决了这个问题？如果是这样，你是怎么做到的？如果没有，任何想法或指针将不胜感激。

问候，克里斯

# java - Java Annotation VS 静态或全局变量

> ID：14015715
> 
> 赞同：0
> 
> 时间：2012-12-24T00:04:48.577
> 
> 标签：java, android, annotations

我正在回顾 Java 注释是如何工作的，并意识到它是一个类的元数据。我对自定义注释有几个问题：

1.  注释如何比静态或全局类变量更有用？

2.  你能举一个注释有用的真实例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:09:41.647

1）我真的不认为“注释”、“静态变量”或“全局变量”之间有任何共性——它是苹果、橘子和金橘。

2）“注释”的一个很好的例子可能是 JAXWS Web 服务：

*   [http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae%2Frwbs_jaxwsannotations.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae%2Frwbs_jaxwsannotations.html)

    在这种情况下，JAXWS 感知工具可以识别“@WebService”类和“@WebMethod”方法，解析您的 Java 代码并从中自动生成适当的代理、存根、WSDL 等。

3）这是对“注释”的一个很好的介绍：

> * [http://www.developer.com/java/other/article.php/3556176/An-Introduction-to-Java-Annotations.htm](http://www.developer.com/java/other/article.php/3556176/An-Introduction-to-Java-Annotations.htm)
> 
> 它 [基于注释的开发] 通过启用工具从源代码中的注释生成它，让我们避免在许多情况下编写样板代码。这导致了一种声明式编程风格，在这种风格中，程序员说应该做什么，而工具会发出代码来做这件事。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T00:10:08.640

**[注释](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)**本质上是*元数据*，即它们告诉一些关于类、方法或参数的信息，但不是它们注释的代码的一部分。类变量构成了代码本身的一部分，并服务于一个非常不同但同样重要的目的，即存储数据以供应用程序使用。

一个有用的例子是`@Override`告诉编译器一个方法已经存在于超类中的注解。此注释提供编译时检查，以检查方法及其参数是否正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T00:11:39.520

您可以使用注释来完成**面向方面的编程 (AOP)**。您应该尝试阅读有关*方法拦截器*的信息：尝试[http://docs.jboss.org/aop/1.3/aspect-framework/examples/method-execution/methodexecution.html](http://docs.jboss.org/aop/1.3/aspect-framework/examples/method-execution/methodexecution.html)和[http://code.google.com/p/google -guice/wiki/AOP](http://code.google.com/p/google-guice/wiki/AOP)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T00:20:58.323

您不能将全局变量绑定到类元素（构造函数、字段、方法等）并通过反射查询它们。这是一个区别。注释也有不同的保留等级：一旦被某些工具“处理”，它们就可以从字节码中删除，或者在运行时保留以供反射使用。

在注解之前，人们使用像 xdoclet 这样的工具来绑定来自 javadoc 注释的 java 源代码中的一些元信息；这些元信息被处理以生成周围的代码（即用于 EJB 中的持久性，或生成配置文件和其他源）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T00:10:14.620

> 注释如何比静态或全局类变量更有用？

来自[http://en.wikipedia.org/wiki/Java_annotations#Processing](http://en.wikipedia.org/wiki/Java_annotations#Processing)：

> 编译 Java 源代码时，注释可以由称为注释处理器的编译器插件处理。处理器可以产生信息性消息或创建额外的 Java 源文件或资源，这些源文件或资源又可以被编译和处理，也可以修改带注释的代码本身。如果注解的 RetentionPolicy 为 CLASS 或 RUNTIME，Java 编译器有条件地将注解元数据存储在类文件中。稍后，JVM 或其他程序可以查找元数据以确定如何与程序元素交互或更改它们的行为。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T01:43:26.267

```
How are annotations any more useful then a static or global class variable? 
```

他们一开始并不邪恶。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T02:27:41.020

在许多情况下，许多工具利用注释来帮助将您的对象映射到其他组件。ORM 将数据库中的每个字段映射到您的对象等？

# jquery - 剑道 UI 日历

> ID：14015716
> 
> 赞同：1
> 
> 时间：2012-12-24T00:05:40.713
> 
> 标签：jquery, kendo-ui

我一直在使用 Kendo UI Web，当我查看日历小部件并且有这样的语法时，`${ data.value }`我确信该语法会回显一个值。这种语法对我来说是新的，当我用谷歌搜索时，我似乎找不到关于它的文档。有人可以指出我正确的方向吗？我可以像这样填充日历小部件的日期选项吗

```
$.ajax({
  url: getHolidaysURL,
  success: function(data) {
    var json = JSON.parse(data);

    var holidayDates = new Array();

    for(var i = 0; i < json.length; i++) {
      var dateSplit = json[i].date;

      holidayDates.push(new Date(dateSplit[0], dateSplit[1], dateSplit[2]));
    }

    $('#holiday-calendar').data('kendoCalendar').options.dates = holidayDates;
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:22:47.810

**${ }**与**#: #**相同。[以下](http://docs.kendoui.com/getting-started/framework/templates/overview)是有关**#: #**的更多信息。

关于日期，我担心初始化小部件后设置的选项不会被考虑在内。为什么不销毁小部件并使用所需选项在成功回调中重新创建它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:46:49.340

除了@Pechka 所说`${}`的内容之外`widget`，您可以尝试：

```
var cal = $('#holiday-calendar').data('kendoCalendar');
cal.options.dates = holidayDates;
cal.navigateToPast();
cal.navigateToFuture(); 
```

这不是一个实际的**解决方案**，而是一个强制日历`refresh`并且到目前为止它有效的技巧。它所做的是移动到过去，然后移动到`calendar`未来。`redraw``calendar`

它实际上可能会根据浏览器的速度和计算机的屏幕产生某种闪烁，**但**它不会破坏和重新创建小部件。

# php - 来自 CI 演示者的设置值

> ID：14015719
> 
> 赞同：0
> 
> 时间：2012-12-24T00:06:26.083
> 
> 标签：php, html, codeigniter, mvp

我正在使用[ci-presenter 库](https://github.com/druu/ci-presenter)制作表单，我想使用 set_value() 函数。我如何从演示者那里使用它。

我需要在输入和 textarea 字段上设置值。

考虑到所有表单信息都在演示者身上，我是否可以在视图中添加一些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:54:28.960

嘿，您需要在表单文本字段中设置这样的值。

```
<input type="text" class="text" name="email" value="<?php echo set_value('email'); ?>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:00:51.793

我将 set_value() 函数作为参数传递给演示者调用。

# javascript - 如何使用 JavaScript 读取 html 页面的文本？

> ID：14015720
> 
> 赞同：0
> 
> 时间：2012-12-24T00:06:29.890
> 
> 标签：javascript

对于我正在处理的某个项目，我必须使用 Javascript 阅读另一个域上的网页文本。该网页将只包含我必须获得价值的“真”或“假”。有人告诉我我可以制作一个 iframe 并检查它的 innerHTML，但这似乎不起作用.. 想法？（我宁愿不使用jquery）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:17:49.050

您真的需要使用 javaScript - 它不能在服务器端完成吗（服务器端，即 php 会 http 到您想要从中获取内容的站点，然后根据响应中的内容进行操作）？

或者，我看起来只是对要从中读取内容的站点进行 javascript ajax 调用的一个很好的候选者 - 你可以使用 jquery 或许多其他 js 框架轻松地执行 ajax，也可以在没有任何框架的情况下执行它但是这将更困难，更少的证明保存。认为对于跨域 ajax 调用，你会遇到问题，所以无论如何你最终都会使用服务器端实现：类似的主题：[AJAX 跨域调用](https://stackoverflow.com/questions/2558977/ajax-cross-domain-call)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:09:01.487

不可能，出于安全原因。

否则我会制作 facebook 登录页面的 iframe，并阅读 html 和存储的用户/密码并破解每个人的帐户；）或将其中一个页面的 URL 放在您的银行帐户的网站上

# javascript - 从 JQuery 对象中选择一个 DOM 元素？

> ID：14015722
> 
> 赞同：0
> 
> 时间：2012-12-24T00:07:03.810
> 
> 标签：javascript, jquery

考虑 JQuery 对象 myDiv

```
myDiv = $('<div class="question"><b><span>MyText</span></b></div>'); 
```

如何选择跨度标签内的文本，以便我可以执行以下操作：

```
myElement.text = 'New text'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:10:45.383

像这样：

```
$('span', myDiv).text('New text'); 
```

*这会从*您的对象中选择跨度`myDiv`，并相应地设置文本。

这是一个[现场演示](http://jsfiddle.net/vsCmU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T00:10:31.330

像这样：

```
$('.question, span').text('new text'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T00:14:58.580

如果你事先不知道元素是什么，但它总是嵌套最深的：

```
var myDiv = $('<div class="question"><b><span>MyText</span></b></div>'),
    nested = myDiv.find(':last-child').last();
nested.text('my new text'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/tGwaD/)。

# python - python中的argv不能与Windows可执行cmdline一起使用

> ID：14015724
> 
> 赞同：3
> 
> 时间：2012-12-24T00:07:11.637
> 
> 标签：python, argv

在 Windows 中：我希望这个程序在命令行上运行。但是，我收到一个错误。我究竟做错了什么？

```
# create a method that append the letter stored in variable letter, ntimes.

import sys
def appender(letter,ntimes, sentence):
    print sentence+(letter*ntimes)

appender(str(sys.argv[1]),sys.argv[2], str(sys.argv[3])) 
```

以下是我从 Windows 命令行中得到的错误

```
C:\Users\QamarAli\Documents\afaq's stuff>appender.py "F" 10 "Hello this is sent"

Traceback (most recent call last):
  File "C:\Users\QamarAli\Documents\afaq's stuff\appender.py", line 8, in <modul
e>
    appender(str(sys.argv[1]),sys.argv[2], str(sys.argv[3]))
  File "C:\Users\QamarAli\Documents\afaq's stuff\appender.py", line 5, in append
er
    print sentence+(letter*ntimes)
TypeError: can't multiply sequence by non-int of type 'str'

C:\Users\QamarAli\Documents\afaq's stuff> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T00:09:34.233

错误很明显：

```
TypeError: can't multiply sequence by non-int of type 'str' 
```

您试图将一个序列（在本例中为一个字符串）乘以一个不是数字的东西。将您的参数转换为整数：

```
appender(sys.argv[1], int(sys.argv[2]), sys.argv[3]) 
```

此外，`sys.argv`参数默认为字符串，因此无需再次显式转换它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T00:09:20.023

中的值`sys.argv`都是字符串。而不是尝试将一些转换为字符串，您需要将*其他*转换为您需要的任何非字符串类型。如果您希望中间一个是整数，请调用`int`它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T00:09:28.900

**Python 将所有**命令行参数视为字符串。

将您的呼叫更改为

```
appender(sys.argv[1], int(sys.argv[2]), sys.argv[3]) 
```

# css - 如何在css中创建这个图像按钮？

> ID：14015727
> 
> 赞同：1
> 
> 时间：2012-12-24T00:08:10.160
> 
> 标签：css

我创建了这个 png 图像，我将其用于网站中的按钮。问题是png图片必须多次使用，这增加了网络流量。我想在 css 中创建相同的图片并将其用作按钮。你能帮忙在css中创建这个按钮吗？

![在此处输入图像描述](../Images/f99fd01a54a3bcfa771c15cbd0846dc3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T00:19:11.973

如果您在多个地方使用相同的图像文件，它只会被下载一次。

话虽如此，这个按钮在 CSS 中很容易实现：

```
<input type="submit" class="button" value="New Router" />

.button {
    background: #eeeeee; /* Old browsers */
    background: -moz-linear-gradient(top,  #eeeeee 0%, #b4b4b4 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#b4b4b4)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #eeeeee 0%,#b4b4b4 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #eeeeee 0%,#b4b4b4 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #eeeeee 0%,#b4b4b4 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #eeeeee 0%,#b4b4b4 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#b4b4b4',GradientType=0 ); /* IE6-9 */
    border: solid #676767 2px;
    border-radius: 3px;
    color: #111;
    font-family: Trebuchet, Arial, Helvetica, Sans-serif;
    font-size: 12pt;
    font-weight: normal;
    height: 18pt;
    line-height: 18pt;
    text-align:center;
} 
```

# asp.net-mvc - 如何将其重写为 MVC Razor 3？

> ID：14015728
> 
> 赞同：0
> 
> 时间：2012-12-24T00:08:25.620
> 
> 标签：asp.net-mvc, razor, syntax

它是一个简单的片段，但 .replace 在我的 mvc razor 视图中没有被识别：我用**@替换了****<%= %>**，不确定还需要什么？

 **```
 <%=Ajax.ActionLink("[replacethis]", 
        "ToggleEnabled", 
                new { id = Model.ID }, 
                new AjaxOptions { UpdateTargetId = "toggleimage" + Model.ID }).Replace("[replacethis]",
                string.Format("<div id='toggleimage{0}'><img src='/Content/icons/{1}' border='0' alt='toggle'/></div>", 
                Model.ID, Model.Enabled ? "tick.png" : "tick_grey.png"))%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:15:28.640

我不确定这是否是理想的，但你可以通过以下方式获得你想要的东西：

1.  插入`.ToHtmlString()`（即，将 MvcHtmlString 转换为原始 HTML 字符串，以便您可以调用`Replace`它）
2.  将整个东西包裹起来`Html.Raw()`（这样它就不会在渲染之前进行 HTML 编码）

* * *

```
@Html.Raw(
    Ajax.ActionLink("[replacethis]", 
        "ToggleEnabled", 
        new { id = Model.ID }, 
        new AjaxOptions { UpdateTargetId = "toggleimage" + Model.ID })
   .ToHtmlString()
   .Replace("[replacethis]",
       string.Format("<div id='toggleimage{0}'><img src='/Content/icons/{1}' border='0' alt='toggle'/></div>", 
           Model.ID, Model.Enabled ? "tick.png" : "tick_grey.png")
   )
) 
```**

# ios - UIReferenceLibraryViewController 导致崩溃

> ID：14015729
> 
> 赞同：0
> 
> 时间：2012-12-24T00:08:31.183
> 
> 标签：ios, xcode4.5

我希望有人可以帮助解决我在代码中某处引入的错误。在我尝试清除旧的注释代码并且必须删除某些内容之前，一切都运行良好。

它是一个 Cocos2d 应用程序。每当调用 UIReferenceLibraryViewController 的 initWithTerm 方法时，它就会崩溃。

```
reference = [[UIReferenceLibraryViewController alloc] initWithTerm:[[cell viewWithTag:1] text]]; 
```

这在过去工作得很好。现在它正在崩溃

```
CoreFoundation`CFRelease:
0x24633b0:  pushl  %ebp
0x24633b1:  movl   %esp, %ebp
0x24633b3:  pushl  %ebx
0x24633b4:  pushl  %edi
0x24633b5:  pushl  %esi
0x24633b6:  subl   $76, %esp
0x24633b9:  calll  0x24633be                 ; CFRelease + 14
0x24633be:  popl   %ebx
0x24633bf:  movl   %ebx, -32(%ebp)
0x24633c2:  movl   8(%ebp), %edi
0x24633c5:  testl  %edi, %edi
0x24633c7:  jne    0x24633df                 ; CFRelease + 47
0x24633c9:  int3   
0x24633ca:  calll  0x25baa00                 ; symbol stub for: getpid
0x24633cf:  movl   %eax, (%esp)
0x24633d2:  movl   $9, 4(%esp) 
```

在这一行，0x24633ca: calll 0x25baa00
I am getting EXC_BREAKPOINT (code=EXC_I386_BPR, subcode=0x0)

在调试导航器中，我看到以下内容

![在此处输入图像描述](../Images/b0446d1b27dc9fc1731157e530ca5c23.png)

任何建议，将不胜感激。

# wpf - WPF 图像控件加载通知

> ID：14015732
> 
> 赞同：0
> 
> 时间：2012-12-24T00:08:57.680
> 
> 标签：wpf, image, data-binding

我正在使用`Image`WPF 控件来显示一些高分辨率图像。我通过设置它的`Source`属性来做到这一点，从设置属性到显示图像需要大约 2-3 秒。在那段时间我需要通知用户图像正在加载，有什么办法吗？当图像加载完成时，控件是否`Image`有任何方法通知？

# user-controls - 将用户控制导入实时网站

> ID：14015735
> 
> 赞同：2
> 
> 时间：2012-12-24T00:09:05.927
> 
> 标签：user-controls, webforms

我有一个网站，它将用户控件 (.ascx) 导入到实时网站的目录中。

显然，一旦用户控件被导入到目录中，它实际上并不是网站的“一部分”，它只是一个位于网站目录中的 .ascx 文件。

当我尝试将用户控件添加到面板时，我收到“无法加载类型 'CMS.Modules.HelloWorld'”。错误。

```
 Control content = LoadControl(@"~/Modules/" + ddlExtraModules.SelectedValue.ToString() + "/HelloWorld.ascx");
    pnlSections.Controls.Add(content); 
```

实际上是否可以“即时”将用户控件添加到网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:42:58.850

看起来您可以在运行时编译时将 ascx 文件动态添加到 Web 应用程序。仅在网络表单上使用它们，不要直接请求它们。

[http://msdn.microsoft.com/en-us/library/system.web.ui.usercontrol.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.usercontrol.aspx)

> 此外，设计器创建了@Register 指令，该指令是页面识别用户控件所必需的。

[http://msdn.microsoft.com/en-us/library/5d0t5fak%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/5d0t5fak%28v=vs.80%29.aspx)

# python - 在 Python 中使用 replace() 函数一次替换多个文本（字符串）

> ID：14015738
> 
> 赞同：4
> 
> 时间：2012-12-24T00:09:29.770
> 
> 标签：python, replace

这是我的代码：

```
start_j = raw_input('Enter a name: ')
start_j = start.replace("A", "J")
start_j = start.replace("B", "J")
start_j = start.replace("C", "J")
print "Your name is " + start_j 
```

无论如何将所有字母放在一个列表中，这样我就不必一次又一次地重复相同的过程，直到我达到字母“Z”我尝试使用循环，但我似乎仍然无法获得正确的方法去做吧。

这是一个场景：将提示用户输入名称。如果名称中包含“J”以外的字母，它将使用 replace() 函数自动替换。因此它将打印出以 J 开头的输入

这是一个例子：

```
site = raw_input('Enter your website: ')
site = site.replace("http://", "")
site = site.replace("https://", "")
site = site.replace("ftp://", "")
print "Your website is: " + site 
```

预期的输入将是[http://www.google.com](http://www.google.com) 所以预期的输出将变为：

```
Enter your website: http://www.google.com
Your website is: www.google.com 
```

我正在寻找一种将“http://”、“https://”、“ftp://”全部放在一个列表中的方法，这样我就不必输入

```
site = site.replace("something", "something) 
```

很多次

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T00:12:06.420

您可以使用正则表达式一次替换所有字母：

```
>>> import re
>>> re.sub(r'[A-Z]', 'J', 'This Is A Test Name')
'Jhis Js J Jest Jame' 
```

* * *

（编辑后）：您可以使用`.startswith()`和字符串切片：

```
>>> name = 'A Name'
>>> 
>>> if not name.startswith('J'):
...     name = 'J' + name[1:]
... 
>>> name
'J Name' 
```

虽然我不确定你为什么甚至需要检查`.startswith()`. 无论哪种方式，结果都是一样的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T00:10:31.970

你可以使用这个：

```
remove_from_start = ["http://", "https://", "ftp://"]
for s in remove_from_start:
    if site.startswith(s):
        site = site[len(s):]
        break 
```

或基于正则表达式的解决方案：

```
import re
regex = '^(https?|ftp)://'
site = re.sub(regex, '', site) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T00:33:59.033

```
import re

site = raw_input('Enter your website: ')
# input http://www.google.com or https://www.google.com or ftp://www.google.com
site = re.sub('^(?:https?|ftp)://', '', site)
print "Your website is: " + site 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T00:12:34.017

使用字典：

```
In [100]: import string

In [101]: dic=dict.fromkeys(string.ascii_uppercase,"J")

In [104]: start_j = raw_input('Enter a name: ')
Enter a name: AaBbCc

In [105]: "".join(dic.get(x,x) for x in start_j)
Out[105]: 'JaJbJc' 
```

**编辑：**

```
In [124]: dic={"https:":"","http:":"","ftp:":""}

In [125]: strs="http://www.google.com"

In [126]: "".join(dic.get(x,x) for x in strs.split("//"))
Out[126]: 'www.google.com' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T03:32:37.257

使用 re、dict 和 lambda：

```
import re
replacte_to = {
    "http://": "",
    "https://": "",
    "ftp://": "",
}
re.sub("^(ht|f)tps?://", lambda match: replacte_to[match.group(0)], YOUR_INPUT_STRING) 
```

# gis - 给定一个位置的坐标，在本地查找邮政编码，无需任何 Web API

> ID：14015745
> 
> 赞同：0
> 
> 时间：2012-12-24T00:10:12.720
> 
> 标签：gis, postgis, reverse-geocoding, shapefile

我正在使用网站上的 Google 地图对大型空间数据集（大约 250 万条记录）进行可视化。数据点对应于城市内的地理坐标。我正在尝试根据他们的邮政编码对数据点进行分组，以便我可以可视化城市内每个邮政编码的某种形式的统计信息。

Google API 提供了“反向地理编码”一个点来获取邮政编码的选项，但它强制每个 IP 每天 2500 的使用限制。鉴于我的数据集的大小，我认为 Google 或任何其他强制实施的 Web API 都不实用。

现在，经过几轮谷歌搜索，我发现如果我们有邮政编码的边界数据，就可以建立一个空间数据库。我已经下载了上述边界数据，但它们是所谓的“shapefile”格式。我正在尝试使用 PostGIS 建立一个空间数据库，我可以查询每个数据点以找出它属于哪个邮政编码。

我是否朝着正确的方向前进？

如果是的话，有人可以分享任何已知的例子，这些例子已经做了类似的事情，因为我似乎已经走到了 PostGIS 的死胡同。

如果不是，请根据我的要求指出正确的行动方案。

谢谢。

# gcc - gcc 的 -fforce-mem 选项

> ID：14015747
> 
> 赞同：5
> 
> 时间：2012-12-24T00:10:18.627
> 
> 标签：gcc

gcc v.4.5.3 是否仍然支持 -fforce-mem 选项？我正在尝试构建使用此选项的 libmad MP3 解码器。谷歌搜索显示对此选项的引用，但[在线 gcc 文档](http://gcc.gnu.org/onlinedocs/gcc/Option-Index.html#Option-Index)没有显示它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T00:20:45.953

从[GCC 4.3 发行说明](http://gcc.gnu.org/gcc-4.3/changes.html)：

> -fforce-mem 选项已被删除，因为它在最近的几个 GCC 版本中无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T00:53:37.240

正如上面提到的 perreal， -fforce-mem 选项不再起作用。

[要安装 libmad，请使用补丁以及此处](http://www.linuxfromscratch.org/blfs/view/svn/multimedia/libmad.html)列出的说明

# objective-c - NSURLConnection sendSynchronousRequest/sendAsynchronousRequest 在应用程序被 iOS 杀死后失败

> ID：14015751
> 
> 赞同：9
> 
> 时间：2012-12-24T00:10:42.623
> 
> 标签：objective-c, ios, nsurlconnection

我的应用程序中的所有服务器连接都以相同的方式进行：

*   dispatch_async 到第二个线程。
*   发送同步请求
*   主线程上的失败/成功块。

*   *以下不是完整的代码，只是概念：*

    ```
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSURL *url = [NSURL URLWithString:@"someURL"];
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
        NSURLResponse *response = nil;
        NSError *error;
        NSData *data = [NSURLConnection sendSynchronousRequest:request
                                                 returningResponse:&response
                                                             error:&error];
       if (error)
       {
          dispatch_async(dispatch_get_main_queue(), ^{ _failureBlock(error); });
       }
       else
       {
          dispatch_async(dispatch_get_main_queue(), ^{ _successBlock(data); });
       }); 
    ```

好吧，该应用程序运行良好！我可以将它用于数千个服务器连接，并且在我运行新加载的应用程序时它总是可以工作。当发生以下情况时，问题开始：

1.  将应用程序发送到 BG。
2.  等一会...
3.  该应用程序被iOS杀死。
4.  再次打开，iOS 从头开始​​加载整个应用程序。（请参阅启动屏幕，然后是第一个屏幕，而不是我留给 BG 的那个..）

在那种情况下，我得到 NSURLConnectionErrors！样样都有！代码 1003、代码 1009、代码 9……只要说出它的名字！我收到应用程序加载时立即启动的**所有服务器连接的错误。**之后的任何其他连接都可以正常工作！包括那些失败的刷新！

几乎感觉我试图太快或太早地到达我的服务器，**但**我确实在启动连接之前检查并通过了可达性测试。

真的可以在这里使用一些帮助。 **提前致谢。**

更新：如下所示，尝试使用**sendAsynchronousRequest** - 给了我完全相同的行为。（错误：这次是 1001）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:01:15.640

好的，我知道了！appDelegate 构建了 tabBar，它加载了所有 viewController，发送了一些 NSURLConnections ...... （不知道第一次启动是可以的，只有在应用程序杀死它之后才可以）

无论如何， **我将所有服务器负载更改为使用具有 0.1 延迟的选择器执行。**这样 appDelegate 就可以完成运行，一切都很好！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T00:39:46.420

您应该查看使用此方法并异步发送数据

```
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) 
```

NSPertationQueue mainQueue 使用主线程，但是允许您在主线程上更新 UI，例如一个活动指示器。

# java - Java中的四元堆

> ID：14015753
> 
> 赞同：6
> 
> 时间：2012-12-24T00:11:18.923
> 
> 标签：java, data-structures, heap, priority-queue

二进制堆通常用于例如优先级队列。基本思想是不完全堆排序：您保持数据排序“刚好够”以快速取出顶部元素。

虽然 4 元堆在理论上比二元堆更糟糕，但它们也有一些好处。例如，它们将需要更少的堆重组操作（因为堆更浅），而显然需要在每个级别进行更多的比较。但是（这可能是他们的主要好处？）他们可能有更好的 CPU 缓存位置。所以一些消息来源说 3-ary 和 4-ary heaps*在实践中*优于 Fibonacci 和 binary heaps 。它们应该不会更难实现，额外的案例只是一些额外的`if`案例。

有没有人为优先级队列尝试过 4 元堆（和 3 元）并进行了一些基准测试？在 Java 中，在对它们进行广泛的基准测试之前，您永远不知道它们是更快还是更慢。从我通过谷歌找到的所有信息来看，它可能完全依赖于语言和用例。一些消息来源说，他们发现 3-ary 对他们来说表现最好。

还有几点：

*   `PriorityQueue`显然是一个二叉堆。但是例如该类也缺乏批量加载和批量修复支持，或者`replaceTopElement`可以产生巨大的差异。例如批量加载`O(n)`而不是`O(n log n)`; 添加更大的候选集后，批量修复基本相同。跟踪堆的哪些部分是无效的可以用一个整数来完成。`replaceTopElement`比`poll`+便宜得多`add`（只需考虑如何实施民意调查：用最后一个替换顶部元素）
*   虽然堆对于复杂对象当然很受欢迎，但优先级通常是双精度值的整数。这不像我们在这里比较字符串。通常它是（原始）*优先级*
*   PQ 通常仅用于获取前 k 个元素。例如，A*-search 可以在达到目标时终止。然后丢弃所有不太好的路径。所以队列永远不会完全清空。在 4 路堆中，顺序*较少*：大约是一半（父节点数量的一半）。因此，它将对这些不需要的元素施加较少的顺序。（如果您打算完全清空堆，这当然会有所不同，例如因为您正在进行堆排序。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:00:34.113

根据@ErichSchubert 的建议，我从[ELKI](http://elki.dbs.ifi.lmu.de/)中获取了实现并将它们修改为 4 进制堆。正确的索引有点技巧，因为很多关于 4 元堆的出版物都使用 1 索引数组的公式？！？

以下是一些基于 ELKI 单元测试的早期基准测试结果。预先分配了200000`Double`个对象（以避免过多地测量内存管理）和洗牌。

作为热身，每个堆执行 10 次迭代，以对 100 次迭代进行基准测试，但我可能会尝试进一步扩大规模。10-30 秒对于基准测试来说还不是很可靠，而且我也应该尝试测量标准偏差。在每次迭代中，将 200000 个元素添加到堆中，然后再次轮询其中的一半。是的，工作量也可以变得更复杂。

结果如下：

*   我的 4 进制`DoubleMinHeap`：10.371
*   `DoubleMinHeap`埃尔基：12.356
*   `Heap<Double>`埃尔基：37.458
*   爪哇`PriorityQueue<Double>`：45.875

所以 4 元堆（可能还没有 L1 缓存对齐！）和用于*原始*双精度的 ELKI 堆之间的差异并不太大。嗯，10%-20%左右；这可能会更糟。

`double`原始s 的堆和对象的堆之间的差异`Double`要大得多。并且 ELKI`Heap`确实比 Java 快得多`PriorityQueue`（但那似乎有很大的差异）。不过，ELKI 中存在一个轻微的“错误”——至少原始堆还没有使用批量加载代码。它就在那里，只是没有被使用，因为每个元素都会立即修复堆，而不是将其延迟到下一个`poll()`. 我为我的实验解决了这个问题，主要是通过删除几行并添加一个`ensureValid();`调用。此外，我还没有 4 元对象堆，而且我还没有包括 ELKI .. `DoubleObjectMinHeap`​​....很多基准测试，我可能会尝试使用 caliper。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:00:28.537

我自己没有对其进行基准测试，但有几点需要说明。

首先，注意 PriorityQueue 的标准 Java 实现使用二叉堆：

*   [http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/PriorityQueue.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/PriorityQueue.java)

合理的情况是，尽管 n 元堆具有缓存局部性优势，但平均而言，二进制堆仍然是最佳解决方案。以下是一些可能会出现这种情况的略微手动的原因：

*   对于大多数有趣的对象，**比较成本**可能比堆数据结构本身中的缓存位置效应更重要。n 元堆需要更多的比较。这本身可能足以超过堆本身的任何缓存局部性影响。
*   如果您只是在适当的位置制作一堆数字（即由整数或双精度数组支持），那么我可以看到 chache 位置将是一个值得的好处。但事实并非如此：通常你会有**一堆对象引用**。对象引用本身的缓存局部性则不太有用，因为每次比较都需要遵循至少一个额外的引用来检查引用的对象及其字段。
*   优先级堆的**常见情况**可能是相当小的堆。如果从性能的角度来看，你足够关心它，那么它可能都在 L1 缓存中。因此，无论如何，n 元堆都没有缓存位置优势。
*   **使用按位操作**更容易处理二进制堆。当然这不是一个很大的优势，但每一点都有帮助....
*   **在其他条件相同的情况下，更简单的算法**通常比更复杂的算法更快，这仅仅是因为恒定开销较低。您将获得诸如降低指令缓存使用率、更高的编译器能够找到智能优化的可能性等好处。这再次有利于二进制堆。

显然，当然，您需要对自己的数据进行自己的基准测试，然后才能得出关于哪个性能最好的真正结论（以及差异是否足以关心，我个人对此表示怀疑......）

**编辑**

此外，鉴于原始海报在下面的评论中提到的原始键，我确实使用一组可能感兴趣的原始键编写了优先级堆实现：

*   [https://github.com/mikera/mikera/blob/master/src/main/java/mikera/util/RankedQueue.java](https://github.com/mikera/mikera/blob/master/src/main/java/mikera/util/RankedQueue.java)

如果有人对运行测试感兴趣，这可能会相对容易地被破解为 n 元版本以进行基准测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T14:42:17.767

~~我还没有对 4 进制堆进行基准测试。~~我目前正在尝试优化我们自己的堆实现，并且我也在尝试 4 元堆。你是对的：我们需要仔细进行基准测试，因为很容易被实现差异误导，热点优化会严重影响结果。另外，小堆可能会显示出与大堆不同的性能特征。

Java`PriorityQueue`是一个非常*简单*的堆实现，但这意味着 Hotspot 会很好地对其进行优化。这一点也不坏：大多数人会实现更糟糕的堆。但是，例如，它确实不能进行有效的批量加载或批量添加（批量修复）。然而，在我的实验中，即使在重复插入的模拟中也很难始终如一地击败这种实现，除非你使用非常大的堆。此外，在许多情况下，替换堆中的顶部元素而不是`poll()`+是值得的`add()`；这不受 java 的`PriorityQueue`.

ELKI 中跨版本的一些性能提升（我已经看到您是 ELKI 用户）实际上是由于改进的堆实现。但这是一个起起落落的过程，很难预测哪种堆变化在实际工作负载中表现最好。我们实现的主要好处可能是具有“replaceTopElement”功能。您可以在此处检查代码：

[SVN de.lmu.ifi.dbs.elki.utilities.heap 包](http://elki.dbs.ifi.lmu.de/browser/elki/trunk/src/de/lmu/ifi/dbs/elki/utilities/datastructures/heap)

你会注意到我们在那里有*一整套*堆。它们针对不同的东西进行了优化，并且需要更多的重构。其中许多类实际上是从模板生成的，类似于[GNU Trove](http://trove.starlight-systems.com/)所做的。原因是在管理盒装原语时，Java 的成本可能相当高，因此拥有原语版本确实是值得的。（是的，有计划将其拆分为一个单独的库。这不是高优先级。）

请注意，ELKI 故意不认可该`java.util.Collections`API。我们特别发现这个`java.util.Iterator`类非常昂贵，因此试图鼓励人们在整个 ELKI中使用[C++ 风格的迭代器：](http://www.dbs.ifi.lmu.de/research/KDD/ELKI/release0.5.5/doc/de/lmu/ifi/dbs/elki/utilities/iterator/Iter.html)

```
for (Iter iter = ids.iter(); iter.valid(); iter.advance()) { 
```

`java.util.Iterator`通常通过API节省大量不必要的对象创建。另外，这些迭代器可以有*多个*（和*原始*的）值获取器；其中`Iterator.next()`是吸气剂和高级运算符的混合体。

好吧，我现在跑题太多了，回到 4 元堆的话题：

如果您打算尝试 4-ary heaps，我建议您从`ObjectHeap`那里的课程开始。

**更新**：我一直在进行微基准测试，但到目前为止的结果尚无定论。很难`PriorityQueue`持续击败。特别是批量加载和批量修复似乎并没有削减我的基准测试中的任何内容 - 可能它们导致 HotSpot 优化较少，或者在某些时候取消优化。通常，更简单的 Java 代码比复杂的逻辑更快。到目前为止，没有批量加载的 4 进制堆似乎效果最好。我还没有尝试过 5 进制。3 元堆与 4 元堆大致相等；并且 4-ary 的内存布局更好一些。我也在考虑尝试一种堆堆方法来安全地调整数组大小。但我预计增加的代码复杂性意味着它在实践中会运行得更慢。

# jquery - jQuery .on() 有时有效，有时无效

> ID：14015754
> 
> 赞同：3
> 
> 时间：2012-12-24T00:11:30.147
> 
> 标签：jquery, jquery-on

我有奇怪的问题。起初我不想使用 .on() 方法，因为我根本无法让它工作，所以我使用了 .live()。

现在，我正在编写一个新的 jQuery 脚本，我大量使用了 .on() 并且它可以工作。到目前为止。

jQuery代码：

```
 $('#artistList a').on('click',function(e){
    console.log($(this).parent().text());
    e.preventDefault();
   }); 
```

HTML 代码：

```
<div id="artistList">
 <div class="artist"><a class="delete" href="#"></a>Psy</div>
 <div class="artist"><a class="delete" href="#"></a>Fernanda Martins</div>
 <div class="artist"><a class="delete" href="#"></a>DJ Nreal</div>
</div> 
```

也试过这种方法：

```
 $('#artistList>a').on('click',function(e){
   $('.delete').on('click',function(e){ 
```

没运气。我错过了什么？

这是唯一不起作用的部分

我已阅读有关 .on() 的文档，并基于此，这应该可以工作。另外，我正在使用最新的 jQuery (jquery-1.8.3.min.js)。

**编辑**

`<a>`元素在 CSS 中有一个`width: 15px`and `height: 15px`，所以它们是可见的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T00:31:28.097

为了像您一样工作，`live`您需要将处理程序委托给更高级别的元素。

```
 $('body').on('click','#artistlist a', function(e) {
     // note the change to the selector to reflect your actual mark up
     // handler body
 }); 
```

如果处理程序应应用的元素是在页面初始加载后动态添加的，则需要使用这种形式的[on 。](http://api.jquery.com/on)还要注意，应该在加载 DOM 之后应用处理程序，方法是在 body 元素的末尾放置脚本或使用`ready`事件处理程序，`$(function() { ... });`

如果处理程序有时有效，有时无效，则很可能是加载到 DOM 中的元素和被调用的脚本之间的页面加载竞争条件。这通常表明您省略了在就绪事件处理程序中添加处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T00:13:02.357

您的链接（`<a>`元素）在这里是空的，因此它们显然无法捕获`click`事件。我想你忘了把那些*东西*`Psy`等搬进去了`Fernanda Martins`。 *`<a href="..."></a>`*

 *此外，只有第二个选择器会实际收集这些链接（因为它们都有类`delete`）。第一个 - `'#artistList>a'`- 尝试找到作为具有id的元素的*直接*后代的锚点。`artistList`但在这个崇高的追求中注定要失败，因为他们之间还有另一层—— `<div class="artist">`。所以规则可能应该是这样的`'#artistList a'`。*

# node.js - 在同一个 fd 上多次 createReadStream

> ID：14015757
> 
> 赞同：3
> 
> 时间：2012-12-24T00:12:15.387
> 
> 标签：node.js, random-access

[在前面的问题](https://stackoverflow.com/questions/13932967)中，似乎从 node.js 中的文件进行随机访问读取的唯一方法是使用[`fs.createReadStream()`](http://nodejs.org/api/fs.html#fs_fs_createreadstream_path_options)其可选`fd`的`start`、 和`end`字段。

这在我最简单的测试中运行良好。但在我的项目中，我需要反复读取二进制文件的不同偏移量。这以一种奇怪的方式失败了，所以我想出了一个最小的测试用例：

```
var fs = require('fs');

fs.open('test.txt', 'r', function (err, fd) {
  if (err) {
    console.error('error opening file: ' + err);
  } else {
    fs.createReadStream(null, {fd: fd, start: 2, end: 5}).on('error', function (err) {
        throw e;
      }).on('close', function () {
        console.log('outer close');
      }).on('data', function (data) {
        console.log('outer data', data);
      }).on('end', function () {
        console.log('outer end');

        fs.createReadStream(null, {fd: fd, start: 0, end: 3}).on('error', function (err) {
            throw e;
          }).on('close', function () {
            console.log('inner close');
          }).on('data', function (data) {
            console.log('inner data', data);
          }).on('end', function () {
            console.log('inner end');

            // more code to execute after both reads
          });
      });
  }
}); 
```

`end`永远不会收到内部事件。（外部`close`接收不一致，但我不需要附加代码。）

我之前在 Perl 甚至在 JavaScript 中作为 Firefox 扩展实现了这个项目，但在 node.js 下它被证明是困难的。这也是对我是否可以开始[使用 node.js 作为通用脚本语言](https://stackoverflow.com/questions/13899623)的测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:49:00.957

问题是外部`ReadStream`将在`fd`使用后关闭它，因此在第二个重复使用它`ReadStream`会失败。最新的 Node 不稳定实际上有一个`autoClose`选项，`ReadStreams`但这还不是 stable 的一部分。

真正的答案是您在上一个问题中提供给您的信息不正确。`createReadStream`是使用所有公共 API 实现的，所以没有什么是你不能做的。在这种情况下，您可以只使用`fs.read`它的`position`参数。

```
var fs = require('fs');                                                         

fs.open('test.txt', 'r', function (err, fd) {                                   
  if (err) {                                                                    
    console.error('error opening file: ' + err);                                
  } else {                                                                      
    fs.read(fd, new Buffer(4), 0, 4, 2, function(err, bytesRead, data){        
      if (err) throw err;                                                       
      console.log('outer data', data);                                          

      fs.read(fd, new Buffer(3), 0, 3, 0, function(err, bytesRead, data2){   
        if (err) throw err;                                                     
        console.log('inner data', data2);                                       
        fs.close(fd);                                                           

        // more code to execute after both reads                                
      });                                                                       
    });                                                                         
  }                                                                             
}); 
```

# ios - 在数组中搜索字符串

> ID：14015765
> 
> 赞同：1
> 
> 时间：2012-12-24T00:13:24.917
> 
> 标签：ios

我想要实现的是在数组中搜索字符串，这是搜索数组的代码

```
 if ([EssentialsArray containsObject:imageFilePath]) {

        NSLog(@"YES");
    }
    else {

        NSLog(@"NO");
        NSLog(@"%@", ImageFilePath);
        NSLog(@"%@", EssentialsArray);
    } 
```

NSLogs 为 imageFilePath 返回这个：

```
/var/mobile/Applications/5051DC84-CAC8-4C1D-841D-5539A1E28CB1/Documents/12242012_11025125_image.jpg 
```

这对于 EssentialsArray：

```
(
        {
        EssentialImage = "/var/mobile/Applications/5051DC84-CAC8-4C1D-841D-5539A1E28CB1/Documents/12242012_11025125_image.jpg";
    }
) 
```

然后显然他们返回一个“NO”值，因为数组找不到字符串。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T02:36:11.020

问题是调用`[EssentialsArray containsObject:imageFilePath]`清楚地假定这`EssentialsArray`是一个字符串数组，而事实并非如此。它是一个带有一个键的字典条目数组，`EssentialImage`.

至少有两种解决方案。第一个是为那些键为的字典条目创建一个字符串数组`EssentialImage`：

```
NSArray *essentialImages = [essentialsArray valueForKey:@"EssentialImage"];

if ([essentialImages containsObject:imagePath])
    NSLog(@"YES");
else
    NSLog(@"NO"); 
```

根据您的大小`essentialsArray`（请注意，约定要求变量始终以小写字母开头），创建一个数组似乎有点浪费`containsObject`，但它确实有效。

其次，我认为更好的是使用快速枚举来遍历您的字典条目数组，寻找匹配项。为此，请定义一个方法：

```
- (BOOL)arrayOfDictionaries:(NSArray *)array
       hasDictionaryWithKey:(id)key
             andStringValue:(NSString *)value
{
    for (NSDictionary *dictionary in array) {
        if ([dictionary[key] isEqualToString:value]) {
            return YES;
        }
    }

    return NO;
} 
```

您现在可以检查您的字典数组是否有一个名为的键`@"EssentialImage"`，其字符串值等于包含的字符串`imagePath`

```
if ([self arrayOfDictionaries:essentialsArray
         hasDictionaryWithKey:@"EssentialImage" 
               andStringValue:imagePath])
    NSLog(@"YES");
else
    NSLog(@"NO"); 
```

* * *

更新：

您还可以使用[谓词](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"EssentialImage contains %@", imagePath];

BOOL found = [predicate evaluateWithObject:array]; 
```

# f# - 我在 Visual Studio 2012 上使用 F# Interactive 时遇到 DLL 问题

> ID：14015768
> 
> 赞同：2
> 
> 时间：2012-12-24T00:14:00.913
> 
> 标签：f#, visual-studio-2012, z3, f#-interactive

我在 64 位机器上运行 VS 2012，但我已将“F# 64 位交互”选项设置为 False，这意味着它应该默认为 32 位进程。

我正在调用 32 位 DLL 并且我的程序编译正常，但是当我尝试运行程序时出现可怕的 DLL 不兼容错误：

> System.BadImageFormatException：试图加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）。

有任何想法吗？

我尝试了 64 位和 32 位选项，但我得到了同样的错误。使用非交互式 F#（即使用`fsc`.

# zend-framework - 使用 Zend Search Lucene 索引和搜索特殊字符

> ID：14015769
> 
> 赞同：1
> 
> 时间：2012-12-24T00:14:25.917
> 
> 标签：zend-framework, special-characters, zend-search-lucene

当我搜索“#”等特殊字符时，没有结果。

请注意，我已经转义了查询字符串。

但是，当与“c#”之类的字母组合时，Lucene 会找到该术语。

有没有办法搜索单个特殊字符？

这是我的片段：

`Zend_Search_Lucene_Search_Query_Wildcard::setMinPrefixLength(1);`

 ````
Zend_Search_Lucene_Analysis_Analyzer::setDefault(
    new \Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8Num_CaseInsensitive());            

$index = Zend_Search_Lucene::create('/tmp/index');       
$doc = new Zend_Search_Lucene_Document;
$doc->addField(Zend_Search_Lucene_Field::Text('title', 'Some Title Here', 'UTF-8'))
    ->addField(Zend_Search_Lucene_Field::Text('content-01', '+ @ #', 'UTF-8'))
    ->addField(Zend_Search_Lucene_Field::Text('content-02', 'C+ C#', 'UTF-8'));        

$index->addDocument($doc);
$index->commit();

/* returns 0 results */
$r = $index->find("/#");
echo count($r) . "\n";

/* returns 1 results */
$r = $index->find('C#');
echo count($r) . "\n";

/* returns 1 results */
$r = $index->find('C+');
echo count($r) . "\n"; 
````  `* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T07:18:35.500

根据这个[页面](http://framework.zend.com/manual/1.12/en/zend.search.lucene.query-language.html#zend.search.lucene.query-language.escaping)的特殊字符列表如下：

```
+ - && || ! ( ) { } [ ] ^ " ~ * ? : \ 
```

所以你不应该逃避`#`。但即使你不使用转义“斜线”，你仍然会得到 0 个结果。即使将`Text`字段类型更改为 ，也无法修复此行为`Keyword`。

所以我开始研究它并运行这段代码：

```
echo('<pre>');
var_dump(Zend_Search_Lucene_Search_QueryParser::parse("#"));
echo('</pre>');
die(); 
```

它返回`Zend_Search_Lucene_Search_Query_Boolean`带有一个子查询`Zend_Search_Lucene_Search_Query_Preprocessing_Term`类型的对象。根据[文档](http://framework.zend.com/apidoc/1.9/Zend_Search_Lucene/Search/Zend_Search_Lucene_Search_Query_Preprocessing_Term.html)，有趣的是：

> 它是一个内部抽象类，旨在完成查询解析后的查询处理。
> 
> 这种类型的查询实际上并不**参与****查询执行**。

所以我唯一的想法是：不要再使用默认解析器了！

所以我认为您的问题的解决方案很简单 - 使用[查询构造 API](http://framework.zend.com/manual/1.12/en/zend.search.lucene.query-api.html)手动创建查询：

```
$term  = new Zend_Search_Lucene_Index_Term("#");
$query = new Zend_Search_Lucene_Search_Query_Term($term);

/* still returns 0 results!! */
$r = $index->find($query);
echo('<pre>');
var_dump(count($r));
echo('</pre>'); 
```

但它不再起作用了！

我使它工作的唯一方法（也使用查询解析器）是添加以下行：

```
->addField(Zend_Search_Lucene_Field::keyword('content-03', '#')) 
```

所以假设：特殊字符只能作为关键字搜索，因为这些字段没有被标记。但是关键字被视为一个完整的短语（即使里面有短语），这是一个巨大的限制。`

# c# - 下载文件 ASP.NET C#

> ID：14015770
> 
> 赞同：0
> 
> 时间：2012-12-24T00:14:49.240
> 
> 标签：c#, asp.net

我正在尝试将文件下载到计算机上的任何位置，但是当我单击按钮时，它会直接将其发送到我的下载文件夹。我正在使用的代码如下：

我希望能够选择“桌面、我的文档、ETC”。我究竟做错了什么？

```
protected void Button1_Click(object sender, EventArgs e)
{
    // The file path to download.
    string filepath = @"C:\Test\Test.docx";
    // The filename used to save the file to the client's system..
    string filename = Path.GetFileName( filepath );
    Stream stream = null; 
    try
    {
        // Open the file into a stream. 
        stream = new FileStream(filepath, FileMode.Open, FileAccess.Read, FileShare.Read ); 
        // Total bytes to read: 
        long bytesToRead = stream.Length; 
        Response.ContentType = "application/octet-stream"; 
        Response.AddHeader("Content-Disposition", "attachment; filename=" + filename ); 
        // Read the bytes from the stream in small portions. 
        while ( bytesToRead > 0 ) 
        {
            // Make sure the client is still connected. 
            if (Response.IsClientConnected) 
            {
                // Read the data into the buffer and write into the 
                // output stream. 
                byte[] buffer = new Byte[10000]; 
                int length = stream.Read(buffer, 0, 10000); 
                Response.OutputStream.Write(buffer, 0, length); 
                Response.Flush(); 
                // We have already read some bytes.. need to read 
                // only the remaining. 
                bytesToRead = bytesToRead - length;
            } 
            else
            {
                // Get out of the loop, if user is not connected anymore.. 
                bytesToRead = -1; 
            }
        }
    } 
    catch(Exception ex) 
    {
        Response.Write(ex.Message); 
        // An error occurred.. 
    }
    finally 
    {
        if ( stream != null ) { 
            stream.Close(); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:27:04.980

这与您的浏览器设置有关 - 您使用什么浏览器？无论如何，转到浏览器的设置，找到下载选项，然后告诉他们首先询问您将其保存在哪里。

对于谷歌浏览器：[更改下载位置](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95574&topic=14681&ctx=topic)

对于 Firefox：[更改单击或下载文件时 Firefox 的操作](http://support.mozilla.org/en-US/kb/change-firefox-behavior-when-open-file?redirectlocale=en-US&redirectslug=Managing+file+types)

# php - 依赖的东西 PHP + AJAX

> ID：14015771
> 
> 赞同：0
> 
> 时间：2012-12-24T00:14:50.840
> 
> 标签：php, html, ajax

我有这两个文件：

new_aircraft.php

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="STYLESHEET" type="text/css" href="./style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Insert Aircraft</title>
</head>
<body>
<script>
//Ajax Script
function require(){
    try{
    req = new XMLHttpRequest();
    }catch(err1){
        try{
        req = new ActiveXObject("Microsoft.XMLHTTP");
        }catch(err2){
            try{
            req = new ActiveXObject("Msxml2.XMLHTTP");
            }catch(err3){
            req = false;
            }
        }
    }
return req;
}

var request = require();

function callAjax(){
var ramdom = parseInt(Math.random()*999999999);
valor = document.getElementById("numberclasses").value;
var url="classes.php?Value="+valor+"&r="+ramdom;
request.open("GET",url,true);
request.onreadystatechange = answerAjax;
request.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
request.send(null);
}

function answerAjax(){

    if(request.readyState==4){
        if(request.status==200){
        //alert(request.responseText);
        document.getElementById("classes").innerHTML=request.responseText;
        }else{
        alert("ha ocurrido un error"+request.statusText);
        }
    }
}

</script>
<?

$boton = $_POST['enviar'];
$nombre = $_POST['nombre'];
$precio = $_POST['precio'];
$pax = $_POST['pax'];
$ICAO = $_POST['ICAO'];

if($boton == 'Insertar')
{
    include('./db.inc.php');

    $ICAO = strtoupper($ICAO);      
    mysql_query("INSERT INTO flota(ICAO, nombre, precio, capacidad) VALUES('$ICAO', '$nombre', '$precio', '$pax')") or die('<h4 style="color: red;">Ha habido un problema con la insercion.</h4>');

    mysql_close();

    echo '<h3 style="color: green;">Aeronave adquirida correctamente.<h3/>';
}
else
{
    ?>
    <form action="insertar-modelo.php" method="post" enctype="application/x-www-form-urlencoded">
    <table>
    <tr><td class=Forms>ICAO: </td><td><input type="text" value="" name="ICAO" /></td></tr>
    <tr><td class=Forms>Name: </td><td><input type="text" value="Airbus A320" name="nombre" /></td></tr>
    <tr><td class=Forms>Price: </td><td><input maxlength="9" value="1000000" type="text" name="precio" /> €&lt;/td></tr>

    <tr><td class=Forms>Number Classes: </td></td><td><select name="numberclasses" id="numberclasses" onchange="callAjax()">
        <option>Select Number of Classes</option>
        <?php
        echo'<option value="1">One</option>';
        ?>
    </select></td></tr>

<tr><td id="classes" ></td></tr>

    <tr><td class=Forms>Capacidad: </td><td><input maxlength="3" value="150" type="text" name="pax" /> pasajeros</td></tr>
    </table><br />
    <input type="submit" name="enviar" value="Insertar"/>
    </form>
    <?
}
?>
</body>
</html> 
```

类.php

```
 <?php
$value = $_GET['Value'];

if($value == 1){

    ?>

<thead>
    <td class=Forms>First Class: </td><td><input maxlength="3" value="150" type="text" name="pax" /></td>
</thead>

<?php
}

?> 
```

而当我“选择类数”1时的结果是[http://i48.tinypic.com/erbfnn.png](http://i48.tinypic.com/erbfnn.png)（这是一张图片，请看）。

头等舱部分的顺序不正确。它应该低于 Number Classes，但它是第一个。头等舱部分不尊重其他部分的宽度。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:46:44.313

的孩子`<table>`只能是`<thead>`, `<tbody>`, 或`<tfoot>`; 你也可以有`<tr>`，它会自动把它们包起来`<tbody>`。

所以改变：

`<div id="classes"></div>`

至：

`<tr><td id="classes"></td></tr>`

您也有一个`<form>`，但`</form>`元素，您需要匹配它们并正确嵌套。您不能在表格末尾和内部开始表格，因此请摆脱`</form>`表格内部的多余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:34:55.787

我编辑文件：

new_aircraft.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="STYLESHEET" type="text/css" href="./style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Insert Aircraft</title>
</head>
<body>
<script>
//Ajax Script
function require(){
    try{
    req = new XMLHttpRequest();
    }catch(err1){
        try{
        req = new ActiveXObject("Microsoft.XMLHTTP");
        }catch(err2){
            try{
            req = new ActiveXObject("Msxml2.XMLHTTP");
            }catch(err3){
            req = false;
            }
        }
    }
return req;
}

var request = require();

function callAjax(){
var ramdom = parseInt(Math.random()*999999999);
valor = document.getElementById("numberclasses").value;
var url="classes.php?Value="+valor+"&r="+ramdom;
request.open("GET",url,true);
request.onreadystatechange = answerAjax;
request.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
request.send(null);
}

function answerAjax(){

    if(request.readyState==4){
        if(request.status==200){
        //alert(request.responseText);
        document.getElementById("classes").innerHTML=request.responseText;
        }else{
        alert("ha ocurrido un error"+request.statusText);
        }
    }
}

</script>
<?

$boton = $_POST['enviar'];
$nombre = $_POST['nombre'];
$precio = $_POST['precio'];
$pax = $_POST['pax'];
$ICAO = $_POST['ICAO'];

if($boton == 'Insertar')
{
    include('./db.inc.php');

    $ICAO = strtoupper($ICAO);      
    mysql_query("INSERT INTO flota(ICAO, nombre, precio, capacidad) VALUES('$ICAO', '$nombre', '$precio', '$pax')") or die('<h4 style="color: red;">Ha habido un problema con la insercion.</h4>');

    mysql_close();

    echo '<h3 style="color: green;">Aeronave adquirida correctamente.<h3/>';
}
else
{
    ?>
    <form action="insertar-modelo.php" method="post" enctype="application/x-www-form-urlencoded">
    <table>
    <tr><td class=Forms>ICAO: </td><td><input type="text" value="" name="ICAO" /></td></tr>
    <tr><td class=Forms>Name: </td><td><input type="text" value="Airbus A320" name="nombre" /></td></tr>
    <tr><td class=Forms>Price: </td><td><input maxlength="9" value="1000000" type="text" name="precio" /> €&lt;/td></tr>

    <tr><td class=Forms>Number Classes: </td></td><td><select name="numberclasses" id="numberclasses" onchange="callAjax()">
        <option>Select Number of Classes</option>
        <?php
        echo'<option value="1">One</option>';
        ?>
    </select></td></tr>

<tr><td id="classes" ></td></tr>

    <tr><td class=Forms>Capacidad: </td><td><input maxlength="3" value="150" type="text" name="pax" /> pasajeros</td></tr>
    </table><br />
    <input type="submit" name="enviar" value="Insertar"/>
    </form>
    <?
}
?>
</body>
</html> 
```

类.php

```
<?php
$value = $_GET['Value'];

if($value == 1){

    ?>

<thead>
    <td class=Forms>First Class: </td><td><input maxlength="3" value="150" type="text" name="pax" /></td>
</thead>

<?php
}

?> 
```

结果是[http://i50.tinypic.com/2yjzinr.png](http://i50.tinypic.com/2yjzinr.png)

# mysql - COUNT 的奇怪 MySQL 行为

> ID：14015772
> 
> 赞同：0
> 
> 时间：2012-12-24T00:14:54.280
> 
> 标签：mysql, sql

我对 MySQL 数据库有这个非常奇怪的问题。

为了简化查询，假设我正在调用此查询以获取与用户设置匹配的配置文件：

```
SELECT u.*, floor(datediff(now(), u.birth_date) / 365) as age 
FROM users_wr u 
LEFT JOIN cities c ON c.id = u.city_id 
WHERE u.id != 1 and c.country_id = 71
HAVING age >= 20 AND age <= 25 
```

此查询现在返回 3 行的集合（这是正确的）。但是，当我想获得这样的行数时：

```
SELECT count(*), floor(datediff(now(), u.birth_date) / 365) as age 
FROM users_wr u 
LEFT JOIN cities c ON c.id = u.city_id 
WHERE u.id != 1 and c.country_id = 71
HAVING age >= 20 AND age <= 25
LIMIT 1 
```

然后在另一种情况下它应该返回 4，但它一直返回 5，在这种情况下，当它应该返回 3 时它返回 NULL。

我不知道那应该是什么意思。我不是 sql 的初学者，这真的很困扰我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:16:58.497

您忘记添加`GROUP BY`子句

```
SELECT count(*), floor(datediff(now(), u.birth_date) / 365) as age 
FROM users_wr u 
LEFT JOIN cities c ON c.id = u.city_id 
WHERE u.id != 1 and c.country_id = 71
GROUP BY floor(datediff(now(), u.birth_date) / 365)
-- HAVING age >= 20 AND age <= 25
-- LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:12:59.270

您的 SQL 查询很奇怪，因为您使用的是 MySQL 的一个（错误）功能，称为隐藏列。`select`在任何其他数据库中，这些查询都将违反语法，因为您在with no中同时具有聚合函数和非聚合列`group by`。这是个坏习惯。

在第一种情况下，您将获得与条件匹配的调用行，因为没有聚合。

在第二种情况下*，*即使没有`limit`. 您将获得满足`where`和`having`条件的总计数和随机年龄。

您想要的查询是：

```
select count(*)
from (SELECT u.*, floor(datediff(now(), u.birth_date) / 365) as age 
      FROM users_wr u LEFT JOIN
           cities c ON c.id = u.city_id 
      WHERE u.id != 1 and c.country_id = 71
     ) t
where age >= 20 AND age <= 25 
```

这应该返回一行，其中包含满足所有条件的用户数。

# php - session_set_cookie_params() 函数的“安全”参数是什么意思？

> ID：14015775
> 
> 赞同：2
> 
> 时间：2012-12-24T00:15:06.767
> 
> 标签：php, session-cookies

> **可能重复：**
> [PHP session_set_cookie_params](https://stackoverflow.com/questions/3441642/php-session-set-cookie-params)

我只使用 HTTP（不是 HTTPS，我的服务器上没有配置 SSL）。

“安全”是否意味着 cookie 将仅通过 SSL 传输？或者也可以将此参数与 HTTP 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:16:37.257

这意味着浏览器只会在当前连接被加密 (SSL/TLS) 时发送 cookie。您只能将它与加密连接一起使用。

*   [http://php.net/manual/en/session.configuration.php#ini.session.cookie-secure](http://php.net/manual/en/session.configuration.php#ini.session.cookie-secure)
*   [http://us3.php.net/manual/en/function.setcookie.php#refsect1-function.setcookie-parameters](http://us3.php.net/manual/en/function.setcookie.php#refsect1-function.setcookie-parameters)

您还可以选择设置 HttpOnly 标志，以防止客户端脚本访问 cookie，以帮助进一步保护它。因此，在您的情况下，将“安全”标志设置为 FALSE，将 HttpOnly 标志设置为 TRUE。这与您的 cookie 设置一样安全，而不是设置您最可能想要的路径 / 无论如何。

# javascript - 访问数据成员

> ID：14015777
> 
> 赞同：-1
> 
> 时间：2012-12-24T00:15:22.587
> 
> 标签：javascript

我创建了一个如下所示的命名空间。

```
var Constants = {
    Foo: 'bar',
    SomeVar: {
       key: 'value'
    }
}; 
```

我想做的是：

```
var Constants = {
    Foo: 'bar',
    SomeVar: {
       key: Constants.Foo + 'value' // Notice the Constants.Foo
    }
}; 
```

我想要做的是能够使用**Constants.Foo的值来为****SomeVar**创建一个值。但是，这会在 Firebug 中引发错误。

所以我想知道，如何访问常量命名空间中 Foo 的值；而且，我一直在阅读一些关于 Javascript 封装的文章（比如[这篇](http://www.codeproject.com/Articles/108786/Encapsulation-in-JavaScript)文章），是否可以在不必执行 Constants.Foo 的情况下访问 Foo 的值？也许某种方式可以保留对命名空间的*this*关键字的引用，然后我可以执行类似*thisParent.Foo*的操作。

谢谢！

* * *

编辑：

这是我得到的错误：

> TypeError：常量未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:16:31.660

那是不可能的。一个对象*字面量*在你将它分配给某个东西之前是没有名字的，到那时，为时已晚。对象文字也不是函数，因此没有可以使用的上下文关键字；`this`仍然是包含函数中的任何内容。之后添加属性是唯一的方法。

```
var Constants = {
    Foo: 'bar',
    SomeVar: {}
};

Constants.SomeVar.key = Constants.Foo + 'value'; 
```

不，命名空间在 JavaScript 中不是一个东西。那是一个对象。而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:21:29.177

问题是`Constants`在赋值执行之前不存在，也就是在构造对象之后。你可以做这样的事情（一个[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)）：

```
var Constants = (function() {
    self = { Foo : 'bar' };
    self.SomeVar = self.Foo + 'value';
    return self;
}()); 
```

# android - 单击时从自定义列表视图中获取数据

> ID：14015778
> 
> 赞同：5
> 
> 时间：2012-12-24T00:16:17.877
> 
> 标签：android, listview

我有一个自定义 ListView，其中包含两个 TextView，它们都包含不同的值。当单击一个项目时，我希望能够从这些 TextView 之一获取内容。

这是我到目前为止的代码：

```
listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
String value;
// value = (get value of TextView here)
     }
}); 
```

我希望能够分配`value`给 TextView 之一的文本。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T02:19:00.987

尽管@Sam 的建议在大多数情况下都可以正常工作，但我实际上更喜欢为此使用提供`AdapterView`的`onItemClick(...)`：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Person person = (Person) parent.getItemAtPosition(position);
    // ...
} 
```

我认为这是一种更简单的方法，因为`AdapterView`它将考虑可能使用[`ListView.addHeaderView(...)`](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View,%20java.lang.Object,%20boolean%29).

例如，如果您`ListView`包含一个标题，则点击适配器提供的第一项将导致`position`变量的值为`1`（而不是`0`，这是没有标题的默认情况），因为标题占据 position `0`。因此，很容易错误地检索一个位置的错误数据并`ArrayIndexOutOfBoundsException`为最后一个列表项引入一个。通过从 中检索项目`AdapterView`，位置会自动正确偏移。您当然也可以手动更正它，但为什么不使用提供的工具呢？:)

仅供参考和 FWIW。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T00:21:01.930

你有几个选择。我参考了您[之前问题](https://stackoverflow.com/q/14013833/1267661)中的代码。

*   您可以从行的布局访问此数据`view`：

    ```
    ViewHolder holder = (ViewHolder) view.getTag();
    // Now use holder.name.getText().toString() and holder.description as you please 
    ```

*   您可以使用以下方式访问适配器`position`：

    ```
    Person person = mAdapter.getItem(position);
    // Now use person.name and person.description as you please 
    ```

（顺便说一句，在您的 Person 类中，因此`name`您不需要 get 方法。）`description``public`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T07:34:28.050

覆盖adaterclass中的以下方法。

```
public String[] getText() {
        return text;
    } 
```

# oauth-2.0 - 适用于 Chrome 的 Google Drive API 打包应用

> ID：14015779
> 
> 赞同：0
> 
> 时间：2012-12-24T00:16:21.197
> 
> 标签：oauth-2.0, google-drive-realtime-api

我正在按照快速入门示例为我的打包应用程序获取 oauth 设置。

[https://developers.google.com/drive/quickstart-js](https://developers.google.com/drive/quickstart-js)

为了获取客户端 ID，他们将 localhost 端口放在重定向 uri 字段中，但由于我不处理任何本地服务器，我应该在那里输入什么来获取客户端 ID？我没有设置任何 url 我所做的只是创建了一个清单文件、背景文件并加载了解压缩的扩展名。我打包的应用程序只需要 Google Drive api 即可从中访问文件。我只是对获取客户端 ID 部分感到困惑。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T05:11:30.663

尽管[Chrome 身份 API 文档](http://developer.chrome.com/trunk/apps/app.identity.html#client_id)说了什么，但可以通过[Google API 控制台](https://code.google.com/apis/console/)获取客户端 ID 。从已安装的应用程序类型中选择已安装的应用程序作为应用程序类型和 Chrome 应用程序。然后从 Chrome 扩展菜单中输入您的应用程序 ID。

# css - CSS将字体设置为“强”

> ID：14015786
> 
> 赞同：17
> 
> 时间：2012-12-24T00:17:05.527
> 
> 标签：css

我需要将字体设置为“强”，但不知道如何用 CSS 做到这一点？我试过了

```
font-weight: 'Strong'; 
```

而且我也尝试过没有标记，它也没有工作。我想将其设置为强而不仅仅是粗体，因为我听说它可以在残疾人浏览您的网站时帮助他们（但这可能是垃圾？！）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-24T00:19:18.177

你可能的意思是：

```
font-weight: bold; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T00:21:39.783

没有`strong`权重，试试`bold`（这通常是`<strong>`元素的默认浏览器样式。

[更多关于`font-weight`MDN](https://developer.mozilla.org/en-US/docs/CSS/font-weight)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-26T12:40:46.623

我刚刚根据我在这里阅读的帖子解决了这个确切的问题。粗体不是你想要的，因为粗体并不等同于强。

对我来说，使用聚合物定制组件。

强 =`font-weight: 400`

粗体开始于`font-weight: 500`或更大。

进一步研究它会发现这取决于浏览器版本和显示，有时事情不会按照你想要的方式呈现。

更多详细信息可以在 steveax 和 Ryan 上面发布的 MDN 链接中找到

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T00:20:55.267

`bold`是唯一的方法。您将可访问性方面与*HTML 标记* `<b>`和混淆了`<strong>`，默认情况下它们具有粗体样式。

`<b>`vs`<strong>`与可访问性的关系也较小，更多地与语义和样式与内容的分离有关。毕竟，您可以将所有`<b>`标签的样式设置为非粗体，这只是令人困惑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T00:20:30.097

字体粗细：粗体；相当于“强”字体。你也可以试试

字体粗细：900；（使用数值）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-24T00:20:49.833

strong 是一个 html 标签。css 用于视觉。

# android - 从 Android 首选项启动意图

> ID：14015787
> 
> 赞同：1
> 
> 时间：2012-12-24T00:17:16.283
> 
> 标签：android, android-preferences, preference

> **可能重复：**
> [从 PreferenceActivity 启动新活动](https://stackoverflow.com/questions/7041292/launch-new-activity-from-preferenceactivity)

我有一个偏好设置，我想启动一个显示版本和有关应用程序的其他信息的意图。我终其一生都无法弄清楚如何从偏好中开始意图。我该怎么做？请帮忙。首选项设置如下：

```
<Preference
    android:title="About"
    android:summary="About application"
    android:key="about"

    ></Preference> 
```

# objective-c - 在 Objective-C 中不使用属性的案例

> ID：14015789
> 
> 赞同：6
> 
> 时间：2012-12-24T00:18:21.897
> 
> 标签：objective-c, properties, instance-variables

在使用 Objective-C 编程下的苹果 OS X 10.8 核心库文档中，它指出，

> “最好的做法是在您需要跟踪一个值或另一个对象的任何时候对一个对象使用一个属性。如果您确实需要在不声明属性的情况下定义自己的实例变量，您可以将它们添加到顶部的大括号内类接口或实现......”

所以我很好奇，在哪些情况下需要定义实例变量而不声明属性？除了苹果所说的，它真的只是个人喜好吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:28:42.857

其中一些绝对是偏好问题，但并非全部：最好为具有外部可见性的项目以及需要在课堂内外进行不同访问控制的项目设置属性。自从引入 ARC 以来，这个问题就不那么明显了，因为在此之前，您可能希望使用属性来自动调用保留和释放。当您需要将对象自动复制到您的属性中时，这方面属性的重要性已大大降低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T02:12:45.627

*如果*您正在使用 ARC 和最近的运行时（最近足以让您在 @implementation 块中声明您的 ivars），那么实例变量又突然变得很棒了。为什么？因为与@properties 不同，它们是特定于类的。没有风险他们会意外地被子类覆盖。

在简单的情况下它们也更快，因为您不调用任何方法来获取或设置它们。

我个人也觉得它更干净。不再有定义私有@properties 的类扩展，以及所有这些垃圾。只是 ivars，又好又简单。

所以最好的建议，恕我直言，*默认*使用它们。仅在您确实需要它们的功能时才使用 @properties，例如：

*   您需要一种从课堂外访问它们的方法。
*   您希望允许子类覆盖它们。
*   您的 getter 或 setter 不仅仅是一项琐碎的任务。

后两者实际上都比您想象的要少。尝试覆盖子类中的属性通常是不明智的，因为它有点不寻常并且有一些粗糙的边缘。

如果您稍后确实发现需要将 ivar 升级为 @property，这很简单 - 唯一可以访问它的位置是在您的 @implementation 中，因此通常只需简单的搜索和替换即可添加“自己。” 到它的引用（如果你这样命名它们，可能会删除前导下划线）。'在此之前，您无需支付费用并承担使用@properties 的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T00:34:24.227

我更喜欢属性，因为我能够定义 setter/getter，而且我更喜欢这种语法。
许多人肯定使用 ivars 是一种不好的做法，就像在这篇文章中一样：
[http](http://cocoasamurai.blogspot.it/2012/08/cover-up-those-ivars.html)
://cocoasamurai.blogspot.it/2012/08/cover-up-those-ivars.html 不幸的是，现在程序员把他们所做的一切都称为不好的做法不喜欢，即使没有客观原因。
如果你声明一个 ivar，你仍然可以使用 @private 指令，所以不是公开或不公开变量的问题。我认为如果你喜欢更多 ivar，你应该使用它们。

# qt - 为什么在链接此 Qt 5.0 应用程序时出现“对 vtable 的未定义引用...”错误？

> ID：14015792
> 
> 赞同：12
> 
> 时间：2012-12-24T00:18:39.923
> 
> 标签：qt, cmake, qt5

我有一个使用 CMake 2.8.9 的相对简单的 Qt 5.0 项目：

CMakeLists.txt：

```
cmake_minimum_required(VERSION 2.8.9)
set(CMAKE_INCLUDE_CURRENT_DIR ON)
project(hello-world)

find_package(Qt5Widgets REQUIRED)
qt5_wrap_ui(hello-world_UI MainWindow.ui)

add_executable(hello-world MainWindow.cpp main.cpp ${hello-world_UI})
qt5_use_modules(hello-world Widgets) 
```

主窗口.h：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

    public:

        MainWindow();
        virtual ~MainWindow();

    private:

        Ui::MainWindow * const ui;
};

#endif // CMAINWINDOW_H 
```

主窗口.cpp：

```
#include "MainWindow.h"
#include "ui_MainWindow.h"

MainWindow::MainWindow()
    : ui(new Ui::MainWindow)
{
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

主.cpp：

```
#include <QApplication>
#include "MainWindow.h"

int main(int argc, char * argv[])
{
    QApplication app(argc, argv);

    MainWindow win;
    win.show();

    return app.exec();
} 
```

该项目还包括一个`.ui`使用 Qt Creator 2.6.1 (MainWindow.ui) 创建的文件。

当我尝试`g++`在 Linux 上构建文件时，我收到以下错误：

```
CMakeFiles/hello-world.dir/MainWindow.cpp.o：在函数“MainWindow::MainWindow()”中：
MainWindow.cpp:(.text+0x3b): undefined reference to `vtable for MainWindow'
MainWindow.cpp:(.text+0x4d): undefined reference to `vtable for MainWindow'
CMakeFiles/hello-world.dir/MainWindow.cpp.o：在函数“MainWindow::~MainWindow()”中：
MainWindow.cpp:(.text+0xaf): undefined reference to `vtable for MainWindow'
MainWindow.cpp:(.text+0xc1): undefined reference to `vtable for MainWindow'
collect2：错误：ld 返回 1 个退出状态

```

什么可能导致这种错误？我最近从 CMake 切换到了`qmake`，我从来不记得在编译一个简单的示例时遇到了这么多麻烦。我究竟做错了什么？

* * *

**编辑：**这是用于链接所有内容的命令：

```
/usr/bin/c++ CMakeFiles/hello-world.dir/MainWindow.cpp.o
CMakeFiles/hello-world.dir/main.cpp.o -o hello-world -rdynamic
/usr/local/Qt-5.0.0/lib/libQt5Widgets.so.5.0.0
/usr/local/Qt-5.0.0/lib/libQt5Gui.so.5.0.0
/usr/local/Qt-5.0.0/lib/libQt5Core.so.5.0.0
-Wl,-rpath,/usr/local/Qt-5.0.0/lib

```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-24T01:17:41.010

原来我忘记了：

```
set(CMAKE_AUTOMOC ON) 
```

在 CMakeLists.txt 文件的顶部。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-21T18:24:49.093

使用此处发布的所有提示，我为此苦苦挣扎了很长时间：

[http://doc.qt.io/qt-5/cmake-manual.html](http://doc.qt.io/qt-5/cmake-manual.html)

和这里

[https://www.kdab.com/using-cmake-with-qt-5/](https://www.kdab.com/using-cmake-with-qt-5/)

我必须做的是按正确的顺序指定事情。例如，以下是我的 CMakeLists.txt 的顶部。请注意，两个 CMAKE 设置指令位于 add_executable 之前。一旦我这样做了，我就能够在没有未定义符号和 vtable 引用的情况下进行链接。我只是想我会为了他人的利益而发布这个。

```
cmake_minimum_required (VERSION 2.8)

set (CMAKE_AUTOMOC ON)
set (CMAKE_INCLUDE_CURRENT_DIR ON)
add_executable(FHSpectrumSensor wideband_seq_spectrum_sensor.cpp sensor.cpp   gui.cpp ${gui_SRC}) 
```

稍后在 CMakeLists.txt 我有以下内容：

```
 find_package(Qt5Widgets REQUIRED)
 find_package(Qt5Charts REQUIRED)
 find_package(Qt5Core REQUIRED)

 qt5_use_modules(FHSpectrumSensor Widgets Charts)
 qt5_wrap_cpp(gui_SRC gui.h gui.cpp) 
```

那成功了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-07T17:08:31.353

我昨天也遇到了这个问题，上面提到的答案没有帮助。我已经用过`set (CMAKE_AUTOMOC ON)`和`qt5_wrap_cpp`。

我试图记住我做了什么，因为我有一个工作版本，但在“一些”更改后它停止工作。我终于记得我试图将包含文件拆分为单独的目录层次结构。在恢复它并将包含文件放回`CMakeLists.txt`它之后它再次工作。我当然不知道为什么，我想知道出了什么问题，但我现在决定将包含放在`cpp`文件附近。

```
set(SOURCES
    buffer.h
    ITVSet.h
    MainWindow.h
    MainWindow.cpp
    TVSet.h
    TVSet.cpp
) 
```

# firebase - 使用 Firebase 使 URL 过期

> ID：14015793
> 
> 赞同：5
> 
> 时间：2012-12-24T00:18:42.580
> 
> 标签：firebase

有人如何创建指向 Firebase 数据的临时 URL，但数据（和 URL）将在特定时间（即 5 分钟或 15 分钟）后被销毁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T05:39:07.930

根据数据的确切存储方式，有几种不同的选项可用于按时间戳删除数据。

假设数据未排序，并且您已将时间戳作为字段存储在每条记录中，那么您可以简单地从第一条记录开始读取并删除它们，直到找到要保留的记录：

```
<script>
var FB = new Firebase(YOUR_URL);
var childRef = FB.child( TABLE_WITH_RECORDS_TO_DELETE );
var oneWeekAgo = new Date().getTime()-1000*60*60*24*7; // one week ago

var fx = function(snapshot) { // keep a ref to this so we can call off later
   var v = snapshot.val();
   if( v.expires_on_date < oneWeekAgo ) {
      // delete the record
      snapshot.ref().remove();
   }
   else {
      // we found the first keeper, so we are done
      childRef.off('child_added', fx);
   }
}

// fetched records and test to see how old they are
childRef.on('childAdded', fx);
</script> 
```

如果数据是按时间戳排序的，您可以按如下方式检索和删除它们：

```
var FB = new Firebase(YOUR_URL);
var childRef = FB.child( TABLE_WITH_RECORDS_TO_DELETE );
var oneWeekAgoMinusOne = new Date().getTime()-1000*60*60*24*7-1; // one week ago

// fetched using endAt, so only retrieving older than 1 week
childRef.endAt( oneWeekAgoMinusOne ).on('childAdded', function(snapshot) {
    // delete the record
   snapshot.ref().remove();
}); 
```

# android - Android SQLite“神秘”查询行为

> ID：14015800
> 
> 赞同：0
> 
> 时间：2012-12-24T00:19:24.093
> 
> 标签：android, sqlite, android-sqlite

当我尝试 fetchAll 我的表时，我遇到了一个非常有趣的 SQLite 问题。对不起我的英语......我试着解释这个问题。我是Android开发的初学者...

所以！我喜欢汽车，我想开发一个应用程序，我可以在其中保存我最喜欢和购买的汽车。首先，我创建我的数据库和我的汽车表。我有一个带有 create 方法的模式类：

```
public static final String CREATE_TABLE = "create table if not exists " + TABLE_NAME + "(" +
                                     KEY_ID + " integer primary key autoincrement," +
                                     KEY_BRAND + " varchar not null," +
                                     KEY_TYPE + " varchar not null," +
                                     KEY_ENGINE + " varchar," + 
                                     KEY_FUEL_TYPE + " varchar," + 
                                     KEY_COLOR + " varchar," + 
                                     KEY_AGE_GROUP + " integer, " + 
                                     KEY_SPEEDOMETER_POSITION + " integer," + 
                                     KEY_IS_DEFAULT + " integer," + 
                                     KEY_DESCRIPTION + " text," + 
                                     KEY_BUYING_PRICE + " integer," + 
                                     KEY_BOUGHT_FROM + " varchar" + 
                                     ");"; 
```

当我打开我的数据库时，我调用了这个方法。我创建了 DbHelper 类，在这个类中是 open 方法：

```
 public void open() {
    dbHelper = new DbHelper(context, DbSchema.DATABASE_NAME);
    mDb = dbHelper.getWritableDatabase();
    dbHelper.onCreate(mDb);
} 
```

当我开始我的 mainActivity 时，我打开我的数据库，使 Cursor 对象宽度成为我的 fetchAll() 方法。fetchAll 方法如下所示：

```
public Cursor fetchAll() {
return mDb.query(DbSchema.Car.TABLE_NAME, 
                 new String[] {DbSchema.Car.KEY_ID, 
                               DbSchema.Car.KEY_BRAND, 
                               DbSchema.Car.KEY_TYPE, 
                               DbSchema.Car.KEY_ENGINE, 
                               DbSchema.Car.KEY_FUEL_TYPE,
                               DbSchema.Car.KEY_COLOR,
                               DbSchema.Car.KEY_AGE_GROUP,
                               DbSchema.Car.KEY_SPEEDOMETER_POSITION,
                               DbSchema.Car.KEY_IS_DEFAULT,
                               DbSchema.Car.KEY_DESCRIPTION,
                               DbSchema.Car.KEY_BUYING_PRICE,
                               DbSchema.Car.KEY_BOUGHT_FROM
                               },
                 null,  null,  null,  null,  DbSchema.Car.KEY_BRAND); 
```

}

...当 fetchAll 方法尝试从 DB 询问项目时，我收到以下消息：

> android.database.sqlite.SQLiteException：没有这样的列：颜色：，编译时：SELECT _id，type，engine，fuel_type，color，age_group，speedometer_position，is_default，description，buying_price，buy_from FROM car ORDER BY brand；

我尝试了很多东西...只有一种方法我发现并且效果很好：我只使用 4 列...但我很害怕...这是不可接受的

有人有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T00:35:18.760

没有必要打电话`dbHelper.onCreate(mDb);`。`open()`SQLiteOpenHelper 根据`DATABASE_VERSION`in`DBHelper`的构造函数为您处理创建、升级等。

无论如何，我猜您`color`在运行数据库至少一次后添加了该列。但是 SQLiteOpenHelper 不会`CREATE_TABLE`自动检查，您必须告诉 SQLiteOpenHelper 更改。

最简单的方法是实现`onUpgrade()`in`DBHelper`并将其添加到`DATABASE_VERSION`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T00:40:11.043

这是我如何做到这一点的完整示例。如果没有看到更多代码，我无法指出您的错误，但这应该可以帮助您朝着正确的方向前进：

```
public class MsDbAdapter {
//Keys for Ingredient database
public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "Name";
public static final String KEY_CASESIZE = "CaseSize";
public static final String KEY_PACKSIZE = "PackSize";
public static final String KEY_PACKNICKNAME = "NickName";
public static final String KEY_UNIT = "Unit";
public static final String KEY_CASECOST = "CaseCost";
public static final String KEY_PACKCOST = "PackCost";
public static final String KEY_COUNTUNIT = "CountUnit";
public static final String KEY_QUANTITY = "Quantity";
public static final String KEY_SUPPLIER = "Supplier";
public static final String KEY_CATEGORY = "Category";
public static final String KEY_LOCATION = "Location";
public static final String KEY_BARCODE = "BarCode";

//Keys for Measurement Unit Costs
public static final String KEY_OUNCE = "Ounce";
public static final String KEY_FLOUNCE = "FlOunce";
public static final String KEY_POUND = "Pound";
public static final String KEY_PINT = "Pint";
public static final String KEY_QUART = "Quart";
public static final String KEY_GALLON = "Gallon";
public static final String KEY_HALFGALLON = "HalfGallon";
public static final String KEY_LITER = "Liter";
public static final String KEY_CUP = "Cup";
public static final String KEY_TBL = "Tbl";
public static final String KEY_TSP = "Tsp";
public static final String KEY_GRAM = "Gram";
public static final String KEY_KILO = "Kilogram";
public static final String KEY_MIL = "Milliliter";
public static final String KEY_CENT = "Centiliter";

//Keys for Suppliers, Categories, and Recipes
public static final String KEY_ADDRESS = "Address";
public static final String KEY_PHONE = "Phone";
public static final String KEY_SALESPERSON = "SalesPerson";

public static final String KEY_RECIPE_NAME = "RecipeName";
public static final String KEY_RECIPE_COST = "RecipeCost";
public static final String KEY_INGREDIENTS = "Ingredients";
public static final String KEY_AMOUNT = "Amount";
public static final String KEY_MEASURE_UNIT = "MeasureUnit";
public static final String KEY_TOTAL_INGCOST = "IngCost";

private static final String TAG = "MsDbAdapter";
private DatabaseHelper mDbHelper;
private SQLiteDatabase mDb;

/**
 * Database creation sql statement
 */
private static final String DATABASE_CREATE =
    "create table Stockitems (_id integer primary key autoincrement, "
    + "Name text not null, CaseSize float not null, PackSize float not null, Unit text not null, NickName text not null, CaseCost float not null, PackCost float not null, CountUnit text not null, Quantity float not null, Supplier text not null, Category text not null, Location text not null, BarCode text not null, Ounce float not null, FlOunce float not null, Pound float not null, Pint float not null, Quart float not null, HalfGallon float not null, Gallon float not null, Liter float not null, Cup float not null, Tbl float not null, Tsp float not null, Gram float not null, Kilogram float not null, Milliliter float not null, Centiliter float not null);";
private static final String DATABASE_SUPPLIERS_CREATE =
    "create table suppliers (_id integer primary key autoincrement, "
    + "Name text not null, Address text not null, Phone text not null, SalesPerson text not null);";
private static final String DATABASE_CATEGORIES_CREATE =
    "create table categories (_id integer primary key autoincrement, "
    + "Name text not null);";
private static final String DATABASE_LOCATIONS_CREATE =
    "create table locations (_id integer primary key autoincrement, "
    + "Name text not null);";
private static final String DATABASE_RECIPES_CREATE =
    "create table recipes (_id integer primary key autoincrement, "
    + "RecipeName text not null, RecipeCost double not null);";
private static final String DATABASE_INGREDIENTS_CREATE =
    "create table ingredients (_id integer primary key autoincrement, "
    + "RecipeName text not null, Ingredients text not null, Amount float not null, MeasureUnit text not null, IngCost float not null);";

private static final String DATABASE_NAME = "prebeta6";
private static final String DATABASE_TABLE = "Stockitems";
private static final String DATABASE_TABLE_SUPPLIERS = "Suppliers";
private static final String DATABASE_TABLE_CATEGORIES = "Categories";
private static final String DATABASE_TABLE_LOCATIONS = "Locations";
private static final String DATABASE_TABLE_RECIPES = "Recipes";
private static final String DATABASE_TABLE_INGREDIENTS = "Ingredients";
private static final int DATABASE_VERSION = 6;

private final Context mCtx;

private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(DATABASE_CREATE);
        db.execSQL(DATABASE_SUPPLIERS_CREATE);
        db.execSQL(DATABASE_LOCATIONS_CREATE);
        db.execSQL(DATABASE_CATEGORIES_CREATE);
        db.execSQL(DATABASE_RECIPES_CREATE);
        db.execSQL(DATABASE_INGREDIENTS_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS Stockitems");
        db.execSQL("DROP TABLE IF EXISTS Recipes");
        db.execSQL("DROP TABLE IF EXISTS Suppliers");
        db.execSQL("DROP TABLE IF EXISTS Locations");
        db.execSQL("DROP TABLE IF EXISTS Categories");
        db.execSQL("DROP TABLE IF EXISTS Ingredients");
        onCreate(db);
    }
}

/**
 * Constructor - takes the context to allow the database to be
 * opened/created
 * 
 * @param ctx the Context within which to work
 */
public MsDbAdapter(Context ctx) {
    this.mCtx = ctx;
}

/**
 * Open the notes database. If it cannot be opened, try to create a new
 * instance of the database. If it cannot be created, throw an exception to
 * signal the failure
 * 
 * @return this (self reference, allowing this to be chained in an
 *         initialization call)
 * @throws SQLException if the database could be neither opened or created
 */
public MsDbAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
}

public void close() {
    mDbHelper.close();
}

/**
 * 
 */
public long createItem(String Name, double CaseSize, double PackSize, String Unit, String NickName, double CaseCost, double PackCost, String CountUnit, double Quantity, String Supplier, String Category, String Location, String BarCode, Double Ounce, double Flounce, double Pound, double Pint, double Quart, double HalfGallon, double Gallon, double Liter, double Cup, double Tbl, double Tsp, double Gram, double Kilo, double Mil, double Cent) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_NAME, Name);
    initialValues.put(KEY_CASESIZE, CaseSize);
    initialValues.put(KEY_PACKSIZE, PackSize);
    initialValues.put(KEY_UNIT, Unit);
    initialValues.put(KEY_PACKNICKNAME, NickName);
    initialValues.put(KEY_CASECOST, CaseCost);
    initialValues.put(KEY_PACKCOST, PackCost);
    initialValues.put(KEY_COUNTUNIT, CountUnit);
    initialValues.put(KEY_QUANTITY, Quantity);
    initialValues.put(KEY_SUPPLIER, Supplier);
    initialValues.put(KEY_CATEGORY, Category);
    initialValues.put(KEY_LOCATION, Location);
    initialValues.put(KEY_BARCODE, BarCode);
    initialValues.put(KEY_OUNCE, Ounce);
    initialValues.put(KEY_FLOUNCE, Flounce);
    initialValues.put(KEY_POUND, Pound);
    initialValues.put(KEY_PINT, Pint);
    initialValues.put(KEY_QUART, Quart);
    initialValues.put(KEY_HALFGALLON, HalfGallon);
    initialValues.put(KEY_GALLON, Gallon);
    initialValues.put(KEY_LITER, Liter);
    initialValues.put(KEY_CUP, Cup);
    initialValues.put(KEY_TBL, Tbl);
    initialValues.put(KEY_TSP, Tsp);
    initialValues.put(KEY_GRAM, Gram);
    initialValues.put(KEY_KILO, Kilo);
    initialValues.put(KEY_MIL, Mil);
    initialValues.put(KEY_CENT, Cent);

    return mDb.insert(DATABASE_TABLE, null, initialValues);
}
public long createRecipeItem(String Name, double RecipeCost) {
    ContentValues initialValues = new ContentValues();

    initialValues.put(KEY_RECIPE_NAME, Name);
    initialValues.put(KEY_RECIPE_COST, RecipeCost);

    return mDb.insert(DATABASE_TABLE_RECIPES, null, initialValues);
}
public long createIngredientsItem(String Name, String Ingredients, double Amount,         
String MeasureUnit, double IngCost){
ContentValues initialValues = new ContentValues();

    initialValues.put(KEY_RECIPE_NAME, Name);
    initialValues.put(KEY_INGREDIENTS, Ingredients);
    initialValues.put(KEY_AMOUNT, Amount);
    initialValues.put(KEY_MEASURE_UNIT, MeasureUnit);
    initialValues.put(KEY_TOTAL_INGCOST, IngCost);

    return mDb.insert(DATABASE_TABLE_INGREDIENTS, null, initialValues);
}
public long createSupplierItem(String Name, String Address, String Phone, String SalesPerson) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_NAME, Name);
    initialValues.put(KEY_ADDRESS, Address);
    initialValues.put(KEY_PHONE, Phone);
    initialValues.put(KEY_SALESPERSON, SalesPerson);

    return mDb.insert(DATABASE_TABLE_SUPPLIERS, null, initialValues);
}
public long createCategoriesItem(String Name) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_NAME, Name);

    return mDb.insert(DATABASE_TABLE_CATEGORIES, null, initialValues);
}
public long createLocationsItem(String Name) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_NAME, Name);

    return mDb.insert(DATABASE_TABLE_LOCATIONS, null, initialValues);
}

/**
 * Delete the item with the given rowId
 * 
 * @param rowId id of item to delete
 * @return true if deleted, false otherwise
 */
public boolean deleteItem(long rowId) {

    return mDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean deleteRecipeItem(long rowId) {

    return mDb.delete(DATABASE_TABLE_RECIPES, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean deleteSuppliersItem(long rowId) {

    return mDb.delete(DATABASE_TABLE_SUPPLIERS, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean deleteCategoriesItem(long rowId) {

    return mDb.delete(DATABASE_TABLE_CATEGORIES, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean deleteLocationsItem(long rowId) {

    return mDb.delete(DATABASE_TABLE_LOCATIONS, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean deleteIngredientsItem(long rowId) {

    return mDb.delete(DATABASE_TABLE_INGREDIENTS, KEY_ROWID + "=" + rowId, null) > 0;
}

/**
 * Return a Cursor over the list of all items in the database
 * 
 * 
 */
public Cursor fetchAllItems() {

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
            KEY_CASESIZE, KEY_PACKSIZE, KEY_UNIT, KEY_PACKNICKNAME, KEY_CASECOST, KEY_PACKCOST, KEY_COUNTUNIT, KEY_QUANTITY, KEY_SUPPLIER, KEY_CATEGORY, KEY_LOCATION, KEY_BARCODE, KEY_OUNCE, KEY_FLOUNCE, KEY_POUND, KEY_PINT, KEY_QUART, KEY_HALFGALLON, KEY_GALLON, KEY_LITER, KEY_CUP, KEY_TBL, KEY_TSP, KEY_GRAM, KEY_KILO, KEY_MIL, KEY_CENT}, null, null, null, null, null);
}
public Cursor fetchEntireDb(){
    return mDb.query(DATABASE_TABLE, null, null, null, null, null, null);
}
public Cursor fetchAllRecipeItems() {

    return mDb.query(DATABASE_TABLE_RECIPES, new String[] {KEY_ROWID, KEY_RECIPE_NAME}, null, null, null, null, null);
}
public Cursor fetchAllSuppliersItems() {
    if (mDb == null)
    {
    this.open();
    }
    return mDb.query(DATABASE_TABLE_SUPPLIERS, new String[] {KEY_ROWID, KEY_NAME, KEY_ADDRESS, KEY_PHONE, KEY_SALESPERSON}, null, null, KEY_NAME, null, null);
}
public Cursor fetchAllCategoriesItems() {
    if (mDb == null)
    {
    this.open();
    }
    return mDb.query(DATABASE_TABLE_CATEGORIES, new String[] {KEY_ROWID, KEY_NAME}, null, null, KEY_NAME, null, null);
}
public Cursor fetchAllLocationsItems() {
    if (mDb == null)
    {
    this.open();
    }
    return mDb.query(DATABASE_TABLE_LOCATIONS, new String[] {KEY_ROWID, KEY_NAME}, null, null, KEY_NAME, null, null);
}
public Cursor fetchAllIngredientsItems(String[] RecipeName) {
    if (mDb == null)
    {
    this.open();
    }
    String NewIngredientsQString = "RecipeName = ?;";

    return mDb.query(DATABASE_TABLE_INGREDIENTS, new String[] {KEY_ROWID, KEY_RECIPE_NAME, KEY_INGREDIENTS, KEY_AMOUNT, KEY_MEASURE_UNIT, KEY_TOTAL_INGCOST}, NewIngredientsQString, RecipeName, null, null, null);
}

/**
 * Return a Cursor positioned at the item that matches the given rowId
 * 
 * @param rowId id of item to retrieve
 * @return Cursor positioned to matching item, if found
 * @throws SQLException if item could not be found/retrieved
 */
public Cursor fetchItem(long rowId) throws SQLException {

    Cursor mCursor =

        mDb.query(true, DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
                KEY_CASESIZE, KEY_PACKSIZE, KEY_UNIT, KEY_PACKNICKNAME, KEY_CASECOST, KEY_PACKCOST, KEY_COUNTUNIT, KEY_QUANTITY, KEY_SUPPLIER, KEY_CATEGORY, KEY_LOCATION, KEY_BARCODE, KEY_OUNCE, KEY_FLOUNCE, KEY_POUND, KEY_PINT, KEY_QUART, KEY_HALFGALLON, KEY_GALLON, KEY_LITER, KEY_CUP, KEY_TBL, KEY_TSP, KEY_GRAM, KEY_KILO, KEY_MIL, KEY_CENT}, KEY_ROWID + "=" + rowId, null,
                null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}
public Cursor fetchSuppliersItem(long rowId) throws SQLException {
    if (mDb == null)
    {
    this.open();
    }

    Cursor mCursor =

        mDb.query(true, DATABASE_TABLE_SUPPLIERS, new String[] {KEY_ROWID, KEY_NAME, KEY_ADDRESS, KEY_PHONE, KEY_SALESPERSON}, KEY_ROWID + "=" + rowId, null,
                null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}
public Cursor fetchCategoriesItem(long rowId) throws SQLException {
    if (mDb == null)
    {
    this.open();
    }

    Cursor mCursor =

        mDb.query(true, DATABASE_TABLE_CATEGORIES, new String[] {KEY_ROWID, KEY_NAME}, KEY_ROWID + "=" + rowId, null,
                null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}
public Cursor fetchLocationsItem(long rowId) throws SQLException {
    if (mDb == null)
    {
    this.open();
    }

    Cursor mCursor =

        mDb.query(true, DATABASE_TABLE_LOCATIONS, new String[] {KEY_ROWID, KEY_NAME}, KEY_ROWID + "=" + rowId, null,
                null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}
public Cursor fetchRecipeItem(long rowId) throws SQLException {
    if (mDb == null)
    {
    this.open();
    }

    Cursor mCursor =

        mDb.query(true, DATABASE_TABLE_RECIPES, new String[] {KEY_ROWID, KEY_RECIPE_NAME, KEY_RECIPE_COST}, KEY_ROWID + "=" + rowId, null,
                null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

public Cursor fetchIngredientsItem(long rowId) throws SQLException {
    if (mDb == null)
    {
    this.open();
    }

    Cursor mCursor =

        mDb.query(true, DATABASE_TABLE_INGREDIENTS, new String[] {KEY_ROWID, KEY_RECIPE_NAME, KEY_AMOUNT, KEY_TOTAL_INGCOST}, KEY_ROWID + "=" + rowId, null,
                null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

/**
 * 
 */
public boolean updateItem(long rowId, String Name, double CaseSize, double PackSize, String Unit, String NickName, double CaseCost, double PackCost, String CountUnit, double Quantity, String Supplier, String Category, String Location, String BarCode,Double Ounce, double Flounce, double Pound, double Pint, double Quart, double HalfGallon, double Gallon, double Liter, double Cup, double Tbl, double Tsp, double Gram, double Kilo, double Mil, double Cent) {
    ContentValues args = new ContentValues();
    args.put(KEY_NAME, Name);
    args.put(KEY_CASESIZE, CaseSize);
    args.put(KEY_PACKSIZE, PackSize);
    args.put(KEY_UNIT, Unit);
    args.put(KEY_PACKNICKNAME, NickName);
    args.put(KEY_CASECOST, CaseCost);
    args.put(KEY_PACKCOST, PackCost);
    args.put(KEY_COUNTUNIT, CountUnit);
    args.put(KEY_QUANTITY, Quantity);
    args.put(KEY_SUPPLIER, Supplier);
    args.put(KEY_CATEGORY, Category);
    args.put(KEY_LOCATION, Location);
    args.put(KEY_BARCODE, BarCode);
    args.put(KEY_OUNCE, Ounce);
    args.put(KEY_FLOUNCE, Flounce);
    args.put(KEY_POUND, Pound);
    args.put(KEY_PINT, Pint);
    args.put(KEY_QUART, Quart);
    args.put(KEY_HALFGALLON, HalfGallon);
    args.put(KEY_GALLON, Gallon);
    args.put(KEY_LITER, Liter);
    args.put(KEY_CUP, Cup);
    args.put(KEY_TBL, Tbl);
    args.put(KEY_TSP, Tsp);
    args.put(KEY_GRAM, Gram);
    args.put(KEY_KILO, Kilo);
    args.put(KEY_MIL, Mil);
    args.put(KEY_CENT, Cent);
    return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean updateCount(long rowId, double Quantity, String CountUnit){
    ContentValues args = new ContentValues();

    args.put(KEY_QUANTITY, Quantity);
    args.put(KEY_COUNTUNIT, CountUnit);

    return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean updateRecipeItem(long rowId, String Name, double RecipeCost) {
    ContentValues args = new ContentValues();
    args.put(KEY_RECIPE_NAME, Name);
    args.put(KEY_RECIPE_COST, RecipeCost);

    return mDb.update(DATABASE_TABLE_RECIPES, args, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean updateIngredientsItem(long rowId, String Name, String Ingredient, double Amount, String MeasureUnit, double IngCost) {
    ContentValues args = new ContentValues();
    args.put(KEY_RECIPE_NAME, Name);
    args.put(KEY_INGREDIENTS, Ingredient);
    args.put(KEY_AMOUNT, Amount);
    args.put(KEY_MEASURE_UNIT, MeasureUnit);
    args.put(KEY_TOTAL_INGCOST, IngCost);
    return mDb.update(DATABASE_TABLE_INGREDIENTS, args, KEY_ROWID + "=" + rowId, null) > 0;
}

public boolean updateSuppliersItem(long rowId, String Name, String Address, String Phone, String SalesPerson) {
    ContentValues args = new ContentValues();
    args.put(KEY_NAME, Name);
    args.put(KEY_ADDRESS, Address);
    args.put(KEY_PHONE, Phone);
    args.put(KEY_SALESPERSON, SalesPerson);

    return mDb.update(DATABASE_TABLE_SUPPLIERS, args, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean updateCategoriesItem(long rowId, String Name) {
    ContentValues args = new ContentValues();
    args.put(KEY_NAME, Name);

    return mDb.update(DATABASE_TABLE_CATEGORIES, args, KEY_ROWID + "=" + rowId, null) > 0;
}
public boolean updateLocationsItem(long rowId, String Name) {
    ContentValues args = new ContentValues();
    args.put(KEY_NAME, Name);

    return mDb.update(DATABASE_TABLE_LOCATIONS, args, KEY_ROWID + "=" + rowId, null) > 0;
}

} 
```

# ruby-on-rails - form_for submit 出现错误 324。

> ID：14015801
> 
> 赞同：0
> 
> 时间：2012-12-24T00:19:27.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个带有嵌套资源的 form_for。这是演示我的设置的嵌套路由。

```
 resources :residents do
    resources :assessment_plan_forms
    resources :blood_pressure_record_forms
    resources :fund_record_form1s
    resources :fund_record_form2s
    resources :id_record_forms
    resources :incident_accident_forms
    resources :med_record_forms
    resources :personal_care_forms
    resources :resident_care_agreement_forms
    resources :visitation_appointment_forms
    resources :weight_record_forms
  end 
```

我可以从 resident/show 视图（它提供您在嵌套资源片段中看到的所有表单）成功导航到assessment_plan_form/new 视图，没有任何问题。

但是，当我单击表单上的提交按钮时，我收到以下错误。

```
No data received
Unable to load the webpage because the server sent no data.
Here are some suggestions:
Reload this webpage later.
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

当我单击 chrome 提供的重新加载超链接时，我能够成功重定向到assessment_plan_form/show 视图。

我希望能够深入了解问题所在以及解决此问题的解决方案。

我已包含以下要点链接供您考虑。如果我需要提供更多信息，请告诉我，我会提供。

[Gist Link - 包括代码片段、服务器日志和路由](https://gist.github.com/4366840)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:34:34.183

虽然我不确定为什么会这样，但这是我用来删除错误 324 (net::ERR_EMPTY_RESPONSE) 的解决方案：服务器关闭连接而不发送任何数据。

首先，这个问题发生在 Firefox 17 和 Chrome 23 中。当我将瘦服务器添加到我的 Gemfile、运行捆绑并重新启动服务器时，我能够消除错误。

这消除了 324 错误，但目前我无法让提交按钮重定向到显示操作。没有异常生成，如果我在模型中添加表单验证，页面只会刷新。

我将继续排除故障并创建一个与提交按钮有关的新问题，如果需要，我不会重定向。

# java - 将菜单添加到上下文菜单

> ID：14015804
> 
> 赞同：0
> 
> 时间：2012-12-24T00:20:35.860
> 
> 标签：java, eclipse, eclipse-plugin

我试图弄清楚如何在 Eclipse 中将菜单添加到上下文或弹出菜单。我可以添加一个项目，但我找不到任何关于添加子菜单的信息。

我在 plugin.xml 中试过这个

```
<extension
     id="add.item"
     point="org.eclipse.ui.menus">         

  <menuContribution            
        locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
        <menu
             id="com.xiledsystems.altBridge.menu"
             label="AltBridge Tools">
        </menu>

      </menuContribution>

<menuContribution
     locationURI= "menu:com.xiledsystems.altBridge.menu">
    <command
        commandId="com.xiledsystems.altbridge.sample"
        label="Sample Try (AltBridge)">
    </command>
</menuContribution> 
```

这似乎没有任何作用。没有子菜单出现。

原因是，弹出菜单中有一些不同的内容，我想将它们全部合并到一个子菜单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:50:32.030

您需要向菜单添加操作。

```
<action
    class="ActionDelegate"
    icon="icons/sample.gif"
    id="ActionID"
    label="Action"
    menubarPath="com.xiledsystems.altBridge.menu/content"
    style="push" /> 
```

这将在`com.xiledsystems.altBridge.menu`带有标签的菜单下添加一个操作`Action`。`class`指定实现动作的类。

我建议您阅读一些有关 Eclipse 开发的书，例如[Eclipse Plugins](http://www.qualityeclipse.com/eclipse-plugins)。它不是免费的，但是有带有源代码的免费示例，因此您可以将它安装在您的 Eclipse 中并查看一下。

# jquery - 使用 jQuery 模拟 Windows 8 Live Tiles 动画。如何快速开始动画然后缓慢结束？

> ID：14015807
> 
> 赞同：1
> 
> 时间：2012-12-24T00:20:48.113
> 
> 标签：jquery, html, css, animation, windows-8

我有这个“平铺”，我找到了一种使用 jQuery 动画更新（添加两个内容 div）的方法。但是有一个问题，我希望动画快速开始然后缓慢结束，就像在 Windows 8 中一样。我尝试过 jQuery 和 jQuery UI 缓动插件/方法，但它们似乎都不起作用。

这是我当前项目的一个小提琴：http: [//jsfiddle.net/ModernDesigner/9r2gw/](http://jsfiddle.net/ModernDesigner/9r2gw/)

所以基本上，我有一个裁剪 div，有两个相同大小的 div。然后 jQuery 对其进行动画处理，使其顶部 div 向上滑出视线，而底部 div 滑入到位。然后它滑下来，并重复。（我必须添加内联代码才能在此处发布问题）：

```
<div class="tile">
    <div class="tile-content">
        <div class="content one">My Content</div>
        <div class="content two">My Content 2</div>
    </div>
</div>

.tile {
    display: block;
    height: 100px;
    width: 200px;
    overflow: hidden;
}

.tile .tile-content {
    height: 100%;
    width: 100%;
}

.tile .tile-content .content.one {
    top: 0;
}

.tile .tile-content .content.two {
    top: 100px;
} 
```

如果我可以使用动画对 jQuery UI 使用缓动方法，请告诉我，但据我所知，我尝试过的任何方法都不起作用。

如果我应该使用不同的方法，有人可以让我走上正确的轨道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:27:18.487

我不熟悉 Windows 8 动画的速度和类型，但您没有使用任何缓动方程。我已经更新了您的[jsFiddle](http://jsfiddle.net/thirdender/9r2gw/2/)以使用`easeInOutQuint`缓动方程。还有一个很好的演示，展示了通过 jQuery UI 可用[的各种缓动选项。](http://jqueryui.com/resources/demos/effect/easing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:27:36.457

缓解方法有很多！[您可以在jQuery UI 文档](http://api.jqueryui.com/easings/)中找到不同的缓动。

# include - g-wan：在 /csp 之外构建库，以及 g++ 编译问题

> ID：14015813
> 
> 赞同：1
> 
> 时间：2012-12-24T00:21:13.687
> 
> 标签：include, g++, pragma, g-wan

我让 Gwan 试一试。

通过示例代码完成后，我开始了一个包含多个源文件的小项目。我现在有两个问题：

1.  服务器启动时出现链接错误：

    链接 main.cpp：未定义符号：_ZN7GwanUrl9concatAllEv

（主文件#includes另外两个文件；所有文件都在csp目录下）

1.  作为将所有文件都放在 /csp 目录中的替代方法，我想在 /csp 目录之外创建一个库，同时仍然使用一些 gwan 函数。可悲的是，随之而来的是大量错误——当我从命令行而不是通过 G-WAN Startup 进行 GCC 时。

    在 /home/ec2-user/gwan/include/gwan.h:22、Xbufstream.h:10、Xbufstream.cpp:10 包含的文件中：/usr/include/time.h:199：错误：'size_t ' 没有命名类型.....

任何人都知道 gwan g++ 参数字符串是什么样的吗？

（奇数 1\. 和 1\. 它的 1\. 和 2\. 在编辑器中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:02:43.653

首先，这不是链接器问题：您有`"undefined symbol"`而不是`"unresolved symbol"`错误。

这简直是​​个`#include`问题。

1.  在您的 script.cpp 文件中定义 main() 函数。

2.  有一个 G-WAN 文件夹专门用于调用用户定义的包含文件，`/gwan/include`但您也可以使用 /csp/my_include.hpp... 如果您使用正确的语法：

例如，`#include "toto.hpp"`在 /csp/hello.cpp 中，我可以访问在文件中*定义和实现*`gwan/include/toto.hpp`的 C++ 函数（或在 toto.hpp 中定义并在使用#pragma 链接链接到您的脚本*的预编译库中实现）。*

如果您更愿意使用`#include <toto.hpp>`，则将搜索 SYSTEM INCLUDE PATH（如果您的库已正确安装，这将起作用）。

如果您想`#include "toto.hpp"`用于系统中未设置的自定义文件夹，您可以使用 G-WAN 的`#pragma include "../my_folder"`指令来指定其 PATH 或者您可以在每个 include: 中明确指定它`#include "../my_folder/toto.hpp"`。

没什么特别的，只有 C/C++ 依赖规则适用（并且 G-WAN 通过提供不涉及系统设置的替代方式确实有帮助）。

对于库（请参阅 SQLite、Cairo、mySQL、cURL 等的 G-WAN 示例），您可以使用在 SYSTEM 变量中导出其位置的预安装库...或者将您的库放在`/gwan/libraries`文件夹及其包含文件中在`/gwan/include`文件夹中。

编写自己的库时，请记住它们需要预编译。这意味着您显然不能使用 G-WAN 符号，因为您的编译器可能 #include "gwan.h" （具有定义）但您的链接器将不知道从哪里可以找到 G-WAN 符号。解决方法是始终使用 G-WAN 脚本中的 G-WAN API。您的自定义库必须是通用的或缓冲打算由 G-WAN 使用的任何有效负载。`set_reply()`由于 G-WAN 提供调用以让 G-WAN 使用在没有G-WAN servlet 提供的情况下构建的*持久*回复，因此不需要双重复制。`reply xbuffer`

现在，最后一句话`linking`（这不是造成您麻烦的原因，但可能会引起混乱）。如果您混合使用 C 和 C++，请使用`extern C {}`包装从 C 调用的 C++ 原型（否则您将*真正*拥有`"unresolved symbols"`）。

有了所有这些信息，您应该准备好面对每一种可能的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:51:38.820

#include 文件中引用 gwan.h 符号的问题也可以*通过*将所有代码移动到头文件中来解决，无论是 .h 还是 .hpp

它不优雅，但仍然可以解决。对于我想要的简单扩展来说已经足够了。

调查 /libraries/sqlite3/sqlite.h 有帮助。

@gil，感谢您抽出宝贵时间。

# sql - SQL查询在一行中对齐事件序列

> ID：14015814
> 
> 赞同：0
> 
> 时间：2012-12-24T00:21:15.447
> 
> 标签：sql, tsql, sql-server-2005

希望大家享受假期和欢乐时光。有机会的时候回复一下。

我正在使用 SQL Server 2005。

问题是 - 我们的一个团队中有一个流程，它按事件/行动的顺序做事。大多数情况下，每个序列都有 4 个动作/事件。这些事件是固定的。当他们执行此 DWH 时，会为每个事件获取一个条目作为单独的行。

示例 1) 致电客户 2) 销售保险 3) 发送 PDS 4) 将详细信息发送给产品团队

我将其设置为所有操作及其定义都在 Dimension_Point_Code 表中。所有来自 DWH 的事件都被视为 Fact 并存储在 Fact_Point

这里的Point是指流程顺序中的Point。

所以存储此信息的表如下所示

尺寸表

```
CREATE TABLE [tbl_Dim_Point_Code]
(
[Point_Code_Key] [int] IDENTITY(101,1) NOT NULL,
[Point_Code] [varchar](8) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[Point_Code_TouchPoint] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL
) ON [PRIMARY] 
```

事实表

```
CREATE TABLE [tbl_FACT_Point]
(
[Point_Key] [bigint] IDENTITY(100,1) NOT NULL,
[Point_Code_Key] [int] NOT NULL,
[Customer_Number] [varchar](19) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[Sale_Date] [datetime] NULL,
[Rep_ID] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL
) ON [PRIMARY] 
```

维度中的数据

```
INSERT INTO [tbl_Dim_Point_Code]
       ([Point_Code]
       ,[Point_Code_TouchPoint])

Select 'CALC' as Point_Code,'Point1' as Point_Code_TouchPoint
UNION
Select 'SELL' as Point_Code,'Point2' as Point_Code_TouchPoint
UNION
Select 'SPDS' as Point_Code,'Point3' as Point_Code_TouchPoint
UNION
Select 'TPRD' as Point_Code,'Point4' as Point_Code_TouchPoint 
```

事实上的数据

```
INSERT INTO [tbl_FACT_Point]
       ([Point_Code_Key]
       ,[Customer_Number]
       ,[Sale_Date]
       ,[Rep_ID])
Select 101,'C101501','24-Feb-2012','ABC'
UNION
Select 102,'C101501','24-Feb-2012','ABC'
UNION
Select 103,'C101501','26-Feb-2012','DEF'
UNION
Select 104,'C101501','27-Feb-2012','XYZ'
UNION
Select 101,'C101502','2-Feb-2012','GHI'
UNION
Select 102,'C101502','2-Feb-2012','GHI'
UNION
Select 104,'C101502','4-Feb-2012','XYZ'
UNION
Select 101,'C101503','14-Feb-2012','ABC'
UNION
Select 103,'C101503','20-Feb-2012','ABC'
UNION
Select 104,'C101503','22-Feb-2012','BBC'
UNION
Select 101,'C101501','24-Oct-2012','ABC'
UNION
Select 102,'C101501','24-Oct-2012','ABC'
UNION
Select 103,'C101501','26-Oct-2012','DEF'
UNION
Select 104,'C101501','27-Oct-2012','XYZ' 
```

注意事项 1) 如您所见，客户 C101501 被调用并售出两次。2) 每天都在处理所有相关的事情——比如团队、DWH 和 SQL Server 进程。因此，大多数时候我们不知道会发生什么。我们只会知道事件 1 已经发生。然后几天后的事件 2 等等。3) 101 和 104 是强制性事件。102 和 103 可能会或可能不会发生。无论销售与否，该团队都会联系产品团队。

现在 - 我们想要的是要转置到这个表中的条目

```
CREATE TABLE [tbl_Process1_EVENT]
(
[HS_EVENT_KEY] [int] IDENTITY(101,1) NOT NULL,
[Customer_Number] [varchar](19) ,
[Import_Date] [datetime] NULL,
[Point1_Date_Called] [datetime] NULL,
[Point1_PointCode] [varchar](8) ,
[Point1_Rep_Id] [varchar](50) ,
[Point2_Date_Sold] [datetime] NULL,
[Point2_PointCode] [varchar](8) ,
[Point2_Rep_Id] [varchar](50) ,
[Point3_Date_PDSSent] [datetime] NULL,
[Point3_PointCode] [varchar](8) ,
[Point3_Rep_Id] [varchar](50) ,
[Point4_Date_ProdTeamXfer] [datetime] NULL,
[Point4_PointCode] [varchar](8) ,
[Point4_Rep_Id] [varchar](50) 
) ON [PRIMARY] 
```

我想要发生的是这样的输出。

```
Customer_Number Import_Date Point1_Date_Called  Point1_PointCode    Point1_Rep_Id   Point2_Date_Sold    Point2_PointCode    Point2_Rep_Id   Point3_Date_PDSSent Point3_PointCode    Point3_Rep_Id   Point4_Date_ProdTeamXfer    Point4_PointCode    Point4_Rep_Id
C101501         28/02/2012  24/02/2012          CALC                ABC             24/02/2012          SELL                ABC             26/02/2012          SPDS                DEF             27/02/2012                  TPRD                XYZ
C101502         3/02/2012   2/02/2012           CALC                GHI             2/02/2012           SELL                GHI             NULL                NULL                NULL            4/02/2012                   TPRD                ABC
C101503         23/02/2012  14/02/2012          CALC                ABC             NULL                NULL                NULL            20/02/2012          SPDS                ABC             22/02/2012                  TPRD                BBC
C101501         28/10/2012  24/10/2012          CALC                ABC             24/10/2012          SELL                ABC             26/10/2012          SPDS                DEF             27/10/2012                  TPRD                XYZ 
```

如果对同一客户进行了新销售，则将数据转换为具有 C101501 的新条目的行。Import_date 是更新行的日期。正如我所说，处理每天都在发生。

所以如果我可以为这个输出的第 1 行详细说明这个表

2012 年 2 月 24 日事件 CALC 发生 - 我们知道 2012 年 2 月 25 日这一点 2002 年 2 月 25 日的第 1 点和第 2 点将被填充数据，第 3 点和第 4 点将为空。Import_Date - 将是 25/02/2012

在 26/02/2012 发送 PDS，即第 3 点。因此将更新同一行。只会更新第 3 点。Import_date 将是 27/02/2012

在 27/02/2012 第 4 点事件发生。因此，在 2012 年 2 月 28 日，同一行将使用第 4 点详细信息进行更新。

这就是我能想到的问题。

请随时提供任何帮助，我们将不胜感激。

Njoy 假期，玩得开心。

PS：我可能对输出格式做错了。请建议我可以做得更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:09:48.790

我认为您需要使用 pivot 命令（又名交叉表）。不容易理解：

以下链接应该/可以提供帮助：

[http://geekswithblogs.net/lorint/archive/2006/08/04/87166.aspx](http://geekswithblogs.net/lorint/archive/2006/08/04/87166.aspx)

[http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

[http://www.mssqltips.com/sqlservertip/1019/crosstab-queries-using-pivot-in-sql-server/](http://www.mssqltips.com/sqlservertip/1019/crosstab-queries-using-pivot-in-sql-server/)

[http://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/](http://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/)

好运

# java - 如何让我的图像翻转？

> ID：14015816
> 
> 赞同：0
> 
> 时间：2012-12-24T00:21:32.630
> 
> 标签：java, image

我在翻转图像时遇到问题。我的程序应该显示默认图像和翻转图像。我想如果我可以用原始图片的 (width-1,height-1) 替换翻转图片的 (0,0) 像素，它会起作用，但是我得到的是[这个，而不是得到](http://i.imgur.com/SEoAO.jpg)[原始图像](http://i.imgur.com/S1a0U.jpg)。

这是我的代码：

```
import java.awt.Color;

public class Horizontal {

public static void main(String[] args)
{
    Picture source = new Picture(args[0]);//name of picture.
    Picture flip = new Picture(source.width(), source.height());//sets the width and height of source

    for (int i =0; i < source.width(); i++)
    {
        int w = 1;
        int sw = source.width()-w;
        for (int j = 0; j < source.width(); j++)
        {
            int h=1;
            int sh =  source.height()-h;
            Color SourceColor =  source.get(sw,sh);// return the the color pixel of (sw,sh)
            flip.set(i, j, SourceColor);//suppose to replace the (i,j) pixel of flip with source's (sw,sh) pixel
            h++;
        }
        w++;
    }
    source.show();// shows the original image
    flip.show(); // shows flipped version of image
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:27:04.270

检查这个网站。它有关于java中基本图像算法的大量信息。您可以复制用于翻转图像的代码。

[http://www.javalobby.org/articles/ultimate-image/#9](http://www.javalobby.org/articles/ultimate-image/#9)

水平翻转：

```
public static BufferedImage horizontalflip(BufferedImage img) {  

    int w = img.getWidth();  
    int h = img.getHeight();  
    BufferedImage dimg = new BufferedImage(w, h, img.getType());  
    Graphics2D g = dimg.createGraphics();  
    g.drawImage(img, 0, 0, w, h, w, 0, 0, h, null);  
    g.dispose();  
    return dimg;  
} 
```

垂直翻转：

```
public static BufferedImage verticalflip(BufferedImage img) {  
        int w = img.getWidth();  
        int h = img.getHeight();  
        BufferedImage dimg = dimg = new BufferedImage(w, h, img.getColorModel().getTransparency());  
        Graphics2D g = dimg.createGraphics();  
        g.drawImage(img, 0, 0, w, h, 0, h, w, 0, null);  
        g.dispose();  
        return dimg;  
    } 
```

# android - 实施试验状态

> ID：14015821
> 
> 赞同：1
> 
> 时间：2012-12-24T00:22:37.710
> 
> 标签：android, time-trial

我想在我的申请中实施“10 天试用状态”。我发现了这篇 2009 年的帖子（我喜欢第三种方法）。自 2009 年以来，这方面有什么变化吗？有没有更好的办法？发布链接... [创建一个在固定时间段后过期的 Android 试用应用程序](https://stackoverflow.com/questions/995719/creating-an-android-trial-application-that-expires-after-a-fixed-time-period)

谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:43:21.457

最好的方法是在您的服务器上设置一个 MySQL 数据库，并在其中存储安装的时间和日期以及设备 ID。因此，每次用户打开您的应用程序时，您都会向服务器检查设备运行该应用程序的时间。你可以这样做，或者如果你不想参与服务器端编程，你可以创建一个本地 SQLite 数据库并做同样的事情（那么你就不必保存设备 ID）。但是，这并不那么安全，因为如果他/她的设备已植根，则用户可以访问您的数据库。因此，如果您选择这种方式，我建议您使用[SQLCipher](http://sqlcipher.net/sqlcipher-for-android/) for Android。它加密您的数据库。

# c++ - 为什么在 std::cout 上显式调用 operator<< 会导致意外输出？

> ID：14015824
> 
> 赞同：13
> 
> 时间：2012-12-24T00:23:18.463
> 
> 标签：c++, string, operator-overloading, iostream

我只是好奇如果我明确地调用会发生什么`operator<<`，`std::cout`因为我了解到这`a.operator()`与`a()`. 所以我这样做了，它打印出一些奇怪的东西：

```
#include <iostream>

using std::cout;

int main()
{
    cout.operator<<("Hello World");
} 
```

> `Output: 0x80486a0`

奇怪的是，它输出了一个地址（地址可能对你不同，但它仍然应该是一个地址）。我在想这是字符串的地址，所以我尝试取消引用它以使其输出字符串：

```
*( cout.operator<<("Hello World") ); 
```

但我得到一个很长的错误

> `no match for operator* in '*std::cout.std::basic_ostream<...`

我觉得这很奇怪。定义中的任何内容都不`std::cout`会让我相信这会导致任何不同的行为；还考虑到显式调用运算符函数没有区别（或至少*应该）。*

那么为什么我会得到这个输出呢？为什么在显式调用运算符时收到地址而不是字符串本身？这甚至是内存中的地址还是只是垃圾输出？任何回应表示赞赏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-24T00:29:06.463

内置字符串的输出运算符，即以 a`char const*`作为参数的，不是`std::ostream`. 以 a 为非成员函数的运算符`char const*`将被称为

```
operator<< (std::cout, "Hello World"); 
```

但是，有一个成员采用 a `void const*`，它使用十六进制表示法格式化指针的值。`operator<< ()`当将任何指针显式传递给 的成员时，此成员是最佳匹配`std::ostream`。

取消引用 a 的结果`operator<<()`不起作用：运算符返回`std::ostream&`没有一元`operator*()`重载的 a。如果您打算取消引用该参数，则可以这样称呼它：

```
std:cout.operator<< (*"Hello World"); 
```

但是，这只会使`char const*`字符串文字衰减到，从而产生一个单独的字符`H`。字符输出函数也不是成员函数，而整数的输出运算符是，即它会打印`H`. 对于使用 ASCII 的系统，它将是`72`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-24T00:28:30.363

我认为这里的问题是，将`operator <<`C 风格的字符串打印到输出流实际上是一个*自由函数*，而不是`basic_ostream`. 但是，`basic_ostream`确实有一个`operator<<`函数可以接收 a`void*`并打印出它的地址。因此，如果您显式尝试`operator<<`作为成员函数调用，您调用的是打印出 C 样式字符串地址的版本，而不是打印出字符串字符的自由函数。

你可以通过调用看到这个

```
operator<< (std::cout, "Hello, world!"); 
```

实际上*确实*打印了字符串。

希望这可以帮助！

# compass-sass - 指南针编译错误（未定义的混合“set-legacy-ie-support”）

> ID：14015825
> 
> 赞同：1
> 
> 时间：2012-12-24T00:23:26.460
> 
> 标签：compass-sass, susy-compass

在过去的 2 天里，我在编译我的 sass 文件时遇到了这个错误。

Compass 无法编译项目中的一个或多个文件：

```
error style.scss (Line 58 of _media.scss: Undefined mixin 'set-legacy-ie-support'.)
create style.css 
```

我确实安装了以下库

```
breakpoint-1.3      compass-0.12.2      rubygems-update-1.8.24  sassy-buttons-0.1.4
chunky_png-1.2.6    fssm-0.2.9      sass-3.2.1      susy-1.0.5 
```

谁能告诉我这个mixin应该在哪里？如果我在 /Library/Ruby 中进行递归搜索，则没有具有该名称的 mixin。我想不通。请问有人吗？

问候诺曼

# arrays - 在restkit中序列化没有根节点的数组

> ID：14015827
> 
> 赞同：2
> 
> 时间：2012-12-24T00:24:15.067
> 
> 标签：arrays, serialization, restkit

我想使用 restkit 将以下信息发布到服务器：

```
[
 { "title": "cvxcv" },
 { "title": "sdfsdf" },
 { "title": "qsfqsdqsd" }
] 
```

我定义了以下两个类：

```
@interface ObjectTemplate : NSObject
@property (nonatomic, copy) NSString *title;    
@end

@interface ObjectListTemplate : NSObject
@property (nonatomic, strong) NSArray *objects;
@end 
```

以下是它们的映射：

```
 // Object template
    RKObjectMapping *objectTemplateMapping = [RKObjectMapping mappingForClass:[ObjectTemplate class]];
    [objectTemplateMapping mapAttributes:@"title", nil];
    [_objectManager.mappingProvider setSerializationMapping:[objectTemplateMapping inverseMapping] forClass:[ObjectTemplate class]];

    // Object list template
    RKObjectMapping *objectListTemplateMapping = [RKObjectMapping mappingForClass:[ObjectListTemplate class]];
    [objectListTemplateMapping mapKeyPath:@"objects" toRelationship:@"objects" withMapping:objectTemplateMapping];
    RKObjectMapping *inverseObjectListTemplateMapping = [objectListTemplateMapping inverseMapping];
    [_objectManager.mappingProvider setSerializationMapping:inverseObjectListTemplateMapping forClass:[ObjectListTemplate class]]; 
```

问题是，每当将 objectListTemplate 发布或放置到服务器时，我都会获得一个根节点：

HTTP 正文：{"objects":[{"title":"TestTitle"}]}

服务器无法识别这一点。我需要能够获得以下格式：

HTTP 正文："objects":[{"title":"TestTitle"}]

请帮忙，过去两天这一直让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:04:43.933

您应该能够省略`ObjectListTemplate`，发布 NSArray 并仅定义内部映射。RESTkit 应该意识到它是一个数组，并将其对象映射到定义的映射，这最终应该是你想要的。

# java - 如何从 Java 向 sudo 提供 root 密码？

> ID：14015829
> 
> 赞同：4
> 
> 时间：2012-12-24T00:24:27.097
> 
> 标签：java, linux, command-line, sudo

我正在尝试编写一个小型 Java 应用程序来覆盖我的`/etc/resolv.conf`文件（我在 Ubuntu 12.04 上）。为此，我需要提供我的`root`密码：

```
myUser@myMachine:~$ sudo vim /etc/resolv.conf 
[sudo] password for myUser: ***** 
```

因此，执行此操作的过程分为三个步骤：

1.  `sudo vim /etc/resolv.conf`在终端输入
2.  终端要求我输入`root`密码
3.  我输入密码并按`[Enter]`

从我研究的所有内容中，我可以使用以下内容来执行上面的步骤 1：

```
try {
    String installTrickledCmd = "sudo vim /etc/resolv.conf";
    Runtime runtime = Runtime.getRuntime();
    Process proc = runtime.exec(installTrickledCmd);
}
catch(Throwable throwable) {
    throw new RuntimeException(throwable);
} 
```

但是当它执行时，shell 会提示我的 Java 进程输入密码。我不确定如何等待（上面的步骤#2）然后将我的密码提供回shell（上面的步骤#3）。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T00:33:52.673

你试过 -S 吗？

```
$echo mypassword | sudo -S vim /etc/resolv.conf 
```

来自男人：

```
The -S (stdin) option causes sudo to read the password from the standard input 
instead of the terminal device.  The password must be followed by a newline 
character. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T14:55:33.543

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;

public class Test1 {

  public static void main(String[] args) throws Exception {
    String[] cmd = {"sudo","-S", "ls"};
    System.out.println(runSudoCommand(cmd));
  }

  private static int runSudoCommand(String[] command) throws Exception {

    Runtime runtime =Runtime.getRuntime();
    Process process = runtime.exec(command);
    OutputStream os = process.getOutputStream();
    os.write("harekrishna\n".getBytes());
    os.flush();
    os.close();
    process.waitFor();
    String output = readFile(process.getInputStream());
    if (output != null && !output.isEmpty()) {
      System.out.println(output);
    }
    String error = readFile(process.getErrorStream());
    if (error != null && !error.isEmpty()) {
      System.out.println(error);
    }
    return process.exitValue();
  }

  private static String readFile(InputStream inputStream) throws Exception {
    if (inputStream == null) {
      return "";
    }
    StringBuilder sb = new StringBuilder();
    BufferedReader bufferedReader = null;
    try {
      bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
      String line = bufferedReader.readLine();
      while (line != null) {
        sb.append(line);
        line = bufferedReader.readLine();
      }
      return sb.toString();
    } finally {
      if (bufferedReader != null) {
        bufferedReader.close();
      }
    }
  }

} 
```

灵感来自 Viggiano 的回答。

# javascript - 如何从 content_script 向外部站点发出请求

> ID：14015830
> 
> 赞同：1
> 
> 时间：2012-12-24T00:24:54.257
> 
> 标签：javascript, ajax, google-chrome-extension, same-origin-policy, content-script

我正在尝试制作一个 chrome 扩展，它将在我的 Gmail 中显示一个弹出窗口，其中包含来自我的外部服务器的一些信息，比如今天的天气。

**我试过的**

1.  我曾尝试在 chrome 扩展中包含 js，但随后尝试对我的服务器进行 AJAX 调用违反了同源策略。所以那个选项不起作用。
2.  因此，我尝试将我的 js 文件保存在服务器上并在页面加载时加载它。

我的 manifest.json 看起来像这样：

```
{
  "name": "cvnosnvsdionfois",
  "version": "0.1.0",
  "manifest_version": 2,
  "description": "sldnfksdngsdngods",
  "browser_action": {
    "default_icon": "images/icon.png"
  },
  "permissions": [
    "http://api.flickr.com/", "webRequest",
    "tabs", 
    "http://*localhost:8080*"
  ],
 "content_scripts": [
    {
      "matches": ["https://mail.google.com/*"],
      "js": ["http://localhost:8080/static/response.js"]
    }
  ]
} 
```

我在其他地方读到内容脚本不能包含在外部 URL 中，所以我认为这不起作用。这里的正确方法是什么。我怎样才能有一些在 Gmail 中运行的 javascript 代码，可以从我的服务器请求信息？例如，[Smartr](https://www.xobni.com/download/gmail)是如何做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:34:16.483

我不确定为什么[Cross-Origin XMLHttpRequest](https://developer.chrome.com/extensions/xhr.html)不起作用，因为扩展不像常规网页那样受限，可以使用[XMLHttpRequest](http://www.w3.org/TR/XMLHttpRequest/)对象从远程服务器发送和接收数据，并且受到[相同来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的限制。只要它首先请求跨域权限，扩展程序就可以与其源之外的远程服务器通信。

## 参考：

*   [跨域 XMLHttpRequest](https://developer.chrome.com/extensions/xhr.html)
*   [权限](https://developer.chrome.com/extensions/manifest.html#permissions)

## 示范

此示例代码使用背景页面为另一个域制作 XHR。

### 清单.json

我确保清单具有所有可用权限，并且还注册了一个后台页面。

```
{
  "name": "Demo",
  "description": "Sample Message Communication",
  "version": "1",
  "permissions": [
    "<all_urls>"
   ],
  "background": {
    "scripts": ["background.js"]
  },

  "manifest_version": 2
} 
```

### 背景.js

此示例代码请求一些随机的 asp 页面

```
function makeXHR() {

    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function (data) {
        if (xhr.readyState == 4) {
            if (xhr.status == 200) {
                  console.log("Response is received");
            }
        } else {
            //callback(null);
        }
    }

    var url = 'http://www.w3schools.com/html/default.asp';
    xhr.open('GET', url, true);
    xhr.send();

}
document.addEventListener("DOMContentLoaded", makeXHR); 
```

# ruby-on-rails - 为什么我收到未定义的方法错误？

> ID：14015831
> 
> 赞同：0
> 
> 时间：2012-12-24T00:25:10.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我发布时，我收到此错误。

> 未定义的方法“community_community_topic_url”

我的代码是

**显示.html.erb**

```
<%- model_class = @community_topic.class -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:community_id) %>:</strong></dt>
  <dd><%= @community_topic.community_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:user_id) %>:</strong></dt>
  <dd><%= @community_topic.user_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:title) %>:</strong></dt>
  <dd><%= @community_topic.title %></dd>
  <dt><strong><%= model_class.human_attribute_name(:body) %>:</strong></dt>
  <dd><%= @community_topic.body %></dd>
  <dt><strong><%= model_class.human_attribute_name(:community_topic_icon_file_name) %>:</strong></dt>
  <dd><%= @community_topic.community_topic_icon_file_name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:community_topic_icon_content_type) %>:</strong></dt>
  <dd><%= @community_topic.community_topic_icon_content_type %></dd>
  <dt><strong><%= model_class.human_attribute_name(:community_topic_icon_file_size) %>:</strong></dt>
  <dd><%= @community_topic.community_topic_icon_file_size %></dd>
  <dt><strong><%= model_class.human_attribute_name(:community_topic_icon_updated_at) %>:</strong></dt>
  <dd><%= @community_topic.community_topic_icon_updated_at %></dd>
  <dt><strong><%= model_class.human_attribute_name(:deleted_at) %>:</strong></dt>
  <dd><%= @community_topic.deleted_at %></dd>
</dl>

<div class="form-actions">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              community_topics_path, :class => 'btn'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_community_topic_path(@community_topic), :class => 'btn' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              community_topic_path(@community_topic),
              :method => 'delete',
              :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
              :class => 'btn btn-danger' %>
</div> 
```

**community_topics_controller.rb**

```
def create
@community = Community.find_by_community_name(params[:community_id]) 

@community_topic = @community.community_topics.build (params[:id]) 

    respond_to do |format|
      if @community_topic.save
        format.html { redirect_to [@community, @community_topic], notice: 'Community topic was successfully created.' }
        format.json { render json: [@community, @community_topic], status: :created, location: @community_topic }
      else
        format.html { render action: "new" }
        format.json { render json: @community_topic.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**路线.rb**

```
resources :communities, :path => "shop", do
    resources :community_topics, :path => "topic", :as => :'topic'
end 
```

**Rake 路由的结果**

```
community_topic_index GET    /shop/:community_id/topic(.:format)          community_topics#index
                         POST   /shop/:community_id/topic(.:format)          community_topics#create
     new_community_topic GET    /shop/:community_id/topic/new(.:format)      community_topics#new
    edit_community_topic GET    /shop/:community_id/topic/:id/edit(.:format) community_topics#edit
         community_topic GET    /shop/:community_id/topic/:id(.:format)      community_topics#show
                         PUT    /shop/:community_id/topic/:id(.:format)      community_topics#update
                         DELETE /shop/:community_id/topic/:id(.:format)      community_topics#destroy 
```

更新：

我得到的错误

```
Routing Error

No route matches {:action=>"show", :controller=>"community_topics"} 
```

**开发日志**

```
Processing by CommunityTopicsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pc24BKJrqOaXxZHlRWEPQJKfvdcG9xVM98IqbJW4KgY=", "community_topic"=>{"community_id"=>"4", "user_id"=>"2", "title"=>"topic_title1", "body"=>"topic_body1"}, "commit"=>"Save Community topic", "community_id"=>"WALMART"}
  [1m[35mCommunity Load (0.5ms)[0m  SELECT `communities`.* FROM `communities` WHERE `communities`.`community_name` = 'smabrox' AND (`communities`.`deleted_at` IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `community_topics` (`body`, `community_id`, `community_topic_icon_content_type`, `community_topic_icon_file_name`, `community_topic_icon_file_size`, `community_topic_icon_updated_at`, `created_at`, `deleted_at`, `title`, `updated_at`, `user_id`) VALUES (NULL, 4, NULL, NULL, NULL, NULL, '2012-12-24 05:52:37', NULL, NULL, '2012-12-24 05:52:37', NULL)
[paperclip] Saving attachments.
  [1m[36m (4.1ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 46ms

ActionController::RoutingError (No route matches {:action=>"show", :controller=>"community_topics"}):
  app/controllers/community_topics_controller.rb:56:in `block (2 levels) in create'
  app/controllers/community_topics_controller.rb:54:in `create' 
```

**community_topics_controller.rb**

```
 def create
    @community = Community.find_by_community_name(params[:community_id]) 
    @community_topic = @community.community_topics.build (params[:id]) 

    respond_to do |format|
      if @community_topic.save
        format.html { redirect_to community_topic_path[@community, @community_topic], notice: 'Community topic was successfully created.' }
        format.json { render json: [@community, @community_topic], status: :created, location: @community_topic }
      else
        format.html { render action: "new" }
        format.json { render json: @community_topic.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**意见/community_topics/_form.html.erb**

```
<%= form_for :community_topic, url: community_topic_index_url, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :community_id, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :community_id, :class => 'number_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :user_id, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :user_id, :class => 'number_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :title, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :title, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :body, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :body, :class => 'text_area' %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                community_topic_index_path, :class => 'btn' %>
  </div>
<% end %> 
```

**community_topics_controller.rb #show**

```
 def show
    @community = Community.find_by_community_name(params[:community_id])
    @community_topic = @community.community_topics

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @community_topic }
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:03:04.280

您的 rake 路线显示该路线实际上是`community_topic`，因为您使用了`:as => 'topic'`.

只需将其称为

```
community_topic_url 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:04:28.530

在`communities_controller.rb`，尝试改变

```
 format.html { redirect_to community_topic_path[@community, @community_topic], notice: 'Community topic was successfully created.' } 
```

至

```
 format.html { redirect_to community_topic_path(@community, @community_topic), notice: 'Community topic was successfully created.' } 
```

注意括号。

它有效吗？

# html - 为什么 HTML5 Audio 标签总是有两个来源？

> ID：14015833
> 
> 赞同：3
> 
> 时间：2012-12-24T00:26:06.520
> 
> 标签：html, audio

看看它是如何链接到 .ogg 和 .mp3 的？这是为什么？我见过的所有示例和应用程序都做同样的事情。有*必要*有两个来源吗？

```
<audio controls>
  <source src="horse.ogg" type="audio/ogg">
  <source src="horse.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T00:26:57.147

不，这是没有必要的。不同的来源只是按顺序尝试的可能性；并非所有浏览器都保证支持所有格式，因此您提供备用。

（如果您只想提供一个，`src`and`type`也可以直接在`<audio>`标签上。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T00:37:06.317

并非所有浏览器都支持 MP3 或 OGG 格式，因此通常会包含两者以确保跨浏览器兼容性。

Wav 格式也可以包含在内，与 MP3 和 Ogg 不同，它支持所有浏览器（不包括 Internet Explorer）。

MP3 适用于 Internet Explorer 9+、Chrome 6+ 和 Safari 5+。Ogg 适用于除 Internet Explorer 和 Safari 之外的所有浏览器。

因此，MP3 和 Wav 或 MP3 和 Ogg 的组合可以在几乎所有主流浏览器上播放 HTML5 音频。当然，将 Wav 和 Ogg 作为一个组合包含在内是一个坏主意，因为 Internet Explorer 需要 MP3 作为格式。

因此，包含多个标签作为后备。

希望在未来，所有主流浏览器都将支持所有格式。目前只有 Chrome 可以。

（希望我的回答听起来不像绕口令。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T03:16:42.627

为了让它更简单，哈哈。

Firefox 不支持 mp3（如果他们仍然不支持，则为 idk）所以要让您的播放器在 Firefox 中正常运行，您需要 ogg 作为备份。

Firefox 将跳过 mp3 并尝试查找 ogg。

# php - 将 Codeigniter 项目从 Windows 转移到 Mac - 无法修改标头信息 - 标头已由

> ID：14015835
> 
> 赞同：1
> 
> 时间：2012-12-24T00:26:19.263
> 
> 标签：php, windows, macos, .htaccess, codeigniter

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

昨天我终于拿到了我的第一本 Mac Book。我喜欢它，但有一个问题真的困扰着我。出于某种原因，我从 Windows 笔记本电脑转移的项目无法正常工作。XAMPP 启动，我转到 localhost/CI_BUHZ 并且登录页面按预期工作，我输入我的凭据并按 Enter，但由于某种原因，整个事情都卡在了我的登录控制器中的 validate_credentials 函数上。它没有给我任何错误，只有 2 个警告 - 包括在下面

我想指出：*这个项目在我转移它的旧 Windows 笔记本电脑上完美运行。*据我所知，Mod Rewrite 已开启——如果我的其他控制器方法调用（例如 CI_PROJECT/Login 和 CI_PROJECT/Feeds/Home）正常工作？*即使我删除了 validate_credentials 函数并仅使用以下内容重新创建它：

```
function validate_credentials()
    {  

    redirect('site/home');
    } 
```

它仍然不会从我的 Mac 上的登录 -> 站点/主页。

这是原始的验证凭据功能：

```
function validate_credentials()
    {       
        $this->load->model('membership_model');
        $query = $this->membership_model->validate();
        if($query) // if the user's credentials validated...
        {
            $uid = $this->membership_model->grab_uid();
            $data = array(
                'username' => $this->input->post('username'),
                'uid' => $uid,
                'is_logged_in' => true
        );
        $this->session->set_userdata($data);
        redirect('site/home');
        }
        else // incorrect username or password
        {
            $this->index();
        }
    } 
```

这是.htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /CI_BUHZ/

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

**这是它抱怨的 img_model （即使被调用的函数根本不需要这个模型：**

```
<?php

class Image_model extends CI_Model {

function get_images ($album_id, $uid){
    $album_id =(int)$album_id;
    $q = $this->db->query("SELECT image_id, album_id_fk, timestamp, ext, uid_fk FROM images WHERE album_id_fk = $album_id AND uid_fk = $uid");
        if($q->num_rows() > 0) {
            foreach($q->result() as $row) {
                $data[] = $row;
            }

            return $data;
        }
    }

function image_check($image_id , $uid_fk){
$image_id = (int)$image_id;
$query = mysql_query("SELECT COUNT(image_id) FROM images WHERE image_id = $image_id AND $uid_fk");
return (mysql_result($query, 0)==1) ? true : false;

}

function delete_image($uid_fk, $image_id){
$image_id =(int)$image_id;

$image_query = mysql_query("SELECT album_id_fk , ext , uid_fk FROM images WHERE image_id = $image_id AND uid_fk = $uid_fk");
$image_result = mysql_fetch_assoc($image_query);
$album_id = $image_result['album_id_fk'];
$ext = $image_result['ext'];
$uid = $image_result['uid_fk'];

unlink('uploads/'.$uid.'_'.$album_id.'_'.$image_id.'.'.$ext);
unlink('uploads/thumbs/'.$uid.'_'.$album_id.'_'.$image_id.'.'.$ext);

mysql_query("DELETE FROM images WHERE image_id = $image_id AND uid_fk = $uid_fk");

}
}

?>

A PHP Error was encountered
Severity: Warning
Message: Cannot modify header information - headers already sent by (output started at /Applications/XAMPP/xamppfiles/htdocs/CI_BUHZ/application/models/image_model.php:2)
Filename: libraries/Session.php
Line Number: 672
A PHP Error was encountered
Severity: Warning
Message: Cannot modify header information - headers already sent by (output started at /Applications/XAMPP/xamppfiles/htdocs/CI_BUHZ/application/models/image_model.php:2)
Filename: helpers/url_helper.php
Line Number: 546 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:33:46.063

确保在修改标头之前没有输出任何内容。

`?>`出现此错误消息的一个非常常见的原因是结束 PHP标记后有换行符或其他文本。如果文件中只有 PHP，最好不要使用`?>`（这不是强制性的，也不是必需的）。

# sony - 位于子目录中时找不到 SmartWatch 模拟器首选项

> ID：14015838
> 
> 赞同：0
> 
> 时间：2012-12-24T00:26:46.663
> 
> 标签：sony, sony-smartwatch

当我通过智能扩展模拟器打开我的首选项时，在选项卡控件下的扩展首选项菜单中，单击 SampleControlExtension 设置。我得到：

```
android.content.ActivityNotFoundException: Unable to find explicit activity class {com.sonyericsson.extras.liveware.extension.q/com.sonyericsson.extras.liveware.extension.q.SamplePreferenceActivity}; have you declared this activity in your AndroidManifest.xml? 
```

此组合在 SmartWatch 模拟器中不起作用：

```
 ...
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.sonyericsson.extras.liveware.extension"
  android:versionName="1.0.1" android:versionCode="10001">
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="10"/>

<uses-permission
    android:name="com.sonyericsson.extras.liveware.aef.EXTENSION_PERMISSION" />

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".q.SamplePreferenceActivity" android:label="@string/preference_activity_title">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>

    <service android:name=".controlsample.SampleExtensionService" />

    <receiver android:name=".controlsample.ExtensionReceiver">
       <intent-filter>
        ... 
```

看起来像 SmartWatch 模拟器中的错误？

代码[链接](https://github.com/powder366/SampleControlExtension.git)

堆栈跟踪：

```
01-21 13:01:05.963: E/AndroidRuntime(3295): FATAL EXCEPTION: main
01-21 13:01:05.963: E/AndroidRuntime(3295): android.content.ActivityNotFoundException:        Unable to find explicit activity class {com.sonyericsson.extras.liveware.extension.q/com.sonyericsson.extras.liveware.extension.q.SamplePreferenceActivity}; have you declared this activity in your AndroidManifest.xml?
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1541)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.app.Activity.startActivityForResult(Activity.java:3351)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.app.Activity.startActivityForResult(Activity.java:3312)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.app.Activity.startActivity(Activity.java:3522)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.app.Activity.startActivity(Activity.java:3490)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at com.sonyericsson.extras.liveware.emulator.ExtensionPreferenceActivity$1.onPreferenceClick(ExtensionPreferenceActivity.java:87)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.preference.Preference.performClick(Preference.java:944)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:208)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.widget.AbsListView$1.run(AbsListView.java:3529)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.os.Handler.handleCallback(Handler.java:615)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.os.Looper.loop(Looper.java:137)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at java.lang.reflect.Method.invoke(Method.java:511)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-21 13:01:05.963: E/AndroidRuntime(3295):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:55:46.013

我已经下载了您的示例代码，导入到 Eclipse 等，但无法重现您遇到的问题。你还有吗？

和一般性评论 - 您实现的扩展是一个小部件扩展，因此它不应该在模拟器的“控制”选项卡中可见。所以，我很好奇你怎么能在这个标签下找到扩展。

也许您可以用更多信息更新您的问题，也许还有更多堆栈跟踪信息？

**更新：**

我已经做了一些测试，很明显模拟器在上面示例的具体情况下并没有表现出应有的行为。我现在将检查智能扩展 SDK 的更新时间表，看看我们是否可以发布修复。

# java - 将 onTouchListener 设置为位图图像？

> ID：14015843
> 
> 赞同：1
> 
> 时间：2012-12-24T00:27:28.717
> 
> 标签：java, android

我想做的是当有人触摸我的位图图像时，会发生一些事情。我一直在努力寻找该怎么做。我有一个画布和一个画在上面的位图。我怎么得到它，所以如果你触摸图像，就会发生一些事情。这是我到目前为止的代码：

用于绘制画布和位图的绘图类

```
package com.example.touchperson;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.View;

public class Drawing extends View {

    Bitmap robot; 
    //Ignore this float x, y;
    public Drawing(Context context)  {
        super(context);
         robot = BitmapFactory.decodeResource(getResources()    , R.drawable.character);

        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawColor(Color.WHITE);
    canvas.drawBitmap(robot, 200, 200,  null);
    //}

}
} 
```

这是主要的活动课程

```
package com.example.touchperson;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Paint;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnTouchListener {

    Drawing view;
    int touchCount = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState)  {
        super.onCreate(savedInstanceState);
        view = new Drawing(this);
        view.setOnTouchListener(this);
        setContentView(view);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onTouch(View v, MotionEvent e) {
        // TODO Auto-generated method stub

        return false;
    }

} 
```

这是xml文件。但我相信这是没用的，因为我是以编程方式完成的。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"

    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"/>

</RelativeLayout> 
```

起初我尝试使用 MotionEvent.getX && MotionEvent.getY == 200 方法，然后做一些事情，因为我的图像设置为（200,200），但这没有用。（这些方法在 API 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:35:12.210

你应该`setOnClickListener`改用。这样`View`默认情况下将处理所有触摸事件，仅在检测到单击事件时触发您的侦听器。

# spring - 在重新部署时释放 Hibernate 资源

> ID：14015847
> 
> 赞同：0
> 
> 时间：2012-12-24T00:28:35.383
> 
> 标签：spring, hibernate, jpa, out-of-memory

我有一个在 Tomcat 6.0.35 上运行的 Web 应用程序，它使用 Spring 3.1.2、Hibernate 4.1.8 和 MySQL Connector 5.1.21。

在几次重新部署后，我一直试图找出导致 Tomcat 内存不足（Perm Gen）的原因。

注意：不要告诉我增加Tomcat的JVM内存，因为那样只会推迟，问题

具体来说，我使用了 VisualVM 工具，并且能够消除一些问题，包括一些 mysql 和 google 线程问题。我还能够发现并修复由于在 Web 应用程序中使用 Velocity 作为单例而导致的问题，并且也没有在正确的时间/位置关闭我拥有的一些线程局部变量。但我仍然不能完全消除/找出这个休眠问题。

这是我正在做的事情：

1.  从我的开发 IDE 部署我的 webapp
2.  在我的浏览器中打开一个 tomcat 管理器窗口
3.  启动 VisualVM 并获取 tomcat 实例上的 HeapDump
4.  去tomcat管理器并重新部署我的webapp
5.  在 VisualVM 中使用另一个 HeapDump

我的第一个观察是原始 webapp 的 WebappClassLoader 没有被垃圾收集。

当我检查来自第二个 HeapDump 的保留对象时，org.hibernate.internal.SessionFactoryImpl 类具有显着的特征，这让我相信它没有被 Spring 或类似的东西破坏/关闭（因此 WebappClassLoader 仍然有一个参考它）。

有没有人遇到过这个问题并确定了正确的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:15:55.097

我目前不知道您的设置可能有什么问题，但我知道使用[Plumbr](http://plumbr.eu)您很可能会找到实际的泄漏。

# python - Python 从文件中读取十六进制数字并写入另一个文件。“int”赋值中的“无效文字”

> ID：14015852
> 
> 赞同：0
> 
> 时间：2012-12-24T00:29:01.077
> 
> 标签：python, hex, literals

`/dev/input/event0: 0003 0001 000081a5`

应该成为

```
sendevent 0003 0001 000081a5 
```

在新文件中。

代码是

```
import sys
import fileinput

prefix = 'sendevent '

inputline = None
complete = None
part1len = 0
part1 = None
part2 = None

num1 = 0
num2 = 0
num3 = 0

rawfile = None
outfile = None
filename = None

rawfile = sys.argv[-1]

fo = open(rawfile, 'r')

filename = rawfile.find('.');
outfile = rawfile[:filename] + '.scr'

fw = open(outfile, 'w')

fw.write('#!/bin/sh' + '\n')

fw.write('echo Running - signature function ' + '\n')

for inputline in fo.read().split('\n'):
    part1len = inputline.find(':');

    if part1len > -1:
        part1 = inputline[:part1len]

        part2 = inputline.split(' ')

        num1 = int(part2[1], 16)
        num2 = int(part2[2], 16)
        num3 = int(part2[3], 16)

        complete = prefix + part1 + " " + str(num1) + " " + str(num2) + " " + str(num3)

        fw.write(complete + '\n')

print 'Processing complete'
print 'File created: ', outfile
print
print 'Copy file to the device'
print 'adb push ' + outfile + ' /sdcard/' + outfile
print
print 'Run the script'
print 'adb shell sh /sdcard/' + outfile

fo.close()
fw.close() 
```

输出命令行中的错误是：

```
Traceback (most recent call last):
  File "Android\decs.py", line 41, in <module>
    num1 = int(part2[1], 16)
ValueError: invalid literal for int() with base 16: '=' 
```

今天刚开始学习Python。我不确定出了什么问题。经历了网上发布的类似错误，但找不到解决方案。

谢谢

# python - 在 Python 中写入文件时出现 IOError

> ID：14015857
> 
> 赞同：0
> 
> 时间：2012-12-24T00:30:12.563
> 
> 标签：python, file, file-io

当我尝试执行以下写入文件时，我收到如下所示的错误...我做错了什么？

```
# create a method that writes to a file.

f = open("C:\Users\QamarAli\Documents\afaq's stuff\myFile.txt", "r+")
f.write('0123456789abcdef') 
```

这是错误：

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
IOError: [Errno 22] invalid mode ('r+') or filename: "C:\\Users\\QamarAli\\Documents\x07faq's stuff\\myFile.txt"
>>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:57:43.737

尝试在 windows 上使用`os.path`和`os.sep`构造文件路径：

```
import os

file_path = os.path.join("C:" + os.sep, "Users", "QamarAli", "Documents", "afaq's stuff", "myFile.txt")
print file_path
print os.path.exists(file_path) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T00:31:45.647

`\a`是一个转义序列（看看你的文件名中发生了什么）。在使用 Windows 路径时使用[原始字符串](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)来告诉 Python 不要解释反斜杠转义序列：

```
r"C:\Users\QamarAli\Documents\afaq's stuff\myFile.txt"
^ add this thing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T10:38:14.500

在路径中使用正斜杠。

```
f = open("C:/Users/QamarAli/Documents/afaq's stuff/myFile.txt", "r+")
f.write('0123456789abcdef') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T15:40:42.523

```
f = open("C:\Users\QamarAli\Documents\afaq's stuff\myFile.txt", "a+")
f.write('0123456789abcdef') 
```

试试这个：

```
import os
f = open(os.path.join("C:\\", "Users", "QamarAli", "Documents", "afaq's stuff", "myFile.txt"),  "r+")
f.write('0123456789abcdef')
f.close() 
```

确保文件已经存在，并且路径有效。

我现在也看到了这个，看来你可能使用了错误的路径，看看ineterpreter给你的错误。而不是`afaq's stuff`它说的`x07faq's stuff`是加号，它是我看到一个斜线的唯一地方。我想我同意搅拌机你的文件路径不正确。

# sql - SQL 新手：在 SQL 查询中使用当前日期作为变量

> ID：14015859
> 
> 赞同：1
> 
> 时间：2012-12-24T00:30:49.830
> 
> 标签：sql, sqlite, sqlitemanager

我使用了 Excel 并创建了 2 列。`column1`包含 DATES，`column2`包含值作为 INT。我已使用 SQLite Manager 将表作为 CSV 导入。我已连接到数据库，并已成功将其用于仅涉及文本的其他查询。现在我想在 column2 中选择与 column1 中显示的当前日期相对应的 INT。因此，每天运行 SQL 查询时，它将根据新的当前日期自动更新。我用过

```
SELECT column2 FROM table WHERE column1 = CURRENT_DATE 
```

但是，它返回 null （空白，什么都没有），而如果我使用

```
SELECT column2 FROM table WHERE column1 > CURRENT_DATE 
```

它返回rowid1的column2中的INT，但如果我使用

```
SELECT column2 FROM table WHERE column1 < CURRENT_DATE 
```

它返回 rowid3 的第 2 列中的 INT。

因此，数据库正在运行；但是，问题在于它无法将当前系统日期与 column1 中的正确值相关联。是否有可能导入CSV。进入 SQLite 已将数据类型更改为 VARCHAR 或 DATE 和 INT 以外的其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:41:24.627

SQLite 没有`DATE`数据类型。

日期通常存储为字符串（CSV 无论如何都没有类型），并且为了与 SQLite 的内置日期函数兼容，必须采用`yyyy-mm-dd`.

从 Excel 导出之前，请确保所有日期都使用此格式进行格式化。

# jquery - 如何使用 Javascript 访问 Python 应用程序来实时和更新搜索结果？

> ID：14015861
> 
> 赞同：1
> 
> 时间：2012-12-24T00:31:00.007
> 
> 标签：jquery, python, sqlalchemy, flask

我目前有一个基于 Flask 和 SQLAlchemy 构建的简单 python 应用程序。该应用程序访问`User`从另一个 python 文件导入的数据库。该应用程序有两个视图，一个是`home`

```
def home()
    if request.method == 'POST':
            search = Search(query=request.form['searchbox'], time=datetime.datetime.utcnow())
            db.session.add(search)
            db.session.commit()

            return redirect(url_for('results', query=request.form['searchbox']))
    return render_template('mainin.html') 
```

它只是显示索引页面并将数据传递`searchbox`到第二个视图，`results`在那里显示它们。

```
def results(query):
    results = User.query.filter(User.username.contains(query)).all()
    return render_template('results.html', results=results) 
```

但是，我希望将结果显示在与搜索框相同的页面上，在用户键入查询的地方。我认为我想要的效果是搜索 StackOverflow 时的实时结果。我做了很多搜索，现在我意识到要实现这个效果，我应该只在`mainin.html`页面中使用 JQuery 来调用数据库，因为在搜索框中输入了字符。目前，当点击表单的按钮时，通过 POST 获取结果。所以我假设 JQuery 需要自动进行类似的 POST，尽管我不确定从哪里开始。提前谢谢了。

# mysql - 在 MySQL 中生成关键字表（作为全文搜索的替代方案）

> ID：14015866
> 
> 赞同：2
> 
> 时间：2012-12-24T00:31:31.903
> 
> 标签：mysql, heroku, full-text-search, amazon-rds

我在 RDS 上使用 InnoDB，遗憾的是它还不支持 MySQL 全文搜索。因此，我正在寻找替代方案。我的应用程序在 Heroku 上，我考虑了各种提供搜索功能的插件，但有一个非常大的公司表（约 1 亿条记录），我认为它们非常昂贵。我只需要能够搜索表格上的一个字段——公司名称。

因此，我正在考虑创建自己的“关键字”表。本质上，这将列出每个公司名称中包含的每个单词。然后会有另一个表显示这些关键字和 company_id 之间的关联。

1.  这听起来是个好主意吗？有没有更好的选择？

2.  创建关键字表和关联表的最有效方法是什么？如果可能的话，我想用 T-SQL 来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:37:06.017

你可以做到，而且比使用`LIKE '%word%'`查询要好得多。

但它不如使用正确的全文索引好。

请参阅我的演示文稿[Full Text Search Throwdown](http://www.slideshare.net/billkarwin/practical-full-text-search-with-my-sql)，其中我比较了 MySQL 的全文解决方案，包括三元组，这与您正在考虑的关键字解决方案大致相似。

迄今为止，最快的解决方案是 Sphinx Search。

# c# - 仅当其中的 texblock 高度大于 ScrollViewer 高度时，如何使 ScrollViewer 工作？

> ID：14015868
> 
> 赞同：0
> 
> 时间：2012-12-24T00:31:56.820
> 
> 标签：c#, silverlight, windows-phone-7, xaml

在我的`ListBox`我显示不同的内容，包括文本。文本可以很长也可以很短。它滚动`ScrollViewer`。代码：

```
<ScrollViewer MaxHeight="300" VerticalAlignment="Top" Grid.Column="1" Grid.Row="1" >
    <TextBlock Style="{StaticResource TextsTextBlock}" Text="{Binding Texts}"  Grid.Column="1" Grid.Row="1" />
</ScrollViewer> 
```

如果文本很短，并且此文本的高度未`MaxHeight`达到`ScrollViewer`. 我只想`ScrollViewer`在文本很长且高度大于`ScrollViewer`'s时才制作作品`MaxHeight`，否则 - 它不必工作。

尝试过的边框

```
<Border  BorderBrush="Aqua"  BorderThickness="2" MaxHeight="300" VerticalAlignment="Top" Grid.Column="1" Grid.Row="1">
 <ScrollViewer VerticalAlignment="Top" VerticalScrollBarVisibility="Auto" >
 <TextBlock Style="{StaticResource TextsTextBlock}" Text="{Binding Texts}"  Grid.Column="1" Grid.Row="1" />
 </ScrollViewer>
 </Border> 
```

但它仍然在这个边界滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:27:13.210

`Grid.`尝试从内部控件中删除一些属性

```
<Border BorderBrush="Aqua" BorderThickness="2" MaxHeight="300" VerticalAlignment="Top" Grid.Column="1" Grid.Row="1">       
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" >
        <TextBlock Text="text" TextWrapping="Wrap"/>
    </ScrollViewer>
</Border> 
```

这适用于一行文本

如果我复制粘贴您的代码，它可以正常工作

![在此处输入图像描述](../Images/76cce865ed8ac816aa44362905e2de2e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:36:42.877

将[`VerticalScrollBarVisibility`属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.verticalscrollbarvisibility%28v=vs.95%29.aspx)设置为[`Auto`](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollbarvisibility%28v=vs.95%29.aspx)。

默认值是`Visible`表示始终显示滚动条。

相比之下，该[`HorizontalScrollBarVisibility`属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.horizontalscrollbarvisibility%28v=vs.95%29.aspx)的默认值为`Hidden`。

# javascript - 选择选定范围并获取选择的父节点后，有没有办法找到绝对路径？

> ID：14015869
> 
> 赞同：1
> 
> 时间：2012-12-24T00:32:25.827
> 
> 标签：javascript, html, dom, xpath

> **可能重复：**
> [使用 javascript 记录和检索 html 元素/节点路径](https://stackoverflow.com/questions/3783407/record-and-retrieve-html-element-node-path-using-javascript)

我正在尝试在 javascript 中查找节点的绝对路径。

基本上用户选择了一些文本，我很好地处理了它的父节点，我试图找到它的绝对路径，所以我可以稍后在 xpath 中使用它来再次定位选定的文本：

您可以在此处找到我正在谈论的示例（在 php 中）：

[xpath查找绝对路径有什么简单的方法吗？](https://stackoverflow.com/questions/14014862/xpath-finding-absolute-path-is-there-any-easy-way)

也通过绝对路径，我的意思是：“/html/body/div[1]/div[1]/div[2]/span[2]”

这是我到目前为止所拥有的：

```
if (window.getSelection){
    t = window.getSelection();
    if (t.rangeCount > 0) {
         parent = t.getRangeAt(0).startContainer.parentNode
     } 
} else if (document.selection) {
    t = document.selection.createRange().text;
    range = document.selection.createRange();
    range.collapse(isStart);
    parent = document.selection.createRange().parentElement();
}  

if (t != '' && parent!='')   {
// here i would like to get the path
} 
```

* * *

我试图解决这个问题，似乎我设法让标签父/子顺序正确但是当我计算兄弟姐妹时出现了一些问题，它给了我完全的废话，或者我错过了一些东西。

到目前为止，这是我想出的：

```
function absolutePath(node) {
var tages = new Array();
var index = new Array();
var c = 0;
do {
    var k=1, e=node;
    while (e = e.previousSibling) {
        k++;
    }
    index[c] = k;
    tages[c] = node.nodeName;

    c++;
}while(node = node.parentElement)

//alert(tages + '\n' + index);
return path;
} 
```

任何输入将不胜感激

# twitter - 用于从文本（例如推文）中过滤流行文化名言或名人相关数据的数据库？

> ID：14015871
> 
> 赞同：2
> 
> 时间：2012-12-24T00:33:42.950
> 
> 标签：twitter, social-networking, text-mining, social-media

我正在尝试挖掘社交媒体数据，例如推文。然而，社交媒体数据有很多噪音——例如人们讨论名人或引用电影/电视/歌曲，这通常与他们自己或他们实际认识的人无关。

那么，是否**有关于当前最流行名人的动态（即自动更新）数据库**？他们所在的电影名言或他们唱的歌词也将是相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:42:29.593

我认为不存在这样的精选列表。较小的确实存在，例如 Wikipedia 上的 100 部顶级电影名言。但是，这些都没有更新。

一种可能性是过滤掉出现在另一个跟踪趋势的社交媒体网站上的输入内容，例如[Delicious](http://delicious.com/)。除非您正在寻找趋势，否则可能会上升到两个趋势网站顶部的东西......只是一种趋势。

Delicious为其 API提供了一个[不错的 Python 包装器。](http://code.google.com/p/pydelicious/)

在 Pythonic 伪代码中，

```
 data = social-media.content
 data = filter(lambda datum: datum not in delicious.content-list,data) 
```

# google-maps - 谷歌地图的 API 1 密钥注册

> ID：14015872
> 
> 赞同：-1
> 
> 时间：2012-12-24T00:33:44.837
> 
> 标签：google-maps, api-key

我在谷歌地图中生成 API 密钥时遇到问题，谷歌告诉我：

> 您输入的指纹无效，请按浏览器上的返回按钮并输入有效的证书指纹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:35:15.877

我假设您正在输入证书的哈希值以创建[Google Maps Android API v.1 key](https://developers.google.com/maps/documentation/android/v1/maps-api-signup)。

错误消息是因为您的哈希与安全证书的实际 MD5 签名不匹配。

可能是您正在复制 SHA-1 值，该值默认显示在最新的 JRE 中。要获取 MD5 哈希，请`keytool`使用参数运行程序`-list -v`，例如：

```
C:\Program Files\Java\jre7\bin\keytool -list -v 
```

您的本地密钥库的证书哈希应该显示在控制台中。

# css - 额外空间和水平滚动条

> ID：14015878
> 
> 赞同：0
> 
> 时间：2012-12-24T00:34:14.593
> 
> 标签：css, layout, scrollbar

我找不到`CSS`导致异常***空间和滚动条***出现的原因，如下图所示：

![](../Images/030ef6716b59fbe2f20a72e6c4e95953.png)

网站页面在这里：
[http ://www.ridgestyle.com/forum/](http://www.ridgestyle.com/forum/)

CSS页面在这里：
[http ://ridgestyle.com/forum/Themes/ridgestyle_2/css/index.css?fin20](http://ridgestyle.com/forum/Themes/ridgestyle_2/css/index.css?fin20)

我不知道从哪里开始寻找错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T00:36:34.877

这是填充：5px；在 CSS 中的#bodyarea 上

改变

```
#bodyarea {
    padding: 5px;
    color: #444;
    background: #FEFEFE url(../images/img/bodyarea-bg.gif) 0 0 repeat-x;
} 
```

到

```
#bodyarea {
    padding: 5px 0px;
    color: #444;
    background: #FEFEFE url(../images/img/bodyarea-bg.gif) 0 0 repeat-x;
} 
```

它将删除左右填充，但保留顶部和底部填充。

此外，html 的 min-height 设置为 101%，这会导致滚动条在不需要时出现。（在 CSS 文件的第 113 行）

# android - Google Places API 正在模拟器上运行，但在真实设备上崩溃

> ID：14015885
> 
> 赞同：1
> 
> 时间：2012-12-24T00:35:41.770
> 
> 标签：android, android-emulator, google-places-api

我一直在开发 android 应用程序，在使用**google places api**时，它运行良好。**当我在模拟器**上运行时，所有预期的结果都是从`HTTP`请求中检索的。但是当我使用释放键将它导出到设备时，它崩溃了。我发现问题在于 Google Places api 检索结果，错误代码有时是零结果和无效请求。**`unfortunately app stopped working`**

 **我尝试了所有可能的方法来解决这个问题，但无法解决这个问题。这是代码的样子：

```
public PlacesList search(double latitude, double longitude, double radius, String searchtypes) throws Exception {

        this._latitude = latitude;
        this._longitude = longitude;
        this._radius = radius;

        try {

            HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
            HttpRequest request = httpRequestFactory
                    .buildGetRequest(new GenericUrl(PLACES_SEARCH_URL));
            request.getUrl().put("key", API_KEY);
            request.getUrl().put("location", _latitude + "," + _longitude);
            //request.getUrl().put("rankby",  "distance");
            request.getUrl().put("radius", _radius); // in meters
            request.getUrl().put("sensor", "false");
            if(searchtypes != null)
                request.getUrl().put("types", searchtypes);

            PlacesList list = request.execute().parseAs(PlacesList.class);
            // Check log cat for places response status
            //Log.d("Places Status", "" + list.status);
            return list;

        } catch (HttpResponseException e) {
            Log.e("Error:", e.getMessage());
            return null;
        }

    }

    /**
     * Searching single place full details
     * @param refrence - reference id of place
     *                 - which you will get in search api request
     * */
    public PlaceDetails getPlaceDetails(String reference) throws Exception {
        try {
            //Log.v("reference " , reference);
            HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
            HttpRequest request = httpRequestFactory
                    .buildGetRequest(new GenericUrl(PLACES_DETAILS_URL));
            request.getUrl().put("key", API_KEY);
            request.getUrl().put("reference", reference);
            request.getUrl().put("sensor", "false");

            PlaceDetails place = request.execute().parseAs(PlaceDetails.class);
            Log.v("place successfully bought " , place.result.name);
            return place;

        } catch (HttpResponseException e) {
            Log.e("Error in Perform Details", e.getMessage());
            throw e;
        }
    }

    /**
     * Creating http request Factory
     * */
    public static HttpRequestFactory createRequestFactory(
            final HttpTransport transport) {
        return transport.createRequestFactory(new HttpRequestInitializer() {
            public void initialize(HttpRequest request) {
                GoogleHeaders headers = new GoogleHeaders();
                headers.setApplicationName("TreasureRun");
                request.setHeaders(headers);
                JsonHttpParser parser = new JsonHttpParser(new JacksonFactory());
                request.addParser(parser);
            }
        });
    }

The above code are present in GooglePlaces.java file and it is called from async task present in java2 file.

The code in java2 file is:

@Override
protected String doInBackground(String... args) {
 // creating Places class object 
 String taskstatus;
 googlePlaces = new GooglePlaces();
 try {
     String keyword = "cafe|restaurant";
     double radius = 1000; // 1000 meters 
     nearPlaces = googlePlaces.search(gps.getLatitude(),
     gps.getLongitude(), radius, keyword);
 } catch (Exception e) {
    e.printStackTrace();
}
taskstatus = "done";
return taskstatus;
} 
```

但发生的事情是我打电话的时候：

```
status = nearPlaces.status; 
```

我猜真实设备中的状态不是“Ok”并且它正在崩溃。但在模拟器中它完美流畅

我试了很多天。任何人请帮助我

谢谢纳文**

# .net - MemoryCache 不区分大小写的键查找

> ID：14015886
> 
> 赞同：8
> 
> 时间：2012-12-24T00:35:57.547
> 
> 标签：.net

我试图找到一种方法让 .net 4.0 MemoryCache.Default 实例使用不区分大小写的比较器。

那可能吗？

```
var bob = new object();

MemoryCache.Default["Bob"] = bob;

bob == MemoryCache.Default["bob"]; --> true 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T02:15:44.413

通过[ILSpy](http://ilspy.net/)查看代码，这似乎是不可能的。因为在幕后它最终使用的`GetHashCode()`是您的密钥字符串。

我认为最简单的解决方法是实现自定义缓存，扩展`MemoryCache`它覆盖与键交互的所有方法，并`ToUpperInvariant()`在将其作为参数传递给基调用时调用。

# svn - Subversion (Tortoise) 仅包含特定的文件类型

> ID：14015887
> 
> 赞同：0
> 
> 时间：2012-12-24T00:36:16.047
> 
> 标签：svn

我的网络应用程序中有一个文件夹，用于存储图像。这些是在应用程序工作流程中添加的“运行时”文件，不应提交给源代码管理。

此文件夹中有一个 PHP 文件需要提交。

我如何告诉 Subversion (TortoiseSVN) 只添加这个文件夹和`.php`文件。即只包括`.php`文件并排除所有其他文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:44:22.200

您只需添加该文件。例如在 Windows 中：

右键单击包含 .php 文件的文件夹，选择 TortoiseSVN -> 添加，一旦您这样做，另一个窗口将显示您尝试添加的文件夹的所有内容，取消选择除您想要颠覆的文件之外的所有内容，单击“好的”并提交。现在，当您提交时，只会添加文件夹内的那个文件（您选择的那个文件）（它将忽略所有其他文件，只提交对该特定文件所做的更改）。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T09:27:43.553

从 Tortoise SVN 菜单中，您可以使用特定模式排除进入存储库的项目，例如，如果您想排除图像添加 jpg，或者一个名为 images 的文件夹，然后在排除项目中添加名称图像。

# java - 在java中向子进程发送箭头键输入

> ID：14015891
> 
> 赞同：0
> 
> 时间：2012-12-24T00:36:40.587
> 
> 标签：java, arrow-keys, child-process

我想在我的 java 程序中运行一个子进程来创建自动化。我没有子进程的源代码。

有一些功能需要在子进程中按下箭头键。

我可以通过子进程的 STDIN 将 ASCII 字符发送到子进程，但是如何将箭头键发送到子进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:55:55.197

看`java.awt.Robot`（`keyPress`/ `keyRelease`）。这允许您将键盘事件、鼠标移动和鼠标点击发送到您的操作系统（除其他外）。

我怀疑将键盘事件发送到特定进程（而不仅仅是操作系统）超出了 Java 本身可以做的事情，尽管 C/C++/C# 可能可以做类似的事情。

# c++ - 对已定义函数的未定义引用

> ID：14015893
> 
> 赞同：1
> 
> 时间：2012-12-24T00:36:49.367
> 
> 标签：c++

所以大概我正在做一些非常愚蠢的事情并抓住它，但我不断得到一个未定义的引用，指向我最明确定义的函数。在我的 .cpp 文件之一中，我使用以下命令：

```
#include "MVec.h"
...
MVec ans;
...
for(int i = 0; i < 3; i++)
    ans[i] = ... 
```

在 MVec.h 中，我有：

```
class MVec {
...
inline double & operator[](const int i);
inline const double & operator[](const int i) const;
...
}; 
```

最后，在 mvec.cpp 中，我有：

```
inline double & MVec::operator[](const int i) {
        #ifdef CHECK_BOUNDS
        if(i < 0 || i >= 3)
                throw("Subscript out of bounds");
        #endif

        return vec[i];
}

inline const double & MVec::operator[](const int i) const {
        #ifdef CHECK_BOUNDS
        if(i < 0 || i >= 3)
                throw("Subscript out of bounds");
        #endif

        return vec[i];
} 
```

然而，不知何故，当我编译这两个 .cpp 文件并尝试链接它们时

```
g++ atommanager.cpp -o atommanager.o
g++ mvec.cpp -o mvec.o
g++ atommanager.o mvec.o -o gpumd 
```

我总是得到一个错误：

```
atommanager.cpp:(.text+0x76): undefined reference to `MVec::operator[](int)' 
```

这里，atommanager.cpp 是我提到的第一个 .cpp 文件的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T00:42:56.627

定义函数`inline`不提供外部可见的定义：该定义仅在`inline`定义函数的翻译中可见（我认为仅适用于`inline`定义之后的调用，除非还声明了该函数`inline`）。解决此问题的最简单方法是删除`inline`s. 或者，您需要在标题中定义函数。

# database - 寻找用于持久化的分布式键值数据库

> ID：14015897
> 
> 赞同：5
> 
> 时间：2012-12-24T00:37:18.483
> 
> 标签：database, persistence, key-value-store

我正在寻找一种高效的键值对分布式持久数据库。

*   我研究了 Redis，但它只支持具有高达 $2^{32}$ 键的哈希，这对于我的应用程序来说是不够的

*   我研究了 Memcached，但它不是为长期持久性而设计的，它是为键值对在一段时间后过期而设计的

*   我研究了 BerkeleyDB，但不支持客户端-服务器范式，它基本上是一个应用内存储引擎

*   我已经研究过 HyperTable，但并不是真正面向行的，除非您想破解时间戳，否则您无法编辑现有行，并且在删除键 + 时间戳后，它无法重新插入。此外，唯一支持的值类型是字符串，如果要存储浮点数或复杂对象，则需要序列化为字符串然后反序列化

*   我研究过 MongoDB，它非常灵活，但它遇到了非常重要的性能和可伸缩性问题，这些问题在过去两年中没有得到解决。他们在这篇[博文](http://blog.engineering.kiip.me/post/20988881092/a-year-with-mongodb)中进行了总结。

接下来我将研究 Cassandra 和 Riak，正如你所见，我很快就没有真正的选择了

还有哪些其他数据库可以符合我上面概述的描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:01:11.860

Take a look at [http://code.google.com/p/fastdht](http://code.google.com/p/fastdht)

It is a high performance distributed hash table based on Berkeley DB.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:56:54.320

看看 CouchDB。[http://guide.couchdb.org/draft/why.html](http://guide.couchdb.org/draft/why.html)

它是一个非关系型数据库、开源、分布式（增量、双向复制）、无模式。数据存储在格式为 JSON 的文档中。它具有强大的持久性，是一个分布式键值数据库。

# typescript - 在 HTML 文档中嵌入 TypeScript 代码

> ID：14015899
> 
> 赞同：54
> 
> 时间：2012-12-24T00:37:40.553
> 
> 标签：typescript

是否可以在网页中嵌入 TypeScript 代码？我想在脚本标签中嵌入 TypeScript 代码，如下所示（以便它自动编译为 Javascript）：

```
<script type = "text/typescript">
    //TypeScript code goes here
</script> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-24T00:42:51.987

实际上有几个项目允许你使用这样的 TypeScript 代码 - [TypeScript Compile](https://github.com/niutech/typescript-compile)，[ts-htaccess](https://github.com/ComFreek/ts-htaccess)。

这里的问题是 .ts 代码应该编译成 JavaScript - 它可以在客户端（慢；整个 TSC 也应该加载到客户端）或服务器端（显然更快，而且还很远）更容易利用已编译代码上的缓存）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-07-20T22:20:44.743

这是我编写的一个版本，它**直接**使用 Microsoft/TypeScript/master 的版本，因此它始终保持最新：[https ://github.com/basarat/typescript-script](https://github.com/basarat/typescript-script)

您甚至可以指向`ts`您可能拥有的任何其他 TypeScript 版本，它会正常工作

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-24T00:42:59.257

已经为此目的开发了一个 JavaScript 库 - 它称为[TypeScript Compile](https://github.com/niutech/typescript-compile)，它允许将 typescript 嵌入到 HTML 中（如上所示。）

# mysql - sqlexception 索引超出了正确的 sql 语句的范围

> ID：14015900
> 
> 赞同：0
> 
> 时间：2012-12-24T00:37:47.593
> 
> 标签：mysql, playframework-2.0, ebean

我有一个运行良好的 sql 语句。但是在我的 webapp 中使用 play 2.1 实现时，我得到了这个错误：javax.persistence.PersistenceException: Query throw SQLException:Column Index out of range, 0 < 1。

我在这里发现了这个问题：[Error execution MySQL query via ebean using RawSql](https://stackoverflow.com/questions/13977693/error-executing-mysql-query-via-ebean-using-rawsql) 但后来我遇到了其他异常。

我正在尝试获取包含标签列表的标记线程（与堆栈溢出相同）。这里是sql语句

```
SELECT t.topic 
FROM topic t 
WHERE 3 = (SELECT COUNT( DISTINCT ta.id ) 
           FROM topic_tag tt 
           INNER JOIN tag ta ON ta.id = tt.tag_id 
           WHERE ta.name IN ('children', 'spain','new') 
           AND tt.topic_id = t.id ) 
```

在玩我这样做：

```
RawSql rawSql = RawSqlBuilder.unparsed(sqlString).create();
result =  find.setRawSql(rawSql).findList(); 
```

然后，我得到了越界异常。之后我尝试设置列映射：

```
RawSql rawSql = RawSqlBuilder.unparsed(sqlString)
            .columnMapping("t.topic","topic")
            .columnMapping("t.id","id")
            .columnMapping("ta.name","tagList.name")
            .columnMapping("ta.id","tagList.id")
            .create(); 
```

现在我得到一个空指针异常。可能是因为 ebean 无法从中创建查询。

这是我模型中的一些代码：

```
@Entity
public class Topic extends Model{

@Id
public Long id;

@Required
public String topic;

@ManyToMany
public List<Tag> tagList;
}

@Entity
public class Tag extends Model {

@Id
public long id;

@Required
public String name;
} 
```

经过大量尝试和沮丧后，我希望有人对此有所提示或解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:40:02.430

我只是在类似的问题上浪费了几个小时，实际上我设法通过仅映射`id`某种模型的字段并选择较少数量的字段来解决它，之后自动加载其他值 - 所以基本上，如果我尝试选择值就会发生错误喜欢：

`.. select e.id, e.name, e.description from exampleTable e ..`并使用如下映射：

```
RawSql rawSql = RawSqlBuilder.parse(sql)
// map the sql result columns to bean properties
.columnMapping("e.id", "exampleModel.id")
.columnMapping("e.name", "exampleModel.name")
.columnMapping("e.description", "exampleModel.description")
.create(); 
```

当我更改为仅选择`e.id`并映射时：

```
RawSql rawSql = RawSqlBuilder.parse(sql)
// map the sql result columns to bean properties
.columnMapping("e.id", "exampleModel.id")
.create(); 
```

它也加载`e.name`并且`e.description`模型值和错误消失了。（当然我自己的查询有几个连接，比这复杂一点，但基本是一样的。）

*所以总结一下：*当这个问题发生时，检查你没有加载任何东西两次（columnMapping），使用 System.out.println(""); 或类似检查已为您的模型加载了哪些值。请记住还要检查诸如“@JoinColumn”之类的注释，这可能会在同一模型下加载更多数据 - 仅基于给定`e.id`值。如果您不选择并设置`e.id`为 columnMapping 值，那么您可能需要将所有需要的字段分别列出为`.. e.name, e.description ..`

希望这些发现可以帮助某人。

# java - java int[] val 或 int val[]

> ID：14015901
> 
> 赞同：0
> 
> 时间：2012-12-24T00:38:14.190
> 
> 标签：java, arrays, initialization, integer

我是 Java 新手，我知道这是一个愚蠢的问题，但我无法理解 Java 如何初始化他的变量。我试图做一些测试，但我不知道这是如何工作的。

当我学习编程 C 或 Java 时，定义一个新变量的语法是这样的：

```
type name;
int value; 
```

和一个整数数组：

```
type name[];
int values[]; 
```

在 Java`int[] val;`中，这将是数组中的数组吗？

前任：

```
int[] val = new int[2];

val[0] = 012345; // Error ? 
```

上面的ex是正确的。所以这意味着下面的例子是一样的吗？

```
int val[] = new int[2];
val[0] = 123;
val[1] = 456;

int[] val2 = new int[2];
val2[0] = 789;
val2[0] = 101; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T00:48:16.770

Yes`int val[] = new int[2];`和 完全一样`int[] val2 = new int[2];`。

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.2)

> [] 可以作为类型的一部分出现在声明的开头，或者作为特定变量的声明符的一部分，或者两者兼而有之

所以即使像

```
int[] val2[] = new int[2][3] 
```

***对于二维***数组是正确的（尽管不寻常） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T01:23:40.053

两个声明的含义相同。

```
int val[] = new int[2];
int[] val2 = new int[2]; 
```

但是，您应该使用第**一种**表示法。大多数程序员认为它更具可读性。

# php - PHP 问题 in a Form

Forgive me for asking such a basic question, I am a beginner and not too familiar with PHP in general but I've looked around and have not found an IE compatible solution to my issue.

> ID：14015903
> 
> 赞同：0
> 
> 时间：2012-12-24T00:38:32.870
> 
> 标签：php, forms, text, textarea, area

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:43:27.273

尝试

```
$contents = $_POST['details']; 
```

代替

```
$contents = $_REQUEST['details']; 
```

# javascript - 如何使用 JQuery 通过 Ajax 加载页面片段

> ID：14015905
> 
> 赞同：0
> 
> 时间：2012-12-24T00:39:08.810
> 
> 标签：javascript, jquery, ajax

这是我通过 ajax 加载某个页面的脚本。

```
$(function(){

      // Keep a mapping of url-to-container for caching purposes.
      var cache = {
        // If url is '' (no fragment), display this div's content.
        '': $('.bbq-default')
      };

      // Bind an event to window.onhashchange that, when the history state changes,
      // gets the url from the hash and displays either our cached content or fetches
      // new content to be displayed.
      $(window).bind( 'hashchange', function(e) {

        // Get the hash (fragment) as a string, with any leading # removed. Note that
        // in jQuery 1.4, you should use e.fragment instead of $.param.fragment().
        var url = $.param.fragment();

        // Remove .bbq-current class from any previously "current" link(s).
        $( 'a.bbq-current' ).removeClass( 'bbq-current' );

        // Hide any visible ajax content.
        $( '.bbq-content' ).children( ':visible' ).hide();

        // Add .bbq-current class to "current" nav link(s), only if url isn't empty.
        url && $( 'a[href="#' + url + '"]' ).addClass( 'bbq-current' );

        if ( cache[ url ] ) {
          // Since the element is already in the cache, it doesn't need to be
          // created, so instead of creating it again, let's just show it!
          cache[ url ].show();
        } else {
          // Show "loading" content while AJAX content loads.
          $( '.bbq-loading' ).show();

          // Create container for this url's content and store a reference to it in
          // the cache.

          cache[ url ] = $( '<div class="bbq-item"/>' )

            // Append the content container to the parent container.
            .appendTo( '.bbq-content' )

            // Load external content via AJAX. Note that in order to keep this
            // example streamlined, only the content in .infobox is shown. You'll
            // want to change this based on your needs.
            .load( url, function(){
              // Content loaded, hide "loading" content.
              $( '.bbq-loading' ).hide();
            });
        }
      })
      // Since the event is only triggered when the hash changes, we need to trigger
      // the event now, to handle the hash the page may have loaded with.
      $(window).trigger( 'hashchange' );
    }); 
```

我正在使用 JQuery BBQ 插件，现在我的问题是如何获得我想要加载的页面的唯一 div？不是整个页面本身，知道怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T00:47:04.103

`load()`方法允许在实际文件 url 之后添加选择器，以仅加载与选择器匹配的内容。

例如：

```
$('#someDiv').load('myFile.php #contentDiv');/* note space before selector*/ 
```

这将检索完整输出，`myFile.php`但仅从`contentDiv`该输出插入`somediv`

如果选择器是一个包含多个项目的类，它将全部检索它们

API 参考：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

请参阅标题为的部分`Load Fragments`

# iphone - 适用于 iPhone 和其他设备的 CSS @Media？

> ID：14015906
> 
> 赞同：0
> 
> 时间：2012-12-24T00:39:26.877
> 
> 标签：iphone, css, responsive-design

例如，我试图让我的响应式网站在 iphone 或 ipad 上“响应”...我的 css 文件链接在这里 - [http://uximag.com/styles.css](http://uximag.com/styles.css)

所有响应式样式都在样式表的底部。它在台式机上工作正常，但当我使用 iPhone 时它​​不起作用？

请告诉我，我已经尝试了一些方法，但似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:52:40.087

JimmyRare 的评论很好。将您的最大宽度设置为更小（iPhone5 为 640 像素），当它缩小时它应该适用于您的 iDevices 和您的浏览器。

另一种选择是在您的 HTML 文档中设置代码，这并不理想，因为它将您的 HTML 编写与您的样式相结合，但它还有一个额外的好处是可以让您以屏幕分辨率的宽度而不是浏览器宽度为目标：

```
<link rel="stylesheet" media="screen and (min-device-width: 640px)" href="640.css" /> 
```

# android - Google Play 许可 - “正常响应”的含义？

> ID：14015911
> 
> 赞同：5
> 
> 时间：2012-12-24T00:40:24.417
> 
> 标签：android, google-play, android-lvl, google-license-manager

您好，提前感谢您的回复。

我已将获得许可的应用程序上传到 Play 商店。我可以使用所有静态测试许可响应（许可、未许可等）进行测试并获得预期结果。到目前为止，一切都很好。

但如果我的测试设备没有互联网连接，许可证检查总是会失败。这不是我理解 ServerManaged 策略的工作方式。如果发现某个安装在最近的某个时间获得了许可，则该策略应该将信息缓存在共享的 prefs 文件中，并在没有 Internet 连接时使用它。

所以我暂时注释掉了许可系统创建的prefs文件中数据的混淆。当我查看数据时，我看到重试计数和其他内容设置为零。这不是我所期望的。有了这样的数据，我的行为就好像我在使用严格的政策（而我不是）。

我假设这是使用测试响应系统的产物，并且“真实”用户将在其混淆的共享首选项中获得实际数据，从而允许他们在没有互联网连接的情况下进行操作。

所以我尝试将服务器响应设置为“正常响应”。当我这样做时，我总是得到一个 NOT LICENSED 响应。我想这是有道理的，因为我还没有购买和下载该应用程序。

那么，作为开发人员，我如何才能准确体验最终用户的体验呢？例如，我希望能够在没有互联网连接的情况下测试这一切是如何工作的。我似乎无法弄清楚如何做到这一点？我想我可以购买自己的应用程序，但由于测试设备已登录到测试帐户，因此我不确定它是否会起作用。开发人员必须购买自己的应用程序是没有意义的。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T01:08:21.400

我想我找到了解决您问题的可能方法。

我所做的：首先，我为我的应用程序的 alpha/beta 测试人员创建了一个 google 组（当然是在上传应用程序之后）。然后，我邀请自己加入这个 google 群组并接受邀请。在此之后，我将我的 gmail 开发人员帐户插入到许可证测试的用户列表中，并将服务器响应设置为“RESPOND_NORMALLY”。

这样，服务器的响应对于我的账户将永远是“LICENSED”，并且有效期不会在2分钟内到期。就像我买了这个应用程序一样！

这个技巧的唯一限制是你必须在你的谷歌开发者控制台的 beta 或 alpha 插槽中上传你的应用程序，但是在此之后，你还可以使用通常使用上传到你的设备上的调试应用程序获得“许可”答案Eclipse IDE！您不必等待生成链接即可下载测试应用程序（生成速度非常慢……最多 24 小时！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:26:12.813

我也经历过这种挫败感。我也想和我的客户有同样的体验。一旦我设置了“正常响应”，我总是会看到“未获得许可”的响应——这似乎非常不理想。我相信**Google 需要添加的是 **'RESPOND_NORMALLY_AND_LICENSED'** 的设置**。那将做需要的事情。

困难的核心：如果我将我的应用程序设置为“许可”，当我有互联网连接时可以正常工作，那么在没有连接的 2 分钟后，我的应用程序将停止按许可工作（因为缓存设置在 Google Play 服务器上到 2 分钟）。因此，如果我想日复一日地使用自己的应用程序，我需要制作一个禁用许可的应用程序——这是我的客户从未见过的。 **这是一个非常糟糕的主意。**

我们早就学会了：“作为开发者，你必须吃自己的‘狗粮’。”

*   我已将此报告为“开发人员控制台”错误，但它可能不是“错误”，而是一个非常强烈的建议——而且实现起来似乎很简单。

作为一种解决方法，我现在在 ServerManagedPolicy.processServerResponse() 中添加了代码，以简单地添加两个月的许可时间并调用 setValidityTimestamp()。我希望这对其他人有帮助。现在我很满足——

# java - 如何在 Java 中设置浮点数或双精度数的自定义十进制位数与近似值

> ID：14015912
> 
> 赞同：1
> 
> 时间：2012-12-24T00:40:29.837
> 
> 标签：java, android, floating-point, floating-accuracy

> **可能重复：**
> [如何在 Java 中将数字四舍五入到 n 位小数](https://stackoverflow.com/questions/153724/how-to-round-a-number-to-n-decimal-places-in-java)

我想用这种形式的方法在浮点数（或双精度数）中设置指定数量的十进制数字

```
public float decimalDigits(int x, float n){
....
} 
```

例如

->如果我有

```
float n1=36.58529 
```

线

```
float n2=decimalDigits(2, n1); 
```

应该返回

```
n2=36.59 
```

-> 如果 n1 是：

```
float n1=36.58329 
```

线

```
float n2=decimalDigits(2, n1); 
```

应该返回

```
n2=36.58 
```

线

```
float n2=decimalDigits(1, n2); 
```

应该返回

```
n2=36.6 
```

ETC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:04:39.487

用这个

```
public float decimalDigits(int decimaldigits, float x){
            final NumberFormat numFormat = NumberFormat.getNumberInstance();
            numFormat.setMaximumFractionDigits(decimaldigits);
            final String resultS = numFormat.format(x);
            String parsable=resultS.replace(".", "");
            parsable=resultS.replace(",", ".");
            float ris=Float.parseFloat(parsable);
            return ris;
        } 
```

我已将字符串替换添加到代码中以避免由点约定引起的解析问题（例如，格式化后 1234.34 变为 1.234,34 导致在浮点中重新解析时出错）

如果你只是一个格式可视化问题，你也可以使用字符串，浮点变量没有小数位并不重要，所以这是另一种有效的方法：

```
public String decimalDigits(int decimaldigits, float x){
        final NumberFormat numFormat = NumberFormat.getNumberInstance();
        numFormat.setMaximumFractionDigits(decimaldigits);
        final String resultS = numFormat.format(x);
        return resultS;
    } 
```

*如果有人对此解决方案的有效性有疑问，应询问详细信息或尝试编译代码并在否决之前对其进行测试，谢谢。代码已经过测试并且工作起来就像一个魅力。*

**警告**

显然，您必须传递**float**因为该方法使用**Float.parseFloat**，如果您想传递一个**double** ，则必须在将其传递给方法之前使用强制转换来浮动，否则您必须更改所有方法原语并从 float 解析为双倍的。双精度和浮点数是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:45:33.230

`float`返回 a或 a的例程不可能`double`返回正确舍入的值，例如 36.59 或 36.6，因为这些值不能用二进制浮点表示。二进制浮点只能返回接近的值，例如 36.60000000000000142108547152020037174224853515625。二进制浮点中没有表示值 36.6 的位模式。

如果需要十进制值，则必须使用十进制基数，例如 DecimalFormat 或 BigDecimal。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-24T00:47:20.117

可能的伪代码如下：

```
public class test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        System.out.println(decimalDigits(10.09872, 4));
    }

     static double decimalDigits(double value, int n)
    {
        double decimal = value - ((int) value);
        System.out.println(decimal);

        double short_decimal = 0;
        for(int i = 0; i < n; i++)
        {
            /* current digit on decimal */
            decimal = decimal * 10;
            System.out.println(decimal);
            short_decimal += (Math.pow(10, n - i - 1) * (int)decimal);

            /* find further */
            decimal = decimal - (int)decimal;
        }

        return (int)value + (double)(short_decimal / Math.pow(10, n));
    }

} 
```

# excel - 如何使一个单元格等于另一个单元格中表达式的值（Excel 2010）？

> ID：14015917
> 
> 赞同：0
> 
> 时间：2012-12-24T00:41:46.427
> 
> 标签：excel

我正在处理电子表格，并且正在尝试执行以下操作：

```
Price Returned      Net Profit

22                  22
45                  45
7                   7
25+25               50 
```

数据作为表达式输入，以表示特定项目的返回值。我想不通的是如何使下一个单元格等于第一个单元格的表达式值，所以基本上就像单元格是“=22”和“=25+25”。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:09:07.287

对于这样简单的事情，您可以制作一个 UDF：

```
Function Evalu8(ByVal S As String) As String
    Evalu8 = Evaluate(S)
End Function 
```

叫，喜欢`=Evalu8(A4)`

不幸的是，没有内置的工作表函数可以为您完成，但 VBA [Evaluate 函数](http://msdn.microsoft.com/en-us/library/office/ff193019.aspx)可以节省一天的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T03:16:11.973

你的问题引发了我对这个[SO 问题](https://stackoverflow.com/questions/4471884/turn-a-string-formula-into-a-real-formula)和@iDevlop 的回答的记忆，这导致了[这篇文章](http://www.vertex42.com/ExcelArticles/evaluate-function.html)（这反过来又与斯蒂芬布伦的网页有一个死链接）。

基本上，您可以使用 Evaluate 函数，它实际上是一个未记录的 Microsoft XLM 宏。您必须以定义的名称使用它，否则您将收到“函数无效”错误消息。由于它确实是一个宏，因此它所在的工作簿需要保存为 .xlm 并且必须启用宏才能使其工作。如果所有这些都对您有用，那么您就是这样做的（如果没有，请查看上述 SO 问题的已接受答案，或@Daniel Cook 的答案，在我处理此答案时弹出):

1.  在包含计算的工作表中选择 B1（本例中为 Sheet1）
2.  单击 Ctrl-F3 打开 Excel 的名称管理器
3.  创建一个新名称并调用它`EvaluateCellToLeft`
4.  将范围设置为 Sheet1
5.  在引用框中，输入`=evaluate(Sheet1!A1)`

这是它在 Excel 2010 中的外观：

![在此处输入图像描述](../Images/d7a28d402009ae88c24be656b899ffe6.png)

现在在 B 列中输入`=EvaluateCellToLeft`。请记住，这是一个命名范围，而不是公式，所以最后没有括号。

![在此处输入图像描述](../Images/182464acdb6995992c7eb8d65fabab3d.png)

# parsing - 解析和 Rubymotion

> ID：14015918
> 
> 赞同：3
> 
> 时间：2012-12-24T00:42:13.617
> 
> 标签：parsing, sdk, rubymotion

我无法解析以使用 ruby​​motion。我尝试使用 cocoapod 并出售该项目。我一定错过了一些微不足道的东西。对我来说，理想的情况是使用 pod 而不是出售项目，但我会使用我能设法开始工作的任何一个。

我一直使用豆荚，所以我不认为我的 cocoapods 设置会搞砸任何事情。当我尝试使用以下设置设置我的应用程序 ID 和客户端密钥时，会发生此设置的运行时错误：

```
Parse.setApplicationId('xxx', clientKey:'yyy') 
```

我得到这个人：

```
app_delegate.rb:6:in `application:didFinishLaunchingWithOptions:': uninitialized constant AppDelegate::Parse (NameError) 
```

我曾多次尝试删除我的供应商目录并“清理”。[这是我创建的一个新的空白项目，它试图将 Parse 用作 cocoapod 并给我这个错误](https://github.com/pachun/Parse-Problem)。如果有人可以看看它是否对您持续存在，我将不胜感激。

在另一种情况下，我将 Parse 添加为供应商项目。我还添加了几个 .dylib 和框架。[这是我创建的另一个空白项目来说明这种情况。](https://github.com/pachun/vendored-parse)当我尝试运行此版本时，我收到以下编译时错误：

```
Build ./build/iPhoneSimulator-6.0-Development
     Build vendor/Parse.framework
   Compile ./app/app_delegate.rb
    Create ./build/iPhoneSimulator-6.0-Development/test.app
      Link ./build/iPhoneSimulator-6.0-Development/test.app/test
Undefined symbols for architecture i386:
  "_ACAccountTypeIdentifierFacebook", referenced from:
      +[PF_FBSession renewSystemAuthorization] in Parse(PF_FBSession.o)
  "_ACFacebookAppIdKey", referenced from:
      -[PF_FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in Parse(PF_FBSession.o)
  "_ACFacebookAudienceEveryone", referenced from:
      -[PF_FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in Parse(PF_FBSession.o)
  "_ACFacebookAudienceFriends", referenced from:
      -[PF_FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in Parse(PF_FBSession.o)
  "_ACFacebookAudienceKey", referenced from:
      -[PF_FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in Parse(PF_FBSession.o)
  "_ACFacebookAudienceOnlyMe", referenced from:
      -[PF_FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in Parse(PF_FBSession.o)
  "_ACFacebookPermissionsKey", referenced from:
      -[PF_FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in Parse(PF_FBSession.o)
  "_OBJC_CLASS_$_ACAccountStore", referenced from:
      objc-class-ref in Parse(PF_FBSession.o)
  "_OBJC_CLASS_$_ASIdentifierManager", referenced from:
      objc-class-ref in Parse(PF_FBSettings.o)
  "_OBJC_CLASS_$_CLLocationManager", referenced from:
      objc-class-ref in Parse(PFLocationManager.o)
  "_OBJC_CLASS_$_SKPayment", referenced from:
      objc-class-ref in Parse(PFPurchase.o)
  "_OBJC_CLASS_$_SKPaymentQueue", referenced from:
      objc-class-ref in Parse(PFPurchase.o)
      objc-class-ref in Parse(PFPaymentTransactionObserver.o)
  "_OBJC_CLASS_$_SKProductsRequest", referenced from:
      objc-class-ref in Parse(PFPurchase.o)
  "_OBJC_CLASS_$_SLComposeViewController", referenced from:
      objc-class-ref in Parse(PF_FBNativeDialogs.o)
  "_SLServiceTypeFacebook", referenced from:
      +[PF_FBNativeDialogs composeViewControllerWithSession:handler:] in Parse(PF_FBNativeDialogs.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)
rake aborted!
Command failed with status (1): [/Applications/Xcode.app/Contents/Developer...]
/Library/RubyMotion/lib/motion/project/builder.rb:386:in `build'
/Library/RubyMotion/lib/motion/project/app.rb:72:in `build'
/Library/RubyMotion/lib/motion/project.rb:51:in `block (2 levels) in <top (required)>'
/Users/pachun/.rvm/gems/ruby-1.9.3-p327@motion/bin/ruby_noexec_wrapper:14:in `eval'
/Users/pachun/.rvm/gems/ruby-1.9.3-p327@motion/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => default => simulator => build:simulator
(See full trace by running task with --trace) 
```

如果使用过 parse 的人可以看看这些并让我知道他们是否得到相同的东西/他们认为问题是什么，我将非常感激。这阻碍了我。谢谢，

帕春

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T05:56:34.353

首先，没有 Parse CocoaPod。

其次，您的 Rakefile 的问题在于您没有包含所有必需的库。这对我有用：[https ://gist.github.com/4367907](https://gist.github.com/4367907)

# javascript - 如何在 iframe 中执行 javascript？

> ID：14015919
> 
> 赞同：0
> 
> 时间：2012-12-24T00:42:15.520
> 
> 标签：javascript, iframe

我有一大块无法更改的代码，它正在使用 document.write 并覆盖整个 html 文档。我想在该文档中创建一个 iframe，并让那些讨厌的代码只在该 iframe 内执行，该 iframe 无论如何都是空的，所以我不介意。这可能吗？

# ios - 访问iOS6 UIPageViewController 创建的UIPageControl？

> ID：14015924
> 
> 赞同：8
> 
> 时间：2012-12-24T00:42:59.360
> 
> 标签：ios, ios6, uipageviewcontroller, uipagecontrol

我正在使用`UIPageViewController`导航设置为水平，过渡样式设置为滚动（在 InterfaceBuilder 中），并且没有脊椎。这给了我一个可爱的 UIPageControl 集成。现在我希望能够切换它是否正在显示（因为它下面有艺术品）。

我已经尝试设置`presentationCountForPageViewController`并在应该隐藏`presentationIndexForPageViewController`时返回 0 ，但是当我想要时不会调用这些方法。`UIPageControl`

暂停堆栈跟踪，我看到它们被调用`[UIPageViewController _updatePageControlViaDataSourceIfNecessary]`......我假设如果我尝试使用该方法，我的应用程序将被拒绝。

我应该通过子视图寻找它，还是滚动我自己的，以便我可以控制它，或者有什么更好的方法来切换它的可见性？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-03T04:28:25.777

我会说，通过子视图寻找。此代码在子视图层次结构中成功找到 UIPageControl：

```
NSArray *subviews = pageController.view.subviews;
UIPageControl *thisControl = nil;
for (int i=0; i<[subviews count]; i++) {
    if ([[subviews objectAtIndex:i] isKindOfClass:[UIPageControl class]]) {
        thisControl = (UIPageControl *)[subviews objectAtIndex:i];
    }
} 
```

我正在使用它来自定义点的颜色，我想您可以对 alpha 值执行相同的操作，或者将其发送到后面或其他地方。

Apple 没有通过 UIPageViewController 类提供与 UIPageControl 的直接接口，但不需要非法方法调用即可访问它……我不明白为什么这会导致应用程序被拒绝。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-07T21:13:03.683

`appearance`您可以通过使用（请参阅[UIAppearance 协议](https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIAppearance_Protocol/index.html)）访问所有 PageControl 对象，但要获得特定实例，您必须使用递归。SWIFT代码：

```
let pageControl = UIPageControl.appearance() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-02T11:17:14.683

Swift 3 扩展：

```
extension UIPageViewController {
    var pageControl: UIPageControl? {
        for view in view.subviews {
            if view is UIPageControl {
                return view as? UIPageControl
            }
        }
    return nil
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-23T15:54:39.900

在**斯威夫特**：

```
 let subviews: Array = self.pageViewController.view.subviews
    var pageControl: UIPageControl! = nil

    for (var i = 0; i < subviews.count; i++) {
        if (subviews[i] is UIPageControl) {
            pageControl = subviews[i] as! UIPageControl
            break
        }
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-29T05:51:56.710

我实现了一个类别来为我处理这个问题，它让我的代码变得一团糟，并允许我通过“pageController.pageControl”访问 pageControl

Objective-C

```
// Header
@interface UIPageViewController (PageControl)

@property (nonatomic, readonly) UIPageControl *pageControl;

@end 
```

我还使用了递归（由块处理），以防 Apple 决定更改实现导致 UIPageControl 不在子视图的第一层中。

```
// Implementation
#import "UIPageViewController+PageControl.h"

@implementation UIPageViewController (PageControl)

- (UIPageControl *)pageControl
{
    __block UIPageControl *pageControl = nil;
    void (^pageControlAssignBlock)(UIPageControl *) = ^void(UIPageControl *blockPageControl) {
        pageControl = blockPageControl;
    };

    [self recurseForPageControlFromSubViews:self.view.subviews withAssignBlock:pageControlAssignBlock];

    return pageControl;
}

- (void)recurseForPageControlFromSubViews:(NSArray *)subViews withAssignBlock:(void (^)(UIPageControl *))assignBlock
{
    for (UIView *subView in subViews) {
        if ([subView isKindOfClass:[UIPageControl class]]) {
            assignBlock((UIPageControl *)subView);
            break;
        } else {
            [self recurseForPageControlFromSubViews:subView.subviews withAssignBlock:assignBlock];
        }
    }
}

@end 
```

这可能对您的需求有点过分，但对我来说效果很好

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-11T09:51:43.837

一个漂亮的、最新的 Swift 1-liner 怎么样？

```
let pageControl = view.subviews.first { $0 is UIPageControl } as? UIPageControl 
```

或者，如果您喜欢扩展：

```
extension UIPageViewController {
    var pageControl: UIPageControl? {
        return view.subviews.first { $0 is UIPageControl } as? UIPageControl
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-17T06:46:19.733

**对于斯威夫特**

**要获取页面控件中的点，我们可以使用**

```
//dots will be an array of the dots views
let dots = pageControl.subviews 
```

**获取当前点视图**

```
let currentDot = dots[pageControl.currentPage] 
```

**获取其他点视图**

```
for i in 0..<dots.count {

    let dot = dots[i]

    if i == pageControl.currentPage {
        //dot => current dot

    } else {
        //dot => other dot

    }
} 
```

在我们得到点视图之后，我们可以改变我们想要的任何东西

```
dot.layer.borderColor = .green
dot.layer.borderWidth = 1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-01T17:12:55.970

C# 扩展：

```
public static class PageViewControllerExtension{
    public static UIPageControl GetPageControl(this UIPageViewController pageViewController){
        foreach (var view in pageViewController.View.Subviews){
            var subView = view as UIPageControl;
            if (subView != null){
                return subView;
            }
        }
        return null;
    }
} 
```

# android - 退出后android恢复事务不断关闭应用程序

> ID：14015935
> 
> 赞同：1
> 
> 时间：2012-12-24T00:46:01.717
> 
> 标签：android, transactions, restore, in-app-billing

我根据地牢示例使用代码。除了一件事，一切都很好。事情是恢复交易。当我以与示例中相同的方式调用恢复事务时，一切似乎都很好。看起来他没有产生任何错误。但后来我等了 3 到 10 分钟（我认为这足以获得 eosrom 谷歌服务器）。但没有回应......我点kof我做某事......？？

这是我用于恢复传输的代码...

```
mBillingService.restoreTransactions(); 

public boolean restoreTransactions() {
    return new RestoreTransactions().runRequest();
}
class RestoreTransactions extends BillingRequest {
    long mNonce;

    public RestoreTransactions() {
        // This object is never created as a side effect of starting this
        // service so we pass -1 as the startId to indicate that we should
        // not stop this service after executing this request.
        super(-1);
    }

    @Override
    protected long run() throws RemoteException {
        mNonce = Security.generateNonce();

        Log.d("running", "running restore request");
        Bundle request = makeRequestBundle("RESTORE_TRANSACTIONS");
        request.putLong(Consts.BILLING_REQUEST_NONCE, mNonce);
        Bundle response = mService.sendBillingRequest(request);
        logResponseCode("restoreTransactions", response);
        return response.getLong(Consts.BILLING_RESPONSE_REQUEST_ID,
                Consts.BILLING_RESPONSE_INVALID_REQUEST_ID);
    }

    @Override
    protected void onRemoteException(RemoteException e) {
        super.onRemoteException(e);
        Security.removeNonce(mNonce);
    }

    @Override
    protected void responseCodeReceived(ResponseCode responseCode) {
        ResponseHandler.responseCodeReceived(BillingService.this, this, responseCode);
    }
} 
```

这实际上与地牢样本相同。但我没有得到这个片段的回应。但是，如果我想购买一件物品，那是没有问题的。那么有谁知道如何解决这个问题？我收到购买回复，但没有回复回复....

毕竟，如果我完成我的意图并完成我的应用程序，则会发生以下错误。似乎响应是在应用程序结束之后出现的。它不是在运行期间出现，而是在完成所有意图之后出现。

另一个奇怪的事情是，在销毁时，我正在取消绑定服务和计费上下文。那么事实上，这应该被调用吗？我想不是 ？

有谁知道如何解决这个问题？提前致谢！

在下面记录猫错误。

```
12-24 01:33:06.212: E/AndroidRuntime(27721): FATAL EXCEPTION: main
        12-24 01:33:06.212: E/AndroidRuntime(27721): java.lang.RuntimeException: Unable to start        service .BillingService@40da8db0 with null: java.lang.NullPointerException
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2749)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at android.app.ActivityThread.access$1900(ActivityThread.java:139)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1335)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at android.os.Handler.dispatchMessage(Handler.java:99)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at android.os.Looper.loop(Looper.java:156)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at android.app.ActivityThread.main(ActivityThread.java:4987)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at java.lang.reflect.Method.invokeNative(Native Method)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at java.lang.reflect.Method.invoke(Method.java:511)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at dalvik.system.NativeStart.main(Native Method)
    12-24 01:33:06.212: E/AndroidRuntime(27721): Caused by: java.lang.NullPointerException
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at .BillingService.handleCommand(BillingService.java:431)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at .BillingService.onStart(BillingService.java:421)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at android.app.Service.onStartCommand(Service.java:438)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2726)
    12-24 01:33:06.212: E/AndroidRuntime(27721):    ... 10 more 
```

# python - python itertools 产品慢是输出文件的写入速度是瓶颈

> ID：14015936
> 
> 赞同：1
> 
> 时间：2012-12-24T00:46:37.873
> 
> 标签：python, product, itertools

我有一个执行 itertools 产品功能的简单 python 函数。如下所示。

```
def cart(n, seq):
    import itertools
    b = 8
    while b < n:
        n = n - 1
        for p in itertools.product(seq, repeat=n):
            file.write(''.join(p))
            file.write('\n') 
```

该功能有效，但速度极慢。它甚至没有使用大量的资源。我想知道瓶颈是否是磁盘写入速度？目前该脚本的平均速度为每秒 2.5 mb。我还尝试将其用于固态驱动器并获得相同的速度，这使我相信写入速度不是瓶颈。有没有办法加快这个功能并使用更多的系统资源？还是 itertools 只是慢？请原谅我是 python 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:18:11.677

您可以分析您的代码以了解瓶颈的位置。下面将创建一个名为“cart_stats.txt”的文件，其中包含分析信息。自己运行它似乎表明大部分时间都花在调用`file.write()`.

```
from cProfile import Profile
from pstats import Stats
prof = Profile()
prof.disable()

file = open('cart_output.txt', 'wt')

def cart(n, seq):
    import itertools
    b = 8
    while b < n:
        n = n - 1
        for p in itertools.product(seq, repeat=n):
            file.write(''.join(p))
            file.write('\n')

prof.enable()
cart(10, 'abc')
prof.disable()

prof.dump_stats('cart.stats')
with open('cart_stats.txt', 'wt') as output:
    stats = Stats('cart.stats', stream=output)
    stats.sort_stats('cumulative', 'time')
    stats.print_stats()

file.close()
print 'done' 
```

FWIW，缓慢似乎主要是由于对`file.write()`自身的调用，因为即使我`open()`输出具有巨大缓冲区的流或将其作为`StringIO`实例，它仍然存在。通过优化和最小化对它的调用，我能够显着减少这种情况，如下所示：

```
def cart(n, seq):
    import itertools
    b = 8
    write = file.write  # speed up lookup of method
    while b < n:
        n = n - 1
        for p in itertools.product(seq, repeat=n):
            write(''.join(p)+'\n')  # only call it once in loop 
```

这证明了使用分析器可能是了解将时间花在哪里并获得最大收益的最佳方式。

**更新：**

这是一个版本，它在进行单个`file.write()`调用之前将所有生成的输出存储在内存中。它比使用快得多，`StringIO.StringIO`因为它不太通用，但仍然不如使用`cStringIO.StringIO`实例快。

```
file = open('cart_output.txt', 'wt')

def cart(n, seq):
    from itertools import product
    buflist = []
    append = buflist.append
    b = 8
    while b < n:
        n = n - 1
        for p in product(seq, repeat=n):
            append(''.join(p))
    file.write('\n'.join(buflist)+'\n')

file.close() 
```

# xaml - XAML 如何进行文本块/文本框编辑切换？

> ID：14015939
> 
> 赞同：2
> 
> 时间：2012-12-24T00:46:45.303
> 
> 标签：xaml, winrt-xaml

我可能正在处理这一切都是错误的，所以如果您有其他建议，请告诉我。

我正在为 Windows RT 制作一个应用程序，它将向用户显示一堆文本块，例如字符统计信息。用户将看到：

```
力量：10
缺点：10
敏捷：10

```

等等。

我希望他们能够填写这些，然后根据结果计算选择视图值。

我的想法是单击顶部的“编辑”按钮并在每个可编辑文本块上切换一些文本框。

当尝试使用“Blend for Visual Studio”进行设置时，我似乎无法制作小于 49x34 的文本框（比我的文本块大得多）。

我打算找到一种方法来在按钮单击时为每个文本块（使用它的尺寸）生成一个文本框，但是由于它们总是相同的并且会有很多我试图通过混合使它们成为静态.

我对 XAML 很陌生，我似乎找不到一个很好的例子来设置这样的可编辑字段，那么我应该如何让一堆静态字段具有可编辑的文本框？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T17:26:21.157

我将在 XAML 中创建 TextBox 和 TextBlock 叠加层，并将它们直接放在网格中，使用水平和垂直对齐到“中心”以确保文本始终完全对齐。我还会使用静态宽度来确保列排列良好。

从那里，您可以直接将 Visibility 绑定到某个布尔“IsEditing”属性，以确保一次只显示一个控件。

```
<StackPanel Orientation="Horizontal">
    <TextBlock Text="Str: " Width="40" VerticalAlignment="Center" />
    <Grid Width="40" VerticalAlignment="Center">
        <TextBlock Text="{Binding Strength}" 
            Visibility="{Binding IsEditing, Converter={StaticResource BooleanToInvisibilityConverter}}"
            VerticalAlignment="Center" 
            HorizontalAlignment="Center" />
        <TextBox Text="{Binding Strength}" 
            Visibility="{Binding IsEditing, Converter={StaticResource BooleanToVisibilityConverter}}"
            VerticalAlignment="Center" 
            HorizontalContentAlignment="Center" />
    </Grid>
</StackPanel> 
```

在此过程中，您必须定义“BooleanToVisibility”和“BooleanToInvisiblity”转换器资源。我喜欢[Diedrik Krols 的这个实现](http://blogs.u2u.be/diederik/post/2011/11/14/null.aspx)。它既好又简单，可以选择反转。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T02:25:13.987

您可能希望为 TextBox 使用一种样式，该样式会根据“IsReadOnly”属性是否为真而改变。

当 IsReadOnly 为 true 时，您可以将 BorderBrush 和 Background 设置为透明，从而使其看起来像一个普通的文本块。

这样，您就不必叠加 TextBlocks 和 TextBoxes；只需单独使用 TextBox 控件，并在单击“编辑”按钮时切换“IsReadOnly”属性。

在您的资源中：

```
<Style x:Key="MyEditableField" TargetType={x:Type TextBox}>
    <Style.Triggers>
        <DataTrigger Binding="{Binding IsReadOnly, RelativeSource={RelativeSource Self}}" Value="True">
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="Background" Value="Transparent" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

这是您的可编辑字段之一：

```
<StackPanel Orientation="Horizontal">
    <TextBlock Text="Str: " />
    <TextBox Style="{StaticResource MyEditableField}"
             Text="{Binding Strength}"
             IsReadOnly="{Binding IsEditingDisabled}" />
</StackPanel> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-21T17:48:50.387

迟到的答案，但谁想要也可以创建一个自定义的可编辑文本框，实际上很容易这里是代码（显然你可以根据自己的需要修改它）

```
 public class EditableTextBox : TextBox
{
    public EditableTextBox()
    {
        this.BorderBrush = new SolidColorBrush(Colors.Black);
    }
    protected override void OnTapped(TappedRoutedEventArgs e)
    {
        this.IsReadOnly = false;
        SetEditingStyle();
        base.OnTapped(e);
    }

    protected override void OnDoubleTapped(DoubleTappedRoutedEventArgs e)
    {
        this.IsReadOnly = false;
        SetEditingStyle();
        base.OnDoubleTapped(e);
    }

    protected override void OnLostFocus(RoutedEventArgs e)
    {
        this.IsReadOnly = true;
        SetReadonlyStyle();
        base.OnLostFocus(e);
    }

    public void SetReadonlyStyle()
    {
        this.BorderBrush.Opacity = 0;
        this.Background.Opacity = 0;
    }

    public void SetEditingStyle()
    {
        this.BorderBrush.Opacity = 1;
        this.Background.Opacity = 1;
    }
} 
```

样本：

![在此处输入图像描述](../Images/c54c34e4a2988ca5fd7188d5e2bc8f22.png)

![在此处输入图像描述](../Images/445c41d450a0faf8ef1f1000ca1490d6.png)

教程：[完整的教程网址](http://christianjvella.com/wordpress/create-an-editable-textbox-that-looks-like-a-textblock-when-not-editing-in-c-windows-store-app-windows-phone-universal-apps/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-30T22:08:59.430

使用属性在视图和视图模型之间切换编辑模式是一种糟糕的设计方法，您应该使用事件和命令绑定来传达视图和视图模型之间这样的状态变化。

这是一篇以符合 MVVM 的方式描述原理的文章：http: [//www.codeproject.com/Articles/802385/A-WPF-MVVM-In-Place-Edit-TextBox-Control](http://www.codeproject.com/Articles/802385/A-WPF-MVVM-In-Place-Edit-TextBox-Control)

请看看并告诉我你的想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-05T20:40:42.600

这建立在 BTownTKD 的解决方案之上，但是因为我确实更喜欢尽可能多的解决方案的 WPF，所以这里有点修改，在我的情况下，我正在尝试修改选项卡控件的名称。

我的视图模型有以下代码：

```
 private bool _isEditingName = false;

    public bool IsEditingName
    {
        get
        {
            return _isEditingName;
        }
        set
        {
            _isEditingName = value;
            OnPropertyChanged();
        }
    }

    public ICommand StartEditing
    {
        get
        {
            return new DelegateCommand(() =>
            {
                IsEditingName = true;
            });
        }
    }

    public ICommand EndEditing
    {
        get
        {
            return new DelegateCommand(() =>
            {
                IsEditingName = false;
            });
        }
    } 
```

接下来是我的视图，其中包含选项卡的数据模板（不仅仅是选项卡的内容）：

```
<TabControl ItemsSource="{Binding Items}" SelectedItem="{Binding ActiveItem}">
    <TabControl.ItemTemplate>
        <DataTemplate>
            <Grid VerticalAlignment="Center">
                <TextBlock x:Name="TabName" Text="{Binding Name}" Visibility="{Binding IsEditingName, Converter={StaticResource InvertedBoolToVisConverter}}" VerticalAlignment="Center" HorizontalAlignment="Stretch" TextAlignment="Left">
                    <TextBlock.InputBindings>
                        <MouseBinding MouseAction="LeftDoubleClick" Command="{Binding StartEditing}" />
                    </TextBlock.InputBindings>
                </TextBlock>
                <TextBox Text="{Binding Name}" Visibility="{Binding IsEditingName, Converter={StaticResource BoolToVisConverter}}" VerticalAlignment="Center" HorizontalContentAlignment="Stretch" TextAlignment="Left" IsVisibleChanged="TextBox_IsVisibleChanged">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="LostFocus">
                            <i:InvokeCommandAction Command="{Binding EndEditing}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <TextBox.InputBindings>
                        <KeyBinding  Key="Enter" Command="{Binding EndEditing}" />
                    </TextBox.InputBindings>
                </TextBox>
            </Grid>                 
        </DataTemplate>
    </TabControl.ItemTemplate>  
</TabControl> 
```

最后但并非最不重要的一点是，我想要双击让我进入编辑模式，并自动聚焦在文本框上并选择所有内容以便立即输入。没有一个 xaml 解决方案像背后的简单代码一样干净，所以我最终决定将其添加到可见性更改处理程序的文本框中：

```
 private void TextBox_IsVisibleChanged(object sender, System.Windows.DependencyPropertyChangedEventArgs e)
    {
        var box = sender as TextBox;
        if (box != null)
        {
            if ((bool)e.NewValue)
            {
                box.Focus();
                box.SelectAll();
            }
        }
    } 
```

在我找到的所有解决方案中，这是我最喜欢的。谢谢大家的帖子！！帮助我找到了一个非常好的整体解决方案来解决我的问题！

# jsf - 如何打印上传的文本 JSF

> ID：14015947
> 
> 赞同：1
> 
> 时间：2012-12-24T00:48:35.493
> 
> 标签：jsf

我现在已经设法在 jsf 中创建一个上传，允许用户上传一个 txt 文件，我还可以显示已上传的内容，我现在需要知道的是如何在用户按下时将此文本打印到打印机命令按钮

谢谢

我添加了创建一个名为 print.css 的新 css 文件，

```
@media print {
    #header, #footer, #menu, #title, #h1, #2, #main, #logo, #logo_text, #logo_colour, #site_content, #content{ 
        display: none;
    }
} 
```

因为这些是我希望删除的东西

我的整个文档的 css 是：

```
 <link rel="stylesheet" type="text/css" href="style.css" title="style" /> 
```

我已经添加了：

```
<h:outputStylesheet type="text/css" name="print.css" media="print" /> 
```

在我的按钮上方：

```
 <button onclick="window.print()">Print</button> 
```

但是当我按下这个按钮时，我仍然可以看到所有的 CSS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:02:24.977

您最多可以通过 JS 显示浏览器的打印对话框`window.print()`。

```
<button onclick="window.print()">Print</button> 
```

这仍然需要最终用户的确认。它适用于网站（幸运的是）根本不可能不经意地打印一些东西。否则会产生大量纸张浪费并惹恼客户。

您可能希望提供一个打印媒体 CSS，以便*只*打印所需的内容，并且剩余部分被`display:none`. 您可以在这个相关问题中找到一些提示：[Conditionally render JSF components for printing](https://stackoverflow.com/questions/8248280/printing-webpage-in-jsf)。

# c - 链接哪个库（OSX）

> ID：14015950
> 
> 赞同：9
> 
> 时间：2012-12-24T00:49:29.140
> 
> 标签：c, macos, build, linker

有人可以帮我纠正一下吗？我正在使用链接，`-lIOKit`但显然也需要另一个库。

```
Undefined symbols for architecture x86_64:
  "___CFConstantStringClassReference", referenced from:
      CFString in code-9daAw9.o
  "_kCFBooleanTrue", referenced from:
      _dimDisplayNow in code-9daAw9.o 
```

这是代码（可在[http://www.cocoabuilder.com/archive/cocoa/191807-sleep-display.html](http://www.cocoabuilder.com/archive/cocoa/191807-sleep-display.html)找到）

```
#include <CoreFoundation/CoreFoundation.h>
#include <IOKit/IOKitLib.h>

static int dimDisplayNow(void) 
{
    io_registry_entry_t r =
        IORegistryEntryFromPath(kIOMasterPortDefault,
        "IOService:/IOResources/IODisplayWrangler");
    if(!r) return 1;
    int err = IORegistryEntrySetCFProperty(r, CFSTR("IORequestIdle"),
                                           kCFBooleanTrue);
    IOObjectRelease(r);
    return err;
}

int main(int argc, char **argv)
{
    dimDisplayNow();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T01:25:06.010

您需要链接到[CoreFoundation.framework](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CoreFoundation_Collection/_index.html)，这是您在第一行代码中包含的内容。（`CF`代表`___CFConstantStringClassReference`CoreFoundation `kCFBooleanTrue`）。

# android - Sherlock + DeviceDefault

> ID：14015952
> 
> 赞同：2
> 
> 时间：2012-12-24T00:50:28.287
> 
> 标签：android, themes, actionbarsherlock

可以将 Action Bar Sherlock 与 DeviceDefault 主题（>4.2 上）和常规主题（因为它曾经在 <3.0 上）一起使用吗？

要点当然是我怀疑 Sherlock 强迫你使用它自己的主题（其中一些是基于 Holo 的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:17:03.853

在`values/themes.xml`：

```
<style name="Theme.MyApp" extends="Theme.Sherlock">
</style> 
```

在`values-v14/themes.xml`：

```
<style name="Theme.MyApp" extends="android:Theme.DeviceDefault">
</style> 
```

然后`Theme.MyApp`在您的清单中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:06:34.133

实际上，Sherlock.Holo 主题只是将 holo 主题应用于 ActionBar。从 Sherlock.Theme for APIs 中可以看到 11 以下：

```
<style name="Theme.Sherlock" parent="Sherlock.__Theme">
        <!-- Action bar styles (from Theme.Holo) -->
        <item name="actionDropDownStyle">@style/Widget.Sherlock.Spinner.DropDown.ActionBar</item>
        <item name="actionButtonStyle">@style/Widget.Sherlock.ActionButton</item>
        <item name="actionOverflowButtonStyle">@style/Widget.Sherlock.ActionButton.Overflow</item>
        <item name="actionModeBackground">@drawable/abs__cab_background_top_holo_dark</item>
        <item name="actionModeSplitBackground">@drawable/abs__cab_background_bottom_holo_dark</item>
        <item name="actionModeCloseDrawable">@drawable/abs__ic_cab_done_holo_dark</item>
        <item name="actionBarTabStyle">@style/Widget.Sherlock.ActionBar.TabView</item>
        <item name="actionBarTabBarStyle">@style/Widget.Sherlock.ActionBar.TabBar</item>
        <item name="actionBarTabTextStyle">@style/Widget.Sherlock.ActionBar.TabText</item>
        <item name="actionModeStyle">@style/Widget.Sherlock.ActionMode</item>
        <item name="actionModeCloseButtonStyle">@style/Widget.Sherlock.ActionButton.CloseMode</item>
        <item name="actionBarStyle">@style/Widget.Sherlock.ActionBar</item>
        <item name="actionBarSize">@dimen/abs__action_bar_default_height</item>
        <!-- Internal --><item name="actionModePopupWindowStyle">@style/Widget.Sherlock.PopupWindow.ActionMode</item>
        <item name="actionBarWidgetTheme">@null</item>

        <!-- Action bar styles (defaults from Theme) -->
        <item name="actionBarSplitStyle">?attr/actionBarStyle</item>
        <item name="actionMenuTextAppearance">@style/TextAppearance.Sherlock.Widget.ActionBar.Menu</item>
        <item name="actionMenuTextColor">?attr/textColorPrimary</item>
        <item name="actionBarDivider">?attr/dividerVertical</item>
        <item name="actionBarItemBackground">?attr/selectableItemBackground</item>

        <item name="buttonStyleSmall">@style/Widget.Sherlock.Button.Small</item>

        <item name="selectableItemBackground">@drawable/abs__item_background_holo_dark</item>

        <item name="activatedBackgroundIndicator">@drawable/abs__activated_background_holo_dark</item>
        <item name="actionModeShareDrawable">@drawable/abs__ic_menu_share_holo_dark</item>
        <item name="activityChooserViewStyle">@style/Widget.Sherlock.ActivityChooserView</item>

        <item name="homeAsUpIndicator">@drawable/abs__ic_ab_back_holo_dark</item>

        <item name="dividerVertical">@drawable/abs__list_divider_holo_dark</item>

        <item name="spinnerDropDownItemStyle">@style/Widget.Sherlock.DropDownItem.Spinner</item>
        <item name="spinnerItemStyle">@style/Widget.Sherlock.TextView.SpinnerItem</item>

        <item name="textColorPrimary">@color/abs__primary_text_holo_dark</item>
        <item name="textColorPrimaryDisableOnly">@color/abs__primary_text_disable_only_holo_dark</item>
        <item name="textColorPrimaryInverse">@color/abs__primary_text_holo_light</item>

        <!-- Internal --><item name="dropdownListPreferredItemHeight">48dip</item>
        <item name="dropDownListViewStyle">@style/Widget.Sherlock.ListView.DropDown</item>

        <item name="textAppearanceSmall">@style/TextAppearance.Sherlock.Small</item>
        <item name="textAppearanceLargePopupMenu">@style/TextAppearance.Sherlock.Widget.PopupMenu.Large</item>
        <item name="textAppearanceSmallPopupMenu">@style/TextAppearance.Sherlock.Widget.PopupMenu.Small</item>

        <item name="popupMenuStyle">@style/Widget.Sherlock.PopupMenu</item>
        <!-- Internal --><item name="listPopupWindowStyle">@style/Widget.Sherlock.ListPopupWindow</item>

        <item name="searchDropdownBackground">@drawable/abs__search_dropdown_dark</item>
        <item name="searchViewTextField">@drawable/abs__textfield_searchview_holo_dark</item>
        <item name="searchViewTextFieldRight">@drawable/abs__textfield_searchview_right_holo_dark</item>
        <item name="searchViewCloseIcon">@drawable/abs__ic_clear</item>
        <item name="searchViewSearchIcon">@drawable/abs__ic_search</item>
        <item name="searchViewGoIcon">@drawable/abs__ic_go</item>
        <item name="searchViewVoiceIcon">@drawable/abs__ic_voice_search</item>
        <item name="searchAutoCompleteTextView">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>
        <item name="android:dropDownHintAppearance">@style/TextAppearance.Sherlock.Widget.DropDownHint</item>

        <item name="windowActionBar">true</item>
        <item name="windowActionModeOverlay">false</item>
        <item name="windowContentOverlay">@null</item>
    </style> 
```

除了 ActionBar 之外，没有指定 TextViewStyle 或任何其他样式，因此您无需修改​​主题。

如您所见，所有其他样式均由父主题 Sherlock.__Theme 完成。而这个 Theme 基本上就是 11 以下 API 上的 NoTitleBar 主题。

```
<style name="Sherlock.__Theme" parent="android:Theme.NoTitleBar">
        <item name="android:windowContentOverlay">@null</item>
</style> 
```

所以这不会覆盖任何其他样式。

# ember.js - Ember：使用复选框的子视图

> ID：14015956
> 
> 赞同：2
> 
> 时间：2012-12-24T00:50:48.130
> 
> 标签：ember.js, handlebars.js

在余烬中，我有一个汽车列表，并且为每辆汽车设置了相同的颜色。

我想向用户展示汽车列表以及为每辆汽车勾选他想要的颜色的能力。

我已经构建了以下示例[http://jsfiddle.net/eH9xH/7/](http://jsfiddle.net/eH9xH/7/)但无法弄清楚如何避免为每辆车选择颜色。你能帮我吗 ？

谢谢，对新手的问题感到抱歉。

```
<script type="text/x-handlebars" data-template-name="application">
    {{#each App.availableCopies.content }}
        <h1>{{ this.value }}</h1>
        {{each App.availableTags.content itemViewClass="App.OneTagView"}}
    {{/each}}
</script>

<script type="text/x-handlebars" data-template-name="one-tag">
    <label>
       {{ view Ember.Checkbox checkedBinding="isChecked" }}
       {{ name }}
    </label>
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T07:36:40.553

检查这个小提琴[http://jsfiddle.net/apWsW/3/](http://jsfiddle.net/apWsW/3/)

基本上，`checkedBinding="isChecked"`绑定到封闭的上下文，这不是我们想要的。由于上下文在其余 OneTagView 实例之间共享，因此 checkBinding 正在更新所有实例

如果将其更改为`checkedBinding=view.isChecked`，它将绑定到 OneTagView 的**实例**。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:09:17.780

只需将其更改`checkedBinding`为`view.isChecked` [Fiddle](http://jsfiddle.net/eH9xH/9/)并按照 Bradley 的建议，如果每辆车都相同，您可以使用单选按钮或颜色下拉列表...

# web-services - 测试 BPEL 项目时出错

> ID：14015959
> 
> 赞同：3
> 
> 时间：2012-12-24T00:52:17.987
> 
> 标签：web-services, netbeans, bpel

使用 OpenESB (Glassfish-full-installer-windows2.1) 运行 Netbeans 6.5.1。

我使用本教程 ( [http://www.youtube.com/watch?v=a76RxkzB4Bg](http://www.youtube.com/watch?v=a76RxkzB4Bg) ) 作为通过调用调用外部 WSDL ( [http://www.webservicex.net/ CreditCard.asmx?WSDL](http://www.webservicex.net/CreditCard.asmx?WSDL)）。我已经准备好我的 BPEL

![在此处输入图像描述](../Images/7c3c7a093397adf51f0b17b671f7ff2c.png)

并且我创建了复合应用程序，它自动将 SOAP 调用从我的本地 WSDL 绑定到 BPEL（消费者到生产者），我必须拖放另一个 SOAP 对象并使用与我的本地 WSDL 相同的接口对其进行配置，以接收来自调用动作（正确吗？）。

![在此处输入图像描述](../Images/db4f06bd0e35904e28c69355c3f0938b.png)

当我从本地 WSDL 中选择操作运行测试用例时，我得到以下 SoapResponse：

```
<SOAP-ENV:Fault>
      <faultcode xmlns="">SOAP-ENV:Server</faultcode>
      <faultstring xmlns="">BPCOR-6135: A fault was not handled in the process scope; Fault Name is {http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/ErrorHandling}systemFault; Fault Data is &a....Sending errors for the pending requests in the process scope before terminating the process instance</faultstring>
      <faultactor xmlns="">sun-bpel-engine</faultactor>
      <detail xmlns="">
        <detailText>BPCOR-6135: A fault was not handled in the process scope; Fault Name is {http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/ErrorHandling}systemFault; Fault Data is &a... Sending errors for the pending requests in the process scope before terminating the process instance
   Caused by: BPCOR-6131: An Error status was received while doing an invoke (partnerLink=externalBPELImplementation, portType={http://www.webservicex.net}CCCheckerSoap, operation=ValidateCardNumber)
BPCOR-6129: Line Number is 37
BPCOR-6130: Activity Name is Invoke1
   Caused by: HTTP Status-Code 404: Not Found - Not Found</detailText>
      </detail> 
```

我创建了一个单独的项目来测试外部 WSDL，它正在按预期验证信用卡号，我的 BPEL 或我的复合应用程序有问题。

如果我创建另一个测试用例并选择当我将 Soap 对象拖放到 Comp 中时创建的本地端口。应用程序。设计界面，我得到一个不同的错误：

```
Dec 24, 2012 12:54:11 AM com.sun.xml.messaging.saaj.client.p2p.HttpSOAPConnection call
SEVERE: SAAJ0006: Bad URL (endPoint instance of String)
java.net.MalformedURLException: no protocol: 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:44:15.800

您的流程接缝是正确的（乍一看）。看起来您的进程找不到您要求的服务：

BPCOR-6130：活动名称为 Invoke1 - 原因：HTTP 状态代码 404：未找到 - 未找到

您导入的 wsdl 中的“肥皂地址”是否正确？您是否尝试过重载 bpel 映射中的 url？（属性 -> SOAP HTTP BC -> 出站 -> UR）

您的 CASA 中还有一些问题：如果您尝试使用“localCreditCard_WSDLPort”并在 OpenESB“casaPort1”中公开，则 SOAP 绑定是相反的。箭头应从 casaPort1 开始并在 localCreditCard_WSDLPort 结束。

我希望这可以帮助你，

西蒙

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:02:42.723

根据来自 www.open-esb.net 的@brasseld

> 事实上，你犯了两个错误：
> 
> *   第一个，对于您的单元测试，您必须使用来自 BPEL 的良好 WSDL，因为您已经创建了一个具体的 SOAP WSDL (CreditCard_WSDL.wsdl)。
> *   然后，当您在复合应用程序中为您的 plnk externalServiceCard_WSDL 创建一个新端口时，您必须通过右键单击 > 属性来设置肥皂地址位置。默认情况下，此设置为 localhost:${HttpDefaultPort}/compositeapp/casaportX?wsdl 这就是您遇到错误（404 或错误 url 错误）的原因。

根据他的建议，我决定逐步记录开发过程，结果如下：

> [http://www.youtube.com/watch?v=-1W1xR3-iJQ](http://www.youtube.com/watch?v=-1W1xR3-iJQ)

# algorithm - 计算以素数为模的倒数表

> ID：14015960
> 
> 赞同：3
> 
> 时间：2012-12-24T00:52:19.017
> 
> 标签：algorithm, primes

我知道扩展欧几里得算法是计算单个数模素数**p**的乘法逆的理想方法。

但是，如果我想创建一个数组**A**，其中**A[x]**是 x 的倒数，该怎么办？有没有一种更快的方法来计算这样一个数组，然后分别计算每个元素的倒数？

我凭直觉希望有一条捷径，因为您有很多身份，例如

```
A[x*y % p] = A[x]*A[y] % p 
```

但是我想不出获得整个数组**A**的通用方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:37:30.510

一种将逆运算减半的简单方法是使用

```
inverse(p - k) = p - inverse(k) 
```

并使用扩展欧几里得算法仅填充数组的前半部分，并通过对称性填充剩余的一半。

我不确定以下是否会更快，它需要更少的计算，但对数组的访问模式更差，所以它可能会更慢：

```
int A[p] = {0};
A[1] = 1;
for(int k = 2; k < p; ++k) {
    if (A[k] == 0) {
        // haven't found the inverse yet
        inv = inverse(k,p); // extended Euclidean algorithm or Fermat's theorem
        int m = k, i = inv;
        while(m != 1) {
            A[m] = i;
            m = (m*k) % p;
            i = (i*inv) % p;
        }
    }
} 
```

每次遇到一个您还不知道其逆的值时，您就迭代地计算由该值生成的整个子组的逆，每个元素仅使用两个模乘（除了初始求逆）。您应该相对较快地击中整个单位组的生成器 modulo `p`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T04:01:45.263

对于 pa 素数，元素 {1, 2, 3, ..., (p-1)} 形成一个循环群。也就是说，存在一个数（实际上很多）x，使得 {x^0, x^1, x^2, ..., x^(p-2)} 是集合。找到x的倒数后，称其为y，只需将y乘以适当的幂即可得到对应的倒数，y^k就是x^k的倒数。你怎么找到这样的x？选择一个随机元素并将其提高到 (p-1)/2 的幂。该数字将是 1 或 -1 (p-1)。如果它是-1，你有你的发电机。将元素提高到幂应该使用“平方求幂”来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-03T19:03:18.720

以下代码来源于 mod 函数的定义：

[![在此处输入图像描述](../Images/4bdcb587331b2aeb7870b8e508539d1f.png)](https://i.stack.imgur.com/813rw.png)

```
public long[] InverseTable(long n, long p)
{
    long[] inverse = new long[n+1];
    inverse[1] = 1;
    for (long i = 2; i <= n; i++)
        inverse[i] = p - (inverse[p % i] * (p / i) % p);
    return inverse;
} 
```

# regex - 正则表达式帮助使用 MYSQL 通配符（%）运算符

> ID：14015961
> 
> 赞同：0
> 
> 时间：2012-12-24T00:52:21.987
> 
> 标签：regex, wildcard

只想向正则表达式专家寻求帮助。这是我的情况：

在 mysql 中，我可以使用像这样的 LIKE 运算符进行文本过滤**Changed STATUS from%PAID IN FULL**可以搜索包含在我指定的确切文本之间的内容的字符串： 可以搜索如下：

```
Changed STATUS from PROMISE TO PAY to PAID IN FULL
Changed STATUS from NEWBIZ to PAID IN FULL
Changed STATUS from CALLED IN 1ST to PAID IN FULL
Changed STATUS from NSF to PAID IN FULL 
```

但不是

```
 lllbozeman@aol.com send confirmation paid in full.
 email paid in full letter when paid off 
```

在 PHP 正则表达式中我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:57:01.840

利用

```
~Changed STATUS from(.*?)PAID IN FULL~ 
```

如果您希望它不区分大小写`i`，请在第二个之后放置`~`

另请注意括号是可选的 - 如果您想捕获它之间的文本（它将捕获到第 1 组）

# c - 在C中如何获取指向char字符串的指针数组中的项目数

> ID：14015967
> 
> 赞同：7
> 
> 时间：2012-12-24T00:53:24.560
> 
> 标签：c, arrays

我想实现以下函数来打印`char`通过指针数组引用的几个字符串的内容。如何确定有多少指针而不将总数作为函数的参数传递？

如果它是一个类型的数组，`int`那么可以使用该`sizeof()`函数，但鉴于我的数组的每个项目都是一个指向`char`字符串的指针，并且每个字符串的长度可能不同，我认为我不能使用这种方法。

```
void printCharArray(char *arr[]){

    int length = sizeof(arr) / sizeof(char); /* this does not give correct 
                                          number of items in the pointer array */

    for (int i=1;i<=length; i++) {
        printf("Array item: [%s]",arr[i]);
    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T00:56:08.213

没有内置的方法可以做到这一点，因为 C 不会像这样跟踪数组中元素的数量。

你有几个选择：

1.  传递数组中的项目数。
2.  将最后一项设置为 NULL，以便代码知道何时到达末尾。（这就是 C 字符串的处理方式。）
3.  否则修改您的数据结构以跟踪数组中的项目数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-24T00:56:43.893

您不能将数组作为 C 中的函数参数传递。当用作函数参数时，数组名称会衰减为指向其第一个元素的指针，并且您必须单独指定可用数组元素的数量。

（在函数参数类型的上下文中，`T[]`and`T*`和`T[12]`是相同的，所以你的函数参数也可能是`char ** arr`。）

像这样：

```
void printCharArray(char ** arr, size_t len) { /* ... */ }

int main()
{
    char * arr[10] = { "Hello", "World", /* ... */ };

    printCharArray(arr, sizeof(arr)/sizeof(*arr));
} 
```

（或者，您可以提供“第一个”和“一个过去的”指针，这可能[更自然一些](https://stackoverflow.com/a/9963438/596781)。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T00:55:37.683

如果您将最后一个有效元素之后的元素设置为 null ，那么您可以执行以下操作：

```
void printCharArray(char *arr[]){

    for (int i=0; arr[i] != NULL; i++) {
        printf("Array item: [%s]",arr[i]);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T04:25:18.637

```
void printCharArray(char *arr[]) {
    int length = sizeof(arr) / sizeof(char*); /* this does not give correct 
                                                 number of items in the pointer array */
    for (int i=0;i<=length; i++) {
        printf("Array item: [%s]",arr[i]);
    }
}

int main()
{
    char * arr[10] = { "Hello", "World", /* ... */ };
    printCharArray(arr); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-15T02:53:18.170

首先，我将 y 声明为全局变量。htmTags 是一个 *char[]。然后在 main()

```
y = 0;
while( htmTags[y] ) {
        y++;
} 
```

我没有在数组末尾添加 null 。提供数组元素的实际计数

或者这也适用于 (y=0;htmTags[y];y++) ；

# python - Python 类继承

> ID：14015969
> 
> 赞同：0
> 
> 时间：2012-12-24T00:54:51.933
> 
> 标签：python

> **可能重复：**
> [子类 __init__ 覆盖超类的](https://stackoverflow.com/questions/13545985/subclass-init-overrides-superclasss)

```
class A():
    z = 'z it is'
    def __init__(self):
        self.a = 'a it is'

class B(A):
    def __init__(self):
        self.b = 'b it is'

b = B()
print b.z # z it is 
print b.a # AttributeError: B instance has no attribute 'a' 
```

`b``B`是从类继承的类的实例`A`。这不意味着我可以访问父类的属性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T00:57:08.063

您需要显式调用超类`__init__`。它不会自动调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:12:30.167

B类中的`__init__`函数应该这样写：

```
class B(A):
    def __init__(self):
        A.__init__(self)
        self.b = "b it is" 
```

# arabic - 在一行文本中执行主页按钮应该执行的代码

> ID：14015971
> 
> 赞同：2
> 
> 时间：2012-12-24T00:55:05.347
> 
> 标签：arabic, right-to-left

我有一条阿拉伯线，里面有英文字母。例如：أنا في abcd البيت

我打开记事本。我开始写作。我想写的是 I'm at abcd home 但你现在看到的（从左到右）是在 I'm abcd home

为了解决这个问题，我单击该行的任意位置。我按下主页按钮。您会看到光标移动到英语单词左侧的阿拉伯语单词的开头。我右键单击，选择 INSERT UNICODE CONTROL CHARACTER 然后我选择 RLE。

当我这样做时，读到我在 abcd 家。它是固定的。

如果再次右键单击并选择显示 UNICODE 控制字符。你会看到第一个“字符”是我插入的 unicode 字符。

我希望自动化这个过程。

我怎么做？:D

我可以告诉你，RLE 表示为 \u202B

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:00:51.050

没有非常简单的方法可以自动化该过程，但是您可以尝试以下几件事：

1.  按键盘右侧的 Ctrl-Shift。这适用于记事本和 Windows 上的许多其他程序：Word、Internet Explorer、Google Chrome。它也可以在 Firefox 中工作，但如果不能，请使用 Ctrl-Shift-X 在 Firefox 中设置从右到左的方向。请注意，这将在您编写文本时为您更正文本的显示和光标移动，但不一定为您发送此文本的人。

2.  使用[Microsoft 键盘布局创建](http://msdn.microsoft.com/en-us/goglobal/bb964665.aspx)器将 RLE 字符添加到您的键盘。该程序将让您创建一个新的键盘布局，您将能够在所有程序中使用它。加载您当前使用的键盘布局，找到未分配给任何字符的键并将 RLE 分配给它。请注意，如果您使用 RLE，您还必须在从右到左的文本末尾使用 PDF 字符 (U+202C)，因此也将其分配给某个键（这类似于编写 <span dir=" rtl">أنا في abcd البيت<span> 在 HTML 中——您必须使用结束标记）。这将修复您的文本，尽管它很棘手。另外，请注意，当您尝试在某些网站上发帖时，某些网站会删除诸如 RLE 之类的字符 - 例如，Facebook 和 Twitter 会这样做。

最后，请注意，这个问题是纯文本独有的。如果您使用真正的文字处理器，如 MS-Word 或 LibreOffice，或者将您的文本编写为具有适当 dir 属性的 HTML，那么这会容易得多，但您必须以这些格式存储和发送您的文本。

# php - PDO lastinsertid 的问题

> ID：14015984
> 
> 赞同：1
> 
> 时间：2012-12-24T00:57:31.803
> 
> 标签：php, mysql, pdo, lastinsertid

我是一名初学者程序员，正在对数据库应用程序进行非常简单的插入。

这是我的代码：

```
$hostname = 'localhost';
$username = '***********';
$password = '**********';
$conn = new PDO("mysql:host=$hostname;dbname=***********", $username, $password);
$sql = ("INSERT INTO ******** (name, date_entered) VALUES (?, ?)");
$q = $conn->prepare($sql);
$q->execute(array($name, date("Y-m-d")));

var_dump($q); // Trying to figure out what the issue was
echo $sql->lastInsertId(); 
```

插入工作正常，但我无法获得 lastInsertId 的任何值。为什么？var_dump($q) 的结果：

```
object(PDOStatement)#4662 (1) { ["queryString"]=> string(54) "INSERT INTO ******** (name, date_entered) VALUES (?, ?)" } 
```

感谢您的任何帮助！非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:02:20.223

您正在尝试对字符串对象执行 lastInsertId 函数；试试这个：

```
echo $conn->lastInsertId(); 
```

# php - || 语法错误 运算符 (PHP)

> ID：14015985
> 
> 赞同：0
> 
> 时间：2012-12-24T00:57:36.070
> 
> 标签：php, syntax, operators

我正在尝试`||`运营商。以下代码的语法有什么问题？

```
<?php
if(strstr($_SERVER['HTTP_USER_AGENT'], 'MSIE 6')) || if(strstr($_SERVER['HTTP_USER_AGENT'], 'MSIE 7')) || if(strstr($_SERVER['HTTP_USER_AGENT'], 'MSIE 8'))
{
    echo 'something';
}
?> 
```

但是，以下代码可以正常工作：

```
<?php
if(strstr($_SERVER['HTTP_USER_AGENT'], 'MSIE 6')) {
    echo 'something';
}
?> 
```

所以显然这`||`部分有问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T00:58:46.130

不要重复`if`。

像这样使用它：

```
if(foo || bar || ...) 
```

IE

```
if(strstr($_SERVER['HTTP_USER_AGENT'],'MSIE 6') ||
   strstr($_SERVER['HTTP_USER_AGENT'],'MSIE 7') ||
   strstr($_SERVER['HTTP_USER_AGENT'],'MSIE 8')) {

} 
```

一个更好的版本是这样的：

```
if(preg_match('/MSIE [6-8]/', $_SERVER['HTTP_USER_AGENT'])) {
    // do stuff
} 
```

# jquery - 将自定义标记添加到 Gmap

> ID：14015988
> 
> 赞同：1
> 
> 时间：2012-12-24T00:58:20.827
> 
> 标签：jquery, google-maps

我正在尝试向这个 gmap 添加一个自定义标记；

```
$(function() {
    var addresspicker = $( "#addresspicker" ).addresspicker();
    var addresspickerMap = $( "#addresspicker_map" ).addresspicker(
    {
        regionBias: "au",
        map:      "#map_canvas",
        typeaheaddelay: 1000,
        mapOptions: {
            zoom:16,
            center: new google.maps.LatLng(-33.8674869, 151.2069902)
        }

    });

    addresspickerMap.on("addressChanged", function(evt, address) {
       console.dir(address);
    });
    addresspickerMap.on("positionChanged", function(evt, markerPosition) {
        markerPosition.getAddress( function(address) {
            if (address) {
                $( "#addresspicker_map").val(address.formatted_address);
            }
        })
    });
}); 
```

标记是这样的：

[http://oursite.com.au/includes/helper/images/422marker.png](http://oursite.com.au/includes/helper/images/422marker.png)

宽度：33 像素 x 50 像素

我认为这很简单：

```
marker: 'http://oursite.com.au/includes/helper/images/422marker.png', 
```

但这没有用......请有任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:18:39.813

标记将由 返回`addresspickerMap.addresspicker( "marker")`，您可以使用标记的 setIcon 方法应用自定义图标：

```
addresspickerMap.addresspicker( "marker")
  .setIcon('http://oursite.com.au/includes/helper/images/422marker.png'); 
```

# android - Sherlock 排除了哪些图书馆？

> ID：14015989
> 
> 赞同：2
> 
> 时间：2012-12-24T00:58:42.600
> 
> 标签：android, actionbarsherlock

如您所知，Action Bar Sherlock 虽然是一个整洁的库，但有两到三个非常具有侵入性的元素：

1.  它迫使您从 SherlockFragments 和 SherlockActivities 继承您的片段和活动。这是一个稀疏资源，您不能将其用于另一个可能需要您执行相同操作的方便库。幸运的是，compat 库不是其中之一（实际上它是，但 Sherlock 建立在它之上）。

2.  它使用一个 Android 库项目。由于这些工具还不能称为非常稳定，因此您可能会很快遇到问题。事实上，我遇到了 Eclipse 错误。

3.  它是另一个使 Proguard 的工作更加困难并增加您的 apk 大小的库。Apk 大小对于某些用户来说仍然是一个巨大的限制，其中包括 Google TV 用户。

因此，如果我选择使用 Action Bar Sherlock，我会排除哪些其他可能的（未来）库，包括 3rd 方库？我还缺少任何其他限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:50:38.943

1.  正如@Jake Wharton 本人指出的那样，这不是真的。使用现有代码和示例，它是创建自定义 ABS 活动和片段的简单且相当快速的实现。

2.  我广泛使用图书馆项目，包括有深入多个层次的图书馆项目参考。我遇到了一些问题，但没有什么是破坏交易的。Eclipse 有时在重建时会感到困惑，但通常清理所有项目可以让一切都整理好。图书馆项目一直在变得越来越稳定。

3.  这实际上是两点，但具有相似的主题——对于*任何*库，而不仅仅是 ABS，您必须权衡从包含库的功能中获得的价值与这样做的成本。我觉得现在界面的价值值得付出额外的努力和 apk 大小。这是一个价值决策，需要在每个应用程序的基础上做出。

@Ahmad 是正确的，ABS 显然对 3rd 方库没有限制。集成可能需要一些编码，但它们应该一起工作。此外，ABS 的使用在未来会自然消退。它是一个兼容性库，因此随着设备分发越来越多地转移到 Android 3+ 设备，在 2.X 设备上支持操作栏 UI 的需求将不再是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T01:14:33.763

> 因此，如果我选择使用 Action Bar Sherlock，我会排除哪些其他可能的（未来）库，包括 3rd 方库？我还缺少任何其他限制吗？

坦白说，我什么都不知道。大多数使用自定义实现的库`Activity`（比如 ActionBarSherlock 也在做）很可能会扩展`SherlockActivity`（因为几乎每个人都使用 ABS），或者如果没有，那么你可以自己修改它。所以不，据我所知，不会有任何限制。

# lambda - 在 lambda 演算中定义堆栈数据结构及其主要操作

> ID：14015990
> 
> 赞同：8
> 
> 时间：2012-12-24T00:58:44.430
> 
> 标签：lambda, functional-programming, lambda-calculus, combinators, y-combinator

我正在尝试`stack`使用定点组合器在 lambda 演算中定义数据结构。我正在尝试定义两个操作，`insertion`以及`removal`元素的 so`push`和`pop`，但我能够定义的唯一一个操作，即插入，无法正常工作。删除我无法弄清楚如何定义。

这是我的`push`操作方法，以及我对 a 的定义`stack`：

```
Stack definition:
STACK = \y.\x.(x y)
PUSH = \s.\e.(s e) 
```

我的堆栈用一个元素初始化以指示底部；我在`0`这里使用：

```
stack = STACK 0 = \y.\x.(x y) 0 = \x.(x 0)       // Initialization
stack = PUSH stack 1 = \s.\e.(s e) stack 1 =     // Insertion
    = \e.(stack e) 1 = stack 1 = \x.(x 0) 1 =
    = (1 0) 
```

但是现在，当我尝试插入另一个元素时，它不起作用，因为我的初始结构已被解构。

如何修复`STACK`定义或`PUSH`定义，以及如何定义`POP`操作？我想我必须应用一个组合器来允许递归，但我不知道该怎么做。

参考：[http ://en.wikipedia.org/wiki/Combinatory_logic](http://en.wikipedia.org/wiki/Combinatory_logic)

任何关于 lambda 演算中数据结构定义的进一步解释或示例将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T08:59:34.107

通过定义一个组合器，它：

> 被定义为没有自由变量的 lambda 项，因此根据定义，任何组合子都已经是 lambda 项，

例如，您可以通过以下方式定义列表结构：

```
Y = (list definition in lambda calculus)
Y LIST = (list definition in lambda calculus) LIST
Y LIST = (element insertion definition in lambda calculus) 
```

直观地说，使用定点组合器，一个可能的定义是——考虑 \ = lambda：

*   一个列表要么是空的，后跟一个尾随元素，比如`0`；
*   或者一个列表由一个元素组成`x`，它可能是前一个列表中的另一个列表。

由于它是使用组合器（定点组合器）定义的，因此无需执行进一步的应用程序，以下抽象本身就是一个 lambda 术语。

```
Y = \f.\y.\x.f (x y) 
```

现在，将其命名为 LIST：

```
Y LIST = (*\f*.\y.\x.*f* (x y)) *LIST* -- applying function name
LIST = \y.\x.LIST (x y), and adding the trailing element "0"
LIST = (\y.\x.LIST (x y) ) 0
LIST = (*\y*.\x.LIST (x *y*) ) *0*
LIST = \x.LIST (x 0), which defines the element insertion abstraction. 
```

定点组合`Y`器，或简单的组合器，允许您考虑 LIST 的定义已经是一个有效的成员，没有自由变量，因此不需要减少。

然后，您可以通过执行以下操作附加/插入元素，例如 1 和 2：

```
LIST = (\x.LIST (x 0)) 1 2 =
    = (*\x*.LIST (*x* 0)) *1* 2 =
    = (LIST (1 0)) 2 = 
```

但是在这里，我们知道列表的定义，所以我们扩展它：

```
 = (LIST (1 0)) 2 =
    = ((\y.\x.LIST (x y)) (1 0)) 2 =
    = ((*\y*.\x.LIST (x *y*)) *(1 0)*) 2 =
    = ( \x.LIST (x (1 0)) ) 2 = 
```

现在，插入 elemenet `2`：

```
 = ( \x.LIST (x (1 0)) ) 2 =
    = ( *\x*.LIST (*x* (1 0)) ) *2* =
    = LIST (2 (1 0)) 
```

由于 LIST 是一个 lambda 术语，使用组合器定义，因此可以在新插入的情况下对其进行扩展，或者简单地保持原样。

为将来的插入扩展：

```
 = LIST (2 (1 0)) =
    = (\y.\x.LIST (x y)) (2 (1 0)) =
    = (*\y*.\x.LIST (x *y*)) *(2 (1 0))* =
    = \x.LIST (x (2 (1 0))) =
    = ( \x.LIST (x (2 (1 0))) ) (new elements...) 
```

我真的很高兴我能够自己推导出这个，但我很确定在定义堆栈、堆或一些更高级的结构时必须有一些很好的额外条件。

尝试导出堆栈插入/删除的抽象——没有所有的一步一步：

```
Y = \f.\y.\x.f (x y)
Y STACK 0 = \x.STACK (x 0)
STACK = \x.STACK (x 0) 
```

为了对它执行操作，让我们命名一个空栈——分配一个变量（：

```
stack = \x.STACK (x 0)

// Insertion -- PUSH STACK VALUE -> STACK
PUSH = \s.\v.(s v)
stack = PUSH stack 1 =
    = ( \s.\v.(s v) ) stack 1 =
    = ( \v.(stack v) ) 1 =
    = ( stack 1 ) = we already know the steps from here, which will give us:
    = \x.STACK (x (1 0))

stack = PUSH stack 2 =
    = ( \s.\v.(s v) ) stack 2 =
    = ( stack 2 ) =
    = \x.STACK x (2 (1 0))

stack = PUSH stack 3 =
    = ( \s.\v.(s v) ) stack 3 =
    = ( stack 3 ) =
    = \x.STACK x (3 (2 (1 0))) 
```

我们再次命名这个结果，以便我们弹出元素：

```
stack = \x.STACK x (3 (2 (1 0)))

// Removal -- POP STACK -> STACK
POP = \s.(\y.s (y (\t.\b.b)))
stack = POP stack =
    = ( \s.(\y.s y (\t.\b.b)) ) stack =
    = \y.(stack (y (\t.\b.b))) = but we know the exact expansion of "stack", so:
    = \y.((\x.STACK x (3 (2 (1 0))) ) (y (\t.\b.b))) =
    = \y.STACK y (\t.\b.b) (3 (2 (1 0))) = no problem if we rename y to x (:
    = \x.STACK x (\t.\b.b) (3 (2 (1 0))) =
    = \x.STACK x (\t.\b.b) (3 (2 (1 0))) = someone guide me here, if i'm wrong
    = \x.STACK x (\b.b) (2 (1 0)) =
    = \x.STACK x (2) (1 0) =
    = \x.STACK x (2 (1 0)) 
```

为了什么，希望我们`3`弹出了元素。

我试图自己推导出这个，所以，如果我没有遵循 lambda 演算有任何限制，请指出。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-27T02:58:22.443

lambda 演算中的堆栈只是一个单链表。单链表有两种形式：

```
nil  = λz. λf. z
cons = λh. λt. λz. λf. f h (t z f) 
```

这是[Church 编码](http://en.wikipedia.org/wiki/Church_encoding)，列表表示为它的[catamorphism](http://en.wikipedia.org/wiki/Catamorphism)。重要的是，您根本不需要定点组合器。在此视图中，堆栈（或列表）是一个函数，它为 case 接受一个参数，为`nil`case接受一个参数`cons`。例如，列表`[a,b,c]`表示如下：

```
cons a (cons b (cons c nil)) 
```

空栈`nil`相当于`K`SKI 演算的组合子。构造`cons`函数是你的`push`操作。给定一个头部元素`h`和另一个堆栈`t`作为尾部，结果是一个新堆栈，该元素`h`位于最前面。

该`pop`操作只是将列表分成头部和尾部。您可以使用一对功能来做到这一点：

```
head = λs. λe. s e (λh. λr. h)
tail = λs. λe. s e (λh. λr. r nil cons) 
```

`e`处理空堆栈的东西在哪里，因为弹出空堆栈是未定义的。这些可以很容易地变成一个返回一对`head`and的函数`tail`：

```
pop = λs. λe. s e (λh. λr. λf. f h (r nil cons)) 
```

同样，这对是 Church 编码的。一对只是一个高阶函数。该对`(a, b)`表示为高阶函数`λf. f a b`。它只是一个函数，给定另一个 function `f`，适用`f`于`a`和`b`。

# slide - Onload 页面通过缓动使 div 幻灯片可见

> ID：14015995
> 
> 赞同：0
> 
> 时间：2012-12-24T00:59:19.650
> 
> 标签：slide, easing

我想要一个 div（带有 class="top"）从顶部滑入：-300px；到顶部：40px；有一些不错的放松。我找不到任何例子。有谁知道如何在加载页面上执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:07:36.253

下面是一些 JavaScript 和 CSS3：

JavaScript：

```
<script>
document.getElementById("slide").style.top="40px";
</script> 
```

和CSS：

```
-webkit-transition:all 1s;-ms-transition:all 1s;-moz-transition:all 1s;-o-transition:all 1s;-webkit-transition:all 1s; 
```

会滑动的元素必须有 id “slide”。它还需要顶部在 CSS 中具有“position:absolute;top:-300px”以使其成为 -300px。您也可以添加“left:20%;” 或者类似于 CSS 的东西，让它看起来更好。任何适合您的设计。您应该查找有关 CSS 过渡属性的信息。它非常适合特殊效果。在这种情况下，我让滑动需要 1 秒。你总是可以改变它。

这也可以使用[jQuery](http://jquery.com/)来实现，这是一个 JavaScript 库（这将需要更少的代码），但如果我能提供帮助，我通常更喜欢常规的 JavaScript 和 CSS。

这是我上面编写的代码的演示：[jsFiddle](http://jsfiddle.net/M6bsj/)。

哦，如果对您有帮助，请将此问题标记为答案。它会给我特权并为我赢得更多声誉。

希望这有帮助！