# StackOverflow 问答 15252000-15252999

# c++ - STL C++ 中的结束迭代器是什么？

> ID：15252002
> 
> 赞同：25
> 
> 时间：2013-03-06T15:54:33.907
> 
> 标签：c++, stl

任何人都可以解释我是什么意思`past-the-end`。为什么我们称`end()`函数为过去式？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-06T16:03:36.627

函数`begin()`和`end()`定义一个***半开范围（`[begin, end)`）***，这意味着：
范围包括第一个元素但不包括最后一个元素。因此，名字过去了。

![在此处输入图像描述](../Images/5d84ec28ce386a3a62cce6e853cf54cf.png)

半开范围的优点是：

1.  它避免了对空范围的特殊处理。对于空范围，`begin()`等于 `end()`。

2.  它使迭代元素的循环的结束标准变得简单：只要`end()`没有达到，循环就会继续

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T15:55:33.790

因为它不指向容器的**最后一个**元素，而是指向容器**最后**一个元素之后的某个位置。

如果取消引用`end()`它会导致**未定义的行为**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T16:01:23.167

与数学中的区间一样，stl 使用`[begin, end)`.

这就是为什么我们可以写`for (auto it = v.begin(); it != v.end(); ++it)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T15:55:30.530

从字面上看，因为它指向数组末尾之后的位置。

使用它是因为该元素是空的，并且可以迭代，但不能取消引用。

```
int arry[] = {1, 2, 3, 4, /* end */ };
                         ^^^^^^^
                    std::end(arry) would point here. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T16:09:37.967

对上述正确答案再补充一点。这样做也是为了与数组兼容。例如在下面的代码中：

```
char arr[5];
strcpy(arr, "eakgl");
sort(&arr[0], &arr[5]); 
```

这将正常工作。

相反，如果你给了：

```
sort(&arr[0], &arr[4]); 
```

它会错过排序最后一个字符。

这也有助于自然地表示空容器。

# php - 用来自 php 的数据填充 flash 中的数组

> ID：15252003
> 
> 赞同：-3
> 
> 时间：2013-03-06T15:54:35.193
> 
> 标签：php, arrays, flash, actionscript

嗨，所以我需要使用来自 php 的信息在 flash 中填充一个数组。我的PHP代码是：

```
<?php

$db = mysql_connect("localhost","root",""); 
    if (!$db) {
        die("Database connection failed miserably: " . mysql_error());
    }

$db_select = mysql_select_db("profileofperson",$db);
    if (!$db_select) {
        die("Database selection also failed miserably: " . mysql_error());
    }

?>

<html>
    <head>
        <title>mySQLtestfile</title>
    </head>
    <body>

<?php
//Step4
$result = mysql_query("SELECT * FROM catalogue", $db);
    if (!$result) {
        die("Database query failed: " . mysql_error());
    }

    while ($row = mysql_fetch_array($result)) {
        echo $row[" Name"]." ".$row["age"]." ".$row["Allergies"]." ".$row["height"]." ".$row["weight"]."<br />";
    }
?>
    </body>
</html> 
```

目前正在显示来自数据库的信息。如何让闪存填充到数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:33:14.493

使您的文档 xml，而不是 html，像这样开始文档：

```
<?php

    header("Content-type: text/xml");
    echo chr(60).chr(63).'xml version="1.0" encoding="utf-8" '.chr(63).chr(62); 
```

这只是添加了一个标题标签，因此浏览器/flash 将文档识别为 XML（类似于带有 HTML 的 !DOCTYPE）：`<?xml version="1.0" encoding="UTF-8"?>`

然后，按照您的方式查询，但以有效的 XML 格式回显结果：

```
 echo "<people>";//Create the parent node

    while ($row = mysql_fetch_array($result)) {
            echo "<person>";//Open child node, add values:
            echo "<name>".$row[" Name"]."</name>";
            echo "<age>".$row["age"]."</age>";
            echo "<allergies>".$row["Allergies"]."</allergies>";
            echo "<height>".$row["height"]."</height>";
            echo "<weight>".$row["weight"]."</weight>";
            echo "</person>";//Close child node
    };

    echo "</people>";//Close the parent node

?> 
```

我刚刚把它写出来，所以可能并不完美，但它应该很容易让您检查它是否正在生成有效的 XML 文档（只需在浏览器中加载页面，获取 XML 查看器插件找出更多是否出错）并调整如果没有，有数百万关于从 PHP 生成 XML 页面的教程。

然后，在您的 Flash 应用程序中使用 URLLoader 类来访问它：

```
var loader:URLLoader = new URLLoader();
//The loader class

var urlRQ:URLRequest = new URLRequest('yoursite/yourpage');
//The URL request    

loader.dataFormat = URLLoaderDataFormat.TEXT;
//Use this for xml

urlRQ.method = URLRequestMethod.POST;
//Set method type (normally post)

loader.load(urlRQ);
loader.addEventListener(Event.COMPLETE,loadedData); 
```

然后，已加载数据解析 XML：

```
function loadedData(e:Event):void {

    var people:XML = XML(e.target.data);//Cast this var as XML to access
    //people should represent top-level ie <people>;  

    for each(var person:XML in people.person){//Iterate over member nodes called 'person';
         trace(person.age);//XML object node names can be referenced 
                           //directly with dot notation!
         trace(person.name);//etc...
    }

} 
```

最后一件事，mysql_ 函数在 PHP 中已被弃用，我最近发现了这一点，以后改用 SQLi 或 PDO！

希望这会有所帮助，正如我所说，我已经把它写在了我的脑海中，你最好尝试一下，但如果你确实卡住了，请发表评论，我会看看！

# c# - 由于 System.Windows.EffectiveValueEntry 未处置对象

> ID：15252006
> 
> 赞同：5
> 
> 时间：2013-03-06T15:54:41.670
> 
> 标签：c#, wpf

我有一个 ObservableCollection`Snapshot`对象，绑定到 ListBox 的 ItemsSource。如果一个新`Snapshot`对象被推入集合并且集合已经包含 3 个元素，`Snapshot`则删除最后一个对象。然而，被移除的对象永远不会被 GC 收集。为了验证这一点，我`GC.Collect()`在从集合中删除了一个对象并使用 YourKit Profiler 分析了我的应用程序后调用了它。创建 6 个`Snapshot`对象后，YourKit Profiler 制作了内存快照。尽管集合仅引用了 3 个对象，但所有 6 个`Snapshot`对象仍然存在。System.Windows.EffectiveValueEntry 引用了其他 3 个。

当集合未绑定到 ListBox 的 ItemsSource 时，`Snapshot`将按预期收集对象。

如何摆脱 System.Windows.EffectiveValueEntry 的引用？

```
public class Snapshot
{
    public BitmapImage PreviewImage { get; set; } // Freezed BitmapImage
    public string Path { get; set; }
    public string Name
    {
        get
        {
            return System.IO.Path.GetFileNameWithoutExtension(Path);
        }
    }
} 
```

XAML：

```
<ListBox ItemsSource="{Binding Path=LastCapturedPictures}"
                 SelectedItem="{Binding Path=SelectedCapturedPicture}" HorizontalAlignment="Stretch"
                 Margin="0,2,0,0" Grid.Column="1" Grid.Row="3">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel Orientation="Vertical" VerticalAlignment="Center"
                                HorizontalAlignment="Left"/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="5,0,5,0">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Image Source="{Binding Path=PreviewImage}" Width="130" Height="100"
                               Margin="0,0,0,2" Grid.Row="0" HorizontalAlignment="Left">
                            <Image.BitmapEffect>
                                <DropShadowBitmapEffect/>
                            </Image.BitmapEffect>
                        </Image>
                        <TextBlock Text="{Binding Path=Name}" Margin="0,2,0,0" Grid.Row="1"
                                   TextAlignment="Left"/>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-21T11:23:44.233

这可能为时已晚，但我认为您的问题不在于 EffectiveValueEntry，而在于您的 Snapshot 类。

如果要绑定到此类，则应实现 INotifyPropertyChanged 接口。

我不完全了解 WPF 的内部工作原理，但是当使用像 ANTS 这样的内存分析器时，您可以看到与对象大不相同的保留图。

例如，您的 Snapshot 类当前将导致 WPF 为您通过反射在 XAML 中绑定到的每个属性创建 ValueChanged 事件处理程序，并且这些属性没有正确清理。当您实现 INotifyPropertyChanged 时，这不会发生，并且绑定会自行清理属性。

# multithreading - 将参数传递给 QThread 的 run() 方法

> ID：15252008
> 
> 赞同：1
> 
> 时间：2013-03-06T15:54:46.493
> 
> 标签：multithreading, qt

我已经对我的 Qthread 进行了子类化，因此我可以在`run()`方法中实现我的代码。我必须传递一些参数，

我试过这样，所以这里有什么问题？

```
class QMyThread :
    public QThread
{
public:
    QMyThread();
    ~QMyThread(void);
    virtual void start(FILE *data, int sock, int bits);

protected:
    virtual void run(FILE *data, int sock, int bits);
}; 
```

运行方法；

```
void QMyThread::run(FILE *data, int sock, int bits)
{
//do stuff
} 
```

启动线程：

```
QMyThread *thread;
thread->start(datafile, sockint, bitsint); 
```

首先它说线程可能没有被初始化，然后它在`start()`方法中崩溃`SIGSEGV error`。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:06:57.190

您不应该继承 QThread 类，因为这不再是使用 QThread 的推荐方式。

更多信息[http://qt-project.org/doc/qt-4.8/qthread.html](http://qt-project.org/doc/qt-4.8/qthread.html)

要回答你的问题，你不能让这些参数成为你的类的成员并通过设置器或其构造器分配它们的值吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:59:03.613

你应该这样做：

```
QMyThread thread;
thread.start(...) 
```

您创建了一个指向线程的指针，但没有创建`new`它。坦率地说，我在这里没有理由使用指针，您可以创建一个普通变量并在其上调用一个方法。

如果您确实需要指针，请`std::unique_ptr`在 C++11 或`boost::unique_ptr`

```
std::unique_ptr<QMyThread> thread;
thread->start(...); 
```

编辑：

你真的应该`QThread * thread = new QThread(this);`按照[文档](http://qt-project.org/doc/qt-4.8/qthread.html)创建一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-02T21:55:16.900

如何使用`QMetaObject`该类将参数传递给工人类。你可以这样尝试：

`QMetaObject::invokeMethod(worker, "methodName", Q_ARG(QString, "ParameterQStringValue");`

`methodName`请注意，如果是插槽并且您使用创建线程的新方法，则此方法将起作用： [https ://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full -解释/](https://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)

`Q_ARG`您可以使用最多 9 个宏（[http://doc.qt.io/qt-5/qmetaobject.html#details](http://doc.qt.io/qt-5/qmetaobject.html#details) ）指定不同的参数。如果您需要更多参数，那么我建议您`QVector`使用结构创建并将其`QMetaObject::invokeMethod`作为参数传递给。

# iphone - iOS 版本检查发出警告

> ID：15252009
> 
> 赞同：5
> 
> 时间：2013-03-06T15:54:50.997
> 
> 标签：iphone, ios, objective-c, respondstoselector

在我的应用程序中，我需要展示一个视图控制器。呈现视图控制器的 6.0 方法是 presentViewController:animated:completion:。我也想支持4.3。4.3中要调用的方法是presentModalViewController:animated:。所以我使用 respondsToSelector: 来查明该方法是否被支持。但是当我为 6.0 编译应用程序时，它会给出警告消息

> presentModalViewController:animated: 已弃用：在 iOS 6.0 中首次弃用

谁能知道如何摆脱这个警告。我也没有 4.3 设备来测试它是否有效。我需要假设我编写的代码应该适用于 4.3。

```
 if([myViewController respondsToSelector:@selector(presentModalViewController:animated:)]){
      [myViewController presentModalViewController:anotherViewController animated:YES];
  }else{
      [myViewController presentViewController:anotherViewController animated:YES completion:nil];
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:58:11.550

您可以进行相反的检查，因为`respondsToSelector`它可能会有所帮助，如果您支持旧版本，这实际上是要走的路:)

```
if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]){
    [self presentViewController:anotherViewController animated:YES completion:nil];
} else {
    [self presentModalViewController:anotherViewController animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:02:09.710

您可以在代码中启用/禁用带有编译指示的警告，但它们使用起来不是很友好。而且我不记得这种警告的具体编译指示。但是这里有些人会告诉你。

顺便说一句，您可以使用一个简单的

```
[id performSelector:<#(SEL)#> withObject:<#(id)#>] 
```

会成功的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T06:33:51.697

我错误地将部署目标设置为 6.0。所以它显示了上面提到的警告信息。将部署目标更改为 4.3（我需要支持）后没有警告消息。感谢您的回答！

# python - 如何在 Python 中 JSON 序列化 hh:mm:ss？如何查询其类型？

> ID：15252010
> 
> 赞同：0
> 
> 时间：2013-03-06T15:54:54.990
> 
> 标签：python, json, datetime, serialization, time

我需要将 python 对象序列化为 JSON，并且很难将时间计数器转换为 JSON-play-nice 形式

说我有这样的事情：

```
 01:20:24    # hh:mm:ss 
```

这是我正在增加的时间计数器，而我的脚本正在运行。

完成后，我需要转换为 JSON。

我目前正在尝试这个：

```
dthandler = lambda obj: obj.isoformat() if isinstance(obj, time) else None
this_object["totaltime"] = json.dumps(this_object["totaltime"], default=dthandler) 
```

但我收到一个错误，`time`因为它不是有效的`class, type, or tuple of classes and types`

**问题：**
我如何序列化这个？是否有一个可能的“默认类型”列表来查询（Python新手......非常缺少Javascript typeof）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:02:05.187

听起来您的`time`变量不是您认为的那样（可能是指`time`模块而不是类？）。

**但是**，最好根本不进行实例检查，因为它相当不合 Python。“最好请求原谅……”

```
def dthandler(obj):
    try:
        return obj.isoformat()
    except AttributeError:
        return None 
```

这完全避免了丑陋的类型检查，因为你真正想要的是“如果可以的话，返回 isoformat 结果；否则返回 None”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:58:00.163

这不是 JSON 问题；您的`time`参考不是您认为的那样。

确保`datetime.time`那里有一个对象，而不是`time`模块，例如：

```
>>> import datetime
>>> import time
>>> ref = datetime.time(10, 20)
>>> isinstance(ref, time)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types
>>> isinstance(ref, datetime.time)
True 
```

如果您使用*正确*的类型进行测试，则一切正常：

```
>>> import json
>>> dthandler = lambda obj: obj.isoformat() if isinstance(obj, datetime.time) else None
>>> json.dumps(ref, default=dthandler)
'"10:20:00"' 
```

请注意，文档希望处理程序引发 a`TypeError`而不是返回`None`; 这样不可序列化的对象至少被视为错误：

```
def dthandler(o):
    try:
        return o.isoformat()
    except AttributeError:
        raise TypeError 
```

会更加Pythonic和正确。

# java - 如何从 Red5 上的实时视频流中提取音频？

> ID：15252016
> 
> 赞同：0
> 
> 时间：2013-03-06T15:55:18.820
> 
> 标签：java, red5, rtmp

我需要从 red5 上的实时流中提取音频并单独流式传输。
在带有 rtmp 模块的 nginx 上，我只是通过没有视频数据的 ffmpeg 重新翻译这个流，但我不知道如何在 Red5 上做这样的事情（有或没有 ffmpeg）。

谷歌上的第一个链接给了我这个：

> 只需在您的 IClientStreams 上注册 IStreamListeners，然后在 RTMPEvents 中将 AudioData 与 VideoData 分开

但这并没有多大帮助。老实说，这根本没有帮助。这些 IStreamListener 是什么以及如何在**IClientStream**上注册它们？

而且，更神秘的是，如何在某些 RTMPEvents 中将 AudioData 与 VideoData 分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:06:35.827

这就是您扩展 RTMPClient 并捕获音频或视频事件的方式

```
私有类 TestClient 扩展 RTMPClient {
  私人 int 音频计数器；
  私人 int videoCounter;
  公共无效连接（）{
    私人 IEventDispatcher 流EventDispatcher = 新 IEventDispatcher() {
      公共无效调度事件（IEvent事件）{
    System.out.println("ClientStream.dispachEvent()" + event.toString());
    字符串 evt = event.toString();
    if (evt.indexOf("Audio") >= 0) {
      音频计数器++；
    } else if (evt.indexOf("Video") >= 0) {
      视频计数器++；
    }
      }
    };
  }
}

```

这只是计算了 a/v 事件，但它会让你部分地到达那里。我建议查看 red5 中的单元测试，在那里你可以学到很多东西。

# vim - vim标签栏可以显示局部变量吗？

> ID：15252021
> 
> 赞同：2
> 
> 时间：2013-03-06T15:55:26.700
> 
> 标签：vim, ctags, tagbar

![图片显示全局变量Class A，但局部变量不能在标签栏中显示，为什么？ 我想要标签栏显示局部变量 str,m,n 以及如何设置？](../Images/e345bad884c72174c0385a2460b0f624.png) 图片显示全局变量Class A，但局部变量不能在标签栏中显示，为什么？我想要标签栏显示局部变量 str,m,n 以及如何设置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T16:18:04.583

*ctags*解析的内容取决于语言；根据屏幕截图，您对 C/C++ 感兴趣，但它不这样做。我不知道最初的原因，但我猜：

*   拥有庞大的代码库（谁没有？），您（也许还有编辑器）会被标签的数量所淹没。请记住，*标签栏*有点特殊，它只显示当前文件的标签；通常标签数据库是针对整个项目的。
*   保持单个函数简短而小是一种很好的做法；当理想情况下每个功能都适合整个屏幕时，谁需要标签查找？！

Exuberant *Ctags*解析器可以使用基于正则表达式的自定义语言定义进行扩展（参见`--langdef=<language>`和`--regex-<language>`参数）。如果你能为局部变量想出一个好的模式，你可以对它们进行解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T22:41:58.217

Exuberant Ctags 支持将局部变量作为标签，默认情况下它们只是关闭。我想他们会让你的标签文件变得很大，对于任何规模的项目来说，我从来没有因为这个原因打开它们（我的标签文件已经有很多兆字节了）。但是，如果您想尝试一下，只需在生成标签文件时将`--c++-kinds=+l`（假设为 c++）添加到您的命令中，这应该可以工作。`ctags`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T12:29:18.987

首先，tagbar 显示来自 ctags 的所有标签，并且 ctags 默认不处理函数原型、外部变量和*局部变量*（在 shell 中试试这个：ctags --list-kinds=c++）；
其次，tagbar 的 tagbar_type_cpp 变量用于此：

```
let g:tagbar_type_cpp = {
    \ 'kinds' : [
        \ 'd:macros:1',
        \ 'g:enums',
        \ 't:typedefs:0:0',
        \ 'e:enumerators:0:0',
        \ 'n:namespaces',
        \ 'c:classes',
        \ 's:structs',
        \ 'u:unions',
        \ 'f:functions',
        \ 'm:members:0:0',
        \ 'v:global:0:0',
        \ 'x:external:0:0',
        \ 'l:local:0:0'
    \ ]
\ } 
```

看最后两行。

就这样。

# c# - 根据一组规则验证日期

> ID：15252026
> 
> 赞同：2
> 
> 时间：2013-03-06T15:55:31.023
> 
> 标签：c#, sql, validation, date

我正在编写一个应用程序，该应用程序需要根据一组规则限制下订单的时间。我有两个问题，将规则存储在 MSSQL 表中的最佳方式是什么，以及针对它们验证日期的最佳方式是什么？

例如。

*   不能在 1200 到 1700 之间的任何星期六下订单。
*   0000 到 2359 之间的任何圣诞节 (25/12) 都不能下订单
*   不能在 2013 年 10 月 3 日的 1500 和 1600 之间下订单。

我最初的计划是让一个表有 4 列（开始时间、结束时间、单一规则/重复规则）。

但是，我不确定如何考虑星期几与年份中的日期与绝对日期。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:38:34.727

我解决这个问题的方法是有 3 个表（一年中的一天、一周中的一天和绝对日期），它们覆盖包含每个规则的开始/结束时间的 DateConstraint。

![时间匹配的实体框架图](../Images/088c61e39c5145dbf7da2041d7e4848f.png)

验证码比较简单。我将 Matches() 例程添加到所有类。

```
public partial class DateConstraint
{
    public virtual bool Matches()
    {
        return DateTime.Now.TimeOfDay.Ticks >= StartTime.Ticks && DateTime.Now.TimeOfDay.Ticks <= EndTime.Ticks;
    }
}

public partial class DayOfWeekConstraint : DateConstraint
{
    public override bool Matches()
    {
        return base.Matches() && this.DayOfWeek == Convert.ToInt16(DateTime.Now.DayOfWeek);
    }
}

public partial class DayOfYearConstraint : DateConstraint
{
    public override bool Matches()
    {
        return base.Matches() && Date.Day == DateTime.Now.Day && Date.Month == DateTime.Now.Month;
    }
}

public partial class AbsoluteDateConstraint : DateConstraint
{
    public override bool Matches()
    {

        return base.Matches() && Date.Day == DateTime.Now.Day && Date.Month == DateTime.Now.Month && Date.Year == DateTime.Now.Year;
    }
} 
```

要进行验证，我只需要做

```
foreach(var dateConstraint in Restaurant.DateConstraints)
{
   if(!dateConstraint.Matches()) { return false; }
} 
```

# gwt - 刷新按钮挂起 GWT 应用程序

> ID：15252027
> 
> 赞同：1
> 
> 时间：2013-03-06T15:55:31.530
> 
> 标签：gwt, refresh

我的 GWT (2.5.0) 应用程序有问题：在某些（不是全部）页面上，当用户点击“刷新”或 F5 按钮时，我的应用程序停止响应并且只显示加载轮。例如，页面`http://127.0.0.1:8888/portal/index.html?gwt.codesvr=127.0.0.1:9997#categories`刷新工作正常，但`http://127.0.0.1:8888/portal/index.html?gwt.codesvr=127.0.0.1:9997#dataset/1474`它没有，我应该手动去重新`127.0.0.1:8888/portal/index.html?gwt.codesvr=127.0.0.1:9997`弥补。当我第一次启动时，我收到以下消息：

```
 Loading module: portal
  Top URL: http://127.0.0.1:8888/portal/index.html?gwt.codesvr=127.0.0.1:9997
  User agent: FF
  Remote host: localhost:33702
  Tab key: 0x942f6ad0
  Session key: *u'04>->84mG9\V\
DEBUG: Validating units:
  INFO: Ignored 4 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
INFO: Module portal has been loaded 
```

当我点击刷新时，我得到了这个：

```
Loading module: portal
  Top URL: http://127.0.0.1:8888/portal/index.html?gwt.codesvr=127.0.0.1:9997#dataset/247
  User agent: FF
  Remote host: localhost:33727
  Tab key: 0x942f6ad0
  Session key: j[!{tfNQto8{^&>D
DEBUG: Validating units:
  INFO: Ignored 4 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
DEBUG: Rebinding com.example.portal.ui.client.dataset.rpc.VDatasetDGService
  DEBUG: Adding '46' new generated units
    DEBUG: Validating units:
      TRACE: Errors in 'generated://C89FA10FB0221276522030F263FADCFA/com/example/core/application/api/DashboardAnnotationDto_FieldSerializer.java'
      TRACE: Errors in 'generated://444002CF23E85026C65248F49EB99E1E/com/example/core/application/api/DashboardColumnDto_FieldSerializer.java'
      TRACE: Errors in 'generated://7DEC0CE328D95C92EEBFD44D58F865CD/com/example/core/application/api/DashboardDto_FieldSerializer.java'
      TRACE: Errors in 'generated://5A1445C62C01E373F4894D65809B536E/com/example/core/application/api/SavedViewDto_FieldSerializer.java'
      TRACE: Errors in 'generated://B1CFA3457166E1C34069A9879469FFA2/com/example/portal/ui/client/common/rpc/AccessDeniedUiException_FieldSerializer.java'
      INFO: Ignored 5 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
        INFO: See snapshot: /tmp/com.example.core.application.api.DashboardAnnotationDto_FieldSerializer2049573901487473293.java
        INFO: See snapshot: /tmp/com.example.core.application.api.DashboardColumnDto_FieldSerializer2257704401750789459.java
        INFO: See snapshot: /tmp/com.example.core.application.api.DashboardDto_FieldSerializer256293197012885556.java
        INFO: See snapshot: /tmp/com.example.core.application.api.SavedViewDto_FieldSerializer8667778097358587561.java
        INFO: See snapshot: /tmp/com.example.portal.ui.client.common.rpc.AccessDeniedUiException_FieldSerializer4641234980664694792.java
INFO: Module portal has been loaded 
```

如果这些信息还不够，请要求更多。

以下是刷新失败时更详细的日志部分：

```
com.example.portal.ui.client.dataset.rpc.VDatasetDGService_Proxy
  DEBUG: Adding '46' new generated units
    TRACE: Compiling...
    TRACE: Invalid Unit: com.example.core.application.api.SavedViewDto_FieldSerializer
    TRACE: Invalid Unit: com.example.core.application.api.DashboardColumnDto_FieldSerializer
    TRACE: Invalid Unit: com.example.core.application.api.DashboardAnnotationDto_FieldSerializer
    TRACE: Invalid Unit: com.example.core.application.api.DashboardDto_FieldSerializer
    TRACE: Invalid Unit: com.example.portal.ui.client.common.rpc.AccessDeniedUiException_FieldSerializer
    TRACE: Invalid units found: 5
    TRACE: Compiling...
      TRACE: Compilation completed in 0,00 seconds
      TRACE: Compilation completed in 0,43 seconds
    TRACE: Added 5 units to cache since last cleanup.
    DEBUG: Validating units:
    TRACE: Removing invalidated units
      TRACE:    s in 'generated://C89FA10FB0221276522030F263FADCFA/com/example/core/application/api/DashboardAnnotationDto_FieldSerializer.java'
      TRACE: Errors in 'generated://444002CF23E85026C65248F49EB99E1E/com/example/core/application/api/DashboardColumnDto_FieldSerializer.java'
      TRACE: Errors in 'generated://7DEC0CE328D95C92EEBFD44D58F865CD/com/example/core/application/api/DashboardDto_FieldSerializer.java'
      TRACE: Errors in 'generated://5A1445C62C01E373F4894D65809B536E/com/example/core/application/api/SavedViewDto_FieldSerializer.java'
      TRACE: Errors in 'generated://B1CFA3457166E1C34069A9879469FFA2/com/example/portal/ui/client/common/rpc/AccessDeniedUiException_FieldSerializer.java'
  DEBUG: Relinking module 'portal'
        TRACE: Line 32: com.example.core.application.api.BaseLongIdentifiedDto_FieldSerializer cannot be resolved to a type
        TRACE: Line 43: com.example.core.application.api.BaseLongIdentifiedDto_FieldSerializer cannot be resolved to a type
        INFO: See snapshot: /tmp/com.example.core.application.api.DashboardAnnotationDto_FieldSerializer5862698034462806589.java
        TRACE: Line 44: com.example.core.application.api.BaseLongIdentifiedDto_FieldSerializer cannot be resolved to a type
        TRACE: Line 58: com.example.core.application.api.BaseLongIdentifiedDto_FieldSerializer cannot be resolved to a type
        INFO: See snapshot: /tmp/com.example.core.application.api.DashboardColumnDto_FieldSerializer6902331775752414472.java
        TRACE: Line 52: com.example.core.application.api.BaseLongIdentifiedDto_FieldSerializer cannot be resolved to a type
        TRACE: Line 65: com.example.core.application.api.BaseLongIdentifiedDto_FieldSerializer cannot be resolved to a type
        INFO: See snapshot: /tmp/com.example.core.application.api.DashboardDto_FieldSerializer5870139301570285930.java
        TRACE: Line 183: com.example.core.application.api.BaseLongIdentifiedDto_FieldSerializer cannot be resolved to a type
        TRACE: Line 210: com.example.core.application.api.BaseLongIdentifiedDto_FieldSerializer cannot be resolved to a type
        INFO: See snapshot: /tmp/com.example.core.application.api.SavedViewDto_FieldSerializer1128689625908711248.java
        TRACE: Line 12: com.google.gwt.user.client.rpc.core.java.lang.Exception_FieldSerializer cannot be resolved to a type
        TRACE: Line 21: com.google.gwt.user.client.rpc.core.java.lang.Exception_FieldSerializer cannot be resolved to a type
        INFO: See snapshot: /tmp/com.example.portal.ui.client.common.rpc.AccessDeniedUiException_FieldSerializer717502603474217145.java 
```

这是它的工作时间：

```
com.example.portal.ui.client.dataset.rpc.VDatasetDGService_Proxy
  DEBUG: Adding '46' new generated units
  DEBUG: Relinking module 'portal'
    TRACE: Compiling...
    TRACE: Added 0 units to cache since last cleanup.
    TRACE: Removing invalidated units 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:32:12.947

本质上，您应该深入了解与 VDatasetDGService 关联的 RPC 服务和模型并修复它们。

设置 GWT 编译器选项 -logLevel TRACE，然后尝试使用严格标志 true 进行编译。它们可能会向您显示与 VDatasetDGService 错误相关的更多信息。

# macos - Wordpress localhost 不显示前端

> ID：15252028
> 
> 赞同：0
> 
> 时间：2013-03-06T15:55:32.153
> 
> 标签：macos, wordpress, localhost, frontend, bitnami

看不到我的 wordpress localhost 的前端。

我完成的过程：

1\. 我在 Mac OX 上使用 BitNami 在本地安装了 wordpress。
2.将现有数据库导入phpmyadmin。
3.修改wp-config文件支持本地主机数据库。
4\. 添加这两行
`define('WP_HOME','http://localhost/wordpress');`
`define('WP_SITEURL','http://localhost/wordpress');`
5\. 登录到我的 wp-admin。

现在我可以看到该站点的 WP-ADMIN 并在其中执行操作，但我无法查看前端。
每当我尝试时，我都会得到：
无法与 127.0.0.1 的服务器建立连接。

或者如果我尝试查看帖子，我会得到
“在此服务器上找不到请求的 URL /site/2013/02/13/idho_global/。”

如果我尝试预览草稿，我会以它应该出现的方式看到它。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:05:01.950

通过 phpmyadmin 检查数据库，如果您没有这样做，请更改 url。在`wp_options`检查`siteurl`& home 是否设置为`localhost`

更新：你应该看看“移动 Wordpress 页面” [https://codex.wordpress.org/Moving_WordPress](https://codex.wordpress.org/Moving_WordPress) 它很好地解释了如何在移动 Wordpress 后更改永久链接和要做的事情。

如果您的永久链接不起作用，请检查`.htaccess`根目录中是否有一个。内容应该是：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:35:45.443

您需要更新数据库 url。Wordpress 对它们进行硬编码。运行下面的 sql，用您的网址替换“old-url.com/wordpress”和“new-url.com/wordpress”

```
UPDATE wp_posts SET guid = REPLACE(guid, 'old-url.com/wordpress', 'new-url.com/wordpress');
UPDATE wp_posts SET post_content = REPLACE(post_content, 'old-url.com/wordpress', 'new-url.com/wordpress');
UPDATE wp_options SET option_value = REPLACE(option_value, 'old-url.com/wordpress', 'new-url.com/wordpress'); 
```

# jquery - Mosync 中的自签名证书 jQuery AJAX

> ID：15252035
> 
> 赞同：0
> 
> 时间：2013-03-06T15:55:48.550
> 
> 标签：jquery, https, self-signed, mosync

**背景：** 我见过一些类似的问题，但没有一个能真正回答这个问题。

当我与服务器通信时，我试图在 Web 服务上使用自签名证书来证明 SLL 加密。服务器已经很旧并且已经建立，在这种情况下，可以接受/需要自签名证书（我知道这通常是一种不好的做法，但它发生在这里，这不是这个问题的重点）。

我们正在开发一个移动应用程序，使用 Mosync 将 HTML5/jQuery 应用程序打包为服务器的新客户端。当我们不使用 https/SSL（在我们的开发环境中）时，我们能够成功地进行所有 AJAX 调用。一旦我们引入 https/SLL，我们的调用就停止了。从之前的搜索中，我认为这是因为自签名证书。

**主要问题：** 尽管证书是自签名的，有什么方法可以强制 jQuery 继续运行？我们能否通过在设备上安装证书来实现这一点（目前主要针对 Android）？是否有解决此问题的 Mosync 选项？或者，绝对没有办法解决这个问题，我们必须使用 http 或 CA 签名的证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:44:06.103

问题出在 MoSync 的运行时库中，它目前不处理来自 WebView 的 SSL 错误。

MoSync 已经意识到了这个[问题](http://jira.mosync.com/browse/MOSYNC-2924)，我们正在研究一个很快就会提供的解决方案。请密切关注该问题，以了解包含该修复程序的 MoSync 版本何时可用。

# c# - C#并行foreach同样完成任务

> ID：15252039
> 
> 赞同：9
> 
> 时间：2013-03-06T15:56:05.677
> 
> 标签：c#, parallel-processing

我正在使用 C# Parallel.ForEach 处理一千多个数据子集。一组需要 5-30 分钟来处理，具体取决于组的大小。在我的电脑上有选项

```
ParallelOptions po = new ParallelOptions();
po.MaxDegreeOfParallelism = Environment.ProcessorCount 
```

我将获得 8 个并行进程。据我了解，进程在并行任务之间平均分配（例如，第一个任务获得作业编号 1、9、17 等，第二个任务获得 2、10、18 等）；因此，一项任务可以比其他任务更快地完成自己的工作。因为这些数据集比其他数据集花费的时间更少。

问题是四个并行任务在 24 小时内完成，但最后一个在 48 小时内完成。是否有机会组织并行性以使所有并行任务均等地完成？这意味着所有并行任务继续工作，直到所有工作都完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:08:59.127

由于作业不相等，因此您无法在处理器之间分配作业数量并让它们几乎同时完成。我认为你需要的是 8 个工作线程来检索下一个工作。您将不得不对该功能使用锁定才能获得下一份工作。

如果我错了，请有人纠正我，但在我的脑海中......一个工作线程可以被赋予这样的功能：

```
public void ProcessJob()
{
    for (Job myJob = GetNextJob(); myJob != null; myJob = GetNextJob())
    {
        // process job
    }
} 
```

获得下一份工作的函数如下所示：

```
private List<Job> jobs;
private int currentJob = 0;

private Job GetNextJob()
{
    lock (jobs)
    {
        Job job = null;
        if (currentJob < jobs.Count)
        {
            job = jobs[currentJob];
            currentJob++;
        }
        return job;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:34:08.137

正如其他人所建议的，一种选择是管理您自己的生产者消费者队列。我想指出，使用`BlockingCollection`使这*很*容易做到。

```
BlockingCollection<JobData> queue = new BlockingCollection<JobData>();

//add data to queue; if it can be done quickly, just do it inline.  
//If it's expensive, start a new task/thread just to add items to the queue.
foreach (JobData job in data)
    queue.Add(job);

queue.CompleteAdding();

for (int i = 0; i < Environment.ProcessorCount; i++)
{
    Task.Factory.StartNew(() =>
    {
        foreach (var job in queue.GetConsumingEnumerable())
        {
            ProcessJob(job);
        }
    }, TaskCreationOptions.LongRunning);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T17:24:29.797

似乎没有现成的解决方案，必须创建它。

我之前的代码是：

```
var ListOfSets = (from x in Database
           group x by x.SetID into z
           select new { ID = z.Key}).ToList();

ParallelOptions po = new ParallelOptions();
po.MaxDegreeOfParallelism = Environment.ProcessorCount;

Parallel.ForEach(ListOfSets, po, SingleSet=>
{
     AnalyzeSet(SingleSet.ID);
}); 
```

为了在所有 CPU 之间平均分担工作，我仍然习惯于`Parallel`做这项工作，但`ForEach`我没有使用`For`和来自 Matt 的想法。新代码是：

```
Parallel.For(0, Environment.ProcessorCount, i=>
{
    while(ListOfSets.Count() > 0)
    {
        double SetID = 0;
        lock (ListOfSets)
        {
            SetID = ListOfSets[0].ID;
            ListOfSets.RemoveAt(0);
        }
     AnalyzeSet(SetID);
    }
}); 
```

所以，谢谢你的建议。

# python - 如果import语句只包含文件名，python如何找到模块文件？

> ID：15252040
> 
> 赞同：70
> 
> 时间：2013-03-06T15:56:06.117
> 
> 标签：python, python-import, python-module, pythonpath

我到处都看到 Python 代码使用`import sys`或导入模块`import mymodule`

如果没有提供目录或路径，解释器如何找到正确的文件？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-06T15:58:30.823

[http://docs.python.org/3/tutorial/modules.html#the-module-search-path](http://docs.python.org/3/tutorial/modules.html#the-module-search-path)

> 6.1.2\. 模块搜索路径
> 
> 当`spam`导入一个名为的模块时，解释器首先搜索具有该名称的内置模块。`spam.py`如果没有找到，它会在由变量 给定的目录列表中搜索一个文件`sys.path`。`sys.path`从这些位置初始化：
> 
> *   包含输入脚本的目录（或未指定文件时的当前目录）。
> *   `PYTHONPATH`（目录名称列表，与 shell 变量的语法相同`PATH`）。
> *   安装相关的默认值。
> 
> > 注意：在支持符号链接的文件系统上，包含输入脚本的目录是在跟随符号链接之后计算的。换句话说，包含符号链接的目录不会添加到模块搜索路径中。
> 
> 初始化后，Python 程序可以修改`sys.path`. 包含正在运行的脚本的目录位于搜索路径的开头，位于标准库路径之前。这意味着将加载该目录中的脚本，而不是库目录中的同名模块。除非打算更换，否则这是一个错误。有关详细信息，请参阅标准模块部分。

有关“特定于安装的默认设置”的信息，请参阅[模块`site`文档](https://docs.python.org/3/library/site.html#module-site)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-06T15:59:19.850

`sys`此外，您可以使用模块查看当前路径是什么

```
import sys
print(sys.path) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-06T15:58:11.157

它使用设置为环境变量的[PYTHONPATH](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH)`__init__.py`来查找包（包含文件的文件夹）和模块（或者，如果已经加载过一次，则从 检索模块对象`sys.modules`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T15:58:03.503

Python 有一个路径变量，就像您在终端中的那个变量一样。Python 在该路径内的文件夹或程序所在的文件夹中查找模块。

# regex - 如何以纯文本查找任意 URL？

> ID：15252042
> 
> 赞同：-2
> 
> 时间：2013-03-06T15:56:09.700
> 
> 标签：regex, url, text, hyperlink, text-parsing

有很多解决方案可以查找和/或解析普通 URL，但它们都没有处理任意文本，即分成几行的 URL？您如何找到可以在任何字符后有换行符的 URL？

注意：我对 URL 的各个部分不感兴趣。我只想找到给定文本中的所有 URL 以将它们转换为链接（例如，在纯电子邮件文本中）。

例子：

```
Text text text text text. Look at this:
http://stackoverfl
ow.com/
questions/15252042/
find-urls-in-text

Question question question. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:33:06.117

几种方法是可能的：

1）在每个常规字符之后编写一个带有空格规则的正则表达式。这肯定会破坏正则表达式模式，但却是最灵活的模式。要捕获换行符，请使用 DOT_ALL 模式。然而，DOT_ALL 将产生与下一种方法相同的问题。

2）（暂时）删除换行符并使用正常的正则表达式模式匹配。这种方法有问题，因为它可能会包含比必要的文本更多的文本（在 URL 的末尾）或找不到 URL（如果换行符在开头，则会弄乱协议字符串）。

2a) 对 2) 的修改可以是进行几次匹配尝试，仅删除某些换行符，例如在查找初始 URL 部分（例如 www、http 等）之后。只有在识别时间是次要的情况下才有可能。

3) 使用特定领域的知识简化您的任务。例如，如果您知道换行符可能发生的位置（或者它们仅发生在特定位置），那么请查找这些特定情况并首先解决它们。然后返回到通常的正则表达式搜索。

3a) 3) 的变体可能是使用具有完整空格规则的正则表达式专门查找协议和页面扩展，以查找 URL 的开始和停止。这显然只有在始终存在协议/文件名_with_extension 时才有效。将找到的标记转换为没有空格的常规标记（但在协议之前和扩展之后包含一个空格），然后删除文本中的所有换行符。现在您可以将 URL 与常规正则表达式匹配。

当然还有更多可能的变化，但总体思路是相同的。

# c# - 将文本框中的值添加到 csv 文件而不替换数据

> ID：15252044
> 
> 赞同：0
> 
> 时间：2013-03-06T15:56:15.503
> 
> 标签：c#, file, text, csv

```
private void button1_Click(object sender, EventArgs e) {
    String[] bla = File.ReadAllText(@"c:\\chat.csv").Split('|');

    for (int i = 0; i < bla.Length; i++) {
        textBox1.AppendText(bla[i] + Environment.NewLine); 
    }
} 
```

此代码将 csv 文件加载到`textBox1`并拆分行 (|)。我想将文本添加到 csv 文件中，输入为`textBox2`. 因此，`textBox2`应该将 的值添加到 中的最后一行`chat.csv`。

```
 waarde1 = textBox2.Text;
 File.WriteAllText(@"c:\\chat.csv", waarde1); */ 
```

我试图创造（我是初学者）一些东西。上面的代码将 textBox2 中的文本写入 csv 文件，但它也删除了所有当前的。

我可以使用什么功能使数据不会被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:59:18.477

而不是`File.WriteAllText`使用

```
waarde1 = textBox2.Text;
File.AppendAllText(@"c:\\chat.csv", waarde1); 
```

这将打开一个新流并附加文本。

有关这方面的更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:05:29.547

您的意思是保留文本并添加一些新文本吗？

```
File.AppendAllText("C:\\chat.csv", "newline"); 
```

# sql-server - 如何将数据传递给 SSIS 数据流任务中的脚本组件？

> ID：15252048
> 
> 赞同：1
> 
> 时间：2013-03-06T15:56:21.030
> 
> 标签：sql-server, ssis

在 SSIS 2008 中，我使用*脚本组件*来生成数据并使用*Union All*来聚合它。现在，我需要这个聚合数据由另一个脚本组件处理以生成文件的输出。

脚本组件本身没有输入，因此向其传输数据的最佳方法是确保在脚本组件开始执行时它位于变量中。

考虑到在某个时候它在数据流任务中的 Union All 中，我如何向脚本组件提供输入数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:24:34.887

一个[脚本组件](http://msdn.microsoft.com/en-us/library/ms137640(v=sql.105).aspx)当然**可以**有一个输入。首次创建脚本组件时，您可以选择它是充当数据源（仅输出）、数据目标（仅输入）还是转换（输入和输出）：

![在此处输入图像描述](../Images/0240b4befc60f3572893b41c821c9e59.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:05:23.167

您显然可以`Script Component`在放置之前添加一个 and ，您可以选择它是*Source*、*Destination*还是*Transformation*。

*当您将脚本组件*转换拖放到*数据流*选项卡上时， 将出现*选择脚本组件类型*对话框。选择选项*Destination*使*脚本组件*表现得像一个目标组件。

![选择脚本组件类型](../Images/eff25da37921445ddf74a650949eb801.png)

# java - EJB 容器中可能的 JNDI 查找

> ID：15252053
> 
> 赞同：2
> 
> 时间：2013-03-06T15:56:29.167
> 
> 标签：java, jakarta-ee, ejb-3.0, jndi, ejb-3.1

我正在浏览[EJB 3.1 规范](http://download.oracle.com/otndocs/jcp/ejb-3.1-pfd-oth-JSpec/)，并试图掌握进行 JNDI 调用的不同可能方式。

您可以使用[SessionContext](http://docs.oracle.com/javaee/6/api/javax/ejb/SessionContext.html)和[InitialContext](http://docs.oracle.com/javase/6/docs/api/javax/naming/InitialContext.html)（或基于 Initial- 或 SessionContext 的自创上下文）来完成此操作。根据您使用的语法不同，但我似乎无法找到它背后的逻辑。

所以我的问题是：**我什么时候可以使用什么语法在 EJB 容器环境中使用 JNDI 调用？**

这个问题的其余部分只是为了说明我的观点。

例如，我相信正确注入`sessioncontext`或创建总是可能的`initialcontext`：

```
ctx.lookup(java:global[/<app-name>]/<module-name>/<bean-name>[!<fully-qualified-interface-name>])
ctx.lookup(java:comp/env ...)
// special ones like these
ctx.lookup("java:comp/UserTransaction");
ctx.lookup("java:comp/ORB"); 
```

有时（仅用于会话上下文？）这个较短的版本是可能的：

```
ctx.lookup(<bean-name>); 
```

那么 in `embedded environment`, 只能`global`使用引用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:09:50.543

我通常使用 @EJB 注释在 EJB 容器中注入 EJB。所以 JDNI 查找是由服务器在部署时完成的。

例如 JBOSS 部署：

INFO [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor]（MSC 服务线程 1-2）部署“MyProject.ear”的部署单元子部署“MyEJB.jar”中名为 TestBean 的会话 bean 的 JNDI 绑定如下：

```
java:global/MyProject/MyEJB/TestBean!my.project.TestBean
java:app/MyEJB/TestEJB!my.project.TestBean
java:module/TestEJB!my.project.TestBean
java:global/MyProject/MyEJB/TestEJB
java:app/MyEJB/TestBean
java:module/TestBean 
```

有些是每个 EJB 规范，有些是依赖于应用程序服务器的。

如果您必须从上下文中进行查找，我认为最好的方法是使用**java:global**。

您还可以在以下位置找到一些附加信息： http: [//glassfish.java.net/javaee5/ejb/EJB_FAQ.html#POJOLocalEJB](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#POJOLocalEJB)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:36:51.123

jndi 有点像文件系统。您可以根据您在树中的位置（“cd”-ed 到的位置）使用相对路径来引用事物。

默认情况下，注入的会话上下文“定位”在 java:comp 上，因此您可以引用 java:comp 中可用的内容，而无需提供“完整路径”。

请注意，java:comp 本身是相对于单个 EJB bean，或者由于历史原因而相对于整个 Web 模块。

我不是 100% 确定您对嵌入式环境的含义，但是如果您从中进行 JNDI 查找的代码不是任何预定义范围（如 java:module、java:app 等）的一部分，则只有 java: global 可以便携使用。

# php - 未为一位用户保存 PHP 会话

> ID：15252054
> 
> 赞同：1
> 
> 时间：2013-03-06T15:56:31.233
> 
> 标签：php, session

我有一个奇怪的问题。我有一个网页，在主页上为每个访问的用户设置一个会话变量，然后在下一页上，如果设置了会话变量，则显示一些内容，而另一些则不显示。我设置的变量只是一个“1”。

```
 $_SESSION['user_id'] = $user_id; 
```

一切都很简单，一切都很好，但是我有一个用户，服务器没有保存会话变量。据我所知只有一个人。什么可能导致这种行为？如果这很重要，他正在使用 Mac，但在其他 Mac 上，该网站运行良好。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:01:39.470

当您调用PHP 时，会设置一个仅包含变量`session_start()`集的 cookie 。`PHPSESSID`此变量用于使用服务器上的会话数据来标识客户端浏览器。`PHPSESSID`如果您的用户禁用了 cookie，那么如果不通过 GET 或 POST 在每个请求中来回传递，就无法使用会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:04:00.263

HTTP 是一种无状态协议。如果会话只在服务器端，它如何能够区分用户？

[ *HTTP 是一种无状态协议意味着：HTTP 请求是从服务器响应的，它忘记了请求是谁发送的，从哪里来的。*]

这就是 cookie 存储会话 ID 的原因。

换句话说，如果用户禁用 cookie，他就不允许 PHP 为自己设置会话。这就是背后的原因。

# maven - maven 基于多模块项目构建多个 rpm

> ID：15252072
> 
> 赞同：1
> 
> 时间：2013-03-06T15:57:16.747
> 
> 标签：maven, rpm, rpm-maven-plugin

我正在尝试设置 maven 以特定方式构建我的项目。我有以下结构：

*   pom.xml
    *   模块1
        *   pom.xml
    *   模块2
        *   pom.xml
        *   模块2.1
            *   pom.xml
        *   模块2.2
            *   pom.xml
        *   模块2.3
            *   pom.xml

我实际上想基于模块 1、模块 2.2 和模块 2.3 构建单独的 rpm，并希望所有这些 rpm 都包含在根目录中。如果有任何方法可以使用 maven 来做到这一点，那么任何人都可以帮助我，而且它只是插件。如果可能的话，我也希望通过配置文件来完成。我所有的尝试都让我一无所获。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:07:19.803

看起来你需要`maven-assembly-plugin`. 您应该使用它并`<moduleSets/>`在您的程序集描述符中定义。

# api - 如何将搜索限制在多个站点？

> ID：15252076
> 
> 赞同：4
> 
> 时间：2013-03-06T15:57:22.657
> 
> 标签：api, search

将搜索限制在多个站点 - 可以这样做吗？

例如网站：www.google+www.yahoo.com？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:10:33.327

Bing 没有提供单独的方法来指定要搜索的站点，例如 Google 的注释。相反，您需要将它们作为参数添加到查询字符串中。为此，请使用 OR 逻辑运算符和 site: 规范。Bing 优先于 OR，因此请确保在 OR 的术语周围加上括号。例如，

```
example search terms (site:google.com OR site:yahoo.com) 
```

如果您要添加大量网站，请记住[总 URL 长度必须小于 2048 个字符，编码为](https://stackoverflow.com/questions/15334531/what-are-the-query-length-limits-for-the-bing-websearch-api/15445577#15445577).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-17T16:07:06.520

使用`OR`运算符和`site:`关键字。

例如

```
(site:http://superuser.com/ OR site:http://stackoverflow.com/) (some query) 
```

它应该适用于大多数搜索引擎，例如 Google、Bing、Yahoo、DuckDuckGo 等。

> `AND`注意：和等运算符使用大写字母很重要`OR`，否则无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T22:58:54.983

像这样格式化您的查询：

```
site:dell.com OR site:ibm.com "search phrase" 
```

所以每个站点/域`OR`之间都有。测试似乎适用于 Bing 和 Google。

无耻地取自[searchenginewatch.com](http://forums.searchenginewatch.com/showthread.php?t=4638)的语法。

# c# - 将文件从网络下载到 iPhone (C#)

> ID：15252085
> 
> 赞同：0
> 
> 时间：2013-03-06T15:57:36.073
> 
> 标签：c#, iphone

我有一个网站，允许用户上传/下载文件（pdf、jpg、txt 等）。它按原样工作得很好，但我的问题是在 iPhone（或 iPad）上访问网络的用户无法下载或访问该文件。我尝试对文件使用“Respone.Redirect”，但它不起作用。我已经使用 c# 来制作我的网站。

你有一段代码我可以用来让它工作吗？

这是我正在使用但不起作用的代码：

```
if (Request.UserAgent.ToLower().Contains("iphone") || Request.UserAgent.ToLower().Contains("ipad")) 
{
    Response.Redirect(Server.MapPath(fi.FullName.ToUpper())); 
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:03:22.907

我认为问题不在于您的代码，而在于电话。 [如何下载 PDF 并将其存储在 iPhone 本地？](https://stackoverflow.com/questions/2226615/iphone-download-pdf-and-store-locally)

# php - prestashop 1.4.1 ajax 调用

> ID：15252091
> 
> 赞同：1
> 
> 时间：2013-03-06T15:57:58.077
> 
> 标签：php, jquery, prestashop

我试图在 ajax 中调用我的新模块的函数，但我不能。我收到“500 内部服务器错误”，但我的网址很好。

我的 php 文件（module.php）

```
class test extends Module{

    function ajax_test(){
        #do some stuff
    }
} 
```

我的ajax请求

```
$.ajax({
      type: "GET",
      contentType: "application/json; charset=utf-8",
      url: "module.php",
      dataType: "json",
      data : {},
      success: 
         function(data){

         }
}); 
```

有任何想法吗？

# javascript - ajax 调用会成功返回重新加载的网页吗？

> ID：15252093
> 
> 赞同：1
> 
> 时间：2013-03-06T15:58:02.283
> 
> 标签：javascript, ajax, javascript-events

我有一个初学者问题。如果我使用 javascript 进行 ajax 调用，然后在 ajax 请求得到响应之前成功重新加载页面，响应是否仍然有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:00:11.990

这取决于您所说的“工作”是什么意思。请求仍然会被发送到服务器，服务器会返回一个响应，但是任何你指定在收到响应时执行的回调函数都不会运行，因为分配的函数对象会丢失当页面重新加载时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T15:59:24.847

不。

通过重新加载页面，所有 JavaScript（及其解析器/引擎）都将被终止、重置并再次初始化。因此，任何挂起的 (Ajax) 调用都会中止。因此，现有的调用将不再起作用。

此外，所有活动（HTTP）连接都（应该）被重置，因此服务器可能仍会处理请求（如果它按时到达），但由于连接中止，响应会丢失。

重新加载后这些东西不起作用的事实是一件好事：因为它会导致意外的、容易出错的情况！

# ios - 发布 HTTP 请求

> ID：15252104
> 
> 赞同：0
> 
> 时间：2013-03-06T15:58:19.717
> 
> 标签：ios, xcode

我正在尝试以这种方式向 Dropbox 发布 HTTP 请求：

```
//NSString *urlString = [NSString stringWithFormat:@"https://api.dropbox.com/1/oauth/request_token"];
NSString *urlString = [NSString stringWithFormat:@"https://api.dropbox.com/1/delta"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

//set headers

[request addValue:@"OAuth oauth_version=\"1.0\"" forHTTPHeaderField: @"Authorization"];

//create the body
NSMutableData *postBody = [NSMutableData data];

//post
[request setHTTPBody:postBody];

//get response
NSHTTPURLResponse* urlResponse = nil;  
NSError *error = [[NSError alloc] init];  
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];  
NSString *result = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
NSLog(@"Response Code: %d", [urlResponse statusCode]);
if ([urlResponse statusCode] >= 200 && [urlResponse statusCode] < 300) {
    NSLog(@"Response: %@", result);

    //here you get the response

} 
```

响应应该是 JSON 字符串。

参数在这里：[https ://www.dropbox.com/developers/core/api#delta](https://www.dropbox.com/developers/core/api#delta)

它提供了参数和版本，但我不知道如何设置它们。

# webdriver - Arquillian Drone 完全忽略 Before After BeforeClass AfterClass 注释

> ID：15252106
> 
> 赞同：1
> 
> 时间：2013-03-06T15:58:30.597
> 
> 标签：webdriver, jboss-arquillian

我正在尝试使用[Arquillian Drone](https://docs.jboss.org/author/display/ARQ/Drone)来驱动我的测试，但是，由于某种原因**，****注释`@Before`、、和被完全忽略`@After``@BeforeClass``@AfterClass`**。

我是这个 Java/jUnit/Arquillian 环境的新手（一直在使用 Python），所以我可能在这里犯了一些愚蠢的错误。

```
import org.jboss.arquillian.drone.api.annotation.Drone;
import org.jboss.arquillian.junit.Arquillian;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;

import com.eyereturn.warlock.client.pages.login.LoginPage;

@RunWith(Arquillian.class)
public class TestDroneLogin {

    @Drone
    private WebDriver driver;

    @Before
    public void setup(){
        driver.navigate().to("http://google.com");
    }

    @Test
    public void testInput(){
        driver.findElement(By.cssSelector("input#gbqfq"));
    }
} 
```

**arquillian.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<arquillian xmlns="http://jboss.org/schema/arquillian"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://jboss.org/schema/arquillian
        http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

    <extension qualifier="webdriver">
        <property name="browserCapabilities">chrome</property>
    </extension>

</arquillian> 
```

**pom.xml：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myproj</groupId>
    <artifactId>proj-integration-tests</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <name>Project Integration Tests</name>

    <properties>
        <maven.compiler.source>1.6</maven.compiler.source>
        <maven.compiler.target>1.6</maven.compiler.target>      
    </properties>

    <dependencies>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>2.31.0</version>
        </dependency>

        <!-- Arquillian Core dependencies -->
        <dependency>
            <groupId>org.jboss.arquillian</groupId>
            <artifactId>arquillian-bom</artifactId>
            <version>1.0.3.Final</version>
            <scope>compile</scope>
            <type>pom</type>
        </dependency>

        <!-- Arquillian Drone dependencies and Selenium dependencies -->
        <dependency>
          <groupId>org.jboss.arquillian.extension</groupId>
          <artifactId>arquillian-drone-bom</artifactId>
          <type>pom</type>
          <version>1.1.1.Final</version>
          <scope>compile</scope>
        </dependency>

        <!-- Arquillian Graphene Webdriver -->
        <dependency>
            <groupId>org.jboss.arquillian.graphene</groupId>
            <artifactId>graphene-webdriver</artifactId>
            <version>2.0.0.Alpha3</version>
            <type>pom</type>
            <scope>test</scope>
        </dependency>

        <!-- Arquillian JUnit Standalone -->
        <dependency>
            <groupId>org.jboss.arquillian.junit</groupId>
            <artifactId>arquillian-junit-standalone</artifactId>
            <version>1.0.3.Final</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:17:35.330

看起来这是[Arquillian Standalone](https://docs.jboss.org/author/display/ARQGRA2/Framework+Integration+Options)版本的一个持续问题。

该错误在[此处](https://issues.jboss.org/browse/ARQ-1070?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)公开，**但自 2012 年 8 月 14 日以来未受到任何关注**。

解决方法是使用**“Arquillian JUnit Container”**版本`pom.xml`而不是“Arquillian JUnit Standalone”：

```
 <!-- Arquillian JUnit Container -->
    <dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <version>1.0.3.Final</version>
        <scope>test</scope>
    </dependency> 
```

这似乎对我有用。

注意：使用`@BeforeClass`时`Drone`请注意[此错误](https://issues.jboss.org/browse/ARQ-1340)

# rspec - poltergeist 是否正确支持 capybara 的 should_not RSpec 匹配器？

> ID：15252111
> 
> 赞同：0
> 
> 时间：2013-03-06T15:58:43.600
> 
> 标签：rspec, capybara, poltergeist

根据 capybara 的自述文件：

> 以下两个语句在功能上是等效的：
> 
> ```
> page.should_not have_xpath('a')
> page.should have_no_xpath('a') 
> ```

但是，当尝试这样做时，这似乎并不正确。使用 capybara-webkit 时，这似乎工作正常：

```
visit dashboard_accounting_reports_path

click_link 'Delete'

page.should_not have_css('#reports .report') 
```

但是当使用 poltergeist 时，它经常会失败，这似乎是在说它在幕后使用`#has_css?`，实际上并不会等待给定的元素消失：

```
 Failure/Error: page.should_not have_css('#reports .report')
   expected #has_css?("#reports .report") to return false, got true 
```

如果我将断言改为这样读取，它似乎每次都成功：

```
page.should have_no_css('#reports .report') 
```

我疯了，还是这是 poltergeist 中的错误？我正在使用 PhantomJS 1.8.2、poltergeist 1.1.0 和 capybara 2.0.2。

`should_not have_css`这是示例的调试输出：http: [//pastebin.com/4ZtPEN5B](http://pastebin.com/4ZtPEN5B)

这是`should have_no_css`示例中的一个：http: [//pastebin.com/TrtURWcZ](http://pastebin.com/TrtURWcZ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:49:12.023

我想我发现了问题 - 我在我的 spec_helper.rb 中要求使用 'capybara/dsl' 而不是 'capybara/rspec'，因此`should_not`来自 Capybara::RSpecMatchers 的正确行为和错误消息未包含在该规范中。

编辑：事实证明，如果您需要“rspec/rails”，它会自动为您带来正确的水豚材料。但是如果你使用一些非标准的 RSpec 东西，比如在请求规范中使用 Capybara，你仍然需要在那里手动包含 Capybara::DSL 和 Capybara::RSpecMatchers。另见：[https ://github.com/rspec/rspec-rails/blob/master/Capybara.md](https://github.com/rspec/rspec-rails/blob/master/Capybara.md)

# jquery - Blueimp 文件上传在 IE 8 中没有发生任何事情

> ID：15252114
> 
> 赞同：4
> 
> 时间：2013-03-06T15:58:47.043
> 
> 标签：jquery, file-upload, blueimp

我在一个项目上使用 blueimp 文件上传插件，但在使用 IE8 时遇到了一些困难，主要是什么都没发生！

我的设置尽可能接近插件演示设置 - 文件包含在相同的顺序中，html 结构变化很小，css 是相同的等等。

在其他浏览器 + ie9 中，一切都按预期工作，但在 ie8 中，添加图像的按钮好像没有附加任何内容。

如果我在 ie9 中上传，然后使用开发工具将文档类型切换为 ie8，则可以成功从服务器检索图像。

我很难显示完整的代码，因为不幸的是文档非常复杂，但是页面位于此处： [http ://www.yoursplash.co.uk/index.php?route=product/product&product_id=108](http://www.yoursplash.co.uk/index.php?route=product/product&product_id=108)

这几乎是与文件上传相关的所有内容：

**这些是我为了让插件工作而包含的文件**

```
<script src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script>
<script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
<script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
<script src="catalog/view/javascript/jquery/blueimp/jquery.iframe-transport.js"></script>
<script src="catalog/view/javascript/jquery/blueimp/jquery.fileupload.js"></script>
<script src="catalog/view/javascript/jquery/blueimp/jquery.fileupload-fp.js"></script>
<script src="catalog/view/javascript/jquery/blueimp/jquery.fileupload-ui.js"></script>
<script src="catalog/view/javascript/jquery/blueimp/jquery.fileupload-jui.js"></script> 
```

**这是我自己的插件实现**

```
'use strict';
$(document).on('ready', function () { 
    $.ajax({
        url: '/index.php?route=product/userimage&usetype=get',
        dataType: 'json',
        context: $('#fileupload')[0]
    }).done(function (result) {
        $(this).fileupload('option', 'done').call(this, null, {result: result});
        if ($('#filesContainer > .template-download').length > 0)
        {
          $('a[href="#user-upload"]').removeClass('selected').siblings('a[href="#user-photos"]').addClass('selected');
          $('#user-upload').hide().siblings('#user-photos').fadeIn(); 
        };
    });
});

$('#fileupload').fileupload(
{
  url: '/index.php?route=product/userimage&usetype=put',
  type: 'POST',
  maxFileSize: 5000000,
  fileInput  : '#imgUp',
  acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
  process: [
      {
          action: 'load',
          fileTypes: /^image\/(gif|jpeg|png)$/,
          maxFileSize: 5000000 // 20MB
      }
  ],
  filesContainer: '#filesContainer'
})
.bind('fileuploadadded', function (e, data)
{
  $('a[href="#user-upload"]').removeClass('selected').siblings('a[href="#user-photos"]').addClass('selected');
  $('#user-upload').hide().siblings('#user-photos').fadeIn();
})
.bind('fileuploadcompleted', function (e, data) 
{ 
  return $('#filesContainer .uploadedImage').draggable({ containment : 'document', revert : true, appendTo : 'body', helper: function(e,ui){ return $('<img/>',{ src : $(e.target).data('src')}).css('width','150px'); } }).tooltip({ tooltipClass : 'image-gallery-tooltip' , position : { at: 'bottom center'} });
}); 
```

**这是我实现插件的 HTML**

```
 <form id="fileupload" action="//jquery-file-upload.appspot.com/" method="POST" enctype="multipart/form-data">
          <!-- Redirect browsers with JavaScript disabled to the origin page -->
          <noscript><input type="hidden" name="redirect" value="http://blueimp.github.com/jQuery-File-Upload/"></noscript>
          <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
          <div class="row fileupload-buttonbar">
              <div class="span7" style="height:30px;">
                  <p style="float:left;display:block;width:480px;margin-right:10px;padding:5px;">Select images from your computer and once uploaded you may use them in your design</p>
                  <!-- The fileinput-button span is used to style the file input field as button -->
                  <span class="btn btn-success fileinput-button">
                      <i class="icon-plus icon-white"></i>
                      <span>Add images..</span>
                      <input type="file" name="files[]" id="imgUp" multipart>
                  </span>
              </div>
              <!-- The global progress information -->
              <div class="span5 fileupload-progress fade">
                  <!-- The global progress bar -->
                  <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                      <div class="bar" style="width:0%;"></div>
                  </div>
                  <!-- The extended global progress information -->
                  <div class="progress-extended">&nbsp;</div>
              </div>
          </div>
          <!-- The loading indicator is shown during file processing -->
          <div class="fileupload-loading"></div>
      </form> 
```

任何帮助都会得到很大的帮助——我差点用这个把头发扯掉，因为似乎没有什么好的理由让它不起作用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-10T14:08:55.483

对于遇到与我在处理此问题时遇到的相同问题的任何人，该问题与 BlueImp 文件上传器无关，而是 IE < 9 的安全功能，它不允许对文件上传按钮进行编程“点击”。

The actual cause of the problem was that I had hidden the form input so that I could present my own styled 'button' and triggered the click on the input using jQuery - my solution was to instead set the form inputs' opacity to 0 using CSS, and then position it over my 'pretty' button using absolute positioning.

# c# - ConcurrentDictionary<> 对单线程性能的误解？

> ID：15252115
> 
> 赞同：23
> 
> 时间：2013-03-06T15:58:49.637
> 
> 标签：c#, .net-4.0, task-parallel-library, concurrentdictionary

相关简要信息：

*AFAIK，并发堆栈、队列和包类在内部使用链表实现。
而且我知道争用要少得多，因为每个线程都负责自己的链表。无论如何，我的问题是关于`ConcurrentDictionary<,>`*

但我正在测试这段代码：（单线程）

```
Stopwatch sw = new Stopwatch();
sw.Start();

    var d = new ConcurrentDictionary < int,  int > ();
    for(int i = 0; i < 1000000; i++) d[i] = 123;
    for(int i = 1000000; i < 2000000; i++) d[i] = 123;
    for(int i = 2000000; i < 3000000; i++) d[i] = 123;
    Console.WriteLine("baseline = " + sw.Elapsed);

sw.Restart();

    var d2 = new Dictionary < int, int > ();
    for(int i = 0; i < 1000000; i++)         lock (d2) d2[i] = 123;
    for(int i = 1000000; i < 2000000; i++)   lock (d2) d2[i] = 123;
    for(int i = 2000000; i < 3000000; i++)   lock (d2) d2[i] = 123;
    Console.WriteLine("baseline = " + sw.Elapsed);

sw.Stop(); 
```

结果：（*多次测试，相同的值（+/-））。*

```
baseline = 00:00:01.2604656
baseline = 00:00:00.3229741 
```

问题 ：

***在单线程*环境中是**什么**让`ConcurrentDictionary<,>` *速度*慢得多？**

 ****我的第一直觉是，这`lock(){}`总是会更慢。但显然不是。*

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-06T16:04:38.867

好吧，`ConcurrentDictionary`它允许多个*线程*使用它。对我来说，这似乎完全合理，这需要更多的内部管理，而不是*假设*它可以逃脱而不用担心来自多个线程的访问。如果反过来，我会感到非常惊讶——如果*更安全*的版本总是*更快*，你为什么要使用不太安全的版本？

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-06T16:05:49.850

最可能的原因只是比相同操作`ConcurrentDictionary`具有更多开销。`Dictionary`如果您深入研究来源，这显然是正确的

*   它为索引器使用锁
*   它使用易失性写入
*   它必须对在.Net中不能保证是原子的值进行原子写入
*   它在核心添加例程中有额外的分支（是否取锁，是否进行原子写入）

无论使用多少线程，都会产生所有这些成本。这些费用可能单独很小，但不是免费的，并且会随着时间的推移而增加

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-11-13T08:46:45.237

**.NET 5 的更新：**我将保留之前的答案，因为它仍然与较旧的运行时相关，但 .NET 5 似乎已经进一步改进`ConcurrentDictionary`到读取 via`TryGetValue()`实际上比 normal 更快的程度`Dictionary`，如结果所示下面（COW 是我的`CopyOnWriteDictionary`，详细如下）。做你想做的:)

```
|          Method |        Mean |     Error |    StdDev |    Gen 0 |    Gen 1 |    Gen 2 | Allocated |
|---------------- |------------:|----------:|----------:|---------:|---------:|---------:|----------:|
| ConcurrentWrite | 1,372.32 us | 12.752 us | 11.304 us | 226.5625 |  89.8438 |  44.9219 | 1398736 B |
|        COWWrite | 1,077.39 us | 21.435 us | 31.419 us |  56.6406 |  19.5313 |  11.7188 |  868629 B |
|       DictWrite |   347.19 us |  5.875 us |  5.208 us | 124.5117 | 124.5117 | 124.5117 |  673064 B |
|  ConcurrentRead |    63.53 us |  0.486 us |  0.431 us |        - |        - |        - |         - |
|         COWRead |    81.55 us |  0.908 us |  0.805 us |        - |        - |        - |         - |
|        DictRead |    70.71 us |  0.471 us |  0.393 us |        - |        - |        - |         - | 
```

**以前的答案，仍然与 < .NET 5 相关：**

自从我最初发布此答案以来，最新版本`ConcurrentDictionary`已显着改进。它不再锁定读取，因此提供与我的`CopyOnWriteDictionary`实现几乎相同的性能配置文件，但具有更多功能，因此我建议您在大多数情况下使用它。仍然比or`ConcurrentDictionary`多 20-30% 的开销，因此性能敏感的应用程序仍然可以从它的使用中受益。`Dictionary``CopyOnWriteDictionary`

你可以在这里阅读我的无锁线程安全的写时复制字典实现：

[http://www.singulink.com/CodeIndex/post/fastest-thread-safe-lock-free-dictionary](http://www.singulink.com/CodeIndex/post/fastest-thread-safe-lock-free-dictionary)

它目前仅附加（具有替换值的能力），因为它旨在用作永久缓存。如果您需要删除，那么我建议使用`ConcurrentDictionary`，因为添加它`CopyOnWriteDictionary`会消除由于添加锁定而导致的所有性能提升。

`CopyOnWriteDictionary`对于快速突发的写入和查找非常快，通常以几乎标准的`Dictionary`速度运行而无需锁定。如果您偶尔写作并经常阅读，这是最快的选择。

我的实现通过在不对字典进行更新的正常情况下消除对任何读取锁的需求来提供最大的读取性能。权衡是在应用更新后需要复制和交换字典（这是在后台线程上完成的），但如果你不经常写或者你只在初始化期间写一次，那么权衡绝对是值得的它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-27T04:54:15.577

> ConcurrentDictionary 与 Dictionary
> 
> 通常，在您从多个线程同时添加和更新键或值的任何场景中使用 System.Collections.Concurrent.ConcurrentDictionary。在涉及频繁更新和相对较少读取的场景中，ConcurrentDictionary 通常提供适度的好处。在涉及多次读取和多次更新的场景中，ConcurrentDictionary 通常在具有任意数量内核的计算机上明显更快。
> 
> 在涉及频繁更新的场景中，您可以在 ConcurrentDictionary 中提高并发度，然后在具有更多内核的计算机上测量性能是否会提高。如果更改并发级别，请尽可能避免全局操作。
> 
> 如果您只读取键或值，则字典会更快，因为如果字典没有被任何线程修改，则不需要同步。

链接：[https ://msdn.microsoft.com/en-us/library/dd997373%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/dd997373%28v=vs.110%29.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T16:05:21.473

在`ConcurrentDictionary<>`创建时会创建一组内部锁定对象（这由`concurrencyLevel`等因素决定）——这组锁定对象用于控制对一系列细粒度锁中内部存储桶结构的访问。

在单线程场景中，不需要锁，因此获取和释放这些锁的额外开销可能是您看到的差异的根源。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-02T09:24:18.410

如果所有操作都在单个线程中完成，则在一个线程中使用 ConcurrentDictionary 或同步访问是没有意义的。当然字典会打败 ConcurrentDictionary。

很大程度上取决于使用模式和线程数。这是一个测试，表明 ConcurrentDictionary 的性能优于字典和锁，并随着线程数的增加而增加。

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Diagnostics;
using System.Threading;

namespace ConsoleApp
{

    class Program
    {

        static void Main(string[] args)
        {
            Run(1, 100000, 10);
            Run(10, 100000, 10);
            Run(100, 100000, 10);
            Run(1000, 100000, 10);
            Console.ReadKey();
        }

        static void Run(int threads, int count, int cycles)
        {
            Console.WriteLine("");
            Console.WriteLine($"Threads: {threads}, items: {count}, cycles:{cycles}");

            var semaphore = new SemaphoreSlim(0, threads);

            var concurrentDictionary = new ConcurrentDictionary<int, string>();

            for (int i = 0; i < threads; i++)
            {
                Thread t = new Thread(() => Run(concurrentDictionary, count, cycles,  semaphore));
                t.Start();
            }

            Thread.Sleep(1000);

            var w = Stopwatch.StartNew();

            semaphore.Release(threads);

            for (int i = 0; i < threads; i++)
                semaphore.Wait();

            Console.WriteLine($"ConcurrentDictionary: {w.Elapsed}");

            var dictionary = new Dictionary<int, string>();
            for (int i = 0; i < threads; i++)
            {
                Thread t = new Thread(() => Run(dictionary, count, cycles, semaphore));
                t.Start();
            }

            Thread.Sleep(1000);

            w.Restart();

            semaphore.Release(threads);

            for (int i = 0; i < threads; i++)
                semaphore.Wait();

            Console.WriteLine($"Dictionary: {w.Elapsed}");

        }

        static void Run(ConcurrentDictionary<int, string> dic, int elements, int cycles, SemaphoreSlim semaphore)
        {
            semaphore.Wait();
            try
            {
                for (int i = 0; i < cycles; i++)
                    for (int j = 0; j < elements; j++)
                    {
                        var x = dic.GetOrAdd(i, x => x.ToString());
                    }
            }
            finally
            {
                semaphore.Release();
            }
        }

        static void Run(Dictionary<int, string> dic, int elements, int cycles, SemaphoreSlim semaphore)
        {
            semaphore.Wait();
            try
            {
                for (int i = 0; i < cycles; i++)
                    for (int j = 0; j < elements; j++)
                        lock (dic)
                        {
                            if (!dic.TryGetValue(i, out string value))
                                dic[i] = i.ToString();
                        }
            }
            finally
            {
                semaphore.Release();
            }
        }
    }
} 
```

线程：1，项目：100000，周期：10 ConcurrentDictionary：00：00：00.0000499 字典：00：00：00.0000137

线程：10，项目：100000，周期：10 ConcurrentDictionary：00：00：00.0497413 字典：00：00：00.2638265

线程：100，项目：100000，周期：10 ConcurrentDictionary：00：00：00.2408781 字典：00：00：02.2257736

线程：1000，项目：100000，周期：10 ConcurrentDictionary：00：00：01.8196668 字典：00：00：25.5717232

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-16T18:09:45.897

> `ConcurrentDictionary<,>`在单线程环境中是 什么让速度变慢了？

在多线程环境中使其速度更快所需的机器开销。

> 我的第一直觉是，这`lock(){}`总是会更慢。但显然不是。

A`lock`在没有竞争的情况下非常便宜。你可以`lock`每秒一百万次，你的 CPU 甚至都不会注意到，只要你是从一个线程中做的。在多线程程序中扼杀性能的是锁的争用。当多个线程激烈竞争同一个`lock`时，几乎所有线程都必须等待持有锁的幸运者释放它。这就是`ConcurrentDictionary`具有粒度锁定实现的 . 你拥有的并发性越多（处理器/内核越多），它就越闪耀。

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2015-06-17T14:16:59.250

你的测试是错误的：你必须先停止秒表！

```
 Stopwatch sw = new Stopwatch();      
        sw.Start();
        var d = new ConcurrentDictionary<int, int>();
        for (int i = 0; i < 1000000; i++) d[i] = 123;
        for (int i = 1000000; i < 2000000; i++) d[i] = 123;
        for (int i = 2000000; i < 3000000; i++) d[i] = 123;
        sw.Stop();
        Console.WriteLine("baseline = " + sw.Elapsed);

        sw.Start();
        var d2 = new Dictionary<int, int>();
        for (int i = 0; i < 1000000; i++) lock (d2) d2[i] = 123;
        for (int i = 1000000; i < 2000000; i++) lock (d2) d2[i] = 123;
        for (int i = 2000000; i < 3000000; i++) lock (d2) d2[i] = 123;
        sw.Stop();
        Console.WriteLine("baseline = " + sw.Elapsed);

        sw.Stop(); 
```

- 输出 ：***

# ruby - 使用 flexmock 的单元测试没有按预期失败

> ID：15252117
> 
> 赞同：0
> 
> 时间：2013-03-06T15:59:00.527
> 
> 标签：ruby, unit-testing, mocking

我正在尝试将*flexmock*与*test/unit*一起使用来为我的单元测试创​​建模拟对象。这是我正在测试的课程：

```
class Cave
  def hunt
    # not yet implemented
  end
end 
```

这是我的单元测试（请注意，此方法只是测试用例中众多方法之一）：

```
require 'test/unit'
require 'flexmock/test_unit'
require 'cave'

def test_play
  hunter = flexmock()

  cave = Cave.new
  cave.hunter = hunter

  hunter.should_receive(:turn).with(FlexMock.any).at_least.once

  cave.hunt
end 
```

该测试应该验证该`hunt`方法是否将`turn`消息发送到分配给`cave`'`hunter`属性的对象至少一次。

如果我正确理解了文档，*flexmock*会与单元测试框架结合并自动验证测试中定义的期望。因此，我预计上述测试会失败，因为该方法`hunt`尚未发送`turn`。但是，测试成功。

我错过了什么吗？

*更新*：我设置了一个新文件，其中仅包含一个最小测试，以查看 flex mock 是否可以按预期工作。以下测试产生预期结果，即失败：

```
require 'test/unit'
require 'flexmock/test_unit'

class TestFoo < Test::Unit::TestCase
  def test_foo
    m=flexmock()
    m.should_receive(:bar).and_return(17).once
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:28:17.390

我认为您的设置有问题！

按照文档和您的示例，我得到以下输出：

```
ruby test_foo.rb 
Run options: 

# Running tests:

[1/1] TestFoo#test_foo = 0.00 s
  1) Failure:
test_foo(TestFoo) [/Users/paule/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/flexmock-1.3.1/lib/flexmock/test_unit_integration.rb:53]:
in mock 'unknown': Method 'bar(*args)' called incorrect number of times
1 matching call expected
0 matching calls found
No messages have been received

Finished tests in 0.011163s, 89.5817 tests/s, 0.0000 assertions/s.
1 tests, 0 assertions, 1 failures, 0 errors, 0 skips

ruby -v: ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.2.1] 
```

这表明使用 ruby​​ 2.0.0p0 一切正常。

# android - 在 Android 中用 HttpPost 替换 PostMethod

> ID：15252123
> 
> 赞同：1
> 
> 时间：2013-03-06T15:59:14.363
> 
> 标签：android, apache, weibo

在将微博的 Android SDK 集成到应用程序中时，我发现`HttpClient`它包含的类使用了 Android 非常不喜欢的过时库（实际上我认为他们只是将 Java SDK 粘贴到 Android Eclipse 项目中并发布了它）。这个库似乎只在微博中执行一个功能，即组装 POST 请求（使用`PostMethod`类）并将它们发送到微博服务器。`HttpPost`我兴高采烈地假设用 Android 中包含的标准 Apache 替换它会相对简单。

不幸的是，该`Part`课程似乎没有直接的等价物。至少有些`Part`s 可以用`BasicNameValuePair`类代替，但是`Part`微博有一个自定义的看起来更像`ByteArrayEntity`.

检查称为`multPartUrl`（不是错字）的两种方法

[HttpClient的微博来源](http://www.java2s.com/Open-Source/Android/Client/sipadan-weibo/weibo4andriod/http/HttpClient.java.htm)

第一个在此处复制（第二个非常相似，但粘贴了不同类型的内容）：

```
public Response multPartURL(String url,  PostParameter[] params,ImageItem item,boolean authenticated) throws WeiboException{
  PostMethod post = new PostMethod(url);
  try {
    org.apache.commons.httpclient.HttpClient client = new org.apache.commons.httpclient.HttpClient();
    long t = System.currentTimeMillis();
    Part[] parts=null;
    if(params==null){
      parts=new Part[1];
    }else{
      parts=new Part[params.length+1];
    }
    if (params != null ) {
      int i=0;
        for (PostParameter entry : params) {
          parts[i++]=new StringPart( entry.getName(),(String)entry.getValue());
      }
        parts[parts.length-1]=new ByteArrayPart(item.getContent(), item.getName(), item.getImageType());
      }
    post.setRequestEntity( new MultipartRequestEntity(parts, post.getParams()) );
     List<Header> headers = new ArrayList<Header>();

     if (authenticated) {
              if (basic == null && oauth == null) {
              }
              String authorization = null;
              if (null != oauth) {
                  // use OAuth
                  authorization = oauth.generateAuthorizationHeader( "POST" , url, params, oauthToken);
              } else if (null != basic) {
                  // use Basic Auth
                  authorization = this.basic;
              } else {
                  throw new IllegalStateException(
                          "Neither user ID/password combination nor OAuth consumer key/secret combination supplied");
              }
              headers.add(new Header("Authorization", authorization));
              log("Authorization: " + authorization);
          }
      client.getHostConfiguration().getParams().setParameter("http.default-headers", headers);
    client.executeMethod(post);

    Response response=new Response();
    response.setResponseAsString(post.getResponseBodyAsString());
    response.setStatusCode(post.getStatusCode());

    log("multPartURL URL:" + url + ", result:" + response + ", time:" + (System.currentTimeMillis() - t));
      return response;
  } catch (Exception ex) {
     throw new WeiboException(ex.getMessage(), ex, -1);
  } finally {
    post.releaseConnection();
  }
} 
```

可以看出，a`Part`中添加了若干个 s `MultiPartRequestEntity`，其中最后一个是字节数组或文件。

*   什么（如果有的话）相当于`MultiPartRequestEntity`最新的 Apache 库中的什么？
*   有没有办法将字节数组添加到 a `UrlEncodedFormEntity`？
*   有没有一种方法可以将名称-值对添加到 a 中`ByteArrayEntity`？
*   还有什么我完全想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:09:27.120

到目前为止，我发现的最佳答案似乎是基于这个问题的答案：

[使用 Android SDK 发布多部分请求](https://stackoverflow.com/questions/2017414/post-multipart-request-with-android-sdk)

这显示了从哪里获得微博使用的库的非过时替代品。

然后我换了

```
Part[] parts=null;
if(params==null){
  parts=new Part[1];
}else{
  parts=new Part[params.length+1];
}
if (params != null ) {
  int i=0;
    for (PostParameter entry : params) {
      parts[i++]=new StringPart( entry.getName(),(String)entry.getValue());
  }
    parts[parts.length-1]=new ByteArrayPart(item.getContent(), item.getName(), item.getImageType());
  }
post.setRequestEntity( new MultipartRequestEntity(parts, post.getParams()) ); 
```

和

```
 MultipartEntity entity = new MultipartEntity();
        if(params!=null) {
            for (PostParameter entry : params) {
                entity.addPart(entry.getName(), new StringBody(entry.getValue()));
            }
        }

        entity.addPart("filename", new ByteArrayBody(item.getContent(), item.getImageType(), item.getName())); 
```

我不是 100% 确定最后一行，因为我是基于微博自己的类，它设置了一个`filename`参数；然而，它很可能被称为别的东西，虽然不清楚。

然后，我将 替换为`HttpClient`an`AndroidHttpClient`并使用标准`AndroidHttpClient`方法来获取状态代码，并将 an`InputStream`替换为来自实体的内容；这个流，我传入微博`Response`类并读入它作为主要成员的字符串。这些假设可能是错误的，但我会继续研究它。

# spring - Spring MVC HTTP 404 错误

> ID：15252133
> 
> 赞同：0
> 
> 时间：2013-03-06T15:59:52.273
> 
> 标签：spring, jakarta-ee, servlets, spring-mvc

我学习 SpringMVC，所以我从[HERE](http://viralpatel.net/blogs/spring-3-mvc-create-hello-world-application-spring-3-mvc/)关注 Spring 3.0 MVC 系列。

如您所见，我完成了 Part1、Part2，现在我正在 Part3 学习如何使用 Spring 3 MVC 处理表单。

但是当我尝试运行我的应用程序时，我得到了这个 HTTP 404 错误。项目结构和此错误您可以在下图中看到。

我该如何解决这个问题？

![在此处输入图像描述](../Images/f7b147b4a82c8fa554e30557c5eca943.png)

**ContactController.java 代码：**

```
package net.viralpatel.spring3.controller;

import net.virtalpatel.spring3.form.Contact;

import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.SessionAttributes;
import org.springframework.web.servlet.ModelAndView;

@Controller
@SessionAttributes
public class ContactController {

@RequestMapping(value = "/addContact", method = RequestMethod.POST)
public String addContact(@ModelAttribute("contact")
Contact contact, BindingResult result) {

    System.out.println("First Name:" + contact.getFirstname() + 
                "Last Name:" + contact.getLastname());

    return "redirect:contacts.html";
}

@RequestMapping("/contacts")
public ModelAndView showContacts() {

    return new ModelAndView("contact", "command", new Contact());
}} 
```

**spring-servlet.xml 代码：**

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

http://www.springframework.org/schema/context

http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan
    base-package="net.viralpatel.spring3.controller" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

****index.jsp 代码：****

```
<jsp:forward page="contacts.html"></jsp:forward> 
```

**web.xml 代码：**

```
<?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee                     http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>Spring3MVC</display-name>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:09:04.093

你的`index.jsp`被转发到`contacts.html`。

但是你的 spring 配置没有映射`/contacts.html`，你已经映射`/contacts`了。

您需要将`/contacts`映射更改为

```
@RequestMapping("/contacts.html")
public ModelAndView showContacts() {
    return new ModelAndView("contact", "command", new Contact());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:44:18.493

只需更改`contact`为`contacts`

改变

`return new ModelAndView("contact", "command", new Contact());`

到

`return new ModelAndView("contacts", "command", new Contact());`

问题出在您的转发中，它将检查contact.jsp，但实际上您有contacts.jsp（您的后缀属性为 .jsp ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:23:42.107

> localhost:8080/Spring3MVC/index.jsp 如您所见，我首先尝试打开 index.jsp，然后重定向到 contact.jsp – Zookey 44 分钟前

我想你把它弄混了。1）有一个错字，你说contact.jsp，但文件名是contacts.jsp（eclipse中的文件名）2）contacts.html文件在哪里？我建议，您首先返回到 jsp，然后查看是否可以让控制器返回 jsp，然后在创建后尝试重定向到 html 文件。

# xamarin - Xamarin c# 代码的 IL 大小？

> ID：15252135
> 
> 赞同：9
> 
> 时间：2013-03-06T15:59:57.197
> 
> 标签：xamarin, xamarin.ios, xamarin.android, xamarin.mac

[Xamarin](https://store.xamarin.com/)对我来说似乎是跨平台开发的不错选择。但是，有初学者和独立许可证。主要区别在于：

> Xamarin Starter 允许开发人员构建和发布简单的应用程序，其中包含不超过 32k 的已编译用户代码 (IL)

我想知道，IL 的 32K 是一个非常严格的瓶颈吗？我可以从 32K 代码中得到什么？

如果您尝试过 Xamarin 入门版，大小限制对您来说是个问题吗？您开发什么样的应用程序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T18:41:17.043

**更新 (2016/03/31)：使用 Xamarin.iOS 9.6.1 不再存在该限制**

从[Xamarin.iOS 9.8.1 开始](https://developer.xamarin.com/releases/ios/xamarin.ios_9/xamarin.ios_9.6/)，不再有**Starter**版本，替换它的新**社区版本****没有**大小限制。

**更新：Xamarin.iOS 8.4 中的限制增加到 128KB**

**更新：Xamarin.iOS 6.2 中的限制增加到 64KB**

请记住，它是 32KB 的**用户**代码。

您可以获得所有 .NET 类库 (BCL)、iOS API、MonoTouch.Dialog（用于 UI）、Web 服务、数据（例如 sqlite）……甚至是单元测试代码。这些都不算是用户代码（因此它们不属于 32KB 限制的一部分）。

例如，一个 hello world 应用程序（不是一个很好的基准，它将主要是生成的代码）将占用大约 4KB。

了解在 iOS 上的可能性和了解 C# 开发的更好方法是查看github 上提供的[示例。](https://github.com/xamarin/monotouch-samples)他们中的大多数都符合这个限制。

# asp.net-mvc - MVC 剃须刀布局 - 从视图修改

> ID：15252136
> 
> 赞同：0
> 
> 时间：2013-03-06T16:00:01.270
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor, viewmodel, asp.net-mvc-viewmodel

这是我的布局页面：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset='utf-8'>
    <title>@ViewBag.Title</title>
</head>
<body>       
    @Html.ActionLink("Home", "Index", "Home", null, new { @class = "selected"})
    @Html.ActionLink("Users", "Index", "User")
    @Html.ActionLink("Customers", "Index", "ProductCompany")

    @RenderBody()
</body>
</html> 
```

我想根据服务器端加载的视图修改 actionlink“selected”类。我正在寻找可用的选项。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:09:42.157

我认为您可以发送类名`ViewBag`并将其设置如下；

```
@Html.ActionLink("Home", "Index", "Home", null, new { @class = @ViewBag.myClass}) 
```

# c++ - 在 C/C++ 中监视变量访问

> ID：15252137
> 
> 赞同：8
> 
> 时间：2013-03-06T16:00:02.877
> 
> 标签：c++, c, clang, code-coverage

我正在研究多线程代码的覆盖率标准，作为它的一部分，我想记录对变量的访问。例如，在下面的代码中，我想记录变量`x`被写入`y, z, a[i],`和 i 被读取。

```
x = y * (int)z + a[i] 
```

我一直在考虑使用 Clang 的 RecursiveASTVisitor 并修改源以包含录制功能。但是，我不确定这是否是一种明智的方法，因为我对 Clang 如何工作的理解非常不完整。

目前，当我找到一个语句时，我会检查它是否是`BinaryOperator, UnaryOperator, Cast, or DeclRefExpr`. （一旦我掌握了基础知识，我将扩展它的能力。）如果是，`BinaryOperator, UnaryOperator, or Cast`我检查表达式的子表达式。如果它是 DeclRefExpr，我可以检查表达式是左值还是右值（再次，现在简化），但是一旦我找到 DeclRefExpr，它们总是左值。为了确定它们是否被使用，因为`lvalues or rvalues`我必须检查它的父级，如果它是左值或值转换，它被用作右值。

我非常觉得我对这个问题采取了错误的方法，因为我只能看到它变得更加复杂，因为我必须考虑更复杂的代码。

有没有更好的方法来解决这个问题？

谢谢

**编辑**

我不打算静态地记录这些信息。我打算找到变量的用途并插入代码，这些代码将在代码运行时记录对这些变量的访问。

例如，给定上面的代码（`x = y * (int)z + a[i];`），我想产生类似的东西

```
x = y * (int)z + a[i];
recordAccess(<file>, <line>, "x",    &x,    WRITE);
recordAccess(<file>, <line>, "y",    &y,    READ);
recordAccess(<file>, <line>, "z",    &z,    READ);
recordAccess(<file>, <line>, "a[i]", &a[i], READ);
recordAccess(<file>, <line>, "i",    &i,    READ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:29:44.553

正如其他人所指出的，混叠使这成为不可能。不可能对代码进行静态分析来回答您感兴趣的问题。如果有可能获取源代码文件并仅通过分析语法来确定输出，那么编译器将生成结果程序的输出，而不是编译程序的输出。简而言之，您正在尝试回答[停机问题](http://en.wikipedia.org/wiki/Halting_problem)。

动态分析是您真正需要回答您最可能感兴趣的问题。多线程软件的动态分析已经有很大的市场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:08:04.957

这里的主要问题是您没有考虑混叠。您将只能记录简单、直接的访问。

但在这种情况下，一个简单的表达式 AST 访问者是主要的方法。但是 Clang 的 RecursiveASTVisitor 应该能够从记忆中为您减少废话并允许您直接访问最终的变量节点。毕竟，它应该访问每个 AST 节点。

# opencv - 指纹细化代码保持脊的连续性

> ID：15252139
> 
> 赞同：0
> 
> 时间：2013-03-06T16:00:08.120
> 
> 标签：opencv, fingerprint

我正在尝试开发一个涉及指纹匹配的项目。现在，我被困在指纹细化阶段。我正在使用 OpenCV 和 c++ Visual Studio 2010 对我的项目进行编码。

我尝试了 erode() 函数，但它不能保持脊线的连续性。我还尝试了以下张素细化算法，

[http://opencv-code.com/quick-tips/implementation-of-thinning-algorithm-in-opencv/](http://opencv-code.com/quick-tips/implementation-of-thinning-algorithm-in-opencv/)

但是，这显示了内存位置的异常。我不知道如何继续，我被这一步困住了。

请帮助我提供指纹变薄的代码+同时保持脊的连续性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:32:36.563

如果您只是在寻找提取的代码示例，SourceAFIS（BSD 许可证）从全灰度变为二值化并通过一些伪影修剪进行细化，然后识别细节。它是用 c# 编写的，但它可能会给你一些好主意。

# c# - 以编程方式将文件从 sharepoint 库文件夹归档到不同库中的另一个文件夹

> ID：15252140
> 
> 赞同：1
> 
> 时间：2013-03-06T16:00:09.213
> 
> 标签：c#, sharepoint-2010

我需要你的帮助。我有一个名为 Library1 的 SharePoint 库，它有一些文件夹，其中包含文件。我想根据到期日期将这些文件从 library1 移动到 library2。

```
Library1
   Folder1
       file1
       file2
       File3

Library2 
```

谁能告诉我如何将文件从一个库移动到各自文件夹中的另一个库并将它们从原始库中删除？

# wordpress - 从 wordpress 的导航菜单中删除页面标题

> ID：15252143
> 
> 赞同：0
> 
> 时间：2013-03-06T16:00:15.933
> 
> 标签：wordpress

我们有一个使用 wordpress 构建的网站 www.bosworthsgc.co.uk

我们制作了一些自定义 jpeg，我已将其添加到菜单中

然而，页面的原始措辞也出现了

例如，植物选项卡上的 - 以及带有徽标和植物字样的 jpeg，还有我需要删除的植物字样

是否有可用的插件可以执行此操作或其他方式执行此操作

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:13:38.330

查看 style.css 并找到读取的选择器；

```
.tiled-menu > li > .menu-item-wrap > a{
} 
```

并添加 text-indent: -9000em; 所以它读起来像这样；

```
.tiled-menu > li > .menu-item-wrap > a{    
  color: #FFFFFF;
  height: 100%;
  left: 0;
  padding: 8px 13px;
  position: absolute;
  text-indent: -9000em;
  top: 0;
  width: 100%;
} 
```

简单地从 li 项中删除名称将阻止禁用 CSS 的人查看菜单项，并且对于使用屏幕阅读器的用户来说并不酷。

# php - PHP Booking System 自动更新 MySQL 数据库，无需任何用户交互。

> ID：15252145
> 
> 赞同：1
> 
> 时间：2013-03-06T16:00:24.143
> 
> 标签：php, mysql, date

我为一家汽车租赁公司创建了一个预订系统，但在设置汽车可用性时遇到了问题。

其工作原理的一个简短示例是，当一辆汽车被预订一空时，它会`yes`在名为`bookedout`

好的，举例来说，有 10 辆汽车（这小得不切实际，但说明了这一点）

其中1辆是奥迪R8。

今天的日期是 2012 年 3 月 6 日。

用户在 3 月 26 日至 3 月 31 日期间预订了汽车。但是他们今天通过网站进行了预订。我不能立即将该`bookedout`值设置为`yes`，否则网站实际上会认为该车在 3 月 6 日至 3 月 31 日期间不可用。

这种情况会损失公司的资金。

所以我正在寻找类似服务器上的脚本，检查当前日期，然后每天检查数据库。例如，如果有一个预定从今天开始，它将更改数据库中的值，因此从这一天开始无法预订汽车。

反过来，我也可以对其进行调整以将值更改回汽车应归还的日期。

我并不是专门寻找代码（尽管我不会拒绝示例），这只是解决此类问题的起点，因为我以前从未这样做过。

**基本上，我需要一种在特定日期触发查询的方法，而无需任何用户交互。**

任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T16:09:11.677

尽管我不打算发布任何代码，因为我认为没有必要回答这个特定的问题，但我会以答案的形式为你补充更多内容。

您的数据库结构应如下所示（为简洁起见，汽车租赁公司需要的许多字段 - 例如里程、损坏等 - 都被省略了）：

**汽车**

*   car_id
*   制作
*   模型
*   年

**顾客**

*   客户ID
*   名
*   姓
*   电子邮件地址

**预订**

*   预订编号
*   car_id
*   客户ID
*   开始日期
*   结束日期

这个想法是您永远不会使用`car`. 相反，您创建一个`reservation`并设置为预订日期。`start_date``end_date`

您要检查在给定日期范围内可用的汽车的查询将是：

```
SELECT
    c.car_id
FROM
    cars c 
    LEFT JOIN reservations r ON (
       c.car_id = r.car_id
       AND r.start_date <= $reservationEndDate
       AND r.end_date >= $reservationStartDate
    )
WHERE
    r.reservation_id IS NULL 
```

使用此模型，您无需担心运行基于时间的作业来更新汽车预留状态。*不过，为了优化您的应用程序，您可能会运行更新汽车状态的日常作业，以便您可以快速找出今天*有多少汽车可用。

**附加说明**

正如 NB 在评论中指出的那样 - 您需要确保您的应用程序不允许在预订表中出现冲突的日期范围。没有唯一索引可以解决此问题，因此您需要在应用程序逻辑中处理此问题 - 请注意竞争条件。一个可能的解决方案是，一旦有人在某个日期范围内查看汽车，就创建一个*临时预订。*

**另一个附加说明**

NB 还有一个很好的建议来避免上述问题：使用数据库触发器在服务器端验证它。如果创建了另一个冲突的预订，数据库可以拒绝触发器中的 INSERT。这个解决方案很可能是最好的，因为它使验证尽可能接近数据（所以你不能在你的应用程序中“忘记”它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:08:36.107

您问题的字面答案是[cron](http://en.wikipedia.org/wiki/Cron)（假设您在 *nix 系统上运行）。

但是，您真的不想这样做 - 它非常脆弱，因为您仍然必须在运行 cron 作业时查询带有预订的表；这意味着现在有 3 个地方知道汽车预订是如何工作的（cron 作业、预订表和您的应用程序）。

通过将汽车加入到预订表中，说汽车无法预订要简单得多。如果在给定日期有有效预订，则可以认为该车不可用。

对您的架构做出一些假设，它可能类似于

```
select 'booked'
from   cars c, 
       bookings b
where  c.car_id = b.car_id
and    b.start_date < ?required_date 
and    b.end_date   > ?required_date
union
select 'free'
from   cars c, 
       bookings b
where  c.car_id = b.car_id
and    b.start_date >= ?required_date 
or    b.end_date   <= ?required_date 
```

# r - 如何利用包 ggplot2 用 R 绘制地图

> ID：15252146
> 
> 赞同：0
> 
> 时间：2013-03-06T16:00:25.453
> 
> 标签：r, graphics, maps, ggplot2

我发现[这里](http://rpsychologist.com/parsing-data-from-a-text-file-and-plotting-where-people-live-using-ggplot2-and-openstreetmaps/)的帖子很有趣。但是，我的数据略有不同，因此我需要进行一些更改才能使其正常工作。基本上，我被困在最后一部分：

```
autoplot(mp) +
       geom_point(aes(x,y, size=people, color=people),
                  alpha = I(8/10), data=df.coords) +
       opts(axis.line=theme_blank(),axis.text.x=theme_blank(),
       axis.text.y=theme_blank(),axis.ticks=theme_blank(),
       axis.title.x=theme_blank(),
       axis.title.y=theme_blank()) +
      scale_size_continuous(range= c(1, 25)) + 
       scale_colour_gradient(low="blue", high="red") +
       opts(title="Where do we live?") 
```

就我而言，我根本不使用变量 x, y。我所拥有的只是一个 .CSV 文件（引用如下），我需要从中提取变量“发生”和“纬度/经度”，然后适当地使用它们来绘制地图：

```
name    occurences  country.etc     pop     lat     long    capita
Uppsala 2           Sweden          128374  59.86   17.64   0
Vaxjo   10          Sweden          53994   56.88   14.80   0 
```

欢迎任何输入！

# symfony - Symfony 如何翻译 jordillonch / CrudGeneratorBundle

> ID：15252149
> 
> 赞同：2
> 
> 时间：2013-03-06T16:00:42.157
> 
> 标签：symfony, translation

我的模板中有类似的东西

```
<h1>Workers {{ 'views.index.list'|trans({}, 'JordiLlonchCrudGeneratorBundle') }}</h1> 
```

我想翻译这个，但我不知道怎么翻译。我想必须创建一个带有翻译的文件，但是在哪里保存它，如何命名文件以及在里面写什么？在 app/config/config.yml 我有`'translator: { fallback: "%locale%" }'`

在`'symfony/app/config/parameters.yml'`定义的语言环境参数中`"locale:pl"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:29:28.390

首先查看捆绑包的[Resources/translations](https://github.com/jordillonch/CrudGeneratorBundle/tree/master/Resources/translations)文件夹。它看起来像这样：

```
JordiLlonchCrudGeneratorBundle.ca.yml
JordiLlonchCrudGeneratorBundle.en.yml
JordiLlonchCrudGeneratorBundle.es.yml 
```

然后创建一个文件`JordiLlonchCrudGeneratorBundle.pl.yml`（如果你想翻译到本地的pl）并把它放到`app/Resources/JordiLlonchCrudGeneratorBundle/translations`目录中。

使用默认翻译文件之一作为翻译模式，翻译您需要的所有文本并将其保存到您刚刚创建的 pl 翻译文件中。

另请参阅：[http ://symfony.com/doc/2.1/cookbook/bundles/inheritance.html#overriding-resources-templates-routing-validation-etc](http://symfony.com/doc/2.1/cookbook/bundles/inheritance.html#overriding-resources-templates-routing-validation-etc)

# python - 将 Flask-Mail 与 Heroku 和 Mailgun 一起使用时不发送电子邮件

> ID：15252150
> 
> 赞同：1
> 
> 时间：2013-03-06T16:00:43.733
> 
> 标签：python, heroku, smtp, mailgun, flask-mail

我一直在编写一个简单的应用程序来测试如何使用 Flask-Mail 通过 SMTP 方法发送电子邮件（需要 SMTP 才能移植到不同的 SMTP 服务）。为此，我尝试通过 Heroku 使用 Mailgun，但经过多次试验、错误和研究，我似乎仍然无法发送电子邮件。

我的问题与这个问题类似，[Flask on Heroku with MailGun config issues](https://stackoverflow.com/questions/13079755/flask-on-heroku-with-mailgun-config-issues)，但是除了使用 Mailgun 的 API 之外，我看不到这个问题的解决方案，这对于我正在从事的项目是不可行的。

目前，我将烧瓶/烧瓶邮件代码设置如下（当然是精简版）：

```
from flask import Flask
from flask.ext.mail import Mail
from flask.ext.mail import Message

app = Flask(__name__)
mail = Mail(app)

app.config.setdefault('SMTP_SERVER', environ.get('MAILGUN_SMTP_SERVER'))
app.config.setdefault('SMTP_LOGIN', environ.get('MAILGUN_SMTP_LOGIN'))
app.config.setdefault('SMTP_PASSWORD', environ.get('MAILGUN_SMTP_PASSWORD'))
app.config.setdefault('MAIL_SERVER', environ.get('MAILGUN_SMTP_SERVER'))
app.config.setdefault('MAIL_USERNAME', environ.get('MAILGUN_SMTP_LOGIN'))
app.config.setdefault('MAIL_PASSWORD', environ.get('MAILGUN_SMTP_PASSWORD'))
app.config.setdefault('MAIL_USE_TLS', True)

def EmailFunction(UserEmail):
    msg = Message("Hello",
                  sender='testing@test.com',
                  recipients=[UserEmail])

    msg.html = "<b>testing</b>"
    mail.send(msg)
    return msg.html

@app.route('/EmailTest/')
def EmailTestPage():
    EmailFunction('developer@test.com')
    return 'Email Sent'

if __name__ == '__main__':
    app.run(host='0.0.0.0',debug=True) 
```

我错过了什么吗？有没有办法测试代码通过并返回“已发送电子邮件”时出了什么问题，但似乎没有发送/接收电子邮件。

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:01:56.283

看起来您没有在 SMTP 端口中读取数据。默认情况下，Flask 邮件可能会尝试使用 25，而 mailgun 使用 587。

# html - 如何使用硒或黄瓜向 geocoder.getCurrentPosition() 发送伪造的地理编码？

> ID：15252152
> 
> 赞同：1
> 
> 时间：2013-03-06T16:00:55.950
> 
> 标签：html, selenium, cucumber, geocoding

我通过黄瓜行为开发我的应用程序，并且我想包含[HTML5 getCurrentPosition](http://diveintohtml5.info/geolocation.html)。

有没有办法从 Selenium 中的 Firefox 浏览器或 Cucumber 中的 Capybara 浏览器发送这样的地理位置？

我的应用程序现在调用`navigator.geocoder.getCurrentPosition(some_callback)`以向用户请求位置。现代浏览器和大多数移动浏览器会提示用户是否要将其位置发送到应用程序。我想伪造这种行为，并在测试时简单地向我的应用程序发送一个 lat:long。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:51:55.480

由于我的 Cucumber Features 没有测试 Google Maps JavaScript 是否真的有效，所以我决定简单地为那个 JavaScript 添加一个小的测试扩展。

JavaScript 现在只需获取参数`latitude=8&longitude=52`并使用它，`getCurrentPosition`在给定时进行模拟。可以使用附加参数`test`来呈现表示地图“中心”的字符串，这是可测试的。

```
$(document).ready(function(){
  if ((urlParam('latitude') >= 0) && (urlParam('longitude') >= 0)) {
    var latitude = urlParam('latitude')
    var longitude = urlParam('longitude')
    window.navigator.geolocation.getCurrentPosition = function(success) {
      var position = {"coords" : { "latitude": latitude, "longitude": longitude }};

      if (urlParam('test') >= 0) { #extension for testability
        $("#map_canvas").html("latitude: "+ latitude +" longitude: "+ longitude);
      }

      success(position);
    }
  }
}); 
```

`urlParam()`确定 URL 中参数的辅助函数在哪里：`null`如果找不到则返回。

额外的好处是地图是“可链接的”，您现在可以制作一个 URL 并使用它来使地图居中。

我的步骤定义是：

```
Then /^it should center the map on my current location$/ do
  visit maps_path({:latitude => 20, :longitude => 20, :test => true})
  page.should have_content "latitude: 20 longitude: 20"
end 
```

# jquery - 调用中包含数据时，PageMethod 不会触发

> ID：15252154
> 
> 赞同：0
> 
> 时间：2013-03-06T16:00:56.750
> 
> 标签：jquery, ajax

我在 ASP.NET 页面后面的 C# 代码中有一个基本功能。它接受一个字符串（我将其格式化为 JSON 对象）并返回一个字符串。

```
 [WebMethod]
    public static string TestPageMethod(string json)
    {
        return json;
    } 
```

我的javascript如下：

```
var updateUserLocationsJson = "{\"test\",123}";
$.ajax({
    type: "POST",
    url: "../../Manager/AddEditUser.aspx/TestPageMethod",
    data:updateUserLocationsJson,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        alert(msg.d);
    }
}); 
```

如果我从中删除字符串参数并从 javascript 调用中删除数据字段，我可以让服务器端方法触发。

如果我使用页面方法调用它，我也可以让服务器端方法触发，即

```
PageMethods.TestPageMethod("{\"test\",123}", PageMethodSuccess, PageMethodFail); 
```

但是，我希望在传递数据时使用 $.ajax 方法让它工作。我无法弄清楚为什么它不起作用。有人可以对此有所了解吗？

# php - 回显返回多个变量

> ID：15252164
> 
> 赞同：2
> 
> 时间：2013-03-06T16:01:32.843
> 
> 标签：php, sql, arrays

我的 mysql 查询有问题，我需要从我的表中提取所有数据并将他用作另一个 sql 查询。

这是我正在使用的代码：

```
<?php
function toateMhz() {

 require ('SQL.php');
     $sql = "SELECT DISTINCT(performanta_cpu) FROM modele ORDER BY CAST(performanta_cpu AS UNSIGNED) DESC";
     foreach ($dbh->query($sql) as $linie)  
     {
     $mhz[] = $linie['performanta_cpu'];
     }

     if(isset($mhz['1']))
    {
    $mhz1 = "$mhz[0] OR ";
}    
    else $mhz['0'];

     if(isset($mhz['2']))
    {
    $mhz2 = "$mhz[1] OR ";
}    
    else $mhz['1'];

     if(isset($mhz['3']))
    {
    $mhz3 = "$mhz[2] OR ";
}    
    else $mhz['2'];

     if(isset($mhz['4']))
    {
    $mhz4 = "$mhz[3] OR ";
}    
    else $mhz['3'];

     if(isset($mhz['5']))
    {
    $mhz5 = "$mhz[4] OR ";
}    
    else $mhz['4'];

     if(isset($mhz['6']))
    {
    $mhz6 = "$mhz[5] OR ";
}    
    else $mhz['5'];

     if(isset($mhz['7']))
    {
    $mhz7 = "$mhz[6] OR ";
}    
    else $mhz['6'];

     if(isset($mhz['8']))
    {
    $mhz8 = "$mhz[7] OR ";
}    
    else $mhz['7'];

     if(isset($mhz['9']))
    {
    $mhz9 = "$mhz[8] OR ";
}    
    else $mhz['8'];

     if(isset($mhz['10']))
    {
    $mhz10 = "$mhz[9] OR ";
}    
    else $mhz['9'];

     if(isset($mhz['11']))
    {
    $mhz11 = "$mhz[10] OR ";
}    
    else $mhz['10'];

     if(isset($mhz['12']))
    {
    $mhz12 = "$mhz[11] OR ";
}    
    else $mhz['11'];

     if(isset($mhz['13']))
    {
    $mhz13 = "$mhz[12] OR ";
}    
    else $mhz['12'];

     if(isset($mhz['14']))
    {
    $mhz14 = "$mhz[13] OR ";
}    
    else $mhz['13'];

    if(isset($mhz['15']))
    {
    $mhz14 = "$mhz[14] OR ";
}    
    else $mhz['14'];

    $frecvente = "$mhz1 $mhz2 $mhz3 $mhz4 $mhz5 $mhz6 $mhz7 $mhz8 $mhz9 $mhz10 $mhz11 $mhz12 $mhz13 $mhz14";
    return $frecvente;
}

 echo toateMhz();   
?> 
```

这是代码的结果：

`2000 OR 1600 OR 1500 OR 1400 OR 1000 OR 800 OR`

但正确的结果是`2000 OR 1600 OR 1500 OR 1400 OR 1000 OR 800 OR 200`

最后一句话不能`OR`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:05:22.707

不太确定，但这可能会奏效

```
foreach ($dbh->query($sql) as $linie) {
    // append value of this record to the array $mhz
    $mhz[] = $linie['performanta_cpu'];
}
// return the concatenation of all elements in $mhz with ' OR ' as "glue" between elements
return join(' OR ', $mhz); 
```

`join($s, $arr)`是一个别名，[`implode($s, $arr)`](http://docs.php.net/function.implode)它连接给定数组 $arr 的所有（字符串）元素并将 $s 放在元素“之间”。例如

```
$x = array('a','b', 'c');
echo join(' - ', $x); 
```

印刷`a - b - c`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:05:43.753

使用 implode 将数组值加入字符串：

```
function toateMhz() {

    require ('SQL.php');
    $sql = "SELECT DISTINCT(performanta_cpu) FROM modele ORDER BY CAST(performanta_cpu AS UNSIGNED) DESC";
    foreach ($dbh->query($sql) as $linie)  
    {
        $mhz[] = $linie['performanta_cpu'];
    }
    return implode(" OR ", $mzh);
}
echo toateMhz(); 
```

# silverlight - 在 Silverlight 中自定义绑定到 Accordion 控件

> ID：15252165
> 
> 赞同：0
> 
> 时间：2013-03-06T16:01:33.113
> 
> 标签：silverlight, binding, collections, accordion, datacontext

有没有办法将集合绑定到 Silverlight 中的 Accordion 控件，但其中一个 Accordion 项目是该集合共有的项目列表。例如，我有几种类型：Client、PlanCollection、Plan、AllocationCollection、Allocation。每个客户都有一个或多个计划，每个计划都有一个或多个分配。一些分配对所有计划都是通用的。公共分配本身包含在客户端计划集合的分配集合属性中。这是一些示例代码。

一个客户端是这样创建的

```
Client c = new Client() { Name = "Acme Company" }; 
```

计划的分配将像这样访问

```
c.Plans["Acme DB Plan"].Allocations 
```

将像这样访问单个分配

```
Allocation first = c.Plans["Acme DB Plan"].Allocations[0]; 
```

计划的常见分配将像这样访问

```
c.Plans.CommonAllocations; 
```

像这样的单一公共分配

```
Allocation firstCommon = c.Plans.CommonAllocations[0]; 
```

Accordion 中的每个标题都是一个计划名称，每个标题都将展开以显示计划中的分配。我还需要一个名为“Common Allocations”的单独标题，它可以展开以显示所有计划共有的分配。我似乎无法找到一种方法来做到这一点。我可以将计划正确地绑定到 Accordion 的 ItemsSource 属性，但是我不能将公共分配添加为单独的项目，因为一旦绑定了计划，Accordion 的项目集合就变为只读的。我也不想为公共分配创建单独类型的计划，因为公共分配实际上并不代表客户的计划。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:15:36.033

如何为您的 Accordian 的 ItemsSource 创建一个分配集合。

像这样创建集合：

```
IEnumerable<Allocation> GetAllAllocations(Client c)
{
    foreach (var plan in c.Plans)
    {
        yield return plan.Allocations;
    }

    yield return c.Plans.CommonAllocations;
} 
```

如果需要，将其公开为 Binding 属性：

```
public IEnumerable<Allocation> AllAllocations
{
    get
    {
        return GetAllAllocations(new Client() { Name = "Acme Company" });
    }
} 
```

# php - 在 Javascript 中捕获 PHP 回显

> ID：15252171
> 
> 赞同：0
> 
> 时间：2013-03-06T16:01:55.013
> 
> 标签：php, javascript

我目前需要使用一段类似的 PHP 代码。修改此代码不是一种选择。

```
<?
session_start();

include '../connection.inc';

$conn = new Connection();

echo "ID:" . $conn->generateID();
echo "\n";
?> 
```

在 connection.inc 中，可以通过创建新的 Connection() 来建立与数据库的连接。从那里，数据库可以生成一个唯一的 16 字符 ID (conn->generateID)。有没有办法从 javascript 中检索执行这个 PHP 文件并从 javascript 中的 PHP-echo 中提取 16 个字符的 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:10:01.883

有一个 AJAX 调用的替代方案，虽然它有点……不寻常。`Output Buffering`.

一个小例子：

```
<?php
    ob_start();  //This will stop all echoed output from being sent immediately.
    include("Whereveryourcodeis.php");
    ob_end_clean();  //Discards what has been stored and stops buffering.
?> 
```

在此片段之后，您可以`$conn->generateID`在页面上的任何位置使用，而无需编写任何 JavaScript 代码。

希望这会有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:03:54.993

您应该使用 jQuery 调用此处理程序，`AJAX`并指定 PHP 应该是结果以及调用成功完成后应`return`该做什么。`AJAX``AJAX`

看这里：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:04:48.897

尝试类似：

```
<script type="text/javascript">
var dbId = '<?= $conn->generateID(); ?>';
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:05:44.070

```
<?php

session_start();

include '../connection.inc';

$conn = new Connection();

?> 
```

然后在下面：

```
<script type="text/javascript">
var bd_id = '<?php echo $conn->generateID(); ?>';

// JUST TO TEST THAT THE ID IS AVALAIBLE IB JAVASCRIPT
alert(db_id); 
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T16:10:57.227

1.  创建一个 JavaScript 文件，对调用 connection.inc 的包装 PHP 文件进行 AJAX 查询

2.  在 JavaScript 中，调用 AJAX 查询并解析响应，这将为您提供 ID

最后，您可能应该为此使用 HTTPS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T16:13:12.777

尝试这样的事情

```
<?php
session_start();

include '../connection.inc';

$conn = new Connection();

print json_encode(array('ID' => $conn->generateID())); 
```

或者，如果您无法更改上述代码，只需将 php 响应（使用 ajax 调用）加载到 js 变量中并使用正则表达式来匹配 ID。就像是：

```
$.get('url/to/php', function (resp) {
    var matches = resp.match(/ID:(.*)\n/);
    console.log(matches);
}) 
```

`matches[1]`将保存 ID 字符串。

# ios5 - NSManagedObject 变为空

> ID：15252179
> 
> 赞同：0
> 
> 时间：2013-03-06T16:02:17.107
> 
> 标签：ios5, nsmanagedobject

我在 ViewController 中使用 NSManagedObject 作为属性，声明如下：

```
@property(retain, nonatomic)NSManagedObject *person; 
```

我将获取的内容传播到 UITableView，当用户点击他正在寻找的联系人时，会发生以下情况：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
       self.person = [contacts objectAtIndex:indexPath.row]; 
```

Contacts 包含获取的结果，操作如下：

```
NSArray *contactsArray;
NSError *error;
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

NSManagedObjectContext *context = [(OAuthStarterKitAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];

NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Contacts" inManagedObjectContext:context];

[fetchRequest setEntity:entity];
testForTrue = [NSPredicate predicateWithFormat:@"SOME CONDITION"];

[fetchRequest setPredicate:testForTrue];
    [fetchRequest setFetchLimit:10];

contactsArray = [[NSArray alloc]initWithArray:[context executeFetchRequest:fetchRequest error:&error]]; 
```

当用户点击联系人时，self.person 具有该值，但是当我尝试在另一种方法中使用该值时，它为 nil，地址为 0x000000。这仅在 iOS 5 上发生，在 iOS 6 上，人具有所选联系人的值，我可以在其他地方使用。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:47:30.807

而不是获取`NSManagedObject`始终依赖于上下文的生命周期的 ，我刚刚存储了 de`NSManagedObjectID`然后`NSManagedObject`使用函数获取`objectWithID`。它奏效了！

# checkbox - Slickgrid checkboxselectcolumn 动态单击复选框

> ID：15252182
> 
> 赞同：0
> 
> 时间：2013-03-06T16:02:25.133
> 
> 标签：checkbox, slickgrid

我正在使用 Slickgrid 的 checkboxselectcolumn 插件，我希望自动选择新行。

我尝试获取当前选定的行并添加新索引，当我获得选定的行时，我的行在列表中，但实际上并未选中复选框并且突出显示了该行。我似乎找不到“单击”复选框的代码。

```
 _grid.dataView.addItem(item);       
    var selectedItems = _grid.grid.getSelectedRows();   
    console.log(selectedItems); //Rows selected or empty
    selectedItems.push(_grid.grid.getDataLength()+1);   
    _grid.grid.setSelectedRows(selectedItems);
    selectedItems = _grid.grid.getSelectedRows();
    console.log(selectedItems); //New rows are all in this list, but checkbox is not selected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:14:09.620

我使用 jQuery “单击”复选框（仅将其设置为选中是不够的）

var nextIndex = _grid.grid.getDataLength(); jQuery('#MyGrid div[row='+nextIndex+'] [type=checkbox]').click();

# clojure - 如何使用具有多个参数的函数的映射

> ID：15252184
> 
> 赞同：3
> 
> 时间：2013-03-06T16:02:33.563
> 
> 标签：clojure

我有以下方法：

```
(defn area [x y] (* x y)) 
```

如何遍历关于参数编号的列表。就像是

```
(map area [2 5 6 6]) 
```

所以它会进行类似`(area 2 5)`and的计算`(area 6 6)`，也许 vector 不是正确使用的类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T16:30:00.737

您可以`partition`按照这里的一些建议使用，但您可能需要考虑以不同的方式排列数据。例如，您可以使用向量的向量：

```
[[2 5] [6 6]] 
```

然后你可以改变你的`area`功能：

```
(defn area [[x y]] (* x y)) 
```

现在你可以用你的一对来调用它：`(area [6 6])`并且在你的向量上映射很容易：

```
(map area [[2 5] [6 6]]) 
```

如果由于某种原因您需要`area`使用两个参数而不是向量，您可以执行以下操作：

```
(map #(apply area %) [[2 5] [6 6]]) 
```

对我来说，这仍然比使用`partition`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T16:07:19.363

试试这个：

```
(map #(apply area %) (partition 2 [2 5 6 6])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:06:41.753

`map`函数期望的每个参数都需要一个单独的序列参数：

```
(map [2 6] [5 6]) 
```

# magento - 创建 Magento 扩展 - 遵循说明，var/connect 中没有包

> ID：15252185
> 
> 赞同：0
> 
> 时间：2013-03-06T16:02:38.277
> 
> 标签：magento

我正在重新打包一个新版本的 Magento 扩展并且遇到了一些麻烦。

我按照 Magento Connect 网站上的说明进行操作：http: [//info.magento.com/rs/magentocommerce/images/packagingmagentoconnectextensions6%200.pdf](http://info.magento.com/rs/magentocommerce/images/packagingmagentoconnectextensions6%200.pdf)

问题出现在“保存数据并创建包”步骤中。我在扩展创建者的各个步骤中完成了所有信息的输入，包括扩展的所有文件和目录，我单击“保存数据并创建包”并且没有任何反应。当然没有“包裹数据已保存”，因为它看起来是我读过的其他帖子应该发生的事情。

我仔细检查了 magento/var/connect 文件夹的写权限，一切正常。

Magento 中是否有任何可能关闭的设置？这是我需要进一步研究的权限问题吗？有人有想法么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:40:38.580

我遇到了同样的问题，它实际上工作的是这个命令： chmod -R 777 var/ 在 magento 根目录中。如果您查看您提供的 PDF 的末尾，在 F 部分：加载本地包中有一条注释说：首先您应该为相应的文件夹设置写权限。

# groovy - 从另一个方法调用一个方法会抛出 java.lang.ClassFormatError: Illegal class name

> ID：15252186
> 
> 赞同：3
> 
> 时间：2013-03-06T16:02:38.200
> 
> 标签：groovy

使用 GroovyScriptEngine 运行 groovy 脚本。这是创建的 groovy 文件。

BasePayCalculation.groovy

```
return calculate()

def calculate() {
    def currentPay = currentPay
    currentPay = normalize(currentPay);
    // Current pay cannot be zero
    if (currentPay == 0) {
        throw new IllegalArgumentException("Current pay is zero")
    }
}

def normalize(def it) {
    if (it == null) 
        return 0
    else
        return it
} 
```

从应用程序运行它，得到

```
java.lang.ClassFormatError: Illegal class name "cds:BasePayCalculation$normalize$0" in class file cds:BasePayCalculation$normalize$0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
    at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts.define(ClassLoaderForClassArtifacts.java:42)
    at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts$1.run(ClassLoaderForClassArtifacts.java:86)
    at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts$1.run(ClassLoaderForClassArtifacts.java:84)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts.defineClassAndGetConstructor(ClassLoaderForClassArtifacts.java:84)
    at org.codehaus.groovy.runtime.callsite.CallSiteGenerator.compilePogoMethod(CallSiteGenerator.java:217)
    at org.codehaus.groovy.reflection.CachedMethod.createPogoMetaMethodSite(CachedMethod.java:228)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.createCachedMethodSite(PogoMetaMethodSite.java:212)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.createPogoMetaMethodSite(PogoMetaMethodSite.java:188)
    at groovy.lang.MetaClassImpl.createPogoCallCurrentSite(MetaClassImpl.java:3122)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallCurrentSite(CallSiteArray.java:108)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at cds:BasePayCalculation.calculate(cds:BasePayCalculation.groovy:20)
    at cds:BasePayCalculation.run(cds:BasePayCalculation.groovy:16)
    at groovy.util.GroovyScriptEngine.run(GroovyScriptEngine.java:551) 
```

请帮我解决这个问题。

### 来自下面的额外信息：

*   使用 web 应用程序从 tomcat 运行。
*   时髦的 2.1.1。
*   使用代码运行它

    ```
    Binding params = new Binding()
    if (context != null) {
      for (String key : context.keySet()) {
        Object param = context.get(key);
        params.setVariable(key, param);
      }
    }
    long time = System.currentTimeMillis();
    Object object = engine.run(name, params); 
    ```

Java 版本 1.6 tomcat 版本 6.0.24

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-06T08:14:01.817

问题是 groovy 声明了一个与运行的脚本同名的类，因此[从 JVM 的角度来看，脚本名称需要是一个有效的标识符](https://issues.apache.org/jira/browse/GROOVY-505)。在这种情况下，我认为问题出在“：”字符上。

# .net - 我正在尝试创建一个扩展方法，但它没有吐出正确的信息

> ID：15252188
> 
> 赞同：0
> 
> 时间：2013-03-06T16:02:47.227
> 
> 标签：.net, c#-4.0, extension-methods

我正在尝试创建一个扩展方法，但它没有做我想做的事。

这是我的扩展方法

```
public static string StringOptional(this string StartString, string AddOnString, int Length, Utility.PaddingSide Side)
{
    string AddOnStringFormated;
    if (AddOnString != null)
    { AddOnStringFormated = Utility.FixedLengthString(AddOnString, Length, Side); }
    else
    {
        string AddOnStringBlank = "";
        AddOnStringFormated = Utility.FixedLengthString(AddOnStringBlank, Length, Side);
    }
    string FinishString = Utility.FormatString(StartString, AddOnStringFormated);
    return FinishString;
} 
```

在我的常规代码中

```
string LineTemp = "FirstLineOfCode";
string LineAdd = "SecondLine";
LineTemp.StringOptional(ImmOrNm, 23, Utility.PaddingSide.Right);
return LineTemp; 
```

最后 LineTemp 应该将两个字符串格式化在一起，但事实并非如此。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:04:43.147

字符串是不可变的，你必须

```
 LineTemp = LineTemp.StringOptional(ImmOrNm, 23, Utility.PaddingSide.Right); 
```

# java - 我该如何解决 java.lang."illegalStateException" "StringIndexOutOfBound" "InvocationTargetException"

> ID：15252190
> 
> 赞同：0
> 
> 时间：2013-03-06T16:02:51.940
> 
> 标签：java, android

有人可以帮我写这个应用程序，但它不起作用，我找不到解决方案。

第一个错误：由 java.lang.IllegalStateException 引起：无法执行活动的方法

第二个错误：由 java.lang.StringIndexOutOfBoundException 引起

第三个错误：由 java.lang.reflect.InvocationTargetException 引起

```
package com.enkripsms;

import com.dbutil.dbhelper;
import android.app.Activity;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class tulisPesan extends Activity {
/**
 * @see android.app.Activity#onCreate(Bundle)
 */
EditText pesan;
EditText kunci;
private SQLiteDatabase db = null;
private dbhelper data = null;

@Override

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // TODO Put your code here
    setContentView(R.layout.tulispesan);
    data = new dbhelper(this);
    db = data.getWritableDatabase();
    data.createTable(db);       
}

public void sandikan ( View s ) {
    kunci = (EditText)findViewById(R.id.kunci);
    pesan = (EditText)findViewById(R.id.pesan);
    String kuncinya = kunci.getText().toString();
    String plain = pesan.getText().toString();
    String chiper = "";

    if (kuncinya.isEmpty()) { //(kunci == null)
        Toast.makeText(this, "Maaf, kunci harus diisi", Toast.LENGTH_LONG).show();
    }else{
        String acak = "";
        double acakN;
        for (int a = 0; a<kuncinya.length(); a++) {
            acakN = Math.random() * 25 + 65;
            acak = acak + (char) acakN;
        }
        kunci.setText(acak); 
    }

    if (kuncinya.length() != plain.length()) {
        for (int a = 0; a<plain.length(); a++) {
            String tambahk = "";
            tambahk = tambahk + kuncinya.substring(0, 1);
            kuncinya = tambahk;
        }
        kunci.setText(kuncinya);
    }

    for (int a = 0; a<plain.length(); a++) {
        String plainBin = "0" + Integer.toBinaryString((int)plain.charAt(a));

        if (plainBin.length() < 8) 
            plainBin = "0" + plainBin;

        String keyBin = "0" + Integer.toBinaryString((int)kuncinya.charAt(a));

        for (int b = 0; b<8; b++) {
            chiper = chiper + Integer.toString((Integer.parseInt(plainBin.substring(b, b+1))) ^ Integer.parseInt(keyBin.substring(b, b+1)));
        }       
    }
    Intent hasilPesan = new Intent();
    hasilPesan.setClass(this, hasilPesan.class);
    hasilPesan.putExtra("chiper", chiper);
    startActivity(hasilPesan);
}

public void inputData () {

}

public void kembali ( View k) {
    Intent kembali = new Intent();
    kembali.setClass(this, MainActivity.class);
    startActivity(kembali);
}

} 
```

这是我的全部错误

```
03-06 22:39:59.964: E/AndroidRuntime(330): FATAL EXCEPTION: main
03-06 22:39:59.964: E/AndroidRuntime(330): java.lang.IllegalStateException: Could not execute method of the activity
03-06 22:39:59.964: E/AndroidRuntime(330):  at   android.view.View$1.onClick(View.java:2144)
03-06 22:39:59.964: E/AndroidRuntime(330):  at android.view.View.performClick(View.java:2485)
03-06 22:39:59.964: E/AndroidRuntime(330):  at android.view.View$PerformClick.run(View.java:9080)
03-06 22:39:59.964: E/AndroidRuntime(330):  at android.os.Handler.handleCallback(Handler.java:587)
03-06 22:39:59.964: E/AndroidRuntime(330):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-06 22:39:59.964: E/AndroidRuntime(330):  at android.os.Looper.loop(Looper.java:123)
03-06 22:39:59.964: E/AndroidRuntime(330):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-06 22:39:59.964: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
03-06 22:39:59.964: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:507)
03-06 22:39:59.964: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-06 22:39:59.964: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-06 22:39:59.964: E/AndroidRuntime(330):  at dalvik.system.NativeStart.main(Native Method)
03-06 22:39:59.964: E/AndroidRuntime(330): Caused by: java.lang.reflect.InvocationTargetException
03-06 22:39:59.964: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
03-06 22:39:59.964: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:507)
03-06 22:39:59.964: E/AndroidRuntime(330):  at android.view.View$1.onClick(View.java:2139)
03-06 22:39:59.964: E/AndroidRuntime(330):  ... 11 more
03-06 22:39:59.964: E/AndroidRuntime(330): Caused by: java.lang.StringIndexOutOfBoundsException
03-06 22:39:59.964: E/AndroidRuntime(330):  at com.enkripsms.tulisPesan.sandikan(tulisPesan.java:66)
03-06 22:39:59.964: E/AndroidRuntime(330):  ... 14 more 
```

有人请帮助我，谢谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:18:40.767

在你的 for 循环中：

```
chiper = chiper + Integer.toString((Integer.parseInt(plainBin.substring(b, b+1))) ^ Integer.parseInt(keyBin.substring(b, b+1))); 
```

超过字符串的长度。

所以看看这一行并检查你是否想要循环 8 次

```
for (int b = 0; b<8; b++) { 
```

记得你说过要在设置 chiper 时查看 b+1，所以问题的原因是当你在循环中的某个点（很可能是最后一个循环）点击 b+1 时没有任何价值

# c# - 在测试期间设置变量值

> ID：15252196
> 
> 赞同：2
> 
> 时间：2013-03-06T16:03:15.120
> 
> 标签：c#, .net, vb.net, visual-studio-2010

我目前的情况（尽管我在许多其他类似的情况下需要这个）是我正在编写一个查询数据库的应用程序。

现在，在编码/调试时，我宁愿不必不断地重新输入我的数据库凭据。但是，如果用户运行可执行文件，我希望他们必须输入他们的凭据。

我研究了预处理器指令，例如：

```
#If DEBUG Then
    Public Property DB_UserName As String = "MyUserName"
    Public Property DB_Password As String = "MyPassword"
#Else
    Public Property DB_UserName As String = ""
    Public Property DB_Password As String = ""
#End If 
```

但这取决于我必须在将项目发布到野外之前更改项目的配置。（是的，我知道在我的代码中留下诸如凭据之类的东西并不是一个好的编程习惯，但现在请忽略这部分——就像我说的，这只是一个例子。）

我正在寻找/想知道它是否存在是一种能够设置变量/编写将在我编码/在 Visual Studio 环境中处理的代码的方法，但如果可执行文件正在被处理则不会无需更改任何项目属性即可运行。

这样的事情存在吗？我将如何实施它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:07:45.453

您可以使用[设置](http://www.dreamincode.net/forums/topic/72654-using-settings/)。

我认为这比直接存储在代码中要好。只需使用不同的设置文件或什至没有它来发布您的可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:08:08.337

如果您真的想对这些值进行硬编码，您可以使用以下方法检查您是否在开发环境中运行：

```
Private Function processStartedByVisualStudioDebugger() As Boolean
    Dim result As Boolean = False
    Try
        If AppDomain.CurrentDomain.DomainManager.ToString().IndexOf("vshost", StringComparison.OrdinalIgnoreCase) >= 0 Then
            result = True
        End If
    Catch
    End Try
    Return result
End Function 
```

但是，我认为简单地将值存储在配置文件中更有意义。

# android - 使用地址从我的应用链接到另一个应用

> ID：15252198
> 
> 赞同：0
> 
> 时间：2013-03-06T16:03:21.460
> 
> 标签：android, android-intent

目前我们有一个工具，上面有地址，我们在手机上使用 Co Pilot 导航到这些位置。当您单击地址时，我会看到 autotrader 应用程序，您可以选择要使用哪个应用程序打开此地址，包括副驾驶 / 谷歌地图等。

但是，我一生都无法弄清楚您将从该地址启动什么样的意图以提供加载副驾驶的选项。

我可能会非常糟糕地解释这一点，但任何帮助都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:26:37.727

您需要根据`Uri`您的意图使用正确的。它还取决于设备中是否有任何其他应用程序注册了该特定应用程序`Uri`，例如单击`http://...`电子邮件中的链接会询问您应该使用哪个已安装的浏览器来处理它。[谷歌地图使用这里](http://developer.android.com/guide/appendix/g-app-intents.html)`Uri`描述的地理。我已经很长时间没有使用它了，但是看到页面一直到现在这些可能还是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:39:43.513

如果您使用的是 lats 和 longs，请将其设置`Intent`为使用`ACTION_DEFAULT`，如下面的代码所示。如果有多个地图应用程序，它将为您提供一个选项

```
 String uri = String.format("geo:%f,%f", 2.345, -3.125323);
            Intent intent = new Intent(Intent.ACTION_DEFAULT, Uri.parse(uri));
            startActivity(intent); 
```

这对我有用

# c# - 我可以检查我的 cookie 来决定在 RegisterRoutes 中加载哪个页面吗

> ID：15252203
> 
> 赞同：0
> 
> 时间：2013-03-06T16:03:28.723
> 
> 标签：c#, asp.net-mvc-3, razor

我想读取 cookie 以查看他们之前是否访问过该站点，然后决定他们应该去哪里。

如果不是 cookie，则加载默认页面。

我会在 RegisterRoutes 中处理这个吗？

这是我目前拥有的：

```
 public class MvcApplication : HttpApplication
  {
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
      //filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {      
      routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
      routes.MapRoute(
          "Default", // Route name
          "{controller}/{action}/{id}", // URL with parameters
          new { controller = "Account", action = "Logon", id = UrlParameter.Optional }
      );

    }

    protected void Application_Start()
    {
      AreaRegistration.RegisterAllAreas();

      RegisterGlobalFilters(GlobalFilters.Filters);
      RegisterRoutes(RouteTable.Routes);
    }
  } 
```

我是要更改 RegisterRoutes 以决定从这里去哪里还是我会在其他地方这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:11:23.203

你为什么没有一个动作来做到这一点？我认为这将是一个更好的方法来做到这一点。创建控制器的索引（作为默认路由）动作，在动作内部，检查 cookie 并根据值（或者如果 cookie 不存在）重定向到您想要的路由。这样您就可以对您的操作进行单元测试。

如果您需要更多帮助或代码，请告诉我。

# asp.net - 删除站点地图的树视图的根节点

> ID：15252204
> 
> 赞同：0
> 
> 时间：2013-03-06T16:03:34.280
> 
> 标签：asp.net, treeview, sitemap, nodes

我有一个位于 asp.net 页面上的菜单。我使用树视图控件来显示我的站点菜单。唯一的问题是我有一个实际上什么都不做的根节点。

目前我的菜单结构如下：

-empty root node
I---Home
I---Calendar
I---....

但我想要这样：

-Home
-Calendar
-....

所以基本上根节点应该被删除或隐藏，只要用户不能点击和或看到它......

有没有一种简单的方法可以做到这一点？我尝试删除空的 < siteMapNode > 标签，但这给了我一个错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:17:23.997

SiteMapDataSource 中有一些属性可以帮助控制这一点。就像是：

```
<asp:SiteMapDataSource ID="_siteMapData" runat="server" ShowStartingNode="false" StartFromCurrentNode="true" />
<asp:TreeView ID="_tree" NodeWrap="true" ExpandDepth="1" DataSourceID="_siteMapData" runat="server"></asp:TreeView> 
```

更改的值`ShowStartingNode`应该是您需要的。

您还可以从代码隐藏中更改该值。这将根据当前节点是否有子节点来更改初始节点（没有子节点，上一级）：

```
SiteMapNode currNode = System.Web.SiteMap.CurrentNode;
_siteMapData.StartingNodeOffset = currNode != null && currNode.HasChildNodes ? 0 : -1; 
```

# android - 一些只有一个 TextWatcher 的 EditTexts

> ID：15252206
> 
> 赞同：0
> 
> 时间：2013-03-06T16:03:36.000
> 
> 标签：android, android-edittext, textwatcher

我正在尝试使用 TextWatcher 界面以检测更改了哪个 EditText。我有一个包含 10 个 EditText 的活动，并且为每个 EditText 使用 10 个 TextWatchers 看起来很奇怪。

有什么方法可以只使用一个 TextWatcher 并在函数 afterTextChanged 中的 Editable 上使用 switch 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:17:44.917

我以前从未尝试过，但如果你检查它是否`EditText`在焦点上，它应该可以工作。有几种方法可以解决这个问题，最直接的一种是检查方法`EditText`内部的焦点`TextWatcher`。你需要做这样的事情：

```
if(mEdit1.hasFocus()) {
  ...
} else if(mEdit2.hasFocus()) {
  ...
} else if(mEdit3.hasFocus()) {
  ...
} 
```

另一种方法是在根视图上使用[OnGlobalFocusChangeListener](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalFocusChangeListener.html)`EditText`并设置一个变量来指示当前具有焦点。它仍然需要大量`if`语句来检查哪个`EditText`具有焦点，但可能是一个更可重用的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:16:07.220

我要做的是创建一个扩展`EditText`并`TextWatcher`在该类中创建的类。然后，您可以在 XML 中实现这些 EditText，或者在 Java 中通过`TextWatcher`监听每个`EditText`.

不知道这是否适合你，但你可以试一试。

# java - Trove jar THashMap 类未找到异常

> ID：15252211
> 
> 赞同：2
> 
> 时间：2013-03-06T16:03:44.623
> 
> 标签：java, eclipse, trove4j

我想在我的 java 项目中为地图使用 Trove-1.0.2 jar。我使用 Eclipse IDE。我在构建路径中使用“添加外部 jars”添加了 Trove jar，但我仍然得到 ClassNotFoundException。

但是当我检查时，类 gnu.trove.THashMap 存在于库中。

```
Error: java.lang.ClassNotFoundException: gnu.trove.THashMap
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
        at com.a.VCLReduce0.reduce(VCLReduce0.java:38)
        at com.a.VCLReduce0.reduce(VCLReduce0.java:1)
        at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:519)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:416)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
        at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:00:23.180

在 Eclipse 中检查您的运行时类路径（尽管默认情况下该库应该确实存在）。我猜你是在 Eclipse 中使用 Run 菜单运行它。

1.  右键单击您的主类。
2.  选择“运行方式-> 运行配置...”
3.  展开对话框左侧的 Java 应用程序。如果您看到列出的主类，请选择它，否则单击“新启动配置”选项并确保它在“主类”字段中显示您的主类名称。
4.  单击 ClassPath 选项卡，查看是否列出了您的 Trove.jar 文件。如果没有，则添加它并运行该应用程序。

如果它在类路径上，则可能是 Trove-1.0.2 jar 本身具有您尚未添加到构建路径中的依赖项，尽管我已经与 Maven Central 进行了检查，但似乎并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:22:04.117

要在 hadoop 上运行作业，您需要有一个独立的 jar 文件，其中包含在 jar 中解压缩或在清单中指定的依赖项。

有关从 eclipse 运行 hadoop 作业的一些提示，请参阅此问题：[Launch a mapreduce job from eclipse](https://stackoverflow.com/questions/11236305/launch-a-mapreduce-job-from-eclipse)

他们还提到了这篇文章，它似乎有一些关于设置 Eclipse 的好信息：http: [//www.mapr.com/blog/basic-notes-on-configuring-eclipse-as-a-hadoop-development-environment- for-mapr](http://www.mapr.com/blog/basic-notes-on-configuring-eclipse-as-a-hadoop-development-environment-for-mapr)

# ruby - 是否有“包含”的反向语法版本？在核心/标准库中？

> ID：15252212
> 
> 赞同：1
> 
> 时间：2013-03-06T16:03:45.077
> 
> 标签：ruby

我常用`[1, 2, 3].include? foo`成语。这本身并没有什么问题，但是为了可读性，能够编写`foo.is_in? [1, 2, 3]`. 核心或标准库是否有方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:07:10.893

不，标准中没有这种方法。自己实现它：

```
class Object
  def is_in? a
    return a.include?(self)
  end
end 
```

请注意，在上面的代码中，我从不检查 a 的类型，因此如果`include?`未为 a 定义，则会出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:32:23.543

与您想要的方式不完全相同，但您可以重写它

```
if [1, 2, 3].include? foo
  do_this
else
  do_that
end 
```

对此：

```
case foo; when 1, 2, 3
  do_this
else
  do_that
end 
```

# mysql - SQL 标准 UPSERT 调用

> ID：15252213
> 
> 赞同：8
> 
> 时间：2013-03-06T16:03:48.150
> 
> 标签：mysql, sql, hsqldb, upsert

我正在寻找一个标准的 SQL " `UPSERT`" 语句。如果存在，则一次调用插入和更新。

我正在寻找一个工作，高效和跨平台的电话。

我见过`MERGE`, `UPSERT`, `REPLACE`，`INSERT .. ON DUPLICATE UPDATE`但没有任何语句满足需求。

顺便说一句，我使用 MYSQL 和 HSQLDB 进行单元测试。我知道 HSQLDB 是有限的，可能无法满足我的需求，但即使没有它，我也找不到标准的方法。一个只有 MYSQL 和 HSQLDB 的语句现在也足够了。

我一直在四处寻找，但无法得到答案。

我的桌子：

```
CREATE TABLE MY_TABLE (
  MY_KEY varchar(50) NOT NULL ,
  MY_VALUE varchar(50) DEFAULT NULL,
  TIME_STAMP bigint NOT NULL,
  PRIMARY KEY (MY_KEY)
); 
```

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T16:28:31.317

MySQL 和 HSQLDB 都支持的唯一解决方案是查询您打算替换的行，并且有条件地是 INSERT 或 UPDATE。这意味着您必须编写更多的应用程序代码来补偿 RDBMS 实现之间的差异。

1.  开始交易。
2.  选择...更新。
3.  如果 SELECT 找到行，则 UPDATE。
4.  否则，插入。
5.  犯罪。

MySQL 不支持 ANSI SQL MERGE 语句。它支持 REPLACE 和 INSERT...ON DUPLICATE KEY UPDATE。[有关更多信息，请参阅我对“INSERT IGNORE”与“INSERT ... ON DUPLICATE KEY UPDATE”](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update/548570#548570)的回答。

* * *

回复评论：是的，另一种方法是尝试 INSERT 并查看它是否成功。否则，请执行 UPDATE。如果您尝试 INSERT 并遇到重复键，则会生成错误，这会在某些客户端界面中变成异常。在 MySQL 中这样做的缺点是，即使 INSERT 失败，它也会生成一个新的自动增量 ID。所以你最终会出现差距。我知道自动增量序列中的间隙通常不用担心，但我去年帮助了一位客户，由于这种影响，成功插入之间的间隙为 1000-1500，结果是他们用尽了INT 在他们的主键中。

正如@baraky 所说，可以改为先尝试 UPDATE ，如果这影响零行，则改为执行 INSERT 。我对这个策略的评论是更新零行也不例外——你必须在更新之后检查“受影响的行数”才能知道它是否“成功”。

但是查询受影响的行数会让您回到最初的问题：您必须在 MySQL 和 HSQLDB 中使用不同的查询。

数据库：

```
CALL DIAGNOSTICS(ROW_COUNT); 
```

MySQL：

```
SELECT ROW_COUNT(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T16:10:19.257

# javascript - 数组的打字稿编译错误

> ID：15252214
> 
> 赞同：0
> 
> 时间：2013-03-06T16:03:49.163
> 
> 标签：javascript, node.js, compiler-construction, typescript, npm

有两个打字稿文件：

*   一个实现类 Client 的模块

```
export class Client { 
```

*   导入模块并创建客户端数组的主文件

```
import c = module("client")
//...
class Server {
    constructor() {
        this.clients = new c.Client[]; 
```

编译代码似乎工作正常。但是当我尝试使用 nodejs 运行生成的 javascript 时，它抱怨存在语法错误：

```
this.clients = new (); 
```

在客户端也有打字稿代码。但是我没有使用模块，而是使用声明路径和 --out 编译器标志将所有内容编译到一个 .js 文件中。客户端代码中的数组创建没有问题。在javascript中有

```
this.arr = new Array(); 
```

所以很明显编译器只是忘记添加指定一个数组是用`new()`. 我通过插入缺失的部分手动修复了错误。但是在对代码稍作改动并重新编译后，同样的问题又出现了。我正在使用 typescript 版本 0.8.3 并通过 npm 安装。我能做些什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:38:02.333

我假设您的类 Server 将客户端定义为 c.Client 对象的数组，因此它实际上如下所示：

```
class Server {
    clients: c.Client[];
    constructor() {
        this.clients = new c.Client[];
    }
} 
```

我不确定为什么要编译这段代码，因为它实际上是一个语法错误。它不适合我。

您混合了两种不同的方式来声明一个数组：*new Array()*和*[]*。只需将您的行更改为此，您应该一切顺利：

```
this.clients = []; 
```

# php - SyntaxError：ajaxFileUpload jquery 插件中的语法错误

> ID：15252221
> 
> 赞同：0
> 
> 时间：2013-03-06T16:04:08.293
> 
> 标签：php, jquery, ajax

我想通过文件传递其他参数以保存在数据库中。当我输入代码以获取这些变量并保存在数据库中时，它会给我警报“SyntaxError：语法错误”......这是我的代码

```
$.ajaxFileUpload
    ({
    url:'popup/doc_mydeal.php',
    secureuri:false,
    fileElementId:'deals_documents',
    dataType: 'json',
    data:{rand_key: $('#rand_key').val(), document_name: $('#document_name').val()},
    success: function (data, status)
            {
     if(typeof(data.error) != 'undefined')
                {
                if(data.error != '')
                {
                 alert(data.error);
                 }
             }
            },
            error: function (data, status, e)
            {
                alert(e);
            }
        }) 
```

现在在 doc_mydeal.php

```
$tempFile = $_FILES['deals_documents']['tmp_name'];
$targetFile=$path.$_REQUEST['rand_key'].basename($_FILES['deals_documents']['name']);
move_uploaded_file($tempFile,$targetFile); 
```

这是保存在数据库中的mysql查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:22:41.287

当您在 jQuery AJAX 调用的选项中指定 a`dataType`时`json`，您是在告诉代码服务器将返回有效的 JSON。基于此信息，jQuery 将隐式解析响应文本为 JSON，将结果对象作为回调函数的参数传递。

如果响应文本*不是*有效的 JSON，则解析将失败，而`error`将执行回调。正如评论中所指出的，您从 PHP 脚本返回的内容是无效的 JSON。

# c# - C#，循环遍历数据集并显示数据集列中的每条记录

> ID：15252223
> 
> 赞同：24
> 
> 时间：2013-03-06T16:04:12.473
> 
> 标签：c#, foreach, dataset

在 C# 中，我试图遍历我的数据集以显示来自特定列的每一行的数据。我希望在列名“TaskStart”下获取每个日期并将其显示在报告中，但它只显示所有行的第一行的日期，有人可以帮忙吗？

```
 foreach (DataTable table in ds.Tables)
 {

     foreach (DataRow dr in table.Rows)
     {
         DateTime TaskStart = DateTime.Parse(
             ds.Tables[0].Rows[0]["TaskStart"].ToString());
         TaskStart.ToString("dd-MMMM-yyyy");
         rpt.SetParameterValue("TaskStartDate", TaskStart);
     }
 } 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-06T16:06:27.370

我相信您的意图更多是这样：

```
foreach (DataTable table in ds.Tables)
{
    foreach (DataRow dr in table.Rows)
    {
        DateTime TaskStart = DateTime.Parse(dr["TaskStart"].ToString());
        TaskStart.ToString("dd-MMMM-yyyy");
        rpt.SetParameterValue("TaskStartDate", TaskStart);
    }
} 
```

您总是访问数据集中的第一行。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-06T16:06:03.213

```
DateTime TaskStart = DateTime.Parse(dr["TaskStart"].ToString()); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-18T12:14:36.947

```
foreach (DataRow dr in ds.Tables[0].Rows)
{
    //your code here
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-01T08:21:31.370

```
foreach (DataTable table in ds.Tables)
{
    foreach (DataRow dr in table.Rows)
    {
        var ParentId=dr["ParentId"].ToString();
    }
} 
```

# c# - 将数组转换为字典，值作为项目的索引，键作为项目本身

> ID：15252225
> 
> 赞同：41
> 
> 时间：2013-03-06T16:04:21.910
> 
> 标签：c#, linq, dictionary

我有一个数组，例如-

```
arr[0] = "Name";
arr[1] = "Address";
arr[2] = "Phone";
... 
```

我想创建一个`Dictionary<string, int>`这样的数组值将是字典键，字典值将是索引，这样我就可以通过在`O(1)`. 我知道这应该相当简单，但我无法理解它。

我试过了 -

```
Dictionary<string, int> myDict = arr.ToDictionary(x => x, x => indexOf(x)) 
```

但是，这会返回-

```
{(Name, 0), (Address, 0), (Phone, 0),...} 
```

我知道发生这种情况是因为它存储了第一次出现的索引，但这不是我想要做的。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-06T16:06:09.367

您可以使用`Select`包含索引的重载：

```
var dictionary = array.Select((value, index) => new { value, index })
                      .ToDictionary(pair => pair.value, pair => pair.index); 
```

或使用`Enumerable.Range`：

```
var dictionary = Enumerable.Range(0, array.Length).ToDictionary(x => array[x]); 
```

请注意，`ToDictionary`如果您尝试提供两个相等的键，则会引发异常。您应该仔细考虑您的数组中是否有两个相等的值，以及您希望在这种情况下发生什么。

不过，我很想手动进行：

```
var dictionary = new Dictionary<string, int>();
for (int i = 0; i < array.Length; i++)
{
    dictionary[array[i]] = i;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-31T22:26:25.907

另一种方法是：

```
var dictionary = arr.ToDictionary(x => Array.IndexOf(arr, x)); 
```

# java - BasicProgressBarUI.getPrefrerrredSize 的空指针异常

> ID：15252229
> 
> 赞同：0
> 
> 时间：2013-03-06T16:04:32.700
> 
> 标签：java, swing

执行`SaveDialog`class `setVisible(true`) 行时出现以下异常。

当用户点击**保存**按钮时，该程序将启动。然后它将在尝试保存序列化对象数据时显示状态对话框。

```
public class SaveController implements ActionListener,Serializable{
    private JButton = new JButton("Save");
    public SaveController(){
         saveButton.addActionListener(this);
    }
    actionPerformed(ActionEvent ae){
       if(ae.getSource == saveButton){
             new saveDialog();
       }
    }
}

public saveDialog extends JDialog{
    public saveDialog(){

         SwingUtilites.invokeLater(new Runnabe()(
            public void run(){
                   // set up gui layout...add status lister
                   pack();
                   setVisible(true);// this is where it crashes
            }
         }
         SaveTask task = new SaveTask();
         task.addEventListener(this);
         task.execute()
     }
}

public class SaveTask extends SwingWorker<void,void>{

    public void doInBackground(){
        File f = new File("file");
        f.createNewFile();
        OutputStream file = new OutputStream("file");
        OutputStream buffer = new BufferedOutputStream(file);
        ObjectOutput output = new ObjectOutputStream(buffer);
        output.writeobject(object);
    }
} 
```

# c# - WPF“撤消”深拷贝

> ID：15252232
> 
> 赞同：3
> 
> 时间：2013-03-06T16:04:37.803
> 
> 标签：c#, wpf, xaml, nhibernate

**现在的情况**

我有一个使用 MVVM 和 NHibernate 的 WPF 应用程序。我有一个包含所有客户的列表框的主/详细信息窗口，并且列表框的 selectedItem 是用于在详细信息屏幕中显示客户详细信息的对象。在详细信息屏幕中，我有一个添加、编辑、删除、保存和撤消按钮。一切都适用于我设置的绑定。

**问题**

但是对于我的撤消按钮，我正在考虑制作原始客户对象的副本，因此当我单击撤消按钮时，该字段将重置为原始值的值。但是在我的客户对象中，我有一个地址对象，并且通过浅拷贝，这两个对象将保持对该对象的相同引用。因此，当我从 Address 对象更改字段时，原始客户地址也将更改。我正在考虑对我的客户地址进行深层复制，但我无法使我的对象可序列化（更改模型对象不在我的控制范围内）

*   有没有办法在没有序列化的情况下进行深度复制？
*   还是有一些标准的方法来完成我想要实现的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:33:16.753

我会简单地返回数据库并重新加载客户对象。这可确保您显示的数据与数据库中的数据一致，并降低并发问题的风险。

# javascript - 页面重新加载后 PrimeFaces ViewExpiredException

> ID：15252234
> 
> 赞同：3
> 
> 时间：2013-03-06T16:04:40.583
> 
> 标签：javascript, jsf, primefaces, reload, myfaces

我有`PrimeFaces.ajax.AjaxResponse`处理 ViewExpiredException 的包装器（重新加载页面）：

```
var handleViewExpired = function (viewId) {
    window.alert('${msg.ajax.viewExpired}');
    window.location.reload();
}; 
```

但是，有时在尝试单击站点上调用 AJAX 请求的任何内容后，我会一遍又一遍地收到该错误：

```
javax.faces.application.ViewExpiredException: /tree.xhtmlNo saved view state could be found for the view identifier: /tree.xhtml
    at org.apache.myfaces.lifecycle.RestoreViewExecutor.execute(RestoreViewExecutor.java:128) 
```

我是否以错误的方式刷新？我应该怎么做才能调用整页重新加载，例如在浏览器中单击重新加载？我需要删除 cookie（JSESSIONID、oam.Flash.RENDERMAP.TOKEN）吗？

我正在使用 PrimeFaces 3.5 和在 WebSphere 7.0 上运行的 MyFaces 2.0.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:19:38.220

如果您在会话中同时打开了许多 (>15) 页面/视图/框架，那么以下内容可能会有用。

你需要看看：

1\. numberOfViewsInSession：定义（顶层）视图状态（页面）的数量，以支持后退按钮操作

2\. numberOfLogicalViews：定义一个页面（每个顶层视图）可以呈现的逻辑视图（框架）的数量

确定是否相关的快速操作是将这些数字设置为 500，然后查看它们是否相关，然后，您可以在以下链接中找到更多信息：

[http://www.java.net/node/681211](http://www.java.net/node/681211)

[numberOfViewsInSession 和多个选项卡的问题](https://stackoverflow.com/questions/4547424/problem-with-numberofviewsinsession-and-multiple-tabs)

# string - C++/CLI 从 String^ 转换为数组

> ID：15252235
> 
> 赞同：2
> 
> 时间：2013-03-06T16:04:42.640
> 
> 标签：string, c++-cli, bytearray

我有一个用 C++/CLI 编写的串口应用程序

从我正在使用的端口输入缓冲区读取数据

```
String^ inputString = System::IO:Ports::SerialPort::ReadExisting(); 
```

我需要将 inputString 值转换为字节数组。我试过使用

```
array<Byte> ^unicodeBytes = System::Text::Encoding::Unicode->GetBytes( inputString ); 
```

只要读入我的端口输入缓冲区的值小于 0x7F（十六进制），它就可以工作。任何大于的值`0x7F`都会转换为`0x3F`= "?"

`{0x7F, 0xFF}`例如，如果我向我的输入端口发送两个字节，那么当我`unicodeBytes = { 0x7F 0x00, 0x3F 0x00}`在 VS2008 的调试器监视窗口中查看并转换数组时

根据我查看过的 unicode 表，OxFF 是一个有效的 unicode 值，等于一个拉丁小写字母“y”，上面有两个小点。

任何关于如何将带有两个小点 = 0xFF 的字符串格式的 'y' 转换为字节数组中的 0xFF 的任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-17T23:16:23.803

使用`SerialPort`'`Read`方法获取字节而不是解码编码文本：

```
int BufferSize = <some size>;
array<byte> ^bytes = gcnew array<byte>(BufferSize);
int available = serialPort->BytesAvailable;
serialPort->Read(bytes, 0, Math::Min(available, BufferSize)); 
```

# ios - 来自图像的 UIBezierPath

> ID：15252237
> 
> 赞同：6
> 
> 时间：2013-03-06T16:04:45.627
> 
> 标签：ios, objective-c, image-processing, uiimage, uibezierpath

我有几个看起来与此类似的 png 文件：

![在此处输入图像描述](../Images/7125862a58e78a9f99146771331e66f4.png)

一切都是透明的，只有黑色的路径。我想做的是从非透明部分创建一个 UIBezierPath 。

编辑：所以我在想如何用 png 创建一个蒙版，然后从蒙版转到 UIBezierPath。那行得通吗？

再次编辑：我找到了解决方案，看看我的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:25:24.527

我走了一个不同的方向。我没有使用 PNG，而是使用 SVG 并使用[PocketSVG](https://github.com/arielelkin/PocketSVG)来解析文件。它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:23:19.223

您正在寻找的过程称为骨架化，这篇文章中有一个很好的技术总结： [确定弯曲、拉长区域的中线](https://stackoverflow.com/questions/4555682/determine-the-midline-of-a-bent-elongated-region)

# uiscrollview - initWithCoder 为 frame 属性返回 0 值

> ID：15252242
> 
> 赞同：3
> 
> 时间：2013-03-06T16:04:52.040
> 
> 标签：uiscrollview, storyboard, initwithcoder

我对 uiscrollview 进行了分类，并使用 initWithCoder 为我的 uiscrollview 准备了所有子视图。我使用下面的代码来设置它：

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder])) {

    NSLog(@"%f", self.frame.size.height);

    self.contentSize = CGSizeMake(5000, self.frame.size.height);

    labelContainerView = [[UIView alloc] init];
    labelContainerView.frame = CGRectMake(0, 0, self.contentSize.width, self.contentSize.height/2);
    labelContainerView.backgroundColor = [UIColor yellowColor];
    [self addSubview:labelContainerView];
} 
```

但这一直失败，因为 self.frame 属性总是返回 0 值。**使用self.frame**属性对我来说非常重要，因为我想使用情节提要对滚动视图的框架进行任何高度调整。

我使用 xib 文件而不是使用情节提要尝试了同样的事情，它工作正常。但在我的项目中，我不想使用 xib 文件。

如果有人能解释我为什么在使用情节提要时在 initWithCoder: 方法中得到 0 值，那就太好了？如果使用情节提要如何实现这一目标？

PS：我注意到**layoutSubviews**方法返回正确的帧信息，但我无法在这里创建我的子视图，因为每次帧更改都会调用它（当我滚动时）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T19:21:42.810

您是否在情节提要中使用自动布局？

如果您真的没有利用它，您可以禁用它，您的 -initWithCoder: 方法将再次返回您的框架。

如果您**确实需要 Autolayout**，请尝试以下操作：

```
-(void)awakeFromNib
{
    [super awakeFromNib];

    [self setNeedsLayout];
    [self layoutIfNeeded];

    // self.frame will now return something :)
} 
```

# php - 用于编码 UTF8 的 Postgresql PHP 无效字节序列

> ID：15252243
> 
> 赞同：12
> 
> 时间：2013-03-06T16:04:59.673
> 
> 标签：php, postgresql, pdo

我有一个用于插入表的简单 SQL 语法。我正在使用 Postgresql 8.4，并且已经将数据库编码设置为 UTF8，并将 POSIX 设置为排序规则和字符类型。

如果我在 pgadmin3 下运行查询很好，但如果我在 PHP 中执行会带来错误。

```
"Internal Server Error: SQLSTATE[22021]:
Character not in repertoire: 7 ERROR: 
invalid byte sequence for encoding \"UTF8\": 0xd85b\nHINT:
This error can also happen if the byte sequence does not match the encoding expected by the server,
which is controlled by \"client_encoding\" 
```

所以我尝试从 PHP(PDO) 设置 NAMES 和 client_encoding，但仍然有同样的问题

```
$instance->exec("SET client_encoding = 'UTF8';");
$instance->exec("SET NAMES 'UTF8';"); 
```

`pg_set_client_encoding($link, "UNICODE");`如果我使用本机 postgresql 驱动程序，我会工作`pg_pconnect`，但目前我使用 PDO 作为驱动程序。

我也已经设置了`mb_internal_encoding('UTF-8');`

有没有其他方法可以解决这个问题？

仅当我尝试插入非 ascii 单词（如阿拉伯语或日语单词）时才会出现此错误

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T11:41:08.170

尝试使用 utf8_encode() 编码为 utf-8。

```
$query = "INSERT INTO student (id, firstName, lastName, age) VALUES (1, 'myFisrtName', 'myLastName', 23)";

pg_exec($connection, utf8_encode($query )); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-23T10:54:03.540

在较早的帖子上回答，但是，我遇到了类似的情况，在 CSV 导入期间，我注意到了错误： `invalid byte sequence for encoding "UTF 8": 0x95 in ....`

我已通过使用以下方法将 PHP 中的编码从 Windows-1252 转换为 UTF-8 来修复错误： `mb_convert_encoding($fieldValue,'UTF-8','Windows-1252')`

```
 $query = "INSERT INTO student 
              (id, firstName, lastName, age) 
              VALUES 
              (1, '".mb_convert_encoding($firstName,'UTF-8','Windows-1252')."', 
                  '".mb_convert_encoding($lastName,'UTF-8','Windows-1252')."', 23)"; 
```

希望这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-08T10:57:18.330

我将无法提交正确的 unicode SQL 查询（用于**java的****quercus**与 unicode 不同，所有工作都像“SET NAMES 'UTF8';”没有工作），我通过**Base64 转换**解决了这个问题：

 ****```
$name_enc = base64_encode($name);       
$res = $db->prepare(
            'INSERT INTO "MyTable"("ID", "Name") VALUES
               (   nextval(\'gen_addresses\'), 
                   convert_from(decode(?, \'base64\'), \'UTF8\'));' 
     )->execute(array($name_enc)); 
```****

# python - 为什么我不能在字符图像被 blit 时对背景图像进行 blit？

> ID：15252247
> 
> 赞同：0
> 
> 时间：2013-03-06T16:05:09.307
> 
> 标签：python, image, screen, pygame, blit

我正在尝试为我的游戏显示背景图像，但是当我对其进行 blit 时，它只会在屏幕上显示我的主要可玩角色，并带有黑色背景。谁能帮我解决这个问题。

这是代码：

```
import sys, pygame, os
pygame.init()

size = width, height = 320, 240
xREVERSEspeed = [-2, 0]
xspeed = [2, 0]

screen = pygame.display.set_mode(size)
pygame.display.set_caption("Game")
os.environ['SDL_VIDEO_WINDOW_POS'] = 'center'

ball = pygame.image.load("turret.png").convert_alpha()
background = pygame.image.load("scoreframe.png").convert()
ballrect = ball.get_rect(center=(160, 231))
BACKGROUNDrect = background.get_rect()
clock = pygame.time.Clock()

while True:
    clock.tick(60)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            sys.exit()    
        if event.type == pygame.KEYDOWN:
                if event.key == pygame.K_LEFT:
                        print "I've pressed the LEFT arrow button."
                        ballrect = ballrect.move(xspeed)
                        print ballrect
                if event.key == pygame.K_RIGHT:
                        print "I've pressed the RIGHT arrow button."
                        ballrect = ballrect.move(xREVERSEspeed)
                        print ballrect

    screen.blit(ball, ballrect, background, BACKGROUNDrect)
    pygame.display.flip() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:24:55.573

我不知道您在粘贴时是否搞砸了，但是您的“if event.type”不是“while 1：”

无论如何试试这个：

```
while 1:
    clock.tick(60)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            sys.exit()

    if event.type == pygame.KEYDOWN:
        if event.key == pygame.K_LEFT:
            print "I've pressed the LEFT arrow button."
            ballrect = ballrect.move(xspeed)
            print ballrect
        if event.key == pygame.K_RIGHT:
            print "I've pressed the RIGHT arrow button."
            ballrect = ballrect.move(xREVERSEspeed)
            print ballrect
    screen.blit(background,(BACKGROUNDrect))
    screen.blit(ball,(ballrect))
    pygame.display.flip() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:21:23.577

首先，您的缩进是错误的，但我认为这是一个错字。您的事件部分与您的游戏 while 循环处于同一级别，它应该在里面。bliting 和翻转也是。我还看到您错误地使用了 blitting 功能。来自 pygame 文档：

```
Surface.blit(source, dest, area=None, special_flags = 0): return Rect 
```

它将一个表面 blit`source`到由`Surface`给出的目标处`dest`，可选地，`area`它是一个矩形，它定义了要被 blitted 的源表面的子表面。您必须分别对角色和背景图像进行 blit。所以你应该这样做：

```
screen.blit(background,(0,0))
screen.blit(ball,ballrect) 
```

# objective-c - 列出项目的所有 UIViewControllers

> ID：15252248
> 
> 赞同：2
> 
> 时间：2013-03-06T16:05:12.223
> 
> 标签：objective-c, cocoa, automation, uikit, automated-tests

为了屏幕截图的自动化和测试目的，我想**列出我项目的所有`UIViewController`类**。
我不希望获得所有 UIKit 视图控制器的列表，我只想要我在项目中创建的那些。

我想在运行时在 Objective-C 代码中执行此操作，因为我需要实例化一些列出的类。
例如，在我的单元测试中，我可能想要一个断言所有 UITableViewCell 子类返回的高度与 xib 中相关项的高度相同的测试，并且该对象不是 UIView 子类而是 UITableViewCell 子类。另一个预期用途是将我所有课程
的屏幕截图添加到项目文档中。`UIViewController`

请注意，此代码不会发送给客户。它只会用于在开发人员机器上进行测试和编写脚本。

我想我可以解析 pbxproj 中包含的文件，但这感觉不对且不可靠。
我的项目上的一个简单`ls *ViewController.h`的项目也可以，但对它有同样的感觉。
还有什么想法吗？

如果我可以在其他类上以这种方式扩展，例如获得所有`UITableViewCells`我创建的或所有`UIViews`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:17:21.837

使用我的[NSObject+Subclasses](https://gist.github.com/0xced/5107798)类别，您可以轻松获取`UIViewController`.

要仅获取**您的**视图控制器，请像这样过滤它们：

```
NSSet *myViewControllerClasses = [[UIViewController subclasses_xcd] filteredSetUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
    return [[NSBundle bundleForClass:evaluatedObject] isEqual:[NSBundle mainBundle]];
}]]; 
```

`myViewControllerClasses`然后你可以对包含`Class`对象的内容做任何你想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:46:04.647

使用运行时，有点难。您可以使用`class_t`和`class_rw_t`（类对象的数据成员）的定义来有效地探索子类树。

要过滤您的类，您可能需要查看类名（前缀）的开头，或者如果已为您的项目创建了一个基础 VC 类，则可能需要查看该类的开头。

看[这篇文章](http://www.cocoawithlove.com/2010/01/getting-subclasses-of-objective-c-class.html)

# javascript - Touchstart en Touchmove 不能与多点触控一起使用

> ID：15252249
> 
> 赞同：1
> 
> 时间：2013-03-06T16:05:13.180
> 
> 标签：javascript, touch, touch-event

我有一个非常奇怪的问题，我似乎无法弄清楚是什么原因造成的。我的问题是，当我触发 touchstart 事件时，它不再触发 touchmove 事件。我尝试了很多不同的东西，甚至没有运气将它完全转换为hammerJS。

我的问题的 jsBin 示例：http: [//jsbin.com/ayibeq/8/](http://jsbin.com/ayibeq/8/)

**触摸事件：**

```
 steering_wheel.addEventListener("touchmove", function(e){
      steering_wheel_rotate(steering_wheel,e);      
  });
  gas_paddle.addEventListener("touchstart",function(e){
    keyFaster = true;
    keySlower = false;
  });
  gas_paddle.addEventListener("touchend",function(e){
    keyFaster = false;
    keySlower = true;
  });
  break_paddle.addEventListener("touchstart",function(e){
    keySlower = true;
    keyFaster = false;
  });
  break_paddle.addEventListener("touchend",function(e){
    keySlower = true;
    keyFaster = false;
  }); 
```

到目前为止，我已经设法弄清楚它与 touchstart 之后发生的 touchmove 有关。因此，如果您先使用方向盘，然后使用其中一个气桨，它就可以了，但是当您先使用气桨，然后再使用方向盘时，它就不再起作用了。

它可能是我忽略的一些非常愚蠢的事情。

**到目前为止** ，我已经设法将其范围缩小到仅是 android 4.1 和 4.2 设备的问题。IOS 4+ 现在的方式没有问题。

# javascript - wordpress - 管理员的 javascript 验证钩子

> ID：15252257
> 
> 赞同：1
> 
> 时间：2013-03-06T16:05:31.257
> 
> 标签：javascript, wordpress

我正在尝试为 wordpress 管理表单构建一些自定义的后验证行为，我想知道是否有一种方法可以在某处向某些代码添加侦听器以捕获验证结果。我主要对使用 javascript 执行此操作感兴趣，因为我的问题是基于 UI 的。

谢谢。

# html - 自定义下拉框

> ID：15252261
> 
> 赞同：-6
> 
> 时间：2013-03-06T16:05:47.367
> 
> 标签：html, select

我正在制作这种类型的下拉菜单，如给定图像所示。![在此处输入图像描述](../Images/ee7d4b57555a889e4c55561cf50277dd.png)

任何人都可以告诉我我怎么能得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:11:50.870

您可以给它一个类，然后在 CSS 中编辑元素。[这将教你基础知识](http://bavotasan.com/2011/style-select-box-using-only-css/)

所以在 HTML 中你给它一个类：

```
<div class="styled-select">
   <select>
      <option>First option</option>
      <option>Second option</option>
   </select>
</div> 
```

现在您可以添加 CSS，请参见上面的链接：D

做一个快速的谷歌搜索，你会看到大量的帮助

# plesk - 更改了 Plesk 使用的 Windows 用户密码，现在我的 Plesk 控制面板出现 500 错误

> ID：15252265
> 
> 赞同：0
> 
> 时间：2013-03-06T16:05:53.937
> 
> 标签：plesk

我的老板忘记了我们托管 Plesk 的 VPS 的密码，所以我手动更改了密码，现在当我尝试进入 VPS 外部的控制面板时，我收到 500 错误。

有人知道更改 Windows 密码的 Plesk 配置在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T09:34:20.727

通常，出于安全原因，Plesk Panel 不允许对 web.config 文件进行任何手动更改。您应该从网站和域选项卡下的 ASP.Net 设置中更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T20:16:25.267

如果您可以访问您的 Windows VPS 服务器 - 如果您需要访问 PLESK 并且您不知道密码 - 解决方案非常简单 - 您需要访问 mysql 数据库并从那里重置密码：

使用远程桌面连接连接到您的 Windows 专用服务器。从开始菜单中，选择运行。在“运行”对话框中，键入：“%plesk_bin%\plesksrvclient”-get

[http://kb.sp.parallels.com/en/473](http://kb.sp.parallels.com/en/473) 或 [https://support.managed.com/kb/a553/retrieving-and-sharing-plesk-admin-password.aspx](https://support.managed.com/kb/a553/retrieving-and-changing-plesk-admin-password.aspx)

# .net - VB.NET 中带有动态第二个参数（类型）的 CType

> ID：15252266
> 
> 赞同：13
> 
> 时间：2013-03-06T16:05:55.593
> 
> 标签：.net, vb.net, casting

在 VB.NET 中，CType 可用于将一种类型转换为另一种类型。

```
CType(expression,type) 
```

我将“表达式”存储在一个实例对象类中，比如说`"objExp"`。我将“类型”存储在 Type 类的实例中，比如`"objType"`.

我正在尝试`CType(objExp, objType)` 出现编译错误，我应该怎么做？" `objType`" 在运行时被获取和分配。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-02-11T14:55:58.007

您是否查看过[CTypeDynamic](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28MICROSOFT.VISUALBASIC.CONVERSION.CTYPEDYNAMIC%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-VB%29&rd=true) () 方法？第二个参数（即：类型）可以动态设置。非常适合使用反射时。

例如：

```
CTypeDynamic(strValueToConvert, objTypeToConvertTo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:08:00.320

这根本不可能。`CType`表达式必须传递一个`Type`在编译时已知的实例，例如,`Integer`等`String`......它不接受类型的值`Type`

# c# - 将日期时间调整为 DST

> ID：15252267
> 
> 赞同：3
> 
> 时间：2013-03-06T16:05:56.843
> 
> 标签：c#, datetime, timezone, dst, datetimeoffset

为了保持简短和甜蜜，我有 2 台 PC：

> PC 1 已关闭夏令时
> 
> PC 2 已打开 DST。
> 
> PC 1 向 PC 2 发送一个 DateTime，它需要并使用它来设置它的时间。

以上所有我都有，但我的问题是，当 PC 2 收到 DateTime 时，我如何检查它是否需要 DST 调整？

个人电脑是英国的。

编辑：- 更多细节以防有混淆。当 PC 2 从 PC 1 检索时间时，它会将系统时间更改为此值，但我需要确保如果需要 +/- 1 小时 (DTS)，则在设置系统日期和时间之前应用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:09:28.907

我建议使用 UTC 进行传输和持久性。

还要注意不要将日期时间用作算法的关键部分——它只是数据。日期和时间会发生变化并自行纠正。我见过应用程序在 PC 纠正它的时间时崩溃 :)

这是另一篇包含有关该主题的更多信息的帖子： [夏令时和时区最佳实践](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:44:57.570

您没有显示任何代码，但您将问题标记为[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")，所以我将从这个角度回答。

如果您只需要确保您谈论的是同一时刻，请使用`DateTime`with `.Kind = DateTimeKind.Utc`，例如 is 获得 from `DateTime.UtcNow`。

如果您确实需要知道 PC1 认为这是一次，而 PC2 认为是另一次，并且您仍然想知道这两个事物代表同一时间，那么使用`DateTimeOffset`. 这将包括计算机的本地日期和时间，以及日期和时间表示的与 UTC 的偏移量。

无论采用哪种方法，您都应该使用[ISO8601](http://en.wikipedia.org/wiki/Iso8601)格式进行传输和持久化，这样无论观察者的文化或时区如何，您的意思都会很清楚。在 .Net 中，这是`.ToString("o")`从 a`DateTime`或`DateTimeOffset`.

ISO8601 格式的 UTC`DateTime`如下所示：

```
2013-03-06T09:00:00Z 
```

ISO8601 格式的 A`DateTimeOffset`如下所示：

```
2013-03-06T10:00:00+01:00 
```

.Net 将此称为[往返](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Roundtrip)模式 - 因为它是为您描述的确切目的而设计的。

有关进一步说明`DateTimeOffset`- 请参阅[此帖子](https://stackoverflow.com/a/14268167/634824)。

# ubuntu - Sublime 启动时没有菜单栏

> ID：15252271
> 
> 赞同：1
> 
> 时间：2013-03-06T16:06:08.793
> 
> 标签：ubuntu, sublimetext2

在 VirtualBox 中的 Ubuntu 下，我在 /opt 中安装了 Sublime，并在 /usr/bin 中创建了一个名为 sublime 的链接（ln）

当我只是从终端窗口调用 sublime 或使用任务栏中的 Ubunto 键时，Sublime 启动时没有窗口顶部的菜单栏。（因此无法保存菜单，例如）

当我使用 sudo sublime 启动 sublime 时，一切正常，但是我需要在每次启动程序时提供密码。

我怎样才能在没有 sudo 的情况下启动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:13:10.030

尝试将 Sublime 安装在不同的目录中。
您的主目录应该没问题，但允许您在不使用 sudo 的情况下保存文件的任何其他目录也是如此。

编辑：我现在看到我误解了你的问题，所以它不以这种方式工作也就不足为奇了。对不起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T11:35:09.803

要重置 Sublime 菜单，请在终端中执行：

initctl 重启统一面板服务

希望对你有帮助 ：）

# android - 在 Android 中使用 AChartEngine 的条形图

> ID：15252278
> 
> 赞同：0
> 
> 时间：2013-03-06T16:06:28.430
> 
> 标签：android, achartengine

我正在尝试在 eclipse/android Sdk 中创建一个图表，我正在逐步遵循不同的教程，但是在任何地方我都有同样的问题，该图表不想显示（我没有错误，我可以编译我的程序）。目前我正在使用 AChartEngine 库。有什么建议么？

```
 package com.example.linegraph;

    import org.achartengine.ChartFactory;
    import org.achartengine.model.TimeSeries;
    import org.achartengine.model.XYMultipleSeriesDataset;
    import org.achartengine.renderer.XYMultipleSeriesRenderer;
    import org.achartengine.renderer.XYSeriesRenderer;

    import android.content.Context;
    import android.content.Intent;

    public class LineGraph {

        public Intent getIntent (Context context)
        {
            int[] x={1,2,3,4,5,6,7,8,9,10};
            int[]y={11,22,33,44,55,66,77,88,99,11};

            TimeSeries series =new TimeSeries("Line1");

            for (int i=0;i<x.length;i++)
            {
                series.add(x[i],y[i]);

            }
            XYMultipleSeriesDataset dataset =new XYMultipleSeriesDataset();
            dataset.addSeries(series);

            XYMultipleSeriesRenderer mRenderer=new XYMultipleSeriesRenderer();
            XYSeriesRenderer renderer =new XYSeriesRenderer();
            mRenderer.addSeriesRenderer(renderer);

            Intent intent=ChartFactory.getLineChartIntent(context, dataset, mRenderer,"Line Graph Title");
            return intent;

        }

    } 
```

MainActivity 如下

```
 package com.example.linegraph;

    import android.os.Bundle;
    import android.app.Activity;
    import android.content.Intent;
    import android.view.Menu;
    import android.view.View;

    public class MainActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        }

        public void lineGraphHandler (View view){
        LineGraph line= new LineGraph();
        Intent lineIntent=line.getIntent(this);
        startActivity(lineIntent);

        }
    } 
```

布局xml如下。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    </RelativeLayout> 
```

是的，这段代码应该显示图有教程上的链接-> [https://www.youtube.com/watch?v=-ThKImy6PPM](https://www.youtube.com/watch?v=-ThKImy6PPM) 其他东西，比如文本视图，除了图，也许我需要安装一些额外的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:10:41.587

我对 aChartEngine 没有任何经验，但是我不完全理解您的意图。我想这是为了让 aChartEngine 代码本身显示图表？

我看到的示例实际上在您的视图中呈现了图表。基本上，您需要一个带有 id 图表的 LinearLayout，它将呈现到其中。看：

[Java降临](http://www.javaadvent.com/2012/12/achartengine-charting-library-for.html)

和

[JaxEnter 博客](http://jaxenter.com/effort-free-graphs-on-android-with-achartengine-46199.html)

# actionscript-3 - as3中带有mouse_down的自定义光标

> ID：15252279
> 
> 赞同：0
> 
> 时间：2013-03-06T16:06:33.007
> 
> 标签：actionscript-3, custom-cursor

我想为我的自定义光标显示一个不同的光标，这是我到目前为止的代码。我已经创建了这个函数，但我不确定从这里去哪里。

理想情况下，我想将一个光标切换到另一个光标，或者在光标的时间轴内使用不同的帧。如果可以的话请帮忙。

```
import flash.display.Sprite;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.events.Event;
import flash.events.MouseEvent;

var myCursor:Sprite;

stage.align = StageAlign.TOP_LEFT;
stage.scaleMode = StageScaleMode.NO_SCALE;

function init()
    {
        Mouse.hide();

        myCursor = new CursorClass();
        myCursor.mouseEnabled = false;
        myCursor.visible = false;

        addChild(myCursor);

        stage.addEventListener(MouseEvent.MOUSE_MOVE, mouseMoveHandler);
        stage.addEventListener(Event.MOUSE_LEAVE, mouseLeaveHandler);
        stage.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    }

    function mouseMoveHandler(evt:MouseEvent):void
    {
        myCursor.visible = true;
        myCursor.x = evt.stageX;
        myCursor.y = evt.stageY;
    }

    function mouseDownHandler(evt:MouseEvent):void
    {

    }

    function mouseLeaveHandler(evt:Event):void
    {
        myCursor.visible = false;
    }

init(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:10:07.980

如果 myCursor 的时间轴与 mouseDownHandler 中的光标形状不同，请设置 myCursor.gotoAndStop(2)。否则，您可以使用库中某些 MovieClip 的实例更改 myCursor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:13:41.123

这个主题看起来像：

[Flex 3：鼠标悬停在文本输入上时如何更改鼠标光标？](https://stackoverflow.com/questions/778735/flex-3-how-can-i-change-the-mouse-cursor-when-mousing-over-a-text-input)

也许它会帮助你...

# dll - Team City 中的程序集版本控制和 Dll 版本控制

> ID：15252282
> 
> 赞同：16
> 
> 时间：2013-03-06T16:06:40.837
> 
> 标签：dll, teamcity, versioning, .net-assembly

我想要这些版本的格式

像这样.. {Major}.{Minor}.{Build}.{patch}

如何在团队城市的装配信息修补程序中进行设置？

这样它就会在每次构建时自动增加版本...

我需要一些指导和帮助...？！？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-06T16:37:32.257

TeamCity 可以使用*AssemblyInfo Patcher*构建功能为您版本化程序集。要利用这一点：

1.  创建一个名为`%Major.Minor%`. 将此手动设置为某个值，例如`1.0`.
2.  在“*常规设置”*选项卡上，将 设置`Build number format`为`%Major.Minor%.%build.vcs.number%.%build.counter%`。
3.  在*Build Steps*选项卡上，滚动到页面底部的*Additional Build Features 。*添加一个*Assembly Info Patcher*构建步骤。它将默认使用`%system.build.number%`您在步骤 2 中定义的 。

这将导致您的所有程序集都使用 进行版本控制`%system.build.number%`，其中包括主要和次要版本、VCS 修订版和 TeamCity 的增量内部版本号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-02T08:21:38.747

使用 Paul 建议的**File Content Replacer**构建功能，我们最终在项目中使用了以下版本控制方案：

[http://www.meadow.se/wordpress/generating-semantic-version-build-numbers-in-teamcity/](http://www.meadow.se/wordpress/generating-semantic-version-build-numbers-in-teamcity/)

设置有点复杂，但我们对结果感到满意。

/埃米尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T17:26:37.513

关于 Emil G 关于保留 AssemblyInfo 版本的第一个数字的问题，目前不可能：[https ://youtrack.jetbrains.com/issue/TW-20475](https://youtrack.jetbrains.com/issue/TW-20475)

不过会很好。

/埃米尔埃

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-15T11:38:14.987

现在可以通过文件内容替换器完成（自 TeamCity 9.1 起可用）：[https ://confluence.jetbrains.com/display/TCD9/File+Content+Replacer](https://confluence.jetbrains.com/display/TCD9/File+Content+Replacer)

# java - Spring单例和Java单例（设计模式）有什么区别？

> ID：15252284
> 
> 赞同：26
> 
> 时间：2013-03-06T16:06:42.357
> 
> 标签：java, spring, dependency-injection, singleton

我正在学习 Spring 框架，目前正在阅读一本关于它的书。在这本书中，它说 Spring 单例与 Java 单例不同？这是什么意思，有什么区别？谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-06T16:08:57.700

Java 单例由 Java 类加载器限定，Spring 单例由容器上下文限定。

这基本上意味着，在 Java 中，您可以确定单例仅在加载它的类加载器的上下文中才是真正的单例。其他类加载器应该能够创建它的另一个实例（假设类加载器不在同一个类加载器层次结构中），尽管您在代码中努力试图阻止它。

在 Spring 中，如果您可以在两个不同的上下文中加载单例类，那么我们可以再次打破单例概念。

因此，总而言之，如果 Java 不能在给定的类加载器中创建该类的多个实例，则 Java 将其视为单例，而 Spring 如果不能在给定容器中创建多个类的实例，则将其视为单例/语境。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T16:10:12.110

一个 Java 单例，根据设计模式，实例化被限制为一个，通常是每个~~JVM~~类加载器的代码。[[维基百科](http://en.wikipedia.org/wiki/Singleton_pattern)]

Spring 单例 bean 可以是您编写的任何普通类，但将其范围声明为单例意味着 Spring 将仅创建一个实例并提供对所有引用已声明 bean 的 bean 的引用。您的应用程序中可能有该类的许多实例，但只会*为该 bean*创建一个。您甚至可以将多个同一个类的 bean 都声明为单例。每个 bean 都将创建该类的一个实例。 [[Spring 3.1 文档](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-factory-scopes)]

# java - Restlet：在验证程序中检索 http 正文

> ID：15252285
> 
> 赞同：1
> 
> 时间：2013-03-06T16:06:51.650
> 
> 标签：java, api, rest, post, restlet

当我想在我的请求验证器中检索帖子的 http 正文时，它有点重置我的实体，当我想在我的资源类中获取 http 正文时，我得到一个空指针异常。

**验证者**：

```
JsonRepresentation jsonrep;
        try {
            Representation entity = request.getEntity();
            jsonrep = new JsonRepresentation(entity);
            //bug: entity resets when getJsonObject is being called.
            JSONObject jsonobj = jsonrep.getJsonObject();
            if(companyId != jsonobj.getInt("id_companies")){
                return Verifier.RESULT_INVALID;
            }
... 
```

**应用资源**：

```
@Post
public Representation addApp(Representation rep) throws Exception{
//rep is null
    JsonRepresentation jsonrep = new JsonRepresentation(rep); 
```

当我不打电话时：

```
 JSONObject jsonobj = jsonrep.getJsonObject(); 
```

它工作正常。

有没有人面临同样的问题或有解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:14:15.150

事实上，默认情况下，表示是一个不存储表示内容的 InputRepresentation。

在您的情况下，最简单的方法是将表示包装到您的验证程序中的 StringRepresentation 中：

```
Representation entity = request.getEntity();
StringRepresentation sEntity = new StringRepresentation(entity);
request.setEntity(sEntity);

JsonRepresentation jsonrep = new JsonRepresentation(sEntity);
```

然后，字符串表示将自动提供给您的服务器资源方法...

希望它可以帮助你。蒂埃里

# open-source - 开源或自由软件许可证的目的是什么？

> ID：15252287
> 
> 赞同：3
> 
> 时间：2013-03-06T16:06:58.920
> 
> 标签：open-source, licensing

我想从一开始就了解这些。假设我用某种语言编写了一些库，并将它们上传到[github.com](https://github.com/)以供公众访问。现在任何人都可以看到和*使用*它们。我不能阻止他们*使用*它，同时只允许他们*看到*代码，因为任何可以*看到*的人也可以*使用*它。

我的问题是，此类代码的许可证的目的是什么？它会阻止他们*使用*它吗？或者如果他们仍然可以使用它，它（许可证）*对我* 有任何好处吗？如果是，以什么方式？

如果我不为我的源代码使用任何许可证，这是一个坏主意吗？换句话说，如果我不对我发布给公众的源代码使用任何许可证，我将来会后悔吗？

是什么决定了我是否应该使用任何许可证？我应该在什么基础上为我的代码选择*特定*的许可证？我应该如何做出有关许可的*决定？*

请帮助我理解这些事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:12:04.933

首先阅读以下内容：http: [//www.codinghorror.com/blog/2007/04/pick-a-license-any-license.html](http://www.codinghorror.com/blog/2007/04/pick-a-license-any-license.html)

总结：默认情况下，所有代码都受版权保护，无论您是否声明。如果有人使用未经许可的代码，所有者（或继承人）可以追溯决定起诉您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T14:11:24.627

> 我的问题是，此类代码的许可证的目的是什么？

许可证的目的是您拥有一份文件，其中记录了您*授予*版权作品的权利（软件可能属于版权）。

这有助于您的软件用户了解他们对该软件拥有哪些权利。

*自由软件许可证*允许用户使用、**学习**、**共享****和****改进**您的软件。这对于*开源计划*网站上列出的那些*已批准的许可证*也是如此。

 ********因此，如果没有许可证，您就不会授予很多权利。许可证明确了授予哪些权利。这是您的第一个好处：您的软件的用户无需先询问您。

> 它会阻止他们使用它吗？

不，许可证不会停止使用它。至少通常不会。许可证*授予*使用软件所需的权利，因此实际上相反。

> 或者如果他们仍然可以使用它，它（许可证）对我有任何好处吗？

你说的还在用是什么意思？如果您提供（已知）软件许可证，他们可以使用该软件。对你来说的好处是你告诉所以很清楚你给了什么。

> 如果是，以什么方式？

例如，通过澄清您按原样提供软件而不提供某种形式的保证。如果您查看许可证，您会发现有关该内容的段落。

> 如果我不为我的源代码使用任何许可证，这是一个坏主意吗？换句话说，如果我不使用任何许可证作为我向公众发布的源代码，我会后悔吗？

是的，这通常是一个坏主意，因为您或多或少没有告诉您的用户他们对软件拥有哪些权利。这会对使用模式和贡献模式产生负面影响。那是你将来可能会后悔的事情。

另见：

*   [我可以在没有指定许可证的 Github 项目中使用代码吗？](https://stackoverflow.com/questions/5521080/can-i-use-the-code-in-a-github-project-which-does-not-have-a-license-specified)

这是一本可以在线获得的好书，它逐步介绍了很多内容，例如[选择许可证并应用它](http://producingoss.com/en/license-quickstart.html)——这本书被[Karl Fogel 称为生产开源软件如何运行一个成功的自由软件项目](http://producingoss.com/)。

这是最好的文章之一，它基本上说明了几乎*所有内容*：[使您的开源软件与 GPL 兼容。要不然。](http://www.dwheeler.com/essays/gpl-compatible.html)David A. Wheeler 于 2002-05-06 发布，2013-01-18 修订 - 它也有很多非常好的链接。********

# c++ - 通过同步延长线程的寿命 (C++11)

> ID：15252292
> 
> 赞同：17
> 
> 时间：2013-03-06T16:07:06.837
> 
> 标签：c++, multithreading, c++11, thread-safety

我有一个带有函数的程序，该函数将指针作为 arg 和 main。主要是创建**n 个**线程，每个线程根据传递的`arg`. 然后加入线程，主线程在区域之间执行一些数据混合，并创建**n 个**新线程，它们执行与旧线程相同的操作。

为了改进程序，我想保持线程处于活动状态，从而消除创建它们所需的长时间。线程应该在 main 工作时休眠，并在它们必须再次出现时通知。同样，当线程工作时，main 应该等待，就像它对 join 所做的那样。

我不能最终得到一个强有力的实施，总是陷入僵局。

简单的基线代码，任何关于如何修改它的提示将不胜感激

```
#include <thread>
#include <climits>

...

void myfunc(void * p) {
  do_something(p);
}

int main(){
  void * myp[n_threads] {a_location, another_location,...};
  std::thread mythread[n_threads];
  for (unsigned long int j=0; j < ULONG_MAX; j++) {
    for (unsigned int i=0; i < n_threads; i++) {
      mythread[i] = std::thread(myfunc, myp[i]);
    }
    for (unsigned int i=0; i < n_threads; i++) {
      mythread[i].join();
    }
    mix_data(myp); 
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-06T20:12:36.893

这是一种仅使用 C++11 标准库中的类的可能方法。基本上，您创建的每个线程都有一个关联的命令队列（封装在`std::packaged_task<>`对象中），它会不断检查。如果队列为空，线程将只等待条件变量 ( `std::condition_variable`)。

虽然通过使用 RAII 包装器避免了数据`std::mutex`竞争，但主线程可以通过存储与每个提交的对象关联并调用它`std::unique_lock<>`来等待特定作业的终止。`std::future<>``std::packaged_tast<>``wait()`

下面是一个遵循此设计的简单程序。评论应该足以解释它的作用：

```
#include <thread>
#include <iostream>
#include <sstream>
#include <future>
#include <queue>
#include <condition_variable>
#include <mutex>

// Convenience type definition
using job = std::packaged_task<void()>;

// Some data associated to each thread.
struct thread_data
{
    int id; // Could use thread::id, but this is filled before the thread is started
    std::thread t; // The thread object
    std::queue<job> jobs; // The job queue
    std::condition_variable cv; // The condition variable to wait for threads
    std::mutex m; // Mutex used for avoiding data races
    bool stop = false; // When set, this flag tells the thread that it should exit
};

// The thread function executed by each thread
void thread_func(thread_data* pData)
{
    std::unique_lock<std::mutex> l(pData->m, std::defer_lock);
    while (true)
    {
        l.lock();

        // Wait until the queue won't be empty or stop is signaled
        pData->cv.wait(l, [pData] () {
            return (pData->stop || !pData->jobs.empty()); 
            });

        // Stop was signaled, let's exit the thread
        if (pData->stop) { return; }

        // Pop one task from the queue...
        job j = std::move(pData->jobs.front());
        pData->jobs.pop();

        l.unlock();

        // Execute the task!
        j();
    }
}

// Function that creates a simple task
job create_task(int id, int jobNumber)
{
    job j([id, jobNumber] ()
    {
        std::stringstream s;
        s << "Hello " << id << "." << jobNumber << std::endl;
        std::cout << s.str();
    });

    return j;
}

int main()
{
    const int numThreads = 4;
    const int numJobsPerThread = 10;
    std::vector<std::future<void>> futures;

    // Create all the threads (will be waiting for jobs)
    thread_data threads[numThreads];
    int tdi = 0;
    for (auto& td : threads)
    {
        td.id = tdi++;
        td.t = std::thread(thread_func, &td);
    }

    //=================================================
    // Start assigning jobs to each thread...

    for (auto& td : threads)
    {
        for (int i = 0; i < numJobsPerThread; i++)
        {
            job j = create_task(td.id, i);
            futures.push_back(j.get_future());

            std::unique_lock<std::mutex> l(td.m);
            td.jobs.push(std::move(j));
        }

        // Notify the thread that there is work do to...
        td.cv.notify_one();
    }

    // Wait for all the tasks to be completed...
    for (auto& f : futures) { f.wait(); }
    futures.clear();

    //=================================================
    // Here the main thread does something...

    std::cin.get();

    // ...done!
    //=================================================

    //=================================================
    // Posts some new tasks...

    for (auto& td : threads)
    {
        for (int i = 0; i < numJobsPerThread; i++)
        {
            job j = create_task(td.id, i);
            futures.push_back(j.get_future());

            std::unique_lock<std::mutex> l(td.m);
            td.jobs.push(std::move(j));
        }

        // Notify the thread that there is work do to...
        td.cv.notify_one();
    }

    // Wait for all the tasks to be completed...
    for (auto& f : futures) { f.wait(); }
    futures.clear();

    // Send stop signal to all threads and join them...
    for (auto& td : threads)
    {
        std::unique_lock<std::mutex> l(td.m);
        td.stop = true;
        td.cv.notify_one();
    }

    // Join all the threads
    for (auto& td : threads) { td.t.join(); }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-06T16:35:17.863

您想要的概念是线程池。这个[SO question](https://stackoverflow.com/questions/3988128/c-thread-pool)处理现有的实现。

这个想法是为许多线程实例提供一个容器。每个实例都与一个轮询任务队列的函数相关联，当任务可用时，拉取并运行它。一旦任务结束（如果它终止，但这是另一个问题），线程简单地循环到任务队列。

所以你需要一个同步队列，一个实现队列循环的线程类，一个任务对象的接口，也许还有一个驱动整个事物的类（池类）。

或者，您可以为其必须执行的任务创建一个非常专业的线程类（例如，仅将内存区域作为参数）。这需要线程的通知机制来指示它们已完成当前迭代。

线程主函数将是该特定任务的循环，并且在一次迭代结束时，线程发出结束信号，并等待条件变量开始下一个循环。本质上，您将在线程中内联任务代码，完全不需要队列。

```
 using namespace std;

 // semaphore class based on C++11 features
 class semaphore {
     private:
         mutex mMutex;
         condition_variable v;
         int mV;
     public:
         semaphore(int v): mV(v){}
         void signal(int count=1){
             unique_lock lock(mMutex);
             mV+=count;
             if (mV > 0) mCond.notify_all();
         }
         void wait(int count = 1){
             unique_lock lock(mMutex);
             mV-= count;
             while (mV < 0)
                 mCond.wait(lock);
         }
 };

template <typename Task>
class TaskThread {
     thread mThread;
     Task *mTask;
     semaphore *mSemStarting, *mSemFinished;
     volatile bool mRunning;
    public:
    TaskThread(Task *task, semaphore *start, semaphore *finish): 
         mTask(task), mRunning(true), 
         mSemStart(start), mSemFinished(finish),
        mThread(&TaskThread<Task>::psrun){}
    ~TaskThread(){ mThread.join(); }

    void run(){
        do {
             (*mTask)();
             mSemFinished->signal();
             mSemStart->wait();
        } while (mRunning);
    }

   void finish() { // end the thread after the current loop
         mRunning = false;
   }
private:
    static void psrun(TaskThread<Task> *self){ self->run();}
 };

 classcMyTask {
     public:
     MyTask(){}
    void operator()(){
        // some code here
     }
 };

int main(){
    MyTask task1;
    MyTask task2;
    semaphore start(2), finished(0);
    TaskThread<MyTask> t1(&task1, &start, &finished);
    TaskThread<MyTask> t2(&task2, &start, &finished);
    for (int i = 0; i < 10; i++){
         finished.wait(2);
         start.signal(2);
    }
    t1.finish();
    t2.finish();
} 
```

上面提出的（粗略）实现依赖于`Task`必须提供的类型`operator()`（即类仿函数）。之前说过可以将任务代码直接合并到线程函数体中，但由于我不知道，所以我尽量保持抽象。线程开始有一个条件变量，线程结束有一个条件变量，两者都封装在信号量实例中。

*看到另一个建议使用的答案 `boost::barrier`，我只能支持这个想法：**如果可能，请确保用该类替换我的信号量类**，原因是最好依赖经过良好测试和维护的外部代码而不是自我实现相同功能集的解决方案。*

总而言之，这两种方法都是有效的，但前者为了灵活性而放弃了一点点性能。如果要执行的任务需要足够长的时间，则管理和队列同步成本可以忽略不计。

更新：代码已修复和测试。用信号量替换了一个简单的条件变量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T17:03:02.827

它可以很容易地使用屏障来实现（只是对条件变量和计数器的方便包装）。它基本上会阻塞，直到所有 N 个线程都达到“障碍”。然后它再次“回收”。Boost 提供了一个实现。

```
void myfunc(void * p, boost::barrier& start_barrier, boost::barrier& end_barrier) {
  while (!stop_condition) // You'll need to tell them to stop somehow
  {
      start_barrier.wait ();
      do_something(p);
      end_barrier.wait ();
  }
}

int main(){
  void * myp[n_threads] {a_location, another_location,...};

  boost::barrier start_barrier (n_threads + 1); // child threads + main thread
  boost::barrier end_barrier (n_threads + 1); // child threads + main thread

  std::thread mythread[n_threads];

    for (unsigned int i=0; i < n_threads; i++) {
      mythread[i] = std::thread(myfunc, myp[i], start_barrier, end_barrier);
    }

  start_barrier.wait (); // first unblock the threads

  for (unsigned long int j=0; j < ULONG_MAX; j++) {
    end_barrier.wait (); // mix_data must not execute before the threads are done
    mix_data(myp); 
    start_barrier.wait (); // threads must not start new iteration before mix_data is done
  }
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T15:27:15.383

以下是执行一些随机内容的简单编译和工作代码。它实现了 aleguna 的屏障概念。每个线程的任务长度不同，所以确实有必要有一个强大的同步机制。我将尝试对相同的任务进行池化并对结果进行基准测试，然后可能会像 Andy Prowl 所指出的那样使用期货。

```
#include <iostream>
#include <thread>
#include <mutex>
#include <condition_variable>
#include <chrono>
#include <complex>
#include <random>

const unsigned int n_threads=4; //varying this will not (almost) change the total amount of work
const unsigned int task_length=30000/n_threads;
const float task_length_variation=task_length/n_threads;
unsigned int rep=1000; //repetitions of tasks

class t_chronometer{
 private: 
  std::chrono::steady_clock::time_point _t;

 public:
  t_chronometer(): _t(std::chrono::steady_clock::now()) {;}
  void reset() {_t = std::chrono::steady_clock::now();}
  double get_now() {return std::chrono::duration_cast<std::chrono::duration<double>>(std::chrono::steady_clock::now() - _t).count();}
  double get_now_ms() {return 
      std::chrono::duration_cast<std::chrono::duration<double,std::milli>>(std::chrono::steady_clock::now() - _t).count();}
};

class t_barrier {
 private:
   std::mutex m_mutex;
   std::condition_variable m_cond;
   unsigned int m_threshold;
   unsigned int m_count;
   unsigned int m_generation;

 public:
   t_barrier(unsigned int count):
    m_threshold(count),
    m_count(count),
    m_generation(0) {
   }

   bool wait() {
      std::unique_lock<std::mutex> lock(m_mutex);
      unsigned int gen = m_generation;

      if (--m_count == 0)
      {
          m_generation++;
          m_count = m_threshold;
          m_cond.notify_all();
          return true;
      }

      while (gen == m_generation)
          m_cond.wait(lock);
      return false;
   }
};

using namespace std;

void do_something(complex<double> * c, unsigned int max) {
  complex<double> a(1.,0.);
  complex<double> b(1.,0.);
  for (unsigned int i = 0; i<max; i++) {
    a *= polar(1.,2.*M_PI*i/max);
    b *= polar(1.,4.*M_PI*i/max);
    *(c)+=a+b;
  }
}

bool done=false;
void task(complex<double> * c, unsigned int max, t_barrier* start_barrier, t_barrier* end_barrier) {
  while (!done) {
    start_barrier->wait ();
    do_something(c,max);
    end_barrier->wait ();
  }
  cout << "task finished" << endl;
}

int main() {
  t_chronometer t;

  std::default_random_engine gen;
  std::normal_distribution<double> dis(.0,1000.0);

  complex<double> cpx[n_threads];
  for (unsigned int i=0; i < n_threads; i++) {
    cpx[i] = complex<double>(dis(gen), dis(gen));
  }

  t_barrier start_barrier (n_threads + 1); // child threads + main thread
  t_barrier end_barrier (n_threads + 1); // child threads + main thread

  std::thread mythread[n_threads];
  unsigned long int sum=0;
  for (unsigned int i=0; i < n_threads; i++) {
    unsigned int max = task_length +  i * task_length_variation;
    cout << i+1 << "th task length: " << max << endl;
    mythread[i] = std::thread(task, &cpx[i], max, &start_barrier, &end_barrier);
    sum+=max;
  }
  cout << "total task length " << sum << endl;

  complex<double> c(0,0);
  for (unsigned long int j=1; j < rep+1; j++) {
    start_barrier.wait (); //give to the threads the missing call to start
    if (j==rep) done=true;
    end_barrier.wait (); //wait for the call from each tread
    if (j%100==0) cout << "cycle: " << j << endl;
    for (unsigned int i=0; i<n_threads; i++) {
      c+=cpx[i];
    }
  }
  for (unsigned int i=0; i < n_threads; i++) {
    mythread[i].join();
  }
  cout << "result: " << c << " it took: " << t.get_now() << " s." << endl;
  return 0;
} 
```

# android - LoaderCallbacks 和屏幕方向

> ID：15252302
> 
> 赞同：0
> 
> 时间：2013-03-06T16:07:40.730
> 
> 标签：android, asynctaskloader

我有一个`Activity`工具`LoaderCallbacks`并`AsyncTaskLoader`从那里开始`Activity`。当（由于屏幕方向更改）仍在加载`Activity`时被破坏，似乎“失去连接”并且没有被调用。如何将我的重新附加到调用回调方法？我知道我可以“抓住”装载机`AsycTaskLoader``Activity``Loader``onLoadFinished``Activity``Loader`

```
getSupportLoaderManager().getLoader(loaderID) 
```

但我不知道更多。

# ruby - rspec中的双重方法是什么？

> ID：15252314
> 
> 赞同：40
> 
> 时间：2013-03-06T16:08:06.453
> 
> 标签：ruby, rspec, mocking, stub

rspec 文档中指出我应该使用`double`方法来创建测试替身。但是我可以看到即使我不使用它也可以正常工作`double`。不使用有什么问题`double`吗？另外，如果我不使用 double 如何`MyClass`获取`stub`和其他 rspec 方法？在 rspec 中运行时它们是否可用于所有对象？

```
require 'spec_helper'

class MyClass

    def self.run
        new.execute
    end

    def execute
        'foo'
    end

end

describe MyClass do

    it 'should stub instance method' do
        obj = MyClass.new
        obj.stub(:execute).and_return('bar')
        obj.execute.should == 'bar'
    end

    it 'should stub class method' do
        MyClass.stub(:run).and_return('baz')
        MyClass.run.should == 'baz'
    end

end 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-06T16:25:48.873

**编辑：我刚刚重读了你的问题，并意识到我没有完全回答它。留下我原来的答案，因为它是相关的，但这是你的具体答案：**

您不需要双精度的原因是因为您正在存根类方法，而不是实例方法。 `double`仅用于处理类的实例，而不是类本身。

**旧答案解释了更多：**

你应该尽可能地使用真正的类而不是测试替身。这将锻炼更多的代码并使您的测试更加全面。测试替身用于您不能或不应该使用真实对象的情况。例如，如果一个类在不访问外部资源（如网络或数据库）的情况下无法实例化，或者具有大量依赖项，而您只是在测试使用它的东西，您可能想要创建一个double 和 stub 上的一些方法。

这是一个更具体的示例：假设您正在 testing `MyClass`，但是为了实例化`MyClass`，您需要传入 a `FooLogger`：

```
mylogger = FooLogger.new
myclass = MyClass.new logger: mylogger 
```

如果`FooLogger.new`打开一个 syslog 套接字并立即开始向其发送垃圾邮件，则每次运行测试时，您都会记录日志。如果您不想在此测试期间向您的日志发送垃圾邮件，则可以改为创建一个 double for`FooLogger`并在其上存根一个方法：

```
mylogger = double(FooLogger)
mylogger.stub(:log)
myclass = MyClass.new logger: mylogger 
```

因为大多数设计良好的类都可以在没有任何副作用的情况下实例化，所以您通常可以只使用真实对象而不是双精度对象，并在其上使用存根方法。在其他情况下，类有许多依赖项，使它们难以实例化，而双打是一种克服麻烦并测试你真正关心的东西的方法。

根据我的经验，需要使用 double 是一种代码味道，但我们经常不得不使用我们无法轻易更改的类（例如来自 gem），因此它是您可能不时需要的工具。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-09T07:52:37.440

在 RSpec Mocks 3.0 中，双打的行为发生了变化。您现在可以[验证 doubles](https://relishapp.com/rspec/rspec-mocks/v/3-0/docs/verifying-doubles)，这意味着“RSpec 将检查被存根的方法是否实际存在于基础对象上（如果它可用）”，但“如果未定义基础对象或类，则不会进行检查”。

验证双精度要求您具体了解双精度类型（实例、类、对象、动态类、部分）。下面是[RSpec Relish](https://relishapp.com/rspec/rspec-mocks/v/3-0/docs/verifying-doubles/using-an-instance-double)中的一个实例双精度示例：

```
RSpec.describe User, '#suspend!' do
  it 'notifies the console' do
    notifier = instance_double("ConsoleNotifier")

    expect(notifier).to receive(:notify).with("suspended as")

    user = User.new(notifier)
    user.suspend!
  end
end 
```

# iphone - 应用程序关闭 7 天后安排本地通知

> ID：15252316
> 
> 赞同：4
> 
> 时间：2013-03-06T16:08:09.223
> 
> 标签：iphone, ios, notifications, uilocalnotification

`local notifications`为我的应用程序 启用有点困难。

是的，我和一个`local notification`女巫一起设置了我的项目，我想在应用程序关闭一周后安排我的**时间**。例如，如果用户在 8 号星期六打开应用程序，本地通知应该会在下一个星期六 15 号出现，但时间应该改变。例如，他/她在晚上 8 点关闭应用程序，我不想在下周晚上 8 点打扰他们，所以我想在下午 6 点或类似的时间显示每个通知。

现在您知道我的问题了，这是我正在使用的代码：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar] ;
    NSDateComponents *componentsForReferenceDate = [[NSDateComponents alloc] init];

    //set day (saturday)

    [componentsForReferenceDate setDay:26] ;
    [componentsForReferenceDate setMonth:1] ;
    [componentsForReferenceDate setYear:2013] ;

    [componentsForReferenceDate setHour: 17] ;
    [componentsForReferenceDate setMinute:30] ;
    [componentsForReferenceDate setSecond:00] ;

    NSDate *fireDateOfNotification = [calendar dateFromComponents: componentsForReferenceDate];

    // Create the notification

    UILocalNotification *notification = [[UILocalNotification alloc]  init] ;

    notification.fireDate = fireDateOfNotification ;
    notification.timeZone = [NSTimeZone localTimeZone] ;
    notification.alertBody = [NSString stringWithFormat: @"Du wirst vermisst! \nDeine App braucht dich, schreibe sie zu Ende!"] ;
    notification.alertAction = @"Zurückkehren";
    notification.userInfo= [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"Some information"] forKey:@"information"];
    notification.repeatInterval= NSWeekCalendarUnit ;
    notification.soundName = @"Appnotifisound.wav";
    notification.applicationIconBadgeNumber = 1;
    [[UIApplication sharedApplication] scheduleLocalNotification:notification] ;

} 
```

我知道必须有更多的方法来删除徽章和`didrecievenotification`，但我把它们放出来了，因为这**并不**重要。

使用此代码，我设法将通知安排在**每个**星期六下午**5:30**（德国）。但我只想安排一次，当时应用程序已经关闭了整整**一周**。这有可能吗？如果有人可以更正我的代码或为此提供解决方案，我会很高兴。

最好的问候，并感谢您阅读这篇长文，

诺亚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T16:17:24.630

您应该取消安排以前的通知。

```
for (UILocalNotification *lNotification in [[UIApplication sharedApplication] scheduledLocalNotifications]) 
    {
        if ([[lNotification.userInfo valueForKey:@"information"] isEqualToString:@"Some information"])
        {
            [[UIApplication sharedApplication]cancelLocalNotification:lNotification];
            break;
        }
    } 
```

通过以下方式设置火灾日期：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *componentsForReferenceDate = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit)
                                     fromDate:[NSDate date]];
    [componentsForReferenceDate setHour: 17] ;
    [componentsForReferenceDate setMinute:30] ;
    [componentsForReferenceDate setSecond:00] ;

    NSDate *tempDate = [calendar dateFromComponents: componentsForReferenceDate];
    [componentsForReferenceDate release];

    NSDateComponents *comps = [[NSDateComponents alloc]init];
    [comps setDay:7];
    NSDate *fireDateOfNotification = [calendar dateByAddingComponents:comps
                                                               toDate:tempDate options:0]
    [comps release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:15:02.540

`notification.repeatInterval = NSWeekCalendarUnit`是造成这种情况的。采用：

```
notification.repeatInterval = 0; 
```

这可以防止重复（[来源](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T14:55:41.133

这是**Swift 2.0**的适配

取消安排当前通知

```
 for notifMe:AnyObject in UIApplication.sharedApplication().scheduledLocalNotifications!{
        let title = notifMe.userInfo["information"] as? String
        if title == "some information"{
                UIApplication.sharedApplication().cancelLocalNotification(notifMe as! UILocalNotification)
        }
        } 
```

设置通知日期

```
 let date = NSDate()
    let calendar = NSCalendar.currentCalendar()
    let components = calendar.components(NSCalendarUnit.Year.union(NSCalendarUnit.Month).union(NSCalendarUnit.Day),fromDate: date)
    components.hour = 17
    components.minute = 30
    components.second = 00

    let tempDate = calendar.dateFromComponents(components)!
    let comps = NSDateComponents()
    comps.day = 7
    let fireDateOfNotification = calendar.dateByAddingComponents(comps, toDate: tempDate, options:[]) 
```

# google-ads-api - 如何在 Google Adwords 脚本中找到客户 ID

> ID：15252317
> 
> 赞同：0
> 
> 时间：2013-03-06T16:08:22.700
> 
> 标签：google-ads-api

问题 1： - 我正在使用下面的脚本，它工作正常，但似乎无法获得客户 ID（例如 Bobs Bakers） 我有很多客户并希望从 google adwords 脚本中运行它。（不是 API）。

问题 2：有没有办法在所有客户上运行，给我他们所有的活动？还是我必须从每个客户端中运行此脚本？

```
function main() {
var campaignsIterator = AdWordsApp.campaigns()
  .withCondition("Status = ENABLED");
  .forDateRange('TODAY')
  .get();

var csv = 'CampaignName, Impressions,Clicks,AveragePosition,AverageCpc,ConversionRate,Conversions,Ctr,Cost';
while (campaignsIterator.hasNext()) 

{
var campaign = campaignsIterator.next();
var stats = campaign.getStatsFor("TODAY");
var row = [
                            campaign,
                            stats.getImpressions(),
           stats.getClicks(),
           stats.getAveragePosition(),
           stats.getAverageCpc(),
           stats.getConversionRate(),
           stats.getConversions(),
           stats.getCtr(),
           stats.getCost()];

csv += '\n' + row.join(',');
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:43:53.223

1.  找不到客户名称，但这里有一种查看帐户 ID 的方法：

    AdWordsApp.currentAccount().getCustomerId()

2.  目前还不可能跨帐户运行相同的脚本。您必须从每个客户端中运行脚本。

# complexity-theory - 简单除法的复杂性

> ID：15252322
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:08:43.790
> 
> 标签：complexity-theory, time-complexity

以下函数进行简单除法的 (a) 最坏情况、(b) 最佳情况和 (c) 平均情况复杂度是多少

```
while n>=1 do
    n=n DIV 2
end {while} 
```

你会如何证明复杂性的合理性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:10:20.753

The function is `O(log n)`, since it will require exactly `floor(log2(n)) + 1` iterations.

# javascript - Javascript小于覆盖其他小于条件？

> ID：15252324
> 
> 赞同：-2
> 
> 时间：2013-03-06T16:08:54.293
> 
> 标签：javascript, overriding, if-statement

我在这里用这段代码苦苦挣扎。在 CodeAcademy 工作时，我遇到了一件让我困惑的小事。如您所见，我首先检查computerChoice 是否小于或等于0.33。然后我检查计算机选择是否小于或等于 0.66，并以最后的 else 语句结束。

但是，这不应该以某种方式崩溃或干扰，因为如您所见，else if 和 else 以及 if 将根据随机数将 computerChoice 变量设置为所需的字符串。但是由于 0.23 小于 0.66 就像 0.23 小于 0.33 一样，两个 if 语句都应该将变量设置为自己的特定字符串。

为什么这实际上有效，而我认为它不应该。这只是JavaScript的方式吗？第一个 if 语句会覆盖即将出现的语句？

```
var userChoice = prompt("Do you choose rock, paper or scissors?");
var computerChoice = Math.random();
if (computerChoice <= 0.33){
    computerChoice = "rock";
}else if(computerChoice <=0.66){
    computerChoice = "paper";
}else{
    computerChoice = "scissors";
} 
```

感谢所有希望即将到来的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:11:16.053

仅当条件为假`else if`时才会评估该部分。`if`所以没有冲突，当你有一系列`if...else if...else if...else`.

所以在这种`0.22`情况下，因为

```
if (computerChoice <= 0.33) 
```

评估`true`，不检查`else if`或`else`条件。控制进入与 关联的块并将`if`变量的值设置为`"rock"`。

在这种`0.44`情况下（例如），因为`if`条件评估为假，所以`else if (computerChoice <= 0.66)`测试了 - 并且因为它评估为真，所以与它相关的块*被*输入并且变量的值被设置为`"paper"`.

在上述所有值的情况下，`0.66`前两个条件都评估为 false，因此`else`输入与 final 关联的块并将值设置为`"scissors"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:11:39.963

如果`else`子句匹配**，则不执行**`if..else`语句的子句。 换句话说，里面只有一个代码块被执行过，其余的都没有。**`if`
`if..else`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:21:40.083

这不会产生问题，因为您在第二个语句中使用了 else

```
else if(computerChoice <=0.66){
    computerChoice = "paper"; 
```

这也隐含地表示computerChoice > 0.33。在这样的情况下会产生问题：

```
if(computerChoice <=0.66){
    computerChoice = "paper";
else if(computerChoice <= 0.33)
    computerChoice = "rock"; 
```

那是因为它永远不会进入 else 语句，就好像 computerChoice <= 0.66 它也总是很明显 <= 0.33**

# php - jQuery发布错误

> ID：15252332
> 
> 赞同：0
> 
> 时间：2013-03-06T16:09:18.840
> 
> 标签：php, javascript, jquery, html, post

我正在通过 jQuery 将表单中的数据发布到 PHP 页面。

下面是代码。如果您需要查看 php 或 html 页面中的代码，请告诉我。

```
$("#createQuestionForm").submit(function(e) {
    e.preventDefault();
    alert("check1");
    $.post("InsertNewQuestion.php", $("#createQuestionForm").serialize()).done(function(data) {
        alert("check2");
    });
}); 
```

我可以看到第一个警报（“check1”），但问题是我看不到第二个警报（“check2”）。问题是什么？

------------------------------------------编辑后------ -------------------------------------------------- -----------------

我发现了问题：未捕获的 TypeError: Object # has no method 'done'，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:12:26.007

为什么不[重新阅读 $.post() 文档](http://api.jquery.com/jQuery.post/)？：

```
$.post("InsertNewQuestion.php", $("#createQuestionForm").serialize(), function(data) {
    alert("check2");
}, 'json'); 
```

`$.post()`有关文档网站上的参数和选项的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:44:35.153

我发现了问题。我的 jQuery 文件不是最新的。我更新了文件，它工作了！

# maven - 运行 Maven 的 Jenkins slave 给出 log4j 警告

> ID：15252337
> 
> 赞同：1
> 
> 时间：2013-03-06T16:09:32.877
> 
> 标签：maven, jenkins, log4j

我正在使用 Jenkins，并且我将一台 Windows 机器设置为奴隶工人。我有一个在从属设备上运行的基于 Maven 的项目。构建工作正常，但我从 log4j 收到关于它未初始化的警告。我想搔痒并消除警告，但我不知道怎么做。

我对 log4j 不是很熟悉。我明白我可以设置一个系统属性来告诉它在哪里可以找到配置文件，但我不知道应该在 Jenkins 管道中的哪个位置或如何设置该属性。看起来警告出现在 Maven 启动之前但在奴隶开始工作之后。

这是控制台输出的片段：

```
Parsing POMs
[MyTest] $ java -cp C:\jenkins\maven3-agent.jar;C:\jenkins\tools\Maven\Maven\boot\plexus-classworlds-2.4.jar org.jvnet.hudson.maven3.agent.Maven3Main C:\jenkins\tools\Maven\Maven C:\Users\waisbrot\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\28\5c50da9c-2d1a9aef C:\jenkins\maven3-interceptor.jar 49210
<===[JENKINS REMOTING CAPACITY]===>channel started
log4j:WARN No appenders could be found for logger (org.apache.commons.beanutils.converters.BooleanConverter).
log4j:WARN Please initialize the log4j system properly.
Executing Maven:  -B -f C:\jenkins\workspace\MyTest\pom.xml test
[INFO] Scanning for projects... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:49:36.413

我对此并不特别自豪，但我对任何闲聊都不感兴趣，所以我通过这样做来压制它

```
jar uf <path to maven3-agent-1.2.jar>/maven3-agent-1.2.jar log4j.xml 
```

其中`log4j.xml`包含

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
  <root>
    <level value="off"/>
  </root>
</log4j:configuration> 
```

*注意：*`jar`命令必须如图所示`log4j.xml`在当前目录中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:45:58.493

只需在类路径中提供具有有效内容的 log4j.properties 或 log4j.xml。有关详细信息，请参阅 log4j 文档

# css - 如何在 HTML5/CSS 中呈现层次结构树？

> ID：15252344
> 
> 赞同：1
> 
> 时间：2013-03-06T16:09:45.030
> 
> 标签：css, html

我最近还没有做过任何网络开发。想知道是否有一种简单的方法可以加载层次结构树的数据表示，例如

```
node             parent
---------------------------------
root             
Level1.Node1     root
Level1.Node2     root
Level1.Node3     root
Level2.Node1     Level1.Node1
Level2.Node2     Level1.Node2
Level2.Node3     Level1.Node2 
```

让它像

```
root
  --------Level1.Node1
               --------------Level2.Node1 
  --------Level1.Node2
               --------------Level2.Node2
               --------------Level2.Node3 
```

不使用花哨的桌子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:18:29.933

使用样式化和嵌套的无序列表。

```
<ul>
    <li>Level 1
        <ul>
            <li>Level 2</li>
         </ul>
    </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:18:41.790

实际上，您只想继续检查父母的孩子。这不是 HTML5/CSS 的东西，而是用于检查 DOM（节点）根的 JavaScript 东西。

使用 WebKit/Firebug 工具转储 HTML DOM 对象并查看其属性。您可以查看它们的属性和方法，并使用它们来遍历它们，直到您到达每个子标签的底部。

```
console.log(document);
console.log(document.head); 
```

这些只是返回 HTML 块。

```
console.log(document.body); 
```

这将返回实际的 DOM 对象。你可以在检查器中看到你实际上得到了大量的信息来解析。

检查 [children] 和 [childNodes]。这就是您要迭代 DOM 结构的地方。[nodeName] 和 [nodeType] 帮助您识别属性。

将其打印出来，您可以使用占位符`var offset = ' ';`并重新循环它们或使用 CSS 来呈现`<div>`具有数学计算的左边距的标签。

# javascript - Div 位置不适用于任何值设置

> ID：15252345
> 
> 赞同：0
> 
> 时间：2013-03-06T16:09:47.450
> 
> 标签：javascript, html, css

我们在主体中设置的主 div 上有一个 gmap，如下所示。然后在 javascript 中，我们添加了一个新的 div，如下所示。问题是带有表格的 div 一直出现在页面的左上角并且永远不会去任何其他位置，即使我如何尝试更改`document.getElementById("auto").style.top="35px";`和 `document.getElementById("auto").style.left="35px";`

```
var contents = document.createElement("div");
contents.style.width="300px";
contents.style.height="100px";

var htmlString = '<table style="background-color: #ffffff;">\r\n';
htmlString += '<tr><td>Name</td><td valign="top"><input id="nm" type="text" style="width:100%" value=""></td></tr>\r\n';
htmlString += '<tr><td>Description</td><td valign="top"><input id="desc" type="text" style="width:100%" value=""></td></tr>\r\n';
htmlString += '<tr><td>Client</td><td valign="top">'+clientList+'</td></tr>\r\n';                          
htmlString += '<tr>\r\n';
htmlString += '<td>&#160;</td><td><input type="button" value="Save" onclick="editFeature(\'Point\')"> <input type="button" value="Cancel" onclick="saveFeatureCancel()"></td>\r\n';
htmlString += '</tr>\r\n';
htmlString += '</table>\r\n';               

contents.innerHTML="<form name='form2' id='form2' onsubmit='javascript:codeAddress();return false;'><div id='auto' style='z-index:5; position:relative'>"+htmlString+"</div></form>";
document.getElementById('map').appendChild(contents);
document.getElementById("contents").style.position="relative";
document.getElementById("auto").style.top="35px";
document.getElementById("auto").style.left="35px"; 
```

身体的主要代码

```
<body>
  <div id="map">
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:16:52.647

**您永远不会将“contents”DOM 元素的 id 设置为“contents”。** 只需添加此（最后）行的简单修复。

```
var contents = document.createElement("div");
contents.style.width="300px";
contents.style.height="100px";
contents.id = 'contents'; 
```

[这是我的 jsFiddle](http://jsfiddle.net/QrY4g/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:14:49.890

您正在为具有 id 的元素设置`top`' `left`auto' 而不是 'map'

所以你可能不得不使用，

`document.getElementById("map").style.position="absolute";`或者`document.getElementById("map").style.position="fixed";`

和

```
document.getElementById("map").style.top="35px";
document.getElementById("map").style.left="35px"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:00:50.527

这里有几个问题。请参阅工作 jsFiddle 以供参考：http: [//jsfiddle.net/7hzct/1/](http://jsfiddle.net/7hzct/1/)

首先，您应该（从您的评论中可以看出）将位置设置为`absolute`，而不是`relative`。

接下来，您将添加`div#contents`到`div#map`. 从您的评论看来，您想将其添加到正文中（在 旁边`#map`）：

```
document.body.appendChild(contents); 
```

此外，您正在为 设置`top`和`left`坐标`#auto`，您想使用`bottom`和`right`并为 设置它们`#contents`：

```
document.getElementById("contents").style.position="absolute";
document.getElementById("contents").style.bottom="35px";
document.getElementById("contents").style.right="35px"; 
```

我没有碰过你的 html 字符串，但读起来很可怕——**不要这么多使用内联 CSS！**. 此外，`valign`自 HTML 4.01 以来已被弃用。

# sql - 如何根据另一行中的优先级值选择一行？

> ID：15252347
> 
> 赞同：0
> 
> 时间：2013-03-06T16:09:58.057
> 
> 标签：sql, oracle, oracle11g

我正在使用 Oracle 11G，我有一个包含以下列和值的表，我想根据优先级列选择每列的值。我只想要每个 ID 一行。

```
ID    NAME   NAME_PRIORITY   COLOR   COLOR_PRIORITY
1     SAM       2             RED          1
1     SAM       2             GREEN        2
1     JOHN      1             BLUE         3
2     MARY      2             ORANGE       1
3     JON       2             RED          2
3     PETE      3             GREEN        1 
```

期望的结果

```
ID   NAME    NAME_PRIORITY   COLOR     COLOR_PRIORITY
1    JOHN       1             RED           1
2    MARY       2             ORANGE        1
3    JON        2             GREEN         1 
```

如何选择 NAME 和 COLOR 具有最低 PRIORITY # 并且每个 ID 只有一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:23:27.883

一种选择是：

```
select d.id, min(name) keep (dense_rank first order by name_priority) name,
       min(name_priority) name_priority,
       min(color) keep (dense_rank first order by color_priority) color,
       min(color_priority) color_priority
  from yourtab d
 group by id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:16:07.953

您可以[`row_number()`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions137.htm)同时使用`name_priority`and`color_priority`来获得结果：

```
select n.id,
  name, 
  name_priority,
  color,
  color_priority
from
(
  select id,
    name, 
    name_priority,
    row_number() over(partition by id order by name_priority) name_row
  from yourtable
) n
inner join
(
  select id,
    color, 
    color_priority,
    row_number() over(partition by id order by color_priority) color_row
  from yourtable
) c
  on n.id = c.id
  and n.name_row = c.color_row
where n.name_row = 1
  and c.color_row = 1 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!4/ab996/1)。

一旦你有`row_number()`每个优先级，那么你将加入结果`id`和行号，并且只返回行号等于 1 的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:16:30.350

此查询使用`Common Table Expression`和`ROW_NUMBER()`

```
WITH nameList
AS
(
    SELECT  ID, Name,
            ROW_NUMBER() OVER (PARTITION BY ID 
                            ORDER BY NAME_PRIORITY) rn
    FROM    TableName
),
colorList
AS
(
    SELECT  a.ID, a.Name,
            b.Color, b.COLOR_PRIORITY,
            ROW_NUMBER() OVER (PARTITION BY a.ID 
                            ORDER BY COLOR_PRIORITY) rnB
    FROM    nameList a
            INNER JOIN tableName b
                ON a.ID = b.ID AND a.rn = 1
)
SELECT  ID, Name, Color, COLOR_PRIORITY
FROM    colorList
WHERE   rnB = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!4/613c9/12)

# jquery - 在 MVC 中通过 Ajax 调用 JsonResult

> ID：15252349
> 
> 赞同：0
> 
> 时间：2013-03-06T16:10:00.333
> 
> 标签：jquery, asp.net-mvc-4

我是阿贾克斯的新手！我有一个带有这个定义的删除 jsonResult ：

```
 [HttpPost]
        public JsonResult Delete(ContactViewModel contactUsViewModel)
        {
            if (ModelState.IsValid)
            {
                _contactUsService.Remove(contactUsViewModel.Id);
            }
            return Json("");
        } 
```

我想通过 ajax call 在弹出模式中调用这个动作，我写的是这样的：

```
<div>
    @Html.ActionLink("Delete", "Delete", "Contact", new { contactId = Model.Id }, null)
</div>

<script>
    $(function () {
        $("#test").click(function () {
            $.ajax({
                url: '@Url.Action("Delete", "Contact")'
            });

        });
    })
</script> 
```

我怎么能称之为 jsonresult ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:33:57.113

最好只`id`在您的操作中编写，不需要所有属性。

试试这个：

```
 [HttpPost]
 public JsonResult Delete(int contactId)
 {
     if (ModelState.IsValid)
     {
         _contactUsService.Remove(contactId);
     }
     return Json("");
 } 
```

html:

```
<div>
    @Html.ActionLink("Delete", "Delete", "Contact", new { contactId = Model.Id }, new { @class = "delete" })
</div> 
```

查询：

```
<script>
    $(function () {
        $(".delete").click(function (e) {
            e.preventDefault();
            var link = this.href;
            $.ajax({
                type: 'Post',
                url: link,
                success: function (data) { }
            });
        });
    })
</script> 
```

# java - 检查网页的状态

> ID：15252351
> 
> 赞同：1
> 
> 时间：2013-03-06T16:10:01.907
> 
> 标签：java, networking, web, network-programming

需要制作一个程序来获取网页的有效 URL，例如 www.stackoverflow.com/questions 及其等效的 IP 地址。然后程序将找到该网页并将页面的状态码返回给我们，例如 200 OK 和 404 NOT FOUND。如果无法访问该网页，则应返回一条消息说明情况。

这是我到目前为止所做的：

```
interface Result {
  public boolean ok ();
  public String message (); }

class Page {
  public Result check ( String wholeURL ) throws Exception {
     throw new Exception ( "Not sure about the rest”); } } 
```

此外，如果我要检查像[http://www.stackoverflow.com](http://www.stackoverflow.com)这样的页面，我将创建一个 Page 实例，然后执行以下操作：

```
Page page = new PageImplementation ();
Result result = page.check ( "http://www.stackoverflow.com:60" );
if ( result.ok () ) { ... }
else { ... } 
```

返回的对象是 Result 的一个实例，当状态码为 200 OK 时“ok”方法应该返回 true，否则返回 false。方法“msg”应该将状态码作为字符串返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:23:26.663

查看[`HttpURLConnection`](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)JDK 中的类或使用[Apache Http Components](http://hc.apache.org/)。

基本上，您尝试连接到 url 并检查响应标头，或者如果服务器根本无法访问，则等待超时。

它`HttpURLConnection`可能看起来像这样：

```
URL url = new URL("http://www.stackoverflow.com");
HttpURLConnection connection = (HttpURLConnection)url.openConnection();
connection.connect();

int httpStatusCode = connection.getResponseCode(); //200, 404 etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:25:35.190

您可以使用一些 api，例如 commons http ，

```
import org.apache.commons.httpclient.*;
import org.apache.commons.httpclient.methods.*;
import org.apache.commons.httpclient.params.HttpMethodParams;

..........

public Result check ( String fullURL ) throws Exception {

  HttpClient client = new HttpClient();
  GetMethod method = new GetMethod(url);

  int statusCode = client.executeMethod(method);

   //Update your result object based on statuscode
} 
```

# transform - 如何查找过渡何时完成

> ID：15252352
> 
> 赞同：0
> 
> 时间：2013-03-06T16:10:03.153
> 
> 标签：transform, transition, dart

我一直在玩[这个网站的代码](http://www.gwtsushi.info/2012/08/css3-transitions-and-transforms-with.html)

现在我想做的是监听一个过渡何时完成，以便我可以按顺序开始另一个过渡。例如...

```
import "dart:html";

num rotatePos = 0;

void main() {
  query("#buttonRotate").onClick.listen(rotateElement);
}

void rotateElement(Event e) {
  rotatePos += 360;
  Element element = e.target;

  element.style.transition = "1s";
  element.style.transform = "rotate(${rotatePos}deg)";

  //Thank you for the help, here is my code for anyone else having
  //questions about this...
  element.onTransitionEnd.listen(transitionFinished);
}

void transitionFinished(Event e) {
  query("#text").text = "Event Finished!";
} 
```

当转换或转换完成时，我将如何设置监听？还是我只是以错误的方式解决这个问题？基本上我最终想要做的是按顺序播放一系列过渡，并且还能够暂停和继续动画。我想也许 animationEvent 类可能是我需要使用的，但到目前为止，我发现的示例似乎将它与画布一起使用，我只想为 dom 元素设置动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:12:39.800

使用`onwebkitTransitionEnd`事件

# exception - Spring Data neo4j 将 neo4j 的 NotFoundException 转换为 InvalidDataAccessResourceUsageException 而不是 DataRetrievalFailureException

> ID：15252355
> 
> 赞同：0
> 
> 时间：2013-03-06T16:10:08.307
> 
> 标签：exception, neo4j, spring-data-neo4j

我们将 neo4j 1.8.2 Advanced 与 Spring Data neo4j 2.2.0.RELEASE 和 Spring Framework 3.2.0.RELEASE 一起使用。我们使用了很多自定义查询。查询是使用我们存储库接口中的 @Query 注释定义的。

在编写测试时，我们遇到了一个查询问题。据我们所知，当查询使用不存在的起始节点时，neo4j 会抛出 a `NotFoundException`，然后将其转换为 a `DataRetrievalFailureException`。

但是对于我们的查询，异常被转换为`InvalidDataAccessResourceUsageException`通常表示查询不正确的代替。我们认为我们的查询看起来不错，所以我们不明白为什么`InvalidDataAccessResourceUsageException`会被抛出。当我们使用现有的开始节点对其进行测试时，查询会返回预期的结果。

查询：

```
START person = node({0})
MATCH person -[attributeRel:ATTRIBUTE]-> attribute -[:ATTRIBUTE_CATEGORY]-> category 
WHERE attributeRel.value! <> 'N' AND attributeRel.value! <> 'Unbekannt/nicht bewertet' 
RETURN category, COLLECT(attribute), COLLECT(attributeRel) 
ORDER BY category.name" 
```

这是 Spring Data neo4j 中的错误，还是我们的查询错误或异常类型正确，我们只是不明白为什么会抛出它。

# bash - bash 复制文件，其中某些文件名未知

> ID：15252359
> 
> 赞同：0
> 
> 时间：2013-03-06T16:10:15.123
> 
> 标签：bash

在 bash 脚本中，我想复制一个文件，但文件名会随着时间而改变。但是，文件名的开头和结尾将保持不变。

有没有办法让我得到这样的文件：

```
 cp start~end.jar 
```

哪里〜可以是什么？

如果这有所不同，cp 命令将在 ubuntu 机器上运行 bash 脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:16:42.310

glob ( `start*end`) 将为您提供所有匹配的文件。

查看`Expansion > Pathname Expansion > Pattern Matching`bash 手册的部分以获得更具体的控制

```
 *      Matches any string, including the null string.
   ?      Matches any single character.
   [...]  Matches any one of the enclosed characters.  A pair of characters separated by a hyphen denotes a range expression; any character that sorts between those two characters, inclusive, using the current locale's collat-
          ing sequence and character set, is matched.  If the first character following the [ is a !  or a ^ then any character not enclosed is matched.  The sorting order of characters in range expressions  is  determined  by
          the  current locale and the value of the LC_COLLATE shell variable, if set.  A - may be matched by including it as the first or last character in the set.  A ] may be matched by including it as the first character in
          the set. 
```

如果您启用`extglob`：

```
 ?(pattern-list)
         Matches zero or one occurrence of the given patterns
  *(pattern-list)
         Matches zero or more occurrences of the given patterns
  +(pattern-list)
         Matches one or more occurrences of the given patterns
  @(pattern-list)
         Matches one of the given patterns
  !(pattern-list)
         Matches anything except one of the given patterns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:11:55.597

使用 a`glob`捕获变量文本：

```
cp start*end.jar 
```

# c# - 将 nvarchar 转换为 varchar

> ID：15252362
> 
> 赞同：1
> 
> 时间：2013-03-06T16:10:22.547
> 
> 标签：c#, sql-server, entity-framework, varchar, nvarchar

我有一个包含很多 varchar 列的数据库。我的数据层是实体框架，与它交互。

如果我将所有列类型从 varchar 更改为 nvarchar，是否安全？

我是否必须将我的任何 C# 代码从数据层一直更改为表示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:22:20.930

不，NVARCHAR 占用的空间是 VARCHAR 的两倍，因此采用另一种方式可能会导致您丢失数据，但采用这种方式应该没问题。

# android - Android - adding a custom view to scroll view where the custom view is an inner class

> ID：15252364
> 
> 赞同：0
> 
> 时间：2013-03-06T16:10:33.887
> 
> 标签：android, xml, inner-classes, android-custom-view, android-scrollview

I've been trying to enable my application to scroll my custom view (both horizontally and vertically) to enable the user to draw on more than just the initial screen size. The application is to be used for basic house plan generation e.g. a user draws connected rectangles representing their home.

I am using a custom View which I have set up (as an inner class) inside the activity. After extensive searching and seeing the issues people are having with scroll views, this is as far as I've managed to get. Here's my XML:

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    >
    <com.example.HomerProject1stDraft.DrawNewPlans.HomerView
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </com.example.HomerProject1stDraft.DrawNewPlans.HomerView>
</LinearLayout> 
```

As you can see I'm trying to add my `HomerView` class which is inside the `DrawNewPlans` class (the activity).

Here is the `onCreate()` method:

```
protected void onCreate(Bundle savedInstanceState) { 

    super.onCreate(savedInstanceState);
    setContentView(R.layout.drawnew);
} 
```

Here's the code for my custom view (bearing in mind this is contained in another class):

```
 class HomerView extends View { // the custom View for drawing on
    // set up Bitmap, canvas, path and paint
    private Bitmap myBitmap; // the initial image we turn into our canvas
    private Canvas myCanvas; // the canvas we are drawing on
    private Rect myRect; // the mathematical path of the lines we draw
    private Paint myBitmapPaint; // the paint we use to draw the bitmap

    // get the width of the entire tablet screen
    private int screenWidth = getContext().getResources()
            .getDisplayMetrics().widthPixels;
    // get the height of the entire tablet screen
    private int screenHeight = (getContext().getResources()
            .getDisplayMetrics().heightPixels);

    private int mX, mY, iX, iY; // current x,y and in

    public HomerView(Context context) { // constructor of HomerView
        super(context);
        System.out.println("Screen Width = "+screenWidth+" and screen height = "+screenHeight);
        myBitmap = Bitmap.createBitmap(screenWidth, screenHeight,
                Bitmap.Config.ARGB_8888); // set our drawable space - the bitmap which becomes the canvas we draw on
        myCanvas = new Canvas(myBitmap); // set our canvas to our bitmap which we just set up
        myRect = new Rect(); // make a new rect
        myBitmapPaint = new Paint(Paint.DITHER_FLAG); // set dither to ON in our saved drawing - gives better color interaction
    }

    protected void onDraw(Canvas canvas) { // method used when we want to draw something to our canvas
        super.onDraw(canvas);
        if (addObjectMode == true || addApplianceMode == true) {
            canvas.drawColor(Color.TRANSPARENT); // sets canvas colour
            canvas.drawBitmap(myBitmap, 0, 0, myBitmapPaint); // save the canvas to bitmap - the numbers are the x, y coords we are drawing from
            for (int i = 0; i < rectList.size(); i++) {
                canvas.drawRect(rectList.get(i), myPaint);
            }
            if (addApplianceMode == true) {
                canvas.drawBitmap(bmp, iX-50, iY-50, myBitmapPaint);
            }
            canvas.drawRect(myRect, myPaint); // draw the rectangle that the user has drawn using the paint we set up
        }
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) { // if screen size changes, alter the bitmap size
        super.onSizeChanged(w, h, oldw, oldh);
    }

    private void touch_Start(float x, float y) { // on finger touchdown
        // check touch mode
        iX = (int) (Math.round(x));
        iY = (int) (Math.round(y));
        mX = (int) (Math.round(x));
        mY = (int) (Math.round(y));
        if (addObjectMode == true) {
            myRect.set(iX, iY, mX, mY);
        } else if (addApplianceMode == true) {
            // code to draw an appliance icon at mX, mY (with offset so icon is centered)
            if (isLamp == true) {
                Resources res = getResources();
                bmp = BitmapFactory.decodeResource(res, R.drawable.lamp);
                myCanvas.drawBitmap(bmp, iX - 50, iY - 50, myBitmapPaint);
            } else if (isPC == true) {
                Resources res = getResources();
                bmp = BitmapFactory.decodeResource(res, R.drawable.pc);
                myCanvas.drawBitmap(bmp, iX - 50, iY - 50, myBitmapPaint);
            } else if (isKettle == true) {
                Resources res = getResources();
                bmp = BitmapFactory.decodeResource(res, R.drawable.kettle);
                myCanvas.drawBitmap(bmp, iX - 50, iY - 50, myBitmapPaint);
            } else if (isOven == true) {
                Resources res = getResources();
                bmp = BitmapFactory.decodeResource(res, R.drawable.oven);
                myCanvas.drawBitmap(bmp, iX - 50, iY - 50, myBitmapPaint);
            } else if (isTV == true) {
                Resources res = getResources();
                bmp = BitmapFactory.decodeResource(res, R.drawable.tv);
                myCanvas.drawBitmap(bmp, iX - 50, iY - 50, myBitmapPaint);
            }
        }
    }

    private void touch_Move(float x, float y) { // on finger movement
        float dX = Math.abs(x - mX); // get difference between x and my X
        float dY = Math.abs(y - mY);
        if (dX >= TOUCH_TOLERANCE || dY >= TOUCH_TOLERANCE) { // if coordinates are outside screen? if touching hard enough?
            mX = (int) (Math.round(x));
            mY = (int) (Math.round(y));
            if (addObjectMode == true) {
                myRect.set(iX, iY, mX, mY);
            }
        }
    }

    @SuppressWarnings("deprecation")
    private void touch_Up() { // on finger release
        if (addObjectMode == true) {
            myRect.set(iX, iY, mX, mY);
            System.out.println("MyRect coords = "+iX+","+iY+","+mX+","+mY);
            rectList.add(myRect);
            myCanvas.drawRect(iX, iY, mX, mY, myPaint); // if this isnt present - no lasting copy is drawn to screen. It is erased every draw.
            if (eraseMode == false) {
                dialogStarter();
            }
        } else if (addApplianceMode == true) {
            showDialog(DIALOG_DEVICE_ENTRY);
        }
    }

    public boolean onTouchEvent(MotionEvent event) { // on any touch event
        if (addObjectMode == true || addApplianceMode == true) {

            float x = event.getX(); // get current X
            float y = event.getY(); // get current Y

            switch (event.getAction()) { // what action is the user performing?
            case MotionEvent.ACTION_DOWN: // if user is touching down
                touch_Start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE: // if user is moving finger while touched down
                touch_Move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP: // if user has released finger
                touch_Up();
                invalidate();
                break;
            }
            return true;
        } else {
            return false;
        }
    }
} 
```

I realise there are many things I need to add - but what are they? `awakenScrollBars()`?

Also: at the moment I get this error `Error inflating class com.example.HomerProject1stDraft.DrawNewPlans.HomerView` in the XML file. Is there a mistake in the way I'm creating the custom view? Can you even create a view from an inner class?

Many Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:57:54.990

ScrollView 只支持垂直滚动。您需要在水平和垂直两侧滚动，因为您需要一个称为 TwoDScrollView 的特殊类。

有关此类和源代码的更多信息，请访问：http: [//blog.gorges.us/2010/06/android-two-dimensional-scrollview/](http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/)

在您的 xml 中使用此类而不是 ScrollView，您应该能够水平和垂直滚动。

对于您的其他错误，请分享源代码并说明您遇到问题的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:20:15.230

Firstly , i would suggest not to wrap your custom scrollview in another scrollview.If it is avoidable, avoid it.Also, you can check below link where i have implemented a custom scrollview.

[https://stackoverflow.com/questions/15188842/customization-of-imageview-and-layouts](https://stackoverflow.com/questions/15188842/customization-of-imageview-and-layouts)

# database-design - How implement billing system

> ID：15252366
> 
> 赞同：1
> 
> 时间：2013-03-06T16:10:39.087
> 
> 标签：database-design, business-logic, billing, application-design, web-application-design

I have two collection in database `income_funds` and `expenditure_funds`:

```
income_funds
    timestamp
    amount
    status (not confirmed, confirmed, refunded)

expenditure_funds
    timestamp
    amount 
```

I need get current account balance and get reports about using. How better implement billing logic with this collections?

## **The simplest way (without additional data):**

1.  to get account balance `sum(confirmed income_funds) - sum(expenditure_funds)`
2.  to get report get income and expenditure funds by period

But I don't like that I must all time calculate account balance.

## **Add account collection:**

I will add `account` collection:

```
account
    balance 
```

1.  to get account balance just get `account.balance`
2.  get report as previous method

But I don't like that I must change balance any time when any funds changed (added or changed status). To verified account balance I always must calculate all funds as in first method. If I get mistake I will don't know how and when it happened.

## **Add period collection:**

I will add `period` collection:

```
period
    is_closed (yes, no)
    start_timestamp
    end_timestamp
    start_balance
    end_balance 
```

1.  to get account balance return last `period.end_balance`
2.  get report as previous method but easy get timestamps by period

I must change `end_balance` any time when any funds changed in period. But I can verify balance by period and if will have mistake I will know that it's happened on this period.

* * *

Last method likes me most of all, but maybe somebody can give me advice in my conclusions or know other solution.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:31:28.240

我认为您的设计有些问题。我会建议一些不同的东西（这里非常简化，注意我专业地构建会计软件）：

```
account (id, account_number, description, account_type)
journal (id, name, description)
journal_entry (id, journal_id, reference, description, transaction_date, memo)
journal_line (journal_entry_id, account_id, amount)
invoice (id, journal_entry_id, customer_vendor_id, duedate, terms)
invoice_line (id, invoice_id, goods_service_id, qty, sellprice, discount)
account_checkpoint (id, account_id, debits, credits, balance, end_date) 
```

然后你要做的是在 journal_entry 上触发，这样 transaction_date 的任何条目早于 max(account_checkpoint.end_date) 都会被拒绝。通过这种方式，您可以从上一个关闭期间向前滚动并通过开放期间。这使报告变得更加容易，并最大限度地减少了您实际需要汇总的内容。

也可以为周期添加其他检查点表，因此如果企业愿意，您可以比 AP 更频繁地关闭 AR，反之亦然。通过这种方式，检查点既可以用作结束点，也可以用作您可以前滚以从中生成报告的点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T07:55:02.100

我想我已经在我的项目中使用了所有 3 个选项。根据您的项目范围和可能性，您可以决定走哪条路。

如果您的数据库支持触发器，那么您可以使用单独的 Balance 表并在您的 *_funds 表中使用更新/插入/删除触发器来更新 Balance 表中的数据。这样可以确保无论数据如何变化，您的余额始终是正确的。我会推荐使用这个选项。

如果您没有大量数据并且您不需要经常计算余额，那么您可以重新计算总和。恕我直言，它将传入和传出的资金存储在一张表中会更容易一些。添加指示交易方向的额外字段（交易）（1 表示收款，-1 表示费用）。然后你可以通过做得到平衡

```
SELECT SUM(amount*transaction) from funds 
```

第三，当我将数据存储在月度文件中时，我使用了过去定期余额的选项。每当创建新文件时，第一条记录就是开始余额，根据上个月的数据当场计算。当上个月的数据发生变化时，我还提供了在极少数情况下重新计算余额的可能性。当用户非常清楚自己在做什么时，这可以正常工作 - 例如在会计知道他需要重新计算余额的会计系统中。

# android - 多屏幕尺寸兼容性复选框

> ID：15252368
> 
> 赞同：0
> 
> 时间：2013-03-06T16:10:43.763
> 
> 标签：android, xml, android-layout, android-view, android-checkbox

我正在尝试创建一个具有背景（如下所示）并在白色区域中有 10 个复选框（2 列 5 行）的布局。我可以通过对一种尺寸视图的反复试验来完成这项工作，但我如何才能让不同的屏幕尺寸保持相同的纵横比？

我对任何想法持开放态度，无论是针对不同尺寸的多种布局还是更聪明的东西。

![在此处输入图像描述](../Images/a398dfeb2f8e9eb80d8457d9188d3de4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:18:09.837

当您想构建一个复选框表（以及相关的文本标签，我假设）时，我建议您使用[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:19:08.837

基本上用你的复选框包装，`LinearLayout`不要给出硬编码的值

```
android:layout_width=""

android:layout_height="" 
```

如果你不能，我的答案会改变。也是`TableLayout`您工作的另一种方法。

# hover - CSS：用文本溢出隐藏的文本：省略号仍然存在

> ID：15252371
> 
> 赞同：1
> 
> 时间：2013-03-06T16:10:49.897
> 
> 标签：hover, flow, css-position, css

我有一个长度可变的 li，但宽度固定的 ul。我在 li 中也有一些图标。

```
<ul>
    <li><span class="icon"></span>Long Text with text-overflow:ellipsis</li>
    <li><span class="icon"></span>Short text</li>
    <li><span class="icon"></span>Long Text with text-overflow:ellipsis</li>
</ul> 
```

li 的`text-overflow`属性设置为`text-overflow:ellipsis;`. 但是会溢出的剪辑文本会阻止其后面的元素（`.icon`）注册光标悬停

我的CSS：

```
.icon {
    height:18px;
    width:18px;
    float:right; /*there is a good reason for this, don't complain ;) */
    cursor:pointer;
    background:url(icons.png);
    background-position:-72px -72px;
}
.icon:hover {
    background-position:-90px -72px;
}
li {
    text-overflow:ellipsis;
    height:20px;
    overflow:hidden;
    white-space:nowrap;
    list-style-type:none;
    width:150px;
} 
```

**检查我的jsfiddle**，它比我解释得好得多：p

[http://jsfiddle.net/eXXTG/](http://jsfiddle.net/eXXTG/)

由 text-overflow:ellipses 隐藏的溢出文本阻止 dom 注册光标悬停在文本后面（或文本所在的位置）上方的内容。

关于解决这个问题的任何想法？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:15:48.533

你可以加

```
position: relative 
```

到 .icon 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:21:28.787

只需将显示**块**添加到图标类：

```
.icon {
    height:18px;
    width:18px;
    background:url(http://www.darkroomart.com/dewolfe/css/images/dw-icons.png);
    float:right;
    /*there is a good reason for this, don't complain ;) */
    cursor:pointer;
    background-position:-72px -72px;
    display: block;
} 
```

# css - div 填充屏幕剩余空间

> ID：15252374
> 
> 赞同：0
> 
> 时间：2013-03-06T16:10:54.380
> 
> 标签：css, html

我想问我可以做一个`div`来填满整个剩余的空间。

我需要用 2 个部分制作网站 - 一个始终在顶部，一个始终在底部

你可以给我一些想法（没有位置：绝对;）

所以这是我的想法 - 3 个带类的 div：HTML：

```
<div class="top"><div>
<div class="center" ></div>
<div class="bottom"></div> 
```

CSS：

```
.bottom{
position:relative;
width:100%;
}
.top{
display:block;
min-height: 250px;
}
.center{
display:block;
min-height:30px;
height:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:19:57.557

如果你给 div 一个 ID，你可以像这样使用 jQuery：

```
$(window).resize(function () {
    resizeWindow();
});

function resizeWindow() {
    var sHeight = $(window).height();
    var tHeight = $("#top").height();
    var bHeight = $("#bottom").height();
    var nHeight = sHeight - tHeight - bHeight;
    $("#center").height(nHeight);
} 
```

调整大小部分还允许任何人调整屏幕大小以及是否有人使用平板电脑/智能手机更改方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:21:13.143

我的理解是你想要三个 div 堆叠在彼此之上。

```
<div id="container">
    <div class="top"><div>
    <div class="center" ></div>
    <div class="bottom"></div> 
</div> 

#container {
width:100%;
height:100%;
}
    .bottom{
    position:relative;
    height:25%;
    width:100%;
    }
    .top{
    position:relative;
    height:25%;
    width:100%;
    }
    .center{
    position:relative;
    height:50%;
    width:100%;
    } 
```

# c# - LINQ 嵌套列表理解从多个文件夹中获取文件

> ID：15252378
> 
> 赞同：1
> 
> 时间：2013-03-06T16:10:58.243
> 
> 标签：c#, linq

我正在尝试`.mp3`从多个文件夹中获取文件。

我已经可以通过此查询为一个文件夹执行此操作：

```
this.MusicList.ItemsSource =
                from string fileName in Directory.GetFiles(@"C:\Users\Public\Music\Sample Music")
                where System.IO.Path.GetExtension(fileName) == ".mp3"
                select new FileInfo(fileName); 
```

对于目录列表还有其他方法吗？

这是我迄今为止尝试过的（没有返回结果）：

```
var paths = new Dictionary<string, string> {
            {"default_music", @"C:\Users\Public\Music\Sample Music"},
            {"alternative_folder", @"C:\tmp"}
            };

this.MusicList.ItemsSource = 
from string fileName in (from string directoryName in paths.Values select Directory.GetFiles(directoryName))
where System.IO.Path.GetExtension(fileName) == ".mp3"
select new FileInfo(fileName); 
```

`from string directoryName in paths.Values select Directory.GetFiles(directoryName);`在其字段中返回`{System.Linq.Enumerable.WhereSelectEnumerableIterator<string,string[]>}`带有我的路径及其包含我的文件的 a。`source``Result View``.mp3`

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T16:12:39.957

尝试以下

```
this.MusicList.ItemsSource =
  from path in paths
  from fileName in Directory.GetFiles(path)
  where System.IO.Path.GetExtension(fileName) == ".mp3"
  select new FileInfo(fileName); 
```

严格方法调用版本

```
this.MusicList.ItemSource = paths
  .SelectMany(path => Directory.GetFiles(path))
  .Where(fileName => System.IO.Path.GetExtension(fileName) == ".mp3")
  .Select(fileName => new FileInfo(fileName)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:17:33.937

您可以使用接受**搜索模式的**[DirectoryInfo.EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd383574.aspx)方法。因此，您不需要获取所有文件并通过调用过滤它们**`Path.GetExtension`**

 **```
var paths = new Dictionary<string, string> {
        {"default_music", @"C:\Users\Public\Music\Sample Music"},
        {"alternative_folder", @"C:\tmp"}
     };

MusicList.ItemsSource = paths.Values.Select(p => new DirectoryInfo(p))
                             .SelectMany(d => d.EnumerateFiles("*.mp3")); 
```

还`DirectoryInfo.EnumerateFiles`返回`FileInfo`实例，这也是你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:17:16.283

试试这个

```
Directory.EnumerateFiles(@"C:\Users\Public\Music\Sample Music", "*.mp3", SearchOption.AllDirectories) 
```

返回 .mp3 的可枚举列表，您可以进一步过滤或枚举等。这比`GetFiles()`处理大量文件和/或目录更有效。

[http://msdn.microsoft.com/en-us/library/dd383571.aspx](http://msdn.microsoft.com/en-us/library/dd383571.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:15:58.343

替代跟踪它是否是文件/目录的可敬的 JaredPar：

```
var basePath = @"c:\temp";
var query = 
    from entry in Directory.EnumerateFileSystemEntries(basePath, "*.*", SearchOption.AllDirectories)
    let isDirectory = Directory.Exists(entry)
    let isFile = File.Exists(entry)
    select new { isDirectory, isFile, entry};
query.Dump(); 
```

编辑：Doh - 误读问题，错过了“来自一组目录”部分；我的耻辱是无法估量的。:)**

# shell - Unix将月份名称转换为数字

> ID：15252383
> 
> 赞同：10
> 
> 时间：2013-03-06T16:11:15.450
> 
> 标签：shell, unix, awk

在 BASH shell 脚本或使用 gdate 中，给定日期如“2011 年 10 月”，我如何转换为年月数字格式？例如，输出应为“2011-10”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T16:34:53.520

```
mydate="Oct 2011"
date --date="$(printf "01 %s" $mydate)" +"%Y-%m" 
```

GNU 日期的 parse_datetime 接口（这是示例所使用的）有很多规则。2011 年 10 月的日期形式不是其中之一，因此您在其前面添加一个“01”并且日期喜欢它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T16:42:51.640

```
read mon year <<< "Oct 2012"
date -d "$mon 1 $year" "+%Y-%m" 
```

结果：

```
2012-10 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-10T00:12:52.827

```
case "`date | awk '{print $2 }'`" in
    Jan) MON="01" ;;
    Feb) MON="02" ;;
    Mar) MON="03" ;;
    Apr) MON="04" ;;
    May) MON="05" ;;
    Jun) MON="06" ;;
    Jul) MON="07" ;;
    Aug) MON="08" ;;
    Sep) MON="09" ;;
    Oct) MON="10" ;;
    Nov) MON="11" ;;
    Dec) MON="12" ;;
esac

echo $MON 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-29T19:12:42.167

您可以通过查找名称字符串的位置将月份转换为数字：

```
#!/bin/bash

month=Oct
months="JanFebMarAprMayJunJulAugSepOctNovDec"
tmp=${months%%$month*}
month=${#tmp}
monthnumber $((month/3+1))
printf "%02d\n" $monthnumber 
```

上面脚本的输出是：

```
10 
```

您可以编码的特定字符串：

```
#!/bin/bash

mydate="Oct 2011"

monthnumber() {
    month=$1
    months="JanFebMarAprMayJunJulAugSepOctNovDec"
    tmp=${months%%$month*}
    month=${#tmp}
    monthnumber=$((month/3+1))
    printf "%02d\n" $monthnumber
}

arr=(`echo ${mydate}`);
month=$(monthnumber ${arr[0]})
year=$(echo ${arr[1]})
echo "$year-$month" 
```

输出将是：

```
2011-10 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T16:36:25.540

我不确定是否有更短的方法可以做到这一点，但这是一种方法。这绝不是万无一失的。您可以通过向输入添加其他检查并使比较不区分大小写来改进这一点。

```
#!/bin/ksh
### Validate input
if [ $# -eq 0 ]
then
    echo "Usage: $0 InputMonYYYY"
    echo "Example: $0 \"Oct 2011\""
    exit 1
fi
### Read input
INPUTSTR=$1
MON_STR=`echo $INPUTSTR |cut -d' ' -f1`
YYYY_STR=`echo $INPUTSTR |cut -d' ' -f2`

if [[ "$MON_STR" = "Jan" ]] then
  MON_NUM=01
elif [[ "$MON_STR" = "Feb" ]] then
  MON_NUM=02
elif [[ "$MON_STR" = "Mar" ]] then
  MON_NUM=03
elif [[ "$MON_STR" = "Apr" ]] then
  MON_NUM=04
elif [[ "$MON_STR" = "May" ]] then
  MON_NUM=05
elif [[ "$MON_STR" = "Jun" ]] then
  MON_NUM=06
elif [[ "$MON_STR" = "Jul" ]] then
  MON_NUM=07
elif [[ "$MON_STR" = "Aug" ]] then
  MON_NUM=08
elif [[ "$MON_STR" = "Sep" ]] then
  MON_NUM=09
elif [[ "$MON_STR" = "Oct" ]] then
  MON_NUM=10
elif [[ "$MON_STR" = "Nov" ]] then
  MON_NUM=11
elif [[ "$MON_STR" = "Dec" ]] then
  MON_NUM=12
fi
echo ${YYYY_STR}-${MON_NUM} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-06T16:47:13.593

Bash4 支持哈希表（尽管 Jim 的回答是正确的）。

例子

```
#!/bin/bash

declare -A months=( ["Jan"]="01" ["Feb"]="02" )

mydate="Jan 2011"

echo ${mydate:4:8}-"${months["${mydate:0:3}"]}" 
```

输出：

```
2011-01 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-24T22:38:05.303

让我们踢死这匹死马。如果您不关心无效的月份名称，您可以使用我编写的这个函数，它很短（并且只有 1 个 exec），但希望一个月是有效的英文 3 字符小写或大写，并且只需要 GNU sed和重击：

```
m2n() { echo $((-10+$(sed 's/./\U&/g;y/ABCEGLNOPRTUVY/60AC765A77ABB9/;s/./+0x&/g'<<<${1#?}) ));} 
```

对于您的示例，我会这样做：

```
read m y <<<"$@"; echo "$y-`m2n $m`" 
```

# jsf - Primefaces 图表 + jqplot 扩展器 - y 轴上的舍入值

> ID：15252387
> 
> 赞同：7
> 
> 时间：2013-03-06T16:11:23.263
> 
> 标签：jsf, jakarta-ee, graph, primefaces, jqplot

**背景**

我有一个使用 jqplot 选项扩展的 primefaces 折线图（x 上的日期，y 上的整数 >= 0）：

```
function extender() {
        this.cfg.axes = {
            xaxis : {
                renderer : $.jqplot.DateAxisRenderer, 
                rendererOptions : {
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer
                },
                tickOptions : { 
                    fontSize:'10pt',
                    fontFamily:'Tahoma', 
                    angle:-40,                     
                    formatString:'%b-%y'
                },
                tickInterval:'2592000000'
            },
            yaxis : {
                min: 0,
                rendererOptions : {
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer,
                },
                tickOptions: {
                    fontSize:'10pt', 
                    fontFamily:'Tahoma', 
                    angle:0,
                    formatString: '%d'
                }
            },
        };
        this.cfg.axes.xaxis.ticks = this.cfg.categories;
    } 
```

我正在使用 jqplot 扩展器在 x 轴上自定义日期间隔，这工作正常：

![工作正常](../Images/667b8dc5b17a2d574b7ea05519acbcf1.png)

**问题**

当我在 y 轴中使用该选项`min: 0`时，数字的格式会变得非常时髦，尤其是当值较小时：

![分数数](../Images/cdc5dbb3adc98f0443239492f499699a.png)

请注意，`minY`primefaces 中的属性不起作用（可能是因为扩展程序覆盖了它）

为了解决这个问题，我使用`formatString: %d`. 它可以工作，但会产生刻度数问题：

![在此处输入图像描述](../Images/37609a815d650d38e8972cc61e7cca0c.png)

正如您在屏幕截图中看到的那样，值 1 有好几行。

**问题**

如何确保我不会在 y 轴上获得多次相同的值？

我真的不能有一个静态的刻度数，因为当数据变大（比如说大约 100）时，我确实想要 y 轴上的几个值（例如 20、40 等...）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T11:57:36.023

我设法使用 Mehasse 帖子中的想法解决了我的问题。

定义`max`Mehasse 建议的值并没有删除不需要的刻度线，但帮助我找到了答案。

默认情况下，primefaces/jqplot 希望有`4`y 轴刻度线。因此，如果最大值低于，则在向上取整（ ）`4`时，y 轴标签中将出现重复。`formatString: '%d'`

我基本上想要的是刻度间隔是`Max(y) \ 4`when`Max(y) > 4`或`1`其他：

```
function actionPlanExtender() {
        var series_max =maxSeries(this.cfg.data);
        var numberOfTicks =4;
        var tickInterval = Math.max(1, Math.ceil(series_max/numberOfTicks));
        this.cfg.axes = {
            xaxis : {
                renderer : $.jqplot.DateAxisRenderer, 
                rendererOptions : {
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer
                },
                tickOptions : { 
                    fontSize:'10pt',
                    fontFamily:'Tahoma', 
                    angle:-40,                     
                    formatString:'%b-%y'
                },
                tickInterval:'2592000000'
            },
            yaxis : {
                min: 0,
                rendererOptions : {
                    tickRenderer:$.jqplot.CanvasAxisTickRenderer,
                },
                tickOptions: {
                    fontSize:'10pt', 
                    fontFamily:'Tahoma', 
                    angle:0,
                    formatString: '%d',
                },
                tickInterval: tickInterval
            },
        };
        this.cfg.axes.xaxis.ticks = this.cfg.categories;
    } 
```

为了计算 y-max 值，我使用以下形式获取绘图`this.cfg.data`值`[series_1,..., series_n]``series_i = [[x_1, y_1],..., [x_m, y_m]]`

该`maxSeries`函数如下所示：

```
function maxSeries(datas) {
    var maxY = null;
    var dataLength = datas.length;
    for ( var dataIdx = 0; dataIdx < dataLength; dataIdx++) {
        var data = datas[dataIdx];
        var l = data.length;
        for ( var pointIdx = 0; pointIdx < l; pointIdx++) {
            var point = data[pointIdx];
            var y = point[1];
            if (maxY == null || maxY < y) {
                maxY = y;
            }
        }
    }
    return maxY;
} 
```

**请注意，在我的情况下，我知道我的情况下我没有价值低于`0`。如果不是这种情况，则应更新此代码。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:42:28.367

当我第一次开始使用 JQPlot 时，我很惊讶它没有开箱即用地选择合理的轴标签。它实际上很容易修复。

我将假设您希望 y 轴从零开始。如果不是这样，您需要稍微修改此代码。

```
// This is YOUR data set
var series = [882, 38, 66, 522, 123, 400, 777];

// Instead of letting JQPlot pick the scale on the y-axis, let's figure out our own.
var series_max =  Math.max.apply(null, series);
var digits = max.toString().length;
var scale = Math.pow(10, max_digits - 1);

var max = (Math.ceil(series_max / scale)) * scale;

$.jqplot(
    'foo',
    [series],
    {
        axes: {
            yaxis: {
                min: 0,
                max: max
            }
        }
        // Put your other config stuff here
    }
) 
```

这里的基本思想是，我们希望将数值四舍五入*到*接近系列中最大值的一些不错的舍入值。特别是，我们四舍五入到最接近的数字，除了最左边的所有数字都为零。所以最大值 882 将导致 y 轴最大值为 1000。

# c# - 更改个人资料语言

> ID：15252388
> 
> 赞同：0
> 
> 时间：2013-03-06T16:11:27.807
> 
> 标签：c#, asp.net, culture, uiculture

网页配置

```
<profile>
      <properties>
      <add name="Language"  />
      </properties>
</profile> 
```

默认.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
    {
        Profile.Language = "fr";
        string strCultur = Profile.Language;
        Page.Culture = strCultur;
        Page.UICulture = strCultur;
        lblLabel.Text = GetLocalResourceObject("lblLabelResource1").ToString();
    } 
```

App_LocaleResource：

*   默认.aspx.resx
*   Default.aspx.fr.resx

这是我的错误：

```
Object reference not set to an instance of an object. 
```

我有什么错我想要我的法语文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:56:54.017

你可以试试这个吗？

或在这里查看更多

**win form c# ->** [使用资源更改 WinForm 的语言](https://stackoverflow.com/questions/8896723/change-language-of-winform-with-resource)

```
using System.Globalization; 
using System.Threading;

//LanguageString sample
String languageString = "fr-FR";
//Apply new language
Thread.CurrentThread.CurrentUICulture = new CultureInfo(languageString);
Application.Run(new Form()); 
```

**asp.net c#** -> [http://forums.asp.net/t/1244851.aspx/1](http://forums.asp.net/t/1244851.aspx/1)

```
protected override void InitializeCulture()
    {
        Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-GB");
        Thread.CurrentThread.CurrentCulture = new CultureInfo("en-GB");

        base.InitializeCulture();
    } 
```

# pear - PEAR 和 PHP——升级/执行任何操作时 OS X 上的“获取频道信息时出错”

> ID：15252389
> 
> 赞同：0
> 
> 时间：2013-03-06T16:11:34.910
> 
> 标签：pear, php

我看到了这个问题：[Problem with update pear](https://stackoverflow.com/questions/6828190/problem-with-update-pear)说问题是使用过时的 PEAR 版本，好吧，我使用的是 1.9.4（最新版本）。

```
dinosaurhunter:~ root# pear -V
PEAR Version: 1.9.4
PHP Version: 5.3.21
Zend Engine Version: 2.3.0
Running on: Darwin dinosaurhunter.network.local 12.2.1 Darwin Kernel Version 12.2.1: Thu Oct 18 16:32:48 PDT 2012; root:xnu-2050.20.9~2/RELEASE_X86_64 x86_64 
```

我正在使用自制软件中的 PHP。

太奇怪了：

```
dinosaurhunter:~ root# pear upgrade
Error getting channel info from pear.php.net: Connection to `pear.php.net:80' failed: Operation timed out
Error getting channel info from pear.php.net: Connection to `pear.php.net:80' failed: Operation timed out
Error getting channel info from pear.php.net: Connection to `pear.php.net:80' failed: Operation timed out
Error getting channel info from pear.php.net: Connection to `pear.php.net:80' failed: Operation timed out
Error getting channel info from pear.php.net: Connection to `pear.php.net:80' failed: Operation timed out
Nothing to upgrade

dinosaurhunter:~ root# curl pear.php.net:80 | head -n5
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 14420    0 14420    0     0  41953      0 --:--:-- --:--:-- --:--:-- 66759
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head >
<link rel="alternate" href="http://blog.pear.php.net/feed/" type="application/rss+xml" title="PEAR News" /> <title>PEAR - PHP Extension and Application Repository</title>
 <link rel="shortcut icon" href="/gifs/favicon.ico" /> 
```

我看到有人说这是代理的东西——我也不使用代理。

```
dinosaurhunter:~ root# pear config-show | grep -i proxy
HTTP Proxy Server Address      http_proxy       <not set> 
```

我真的很迷茫，因为他们说的 URL 超时工作得很好，我没有使用代理，PEAR 是最新的——还能是什么？

**编辑**做了更多的调试......

此代码有效：

```
<?php

error_reporting(E_ALL);
ini_set('display_errors', 1);

ini_set ('allow_url_fopen', 1);

$url = 'http://www.google.com';

// Create a stream
$opts = array(
  'http'=>array(
    'timeout'=>60,
  )
);

$context = stream_context_create($opts);

// Open the file using the HTTP headers set above
$file = file_get_contents($url, false, $context);

var_dump($file); 
```

但是，这不起作用：

```
<?php

error_reporting(E_ALL);
ini_set('display_errors', 1);

ini_set ('allow_url_fopen', 1);

$file = file_get_contents('http://www.google.com/');
var_dump($file); 
```

它失败了：

> 警告：：`file_get_contents(http://www.google.com/)`无法打开流：操作超时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:46:24.120

根本问题最终是`default_socket_timeout`配置。

它被设置为：

```
; Default timeout for socket based streams (seconds)
; http://php.net/default-socket-timeout
default_socket_timeout = unlimited 
```

我把它改成

```
; Default timeout for socket based streams (seconds)
; http://php.net/default-socket-timeout
default_socket_timeout = 120 
```

它有效。

看起来`file_get_contents`可能不尊重[`default_socket_timeout`](http://php.net/default_socket_timeout)“无限”的价值。布拉格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:15:37.900

运行 wireshark 并检查 pear 实际上在网络方面做了什么。您还可以运行`pear -vvvvvv`以获取调试输出 - 这可能会给您关于问题来源的提示。

# drupal - 使用 db_like drupal 7

> ID：15252390
> 
> 赞同：1
> 
> 时间：2013-03-06T16:11:35.523
> 
> 标签：drupal, drupal-7

有人可以向我展示一个示例，我应该如何通过简单的查询使用 drupal 7 db_like 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:15:51.763

```
$result = db_select('person', 'p')
  ->fields('p')
  ->condition('name', db_like($prefix) . '%', 'LIKE')
  ->execute()
  ->fetchAll(); 
```

取自[此页面](http://api.drupal.org/api/drupal/includes!database!database.inc/function/db_like/7)。

# javascript - 为什么使用 JavaScript 切换图像可见性很慢/需要重新绘制？

> ID：15252392
> 
> 赞同：1
> 
> 时间：2013-03-06T16:11:39.717
> 
> 标签：javascript, image, performance, visibility, show-hide

我的网站上有一些图像相互堆叠（相对 DIV 中的绝对定位）。我喜欢在 mousemove 事件时切换这些图像。我通过添加/删除 CSS 类进行了尝试。到目前为止，这有效。但是，在 Chromes 时间轴中，我看到了相当长的重绘，包括每个事件的“图像解码”和“图像调整大小”。我尝试了不同的“隐藏技术”，如“display:none”、“visibility:hidden”和“z-Index:0”。切换显示或可见性并没有什么不同，但是 zIndex 版本花了很长时间，因为每张图像都会重新绘制。所以我被困在这里。如何在不重绘的情况下切换可见性？至少不需要图像解码？！这是我在 JS 中如何做的代码片段：

```
var currentImgElem = document.getElementById(elem_id_curr);
var showImgElem = document.getElementById(elem_id_show);

currentImgElem.classList.add("hide");
showImgElem.classList.remove("hide"); 
```

而“隐藏”是以下之一：

```
display:none;
visibility:hidden;
z-Index:0; 
```

还有一个困惑：当我在画布上绘制图像时，一切都很好！

# php - PHP 无法删除由 JavaScript 设置的 cookie

> ID：15252394
> 
> 赞同：11
> 
> 时间：2013-03-06T16:11:42.337
> 
> 标签：php, javascript, cookies

是否可以通过 JS 和 PHP 删除前面设置的 cookie？

我正在这样做：

***前（JS）：**

```
if ($.cookie('myCookie'))
{
   console.log('Cookie.. :(  ');
}
else
{
    console.log('Yaay! No cookie!');
    $.cookie('myCookie', '123');
} 
```

**返回（PHP）：**

```
if (isset($_REQUEST['removeCookie']))
{
   setcookie("myCookie", "", time()-3600);
   unset($_COOKIE['myCookie']);
} 
```

结果：

![在此处输入图像描述](../Images/eaa78428d9d83ba61c26c0dd5b688aa5.png)

**好像是个谜**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T16:19:40.303

You can't force the browser to delete the cookie file. You can, however, delete the contents of the cookie and expire it. Which is exactly what you're doing with your code above. I would probably tweak it slightly:

```
setcookie('myCookie', '', 1, '/'); // no need to calculate one hour ago. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T16:21:20.657

如果客户端时间错误，使用 time() 函数设置 cookie 过期可能无法按预期工作。

要取消设置 cookie 尝试，

`setcookie('myCookie', 'blah blah', 1);`

来源：[php setcookie 文档中的评论](http://www.php.net/manual/en/function.setcookie.php#109173)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T16:17:32.990

这将取决于用户 PC 在超时后删除 cookie。就个人而言，我不会相信这一点。我会将 cookie 设置为空值，或者`DELETED`在您的测试代码中将其设置为 then 检查它是否已设置，然后检查该值是否为空`DELETED`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-05T23:03:51.887

要通过 PHP 从浏览器中完全删除 cookie，试试这个代码

```
$name = 'exists_cookie';
unset($_COOKIE[$name]);
  // Set empty value
$blank = setcookie($name, '', time() - 3600); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T16:13:39.827

有人可以在测试机器上运行此代码吗？我有点困惑，为什么 cookie 可以“取消设置”但不能在 php 中更改值或过期等，似乎 setcookie() 根本不起作用。

```
<script type="text/javascript" src="jquery.js"></script>
<script src="jquery.cookie.js"></script>
<script>
   $.cookie('myCookie', '123' ,'/');
   console.log("Created myCookie");
</script>
<?php
   echo $_COOKIE['myCookie'];
   //Comment/uncomment below as required
   //setcookie("myCookie", "BLAH", time()-430000);
   //$_COOKIE['myCookie'] = "BLAH";
   setcookie('myCookie', '', 1, '/');
   echo "<br />unset myCookie";
   echo "<br />".$_COOKIE['myCookie'];
?>
<script>
console.log($.cookie('myCookie').length);
if ($.cookie('myCookie').length>0)
{
   console.log('Cookie exists  ');
   console.log($.cookie('myCookie'));
}
else
{
    console.log('Yaay! No cookie!');
}
</script> 
```

您似乎能够创建一个 php <> JS cookie mismatch 即：2 个 cookie 调用完全相同但存储不同的数据。

# actionscript-3 - 拖动影片剪辑的新实例

> ID：15252397
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:11:52.780
> 
> 标签：actionscript-3, drag-and-drop

我想要做的是以下内容：

我有一个大理石托盘的图像，当我在托盘上按住鼠标时，会在鼠标位置创建一个大理石实例。有没有办法在不抬起鼠标的情况下开始拖动大理石而不是托盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:14:26.150

是的。在 MouseDown 事件 **编辑中使用 startDrag：** 请参阅此链接[链接](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html#startDrag%28%29)

# c# - 如何扩展类的字段？

> ID：15252401
> 
> 赞同：0
> 
> 时间：2013-03-06T16:11:57.770
> 
> 标签：c#, .net, linq, extend

假设我有一个列表`Person`（这是一个类）。它包含大约 20 个字段（姓名、姓氏、年龄、出生日期等）。所以我得到了这个清单：

```
var listOfPersons= MyContext.Persons.Cast<Person>(); 
```

现在，我需要遍历这个列表，并为每个`Person`添加一个新字段（它在类中不存在），比如说，`CurrentDateTime`.

我可以使用新字段创建一个新对象，并将值从 Person 复制并粘贴到新类。像：

```
PersonNew newPerson = new PersonNew("Name", "Surname", "Age", "DateOfBirthdate", ... "CurrentDateTime"); 
```

但是，如果将来我更改 Person 类，这将非常糟糕。那么，有没有一种策略可以用一个新的领域来“扩展人”呢？这需要 Person 实例（无论它是什么）并添加新字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:15:46.610

您可以创建一些使用 Automapper创建`PersonNew`的静态方法。`Person`

```
public class PersonNew : Person
{
    public static PersonNew CreateFromPerson(Person person, DateTime currentDateTime)
    {
        var newPerson = Mapper.Map<PersonNew>(person);
        newPerson.CurrentDateTime = currentDateTime;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:16:19.893

我认为您描述的解决方案效果很好。如果你想在不扩展类的情况下跟踪每个人的生日`Person`，你可以使用 Dictionary 对象

```
var listOfPersons = MyContext.Perons.Cast<Person>();
Dictionary<Person, DateTime> birthdays = new Dictionary<Person, DateTime>    
foreach(Person person in listOfPersons)
{
    birthdays.Add(person, getBirthday(person); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:16:31.277

一种解决方案是创建您的 class `partial`，并将您的字段添加到您的 class 的另一个`partial`定义中：

```
public partial class Person
{
    public string Name { get; set; }
    public string FirstName { get; set; }
    ...
}

...

public partial class Person
{
    public DateTime CurrentDateTime { get; set; }
}

...

var listOfPersons = MyContext.Persons.Cast<Person>();
foreach (var person in listOfPersons)
{
    person.CurrentDateTime = ....
} 
```

请注意，您将使用类的*相同*实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:41:44.333

首先，我建议使用扩展方法来投影集合而不是迭代。像那样：

```
var newCollection = oldCollection.Select(entity => MakeNewType(entity)) 
```

其次，使用新字段“扩展人”是什么意思并不完全清楚。以下是您可以实现这一目标的几种方法。

1）使用新字段创建另一个类并将其映射到旧类。这是 asp.net mvc 应用程序的常见场景，您将模型映射到适当的视图模型。Automapper 对于这些类型的场景很有用（参见 Sławomir Rosiek anwser）

2) 在 c# 4+ 中利用 dlr。Yuo 将失去对动态对象的智能感知，但它们可以通过函数传递

```
var newPeople = people.Select(p =>
    {
        dynamic expando = new ExpandoObject();
        expando.Id = p.Id;
        expando.FirtName = p.FirtName;
        /* ... */
        expando.CurrentDateTime = DateTime.Now;
        return expando;
    }); 
```

3) 使用匿名类型。匿名类型不能传递给其他函数，因此当您需要在单个方法中快速投影数据并计算一些结果时，这种方法很有用

```
var newPeople = people.Select(p => new 
    { 
        Id = p.Id, 
        FirtName = p.FirtName, 
        /* ... */ 
        CurrentDateTime = DateTime.Now 
    }); 
```

在这两种情况下，您现在都可以访问新“创建”的属性：

```
foreach(var p in newPeople)
{
    Console.WriteLine("CurrentDateTime: {0}", p.CurrentDateTime);
} 
```

4) 如果你真的需要在运行时创建一个功能齐全的 .net 类，你可以使用[Reflection.Emit](http://msdn.microsoft.com/en-us/library/system.reflection.emit.typebuilder.createtype.aspx)。这种情况通常用于创建动态代理 - 实现某些仅在运行时才知道的功能的子类。实体框架执行此操作。

# java - 使用 Eclipse、GlassFish 和 Apache CXF 时出现异常

> ID：15252403
> 
> 赞同：2
> 
> 时间：2013-03-06T16:12:00.187
> 
> 标签：java, eclipse, jakarta-ee, glassfish

我正在使用 Eclipse Juno v4.2 R2、一个 Eclipse 内部 GlassFish 3.1.2（之前与 3.1.2.2 有同样的问题）和 Apache CXF 2.7.1，试图通过 JAX-RS 实现 RESTful Web 服务。GlassFish 服务器正在启动并且应用程序部署成功时，由于我重新启动了 IDE，因此无法再部署该应用程序。当 Eclipse 尝试在 GlassFish 上发布应用程序时，我不断收到此错误：

```
Severe: wsdl file classpath:/org/apache/cxf/ws/discovery/wsdl/wsdd-discovery-1.1-wsdl-os.wsdl does not exist for web service Discovery
Severe: Exception while deploying the app [MyFunnyApp]
Severe: wsdl file classpath:/org/apache/cxf/ws/discovery/wsdl/wsdd-discovery-1.1-wsdl-os.wsdl does not exist for web service Discovery
java.lang.RuntimeException: wsdl file classpath:/org/apache/cxf/ws/discovery/wsdl/wsdd-discovery-1.1-wsdl-os.wsdl does not exist for web service Discovery
    at com.sun.enterprise.deployment.util.ModuleContentValidator.accept(ModuleContentValidator.java:196)
    at com.sun.enterprise.deployment.WebBundleDescriptor.visit(WebBundleDescriptor.java:1999)
    at com.sun.enterprise.deployment.archivist.WebArchivist.postOpen(WebArchivist.java:284)
    at com.sun.enterprise.deployment.archivist.WebArchivist.postOpen(WebArchivist.java:89)
    at com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:245)
    at com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:252)
    at com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:213)
    at com.sun.enterprise.deployment.archivist.ApplicationFactory.openArchive(ApplicationFactory.java:165)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:185)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:94)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.loadDeployer(ApplicationLifecycle.java:827)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.setupContainerInfos(ApplicationLifecycle.java:769)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:368)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

Severe: Exception while deploying the app [MyFunnyApp] : wsdl file classpath:/org/apache/cxf/ws/discovery/wsdl/wsdd-discovery-1.1-wsdl-os.wsdl does not exist for web service Discovery 
```

有谁知道是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T21:52:03.950

到目前为止，我对这个问题的解决方案是遵循这里的建议：http: [//osdir.com/ml/users-cxf-apache/2012-12/msg00046.html](http://osdir.com/ml/users-cxf-apache/2012-12/msg00046.html)

我已经从 CXF lib/ 目录中移动了以下 JAR：

cxf-services-ws-discovery-api-2.7.4.jar cxf-services-ws-discovery-service-2.7.4.jar cxf-services-wsn-api-2.7.4.jar cxf-services-wsn-core -2.7.4.jar

然后我在 Eclipse 项目的构建路径选项卡上刷新了 CXF 库（删除库然后重新添加，检查是否没有 cxf-services-ws-discovery-* 和 cxf-services-wsn-* JAR） .

使用这个新的 CXF JAR 创建和部署客户端和服务工作。我刚刚用 CXF 2.7.4 尝试过（CXF 2.7.5 与 Eclipse 4.2 有更大的问题...... Java2Ws 立即停止......）

# api - 修改谷歌地图api

> ID：15252407
> 
> 赞同：0
> 
> 时间：2013-03-06T16:12:10.373
> 
> 标签：api, map, rewrite

是否可以使用谷歌地图 API 为谷歌地图添加更多功能？例如，我想在谷歌地图中添加更多的指标，包括楼梯、电梯等，可以吗？

另外，我想再增加一个功能，比如说根据谷歌地图API创建一条没有楼梯的新路线，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:17:45.237

这取决于你的意思。

如果您在自己的网站/应用程序中使用 Google 地图，您可以根据自己的数据添加自定义标记/覆盖。（参见：[https](https://developers.google.com/maps/documentation/javascript/overlays) ://developers.google.com/maps/documentation/javascript/overlays ）。您可以为几乎任何您能想到的东西添加标记/覆盖。

如果您的意思是将其添加到通常的 maps.google.com 网站，那么据我所知，您不能。

您无法像 Google 控制那样更改 API，但您可以在您的网站上随意使用 API。

# ios - 使用 resizeableImageWithCapInsets:resizingMode 平铺 UIImageView？

> ID：15252408
> 
> 赞同：1
> 
> 时间：2013-03-06T16:12:13.833
> 
> 标签：ios, objective-c, uiimageview, uiimage, image-resizing

我正在使用以下代码尝试创建带有帽插图的平铺图像，并将下面的图像视为模拟器中的结果。我的源图像大小为 145x83 像素，也显示在此处。我究竟做错了什么？

**来源图片：**

![在此处输入图像描述](../Images/843dd0814e7116e2bf0f74b2522c3cb6.png)

**模拟器中的结果：**

![在此处输入图像描述](../Images/7f47e570d67006ec58c3b16fe8f9642d.png)

**代码：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImage *cloudImage = [UIImage imageNamed: @"cloud.png"];
    [cloudImage resizableImageWithCapInsets: UIEdgeInsetsMake(10, 10, 10, 10) resizingMode: UIImageResizingModeTile];

    UIImageView *imageView1 = [[UIImageView alloc] initWithImage: cloudImage];
    [imageView1 setFrame: CGRectMake(50, 50, 100, 100)];

    UIImageView *imageView2 = [[UIImageView alloc] initWithImage: cloudImage];
    [imageView2 setFrame: CGRectMake(250, 50, 200, 200)];

    [self.view addSubview: imageView1];
    [self.view addSubview: imageView2];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:20:53.367

您没有将可调整大小的图像分配给任何东西，您需要执行以下操作：

```
UIImage *cloudImage = [[UIImage imageNamed: @"cloud.png"] resizableImageWithCapInsets: UIEdgeInsetsMake(10, 10, 10, 10) resizingMode: UIImageResizingModeTile]; 
```

或者

```
cloudImage = [cloudImage resizableImageWithCapInsets: UIEdgeInsetsMake(10, 10, 10, 10) resizingMode: UIImageResizingModeTile]; 
```

# java - ah:dataTable 中的 h:inputText 在单击立即为 true 的命令按钮后不保留其状态

> ID：15252409
> 
> 赞同：0
> 
> 时间：2013-03-06T16:12:14.270
> 
> 标签：java, jsf, jsf-2, mojarra

我需要在 ah:dataTable 中显示一些必须可编辑的实体。用户可以在该表中添加和删除实体。问题是，当我单击“添加”按钮添加实体时，用户输入的状态消失了。

我正在运行 Mojarra 2.1.7-jbossorg-1 (20120227-1401)

这是第一次显示视图，可以看到 dataTable 是空的： ![在此处输入图像描述](../Images/35e48472d8df8aad4372700ca8a2094b.png)

然后我点击添加，显示如下： ![在此处输入图像描述](../Images/8b89fae803590af9f5434f950a0fe889.png)

我在输入中输入了一些值： ![在此处输入图像描述](../Images/006810efe2516a997fe61c450e23bc81.png)

我再次单击“添加”，您可以看到我在第一行键入的值消失了： ![在此处输入图像描述](../Images/3b9f3e97b6fda06c206d27cf6df3497e.png)

我需要能够保持行的状态，直到我完成编辑，直到我点击“保存”按钮。

我还尝试了 h:dataTable 的**rowStatePreserved** ="true" 属性，结果如下：

就在我在第一行输入一些内容并单击添加之后： ![在此处输入图像描述](../Images/14891d31de6ab40107100a58fa64f1a9.png)

第一行状态被保留，但添加的第二行具有与第一行相同的值，即使我还没有在其中输入任何内容。

**代码**：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:oms="http://aom.org/oms"
    xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>Testing</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</h:head>
<h:body>
    <h:form id="myForm" prependId="false">  
        <h:dataTable value="#{testingBean.persons}" var="person" border="1" rowStatePreserved="true">
            <h:column>
                <f:facet name="header">Name</f:facet>
                <h:inputText value="#{person.name}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Age</f:facet>
                <h:inputText value="#{person.age}"/>
            </h:column>
            <h:column>
                <h:commandButton action="#{testingBean.remove(person)}" value="Remove" immediate="true"/>
            </h:column>
        </h:dataTable>
        <h:commandButton action="#{testingBean.add()}" value="Add" immediate="true"/>
        <h:commandButton action="#{testingBean.save()}" value="Save" />
    </h:form>
</h:body>
</html> 
```

**测试Bean.java：**

```
package org.aom.oms.controller;

import java.util.ArrayList;
import java.util.List;

import javax.enterprise.inject.Model;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class TestingBean {  

    private List<Person> persons = new ArrayList<TestingBean.Person>();

    public List<Person> getPersons() {
        return persons;
    }

    public void setPersons(List<Person> persons) {
        this.persons = persons;
    }

    //Inner class for testing purpose
    public class Person {
        private String name;
        private Integer age;

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public Integer getAge() {
            return age;
        }

        public void setAge(Integer age) {
            this.age = age;
        }
    }

    public void save() {
        System.out.println("Saving...");
        //myRepository.save(persons);
    }

    public void add() {
        persons.add(new Person());
    }

    public void remove(Person person) {
        persons.remove(person);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:11:20.693

而不是使用 h:dataTable 使用 Tomahawk [t:datatable](http://myfaces.apache.org/tomahawk-project/tomahawk20/tagdoc/t_dataTable.html)

> MyFacesDataTable 通过两个重要特性扩展了标准 JSF DataTable：
> 
> *   可以保存 DataModel 的状态。
> *   支持可点击的排序标题（请参阅 SortHeader 组件）。

这些属性让你做你想做的事：

> **preserveRowStates** (boolean)：指示在数据表再次呈现之前是否不应丢弃每一行的状态。如果数据表中的输入组件没有值绑定并且应该再次显示其中输入的值，则将其设置为 true 可能会非常有用。这只有在数据表的数据模型没有通过排序、删除或添加行而改变时才可靠。默认值：假
> 
> **forceIdIndexFormula** (String)：在表体组件的构造中覆盖默认行索引的公式。示例：#{myRowVar.key} > 警告，EL 应该为每一行计算一个唯一值！

# ios - Objective-c + RestKit - 在下一步之前等待响应

> ID：15252414
> 
> 赞同：3
> 
> 时间：2013-03-06T16:12:33.203
> 
> 标签：ios, objective-c, asynchronous, restkit

您好，提前感谢您的帮助。我一直在寻找，但找不到答案。我只为 iOS 编程一周。

到目前为止，与 Web 服务的所有连接都正常工作，我已经创建了一个类和方法来执行这些调用。我正在进行标准登录，用户输入登录信息，应用程序将这些值传递给 Web 服务，它返回一个布尔值，具体取决于信息是否与数据库中的任何内容匹配。之后，应用程序获取返回值并移动到下一个屏幕或显示错误警报。或者至少这就是我的目标。

问题是，在进行其余调用或解析响应之前执行条件，并且我没有太多运气找到解决方案。我读过异步和同步调用，但在实现它们时运气不佳。

这是调用代码：

```
//Class that has the methods for calling the web services
__restObj  = [[restCalls alloc] init];
bool login = [__restObj restLogin:user passwd:pass];
if (login) {
   [self performSegueWithIdentifier:@"adminLogin" sender:self];
}
else{
   UIAlertView*alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Incorrect group name or password." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
   [alert show];
} 
```

在实际 POST 发生之前执行的条件总是错误的。

这是我的方法：

```
- (bool)restLogin:(NSString*)user passwd:(NSString*)pass{
// Load the object model via RestKit
RKObjectManager *objectManager = [RKObjectManager sharedManager];

groupInfo *gi = [[groupInfo alloc] init];

gi.gName = user;
gi.pass = pass;

RKObjectMapping *userInfoMapping = [RKObjectMapping requestMapping];
[userInfoMapping addAttributeMappingsFromDictionary:@{@"gName": @"groupName",@"pass":@"pass"}];

RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:userInfoMapping
                                                                               objectClass:[groupInfo class]
                                                                               rootKeyPath:nil];
[objectManager addRequestDescriptor:requestDescriptor];
objectManager.requestSerializationMIMEType = RKMIMETypeJSON;

[objectManager postObject:gi
                     path:@"adminLoginIos"
               parameters:nil
                  success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                      NSArray* statuses = [mappingResult array];
                      NSLog(@"Loaded statuses: %@", statuses);
                      _result = [statuses objectAtIndex:0];
                  }
                  failure:^(RKObjectRequestOperation *operation, NSError *error) {
                      NSLog(@"Hit error: %@", error);
                  }
 ];

return _result;
} 
```

在此先感谢并请记住，我对此很陌生，因此感谢您的帮助，如果我的代码不是最好的，请告诉我。

问候， ChmlGr

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:42:17.617

您需要传入一个块，然后在成功回调中，块返回_result。

基于您的结构的示例如下：

```
-(void) restLogin:(NSString*)user passwd:(NSString*)pass block:(void (^)(id))block {
    // Load the object model via RestKit
    RKObjectManager *objectManager = [RKObjectManager sharedManager];

    groupInfo *gi = [[groupInfo alloc] init];

    gi.gName = user;
    gi.pass = pass;

    RKObjectMapping *userInfoMapping = [RKObjectMapping requestMapping];
    [userInfoMapping addAttributeMappingsFromDictionary:@{@"gName": @"groupName",@"pass":@"pass"}];

    RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:userInfoMapping
                                                                                   objectClass:[groupInfo class]
                                                                                   rootKeyPath:nil];
    [objectManager addRequestDescriptor:requestDescriptor];
    objectManager.requestSerializationMIMEType = RKMIMETypeJSON;

    [objectManager postObject:gi
                         path:@"adminLoginIos"
                   parameters:nil
                      success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                          NSArray* statuses = [mappingResult array];
                          NSLog(@"Loaded statuses: %@", statuses);
                          _result = [statuses objectAtIndex:0];
                          block(_result);
                      }
                      failure:^(RKObjectRequestOperation *operation, NSError *error) {
                          NSLog(@"Hit error: %@", error);
                          block(nil);
                      }
     ];

} 
```

您对该方法的调用类似于：

```
[__restObj restLogin:user passwd:pass block:^(id obj) {
    // do something here to translate that object into a BOOL and check value    
}]; 
```

我不使用 RestKit，所以我无法验证这正是你需要的，但它应该能让你走上正确的道路。也就是说，如果您想查看 AFNetworking，我编写了一个 NetworkClient 包装器，我不介意分享。

# php - imagecopyresampled png 黑色 背景

> ID：15252418
> 
> 赞同：0
> 
> 时间：2013-03-06T16:12:44.003
> 
> 标签：php, image, background

从服务器加载图像时出现问题。PNG 格式的图像背景变为黑色。

抱歉英语不好提前谢谢。

```
 <?php

    //Database Settings
    include('../../../../../includes/bdconfig.ini.php');

    //Database Required Settings
    include('../../../../../includes/adminrequired.php');

    //If Not Logged In Redirect to Login Page
    if(!$session){header("Location: $siteurl/admin/login/");}

    //Listing Id
    $productid = "$_GET[productid]";

    //Select Listing Information From Database Table
    $q2 = "SELECT * from dlistings where did = '$productid'"; $r2 = mysql_query($q2); $a2 = mysql_fetch_array($r2);

    class SimpleImage {var $image; var $image_type;

    function load($filename) {$image_info = getimagesize($filename); $this->image_type = $image_info[2];
    if( $this->image_type == IMAGETYPE_JPEG ) {$this->image = imagecreatefromjpeg($filename);}
    elseif( $this->image_type == IMAGETYPE_GIF ) {$this->image = imagecreatefromgif($filename);}
    elseif( $this->image_type == IMAGETYPE_PNG ) {$this->image = imagecreatefrompng($filename);}}

    function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {if( $image_type == IMAGETYPE_JPEG ) {imagejpeg($this->image,$filename,$compression);}
    elseif( $image_type == IMAGETYPE_GIF ) {imagegif($this->image,$filename);}
    elseif( $image_type == IMAGETYPE_PNG ) {imagepng($this->image,$filename);}   
    if( $permissions != null) {chmod($filename,$permissions);}}

    function output($image_type=IMAGETYPE_JPEG) {if( $image_type == IMAGETYPE_JPEG ) {imagejpeg($this->image);}
    elseif( $image_type == IMAGETYPE_GIF ) {imagegif($this->image);}
    elseif( $image_type == IMAGETYPE_PNG ) {imagepng($this->image);}}

    function getWidth() {return imagesx($this->image);}
    function getHeight() {return imagesy($this->image);}

    function resizeToHeight($height) {$ratio = $height / $this->getHeight();
    $width = $this->getWidth() * $ratio;
    $this->resize($width,$height);}

    function resizeToWidth($width) {$ratio = $width / $this->getWidth();
    $height = $this->getheight() * $ratio;
    $this->resize($width,$height);}

    function scale($scale) {$width = $this->getWidth() * $scale/100;
    $height = $this->getheight() * $scale/100; 
    $this->resize($width,$height);}

    function resize($width,$height) {$new_image = imagecreatetruecolor($width, $height);
    imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
    $this->image = $new_image;}}

    $image = new SimpleImage();

    //Re-size and Create Thumbnail if Image 1 Exist
    if($a2[img1] && $_GET[which]==1){

    $img1name = "../../../../../imgs/1/$a2[img1]";
    $thumb1name = "../../../../../thumbs/imgs/$a2[img1]";

    $img1_dimensions = getimagesize($img1name);
    $awidth = $img1_dimensions[0];
    $aheight = $img1_dimensions[1];

    $arpercent = '100';
    if($awidth > 350){$arpercent = '95';}
    if($awidth > 500){$arpercent = '90';}
    if($awidth > 700){$arpercent = '50';}
    if($awidth > 900){$arpercent = '40';}
    if($awidth > 1100){$arpercent = '30';}
    if($awidth > 1400){$arpercent = '25';}
    if($awidth > 1600){$arpercent = '20';}
    if($awidth > 1800){$arpercent = '15';}

    $anewwidth = round((($arpercent/100)*$awidth));
    $anewheight = round((($arpercent/100)*$aheight));

    if($anewwidth > 450){$anewwidth = '400'; $anewheight = '400';}

    $image->load($img1name);
    $image->resize($anewwidth,$anewheight);
    $image->save($img1name);

    $image->load($img1name);
    $image->resize(150,150);
    $image->save($thumb1name);

    }

    //Re-size if Image 2 Exist
    if($a2[img2]  && $_GET[which]==2){

    $img2name = "../../../../../imgs/2/$a2[img2]";

    $img2_dimensions = getimagesize($img2name);
    $bwidth = $img2_dimensions[0];
    $bheight = $img2_dimensions[1];

    $brpercent = '100';
    if($bwidth > 350){$brpercent = '90';}
    if($bwidth > 500){$brpercent = '90';}
    if($bwidth > 700){$brpercent = '50';}
    if($bwidth > 900){$brpercent = '40';}
    if($bwidth > 1100){$brpercent = '30';}
    if($bwidth > 1400){$brpercent = '25';}
    if($bwidth > 1600){$brpercent = '20';}
    if($bwidth > 1800){$brpercent = '15';}

    $bnewwidth = round((($brpercent/100)*$bwidth));
    $bnewheight = round((($brpercent/100)*$bheight));

    if($bnewwidth > 450){$bnewwidth = '400'; $bnewheight = '400';}

    $image->load($img2name);
    $image->resize($bnewwidth,$bnewheight);
    $image->save($img2name);

    }

    //Re-size if Image 3 Exist
    if($a2[img3] && $_GET[which]==3){

    $img3name = "../../../../../imgs/3/$a2[img3]";

    $img3_dimensions = getimagesize($img3name);
    $cwidth = $img3_dimensions[0];
    $cheight = $img3_dimensions[1];

    $crpercent = '100';
    if($cwidth > 350){$crpercent = '90';}
    if($cwidth > 500){$crpercent = '90';}
    if($cwidth > 700){$crpercent = '50';}
    if($cwidth > 900){$crpercent = '40';}
    if($cwidth > 1100){$crpercent = '30';}
    if($cwidth > 1400){$crpercent = '25';}
    if($cwidth > 1600){$crpercent = '20';}
    if($cwidth > 1800){$crpercent = '15';}

    $cnewwidth = round((($crpercent/100)*$cwidth));
    $cnewheight = round((($crpercent/100)*$cheight));

    if($cnewwidth > 450){$cnewwidth = '400'; $cnewheight = '400';}

    $image->load($img3name);
    $image->resize($cnewwidth,$cnewheight);
    $image->save($img3name);

    }

    //Re-size if Image 4 Exist
    if($a2[img4] && $_GET[which]==4){

    $img4name = "../../../../../imgs/4/$a2[img4]";

    $img4_dimensions = getimagesize($img4name);
    $dwidth = $img4_dimensions[0];
    $dheight = $img4_dimensions[1];

    $drpercent = '100';
    if($dwidth > 350){$drpercent = '90';}
    if($dwidth > 500){$drpercent = '90';}
    if($dwidth > 700){$drpercent = '50';}
    if($dwidth > 900){$drpercent = '40';}
    if($dwidth > 1100){$drpercent = '30';}
    if($dwidth > 1400){$drpercent = '25';}
    if($dwidth > 1600){$drpercent = '20';}
    if($dwidth > 1800){$drpercent = '15';}

    $dnewwidth = round((($drpercent/100)*$dwidth));
    $dnewheight = round((($drpercent/100)*$dheight));

    if($dnewwidth > 450){$dnewwidth = '400'; $dnewheight = '400';}

    $image->load($img4name);
    $image->resize($dnewwidth,$dnewheight);
    $image->save($img4name);

    }

    header("Location: $siteurl/admin/manage/listings/edit/?did=$productid");

    ?> 
```

你能告诉我这里有什么问题吗？我应该做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:27:41.397

您正在将具有透明度的 PNG 文件转换为不支持透明度的 JPEG。

即使您的保存功能有 PNG 文件的选项，您也没有使用它。

```
$image->save($img1name); 
```

运行以下函数。

```
 function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {
   if( $image_type == IMAGETYPE_JPEG ) {
     imagejpeg($this->image,$filename,$compression);
   }
   elseif( $image_type == IMAGETYPE_GIF ) {
     imagegif($this->image,$filename);
   }
   elseif( $image_type == IMAGETYPE_PNG ) {
     imagepng($this->image,$filename);
   }   
  if( $permissions != null) {
    chmod($filename,$permissions);
  }
} 
```

但是你永远不会给出第二个参数。因此，它默认为 JPEG 文件。如果你会使用`$image->save($img1name, IMAGETYPE_PNG);`它很可能会工作。

如果你想要PNG中的所有图像，你可以改变你的保存功能如下：

```
function save($filename, $image_type=IMAGETYPE_PNG, $compression=75, $permissions=null) 
```

# javascript - 视差 - 我可以添加超过 4 层吗？

> ID：15252424
> 
> 赞同：0
> 
> 时间：2013-03-06T16:12:53.603
> 
> 标签：javascript, scroll, bandwidth, parallax, page-load-time

这是我的视差滚动代码。见[http://violetoeuvre.com/Exp_4.html](http://violetoeuvre.com/Exp_4.html)。

每当我添加超过 4 层时，页面都不会加载。这只是带宽问题吗？我知道我见过超过四层的网站......

我应该使用不同的代码吗？

```
<script type="text/javascript">
var wf_pbb_object = [
{bc:"rgba(0, 0, 0, 0)"},
{img:"images/Exp_4/bluediamond.png", mm:false, ms:true, mms:1, mss:30, mmd:1, mso:"v", msd:1, im:"image", pr:"both", mma:"both", ofs:{x:0, y:0}, zi:4, sr:false, sb:false, isr:false, isb:false},
{img:"images/Exp_4/bluestripe.png", mm:false, ms:true, mms:1, mss:40, mmd:1, mso:"v", msd:-1, im:"image", pr:"both", mma:"both", ofs:{x:0, y:0}, zi:1, sr:false, sb:false, isr:false, isb:false},
{img:"images/Exp_4/greenlock.png", mm:false, ms:true, mms:1, mss:50, mmd:1, mso:"v", msd:1, im:"image", pr:"both", mma:"both", ofs:{x:0, y:0}, zi:2, sr:false, sb:false, isr:false, isb:false},
{img:"images/Exp_4/silversq.png", mm:false, ms:true, mms:1, mss:60, mmd:1, mso:"v", msd:1, im:"image", pr:"both", mma:"both", ofs:{x:0, y:0}, zi:2, sr:false, sb:false, isr:false, isb:false}
];
</script> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:35:11.647

滚动的重绘需要 0.5 秒以上，现在要获得流畅的动画，您应该瞄准 60fps！

我怀疑问题的一部分可能是图像的大小，但我没有更深入地研究过。

如果您使用 Chrome 开发人员工具，请转到时间线，打开录制，滚动页面，您将看到绘制所用的时间长度。

# c# - 在 asp.net 中使用 itextsharp 生成 pdf 时会话过期

> ID：15252427
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:13:06.517
> 
> 标签：c#, itextsharp

我有一个 Web 应用程序，它生成 pdf 文档并在另一个选项卡上打开它们。这工作正常，但在成功生成一个或两个 pdf 文件后，在尝试生成另一个时，会话过期并被重定向到我的登录页面。请问可能是原因，有什么解决方案。该应用程序在我的本地主机上完美运行，但是在服务器上时，这些问题出现了..

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:35:37.897

这听起来不像是与pdf相关的问题。检查 web.config 中的会话过期设置。

```
<configuration>
 <system.web>
   <sessionState timeout="30" />
 </system.web>
</configuration> 
```

# angularjs - 如何使用大量脚本文件管理 AngularJS 工作流

> ID：15252429
> 
> 赞同：4
> 
> 时间：2013-03-06T16:13:10.697
> 
> 标签：angularjs, gruntjs

我研究了 gruntjs，但我不确定它是否是解决我的工作流程问题的正确工具。我正在处理一个巨大的 Angular 项目，其中已经包含 30 多个 js 文件。每次我添加一个新的 js 文件时，我都必须去索引文件并在其中添加引用。有没有办法用 grunt 或任何其他工具自动化这个过程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T18:04:40.993

绝对地！这里有两种方法：

**[约曼](http://yeoman.io)**

Yeoman 是一组基于 Grunt 和 Bower 构建的集成工作流管理脚本，支持自动脚手架和编译。它也有一个[AngularJS 生成器](https://github.com/yeoman/generator-angular)。

**[ng样板](http://bit.ly/ngBoilerplate)**

这是我的创作，所以我在这里肯定有偏见，但它有一个基于 Grunt 的构建系统和一个定义的目录结构，这使得管理非平凡的 AngularJS 应用程序变得超级容易。

# c# - 未选择 RadioButtons 时插入“null”

> ID：15252433
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:13:19.823
> 
> 标签：c#, asp.net

我的网站上有 CheckBoxes，选中后，它们会以下列方式存储到数据库中：

```
Cust.IsCust = Convert.ToInt16(cb_IsCust.Checked ? 0 : 1); 
```

现在，我将其更改为带有“是/否”选项的单选按钮，而不是复选框。如何在数据库中插入这些选项，1 表示是，0 表示否。如果没有检查，我需要插入 null （管理要求）。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:18:47.840

我认为这就是你想要做的。

如果您要立即插入数据库，请使用字符串：

```
string IsCust;
......
Cust.IsCust = (rb_IsCustYes.Checked || rb_IsCustNo.Checked)? rb_IsCustYes.Checked.ToString() : "NULL"; 
```

如果您稍后要插入数据库：

```
Cust.IsCust = (rb_IsCustYes.Checked || rb_IsCustNo.Checked)? Convert.ToInt16(rb_IsCustYes.Checked) : -1;

string IsCustValue = (IsCust == -1)? "NULL":IsCust.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:19:11.790

在您的数据库中，您应该将此字段设置为位以允许 NULL 值。但是要小心可能的警告。

[http://www.mssqltips.com/sqlservertip/2548/using-bit-columns-with-nulls-when-three-options-exist-in-sql-server/](http://www.mssqltips.com/sqlservertip/2548/using-bit-columns-with-nulls-when-three-options-exist-in-sql-server/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:30:48.223

简单的

```
Cust.IsCust = Convert.ToInt16(radiobutton1.Checked ? 1 : 0); 
```

1 用于检查的第一个 rdb 2 用于检查的第二个 rdb

不想要第二个单选按钮条件。因为当您选择第一个单选按钮时，第二个单选按钮未被选中。所以，你可以节省0

编辑：

```
string sss="NULL";

if(radiobutton1.Checked==true)
{
sss="1";
}
else if(radiobutton2.Checked==true)
{
sss="0";
} 
```

# php - 使用sql将图像从客户端发送到数据库

> ID：15252434
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:13:22.283
> 
> 标签：php, html, sql, image

我正在尝试显示存储在我的数据库中的图像。我知道将图像存储在数据库中并不是最佳做法，但仅出于此目的，我需要它。我的问题是当我去显示图像时，我得到的只是一堆乱码，我猜这是代码中的图像，但不是我想要的视觉效果。当我使用标题标签来识别图像时，我得到的只是一个缩略图，这意味着它没有正确读取它。任何帮助都会很棒。

下面是我正在使用的代码。我已经尝试过两种方式，使用它在 php 或 html 中显示，但无法显示图像：

```
while($row = mysql_fetch_array($result))
{
$Long = $row['Long'];
$Lat = $row['Lat'];
$img = $row['file'];
echo "<b><center>Database Output</b><br><br>";

echo "<td>" .$row['file']."</td>";
echo  "----";
echo "<td>" .$row['Lat']."</td></center>";
//echo "<td>" .$row['file']."</td>";
}
?>
    <div id="map">
<img src="<? $img?>" alt=""> 
```

感谢您的任何意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:16:02.413

您可以将图像作为数据 URI 嵌入到 html 页面中

```
<img src="data:image/jpeg;base64,<?php echo base64_encode($img) ?>" /> 
```

这对于“大”文件来说是非常可怕的——你让浏览器无法缓存图像，迫使用户每次加载页面时都下载 base64 编码的数据。

或者您有一个子脚本来提供实际图像，并且有类似的东西：

```
<img src="getimage.jpg?id=XXX"> 
```

和

```
<?php

$data = get_image_from_db($_GET['id']);
header('Content-type: image/jpeg');
echo $data; 
```

# windows - 如何将消息路由到控件的标准 WNDPROC

> ID：15252435
> 
> 赞同：4
> 
> 时间：2013-03-06T16:13:29.777
> 
> 标签：windows, winapi, mfc, message, wndproc

当一个标准的窗口控件（例如一个`"EDIT"`控件）被创建时，它`WNDPROC`被定义为窗口类的一部分（即`"EDIT"`有一个`WNDPROC`被设计用来使窗口显示和表现得像一个编辑控件的特性）。

MFC 允许您通过它们的包装类与此类控件进行交互，例如包装窗口控件`CEdit`的专用消息。`"EDIT"`

MFC 进一步允许您将`"EDIT"`窗口实例绑定到 CEdit 的 C++ 子类，例如 a `CMyEdit`，您可以在其中覆盖继承的 and 虚函数`CEdit`，`CWnd`并且您可以定义消息表以获取访问/覆盖发送到窗口实例本身的消息.

有[CWnd::Default()](http://msdn.microsoft.com/en-us/library/vstudio/ww9f7hst%28v=vs.110%29.aspx)，它使用当前消息参数调用 this->DefWndProc。这似乎是在查找`WNDPROC`与之关联的 HWND。那么这是正确的答案吗：调用 DefWndProc()（或同样的 Default()），它将把它交给`WNDPROC`windows 控件？

显然，这与其他消息表处理程序不同，后者可以返回 FALSE 以指示它们没有处理该消息，并且 MFC 会自动将消息沿类继承层次结构路由到该消息的下一个消息处理程序，或者，我假设，到 Default() 由本机处理`WNDPROC`？

**如果我定义了一个任意消息处理程序，比如 WM_SETTEXT，那么将此消息传递给的正确方法是`"EDIT"` `WNDPROC`什么？**

我也很想知道是否有办法将消息传递给超类（C++ 类层次结构）进行处理？许多 OnXXX 风格的处理程序确实有办法做到这一点，但是否有适用于 ON_MESSAGE 处理程序的机制？

```
class CDynamicMenuControlEdit : public CEdit  
{
    ...
    LRESULT OnSetText(WPARAM wParam, LPARAM lParam);
    ...
}

BEGIN_MESSAGE_MAP(CDynamicMenuControlEdit, CEdit)
    ...
    ON_MESSAGE(WM_SETTEXT, OnSetText)
    ...
END_MESSAGE_MAP()

LRESULT CDynamicMenuControlEdit::OnSetText(
    WPARAM wParam,          // not used; must be zero
    LPARAM lParam           // window-text string (LPCTSTR)
)
{
    if (m_bHasFocus)
    {
        // do normal thing 
        // !!! THIS IS MY QUESTION: IS THIS CALLING EDIT's WNDPROC, or ::DefWinProc()? !!!
        return DefWindowProc(WM_SETTEXT, wParam, lParam);
    }
    ...
} 
```

**澄清**

您可以在 C++ 级别拥有多个 MFC 子类 -

所以C继承B继承A，其中A是一个MFC类（例如`CEdit`）。

它们中的每一个都可以有一个 MFC 消息表 - 即`BEGIN_MESSAGE_MAP`......`END_MESSAGE_MAP`每个都可以有一个用于任何任意 Windows 消息的处理程序，例如`WM_MESSAGE(WM_SETTEXT, OnSetText)`- 并且该`OnSetText`成员不一定是虚拟的 - 只是一个静态成员（每个 MFC 子类都可以将该消息路由到任何任意方式）。

我的问题是 - 由于`WM_MESSAGE`调度条目没有返回值，我如何允许 MFC 在将 MFC 调度表从 C 传送到 B 到 A 之前将其返回给真正的 Windows 'EDIT' 类的 wndproc？

还是所有这些条目都打算在 MFC 设计级别不被遍历？即最子类化层的调度程序是唯一被调用的？如果它想利用继承的成员，它必须手动进行调用——MFC 根本没有任何特定的通用结构吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:23:19.967

调用`Default()`将导致响应消息发生的“正常”处理。我并不完全清楚你想要达到的目标，但在我看来，打电话`Default()`就是你想要做的。

如果您查看处理程序中 Windows 消息中的许多`CWnd`处理程序（以及派生自`CWnd`诸如的类的处理程序`CEdit`），您将看到它们调用`Default()`.

明智的说法是，这`Default()`实际上将使用原始消息所具有的任何参数-您无法更改它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:22:16.743

你做对了。CWnd::DefWindowProc() 使用您从中继承的 WINDOWPROC，并将调用 EDIT 窗口的窗口过程。

# module-pattern - 我可以使用带有 javascript 模块模式的类吗？

> ID：15252441
> 
> 赞同：2
> 
> 时间：2013-03-06T16:13:47.780
> 
> 标签：module-pattern, javascript

我有一堆“模块”，它们遵循[这篇热门文章中描述的“JavaScript 模块模式”](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)。据我了解，这些模块是将各种行为聚合到整洁的命名空间中的一种方式。

但是，如果我希望能够创建一个接受参数的唯一对象实例呢？就目前而言，我不能这样做，因为所有数据都是共享/静态的。我希望能够做到这一点：

```
var foo = new Some.Namespace.Whatever.Foo(config); 
```

我无法更改模式的结构，因为我们已经使用了一段时间，而且效果很好。我只想对其进行调整，以便可以将一些“类”放入其中，以处理非静态数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:27:05.730

为什么不试试这个？

```
var MODULE = (function () {
  var my = {};

  my.SomeClass = SomeClass;
  function SomeClass(six) {
    this.six = six;
  }
  SomeClass.prototype.five = 5;

  return my;
})(); 
```

当你调用`var obj = new MODULE.SomeClass(6)`它会给你一个新的对象。`obj.five`在所有实例之间共享，`SomeClass`因为它附加到原型。但是，`obj.six`特定于该实例，因为它附加到`obj`.

或者，您可能不需要将您的类放在模块中。您可以在适当的地方使用类来替换模​​块，因为在这种情况下模块和类都有一些重叠的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:35:19.977

这可能是对模块模式的过度使用，但这是你的意思吗？：

```
var Some = (function() {
    var util = { /* ... */ };
    return {
        Namespace: (function() {
            return {
                Whatever: (function() {
                    var Foo = function(config) {
                        this.foo = config.foo || "foo";
                        this.bar = config.bar || "bar";
                    };
                    var Bar = function() {};
                    Foo.prototype.toString = function() {
                        return this.foo + " "  + this.bar;
                    };
                    return {
                        Foo: Foo,
                        Bar: Bar
                    }
                }())
            };
        }())
    };
}());

var foo = new Some.Namespace.Whatever.Foo({foo: "hello", bar: "world"});
foo.toString() // "hello world" 
```

# php - 使用雄辩的一对多时如何在第二张桌子上'order_by'

> ID：15252444
> 
> 赞同：3
> 
> 时间：2013-03-06T16:14:05.287
> 
> 标签：php, laravel, eloquent

当然，我可以将 order_by 与第一个表中的列一起使用，但不能与第二个表中的列一起使用，因为结果是部分的。

如果我使用“加入”，一切都会完美，但我需要雄辩地实现这一目标。难道我做错了什么？

这是一个例子：

```
//with join
$data = DB::table('odt')
    ->join('hdt', 'odt.id', '=', 'hdt.odt_id')
    ->order_by('hdt.servicio')
    ->get(array('odt.odt as odt','hdt.servicio as servicio'));
foreach($data as $v){
    echo $v->odt.' - '.$v->servicio.'<br>'; 
}
echo '<br><br>';
//with eloquent
$data = Odt::get();
foreach($data as $odt){
    foreach($odt->hdt()->order_by('servicio')->get() as $hdt){
        echo $odt->odt.' - '.$hdt->servicio.'<br>';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:31:13.337

在您的模型中，您需要明确告诉关系按该字段排序。

因此，在您的 odt 模型中添加以下内容：

```
public function hdt() {
   return $this->has_many('hdt')->order_by('servicio', 'ASC');
} 
```

这将允许在使用此关系时对第二个表进行排序，并且在 Fluent 连接语句中不需要 order_by 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:59:12.757

我建议不要按照 codivist 的建议将 order by 包含在关系方法中。您所采用的方法在功能上与 codivist 建议相同。

这两种解决方案的区别在于，第一种是通过 hdt.servicio 订购 odt （所有结果）。在第二个中，您以自然顺序检索 odt，然后通过 servico 对每个 odt 包含的 hdt 进行排序。

第二种解决方案的效率也低得多，因为您要进行一次查询以提取所有 odt，然后对每个 odt 进行附加查询以提取其 hdts。检查分析器。考虑到您的初始查询并且您只检索一列，这样的事情会起作用吗？

```
HDT::where( 'odt_id', '>', 0 )->order_by( 'servico' )->get('servico'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:30:07.663

现在我发现这很简单！我必须对第二个表进行查询并使用函数 odt() 获取第一个表的内容，以建立关系“belongs_to”

```
//solution
$data = Hdt::order_by('servicio')->get();
foreach($data as $hdt){
    echo $hdt->odt->odt.' - '.$hdt->servicio.'<br>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T05:03:24.267

**简单的答案是：**

```
$data = Odt::join('hdt', 'odt.id', '=', 'hdt.odt_id')
    ->order_by('hdt.servicio')
    ->get(array('odt.odt as odt','hdt.servicio as servicio')); 
```

任何你可以用 Fluent 做的事情，你也可以用 Eloquent 做。如果您的目标是`hdts`使用他们的`odts`tho 进行检索，我建议使用反向查询以提高可读性：

```
$data = Hdt::join('odt', 'odt.id', '=', 'hdt.odt_id')
    ->order_by('hdt.servicio')
    ->get(array('hdt.servicio as servicio', 'odt.odt as odt')); 
```

这两者的作用完全相同。

**解释为什么这样做：**

每当您调用静态方法`Posts::where(...)`时，Eloquent 都会为您返回一个 Fluent 查询，与`DB::table('posts')->where(...)`. 这使您可以灵活地构建您喜欢的任何查询。这是一个例子：

```
// Retrieves last 10 posts by Johnny within Laravel category
$posts = Posts::join('authors', 'authors.id', '=', 'posts.author_id')
    ->join('categories', 'categories.id', '=', 'posts.category_id')
    ->where('authors.username', '=', 'johnny')
    ->where('categories.name', '=', 'laravel')
    ->order_by('posts.created_at', 'DESC')
    ->take(10)
    ->get('posts.*'); 
```

# android - 无法在 Android Chrome 中下载 cilent 生成的文件

> ID：15252449
> 
> 赞同：1
> 
> 时间：2013-03-06T16:14:21.960
> 
> 标签：android, google-chrome, coffeescript, client-side

好的，这背后有很长的历史，但要点是我们需要创建并下载一点点文本客户端，到一个名为“test.lbl”的文件中。假设我们无法访问服务器端。

以下代码 (coffeescript) 通过创建 Blob、将其转换为数据 url，然后单击链接来完成此操作。这在桌面 Chrome 浏览器中效果很好。但是，在 Android Chrome 中（不确定究竟是什么版本，但我刚刚在 2013 年 3 月 5 日从 Google App Store 安装了它）这根本行不通。在 Android Chrome 中，文件开始下载，然后开始旋转。（事实上​​，它会在您的“正在进行”中显示很长一段时间，即使在浏览器关闭之后也是如此。）

任何人都知道为什么这可能不适用于Android？也许不同的 mime 类型会允许下载文件？我们正在处理内部平板电脑，因此我们可以放宽我们需要的任何特定于站点的安全设置。

或者，有没有更好的方法来完全解决这个问题？（客户端生成的文本文件下载）

谢谢

```
$("#get-label").on 'click', (e) ->
  e.preventDefault()
  bb = new Blob(['test test test'], {type:'text/plain'})
  evt = document.createEvent("HTMLEvents")
  evt.initEvent("click")
  $("<a>", {download: 'test.lbl', href: webkitURL.createObjectURL(bb)}).get(0).dispatchEvent(evt) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:11:29.373

这是 Android 版 Chrome 中的一个已知问题。我提出了一个问题[https://code.google.com/p/chromium/issues/detail?id=181032](https://code.google.com/p/chromium/issues/detail?id=181032) - 如果您加注星标，您将能够看到它的所有更新。

# java - RDF 文件到 java 对象：DMOZ 基础

> ID：15252451
> 
> 赞同：1
> 
> 时间：2013-03-06T16:14:31.343
> 
> 标签：java, lucene, rdf

我正在使用 DMOZ 作为文档库，我正在尝试对其进行索引以便使用 Lucene 执行查询。我猜我需要把这个 RDF 文件转换成 java 对象。这是正确的方法吗？如果是，我怎样才能将此文件转换为对象？

这是 RDF 文件的示例：

```
<RDF>
<Topic>
    <catid>121212</catid>
    <link r:resource="http://page1.com"></link>
    <link r:resource="http://page2.com"></link>
    <link r:resource="http://page3.com"></link>
    <link r:resource="http://page4.com"></link>
</Topic>
<ExternelPage about="http://page1.com">
    <d:Title>the Title1</d:Title>
    <d:Description>description1</d:description>
    <ages>ages1</ages>
    <topic>topic1</topic>
</ExternelPage>
<ExternelPage about="http://page2.com">
    <d:Title>the Title2</d:Title>
    <d:Description>description2</d:description>
    <ages>ages2</ages>
    <topic>topic2</topic>
</ExternelPage>
<ExternelPage about="http://page3.com">
    <d:Title>the Title3</d:Title>
    <d:Description>description3</d:description>
    <ages>ages3</ages>
    <topic>topic3</topic>
</ExternelPage>
<ExternelPage about="http://page4.com">
    <d:Title>the Title4</d:Title>
    <d:Description>description4</d:description>
    <ages>ages4</ages>
    <topic>topic4</topic>
</ExternelPage>

<Topic>
    <catid>
    .
    .
    .
    .
</Topic>
<ExternelPage about="aLink">
    .
    .
    .

etc...
</RDF> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:41:17.560

把它变成 java 类几乎肯定不是正确的事情。RDF 类和 java 类用于不同的事物。将 RDF 类想象成模式中的数据库表。

# c# - w3wp.exe 中未处理的 microsoft .net 框架异常

> ID：15252455
> 
> 赞同：4
> 
> 时间：2013-03-06T16:14:44.173
> 
> 标签：c#, .net, workflowservice

我正在编写一个使用工作流服务的控制台应用程序。我尝试将 Visual Studio 附加到 IIS 进程以在两个 Visual Studio 控制台中调试我的应用程序，但它没有工作，之后当我尝试对我的服务执行某些操作时（更新服务，构建服务，打开服务）浏览器等）即时调试器弹出：w3wp.exe中发生未处理的Microsoft .net框架异常[此处每次不同的数字]

PS我在IIS中有一个正在运行的服务，在更改设置之前我没有任何问题，但现在即使在重新启动后我仍然有这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-26T20:41:24.720

在 IIS 中重新启动站点并重新启动应用程序池对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T05:32:24.857

请按照以下文章了解更多信息。我通过以管理员身份运行 Visual Studio 解决了这个问题。

[http://anishantha87.blogspot.com/2014/09/an-unhandled-microsoft-net-framework.html](http://anishantha87.blogspot.com/2014/09/an-unhandled-microsoft-net-framework.html)

希望这会有所帮助！

# iphone - 将 Max IndexPath 设置为高于 10？

> ID：15252459
> 
> 赞同：1
> 
> 时间：2013-03-06T16:14:55.090
> 
> 标签：iphone, ios, uitableview

在我的最新应用程序中创建清单时遇到了问题。

当我调用时`didSelectRowAtIndexPath`，它会更改`imageView`CustomCell 中的一个。因此，当我单击表格中的一行时，它会将 CustomCell 图像切换为复选标记。它工作正常，但是，当我向下滚动时，我注意到它还在我的清单中设置了一些其他行。我发现如果我触摸第 1 行……它会更新 1、11、21、31、41 等。

如何让它只更改第 1 行的图像？IndexPath 是否以某种方式最大为 10？

谢谢！！

didSelectRowAtIndexPath 代码：

```
{
    CustomCell *cell = (CustomCell *) [resultsTable cellForRowAtIndexPath:indexPath];
    cell.puckSelect.image = [UIImage imageNamed:@"puck_c.png"];
    [cell setNeedsDisplay]
} 
```

我的清单有数千个项目，这会影响这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:21:02.933

这是因为您在滚动列表时会重复使用您的单元格。不要将状态存储在单元格中（即选择了哪个单元格）！始终从数据结构（NSArray 等）中读取单元格的状态。

我倾向于这样做：

*   在 didSelectRowAtIndexPath 中，更改数据结构（例如，将第 23 行的“isSelected”设置为“是”）
*   然后使用 reloadRowsAtIndexPaths 强制表重新加载这一行
*   在 cellForRowAtIndexPath 中，从数据结构中读取以确定该行是否有刻度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:20:40.903

您正在看到细胞重用在工作中。当你想改变状态时，你不能只更新单元格本身，因为 iOS 会在单元格离开屏幕时回收它并在另一行中重用它。您必须以某种方式记录检查了哪些行，并且当准备好在 中显示单元格时`-tableView:cellForRowAtIndexPath`，适当地设置 的值`puckSelect.image`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:25:32.157

您可以在 didSelectRowAtIndexPath 中更改数据源，或者设置您在 cellForRowAtIndexPath 中检查的属性的值。像这样的东西：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    cell.textLabel.text = [self.theData objectAtIndex:indexPath.row];
    if (indexPath.row == self.checkedIndexPath.row) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }else{
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    self.checkedIndexPath = indexPath;
    [tableView reloadData];
} 
```

# image - 版本控制 git 存储库中的图像精灵

> ID：15252461
> 
> 赞同：3
> 
> 时间：2013-03-06T16:14:59.577
> 
> 标签：image, git, versioning, sprite

想象一下这个场景：

我们有一个庞大的存储库，具有许多不同的功能分支。每个特征分支都使用一个大的精灵图像。这个大精灵图像在每个特征分支中可能略有不同。功能分支可能会合并到不同的发布候选分支中，然后在不同的时间点合并回主分支。

Git 无法对该图像进行版本控制（例如，合并对图像的更改），因此我们正在努力寻找一种方法来管理它。

一种方法是始终保留精灵图像的“主”PSD。每当需要向精灵添加新图像时，开发人员将首先更新 PSD 主文档，然后导出新的精灵图像。这将确保精灵图像将始终包含所有更改。但是很明显，这个精灵图像将包含我们可能不希望在不同分支中发生的变化（例如，对精灵中的图像的更改）。

本质上，我们需要能够对这个 sprite 图像进行版本控制。Git 不是帮助我们解决这个问题的工具，但我们需要使用代码对图像进行版本控制。

通常如何管理 git 存储库中的图像版本控制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:18:03.593

不要签入已编译的精灵图像；相反，检查单个图像并以编程方式构建精灵。 [Sprite Factory](https://github.com/jakesgordon/sprite-factory)是我过去成功使用的一种工具，用于从单个图像构建精灵表。它说它是为 CSS 使用而设计的，但它也可以很容易地为 web 之外的用途提供精灵偏移和尺寸。

# html - li: 之前没有在 IE8 中显示

> ID：15252462
> 
> 赞同：2
> 
> 时间：2013-03-06T16:15:00.060
> 
> 标签：html, css, html-lists, pseudo-element

我的新网站上的列表菜单有问题。

我正在使用 li:before 来显示 | 在菜单中的所有项目之前。使用以下 CSS：

```
#menu li:first-child:before {
    content:"";
    }

#menu li:before {
content: " | ";
} 
```

出于某种奇怪的原因，这在我之前做过的网站上运行良好：[http](http://www.oneillsbedandbreakfast.com) ://www.oneillsbedandbreakfast.com ，但它不适用于我目前正在开发的网站：[http://www。 scoridcottage.com/newdesign](http://www.scoridcottage.com/newdesign)

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:18:08.827

要`:before`在 Internet Explorer 8 中工作，`<!DOCTYPE>`必须设置 a。在您的网站中，注释出现在文档类型之前。这会导致某些浏览器出现奇怪的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:18:45.243

根据[W3Schools](http://www.w3schools.com/cssref/sel_before.asp)，`<!DOCTYPE>`必须声明a 才能`:before`在 IE8 中工作。其他伪元素（如`:first-child`）也是如此。

在`<!DOCTYPE>`：[http ://www.w3schools.com/tags/tag_doctype.asp](http://www.w3schools.com/tags/tag_doctype.asp)

希望有帮助！

# xml - 使用 XPath 从 XML 中不相关的标签中提取第一个非空值

> ID：15252465
> 
> 赞同：3
> 
> 时间：2013-03-06T16:15:08.483
> 
> 标签：xml, xpath

假设我有这个 XML

```
`<root> 
<numbers>
 <first>
    <elementone></elementone>
    <elementtwo></elementtwo>
 </first>
</numbers>  
<first>
    <elementone>100</elementone>
    <elementtwo>200</elementtwo>
</first>
</root>` 
```

我想从中提取第一次出现的非空值。在这种情况下，我希望看到 100 作为结果。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:20:13.187

Try: `//root//node()[string-length(normalize-space(text()))>0][1]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T17:06:34.627

/*/*/*/*[归一化空间()][1]

这将检查 XML 文档结构的第四个分支下的节点是否有非空内容并返回第一次出现

# jquery - jquery-ui 自动完成更改事件 ui.item 始终为空

> ID：15252467
> 
> 赞同：1
> 
> 时间：2013-03-06T16:15:12.133
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在使用 jquery 1.9.1 和 jquery-ui 1.10.1。

我有一个来自 PHP 代码的 json 数据源，它从 MySQL 数据库中提取数据。数据使用 json_encode 编码并以以下格式输出：

```
[{"label":"label1","value":"value1"},{"label":"label2","value":"value2"},...] 
```

当我从自动完成菜单中选择一个项目时，*选择*事件工作正常，并且*ui.item*参数包含正确的信息，但是在*更改 (autocompletechange)*事件中，*ui.item*参数始终为*null*。

```
 $( "#autocomplete" ).autocomplete({ source: 'custSearch.php',
                                      select: function(event, ui) {
                                            console.log(ui);
                                            $( "#customer" ).text(ui.item.label);
                                            $("#validpic").remove();
                                            $("#validpic_div").append("<img id='validpic' src='/images/icons/001_06.png'>");
                                            $( "#go" ).focus();
                                          },
                                       change: function(event, ui) {
                                            console.log(ui);
                                          }
                               }); 
```

同样，在上面的代码中，*select* *ui.item* 包含来自 json 数据源的标签和值对。但是，*更改* *ui.item*始终为 null，即使已进行选择。

从 jquery-ui 自动完成 api 文档中，*ui.item*应该是：

> 从菜单中选择的项目（如果有）。否则该属性为空。

有什么建议么？

# java - 用Java计算AUC

> ID：15252468
> 
> 赞同：1
> 
> 时间：2013-03-06T16:15:12.353
> 
> 标签：java, roc, auc

给定一组 Precision-Recall 对，是否有一个简单的库来计算 JAVA 中 ROC 曲线下的面积（AUC），例如：

1.0 0.0

0.9 0.1

0.8 0.1

...

它可以输入两个双精度数组。

我也可以自己编写，但如果存在已经整合的库，那就更好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:39:03.457

我找到了两个潜在的库，因为我没有使用过，所以我在第一个上找到了表明它已被使用和认可的信息。

[http://mark.goadrich.com/programs/AUC/](http://mark.goadrich.com/programs/AUC/)这个似乎在[这里得到了认可。](http://metaoptimize.com/qa/questions/267/code-for-auc-area-under-the-receiver-operating-characteristic-curve)

[http://weka.wikispaces.com/Area+under+the+curve](http://weka.wikispaces.com/Area+under+the+curve)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-05-03T09:23:44.473

AUC = (召回 + 特异性) / 2

即您需要计算“特异性”：特异性 = tn / (fp + tn)

换句话说，您至少需要知道 tn、fp 和召回 (= tp / (tp + fn))。

# android - Android 中的服务未在广播接收器中启动

> ID：15252474
> 
> 赞同：0
> 
> 时间：2013-03-06T16:15:40.297
> 
> 标签：android, sqlite, broadcastreceiver

我正在尝试制作一个必须执行一些数据库活动的 android 应用程序，例如在 SQLite DB 中存储电话号码和姓名等。所有数据库的东西都是作为服务完成的。服务必须在呼叫到来时立即启动，并且当呼叫结束时，存储的详细信息必须在呼叫结束后立即显示给用户。为此，我正在使用广播接收器。我还提供了我在我的应用程序中使用的以下代码。

我的服务.java

```
public class MyServices extends Service {
TelephonyManager Tel;
MyPhoneStateListener MyListener;
RB_SIGNAL_STRENGTH signalobj = new RB_SIGNAL_STRENGTH();
RB_DatabaseHandler db = new RB_DatabaseHandler(getApplicationContext());

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    isMyServiceRunning();
    MyListener = new MyPhoneStateListener();
    Tel = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    Tel.listen(MyListener, PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);
    super.onCreate();
    Log.i("Serv","Service Started");

    return super.onStartCommand(intent, flags, startId);
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    db.close_DB();
    Log.i("Serv","Service Stopped");
    super.onDestroy();
} 
```

MyReceiver.java

```
 public class MyPhoneReceiver extends BroadcastReceiver {
String state=null;

@Override
public void onReceive(Context context, Intent intent) {
    Bundle extras = intent.getExtras();

    if (state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_OFFHOOK)) 
    {
        try{

        Intent i = new Intent(context,MyServices.class);

        Log.i("Recv", "In Try");
        context.startService(i);
        }
        catch(Exception e)
        {
            Log.d("Recv", "Service not starting");
        }
    }//End if offhook
    if(state.equals(TelephonyManager.EXTRA_STATE_IDLE))
    {
        Log.i("Recv","CALL ENDED");
        try
        {
            Intent i = new Intent(context,EndActivity.class);
            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);            
            context.startActivity(i);
        }
        catch(Exception e){
            Log.d("Recv", "Activity not starting");
        }
    }
    } 
```

}

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.testapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="9" />

<uses-permission android:name="android.permission.READ_PHONE_STATE" >
</uses-permission>
<uses-permission android:name="android.permission.SIGNAL_PERSISTENT_PROCESSES" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity android:name="StartActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="EndActivity" >
    </activity>
            <receiver android:name=".MyReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" >
            </action>
        </intent-filter>
    </receiver>
    <service 
        android:name="MyServices" 
        ></service>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:22:38.283

您的班级名称是`MyPhoneReceiver`，但在您正在使用的清单中`MyReceiver`，这两个名称必须完全匹配。

* * *

**另外**
我刚刚注意到您正在尝试在服务具有有效上下文之前实例化您的数据库。这可能会在 MyServices 中引发异常：

```
RB_DatabaseHandler db = new RB_DatabaseHandler(getApplicationContext()); 
```

您可以声明`db`为字段变量，但将其保留为空：

```
RB_DatabaseHandler db; 
```

在`onStartCommand()`初始化它的方法中：

```
db = new RB_DatabaseHandler(getApplicationContext()); 
```

**最后，**调用诸如`onCreate()`乱序之类的基本方法通常会产生问题，不建议这样做`onStartCommand()`：

 ~~~~```
super.onCreate(); 
```~~  ~~* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:24:31.357

因为`state`变量是`null`

```
public class MyPhoneReceiver extends BroadcastReceiver {
String state=null;

@Override
public void onReceive(Context context, Intent intent) {
    Bundle extras = intent.getExtras();
    state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
    //your code here... 
```~~~~

# jquery - ckeditor错误textarea在chrome上不可编辑

> ID：15252480
> 
> 赞同：2
> 
> 时间：2013-03-06T16:15:58.490
> 
> 标签：jquery, google-chrome, ckeditor, jquery-ui-dialog

我在 jquery 对话框中使用 ckeditor。它适用于 mozilla 和 IE，但在 chrome 上不可编辑。

我删除了实例，但仍然在 chrome 上出现类型错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T10:41:45.017

我遇到的 ckeditor 没有在 Chrome 中显示的唯一问题是 ckeditor 的语言设置与 Chrome 中的语言设置不匹配。因此，当我在英国时，在 ckeditor 的“lang”文件夹中，我有文件“en-gb.js”，Chrome 中的语言设置为英语（英国）。

# git - Elastic Beanstalk 的自动切换推送环境

> ID：15252486
> 
> 赞同：1
> 
> 时间：2013-03-06T16:16:08.537
> 
> 标签：git, amazon-web-services, push, amazon-elastic-beanstalk

好的，这是交易。我使用弹性豆茎并有两个环境。他们每个人都有自己的名字和网址，比如说 env-one = foo.elasticbeanstalk.com 和 env-two = bar.elasticbeanstalk.com。

然后我们有生产域：example.com。

example.com 有一个指向 foo.elasticbeanstalk.com 的 cname

默认推送环境是 env-two。

我推送到默认环境并检查一切是否正常，就像正常的开发环境一样。当每个人都高兴时，我切换 url，以便开发环境变成生产环境，反之亦然。

所以现在，env-two = foo.elasticbeanstalk.com 和 env-one = bar.elasticbeanstalk.com

问题是，默认的推送环境还是 env-2，但是现在变成了生产环境。所以下次我需要推送到 dev 时，我必须定义我想要推送到 env-one。

```
git aws.push --environment env-one 
```

所以，我正在寻找的是一种不必定义我想要推送到什么环境的方法。

提前感谢您的回答。我希望有一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:15:54.767

一些想法：

1）这有点超出了您询问的范围（而且我不是 AWS 专家），但是如果这是一个公共站点，则考虑到 DNS 传播延迟，DNS 切换可能会给您留下一个冲突窗口。

2）您可以定义第二个 DNS 别名“dev.elasticbeanstalk.com”并同时交换它，然后总是推送到那个。

3) 如果你只是从一个本地仓库推送，你可以做一些“git remote set-url”魔术来切换 URL，这样你就可以推送到正确的仓库。但是，这对我来说似乎很容易出错。

如果我要继续使用 DNS，我会使用选项 #，然后设置一个监控系统，如果“开发”将触发该系统。和“example.com”指向同一个 A 记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T18:25:30.633

[当您使用此指令](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_PHP_eb.sdlc.html)创建要在 AWS EB 上部署的 git 存储库时（我选择了 PHP 一种，其他语言的工作流程相同）并运行*eb init*命令，它会创建包含环境描述的特殊*.elasticbeanstalk文件夹。*

当您运行*eb start*命令时，将使用该描述创建环境。

每次调用*git aws.push*命令时 - 都会生成新的远程 git URL。它取决于应用程序名称、环境名称、提交 ID、本地时间和 AWS 凭证。*在git aws.push*命令中仅使用生成的 URL - git 存储库远程 URL 被忽略。由于 URL 取决于当前时间，因此它总是不同的。

要默认部署在另一个环境中，您只需更改*.elasticbeanstalk\config文件中的**EnvironmentName*选项（如果您的环境在同一个应用程序中并且具有相似的设置）。

 *如果您的环境在另一个应用程序中或一个设置不同，我认为您应该删除*.elasticbeanstalk*文件夹并再次运行*eb init*命令，根据您已经存在的环境参数传递答案。之后，您可以传递*eb init*命令（因为环境已经存在）并继续使用*git aws.push*。*

# sql - .SQL 脚本，包括我的本地机器的路径？

> ID：15252488
> 
> 赞同：0
> 
> 时间：2013-03-06T16:16:12.987
> 
> 标签：sql, sql-server-2008-r2

我的笔记本电脑上有一个数据库（在 SQL Server 2008 r2 中），我需要生成一个 .SQL 脚本，以便我可以将它上传到我的 ISP 上的数据库（通过他们的网站控制面板）。

我快速浏览了生成的脚本，其中有一些代码指向我的本地驱动器。

这个对吗？如果我要将这个脚本放在我的 ISP 上并运行它，我确信不应该引用我的本地驱动器。

例子：

```
USE [master]
GO
/****** Object:  Database [Chinatowndb]    Script Date: 03/06/2013 15:27:54 ******/
CREATE DATABASE [Chinatowndb] ON  PRIMARY 
( NAME = N'chinatowndb', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\chinatowndb.mdf' , SIZE = 3072KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'chinatowndb_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\chinatowndb_log.ldf' , SIZE = 1024KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
GO
ALTER DATABASE [Chinatowndb] SET COMPATIBILITY_LEVEL = 100
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [Chinatowndb].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [Chinatowndb] SET ANSI_NULL_DEFAULT OFF
GO
ALTER DATABASE [Chinatowndb] SET ANSI_NULLS OFF
...
...
... 
```

我是一个新手，所以任何知道这方面的 SQL 专家的建议都会受到极大的欢迎。谢谢茶，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:17:55.777

FILENAME 是一个可选参数，如果你没有设置 sql 在默认路径上创建文件，这里定义[http://msdn.microsoft.com/en-us/library/ms176061.aspx](http://msdn.microsoft.com/en-us/library/ms176061.aspx)

# css - 连续 7 个元素

> ID：15252495
> 
> 赞同：1
> 
> 时间：2013-03-06T16:16:27.937
> 
> 标签：css, twitter-bootstrap

我已经用引导程序完成了一些页面，但无法想象将 7 个等宽元素放置在 12 个跨度的行中的正确方法。并保持媒体查询正常工作。

```
<div class="row">
    <div>...</div>
    <div>...</div>
    <div>...</div>
    <div>...</div>
    <div>...</div>
    <div>...</div>
    <div>...</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:50:18.180

真的没有什么能阻止你添加自己的 span7 CSS 类集。您可能希望在引导文件之外定义它们，以防将来升级到新版本。

如果您使用的是固定 0 宽度设计，请将这个新类的宽度设置为 137 像素。如果您使用的是流体设计，请将宽度设置为 14.28571428%

# java - Java中的异常和错误代码

> ID：15252502
> 
> 赞同：2
> 
> 时间：2013-03-06T16:16:39.180
> 
> 标签：java

我有一个关于 java 中的错误处理的查询。假设一个库有几个错误代码。对于各种错误，有一个例外并在其中包含一个错误代码枚举是一种好习惯吗？

更新：在异常中包含错误代码是一种好习惯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:20:31.960

*错误*和*错误代码*是两个不同的东西。一个定义发生了什么，另一个确定错误的特定来源。

最好的例子是与数据库相关的异常，其中 SQL 异常包括定义导致它的错误提示的代码。

通过枚举或字段使该代码可访问是一项设计决策。如果你有一个异常要抛出并且你添加一个错误代码，它可以被认为是一个两步异常处理：

1.  捕获确定错误上下文的异常
    *   安全
    *   数据库
    *   加工
    *   解析
    *   无效操作
2.  检查异常代码以确定来源
    *   用户没有足够的权限来做他试图做的事情
    *   数据库连接错误a
    *   查询相关问题
    *   系统当前过载
    *   未找到某个操作的管理员

一旦确定了源（代码）并且知道了它的上下文（异常），您就可以采取相应的行动。恕我直言，层次结构是一种很好的方法，可以在需要时使用代码进行扩展。请记住，如果您为了表示源而将异常子类化 10 次，则会对可维护性和复杂性产生影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:18:36.463

并不真地。您应该使用不同的异常类型，一种用于每种错误类型（在合理的范围内，不要创建数百种不同的异常类型！）。

它允许您仅捕获您真正想要捕获的那些，而不是处理每个异常以发现发生了什么。

但是，请随意自定义异常消息，以阐明同一类型的多个异常中的错误来源。

这个[简单的解释](http://www.artima.com/interfacedesign/ExceptionType.html)很清楚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T16:20:23.720

当前的实践是至少有一个基类 (IOException) 和子类，如 FileNotFoundException、UnsupportedEncodingException。在使用方面，可以使用 IOException 捕获所有内容。

这允许只处理 FileNotFound。

另一方面，如果有许多代码，例如 HTTP 响应代码，那么您只使用一个异常的方法是非常合理的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T16:20:56.790

如果错误代码太多，并且您不希望用户捕获并恢复，则可以使用一种嵌入整数错误代码的异常类型。如果在编译时无法确定错误代码集，那么您实际上别无选择。

# php - 在 PHP 中使用 mkdir() 获取动态创建的文件夹名称

> ID：15252504
> 
> 赞同：0
> 
> 时间：2013-03-06T16:16:46.587
> 
> 标签：php, mkdir

我正在为我的php文件中的每个用户动态创建文件夹

```
mkdir("Userfiles/".$company."_".$time_stamp); 
```

我想将该目录保存在变量或任何其他变量中，并且必须使用目录名称将我的 .txt 文件保存在其中

```
$myFile = "exfiles/".str_replace(" ","-",$_POST['company'])."_CC Booth furnishings ".$order_type."_".$time_stamp.".txt"; 
```

在“exfiles”的位置，我需要给出动态创建的目录名称。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:19:04.973

```
$dirname = "Userfiles/".$company."_".$time_stamp;
mkdir($dirname);
$myFile = $dirname . str_replace(" ","-",$_POST['company'])."_CC Booth furnishings ".$order_type."_".$time_stamp.".txt"; 
```

如您问题的评论中所述：

**不要直接使用 $_POST 数据来操作服务器上的文件。始终对其进行消毒**

# .net - 垃圾收集 ETW 事件。我在哪里可以找到“事件数据”

> ID：15252506
> 
> 赞同：1
> 
> 时间：2013-03-06T16:16:50.793
> 
> 标签：.net, garbage-collection, etw, xperf

在下面的 msdn 链接中，列出了“事件数据”，如计数、深度、原因 .. [http://msdn.microsoft.com/en-us/library/ff356162%28v=vs.100%29.aspx#gcstart_v1_event](http://msdn.microsoft.com/en-us/library/ff356162%28v=vs.100%29.aspx#gcstart_v1_event)

根据这个链接，我创建了一个 .etl 文件。 [http://msdn.microsoft.com/en-us/library/dd264809.aspx](http://msdn.microsoft.com/en-us/library/dd264809.aspx)

使用 xprefview.exe 我观察了 etl 文件，甚至发现了所需的事件 'GCStart_V1'，查看了视图 'summary table' 中的列操作码。

问题：我在哪里可以找到第一个链接中列出的“事件数据”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:20:38.530

请改用[PerfView](http://www.microsoft.com/en-us/download/details.aspx?id=28567)，因为它针对 .net 进行了优化。以下是一些如何使用它的视频： http: [//channel9.msdn.com/Series/PerfView-Tutorial](http://channel9.msdn.com/Series/PerfView-Tutorial)

# html - Internet Explorer 中的导航菜单和功能区损坏

> ID：15252516
> 
> 赞同：3
> 
> 时间：2013-03-06T16:17:20.243
> 
> 标签：html, css, internet-explorer

我目前在 Internet Explorer 中遇到两个问题。第一个是我的导航菜单：链接堆叠在一起，而不是穿过栏。这是我的导航菜单代码。

**HTML**

```
<div class="main-navigation" role="navigation" style="margin-top: 5px;">
<div class="nav-menu"><ul><li class="page_item page-item-8"><a href="http://tshirthideout.com/design-your-own/">design your own</a></li><li class="page_item page-item-10"><a href="http://tshirthideout.com/fan-photos/">fan photos</a></li><li class="page_item page-item-12"><a href="https://tshirthideout.com/win-a-free-t-shirt/">Win a free T-shirt</a></li></ul></div>
</div><!-- #site-navigation --> 
```

**CSS**

```
.main-navigation li {
    margin: 0px 20px 0px 0px;
    position: relative;
    text-align: center;
    padding: 7px 0px;
}

    .main-navigation li ul {
        display: none;
        margin: 0;
        padding: 0;
        position: absolute;
        top: 100%;
        z-index: 1;
    }
    .main-navigation li ul ul {
        top: 0;
        left: 100%;
    }
    .main-navigation ul li:hover > ul {
        border-left: 0;
        display: block;
    }
    .main-navigation li ul li a {
        background: #efefef;
        border-bottom: 1px solid #ededed;
        display: block;
        font-size: 11px;
        font-size: 0.785714286rem;
        line-height: 2.181818182;
        padding: 8px 10px;
        padding: 0.571428571rem 0.714285714rem;
        width: 180px;
        width: 12.85714286rem;
        white-space: normal;
    }
    .main-navigation li ul li a:hover {
        background: #e3e3e3;
        color: #444;
    }
    .main-navigation .current-menu-item > a,
    .main-navigation .current-menu-ancestor > a,
    .main-navigation .current_page_item > a,
    .main-navigation .current_page_ancestor > a {
        color: #cb0000;
        font-weight: bold;
    } 
```

第二个问题是我的两条丝带用于侧栏中的标题。赋予它环绕外观的右下翻盖没有出现。

**HTML**

```
<div class="ribbon"><strong>SPECIAL OFFERS</strong></div> 
```

**CSS**

```
.ribbon {
padding-bottom: 7px;
padding-top: 8px;
    padding-left: 3px;
    color: #fff;
        text-shadow: 1px 1px 0px #c1c1c1;
        font-size: 15px;font-family:'Century Gothic',futura,'URW Gothic L',Verdana,sans-serif;
        letter-spacing: 5px;
position:relative;
    width:267px;

    right:0px;
    top:19px;
    background-color:#212121;
-moz-border-radius:2px 0px 0px 2px;  /*radius of 2px*/
-khtml-border-radius:2px 0px 0px 2px;
-webkit-border-radius:2px 0px 0px 2px;
-webkit-box-shadow: -2px 2px 4px rgba(50, 50, 50, 0.35);
-moz-box-shadow:    -2px 2px 4px rgba(50, 50, 50, 0.35);
box-shadow:         -2px 2px 4px rgba(50, 50, 50, 0.35);
}
.ribbon:after {
    content:'';
    width:0;
    height:0;

    border-color: #000 transparent transparent #000;
    border-style:solid;
    border-width:5px 5px;

    position:absolute;
    right:0;
    bottom:-10px;
} 
```

此代码适用于其他主要浏览器，但不适用于 IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:43:42.490

对于第一个问题，您应该添加任何您拥有`display: inline-block`的地方，即

```
zoom: 1;
*display: inline 
```

### 更新

```
.main-navigation div.nav-menu > ul {
        border-bottom: 1px solid #ededed;
        border-top: 1px solid #ededed;
        display: inline-block !important;
            *display: inline
            zoom: 1;

        text-align: center;
        width: 100%;
    }

    .main-navigation li a,
    .main-navigation li {
        display: inline-block;
            *display: inline
            zoom: 1;
        text-decoration: none;

    } 
```

从您提供的[链接](http://tshirthideout.spreadshirt.com/)

# wcf - 如何禁用 WCF 测试客户端 - VS 2012

> ID：15252517
> 
> 赞同：17
> 
> 时间：2013-03-06T16:17:20.910
> 
> 标签：wcf, visual-studio-2012, wcftestclient

我有一个新的 WCF 服务应用程序，当我按 F5 进行调试时，WCF 测试客户端总是出现，但我想禁用它，因为我使用的是 soapUI 来测试。

我在这里尝试了答案 - [https://stackoverflow.com/a/8441887/903056](https://stackoverflow.com/a/8441887/903056)但是这个 XML 节点不再在 VS 2012 的项目文件中。我自己也尝试了其他一些事情，例如更改默认启动页面并尝试强制调试以启动浏览器会话。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-24T11:52:10.777

这真的很令人沮丧，但您可以尝试以下方法之一来禁用 WCF 测试客户端：

1.打开请求的项目属性并选择 Web 选项卡。选择当前页面单选按钮（我相信选择了特定页面按钮），保存项目并运行（F5）。

2.您可以修改项目XML（.csproj）文件并添加

```
<EnableWcfTestClientForSVCDefaultValue>False</EnableWcfTestClientForSVCDefaultValue> 
```

属性到`<WebProjectProperties>`节点。这应该通过以下方式完成：

2.1 卸载请求的项目（右键->卸载项目）。

2.2 编辑`<ProjectName>`.csproj（在项目上再次右键）

2.3 寻找 WebProjectProperties 节点并添加`<EnableWcfTestClientForSVCDefaultValue>False</EnableWcfTestClientForSVCDefaultValue>`到它。

2.4 重新加载项目。

我希望你会发现 unswer 有帮助..

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-13T20:56:12.510

一个对我有用的简单选项（至少在 Visual Studio 2012 Update 4 中）：

打开 WCF 项目属性并转到**Web**部分。将“**开始操作”**设置设置为`Don't open a page. Wait for a request from an external application.`

选择该选项后，我不再看到 WCF 测试客户端。

无论如何，我个人通常会选择此启动操作，因为我更喜欢在浏览器中按 F5，而不是每次在 VS 中按 F5 时都打开另一个选项卡。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-11T21:01:28.737

我找到了一个合理的解决方法。我所做的只是在项目中添加一个空的 html 页面，然后在解决方案资源管理器中右键单击 html 文件并选择`Set As Start Page`. 调试会话启动，但不会转到 WCF TestClient。不优雅但有效。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-23T16:30:54.283

旧线程，但在我对 VS2013 遇到同样的挫折时找到了它。如果在 VS 编辑器中打开 (yourProject)\svc.cs 文件运行项目 (F5)，则 WCF 客户端将启动。如果您在 VS 编辑器中使用任何其他文件作为选定和焦点文件按 F5，则 IIS 和正常的第一个网页将启动。当一个人知道时非常简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-15T20:04:17.947

我有一个类似的问题，发现这是由默认的启动选项引起的

```
> 解决方案属性
    > 调试
        >启动选项
            >命令行参数：  

```

它列出了`/client:"WcfTestClient.exe"`启动测试客户端的命令行参数。简单地删除这个论点就解决了我的问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-09-23T12:31:35.267

不需要额外的东西，只需做下面的事情。

**工具**--> 选项 --> 项目和解决方案 --> 构建和运行，最后选中 Only startup project 和 Dependencies on Run

# c# - 内存映射文件使用

> ID：15252518
> 
> 赞同：0
> 
> 时间：2013-03-06T16:17:22.820
> 
> 标签：c#

我目前正试图了解内存映射文件并可能在我的应用程序中实现它们。

该应用程序使用一系列大型输入文件来查找位置 - 当应用程序在单个线程上使用时，每个文件都按顺序访问，我猜这会进入更随机的访问区域 - 这使得 MMF 看起来很有价值。

但是，我对用法有点困惑-我应该在每个线程中更新一个 MMF 吗？我知道他们可以共享相同的底层文件，所以看起来我想要在所有线程中使用相同的文件，然后只是在每个线程上创建一个视图到该 MMF 中。

如果我应该只为每个文件创建一个，有没有办法测试 MMF 是否已经创建 - 通过它被分配的名称或其他方式，以防止尝试将多个地图打开到同一个文件，或者我需要知道线程中将使用哪些文件并传入已创建的实例以防止重复？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:58:28.953

如果每个线程专用于一个文件，那么让每个线程为它正在处理的一个文件创建自己的 MMF 可能是有意义的。仅由单个线程使用的资源更容易在线程内分配和销毁。

但是，如果所有线程都从同一个文件中读取，那么您就不想创建多个 MMF，因为这只会增加消耗的内存量并产生一致性问题（文件同一部分的多个视图）。

对于在同一个文件上操作的多个线程，您应该创建一次 MMF，并与多个线程共享 MMF 指针。

在多线程情况下按需分配会很快变得复杂，并且通常归结为需要锁定对受保护资源的每次访问。如果它们都必须排队等待对共享资源的访问，则要求锁会很快破坏运行多个独立线程的任何性能优势。

如果您可以在构造/启动线程之前分配共享资源，那么您通常不需要锁定访问资源，因为资源在线程需要它时始终存在。

因此，我会考虑在线程启动之前分配 MMF，并在所有线程之间共享 MMF 指针，而无需锁定。

这也假设文件是​​严格只读的——多个线程永远不会写回文件或 MMF。多个线程可以共享一个指向公共内存区域/MMF 的指针以进行只读访问，而不会出现任何线程并发问题。

与传统的缓冲文件访问相比，请注意您对 MMF 性能的假设。如果您的整个文件数据可以轻松地放入可用 RAM，那么 MMF 对于随机访问模式的性能可能比缓冲文件 I/O 的性能更高。如果文件数据远大于可用 RAM，则缓冲文件 I/O 对于随机访问的性能可能比使用 MMF 更高。为什么？因为 MMF 对内存使用很敏感。MMF 只能加载 4k 页大小的块中的数据。缓冲文件 I/O 可以根据您的实际数据大小需求和模式进行更精细的调整。如果您的应用从文件中 100 个不同位置加载 512 字节的数据，那么 MMF 将不得不加载 4k * 100 = 400k 字节的数据，即使您只需要 512 * 100 = 50k 的数据。在这个数据访问模式/用例中，

MMF 的主要吸引力更多地是开发人员的便利性，而不是原始性能。对于开发人员来说，从 MMF 支持的指针读取通常比编写和调整面向块的文件 I/O 子系统更方便。使用一种技术并没有错，因为它对开发人员来说既简单又方便，只要你承认这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:22:13.873

一个进程的线程总是共享相同的地址空间，这意味着每个线程都可以访问整个进程的“全局”对象和资源。

您将需要在您的进程中同步对文件的访问。在每个线程中重新打开文件没有多大意义，尤其是在谈论“更大”数量（几 MB）时。[MSDN](http://msdn.microsoft.com/en-us/library/dd997372.aspx)提供了一篇关于您的主题的文章，希望对您有所帮助。

# antlr - 如何使用 ANTLR 语法从字符串中解析和拆分字母字符和数字

> ID：15252519
> 
> 赞同：0
> 
> 时间：2013-03-06T16:17:23.037
> 
> 标签：antlr, antlr3, antlrworks, antlr2

我有一个语法，它分别解析字母字符和数字：

```
grammar Demo;

options
{
  language = C;
}

program : process+
        ;

process :  Alphanumeric {printf("\%s",$Alphanumeric.text->chars);}
        ;

Alphanumeric : (Alphabet | Number)+
             ;

fragment Alphabet : ('a'..'z')+
                  ;

fragment Number : ('0'..'9')+
                ; 
```

假设输入是 'a10' 或 'b10'，printf 语句会显示 a10 或 b10，但我想拆分字母字符和数字，即 a 和 10 必须分开拆分，因为我需要 'a ' 与其他字符串进行比较，并将数字，即 'a' 或 'b' 等旁边的数字保存到表中。

准确地说，a10 必须拆分 -> a 用于比较，10 用于存储，我应该能够分别获取字母和数字。

如何为这样的东西定义语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:34:54.827

您需要分别向解析器公开`Alphabet`和`Number`，这意味着它们应该是词法分析器中的顶级规则（而不是`fragment`规则）。这样一来，`Alphanumeric`也会变成解析器规则：

```
alphanumeric : (Alphabet | Number)+
             ;

Alphabet : ('a'..'z')+
         ;

Number : ('0'..'9')+
       ; 
```

# google-app-engine - GAE Go — 如何使用 GetMulti 与不存在的实体键？

> ID：15252521
> 
> 赞同：12
> 
> 时间：2013-03-06T16:17:24.193
> 
> 标签：google-app-engine, google-cloud-datastore, go

我发现自己需要对`GetMulti`一组键进行操作，其中一些实体存在，但有些不存在。

我当前的代码如下，返回一个错误（`datastore: no such entity`）。

`err := datastore.GetMulti(c, keys, infos)`

那么我该怎么做呢？我会使用“获取或插入”方法，但没有。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-06T19:38:31.197

[`appengine.MultiError`](https://godoc.org/google.golang.org/appengine#MultiError)在这种情况下，GetMulti 可以返回 a 。循环通过它并寻找[`datastore.ErrNoSuchEntity`](https://godoc.org/google.golang.org/appengine/datastore#pkg-variables). 例如：

```
if err := datastore.GetMulti(c, keys, dst); err != nil {
    if me, ok := err.(appengine.MultiError); ok {
        for i, merr := range me {
            if merr == datastore.ErrNoSuchEntity {
                // keys[i] is missing
            }
        }
    } else {
        return err
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-12T18:54:38.040

我知道这个话题已经讨论了好几天了，但我喜欢发布一个替代方案，使用*type switch*。

```
if err := datastore.GetMulti(c, keys, dst); err != nil {
  switch errt := err.(type) {
  case appengine.MultiError:
    for ix, e := range errt {
      if e == datastore.ErrNoSuchEntity {
        // keys[ix] not found
      } else if e != nil {
        // keys[ix] have error "e"
      }
    }
  default:
    // datastore returned an error that is not a multi-error
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-08T13:45:02.287

以为我会把答案扔进去以显示另一个用例。以下将接受任意数量的键并仅返回所有有效键。

```
// Validate keys
var validKeys []*ds.Key
if err := c.DB.GetMulti(ctx, tempKeys, dst); err != nil {
    if me, ok := err.(ds.MultiError); ok {
        for i, merr := range me {
            if merr == ds.ErrNoSuchEntity {
                continue
            }
            validKeys = append(validKeys, tempKeys[i])
        }
    } else {
        return "", err
    }
} else {
    // All tempKeys are valid
    validKeys = append(validKeys, tempKeys...)
} 
```

# javascript - ASP.NET、母版页和 jQuery

> ID：15252524
> 
> 赞同：2
> 
> 时间：2013-03-06T16:17:26.810
> 
> 标签：javascript, jquery, asp.net, master-pages

我正在尝试创建一个小脚本来允许我设置几个菜单项的样式（通过一个带有 li 项的简单 div 完成，其中包含一个将我发送到正确页面的每个）但我没有得到无处可去，所以我需要帮助。

我在母版页上有以下代码：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site1.master.cs" Inherits="MILLS001_PAINEL.Site1" EnableTheming="True" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Title</title>
<script type="text/javascript" src="../js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="../js/menu.js"></script>
<link href="../css/reset.css" rel="Stylesheet" type="text/css" />
<link href="../css/style.css" rel="Stylesheet" type="text/css" />
    <!--[if gte IE 9]>
        <style type="text/css">
            .gradient {
                filter: none;
            }
        </style>
    <![endif]-->

<asp:ContentPlaceHolder ID="head" runat="server"></asp:ContentPlaceHolder>
</head>
<body>
<div id="banner" class="gradient">
    <div id="menu">
        <ul>
            <li><a href="painel_gestao.aspx">Painel de Gestão</a></li>
            <li><a href="gestao_operacional.aspx">Cockpit Operacional</a></li>
        </ul>
    </div>
    <div id="logo"></div>
</div>
<div>
    <asp:ContentPlaceHolder ID="Placeholder" runat="server">

    </asp:ContentPlaceHolder>
</div>
</body>
</html> 
```

菜单是在母版页中定义的，现在我有这个脚本来添加某些类（已经在 CSS 中创建）以允许我向菜单项添加/删除样式：

```
$(document).ready(function () {
    $('menu').find('li').hover(function() {
        $(this).addClass("hovered");
    },
        function() {
            $(this).removeClass("hovered");
    });

    $('menu').find('a').click(function(e) {
        alert(e);
        $(this).parent().addClass("active");
    });
 }); 
```

出于某种原因，尽管我没有看到任何错误，但我无法使其正常工作。我在另一个脚本中遇到了问题，在该脚本中我必须使用“[id$=name]”来引用名称，因为母版页名称修改会产生这个问题，但这里似乎并非如此......

谁能帮我看看这里有什么问题？

提前致谢

### 编辑

让悬停的东西正常工作，但现在我无法让活动类在页面刷新后保持原位（显然，这是 ASP 的默认行为）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:19:22.257

你需要做：

```
$('#menu') <-- note the # sign 
```

在你的选择器中......否则它看起来应该可以正常工作

API 参考：[jQuery ID 选择器](http://api.jquery.com/id-selector/ "jQuery ID 选择器")

要解决您的编辑：

页面加载之间不会自动保留元素状态。浏览器不会寻找“相同的元素”并尝试使其看起来相同。如果您希望菜单保持打开状态，则需要保留一些数据（无论是通过回发数据还是（我建议）一些浏览器端状态保存（例如`localStorage`））并在菜单代码中手动处理

哦....重读您的问题，我认为它可能比这更简单....

在页面加载时，您可以执行以下操作：

```
$('[href=' + window.location.path + ']').addClass('active'); 
```

可能需要在`window.location.path`选择器之前进行一些预处理，以处理额外的 url 参数和 href 中路径的变化（例如`./index.html`和`index.html`）。但是，请注意属性选择器可用的各种类型的匹配...即`*=`...可能会使您的 href 匹配更容易...但我不会编写所有代码 =0D

API 参考：[jQuery 属性选择器](http://api.jquery.com/category/selectors/attribute-selectors/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:20:10.577

您的选择器看起来不正确，看起来您缺少 # 说明它是一个 ID。应该：

```
 $('#menu').find('a').click() 
```

还有一种稍微不同的方法：

```
 $('#menu a').click() 
```

# r - 为什么替换函数的参数不被懒惰地评估？

> ID：15252537
> 
> 赞同：16
> 
> 时间：2013-03-06T16:17:57.507
> 
> 标签：r, promise

考虑以下简单函数：

```
f <- function(x, value){print(x);print(substitute(value))} 
```

参数`x`最终将由 评估`print`，但`value`永远不会。所以我们可以得到这样的结果：

```
> f(a, a)  
Error in print(x) : object 'a' not found  
> f(3, a)  
[1] 3  
a  
> f(1+1, 1+1)  
[1] 2  
1 + 1  
> f(1+1, 1+"one")  
[1] 2  
1 + "one" 
```

一切如预期。

现在考虑替换函数中的相同函数体：

```
'g<-' <- function(x, value){print(x);print(substitute(value))} 
```

（单引号应该是花式引号）

让我们尝试一下：

```
> x <- 3  
> g(x) <- 4  
[1] 3  
[1] 4 
```

目前没有什么异常...

```
> g(x) <- a  
Error: object 'a' not found 
```

这是出乎意料的。名称`a`应打印为语言对象。

```
> g(x) <- 1+1  
[1] 4  
1 + 1 
```

这没关系，因为`x`' 以前的值是`4`。请注意未计算传递的表达式。

最终测试：

```
> g(x) <- 1+"one"  
Error in 1 + "one" : non-numeric argument to binary operator 
```

等一下……它为什么要尝试评估这个表达式？

那么问题是：错误还是功能？这里发生了什么？我希望一些 guru 用户能够对 R 的承诺和惰性评估有所了解。或者我们可能会得出结论，这是一个错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T22:27:44.833

我们可以将问题简化为一个稍微简单的例子：

```
g <- function(x, value)
'g<-' <- function(x, value) x
x <- 3

# Works
g(x, a)
`g<-`(x, a)

# Fails
g(x) <- a 
```

这表明 R 在评估替换函数时正在做一些特殊的事情：我怀疑它会评估所有参数。我不知道为什么，但是 C 代码中的注释（[https://github.com/wch/r-source/blob/trunk/src/main/eval.c#L1656](https://github.com/wch/r-source/blob/trunk/src/main/eval.c#L1656)和[https://github.com /wch/r-source/blob/trunk/src/main/eval.c#L1181](https://github.com/wch/r-source/blob/trunk/src/main/eval.c#L1181)）建议可能是为了确保其他中间变量不会被意外修改。

Luke Tierney 对当前方法的缺点进行了长篇评论，并说明了可以使用替换函数的一些更复杂的方法：

> 这里的方法有两个问题：
> 
> 复杂赋值中的复杂赋值，如 `f(x, y[] <- 1) <- 3`，可能会导致外部赋值的临时变量值被覆盖，然后被内部赋值删除。这可以通过使用多个临时变量或对这个变量使用一个承诺来解决，就像对 RHS 所做的那样。然后可能需要调整错误消息中替换函数调用的打印。
> 
> 使用形式`f(g(x, z), y) <- w`的赋值`z`将计算两次，一次用于调用`g(x, z)` ，一次用于调用替换函数`g<-`。可以通过使用 Promise 来解决这个问题。使用更多的临时变量是行不通的，因为它会弄乱使用替代和/或非标准评估的替换函数（并且有一些包可以做到这一点——igraph 就是其中之一）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T07:00:40.263

我认为关键可以在从[第 1682 行`"eval.c"`](https://github.com/wch/r-source/blob/trunk/src/main/eval.c#L1682)开始的这条评论中找到（并且紧随其后的是对赋值操作的 RHS 的评估）：

```
/* It's important that the rhs get evaluated first because
assignment is right associative i.e. a <- b <- c is parsed as
a <- (b <- c). */

PROTECT(saverhs = rhs = eval(CADR(args), rho)); 
```

我们期望如果我们这样做，`g(x) <- a <- b <- 4 + 5`两者都会被赋值；这实际上就是发生的事情。`a``b``9`

显然，R*确保*这种一致行为的方式是始终先评估分配的 RHS，然后再执行其余的分配。如果该评估失败（例如当您尝试类似的操作时`g(x) <- 1 + "a"`），则会引发错误并且不会进行任何分配。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T17:13:05.157

我将在这里冒险，所以请有更多知识的人随时评论/编辑。

请注意，当您运行

```
'g<-' <- function(x, value){print(x);print(substitute(value))}
x <- 1
g(x) <- 5 
```

副作用是 5 被分配给`x`. 因此，必须对两者进行评估。但是如果你再跑

```
'g<-'(x,10) 
```

和 10的值`x`都被打印出来，但 的值`x`保持不变。

**推测：**

因此，解析器会区分您是否`g<-`在进行实际分配的过程中调用，以及何时直接调用`g<-`。

# ios - ios Dropbox图像缩略图在tableview中不使用图像缓存

> ID：15252538
> 
> 赞同：2
> 
> 时间：2013-03-06T16:17:59.453
> 
> 标签：ios, xcode, dropbox

我想在不使用 Dropbox SDK 的情况下将 Dropbox 缩略图放在我的 tableview 中，因为我不想使用图像缓存或其他东西。

如果缩略图不存在，我会放入默认图像，但是当缩略图存在时，我不知道如何从保管箱中获取它并放入我的表格视图中：

```
NSString *fileIconName;
if ([[cellDescriptor objectForKey:@"fileThumbnailExists"]boolValue]==YES)
{

}
else {
fileIconName = [cellDescriptor objectForKey:@"fileIcon"];
cell.imageView.image = [UIImage imageNamed:fileIconName];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:19:56.683

你是说你不想使用 iOS 的 Sync API 吗？您仍然可以使用 Dropbox [iOS SDK](https://www.dropbox.com/developers/core/files#ios)。使用 iOS SDK 只需设置一个 DBRESTClient 对象，然后调用[/thumbnails 端点](https://www.dropbox.com/developers/core/api#thumbnails)。我不完全确定我理解这个问题，但我希望这会有所帮助。

# ios - NSDateFormatter 不工作

> ID：15252550
> 
> 赞同：-6
> 
> 时间：2013-03-06T16:18:10.243
> 
> 标签：ios, objective-c

我不知道我缺少什么，但我不知道为什么我的 NSDateformatter 不工作。

我的代码如下：

```
NSDateFormatter *formatterObj = [[NSDateFormatter alloc]init];

[formatterObj setDateFormat:@"MMM dd, yyyy"];
NSDate *newDate = [formatterObj dateFromString:@"2013-03-04 19:12:55 +0000"];
NSString *stringDate = [formatterObj stringFromDate:newDate];

NSLog(@"%@",stringDate); 
```

它正在打印一个空对象，但我不知道为什么。任何帮助将不胜感激。

我想要的输出格式为“2013 年 1 月 11 日”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:19:46.310

您的格式化程序应该是：

```
[formatterObj setDateFormat:@"yyyy-MM-dd HH:mm:ss zzz"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:16:17.260

你需要两种格式。一个解析原始字符串。第二个生成所需的输出。您正在尝试使用输出格式解析字符串。那是行不通的。

```
NSDateFormatter *formatterObj = [[NSDateFormatter alloc]init];

[formatterObj setDateFormat:@"yyyy-MM-dd HH:mm:ss ZZZ"];
NSDate *newDate = [formatterObj dateFromString:@"2013-03-04 19:12:55 +0000"];
[formatterObj setDateFormat:@"MMM dd, yyyy"];
NSString *stringDate = [formatterObj stringFromDate:newDate];

NSLog(@"%@",stringDate); 
```

# asp.net - 无法在我的开发机器上映射路径“/WorkArea/”

> ID：15252551
> 
> 赞同：1
> 
> 时间：2013-03-06T16:18:13.200
> 
> 标签：asp.net, ektron

我有一个使用 Ektron API 获取文件夹列表及其详细信息的 .net 程序。它以前在我的开发机器上工作过。现在它不再起作用了。我注意到，我们已经从 7.xx 升级到 Ektron 8.xx。

当我运行相同的代码但它给了我这个错误：

```
 Failed to map the path '/WorkArea/'. 
```

我不知道为什么。我在 Visual Studio 2010 上运行这个测试程序。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:18:03.963

我遇到了完全相同的问题（Ektron 版本**8.6.1**），试图在我的本地机器（用于开发人员）上运行 3 层 minsite，与（暂存）应用程序层交谈。

首先，我按照[设置演示层的说明进行操作](http://documentation.ektron.com/cms400/v8.61/Reference/Web/3-Tier/3-Tier.htm)

*这些说明中未*提及的一件事是要求您的表示层站点的虚拟路径与`appSettings > ek_sitePath`应用程序层的`web.config`. 默认情况下，此值为`/`。

默认情况下，当您打开/创建一个网站项目并使用内置的 VS 服务器进行开发时，该站点的路径看起来像`http://localhost:wxyz/SiteName`.

所以你有2个选择：

1.  更改`web.config`应用层，因此`appSettings > ek_sitePath`与`/SiteName`（可能不是最佳选择，因为任何新站点开发都需要再次更改此设置，并且可能会破坏生产站点）

2.  将您的 Presentation Tier 站点的虚拟路径更改为`/`，这很容易按照[ScottGu 博客文章](http://weblogs.asp.net/scottgu/archive/2006/12/19/tip-trick-how-to-run-a-root-site-with-the-local-web-server-using-vs-2005-sp1.aspx)中的概述进行（讨论 VS 2005，我使用 2010，这是相同的过程）

我采取了后一种方法，现在一切正常！

# bash - 是否有一个shell命令会杀死所有后台尾进程

> ID：15252556
> 
> 赞同：8
> 
> 时间：2013-03-06T16:18:28.940
> 
> 标签：bash, kill, pid

`&`如果我运行一个脚本来启动多个进程

```
tail -f log file1 &
tail -f log file2 & 
```

我怎样才能一次将它们全部关闭？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T16:20:55.637

您可以通过以下方式杀死所有尾部命令 `killall tail`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T16:20:24.093

`killall tail`应该可以解决问题，但它也会关闭您正在运行的任何其他尾进程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T16:22:08.837

“记住”孩子的pid。

```
tail -f logfile1 & 
pid1=$!

tail -f logfile2 &
pid2=$!

kill $pid1 $pid2 
```

显然，您不会像在真实脚本中那样立即发出杀戮。您可能真的想等待子进程。但这可以满足您的要求

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T16:25:53.577

`%1`您可以使用, `%2`, ... 成语来引用当前 shell 中的后台作业。

据我所知，没有什么可以一网打尽。没有`%*`或等效的。

但是您可以使用快捷方式

```
kill %1 %2 %3 %4 %5 %6 %7 %8 
```

这将杀死仍在当前 shell 中运行的前八个后台进程。这可能是也可能不是`tail`。

小心你杀了谁;-)

如果您可以完全控制后台进程，这对您来说可能是一个安全的选择。既然您提到要从 shell 脚本执行此操作，并且如果`tail`s 是唯一的后台进程，那么这很简单。只需确保您的 shell 脚本启动一个子 shell，这样它就不会影响交互式 shell 的后台进程。例如你可以开始你的脚本

```
#!/usr/bin/bash 
```

并在脚本上设置执行权限位，并始终按名称调用脚本。换句话说，你不应该`source script_file`那个脚本。

On the other hand, [jim's answer](https://stackoverflow.com/a/15252649/923794) to save the pids (process ids) of any process you are starting is a much more safe way of killing other processes.

# delphi - TMonitor.GetBoundsRect 在 Delphi 2007 中是否存在由 VNC 触发的访问冲突错误？

> ID：15252559
> 
> 赞同：3
> 
> 时间：2013-03-06T16:18:30.610
> 
> 标签：delphi, delphi-2007

这是我从运行我们在 Delphi 2007 中构建的大型产品之一的客户那里获得的崩溃报告，我无法重现该报告，甚至没有通过调用堆栈直接涉及任何非 VCL 代码。

Delphi 2007中TMonitor的VCL源码很简单( `Forms.pas`)

`TMonitor.GetBoundsRect``GetMonitorInfo`在初始化结构后调用 win32 API ，`cbSize`以便 Windows API 知道要返回的大小。

我一遍又一遍地看这段代码，我看不出这个关卡是如何崩溃的，除非 Self 指针无效，尽管我怀疑它实际上可能是`THintWindow`关卡故障，并且只有在`TMonitor.GetBoundsRect`这个故障变得可见崩溃，因为它以某种方式获得了指向无效`TMonitor`对象的指针并在其上调用了方法。

```
function TMonitor.GetBoundsRect: TRect;
var
  MonInfo: TMonitorInfo;
begin
  MonInfo.cbSize := SizeOf(MonInfo);
  GetMonitorInfo(FHandle, @MonInfo);  // <----- CRASH.
  Result := MonInfo.rcMonitor;
end; 
```

通过 madExcept 的崩溃调用堆栈只能在客户端系统上重现：

```
main thread ($70):
004f5004 +010 myapp.exe Forms    6361  +2 TMonitor.GetBoundsRect
004f4fe2 +00a myapp.exe Forms    6352  +1 TMonitor.GetWidth
004e022f +06b myapp.exe Controls 9929  +7 THintWindow.ActivateHint
004e0457 +017 myapp.exe Controls 9970  +1 THintWindow.ActivateHintData
004f95fa +31a myapp.exe Forms    8923 +56 TApplication.ActivateHint
004f8fc1 +02d myapp.exe Forms    8728  +8 TApplication.HintTimerExpired
004f61e6 +022 myapp.exe Forms    7083  +3 HintTimerProc
7e4196c2 +00a USER32.dll                    DispatchMessageA
004f7f00 +0fc myapp.exe Forms    8105 +23 TApplication.ProcessMessage
004f7f3a +00a myapp.exe Forms    8124  +1 TApplication.HandleMessage
004f822f +0b3 myapp.exe Forms    8223 +20 TApplication.Run
0155cf77 +2f3 myapp.exe myapp    368  +41 initialization 
```

上面整个调用栈中的所有代码都是VCL源代码，没有一个是我的。

除了禁用整个应用程序中的所有提示之外，我还能做些什么来进一步解决这个问题或解决它吗？

更新：注册和解除，以及异常地址：

```
exception class   : EAccessViolation
exception message : Access violation at address 004F5004 in module 'hirepnt.exe'. Read of address 00000004.

cpu registers:
eax = 00000000
ebx = 0012fccc
ecx = 7e42ac2c
edx = 0012fccc
esi = 07b694a8
edi = 0012fd14
eip = 004f5004
esp = 0012fc90
ebp = 0012fd1c

stack dump:
0012fc90  94 fc 12 00 28 00 00 00 - 2c ac 42 7e 70 b3 6f 02  ....(...,.B~p.o.
0012fca0  fc fc 12 00 01 00 00 00 - 70 b3 6f 02 cc 53 4f 00  ........p.o..SO.
0012fcb0  01 00 00 00 01 00 00 00 - 3c 56 4f 00 14 fd 12 00  ........<VO.....
0012fcc0  a8 94 b6 07 00 00 00 00 - e7 4f 4f 00 00 00 00 00  .........OO.....
0012fcd0  4b 64 4f 00 14 fd 12 00 - a8 94 b6 07 00 00 00 00  KdO.............
0012fce0  34 02 4e 00 4c fd 12 00 - c4 5c 40 00 1c fd 12 00  4.N.L....\@.....
0012fcf0  40 fd 12 00 97 fd 12 00 - 0c 23 4d 00 e0 01 00 00  @........#M.....
0012fd00  6d 01 00 00 e0 01 00 00 - 6d 01 00 00 41 02 00 00  m.......m...A...
0012fd10  80 01 00 00 34 fd 12 00 - 10 cc 6e 02 40 fd 12 00  ....4.....n.@...
0012fd20  5d 04 4e 00 d8 fd 12 00 - 0c 23 4d 00 f0 fd 12 00  ].N......#M.....
0012fd30  e0 01 00 00 6d 01 00 00 - 41 02 00 00 7c 01 00 00  ....m...A...|...
0012fd40  f4 fd 12 00 00 96 4f 00 - 00 00 00 00 0c fe 12 00  ......O.........
0012fd50  c4 5c 40 00 f4 fd 12 00 - 8c fe 12 00 c4 61 4f 00  .\@..........aO.
0012fd60  40 41 6f 02 00 00 00 00 - 00 00 00 00 28 05 00 00  @Ao.........(...
0012fd70  15 02 00 00 00 00 00 00 - 00 00 00 00 d9 04 00 00  ................
0012fd80  ac 01 00 00 84 00 00 e0 - 01 00 00 6d 01 00 00 41  ...........m...A
0012fd90  02 00 00 7c 01 00 00 01 - 4f 00 00 00 69 00 00 00  ...|....O...i...
0012fda0  51 00 00 00 6b 00 00 00 - e0 01 00 00 61 01 00 00  Q...k.......a...
0012fdb0  f0 84 22 06 0c 23 4d 00 - e0 01 00 00 6d 01 00 00  .."..#M.....m...
0012fdc0  56 05 00 00 18 00 00 ff - fe ff ff ff fe ff ff ff  V...............

disassembling:
[...]
004f4ff6        push    edi
004f4ff7        add     esp, -$28
004f4ffa        mov     ebx, edx
004f4ffc 6360   mov     dword ptr [esp], $28
004f5003 6361   push    esp
004f5004      > mov     eax, [eax+4]
004f5007        push    eax
004f5008        mov     eax, [$1644560]
004f500d        mov     eax, [eax]
004f500f        call    eax
004f5011 6362   mov     edi, ebx
[...] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:44:27.357

这很可能是 qc [#53932](http://qc.embarcadero.com/wc/qcmain.aspx?d=53932)（也是[#25466](http://qc.embarcadero.com/wc/qcmain.aspx?d=25466) [#57953](http://qc.embarcadero.com/wc/qcmain.aspx?d=57953)），并且修补 Forms.pas 确实可以解决它。在我的情况下，使用 D7，它只能通过使用远程访问触发，问题/修复与 D2007 相同。

具体来说，补丁是改变TScreen.FindMonitor。这是 D7 更改，不确定是否需要对 D2007 进行任何编辑。

```
function TScreen.FindMonitor(Handle: HMONITOR): TMonitor;
var
  I: Integer;
begin
  Result := nil;
  for I := 0 to MonitorCount - 1 do
    if Monitors[I].Handle = Handle then
    begin
      Result := Monitors[I];
//      break;
      Exit;
    end;
  //if we get here, the Monitors array has changed, so we need to clear and reinitialize it
  for i := 0 to MonitorCount-1 do
    TMonitor(Monitors[i]).Free;
  fMonitors.Clear;
  EnumDisplayMonitors(0, nil, @EnumMonitorsProc, LongInt(FMonitors));
  for I := 0 to MonitorCount - 1 do
    if Monitors[I].Handle = Handle then
    begin
      Result := Monitors[I];
      Exit;
    end;
end; 
```

# c++ - 从一些没有校准的图像中重建 3D？

> ID：15252561
> 
> 赞同：4
> 
> 时间：2013-03-06T16:18:35.373
> 
> 标签：c++, opencv, 3d-reconstruction

我想在不使用棋盘校准的情况下从多个图像进行 3D 重建。我正在使用 OpenCV 并研究从 30 张图像中获取模型 3D 的方法，而无需使用棋盘图案校准相机。

这可能吗？我在哪里可以获得外部参数？

我可以在不校准的情况下进行 3D 重建吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:13:22.177

校准网格（典型 OpenCV 示例中的棋盘）只是一个已知尺寸的对象，可让您估计相机的内在参数，即从相机坐标到点的图像坐标的映射。这包括焦距、投影中心、径向畸变参数等。如果您取消校准对象，您将需要从图像观察本身中找到这些参数。这种方法被称为“自我校准”或“自动校准”，并且可以相当参与。基本上，您正在尝试为后续非线性优化（即捆绑调整）找到一个良好的起点。首先，您可能想参考 Marc Pollefeys 的博士论文，他为这个问题提出了一个简单的线性算法： [http://www.cs.unc.edu/~marc/pubs/PollefeysIJCV04.pdf](http://www.cs.unc.edu/~marc/pubs/PollefeysIJCV04.pdf)

# c# - 图片调整大小优化导致内存使用飙升

> ID：15252567
> 
> 赞同：1
> 
> 时间：2013-03-06T16:18:52.753
> 
> 标签：c#, memory-leaks, xamarin.ios, uiimage

我制作了一个函数，它获取原始图像并将其调整为 3 种不同的缩放比例 -> 16x、10x 和 4x。为了更好地理解，请继续阅读本段。假设原始图像是 1000x1000。我声明在 1 倍变焦时它的尺寸将为 50x50。这意味着 4 倍变焦将是 200x200，10 倍变焦将是 500x500，16 倍变焦将是 800x800。所以我的函数需要将原来的 1000x1000 缩小到 800x800，然后缩小到 500x500，然后缩小到 200x200。请注意，我已成功完成此操作，**我的问题是关于内存使用情况**。

下面我有两种方法。两种方法都有效，但是一种方法会导致巨大的内存使用膨胀，使用的内存大约是另一种方法的 3 倍/4 倍……我更喜欢第二种方法，因为它的加载速度比第一种方法快得多，因为它不会调整 3 幅图像中的每一个的大小从原始图像，而不是从以前调整大小的图像调整它们的大小。

注意：我正在使用 Xcode Instruments 来测量内存使用情况。ImageResizer 类包含一个名为“Resize”的函数，用于调整图像的大小。

方法1。）

```
 public List<UIImage> InitImageList_BFObjects ( UIImage image, SizeF frameSize )
    {
        List<UIImage> listOfImages = new List<UIImage>();

        for ( int i = 0; i < 3; i++ )
        {
            if ( i == 0 )
                zoomScale = 16f;
            else if ( i == 1 )
                zoomScale = 10f;
            else// if ( i == 2 )
                zoomScale = 4f;

            Resizer = new ImageResizer(image);
            Resizer.Resize(frameSize.Width * zoomScale, frameSize.Height * zoomScale);
            UIImage resizedImage = Resizer.ModifiedImage;
            listOfImages.Insert(0, resizedImage);

        }

        return listOfImages;
    } 
```

方法 1 有效并且使用的内存非常少。我用一组大约 20 张图像运行了这个。加载后我的应用程序使用了大约 14mb 的内存（使用 Xcodes Instruments 检查内存使用情况）

方法2。）

```
 public List<UIImage> InitImageList_BFObjects ( UIImage image, SizeF frameSize )
    {
        List<UIImage> listOfImages = new List<UIImage>();

        for ( int i = 0; i < 3; i++ )
        {
            if ( i == 0 )
                zoomScale = 16f;
            else if ( i == 1 )
                zoomScale = 10f;
            else// if ( i == 2 )
                zoomScale = 4f;

            if ( listOfImages.Count == 0 )
            {
                Resizer = new ImageResizer(image);
                Resizer.Resize(frameSize.Width * zoomScale, frameSize.Height * zoomScale);
                UIImage resizedImage = Resizer.ModifiedImage;
                listOfImages.Insert(0, resizedImage);
            }
            else
            {
                // THIS LINE CONTAINS THE MAIN DIFFERENCE BETWEEN METHOD 1 AND METHOD 2
                // Notice how it resizes from the most recent image from listOfImages rather than the original image
                Resizer = new ImageResizer(listOfImages[0]);
                Resizer.Resize(frameSize.Width * zoomScale, frameSize.Height * zoomScale);
                UIImage resizedImage = Resizer.ModifiedImage;
                listOfImages.Insert(0, resizedImage);
            }
        }

        return listOfImages;
    } 
```

方法 2 有效，但内存使用量猛增！我用同一组大约 20 张图像运行了这个。加载后我的应用程序有超过 60mb 的内存使用量（使用 Xcodes Instruments 检查内存使用情况）为什么内存使用量如此之高？方法二到底是怎么回事，导致内存一飞冲天？就好像一个变量没有被正确清理

***** 附加信息，ImageResizer 类*** *****

 **我从 ImageResizer 类中删除了不需要的功能，并将其重命名为“ImageResizer_Abridged”。我什至转而使用这个类，以确保我没有不小心删掉任何需要的东西。

```
public class ImageResizer_Abridged
{
    UIImage originalImage  = null;
    UIImage modifiedImage = null;

    public ImageResizer_Abridged ( UIImage image )
    {
        this.originalImage = image;
        this.modifiedImage = image;
    }   

    /// <summary>
    /// strech resize
    /// </summary>
    public void Resize( float width, float height )
    {
        UIGraphics.BeginImageContext( new SizeF( width, height ) );
        //
        modifiedImage.Draw( new RectangleF( 0,0, width, height ) );
        modifiedImage = UIGraphics.GetImageFromCurrentImageContext();
        //
        UIGraphics.EndImageContext();
    }

    public UIImage OriginalImage 
    {
        get 
        {
            return this.originalImage;
        }
    }

    public UIImage ModifiedImage 
    {
        get 
        {
            return this.modifiedImage;
        }
    }
} 
```

**我创建了一个显示此问题的简化测试项目*********

 **这是该项目的保管箱链接： [https ://www.dropbox.com/s/4w7d87nn0aafph9/TestMemory.zip](https://www.dropbox.com/s/4w7d87nn0aafph9/TestMemory.zip)

这是方法 1 的 Xcode Instruments 屏幕截图作为证据（9 mb 内存使用）：http: [//i88.photobucket.com/albums/k194/lampshade9909/AllImagesResizedFromOriginalImage_zps585228c6.jpg](http://i88.photobucket.com/albums/k194/lampshade9909/AllImagesResizedFromOriginalImage_zps585228c6.jpg)

这是方法 2 的 Xcode Instruments 屏幕热作为证据（55 mb 内存使用）：http: [//i88.photobucket.com/albums/k194/lampshade9909/SignificantIncreaseInMemoryUsage_zps19034bad.jpg](http://i88.photobucket.com/albums/k194/lampshade9909/SignificantIncreaseInMemoryUsage_zps19034bad.jpg)

下面是运行测试项目所需的代码块

```
 // Initialize My List of Images
        ListOfImages = new List<UIImage>();

        for ( int i = 0; i < 30; i++ )
        {
            // Create a UIImage Containing my original Image
            UIImage originalImage = UIImage.FromFile ("b2Bomber.png");
            float newWidth = 100f;
            float newHeight = 40f;
            float zoomScale;
            float resizedWidth, resizedHeight;

            UIImage resizedImage1;
            UIImage resizedImage2;

            // Basically, I want to take the originalImage Image and resize it twice.  
            // Method 1.) Resize the originalImage and save it as ResizedImage1\.  Resize the originalImage and save it as ResizedImage2\.  We're finished!
            // Method 2.) Resize the originalImage and save it as ResizedImage1\.  Resize ResizedImage1 and save it as ResizedImage2\.  We're finished!

            // The pro to Method 1 is that we get the best possible quaility on all resized images.  The con is, this takes a long time if we're doing dozens of very large images
            // The pro to Method 2 is that it's faster than Method 1\.  This is why I want to use Method 2, it's speed.  But it has a HUGE con, it's memory usage. 
            // Please run this project on an iPad connected to XCodes Instruments to monitor memory usage and see what I mean 

            zoomScale = 10f;
            resizedWidth = newWidth*zoomScale;
            resizedHeight = newHeight*zoomScale;
            UIGraphics.BeginImageContext( new SizeF( resizedWidth, resizedHeight ) );
            originalImage.Draw( new RectangleF( 0, 0, resizedWidth, resizedHeight ) );
            resizedImage1 = UIGraphics.GetImageFromCurrentImageContext();
            UIGraphics.EndImageContext();

            zoomScale = 4f;
            resizedWidth = newWidth*zoomScale;
            resizedHeight = newHeight*zoomScale;
            UIGraphics.BeginImageContext( new SizeF( resizedWidth, resizedHeight ) );

            // Run this project on an iPad and examine the memory usage in XCode's Instruments.  
            // The Real Memory Usage will be aroud 9 MB.  
            // Uncomment this "originalImage.Draw" line to see this happening, make sure to comment out the "resizedImage1.Draw" line

            // originalImage.Draw( new RectangleF( 0, 0, resizedWidth, resizedHeight ) );

            // Run this project on an iPad and examine the memory usage in XCode's Instruments.  
            // The Real Memory Usage will be aroud 55 MB!!  
            // My question is, why does the memory sky rocket when doing this, and how can I prevent the memory from sky rocketing??
            // My App requires me to resize around a hundred images and I want to be able to resize an already resized image (like in this example) without the memory usage sky rocketing like this...
            // Uncomment this "resizedImage1.Draw" line to see this happening, make sure to comment out the "originalImage.Draw" line

            resizedImage1.Draw( new RectangleF( 0, 0, resizedWidth, resizedHeight ) );
            resizedImage2 = UIGraphics.GetImageFromCurrentImageContext();
            UIGraphics.EndImageContext();

            // Add my resized images to the list of Images
            ListOfImages.Add (resizedImage1);
            ListOfImages.Add (resizedImage2);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:22:10.237

我不确定你的`Resize`代码，但我见过`Scale`做*奇怪*的事情。一旦你深入研究它，这并不奇怪，但它绝对不明显。

只要不创建它的支持，创建一个`UIImage` *可以非常便宜，内存明智。*`CGImage`IOW iOS*可能*不会**立即**分配`CGImage`与新大小匹配的新背景图像。在需要之前，该分配将有所**不同**`CGImage`。

在这种情况下，某些代码（如您的方法 1）在扩展时可能几乎不需要额外的内存。但是，您的第二种方法是使用按比例放大的图像（并且需要为此分配支持`CGImage`），因此它最终需要*更早*的内存。

**你怎么能检查这个？**

将您`resizedImage.Size`与`resizedImage.CGImage.Size`. 如果它们不匹配，那么您可能会遇到缓存。

**笔记**

*   我说*可能*是因为缓存逻辑*未知*（未记录）。我知道这可能与在模拟器和设备上运行有所不同——它也因 iOS 版本而异；

*   缓存是一件好事 - 但它可能会令人惊讶:-) 我只是希望这被记录在案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:41:51.877

你检查过 Resizer 是否实现了 Dispose() 方法吗？我没有看到你把它扔到任何地方。

我相信您的新代码行正在对整个图像实施缩放，因此增加了内存使用量。

Resizer 正在以新的放大比例缩放整个图像，因此传入的 4MB 图像会缩放到 8MB、16MB 和 32MB，从而消耗您的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:43:08.303

`UIImage`实现`IDisposable`，所以最终将不得不这样做`Dispose`。该`Resize`方法似乎“丢失”了对 的引用`modifiedImage`，因此我将使用`Dispose()`它。希望调用者对完成后返回的列表中的所有图像执行相同`InitImageList_BFObjects`的操作。或者*那个*类实现`IDisposable`了它，它已经决定了谁必须处理它。但请放心，这些正在创建的图像`Dispose()`有时需要在某个地方进行。

```
public class ImageResizer_Abridged
{
    private readonly UIImage originalImage;

    private UIImage modifiedImage;

    public ImageResizer_Abridged(UIImage image)
    {
        this.originalImage = image;
        this.modifiedImage = image;
    }

    /// <summary>
    /// stretch resize
    /// </summary>
    public void Resize(float width, float height)
    {
        UIGraphics.BeginImageContext(new SizeF(width, height));
        //
        var oldImage = this.modifiedImage;
        this.modifiedImage.Draw(new RectangleF(0, 0, width, height));
        this.modifiedImage = UIGraphics.GetImageFromCurrentImageContext();
        oldImage.Dispose();
        //
        UIGraphics.EndImageContext();
    }

    public UIImage OriginalImage
    {
        get
        {
            return this.originalImage;
        }
    }

    public UIImage ModifiedImage
    {
        get
        {
            return this.modifiedImage;
        }
    }
} 
```****

# php - PHPUnit 错误 -

> ID：15252569
> 
> 赞同：1
> 
> 时间：2013-03-06T16:18:57.507
> 
> 标签：php, apache, phpunit, netbeans-7, windows-server-2008-r2

在运行 apache 2.2.21 和 PHP5.3 的 Windows Server 2008 R2 上安装 PEAR 后，我遇到了问题。安装后它说“'pear' 命令现在在 c:\php5.3\pear.bat 为您服务”

```
C:\PHP5.3>pear -V
PHP_MINIT_FUNCTION for php_sqlsrv: entering
PHP_RINIT for php_sqlsrv: entering
sqlsrv.WarningsReturnAsErrors = On
sqlsrv.LogSeverity = -1
sqlsrv.LogSubsystems = -1
PEAR Version: 1.9.4
PHP Version: 5.3.21
Zend Engine Version: 2.3.0 
```

好的，一切顺利。PHPUnit 安装没有给我错误。然后在 Netbeans 中，我在 MVC 框架中设置了一个小类。尝试对其运行单元测试，但收到此错误：

```
'"@php_bin@"' is not recognized as an internal or external command,
operable program or batch file. 
```

我做了一些搜索，在这里遇到了这个问题：[Can't seem to set my php.exe path in pear.bat](https://stackoverflow.com/questions/6795217/cant-seem-to-set-my-php-exe-path-in-pear-bat)

在 pear.bat 和 phpunit-skelgen.bat 文件中改变了

```
IF "%PHP_PEAR_INSTALL_DIR%"=="" SET "PHP_PEAR_INSTALL_DIR=C:\PHP5.3\pear"
IF "%PHP_PEAR_BIN_DIR%"=="" SET "PHP_PEAR_BIN_DIR=C:\PHP5.3"
IF "%PHP_PEAR_PHP_BIN%"=="" SET "PHP_PEAR_PHP_BIN=C:\PHP5.3\php.exe" 
```

对此：

```
SET "PHP_PEAR_INSTALL_DIR=C:\PHP5.3\pear"
SET "PHP_PEAR_BIN_DIR=C:\PHP5.3"
SET "PHP_PEAR_PHP_BIN=C:\PHP5.3\php.exe" 
```

现在，当我在 Netbeans 中运行测试时，它给了我这个错误：

```
The system cannot find the path specified. 
```

这是我尝试过的，

1.  将驱动器映射到 PHPUnit 所在的服务器，并将 Netbeans 中的路径设置为 phpunit.bat 和 phpunit-skelgen.bat
2.  使用 UNC 路径设置文件。

仍然得到同样的错误。它并没有告诉我出现问题的路径。

开发环境：操作系统：Win 7 64bit，Netbeans：7.2

服务器环境：操作系统：Win server 2008 R2，PHP 5.3，Pear：1.9.4，apache 2.2.21

# java - JAXB：用于列表的 XmlAdapter items Does anybody know how to attach custom XmlAdapter to objects contained in heterogenous list (like List)? For example - suppose we have a container class with a list of miscelaneous objects 问问题 问问题 2013-03-06T16:19:13.653 6942 次 This question shows research effort; it is useful and clear 8 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Does anybody know how to attach custom XmlAdapter to objects contained in heterogenous list (like List)? For example - suppose we have a container class with a list of miscelaneous objects: @XmlRootElement(name = "container") public class Container { private List values = new ArrayList(); @XmlElement(name = "value") public List getValues() { return values; } public void setValues(List values) { this.values = values; } } If we put String-s, Integer-s and so on they will be mapped by default. Now suppose we want to put a custom object: public class MyObject { //some properties go here } The obvious solution is to write a custom adapter: public class MyObjectAdapter extends XmlAdapter <string, myobject="">{ //marshalling/unmarshalling } But unfortunately it doesn't work with package-level @XmlJavaTypeAdapter - adapter just never called so marhalling fails. And I can't apply it to getValues() directly because there can be other types of objects. @XmlJavaTypeAdapter only works if I have a field of MyObject type in Container (also with package-level annotaton): public class Container { private MyObject myObject; } But this is not what I want - I want a list of arbitrary objects. I'm using standard Sun's JAXB implementation: <dependency><groupid>com.sun.xml.bind</groupid> <artifactid>jaxb-impl</artifactid> <version>2.2.3-1</version></dependency> Any ideas how to do the mapping? P.S.: One small clarification - I'd like to avoid annotating MyObject with JAXB annotations. It may be a class from third-party library which is not under my control. So any changes should be outside of MyObject. Copy a non-shared file on a local network with a windows command I'm using Windows 8. How can I copy a non-shared file from another pc on my home network (another IP)? This command can copy files, but only shared files: copy \\{ip address}\Downloads\example C:\example_folder copy (where and what) to (here) I'd like something like this. But I don't know how can I copy a non-shared File? Is there a simple windows command I can run to do this? javajaxbjaxb2 4 1 回答 1 This answer is useful 1 您可以尝试更改您的MyObjectAdapter以便扩展XmlAdapter<string, list<object="">>。所以它应该看起来像这样： public class MyObjectAdapter extends XmlAdapter<string, list<object="">> { //marshalling/unmarshalling } 当您还向Container类中的 getter 添加 XmlJavaTypeAdapter 注释时，它应该可以工作。 @XmlRootElement(name = "container") public class Container { private ArrayList values = new ArrayList(); @XmlElement(name = "value") @XmlJavaTypeAdapter(MyObjectAdapter.class) public ArrayList getValues() { return values; } public void setValues(ArrayList values) { this.values = values; } } 于 2013-12-05T14:28:30.073 回答 Related 1 asp.net-mvc - 如何为 ApiControllers 返回多个对象类型 2 android - 由于切换案例方法而强制关闭？ 2 database - CodeIgniter 分离数据库 1 c# - ODP.Net 和 C# 的 System.Reflection.RuntimeModule.GetTypes() 错误 1 cakephp - CakePhp ACL 检查在应用程序中失败，但在蛋糕控制台中失败 2 nhibernate - 将联合子类与 NHibernate 一起使用时，是否必须为抽象和无表基类指定表？ 1 java - HornetQ Embedded：我可以为动态地址设置分页选项吗？ 1 c# - 在 Windows Azure 中部署 Unity3D 3 jquery - Wordpress AJAX 解析网址 1 iphone - iPhone 用户联系信息 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15252578
> 
> 赞同：8
> 
> 时间：
> 
> 标签：java, jaxb, jaxb2

Does anybody know how to attach custom `XmlAdapter` to objects contained in heterogenous list (like List)? For example - suppose we have a container class with a list of miscelaneous objects:

```
@XmlRootElement(name = "container")
public class Container {
    private List<Object> values = new ArrayList<Object>();

    @XmlElement(name = "value")
    public List<Object> getValues() {
        return values;
    }

    public void setValues(List<Object> values) {
        this.values = values;
    }   
} 
```

If we put `String`-s, `Integer`-s and so on they will be mapped by default. Now suppose we want to put a custom object:

```
public class MyObject {
    //some properties go here   
} 
```

The obvious solution is to write a custom adapter:

```
public class MyObjectAdapter extends XmlAdapter<String, MyObject> {
    //marshalling/unmarshalling
} 
```

But unfortunately it doesn't work with package-level `@XmlJavaTypeAdapter` - adapter just never called so marhalling fails. And I can't apply it to `getValues()` directly because there can be other types of objects. `@XmlJavaTypeAdapter` only works if I have a field of MyObject type in Container (also with package-level annotaton):

```
public class Container {
    private MyObject myObject;
} 
```

But this is not what I want - I want a list of arbitrary objects. I'm using standard Sun's JAXB implementation:

```
<dependency>
    <groupId>com.sun.xml.bind</groupId>
    <artifactId>jaxb-impl</artifactId>
    <version>2.2.3-1</version>
</dependency> 
```

Any ideas how to do the mapping?

P.S.: One small clarification - I'd like to avoid annotating `MyObject` with JAXB annotations. It may be a class from third-party library which is not under my control. So any changes should be outside of `MyObject`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T14:28:30.073

您可以尝试更改您的`MyObjectAdapter`以便扩展`XmlAdapter<String, List<Object>>`。所以它应该看起来像这样：

```
public class MyObjectAdapter extends XmlAdapter<String, List<Object>> {
    //marshalling/unmarshalling
} 
```

当您还向`Container`类中的 getter 添加 XmlJavaTypeAdapter 注释时，它应该可以工作。

```
@XmlRootElement(name = "container")
public class Container {
    private ArrayList<Object> values = new ArrayList<Object>();

    @XmlElement(name = "value")
    @XmlJavaTypeAdapter(MyObjectAdapter.class)
    public ArrayList<Object> getValues() {
        return values;
    }

    public void setValues(ArrayList<Object> values) {
        this.values = values;
    }   
} 
```</string,></string,></string,>

# c# - 添加现有注释层

> ID：15252582
> 
> 赞同：0
> 
> 时间：2013-03-06T16:19:22.620
> 
> 标签：c#, annotations, layer, arcgis

我的程序的目的是遍历给定目录中的每个 .mxd 文件，删除它们旧的和损坏的注记图层，并为特定的要素类添加新的注记图层。地理数据库中的旧注记源按要素类类型组合成一个注记文件。（所以不要使用 bAnno1、b​​Anno2...而是 bAnnos。这样可以节省空间并减少 ArcGIS 编辑时间。）

我的问题是创建新的注释图层。我的原始代码是这样的（只在循环外创建前五个变量）：

```
IMapDocument mapdoc = new MapDocumentClass();
IWorkspaceFactory iwf = new FileGDBWorkspaceFactoryClass();
IFeatureWorkspace workspace = (IFeatureWorkspace)iwf.OpenFromFile(path, 0);
IFeatureDataset dataset = workspace.OpenFeatureDataset(datasetName);
IFeatureClassContainer container = (IFeatureClassContainer)dataset;

// Here is where it enters the loop for .mxd files

IMap pMap = mapdoc.get_Map(0);

// Here it removes old annotation layers first

IFeatureLayer newlayer = new FeatureLayerClass();
newlayer.DataSourceType = "File Geodatabase Feature Class";
newlayer.Name = "Anno Name";
newlayer.FeatureClass = container.get_ClassByName(annoName);
pMap.AddLayer((ILayer)newlayer); 
```

添加的图层与除符号系统之外的所有内容中的原始注记图层相匹配。换句话说，ArcGIS 将这些添加的文件视为多边形的要素类，而不是带有单词的注记类。查看我的代码，我可以明白为什么。

那么如何让它成为一个专门的注释层呢？或者如何使用地理数据库数据集中的现有源制作注记图层？

失败的尝试包括使用：

```
AnnotationFeatureClass tempLayer = new AnnotationFeatureClass();
IAnnoClass newlayer = (IAnnoClass)tempLayer; 
```

和

```
IAnnotationLayerFactory annofactory = new FDOGraphicsLayerFactoryClass();
IAnnotationLayer annoLayer = annofactory.CreateAnnotationLayer(...); 
```

上述方法之一实际上可能是答案；我可能做错事了。

其他详细信息：使用 ArcGIS 10，使用由 ArcGIS 9.3 和 10 制作的 .mxd 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:59:54.183

我找到了答案。

我有这个的地方：

```
IFeatureLayer newlayer = new FeatureLayerClass(); 
```

它必须是这样的：

```
ILayer nlayer = (ILayer)(new FDOGraphicsLayer());
IFeatureLayer newlayer = (IFeatureLayer)nlayer; 
```

不幸的是，在我做了一个深度复制预先存在的注释类并编辑源代码的解决方法后，我发现了这一点。所以还有另一种方法，如果有人对拼凑感兴趣。

# windows - 使用 windows 命令复制本地网络上的非共享文件

> ID：15252586
> 
> 赞同：0
> 
> 时间：2013-03-06T16:19:30.823
> 
> 标签：windows, copy, command, shared

我正在使用 Windows 8。

如何从家庭网络（另一个 IP）上的另一台电脑复制非共享文件？

此命令可以复制文件，但只能复制共享文件：

```
copy \\{ip address}\Downloads\example C:\example_folder
copy (where and what) to (here) 
```

我想要这样的东西。但我不知道如何复制非共享文件？我可以运行一个简单的 Windows 命令来执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:37:02.243

您可以尝试先映射驱动器，然后进行复制，然后删除映射。例如

```
net use x: \\computer name\share name  
copy x:\Downloads\example C:\example_folder
....

net use x: /delete 
```

`x:`本地映射到的驱动器号在哪里。

如果您没有共享名称，您可以使用 c$ 格式的驱动器号作为远程计算机上的 c: 驱动器或 d$ 用于 d: 例如

```
net use x: \\computer name\c$ 
```

您可能需要登录远程计算机。如果这样做，请执行以下操作。

```
net use x: \\computer-name\share-name password /user:username 
```

由于我在我的 Linux 机器上，所以目前无法对此进行测试，但可以作为指南试一试。

有关映射驱动器的更多详细信息，请参阅[http://support.microsoft.com/kb/308582](http://support.microsoft.com/kb/308582)

# ruby-on-rails-3 - 如何从关联复选框列表中创建对象数组？

> ID：15252587
> 
> 赞同：0
> 
> 时间：2013-03-06T16:19:32.243
> 
> 标签：ruby-on-rails-3, model-view-controller, routing, checkbox

首先，我已经进行了大量的环顾四周，虽然问题得到了答案，但我有一个我认为有些独特的问题。我有一个使用以下代码生成的复选框列表：

```
<% for student in Student.find(:all) %>
    <div>
    <%= check_box_tag "user[student_ids][]", student.id, current_user.students.include    (student) %>
    <%= student.name %>
    </div>
<% end %> 
```

单击底部的“更新”按钮后，我需要将每个选中的框放入一个数组中。然后我计划遍历数组并对每个检查的名称做一些工作。但是，在将这些名称全部放入数组的过程中，我遇到了困难。我真的不确定这种工作应该是哪些标准的网络操作（即发布、获取等），所以我不知道如何设置路由。即使我可以设置到控制器的路由，我如何将检查的学生放入一组学生对象中？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:39:21.863

您的问题的完整答案取决于多种因素，例如，您尝试对提交的数组执行什么操作等（这将决定是否应该使用 POST、GET、PUT 或 DELETE。）在不了解更多信息的情况下就您的代码库而言，如果您将以下代码放入控制器已经安静的路由之一中的 form_for 中，您应该能够看到已检查名称的数组：

```
<%= current_user.students.include(student).each do |student| %>
    <div>
        <%= check_box_tag "student_names[]", student.name %> <%= label_tag student.name %>
    </div>
<% end %> 
```

然后，当用户点击提交时，参数哈希将显示 student_names = []。

并确保您的属性可根据需要访问。

在旁注中，请查看上周的 Railscasts 专业集。几乎完全解释了你想要做什么。不过，这是一项订阅服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:42:19.270

我设法以一种不太令人满意的方式解决了我的问题。这是我最终使用的代码：

```
current_user.students.delete_all
  if(params.has_key? :user)
     params[:user][:student_ids].each do |i|
        current_user.students<<(Student.find(i))
     end
  end 
```

因为我管理的学生人数从未超过 100，所以这个操作并不像看起来那么糟糕。我正在删除所有已经存在的关联，然后循环遍历所有传递的参数。然后，我找到带有传递参数 id 的学生对象，并将其添加到 current_user 的 User-Student 连接表中。

我希望这可以帮助某人！

# spring - 处理将用户名作为 url 一部分的 url 模式

> ID：15252588
> 
> 赞同：2
> 
> 时间：2013-03-06T16:19:33.473
> 
> 标签：spring, spring-mvc, url-rewriting

假设我有 3 个 url 模式需要 Spring MVC 处理，如下所示：

1) www.example.com/login（到登录页面）

2）www.example.com/home（到我的主页）

3) www.example.com/john（到用户主页）

我想知道处理将用户名作为 url 一部分的 url 模式的最佳实践方法是什么（现实世界的例子是 facebook fanpage www.faceboo.com/{fanpage-name}）

我想出了自己的解决方案，但不确定这是否是干净的方法或可能的方法。

在我的方法中，我需要在将请求传递给 Spring MVC 的 dispatchservlet 之前拦截请求，然后查询数据库以将用户名转换为用户 ID，并将请求 URI 更改为 Spring MVC 可以识别的模式，例如 www.example/user/userId= 45\. 但我不确定这是否可行，因为 ServletAPI 没有 requestURI 的 setter 方法（它确实有 requestURI 的 getter 方法）

或者如果您有更好的解决方案，请与我分享。预先感谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:24:46.627

Spring MVC 应该能够使用 PathVariables 处理这个问题。

一个处理程序用于 /login，一个处理程序用于 /home，一个处理程序用于 /{userName}。在用户名处理程序中，您可以进行查找以获取用户。像这样的东西：

```
@RequestMapping(value="/login", method=RequestMethod.GET)
public String getLoginPage() {
    // Assuming your view resolver will resolve this to your jsp or whatever view
    return "login";
}

@RequestMapping(value="/home", method=RequestMethod.GET)
public String getHomePage() {
    return "home";
}

@RequestMapping(value="/{userName}", method=RequestMethod.GET)
public ModelAndView getUserPage( @PathVariable() String userName ) {
    // do stuff here to look up the user and populate the model
    // return the Model and View with the view pointing to your user page
} 
```

# android - 显示的 Android webview 段错误

> ID：15252590
> 
> 赞同：4
> 
> 时间：2013-03-06T16:19:38.400
> 
> 标签：android, android-webview

我在片段中有一个 webview。几个月来一直运行良好。我在玩嵌入其中的 HTML（生成的字符串），我认为它的字体参考不好。

结果是，现在在一台设备上，此 web视图在显示时*总是*出现段错误 - 但仅在我正在测试的一台设备（Galaxy Nexus）上 - 在其他设备上测试一切正常。它在 viewpager 的后台加载，所以我知道它可以正确初始化，但是当它显示时，它总是会在此设备上对应用程序进行分段错误。

所以*看起来*某处有一些缓存数据没有被清除。我不明白为什么相同的 apk 可以在所有其他设备上运行（所有 android 版本 - 但只在这台设备上崩溃。

我试图清除缓存使用

```
_web.clearCache(true);
webSettings.setCacheMode(WebSettings.LOAD_NO_CACHE); 
```

但没有区别。还有其他可以清除的缓存吗？我已经重新启动了手机 - 没有区别。

寻找有关如何解决此错误的任何想法 - 无论多么疯狂！

这是段错误-看起来与OpenGL相关--webview是否使用opengl作为字体？- webview 有字体缓存吗？

```
D/TilesManager( 5776): new EGLContext from framework: 50c5df28 
D/GLWebViewState( 5776): Reinit shader
W/webcore ( 5776): skip viewSizeChanged as w is 0
D/GLWebViewState( 5776): Reinit transferQueue
D/MyPodV2 ( 5776): load page:0 - 0.0
D/MyPodV2 ( 5776): load page:720 - 100.0
F/libc    ( 5776): Fatal signal 11 (SIGSEGV) at 0x00000008 (code=1), thread 5776 (nelweb.mypod.v2)
I/DEBUG   (  121): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (  121): Build fingerprint: 'samsung/yakjuxw/maguro:4.1.1/JRO03C/I9250XWLH2:user/release-keys'
I/DEBUG   (  121): pid: 5776, tid: 5776, name: nelweb.mypod.v2  >>> co.uk.sentinelweb.mypod.v2 <<<
I/DEBUG   (  121): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000008
I/DEBUG   (  121):     r0 00000008  r1 585b7008  r2 00000010  r3 00000004
I/DEBUG   (  121):     r4 56dbdb90  r5 56dbe9c0  r6 00000001  r7 00000004
I/DEBUG   (  121):     r8 00000008  r9 00000001  sl 00000004  fp 00000001
I/DEBUG   (  121):     ip 00000001  sp beac4180  lr 5863688c  pc 5865f774  cpsr 80000010
I/DEBUG   (  121):     d0  000000003e8374f1  d1  0000000000000000
I/DEBUG   (  121):     d2  3e8374f100000000  d3  0000000000000000
I/DEBUG   (  121):     d4  0000000000000000  d5  000000003f800000
I/DEBUG   (  121):     d6  426d42bcc1248268  d7  3f80000000000000
I/DEBUG   (  121):     d8  4411c6fc438013e9  d9  4507000000000000
I/DEBUG   (  121):     d10 43e72bda4481c000  d11 43e670f943e670f9
I/DEBUG   (  121):     d12 43e670f943e670f9  d13 bfa2695643f6cead
I/DEBUG   (  121):     d14 00000000bd134ab6  d15 0000000000000000
I/DEBUG   (  121):     d16 0000000800000000  d17 0000000000000000
I/DEBUG   (  121):     d18 0000000000000000  d19 0000000000000000
I/DEBUG   (  121):     d20 3ff0000000000000  d21 0000000000000000
I/DEBUG   (  121):     d22 0000000000000000  d23 0000000000000000
I/DEBUG   (  121):     d24 0000000000000000  d25 0000000000000000
I/DEBUG   (  121):     d26 0000000000000000  d27 0000000000000000
I/DEBUG   (  121):     d28 0000000000000000  d29 0000000000000000
I/DEBUG   (  121):     d30 0000000000000000  d31 0000000000000000
I/DEBUG   (  121):     scr 20000013
I/DEBUG   (  121): 
I/DEBUG   (  121): backtrace:
I/DEBUG   (  121):     #00  pc 00034774  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
I/DEBUG   (  121):     #01  pc 0000b888  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
I/DEBUG   (  121): 
I/DEBUG   (  121): stack:
I/DEBUG   (  121):          beac4140  03d00000  
I/DEBUG   (  121):          beac4144  00000000  
I/DEBUG   (  121):          beac4148  5c7b3dd0  
I/DEBUG   (  121):          beac414c  586d79f8  
I/DEBUG   (  121):          beac4150  56dbea6c  
I/DEBUG   (  121):          beac4154  585b6c7c  /dev/pvrsrvkm
I/DEBUG   (  121):          beac4158  00000002  
I/DEBUG   (  121):          beac415c  00000004  
I/DEBUG   (  121):          beac4160  56dbea6c  
I/DEBUG   (  121):          beac4164  56dbdb90  
I/DEBUG   (  121):          beac4168  56dbe9bc  
I/DEBUG   (  121):          beac416c  00000000  
I/DEBUG   (  121):          beac4170  00000004  
I/DEBUG   (  121):          beac4174  00000023  
I/DEBUG   (  121):          beac4178  df0027ad  
I/DEBUG   (  121):          beac417c  00000000  
I/DEBUG   (  121):     #00  beac4180  56dbdb90  
I/DEBUG   (  121):          ........  ........
I/DEBUG   (  121):     #01  beac4180  56dbdb90  
I/DEBUG   (  121):          beac4184  5863688c  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
I/DEBUG   (  121):          beac4188  56dbdb90  
I/DEBUG   (  121):          beac418c  00000004  
I/DEBUG   (  121):          beac4190  00000004  
I/DEBUG   (  121):          beac4194  00000000  
I/DEBUG   (  121):          beac4198  00000005  
I/DEBUG   (  121):          beac419c  5863898c  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
I/DEBUG   (  121):          beac41a0  56dbdb90  
I/DEBUG   (  121):          beac41a4  00000004  
I/DEBUG   (  121):          beac41a8  00000000  
I/DEBUG   (  121):          beac41ac  5868606c  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
I/DEBUG   (  121):          beac41b0  00000005  
I/DEBUG   (  121):          beac41b4  58639a70  /system/vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so (glDrawArrays+804)
I/DEBUG   (  121):          beac41b8  00000004  
I/DEBUG   (  121):          beac41bc  00000000  
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near r1:
I/DEBUG   (  121):     585b6fe8 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121):     585b6ff8 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121):     585b7008 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121):     585b7018 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121):     585b7028 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near r4:
I/DEBUG   (  121):     56dbdb70 10000298 58ec5138 5dc1229f 00000298  ....8Q.X.".]....
I/DEBUG   (  121):     56dbdb80 58ca335c 5dbf356f 00000000 00000f9b  \3.Xo5.]........
I/DEBUG   (  121):     56dbdb90 00000018 0000e7fd 00001c80 00001100  ................
I/DEBUG   (  121):     56dbdba0 00001100 00000024 000003aa 00000064  ....$.......d...
I/DEBUG   (  121):     56dbdbb0 00000064 00000064 00000064 00000004  d...d...d.......
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near r5:
I/DEBUG   (  121):     56dbe9a0 00000000 00000000 00000000 00000000  ................
I/DEBUG   (  121):     56dbe9b0 00000000 00000000 56dbe794 56dbe83c  ...........V<..V
I/DEBUG   (  121):     56dbe9c0 56dbe86c 00000000 00000000 00000000  l..V............
I/DEBUG   (  121):     56dbe9d0 00000000 00000000 00000000 00000000  ................
I/DEBUG   (  121):     56dbe9e0 00000002 00000003 00000003 00000004  ................
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near sp:
I/DEBUG   (  121):     beac4160 56dbea6c 56dbdb90 56dbe9bc 00000000  l..V...V...V....
I/DEBUG   (  121):     beac4170 00000004 00000023 df0027ad 00000000  ....#....'......
I/DEBUG   (  121):     beac4180 56dbdb90 5863688c 56dbdb90 00000004  ...V.hcX...V....
I/DEBUG   (  121):     beac4190 00000004 00000000 00000005 5863898c  ..............cX
I/DEBUG   (  121):     beac41a0 56dbdb90 00000004 00000000 5868606c  ...V........l`hX
I/DEBUG   (  121): 
I/DEBUG   (  121): code around pc:
I/DEBUG   (  121):     5865f754 e781410c e28cc001 e15c0003 3afffffa  .A........\....:
I/DEBUG   (  121):     5865f764 e8bd8010 e92d4010 e3a0c000 ea000004  .....@-.........
I/DEBUG   (  121):     5865f774 e5904000 e5014008 e5904004 e0800002  .@...@...@......
I/DEBUG   (  121):     5865f784 e5014004 e15c0003 e2811008 e28cc001  .@....\.........
I/DEBUG   (  121):     5865f794 3afffff6 e8bd8010 e92d4010 e3a0c000  ...:.....@-.....
I/DEBUG   (  121): 
I/DEBUG   (  121): code around lr:
I/DEBUG   (  121):     5863686c e3530000 1a000005 e1a03007 e59c0018  ..S......0......
I/DEBUG   (  121):     5863687c e59c101c e59c2014 e1a0e00f e59cf024  ..... ......$...
I/DEBUG   (  121):     5863688c e2866001 e2855004 e5942e50 e3a03001  .`...P..P....0..
I/DEBUG   (  121):     5863689c e1560002 3affffeb e2840eed e1a01008  ..V....:........
I/DEBUG   (  121):     586368ac e280000c e1a02003 e8bd41f0 eaffe178  ..... ...A..x...
I/BootReceiver(  316): Copying /data/tombstones/tombstone_02 to DropBox (SYSTEM_TOMBSTONE) 
```

更新 10/03/13：这是我用来停止缓存的代码 - 显然我有点绝望。

```
_web.clearCache(true);
        _web.setAnimationCacheEnabled(false);
        _web.setDrawingCacheEnabled(false);
        _web.setAlwaysDrawnWithCacheEnabled(false);
        _web.clearHistory();
        _web.clearFormData();
        webSettings.setJavaScriptEnabled(false);
        webSettings.setCacheMode(WebSettings.LOAD_NO_CACHE);
        webSettings.setAppCacheMaxSize(0);
        webSettings.setAppCachePath("");
        webSettings.setAppCacheEnabled(false);
        getActivity().deleteDatabase("webview.db");
        getActivity().deleteDatabase("webviewCache.db");
        webSettings.setDomStorageEnabled(false);
        webSettings.setLoadsImagesAutomatically(false);
        _web.setWillNotCacheDrawing(true);
        webSettings.setBuiltInZoomControls(false);
        webSettings.setSupportZoom(false);
        webSettings.setSaveFormData(false);
        //_web.setWillNotDraw(true);// loads but stops drawing
        webSettings.setRenderPriority(WebSettings.RenderPriority.LOW); 
```

有趣的是 _web.setWillNotDraw(true); 停止段错误但不绘制任何东西（这是合乎逻辑的），因此向我表明段错误必须在 web 视图中。绘图代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:10:53.173

Webview 缓存是特定于应用程序的，因此如果它是您描述的临时问题，则卸载并重新安装该应用程序应该可以解决此问题。

有关更多详细信息，缓存位于：

`/data/data/your.package.name/cache/`

您可以看一下，但随后我们会进入您是否可以访问的领域。

如果您的应用程序是为调试而构建的，那么此 adb 命令可以让您查看目录内容：

`run-as your.package.name ls /data/data/your.package.name/cache/`

在我的 Galaxy S3 上，相关文件称为“webviewCacheChromiumStaging”和“com.android.renderscript.cache”，因此您的结果可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T11:16:29.697

我用来防止使用缓存的设置：

```
 _web.clearCache(true);
 _web.setAppCacheEnabled(false);
 webSettings.setCacheMode(WebSettings.LOAD_NO_CACHE);
 webSettings.setAppCacheMaxSize(0);
 webSettings.setAppCacheEnabled(false);
 mContext.deleteDatabase("webview.db");
 mContext.deleteDatabase("webviewCache.db"); 
```

另外，看看：[this one](https://stackoverflow.com/questions/2465432/android-webview-completely-clear-the-cache) or [this one](https://stackoverflow.com/a/4799448/2092892)。

# asp.net - Cache in ServiceStack web services

> ID：15252592
> 
> 赞同：1
> 
> 时间：2013-03-06T16:19:46.277
> 
> 标签：asp.net, caching, servicestack

I am new to caching and trying to understand how it works in general. Below is code snippet from [ServiceStack](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/ServiceStack.Northwind/ServiceStack.Northwind.ServiceInterface/CachedServices.cs) website.

```
public object Get(CachedCustomers request)
{
    //Manually create the Unified Resource Name "urn:customers".
    return base.RequestContext.ToOptimizedResultUsingCache(base.Cache, "urn:customers", () =>
    {
         //Resolve the service in order to get the customers.
         using (var service = this.ResolveService<CustomersService>())
                return service.Get(new Customers());
     });
}

public object Get(CachedCustomerDetails request)
{
    //Create the Unified Resource Name "urn:customerdetails:{id}".
    var cacheKey = UrnId.Create<CustomerDetails>(request.Id);
    return base.RequestContext.ToOptimizedResultUsingCache(base.Cache, cacheKey, () =>
    {
        using (var service = this.ResolveService<CustomerDetailsService>())
        {
             return service.Get(new CustomerDetails { Id = request.Id });
        }
    });
} 
```

My doubts are:

1.  I've read that cached data is stored in RAM on same/distributed server. So, how much data can it handle, suppose in first method if customers count is more than 1 million, doesn't it occupy too much memory.

2.  In general case, do we apply caching only for GET operations and invalidate if it gets UPDATE'd.

3.  Please suggest any tool to check memory consumption of caching.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:09:29.337

我想你可以在这里找到问题的答案 - [https://github.com/ServiceStack/ServiceStack/wiki/Caching](https://github.com/ServiceStack/ServiceStack/wiki/Caching)

**我读过缓存数据存储在同一/分布式服务器上的 RAM 中......**

有几种方法可以“持久化”缓存数据。同样，请参见此处 - [https://github.com/ServiceStack/ServiceStack/wiki/Caching](https://github.com/ServiceStack/ServiceStack/wiki/Caching)。'InMemory' 是您似乎质疑的选项。其他选项对 RAM 的影响不同。

**在一般情况下，我们是否仅对 GET 操作应用缓存，如果它被更新则无效。**

在 ServiceStack 中，您可以手动清除/使缓存无效或设置基于时间的过期时间。如果您手动清除缓存，我建议您在 DELETES 和 UPDATES 上这样做。您可以自由选择如何管理/使缓存无效。您只是想避免缓存中有陈旧的数据。至于“应用缓存”，您将在 GET 操作中返回缓存数据，但您的系统可以像访问任何其他数据存储一样访问缓存数据。同样，您只需要识别缓存我没有最新的数据集。

# c# - Using the C# NHunspell how do I check words?

> ID：15252596
> 
> 赞同：6
> 
> 时间：2013-03-06T16:19:55.233
> 
> 标签：c#, spell-checking, hunspell, nhunspell

Using the C# NHunspell, how do I check if a word is spelled correctly and if not what the correct spelling is?

I've imported the NHunspell.dll into the project. And have looked at [the documentation](http://www.maierhofer.de/en/documentation/nhunspell/index.html).

But being a bit new at reading documentation it's hard to know where to start. Can someone provide an example on how to check if a word is spelled correctly? Basically I need a Helloworld for NHunspell.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T17:56:39.000

```
using (Hunspell hunspell = new Hunspell("en_us.aff", "en_us.dic"))
{
    Console.WriteLine("Hunspell - Spell Checking Functions");
    Console.WriteLine("¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯");

    Console.WriteLine("Check if the word 'Recommendation' is spelled correct"); 
    bool correct = hunspell.Spell("Recommendation");
    Console.WriteLine("Recommendation is spelled " + 
       (correct ? "correct":"not correct"));

    Console.WriteLine("");
    Console.WriteLine("Make suggestions for the word 'Recommendatio'");
    List<string> suggestions = hunspell.Suggest("Recommendatio");
    Console.WriteLine("There are " + 
       suggestions.Count.ToString() + " suggestions" );
    foreach (string suggestion in suggestions)
    {
        Console.WriteLine("Suggestion is: " + suggestion );
    }
} 
```

来自文章[http://www.codeproject.com/Articles/43495/Spell-Check-Hyphenation-and-Thesaurus-for-NET-with](http://www.codeproject.com/Articles/43495/Spell-Check-Hyphenation-and-Thesaurus-for-NET-with)

# html - 如何在 HTML 文本下添加虚线下划线

> ID：15252597
> 
> 赞同：111
> 
> 时间：2013-03-06T16:19:56.403
> 
> 标签：html, underline

您如何为 html 文本添加下划线，以便文本下方的线是虚线而不是标准下划线？最好，我想在不使用单独的 CSS 文件的情况下执行此操作。我是 html 的新手。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-03-06T16:24:46.457

没有 CSS 是不可能的。事实上，`<u>`标签只是`text-decoration:underline`用浏览器内置的 CSS 添加到文本中。

以下是您可以执行的操作：

```
<html>
<head>
<!-- Other head stuff here, like title or meta -->

<style type="text/css">
u {    
    border-bottom: 1px dotted #000;
    text-decoration: none;
}
</style>
</head>
<!-- Body, content here -->
</html> 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2016-07-13T07:53:07.500

使用以下 CSS 代码...

```
text-decoration:underline;
text-decoration-style: dotted; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-06T16:25:55.563

如果没有 CSS，您基本上只能使用图像标签。基本上制作文本的图像并添加下划线。这基本上意味着您的页面对屏幕阅读器毫无用处。

使用 CSS，这很简单。

**HTML：**

```
<u class="dotted">I like cheese</u> 
```

**CSS：**

```
u.dotted{
  border-bottom: 1px dashed #999;
  text-decoration: none; 
} 
```

[运行示例](http://jsfiddle.net/3zngs/)

**示例页面**

```
<!DOCTYPE HTML>
<html>
<head>
    <style>
        u.dotted{
          border-bottom: 1px dashed #999;
          text-decoration: none; 
        }
    </style>
</head>
<body>
    <u class="dotted">I like cheese</u>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-07-11T14:14:27.207

HTML5 元素可以给出虚线下划线，因此下面的文本将有虚线而不是常规下划线。当用户将光标悬停在元素上时，title 属性会为用户创建一个工具提示：

**注意：**虚线边框/下划线在 Firefox 和 Opera 中默认显示，但 IE8、Safari 和 Chrome 需要一行 CSS：

```
<abbr title="Hyper Text Markup Language">HTML</abbr> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-09T10:12:40.443

如果内容超过 1 行，添加底部边框将无济于事。在这种情况下，您将不得不使用，

```
text-decoration: underline;
text-decoration-style: dotted; 
```

如果您想在文本和行之间有更多的呼吸空间，只需使用，

```
text-underline-position: under; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-12-26T06:54:30.147

**@epascarello**重新格式化了答案：

```
u.dotted {
  border-bottom: 1px dashed #999;
  text-decoration: none;
}
```

```
<!DOCTYPE html>
<u class="dotted">I like cheese</u>
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-07-07T14:20:45.177

也许我有点晚了，但只需使用`text-decoration: underline dotted`，它是一个可以在任何地方使用的单一 CSS 属性。

### 内联 HTML

```
<u style="text-decoration:underline dotted">I have a dotted underline</u>
```

对于虚线下划线，使用`text-decoration: underline dashed`.

```
<u style="text-decoration:underline dashed">I have a dashed underline</u>
```

正如 Darshana Gunawardana 所说，您可以使用[`text-underline-position: under`](https://drafts.csswg.org/css-text-decor/#underline-under), 在文本和行之间留出更多空间：

```
<u style="text-decoration:underline dotted;text-underline-position:under">I have a dotted underline</u>
```

### 在单独的 CSS 文件中

```
u {
  text-decoration: underline dotted;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-02-05T00:12:14.140

你可以试试这个方法：

```
<h2 style="text-decoration: underline; text-underline-position: under; text-decoration-style: dotted">Hello World!</h2> 
```

请注意，没有`text-underline-position: under;`你仍然会有一个虚线下划线，但这个属性会给它更多的喘息空间。

这是假设您希望使用内联样式将所有内容嵌入到 HTML 文件中，而不是使用单独的 CSS 文件或标签。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-10-02T01:23:33.290

您可以使用以下`text-decoration`属性：

```
 text-decoration: underline;
    text-decoration-style: dotted;
    text-decoration-line: underline;
    text-decoration-thickness: 1px; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-24T07:16:24.013

您可以使用带有`dotted`选项的边框底部。

```
border-bottom: 1px dotted #807f80; 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-04-30T09:03:55.750

没有 CSS 也不是不可能。例如作为列表项：

```
<li style="border-bottom: 1px dashed"><!--content --></li> 
```

# ios - iPad sometimes does not use front cam

> ID：15252600
> 
> 赞同：1
> 
> 时间：2013-03-06T16:20:09.913
> 
> 标签：ios, ipad, camera, uiimagepickercontroller

In my application, I have to use the front cam of the ipad and I have to take pics using front cam. I am automatically taking photos using the method `[self.imagePickerController takePicture];` there is a count down and after the count down, the app automatically takes a picture. A user can take multiple pictures. When a user takes the first photo the app uses the front cam, but when the user takes the 2nd photo the application is using back cam and I only want to use the front cam. Please help. my code is given below:

```
- (IBAction)btnTakePic:(id)sender;
{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {

        //[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];

        //Set Notifications so that when user rotates phone, the orientation is reset to landscape.
        [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

        imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;

        imagePickerController.delegate = self;
        imagePickerController.showsCameraControls = NO;

        imagePickerController.cameraDevice= UIImagePickerControllerCameraDeviceFront;

        [imagePickerController setWantsFullScreenLayout:YES];

        [self presentModalViewController:imagePickerController animated:YES];
    }

    [NSTimer scheduledTimerWithTimeInterval:3.0
                                     target:self
                                   selector: @selector(targetMethod)
                                   userInfo:nil
                                    repeats:NO];
}
- (void)targetMethod
{
    [self.imagePickerController takePicture];

} 
```

# c# - Including a Database file in build

> ID：15252602
> 
> 赞同：1
> 
> 时间：2013-03-06T16:20:10.647
> 
> 标签：c#, visual-studio-2010, xna

I have a game which uses a database to store some information. Is it possible to tell visual studio to include the datbase file with each build? Such that the `bin` folder will contain the application executable and the database. I know I can copy and paste the database each time but I want it to be automatic.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:26:32.027

您当然可以，在数据库中保持数据更新的一种方法是将 DataBase 的`Copy to output directory`属性更改为`Copy if newer`; [参考](http://social.msdn.microsoft.com/Forums/is/csharplanguage/thread/08738b94-1f93-429c-801f-2638d90dcbbc)

这取决于它是什么类型的数据库，但您也可以右键单击您的项目并选择`Add existing item`，导航到文件和 presto。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:22:39.727

有一种方法：将文件的 Copy to Output Directory 属性设置为`Copy Always`或`Copy if newer`。

# python - sh to py conversion

> ID：15252604
> 
> 赞同：1
> 
> 时间：2013-03-06T16:20:12.887
> 
> 标签：python, shell

I'm currently converting a shell script to python and I'm having a problem. The current script uses the results of the last ran command like so.

```
if [ $? -eq 0 ];
then
    testPassed=$TRUE
else
    testPassed=$FALSE
fi 
```

I have the if statement converted over just not sure about the $? part. As I am new to python I'm wondering if there is a similar way to do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:40:05.793

您应该为此查看`subprocess`模块。有一种[`check_call`](http://docs.python.org/2/library/subprocess.html#subprocess.check_call)方法可以查看退出代码（这是一种方法，还有其他方法）。正如手册中提到的：

> 运行带参数的命令。等待命令完成。如果返回码为零，则返回，否则引发 CalledProcessError。CalledProcessError 对象将在 returncode 属性中具有返回码

这方面的一个例子是：

```
import subprocess

command=["ls", "-l"]

try:
  exit_code=subprocess.check_call(command)
  # Do something for successful execution here
  print("Program run")
except subprocess.CalledProcessError as e:
  print "Program exited with exit code", e.returncode
  # Do something for error here 
```

这还将包括输出，您可以将其重定向到文件或像这样抑制：

```
import subprocess
import os

command=["ls", "-l"]

try:
  exit_code=subprocess.check_call(command, stdout=open(os.devnull, "w"))
  # Do something for successful execution here
  print("Program run")
except subprocess.CalledProcessError as e:
  print "Program exited with exit code", e.returncode
  # Do something for error here 
```

下面是一个带有非零退出代码的调用示例：

```
import subprocess
import os

command=["grep", "mystring", "/home/cwgem/testdir/test.txt"]

try:
  exit_code=subprocess.check_call(command, stdout=open(os.devnull, "w"))
  # Do something for successful execution here
  print("Program run")
except subprocess.CalledProcessError as e:
  print "Program exited with exit code", e.returncode
  # Do something for error here 
```

输出：

```
$ python process_exitcode_test.py
Program exited with exit code 1 
```

这被捕获为您可以如上所述处理的异常。请注意，这不会处理访问被拒绝或找不到文件等异常。您需要自己处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:20:18.770

您可能想要使用[sh 模块](http://amoffat.github.com/sh/#exit-codes)。它使 Python 中的 shell 脚本编写更加愉快：

```
import sh
try:
    output = sh.ls('/some/nen-existant/folder')
    testPassed = True
except ErrorReturnCode:
    testPassed = False 
```

# asp.net-mvc - Recaptcha giving 404 error on Validate in SSL site

> ID：15252608
> 
> 赞同：0
> 
> 时间：2013-03-06T16:20:18.913
> 
> 标签：asp.net-mvc, asp.net-mvc-4, html-helper, recaptcha

In my ASP.NET MVC 4 project, I am using the `Microsoft.Web.Helpers` (from the NuGet package) and my code is a very basic implementation of ReCaptcha. In my view I have:

```
@ReCaptcha.GetHtml(theme: "clean") 
```

In my controller I have:

```
Microsoft.Web.Helpers.ReCaptcha.Validate(); 
```

The complexity comes with the SSL implementation we are using.

I have added the appropriate settings to my web.config:

```
 <system.net>
    <defaultProxy>
      <proxy proxyaddress="http://***proxy script settings**" 
            autoDetect="False" 
            usesystemdefault="False" 
            bypassonlocal="True" />
    </defaultProxy>
  </system.net> 
```

There seems like there is nothing further I can do in terms of config, but I am getting the error message

> The remote server returned an error: (404) Not Found

when I hit the recaptcha validate method on the form post method in my controller.

Ive found a number of other answers on here but they all seem to suggest that you change the url, or upgrade. As Im using a NuGet package I would have thought I was using the latest version. Any ideas or links with more information greatly appreciated. Ive already done quite a bit of looking both on this site and google

**edit:**

I have found that earlier versions of firefox have trouble actually rendering the recapture box given our network conditions, but the latest one is fine. As the validation is done on the controller though, I suppose there is no issue here.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:58:53.360

在费了很多力气和普遍的困惑之后，我发现问题是到谷歌 API 的 POST（但不是 GET）被我们的公司防火墙阻止了。我以前打折过这个，因为我可以导航到 recaptcha 使用的服务 ( [http://www.google.com/recaptcha/api/verify](http://www.google.com/recaptcha/api/verify) )。

我通过为帖子构建一个包含必要部分的 HTML 页面并在浏览器中提交它来发现这一点。出现了公司“此页面被阻止” - 但是在代码中返回的错误是 404。该错误有些误导，但这是我们基础设施部门的奇怪行为。

# google-app-engine - 如何使数据存储键映射减少友好（-er）？

> ID：15252616
> 
> 赞同：5
> 
> 时间：2013-03-06T16:20:39.423
> 
> 标签：google-app-engine, python-2.7, mapreduce

编辑：见我的答案。问题出在我们的代码中。MR 工作正常，它可能有状态报告问题，但至少输入阅读器工作正常。

我现在进行了几次实验，现在我确信 mapreduce（或 DatastoreInputReader）有奇怪的行为。我怀疑这可能与键范围和拆分它们有关，但这只是我的猜测。

无论如何，这是我们的设置：

1.  我们有一个名为“AdGroup”的 NDB 模型，在创建此模型的新实体时 - 我们使用从 AdWords 返回的相同 id（它是一个整数），但我们将其用作字符串：`AdGroup(id=str(adgroupId))`
2.  我们的数据存储区中有 1,163,871 个这些实体（这是“数据存储区管理员”页面告诉我们的 - 我知道这不是完全准确的数字，但我们不会经常创建/删除广告组，所以我们可以肯定地说，数量为 110 万或更多）。
3.  mapreduce 是这样启动的（从另一个管道）：

    ```
    yield mapreduce_pipeline.MapreducePipeline(
        job_name='AdGroup-process',
        mapper_spec='process.adgroup_mapper',
        reducer_spec='process.adgroup_reducer',
        input_reader_spec='mapreduce.input_readers.DatastoreInputReader',
        mapper_params={
            'entity_kind': 'model.AdGroup',
            'shard_count': 120,
            'processing_rate': 500,
            'batch_size': 20,
        },
    ) 
    ```

因此，我今天尝试多次运行此 mapreduce，而不更改代码中的任何内容，也未更改数据存储区。每次我运行它时，mapper-calls 计数器的值都不同，范围从 450,000 到 550,000。

如果我错了，请纠正我，但考虑到我使用非常基本的 DatastoreInputReader - 映射器调用应该等于实体的数量。所以应该是110万或者更多。

注意：我首先注意到这个问题的原因是因为我们的营销人员开始抱怨“我们添加新的广告组已经 4 天了，它们仍然没有出现在您的应用中！”。

现在，我只能想到一种解决方法 - 将所有广告组的所有键写入 blobstore 文件（每行一个），然后使用 BlobstoreLineInputReader。当然，写入 blob 部分的方式必须不使用 DatastoreInputReader。我现在应该这样做，还是您能提出更好的建议？

注意：我也尝试过使用具有相同代码的 DatastoreKeyInputReader - 结果相似 - 映射器调用在 450,000 到 550,000 之间。

所以，最后提问。如何为实体生成 ID 重要吗？`int`使用id 代替id更好`str`吗？一般来说，我能做些什么来让 mapreduce 更容易找到映射它们的所有实体？

PS：我还在尝试这个，以后可能会添加更多细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:00:44.407

经过进一步调查，我们发现错误实际上是在我们的代码中。因此，mapreduce 实际上按预期工作（为每个数据存储实体调用映射器）。

我们的代码调用了一些*有时会*失败的谷歌服务函数（美妙的神秘 ApplicationError 消息）。由于这些故障，正在重试 MR 任务。但是，我们对任务队列的重试设置了限制。MR 没有以任何方式检测或报告这一点 - MR 在所有分片的状态页面中仍然显示“成功”。这就是为什么我们认为我们的代码一切正常，而输入阅读器有问题。

# php - phpwebsocket 不工作

> ID：15252618
> 
> 赞同：0
> 
> 时间：2013-03-06T16:20:41.823
> 
> 标签：php, javascript, shell, websocket, phpwebsocket

这是我使用的教程：

[http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/comment-page-1/#comments](http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/comment-page-1/#comments)

基本上我下载了源代码，将文件放在一个文件夹中：http: [//mmhudson.com/ws](http://mmhudson.com/ws)

server.php： http: [//mmhudson.com/ws/server.php](http://mmhudson.com/ws/server.php)

我根本无法连接。我尝试从命令行和浏览器运行 server.php，但两次都无法连接。ws 文件夹包含可下载源中的所有文件。

关于我可以尝试什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:57:48.063

我想我找到了解决方案。您正在打开与 的连接`localhost/127.0.0.1`。将代码放在服务器上后，您必须指定服务器 URL 而不是`localhost/127.0.0.1`客户端。我测试了server.php，它工作正常，只有客户端没有连接到它。

试试这个 index.html

```
Server = new FancyWebSocket('ws://mmhudson.com:9300'); 
```

# breeze - 微风与第三方 API

> ID：15252625
> 
> 赞同：1
> 
> 时间：2013-03-06T16:21:02.253
> 
> 标签：breeze

Breeze 是否可以访问没有“BreezeController”也不支持 OData 的第三方 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:02:53.993

“BreezeController”只是一个 .NET 属性，它帮助 .NET WebApi 通过 OData“语法”提供对查询过滤和排序的支持，以及对实体图和类型标识的 json 序列化支持。类型标识很重要，因此微风可以跟踪其 entityManager 中的实体并合并查询结果并更新关系属性。永远不需要 OData 本身。

如果您不希望客户端能够向服务器添加过滤和排序指令，您可以编写自己的属性来简单地提供 json 序列化支持。json 序列化只包括配置 web api 已经使用的 json.net 格式化程序。

BreezeControllerAttribute 的源代码可以在 Breeze.WebApi 项目中找到，并且非常短。只需通过复制“BreezeControllerAttribute”来创建您自己的“FooControllerAttribute”并删除 IFilterProvider 代码。

另一方面，查询和过滤支持不会有任何损害，除非您使用 EntityQuery 'where' 'orderBy' 'select' 或 'expand' 方法，否则甚至不会应用此逻辑，因此除非您想显式删除这种能力没有必要不使用'breezeControllerAttribute'

# bash - Bash：声明，为变量赋值并在循环中调用它

> ID：15252627
> 
> 赞同：0
> 
> 时间：2013-03-06T16:21:08.563
> 
> 标签：bash, variables, for-loop, ubuntu-12.04

我试图在运行用户定义次数的循环内声明、赋值和调用变量。我希望这些变量在循环后可用。我想做的是：

```
echo "HOW MANY ROUNDS OF TEST ITERATIONS WOULD YOU LIKE TO RUN?"
read round_nr
echo "Number of Iteration rounds set to: $round_nr!"

for r in $(seq 1 $round_nr); do
    echo "HOW MANY COLD TEST ITERATIONS DO YOU WANT IN ROUND $r?"
    read COLD$r
    echo "HOW MANY WARM TEST ITERATIONS DO YOU WANT IN ROUND $r?"
    read WARM$r
    echo "HOW MANY HOT TEST ITERATIONS DO YOU WANT IN ROUND $r?"
    read HOT$r
    echo "HOW MANY NR OF FIXES PER TEST ITERATION $r?"
    read NUMFIX$r
    echo "ITERATION $r INPUT VALUES: COLD/WARM/HOT/NUMFIX:"
    echo $COLD$r $WARM$r $HOT$r $NUMFIX$r
done 
```

这样，对于每个循环（在用户定义的一组 round_nr 循环中），将创建四个变量并分配用户输入值。我计划稍后使用这些变量。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:44:00.503

您确实可以使用`declare`，但使用数组会容易得多。（我在这里使用`-p`标志 for`read`来节省空间；你不需要使用它。）

```
for r in $(seq 1 $round_nr); do
    read -p "HOW MANY COLD TEST ITERATIONS DO YOU WANT IN ROUND $r?" ans
    declare "COLD$r=$ans"
    read -p "HOW MANY WARM TEST ITERATIONS DO YOU WANT IN ROUND $r?" ans
    declare "WARM$r=$ans"
    read -p "HOW MANY HOT TEST ITERATIONS DO YOU WANT IN ROUND $r?" ans
    declare "HOT$r=$ans"
    read -p "HOW MANY NR OF FIXES PER TEST ITERATION $r?" ans
    declare "NUMFIX$r=$ans"
    echo "ITERATION $r INPUT VALUES: COLD/WARM/HOT/NUMFIX:"

    # Here's the tricky part. It's easier to create the variable than it
    # is to use it.
    varcold="COLD$r"
    varwarm="WARM$r"
    varhot="HOT$r"
    varnumfix="COLD$r"

    echo ${!varcold} ${!varwarm} ${!varhot} ${!varnumfix}
done 
```

使用数组，它很简单

```
for r in $(seq 1 $round_nr); do
    read -p "HOW MANY COLD TEST ITERATIONS DO YOU WANT IN ROUND $r?" cold[r]
    read -p "HOW MANY WARM TEST ITERATIONS DO YOU WANT IN ROUND $r?" warm[r]
    read -p "HOW MANY HOT TEST ITERATIONS DO YOU WANT IN ROUND $r?" hot[r]
    read -p "HOW MANY NR OF FIXES PER TEST ITERATION $r?" numfix[r]
    echo "ITERATION $r INPUT VALUES: COLD/WARM/HOT/NUMFIX:"
    echo ${cold[r]} ${warm[r]} ${hot[r]} ${numfix[r]}
done 
```

`for`在任何一种情况下，只要您不做任何事情使`for`循环在子shell中运行（例如将其放入管道中或将其包含在 中`(...)`，等等），变量都将在循环之后可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:24:35.590

您可以使用数组（可能是首选方法），或者您可以做一些`eval`体操。bash 手册页包含您需要知道的所有内容。

# javascript - 将输入字段限制为一位小数和两位小数

> ID：15252628
> 
> 赞同：0
> 
> 时间：2013-03-06T16:21:09.667
> 
> 标签：javascript

我有一个限制为 6 个字符的输入字段。如何验证我的输入字段，以便用户不能输入超过一个小数点（即 19..12），而且它也只能是两个小数位（即 19.123）？

这是我的输入字段

```
<input type="text" name="amount" id="amount" maxlength="6" autocomplete="off"/><span class="paymentalert" style="color:red;"></span> 
```

这是我的验证脚本。

```
$(function(){
$("#amount").keypress( function(e) {
    var chr = String.fromCharCode(e.which);
    if (".1234567890NOABC".indexOf(chr) < 0)
        return false;
});
});

$("#amount").blur(function() {
    var amount = parseFloat($(this).val());
    if (amount) {
        if (amount < 40 || amount > 200) {
            $("span.paymentalert").html("Your payment must be between £40 and £200");
        } else {
            $("span.paymentalert").html("");
        }
    } else {
        $("span.paymentalert").html("Your payment must be a number");
    }
}); 
```

约拿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:25:47.207

这应该这样做：

```
var ok = /^\d*\.?\d{0,2}$/.test(input); 
```

（如果我正确理解您不希望点后超过 2 个数字）

因此，代码将是：

```
$("#amount").blur(function() {
    var input = $(this).val();
    if (/^\d*\.?\d{0,2}$/.test(input)) {
        var amount = parseFloat(input);
        if (amount < 40 || amount > 200) {
            $("span.paymentalert").html("Your payment must be between £40 and £200");
        } else {
            $("span.paymentalert").html("");
        }
    } else {
        $("span.paymentalert").html("Your payment must be a number");
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:32:26.943

假如说：

1.  小数点后必须有 2 位数字，并且
2.  小数点前必须至少有 2 位，但不能超过 3 位

您将用来匹配它的代码是：

```
var value = $(this).val;
value.match(/^\d{2,3}(\.\d{2})?$/i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:27:05.620

如果您使用jQuery的[Masked Input Plugin](http://digitalbush.com/projects/masked-input-plugin/)会容易得多。

# javascript - javascript，从表单中获取价值

> ID：15252639
> 
> 赞同：-2
> 
> 时间：2013-03-06T16:21:36.250
> 
> 标签：javascript, arrays, forms

```
<form name="car" onsubmit="return validate()">
<input type=text name=input[][] value="......" /> 
```

如何从作为字段数组的字段输入中警报值？

```
 function validate(){
      alert("meee");
      var mycar = document.car.elements['input[][]'].value; // this line does NOT want to store value in mycar
      alert(mycar);
    } 
```

在这种情况下，会显示带有 mee 消息的警报框，但不会显示另一个应该显示值 mycar 的框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:26:15.457

只需为输入分配一个 id 或类并使用它来访问它。

举个例子 ：

```
<input id="mycar" type="text" name=input[][] value="..." /> 
```

和相关的JS

```
function validate() {
  var mycar = document.getElementById('mycar');
  var value = mycar.value;

} 
```

如果您坚持使用名称，您可以[使用 JavaScript 引用 HTML 表单输入标签名称元素数组](https://stackoverflow.com/questions/3234205/html-form-input-tag-name-element-array-with-javascript)

# javascript - 按下按钮时更改名称

> ID：15252641
> 
> 赞同：1
> 
> 时间：2013-03-06T16:21:40.617
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试创建一个在按下时更改其值的按钮。

```
$("button").click( function() {
    valor = this.html();
    retorno = (valor == 'Exibir') ? 'Ocultar' : 'Exibir';
    this.html(retorno);
}); 
```

我收到这条消息：

未捕获的类型错误：对象 # 没有方法 'html'

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:22:53.840

`this`是一个 HTMLElementNode 对象，而不是一个 jQuery 对象。

```
valor = jQuery(this).html(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:23:53.610

`this`指的是 HTMLElementNode （窗口）对象，它不是一个 jquery 对象，因为 html 是一个 jquery 方法，所以它不起作用。

因此，要使其成为 jquery 对象，您需要将其包裹`$`起来：

```
 $("button").click( function() {
     valor = $(this).html();
     retorno = (valor == 'Exibir') ? 'Ocultar' : 'Exibir';
     $(this).html(retorno);
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:22:47.387

试试这个

```
valor = $(this).html(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T16:23:26.067

用这个...

```
$("button").on('click', function() {
    valor = $(this).html();
    retorno = (valor == 'Exibir') ? 'Ocultar' : 'Exibir';
    $(this).html(retorno);
}); 
```

看这个例子[jsFiddle](http://jsfiddle.net/dJW3F/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T16:24:07.047

`this`将引用 HTMLElementNode，因此您`valor = this.innerHTML`可以避免 jQuery 调用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-06T16:25:14.140

```
$("button").click( function() {
     valor = $(this).html();
     retorno = (valor == 'Exibir') ? 'Ocultar' : 'Exibir';
     $(this).html(retorno);
 }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-06T16:25:56.863

用这个 ：

```
valor = jQuery(this).html(); 
```

# php - MAMP Pro / CodeIgniter 路径问题

> ID：15252642
> 
> 赞同：1
> 
> 时间：2013-03-06T16:21:41.310
> 
> 标签：php, .htaccess, codeigniter, mamp

我在 CodeIgniter/MAMP Pro 中遇到了一个奇怪的路径问题。我在 CodeIgniter 中启用了不错的 URL（从 URL 中隐藏 index.php），方法是设置`$config['index_page'] = '';`并`config.php`添加以下内容`.htaccess`：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|js|css|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我的应用程序运行良好，但由于某种原因我无法访问我的 CSS 和 JS 文件。如果我输入，`http://mysite:8888/js/jquery.js`我会得到一个 CodeIgniter 404 页面。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:29:31.473

我将此 .htaccess 用于 MAMP 上的 CodeIgniter 项目。它也支持子文件夹：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

`.htaccess`文件是动态读取的，不需要重新启动 MAMP，除非您从本质上调整了 apache 的设置文件。

该`robots.txt`文件不是真正的秘密文件，因此将其掩盖起来并不重要。

脚本/图像/等。文件夹，您应该只添加一个`index.html`文件，就像 CodeIgniter 在它的系统文件夹中所做的那样。这样用户就无法浏览这些文件夹。不要忘记将 index.html 文件也复制到子文件夹中。`htaccess`这可能看起来很脏，但比用更多规则弄乱你的东西要干净得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T03:33:14.620

我觉得上面的答案很好，但是由于CI是动态写URL的，所以我更喜欢这种方法。另外，我认为这有助于编写更好的模板代码。（我专门在 MAMP 上对此进行了测试。）

一方面，将 .htaccess 文件设置为以下内容：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|assets|robots\.txt)
RewriteRule ^(.*)$ index.php?/$1 [L,QSA] 
```

在`application/helpers`. 我打电话给我`assets_helper.php`，但称它为有用的东西。将此代码放入该帮助文件中：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

if ( ! function_exists('asset_url()')) {
function asset_url() {
    echo base_url().'assets/';
    }
} 
```

将助手添加到您的自动加载文件`config/autoload.php`中

```
$autoload['helper'] = array('url', 'assets'); 
```

（您可能尚未`url`激活助手，但它很常见。）

并为 assets 文件夹添加一个路由（in `config/routes.php`）：

```
$route['assets/(:any)'] = 'assets/$1'; 
```

现在当你想添加css，或者js或者图片的时候，你只需要`<? assets_url(); ?>`输入模板代码。

```
<img src="<? asset_url(); ?>images/logo.png" width="100" height="100" /> 
```

或者

```
<link rel="stylesheet" href="<? asset_url(); ?>css/house.css"> 
```

# sencha-touch-2 - 在 Blackberry10 webworks 上打包一个 sencha touch2 应用程序

> ID：15252645
> 
> 赞同：0
> 
> 时间：2013-03-06T16:21:49.313
> 
> 标签：sencha-touch-2, packaging, blackberry-webworks

如何在Blackberry10 webworks上打包一个煎茶触摸应用？我是黑莓应用程序开发的新手，请帮我打包应用程序？我不想在 BB10 中使用 phonegap 作为中介来打包 sencha touch 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:01:13.433

以下是有关如何为 BlackBerry 10 构建 Sencha Touch 应用程序的说明：

[https://developer.blackberry.com/html5/documentation/creating_blackberry_webworks_applications_with_sencha_touch.html](https://developer.blackberry.com/html5/documentation/creating_blackberry_webworks_applications_with_sencha_touch.html)

概括：

1.  使用 Sencha SDK 编译您的应用程序
2.  创建一个 config.xml 文件（WebWorks 所必需的）
3.  使用 BlackBerry 10 WebWorks SDK 打包您的应用程序。

# xml - Delphi - 我可以使用 NativeXml 创建规范的 XML 吗？

> ID：15252648
> 
> 赞同：4
> 
> 时间：2013-03-06T16:22:03.307
> 
> 标签：xml, delphi, nativexml

多年来，我一直在使用 NativeXml 从我的程序数据中创建 xml。这工作得很好，但现在我遇到了障碍。

我现在需要在 xml 中插入一个散列，该 xml 是从 xml 的规范形式创建的。我看了一下，Native Xml 有一个“Canonicalize”功能，但要么我没有正确使用它（一个很好的机会），要么（因为它被标记为实验性的）它没有做需要的事情。

我一直在这样使用它（正如我能找到的唯一示例中所建议的那样）

```
MyXmlFile.Canonicalize; 
```

我一直在毫无问题地将 xml 发送到测试服务，所以我认为一切正常。收件人正在接受 xml 提交和哈希码。Canonicalize 去除了打开的 xml 标记`<?xml version="1.0"?>`，但由于 xml 的格式非常好，而且我没有将其格式设置为`xfReadable`我找不到太大的区别。

现在我遇到了一个问题。一项数据表明，一切都没有按应有的方式工作。

如果我的数据中有一个包含撇号的名称，例如 O'Reilly，那么在 xml 中它会像这样（正确地）写入

```
<Surname>O&apos;Reilly</Surname> 
```

据我所知，它何时被规范化，这应该显示为

```
<Surname>O'Reilly</Surname> 
```

这没有发生，因此收件人拒绝我的 xml 提交，因为哈希不匹配。

在过去的两天里，我一直在浏览 NativeXml 代码和文档以及在线，但找不到答案。可悲的是，NativeXml 论坛似乎也没有生命。

我应该用 NativeXml 做什么？如果不是 NativeXml，那么还有什么可以做的吗？有什么我可以将xml传递给可以正确规范化它的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:41:47.373

当前版本的 NativeXML (4.07) 从 DTD 中获取命名字符实体并扩展它们。这四个预定义的命名字符实体当然不在任何 DTD 中，因此它们不会被处理。看起来数字字符实体也没有规范化，还有其他几个转换尚未实现。NativeXML 在当前状态下根本不是适合该工作的工具。

# ms-access - 在 microsoft access 中更改查询文件路径

> ID：15252656
> 
> 赞同：2
> 
> 时间：2013-03-06T16:22:20.953
> 
> 标签：ms-access, filepath

我正在使用 Access 2003，我需要更改查询的文件路径。我正在处理一个我没有创建的数据库，基本上我的工作流程是使用 Excel 来填充列表（文件名和有关照片的信息）然后我返回 Access，在 Query 中我有一个“附加结果”选项，它将使用已加载到 Excel 中的新信息更新我的数据库。

我收到一条错误消息，指出文件路径错误。我知道正确的文件路径，这是一个正确的错误，我只是找不到更新查询的位置，所以我可以更改文件路径。我做了几个谷歌搜索并使用了微软的帮助，但我认为在这里提问可能会更快。

谢谢，

JWV

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:25:53.417

听起来工作簿作为链接表链接到 Access。按类型对对象进行排序，并尝试打开每个链接表，直到其中一个失败。然后删除链接，并将其重新创建到具有相同表名的正确电子表格中。

为此，您首先备份 *.mdb（以防万一您弄错了），然后删除链接，就像删除表一样。接下来，您需要右键单击任何表 => 导入电子表格 => 转到您的电子表格并取消选中“导入数据库”框（或类似的东西，我现在无权访问 Access（哈！）测试），这将为您提供一个指向电子表格的链接，而不是将其实际复制为表格，然后重命名它，使其与原始链接的名称相同。

我想作为替代方案，您可以重新映射驱动器，以便在需要运行它的机器上，旧的 I: 驱动器映射回 I:，H: 也是如此。

# xcode - Mac OSX 上数据库文件的位置

> ID：15252659
> 
> 赞同：0
> 
> 时间：2013-03-06T16:22:32.860
> 
> 标签：xcode, core-data

我有一个为 Mac OS X 创建的应用程序，我正在尝试查看核心数据数据库以确保它与我的应用程序一起正常工作。我导航到正确的目录；

当前用户/库/应用程序支持/com.?????.???/???.storedata

如何打开和/或查看此文件？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:29:13.340

必须下载 SQLite3 编辑器才能打开文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-24T11:16:24.743

对我来说，无法打开`.storedata`using`sqlite3`或例如[SQLite Manager for Firefox](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)。

我总是收到消息

> 错误：文件已加密或不是数据库

相反，我必须首先将 storeType 更改为`NSPersistentStoreCoordinator`to`NSSQLiteStoreType`而不是`NSXMLStoreType`.

```
if (![coordinator addPersistentStoreWithType:NSSQLiteStoreType
                               configuration:nil
                                         URL:url
                                     options:nil
                                       error:&error]) {
    [[NSApplication sharedApplication] presentError:error];
    return nil;
} 
```

之后它起作用了。另请[参阅](https://stackoverflow.com/questions/23117831/what-is-the-difference-between-sqlite-and-storedata)与`.sqlite``.storedata`

# wif - WIF：ID1014：签名无效。数据可能已被篡改

> ID：15252663
> 
> 赞同：0
> 
> 时间：2013-03-06T16:22:43.650
> 
> 标签：wif

我们基于 Windows Identity Foundation 构建了一个依赖方应用程序。我们遵循 Vittorio 书中的建议，创建了一组自定义 cookie 转换，以使用 RSA 加密/签署令牌。

```
private void OnServiceConfigurationCreated( object sender, ServiceConfigurationCreatedEventArgs e )
{
    List<CookieTransform> sessionTransforms = new List<CookieTransform>( new CookieTransform[]
    {
        new DeflateCookieTransform(),
        new RsaEncryptionCookieTransform( e.ServiceConfiguration.ServiceCertificate ),
        new RsaSignatureCookieTransform( e.ServiceConfiguration.ServiceCertificate )
    } );

    SessionSecurityTokenHandler sessionHandler =
        new SessionSecurityTokenHandler( sessionTransforms.AsReadOnly() );

    e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace( sessionHandler );
} 
```

我们在 web.config 中配置了一个。

```
<microsoft.identityModel>
  <service>
    <serviceCertificate>
      <certificateReference x509FindType="FindByThumbprint" findValue="C7FD338059CCB374798923A915BC91B718814A8E" storeLocation="LocalMachine" storeName="TrustedPeople" />
    </serviceCertificate>
  </service>
</microsoft.identityModel> 
```

我知道 OnServiceConfigurationCreated 中的代码正在执行，因为如果我将垃圾指纹值放入配置文件中，则 OnServiceConfigurationCreated 会引发异常。

不幸的是，我们的日志中经常出现以下异常。

```
System.Security.Cryptography.CryptographicException: ID1014: The signature is not valid. The data may have been tampered with.
at Microsoft.IdentityModel.Web.RsaSignatureCookieTransform.Decode(Byte[] encoded)
at Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ApplyTransforms(Byte[] cookie, Boolean outbound)
at Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(XmlReader reader, SecurityTokenResolver tokenResolver)
at Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(Byte[] token, SecurityTokenResolver tokenResolver)
at Microsoft.IdentityModel.Web.SessionAuthenticationModule.ReadSessionTokenFromCookie(Byte[] sessionCookie)
at Microsoft.IdentityModel.Web.SessionAuthenticationModule.TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken)
at Microsoft.IdentityModel.Web.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs)
at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我们认为此异常会导致系统出现其他问题，但无法弄清楚它发生的原因。我们有三台 Web 服务器，我们三重检查了它们都配置为使用相同的证书指纹，并且证书安装在所有三台服务器上的相同位置。

我们还使用自定义 SessionAuthenticationModule 来处理滑动会话过期。我认为*也许*当该代码（如下）重新发布 cookie 时，它​​可能使用了不同的加密/签名方法，但我很确定我已经对其进行了测试，但情况似乎并非如此。我只是为了充分披露而将其包括在内。

```
void CustomSessionAuthenticationModule_SessionSecurityTokenReceived( object sender, SessionSecurityTokenReceivedEventArgs e )
{
    DateTime now = DateTime.UtcNow;
    DateTime validFrom = e.SessionToken.ValidFrom;
    DateTime validTo = e.SessionToken.ValidTo;

    double tokenLifetime = (validTo - validFrom).TotalMinutes;

    SessionAuthenticationModule sam = sender as SessionAuthenticationModule;

    if( now < validTo && now > validFrom.AddMinutes( tokenLifetime / 2 ) )
    {
        e.SessionToken = sam.CreateSessionSecurityToken(
            e.SessionToken.ClaimsPrincipal, e.SessionToken.Context,
            now, now.AddMinutes( tokenLifetime ), e.SessionToken.IsPersistent );
        e.ReissueCookie = true;
    }
} 
```

据我们所知，我们已经完成了 docs/blogs/etc 所说的一切，但我们仍然遇到这个异常。在这一点上，任何提示/指针/有根据的猜测都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:52:15.917

您可能想要检查您的应用程序设置的 cookie 数据的总大小。如果您包含大量声明，除非您使用会话模式，否则 cookie 会相应增长。例如，Safari 对总 cookie 数据大小有 4K 限制。如果您打破此限制，您将开始丢失 cookie，这可能意味着您将丢失带有部分签名的 cookie。

附带说明一下，如果您可以迁移到 WIF 4.5，则可以选择使用[MachineKeySessionSecurityTokenHandler](http://msdn.microsoft.com/en-us/library/system.identitymodel.services.tokens.machinekeysessionsecuritytokenhandler.aspx)而不是基于证书的 cookie 加密。

# asp.net-mvc-3 - 如何设置自定义路由值，以便只有具有管理员角色的成员才能访问我在 MVC3 中的 elmah.axd 页面

> ID：15252672
> 
> 赞同：0
> 
> 时间：2013-03-06T16:23:19.507
> 
> 标签：asp.net-mvc-3, elmah

我需要设置一个自定义路由值，这样你就不得不去

站点/管理员/elmah.axd

在我的 web.config 中，我有：

```
<location path="elmah.axd">
 <system.web>
   <authorization>
     <allow roles="Admin" />
     <deny users="*" />
   </authorization>
 </system.web>
</location> 
```

加上所有其他相关的 elmah 设置。如果我删除该部分，我可以输入：

网站/elmah.axd

但我只希望管理员能够访问此页面。

我有一个您登录的管理页面，如果您是管理员角色，那么您应该被重定向到 elmah.axd

```
 public AdminController(IRepository<User> userRepository)
    {
        _userRepository = userRepository;
    }

    //
    // GET: /Admin/

    public ActionResult Index()
    {
        return View(Constants.Admin);
    }

public ActionResult AdminLogin(string SSN)
    {
        var user = _userRepository.FindBy(x => x.UserName == SSN).SingleOrDefault();
        if (UserIsAnAdmin(user))
        {
            return RedirectToRoute("/elmah.axd");
        }
        return View(Constants.DeniedAccess);
    } 
```

我的 Global.asax 文件中有一个需要帮助的路由值。

```
 routes.MapRoute(
            "mocklogin",
            "{controller}/{action}", // URL with parameters
            new { controller = "MockLogin", action = "Index" } // Parameter defaults
            );

        routes.MapRoute(
            "elmah.axd",
            "{controller}/{action}", // URL with parameters

            );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}", // URL with parameters
            //need something here redirecting to the elmah.axd page      
    ); 
```

有没有办法将页面重定向到我网站上的 /elmah.axd 页面。

最后，我想转到我网站的管理员页面，如果用户是管理员，当我单击提交时，我想重定向到 elmah.axd 页面。否则我会转到我的自定义错误页面。我需要以某种方式让控制器上的 ssn 调用条件，如果为真，则重定向到 elmah.axd。如何在 MVC 中重定向到 elmah.axd？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:13:22.413

更新：要重定向到静态路由，请使用 Response.Redirect("URL");

见下文 ：

您不能创建指向控制器和动作以外的其他东西的路由。所以最好的办法是你的控制器的索引操作重定向到 /elmah.axd 并将你的默认路由设置为这个操作。

路线 ：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}", // URL with parameters 
```

);

控制器 ：

```
 public AdminController(IRepository<User> userRepository)
    {
        _userRepository = userRepository;
    }

    public ActionResult Index()
    {
         Response.Redirect("/elmah.axd");
         return View(); //will not be hit
    }

    public ActionResult AdminLogin(string SSN)
    {
        var user = _userRepository.FindBy(x => x.UserName == SSN).SingleOrDefault();
        if (UserIsAnAdmin(user))
        {
            return RedirectToRoute("/elmah.axd");
        }
        return View(Constants.DeniedAccess);
    } 
```

让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:06:33.563

您可以`Application_AuthenticateRequest`在`Global.asax`文件中使用。

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    if (HttpContext.Current.User.IsInRole("Admin"))
        // Do your thing
} 
```

# qt - 通过 QTcpSocket 或 QSslSocket 发送 QDataStream

> ID：15252684
> 
> 赞同：0
> 
> 时间：2013-03-06T16:23:46.677
> 
> 标签：qt, qt4, qtcpsocket, qbytearray, qsslsocket

我想通过 ssl 或 tcp 套接字发送序列化数据。QIODevice::write 不发送 QDataStream，而只发送 char* 和 QByteArray。

有没有办法通过套接字发送序列化数据？或者如何将 QDataStream 转换为 QByteArray？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:40:28.027

将你的传递`QIODevice`给`QDataStream`构造函数。这将允许您通过流写入设备。

# wordpress - Twitter Bootstrap 折叠手风琴 - Wordpress 简码

> ID：15252686
> 
> 赞同：0
> 
> 时间：2013-03-06T16:24:02.447
> 
> 标签：wordpress, twitter-bootstrap, shortcode

我有在 Wordpress 主题中实现 Twitter Bootstrap Collapse 的简码。

它工作正常，但我想包括通过在短代码中指定打开手风琴组之一的选项？目前所有组默认关闭，您必须单击标题才能打开。

我假设我可以使用`class="item active"`或类似的东西，我只是有点卡住了。

这是我在我的主题的functions.php中拥有的功能：

```
function collapse($atts, $content = null) {  
     extract(shortcode_atts(array(  
     'accordion' => '',
     'title' => ''  
     ), $atts));  

return '<div class="accordion-group">
    <div class="accordion-heading">
    <a class="accordion-toggle" data-toggle="collapse" 
    data-parent="accordion2" href="#collapse'.$accordion.'"><h2>'.$title.'</h2></a>
    </div>
     <div id="collapse'.$accordion.'" class="accordion-body collapse">
        <div class="accordion-inner">'.$content.'</div>
     </div>
    </div>';  } 
```

页面的短代码如下所示：

[折叠组]

[折叠手风琴=“一个”标题=“某事”]

[/坍塌]

[折叠手风琴=“两个”标题=“某事”]

[/坍塌]

[/折叠组]

# cakephp - 多图上传 - Meio Upload

> ID：15252690
> 
> 赞同：0
> 
> 时间：2013-03-06T16:24:15.307
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-model, meio-upload

我正在使用在这里找到的“MeioUpload”插件“ [https://github.com/jrbasso/MeioUpload](https://github.com/jrbasso/MeioUpload) ”和Cakephp 2.x。

目前将此用于单张图片上传，请任何人提供有关如何使用此插件处理多张图片上传的建议。目前，存储图像的 db 表包含每个图像的文件名、目录、mimetype 和文件大小字段。添加新帖子时，我想为每个帖子存储多个图像。任何帮助将不胜感激，在此先感谢:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:40:30.127

正如我在评论中提到的，您可能想尝试[https://github.com/josegonzalez/upload](https://github.com/josegonzalez/upload)，因为 MeioUpload 现在已被弃用，它的开发人员正在开发我链接到的新上传插件。

无论哪种方式，MeioUpload 的以下信息也适用于新插件。

MeioUpload 旨在为每个相应的字段集处理一个上传的文件。我不认为 MeioUpload 的自述文件中的示例是理想的，因为它似乎暗示你必须有一个“图像”表，而实际上，你可以有一个几乎任何东西的表，其中每条记录都有一个或更多上传的文件（无论是图像、PDF、MP3 ......任何东西）。

因此，考虑到这一点，您有两种解决方案：

1）如果您的帖子可能有无限数量的图像（即，不是固定的、少量的），那么您可以将帖子和图像放在单独的表中，并在它们之间建立一个 hasMany 关系。见[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

2）如果您知道每个帖子最多只能有 3 或 4 个（或其他相对较少的数量）图像，那么您可以在您的帖子表中实现 3（或 4，或 X）组图像字段/模型，每个处理一个单独的上传。他们会被命名，例如。features_image_filename、feautred_image_dir 等；image2_filename、image2_dir、image2_mimetype 等；image3_filename、image3_dir 等

你的行为看起来像：

```
var $actsAs = array(
    'MeioUpload.MeioUpload' => array(
        'featured_image_filename' => array(
                'fields' => array(
                    'dir' => 'featured_image_dir',
                    'filesize' => 'featured_image_filesize',
                    'mimetype' => 'featured_image_mimetype'
                ),
        ),
        'image2_filename' => array(
                'fields' => array(
                    'dir' => 'image2_dir',
                    'filesize' => 'image2_filesize',
                    'mimetype' => 'image2_mimetype'
                ),
        ),
        'image3_filename' => array(
                'fields' => array(
                    'dir' => 'image3_dir',
                    'filesize' => 'image3_filesize',
                    'mimetype' => 'image3_mimetype'
                ),
        ),
    )
); 
```

第二种解决方案不是理想的数据库设计，但有时当您知道永远不会超过几张图像时，它只是最简单的方法 - 无论是在开发方面，还是在易于使用的 UI 方面。

有道理？

# android - Android Facebook SDK 3 发布到朋友提要不起作用

> ID：15252698
> 
> 赞同：1
> 
> 时间：2013-03-06T16:24:36.737
> 
> 标签：android, facebook, feed, facebook-android-sdk, friend

有人可以发送 REALLY WORK NOW 简单吗？

我接下来使用：

1）在应用程序中进行授权

2）然后按下按钮publishFeedDialog（）；

```
private void publishFeedDialog() {
        Bundle params = new Bundle();
        params.putString("name", "Facebook SDK for Android");

 params.putString("caption", "Build great social apps and get more installs.");
   params.putString("description", "The Facebook SDK for And0roid makes it easier and faster to develop Facebook integrated Android apps.");
  params.putString("link", "https://developers.facebook.com/android");
 params.putString("picture", "");

    WebDialog feedDialog = (
        new WebDialog.FeedDialogBuilder(activity,
            Session.getActiveSession(),
            params))
        .setOnCompleteListener(new OnCompleteListener() {

            @Override
            public void onComplete(Bundle values,
                FacebookException error) {

                Log.e("TAG",values.toString());

                if (error == null) {
                    // When the story is posted, echo the success
                    // and the post Id.
                    final String postId = values.getString("post_id");
                    if (postId != null) {
                        Toast.makeText(activity,
                            "Posted story, id: "+postId,
                            Toast.LENGTH_SHORT).show();
                    } else {
                        // User clicked the Cancel button
                        Toast.makeText(activity.getApplicationContext(), 
                            "Publish cancelled", 
                            Toast.LENGTH_SHORT).show();
                    }
                } else if (error instanceof FacebookOperationCanceledException) {
                    // User clicked the "x" button
                    Toast.makeText(activity.getApplicationContext(), 
                        "Publish cancelled", 
                        Toast.LENGTH_SHORT).show();
                } else {
                    // Generic, ex: network error
                    Toast.makeText(activity.getApplicationContext(), 
                        "Error posting story", 
                        Toast.LENGTH_SHORT).show();
                }
            }

        })
        .setFrom("")
       .setTo(userId)
        .build();
         feedDialog.show();
} 
```

当我发送消息时，我看到我的朋友已从 Id 中识别出来。

我收到类似的东西：

```
Webview loading URL: https://m.facebook.com/dialog/feed
Redirect URL: fbconnect://success?post_id=1266196038_167455066740536 
```

但是没有出现朋友提要中的消息。没有 .setTo(userId) 的代码像往常一样在提要我的消息时发送给我。

在授权我使用

```
List<String> permission = new ArrayList<String>();

        permission.add("publish_actions");
        permission.add("publish_stream"); 
```

并在清单中写入 app_id。

```
<meta-data
        android:name="com.facebook.sdk.ApplicationId"
        android:value="@string/app_id" /> 
```

请帮帮我！

PS 现在（2013 年 2 月之后）是否可以在 facebook 上发送给朋友的提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:55:02.790

（编辑）：这仅适用于通过图形 API。

[请查看](http://developers.facebook.com/blog/post/2013/02/06/platform-updates--operation-developer-love/)2013 年 2 月 Breaking Changes Now Live 下的倒​​数第二点。它不再可用。

# c# - 在充满文本框的 StackPanel 中添加空间

> ID：15252699
> 
> 赞同：1
> 
> 时间：2013-03-06T16:24:36.833
> 
> 标签：c#, xaml, textbox, microsoft-metro, stackpanel

我是新来的`C#`和`XAML`发展的。我创建了一个带有多个文本框的 Metro 应用程序。这些文本框通过 C# 代码中的 StackPanel 加载到 XAML 数据中，必须进行硬编码。问题是，我不知道如何在每个文本框之间添加一些空格。有人有想法吗？编码 ：

```
 private void AddLastestCreatedField()
    {
        // Load the last created Field From DB

        DBFunction.FieldTypes latestField;

        DBFunction.Class1 myDBClass = new DBFunction.Class1();
        latestField = myDBClass.GetLastestField();

        // add new textbox and put it on the screen

        var dragTranslation = new TranslateTransform();

        //Generate the TextBox

        TextBox fieldTextBox = new TextBox();

        fieldTextBox.Name = "fieldTextBox_" + latestField.ID.ToString();
        fieldTextBox.FontSize = 15;
        fieldTextBox.Background.Opacity = 0.8;
        ToolTip toolTip = new ToolTip();
        toolTip.Content = latestField.Description;
        ToolTipService.SetToolTip(fieldTextBox, toolTip);
        fieldTextBox.IsReadOnly  = true;

        // Add Drag and Drop Handler for TextBox

        fieldTextBox.ManipulationMode = ManipulationModes.All;
        fieldTextBox.ManipulationDelta += fieldTextBox_ManipulationDelta;
        fieldTextBox.ManipulationCompleted += fieldTextBox_ManipulationCompleted;
        fieldTextBox.RenderTransform = dragTranslation;
        dragTranslationDict.Add(fieldTextBox.Name, dragTranslation);
        fieldTextBox.RenderTransform = dragTranslation;

        // Add TextBox to a List to control later
        TxtBoxList.Add(fieldTextBox);

        // Generate TextBlock for each TextBlock

        TextBlock fieldTextBlock = new TextBlock();
        // fieldTextBlock.Name = "fieldTextBlock_" + cnt.ToString();

        fieldTextBlock.TextAlignment = TextAlignment.Right;
        fieldTextBlock.HorizontalAlignment = Windows.UI.Xaml.HorizontalAlignment.Right;

        fieldTextBlock.Name = "fieldTextBlock_" + latestField.ID.ToString();
        fieldTextBlock.Text = latestField.Name;
        fieldTextBlock.FontSize = 15;
        fieldTextBlock.Height = 33;

        // Add Drag and Drop Handler for TextBlock

        var dragTranslation2 = new TranslateTransform();
        fieldTextBlock.RenderTransform = dragTranslation2;
        dragTranslationDict2.Add(fieldTextBlock.Name, dragTranslation2);

        // Add TextBlock to a list to control later

        TxtBlockList.Add(fieldTextBlock);

        TextBoxStack.Children.Add(fieldTextBox);
        TextBlockStack.Children.Add(fieldTextBlock);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:27:42.450

我会跳过通常的“你试过什么？” 问题并说您可能可以通过在 上设置`Margin`属性来获得所需的`TextBox`- 该`Margin`属性将在控件大小周围添加“空间”作为一种填充（不要与属性混淆，这将在控件范围*内*`Padding`添加空间)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:28:30.690

I don't know what you are really up to, but either use the `Margin`-property of the textbox. It defines, how much space there will be around the control,

See [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.margin.aspx) for more information.*

# highcharts - Highchart - 在选择时设置线条样式（宽度，颜色......）

> ID：15252703
> 
> 赞同：1
> 
> 时间：2013-03-06T16:24:50.083
> 
> 标签：highcharts

使用 Highchart 我想通过单击来选择系列并在选择时更改其宽度（因此我们可以看到它已被选中）

问题是，选择似乎有效（它切换了控制台中显示的选定值），但我不知道如何从点击事件中设置 lineWidth：

该示例正在选择系列：

```
line: {
    events: {
        click: function(event) {

            this.select();
                        console.log( this.name+", selected : "+ this.selected);
            return false;
        }
    }
} 
```

我也可以显示/隐藏系列，但是如何更改 lineWidth ？我设法只为选定的系列显示工具提示，但我需要这些系列比其他系列更明显。

我试图在系列上添加一个选择状态，因为它适用于标记，但它似乎不适用于线条：

```
 series: {
                    states: {
                            select: {

                                lineWidth: 10
                            }
                    },
                             ...
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:06:21.850

改为使用`setState`。

```
this.setState(this.state === 'select' ? '' : 'select'); 
```

[演示](http://jsfiddle.net/G9d9H/3/)

# javascript - javascript: json 响应没问题。使用 var 是错误的

> ID：15252704
> 
> 赞同：0
> 
> 时间：2013-03-06T16:24:52.343
> 
> 标签：javascript, android, json, cordova

这是情况。我在 phonegap/jquerymobile 中有一个应用程序。我想根据json数据改变页面。

当用户启动应用但当前版本不是最新版本时，它需要更改内容。这是来自 start.html 页面的代码片段。

```
<script type="text/javascript" charset="utf-8">
var versionValue = ServerSettings.versionCheck();
if(versionValue == true){   
    $("#loginPage").removeClass("hidden");
            $("#updatePage").addClass("hidden");    
}
else{
            $("#loginPage").addClass("hidden");
            $("#updatePage").removeClass("hidden");
}
</script> 
```

函数 ServerSettings.versionCheck() 如下。

```
versionCheck : function() {
        var localAppVersion = 0.8;
        var response = false;
        $.ajax({
                async: false,
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "http://xxx/service/version.php",
                success: function(jsonData) {
                    var currentAppVersion = jsonData.version;
                        if(localAppVersion == currentAppVersion){
                            response = true;
                        }
                        else{
                            response = false;
                        }
                }                       
        });
                    return response;
    } 
```

我已经用 toast 验证了 json 调用的响应。它确实得到了正确的响应。（版本：0.9）我很确定我犯了有史以来最愚蠢的错误，但我似乎找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:28:30.603

您正在尝试同步，但 config 参数评估为 true，因为它是一个字符串

```
async: "false" 
```

将其更改为`async: false`，但我建议切换到异步以避免阻塞 UI。

此外，您的成功回调不会返回到外部方法，因此您将始终未定义。

```
versionCheck : function() {
    var localAppVersion = 0.8;
    var response = false;
    $.ajax({
            // WARNING: I don't recommend setting this to false in production code
            // While the browser is waiting for the response the page/browser will not respond!!
            async: false,
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            url: "http://xxx/service/version.php",
            success: function(jsonData) {
                var currentAppVersion = jsonData.version;
                response = localAppVersion == currentAppVersion;
            }                       
    });
    return response;
} 
```

使其异步（**推荐的方法**）

```
versionCheck : function(checkCompleteCallback) {
    var localAppVersion = 0.8;
    $.ajax({
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            url: "http://xxx/service/version.php",
            success: function(jsonData) {
                var currentAppVersion = jsonData.version;
                checkCompleteCallback(localAppVersion == currentAppVersion);
            }
    });
}

// Now the check accepts a callback function that executes when the request completes without blocking the UI
ServerSettings.versionCheck(function(versionValue) {
    if(versionValue){   
        $("#loginPage").removeClass("hidden");
        $("#updatePage").addClass("hidden");    
    }
    else {
        $("#loginPage").addClass("hidden");
        $("#updatePage").removeClass("hidden");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:30:50.190

Ajax 以异步方式工作，因此当您进行检查时，响应实际上还没有到达。将依赖于该值的逻辑放在 ajax 回调中。

```
versionCheck : function() {
    var localAppVersion = 0.8;
    $.ajax({
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            url: "http://xxx/service/version.php",
            success: function(jsonData) {
                var currentAppVersion = jsonData.version;

                if(localAppVersion == currentAppVersion){   
                    $("#loginPage").removeClass("hidden");
                    $("#updatePage").addClass("hidden");    
                }
                else {
                    $("#loginPage").addClass("hidden");
                    $("#updatePage").removeClass("hidden");
                }
            }                       
        });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:32:43.660

版本检查是一个异步调用。因此，它不会返回 true 或 false。你的`versionValue`意愿不真也不假。异步调用最好使用 Promise。

像这样更改您的 versionCheck 功能

```
 versionCheck : function() {
            var localAppVersion = 0.8;
            var response = false;
            $.ajax({
                    async: "false",
                    type: "GET",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    url: "http://xxx/service/version.php",
                    success: function(jsonData) {
                        var currentAppVersion = jsonData.version;
                            if(localAppVersion == currentAppVersion){
                                return true;
                            }
                            else{
                                return false;
                            }
                    }                       
            }).done(function(){
                 if(versionValue == true){   
                    $("#loginPage").removeClass("hidden");
                    $("#updatePage").addClass("hidden");    
                 }
                else{
                     $("#loginPage").addClass("hidden");
                     $("#updatePage").removeClass("hidden");
               }    
           });
        } 
```

`jQuery.promise`适用于 > 1.6 版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:36:38.933

这是由于您尝试访问尚未从服务器返回的值，因为您正在使用异步。

您可以重构您的版本检查以采用这样的回调参数。

```
<script type="text/javascript" charset="utf-8">

     var localAppVersion = 0.8,
         versionValue =false;
     var versionValue = ServerSettings.versionCheck(function(jsonData){

        var currentAppVersion = jsonData.version;
                    if(localAppVersion == currentAppVersion){
                        versionValue = true;
                    }
                    else{
                        versionValue = false;
                    }

        if(versionValue == true){   
           $("#loginPage").removeClass("hidden");
           $("#updatePage").addClass("hidden");    
        }else{
           $("#loginPage").addClass("hidden");
           $("#updatePage").removeClass("hidden");
     }
   }); 
```

```
versionCheck : function(callback) {
    var localAppVersion = 0.8;
    var response = false;
    $.ajax({
            async: "false",
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            url: "http://xxx/service/version.php",
            success: callback                
    });
} 
```

# knockout.js - 当 $parent.foo 是原型方法时， this 不是父方法，解决方法？

> ID：15252708
> 
> 赞同：13
> 
> 时间：2013-03-06T16:24:56.723
> 
> 标签：knockout.js

在我的视图模型中，我有原型方法，其中*this*上下文是 for each 中的项目，而不是实际的视图模型。我如何实现这一目标？

```
 <button data-bind="click: $parent.methodThatNeedsAccesToTheParentViewModel">Edit</button> 
```

视图模型：

```
ViewModel.prototype.methodThatNeedsAccesToTheParentViewModel= function () {
        this = duff //this is the item in the foreach, not the real parent
    }; 
```

想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T16:36:48.410

不要将函数直接传递给单击绑定，将其包装在匿名函数中以在视图模型的上下文中调用它：

```
<button data-bind="click: function() { $parent.methodThatNeedsAccesToTheParentViewModel() }">Edit</button> 
```

这样，当绑定被激活时，它将使用 $parent 作为调用的上下文 - 即*this*

值得注意的是（因为我们看不到文件绑定的结构）*$parent*变量将引用当前正在迭代的项目之前的**绑定**，它不一定是对象图中项目的父项。

**编辑**：我在上面遗漏了一些括号......

**编辑2**：由于绑定的解决方式，这有效。当通过敲除应用绑定时，表达式被解析并且必须评估为*函数*（因此当您直接绑定到函数时不需要括号）。然后在激活点击绑定时调用此函数。

但这里有一个问题，因为原型 javascript 中的**this**关键字不受函数所有者的约束（即它被定义的地方），而是在这种情况下被调用的方式（如[mozilla 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)中更好地解释）淘汰调用该函数不是通过拥有它的对象（这将正确绑定**this**运算符），而是将其显式绑定到其当前绑定上下文（因为它不可能知道该函数最初是哪个实例）。您可以通过获取对您的函数的引用然后在调用时将其绑定到另一个对象来复制此行为 - 例如：

```
A = function() {
   this.name = "foo";
};
A.prototype.getName = function() { return this.name; };

a = new A();

console.log(a.getName()); // should log "foo" as expected

f = a.getName; // now f contains a reference to the function

console.log(f()); // this call the function in the current scope - most likely the window, and return nothing

b = new Object(); // another generic object - suppose this is knockout binding context

console.log(f.call(b)); // this bind the call explicitly to b, but since b has no name property,  nothing is returned again

console.log(f.call(a)); // this time we bind the function call to an object that has a name proerty, so the correct value is returned 
```

另一方面，通过创建一个匿名函数，您将在所需对象（$parent）的范围内*显式调用您的方法，因此***这**是正确绑定的。

我希望这会有所帮助... :)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-12T11:33:43.790

我遇到了同样的问题，我以这种方式解决了它：

```
<button data-bind="click: $parent.methodThatNeedsAccesToTheParentViewModel.bind($parent)">Edit</button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:31:33.823

您的数据绑定中有 $parent ，因此应该调用父级的方法。您的意思是将 $data.methodThatNeedsAccesToTheParentViewModel 作为数据绑定吗？如果你这样做了，那么你需要研究某种 pubsub 框架，要么是[淘汰邮箱](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDkQFjAA&url=https://github.com/rniemeyer/knockout-postbox/&ei=Qm83UdevN8K3O8X4gJAO&usg=AFQjCNG-FzUVJ5Y20TdRgrG8dZv1CVv4og&sig2=pglMqraisRZqwF703wneSg&bvm=bv.43287494,d.ZWU)，要么是[jquery pubsub 插件](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEMQFjAC&url=https://github.com/phiggins42/bloody-jquery-plugins&ei=UG83UZ7tD4bKPeTmgJgK&usg=AFQjCNGV8Y2tCgfxdLw-x_AUrMOQc26C1Q&sig2=Qlswes5egQVNURJ0RAQP2A&bvm=bv.43287494,d.ZWU)

# mysql - 使用 MySQL Workbench 导出数据库会导致服务器停机吗？

> ID：15252719
> 
> 赞同：1
> 
> 时间：2013-03-06T16:25:30.217
> 
> 标签：mysql, mysql-workbench

我正在使用 Workbench 导出存储在我的 hoting 提供商服务器上的数据库，在我导出数据时服务器会遇到任何停机时间吗？

我问的唯一原因是因为当我备份本地 SQL 数据库时，我的服务器需要离线才能工作。

所有评论将不胜感激。

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:27:34.827

不，它不会导致停机，除非您的服务器资源非常少（在这种情况下，您应该找到更好的主机）。不过说真的，不会有什么不好的事情发生。

我也很难想象为什么你需要禁用你的本地主机进行备份...... Workbench 使用 mysqldump 进行导出，这反过来又需要 MySQL 在线......

# pdf - 从控制台工具为 pdfedit 提供密码

> ID：15252727
> 
> 赞同：2
> 
> 时间：2013-03-06T16:25:51.667
> 
> 标签：pdf, command-line

我四处寻找，到目前为止找不到任何东西。

**问题**

我需要从命令行运行`pdfedit`以展平一些 pdf，该命令相当简单。

```
pdfedit -console Flattener in.pdf out.pdf 
```

现在，当 pdf 具有关联的密码时，它会忽略`-console`并打开输入密码的提示。

我注意到 pdfedit 提供了一个脚本界面，我一直在尝试寻找是否可以通过该`-eval [script]`选项以某种方式为其提供所需的密码。但是没有任何进展。

任何见解或想法都会很棒。

**编辑**

然而，仍然试图找到一个简单的解决方案，我一直在挖掘源代码以找出结构，所以目前我正在研究修改源代码的最不利选择。任何帮助仍然很感激。

谢谢

# python - 利用 pip 的依赖关系图

> ID：15252734
> 
> 赞同：1
> 
> 时间：2013-03-06T16:25:59.017
> 
> 标签：python, graph, dependencies, pip

我想写一个用 pip 安装的所有 python 包的依赖关系图的可视化。我的问题是代码的文档记录很差，我无法找到 Graph 在源代码中的存储位置。

我希望有人对 pip-sourcecode 有足够的了解来帮助我。

我也是 python 新手，我不确定我是否应该在现有的源代码中进行调整，或者为它编写一个模块，尽管我更倾向于后者。

// 编辑：我可以通过 pip freeze 获取所有已安装的模块，但这只会给我一个没有依赖项的列表。所以我必须找到一种方法从该列表中提取依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:53:51.510

是的，如果您不习惯它，它的代码是非常难以阅读的。我不记得类似的东西，我不会使用它。您可能会发现自己更适合`distlib`，它有一个专门用于此目的的模块：[https ://distlib.readthedocs.org/en/latest/depgraph.html](https://distlib.readthedocs.org/en/latest/depgraph.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:31:03.943

这是我在搜索过程中发现的：

Pip 在内部根本不使用依赖图。（从 1.3.X 版开始）

因此，一种解决方案是执行以下操作：

如果您还没有准备好，您可以安装 setuptools。它带来了一个名为 pkg_resources 的模块。该模块具有所有工具，可以在您想要的 dists 目录中查看所有已安装的模块（不仅是使用 pip 安装的模块）。然后，您可以使用 pkg_resources 中包含的方法读出元数据（包括需求/依赖项）。

# jquery - 两个按钮多个切换元素jQuery

> ID：15252736
> 
> 赞同：0
> 
> 时间：2013-03-06T16:26:09.297
> 
> 标签：jquery, slidetoggle

我有多个表格显示切换内容，一个按钮就可以了，但我想用按钮来做同样的事情，但是如果我点击一个按钮，我想改变第一个按钮和第二个按钮的类，当你点击在第二个按钮上切换元素我想更改两个按钮的类。

```
$('.triggerNew,.triggerInfo').click(function() {   
  var Itemid = $('#Itemid').val();   
  var text = $(this).text();   
  var id = $(this).attr('id');   
  var lijn = 'tr#' + 'lijn' + $(this).attr('id');   
  var extra = 'tr#' + 'extra' + $(this).attr('id');   
  var result = '#result' + $(this).attr('id');   
  var triggerNew = $(".triggerNew");

  $('.triggerNew').text($(this).text() == '[-]' ? '[+]' : '[-]');
  $('.triggerInfo').text($(this).text() == 'infonew' ? 'info' : 'infonew'); 

  if(text == '[+]' || text == 'info') {
    $("<tr id=\"extra" + id + "\"><td colspan=\"5\"><div id=\"result" + $(this).attr('id') + "\"><div class=\"block\" style=\"text-align:center;padding:10px 0 10px 0;\"><img src=\"img/ajax-loader.gif\" /></div></div></td></tr>").insertAfter(lijn);

    $(extra).hide();
    $(extra).slideDown('slow');
    $(result).load(rooturl+'#' + id + '&Itemid=' + Itemid);
    $(this).removeClass('yescondext').addClass('nocondtext');

    return false;
  } else {
    $(extra).slideUp('slow');
    $(result).remove();
    $(this).removeClass('nocondtext').addClass('yescondext');
    return false;
  }
}); 
```

任何人都可以帮助我吗

所有代码都在这里

[http://jsfiddle.net/QKyYS/8/](http://jsfiddle.net/QKyYS/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:24:29.970

我认为[这](http://jsfiddle.net/WSwJe/embedded/result/)就是你的想法。

如何实现：

```
$(this).closest('td').find(".triggerNew").text( $(this).closest('td').find(".triggerNew").text() == '[-]' ? '[+]' : '[-]' );
$(this).closest('td').find(".triggerInfo").text( $(this).closest('td').find(".triggerInfo").text() == 'infonew' ? 'info' : 'infonew' ); 
```

应该在那里，就在`$(result).load(rooturl + '#' + id + '&Itemid=' + Itemid);`通话之后。

此外，在`else`街区

```
$(this).closest('td').find(".triggerNew").text( $(this).closest('td').find(".triggerNew").text() == '[-]' ? '[+]' : '[-]' );
$(this).closest('td').find(".triggerInfo").text( $(this).closest('td').find(".triggerNew").text() != 'infonew' ? 'info' : 'infonew' ); 
```

[再次小提琴](http://jsfiddle.net/WSwJe/)链接。

# jpa - JPA：在非 id 列上使用 @GeneratedValue

> ID：15252744
> 
> 赞同：6
> 
> 时间：2013-03-06T16:26:23.530
> 
> 标签：jpa

我正在尝试使用要从数据库序列中填充的属性来持久化实体。我正在使用 Oracle，已经创建了序列，通过 sql 验证了序列的工作原理，但我的属性没有被填充。这是我所拥有的：

```
@GeneratedValue(generator = "RFQ_LINE_IDS_SEQUENCE", strategy=GenerationType.SEQUENCE)
@SequenceGenerator(name="RFQ_LINE_IDS_SEQUENCE", sequenceName="RFQ_LINE_IDS_SEQUENCE", allocationSize=1000000000)
@Column(name = "external_line_item_id")
private String externalLineItemId; 
```

我在网上看到的所有示例都显示此注释与@Id 一起使用，但我还有另一个属性用于我的 id。

我也尝试了以下无济于事：

```
@GeneratedValue(generator = "RFQ_LINE_IDS_SEQUENCE", strategy=GenerationType.SEQUENCE)
@GenericGenerator(name = "RFQ_LINE_IDS_SEQUENCE", strategy = "sequence",
  parameters = {@Parameter(name = "sequence", value = "RFQ_LINE_IDS_SEQUENCE")})
@Column(name = "external_line_item_id")
private String externalLineItemId; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:28:04.873

JPA 仅要求在 @Id 字段上支持 @GeneratedValue。一些 JPA 实现（例如[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_2)）支持它，但并非全部都支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-05T11:52:47.347

我已经为 JPA 创建了一个支持`@GeneratedValue`非 ID 属性的提案。请在此处投票以将其包含在 2.2 [https://java.net/jira/browse/JPA_SPEC-113中](https://java.net/jira/browse/JPA_SPEC-113)

# c# - 为什么在属性声明中只使用 setter？

> ID：15252745
> 
> 赞同：0
> 
> 时间：2013-03-06T16:26:27.173
> 
> 标签：c#, .net

```
int MyProperty { set; } 
```

仅在属性上使用 setter 的想法是什么？如果我们为某个属性设置某个值，我想它很可能会在某个时候读取该值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:30:46.307

只写属性在基类库中很少见，但[XmlReaderSettings.XmlResolver](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.xmlresolver.aspx)就是一个例子。根据该主题中的安全说明，我认为省略了 get 访问器，以防止部分受信任的代码访问或篡改默认解析器。

出于同样的原因，[XmlResolver.Credentials](http://msdn.microsoft.com/en-us/library/system.xml.xmlresolver.credentials.aspx)和[XmlTextReader.XmlResolver可能是只写属性。](http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.xmlresolver.aspx)

（奇怪的是，[XmlAttribute.InnerText](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute.innertext.aspx)也是只写属性，但这似乎不是一个好的设计。）

按照上面的例子，我想说你应该**只**在读写属性有意义时才使用只写属性，但出于安全原因你不想要 get 访问器。

您当然可以使用`Set`方法来代替，但属性的优点是它可以在对象初始化器中使用，就像通常使用`XmlReaderSettings`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:28:53.740

您通常不会创建这样的属性。正如你所说，它没有多大价值。

如果你真的想只允许设置某个值而不读取它，那么提供一个方法。这样更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:31:26.860

只有一个 setter 的 auto-property 没有多大意义。手动实现的属性只有一个设置器，然后可以设置内部使用的字段，但在外部不可见，这是有意义的。

具有仅设置属性非常少见，并且通常使用设置方法而不是属性来实现，因为对于大多数开发人员来说，仅设置属性不是预期的行为。

实际上，自动实现的属性定义 a`set`而没有 a是编译器错误`get`。*必须*手动定义仅设置属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:39:09.860

一种方法比“只写属性”更有意义——即使代码确实编译了。关于只写属性有一个有趣的讨论[这里](https://stackoverflow.com/questions/4695551/write-only-properties-whats-the-point)

# java - 从文件输入中获取单词

> ID：15252746
> 
> 赞同：0
> 
> 时间：2013-03-06T16:26:27.907
> 
> 标签：java, arrays, string

我试图从只包含字符串的文件输入中获取单词，并将每个单词分别存储到一个数组`ArrayList`中（不允许）。

我下面的代码接受文件输入，但将其作为一个块。例如，如果文件输入是“一二三”，我希望每个单词在数组（`array[0] = "ONE"`、`array[1]="TWO"`和`array[2]="THREE"`）中都有自己的索引，但我下面的代码只取句子并将其全部放入`array[0] = "ONE TWO THREE"`. 我怎样才能解决这个问题？

```
int i = 0;
String wd = "";
while (in.hasNextLine() ) {                
    wd = in.nextLine()  ;
    array[i] = wd;
    i++; 
    System.out.println("wd");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:27:58.870

> 如果文件输入是“一二三”，我希望每个单词在数组中都有自己的空间，所以数组 [0] = ONE，数组[1](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29) = TWO 和数组 [2] = 三

使用带有空格的[**String#split(delim)作为分隔符。**](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)

```
String fileInput = "ONE TWO THREE";
String[] array = filrInput.split("\\s"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:29:51.873

而不是线

```
array[i] = wd; // since wd is the whole line, this puts lines in the array 
```

您想拆分您读入的行并将拆分的项目放入您的数组中。

```
String[] items = wd.split("\\s+"); // splits on any whitespace
for (String item : items) { // iterate through the items and shove them in the array
    array[i] = item;
    i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:30:31.717

发生这种情况是因为您从文件中读取了 LINES。你可以这样做：

```
String array[]=in.nextLine().split(" "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:33:36.117

我会将分隔符设置为空格“”，然后使用 .next()。

```
in.useDelimiter(" ");
while(in.hasNext()){
    wd = in.next();
    //wd will be one word
} 
```

# sql - 选择表中的所有表，其中表 1 中的列存在于另一个表中，第二列等于第二个表中的变量

> ID：15252752
> 
> 赞同：4
> 
> 时间：2013-03-06T16:26:37.473
> 
> 标签：sql, select

我知道标题令人困惑，但这是我能解释的最好的。基本上我正在为一家拥有两家电影院的公司开发一个电影院列表网站。所以我有一个数据库，其中包含两个表“电影”和“列表”，其中包含两个电影院的数据。

如果电影名称出现在列表中，我正在尝试为一个电影院选择所有电影及其数据（因为两个电影院共享所有电影但在表格中但可能没有相同的电影放映）

这是我想出的，但我遇到了一个问题，因为当“SELECT DISTINCT”返回多个结果时，它显然无法与 tbl Films 上的 FilmName 匹配。如何检查 tblFilms 上所有 FilmNames 的这个值？

```
SELECT * 
FROM tblFilms
WHERE FilmName = (SELECT DISTINCT FilmName FROM tblListings WHERE Cimema = 1) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T16:27:29.617

`IN`如果子查询返回多个值，则使用，

```
SELECT * 
FROM tblFILMS 
WHERE FilmName IN (SELECT DISTINCT FilmName FROM tblListings WHERE Cimema = 1) 
```

解决 thius 的另一种方法是使用`JOIN`（*我推荐*）

```
SELECT  DISTINCT    a.* 
FROM    tblFILMS a
        INNER JOIN tblListings b
            ON a.FilmName = b.FilmName AND
                b.Cimema = 1 
```

为了更快地执行查询，请在两个表上`INDEX`添加一个。`FilmName`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:29:22.983

如果您有表的模式，那将有所帮助。

也就是说，我相信您要查看的是 JOIN 关键字。（内/外/左/等）。这正是 JOIN 的目的（即你的头衔）。

# meteor - Handlebars 中的 #if 语句

> ID：15252754
> 
> 赞同：8
> 
> 时间：2013-03-06T16:26:42.683
> 
> 标签：meteor, handlebars.js

好的，我知道这是超级基本的，但我已经盯着它看了 2 天，看不出它为什么不起作用。我正在使用 Handlebars IF 助手有条件地渲染模板。

这是HTML：

```
<head>
    <title>flash</title>
</head>

<body>
    {{#if isTrue}}
        {{> hello}}
    {{else}}
        {{> goodbye}} 
    {{/if}}
</body>

<template name="hello">
    <h1>Hello!</h1>
</template>

<template name="goodbye">
    <h1>Goodbye!</h1>
</template> 
```

这是简单的咖啡文件：

```
isTrue = true 
```

我希望 {{> hello}} 模板能够呈现，但没有运气。我刚得到 {{> goodbye}} 模板。这很奇怪，因为我有其他项目成功地做到了这一点。我必须在这里遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-06T16:39:06.103

该`isTrue`变量需要在模板中才能工作。因此，将正文内容放入模板中：

```
<body>
    {{> body}}
</body>

<template name="body">
    {{#if isTrue}}
        {{> hello}}
    {{else}}
        {{> goodbye}} 
    {{/if}}
</template> 
```

然后你可以`isTrue`这样定义：

```
Template.body.helpers
  isTrue: -> true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-19T22:08:21.657

笔记：

```
Template.body.isTrue = -> true 
```

现在已弃用。

新语法如下所示：

```
Template.test.helpers({
  'isTrue': function(){
    return true;
  }
});
```

它应该仍然可以工作，但如果你打开控制台，它会给你一个关于语法的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-14T17:57:09.027

使用 Meteor 1.2.0.2 你可以这样做

```
Template.hello.helpers({
   isTrue() { return true }
}); 
```

# python - Python - 尝试使用 LXML 解析网站搜索结果的问题

> ID：15252758
> 
> 赞同：0
> 
> 时间：2013-03-06T16:26:51.383
> 
> 标签：python, html-parsing, lxml

我正在尝试使用 LXML 解析从此搜索 URL 返回的搜索结果：

```
http://www.rte.ie/player/ie/search/?q=news 
```

HTML 中返回的文章标签是这样的：

```
 <article class="search-result clearfix"><a
    href="/player/ie/show/10117771/" class="thumbnail-programme-link"><span
        class="sprite thumbnail-icon-play">Watch Now</span><img class="thumbnail" alt="Watch Now"
        src="http://img.rasset.ie/0005d4bf-261.jpg"></a>
    <h3 class="search-programme-title"><a href="/player/ie/show/10117771/">elev8</a></h3>
    <p class="search-programme-episodes"><a href="/player/ie/show/10117771/">Tue 05 Mar 2013</a></p>
    <!-- p class="search-programme-date">05/03/2013</p -->
    <p class="search-programme-description">Ivan and Sean talk to future basketball sensation Julian Newman and the <span class="search-highlight">News</span> Dudes are in the loft with some crazy <span class="search-highlight">news</span> stories.</p>
     <span
    class="sprite logo-rte-two search-channel-icon">RTÃ‰ 2</span>
  </article>

  <article class="search-result clearfix"><a
    href="/player/ie/show/10118015/" class="thumbnail-programme-link"><span
        class="sprite thumbnail-icon-play">Watch Now</span><img class="thumbnail" alt="Watch Now"
        src="http://img.rasset.ie/000716b2-261.jpg"></a>
    <h3 class="search-programme-title"><a href="/player/ie/show/10118015/">One <span class="search-highlight">News</span></a></h3>
    <p class="search-programme-episodes"><a href="/player/ie/show/10118015/">Wed 06 Mar 2013</a></p>
    <!-- p class="search-programme-date">06/03/2013</p -->
    <p class="search-programme-description">The One O'Clock <span class="search-highlight">News</span> followed by Weather.</p>
    <span class="sprite logo-rte-one search-channel-icon">RTÃ‰ 1</span>
  </article>

  <article class="search-result clearfix"><a
    href="/player/ie/show/10117836/" class="thumbnail-programme-link"><span
        class="sprite thumbnail-icon-play">Watch Now</span><img class="thumbnail" alt="Watch Now"
        src="http://img.rasset.ie/00071614-261.jpg"></a>
    <h3 class="search-programme-title"><a href="/player/ie/show/10117836/"><span class="search-highlight">News</span> on Two and World Forecast</a></h3>
    <p class="search-programme-episodes"><a href="/player/ie/show/10117836/">Tue 05 Mar 2013</a></p>
    <!-- p class="search-programme-date">05/03/2013</p -->
    <p class="search-programme-description">All the <span class="search-highlight">news</span> and sport from home and abroad.</p>
     <span
    class="sprite logo-rte-two search-channel-icon">RTÃ‰ 2</span>
  </article>

  <article class="search-result clearfix"><a
    href="/player/ie/show/10117816/" class="thumbnail-programme-link"><span
        class="sprite thumbnail-icon-play">Watch Now</span><img class="thumbnail" alt="Watch Now"
        src="http://img.rasset.ie/000715f2-261.jpg"></a>
    <h3 class="search-programme-title"><a href="/player/ie/show/10117816/">Nine <span class="search-highlight">News</span></a></h3>
    <p class="search-programme-episodes"><a href="/player/ie/show/10117816/">Tue 05 Mar 2013</a></p>
    <!-- p class="search-programme-date">05/03/2013</p -->
    <p class="search-programme-description">The Nine <span class="search-highlight">News</span> followed by Weather.</p>
    <span class="sprite logo-rte-one search-channel-icon">RTÃ‰ 1</span>
  </article>

  <article class="search-result clearfix"><a
    href="/player/ie/show/10117789/" class="thumbnail-programme-link"><span
        class="sprite thumbnail-icon-play">Watch Now</span><img class="thumbnail" alt="Watch Now"
        src="http://img.rasset.ie/000715ae-261.jpg"></a>
    <h3 class="search-programme-title"><a href="/player/ie/show/10117789/">Six One <span class="search-highlight">News</span></a></h3>
    <p class="search-programme-episodes"><a href="/player/ie/show/10117789/">Tue 05 Mar 2013</a></p>
    <!-- p class="search-programme-date">05/03/2013</p -->
    <p class="search-programme-description">The Six One <span class="search-highlight">News</span> and Sport followed by Weather.</p>
    <span class="sprite logo-rte-one search-channel-icon">RTÃ‰ 1</span>
  </article>

  <article class="search-result clearfix"><a
    href="/player/ie/show/10117784/" class="thumbnail-programme-link"><span
        class="sprite thumbnail-icon-play">Watch Now</span><img class="thumbnail" alt="Watch Now"
        src="http://img.rasset.ie/000715a0-261.jpg"></a>
    <h3 class="search-programme-title"><a href="/player/ie/show/10117784/">Nuacht and <span class="search-highlight">News</span> with Signing</a></h3>
    <p class="search-programme-episodes"><a href="/player/ie/show/10117784/">Tue 05 Mar 2013</a></p>
    <!-- p class="search-programme-date">05/03/2013</p -->
    <p class="search-programme-description">Nuacht and <span class="search-highlight">News</span> with Signing.</p>
    <span class="sprite logo-rte-one search-channel-icon">RTÃ‰ 1</span>
  </article>

  <article class="search-result clearfix"><a
    href="/player/ie/show/10117770/" class="thumbnail-programme-link"><span
        class="sprite thumbnail-icon-play">Watch Now</span><img class="thumbnail" alt="Watch Now"
        src="http://img.rasset.ie/0007158d-261.jpg"></a>
    <h3 class="search-programme-title"><a href="/player/ie/show/10117770/"><span class="search-highlight">News</span>2Day</a></h3>
    <p class="search-programme-episodes"><a href="/player/ie/show/10117770/">Tue 05 Mar 2013</a></p>
    <!-- p class="search-programme-date">05/03/2013</p -->
    <p class="search-programme-description">Domestic and international <span class="search-highlight">news</span> items of interest to younger viewers.</p>
     <span
    class="sprite logo-rte-two search-channel-icon">RTÃ‰ 2</span>
  </article>

  <article class="search-result clearfix"><a
    href="/player/ie/show/10117728/" class="thumbnail-programme-link"><span
        class="sprite thumbnail-icon-play">Watch Now</span><img class="thumbnail" alt="Watch Now"
        src="http://img.rasset.ie/0007154e-261.jpg"></a>
    <h3 class="search-programme-title"><a href="/player/ie/show/10117728/">One <span class="search-highlight">News</span></a></h3>
    <p class="search-programme-episodes"><a href="/player/ie/show/10117728/">Tue 05 Mar 2013</a></p>
    <!-- p class="search-programme-date">05/03/2013</p -->
    <p class="search-programme-description">The One O'Clock <span class="search-highlight">News</span> followed by Weather.</p>
    <span class="sprite logo-rte-one search-channel-icon">RTÃ‰ 1</span>
  </article> 
```

我添加了以下代码来尝试解析返回的结果，但我的问题是重新生成的结果不一致。我感兴趣的部分是重复的文章标签，但问题是在返回的结果中找到搜索文本是添加标签 span class="search-highlight" 并且这会抛出我的解析。

```
url = "http://www.rte.ie/player/ie/search/?q=news"
req = urllib2.Request(url)
req.add_header('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3 Gecko/2008092417 Firefox/3.0.3')
response = urllib2.urlopen(req)
html = str(response.read())
response.close()

parser = etree.HTMLParser(encoding='utf-8')
tree   = etree.fromstring(html, parser)

for elem in tree.xpath('//article[@class="search-result clearfix"]'):
    icon_url = str(elem[0][1].attrib.get('src'))
    print 'icon_url ', icon_url

    name_tmp = str(elem[1][0].text)
    print 'name_tmp ', name_tmp

    stream = str(elem[1][0].attrib.get('href'))
    print 'stream ', stream

    date_tmp = str(elem[2][0].text)
    print 'date_tmp ', date_tmp

    short_tmp = elem[4].text
    print 'short_tmp ', short_tmp

    channel =  elem[5].text
    print 'channel ', channel 
```

问题字段是 name_tmp 和 short_tmp，由于搜索突出显示跨度标签，它们正在删除全文名称。谁能想到解析全文或忽略跨度标签的方法？

对不起，很长的帖子......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:32:23.013

我认为您可以`itertext()`在节点上使用该方法从所有后代文本节点获取内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:32:42.617

您正在寻找[`Element.itertext()`方法](http://lxml.de/api/lxml.etree._Element-class.html#itertext)：

```
name_tmp = ''.join(elem[1][0].itertext()) 
```

和

```
short_tmp = ''.join(elem[4].itertext()) 
```

有了这些修复，您的代码将打印：

```
icon_url  http://img.rasset.ie/0005d4bf-261.jpg
name_tmp  elev8
stream  /player/no/show/10117771/
date_tmp  Tue 05 Mar 2013
short_tmp  Ivan and Sean talk to future basketball sensation Julian Newman and the News Dudes are in the loft with some crazy news stories.
channel  RTÉ 2
icon_url  http://img.rasset.ie/000716b2-261.jpg
name_tmp  One News
stream  /player/no/show/10118015/
date_tmp  Wed 06 Mar 2013
short_tmp  The One O'Clock News followed by Weather.
channel  RTÉ 1 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:12:21.607

您可以使用[`lxml.html`](http://lxml.de/lxmlhtml.html)它使其更具可读性和更健壮：

```
from lxml import html

tree = html.parse("http://www.rte.ie/player/ie/search/?q=news")
for article in tree.xpath('//article[@class="search-result clearfix"]'):
    select = lambda expr: article.cssselect(expr)[0]
    title = select(".search-programme-title")
    info = dict(
        icon_url=select("img.thumbnail").get('src'),
        name=title.text_content(),
        stream=title.find('a').get('href'),
        date=select(".search-programme-episodes").text_content(),
        short=select(".search-programme-description").text_content(),
        channel=select(".search-channel-icon").text_content())
    print(info) 
```

### 输出

```
{'short': 'Ivan and Sean talk to future basketball sensation Julian Newman and the News Dudes are in the loft with some crazy news stories.', 'stream': '/player/ru/show/10117771/', 'name': 'elev8', 'date': 'Tue 05 Mar 2013', 'icon_url': 'http://img.rasset.ie/0005d4bf-261.jpg', 'channel': 'RTÉ 2'}
{'short': "The One O'Clock News followed by Weather.", 'stream': '/player/ru/show/10118015/', 'name': 'One News', 'date': 'Wed 06 Mar 2013', 'icon_url': 'http://img.rasset.ie/000716b2-261.jpg', 'channel': 'RTÉ 1'}
... 
```

# google-app-engine - Google Translation API 的 OAuth 范围是什么？

> ID：15252760
> 
> 赞同：4
> 
> 时间：2013-03-06T16:26:52.977
> 
> 标签：google-app-engine, oauth-2.0, google-api-client, oauth2-playground, oauth2client

肯定有人在使用 API，我查看并搜索过，在进行身份验证时，我似乎找不到正确的范围参数值：

我查看了所有这些范围列表，什么都没有，尝试了 OAuth 2.0 游乐场，没有翻译。

[oauth 游乐场 v1](http://googlecodesamples.com/oauth_playground/)

[oauth 游乐场 v2](https://developers.google.com/oauthplayground/)

[誓言支持范围](https://developers.google.com/gdata/articles/oauth#TokenScope)

[授权范围](https://developers.google.com/gdata/faq#AuthScopes)

欢迎任何线索，谢谢。

错误信息：

```
Error: invalid_request

Missing required parameter: scope

Learn more
Request Details 
```

**更新**

用户 Ezra 解释说 Translation API 不需要 OAuth2 身份验证。

我沿着这条路走上这条路：

我试图使这里的示例代码工作：

[翻译api示例代码](http://code.google.com/p/google-api-python-client/source/browse/samples/translate/main.py)

并且没有 apiclient.discovery 模块

```
from apiclient.discovery import build 
```

我开始寻找让我[来到这个快速启动配置器的东西，它在](https://developers.google.com/api-client-library/python/start/installation)[这里](https://google-api-client-libraries.appspot.com/quickstart/c/gen?api=translate&language=python&language_variant=stable&platform=appengine&version=v2) 给了我一个自动生成的翻译 api 项目：

这个应该为翻译 API 量身定制的入门项目包括一大堆 OAuth 配置，所以由于这里提到的错误，我最后问了这个问题

```
 exception calling translation api: <HttpError 400 when requesting    https://www.googleapis.com/language/translate/v2?q=zebra&source=en&alt=json&target=fr&key=MYSECRETKEYWENTHERE returned "Bad Request"> 
```

我用来进行上述调用的代码是：

```
 service = build('translate', 'v2',
        developerKey='MYSECRETKEYWENTHERE')
result = service.translations().list(
  source='en',
  target=lang,
  q='zebra'
).execute() 
```

如果我直接进行错误抱怨的相同调用，则可以正常工作

```
https://www.googleapis.com/language/translate/v2?key=MYSECRETKEYWENTHERE&q=zebra&target=fr&alt=json&source=en 
```

**再次更新**

好的，我从示例项目中删除了所有 OAuth 代码，然后再次运行它，然后终于注意到我的密钥中有一个错字... donk

感谢您的回答！

.

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:17:50.443

我认为您误解了 OAuth 范围的用途。您没有列出任何代码，所以我将解释一些概念，并希望您可以将它们应用于您的情况。

* * *

## OAuth 范围解释：

OAuth 范围的目的是访问有关经过身份验证的用户的信息。每个应用程序的范围不同，并确定应用程序被授予访问权限的有关用户的哪些信息。

具体来说，一个 OAuth 请求，其范围参数为

`https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile`

登录时会向用户显示类似于以下的提示：

```
+ View basic information about your account
    * View your name, public profile URL, and photo
    * View your gender and birthdate
    * View your country, language, and timezone
+ View your email address
    * View the email address associated with your account 
```

虽然只有一个`https://www.googleapis.com/auth/userinfo.email`会显示如下内容：

```
+ View your email address
    * View the email address associated with your account 
```

## 翻译 API 解释：

要使用翻译 API，您不必让用户使用 OAuth 进行身份验证。您只需获取一个 API 密钥，并在您对服务的请求中提供该密钥。

Translate API 的使用与 OAuth 的使用完全正交。

正如[Translate API 网站](https://developers.google.com/translate/v2/using_rest)上所记录的那样，要翻译某些内容，您只需发出请求

```
https://www.googleapis.com/language/translate/v2?parameters 
```

与适当的参数。

如文档中所列，所需的参数是

*   **API 密钥**。使用关键查询参数来识别您的应用程序。
*   **目标语言**。使用目标查询参数指定要翻译成的语言。
*   **源文本字符串**。使用 q 查询参数来识别要翻译的字符串。

具体来说，将文本“hello world”翻译成德语的请求是：

```
https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&source=en&target=de&q=Hello%20world 
```

查看[参数规范](https://developers.google.com/translate/v2/using_rest#query-params)以了解您必须提供的内容。

## 该怎么办：

查看[使用 Translate API 的 Python 示例](http://code.google.com/p/google-api-python-client/source/browse/samples/translate/)的源代码或查找[您要使用的语言的 API 库](https://developers.google.com/translate/v2/libraries)。

您将在示例中看到没有提及 OAuth 范围，因为不需要针对 Translate API 服务进行身份验证。您只需要提供您的 API 密钥，以及您对服务的请求中要翻译的文本。

可能存在需要范围的 API 调用，但 Translate 不是其中之一。

* * *

*如果您需要有关用户*的某些信息，则必须查找访问该信息所需的 API 和范围。然后，您将根据需要将此信息提供给 Translate API。

## 在以下情况下`400`：

如果您收到错误响应，那很好，因为对服务的调用正在运行，即使它没有按照您的意愿执行。

在 a 的情况下`400`，Translate API 的响应将为您提供有关其响应中错误的线索。

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "keyInvalid",
    "message": "Bad Request"
   }
  ],
  "code": 400,
  "message": "Bad Request"
 }
} 
```

上面的响应表明密钥无效。[您可以通过Google API 控制台](https://code.google.com/apis/console/)请求新的（或查找旧的）。

## 概括：

*   OAuth 范围用于请求有关用户的信息。在对用户进行身份验证时，您必须确定范围，并且您将有权访问这些范围提供的所有信息。
*   Translate API 不需要范围。您在请求中提供 API 密钥（和其他一些信息），它会[按照文档](https://developers.google.com/translate)返回翻译。
*   如果您希望翻译有关用户的信息，则必须分两步完成。首先，通过在适当范围内对用户进行身份验证来收集信息，其次通过将该信息提供给 Translate API。
*   如果您收到`400`，则响应将包含一些可用于调试问题的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:30:45.177

根据[Google 的文档](https://developers.google.com/gdata/faq#AuthScopes)，您必须查看特定 API 的文档。

根据[此 Google Group question](https://groups.google.com/forum/?fromgroups=#!topic/google-ajax-search-api/oVTXDbTKhF8)更新：

“Translate API（v1 和 v2）是未经身份验证的 API，因此您不需要使用 OAuth。相反，对于 v2，您应该使用 API 密钥，您可以在此处获取： [http://code .google.com/apis/console](http://code.google.com/apis/console) "

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T19:42:25.637

对于错误信息

错误：invalid_request 缺少必需参数：范围

您需要在表单中添加范围

```
<input type="hidden" name="scope" value="https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo#email https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/tasks https://www-opensocial.googleusercontent.com/api/people https://www.googleapis.com/auth/plus.login" /> 
```

请参考linkedin、facebook、twitter 和google 提供商的[春季社交登录。](https://github.com/sunilpulugula/SpringSecuritySocialLoginExample)

# phpmyadmin - phpmyadmin 在 Windows 8 上使用 WAMP 连接非常慢

> ID：15252761
> 
> 赞同：0
> 
> 时间：2013-03-06T16:26:53.477
> 
> 标签：phpmyadmin, wamp, wampserver

以下是由 Drupal 7 中的 devel 模块生成的。我在我的 Windows 8 机器上运行我的站点的本地版本。

> 在 391.79 毫秒内执行了 787 个查询。页面执行时间为 5250.65 毫秒。使用的内存：devel_boot()=6.12 MB，devel_shutdown()=101.55 MB，PHP 峰值=102.75 MB。

我无法理解是什么导致了巨大的执行时间。

非常感谢任何提示

我已经完成了[这篇文章中的所有建议](http://forum.wampserver.com/read.php?2,91602)

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T23:04:36.503

尝试在连接中使用 ip 地址而不是 localhost

所以你在哪里看到

```
$server = "localhost" 
```

利用

```
$server = "127.0.0.1" 
```

# asp.net - ASP.NET Web 表单在 FireFox 和 Chrome 中不占用整个屏幕，但在 IE 中占用

> ID：15252766
> 
> 赞同：1
> 
> 时间：2013-03-06T16:27:10.213
> 
> 标签：asp.net, html, css, master-pages

我们有一个 asp.net 母版页，它使用表格定义了我们的 Web 应用程序布局。目标是让内容页面在显示页眉和页脚后占据整个可用屏幕空间。这在 IE 中对我们很有效，但在 Chrome 或 FireFox 中无法正常工作。

Chrome 和 FireFox 的情况是内容部分仅扩展以包裹内容，例如欢迎屏幕最终只占据屏幕的一小部分，在屏幕底部留下一个大的空白部分。

这是我们的布局结构的基本示例：

```
<table style=height:80%;width:100%" cellpadding="0" cellspacing="0">
<tbody>

 <tr>  
  <td colspan="2">
  <!--Header Banner goes here This displays fine--> 
  </td> 
 </tr>

<tr style="height:100%" valign="top">
 <!--Content Goes Here. Problem is that page only expands 
      as much as its content section vs filling up the whole page. -->

</tr>
<tr>
<!--Footer Goes here. This works fine!!-->
 </tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:32:41.547

您的问题是您正在使用表格进行布局。这可以通过使用像粘性页脚 ( [http://ryanfait.com/sticky-footer](http://ryanfait.com/sticky-footer) ) 之类的适当 HTML 轻松实现。

我建议获取 HTML5 样板或类似文件 ( [http://html5boilerplate.com](http://html5boilerplate.com) ) 并从那里开始工作。

如果这是一个现有的 Web 应用程序，您无法更改其 HTML，那么 Javascript 可能是一个解决方案......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:31:57.803

没有好的方法可以在 CSS 中指定元素至少应与屏幕一样高。你必须求助于 JavaScript。

由于确定客户端屏幕的高度也是每个浏览器版本可能略有不同的事情，因此使用 jQuery 是最安全的：

```
// tableID is the ID of your element that you want to take up the space
$("#tableID").height($(window).height()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:38:12.527

您的代码中缺少一些`<td></td>`和`"`。

还添加

```
html,body {
    height:100%;
    min-height:100%;
} 
```

到样式表。而 HTML 是

```
<table style="height:80%;width:100%;background-color:yellow" cellpadding="0" cellspacing="0">
<tbody>

 <tr>  
  <td colspan="2" style="background-color:red">
  Header Banner goes here This displays fine
  </td> 
 </tr>

<tr valign="top">
    <td  style="background-color:green;height:100%">Content Goes Here. Problem is that page only expands as much as its content     section vs filling up the whole page.</td>
</tr>
<tr>
    <td  style="background-color:blue">Footer Goes here. This works fine!!</td>
 </tr>
</tbody>
</table> 
```

**实时预览 >>** [jsfiddle](http://jsfiddle.net/s9HuZ/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:57:53.817

`margin-top:0px`在您的内容 tr 标签中设置

# sql - 为sql server创建用户

> ID：15252767
> 
> 赞同：1
> 
> 时间：2013-03-06T16:27:10.420
> 
> 标签：sql, sql-server

下面的代码允许我通过使用查询在 sql server 中创建用户。它当前创建一个用户配置文件，但它允许用户访问服务器上的所有数据库。我只希望他们能够访问“TEST”数据库我将如何去做

```
CREATE LOGIN [SupportUser]
WITH PASSWORD=N'SupportUser',
DEFAULT_DATABASE=[master],
DEFAULT_LANGUAGE=[us_english],
CHECK_EXPIRATION=OFF,
CHECK_POLICY=OFF
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:31:04.807

```
CREATE LOGIN [SupportUser] WITH PASSWORD=N'SupportUser', DEFAULT_DATABASE=[MASTER], 
CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF
GO
USE [TEST]
GO
CREATE USER [SupportUser] FOR LOGIN [SupportUser]
GO
USE [TEST]
GO
EXEC sp_addrolemember N'db_datareader', N'SupportUser'
GO
USE [TEST]
GO
EXEC sp_addrolemember N'db_datawriter', N'SupportUser'
GO
USE [TEST]
GO
EXEC sp_addrolemember N'db_ddladmin', N'SupportUser'
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:31:48.170

尝试这个。

```
CREATE LOGIN [SupportUser] 
WITH PASSWORD=N'SupportUser', 
DEFAULT_DATABASE=[master], 
CHECK_EXPIRATION=OFF, 
CHECK_POLICY=OFF
GO
USE [TEST]
GO
CREATE USER [SupportUser] FOR LOGIN [SupportUser]
GO
use [TEST]
GO
GRANT SELECT ON [dbo].[myView] TO [SupportUser]
GO 
```

# c# - 在ac#字典中存储矩阵

> ID：15252768
> 
> 赞同：0
> 
> 时间：2013-03-06T16:27:16.377
> 
> 标签：c#

我知道 C# 字典基本上是一个键：值对

有没有办法将矩阵存储在 ac# 字典中。

即key是否可以是两个值（行、列）的组合

例如

```
1 3
4 7

[0][0]:1, [0][1]:3, [1][0]:4, [1][1]:7 
```

可以为此构建字典吗？如果是这样，我将如何解析它的元素。如果 key 是单个值，事情会容易得多。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:28:34.300

直接回答您的问题：是的，您*可以*将矩阵存储在字典中。

```
Dictionary<Tuple<int,int>, int> matrix; 
```

但更好的方法是将矩阵存储为二维或锯齿状数组。

```
int[,] matrix;    // 2-dmmensional
int[][] matrix;   // jagged 
```

数组可能效率低下的唯一情况是矩阵稀疏（即有许多缺失值）。在这种情况下，您可能会考虑使用字典或列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:32:09.103

您可以使用`Tuple<int,int>`( [link](http://msdn.microsoft.com/en-us/library/system.tuple.aspx) ) 作为键，因为值需要是不可变的才能成为字典的准确键。我想指出的唯一一件事是，矩阵往往用于按行或按列提取值的情况，如果以这种方式存储它们，您将无法做到这一点。

您是否考虑过使用已经定义矩阵的库？有很多数学库和助手可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T16:30:52.643

您还可以将矩阵存储在二维数组中：

```
int[,] matrix = new int[2,2];
matrix[0,0] = 1;
matrix[0,1] = 3;
matrix[1,0] = 4;
matrix[1,1] = 7; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T16:28:37.893

您可以声明`Dictionary`使用`Tuple`类来存储矩阵：

```
Dictionary<Tuple<int,int>, int> 
```

甚至`KeyValuePair`：

```
Dictionary<KeyValuePair<int, int>, int> 
```

但是如果你没有任何特定的原因，你应该使用多维数组`int[,]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T16:33:19.793

正如我评论的那样，您可以使用普通的旧多维数组，但是既然您问过：

```
var array = new int[,]
{
    {1,2,3},
    {4,5,6},
    {7,8,9},
};
var query = 
    from row in Enumerable.Range(0, array.GetUpperBound(0))
    from col in Enumerable.Range(0, array.GetUpperBound(1))
    select new KeyValuePair<Tuple<int,int>, int>(
                Tuple.Create(row,col), 
                array[row,col]);
var asDict = query.ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

# r - 用 ggplot2 躲避另一组

> ID：15252769
> 
> 赞同：1
> 
> 时间：2013-03-06T16:27:24.973
> 
> 标签：r, graphics, ggplot2

我试图在某些组的一堆点上绘制一条线。例如，我有：

```
x = rep(c('fruit', 'vegetable'), 15)
z = c(rep(c(rep('fresh', 2), rep('ripe', 2), rep('rotten', 2)), 5)
s = c(rep('pick1', 6), rep('pick2', 6), rep('pick3', 6), rep('pick4', 6), rep('pick5', 6))

y = runif(30, min=11, max=15)
low = rep(c(0, 1), 15)
y[low == 1] = y[low == 1] - 10
y[low == 0] = y[low == 0] - 5

groceries_df = data.frame(type=x, value=y, age=z, species=s) 
```

其中 type 是“fruit”或“vegetable”，age 是“fresh”、“ripe”或“rotten”，species 是商店中不同选择的唯一列表，因此有 2*3 = 6 个值对于每个物种。我将这些值分组在由它们的年龄定义的离散 x 轴上，并且它们按它们的类型分组（因此按它们的类型躲避）。

```
dodge = position_dodge(width=0.9)
p = ggplot(groceries_df, aes(factor(age), value, color=factor(type), shape=factor(type))) +
           geom_jitter(position=dodge) +
           geom_line(data=groceries_df[groceries_df$type == 'fruit',],     aes(group=factor(species)), position=dodge) +
           geom_line(data=groceries_df[groceries_df$type == 'vegetable',], aes(group=factor(species)), position=dodge) 
```

这段代码产生了一个非常接近我想要的图，但我注意到 geom_line 按物种躲避，而不是按类型。似乎我只需要重定向闪避，即使我需要按物种对实际线进行分组（所以我可以看到一个物种的价值从一种类型到所有年龄段的另一种类型的转变）。有没有办法重定向闪避？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:10:52.117

一种解决方案是将新列添加到现有数据框中，该数据框将包含`type`和`species`列的组合（实际上需要这两列来对线的点进行分组）（取自@joran [answer](https://stackoverflow.com/questions/9968976/group-by-two-columns-in-ggplot2)的想法）。

```
groceries_df$comb<-paste(groceries_df$type,groceries_df$species) 
```

然后只需将此新列用作`group=`. 这样你也需要更少的命令行。

```
ggplot(groceries_df,aes(age,value,color=type,shape=type,group=comb))+
  geom_jitter(position=dodge)+geom_line(position=dodge) 
```

![在此处输入图像描述](../Images/7102ee66877d177dc95d9a7fc57bc418.png)

# php - PHP preg_replace 匹配 HTML 属性

> ID：15252770
> 
> 赞同：1
> 
> 时间：2013-03-06T16:27:25.677
> 
> 标签：php, html, regex, html-parsing

我正在尝试从 HTML 元素中删除 title 属性。

```
function remove_title_attributes($input) {
    return remove_html_attribute('title', $input);
}

/**
 * To remove an attribute from an html tag
 * @param string $attr the attribute
 * @param string $str the html
 */
function remove_html_attribute($attr, $str){
    return preg_replace('/\s*'.$attr.'\s*=\s*(["\']).*?\1/', '', $str);
} 
```

但是，它无法区分`<img title="something">`和`[shortcode title="something"]`。如何仅定位 HTML 标记中的代码（例如`<img>`或`<a href=""><a>`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:41:30.963

不要使用正则表达式，而是使用 DOM 解析器。转到[官方参考页面](http://php.net/manual/en/class.domdocument.php)并研究它。在您的情况下，您需要[DOMElement::removeAttribute()](http://php.net/manual/en/domelement.removeattribute.php)方法。这是一个例子：

```
<?php

$html = '<p>stuff <a href="link" title="something">linkme</a></p><p>more stuff</p><p>even more stuff</p>';

$dom = new DOMDocument();
$dom->loadHTML($html);

$domElement = $dom->documentElement;

$a = $domElement->getElementsByTagName('a')->item(0);
$a->removeAttribute('title');

$result =  $dom->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:25:45.917

我使用来自@Hast 的代码作为构建块。看起来这可以解决问题（除非有更好的方法？）

```
/**
 * To remove an attribute from an html tag
 * @param string $attr the attribute
 * @param string $str the html
 */
function remove_html_attribute($attr, $input){
    //return preg_replace('/\s*'.$attr.'\s*=\s*(["\']).*?\1/', '', $input);

    $result='';

    if(!empty($input)){

        //check if the input text contains tags
        if($input!=strip_tags($input)){
            $dom = new DOMDocument();

            //use mb_convert_encoding to prevent non-ASCII characters from randomly appearing in text
            $dom->loadHTML(mb_convert_encoding($input, 'HTML-ENTITIES', 'UTF-8'));

            $domElement = $dom->documentElement;

            $taglist = array('a', 'img', 'span', 'li', 'table', 'td'); //tags to check for specified tag attribute

            foreach($taglist as $target_tag){
                $tags = $domElement->getElementsByTagName($target_tag);

                foreach($tags as $tag){
                    $tag->removeAttribute($attr);
                }
            }

            //$result =  $dom->saveHTML();
            $result = innerHTML( $domElement->firstChild ); //strip doctype/html/body tags
        }
        else{
            $result=$input;
        }
    }

    return $result; 
}

/**
 * removes the doctype/html/body tags
 */
function innerHTML($node){
  $doc = new DOMDocument();
  foreach ($node->childNodes as $child)
    $doc->appendChild($doc->importNode($child, true));

  return $doc->saveHTML();
} 
```

# jquery - 成功提交后jQuery验证并转到页面

> ID：15252775
> 
> 赞同：0
> 
> 时间：2013-03-06T16:27:36.907
> 
> 标签：jquery, jquery-validate

我正在使用`jquery.validate.min.js`脚本，就验证而言，它的工作正常。

我的问题是它应该发布/提交到数据，但我需要它`success.php`在成功提交后实际进入页面。

现在它只是`success.php`在我的主页中回显并显示。

下面的代码如何：

```
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
<script>
$(document).ready(function() {

$("#form1").validate({

    debug: false,
    rules: {
    name: "required",
    email: {
    required: true,
    email: true,
    }
    },
    messages: {
    name: "Please enter your name.",
    email: "Please enter a valid email address.",
    },
    submitHandler: function(form) {

    $.post('success.php', $("#form1").serialize(), function(data) {
    $('#result').html(data);
    });

    }
});

}); 

<form id="form1" action="success.php" method="POST">
    <input name="name" type="text" />
    <input name="email" type="text" />
    <input type="submit" value="submit" />
</form>
</script> 
```

提交成功后如何让它进入发帖页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:32:39.553

**你的代码：**

```
submitHandler: function(form) {
    $.post('success.php', $("#form1").serialize(), function(data) {
        $('#result').html(data);
    });
} 
```

> “现在它只是`success.php`在我的主页中回显并显示。”

是的，这正是[jQuery`$.post()`](http://api.jquery.com/jQuery.post/)应该发挥作用的方式。是`ajax`。

只需`submitHandler`从`.validate()`. `ajax`如果您只是希望它重定向到默认页面，那么在这种情况下使用提交表单确实没有意义。删除该`submitHandler`选项，它将像标准表单一样根据您的`action`属性进行重定向。

默认情况下，插件会测试有效性，如果表单有效，它将像任何其他标准表单一样提交并遵循您的`action="success.php"`.

**工作演示：http: [//jsfiddle.net/yCePj/](http://jsfiddle.net/yCePj/)**

```
$(document).ready(function () {

    $("#form1").validate({
        debug: false,
        rules: {
            name: "required",
            email: {
                required: true,
                email: true,
            }
        },
        messages: {
            name: "Please enter your name.",
            email: "Please enter a valid email address.",
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:33:09.253

那这个呢？

```
 <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
<script>
$(document).ready(function() {

$("#form1").validate({

    debug: false,
    rules: {
    name: "required",
    email: {
    required: true,
    email: true,
    }
    },
    messages: {
    name: "Please enter your name.",
    email: "Please enter a valid email address.",
    }
});

}); 

function SubmitIfValid()
{
    if(!$("#form1").valid()) return false;  
    return true;
}

</script>

<form id="form1" action="success.php" method="POST">
    <input name="name" type="text" />
    <input name="email" type="text" />
    <input type="submit" value="submit" onclick="return SubmitIfValid();" />
</form> 
```

# mongodb - 如何在 mongodb 中索引以下查询？

> ID：15252781
> 
> 赞同：0
> 
> 时间：2013-03-06T16:27:44.493
> 
> 标签：mongodb, indexing

我试图找出在 mongodb 中用于此的最佳索引：

```
db.articles.find({"images.url":{"$exists":true}, \  
    "source_id": {"$in":[ObjectId("511baf3aa56bde8e94000002"), ObjectId("511baf3aa56bde8e94000999")]}})  \
    .sort({"published_at": -1}) 
```

我只想包含存在 images.url 的文章，所以我想知道它是否是稀疏索引？并且不确定要按顺序索引哪些字段，因为我已经阅读了以下不同的指针：

1.  首先，您将查询确切值的字段。（“images.url”：存在）
2.  其次，您将对其进行排序的字段。(:published_at)
3.  最后，您将查询一系列值的字段。(source_id)

另外，在上面的示例中，我不确定 source_id 是否是一个值范围？

我刚在想：

```
index "images.url": -1, published_at: -1, source_id: 1, {sparse: true} 
```

但我也对最大化索引的排他性感到不安，所以我正在考虑：

```
index source_id: 1, "images.url": -1, published_at: -1, {sparse: true} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:26:41.467

如果我们有这样的收藏

```
{ a:1, b:1, c:1 }
{ a:1, b:1, c:2 }
{ a:1, b:1, c:3 }
{ a:1, b:2, c:1 }
... // all permutations up to:
{ a:3, b:3, c:3 } 
```

以随机顺序想象这个集合

这就是 ({a:1,b:1,c:1}) 上的复合索引的样子

```
a:  |        1        |        2        |        3        |
    |-----------------+-----------------+-----------------|                   
b:  |  1  |  2  |  3  |  1  |  2  |  3  |  1  |  2  |  3  |
    |-----+-----+-----+-----+-----+-----+-----+-----+-----|
c:  |1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|1|2|3| 
```

对于每个 a，您依次拥有所有 b 和所有 c，好吗？

对于查询：**db.xx.find({a:2}).sort({b:1})**，您可以看到 b 元素在 a=2; 下方按顺序排列。索引将用于排序 - **“scanAndOrder”：** explain() 中的 false。如果您的查询是**db.xx.find({a:2,c:{$in:[1,3]}}).sort({b:1}) ，也会发生同样的情况**

但是这个：**db.xx.find({a:{$in:[1,3]}}).sort({b:1}).explain()**会告诉你**"scanAndOrder" : true**，这意味着index 不用于排序（尽管它用于查询） - 从上面的模式中您可以看到，“b”不是 a=[1,3] 的顺序。

这就是为什么索引的有效顺序是：

```
(1) exact matches (only one!)
(2) sort criteria
(3) matches that point to more than one document 
```

在您的情况下，没有完全匹配；两个查询都返回多个文档。让我们在我们的示例中尝试一下：

**db.xx.find({a:{$in:[1,3]},b:{$in:[1,3]}}).sort({c:1}).explain()：**使用index 用于查询，但不用于排序，它扫描 15 并返回 12 个对象。

**db.xx.find({b:{$in:[1,3]},c:{$in:[1,3]}}).sort({a:1}).explain()：**使用用于查询和排序的索引，但扫描 21 并返回 12 个对象。

哪一个更好？这将取决于您的用例。如果您的查找通常返回许多文档，那么让排序使用索引可能会更有效 - 但如果它通常只返回几个（在许多中），那么您可能更喜欢更有效的扫描。尝试一下，看看使用 explain() 有什么更好的

这有帮助吗？

问候

罗纳德

PS我用它来创建示例集合：

```
[1,2,3].forEach(function(a){
    [1,2,3].forEach(function(b){
        [1,2,3].forEach(function(c){
            db.xx.insert({a:a,b:b,c:c});
        })
    })
}) 
```

# java - 如何使用 eclipse 提取变量并将其转换为类？

> ID：15252782
> 
> 赞同：0
> 
> 时间：2013-03-06T16:27:45.633
> 
> 标签：java, eclipse, refactoring

我有一个问题，我将 HashMap 定义为变量，我应该在其中使用一个类以获得更好的可扩展性。

我想 Eclipse 重构

```
HashMap<String, Integer> result 
```

变量到我的结果类类型中，然后我可以扩展它。考虑到`HashMap`在我的整个项目中都使用了 ，我该如何做到这一点？

我希望结果不是一个`HashMap`，而是一个对象。

```
public class result {
     HashMap<String, Integer> res;
     public void setres(String res, int res) {

     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:09:40.003

刚开始更换。创建具有自己的 HashMap 字段的类，并在代码中的某处将 HashMap 替换为 YourClass。现在您将看到一些红色下划线，其中您的类没有实现 (HashMap) 方法。使用 QuickFix 创建缺少的方法，然后（短期）将调用直接委托给该字段。您将看到其他一些下划线，例如，您将 YourClass 传递给需要 HashMap 的方法。快速修复，因此该方法现在需要一个 YourClass，并修复您在那里看到的错误。重复直到完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T18:55:35.807

虽然 Carl Manaster 的回答是绝对正确的，但我会推荐一种不同的方法，扩展 HashMap 本身。因此，您只需要重写构造函数并覆盖所有 HashMap 方法，并且可以添加您需要的任何其他字段或自定义方法。

首先，您创建一个这样的类：

```
class ResultHashMap extends HashMap<String, Integer> {
 //Add all your customization here        
} 
```

然后你替换所有出现的：

```
HashMap<String, Integer> reslut = new HashMap<String, Integer>(); 
```

至：

```
ResultHashMap result = new ResultHashMap(); 
```

# jquery - 在 Jquery 中定位列表？

> ID：15252793
> 
> 赞同：0
> 
> 时间：2013-03-06T16:28:26.397
> 
> 标签：jquery

我有一个 ul 类 .answers。

如何定位该列表中的最后一个 li？

我有：

```
$(this).parent().children(".answers li:last") 
```

这针对答案很好：

```
$(this).parent().children(".answers'); 
```

只是最后一点有问题

* * *

HTML

```
<div class="control-group">
                    <label class="control-label">Answers:</label>
                    <div class="controls">
                    <ul class="answers">
                        <li class="answer">
                            <input class="input-xxlarge answerInput"  type="text" placeholder="Answer A" name="answer">
                            <button type="button" class="btn btn-inverse deleteAnswerBtn">x</button>
                        </li>
                        <li class="answer">
                            <input class="input-xxlarge answerInput"  type="text" placeholder="Answer A" name="answer">
                            <button type="button" class="btn btn-inverse deleteAnswerBtn">x</button>
                        </li>
                    </ul>
                    <button type="button" class="btn addAnswerBtn">+</button>
                    </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:31:12.960

这应该做你想要的：

```
$(this).parent().find('ul.answers li:last'); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/5qbZj/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:33:22.257

对于这种情况，您可以使用 jQuery [last-selector](http://api.jquery.com/last-selector/)：

```
$('ul.answers').find('li:last') 
```

# iphone - 自定义 CorePlot gridLineStyle

> ID：15252798
> 
> 赞同：1
> 
> 时间：2013-03-06T16:28:33.667
> 
> 标签：iphone, ios, objective-c, cocoa-touch, core-plot

在我的 CorePlot 实现中，我有一个如下所示的网格线样式：

![在此处输入图像描述](../Images/7251c05d0ad0d0b4bf94e135df454df1.png)

我实现它就这么简单：

```
CPTMutableLineStyle *gridLineStyle = [CPTMutableLineStyle lineStyle];
gridLineStyle.lineColor = [CPTColor grayColor];
gridLineStyle.lineWidth = 0.6f; 
```

不过，我想要的是看起来像这样的线条样式：

![在此处输入图像描述](../Images/5371f4c772c6d8b8290ab1cc0805b1e1.png)

关于如何定制`CPTMutableLineStyle`以使我的生产线成为这样的任何想法？我在 CorePlot 的 CorePlotExamples 示例项目中没有发现任何类似的东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:19:01.567

Core Plot 支持大多数内置的 Core Graphics 线条绘制属性。这`dashPattern`是您需要的属性。它支持简单的虚线或虚线以及更复杂的虚线图案。

*Plot Gallery*示例应用程序中的“控制图”示例显示了几个示例。

# android - 网站在现代 android 浏览器中呈现不同的呈现方式是否很常见？

> ID：15252806
> 
> 赞同：3
> 
> 时间：2013-03-06T16:29:11.337
> 
> 标签：android, html, css

我正在构建一个移动网站，但我无法让该网站在 4.0、4.1 和 4.2 的 chrome 浏览器和股票浏览器上的各种 android 手机上一致出现。但是当我在运行 ios 5 或 ios6 的 iphone 4s 和 5 上查看同一个网站时，该网站的显示和功能始终如一。

我正在开发的移动网站使用了 CSS3、大量的 javascript 动画、从 fonts.com 导入的字体以及与来自 vimeo.com 的视频的集成。

以下是我在各种机器人及其浏览器上遇到的问题示例：

*   第 1 人 - GS3 - Android 4.0 - 股票浏览器 - 网站总是崩溃
*   第 1 人 - GS3 - Android 4.0 - Chrome 浏览器 - 网站运行良好，除了一些字体没有出现
*   人 2 - Galaxy Nexus - Android 4.2 - 股票浏览器 - 效果很好
*   人 2 - Galaxy Nexus - Android 4.2 - Chrome 浏览器 - vimeo 视频无法播放
*   Person 3 - Galaxy Note - Android 4.0 - 股票浏览器 - 一切都很好
*   Person 4 - Samsung Galaxy - Android 4.1 - 股票浏览器 - 网站不断崩溃

**同一个网站在操作系统 4.0 及更高版本上的各种 android 浏览器上呈现不一致的情况是否很常见？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:43:37.503

在某种程度上，是的，这很常见。这是因为 Android 设备的硬件和功能不一定一致，尤其是当您开始使用运营商锁定设备时。

在一般的移动设备中，JavaScript 和 Flash 支持可能是粗略的（Vimeo 可能预见到这一点并改用 HTML5，但您仍然在谈论播放视频，这本身就是资源密集型的）。有些会支持这些，而有些则不会，有些支持它们的可能没有硬件来处理它们。JavaScript、Flash、自定义字体和视频播放都是资源密集型的，因此您可能会超载设备的功能。

我建议减少移动浏览器的美学特征，例如使用常用字体，减少动画（无论如何，其中大部分可能不会增加价值），并修剪一些较重的 CSS3 技巧（转换，动画等），看看这是否能改善这些浏览器的问题。为视频提供某种“嵌入失败”的后备方法（例如链接）可能也是一个好主意。（从完全删除 JavaScript 和高级 CSS 开始，然后慢慢添加内容，直到找到断点，这可能会更容易。）

作为旁注，研究“移动优先”开发原则的概念可能也是值得的，其中包括关注您的内容，然后在浏览器的功能支持它时添加美学（而不是从大处着手和削减东西​​）随着支持的下降而退出）。

# web - 我的网站中带有“赞”按钮的缩略图

> ID：15252814
> 
> 赞同：0
> 
> 时间：2013-03-06T16:29:40.723
> 
> 标签：web, facebook-like, facebook-javascript-sdk

我使用 iframe 将点赞按钮添加到我的网站

在阅读了与我的问题相关的许多问题/答案后，我添加到 HEAD：

```
<meta property="og:image" 
<meta property="og:title" content="EL SUR TAMBIEN ES AMERICA"/>
<meta property="og:url" content="http://elsuresamerica.weebly.COM/"/>
<meta property="og:type" content="website" /> 
```

我调试它并得到：

“指定了多个 OG URL：‘website’ 类型的 URL（我的网站）处的对象无效，因为它指定了多个 'og:url' 值：（我的网站），（我的网站）”

我不明白那是什么意思。我不是开发人员，只是一名作家，对此我感到很疯狂。当单击“赞”按钮时，我需要帮助以在 FB 中显示缩略图。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:33:00.887

如果那是原始代码，我会先看看是不是因为第一个元标记没有关闭；-) 尝试将 /> 添加到第一行的末尾

# performance - jQuery延迟脚本加载，访问应用程序变量

> ID：15252826
> 
> 赞同：0
> 
> 时间：2013-03-06T16:30:39.067
> 
> 标签：performance, jquery, jquery-plugins, js-amd

这是我的引导程序：

```
LanesBoard2010 = (function () {
    var appRoot = this;

    appRoot.deferredLoad = new Object(); //holding jqxhr states
    appRoot.utils = {}; //namespace for helper classes
    appRoot.models = {};
    appRoot.data = (function () { } ()); //store data from webservices here
    appRoot.app = (function () { } ()); //ViewModel
}(); 
```

经过一些初始化后，我运行了我的延迟应用程序加载器：

```
function appStart() {
    appRoot.deferredLoad.app = $.getScript('../TaskBoardContent/Script/app/lanesboard.js');
    $.when.apply($, appRoot.deferredLoad.app).then(function () {
        if (window.console)
            if (debug)
                console.log('application lanesdashboard was loaded successfully\n');
    }, function () {
        if (window.console)
            if (debug)
                console.log('fatal error: unable to load application lanesdashboard\n');
    });
}; 
```

现在我需要访问 appRoot，或者更一般地说，修改 LanesBoard2010 的属性。

以下语句来自我的 lanesboard.js。它只是在第一个 console.log 之后失败，因为我可以看到两个变量名都是未知的：

```
(function () {
    if (window.console)
        if (true) {
            console.log('App has been initialised successfully');
            console.log('Status of app access 1: ' + appRoot);
            console.log('Status of app access 2: ' + LanesBoard2010);

        }
}()); 
```

听起来可能很愚蠢，但我怎样才能安全地访问我的变量？有没有最佳实践？你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:39:21.177

你的问题到底是什么？如何防止使用未定义的变量？

您可以在任何调用之前定义它并将其初始化为`null`( ) 或在调用( )`var appRoot = LanesBoard2010 = null`之前检查变量。`console.log()``if (appRoot) console.log('Status of app access 1: ' + appRoot);`

我通常使用第一个建议。我首先将所有缓存设置为`null`，创建自动完成，然后用于`$.ajax`加载它们，并在加载时更新自动完成源。

# asp.net-mvc-4 - 如何在发布模式下使用 ASP.Net MVC 4 捆绑 LESS 文件？

> ID：15252829
> 
> 赞同：25
> 
> 时间：2013-03-06T16:30:47.570
> 
> 标签：asp.net-mvc-4, less, bundle

我正在尝试在我的 Web 项目中包含 LESS 文件，并将 MVC 4 捆绑功能调用到 dotLess 库中以将 LESS 转换为 CSS，然后缩小结果并将其提供给浏览器。

[我在ASP.NET 站点](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)上找到了一个示例（在*LESS、CoffeeScript、SCSS、Sass Bundling.*标题下）。这给了我一个`LessTransform`看起来像这样的类：

```
public class LessTransform : IBundleTransform
{
    public void Process(BundleContext context, BundleResponse response)
    {
        response.Content = dotless.Core.Less.Parse(response.Content);
        response.ContentType = "text/css";
    }
} 
```

`BundleConfig`我班上的这一行：

```
bundles.Add(new Bundle(
    "~/Content/lessTest", 
    new LessTransform(), 
    new CssMinify()).Include("~/Content/less/test.less")); 
```

最后，我的 _Layout.cshtml 中有以下行`<head>`：

```
@Styles.Render("~/Content/lessTest") 
```

如果我的站点处于调试模式，则会将其呈现给浏览器：

```
<link href="/Content/less/test.less" rel="stylesheet"/> 
```

应用了 .less 文件中的规则，并且跟随该链接显示 LESS 已正确转换为 CSS。

但是，如果我将站点置于发布模式，则会呈现以下内容：

```
<link href="/Content/less?v=lEs-HID6XUz3s2qkJ35Lvnwwq677wTaIiry6fuX8gz01" rel="stylesheet"/> 
```

.less 文件中的规则*未*应用，因为点击链接会从 IIS 中得到 404 错误。

因此，捆绑似乎出了点问题。我如何让它在发布模式下工作，或者我如何找出到底出了什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-20T12:28:40.563

作为已[接受答案](https://stackoverflow.com/a/15272208/41621)的补充，我创建了一个 LessBundle 类，它是 StyleBundle 类的 Less 等价物。

**LessBundle.cs**代码是：

```
using System.Web.Optimization;

namespace MyProject
{
    public class LessBundle : Bundle
    {
        public LessBundle(string virtualPath) : base(virtualPath, new IBundleTransform[] {new LessTransform(), new CssMinify()})
        {

        }

        public LessBundle(string virtualPath, string cdnPath)
            : base(virtualPath, cdnPath, new IBundleTransform[] { new LessTransform(), new CssMinify() })
        {

        }
    }
} 
```

用法类似于 StyleBundle 类，指定 LESS 文件而不是 CSS 文件。

将以下内容添加到您的**BundleConfig.RegisterBundles(BundleCollection)**方法中：

```
bundles.Add(new LessBundle("~/Content/less").Include(
                 "~/Content/MyStyles.less")); 
```

## **更新**

此方法在关闭优化的情况下运行良好，但在打开优化时我遇到了一些小问题（使用 CSS 资源路径）。经过一个小时研究这个问题后，我发现我[重新发明了轮子......](http://www.codinghorror.com/blog/2009/02/dont-reinvent-the-wheel-unless-you-plan-on-learning-more-about-wheels.html)

如果您*确实*需要我上面描述的 LessBundle 功能，请查看[System.Web.Optimization.Less](https://github.com/scott-xu/System.Web.Optimization.Less)。

NuGet 包可在[此处](https://www.nuget.org/packages/System.Web.Optimization.Less/)找到。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-07T13:15:10.987

**2019 年 12 月 8 日编辑这不再是这个问题的可接受答案，因为多年来 ASP.NET 发生了重大变化。后面还有其他答案修改了此代码或提供了其他答案来帮助您解决此问题。**

似乎无点引擎需要知道当前处理的捆绑文件的路径才能解析 @import 路径。如果您运行上面的流程代码，当正在解析的 .less 文件导入了其他 less 文件时，dotless.Core.Less.Parse() 的结果是一个空字符串。

Ben Foster 的回复将通过首先读取导入的文件来解决此问题：

[导入文件和 DotLess](https://groups.google.com/forum/?fromgroups=#!topic/dotless/j-8OP1dNjUY)

更改您的 LessTransform 文件，如下所示：

```
public class LessTransform : IBundleTransform
{
    public void Process(BundleContext context, BundleResponse bundle)
    {
        if (context == null)
        {
            throw new ArgumentNullException("context");
        }

        if (bundle == null)
        {
            throw new ArgumentNullException("bundle");
        }

        context.HttpContext.Response.Cache.SetLastModifiedFromFileDependencies();

        var lessParser = new Parser();
        ILessEngine lessEngine = CreateLessEngine(lessParser);

        var content = new StringBuilder(bundle.Content.Length);

        var bundleFiles = new List<FileInfo>();

        foreach (var bundleFile in bundle.Files)
        {
            bundleFiles.Add(bundleFile);

            SetCurrentFilePath(lessParser, bundleFile.FullName);
            string source = File.ReadAllText(bundleFile.FullName);
            content.Append(lessEngine.TransformToCss(source, bundleFile.FullName));
            content.AppendLine();

            bundleFiles.AddRange(GetFileDependencies(lessParser));
        }

        if (BundleTable.EnableOptimizations)
        {
            // include imports in bundle files to register cache dependencies
            bundle.Files = bundleFiles.Distinct();
        }

        bundle.ContentType = "text/css";
        bundle.Content = content.ToString();
    }

    /// <summary>
    /// Creates an instance of LESS engine.
    /// </summary>
    /// <param name="lessParser">The LESS parser.</param>
    private ILessEngine CreateLessEngine(Parser lessParser)
    {
        var logger = new AspNetTraceLogger(LogLevel.Debug, new Http());
        return new LessEngine(lessParser, logger, true, false);
    }

    /// <summary>
    /// Gets the file dependencies (@imports) of the LESS file being parsed.
    /// </summary>
    /// <param name="lessParser">The LESS parser.</param>
    /// <returns>An array of file references to the dependent file references.</returns>
    private IEnumerable<FileInfo> GetFileDependencies(Parser lessParser)
    {
        IPathResolver pathResolver = GetPathResolver(lessParser);

        foreach (var importPath in lessParser.Importer.Imports)
        {
            yield return new FileInfo(pathResolver.GetFullPath(importPath));
        }

        lessParser.Importer.Imports.Clear();
    }

    /// <summary>
    /// Returns an <see cref="IPathResolver"/> instance used by the specified LESS lessParser.
    /// </summary>
    /// <param name="lessParser">The LESS parser.</param>
    private IPathResolver GetPathResolver(Parser lessParser)
    {
        var importer = lessParser.Importer as Importer;
        var fileReader = importer.FileReader as FileReader;

        return fileReader.PathResolver;
    }

    /// <summary>
    /// Informs the LESS parser about the path to the currently processed file. 
    /// This is done by using a custom <see cref="IPathResolver"/> implementation.
    /// </summary>
    /// <param name="lessParser">The LESS parser.</param>
    /// <param name="currentFilePath">The path to the currently processed file.</param>
    private void SetCurrentFilePath(Parser lessParser, string currentFilePath)
    {
        var importer = lessParser.Importer as Importer;

        if (importer == null)
            throw new InvalidOperationException("Unexpected dotless importer type.");

        var fileReader = importer.FileReader as FileReader;

        if (fileReader == null || !(fileReader.PathResolver is ImportedFilePathResolver))
        {
            fileReader = new FileReader(new ImportedFilePathResolver(currentFilePath));
            importer.FileReader = fileReader;
        }
    }
}

public class ImportedFilePathResolver : IPathResolver
{
    private string currentFileDirectory;
    private string currentFilePath;

    public ImportedFilePathResolver(string currentFilePath)
    {
        if (string.IsNullOrEmpty(currentFilePath))
        {
            throw new ArgumentNullException("currentFilePath");
        }

        CurrentFilePath = currentFilePath;
    }

    /// <summary>
    /// Gets or sets the path to the currently processed file.
    /// </summary>
    public string CurrentFilePath
    {
        get { return currentFilePath; }
        set
        {
            currentFilePath = value;
            currentFileDirectory = Path.GetDirectoryName(value);
        }
    }

    /// <summary>
    /// Returns the absolute path for the specified improted file path.
    /// </summary>
    /// <param name="filePath">The imported file path.</param>
    public string GetFullPath(string filePath)
    {
        if (filePath.StartsWith("~"))
        {
            filePath = VirtualPathUtility.ToAbsolute(filePath);
        }

        if (filePath.StartsWith("/"))
        {
            filePath = HostingEnvironment.MapPath(filePath);
        }
        else if (!Path.IsPathRooted(filePath))
        {
            filePath = Path.GetFullPath(Path.Combine(currentFileDirectory, filePath));
        }

        return filePath;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-21T10:21:02.930

接受的答案不适用于最近对 ASP.NET 的更改，因此不再正确。

我已经在接受的答案中修复了来源：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Web.Hosting;
using System.Web.Optimization;
using dotless.Core;
using dotless.Core.Abstractions;
using dotless.Core.Importers;
using dotless.Core.Input;
using dotless.Core.Loggers;
using dotless.Core.Parser;

namespace Web.App_Start.Bundles
{
    public class LessTransform : IBundleTransform
    {
        public void Process(BundleContext context, BundleResponse bundle)
        {
            if (context == null)
            {
                throw new ArgumentNullException("context");
            }

            if (bundle == null)
            {
                throw new ArgumentNullException("bundle");
            }

            context.HttpContext.Response.Cache.SetLastModifiedFromFileDependencies();

            var lessParser = new Parser();
            ILessEngine lessEngine = CreateLessEngine(lessParser);

            var content = new StringBuilder(bundle.Content.Length);

            var bundleFiles = new List<BundleFile>();

            foreach (var bundleFile in bundle.Files)
            {
                bundleFiles.Add(bundleFile);

                var name = context.HttpContext.Server.MapPath(bundleFile.VirtualFile.VirtualPath);
                SetCurrentFilePath(lessParser, name);
                using (var stream = bundleFile.VirtualFile.Open())
                using (var reader = new StreamReader(stream))
                {
                    string source = reader.ReadToEnd();
                    content.Append(lessEngine.TransformToCss(source, name));
                    content.AppendLine();
                }

                bundleFiles.AddRange(GetFileDependencies(lessParser));
            }

            if (BundleTable.EnableOptimizations)
            {
                // include imports in bundle files to register cache dependencies
                bundle.Files = bundleFiles.Distinct();
            }

            bundle.ContentType = "text/css";
            bundle.Content = content.ToString();
        }

        /// <summary>
        /// Creates an instance of LESS engine.
        /// </summary>
        /// <param name="lessParser">The LESS parser.</param>
        private ILessEngine CreateLessEngine(Parser lessParser)
        {
            var logger = new AspNetTraceLogger(LogLevel.Debug, new Http());
            return new LessEngine(lessParser, logger, true, false);
        }

        /// <summary>
        /// Gets the file dependencies (@imports) of the LESS file being parsed.
        /// </summary>
        /// <param name="lessParser">The LESS parser.</param>
        /// <returns>An array of file references to the dependent file references.</returns>
        private IEnumerable<BundleFile> GetFileDependencies(Parser lessParser)
        {
            IPathResolver pathResolver = GetPathResolver(lessParser);

            foreach (var importPath in lessParser.Importer.Imports)
            {
                yield return
                    new BundleFile(pathResolver.GetFullPath(importPath),
                        HostingEnvironment.VirtualPathProvider.GetFile(importPath));
            }

            lessParser.Importer.Imports.Clear();
        }

        /// <summary>
        /// Returns an <see cref="IPathResolver"/> instance used by the specified LESS lessParser.
        /// </summary>
        /// <param name="lessParser">The LESS parser.</param>
        private IPathResolver GetPathResolver(Parser lessParser)
        {
            var importer = lessParser.Importer as Importer;
            var fileReader = importer.FileReader as FileReader;

            return fileReader.PathResolver;
        }

        /// <summary>
        /// Informs the LESS parser about the path to the currently processed file. 
        /// This is done by using a custom <see cref="IPathResolver"/> implementation.
        /// </summary>
        /// <param name="lessParser">The LESS parser.</param>
        /// <param name="currentFilePath">The path to the currently processed file.</param>
        private void SetCurrentFilePath(Parser lessParser, string currentFilePath)
        {
            var importer = lessParser.Importer as Importer;

            if (importer == null)
                throw new InvalidOperationException("Unexpected dotless importer type.");

            var fileReader = importer.FileReader as FileReader;

            if (fileReader == null || !(fileReader.PathResolver is ImportedFilePathResolver))
            {
                fileReader = new FileReader(new ImportedFilePathResolver(currentFilePath));
                importer.FileReader = fileReader;
            }
        }
    }
} 
```

请注意此代码的一个已知问题是 LESS @imports 必须使用它们的完整路径，即您必须使用`@import "~/Areas/Admin/Css/global.less";`而不是`@import "global.less";`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T18:58:51.527

看起来这样可行 - 我更改了`Process`迭代文件集合的方法：

```
public void Process(BundleContext context, BundleResponse response)
{
    var builder = new StringBuilder();
    foreach (var fileInfo in response.Files)
    {
        using (var reader = fileInfo.OpenText())
        {
            builder.Append(dotless.Core.Less.Parse(reader.ReadToEnd()));
        }
    }

    response.Content = builder.ToString();
    response.ContentType = "text/css";
} 
```

如果您的 less 文件中有任何`@import`语句，则会中断，在这种情况下，您必须做更多的工作，如下所示：[https ://gist.github.com/chrisortman/2002958](https://gist.github.com/chrisortman/2002958)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-08T16:02:08.980

已经有一些很好的答案，这是我在尝试添加与文件有关的 MVC 包时为自己找到的一个非常简单的解决方案`less`。

创建`less`文件（例如`test.less`）后，右键单击它并在 Web 编译器（[在此处获取](https://visualstudiogallery.msdn.microsoft.com/3b329021-cd7a-4a01-86fc-714c2d05bb6c)）选项下选择`Compile File`.

`css`这会从您的文件生成结果文件`less`，以及它的缩小版本。（`test.css`和`test.min.css`）。

在您的捆绑包上，只需参考生成的`css`文件

```
style = new StyleBundle("~/bundles/myLess-styles")
    .Include("~/Content/css/test.css", new CssRewriteUrlTransform());

bundles.Add(style); 
```

在您看来，请参考该捆绑包：

```
@Styles.Render("~/bundles/myLess-styles") 
```

它应该可以正常工作。

# ruby-on-rails - 如果找不到对象，Rails 在视图中继续移动

> ID：15252832
> 
> 赞同：0
> 
> 时间：2013-03-06T16:30:50.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 erb 模板中有以下语句：

```
<% if @serial.hacks.find(@serial.id) %>
  <h1><%= @serial.hacks.find(@serial.id).hack_name %><h1> 
<% end %> 
```

如果 hack_name 存在，我会尝试显示它，但是，如果它不存在，请防止出现错误。Serial 和 Hack 模型具有许多通过关系。

当我加载一个在 Serial 和 Hack 之间没有关联的页面时，我收到以下我试图阻止的错误：

```
Couldn't find Hack with id=2 [WHERE "hacktions"."serial_id" = 2] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:34:03.420

```
<% if hack = @serial.hacks.find_by_id(@serial.id) %>
  <h1><%= hack.hack_name %><h1> 
<% end %> 
```

但是你应该使用演示者。

顺便说一句，拥有它***真的很***奇怪。你真正想要的是什么？`serial``hacks``id`

* * *

编辑我猜你正在寻找：

```
<% @serial.hacks.each do |hack| %>
  <h1><%= hack.hack_name %><h1> 
<% end %> 
```

# asp.net-mvc - ASP.NET MVC 模型验证错误本地化上下文

> ID：15252835
> 
> 赞同：4
> 
> 时间：2013-03-06T16:30:56.783
> 
> 标签：asp.net-mvc, data-annotations, modelstate, asp.net-mvc-validation, model-validation

首先，我必须说我了解基于数据注释的模型验证在 ASP.NET MVC4 中是如何工作的，并且我已经使用`DataAnnotationsModelValidatorProvider`. 所以我不需要帮助来设置它。

但是当它归结为 时`HtmlHelpers`，我正在努力尝试找出错误消息的上下文。并且说`context`，我的意思是我们正在谈论的错误。哪个属性返回了错误？

我能得到的是`Key`错误和当前的错误，`ErrorMessage`但以编程方式，至少我知道，没有什么可以传达我们正在谈论的错误。无论是`Required`属性还是其他属性，我都找不到如何区分它们的方法。

让我们稍微打开场景。我有自定义`HtmlHelpers`渲染`ContentEditable`元素。例如`Html.ContentEditableValidationMessageFor(m => m.firstName);`. 它将输出如下内容：

```
<span contenteditable="true" data-valmsg-for="firstName" data-valmsg-replace="Please provide first name" class="field-validation-error">Please provide first name</span> 
```

现在，我确实有一个 jQuery 插件来处理和持久化`contenteditable`元素中的更改，并将它们持久化到后端。但是，UI 没有任何内容可以说明我们正在谈论的错误消息。人类可以很容易地看到它是`RequiredAttribute`，但在编程上没有数据可以将它与某些数据区分开来`MinLengthAttribute`。

在这种情况下，如果我只是将`data-valmsg-for="firstName"`用作本地化的键，那么对于与同一属性有关的所有错误都会返回相同的错误消息。

**四舍五入**

什么时候最好的做法`ModelState`是为 ModelError 发出唯一的 ID？考虑到我正在使用 ASP.NET MVC4 和`DataAnnotationsModelValidatorProvider`.

我可以想出很多“一起破解”的方法，但我想使用`ModelState`MVC 提供的任何东西。如果这一切都归结为编写一个 custom `ModelValidatorProvider`，那么我完全愿意接受它。只要它是最好和最可持续的方式。我完全赞成现在做的比**现在做的多，以后做的少****，然后永远破解以保持工作**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:39:24.963

您能否提供一些关于需要知道哪个规则触发了验证错误的上下文，这可能是您尝试做一些您不应该做的事情的情况吗？

一般来说，出于多种原因，我使用 FluentValidation ( [http://fluentvalidation.codeplex.com/wikipage?title=mvc](http://fluentvalidation.codeplex.com/wikipage?title=mvc) ) 来代替数据注释验证，去杂乱模型，单元测试验证逻辑，允许更复杂的验证，包括业务逻辑。如果您可以免费使用 3rd 方库，我会看看它，因为它总是解决我过去遇到的任何验证问题。

它允许您编写通过流式 API 处理模型验证的 c# 代码。它有一个 MVC 扩展，可以为您连接一切，因此除了创建模型验证类之外，从那时起几乎没有影响。上面的代码片段的一个例子是......

```
RuleFor(modelname => modelname.FirstName).NotEmpty().WithMessage("lease provide first name"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:47:53.490

即使实现`ModelValidatorProvider`也无济于事，它只是一种`ModelValidator`基于模型元数据提供s的机制。`ModelValidator`在调用控制器动作中的模型绑定过程时，结果只是`ModelValidationResult`包含`MemberName`一个文本`Message`。

我认为有一种肮脏的方法可以通过检查如下错误消息来找出哪个 ModelValidator 失败：

```
var modelErrors = ModelState.Where(m => m.Value.Errors.Count > 0).Select(m => new { Name=m.Key , Errors=m.Value.Errors}); 
```

通过针对 ValidatorProvider 错误消息检查 modelErrors 中每个键的 ErrorMessage 错误消息，您可以找出错误属于哪个 Validator。

# asp.net - 在 var html = string.Format 中创建 html 电子邮件格式

> ID：15252836
> 
> 赞同：0
> 
> 时间：2013-03-06T16:30:59.127
> 
> 标签：asp.net, html-email

再会。

我正在 ASP.NET 中创建一个 html 电子邮件。现在的问题是当我想向我的身体添加任何东西时，除了 html 和 body 标签。当我想添加样式时，代码文件给了我错误，其中很多......

我想添加这个

```
<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8" />
        <title>Enquiry</title>
    </head>
    <body>
    <div style="margin: 0 auto; text-align: center; background: #3C3B3D; padding: 10px;">
        <h4 style="color: #F3911F">Website Enquiry</h4>
    </div>
    <table style="text-align: center; margin: 0 auto;">
        <tr>
            <td>name: </td>
            <td>{0}</td>
        </tr>
    </table>
    </body>
</html> 
```

这里面

```
var html = string.Format("THE HTML HERE", TextBoxName.Text) 
```

当我将它添加到字符串时，Visual Studio 基本上会强调所有内容（上面的所有 html）......

如何在 ASP 中格式化/样式化我的电子邮件正文？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:45:07.677

您必须转义所有引号字符。有两种选择：

```
// for single line texts use \
var x = "abcd\"efg\"hij";

// for multiple lines use @ and double quotes
var x = @"abcd
""efg""
hij"; 
```

使用时，`String.Format`您还必须转义`{}`可能出现的任何字符（例如，在 CSS 或 JavaScript 块中，使用 double`{{}}`

```
var x = string.Format("This is the value: {0} and this is just the brackets {{asd}}", 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:33:41.500

您可以使用 StringBulider.Append()

一个简单的邮件发送代码在[这里](http://dotnet--solutions.blogspot.in/2013/03/send-mail-without-page-post-back-in.html)

# javascript - IE9 上的 Selenium JavascriptExecutor 导致“元素未滚动到视口”错误

> ID：15252837
> 
> 赞同：2
> 
> 时间：2013-03-06T16:31:00.847
> 
> 标签：javascript, selenium, internet-explorer-9, viewport

我正在尝试使用 JavascriptExecutor 从 selenium webdriver 在 IE9 中打开一个新选项卡：

```
public void openTab() {
    String url = webDriver.getCurrentUrl();
    String script = "var     a=document.createElement('a');a.target='_blank';a.href='" + url + "';a.innerHTML='open';document.body.appendChild(a);return a";
    Object element = getJSExecutor().executeScript(script);
    if (element instanceof WebElement) {
        WebElement anchor = (WebElement) element;
        anchor.click();
    } else {
        throw new RuntimeException("Unable to open tab: " + url);
    }
} 
```

这在 Chrome 中运行良好，但在 IE9 中运行时，出现以下错误：

ElementNotVisibleException：驱动程序尝试单击元素的点未滚动到视口中。

我正在使用 selenium 和 IEDriverServer 的 2.31 版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-08T15:09:31.903

我在并行虚拟机中的 IE9 中遇到了这个困难。这两行使整个事情发挥作用...

```
Actions builder = new Actions(webDriver);
builder.moveToElement(element).click(element).perform(); 
```

将元素滚动到视图中，然后单击它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:53:36.077

设法解决视口问题并让 IEDriverServer 在经过一番哄骗后与两个窗口正确交互，所以我想我会发布我的解决方案，以防其他人遇到这个问题。

为了解决视口问题，我使用 Actions 执行 moveToElement 然后单击：

```
public void actionsClick(WebElement element){
    Actions builder = new Actions(webDriver);
    builder.moveToElement(element).click(element).perform();
} 
```

IEDriverServer 似乎需要更长的时间来获取所有窗口句柄，所以我在单击后在 openTab 方法中添加了 5 秒的等待时间：

```
public void openTab() {
    String url = webDriver.getCurrentUrl();
    String script = "var a=document.createElement('a');a.target='_blank';a.href='" + url + "';a.innerHTML='open me in a new tab';document.body.appendChild(a);return a";
    Object element = getJSExecutor().executeScript(script);
    if (element instanceof WebElement) {
        WebElement anchor = (WebElement) element;
        actionsClick(anchor);
        waitFor(5000);
        switchBrowserTab();
        returnToPreviousBrowserTab();
    } else {
        throw new RuntimeException("Unable to open tab: " + url);
    }
} 
```

然后，如上面的方法所示，为了确保 IEDriverServer 知道两个窗口/选项卡并可以在它们之间移动，我在单击并等待后添加了 switchBrowserTab() 和 returnToPreviousBrowserTab() 方法。使用 JavascriptExecutor 打开一个新选项卡会将焦点留在原始选项卡中，并且此方法设置为以焦点再次回到那里而结束。如果有人以前没有使用过窗口句柄，这里是我用来切换到新打开的选项卡的方法：

```
 Set<String> handles = webDriver.getWindowHandles();
    List<String> handlesList = new ArrayList<String>();
    for (String handle : handles) {
        handlesList.add(handle);
    }
    webDriver.switchTo().window(handlesList.get(handlesList.size() - 1));
    webDriver.manage().window().maximize(); 
```

类似的方法用于向后移动，除了我得到当前句柄，然后循环遍历列表以找到它的位置，然后从那里移动到 -1 的句柄。

希望这会有所帮助。

编辑：这适用于 IE9 和 Chrome。未在其他浏览器中测试。

# ios - 将参数设置为 HTTP 请求

> ID：15252841
> 
> 赞同：1
> 
> 时间：2013-03-06T16:31:03.093
> 
> 标签：ios, xcode

我正在创建一个 HTTP 请求。这是我设置方法和参数的请求数组：

...

```
 NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
 [request setURL:[NSURL URLWithString:urlString]];
  [request setHTTPMethod:@"POST"];

 //set headers

 [request addValue:@"OAuth oauth_version=\"1.0\"" forHTTPHeaderField: @"Authorization"];

 //create the body
NSMutableData *postBody = [NSMutableData data]; 
```

...

我知道版本是1，参数是cursor和locale，方法是POST见[https://www.dropbox.com/developers/core/api#delta](https://www.dropbox.com/developers/core/api#delta)

我收到的响应是 403 或 0，而不是 JSON 字符串。这是设置参数的正确方法吗？我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:53:02.900

403 似乎与 OAuth 标头有关。

您是否考虑过使用 Dropbox OAuth API？ [https://www.dropbox.com/developers/core/sdk](https://www.dropbox.com/developers/core/sdk)

如果不是，您需要使用以下技术： [https ://www.dropbox.com/developers/blog/20](https://www.dropbox.com/developers/blog/20)

# c++ - 将静态变量声明为函数/成员函数是一种不好的做法吗？

> ID：15252842
> 
> 赞同：17
> 
> 时间：2013-03-06T16:31:03.357
> 
> 标签：c++, static

最近一位同事向我展示了这样的代码：

```
void SomeClass::function()
{
    static bool init = false;

    if (!init)
    {
        // hundreds of lines of ugly code
    }

    init = true;
} 
```

他想检查是否`SomeClass`已初始化，以便每个`Someclass`实例执行一次代码，但事实是`SomeClass`在程序的整个生命周期中只存在一个实例。

他的问题是关于`init`静态变量，关于它的初始化时间。我已经回答说初始化发生一次，因此该值将`false`在第一次调用和`true`其生命周期的其余时间。回答后，我补充说这样使用静态变量是不好的做法，但我无法解释原因。

到目前为止，我一直在考虑的原因如下：

*   `static bool init`into的行为`SomeClass::function`可以通过非静态成员变量来实现。
*   中的其他函数`SomeClass`无法检查该`static bool init`值，因为它的可见性仅限于`void SomeClass::function()`范围。
*   静态变量不是*OOPish*，因为它们定义了全局状态而不是对象状态。

这个原因对我来说看起来很糟糕，不聪明而且不是很具体，所以我要求更多的理由来解释为什么在函数和成员函数空间中使用静态变量是一种不好的做法。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T17:37:42.830

这肯定是一种罕见的情况，至少在高质量的代码中是这样，因为它适用于狭窄的情况。这基本上是对全局状态进行即时初始化（以提供一些全局功能）。一个典型的例子是有一个随机数生成器函数，它在第一次调用它时为生成器提供种子。另一个典型的用法是返回单例实例的函数，在第一次调用时初始化。但是其他用例示例很少而且相差甚远。

一般而言，全局状态是不可取的，并且具有包含自给自足状态的对象是优选的（对于模块化等）。但是如果你需要全局状态（有时你需要），你必须以某种方式实现它。如果您需要任何类型的非平凡全局状态，那么您可能应该使用单例类，并且提供该应用程序范围的单个实例的首选方法之一是通过提供对已初始化的本地静态实例的引用的函数在第一次通话。如果需要的全局状态稍微简单一点，那么使用本地静态 bool 标志执行该方案肯定是一种可接受的方式。换句话说，我认为采用这种*方法没有根本问题*，但如果出现这样的代码，我自然会质疑它的动机（需要全局状态）。

与全局数据的情况一样，多线程会导致像这样的简单实现出现一些问题。全局状态的天真引入永远不会本质上是线程安全的，这种情况也不例外，您必须采取措施解决该特定问题。这也是全球国家不可取的部分原因。

> 静态 bool init 进入 SomeClass::function 的行为可以通过非静态成员变量来实现。

如果有替代方案可以实现相同的行为，则必须根据技术问题（如线程安全）来判断这两个替代方案。但是在这种情况下，所需的行为是有问题的，而不是实现细节，替代实现的存在并没有改变这一点。

其次，我看不出如何用基于非静态数据成员（也许是*静态*数据成员）的任何东西来替换全局状态的即时初始化。即使可以，这也是一种浪费（需要为每个程序执行一次的东西存储每个对象），并且仅在这一点上，不会使它成为更好的选择。

> SomeClass 中的其他函数无法检查静态 bool 初始化值，因为它的可见性仅限于 void SomeClass::function() 范围。

我通常会将其放在“Pro”列中（如 Pro/Con 中）。这是一件好事。这是信息隐藏或封装。如果你能隐藏不应该让别人关心的事情，那就太好了！但是如果有其他函数需要知道全局状态是否已经初始化，那么你可能需要更多类似于单例类的东西。

> 静态变量不是 OOPish，因为它们定义了全局状态而不是对象状态。

OOPish 与否，谁在乎？但是，是的，全球状态是这里的关注点。与其说是使用局部静态变量来实现其初始化。全局状态，尤其是可变的全局状态，总体上是不好的，不应该被滥用。它们阻碍了模块化（如果模块依赖于全局状态，它们的自给自足性会降低），它们引入了多线程问题，因为它们本质上是共享数据，它们使任何使用它们的函数都不可重入（非纯），它们进行调试困难，等等......名单还在继续。但是这些问题中的大多数与您如何实现它无关。另一方面，使用局部静态变量是解决静态初始化顺序失败的好方法，因此，它们是好的，因此在引入（合理的）全局状态时要担心的问题更少进入你的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T16:32:27.187

考虑多线程。`function()`当可以由多个线程同时调用时，这种类型的代码是有问题的。没有锁定，你就可以接受竞争条件；使用锁定，并发可能没有真正的收益。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T16:33:44.287

全局状态可能是这里最严重的问题。其他功能不必关心它，所以这不是问题。它可以在没有`static`变量的情况下实现这一事实本质上意味着您制作了某种形式的单例。这当然会引入单例的所有问题，例如完全不适合多线程环境。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T16:44:11.353

添加到其他人所说的，您不能同时拥有此类的多个对象，或者至少它们不会按预期运行。第一个实例将设置静态变量并进行初始化。后来创建的那些虽然没有自己的版本，`init`但与所有其他实例共享。由于第一个实例将其设置为 true，所有后续都不会进行任何初始化，这很可能不是您想要的。

# zend-framework2 - 使用 Zend 框架 2 未在 JSON 中呈现 404 HTTP 错误

> ID：15252846
> 
> 赞同：4
> 
> 时间：2013-03-06T16:31:08.490
> 
> 标签：zend-framework2

我正在使用zend framework2创建一个简单的restful api，并且我参考了Rob Allen关于该主题的笔记以及http://hounddog.github.com/blog/getting-started-with-rest-and的这个优秀教程-zend-framework-2/

下面是我的module_config.php。您会看到我配置了路由和 JSON 视图策略。我的理解是，当您以这种方式设置 JSON 策略时，它会容纳所有模块。问题是，当输入无效路由时，即使 Accept 标头正在请求 Application/json，404 响应也会以 html 形式发回。

我已经为此苦苦挣扎了 2 天，任何建议或帮助将不胜感激

对 api 的 curl 调用会生成预期的 404 错误。

```
curl -i -H "Accept: application/json" http://myapi-dev.local/xxx/1 
```

模块配置.php

```
return array(
    'controllers' => array(
        'invokables' => array(
            'Dips\Controller\Roles' => 'Dips\Controller\RolesController', //maps controller alias to a physical controller
        ),
    ),
    'router' => array(
        'routes' => array(
            'dips' => array(
                'type' => 'segment',
                'options' => array(
                  'route' => '/dips/roles/:apikey/:uname/:appname',
                  'constraints' => array(
                    'apikey' => '[a-zA-Z0-9]+',
                    'uname' => '[a-zA-Z]+',
                    'appname' => '[a-zA-Z][a-zA-Z0-9_-]*',
                 ),
                 'defaults' => array(
                     'controller' => 'Dips/Controller/Roles',
                  ),
                ),
            ),
        ),
    ),
    'view_manager' => array(
      'strategies' => array(
          'ViewJsonStrategy',
      ),
    ),
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T21:33:07.683

您需要实现一个额外的渲染策略并将其放在默认 404 渲染策略之上的堆栈中。或者，您可以扩展现有的 ViewJsonStrategy 以包括错误处理。

默认的 404 策略是 Zend/Mvc/View/Http/RouteNotFoundStrategy。如果您查看它的 detectNotFoundError 方法，您可以看到它何时被触发。

# ios - CGContextFillRects 比 CGContextFillRect 快吗？

> ID：15252848
> 
> 赞同：4
> 
> 时间：2013-03-06T16:31:09.840
> 
> 标签：ios, objective-c

我的 iOS 应用程序中有一些代码，我在其中使用多次调用来绘制多个块`CGContextFillRect`。从我所听到的情况来看，这并不奇怪，绘图调用在我的应用程序中大部分时间都用完了。

通过一些工作，我可能会重构它以减少对 的调用`CGContextFillRects`，但我很想知道这样做是否会给我带来任何性能改进，或者这只是一种不会导致的便捷方法在任何其他好处。

在我经历重构代码的麻烦之前，有人知道吗？

# javascript - $.tojson 不返回表单值（但它创建了一个带有表单字段的 JSON）

> ID：15252852
> 
> 赞同：0
> 
> 时间：2013-03-06T16:31:22.137
> 
> 标签：javascript, jquery, html, json

不返回表单字段值

```
var formJSON = $.toJSON($('#form1')); 
```

JSP是：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <script type="text/javascript" src="js/ebs.js"></script>
  <script src="js/jquery-ui.js" type="text/javascript"></script>
  <script src="js/jquery-1.8.2.js" type="text/javascript"></script>
  <script src="js/jquery.min.js" type="text/javascript"></script>
  <script src="js/jquery.json-2.4.min.js" type="text/javascript"></script>
  <script src="js/jquery.json-2.4.js" type="text/javascript"></script>
</head>
<body>

  <form id="form1" onclick="validateField()" method="post">
    Text Field 1 : <input id="txt1" name="txt1" type="text" />
    <br />
    <input type="submit" value="SUBMIT" />
  </form>
</body>
</html> 
```

我的 JavaScript 是：

```
function validateField() {
  alert('fn called');

  var formJSON = $.toJSON($('#form1'));
  alert('after');
  alert('formJSON' + formJSON);
  alert("method ends here.");
} 
```

我正进入（状态：

`form JSON{"length":1,"0":{"txt1":{},"1":{}},"context":{"location":{}},"selector":"#form1"}`

`txt1`（即使我们在那里输入内容，字段也没有内容。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:33:35.190

`$.toJSON()`将普通的 Javascript 对象转换为 JSON。
它不获取 DOM 元素或 jQUery 对象的值。

你想要[`.serializeArray()`](http://api.jquery.com/serializeArray/)。

# c++ - 尝试在带有代码块的子目录中包含文件

> ID：15252855
> 
> 赞同：0
> 
> 时间：2013-03-06T16:31:30.527
> 
> 标签：c++, include, codeblocks

我正在尝试`#include "physics/everything.hpp"`在我的一个项目文件中，但是我收到错误：“没有这样的文件或目录”

我正在使用代码块，并且该目录肯定存在，因为它显示在左侧项目浏览器窗格中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:35:55.800

用于`Settings -> Compiler & Debugger Settings -> Search Directories`添加项目的根目录以包含目录。您应该这样做才能不通过相对路径而是通过相对于项目根目录来包含文件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-06T16:42:29.780

向大家道歉：我应该这样做：

`#include "./../physics/everything.hpp"`

执行包含的文件本身位于子目录中......（新手错误）

# ssis - 如何从外部应用程序运行 SSIS 包？

> ID：15252856
> 
> 赞同：0
> 
> 时间：2013-03-06T16:31:31.540
> 
> 标签：ssis

我正在编写一个接受各种格式文件的应用程序。然后我为每种格式（csv、excel、xml）编写代码以将其转换并输入到 SQL Server 数据库中。这很好，但我只是在研究 SSIS，想知道这是否有帮助。

主要问题是如何在我自己的代码中运行这些包？传参数容易吗？如果我将此 Web 应用程序移动到另一台服务器，它是否取决于该服务器上的其他组件（可能安装了 SQL Server 2012）？还是只是我可以从我的网络应用程序中引用的一些 DLL？

我看到的所有演示都是关于使用 SSIS 工具，但我更感兴趣的是从我的代码中调用带有参数的包是多么困难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:41:39.453

BIDS/SSDT 安装包括一个完整的客户端 SDK，它使得通过代码运行 SSIS 包变得非常简单。

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms136090.aspx)详细解释了如何通过 C# 加载和运行包，但实际代码归结为：

```
using Microsoft.SqlServer.Dts.Runtime;

   .
   .
   .

Application app = new Application();
Package pkg = app.LoadPackage(PKG_FILE_NAME, null);
DTSExecResult pkgResults = pkg.Execute(); 
```

该`Package`对象具有许多您可以查看的属性和方法，特别是有一个[`Parameters`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.package.parameters.aspx)集合允许您在执行之前将参数传递到您的 SSIS 包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:48:03.133

您可以使用 C# 或 VB.NET 以编程方式构建 SSIS 包，然后运行这些包。您还可以以编程方式加载现有包以执行它。我几乎没有以这种方式构建包的经验，因为大多数包都可以使用以下工具轻松构建。

阅读MSDN 上的文章以[编程方式构建包以了解更多详细信息。](http://msdn.microsoft.com/en-us/library/ms345167.aspx)

我觉得通过这些 IDE 构建包更容易，具体取决于您所针对的 SSIS 版本。您还可以通过 SQL Server 导入和导出向导创建初始包，并将 SSIS 包保存到本地磁盘，以后可以根据需要进行修改。

```
SSIS Version        Development IDE                                 Visual Studio Shell
------------------- ----------------------------------------------- -------------------
SSIS 2005           Business Intelligence Development Studio (BIDS) Visual Studio 2005 
SSIS 2008 - 2008 R2 Business Intelligence Development Studio (BIDS) Visual Studio 2008 
SSIS 2012           SQL Server Data Tools (SSDT)                    Visual Studio 2010 
```

您需要在代码中引用适当的 SSIS 特定 DLL 来创建/加载 SSIS 包。

但是，您将需要*`SQL Server Integration Services`*许可证才能运行该软件包。您不能简单地单独引用 DLL。该许可证通常是您的 SQL Server 许可证的一部分（如果您已经拥有一个）。

### 回复您的评论：

> 我们将在单独的服务器上安装 SQL 2012 或 2008R2。所以我只需将所需的 DLL 粘贴到我的 Web 服务器上并引用它们。正确的 ？

包将在该服务器上执行。您只是远程调用以执行它们，您应该在您的网络/其他形式的外部应用程序的代码中引用适当的 DLL。我通常安排包在*SQL Server Agent Job*下的数据库服务器上运行。如果这是您的选择，您可以尝试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:42:17.430

有一个非常酷的名为 EzAPI 的库，您可以在其中生成自己的包并从 C# 中调用它们。它为您提供了很大的灵活性来动态生成和执行 SSIS。

[http://sqlsrvintegrationsrv.codeplex.com/releases/view/21238](http://sqlsrvintegrationsrv.codeplex.com/releases/view/21238)

我在这个项目中构建了几个控制台应用程序来测试其中一些方法，您可能会发现这些示例很有用：

[https://github.com/thevinnie/SyncDatabases](https://github.com/thevinnie/SyncDatabases)

查看“BuildingAPackage”和“BuildALookupPackage”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-15T17:01:10.020

包参数对外部应用程序是只读的。您需要将它们作为变量传递（我已经这样做了）。如果您正在处理带有参数的现有包，您可以考虑编写一个脚本任务来填充变量中的参数（我没有这样做）。

# sql-server-2008-r2 - SSRS 2008 - 日期范围的多个分组

> ID：15252858
> 
> 赞同：3
> 
> 时间：2013-03-06T16:31:36.493
> 
> 标签：sql-server-2008-r2, ssrs-2008, reporting-services, ssrs-grouping

表中的记录包含一系列有效日期，例如：*tbl1.start_date* 和 *tbl1.end_date*。所以为了确保我得到对特定日期范围有效的所有记录，选择逻辑是：`<...> WHERE end_date >= @dtFrom AND start_date < @dtTo`（SQL语句中使用的*@dtTo*参数实际上是报告中使用的*@prmDt_To*参数计算的第二天）。

现在在报告中，我需要计算指定数据范围内每天的记录数，并包括没有有效记录的天数（如果有）。因此，检索到的记录可能会在几个不同的日子里被计算在内。我可以使用数据集中的递归 CTE 相对轻松地做到这一点，但我的经验法则是避免对 SQL 数据库造成不必要的负载，而是只返回必要的原始数据并让报表引擎处理分组。那么有没有办法在 SSRS 中做到这一点？

谢谢你，谢尔盖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:21:48.667

您可能可以使用自定义代码在 SSRS 中执行某些操作，但我建议您不要这样做。执行此操作的位置在数据集中。SSRS 并非旨在填充数据集中不存在的组。这听起来像您正在尝试做的事情：SSRS 需要为每个日期创建组，无论该日期是否在数据集中。

如果您的数据库中没有数字或日期表，我将创建一个递归 CTE，其中包含您提到的您感兴趣的范围内的每个日期的记录。然后将其外连接到您的表中并用于`COUNT(tbl1.start_date)`查找合适的日期。这对 SQL 服务器的查询应该不会太痛苦。

如果您确实需要避免 CTE，那么我将创建一个日期或数字表以用于生成您范围内的日期。

# java - 在Javascript中动态设置复选框

> ID：15252868
> 
> 赞同：1
> 
> 时间：2013-03-06T16:31:59.250
> 
> 标签：java, javascript, jsp

有人可以告诉我如何在Javascript中动态设置复选框吗？

```
function displayResults(html){
    var v = html.split(",");
    document.getElementById('fsystemName').value = v[0];
    if (v[1] == "true"){
        document.getElementById('fUpdateActiveFlag').checked = true;
    }
} 
```

所以我从我的控制器传递一些值，用逗号分隔。对于复选框，当值为 true 时，我希望它勾选该框。

编辑：当从下拉框中更改值时，它会调用此 displayResults 方法作为其返回语句：

```
$('#uINewsSystemList').change(function() {
    $.get("/live-application/SystemById", {systemid: $("#systemList").val()}, displayResults, "html"); 
```

我希望它更新一些其他值，例如文本框和复选框。我可以让`fsystemName`填充适当的值，但`fUpdateActiveFlag`始终保持未选中状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:43:25.180

在您的问题中，您发布了一个 javascript 示例，而不是 JSP。

在 JSP 中，您可以使用 for 循环来编写复选框，如下所示：

```
<% for (Element element : elementList) { %>
<input type="checkbox" name="<%=element.getName() %>" value="<%=element.getValue() %>" <%=element.getChecked() ? "checked" : "" %> />
<% } %> 
```

将导致：

```
<input type="checkbox" name="option1" value="Milk"> Milk<br>
<input type="checkbox" name="option2" value="Butter" checked> Butter<br>
<input type="checkbox" name="option3" value="Cheese"> Cheese<br> 
```

# function - 创建具有不同返回值的haskell函数

> ID：15252871
> 
> 赞同：1
> 
> 时间：2013-03-06T16:32:06.863
> 
> 标签：function, haskell

我想创建具有与其参数不同的返回值的 Haskell 函数，例如：我想要函数`isOdd 3`返回值`True`or `False`。我试过了

```
isOdd :: Integer -> Bool
isOdd x = (if x mod 2 == 0 False else True) 
```

但它返回一个错误，有人可以帮助我吗？另外，有没有关于 Haskell 函数的教程？我在haskell中找不到关于函数的好教程。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T16:40:25.930

```
isOdd :: Integer -> Bool
isOdd x = (if x mod 2 == 0 False else True) 
```

你不需要括号：

```
isOdd :: Integer -> Bool
isOdd x = if x mod 2 == 0 False else True 
```

你错过了`then`：

```
isOdd :: Integer -> Bool
isOdd x = if x mod 2 == 0 then False else True 
```

当您`mod`用作运算符时，您必须用反引号括起来：

```
isOdd :: Integer -> Bool
isOdd x = if x `mod` 2 == 0 then False else True 
```

这样可行。

此外，您可以`if blah then False else True`更简单地写为`not (blah)`：

```
isOdd :: Integer -> Bool
isOdd x = not (x `mod` 2 == 0) 
```

更简单的是：

```
isOdd :: Integer -> Bool
isOdd x = x `mod` 2 /= 0 
```

请注意：这实际上与标准[`odd`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3aodd)功能相同。

* * *

您尝试过哪些教程？

Learn You A Haskell 有一[章介绍函数](http://learnyouahaskell.com/starting-out#babys-first-functions)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:39:32.567

这里的问题`mod`是不是中缀。此外，在 Haskell 中，如果语句像这样工作

```
if cond then expr1 else expr2 
```

注意`then`.

你应该`mod`这样使用`mod x 2`。但是，您可以像这样使它中缀：

```
x `mod` 2 
```

一边不

```
x `mod` 2 /= 0 
```

比整个 if 语句更容易阅读。

* * *

至于教程：[Learn You a Haskell for Great Good](http://learnyouahaskell.com/)是一个好的开始。对于更深入的报道[Real World Haskell](http://book.realworldhaskell.org/)非常好。

如果您只想找到一个功能，那么[Hoogle](http://www.haskell.org/hoogle/)就是您的朋友。

# batch-file - 批处理文件确定另一个文件中数据字符串的最小值

> ID：15252874
> 
> 赞同：0
> 
> 时间：2013-03-06T16:32:16.493
> 
> 标签：batch-file, minimum

我有一个 CSV 文件，其中包含一列数据（长度可变）——将此文件称为 data.csv。我需要一个批处理文件，它将读取 data.csv 并将其数据的最小值输出到另一个文件，比如 min.csv。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:17:50.093

更新：

回答问题后，我阅读了您问题下方的一些评论，并得出结论，您打算说“我有一个带有*一行*数据的 csv 文件”而不是“我有一个带有一*列*数据的 csv 文件”。在一行数据的情况下，批处理文件的使用非常有限且笨拙。请参阅[此链接](http://ss64.com/nt/for_f.html)以获取概述并得出结论，您可能应该寻找与使用批处理文件不同的解决方案。

* * *

算法很简单，问题是批处理的语法。以下对我有用：

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
SET minval=2147483647

FOR /F "tokens=*" %%A IN (data.csv) DO (
    IF !minval! GTR %%A SET minval=%%A
REM    ECHO A is %%A and minval is !minval!
)
ECHO !minval! 
```

Un-查看中间结果`REM`。`ECHO`

输入示例：

```
1000000
1000
10000
1
-15
100 
```

结果，`ECHO`活动：

```
A is 1000000 and minval is 1000000
A is 1000 and minval is 1000
A is 10000 and minval is 1000
A is 1 and minval is 1
A is -15 and minval is -15
A is 100 and minval is -15
-15 
```

如果要将结果写入文件，只需将其运行为`findmin.bat > min.csv`（假设批处理文件的名称为`findmin.bat`.

# parallel-processing - OpenMP 并行部分依赖项

> ID：15252880
> 
> 赞同：0
> 
> 时间：2013-03-06T16:32:29.127
> 
> 标签：parallel-processing, synchronization, openmp

我遇到了一个非常奇怪的 OpenMP 问题，我无法弄清楚。这就是它的样子。

我有（比方说）四个功能

```
function0(Data *data) { ..body.. }
function1(Data *data) { ..body.. }
function2(Data *data) { ..body.. }
function3(Data *data) { ..body.. } 
```

这些功能可能会或可能不会修改所指向的内容`data`

以下是它们的顺序调用方式

```
// Version 1

void test(Data *data)
{
    function0(data);
    function1(data);
    function2(data);
    function3(data);
} 
```

我可以以任何我想要的方式重新安排电话，它仍然可以完美运行。所以我假设他们以某种方式（？）独立。

现在并行化时

```
// Version 2

void test(Data *data)
{
  int th_id;
#pragma omp parallel private(th_id) default(shared)
  {
    th_id = omp_get_thread_num();
    if(th_id==0) {
      function0(data);
    }

    if(th_id==1) {
      function1(data);
      }

    if(th_id==2){
      function2(data);
    }

    if(th_id==3){
      function3(data);
    }
  }
} 
```

它不起作用（第 2 版）。

但是，如果我在每次调用后同步线程，它就可以工作

```
// Version 3

void test(Data *data)
{
  int th_id;
#pragma omp parallel private(th_id) default(shared)
  {
    th_id = omp_get_thread_num();
    if(th_id==0) {
      function0(data);
    }
#pragma omp barrier
    if(th_id==1) {
      function1(data);
      }
#pragma omp barrier
    if(th_id==2){
      function2(data);
    }
#pragma omp barrier
    if(th_id==3){
      function3(data);
    }
  }
} 
```

我认为关于所指出的内容存在一些数据竞赛问题`data`

但是，当我重新安排呼叫时，为什么它会起作用（在顺序版本 1 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:50:30.193

假设你有两个这样的功能

```
function0(int *data)
{
    *data = *data + 1;
}

function1(int *data)
{
    *data = *data + 2;
} 
```

显然，您可以按任意顺序依次运行这两个操作，最后值将增加 3。但是，如果您并行运行这两个函数，则会出现数据竞争，并且完全有可能其中一个添加将丢失，因此您可以获得任何增加 1,2 或 3 的初始值。

仅仅因为函数看起来是顺序可交换的，并不意味着它们可以安全地并行运行。

# wpf - 当用户单击 RibbonButton 时如何显示带有 StaysOpen=false 的弹出窗口

> ID：15252881
> 
> 赞同：1
> 
> 时间：2013-03-06T16:32:38.830
> 
> 标签：wpf, xaml, button, popup, ribbon

要重现，请下载并安装[Microsoft Ribbon for WPF](http://www.microsoft.com/en-us/download/details.aspx?id=11877)。

当用户单击**RibbonButton**时，我需要显示**Popup**。此外，当用户单击 Popup 以外的任何位置时**，**我需要隐藏**Popup**，因此我必须将属性设置为**false**。******`StaysOpen`******

 ******我创建了一个新的 WPF 功能区应用程序。之后，我更改了默认 MainWindow.xaml 实现，如下所示：

```
<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <ribbon:Ribbon x:Name="Ribbon">
        <ribbon:Ribbon.ApplicationMenu>
            <ribbon:RibbonApplicationMenu SmallImageSource="Images\SmallIcon.png">
                <ribbon:RibbonApplicationMenuItem Header="Hello _Ribbon"
                                                  x:Name="MenuItem1"
                                                  ImageSource="Images\LargeIcon.png"/>
            </ribbon:RibbonApplicationMenu>
        </ribbon:Ribbon.ApplicationMenu>
        <ribbon:RibbonTab x:Name="HomeTab" 
                          Header="Home">
            <ribbon:RibbonGroup x:Name="Group1" 
                                Header="Group1">
                <ribbon:RibbonButton x:Name="Button1"
                                     LargeImageSource="Images\LargeIcon.png"
                                     Label="Button1"
                                     Click="Button1_Click"/>
                <Popup PlacementTarget="{Binding ElementName=Button1}"
                       StaysOpen="False"
                       Name="p">
                    <TextBlock Background="Green" Text="Popup Text" />
                </Popup>

                <Button Click="Button1_Click" Content="Open popup" />

            </ribbon:RibbonGroup>

        </ribbon:RibbonTab>
    </ribbon:Ribbon> 

</Grid> 
```

和 MainWindow.xaml.cs：

```
public partial class MainWindow : RibbonWindow
{
    public MainWindow()
    {
        InitializeComponent();

        // Insert code required on object creation below this point.
        p.Opened += new EventHandler(p_Opened);
        p.Closed += new EventHandler(p_Closed);
    }

    void p_Closed(object sender, EventArgs e)
    {
        System.Diagnostics.Debug.Print("closed");
    }

    void p_Opened(object sender, EventArgs e)
    {
        System.Diagnostics.Debug.Print("opened");
    }

    private void Button1_Click(object sender, RoutedEventArgs e)
    {
        p.IsOpen = true;
    }
} 
```

当我启动应用程序时，单击普通的**Button**，我可以看到**Popup**。但是当我点击**RibbonButton**时，我再也看不到它了。我可以在`Output`窗口中看到**Popup**`Opened`的事件被引发，但随即**Popup**的事件被引发。**`Closed`**

 ******问：**当用户单击 RibbonButton 时，如何显示 StaysOpen=false 的 Popup

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T06:46:20.383

检查[此处](https://stackoverflow.com/questions/2333905/wpf-popup-hiding-problem)发布的问题（我自己也尝试过），解决方案的一半是使用 上的`ClickMode="Press"`属性`RibbonButton`来打开弹出窗口。这会产生另一个问题，因为它似乎阻止了所有未来`RibbonButton.Click`事件的触发，而且我还没有设法找到阻止它的原因（我仍然是 WPF 菜鸟；））

另一种解决方案是移动控件`Popup`外部`Ribbon`，然后它开始按预期运行。

```
<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <ribbon:Ribbon x:Name="Ribbon">
        <ribbon:Ribbon.ApplicationMenu>
            <ribbon:RibbonApplicationMenu SmallImageSource="Images\SmallIcon.png">
                <ribbon:RibbonApplicationMenuItem Header="Hello _Ribbon"
                                              x:Name="MenuItem1"
                                              ImageSource="Images\LargeIcon.png"/>
            </ribbon:RibbonApplicationMenu>
        </ribbon:Ribbon.ApplicationMenu>
        <ribbon:RibbonTab x:Name="HomeTab" 
                      Header="Home">
            <ribbon:RibbonGroup x:Name="Group1" 
                            Header="Group1">
                <ribbon:RibbonButton x:Name="Button1"
                                 LargeImageSource="Images\LargeIcon.png"
                                 Label="Button1"
                                 Click="Button1_Click"/>

                <Button Click="Button1_Click" Content="Open popup" />

            </ribbon:RibbonGroup>
        </ribbon:RibbonTab>
    </ribbon:Ribbon>
    <Popup PlacementTarget="{Binding ElementName=Button1}"
                   StaysOpen="False"
                   Name="p">
        <TextBlock Background="Green" Text="Popup Text" />
    </Popup>
</Grid> 
```**********

# javascript - 触发点击 iframe 不起作用

> ID：15252886
> 
> 赞同：1
> 
> 时间：2013-03-06T16:32:43.200
> 
> 标签：javascript, jquery, html, events, iframe

看看这个小提琴：http: [//jsfiddle.net/GxPmU/](http://jsfiddle.net/GxPmU/)

我试图在该 iframe 上绑定一个单击事件，但是，单击 iframe 并不会相应地触发单击事件

此外，萤火虫控制台也输出错误：

```
Error: Permission denied to access property 'nodeType'
[Break On This Error]   

if ( selector.nodeType ) { 
```

知道我做错了什么以及如何能够相应地在 iframe 上绑定 click 事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:51:05.120

如果您只想知道何时点击任何部分`iFrame`，只需将`iFrame`a放入`div`并将事件绑定到`div`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:10:43.657

您需要将 div 的 z-index 指定在 iframe 之前并使其成为绝对值。

```
div#foo
{
    z-index: 9999;
    position: absolute;
    width: 300px;
    height: 300px;
} 
```

[在这里拉小提琴。](http://jsfiddle.net/8S9S7/)

您可能需要根据 iframe 调整 div 的大小和位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:14:12.950

从“[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)”开始，您无法获得点击事件。

我创建了一个演示来展示这种行为。第一个链接位于同一来源，因此点击通过。另一方面，第二个没有响应：

**HTML**

```
<iframe id="iframe-test-1" src="jsfiddle.net/404"></iframe>
<iframe id="iframe-test-2" src="http://jsfiddle.net/404"></iframe> 
```

**演示**

[http://jsfiddle.net/V9WTA/](http://jsfiddle.net/V9WTA/)

# javascript - ASP.Net ThreadPool 委托回调——JavaScript 未在回调线程上触发

> ID：15252888
> 
> 赞同：2
> 
> 时间：2013-03-06T16:32:44.713
> 
> 标签：javascript, asp.net, callback, threadpool, scriptmanager

我已经搜索了几天，并尝试了我能找到的所有解决方案。我知道这是我做的不对，但是，我不确定正确的方法是什么。

我有一个 ASP.Net C# 网站，在 .Net Framework 4.5 上运行。我在表单上有一个链接按钮，单击该按钮会触发使用 ThreadPool 的长时间运行的进程。我有一个委托回调设置，当进程被取消或完成时，代码会触发。（我正在使用取消令牌来取消流程，并且该流程是活动报告，以防万一。）

就像我说的，一切都很好，除了当回调代码触发它不执行 javascript。（仅供参考——这不是 javascript 回调，只是在进程完成时尝试触发一些 javascript 代码。）

## 这是我开始报告的代码...

字符串 sThreadID = Thread.CurrentThread.ManagedThreadId.ToString(); ThreadPool.QueueUserWorkItem(new WaitCallback(StartReport), cts.Token);

## 这是 StartReport 的代码....

```
public static void StartReport(object obj) {
    try {
        OnTaskCompleteDelegate callback = new OnTaskCompleteDelegate(OnTaskComplete);
        BoyceReporting.CallReport(boyce.BoyceThreadingEnvironment.OBRO, "THREADING");
        if (boyce.BoyceThreadingEnvironment.CTS.Token.IsCancellationRequested) {
            boyce.BoyceThreadingEnvironment.SESSION.sScriptToExecute = "alert('Report Canceled By User');";
            callback("CANCELED");
        } else {
            callback("FINISHED");
        }
    } catch {
        throw;
    }
} 
```

## 这是回调代码的代码......

```
public static void OnTaskComplete(string ReportResult) {
    try {
        sReportResult = ReportResult;
        if (ReportResult == "CANCELED") {
            //  In case we need to do additional things if the report is canceled
        }
        string sThreadID = Thread.CurrentThread.ManagedThreadId.ToString();
        boyce.BoyceThreadingEnvironment.THISPAGE.ClientScript.RegisterStartupScript(boyce.BoyceThreadingEnvironment.THISPAGE.GetType(), "FireTheScript" + DateTime.Now.ToString(), boyce.BoyceThreadingEnvironment.SESSION.sScriptToExecute, true);
        ScriptManager.RegisterStartupScript(boyce.BoyceThreadingEnvironment.THISPAGE, boyce.BoyceThreadingEnvironment.THISPAGE.GetType(), "DisplayReport" + DateTime.Now.ToString(), boyce.BoyceThreadingEnvironment.SESSION.sScriptToExecute, true);
    } catch {
        throw;
    }
} 
```

## 这是我遇到的问题......

一切正常，除了我无法获得最后一行代码来触发脚本。ScriptManager.RegisterStartupScript

## 这就是我认为正在发生的事情......

通过查看线程 ID，我确定代码未触发的原因是因为我试图在回调事件中触发的 ScriptManager 代码位于主线程之外的不同线程上。

## 这是我的问题......

（1）我为什么不触发 JavaScript 是否正确（2）我如何（从回调内部）让这个 JavaScript 触发？有没有办法强制它在主线程上执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:43:33.123

它不会在 JS 中触发，因为您正在分离一个新线程。同时，请求早已返回给客户端并关闭了连接。当线程尝试将某些内容写入响应时，它已经完成了。

而不是这样做，只需在`UpdatePanel`. 然后，您无需启动新线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:20:42.683

```
Here is the cod I used in the C# Code Behind to call the web service to start monitoring this process.
----------------------------------------------------------------------------------------------

                CurrentSession.bIsReportRunning = true;
                ScriptManager.RegisterStartupScript(this, this.GetType(), "WaitForReport" + DateTime.Now.ToString(), "jsWaitOnCallReport();", true);
                MultiThreadReport.RunTheReport(HttpContext.Current, CurrentSession, this, oBRO);

Here is the code that calls the method, using the threadpool, and the method called..
----------------------------------------------------------------------------------------------
            ThreadPool.QueueUserWorkItem(new WaitCallback(StartReport), cts.Token);

    public static void StartReport(object obj) {
        try {
            OnTaskCompleteDelegate callback = new OnTaskCompleteDelegate(OnTaskComplete);
            BoyceReporting.CallReport(boyce.BoyceThreadingEnvironment.OBRO, "THREADING");
            HttpContext.Current = boyce.BoyceThreadingEnvironment.CONTEXT;
            if (boyce.BoyceThreadingEnvironment.CTS.Token.IsCancellationRequested) {
                boyce.BoyceThreadingEnvironment.SESSION.sScriptToExecute = "alert('Report Canceled By User');";
                boyce.BoyceThreadingEnvironment.SESSION.bIsReportRunning = false;
                callback("CANCELED");
            } else {
                boyce.BoyceThreadingEnvironment.SESSION.bIsReportRunning = false;
                callback("FINISHED");
            }
        } catch {
            throw;
        }
    }

Here is the web service method I created to monitor the process, with a built in safety net
--------------------------------------------------------------------------------------------

    [WebMethod(EnableSession = true)]
    public string WaitOnReport() {
        try {
            HttpContext.Current = boyce.BoyceThreadingEnvironment.CONTEXT;
            SessionManager CurrentSession;
            CurrentSession = (SessionManager)boyce.BoyceThreadingEnvironment.SESSION;

            DateTime dtStartTime = DateTime.Now;
            DateTime dtCurrentTime = DateTime.Now;
            if (CurrentSession != null) {
                do {
                    //  Build a safety limit into this loop to avoid an infinate loope
                    //  If this runs longer than 20 minutes, then force an error due to timeout
                    //  This timeout should be lowered when they find out what the issue is with 
                    //  the "long running reports".  For now, I set it to 20 minutes but shoud be MUCH lower.
                    dtCurrentTime = DateTime.Now;
                    TimeSpan span = dtCurrentTime-dtStartTime;
                    double totalMinutes = span.TotalMinutes;
                    if (totalMinutes>=20) {
                        return "alert('Error In Creating Report (Time-Out)');";
                    }
                } while (CurrentSession.bIsReportRunning == true);
                //  If all goes well, return the script to either OPEN the report or display CANCEL message
                return CurrentSession.sScriptToExecute;
            } else {
                return "alert('Error In Creating Report (Session)');";
            }
        } catch {
            throw;
        }
    }

And here is the JavaScript code I used to initiate the Web Service Call and Also The Postback
--------------------------------------------------------------------------------------------
function jsWaitOnCallReport() {
    try {
        var oWebService = BoyceWebService.WaitOnReport(jsWaitOnCallReport_CallBack);
    } catch (e) {
        alert('Error In Calling Report Screen -- ' + e);
    }
}
function jsWaitOnCallReport_CallBack(result) {
    try {
        eval(result); 
        var myExtender = $find('ModalPopupExtenderPROGRESS');
        if (myExtender != null) {
            try {
                myExtender.hide();
            } catch (e) {
                //  Ignore Any Error That May Be Thrown Here
            }
        }
        $find('PROGRESS').hide();
    } catch (e) {
        alert('Error In Opening Report Screen -- ' + e);
    }
}

Hope this helps someone else out..  Like I said, I am not sure this is the best solution, but it works..   I would be interested in other solutions for this issue to try...  Thanks. 
```

# ruby-on-rails - 当我将 rake 输入终端时，为什么我的 minitest.rake 会运行两次？

> ID：15252889
> 
> 赞同：5
> 
> 时间：2013-03-06T16:32:49.620
> 
> 标签：ruby-on-rails, testing, rake, minitest

根据 ryan bates railscast ( [http://railscasts.com/episodes/327-minitest-with-rails](http://railscasts.com/episodes/327-minitest-with-rails) )，我创建了一个 minitest.rake。

当我在终端中运行 rake 时，测试会运行，然后在重置命令行之前再次运行。

```
require "rake/testtask"

Rake::TestTask.new(:test => "db:test:prepare") do |t|
  t.libs << "test"
  t.pattern = "test/**/*_test.rb"
end

task default: :test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-24T15:16:19.000

只需用唯一的名称重命名您的 rake 文件；前任。`mintest1.rake`.

当我命名我的 rake 文件时，我遇到了同样的问题`paperclip.rake`。我在那个 rake 文件中定义了什么，它被执行了两次。我认为这是因为 Paperclip gem 已经定义了一个 rake 文件`paperclip.rake`。所以我只是将我的`paperclip.rake`文件重命名为`pc.rake`它对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T17:28:56.800

我想你已经有一个定义了这样一个名称的任务。如果您定义一个具有相同名称的新任务，它将附加到已经存在的任务。

如果你删除或注释掉这段代码并做`rake -T`，`test`任务会在那里吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T16:15:47.440

你试过`rake test:single TEST=path/to/test.rb`吗？

如果我放弃 :single 那么它将运行两次。

# hadoop - Hadoop jobtracker UI 无法访问

> ID：15252892
> 
> 赞同：0
> 
> 时间：2013-03-06T16:33:02.670
> 
> 标签：hadoop, mapreduce

我已经在伪分布式模式下配置了 hadoop 1.0.4。一切都很好，我可以将本地文件放入 HDFS 并运行 wordcount 任务。但我无法通过 localhost:50030 访问 jobtracker Web UI，localhost:50070 也不起作用。

> HTTP 错误 404
> 
> 访问 /jobtracker.jsp 时出现问题。原因：
> 
> ```
> /jobtracker.jsp Powered by Jetty:// 
> ```

我查看了日志文件，但没有错误...

我曾经对datanode有一些问题，并且jobtracker抱怨复制，但这已经解决了，现在所有的守护进程都很好（namenode，datanode，jobtracker，tasktracker，secondarynamenode）并且在任何日志文件中都没有错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:28:26.350

好的，最后我自己解决了，我不得不重新安装系统然后重新安装hadoop。我认为问题应该是我之前在我的系统上安装了CDH4，即hadoop 2.0.0，即使我卸载了它的所有包（debian系统）并更改了HDFS的tmp文件夹，但也许还有一些东西左。唯一的办法就是重新开始。

# jquery - jQuery iFrame 拖动不起作用

> ID：15252893
> 
> 赞同：3
> 
> 时间：2013-03-06T16:33:08.447
> 
> 标签：jquery, iframe, drag-and-drop, draggable

我需要一个与 jQuery 相关的问题的解决方案。

为了能够将可拖动的 li 元素拖放到 iFrame 中，我尝试了以下操作：

```
$(document).ready(function(){
    $("li").draggable({
        helper : "clone",
        cursor: "move",
        iframeFix: true,
        start: function() {
            $("#overlay").show();
        },
        stop: function() {
            $("#overlay").hide();
        }
    });
    $("#iframe").load(function() {
        $("#iframe").contents().find("[data-role=page]").droppable({
            hoverClass: "hover",
            tolerance: "touch",
            iframeFix: true,
            over: function(ev, ui) {
                ui.draggable;
            },
            drop: function(ev,ui) {
                $(ev.target).append(ui.draggable.attr("role"));
            }
        });
    });
}); 
```

html代码：

```
<ul class="left">
        <li role="header">
            <!-- Header --><div class="sprite" style="background: #000; width: 100px; height: 57px;"></div>
            <span>Header</span>
        </li><li role="image">
            <!-- Image --><div class="sprite" style="background: #333; width: 65px; height: 50px;"></div>
            <span>Image</span>
        </li>
    </ul>
    <!-- Phone -->
    <div class="left" style="position: relative;margin-left: 30px;">
        <div id="overlay" class="ui-draggable-iframeFix" style="width: 320px; height: 480px; display: none;position: absolute;z-index: 9999999999999;"></div>
        <div style="color: #000; position: relative; top: 115px; left: 30px; wdith: 588px; height: 507px;">
            <iframe id="iframe" src="../" width="300px" height="100%" frameborder="0" scrolling="no"></iframe>
        </div>
    </div> 
```

这是 iframe 的内容：

```
<html>

<head>

</head>

<body style="background: #fff">
    <!-- Home -->
    <div data-role="page" data-theme="d" id="page1" style="height: 400px;">

        Content
    </div>
</body> 
```

我试图创建一个 div 作为叠加层，并在我开始拖动时显示它并在我放下时隐藏它..但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:40:09.117

此功能的通用形式似乎在此处演示：

[http://www.bluestudios.co.uk/blog/sandbox/iframe/iframe.html](http://www.bluestudios.co.uk/blog/sandbox/iframe/iframe.html)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-14T22:10:55.267

为什么必须是 iframe？

为什么你不能把两个 div 放在一个页面上？

# objective-c - Obj-C NSURLConnection 不工作

> ID：15252895
> 
> 赞同：0
> 
> 时间：2013-03-06T16:33:11.540
> 
> 标签：objective-c, webservice-client

所以我试图通过带有参数的 url 将数据发送到 web 服务。我的代码在下面，但它永远不会到达服务器。请求和响应为空。我究竟做错了什么？

```
-(void) postData:(NSString *)data{

NSURLResponse* response;
NSError* error = nil;
NSString *urlString = [NSString stringWithFormat:@"http://someaddress.com/api?data=%@", data];

NSURL *lookupURL = [NSURL URLWithString:urlString];

//Create the request.
NSURLRequest *theRequest=[NSURLRequest requestWithURL:lookupURL];

NSData *request = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&response error:&error];

NSString *dataString = [[NSString alloc] initWithData:request encoding:NSUTF8StringEncoding];
NSLog(@"-----------------------------");
NSLog(@"Request: %@", theRequest);
NSLog(@"req response: %@", request);
NSLog(@"response: %@", dataString);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:38:02.153

您想发布一些二进制数据，但您执行 GET 请求并尝试将二进制文件放入 url。（不编码）

示例帖子：

```
NSURL *url = [NSURL URLWithString:@"http://server.com"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
request.HTTPMethod = @"POST";
request.HTTPBody = postData;
NSData *respData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

另外，请注意同步获取很糟糕，因为它会阻塞:) 使用异步网络！

# java - 将列表从控制器返回到 javascript 会导致 406

> ID：15252896
> 
> 赞同：0
> 
> 时间：2013-03-06T16:33:15.830
> 
> 标签：java, spring, spring-mvc

当访问给定的 URL 时，我试图将 json 列表从控制器发送到 javascript。使用此代码，当我转到 URL 时收到 406 错误。我的 servlet 上下文有`<annotation-driven />`并且我有`org.codehaus.jackson`Maven 依赖项。有没有其他原因给我一个 406，或者有没有更好的方法来发送一个列表到 javascript？

控制器功能

```
@RequestMapping(value = "/{room}/handhygiene.json", method = RequestMethod.GET)
    public @ResponseBody ArrayList<Integer> getHandHygienePageAsync(
            @PathVariable(value = "room") String roomCode) {
        ArrayList<Integer> json = new ArrayList<Integer>();
        Room room = getRoom(roomCode);

        json.add(service.getHandHygieneEvents(room));
        if (room.isGroupBased()) {
            json.add(service.getRoomEntryExits(room));
        }
        if (room.isIdBased()) {
            json.add(service.getPatientContacts(room));
        }
        return json;
    } 
```

Javascript

```
$.getJSON(currentURL + ".json",
            function(data){
                alert('I can\'t get here though');
                var overallRatio;
                var handWash = data[0];

                $("#handwash").html(handWash);
                if(groupBased == true)
                {
                    var enex = data[1];
                    $("#enex").html(enex);
                    overallRatio = "" + Math.round((handWash*100)/enex) + "%";
                }
                else
                {
                    if(idBased == true)
                    {
                        var contacts = data[2];
                        $("#contacts").html(contacts);
                        overallRatio = "" + Math.round((handWash*100)/contacts) + "%";                      
                    }
                }

                $("#overall").html(overallRatio);

            }
    ); 
```

这是请求的标头

```
GET /groupbased/ICU6/handhygiene.json HTTP/1.1
Host: localhost:8080
Connection: keep-alive
Accept: application/json, text/javascript, */*; q=0.01
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22
Referer: http://localhost:8080/groupbased/ICU6/handhygiene
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: JSESSIONID=063CDE4BF5FB7369B6C48FC2EADFD8E9 
```

* * *

这个视图解析器会与任何东西冲突吗？

```
@Bean
    public InternalResourceViewResolver internalResourceViewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        return resolver;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:06:19.360

将以下配置添加到 mvc-servet.xml

```
<bean name="customViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
    <property name="location" value="/WEB-INF/config/spring/customViews.xml" />
    <property name="order" value="0"/>
</bean> 
```

在路径 /WEB-INF/config/spring/customViews.xml 下创建 customViews.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
      "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans>
<bean name="jsonView" class="org.springframework.web.servlet.view.json.JsonView"/>    
</beans> 
```

控制器更改：-

```
@RequestMapping(value = "/{room}/handhygiene.json", method = RequestMethod.GET)
public @ResponseBody String getHandHygienePageAsync(
        @PathVariable(value = "room") String roomCode,ModelMap model) {
    ArrayList<Integer> json = new ArrayList<Integer>();
    Room room = getRoom(roomCode);

    json.add(service.getHandHygieneEvents(room));
    if (room.isGroupBased()) {
        json.add(service.getRoomEntryExits(room));
    }
    if (room.isIdBased()) {
        json.add(service.getPatientContacts(room));
    }
    model.addAttribute("json",json)
    return "jsonView";
} 
```

如果这解决了您的问题，请随意将其标记为答案并单击上行链接。

# javascript - 悬停事件 里面

> ID：15252897
> 
> 赞同：2
> 
> 时间：2013-03-06T16:33:15.913
> 
> 标签：javascript, jquery, html, css

我在我的一个非常老的项目中使用[AJAX 控制工具包自动完成。](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)我对鼠标悬停突出显示有一些问题。

在有效的示例中，生成的`<li>`标签会获得一个 mouseover 事件，该事件使用内联 css 更改其背景颜色。效果很好。但是，当我从以下位置更改标记时：

```
<li>
    Hello world
</li> 
```

至

```
<li>
    <div>Hello</div>
    <div>world</div>
</li> 
```

只有当我悬停其中一个 div 未覆盖的一部分时，该`<li>`元素才会更改背景颜色。

由于我无法修改生成的（和缩小的）javasacript，我正在寻找一个快速而肮脏的修复程序。

我试图更改元素的 z-index，但没有成功。我还尝试找到 li 的事件并将其添加到 div 中。但是我找不到将 jquery 未添加的事件复制到另一个元素的方法。

非常感谢这里的任何想法。

下面如果还原的缩小 javascript 有任何帮助：

```
_highlightItem: function(item) {   
    /// <summary>   
    /// Highlights the specified item   
    /// </summary>   
    /// <param name="item" type="Sys.UI.DomElement" DomElement="true" mayBeNull="false" />   
    /// <returns />   

    var children = this._completionListElement.childNodes;   

    // Unselect any previously highlighted item   
    for (var i = 0; i < children.length; i++) {   
        var child = children[i];   
        if (child._highlighted) {   
            if (this._completionListItemCssClass) {   
                Sys.UI.DomElement.removeCssClass(child, this._highlightedItemCssClass);   
                Sys.UI.DomElement.addCssClass(child, this._completionListItemCssClass);   
            } else {   
                if (Sys.Browser.agent === Sys.Browser.Safari) {   
                    child.style.backgroundColor = 'white';   
                    child.style.color = 'black';   
                } else {   
                    child.style.backgroundColor = this._textBackground;   
                    child.style.color = this._textColor;   
                }   
            }   
            this.raiseItemOut(new AjaxControlToolkit.AutoCompleteItemEventArgs(child, child.firstChild.nodeValue, child._value));   
        }   
    }   

    // Highlight the new item   
    if(this._highlightedItemCssClass) {   
        Sys.UI.DomElement.removeCssClass(item, this._completionListItemCssClass);   
        Sys.UI.DomElement.addCssClass(item, this._highlightedItemCssClass);   
    } else {   
        if (Sys.Browser.agent === Sys.Browser.Safari) {   
            item.style.backgroundColor = 'lemonchiffon';   
        } else {   
            item.style.backgroundColor = 'highlight';   
            item.style.color = 'highlighttext';   
        }   

    }   
    item._highlighted = true;   
    this.raiseItemOver(new AjaxControlToolkit.AutoCompleteItemEventArgs(item, item.firstChild.nodeValue, item._value));   
}, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:36:38.303

为什么不使用 CSS 来添加所需的高亮？

```
li > div:hover {
  /* Highlight Rule Here */
} 
```

# javascript - 使用字符串搜索json

> ID：15252899
> 
> 赞同：0
> 
> 时间：2013-03-06T16:33:20.133
> 
> 标签：javascript

我有：

```
var id = 1;
console.log(myJSON.users[id].name); 
```

这输出“汤姆”

我想输出相同的内容：

```
var id = 1;
var attr = "name"
console.log(myJSON.users[id].attr); 
```

现在，jQuery 正在搜索“attr”而不是 attr 中的字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:36:49.197

如果您进一步分解它可能会对您有所帮助，以便您可以更好地了解发生了什么：

```
var id = 1;
var user = myJSON.users[id]; 
```

这让你成为用户。然后，您可以执行相同的操作来获取名称：

```
var attr = "name"
console.log(user[attr]); 
```

把它们放在一起你可以做：

```
var id = 1;
var attr = "name";
console.log(myJSON.users[id][attr]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:38:40.973

如果您使用变量来定义要检索的信息，请使用方括号，例如：

```
var id = 1;
var attr = "name"
console.log(myJSON.users[id][attr]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:38:58.243

这是你要找的：

```
var json = {
    users: {
        0: {name:"A"},
        1: {name:"B"}
    }
};

var attr = "name";
console.log(json.users[0][attr]); //"A" 
```

?

# ruby-on-rails - Rails 选择标记选定值

> ID：15252900
> 
> 赞同：18
> 
> 时间：2013-03-06T16:33:20.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的标签：

```
<%= select_tag(:option, options_for_select([['All', 1], ['Co', 2], ['Bought', 3], ['View', 4], ['Top API', 5], :selected => :option ])) %> 
```

如何将选定的值设置为选择的选项。例如，如果我选择`['Bought', 3]`并提交，`['All', 1]`则选择了选项。提交表单后如何显示选定的值。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-06T16:50:28.213

您做对了一切，只需关闭以下选项`]`之前的选项`:selected => :option`：

而不是`...], selected: :option ]))`, 改为`...]], selected: :option ))`

所以，你的代码应该是：

```
<%= select_tag(:option, options_for_select([['All', 1], ['Co', 2], ['Bought', 3], ['View', 4], ['Top API', 5]], selected: :option )) %> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-06T16:44:33.413

尝试这个：

```
<%= select_tag(:option, options_for_select([['All', 1], ['Co', 2], ['Bought', 3], ['View', 4], ['Top API', 5]], :selected => params[:option])) %> 
```

这在 rails 4.2 中完美运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-18T21:08:04.423

如果您想向标签添加一个类：

```
<%= select_tag(:option, options_for_select([["Option 1",1],["Option 2",2],["Option 3",3]], params[:option] ), class:"select") %> 
```

5.在轨道上工作。

# firebug - TypeScript 无法识别 Firebug 的 window.console.debug

> ID：15252902
> 
> 赞同：1
> 
> 时间：2013-03-06T16:33:25.613
> 
> 标签：firebug, typescript

为了让 TypeScript 编译器识别 Firebug，我需要什么 TypeScript 定义

```
window.console.debug 
```

它承认

```
window.console.log 
```

没有任何问题。我找不到特定于 Firebug 的定义文件（我什至不确定我可以从哪个 .js 文件生成定义文件）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:02:57.393

console.debug 方法已被弃用（自 Gecko 5 起），因此最好的办法是切换到 console.log - 它也是跨浏览器的。双赢！

值得注意的是，console.debug 只是console.log 的别名，所以切换到console.log 不会丢失任何东西。

[https://developer.mozilla.org/en-US/docs/DOM/console](https://developer.mozilla.org/en-US/docs/DOM/console)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:38:11.560

您可以为声明创建一个接口`Console`并引用该声明。

```
// firebug.d.ts
interface Console {
  debug(message: any, ...optionalParams: any[]): void;
} 
```

`Console`是核心使用的接口`lib.d.ts`。

（我不知道 Firebug 需要哪些具体参数`console.debug`，所以如果我提供的参数与 不同，您必须更改它们`console.log`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T02:16:39.587

不要假设`console.log`总是定义的。除非您打开了调试工具，否则它可能不在 Internet Explorer 中。

请参阅[“控制台”是 Internet Explorer 的未定义错误](https://stackoverflow.com/questions/3326650/console-is-undefined-error-for-internet-explorer)

我的问题 [用打字稿重新定义 window.console](https://stackoverflow.com/questions/23819983/redefine-window-console-with-typescript)

# android - 如果我在离线 APP 中使用 OpenStreetMaps 离线地图，我应该在地图上显示“openstreetmap”许可文本吗？

> ID：15252906
> 
> 赞同：0
> 
> 时间：2013-03-06T16:33:32.460
> 
> 标签：android, licensing, openstreetmap

我正在开发一个显示离线地图的商业 android 应用程序（不需要互联网连接。）这个地图是一个二进制矢量图，它被渲染以离线显示地图。

二进制地图是从 OpenStreetMap xml 地图生成的。

这个应用程序将有成本，它是一个商业项目。

`"OpenStreetMap ©"`当我显示地图时，我应该在地图视图中放置类似的东西吗？

我在 openstreetmaps 网站上找不到任何明确的指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:57:42.580

请参考[此链接*我想使用 OpenStreetMap 地图。我应该如何相信你*](http://wiki.openstreetmap.org/wiki/Legal_FAQ#3a._I_would_like_to_use_OpenStreetMap_maps._How_should_I_credit_you.3F)：

*   他们要求的署名是“© OpenStreetMap 贡献者”。
*   因为 OpenStreetMap 是它的贡献者，所以如果空间有限，您可以省略“贡献者”一词。
*   将您的读者引导至 openstreetmap.org（可能通过将“OpenStreetMap”扩展至此完整地址），至 opendatacommons.org

**放在哪里**

*   对于可浏览的电子地图（例如嵌入网页或手机应用程序），信用应该出现在地图的一角，这在地图 API/库（如 Google Maps）或关于框/页面中很常见。

![在此处输入图像描述](../Images/279249804b7a7e05c1be1d3180f91e6e.png)

# android - 在非活动片段中的 TextView 中设置文本

> ID：15252910
> 
> 赞同：0
> 
> 时间：2013-03-06T16:33:44.010
> 
> 标签：android, android-fragments

我设法获得了一个带有选项卡的操作栏，但是当我单击一个按钮时，应该在两个片段中设置一个文本。如果我尝试这样做，它会使应用程序崩溃，因为只加载了一个片段。有没有办法可以在两个片段中设置文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:39:02.397

如果片段未加载，那么您应该将文本保存在某处，以便在加载片段时，它可以（在实例化文本视图时）将文本视图设置为适当的值。（例如在片段的 onActivityCreated() 调用中，要求使用文本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:47:58.270

我想到的一个解决方案是，您可以将文本的值保存到首选项，然后从第二个选项卡加载首选项。像这样：

```
//save the value in your first fragment to the preferences
        prefs = PreferenceManager
            .getDefaultSharedPreferences(view.getContext());
            SharedPreferences.Editor editor = prefs.edit();
            editor.putString("sampletext", "Your text value");
            editor.commit();

//get the value in your second fragment
prefs = PreferenceManager
            .getDefaultSharedPreferences(view.getContext());
prefs.getString("sampletext"); 
```

第二个也是肮脏但快速的解决方案是在您的第一个片段中定义一个公共静态变量并在您的第二个片段中访问该变量。只有当您的第一个片段在切换到第二个片段时没有被破坏时，此方法才适用。

# java - 从另一个字段访问一个字段的字段？

> ID：15252912
> 
> 赞同：-5
> 
> 时间：2013-03-06T16:33:47.950
> 
> 标签：java

就像说我有两个类，`Class1`和`Class2`，并且我想在使用来自的字段（例如：）`if`时发表声明。`Class2``int option``Class1`

我尝试创建一个对象：

`Class1 object = new Class1();`

in `Class2`，然后编写`if`语句：

```
if(object.option == 2) 
```

但它没有用。

```
import java.util.Scanner;

public class Class1 {
    public static void main(String[] args) {
        Class2 obj = new Class2();
        int option;
        Scanner input = new Scanner(System.in);
        System.out.print("Enter an option of 1, 2 or 3");
        option = input.nextInt();
        obj.input();
    }
}

public class Class2 {

    public void input(){
        Class1 object = new Class1();
        if(object.option == 1){
            System.out.print("You've selected the option 1");
        }
        else if(object.option == 2){

            System.out.print("You've selected the option 2");
        }
        else if (object.option == 3){
            System.out.println("You've selected the option 3");
        }
    }
} 
```

我收到编译错误：*选项无法解析为字段*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:54:40.250

您在 for 方法中声明`option`，`main()`这`Class1`意味着它不会存在于该方法之外。您需要在类中但在任何方法之外声明它。此外，由于您是从另一个类访问它，所以它需要`public`（实际上没有必要，因为我现在看到两个类都在同一个包中）（但请参阅[lpaloub](https://stackoverflow.com/a/15252984/1735262)的答案）。对于这个特定主题，请阅读[http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)和[http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

但是，您的代码仍然无法按照您的预期方式工作。当您遇到这些问题时，我们也许可以为您服务。与此同时，您应该学习[http://docs.oracle.com/javase/tutorial/java/index.html](http://docs.oracle.com/javase/tutorial/java/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:37:43.637

在 Class1 中，您必须将您的 int 声明为 public，但这不是最好的方法。

最好的方法是在 Class1 中创建一个返回 int 的 get 类：

`public int get(){ return (your int); }` 然后在 Class2 中，您将其称为 object.get()

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:37:45.510

确保`option`in 中的字段`Class1`具有正确的访问修饰符。例如，如果它是私有的，您将无法在课堂外使用它。将字段设置为`public`应该可以完成这项工作。可悲的是，没有任何额外的细节，我无法给出更具体的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:37:47.547

您可以在 Class2 中有一个比较值的方法

```
 public class Class2 {
     int willBeCompared = 2;

     public boolean compareToAnotherNumber(int option) {
        return option == willBeCompared;
     }
 } 
```

它将像这样使用：

```
 Class1 object = new Class1();
 Class2 comparer = new Class2();

 system.out.println(comparer.compareToAnotherNumber(object.option)); 
```

# c++ - 如何用 Eigen 找到基变化的变换矩阵

> ID：15252919
> 
> 赞同：2
> 
> 时间：2013-03-06T16:34:19.973
> 
> 标签：c++, geometry, eigen

我正在将一个程序移植到 Eigen。

现在我必须重写一个方法，将 3D 变换矩阵从一个坐标系 A（由其原点和两个轴定义）返回到第二个坐标系，仍然由原点和两个轴定义。

我想知道 Eigen 中是否有一种方法可以找到该矩阵。我浏览了参考指南，但我还没有找到任何有用的方法......

* * *

更多细节：

我移植到 Eigen 的方法接受 6 个点（向量）（fr0、fr1、fr2、to0、to1、to2）。“fr0”是CS1（坐标系1）的原点，“fr1”是定义CS1轴​​的点，“fr2”是定义CS1第二轴的点；“to0”是CS2的起源，以此类推……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T17:09:10.967

好的，我找到了解决方案，并在此处发布以供参考。我希望它也对其他人有用。

实际上 ggael 的回答触发了正确的解决方案，非常感谢他并为他 +1。

* * *

```
#include <Eigen/Geometry>

typedef Eigen::Affine3d Transformation;
typedef Eigen::Vector3d   Point;
typedef Eigen::Vector3d  Vector;
typedef Eigen::Translation<double,3>  Translation;

Transformation findTransformBetween2CS(Point fr0,Point fr1,Point fr2,Point to0,Point to1,Point to2) {

  Transformation T, T2, T3 = Transformation::Identity();
  Vector3d x1,y1,z1, x2,y2,z2;

  // Axes of the coordinate system "fr"
  x1 = (fr1 - fr0).normalized(); // the versor (unitary vector) of the (fr1-fr0) axis vector
  y1 = (fr2 - fr0).normalized();

  // Axes of the coordinate system "to"
  x2 = (to1 - to0).normalized();
  y2 = (to2 - to0).normalized();

  // transform from CS1 to CS2 
  // Note: if fr0==(0,0,0) --> CS1==CS2 --> T2=Identity
  T2.linear() << x1, y1, x1.cross(y1); 

  // transform from CS1 to CS3
  T3.linear() << x2, y2, x2.cross(y2); 

  // T = transform to CS2 to CS3
  // Note: if CS1==CS2 --> T = T3
  T.linear() = T3.linear() * T2.linear().inverse(); 

  T.translation() = t0;

  return T;

} 
```

* * *

灵感也来自这篇文章：

[https://gamedev.stackexchange.com/questions/26084/transform-b​​etween-two-3d-cartesian-coordinate-systems](https://gamedev.stackexchange.com/questions/26084/transform-between-two-3d-cartesian-coordinate-systems)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T18:01:56.790

不需要特殊功能，只需使用逗号初始化器：

```
Matrix4f M;
M << X, Y, X.cross(Y), O,
     0, 0, 0,          1; 
```

这假设两个轴 X 和 Y 是单一且正交的。O 是原点。

您还可以查看几何[模块](http://eigen.tuxfamily.org/dox-devel/group__TutorialGeometry.html)以了解更高级的空间变换类和函数，例如 Transform<> 类。这是使用 Affine3f typedef 而不是原始矩阵的相同示例：

```
Affine3f M;
M.linear() << X, Y, X.cross(Y);
M.translation(O); 
```

# css - 隐藏先前边框的最佳方法？

> ID：15252920
> 
> 赞同：3
> 
> 时间：2013-03-06T16:34:21.563
> 
> 标签：css, html, menu, border

我有一个包含几个 div 的菜单。每个 div 都有一个 1px 的左边框。悬停时，我更改了当前 div 的背景，但是正如您在下面的[JSFiddle](http://jsfiddle.net/VHkWu/)中看到的那样，之前的（灰色）边框仍然可见，这很丑陋。

当我在当前选定的 div 上时，我想隐藏它。有任何想法吗？

## [小提琴](http://jsfiddle.net/VHkWu/)

```
<div id="main_menu">
    <div class="menu_item"><div class="link">Example</div></div>
    <div class="menu_item"><div class="link">Example</div></div>
    <div class="menu_item"><div class="link">Example</div></div>
    <div class="menu_item"><div class="link">Example</div></div>
</div> 
```

为了更清楚，从这里：

![屏幕1](../Images/ccb44d48de8e2d8a09a484ebb3360144.png)

对此：

![屏幕1](../Images/6aa31ff6f42a445bfad297e8e3e92d5f.png)

可能不使用任何 JS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:39:08.570

`.menu_item`将悬停 css更改为：

```
#main_menu .menu_item:hover {
    background-color:#00437f;
    cursor:pointer;
    position:relative;
    left:-1px;
} 
```

并将文本保持在css下方的更新位置：

```
#main_menu .menu_item:hover .link {
    color:#fff;
    border:0px;
    position:relative;
    left:1px;
} 
```

# java - 为什么当我使用 context.tryCreateResource 创建一个新文件时，GWT 生成器不将我的文件保存到磁盘？

> ID：15252922
> 
> 赞同：1
> 
> 时间：2013-03-06T16:34:25.190
> 
> 标签：java, gwt

我尝试使用 GWT 延迟绑定生成器生成一个 java 文件和一个包含许多按钮的 ui.xml 文件。

我的 java 文件被生成并写入我的 -gen 位置。但是**我的-gen文件夹中没有对应的ui.xml文件**，不知道为什么。

我创建 ui.xml 文件的函数如下所示：

```
public String generate(TreeLogger logger, GeneratorContext context,
      String typeName) throws UnableToCompleteException {

    try {
      SourceWriter sw = getSourceWriter(typeName, context, logger);
      assert(sw != null);
      // after the file got created, I write the class content
      /* ... */ UiBinder Java code

      createUiXMLFile(typeName, context, logger);

      sw.commit(logger); 
      // after this command the java class file is written is to -gen folder
      System.out.println("class '" + typeName +  "Generated' was created succesfully");
      return typeName + "Generated";
    } catch(Exception e) {
      e.printStackTrace();
      return null;
    }
}

public void createUiXMLFile(String typeName, GeneratorContext context, 
        TreeLogger logger) throws Exception {

    // gets the type given by the String typeName
    JClassType classType = context.getTypeOracle().getType(typeName);
    // gets the package in which the new class should get created
    String packageName = classType.getPackage().getName();
    // gets the name of the class without the package name
    String simpleName = classType.getSimpleSourceName();
    simpleName = simpleName + "Generated";
    // for us to see what classes were generated by this generator

    OutputStream os = context.tryCreateResource(logger, 
          packageName.replace(".", "/")+"/"+simpleName+".ui.xml");
    // it does also not work if I just use
    // context.tryCreateResource(logger, simpleName+".ui.xml");

    ByteArrayOutputStream baus = new ByteArrayOutputStream();
    // just for testing, that I wrote the XML code into the PrintWriter
    PrintWriter pw = new PrintWriter(baus);

    pw.println("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
    /* the UiBinder XML code ... */
    pw.println("</ui:UiBinder>");
    pw.flush();

    FileOutputStream fout = new FileOutputStream("C:\\...\\view\\UnicodeCharViewGenerated.ui.xml");
    fout.write(baus.toByteArray());
    fout.close();

    os.write(baus.toByteArray());
    context.commitResource(logger, os);
    // even after doing the commit the file is not written to the -gen location
} 
```

我想我忘了调用任何函数来将新文件添加到 Oracle；但我不知道我应该调用什么方法。

如果我使用 FileOutputStream 并将 ui.xml 文件直接写入我的 Eclipse 工作区，那么它就可以工作。但是，如果我将此行注释掉，编译器将找不到 .ui.xml 文件并且延迟绑定失败。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-06T17:21:04.387

据我通过 java script(gwt) 了解，我们无法将内容（字节数组）写入系统的驱动器。

# linux - Arduino 蓝牙 N64 控制器 - 编写 Linux 驱动程序？

> ID：15252924
> 
> 赞同：4
> 
> 时间：2013-03-06T16:34:35.673
> 
> 标签：linux, bluetooth, linux-kernel, arduino, linux-device-driver

我正在做一个小 Arduino 项目，为我的 Ubuntu 盒子创建一个蓝牙 N64 操纵杆。我设法找到了一个草图来通过串行输出控制器状态，它工作得很好。还将TX和RX发送到我拥有的小CSR蓝牙模块工作正常。

当我与设备配对时，我必须使用“rfcomm bind”在我的 dev 目录中查看设备，并且“cat”输出显示所有数据也正在通过。

我的问题是，让 Linux 将该设备识别为操纵杆的下一步是什么 - 即 /dev/js0。如果我知道我需要做什么来实现这一点，我可以阅读必要的步骤，但目前我完全不知道从哪里开始——过去没有做过这样的事情。我应该考虑创建内核模块吗？

任何朝着正确方向的信息或戳都将不胜感激——即使这只是一个观察。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:07:08.887

编写自定义内核代码绝对不是这里的方法。

要使您的项目在 Linux 中显示为操纵杆设备，您需要使用[蓝牙 HID 配置文件](https://www.bluetooth.org/docman/handlers/downloaddoc.ashx?doc_id=246761)来呈现它。有了这个，一切都应该在客户端“正常工作”，你会在 /dev 中看到一个条目。HID 配置文件非常全面，被大多数蓝牙接口设备使用——键盘、鼠标、游戏控制器等。其中的蓝牙部分实际上主要只是围绕 USB HID 协议的一个薄包装。

从事物的声音来看，您的设备目前没有使用该配置文件为自己做广告。

# javascript - jQuery文件上传控件错误提交大文件

> ID：15252929
> 
> 赞同：0
> 
> 时间：2013-03-06T16:34:54.123
> 
> 标签：javascript, jquery, jquery-file-upload

我有一个用于 blueimp/jQuery 文件上传控件的自定义文件上传实现。它工作得很好，除非当我选择多个文件并且其中一个超过最大长度时，它仍会尝试上传超出范围的文件（即使我不调用`data.submit()`该特定文件）。

我已验证该`progress`事件不会针对大（且未提交）文件触发，但服务器最终报告 404.13（请求过滤模块配置为拒绝超过请求内容长度的请求），并且没有其他文件实际提交的被上传。

如何更改使用 jQuery 文件上传控件上传有效文件的方式，但忽略大文件？

这是我的代码...它操作一个模型，该模型通过敲除来显示 UI 元素，因此您不会在下面的代码中看到任何 UI 操作。

```
 $('#fileupload').fileupload({
            dataType: 'json',
            url: '/Handlers/UploadHandler.ashx',
            progress: function (e, data) {
                console.log(data.context);
                var progress = parseInt(data.loaded / data.total * 100, 10);
                var file = fileUploadDataModel.files()[data.context];
                file.percentComplete(progress);
            },
            add: function (e, data) {
                $.each(data.files, function (index, file) {
                    var fileModel = new FileModel(file.name, file.size);
                    fileUploadDataModel.files.push(fileModel);
                    data.context = fileUploadDataModel.files().length - 1;

                    if (file.size > opts.maxFileSize) {
                        fileModel.errorMessage('{0} ({1}) exceeds maximum size -- rejected'.format(file.name, friendlyBytes(file.size)));
                        fileModel.percentComplete(0);
                    }
                    else data.submit();
                });
            },
            done: function (e, data) {
                var file = fileUploadDataModel.files()[data.context];
                file.percentComplete(100);
            },
            singleFileUploads: false,
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:27:26.430

通过标记无效的文件，将它们从 data.files 数组中删除，然后提交其余文件，我能够使其工作。这是固定代码...

```
 $('#fileupload').fileupload({
            dataType: 'json',
            url: '/Handlers/UploadHandler.ashx',
            progress: function (e, data) {
                console.log(data.context);
                var progress = parseInt(data.loaded / data.total * 100, 10);
                var file = fileUploadDataModel.files()[data.context];
                file.percentComplete(progress);
            },
            add: function (e, data) {
                var itemsToRemove = [];
                $.each(data.files, function (index, file) {
                    var fileModel = new FileModel(file.name, file.size);
                    fileUploadDataModel.files.push(fileModel);
                    fileModel.sourceIndex = fileUploadDataModel.files().length - 1;
                    file.fileModel = fileModel;

                    if (file.size > opts.maxFileSize) {
                        fileModel.errorMessage('{0} ({1}) exceeds maximum size -- rejected'.format(file.name, friendlyBytes(file.size)));
                        fileModel.percentComplete(0);
                        itemsToRemove.push(index);
                    }
                });

                itemsToRemove = itemsToRemove.reverse();
                for (index in itemsToRemove)
                    data.files.splice(itemsToRemove[index], 1);

                $.each(data.files, function (index, file) {
                    data.context = file.fileModel.sourceIndex;
                    data.submit();
                });
            },
            done: function (e, data) {
                var file = fileUploadDataModel.files()[data.context];
                file.percentComplete(100);
            },
            singleFileUploads: false,
        }); 
```

# mysql - MYSQL BLOB 存储html数据。在单独的表中与否？

> ID：15252931
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:35:14.083
> 
> 标签：mysql, blob

我有 100000 行的表。该表还包含一个 BLOB 字段，因此表大小约为 1GB。应用程序中的许多查询会定期扫描此表。blob 字段仅在一个选择查询中使用。该表还包含 5 个大小为 10MB 的索引。我的怀疑是。

1 ) 将 blob 归档到另一个表是否更好？这会提高从表中读取操作的速度吗？

2) BLOB 文件用于存储大约 6 Kib 大小的 HTML 数据。BLOB 类型适合这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:43:16.753

如果您可以更改架构：

*   将图像存储在应用程序服务器中并存储这些图像的相对路径。这将减少开销
*   将 blob 字段移动到另一个表也是一个好主意。

为什么要将 html 数据保存在 blob 中？您是否认真存储图像样式/ css？完全不推荐！

# java - Jackson 库的 ANDROID 用法：如何使用索引加载对象 - 范围从到

> ID：15252933
> 
> 赞同：0
> 
> 时间：2013-03-06T16:35:15.983
> 
> 标签：java, android, json, performance, jackson

我有非常大的 JSON 文件用于解析和管理。我的 JSON 文件包含这样的结构

```
[
{"id": "11040548","key1":"keyValue1","key2":"keyValue2","key3":"keyValue3","key4":"keyValue4","key5":"keyValue5","key6":"keyValue6","key7":"keyValue7","key8":"keyValue8","key9":"keyValue9","key10":"keyValue10","key11":"keyValue11","key12":"keyValue12","key13":"keyValue13","key14":"keyValue14","key15":"keyValue15"
},
{"id": "11040549","key1":"keyValue1","key2":"keyValue2","key3":"keyValue3","key4":"keyValue4","key5":"keyValue5","key6":"keyValue6","key7":"keyValue7","key8":"keyValue8","key9":"keyValue9","key10":"keyValue10","key11":"keyValue11","key12":"keyValue12","key13":"keyValue13","key14":"keyValue14","key15":"keyValue15"
},
....
{"id": "11040548","key1":"keyValue1","key2":"keyValue2","key3":"keyValue3","key4":"keyValue4","key5":"keyValue5","key6":"keyValue6","key7":"keyValue7","key8":"keyValue8","key9":"keyValue9","key10":"keyValue10","key11":"keyValue11","key12":"keyValue12","key13":"keyValue13","key14":"keyValue14","key15":"keyValue15"
}
] 
```

我的 JSON 文件包含来自新闻网站的主题数据，几乎每天这个 JSON 文件都会急剧增加。

为了解析我使用的那个文件

```
URL urlLinkSource = new URL(OUTBOX_URL);
urlLinkSourceReader = new BufferedReader(new InputStreamReader(
                        urlLinkSource.openStream(), "UTF-8"));
ObjectMapper mapper = new ObjectMapper();
List<DataContainerList> DataContainerListData = mapper.readValue(urlLinkSourceReader,new TypeReference<List<DataContainerList>>() { }); //DataContainerList contains id, key1, key2, key3..key15 
```

我的问题是我想在这一行加载

```
List<DataContainerList> DataContainerListData = mapper.readValue(urlLinkSourceReader,new TypeReference<List<DataContainerList>>() { }); 
```

只有 JSON 对象的范围 - 只是前十个对象，只是后十个对象 - 因为我需要在分页模式下在我的应用程序中显示 10 条新闻（一直我知道我需要显示的 10 条的索引）。加载 10 000 个对象并仅迭代其中的前 10 个对象，这完全是愚蠢的。所以我的问题是如何以类似的方式加载：

```
List<DataContainerList> DataContainerListData = mapper.readValue(urlLinkSourceReader,new TypeReference<List<DataContainerList>>() { }); 
```

仅具有索引 FROM -TO 的对象（例如从 30 到 40）而不加载整个 JSON 文件中的所有对象？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:21:31.323

如果你想的话，这取决于你所说的“使用索引加载对象”的意思

**读取所有内容，但只绑定一个子列表** 这种情况下的解决方案是读取完整的流并仅绑定这些索引中的值。您可以使用 jacksons 流 api 并自己做。解析流使用计数器来跟踪实际索引，然后仅绑定到您需要的 POJO。但是，如果您的文件很大并且是实时完成的，这不是一个好的解决方案。

**只读那些索引之间的数据**

如果您的文件很大并且性能很重要，您应该这样做。与其拥有一个大文件，不如通过将您的 json 数组拆分为与您的范围匹配的多个文件来进行分页，然后将特定文件内容反序列化到您的数组中。

希望这可以帮助...

# wix - 是否可以使用带有 IISExtension 的 WiX 3.x 设置“ASP.NET 模拟”？

> ID：15252934
> 
> 赞同：3
> 
> 时间：2013-03-06T16:35:16.797
> 
> 标签：wix

我的 .wxs 文件中有这个组件：

```
 <Component Id="Component.IisConfiguration" Guid="[COMPONENT_GUID_IISSITE]">
    <iis:WebAppPool Id="IIS.AppPool" Name="[WEB_APP_POOL_NAME]" Identity="networkService" ManagedRuntimeVersion="v4.0" />
    <iis:WebSite Id="IIS.WebSite" Description="[WEB_APP_NAME]" SiteId="[WEB_APP_SITEID]" Directory="TARGETDIR" >          
      <iis:WebApplication Id="IIS.WebSite.Application" Name="[WEB_APP_POOL_NAME]" WebAppPool="IIS.AppPool" />
      <iis:WebAddress Id="IIS.WebSite.WebAddress.Port" Port="[WEB_APP_ADDRESS_PORT]" />
      <iis:WebDirProperties Id="IIS.WebSite.Authentication" WindowsAuthentication="yes"  />
    </iis:WebSite>
  </Component> 
```

是否可以在任何地方设置“ASP.NET Impersonation”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:53:29.627

似乎没有开箱即用的开关。您可以有一个自定义操作，它调用：

```
appcmd set config /commit:WEBROOT/section:identity /impersonate:true 
```

有关更多信息，请参阅[本文](http://technet.microsoft.com/en-us/library/cc730708.aspx)。

另一方面，您始终可以[在应用程序级别](http://technet.microsoft.com/en-us/library/cc755253.aspx)设置此设置，并使用标准`XmlConfig`元素为此修改 web.config 文件。

# iphone - 带有 uitableview 的 uitviewcontroller 和带有 uitextfields 的自定义 uitableviewcells 使用键盘向上/向下滚动

> ID：15252945
> 
> 赞同：0
> 
> 时间：2013-03-06T16:35:37.413
> 
> 标签：iphone, objective-c, xcode, uiscrollview, uikeyboard

当键盘弹出时，我很难找出让我的 uitextfields 不被隐藏的最佳方法。现在我有一个 UIView 包含一个 uitableview 子视图和按钮。

* uiview里面的tableview其实是一个uiviewcontroller，带有一个程序化创建的tableivew，所以它不受uitableviewcontroller控制。

我已经完成了研究，我认为我需要一个滚动视图，然后将视图添加到滚动视图中，并在选择特定文本字段并通过键盘向上滚动时进行一些滚动。

这是一个好方法吗？

更新：

我有两个单独的视图控制器。例如，假设 MainViewcontroller 和 SecondViewcontroller。secondviewcontroller 中有一个 uitableview。表格视图内的单元格具有存储用户信息的文本框（如表单）。然后我所做的是在 mainviewcontroller 内部创建了一个 secondviewcontroller 对象。我这样做是因为我需要在视图底部有一个“下一个按钮”。当我选择一个字段时，它将位于键盘下方，当它弹出时，我想让它向上滚动，关闭时它会向下滚动。我不得不使用 uitableview 的对象，因为 Mainviewcontroller 类会很大。（如果我错了，请纠正我）。谢谢回复。

这是我正在尝试做的截图......完整的 UIView：[http](http://postimage.org/image/puzdwpj3t/) ://postimage.org/image/puzdwpj3t/ 键盘打开：[http ://postimage.org/image/g5nkwzwpd/](http://postimage.org/image/g5nkwzwpd/)

//这里是一些代码： 1.这里的第一个类例如是SecondViewcontroller。2\. 第二段代码比如mainviewcontroller，它创建了一个secondviewcontroller的对象。

1.  下面的 uiviewcontroller 将创建一个包含 3 个部分的表。每个单元格都有一个文本字段（除了中间，它是一个拉起 uipickerview 的按钮）。这不是一个完整的课程，我只学习了创建表格的区域。

    ```
    -(void)viewDidLoad{
    [super viewDidLoad];

    //    scrollview = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 300, 500)];
    //    scrollview.pagingEnabled = YES;
    //    
    //    //[scrollview addSubview:self.view];
    //    [self.view addSubview:scrollview];

    table.scrollEnabled = YES;
    dataArray = [[NSMutableArray alloc] init];
    titleLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 10, 290, 30)];

    //dropper
    titleField = [[UITextField alloc] initWithFrame:CGRectMake(10, 2, 300, 30)];
    titleField.layer.cornerRadius = 8;
    titleField.backgroundColor = [UIColor clearColor];

    NSArray *firstItemsArray = [[NSArray alloc] initWithObjects:@"1",@"2", nil];

    NSDictionary *firstItemsArrayDict = [NSDictionary dictionaryWithObject:firstItemsArray forKey:@"data"];
    [dataArray addObject:firstItemsArrayDict];

    //Second section dat
    NSArray *secondItemsArray = [[NSArray alloc] initWithObjects:@"1", nil];
    NSDictionary *secondItemsArrayDict = [NSDictionary dictionaryWithObject:secondItemsArray forKey:@"data"];
    [dataArray addObject:secondItemsArrayDict];

    NSArray *thirdItemsArray = [[NSArray alloc] initWithObjects:@"1",@"2",@"3", nil];
    NSDictionary *thirdItemsArrayDict = [NSDictionary dictionaryWithObject:thirdItemsArray forKey:@"data"];
    [dataArray addObject:thirdItemsArrayDict];

    NSLog(@"the dataArray%@",dataArray);

    if([self connectedToNetwork]){

    dispatch_async(kBgQueue, ^{

    //build the url of strings
    FULLURL = [SERVERNAME stringByAppendingFormat:TitleLink];
    //create the url
    NSURL *url = [[NSURL alloc] initWithString:FULLURL];
    //NSLog(@"here title url%@",url);

    //get the data from the url
    NSData* data = [NSData dataWithContentsOfURL: url];
    //NSLog(@"here%@",data);

    //get the data from the url
    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    // NSLog(@"titleid:%@",TITLEID);
    // NSLog(@"title categories:%@",titlecategories);

    });

    [table setBounces:NO];

    }else{

    dispatch_async(dispatch_get_main_queue(), ^ {
    UIAlertView *alert = [[UIAlertView alloc]
          initWithTitle: @"Please Check your internet connection"
          message:@"Enable your internet connection"
          delegate: nil
          cancelButtonTitle:@"OK"
          otherButtonTitles:nil];
    [alert show];
    });
    }

    }

    -(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
    {
    return [dataArray count];
    }

    -(NSInteger) tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
    {
    //Number of rows it should expect should be based on the section
    NSDictionary *dictionary = [dataArray objectAtIndex:section];
    NSArray *array = [dictionary objectForKey:@"data"];
    return [array count];

    }

    - (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

    if(indexPath.section == 1){
    cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"longdropper300.png"]];

    }
    else{
    cell.backgroundColor = [UIColor whiteColor];
    }
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    textField = [[UITextField alloc] initWithFrame:CGRectMake(15, 10, 290, 30)];

    static NSString *cellValue = @"Cell";
    UITableViewCell *cell =nil;

    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellValue];
    }
    cell.selectionStyle = UITableViewCellSelectionStyleGray;

    if ([indexPath section] == 0) {

    //cellValue=[items objectAtIndex:indexPath.row];
    cell.accessoryType = UITableViewCellAccessoryNone;
    cell.selectionStyle= UITableViewCellSelectionStyleNone;
    //textField.tag = 1;
    textField.adjustsFontSizeToFitWidth = YES;
    textField.textColor = [UIColor blackColor];

    if(indexPath.section == 0){
    //textfield for email
    if ([indexPath row] == 0) {
    textField.tag = 1;
    textField.text = EMAIL;
    textField.textColor= [UIColor blackColor];
    textField.placeholder = @"Email: example@gmail.com";
    textField.keyboardType = UIKeyboardTypeEmailAddress;
    textField.returnKeyType = UIReturnKeyNext;

    }
    //textfield for phone number
    else {
    textField.tag = 2;
    if ([PHONENUMBER isEqual: [NSNull null]] && PHONENUMBER == nil && PHONENUMBER == NULL && [PHONENUMBER isEqual: @""]){
    NSLog(@"phone is empty%@",PHONENUMBER);
    //[PHONENUMBER isEqual:@"frank"];

    }else{
    NSLog(@"phone is not empty%@",PHONENUMBER);
    textField.text = PHONENUMBER;
    }

    textField.placeholder = @"Phone: xxx-xxx-xxxx";
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.secureTextEntry = NO;
    }
    textField.backgroundColor = [UIColor whiteColor];
    textField.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
    textField.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
    textField.textAlignment = UITextAlignmentLeft;
    textField.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
    [textField setEnabled: YES];
    textField.delegate = self;
    [cell addSubview:textField];

    }
    }
    if(indexPath.section == 1){

    [titleField setTextColor:[UIColor whiteColor]];
    titleField.tag = 3;
    titleField.placeholder = @"Select Contact Title";
    titleField.returnKeyType = UIReturnKeyNext;

    //titleField == textField.tag = 3;
    if ([TITLENAME isEqual: [NSNull null]]){
    NSLog(@"titlename is empty%@",TITLENAME);

    }else{
    NSLog(@"titlename is not empty%@",TITLENAME);
    titleField.text = TITLENAME;
    }

    titleField.keyboardType = UIKeyboardTypeDefault;
    titleField.returnKeyType = UIReturnKeyDone;
    titleField.secureTextEntry = NO;
    titleField.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
    titleField.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
    titleField.textAlignment = UITextAlignmentCenter;
    titleField.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
    [titleField setEnabled: NO];
    titleField.delegate = self;

    [cell addSubview:titleField];

    NSLog(@"here is the titlename%@",TITLENAME);

    }

    if(indexPath.section == 2){

    if ([indexPath row] == 0) {

    textField.tag = 4;
    textField.placeholder = @"First Name";
    cell.selectionStyle= UITableViewCellSelectionStyleNone;

    if ([FIRSTNAME isEqual: [NSNull null]]){
    NSLog(@"firstname is empty%@",FIRSTNAME);
    textField.text = @"";

    }else{

    textField.text = FIRSTNAME;

    }

    textField.keyboardType = UIKeyboardTypeEmailAddress;
    textField.returnKeyType = UIReturnKeyNext;
    }

    if([indexPath row] == 1){
    textField.tag = 5;
    textField.placeholder = @"Last Name";

    if ([LASTNAME isEqual: [NSNull null]]){
    NSLog(@"lastname is empty%@",LASTNAME);
    textField.text = @"";

    }else{
    textField.text = LASTNAME;

    }
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyNext;
    //textField.secureTextEntry = NO;

    }

    if([indexPath row] == 2){

    textField.tag = 6;
    textField.placeholder = @"Company";

    if ([COMPANY isEqual: [NSNull null]]){
    NSLog(@"company is empty%@",COMPANY);
    textField.text = @"";
    }
    else{
    textField.text = COMPANY;
    }

    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.secureTextEntry = NO;

    }

    //]textField.backgroundColor = [UIColor whiteColor];
    textField.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
    textField.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
    textField.textAlignment = UITextAlignmentLeft;
    textField.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
    [textField setEnabled: YES];
    textField.delegate = self;
    [cell addSubview:textField];

    }

    return cell;
    }

    //Change the Height of title cell drop down
    -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath*)indexPath
    {
    if (indexPath.section == 1) {
    if (indexPath.row == 0) {
    return 30;
    }
    }
    return 45;
    }

    - (BOOL)textFieldShouldEndEditing:(UITextField *)textField{

    if(([textField tag] == 1)){

    NSString *emailRegEx = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx];
    //Valid email address

    if ([emailTest evaluateWithObject:textField.text] == YES)
    {

    EMAIL = [textField.text copy];
    NSLog(@"here is the email%@",EMAIL);
    }
    else
    {

    UIAlertView *alert = [[UIAlertView alloc]

                  initWithTitle: @"Bad Email"
                  message: @"Please Re-enter the email address with a valid email"
                  delegate: nil
                  cancelButtonTitle:@"OK"
                  otherButtonTitles:nil];
    [alert show];
    textField.text =  nil;
    NSLog(@"email not in proper format");
    }

    }

    if(([textField tag] == 2)){

    NSString *phoneRegex = @"[235689][0-9]{6}([0-9]{3})?";
    NSPredicate *phoneTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", phoneRegex];
    //valid email address

    if ([phoneTest evaluateWithObject:textField.text] == YES)
    {

    PHONENUMBER = [textField.text copy];
    NSLog(@"here is the phone number %@",PHONENUMBER);
    }
    else
    {
    NSLog(@"Phone Number Invalid");
    UIAlertView *alert = [[UIAlertView alloc]
                  initWithTitle: @"xxx-xxx-xxxx"
                  message: @"Please enter a valid phone number"
                  delegate: nil
                  cancelButtonTitle:@"OK"
                  otherButtonTitles:nil];
    [alert show];
    textField.text =  nil;
    }
    }

    if(([textField tag] == 4)){

    FIRSTNAME = [textField.text copy];
    NSLog(@"here is the firstName%@",FIRSTNAME);
    }
    if(([textField tag] == 5)){

    LASTNAME = [textField.text copy];
    NSLog(@"here is the Last Name%@",LASTNAME);
    }

    if(([textField tag] == 6)){

    COMPANY = [textField.text copy];
    NSLog(@"here is the Company%@",COMPANY);
    }

    return YES;
    }

    -(BOOL)textFieldShouldReturn:(UITextField*)textField;
    {
    NSInteger nextTag = textField.tag + 1;
    // Try to find next responder
    UIResponder* nextResponder = [textField.superview viewWithTag:nextTag];
    if (nextResponder) {

    // Found next responder, so set it.
    [nextResponder becomeFirstResponder];
    } else {
    // Not found, so remove keyboard.
    [textField resignFirstResponder];
    }
    return NO; // We do not want UITextField to insert line-breaks.
    } 
    ```

2.  主视图控制器 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil { self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]; if (self) { // 自定义初始化 } return self; }

    ```
    - (void)addMyButton{    // Method for creating button, with background image and other properties

    loginButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    loginButton.frame = CGRectMake(10.0,130.0, 300.0, 40.0);
    [loginButton setTitle:@"Login" forState:UIControlStateNormal];
    loginButton.backgroundColor = [UIColor clearColor];
    [loginButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal ];
    UIImage *buttonImageNormal = [UIImage imageNamed:@"blueButton.png"];
    UIImage *strechableButtonImageNormal = [buttonImageNormal stretchableImageWithLeftCapWidth:12 topCapHeight:0];
    [loginButton setBackgroundImage:strechableButtonImageNormal forState:UIControlStateNormal];
    UIImage *buttonImagePressed = [UIImage imageNamed:@"whiteButton.png"];
    UIImage *strechableButtonImagePressed = [buttonImagePressed stretchableImageWithLeftCapWidth:12 topCapHeight:0];
    [loginButton setBackgroundImage:strechableButtonImagePressed forState:UIControlStateHighlighted];
    [self.view addSubview:loginButton];
    [loginButton addTarget: self
    action: @selector(loginButtonClicked:)
    forControlEvents: UIControlEventTouchUpInside];
    }

    //Change the View and send the information to the servlet once login is clicked.
    - (void)loginButtonClicked: (id)sender{

    loginButton.enabled = NO;
    activityIndicator = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(20, 60, 20, 20)];
    UIBarButtonItem * barButton = [[UIBarButtonItem alloc] initWithCustomView:activityIndicator];
    [self navigationItem].rightBarButtonItem = barButton;
    [activityIndicator startAnimating];

    [passwordTF resignFirstResponder];

    //start new thread
    //dispatch_async(kBgQueue, ^{
    NSLog(@"Username:%@",USERNAME);
    NSLog(@"Password:%@",PASSWORD);
    NSLog(@"COMPANYID: %@", COMPANYID);
    //NSLog(@"LOGINID: %@", LOGINID);

    if((USERNAME == NULL) || (USERNAME == nil) || ([USERNAME isEqualToString:@""])){
    //NSLog(@"null password or usernaem");
    UIAlertView *alert = [[UIAlertView alloc]
              initWithTitle: @"Username or password not found"
              message:@"please try again"
              delegate: nil
              cancelButtonTitle:@"OK"
              otherButtonTitles:nil];
    [alert show];
    [activityIndicator stopAnimating];

    // MangoLoginViewController *SenderInfoViews = [[MangoLoginViewController alloc] init];
    // [self.navigationController pushViewController:SenderInfoViews animated:NO];

    }else if((PASSWORD == NULL) || (PASSWORD == nil) || ([PASSWORD isEqualToString:@""])){
    //NSLog(@"null password or usernaem");

    UIAlertView *alert = [[UIAlertView alloc]
              initWithTitle: @"Username or password not found"
              message:@"please try again"
              delegate: nil
              cancelButtonTitle:@"OK"
              otherButtonTitles:nil];
    [alert show];
    [activityIndicator stopAnimating];

    // MangoLoginViewController *SenderInfoViews = [[MangoLoginViewController alloc] init];
    // [self.navigationController pushViewController:SenderInfoViews animated:NO];

    }else{
    //NSLog(@"all good");

    NSLog(@"Login button clicked, load the next view and check for password");
    NSLog(@"full the url%@",FULLURL);
    //build the url of strings
    FULLURL = ******

    if([self connectedToNetwork])

    {
    dispatch_queue_t downloadQueue = dispatch_queue_create("data loader", NULL);

    dispatch_async(downloadQueue, ^{

    //create the url
    NSURL *url = [[NSURL alloc] initWithString:FULLURL];
    NSLog(@"here%@",url);

    //get the data from the url
    NSData* data = [NSData dataWithContentsOfURL: url];
    NSLog(@"here%@",data);

    NSLog(@"here that data%@",data);

    if(data != nil){
    //
    //get the data from the url

    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    //
    NSLog(@"hello Username:%@",USERNAME);
    NSLog(@"Password:%@",PASSWORD);
    NSLog(@"h4llo COMPANYID: %@", COMPANYID);
    NSLog(@"LOGINID: %@", LOGINID);

    //
    //       // [self performSelectorOnMainThread:@selector(checkLogin:) withObject:LOGINID waitUntilDone:YES];
    //
    //
    @try {
    //NSLog(@"before loginddd %@",LOGINID);
    if(COMPANYID != 0){

        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        [prefs setObject:USERNAME forKey:@"UserName"];
        [prefs setObject:@"Pass" forKey:@"Pass"];
        // This is suggested to synch prefs, but is not needed
        [prefs synchronize];

        NSLog(@"here is the login identiy%@",LOGINID);
        MangoContactSelection *SenderInfoViews = [[MangoContactSelection alloc] init];
        [self.navigationController pushViewController:SenderInfoViews animated:NO];

    }
    else{
        dispatch_async(dispatch_get_main_queue(), ^ {
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle: @"bad NAME"
                              message:@"GOO"
                              delegate: nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
        [alert show];

    //                        [self.view setNeedsDisplay];
        [self.view reloadInputViews];
        MangoLoginViewController *SenderInfoViews = [[MangoLoginViewController alloc] init];
        [self.navigationController pushViewController:SenderInfoViews animated:NO];
            [activityIndicator stopAnimating];
        });
    }
    }
    @catch (NSException * e) {
    NSLog(@"Exception: %@", e);
    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle: @"Login Failed"
                          message:@"Bad"
                          delegate: nil
                          cancelButtonTitle:@"OK"
                          otherButtonTitles:nil];
    [alert show];
    //[activityIndicator stopAnimating];
    }

    // if the data is nil do this
    }else{
    dispatch_async(dispatch_get_main_queue(), ^ {
    UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: @"No Internet!"
                      message:@"Please Check your internet Connection"
                      delegate: nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil];
    [alert show];
    [self.view setNeedsDisplay];
    MangoLoginViewController *SenderInfoViews = [[MangoLoginViewController alloc] init];
    [self.navigationController pushViewController:SenderInfoViews animated:NO];
    });
    }

    dispatch_async(dispatch_get_main_queue(), ^ {

    //UIImage *image = [UIImage imageWithData:imageData];

    //[table reloadData];
    //[actIndicator stopAnimating];
    [self.view reloadInputViews];
    [activityIndicator stopAnimating];

    // sender because that's the element that called us by clicking refresh

    });

    });

    }else{

    UIAlertView *alert = [[UIAlertView alloc]
                  initWithTitle: @"No Internet!"
                  message:@"Please Check your internet Connection"
                  delegate: nil
                  cancelButtonTitle:@"OK"
                  otherButtonTitles:nil];
    [alert show];
    [self.view setNeedsDisplay];
    MangoLoginViewController *SenderInfoViews = [[MangoLoginViewController alloc] init];
    [self.navigationController pushViewController:SenderInfoViews animated:NO];
    }
    }
    [self.view reloadInputViews];
    }//login

    -(void)gobacktoContactCreate{
    MangoContactSelection *gobackhome = [[MangoContactSelection alloc]init];
    [self.navigationController pushViewController:gobackhome animated:YES];

    }

    - (void)viewDidLoad
    {

    [super viewDidLoad];
    //self.view setBackgroundColor:([UIColor blackColor]);
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSString *userName = [prefs stringForKey:@"UserName"];
    //NSString *pass = [prefs stringForKey:@"Pass"];

    //navigation bar
    self.navigationController.navigationBar.tintColor = [UIColor blackColor];
    [self.navigationController setNavigationBarHidden: NO animated:NO];
    self.navigationItem.hidesBackButton = YES;

    self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:@selector(gobacktoContactCreate)];

    self.navigationItem.title=@"Login";

    //User name text field................
    usernameTF = [[UITextField alloc] initWithFrame:CGRectMake(10, 25, 300, 40)];
    usernameTF.borderStyle = UITextBorderStyleRoundedRect;
    usernameTF.font = [UIFont systemFontOfSize:15];
    usernameTF.placeholder = @"Username";
    usernameTF.text = userName;
    usernameTF.autocorrectionType = UITextAutocorrectionTypeNo;
    usernameTF.keyboardType = UIKeyboardTypeDefault;
    usernameTF.returnKeyType = UIReturnKeyNext;
    usernameTF.clearButtonMode = UITextFieldViewModeWhileEditing;
    usernameTF.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;

    //User name text field................
    passwordTF = [[UITextField alloc] initWithFrame:CGRectMake(10, 75, 300, 40)];
    passwordTF.borderStyle = UITextBorderStyleRoundedRect;
    passwordTF.font = [UIFont systemFontOfSize:15];
    passwordTF.placeholder = @"Password";
    passwordTF.autocorrectionType = UITextAutocorrectionTypeNo;
    passwordTF.keyboardType = UIKeyboardTypeDefault;
    passwordTF.returnKeyType = UIReturnKeyDone;
    passwordTF.clearButtonMode = UITextFieldViewModeWhileEditing;
    passwordTF.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    passwordTF.secureTextEntry = YES;

    //create the clickable labels
    //register link
    registerLabel = [[UILabel alloc]initWithFrame:CGRectMake(150,170, 150, 20)];
    registerLabel.text = @"Request an account";
    registerLabel.font = [UIFont systemFontOfSize:12];
    registerLabel.userInteractionEnabled = YES;
    registerLabel.textColor = [UIColor blueColor];
    UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(requestRegistration:)];
    [registerLabel addGestureRecognizer:gr];
    gr.numberOfTapsRequired = 1;
    gr.cancelsTouchesInView = NO;

    //create the label for
    registerText = [[UILabel alloc]initWithFrame:CGRectMake(60,170, 90, 20)];
    registerText.text = @"New to *******?";
    registerText.font = [UIFont systemFontOfSize:12];

    //    //forgot password link
    //    forgotPassword = [[UILabel alloc]initWithFrame:CGRectMake(210,190, 150, 20)];
    //    forgotPassword.font = [UIFont systemFontOfSize:12];
    //    forgotPassword.textColor = [UIColor blueColor];
    //    forgotPassword.text = @"Forgot Password?";
    //    forgotPassword.userInteractionEnabled = YES;
    //    UITapGestureRecognizer *tapRec = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(requestForgottenPassword:)];
    //    [registerLabel addGestureRecognizer:tapRec];
    //    tapRec.numberOfTapsRequired = 1;
    //    tapRec.cancelsTouchesInView = NO;

    [self.view addSubview:passwordTF];
    [self.view addSubview:usernameTF];
    [self.view addSubview:registerLabel];
    [self.view addSubview:registerText];

    //    [self.view addSubview:forgotPassword];

    [self addMyButton];

    usernameTF.delegate = self;
    passwordTF.delegate = self;

    }

    -(void)requestRegistration:(UITapGestureRecognizer *)gr{

    //for registration
    NSLog(@"request registration link clicked");

    }

    -(void)requestNewPassword:(UITapGestureRecognizer *)tapRec{

    //for registration
    NSLog(@"request password link clicked");
    }

    //Grabs the Json from the servlet and then parses it for the username and password.

    - (void)fetchedData:(NSData *)responseData {
    //parse out the json data

    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                         options:kNilOptions
                                           error:&error];

    //NSLog(@"here is the login info from json: %@", json);
    // NSString *FALSELOGIN;

    COMPANYID = [json valueForKey:@"companyid"];
    NSLog(@"COMPANY ID: %@", COMPANYID);

    // LOGINID = [json valueForKey:@"login"];
    // NSLog(@"LOGIN ID: %@", LOGINID);

    }

    - (BOOL)textFieldShouldEndEditing:(UITextField *)textField{

    if((textField = usernameTF)){
    USERNAME = [textField.text copy];
    //NSLog(@"here is the string for username;%@", USERNAME);
    }

    if((textField = passwordTF)){
    PASSWORD = [textField.text copy];

    //NSLog(@"here is the password guy %@",PASSWORD);

    }

    return YES;
    }

    -(BOOL)textFieldShouldReturn:(UITextField *)textField
    {
    if (textField == usernameTF) {
    [passwordTF becomeFirstResponder];
    }
    else{
    [passwordTF resignFirstResponder];
    }
    return YES;
    }

    //- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    //{
    //    [passwordTF resignFirstResponder];
    //
    //}

    - (void)didReceiveMemoryWarning
    {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
    }

    @end 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:40:59.180

Dhaval，我相信你的解决方案会奏效，但我最终在这里找到了我想要的东西：

[http://www.youtube.com/watch?feature=player_detailpage&v=qSvDWnasJ9I](http://www.youtube.com/watch?feature=player_detailpage&v=qSvDWnasJ9I)

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:32:36.733

您已经在 UIViewController 的视图中添加了 Tableview。正确的？

您在哪个视图中添加了 UITextview。？UIViewController 的视图？？

您可以在 UIView 中添加 UITextView，并通过应用动画来更改 UITextView 的框架。

前任。

// 向上查看....

```
[UIView animationWithDuration:secs delay:0.0 option:option animation:^{

    CGRect frame = textview.frame;
    frame.origin.y = 10; // Change Y position of frame.
    textview.frame = frame;

}
completion:nil]; 
```

// 关闭视图

```
[UIView animationWithDuration:secs delay:0.0 option:option animation:^{

    CGRect frame = textview.frame;
    frame.origin.y = 100; // Change Y position of frame.
    textview.frame = frame;

}
completion:nil]; 
```

无需使用 UIScrollView。

# dns - IPv6 DNS 记录的结构

> ID：15252947
> 
> 赞同：2
> 
> 时间：2013-03-06T16:35:38.660
> 
> 标签：dns, ipv6

我正在寻找 IPv6 DNS 记录的规范/描述。我找到了这个文件：

[http://www.ietf.org/rfc/rfc1035.txt](http://www.ietf.org/rfc/rfc1035.txt)

它完全描述了 IPv4 DNS 记录的结构，但我找不到 IPv6 的等价物。是否有 RFC 或描述？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:39:22.700

IPv6 记录的记录类型称为`AAAA`记录。它在[RFC 3596](https://www.rfc-editor.org/rfc/rfc3596)中定义。

IANA[维护着一个注册表](http://www.iana.org/assignments/dns-parameters/dns-parameters.xml#dns-parameters-3)，其中 RFC 文档指定了每个 RR 类型——它们都在那里被索引。

注意：还有一个`A6`IPv6 的记录早于`AAAA`该记录，但已被[RFC 6353](https://www.rfc-editor.org/rfc/rfc6563)废弃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:43:41.623

IPV6 只是一个扩展。要查找有关它们的信息，最简单的方法是搜索“DNS AAAA 记录”。

这是您要求的 RFC：

[http://www.ietf.org/rfc/rfc3596.txt](http://www.ietf.org/rfc/rfc3596.txt)

# jasmine - 带有 jasime 的 Testacular 不显示正在运行的测试的名称

> ID：15252950
> 
> 赞同：1
> 
> 时间：2013-03-06T16:35:53.803
> 
> 标签：jasmine, karma-runner

使用 Testacular 和 Jasmine 在 Chrome 上运行测试。除了“Executed 3 of 3 tests Succeeded”之外，我没有看到任何输出。如何让 testacular 显示正在运行的测试和/或进度条？

```
// Testacular configuration
// Generated on Tue Mar 05 2013 11:12:54 GMT-0600 (Central Standard Time)

// base path, that will be used to resolve files and exclude
basePath = '';
port = 9876;
runnerPort = 9100;
singleRun = false;
autoWatch = true;
captureTimeout = 60000;

colors = true;
logLevel = LOG_ERROR;
loggers: [{type: 'console'}];
reporters:['progress'];

// Start these browsers, currently available:
// - Chrome
// - ChromeCanary
// - Firefox
// - Opera
// - Safari (only Mac)
// - PhantomJS
// - IE (only Windows)
browsers = ['Chrome'];

// list of files / patterns to load in the browser
files = [
  JASMINE,
  JASMINE_ADAPTER,
    '../js/vendor/lodash.js',
    '../js/vendor/angular-1.0.2/angular.js',
    '../js/vendor/angular-1.0.2/angular-resource.js',
    '../js/vendor/angular-1.0.2/angular-mocks.js',
    '../js/vendor/angular-ui.js',
    '../js/vendor/angular-strap.js',

    '../js/objects/Route.js',
    '../js/config.js',
    '../js/objects.js',
    '../js/app.js',
    '../js/services.js',
    'unit/**/*.js'
];

// list of files to exclude
exclude = []; 
```

# css - 在不改变选择器范围的情况下增加 CSS 选择器的类级别特异性的最简单方法

> ID：15252954
> 
> 赞同：1
> 
> 时间：2013-03-06T16:36:00.710
> 
> 标签：css, css-selectors, css-specificity, oocss

我目前正在详细阐述[Nicole Sullivan 的 OOCSS 网格模块](https://github.com/stubbornella/oocss/wiki/Grids)的变体，它只需要一个容器类来确定直接后代的布局。我知道这需要注意只能在支持 CSS3 的浏览器中工作。

这是差异的示例：

Vanilla [OOCSS 网格](http://jsfiddle.net/barney/7Bd8V/)规则：

```
.unit1of4 {
    width: 25%;
} 
```

我的[简化网格](http://jsfiddle.net/barney/32Q8B/)规则：

```
.line > :nth-child(1):nth-last-child(4),
.line > :nth-child(2):nth-last-child(3),
.line > :nth-child(3):nth-last-child(2) {
    width:25%;
} 
```

另一个重要的警告是假设元素的小数大小完全由其兄弟元素的数量决定 - 而这是这段代码的基本点（以实现更精简的 HTML，而无需到处都有明确的大小），可能会有一些例外情况。有不成比例的宽度。

由于我的选择器的特殊性，我不能简单地将 OOCSS 模块重新插入：`unitXofY`在 HTML 中指定一个类将专门用于取代默认假设，但实际上我的选择器更强大，并且总是会覆盖指定的类.

我正在寻找的是在*不限制特定性的实际效果的情况下*取代这些选择器的最简洁或最优雅的方式。也就是说，除了它的类之外，它不能对所选元素做出任何不总是正确的假设。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:39:27.287

我能想到的最好的方法是`:nth-child(n)`，因为它解析为一个无意义的语句，翻译成简单的英语作为“子元素”，嵌套分数总是如此。实现它的代码如下所示：

```
.line > :nth-child(1):nth-last-child(4),
.line > :nth-child(2):nth-last-child(3),
.line > :nth-child(3):nth-last-child(2),
.size1of4:nth-child(n):nth-child(n):nth-child(n) {
    width:25%;
} 
```

选择器被指定了 3 倍，因此它胜过之前的选择器 1，这意味着它也可以胜过下一个规则管理`.size1of5`。

作为 SASS 混合：

因为这是一个冗长的 hack，[所以我将其打包为 SASS mixin](https://gist.github.com/barneycarroll/9959522)：

```
@mixin increase-specificity( $depth: 1 ) {
    $sel : '';

    @while($depth > 0) {
        $sel   : $sel + ':nth-child(n)';
        $depth : $depth - 1;
    }

    &#{$sel} {
        @content;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T09:36:32.430

您可以根据需要多次重复类名以增加特异性，只要重复之间没有空格`.className`，就假定它适用于同一个元素。根据[w3c 规范](http://www.w3.org/TR/css3-selectors/#specificity)，“允许重复出现相同的简单选择器并确实增加了特异性”

因此，例如，您可以使用：

```
.size1of4.size1of4.size1of4.size1of4{/*some styles*/} 
```

...这将适用于仅`size1of4`在 class 属性中的任何元素，覆盖另一个在其选择器中只有 3 个类名或伪类的声明。

# django - 在 Django Admin 中向选项添加额外数据

> ID：15252955
> 
> 赞同：1
> 
> 时间：2013-03-06T16:36:02.650
> 
> 标签：django, django-models, django-forms, django-templates, django-admin

我有以下内容：

```
class Destination(models.Model):
    name = models.CharField
    picture = models.ImageField

    def __unicode__(self):
        return u"%s" % self.name

class Vacation(models.Model):
    destination = models.ForeignKey(Destination) 
```

在我的 Django 管理界面中创建模型时，**我希望我的目的地显示为带有目的地名称和目的地图片的单选按钮。**

我正在使用自定义 add_form 模板，因此显示带有目的地名称的单选按钮没有问题，但包含图片很困难。

我想保持`__unicode__(self)`原样，我只需要在此管理视图中与对象一起返回的图片。我也不想内联对象。

关于如何做到这一点（包括如何将其合并到模板中）的任何建议都会很棒！

编辑：[这篇 SO 帖子](https://stackoverflow.com/questions/8630977/manytomany-field-in-form-with-checkboxes-insted-select-field-in-django-template)非常接近我的需要，但我想访问个人选择数据，而不是从修改后的标签中解析它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-04T18:34:40.507

这不是特定于管理员的答案，但我认为如果您可以为表单使用自定义模板，它应该可以在管理员中使用。

您可以制作一个修改后的小部件（可能作为现有 Django 小部件的子类），将额外的字段从模型发送到自定义小部件模板。

您还可以在显示表单的模板中手动呈现表单，并制作一个包含标记，该标记使用目标对象的 id 获取任何额外信息，该目标对象的 id 作为选项的值传递。

例如：

**your_template.html**

```
{% load destinations %}
{% for opt in form.destination %}
{{ opt.tag }}
{% destination opt.data.value %}
{% endfor %} 
```

**destinations.py**（在 your_app/templatetags 中）

```
from django import template
from your_app.models import Destination

register = template.Library()

@register.inclusion_tag('your_app/destination-option.html')
def destination(id):
    destination=Destination.objects.filter(id=int(id)).first()
    return {'destination':destination} 
```

**目的地选项.html**

```
<!-- any formatting you prefer -->
{{destination.title}}
<img src="{{destination.picture.image_url}}"> 
```

# c# - 移动推送通知服务器端包装器

> ID：15252959
> 
> 赞同：0
> 
> 时间：2013-03-06T16:36:23.770
> 
> 标签：c#, push-notification

我们刚刚开始为我们的网站开发适用于 Windows 8、iPhone 和 Android 的移动应用程序。我一直在寻找是否已经有 C# 的辅助类或服务器端包装器来实现所有基本功能。

我找到了这个库（WindowsPhone.Recipes.Push.Messasges），但我找不到源代码，因为所有链接似乎都被破坏了。

在我开始为这些编写我们自己的包装器之前，如果有人能指出我在 C# 中的一些公共实现的方向，我将不胜感激。

非常感谢您的帮助，我一直在疯狂搜索，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:48:38.140

您绝对应该看看[PushSharp 库](https://github.com/Redth/PushSharp)，这将对您尝试做的事情有很好的帮助。

[这是库作者的一个很好的演示](http://fr.slideshare.net/Xamarin/push-notifications-introduction-to-pushsharp-seminar)，您可以[在 GitHub 上找到一些快速入门示例](https://github.com/Redth/PushSharp#some-sample-action)。

[GitHub PushSharp Wiki](https://github.com/Redth/PushSharp/wiki)上有更深入的[Apple Push Notification Service](https://github.com/Redth/PushSharp/wiki/How-to-Configure-&-Send-Apple-Push-Notifications-using-PushSharp) (iOS) 和[Google Cloud Messaging](https://github.com/Redth/PushSharp/wiki/How-to-Configure-&-Send-GCM-Google-Cloud-Messaging-Push-Notifications-using-PushSharp) (Android)教程。

# excel - 将循环中的数据数组写入excel文件的连续列

> ID：15252961
> 
> 赞同：0
> 
> 时间：2013-03-06T16:36:34.437
> 
> 标签：excel, matlab, loops

这是我的代码的一部分。

```
a = 0;
for i = -3:3
    for j = 1:10
        a(j) = j^i;
    end
    xlswrite('out.xls', a','A1')
end 
```

在这里，我只得到文件`a`中的最后一个值`out.xlx`。但我想为文件的连续列中的`a`每次迭代填充值。有什么建议么 ？ **更新** 我想要这样的输出： -`i``Excel`

 **```
1.0000   1.0000   1.0000   1  .....
0.1250   0.2500   0.5000   1  .....
0.0370   0.1111   0.3333   1  .....
0.0156   0.0625   0.2500   1  .....
0.0080   0.0400   0.2000   1  .....
0.0046   0.0278   0.1667   1  .....
0.0029   0.0204   0.1429   1  .....
0.0020   0.0156   0.1250   1  .....
0.0014   0.0123   0.1111   1  .....
0.0010   0.0100   0.1000   1  ..... 
```

等等....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:57:14.723

您已经生成了 1D 矢量而不是 2D 矩阵。这应该有效：

```
a = 0;
for i = -3:3
    for j = 1:10
        a(j,i+4) = j^i;
    end
    xlswrite('out.xls', a',['A' num2str(i+4) ':J' num2str(i+4)])
end 
```

更好的解决方案是将所有内容矢量化：

```
[X,Y] = meshgrid(-3:3,1:10)
a = X.^Y
xlswrite('out.xls', a','A1:J7') 
```

@EitanT，@HighPerformanceMark：更改答案以反映您的评论。我想今天不是我的一天 - 编辑了 4 次 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:52:40.577

您在单元格 A1 中输入值 a。所以它只取数组的最后一个值`a`。您需要给出整个范围才能输入完整的数组。

尝试这样的事情：

```
 xlswrite('out.xls', a','A1:J1') 
```

我希望它有所帮助。**

# wpf - 向 ViewModel 添加 UnhandledException 支持

> ID：15252962
> 
> 赞同：0
> 
> 时间：2013-03-06T16:36:35.783
> 
> 标签：wpf

好的 - 所以我有一个旧版 MC++ 应用程序，它调用 WPF 视图，就像它们是对话框一样。我有一个抽象的 ViewModel 父类。有没有一种方法可以将 UnhandledException 处理添加到我的 ViewModel 中，以便在传播到 MC++ 应用程序之前可以在那里处理 ViewModel 或其子实现中引发的任何异常？

我真的没有可以使用的架构框架。到目前为止实现的所有 ViewModel 和 View 都是一次性的 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:38:50.023

您应该能够将异常处理添加到打开并将视图显示为对话框的方法（即：包装[`Window.ShowDialog()`](http://msdn.microsoft.com/en-us/library/system.windows.window.showdialog.aspx)调用）。这应该捕获从您的视图或视图模型中抛出的任何异常，因为它们都是从那时开始“启动”的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:40:04.250

如果您有权访问 a `Dispatcher`，则可以绑定到`Dispatcher.UnhandledException`事件中，否则您可以绑定到`AppDomain.UnhandledException`事件中：

```
Dispatcher.CurrentDispatcher.UnhandledException += HandleDispatcherException;
someDispatcher.UnhandledException += HandleDispatcherException;
AppDomain.CurrentDomain.UnhandledException += HandleAppDomainException; 
```

# android - NullpointerException 覆盖数组适配器中的 getview

> ID：15252965
> 
> 赞同：1
> 
> 时间：2013-03-06T16:36:37.123
> 
> 标签：android

我正在尝试像这样覆盖 getview 方法：

```
public class MyArrayAdapter extends ArrayAdapter {
private final Context context;
  private final ArrayList<DataList> values;
  private final  LayoutInflater li = LayoutInflater.from(this.getContext());

  public MyArrayAdapter(Context context, int    textViewResourceId,ArrayList<DataList> values) {
    super(context,textViewResourceId, values);
    this.context = context;
    this.values = values;
  }

  @Override
    public View getView(int position, View convertView, ViewGroup parent) {
      ViewHolder holder;

        if(convertView==null){
            convertView=li.inflate(R.layout.simplerow,parent,false);
            holder=new ViewHolder();
            holder.text=(TextView)   convertView.findViewById(R.layout.simplerow);
            convertView.setTag(holder);
        }else{
            Log.d("a","entre else");
            holder=(ViewHolder)convertView.getTag();
       }
        DataList b=values.get(1);
        String c=b.toString();
        holder.text.setText(values.get(position).toString());
        try {

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return convertView;
    }

  static class ViewHolder {
      TextView text;
    } 
```

每次我到达 `holder.text.setText(values.get(position).toString())`我都会收到`null pointer exception`错误。VALUES 是`arraylist`DataList 类型，Datalist 是我的类，它返回两个字符串。我知道 Values 不为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:37:51.087

引发 NullPointerException的原因`holder.text`是因为您使用了错误的 id：

```
convertView.findViewById(R.layout.simplerow); 
```

所以`findViewById()`返回`null`。尝试类似：

```
convertView.findViewById(R.id.textView); // I made up a name, but notice the difference? 
```

# vb.net-2010 - 如何使用 div id 在网络浏览器内调用单击

> ID：15252971
> 
> 赞同：0
> 
> 时间：2013-03-06T16:36:53.520
> 
> 标签：vb.net-2010

分区 ID：ct100_cphRoblox_CommentsPane_BlueCommentBtn 类：BlueCommentBtn

请帮忙，我只需要按下按钮即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:54:28.890

假设你想运行附加到它的 onclick 处理程序的东西，你可以；

```
Dim id As String = "ct100_cphRoblox_CommentsPane_BlueCommentBtn"     
WebBrowser1.Document.GetElementById(id).InvokeMember("click") 
```

（类似地`.InvokeMember("onmousedown")`等人）

# xml - 如何连接具有相同名称的节点的所有值

> ID：15252974
> 
> 赞同：1
> 
> 时间：2013-03-06T16:37:08.357
> 
> 标签：xml, xslt-1.0

我的输入数据如下：

```
 <Data>
    <Sup_Offer  action='add'>80000001</Sup_Offer>
    <Sup_Offer  action='add'>80000002</Sup_Offer>
    <Sup_Offer  action='add'>80000003</Sup_Offer>
    </Data> 
```

我正在使用下面的模板来检查节点 Sup_Offer 是否存在，如果存在，我需要连接这些值。

```
 <xsl:template name="getDeactivateDataCmd">
      <xsl:choose>
        <xsl:when test="boolean(Sup_Offer)">
          <xsl:for-each select="/Data/Sup_Offer" >
            <xsl:value-of select="concat(Sup_Offer,';')"/>
          </xsl:for-each>
        </xsl:when>
        <xsl:otherwise>
        </xsl:otherwise>
       </xsl:choose>
    </xsl:template> 
```

由于我是 XML/XSLT 的新手，有人可以告诉我：这行得通吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:00:33.590

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Sup_Offer">
     <xsl:value-of select="concat(.,';')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Data>
    <Sup_Offer  action='add'>80000001</Sup_Offer>
    <Sup_Offer  action='add'>80000002</Sup_Offer>
    <Sup_Offer  action='add'>80000003</Sup_Offer>
</Data> 
```

**产生想要的正确结果：**

```
80000001;80000002;80000003; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:04:51.880

让模板匹配做更多的工作可能更简单一些。以下样式表返回字符串“80000001;80000002;80000003;” 当处理您的示例输入时，当它处理包含没有任何 Sup_Offer 子项的 Data 元素的文档时为空字符串。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0">
  <xsl:output method="text"/>

  <xsl:template match="Data">
    <xsl:apply-templates select="Sup_Offer"/>
  </xsl:template>

  <xsl:template match="Sup_Offer">
    <xsl:apply-templates/>
    <xsl:text>;</xsl:text>
  </xsl:template>

</xsl:stylesheet> 
```

# css - 如何在IE9中显示大文本

> ID：15252975
> 
> 赞同：2
> 
> 时间：2013-03-06T16:37:11.283
> 
> 标签：css, text, internet-explorer-9, font-size

我只想在 Ie9 中显示大文本。我的页面中使用了很多 div 和 span。我不能为每个 div 写一个 CSS 行。

我想写一个单一的 css 来应用在整个页面上。我只想在 IE9 上应用它。

```
*{
font-size:120%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:43:55.527

我同意 Ben Lee 的观点，这是你应该用条件语句做的事情。

```
 <!--[if IE 9]>
 <style type="text/css">
  *{
   font-size:120%;
  }
   </style>
   <![endif]--> 
```

# debugging - VS 2012 使用 IIS 进行调试

> ID：15252977
> 
> 赞同：1
> 
> 时间：2013-03-06T16:37:13.377
> 
> 标签：debugging, iis, visual-studio-2012

我在 Visual Studio 中有一个包含多个不同项目的 Web 应用程序。它在本地 IIS 上运行以进行调试。我正在使用扩展“AttachTo”将调试器附加到 IIS 站点。调试适用于主项目，但是当我尝试向其他只是函数库的项目之一添加断点时，Visual Studio 表示不会命中断点，因为没有加载任何符号。

知道如何解决这个问题吗？

# gcc - 使用 GUI 在 Azure 上编译 GCC

> ID：15252978
> 
> 赞同：1
> 
> 时间：2013-03-06T16:37:13.457
> 
> 标签：gcc, azure, centos, azure-vm-role, compiler-as-a-service

作为大学项目的一部分，我们正在实施编译器即服务。为此，我们计划在 Azure 上使用虚拟机，最好是 Ubuntu 或 CentOS。问题是我们没有线索。您如何将 GCC 编译器安装到云中的 VM 上，我们如何推进 UI？如果在 UI 中输入程序，有没有一种方法可以由云上的编译器执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:23:00.970

让 GCC 进入云虚拟机就像在本地机器上一样简单。

对于 ubuntu：

```
sudo apt-get install build-essential 
```

GUI的更难。Eclipse GUI 在本地机器上可以很好地工作，但不能在云服务器上轻松使用。

实际上，这不是真的：它可以与 SSH X11 转发 ( `ssh -X <server>`) 一起正常工作，但除非您非常靠近云数据中心，否则性能会很差。

有两种解决方法：

1.  设置 VNC 服务器。

2.  设置 NX 代理服务器。

两者都有各自的优点，但我建议 VNC 设置会更容易。

# actionscript-3 - As3 3D - 墨滴在水中蔓延

> ID：15252982
> 
> 赞同：0
> 
> 时间：2013-03-06T16:37:29.543
> 
> 标签：actionscript-3, 3d, liquid, fluid

我正在研究以下问题：

假设我有一杯液体（例如水）。流体是完全透明的，我根本不需要渲染它。
然而，一滴墨滴落入玻璃杯中，并在水中扩散。整个事情应该是 3D 的，用户应该能够旋转相机并实时看到传播。

我研究了几种方法来解决这个问题，但结果发现它们中的大多数都是死胡同。Т他唯一成功的方法是使用大量粒子形成“inc spread”的骨架。传播过程的物理模拟远非完美，但可以说这不是问题。问题是渲染部分。

据我所知，我无法通过使用 Flash GPU 加速来大大加快 z-sort 过程，因为每帧将这些粒子上传到 GPU 内存非常慢？ **有人可以确认吗？**

我正在努力解决的另一件事是最终渲染。我尝试了一大堆过滤器与“后期处理”技术相结合，以在点之间创建平滑的线条和渐变，但结果很糟糕。**如果有人知道一些可以帮助我的文章，我将不胜感激。**

总的来说，如果有另一种可行的方法来解决问题，请告诉我。

提前致谢。
干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:45:27.530

您可能应该总体上查看[计算流体动力学](http://www.dgp.toronto.edu/people/stam/reality/Research/pdf/GDC03.pdf)以获得基本的了解。这应该可以轻松地在[2D](http://blog.inspirit.ru/?p=248)或[3D](http://blog.inspirit.ru/?p=373)中使用 Eugene 的 Fluid Solver 等动作脚本实现，调整流体属性以获得您所追求的外观和感觉

![inspirit.ru 流体求解器](../Images/bc4ddfde97a510915f1cd3b67387fbf6.png)

# hibernate - 如何治愈“org.hibernate.hql.internal.ast.QuerySyntaxException：子树的意外结束”？

> ID：15252986
> 
> 赞同：2
> 
> 时间：2013-03-06T16:37:46.283
> 
> 标签：hibernate, jpa, jpa-2.0, h2

我正在使用 Hibernate 4.1.0.Final、JPA 2.0、JUnit 4.8.1 和 H2 内存数据库。我有这个 JPA 查询...

```
@Override
public List<Organization> findByOrgTypesCountryAndState(final List<OrganizationType> organizationTypes,
                                                        final String countryId,
                                                        final String stateId)
{
    final CriteriaBuilder builder = entityManager.getCriteriaBuilder();
    final CriteriaQuery<Organization> criteria = builder.createQuery(Organization.class);
    final Root<Organization> org = criteria.from(Organization.class);
    criteria.select(org);
    criteria.where(builder.and(
                       org.get("organizationType").in(organizationTypes),
                       builder.equal(org.get("state").get("id"), stateId),
                       builder.equal(org.get("country").get("id"), countryId)));
    return entityManager.createQuery(criteria).getResultList();
} 
```

当 java.util.List、organizationTypes 为空时，上述查询将终止，并出现以下异常。我应该使用另一种谓词来解释这种情况吗？

```
org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected end of subtree [select generatedAlias0 from org.mainco.subco.organization.domain.Organization as generatedAlias0 where ( generatedAlias0.organizationType in () ) and ( generatedAlias0.state.id=:param0 ) and ( generatedAlias0.country.id=:param1 )]" type="java.lang.IllegalArgumentException">java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected end of subtree [select generatedAlias0 from org.mainco.subco.organization.domain.Organization as generatedAlias0 where ( generatedAlias0.organizationType in () ) and ( generatedAlias0.state.id=:param0 ) and ( generatedAlias0.country.id=:param1 )]
        at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1347)
        at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1288)
        at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:506)
        at org.hibernate.ejb.criteria.CriteriaQueryCompiler.compile(CriteriaQueryCompiler.java:220)
        at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:623)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
        at com.sun.proxy.$Proxy51.createQuery(Unknown Source)
        at org.mainco.subco.organization.repo.OrganizationDaoImpl.findByOrgTypesCountryAndState(OrganizationDaoImpl.java:   232)
        at org.mainco.subco.organization.repo.OrganizationDaoTest.testFindByOTCSEmptyOrgTypeList(OrganizationDaoTest.java:82)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
        at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
        at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
        at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 
```

# php - 比较文本框中的值

> ID：15252989
> 
> 赞同：0
> 
> 时间：2013-03-06T16:37:55.180
> 
> 标签：php, jquery, html, css

```
if (intval(($text) > 5)) {
  header("Location: http://a???.php");
} else {
  header("Location: http://a???/show.php");
} 
```

我想比较输入的 int 值`$test`是否大于 5（12345,12321,22222）。但它不起作用

```
if (intval(($text) > 5)) //compare the value entered to see if it's greater than 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:42:15.450

您需要先转换为int，然后进行比较。尝试：

```
if(intval($text) > 5) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:42:07.853

您的`if`声明中有一些额外的括号。

```
if (intval($text) > 5) // That should do it 
```

# magento - Magento 1.5 - 编辑订单和运输方式

> ID：15252990
> 
> 赞同：2
> 
> 时间：2013-03-06T16:37:59.907
> 
> 标签：magento, admin, edit, shipping

当我在 Magento 1.5 中的运输方式部分编辑订单时，会列出所有可用的运输方式。但是当我更改产品数量或添加/删除任何产品时，所有运输方式都会消失。没有运输方式，而是有一个链接：获取运输方式和费率，但是当我点击它时，什么也没发生 - 页面重新加载，仍然没有方法。我的日志中没有消息，我可以在哪里检查它有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-16T06:27:20.067

当您从 magento 管理员编辑任何订单时，magento 将取消该特定订单并生成一个具有新订单 ID 的新订单。例如，如果您的订单 ID 为**1234567**，则通过编辑此订单将生成 ID**为 1234567-1的新订单**

因此，一旦从管理员创建新订单或更新现有订单中的产品，您将获得一个名为**Click to change shipping method**的链接。因为送货方式取决于选择的产品和送货地址字段中提供的送货地址。

现在根据您列出的问题，单击链接后您没有看到任何运输方式。这可能由以下原因引起。

*   根据产品规则（数量、重量、产品价格等），您可能没有可用的运输方式。
*   您可能正在放置不需要运输详细信息的可下载产品
*   另一个可能的原因是您可能错过了送货地址字段。
*   您可能安装了任何可能应用任何限制规则的运输限制插件。
*   您的控制台中可能有任何 java 脚本错误。单击链接后停止ajax完成。（检查您的浏览器控制台窗口）

您可以通过报价对象对其进行调试。尝试获取您的报价对象，看看那里缺少什么信息。产品是否在您相应的报价对象中？有发货详情吗？

如果您在调试方面仍需要任何帮助，请告诉我，我会帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:44:34.037

在我看来，您安装了运输扩展程序？和/或订单编辑模块？运输模块和订单之间的交互充其量是不稳定的；开发人员无法预见我们网站上发生的各种互动。

我们刚刚发现了*MageWorx 扩展订单*模块。惊人而可靠。他们对销售订单网格和订单视图的超载是一个很好的集成，结合了订单编辑、自定义运费，允许在销售网格中自定义列。并且模块的价格非常公道。

以前，我们将*TinyBrick True Order Edit*与另一个模块一起用于自定义运费，但它们不能很好地结合在一起......通常与您看到的结果相同。那时的不稳定可能是 TinyBrick 尝试对订单视图进行更集中的重载。

# c# - WCF DataContracts - 如何将单个 DataContract 与复杂对象一起用于 WCF SOAP 和 REST 服务？

> ID：15252991
> 
> 赞同：2
> 
> 时间：2013-03-06T16:38:00.227
> 
> 标签：c#, wcf, rest, soap, datacontract

我有一个令人沮丧的问题，我一直在努力克服，但似乎无法弄清楚。

我在 WCF 中通过 SOAP 和 REST 端点公开了一些服务。为了避免重复的对象代码，我想在两个服务之间重用合约对象。仅供参考，我使用两个单独的接口，因为我有许多 API 调用在两个端点之间是不同的。这些服务的一个简单示例如下所示：

```
/*REST Implementation*/
[ServiceContract]
public interface ITestService
{
     [OperationContract]
     [WebInvoke]
     TestResponse Test(TestRequest request);

     [OperationContract]
     [WebGet]
     int GetTest(int testId);

}

/*SOAP Implementation*/
[ServiceContract]
public interface ITestService
{
     [OperationContract]
     [WebInvoke]
     TestResponse Test(TestRequest request);

     [OperationContract]
     [WebInvoke]
     int GetTest(GetTestRequest request);
}

[DataContract(Namespace="http://www.mysite.com/Test")]
public class TestRequest
{
     [DataMember]
     public int ID {get;set;}

     [DataMember]
     public InnerTestRequest InnerTestRequest {get;set;}
}

[DataContract(Namespace="http://www.mysite.com/Test")]
public class InnerTestRequest
{
     [DataMember]
     public int ID {get;set;}
} 
```

**问题 我遇到**的问题是我希望两个端点的合同有效负载使用相同的 XML 结构（在 SOAP 端点的 SOAP 信封内）。

例如，在 REST 端点上调用**Test(TestRequest request)**，我想发送以下 XML：

```
 <TestRequest xmlns="http://www.mysite.com/Test">
     <InnerTestRequest>
         <ID>2</ID>       
     </InnerTestRequest>
     <ID>4</ID>
</TestRequest> 
```

对于 SOAP 端点，我希望能够发送以下内容：

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <TestRequest xmlns="http://www.mysite.com/Test">
          <InnerTestRequest>
              <ID>2</ID>
          </InnerTestRequest>
          <ID>4</ID>
      </TestRequest>
  </s:Body> 
```

我还希望响应具有相同的格式和相同的合同有效负载。我尝试了多种方法来完成此操作，包括使用 [MessageContractAttribute] 和指定命名空间，以及将 BodyStyle 设置为 BodyStyle.Bare，但我仍然遇到以下两个问题：

```
1\. The http://www.mysite.com/Test namespace does not trickle down to the members of its class.
2\. SOAP requests "wrap" the contract, and it changes the structure of the XML. 
```

在不指定两个单独的 DataContract（一个用于 REST，一个用于 SOAP）的情况下完成此操作的最佳方法是什么。

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T06:33:02.077

对于第一项：您还需要`[OperationContract]`在数据合同中将命名空间定义为相同的命名空间，这样您就有了一致的命名空间故事。

对于第二个项目，您在消息合同方面处于正确的轨道。如果要删除“包装”元素，则需要使用未*包装的消息协定。*

下面的代码显示了如何实现这一点。

```
public class StackOverflow_15252991
{
    [DataContract(Name = "TestRequest", Namespace = "http://www.mysite.com/Test")]
    public class TestRequest
    {
        [DataMember(Order = 2)]
        public int ID { get; set; }

        [DataMember(Order = 1)]
        public InnerTestRequest InnerTestRequest { get; set; }
    }

    [DataContract(Name = "InnerTestRequest", Namespace = "http://www.mysite.com/Test")]
    public class InnerTestRequest
    {
        [DataMember]
        public int ID { get; set; }
    }

    [DataContract(Namespace = "http://www.mysite.com/Test", Name = "TestResponse")]
    public class TestResponse
    {
        [DataMember]
        public int ID { get; set; }
    }

    [ServiceContract(Namespace = "http://www.mysite.com/Test")]
    public interface ITestService
    {
        [OperationContract]
        [WebInvoke]
        TestResponseContract Test(TestRequestContract request);
    }
    [MessageContract(IsWrapped = false)]
    public class TestRequestContract
    {
        [MessageBodyMember]
        public TestRequest TestRequest { get; set; }
    }
    [MessageContract(IsWrapped = false)]
    public class TestResponseContract
    {
        [MessageBodyMember]
        public TestResponse TestResponse { get; set; }
    }
    public class Service : ITestService
    {
        public TestResponseContract Test(TestRequestContract request)
        {
            return new TestResponseContract { TestResponse = new TestResponse { ID = request.TestRequest.ID } };
        }
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(ITestService), new BasicHttpBinding(), "soap");
        host.AddServiceEndpoint(typeof(ITestService), new WebHttpBinding(), "rest").Behaviors.Add(new WebHttpBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        var factory = new ChannelFactory<ITestService>(new BasicHttpBinding(), new EndpointAddress(baseAddress + "/soap"));
        var proxy = factory.CreateChannel();
        var input = new TestRequestContract { TestRequest = new TestRequest { InnerTestRequest = new InnerTestRequest { ID = 2 }, ID = 4 } };
        Console.WriteLine(proxy.Test(input).TestResponse.ID);

        ((IClientChannel)proxy).Close();
        factory.Close();

        factory = new ChannelFactory<ITestService>(new WebHttpBinding(), new EndpointAddress(baseAddress + "/rest"));
        factory.Endpoint.Behaviors.Add(new WebHttpBehavior());
        proxy = factory.CreateChannel();
        Console.WriteLine(proxy.Test(input).TestResponse.ID);

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.WriteLine();
        Console.WriteLine("Now using the inputs from the OP");
        foreach (bool useSoap in new bool[] { true, false })
        {
            WebClient c = new WebClient();
            c.Headers[HttpRequestHeader.ContentType] = "text/xml";
            if (useSoap)
            {
                c.Headers["SOAPAction"] = "http://www.mysite.com/Test/ITestService/Test";
            }

            string uri = useSoap ?
                baseAddress + "/soap" :
                baseAddress + "/rest/Test";

            Console.WriteLine("Request to {0}", uri);

            string body = @"<TestRequest xmlns=""http://www.mysite.com/Test"">
                                <InnerTestRequest>
                                    <ID>2</ID>       
                                </InnerTestRequest>
                                <ID>4</ID>
                            </TestRequest>";
            if (useSoap)
            {
                body = "<s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"><s:Body>" +
                    body +
                    "</s:Body></s:Envelope>";
            }

            Console.WriteLine(c.UploadString(uri, body));
            Console.WriteLine();
        }

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# css - 将 Twitter Boostrap 元素样式合并到任何元素中

> ID：15252992
> 
> 赞同：0
> 
> 时间：2013-03-06T16:38:01.267
> 
> 标签：css, sass, less

我正在使用 Drupal，但是，我并不总是可以自由地通过更改 html 标记来添加类。我想在我的`custom.css`文件中的一个元素上应用一些 Twitter Bootstrap 样式（加载了引导 css 文件，因此样式可用）。

例如，为了更好地说明它，我想将`class="img-polaroid"`（TB 基本样式）应用于`image`我可以`div.someClass`在我的`custom css`样式表中进行接口的接口。我没有简单的方法将`img`标签更改为`class="img-polaroid someClass"`.

我想在我的`custom`样式表中完成同样的事情。换句话说，合并不是发生在 html 标记中，而是发生在 css 样式表本身中。在现有技术的情况下，我如何才能做到这一点？我们是为了让这成为可能吗？

谢谢你

ps 我知道替代方案： - 使用 JS 附加类 - 复制并将样式添加`class="img-polaroid"`到`div.someClass`{...} 但两者似乎都不是很好的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:48:56.570

您如何处理这取决于您使用的 CSS 预处理器。如果要避免修改 TB 本身或标记，则必须选择一个。

# 萨斯

```
.foo {
    @extend .bar;
} 
```

输出：

```
.bar, .foo {
    // styles
} 
```

# 较少的

```
.foo {
    .bar;
} 
```

输出：

```
.bar {
    // styles
}

.foo {
    // styles
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:41:06.260

您可以在引导样式表中找到要应用于元素的 CSS 代码部分并重写选择器或将代码复制到具有新选择器的另一个文件中，以便样式适用于两者

```
.selector-from-bootrap,
.my-new selector{
 ...
} 
```

# database - 在 Doctrine 2.0 中选择多对多 DQL

> ID：15252999
> 
> 赞同：0
> 
> 时间：2013-03-06T16:38:18.600
> 
> 标签：database, symfony, doctrine-orm, dql

我有 3 个实体 Building、Area 和 Route 与这个 many2many 关联：

建筑物 n:m 区域
建筑物 n:m 路线

区域和路线具有可见的属性。我必须提取建筑物并将其关联可见区域和路线（如果存在）

```
SELECT 
    b, bir, bia
FROM 
    ArchMapsBundle:Building b 
    LEFT JOIN 
        b.buildingsInRoute bir
    LEFT JOIN 
        bir.itinerario r WITH r.visible = 1
    LEFT JOIN 
        b.buildingsInArea bia
    LEFT JOIN 
        bia.area a WITH a.visible = 1
WHERE 
    b.id = :building_id 
```

但我总是得到不可见的区域和路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:45:37.153

我的猜测是，发生这种情况是因为您的一些`JOIN`s 没有条件地拉动实体。所以，试试这个：

```
WHERE b.id = :building_id 
  AND r.visible = 1 
  AND a.visible = 1 
```