# StackOverflow 问答 15503000-15503999

# c++ - 如何在 QWidget 子类之外调用 QMessageBox 静态 API

> ID：15503000
> 
> 赞同：5
> 
> 时间：2013-03-19T15:01:26.207
> 
> 标签：c++, qt, user-interface

我的 Qt GUI 应用程序中有一个实用程序类。但是，在我的便利课中，我想调用 a `QMessageBox::critical()`,`warning()`等。该类不是 a `QWidget`，因此我不能`this`作为父级传递。但是，我的类是 的子类`QObject`，因此它可以运行诸如信号和插槽之类的东西。所以要解决这个问题——如果可能的话——我是否应该查看属性 API 而不是使用静态 API？

类声明：

```
class NetworkManager : public QObject 
```

下面是一个失败的静态 API 调用示例：

```
QMessageBox::critical(this, tr("Network"), tr("Unable to connect to host.\n"),
QMessageBox::Ok | QMessageBox::Discard); 
```

那么，如果我要构建一个基于属性的 API 消息框，是否可以以`QObject`某种方式调用它？我并没有真正使用过基于属性的 API，但我从文档中了解到它似乎使用了事件循环（即`exec()`）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T15:17:38.597

只需传递`NULL`第一个参数：

```
QMessageBox::critical(NULL, QObject::tr("Error"), QObject::tr("...")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T16:05:17.380

比传递更好的方法`nullptr`是使用您已经在使用的 qobject 树（假设 NetworkManager 实例的父级是 QWidget；根据您的 qobject 树的样子调整父级的数量）

```
QMessageBox::critical(qobject_cast<QWidget *> (parent()), "Title", "Message"); 
```

我们使用 qobject_cast<> 而不是 C 或 C++ 风格的转换是[因为它增加了一点保护，](http://qt-project.org/doc/qt-5/qobject.html#qobject_cast)如果它不能向上转换到 QWidget * 将返回 0。

如果您使用`nullptr`将`QMessageBox`显示在最顶层窗口 (QWidget) 的中心，而不是实际出现在`NetworkManager`类的 qobject 树中较高位置的窗口。这真的让拥有多个显示器、打开大量窗口、来自单个应用程序的多个窗口跨越多个显示器等的人感到恼火。

# c# - 列出哪些索引可以双向扩展？

> ID：15503001
> 
> 赞同：4
> 
> 时间：2013-03-19T15:01:26.487
> 
> 标签：c#, list, indexing, stack

我打算写一个游戏（如果你听说过它，它被称为“Qwirkle”），其中一个二维游戏场存储玩家投入的石头的位置。第一个玩家将一块石头放在任何地方，其他玩家可以从任何一侧（左/右/顶部和底部）连接到它。游戏场本身并不局限于会破坏游戏理念的固定大小。但是，棋子的数量仅限于玩家在开始时可以定义的值。

由于游戏逻辑，我需要用索引遍历石头。但是，由于玩家可以从任何一侧添加石头，我需要一个可以扩展到任何方向的列表（例如，到负和正索引方向）。

性能并不是不重要的，因为我需要一次检查几块石头。

最好的办法是访问像 _stones[-3,5] 这样的石头来访问位置 -3、5 的石头，当然。

我认为可以从任何一侧推送和弹出的堆栈（如 PushBack / PushFront）对此很有用，但我不太确定如何在 C# 中实现这一点。

是否有像我正在考虑的那样预先实现的列表/堆栈，或者我的方法完全奇怪？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T16:31:26.210

您想要的数据结构是*不可变的四叉树*。如果棋盘*大部分是空*的，那么使用不可变四边形可以让您表示基本上无限大小的棋盘；与 32 x 32 单元板相比，1 万亿 x 1 万亿单元板仅占用几个字节的内存。不可变四叉树可以很容易地以您描述的方式进行索引，并且在给定旧四叉树和编辑的情况下计算新四叉树很简单。

这些年来，我已经多次编写了不可变四叉树算法，并且很长一段时间以来我一直想写一系列关于它们的博客文章，但我从来没有这样做过。当我这样做时，我会回来更新这个答案。

同时，这篇 Dobbs 博士关于 Gosper 算法的文章是我用来学习不可变四叉树如何工作的文章。

[http://www.drdobbs.com/jvm/an-algorithm-for-compressing-space-and-t/184406478](http://www.drdobbs.com/jvm/an-algorithm-for-compressing-space-and-t/184406478)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:11:31.403

你想要的是一个[双端队列](http://en.wikipedia.org/wiki/Double-ended_queue)（称为双端队列，发音为“deck”）。.NET BCL 中没有实现（不幸的是），但有 3rd 方实现（参见 Google）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:13:10.117

字典可能是一种选择，而不是考虑列表的索引，您可以考虑字典的整数键。不管是什么维度。

```
Dictionary<int,Dictionary<int,Stone>> stones = new Dictionary<int,Dictionary<int,Stone>>();
// do some initialisation for the base field size ...

// access it this way
Stone s = stones[-1][-5]; 
```

唯一的问题是当您想要添加一个会消耗资源的第二维（迭代所有第一维）时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T09:21:01.790

我认为您将从实现包含两个 ArrayList 的自定义数据结构中学到更多。一个前进一个后退。当然，在您的实现中，它们都将采用相同的方式，但您的实现可以让数据结构返回正索引加一的否定，这样您就不会为后向 ArrayList 中的第一个元素获得 -0 的索引.

也许我误解了这个问题，但这就是我将如何实现双向可扩展数据结构的方式。

祝你好运！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-19T15:07:54.673

您可以执行以下操作：

_stones[-(i),i] 和/或 _stones[i,-(i)]

只是一个建议。

# wcf - wcf 返回类时出错

> ID：15503005
> 
> 赞同：0
> 
> 时间：2013-03-19T15:01:41.707
> 
> 标签：wcf, class, config

我一直在努力解决这个错误：

> 接收对 ....8332/Service1.svc 的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

我追踪了错误，显然这与绑定或连接有关，我无法弄清楚如何解决。..我把课程和配置文件放在下面。请指导我。提前谢谢。

```
 [DataContract]
    public class filepack
    {
        string  filesize = "0";
        int  accesspermitid =0;
         System.IO.Stream str ;

         [DataMember]
         public System.IO.Stream Filestr
         {
             get { return str; }
             set { str = value; }
         }

        [DataMember]
        public string Filesize
        {
            get { return filesize; }
            set { filesize = value; }
        }

        [DataMember]
        public int Accesspermitid
        {
            get { return accesspermitid; }
            set { accesspermitid = value; }
        }

    }

  <configuration>
        <startup> 
            <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />

        </startup>

        <system.serviceModel>

            <behaviors>
                <endpointBehaviors>

                    <behavior name="debugbeh">
                        <dataContractSerializer />
                    </behavior>
                </endpointBehaviors>
            </behaviors>
            <bindings>
                <basicHttpBinding>
                    <binding name="BasicHttpBinding_IService1" maxBufferSize="500000000"
                        maxReceivedMessageSize="500000000">
                        <security mode="None">
                            <message algorithmSuite="Default" />
                        </security>
                    </binding>
                </basicHttpBinding>
            </bindings>
            <client>
                <endpoint address="http://localhost:8332/Service1.svc" behaviorConfiguration="debugbeh"
                    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService1"
                    contract="vcpservice.IService1" name="BasicHttpBinding_IService1" />
            </client>

        </system.serviceModel>
    </configuration>

    <?xml version="1.0"?>
    <configuration>

      <system.diagnostics>
        <trace autoflush="true" />
        <sources>
          <source name="System.ServiceModel"
                  switchValue="Information, ActivityTracing"
                  propagateActivity="true">
            <listeners>
              <add name="sdt"
                  type="System.Diagnostics.XmlWriterTraceListener"
                  initializeData="c:\\logclientHOST.svclog"  />
            </listeners>
          </source>
        </sources>
      </system.diagnostics>

      <appSettings>
        <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
      </appSettings>
      <system.web>
        <compilation debug="true" targetFramework="4.5" />
        <httpRuntime targetFramework="4.5"/>
      </system.web>
      <system.serviceModel>
        <bindings>
          <basicHttpBinding>
            <binding name="mybinding" closeTimeout="00:10:00" maxBufferPoolSize="52428800"
              maxBufferSize="500000000" maxReceivedMessageSize="500000000" />
          </basicHttpBinding>
        </bindings>
        <diagnostics>
          <messageLogging logMalformedMessages="true" logMessagesAtTransportLevel="true" />
        </diagnostics>
        <behaviors>
          <endpointBehaviors>
            <behavior name="NewBehavior0">
              <dataContractSerializer />
            </behavior>
          </endpointBehaviors>
          <serviceBehaviors>
            <behavior name="">
              <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"
                httpGetBinding="webHttpBinding" httpGetBindingConfiguration="" />
              <serviceDebug includeExceptionDetailInFaults="true" />
              <dataContractSerializer maxItemsInObjectGraph="2147483646" />
            </behavior>
          </serviceBehaviors>
        </behaviors>
        <protocolMapping>
            <add binding="basicHttpsBinding" scheme="https" />
        </protocolMapping>    
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
      </system.serviceModel>
      <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
        <!--
            To browse web app root directory during debugging, set the value below to true.
            Set to false before deployment to avoid disclosing web app folder information.
          -->
        <directoryBrowse enabled="true"/>
      </system.webServer>

    </configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:46:21.917

您无法发送流。您需要在发送之前将流具体化为一个真实的数据对象（例如字符串或字节数组），或者如果您真的想要流式传输（我怀疑），您可以阅读[this](http://msdn.microsoft.com/en-us/library/ms733742.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:14:01.990

这个问题似乎可以通过从类中删除流并单独返回来解决！但我不知道它如何帮助解决它！

# jquery - 代码 Jquery 到 IE8 中可自定义的复选框不起作用

> ID：15503010
> 
> 赞同：0
> 
> 时间：2013-03-19T15:01:55.660
> 
> 标签：jquery, internet-explorer-8

我正在使用本教程制作可自定义的复选框：http: [//kubyshkin.ru/posts/cross-browser-css3-image-free-custom-checkbox.html](http://kubyshkin.ru/posts/cross-browser-css3-image-free-custom-checkbox.html)

但是发布了 Internet Explorer 8 的 jquery 代码不起作用：

```
if ($.browser.msie && parseInt($.browser.version) < 9) {
  var inputs = $('.custom-checkbox input');
  inputs.live('change', function(){
    var ref = $(this),
        wrapper = ref.parent();
    if(ref.is(':checked')) wrapper.addClass('checked');
    else wrapper.removeClass('checked');
  });
  inputs.trigger('change');
} 
```

**控制台：未捕获的类型错误：无法读取未定义的属性“msie”**

# java - 已经通过 ldap Spring 3.0 进行身份验证后，如何获取 Active Directory 组？

> ID：15503011
> 
> 赞同：0
> 
> 时间：2013-03-19T15:01:56.367
> 
> 标签：java, active-directory, spring-security, ldap

我正在构建一些已经开发的代码，并被要求通过 ldap 进行身份验证，但现在我被要求根据 Active Directory 组设置权限。问题是我不确定如何利用我所拥有的并以此为基础。我在 Spring 方面完全没有经验，我尝试（但没有成功）使用一些教程从头开始使用 Active Directory，包括 [this][1] 并且我已经在 [here][2] 和[这里][3] 但没有成功。首先，我不能使用 spring 3.1，我们只能使用 3.0，而且我在改编上面提到的任何示例时都没有成功。

有没有办法从我已有的中获取 Active Directory 组（和其他属性）？
这是我到目前为止所做的：

**弹簧安全.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans" xmlns="http://www.springframework.org/schema/security" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">
    <http auto-config="true" use-expressions="true">
        <intercept-url pattern="/login" access="permitAll" />
        <intercept-url pattern="/loginfailed" access="permitAll" />
        <intercept-url pattern="/resources/images/**" access="permitAll" />
        <intercept-url pattern="/resources/css/**" access="permitAll" />
        <intercept-url pattern="/**" access="hasRole('CUSTOMADMIN')" />
        <form-login login-page="/login" default-target-url="/index" authentication-failure-url="/loginfailed" />
        <logout logout-success-url="/logout" />
    </http>
    <ldap-server id="ldapServer" url="ldap://url:portnumber/ou=People,dc=abc,dc=com" manager-dn="dn" manager-password="password" />
    <authentication-manager>
        <authentication-provider ref="ldapAuthProvider" />
    </authentication-manager>
    <beans:bean id="ldapAuthProvider" class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
        <beans:constructor-arg>
            <beans:bean class="org.springframework.security.ldap.authentication.BindAuthenticator">
                <beans:constructor-arg ref="ldapServer" />
                <beans:property name="userDnPatterns">
                    <beans:list>
                        <beans:value>uid={0}</beans:value>
                    </beans:list>
                </beans:property>
            </beans:bean>
        </beans:constructor-arg>
        <beans:constructor-arg>
            <beans:bean class="com.company.group.appname.ldap.RolesPopulator">
                <beans:constructor-arg ref="userRoleService" />
            </beans:bean>
        </beans:constructor-arg>            
</beans:beans> 
```

**RolesPopulator.java**

```
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.ldap.core.DirContextOperations;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.GrantedAuthorityImpl;
import org.springframework.security.ldap.userdetails.LdapAuthoritiesPopulator;

import com.company.group.appname.service.IUserRoleService;

public class RolesPopulator implements LdapAuthoritiesPopulator 
{
    private static Logger log = Logger.getLogger(RolesPopulator.class);
    @Autowired
    private IUserRoleService userRoleService;

    public RolesPopulator(IUserRoleService userRoleService)
    {
       this.userRoleService = userRoleService;
    }

    @Override
    public Collection<GrantedAuthority> getGrantedAuthorities(DirContextOperations userData, String username) 
    {
        List<GrantedAuthority> userPerms = new ArrayList<GrantedAuthority>();
        log.debug("UserPermsions: "+userPerms.toString());

        //get users permissions from service
        List<String> userRoles = userRoleService.getPermissions(username);
        for (String string : userRoles) 
        {
            userPerms.add(new GrantedAuthorityImpl(string));
        }

        return userPerms;
    }

} 
```

**UserRoleServiceImpl.java**（IUserRoleService的实现）

```
package com.company.group.appname.service.impl;

import java.util.ArrayList;
import java.util.List;

import org.apache.log4j.Logger;
import org.springframework.stereotype.Service;

import com.company.group.appname.service.IUserRoleService;

@Service("userRoleService")
public class UserRoleServiceImpl implements IUserRoleService {

    private static Logger log = Logger.getLogger(UserRoleServiceImpl.class);

    public List<String> getPermissions(String username) {

        List<String> roles = new ArrayList<String>();
        roles.add("CUSTOMADMIN");
        return roles;
    }

} 
```

这一切都很好，但我不了解如何从这里获取 Active Directory 组。我想要做的是从`getPermissions(username)`我希望能够从 Active Directory 获取与用户名关联的组列表的方法，如果它包含特定的组名，则返回角色，否则返回 null（或其他角色）。

老实说，我已经查看了很多通过 Active Directory 进行身份验证的代码示例，然后可以获取这些组，但我从来没有让它们中的任何一个工作（我发现的大多数示例都可以解决这些问题spring security 3.1，不幸的是，这不是一个选项）而且我也没有找到以这种方式接近它的示例。

任何指导或帮助都会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T20:16:38.197

如果您真的无法从 3.0 升级，为什么不将[ActiveDirectoryLdapAuthenticationProvider](https://github.com/SpringSource/spring-security/blob/master/ldap/src/main/java/org/springframework/security/ldap/authentication/ad/ActiveDirectoryLdapAuthenticationProvider.java)类从 3.1 复制到您的代码库中并使用它呢？`memberOf`它从AD 用户条目中的属性加载用户权限。

Upgrading from 3.0 to 3.1 should be relatively painless, but if you can't there's nothing to stop you using an individual class as part of your own build. Then you wouldn't need the `LdapAuthoritiesPopulator` code you've written (which isn't a very good fit for AD anyway).

# ruby-on-rails - Rails 为一个表单项分配两个属性

> ID：15503012
> 
> 赞同：0
> 
> 时间：2013-03-19T15:01:58.420
> 
> 标签：ruby-on-rails, forms

我有一个具有属性`first_team_name`和的对象`second_team_name`，以及一个具有成对`[team1, team2]`值的列表。

我希望能够拥有它，因此当我在表单中选择一个对象时，它会分配`team1`给`first_team_name`和`team2`，`second_team_name`但我不知道如何相应地拆分这些值。

无论如何要拆分我的集合的值并将它们放在我的对象的两个不同属性中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:11:13.340

您可以在模型中定义 2 个函数

```
def team_names
  return "#{first_team_name},#{second_team_name}"
end

def team_names=(values)
  self.first_team_name, self.last_team_name = values.split(',')
end 
```

警告

*   您的选择值必须像`'toto,titi'`.
*   如果团队名称可以包含逗号，请选择其他分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:06:17.283

我认为可以通过解析控制器中的参数，然后将它们分配给您想要的任何对象。不过，我不知道这是否是最佳做法。您将需要修改`update`控制器的方法。

# php - ISO-8559-1 编码在 latin1 DB 中存储了不正确的数据。几个问题

> ID：15503013
> 
> 赞同：0
> 
> 时间：2013-03-19T15:01:59.473
> 
> 标签：php, mysql, encoding, character-encoding

现在我要说可怕的“E”字。编码。我知道它已经在整个互联网上被[覆盖](http://www.varesano.net/blog/fabio/latin1%20encoded%20tables%20or%20databases%20utf8%20data%20stored%20convert%20them%20native%20mysql%20utf8%20tables) [到](http://www.bluebox.net/about/blog/2009/07/mysql_encoding/) [死](http://nicj.net/mysql-converting-an-incorrect-latin1-column-to-utf8)，但有几件事我需要澄清。

现在我有一个脚本，其字符集为 ISO-8559-1，并且它写入了一系列 latin1_swedish_ci 字段。这些字段中的数据虽然不准确，但我在字符串中得到了 ÃƒÂª 和 Ã§Ã 之类的符号。这些显然是“非标准”字符。

现在说到输出，如果我在 ISO-8859-1 中提供我的 HTML，我的内容将无法正确呈现，但是当我使用 UTF-8 时，***大部分***内容都会正确呈现。

现在的问题：

1.  我假设数据库将数据错误地存储在人眼中，因为它需要使用多个字节，这是正确的吗？

2.  为什么大多数符号在使用 UTF-8 字符集时可以正确呈现，但在使用 ISO 时却不能？

3.  为了让所有字符保存在数据库中并正确呈现，我假设我需要始终使用 UTF-8。展望未来，您是否会受到打击，或者是否可以将此类数据保存在数据库中并每次都进行转换。我们有很多很多非英语字符。

谢谢

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:13:18.230

所有排序，我已经在博客中介绍了这里采取的步骤：https: [//support.servertastic.com/converting_latin1_utf8/](https://support.servertastic.com/converting_latin1_utf8/)

# java - 使用 Open/LibreOffice 开始使用 UNO 和 Java

> ID：15503015
> 
> 赞同：8
> 
> 时间：2013-03-19T15:02:05.337
> 
> 标签：java, eclipse, openoffice.org, libreoffice, uno

我刚开始使用 LibreOffice 的 4.0.1 UNO SDK 开发一个 Java 项目，aaaand...我一开始就被卡住了。我认为如果我使用 OpenOffice.org 而不是 LibreOffice，也可以应用同样的方法，因此感谢您提供任何帮助。

我正在使用 Eclipse Juno 4.2，并创建了一个类似“Hello World”的项目。我将`/program`目录添加到类路径（添加为外部类文件夹），并在这行代码的开头

```
XComponentContext ctx = Bootstrap.bootstrap(); 
```

`UnsatisfiedLinkError`使用以下堆栈跟踪引发异常：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no jpipe in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at com.sun.star.lib.util.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:50)
    at com.sun.star.lib.connections.pipe.PipeConnection.<clinit>(PipeConnection.java:48)
    at com.sun.star.lib.connections.pipe.pipeConnector.connect(pipeConnector.java:110)
    at com.sun.star.comp.connections.Connector.connect(Connector.java:114)
    at com.sun.star.comp.urlresolver.UrlResolver$_UrlResolver.resolve(UrlResolver.java:108)
    at com.sun.star.comp.helper.Bootstrap.bootstrap(Bootstrap.java:301)
    at xx.test.unotest.UnoTest.main(UnoTest.java:16) 
```

甚至还有一个`try/catch`指令周围，但它没有被触发。

我找不到关于开始使用 UNO 的合适文档，所以我不知道出了什么问题。安装 SDK 并配置环境变量。

我错过了什么吗？

**编辑**：我使用的是 Windows 7 64 位。也许这与问题有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T10:54:52.097

`PATH`好吧，就是这样，在环境变量中列出的目录中找不到库 jpipe.dll 。我必须向其中添加路径 LibreOffice 4.0/URE/bin。

添加路径`java.library.path`将不起作用。

因此，在安装了一个*非常*烦人的 SDK 之后，它*需要*一个我不会使用的 GNU make 工具并强迫我安装 MinGW，以及一个糟糕的 zip 工具，因为来自 info-zip.org 的镜像（ api.libreoffice.org 提供的源代码都已*关闭*，我*仍然*遇到这些愚蠢和无证的问题。

一旦解决了这个问题，64 位的东西*实际上*是一个问题，因为 jpipe.dll 是一个 32 位的库，无法加载，所以我必须切换到 32 位的 JDK/JRE 才能使其工作。

男人。我可以不用一些用户友好的界面，但这只是让开发人员的生活变得不必要地困难！

这就是为什么开源软件有时很糟糕的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-23T08:42:25.180

如果您使用的是 32 位的 libreoffice，那么您需要切换 32 位但 jdk 才能工作。否则请下载最新版本的 64 位 libreoffice

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-21T10:46:11.240

尝试将 libjpipe.so 库链接到`lib`项目内的目录：

```
ln -s /usr/lib/libreoffice/program/libjpipe.so your_project/lib/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-11T06:05:52.420

对于 Ubuntu 18.04，我可以通过将**libjpipe.so**添加到此位置 file:///usr/lib/jni/libjpipe.so来解决问题

如果你安装了 libre office，你可以从 /usr/lib/libreoffice/program/libjpipe.so 获取这个文件。

这应该可以解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-20T17:29:20.257

在 MacOS 中，libpipe 库位于`/Applications/LibreOffice.app/Contents/Frameworks/libjpipe.jnilib`. 所以你需要像这样运行Java。

```
java -cp \
  '.:/Applications/LibreOffice.app/Contents/MacOS/:any-other-jars.jar' \
  -Djava.library.path=/Applications/LibreOffice.app/Contents/Frameworks \
   com.example.YourAppClass 
```

# mysql - 图/RDBMS 混合？

> ID：15503016
> 
> 赞同：0
> 
> 时间：2013-03-19T15:02:10.227
> 
> 标签：mysql, ruby-on-rails-3, neo4j

您对同时使用 Neo4j 和传统 RDBMS（如 mysql）有何想法？

我想知道在 Neo 中保持关系/连接等以及在 mysql 中保持消息/电子邮件和安全性是否是一个合理的设计。

这会提供两全其美的选择吗？Neo 会针对关系进行优化，而 mysql 会针对消息传递进行优化吗？减轻每个人的压力 - 还允许在消息和安全方面进行分片等。还允许 Neo4j 的备份窗口更小，据我所知，必须脱机才能执行此操作。

您认为这样的系统有哪些优点和缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:52:51.580

这不仅是一种完全合理的方法，而且在良好关系指南中得到充分支持和记录（如果您通过 Spring 使用 Neo4j 和 MySQL）。

[http://static.springsource.org/spring-data/data-graph/snapshot-site/reference/html/#reference:cross-store](http://static.springsource.org/spring-data/data-graph/snapshot-site/reference/html/#reference:cross-store)

它肯定会增加您的域模型的复杂性，并且您需要考虑跨存储事务处理，以防您需要对同一事务中的两个数据存储执行更新。

除了分片/水平缩放（我听说 Neo Tech 正在研究的东西）之外，如果您需要在大型表格集上运行任何迭代操作（例如像 SUM、COUNT、AVERAGE 之类的聚合），RDBMS 的性能会更好。

相关： [固定列表上的 Neo4j 性能与数据库性能](https://stackoverflow.com/questions/5680182/neo4j-performance-on-a-fixed-column-table-vs-database-performance)

# jquery - Jquery - 选择和输入框组合

> ID：15503021
> 
> 赞同：1
> 
> 时间：2013-03-19T15:02:19.487
> 
> 标签：jquery

我正在尝试做一个组合选择框和文本输入。这是我希望它工作的方式。

1.  用户看到旧值
2.  单击旧值会提供一个组合文本框并选择下拉框
3.  用户可以输入文本或选择一个选项
4.  选择哪个成为新值

我已经能够完成大部分工作，你可以在这里看到。

[http://jsfiddle.net/jfoxworth/X5BTD/](http://jsfiddle.net/jfoxworth/X5BTD/)

然而，当有人专注于输入时，他们不能在不失去对整个事物的关注和“重新开始”的情况下进入下拉框。反之亦然。我希望用户能够在两者之间来回切换而不会失去注意力。这可能吗？

我认为我遇到的问题在于本节的某个地方：

```
$(".whileloopflagvalue").live("click", function(event) {
    $(this).hide();             
    $(this).parent().find('.whileloopflagselect').show();               
    $(this).parent().find('.whileloopflaginput').show();        
});

$(".whileloopflagselect, .whileloopflaginput").live("focusout", function(event) 
{   
    $(this).parent().find('.whileloopflagselect').hide();               
    $(this).parent().find('.whileloopflaginput').hide();
    var temp=$(this).parent().find('.whileloopflaginput').attr("value");
    if (temp.length==0) { temp=1; }
    $(this).parent().find('.whileloopflagvalue').html(temp);
    $(this).parent().find('.whileloopflagvalue').show();    
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:01:37.977

这是我一段时间以来试图弄清楚的最酷的事情之一。

我首先将您的代码更改为不再使用`live`，因为它已被贬值。

我将所有事件处理程序添加到`document`文档就绪函数中；必要时委托。

然后我必须创建一个标志来判断输入是否脏。如果是并且新聚焦的元素不是 select，反之亦然，那么我允许它设置值并隐藏字段。

[这是我想出的](http://jsfiddle.net/DpteE/3/)：

```
$(document).ready(function () {
    var oldValue = $('whileloopflagvalue');

    $(document).find('.whileloopflagselect').hide();
    $(document).find('.whileloopflaginput').hide();    

    $(document).on('focusin',function(event){
        var theTarget = $(event.target);
        var theInput = theTarget.parent().find('.whileloopflaginput');
        var theSelect = theTarget.parent().find('.whileloopflagselect');

        if(theInput.length > 0){
            if(theTarget[0] == theInput[0] || theTarget[0] == theSelect[0]){
                theInput.removeAttr('data-dirty');
            }
        }

    });

    $(document).on("focusout", function (event) {   
        var theTarget = $(event.target);
        var theInput = theTarget.parent().find('.whileloopflaginput');
        var theSelect = theTarget.parent().find('.whileloopflagselect');
        setTimeout(function(){
            if (theTarget[0] == theInput[0] || theTarget[0] == theSelect[0] ) {
                if(theInput.attr('data-dirty') == 'dirty'){
                    theTarget.parent().find('.whileloopflagvalue').text(theInput.val());
                    theInput.hide();
                    theSelect.hide();
                    theTarget.parent().find('.whileloopflagvalue').show();
                    theInput.removeAttr('dirty');
                }  
            }
        }, 50);
    });

    $(document).on("click",".whileloopflagvalue", function (event) {
        oldValue = $(this).text();
        $(this).hide();
        $(this).parent().find('.whileloopflagselect').show();
        $(this).parent().find('.whileloopflaginput').show().focus();
    });

    $(document).on('change','.whileloopflagselect', function () {
        var temp = $(this).attr("id");
        $(this).parent().find(".whileloopflaginput").val($('#' + temp).find(":selected").text());
        $(this).parent().find(".whileloopflaginput").attr('data-dirty','dirty');
        $("#" + temp).val("").attr('selected', true);
    });

    $(document).on('input propertychange','.whileloopflaginput',function(){
        $(this).attr('data-dirty','dirty');
    });

}); 
```

因此，现在如果您在文本框中输入一个值或在下拉列表中选择一个值，只要您选择的下一个元素是两者之一，那么您可以在它们之间随意移动。

丢失焦点处理程序中的原因`setTimeout`是允许浏览器有时间触发`focusin`事件。如果您不这样做，则无法知道在两个控件之一丢失后哪个元素获得了焦点。

唯一奇怪的是，如果您不进行任何更改，那么它就不会隐藏。如果单击 div，则必须更改某些内容。

# r - 为什么 R 中 ksvm 的概率和响应不一致？

> ID：15503027
> 
> 赞同：12
> 
> 时间：2013-03-19T15:02:28.913
> 
> 标签：r, kernlab

我使用R 中的kernlab`ksvm`包来预测概率，使用. 但是，我发现有时使用不会产生由 给出的最高概率的类。`type="probabilities"``predict.ksvm``predict(model,observation,type="r")``predict(model,observation,type="p")`

例子：

```
> predict(model,observation,type="r")
[1] A
Levels: A B
> predict(model,observation,type="p")
        A    B
[1,] 0.21 0.79 
```

这是正确的行为还是错误？如果这是正确的行为，我如何从概率中估计最可能的类别？

* * *

尝试可重现的示例：

```
library(kernlab)
set.seed(1000)
# Generate fake data
n <- 1000
x <- rnorm(n)
p <- 1 / (1 + exp(-10*x))
y <- factor(rbinom(n, 1, p))
dat <- data.frame(x, y)
tmp <- split(dat, dat$y)
# Create unequal sizes in the groups (helps illustrate the problem)
newdat <- rbind(tmp[[1]][1:100,], tmp[[2]][1:10,])
# Fit the model using radial kernal (default)
out <- ksvm(y ~ x, data = newdat, prob.model = T)
# Create some testing points near the boundary

testdat <- data.frame(x = seq(.09, .12, .01))
# Get predictions using both methods
responsepreds <- predict(out, newdata = testdat, type = "r")
probpreds <- predict(out, testdat, type = "p")

results <- data.frame(x = testdat, 
                      response = responsepreds, 
                      P.x.0 = probpreds[,1], 
                      P.x.1 = probpreds[,2]) 
```

结果输出：

```
> results
     x response     P.x.0     P.x.1
1 0.09        0 0.7199018 0.2800982
2 0.10        0 0.6988079 0.3011921
3 0.11        1 0.6824685 0.3175315
4 0.12        1 0.6717304 0.3282696 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T16:53:10.443

如果您查看决策矩阵和投票，它们似乎更符合响应：

```
> predict(out, newdata = testdat, type = "response")
[1] 0 0 1 1
Levels: 0 1
> predict(out, newdata = testdat, type = "decision")
            [,1]
[1,] -0.07077917
[2,] -0.01762016
[3,]  0.02210974
[4,]  0.04762563
> predict(out, newdata = testdat, type = "votes")
     [,1] [,2] [,3] [,4]
[1,]    1    1    0    0
[2,]    0    0    1    1
> predict(out, newdata = testdat, type = "prob")
             0         1
[1,] 0.7198132 0.2801868
[2,] 0.6987129 0.3012871
[3,] 0.6823679 0.3176321
[4,] 0.6716249 0.3283751 
```

`kernlab`帮助页面 ( `?predict.ksvm`) 链接到[由 TF Wu、CJ Lin 和 RC Weng 撰写的通过 Pairwise Coupling 进行多类分类的概率估计](http://www.csie.ntu.edu.tw/~cjlin/papers/svmprob/svmprob.pdf)论文。

在第 7.3 节中，据说决策和概率可以不同：

> ...我们解释了为什么基于概率和基于决策值的方法的结果可以如此不同。对于某些问题，δDV 选择的参数与其他五个规则选择的参数有很大的不同。在波形中，在某些参数下，所有基于概率的方法都比 δDV 提供更高的交叉验证精度。例如，我们观察到，对于两个类别的数据，验证集的决策值在 [0.73, 0.97] 和 [0.93, 1.02] 之间；因此，验证集中的所有数据都归为一类，并且误差很高。相反，基于概率的方法通过 sigmoid 函数拟合决策值，通过在 0.95 左右的决策值处进行切割，可以更好地分离两个类别。这一观察结果揭示了基于概率的方法和基于决策值的方法之间的区别。

I'm not familiar enough with these methods to understand the issue, but maybe you do, It looks like that there is distinct methods for predicting with probabilities and some other method, and the `type=response` corresponds to different method than the one which is used for prediction probabilities.

# ruby - 将两个哈希与键和值进行比较 - Ruby

> ID：15503030
> 
> 赞同：8
> 
> 时间：2013-03-19T15:02:33.343
> 
> 标签：ruby, ruby-on-rails-3.2

我的问题与这篇文章中提出的问题相同，但针对的是 Ruby 而不是 Perl。 [比较两个哈希与键和值 - Perl](https://stackoverflow.com/questions/6978799/comparing-two-hashes-with-the-keys-and-values)

我想比较两个散列，首先看看它们是否存在于第一个散列中，是否存在于第二个散列中，如果是，则比较值并打印散列键的值，否则如果值不相等，则打印键具有不相等的价值。

我查看了许多建议，但找不到比较两个不同哈希值的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T15:14:42.483

```
h1 = {"a" => 1, "b" => 2, "c" => 3}
h2 = {"a" => 2, "b" => 2, "d" => 3}

(h1.keys & h2.keys).each {|k| puts ( h1[k] == h2[k] ? h1[k] : k ) } 
```

输出：

```
a
2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-19T16:47:05.667

要查找显示在 clients 和 events 数组中的所有人，我会收集这些值然后比较它们：

```
clients = {"address"=>"street.name.1" , "name"=>"john.doe" , "age"=>25} , {"address"=>"street.name2" , "name"=>"jane.doe" , "age"=>14} , {"address"=>"street.name.3" , "name"=>"tom.smith" , "age"=>35}
events = {"type"=>"party" , "participant"=>"lisa.cohen" , "date"=>"05.05.13"} , {"type"=>"corporate" , "participant"=>"john.doe" , "date"=>"26.05.13"} , {"type"=>"meeting" , "participant"=>"james.edwards" , "date"=>"14.05.13"}

#Get all client names
client_names = clients.collect{ |c| c['name'] }
p client_names
#=> ["john.doe", "jane.doe", "tom.smith"]

#Get all participant names
event_participants = events.collect{ |e| e['participant'] }
p event_participants
#=> ["lisa.cohen", "john.doe", "james.edwards"]

#Determine names that appear in both
names_in_both = client_names & event_participants
p names_in_both
#=> ["john.doe"] 
```

# ios - 自定义 UITableViewCell 位置

> ID：15503032
> 
> 赞同：1
> 
> 时间：2013-03-19T15:02:36.783
> 
> 标签：ios, uitableview

我正在尝试以编程方式创建一个`UIImageView`并将其放置在另一个使用 IB 定位的静态控件附近。我的代码是这样的：

```
iv.frame = CGRectMake(cell.positionedLabel.bounds.origin.x - 20, cell.positionedLabel.bounds.size.height, 26, 26); 
```

但是添加了 IB 的标签的 x 始终为 0.0。

我正在这样做`cellForRowAtIndexPath`。

有谁知道为什么还没有为这个项目设置边界？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:09:41.123

边界原点几乎总是零。唯一常见的例外是 UIScrollView ，它的子类将设置一个非零边界原点来偏移它们的内容（这就是 contentOffset 所做的）。

无论如何，使用 frame 而不是 bounds: `cell.positionedLabel.frame.origin.x`，或者更好，`CGRectGetMinX(cell.positionedLabel.frame)`因为`CGRectGetMinX`它将正确处理非标准 CGRects（如具有负宽度和高度的矩形）。

# unix - Unix awk 命令

> ID：15503035
> 
> 赞同：2
> 
> 时间：2013-03-19T15:02:38.577
> 
> 标签：unix, awk

请帮助我理解以下 awk 命令：

```
awk -v var1=$1 -v var2=$2 '$1 ~ var1 && $2 ~ var2; /^var1 var2/' $READ_FILE | awk '{print $3}' 
```

我在帖子中看到了这个命令：[awk 命令接受两个变量作为参数并返回一个值](https://stackoverflow.com/questions/1569066/awk-command-to-accept-two-variables-as-parameters-and-return-a-value?rq=1)

`$1 ~ var1 && $2 ~ var2; /^var1 var2/`上面命令中“”的目的是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:39:43.860

它应该是：

```
awk -v var1="$1" -v var2="$2" '$1 ~ var1 && $2 ~ var2; /^var1 var2/' "$READ_FILE" 
```

这意味着里面的 awk`var1`变成了 shell 变量`$1`，`var2`变成了`$2`. 在 awk 内部（在单引号内）还有`$1`and `$2`，它们表示输入文件中每一行的字段 1 和字段 2。如果第一个字段 ( `$1`) 如果与字符串 in 中的正则表达式匹配，`var1`同样 for `$2`and `var2`，则`$1 ~ var1 && $2 ~ var2`计算结果为 1 并打印输入文件的相应行。

`/^var1 var2/`表示如果一行以字符串“var1 var2”开头，则打印该行（可能意味着打印标题）...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T16:48:19.540

虽然仍在为您的链接中指定的目的工作。

编辑：正如我刚刚看到的那样，您的链接条目似乎同时已修复。

该命令实际上有点过于复杂，并且（在一定程度上）甚至不正确，正如您已经怀疑的那样。

要了解线路线`$1 ~ var1 && $2 ~ var2; /^var1 var2/`的用途，您必须首先了解两个重要事实。

*   如果没有给出命令但模式匹配`awk`将打印匹配的整行，即使没有明确的打印语句
*   如果从命令行给出多个模式，则必须用`;`

要测试的机器人参数通过`-v`开关传入，一个获取 awk 变量`var1`，另一个获取 awk 变量`var2`

`$1 ~ var1 && $2 ~ var2`将测试第一个字段是否与存储在*var1*中的正则表达式（这里是相关运算符）匹配（这就是`&&`运算符的用途`~`）和第二个字段是否与存储在 var2 中的正则表达式匹配。

第二个陈述`/^var1 var2/`是多余的，也是不正确的。因为这将匹配以**文字**“var1”开头的行，后跟**文字**字符串 var2。

在给出的示例中它不会造成太大的伤害，因为它不会以任何方式匹配，但它仍然不正确。

使用正则表达式匹配运算符`~`而不是使用相等性测试`==`是建议的解决方案添加的另一个“不清晰”。

我的建议是只使用：

```
awk -v var1="$1" -v var2="$2" '$1==var1 && $2==var2 {print $3}' your-file-here 
```

甚至不遗余力地打开另一个管道，只是为了打印存储在字段号 3 中的值。

# jquery - jQuery Accordion 中面板之间的间隔

> ID：15503038
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:02:43.820
> 
> 标签：jquery, jquery-ui-accordion

我有一个小要求，我一直没有...

使用 jQuery Accordion（版本 1.10.2）

有没有办法在手风琴的各个部分之间放置一个垫片？

基本上所有者想要的是手风琴的默认功能，但他们希望在垂直部分之间有一些空间。

这可以实现吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:11:29.983

您可以为手风琴部分添加上边距，除了第一个像这样

```
 #accordion > h3 {
    margin-top: 50px;
  }

  #accordion > h3:first-child {
      margin-top: 0;
  } 
```

在 jquery ui docs 上使用 html 结构[更新示例](http://jsbin.com/uxefup/3/edit)

# regex - Splunk Regex 用于过滤主机名

> ID：15503042
> 
> 赞同：0
> 
> 时间：2013-03-19T15:03:22.697
> 
> 标签：regex, splunk

我对 splunk 还很陌生。我们有三个 hbase 集群，所有这些集群都有多个 zookeeper 节点和区域服务器，就像我在下面提到的那样。

**集群 1**

```
test101.blah.com
test102.blah.com
..
test199.blah.com 
```

**集群 2**

```
test201.blah.com
test202.blah.com
..
test299.blah.com 
```

**集群 3**

```
test301.blah.com
..
test399.blah.com 
```

我正在尝试过滤以特定集群为中心的日志。所以我使用生成器来创建像这样的过滤语句`host="test101.blah.com" or host=test102.blah.com"..or host="test199.blah.com"`，并为其他集群构建相同的查询。

我知道它效率低下。有没有一种有效的方法通过正则表达式或通过 splunk 的模式匹配来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:51:03.577

我找到了一个更简单的替代方法来解决这个问题而无需正则表达式，但直接使用 splunk 功能，我对三个集群的规则最终是这样的。

```
host>="test101*" AND host<="test199*" 
host>="test201*" AND host<="test299*"
host>="test301*" AND host<="test399*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:01:36.527

按集群搜索示例主机名的最简单答案是： 对于 Cluster1：`host="test1*"` 对于 Cluster2：`host="test2*"` 对于 Cluster3：`host="test3*"`

如果您在大型数据集上执行大量此类操作，您可能需要测试比较的效率。

您可能希望能够通过集群执行进一步的操作，例如统计数据或时间表，因此我建议您使用 eval、rex、props.conf 中的字段提取或创建自定义字段来为“集群”创建一个新字段在索引时间进行最快的搜索。

例如，对于“rex”，这会从您的基本搜索中获取事件并在“host”字段中查找“test”模式，然后将以下数字捕获到名为“cluster”的字段中：

```
 | rex field=host "(?i)test(?P<cluster>[\\d])" 
```

所以现在您可以按集群显示统计信息：

```
 | rex field=host "(?i)test(?P<cluster>[\\d])" | stats count by cluster 
```

# ruby-on-rails - tag_list 未显示在表单中（rails）

> ID：15503045
> 
> 赞同：1
> 
> 时间：2013-03-19T15:03:29.197
> 
> 标签：ruby-on-rails, ruby, forms

我一直在学习本教程：[http ://tutorials.jumpstartlab.com/projects/blogger.html](http://tutorials.jumpstartlab.com/projects/blogger.html)

起床到 I3 - 标记

这是我收到的错误：

```
undefined method `tag_list' for #<Article:0x007f87bceb23a0> 
```

这是导致错误的我的表单的一部分：

```
<p>
    <%= f.label :tag_list %><br />
    <%= f.text_field :tag_list %>
</p> 
```

这是我的文章.rb

```
class Article < ActiveRecord::Base
  attr_accessible :title, :body, :tag_list, :image
  has_many :comments
  has_many :taggings
  has_many :tags, through: :taggings
  has_attached_file :image

  def tag_list=(tags_string)
    self.taggings.destroy_all

    tag_names = tags_string.split(",").collect{|s| s.strip.downcase}.uniq

    tag_names.each do |tag_name|
      tag = Tag.find_or_create_by_name(tag_name)
      tagging = self.taggings.new
      tagging.tag_id = tag.id
    end
  end
end 
```

我的猜测是它不喜欢`def tag_list=(tags_string)` ，但这就是教程中的编写方式。如果您需要更多信息，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:13:34.137

根据您使用的教程，`tag_list`不是模型字段，而是您应该添加到模型的方法：

```
def tag_list
  self.tags.map(&:name).join(', ')
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:13:01.267

这很正常： tag_list 不是您模型的列，并且`tag_list`方法不存在。你必须定义

```
def tag_list
  self.taggings
end 
```

或者

```
def tag_list
  self.taggings.map(&:name)
end 
```

或类似的东西。

# .htaccess - 通过 magento 中的 htaccess 永久重定向

> ID：15503046
> 
> 赞同：0
> 
> 时间：2013-03-19T15:03:29.503
> 
> 标签：.htaccess, magento, redirect

如何在 magento 中使用 htaccess 进行重定向，我需要将旧 url 链接重定向到新文章 cms 页面我试图将重定向链接放在根 htaccess 但不做任何事情

```
 Options +FollowSymLinks
 RewriteEngine on
 Redirect 301 https://www.website.com/articles?article=153 https://www.website.com/history-of-starbucks 
 RewriteBase / 
```

请，任何帮助将不胜感激

先感谢您。杰鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:10:41.263

尝试这样的事情，而不是您问题中的规则集：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}    !/history-of-starbucks      [NC]
RewriteCond %{QUERY_STRING}   ^article=153/?              [NC]
RewriteRule ^articles     /history-of-starbucks?  [R=301,NC,L] 
```

# c++ - Qt/C++项目VS2010 svn-commit&update .sln

> ID：15503056
> 
> 赞同：1
> 
> 时间：2013-03-19T15:03:47.153
> 
> 标签：c++, visual-studio-2010, qt, svn, solution

在 C++ VS2010 项目中使用 Tortoise-svn。我想知道在哪些情况下您要提交 .sln 文件。

我看到提交 .sln 文件的一些原因：

*   一些项目已添加到解决方案中
*   依赖项被修改

提交 .sln 的其他原因是什么？.sln 将如何合并？

另外，谁在生成 .sln 文件？它是在每个 qmake_all (或 make_all) 生成的吗？

***编辑***

我正在使用 Tortoise SVN GUI。它应该告诉我 .sln 何时被我更改。

现在，.sln 在哪些情况下发生了变化？

还有：.sln 是如何合并的？

更务实的是，在哪种情况下，当我刚刚更新时，我应该接受我的还是接受他们的 .sln ？

***编辑***

.sln 何时/如何从 .pro 文件生成？

***编辑***

为了使我的部分问题更清楚：

***用乌龟 svn 更新后，如果 .sln 有冲突，我应该***

*   **接受我**的（因为无论如何 .sln 将在我 qmakeall 时从 .pro 文件重新生成）或
*   **接受他们的**（因为我的 .sln 不再是最新的）
*   还是**不重要**？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T06:09:16.547

至于我你不需要存储 sln 文件，因为 sln 文件是从你的 pro 文件派生的（换句话说 sln 是从 pro 文件生成的），所以考虑只存储主项目定义文件（这是一个 pro 文件）并省略生成的工件。主要原因是当你决定改变开发环境（例如可以是mingw）时，你可以在pro文件的那一刻完成，并花费大量时间来转换sln文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:17:09.097

通常任何像 TutoiseSVN 这样的 svn GUI 都会检测到解决方案文件中的任何更改，并会警告您提交 .sln 文件，但是如果您不使用这样的 GUI，那么您可以通过打开带有文本的 .sln 文件来找到相关的解决方案参数像 Notepad++ 这样的编辑器，你可以看到关于你的项目的所有变量

# jquery - jquery 委托在 kendo ui mobile 中不起作用！？

> ID：15503059
> 
> 赞同：2
> 
> 时间：2013-03-19T15:03:50.307
> 
> 标签：jquery, mobile, kendo-ui

我正在尝试在 Kendo UI 移动中为我未来的项目做演示应用程序。目前，我正在使用可在[http://khambuzz.cu.cc/kendoui/test.html](http://khambuzz.cu.cc/kendoui/test.html)找到的用于测试应用程序的 kendo ui mobile 试用版。这是我的代码。

```
 <!DOCTYPE html><!--HTML5 doctype-->
            <html>
            <head>
            <title>Mialisto</title>
            <meta http-equiv="Content-type" content="text/html; charset=utf-8"> 
            <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
            <meta name="apple-mobile-web-app-capable" content="yes" />

            <link rel="shortcut icon" href="assets/images/favicon.ico">
            <link rel="stylesheet" type="text/css" href="assets/css/kendo/kendo.mobile.all.min.css" />

            <!-- the line below is required for access to the appMobi JS library -->

            <script type="text/javascript" src="assets/js/lib/jquery.min.js"></script>  
            <script src="assets/js/lib/console.js"></script>
            <script type="text/javascript" src="assets/js/lib/kendo.mobile.min.js"></script>    

            <style>
                li{
                    cursor: pointer;
                }
            </style>

            </head>
            <body>

                <!-- basket template -->
               <div data-role="view" data-layout="default" id="autobox">

                </div>

                    <section data-role="layout" data-id="default">
                        <header data-role="header">
                            <div data-role="navbar">MIALISTO</div>
                        </header>
                        <!--View content will render here-->
                        <footer data-role="footer">

                        </footer>
                    </section>

            <script>
            $(document).ready(function(){
                $('#autobox').append('<div class="mini-autobox"></div>');
                $('.mini-autobox').append("<ul  ><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li><li>hello</li></ul>"); 
                $('ul').kendoMobileListView();
                window.g = $('.mini-autobox').delegate('li', 'click', function(){
                    alert("say hello to everyone!!!");
                });
            });

            </script>

                <script>
            /* This sample function records an event ID, as well as an optional
            set of name/value pairs as a query string to the statMobi Analytics
            logs.*/
            function addAnalyticsDataPoint(eventID,queryString)
            {
               try
               {
                   if (queryString==null) { queryString = ""; }
                   AppMobi.analytics.logPageEvent("/application/" + eventID +
            ".event", queryString, "", "", 0, "index.html");
               }
               catch(e) {}
            }
            /* Drop this javascript function into the <head> element of your
            application's index.html page and call it everywhere you want to
            record an analytics event. It takes two parameters. The first is an
            event identifier string and the second is an optional key/value query
            string parameter. */
            </script>

                    <script type="text/javascript">

                         var app = new kendo.mobile.Application($(document.body), 
                            {

                                transition:'slide'

                            });

                    </script> 

            </body>
            </html> 
```

现在的问题是我在这个测试中使用了 jquery 委托，它在桌面浏览器中运行良好，但在移动设备或平板电脑上不起作用。我不确定出了什么问题。桌面浏览器控制台没有错误。但它仍然不适用于移动设备。仅当移除 kendoUI 脚本时，它才能在桌面和移动设备上运行。是与试用版和付费版有关，还是我的代码中有任何错误。请从桌面和移动浏览器查看上面的链接，您会发现问题。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:49:06.353

好吧解决了...

因此，在页面加载时，您需要使用该`on()`方法将事件附加到所需元素。在这一点上，我不完全确定为什么需要这样做，可能与 kendoui 移动功能如何使用 javascript 和 jquery （调用顺序等）有关。

无论如何，例如：

我所做的是将`touchstart mousedown`事件附加到所需的元素（“.eventBtn”），然后您可以从那里放入所需的 jquery。

```
$(document).ready(function() { 
   $('.eventBtn').on('touchstart mousedown', function(){
      //desired jQuery for example:
              $('desiredElement').slideDown('slow');
   });
}); 
```

进一步阅读：
[用于“on()”方法的 jquery api](http://api.jquery.com/on/)
[剑道 ui 论坛帖子，帮助我澄清了一些事情](http://www.kendoui.com/forums/mobile/general-discussions/binding-to-widget-events.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:17:51.130

这将允许您在 Kendo UI Mobile 中绑定委托的点击事件

```
$(document)
    .on('touchstart', function(e){
        var touches = e.originalEvent.changedTouches;        //touches and changedTouches seem to be the same for touchstart
        var element = $(e.target);

        //if there's only one touch
        if(touches.length == 1){
            element.data({
                _clicking: true,
                _touch: {
                    pageX: touches[0].pageX,
                    pageY: touches[0].pageY
                }
            });
        }else{
            element.removeData(['_clicking', '_touch']);
        }
    })
    .on('touchend', function(e){
        var element = $(e.target);

        if(element.data('_clicking')){
            var touches = e.originalEvent.changedTouches;        //only changedTouches exist for touchend
            var start_touch = element.data('_touch');

            //if there's only one touch and it has not moved
            if(touches.length == 1 && (start_touch.pageX == touches[0].pageX && start_touch.pageY == touches[0].pageY)){
                element.trigger('kendoclick');
            }

            element.removeData(['_clicking', '_touch']);
        }
    }); 
```

然后不要使用“点击”，而是使用“kendoclick”：

```
$(document).on('kendoclick', 'div', function(){
    console.log('clicked');
}); 
```

我们必须使用自定义点击事件，因为使用点击会导致问题（比如点击提交按钮会调用提交函数两次）

# jenkins - 如何将 Jenkins 散热器视图配置为自动刷新？

> ID：15503060
> 
> 赞同：0
> 
> 时间：2013-03-19T15:03:56.513
> 
> 标签：jenkins, jenkins-plugins

[Radiator View Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Radiator+View+Plugin)对于在公共监视器中监控 CI 结果非常有用。

在配置时，没有自动刷新和刷新时间的参数，而且启用后，它显示在整个浏览器中，没有菜单或按钮可用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:24:25.760

实际上它与詹金斯的“启用自动刷新”按钮有关，所以

1.  在进入此页面之前，“启用自动刷新”以使其为您的浏览器自动刷新
2.  您可以在此视图中直接添加 ?auto_refresh=true

# c# - 带有代理凭据的 C# HttpWebRequest 未将凭据传递给代理服务器

> ID：15503061
> 
> 赞同：3
> 
> 时间：2013-03-19T15:03:56.607
> 
> 标签：c#, proxy, httpwebrequest, defaultnetworkcredentials

我目前正在关注与此类似的内容：

```
 HttpWebRequest myWebRequest = (HttpWebRequest) WebRequest.Create("http://www.microsoft.com");
IWebProxy proxy = myWebRequest.Proxy;
Uri newUri = new Uri(proxyAddress);
myProxy.Address = newUri;
... (setting of username/password for proxy)
myProxy.Credentials = new NetworkCredential(username, password);
 myWebRequest.Proxy = myProxy;

HttpWebResponse myWebResponse = (HttpWebResponse) myWebRequest.GetResponse(); 
```

我正在从 IIS 7.5 托管应用程序运行代码，该应用程序需要在进程继续之前验证 URL 是否可联系。由于该服务不应访问外部世界，因此我需要使用具有我们 IT 部门提供给我的凭据的特定代理服务器。

不幸的是，无论我尝试什么（app.config 中的 system.net/default 代理，使用关联的模块类来创建 url 和凭据，或类似上面的东西）），代理服务器都不会将这些凭据传递给它.

有什么我可能错过的吗？我尝试在调试模式下从 VS2010 Web 应用程序运行此应用程序，该应用程序使用默认应用程序池标识从 IIS 运行。在我们的 QA 环境中的服务器上也是如此，没有任何变化——它要么根本不使用代理，要么只是不发送凭据。

我也尝试过将`PreAuthenticate = true`两者都设置`UseDefaultCredentials`为`true`AND k，但没有任何变化。

关于我所缺少的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:48:58.423

编辑：对不起，起初误解了你的问题 - 更正答案如下：

我会尝试创建一个新的 WebProxy 对象，设置其凭据，然后将其设置为您的请求的代理（而不是从请求中获取现有的代理对象并对其进行修改）：

```
HttpWebRequest myWebRequest =
    (HttpWebRequest) WebRequest.Create("http://www.microsoft.com");
IWebProxy proxy = new WebProxy(proxyAddress);
string proxyUsername = @"foo";
string proxyPassword = @"bar";
proxy.Credentials = new NetworkCredential(proxyUsername, proxyPassword);
myWebRequest.Proxy = proxy; 
```

# iphone - 如何获取 AVPlayer 的中断开始/结束事件

> ID：15503065
> 
> 赞同：5
> 
> 时间：2013-03-19T15:04:07.600
> 
> 标签：iphone, avplayer, avaudiosession, interruption

我正在播放音频文件`AVPlayer`。我实施了`AVAudioSessionInterruptionNotification`.

```
 AVAudioSession *session = [AVAudioSession sharedInstance];
    NSError *errorInAudio   = nil;
    [session setActive:YES error:&errorInAudio];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(interruption:) name:AVAudioSessionInterruptionNotification object:nil];

    [session setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

当应用程序处于前台（如语音控制）时出现中断时，它可以正常工作。
但我在后台模式下制作了应用程序并打开了 iPod 播放器并开始播放。当时并没有调用它的中断，即使我的应用程序进入前台也是如此。
可能是什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:30:36.337

如果你使用`AVAudioPlayer`你可以遵循，`AVAudioPlayerDelegate`那么你可以实现类似的方法`- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag`

[文档](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerDelegateProtocolReference/Reference/Reference.html)中列出的更多方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T13:10:58.060

要`AVPlayer`在后台中断时收到通知，您可以收听 AudioSession 的通知

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerStopped) name:AVAudioSessionInterruptionNotification object:nil]; 
```

# android - 应用内购买退款

> ID：15503066
> 
> 赞同：4
> 
> 时间：2013-03-19T15:04:09.100
> 
> 标签：android, in-app-purchase, in-app-billing

我寻找了有关此的其他问题，但有些事情对我来说不是很清楚。所以我在问我自己的问题：

目前，如果用户购买了商品，我的应用程序将存储 SharedPreference。每次用户导航到商店页面时，都会启动 InAppBilling 服务并检查库存中的物品。我所有的物品都不是消耗品。

现在，如果用户要求，我希望能够退款。

1) 我在我的 Google Checkout 帐户中订购退款

2) 用户收到 PurchaseStateChanged 的​​ IN_APP_NOTIFY

**如果我的应用程序没有运行会怎样？我不会收到此消息并且无法处理它？**

这些购买改变了应用程序的工作方式，并且当购买被退款时，我想拒绝访问这些功能。

**退款的物品是否从库存中移除？**

因此，如果项目不再在用户的库存中，那么每次应用启动时检查库存并删除 SharedPreferecens 中的属性是一个好主意吗？

**如果我可以通过检查库存来处理这些退款，我是否需要处理 PurchaseStateChanged ？**

# web-services - weblogic 的 TransformerFactoryImpl 的 @SchemaValidation 问题

> ID：15503070
> 
> 赞同：2
> 
> 时间：2013-03-19T15:04:26.953
> 
> 标签：web-services, jakarta-ee, xsd, weblogic11g

我一直对 @SchemaValidation 与 weblogic 的 TransformerFactoryImpl 的结合问题感到困扰。我已经编写了一些 JAX-WS Web 服务，我需要通过添加 @SchemaValidation 来验证消息。但问题出在我的应用程序中，我已经完成了一些特定于转换的工作，我必须使用 weblogic.apache.xalan.processor.TransformerFactoryImpl 工厂，否则我的转换会失败。一旦我添加系统属性来指定我的变压器工厂，我的部署就会因为 @SchemaValidation 注释而开始失败。它开始给出如下错误：

org.xml.sax.SAXParseException:s4s-att-not-allowed: 属性 'xmlns:tns' 不能出现在元素 'schema' 中

如果我删除 @SchemaValidation 注释，一切正常。谁能帮助我，这已成为一个主要问题，我在网上找不到太多帮助。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:07:17.007

根据以下错误，您给出的问题可能与 TransformerFactoryImpl 无关，而是在您的 WSDL 中。您可以尝试从架构元素中删除 xmlns:tns 的命名空间声明吗？以便它使用在全局级别声明的名称空间，即在定义标签中声明的名称空间。

# jface - JFace 库独立下载（不是从 Eclipse 插件中挑选的）

> ID：15503073
> 
> 赞同：3
> 
> 时间：2013-03-19T15:04:38.107
> 
> 标签：jface

我想使用所有 JFace 功能，但在我的项目中只包含非常少的 external `jar`s。

是否可以下载`.jar`构建 SWT/JFace 应用程序所需的典型文件，而无需先下载 Eclipse，然后从`plugins`目录中选择正确的文件？

例如这些文件..

*   org.eclipse.core.commands_.jar
*   org.eclipse.equinox.common_.jar
*   org.eclipse.jface_.jar
*   org.eclipse.osgi_.jar
*   org.eclipse.ui.workbench_.jar
*   ...

甚至可以将类映射到`jar`文件并下载所述文件的链接吗？

注意：我正在寻找“官方库文件下载页面”（有点像这个 SWT 页面：http: [//download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/#SWT](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/#SWT) )，而不是“查找服务”，例如：[http ://www.jarfinder.com](http://www.jarfinder.com)

这是我从`eclipse-SDK-4.2.2-macosx-cocoa-x86_64`文件夹中挑选出来的，但感觉就像是**反复试验**：

*   org.eclipse.core.commands_3.6.2.v20130123-162658.jar
*   org.eclipse.core.commands.source_3.6.2.v20130123-162658.jar
*   org.eclipse.equinox.common_3.6.100.v20120522-1841.jar
*   org.eclipse.equinox.common.source_3.6.100.v20120522-1841.jar
*   org.eclipse.jface_3.8.102.v20130123-162658.jar
*   org.eclipse.jface.databinding_1.6.0.v20120912-132807.jar
*   org.eclipse.jface.databinding.source_1.6.0.v20120912-132807.jar
*   org.eclipse.jface.source_3.8.102.v20130123-162658.jar
*   org.eclipse.jface.text_3.8.2.v20121126-164145.jar
*   org.eclipse.jface.text.source_3.8.2.v20121126-164145.jar
*   org.eclipse.osgi_3.8.2.v20130124-134944.jar
*   org.eclipse.osgi.services_3.3.100.v20120522-1822.jar
*   org.eclipse.osgi.services.source_3.3.100.v20120522-1822.jar
*   org.eclipse.osgi.source_3.8.2.v20130124-134944.jar
*   org.eclipse.osgi.util_3.2.300.v20120913-144807.jar
*   org.eclipse.osgi.util.source_3.2.300.v20120913-144807.jar
*   org.eclipse.ui.workbench_3.104.0.v20130204-164612.jar
*   org.eclipse.ui.workbench.source_3.104.0.v20130204-164612.jar
*   org.eclipse.ui.workbench.texteditor_3.8.0.v20120523-1310.jar
*   org.eclipse.ui.workbench.texteditor.source_3.8.0.v20120523-1310.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T01:25:06.573

您可以选择 Eclipse RCP SDK，也可以选择整个 Eclipse SDK（例如，JFace Text 仅在后者中可用）。您必须从插件目录中挖掘所需的 jar 和源代码。

JFace 在这些发行版中可用。由于某些深不可测的原因，它不能作为独立下载提供。

# java - 从父级调用子级函数

> ID：15503078
> 
> 赞同：0
> 
> 时间：2013-03-19T15:04:42.720
> 
> 标签：java, function, parent, children

我是 Java 的新手，已经编写了一段时间的 C++ 和 OOP 以及对我来说令人兴奋的新冒险。

我试图搜索这个问题，但我无法将答案转移到我的个人问题中，所以这里是：

**循环.java**

```
public class Loop {
public int x;
public int y;
public int size;

public static void main(String [] args){
    new Loop(4, 4 ,2 );
}
private boolean game;

//---------------------------------------- constructor
public Loop(){
    }
public Loop(int height, int width, int cell_size){
    x = width;
    y = height;
    size = cell_size;
    System.out.println("Loop()");
    game = true;
    new Build_Cells(y,x);
    //run();
}
}; 
```

**Build_Cells.java**

```
import java.util.*;

public class Build_Cells extends Loop {
private List<List<Cell>> map = new ArrayList<List<Cell>>();
public int col;
public int rows;
public void printMap(){
    System.out.println("PrintMap()");
    for( int i = 0; i < map.size() /** col */; i++){
        for( int u = 0; u < map.get(i).size() /** rows */ ;u++){
            System.out.print(map.get(i).get(u).getState());
        }
        System.out.println();
    }
}
public Cell getCell(int a, int b){
    return map.get(a).get(b);
}
//---------------------------------------- constructor
public Build_Cells(){
}
public Build_Cells( int by, int bx){
    System.out.println("Build_Cells()");
    col = by;
    rows = bx;
    for( int i = 0; i < col ; i++){
        List<Cell> colObj = new ArrayList<Cell>(rows);
        map.add(y, colObj);
        for(int u = 0; u < rows; u++){
            colObj.add( new Cell() );
        }
    }
    printMap();
}
}; 
```

**单元格.java**

```
public class Cell extends Build_Cells {
private int state;
private int nemesis;
private int next;
private int getNem(int cs){
    int cata;
    if(cs == 1)
        cata = 0;
    else if(cs == (0 | 2 | 3) )
        cata = 1;
    else
        cata = 6;
    return cata;
}

//---------------------------------------- constructor
public Cell(){
    System.out.println("Cell()");
    set_state(5);
}
public void set_state(int input){
    state = input;
    nemesis = getNem(state);
}
public int getState(){
    return state;
}
}; 
```

如何使`Build_Cells`'s`getCell()`功能和`Cell`'s`getState()`和`setState()`功能可供使用`Loop`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:32:04.683

您已经创建了 of 的实例，`Build_Cell`但没有存储对它的引用。如果你改变：

```
new Build_Cells(y,x); 
```

至

```
Build_Cells buildCells = new Build_Cells(y,x); 
```

您将可以`buildCells.getCell()`从拨打电话`Loop`。您可以通过调用获取单元格的状态，也可以通过调用`buildCells.getCell().getState()`设置其状态`buildCells.getCell().setState()`。

此外，`Cell`可能不应该扩展，`Build_Cells`因为它不使用它的任何功能。[您可以在此处](http://docs.oracle.com/javase/tutorial/java/concepts/index.html)阅读有关 Java 中 OOP 的更多信息。

# json - JPA 关系导致我的 JSon 对象太大：JSon 可以忽略某些 JPA 属性吗？

> ID：15503081
> 
> 赞同：1
> 
> 时间：2013-03-19T15:04:48.490
> 
> 标签：json, hibernate, jpa, spring-mvc

我有一个 JPA 实体，如下所示：

```
@Entity
@DynamicUpdate
public class Message {

    @NotNull
    @ManyToOne(fetch = FetchType.LAZY)
    private Member sender;

    @NotNull
    @ManyToOne(fetch = FetchType.LAZY)
    private Member recipient;

    @NotNull
    @Temporal(TemporalType.TIMESTAMP)
    @DateTimeFormat(pattern = "dd/MM/yyyy HH:mm:ss")
    private Date sendDate;

    private boolean messageRead;

    @NotNull
    @Size(min = 5, max = 500)
    @Column(length = 500)
    private String message;

    //Getter/Setters omitted

} 
```

从 Spring MVC 控制器，我向浏览器返回一个 JSon 数组/集合，如下所示：

```
List<Message> 
```

我遇到的问题是 Message 的每个实例都有一个`Member sender`属性和一个`Member recipient`属性，而 Member 类本身有很多关系：集合等。

浏览器最终被一个巨大的对象/关系的 JSon 图堵塞。

**我想做的就是忽略 JSon 中的`sender`and`recipient`属性（无论如何，这些属性都是在 java 层中设置的）。那可能吗？**

**如果那不可能，为了避免我上面描述的问题，推荐的做法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:43:13.560

您是否尝试过使用 @JsonIgnoreProperties 注释类？

```
@JsonIgnoreProperties({"sender", "recipient"})
public class Message { 
```

# jquery - jQuery - 无法计算页面加载时的元素宽度？

> ID：15503083
> 
> 赞同：2
> 
> 时间：2013-03-19T15:04:50.467
> 
> 标签：jquery, css, resize, window-resize, window-load

我正在我的个人网站上的活动导航指示器箭头上做一些工作：http: [//staging.rjlacount.com](http://staging.rjlacount.com)

**问题**：导航指示箭头在页面加载时不会在活动项目下方居中，但会在窗口调整大小时居中。

我用来使箭头居中的代码（从[http://staging.rjlacount.com/js/functions.js](http://staging.rjlacount.com/js/functions.js)的第 80 行开始）如下：

```
var $arrowOffset = 8;

var navArrowCenter = function() {
  var $current_page_item = $(".current_page_item a");
  $arrow
    .css("left", $current_page_item.position().left + ( ($current_page_item.width() / 2) - $arrowOffset) );
};

$wind.resize(function() {
    navArrowCenter();
});

$wind.load(function() {
    navArrowCenter();
}); 
```

我已经尝试删除加载功能时的页面淡入淡出，假设它导致 jQuery 无法正确呈现元素宽度，但这似乎根本不会影响问题。

任何正确方向的观点都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:09:32.877

您是否尝试将其从 中删除`$(window).load()`？

试试这个：

```
 navArrowCenter(); 
```

代替：

```
$wind.load(function() {
    navArrowCenter();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:09:15.203

我猜这是因为 DOM 还没有准备好。在文档上尝试，`ready`而不是`load`：

```
$(document).ready(function(){
    navArrowCenter();
}); 
```

顺便说一句，如果这是一个[JQuery 加载](http://api.jquery.com/load/)（看起来是这样），那么这是完全不同的 - 它用于从另一个页面加载 html。

* * *

`document ready`查看您的代码后，无论如何您已经拥有了全部内容。因此，正如@Blowsie 所说，只需调用该函数而不将其包装在您的`$wind.load`

# php - 如何让登录用户在帖子中只点赞一次？

> ID：15503084
> 
> 赞同：0
> 
> 时间：2013-03-19T15:04:51.217
> 
> 标签：php, sql

我博客中的每篇文章都有一个赞按钮，我想让登录用户只赞一次帖子...

我的数据库中有这三个表：

桌子`tbladminXshouts`

```
CREATE TABLE `tbladminXshouts` (
  `admin_id` int(20) NOT NULL,
  `id` int(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

桌子`tbladmin`

```
CREATE TABLE `tbladmin` (
  `admin_id` int(11) NOT NULL AUTO_INCREMENT,
  `admin_usr_name` varchar(225) NOT NULL,
  `admin_pwd` varchar(225) NOT NULL,
  PRIMARY KEY (`admin_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=23 ; 
```

桌子`shouts`

```
CREATE TABLE `shouts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  `email` varchar(60) NOT NULL,
  `lund` varchar(70) NOT NULL,
  `LundaBlogg` varchar(20) NOT NULL,
  `date` datetime NOT NULL,
  `likes` int(11) NOT NULL,
  `post` text NOT NULL,
  `ipaddress` varchar(45) NOT NULL,
  `userName` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `email` (`email`),
  KEY `lund` (`lund`),
  KEY `name` (`name`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=25 ; 
```

现在我使用这个代码，用户可以喜欢多少次他们想要的帖子。我应该写什么 sql 来让我的用户在帖子上只点赞一次？

```
<?php
class Like
{
    function like()
    {
        if(isset($_POST['Gilla'])) 
        {   
            $sql="UPDATE shouts SET likes =  likes +1 WHERE id = '".$_POST['id']."'"; 
            $result=mysql_query($sql);
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:07:52.237

您必须创建另一个表，将“呼喊”与您的用户表链接起来，以记录每个赞。可以从该表中计算出帖子的总点赞数（即“SELECT COUNT(*) FROM user_shouts WHERE id = bla”），并且您必须确保用户只能“发布”一次在那张桌子上写一篇文章。

您当前的基础架构看起来无法满足您的要求。

# git - 压缩第一次和第三次提交（留下第二次未压缩）

> ID：15503086
> 
> 赞同：3
> 
> 时间：2013-03-19T15:04:53.280
> 
> 标签：git, git-rebase, squash

假设我的回购中有以下历史记录：

```
git log --oneline    
<3rd sha1> Third commit.
<2nd sha1> Second commit.
<1st sha1> First commit. 
```

我如何将第三个提交压缩到第一个，而第二个不受影响？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T15:04:53.280

我已经这样做了：

1.  清理了我当前的更改（隐藏）。
2.  `git rebase -i HEAD~3`.
3.  编辑为：

    选择 <2nd sha1> 第二次提交。

    选择 <1st sha1> 第一次提交。

    squash <3rd sha1> 第三次提交。

4.  解决了冲突：`error: could not apply <2nd sha1>... Second commit.`.

5.  `git rebase --continue`.
6.  文本编辑器被第二条提交消息触发，我保留了它。
7.  解决了冲突：`error: could not apply <1nd sha1>... First commit.`.
8.  `git rebase --continue`.
9.  文本编辑器被第一个提交消息触发，我保留了它。
10.  文本编辑器被触发，要求提供用于压缩第一次和第三次提交的提交消息，我输入了一条新消息 ( `First commit (squashed).`)。

然后就完成了。

`git log --oneline`：

```
git log --oneline    
<2nd sha1> Second commit.
<1st sha1> First commit (squashed). 
```

我成功地做到了，发生的冲突应该发生并且很容易解决。

我对结果非常满意，但无论如何我想知道是否有更好的方法来实现这一目标。

# winapi - GetTickCount() 实际测量的是什么？

> ID：15503088
> 
> 赞同：6
> 
> 时间：2013-03-19T15:04:55.683
> 
> 标签：winapi

我想知道 Windows API[`GetTickCount()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)实际测量的是什么？它是否测量从按下系统电源按钮的那一刻起的时间？它是否也测量引导加载程序或 BIOS 加载所花费的时间？我正在尝试测量 Windows 7 上的启动时间。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-07T16:34:18.437

您不应该将其视为测量“自”以来的时间。仅将其用作相对时钟源。换句话说，调用`GetTickCount`一次，然后做某事，然后再次调用它，然后减去。不要使用滴答计数的绝对值。

确切的启动时间未指定，在调试 Windows 版本时，“启动时间”被人为设置为过去 49.7 天，以暴露计时器翻转错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T15:10:00.297

由于[官方文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)没有具体说明，您只能假设启动期间的精确时刻并没有真正定义，并且它在不同版本的 Windows 上可能会有所不同。但是考虑到使用虚拟化和仿真，“自从按下电源按钮”将毫无意义。您可能希望的最佳一致定义是 Windows 开始提供中断服务的时刻——系统时钟可用的最早时刻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T14:47:25.250

GetTickCount() 主要用于测量*短时间**间隔*。GTC的零点基本上是未定义的。

另外，据我所见，GTC 与 的值非常匹配`QueryPerformanceCounter() * 1000 / QueryPerformanceFrequency()`，所以我猜这就是它在支持 QPC 和 QPF 的机器上的实现方式。

现在，有两个常用选项可用于确定 Windows 正常运行时间。

1.  查询`\\.\System\System Up Time`性能计数器。当心[非英语盒子上的警告](http://www.hardtoc.com/archives/88)。另外，根据我的测试，这个方法在 Wow64 下根本不起作用，`PdhCollectQueryData`返回 NO_DATA。

2.  `LastBootUpTime`对来自 的值运行 WMI 查询`Win32_OperatingSystem table`。这*很重*，因此您通常希望获取并缓存它。它也很脆弱，因为 WMI 可以以神秘的方式破坏。最后，我看到`systeminfo`基于 WMI 的标准实用程序返回无效的启动时间，该时间已关闭超过 1 天。

另一种选择是用于`GetSystemTimes`获取所有 CPU 的空闲/内核/用户时间，将它们统计起来，除以 CPU 计数并将其作为正常运行时间的近似值。对此进行了实验后，我发现它相当不精确，并且比正常正常运行时间要高。

因此，总而言之，没有简单且轻量级的方法来确定 Windows 上的启动时间或正常运行时间。没有什么能比得上`/proc/uptime`在 *nix 上阅读的。惊喜，惊喜。

# c++ - 另一台 PC 上的 C++ 程序所需的文件/DLL

> ID：15503090
> 
> 赞同：-2
> 
> 时间：2013-03-19T15:05:07.170
> 
> 标签：c++, dll, required

因此，如果我想将我的程序分发到我用 C++ 制作的其他人的 PC 上，那台 PC 上绝对需要哪些 DLL 才能运行该程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:08:00.530

好吧，如果不知道您的程序做什么，特别是它使用什么库，这有点难以回答。

我认为这可以帮助你：

[http://msdn.microsoft.com/en-us/library/8kche8ah.aspx](http://msdn.microsoft.com/en-us/library/8kche8ah.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:08:37.077

有一个名为dependency.exe 的工具可以帮助您确定：http: [//www.dependencywalker.com/](http://www.dependencywalker.com/)

> Dependency Walker 是一个免费实用程序，它可以扫描任何 32 位或 64 位 Windows 模块（exe、dll、ocx、sys 等）并构建所有依赖模块的层次树图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:23:23.063

I recently had a similar issue and I tried several approaches, what finally helped me:

*   Get all linked DLLs with the already mentioned dependency walker
*   There may be DLLs loaded during runtime which may not show up in dependency walker: Use [ListDlls](http://technet.microsoft.com/en-us/sysinternals/bb896656.aspx) on a started process or try using [Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645) to determine which DLL files (in what paths) are actually opened by your executable.

# c++ - 在预处理器指令中包含静态库

> ID：15503092
> 
> 赞同：7
> 
> 时间：2013-03-19T15:05:11.813
> 
> 标签：c++, c-preprocessor, static-libraries

我正在使用 Visual Studio 2012。

我多次使用预处理器指令，例如

```
#ifdef something 
      #include<some_header.h>
#else
      #include<other_header.h>
#endif 
```

我想知道是否可以以类似的方式链接静态库：

```
#ifdef something 
      // use some_library.lib
#else
      // use other_library.lib
#endif 
```

这个问题来自我[上一个问题](https://stackoverflow.com/questions/15497220/two-lib-containing-different-functions-with-the-same-name-how-to-choose-the-ri)的主题：我有两个没有命名空间的静态库 lib1.lib、lib2.lib（不是它们的代码），具有相同的函数原型，但具有不同的实现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T15:07:21.883

如果您使用的是 MSVC，您可以这样做

```
#ifdef something 
      #pragma comment(lib,"xxx.lib")
#else
      #pragma comment(lib,"zzz.lib")
#endif 
```

在 GCC 中你不能这样做。

# c - 如何在 C 中使用宏填充数字？

> ID：15503096
> 
> 赞同：3
> 
> 时间：2013-03-19T15:05:23.287
> 
> 标签：c

我正在尝试在 sprintf 语句中使用宏。是这样的：

```
#define MACR 6

....
int Number= 5;
char Formatted[30];
sprintf( Formatted, "%06d", Number ); 
```

在这里，我想使用 MACR 而不是 6。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T15:06:46.077

使用`*`格式说明符将宽度作为参数传递。像这样的东西应该工作：

```
sprintf( Formatted, "%0*d", MACR, Number ); 
```

但请使用常量而不是 MACRO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:08:12.820

最简单的解决方案是用 a 指定长度`'*'`，并将宏作为参数传递：

```
sprintf( formatted, "%0*d", MACR, number ); 
```

或者，您可以连接字符串，例如：

```
sprintf( formatted, "%0" STRINGIZE(MACR) "d", number ); 
```

使用通常的 STRINGIZE 宏：

```
#define STRINGIZE_HELPER(x) # x
#define STIRNGIZE(x) STRINGIZE_HELPER(x) 
```

（当然，最简单和最安全的解决方案就是忘记`sprintf`并使用`std::ostringstream`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:08:13.980

有两种方法可以解决这个问题：

1.  在宏中有完整的格式：

    ```
    #define MACR  "%06d"

    sprintf(Formatted, MACR, Number); 
    ```

2.  使用`*`宽度说明符：

    ```
    #define MACR 6

    sprintf(Formatted, "%0*d", MACR, Number); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:07:29.283

```
#define MAKE_TEXT(x) #x
sprintf( Formatted, "%0"MAKE_TEXT(MACR)"d", Number ); 
```

# java - 试图获取本周星期一的日期

> ID：15503105
> 
> 赞同：4
> 
> 时间：2013-03-19T15:05:43.973
> 
> 标签：java, date, calendar

我已经实现了一种方法来获取本周星期一的日期，并且我已将星期一指定为一周的第一天。

但是，无论我做什么，它都会返回 Sun Mar 24 15:03:07 GMT 2013。我看不出这里有什么问题。有人能帮忙吗？

```
public static Date getFirstDayOfWeekDate()
{
    Calendar cal = Calendar.getInstance();
    cal.setFirstDayOfWeek(2);
    cal.set(Calendar.DAY_OF_WEEK,
    cal.getActualMinimum(Calendar.DAY_OF_WEEK));
    Date firstDayOfTheWeek = cal.getTime();
    return firstDayOfTheWeek;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:18:27.707

试试这个 ：

```
public static Date getFirstDayOfWeekDate() {
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.DAY_OF_WEEK,
            cal.getActualMinimum(Calendar.DAY_OF_WEEK));
    Date now = new Date();
    cal.setTime(now);
    int week = cal.get(Calendar.DAY_OF_WEEK);
    return new Date(now.getTime() - 24 * 60 * 60 * 1000 * (week - 1));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:10:46.653

这个对我有用：

```
 Calendar c = Calendar.getInstance();
    c.setFirstDayOfWeek(Calendar.MONDAY);
    c.setTime(new Date());
    int today = c.get(Calendar.DAY_OF_WEEK);
    c.add(Calendar.DAY_OF_WEEK, -today+Calendar.MONDAY);
    System.out.println("Date "+c.getTime()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:14:55.440

只需在星期几中添加一个：

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.DAY_OF_WEEK, cal.getActualMinimum(Calendar.DAY_OF_WEEK) + 1);
return cal.getTime(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:22:13.270

或使用[JodaTime](http://joda-time.sourceforge.net/)

```
LocalDate.now().withDayOfWeek(DateTimeConstants.MONDAY); 
```

来自[Joda 时间：一周的第一天？](https://stackoverflow.com/questions/1801907/joda-time-first-day-of-week)

# java - 如何通过 iText 阅读 PDF 文件并像在 Adob e Reader 中一样显示？

> ID：15503106
> 
> 赞同：0
> 
> 时间：2013-03-19T15:05:50.720
> 
> 标签：java, swing, pdf, itext

我使用`com.itextpdf.text.pdf.PdfReader`并`com.itextpdf.text.pdf.parser.PdfTextExtractor` 打包，并尝试过：

```
String pagedata=PdfTextExtractor.getTextFromPage(reader,pageno) 
```

并将页面数据放入 JTextArea。

但通过这样做，它会跳过所有图像、字体大小和颜色，只显示相同大小的文本数据。

我想像在 Adob​​e Reader 中那样逐页获取所有完整的页面数据。我该怎么做？我应该将获取的页面放在哪个组件中？显然不在 JTextArea 上......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T19:33:42.310

您可以使用 Desktop 类调用 Adob​​e Reader。

```
Desktop.getDesktop().open(file.pdf);
// where file.pdf is your file instance. 
```

# .net - 无法从 VBA 获得免注册 COM

> ID：15503117
> 
> 赞同：8
> 
> 时间：2013-03-19T15:06:14.200
> 
> 标签：.net, vba, com-interop, regfreecom, registration-free-com

**更新：**花了 20 多个小时试图让一个简单的示例正常工作后，我意识到这并不像看起来那么简单。[像这样](http://blogs.msdn.com/b/junfeng/archive/2006/05/17/registration-free-com-net-interop.aspx)的文章揭示了“陷阱”——这是在 Windows 7 之前编写的（它以不同的方式处理清单）。我坚持[通过 VSTO](http://msdn.microsoft.com/en-us/library/vstudio/bb608621.aspx)将 .NET 程序集公开给 VBA 。

* * *

我制作了一个简单的 COM-Visible .NET 程序集，并试图从 Excel VBA 中调用它。如果我在 .NET 构建期间“注册 COM 互操作”，我可以成功地从 VBA 调用它。

```
Sub VBA()    
    Dim obj As Object
    Set obj = actCtx.CreateObject("ComTest.Main")
    MsgBox obj.Test() '<-- Displays "Hello"
End Sub 
```

但是，我想做免注册。

*根据汉斯的建议更新：*

我取消选中 Register for COM Interop，并将我的 app.Manifest 设置为：

```
<?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly 
  manifestVersion="1.0" 
  xmlns="urn:schemas-microsoft-com:asm.v1" 
  xmlns:asmv1="urn:schemas-microsoft-com:asm.v1"
  xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <assemblyIdentity
    type="win32"
    version="1.0.0.0" 
    name="ComTest" 
    publicKeyToken="a36a7110110d7bd7" />

  <clrClass
      clsid="{975DC7E0-4596-4C42-9D0C-0601F86E3A1B}"
      progid="ComTest.Main"
      threadingModel="Both"
      name="ComTest.Main"
      runtimeVersion="v4.0.30319">
  </clrClass>

  <file name = "ComTest.dll"></file>   
</asmv1:assembly> 
```

我创建了一个像这样的虚拟“client.manifest”：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<asmv1:assembly 
  manifestVersion="1.0" 
  xmlns="urn:schemas-microsoft-com:asm.v1" 
  xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" 
  xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    manifestVersion="1.0" 
    xmlns="urn:schemas-microsoft-com:asm.v1" >
    <assemblyIdentity
        name="xxx"
        version="1.0.0.0" />
    <dependency>
        <dependentAssembly>
            <assemblyIdentity
                type="win32"
                name="ComTest" 
                version="1.0.0.0"
                publicKeyToken="a36a7110110d7bd7" />
        </dependentAssembly>            
    </dependency>
</asmv1:assembly> 
```

在创建对象时，我修改了我的 VBA 以使用 client.manifest：

```
Sub VBA()    
    Dim actCtx As Object
    Set actCtx = CreateObject("Microsoft.Windows.ActCtx")
    actCtx.Manifest = "C:\Users\me\Desktop\COM Test\ComTest\ComTest\bin\Debug\client.manifest"

    Dim obj As Object
    Set obj = actCtx.CreateObject("ComTest.Main")  '<-- Fails here.
    MsgBox obj.Test()    
End Sub 
```

它在 CreateObject 上失败，并带有不太有用的错误`Method 'CreateObject' of object 'IActCtx' failed`。

sxstrace 显示它读取 client.manifest 并创建 Activation Context。进程监视器显示它访问 ComTest.dll 并在注册表中搜索类 975DC7E0-4596-4C42-9D0C-0601F86E3A1B。

我错过了什么？

* * *

这是.NET代码：

```
<ComVisible(True)>
<Guid("EB6AA207-ECC7-413B-9A9B-9D142FF2701D")>
<InterfaceType(ComInterfaceType.InterfaceIsIDispatch)>
Public Interface IMain
    Function Test() As String
End Interface

<ComVisible(True)>
<Guid("975DC7E0-4596-4C42-9D0C-0601F86E3A1B")>
<ProgId("ComTest.Main")>
<ClassInterface(ClassInterfaceType.None)>
<ComDefaultInterface(GetType(IMain))>
Public Class Main
    Implements IMain
    Public Function Test() As String Implements IMain.Test
        Return "HELLO"
    End Function
End Class 
```

我正在运行 64 位 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:25:20.743

要使用免注册 COM，服务器（程序集）和客户端都需要位于同一文件夹中。看：

[http://msdn.microsoft.com/en-us/magazine/cc188708.aspx](http://msdn.microsoft.com/en-us/magazine/cc188708.aspx)

# jquery - 字体增加/减少后让页面上的元素重置为默认大小

> ID：15503119
> 
> 赞同：2
> 
> 时间：2013-03-19T15:06:18.863
> 
> 标签：jquery

如何在字体增加/减少后让页面上的元素重置为默认值

我尝试了以下但收效甚微（字体增加/减少工作）：

[jsfiddle](http://jsfiddle.net/R3NGU/6/)

这是我的代码：

```
$(".resetFont").click(function () {
});

$(".increaseFont").click(function () {
    var fontSize = getFontSize();
    var newFontSize = fontSize + 1;
    setFontSize(newFontSize);
    return false;
});

$(".decreaseFont").click(function () {
    var fontSize = getFontSize();
    var newFontSize = fontSize - 1;
    setFontSize(newFontSize);
    return false;
});

function getFontSize() {
    var currentSize = $("html").css("font-size");
    var currentSizeNumber = parseFloat(currentSize, 12);
    if (currentSizeNumber > 24) {
        currentSizeNumber = 24;
    }
    if (currentSizeNumber < 10) {
        currentSizeNumber = 10;
    }
    return currentSizeNumber;
}

function setFontSize(size) {
    $("html").css("font-size", size);
    $(".actualSize").html(size);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:09:48.447

```
var defaultFontSize = $('html').css('font-size');

$(".resetFont").click(function () {
    $('html').css('font-size', defaultFontSize);
}); 
```

[**更新了演示**](http://jsfiddle.net/R3NGU/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:10:35.793

```
var defaultFontSize = $('html').css('font-size');
$(".resetFont").click(function () {

$("html").css("font-size", defaultFontSize);
    $(".actualSize").html(defaultFontSize );

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:10:59.880

只需设置您想要的原始字体大小：

```
 $(".resetFont").click(function () {
      $("html").css("font-size", '24px');
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:13:01.670

```
$('.resetFont').click(function(){
    setFontSize('auto');
} 
```

这个真的没人看吗？

# php - 如何从多个foreach中退出

> ID：15503125
> 
> 赞同：-3
> 
> 时间：2013-03-19T15:06:31.257
> 
> 标签：php

我有一个多重 foreach （循环），如下所示：

```
foreach($Arr1 as $k1=>$v1){ //Loop 1

    foreach($v1 as $k2=>$v2) { //Loop 2

        foreach($v2 as $k3=>$v3) { //Loop 3

            if($v3==0){ echo "Yes! Found Zero & Exit the Entire Loop"; break; }

        }

    }
} 
```

在我的代码中，我确实输入了“break”，但我只退出 //Loop3 并再次从 //Loop 2 继续，所以这是等待退出整个循环吗？
如果我退出，是的，它会停止，但我的整个页面也会停止。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T15:08:52.143

用于`break 3;`打破所有循环。

[[[`break`](http://www.php.net/break)实际上需要一个“参数”，它告诉它要跳出多少个循环]]

`break;`（没有数字）与~~（~~`break 1;`不再有效）相同。~~`break 0;`~~ `break 0;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T15:09:15.557

[根据文档](http://www.php.net/break)，您可以指定许多循环来打破这样的：

```
break 3; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-19T15:11:17.543

我可能会使用函数重写它

```
function multiLoop($array)

    foreach ($array as $k1 => $v1) {

      foreach ($v1 as $k2 => $v2) {

        foreach ($v2 as $k3 => $v3) {

          if ($v3 == "0") {
            return $k3;
          }

      }
    }
  }
}

echo "0 found at " . multiLoop($input) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T15:07:57.700

```
break; 
```

这将使您摆脱任何循环。

# c++ - 像访问文件流一样访问一块内存（/C/C++ 数组）

> ID：15503129
> 
> 赞同：4
> 
> 时间：2013-03-19T15:06:38.417
> 
> 标签：c++, c, fstream, cfstream

有没有办法在 C（或 C++）中做到这一点？

背景信息：我将逐行读取内存块或大文件并一次处理这些行，我懒得写两次相同的东西，一次用于内存块，一次用于文件流. 如果需要使用文件流版本，则该文件将不适合内存。可以理解的是，我可以将内存块保存到文件中，然后使用文件流访问相同的数据，但这似乎是在浪费计算机时间。

我知道 Linux 系统上的 /dev/shm 。有没有更便携的东西可以在语言层（C 或 C++）给我同样的抽象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T15:10:01.067

在 C 中，您可以使用`sprintf`and `sscanf`，`C++`其中有使用字符串构造的[std::stringstream](http://en.cppreference.com/w/cpp/io/basic_stringstream)类。因此，您可以使函数接受一个作为参数并根据情况`std::istream`传递其中一个`std::ifstream`。`std::istringstream`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:12:17.730

您可以使用功能`open_memstream`(3) 及其相关功能（如果它在您的系统上可用）。（glibc 和 POSIX 2008）：[open_memstream(3)](http://linux.die.net/man/3/open_memstream)手册页，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T16:13:26.317

您可以编写自己的流缓冲区，如下所示：

```
#include <streambuf>
#include <istream>
#include <iomanip>
#include <iostream>

template<
    class CharT,
    class Traits = std::char_traits<CharT>
> class basic_MemoryBuffer : public std::basic_streambuf<CharT, Traits> {
public:
  basic_MemoryBuffer(CharT* ptr, std::size_t size)  {
    setg(ptr, ptr, ptr+size);
  }
};

typedef basic_MemoryBuffer<char> MemoryBuffer;

int main () {
  char data[] = "Hello, world\n42\n";

  MemoryBuffer m(data, sizeof(data)-1);
  std::istream in(&m);

  std::string line;
  while(std::getline(in, line)) {
    std::cout << line << "\n";
  }
} 
```

# ios - 在 CoreData 上使用 RNCryptManager 加密 NSData

> ID：15503138
> 
> 赞同：1
> 
> 时间：2013-03-19T15:06:53.587
> 
> 标签：ios, objective-c, core-data, encryption, nsdata

我从来没有与数据加密有任何关系，所以我开始[使用这段代码](http://robnapier.net/blog/aes-commoncrypto-564)

我做过任何事情，如果我加密一些`NSData`并直接解密`NSData`. 但是很难理解这段代码是如何工作的。任何人都可以帮助我会很好。

我会`NSData`在其中存储一些 Encrypted`CoreData`并将其从`CoreData`DeCrypt 加载，但如果我这样做，我会得到以下输出：

> 2013-03-19 15:31:07.197 En-Decrypt+CoreData[2603:c07] +[RNCryptManager AESKeyForPassword:salt:] 中的断言失败，/Users/main/Desktop/En-Decrypt+CoreData/En-Decrypt+CoreData /RNCryptManager.m:110 2013-03-19 15:31:07.198 En-Decrypt+CoreData[2603:c07] 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法为密码创建 AES 密钥：-1”

我在[这里上传了示例 xcode 项目](http://www.sendspace.com/file/z5u8gy)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:19:52.433

其中包含您需要保存的数据`salt`和`iv`值。这是解密所必需的。所以修改你的数据模型：
![在此处输入图像描述](../Images/d6cae500186d4663d334c62c184c25c7.png)

并保存`salt`并`iv`使用加密数据。

# css - 图标字体：它们是如何工作的？

> ID：15503139
> 
> 赞同：98
> 
> 时间：2013-03-19T15:06:57.477
> 
> 标签：css, web, fonts, icons, icon-fonts

我知道图标字体只是字体，您可以通过调用它们的类名来获取图标，但是图标字体***是如何***工作的？

我尝试检查 Chrome 中加载的相关图标字体资源，以查看图标字体如何显示图标（与一般字体相比），但我无法弄清楚这是如何发生的。

即使有大量可用的[**图标字体**](http://thenextweb.com/dd/2012/10/12/7-gorgeous-icon-fonts-to-speed-up-your-site-and-your-design-process/)，我也未能找到有关如何完成“图标字体技术”的资源。还有大量资源展示了如何 [**集成**](http://fortawesome.github.com/Font-Awesome/#integration)图标字体，但似乎没有人分享或写下这是***如何***完成的！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-19T15:13:29.257

[字形图标](http://glyphicons.com/)是[图像](http://glyphicons.com/wp-content/themes/glyphicons/images/glyphicons_halflings.png)而*不是*字体。所有的图标都在一个 sprite 图像中（也可以作为单独的图像使用），并且它们被添加到元素作为定位`backround-image`s：

![字形](../Images/4b0c0fe779a0a3cd5ad9389b0d325f9a.png)

实际的字体图标（例如[FontAwesome](http://fortawesome.github.com/Font-Awesome/)）*确实*涉及下载特定字体并使用该`content`属性，例如：

```
@font-face {
    ...
    src: url('../font/fontawesome-webfont.eot?#iefix&v=3.0.1') format('embedded-opentype'),
         url('../font/fontawesome-webfont.woff?v=3.0.1') format('woff'),
         url('../font/fontawesome-webfont.ttf?v=3.0.1') format('truetype');
    ...
}

.icon-beer:before {
    content: "\f0fc";
} 
```

由于旧版浏览器[不支持](http://caniuse.com/#search=content)`content`该属性，因此它们*也*使用了[images](http://fortawesome.github.com/Font-Awesome/assets/img/glyphicons-halflings.png)。

 *这是一个完全原始的 FontAwesome 用作字体的示例，将`&#xf0f9;`（ - 你可能看不到这个！）变成救护车：http: [//jsfiddle.net/GWqcF/2](http://jsfiddle.net/GWqcF/2)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-19T15:13:44.827

如果您的问题是 CSS 类如何插入特定字符（将呈现为特殊字体的图标），请查看[FontAwesome 的源代码](https://github.com/FortAwesome/Font-Awesome/blob/731953d9efa9e83a8f13d296de605057d0fb366d/web-fonts-with-css/css/fontawesome-all.css#L1756)：

```
.icon-glass:before { content: "\f000"; }
.icon-music:before { content: "\f001"; }
.icon-search:before { content: "\f002"; }
.icon-envelope:before { content: "\f003"; }
.icon-heart:before { content: "\f004"; } 
```

因此，使用 CSS 内容指令插入字符（它来自 Unicode 的一个特殊的私有保留区域，不会弄乱其他阅读器）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-01-13T17:55:14.290

**webfont 图标是如何工作的？**

Web 字体图标通过使用 CSS 使用 content 属性将特定字形注入 HTML 来工作。然后它使用`@font-face`加载一个 dingbat webfont 来设置注入字形的样式。结果是注入的字形成为所需的图标。

首先，您需要一个带有所需图标的 Web 字体文件，这些图标可以为特定`ASCII`字符定义，也可以`(A, B, C, !, @, #, etc.)`在 Unicode 字体的专用区域中定义，这些是字体中的空格，不会被特定字符使用Unicode 编码字体。

**阅读更多，如何在[Responsive Webfont Icons](http://webstandardssherpa.com/reviews/responsive-webfont-icons/?utm_source=buffer&utm_campaign=Buffer&utm_content=buffereac5b&utm_medium=google)创建 webfont 图标。***

# python - Django中过滤内的正则表达式

> ID：15503140
> 
> 赞同：1
> 
> 时间：2013-03-19T15:06:57.817
> 
> 标签：python, regex, django, filtering

我正在尝试在用户输入时进行更改

```
color*red 
```

用户想在里面搜索：

```
the color is red
the color is blue 
```

我更改`*`为`(\W|\w|\s)*`在 Django 过滤内的正则表达式中使用它。

```
NameItem=NameItem.replace("*","(\W|\w|\s)*")

ItemsSelected=Items.objects.filter(Name__iregex=NameItem) 
```

但它从来没有给我结果。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:56:26.163

你忘了制作`"(\W|\w|\s)*"`一个原始字符串。另一方面，我不知道您为什么使用它而不是`".*"`.

# java - 生成一个整数并将其用作字符串数组的索引

> ID：15503142
> 
> 赞同：0
> 
> 时间：2013-03-19T15:07:02.117
> 
> 标签：java, android

我最近开始接触 android 编程，只掌握了 java 的基本知识。我的代码有问题，我的目标是在单击按钮后显示一个随机选择的文本，该文本已经在我的数组中编程（onclick 事件）。

```
public void magicbegins() //
{
    int min = 0;
    int max = 3;
    Random r = new Random();
    int rand = r.nextInt(max - min + 1) + min;
    //generating random number from 0 to 3 to use as index in later event
    String[] magictext = {"yes", "no", "maybe"};

    TextView text = (TextView) findViewById(R.id.textView1);
    //using the generated number as index for programmed string array
    text.setText(magictext[rand]);
} 
```

如果在任何情况下不建议使用此代码，是否有人会提供一个示例脚本，该脚本至少与我的目标相似？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:08:58.637

由于您的索引需要为 0、1 或 2，因此只需使用`r.nextInt(3)`（或者，如果您重新排序变量声明，则使用`r.nextInt(magictext.length)`）。你当然不应该使用`r.nextInt(max - min + 1)`，因为它偶尔会给出 3，这是一个越界索引。

这个公式：

```
r.nextInt(max - min + 1) + min 
```

当`min`并且`max`两者都需要包含在生成的随机整数范围内时是合适的。当所需范围达到但不包括 时`max`，公式应为：

```
r.nextInt(max - min) + min 
```

我的建议是使用它，但分别用 0 和 3 代替`min`和`max`。

您也可以考虑将方法移出`magictext`和`r`移出，并使它们成为类的成员字段。您可以对字段执行相同的操作`text`，因此您无需每次都查找它。您可以在方法中初始化该`text`字段`onCreate`。您的代码将如下所示：

```
private final Random r = new Random();
private final String[] magictext = {"yes", "no", "maybe"};
private TextView text;

protected void onCreate(Bundle savedInstanceState) {
    . . . // what you have now, followed by
    text = (TextView) findViewById(R.id.textView1);
}

public void magicbegins()
{
    int rand = r.nextInt(magictext.length);

    text.setText(magictext[rand]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:14:16.680

正如@Ted Hopp 建议的那样

用这个

```
public void magicbegins() 
{
    Random r = new Random();
    int rand = r.nextInt(3);
    String[] magictext = {"yes", "no", "maybe"};

    TextView text = (TextView) findViewById(R.id.textView1);

    text.setText(magictext[rand]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:12:31.317

[随机#nextInt(int n)](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28%29)

> 返回一个伪随机、均匀分布的 int 值，介于 0（包括）和指定值（不包括）之间，取自该随机数生成器的序列。nextInt 的一般约定是伪随机生成并返回指定范围内的一个 int 值。所有 n 个可能的 int 值都以（大约）相等的概率产生。

```
int rand = r.nextInt(max - min + 1) + min; 
```

可以生成 3。由于您的数组只有 3 个元素，因此其索引将为 0,1,2。尝试访问 magictext[3] 会导致 `ArrayIndexOutOfBoundsException.`

# wordpress - 如何在自定义帖子类型上显示比常规 Wordpress 帖子更多的帖子？

> ID：15503143
> 
> 赞同：1
> 
> 时间：2013-03-19T15:07:03.663
> 
> 标签：wordpress, jquery-masonry, custom-post-type

我正在使用 jQuery Masonry 在我的 Wordpress 主题中浮动我的自定义帖子类型。这些帖子很小，所以我需要很多帖子来填满页面。

我的问题是我已经在设置中声明我不想拥有超过 4 个常规博客文章（设置 -> 阅读 -> 博客页面最多显示 -> 4 个），那么我如何让 Wordpress 区分这两个？

这是我用来显示我的帖子的查询：

```
<!-- Start the Loop. -->
            <div id="kampanjer-container">
                <?php
                    $args = array(
                        'post_type' => 'kampanje',
                    );
                    $kampanje = new WP_Query( $args );
                    if( $kampanje->have_posts() ) { while( $kampanje->have_posts() ) {
                            $kampanje->the_post(); ?>
                            <article class="kampanjepin">
                                <?php if ( has_post_thumbnail() ) { the_post_thumbnail(); } ?>
                                    <h3><?php the_title() ?></h3>
                                    <div class='content'>
                                        <?php the_content() ?>
                                    </div>
                            </article><!-- END .kampanjepin -->
                            <?php
                        }
                    }
                    else {
                        echo 'Ingen kampanjer for øyeblikket!';
                    }
                ?>
            </div><!-- END #kampanjer-container --> 
```

这是修复它的原因（$args 上的新行）：

```
<!-- Start the Loop. -->
            <div id="kampanjer-container">
                <?php
                    $args = array(
                        'post_type' => 'kampanje',
                        'posts_per_page' => '15',
                    ); 
```

# c# - 在 C# 中传递 Oracle ClientID

> ID：15503145
> 
> 赞同：1
> 
> 时间：2013-03-19T15:07:14.260
> 
> 标签：c#, asp.net, oracle, oracle11g, odp.net

我正在尝试使用 Oracle 连接 ClientID，但我收到一条错误消息，我就是不知道为什么。你能否让我走上正确的道路。

```
cnDB.ConnectionString = OracleDatabase.CnnString();            
            cnDB.Open();
            cnDB.ClientId = "SomeUser";             

            cmd.CommandType = CommandType.Text;
            cmd.CommandText=strSQL;
            cmd.Connection = cnDB;

Error   23  'System.Data.OracleClient.OracleConnection' does not contain
a definition for 'ClientId' and no extension method 'ClientId'
accepting a first argument of type
'System.Data.OracleClient.OracleConnection' could be found (are you
missing a using directive or an assembly reference?) 
```

编辑：看起来 ODP.NET 已经被使用了。我正在接管某人的代码，也许你可以告诉我这里出了什么问题：

```
using System;
using System.Data;
using System.Configuration;
using System.Data.OracleClient;

public sealed class OracleDatabase
{
    public static DataTable AllData;
    public const string cnstCnnStrSeparator = ";";

    public static String CnnString()
    {

        System.Configuration.AppSettingsReader configurationAppSettings = new System.Configuration.AppSettingsReader();
        String strKeyVal;
        strKeyVal = ConfigurationManager.ConnectionStrings["SecOracle"].ToString();
        return strKeyVal;
    }

    public static DataTable GetDataTable(string strSQL,bool ConvertToString)
    {
        OracleConnection cnDB = new  OracleConnection();  
        OracleCommand cmd = new OracleCommand();
        DataTable dt = new DataTable();
        OracleDataAdapter da = new OracleDataAdapter();       

        try
        {

            cnDB.ConnectionString = OracleDatabase.CnnString();            
            cnDB.Open();
          //  cnDB.ClientId = "SomeUser";             

            cmd.CommandType = CommandType.Text;
            cmd.CommandText=strSQL;
            cmd.Connection = cnDB;             
            da.SelectCommand = cmd;   
            da.Fill(dt);

            DataTable dt1 = dt.Clone();
            if (ConvertToString)
            {

                for (int j = 0; j < dt1.Columns.Count; j++)
                {
                    dt1.Columns[j].DataType = typeof(string);
                }
                for (int i = 0; i < dt.Rows.Count; i++)
                {
                    DataRow dr1 = dt1.NewRow();
                    dt1.Rows.Add(dr1);

                }

                for (int i = 0; i < dt.Rows.Count; i++)
                {

                    for (int j = 0; j < dt.Columns.Count; j++)
                    {
                        dt1.Rows[i][j] = dt.Rows[i][j].ToString();

                    }

                }

                dt = null;
                AllData = dt1.Copy();
                return dt1;
            }
            else
            {
                dt1 = null;
                AllData = dt.Copy();
                return dt;
            }

        }
        catch (Exception ex)
        {

            return null;
        }
        finally
        {
            cnDB.Close();
        }

    }

    public static OracleDataReader GetDataReader(String SQL)
    {

        OracleCommand cmdQuery;
        OracleDataReader dr;
        String str;
        str = CnnString();
        OracleConnection cnDB = new OracleConnection(str);

        cmdQuery = new OracleCommand();
        try
        {

            cmdQuery.Connection = cnDB;
            cmdQuery.CommandText = SQL;
            cmdQuery.CommandType = System.Data.CommandType.Text;
            cnDB.Open();
            dr = cmdQuery.ExecuteReader(CommandBehavior.CloseConnection);

            return dr;
        }
        catch (Exception ex)
        {

            cnDB.Close();
            return null;
        }

        //'

    }

    public static int Execute(String SQL)
    {

        int lngRecords;
        OracleCommand cmdQuery;
        OracleConnection cnDB = null;
        cmdQuery = new OracleCommand();
        try
        {
            cnDB = new OracleConnection(CnnString());
            cmdQuery.Connection = cnDB;
            cmdQuery.CommandText = SQL;
            cmdQuery.CommandType = System.Data.CommandType.Text;
            cnDB.Open();
            lngRecords = cmdQuery.ExecuteNonQuery();

        }
        catch (Exception ex)
        {

            lngRecords = -1;
        }
        finally
        {
            cnDB.Close();

        }

        return lngRecords;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:12:59.707

我想您正在使用 Microsoft [System.Data.OracleClient](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.aspx) 命名空间，并且正如错误消息所述，连接没有 ClientID 属性。

您应该使用 Oracle 提供的[Oracle 数据提供程序](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)，并从特定版本开始，您可以从OTN 讨论论坛上的[此线程中阅读](https://forums.oracle.com/forums/thread.jspa?threadID=685554&tstart=0)

> ClientID 在 10.2.0.1 中添加到 ODP。是的，您可以针对 9.x 数据库使用 10.2.x ODP 和 11g ODP（假设这就是您安装该版本的原因）。

# xamarin.ios - Xamarin Studio 更新后丢失语法高亮方案，无法导入

> ID：15503147
> 
> 赞同：1
> 
> 时间：2013-03-19T15:07:18.577
> 
> 标签：xamarin.ios, monodevelop, xamarin, xamarin-studio

我刚刚将我的 Xamarin Studio 更新到 4.0.2（内部版本 18），现在我所有的自定义语法突出显示都消失了！当我尝试导入我保存的突出显示方案时，它默默地失败了。我注意到旧的突出显示方案以 XML 格式保存（MonoDevelop 也是如此），而新的突出显示方案似乎以 JSON 格式导出。

有没有一种方法可以转换和导入我保存的突出显示方案而无需手动完成所有操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:38:59.400

因为我遇到了同样的问题，所以我自己检查了 IRC。

对于最新版本的主题，这是一项重大更改。您现在可以将 VS 主题导入 XS：[http ://studiostyl.es](http://studiostyl.es)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:49:19.137

编辑：如果导出的文件以`Style.jason`它结尾将导入，例如`MySyntaxHighlightingSchemeStyle.json`.

这是来自 MonoDevelop 的 Mike Kruger 通过 IRC 提出的。我测试了它，它工作得很好。谢谢迈克！

* * *

将突出显示方案从早期版本的 Xamarin Develop 或 MonoDevelop 转换为新的基于 Visual Studio 的 Xamarin Develop 4.0.3 方案还没有一种简单的方法。还没有一种方法可以将已由 Xamarin Develop 导出的方案导入 Xamarin Develop（例如从一台机器到另一台机器）。Xamarin Develop 可以导入 Visual Studio 风格的基于 XML 的方案，但它只导出基于 JSON 的方案。

MonoDevelop 的 Mike Kruger 在他的博客中提到了这一点：http: [//mikemdblog.blogspot.hk/2013/02/upcoming-color-importer.html](http://mikemdblog.blogspot.hk/2013/02/upcoming-color-importer.html)

相关： [我已经在 Xamarin Studio 中导出了我的突出显示方案。现在我该如何导入它？](https://stackoverflow.com/questions/15559866/ive-exported-my-highlighting-scheme-in-xamarin-studio-now-how-do-i-import-it)

# javascript - 带有选定点的 Highcharts 导出

> ID：15503156
> 
> 赞同：0
> 
> 时间：2013-03-19T15:07:48.517
> 
> 标签：javascript, highcharts

我正在使用 Highcharts 生成折线图和柱形图。在某些情况下，我以编程方式选择图表中的点。这工作正常，直到我尝试导出图形 - 在导出的图像中未选择选定的点。

我尝试手动选择点，我添加了导出功能，它也不起作用。选择一些点后，这些点不会出现在导出的图表中。代码中没有什么特别之处，只是启用了导出并允许手动点选择的简单图形：

```
$(function () {
    var chart = new Highcharts.Chart({
            chart: {
            renderTo: 'container'
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        exporting: {
            buttons: {
                enabled: true
            },
            enabled: true
        },
        plotOptions: {
            series: {
                allowPointSelect: true
            }
        },
        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }]
    });
}); 
```

你可以在这里查看：http: [//jsfiddle.net/JTbnU/](http://jsfiddle.net/JTbnU/)

**Highcharts 是否支持使用选定点导出？**

# c# - FindById 总是返回 null

> ID：15503160
> 
> 赞同：0
> 
> 时间：2013-03-19T15:07:56.440
> 
> 标签：c#, xamarin.android

`FindById()`Android 类库上的函数总是返回 null 正常吗？

我想创建一个包含一些活动的库，以便您可以在各种项目中使用。为此，我`FindById()`在一个`OnCreate()`方法中调用。但是，它总是返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:38:44.717

我的 MonoDroid.ActionBar 项目也有类似的问题。该修复程序由 Atsushi Enomoto 提出，目前它是 Xamarin.Android 中的一个错误。

将此添加到您的项目中：

```
using System;
using System.Linq;
using System.Reflection;
using Android.Runtime;

namespace MonoDroid.ActionBar.Library
{
    //From http://forums.xamarin.com/discussion/comment/5816/#Comment_5816
    public static class ResourceIdManager
    {
        static bool _idInitialized;
        public static void UpdateIdValues ()
        {
            if (_idInitialized)
                return;
            var eass = Assembly.GetExecutingAssembly ();
            Func<Assembly,Type> f = ass =>
                ass.GetCustomAttributes (typeof (ResourceDesignerAttribute), true)
                    .Select (ca => ca as ResourceDesignerAttribute)
                    .Where (ca => ca != null && ca.IsApplication)
                    .Select (ca => ass.GetType (ca.FullName))
                    .Where (ty => ty != null)
                    .FirstOrDefault ();
            var t = f (eass);
            if (t == null)
                t = AppDomain.CurrentDomain.GetAssemblies ().Select (ass => f (ass)).Where (ty => ty != null).FirstOrDefault ();
            if (t != null)
                t.GetMethod ("UpdateIdValues").Invoke (null, new object [0]);
            _idInitialized = true;
        }
    }
} 
```

并在使用您的视图之前调用`ResourceIdManager.UpdateIdValues();`您的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:28:29.107

我想我找到了错误！

我的 Android 应用程序中的 Resource.Designer.cs 文件生成我的 Android 类库的不同 ID Resource.designer.cs 文件。

如何解决？

## Android 类库 Resource.designer.cs

```
#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18033
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

[assembly: Android.Runtime.ResourceDesignerAttribute("Mono.Android.Plugins.Resource", IsApplication=false)]

namespace Mono.Android.Plugins
{

[System.CodeDom.Compiler.GeneratedCodeAttribute("Xamarin.Android.Build.Tasks", "1.0.0.0")]
public partial class Resource
{

    Resource()
    {
        global::Android.Runtime.ResourceIdManager.UpdateIdValues ();
    }

    public partial class Attribute
    {

        private Attribute()
        {
        }
    }

    public partial class Drawable
    {

        // aapt resource value: 0x7f020000
        public static int ic_stat_dismiss = 2130837504;

        // aapt resource value: 0x7f020001
        public static int ic_stat_ic_stat_snooze = 2130837505;

        // aapt resource value: 0x7f020002
        public static int ic_stat_notification = 2130837506;

        // aapt resource value: 0x7f020003
        public static int ic_stat_snooze = 2130837507;

        // aapt resource value: 0x7f020004
        public static int monoandroidsplash = 2130837508;

        private Drawable()
        {
        }
    }

    public partial class Id
    {

        // aapt resource value: 0x7f060002
        public static int dismiss_button = 2131099650;

        // aapt resource value: 0x7f060001
        public static int reminder_content = 2131099649;

        // aapt resource value: 0x7f060000
        public static int reminder_title = 2131099648;

        // aapt resource value: 0x7f060003
        public static int snooze_button = 2131099651;

        private Id()
        {
        }
    }

    public partial class Layout
    {

        // aapt resource value: 0x7f030000
        public static int monoandroidsplash = 2130903040;

        // aapt resource value: 0x7f030001
        public static int post_reminder = 2130903041;

        private Layout()
        {
        }
    }

    public partial class String
    {

        // aapt resource value: 0x7f040002
        public static int Hello = 2130968578;

        // aapt resource value: 0x7f040001
        public static int dismiss = 2130968577;

        // aapt resource value: 0x7f040000
        public static int snooze = 2130968576;

        private String()
        {
        }
    }

    public partial class Style
    {

        // aapt resource value: 0x7f050000
        public static int Mono_Android_Theme_Splash = 2131034112;

        private Style()
        {
        }
    }
}
}
#pragma warning restore 1591 
```

## Android 应用程序资源.designer.cs

```
#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18033
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

[assembly: Android.Runtime.ResourceDesignerAttribute("AndroidApplication1.Resource", IsApplication=true)]

namespace AndroidApplication1
{

    [System.CodeDom.Compiler.GeneratedCodeAttribute("Xamarin.Android.Build.Tasks", "1.0.0.0")]
    public partial class Resource
    {

        Resource()
        {
            global::Android.Runtime.ResourceIdManager.UpdateIdValues ();
        }

        public static void UpdateIdValues()
        {
            Mono.Android.Plugins.Resource.Drawable.ic_stat_dismiss = AndroidApplication1.Resource.Drawable.ic_stat_dismiss;
            Mono.Android.Plugins.Resource.Drawable.ic_stat_ic_stat_snooze = AndroidApplication1.Resource.Drawable.ic_stat_ic_stat_snooze;
            Mono.Android.Plugins.Resource.Drawable.ic_stat_notification = AndroidApplication1.Resource.Drawable.ic_stat_notification;
            Mono.Android.Plugins.Resource.Drawable.ic_stat_snooze = AndroidApplication1.Resource.Drawable.ic_stat_snooze;
            Mono.Android.Plugins.Resource.Drawable.monoandroidsplash = AndroidApplication1.Resource.Drawable.monoandroidsplash;
            Mono.Android.Plugins.Resource.Id.dismiss_button = AndroidApplication1.Resource.Id.dismiss_button;
            Mono.Android.Plugins.Resource.Id.reminder_content = AndroidApplication1.Resource.Id.reminder_content;
            Mono.Android.Plugins.Resource.Id.reminder_title = AndroidApplication1.Resource.Id.reminder_title;
            Mono.Android.Plugins.Resource.Id.snooze_button = AndroidApplication1.Resource.Id.snooze_button;
            Mono.Android.Plugins.Resource.Layout.monoandroidsplash = AndroidApplication1.Resource.Layout.monoandroidsplash;
            Mono.Android.Plugins.Resource.Layout.post_reminder = AndroidApplication1.Resource.Layout.post_reminder;
            Mono.Android.Plugins.Resource.String.Hello = AndroidApplication1.Resource.String.Hello;
            Mono.Android.Plugins.Resource.String.dismiss = AndroidApplication1.Resource.String.dismiss;
            Mono.Android.Plugins.Resource.String.snooze = AndroidApplication1.Resource.String.snooze;
            Mono.Android.Plugins.Resource.Style.Mono_Android_Theme_Splash = AndroidApplication1.Resource.Style.Mono_Android_Theme_Splash;
        }

        public partial class Attribute
        {

            private Attribute()
            {
            }
        }

        public partial class Drawable
        {

            // aapt resource value: 0x7f020000
            public const int ic_stat_dismiss = 2130837504;

            // aapt resource value: 0x7f020001
            public const int ic_stat_ic_stat_snooze = 2130837505;

            // aapt resource value: 0x7f020002
            public const int ic_stat_notification = 2130837506;

            // aapt resource value: 0x7f020003
            public const int ic_stat_snooze = 2130837507;

            // aapt resource value: 0x7f020004
            public const int Icon = 2130837508;

            // aapt resource value: 0x7f020005
            public const int monoandroidsplash = 2130837509;

            private Drawable()
            {
            }
        }

        public partial class Id
        {

            // aapt resource value: 0x7f060000
            public const int button = 2131099648;

            // aapt resource value: 0x7f060003
            public const int dismiss_button = 2131099651;

            // aapt resource value: 0x7f060002
            public const int reminder_content = 2131099650;

            // aapt resource value: 0x7f060001
            public const int reminder_title = 2131099649;

            // aapt resource value: 0x7f060004
            public const int snooze_button = 2131099652;

            private Id()
            {
            }
        }

        public partial class Layout
        {

            // aapt resource value: 0x7f030000
            public const int Main = 2130903040;

            // aapt resource value: 0x7f030001
            public const int monoandroidsplash = 2130903041;

            // aapt resource value: 0x7f030002
            public const int post_reminder = 2130903042;

            private Layout()
            {
            }
        }

        public partial class String
        {

            // aapt resource value: 0x7f040003
            public const int ApplicationName = 2130968579;

            // aapt resource value: 0x7f040002
            public const int Hello = 2130968578;

            // aapt resource value: 0x7f040001
            public const int dismiss = 2130968577;

            // aapt resource value: 0x7f040000
            public const int snooze = 2130968576;

            private String()
            {
            }
        }

        public partial class Style
        {

            // aapt resource value: 0x7f050000
            public const int Mono_Android_Theme_Splash = 2131034112;

            private Style()
            {
            }
        }
    }
}
#pragma warning restore 1591 
```

# jmeter - JMeter 定期请求

> ID：15503168
> 
> 赞同：0
> 
> 时间：2013-03-19T15:08:09.433
> 
> 标签：jmeter

我需要创建一个测试计划，其中：

*   一组请求按照记录的顺序执行
*   执行一个**周期性请求**（每 X 秒）

所以每个线程按顺序执行记录的请求，并且每 X 秒也执行一个特定的请求。

谢谢你的帮助。

# jqplot - jqplot：yaxis标签未显示

> ID：15503175
> 
> 赞同：0
> 
> 时间：2013-03-19T15:08:33.637
> 
> 标签：jqplot

**我的问题**

使用 jqplot 我制作了一个水平堆积条形图。该图表工作正常，我遇到的唯一问题是我的 y 轴上的标签没有显示。您能提供的任何帮助将不胜感激！

**我试过的**

*   我尝试弄乱包含我的图表的填充和 div 的大小，以查看我的标签是否可能已经脱落或其他什么。情况似乎并非如此。

*   我已经仔细检查了 CanvasAxisLabelRenderer 插件的位置。除非我遗漏了什么，那应该是正确的。

*   我能够在我的 x 轴上获得标签，但在我的 y 轴上使用相同的代码没有效果。

**我的代码**

```
$(document).ready(function() {
    var x1 = [[1,1]];
    var x2 = [[1,1]];
    var xbenchmark = [[1,1],[1,1]];
    var xuworganisatie = [[1.5,1],[1.5,1]];

    var plot2 = $.jqplot('thema2chart', [x1, x2, xbenchmark, xuworganisatie], {
        stackSeries: true,
        seriesDefaults: {
            renderer: $.jqplot.BarRenderer,
            rendererOptions: {barDirection: 'horizontal'},
            pointLabels: {show: false, stackedValue: true}
        },
        gridPadding: {top:50, right:15, bottom:50, left:0},
        series: [
        {shadow: false, color:'#ddd9da'},
        {shadow: false, color:'#908e8e'},
        { 
            shadow: false,
            disableStack : false,//otherwise it wil be added to values of previous series
            renderer: $.jqplot.LineRenderer,
            lineWidth: 2,
            color:'#666666',
            showLine:false, 
            pointLabels: {show: false},
            markerOptions: {size: 7, style:"plus" 
            }},
            { 
                 shadow: false,
                     disableStack : true,//otherwise it wil be added to values of previous series
            renderer: $.jqplot.LineRenderer,
            lineWidth: 2,
            color:'#b4d2dd',
            showLine:false, 
            pointLabels: {
                show: false
            },
            markerOptions: {
                size: 7, style:"plus" 
            }}],
        axes: {
            yaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                label:'Missing'
                }
            ,
            xaxis: {
                label:'Showing',
                min: 0,
                max: 2,
                tickOptions:{showGridline:false, formatString: "%#.0f", show:false},
                tickInterval: 1
                },          
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:31:05.860

尝试这个

```
axes: {
        yaxis: {
            label:'Hopefuly showing',
            renderer: $.jqplot.CategoryAxisRenderer,
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer

            }
        ,
        xaxis: {
            label:'Showing',
            min: 0,
            max: 2,
            tickOptions:{showGridline:false, formatString: "%#.0f", show:false},
            tickInterval: 1
            },          
    } 
```

# javascript - 当 $watch-es 被 $destroy'd 时，我是否需要做任何事情来清理它们？

> ID：15503179
> 
> 赞同：4
> 
> 时间：2013-03-19T15:08:40.483
> 
> 标签：javascript, angularjs

我想避免内存泄漏，所以我想知道`$watch`es 在作用域为`$destroy`'d 时是否会自动删除，或者我应该怎么做才能清理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:32:34.293

正如[$destroy()](http://docs.angularjs.org/api/ng.%24rootScope.Scope)文档所说：

> 移除意味着对 $digest() 的调用将不再传播到当前作用域及其子作用域。

这意味着一旦你的作用域被 $destroyed，你的 $watches 将不再运行，因为它们只能被 $digest 循环处理，当作用域被 $destroyed 时，这个循环被取消。

# jquery-mobile - 带有居中按钮的可折叠页脚菜单

> ID：15503182
> 
> 赞同：1
> 
> 时间：2013-03-19T15:08:43.570
> 
> 标签：jquery-mobile

我正在尝试在 JQuery Mobile 1.3 中创建一个可折叠的底部菜单。我只想在底部有一个带有向上箭头的水平页脚。单击页脚时，菜单会展开并且箭头指向下方。这几乎是我想要的：

[http://jsfiddle.net/6F2XU/](http://jsfiddle.net/6F2XU/)

但我似乎根本无法使按钮居中。

```
<div data-role="footer" data-theme="a" data-content-theme="a" data-inset="false"   data-type="horizontal"  data-iconpos="notext" data-position="fixed" class="foot">
<div data-role="collapsible"data-theme="a" data-content-theme="a" data-inset="false"  data-collapsed-icon="arrow-u"  data-expanded-icon="arrow-d" data-iconpos="notext" class="center-button" >
<h3>Pets</h3>
<ul data-role="listview">
    <li><a href="#">Canary</a></li>
    <li><a href="#">Cat</a></li>
    <li><a href="#">Dog</a></li>
    <li><a href="#">Gerbil</a></li>
    <li><a href="#">Iguana</a></li>
    <li><a href="#">Mouse</a></li>
</ul>
</div>
</div> 
```

Javascript

```
.foot{
margin:0;
padding:0;
}
.ui-btn { width: 100%; height:30px;}
.center-button{
margin: 0 auto;
padding:0 20px 0 20px;
} 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:18:01.540

# 解决方案

这是一个可行的解决方案：http: [//jsfiddle.net/Gajotres/HHnzH/](http://jsfiddle.net/Gajotres/HHnzH/)

```
#custom-collapsible h3 a span span.ui-icon {
    margin: 0 auto !important;
    margin-top: 2px !important;
    float: none !important;
} 
```

HTML 变化，从此：

```
<div data-role="collapsible"data-theme="a" data-content-theme="a" data-inset="false"  data-collapsed-icon="arrow-u"  data-expanded-icon="arrow-d" data-iconpos="notext" class="center-button"> 
```

到：

```
<div data-role="collapsible"data-theme="a" data-content-theme="a" data-inset="false"  data-collapsed-icon="arrow-u"  data-expanded-icon="arrow-d" data-iconpos="notext" class="center-button" id="custom-collapsible"> 
```

我希望这是你想要的。

# 更多信息

如果您想自己学习如何进行这种更改，您应该查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**，它将教您如何自己进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:13:07.997

将此添加到 .center-button：

```
position:relative; 
```

# business-intelligence - 如何生成澳大利亚 ABN 号码？

> ID：15503188
> 
> 赞同：2
> 
> 时间：2013-03-19T15:08:52.327
> 
> 标签：business-intelligence

出于测试目的，我需要生成一些有效的随机 ABN（澳大利亚商业号码）。

以下是我能够找到的一些链接，讨论如何验证 ABN，但我不清楚如何*生成*值。

[skorks.com/2011/08/even-boring-form-data-can-be-interesting-for-a-developer](http://skorks.com/2011/08/even-boring-form-data-can-be-interesting-for-a-developer)

[ato.gov.au/businesses/content.aspx?doc=/content/13187.htm](http://ato.gov.au/businesses/content.aspx?doc=/content/13187.htm)

[abr.business.gov.au](http://abr.business.gov.au)

[search.cpan.org/~adamk/Business-AU-ABN-1.09/lib/Business/AU/ABN.pm](http://search.cpan.org/~adamk/Business-AU-ABN-1.09/lib/Business/AU/ABN.pm)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T15:47:49.403

从您的链接[http://web.archive.org/web/20130405011257/http://www.ato.gov.au/businesses/content.aspx?doc=/content/13187.htm](http://web.archive.org/web/20130405011257/http://www.ato.gov.au/businesses/content.aspx?doc=/content/13187.htm)在我看来您可以：

1.  选择九个任意（随机）数字。

    例如，假设我们选择 004085616。

2.  将 10 放在这些数字前面（只是暂时的）。

    这给了我们 10004085616。

3.  [按照http://web.archive.org/web/20130405011257/http://www.ato.gov.au/businesses/content.aspx?doc=/content/13187.htm](http://web.archive.org/web/20130405011257/http://www.ato.gov.au/businesses/content.aspx?doc=/content/13187.htm)中的描述应用加权因子。

    这给了我们 402。

4.  计算除以 89 时的余数。

    余数为 46。

5.  从 89 中减去余数。

    结果是 43。

6.  将该结果加 10 以获得新的最左边的数字。

    现在我们有 53。将其插入 004085616 的前面得到 53004085616。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:31:37.110

在不了解它的情况下，您可以暴力破解它。如果它是一次性的夹具一代，这很好。不知道测试编号是否有任何约定，您必须假设生成的许多测试编号可能代表真实的业务实体。

```
use strictures;
use Business::AU::ABN "validate_abn";

my $desired = 10; # 1_000;
my $abn = 12_004_044_937; # Example from BAA Pod.
my @abn;
until ( not $desired )
{
    next unless my $valid = validate_abn( $abn++ );
    $desired--;
    push @abn, $valid;
}

print join($/, @abn), $/;

__END__
12 004 044 937
12 004 044 969
12 004 045 391
12 004 045 440
12 004 045 472
12 004 045 521
12 004 045 553
12 004 045 585
12 004 045 602
12 004 045 634 
```

# java - JPA Annotations - 如何从与当前对象不同的表中检索单个值？

> ID：15503189
> 
> 赞同：18
> 
> 时间：2013-03-19T15:08:53.630
> 
> 标签：java, hibernate, jpa, annotations, hibernate-annotations

如何将另一个表中的列中的单个值映射到当前对象？

例子：

```
class Foo {
    @Id
    @Column(name="FOO_ID")
    private String fooId;

    @Column(name="FOO_A")
    private String fooA;

    //Column to map to another table?
    //is a one to one mapping - but don't want a separate object for this.
    private String barCode;
} 
```

桌子：`Fields`

福：`FOO_ID, FOO_A`

酒吧：`FOO_ID, BAR_CODE`

如何在`BAR_CODE`不使用创建单独对象（或辅助表）的情况下检索字段`JPA annotations`？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-19T15:20:00.277

使用[辅助表](http://docs.oracle.com/javaee/6/api/javax/persistence/SecondaryTable.html)。这允许您在一对一的基础上为一个实体映射另一个表并定义使用它的列映射。

例子：

```
@Entity
@Table(name = "foo")
@SecondaryTable(name = "other_table", pkJoinColumns=@PrimaryKeyJoinColumn(name="id", referencedColumnName="FOO_ID"))
public class Foo {
    @Id
    @Column(name="FOO_ID")
    private String fooId;

    @Column(name="FOO_A")
    private String fooA;

    @Column(table="OtherTable", name="barCode")
    private String barCode;
} 
```

# assembly - 如何修改flatassembler编译的汇编程序的导入表

> ID：15503195
> 
> 赞同：1
> 
> 时间：2013-03-19T15:09:00.593
> 
> 标签：assembly, x86, portable-executable, fasm, import-table

我正在测试一个由flatassembler编译的汇编程序，它需要修改导入表，所以当我运行时`objdump`我可以看到程序试图调用哪些外部函数。

所以，我开始：

```
format PE GUI
section '.flat' readable writeable executable 
```

它正在调用 MS dll 中的一些函数，但导入表是错误的。

这是一个简单的部分，展示了我如何包含两个 dll 和一个函数：

```
;user32

    _MessageBoxA           dw $0

                   db 'MessageBoxA', $0

    kernel32_name db 'kernel32.dll', $0

    user32_name   db 'user32.dll', $0 
```

在汇编程序中必须做什么才能使外部函数显示在导入表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:32:15.900

导入表是一个以 0 结尾的导入描述符数组，标头的 Data Directories 中的 Import Directory 字段指向第一项。

```
struct ImportDescriptor   // size = 20 bytes
{
    dword ILTRVA;         // RVA to Import Lookup Table
    dword Timestamp;      // you can usually ignore
    dword ForwarderChain; // these two
    dword DllNameRVA;     // RVA to 0-terminated dll name
    dword IATRVA          // RVA to Import Address Table
} 
```

ILT 和 IAT 应该是不同的位置，但应该是彼此的副本（不一定，但这是正常的做法）。IAT 将保存指向导入函数的指针。它们都是以 0 结尾的 RVA 到函数名称的数组。函数名称由一个“提示”字和一个以 0 结尾的 ascii 字符串组成。提示词可以是零，或者是该函数在它所在的 DLL 的导出表中的实际索引，或者是某个随机值，这只是一个提示。

# excel - 无法获取 WorksheetFunction 类的 Vlookup 属性

> ID：15503199
> 
> 赞同：3
> 
> 时间：2013-03-19T15:09:24.207
> 
> 标签：excel, vba, types, vlookup

我正在尝试从名为 CashReward 的电子表格中查找员工姓名及其导入日期。

下面的代码出现错误消息“无法获取 WorksheetFunction 类的 Vlookup 属性”。我尝试将数据类型更改为`CDate`但`CStr`没有用。

`concat = EmpName & GetDate`

```
BasicSal = WorksheetFunction.VLookup(CVar(concat), Sheets("CashReward").Range("G3:K" & Cashlastrow), 2, False) 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:25:56.357

如果在给定范围内未找到您的搜索字符串，则会发生这种情况。

注意范围内的数据需要按升序排序，见[http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)

> table_array 第一列的值必须按升序排列；否则，VLOOKUP 可能不会给出正确的值。您可以通过从数据菜单中选择排序命令并选择升序来将值按升序排列。有关详细信息，请参阅默认排序顺序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-06T10:56:54.580

Amy one 可以解决这个错误的运行时错误“424”对象需要

```
Private Sub VLOOKUP()
Dim I As Integer
Dim J As Integer
Dim K As Integer

For I = 2 To 14

For J = 1 To 1
For K = 2 To 2

Sheet2.Cells(I, K) = Appliaction.WorksheetFunction.VLOOKUP(Sheet2.Cells(I, J), Sheet1.Range("$A$1:$C$307"), 2, False)
Next K
Next J
Next I 
```

结束子

# c# - 引用的类库项目中的 System.Diagnostics.Trace

> ID：15503200
> 
> 赞同：2
> 
> 时间：2013-03-19T15:09:26.323
> 
> 标签：c#, asp.net, asp.net-web-api, system.diagnostics

我有一个`Asp.Net`（Web Api）项目。在这个项目中，我引用了另一个类库项目。

在引用的类库中写入的跟踪不会显示在我的日志中。

如何使用 使两个项目的跟踪显示在同一个日志中`System.Diagnostics`？换句话说，如何使引用的类库使用`web.config`Api 项目中的诊断设置？如果这是不可能的，我怎样才能在日志中获取在引用的类库中写入的跟踪？

我试图将`System.Diagnostics`设置从添加`web.config`到 a`app.config`但这似乎根本没有做任何事情。

**api项目：**

```
TraceSource source = new TraceSource("MyProject");
source.TraceEvent(TraceEventType.Information, 1, "My logged Trace"); 
```

**引用的类库：**

```
TraceSource source = new TraceSource("MyProject");
source.TraceEvent(TraceEventType.Information, 1, "My disappearing Trace"); 
```

**网页配置**

```
<system.diagnostics>
  <sources>
    <source name="MyProject" switchValue="All">
      <listeners>
        <clear />
        <add name="log" />
      </listeners>
    </source>
  </sources>
  <sharedListeners>
    <add name="log"
         type="System.Diagnostics.XmlWriterTraceListener"
         initializeData="Log.svclog"
    />
  </sharedListeners>
  <trace autoflush="true"/>
</system.diagnostics> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:12:20.373

您需要根据跟踪源的类库配置来配置跟踪侦听器。你拥有代码吗？

[http://msdn.microsoft.com/en-us/library/4y5y10s7.aspx](http://msdn.microsoft.com/en-us/library/4y5y10s7.aspx)

[http://msdn.microsoft.com/en-us/library/ms228993.aspx](http://msdn.microsoft.com/en-us/library/ms228993.aspx)

[http://msdn.microsoft.com/en-us/library/ms228984.aspx](http://msdn.microsoft.com/en-us/library/ms228984.aspx)

# twitter-bootstrap - 响应式编辑器？

> ID：15503203
> 
> 赞同：5
> 
> 时间：2013-03-19T15:09:32.970
> 
> 标签：twitter-bootstrap, responsive-design, text-editor

我的 Asp.Net Mvc4 项目有 twitter bootstrap 作为前端设计。我使用 FCK 编辑器进行内容创建。FCK 编辑器在平板电脑和移动设备视图中表现不佳。是否有可以与 twitter bootstrap 一起使用的响应式编辑器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:15:06.337

您可以尝试[http://jhollingworth.github.com/bootstrap-wysihtml5/](http://jhollingworth.github.com/bootstrap-wysihtml5/)。bootstrap-wysihtml5 没有 FCK 编辑器中的所有功能。很难将编辑器的所有功能与响应式设计结合起来。

# php - 在控制器或视图中创建导航

> ID：15503206
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:09:47.817
> 
> 标签：php, oop, codeigniter

你好我有一个问题。我正忙着用 CI 创建一个网站，我已经为自己解决了一个问题。您将导航代码放在 CI 中的什么位置？在您始终包含的控制器或 1 个视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:20:11.023

**更新**

这是我在这里发布的最后一个回复。

由于您对在控制器中使用导航一无所知，这就是您可以做的。将数据作为数组加载到控制器中。让导航中的每个链接成为该数组的一部分。将数据传递到您的视图（最好是我之前谈到的 template.php 视图），然后通过 foreach 循环运行该数组。

由于您不希望有一个完全独立的导航视图文件，因为您不喜欢只有 5 行代码，因此请将其放入您的模板文件中。所以你的模板应该是这样的：

```
<head>
    <?php $this->load->view('elements/head'); ?>
</head>
<header>
    <ul>
        <?php foreach($menus as $menu): ?>
            <li><a href='<?php print $menu["url"] ?>'><?php print $menu["title"] ?></a></li>
        <?php endforeach; ?>
    </ul>
</header>
<body>
    <div class="content">
        <?php $this->load->view($content); ?>
    </div>
</body>
<footer>
    <?php $this->load->view('elements/footer'); ?>
</footer> 
```

综上所述，在控制器中实际回显这些数据是违反 MVC 模式的。你可以在控制器中声明你的数据，但**你应该在视图中加载它。**

此外，[这个问题](https://stackoverflow.com/questions/11751624/codeigniter-dynamic-navigation)，[这个问题](https://stackoverflow.com/questions/5876961/efficient-website-navigation-with-codeigniter)，甚至更多[这个问题](https://stackoverflow.com/questions/5905024/code-igniter-this-navigation-logic-in-a-controller-or-view)都同意单独的导航视图是最好的。

* * *

我通常有一个默认的“template.php”视图，它包含在每个页面上。里面的内容是动态加载的。

在这种情况下，我建议将您的导航放在“header.php”视图文件中（假设您的导航位于顶部），然后将其加载到“template.php”视图中。这将分隔代码块，使您以后可以轻松更改导航。您的模板文件应如下所示：

```
<head>
    <?php $this->load->view('elements/head'); ?>
</head>
<header>
    <?php $this->load->view('elements/header'); ?>
</header>
<body>
    <div class="content">
        <?php $this->load->view($content); ?>
    </div>
</body>
<footer>
    <?php $this->load->view('elements/footer'); ?>
</footer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:28:10.467

通常我的导航在我的网站顶部，所以我只创建一个带有所有 html、header、meta 标记的 header.php。然后在正文标签之后，我有导航所需的代码。

您可以传递一些变量或仅使用 uri 段来查找当前页面是什么，因此您可以突出显示导航，就像 stackoverflow 上的导航一样，现在突出显示问题部分。

您可以创建一个模板视图，在您的控制器上执行以下操作：

```
public function index(){
    $data['title'] = 'Site title'
    $data['current_page'] = 'Home'
    //the view you want to load
    $data['view'] = 'home';
    //loads the vars across all views
    $this->load->vars($data);
    //loads the view wich will have our template
    $this->load->view('template');
} 
```

现在我们的视图模板将是这样的，记住你可以根据需要更改布局，如果你喜欢左列或类似的东西

```
<?php 
$this->load->view('header');
//this is the view we loaded on our controller
$this->load->view($view);
$this->load->view('footer');
?> 
```

例如，我的视图标题有我的导航系统，我使用变量 current_page 突出显示主页的菜单锚点，并使用 title 变量在页面之间具有动态标题

# yii - 创建新迁移时未定义 CConsoleApplication.defaultController

> ID：15503214
> 
> 赞同：2
> 
> 时间：2013-03-19T15:10:11.150
> 
> 标签：yii, database-migration, yii-migrations

我正在尝试使用 yii 迁移系统，但是当我执行这个命令时我遇到了这个错误：

```
yiic migrate create add_table_test 
```

我收到此错误：

```
exception 'CException' with message 'Property   CConsoleApplication.defaultController" is not defined' 
```

(CCompenent.php:173)

但是我在我的配置文件中定义了一个 defaultController：

```
'basePath'=>$rootPath,
'defaultController' => 'person/index',
'homeUrl'=>array('/me'), 
```

我花了几个小时在谷歌上寻找，但我找不到解决方案。

有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:19:09.200

问题是，您实际上已经`defaultController`在您的中定义了该属性，`config/console.php`但正如错误消息所说，`CConsoleApplication`没有这样的属性。

所以只需`defaultController`从您的控制台配置中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-14T15:24:12.693

（*这实际上是OP（Michaël）给出的答案。我把它放在这里，因为他提出了质疑）*

事实证明，问题就在我这边。我做了一件非常糟糕的事情。

问题通过以下方式解决：

1.  更换`yiic.php`符合。`$config=dirname(__FILE__).'/config/dev.php';`_`$config=dirname(__FILE__).'/config/console.php';`

2.  在目录中创建一个`console.php`文件`config`，没有`defaultController`and`theme`选项。

# python - urllib2.openurl 不适用于 Google 专利

> ID：15503216
> 
> 赞同：3
> 
> 时间：2013-03-19T15:10:17.723
> 
> 标签：python, urllib2, urlopen

我正在尝试从谷歌专利中抓取一些数据，我的代码开头如下所示：（[这](http://www.google.com/search?tbo=p&q=ininventor:%22John-Mudd%22&hl=en&tbm=pts&source=lnt&tbs=ptso:us)是下面列出的 url 的超链接）

```
In [1]: import urllib2

In [2]: url='http://www.google.com/search?tbo=p&q=ininventor:\"{}\"&hl=en&tbm=pts&source=lnt&tbs=ptso:us'.format('John-Mudd')

In [3]: print url
http://www.google.com/search?tbo=p&q=ininventor:"John-Mudd"&hl=en&tbm=pts&source=lnt&tbs=ptso:us

In [4]: page=urllib2.urlopen(url) 
```

这会引发错误消息：

```
C:\Python27\lib\urllib2.pyc in urlopen(url, data, timeout)
    124     if _opener is None:
    125         _opener = build_opener()
--> 126     return _opener.open(url, data, timeout)
    127 
    128 def install_opener(opener):

C:\Python27\lib\urllib2.pyc in open(self, fullurl, data, timeout)
    404         for processor in self.process_response.get(protocol, []):
    405             meth = getattr(processor, meth_name)
--> 406             response = meth(req, response)
    407 
    408         return response

C:\Python27\lib\urllib2.pyc in http_response(self, request, response)
    517         if not (200 <= code < 300):
    518             response = self.parent.error(
--> 519                 'http', request, response, code, msg, hdrs)
    520 
    521         return response

C:\Python27\lib\urllib2.pyc in error(self, proto, *args)
    442         if http_err:
    443             args = (dict, 'default', 'http_error_default') + orig_args
--> 444             return self._call_chain(*args)
    445 
    446 # XXX probably also want an abstract factory that knows when it makes

C:\Python27\lib\urllib2.pyc in _call_chain(self, chain, kind, meth_name, *args)
    376             func = getattr(handler, meth_name)
    377 
--> 378             result = func(*args)
    379             if result is not None:
    380                 return result

C:\Python27\lib\urllib2.pyc in http_error_default(self, req, fp, code, msg, hdrs)
    525 class HTTPDefaultErrorHandler(BaseHandler):
    526     def http_error_default(self, req, fp, code, msg, hdrs):
--> 527         raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
    528 
    529 class HTTPRedirectHandler(BaseHandler):

HTTPError: HTTP Error 403: Forbidden 
```

不知道为什么我会得到这个。

编辑：

尝试它`urllib.openurl`让我更进一步：

```
In [1]: from bs4 import BeautifulSoup

In [2]: import urllib

In [3]: url='https://www.google.com/search?tbo=p&q=ininventor:"Alan-Mudd"&hl=en&tbm=pts&source=lnt&tbs=ptso:us'

In [4]: print url
https://www.google.com/search?tbo=p&q=ininventor:"John-Mudd"&hl=en&tbm=pts&source=lnt&tbs=ptso:us

In [5]: page=urllib.urlopen(url)

In [6]: txt=BeautifulSoup(page).get_text()

In [7]: txt
Out[7]: u'htmlError 403 (Forbidden)!!1*{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}403\. That\u2019s an error.Your client does not have permission to get URL /search?tbo=p&q=ininventor:%22John-Mudd%22&hl=en&tbm=pts&source=lnt&tbs=ptso:us from this server.  (Client IP address: 68.112.246.242)\nPlease see Google\'s Terms of Service posted at http://www.google.com/terms_of_service.html\nIf you believe that you have received this response in error, please report your problem. However, please make sure to take a look at our Terms of Service (http://www.google.com/terms_of_service.html). In your email, please send us the entire code displayed below.  Please also send us any information you may know about how you are performing your Google searches-- for example, "I\'m using the Opera browser on Linux to do searches from home.  My Internet access is through a dial-up account I have with the FooCorp ISP." or "I\'m using the Konqueror browser on Linux to search from my job at myFoo.com.  My machine\'s IP address is 10.20.30.40, but all of myFoo\'s web traffic goes through some kind of proxy server whose IP address is 10.11.12.13."  (If you don\'t know any information like this, that\'s OK.  But this kind of information can help us track down problems, so please tell us what you can.)We will use all this information to diagnose the problem, and we\'ll hopefully have you back up and searching with Google again quickly!\nPlease note that although we read all the email we receive, we are not always able to send a personal response to each and every email.  So don\'t despair if you don\'t hear back from us!\nAlso note that if you do not send us the entire code below, we will not be able to help you.Best wishes,The Google Team/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/+/\nDVEH8IymbCoo1dGrTzyT1iwqSLxjtFu0V4uU5kLrZ7OjChn7z\nLh5w5aLlP6v5piIZSC7_8OTKEepHBTROurNwIOVtc7sH0UTJL\n6mOs5-a-s4X63WfAUM064ZFl9JGwBR6VMKvdyMQOoYo7WtAGI\nbcVTsj7H3uWatFa4O9Zuxs7IcRQLOCiWwwhQs-s2AoAiFKlGN\nyXaTCO8GfhXxBt5JYCrTx-mkyrtqDqG_yvNu-fPYTf7V7jLNK\ntgwnPMBejraU_xbwSzoWNx2z7SfDmbPncbwSAMNnZ2CfiMhp8\ns1LQK90rg5hYAgbLmoVjMHMZ0WeRoay-XoB1oKQzff-nnkAEy\nuULx-MidjfVeuQfChSHMY3HUZ13vvzOsJZUjF-GH_-uymoPRG\n5RUBeodyOO3x9cJ-0mvHC_TyAwog10cRwaGKdS-DO92moJem0\nEoUKjmHuF4wXPcbGlSh_GXC9rFM07K6ZR4DxrV27iRaBZmen_\naw_l0qXlfK8quX7qAJT9W2EcrDRDYZdiNnBw7DdpLGeTCK76E\n0KCimiCY1uKC6kkdbGfFjQPK0R-_8DtBE5k7_MwgPR5O-sT0w\nf-ZH0vyEHSor4N8ZCogRMH_mR9L8hB2vrT5HWmYNJbLxS3SjB\nZHeL2vErN6jDFdpTFN7rPKU3-hnP-3zevYMUhHMFSPsi9ShZ7\nddrhqBhbdzifrwC4RgGbsqKTMMUERaoRJC9jj4jrNd14PlOpa\nztAa_82MQ1FhUswXO0EJ6dOHL6NknoBWOYN2-IFT_7cvAbxV6\nofoYL_y5WihMeZpDBPnpRyhjxjAefxNdzA5h9bE5GqV9ZoS92\n4q3Q81-0WK0kmloyf019Y5fI8Ln7ooJFzNpW5Fa7ezHhJ1Yxh\nHLNlD8dLFZogHDrtHsvWOzPWjYESdflsnJ5TjSijnt8ZGF_eT\ncZy50Pt4AFMsVUC3Dn4jkkzv-tok_1WgLKrEqpzzc55Hc4fOq\n9zdSYk52EH0R4__7fJ0w8ZfGmU4x1qGGDatZNpJRpSpLIJjXw\ntJPiGXllFPqQIFfWjIk3WubYKUJOHW37IyIJFjT-yVn6YgESl\nVe2nKpc1FBV1lSyhz5aW-QZtu_tCgPfG4gbfUCPYk54XBgNL4\n6a034xtD5a3rlRw1_ZnBCi7962YybZhX9MKXq5x6Au-y3Fqgg\nxzqicRlQ9UUso0fQ4JJRrLv57OuS2VvpaDCvN8pU1YQOSQWeX\niD1eqxMVoQ35ZaoCYlr-SBaRPuiwett9Fk6EZkvEWL1JqAiQq\n6k_PQ7hoISsoBSYSg1ztYV43JFfZLt1PE_geCPOb7XgUE5rVf\nQPHQX48cKjZmlrzYUyXS_BGSqZOPxZoj7ANivSn5vE88b74wH\ndoybElt_BVmigcY 
```

完整的错误消息显示在此图像中。

![错误消息的快照](../Images/bfde39c6b70a56527a5fb78e29ddb726.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:27:57.707

谷歌似乎正在阻止一些爬虫。

codingatty 指出当用户代理字符串为`'Python'`.
根据我的实验，以下用户代理字符串也不起作用（显然，此列表不完整）。

*   亚历克西博特
*   HTTrack
*   wget

由于`urllib2`的默认用户代理字符串是`'Python-urllib/2.7'`（在 Python 2.7 上），因此您需要将`User-Agent`标头设置为通用 Web 浏览器或假的。

例如：

```
import urllib2

url = 'http://www.google.com/search?tbo=p&q=ininventor:"John-Mudd"&hl=en&tbm=pts&source=lnt&tbs=ptso:us'
req = urllib2.Request(url, headers={'User-Agent' : "foobar"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:17:44.003

您应该使用`https`协议而不是`http`：

```
url = 'https://www.google.com/?tbm=pts#hl=en&safe=off&output=search&tbm=pts&sclient=psy-ab&q=John-Mudd&oq=John-Mudd&gs_l=hp.12..0i30j0i10i30j0i30j0i10i30.3253.6396.0.10231.9.8.0.1.1.0.81.406.8.8.0...0.0...1c.1.7.psy-ab.q-r2I_BIxrw&pbx=1&bav=on.2,or.r_qf.&bvm=bv.44011176,d.cGE&fp=ef59fd2c4e6518f1&biw=1162&bih=927' 
```

# c# - DynamicDataDisplay 图表水平字符串轴

> ID：15503228
> 
> 赞同：1
> 
> 时间：2013-03-19T15:10:51.743
> 
> 标签：c#, wpf, dynamic-data-display

我需要使用 DynamicDataDisplay3 绘制一些图表。一切正常，除了我找不到将 X 轴更改为字符串而不是日期或整数的方法。这就是我尝试这样做的方式，但我在 X 轴上只得到 1 个值：

```
int i = 0;
                using (MySqlDataReader reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        i++;
                        Analyze build = new Analyze();
                        build.id = i;
                        build.build = Convert.ToString(reader[0]);
                        builds.Add(build);
                        n1.Add(Convert.ToInt32(reader[1]));
                    }
                }

                var datesDataSource = new EnumerableDataSource<Analyze>(builds);
                datesDataSource.SetXMapping(x => x.id);
                var numberOpenDataSource = new EnumerableDataSource<int>(n1);
                numberOpenDataSource.SetYMapping(y => y);

                CompositeDataSource compositeDataSource1 = new CompositeDataSource(datesDataSource, numberOpenDataSource);
                chBuild.AddLineGraph(compositeDataSource1, new Pen(Brushes.Blue, 2), new CirclePointMarker { Size = 6, Fill = Brushes.Blue }, new PenDescription(Convert.ToString(cmbBuildVertical.SelectedItem)));
                chBuild.Viewport.FitToView(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:56:08.597

我制作了自己的 LabelProvider 来处理类似的事情。我想将我的 DateTime 标签覆盖为整数，以表示不同的东西。在你的情况下，你可以使用这样的东西：

```
public class StringLabelProvider : NumericLabelProviderBase {

    private List<String> m_Labels;
    public List<String> Labels {
        get { return m_Labels; }
        set { m_Labels = value; }
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="ToStringLabelProvider"/> class.
    /// </summary>
    public StringLabelProvider(List<String> labels) {                                                
        Labels = labels;                                    
    }

    public override UIElement[] CreateLabels(ITicksInfo<double> ticksInfo) {            

        var ticks = ticksInfo.Ticks;
        Init(ticks);            

        UIElement[] res = new UIElement[ticks.Length];
        LabelTickInfo<double> tickInfo = new LabelTickInfo<double> { Info = ticksInfo.Info };
        for (int i = 0; i < res.Length; i++) {
            tickInfo.Tick = ticks[i];
            tickInfo.Index = i;
            string labelText = "";

            labelText = Labels[Convert.ToInt32(tickInfo.Tick)];

            TextBlock label = (TextBlock)GetResourceFromPool();
            if (label == null) {
                label = new TextBlock();
            }

            label.Text = labelText;

            res[i] = label;

            ApplyCustomView(tickInfo, label);
        }
        return res;
    }
} 
```

您可以构建您的报价列表，并将其发送到您创建的 LabelProvider。像这样 ：

```
StringLabelProvider labelProvider = new StringLabelProvider(yourLabelList);
yourAxis.LabelProvider = labelProvider; 
```

# android - 在 Maven 中创建配置文件

> ID：15503230
> 
> 赞同：2
> 
> 时间：2013-03-19T15:10:53.663
> 
> 标签：android, maven, jenkins

在我目前正在进行的项目中，我们有 2 台服务器。分期和生产。

我们正在使用 maven 来构建项目。当一个新版本被推送到 github jenkins 然后构建一个新版本并将其推送到 hockey 应用程序，测试人员可以在哪里访问它。

我们想要做的是让詹金斯根据分支传递不同的参数，然后为应用程序创建一个配置文件。

我们想为服务器 url 执行此操作。因此，当我将版本推送到暂存时，它会生成配置文件，并且应用程序会从那里读取服务器 url。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:00:11.620

查看Sonatype 的 Maven By Example 一书中的 Maven[资源过滤](http://www.sonatype.com/books/mvnref-book/reference/resource-filtering.html)和[构建配置文件概念。](http://www.sonatype.com/books/mvnref-book/reference/profiles.html)

此外，您可能希望在 Jenkins 中为这些配置文件分配单独的工作。

# c# - 实体框架和 DataGridView 绑定

> ID：15503233
> 
> 赞同：1
> 
> 时间：2013-03-19T15:11:01.093
> 
> 标签：c#, entity-framework, datagridview

当从 Entity framework 3.5 检索到的数据且被查询的表具有外键时，我在将数据绑定到网格视图时遇到了问题。

通常当我使用 LINQTOSQL 将表绑定到 datagridview 并且表有外键时，去编辑网格视图的列并将列类型设置为组合框，然后给它一个单独的数据源并将 DisplayMember 设置为相同值作为外键的字段。这用于显示外键引用的表的值。

当我开始使用 EF 时，我注意到当您在 EDM 中包含一个具有外键的表并且您还在 EDM 中包含外键指向的表时，Visual Studio 会自动从实体中删除外键并创建一个两个实体之间的关系。

这给我带来了一个问题，因为我无法弄清楚如何在 datagridview 中显示外键的值，而无需遍历每条记录并“手动”设置组合框选定值的值......

任何人都知道如何做到这一点；我尝试在互联网上搜索几个小时，但没有运气......非常感谢任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:36:34.557

我设法找到了一种方法来做到这一点。

我首先删除了 EDM 中表（实体）之间创建的所有关联。

在此之后，我在实体中创建了与外键同名的标量属性，然后从 EDM 中的映射详细信息将外键字段映射到创建的新标量属性。

这对我有用，希望这可以帮助别人。

谢谢

# html - 必需的属性和验证组

> ID：15503235
> 
> 赞同：0
> 
> 时间：2013-03-19T15:11:07.763
> 
> 标签：html, validation

我在表单上有几个标有 required="required" 属性 (html5) 的文本框。有两个按钮。第一个按钮应该引起验证，第二个不应该。

ValidationGroup 在这种情况下不起作用。

如何解决这个问题？

UPD：使用 required 属性是要求，所以我无法避免。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:01:38.777

```
<input type=submit formnovalidate> 
```

提交表单而不进行验证。

# python - 是否有用于访问 Dynamics CRM 的 Python 库？

> ID：15503241
> 
> 赞同：3
> 
> 时间：2013-03-19T15:11:22.767
> 
> 标签：python, dynamics-crm-2011

我正在寻找一个库来使用 Python 中的 Dynamics CRM。我看到了这个关于 PHP 的答案：[microsoft dynamics crm 2011 and php](https://stackoverflow.com/questions/11993169/microsoft-dynamics-crm-2011-and-php)

我想知道Python中是否有类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:33:09.767

你的意思是这样的：

[http://pastebin.com/JevEm6j2](http://pastebin.com/JevEm6j2)

?

# php - IOS 登录 - 此代码是否正确/安全？如何检查用户是否已经登录？

> ID：15503242
> 
> 赞同：1
> 
> 时间：2013-03-19T15:11:23.003
> 
> 标签：php, iphone, ios, objective-c

我想制作一个具有 loginViewController 的 iphone 应用程序。此代码正确且安全吗？

```
-(IBAction)loginPressed:(id)sender{

NSString *usr = [[NSString alloc]init];
NSString *psw = [[NSString alloc]init];

usr = username.text;
psw = password.text;

NSLog(@"%@",usr);
NSLog(@"%@", psw);

NSString *URL = [NSString stringWithFormat:@"http://www.mywebsite.com/loginApp.php?user_name=%@&password=%@", usr, psw];
NSLog(@"%@", URL);
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:URL]];

NSString *Result = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

if ([Result isEqualToString:@"1"])
{
    NSLog(@"logged in");

}else if ([Result isEqualToString:@"2"]){

    UIAlertView *WrongCredential = [[UIAlertView alloc]initWithTitle:@"Loggin failed" message:@"sorry, check again your email and password" delegate:nil cancelButtonTitle:@"cancel" otherButtonTitles: nil];

    [WrongCredential show];
}
} 
```

登录应用程序.php

```
<?php 
 require_once 'functions/init.php';

if (isset($_GET['user_name'], $_GET['password'])){
$email = sanitize($_GET['user_name']);
$password = sanitize($_GET['password']);
$login = loginApp($email, $password);

if($login === true){
    echo json_encode(1);

                       }
    else if($login === false){
    echo json_encode(2);
    }
   }
   ?> 
```

如何检查用户是否已经登录？在php中我可能会设置一个会话/cookies（？），对吧？我如何使用 Objective C 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:17:20.973

```
NSString *usr = [[NSString alloc]init];
NSString *psw = [[NSString alloc]init];

usr = username.text;
psw = password.text; 
```

这段代码会造成内存泄漏。您不必分配字符串并在之后从标签中检索它，只需将其替换为：

```
NSString* usr = username.text;
NSString* psw = password.text; 
```

然后，您将密码明文传递给您的网站。您可以在非 HTTPS 协议和 GET 方法上进行此操作。

1.  在发送到网络之前加密密码
2.  使用 POST 方法进行登录
3.  如果可能，让您的网站使用 HTTPS 协议。

然后，在这段代码中：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:URL]]; 
```

您从主线程以同步模式调用网络。因此，当 Web 服务没有响应时，您的 UI 将被阻止。这不是一个好习惯。那么在异步模式下会更好。

如果你不熟悉 NSURLConnection 并且它是异步模式，我会推荐你[​​ AFNetworking](http://www.afnetworking.com)，目前最好的 REST 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:22:06.180

为了保存用户名和密码，我个人建议使用 Keychain，因为它们在安全性方面比 NSUserDefault 更安全，因为 Keychain 以加密形式存储数据，而 NSUserDefault 以纯文本形式存储。你可以看看：[https ://github.com/carlbrown/PDKeychainBindingsController](https://github.com/carlbrown/PDKeychainBindingsController)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:14:42.340

维护一个标志或变量（比如说 bool - isUserLoggedIn）。默认值为 NO 和

```
if ([Result isEqualToString:@"1"])
{
    NSLog(@"logged in");

    isUserLoggedIn = YES;

}else if ([Result isEqualToString:@"2"]){

    UIAlertView *WrongCredential = [[UIAlertView alloc]initWithTitle:@"Loggin failed" message:@"sorry, check again your email and password" delegate:nil cancelButtonTitle:@"cancel" otherButtonTitles: nil];

    [WrongCredential show];

    isUserLoggedIn = NO;
} 
```

现在您可以随时使用此标志值检查 (isUserLoggedIn)

希望这是您正在寻找的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T15:18:11.727

如果您想在应用程序启动之间保存用户状态，您可能需要在`NSUserDefaults`.

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"UserLogged"]; 
```

比你可以检查这个标志

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"UserLogged"]) {} 
```

或者您可以保存用户名和密码。

您还可以查看[parse.com](https://parse.com)以了解基本的登录/登录功能。

# java - 使用没有数据 URL 的数据源

> ID：15503244
> 
> 赞同：0
> 
> 时间：2013-03-19T15:11:24.977
> 
> 标签：java, json, gwt, datasource, smartgwt

我有一个遗留情况，而软件当前将返回的响应转换为内部`JSON`格式化的字符串。是否可以出于只读目的`DataSource`对格式化的字符串进行操作？`JSON`将`DataSource`用于填充`ListGrid`. 如何将数据 URL 设置为内存中的字符串？手动将数据添加到`DataSource`using会更好`addData()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:43:16.023

我确定我能够使用 SmartGWT 实用程序类 JSON 将我的 JSON 解码为自定义的`JavaScriptObject`.

```
import com.google.gwt.core.client.JavaScriptObject;

public class MyStatusResults extends JavaScriptObject
{

   protected MyStatusResults()
   {
      // Intentionally empty
   }

   /**
    * Returns the total number of results for this search.
    *
    * @return the total number of results for this search.
    */
   public final native int getTotalResults() /*-{
   return this.total;
   }-*/;

   /**
    * Returns the entry results of the search.
    *
    * @return the entry results of the search.
    */
   public final native MyStatus[] getResults() /*-{
   return this.entries;
   }-*/;
} 
```

# visual-studio-2010 - 从源代码管理资源管理器 VS 解决方案资源管理器（Visual Studio 和 TFS）获取最新版本

> ID：15503247
> 
> 赞同：0
> 
> 时间：2013-03-19T15:11:31.000
> 
> 标签：visual-studio-2010, tfs, getlatest

从 Visual Studio 中的源代码管理资源管理器和解决方案资源管理器获取最新版本有何不同。有时当我通过解决方案资源管理器获得最新版本时，它并没有获得所有文件的最新版本。任何有用的信息都会很有帮助。

# java - 如何比较 sqlite 列？

> ID：15503251
> 
> 赞同：0
> 
> 时间：2013-03-19T15:11:34.087
> 
> 标签：java, android, sqlite

我在导入的预填充 sqlite 数据库中有一个表，以及 A1、B1、A2、B2、A3、B3 行。我随机将它们的内容设置为一些按钮。现在我希望当用户单击一对按钮时，例如按钮 2 和之后的按钮 5，比较这些按钮的内容是否匹配，即我希望 A1 和 B1 成对，A2 和 B2 等等。所以我想比较他们的列是否匹配。怎么做？到目前为止，这是我的代码：

```
public class Game extends Activity implements View.OnClickListener{

LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>();

private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    }

    final OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {

        }
        };

    Button a1,a2,a3,a4,b1,b2,b3,b4;

        @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.spojnice);

            a1 = (Button) findViewById(R.id.bA1);
        a2 = (Button) findViewById(R.id.bA2);
        a3 = (Button) findViewById(R.id.bA3);
        a4 = (Button) findViewById(R.id.bA4);
            b1 = (Button) findViewById(R.id.bB1);
        b2 = (Button) findViewById(R.id.bB2);
        b3 = (Button) findViewById(R.id.bB3);
        b4 = (Button) findViewById(R.id.bB4);

nextQuestion();
        }

private void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{ 

            mDbHelper.open();

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            List<String> labelsA = new ArrayList<String>();
            List<String> labelsB = new ArrayList<String>();

            labelsA.add(c.getString(2));
            labelsA.add(c.getString(4));
            labelsA.add(c.getString(6));
            labelsA.add(c.getString(8));

            labelsB.add(c.getString(3));
            labelsB.add(c.getString(5));
            labelsB.add(c.getString(7));
            labelsB.add(c.getString(9));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            a1.setText(labelsA.get(0));
            a1.setTag(labelsA.get(0));
            a1.setOnClickListener(clickListener);

            a2.setText(labelsA.get(1));
            a2.setOnClickListener(clickListener);

            a3.setText(labelsA.get(2));
            a3.setOnClickListener(clickListener);

            b1.setText(labelsB.get(0));
            b1.setOnClickListener(clickListener);

            b2.setText(labelsB.get(1));
            b2.setOnClickListener(clickListener);

            b3.setText(labelsB.get(2));
            b3.setOnClickListener(clickListener);

    }
        finally{ 
            mDbHelper.close();
        }

} 
```

这是我的数据库助手：

```
public class DataBaseHelper extends SQLiteOpenHelper
{
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = "/data/data/rs.androidaplikacije.spojnice/databases/"; 
private static String DB_NAME ="pitanja.sqlite";// Database name
private static SQLiteDatabase mDataBase; 
private final Context mContext;
private static final String KEY_ID = "_ID";
private static final String KEY_PITANJE = "PITANJE";
private static final String TABLE_NAME = "tblPitanja";

public DataBaseHelper(Context mojContext) 
{
    super(mojContext, DB_NAME, null, 1);// 1? its Database Version
    DB_PATH = mojContext.getApplicationInfo().dataDir + "/databases/";
    this.mContext = mojContext;
}

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }
    /*Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }
    */

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }
    @Override
    public void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        Log.w("DataBaseHelper", "Upgrading database!!!!!");
          onCreate(arg0);

    }

} 
```

和我的测试适配器：

```
public class TestAdapter 
{
    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public TestAdapter(Context context) 
    {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public TestAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public TestAdapter open() throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDbHelper.close();
    }

     public Cursor getTestData(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanja WHERE 1 = 1 " + whereClause + " ORDER BY RANDOM() LIMIT 1";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:27:03.457

在它们已经在按钮上之后，您不需要再次从数据库中检索值。

一个好的方法是在您开始时为每个按钮设置标签。为匹配的按钮设置相同的标签，并在单击时验证标签是否匹配。

按照您的结构，您可以从数据库中检索标签的值，对于`labelsA`and `labelsB`，它们可能是一个 Collection

```
class MyStruct {
    private String label;
    private String tag;
} 
```

因此，初始化然后像

```
ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>(); 
```

要添加每个值，请执行

```
// labelForButton1 and tagForButton1And
labelsA.add(new MyStruct("labelForButton1", "tagForButton1And2"); // this tag should be the same to button that matches
labelsB.add(new MyStruct("labelForButton2", "tagForButton1And2"); 

Collections.shuffle(labelsA);
Collections.shuffle(labelsB);

a1.setText(labelsA.get(0).getLabel());
a1.setTag(labelsA.get(0).getTag());

// and so on to a2, b2 etc 
```

在侦听器中，您可以验证每个按钮的标记是否匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:32:49.687

所以让我们说用户首先选择了西尔维斯特......然后是史泰龙，你想确定它是否在数据库中吗？

[http://sqlfiddle.com/#!7/f28af/1](http://sqlfiddle.com/#!7/f28af/1)

因此，您可以做的是，当用户单击第一个按钮时，获取其值并将其存储在变量 var1 = 'Sylvester' 中。在第二次单击时，将该值存储在 var2 = 'Stallone' 中。现在您所要做的就是执行以下行并查看计数是否 > 0。

```
select count(*) from my_table where col1 = "Sylvester" and col2 = "stallone" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:57:25.310

好的，这是我到目前为止所做的。

```
 class MyStruct {
       public MyStruct (String lab, String t){
        label = lab;
        tag = t;
    }
       private String label;
       private String tag;
       }

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);   //full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.spojnice);

        a1 = (Button) findViewById(R.id.bA1);
        a2 = (Button) findViewById(R.id.bA2);
        a3 = (Button) findViewById(R.id.bA3);
        a4 = (Button) findViewById(R.id.bA4);
        a5 = (Button) findViewById(R.id.bA5);
        a6 = (Button) findViewById(R.id.bA6);
        a7 = (Button) findViewById(R.id.bA7);
        a8 = (Button) findViewById(R.id.bA8);
        b1 = (Button) findViewById(R.id.bB1);
        b2 = (Button) findViewById(R.id.bB2);
        b3 = (Button) findViewById(R.id.bB3);
        b4 = (Button) findViewById(R.id.bB4);
        b5 = (Button) findViewById(R.id.bB5);
        b6 = (Button) findViewById(R.id.bB6);
        b7 = (Button) findViewById(R.id.bB7);
        b8 = (Button) findViewById(R.id.bB8);
        pitanje = (TextView) findViewById(R.id.tvPitanje);

        nextQuestion();

        }

    public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{

            mDbHelper.open();

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
            ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>();

            labelsA.add(new MyStruct(c.getString(2), "1")); // this tag should be the same to button that matches
            labelsB.add(new MyStruct(c.getString(3), "1"));
            labelsA.add(new MyStruct(c.getString(4), "2"));
            labelsB.add(new MyStruct(c.getString(5), "2"));
            labelsA.add(new MyStruct(c.getString(6), "3"));
            labelsB.add(new MyStruct(c.getString(7), "3"));
            labelsA.add(new MyStruct(c.getString(8), "4"));
            labelsB.add(new MyStruct(c.getString(9), "4"));
            labelsA.add(new MyStruct(c.getString(10), "5"));
            labelsB.add(new MyStruct(c.getString(11), "5"));
            labelsA.add(new MyStruct(c.getString(12), "6"));
            labelsB.add(new MyStruct(c.getString(13), "6"));
            labelsA.add(new MyStruct(c.getString(14), "7"));
            labelsB.add(new MyStruct(c.getString(15), "7"));
            labelsA.add(new MyStruct(c.getString(16), "8"));
            labelsB.add(new MyStruct(c.getString(17), "8"));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            pitanje.setText(c.getString(1));

            a1.setText(labelsA.get(0).label);
            a1.setTag(labelsA.get(0).tag);
            a1.setOnClickListener(clickListener);
            b1.setText(labelsB.get(0).label);
            b1.setTag(labelsB.get(0).tag);
            b1.setOnClickListener(clickListener);
            a2.setText(labelsA.get(1).label);
            a2.setTag(labelsA.get(1).tag);
            a2.setOnClickListener(clickListener);
            b2.setText(labelsB.get(1).label);
            b2.setTag(labelsB.get(1).tag);
            b2.setOnClickListener(clickListener);
            a3.setText(labelsA.get(2).label);
            a3.setTag(labelsA.get(2).tag);
            a3.setOnClickListener(clickListener);
            b3.setText(labelsB.get(2).label);
            b3.setTag(labelsB.get(2).tag);
            b3.setOnClickListener(clickListener);
            a4.setText(labelsA.get(3).label);
            a4.setTag(labelsA.get(3).tag);
            a4.setOnClickListener(clickListener);
            b4.setText(labelsB.get(3).label);
            b4.setTag(labelsB.get(3).tag);
            b4.setOnClickListener(clickListener);
            a5.setText(labelsA.get(4).label);
            a5.setTag(labelsA.get(4).tag);
            a5.setOnClickListener(clickListener);
            b5.setText(labelsB.get(4).label);
            b5.setTag(labelsB.get(4).tag);
            b5.setOnClickListener(clickListener);
            a6.setText(labelsA.get(5).label);
            a6.setTag(labelsA.get(5).tag);
            a6.setOnClickListener(clickListener);
            b6.setText(labelsB.get(5).label);
            b6.setTag(labelsB.get(5).tag);
            b6.setOnClickListener(clickListener);
            a7.setText(labelsA.get(6).label);
            a7.setTag(labelsA.get(6).tag);
            a7.setOnClickListener(clickListener);
            b7.setText(labelsB.get(6).label);
            b7.setTag(labelsB.get(6).tag);
            b7.setOnClickListener(clickListener);
            a8.setText(labelsA.get(7).label);
            a8.setTag(labelsA.get(7).tag);
            a8.setOnClickListener(clickListener);
            b8.setText(labelsB.get(7).label);
            b8.setTag(labelsB.get(7).tag);
            b8.setOnClickListener(clickListener);

        }

        finally{  
            mDbHelper.close();
        }
    } 
```

在我班的顶部，我制作了 onClickListener，但我不知道如何继续。当我按下左侧按钮之一时，我不知道如何做到这一点，直到我按下右侧按钮。如果我按左键，然后再按左键怎么办？在这种情况下，我想忽略之前按下的左键并从最后按下的左键继续。

```
final OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {

            MyStruct ms = (MyStruct) v.getTag();

            }
     }; 
```

# eclipse - 我无法通过 Android 调用 Web 服务

> ID：15503252
> 
> 赞同：0
> 
> 时间：2013-03-19T15:11:34.313
> 
> 标签：eclipse, web-services, ksoap2, logcat

我有来自 logcat 的错误：

```
03-19 16:57:28.715: E/dalvikvm(11924): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method com.project.newproject.MainActivity$1.onClick
03-19 16:57:28.715: W/dalvikvm(11924): VFY: unable to resolve new-instance 554 (Lorg/ksoap2/serialization/SoapObject;) in Lcom/project/newproject/MainActivity$1;
03-19 16:57:28.715: D/dalvikvm(11924): VFY: replacing opcode 0x22 at 0x0000
03-19 16:57:28.715: D/dalvikvm(11924): DexOpt: unable to opt direct call 0x0de9 at 0x06 in Lcom/project/newproject/MainActivity$1;.onClick
03-19 16:57:28.715: D/dalvikvm(11924): DexOpt: unable to opt direct call 0x0deb at 0x0d in Lcom/project/newproject/MainActivity$1;.onClick
03-19 16:57:28.715: I/dalvikvm(11924): DexOpt: unable to optimize instance field ref 0x034d at 0x11 in Lcom/project/newproject/MainActivity$1;.onClick
03-19 16:57:28.715: D/dalvikvm(11924): DexOpt: unable to opt direct call 0x0dee at 0x1a in Lcom/project/newproject/MainActivity$1;.onClick
03-19 16:57:28.790: D/CLIPBOARD(11924): Hide Clipboard dialog at Starting input: finished by someone else... !
03-19 16:57:31.220: D/AndroidRuntime(11924): Shutting down VM
03-19 16:57:31.220: W/dalvikvm(11924): threadid=1: thread exiting with uncaught exception (group=0x40c2f1f8)
03-19 16:57:31.220: E/AndroidRuntime(11924): FATAL EXCEPTION: main
03-19 16:57:31.220: E/AndroidRuntime(11924): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
03-19 16:57:31.220: E/AndroidRuntime(11924):    at com.project.newproject.MainActivity$1.onClick(MainActivity.java:34)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at android.view.View.performClick(View.java:3591)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at android.view.View$PerformClick.run(View.java:14263)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at android.os.Handler.handleCallback(Handler.java:605)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at android.os.Looper.loop(Looper.java:137)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at android.app.ActivityThread.main(ActivityThread.java:4507)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at java.lang.reflect.Method.invokeNative(Native Method)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at java.lang.reflect.Method.invoke(Method.java:511)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
03-19 16:57:31.220: E/AndroidRuntime(11924):    at dalvik.system.NativeStart.main(Native Method)
03-19 16:58:54.010: I/Process(11924): Sending signal. PID: 11924 SIG: 9 
```

尽管我无法正确运行它，但我已经尝试了所有我知道的东西。最后，我完全复制了那里的代码来测试我的 Web 服务；[http://mustafa-yildirim.blogspot.com/2010/09/android-net-web-servis-baglants.html](http://mustafa-yildirim.blogspot.com/2010/09/android-net-web-servis-baglants.html)下面是我的代码。

```
package com.project.newproject;
import java.io.IOException;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import org.ksoap2.*;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;
import org.xmlpull.v1.XmlPullParserException;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */

    private static final String SOAP_ACTION = "http://tempuri.org/HelloWorld";
    private static final String METHOD_NAME = "HelloWorld";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://mysite/service1.asmx";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Button btn_goster = (Button) findViewById(R.id.btn_goster);
        final EditText edt_goster = (EditText) findViewById(R.id.edt_goster);

        btn_goster.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                envelope.dotNet = true;
                envelope.setOutputSoapObject(request);

                AndroidHttpTransport httpTransport = new AndroidHttpTransport(URL);

                SoapPrimitive result = null;
                try {
                    httpTransport.call(SOAP_ACTION, envelope);
                    result = (SoapPrimitive) envelope.getResponse();
                    edt_goster.setText(result.toString());
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    edt_goster.setText(e.getMessage());
                } catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    edt_goster.setText(e.getMessage());
                }

            }

        });

    } 
```

一切都一样，没有错误，但是当我运行 AVD 或我的手机时，会显示一条名为“新项目已停止”的消息。我每次都得到它:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:10:22.920

在eclipse中右键单击项目，选择构建工具>添加外部jar文件并选择ksoap2 jar文件。另外你确定你已经下载了 android 的版本（不是 j2me 和其他平台的）？您应该从 code.google.com 下载它

# javascript - 如何通过单个列表元素将表头排序应用于 div？

> ID：15503253
> 
> 赞同：2
> 
> 时间：2013-03-19T15:11:34.743
> 
> 标签：javascript, jquery

`<div>`我正在从外部查询动态创建一系列s 。使用 Javascript`<div>`创建并填充单独的列表元素。结构类似于：

```
<div class="container" id="1">
    <li class="date"> </li>
    <li class="name"> </li>
<div> 
```

搜索框在 keyUp 上运行 jQuery livefilter，隐藏`<div>`与搜索不匹配的 s。

然后，我希望能够通过单击处理（日期、名称等）中各个`<li>`元素的表头来对可见的 div 进行排序。`<div>`我尝试使用 tablesorter 并将每个`<li>`放入 a`<td>`但表头最终位于身体下方并且不起作用。

**如何仅对当前可见的列表元素应用排序但对整个 div 进行排序？**

![表格示意图](../Images/5c0f7f5ed6e588f0137de45b154589d3.png)

[带有非操作标头的实时过滤器的 JSFiddle。](http://jsfiddle.net/F4BPG/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:32:59.993

每当遇到这种需要根据数据变化进行渲染的情况时，请考虑将数据和视图层解耦。因为您的视图必须根据数据更改而更改。您可以自己实现这种逻辑，也可以使用 Angular.js、Backbone.js、Ember.js 等框架来尝试解决此类问题。好吧，在您的情况下，有几种方法可以解决您的问题，但就像我之前所说的那样，解耦会更好（我认为）。你可以做类似的事情

修改后的 HTML（便于数据提取）。您可以保留原始 HTML，但必须更改提取数据的逻辑。

```
Sort data by:
<a href="#">Date</a>&nbsp;<a href="#">Name</a>
<br />
<br />
<form id="live-search" action="" class="styled" method="post">
<fieldset>
    <input type="text" class="text-input" id="filter" value="Date" />
    <br />
    <input type="text" class="text-input" id="filter2" value="Name" />
    <br /> <span id="filter-count"></span>

</fieldset>
</form>
<ul class="records2" id="records">
<div data-record='{"year": "2012","name":"Joe"}'>
    <li>2012</li>
    <li>Joe</li>     
</div>
<br />
<div data-record='{"year": "2013","name":"Dave"}'>
    <li>2013</li>
    <li>Dave</li>

</div>
<br />
<div data-record='{"year":"2013","name":"Adam Brown"}'>
    <li>2013</li>
    <li>Adam Brown</li>  
</div> 
```

```
function sortArray(arr, prop, asc) 
{
    arr = arr.sort(function(a, b) 
    {
        if (asc)
        {
            return (a[prop] > b[prop]);
        }
        else 
        {
            return (b[prop] > a[prop]);
        }
    });
    return arr;
}

$(document).ready(function () 
{
    var recordDiv = $('#records'), dataDivs = $('#records div'), data = [], sortLink = $('a');
    for (var i = 0, len = dataDivs.length; i < len; i++) 
    {
        var t = $(dataDivs[i]).attr('data-record');
        t = $.parseJSON(t);
        data.push(t);
    }
    sortLink.click(function()
    {
        var sortBy = this.innerHTML.toLowerCase();
        data = sortArray(data, sortBy, true);
        //Now render the element inside #record DIV as per sorted data
        return false;
    });
}); 
```

让我们知道怎么回事。:)

# .net - 按角度去歪斜图像

> ID：15503260
> 
> 赞同：0
> 
> 时间：2013-03-19T15:11:57.280
> 
> 标签：.net, vb.net, bitmap, rotation, angle

我花了几个小时研究这个，我已经取得了一些进展，但仍然需要一些帮助。

我知道有库可以做到这一点，但由于我的场景非常简单，我宁愿拥有自己的代码。我正在用支票扫描仪扫描支票，但有些图像歪了，需要去歪斜；

这是我的代码：

```
Function DeskewImage(Original As Bitmap) As Bitmap
    Dim w = Original.Width
    Dim h = Original.Height
    'i go over the first 200 rows of pixels and for each row i get the first black pixel. this should be enough to get me the angle
    Dim FirstBlacks As New List(Of Point)
    For row = 0 To 200
        For col = 0 To w - 1
            Dim p = Original.GetPixel(col, row)
            Dim rl = CInt(p.R) + p.G + p.B
            If rl < 760 Then
                FirstBlacks.Add(New Point(col, row))
                Exit For
            End If
        Next
    Next
    'here i try to get the angle, im not sure its correct though
    Dim xyAvg = FirstBlacks.Select(Function(pnt) pnt.X * pnt.Y).Average
    Dim xAvg = FirstBlacks.Select(Function(pnt) pnt.X).Average
    Dim yAvg = FirstBlacks.Select(Function(pnt) pnt.Y).Average
    Dim xVar = FirstBlacks.Select(Function(pnt) pnt.X).Variance
    Dim coefficient = (xyAvg - xAvg * yAvg) / xVar
    Dim LeftTop = -20
    'now id like utilize the angle to skew
    Dim destinationPoints = {New Point(0, LeftTop), New Point(w, 0), New Point(0, h)}
    Dim ret = New Bitmap(w, h)
    Dim g = Graphics.FromImage(ret)
    g.DrawImage(Original, destinationPoints)
    ret.Save("D:\aa.jpg")
    Return Original
End Function 
```

我有两个问题：

1.  我的系数正确吗？这是基于这里的一篇文章 [http://www.experts-exchange.com/Microsoft/Development/MS_Access/A_2799-Simple-Linear-Regression-in-MS-Access.html](http://www.experts-exchange.com/Microsoft/Development/MS_Access/A_2799-Simple-Linear-Regression-in-MS-Access.html) 但我不确定我是否正确移植了它
2.  我如何利用系数在.net 中倾斜图像？我能找到的唯一功能需要目的地点，我不知道如何找到

我也觉得很奇怪，我需要在绘制之前指定返回图像的高度和宽度。我应该如何知道偏斜之前的尺寸？

**编辑**

感谢 Pieter Geerkens，我将代码更改为旋转而不是倾斜

现在问题仍然存在于算法上

首先是一个示例图像![样本](../Images/63e671989969bba9f0d77b6328d4c763.png)

我上面的算法为此示例图片返回了大约 -0.33 的结果。实际上我需要大约+4度的旋转。那么算法错了吗？还是需要将结果转换为度数？有任何想法吗？

赞赏地

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:19:26.270

尝试更改destinationPoints 的分配，如下所示：

```
Dim dh = coefficient * h
Dim dw = coefficient * w
Dim destinationPoints = { 
  New Point(0, LeftTop), 
  New Point(w,-dw), 
  New Point(dh, h) 
} 
```

**根据以下 OP 说明进行更新：**

对于小角度 theta（以弧度测量），theta ~ sin(theta) ~ tan(theta)。因此，旋转角度（以度为单位）约为 l (180/PI) * 系数 * w / w = (180/PI) * 系数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:34:23.660

好的。感谢[http://www.alcula.com/calculators/statistics/linear-regression/](http://www.alcula.com/calculators/statistics/linear-regression/)我能够调试我的算法结果。这个工具帮助我发现我实际上是在混淆 xs 和 ys。正确的代码如下。

我也不得不忽略实际上是左边框而不是上边框的低 x 值。

```
Dim ret As Double?
    Dim w = Original.Width
    Dim h = Original.Height
    Dim FirstBlacks = New List(Of Point)
    Dim MaxHeight = h - 1
    Dim done = False
    For y = 0 To MaxHeight
        If done Then Exit For
        For x = 0 To w - 1
            Dim p = Original.GetPixel(x, y)
            Dim rl = p.GetBrightness
            If rl < 1 Then
                If x < 20 Then
                    done = True
                Else
                    FirstBlacks.Add(New Point(x, y))
                End If
                Exit For
            End If
        Next
    Next
    If FirstBlacks.Count > 2 Then
        Dim xyAvg = FirstBlacks.Select(Function(pnt) pnt.X * pnt.Y).Average
        Dim xAvg = FirstBlacks.Select(Function(pnt) pnt.X).Average
        Dim yAvg = FirstBlacks.Select(Function(pnt) pnt.Y).Average
        Dim xVar = FirstBlacks.Select(Function(pnt) pnt.X).Variance
        ret = (xyAvg - xAvg * yAvg) / xVar
    End If
    Return ret 
```

感谢 Pieter-Geerkens 在此过程中提供的所有帮助

# android - Maps V2 InfoWindow 中的动态内容

> ID：15503266
> 
> 赞同：17
> 
> 时间：2013-03-19T15:12:10.337
> 
> 标签：android, google-maps, infowindow, universal-image-loader

我想在 Maps V2 片段中的标记上显示 InfoWindow。问题是，我想显示使用[Universal Image Downloader](https://github.com/nostra13/Android-Universal-Image-Loader)从 Web 动态加载的位图。

这是我的 InfoWindowAdapter：

```
class MyInfoWindowAdapter implements InfoWindowAdapter {

    private final View v;

    MyInfoWindowAdapter() {
        v = getLayoutInflater().inflate(R.layout.infowindow_map,
                null);
    }

    @Override
    public View getInfoContents(Marker marker) {

        Item i = items.get(marker.getId());

        TextView tv1 = (TextView) v.findViewById(R.id.textView1);
        ImageView iv = (ImageView) v.findViewById(R.id.imageView1);
        tv1.setText(i.getTitle());

        DisplayImageOptions options = new DisplayImageOptions.Builder()
                .delayBeforeLoading(5000).build();

        imageLoader.getMemoryCache(); 

        imageLoader.displayImage(i.getThumbnailUrl(), iv, options,
                new ImageLoadingListener() {

                    @Override
                    public void onLoadingStarted(String imageUri, View view) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onLoadingFailed(String imageUri, View view,
                            FailReason failReason) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onLoadingComplete(String imageUri,
                            View view, Bitmap loadedImage) {
                        Log.d("MAP", "Image loaded " + imageUri);

                    }

                    @Override
                    public void onLoadingCancelled(String imageUri,
                            View view) {
                        // TODO Auto-generated method stub

                    }
    });

        return v;
    }

    @Override
    public View getInfoWindow(Marker marker) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

我有两个问题：

正如我们所[知道](https://developers.google.com/maps/documentation/android/marker#info_window_click_events)的`InfoWindow`那样，它被绘制并且后来对它的更改（在我的情况下是新`BitMap`的`ImageView`）没有显示/`InfoWindow`没有被更新。完成后如何“通知”InfoWindow 重新加载自身`imageLoader`？当我把

```
marker.showInfoWindow() 
```

进入`onLoadingComplete`它创建了一个无限循环，标记将弹出，开始加载图像，弹出自身等。

我的第二个问题是，在慢速网络连接上（模拟代码中的 5000 毫秒延迟），无论该图像是否属于该/ ， `ImageView`in将始终显示最后加载的图像。`InfoWindow``ImageWindow``Marker`

关于如何正确实施这一点的任何建议？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-20T00:16:43.393

当您收到模型更新时，您应该在`Marker.showInfoWindow()`当前显示信息窗口的标记上进行操作。

所以你需要做3件事：

1.  创建模型而不是将所有下载放入`InfoWindowAdapter`
2.  保存对 Marker的引用（调用它`markerShowingInfoWindow`）
    `getInfoContents(Marker marker)`
3.  当模型通知您下载完成时调用

```
if (markerShowingInfoWindow != null && markerShowingInfoWindow.isInfoWindowShown()) {
    markerShowingInfoWindow.showInfoWindow();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-27T14:16:39.747

我做了类似的事情。这仍然给了我经济衰退的错误

```
if (markerShowingInfoWindow != null && markerShowingInfoWindow.isShowingInfoWindow()) {
    markerShowingInfoWindow.showInfoWindow();
} 
```

所以我所做的只是关闭窗口并再次打开它

```
if (markerShowingInfoWindow != null && markerShowingInfoWindow.isShowingInfoWindow()) {

    markerShowingInfoWindow.hideInfoWindow();
    markerShowingInfoWindow.showInfoWindow();

} 
```

对于相同答案的更详细的版本，这里是我原来的灵魂[链接](https://stackoverflow.com/a/22690182/1356819)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-25T07:08:40.620

我也面临同样的情况并使用以下代码解决。

在我的适配器中，我添加了公共变量

```
public class MarkerInfoWindowAdapter implements GoogleMap.InfoWindowAdapter {

    public String ShopName="";   

    -------
    -------

     @Override
    public View getInfoWindow(Marker arg0) {

         View v;
         v = mInflater.inflate(R.layout.info_window, null);

         TextView shop= (TextView) v.findViewById(R.id.tv_shop);

         shop.setText(ShopName);

    }
} 
```

并在我的主要活动中添加了 MarkerClickListener

```
----

MarkerInfoWindowAdapter mMarkerInfoWindowAdapter;

----
----

@Override
public void onMapReady(GoogleMap googleMap) {

    mMarkerInfoWindowAdapter = new MarkerInfoWindowAdapter(getApplicationContext());

    mMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {

        @Override
        public boolean onMarkerClick(final Marker arg0) {

            mMarkerInfoWindowAdapter.ShopName= "my dynamic text";

            arg0.showInfoWindow();

            return true;
        }
    }

    mMap.setInfoWindowAdapter(mMarkerInfoWindowAdapter);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T18:36:32.410

我已经使用了本文中的代码，并且效果很好。

[http://androidfreakers.blogspot.de/2013/08/display-custom-info-window-with.html](http://androidfreakers.blogspot.de/2013/08/display-custom-info-window-with.html)

# jquery - jquery-mobile listview在pagecreate之后将拆分按钮插入DOM

> ID：15503277
> 
> 赞同：0
> 
> 时间：2013-03-19T15:12:33.747
> 
> 标签：jquery, listview, jquery-mobile, split-button

我找不到这个问题的答案，我已经阅读了 JQM 文档和 stackoverflow 问题。

我有一个`#lista-principal`需要完全相同的拆分按钮的列表视图

拆分按钮打开一个弹出窗口，让用户选择要插入的类。插入通过 jquery 使用`$('a.ui-li-link-alt').on('click'...`

这里是 JSBin： http: [//jsbin.com/akerav/15/edit](http://jsbin.com/akerav/15/edit) （点击标题触发问题）

由于拆分按钮都是相等的，我希望以编程方式插入。我找不到这样做的方法，因此 JQM 会刷新拆分按钮。

**在 JQM 页面中以编程方式插入拆分按钮的正确方法是什么？**

出于测试目的，我将有问题的代码放在了这个点击函数中：

```
$('div[data-role="header"]').click( function() {

       var split_button = $('<a></a>') 
         .attr({
             'data-rel':'popup', 
             'data-position-to':'origin', 
             'data-transition':'slidedown'
          })
         .html('Vistoria');

       var newli = $('ul#lista-principal li').clone();
       newli.find('a').append(split_button);
       $('ul#lista-principal li').remove();
       $('ul#lista-principal').append(newli);
       newli.trigger('create');
       $('ul#lista-principal').listview('refresh');
    }); 
```

**3 月 19 日的调查结果（这是暮光区，欢迎更正）**

*   如果您将第二个放在第一个里面，看起来拆分按钮不会以编程方式得到增强`<a>`（尽管如果您将它设置在纯 HTML 上它可以工作）；
*   如果你需要修改一堆`<li>s`已经在 HTML 中的，你最好继续这样做，`pagebeforecreate`因为`listview('refresh')`这不会影响已经增强的 itens，你应该重做整个列表以使用 listview('create');
*   这几乎是我一直在寻找的：http: [//jsfiddle.net/ffabreti/Q4SCt/1/](http://jsfiddle.net/ffabreti/Q4SCt/1/)
    （基于[http://jsfiddle.net/Gajotres/LrAyE/](http://jsfiddle.net/Gajotres/LrAyE/)）

* * *

**对问题的回答** 最后找到了一种在pagecreate之后插入split-buttons的方法：

*   使用原始`pagecreate`列表内容设置全局变量
*   挂钩事件以更改列表（例如，`$("div[data-role='header']").on('click'...`）
*   克隆您的原始列表并进行编辑
*   用编辑后的内容替换您的列表内容
*   刷新列表视图组件
*   你可以在这里看到完整的代码：http: [//jsfiddle.net/ffabreti/Hyams/11/](http://jsfiddle.net/ffabreti/Hyams/11/)

# layout - 使用带有流星路由器的布局

> ID：15503279
> 
> 赞同：2
> 
> 时间：2013-03-19T15:12:37.487
> 
> 标签：layout, meteor

从这里的讨论中，

[允许传入变量到 {{renderPages}} 助手](https://github.com/tmeasday/meteor-router/commit/f83b808f4a6f7c683a551345962cfa448125b7c4#commitcomment-2820919)

我正在尝试在现有 {{renderPage}} 中显示模板；

我的用例：我有一个非常简单的高级正文模板

```
<template name="body">
    {{> header}}
    {{> notifications}}

    <div class="content" id="content">
        <div id="main-content">

            {{{renderPage}}}

        </div>
    </div>
    {{> footer}}

</template> 
```

如您所见，我的主要内容具有`{{renderPage}}`. 这很好用，当我设置路线时：

```
 '/home': 'home' 
```

该路由找到模板“home”并将 renderPage 替换为该模板。我现在想扩展它，看看是否可以将路由模板放置在特定的 div 中。

例如，在我的 home.html 模板中：

```
<template name="home">
        {{#if isAdmin}}
                <h1>student</h1>
        {{/if}}
        <div id="inner_home">
                  {{renderPage innerHome}}
         </div>
</template> 
```

是否有可能有不同的路线`/home/tools : 'home_tools`呈现它的模板不是在最高的主要内容 div 而是在我的孩子 div `inner_home`？

编辑：

我正在评估一种仅使用 JQuery 和流星路由器方法的回调函数来获取我正在寻找的模板并将其直接添加到相关 div 标记的方法。

就像是：

```
 var foundTemplate = _.template($('#item-template').html())
  $('#div_example').html(foundTemplate); // 
```

如果有人有更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:11:21.607

当然。

## 客户端.js

```
Meteor.Router.add({
  '/home/tools': function() {
    Session.set("homeTemplate", "tools");
    return 'home';
  },
  '/home/admin': function() {
    Session.set("homeTemplate", "admin");
    return 'home';
  }
}); 
```

## 主页.js

```
Template.home.homeTemplateTools = function() {
    return Session.equal("homeTemplate", "tools");
};

Template.home.homeTemplateAdmin = function() {
    return Session.equal("homeTemplate", "admin");
}; 
```

## 主页.html

```
<template name="home">
    {{#if isAdmin}}
            <h1>student</h1>
    {{/if}}
    <div id="inner_home">
    {{#if homeTemplateTools}}
      {{> homeTools}}
    {{/if}}
    {{#if homeTemplateAdmin}}
      {{> homeAdmin}}
    {{/if}}
    </div>
</template> 
```

# javascript - EDITED 可以查看 JSON 响应 200 OK 但返回 parsererror

> ID：15503281
> 
> 赞同：0
> 
> 时间：2013-03-19T15:12:39.837
> 
> 标签：javascript, ajax, json, cordova, getjson

我可以得到以下字符串

```
([{"data":{"Rate":"","RoleA":"Student","NameA":"student","RoleB":"Tutor","NameB":"tutorB","Give":"0","Get":"1","Accept":"0"}}]); 
```

我已经阅读了[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)但仍然不确定我在哪里做错了。

这是我的代码

```
 $.ajax({
                        type:           'GET',
                        dataType:       'jsonp',
                        jsonpCallback:  'jsoncallback',
                        data: 
                        {

                                nameB:  nameB,
                                roleB:  roleB,
                                get123: get123,
                                accept: accept
                        },
                        url: 'http://mydomain.com/check.php?callback=?',
                        success: function(data){
                            alert(data[0].data.RoleA);
                            //alert("ABC");
                            //if ( $("#role").text() == "Tutor" )
                            //{
                            //  window.location.href='tutor_home.html';
                            //}
                            //else
                            //{
                            //  window.location.href='student_home.html';
                            //}         
                        },
                        error: function(jqXHR, textStatus){
                            alert("Request failed: " + textStatus);
                        }
            }); 
```

从chrome，我可以找到json字符串，看起来很正常。但是，它不会提醒成功消息，而是提醒 parsererror 错误..我应该在哪里更改？谢谢

我的PHP

```
<?php 

header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
header("Content-type: application/json");

include('mysqlConfig.php');

$nameB = $_GET["nameB"];
$roleB = $_GET["roleB"];
$get = $_GET["get123"];
$accept = $_GET["accept"];

$sql="SELECT * FROM tbl_rating WHERE NameB='$nameB' and RoleB='$roleB' and Get='$get' and Accept='$accept'";
$result=mysql_query($sql);

$rows = array();

//retrieve and print every record
while($r = mysql_fetch_assoc($result)){
    // $rows[] = $r; has the same effect, without the superfluous data attribute
    $rows[] = array('data' => $r);
}

// now all the rows have been fetched, it can be encoded
//echo json_encode($rows);

$data = json_encode($rows);
echo $_GET['jsoncallback'] . '(' . $data . ');';
?> 
```

我不确定为什么 URL 如下请求 URL： http://mydomain.com/check.php?callback=jsoncallback&nameB=tutorB&roleB=Tutor&get123=1&accept=0&_= [1363710513593](http://mydomain.com/check.php?callback=jsoncallback&nameB=tutorB&roleB=Tutor&get123=1&accept=0&_=1363710513593)

最后一个参数`&_=1363710513593`我不确定是什么？

但它可以返回上面的字符串

它与jquery版本有关吗？我用 jquery-1.9.1.min.js

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:17:52.343

您需要在 ajax 设置对象中指定一个回调名称（现在称为“？”）。[在http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)上阅读有关其工作原理的更多信息。在设置对象中查找“jsonp”。您还需要在 PHP 代码中获取该回调名称并在响应中返回它，以便该函数在接收到客户端时执行。示例：jsoncallback(YOURJSONDATA)。

粘贴自[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

jsonp 类型：字符串 覆盖 jsonp 请求中的回调函数名称。在“callback=?”中将使用该值代替“callback” url 中查询字符串的一部分。所以 {jsonp:'onJSONPLoad'} 会导致 'onJSONPLoad=?' 传递给服务器。从 jQuery 1.5 开始，将 jsonp 选项设置为 false 可防止 jQuery 将“?callback”字符串添加到 URL 或尝试使用“=?” 为转型。在这种情况下，您还应该明确设置 jsonpCallback 设置。例如，{ jsonp: false, jsonpCallback: "callbackName" }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:15:00.397

更新：您表明您的服务没有返回正确的 jsonp 有效负载修复它以使用传递的回调名称，因此当您`mycallback`作为 jsonp 回调传入时，您将获得以下响应。

```
 mycallback([{"data":{"Rate":"","RoleA":"Student","NameA":"student","RoleB":"Tutor","NameB"‌​:"tutorB","Give":"0","Get":"1","Accept":"0"}}]); 
```

更新 2：`&_=1363710513593`- 时间戳添加到请求中，以便 jquery 能够找出相应的 jsonp 请求是什么，因为 jsonp 在客户端上的处理方式（即响应以文本形式出现并嵌入正文中）

您正在访问的 json 服务支持 jsonp ，因此您需要配置您`$.ajax`的执行 jsonp 请求并将 json 回调名称更改为 jsoncallback

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
                type: 'GET',
                dataType : 'jsonp',
                jsonpCallback : 'jsoncallback',
                data: 
                {

                        nameB:    nameB,
                        roleB:    roleB,
                        get123:   get123,
                        accept:   accept
                },
                url: 'http://mydomain.com/check.php',
                success: function(data){
                    alert(data[0].data.RoleA);
                 }       
                },
                error: function(){
                    alert('There was an error.');
                }
            });

            //return false;
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:15:40.763

看起来您的服务器正在尝试 reutnr jsonp。尝试添加

```
dataType: 'jsonp' 
```

到您的 ajax 请求并删除 jsoncallback=? 参数

例如

```
 $.ajax({
                type: 'GET',
                dataType: 'jsonp',
                data: 
                {

                        //nameB:    nameB,
                        //roleB:    roleB,
                        //get123:   get123,
                        //accept:   accept
                },
                url: 'http://mydomain.com/check.php?nameB=tutorB&roleB=Tutor&get123=1&accept=0&',
                success: function(data){
                    alert(data[0].data.RoleA);     
                },
                error: function(){
                    alert('There was an error.');
                }
            });

            //return false;
        }); 
```

# ruby-on-rails - 是否宝石规格。name 必须等于 gem 常量名称？

> ID：15503287
> 
> 赞同：3
> 
> 时间：2013-03-19T15:12:51.077
> 
> 标签：ruby-on-rails, rubygems, ruby-on-rails-3.2, gem, gemspecs

# tl;博士

我正在尝试将更大的应用程序的一部分分解为可安装的引擎。该引擎将以不同的风格存在，每种风格都包含在自己的 gem 中。我无法让 gem 名称与引擎常量名称不同。

# 细节

提取的部分包含注册、身份验证和会话处理的逻辑。该应用程序由世界不同地区的客户使用，对使用该产品的最终客户有不同的要求和规定。这促使我们针对每个监管区域的这些需求创建单独的模块。它们当前位于 lib 目录中，并且根据配置加载不同的实现。

引擎的目标是安装适当的引擎，并且路由文件将所有相关调用路由到引擎。

由于我们有几个这样的注册模块，而且还会有更多，我们需要为变体维护几个 gem。我正在尝试使宝石具有不同的名称（auth_A、auth_B 等），但包含的引擎具有相同的名称，Auth::Engine。

这样我们就可以在 Gemfile 中包含正确的 gem，其余的都可以正常工作，因为无论运行什么版本，它应该路由到的端点总是相同的。

# 问题

我遇到的问题是我无法让 gem 有一个名字，而引擎却是另一个名字......

如果我生成一个新的引擎名称身份验证，它可以很好地安装在主应用程序中。如果我然后将 gem 名称和包含文件夹更改为 auth_a 并更新它停止工作的主机应用程序 Gemfile，我可以很好地捆绑，但是当我尝试启动主机应用程序时，它在绑定到挂载引擎时失败，抱怨 Auth:: Engine 是一个未定义的常量。

我的，略微编辑的 gemspec 看起来像这样：

```
$:.push File.expand_path("../lib", __FILE__)

# Maintain your gem's version:
require "auth/version"

# Describe your gem and declare its dependencies:
Gem::Specification.new do |s|
  s.name        = "auth_a"
  s.version     = Auth::VERSION
  s.authors     = ["Jonas Schubert Erlandsson"]
  s.email       = ["jonas.schubert.erlandsson@xxxxxx.com"]
  s.homepage    = "http://some.page.on/the/internet.html"
  s.summary     = "Authentication module for A"
  s.description = "This engine, when mounted in Host app, handles registration, account update, login and logout of users."

  s.files = Dir["{app,config,db,lib}/**/*"] + ["MIT-LICENSE", "Rakefile", "README.rdoc"]
  s.test_files = Dir["test/**/*"]

  s.add_dependency "rails", "~> 3.2.13"
end 
```

我从生成的脚手架中唯一改变的是`s.name = "auth_a"`. 来自主机应用程序 Gemfile 的相关行：`gem 'auth_a', path: "../auth_a"`...

我查看了整个源代码树，试图找到它从 gem 名称中推断出名称的位置，但我看不到它。我不知道我错过了什么，gem spec 文档对此也没有太大帮助......我不认为 gem 名称绑定到 gem 的常量名称，但也许我是错误的？你能覆盖它吗？还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:26:59.350

答案是简单地将其添加到主机应用程序 Gemfile: 中的行中`gem 'auth_a', path: "../auth_a", require: 'auth'`。

所以看起来它默认为要求，即自动加载，一个基于 gem 名称的常量，但 require 调用告诉它需要什么。

希望它也对其他人有所帮助:)

# sed - 如何只显示最后一个字段？

> ID：15503294
> 
> 赞同：0
> 
> 时间：2013-03-19T15:13:01.287
> 
> 标签：sed, awk, cut

我用了

```
cut -d " " -f 8 
```

和

```
awk '{print $8}' 
```

但这假设第 8 个字段是最后一个字段，这并不总是正确的。

如何在 shell 脚本中显示最后一个字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:14:02.577

尝试这样做：

```
$ awk '{print $NF}' 
```

或有趣的

```
$ echo "foo bar base" | rev | cut -d ' ' -f1 | rev
base 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:15:57.567

**编辑：**这个答案现在是错误的，因为问题改变了。继续前进，这里没什么可看的。

您可以使用`tail`从输入末尾打印指定数量的字节

```
tail -c 1 
```

# mysql - 尝试在 windows 上配置 mysql 集群时出错

> ID：15503298
> 
> 赞同：3
> 
> 时间：2013-03-19T15:13:12.840
> 
> 标签：mysql

我正在按照快速入门指南“在 windows 上安装 mysql cluser”一切正常，直到我输入以下命令：

```
 C:\Users\pc\my_cluster>start /B c:\Users\pc\mysqlc\bin\ndb_mgmd -f conf\config.ini --initial --configdir=c:\Users\pc\my_cluster\conf 
```

我得到了这个错误： 既不能创建也不能打开密钥

> 'SYSTEM\CurrentControlSet\Services\EventLog\App lication\MySQL Cluster
> 
> 管理服务器'，错误：5 无法设置事件日志记录
> 
> *既不能创建也不能打开键 'SYSTEM\CurrentControlSet\Services\EventLog\App*
> 
> *lication\MySQL 集群管理服务器'，错误：5*
> 
> *设置事件登录失败

请告诉我怎么了。tks这么多

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:18:29.980

您应该使用管理权限命令提示符。右键单击“命令提示符”，然后单击“以管理员身份运行”。

# node.js - 如何获取套接字的主机名？

> ID：15503308
> 
> 赞同：4
> 
> 时间：2013-03-19T15:13:42.950
> 
> 标签：node.js, socket.io

当我从连接的套接字接收到某个事件时，我必须发送一个带有我的主机名和端口作为参数的请求。我希望能够从套接字对象中检索到这些信息。不幸的是，这方面的文档很少，我似乎无法找出这是否以及如何实现。

那么，是否有可能在 Socket.io 中做这样的事情：

```
io.sockets.on('connection', function(socket){
    console.log(socket.manager.server.hostname)
})' 
```

（或者，或者：我在这里犯了哪个思维错误，认为这在第一种情况下应该是可能的？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T15:43:59.727

试试这个：

```
console.log(socket.handshake.headers.host); 
```

必要时拆分端口：

```
console.log(socket.handshake.headers.host.split(":").shift()); 
```

# javascript - 它适用于 jsfiddle 但不适用于我的网站

> ID：15503310
> 
> 赞同：-6
> 
> 时间：2013-03-19T15:13:45.693
> 
> 标签：javascript, jquery

我知道已经有很多关于它的问题，但我没有找到我的答案。

我在[jsFiddle](http://jsfiddle.net/WBkPH/2/)上的代码有效，但是当我想在我的[网站](http://commu-gamers.fr/)上使用它时，它不起作用：s 而且我看不出问题出在哪里（不是编码，js 也加载在正文中。 ..)

两种情况：

1：没有 $(document).ready

在任何情况下都没有发生任何事情。

2：没有 $(document).ready

当您点击“Et c'est reparti ！” 例如，第一个条件已完成，但如果您再次单击，则不会发生任何事情，而第二个条件应该被激活:(

的JavaScript：

```
function afficherToggle(c){
    if($(c).height()!='20'){
        $(c).stop().animate({ height: '20px',}, 600 );
    }
    else{
        $(c).animateAuto("height", 800); 
    }
}

jQuery.fn.animateAuto = function (prop, speed, callback) {
    var elem, height, width;
    return this.each(function (i, el) {
        el = jQuery(el), elem = el.clone().css({
            'height': 'auto'
        }).appendTo('body');
        height = elem.css('height'),
        elem.remove();

        if (prop === 'height') el.animate({
            "height": height
        }, speed, callback);
    });
} 
```

感谢您的帮助 ！

Ps : 对不起我的英语，如果有什么不清楚的地方，我会尝试用其他语言解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:15:42.437

您没有在脚本末尾关闭`$(document).ready`add 。`});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:17:45.880

看萤火虫。ReferenceError: afficherToggle 未定义。你的网站上可能需要 jQuery UI 1.9.2 库吗

# c++ - 聚合异构表格数据的设计模式

> ID：15503315
> 
> 赞同：7
> 
> 时间：2013-03-19T15:14:03.853
> 
> 标签：c++, csv, design-patterns

我正在编写一些 C++ 代码，这些代码集成了来自大约几十个 csv 文件的信息。它们都包含我要提取的一些带时间戳的记录数据，但每个文件中的表示方式有所不同。表示之间的差异超出了不同的列顺序和列名 - 例如，一个文件中的一行有多列可能是不同文件中的多行。

因此，我需要对每个文件进行一些自定义处理，以组合一个统一的数据结构，其中包含所有文件中的必要信息。我的问题是是否有首选的代码模式来保持复杂性易于管理和代码优雅？或者，如果有一个很好的案例研究，我应该检查一下过去是如何处理这种复杂性的。

（我意识到这样的事情在像 perl 这样的脚本语言中可能更容易，但该项目目前使用 C++。此外，我的问题更多是关于是否有代码模式来处理这个问题 - 所以答案不必语言过于具体。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:42:05.723

您在问题中使用的几个短语让我印象深刻：`custom handling for each file`, `representation is somewhat different`, `complexity manageable`. 基于这样一个事实，您将不得不根据 csv 文件的格式使用不同的解析算法变体，并且您（据我所知）想要松散地耦合您的解析机制，我会推荐[策略](http://en.wikipedia.org/wiki/Strategy_pattern)模式。

策略模式将解析机制与 CSV 文件中包含的数据的用户分离。数据的用户对 CSV 文件的格式不感兴趣，他们只对该文件中的信息感兴趣，这使得策略模式成为一个很好的选择。如果您的解析机制之间存在相似之处，您可以同时使用[模板](http://en.wikipedia.org/wiki/Template_method_pattern)和策略模式来减少重复并利用继承。

通过使用策略模式，您可以将策略创建提取到您认为合适的[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)或[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory_pattern)中，进一步允许客户端与解析方法分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:17:49.710

我不太确定你想对不同的文件做什么。如果你的想法是像数据库表一样使用它们，并且你有一些带有分散在多个文件中的附加信息的键，你可能想看看像[MapReduce](http://en.wikipedia.org/wiki/MapReduce)这样的东西，你首先从每个文件中构建部分信息并聚合在第二步中共享相同密钥的信息。

至于数据结构，它取决于文件的布局。我可能会为每种文件类型配备一个专用阅读器，它将信息存储在表示文件中信息的专用数据结构中。您可以为每个信息附加一个键，并使用 reduce 操作使用相同的键合并所有信息片段并将它们聚合到代理结构中。

另一方面，如果想法是从不同的序列化方法构建相同的对象（即不同的文件是独立的，但代表具有不同布局的相同类型的数据），而不事先知道采用了哪种序列化方法，我恐怕剩下的唯一解决方案就是暴力反序列化。您可以拥有一组阅读器，每种输入类型一个，并尝试解析文件，如果失败，则开始下一个阅读器，依此类推，直到您发现新的文件格式或找到合适的阅读器。我不认为有任何模式涵盖这一点。

# multithreading - 无法理解矩阵乘法的逻辑

> ID：15503316
> 
> 赞同：0
> 
> 时间：2013-03-19T15:14:07.083
> 
> 标签：multithreading, multiprocessing

有人可以指导我有关使用线程的并行矩阵 mult 的概念。我为矩阵的每一行分配了一个线程或进程。但它为只有 4 个 CPU 的机器创建了太多线程。我无法理解线程或进程是否被限制在一个特定的数字比如 8，我如何让每个线程计算多行以及如何跟踪哪些行由哪个线程完成。假设我有一个 A[40][50]*B[50][60]。我不想创建 40 个线程。我需要在此代码中进行哪些修改才能只有 5 个线程而不是等于行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:03:56.970

线程不限于基于处理器上可用执行核心的数量的特定数量。查看您的进程监视器/任务管理器窗口 - 在任何给定时刻，数十个进程中都有数千个线程在运行。只有少数可以同时执行，但线程调度程序的工作是通过优先处理准备运行的线程来保持 CPU 忙碌。

与创建新线程相关的开销 - 必须为每个创建的新线程分配相当数量的内存和系统资源，因此您不希望在自己的进程中创建数千个线程。如果您有很多小任务要执行，您可以使用线程池来消除创建线程的成本。但是对于您的矩阵用例，您不需要线程池。

只需决定您要使用多少线程，然后将您的工作分成那么多块。如果您决定使用 5 个线程，则将矩阵行数除以 5，并告诉每个线程从哪一行开始以及消耗多少行。不要假设每个线程都将处理相同数量的行 - 最后一个块将需要完成，但仍有许多行，如果总行数不是 5 的偶数倍，则可能小于 5。

对于 N 行矩阵（N 在运行时动态确定），向每个线程发出 N / 5 行块，加上一个 N mod 5 块以捕获任何余数。（好吧，那是 6 个线程，但没关系）

# javascript - Bootstrap Datepicker - 设置 startView：'十年'，但不是当前十年

> ID：15503325
> 
> 赞同：10
> 
> 时间：2013-03-19T15:14:33.863
> 
> 标签：javascript, backbone.js, datepicker

目前我有 startView 显示当前十年，这没关系，但我想让前十年成为 startView - 而不是当前十年。

```
this.dobDatePickerView = new DatePickerView({
  el: this.$('[name="dob"]'),
  startView : '十年',
  endDate : this.sandbox.dates().fwFormat('date'),
  值：this.sandbox.dates().subtract('years', 18).fwFormat('date')
}）。使成为（）;

```

我想从十年视图默认选择的年份中减去 18 年，因此不应预先选择“2013”​​，而应默认为 1995。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:14:29.663

这可以工作：（[演示](http://jsfiddle.net/sperske/RkBpX/)）：

```
<div class="input-append date" id="dp1" data-date="01-01-1990" data-date-format="dd-mm-yyyy" data-date-viewmode="years">
    <input class="span2" size="16" type="text" readonly>
    <span class="add-on"><i class="icon-calendar"></i></span>
</div>
<script>
  $('#dp1').datepicker();
</script> 
```

通过将日期选择器与输入分开并在选择器而不是输入上设置默认值，您可以获得仅在选择日期后才会填充日期但从您喜欢的任何值开始的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:00:51.273

[https://github.com/eternicode/bootstrap-datepicker#setstartdate](https://github.com/eternicode/bootstrap-datepicker#setstartdate)

也许尝试在 datePicker 上调用 setStartDate()，当它被单击/打开时，并设置十年前的日期

# three.js - 在 three.js 中将子节点/对象附加到 Object3D

> ID：15503326
> 
> 赞同：4
> 
> 时间：2013-03-19T15:14:40.313
> 
> 标签：three.js

我正在将 .obj 文件加载到 Object3D 对象中。效果很好，我可以在屏幕上看到它。但是，我想在对象上方的某些点创建旋转精灵（萤火虫、闪电球等）的印象。

我一直在查看有关精灵和其他内容的 three.js 文档，并且对这些功能印象深刻。但是我需要一点帮助来了解如何创建一个独立的精灵“地球”，让精灵在自己的本地坐标系中飞来飞去，然后将独立的“地球”移动到 obj 文件上方的某个点。有人可以帮我开始吗？（我想归结为，你如何在threejs中相对于另一个对象定位一个对象？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T15:49:10.060

您应该能够简单地将旋转精灵附加到使用[add()](https://github.com/mrdoob/three.js/blob/master/src/core/Object3D.js#L190)函数：

```
//create an empty 'container'/Object3D
var spinningSprites = new Object3D();
//add elements to it:
for(var i = 0 ; i < numSprites; i++) spinningSprites.add(yourParticleObjectInstsance);
//lastly add the whole container to the loaded model:
youLoadedModel.add(spinningSprites); 
```

上面是一个例子，你可能会使用不同的变量名等，但想法很简单：使用 add()。

# c++ - c++程序在一个线程访问冲突时终止-如何在linux中捕获这一点-对于win32我在vs2010中获得堆栈跟踪

> ID：15503333
> 
> 赞同：0
> 
> 时间：2013-03-19T15:14:50.167
> 
> 标签：c++, exception, gcc, gdb, fedora

c++程序终止，没有异常或堆栈跟踪

我有一个多线程应用程序

如果我的一个线程因读取数组越界（或任何 seg 故障条件）而出现访问冲突，我的整个应用程序将立即终止。

如果这发生在我使用 Visual Studio 的 Windows 柜台上，我会得到一个很好的堆栈跟踪错误在哪里，以及问题是什么。

我迫切需要这种类型的调试环境才能在我的项目中取得成功。我有太多的线程和太多的开发人员运行项目的不同部分，以至于一个人不能正确处理异常，这会破坏整个项目。

我正在运行 Fedora Core 14 我正在使用 gcc 4.5.1 编译 gdb 是 fedora 7.2-16.fc14 我的 IDE 是 eclipse Juno 我正在使用 CDT 构建器 我的工具链是跨 GCC 我的构建器是 CDT 内部构建器

gdb 或 gcc 或 eclipse 是否有任何设置可以帮助我检测这些类型的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:21:49.103

这就是应该发生的事情。在 Unix 下，您会得到一个完整的核心转储（您可以在调试器中检查），前提是您已授权它们。（`ulimits -c`——传统上，它们是默认授权的，但 Linux 似乎改变了这一点。）

当然，要从核心转储中获取任何有用的信息，您需要使用符号信息编译代码，并且以后不要剥离它。（另一方面，您可以将核心转储从您的用户机器复制到您的开发机器上，看看那里发生了什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:09:00.457

正如 James Kanze 所写，您肯定在寻找核心转储。

我只想补充一点，核心转储会向您显示程序崩溃的位置，这不一定与问题（内存损坏等）发生的位置相同。当然，一些越界读/写可能不会立即崩溃。

您可以通过在 glibc 中启用检查不正确的内存分配/释放来缩小搜索范围。最简单的方法是设置环境变量`MALLOC_CHECK_`。将其设置为`2`glibc 将在每次内存分配/释放时检查堆损坏，并在发现任何问题时中止程序（如果启用，则生成核心转储）。这通常有助于更接近真正的问题。

[http://www.gnu.org/software/libc/manual/html_node/Heap-Consistency-Checking.html](http://www.gnu.org/software/libc/manual/html_node/Heap-Consistency-Checking.html)

# tsql - 如何分析 Azure SQL 死锁？

> ID：15503334
> 
> 赞同：3
> 
> 时间：2013-03-19T15:14:53.667
> 
> 标签：tsql, azure, azure-sql-database

[我知道这里](https://stackoverflow.com/questions/7993882/how-do-i-identify-a-deadlock-in-sql-azure)有人问过这个问题，但 1）它相对较旧，2）它对我没有多大帮助。

在我的数据库上进行一些操作时，我遇到了相对大量的死锁。设置如下：

**表：**

将外键放入表 B 中的表 A。

**操作：**

插入表 A

插入表 B

更新表 B 中的行

删除表 B 中的行

删除表 A 中的行

**问题：**

这些操作基本上可以按任何顺序发生，因为我有多个工作角色，因此这些操作必须是幂等的，但是，每个工作角色将使用表 A 中的不同主键。我仍在尝试围绕锁定表，据我了解，A 上的任何删除都将首先锁定表 B，在那里删除相关行，然后从 A 中删除该行。我目前认为这是一个原子操作，没有时间在两者之间执行额外的锁锁定表 B 和锁定表 A，因为我无法想象一种解决方法。

我目前能够在以下格式的 Microsoft Visual Studio 中捕获异常：

*事务（进程 ID xxx）与另一个进程在锁资源上死锁，并已被选为死锁牺牲品。重新运行事务。*

此异常似乎可能发生在上述任何操作中。

我的问题是：我怎么知道哪些锁/事务是导致死锁的？有谁知道在我们得到异常后任何有用的查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T02:16:01.270

[**sys.event_log**](http://msdn.microsoft.com/en-us/library/windowsazure/jj819229.aspx)是这里的答案。

它位于您服务器的主数据库中，并且应该包含一个条目，其中包含您的数据库在上个月遇到的所有死锁图。

有了死锁图，有很多关于 sql server[死锁图调试](http://blogs.msdn.com/b/bartd/archive/tags/sql+deadlocks/)的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:57:28.187

目前几乎不存在用于 Sql Azure 的分析工具。

标准 Sql Server 和 Sql Azure 世界之间的锁定问题应该没有太大区别，因此我建议尝试使用标准技术在“旧”世界中重现该问题，例如良好的旧 Profiler：非常有用的[文章](http://msdn.microsoft.com/en-us/library/ms178104.aspx)和[这个](https://www.simple-talk.com/sql/learn-sql-server/how-to-track-down-deadlocks-using-sql-server-2005-profiler/)。

如果这种方法没有被证明是富有成效的，那么一个肮脏的解决方案可能是处理 catch/retry [logic](http://msdn.microsoft.com/en-us/library/ms177453.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:59:54.077

我最近遇到了类似的问题。尝试将您的更新与“with (UPDLOCK)”一起使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T15:53:22.090

尝试找出根本原因：

*   首先只运行一个工作者角色。

然后检查：

*   您是否锁定在正确的级别表锁、页锁或行锁？
*   你要释放锁吗？
*   您的系统是否以这样的方式设计，对同一行的所有编辑都将由同一台机器完成？

这里有一篇关于查找阻塞查询的博客文章：http: [//blogs.msdn.com/b/sqlazure/archive/2010/08/13/10049896.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/08/13/10049896.aspx)

# scala - 在 SBT 中并行运行 ScalaTest 测试（不是套件）

> ID：15503339
> 
> 赞同：5
> 
> 时间：2013-03-19T15:15:13.823
> 
> 标签：scala, sbt, scalatest

我想并行运行特定套件的所有测试。显然，我可以通过将[`ParallelTestExecution`](http://doc.scalatest.org/1.9.1/index.html#org.scalatest.ParallelTestExecution)trait 混合到我的套件中来做到这一点，但测试会继续按顺序运行。我怀疑这是因为 a`Distributor`没有被传递给`runTests`. 查看 scalatest-users 邮件列表，这似乎是一个已知问题，将[在 sbt 0.13 和 ScalaTest 的相关版本中修复](https://groups.google.com/d/msg/scalatest-users/IE68DyT8My0/JhgN4AxbquQJ)。

这个对吗？

# matlab - 图例在matlab中给出了太多的数据

> ID：15503340
> 
> 赞同：2
> 
> 时间：2013-03-19T15:15:16.337
> 
> 标签：matlab, graph, vector, plot, legend

如何在 Matlab 中限制我的图例？到目前为止，我正在使用如下代码绘制图表：

```
figure;
hold on;
plot(log(X),7.35,'ro',7.35,log(Y),'bo');
axis([7.3 7.7 7.3 7.7]);
set(gca,'xtick',[7:0.1:7.7])
set(gca,'ytick',[7:0.1:7.7])
title('atheism test file 1')
xlabel('x axis'); ylabel('y axis');
legend show; 
```

其中 X,Y 是 10 个元素的列向量。当我执行“传奇秀”时，它将显示 10 个红色圆圈数据 1、数据 2 等，然后显示 10 个蓝色圆圈。如果我将其修改为 legend('red','blue') 它只会给我两个红色圆圈，分别称为红色和蓝色......

我想要的是只用一个图例来显示 2 个项目，一个我可以命名的红色圆圈和一个蓝色圆圈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:19:11.150

分别绘制红色和蓝色，然后明确地标出它们。尝试类似：

```
ph1 = plot(log(X),7.35,'ro');
ph2 = plot(7.35,log(Y),'bo');
legend([ph1(1), ph2(1)], 'red', 'blue'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:32:13.053

您绘制的实际上是 10 个不同的点`log(X)`和 10 个不同的点`log(Y)`，因为对于每个绘图，每个轴的输入向量具有不同的大小。只需使它们具有相同的尺寸，如下所示：

```
plot(log(X), 7.35 * ones(size(X)), 'ro', 7.35 * ones(size(Y)), log(Y), 'bo'); 
```

传说会正确地出来。这里不需要`hold on`（也不需要存储任何图形句柄）。

# php - PHP fopen("filename", w) 创建文件 ~1

> ID：15503343
> 
> 赞同：1
> 
> 时间：2013-03-19T15:15:18.940
> 
> 标签：php, fopen, fwrite

我正在尝试用 PHP 编写文件。到目前为止，它“有点”。

我有一系列格式为 {Rob, Kevin, Michael} 的名称。我使用代码行

```
foreach($Team as $user)
 {
print_r($user);
    //create a file for each user
    $file = fopen("./employee_lists/".$user, 'w');
    //I have also tried: fopen("employee_lists/$user", 'w');
    // ... ... ...
    //write some data to each file.
 } 
```

这可以按预期工作：print_r 显示“Rob Kevin Michael”，但是，保存的文件名如下：ROB~1、KEVIN~1、MICHAE~1

当我稍后在我的代码中使用这些文件时，我想将“Rob”的用户名与 ROB~1 相关联，我将不得不采取一些额外的步骤来做到这一点。我觉得我使用 fopen 不正确，但它正是我想要的，减去这个小命名方案问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:23:18.910

您的变量似乎`$user`包含文件系统路径的无效字符（我最好的猜测是换行）。

尝试：

```
$file = fopen("./employee_lists/".trim($user), 'w'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:25:13.943

您应该在将 $user 用作文件名之前对其进行清理。

```
$pattern = '/(;|\||`|>|<|&|^|"|'."\n|\r|'".'|{|}|[|]|\)|\()/i';
// no piping, passing possible environment variables ($),
// seperate commands, nested execution, file redirection,
// background processing, special commands (backspace, etc.), quotes
// newlines, or some other special characters
$user= preg_replace($pattern, '', $user);
$user= '"'.preg_replace('/\$/', '\\\$', $user).'"'; //make sure this is only interpreted as ONE argument 
```

By the way, it's a bad idea using an user name for a file name. It's better to use a numeric id.

# mongodb - MongoDB 数据类型处理

> ID：15503345
> 
> 赞同：0
> 
> 时间：2013-03-19T15:15:20.627
> 
> 标签：mongodb

有没有办法处理存储为字符串的数字，比如 mongodb 中的整数？

例如

```
{
    "someKey" : "45646764646"
} 
```

我想对该值执行`$gte`或`$lte`操作，但只要“someKey”的值是一个字符串，这是不可能的。我也想避免使用 dbcursor 并与 java 进行比较，例如

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:54:25.437

如果您的字段 someKey 包含数字，请考虑将其保存为 NumberLong() 。您的驱动程序应该允许您将应用程序中的该字段表示为大多数所有 10gen 驱动程序上的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:52:50.733

如果可能的话，我建议在将字符串存储在数据库中时将它们转换为整数。这可以防止将来出现混乱，并且由于存储差异而节省了大量空间。

# javascript - 什么可能使 Dojo.destroy() 不起作用？

> ID：15503347
> 
> 赞同：0
> 
> 时间：2013-03-19T15:15:29.107
> 
> 标签：javascript, dojo

我有两行这样的代码：

```
var parent = dojo.query(this).parents("div").first();
dojo.destroy(parent); 
```

通过萤火虫，我可以清楚地看到 var`parent`是 [div#row-2.form-record] 但是 dojo.destroy(parent) 似乎不起作用（div 仍然可见）并将视图推到页面顶部和萤火虫退出调试模式。

发生什么了？

# java - 数独求解器，特殊情况求解

> ID：15503352
> 
> 赞同：1
> 
> 时间：2013-03-19T15:15:42.493
> 
> 标签：java, recursion, sudoku, backtracking

我正在研究一个带有递归回溯的数独求解器，除了一件事之外，它几乎已经完成。如果我将重复项放在谜题中的某个位置（例如顶角的 1,1），即使它不是一个可解决的谜题，它也可以一直尝试找到解决方案。

任何帮助是极大的赞赏！

抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:28:40.373

你想检测一个无效的情况，所以你应该在调用你的求解器之前检查它。您的求解器本身不会创建无效的解决方案...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:35:32.987

关于重复项，我建议为每个单元格保留一个可能的数字列表，当您尝试解决一个单元格时，您可以将此列表与匹配的行、列和框进行比较，这样您就可以防止创建重复项。有了这个，您可以解决更简单的难题而无需回溯。如果您遇到困难，请使用回溯继续...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T15:26:26.633

你知道回溯的方式是当你的谜题遇到矛盾时，所以在每一步你都应该运行一个“验证”方法，如果谜题是非法的，那么你所做的最后一步是非法的。

当您发现您的举动是非法的时，您可以递归地回溯并继续前进。

另外，请注意，这是一种相当幼稚的方法，也许一些数独专家有更好的算法，但这种蛮力应该可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T16:50:18.220

要实现 Validate 类，你不能只写`Validate.validate();`在你的解决方法里面吗？希望能帮助到你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T16:01:54.710

这不一定*是答案*，但它应该对您有所帮助。我以前为宏程序做过这种事情，它是可用的最高评价的。

数独求解器可能是一个相当大的挑战。判断一个动作是否正确的唯一方法是它是绝对的还是后来被证明的。这可能会导致相当大的挑战，因为结局是基于当前的情况和动作。这意味着您可以将其作为排列处理。你可以遍历每个方块并找出它有哪些可能的数字。从那里，您可以获得一两个已定义的正方形。基于此，有许多可能的方法可以到达终点。

当谜题被解决（没有错误 - 每个方块都填满）或出现错误时，将定义一个“终点”。

基于此，您可以将每个动作视为一个节点，然后围绕可能的动作构建一个树系统。

例如：

```
8 7 1   2 _ _   6 9 3
2 9 6   3 8 7   1 _ _ 
```

这只是一个小例子，但基于它，分别扫描每一行，然后每一列我们可以生成可能的数字：

```
(5, 1) -> [4, 5]
(6, 1) -> [4, 5]
(8, 2) -> [4, 5]
(9, 2) -> [4, 5] 
```

基于此，以及提供给我们的解决方案，我们可以看到正好有 4 种可能的解决方案：

```
8 7 1   2 4 5   6 9 3
2 9 6   3 8 7   1 4 5 
```

-或者-

```
8 7 1   2 5 4   6 9 3
2 9 6   3 8 7   1 4 5 
```

-或者-

```
8 7 1   2 4 5   6 9 3
2 9 6   3 8 7   1 5 4 
```

-或者-

```
8 7 1   2 5 4   6 9 3
2 9 6   3 8 7   1 5 4 
```

尽管这些信息不足以解决整个难题并找出哪个“正确”，但可以将其标准化并用于创建类似的系统并很快找到解决方案。

因此，您可以将所有这 4 种可能性添加到一棵树中，每个都从原始分支：

```
8 7 1   2 _ _   6 9 3
2 9 6   3 8 7   1 _ _ 
```

然后递归处理它们。

希望这可以帮助！

# mongodb - 在 MONGO DB 查找查询中传递多个 where 条件

> ID：15503355
> 
> 赞同：0
> 
> 时间：2013-03-19T15:15:49.490
> 
> 标签：mongodb, find

我有 mongo DB 集合，即具有以下文档结构的学生，

名称：详细信息：日期：值

因此，对于单个名称，我们将有一个详细信息列表，

该详细信息列表将包含多个日期列表

每个日期列表将有多个值列表

```
 {
        "_id" : ObjectId("51472e9fd29a736d83c27ca3"),
        "name" : "Arun",
        "details" : [
                {
                        "date" : "2015-01-17",                        
                        "isNew" : false,
                        "isOld" : true,
                        "values" : [
                                {
                                        "money" : "330.0",
                                        "new" : false,
                                        "old" : true,
                                },
                                {
                                        "money" : "340.0",
                                        "new" : false,
                                        "old" : true,
                                }                                
                        ]
                    },  
                    {
                        "date" : "2015-01-17",                        
                        "isNew" : false,
                        "isOld" : false,                        
                        "values" : [
                                {
                                        "money" : "330.0",
                                        "new" : false,
                                        "old" : false,
                                },
                                {
                                        "money" : "340.0",
                                        "new" : false,
                                        "old" : false,
                                }                                
                        ]
                    },
                    {
                        "date" : "2015-01-17",                        
                        "isNew" : true,
                        "isOld" : false,
                        "values" : [
                                {
                                        "money" : "330.0",
                                        "new" : true,
                                        "old" : false,
                                },
                                {
                                        "money" : "340.0",
                                        "new" : true,
                                        "old" : false,
                                }                                
                        ]
                 },
                 {
                        "date" : "2013-10-19",                        
                        "isNew" : true,
                        "isOld" : false,
                        "values" : [
                                {
                                        "money" : "330.0",
                                        "new" : true,
                                        "old" : false,
                                },
                                {
                                        "money" : "340.0",
                                        "new" : true,
                                        "old" : false,
                                }                                
                        ]
                 }
        ]
    }

What is need is, i want to SELECT "all the date lists" where "name" : "Arun" and "date" : "2015-01-17",I tried this way and it is not working as expected.I am getting all the dates instead 2015-01-17 in return.

    I think only one where condition is working here and that is "name" : "Arun" , Query is not considering "details.date" : "2015-01-17" in where condition.

db.student.find({ "details.date" : "2015-01-17","name" : "Arun" },{"details.date":1}).pretty()
{
        "_id" : ObjectId("51472e9fd29a736d83c27ca3"),
        "details" : [
                {
                        "date" : "2015-01-17"
                },                                
                {
                        "date" : "2015-01-17"
                },                
                {
                        "date" : "2015-01-17"
                },                
                {
                        "date" : "2013-10-19"
                }
        ]
} 
```

我目前正在使用 mongo 1.6.5

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:36:29.913

首先，您需要升级到当前版本的 MongoDB。1.6 现在比当前的“主要”版本落后三个版本。

其次，您需要修复您的架构。您说“对于一个名称，我们将有一个详细信息列表” - 如果您继续将内容添加到此列表/数组中，它将无限期地继续增长，这是一个糟糕的架构设计。此外，将要与文档一起获取的数组值分组到一个数组中更为正确 - 在这种情况下，您特别不想获取文档中的所有值，您只想获取特定的元素日期，加上 isOld/isNew 字段向我表明，其中一些条目将对应于过时的值，而其他条目将是最新的，将它们放在同一个文档中是个坏主意。

因此，我的建议是将您的结构更改为每个学生的多个文档：

```
 {
            "name" : "Arun",
            "date" : "2015-01-17",                        
            "isNew" : false,
            "isOld" : true,
            "values" : [
                       {
                                  "money" : "330.0",
                                 "new" : false,
                                 "old" : true,
                        },
                         {
                                   "money" : "340.0",
                                   "new" : false,
                                   "old" : true,
                          }                                
                       ]
   }, 
   { 
   "name" : "Arun",
    "date" : "2015-01-17",                        
    "isNew" : false,
    "isOld" : true,
    "values" : [
                        {
                            "money" : "330.0",
                             "new" : false,
                             "old" : false,
                        },
                        {
                              "money" : "340.0",
                               "new" : false,
                              "old" : false,
                        }                                
               ]
    },
    {
     "name" : "Arun",
    "date" : "2015-01-17",                        
    "isNew" : false,
    "isOld" : true,
    "values" : [
               {
                           "money" : "330.0",
                               "new" : true,
                                    "old" : false,
                            },
                            {
                                    "money" : "340.0",
                                    "new" : true,
                                    "old" : false,
                            }                                
                    ]
             },
      {  "name" : "Arun",
    "date" : "2013-10-19",                        
    "isNew" : true,
    "isOld" : false,
    "values" : [
         {

                                    "money" : "330.0",
                                    "new" : true,
                                    "old" : false,
                            },
                            {
                                    "money" : "340.0",
                                    "new" : true,
                                    "old" : false,
                            }                                
                    ]
             }
    ]
} 
```

现在查询各种属性将更加直接，包括能够查询值和外部字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:57:52.010

您的查询实际上匹配这两个字段。输出是 MongoDB 如何处理数组的副产品。匹配

```
"details.date" : "2015-01-17" 
```

将返回集合中的任何文档，其中该`details`字段中的任何条目具有正确的日期。它不仅会返回 details 数组中的各个条目。

为此，您可能需要查看[$elemMatch](http://docs.mongodb.org/manual/reference/projection/elemMatch/)运算符以进行投影，以限制返回的数组中的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:05:36.560

这是您的查询，

```
db.sandy.aggregate(
                    {$unwind : "$details"},
                    {$match : {"details.date" : "2015-01-17","name" : "Arun"}}
                   ) 
```

而且我猜 mongo 1.6.5 不支持聚合。参考Doc一次。

# variables - 如何在程序执行期间动态声明变量？

> ID：15503362
> 
> 赞同：0
> 
> 时间：2013-03-19T15:16:01.233
> 
> 标签：variables, declaration, var, vb.net

我正在使用 VS 2012。

我不知道如何在我的代码运行时动态声明变量。我正在尝试编写一个程序，从网站上提取 EMS 调度的数据。该网站每隔几秒钟更新一次，并且发布的每个呼叫都有一个唯一的 ID 号。我想使用每个调度的唯一 ID 号，并使用该唯一 ID 号声明一个新的事件变量，并将其添加到活动调度的集合中。我唯一想不通的部分是，如何在发布时为每个调度声明一个变量，并用其唯一的 ID 号命名？

就像是：

```
Structure Incident
  Dim id As Integer

  Dim numer As String
  Dim date1 As String
  Dim time As String
  Dim box As String
  Dim type As String
  Dim street As String
  Dim crosstreet As String
  Dim location As String
  Dim announced As Boolean
  Dim complete As Boolean
End Structure 
```

`UniqueIDstringfromwebsite = "1234"`

`Dim (code to get variable declared with unique ID as variable name) as incident`

这是我的第一篇文章，我不能完全让代码示例在帖子中正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:22:59.430

You can use a `Dictionary` to identify your var:

```
Dim myVar As New Dictionary(Of Integer, Incident)

UniqueIDstringfromwebsite = 1234
myVar.Add(UniqueIDstringfromwebsite, New Incident) 
```

I don't think you can change the name of a variable with a value dinamically, and sincerily, and don't get when it can be useful.

And, in this way, better turn your structure into a class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:33:17.057

这是我的第一个答案——所以你们相处得很好！

你不需要实现一个类而不是一个结构 - 这样你就可以实现一个构造函数。我不认为您想创建一个以 ID 作为名称的变量，但您应该将 ID 添加到调度集合中（这可能是一个列表（事件）：

例如

```
Public Class Incident

     'define private variables

     Private _id as integer
     Private _number as string
     Private _date1 as String
     Private _time as String
     'etc...

     'define public properties

    Public Property Number as string
        Get 
            Return _number
        End Get
        Set (value as string)
            _number = value
        End Set
    End Property

    'Repeat for each Public Property

    'Implement Constuctor that takes ID
    Public Sub New(id as integer)
        _id = id
        'code here to get incident properties based on id
    End Sub

End Class 
```

希望这可以帮助！

# python - python如何将毫秒级字符串转换为日期字段（postgresql）并插入它

> ID：15503369
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:16:14.370
> 
> 标签：python, django, postgresql

我有一个时间字符串，字符串的长度是 13。例如 '1234567890123' 。我想将它作为 Date-field 插入到 postgresql(Django) 中，它应该保持精确到毫秒级别。

你能帮我吗，最好有示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:21:10.343

只需使用本机 Python 类型。除以 1000 将时间戳从毫秒转换为秒。这假设您使用的是 POSIX 时间而*不是*UTC，而不是其他一些纪元。

```
import datetime
from __future__ import division
print(datetime.datetime.fromtimestamp(1234567890123/1000)) 
```

输出是：

```
2009-02-13 15:31:30.123000

```

# c# - 在哪里声明变量以从程序中的任何位置访问？

> ID：15503370
> 
> 赞同：0
> 
> 时间：2013-03-19T15:16:14.843
> 
> 标签：c#

我正在使用 C# 制作一个 WinForms 应用程序。我想声明一个变量以在整个程序中访问，但我不知道在哪里初始化它？

该程序是基于 BStree 的，这就是我要初始化的：

```
BSTree<string> record = new BSTree<string>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:21:35.530

如果程序很简单——例如只有一种形式而没有额外的类文件等（例如简单的学校作业），那么你可能只是在你的`Form`类内但在任何方法之外声明一个静态全局，例如

```
public class MyForm : Form
{
   static private BSTree<string> record = new BSTree<string>();

   public MyForm()
   {
      ...
   }

   ...
} 
```

然后从您的`MyForm`实例中访问它，例如`MyForm.record`。

另请注意，您可以只在方法之外*声明*变量（例如），然后从例如构造函数中*初始化*它（例如）。这两种方法之间有一个非常微妙的区别（即影响初始化各个成员的顺序），但这很少有影响。`static private BSTree<string> record;`*`new BSTree<string>()`*

 *请注意，该`static`成员“属于”*类*，因此该成员只有一个“版本”。即对于您的类的每个*实例*，该成员没有单独的“版本” 。

但除此之外，您可能有一个静态“配置”或“全局”类，其中包含这些值（可能还有从例如配置文件读取的其他值）：

```
public static class MyConfig
{
   static public BSTree<string> record = new BSTree<string>();

   ...
} 
```

然后你可以从你的`MyForm`班级中访问它，比如`MyConfig.record`.

虽然 - 理想情况下，您应该公开*属性*而不是*字段*，例如：

```
public static class MyConfig
{
   static private BSTree<string> record = new BSTree<string>();
   static public BSTree<string> Record
   {
       get {return record;}
       set {record = value;}
   }
   ...
} 
```

然后你可以从你的`MyForm`班级中访问它，比如`MyConfig.Record`. `record`这将提供对基础成员的直接访问。

但更稳健的方法是创建代表消费者对成员进行*操作*的特定方法，而不仅仅是将成员直接暴露给消费者。这样，您可以限制允许对它们进行的操作类型，并可以以特定方式公开结果等。也就是说，您正在为基础成员增加价值，而不仅仅是“持有”它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:22:07.527

```
public static class MyStaticBStreeInstance
{
   public static BSTree Instance {get;private set;}
   static MyStaticBStreeInstance()
       {
          Instance = new BSTree<string>();
       }
} 
```

从任何地方，您都可以使用以下代码访问它

```
 var bstree = MyStaticBStreeInstance.Instance 
```*

# c++ - 使用 tr1::regex_search 匹配一大串字符串

> ID：15503372
> 
> 赞同：0
> 
> 时间：2013-03-19T15:16:17.543
> 
> 标签：c++, regex, tr1

我需要匹配任何字符串列表，我想知道我是否可以只使用类似的正则表达式，`"item1|item2|item3|..."`而不是只`strstr()`为每个字符串单独做一个。但该列表可能相当大 -**多达 10000 个项目**。正则表达式能很好地解决这个问题吗？它会比单独搜索每个字符串更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:31:09.290

正则表达式将起作用，并且肯定会比搜索每个字符串更快。虽然我不确定考虑到 10000 个输入模式，初始设置需要多少内存占用或时间。

但是，这是一个众所周知的问题，并且有很多特定的算法，例如：

*   [Rabin-Karp 字符串搜索算法](http://en.wikipedia.org/wiki/Rabin-Karp_string_search_algorithm)。
*   [Aho-Corasick 字符串搜索算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)。

和其他几个。他们都有不同的权衡，所以选择你的毒药。

在我们的项目中，我们需要多重替换解决方案，因此我们选择了 Aho-Corasick 算法并在其上构建了替换功能。

# c# - 当我点击 map-d3 时移动到其他页面

> ID：15503374
> 
> 赞同：0
> 
> 时间：2013-03-19T15:16:21.700
> 
> 标签：c#, json, d3.js

我在 d3 中为美国制作了一张地图。我正在为每个州塑造美国的形象。当我在任何状态下移动鼠标时，它会告诉我该形状的名称。现在我希望如果我点击任何状态，我应该被移动到其他页面。我该怎么做？这可能吗，实际上我想在单击该州时显示每个州的地图。我应该如何移动到其他页面？

显示美国的地图代码是

```
 <script type="text/javascript">
      var w = 1560;
      var h = 900;
      var proj = d3.geo.mercator();
      var path = d3.geo.path().projection(proj);
      var t = proj.translate(); // the projection's default translation
      var s = proj.scale() // the projection's default scale

      var map = d3.select("#vis").append("svg:svg")
        .attr("width", w)
        .attr("height", h)
        .call(d3.behavior.zoom().on("zoom", redraw));

      var axes = map.append("svg:g").attr("id", "axes");

      var xAxis = axes.append("svg:line")
        .attr("x1", t[0])
        .attr("y1", 0)
        .attr("x2", t[0])
        .attr("y2", h);

      var yAxis = axes.append("svg:line")
        .attr("x1", 0)
        .attr("y1", t[1])
        .attr("x2", w)
        .attr("y2", t[1]);

      var uk = map.append("svg:g").attr("id", "uk");
 d3.json("tryusa.json", function (json) {
          uk.selectAll("path")
          .data(json.features)
        .enter().append("svg:path")
         .attr("d", path)
        .append("svg:title")
        .text(function (d) { return d.properties.name; })

      });
      svg.selectAll(".subunit")
    .data(topojson.object(uk, uk.objects.subunits).geometries)
  .enter().append("path")
    .attr("class", function (d) { return "subunit " + d.id; })
    .attr("d", path);

      function redraw() {
          var tx = t[0] * d3.event.scale + d3.event.translate[0];
          var ty = t[1] * d3.event.scale + d3.event.translate[1];
          proj.translate([tx, ty]);

          // now we determine the projection's new scale, but there's a problem:
          // the map doesn't 'zoom onto the mouse point'
          proj.scale(s * d3.event.scale);

          // redraw the map
          uk.selectAll("path").attr("d", path);

          // redraw the x axis
          xAxis.attr("x1", tx).attr("x2", tx);

          // redraw the y axis
          yAxis.attr("y1", ty).attr("y2", ty);
      }
  </script> 
```

我有一个名为 tryusa.json 的 json 文件。我正在通过这个 json 文件显示地图。我想移动到其他页面？我应该如何进行？是否可以 ？还有其他方法吗？我使用的平台是 C#。请帮帮我。我对d3真的很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:07:18.017

考虑到您在评论中提供的代码：

```
d3.json("tryusa.json", function (json) { 
    uk.selectAll("path")
    .data(json.features) 
    .enter().
    .append("svg:path")
    .attr("d", path)
    .attr("Response.Redirect", "Default.aspx")
    .append("svg:title")
    .text(function (d) { return d.properties.name; })
    .on("click", function () { window.open("Default3.aspx") }) 
}); 
```

因此，在这里您将`on`侦听器添加到`svg:title`元素。因此，您必须单击工具提示或类似的东西。所以，我认为你应该把`on`监听器放在路径上：

```
d3.json("tryusa.json", function (json) { 
    uk.selectAll("path")
    .data(json.features) 
    .enter().
    .append("svg:path")
    .attr("d", path)
    .attr("Response.Redirect", "Default.aspx")
    .on("click", function () { window.open("Default3.aspx") })
    .append("svg:title")
    .text(function (d) { return d.properties.name; }) 
}); 
```

更准确地说，后面的一切`append`都会被封装在这个标签内。

# c# - C# SQL 以毫秒为单位插入

> ID：15503375
> 
> 赞同：0
> 
> 时间：2013-03-19T15:16:24.557
> 
> 标签：c#, sql, insert, milliseconds

我使用 C# 4.0 和 SQL server 2008 R2 我有一个像这样的 C# 脚本：

```
string sSql = "";
foreach (var oItem in LeListVoit_End)
{
    //insert into Lettrvoit 
    if (sSql != "") sSql += " UNION ALL ";
    sSql += "SELECT '" + oItem.IdLettre + "', '" + oItem.FaClient  +"', '" + oItem.Date_Cloture + "', '" + oItem.CodeDest + "', '" + oItem.ModalMode + "', '" + oItem.LibPort + "', '" + oItem.LibExpr + "', '" + oItem.LibUnite + "', '" + oItem.EnlvUnite + "', '" + oItem.NbrColis + "', '" + oItem.Poids.ToString().Replace(',', '.') + "', '" + oItem.LeCR.ToString().Replace(',', '.') + "', '" + oItem.LeVD.ToString().Replace(',', '.') + "', '" + oItem.CodeClient + "', '"
                                            + oItem.RsNom_Exp.Replace("'", " ") + "', '" + oItem.Addr_Exp.Replace("'", " ") + "', '" + oItem.CP_Exp + "', '" + oItem.Ville_Exp.Replace("'", " ") + "', '" + oItem.Tel_Exp + "', '" + oItem.Fax_Exp + "', '"
                                           + oItem.RsNom_Dest.Replace("'", " ") + "', '" + oItem.Addr_Dest.Replace("'", " ") + "', '" + oItem.CP_Dest + "', '" + oItem.Ville_Dest.Replace("'", " ") + "', '" + oItem.Tel_Dest + "', '" + oItem.Fax_Dest + "', '" + oItem.InseeDest + "', '"
                                           + Is_Print + "', '" + CHAUFFEUR + "', '" + oItem.Transporteur + "', '" + oItem.NoOrdreCumul + "', '" + oItem.CodeMag + "', '" + oItem.Facturation + "', '" + oItem.IsLiv_sign + "', '" + oItem.IsLiv_Samedi + "', '" + oItem.Observ + "', '" + oItem.LeAgence + "', '" + oItem.LibTourne + "', '" + oItem.Date_Clot_Reel + "'";
}
string sqlComm_Insert = "INSERT INTO LETTRE_VOIT_FINAL  ([NOID],FA_CLIENT, [DATE_CLOTURE], [CODE_DEST] ,[MODAL_MODE], [LIBELLE_PORT] ,[LIBELLE_EXPR], [LIBELLE_UNITE],ENLEV_UNITE, [NBR_COLIS], [POID], [ENLEV_CREMB], [ENLEV_DECL], CODE_CLIENT, [RS_NOM_EXP] ,[ADDR_EXP]  ,[CP_EXP] ,[VILLE_EXP] ,[TEL_EXP] ,[FAX_EXP],[RS_NOM_DEST] ,[ADDR_DEST] ,[CP_DEST] ,[VILLE_DEST]  ,[TEL_DEST] ,[FAX_DEST],INSEE_DEST, IS_PRINT, CHAUFFEUR, TRANSPORTEUR, NO_ORDRE_CUMMUL, CODE_MAG, FACTURATION, LIVRS_SIGN, LIVRS_SAMD, OBS, LIB_AGENCE, LIB_TOURNE, DATE_CLOTUR_REEL) " + sSql;

SqlCommand comm_Insert = new SqlCommand(sqlComm_Insert, connectionWrapper.conn);
comm_Insert.ExecuteScalar(); 
```

它运行良好，但我在调试时错过了 oItem.Date_Clot_Reel 的毫秒值，我得到了 '2013-03-19 16:02:18.807'

但是在我运行这个 sql 之后，我得到了 '2013-03-19 16:02:18.000'

我怎么能错过毫秒807？

提前谢谢你

PS：也许当我使用它时效果很好

```
comm_Insert.Parameters.AddWithValue("@NDATE_CLOTURE_REEL", oItem.Date_Clot_Reel); 
```

但是当我这样使用时，我无法使用 `sSql += " UNION ALL ";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:20:42.150

[http://msdn.microsoft.com/en-us/library/aa258277(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258277(v=sql.80).aspx)

请注意日期时间的准确性是百分之一秒（相当于 3.33 毫秒或 0.00333 秒）

小日期时间精度为一分钟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:35:03.623

检查 SQL Server 中的数据类型。要以毫秒为单位存储日期时间，需要采用 DateTime 数据类型而不是 smalldatetime。

# c# - Windows Phone 中的地图

> ID：15503378
> 
> 赞同：0
> 
> 时间：2013-03-19T15:16:45.040
> 
> 标签：c#, windows-phone-7

我的应用程序使用 bing 地图控件。我用谷歌地图创建了新的瓦片层（

> [http://mt0.google.com/vt/lyrs=y&z=](http://mt0.google.com/vt/lyrs=y&z=) {0}&x={1}&y={2}

) 但它不起作用。我读过一些关于 google 不支持 windows phone 的内容。也是我的情况吗？之后我尝试了openstreetmap，没问题，但没有卫星图像。其他选择是诺基亚地图，但我不知道如何使用卫星图像。此链接来自诺基亚网站（

> [http://maptile.maps.svc.ovi.com/maptiler/v2/maptile/newest/normal.day/](http://maptile.maps.svc.ovi.com/maptiler/v2/maptile/newest/normal.day/) {0}/{1}/{2}/256/png8?token={3}&app_id={ 4}&lg={5

}) 没有放置视图模式的项目。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:05:38.190

你想使用必应地图还是谷歌地图？我建议必应

# jquery - 页面刷新后jquery移动脚本不起作用

> ID：15503379
> 
> 赞同：1
> 
> 时间：2013-03-19T15:16:47.037
> 
> 标签：jquery, jsf, jquery-mobile

我正在使用 JQM 和 JSF。在页面中，在我触发 ah:commondbutton 并且它的操作重新运行字符串 null '' 后，页面刷新和任何脚本都不起作用。我在就绪函数和移动 pageinit 函数中设置了断点，但它们都不起作用。当我删除 jquerymobile 库时，它可以工作。对此有任何想法..

```
<script src="js/jquery-1.8.3.js"></script>
<script type="text/javascript">
  //<![CDATA[
  $(document).on('mobileinit', function() {
    $.mobile.defaultPageTransition = 'slide';
    $.mobile.hashListeningEnabled = false;
  });
  //]]>
</script>        
<script src="js/jquery.mobile-1.2.0.js"></script>

   $(document).ready(function(){
    //some codes here
});

<div data-role="page" id="page1" >
     <script type="text/javascript">

        $('#page1').live('pageinit', function() {  

     $("#getNewValuesLinkId").bind('click', function() {   
       $("#getnewValues").trigger("click");//this jsf button
       });    

  });

</div> 
```

jsf h:commonbutton 处理并返回空字符串“”。页面刷新并且任何脚本都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:05:59.933

我遇到过类似的问题。您可以尝试将您的 Javascript 代码直接放在脚本标签中，即不在 $(document).ready 或 $(document).on 中。

例如不是这个：

```
<script>
    $(document).on('mobileinit', function() {
    $.mobile.defaultPageTransition = 'slide';
    $.mobile.hashListeningEnabled = false;
  });
</script> 
```

但这不是（在适当的地方）：

```
<script>
    $.mobile.defaultPageTransition = 'slide';
    $.mobile.hashListeningEnabled = false;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:34:32.800

我有工作，但不知道问题的原因是什么。

```
 $(document).on('mobileinit', function() {
    $.mobile.defaultPageTransition = 'slide';
    $.mobile.hashListeningEnabled = false;
  }); 
```

这是在页面加载时 funksion 的工作原理。但是我的项目在刷新后它们不起作用。Thefefore there is 意味着此页面不会再次重新加载。它让我想到了 ajax 方法。在ajax处理之后，页面的任何脚本都会被调用，所以ready、pageinit、mobile init函数都不会被调用。

所以我把代码放在下面，在上面看到的 mobileinit 中。

```
$.mobile.ajaxEnabled = false; 
```

解决方案是

```
 $(document).on('mobileinit', function() {
    $.mobile.defaultPageTransition = 'slide';
    $.mobile.hashListeningEnabled = false;
    $.mobile.ajaxEnabled = false;
  }); 
```

我再次虽然这个页面如何使用ajax？

# c# - ItemDataBound 与中继器如何处理

> ID：15503385
> 
> 赞同：0
> 
> 时间：2013-03-19T15:17:10.360
> 
> 标签：c#, repeater

```
 protected void rptLastPromotion_ItemDataBound(object sender, System.Web.UI.WebControls.RepeaterItemEventArgs e)
        {
                HtmlAnchor aView = (HtmlAnchor)e.Item.FindControl("aDescription");
                Label lbldescriptionlink = (Label)e.Item.FindControl("lblDescription");
                Label lbldescriptionNoLink = (Label)e.Item.FindControl("lblDescription2");
                HiddenField hfIsNewTab = (HiddenField)e.Item.FindControl("hfNewTab");

                for (int i = 0; i <= rptLastPromotion.Items.Count; i++)
                {
                    if (!String.IsNullOrEmpty(aView.HRef))
                    {
                        lbldescriptionlink.Visible = true;
                        lbldescriptionNoLink.Visible = false;
                        if (Convert.ToBoolean(hfIsNewTab.Value) == true)
                        {
                            aView.Target = "_blank";
                        }
                    }
                    else
                    {
                        lbldescriptionlink.Visible = false;
                        lbldescriptionNoLink.Visible = true;
                    }

                }

            } 
```

我想处理和查看转发器中的项目，但我的代码中有错误。这有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:52:57.860

您的问题非常模糊，但我相信您的问题可能是您没有检查中继器项目 ItemType。这样做的标准方法是：

```
if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
```

此外，无需在中继器的项目上循环。( `for (int i = 0; i <= rptLastPromotion.Items.Count; i++)`) 这就是 ItemDataBound 事件的用途。

所以你的代码现在看起来像这样。

```
protected void rptLastPromotion_ItemDataBound(object sender, System.Web.UI.WebControls.RepeaterItemEventArgs e)
        {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
                HtmlAnchor aView = (HtmlAnchor)e.Item.FindControl("aDescription");
                Label lbldescriptionlink = (Label)e.Item.FindControl("lblDescription");
                Label lbldescriptionNoLink = (Label)e.Item.FindControl("lblDescription2");
                HiddenField hfIsNewTab = (HiddenField)e.Item.FindControl("hfNewTab");

                    if (!String.IsNullOrEmpty(aView.HRef))
                    {
                        lbldescriptionlink.Visible = true;
                        lbldescriptionNoLink.Visible = false;
                        if (Convert.ToBoolean(hfIsNewTab.Value) == true)
                        {
                            aView.Target = "_blank";
                        }
                    }
                    else
                    {
                        lbldescriptionlink.Visible = false;
                        lbldescriptionNoLink.Visible = true;
                    }

              }
            } 
```

如果我不理解/回答您的问题，您可能希望通过更多详细信息和解释来扩展您的原始问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:57:08.920

您需要检查 的`ItemType`内部`ItemDataBound`事件`Repeater`。

```
protected void rptLastPromotion_ItemDataBound(object sender,System.Web.UI.WebControls.RepeaterItemEventArgs e)  
{  
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)  
    {
          // write your logic here             
    }
} 
```

# ruby - Ruby 相当于 unix 中的 find

> ID：15503386
> 
> 赞同：1
> 
> 时间：2013-03-19T15:17:13.517
> 
> 标签：ruby, tree, rubygems, directory

是否有 GNU find 或 PERL 的 File::Find 在 Ruby 中的等价物，也许是宝石？也就是说，横穿整棵树。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:24:07.763

Stdlib offers both [`Dir#glob`](http://ruby-doc.org/core-2.0/Dir.html#method-c-glob) and the [`Find`](http://www.ruby-doc.org/stdlib-2.0/libdoc/find/rdoc/Find.html) module. Coupled with Enumerable methods and the plethora of file test methods, this gives you all you need to simply implement file find behaviour.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:23:36.587

You can use Dir.glob

```
Dir.glob "**/*" do |file_path|
    #do somthing with file_path
end 
```

# installation - TreeTagger 安装成功，但无法打开 .par 文件

> ID：15503388
> 
> 赞同：5
> 
> 时间：2013-03-19T15:17:27.657
> 
> 标签：installation, nlp, stemming, pos-tagger, lemmatization

有谁知道如何解决这个文件读取错误，`TreeTagger`因为它是一种常见的自然语言处理工具，用于`POS`标记、词形还原和分块句子？

```
alvas@ikoma:~/treetagger$ echo 'Hello world!' | cmd/tree-tagger-english 
        reading parameters ...

ERROR: Can't open for reading: /home/alvas/treetagger/lib/english.par
aborted. 
```

[正如http://www.ims.uni-stuttgart.de/projekte/corplex/TreeTagger/installation-hints.txt](http://www.ims.uni-stuttgart.de/projekte/corplex/TreeTagger/installation-hints.txt)所暗示的，我没有遇到任何可能的安装问题。我已按照网页上的说明进行操作，并且已正确安装（[http://www.ims.uni-stuttgart.de/projekte/corplex/TreeTagger/#Linux](http://www.ims.uni-stuttgart.de/projekte/corplex/TreeTagger/#Linux)）：

```
alvas@ikoma:~$ mkdir treetagger
alvas@ikoma:~$ cd treetagger
alvas@ikoma:~/treetagger$ wget ftp://ftp.ims.uni-stuttgart.de/pub/corpora/tree-tagger-linux-3.2.tar.gz
alvas@ikoma:~/treetagger$ wget ftp://ftp.ims.uni-stuttgart.de/pub/corpora/tagger-scripts.tar.gz
alvas@ikoma:~/treetagger$ wget ftp://ftp.ims.uni-stuttgart.de/pub/corpora/install-tagger.sh
alvas@ikoma:~/treetagger$ wget ftp://ftp.ims.uni-stuttgart.de/pub/corpora/dutch-par-linux-3.2-utf8.bin.gz
alvas@ikoma:~/treetagger$ wget ftp://ftp.ims.uni-stuttgart.de/pub/corpora/german-par-linux-3.2-utf8.bin.gz
alvas@ikoma:~/treetagger$ wget ftp://ftp.ims.uni-stuttgart.de/pub/corpora/italian-par-linux-3.2-utf8.bin.gz
alvas@ikoma:~/treetagger$ wget ftp://ftp.ims.uni-stuttgart.de/pub/corpora/spanish-par-linux-3.2-utf8.bin.gz
alvas@ikoma:~/treetagger$ wget ftp://ftp.ims.uni-stuttgart.de/pub/corpora/french-par-linux-3.2-utf8.bin.gz

alvas@ikoma:~/treetagger$ sh install-tagger.sh 

Linux version of TreeTagger installed.
Tagging scripts installed.
German parameter file (Linux, UTF8) installed.
German chunker parameter file (Linux) installed.
French parameter file (Linux, UTF8) installed.
French chunker parameter file (Linux, UTF8) installed.
Italian parameter file (Linux, UTF8) installed.
Spanish parameter file (Linux, UTF8) installed.
Dutch parameter file (Linux, UTF8) installed.
Path variables modified in tagging scripts.

You might want to add /home/alvas/treetagger/cmd and /home/alvas/treetagger/bin to the PATH variable so that you do not need to specify the full path to run the tagging scripts. 
```

**但是当我尝试测试软件时，我得到了这些错误：**

```
alvas@ikoma:~/treetagger$ echo 'Hello world!' | cmd/tree-tagger-english 
    reading parameters ...

ERROR: Can't open for reading: /home/alvas/treetagger/lib/english.par
aborted.
alvas@ikoma:~/treetagger$ echo 'Das ist ein Test.' | cmd/tagger-chunker-german

ERROR: Can't open for reading: /home/alvas/treetagger/lib/german-chunker.par
aborted.

ERROR: Can't open for reading: /home/alvas/treetagger/lib/german.par
aborted.
    reading parameters ...

ERROR: Can't open for reading: /home/alvas/treetagger/lib/german.par
aborted. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T19:06:40.203

我认为有两个问题：首先，脚本名称中应该有“-utf8”，例如`cmd/tagger-chunker-german-utf8`，因为您下载了 UTF-8 数据。其次，标记和分块都需要一个数据文件。请参阅主页，其中包含“PC 的参数文件”和“PC 的 Chunker 参数文件”部分 - 从这两个部分下载文件，然后重新执行`install-tagger.sh`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T10:38:30.380

你写了**cmd** /tree-tagger-english，但我认为正确的路径（有参数文件的地方）是：

> **lib** /tree-tagger-english

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-22T10:21:19.133

我有同样的问题。我意识到我为我需要的语言下载的 .par 文件没有被提取（它们仍在 .gz 中）。

确保先将它们解压缩到目录中，然后重试。

# javascript - 针对 Oauth 服务器的客户端 MVC (javascript) - 困惑

> ID：15503392
> 
> 赞同：1
> 
> 时间：2013-03-19T15:17:33.097
> 
> 标签：javascript, rest, model-view-controller, oauth, angularjs

我们即将用 javascript (angularjs) 编写客户端 mvc 应用程序。在服务器端，我们运行 node.js 来提供模板等。我是故事的“前端”方面的新人——我是“典型的”java 后端人员——所以提前道歉 ;-)

我想对我们自己的基于 oauth 的内部 rest api 进行身份验证和交谈。我可以让握手工作，基本设置似乎正在工作。

我的问题是：我将所有的 oauth 握手和“包装”代码放在哪里？

到目前为止，我已经找到了这些解决方案：

让我们假设客户端和服务器端都是用 javascript 实现的，“真实服务器”是一个码头，服务于 oauth 保护的其余 api。

客户端 (js) -> 服务器 (node.js) -> 服务器 (jetty+oauth)

1.  客户端 -> node.js -> 做所有的 oauth 事情
2.  客户端 -> 直接到码头服务器

版本 1\. 具有保护 api 和 oauth 处理的所有细节的好处（因此没有人查看 html/js 的源代码可以看到这一点）

版本 2\. 具有跳过中间层的优势，但每个人都可以看到 oauth 密钥/秘密....

我希望你明白我的意思。是否有任何指南/教程详细说明“最佳实践”来处理在用户浏览器内运行的客户端 mvc 应用程序所需的安全 api？

任何帮助高度赞赏。

干杯马塞尔

# javascript - 返回对象内的 Ajax 数据

> ID：15503397
> 
> 赞同：0
> 
> 时间：2013-03-19T15:17:44.493
> 
> 标签：javascript, jquery, ajax, object

我在获取要在对象中使用的 Ajax 响应时遇到问题。

```
function cart(){
    this.items = [];

    this.addItem = function(item){
        //sorts and adds items to this.items
    }

    this.retrieveCart = function(){
        var itemArray = JSON.parse($.cookie('cartItems'));
        var itemNumbers = [];
        var outData = [];
        for(var i in itemArray){
            itemNumbers.push(i);
        }
        $.post('beta-category-ajax.html', {'get' : itemNumbers.join(",")},
        function(data){
            for(var i in data){
                var currentItemNumber = data[i].I;
                var quantity = itemArray[currentItemNumber];
                data[i].Quantity = quantity;
                outData.push(data[i]);
            }
        });
        this.addItem(outData);
    } 
```

我希望能够`this.addItem(Array)`在仍然异步使用 Ajax 的同时运行我看到了这个线程[jQuery AJAX 处理问题](https://stackoverflow.com/questions/6438244/jquery-ajax-handling-problem)，但如果这适用于我，我不是。

提前谢谢大家的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:19:44.067

我对您的要求并不完全清楚，但似乎`this.addItem`无法按照当前编写代码的方式工作。`this`您传递给 $.post 的匿名函数范围的变化值。`this`缓存对in的引用`retrieveCart`。

```
this.retrieveCart = function () {
  var self = this;
  ...
  $.post(..., function () { 
    ...
    self.addItem(outData);
  });
} 
```

# java - 尝试分段读取此文件。阅读一些部分并跳过一些

> ID：15503399
> 
> 赞同：1
> 
> 时间：2013-03-19T15:17:48.397
> 
> 标签：java

我正在尝试读取文件，我想读取文件的某些部分并跳过某些部分，直到我到达文件末尾。这就是我所拥有的，但我没有得到我想要的结果。这个想法是通读所有行并检查它是否以“CH”或“CL”开头，如果直到文件末尾才移动到下一行并存储所有符合条件的行

```
 new BufferedReader (new FileReader ("c:\\demo5.properties\\"));
    while(( br.readLine()) != null ){
        if (br.readLine().startsWith("CH") ||  br.readLine().startsWith("CL")) {
        buf = new StringBuffer();
        buf.append( br.readLine());

        while (br.readLine()!= null && !br.readLine().startsWith("#") &&  !br.readLine().contains("claimID")){
            buf.append( br.readLine()).append( "\n" );
        }
         z = buf.toString();

         System.out.println(z);

        s3+= z;
    }
        br.readLine(); 
```

**文件格式**

```
 CH.field 
 CH.field
 CH.field
 CH.field
 CH.field
 #CH.field
 #CH.field
 #CH.field
 #CH.field
 *********
 **
 *********
 CL1.field
 CL1.field
 CL1.field
 CL1.field
 CL1.field
 *****************
#Result.CL1.field
#Result.CL1.field
#Result.CL1.field
Result.CL1.field
*********
CL4.field
CL4.field
CL4.field
#CL4.field
#CL4.field
#CL4.field
***********

   #Result.CL4
  #Result.CL4
  #Result.CL4
  #Result.CL
 Result.CL4
  CL5.field
 CL5.field
 CL5.field
 #CL5.field
 #CL5.field 
```

输出

```
CH.fieldCH.field

CL1.field#Result.CL1.field
CL4.field
CL4.field 
```

#CL4.field

```
CL5.fieldCL5.field 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:22:13.710

看看这个循环：

```
while (br.readLine()!= null 
       && !br.readLine().startsWith("#")
       &&  !br.readLine().contains("CH.field.claimID")){
    buf.append( br.readLine()).append( "\n" );
} 
```

你打了`readLine()` *4 次*电话。这将读取四个不同的行。你想要这样的东西：

```
String line;
while ((line = br.readLine()) != null &&
       !line.startsWith('#') &&
       !line.contains("CH.field.claimID")) {
    buf.append(line).append("\n");
} 
```

至少，我认为这就是您想要的 - 我发现描述有点混乱。无论如何，这将读取每一行，当它到达文件末尾*或*以“#”开头的行*或*包含“CH.field.claimID”的行时停止......但建立一个`StringBuffer`包含之前所有行的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:34:50.250

从您的问题中，我了解到您想要存储以“CH”或“CL”开头的所有行并忽略其余行。

所有 br.readline 调用都将该文件读取器指针移动到下一行。

格式对我来说看起来很奇怪，也许试试这个：

```
 String input = "";
    buf = new StringBuffer();
    new BufferedReader (new FileReader ("c:\\demo\\TestIL_Cross_000005.properties\\"));

    // read in the line to "input" if it exists
    while((input = br.readLine()) != null ){
        // check for starting string match
        if (input.startsWith("CH") ||  input.startsWith("CL")) { 
            // append to whatever data struct here since it matches       
            buf.append(input + "\n");
           // print "input" here for testing
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:35:31.050

这是您在代码中犯的一个非常基本的错误。您必须将 readLine() 方法返回的数据存储在 String 变量中，并将其用于进一步的操作。您每次都在调用 readLine() 方法，您想对接收到的 String 执行操作，结果它每次都获取新数据并且以前的数据都丢失了。

您的代码的修改版本：

```
 new BufferedReader (new FileReader ("c:\\demo\\TestIL_Cross_000005.properties\\"));
     String line = null;

        while(( line= br.readLine()) != null ){
            if (line.startsWith("CH") ||  v.startsWith("CL")) {
            buf = new StringBuffer();
            buf.append(line);

            while (line!= null && !line.startsWith("#") &&  !line.contains("CH.field.claimID")){
                buf.append( line).append( "\n" );
            }
             z = buf.toString();

             System.out.println(z);

            s3+= z;
        }

} 
```

在这里，我刚刚从 String 引用中的 readLine() 方法收集了数据，并用于执行不同的检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:32:29.790

对 readLine() 的调用将读取以 '\n' 结尾的一行，然后文件指针将指向下一行（或者更准确地说，它将指向 '\n' 之后的任何内容）。

例如

在 readLine() 之前：

filePointer --> 这是第一行 \n

----------------- 这是第二行 \n

在 readLine() 之后：

------------------这是第一行\n

filePointer --> 这是第二行 \n

您多次调用 readLine() 认为它指的是同一行。这就是你出错的地方。

# perl - perl 为什么这不会产生使用严格的错误？

> ID：15503400
> 
> 赞同：1
> 
> 时间：2013-03-19T15:17:51.270
> 
> 标签：perl

我有以下 perl 代码。我正在使用 -w 并使用严格。为什么@LDRATA::SUITES 不生成错误？$x 呢？

```
#!/grid/common/bin/perl -w
use strict;

for (@LDRATA::SUITES) { print("one\n"); }
for ($LDRATA::SUITES[0]) { print("two\n"); }
for($x) { print("three\n"); } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:23:09.923

根据 perldoc，[`use strict vars`](http://perldoc.perl.org/strict.html)如果变量未声明或完全限定，将引发错误。

`@LDRATA::SUITES`是完全限定变量的示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T16:04:20.980

*正如其他人所说，如果变量未声明或完全限定*，则 use strict vars 将引发错误。在这里它是完全合格的。

如果你在一个地方给出了错误的包名，你会得到一个警告（虽然不是来自严格的）：

```
$ perl -w
use strict;

for (@LDRATA::SUITES) { print("one\n"); }
__END__
Name "LDRATA::SUITES" used only once: possible typo at - line 3. 
```

如果你在多个地方给出它，perl 没有任何方法可以判断这不是故意的，因此不会出现错误或警告。

# silverlight-5.0 - 从 Windows 检测 Silverlight OOB 安装

> ID：15503404
> 
> 赞同：1
> 
> 时间：2013-03-19T15:17:58.250
> 
> 标签：silverlight-5.0

有没有一种方法可以从 Windows 实用地检测 Silverlight OOB 应用程序是否安装在计算机上？（IE不是浏览器）。可能是可以检查的注册表路径或文件路径？我有另一个应用程序（非Silverlight），如果已安装，则需要打开silverlight OOB 应用程序，如果未安装，则将其带到网页进行安装。操作系统将始终是 winXP 或 win7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:13:25.397

我正在开发 Silverlight OOB 应用程序，并将其安装在本地。
我查看了桌面上的快捷方式，然后在注册表中进行了探索：

> Windows 注册表编辑器版本 5.00
> 
> [HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Uninstall\348253213.demo.net] "DisplayName"="DemoApp" "Comments"="桌面上的DemoApp；在家、工作或旅途中。" "Publisher"="demo.net" "InstallLocation"="C:\Users\Charles\AppData\Local\Microsoft\Silverlight\OutOfBrowser\348253213.demo.net" "NoRepair"=dword:00000001 "NoModify"=dword: 00000001 "UninstallString"="C:\Program Files (x86)\Microsoft Silverlight\5.1.20125.0\Silverlight.Configuration.exe -uninstallApp 348253213.demo.net"

不知道“348253213”是怎么弄出来的，但也许这会给你一些线索来找出已安装的 SL 应用程序......

# r - R中的唯一元组与rle

> ID：15503411
> 
> 赞同：1
> 
> 时间：2013-03-19T15:18:15.220
> 
> 标签：r, unique

如何像这样在df中唯一（rle唯一）元组

```
structure(c("M01", "M01", "M01", "M01", "M01", "M02", "M02", 
"M02", "M02", "M03", "M03", "F04", "F04", "F02", "F02", "F04", 
"F10", "F10", NA, "F10", "F01", "F01"), .Dim = c(11L, 2L), .Dimnames = list(
    NULL, c("a", "b")))

> sample
      a     b    
 [1,] "M01" "F04"
 [2,] "M01" "F04"
 [3,] "M01" "F02"
 [4,] "M01" "F02"
 [5,] "M01" "F04"
 [6,] "M02" "F10"
 [7,] "M02" "F10"
 [8,] "M02" NA   
 [9,] "M02" "F10"
[10,] "M03" "F01"
[11,] "M03" "F01" 
```

得到这个：

```
structure(c("M01", "M01", "M01", "M02", "M02", "M03", "F04", 
"F02", "F04", "F10", "F10", "F01"), .Dim = c(6L, 2L), .Dimnames = list(
    NULL, c("d", "c")))
> output
     d     c    
[1,] "M01" "F04"
[2,] "M01" "F02"
[3,] "M01" "F04"
[4,] "M02" "F10"
[5,] "M02" "F10"
[6,] "M03" "F01" 
```

所以这个想法是得到一个带有元组的df，但基于行并且仅基于前一个元素是唯一的，所以： unique(sample) 不提供我需要的东西。rle 是否可以在此 df 上运行以考虑元组并将 df 作为输出？有更好的方法吗？

```
rle(sample[,2]$values) 
```

给出了想要的结果，但显然我丢失了第 1 列的有价值信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:36:34.357

这个怎么样？

```
# dd is the matrix structure you posted in the question
dd <- as.data.frame(dd)                     ## convert to data.frame
dd[] <- lapply(dd, as.character)            ## change columns to character
na.omit(dd[cumsum(rle(dd$b)$lengths), ])    ## get indices by cumsum'ing rle-lengths 
                                            ## wrap with na.omit to remove NA rows
#      a   b
# 2  M01 F04
# 4  M01 F02
# 5  M01 F04
# 7  M02 F10
# 9  M02 F10
# 11 M03 F01 
```

# javascript - 添加 jQuery .data() 与向元素添加 data-xxx 属性

> ID：15503413
> 
> 赞同：0
> 
> 时间：2013-03-19T15:18:20.577
> 
> 标签：javascript, jquery, element, jquery-data

因此，您可以通过附加将 html 添加到文档中。

```
$game.append('<div data-letter="A">A</div>'); 
```

或者你可以：

```
var game = document.getElementById('game');
var div = document.createElement('div');
$(div).data('letter', 'A');
game.appendChild(div); 
```

我的问题是这些方法中哪一种更可取。

我正在使用数据属性来提高速度，目前我正在使用前一个示例 (.append())。它工作正常。

但是，当我像这样动态更改此元素的数据时：

```
$(this).data('letter', 'U'); 
```

它会更改元素存储在内存中的数据，但不会更新属性。此示例中的属性将保留为“data-letter="A"”。再一次，一切都在幕后工作得很好，当我调用 $(this).data('letter') 时，我得到了字母'U'。但这让我质疑我是否应该避免使用数据属性。属性是否在附加时读取一次，然后上传到内存中，然后属性就死了。还是在找不到 .data() 时读取属性？

我担心是否是后者，因为那不会提供最佳的速度性能。我想确保在附加元素时将所有内容上传到内存中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:20:58.437

当您无法使用该`data`功能时，这些属性很有用：

*   生成 HTML 服务器端时
*   一次生成一大堆 HTML 时

在其他情况下，没有理由更喜欢将数据作为 HTML 字符串中的属性传递：它只需要更多的解析。

请注意，您使用 jQuery 的方式有些冗长。你可以减少

```
var game = document.getElementById('game');
var div = document.createElement('div');
$(div).data('letter', 'A');
game.appendChild(div); 
```

到

```
$('#game').append($('<div>', {data: {letter:'A'}})); 
```

# android - 致电亚行的结果

> ID：15503415
> 
> 赞同：0
> 
> 时间：2013-03-19T15:18:21.667
> 
> 标签：android, adb, at-command

在CDMA的AT命令文档中，我发现当我们用ATD123456789开始通话时，会有不同的响应。有响应：“WCNT:9 主叫方可以听到主叫方电话响铃的声音。但是这个事件并不意味着其他主叫方已接听”。当试图从我的 Android 手机上的 adb 发送 ATD123456789 时，他们让我：

```
 ATD123456789;
 OK 
```

但不是响应 WCNT:9。有人可以帮助我，为什么 WCNT:9 不显示。并且如果有另一种解决方案来检测主叫方电话铃声的播放音频时间。谢谢你，对我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:09:17.633

你可以做`dumpsys telephony.registry`并检查`mCallState`价值

```
CALL_STATE_IDLE = 0
CALL_STATE_RINGING = 1
CALL_STATE_OFFHOOK = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T12:14:31.887

如果您可以访问 AT 接口，那么另一个要考虑的命令是：

`AT+CLCC`列出当前通话

见[3GPP TS-27.007](http://www.3gpp.org/ftp/specs/archive/27_series/27.007/27007-8f0.zip)

输出应该易于理解，并为您提供以下状态：

```
<stat> (state of the call):
0   active
1   held
2   dialing (MO call)
3   alerting (MO call)
4   incoming (MT call)
5   waiting (MT call) 
```

# objective-c - 活动监视器 - 分析/不分析时的内存使用情况

> ID：15503425
> 
> 赞同：0
> 
> 时间：2013-03-19T15:18:39.033
> 
> 标签：objective-c, xcode, cocoa, instruments

知道为什么我的应用程序的内存使用量在使用 Instruments 分析器（搜索泄漏）时*不会*增加，但是当我不使用任何分析器时会增加吗？每次执行的操作大约需要 1MB。仪器没有显示任何泄漏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:42:18.770

操作系统内存管理是一件复杂的事情。很可能当您释放内存时，它不会立即返回到系统，而是仍然“附加”到您的进程，以使您的应用程序需要的任何未来分配更有效。尽管它被记录为进程内存空间的一部分，但它会被标记为未使用，并且当系统内存不足时（或当您的应用程序退出时），它会从您的应用程序中回收未使用的内存。

如果 Instruments 没有报告任何泄漏，你应该没问题。

# windows - 是否有 Windows 注册表的已知 CLSID 的列表？

> ID：15503428
> 
> 赞同：0
> 
> 时间：2013-03-19T15:18:43.297
> 
> 标签：windows, com, registry, clsid

在 Windows 注册表中驻留许多 CLSID 值（在 中`HKEY_CLASSES_ROOT\CLSID`），例如`{16d51579-a30b-4c8b-a276-0ff4dc41e755}`，其中许多可能属于广为人知的甚至是内置的应用程序或库。是否有包含这些映射的列表或数据库？

一些用法是，在注册表查看器中显示更有意义的名称以及键，或者检查特定应用程序是否存在（或存在但不再存在）但在注册表中留下了一些键。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:21:59.120

您不应依赖此映射。

如果您需要从[ProgID](http://msdn.microsoft.com/en-us/library/dd542719%28VS.85%29.aspx)转到 CLSID 或相反，您可以通过调用[ProgIDFromCLSID](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690567%28v=vs.85%29.aspx)或[CLSIDFromProgID](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688386%28v=vs.85%29.aspx) API 来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-06T18:59:27.757

它在注册表中。你可以试试：

```
Get-ItemProperty -Path "HKLM:\SOFTWARE\Classes\CLSID\*" `
    |select PSChildName,`(default`) |ft -auto * 
```

HKEY_CLASSES_ROOT 是 HKEY_LOCAL_MACHINE\SOFTWARE\Classes 的别名。每个 CLSID 下的各种键值中都存储了其他单词，因此您可以使用 PowerShell 变得更聪明，但这是一个开始。

# asp.net - 为什么这个侧边栏背景颜色没有按照 CSS 中的规定改变？

> ID：15503431
> 
> 赞同：0
> 
> 时间：2013-03-19T15:18:54.163
> 
> 标签：asp.net, html, css

我开始使用“Beginning ASP.NET 4 : in C# and VB”一书来学习 ASP.NET（Imar Spaanjaars - Wrox）。现在我被困在第 79 页的“尝试一下”部分：除了侧边栏没有背景颜色，预计它是灰色的之外，一切都很顺利。

我的页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        .style1
        {
            color: #663300;
        }
        .style2
        {
            color: #FF0066;
        }
    </style>
    <link href="Styles/Styles.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <form id="form1" runat="server">
    <div id="PageWrapper">
        <div id="Header">
            Header Goes Here
        </div>
        <div id="MenuWrapper">
            Menu Goes Here
        </div>
        <div id="MainContent">
            <h1>
                Hi there visitor and welcome to Planet Wrox</h1>
            <p>
                We&#39;re glad you&#39;re <span class="style2">paying a visit</span><span class="style1">
                </span>to <a href="http://www.PlanetWrox.com">www.PlanetWrox.com</a>, the coolest
                music community site on the Internet.</p>
            <p>
                Feel free to have a look around; there are lots of interesting <strong>reviews and concert
                    pictures </strong>to be found here.</p>
        </div>
        <div id="SideBar">
            Sidebar Goes Here</div>
        <div id="Footer">
            Footer Goes Here
        </div>
    </div>
    </form>
</body>
</html> 
```

CSS 文件：

```
#Header
{
    background-color: #C0C0C0;
    width: 844px;
    height: 86px;
}

*
{
    font-family: Arial;
}

h1
{
    font-size: 20px;
}

#PageWrapper
{
    width: 844px;
}

#MenuWrapper
{
    width: 844px;
}

#MainContent
{
    width: 664px;
    float: left;
}

#Sidebar
{
    background-color: Gray;
    width: 180px;
    float: left;
}

#Footer
{
    background-color: #C0C0C0;
    width: 844px;
    clear: both;
} 
```

结果（**侧边栏背景预计为灰色**）： ![在此处输入图像描述](../Images/b2c139898ed50b5138a355adbb45f455.png)

我是不是搞错了，谁能告诉我在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:21:05.523

“边栏”！=“边栏”

区分大小写

# joomla - 我的 Joomla 组件没有显示任何内容

> ID：15503433
> 
> 赞同：0
> 
> 时间：2013-03-19T15:19:06.297
> 
> 标签：joomla, components, joomla2.5, joomla-component

我已经构建了自己的组件。我对这些东西非常了解，但突然间我想知道对我的自定义组件的 joomla 请求没有显示任何内容。它显示空白页。看到这个： [http ://designsoft.bestplacestestserver.com/index.php?option=com_marketplacemanager](http://designsoft.bestplacestestserver.com/index.php?option=com_marketplacemanager)

这是请求未到达的组件的“marketplacemanager.php”文件的初始代码。不知道为什么。

**代码——marketplacemanager.php**

> 定义（'_JEXEC'）或死亡；
> 
> jimport('joomla.application.component.helper');
> 
> 回声'aa'；出口; // 应该有一些显示在这里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:03:18.560

转到全局配置。在服务器选项卡上，将错误报告转为开发。重新加载页面。您现在很可能会看到该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:02:35.890

Try this, replace the first line of your code with:

```
defined('_JEXEC') or die('why is blank?'); 
```

If still does not show anything it means displaying errors on your server is locked, so checking the error log would be the only option.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:15:35.387

这个问题已经解决。实际上 MVC 命名模式或其他东西是错误的。我没有正确重命名我正在重用的现有组件。

# scala - 短路布尔运算的Scala尾递归优化

> ID：15503437
> 
> 赞同：2
> 
> 时间：2013-03-19T15:19:15.190
> 
> 标签：scala, tail-recursion, short-circuiting

我在 Scala 中写了一个这样的函数：

```
def isSorted[T](list : List[T])(compare : (T, T) => Boolean) : Boolean = {
    list match {
        case Nil => true
        case x :: Nil => true
        case x :: rest => !compare(rest.head, x) && isSorted(rest)(compare)
    }
} 
```

我很好奇编译器是否会优化递归调用。递归调用只有在前导比较成功时*才会发生。*如果没有，有没有办法早点轰炸，仍然实现尾递归优化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:25:16.357

`@tailrec`因此，正如@omnomnom 所说，您可以通过将注释添加到方法来检查某些内容是否正在被 TCO 编辑。如果编译器无法优化它，它会抛出一个错误。

我们可以用一个简单的例子来验证这一点：

```
@tailrec
def fact(n : Int) : Int = fact(n - 1) * 2 
```

编译器出现以下错误：

> test.scala:6：错误：无法优化 @tailrec 注释方法事实：它包含一个不在尾部位置的递归调用

然而，在你的程序上尝试这个，答案是......是的！所以显然编译器很乐意优化你的尾调用:-)

# python - 如何提高 django 中软删除的性能？

> ID：15503438
> 
> 赞同：0
> 
> 时间：2013-03-19T15:19:20.060
> 
> 标签：python, mysql, django

我有一组中等大小的模型（大约 350,000 个），由 MySQL InnoDB 表支持。我目前正在使用一种类似于[这种](http://terrarum.net/development/soft-deleting-with-django.html)在数据库中存储`deleted`属性的软删除方法。

我有一个显示这些项目计数的视图，我发现过滤软删除的项目非常慢。

`Item.objects.filter(deleted=False).count() -> ~400ms`

如果我不排除删除的对象，计数是比较快的。

`Item.objects.all().count() -> ~140ms`

奇怪的是，如果我`deleted`在 db 中的列上添加索引，时间会增加。

`Item.objects.filter(deleted=False).count() -> ~450ms # indexed on 'deleted'`

我可以考虑这种软删除方法的哪些替代方法不会使我的应用程序变慢 3 倍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:28:08.307

将已删除的项目存储在单独的表中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-26T21:31:27.247

复制自另一个讨论。

“查询变得非常复杂” - 选择时使用视图而不是表格。“查询随时间变慢” - 使用过滤索引，而不是常规索引。

# javascript - javascript动态改变宽度不成功

> ID：15503439
> 
> 赞同：0
> 
> 时间：2013-03-19T15:19:29.963
> 
> 标签：javascript

我有以下代码来更改 div 的高度/宽度，但它不起作用。下面的警报消息仅打印空白值。请帮忙

```
<script>
    function showmyidlist() {
        try {
            var myid = document.getElementById('myid');
            var myidlist = document.getElementById('myidlist');
            var divinput = myid.getElementsByTagName("input")[0];
            alert(divinput.style.height + ":" + divinput.style.height);
            myid.style.width = divinput.style.width;
            myid.style.height = divinput.style.height;
            alert(myid.style.width + ":" + divinput.style.width);

            if (myidlist.style.position != 'absolute') {
                myid.appendChild(myidlist);
                myid.style.position = 'relative';
                myidlist.style.position = 'absolute';
                myidlist.style.top = '10px';
                myidlist.style.left = '0px';
                myidlist.style.zindex = 1;
                myidlist.style.display = 'block';
            } else if (myidlist.style.position == 'absolute') {
                myidlist.style.position = '';
                myidlist.style.zindex = 0;
                myidlist.style.display = 'none';
                myid.style.position = '';
            }
        } catch (e) {
            alert(e);
        }
    }
</script>

<table>
    <tr>
        <td style="padding:0px 10px 0px 0px;text-align:right;width:20%;">Name</td>
        <td style="padding:0px 0px 0px 0px;text-align:center;width:60%;">
            <div id="myid"><input type="text" name="myid" value="" onclick="showmyidlist()"></div>
        </td>
        <td style="padding:0px 0px 0px 10px;text-align:left;width:20%;">
            <input style="width:200px;" type="submit" class="button" name="submit" value="Add My Id" />
        </td>
    </tr>
</table>
<div id="myidlist" style="display:none;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:24:09.200

Try:

```
alert(divinput.clientHeight + ":" + divinput.clientWidth); 
```

The clientHeight and clientWidth properties are set dynamically, where as the width and height properties are generally what is initially set.

# amazon-ec2 - Cloudfront、EC2 和相对 URL

> ID：15503440
> 
> 赞同：6
> 
> 时间：2013-03-19T15:19:33.543
> 
> 标签：amazon-ec2, amazon-cloudfront, relative-url

这可能是一个简单的问题，但我在任何地方都找不到直接的答案。

我的网站托管在 Amazon EC2 上。

我想利用 Amazon Cloudfront 来加快我网站上图像、Javascript 和 CSS 的加载速度。

在我的整个站点中，我使用相对 URL 来指向驻留在我的 EC2 服务器上的图像、Javascript 和 CSS。

那么，现在，为了利用 Cloudfront，我是否需要将所有相对 URL 更改为指向 Cloudfront 的绝对 URL，或者这是否会由 Amazon/EC2/Cloudfront 自动处理？或者，问这个问题的更好方法是，我是否可以将所有 URL 保留为相对 URL，并且仍然可以获得 Cloudfront 的所有优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:23:09.770

简短的回答是否定的，您的相对 URL 将无法在 CloudFront 上按预期工作 - 除了[Gio Hunt](https://stackoverflow.com/q/15503440/808532)提到的情况，即一旦您的页面加载 CSS 文件，CSS 文件本身内的任何相对 URL 都将解析为 CloudFront，但这可能是在你的情况下不是很有用。

[有关使用 SASS 的解决方案，请参阅此答案](https://stackoverflow.com/questions/3848147/image-paths-in-css-to-support-cdn)，该解决方案与我过去所做的非常接近：

> *   我用过 SASS - [http://sass-lang.com](http://sass-lang.com)
> *   我有一个名为 cdn.scss 的 mixin，其内容类似于 $image_path: "/images/";
> *   以 sass 样式导入该 mixin @import "cdn.scss"
> *   像这样更新图像路径： background:url($image_path + "image.png");
> *   在部署时，我更改了 mixin.scss 中的 $image_path 变量，然后重新运行 sass

基本上，您通过创建所有页面都尊重的变量来重新生成 CSS 以使用 CDN (CloudFront) 基本 url。执行此操作所涉及的困难取决于您需要更改多少引用和文件，但是对相对路径的简单搜索和替换非常容易完成。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:34:58.400

如果您想保留所有内容，您可以通过 cloudfront 将所有内容设置为自定义来源。如果您的网站大部分是静态的，这可以很好地工作。

如果您确实想利用云端而不发送所有内容，则需要将相对 URL 更新为绝对 URL。只要 css 文件通过 cloudfront 提供，CSS 文件就可以保留相对 url。

# ios - 检查音频是否已在 iOS 中结束播放

> ID：15503441
> 
> 赞同：0
> 
> 时间：2013-03-19T15:19:37.870
> 
> 标签：ios, audio, avfoundation

我想检查音频是否已结束播放。如果是这样，我需要将按钮更改为播放按钮而不是暂停按钮。我如何在 iOS 中做到这一点？

我的代码如下所示：

```
-(void)playAudioFile:(BOOL)status
{
    NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"audio" ofType:@"mp3"];
    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

    NSError *error;

    if(status)
    {

        if(!audioPlayer)
        {
            audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:&error];
            audioPlayer.currentTime = currentPlayTime;
            audioPlayer.numberOfLoops = 0; //Infinite
            audioDuration = audioPlayer.duration;

            audioPlaySlider.minimumValue = 0;
            audioPlaySlider.maximumValue = audioDuration;
            audioPlaySlider.value = currentPlayTime;

            [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(audioTimer:) userInfo:[NSDictionary dictionaryWithObject:audioPlayer forKey:@"playerObject"] repeats:YES];
        }

        [audioPlayer play];

        if([audioPlayer rate] != 1.0 )
        {
            [audioPlayer play];
        }
        else
        {
            [self->audioPlayBtn setBackgroundImage:[UIImage imageNamed:@"playBtn.png"] forState:UIControlStateNormal];
        }

        NSLog(@"Play duration : %f",audioDuration);
    }
    else
    {
        if(audioPlayer && audioPlayer.playing)
        {
            [audioPlayer pause];                
        }
    }

    NSLog(@"Error for file : %@",error);

} 
```

我试过这个：

```
 if([audioPlayer rate] != 1.0 )
            {
                [audioPlayer play];
            }
            else
            {
                [self->audioPlayBtn setBackgroundImage:[UIImage imageNamed:@"playBtn.png"] forState:UIControlStateNormal];
            } 
```

但不工作..需要一些指导......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:26:49.357

使用 AVAudioPlayerDelegate 的方法

```
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag 
```

您的带有音频播放器实例的视图控制器/类必须是音频播放器的委托。当音频播放器完成播放时，将调用该方法。

[http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerDelegateProtocolReference/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerDelegateProtocolReference/Reference/Reference.html)

# jquery - jQuery - 在不同的 div 上触发 fadeIn() 和 fadeOut()

> ID：15503446
> 
> 赞同：1
> 
> 时间：2013-03-19T15:19:59.293
> 
> 标签：jquery, fade

我有一个父 div 和一些子 div（一个包含一些按钮的框）。

我想在单击按钮时淡入消息（在 childDivContainer 中的任何位置），但我希望它保持可见直到鼠标离开较大的父区域（largerContainer）以防止消息烦人地弹出和消失，所以我已将 fadeOut() 连接到更大的包含 div。

但是，每当用户从每个子 div 中使用 mouseOuts 时都会触发 fadeOut() - 这很奇怪，因为我没有将它们与鼠标悬停或其他任何东西相关联。

```
$('#childDivContainer').click(
    function () {
        $("#demoMessage").fadeIn();

    });

$('#largerContainer').mouseout(
    function () {
        $("#demoMessage").fadeOut();
    });

<div id="largerContainer">
   <div id="childDivContainer">
    <div id="childDiv1"></div>
    <div id="childDiv2"></div>
    <div id="childDiv3"></div>
   </div>
</div> 
```

非常感谢您的帮助。西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:26:15.107

您需要更改`mouseout`为`mouseleave`

**鼠标移出（）**

*   当鼠标进入“outerBox”时，不会触发任何事件。
*   当鼠标离开“outerBox”并进入“innerBox”时，触发“outerBox”事件。
*   当鼠标离开“innerBox”并进入“outerBox”时，触发“innerBox”事件，然后触发“outerBox”事件。
*   当鼠标离开“outerBox”时，触发“outerBox”事件。

**鼠标离开（）**

*   当鼠标进入“outerBox”时，不会触发任何事件。
*   当鼠标离开“outerBox”并进入“innerBox”时，不会触发任何事件。
*   当鼠标离开“innerBox”并进入“outerBox”时，触发“innerBox”事件。
*   当鼠标离开“outerBox”时，触发“outerBox”事件。

**阅读：[http ://www.mkyong.com/jquery/different-between-mouseout-and-mouseleave-in-jquery/](http://www.mkyong.com/jquery/different-between-mouseout-and-mouseleave-in-jquery/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:28:09.517

当您将光标移动到您的子 div 上时，它可能会认为您的鼠标正在离开`largerContainer`并进入您的`childDiv`.

You might try to trigger the `fadeOut()` on the `largerContainer`'s parent `mouseenter()` event.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:46:57.377

When you `mouseout` of the `#child` (and into the `#parent`, the event bubbles thus:

```
2\.   #parent -> fire mouseout
       ^
       |
    (mouseout event)
       |
1\.    #child -> fire mouseout 
```

so with

```
jQuery('#parent, #child').on('mouseout',function(e){
  console.log("mouseout: #" + this.id);
}); 
```

mousing out of the child would result in

```
> mouseout: #parent
> mouseout: #child 
```

**Answer:** You need to play with stopping event propagation (bubbling) and possibly tracking the `mouseover` event on the child (as mousing over the `#child` actually **triggers `mouseout` on the `parent`!**).

Simple example to demonstrate the how the mouseout event is fired [http://jsfiddle.net/sequoia/Z9n96/](http://jsfiddle.net/sequoia/Z9n96/)

More complex example I made when working on this sort of problem (play around with attaching/detaching the stop propogation behavior to different events and see how it changes the behavior): [http://jsfiddle.net/sequoia/GXmfA/4/](http://jsfiddle.net/sequoia/GXmfA/4/)

# javascript - 用于在对象之间映射属性的 JavaScript 实用程序

> ID：15503451
> 
> 赞同：0
> 
> 时间：2013-03-19T15:20:14.270
> 
> 标签：javascript, json, underscore.js

是否有任何“实用程序带”库（思考 underscore.js）可以映射到具有不同模式的其他类？

只是一个例子：-

```
var results = {
  "d": {
    "results":
        {
        "ContentTypeID": "0x0100EF81D4A521AFFB4A810FD140B2C3A516",
        "Title": "Acme",
        "ID": 1234
        }       
    }
} 
```

映射到

```
var customer = {
    "Customer": "Acme",
    "ID": 1234
} 
```

*   身份证=身份证
*   标题 = 客户
*   ContentTypeID 未表示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:22:58.930

ExtJS has a pretty nice concept of data stores which you can do mapping like you described.

[http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.JsonStore](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.JsonStore)

Ember also has data models / stores.

# elasticsearch - ElasticSearch：只允许本地请求

> ID：15503455
> 
> 赞同：41
> 
> 时间：2013-03-19T15:20:26.837
> 
> 标签：elasticsearch

如何只允许弹性搜索的本地请求？所以命令如下：

```
curl -XGET 'http://localhost:9200/twitter/_settings' 
```

只能在 localhost 上运行并请求如下：

```
curl -XGET 'http://mydomain.com:9200/twitter/_settings' 
```

会被拒绝吗？

因为，据我所知，elasticsearch 默认允许它。

**编辑：**

根据[http://www.elasticsearch.org/guide/reference/modules/network.html](http://www.elasticsearch.org/guide/reference/modules/network.html) 您可以管理`bind_host`参数以允许主机。默认情况下，它设置为`anyLocalAddress`

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-03-19T20:18:48.630

对于 v2.0.0 之前的 elasticsearch，如果您希望 http 传输和内部 elasticsearch 传输都仅在 localhost 上侦听，只需将以下行添加到`elasticsearch.yml`文件中。

```
network.host: "127.0.0.1" 
```

如果您只想在 localhost 上侦听 http 传输，请添加以下行。

```
http.host: "127.0.0.1" 
```

从 v2.0 开始，elasticsearch 默认只监听 localhost。因此，不需要额外的配置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T15:29:48.383

如果您的最终目标是拒绝来自主机外部的任何请求，最可靠的方法是修改主机的[iptables](http://linux.die.net/man/8/iptables)，以便它拒绝对 ElasticSearch (9200-9300) 使用的服务端口的任何传入请求。

如果最终目标是确保每个人都使用独占 DNS 引用服务，那么最好使用可以代理 HTTPd 或 nginx 等请求的 HTTP 服务器来实现这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-17T08:22:25.447

我使用这个参数：

http.host：“127.0.0.1”

该参数不接受外部请求的http请求。

# php - Facebook api：打开流失败：HTTP 请求失败！HTTP/1.0 400 错误请求

> ID：15503458
> 
> 赞同：0
> 
> 时间：2013-03-19T15:20:45.623
> 
> 标签：php, json, facebook-graph-api

我一直在查看堆栈和有关如何进行 facebook api 调用以获取页面状态消息的 facebook 文档。

到目前为止，我有这个：

```
$url = "https://graph.facebook.com/dogfishheadbeer/statuses?fields=message,updated_time&limit=5";
$url_with_token = $url . "?access_token={$access_token}";
$facebookData = json_decode(file_get_contents($url_with_token)); 
```

我不确定如何获得我的访问令牌。我在这里访问了 facebook api explorer：

[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

我点击了“Gett accesses token”，但是在我的 php cpde 中使用了 hwen 我收到了这个错误：

```
Warning: file_get_contents(https://graph.facebook.com/dogfishheadbeer/statuses?fields=message,updated_time&limit=5?access_token=myAccesToken) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request 
```

我还阅读了访问令牌过期，我的网站需要能够刷新它们。我对下一步要尝试什么有点迷茫，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:27:09.703

您的网址无效。

生成的 URL 将是：

```
https://graph.facebook.com/dogfishheadbeer/statuses?fields=message,updated_time&limit=5?access_token={$access_token}
                                                            second question mark here ^^ 
```

此行将解决该特定问题，尽管它可能不是唯一的问题：

```
$url_with_token = $url . "&access_token={$access_token}";
//                       ^^ ampersand instead 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:31:35.103

您将无法使用与资源管理器中的访问令牌相同的访问令牌。您需要做的是在 Facebook 上创建自己的应用程序。它将为您提供 applicationId 和 applicationSecret，然后您可以使用它们来获取 api 调用的访问令牌。

在这里查看那些入门指南： [https ://developers.facebook.com/docs/howtos/login/login-for-canvas/](https://developers.facebook.com/docs/howtos/login/login-for-canvas/) [https://developers.facebook.com/docs/technical-guides/](https://developers.facebook.com/docs/technical-guides/)

# c++ - 制作一个优化未使用部分的元组样式类

> ID：15503459
> 
> 赞同：0
> 
> 时间：2013-03-19T15:20:48.867
> 
> 标签：c++, templates, typeid

这更多是关于 C++ 编译器如何处理 const typeid 调用的问题。

你好！我正在尝试创建一个元组样式的类，其配置方式使我不必重写一堆具有专业化的代码。

所以这是一般的想法：

```
struct null_type{};

template <typename T1,typename T2=null_type,typename T3=null_type>
class ptestclass
{
private:
    template<typename K1,typename K2,typename K3>
    class barclass
    {
    public:
        static inline void bar(std::tuple<K1,K2,K3>& vals,K1* otherval1,K2* otherval2,K3* otherval3)
        {
            Foo(tr1::get<0>(vals),*otherval1);
            Foo(tr1::get<1>(vals),*otherval2);
            Foo(tr1::get<2>(vals),*otherval3);
        }
    };
    template<typename K1,typename K2>
    class barclass<K1,K2,null_type>
    {
    public:
        static inline void bar(std::tuple<K1,K2,null_type>& vals,K1* otherval1,K2* otherval2,null_type* otherval3)
        {
            Foo(tr1::get<0>(vals),*otherval1);
            Foo(tr1::get<1>(vals),*otherval2);
        }
    };
    template<typename K1>
    class barclass<K1,null_type,null_type>
    {
    public:
        static inline void bar(std::tuple<K1,null_type,null_type>& vals,K1* otherval1,null_type* otherval2,null_type* otherval3)
        {
            Foo(tr1::get<0>(vals),*otherval1);
        }
    };

    /*
     *Old Bar function...much more readable than bar class, but you cannot partially specialize
     *member functions of a class
     *
    void inline bar(std::tuple<T1,T2,T3> otherval)
    {
        if (typeid(T1) != typeid(null_type))//constant check hopfully optomized out
        {
            Foo(vals.get(1),otherval.get(1));
        }
        if (typeid(T2) != typeid(null_type))//constant check hopfully optomized out
        {
            Foo(vals.get(2),otherval.get(2));
        }
        if(typeid(T3) != typeid(null_type))//constant check hopfully optomized out
        {
            Foo(vals.get(3),otherval.get(3));
        }

    }
     */
    std::tuple<T1,T2,T3> vals;

    template<typename K>
    void static inline Foo(K& val,K& otherval)
    {
        //inlineable, short function that is called many (millions) of times per iteration
        val += otherval;
    }

    template<>
    void inline Foo<null_type>(null_type& val,null_type& otherval)
    {
        //inlineable, short function that is called many (millions) of times per iteration
        throw "Foo called on null type";
    }

public:
    ptestclass()
    {
        printf("made object");
    }
    void one_iteration(T1* otherval1,T2* otherval2,T3* otherval3,size_t count)
    {
        for (int i = 0; i < count; ++i)
        {
            barclass<T1,T2,T3>::bar(vals,otherval1+i,otherval2+i,otherval3+i);
        }
    }
};

//exposed public class with specialized one_iteration interfaces
template <typename T1,typename T2=null_type,typename T3=null_type>
class testclass : public ptestclass<T1,T2,T3>
{
public:
    void one_iteration(T1* otherval1,T1* otherval2,T1* otherval3,size_t count)
    {
        ptestclass::one_iteration(otherval1,otherval2,otherval3,count);
    }
};

template <typename T1>
class testclass<T1,null_type,null_type> : public ptestclass<T1,null_type,null_type>
{
public:
    void one_iteration(T1* otherval1,size_t count)
    {
        ptestclass::one_iteration(otherval1,NULL,NULL,count);
    }
}; 
```

所以我的问题是这种优化甚至可以在 C++ 中实现吗？如果不是这样，对我来说，在子节点上使用继承模型而不是这个级别的模板可能更有意义。但是，我试图避免不断检查指定类型的数量和间接成本。

我将开始深入研究程序集，看看编译器是否这样做......以防这不是标准化的行为，我正在使用 Microsoft Visual C++ Compiler 10.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:48:01.900

我想我在发表之前的评论时误解了你的问题。

假设你可以使用 c++11，或者你可以使用 boost，你可以使用类似的东西`!std::is_same< T1, null_type >::value /*or boost::is_same...*/`而不是 typeid(T1) != typeid(null_type)。这使用 TMP 解析为编译时常量，大多数编译器都可以轻松优化掉它。

> 这更多是关于 C++ 编译器如何处理 const typeid 调用的问题。

我没有回答这个具体问题，但如果我了解您实际在寻找什么，以上内容就足够了。

# c# - C# Textlabel 淡入/淡出

> ID：15503463
> 
> 赞同：3
> 
> 时间：2013-03-19T15:20:53.350
> 
> 标签：c#, winforms, textlabel

我希望在按下按钮时让文本标签淡入淡出。我注意到 textlabel 没有 opacity 参数。还有另一种方法可以达到预期的效果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:25:50.060

不支持`Control`不透明度`Winform`。

在 .Net Framework 中只有`Form`能够显示不透明度属性，`Controls`在 Form 上与.Net`Opacity`相同`parent Form`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:25:17.793

WinForms 不支持这一点。

您可以使用带有文本的[Panel](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)控件，并通过在计时器事件中交换颜色来使用淡入淡出效果。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-03-19T15:30:55.927

我想，你正在寻找类似的东西：

```
 private void button1_Click(object sender, EventArgs e) {
    if (label1.Visible) label1.Visible = false;
    else label1.Visible = true;
} 
```

# java - 为什么我的班级给我一个退货错误？

> ID：15503469
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:21:07.793
> 
> 标签：java, class

现在我将它设置为构造函数，但是我不确定如何实际使用它。我希望能够存储名字、姓氏和学位级别。我需要它继续运行，直到我停止它并继续执行更多程序。

```
import javax.swing.*;
import java.util.ArrayList; 

public class Tutor
{
public Tutor(String firstName, String firstName, String degreeLevel)
    {
    firstName = firstName;
    lastName = firstName;
    degreeLevel = degreeLevel;  
    }   
public static void main (String[] args)
    {
    String fName;
    String lName;
    String level;
    String ans;
    ArrayList<String> listOfTutor = new ArrayList<String>();
    for (int i = 0; i<listOfTutor.size(); i++)
        {
        fName = JOptionPane.showInputDialog(null,"Enter Tutor's First Name: ");
        lName = JOptionPane.showInputDialog(null,"Enter Tutor's Last Name: ");
        level = JOptionPane.showInputDialog(null,"Enter Tutor's Highest Level of Degree: ");
        Tutor t = new Tutor(fName,lName,level);
        listOfTutor.add(t);
        }
    }   
} 
```

**编辑**

```
import javax.swing.*;
import java.util.ArrayList; 

public class Tutor
{
String firstName;
String lastName;
String degreeLevel;
public Tutor(String firstName, String lastName, String degreeLevel)
    {
    this.firstName = firstName;
    this.lastName = firstName;
    this.degreeLevel = degreeLevel; 
    }   
public static void main (String[] args)
    {
    String fName;
    String lName;
    String level;
    String ans;
    ArrayList<Tutor> listOfTutor = new ArrayList<Tutor>();
    for (int i = 0; i<3; i++)
        {
        fName = JOptionPane.showInputDialog(null,"Enter Tutor's First Name: ");
        lName = JOptionPane.showInputDialog(null,"Enter Tutor's Last Name: ");
        level = JOptionPane.showInputDialog(null,"Enter Tutor's Highest Level of Degree: ");
        Tutor t = new Tutor(fName,lName,level);
        listOfTutor.add(t);
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:22:37.577

您需要获取错误，因为该`Tutor()`函数正在返回一个值，但方法声明中没有给出返回类型。

如果你希望你的函数返回一个字符串：

```
public String Tutor(String firstName, String lastName, String degreeLevel)
       ^^^^^^ 
```

目前代码中实际上存在很多问题。我相信您要做的是使 Tutor() 成为构造函数。如果是这样，它的声明应该是：

```
public CalculateATutor(String firstName, String lastName, String degreeLevel) 
```

因为CalculateATutor 是类的名称。它不应该返回任何东西。此外，这些行：

```
this.firstName = firstName;
this.lastName = lastName;
this.degreeLevel = degreeLevel; 
```

不会按你想要的方式工作。如果您尝试设置类字段，则需要先在类中声明字段。像这样：

```
public class CalculateATutor
{
    String firstName;
    String lastName;
    String degreeLevel; 
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:23:21.080

```
public String Tutor(String firstName, String lastName, String degreeLevel)
       ^ missing 
```

当您返回字符串时

```
return(lastName +", "+ firstName +" "+ degreeLevel); 
```

相反，我们的答案试图理解**编译器的错误信息：**

```
 error: invalid method declaration; return type required
                      ^ function declaration is wrong 
```

还说`return type required` 所以你忘记了函数的返回类型。

函数名称在哪里 `public Tutor()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:22:25.350

将返回类型添加到方法。正如您发布的那样，您正在返回 String 而不给出方法的返回类型。所以添加 String 作为方法的返回类型。

如果您尝试从声明为 void 的方法返回值，则会收到编译器错误。

```
public String Tutor(String firstName, String lastName, String degreeLevel) {
  .....
   return(lastName +", "+ firstName +" "+ degreeLevel);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T15:22:32.897

你就像对待`Tutor`一种方法一样对待。如果`Tutor`确实是一种方法，则您没有与之关联的返回类型。

还有`firstName`, `lastName`, 和`degreeLevel`在课堂上的声明在哪里？在我看来，可能还有其他问题——请记住。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T15:22:35.890

```
public Tutor(String firstName, String lastName, String degreeLevel) 
```

应该

```
public String Tutor(String firstName, String lastName, String degreeLevel) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T15:22:41.913

你的代码真的很乱。您有一个名为 的类`CalculateATutor`，在它内部看起来像构造函数，但已命名`Tutor`，并且您在`main`函数中将其用作常规类。

**首先，您需要了解您想要做什么**（并且可能阅读有关[类](http://docs.oracle.com/javase/tutorial/java/concepts/class.html)和[构造函数](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)的信息）。

但是对于你的问题：

如果你想要一个名为 Tutor 的方法，你需要在方法签名中添加返回类型；

```
public String Tutor(String firstName, String lastName, String degreeLevel)
    {
    this.firstName = firstName;
    this.lastName = lastName;
    this.degreeLevel = degreeLevel; 
    return(lastName +", "+ firstName +" "+ degreeLevel);
    } 
```

如果您尝试创建构造函数，则需要使用类名并删除 return 语句：

```
public CalculateATutor(String firstName, String lastName, String degreeLevel)
    {
    this.firstName = firstName;
    this.lastName = lastName;
    this.degreeLevel = degreeLevel; 
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-19T15:23:38.540

错误消息告诉您该怎么做。所有 Java 方法/函数都必须用返回类型声明。

在这种情况下，它似乎是一个字符串，所以它变成

```
public String Tutor() 
```

如果你不希望它返回任何东西，那么它就是

```
public void getMiau() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-19T15:24:58.637

您的 Tutor 方法正在返回一个字符串，但您尚未将其声明为具有返回类型。尝试：

```
public String Tutor(String firstName, String lastName, String degreeLevel) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-19T15:28:26.180

目前尚不清楚`Tutor`应该是方法还是构造函数。如果它应该是一个构造函数，那么你在一个名为 的类中声明它`CalculateATutor`，这是行不通的。您也没有将构造函数编写为构造函数（它不应该有`return`语句）。您可以通过多种方式解决此问题：

1.  将类名更改为`Tutor`.
2.  将构造函数名称更改为`CalculateATutor`.
3.  将构造函数移动到named`Tutor`的内部类。`CalculateATutor``Tutor`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-19T15:32:51.633

1）你正在使用这个。引用您尚未定义的类变量的关键 2）您似乎调用了类 CalculateATutor 但类 Tutor 的构造函数，它们应该是相同的，所以是这样的：

导入 javax.swing.*；

```
public class Tutor //NOTE CORRECTED CLASS NAME
{
String firstName;
String lastName;
String degreeLevel
public Tutor(String firstName, String lastName, String degreeLevel)
    {
    this.firstName = firstName;
    this.lastName = lastName;
    this.degreeLevel = degreeLevel; 

    }   
public static void main (String[] args)
    {
    String ans;
    List<Tutor> Tutor = new ArrayList<>();
    for (int i = 0; i<Tutor.size; i++) //Tutor.size==0, will never run, I can't correct as I have no idea what you want to happen
        {
        ans = JOptionPane.showInputDialog(null,"Enter Tutor's Last Name, First Name, and Highest Level of Degree:");
        Tutor = ans; //I have no idea whats going on here but Tutor should be initialised like new Tutor(string,string,string)

        }
    }   
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-19T15:37:43.420

你在那里犯了很多错误：

第一：如果导师是一种方法：

您必须为您的方法设置一个返回类型。`public static String Tutor(...)` 这样，您的方法将正确返回您的值。

第二：如果导师应该是你的班级：

然后，您必须将您的类重命名为 Tutor 或将您的构造函数重命名为 CalculateATutor。构造函数永远不会有返回类型，也永远不会包含返回语句。所以这样你必须在你的构造函数中删除你的返回语句。

```
public CalculateATutor(String firstName, String lastName, String degreeLevel)
{
    this.firstName = firstName;
    this.lastName = lastName;
    this.degreeLevel = degreeLevel; 
} 
```

第三：

您的班级导师（如果是班级）的用法是错误的

```
String ans;
List<Tutor> myTutor = new ArrayList<Tutor>(); //You have to specify Tutor in your Template-Class
for (int i = 0; i<myTutor.size; i++)
    {
    ans = JOptionPane.showInputDialog(null,"Enter Tutor's Last Name, First Name, and Highest Level of Degree:");
    //Here you have a lot to do because you get one inputstring with all 3 Elements
    //You have to split the input or get 3 seperate inputs
    // We assume you have your correct input here right now with Strings fname, lname, level
    Tutor t = new Tutor(lname,fname,level);
    myTutor.add(t);
    }
} 
```

**编辑：** 对你的新问题：

您必须在类中声明局部变量。

```
public class TestClass{
    String lastName;

    public TestClass(String lastName){// this is the Constructor
        this.lastName = lastName;
    }

} 
```

这样您就可以存储变量。

# oracle - hsqldb 是否支持 oracle 兼容模式下的表别名

> ID：15503472
> 
> 赞同：0
> 
> 时间：2013-03-19T15:21:10.533
> 
> 标签：oracle, alias, hsqldb

我们在 dao 测试中使用 hsqdb-2.2.9。hsqldb 通过设置与 oracle（生产中）兼容，`SET DATABASE SQL SYNTAX ORA TRUE;`我们使用 ibatis sql map。

当 sql 包含表别名时，它会失败，例如`select a.name, b.code form t_a a, t_b b where a.id = b.a_id`，报告`unexpected token a`。我们尝试在表和表别名之间添加“as”，它也不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:43:29.670

呃……我想我已经找到了问题…………我自己的。我突然想到我使用'do'（表名是t_delivery_order）作为表别名，它恰好是hsqldb（或sql）中的关键字。只需将 'do' 替换为 'd'，它是固定的。谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:07:32.270

是的，HSQLDB 支持表别名。

如果您使用您报告的确切查询，您将获得：

```
 unexpected token: T_A 
```

如果您按照 a_horse_with_no_name 的注释更正查询，它应该可以工作。如果其中一个表不存在，您将获得：

```
 user lacks privilege or object not found: T_A 
```

顺便说一句，尝试使用最新的 2.3.0 快照 jar 以获得更好的 Oracle 兼容性测试。您可以从网站的支持页面找到它。

# entity-framework - 将 EntityFramework 数据库移动到 Azure，MigrationHistory 表丢失

> ID：15503474
> 
> 赞同：1
> 
> 时间：2013-03-19T15:21:21.610
> 
> 标签：entity-framework, azure

我正在将我们的本地托管 ASP.NET 应用程序迁移到云中，并且在迁移我的数据库时遇到了问题。

我们使用 EF5 进行数据库交互，并且我们启用了代码优先迁移以处理数据库更改。但是，每当我生成 BACPAC 文件时，都会忽略 __MigrationHistory 表，并且当我使用 SSIS 工具在本地和 Azure 数据库之间迁移数据时，无论我是否选择“启用身份插入”，身份列中的值都会发生变化，搞砸了我的整个数据库。

我在这里做错了什么？我尝试了各种路线，但似乎都没有达到预期的效果。

谢谢，帕特里克

# android - HTTPS 连接 - 服务器超时

> ID：15503478
> 
> 赞同：0
> 
> 时间：2013-03-19T15:21:29.963
> 
> 标签：android, https

我正在尝试进行 HTTPS 连接，但我遇到了问题。

当我尝试与服务器连接时，我会超时，**但仅限于某些网络**。我的应用程序也在为 iOS 实现，这里服务器的响应是好的。

这是我的代码：

```
public static String connectToServer(String xmlBody) {

        InputStream is = null;
        String responseString = "";
        try {
            HttpParams httpParameters = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(httpParameters, 40000);
            HttpConnectionParams.setSoTimeout(httpParameters, 40000);

            DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);

            HttpProtocolParams.setUseExpectContinue(httpclient.getParams(), false); // I tried with this

            CredentialsProvider credProvider = new BasicCredentialsProvider();
            credProvider.setCredentials(new AuthScope(HOST, PORT), new UsernamePasswordCredentials(USERNAME, PASSWORD));
            httpclient.setCredentialsProvider(credProvider);
            HttpPost httpPost = new HttpPost(URL);

            httpPost.setHeader("Content-type", "application/xml; charset=utf-8");

            StringEntity se = new StringEntity(xmlBody, HTTP.UTF_8);
            se.setContentType("application/xml");
            httpPost.setEntity(se);

            HttpResponse response = httpclient.execute(httpPost);

            HttpEntity entity = response.getEntity();
            is = entity.getContent();
            responseString = IOUtils.toString(is, "UTF-8");
            Log.i("RESPONSE", responseString);

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
            // ERROR;
            return null;
        }
        // SUCCESS;
        return responseString;
    } 
```

我也试过这个：

```
public String connectToServer(String xmlBody) {

            String responseString = "";

            try {
                BufferedReader in = new BufferedReader(new InputStreamReader(openURLForInput(new URL(URL), USERNAME, PASSWORD, xmlBody)));
                String line;
                while ((line = in.readLine()) != null) {
                    System.out.println(line);
                    responseString += line;
                }

            } catch (IOException e) {
                e.printStackTrace();
                responseString = e.toString();
            }

            return responseString;
        }

public InputStream openURLForInput(URL url, String uname, String pword, String xmlBody) throws IOException {

            HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setRequestProperty("Authorization", userNamePasswordBase64(uname, pword)); //this is OK

            conn.addRequestProperty("Content-type", "application/xml; charset=utf-8");

            conn.setRequestMethod("POST");
            conn.connect();
            OutputStream output = conn.getOutputStream();
            OutputStreamWriter osw = new OutputStreamWriter(output, "UTF-8");
            BufferedWriter writer = new BufferedWriter(osw);
            writer.write(xmlBody);

            writer.close();
            output.close();

            int status = conn.getResponseCode();
            Log.i("STATUS", status + "");
            Log.i("STATUS_ERROR", conn.getResponseMessage());

            return conn.getInputStream();
        } 
```

# c++ - 按常见元素对列表进行分组

> ID：15503479
> 
> 赞同：4
> 
> 时间：2013-03-19T15:21:32.913
> 
> 标签：c++, algorithm

我正在寻找一种聪明/快速的 C++ 算法，当它们包含常见的对象时，它可以让我对多个对象列表进行分组。假设我有 N 个列表，每个列表包含与一个元素 E 关联的 1..M 个对象 (O)：

```
[O1, O2]     -> E1
[O3]         -> E2
[O1, O4, O5] -> E3
[O2, O5]     -> E4
[O3, O6]     -> E5 
```

我希望将它们重新排列为以下内容：

```
[O1, O2, O4, O5] -> [E1, E3, E4]
[O3, O6]         -> [E2, E5] 
```

结果将所有公共对象与所有关联元素组合在一起。最终没有对象在列表之间共享。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:31:08.440

对于每个对象，计算哪些元素包含它。

IE

```
01 -> [E1, E3]
02 -> [E4]
03 -> [E2, E5]
04 -> [E3]
05 -> [E3, E4]
06 -> [E5] 
```

这些列表产生了一个图：每个元素都有一个顶点，如果相应的元素出现在同一个列表中，则两个顶点是连接的。

![在此处输入图像描述](../Images/215fae8c8fd0201502d3d5dff194f026.png)

在我看来，您要计算的是图形的[连通分量](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)。

# mysql - Mysql 加入请求

> ID：15503483
> 
> 赞同：1
> 
> 时间：2013-03-19T15:21:38.550
> 
> 标签：mysql, join

我需要获取重复数据的空字段

例如一个客户可以有两个或多个联系人，所以查询返回（只是短了qyery resul）：

**客户名称| CONTACT_PERSON|ETC..**

```
 dell         |    Ighor      |etc..
  dell         |    Dima       |etc.. 
```

但我需要： **CUSTOMER_NAME| CONTACT_PERSON|等等...**

```
 dell         |    Ighor      |etc..
             NULL         |    Dima       |etc..

SELECT
             `contact`.*,
                 `branch_has_equipment`.*,
             `branch_has_contact`.*,
                         `equipment`.*,
                         `customer_has_branch`.*,
                         `branch`.*,
                         `customer`.*,
              `ip`.*

                 FROM `customer`
                 INNER JOIN `customer_has_branch`
                         ON `customer`.`customer_id` = `customer_has_branch`.`customer_id`
                 INNER JOIN `branch`
                         ON `customer_has_branch`.`branch_id` = `branch`.`branch_id`
                 INNER JOIN `branch_has_equipment`
                         ON `branch`.`branch_id` = `branch_has_equipment`.`branch_id`
                 INNER JOIN `equipment`
                         ON `branch_has_equipment`.`equipment_id` = `equipment`.`equipment_id`
                 INNER JOIN `branch_has_contact`
                         ON `branch`.`branch_id` = `branch_has_contact`.`branch_id`
                 INNER JOIN `contact`
                         ON `branch_has_contact`.`contact_id` = `contact`.`contact_id`

                INNER JOIN `equipment_has_ip`
                        ON `equipment`.`equipment_id` = `equipment_has_ip`.`equipment_id`
                INNER JOIN `ip`
                        ON `equipment_has_ip`.`equipment_id` = `ip`.`ip_id`  

                 WHERE `customer`.`inservice` = 'Yes'
                         ORDER BY `customer`.`customer_name` 
```

另外，表格^

顾客

customer_id customer_name inservice service_type 评论

分支

branch_id 城市地址

设备

设备_id 品牌型号 连接参数 连接类型 序列号 id 发布

接触

联系人_id 姓名 姓 电话_手机_工作电话_其他职位

customer_has_branch_id customer_id branch_id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:25:02.990

由于我不知道这些表中的任何一个是如何相互关联的，因此我对您的唯一回答是使用`OUTER JOIN`，它将保留 NULL 结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:08:42.270

我并不认真地提倡这种解决方案，因为我真的认为这种事情应该在应用程序级代码中处理（例如一点 PHP），但无论如何，请考虑以下事项：

```
 SELECT * FROM my_table;
 +------+--------+--------+
 | game | points | player |
 +------+--------+--------+
 |    1 |      5 | Adam   |
 |    1 |      8 | Alan   |
 |    1 |      7 | Brian  |
 |    1 |      6 | John   |
 |    2 |      2 | Adam   |
 |    2 |      3 | Alan   |
 |    2 |      4 | Brian  |
 |    2 |      6 | John   |
 +------+--------+--------+

 SELECT IF(game= @prev,'',game)
      , @prev := game
   FROM my_table ORDER BY game,player;
 +-------------------------+---------------+
 | IF(game= @prev,'',game) | @prev := game |
 +-------------------------+---------------+
 | 1                       |             1 |
 |                         |             1 |
 |                         |             1 |
 |                         |             1 |
 | 2                       |             2 |
 |                         |             2 |
 |                         |             2 |
 |                         |             2 |
 +-------------------------+---------------+ 
```

# php - PHP printf 函数“提供的参数不是有效的 MySQL 结果资源”

> ID：15503487
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:21:46.113
> 
> 标签：php, mysql, arrays, printf, fetch

嗨，我有以下代码在一台服务器上运行良好，但在我使用的免费服务器上出现以下错误

```
Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource in /home/a9645958/public_html/tteeth/staffslot.php on line 75 
```

我的代码如下：

```
// Starting of top line showing name of the day's slots
echo "<form method='post' name='time' action='timeinsert.php'>
<table align='center' width='380' border='1'>
<tr>
<th>Select</th>
<th>Appointment Times</th>
</tr>";

// Starting of the slots
for($i=0;$i<=31;$i++){ // this shows 32 x 15 minute slots from 9:00am - 17:00pm
$shr=9+floor($i/4); //calculates the start hour of a slot
$smin=($i%4)*15; //calculates the start minutes of a slot
$time=mktime($shr,$smin,00,0,0,0); //creates full php time from hours and minutes above
$displayTime2=date("H:i:s",$time); // creates correct time format for MySQL database hrs, mins, seconds

$pagetime = date("H:i a", strtotime($displayTime2)); //converts the time to just hours and minutes
$timenow = date('H:i'); // get's the current time

$chosendate = date(mktime(0,0,0,$month,$day,$year)); // converts the date picked to php time (seconds since 01 01 1971)
$todayDate = date(mktime()); // converts today's date to php time so it can be compared with the chosen date

while ($myrow = mysql_fetch_row($result)) {
        printf("<tr><td>%s</td><td>%s</td></tr>\n",
        $myrow[0]);
}
$result=mysql_query("SELECT * FROM appointment where Appointment_Time='$displayTime2' AND Appointment_Date='$insertdate' AND Practice_ID='$practice'");
$myrow = mysql_fetch_row($result);
    if($pagetime<$timenow AND $chosendate<$todayDate) //if the display time is less than the time now, and the date is less than todays date
        { //do not display a row 
        }
    elseif($myrow)// if the values in the database match the row slot time
        {
        echo "<td></td><td align='center'>$pagetime</td>";//just display the slot as a time
        }
    else
        {
        echo    "<td align='center'><input type='checkbox' name='$displayTime2' onclick='KeepCount()'></td>
                <td align='center'>$pagetime</td>";
        }
    echo "</td></tr>";          
        }
    echo "</table><br>
        <input type='submit' value='Submit'>
</form>"; 
```

我很确定问题出在 print f 函数上，因为它要求为 $myrow 中的许多值打印表头，但它还没有得到它的值......但是如果我移动它在选择语句之后，它弄乱了我的其余代码（它不会将时间与数据库中的内容进行比较，并且在下一页上插入数据库时​​存在问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:31:55.507

在这里，您正在尝试获取当时不存在的结果。

```
while ($myrow = mysql_fetch_row($result)) {
        printf("<tr><td>%s</td><td>%s</td></tr>\n",
        $myrow[0]);
} 
```

你应该把那个while循环放在这之后

```
$result=mysql_query("SELECT * FROM appointment where Appointment_Time='$displayTime2' AND Appointment_Date='$insertdate' AND Practice_ID='$practice'"); 
```

# node.js - nodejs XHR 调用在大约 50 次调用后停止

> ID：15503489
> 
> 赞同：0
> 
> 时间：2013-03-19T15:21:49.167
> 
> 标签：node.js, xmlhttprequest, deferred

我正在使用 XHR nodejs 模块进行大量 ajax 调用（现在大约 100 个）。我使用延迟执行此异步操作。这非常有效，直到请求数量通过大约 40 到 50 个调用。然后它只是停止并且无法定义地什么都不做。如果我同步进行（这不是一个真正的选择），它确实支持我可以通过它进行的所有调用。那么是什么导致了这个问题呢？

我的代码如下：

```
 function getFile(url) {
        var def = deferred()
        ,xhr = new XMLHttpRequest(); 

        xhr.open("GET", url); 
        xhr.onreadystatechange = handler;
        //Callback
        function handler (){
            // If status is ready
            if (this.readyState == 4 && this.status >= 200 && this.status < 300 || this.status === 304) {
                try {
                    var result = eval(this.responseText);
                } catch (e) {
                    def.resolve(e);
                }
                def.resolve(result && result[0]);
            } else if (this.status === 401){
                console.log('Error 401')
                def.resolve(new Error('Error:' + this.responseText));
            };
        };
        xhr.send(null);
        return def.promise;
    }; 
```

如果我控制台记录状态，我会不断获得一个不错的状态 200。

我正在使用以下代码片段调用 getfile()：

```
var express = require('express')
, app = express()
, fs = require('fs')
, XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest
, promisify = require('deferred').promisify
, deferred = require('deferred')
, readdir = promisify(fs.readdir)
, exists = promisify(fs.exists)
, writeFile = promisify(fs.writeFile)
, filepath = './public/movies/config/moviefiles.js'

    // Set max of events to unlimited
    req.setMaxListeners(0)
    readdir(configfileResults.moviepath).map(function (file) {
        var filename = file
        , year = longregex
        , movietitle = verylongregex
        if (year == null) year = ''
        var url = "http://api.themoviedb.org/2.1/Movie.search/"+configfileResults.language+"/json/apikey/"+movieTitle+"?year="+ year +"?="
        return getFile(url)(function (ajaxResult) {
            return {
                movieTitle:movieTitle,
                filename: file,
                movieScraperInfo: ajaxResult
            };
        });
    })(function (data) {
       return writeFile(filepath, JSON.stringify(data, null, 4));
    }).end(function () {
        // Download Cache
        downloadCache()
    }, function (e) {
        console.log("Failed", e);
    }); 
```

非常感谢！

编辑：

正如布拉德建议的那样，我添加了很多控制台日志。

```
function getFile(url) {
    var def = deferred()
    ,xhr = new XMLHttpRequest(); 
    console.log("url:", url);
        xhr.onreadystatechange = function() {
            console.log("status ready");
            if (this.readyState == 4 && this.status >= 200 && this.status < 300 || this.status === 304) {
                try {
                    var result = eval(this.responseText);
                    console.log('getting files', i++)
                } catch (e) {
                    def.resolve(e);
                }
                console.log("resolving files");
                def.resolve(result && result[0]);
            } else if (this.status === 401){
                console.log('Error 401')
                def.resolve(new Error('Error:' + this.responseText));
            };
            console.log("not ready");
        };
        console.log("out of callback");
    xhr.open("GET", url); 
    xhr.send(null);
    return def.promise;
}; 
```

结果：

我得到 60 个“url:”，显示获取数据所需的所有 url 的 url 日志。然后，正在执行回调。

导致：

获取文件 3 解析文件未就绪状态 就绪 未就绪 状态 就绪 未就绪 状态 就绪 获取文件 4 解析文件 未就绪 状态 就绪 未就绪 状态 就绪 未就绪 状态 就绪 获取 文件 5 解析 文件 未就绪 状态 就绪 未就绪 状态 就绪 未就绪 状态准备好获取文件 6 解决文件未准备好状态 准备好未准备好状态 准备好未准备好状态 准备好获取文件 7 解决文件未准备好状态 准备好未准备好状态 准备好未准备好状态 准备好获取文件 8 解决文件未准备好状态 准备好未准备好状态 准备好未准备好状态准备好获取文件 9 解决文件未准备好 状态准备好未准备好 状态准备好未准备好 状态准备好获取文件 10 解决文件未准备好 状态准备好 未准备好 状态准备好 未准备好 状态准备好获取文件 11 解决文件未准备好 状态就绪未就绪状态就绪未就绪状态就绪获取文件12 解析文件未就绪状态就绪未就绪状态就绪未就绪状态就绪获取文件13 解析文件未就绪状态就绪未就绪状态就绪未就绪状态就绪获取文件14 解析文件未就绪状态就绪未就绪状态就绪状态未就绪状态就绪获取文件15 解析文件未就绪状态就绪未就绪状态就绪状态未就绪状态就绪获取文件16 解析文件未就绪状态就绪状态未就绪状态就绪未就绪状态就绪状态获取文件17 解析文件未就绪就绪状态 就绪 未就绪 状态 就绪 未就绪 状态 就绪 获取文件 18 解析文件 未就绪 状态 就绪 未就绪 状态 就绪 未 就绪 状态 就绪 获取 文件 19 解析 文件 未 就绪 状态 就绪 未 就绪 状态 就绪 未准备好状态 准备好获取文件 20 解析文件未准备好 状态准备好 未准备好 状态准备好 未准备好 状态准备好 获取文件 21 解析文件未准备好 状态准备 未准备好 状态准备好 未准备好 状态准备好 获取文件 22 解决文件未准备好 状态准备好 未准备好 状态准备好未准备好状态 准备好获取文件 23 解决文件未准备好状态 准备好未准备好状态 准备好未准备好状态 准备好获取文件 24 解决文件未准备好状态 准备好未准备好状态 准备好未准备好状态 准备好获取文件 25 解决文件未准备好状态 准备好未准备好状态准备好 未准备好 状态 准备好获取文件 26 解析文件 未准备好 状态 准备好 未准备好 状态 准备好 未准备好 状态 准备好获取文件 27 解决文件 未准备好 状态 准备好 未准备好 状态准备好 未准备好 状态准备 获取文件28 解析文件未就绪状态 就绪 未就绪 状态 就绪 未就绪 状态 就绪 获取文件 29 解析文件 未就绪 状态 就绪 未就绪 状态 就绪 未就绪 状态 就绪 获取 文件 30 解析 文件 未就绪 状态 就绪 未就绪 状态 就绪 未就绪 状态 就绪 获取文件 31 解析文件未就绪状态 就绪 未就绪 状态 就绪 未就绪 状态 就绪 获取文件 32 解析文件 未就绪 状态 就绪 未就绪 状态 就绪 未就绪 状态 就绪 获取文件 33 解析文件 未就绪 状态 就绪 未就绪 状态 就绪 未就绪 状态 就绪获取文件 34 解析文件未就绪状态 就绪未就绪状态 就绪未就绪状态 获取文件 35 解析文件未就绪状态 就绪未就绪状态 就绪未就绪状态 就绪获取文件 36 解析文件未就绪状态就绪未就绪状态就绪未就绪状态就绪获取文件37 解析文件未就绪状态就绪未就绪状态就绪未就绪状态就绪获取文件38 解析文件未就绪状态就绪未就绪状态就绪未就绪状态就绪获取文件39 解析文件未就绪状态就绪 未就绪 状态就绪 未就绪 状态就绪 获取文件 40 解析文件未就绪

以 de 'not ready' 结尾。

任何人都可以对此有所了解吗？见github上的代码：

[https://github.com/jansmolders86/mediacenterjs/blob/master/apps/movies/index.js](https://github.com/jansmolders86/mediacenterjs/blob/master/apps/movies/index.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:59:40.107

我弄清楚了问题所在。我同时做了很多事情，将数据保存在内存中，同时将其传递给其他函数。换句话说，我只是内存不足。我要重构代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:24:51.010

你的语法没有意义。你能澄清一下这里发生了什么吗？

```
return getFile(url)(function (ajaxResult) {
        return {
            movieTitle:movieTitle,
            filename: file,
            movieScraperInfo: ajaxResult
        };
    }); 
```

# windows-phone-8 - Windows phone 8 中的图像动画

> ID：15503490
> 
> 赞同：0
> 
> 时间：2013-03-19T15:21:53.263
> 
> 标签：windows-phone-8, windows-phone-7.1

我是 Windows Phone 的新手，我`AnimationArray`在 iOS 中使用过来实现多个图像的动画属性，但我不确定如何在 Windows Phone 8 中实现相同的功能。以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:50:47.990

您可以创建一个图像数组 - 为此使用 BitmapImage[]。然后，使用具有指定间隔的 Timer，更改 Image XAML 元素的 Source 属性。

# curl - 扭曲的 HTTP 服务器身份验证

> ID：15503502
> 
> 赞同：1
> 
> 时间：2013-03-19T15:22:24.407
> 
> 标签：curl, twisted.web, twisted.client

我正在关注以下 http 服务器身份验证教程 [http://www.tsheffler.com/blog/?p=502&cpage=1#comment-1959](http://www.tsheffler.com/blog/?p=502&cpage=1#comment-1959) 我可以在本地主机上运行服务器，但如何登录服务器。服务器的用户名密码暂时保存在该文件的dict中。我使用 curl -d -F 和 --user 方法登录到用户但没有成功。请告诉我此服务器的 http 身份验证协议是什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:50:53.737

是的，我找到了解决方案。curl -u 用户名：通过[http://host.com/example](http://host.com/example)

# c++ - QT 在初始化时无法将 'std::string' 转换为 'std::string*'

> ID：15503503
> 
> 赞同：-2
> 
> 时间：2013-03-19T15:22:25.050
> 
> 标签：c++, qt

我在使用 QT C++ 创建我的移动程序时遇到了一些问题当我运行它时，我得到了这个：`cannot convert 'std::string' to 'std::string*' in initialization` 还有那个错误的代码：

```
void rozvrh_b17::pars(string par) 
{ 
    data = new std::string*(par);
    printf(data->data());
}
//data and par are std::string
//without that new std::string*() it does similiar error 
```

我问如何将 std::string 转换为 std::string* ??

编辑：我做了这个函数来将数据从一种形式传输到另一种形式，我需要记住那个参数......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:24:19.633

我对你投了反对票，因为这个问题没有显示任何研究工作。

```
string * data = &par; 
```

`std::string*`是指针类型。你有一个`std::string`，它的地址是你想要的指针类型。这是使用指针的首要原则之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:25:10.267

你真的想做什么？

如果您只想打印字符串，那么这应该可以：

```
void rozvrh_b17::pars(string par) 
{ 
    printf(par.c_str());
} 
```

如果你想在堆上创建一个字符串的副本，那么你需要这个：

```
std::string* data = new std::string(par); 
```

但这没有多大意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:25:26.280

您正在尝试从指向字符串的指针分配字符串。在这种特殊情况下，我看到了几件事。

1.  您根本不需要副本 - 只需立即使用 par

2.  您最好将 par 设为 const ref：`void rozvrh_b17::pars(const string& par)`

3.  你应该只使用`string`whaen 调用 new 否则你创建一个指向字符串的指针。这样做：`data = new std::string(par);`

# php - cakephp 2 - 超过第一页的分页不起作用

> ID：15503510
> 
> 赞同：1
> 
> 时间：2013-03-19T15:22:44.487
> 
> 标签：php, cakephp

我有一个带有搜索输入的表单：

```
echo $this->Form->create('Job', array('url'=>array('controller'=>'jobs', 'action'=>'search'), 'action'=>'search', 'inputDefaults' => array( 'label' => false, 'div'=>false))); 
echo '<br/>'.$this->Form->input('search', array( 'label' => false, 'div'=>false));
echo $this->Form->submit('Search', array('div' => false)); 
```

在我的控制器中，我有这样的分页数组：

```
public $paginate = array(
    'Job' => array(
        'fields' => array('Job.id', 'Job.name', 'Job.description', 'Job.tag_words'),
        'limit' => 5,
        'order' => array(
            'Job.name' => 'asc'
        )),
); 
```

然后我的搜索功能是：

```
public function search () {
if ($this->request->is('post')) {
    $conditions = array();
    $search_terms = explode(' ', $this->request->data['Mix']['search']);
    foreach($search_terms as $search_term){
        $conditions[] = array('Mix.name Like' =>'%'.$search_term.'%');
        $conditions[] = array('Mix.description Like' =>'%'.$search_term.'%');
        $conditions[] = array('Mix.tag_words Like' =>'%'.$search_term.'%');
    }
    $searchResults = $this->paginate('Mix', array('Mix.published'=>1, 'OR' => $conditions));
    $this->set('searchResults', $searchResults);
}
} 
```

这适用于结果的第一页，但在我看来，我有上一个/下一个助手，单击转到第二页只会打开一个空白页面。我如何保留搜索词并能够转到第二页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:11:34.193

The Paginator::sort method uses a get to pass the parameters, you should pass the search term as GET then in your view, before you call the pagination links try this:

```
$this->Paginator->options = array(
    'url' => $this->passedArgs
); 
```

That should have your search term persist with your pagination links.

# ssl - 使用智能卡的 SSL 客户端身份验证在 Java 6 中有效，但在 Java 7 中失败

> ID：15503514
> 
> 赞同：7
> 
> 时间：2013-03-19T15:22:51.403
> 
> 标签：ssl, java-7, smartcard, pkcs#11, authentication

以下代码使用 PKCS#11 设备（智能卡）创建经过客户端身份验证的 SSL 上下文。这一切都适用于 Java 6：

```
// Configure the SunPkcs11 provider
String pkcs11config;
pkcs11config = "name = Cryptoki";
pkcs11config += "\nlibrary = /SCDriver/libbit4ipki.dylib";
InputStream confStream = new ByteArrayInputStream(pkcs11config.getBytes());
SunPKCS11 sunpkcs11 = new SunPKCS11(confStream);
Security.addProvider(sunpkcs11);

// Specify keystore builder parameters for PKCS#11 keystores
Builder scBuilder = Builder.newInstance("PKCS11", sunpkcs11, new KeyStore.CallbackHandlerProtection(new PasswordRetriever()));

// Create and init KeyManagerFactory
KeyManagerFactory factory = KeyManagerFactory.getInstance("NewSunX509");
factory.init(new KeyStoreBuilderParameters(scBuilder));

// create and init ssl context
m_ssl_context = SSLContext.getInstance("TLS");
m_ssl_context.init(factory.getKeyManagers(), new TrustManager[] {new PkTrustManager()}, null);      
SSLContext.setDefault(m_ssl_context); 
```

*PkTrustManager*是简单的“空”类，可以永久使用任何服务器/客户端证书，*PasswordRetriever*只是通过对话框询问密码（根据请求，我发布了这些的源代码）。在 Java 7 上，我在 ssl 上下文的 SSL 握手期间收到以下异常：

```
java.security.InvalidKeyException: Class does not represent an RSA key: sun.security.pkcs11.P11Key$P11PrivateKey
    at iaik.pkcs.pkcs1.RSACipher.engineInit(Unknown Source)
    at iaik.pkcs.pkcs1.RSACipher.engineInit(Unknown Source)
    at iaik.security.rsa.RSA.init(Unknown Source)
    at iaik.security.rsa.RawRSASignature.engineInitSign(Unknown Source)
    at java.security.SignatureSpi.engineInitSign(SignatureSpi.java:103)
    at java.security.Signature.initSign(Signature.java:529)
    at sun.security.ssl.RSASignature.engineInitSign(RSASignature.java:125)
    at java.security.Signature$Delegate.engineInitSign(Signature.java:1136)
    at java.security.Signature.initSign(Signature.java:529)
    at sun.security.ssl.HandshakeMessage$CertificateVerify.<init>(HandshakeMessage.java:1556)
    at sun.security.ssl.ClientHandshaker.serverHelloDone(ClientHandshaker.java:982)
    ... 14 more 
```

在最好的情况下，我会说 Java 内部发生了一些变化，但是检查 Oracle 文档，我没有发现 NewSunX509 密钥管理器或其他组件有任何假设的变化。我仔细检查了代码，它似乎符合规范（通过肯定我错过了一些东西！）。

我尝试添加配置标志：

```
System.setProperty("javax.net.ssl.keyStoreType", "pkcs11");
System.setProperty("javax.net.ssl.keyStore", "NONE");
System.setProperty("javax.net.ssl.trustStoreType", "pkcs11");
System.setProperty("javax.net.ssl.trustStore", "NONE");
System.setProperty("javax.net.ssl.keyStoreProvider", sunpkcs11.getName() );
JCEMapper.setProviderId(sunpkcs11.getName()); 
```

但是没有变化，同样的错误......而且它们在所有工作的Java 6中都不需要。在此先感谢任何人都可以提供帮助或有任何想法！

PS：应@owlstead 的请求，添加了**-Djava.security.debug=sunpkcs11**并得到以下输出：

```
SunPKCS11 loading ---DummyConfig-1---
sunpkcs11: Initializing PKCS#11 library /SCDriver/libbit4ipki.dylib
Information for provider SunPKCS11-Cryptoki
Library info:
  cryptokiVersion: 2.20
  manufacturerID: bit4id srl                      
  flags: 0
  libraryDescription: bit4id PKCS#11                  
  libraryVersion: 1.02
All slots: 0
Slots with tokens: 0
Slot info for slot 0:
  slotDescription: bit4id miniLector-U38 00 00                                     
  manufacturerID: unknown                         
  flags: CKF_TOKEN_PRESENT | CKF_REMOVABLE_DEVICE | CKF_HW_SLOT
  hardwareVersion: 0.00
  firmwareVersion: 0.00
Token info for token in slot 0:
  label: CNS                             
  manufacturerID: ST Incard                       
  model: CNS (LB)        
  serialNumber: 7420057800291590
  flags: CKF_RNG | CKF_LOGIN_REQUIRED | CKF_USER_PIN_INITIALIZED | CKF_TOKEN_INITIALIZED
  ulMaxSessionCount: CK_EFFECTIVELY_INFINITE
  ulSessionCount: 0
  ulMaxRwSessionCount: CK_EFFECTIVELY_INFINITE
  ulRwSessionCount: CK_UNAVAILABLE_INFORMATION
  ulMaxPinLen: 8
  ulMinPinLen: 5
  ulTotalPublicMemory: 31988
  ulFreePublicMemory: CK_UNAVAILABLE_INFORMATION
  ulTotalPrivateMemory: 780
  ulFreePrivateMemory: CK_UNAVAILABLE_INFORMATION
  hardwareVersion: 0.00
  firmwareVersion: 0.00
  utcTime: 0000000000000000
Mechanism CKM_RSA_PKCS:
  ulMinKeySize: 1024
  ulMaxKeySize: 1024
  flags: 2561 = CKF_HW | CKF_DECRYPT | CKF_SIGN
Mechanism CKM_RSA_PKCS_KEY_PAIR_GEN:
  ulMinKeySize: 1024
  ulMaxKeySize: 1024
  flags: 65537 = CKF_HW | CKF_GENERATE_KEY_PAIR
Mechanism CKM_SHA1_RSA_PKCS:
  ulMinKeySize: 1024
  ulMaxKeySize: 1024
  flags: 2049 = CKF_HW | CKF_SIGN
Mechanism CKM_SHA_1:
  ulMinKeySize: 0
  ulMaxKeySize: 0
  flags: 1024 = CKF_DIGEST
Mechanism CKM_SHA256:
  ulMinKeySize: 0
  ulMaxKeySize: 0
  flags: 1024 = CKF_DIGEST
Mechanism CKM_SHA256_RSA_PKCS:
  ulMinKeySize: 1024
  ulMaxKeySize: 1024
  flags: 2049 = CKF_HW | CKF_SIGN
Mechanism CKM_SHA384:
  ulMinKeySize: 0
  ulMaxKeySize: 0
  flags: 1024 = CKF_DIGEST
Mechanism CKM_SHA384_RSA_PKCS:
  ulMinKeySize: 1024
  ulMaxKeySize: 1024
  flags: 2049 = CKF_HW | CKF_SIGN
Mechanism CKM_SHA512:
  ulMinKeySize: 0
  ulMaxKeySize: 0
  flags: 1024 = CKF_DIGEST
Mechanism CKM_SHA512_RSA_PKCS:
  ulMinKeySize: 1024
  ulMaxKeySize: 1024
  flags: 2049 = CKF_HW | CKF_SIGN
Mechanism CKM_RSA_X_509:
  ulMinKeySize: 1024
  ulMaxKeySize: 1024
  flags: 2561 = CKF_HW | CKF_DECRYPT | CKF_SIGN
Password per token PKCS11 [SunPKCS11-Cryptoki]: sunpkcs11: login succeeded
sunpkcs11: user already logged in
javax.net.ssl.SSLHandshakeException: Error signing certificate verify
    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1886)
    *....... (continues with the exception as described above)* 
```

注意：随着 Java 6 的最后一次更新，我的代码也停止在 Java 6 上运行 :(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T13:02:47.303

**通过添加代码行**解决：****

 **```
Security.removeProvider("IAIK"); 
```

行前：

```
Security.addProvider(sunpkcs11); 
```

这适用于所有版本的 java6 和 java7（希望他们不会在 java8 中再次搞砸一些东西...... :)

看起来 IAIK 提供者将自己插入为 PKCS11 提供者，但随后使用它作为软件密钥调用私钥......因为它实际上是一个软件提供者。**

# php - MySQL: multiple search/select queries at the same time?

> ID：15503515
> 
> 赞同：0
> 
> 时间：2013-03-19T15:22:54.410
> 
> 标签：php, mysql

I have a question on how to go about the next phase of a project I am working on.

Phase I:

create a php script that scraped directory for all .txt file.. Open/parse each line, explode into array... Loop through array picking out pieces of data that were needed and INSERTING everything into the database (120+ .txt files & 100k records inserted)..

this leads me to my next step,

Phase II:

I need to take a 'list' of several 10's of thousand of numbers.. loop through each one, using that piece of data (number) as the search term to QUERY the database.. if a match is found I need to grab a piece of data in a different column of the same record/row..

General thoughts/steps I plan to take

1.  scrape directory to find 'source' text file.
2.  open/parse 'source file'.... line by line...
3.  explode each line by its delimiting character.. and grab the 'target search number'
4.  dump each number into a 'master list' array...
5.  loop through my 'master list' array.. using each number in my search (SELECT) statement..
6.  if a match is found, grab a piece of data in another column in the matching/returned row (record)...
7.  output this data.. either to screen or .txt file (havent decided on that step yet,..most likely text file through each returned number on a new line)

Specifics:

I am not sure how to go about doing a 'multiple' search/select statement like this?

How can I do multiple SELECT statements each with a unique search term? and also collect the returned column data?

is the DB fast enough to return the matching value/data in a loop like this? Do I need to wait/pause/delay somehow for the return data before iterating through the loop again?

thanks!

current function I am using/trying:

this is where I am currently:

```
 ```
$harNumArray2 = implode(',', $harNumArray);
//$harNumArray2 = '"' . implode('","', $harNumArray) . '"';
$query = "SELECT guar_nu FROM placements WHERE har_id IN ($harNumArray2)";
echo $query;

$match = mysql_query($query);
//$match = mysql_query('"' . $query . '"');
$results = $match;
echo("<BR><BR>");
print_r($results); 
``` I get these outputs respectively:

Array ( [0] => sample_source.txt )

Total FILES TO GRAB HAR ID's FROM: 1

TOAL HARS FOUND IN ALL FILES: 5
SELECT guar_nu FROM placements WHERE har_id IN ("108383442","106620416","109570835","109700427","100022236")

&

Array ( [0] => sample_source.txt )

Total FILES TO GRAB HAR ID's FROM: 1

TOAL HARS FOUND IN ALL FILES: 5
SELECT guar_nu FROM placements WHERE har_id IN (108383442,106620416,109570835,109700427,100022236)

Where do I stick this to actually execute it now?

thanks!

update:

this code seems to be working 'ok'.. but I dont understand on how to handle the retirned data correctly..  I seem to only be outputting (printing) the last variable/rows data..instead of the entire list..

```
$harNumArray2 = implode(',', $harNumArray);
//$harNumArray2 = '"' . implode('","', $harNumArray) . '"';
//$query = "'SELECT guar_num FROM placements WHERE har_id IN ($harNumArray2)'";

$result = mysql_query("SELECT har_id, guar_num FROM placements WHERE har_id IN (" . $harNumArray2 . ")")
//$result = mysql_query("SELECT har_id, guar_num FROM placements WHERE har_id IN (0108383442,0106620416)")
or die(mysql_error());  

// store the record of the "example" table into $row
$row = mysql_fetch_array($result);
$numRows = mysql_num_rows($result);

/*
while($row = @mysql_fetch_assoc($result) ){
    // do something
    echo("something <BR>");
}
*/

// Print out the contents of the entry 
echo("TOTAL ROWS RETURNED : " . $numRows . "<BR>");
echo "HAR ID: ".$row['har_id'];
echo " GUAR ID: ".$row['guar_num']; 
```

How do I handle this returned data properly?  

thanks!

            回答 #1

赞同：0

时间：2013-03-19T15:31:06.640

我不知道这是否回答了您的问题，但我认为您是在询问子查询。它们非常简单，看起来像这样

```
SELECT * FROM tbl1 WHERE id = (SELECT num FROM tbl2 WHERE id = 1); 
```

只有当第二个子查询有一个唯一值时，这才有效。如果它返回多行，它将返回一个解析错误。如果您必须选择多行，请研究 JOIN 语句。这可以让你开始

[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

            回答 #2

赞同：-1

时间：2013-03-19T15:33:20.837

*我不确定如何进行这样的“多个”搜索/选择语句？*

关于多选，（我假设您使用的是 MySQL），您可以使用“ [IN”关键字](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)简单地执行该操作：

例如：

```
SELECT * 
FROM YOUR_TABLE 
WHERE COLUMN_NAME IN (LIST, OF, SEARCH, VALUES, SEPARATED, BY COMMAS) 
```

**编辑**：按照问题中的更新代码。

在我们继续之前……你应该尽量避免在 PHP 中为新代码使用 mysql_ 函数，因为它们即将被弃用。考虑使用通用 PHP DB 处理程序 PDO 或更新的 mysqli_ 函数。有关为您选择“正确”API 的更多帮助在[这里](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。

*如何正确处理返回的数据？*

要处理多行数据（您就是这样），您应该使用循环。应该执行以下操作（我的示例将使用 mysqli_ 函数 - 这可能与您一直在使用的 API 更相似）：

```
 $mysqli   = mysqli_connect("localhost", "user", "pass");
  mysqli_select_db($mysqli, "YOUR_DB");

  // make a comma separated list of the $ids.
  $ids = join(", ", $id_list);

  // note: you need to pass the db connection to many of these methods with the mysqli_ API
  $results  = mysqli_query($mysqli, "SELECT har_id, guar_num FROM placements WHERE har_id IN ($ids)");
  $num_rows = mysqli_num_rows($results);

  while ($row = mysqli_fetch_assoc($results)) {
    echo "HAR_ID: ". $row["har_id"]. "\tGUAR_NUM: " . $row["guar_num"] . "\n";
  } 
```

请注意，这是非常基本的（并且未经测试！）代码，只是为了显示最低限度的步骤。:)

```

# extjs - ExtJs4 How to assign a model to a store at creation?

> ID：15503518
> 
> 赞同：0
> 
> 时间：2013-03-19T15:23:00.163
> 
> 标签：extjs, model, extjs4

I'm defining a store and I want to dynamically assign a Model for it at creation. So if I create my `DropDownStore` and I don't pass a model config with it it needs to rely on the default model(DropDownModel).

Here is my `DropDownModel` + `DropDownStore`:

```
Ext.define('DropDownModel', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'Id', type: 'int' },
        { name: 'Name', type: 'string' }
    ]
});
Ext.define('DropDownStore', {
    extend: Ext.data.Store,
    proxy: {
        type: 'ajax',
        actionMethods: { read: 'POST' },
        reader: {
            type: 'json',
            root: 'data'
        }
    },
    constructor: function(config) {
        var me = this;

        if (config.listUrl) {
            me.proxy.url = config.listUrl;
        }

        me.model = (config.model) ? config.model : 'DropDownModel'; //This line creates some weird behaviour

        me.callParent();

        //If the URL is present, load() the store.
        if (me.proxy.url) {
            me.load();
        }
    }
}); 
```

This is a creation of the `DropDownStore` with a dynamic model:

```
Ext.define('RelationModel', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'Id', type: 'int' },
        { name: 'RelationName', type: 'string' },
        { name: 'RelationOppositeName', type: 'string' }
    ]
});

...//a random combobox
store: Ext.create('DropDownStore', {
    listUrl: 'someprivateurl',
    model: 'RelationModel'
})
... 
```

When I edit the line in the `constructor` method to
`me.model = (config.model) ? config.model : undefined`
It works like expected for the dynamic model but not anymore for the default models.

If I let it be
`me.model = (config.model) ? config.model : 'DropDownModel';`
It works for the default models and not for the dynamic model.

**How can I assign a model to a store at creation?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:09:42.603

```
constructor: function(config) {
    var me = this;

    if (config.listUrl) {
        me.proxy.url = config.listUrl;
    }
    me.callParent();

    if (config.extraFields) {
        me.model.setFields(config.extraFields);
    }

    //If the URL is present, load() the store.
    if (me.proxy.url) {
        me.load();
    }
}

store: Ext.create('DropDownStore', {
    listUrl: 'someprivateurl',
    extraFields: [
        { name: 'Id', type: 'int' },
        { name: 'RelationName', type: 'string' },
        { name: 'RelationOppositeName', type: 'string' }
    ]
}), 
```

# asp.net-mvc - Passing Values from the SelectList Items Using ViewModel

> ID：15503519
> 
> 赞同：0
> 
> 时间：2013-03-19T15:23:02.477
> 
> 标签：asp.net-mvc, viewmodel, html.dropdownlistfor, selectlist

![enter image description here](../Images/ef4deb58642644b96e4c22af10f8915f.png)

I'd like to get the values of the selected items in dropdownlists. I am saving the files into the database with the following code:

```
public ActionResult UploadDoc(IEnumerable<HttpPostedFileBase> files)
{
    foreach (var file in files)
    {
        if (file != null && file.ContentLength > 0)
        {
            byte[] data = new byte[file.ContentLength];
            file.InputStream.Read(data, 0, file.ContentLength);

            Document doc = new Document
            {
                UploadedOn = DateTime.Now,
                MimeType = file.ContentType,
                UserName = User.Identity.Name,
                Data = data,
                FromLanguage = 1,
                ToLanguage = 2
            };

            dbContext = new MedicalDb();
            dbContext.Documents.Add(doc);
            dbContext.SaveChanges();
        }
    }
    return RedirectToAction("Index");
} 
```

but, I'd also like to get the selected values from the dropdownlists so that I can populate the FromLanguage and ToLanguage properties of the documents. I guess I'd need a viewmodel, but don't know how to do it. New rows for document upload are added using jQuery and names of the ddls are "ddlFromLanguage1", "ddlFromLanguage2", "ddFromLanguage3", and "ddlToLanguage1", "ddlToLanguage2", "ddlToLanguage3", etc. Thanks in advance for any help.

```
<form action="UploadDoc" method="post" enctype="multipart/form-data">    
<table id="tblUploadDocs">
    <tr id="row1">
        <td><input type="file" name="files" id="file1" /></td>
        <td>Bu dilden</td>
        <td>@Html.DropDownList("ddlFromLanguage1", ViewBag.Languages as SelectList)</td>
        <td>şu dile çevrilecek</td>
        <td>@Html.DropDownList("ddlToLanguage1", ViewBag.Languages as SelectList)</td>
    </tr>
</table>
<br />
<a href="javascript:addRow();" style="margin:10px 0;">Yeni dosya ekleyin</a>
<input type="submit"  />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:17:37.223

我认为您需要查看好的示例并与他们做相同或非常相似的事情。

看看这些：

*   [ASP.NET MVC 3 视图模型模式](https://stackoverflow.com/questions/9553944/asp-net-mvc-3-viewmodel-pattern)
*   [从 viewModel 在 Asp.net MVC 3 上实现 Dropdownlist](https://stackoverflow.com/questions/7117604/implementing-dropdownlist-on-asp-net-mvc-3-from-viewmodel?rq=1)

这些应该让你继续前进。

如果您没有成功，或者我给您的内容是否真的有帮助，请告诉我。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:41:01.347

除了与模型相关的值外，任何回发的表单都会向控制器返回一个 FormCollection。

例如

```
 //In your view
  @using (Html.BeginForm("CountrySelect", "Country", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                <select name="country" id="country-select">
                   <option value="selector">Pick a Country</option>
                   <option value="England">England</option>
                   <option value="England">England</option> 
                </select>         
            }

//In controller
//This will get you the name of the selected country from your form
[HttpPost]
Public ActionResult CountrySelect(FormCollection formData)
{
   string country = formData["country"].toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:43:44.290

解决方案：

视图模型：

```
public class CustomerDocUploadViewModel
{
    public HttpPostedFileBase File { get; set; }
    public int FromLanguage { get; set; }
    public int ToLanguage { get; set; }
} 
```

风景：

```
@model IList<Models.ViewModels.CustomerDocUploadViewModel> 
```

...

```
<form action="UploadDoc" method="post" enctype="multipart/form-data">    
<table id="tblUploadDocs">
    <tr id="row1">
        <td><input type="file" name="[0].File" /></td>
        <td>Bu dilden</td>
        <td>@Html.DropDownList("[0].FromLanguage", ViewBag.Languages as SelectList)</td>
        <td>şu dile çevrilecek</td>
        <td>@Html.DropDownList("[0].ToLanguage", ViewBag.Languages as SelectList)</td>
    </tr>
</table>
<br />
<a id="lnkAdd" href="javascript:addRow();" style="margin:10px 0;">Yeni dosya ekleyin</a>
<input type="submit"  />
</form> 
```

最后是控制器中的操作方法：

```
[HttpPost]
    public ActionResult UploadDoc(IList<CustomerDocUploadViewModel> docInfos)
    {
        for (int i = 0; i < docInfos.Count; i++)
        {
            if (docInfos.ElementAt(i).File != null && docInfos.ElementAt(i).File.ContentLength > 0)
            {
                byte[] data = new byte[docInfos.ElementAt(i).File.ContentLength];
                docInfos.ElementAt(i).File.InputStream.Read(data, 0, docInfos.ElementAt(i).File.ContentLength);

                // Save the file into the database
                Document doc = new Document
                {
                    UploadedOn = DateTime.Now,
                    MimeType = docInfos.ElementAt(i).File.ContentType,
                    UserName = User.Identity.Name,
                    Data = data,
                    FromLanguage = docInfos.ElementAt(i).FromLanguage,
                    ToLanguage = docInfos.ElementAt(i).ToLanguage
                };

                dbContext = new MedicalDb();
                dbContext.Documents.Add(doc);
                dbContext.SaveChanges();
            }
        }    
        return RedirectToAction("Index");
    } 
```

# c++ - Restrict a C++ template type to a specific variable size

> ID：15503520
> 
> 赞同：5
> 
> 时间：2013-03-19T15:23:09.350
> 
> 标签：c++, templates

I was wondering if it is possible to restrict a template type to be a variable type of a specific size? Assuming I want to accept 4-bytes variable and rejects all the others, if running this code on some compiler where sizeof(int) == 4 and sizeof(bool) == 1:

```
template <class T> FourOnly {...};
FourOnly<int> myInt; // this should compile
FourOnly<bool> myBool; // this should fail at compilation time 
```

Any idea? Thanks!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T15:25:31.640

您可以使用静态断言：

```
template <class T> FourOnly 
{
  static_assert(sizeof(T)==4, "T is not 4 bytes");
}; 
```

如果您没有相关的 C++11 支持，您可以查看[boost.StaticAssert](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_staticassert.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:28:29.430

当不是 4时，您可以使用`std::enable_if`禁止编译。`sizeof(T)`

```
template<typename T,
         typename _ = typename std::enable_if<sizeof(T)==4>::type
        >
struct Four
{}; 
```

但是，我更喜欢[其他答案](https://stackoverflow.com/a/15503578/241631)`static_assert`中的解决方案。

# iphone - Updating Database from iOS app

> ID：15503524
> 
> 赞同：0
> 
> 时间：2013-03-19T15:23:14.393
> 
> 标签：iphone, ios, database, ipad, core-data

Hi I am newbie to iOS programming,

I am building an iOS app to display a catalogue(Product name, Item No, Discription, and Image) of the products. After the user installs the app on the iOS device there may be updates happening to the product list. The user will not be able to modify any data in the database.

Can some one give me an idea of what kind Database i would require to use (SQL lite, Json or Coredata) and how i can let the update happen. Should I update just the new / modified records or update the complete database each time.

From some examples of apps i have seen from the appstore the app downloads the entire (latest version) of the database the first time the app is loaded.

Thanks in advance to all the friends out there in the community. your suggestions, codes, examples and any reference materials and links will be of great help.

Cheers!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:03:33.720

几个想法：

1.  Apple 推荐的框架是 Core Data。尤其是如果您有大量数据，则可能值得熟悉它。

2.  直接 SQLite 编程可以有其优势，但除非你有令人信服的理由去追求它（而且我在你的问题中没有看到任何暗示这一点），否则请坚持使用 Core Data。如果您决定使用 SQLite，请考虑使用 SQLite 的[FMDB](https://github.com/ccgus/fmdb) Objective-C 包装器。

3.  如果您正在处理少量数据（例如，十几条记录），Core Data 可能是多余的，您可以只使用属性列表（plist）。例如，如果您已将 JSON 下载到`NSArray`or`NSDictionary`中，那么您可以`writeToFile`保存它，`dictionaryWithContentsOFFile`或者`arrayWithContentsOfFile`在将来的某个日期读回它。

4.  JSON 通常被认为更像是一种与服务器交换数据的机制。我不会倾向于以 JSON 格式在本地存储数据（尽管你可以）。我会改用plist。

5.  顺便说一句，通常不建议将图像本身存储在 CoreData/SQLite 数据库中。如果您有较大的文件，出于性能原因，我们通常将它们存储在 iOS[文件系统](http://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW12)中（并在数据库中保存一些对文件名的引用）。

6.  您提到您已经看到下载整个（最新版本）数据库的应用程序。更复杂的实现（对大型数据库至关重要）将需要下载更新（编辑、删除、插入）而不是完整的数据库。对于小型数据库，如果您可以摆脱您提出的解决方案（而且它肯定会使它变得更容易），但是随着您的应用程序变得更加复杂，您将需要考虑更优雅的服务器集成。

# spring - 命名查询未知：byShipmentNumber

> ID：15503530
> 
> 赞同：1
> 
> 时间：2013-03-19T15:23:28.337
> 
> 标签：spring, hibernate

似乎无法弄清楚为什么它看不到我的命名查询。希望有人可以对此有所了解：
这是代码：

```
@Data
@Entity
@Table(name = "shipments")
    @NamedNativeQueries({
        @NamedNativeQuery(name = "byShipmentNumber", query = "select S.SHIPMENTS_ID,S.SHIPMENT_NUMBER,S.COMPANIES_ID, S.COMPANIES_ID_3,(min(sil.IMPORT_PCT)) MIN_PCT,(max(sil.IMPORT_PCT)) MAX_PCT,"
        + "(case when ((nvl((SUM(case when (nvl(SIL.IMPORT_PCT,0)>0) then 1 end)),0)) < count(nvl(SIL.IMPORT_PCT,0))) then 0 else 1 end) Status from SHIPMENTS s "
        + "join shipment_invoices si on s.shipments_id = si.shipments_id"
        + "join SHIPMENT_INVOICE_LINES sil on SI.SHIPMENT_INVOICES_ID = sil.SHIPMENT_INVOICES_ID"
        + "where s.SHIPMENT_NUMBER = :shipmentNumber"
        + "and companies_id=23351763"
        + "group by S.SHIPMENTS_ID,S.SHIPMENT_NUMBER,S.COMPANIES_ID, S.COMPANIES_ID_3;",
        resultClass = Shipments.class)
    })
    public class Shipments implements Serializable {

        @Id
        @Column(name = "shipments_id")
        private Long id;
        @Column(name = "shipment_number")
        private String shipmentNumber;
        @Column(name = "companies_id")
        private String billTo;
        @Column(name = "companies_id_3")
        private String issuer;
        @Column(name = "status")
        private String status;
        @Column(name = "min_pct")
        private String minImportCost;
        @Column(name = "max_pct")
        private String maxImportCost;

        public static List<Shipments> getShipmentByShipmentNumber(Session session, String shipmentNumber) {
            Query query = session.getNamedQuery("byShipmentNumber");
            query = query.setString("shipmentNumber", shipmentNumber);
            return query.list();
        } 
```

这是错误：

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/ImportCost.spring] threw exception [Request processing failed; nested exception is org.hibernate.MappingException: Named query not known: byShipmentNumber] with root cause
org.hibernate.MappingException: Named query not known: byShipmentNumber 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:34:58.627

我认为这是因为你的类没有被注释为`@Entity`，所以它被 JPA 忽略了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:35:28.383

似乎是设置错误，而不是编程错误。
在我的 db.xml（在 spring 下）中，我正在扫描错误的文件夹。

```
bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="datasource" />
        <property name="packagesToScan" value="**dk.lector.bestinfoII.importcost.domain**" 
....(other properties)....
        </property>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager"/>
    <context:component-scan base-package="**dk.lector.bestinfoII.importcost.domain**"/> 
```

** 在我链接到错误文件夹的地方

# excel - 选项卡颜色的更改 - 宏 - 无法正常工作

> ID：15503534
> 
> 赞同：0
> 
> 时间：2013-03-19T15:23:37.167
> 
> 标签：excel, vba

我有一个可以更改标签颜色的宏。如果工作表中有任何值，则选项卡将变为绿色。如果什么都没有，它会变成红色。我从网上找到的现成的宏中结合了这个宏。目前我把它放到 ThisWorkbook 但在这种情况下它适用于工作簿中的每张纸，我只想要我指定的那两张纸（“我们的数据”和“测试”）。我将此宏拆分为位于 ThisWorkbook 上方的工作表，但它不起作用。有人可以帮我修改吗？

```
Private Sub Workbook_SheetChange(ByVal Test As Object, ByVal Target As Range)
If Cells.Find("*") Is Nothing Then
    Test.Tab.ColorIndex = 3
Else
    Test.Tab.ColorIndex = 10
End If
End Sub

Private Sub Workbook_SheetChange2(ByVal Test As Object, ByVal Target As Range)
If Cells.Find("*") Is Nothing Then
    Our Data.Tab.ColorIndex = 3
Else
    Our Data.Tab.ColorIndex = 10
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:34:59.687

您不能以这种方式拆分它...删除第二个并首先改进，如下所示：

```
Private Sub Workbook_SheetChange(ByVal Test As Object, ByVal Target As Range)

If Test.Name = "Our Data" Or Test.Name = "Test" Then
    If Cells.Find("*") Is Nothing Then
        Test.Tab.ColorIndex = 3
    Else
        Test.Tab.ColorIndex = 10
    End If
End Sub 
```

将其保存在您现在拥有的位置（在`ThisWorkbook`模块中）

**编辑- 所有想要使用它的人的**附加信息。**提出的想法非常低效。每次在任何工作表中的任何单元格中进行任何更改时，都会触发该事件。请考虑使用其他事件。我建议使用`SheetActivate`.`SheetDeactivate`**

# django - 如何在 django 中为每个相关对象选择一个对象？

> ID：15503535
> 
> 赞同：0
> 
> 时间：2013-03-19T15:23:37.423
> 
> 标签：django, django-queryset

如果我有两节课：

```
class Group(models.Model):
    name = models.CharField(...)

class Item(models.Model):
    group = models.ForeignKey(Group)
    published = models.DateTimeField(auto_now_add=True) 
```

如何制作 QuerySet 以从每个组中选择最新发布的项目？我想它应该是这样的

```
Item.objects.order_by('published').distinct('group') 
```

但我不能让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:43:58.617

**模型.py**

```
class Group(models.Model):
    name = models.CharField(max_length=100)

    def __unicode__(self):
        return self.name

    def latest_published(self):
        items = Item.objects.filter(group=self)[:1]
        for item in items:
            return item.published
        return ''

class Item(models.Model):
    group = models.ForeignKey(Group)
    published = models.DateTimeField()

    def __unicode__(self):
        return "{0}".format(self.published)

    class Meta:
        ordering = ('-published',) 
```

**视图.py**

```
def myview(request):
    groups = Group.objects.filter()

    [.........] 
```

**模板**

```
{% for group in groups %}
    {{group}} - {{group.latest_published}}<br/>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-17T03:56:10.133

如果您不介意将所有项目从数据库加载到内存中，并且希望在单个查询中完成，那么您可以这样做。在我的场景中，大约有 8 个“项目”和大约 4 个“组”，所以这样做几乎不会影响性能。

```
from itertools import groupby

items = [list(g)[0] for k, g in groupby(Item.objects.all().order_by('group', '-published'), lambda x: x.group_id)] 
```

`.select_related('group')`如果您希望能够访问组对象，请添加到内部查询集。

**它在做什么？**

1.  查询集以获取所有项目
2.  按组对项目进行分组
3.  从每个组中挑选第一个项目，并将它们放入一个列表中。

# c - 自然对齐的内存地址

> ID：15503537
> 
> 赞同：5
> 
> 时间：2013-03-19T15:23:41.330
> 
> 标签：c, memory, binary, bit-shift

我需要从现有的 64 位值中提取一个内存地址，该地址指向一个 4K 数组，起始值为：

```
0x000000030c486000 
```

我需要的地址存储在位 51:12 中，因此我使用以下方法提取这些位：

```
address = start >> 12 & 0x0000007FFFFFFFFF 
```

这给我留下了以下地址：

```
0x000000000030c486 
```

但是，我正在阅读的文档指出，存储在该地址的数组大小为 4KB，并且自然对齐。

我对自然对齐的实际含义有点困惑。我知道对于页面对齐的东西，地址通常以“000”结尾（尽管我可能错了）。

我假设从起始值获取的地址只有 40 位长，我需要执行额外的位移操作来排列这些位，以便可以进一步正确解释它们。

如果有人可以就此提供一些建议，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:34:54.153

通常，“自然对齐”意味着任何项目至少对齐到其自身大小的倍数。例如，一个 4 字节的对象与一个 4 的倍数的地址对齐，一个 8 字节的对象与一个 8 的倍数的地址对齐，等等。

对于数组，您通常不会查看整个数组的大小，而是查看数组元素的大小。

同样，对于`struct`or `union`，您通常会查看最大元素的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:33:36.117

“自然对齐”地址是处理器上数据类型首选的某个值的倍数。对于大多数常见处理器上的大多数基本数据类型，首选对齐方式与数据大小相同：四字节整数应对齐四字节的倍数，八字节浮点数应对齐八字节的倍数， 等等。有些平台需要对齐，有些只是更喜欢它。某些类型的对齐要求与其尺寸不同。例如，一个 12 字节的`long float`可能需要四字节对齐。具体值取决于您的目标平台。“自然对齐”不是一个正式术语，因此有些人可能只将其定义为数据大小倍数的首选对齐，而其他人可能允许它用于处理器上首选的其他对齐。

从 64 位值中取出位表明地址已以某种方式进行了转换。例如，地址中的密钥位已存储在页表条目中。重建原始地址可能会也可能不会像提取位并将它们一直移动到“右”（低端）那样简单。然而，像这样的位被移动到不同的位置也是很常见的（在低位留下零）。您应该仔细检查文档。

请注意，4 KiB 数组，4096 字节，对应于 2 ^(12)字节。12 与 64 位值中的 51:12 字段的重合表明，可以简单地通过提取这 40 位而不移动它们来获得地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T15:34:29.830

自然对齐要求每个 N 字节访问必须在 N 的内存地址边界上对齐。我们可以用模运算符来表达这一点：addr % N 必须为零。举些例子：

从地址 0x10004 访问 4 个字节的内存是对齐的 (0x10004 % 4 = 0)。

从地址 0x10005 访问 4 个字节的内存是未对齐的 (0x10005 % 4 = 1)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-14T18:46:39.693

从硬件的角度来看，内存通常被分成一定大小的块，这样一个块中的任何或所有数据都可以在单个操作中读取或写入，但任何单个操作只能影响单个块中的数据。

典型的 80386 时代系统会将内存分组为四字节块。访问完全适合单个块的两字节或四字节值将需要一个操作。如果该值部分存储在一个块中，部分存储在另一个块中，则需要两个操作。

多年来，块大小已经变得大于数据大小，以至于大多数随机放置的 32 位值完全适合一个块，但是某些处理器可能会出现第二个问题：如果一个块是例如 512 位（ 64 字节），并且已知 32 位字以四个字节（32 位）的倍数对齐，获取字的每个位可以来自 16 个位置中的任何一个。如果不知道单词是否对齐，则对于单词完全适合块的情况，每个位都可能来自 61 个位置中的任何一个。从 61 个选项中快速选择的电路比在 16 个选项中选择的电路更复杂，并且大多数代码将使用对齐的数据，因此即使在一个未对齐的单词适合单个可访问块的情况下，硬件可能仍需要一些额外的是时候提取它了。

# hibernate - Hibernate Inheritance - Referencing an entity annotated with @MappedSuperclass

> ID：15503544
> 
> 赞同：6
> 
> 时间：2013-03-19T15:23:52.113
> 
> 标签：hibernate, inheritance

```
@MappedSuperclass
public abstract class AbstractBaseModel{ }

@MappedSuperclass
public class Person extends AbstractBaseModel { }

@Entity
public class APerson extends Person { }

@Entity
public class BPerson extends Person { }

@Entity
public class Course extends AbstractBaseModel { 
  @ManyToOne
  @JoinColumn(name ="person")
  private Person person;
} 
```

Above structure will give an exception:

```
Caused by: org.hibernate.AnnotationException: @OneToOne or @ManyToOne on    
Course references an unknown entity: Person 
```

It says you cannot use Person in mappings because it is not a concrete Entity. How do I achieve such an inheritance scenario?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:42:39.103

简单，您将`@MappedSuperclass`注释更改`Person`为`@Entity`

`@MappedSuperclass`仅在您明确不希望类可查询或属于关系的一部分时使用。`@Entity`其他地方。

一个很好的启发式决定是看看你的超类是否`abstract`——如果是的话——使用`@MappedSuperclass`，就像你在`AbstractBaseModel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T05:12:38.520

```
@Entity
@Table(name="PERSON")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="discriminator",discriminatorType=DiscriminatorType.STRING)
public absract class Person extends AbstractBaseModel { }

@Entity
public class APerson extends Person { }

@Entity
public class BPerson extends Person { }

@Entity
public class Course extends AbstractBaseModel { 
  @ManyToOne
  @JoinColumn(name ="person", **insertable = false, updatable = false** )
  private Person person;
} 
```

# javascript - How to attach cookie to request when setting iframe.src (using jquery)?

> ID：15503545
> 
> 赞同：1
> 
> 时间：2013-03-19T15:23:54.490
> 
> 标签：javascript, jquery, iframe, cookies

Using JavaScript/jQuery within a web page, I need to load a different page into an iframe. I am doing it by finding the iframe using jQuery, and setting its src property, thus:

```
iframe.src = url; 
```

Which works in that it displays the page in the iframe, but I need to attach a couple of cookies to that request to get the correct info on the page, and I can't figure out how to do that.

In the spirit of trial and error I tried inserting this line before the above code:

```
$.cookie("MyCookieName", "MyCookieValue"); 
```

but in Fiddler I see no cookie attached to the request. All the documentation I can find about cookies tells me how to generally get & set the values, but doesn't help explain what I'm doing wrong.

For what it's worth, the page that I'm loading into the iframe is in the same domain as the page hosting this JavaScript code.

How do I attach cookies to that query?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:26:45.397

> 如何将 cookie 附加到该查询？

您不能将 cookie “附加”到浏览器自己发出的简单 HTTP 请求。

> 值得一提的是，我加载到 iframe 中的页面与托管此 JavaScript 代码的页面位于同一域中。

然后以正常方式为该域设置 cookie - 一旦设置，浏览器将在自动请求 iframe URL 时发送它。

# highcharts - Highcharts: Hide chart but not date range selection or zoom

> ID：15503548
> 
> 赞同：0
> 
> 时间：2013-03-19T15:24:08.527
> 
> 标签：highcharts

In HighCharts/HighStock I'd like to be able to click a button and hide only the graph section, but leave the date selection tools. To illustrate my point, here are a couple screenshots:

Default view:

![Default view](../Images/145ed185e260fb43a2eabd9f0fb5665e.png)

Now, after clicking a button, hide the chart but leave the other elements:

![After button click](../Images/1d7d30e43315f10c48de2ebe1bc7412e.png)

We would like to do this because we'd like to use the date slider as a date range filter for the overall error page, but only show the graph when a button is clicked.

I tried inspecting the elements to just do a manual hide/show with jQuery, but it doesn’t seem like that is going to work too well. Is there any built in functionality to accomplish this?

Or does anyone have any other ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:13:39.880

一般来说，您可以通过组合来实现：

*   通过设置图表高度`chart.setSize(null, value);`
*   使用`axis.update`在 Highcharts 3.0 Beta 中引入

见[例子](http://jsfiddle.net/Fusher/YzFHF/1/)。

# vim - 粘贴到 vim 后文本变形

> ID：15503557
> 
> 赞同：7
> 
> 时间：2013-03-19T15:24:30.270
> 
> 标签：vim

我想将网页或vim窗口中的一系列行粘贴到另一个vim窗口中，我使用鼠标复制和粘贴原始内容是：

```
 // Calculate the sum                                            //
     sum = 0;
     while (len > 1)
     {
             sum += *buf++;
             if (sum & 0x80000000)
                     sum = (sum & 0xFFFF) + (sum >> 16);
             len -= 2;
     }

     if ( len & 1 )
             // Add the padding if the packet lenght is odd          //
             sum += *((uint8_t *)buf); 
```

将它们粘贴到另一个 vim 后，这些行变为：

```
 // Calculate the sum                                            //
     //          sum = 0;
     //                   while (len > 1)
     //                            {
     //                                             sum += *buf++;
     //                                                              if (sum & 0x80000000)
     //                                                                                       sum = (sum & 0xFFFF) + (sum >> 16);
     //                                                                                                        len -= 2;
     //                                                                                                                 }
     //
     //                                                                                                                          if ( len & 1 )
     //                                                                                                                                           // Add the padding if the packet lenght is odd          //
     //                                                                                                                                                            sum += *((uint8_t *)buf);
     //
     //                                                                                                                                                                     // Add the pseudo-header 
```

为什么会这样？以及如何按预期进行粘贴？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T15:32:20.610

好的，我添加一个答案。

`set paste`在粘贴之前考虑一下（特别是对于带有缩进的代码）。请注意，该`paste`选项可能会产生“副作用”。阅读帮助。

粘贴后最好将 paste 设置为 false。如果您确实粘贴了很多，则将键映射到启用/禁用粘贴选项会很方便。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:25:49.813

auto-indent 或 smart-indent 都会对你这样做。在粘贴之前执行此操作：

```
: set noai
: set nosi 
```

然后粘贴。它应该可以粘贴。完成粘贴后，请执行以下操作：

```
:set ai
:set si 
```

`ai`是 的缩写`autoindent`。

`si`是 的缩写`smartindent`。

* * *

根据 Kent 对该问题的评论，您也可以使用`:set paste`. 以下是官方帮助的解释：

```
 *'paste'* *'nopaste'*
'paste'         boolean (default off)
            global
            {not in Vi}
    Put Vim in Paste mode.  This is useful if you want to cut or copy
    some text from one window and paste it in Vim.  This will avoid
    unexpected effects.
    Setting this option is useful when using Vim in a terminal, where Vim
    cannot distinguish between typed text and pasted text.  In the GUI, Vim
    knows about pasting and will mostly do the right thing without 'paste'
    being set.  The same is true for a terminal where Vim handles the
    mouse clicks itself.
    This option is reset when starting the GUI.  Thus if you set it in
    your .vimrc it will work in a terminal, but not in the GUI.  Setting
    'paste' in the GUI has side effects: e.g., the Paste toolbar button
    will no longer work in Insert mode, because it uses a mapping.
    When the 'paste' option is switched on (also when it was already on):
        - mapping in Insert mode and Command-line mode is disabled
        - abbreviations are disabled
        - 'textwidth' is set to 0
        - 'wrapmargin' is set to 0
        - 'autoindent' is reset
        - 'smartindent' is reset
        - 'softtabstop' is set to 0
        - 'revins' is reset
        - 'ruler' is reset
        - 'showmatch' is reset
        - 'formatoptions' is used like it is empty
    These options keep their value, but their effect is disabled:
        - 'lisp'
        - 'indentexpr'
        - 'cindent'
    NOTE: When you start editing another file while the 'paste' option is
    on, settings from the modelines or autocommands may change the
    settings again, causing trouble when pasting text.  You might want to
    set the 'paste' option again.
    When the 'paste' option is reset the mentioned options are restored to
    the value before the moment 'paste' was switched from off to on.
    Resetting 'paste' before ever setting it does not have any effect.
    Since mapping doesn't work while 'paste' is active, you need to use
    the 'pastetoggle' option to toggle the 'paste' option with some key. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:26:22.810

您已打开`autoindent`或`smartindent`打开。要关闭它们，请使用

```
:set noai
:set nosi 
```

删除否以重新打开它们。

# .net - .net Interrop Outlook ItemChangeEvent 触发多次

> ID：15503558
> 
> 赞同：0
> 
> 时间：2013-03-19T15:24:32.700
> 
> 标签：.net, outlook, ms-office, office-pia

我正在使用 interrop 来处理 Outlook 中的更改事件，因此当日历项目被更改时，我可以显示一条消息。问题是它触发了 3 次事件：s。

这是代码：

```
Private Sub mCalendarItems_ItemChangeEvent(ByVal Item As NetOffice.COMObject) Handles                     mCalendarItems.ItemChangeEvent
           Dim i As outlook.AppointmentItem = Nothing
           i = DirectCast(Item, outlook.AppointmentItem) 
        If i IsNot Nothing Then
            MessageBox.Show("Vous venez de modifier la tâche " & i.Subject)
            Application.DoEvents()
         End If
    i = Nothing End Sub 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T13:54:48.780

我遇到了同样的问题，但发现它与事件处理程序无关。多个事件的原因是，我安装了 HotMail 连接器，这将在同步时修改项目两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:30:24.280

如果一个项目被保存 3 次，该事件将被触发 3 次。

你如何设置事件处理程序？您是否可以设置事件挂钩 3 次？

[如果您查看OutlookSpy](http://www.dimastr.com/outspy/)中的文件夹，甚至会触发多少次？单击 OutlookSpy 工具栏（“Outlook 对象模型”组）上的文件夹按钮，选择项目属性，单击浏览。在新的项目窗口中，转到事件选项卡。修改约会，查看“事件”选项卡底部的“日志”框。

# parsing - ANTLR4：空白处理

> ID：15503561
> 
> 赞同：24
> 
> 时间：2013-03-19T15:24:41.057
> 
> 标签：parsing, antlr, whitespace, parser-generator, antlr4

我见过许多使用空格处理的 ANTLR 语法，如下所示：

```
WS: [ \n\t\r]+ -> skip;
// or
WS: [ \n\t\r]+ -> channel(HIDDEN); 
```

所以空格被丢弃，分别发送到隐藏通道。

使用这样的语法：

```
grammar Not;

start:      expression;
expression: NOT expression
          | (TRUE | FALSE);

NOT:    'not';
TRUE:   'true';
FALSE:  'false';
WS: [ \n\t\r]+ -> skip; 
```

有效输入是“ *not true* ”或“ *not false* ”，但也有“ *nottrue* ”，这不是期望的结果。将语法更改为：

```
grammar Not;

start:      expression;

expression: NOT WS+ expression
          | (TRUE | FALSE);

NOT:    'not';

TRUE:   'true';
FALSE:  'false';

WS: [ \n\t\r]; 
```

解决了这个问题，但我不想在每个规则中手动处理空格。

通常，我希望每个标记之间有一个空格，但有一些例外（例如，' *!true* ' 之间不需要空格）。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-19T15:29:50.310

添加`IDENTIFIER`词法分析器规则来处理不是关键字的单词。

```
IDENTIFIER : [a-zA-Z]+; 
```

现在文本`nottrue`是一个单一的`IDENTIFIER`标记，你的解析器不会接受它来代替`not true`.

确保在您的其他关键字*之后*`IDENTIFIER`定义。词法分析器将找到两者并匹配 text ，并将标记类型分配给语法中出现的第一个。*`NOT``IDENTIFIER``not`*

# mysql - 在一行 SQL 中更新两个不同的行

> ID：15503562
> 
> 赞同：3
> 
> 时间：2013-03-19T15:24:55.060
> 
> 标签：mysql, sql, sql-update

假设我有一个名为 example 的表：

[ABC] | [定义]

--1---|-qwerty-

--2---|-asdf---

我想要做的是更新一个 SQL 查询中的两列（仅使用一个 UPDATE）。

```
UPDATE example SET def = 'foo' where abc = '1'

UPDATE example SET def = 'bar' where abc = '2' 
```

以上是我想要实现的，但是在一行 sql 中（使用 MySQL）。我知道你可以这样做，`UPDATE example SET def 'foo', SET def = 'bar'`但我不确定你如何使用两个不同的 where 语句来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:27:00.107

您可以`UPDATE`使用`IF`( *mysql 支持*) 或使用`CASE`来执行一个，以使其对 RDBMS 更友好。

```
UPDATE  example
SET     def = IF(abc = 1, 'foo', 'bar')
WHERE   abc IN (1, 2) -- reason to make it more faster, doesn't go on all records 
```

或者

```
UPDATE  example
SET     def = CASE WHEN abc = 1 THEN 'foo' ELSE 'bar' END
WHERE abc IN (1, 2) -- reason to make it more faster, doesn't go on all records 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:29:05.950

像这样：

```
UPDATE example SET def = 
    CASE abc 
        WHEN '1' THEN 'foo' 
        WHEN '2' THEN 'bar'
    END 
```

这允许您输入超过 2 个案例。

# python - 如何在多个顺序 ascii 文件中的特定位置插入字符串？

> ID：15503563
> 
> 赞同：0
> 
> 时间：2013-03-19T15:24:56.437
> 
> 标签：python, string, insert, ascii, sequential

我正在编写读取顺序 ascii 文件并对其进行更改的代码。

到目前为止，我已经成功地读取了文件并替换了字符串。例如：

```
import os
import re
parent_folder_path = '.'
for eachFile in os.listdir(parent_folder_path):
    if eachFile.endswith('.sos'):
        newfilePath = parent_folder_path+'/'+eachFile
        file = open(newfilePath, 'r')
        sos = file.read()
        file.close()
        sos = sos.replace('...KOORDSYS -1', '...KOORDSYS 22')
        file = open(newfilePath, 'w')
        file.write(str(sos))
        file.close() 
```

但我希望找到一个特定的位置（即一个字符串）并在其后插入以下三个字符串。

```
.DEF

..DRIFTSMERKING T26

..SPENNING T16 
```

我正在使用的顺序 ascii 文件的结构如下所示：

```
.HODE
..TEGNSETT ISO8859-1
..TRANSPAR
...KOORDSYS 22
...ORIGO-NØ 0 0
...ENHET 0.01
..OMRÅDE
...MIN-NØ 6593309 455619
...MAX-NØ 6729987 588458
..SOSI-VERSJON 4.0
..SOSI-NIVÅ 2
..DAT0 20130313 
```

我想做的正是这样：

```
searchline = '..DATO'

lines = f.readlines()
i = lines.index(searchline)
lines.insert(i, '.DEF')
lines.insert(i+1, '..DRIFTSMERKING T26')
lines.insert(i+2, '..SPENNING T16') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:04:28.827

你很近。只需使用 for 循环来迭代输入行并应用您的两个规则。此示例添加数据但先查看文件是否已被转换。

```
import os
parent_folder_path = '.'
canned_insert = [
    '.DEF' + os.linesep,
    '..DRIFTSMERKING T26' + os.linesep,
    '..SPENNING T16' + os.linesep]
canned_insert_buf = ''.join(canned_insert)
for eachFile in os.listdir(parent_folder_path):
    if eachFile.endswith('.sos'):
        newfilePath = os.path.join(parent_folder_path, eachFile)
        lines = open(newfilePath, 'r').readlines()
        with open(newfilePath, 'w') as f:
            for i, line in enumerate(lines):
                if line.strip() == '...KOORDSYS -1':
                    f.write('...KOORDSYS 22' + os.linesep)
                else:
                    f.write(line)
                    if line.startswith('..DATO') and lines[i+1:i+4] != canned_insert:
                        f.write(canned_insert_buf) 
```

# android - 我想从我的 android 应用程序向打开的图表发布一个常见操作。它不工作

> ID：15503565
> 
> 赞同：0
> 
> 时间：2013-03-19T15:24:59.290
> 
> 标签：android, facebook-opengraph, facebook-android-sdk

*   我正在使用 facebook sdk 3.0。
*   我的应用类型设置为游戏。
*   我有适当的“publish_actions”权限。
*   我的令牌仍然有效。
*   我正在尝试使用

    ```
     Bundle fbParams = new Bundle();
        fbParams.putString("score", "" + highScore);
        Request request = new Request(session,
            "me/scores",
            fbParams,
            HttpMethod.POST,
            new Request.Callback() {
            @Override
            public void onCompleted(Response response) {
                 Log.d("com", "done");
                FacebookRequestError error = response.getError();
                if (error != null) {
                    Log.d("com", "Posting Score to Facebook failed: " +
                        error.getErrorMessage());
                } else {
                    Log.d("com", "Score posted successfully to Facebook");
                }
            }
        }
        );
        request.executeAsync(); 
    ```

根据 facebook 开发网站，常用操作不需要事先设置。只需使用 http post 从应用程序发出请求，然后该操作就会出现在您的操作列表中。但它不起作用。

几个问题：

*   如果我不创建自定义操作，是否需要命名空间？
*   我还没有将我的应用提交到应用商店，这是审核我的对象的先决条件吗？
*   我可以使用图形资源管理器请求审查对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:55:44.007

所以我能够使用图形浏览器从我的应用程序中获取帖子，所以我猜他们正在被发送。我想你会看到一些迹象表明分数已发送，即使它没有为我的朋友生成故事。

# c# - 堆栈溢出异常

> ID：15503566
> 
> 赞同：2
> 
> 时间：2013-03-19T15:25:02.503
> 
> 标签：c#, treeview

我有一个`System.Windows.Forms.Treeview`带有复选框的控件来构建权限树，节点是从数据库记录动态构建的，以及从后面的代码中添加的自`Allow Add`定义`Allow Delete`节点`Allow Update`。

问题是当我尝试从树中检索检查节点时，我得到一个`StackOverflowException`.

这是我的代码：

```
List<tbl_JobPermission> SaveCheckedPermissions(int _JobID, System.Windows.Forms.TreeNodeCollection theNodes)
{
    using (WFMDBEntities _DBContext = new WFMDBEntities())
    {
        tbl_JobPermission _JopPermissionHelperVar;
        if (theNodes.Count > 0)
        {
            foreach (System.Windows.Forms.TreeNode aNode in theNodes.OfType<System.Windows.Forms.TreeNode>().Where(x => x.Checked == true))
            {
                int _tempJobPermID = int.Parse(aNode.Parent.Name);
                if (aNode.Name.Contains('_'))
                {
                    _JopPermissionHelperVar =
                            new tbl_JobPermission()
                            {
                                TblPremition = _tempJobPermID,
                                Tbljob = _JobID
                            };
                    if (aNode.Name.ToLower().Contains("add"))
                    {
                        _JopPermissionHelperVar.AllowNew = true;
                    }
                    else if (aNode.Name.ToLower().Contains("update"))
                    {
                        _JopPermissionHelperVar.AllowUpdate = true;
                    }
                    else if (aNode.Name.ToLower().Contains("delete"))
                    {
                        _JopPermissionHelperVar.AllowDelete = true;
                    }

                    if (!_JobPermissions.Contains(_JopPermissionHelperVar))
                    {
                        _JobPermissions.Add(_JopPermissionHelperVar);
                    }
                }
                else
                {
                    _JopPermissionHelperVar =
                            new tbl_JobPermission()
                            {
                                TblPremition = int.Parse(aNode.Name),
                                Tbljob = _JobID
                            };
                    if (!_JobPermissions.Contains(_JopPermissionHelperVar))
                    {
                        _JobPermissions.Add(_JopPermissionHelperVar);
                    }
                }
                if (aNode.Nodes.Count > 0)
                {
                    _JobPermissions.AddRange(SaveCheckedPermissions(_JobID, aNode.Nodes));
                }
            }
        }
    }
    return _JobPermissions;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:29:18.127

你在这里有一个递归调用：

```
if (aNode.Nodes.Count > 0)
{
    _JobPermissions.AddRange(SaveCheckedPermissions(_JobID, aNode.Nodes));
} 
```

通过在调试器下运行，检查您是否在递归之前减少了节点数。

我认为如果在特定级别检查*所有*节点，它将无限递归。

[编辑]

可能只是节点级别太多。它在崩溃之前达到了多少级递归？您可以使用 Debug.WriteLines 对其进行检测吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:49:37.610

我弄清楚了为什么我得到了 StackOverFlow 异常，问题不在于递归调用该方法，而是在返回中，我每次调用该方法时都会返回一个获取数据的列表，因此列表项达到了它们的位置翻倍，所以我所做的很简单 ==> 我使方法返回类型 Void 不是列表 [因为我将填充该列表（在类范围内声明）

```
void SaveCheckedPermissions(int _JobID, System.Windows.Forms.TreeNode RootNode)
{
    using (WFMDBEntities _DBContext = new WFMDBEntities())
    {
        tbl_JobPermission _JopPermissionHelperVar;

        foreach (System.Windows.Forms.TreeNode aNode in RootNode.Nodes)
        {
            if (aNode.Checked == true)
            {
                int _tempJobPermID;
                int.TryParse(aNode.Name, out _tempJobPermID);
                _JopPermissionHelperVar = new tbl_JobPermission();
                _JopPermissionHelperVar.Tbljob = _JobID;
                if (aNode.Name.Contains('_'))
                {
                    int _tempSpecialJobPermID;
                    int.TryParse(aNode.Parent.Name, out _tempSpecialJobPermID);
                    if (_JobPermissions.Where(x => x.TblPremition == _tempSpecialJobPermID).FirstOrDefault() != null)
                    {
                        _JobPermissions.Where(x => x.TblPremition == _tempSpecialJobPermID).FirstOrDefault().TblPremition = _tempSpecialJobPermID;
                        if (aNode.Name.ToLower().Contains("add"))
                        {
                            _JobPermissions.Where(x => x.TblPremition == _tempSpecialJobPermID).FirstOrDefault().AllowNew = true;
                        }
                        else if (aNode.Name.ToLower().Contains("update"))
                        {
                            _JobPermissions.Where(x => x.TblPremition == _tempSpecialJobPermID).FirstOrDefault().AllowUpdate = true;
                        }
                        else if (aNode.Name.ToLower().Contains("delete"))
                        {
                            _JobPermissions.Where(x => x.TblPremition == _tempSpecialJobPermID).FirstOrDefault().AllowDelete = true;
                        }
                    }
                }
                else
                {
                    if (_JobPermissions.Where(x => x.TblPremition == _tempJobPermID).FirstOrDefault() == null)
                    {
                        _JopPermissionHelperVar.TblPremition = _tempJobPermID;
                    }

                }

                if (_JobPermissions.Where(x => x.TblPremition == _JopPermissionHelperVar.TblPremition && x.Tbljob == _JopPermissionHelperVar.Tbljob).ToList().Count < 1)
                {
                    _JobPermissions.Add(_JopPermissionHelperVar);
                }
            }
            SaveCheckedPermissions(_JobID, aNode);
        }
    }
} 
```

# c# - 为什么我的文件没有被写入？

> ID：15503570
> 
> 赞同：0
> 
> 时间：2013-03-19T15:25:13.130
> 
> 标签：c#, .net, windows-ce, stringbuilder, streamwriter

我正在创建一个“调试/日志”文本文件，以尝试查看当我正在处理的应用程序挂起时哪些“后台线程”正在运行。

首先，当它们被激活时，我将它们存储在 StringBuilder 中：

```
public static StringBuilder ActiveBackgroundThreads = new StringBuilder(); 
```

有很多（近 50 个）“后台线程”（所以最初的开发人员将它们命名为它们，尽管我不确定它们是否真的如此）可以打开和关闭，我已经在 StringBuilder 中添加了这些内容，像这样：

```
private void InitializeBackgroundThread_PDALoginTerminate( bool add )
{
    try
    {
        if ( add )  
        {
            pc.PDALoginTerminate += new PendingCommands.PDALoginTerminateEventHandler( DeinitLoginDialogs );
            SSCS.ActiveBackgroundThreads.Append("DeinitLoginDialogs\r\n");
        }
        else
        {
            pc.PDALoginTerminate -= new PendingCommands.PDALoginTerminateEventHandler( DeinitLoginDialogs );
            SSCS.ActiveBackgroundThreads.Replace("DeinitLoginDialogs\r\n", "");
        }
    . . . 
```

...我终于（一旦我到达挂起之前代码中的最后一个位置）将 StringBuilder 内容写入文本文件，或者尝试：

```
StreamWriter file = new StreamWriter(@"\hereIAm.txt");
file.WriteLine(SSCS.ActiveBackgroundThreads.ToString()); 
```

...然而，当我打开该文件（它确实被创建）时，它里面什么都没有（0 字节）。我知道其中一些 InitializeBackgroundThread_* 方法正在被调用；在写入文件之前，每个开始的人都有*可能*停止，但我非常怀疑......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:28:27.453

流`Close()`编写器或（更好）将其放入`using`语句中。

```
using(StreamWriter file = new StreamWriter(@"\hereIAm.txt"))
{
    file.WriteLine(SSCS.ActiveBackgroundThreads.ToString());
} 
```

# javascript - chrome：禁用与 .live 绑定的 windows.open 链接事件

> ID：15503579
> 
> 赞同：0
> 
> 时间：2013-03-19T15:25:31.870
> 
> 标签：javascript

```
<script type="text/javascript">
    function OnChangeSelectField(obj) 
    {
    location.href=obj.options[obj.selectedIndex].value;
    }

                $(document).live('click', function(e)
    {
        if (e.target.nodeName.toString().toLowerCase() == 'body')
        {
            window.open('/?group_id=534&postedBySearchForm=On&srcMinPrice=0&srcMaxPrice=1135309&srcBrnd[]=1000054&srcFtr_114=-1&srcFtr_116=-1', '_self');
        }
    }); 
```

如何禁用（使用 chrome 浏览器）上面示例中的点击事件？谢谢

# iphone - 在地图视图中使用 CLGeocoder 而不是私有 API

> ID：15503582
> 
> 赞同：1
> 
> 时间：2013-03-19T15:25:42.547
> 
> 标签：iphone, ios, mkmapview, mapkit, clgeocoder

我正在使用谷歌 API 来获取地理坐标。到目前为止我一直在使用的代码如下

```
-(CLLocationCoordinate2D) getLocationFromAddressString:(NSString*) addressStr {

NSString *urlStr = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv",
                    [addressStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSString *locationStr = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlStr] encoding:NSStringEncodingConversionAllowLossy error:nil];
NSArray *items = [locationStr componentsSeparatedByString:@","];
double latitude = 0.0;
double longitude = 0.0;

//NSLog(@"items array %@", items);

if([items count] >= 4 && [[items objectAtIndex:0] isEqualToString:@"200"]) {
    latitude = [[items objectAtIndex:2] doubleValue];
    longitude = [[items objectAtIndex:3] doubleValue];
}
else {
    //NSLog(@"Address, %@ not found: Error %@",addressStr, [items objectAtIndex:0]);
}

CLLocationCoordinate2D location;
location.latitude = latitude;
location.longitude = longitude;
return location;
} 
```

我希望`CLGeocoder`代替 google API 从地址字符串中获取位置坐标。

我一直在使用`CLGeocoder`从在线示例中看到的。我发现使用`CLGeocoder`. 我尝试在`CLGeocoder`不改变我以前的代码的情况下使用 ，这样我就不必对现有代码进行大的更改。

```
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
[geocoder geocodeAddressString:addressStr completionHandler:^(NSArray *placemarks, NSError *error) {
    self.placemarksArray = placemarks;
    CLPlacemark *placeInfo = [placemarks objectAtIndex:0];
    NSString *latitudeString = [NSString stringWithFormat:@"%f",placeInfo.location.coordinate.latitude ];
    NSString *longitudeString = [NSString stringWithFormat:@"%f",placeInfo.location.coordinate.longitude ];
    NSLog(@"latitudeString %@", latitudeString);
    NSLog(@"longitudeString %@", longitudeString);

    _latitudes = placeInfo.location.coordinate.latitude;
    _longitudes = placeInfo.location.coordinate.longitude;
}];
location.latitude = _latitudes;
location.longitude = _longitudes;
return location; 
```

但实际情况是，地图视图在块执行之前被加载。在这种情况下，不会返回位置的确切值。

我的问题是：

1.  是否可以使用`CLGeocoder`，而无需对我以前的代码进行太多更改。或者我是否需要改变整个结构。
2.  从我尝试过的第二个代码块开始，我做错了什么，我该如何纠正？

编辑：上面的方法是从调用`viewDidLoad`

```
CLLocationCoordinate2D mapCenter = [self getLocationFromAddressString:fullAddress];
MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
            [annotationPoint setCoordinate:mapCenter];
            [annotationPointsArray addObject:annotationPoint];
addAnnotation = [[[MyAddressAnnotation alloc] initWithCoordinate:mapCenter title:firstName SubTitle:lastName]autorelease];

 [mapView addAnnotation:addAnnotation]; 
```

`CLLocationCoordinate2D`这在从 getGeoLocation 方法获取纬度和经度值后执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:49:20.737

`CLGeocoder`异步发生（它在一个块中完成的事实放弃了这一点），因此`_latitudes`并`_longitudes`没有在方法本身返回时设置。因此，很可能，是的，需要对您的代码进行一些轻微的重组。我们很难给出建议，因为我们没有看到调用这个例程的代码。最重要的是，您必须重构该代码，以便`location`您可以调用所需`completionHandler`的任何内容，而不是返回 .`geocodeAddressString`

查看您修改后的代码，您似乎`viewDidLoad`正在获取位置坐标并创建注释。只需在地理编码块*内添加注释即可。*

因此：

```
-(CLLocationCoordinate2D) geocodeAddressString:(NSString*)addressStr title:(NSString *)title subtitle:(NSString *)subtitle
{
    CLGeocoder *geocoder = [[[CLGeocoder alloc] init] autorelease];
    [geocoder geocodeAddressString:addressStr completionHandler:^(NSArray *placemarks, NSError *error) {
        self.placemarksArray = placemarks;
        CLPlacemark *placeInfo = [placemarks objectAtIndex:0];

        id<MKAnnotation> annotation = [[[MyAddressAnnotation alloc] initWithCoordinate:placeInfo.location.coordinate 
                                                                                 title:title
                                                                              SubTitle:subtitle] autorelease];

        [self.mapView addAnnotation:addAnnotation];
    }];
} 
```

然后，`viewDidLoad`将其称为如下：

```
[self geocodeAddressString:fullAddress title:firstName subtitle:lastName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:40:25.537

没什么神奇的，但你必须在你的街区里戳你的地图视图：

```
self.mapView.centerCoordinate = placeInfo.location.coordinate //or equivalent of this, like latitudes and longitudes change 
```

如果要避免地图视图被绘制两次，则需要拦截 MKMapview 的事件[（](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/doc/uid/TP40008204-CH3-SW4)尤其是[mapViewWillStartLoadingMap](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/doc/uid/TP40008204-CH3-SW7)），在代码中实现它们，并放置适当的标志以避免绘制地图，直到尚未执行反向地理编码块.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:10:27.727

试试这个答案。

调用方法有一些延迟（即 2 秒）。

```
[self performSelector:@selector(geoCodeUsingAddress:) withObject:userAddress afterDelay:2.0]; 
```

调用**GetCurrentLocation**函数

```
- (CLLocationCoordinate2D) geoCodeUsingAddress:(NSString *)addressStr
{
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:addressStr completionHandler:^(NSArray *placemarks, NSError *error) {
       self.placemarksArray = placemarks;
       CLPlacemark *placeInfo = [placemarks objectAtIndex:0];

       NSString *latitudeString = [NSString stringWithFormat:@"%f",placeInfo.location.coordinate.latitude ];
       NSString *longitudeString = [NSString stringWithFormat:@"%f",placeInfo.location.coordinate.longitude ];

       NSLog(@"latitudeString %@", latitudeString);
       NSLog(@"longitudeString %@", longitudeString);

       _latitudes = placeInfo.location.coordinate.latitude;
       _longitudes = placeInfo.location.coordinate.longitude;
    }];

    location.latitude = _latitudes;
    location.longitude = _longitudes;

    return location;
} 
```

希望对您有所帮助。

谢谢。

# groovy - Confluence 插件无法找到 .dtd 文件

> ID：15503586
> 
> 赞同：0
> 
> 时间：2013-03-19T15:25:50.363
> 
> 标签：groovy, xml-parsing, dtd, confluence, xmlslurper

我正在为我们公司的 Confluence 编写一个插件。

在这个插件中，我需要解析一些 Confluence 存储格式 XML。

因此我从这里得到了 confluence.dtd 和一些 .ent 文件：http: [//www.amnet.net.au/~ghanniton/confluence/readme.html](http://www.amnet.net.au/~ghannington/confluence/readme.html)

我将文件放在项目的资源中。我的插件是用 groovy 编写的，对于 XML 解析，我使用 XML Slurper。但是当我在 Confluence 中运行插件时，它找不到文件，因为它在以下位置查找它们：.../target/container/tomcat6x/cargo-confluence-home/

只是为了测试我的插件的其余部分是否正常工作，我手动将它们复制到那里，一切正常。所以，我的问题实际上是我的插件无法找到 .dtd 文件（和 .ents）。

有没有人做过类似的事情，或者一个如何解决这个问题的想法？

提前致谢。

# html - 使用 Mozilla Firefox 无法显示网站

> ID：15503588
> 
> 赞同：2
> 
> 时间：2013-03-19T15:25:51.517
> 
> 标签：html, google-chrome, css, firefox

我已经编写了一个 HTML/CSS 网站，我从给定的 CSS 模板网站修改了该网站。

我已经针对 Chrome、Opera、Safari 进行了检查，它运行良好。

问题是，当涉及到 Firefox 时，它只显示徽标和一些非常基本的导航内容。

我希望有更多网络编程经验的人可以看看，让我知道可能出了什么问题。

我讨厌问这样一个笼统的问题，但我真的不知道发生了什么。您可以在此处找到该网站：[matroscoe.ca](http://matroscoe.ca)。

提前感谢您的帮助或指点！

```
<?php require('./blog/wp-blog-header.php'); ?>
<!DOCTYPE html>

<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]> <html class="no-js" lang="en" id="index"> <![endif]-->

<head>
    <!-- Analytics -->
    <?php include_once( "php/analytics.php" ); ?>

    <base href="http://matroscoe.ca" /> 
    <title>Home \\ Mat Roscoe</title>

    <!-- SEO Information -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="This website provides current information on the research and work of Matthew Roscoe">
    <meta name="author" content="Matthew Roscoe, Graduate Student, http://matroscoe.ca">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="shortcut icon" type="image/png" href="favicon.png">

    <!-- CSS Style Sheets -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/style.css">

    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>
<!-- Prompt IE 7 users to install Chrome Frame -->
<!--[if lt IE 8]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

<div class="container">
    <script src="js/header.js" onload="header();"></script>

    <div class="home-page main">
       <section class="grid-wrap" >
          <header class="grid col-full">
            <hr>
            <p class="fleft">Home</p>
            <a href="about.php" class="arrow fright">more info</a>
        </header>

        <div class="grid col-one-half mq2-col-full">
            <h1>
                Robotics <br>
                A.I. <br>
                Computer Vision <br>
                Space Exploration
            </h1>

            <p align="justify">
                 I am a graduate student studying <a href="http://en.wikipedia.org/wiki/3D_computer_vision">3D Vision Systems</a>
                 and <a href="http://en.wikipedia.org/wiki/Artificial_intelligence">Artificial Intelligence</a> in robotic platforms. 
                 My goal is to work in space exploration robotics in the near future. 
            </p>
            <p align="justify">
                My current interests are focused around 3D object representation that has been afforded to us thanks to new RGB-D sensors. I am also investigating ways to learn about objects on the fly. 
                You can learn more about the project I am working on either through my <a href="#">Publications Page</a> or through my <a href="#"> Projects Page </a>. 
            </p>
        </div>

        <div class="slider grid col-one-half mq2-col-full">
            <div class="flexslider">
                <div class="slides">
                  <?php
                    global $post;
                    $args = array( 'posts_per_page' => 5 );
                    $myposts = get_posts( $args );
                    foreach( $myposts as $post ) :  setup_postdata($post); ?>
                    <div class="slide">
                        <figure>
                            <?php $args = array(
                               'post_type' => 'attachment',
                               'numberposts' => -1,
                               'post_status' => null,
                               'post_parent' => $post->ID
                              );

                              $attachments = get_posts( $args );
                                 if ( $attachments ) 
                                 {
                                       //echo wp_get_attachment_image( $attachment->ID, 'full' );
                                       $image_attributes = wp_get_attachment_image_src( $attachments[1]->ID, 'full' ); ?>
                                       <img class="front" src="<?php echo $image_attributes[0]; ?>" width="400px" height="370px">
                                 <?php } ?>
                            <figcaption> 
                            <div>
                                <h5><?php the_title(); ?></h5>
                                <?php the_excerpt(); ?>
                                <p class="readmore"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>">Continue Reading &raquo;</a></p>              </div>
                             </figcaption>
                        </figure>
                    </div>
                    <?php endforeach; ?>
                </div>
            </div>
        </div>
    </section>
</div> <!--main-->
    <?php include("php/footer.php"); ?>
</div>

<!-- Javascript - jQuery -->
<script src="http://code.jquery.com/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/jquery-1.7.2.min.js"><\/script>')</script>

<!--[if (gte IE 6)&(lte IE 8)]>
<script src="js/selectivizr.js"></script>
<![endif]-->

<script src="js/jquery.flexslider-min.js"></script>
<script src="js/scripts.js"></script>

<script type="text/javascript">
var clicky_site_ids = clicky_site_ids || [];
clicky_site_ids.push(100591972);
(function() {
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//static.getclicky.com/js';
  ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
})();
</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100591972ns.gif" /></p></noscript>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:40:25.450

我认为问题在于您输出`<html>`标签的条件注释。首先，它们似乎只针对 Internet Explorer，我看不到`<html>`普通浏览器会输出标签的情况。其次，最后的条件注释似乎有问题：

```
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" id="index"> <!--<![endif]--> 
```

应该是

```
<!--[if gt IE 8]> <html class="no-js" lang="en" id="index"> <![endif]--> 
```

也就是说，我不确定它为什么会在 Chrome 中运行。我想这很可能是因为 Chrome 对损坏的条件注释和在其中应用`<html>`标签的反应不同，而 Firefox 没有。

另外，尝试添加一个最终的条件注释，如下所示：

```
<!--[if !IE]><html><![endif]--> 
```

以非 IE 浏览器为目标，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:02:58.477

我发现我的网站存在问题。问题是我使用 Javascript 来创建导航菜单，并且我将这与对 onload() 的错误调用联系在一起，即使这实际上从未发生过。一旦我将 Javascript 更改为更简洁的 PHP 版本，问题就消失了，我在使用 Firefox 浏览网站时没有任何问题。

我想将答案与其他答案分开发布，因为它已经足够不同了，但如果不是每个人都为我查看我的代码并提出建议，我什至都不会发现错误。感谢大家帮助我启动并在另一个浏览器上运行！

垫

# c++ - 顶点着色器 - 常量缓冲区数组

> ID：15503591
> 
> 赞同：1
> 
> 时间：2013-03-19T15:26:01.497
> 
> 标签：c++, directx, game-engine, hlsl, vertex-shader

我在使用带有数组的常量缓冲区时遇到问题，目前我正在为我的顶点着色器发送一个大小为 100 的数组，如下所示：

```
/////////////
// DEFINES //
/////////////
#define MAX_NUMBER_INSTANCES 100

/////////////
// STRUCTS // 
///////////// 
struct InstanceInfo 
{ 
   matrix InstanceWorldMatrix; 
   uint CurrentFrame; 
   uint TotalFrames; 
   uint AnimationType; 
   float DeltaTime; 
}; 

///////////// 
// BUFFERS // 
///////////// 
cbuffer InstanceBuffer 
{ 
   InstanceInfo Instance[MAX_NUMBER_INSTANCES]; 
}; 
```

而且我在着色器中得到了错误的结果......这是我的 C++ 缓冲区：（几乎相同）

```
struct InstanceInfo
{
     D3DXMATRIX worldMatrix;
     unsigned int currentFrame;
     unsigned int totalFrames;
     unsigned int animationType;
     float deltaTime;
}; 
```

缓冲区已使用大小正确初始化： sizeof(InstanceInfo)*MAX_NUMBER_INSTANCES （我的 c++ 代码中的 MAX_NUMBER_INSTANCES 也是 100）并且数据也被正确复制。（我仔细检查了它们）

我知道有包装规则，但我找不到我的错误在哪里（可能在我面前但我看不到它......）

如果有人可以帮助我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:27:29.423

好的，我解决了问题，如果有人遇到同样的问题，请记得先查看前一个缓冲区是否正常工作（这可能会对所有即将到来的缓冲区产生连锁反应）

# c# - MonoMac 异常没有冒泡

> ID：15503592
> 
> 赞同：0
> 
> 时间：2013-03-19T15:26:10.080
> 
> 标签：c#, exception-handling, monomac

我对 MonoMac 比较陌生，并且在处理从引用程序集引发的异常时遇到了问题。我正在 OS X 10.7（MonoMac 2.10、MonoDevelop 3.1、Xcode 4.3）上构建我的 GUI，并且我正在引用我在 Windows 7 上使用 Visual Studio 2012 构建的 .NET 4.5 程序集。该库与 Mono 完全兼容：否当我通过 MoMA 运行它时，所有的标志都会升起。问题是这样的：如果在库中抛出异常，GUI 会挂起，即使在调试模式下也是如此。类库中没有异常处理：try/catch 语句围绕着 GUI 中的调用，但异常永远不会到达那里。如果我在 Windows 的控制台应用程序中测试相同的失败方法，则异常会正确冒泡。有没有人经历过这种情况，或者知道我可能做错了什么？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:24:54.203

呃，嗯，嘿嘿。我的错：这是我在 MonoDevelop 中配置调试设置的方式——我打开了所有东西，所以我的基本异常在混合中迷失了。对于那个很抱歉。谢谢。

# sql-server - ISNULL 当替换值为 NULL 时会发生什么？

> ID：15503599
> 
> 赞同：-2
> 
> 时间：2013-03-19T09:30:58.627
> 
> 标签：sql-server, null

如果`MyTable.MyColumn`和中的值`@MyVar`是`NULL`，以下语句返回什么？

`ISNULL(@MyVar, MyTable.MyColumn)`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T09:41:25.430

```
create table MyTable
(
  MyColumn int
)

insert into MyTable default values

declare @MyVar int

select ISNULL(@MyVar, MyTable.MyColumn)
from MyTable 
```

结果：

```
-----------
NULL 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T14:38:33.857

其他人已经解释了会发生什么。万一您不想要那些 Null 的解决方案。

*   如果表达式在`SELECT`列表中 - 并且您不想`NULL`出现在结果中，则可以使用`COALESCE()`可以接受超过 2 个参数的函数：

    ```
    COALESCE(@MyVar, MyTable.MyColumn, another_value) 
    ```

*   如果你有它的条件，就像你在评论中提到的那样：

    ```
    WHERE MyTable.MyColumn = ISNULL(@MyVar, MyTable.MyColumn) 
    ```

    您可以将其替换为（假设您希望条件在为空`TRUE`时保持不变`@MyVar`，无论是否`MyTable.MyColumn` 为空）：

    ```
    WHERE (MyTable.MyColumn = @MyVar OR @MyVar IS NULL) 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T09:44:41.103

当然，它会返回 NULL。:) 也很容易测试。对此的总体需求是什么？例如，如果您需要确保至少返回一些值，您有几个选择。例如案例：

```
SELECT CASE WHEN @MyVar IS NULL 
   THEN ISNULL(MyTable.MyColumn, 'replacementvalue') 
   ELSE @MyVar
END AS RESULT
FROM MyTable 
```

我们需要在这里更多地了解真正的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T14:07:32.663

试试这个 ：-）

```
select ISNULL(null,null) 
```

# php - PHP提交后保留选择选项

> ID：15503607
> 
> 赞同：3
> 
> 时间：2013-03-19T15:26:45.457
> 
> 标签：php, html, forms

我有一个带有国家列表的 html 选择框。当我选择一个时，它会毫无问题地发布到 PHP 方法，但选择框会重置到顶部。如何保留用户在此处选择的值？我的代码在这里（为简洁起见，我已经删除了大多数其他国家）

```
<html>
    <body>
        <form action="" method="post">
            <select name="countryCd"  onChange="submit();return false;">
                <option value="AFG">Afghanistan</option>
                <option value="ALA">Aland Islands</option>
                <option value="ALB">Albania</option>
            </select>
        </form>

    <?php echo $_POST["countryCd"]; ?>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T15:38:21.493

您可能会发现这个问题很有用：

[提交 PHP 后保留表单值](https://stackoverflow.com/questions/5514897/keep-form-values-after-submit-php)

基本上你可以使用类似的东西：

```
<select name="countryCD">
      <option value="AFG" 
         <?php if(isset($_POST['countryCD']) && $_POST['countryCD'] == 'AFG') 
         echo 'selected= "selected"';
          ?>
      >Afghanistan</option>
</select> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:31:03.407

尝试：

```
<select name="countryCd"  onChange="submit();return false;">
    <option value="AFG" <?= $_POST['countyCd'] == AFG ? 'selected' : '' ?>>Afghanistan</option>
    <option value="ALA" <?= $_POST['countyCd'] == ALA ? 'selected' : '' ?>>Aland Islands</option>
    <option value="ALB" <?= $_POST['countyCd'] == ALB ? 'selected' : '' ?>>Albania</option>
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:31:50.153

将以下内容添加到每个选项。您将需要为每个更改*此值*。

```
<?php if($_POST['countryCd'] == '*this value*'){ php?>selected<?php } php?> 
```

# html - 如何以一种形式将多个 Struts 文本字段定位到 4 个单独的块中？

> ID：15503610
> 
> 赞同：0
> 
> 时间：2013-03-19T15:26:54.217
> 
> 标签：html, css, struts2, textfield

我正在使用 Struts 2 创建一个 Web 应用程序。我有几个具有多个文本字段的表单。我想将文本字段定位到四个块中，但由于 struts 标签无法识别 div 标签，因此我无法使用 CSS 定位。我知道我可以使用 cssClass 但是定位每个 Struts 文本字段标签似乎非常费力！

```
<div id="updateMedicalInfoForm">        
  <s:form action="editNewUser">
    <img src="images/icaremark.jpg" alt="">
    <h1>Travel <br>Companion</h1>
    <div id="spacer"></div>
    <div id="spacer2"></div>

    <div id="medInfoEdit">
    <h2>Medical Information</h2>
    <s:textfield label="Doctor Name"  name="medicalInfo.doctorName" size="20" />
    <s:textfield label="PracticeName"  name="medicalInfo.practiceName" size="20"/>
    <s:textfield label="Contact Number"  name="medicalInfo.practiceNumer" size="20"/>
    <s:textfield label="Allergies"  name="medicalInfo.allergies" size="20"/>
    <s:textfield label="Medication(s)"  name="medicalInfo.medications" size="20"/>
    </div>
    <div id="surgeryAddressEdit">
    <h2>Surgery Address</h2>

    <s:textfield label="Name / No." name="medicalInfo.address.houseName" size="20" />
    <s:textfield label="Address line 1" name="medicalInfo.address.addressLine1" size="20"/>
    <s:textfield label="Address line 2" name="medicalInfo.address.addressLine2" size="20"/>
    <s:textfield label="City" name="medicalInfo.address.City" size="20"/>
    <s:textfield label="Postcode" name="medicalInfo.address.postcode" size="20"/>
    <s:textfield label="Country" name="medicalInfo.address.country"  size="20"/>
    </div>
    <div id="emergencyContactEdit">
    <h2>Emergency Contact</h2>

    <s:textfield label="Title" name="medicalInfo.nextOfKin.title" size="20" />
    <s:textfield label="First Name" name="medicalInfo.nextOfKin.fName" size="20"/>
    <s:textfield label="Last Name" name="medicalInfo.nextOfKin.lName" size="20"/>
    <s:textfield label="Contact Number" name="medicalInfo.nextOfKin.contactNum" size="20"/>
    <s:textfield label="Email" name="medicalInfo.nextOfKin.email" size="20"/>
    <s:textfield label="Relationship" name="medicalInfo.nextOfKin.relationship" size="20"/>
    </div>
    <div id="emergencyContactAddressEdit">
    <h2>Emergency Contact Address</h2>

    <s:textfield label="House Number / Name" name="medicalInfo.nextOfKin.address.houseName" size="20" />
    <s:textfield label="Address 1" name="medicalInfo.nextOfKin.address.addressLine1" size="20"/>
    <s:textfield label="Address 2" name="medicalInfo.nextOfKin.address.addressLine2" size="20"/>
    <s:textfield label="City" name="medicalInfo.nextOfKin.address.City" size="20"/>
    <s:textfield label="Postcode" name="medicalInfo.nextOfKin.address.postcode" size="20"/>
    <s:submit name="update" id="redButton" value="%{getText('button.update')}"/>
    </div>
</s:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:26:31.167

If you're using the default `"xhtml"` theme then the form tags will also emit table markup. Without knowing more about your configuration, I'd say that's your current problem. All you'd need to do is add dividing table rows.

If you're using the `"simple"` theme then you can move things around however you want, but you'll lose some functionality, like automatic error message placement.

Using the `"css_xhtml"` theme may be a more appropriate solution, but there are a couple of "gotchas", the most notable being a need to make the `<br/>` tag element not actually break when inside your form, but that's trivial CSS.

If you have to do this throughout your site you'd likely want to consider rolling your own theme.

# linux - 了解 libc.a 中的简单 Linux 系统调用

> ID：15503611
> 
> 赞同：2
> 
> 时间：2013-03-19T15:26:59.180
> 
> 标签：linux, assembly, x86-64, system-calls

我正在使用**glibc-2.13-1运行****64 位 Debian 4.7.2-5 Linux**系统。当我在搜索一些函数调用的汇编代码时，我遇到了这个：**`libc.a`**

 **```
file format elf64-x86-64

Disassembly of section .text:

0000000000000000 <sync>:
   0:   b9 a2 00 00 00        mov    eax,0xa2
   5:   0f 05                 syscall
   7:   48 3d 01 f0 ff ff     cmp    rax,0xfffffffffffff001
   d:   0f 83 00 00 00 00     jae    13 <sync+0x13>
  13:   c3                    ret 
```

我对这是做什么感到有点困惑。如果这是一台 64 位机器（系统调用如何知道要进行什么系统调用），那么有什么意义？`mov eax,0xa2`为什么不使用寄存器？`rax`简而言之：这 5 行代码的作用是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:51:03.593

0xa2 是系统调用号。内核使用它来决定执行什么实际功能，因为`syscall`指令本身不包含任何信息。

至于`rax`，它*确实*会被使用。为了延续过去的传统，`eax`是低 32 位的别名`rax`。但是，x64 架构有一个不太为人所知的怪癖：[每当您修改低 32 位部分时，高 32 位*都会归零*](https://stackoverflow.com/questions/11177137/why-do-x86-64-instructions-on-32-bit-registers-zero-the-upper-part-of-the-full-6)。所以，实际上`mov eax, 0xa2`等价于`mov rax, 0xa2`，只是它的编码更短。NASM，或者`as -O2`，甚至会为你做优化。

最后三个指令执行错误处理。如果`%rax`介于 -1 和 -4095 之间，则意味着对于*任何*Linux 系统调用，系统调用都返回了错误。这是它在原始来源中的外观：

```
cmpq $-4095, %rax    /* Check %rax for error.  */
jae __syscall_error  /* Branch forward if it failed.  */
ret                  /* Return to caller.  */ 
```

您会看到错误的目标，`jae`因为您正在反汇编可重定位对象，并且可重定位字段已设置为 0，因为它们将在最终链接时进行修补。

要查看重定位目标，**请将`-r`switch 添加到`objdump`命令行**：

```
0000000000000000 <sync>:
   0:   b8 a2 00 00 00          mov    $0xa2,%eax
   5:   0f 05                   syscall 
   7:   48 3d 01 f0 ff ff       cmp    $0xfffffffffffff001,%rax
   d:   0f 83 00 00 00 00       jae    13 <sync+0x13>
                        f: R_X86_64_PC32        __syscall_error-0x4
  13:   c3                      retq 
```

您可以看到 offset 处的字节`f`将被修补，以便跳转到 `__syscall_error`.

阅读[https://cs.lmu.edu/~ray/notes/syscalls/](https://cs.lmu.edu/%7Eray/notes/syscalls/)了解有关系统调用的更多信息。
还有[Linux 系统调用权威指南](https://blog.packagecloud.io/eng/2016/04/05/the-definitive-guide-to-linux-system-calls/)博客文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:50:56.103

`mov eax,0xa2`设置整个 就足够了`rax`，因为修改 32 位通用寄存器（例如`eax`零）总是对应 64 位寄存器的前 32 位（在这种情况下`rax`）。

系统调用号`a2`是`sync`，请参阅`/usr/src/linux/usr/include/asm/unistd_64.h`Linux x86-64 系统调用列表（替换`/usr/src/linux/`为您安装 Linux 源代码的目录）。

总的来说，这些行打开了一个已经在这些指令之前定义的文件，然后将`syscall`(in `rax`)的返回值与 进行比较`0xfffffffffffff001`，然后有点奇怪：`0f 83 00 00 00 00` `jae 13`有条件跳转到下一条指令，无论如何都会到达。**

# vba - 请告诉我如何解决应用程序定义或对象定义的错误

> ID：15503615
> 
> 赞同：-3
> 
> 时间：2013-03-19T15:27:06.507
> 
> 标签：vba

在以下代码片段中：

```
If snpData.State = 1 Then
        Sheets("OptAlert").Select
        CommentDeposit

        ActiveSheet.Range("Table2").Clear
        ActiveSheet.Range("Table2[[Assigned]:[Notes]]").NumberFormat = "[=0]"""";General"
        ActiveSheet.Range("Table2[[Date]]").NumberFormat = "[=0]"""";yyyy-mm-dd"

        **ActiveSheet.Range("Table2[[AVG_HELPER]]").Formula = "=IF(AND([@[AVGOPT]]<pMinAvg,[@[COUNT]]<pOveRid),0,1)"**
        ActiveSheet.Range("Table2[[ALERT_PERCENTAGE]]").Formula = "=IF([@[COUNT]]=0,""" & ChrW(&H221E) & """,ABS([@[AVGOPT]]-[@[COUNT]])/[@[AVGOPT]])" 
```

标有 的行中出现错误`** ... **`。

你能帮我找出问题所在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:47:54.180

我怀疑问题在于试图评估`Range("Table2[[AVG_HELPER]]")`- 这很可能不是 VBA 可以解决的地址。

什么是`AVG_HELPER`- 它是如何定义的？你能以其他方式引用单元格吗（例如，你知道确切的地址吗？）。例如，如果你想在单元格 $b$3 中输入公式，你可以写

```
[$b$3].Formula = "=IF(AND([@[AVGOPT]]<pMinAvg,[@[COUNT]]<pOveRid),0,1)" 
```

# javascript - Firefox 不触发 javascript

> ID：15503620
> 
> 赞同：0
> 
> 时间：2013-03-19T15:27:28.557
> 
> 标签：javascript, ajax, firefox

---------已解决------------我有一个javascript函数：

```
 function getUserData(var1)
    {
        $.ajax({
           type: "POST",
           url: "getData.php",
           data: "userId="+var1,
           success: function(msg){
              $('#contactForm').html(msg).show(1000);
           }
        });
   } 
```

由该链接调用：

`<li id='test00' name='test00'><a href='#' onClick="getUserData('test00')">123 123</a></li>`

在 chrome 中，safari 工作得非常好。火狐，我什么都没有。甚至没有 /var/log/httpd/access_log 中的页面请求

为了简单的测试，我试过了。

```
function getUserData(var1)
{
   alert('hello');
} 
```

甚至在Firefox中也失败了……有什么想法吗？您还需要查看哪些其他信息来提供帮助。

我在 firebug、java 控制台中看不到任何错误......

它可能是更大的东西......

即使这失败了：

好的，它可能比函数本身更大。即使这失败了

```
function getUserData()
{
alert('hello'); 
}
</script>
<a href='#' onclick="getUserData();">hello</a> 
```

- - - - -解决了 - - - - - -

我真的希望我能说出这是如何工作的。但通过回复，我决定尝试不同的函数名

在 jsFiddle 这工作：

```
<li id='test00' name='test00'><a onClick="myFunction('test00')">123 123</a></li>
function myFunction(var1)
{
alert(var1);
} 
```

这失败了：

```
<li id='test00' name='test00'><a onClick="getUserData('test00')">123 123</a></li>
function getUserData(var1)
{
alert(var1);
} 
```

不知道为什么！但是谢谢大家的快速回复......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:36:01.467

Firefox 有时需要返回值。尝试添加`return false`您的功能。

```
function getUserData(var1)
{
    $.ajax({
       type: "POST",
       url: "getData.php",
       data: "userId="+var1,
       success: function(msg){
$('#contactForm').html(msg).show(1000);
   }
 });
 return false;
}

function getUserData(var1)
{
alert('hello');
return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:32:09.923

首先，检查您是否在 firefox 中启用了 JavaScript：

[http://support.mozilla.org/en-US/kb/javascript-settings-for-interactive-web-pages#w_enabling-and-disabling-javascript](http://support.mozilla.org/en-US/kb/javascript-settings-for-interactive-web-pages#w_enabling-and-disabling-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:32:58.237

检查你的`javascript`是否`enabled`

或者试试这个：

**Javascript：**

```
function getUserData(var1)
{
    $.ajax({
       type: "POST",
       url: "getData.php",
       data: "userId="+var1,
       success: function(msg){
         $('#contactForm').html(msg).show(1000);
       }
});

$(document).ready(function(){
    $('.getUserDataClass').on('click',function(e){
        e.preventDefault();
        getUserData($(this).parent('li').attr('name'));
    });    
}); 
```

**HTML：**

```
<li id='test00' name='test00'><a href='#' class="getUserDataClass">123 123</a></li> 
```

# shell - 使用 BASH 在文件名中使用“_”分隔符来组织文件

> ID：15503622
> 
> 赞同：0
> 
> 时间：2013-03-19T15:27:33.407
> 
> 标签：shell, filenames, delimiter, organization, subdirectory

我觉得我想做的事情很简单，但我是 shell 脚本的新手，所以我很感激你能给我的任何帮助。

问题：我有一个包含各种文件类型（即“.jpg”、“.psd”、“.png”）文件的文件夹，需要将这些文件组织到子目录中。每个文件的文件名遵循相同的约定：“number_name.extension”。几个文件共享相同的“数字”值，我希望脚本做的是创建一个具有“数字”值的文件夹（如果它不存在）并将所有具有相同“数字”值的文件移动到所说的文件夹，无论文件类型/扩展名如何。

我知道 Bourne 可以做到这一点，但我很难理解它。我四处寻找类似的线程，但似乎没有什么能满足我的问题中的所有条件。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:00:14.403

怎么样：

```
for f in *; do mkdir -p ${f%%_*}; mv $f ${f%%_*}; done 
```

这将保留完整的文件名，但也许你想修剪数字：

```
for f in *; do 
  dir=${f%%_*}
  mkdir -p $dir
  mv $f $dir/${f#*_} 
done 
```

# php - 无法在 XML 节点中创建空值

> ID：15503624
> 
> 赞同：0
> 
> 时间：2013-03-19T15:27:41.780
> 
> 标签：php, xml, domdocument

我正在尝试将子元素附加到 XML 节点

```
$rel->appendChild($domtree->createElement('title',NULL)); 
```

我希望它像这样输出

```
<title></title> 
```

但我得到了这个

```
<title/> 
```

如何用空值创建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:31:13.963

您需要显式添加一个空文本节点：

```
$title = $domtree->createElement('title');
$title->appendChild($domtree->createTextNode(''));
$rel->appendChild($title); 
```

的第二个参数`createElement()`是非标准的，我个人不使用它，因为它会产生像这样稍微不直观的行为。

在我看来，您应该始终明确地创建文本节点。这样做的另一个原因是文本节点会自动正确处理转义，这与需要您手动转义文本数据的非标准第二个参数不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T12:15:11.867

以供将来参考，以下是您可以轻松地从数组（包括空元素）构建 xml 的方法：

```
class Test {
    public function getTestXml()
    {
        $testElements = [
            'foo' => 'foo',
            'bar' => 'bar',
            'baz' => [
                'empty' => null,
            ],
        ];

        $xml = new \DOMDocument('1.0', 'UTF-8');
        $test = $this->buildXmlNodeFromArray($xml, 'test', $testElements);

        $xml->appendChild($test);

        return $xml->saveXml();
    }

    /* Here's where all the magic happens */
    private function buildXmlNodeFromArray(\DOMDocument $document, $nodeName, array $nodeElements)
    {
        $node = $document->createElement($nodeName);

        foreach ($nodeElements as $key => $value) {
            if (null === $value || '' === $value) {
                $emptyValue = $document->createTextNode('');
                $emptyElement = $document->createElement($key);
                $emptyElement->appendChild($emptyValue);

                $node->appendChild($emptyElement);
            } elseif (is_array($value)) {
                $subNode = $this->buildXmlNodeFromArray($document, $key, $value);

                $node->appendChild($subNode);
            } else {
                $node->appendChild($document->createElement($key, $value));
            }
        }

        return $node;
    }
}

$test = new Test();

echo $test->getTestXml(); 
```

结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<test>
    <foo>foo</foo>
    <bar>bar</bar>
    <baz>
       <empty></empty>
    </baz>
</test> 
```

# asp.net - 循环遍历 SQL 查询结果并添加到 VB.Net 中每个结果的下拉列表的最佳方法？

> ID：15503632
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:27:58.737
> 
> 标签：asp.net, sql-server, vb.net

我有一个在页面加载时运行的查询。查询的结果每次都不同，因此我需要能够遍历 dataReader 中的结果，并为每个结果添加一个选项到下拉列表（或选择列表）。

我知道如何在 MySQL 中执行此操作，但我不知道如何在 SQL Server 和 Visual Basic 中执行此操作。

逻辑是：

```
For Each Result in Query.Results
    Add DropDownList.Option
End 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:38:46.630

我认为当不需要循环时，您正在尝试以艰难的方式做到这一点。您需要做的就是向您的页面添加一个 DropDownList 和一个 DataSource，然后像这样连接起来：

```
<asp:DropDownList ID="YourID" runat="server" 
  AutoPostBack="True" DataSourceID="YourDataSource"
  DataTextField="NAME" DataValueField="VALUE" />

<asp:SqlDataSource ID="YourDataSource" runat="server" 
  ConnectionString="<%$ ConnectionStrings:YOURCON %>"
  SelectCommand="SELECT 
        NAME 
        ,VALUE
      FROM YourTable 
      ORDER BY NAME">
</asp:SqlDataSource> 
```

# java - Adobe ColdFusion 9 中的“JVM 和 Java 设置”CF 管理页面在哪里

> ID：15503636
> 
> 赞同：2
> 
> 时间：2013-03-19T15:28:09.560
> 
> 标签：java, coldfusion, classpath

许多指南参考“JVM 和 Java 设置”页面（在 CF Admin 中）来操作 Adob​​e ColdFusion 中的类路径。（我恰好在 ACF9 上。）

我在 Linux (Ubuntu) 上运行多服务器 ACF9，但我无法在任何地方找到该页面。

[![CF 管理员](../Images/ce6c9b52a435e3cbace9fcbd6a745815.png)](https://i.stack.imgur.com/cIKsY.png)

它在哪里，和/或如何操作 CF 类路径？（特别是，我想针对一个特定实例对其进行修改。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T15:36:58.447

“JVM 和 Java 设置”仅适用于单服务器安装。

`jvm.config`CF9 多服务器中的更新：`<jrun_root>\bin\`

[http://helpx.adobe.com/coldfusion/kb/change-coldfusion-jvm.html](http://helpx.adobe.com/coldfusion/kb/change-coldfusion-jvm.html)

默认情况下，它们都共享一个`jvm.config`。您可以为`jvm.config`每个实例使用自定义，请参阅： http: [//www.carehart.org/blog/client/index.cfm/2012/6/26/identifying_what_instance_uses_a_given_jvm_config](http://www.carehart.org/blog/client/index.cfm/2012/6/26/identifying_what_instance_uses_a_given_jvm_config)

# java - 我如何优化包含一些重复行的代码？

> ID：15503639
> 
> 赞同：13
> 
> 时间：2013-03-19T15:28:16.263
> 
> 标签：java, android

我在android编程中有以下代码

```
Button btn1 = ( Button ) findViewById( R.id.btn1 );
Button btn2 = ( Button ) findViewById( R.id.btn2 );
Button btn3 = ( Button ) findViewById( R.id.btn3 );
Button btn4 = ( Button ) findViewById( R.id.btn4 );
Button btn5 = ( Button ) findViewById( R.id.btn5 );
Button btn6 = ( Button ) findViewById( R.id.btn6 );
Button btn7 = ( Button ) findViewById( R.id.btn7 );
Button btn8 = ( Button ) findViewById( R.id.btn8 );
Button btn9 = ( Button ) findViewById( R.id.btn9 ); 
```

它一直持续到 btn30
在 python 中我通过下面的简单代码对其进行优化

```
#is a python syntax (for_statement)
#python work by tab
for i in range(1,31):
    #in python not need to declare temp
    temp="""Button btn"""+str(i)+"""=(Button)findViewById(R.id.btn"""+str(i)+""")"""
    exec(temp)#a default function in python 
```

在 java 编程中我该怎么做？或者我可以做到吗？确实存在一个简单的代码吗？

`UPDATE 1`

所以有两种方法可以做到
`Code 1`：

```
final int number = 30;
final Button[] buttons = new Button[number];
final Resources resources = getResources();

for (int i = 0; i < number; i++) {
    final String name = "btn" + (i + 1);
    final int id = resources.getIdentifier(name, "id", getPackageName());

    buttons[i] = (Button) findViewById(id);
} 
```

`Code 2`：

```
public static int getIdByName(final String name) {
    try {
        final Field field = R.id.class.getDeclaredField(name);

        field.setAccessible(true);
        return field.getInt(null);
    } catch (Exception ignore) {
        return -1;
    }
}

final Button[] buttons = new Button[30];

for (int i = 0; i < buttons.length; i++) {
    buttons[i] = (Button) findViewById(getIdByName("btn" + (i + 1)));
} 
```

另一种方式是 GidView

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T15:38:36.613

`Button`您可以创建一个's数组并使用`getIdentifier`允许您通过名称获取标识符的方法。

```
final int number = 30;
final Button[] buttons = new Button[number];
final Resources resources = getResources();

for (int i = 0; i < number; i++) {
    final String name = "btn" + (i + 1);
    final int id = resources.getIdentifier(name, "id", getPackageName());

    buttons[i] = (Button) findViewById(id);
} 
```

**如果有人对如何仅使用 Java 获得相同的结果感兴趣**

上面的解决方案使用`Android`了特定的方法（例如`getResources`, `getIdentifier`），通常不能使用`Java`，但是我们可以使用 a`reflection`并编写一个类似于 a 的方法`getIdentifier`：

```
public static int getIdByName(final String name) {
    try {
        final Field field = R.id.class.getDeclaredField(name);

        field.setAccessible(true);
        return field.getInt(null);
    } catch (Exception ignore) {
        return -1;
    }
} 
```

接着：

```
final Button[] buttons = new Button[30];

for (int i = 0; i < buttons.length; i++) {
    buttons[i] = (Button) findViewById(getIdByName("btn" + (i + 1)));
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-19T15:32:48.227

而不是优化这种代码，你应该重新考虑你的布局。如果屏幕上有 30 个按钮，a`ListView`可能是更好的解决方案。您可以通过索引访问项目并处理`onClick`事件，就像使用按钮一样。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-19T15:41:04.130

如果您使用该类中的[getIndentifier()](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法`Resources`，您的代码将如下所示：

```
Button[] buttons = new Button[10];
for (int i = 0; i < buttons.size; i++) {
    int id = getResources().getIdentifier("btn" + (i + 1), "id", <your-package-name>);
    buttons[i] = (Button) findViewById(id);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-19T15:40:46.383

我宁愿选择一个简单的`Button`s 数组。

```
// Just a simple code
Button [] buttons = new Button[30];
for(int i = 0; i < 30; i++)
{
    buttons[i] = new Button();
} 
```

如果还需要用`findViewById()`方法来初始化的话，反正会很丑，但还是不会有那么多声明，这对我来说是值得考虑的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T15:41:12.117

使用我能想到的最小代码，我会这样做：

```
 Button[]btn=new Button[30];
  for (int i=0;i<btn.length;i++)  btn[i] = (Button) findViewById(getResources().getIdentifier("btn"+(i+1),"id", "yourpackage")); 
```

# mongodb - 来自neo4j中的gremlin shell的GMongo实例未定义

> ID：15503641
> 
> 赞同：0
> 
> 时间：2013-03-19T15:28:22.503
> 
> 标签：mongodb, groovy, neo4j, gremlin, titan

我正在尝试从 Neo4j 中的 Gremlin shell 加载来自 mongodb 数据库的数据，以便从中创建图形数据库。[gremlin-mongodb](http://thinkaurelius.com/2013/02/04/polyglot-persistence-and-query-with-gremlin/)中解释了详细信息。[首先，我从GMongo](http://mvnrepository.com/artifact/com.gmongo/gmongo)下载了 GMongo jar 文件，并在 Neo4j Web 管理控制台的 Gremlin shell 中运行以下代码

```
gremlin> import com.gmongo.GMongo
gremlin> mongo = new GMongo() 
```

导入命令工作并导入包，但第二行失败，消息未定义。我也尝试导入以下包，但这也不起作用。

```
import com.mongodb.BasicDBObject
import com.mongodb.DBObject 
```

知道问题是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:24:46.817

只是想强调 [stephen mallette](https://stackoverflow.com/users/1831717/stephen-mallette)为这个问题提供的答案，也非常感谢 tim_yates 和 Marko Rodrigez 的大部分人。我们需要从[Gmongo](http://mvnrepository.com/artifact/com.gmongo/gmongo)复制 GMongo jar 文件以及[Mongo java 驱动程序](http://mvnrepository.com/artifact/org.mongodb/mongo-java-driver/2.9.0)并将它们放在 lib 目录下。再次感谢斯蒂芬。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:13:54.980

尝试将脚本放入文件中，然后执行整个文件。由于某种原因，在 shell 中，上下文会丢失。如果您执行导入然后执行另一行，shell 将不会记住导入。

这就是我最终要做的——创建一个文件，然后做这样的事情：

./gremlin.sh -e my-script.groovy

试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:42:48.810

确保在 Gremlin 的 lib 目录中有 GMongo。

# syntax-error - flex/bison 总是有“第 1 行的语法错误”

> ID：15503644
> 
> 赞同：1
> 
> 时间：2013-03-19T15:28:26.273
> 
> 标签：syntax-error, bison, flex-lexer

正如我在标题中所说，我正在尝试使用 flex 和 bison 编写解析器。但是，无论我如何修改文件，总是会出现错误“第 1 行的语法错误”。

所以我决定写一个很简单的例子，看看我的方法对不对。

这是简单的文件“c1.isc”，将被读取：

```
1 nand
2 nor
3 nand
4 nor
5 xor 
```

这是 token.l 文件：

```
%{
# include <stdio.h>
# include <string.h>
# include "parse.tab.h"

struct{
    char *symbol;
    int val;
} symtab[]={
"nand", 1,
"nor", 2,
"xor", 3,
"0",0
};

extern int yylval;

%}

DIGITS [0-9]+
BLANK [ \t\n]+
ALPHA [a-z]+

%%

{DIGITS} {yylval=atoi(yytext);return(NUM);}
{ALPHA} {yylval=lookup(yytext);return(TYPE);}
{BLANK} ;

%%
lookup(s)
char* s;
{int i;
for (i=0;symtab[i].val!=0;i++)
{
if(strcmp(symtab[i].symbol,s)==0)
break;
}
return(symtab[i].val);
} 
```

这是 parse.y 文件

```
%{
# include <stdio.h>

extern FILE *yyin;

int gi;

%}

%token NUM TYPE

%%

parto: NUM
       {gi=$1;printf("num=%d\t",gi);}
       TYPE
       {gi=$3;printf("type=%d\n",gi);}
       ;

%%

yyerror(s)
char *s;
{
    extern int yylineno;
    extern char yytext[];

    fprintf(stderr, "%s in line %d near <%s>\n", s, yylineno, yytext);
    exit(-1);
}

main()
{FILE *x=fopen("c1.isc","r");
 yyin=x;
 yyparse();
} 
```

我认为这几乎是最简单的例子，但解析器仍然只将第一行输出为“num=1 gat=1”，然后输出“第 1 行附近的语法错误”。

我真的不知道为什么。我确定令牌文件是正确的，因为我已经使用以下方式对其进行了测试：

```
%{
# include <stdio.h>
# include <string.h>

struct{
    char *symbol;
    int val;
} symtab[]={
"nand", 1,
"nor", 2,
"xor", 3,
"0",0
};

int val;

%}

DIGITS [0-9]+
BLANK [ \t\n]+
ALPHA [a-z]+

%%

{DIGITS} {val=atoi(yytext);printf("num=%d\t",val);}
{ALPHA} {val=lookup(yytext);printf("type=%d\n",val);}
{BLANK} ;

%%
lookup(s)
char* s;
{int i;
for (i=0;symtab[i].val!=0;i++)
{
if(strcmp(symtab[i].symbol,s)==0)
break;
}
return(symtab[i].val);
}

main()
{
FILE *x=fopen("c1.isc","r");
yyin=x;
yylex();
} 
```

yylex() 可以工作。

我的编译方式是 1\. flex token.l 2\. bison -d parse.y 3\. cc lex.yy.c parse.tab.c -lfl

然后我会得到`a.out`，当我运行时`a.out`，会出现错误。

我想那是因为我在 parse.y 文件中的规则不正确，但错误怎么总是出现在第一行？

我使用以下规则使其工作。

```
parti: 
     | parti parto
     ;

parto: NUM
       {gi=$1;printf("num=%d\t",gi);}
       TYPE
       {gi=$3;printf("type=%d\n",gi);}
       ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:57:47.390

也许我在这里遗漏了一些东西，但你的语法只说输入应该是一个单一的 NUM 和一个单一的类型。就这样。因此，当解析器找到更多内容时，您会在输入的第二行收到错误。

您必须添加一个处理多行的规则。像这样的东西：

```
lots_of_partos: parto lots_of_partos | /* empty */ ; 
```

# c# - 服务参考更新：生成冗余文件

> ID：15503645
> 
> 赞同：8
> 
> 时间：2013-03-19T15:28:26.880
> 
> 标签：c#, wcf

当我们`Add Service Reference`，Visual Studio 创建 xsd 文件如下：

1.  MyService1.xsd
2.  MyService2.xsd
3.  MyService3.xsd

连同 wsdl 和 .svcmap 文件。

在后续更新中，使用`Update Service Refernce`而**不是**更新上述文件 VS 2010 继续添加更多和更多附加其名称的文件..

1.  MyService31.xsd
2.  MyService32.xsd
3.  MyService33.xsd **....**

这会在持续集成环境中签入文件和计划构建失败时产生麻烦。:-( 在编码方面没有任何错误。

你如何处理这种情况？我们可以强制`Visual Studio`强制更新现有文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:19:06.647

在尝试更新服务参考之前，请检查自动生成的文件，以便 VS 可以访问这些文件。我相信您的文件已被锁定，导致 Visual Studio 无法更改它们。这将导致您所看到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:52:27.703

我更喜欢使用 svcutil 来生成元数据（wsdl+xsd）和生成代理代码。

关于它的好处是没有“幕后魔术”发生；您可以看到并控制各个方面。

*   创建一个用于获取服务的 WSDL+XSD 的 cmd 文件。每当您的服务接口更改时运行 cmd。将生成的 wsdl 和 xsd 文件添加到源代码管理中，就像处理任何其他外部依赖项（例如，第 3 方 dll）一样。Svcutil 可以从 url 中提取元数据，或者如果您还拥有实现该服务的程序集，则可以从 .net dll 中提取元数据。

*   创建一个用于（重新）生成代理代码的 cmd 文件。每当服务元数据更改时运行它。将生成的 .cs 文件添加到您的项目中。

cmd 文件看起来像这样。您可以定义命名空间映射、序列化程序、集合使用等。查看 svcutil 的帮助。

svcutil.exe .\References\MyService\*.wsdl .\References\MyService\*.xsd /namespace:*,MyNamespace /out:.\Source\MySubfolders\MySeviceProxy.cs /serializer:DataContractSerializer /ct:System.Collections。通用列表`1

# ruby-on-rails-3 - CarrierWave RMagick - 我如何引起操纵！被称为？

> ID：15503652
> 
> 赞同：1
> 
> 时间：2013-03-19T15:28:42.883
> 
> 标签：ruby-on-rails-3, carrierwave, image-resizing, minimagick

问候智者，

我正在尝试在 Rails 3 中使用 MiniMagick 和 CarrierWave 来根据此处的说明调整和存储图像：http: [//carrierwave.rubyforge.org/rdoc/classes/CarrierWave/MiniMagick.html](http://carrierwave.rubyforge.org/rdoc/classes/CarrierWave/MiniMagick.html)

我可以不经处理就上传图片。图像已上传，我可以在目录和应用程序中看到它。但是当我尝试对图像执行处理时，`manipulate!`永远不会调用 block inside 方法。你知道我怎么能解决这个问题吗？

我有以下有效的上传器：

```
class MyContentImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::MiniMagick
end 
```

使用此代码，我可以使用我的表单上传图像并在结果页面上查看它们。一切都是桃色的。

我向上传器添加了一个简单的调整大小，如下所示：

```
class MyContentImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::MiniMagick
  process resize_to_fit: [200,200]
end 
```

添加进程调用后，图像没有上传，但我也从来没有看到错误。我尝试向上传器添加自定义方法并看到相同的结果：

```
class MyContentImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::MiniMagick
  def do_stuff:
    manipulate! do |img|
      img = img.resize_to_fit(200,200)
    end
  end
end 
```

什么都没发生。图像不会在服务器上更新，但我从未看到错误。我`raise`在该方法中放置了一些调用，`do_stuff`以查看调用执行的程度。事实证明`do_stuff`正在调用该方法，但内部的块`manipulate!`没有。这怎么可能发生？您将如何解决此问题？

附加信息：我在 config/initializers/carrierwave.rb 中有以下代码，所以我相信处理已启用：

```
CarrierWave.configure do |config|
    config.storage = :file
    config.enable_processing = true
end 
```

我在用：

*   导轨 3.2.12
*   载波 0.8.0
*   MiniMagick 3.5.0

# python - 使用 Python 调整 Gnome

> ID：15503653
> 
> 赞同：0
> 
> 时间：2013-03-19T15:28:47.147
> 
> 标签：python, linux, pygtk, gnome

我想更改 gnome 中某些窗口的默认行为。我想为此使用python。到目前为止，我只找到了 pygtk 教程，但这并不是我真正想要的。我想找到诸如“获取打开的窗口列表”、“在选定的窗口上单击挂载”等内容。请您指导我在哪里寻找这样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:41:58.907

您还可以查看Devil's Pie，它允许您重新定义某些窗口的行为方式。[恶魔派 2 网站](http://www.gusnan.se/devilspie2/)

除此之外，您必须自己自定义窗口管理器（Metacity - Gnome 2 或 Mutter - Gnome 3），它们是 C 语言，而不是 python。但请注意，窗口管理器黑客行为可能会让人们发疯。

# javascript - 如何在 SharePoint 2013 JSOM 中设置 URL 字段的值

> ID：15503654
> 
> 赞同：1
> 
> 时间：2013-03-19T15:28:50.007
> 
> 标签：javascript, api, url, sharepoint, sharepoint-2013

任何人都知道如何在 SharePoint 2013 JSOM 中设置 URL 字段的描述和 url？我见过的所有字段设置示例都`spListItem.set_item(fieldName,fieldValue)`非常适用于文本或数字等简单字段，但在复杂的 URL 字段类型上对我来说却失败了。我尝试传入我的 URL 字段名称和逗号分隔`fieldValue = "descriptionText,url"`

我也试过`SP.ListItem.parseAndSetFieldValue(fieldname,fieldValue)`，传入 URL 字段名称和逗号分隔`fieldValue = "descriptionText,url"`。

我在这里错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T02:35:18.493

使用 SP.FieldUrlValue 对象：

```
function updateListItem() {     
  var currCtx = new SP.ClientContext();          
  var web = currCtx.get_web();          
  var lists = web.get_lists();     
  var myList = lists.getByTitle("List1");     
  myItem = myList.getItemById(3);   
  var urlValue = new  SP.FieldUrlValue();
  urlValue.set_url("http://www.example.com");
  urlValue.set_description("test link");
  myItem.set_item("TestURL", urlValue);     
  myItem.update(); 
```

      currCtx.executeQueryAsync(onUpdateListSucceed, onFail); }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-22T11:20:42.827

以下是有关如何在 SharePoint 2013（超链接或图片）中使用 javascript 创建新 SP.ListItem 的示例：

```
 function createListItem() {  
   var clientContext = new SP.ClientContext(_spPageContextInfo.siteAbsoluteUrl);  
   var oList = clientContext.get_web().get_lists().getByTitle('TestList');  
   var itemCreateInfo = new SP.ListItemCreationInformation();  
   this.oListItem = oList.addItem(itemCreateInfo);

   var hyperLink = new SP.FieldUrlValue();  
   hyperLink.set_url("http://cnn.com");  
   hyperLink.set_description("CNN");  
   oListItem.set_item('PetkaHyperLink', hyperLink);

 oListItem.update();  
   clientContext.load(oListItem);  
   clientContext.executeQueryAsync(  
     Function.createDelegate(this, this.onQuerySucceeded),   
     Function.createDelegate(this, this.onQueryFailed)  
   );  
 } 
```

我从[How to set any SP.Field Value with JSOM (Javascript) in Sharepoint 2013 到 New SP.Listitem](http://pointofint.blogspot.nl/2014/03/how-to-set-any-spfield-value-with-jsom.html)

# c# - “Process.Close()”是必要的吗？

> ID：15503656
> 
> 赞同：2
> 
> 时间：2013-03-19T15:28:52.707
> 
> 标签：c#, .net, process

当我使用过程时：

```
var startInfo = process.StartInfo;
startInfo.FileName = @"C:\cxecute.exe";
startInfo.WindowStyle = ProcessWindowStyle.Hidden;

process.Start(); 
```

是否有必要使用 process.close？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:33:49.567

该`Process`类型确实包含它在调用`Close`和实现时释放的资源`IDisposable`。因此，它应该像任何其他`IDisposable`对象一样被对待，并`Dispose`在您完成使用它时调用。

但是，调用失败`Dispose`不会导致`Process`对象使用的任何直接问题。这不像`FileStream`调用失败`Close`可以阻止`FileStream`同一文件上的其他实例。`Close`话虽如此，当你完成它时，你仍然应该打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:34:18.080

过程实现`IDisposable`。最好`Free resource`由进程分配。

`Process.Close()`- 释放与此组件关联的所有资源。

所以是的，如果这个过程必须是`Closed/Disposed`

# c# - 从 javascript 调用 ASP 生成的按钮单击

> ID：15503657
> 
> 赞同：0
> 
> 时间：2013-03-19T15:28:55.833
> 
> 标签：c#, javascript, asp.net

我在我的网络控件上关注按钮，

```
<asp:Button runat="server" ID="btnSave" Text="Save" onclick="btnSave_Click"  OnClientClick="myShowWaitScreenWithNoClose('Processing...', 'Saving survey.Please wait it may take minutes..');" CssClass="buttons" Height="46px" Width="212px" Visible="false"  /> 
```

我正在尝试使用后面代码中的 JavaScript 单击此按钮。像，

```
protected void Page_Load(object sender, EventArgs e)
{

 if (!IsPostBack)
   {
        ScriptManager.RegisterStartupScript(this, this.GetType(), "scr", "setTimeout(function(){document.getElementById('btnSave').click(); return false;}, 180000);", true);
   }
} 
```

但它会引发错误`Error: TypeError: document.getElementById(...) is null`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:31:15.670

它会引发此错误，因为您声明的 ID 与呈现的 ID 不同。

```
<asp:Button runat="server" ID="btnSave" clientIdMode="static"> 
```

添加`clientIdMode="static"`属性，以便您的 ID 将完全按照您声明的方式呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:31:20.560

要通过 获取服务器端控件`Javascript`，请使用以下命令

```
document.getElementById('<%=btnSave.ClientID%>').click(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:32:19.053

最有可能返回 null 是因为 btnSave 控件的 id 在客户端呈现时已更改，除非您使用[CliendIDMode="static"](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

为了使您的代码正常工作，您需要将其更改为：

```
 if (!IsPostBack)
   {
        ScriptManager.RegisterStartupScript(this, this.GetType(), "scr", "setTimeout(function(){document.getElementById('"+btnSave.ClientID+"').click(); return false;}, 180000);", true);
   } 
```

# hibernate - 连接字段上的 JPA 查询过滤器

> ID：15503658
> 
> 赞同：5
> 
> 时间：2013-03-19T15:29:01.160
> 
> 标签：hibernate, jpa, jpa-2.0, criteria-api

我想使用“name + surname”字符串作为键来查询我的“customers”表。

姓名和姓氏存储在不同的字段中。

所以我的查询是：

```
SELECT 
   * 
FROM 
   customers 
WHERE 
   CONCAT(name,' ',surname) LIKE '%term%' 
   OR CONCAT(surname,' ',name) LIKE '%term%' 
```

但是，我不能这样做，我的查询是 JPA2**标准查询**。就像是：

```
CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
            CriteriaQuery cq = cb.createQuery();
            Root<Customer> from = cq.from(Customer.class);
            cq.select(from);

            Predicate whereClause = cb.or(
                cb.like(from.<String>get("name"), "%"+ r +"%"),
                cb.like(from.<String>get("surname"), "%"+ r +"%"),
            );

            cq.where(whereClause);      
            TypedQuery<Customer> query = getEntityManager().createQuery(cq);
            list = query.getResultList(); 
```

请问如何通过姓名和姓氏的组合过滤我的结果集？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-19T16:01:51.163

使用[CriteriaBuilder.concat(Expression, Expression)](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#concat%28javax.persistence.criteria.Expression,%20javax.persistence.criteria.Expression%29)：

```
Expression<String> exp1 = cb.concat(from.<String>get("name"), " ");
exp1 = cb.concat(exp1, from.<String>get("surname"));
Expression<String> exp2 = cb.concat(from.<String>get("surname"), " ");
exp2 = cb.concat(exp2, from.<String>get("name"));
Predicate whereClause = cb.or(cb.like(exp1, "%"+ r +"%"), cb.like(exp2, "%"+ r +"%")); 
```

# sql - 如何使用sql代码在sqlite3表（在rails上）中插入记录？

> ID：15503662
> 
> 赞同：0
> 
> 时间：2013-03-19T15:29:09.527
> 
> 标签：sql, ruby-on-rails, sqlite

我在互联网上找到了一个 SQL 文件，其中包含具有这种结构的所有城市：

```
INSERT INTO cities 
SET id=1,city='name_of_city',zip_code=XXXXX,province='XX',region='name_of_region'; 
```

因此，我在 Rails (sqlite3) 中创建了一个具有相同结构的“城市”表：

```
Cities : Id, city(char), zip_code, province, region. 
```

现在，我如何使用这个带有 rails 的 SQL 文件来填充我的表？是否有工具可以为 sqlite3 数据库转换“SQL INSERT RECORD”？

谢谢

编辑（一些 SQL 文件行）

```
INSERT INTO cities SET id=1,city='Abano Terme Bagni',zip_code=35031,province='PD',region='Veneto';
INSERT INTO cities SET id=2,city='Abatemarco',zip_code=84040,province='SA',region='Campania';
INSERT INTO cities SET id=3,city='Abazia Di Sulmona',zip_code=67030,province='AQ',region='Abruzzo';
INSERT INTO cities SET id=4,city='Abbadia Alpina',zip_code=10060,province='TO',region='Piemonte'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:48:24.357

我认为您可以生成 mysql 数据库，然后使用像[seed_dump](https://github.com/zenprogrammer/seed_dump)或[yaml_db](https://github.com/ludicast/yaml_db)这样的转储 gem ，您可以将所有数据用于 Rails 应用程序的任何数据库引擎。

# prolog - 在序言中延迟执行？

> ID：15503666
> 
> 赞同：1
> 
> 时间：2013-03-19T15:29:16.237
> 
> 标签：prolog

我将如何延迟序言中的执行？我可以`threadDelay ms`在 Haskell 中将其延迟`ms`几毫秒。有没有办法在序言中做到这一点？我的意思是我可能只做一堆空查询，比如

```
delay(0).
delay(X) :- delay(Y), Y is X - 1. 
```

但这似乎是一个愚蠢和错误的想法。

编辑：

显然有`sleep/1`。但是，当我做类似的事情时

```
delayText([H|T]) :- put_char(H), sleep(0.1), delayText(T).
delayText([]). 
```

, sleep 将首先执行（所以它会在查询时休眠 0.5 秒`delayText("Hello").`）然后它会立即显示所有文本？我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:02:20.907

只是为了正式化我的回答，在 SWI-Prolog 中，您可以使用它[`sleep/1`](http://www.swi-prolog.org/pldoc/doc_for?object=sleep/1)来延迟该过程。[我在这个列表中](http://www.univ-orleans.fr/lifo/software/stdprolog/bips.html)没有看到 ISO 谓词，我也不期待它，因为该标准并没有真正指定关于线程或其他低级操作系统问题的太多内容。

要修复`delayText/1`，您只需要添加`flush_output`. 这与 Haskell 中的基本相同`hFlush stdout`，但您也可以在 Haskell 中更改输出流的刷新模式`hSetBuffering`。SWI 版本[`open/4`](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.16%27,swi%28%27/doc/Manual/IO.html%27%29%29)支持一个`buffer`选项，但它提到这不是 ISO，因此可能没有 ISO 方法可以导致刷新自动发生或使输出无缓冲，但希望有更多标准经验的人会出现如果我错了，请纠正我。

更正后的代码如下所示：

```
delayText([H|T]) :- put_char(H), flush_output, sleep(0.1), delayText(T).
delayText([]). 
```

我可能会这样写：

```
delay_put_char(X) :- put_char(X), flush_output, sleep(0.1).
delayText(X) :- maplist(delay_put_char, X). 
```

# google-analytics - 使用单页应用程序进行 Google 内容实验

> ID：15503667
> 
> 赞同：1
> 
> 时间：2013-03-19T15:29:16.930
> 
> 标签：google-analytics, google-experiments

是否可以在我的单页应用程序中使用 Google 内容实验 A/B 测试？

我选择了页面 website.com#/register 和 website.com#/register2 但谷歌在预览中添加 ...website.com#/register#utmxid=，所以使用 2 个锚点，无法工作。

你有什么主意吗 ？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T00:11:17.143

使用[内容实验 JavaScript API](https://developers.google.com/analytics/devguides/collection/gajs/experiments#cxjs)。

# ember.js - 在 Ember 中引导数据模型？

> ID：15503672
> 
> 赞同：5
> 
> 时间：2013-03-19T15:29:33.890
> 
> 标签：ember.js, ember-data

我想用数据引导一个应用程序，而不必做额外的请求。假设我有一个带有以下 json 的简单用户模型：

```
{"user":{"id":1,"email":"test@example.com"}} 
```

这个 json 被 Rails 应用程序转储。我应该如何最好`User`地在 Ember 中引导我的模型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:34:11.470

利用

```
App.Store.load(App.YourModel, yourdata); 
```

看到这个问题：

[Ember 数据引导模型对象](https://stackoverflow.com/questions/10887944/ember-data-bootstrapping-model-objects)

编辑：不确定您是否可以一次加载多个对象-您可能必须循环您的集合。建议使用类似 underscore.js

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-01T23:39:13.327

如果您的目标是从 JSON 引导模型，那么您应该使用此处详述的 push() 方法：http: [//emberjs.com/guides/models/pushing-records-into-the-store/#toc_pushing-records](http://emberjs.com/guides/models/pushing-records-into-the-store/#toc_pushing-records)

# java - 写入和读取文件、使用循环和分析数据

> ID：15503673
> 
> 赞同：-2
> 
> 时间：2013-03-19T15:29:39.217
> 
> 标签：java

我在完成我的程序时遇到了一些麻烦。这是我得到的和说明。创建一个包含 500 个从 0 到 1000 的随机数的文件，使用 for 循环将数字写入文件。然后 1\. 找到最小值 2\. 找到最大值 3\. 找到平均值 4\. 确定连续数字出现的次数。我在创建随机数文件和第 4 步时遇到问题。提前致谢！

```
 public static void main(String[] args) throws FileNotFoundException {
    PrintWriter prw = new PrintWriter("results.txt");
    File numfile = new File("randomdata.txt");
    Scanner infile = new Scanner(numfile);
    int num, largest, smallest, sum = 0, count = 0;
    int programnumber = 6;
    header (prw, programnumber );
    double average = 0;

    Random gen = new Random();
    System.out.println("From gen: ");
    for (int i = 0; i < 1000; i++){
        System.out.print(gen.nextInt(500) + "");
            num = gen.nextInt(500);
            System.out.println(num);
            sum = sum + num;
            count++;
            average = (double) sum / count;
    }

    while (infile.hasNext()){
        num = infile.nextInt();
        largest = infile.nextInt();
        smallest = infile.nextInt();
        System.out.println(num);
        if (num < largest){
            largest = num;
        }
        if (num > smallest){
            smallest = num;
        }
        System.out.println("The largest is: " + largest);
        prw.println("The largest is: " + largest);
        System.out.println("The smallest is: " + smallest);
        prw.println("The smallest is: " + smallest);
        System.out.println("The average is: " + average);
        prw.println("The average is: " + average);

    }
    prw.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:39:47.437

> **我无法使用随机数创建文件**

您正在尝试打开一个不存在的文件：

```
File numfile = new File("randomdata.txt");
Scanner infile = new Scanner(numfile); 
```

构造`Scanner`函数试图打开文件，但它还不存在，所以它抛出一个`FileNotFoundException`. 您不需要`Scanner`，因为您首先要创建该文件。使用 a`FileWriter`代替：

```
FileWriter fw = new FileWriter("randomdata.txt");
for (int i = 0; i < 1000; i++){
    num = gen.nextInt(500);
    fw.write(num + "\n");
}
fw.close(); 
```

您可能还需要检查`for`-loop - 它会生成 0..500 范围内的 1000 个数字，反之亦然。

然后，您需要重新设计您的`while`-loop：

*   从数据文件中删除读取最大/最小的行。这需要计算，而不是从数据文件中读取。
*   将结果的打印移到循环之外 - 您不需要在每次循环迭代时打印它
*   初始化`largest`并`smallest`使用合理的值
*   将平均值的计算从`for`-loop`while`移到 -loop中

有了这个，您应该有一个工作程序，您可以在其中检查结果是否符合您的预期。

> **确定连续数字出现的次数**

想一想如何解决它 - 您想知道当前读取的数字是否等于先前读取的数字 + 1。因此，您需要在`while`-loop 中跟踪先前读取的数字，类似于您对`largest`and所做的事情`smallest`。请注意第一次循环迭代，其中尚不存在先前的数字。

顺便说一句：我故意没有在代码中给出完整的答案；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:42:18.127

首先，我们不是来做你的功课的 ;-)

第二，先写下你想要的。

例如：

*   创建文件
*   将随机数写入文件（0-1000）（是否允许有两次数字？）
*   关闭/保存文件

*   打开文件

*   读取文件
*   找到最大的数字
*   找到最小的数字
*   计算平均值
*   计算最高的连续值

在使用 java 进行尝试之前，将其转换为您理解的逻辑。

第4步：你如何计算纸上连续数字的数量？fe - 每次新数字比之前的数字高一时，增加 temp 变量。
- 每次不是（新值>旧值）将临时变量与最高的连续变量进行比较并保存最高的变量。之后重置临时变量

这将导致：

```
int largestConsecutive = 0;
int largestConsecutiveTemp=0;
int previewValue =9999;
// loop through the lines of the file, each Next elements represents one number.
// Use this loop to calc the result values, not to print out on every new number
while (infile.hasNext()){
        ... 
        if(num > previewValue){
           //do something
        } else {
           //do something
        }
        ...
} 
```

while 循环在查找最小/最大数字时也有点错误：

```
while (infile.hasNext()){
        num = infile.nextInt();
        largest = infile.nextInt();
        smallest = infile.nextInt();
        System.out.println(num);
        if (num < largest){
            largest = num;
        }
        if (num > smallest){
            smallest = num;
        }
        System.out.println("The largest is: " + largest);
        prw.println("The largest is: " + largest);
        System.out.println("The smallest is: " + smallest);
        prw.println("The smallest is: " + smallest);
        System.out.println("The average is: " + average);
        prw.println("The average is: " + average);

    } 
```

您每次都覆盖最小/最大变量。

```
largest = 0;        // 0, because when you compare with numbers between 0-1000, the new value is larger
smallest = 9999;    // 0, would be wrong here as it would be abvious the smallest number
total = 0;
amount=0;
// loop through the lines of the file, each Next elements represents one number.
// Use this loop to calc the result values, not to print out on every new number
while (infile.hasNext()){
        num = infile.nextInt();

        // override the largest variable with the new largest number
        if (num > largest){
            largest = num;
        }
        // override the smallest variable with the new smallest number
        if (num < smallest){
            smallest = num;
        }
        // needed to calc the average
        total += num;
        amount++; 
    }
average = (total / amount);

System.out.println("The largest is: " + largest);
prw.println("The largest is: " + largest);
System.out.println("The smallest is: " + smallest);
prw.println("The smallest is: " + smallest);
System.out.println("The average is: " + average);
prw.println("The average is: " + average); 
```

# couchdb - 无法远程访问 CouchDB

> ID：15503676
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:29:43.190
> 
> 标签：couchdb

我已将`bind_address`.`0.0.0.0`

`netstat -an | grep 5984`产生以下结果：

`tcp 0 0 0.0.0.0:5984 0.0.0.0:* LISTEN`

据我所知，一切似乎都井井有条。但是，无论出于何种原因，当我远程导航到蒲团时，它都无法解决。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:31:15.707

更改后是否重新启动了 CouchDB `bind_address`？有防火墙吗？

# php - 使用 LDAP 查找用户名

> ID：15503677
> 
> 赞同：1
> 
> 时间：2013-03-19T15:29:46.123
> 
> 标签：php, authentication, ldap

我为一家大公司维护一个 Intranet 网站。由于当前用户身份验证系统出现故障，我不得不制定紧急解决方案。这是简化的代码

```
$usr=$_POST['user'];
$psw=$_POST['code'];

if(!strlen($psw) )
$psw="x";
// because empty password works fine for any user

$ldap= ldap_connect("LDAP://ldapserver.xxx.local");
if(!$ldap)
exit(0);

ldap_set_option($ldap, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($ldap, LDAP_OPT_OPT_REFERRALS, 0);

if($bind = @ldap_bind($ldap, $usr, $psw){
header("Location: http:10.xx.xx.xx/entrance.php?id=$usr");
// login OK, look for user privileges
}else{
header("Location: http:10.xx.xx.xx/login.php?INV=1");
// back to login page
} 
```

代码工作得很好，但我不希望用户必须输入他们的网络用户名和密码，当用户访问此页面时，匿名连接并绑定到 LDAP 服务器，页面是否可以获取有关此用户用户名的信息。

如果它可以提供一些额外的信息，例如全名，分支代码，分支，邮件地址..等，那将是一个很大的奖励

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:39:32.157

这取决于您的 LDAP 服务器。如果需要身份验证，您必须提供该信息；但是，这应该委托给某个服务帐户，而不是绑定到特定用户（这是一个完全不同的过程）。无论如何，假设这不是问题，您可以使用`ldap_search`.

例如，如果您想在DN`cihats`下搜索 的用户名，则可以使用以下方法：`o=example`

```
$ldap = @ldap_connect($yourHostname);
$query = @ldap_search($ldap, 'o=example', 'cn=cihats');
$results = @ldap_get_entries($ldap, $query);

if ($results['count']) {
  print_r($results);
} else {
  echo "No such common name";
} 
```

的输出`ldap_get_entries`将是在搜索中找到的每个匹配项的整个目录，因此您将能够获得全名、分支代码等内容，但这些内容将具有特定于站点的键。

# c++ - 如何在 C++ 中定义不同的类型变量？

> ID：15503679
> 
> 赞同：0
> 
> 时间：2013-03-19T15:29:48.280
> 
> 标签：c++

例如，我有以下一段代码。

```
template <class T>
void g(T b){
  ;
}

template <class T>
void h(T b){
   ;
}

class T{
   method X;
   method Y;
   method Z; //many methods but the implementation of the methods are different from TT
};

class TT{
   method X;
   method Y;
   method Z; //the implementation of the methods are different from T
}
void f(){

  if(a==1){
  T b;  //use type T to define b
  } else{
  TT b; //use type TT to define b
  }

 g(b);
 h(b);
 i(b);// I need to use b for many different functions. 
```

}

我还需要变量 b 的范围在函数 f 中。

在类 T 和 TT 中，有许多方法，但方法的实现是不同的。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:34:05.170

使用[模板](http://www.cplusplus.com/doc/tutorial/templates/)并移动您在`f()`其中将使用的代码`b`inside `DoStuff()`。

```
template <class Type>
void DoStuff()
{
  Type b;  //use type 'Type' to define b      
}

void f(){

  if(a==1){
    DoStuff<T>();
  } else{
    DoStuff<TT>();
  }

} 
```

# java - 当内部元素之一发生变化时，是否可以让 JPanel 触发事件？

> ID：15503681
> 
> 赞同：0
> 
> 时间：2013-03-19T15:29:51.517
> 
> 标签：java, swing, events, methods, listener

我有一个 JPanel，里面有各种复选框。我不想在每个复选框中添加一个侦听器，而是希望在其中任何一个发生更改时执行一个方法。如果有办法做到这一点，或者如果有更好的方法来做到这一点，请告诉我。

# android - 在 Galaxy S2 上进行 Android 更新后内存不足

> ID：15503682
> 
> 赞同：1
> 
> 时间：2013-03-19T15:29:51.930
> 
> 标签：android, memory, upgrade, out-of-memory, layout-inflater

从 Android 4.0.2 升级到 4.1.2 后，我自己创建的应用程序不再工作了。

拍摄图片时，它应该根据回调数据创建位图。在位图命令期间，我收到内存不足错误。

我在谷歌问题中发现了类似的问题： [http ://code.google.com/p/android/issues/detail?id=42516](http://code.google.com/p/android/issues/detail?id=42516)

> 我刚刚遇到这个问题并做了一些实验，我的结论是：
> 
> - 你不能在 XML 中设置任何可绘制或颜色并使用 setContentView 应用它，这样做会泄漏 Activity
> 
> 修复：不要使用 setContentView 而是使用 LayoutInflater inflater = LayoutInflater.from(getApplicationContext());
> 
> ```
> inflater.inflate(R.layout.activity_frontpage, (ViewGroup) findViewById(android.R.id.content), true); 
> ```

所以我尝试了修复，但它对我不起作用。屏幕保持黑色，我收到相机错误 -1 异常。

这是我的回调：

```
public class ScanCallback implements PictureCallback {

    MainActivity mainActivity;
    private boolean savePicture = false;

    public ScanCallback(MainActivity mainActivity) {
        this.mainActivity = mainActivity;
    }

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        Bitmap bitmapPicture = BitmapFactory.decodeByteArray(data, 0,
                data.length);
        Bitmap redrawn = bitmapPicture.copy(bitmapPicture.getConfig(), true);

        mainActivity.mCamera.startPreview();

        MainActivity.waitForCallback = false;

    }
} 
```

还有我的主要Activity.onCreate：

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

        mPreview = new CameraView(this);

        mainActivity = this;

        scanCallback = new ScanCallback();

        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

//      setContentView(mPreview);
        LayoutInflater inflater = LayoutInflater.from(getApplicationContext());
        inflater.inflate(R.layout.activity_main,
//              (ViewGroup) findViewById(android.R.id.content), true);

        setProgressBarIndeterminateVisibility(false);
    } 
```

就是这样。如果您想查看任何其他代码，请告诉我。

任何想法如何让修复程序运行？或者如何首先避免错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:43:49.353

你应该看看[Displaying Bitmaps Efficiently](http://developer.android.com/training/displaying-bitmaps/index.html) and [Loading Large Bitmaps Efficiently](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

根据您的特殊需要，您可以对位图进行下采样，使其更小，或者从一个较大的位图创建几个较小的位图，然后一张一张地加载。所以你不会使用那么多内存。

# javascript - 如何使用 ruby 哈希作为 javascript 函数的选项

> ID：15503683
> 
> 赞同：2
> 
> 时间：2013-03-19T15:29:56.127
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, hash

我在 ruby​​ 中有一个哈希值，其中包含我想为 javascript 函数输入的选项

我的哈希是（因为它在 irb 中打印）

```
@options = [{:source=>"2", :tries=>"3"}] 
```

我的 javascript 函数接受类似的选项

```
myFunc({source: num, tries: num}) 
```

所以如果在一个 js.erb 文件中我做

```
myFunc(<%=j @options %>) 
```

这会导致

```
{:source=&gt;\&quot;2\&quot;, :tries=&gt;\&quot;3\&quot;} 
```

结果`j @edges.to_json`_

```
 \&quot;{:source=&gt;\\\&quot;2\\\&quot;, :target=&gt;\\\&quot;3\\\&quot;} }\&quot; 
```

结果`j @edges.to_json.html_safe`_

```
\"{:source=>\\\"2\\\", :target=>\\\"3\\\"}\" 
```

有没有办法让它输出一个对 JavaScript 更友好的哈希？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:03:33.850

不要使用`j`。尝试

```
myFunc(<%= @options.to_json %>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:02:11.830

您可以使用`gsub`删除那些不需要的字符：

```
@options[0].to_json.gsub(/\"/,'')
# => "{source:2,tries:3}" 
```

# ruby-on-rails - 使用活动记录检查各种范围

> ID：15503687
> 
> 赞同：0
> 
> 时间：2013-03-19T15:30:17.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

要检查范围，我会做这样的事情，这对我有用

```
conditions[:orders][:created_at]=created_start_date..created_end_date if params[:created_start_date].present? and params[:created_end_date].present? 
```

这稍后用作直接查询的条件。

*背景*

现在我有一个可以给我多个值的选择选项。假设在查找表单中，用户从短、中、长三个选项中选择持续时间为短、中、长。

```
<select class="advancedSearchFormSelectBox" multiple="multiple" name="filters[duration][]"><option value="Short">Short</option>
<option value="Medium">Medium</option>
<option value="Long">JLong</option></select> 
```

Rails 直接在 params[:duration] 中给我选择的值，这是一个数组。

Short 代表范围 0..5 ，Medium 5..20 ，Long>50

*问题*

现在，我如何以最好的方式构建与上述类似的条件。我不想使用太多 if-else 之类的条件`conditions[:orders][:duration]=0..5 if params[:duration].include?("short)`……除非这是最好的方法？映射是更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:40:26.973

像这样的东西怎么样：

```
DURATION_OPTIONS = { 'Short'  => 0..5, 
                     'Medium' => 5..20, 
                     'Long'   => 50..Float::INFINITY }
DURATION_OPTIONS[ params[:duration] ] 
```

# apache - Apache Tika OSGi 捆绑包在执行 mvn install 时失败

> ID：15503689
> 
> 赞同：0
> 
> 时间：2013-03-19T15:30:21.563
> 
> 标签：apache, maven, apache-tika

我正在尝试在 Windows Server 2008 R2 上安装 Apache Tika Toolkit。然后我转到 Apache Tika 所在的文件夹并从命令行执行 mvn install。然而，这会产生一个失败错误，上面写着：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.10:verify (default) on project
tika-bundle: There are test failures.
[ERROR]
[ERROR] Please refer to C:\Program Files\Apache Software Foundation\tika-1.3\tika-bundle\target\failsafe-report
s for the individual test results.
[ERROR] -> [Help 1]
[ERROR] 
```

我一直在网上寻找一段时间，但到目前为止还没有。任何想法？谢谢。 ![在此处输入图像描述](../Images/23178af77c9f45634733df39653a371a.png)

# python - 正则表达式搜索找不到包含内容的元素

> ID：15503690
> 
> 赞同：0
> 
> 时间：2013-03-19T15:30:27.050
> 
> 标签：python, regex, python-2.6

我有以下代码：

```
import re

vars='"NAME=Product","TYPE=","VERSION=1.2","VISIBILITY=","SRC=","FOLDER=TRUE","Text=foo, containing, commas"'
list = re.findall(r'\w+=".*?"', vars)

for i in range(1,len(list)):
   print list[i] 
```

输出如下所示：

```
VISIBILITY=","
SRC="," 
```

但是，我想找到（拆分）所有参数，即使是那些本身包含逗号的参数。输出应如下所示：

```
"NAME=Product"
"TYPE="
"VERSION=1.2"
"VISIBILITY="
"SRC="
"FOLDER=TRUE"
"Text=foo, containing, commas" 
```

我必须对我的正则表达式进行哪些更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:33:28.303

您的正则表达式似乎只期望`=`等号右侧的值周围有引号，但您的输入在整个表达式周围都有引号。

调整很容易：

```
re.findall(r'"\w+=.*?"', vars) 
```

在您的示例输入上运行它会给出：

```
>>> re.findall(r'"\w+=.*?"', vars)
['"NAME=Product"', '"TYPE="', '"VERSION=1.2"', '"VISIBILITY="', '"SRC="', '"FOLDER=TRUE"', '"Text=foo, containing, commas"']
>>> for match in re.findall(r'"\w+=.*?"', vars):
...     print match
... 
"NAME=Product"
"TYPE="
"VERSION=1.2"
"VISIBILITY="
"SRC="
"FOLDER=TRUE"
"Text=foo, containing, commas" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:36:06.290

我不确定您是否需要正则表达式：

```
[i for i in  vars.split('"') if i not in ','] 
```

出去：

```
['NAME=Product',
 'TYPE=',
 'VERSION=1.2',
 'VISIBILITY=',
 'SRC=',
 'FOLDER=TRUE',
 'Text=foo, containing, commas'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:35:22.783

我猜这更接近你真正想要的：

```
 list = re.findall(r'"(\w+)=(.*?)"', VARS) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T15:45:53.190

您可以使用 CSV 来执行此操作：

```
import csv

vars='"NAME=Product","TYPE=","VERSION=1.2","VISIBILITY=","SRC=","FOLDER=TRUE","Text=foo, containing, commas"'
reader=csv.reader(vars,delimiter=",",quotechar='"')

print [''.join(tgt) for tgt in reader if ''.join(tgt)] 
```

印刷：

```
['NAME=Product', 'TYPE=', 
 'VERSION=1.2', 
 'VISIBILITY=', 
 'SRC=', 
 'FOLDER=TRUE', 
 'Text=foo, containing, commas'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T16:29:50.987

```
import re

vari=('"NAME=Product",'
      '"TYPE=","VERSION=1.2",'
      '"VISIBILITY=","SRC=","FOLDER=TRUE",'
      '"Text=foo, containing, commas"')

print '\n'.join(re.findall('"[^"=]+=[^"=]*"', vari)) 
```

# qt - 无法从 qss 风格化的 QWidgets 获得实际大小

> ID：15503691
> 
> 赞同：0
> 
> 时间：2013-03-19T15:30:30.337
> 
> 标签：qt, qt4, size, stylesheet, qtstylesheets

添加内容后，我无法获得在 QT 4.7 中使用 StyleSheet 进行样式化的小部件的实际大小。

例如，我想获得大小，所以我在显示时设置了小部件的偏移量，以便它定位良好。或许多其他示例。

它只是行不通。我总是得到 0。我尝试了 geometry()、fixedSize()...等。

你怎么做呢？

# excel - 在两列之间的excel中查找不存在的值

> ID：15503693
> 
> 赞同：0
> 
> 时间：2013-03-19T15:30:33.570
> 
> 标签：excel, find

我有两列，假设 A1 - 搜索值和列 C1:C100，我需要找出 C1:C100 中是否存在 A1 值什么命令或者我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:34:59.610

我认为可以通过 vlookup 功能来实现：

*   [http://www.techonthenet.com/excel/formulas/vlookup.php](http://www.techonthenet.com/excel/formulas/vlookup.php)
*   [http://office.microsoft.com/en-in/excel-help/vlookup-HP005209335.aspx](http://office.microsoft.com/en-in/excel-help/vlookup-HP005209335.aspx)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:34:23.007

设置D1 = IF(C1=$A$1;1;0)，然后一直复制到D100，然后检查SUM(D1:D100)，如果是1，你在C列找到了A1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:51:47.523

检查它是否存在`MATCH`，当找不到该值时，它会给出错误。捕获该错误`ISERROR`，使这两个结果在您的逻辑中有意义`NOT`：

```
=NOT(ISERROR(MATCH(A1;C$1:C$100;0))) 
```

`TRUE`找到`FALSE`时和未找到时给出

# java - 优化具有多个循环的方法

> ID：15503695
> 
> 赞同：1
> 
> 时间：2013-03-19T15:30:41.517
> 
> 标签：java, loops, optimization

我有一个包含几个复杂`for`和`if`语句的方法。资源使用并不重要，因为该应用程序仍在开发中，但我想知道是否有某种方法可以优化它，因为它看起来非常沉重。

这一切都归结为：如果我有几个 mapped `Object`，有没有办法检查我的对象的一个​​（已知）字段中的值，如果满足该值，则使用相同的值更新所有这些值，而无需迭代我的地图太多次了。

这是代码

```
private Map<Integer, Reservation> CreerMapFax(HttpServletRequest request, HttpSession session)
{
    // Get the "keys" parameter array from the request
    // and makes an array of integers
    String[] strKeys = request.getParameterValues("keys");
    Integer[] intKeys = new Integer[strKeys.length];
    for (int i = 0; i < strKeys.length; i++)
        intKeys[i] = Integer.parseInt(strKeys[i]);

    // Creates Map (1) of the selected bookings that need to be faxed,
    // gets Map (2) of all registered bookings within session
    // and fill (1) with data from (2)
    // by using the keys stored in the array
    boolean mail = true;

    Map<Integer, Booking> mapFax = new HashMap<Integer, Booking>();
    Map<Integer, Booking> bookings=
            (HashMap<Integer, Booking>) session.getAttribute(SESSION_BOOKINGS);

    for (int i = 0; i < intKeys.length; i++)
    {
        Booking booking = bookingss.get(intKeys[i]);
        if (!booking.getMailing())
            mail = false;

        // Some updating done here on "booking"
        ...

        // Overwrite old map values with new ones
        bookings.put(intKeys[i], booking);
        mapFax.put(intKeys[i], booking);

    }

    // mail == false whenever at least one of the booking
    // stored in the map had their getMailing() method return false

    if (!mail)
    {
        for (int j = 0; j < intKeys.length; j++)
        {
            // Updates AGAIN !
            Booking booking = mapFax.get(intKeys[j]);
            booking.setMailing(false);
            mapFax.put(intKeys[j], booking);
            reservations.put(intKeys[j], booking);
        }
    }

    session.setAttribute(SESSION_BOOKINGS, BOOKINGS);
    return mapFax;
} 
```

基本上，这样做的目的（除了更新`Booking`对象的其他字段并返回`mapFax`地图以进行进一步处理）是将邮件字段设置为 false 的每个对象，`mapFax`如果至少有一个对象的值设置为错误的。

如果`for(){if(){}}`紧随其后`if(){for(){}}`，我想知道是否有某种方法可以使其更高效和更易读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:47:31.160

我会首先寻找邮件标志（一旦找到就打破循环），然后在一个循环中完成所有更新......

像这样的东西......

```
...
for (int i = 0; i < intKeys.length; i++)
{
    Booking booking = bookingss.get(intKeys[i]);
    if (!booking.getMailing())
    {
        mail = false;
        break;
     }
}
....
for (int i = 0; i < intKeys.length; i++)
{
    // Some updating done here on "booking"
    ...     
    if (!mail)
    {
        ...
    }
    ...
  // Overwrite old map values with new ones
    bookings.put(intKeys[i], booking);
    mapFax.put(intKeys[i], booking);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:58:19.700

```
private Map<Integer, Reservation> CreerMapFax(HttpServletRequest request, HttpSession session) {
    String[] strKeys = request.getParameterValues("keys");
    Integer[] intKeys = new Integer[strKeys.length];
    for (int i = 0; i < strKeys.length; i++) {
        intKeys[i] = Integer.parseInt(strKeys[i]);
    }

    boolean mail = true;

    Map<Integer, Booking> mapFax = new HashMap<Integer, Booking>();
    Map<Integer, Booking> bookings= (HashMap<Integer, Booking>) session.getAttribute(SESSION_BOOKINGS);

    for (Integer intKey : intKeys) {
        Booking booking = bookingss.get(intKey);
        if (!booking.getMailing()) {
            mail = false;
            break;
        }
    }

    for(Integer intKey : intKeys) {
        Booking booking = mapFax.get(intKey);
        mapFax.put(intKey, booking);
        if(!mail) {
            booking.setMailing(false);
            reservations.put(intKey, booking);
        }
    }

    session.setAttribute(SESSION_BOOKINGS, BOOKINGS);
    return mapFax;
} 
```

# php - PHP 传递 Javascript 收集的值

> ID：15503696
> 
> 赞同：0
> 
> 时间：2013-03-19T15:30:42.620
> 
> 标签：php, javascript

PHP 脚本是否可以传递 Javascript 收集的值？

我只是在想如果 Javacript 可以捕获用户的屏幕分辨率，我可以使用该值来运行 PHP（IF 和 Else 函数）来加载某个 php 文件吗？

要有明确的解释，

1.  Javascript 将检测用户的屏幕分辨率。
2.  确定屏幕分辨率后，PHP 脚本将加载正确的 php 文件。

*   如果屏幕分辨率大于 1200，则显示 PHP 文件编号 1
*   如果屏幕分辨率大于 1920，则显示 PHP 文件号 2
*   如果屏幕分辨率小于 1200 = 显示 PHP 文件号 3

顺便说一句，我忘了提到 PHP 文件只是网页的一小部分。让我们假设 php 文件是一个标头。PHP 文件#1、#2 和#3 具有不同的设计和内部的谷歌广告。

PHP #1 & #2 有一个 728px 宽度的 google adsense 广告，而 PHP #3 有一个 300px 宽度的 google adsense 广告

那可能吗？非常感激你的帮助。非常感谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:34:35.210

您可以通过 2 种方式执行此操作：

*   通过javascript，根据结果决定要加载的文件
*   将结果发送到 PHP（GET 或 POST）并让它决定做什么（AJAX 或重定向）

无论如何，PHP并不是真正需要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:32:56.863

您不必为此使用 PHP。

也许是这样的？：

```
if ((screen.width>=1024) && (screen.height>=768))
{
 window.location="highres.html";
}
else
{
  window.location="lowres.html";
} 
```

如果你必须使用 PHP，你可以做一个简单的 Ajax 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:34:04.310

当然有可能。首先加载包含获取分辨率的脚本的页面，然后使用 POST 或 GET 发送值，然后返回所需的内容。

我建议使用一些 ajax，否则如果页面加载两次，可能会给用户带来困扰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T17:43:01.800

我猜你想放置这个逻辑的不只是一页。这是我要做的：

1.  检查 $_SESSION['screen-res'] 中是否提供屏幕分辨率。如果没有，则将浏览器重定向到“check-screen-res.php”。这个 PHP 文件应该有相关的 javascript 代码来检测屏幕分辨率，然后使用变量“screen-res”将其存储在会话中。

2.  如果您的会话中有屏幕分辨率，那么您就可以开始了。只需使用它来包含您想要的任何 PHP 文件。

当然，如果用户在访问您的站点期间更改了分辨率，则此策略将不起作用。如果检测到屏幕分辨率更改，您可能可以通过引发适当的事件来解决这个问题；如果是这样，请相应地更新您的会话变量，等等。

希望这可以帮助。让我知道这是否是您要遵循的策略，我很乐意使用一些 php/javascript 代码更新此线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T15:56:42.837

其他答案集中在 AJAX 上 - 为了一些 adsense 广告 - 虽然更干净，但可能比真正需要的解决方案更复杂 - 为了完整起见，有一个便宜且简单的替代方案：将所有内容转储到页面首先，然后决定如何处理它。

例如。在您的 HTML 中：

```
<div id="ADgt1200" style="display:none;">
  <!-- adsense code-->
</div>
<div id="ADgt1920" style="display:none;">
  <!-- adsense code-->
</div>
<div id="ADlt1200" style="display:none;">
  <!-- adsense code-->
</div> 
```

然后在你的 Javascript 中：

```
//pseudo
if(whatever.width > 1200)
  document.getElementById('ADgt1200').style.display = 'block';
else { /* etc... */ } 
```

* * *

回应您的评论：

这只是一个原始示例，根据相同的原则，没有理由不能将 AdSense 代码存储在 javascript 变量中......

```
<script>
    var myAdsense = [
      'gt1200': '<adsense/>',
      'gt1920': '<code/>',
      'lt1200': '<block/>'
    ];

    window.onload = function(){
      if(whatever.width > 1200)
        document.getElementById('myEl').innerHTML = myAdsense['gt1200'];
      // etc.
    };
</script>
<div id="myEl"></div> 
```

...因此，除非您这么说，否则实际上没有代码被加载到 DOM 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T15:35:36.117

您可以使用 JQuery 脚本加载页面并让 PHP 返回正确的 html 文件。然后你调用这样的东西：

```
$.post("page.php", {sel:"cond1", dpiy: dpi_y, dpix: dpi_x}, function(j)
{
    //load form
    $("#ext_page").html(j);
}); 
```

# sql - 根据 sql->oracle 中的其他表更新表列

> ID：15503697
> 
> 赞同：1
> 
> 时间：2013-03-19T15:30:44.030
> 
> 标签：sql, oracle

这是我到目前为止所拥有的

```
BEGIN
             UPDATE t1
                set t1.LANGUAGE_ID = (case NETWORK.NID
                        when 11 then 10
                        else 7
                        end)
                FROM PROFILE, NETWORK where
                PROFILE.STATUS in ('A','U','S','H','I')
                AND PROFILE.MID = t1.MID
                AND NETWORK.MID = t1.MID
                AND t1.IS_DELETED = 'N'
END; 
```

得到错误：

```
"ORA-06550: line 7, column 21:
PL/SQL: ORA-00933: SQL command not properly ended
ORA-06550: line 2, column 18:
PL/SQL: SQL Statement ignored
ORA-06550: line 12, column 4:
PLS-00103: Encountered the symbol "end-of-file" when expecting one of the following:

   ( begin case declare end exception exit for goto if loop mod
   null pragma raise return select update while with
   <an identifier> <a double-quoted" 
```

我想在 t1.is_deleted='N' 时更新 t1，并且配置文件中的相同 mid 具有状态 AUSHI。所有表格都有一个中间列。任何想法为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T20:29:32.343

@Justin 提供的解决方案效果很好，但如果您的表很大，请考虑改用 MERGE。使用提供的查询，您将为 table 的每一行运行一次嵌套的 SELECT 查询`t1`。

我发现这个链接非常有用：[比较了 8 种批量更新方法](http://www.orafaq.com/node/2450)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:38:37.427

语句在Oracle`UPDATE`中没有子句。`FROM`

听起来你想要一个相关的更新

```
UPDATE t1
   SET t1.language_id = (SELECT (CASE WHEN network.nid = 11 
                                      THEN 10
                                      ELSE 7
                                  END)
                           FROM profile,
                                network
                          WHERE profile.status IN ('A','U','S','H','I')
                            AND profile.mid = t1.mid
                            AND network.mid = t1.mid
                            AND t1.is_deleted = 'N'); 
```

如果相关子查询不返回任何行，这将更新每一行`t1`设置。如果您只想更新子查询返回的匹配行中的行`language_id``NULL``t1`

```
UPDATE t1
   SET t1.language_id = (SELECT (CASE WHEN network.nid = 11 
                                      THEN 10
                                      ELSE 7
                                  END)
                           FROM profile,
                                network
                          WHERE profile.status IN ('A','U','S','H','I')
                            AND profile.mid = t1.mid
                            AND network.mid = t1.mid
                            AND t1.is_deleted = 'N')
  WHERE EXISTS( SELECT 1
                  FROM profile,
                       network
                 WHERE profile.status IN ('A','U','S','H','I')
                   AND profile.mid = t1.mid
                   AND network.mid = t1.mid
                   AND t1.is_deleted = 'N'); 
```

# python - 是否可以在 python 中查看多个 Redis KEY？

> ID：15503699
> 
> 赞同：5
> 
> 时间：2013-03-19T15:30:58.423
> 
> 标签：python, redis

最近一直在玩 Redis，想知道如何完成一次看多个键。像下面这样的东西是原子的吗？

以下代码使用redis-py；

```
 while True:            
        try:
            pipe.watch(key)
            pipe.watch(another_key)
            pipe.multi()
            pipe.set(key, value)
            pipe.set(another_key, another_value)
            pipe.execute()

            break
        except redis.WatchError:
            continue

        finally:
            pipe.reset() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T15:56:10.717

redis 支持多个键，是的：[http ://redis.io/commands/watch](http://redis.io/commands/watch)

尽管 python 客户端的文档说流水线命令是原子执行的，但我仍然会使用`WATCH`带有多个参数的单个调用：

```
pipe.watch(key, another_key) 
```

# k-means - 自组织地图“错误”

> ID：15503700
> 
> 赞同：0
> 
> 时间：2013-03-19T15:30:59.773
> 
> 标签：k-means, som

正如我们从 K-Means 中知道的，在样本数据聚集在 N 个集群中（每个集群都有一个质心向量）之后，并非所有数据都聚集在它们所属的集群中！我的意思是某些数据向量可能聚集在错误的簇中。这意味着即使在 K-Means 中，聚类时也没有 100% 的精度。我想知道这样的“错误”是否也出现在 SOM 算法中。那么……在 SOM 算法收敛后，是否有任何不属于它们实际放置的节点的数据样本？

我希望我的问题足够清楚。我期待你的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:22:36.563

SOM 根据提供的输入对数据进行聚类。集群的形成取决于输入呈现给网络的方式。

SOM 通过最小化地图格中的获胜节点与实际输入向量之间的距离来对输入进行聚类，然后对紧邻的权重进行调整。因此，属于单个类的输入被映射到形成集群的同一位置周围。

因此，当算法收敛时，除非在以下情况下，否则这种情况不太可能发生

1.  没有提供足够的数据点来训练网络
2.  使用的学习率值不合适
3.  SOM 正确聚类，我们没有看到聚类中的共同（隐藏）特征，并且倾向于认为聚类中存在错误（发生在我身上很多次）。

我不是 SOM 的专家，但从经验中回答。希望这可以帮助。

# windows - url 处理程序窗口和默认浏览器

> ID：15503702
> 
> 赞同：0
> 
> 时间：2013-03-19T15:31:01.637
> 
> 标签：windows, url, browser

我在 Windows 注册表中创建了一个自定义 url 处理程序，以便任何以 wxyz:// 开头的链接启动一个应用程序..

在 shell/open/command 下，我发现我可以用 url 替换应用程序 exe 路径 - 这样如果（默认）设置为“iexplore [http://mydomain.com?url=%1](http://mydomain.com?url=%1) ”和链接 wxyz:/ /thequickbrowsnfox 被点击，用户浏览器将转到[http://mydomain.com?url=wxyz://thequickbrowsnfox](http://mydomain.com?url=wxyz://thequickbrownfox)

考虑到，internet explorer 可能不是用户的选择，我怎样才能使用用户的默认浏览器打开页面..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:40:04.280

我只是在搜索相同的问题，并从[Windows RegKey - Default Browser Application Path](https://stackoverflow.com/questions/813058/windows-regkey-default-browser-application-path)中得到了答案。但是我注意到自 Vista 以来获取默认浏览器的注册表路径发生了变化：[您的浏览器如何知道它不是默认值](http://newoldthing.wordpress.com/2007/03/23/how-does-your-browsers-know-that-its-not-the-default-browser/)。

根据注册表值，您只能获得 (browser) `Progid`。要获取 .exe 路径，您需要从[Get dll directory from ProgID](https://stackoverflow.com/a/10227575/186334)`"HKCR\\<Progid>\\shell\\open\\command"`的答案中获取。

我担心的是，如果用户在设置 url 处理程序后更改了默认浏览器怎么办？您的 url 处理程序不再指向当前的默认浏览器。恐怕您需要创建一个应用程序来接受 url 处理程序（而不是浏览器本身）并在启动浏览器之前在注册表中找到当前的默认浏览器。

# asp.net - 更改密码错误

> ID：15503708
> 
> 赞同：0
> 
> 时间：2013-03-19T15:31:13.383
> 
> 标签：asp.net, membership, change-password

我想更改用户的密码。

我试过这个但它不起作用：

```
MembershipUser mu = Membership.GetUser(ddlUsers.SelectedValue, false);
**mu.ChangePassword(mu.ResetPassword(), "password2!");** 
```

这是我的错误：值不能为空。参数名称：密码答案

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:03:54.500

在您`web.config`中，您可能有一个值要求您为成员设置安全问题/答案。您可以在您的会员提供商设置部分中使用此设置关闭此功能`web.config`：

```
requiresQuestionAndAnswer="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:48:45.520

默认提供程序名称="AspNetSqlMembershipProvider"

网络配置：

```
<membership>
          <providers>
            <clear/>
            <!-- Default provider name--> <add name="AspNetSqlMembershipProvider"
            requiresQuestionAndAnswer="false"
             connectionStringName="ConnectionString" applicationName="/"
            type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
            enablePasswordRetrieval="false" enablePasswordReset="true"
            minRequiredNonalphanumericCharacters="0"
            minRequiredPasswordLength="6" passwordStrengthRegularExpression=""
            passwordAttemptWindow="10" maxInvalidPasswordAttempts="8"
               />
          </providers>
        </membership> 
```

# php - Twitter 仅应用程序身份验证 PHP OAuth 错误

> ID：15503710
> 
> 赞同：3
> 
> 时间：2013-03-19T15:31:14.790
> 
> 标签：php, curl, twitter, http-headers, twitter-oauth

**请注意**

现在可以在以下 github 链接中找到有效的 Twitter Application Only Authentication OAuth PHP 库的完整实现：[​​ Twitter Application Only Authentication OAuth Php](http://jonhurlock.github.io/Twitter-Application-Only-Authentication-OAuth-PHP/)

* * *

我试图让我的应用程序通过 Twitter 的仅应用程序身份验证进行身份验证。请参阅以下 URL 中的文档：

[仅限应用程序身份验证的 Twitter 开发人员文档](https://dev.twitter.com/docs/auth/application-only-auth)

我进入第 2 步并使用下面粘贴的代码请求不记名令牌。我收到如下回复：

```
HTTP/1.1 200 OK 
Date: Tue, 19 Mar 2013 15:13:03 GMT 
Status: 200 OK 
X-Frame-Options: DENY 
ETag: "6b7ec13d0ef1e9d8e0b39bec5266ba7b" 
X-Runtime: 0.06008 
Pragma: no-cache 
Last-Modified: Tue, 19 Mar 2013 15:13:03 GMT 
Content-Type: application/json; charset=utf-8 
X-Transaction: 55809f2187d74c8e 
X-MID: 4503f89925628df071cb1d27c3e6953709234b1b 
Expires: Tue, 31 Mar 1981 05:00:00 GMT 
Cache-Control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0 
Set-Cookie: k=10.37.190.122.1363705983314067; path=/; expires=Tue, 26-Mar-13 15:13:03 GMT; domain=.twitter.com 
Set-Cookie: _twitter_sess=BAh7CSIKZmxhc2hJQzonQWN0aW9uQ29udHJvbGxlcjo6Rmxhc2g6OkZsYXNo%250ASGFzaHsABjoKQHVzZWR7ADoMY3NyZl9pZCIlZTI5MjJmNDI5ODY4MzM0NjAz%250AMzkwZTE2NDY5MzdiNGM6D2NyZWF0ZWRfYXRsKwhV8TWDPQE6B2lkIiU2NzEy%250AZjgzOTNjYjc4NjNhYzgwMjU2Mjc1Yzc0ZDYyMw%253D%253D--22b3f64a757c1f9f3c3ae8df9ee434848c43eee8; domain=.twitter.com; path=/; HttpOnly 
Vary: Accept-Encoding 
Content-Encoding: gzip 
Content-Length: 138 
Server: tfe 
Set-Cookie: guest_id=v1%3A136370598331525689; Domain=.twitter.com; Path=/; Expires=Thu, 19-Mar-2015 15:13:03 UTC

‹«V*ÉÏNÍx‹/©,HU²RJJM,J-RÒQJLNN-.ŽKrÅ±‚|sg(«¢Ê(Ô5*ÝÕÃÂGÕÈ­ÌÃxßÂ²(ÐÄÙ(Í4ØÍÔDÕØ¥2+È³Ô Ô¨Ê7«À«$,+ÛÃ"ß35 
```

如您所见，返回的内容似乎返回了文档中描述的 json 字符串

```
HTTP/1.1 200 OK
Status: 200 OK
Content-Type: application/json; charset=utf-8
...
Content-Encoding: gzip
Content-Length: 140

{"token_type":"bearer","access_token":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAAAAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"} 
```

正如我们所见

```
‹«V*ÉÏNÍx‹/©,HU²RJJM,J-RÒQJLNN-.ŽKrÅ±‚|sg(«¢Ê(Ô5*ÝÕÃÂGÕÈ­ÌÃxßÂ²(ÐÄÙ(Í4ØÍÔDÕØ¥2+È³Ô Ô¨Ê7«À«$,+ÛÃ"ß35 
```

不等于

```
{"token_type":"bearer","access_token":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAAAAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"} 
```

我想知道这是否可能是编码错误，或者我是否从根本上对 cURL 做错了什么。

我的代码粘贴在下面，任何帮助将不胜感激：

乔恩

```
<?php
// from https://dev.twitter.com/docs/auth/application-only-auth
$consumer_key = 'myconsumerkey';
$consumer_secret = 'myconsumersecret';

// step 1
  // step 1.1 - url encode the consumer_key and consumer_secret in accordance with RFC 1738
    $encoded_consumer_key = urlencode($consumer_key);
    $encoded_consumer_secret = urlencode($consumer_secret);
    // step 1.2 - concatinate encoded consumer, a colon character and the encoded consumer secr    et
$bearer_token = $encoded_consumer_key.':'.$encoded_consumer_secret;
    // step 1.3 - base64-encode bearer token
    $base64_encoded_bearer_token = base64_encode($bearer_token);
// step 2
      $url = "https://api.twitter.com/oauth2/token"; // url to send data to for authentication
        $headers = array( 
            "POST /oauth2/token HTTP/1.1", 
            "Host: api.twitter.com", 
            "User-Agent: my Twitter App v.1",
            //"Authorization: Basic ".$base64_encoded_bearer_token."",
            "Authorization: Basic ".$base64_encoded_bearer_token."",
            "Content-Type: application/x-www-form-urlencoded;charset=UTF-8", 
            "Content-Length: 29",
            "Accept-Encoding: gzip"
        ); 

$ch = curl_init();  // setup a curl
curl_setopt($ch, CURLOPT_URL,$url);  // set url to send to
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); // set custom headers
curl_setopt($ch, CURLOPT_POST, 1); // send as post
curl_setopt($ch, CURLOPT_POSTFIELDS, "grant_type=client_credentials"); // post body/fields to be sent
$header = curl_setopt($ch, CURLOPT_HEADER, 1); // send custom headers
//$httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
$result = curl_exec($ch); // run the curl
curl_close($ch);  // stop curling
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:53:21.187

Answered by [CBroe](https://stackoverflow.com/users/1427878/cbroe) in comments:

I think the Accept-Encoding: gzip header might be your problem here – you say you accept a gzipped response, but then you don’t know what to do with it … so don’t set that header. – CBroe

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:41:58.860

正如 CBroe 在评论中所说，删除标题“接受编码：gzip”将修复。

如果您仍想使用 gzip 来加快传输速度，如果您设置了选项，curl 将添加标头并自动为您解压缩响应：

```
curl_setopt($ch, CURLOPT_ENCODING, 'gzip'); 
```

# sql - sql server 2012 搬家前

> ID：15503714
> 
> 赞同：0
> 
> 时间：2013-03-19T15:31:18.293
> 
> 标签：sql, sql-server-2012, moving-average, sql-server-2012-express

代码 ：

```
SELECT YEAR_ID, Count, ThreeYEARAverage, 
       AVG(Count) OVER (ORDER BY YEAR_ID ROWS 4 PRECEDING) AS FiveYEARAverage 
FROM (SELECT YEAR_ID, ISNULL(Count, 0) AS Count, 
             AVG(ISNULL(Count, 0)) OVER (ORDER BY YEAR_ID ROWS 2 PRECEDING) AS ThreeYEARAverage 
      FROM (SELECT DATEPART(YEAR, Date_plan) AS YEAR_ID, 
            SUM(ISNULL(Amount_produced, 0)) AS Count 
            FROM History_mango   
            WHERE DATEPART(YEAR, Date_plan) BETWEEN '2012' AND '2016' 
                  AND DATEPART(month, Date_plan) =  '09' 
            GROUP BY DATEPART(YEAR, Date_plan)) AS id
      ) AS id1 
```

结果

```
YEAR_ID Count ThreeYEARAverage  FiveYEARAverage 
2012    22    22.000000         22.000000
2013    555   288.500000        288.500000
2014    100   225.666666        225.666666
2015    88    247.666666        191.250000
2016    200   129.333333        193.000000 
```

需要

```
YEAR_ID Count ThreeYEARAverage  FiveYEARAverage 
2012    22  
2013    555 
2014    100   225.666666    
2015    88    247.666666
2016    200   129.333333        193.000000 
```

谢谢你亲爱的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:53:03.343

我手头没有 SQL Server 2012 来测试这个，但以下应该可以工作：

```
SELECT YEAR_ID, Count,
       (case when count(*) over (rows 2 preceding) >= 3
             then AVG(ISNULL(Count, 0)) OVER (ORDER BY YEAR_ID ROWS 2 PRECEDING) 
        end) AS ThreeYEARAverage,
       (case when count(*) over (rows 4 preceding)
             then AVG(Count) OVER (ORDER BY YEAR_ID ROWS 4 PRECEDING
        end) AS FiveYEARAverage
FROM (SELECT DATEPART(YEAR, Date_plan) AS YEAR_ID,
             SUM(coalesce(Amount_produced, 0)) AS Count
      FROM History_mango
      WHERE DATEPART(YEAR, Date_plan) BETWEEN '2012' AND '2016' AND DATEPART(month, Date_plan) = '09'
      GROUP BY DATEPART(YEAR, Date_plan)
     ) id 
```

它计算每组中的数量。如果有足够的，则显示平均值。

顺便说一句，使用保留字（例如`count`变量名）通常是个坏主意。此外，`coalesce`是标准 SQL 而`isnull`不是。而且，这假设您有每年的数据。

# android - 从浏览器启动我的应用程序仅适用于 chrome

> ID：15503717
> 
> 赞同：1
> 
> 时间：2013-03-19T15:31:22.097
> 
> 标签：android, browser, launching-application

我编写了一个应用程序，该应用程序将通过 html 链接（公司内部网络，而不是互联网）从浏览器启动。我在 AndroidManifest.xml 中定义了一个带有自己的 URL 方案的意图过滤器，它工作正常，但仅适用于 Google Chrome。所有其他浏览器都尝试加载一个不存在的网站。我的设备：装有 Android 4.2 的 Nexus 10

AndroidManifest.xml 中的部分：

```
 <intent-filter >
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="camerastarter" android:host="wrap" android:path="/" />
        </intent-filter> 
```

HTML：

[a href="camerastarter://wrap/?param1=value1¶m2=value2"]启动相机[/a]

我的雇主想要一个全屏浏览器，而 Chrome 没有全屏选项。是否有机会从其他浏览器/使用 WebView 的应用程序启动该应用程序？

（顺便说一句，zxing 条码扫描器也会出现同样的问题。只有 Chrome 可以从 html 链接启动它。）

我非常感谢任何帮助......

# mysql - JOOQ 生成的 api 是否依赖于 DBMS？

> ID：15503719
> 
> 赞同：4
> 
> 时间：2013-03-19T15:31:25.583
> 
> 标签：mysql, oracle, hsqldb, jooq

我已经用 Jooq 从本地 HSQLDB (DBMS) 生成了 API。并且测试运行正常。但是当我尝试使用另一个 DBMS（如 MySQL）运行测试时出现异常。另外，我已经看到 MySQL 生成的 API 属性是区分大小写的，而 HSQLDB 不是。

我的问题：是否可以使用 HSQLDB 使用 Jooq local 进行开发并使用 Oracle 或 MySQL 运行实时系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:56:25.083

可以将 jOOQ 与多个数据库一起使用。[我所知道的jOOQ 用户组](https://groups.google.com/forum/?fromgroups#!forum/jooq-user)中最“大胆”的用户将 jOOQ 与至少五个不同的（高效的！）数据库系统（其中：Oracle、SQL Server、Sybase）一起使用。

但请注意，jOOQ 只会在一定程度上抽象您的数据库。一旦您使用供应商特定的功能，您可能会遇到问题。jOOQ 不*保证*所有呈现的 SQL 都适用于您的所有数据库。它只会*简化*标准化任务。

由于您尝试将 HSQLDB 和 Oracle 结合起来，因此有问题的功能包括（以及许多其他功能）：

*   `DATE`Oracle对数据类型的不同实现
*   Oracle 的分析功能
*   Oracle的劣质`VARCHAR`/`VARCHAR2`数据类型
*   Oracle 的扩展`FOR UPDATE`语法
*   Oracle 的扩展`MERGE`语法
*   Oracle 的强类型命名数组类型——与 HSQLDB 的数组类型相反
*   Oracle 缺少显式`INTEGER`数据类型（尤其是存储过程）
*   Oracle 对包和 UDT 的支持
*   Oracle 缺乏对空字符串的支持（`''`和`NULL`都一样）
*   Oracle 的分区外连接
*   Oracle 的`PIVOT`/`UNPIVOT`子句

当然，当 jOOQ 不明确支持某个功能时，不兼容也仍然存在。其中包括（除其他外）：

*   甲骨文的 AQ
*   甲骨文的`MODEL`条款

还有，你自己负责

*   在所有数据库中维护等效的元数据（如果有疑问，请使用区分大小写的表/列名，即通过编写`CREATE TABLE "MY_TABLE"...`（Oracle、HSQLDB）或`CREATE TABLE `MY_TABLE`...`（MySQL）
*   在所有数据库中维护等效的数据类型和数据

另一方面，您可以安全地使用 jOOQ 和 jOOQ 的 SQL 抽象功能

*   大多数功能
*   大多数 SQL 子句，包括复杂的嵌套 SQL

有关更多信息，请考虑[`org.jooq.Support`](http://www.jooq.org/javadoc/latest/org/jooq/class-use/Support.html)Javadoc。此注解用于所有 API 元素，以记录 jOOQ 是否能够模拟相关方言中的底层 SQL 子句/函数。

除此之外，如果您唯一的问题是表名区分大小写，请考虑通过 jOOQ 的设置告诉 jOOQ 不要引用名称：http: [//www.jooq.org/doc/3.0/manual/sql-building/executor/自定义设置/](http://www.jooq.org/doc/3.0/manual/sql-building/executor/custom-settings/)

一个例子：

```
// This DSLContext will not render quoted table / column names:
Settings settings = new Settings().withRenderNameStyle(RenderNameStyle.AS_IS);
DSLContext create = DSL.using(connection, dialect, settings); 
```

# oracle - PLS-00386：在 FETCH 游标和 INTO 变量之间发现类型不匹配

> ID：15503720
> 
> 赞同：2
> 
> 时间：2013-03-19T15:31:26.920
> 
> 标签：oracle, stored-procedures, cursor, package, user-defined-types

以下包抛出： **PLS-00386：在 FETCH 游标和 INTO 变量之间的“V_STUDYTBL”处发现类型不匹配**

代码用途：在包外定义两种类型，一种用于将一堆数字发送到存储的proc中，另一种用于从my_table返回相应的行

预先感谢您的投入。

```
Create OR REPLACE Type InputTyp  AS VARRAY(200) OF VARCHAR2 (1000);

CREATE  TYPE OBJTYP AS OBJECT
   (
    A            NUMBER,
    B             VARCHAR2 (1000),       
    C        VARCHAR2 (100)       
 );
CREATE TYPE OutputTyp IS VARRAY (2000) OF   OBJTYP;
/

CREATE OR REPLACE PACKAGE my_package
AS
   PROCEDURE my_procedure(p_StudyNum   IN     InputTyp,
                                     p_StdyDtl        OutputTyp);
END my_package;
/
CREATE OR REPLACE PACKAGE BODY my_package
AS
   PROCEDURE MyProcedure(p_StudyNum   IN     InputTyp,
        p_StdyDtl        OutputTyp)
IS
  i            BINARY_INTEGER := 1;
  j            BINARY_INTEGER := 1;
  CURSOR c_StudyTbl
  IS
     SELECT A,  B, C
       FROM my_table
      WHERE Study_Number = p_StudyNum(i);

  v_StudyTbl   OBJTYP;
BEGIN
  p_StdyDtl := OutputTyp ();
  LOOP
     --  This is the first cursor opened for each of the items in the list.
      EXIT WHEN i > p_StudyNum.count;

     OPEN c_StudyTbl;
     LOOP

        FETCH c_StudyTbl INTO v_StudyTbl;
        EXIT WHEN c_StudyTbl%NOTFOUND;

        p_StdyDtl.EXTEND ();
        p_StdyDtl (j).A := v_StudyTbl.A;
        p_StdyDtl (j).B := v_StudyTbl.B;
        p_StdyDtl (j).C := v_StudyTbl.C;
        j := j + 1;
     END LOOP;
     CLOSE c_StudyTbl;
    i := i + 1;
  END LOOP;

  IF c_StudyTbl%ISOPEN
  THEN
     CLOSE c_StudyTbl;
  END IF;
EXCEPTION
  WHEN NO_DATA_FOUND
  THEN
     NULL;
END;
END my_package;
/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:45:38.657

您需要在选择上使用对象构造函数：

```
SELECT OBJTYP(A, B, C)
   FROM my_table
  WHERE Study_Number = p_StudyNum(i) 
```

但是您可以将过程简化为此而不是所有这些循环：

```
begin
select cast(multiset(select /*+ cardinality(s, 10) */ a, b, c
                        from my_table t, table(p_StudyNum) s
                      where t.study_number = s.column_value) as OutputTyp)
   into p_StdyDtl
   from dual;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:38:04.000

尝试将光标声明为：

```
CURSOR c_StudyTbl
IS
  SELECT OBJTYP(A, B, C)
    FROM my_table
    WHERE Study_Number = p_StudyNum(i); 
```

# qt - 记住最后的 QLineEdit 数据

> ID：15503722
> 
> 赞同：1
> 
> 时间：2013-03-19T15:31:33.983
> 
> 标签：qt, qlineedit

我的应用程序在 QLineEdit 中输入 Id 和 Birthdate，并将表单数据作为 http post 请求发送。当应用程序关闭然后重新启动时，最后输入的输入是否可以保留？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:42:21.393

简短回答：使用[QSettings](http://qt-project.org/doc/qt-4.8/qsettings.html)

例如：

```
QSettings settings(QSettings::UserScope);
settings.setValue("Birthdate", date); 
```

然后...

```
QSettings settings(QSettings::UserScope);
dateLineEdit->setText(settings.value("Birthdate").toString()); 
```

请参阅有关范围和文件格式的文档，并确定最适合您需求的用法。

# multithreading - 同步时程序关闭

> ID：15503725
> 
> 赞同：0
> 
> 时间：2013-03-19T15:31:39.167
> 
> 标签：multithreading, freepascal, lazarus

我想`callbackmethod`在它自己的线程中调用一个。将`callbackMethod`作为接口实现。

我已经声明了一个线程，如下所示：

```
CustomfunctionCallbackThread = Class(TThread)
        protected
            procedure Execute; override;

        private
            var mCallId: String;
            var mCallbackMethod: ICustomfunctionCallback;
            var mParam: pCustomParam;
            var mError: integer;

            procedure callCallbackMethod;

        public
            procedure setData(callbackObject: pCustomfunctionCallbackObject);

     end; 
```

现在我将那个线程称为：

```
procedure classname.method(param :pCustomParam; callId: String; error: integer; callback: ICustomfunctionCallback);
var callbackObject: ^CustomfunctionCallbackObject;
var callbackThread: CustomfunctionCallbackThread;  
begin
  callbackObject.param:= param;
  callbackObject.error:= error;  
  callbackObject.callId:= callId; 
  callbackObject.callbackMethod:= callback; 

  callbackThread:= CustomfunctionCallbackThread.Create(true);
  callbackThread.setData(callbackObject);
  callbackThread.FreeOnTerminate:= true;
  callbackThread.Start;
end; 
```

setData 函数如下所示：

```
procedure CustomfunctionCallbackThread.setData(callbackObject: pCustomfunctionCallbackObject);
begin
    mCallId:=callbackObject.callId;
    mParam:=callbackObject.param;
    mError:=callbackObject.error;
    mCallbackMethod:=callbackObject.callbackMethod;
end; 
```

我的执行功能看起来像：

```
procedure CustomfunctionCallbackThread.Execute;
begin
    mCallbackMethod.callCustomfunctionCallback(mParam, mCallId, mError);
end; 
```

现在，回调方法（接口）如下所示：

```
procedure CustomfunctionCallback.callCustomfunctionCallback(param: pCustomParam; callId: String; error: integer);
var receivedCustomfunctionCallback: string;
begin
  receivedCustomfunctionCallback:= 'CustomfunctionCallback received: Param - ' +
    PAnsiChar(param^.getKey(0)) + ' | Value - ' + PAnsiChar(param^.getValue(0));

  Form_PAis.Utf8Convert(receivedCustomfunctionCallback);
  Dispose(param);
end; 
```

该函数按应有的方式运行，但之后将自动退出调试模式。

如果它看起来像这样：

```
procedure CustomfunctionCallback.callCustomfunctionCallback(param: pCustomParam; callId: String; error: integer);
var receivedCustomfunctionCallback: string;
begin
  receivedCustomfunctionCallback:= 'CustomfunctionCallback received: Param - ' +
    PAnsiChar(param^.getKey(0)) + ' | Value - ' + PAnsiChar(param^.getValue(0));

  Form_PAis.output.Append(receivedCustomfunctionCallback);
  Dispose(param);
end; 
```

它会崩溃（不退出）

```
Form_PAis.output.Append(receivedCustomfunctionCallback); 
```

你有一个想法，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:49:04.303

逃脱线程进程的异常将导致整个进程被关闭。在您的 threadproc（执行方法）中放置一个异常处理程序以捕获所有异常。像这样的东西：

```
procedure CustomfunctionCallbackThread.Execute;
begin
  try
    mCallbackMethod.callCustomfunctionCallback(mParam, mCallId, mError);
  except
    on e: Exception do
    begin
      // output or log this error somewhere.
    end; 
  end;
end; 
```

上面的代码至少应该有助于防止整个过程崩溃。您仍然需要查找并修复导致异常开始的原因。

在您的回调函数中设置断点，在可疑的 Form_PAis.output... 行上或之前。运行应用程序，直到它在断点处停止。在调试器中，使用监视窗口或检查器检查所涉及的变量和属性的值。Form_PA 是否为空？Form_PAis.output 是否为空？之前也要检查语句的变量，因为归因于异常的行号有时会超出实际原因的一行。

# c# - 如何将 c# 代码中的回调函数传递给 C++ CLR 中的函数？

> ID：15503726
> 
> 赞同：0
> 
> 时间：2013-03-19T15:31:44.640
> 
> 标签：c#, c++, callback, clr, unmanaged

如何将 c# 代码中的回调函数传递给 C++ CLR 中的函数？如果我在 c# 中的代码对我的代码不可见时向回调函数添加一个参数

```
//c++ clr
typedef int (__stdcall * Callback)(int*, int,int);

bool Init() //<-- OK
{
}

bool Init(Callback cb)//<-- Init is not visible to my code in c#
{

} 
```

我打算从另一个线程调用这个回调。我有非托管 DLL 回调的经验，但对于 CLR 不明白该怎么做。

# java - 按价值排序地图？

> ID：15503730
> 
> 赞同：2
> 
> 时间：2013-03-19T15:31:55.687
> 
> 标签：java

如果我有这样的地图：

```
Map<Fruit, Double> multiMap = new HashMap<Fruit, Double>(); 
```

有没有办法让我对 Double 值进行排序，同时仍然保持 Double 值链接到相应的 Fruit 对象？

最初我正在考虑做这样的事情：

```
public ArrayList<Double> sortAllValues() {
    ArrayList<Double> allEntries = new ArrayList<Double>();

    for (Entry<Fruit, Double> entry : multiMap.entrySet())
        allEntries.add(entry.getValue());
    }
return Collections.sort(allEntries);
} 
```

但如果我这样做，我会失去 Fruit 和 Double 值之间的联系......有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:55:04.570

考虑以下：

```
class ValuedFruit implements Comparable<ValuedFruit> {
    private Fruit fruit;
    private double value;

    @Override
    public int compareTo(ValuedFruit o) {
        return (value < o.value) ? -1 : ((value > o.value) ? 1 : 0);
    }
}
List<ValuedFruit> fruits = new ArrayList<ValuedFruit>();
void sort(List<ValuedFruit> fruits){
    Collections.sort(fruits);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:38:41.157

您不可能根据值维护映射条目（键，值）的顺序，但可以基于带有 的键`TreeMap<k,v>`。

> TreeMap 是根据其键的自然顺序排序的，或者是在地图创建时提供的 Comparator 排序的，具体取决于使用的构造函数。此实现为 containsKey、get、put 和 remove 操作提供有保证的 log(n) 时间成本。

你可以做的是更新你的代码 -

```
public ArrayList<Double> sortAllValues() {    
     return Collections.sort(multiMap.values());
} 
```

它将停止不必要的迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:47:02.167

您只有与每个 Fruit 对象关联的单个双精度值。如果是这种情况，那么排序没有任何意义。如果您有多个与单个 Fruit 对象关联的双精度值，则将地图的结构更改为如下所示：

```
Map<Fruit, Set<Double>> multiMap = new HashMap<Fruit, Set<Double>>(); 
```

您可以使用 TreeSet 来保持值排序。

# java - 计算石头，纸，剪刀获胜的次数

> ID：15503732
> 
> 赞同：0
> 
> 时间：2013-03-19T15:31:59.753
> 
> 标签：java, count

我有点不知道如何创建一个文件，其中将显示你赢得松散或平局的次数。喜欢：

![](../Images/c4400e4fb22e39698b70ab65e5db25ef.png)

```
| Wins:  | 234 |
| Looses:| 234 |
| Draws: | 434 | 
```

意思是，如果我和一篇新闻报纸赢得了答案，则获胜次数加 1……等等……

```
| Wins:  | 235 |
| Looses:| 234 |
| Draws: | 434 |

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
public class gui extends JFrame implements ActionListener
{
    public JLabel JWoL,JWoLPlayer,JWoLPC,JNumWin,JNumLose,JNumTie;
    public static void main(String[] args)
    {
        gui theWindow = new gui();
        theWindow.show();
    }
    public gui()
    {
        Button butRock = new Button("Rock");
        butRock.addActionListener(this);
        Button butPaper = new Button("Paper");
        butPaper.addActionListener(this);
        Button butScissors = new Button("Scissors");
        butScissors.addActionListener(this);

        JWoLPlayer = new JLabel();
        JWoLPC = new JLabel();
        JWoL= new JLabel();

        JLabel rpsPlayer= new JLabel("Your Choice:");
        JLabel rpsComputer= new JLabel("Computers Choice:");
        setTitle("| RoPaS GAME |");

        JPanel ButtPan=new JPanel();
        ButtPan.setLayout(new GridLayout(1,3));
        ButtPan.add(butRock);
        ButtPan.add(butPaper);
        ButtPan.add(butScissors);

        JPanel LabelsPan=new JPanel();
        LabelsPan.setLayout(new GridLayout(7,1));
        LabelsPan.add(rpsPlayer);
        LabelsPan.add(JWoLPlayer);
        LabelsPan.add(rpsComputer);
        LabelsPan.add(JWoLPC);

        JPanel WLPan=new JPanel();
        WLPan.setLayout(new BorderLayout());
        WLPan.add(JWoL,"Center");

        JPanel TwoPanesN1=new JPanel();
        TwoPanesN1.setLayout(new BorderLayout());
        TwoPanesN1.add(LabelsPan,"West");
        TwoPanesN1.add(WLPan,"East");
        getContentPane().setLayout(new GridLayout(2,1));
        getContentPane().add(ButtPan);
        getContentPane().add(TwoPanesN1);

        Font fontDisplay = new Font("Arial", Font.PLAIN, 22);
        JWoL.setFont(fontDisplay);
        setSize(400,200);
        setVisible(true);
        setResizable(false);

        addWindowListener(new WindowAdapter() {public void windowClosing(WindowEvent ev){System.exit(0);}});
    }

    public void Play(String PlayerChoice)
    {
        String PCchoice=PCansw();
        JWoLPC.setText(PCchoice);

        if(PlayerChoice.equals(PCchoice))
            JWoL.setText(" Tie |");

        else if(PlayerChoice.equals("Rock"))
            if(PCchoice.equals("Paper"))
                JWoL.setText(" You Lose |");
            else
                JWoL.setText(" You Win |");

        else if(PlayerChoice.equals("Paper"))
            if(PCchoice.equals("Scissors"))
                JWoL.setText(" You Lose |");
            else
                JWoL.setText(" You Win |");

        else if(PlayerChoice.equals("Scissors"))
            if(PCchoice.equals("Rock"))
                JWoL.setText(" You Lose |");
            else
                JWoL.setText(" You Win |");

    }
    public String PCansw()
    {
        String rpsPC2="";
        int rpsPC=(int)(Math.random( )*3)+1;
        if(rpsPC==1)
            rpsPC2= "Rock";
        else if(rpsPC==2)
            rpsPC2= "Paper";
        else if(rpsPC==3)
            rpsPC2= "Scissors";
        return rpsPC2;
    }
    public void actionPerformed(ActionEvent e)
    {
        if(e.getActionCommand().equals("Exit"))
            System.exit(0);
        else
        {
            JWoLPlayer.setText(e.getActionCommand());
            Play(e.getActionCommand());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:38:23.543

添加全局变量：

```
public class gui extends JFrame implements ActionListener
{
  int wins = 0, losses = 0, draws = 0;
  ... 
```

替换`JWoL.setText(" You Lose |");`为`recordLoss();`并创建一个函数：

```
private void recordLoss()
{
  JWoL.setText(" You Lose |");
  losses++;
  JNumLose.setText(""+losses);
} 
```

其他人也一样。

以上可能不是您想要的或在程序其余部分的上下文中输出敏感数据，但希望能给您足够的指导。

**但我更喜欢这样的东西：（**可能`enum`更正确，但我觉得它在 Java 中很乱）

```
public class gui extends JFrame implements ActionListener
{
  static final int WINS = 0, LOSSES = 1, DRAWS = 2;
  int[] counts = new int[3];
  String[] strings = {" You Win |", " You Lose |", " Tie |"};
  // this MUST be set up in the constructor, not here!
  JLabel[] labels = {JNumWin, JNumLose, JNumTie};
  ... 
```

替换`JWoL.setText(" You Lose |");`为`record(LOSS);`和其他的相同，并且只有1个功能：

```
private void record(int type)
{
  JWoL.setText(strings[type]);
  counts[type]++;
  labels[type].setText(""+counts[type]);
} 
```

# spring - 数据库查询验证不起作用后

> ID：15503733
> 
> 赞同：0
> 
> 时间：2013-03-19T15:32:00.323
> 
> 标签：spring, spring-mvc

有人可以告诉我这个验证哪里出错了，它不起作用。

```
@RequestMapping(value="/users", method = RequestMethod.POST)
public String loginForm(@ModelAttribute("users") Users users,
        @RequestParam("username") String username,
        @RequestParam("password") String password,
        Model model, 
        BindingResult result,Object obj, Errors errors,
        final RedirectAttributes redirectAttributes) throws Exception{

    if (result.hasErrors()) {
        return "loginForm";
    }
    Users user = pos.varifyUserNameAndPassword(username, password);
    if (! user.getUsername().equals(username)) {
         return "loginForm";
    }
    if (! user.getPassword().equals(password)){
        return "loginForm";
    }       
    model.addAttribute("users", users);
    model.addAttribute("categoryList",pos.listCategory());
    redirectAttributes.addFlashAttribute("message2", "Welcome " + username);
    return "redirect:/categories";
} 
```

谢谢

# java - 替代使用 LinkedQueue？

> ID：15503734
> 
> 赞同：2
> 
> 时间：2013-03-19T15:32:03.227
> 
> 标签：java, concurrency, queue

我想知道哪个是使用`EDU.oswego.cs.dl.util.concurrent.LinkedQueue`.

在以下情况下：

```
public class testQueue extends LinkedQueue implements TestInterface {

public void putTestObject (TestObject to) {
    put(to);
} 
```

我应该使用`LinkedBlockingQueue`还是`LinkedTransferQueue`？

我只使用`put()`,`take()`和`isEmpty()`方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:48:48.357

`TransferQueue`(which extends `BlockingQueue`) 提供了额外的操作`transfer`。如果你只使用`put`,`take`和`isEmpty`，那么使用 a 就足够了`BlockingQueue`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:49:55.563

`LinkedBlockingQueue`会好的。由于您没有使用任何传输机制，LinkedQueue 与 LinkedBlockingQueue 非常相似。唯一明显的区别是 LinkedQueue 使用 1 个锁，而 LBQ 使用 2 个。

# sql - OLE 和 Access 的语法有区别吗

> ID：15503736
> 
> 赞同：1
> 
> 时间：2013-03-19T15:32:06.023
> 
> 标签：sql, vb.net, ms-access, oledb, oledbcommand

今天早上我遇到了一个我在任何地方都找不到答案的问题，所以现在我只是问那些可能比我更有知识的人；）。所以这就是问题所在，当我在 MS Access 中执行某个查询时，我得到了我期望收到的行，那里没有问题。但是，当我在 OleDbCommand 对象中运行完全相同的命令（复制粘贴）时，它不会返回任何内容。我的数据表是空的。我将复制查询，以便您可能会发现我可能不知道的语法差异：

```
odbCommand = New OleDbCommand( _
    "SELECT IDTemps, NomEmploye, HreAllouees, HreReelles, TauxHoraire, " & _
    " Description, NoProjet_Short, NoJob, Type FROM TableA " & _
    " WHERE NoProjet_Short = '13015' " & _
    " AND Type = 'DessinE' ", odbConnection)

    dbAdapter = New OleDbDataAdapter(odbCommand)
    odbConnection.Open()
    dbAdapter.Fill(dtTable) 
```

注意：这是代码的核心，没有贴错误管理（由于我没有错误，我的DataTable只是空的，不应该是）。

谢谢西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:17:43.270

好吧，经过一整天的测试，大量不同的数据、表配置、查询中的许多变化，我终于找到了问题的答案。史蒂夫通过向我展示了通往圣杯的路径：该死的连接字符串；）在使用实际数据库进行测试时帮助了我很多。

我的连接字符串实际上很好，但我有很多，而且我在我的 VB.NET 应用程序中指向的数据库不是我使用 MS Access 修改的那个。

最后一句话：总是仔细检查ConnectionString（和史蒂夫）:)

# ios - 横向但纵向框架值？

> ID：15503737
> 
> 赞同：8
> 
> 时间：2013-03-19T15:32:06.460
> 
> 标签：ios, objective-c, frame

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我已将横向正确方向设置为可用的唯一方向，并且我对 viewController 视图有疑问。

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(deviceOrientationDidChange:)
                                                 name:UIDeviceOrientationDidChangeNotification
                                               object:nil];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != AVCaptureVideoOrientationLandscapeRight);
}

- (void)deviceOrientationDidChange:(NSNotification*)notification
{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if (orientation == AVCaptureVideoOrientationLandscapeLeft)
        NSLog(@"Orientation: Landscape Left");
    else if (orientation == AVCaptureVideoOrientationLandscapeRight)
        NSLog(@"Orientation: Landscape Right");
    NSLog(@"FRAME: %@", NSStringFromCGRect(self.view.frame));
} 
```

这是我得到的日志：

```
Orientation: Landscape Right
FRAME: {{0, 0}, {320, 568}}
Orientation: Landscape Right
FRAME: {{0, 0}, {320, 568}} 
```

我的问题是关于`{{0, 0}, {320, 568}}`：

**为什么我会得到这些值？**

我认为正确的值是`{{0, 0}, {568, 320}}`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:37:38.020

我相信框架矩形不会对方向变化做出反应。

编辑：我最初的解决方案对于您的需求来说过于复杂。如果您正确找到当前方向，那么如果您处于横向模式，则只需将矩形的宽度解释为高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:25:22.243

我添加了这个解决方案来展示框架和绑定会发生什么。

我添加了这三种方法：

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
        CGRect bounds = [view bounds];
        NSLog(@"FRAME: %@", NSStringFromCGRect(view.frame));
        NSLog(@"BOUNDS: %@", NSStringFromCGRect(bounds));
}

- (void)deviceOrientationDidChange:(NSNotification*)notification
{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if (orientation == AVCaptureVideoOrientationLandscapeLeft)
        NSLog(@"1\. Orientation: Landscape Left");
    else if (orientation == AVCaptureVideoOrientationLandscapeRight)
        NSLog(@"1\. Orientation: Landscape Right");
    NSLog(@"1\. FRAME: %@", NSStringFromCGRect(self.view.frame));
    NSLog(@"1\. BOUNDS: %@", NSStringFromCGRect(self.view.bounds));
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if (orientation == AVCaptureVideoOrientationLandscapeLeft)
        NSLog(@"2\. Orientation: Landscape Left");
    else if (orientation == AVCaptureVideoOrientationLandscapeRight)
        NSLog(@"2\. Orientation: Landscape Right");
    NSLog(@"2\. FRAME: %@", NSStringFromCGRect(self.view.frame));
    NSLog(@"2\. BOUNDS: %@", NSStringFromCGRect(self.view.bounds));
}

- (void)viewDidLayoutSubviews
{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if (orientation == AVCaptureVideoOrientationLandscapeLeft)
        NSLog(@"3\. Orientation: Landscape Left");
    else if (orientation == AVCaptureVideoOrientationLandscapeRight)
        NSLog(@"3\. Orientation: Landscape Right");
    NSLog(@"3\. FRAME: %@", NSStringFromCGRect(self.view.frame));
    NSLog(@"3\. BOUNDS: %@", NSStringFromCGRect(self.view.bounds));
} 
```

这就是我得到的：

```
FRAME: {{0, 0}, {320, 568}}
BOUNDS: {{0, 0}, {320, 568}}
3\. Orientation: Landscape Right
3\. FRAME: {{0, 0}, {320, 568}}
3\. BOUNDS: {{0, 0}, {568, 320}}
1\. Orientation: Landscape Right
1\. FRAME: {{0, 0}, {320, 568}}
1\. BOUNDS: {{0, 0}, {568, 320}}
1\. Orientation: Landscape Right
1\. FRAME: {{0, 0}, {320, 568}}
1\. BOUNDS: {{0, 0}, {568, 320}} 
```

绑定更改`viewDidLayoutSubviews:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-07T03:20:33.110

使用 self.view.bounds 而不是 self.view.frame

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T10:50:39.880

请更改您的 viewController

```
 SKScene * scene = [MyScene sceneWithSize:skView.bounds.size]; 
```

替换为

```
 SKScene * scene = [MyScene sceneWithSize:CGSizeMake(skView.frame.size.height, skView.frame.size.width)]; 
```

# node.js - node.js - 区别 websocket.io socket.io

> ID：15503747
> 
> 赞同：2
> 
> 时间：2013-03-19T15:32:29.970
> 
> 标签：node.js, websocket, socket.io

node.js 之间有什么区别：

websocket.io 和 socket.io

哪个更适合什么？

```
https://github.com/LearnBoost/websocket.io

http://socket.io/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:50:51.360

Websocket.io 使用与 socket.io 相同的引擎的一部分。Socket.io 具有后备功能，因此它不仅仅使用 websockets 将信息发送到不同的浏览器。这意味着与更多用户的更大兼容性。

两个项目都由同一个组/人维护，但是 websocket.io 已经有 9 个月左右没有积极开发了，再加上 node.js 自上次发布以来已经发布了 4 个版本。然而，Socket.io 正在积极维护中，我建议使用 socket.io 而不是另一个。

它们的底层技术是相同的——它们都使用名为 engine.io 的东西（同样是同一个人）。Websocket.io 只是一个精简版，它应该仍然可以工作。如果你想要一些非常轻量但没有后备支持的东西，那就去吧，但如果你想要积极维护的东西，那么 socket.io 是你最好的选择。

# jsf-2 - 如何创建一个 对于一系列数字

> ID：15503748
> 
> 赞同：1
> 
> 时间：2013-03-19T15:32:31.747
> 
> 标签：jsf-2, primefaces

我想在对话框中屏蔽输入文本字段，我使用的是 primefaces 3.5 SNAPSHOT。以下对我很有用，除了我想在掩码中包含数字 10。

```
 <p:dialog id="inputDlg" modal="true" widgetVar="inputDlgWV">
     <p:inputMask id="ageInput" mask="9" placeHolder=" " value="#{bean.age}"/>
  </p:dialog> 
```

我尝试使用**f:validateRegex**模式，它可以正确验证，但不会屏蔽输入，我的主要目标是屏蔽并只允许 0-10 的数字。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:37:02.280

根据Primefaces 组件所基于[的 jQuery 的 Masked Input Plugin](http://digitalbush.com/projects/masked-input-plugin/) ，该属性接受数字、字母、两者中的任一个、可选的用户输入以及任何其他预定义文本。`<p:inputMask>``mask``9``a``*``?`

在这种情况下，您想要的属性将是`mask="9?9"`. 当然，它将接受 0-99 范围内的数字。如果您想要一个严格的 0-10 范围，则需要为`keydown`事件绑定一个额外的处理程序，例如：

```
$(document).ready(function() {
    $("#input-mask").keydown(function(e) {
        var key = (e.keyCode ? e.keyCode : e.which);
        if (!((key == 46) || (key == 8))) {
            if ((key < 48) || (key > 57)) {
                event.preventDefault();
            } else {
                var s = $(this).val();
                var l = s.length;
                if((l >= 2) || ((l == 1) && !((s == '1') && (key == 48)))) {
                    event.preventDefault();
                }
            }
        }
    });
}); 
```

根据我的口味，这对用户来说不够友好，而我会选择在你的位置[`<p:spinner>`](http://www.primefaces.org/showcase/ui/input/spinner.xhtml)。

# objective-c - 在 scrollView 中延迟滚动

> ID：15503749
> 
> 赞同：2
> 
> 时间：2013-03-19T15:32:33.743
> 
> 标签：objective-c, ipad, uiscrollview, uikit

是否可以延迟滚动`UIScrollView`？我知道，它已经延迟了，但我想增加延迟的时间间隔。有没有办法在不覆盖`handlePan:`scrollView 的情况下做到这一点`panGestureRecognizer`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:50:27.513

你可以试试这个：

创建一个`DelayGestureRecognizer`类

```
#import <UIKit/UIGestureRecognizerSubclass.h>

@interface DelayGestureRecognizer : UIGestureRecognizer

@end

@implementation DelayGestureRecognizer

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];

    double delayInSeconds = 1.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        self.state = UIGestureRecognizerStateFailed;
    });
}

@end 
```

然后，当你设置你的`UIScrollView`：

```
DelayGestureRecognizer *delayGestureRecognizer = [DelayGestureRecognizer new];
[scrollView addGestureRecognizer:delayGestureRecognizer];
[scrollView.panGestureRecognizer requireGestureRecognizerToFail:delayGestureRecognizer]; 
```

`UIGestureRecognizer`（你明白了......实际上，使用计时器并在's方法中使计时器无效可能会更好`- reset`，以防手势识别器在一秒钟内被多次调用......）

# arrays - O(n) 中的 2 个键搜索算法

> ID：15503753
> 
> 赞同：0
> 
> 时间：2013-03-19T15:32:35.440
> 
> 标签：arrays, algorithm, sorting, complexity-theory

我必须找到一种算法来对 O(n) 复杂度的数组进行排序。该数组的长度为 n，具有两个不同的键。

例如java中的这个数组：

```
int[][] array = {{1,2},{2,1},{1,1}}; 
```

结果应该是

```
1 1
1 2
2 1 
```

我努力解决这个问题..

谁能帮助我？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:30:29.893

如果您的数据存储在[Trie](http://en.wikipedia.org/wiki/Trie)中，那么 DFT（深度优先遍历）将向您展示您的 trie 实际上是如何按定义进行基数排序的。

如果您已经构建了 Trie，并且所有子集具有相同数量的元素，则 trie 的叶子是按顺序排列的子集，其中叶子的深度是每个子集的元素数。

使用 Trie，你有 O(m) 其中 m = 子集的数量

或者您可以尝试基数排序，其中您有 Ω(n * m) 其中 n = 子集的大小

..希望这可以帮助

# codeigniter - Codeigniter：在 Windows XP 中显示错误为“无法选择指定的数据库：项目”

> ID：15503757
> 
> 赞同：7
> 
> 时间：2013-03-19T15:32:45.667
> 
> 标签：codeigniter, wamp, wampserver, easyphp, tankauth

我正在使用 Windows XP 并使用 EasyPHP 作为服务器。我已将 Codeigniter 与 TankAuth 集成。但是，当我尝试打开我的作业文件夹时，它显示如下错误：

```
Unable to select the specified database: project

Filename: C:\Program Files\EasyPHP-12.1\www\assignment\system\database\DB_driver.php

Line Number: 140 
```

我的数据库.php中的代码如下“

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = 'root123';
$db['default']['database'] = 'project';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

我检查了我的 database.php，在其中我的数据库名称为“项目”。

我尝试使用主机名作为“localhost”和“127.0.0.1”，但没有一个有效。

我已将默认控制器设置为“auth”，即 TankAuth 的默认控制器。

并在“auth”控制器的构造中初始化了“数据库”库。

刚才我使用 Wamp Server 尝试过同样的事情。但是，得到了同样的结果。

在某处我读到我应该尝试制作`$db['default']['pconnect']`和

`$db['default']['db_debug']`到`FALSE`. 但它没有用。

并且所有访问权限都已授予数据库“项目”。

有什么我应该尝试让它工作的吗？

提前致谢...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-03T05:44:10.480

我遇到了类似的问题，但不幸的是，任何网站上的答案都没有帮助。奇怪的是，我可以使用简单的 PHP 轻松连接到 MySQL，但在 CodeIgniter 中我收到了这条消息。

最后这解决了我的问题。打开`application/config/database.php`文件并更改以下行：

```
$db['default']['dbdriver'] = 'mysql'; 
```

到：

```
$db['default']['dbdriver'] = 'mysqli'; 
```

此转变为`mysqli`按日保存。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-19T19:39:14.913

该错误表明它已成功连接到您的数据库软件，但找不到名为`project`. 检查您的数据库连接并确保它们都正确 - 听起来您的数据库名称应该是`assignment`。

**编辑**：检查以确保您登录的数据库用户也有权访问指定的数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-28T01:11:40.677

也许这会在某个时候拯救某人——我使用的是 cPanel，它有一个特定的规则，即用户必须绑定到数据库才能访问它。我遇到了同样的错误，但是因为我没有权限，所以我无法访问它。

在 cPanel 中转到 MySQL 数据库，找到您的用户并将此用户添加到您的数据库中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T09:53:34.607

试试这个：只需刷新数据库软件。如果您使用的是 PHPMy Admin，请刷新页面并尝试加载您的 PHP 页面。或者如果您的数据库中有任何存储过程，这可能会导致问题。尝试删除存储过程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-11T04:22:43.610

```
Notice: SQL safe mode in effect – ignoring host/user/password information in
mysql_connect(): SQL safe mode in effect – ignoring host/user/password information in
This is caused due to your php.ini sql safe mode settings.
Login your php.ini file.
Go php.ini from apache and turn off sql.safe mode.

[SQL]
sql.safe_mode  = Off
Restart apache 
```

# git - `git pull` 和 `git fetch` 不会一致地解释参数：（设计）错误或（设计）功能？

> ID：15503763
> 
> 赞同：0
> 
> 时间：2013-03-19T15:32:59.437
> 
> 标签：git

[这个问题比典型的 SO 问题更“理论”，所以我觉得有一定的理由是有道理的。我遇到的困难之一`git`是我发现自己不断地做一些在我看来“应该起作用”但实际上却没有的事情。即使在`git`过去 10 个月左右的时间里几乎每天都使用它，并且比我用于工作的任何其他软件工具更深入地研究它，这仍然是正确的。这意味着，在内心深处，`git`对我来说根本没有意义。因此，这个问题的目的只是***为了理解*** `git`，并希望减少我认为“应该工作”与实际工作之间的不匹配。（顺便说一句，“阅读文档”不是解决方案；]

这个问题是我之前提出的问题的后续问题：[如何将 git pull <REMOTE> <BRANCH> 分解为 fetch + merge？](https://stackoverflow.com/questions/15484033). 特别是，我建议运行该问题中给出的示例脚本，并检查其输出。

`git pull`命令应该是 a和`git fetch`a的组合`git merge`。

因此，我对以下事实感到困惑，如果`<BRANCHNAME>`是当前分支，则运行

```
git pull --no-edit <REMOTENAME> <BRANCHNAME> 
```

更新跟踪分支`<REMOTENAME>/<BRANCHNAME>`¹，而

```
git fetch <REMOTENAME> <BRANCHNAME> 
```

保持`<REMOTENAME>/<BRANCHNAME>`不变，因此尝试将其合并`<BRANCHNAME>`通常是无操作的。

有什么办法可以理解这种明显的不一致吗？或者，为什么不`git fetch <REMOTENAME> <BRANCHNAME>`直接失败，或者至少给出警告？它是一个值得保留的常见用例吗？

简而言之，这种明显的不一致是界面设计的*bug*`git`，还是一个*特性*，如果是后者，它又是怎样一个特性呢？

编辑：澄清一下：这个问题与上述行为与其文档的一致性问题*无关*/*不关心。*这个问题试图确定的是`git pull`，`git fetch`在解释他们的论点时所遵循的约定的差异是***（设计）错误还是（设计）特性。***

[¹`<BRANCHNAME>`另外，它会在和 this updated之间执行任何必要的合并`<REMOTENAME>/<BRANCHNAME>`，或者至少它会开始此合并。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:38:51.753

这是我的看法。

### 参考规范

首先，让我们揭穿所谓的“refspec”是什么，因为将来会需要它。

refspec 代表“参考规范”。引用是指向提交或另一个引用的东西。一个分支是一个引用，一个标签是一个引用；`HEAD`是一个特殊的（所谓的“符号”）引用。让我们暂时忽略各种引用之间的区别。

通常将引用简称为“refs”。

refspec 具有以下形式：

```
[+]source[:destination] 
```

*   `source`指定要从中获取一系列提交的引用。
*   `destination`，如果指定，则指定对*更新*的引用，其中包含来自 的一系列提交`source`。
*   加号（如果包含）会*强制*更新发生，即使 指向的提交行`destination`未*完全包含*在 指向的提交行中`source`。

refspecs 用于获取和推送，在这些情况下源和目标 refs 的含义是相反的，显然：当我们获取时，源 refs 在远程 repo 中，而当我们推送时，源 refs 在我们的本地回购。

对于普通的 Git（我的意思是它的参考实现），refs 只是名称相对于其存储库根目录的文件（对于普通存储库，这是“.git”目录，对于裸存储库，这是存储库根目录）。

一些引用，例如`HEAD`(or `ORIG_HEAD`or `MERGE_HEAD`or `FETCH_HEAD`) 位于存储库的根目录中，而其他一些引用，例如分支和标签以及远程分支位于名为“refs”的目录中，它们在各自的子目录下进一步排序：

*   分支位于“refs/heads”子目录中。
*   标签位于“refs/tags”中。
*   远程分支位于其相应远程的“refs/remotes/<remote>”目录中。
*   注释在“参考/注释”中。
*   ...

因此，代表名为“master”的分支的 ref 的全名确实是“refs/heads/master”，从命名的远程存储库“origin”获取的名为“foo”的远程分支是“refs/remotes/origin/foo” ”。

Git 使用智能查找机制允许您在大多数情况下缩写 ref 名称，但是当您想要严格时存在任何歧义时，可能会使用完整（或“更完整”）名称。血淋淋的细节在[手册`git rev-parse`中](https://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html)。

（需要这些关于完整 ref 名称的解释来理解下面解释的*简单*调用是如何`git fetch`工作的。）

### 抓取

现在回到获取。

`git fetch`基本上有几种操作模式，具体取决于您提供给它的参数：

*   `git fetch <git_url>`在通过 访问的远程存储库中获取ref`HEAD`指向的任何内容`<git_url>`，获取其历史记录并将其提示提交的 SHA-1 名称写入`.git/FETCH_HEAD`文件。

    在裸存储库`HEAD`中，通常指向名为“master”的分支（尽管可能会更改）。在非裸（正常）存储库`HEAD`中，显然指向当前签出到工作树的内容。

*   `git fetch <git_url> <refspec> ...`使用指定的 refspecs 从远程存储库中获取（而不是`HEAD`），并且 - 对于那些包含“目标”部分的 refspecs，它还尝试使用获取的历史记录更新那些本地 refs。每个提取的 refspec 的 SHA-1 名称都会写入`.git/FETCH_HEAD`文件。

    展示：

    ```
    git fetch git://server/repo.git master devel test
    From git://server/repo.git
     * branch            master     -> FETCH_HEAD
     * branch            devel      -> FETCH_HEAD
     * branch            test       -> FETCH_HEAD 
    ```

    请注意，在获取提交时，没有更新本地引用。

    现在让我们以更复杂的方式来做：

    ```
    git fetch git://server/repo.git master devel:foo test:bar
    From git://server/repo.git
     * branch            master     -> FETCH_HEAD
     * [new branch]      devel      -> foo
     * [new branch]      test       -> bar 
    ```

    如您所见，`git fetch`创建了两个本地分支，“foo”和“bar”，而“master”只是被获取但没有用于在我们的本地 repo 中创建任何东西。所有三个远程引用的 SHA-1 名称仍然在`.git/FETCH_HEAD`文件中。

*   `git fetch <remote> <refspec> ...`-作为使用配置或自动创建`<remote>`的命名远程存储库- 行为与具有显式的表单完全相同，但从该命名远程的配置中获取要使用的 url。`git remote add``git clone``<git_url>``git fetch`

*   `git fetch <remote>`从该远程获取*所有*分支并尝试更新（或创建，如果它们不存在）该远程的所谓*远程分支*。

    这对于理解这个操作过程不是魔术至关重要。当您添加一个命名远程（或`git clone`为您创建一个）时，Git 会在您的存储库配置中添加几个描述该远程的变量，其中一个将`remote.<name>.fetch`是一个 refspec 参数，*如果*没有直接传递 refspec 则使用该参数`git fetch`（ ！）。

    现在，对于名为“origin”的远程，Git 将创建参数`remote.origin.fetch`设置为`+refs/heads/*:refs/remotes/origin/*`. 你可以去你当地的仓库自己看看：

    ```
    $ git config --get remote.origin.fetch
    +refs/heads/*:refs/remotes/origin/* 
    ```

*   “最神奇”很简单`git fetch`——它就像遥控器上面的呼叫被自动接听一样。

### 拉取（获取加合并）

将其拉出定义为“提取然后将提取的内容合并到当前签出的分支”。传递给`git pull`（或缺少）的 refspec 直接传递给`git fetch`，因此上述所有规则都适用。

为什么`git pull <remote> <branch>``git fetch 不更新匹配的远程分支？

要理解这个“奥秘”，请记住 Git 在远程分支及其*远程跟踪*分支的背后使用了某些方便的魔法（当 yo`git fetch origin`后面跟着时`git branch foo origin/foo`，“origin/foo”是一个远程分支和“foo”是一个远程跟踪分支，因为它跟踪相应的远程分支）。您应该记住的另一点是远程分支用于在上次获取时捕获其远程存储库中相应分支的状态。

现在假设您将远程跟踪分支推送到远程存储库中的同名分支（最常见的情况）。假设你这样做了：

```
$ git fetch origin
(this created the "origin/foo" branch)
$ git chekcout -b foo origin/foo
(this created a new local branch "foo" tracking "origin/foo")
$ git commit ...
$ git push origin foo 
```

在推送时，Git 注意到如果您*同时获取*匹配的远程分支*，*您将在其中获得与刚刚推送的相同的提交。所以它继续并使“origin/foo”指向同一个提交“foo”指向。

现在回到`git pull`...在您的情况下，`git pull`完成后，Git 注意到您刚刚使用从您在本地拥有远程分支的分支获得的提交更新了远程跟踪分支，因此它继续并更新此远程分支因为这是它最后一次看到的状态。

让我们回顾一下：

1.  “origin/foo”是一个远程分支，它捕获远程存储库“origin”中名为“foo”的分支的状态。
2.  “foo”是一个跟踪“origin/foo”的本地分支。
3.  你做

    ```
    git checkout foo
    git pull origin foo 
    ```

    Git 会更新你的 "foo" 分支，但这意味着 "foo" 现在至少有一个提交 "origin/foo" 会收到，如果你只是`git fetch origin`or的话`git push origin foo`，所以 Git 继续并更新 "origin/foo" 。

也就是说，在我看来，您的情况下远程分支的更新不是因为`git fetch ...`已运行，而是因为本地远程跟踪分支因合并而更新。现在有意义吗？

### 进一步阅读

我建议您只阅读存储库中的“.git/config”文件，以了解如何配置所有这些“远程内容”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:16:18.093

git-fetch 手册页说

> 获取的 ref 的 ref 名称及其对象名称存储在 .git/FETCH_HEAD 中。此信息留给 git merge 稍后完成的合并操作。

运行`git fetch origin master`会将获取的结果存储在`FETCH_HEAD`ref 中。您可以将其合并到您当前的分支中`git merge FETCH_HEAD`。

手册页还说

> 参数的格式`<refspec>`是可选的加号 +，后跟源 ref `<src>`，后跟冒号`:`，然后是目标 ref `<dst>`。
> 
> 获取匹配的远程引用，`<src>`如果`<dst>`不是空字符串，则使用 快速转发匹配它的本地引用`<src>`。

你可以告诉 git fetch 用`git fetch origin master:refs/remotes/origin/master`.

# angularjs - 在AngularJS中将指令插入HTML？

> ID：15503766
> 
> 赞同：5
> 
> 时间：2013-03-19T15:33:10.233
> 
> 标签：angularjs, angularjs-directive

我对 AngularJS 相当陌生，并试图以 Angular 的方式思考。
现在，我正在开发一个具有不同功能的应用程序，这些功能注册在一个名为`FeatureRegistry`. 从那里将它们取出并插入到侧边栏中`FeatureSelectionController`。通过单击一个特性，`startFeature()`应该调用相应特性的功能，然后将该特性添加到主视图中（但是这种 DOM 操作应该发生在哪里？）。

所以有我的问题。向 DOM 添加指令的最佳方式（角度方式）是什么，我不一定想使用 jQuery 来执行此操作（并且还想限制 $compile、$watch 等的使用）。

mainView 中的指令可以有一个独立的范围，因为功能执行的操作彼此独立（它们共享的数据被封装在 Angular 服务中）。

![这是一张图片](../Images/51d6310a0ab8b43bf43f8a772defbb24.png)

**插入指令的*角度方式是什么？***

我总是读到 DOM 操作应该只发生在指令中，但在文档和其他问题中我没有找到这样做的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:09:36.750

这是一个快速演示：[http ://plnkr.co/edit/eZTtRVTPb7k9kgS8woKh?p=preview](http://plnkr.co/edit/eZTtRVTPb7k9kgS8woKh?p=preview)

我不一定看到这里需要指令……除非列表中的功能、最大化功能和最小化功能之间有很多通用功能。

如果这三个列表之间确实有很多共同的功能，你可以这样做：

```
<feature ng-repeat="f in registry.all()" model="f" state="list">
<feature ng-repeat="f in registry.maximized()" model="f" state="open">
<feature ng-repeat="f in registry.minimized()" model="f" state="minimized"> 
```

然后在您的指令模板中，您可以拥有通用功能，然后根据使用的状态确定要拥有什么`ng-switch`或`ng-show`。

您需要帮助编写实际指令吗？

# javascript - _.indexOf 找不到我的数组的值

> ID：15503770
> 
> 赞同：0
> 
> 时间：2013-03-19T15:33:17.927
> 
> 标签：javascript, arrays, underscore.js

```
 <div class="login-info-panel">        
         <ul>
         <li class="home">Home</li>
         <li class="info">info</li>
        </ul>
       </div>       

            var myli = $('.login-info-panel > ul >li');
    var infoButton = $('li.info');
    console.log(_.indexOf(myli, infoButton)); 
```

使用 underscore.js 你会假设 li.info 在数组中，它会返回一个值 1（索引）。但相反我得到-1（这意味着它在我的数组中找不到。

我错过了一些明显的东西吗？

这是一个jsfiddle

[http://jsfiddle.net/Zuriel/UVqGH/](http://jsfiddle.net/Zuriel/UVqGH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:35:00.520

我不会以这种方式混合 jquery 和下划线。

```
var myli = $('.login-info-panel > ul >li');
var index = myli.index('li.info'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:34:50.547

您可以简单地使用：

```
var myli = $('.login-info-panel > ul >li');
var infoButton = $('li.info');
console.log(_.indexOf(myli, infoButton[0])); // 1 
```

我认为期望的行为是：

```
myli.filter(infoButton); // [jQuery Object] 
```

# c# - c#如何将信息添加到高分类

> ID：15503772
> 
> 赞同：2
> 
> 时间：2013-03-19T15:33:24.553
> 
> 标签：c#, .net, list, add

我目前正在尝试制作 HighScore 课程，但不确定如何正确完成。这是到目前为止的代码：

```
class HSItem
{
    private string name;
    private int points;

    //Constructor Method
    public HSItem(string name, int points)
    {
        this.name = name;
        this.points = points;
    }

    //Property for name
    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    //Property for points
    public int Points
    {
        get { return points; }
        set { points = value; }
    }
} 
```

二等：

```
public class HighScore
{
    //Method HighScore constructor for list cap
    public HighScore(int maxInList)
    {
        List<int> topHS = new List<int>(maxInList);
    }

    //Method for Add
    public void Add(string name, int points)
    {
        List<HSItem> hs = new List<HSItem>();
        hs.Add(new HSItem { Name = name, Points = points });
    }
} 
```

但是我得到了这个错误`'HighScore.HSItem' does not contain a constructor that takes 0 arguments`，这让我一无所知。

构造`Highscore`函数是接受一个数字来确定列表可以拥有的最大空间，`Add()`方法是向第一个类添加新信息。

我很感激帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:35:53.080

您没有将任何内容传递给构造函数。您可以执行以下操作：

```
List<HSItem> hs = new List<HSItem>();
hs.Add(new HSItem("Darren", 1000)); 
```

或者定义一个接受 0 个参数的构造函数：

```
public HSItem()
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:36:23.553

您需要替换此行

```
hs.Add(new HSItem { Name = name, Points = points }); 
```

通过以下一个

```
hs.Add(new HSItem (name,points)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T15:37:00.967

你有一个构造函数，但你没有使用它。如果一个类有一个构造函数，那么它会删除默认的无参数构造函数，这意味着你不能使用`new HSItem()`，因为没有一个构造函数不再接受 0 参数。

改变

```
hs.Add(new HSItem { Name = name, Points = points }); 
```

至

```
hs.Add(new HSItem(name,points)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T10:39:16.400

您将构造函数调用语法与属性初始值设定项语法混淆了。

正如一些人指出的那样，调用构造函数的方法是：

```
new HSItem(name, points); 
```

你写的代码：

```
new HSItem { Name = name, Points = points }; 
```

真的只是一个方便的简写：

```
var item = new HSItem();
item.Name = name;
item.Points = points; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T15:36:38.893

如果您创建一个没有构造函数的类，该类将自动获得一个没有参数的构造函数。但是，如果您定义一个带参数的构造函数，则不会自动添加没有参数的构造函数。如果你想要一个没有参数的构造函数，你应该自己添加它。或者，我建议您删除无论如何都不使用的构造函数：

删除这段代码，一切都会好起来的：

```
//Constructor Method
public HSItem(string name, int points)
{
    this.name = name;
    this.points = points;
} 
```

# php - 根据变量中 ID 的顺序获取 MySQL 结果

> ID：15503778
> 
> 赞同：2
> 
> 时间：2013-03-19T15:33:43.093
> 
> 标签：php, mysql

我有一个 PHP 变量，它包含一个如下所示的 JSON 字符串，每个数字都是`id`来自`module_category`MySQL 表

```
$json_order = '["8","2","7","3","1","6","4","5"]'; 
```

所以使用`$json_order`我需要迭代下表，但在其中的 Order 中返回结果`$json_order`。

```
SELECT id, name
FROM  `module_category` 
```

谁能告诉我这样做的好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:40:33.800

您可以使用[**FIELD()**](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)函数，该函数用于自定义排序，正是您需要的，您可以像这样使用它：

```
//Convert $json_order into '8','2','7','3','1','6','4','5' to insert it in sql
$order = str_replace(array('"','[',']'), array("'",'',''), $json_order);
$sql = 'SELECT id, name
FROM  `module_category` ORDER BY FIELD(id, '.$order.' )'; 
```

**更新：**对不起，我上面的代码有一个错误，现在已经更正了:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:40:41.437

获取ID列表并雕刻以下内容

```
SELECT id,name FROM `module_category` ORDER BY
FIELD(id,8,2,7,3,1,6,4,5); 
```

[FIELD 函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_field)返回每个值的索引位置。你用它来订购。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T15:50:27.153

您应该按如下方式使用 FIELD：

```
$order = trim('["8","2","7","3","1","6","4","5"]', '[]');

$query = "SELECT id, name FROM  `module_category`
          ORDER BY IF (FIELD(id, $order), 0, id), FIELD(id, $order)"; 
```

请注意，在这种情况下使用 IF 很重要，否则`FIELD`将返回`0`所有不在列表中的结果，使它们出现在顶部。我们只是颠倒这种行为：现在对于 id 在我们返回的列表中的每一行`0`- 这使这些行位于最顶层，然后它们按`id`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T15:38:27.380

这是我的解决方案；

```
 $json_order = '["8","2","7","3","1","6","4","5"]';
        $decoded = json_decode($json_order);
        echo 'SELECT id, name FROM `table` WHERE `id` IN ('.implode(',', $decoded).') ORDER BY FIELD(id,'.implode(',', $decoded).');'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T15:40:41.157

```
$json_order = '["8","2","7","3","1","6","4","5"]';
$a=json_decode($json_order,"true");
$sql="SELECT id, name
FROM  `module_category`
ORDER BY FIELD (id,".implode(",",$a).")"; 
```

所以基本上你把 JSON 转换成一个数组，然后用逗号分隔它。然后使用 SQl 的 Field 操作，您可以按顺序获取所有内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T15:45:00.717

试试这个：

```
$sql=SELECT id, name FROM  `module_category`
 ORDER BY FIELD(id, 8,2,7,3,1,6,4,5), json_order; 
```

阅读[http://www.electrictoolbox.com/mysql-order-specific-field-values/](http://www.electrictoolbox.com/mysql-order-specific-field-values/) 和[http://lists.mysql.com/mysql/209784](http://lists.mysql.com/mysql/209784)

# javascript - 在画布上播放视频不会让我点击控件（暂停、播放、声音等）

> ID：15503781
> 
> 赞同：0
> 
> 时间：2013-03-19T15:33:50.840
> 
> 标签：javascript, html, animation, canvas

在画布上播放视频不会让我点击控件（暂停、播放、声音等）

如何在保持相同功能和动画的同时使控件易于访问。动画工作正常等和功能。

代码：

```
<style>
               #cvs {
                   position: absolute; 
                   top: 0px;
                   left: 0px;
               }
           </style>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.js'></script>
        <script type="text/javascript">
            var context;
            var text = "";
            var textDirection ="";

            $(function()
            {
                context = document.getElementById("cvs").getContext("2d");            
                setInterval("animate()", 360);

                textDirection ="right";
                textXpos = 5;
                text = "This is my video..";    
            });  

            function animate() {            
                // Clear screen
                context.clearRect(0, 0, 500, 500);
                context.globalAlpha = 1;
            //context.fillStyle = '#fff';
            //  context.fillRect(0, 0, 500, 500);    

                var metrics = context.measureText(text);
                var textWidth = metrics.width;
                if (textDirection == "right") {
                    textXpos += 10;

                    if (textXpos > 500 - textWidth) {
                        textDirection = "left";
                    }
                }
                else {
                    textXpos -= 10;

                    if (textXpos < 10) {
                        textDirection = "right";
                    }                    
                }

                context.font = '20px _sans';
                context.fillStyle = 'white';
                context.textBaseline = 'top';
                context.fillText  ( text, textXpos, 440);    
              }  
              </script>
          </head>
          <body> 
             <div id="page">
        <video id="video" autoplay loop>
          <source id='mp4'
            src="http://media.w3.org/2010/05/sintel/trailer.mp4"
            type='video/mp4'>
          <source id='webm'
            src="http://media.w3.org/2010/05/sintel/trailer.webm"
            type='video/webm'>
          <source id='ogv'
            src="http://media.w3.org/2010/05/sintel/trailer.ogv"
            type='video/ogg'>
          <p>Your user agent does not support the HTML5 Video element.</p>
        </video>
                <canvas id="cvs" width="500" height="500">
                   Your browser does not support the HTML 5 Canvas. 
                </canvas>
             </div>
          </body>
       </html> 
```

jsfiddle：http: [//jsfiddle.net/jBHCN/14/](http://jsfiddle.net/jBHCN/14/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:58:34.247

解决方案是将控件放在画布上。

在画布上制作控制影片的自定义控件。

请参见此处：[如何使用 javascript 控制 HTML5 视频？](https://stackoverflow.com/questions/3988144/how-to-control-html5-video-with-javascript)

在这里：[http ://www.broken-links.com/2009/10/06/building-html5-video-controls-with-javascript/](http://www.broken-links.com/2009/10/06/building-html5-video-controls-with-javascript/)

# c# - 异步/等待的架构

> ID：15503782
> 
> 赞同：59
> 
> 时间：2013-03-19T15:33:53.600
> 
> 标签：c#, .net, asynchronous, async-await, c#-5.0

如果您在架构中的较低级别使用 async/await，是否有必要将 async/await 调用一直“冒泡”，是否效率低下，因为您基本上是为每一层创建一个新线程（异步调用每一层都有一个异步函数，或者它并不重要，只是取决于你的偏好？

我正在使用 EF 6.0-alpha3，以便我可以在 EF 中使用异步方法。

我的存储库是这样的：

```
public class EntityRepository<E> : IRepository<E> where E : class
{
    public async virtual Task Save()
    {
        await context.SaveChangesAsync();
    }
} 
```

现在我的业务层是这样的：

```
public abstract class ApplicationBCBase<E> : IEntityBC<E>
{
    public async virtual Task Save()
    {
        await repository.Save();
    }
} 
```

当然，我在 UI 中的方法在调用时也会遵循相同的模式。

这是：

1.  必要的
2.  对业绩不利
3.  只是偏好问题

即使这没有在单独的层/项目中使用，如果我在同一个类中调用嵌套方法，同样的问题也适用：

```
 private async Task<string> Dosomething1()
    {
        //other stuff 
        ...
        return await Dosomething2();
    }
    private async Task<string> Dosomething2()
    {
        //other stuff 
        ...
        return await Dosomething3();
    }
    private async Task<string> Dosomething3()
    {
        //other stuff 
        ...
        return await Task.Run(() => "");
    } 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-19T15:37:04.700

> 如果您在架构中的较低级别使用 async/await，是否有必要将 async/await 调用一直“冒泡”，是否效率低下，因为您基本上是为每一层创建一个新线程（异步调用每一层都有一个异步函数，或者它并不重要，只是取决于你的偏好？

这个问题暗示了几个误解。

首先，您*不会*在每次调用异步函数时都创建一个新线程。

其次，您不需要声明异步方法，因为您正在调用异步函数。如果您对已经返回的任务感到满意，只需从*没有*async 修饰符的方法中返回它：

```
public class EntityRepository<E> : IRepository<E> where E : class
{
    public virtual Task Save()
    {
        return context.SaveChangesAsync();
    }
}

public abstract class ApplicationBCBase<E> : IEntityBC<E>
{
    public virtual Task Save()
    {
        return repository.Save();
    }
} 
```

这*将*稍微更有效，因为它不涉及出于很少的原因创建状态机 - 但更重要的是，它更简单。

任何有一个`await`表达式等待 a`Task`的异步方法`Task<T>`，就在方法的末尾没有进一步处理，最好不使用 async/await 来编写。所以这：

```
public async Task<string> Foo()
{
    var bar = new Bar();
    bar.Baz();
    return await bar.Quux();
} 
```

最好写成：

```
public Task<string> Foo()
{
    var bar = new Bar();
    bar.Baz();
    return bar.Quux();
} 
```

（理论上，正在创建的任务之间存在非常细微的差异，因此调用者可以添加延续，但在绝大多数情况下，您不会注意到任何差异。）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-19T15:36:22.417

> 是否效率低下，因为您基本上是为每一层创建一个新线程（为每一层异步调用一个异步函数，或者这并不重要，只是取决于您的偏好？

不，异步方法不一定使用新线程。在这种情况下，由于底层的异步方法调用是一个 IO 绑定方法，因此确实不应该创建新线程。

> 这是：

```
1\. necessary 
```

如果要保持操作异步，则有必要“冒泡”异步调用。然而，这确实是首选，因为它允许您充分利用异步方法，包括在整个堆栈中将它们组合在一起。

```
2\. negative on performance 
```

不，正如我所提到的，这不会创建新线程。有一些开销，但其中大部分可以最小化（见下文）。

```
3\. just a matter of preference 
```

如果您想保持异步，则不是。您需要这样做以使堆栈中的事物保持异步。

现在，您可以采取一些措施来提高性能。这里。如果您只是包装一个异步方法，则不需要使用语言功能 - 只需返回`Task`：

```
public virtual Task Save()
{
    return repository.Save();
} 
```

该`repository.Save()`方法已经返回 a `Task`- 您无需等待它，只需将其包装回 a 中即可`Task`。这将使该方法更加有效。

您还可以使用“低级”异步方法[`ConfigureAwait`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.configureawait.aspx)来防止它们需要调用同步上下文：

```
private async Task<string> Dosomething2()
{
    //other stuff 
    ...
    return await Dosomething3().ConfigureAwait(false);
} 
```

`await` *如果您不需要担心调用上下文，*这将大大减少每个涉及的开销。这通常是处理“库”代码时的最佳选择，因为“外部”`await`将捕获 UI 的上下文。库的“内部”工作通常不关心同步上下文，因此最好不要捕获它。

最后，我会提醒您不要举一个例子：

```
private async Task<string> Dosomething3()
{
    //other stuff 
    ...
    // Potentially a bad idea!
    return await Task.Run(() => "");
} 
```

如果您正在创建一个异步方法，该方法在内部`Task.Run`用于围绕本身不是异步的事物“创建异步”，那么您实际上是将同步代码包装到异步方法中。这*将*使用 ThreadPool 线程，但可以“隐藏”它这样做的事实，从而有效地使 API 产生误导。通常最好将调用留给`Task.Run`您的最高级别调用，并让底层方法保持同步，除非它们真正能够利用异步 IO 或除`Task.Run`. （这并不*总是*正确的，但是“异步”代码通过 包裹在同步代码上`Task.Run`，然后通过 async/await 返回通常是设计有缺陷的标志。）

# c++ - 属性的类型随 C++ 中的继承而改变

> ID：15503790
> 
> 赞同：0
> 
> 时间：2013-03-19T15:34:18.937
> 
> 标签：c++, inheritance

我有一个 A 类，处理特定类型的对象（那里的 A 实例）。我想要一个 B 类，它大部分（即并非所有方法都相同）具有相同的行为，但它正在处理不同的对象类（那里的 B）。

这是我尝试过的：

```
#include <iostream>
#include <vector>

class A
{
public:
    virtual void perform() { data.push_back(A()); };
    std::vector<A> data;
};

class B : protected A
{
public:
    B() : A() {}
    void test() { perform(); }
    std::vector<B> data;
};

int main()
{
    B b;
    b.test();
    std::cout << b.data.size() << std::endl;
}

// output: 0
// I expected: 1 
```

我期望`std::vector<B>`在插入期间使用而不是`std::vector<A>`，因为 B 是 B 的子类。

我错过了什么？有没有一种方法可以确保 A 类中定义的每个方法在 B 类中都按预期工作？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:55:51.320

C++ 中基于继承的多态性只处理*函数*，而不*处理数据元素*。也就是说，更改对象的类型只会影响调用哪个函数，而不影响使用哪个数据元素。

此外，您不能将类型的对象分配给's`A`的容器。`B`忽略多态性，你不能这样做：

```
std::vector<B> data;
data.push_back(A()); 
```

那是因为`B`继承自`A`，而不是相反。

第三，无论如何分配都必须使用*指针*，而不是直接的对象。因此，您必须执行以下操作：

```
std::vector<A*> data;
data.push_back(new B); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:39:41.110

当您需要不同类型的相同行为时，请使用模板：

```
template <typename Element>
class Container
{
public:
    void perform() { data.push_back(Element()); };
    std::vector<Element> data;
};

int main(){
    Container<A> a;
    Container<B> b;
    a.perform();
    b.perform();
    std::cout << a.data.size() << std::endl;
    std::cout << b.data.size() << std::endl;
} 
```

**免责声明**：未经编译测试

# android - 用于android的window azure移动服务根据不同的值获取多条记录

> ID：15503792
> 
> 赞同：1
> 
> 时间：2013-03-19T15:34:25.257
> 
> 标签：android, azure-storage, azure-table-storage, azure-mobile-services

我正在使用 windows azure 移动服务在我的 android 应用程序中创建数据库。我已经给了第三方库来访问表中的所有细节。但是这些库没有像数据库的 sql 语言一样的方法，因此我必须为此进行非常复杂的查询。我遇到的问题是，我必须根据所选列的不同值获取多条记录，例如有一个名为“id”的列，我必须获取 id 1、3、7 和 10 的记录。有没有人有这个第三方库的经验。如果有人有一些熟悉的经验，请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T18:40:45.027

适用于 Azure 移动服务的 Android SDK 具有一种查询语言，您可以在其中进行类似 sql 的查询。对于您的具体示例，这是您的操作方式。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    try {
        mClient = new MobileServiceClient(
                  "https://YOUR_AZURE_MOBILE_SERVICE.azure-mobile.net/",
                  "YOUR_APPLICATION_KEY",
                  this
            );
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Button btn = (Button)findViewById(R.id.button1);
    final TextView tv = (TextView)findViewById(R.id.textView1);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            MobileServiceTable<Person> table = mClient.getTable("Test", Person.class);
            table.where(
                field("id").eq(1)
                .or(field("id").eq(3))
                .or(field("id").eq(7))
                .execute(new TableQueryCallback<Person>() {

                @Override
                public void onCompleted(List<Person> result, int count,
                        Exception exception, ServiceFilterResponse response) {

                    if (exception != null) {
                        tv.setText(exception.toString());
                    } else {
                        StringBuffer sb = new StringBuffer();
                        for (Person p : result) {
                            sb.append("P[name=");
                            sb.append(p.name);
                            sb.append(",age=");
                            sb.append(p.age);
                            sb.append("],");
                        }

                        tv.setText(sb.toString());
                    }
                }
            });
        }

    });
} 
```

AFAIK 文档仍在发布中，但您可以在[https://github.com/WindowsAzure/azure-mobile-services/blob/master/sdk/android/test/sdk.testapp.tests/src/查看一些示例com/microsoft/windowsazure/mobileservices/sdk/testapp/test/MobileServiceQueryTests.java](https://github.com/WindowsAzure/azure-mobile-services/blob/master/sdk/android/test/sdk.testapp.tests/src/com/microsoft/windowsazure/mobileservices/sdk/testapp/test/MobileServiceQueryTests.java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:16:22.900

有几种方法可以在 Android 和 Windows Azure 之间进行通信。无论是使用 WCF（Windows 通信基础）并将服务的 URL 传递给您的 android，您都可以执行此操作，或者您可以开始使用 Windows Azure 移动服务，无论是在移动服务（动态数据架构）还是使用 Node JS 将其链接到您在 Windows Azure 上的存储帐户。

这是从 WCF 开始的链接：http: [//msdn.microsoft.com/en-us/library/ms734712.aspx](http://msdn.microsoft.com/en-us/library/ms734712.aspx)

以下是开始使用 Windows Azure 移动服务的链接：http: [//www.windowsazure.com/en-us/develop/mobile/](http://www.windowsazure.com/en-us/develop/mobile/)

[这是从 Node JS http://www.windowsazure.com/en-us/documentation/#](http://www.windowsazure.com/en-us/documentation/#)开始的链接

# mysql - 强制 auto_increment 跳过某些值？

> ID：15503795
> 
> 赞同：4
> 
> 时间：2013-03-19T15:34:36.087
> 
> 标签：mysql, auto-increment

作为我当前项目的一部分，URL 可能如下所示：

```
http://example.com/summary/ab123 
```

最后一部分是通过`base_convert(~,10,64)`自定义字母表有效运行后的整数 ID。

然而，字母拼写事物。例如，当 ID 1,950,434 出现时，URL 将是：

```
http://example.com/summary/shit 
```

是的。有什么方法可以“保留”形成不受欢迎的单词并让`AUTO_INCREMENT`字段跳过它们的 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:42:55.507

虽然您可以通过创建一个触发器来检查自动生成的 ID，并且如果该 ID 包含在您的排除列表中，则可以在数据库中实现某些内容 - 删除该行并重试。

但是，这对我来说似乎有点 hacky ......并使数据库关心应该超出其范围的东西 - 转换为脏字的 ID。

相反，我会建议一个完全在数据库之外的解决方案。例如，您可以更改自定义字母表以排除所有元音吗？这样，无论生成的 ID 是什么，它都不会在您的 URL 中拼出任何令人讨厌的东西。

我能想到很多你不想在你的 URL 中出现的词。如果您尝试将不需要的单词列入黑名单，我会说一个更奇特的术语会漏掉的可能性很大......所以我认为不需要黑名单的方法也是出于这个原因的理想选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:40:00.737

可能唯一的方法是确定最后一个 ID 是什么（使用 LAST_INSERT_ID）。然后确定下一个数字是否是不受欢迎的数字，插入垫片，然后立即删除该条目。

# html - Selenium：单击 - div 中的 div

> ID：15503796
> 
> 赞同：0
> 
> 时间：2013-03-19T15:34:37.910
> 
> 标签：html, selenium, automated-tests, selenium-ide

我有这个：

```
<div class="dhx_toolbar_btn def" title="">
<div>Interface</div>
</div> 
```

并且想知道如何让 Selenium 点击它，因为我尝试了这个：

```
//div[@class='dhx_toolbar_btn def' and contains(., 'Interface')] 
```

还有这个：

```
css=.dhx_toolbar_btn def:contains('Interface') 
```

但似乎两者都不起作用，但它似乎与其他像这样的div一起使用：

```
<td class="td_btn_txt">
<div class="btn_sel_text">Billing Interface</div>
</td> 
```

任何帮助表示赞赏。谢谢

******编辑****
我也尝试了这些，但都不起作用，也没有返回任何错误：**

 **```
//div[5]/div/div[5]/div[9]
//*[text()='Interface']
//*[normalize-space(text())='Interface']
//*[contains(text(), 'Interface')] 
```

******编辑****
我也刚刚注意到，当我尝试最后 4 个但使用 mouseDown 而不是单击时，它完全符合预期，（让它看起来像鼠标在项目上，但不点击它） ，所以我想知道为什么它会用mouseDown做它的意思，但是点击它什么都不做，甚至不返回错误。**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:38:53.820

尝试使用[元素定位器的 CSS 选择器选项](http://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/dotnet/Selenium.html)

像这样的东西

```
css = "div.dhx_toolbar_btn div" 
```

当然，这取决于您的完整 DOM 的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:00:12.740

试试 xpath：

```
//div[@class=\"dhx_toolbar_btn def\"]/div 
```

该xpath将为您提供带有文本“Interface”的div。如果 div 中有多个具有“dhx_toolbar_btn”类的 div，则执行

```
//div[@class=\"dhx_toolbar_btn def\"]/div[text()="Interface"] 
```

如果您有多个包含“接口”的 div，我将以编程方式构建 Xpath 并传入您正在寻找的确切文本，假设文本是静态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:06:45.587

好的，所以不完全是我想要的方式，或者让它工作，但它有点：

```
<tr>
<td>waitForElementPresent</td>
<td>//div[@class='dhx_toolbar_btn def' and contains(., 'Interface')]</td>
<td></td>
</tr>
<tr>
<td>mouseDown</td>
<td>//*[text()='Interface']</td>
<td></td>
</tr>
<tr>
<td>mouseOver</td>
<td>//*[normalize-space(text())='Interface']</td>
<td></td>
</tr>
<tr>
<td>mouseDown</td>
<td>//*[text()='Interface']</td>
<td></td>
</tr>
<tr>
<td>click</td>
<td>//div[5]/div/div[5]/div[9]</td>
<td></td>
</tr>
<tr>
<td>mouseOut</td>
<td>//div[5]/div/div[5]/div[9]</td>
<td></td>
</tr> 
```

虽然我更喜欢更简单的方法。****

# sql-server - SQL Server 2008 XML 空节点

> ID：15503798
> 
> 赞同：1
> 
> 时间：2013-03-19T15:34:42.853
> 
> 标签：sql-server, xml

我正在尝试从 2005 和 2008R2 SQL Server 获取一些以 XML 格式返回的数据。我有两张桌子 - 一张主人和一张细节。我希望 XML 提供主信息以及查询的每个主记录的详细信息（如果存在）。如果不存在详细信息，它应该返回一个空节点而不是什么。例如，当存在详细记录时，我想要这个：

```
<masters>
  <master>
    <flda>value</flda>
    <fldb>value</fldb>
    <details>
      <detail>
        <dtla>value</dtla>
      </detail>
    </details>
  </master>
</masters> 
```

当没有详细记录存在时，我想要这个：

```
<masters>
  <master>
    <flda>value</flda>
    <fldb>value</fldb>
    <details />
  </master>
</masters> 
```

当有详细记录时，我有以下查询可以正确获取数据，但我不知道如何在缺少详细信息时强制使用空节点：

```
select m.flda, m.fldb,
       (select d.dtla
        from detail d
        where (d.mastid = m.id)
        for xml path('detail'), type) as 'details'
from master m
where (m.id = @id)
for xml path('master'), root('masters'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:41:29.600

我在另一个网站上问过同样的问题，并从“PortletPaul”那里得到了答案（ [http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/Q_28071909.html ）。](http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/Q_28071909.html)对于那些没有帐户的人，解决方案是使用 ISNULL 指令，如下所示：

```
select m.flda, m.fldb,
   isnull((select *
           from detail d
           where (d.mastid = m.id)
           for xml path('detail'), type),'') as 'details'
from master m
where (m.id = @id)
for xml path('master'), root('masters'); 
```

这将为您提供以下内容：

```
<masters>
  <master>
    <flda>value</flda>
    <fldb>value</fldb>
    <details></details>
  </master>
</masters> 
```

这不是`<details />`我想要的，但它足够接近。

# sql - 根据列的行数返回结果

> ID：15503803
> 
> 赞同：0
> 
> 时间：2013-03-19T15:34:54.913
> 
> 标签：sql, codeigniter, activerecord

我有餐桌订单

```
Orders{
  id
  user_id
  status
  date
} 
```

我需要返回结果，就好像同一用户的订单超过 5 次一样，如果有这样的订单

```
ID User_ID Status Date
1  1       Pending xxxxx
2  1       Pending xxxxx
3  1       Pending xxxxx
4  1       Pending xxxxx
5  1       Pending xxxxx
6  2       Pending xxxxx
7  3       Pending xxxxx
8  2       Pending xxxxx
9  1       Pending xxxxx 
```

结果将是来自用户 id = 1 的所有订单，因为他下的订单超过 5 个。我如何使用活动记录来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:02:28.100

Select * from Table where [User_ID] in (Select [User_ID] from Table group by [User_ID] with count(*) > 5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:42:39.267

```
Select * from orders 
where user_id in (Select user_id from orders group by user_id having count(1)>=5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:19:52.573

在您的模型中，您可以传递用户 ID 并获取特定用户的结果

模型

```
function get_orders($userid)
     {
         $this->db->where('user_id',$userid);
         $query =$this->db->get('orders');
         return $query->result();  
     } 
```

控制器

```
function orders($userid){

$result=$this->model->get_orders($userid);
if($result){

foreach ($result as $row){
echo $row->id."<br/>";
echo $row->user_id."<br/>";
....
..
}

}

} 
```

# html - 将 HTML 颜色转换为灰度

> ID：15503809
> 
> 赞同：0
> 
> 时间：2013-03-19T15:35:02.327
> 
> 标签：html, css

有没有办法将以下 HTML 颜色转换为对应的灰度颜色？

```
table.dataTable tr.odd { background-color: #E2E4FF; }
table.dataTable tr.even { background-color: white; }
table.dataTable tr.odd td.sorting_1 { background-color: #D3D6FF; }
table.dataTable tr.odd td.sorting_2 { background-color: #DADCFF; }
table.dataTable tr.odd td.sorting_3 { background-color: #E0E2FF; }
table.dataTable tr.even td.sorting_1 { background-color: #EAEBFF; }
table.dataTable tr.even td.sorting_2 { background-color: #F2F3FF; }
table.dataTable tr.even td.sorting_3 { background-color: #F9F9FF; } 
```

例如

```
table.dataTable tr.even { background-color: white; } 
```

会成为

```
table.dataTable tr.even { background-color: black; } 
```

# jquery - zRSSFeed - 从带有自动收报机动画 + jQuery Mobile (PhoneGap) 的菜单中选择 RSS 源？

> ID：15503812
> 
> 赞同：3
> 
> 时间：2013-03-19T15:35:10.073
> 
> 标签：jquery, cordova, jquery-mobile, rss

**问题：**从列表中选择一个提要并按下按钮返回主页 div 后，jQuery 重新加载整个页面，并且只显示新选定网页的标题（没有任何提要）。默认情况下，在另一个 div 页面上选择此特定选项（选择提要）之前，标题（“Reuters Oddly Enough News”）和提要显示没有任何问题。

**`<div data-role="page">`下面的代码`</div>`**

```
<h4>Select a feed from the list below</h4>
<select id="menu">
                <option value="http://feeds.reuters.com/reuters/oddlyEnoughNews">Reuters Oddly Enough News</option>
                <option value="http://feeds.bbc.co.uk/iplayer/highlights/tv/list">BBC iPlayer TV Listing</option>
                <option value="http://rss.cnn.com/rss/edition.rss">CNN News</option>
</select> 
```

**从带有自动收报机动画的菜单中选择 RSS 提要：**

```
<script type="text/javascript">
$(document).ready(function() {

                setRSSFeed('#menu');  

                $('#menu').change(function() {
                                setRSSFeed(this)
                });

                function setRSSFeed(obj) {
                                var feedurl = $('option:selected', obj).val();

                                if (feedurl) {
                                                $('#test').rssfeed(feedurl,{}, function(e) {
                                                                $(e).find('div.rssBody').vTicker();
                                                });
                                }
                }
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:19:52.360

我已经测试过了，它可以正常工作。除非我没有得到你真正需要的东西。

**zRSSFeed w/ Ticker Animation + Jquery Mobile**

```
$('#menu').on('change', function () {
var selected = $(this).val();
  $('#test').rssfeed(selected,{}, function(e)  {
   $(e).find('div.rssBody').vTicker();
 });
}); 
```

**HTML**

```
<div data-role="page" id="page">
 <div data-role="content">
     <h4>Select a feed from the list below</h4>

    <select id="menu">
        <option value="#">Choose</option>
        <option value="http://feeds.reuters.com/reuters/oddlyEnoughNews">Reuters Oddly Enough News</option>
        <option value="http://feeds.bbc.co.uk/iplayer/highlights/tv/list">BBC iPlayer TV Listing</option>
        <option value="http://rss.cnn.com/rss/edition.rss">CNN News</option>
    </select>
  </div>
 <div id="test"></div>
</div> 
```

# ruby-on-rails - Rails 捕获所有路由阻止访问公用文件夹

> ID：15503815
> 
> 赞同：4
> 
> 时间：2013-03-19T15:35:25.480
> 
> 标签：ruby-on-rails, ruby, rails-routing

......这是有道理的。我在自定义 CMS 中使用 catch all 路由进行页面路由。但是，我仍然想在我的公共文件夹中访问用户上传的资产。我的路线如下：

```
match "(*url)" => 'pages#show' 
```

我的控制器这样做：

```
def show
    @page = Page.where(:url => ['/', params[:url]].join).first
     begin
        render :template => "templates/" + @page.template.slug
     rescue
        render "public/404.html"
     end
end 
```

现在我知道我可能可以解析控制器中的 url，但我想知道是否有更好的 rails 方式 - 例如，我可以在 catch all 路由中添加一个异常吗？

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:27:35.447

通常，如果您的服务器配置正确，静态文件将优先于 Rails 生成的内容。

注意不要混淆相对于应用程序的路径，例如`/public/images/test.png`相对于 Web 根目录的路径，即`/images/test.png`. “路径”的这种相互矛盾的定义让许多开发人员感到困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-03T01:33:33.307

在 Rails 5 上，默认的生产配置通过环境变量标志启用公共文件服务器。`enabled`直接将值设置为`true`或确保`RAILS_SERVE_STATIC_FILES`设置了环境变量。然后将提供公共目录中的文件，而 catch all 路线不会捕获它们。

```
# config/environments/production.rb
config.public_file_server.enabled = ENV['RAILS_SERVE_STATIC_FILES'].present? 
```

# php - 通过表从数据库中删除项目

> ID：15503820
> 
> 赞同：0
> 
> 时间：2013-03-19T15:35:32.447
> 
> 标签：php, html, phpmyadmin

![在此处输入图像描述](../Images/2787561cd698ffb39d3ba6ac921edd63.png)

我在 html 中创建了一个接收数据库条目的表。现在我希望能够编辑和删除条目。因此，如果我单击 X 按钮，则必须删除所选行。我知道我需要通过 sql 查询来执行此操作，以便表根据数据库条目进行更改。但是我怎么能这样做，因为它需要知道哪一行属于那个特定的删除按钮？

```
<div id="customers">
<table id="customerTable">
<tr>
<td>First Name</td>
<td>Last Name</td>
<td>Company</td>
<td>Adress</td>
<td>Wijzig</td>
<td>Verwijder</td>
</tr>
<?php
    //connect to database
    include_once('mysql_connect.php');

    // Select database
    mysql_select_db("etn207") or die(mysql_error());

    // SQL query
    $strSQL = "SELECT * FROM customer";

    // Execute the query (the recordset $rs contains the result)
    $rs = mysql_query($strSQL);
    // Loop the recordset $rs
    // Each row will be made into an array ($row) using mysql_fetch_array

        while($row = mysql_fetch_array($rs)) {

       // Write the value of the column FirstName (which is now in the array $row
       echo '<tr>'; 
       echo '<td>'."<center>".$row['firstname']."<br>"."</center>".'</td>'; 
       echo '<td>'."<center>".$row['lastname']."<br>"."</center>".'</td>'; 
        echo '<td>'."<center>".$row['company']."<br>"."</center>".'</td>';
        echo '<td>'."<center>".$row['adress']."<br>"."</center>".'</td>';  
        echo '<td>'."<center>".'<img src="images/edit.png" width="20px" height="20px" border=0>'."<br>"."</center>".'</td>';   
        echo '<td>'."<center>".'<img src="images/delete.png" onClick="" width="20px" height="20px" border=0>'."<br>"."</center>".'</td>';    
        echo '</tr>'; 
      }

    // Close the database connection
    mysql_close();

?>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:37:09.783

将 id 作为隐藏值传递并使用它来删除该特定行

```
<input type="hidden" name="id_to_be_deleted" value="<?php echo $id; ?>" /> 
```

现在只需在提交时检索此 id 并从数据库中删除该行

```
<form method="post">
   <input type="hidden" name="id_to_be_deleted" value="<?php echo $id; ?>" />
   <input type="submit" name="delete_row" />
</form>

<?php
if(isset($_POST['delete_row'])) {
   $id = $_POST['id_to_be_deleted'];
   if(!mysqli_query($connection, "DELETE FROM table_name WHERE id = $id")) {
     echo mysqli_error($connection);
   } else {
      //redirect $_SERVER['REQUEST_URI'];
   }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:48:19.590

您的数据库记录很可能具有唯一标识符（主键左右）；在删除按钮上创建链接时使用此唯一标识符：

```
 echo '<a href="deleterecord.php?id=' . $yourUniqueidentifier . '"><img src="images/delete.png"></a>' 
```

您也应该对您的代码使用其他建议，例如使用 CSS 而不是“中心”标签，可能使用 AJAX 删除记录而无需完整回发，在查询字符串中使用哈希以避免未经授权删除记录等等，但是这不是重点:-)

# c - 用 blob 文件初始化 C 数组

> ID：15503823
> 
> 赞同：0
> 
> 时间：2013-03-19T15:35:37.833
> 
> 标签：c, arrays, visual-studio, linker, blob

我在 Visual Studio 2008 中用 C 语言编写程序。我想从二进制文件初始化数组。但我不想将二进制文件与 .exe 文件放在一起。所以我必须将二进制文件嵌入到我的 .exe 中。我通过谷歌搜索。大多数答案建议我在 VS 中使用“资源”。但我不了解 OOP，也不需要这么复杂的解决方案。为了相同的目的，我在 IAR EW 中使用“项目->选项->链接器->输入->原始二进制图像”。它非常适合这项任务。如何在VS中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:44:58.330

用你最喜欢的脚本语言编写一个简单的脚本，并在编译之前将二进制文件处理成逗号分隔的一组值（网上可能也有免费的工具）。将这组值嵌入到源 C 文件中以静态初始化数组。例如，结果可能类似于`char data[] = {0x12, 0xAB, 0xC0, ... };`- 在源代码中随心所欲地处理这些数据。

# php - HTML/JQuery 表单未发布到 PHP

> ID：15503825
> 
> 赞同：1
> 
> 时间：2013-03-19T15:35:40.513
> 
> 标签：php, jquery, html

所以我之前已经构建了数百个表单，都没有问题，但出于某种我不知道的原因，这个似乎不起作用。这种形式还处于起步阶段，以后将被插入到更大的 Web 应用程序中。我一遍又一遍地检查我的代码，检查 PHP 是否正常运行等，但我没有解决我的问题。

问题是我无法从 PHP 访问表单中的任何数据。更进一步，一旦表单被发布，它不会将表单数据附加到 URL。相反，我只是得到`www.example.com/list.php?`

希望我只是忽略了一些东西，但我唯一能想到的另一件事是它与 JQuery 有关。如果你们可以看看我的代码，看看是否有任何明显的错误，我将不胜感激。

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>list</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.9.1.js'></script>
  <script>
  $(window).load(function(){
    var counter = 1;

  $('button.remove').click(function(){
    if(counter >= 1){
       $("#cnt" + counter).remove();
       counter--;
       $('#count').attr('value', counter);
    }
  });

  $('button.add').click(function(e){
    e.preventDefault();
    counter++;
$('#count').attr('value', counter);

    var newData = '<tr style="display:none" id="cnt' + counter + '"><td><input type="text" value="Content' + counter + '"/></td></tr>';
    $(newData).appendTo('#myTable').fadeIn('slow').slideDown('slow');
   });
   });  
   </script>
   </head>

   <body>
<button class="add"> + </button><button class="remove"> - </button>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="get">

  <table id="myTable">
    <tr>
          <td><input type="text" value="Content1" id="cnt1" /></td>
           </tr>
  </table>

    <input type="hidden" id="count" value="10" />
    <input type="submit" value="Submit" />
   </form>

<?php
echo $_GET['count'];
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:51:24.113

您为输入字段遗漏了“NAME”属性....

ID 属性不替换 name 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:51:37.893

好吧，在做了一些改变之后，这对我有用 -

```
<td><input type="text" value="Content1" id="cnt1" name="some[]" /></td> 
```

添加`name`为数组，因为它们是动态添加的。

从脚本我改变了以下行 -

```
var newData = '<tr style="display:none" id="cnt' + counter + '"><td><input type="text" value="Content' + counter + '"/></td></tr>'; 
```

到

```
var newData = '<tr style="display:none" id="cnt' + counter + '"><td><input type="text" value="Content' + counter + '" name="some[]"/></td></tr>'; 
```

打印时，由于文本字段将是一个数组，因此您需要使用 `print_r($_GET)`而不是`echo $_GET;`

刚刚添加`name=some[]`在上面的行中。

您没有`name`在文本字段中提到属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:47:11.100

糟糕，你错过了`name='count'`:)`<input type='hidden'>`发生在我们最好的人身上

# c# - 将 linq 中具有子实体的断开连接的实体更新为 sql

> ID：15503827
> 
> 赞同：5
> 
> 时间：2013-03-19T15:35:47.643
> 
> 标签：c#, linq-to-sql

在 n 层应用程序中，linq-to-sql 似乎没有明确的解决方案来更新具有子实体集的断开连接的实体。

我有一些 linq-to-sql 实体...

```
public partial class Location : INotifyPropertyChanging, INotifyPropertyChanged
{       
    public int id;      
    public System.Nullable<int> idLocation;     
    public string brandingName;     
    public System.Data.Linq.Binary timeStamp;       
    public EntitySet<LocationZipCode> LocationZipCodes;
}

public partial class LocationZipCode : INotifyPropertyChanging, INotifyPropertyChanged
{
    public string zipcode;      
    public string state;        
    public int idLocationDetail;        
    public int id;      
    public System.Data.Linq.Binary timeStamp;       
    public EntityRef<Location> Location;
} 
```

所以一个`Location`实体会有一个`EntitySet`of `LocationZipCodes`。

域模型被映射到表示层使用`Location`的视图模型，然后最终将更改后的视图模型实体发回，在该实体中它被映射回`Location`域模型。从那里我更新实体并保存更改。这是处理程序：

```
public class ProgramZipCodeManagerHandler : IHttpHandler {
    private LocationsZipCodeUnitOfWork _locationsZipCodeUnitOfWork = new LocationsZipCodeUnitOfWork();

    public void ProcessRequest(HttpContext context) {
        if (context.Request.HttpMethod == "POST") {
            string json = Json.getFromInputStream(context.Request.InputStream);

            if (!string.IsNullOrEmpty(json)) {
                Location newLocation = Json.deserialize<Location>(json);
                if (newLocation != null) {
                    //this maps the location view model from the client to the location domain model
                    var newDomainLocation = new Mapper<Location, DomainLocation>(new DomainLocationMapTemplate()).map(newLocation);

                    if (newDomainLocation.id == 0)
                        _locationsZipCodeUnitOfWork.locationRepository.insert(newDomainLocation);
                    else
                        _locationsZipCodeUnitOfWork.locationRepository.update(newDomainLocation);

                    _locationsZipCodeUnitOfWork.saveChanges(ConflictMode.ContinueOnConflict);

                    var viewModel = new Mapper<DomainLocation, Location>(new LocationMapTemplate()).map(newDomainLocation);
                    context.Response.ContentType = "application/json";
                    context.Response.Write(Json.serialize(viewModel);
                }
            }
        }       
    }
} 
```

这是我的更新方法`locationRepository`：

```
protected System.Data.Linq.Table<T> _table;

public void update(T entity) {
    _table.Attach(entity, true);
    _context.Refresh(RefreshMode.KeepCurrentValues, entity);
}

public void update(T newEntity, T oldEntity) {
    _table.Attach(newEntity, oldEntity);
    _context.Refresh(RefreshMode.KeepCurrentValues, newEntity);
} 
```

我可以看到与`Location`实体直接关联的所有记录都在更新，但子集合 ( `public EntitySet<LocationZipCode> LocationZipCodes`) 没有更新。

**是否有一种明确的方法来更新具有也需要更新的子 EntitySet 的断开连接的实体？**换句话说，我有一个分离的实体，它包含另一个实体的集合。该集合已更改，我需要在数据库中更新该集合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:39:11.093

不..你不能那样做。

附加和分离对象取决于您使用的对象，不会影响相关对象（实体）。

您可以从此处阅读更多信息：
[附加和分离对象](http://msdn.microsoft.com/en-us/library/vstudio/bb896271%28v=vs.100%29.aspx)

考虑这样一种情况，其中对象 A 与填充了 1000 个值的集合 B 相关。您分离 A 并将其发送到某个远程处理 - A 在 B 关系中以 null 发送.. 现在 A 被带回您的程序 - 无法知道 AB null 是远程处理的结果还是它已经以空值提供给远程处理。

在与此答案一起发布的链接中 - 请向下滚动以仔细阅读标题为：
分离对象的注意事项的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:38:17.023

不太确定我是否理解您的问题，但这里有......类似于以下实体对象扩展的东西，也许您将实体重新附加到上下文等将通过将实体重新附加到对象上下文并适当地设置实体状态来工作。

```
 /// <summary>
    /// AttachEntityToObjectContext attaches an EntityObject to an ObjectContext
    /// </summary>
    /// <param name="entityWithRelationships">An EntityObject that has relationships</param>
    /// <param name="newContext">The ObjectContext to attach the entity to</param>
    /// <returns>True if the entity has relationships (and therefore the method could succeed). Otherwise false.</returns>
    /// <remarks>Objects are retrieved using one ObjectContext, stored in ViewState and then
    /// an attempt to save them is then made. The save attempt does not save the object. This is because it is a different context which is saving the object.
    /// So the object needs to be detached from its old context, added to the new context and have its EntityState maintained so that it gets saved.</remarks>
    public static bool AttachEntityToObjectContext(this IEntityWithRelationships entityWithRelationships, ObjectContext newContext)
    {
        EntityObject entity = entityWithRelationships as EntityObject;
        if (entity == null)
        {
            return false;
        }

        if (entity.EntityState != EntityState.Detached)
        {
            ObjectContext oldContext = entity.GetContext();
            if (oldContext == null)
            {
                return false;
            }

            if (oldContext != newContext)
            {
                EntityState oldEntityState = entity.EntityState;
                oldContext.Detach(entity);
                newContext.Attach(entity);
                newContext.ObjectStateManager.ChangeObjectState(entity, oldEntityState);
            }
        }

        return true;
    }

    /// <summary>
    /// GetContext gets the ObjectContext currently associated with an entity
    /// </summary>
    /// <param name="entity">An EntityObject</param>
    /// <returns>The ObjectContext which the entity is currently attached to</returns>
    private static ObjectContext GetContext(this IEntityWithRelationships entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }

        var relationshipManager = entity.RelationshipManager;

        var relatedEnd = relationshipManager.GetAllRelatedEnds().FirstOrDefault();

        if (relatedEnd == null)
        {
            // No relationships found
            return null;
        }

        var query = relatedEnd.CreateSourceQuery() as ObjectQuery;

        if (query == null)
        {
            // The Entity is Detached
            return null;
        }

        return query.Context;
    } 
```

# jquery - jQuery取消绑定特定元素而不是小部件的事件

> ID：15503828
> 
> 赞同：2
> 
> 时间：2013-03-19T15:35:47.893
> 
> 标签：jquery, jquery-ui, widget

我创建了一个处理图像延迟加载的 jQuery 小部件。当滚动条发生变化时，检查每个图像是否可见，如果可见，则加载该图像。

我的小部件是这样的。

```
_create : function() {
    var self = this;
    if(self.isVisible())
    {
        self.load();
    }
    else
    {
        $(window).bind('scroll.'+self.widgetName,self.checkScroll);
    }
},
checkScroll : function() {
    var self = this;
    if(self.isVisible())
    {
        $(window).unbind('scroll.'+self.widgetName,self.checkScroll);
        self.load();
    }
}, 
```

如果最初图像在视口中可见，则它已加载，但如果不是，则滚动条事件绑定到小部件的`checkScroll`功能。

我的问题是`unbind`所有小部件都是全局的。因此，一旦加载了第一个惰性图像，其他图像都不会被`checkScroll`调用。

如何绑定/取消绑定正在使用小部件的特定元素的事件，而不是所有小部件？

还是我做错了，有更好的方法吗？

# java - 如何从其他应用程序中检索 Spring-batch 作业历史记录？

> ID：15503833
> 
> 赞同：2
> 
> 时间：2013-03-19T15:36:00.140
> 
> 标签：java, web-services, spring, spring-batch, spring-batch-admin

我想在我的应用程序中创建一个 UI，用于调用 spring-batch（单独运行）作业并在该 UI 中显示诸如历史记录等作业详细信息。您可以使用 REST 从其他应用程序调用 spring-batch 的作业。我们也可以类似地检索工作的其他信息（历史等）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:15:53.723

您可以在远程服务器上部署 spring batch admin 并使用它的 REST json [API](http://static.springsource.org/spring-batch-admin/reference/json.html)

```
/configuration  GET Form for upload of Job configuration file
/files  GET List uploaded data files
/files  POST    Upload a new file (in a multipart form request) with path= and file= paremeters.
        /files  DELETE  Remove a file that was previously uploaded. Add pattern= parameter to narrow down to a subset of existing resources.
/files/{path}   GET Download a previously uploaded file. The path can contain directory separators.
        /home   GET List the resources available
/job-configuration  POST    Upload a Job configuration file as a String request body
/jobs   GET List the jobs known to the application. If they are configured in this application they are launchable, otherwise not (i.e. if they have been executed offline)
/jobs/executions    GET List all the job executions, in order of most recent to least.
/jobs/executions    DELETE  Stop all job executions
/jobs/executions/{jobExecutionId}   GET Show the JobExecution with the id provided
/jobs/executions/{jobExecutionId}   DELETE  Stop the JobExecution with the id provided. Add abort=true parameter to abort an already stopped or failed job.
/jobs/executions/{jobExecutionId}/steps GET List the StepExecutions of the JobExecution with the id provided
/jobs/executions/{jobExecutionId}/steps/{stepExecutionId}   GET Inspect the StepExecution with the id provided
/jobs/executions/{jobExecutionId}/steps/{stepExecutionId}/progress  GET Monitor the progress of the StepExecution with the id provided
/jobs/{jobName} GET List the JobInstances of the job name provided
/jobs/{jobName} POST    Execute the job with the name provided and parameters provided as a String (stringified Properties as per the CommandLineJobRunner)
/jobs/{jobName}/executions  GET List the JobExecutions for the job name provided
/jobs/{jobName}/{jobInstanceId}/executions  GET List the JobExecutions for the job instance with the id provided
/jobs/{jobName}/{jobInstanceId}/executions  POST    Stop the JobExecutions for the job instance with the id provided
/files.json GET
/home.json  GET
/job-configuration.json POST
/job-restarts.json  POST
/jobs.json  GET
/jobs/executions.json   GET
/jobs/executions.json   DELETE
/jobs/executions/{jobExecutionId}.json  GET
/jobs/executions/{jobExecutionId}.json  DELETE
/jobs/executions/{jobExecutionId}/steps/{stepExecutionId}.json  GET
/jobs/{jobName}.json    GET
/jobs/{jobName}.json    POST
/jobs/{jobName}/executions.json GET
/jobs/{jobName}/{jobInstanceId}.json    GET
/jobs/{jobName}/{jobInstanceId}/executions.json POST 
```

# video - 创建具有 Alpha 通道/透明度的视频文件

> ID：15503834
> 
> 赞同：1
> 
> 时间：2013-03-19T15:36:00.373
> 
> 标签：video, ffmpeg, media-player, transparency

我正在试验一个带有 alpha 通道的视频文件。稍后该文件应该是另一个视频的叠加层。它将与另一个文件实时合并并保存到另一个文件中。但这不是重点。问题开始得早，因为我什至不能玩它。

该视频是 png 编码的 Quicktime 文件，我无法使用任何视频播放器播放。WMP、VLC、MPC 和 ffplay 都显示出各种问题，这些问题都导致图像解码速度过慢的问题。奇怪的是，cpu (i7) 和我的 ssd 都没有受到限制，但文件播放不正确。

由于问题出现在所有播放器中，我认为这是基于在视频中使用 png。我用谷歌搜索但没有找到创建部分透明视频文件的正确方法。我尝试了各种导出方法（使用 adobe 媒体编码器）但没有结果：文件失去透明度或运行速度太慢。

我用我的 SDK 创建的结果文件是正确的（视频和音频是同步和流畅的），但是渲染一个 40 秒的视频需要 1 分钟，尽管它可以实时处理不透明的文件。

有谁知道我应该导出哪种文件，最小分辨率为 720p，部分透明，可以用 ffplay 实时播放？我也很感激任何可以帮助我的部分透明视频的经验，因为我找不到任何有用的链接？

谢谢，马吕斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-02T23:46:46.977

此问题的真正解决方案是始终导出使用无损动画编解码器的 Quicktime 文件。这可以是具有完整 Alpha 通道的 24BPP（百万）或 32BPP（百万+），但要点是编解码器是无损的，应该可以在不同的台式计算机上播放。

# javascript - 如何将 twitter 引导工具提示添加到图标

> ID：15503839
> 
> 赞同：51
> 
> 时间：2013-03-19T15:36:08.213
> 
> 标签：javascript, twitter-bootstrap, tooltip

我会将 twitter bootstrap 中的正确工具提示添加到图标元素。

代码是这样的：

```
<h3>Sensors Permissions <i class="icon-info-sign"></i></h3> 
```

我希望，当光标在图标上时，会显示一个带有一些信息的正确工具提示......

我能怎么做？包含 tooltip.js 库并在图标代码中放置一个元素还不够吗？我很困惑。

谢谢你。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-03-19T15:45:16.770

我最近这样使用它：

```
 <i class="icon-ok-sign" rel="tooltip" title="Key active" id="blah"></i> 
```

产生：

![在此处输入图像描述](../Images/6bfbb43ab4320eb740c2fc169443827c.png)

您可以通过使用 js 声明来设置工具提示和其他功能（延迟等）的位置：

```
$(document).ready(function(){
    $("[rel=tooltip]").tooltip({ placement: 'right'});
}); 
```

如评论中所述，您可以[在此处](http://getbootstrap.com/2.3.2/javascript.html#tooltips)找到其他属性/选项。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-19T15:50:03.347

您可能忘记使用`.tooltip()`.

`.tooltip()`必须在您希望拥有工具提示侦听器的每个元素上调用该函数。这是出于性能目的。您可以通过调用父级上的函数来一次初始化一堆，如下所示：`$('.tooltip-group').tooltip()`

[**查看 JSFiddle 上一个元素的初始化函数。**](http://jsfiddle.net/GRyAN/)

# Javascript

```
$(document).ready(function() {
  $('#example').tooltip();
}); 
```

# 标记

```
<h3>
  Sensors Permissions
  <i class="icon-info-sign" data-toggle="tooltip" title="first tooltip" id='example'></i>
</h3> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-26T10:12:08.270

@nickhar 的回答，使用`data-toggle="tooltip"`Bootstrap 2.3.2 和 3.0 测试：

```
 <i class="icon-ok-sign" data-toggle="tooltip" title="Key active" id="blah"></i> 
```

产生：

![在此处输入图像描述](../Images/6bfbb43ab4320eb740c2fc169443827c.png)

您可以通过使用 js 声明来设置工具提示和其他功能（延迟等）的位置：

```
$(document).ready(function(){
    $("[data-toggle=tooltip]").tooltip({ placement: 'right'});
}); 
```

如评论中所述，您可以[在此处](http://getbootstrap.com/2.3.2/javascript.html#tooltips)找到其他属性/选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-19T10:09:01.613

在javascript中

```
$(function () {
    $(".has-tooltip-right").tooltip({ placement: 'right'}); 
    $(".has-tooltip-left").tooltip({ placement: 'left'}); 
    $(".has-tooltip-bottom").tooltip({ placement: 'bottom'}); 
    $(".has-tooltip").tooltip(); 
}); 
```

在 HTML 中

```
<a href="#" class="has-tooltip-bottom" title="" data-original-title="Tooltip">This link</a> 
and <a href="#" class="has-tooltip" title="" data-original-title="Another link">that link</a> 
```

# python - web.py 没有检测到 GET 方法

> ID：15503841
> 
> 赞同：0
> 
> 时间：2013-03-19T15:36:12.740
> 
> 标签：python, web.py

我是 python 和 web.py 世界的菜鸟。

我刚刚创建了三个文件

**网址.py**

```
url_mappings = (
    '/', 'index'
) 
```

**索引.py**

```
class index:
    def GET(self):
        return "<h1>Hello World</h1>"

    def POST (self):
        return "<h1>Hello World in POST</h1>" 
```

**webstart.py**

```
import web
import index
from urls import url_mappings

if __name__ == "__main__":
    app = web.application (url_mappings, globals())
    app.run() 
```

我用 python webstart.py 启动我的开发服务器，当我点击 localhost:8080 时，它向浏览器发送 None 并且在日志中我看到以下内容

127.0.0.1:52822 - - [19/Mar/2013 20:44:18] “HTTP/1.1 GET /” - 405 方法不允许 127.0.0.1:52822 - - [19/Mar/2013 20:44:18] “HTTP/1.1 GET /favicon.ico” - 404 未找到

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:33:40.570

web.py 找不到控制器类，您应该更改 urls.py：

```
url_mappings = (
    '/', 'index.index'
) 
```

`index`或在 webstart.py 中导入类

```
from index import index 
```

即，您应该将 url 直接映射到`module_name.class_name`或在全局范围内可用`import class_name from module_name`。`class_name`

# ruby-on-rails - Rake 任务在命令行上工作，但在 Rake 任务中调用时失败

> ID：15503842
> 
> 赞同：2
> 
> 时间：2013-03-19T15:36:13.803
> 
> 标签：ruby-on-rails, rake

目前，要为 Rails 项目重建我的数据库，我在命令行中运行以下 Rake 任务：

```
bundle exec rake db:drop
bundle exec rake db:create
bundle exec rake db:migrate
bundle exec rake db:seed 
```

我想把这些放在一个 Rake 任务中，所以我创建了一个`lib/tasks/db.rake`文件：

```
namespace :db do
  desc 'Drop and recreate the database(s)'
  task :clean do
    Rake::Task["db:drop"].invoke
    Rake::Task["db:create"].invoke
    Rake::Task["db:migrate"].invoke
    Rake::Task["db:seed"].invoke  # This doesn't work for some reason...
  end
end 
```

前几个任务运行良好，但`db:seed`崩溃并出现一个奇怪的错误：

```
undefined method `username' for #<User:0xdfaa494>
[...]/gems/activemodel-3.2.12/lib/active_model/attribute_methods.rb:407:in `method_missing'
[...]/gems/activerecord-3.2.12/lib/active_record/attribute_methods.rb:149:in `method_missing'
[...]/lib/acts_as_followable/followable.rb:42:in `method_missing'
[...]/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:253:in `should_generate_new_friendly_id?'
[...]/gems/friendly_id-4.0.9/lib/friendly_id/slugged.rb:273:in `set_slug'
[...]/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:407:in `_run__819679792__validation__197267883__callbacks'
[...]/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
[...]/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_validation_callbacks'
[...]/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
[...]/gems/activemodel-3.2.12/lib/active_model/validations/callbacks.rb:53:in `run_validations!'
[...]/gems/activemodel-3.2.12/lib/active_model/validations.rb:195:in `valid?'
[...]/gems/activerecord-3.2.12/lib/active_record/validations.rb:69:in `valid?'
[...]/gems/activerecord-3.2.12/lib/active_record/validations.rb:77:in `perform_validations'
[...]/gems/activerecord-3.2.12/lib/active_record/validations.rb:50:in `save'
[...]/gems/activerecord-3.2.12/lib/active_record/attribute_methods/dirty.rb:22:in `save'
[...]/gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
[...]/gems/activerecord-3.2.12/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
[...]/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
[...]/gems/activerecord-3.2.12/lib/active_record/transactions.rb:208:in `transaction'
[...]/gems/activerecord-3.2.12/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
[...]/gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block in save'
[...]/gems/activerecord-3.2.12/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
[...]/gems/activerecord-3.2.12/lib/active_record/transactions.rb:258:in `save'
[...]/gems/activerecord-3.2.12/lib/active_record/relation/finder_methods.rb:294:in `find_or_instantiator_by_attributes'
[...]/gems/activerecord-3.2.12/lib/active_record/dynamic_matchers.rb:52:in `method_missing'
[...]/db/core_data/roles_and_users.rb:7:in `<top (required)>'
[...]/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
[...]/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `block in load'
[...]/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
[...]/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
[...]/db/seeds.rb:20:in `block in <top (required)>'
[...]/db/seeds.rb:19:in `each'
[...]/db/seeds.rb:19:in `<top (required)>'
[...]/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
[...]/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `block in load'
[...]/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
[...]/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
[...]/gems/railties-3.2.12/lib/rails/engine.rb:520:in `load_seed'
[...]/gems/activerecord-3.2.12/lib/active_record/railties/databases.rake:333:in `block (2 levels) in <top (required)>'
[...]/lib/tasks/db.rake:11:in `block (2 levels) in <top (required)>'
[...]/bin/ruby_noexec_wrapper:14:in `eval'
[...]/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:seed 
```

此错误不会发生在命令行上，也不会在运行应用程序时发生。

**更新：**这是有关代码库和架构的更多信息。

第 7 行`db/core_data/roles_and_users.rb`：

```
admin_user = User.find_or_create_by_email('valid@example.com') # not the actual email address used in the file 
```

的部分`app/models/user.rb`：

```
class User < ActiveRecord::Base
  include ApplicationHelper, FriendlyId, ActsAsFollowable::Followable, Disableable
  ...
  friendly_id :username, :use => :slugged
  attr_accessible :username
  ...
  username_format = /^[a-z\d]+([-_][a-z\d]+)*$/i
  validates :username, :presence => true, :uniqueness => true, :format => { :with => username_format, :message => "can only contain letters, numbers, underscores (_) or dashes (-). Spaces are not allowed."}, :unreserved_word => true, :length => { :minimum => 3, :maximum => 60 }
  ...
end 
```

`username`是数据库中的一个 VARCHAR(255) 字段。

**更新 2：**看起来 Rake 环境设置不正确。如果我将第 7 行替换`db/core_data/roles_and_users.rb`为以下内容：

```
admin_user = User.create(:email => 'valid@example.com', :username => 'administrator') 
```

那么错误是：

```
unknown attribute: username 
```

如果我将命令行（有效）手动调用的输出与 Rake 进行比较，我还会输出 User 模型：

```
# Command line invocation -- WORKS
[2013-03-25 09:42:08] INFO  Rails : Connecting to database specified by database.yml
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:abort_if_pending_migrations
Creating badges...
Creating Shipping Options...
  For UPS...
  For USPS...
Creating roles...
Creating users...
User(id: integer, email: string, encrypted_password: string, reset_password_token: string, reset_password_sent_at: datetime, remember_created_at: datetime, sign_in_count: integer, current_sign_in_at: datetime, last_sign_in_at: datetime, current_sign_in_ip: string, last_sign_in_ip: string, created_at: datetime, updated_at: datetime, last_day_logged_in: datetime, consecutive_days_logged_in: integer, username: string, confirmation_sent_at: datetime, confirmed_at: datetime, confirmation_token: string, failed_attempts: integer, unlock_token: string, locked_at: datetime, super_user: boolean, facebook_id: string, facebook_email: string, fb_auth_token: string, slug: string, forem_admin: boolean, forem_state: string, forem_auto_subscribe: boolean, disabled: boolean, delta: boolean, latitude: float, longitude: float)

# Rake invocation -- DOESN'T WORK
** Invoke db:schema:load (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:schema:load
** Invoke db:seed (first_time)
** Execute db:seed
** Invoke db:abort_if_pending_migrations 
Creating badges...
Creating Shipping Options...
  For UPS...
  For USPS...
Creating roles...
Creating users...
User(id: integer, email: string, encrypted_password: string, reset_password_token: string, reset_password_sent_at: datetime, remember_created_at: datetime, sign_in_count: integer, current_sign_in_at: datetime, last_sign_in_at: datetime, current_sign_in_ip: string, last_sign_in_ip: string, created_at: datetime, updated_at: datetime)
rake aborted!
undefined method `username' for #<User:0xdad7fc0> 
```

如您所见，Rake 并没有看到很多模型的字段，即使它们存在于数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:18:06.840

我不知道这是否可行，但请尝试：

```
namespace :db do
  desc 'Drop and recreate the database(s)'
  task :clean => :environment do
    ...
  end
end 
```

更新：如果这是您任务的完整代码，您可以定义一个执行其他任务的任务，如下所示：

```
namespace :db do
  desc 'Drop and recreate the database(s)'
  task :clean => [:drop, :create, :migrate, :seed]
end 
```

希望这可以帮助！:)

更新2：我想我没有正确阅读回溯......错误表明您的用户对象没有`username`定义方法。这可能是由 2 个不同的错误引起的：

1.  您应该已经`username`手动定义了该方法。

2.  `username`您在迁移中添加了一个字段，但不知何故它不存在。

检查迁移的拼写并确认您不需要实施选项 1。然后检查您的`db/core_data/roles_and_users.rb:7`文件（从回溯中提取）。

如果这不能解决您的问题，我不知道还能做什么:(

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-30T17:37:21.690

虽然这是一种迂回的解决方案，但在您的`db:clean`任务中，我会尝试通过使用`system()`或将 rake 调用包装在反引号中来执行命令，即：

```
system("bundle exec rake db:drop")
system("bundle exec rake db:create")
system("bundle exec rake db:migrate")
system("bundle exec rake db:seed") 
```

或者

```
`bundle exec rake db:drop`
`bundle exec rake db:create`
`bundle exec rake db:migrate`
`bundle exec rake db:seed` 
```

话虽如此，我还没有测试过它，但它*应该可以*工作。

# google-maps-api-3 - 使用 Google Map API 在每个单独的圆圈上创建 InfoWindow 的问题

> ID：15503848
> 
> 赞同：1
> 
> 时间：2013-03-19T15:36:29.637
> 
> 标签：google-maps-api-3

我在使用 Google Map API 时遇到问题。我想在地图上绘制圆圈并在每个圆圈上创建鼠标悬停事件以打开显示时间值的信息窗口。

第一个问题是不同圈子的信息窗口内容不会改变。第二个问题是 infowindow 由于某种原因没有弹出。

有人可以帮忙吗？

谢谢

代码如下：

```
function initialize() {
        data={};
        data[0]={
            center: new google.maps.LatLng(51.49799,-0.196145),
            population: 1000,
            time:"2013-03-01T03:31:18Z"
        };
        data[1]={
            center: new google.maps.LatLng(51.496294,-0.188184),
            population: 1000,
            time:"2013-03-01T13:21:15Z"
        };
        data[2]={
            center: new google.maps.LatLng(51.497817,-0.178313),
            population: 1000,
            time:"2013-03-04T04:03:50Z"
        };

        var mapOptions = {
            zoom: 15,
            center: new google.maps.LatLng(51.494438, -0.188907),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);

        var movingColour= '#FF0000';
        var counter=0;
        for (var city in data) {
            // Construct the circle for each value in citymap. We scale population by 20.
            //movingColour=ColorLuminance(movingColour, -0.005) ;
            var populationOptions = {
                strokeOpacity: 0.35,
                strokeWeight: 2,
                strokeColor:movingColour,
                fillColor:movingColour ,
                fillOpacity: 0.35,
                map: map,
                clickable:true,              
                center: data[city].center,
                radius: data[city].population / 20
            };
            var circle = new google.maps.Circle(populationOptions);         
            var infowindow =new google.maps.InfoWindow({
                content: data[city].time
            });  
            google.maps.event.addListener(circle, 'mouseover', function(ev) {
                alert(infowindow.content);
                infowindow.open(map,circle);
            });
            counter++;    

        }
        google.maps.event.addDomListener(window, 'load', initialize);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:58:29.377

这是 InfoWindows 在标记上常见的常见问题，可以通过多种方式解决。InfoWindow 没有打开，因为 .open 的可选第二个参数只能是一个标记，否则，您需要设置标记应该打开的位置。我通常使用函数闭包来解决InfoWindow内容问题（还有其他方法）：

```
function initialize() {
    data={};
    data[0]={
        center: new google.maps.LatLng(51.49799,-0.196145),
        population: 1000,
        time:"2013-03-01T03:31:18Z"
    };
    data[1]={
        center: new google.maps.LatLng(51.496294,-0.188184),
        population: 1000,
        time:"2013-03-01T13:21:15Z"
    };
    data[2]={
        center: new google.maps.LatLng(51.497817,-0.178313),
        population: 1000,
        time:"2013-03-04T04:03:50Z"
    };

    var mapOptions = {
        zoom: 15,
        center: new google.maps.LatLng(51.494438, -0.188907),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),
    mapOptions);

    var movingColour= '#FF0000';
    var counter=0;
    for (var city in data) {
        var populationOptions = {
            strokeOpacity: 0.35,
            strokeWeight: 2,
            strokeColor:movingColour,
            fillColor:movingColour ,
            fillOpacity: 0.35,
            map: map,
            clickable:true,              
            center: data[city].center,
            radius: data[city].population / 20
        };
        var circle = new google.maps.Circle(populationOptions);         
        createClickableCircle(map, circle, data[city].time); 
        counter++;    

    }
    google.maps.event.addDomListener(window, 'load', initialize);
}

function createClickableCircle(map, circle, info){
       var infowindow =new google.maps.InfoWindow({
            content: info
        });  
        google.maps.event.addListener(circle, 'mouseover', function(ev) {
            // alert(infowindow.content);
            infowindow.setPosition(circle.getCenter());
            infowindow.open(map);
        });
 } 
```

（您可能想要添加一个侦听器来关闭 InfoWindow。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:27:11.643

我重写了一些你的 javascript 以获得更好的语法和你忘记定义的命名变量`var`。

例如定义`data={};`使用`var data=[];`，因为我可以在下面看到您将其用作包含对象的数组。我还做了一个**修复**，当您将光标移到已经打开信息窗口的圆圈上时，它会停止闪烁效果：

```
// To stop flickering.. we wont reopen until necessary
// We open only if position has been changed or infowindow is not visible
if(infowindow.getPosition() !== this.getCenter() || infowindowClosed === true) {
   // this can be used to access data values
   infowindow.setContent(this.data.time); 
   infowindow.setPosition(this.getCenter());
   infowindow.open(map);
   infowindowClosed = false;
} 
```

其他增强功能包括在您的方法上方将一些变量定义为全局变量`initialize();`，干杯。

查看**[带有评论的工作小提琴。](http://jsfiddle.net/NUkCs/10/)**

# c++ - 通过继承专门化运算符模板

> ID：15503854
> 
> 赞同：0
> 
> 时间：2013-03-19T15:36:47.627
> 
> 标签：c++, templates, operator-overloading

到目前为止，为了创建 Boost.Serialization 的自定义和轻量级改编，我尝试了一些事情。给出以下存根：

```
template<typename Archive>
class BasicStream {
public:
    template<typename Any>
    Archive& operator&(Any& data) {
        return Serialize(*this, data);
    }
}; 
```

通常，调用全局`Serialize`函数可以正确处理几乎所有数据类型，但也有一些例外。对于某些数据类型，我想根据指定的`Archive`. 我试着写

```
class OutputStream : public BasicStream<OutputStream> {
public:
    template<>
    OutputStream& operator&(MyExceptionalType& data) {
        // ... do something super special ... //
        return *this;
    }
}; 
```

但是我得到了错误`IntelliSense: declaration is incompatible with function template "OutputStream &BasicStream<Archive>::operator&(Any &data) [with Archive=OutputStream]"`。这种尝试继承通用版本`operator&`但将其专门用于派生类的尝试有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:48:27.807

你可以这样做：

```
template<typename Archive>
class BasicStream {
public:
    template<typename Any>
    Archive& operator&(Any& data);
};

// generic implementation
template<typename Archive>
template<typename Any>
Archive& BasicStream<Archive>::operator&(Any& data) {
    return Serialize(*this, data);
}

class OutputStream : public BasicStream<OutputStream> {
};

// Specialize the original template, don't overwrite it
template<>
template<>
OutputStream& BasicStream<OutputStream>::operator&(MyExceptionalType& data) {
    // ... do something super special ... //
    return static_cast<OutputStream&>(*this);
} 
```

# cocos2d-iphone - 触摸旋转的 CCLayer

> ID：15503862
> 
> 赞同：2
> 
> 时间：2013-03-19T15:37:10.743
> 
> 标签：cocos2d-iphone

旋转 CCLayer 后，我的 boundingBox 会增长，而不是旋转。也许在意料之中。

我的问题是，我依赖于用户对这一层的触摸。当图层像所附图像底部的图一样旋转时，可点击区域会增加，因为我正在调用：

```
if(CGRectContainsPoint(clickableLayer.boundingBox, touchLocation)) 
```

这会导致一个问题，因为旋转后的这个边界框覆盖了其他也可以点击的东西。

如果实际图层被触摸，我如何只执行操作？我希望只单击绿色框而不是图层的边界框时发生一些事情。

想法？

![在此处输入图像描述](../Images/4c11e8cd272c9d87ef45789e4ce766e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:31:20.717

这个帖子让我得到了答案： http: [//www.cocos2d-iphone.org/forum/topic/272336](http://www.cocos2d-iphone.org/forum/topic/272336)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:42:07.947

您可以使用 CGMutablePathRef 来检测透明部分：

[请参阅我在此线程](https://stackoverflow.com/questions/12333822/detect-transparent-part-on-the-sprite-in-cocos2d/12516903#12516903)中的答案。

有关如何创建 CGPath 的信息：[这里](https://stackoverflow.com/questions/14953630/cgpath-is-not-detected-properly-in-cocos2d/14954003#14954003)

欲了解更多信息，请[点击这里](http://bobueland.com/cocos2d/2011/the-magic-of-cgpaths/)

![在此处输入图像描述](../Images/e2546f1a22a7ea35768a954208d7a19c.png)

# excel - Excel：将C列的值输入到B列值的中间

> ID：15503864
> 
> 赞同：0
> 
> 时间：2013-03-19T15:37:18.050
> 
> 标签：excel, excel-formula, vba

如果我的 L8 单元有 TEST 而我的 L9 有

```
ABCDEFG</div>RED 
```

我想得到

```
ABCDEFGTEST</div>RED 
```

结果我正在使用：

```
=CONCATENATE(LEFT(L9,SEARCH("G</div>",L9))&L8&RIGHT(L9,SEARCH("</div>",L9))) 
```

但我的实际结果如下：

```
ABCDEFGTEST/div>RED 
```

我该如何解决？所以，我不会丢失结束挖掘标签上的 < 吗？

编辑：用简化的例子重写，希望更清楚

Edit2：连接示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:44:40.873

结合`Concatenate`, `Left`, `Mid`（`Right`获取部分字符串）和`Find`and `Len`（通过查找特定字符串或位置来查看此“中间”在哪里）函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:51:51.947

我不完全确定您的问题是什么；我同意@Mowgli。

话虽如此，我要刺伤。

如果您尝试在 B 列的中间插入 C 列，我会将 URL 和 img 移动到单独的列（对于相同的参数，让我们将它们设为 K 和 L（如 K_B 所述，您可以使用 FIND这。）

然后我将列 Z1 = "&C1&"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:30:39.327

试试这个公式得到`ABCDEFGTEST</div>RED`

`=REPLACE(L9,FIND("<",L9),0,L8)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T17:01:17.530

B 列 ABC
C 列 123

公式 =LEFT(B3,2)&C3&RIGHT(B3,1)

# c# - 在 Raven 中存储带有父子指针的树

> ID：15503866
> 
> 赞同：2
> 
> 时间：2013-03-19T15:37:23.387
> 
> 标签：c#, json.net, ravendb

我有一个树结构，其中节点既有子指针又有父指针。我在让它很好地序列化时遇到了一些问题（这将用于配置，因此它需要对操作/配置管理器具有一定的可读性），并且在尝试了序列化约定和属性的不同组合之后，我仍然卡住了。

我的类型如下所示：

```
public class NestedConfigurationTree<T> where T : class
{
    public InternalNode<T> _root { get; set; }

    public class InternalNode<TValue> where TValue : class
    {
        public Dictionary<string, InternalNode<TValue>> _children { get; set; }
        public InternalNode<TValue> _parent  { get; set; }
        public TValue _value  { get; set; }
    }
} 
```

当我允许循环引用 ( `[JsonObject(IsReference = true)]`) 时，每个节点都会得到如下所示的 JSON：

```
 "$id": "3",
        "_children": {
          "ConfigurationItem": {
            "$id": "4",
            "_children": {},
            "_parent": {
              "$ref": "3"
            },
            "_value": "Some value"
          }
        }, 
```

这显然使最终用户感到困惑，他们不想要 $id 和 _parent 的东西。由于父级从文档结构中非常明显，我可以避免序列化它并在加载时以某种方式重新创建它吗？

另外，是否可以避免拥有公共财产？我最初将它写为`private readonly`字段，但这使得序列化程序忽略了所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:44:28.637

并非所有内容都适合直接存储在数据库中。您已经展示了这种情况的一个很好的例子。如果您的最终用户会对此感到困惑，那么您想要针对它编写的任何查询也会如此。

我的建议是有一个没有这些引用的树版本。序列化，看起来像这样：

```
{
  "Value" : "A",
  "Children" : [
    {
      "Value" : "B",
      "Children" : [
        {
          "Value" : "C",
          "Children" : [
            {
                "Value" : "D",
            }
          ]
        },
        {
          "Value" : "E",
          "Children" : [
            {
                "Value" : "F",
                "Children" : []
            },
            {
                "Value" : "G",
                "Children" : []
            }
          ]
        }
      ]
    }
  ]
} 
```

序列化时，您只需忽略父/子链接，反序列化时您会将它们连接起来。

您可以自定义而不是第二组类，`JsonConverter`这使您可以细粒度地控制如何序列化或反序列化任何特定实体。

另一种选择（也许是最简单的）是使用方法而不是遍历链接的属性。换句话说，而不是：

```
Node Parent { get; }
IEnumerable<Node> Children { get; } 
```

你会使用：

```
Node GetParent();
IEnumerable<Node> GetChildren(); 
```

在序列化过程中不会遵循方法，因此这可能是最简单的事情。

# eclipse - 由于错误删除了整个 .metadata 文件夹，项目无法在 eclipse 中运行

> ID：15503869
> 
> 赞同：1
> 
> 时间：2013-03-19T15:37:35.973
> 
> 标签：eclipse

我错误地删除了整个 .metadata 文件夹，所以我在 eclipse 中的项目根本无法运行，并且 .metadata 文件夹没有备份。我该怎么做才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:46:26.900

如果你没有太多的项目，你可以这样做：

1.  使用与以前相同的工作区打开 eclipse。
2.  创建一个与您之前的项目具有完全相同的名称和工作目录的新项目。

对每个项目重复步骤 2。

Eclipse 会找到这些文件，但如果您有任何其他设置，您可能必须手动添加它们。

# javascript - 获取 javascript 变量到 webbrowser 控件 winforms

> ID：15503870
> 
> 赞同：1
> 
> 时间：2013-03-19T15:37:38.130
> 
> 标签：javascript, .net, winforms, c#-4.0, webbrowser-control

我在 Visual Studio 2010 中使用 webbrowser 控件来调用 JS 脚本。我可以从 web 浏览器调用一个函数，但我希望从 JS 获取一个变量值并在 winform 中使用它。

例如，我有这个 JS 代码：

```
<script type="text/javascript">
function f() {
var val=0;
return val;
}
</script> 
```

C# 代码不起作用：

```
webBrowser.Document.InvokeScript("f"); 
```

调用JS函数并获取变量值的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:44:57.567

InvokeScript 将返回 javascript 函数返回的值。你只需要注意它的类型。数字和字符串将返回 ac# 字符串。

# android - 更改未显示的图像

> ID：15503877
> 
> 赞同：0
> 
> 时间：2013-03-19T15:37:59.177
> 
> 标签：android, eclipse

我的 android 项目包含 ldpi、mdpi、hdpi 和 xhdpi 文件夹。

我正在测试的设备是 hdpi，因此，我删除了 hdpi 文件夹中的图像，并在此文件夹中添加了一个具有相同名称的新图像。

但是现在图像没有显示。我没有更改代码。

我尝试清理项目，重新启动eclipse并重新启动计算机，但问题就在那里。

我应该尝试其他任何操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:07:55.340

成立！！问题是图像，它是 CMYK 而不是 RGB。

# c - 重新协商 SSL 握手

> ID：15503879
> 
> 赞同：1
> 
> 时间：2013-03-19T15:38:03.150
> 
> 标签：c, ssl, sip

是否可以在当前 SSL 连接保持活动状态时重新协商 SSL 握手。当新的握手成功时，服务器应该响应新握手的确认。

我搜索了 SSL 重新协商，但找不到任何具体的内容。有谁知道这样的事情是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:16:17.957

是的，重新协商是 TLS 协议的一部分。它既可以是客户端启动的，也可以是服务器启动的。对它的支持取决于实现。此外，重新协商使对 TLS的[攻击成为可能。](http://www.educatedguesswork.org/2009/11/understanding_the_tls_renegoti.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-27T06:00:56.133

我曾经遇到过这种情况，我们使用的是 GoLang。可以通过将 tlsCfg.Renegotiation 设置为以下值之一来设置重新协商模式：

1.  从不重新协商
2.  RenegotiateOnceAsClient
3.  [在https://golang.org/src/crypto/tls/common.go](https://golang.org/src/crypto/tls/common.go)中定义的RenegotiateFreelyAsClient

以下函数可用于设置请求 TLS Config。

```
func (r *request) SetRenegotiationMode(mode string) (IRequest, error) {

    modeMap := map[string]tls.RenegotiationSupport{
        "once":   tls.RenegotiateOnceAsClient,
        "freely": tls.RenegotiateFreelyAsClient,
        "never":  tls.RenegotiateNever,
    }

    if val, ok := modeMap[mode]; ok {
        if r.tlsCfg == nil {
            r.tlsCfg = &tls.Config{}
        }
        r.tlsCfg.Renegotiation = val
    } else {
        //if anything other than the allowed values is passed, it'll thrown an error
        return nil, <DEFINE AN ERROR>
    }

    return r, nil
} 
```

# c# - C#在点击事件上更改文本

> ID：15503881
> 
> 赞同：0
> 
> 时间：2013-03-19T15:38:06.540
> 
> 标签：c#, mouseclick-event

我有一个当前通过鼠标单击更改文本的字段。此字段位于我报告的多个页面上，但单击它只会更改该页面的文本。这是我的代码：

```
 const string sShowDetail2 = "Show Cumulative";
 const string sHideDetail2 = "Hide Cumulative";
 ArrayList expandedValues2 = new ArrayList();

    // This function returns a value indicating whether a certain  
    // category's details should be expanded. 

    bool ShouldShowDetail2(int CategoryID)
    {
        return expandedValues2.Contains(CategoryID);

    }

    private void lbShowHide2_BeforePrint(object sender, PrintEventArgs e)
    {
        XRLabel label = (XRLabel)sender;

        if (ShouldShowDetail2((int)label.Tag))
        {
            label.Text = sHideDetail2;
        }
        else
        {
            label.Text = sShowDetail2;
        }
    }

    private void lbShowHide2_PreviewClick(object sender, PreviewMouseEventArgs e)
    {
        // Obtain the category's ID stored in the label's Tag property. 
        int index = (int)e.Brick.Value;

        // Determine whether the current category's details are shown. 
        bool showDetail2 = ShouldShowDetail2(index);

        // Toggle the visibility of the category's details. 
        if (showDetail2)
        {
            expandedValues2.Remove(index);
        }
        else
        {
            expandedValues2.Add(index);
        } 
```

现在我有另一个字段，我需要在点击时简单地切换该字段的所有实例（每个页面）。我不需要它来读取我单击的特定标签的标签，因为它会同时更改所有标签。我的问题是我不知道如何在鼠标点击时让它们全部改变。如何修改上面的代码以更改标签的所有实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:56:33.757

这是你可以尝试的东西

```
private void ChangeXRLabels(Control control)
{
    foreach(Control childControl in control.Controls)
    {
         XRLabel label = childControl as XRLabel;
         if(label != string.Empty)
            label.Text = "Your Text Value goes Here";
         else if(childControl.Controls.Count > 0)
             ChangeXRLabels(childControl);
    }
} 
```

# c# - MVVM 数据库 Child_Update() 未更新

> ID：15503884
> 
> 赞同：0
> 
> 时间：2013-03-19T15:38:11.277
> 
> 标签：c#, wpf, database, mvvm, updates

好的，这是交易。使用我的模型来提高 Child_Update() 方法。我知道这不好，但我现在只是在学习。现在我将我的业务类作为参数来更改已经给定的行。它做的一切都很好，没有任何错误消息，也没有空变量，但它没有改变数据库中的任何东西。

在这里，我使用 selectedIndex 来选择要更新的正确项目

```
public void ExecuteAngestellte(object obj)
{
    try
    {
       _selectedIndex.Child_Update(new Farbe { FarbauswahlNr = SelectedIndex.FarbauswahlNr, Kurztext = SelectedIndex.Kurztext, Ressource = SelectedIndex.Ressource, Vari1 = SelectedIndex.Vari1, Vari2 = SelectedIndex.Vari2 });

    }
    catch (Exception e)
    {
         MessageBox.Show(e.ToString());
    }
} 
```

这是孩子的更新

```
public void Child_Update(Farbe data)
{
    using (var ctx =Csla.Data.ObjectContextManager<TestDBEntities>.GetManager(EntitiesDatabase.Name))
    {
        var objectStateManager = ctx.ObjectContext.ObjectStateManager;
        var _data = new Datenbank.Farbe();

        _data.FarbauswahlNr = data.FarbauswahlNr;
        _data.Kurztext = data.Kurztext;
        _data.Ressource = data.Ressource;
        _data.Var1 = data.Vari1;
        _data.Vari2 = data.Vari2;

        ctx.ObjectContext.SaveChanges();

    }
} 
```

谢谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:46:33.157

据我所知，您的 _data 不是数据上下文的一部分

我不确定这些变量的含义，所以这里是一个简单的更新，我用于实体框架的单个记录

```
public void UpdateTable(int idRecord, YourContext Context)
{ 
    MyRecord = Context.MyTable.Find(idRecord);
    myRecord.Column = "New Value";
    Context.SaveChanges();
 } 
```

所以我认为你需要这样做：

```
 var MyData = ctx.ObjectContext.TableName.Find(id) 
```

我假设您正在使用实体框架。这有帮助吗？

# mobile - 将应用程序发布到 Opera Mobile 商店

> ID：15503885
> 
> 赞同：2
> 
> 时间：2013-03-19T15:38:19.130
> 
> 标签：mobile, app-store, opera

我已经将一个应用程序上传到 Opera 移动商店大约一周，但我无法启用我的应用程序！验证过程需要多长时间？或者为什么我不能启用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T13:49:45.523

验证只需大约 12 小时。您应该已经收到了他们的电子邮件。如果您还没有，那么您要么没有完全完成您的申请，要么您的电子邮件地址有错字。

# asp.net-mvc-4 - 从 ASP.NET MVC 3 升级到 ASP.NET MVC 4 会导致 404 错误

> ID：15503889
> 
> 赞同：0
> 
> 时间：2013-03-19T15:38:24.633
> 
> 标签：asp.net-mvc-4, area, asp.net-4.5

我刚刚使用 .NET 4.5 将 ASP.NET MVC 3 升级到 ASP.NET MVC 4，并且根控制器正在工作，但 MVC 区域中的控制器开始出现 404 错误。

我查找了 IIS 7 QFE 补丁，但它不适用于 windows 8。通过设置断点，我可以看到该区域已成功注册，并且在完成注册后，我看到路由集合中注册了 4 个路由，第一个是路由对应区域。但是任何对区域 url 的请求都会落入 404 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:14:07.517

我将这个答案留给在升级过程中遇到问题的每个人。

我有一个针对 ASP.NET MVC 3 编译的业务逻辑库（一个不同的 .NET 类库）。

如果您在 ASP.NET MVC 4 项目中使用对针对 ASP.NET MVC 3 编译的其他库的任何引用，则 Web 服务器不会引发任何错误，而是无法加载依赖于外部库的控制器，因此它没有显示加载错误，而是简单地抛出 404 错误，因为它假定未找到控制器。

如果它们不依赖于针对 MVC3 编译的外部库，则在同一区域中定义的控制器运行良好。

简而言之，“任何控制器，取决于针对 MVC3 编译的任何库中的类型，都不会加载，并且会引发 404 错误”。

理想情况下，它应该引发错误。

# jquery - jQuery $.ajax 函数随机无法 index.php

> ID：15503897
> 
> 赞同：1
> 
> 时间：2013-03-19T15:38:44.927
> 
> 标签：jquery, ajax

我有一个提交给函数的简单表单。问题是随机失败并锁定。仔细查看 firebug 后，它不断将我的 url 从 functions/changePassword.php 更改为 functions/index.php

当前功能

```
function submitchangePasswordForm() {
    showLoading();
    var formData = new FormData($('#changePasswordForm')[0]);
    $.ajax({
        url : 'functions/changePassword.php',
        type : 'POST',
        data : formData,
        cache : false,
        contentType : false,
        processData : false
    }).done(function (data) {
        if (data == '1') {
            popup_alert('Your password has been updated successfully.', 'Update Successful', 'Ok');
            $("html, body").animate({
                scrollTop : 0
            });
            $('#changePasswordForm').each(function () {
                this.reset();
            });
        } else {
            popup_alert('An error occured preventing us from changing your password. <br> Error: <br>' + data, 'Update Failed', 'Ok');
            $('#old_pass').val('');
            $('#changePasswordForm').submit();
        }
        hideLoading();
    });
} 
```

在任何人询问错误重新提交之前使用，因为我正在使用 jQuery 验证来显示该字段再次为空白。

这是一个错误还是我做错了什么导致错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:38:11.073

我只是遇到了类似的问题，虽然它没有让我返回 Index，但这可能是一个 .htaccess 设置。

解决方案是将我的 URL 写为`url : '/directory/page.php'` 希望它也适用于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:07:10.500

你能展示一下`<form onsubmit ..`方法吗？当它失败时，您正在调用`$('#changePasswordForm').submit()`，但不清楚该`action`属性是什么。

如果您`<form>`没有`action='somewhere'`字段，它将提交到同一页面。我猜大概就是这样。

# svn - SVN：资源过期；尝试更新

> ID：15503900
> 
> 赞同：3
> 
> 时间：2013-03-19T15:38:49.623
> 
> 标签：svn, tortoisesvn

我正在使用 Win'7 和 Tortoise SVN

*   今天早上点击了“SVN Commit”
*   提名了几个文件，我说好
*   SVN 开始工作了。
*   正确提交的所有其他文件

一个文件有问题。该文件的访问和使用与所有其他文件完全相同。它们是用作编写代码的输入的源文件。

红字写错了。。。

```
Error: Commit failed (details follow):
Error: File or directory 'SOURCES\MyFileName.s' is out of date; try updating  
Error: resource out of date; try updating` 
```

尝试更新，没有复制/粘贴错误，抱歉这个神秘问题。我认为这与冲突或树有关

文件附加了一些奇怪的图标

```
Error: Commit failed (details follow):
Error: Aborting commit:   
Error: 'C:\...big...long...path...and...MyFileName...'
Error: remains in conflict 
```

[Stack Overflow 上的这个问题](https://stackoverflow.com/questions/1192304/why-does-svn-not-update-correctly-is-there-a-workaround-besides-re-downloading)有一个答案，说这个错误的原因是添加一个新的子目录而不使用`SVN_MkDir`或其他东西。我已经毫无问题地向我的树中添加了几个子目录。

更重要的是，这只是一个文件，而不是任何其他文件，并且它已被视为与其他文件相同（实际上是几个月）。我不时地编辑、保存和提交它（与子目录中的其他完全一样）。

另一个答案建议`SVN Cleanup`我尝试过，结果是另一个错误消息并且文件仍然“冲突”，无论这意味着什么。

好吧，这里有什么罪？

仅供参考，这是我正在使用的 SVN 版本

```
 TortoiseSVN 1.6.6, Build 17493 - 32 Bit , 2009/10/19 20:22:18
 Subversion 1.6.6, 
 apr 1.3.8
 apr-utils 1.3.9
 neon 0.28.6
 OpenSSL 0.9.8k 25 Mar 2009
 zlib 1.2.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-12T23:47:43.140

我没有*确切的*解决方案，而是一个*足够接近的解决方法*：

当我在 Debian VM 来宾上运行 subversion 时遇到完全相同的问题时，在一个文件*更改了一行*并且看不到冲突时，最终对我有用的是将该文件复制到我通过 TortoiseSVN 管理的 Windows 7 主机上的*另一个结帐*，然后从那里提交。然后我可以在我的 Debian 客户机上 svn-update 工作副本。

# mysql - MySQL更新不更新所有记录

> ID：15503905
> 
> 赞同：3
> 
> 时间：2013-03-19T15:38:56.423
> 
> 标签：mysql, transactions, commit

我有一个列出所有订单的数据库表。每个周末都会运行一个 cron 并为每个客户生成发票。代码循环遍历每个客户，获取他们最近的订单，创建 PDF，然后更新订单表以针对他们的每个订单记录发票 ID。

最后的更新查询是：

update bookings set invoiced='12345' where username='test-username' and invoiced='';

因此，对于 test-username 之前未开票的所有订单，将开票设置为 12345。

我遇到了一个问题，订单被添加到 PDF 中，但没有更新以反映它们已开票的事实。

我已经开始手动运行更新查询并遇到一个奇怪的情况。

一个客户可能有 60 个订单。

如果我运行一次查询，则更新 1 个订单。我再次运行它并更新了 1 个订单，我重复该过程，每次只更新少量订单 - 1 到 3 之间。它不会像我预期的那样在一个查询中更新 60 个。我需要重复运行查询，直到它最终返回“0 行受影响”，然后我可以确定所有行都已更新。

我的查询中没有包含 LIMIT XX，所以我没有理由不能一次更新所有订单。我重复运行的查询每次都是相同的。

有人有什么明智的建议吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:57:42.903

我猜你正在使用 InnoDB。您还没有透露您正在运行的代码类型。

但我敢打赌，您会看到与交易有关的问题。当程序与交互式会话的工作方式不同时，通常是事务问题。

见这里： [http ://dev.mysql.com/doc/refman/5.5/en/commit.html](http://dev.mysql.com/doc/refman/5.5/en/commit.html)

如果您在声明后立即发出`COMMIT;`命令，事情会更好吗？`UPDATE`

请注意，您的语言绑定可能有自己的首选方式来发出`COMMIT;`命令。

处理此问题的另一种方法是发出 SQL 命令

```
 SET autocommit = 1 
```

在您建立连接之后。这将使每个更改数据的 SQL 命令自动执行其 COMMIT 操作。

# html - 如何将所有字段集元素排列在一行上？

> ID：15503907
> 
> 赞同：2
> 
> 时间：2013-03-19T15:39:00.823
> 
> 标签：html, css, visualforce

我有一个由 3 个字段集组成的表单，我想在同一行显示所有单个元素，这意味着：

<输入> 到<输入> <输入> <复选框> <复选框> <复选框> ...

而不是现在的方式： ![在此处输入图像描述](../Images/1a40545f7857fff56e9cb45dc68f8246.png)

所以基本上，我需要将第一个字段集的内容移动到一行中。

这是我的 HTML：

```
<div id="filtersDiv" >
    <fieldset class="reservationFiltersCheckinDates"><legend>{!$Label.check_in}</legend>
    <apex:inputField value="{!reservationSearchCriteria.Check_In__c}"
        id="reservationSearchCheckInStart" onchange="changeValues()"
        styleClass="ajaxableElem" /> {!$Label.to} <apex:inputField value="{!reservationSearchCriteria.Check_Out__c}"
        id="reservationSearchCheckInEnd" onchange="changeValues()"
        styleClass="ajaxableElem" /></fieldset>
    <fieldset class="reservationFiltersSearch"><legend>{!$Label.nameOrReservationId}</legend>

    <input type="text" value="{!reservationSearchText}"
        id="reservationSearchText" onfocus="this.oldvalue = this.value;"
        onkeyup="showAjax(this);changeValues();" />
    <script type="text/javascript">
                        // have to do it here, as this change is lost of partial page refresh, and
                        // we can't add placeholder attribute directly to visualforce tags 
                        j$(document).ready(function() {
                          j$("[id*='reservationSearchText']").attr('placeHolder', 'Search');
                        });                                                      
                    </script></fieldset>
    <fieldset class="reservationFiltersStatus"><legend>{!$Label.status}</legend>
    <label><input type="checkbox" value="{!pendingResCheck1}"
        id="pendResCheckID" onchange="changeValues()" checked="true"
        class="ajaxableElem" />{!$Label.pending}</label> <label><input
        type="checkbox" value="{!checkedInResCheck}" id="checkedInResCheckID"
        onchange="changeValues()" checked="true" class="ajaxableElem" />{!$Label.checkedin}</label>
    <label><input type="checkbox" value="{!cancelledResCheck}"
        id="cancelledResCheckID" onchange="changeValues()" checked="true"
        class="ajaxableElem" />{!$Label.canceled}</label> <label><input
        type="checkbox" value="{!confirmResCheck}" id="confirmResCheckID"
        onchange="changeValues()" checked="true" class="ajaxableElem" />{!$Label.confirmed}</label>
    <label><input type="checkbox" value="{!checkedOutResCheck}"
        id="checkedOutResCheckID" onchange="changeValues()" checked="true"
        class="ajaxableElem" />{!$Label.checkedout}</label></fieldset>
</div> 
```

CSS：

```
#filtersDiv
{
    margin: 10px 0 5px 0 !important;
}
#filtersDiv fieldset
{
    float: left;
    margin-right: 10px;
    border: none;
}
#filtersDiv fieldset legend
{
    font-size: 14px !important;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:54:57.393

您可以简单地将 fieldset 的所有子元素设置为`inline-block`：

```
fieldset > * {
    display:inline-block;
} 
```

[JSFiddle 示例](http://jsfiddle.net/uESBC/1/)。

# moss - 未检索到 SPServices GetListItems 查找字段

> ID：15503908
> 
> 赞同：0
> 
> 时间：2013-03-19T15:39:15.103
> 
> 标签：moss, spservices

对于 MOSS 2007 自定义列表
，其字段是同一站点的另一个自定义列表中的查找类型，
使用以下方法无法引入查找字段，尽管结果*中*存在
其他（非查找）字段

 *```
$().SPServices({
    operation: "GetListItems",
    async: false,
CAMLViewFields: "<ViewFields>" 
              + " <FieldRef Name='Title' />  " 
              + " <FieldRef Name='Dt_x0020_Sec_x0020_Lev' />" 
              + "</ViewFields> ",
      listName: "Media Inventory",
      completefunc: Get_MI_Completed
    }); 
```

响应中存在单行文本字段、日期/时间字段等，
但不存在作为单行文本的查找字段。

GetListItems 中引用的列表有 285 个条目，
查找的值来自一个有 126 个条目的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:47:43.677

表中包含查找字段的任何行（具有 285 个条目的行）是否在该字段上设置了值？还是空白？根据我的经验，如果未设置 Sharepoint 将不会返回列（字段）（非常烦人）。您可以通过将 GetListItems 缩小到单个列表行来测试这一点，然后设置和清除查找字段*

# c# - 如何设置 DateTime 小时、分钟和秒？

> ID：15503910
> 
> 赞同：2
> 
> 时间：2013-03-19T15:39:18.567
> 
> 标签：c#, string, parsing, datetime, seconds

```
private void StartAuction()
{
    DateTime closeDate;
    closeDate = DateTime.Parse(Console.ReadLine());
} 
```

我可以设置日期、月份和年份，但我希望小时、分钟和秒自动设置为一天中的当前时间。例如，如果当前时间是`15:24`，我希望用户添加可能是的日期，`21/03/2013`然后我希望时间是 15:24:00，而不是`00:00:00`像现在这样。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T15:42:32.193

那么您可以使用`DateTime.Now`获取当前时间，然后从中获取[`TimeOfDay`](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday.aspx)并将其添加到[`Date`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)您现有的`DateTime`：

```
private void StartAuction()
{
    DateTime closeDate = DateTime.Parse(Console.ReadLine());
    DateTime closeDateAtCurrentTime = closeDate.Date + DateTime.Now.TimeOfDay;
    ...
} 
```

（我明确地使用了该`Date`属性，因此即使用户*也*输入了时间，它也基本上被删除了。）

作为一个公然的插件，您可能还想考虑使用我的[Noda Time](http://nodatime.org/)库，它将“日期”、“时间”和“日期/时间”的概念分成不同的类型。（以及“本地”值与您知道 UTC 偏移量或时区的值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:41:19.487

你*可以*做

```
closeDate = DateTime.Parse(Console.ReadLine() + " " + DateTime.Now.TimeOfDay); 
```

哪个有效，但看起来有点迂回，考虑到您正在*从*时间格式转换为字符串然后再次转换回时间格式，我不推荐它。那里创建了许多不可变对象。

还有其他选项，包括像您一样解析日期，*然后*添加`TimeOfDay`到它。

```
DateTime closeDate;
closeDate = DateTime.Parse(Console.ReadLine());
closeDate = closeDate.Date + Date.Now.TimeOfDay; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:43:32.513

首先，您需要使用[`DateTime.Parse`](http://msdn.microsoft.com/en-gb/library/1k1skd40.aspx)从命令行读取的内容进行解析。

然后，您可以使用[`DateTime.Now.TimeOfDay`](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday.aspx)like 来做到这一点；

```
DateTime closeDate = DateTime.Parse(Console.ReadLine());
closeDate = closeDate.Date + DateTime.Now.TimeOfDay; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:41:31.767

你可以这样做：

```
closeDate = DateTime.Parse(Console.ReadLine())
    .Add(DateTime.Now - DateTime.Today); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T15:43:29.523

```
var now = DateTime.Now;
var date = new DateTime(input.Year, input.Month, input.Day, now.Hour, now.Minute, now.Second); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T15:44:22.363

那么这个小功能怎么样：

```
public static DateTime ChangeTime(DateTime dateTime)
{
    return new DateTime(
        dateTime.Year,
        dateTime.Month,
        dateTime.Day,
        DateTime.Now.Hour,
        DateTime.Now.Minute,
        DateTime.Now.Second,
        DateTime.Now.Millisecond,
        DateTime.Now.Kind);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T15:45:39.313

这是一个可能的解决方案：

将 DateTime.Now 存储在变量中

```
var date = DateTime.Now; 
```

然后你可以像这样访问小时、分钟和秒：

```
date.Hour;
date.Minute;
date.Second; 
```

# ruby-on-rails - Ruby on Rails has_many 和多态性

> ID：15503913
> 
> 赞同：1
> 
> 时间：2013-03-19T15:39:26.743
> 
> 标签：ruby-on-rails, polymorphism, has-many

我是 Ruby on Rails 的新手，我正在尝试理解抽象类。也许我仍然想到Java结构......

我遵循了许多教程，但仍有一些我需要理解的东西。假设我们要建立一个通讯录。在这个通讯录中，我们有人员和公司。

```
class Address < ActiveRecord::Base
  belongs_to :addressable, :polymorphic => true
end

class Person < ActiveRecord::Base
  has_one :address, :as => :addressable
end

class Company < ActiveRecord::Base
  has_one :address, :as => :addressable
end 
```

目前一切正常。现在，我们有不同的用户，每个人都有一个通讯录。

```
class User < ActiveRecord::Base
  has_one :addressbook
end

class Addressbook < ActiveRecord::Base
  has_many ??????
end 
```

无论是个人还是公司，如何列出所有地址？因为我想按字母顺序显示它们...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:54:21.590

这是您的问题的解决方案：

您`Person`和`Company`必须的`belongs_to`通讯录。一个`Addressbook` `has_many` `:persons`和`has_many` `:companies`。一个`Addressbook` `has_many` `:person_addresses`和`has_many` `:company_addresses`（使用`:through`）

之后，您可以定义一个函数`addresses`，它是和的`person_addresses`并集`company_addresses`。

另一种解决方案是为`Person`and声明一个超类，例如`Company`命名。`Addressable`我认为这是一种更漂亮的方式。

```
class Address < ActiveRecord::Base
  belongs_to :addressable
end

class Addressable < ActiveRecord::Base
  has_one :address
  belongs_to :addressbooks
end

class Person < Addressable
end

class Company < Addressable
end

class User < ActiveRecord::Base
  has_one :addressbook
end

class Addressbook < ActiveRecord::Base
  has_many :addressables
  has_many :addresses, :through => :addressables
end 
```

# actionscript-3 - Adobe AIR 奇怪的 UI 错误

> ID：15503914
> 
> 赞同：0
> 
> 时间：2013-03-19T15:39:27.553
> 
> 标签：actionscript-3, apache-flex, air, mxml

我收到了一个应用程序的错误报告，该应用程序被 100 多人使用了一年多，在使用最新 Adob​​e AIR 的 Mac OSX 上，在这个用户案例中 UI 变得很奇怪

这是一段UI代码，整个代码使用了HGroups和VGroups和spacers的相对布局，没有绝对位置

```
<s:Panel width="100%"  title="Print and Digital">
                        <s:layout>
                            <s:VerticalLayout horizontalAlign="center" paddingBottom="6" paddingLeft="6"
                                              paddingRight="6" paddingTop="6"/>
                        </s:layout>
                        <dialogs:HorizConversiopnsComponent width="100%" id="conversionsComponent"/>
                        <s:HGroup id="paperSizesResGroup" width="100%" verticalAlign="middle">

                            <s:ComboBox id="DIN_combobox" width="33%" change="paperSizeHandler(event)"/>
                            <s:ComboBox id="ANSI_combobox" width="33%" change="paperSizeHandler(event)"/>
                            <s:ComboBox width="33%" id="units_combobox" change="updateInterface()"/>
                        </s:HGroup>

                        <s:HGroup width="100%" verticalAlign="middle">
                            <s:Label width="50" paddingLeft="0" text="Width:"/>
                            <s:Spacer width="100%" height="10"/>
                            <dialogs:NumericTextInput id="width_input" width="80" height="22"
                                                      valueChanged="docDimEdited(event)"/>
                        </s:HGroup>
                        <s:HGroup width="100%" verticalAlign="middle">
                            <s:Label width="50" paddingLeft="0" text="Height:"/>
                            <s:Spacer width="100%" height="10"/>
                            <dialogs:NumericTextInput id="height_input" width="80" height="22"
                                                      valueChanged="docDimEdited(event)"/>
                        </s:HGroup>
                        <s:HGroup width="100%" verticalAlign="middle">
                            <s:Label id="leadingLabel" paddingLeft="0" text="Leading (pt):"/>
                            <s:Spacer width="100%" height="10"/>
                            <dialogs:NumericTextInput id="leading_input" width="80" height="22"
                                                      valueChanged="docDimEdited(event)"/>
                        </s:HGroup>
                        <s:HGroup width="100%" verticalAlign="middle">
                            <s:Label id="correctLeadingLabel" paddingLeft="0" text="Applied Leading (pt):"/>
                            <s:Spacer width="100%" height="10"/>
                            <dialogs:NumericTextInput id="correctLeading_input" width="80" 
                                                      contentBackgroundColor="#EEEEEE" editable="false"/>
                        </s:HGroup>
                        <s:HGroup width="100%" verticalAlign="middle">
                            <s:Label id="charHeightLabel" paddingLeft="0" text="Character Height (pt):"/>
                            <s:Spacer width="100%" height="10"/>
                            <dialogs:NumericTextInput id="characterHeight_input" width="80"
                                                      height="22"
                                                      valueChanged="docDimEdited(event)"/>
                        </s:HGroup>
                        <s:HGroup width="100%" verticalAlign="middle">
                            <s:Label width="90" text="1st Image-line:"/>
                            <s:Spacer width="100%" height="10"/>
                            <dialogs:NumericTextInput id="firstImg_input" width="80" contentBackgroundColor="#EEEEEE" editable="false"/>
                        </s:HGroup>
                        <s:HGroup width="100%" verticalAlign="middle">
                            <s:Label id="hOffsetLabel" text="Horizontal Width (pt):"/>
                            <s:Spacer width="100%" height="10"/>
                            <dialogs:NumericTextInput id="horizOffset_input" width="80" 
                                                      contentBackgroundColor="#EEEEEE" editable="false"/>
                        </s:HGroup>
                        <s:HGroup width="100%" verticalAlign="middle">
                            <s:Label id="docImgLinesLabel" text="Document lines:"/>
                            <s:Spacer width="100%" height="10"/>
                            <dialogs:NumericTextInput id="docLines_input" width="80" editable="false" textMode="true"/>
                        </s:HGroup>

                        <s:HGroup width="100%" height="25" gap="6" verticalAlign="middle">
                            <s:Label width="72" text="Proportions:"/>
                            <s:RadioButton label="Width" id="widthProp_radio" selected="true" groupName="prop_radiogroup" />
                            <s:RadioButton label="Height" id="heightProp_radio" groupName="prop_radiogroup"/>
                            <s:Spacer width="100%" height="10"/>
                            <dialogs:NumericTextInput id="proportionInput" width="80" height="22"
                                                      keyDown="updateProportionsClicked(event)"
                                                      />
                        </s:HGroup>

                    </s:Panel> 
```

这是它的样子（检查带有标签 1st image 的 HGroup ...或 Proportions HGroup ![在此处输入图像描述](../Images/b28eb2a2a5472d3158b388ac204768ce.png)

这是应用程序在正常情况下的外观

![在此处输入图像描述](../Images/48715824af4e51839e96b5b772a3041a.png)

用户说屏幕不是视网膜显示器，所以我不知道这个案例出了什么问题，用户卸载并重新安装了应用程序并安装了最新的 Adob​​e AIR。

# knockout.js - 淘汰赛双向绑定嵌套数组

> ID：15503916
> 
> 赞同：2
> 
> 时间：2013-03-19T15:39:35.587
> 
> 标签：knockout.js

我无法让绑定适用于嵌套数组。页面首次加载时值显示正确，但是当我进行编辑时，绑定对象不会更新。

我在这里创建了一个 jsfiddle：http: [//jsfiddle.net/coverbeck/qCzT6/1/](http://jsfiddle.net/coverbeck/qCzT6/1/)。

我的 HTML 是这样的：

```
<body>
    <ul>
<!-- ko foreach: {data: cities, as: 'city'} -->
        <li>
           <input data-bind="value: city.name"/>
           <span data-bind="text: city.name"></span>
        </li>
    <ul>
    <!-- ko foreach: {data: neighborhoods, as: 'neighborhood'} -->
        <li>
            <input data-bind="value: neighborhood"/>
            <span data-bind="text: neighborhood"></span>
        </li>
    <!-- /ko -->
    </ul>
<!-- /ko -->
</ul>
</body> 
```

我的 JavaScript 是：

```
var sf = {name: ko.observable('San Francisco'),
          neighborhoods: ko.observableArray([
                ko.observable('Haight'), 
                ko.observable('Bayview'), 
                ko.observable('Marina')
           ])
         }; 
var ny = {name: ko.observable('New York'),
          neighborhoods: ko.observableArray([
                ko.observable('Hells Kitchen'), 
                ko.observable('Times Square')
            ])
          };

var cities = ko.observableArray([sf, ny]);
var viewModel = { cities: cities };
ko.applyBindings(viewModel); 
```

当我修改城市名称时，相应的 span 元素会更新。当我修改邻域名称时，相应的 span 元素不会更新。

[我已经在这里](https://stackoverflow.com/questions/15353417/knockout-data-bind-to-array-element-only-half-working)问了一个类似的问题，并且答案有效。我似乎又遇到了同样的问题，除了这一次它是一个嵌套数组，我看到了这个问题。我尝试从该答案中针对嵌套数组进行修复，但在这种情况下似乎没有什么不同。

谢谢，

查尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:48:46.913

我不确定您的问题究竟来自哪里，但可以这样解决：

```
var ny = {name: ko.observable('New York'), 
          neighborhoods: ko.observableArray([
              new neighborhood('Hells Kitchen'), 
              new neighborhood('Times Square')])};

function neighborhood(name) {
    this.name = ko.observable(name);
} 
```

然后你绑定 foreach`neighborhoods`然后绑定到`name`. 问题可能是它不喜欢没有名字的可观察对象？

在这里工作[小提琴](http://jsfiddle.net/qCzT6/2/)

# requirejs - 不要在优化脚本中包含模块

> ID：15503918
> 
> 赞同：1
> 
> 时间：2013-03-19T15:39:45.090
> 
> 标签：requirejs, playframework-2.1, uglifyjs

我正在使用与框架捆绑在一起的 play 2.1 和 requireJs。我有一些客户端 javascript 模块和一些库（例如 jquery、bootstrap 等）。

我想获得以下组合/缩小模块：main.js - 适用于我的所有客户端脚本和 libs.js - 适用于所有库脚本。

我创建了`libs`模块（它在coffeescript中）：

```
requirejs.config(
  paths:
    'jquery': 'jquery-1.8.3'
  shim:
    'jquery-ui-1.9.1':
      deps: ['jquery']
    'jquery.layout-1.3.0-rc30.74':
      deps: ['jquery', 'jquery-ui-1.9.1']
    'bootstrap':
      deps: ['jquery']
    'bootstrap-fileupload':
      deps: ['bootstrap']
)

define(["jquery", "jquery-ui-1.9.1", "jquery.layout-1.3.0-rc30.74",
  "bootstrap", "bootstrap-fileupload"],
->
  return {}
)
```

在我的客户端代码的某个地方，我需要 libs 模块（我试图在依赖项列表和调用中提供它`require("libs");`）但在生产模式下，我将所有客户端代码和 libs 组合在一个`main.js`文件中。

我还指定了`Build.scala`两个模块：

```
 val main = play.Project(appName, appVersion, appDependencies).settings(
      requireJs += "main.js",
      requireJs += "libs.js",
      requireJsShim += "libs.js"
    )
```

如何在生产模式下拆分它们？谢谢你的帮助！祝你有美好的一天！

# validation - 在 CakePHP 中组合验证语法

> ID：15503920
> 
> 赞同：1
> 
> 时间：2013-03-19T15:39:58.593
> 
> 标签：validation, cakephp, model, cakephp-1.3

假设我有一个相当典型的按文档验证数组，我想保留这些规则并为 8 多个其他字段添加特定的验证规则。

原文`$validate`：

```
var $validate = array( 
    'name' => array( 
        'notEmpty'=> array( 
            'rule' => 'notEmpty', 
            'message' => 'Name can not be blank.' 
        ), 
        'allowedCharacters'=> array( 
            'rule' => '|^[a-zA-Z ]*$|', 
            'message' => 'Name can only be letters.' 
        ), 
        'minLength'=> array( 
            'rule' => array('minLength', 3), 
            'message' => 'Name must be at least 3 characters long.' 
        ), 
        'maxLength'=> array( 
            'rule' => array('maxLength', 255), 
            'message' => 'Name can not be longer that 255 characters.' 
        ) 
    ), 
    'email' => array( 
        'email' => array( 
            'rule' => 'email', 
            'message' => 'Please provide a valid email address.' 
        ), 
        'isUnique' => array( 
            'rule' => 'isUnique', 
            'message' => 'This E-mail used by another user.' 
        ) 
    )         
); 
```

我可以将以下规则添加到验证数组中，但我不想重复 8 次。

```
 ////fragment of array
    'field1' => array(
        'greaterThanField' => array(
            'rule' => array('greaterThanField', 'age'),
            'message' => 'This field cannot be greater than age'
        )
    )
////

 function greaterThanField( $field=array(), $compare_field=null ){ 
    foreach( $field as $key => $value ){ 
        $v1 = $value; 
        $v2 = $this->data[$this->name][ $compare_field ];                  
        if($v1 > $v2) { 
            return false; 
        } else { 
            continue; 
        } 
    } 
    return true; 
} 
```

我想添加一个字段名称数组，所有这些字段名称都将使用相同的规则和消息进行评估。我尝试在模型中创建一个变量，然后在 beforeValidate 函数上运行代码，但 beforeValidate 似乎无法访问 compareFields 变量

```
var $compareFields = array('field1', 'field2', 'field3', 'field4', 'field5', 'field6', 'field7', 'field8');

function beforeValidate(){
    foreach ($compareFields as $field) {
        $validate[$field] = array(
            'rule'=> array('greaterThanField', 'age' ),
            'message'=>'Cannot exceed delivery age',
        );
    }
} 
```

实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:04:10.950

如果您使用的是 2.2，[请检查此](http://book.cakephp.org/2.0/en/models/data-validation.html#dynamically-change-validation-rules).

如果您使用的是旧版本并且（如果我正确理解您的问题）您懒得将相同的验证规则添加到多个字段，那么我会在模型的构造函数中动态添加它们。我不喜欢那个解决方案，但我会坚持约定。

# python - 如何更改 Python 2.7 安装包文件夹

> ID：15503922
> 
> 赞同：2
> 
> 时间：2013-03-19T15:40:02.910
> 
> 标签：python, windows, installation, package

我想安装 PyPDF2 包（[https://github.com/knowah/PyPDF2](https://github.com/knowah/PyPDF2)）

我在 Windows 上，所以我这样继续：

`setup.py install`

但我收到此消息错误：

```
running install
running build
running build_py
running install_lib
creating C:\Program Files\Python\Python27\Lib\site-packages\PyPDF2
error: could not create "C:\Program Files\Python\Python27\Lib\site-packages\PyPDF2" : Access is denied 
```

`setup.py`我在我的硬盘 G 上拥有权限，但我在文件上找不到这个 windows 路径。你知道我可以改变这条路吗？

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:42:31.307

试试`setup.py install --user`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:08:28.190

另一种方法是右键单击命令提示符图标并选择“以管理员身份运行”。这将允许您将包安装在“C:\Program Files\Python\Python27... 目录中。--user 是一个很好的解决方案，但它只为当前用户安装，'run as' 为所有用户安装。'如果您使用多个帐户或正在运行需要该软件包的 Web 服务，则 run as' 很有用。

# java - MimeMessage 内容类型 java

> ID：15503925
> 
> 赞同：0
> 
> 时间：2013-03-19T15:40:11.693
> 
> 标签：java, jakarta-mail, mime-types

```
StringBuffer messageText = new StringBuffer();
messageText.append("<style type=\"text/css\">" +
                    "#message p {some style }" +
                    "</style>");
messageText.append("<p>");
(L1)messageText.append("abc’s email level…def");            
messageText.append("</p>");
message.setContent(messageText.toString(), "text/html;");
Transport.send(message); 
```

当我运行代码时，发现输出有两种不同的变体。

我首先在 microsoft word 中键入此消息`abc’s email level…def`，然后将其复制到 eclipse 编辑器中。当我运行电子邮件中的程序消息时，就像这样`abc?s email level?def`

但是，当我`abc’s email level…def`在 Eclipse 编辑器中输入此消息时，我会在电子邮件中看到相同的消息。

即使我从 microsoft word 复制某些内容，我应该在代码中更改什么以在电子邮件中接收相同的消息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:55:08.890

这几乎可以肯定是您的编辑器（在本例中为 MS-Word 和 Eclipse）和您的程序之间的编码问题。您需要验证从 MS-Word 复制和粘贴到 eclipse 的内容在两边都是 UTF-8，我怀疑它不是。

评论者说得对，这个问题是微软的智能引号问题，一般不能正确粘贴，你可以写一个[正则表达式来替换它们](http://axonflux.com/handy-regexes-for-smart-quotes)；但这是针对那些特定字符的特定解决方法，不会处理一般情况。

根本原因几乎可以肯定是您从 MS-Word 粘贴的内容与您的 java 代码所期望的内容之间的编码不匹配。您可以检查您的 Eclipse 设置以验证您是否使用 UTF-8 作为默认设置，检查您的 word 设置以验证源文档也是 UTF-8。

# mysql - 如何使用 IN 运算符处理 MySQL Select 的结果

> ID：15503926
> 
> 赞同：0
> 
> 时间：2013-03-19T15:40:18.533
> 
> 标签：mysql

我试图找出一种有效的方法来从表中选择一小部分随机 id。

使用 IN 运算符似乎是正确的选择，但我不明白如何以我想要的方式使用结果。进行查询后，如何使用结果分配给特定变量？或者有没有办法将值作为查询的一部分分配？

```
$red_car1=1001;
$blue_car2=200;
$green_car3=56;

$query_cars= sprintf("SELECT * FROM cars WHERE id IN (%s, %s, %s)", $red_car1, $blue_car4, $green_car3);
$Cars1 = mysql_query($query_cars, $db) or die(mysql_error());

$red_car1_vin = $row_Cars1['vin'];
$blue_car1_vin = $row_Cars1['vin'];
$green_car1_vin = $row_Cars1['vin']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:54:20.403

熟悉准备好的陈述。准备一次你的语句，然后用 n 个变量执行 n 次。这是相当有效的。或者迭代你的结果：

```
$tmp = array();
while($row_Cars1 = mysql_fetch_array($Cars1))
{
    $tmp[$row_Cars1['id']] = $row_Cars1;    
} 
```

现在你有一个与你的结果相关的数组，你可以像这样使用它：

```
$red_car1_vin = $tmp[$red_car1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:55:15.273

如果您的服务器端语言是 PHP，那么您的代码应该是 -

```
 $con=mysqli_connect("your host","user","password","your db");

     $red_car1=1001;
        $blue_car2=200;
        $green_car3=56;

        $query_cars= "SELECT * FROM cars WHERE id 
        IN (".$red_car1.",".$blue_car2.",".$green_car3.")";
        $Cars1 = mysqli_query($con,$query_cars) or die(mysql_error());

    while($row = mysqli_fetch_array($Cars1))
      {
      echo $row['<<Your Desired field name1>>'] . " " . $row['<<Your Desired field name2>>'];// and so on
      echo "<br />";
      }

mysqli_close($con); 
```

您也可以在这里获得更多有用的信息 - [http://www.w3schools.com/php/php_mysql_select.asp](http://www.w3schools.com/php/php_mysql_select.asp)

谢谢

# c# - 如何在带有 2 个语句的 linq lambda 中使用 sql IN 语句

> ID：15503933
> 
> 赞同：0
> 
> 时间：2013-03-19T15:40:40.543
> 
> 标签：c#, linq

我的说法是

```
Contents.
    Select(x=> new 
        {
            ContentUsers = x.ContentUsers.
                Where(t=>t.UserId==2).
                Select(t=>t.ContentId)
        }).
    Where(y=>y.ContentUsers.Any()) 
```

它给了我一些我想在我的另一个陈述中使用它的 ID。

![在此处输入图像描述](../Images/252ddd6e5348a17ce32d6540308f9bdc.png)

```
Contents.Where(x=>x.Id == 633,634,635) 
```

我怎样才能合并它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:49:26.683

您缺少的是[`Contains`](http://msdn.microsoft.com/en-us/library/bb338641.aspx)功能。在单个查询表达式中表达这一点可能会更简单。如果我将您的代码转换为单个查询表达式，我看起来像这样：

```
var content =
    from c in Contents
    let contentUsers = 
        from x in Contents
        select new
        {
            ContentUsers = 
                from t in x.ContentUsers
                where t.UserId == 2
                select t.ContentId
        }
    where contentUsers.Any(cu => cu.ContentUsers.Contains(c.Id))
    select c; 
```

但是，看起来您想要的只是获取与集合中`Content`给定关联的记录。这要容易得多。`UserID``ContentUsers`

```
var content =
    from c in Contents
    where c.ContentUsers.Any(t => t.UserId == 2)
    select c; 
```

或者如果你喜欢

```
var content = Contents.Where(c => c.ContentUsers.Any(t => t.UserId == 2)); 
```

# c# - 使用 YouTube API 从我自己的帐户中检索隐藏的播放列表，而无需从客户端请求密码 (.NET/C#)

> ID：15503939
> 
> 赞同：0
> 
> 时间：2013-03-19T15:40:58.657
> 
> 标签：c#, asp.net, youtube-api, oauth-2.0, youtube.net-api

我正在尝试通过在 ASP.NET (C#) 中构建的服务器端 Web 应用程序从我自己的个人 YouTube 帐户中检索我自己的私人播放列表。根据我所做的研究，共识似乎是我的应用程序需要使用 Oauth 2.0 对我的帐户进行身份验证。我希望我的网站显示我设置为隐藏的几个播放列表中的视频列表，并且我希望该列表显示在公共页面上。出于这个原因，我显然不想在每次浏览页面时都输入我的 youtube 帐户详细信息。

我看了又看，似乎没有任何明确的方法可以做到这一点。有人建议通过 Oauth 2.0 身份验证流程一次，然后使用它在重定向 URL 中返回的代码生成刷新令牌，并在您的应用程序中使用该令牌；我读过的另一个建议是使用 API 服务帐户。似乎在任何地方都没有任何可用的示例代码。

有没有人必须做同样的事情，你是否成功设置它？Google 自己的 API 客户端库文档非常糟糕，尤其是对于 .NET 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:17:20.040

If the playlists are hidden you won't be able to access them without logging in.

If the playlists are public you can always query for them through the YouTube API without having to pass your credentials.

# javascript - 如何在一处检测图像上的 403 错误？

> ID：15503943
> 
> 赞同：5
> 
> 时间：2013-03-19T15:41:07.327
> 
> 标签：javascript

当我的网站在阻止某些域的组织内使用时引发此错误 - 即社交网站等。它们只是指向这些域上的图像的链接，使用`<img src = "">`

**从 Chrome 控制台**

> 加载资源失败：服务器响应状态为 403 (Forbidden: category denied) “Followed by URL”

如何实际检测此错误并使用默认图像显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:44:02.263

我找到了这个：

```
 function imgError(image){
        image.onerror = "";
        image.src = "/images/noimage.gif";
        return true;
    }

    <img src="someimage.png" onerror="imgError(this);"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:45:03.747

如果你使用 jquery，你可以这样做：

```
$("img").error(function(){
    $(this).attr("src", "default-image.png");
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:44:44.553

您可以使用`onerror`属性执行 JavaScript 函数来更改`src`属性。

[http://www.w3schools.com/jsref/event_img_onerror.asp](http://www.w3schools.com/jsref/event_img_onerror.asp)

# c# - 在 TPL 的一个线程中只执行一次函数

> ID：15503952
> 
> 赞同：0
> 
> 时间：2013-03-19T15:41:36.507
> 
> 标签：c#, multithreading, task-parallel-library

这是场景：

1.  我有一个在所有线程之间共享的代理。
2.  如果这个代理被阻塞，那么只有一个线程需要从 ProxyQueue 中取出一个代理，而不是所有线程。对于出队，我现在使用互锁，因此一次只有一个线程可以进入该函数。

    ```
     private static volatile string httpProxy = "1.1.1.1";
                private static int usingResource = 0;
                string localHttpProxy;

                  try
          {
                                                                                       HttpWebRequest oReqReview =         HttpWebRequest)WebRequest.Create(url);                                                          
    if (IsHttpProxyDequeue)
     {
    oReqReview.Proxy = new WebProxy(httpProxy, 8998);
     localHttpProxy = httpProxy;

         }
    HttpWebResponse respReview = (HttpWebResponse)oReqReview.GetResponse();
    DoSomthing();
    }
    catch (Exception ex)
    {
    if (0 == Interlocked.Exchange(ref usingResource, 1))
    {

    if (ex.Message == "The remote server returned an error: (403) Forbidden." &&      httpProxy     == localHttpProxy)
    {
                                                                                               IsHttpProxyDequeue =     currentQueueProxy.TryDequeue(out httpProxy);

    }
    Interlocked.Exchange(ref usingResource, 0);
    }
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:20:03.037

Interlocked.Exchange 不会阻塞。它仅执行值的交换并报告结果。如果 的初始值为`usingResource`0 并且三个线程`Interlocked.Exchange`同时命中，则在一个线程上 Exchange() 将返回零并将 usingResource 设置为 1，而在其他两个线程上 Exchange() 将返回 1。线程 2 和 3将立即继续执行 if 块之后的第一条语句。

如果您希望线程 2 和 3 阻止等待线程 1 完成，那么您应该使用诸如互斥锁之类的东西，例如 C#`lock(object)`语法。锁定阻塞线程。

`Interlocked.Exchange`不阻塞线程。 `Interlocked.Exchange`在编写非阻塞线程协调时很有用。`Interlocked.Exchange`说“如果我从这个交换中得到特殊的价值，我会绕道做这个特殊的操作，否则我会继续做这件事而无需等待。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:25:30.737

确实提供了对该值的`Interlocked`同步，因此如果多个线程同时到达该点，则只有其中一个会得到`0`返回。所有其他人都会得到`1`回报，直到该值被设置回“0”。

您的代码中有竞争条件，这可能是导致问题的原因。考虑以下事件序列：

```
Thread A sees that `IsProxyDequeue` is `false`
Thread A calls `Interlocked.Exchange` and gets a value of '0'
Thread A logs the error
Thread B sees that `IsProxyDequeue` is `false`
Thread A dequeues the proxy and sets `usingResource` back to `0`
Thread B calls `Interlocked.Exchange` and gets a value of `0` 
```

此时，线程 B 也将出列代理。

您需要想出一种不同的方式来提供同步。我怀疑你会想要类似的东西：

```
object lockObj = new object();
lock (lockObj)
{
    if (!IsProxyDequeue)
    {
        // get the proxy
        IsProxyDequeue = true;
    }
    oReqReview.Proxy = new   WebProxy(httpProxy, 8989);
} 
```

如果你想避免竞争条件，但又不想让其他线程阻塞，那么使用`Monitor.TryEnter`而不是`lock`.

# google-app-engine - 清除我的 google app engine 应用的第一次结算费用需要多长时间？

> ID：15503953
> 
> 赞同：1
> 
> 时间：2013-03-19T15:41:44.413
> 
> 标签：google-app-engine, billing, quota

我制作了一个应用程序来发送大量邮件。[正如我在配额页面](https://developers.google.com/appengine/docs/quotas#Mail)上看到的那样，谷歌每天最多只能接收 100 个收件人：

> 每天 100 条消息，直到第一次收费被清除；此后每天 20,000 条消息

部署应用程序后，我特意将 100 个收件人的限制设置为上限，这会向我的帐单帐户收取 0.01 美元的费用。这也显示在我的[帐单历史记录](http://i.imgur.com/F9hOBTL.png)中。

但是，我还设置了每周 2.10 美元的预算。根据我的 Google 电子钱包，与此预算相关的一次收费已成功完成。查看我当前的配额，即使等待 24 小时以重置我的配额，它似乎仍然限制为 100。有没有人有同样的问题？我不知道下一步该做什么，也不知道如何解释我的帐单历史记录中提到的“请假宽限期”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:17:50.290

如果您是新客户，您将需要等待一周，但您已经结清了一笔费用，因此您应该能够立即超过 100 个用户配额。您可能想尝试发送邮件并查看是否收到超出配额的异常。

“离开宽限期”消息意味着[之前的收费未能让您进入宽限期](https://developers.google.com/appengine/kb/billing#grace)。然后，您后来成功地从您的信用卡中扣款并离开了宽限期。

App Engine 已[宣布将很快更改其计费系统](http://googleappengine.blogspot.com/2013/03/app-engine-176-released.html)。所以这个答案将在几周内过时。

# asp.net-mvc - 在 Html.ActionLink 中添加类

> ID：15503954
> 
> 赞同：0
> 
> 时间：2013-03-19T15:41:52.157
> 
> 标签：asp.net-mvc

如何在此处添加类名？

```
 Html.ActionLink(
       item.Name, 
       "GetProducts", 
       "Products", 
        new { CityName = item.CityName.UnderScore(), CategoryName = item.Name.UnderScore() },
        null); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:42:31.707

使用这个[Html.ActionLink](http://msdn.microsoft.com/en-us/library/dd493068%28v=vs.108%29.aspx)重载方法

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    RouteValueDictionary routeValues,
    IDictionary<string, Object> htmlAttributes
) 
```

你的例子

```
Html.ActionLink(
   item.Name, 
   "GetProducts", 
   "Products", 
    new { CityName = item.CityName.UnderScore(), CategoryName = item.Name.UnderScore() },
    new { @class="some_class" }); 
```

# infovis - 曼哈顿边缘的太空树

> ID：15503955
> 
> 赞同：0
> 
> 时间：2013-03-19T15:41:57.303
> 
> 标签：infovis

是否可以使用 inforVis/jit 在空间树中创建曼哈顿风格的边缘。

它不是一个选项： http: [//philogb.github.com/jit/static/v20/Docs/files/Options/Options-Edge-js.html](http://philogb.github.com/jit/static/v20/Docs/files/Options/Options-Edge-js.html)。但我看到自定义边缘是可能的。

有人已经这样做了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T20:59:21.903

如果您还没有弄清楚这一点（以及其他读者）...

在传递构造函数选项时，尝试将 edge 指定`type`为`bent:line`，有点像下面这样。

```
Edge: {
    type: 'bent:line',
    overridable: true,
    color: "#000000",
    lineWidth: 2
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T11:31:06.953

用这个

[https://philogb.github.io/jit/static/v20/Docs/files/Visualizations/Spacetree-js.html#ST.Plot.EdgeTypes](https://philogb.github.io/jit/static/v20/Docs/files/Visualizations/Spacetree-js.html#ST.Plot.EdgeTypes)

ST.Plot.EdgeTypes

此类包含 Graph.Adjacence 内置类型的列表。实现的边缘类型是'none'、'line'、'arrow'、'quadratic:begin'、'quadratic:end'、'bezier'。您可以添加自定义边缘类型，将您的可视化自定义到极致。

# ruby-on-rails - find_or_create_by 在多个创建操作中？

> ID：15503956
> 
> 赞同：0
> 
> 时间：2013-03-19T15:42:01.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我能够使用下面的创建方法一次创建多个记录：

```
 def create    
    rate_price = params[:rate][:rate]
    mlos = params[:rate][:mlos]

    start_date = Date.parse(params[:start_date])
    end_date = Date.parse(params[:end_date])

    dates = (start_date..end_date).to_a.select {|k| (params[:rate][:days]).reject(&:blank?).map(&:to_i).include?(k.wday)}
    room_ids = params[:rate][:room_ids].reject(&:blank?).map(&:to_i)

    @rates = []
    dates.zip(room_ids).each do |date, room_id|
      rate = Rate.new(:rate => rate_price, :mlos => mlos, :room_id => room_id, :dayrate => date )
      #rate = Rate.find_or_create_by_dayrate(date, :rate => rate_price, :mlos => mlos, :room_id => room_id)

      @rates << rate
    end

    @rates.map(&:save)

    respond_to do |format|
      if @rates.any? { |rate| !rate.persisted? } 
        format.html { render action: "new" }
        format.json { render json: @rates.detect { |rate| !rate.persisted? }.errors, status: :unprocessable_entity }
      else
        format.html { redirect_to :back, notice: 'Rates were successfully created.' }
        format.json { render json: @rates, status: :created, location: @rates }
      end
    end
  end 
```

但是当我想使用`find_or_create_by`（我的代码中的注释行）创建或更新记录（如果它们已经存在）时，似乎没有更新记录，只有创建有效。知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:47:56.207

调用该方法时，`find_or_create_by`仅在您要创建新记录时使用。根据我对您的代码的理解，您想使用`dayrate`日期列来创建费率。而且由于您的问题是为什么不更新记录，所以我假设您想要更新记录（如果它们已经在数据库中）。您可以使用以下代码实现这一点

```
rate = Rate.where(dayrate: date).first_or_initialize
rate.attributes = { rate: rate_price, mlos: mlos, room_id: room_id } 
```

this will make sure that the rate's attributes will use the values you pass if they pass the validation (since you're calling `map(&:save)` after the block.

# mysql - 无法停止 percona xtradb 集群节点

> ID：15503957
> 
> 赞同：4
> 
> 时间：2013-03-19T15:42:03.470
> 
> 标签：mysql, replication, percona

我在 ubuntu 12.04 计算机上运行了三个 Percona xtradb 节点。我想停止其中一个节点，而不断开 eth0。

我试过了：`$ service mysql stop`和`$ /etc/init.d/mysql stop`

两个命令都说`stopping...OK`. 但是我仍然可以连接到节点上的mysql。

如何临时将节点从集群中取出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:30:03.147

我在我的 Ubuntu 12.04 服务器上也遇到了这个问题。

我唯一能找到杀死“mysqld”的是这个命令：

```
sudo stop mysql 
```

很简单，我知道。但它对我有用。希望这也能解决您的问题。

来源：[http ://www.itfromscratch.com/how-to-stop-the-percona-mysql-server/](http://www.itfromscratch.com/how-to-stop-the-percona-mysql-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T22:32:16.687

您始终可以使用“mysqladmin shutdown”彻底关闭任何 MySQL 服务器（前提是您具有适当的权限/凭据）

# foreach - SSIS Foreach通过一个表，插入另一个并删除源行

> ID：15503959
> 
> 赞同：2
> 
> 时间：2013-03-19T15:42:07.010
> 
> 标签：foreach, ssis, insert

我有一个 SSIS 例程，它从一个非常动态的表中读取数据，并将它找到的任何行插入到不同数据库中的表中，然后截断原始源表。

由于源表的动态特性，这种截断会导致行无法进入第二个数据库，这并不奇怪。

仅删除已迁移的那些行的最佳方法是什么？

源表上有一个标识列，但未迁移。

我无法更改任何一个表架构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:57:35.310

一个可能听起来很愚蠢但有效的选项是先删除并使用[OUTPUT](http://msdn.microsoft.com/en-us/library/ms177564.aspx)子句。

![控制流设置](../Images/a7b179f4ebe6791843f5f85cdbe83c82.png)

我创建了一个简单的控制流来为我填充一个表。

```
IF EXISTS
(
    SELECT 1 FROM sys.tables AS T WHERE T.name = 'DeleteFirst'
)
BEGIN
    DROP TABLE dbo.DeleteFirst;
END

CREATE TABLE dbo.DeleteFirst
(
    [name] sysname
);

INSERT INTO
    dbo.DeleteFirst
SELECT
    V.name
FROM
    master.dbo.spt_values V
WHERE
    V.name IS NOT NULL; 
```

![数据流](../Images/929548343e1fdd15ba3b139b7fb57435.png)

在我的 OLE DB 源中，不使用 SELECT，而是删除要沿管道传输的数据并输出 DELETED 虚拟表。类似的东西

```
DELETE
    DF
OUTPUT
    DELETED.*
FROM
    dbo.DeleteFirst AS DF; 
```

![结果](../Images/a79e215275466edab533a67e1d40ed54.png)

它有效，有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:11:58.747

一种选择是创建一个表来记录已处理记录的身份，然后创建一个单独的包（或数据流）来删除这些记录。如果您已经在某处记录已处理的记录，那么您可以在那里添加身份 - 否则，创建一个新表来存储数据。

第二种选择：如果您试图避免创建额外的表，则将记录选择和记录处理分为两个阶段。从广义上讲，您将选择控制流中的所有记录，然后在数据流中逐个处理它们。具体来说：

1.  创建一个 Object 类型的变量来存储您的记录列表，并创建另一个与您的身份类型匹配的变量（大概是 int）来存储“当前记录身份”。
2.  在控制流中，添加一个执行 SQL 任务，该任务使用查询来构建要处理的标识值列表，然后将它们存储到记录列表变量中。
3.  添加一个 Foreach 循环容器来处理该列表；foreach 任务会将当前记录标识符加载到您在上面定义的第二个变量中。
4.  在 foreach 任务中，添加一个数据流来复制该单条记录，然后将其从源中删除。

网上有很多这样的例子；例如，[这个](http://consultingblogs.emc.com/jamiethomson/archive/2005/07/04/ssis-nugget_3a00_-execute-sql-task-into-an-object-variable-_2d00_-shred-it-with-a-foreach-loop.aspx)来自可敬的杰米汤姆森，或者[这个](http://www.codeproject.com/Articles/14341/Using-the-Foreach-ADO-Enumerator-in-SSIS)包含更多细节。

请注意，您没有谈论数据的规模；如果您有大量记录，第一个建议可能是更好的选择。请注意，在这两种情况下，您都会失去表截断的优势（因为您使用的是标准`delete`调用）。

# linux - Shell 脚本：比较时出错 (Linux)

> ID：15503962
> 
> 赞同：2
> 
> 时间：2013-03-19T15:42:13.260
> 
> 标签：linux, shell, makefile

我通过使用 make 将参数传递到 shell 脚本：

```
smktestrun: smktest
        @../projects/test.sh $(TESTARGS) 
```

然后调用 Makefile

```
$ make smktestrun TESTARGS="-abc" 
```

我在 shell 脚本中的代码是：

```
if [ "$1" == "-abc" ]; then
    ./test123
else
    ./test678
fi 
```

但我收到以下错误：

```
+ [ -abc == -abc ]
15:15:08 [: 1: -abc: unexpected operator 
```

因此代码的 else 部分被执行。我也尝试过 `if [ "$1" -eq "-abc" ];` ，但这也给出了类似的错误。

有人可以帮我弄清楚出了什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:29:21.967

正确的运算符是`=`, not`==`或`-eq`:

```
if [ "$1" = "-abc" ]; then
    ./test123
else
    ./test678
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:24:46.807

看起来您以某种方式使用了无效的`[`. 无论是 make 调用的 shell 的内置函数，还是`/usr/bin/[`. 作为一种解决方法，您可能可以这样做：

```
if test x"$1" = x"-abc"; then 
```

请注意，`==`作为运算符使用 to`test`是不可移植的。改为使用`=`。

# selenium-webdriver - StaleElementReference 异常

> ID：15503973
> 
> 赞同：0
> 
> 时间：2013-03-19T15:42:23.177
> 
> 标签：selenium-webdriver, staledataexception

我正在努力解决这个`StaleElementReferenceException`问题。我已经看到很多关于该主题的讨论，但我无法找到解决我面临的问题的方法。

测试是获取网页页脚的所有链接，然后通过单击链接并验证页面标题来验证链接是否处于活动状态。

首先，我在一个数组列表中找到并存储所有链接。我将链接名称与从数据库中检索到的值进行比较。然后对于每个链接，我单击它并验证页面标题。然后使用“driver.navigate.back()”，返回原始页面并继续其余链接。

但是，当控件返回到页面时，`StaleElementReferenceException`就会发生这种情况。

任何人都可以建议我摆脱这种情况吗？

谢谢， 阿努杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:42:13.050

当您将所有链接存储在页脚中时，您正在抓取这些元素，因为它们在那个时间点上。在导航到不同的页面时，这些特定元素不再存在。当您返回到后面时，这些元素已被重新创建。

虽然元素通过标识符相同，但它们是不同的实例，因此数组中的旧元素是“陈旧的”。

我建议仅将链接标识符（而不是链接元素本身）存储为字符串，然后在每次加载页面时搜索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T09:25:14.210

您可以按如下方式处理进入和进入新选项卡：

String baseHandle = driver.getWindowHandle();

```
 Set<String> sr = driver.getWindowHandles();

                    if (sr.size()>1){

                    Set<String> sr1 = driver.getWindowHandles();
                    sr1.remove(baseHandle);

                    Iterator itr = sr1.iterator();

                    driver.switchTo().window(itr.next().toString());

                    System.out.println("Page Title is : " + driver.getTitle());

                    driver.close();

                    driver.switchTo().window(baseHandle); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T11:15:48.977

我遇到了类似的问题，在我的情况下，当我在文本框中输入内容时，它会导航到另一个页面，所以当我回到前一页时，该对象变得陈旧。

所以这导致了异常，我通过再次初始化元素来处理它，如下所示 -

```
PageFactory.initElements(driver, Test.class); 
```

因此，当您向后导航时，请确保您再次初始化该页面的所有元素，以使该对象不会过时。

# java - 为什么 transaction.wasCommitted() 返回 false？

> ID：15503976
> 
> 赞同：0
> 
> 时间：2013-03-19T15:42:30.387
> 
> 标签：java, mysql, hibernate, jakarta-ee, glassfish

我是 hibernate 和 java-ee 的新手，我想知道是否有人能告诉我为什么这段代码返回 false，即使通过查看数据库我可以看到事务实际上已提交：

```
 session.beginTransaction();
    session.saveOrUpdate(user);
    session.getTransaction().commit();
    return session.getTransaction().wasCommitted(); //Always false 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:47:42.437

`wasCommitted()``true`即使提交**成功**也不必总是返回。`true`如果交易（明确地）`committed`通过此本地交易，它将返回；`false`否则。

从[文档](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Transaction.html#wasCommitted())中：-

> **被承诺**
> 
> 即使在成功调用 commit() 之后，此方法也可能返回 false。例如，基于 JTA 的策略 no-op on commit() 调用，如果它们没有启动事务；在这种情况下，他们还将 wasCommitted() 报告为 false。

# xml - 按 XML 标记拆分文件

> ID：15503980
> 
> 赞同：1
> 
> 时间：2013-03-19T15:42:32.863
> 
> 标签：xml, unix, tags, split, command

我有一个非常大的 xml 文件（1.25 GB），我需要将其拆分为较小的文件才能处理它们。该文件包含以标签开头和结尾的语言数据：

> < 文本 id="www.example.com>

和

> </文>

我想用这些标签分割较大的文件。因此，例如，

> < 文本 id="www.example.com>
> 
> **你好**
> 
> </文>
> 
> < 文本 id="www.example.com>
> 
> **这是**
> 
> </文>
> 
> < 文本 id="www.example.com>
> 
> **一个例子**
> 
> </文>

本质上是三个不同的文件：开始和结束由“文本”标签标记。例如：

**文件 1**

> < 文本 id="www.example.com>
> 
> **你好**
> 
> </文>

**文件 2**

> < 文本 id="www.example.com>
> 
> **这是**
> 
> </文>

**文件 3**

> < 文本 id="www.example.com>
> 
> **一个例子**
> 
> </文>

例如，我想这可以通过在 Perl 中编写脚本来完成，但我想知道是否有任何一种“一站式”方式来使用 unix 分割这个文件。

我知道拆分命令对于根据行或文件大小将大文件拆分为较小的文件很有用。但是，是否有类似的命令允许通过 xml 标签进行拆分？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:07:38.223

在此处找到以下 PERL 程序：[根据分隔符将一个文件拆分为多个文件](https://stackoverflow.com/questions/11313852/split-one-file-into-multiple-files-based-on-delimiter)

```
#!/usr/bin/perl
open(FI,"file.txt") or die;
$cur=0;
open(FO,">res.$cur.txt") or die;
while(<FI>)
{
    print FO $_;
    if(/^<\/text>/) # Added \
    {
        close(FO);
        $cur++;
        open(FO,">res.$cur.txt") or die;
    }
}
close(FO); 
```

似乎也可以解决问题，没有最大上限。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:04:37.740

以下 awk 解决了这个问题，但不幸的是，输出文件限制在 1000 个左右

> ```
> awk '{print $0 ""> "file" NR}' RS='' input-file 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T17:09:35.663

它比一个简单的 awk 命令复杂得多，而且我不知道文件是否很大，但是您可以尝试使用 XSLT V2.0 样式表`result-document`来生成所有文件。

与正则表达式相比，使用 XSLT 的一个优点是，如果文件格式稍有变化，或者如果您想要拆分的节点上有属性，它将有更好的支持。

# html - 单页应用程序和内联 Fancybox 无法正常工作

> ID：15503981
> 
> 赞同：0
> 
> 时间：2013-03-19T15:42:36.333
> 
> 标签：html, fancybox-2, single-page-application, durandal

我正在尝试制作 SPA 并将 Hot Towel 模板与 durandal 一起使用。到目前为止，我已经成功地在我的水疗中心添加了一个 Fancybox，它显示了一张图片

```
<a class="fancybox-thumb" rel="fancybox-thumb" href="http://farm9.staticflickr.com/8486/8225588056_d229e8fe57_b.jpg" title="Porth Nanven (MarcElliott)">
        <img src="IMAGEPATH" alt="" />
    </a>

$(document).ready(function () {
        $(".fancybox-thumb").fancybox({
            openEffect: 'elastic',
            closeEffect: 'elastic',
            helper: {
                title: {
                    type: 'outside'
                },
                thumbs: {
                    width: 50,
                    height: 50
                }
            }
        });

        $('#label').click(function () {
            $('#inline').fancybox();
        });

    }); 
```

这工作不那么正常，但没关系；）

现在我想在fancybox中有一个自己的内联，如下所示：

```
<div id="inline" style="display:none;width:500px;">
        <p>
            <a id="add_paragraph" title="Add" class="button button-blue" href="javascript:;">Add new paragraph</a>
            &nbsp;
            <a href="javascript:$.fancybox.close();">Close</a>
        </p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        </p>
</div> 
```

当我点击时不：`<a class="fancybox-thumb" href="#inline">Inline</a>` 我确实得到了带有我的信息的幻想框。但是 url 被设置回 localhost:2321/#inline 所以我被重定向回了家，但我确实看到了幻想框。我该如何解决这个问题，以便花式框在我的 SPA 中显示一个正确的页面并留在那里？

格。乐华

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:12:09.007

如果你已经初始化了 fancybox

```
$(".fancybox-thumb").fancybox({
    openEffect: 'elastic',
    closeEffect: 'elastic',
    helper: {
        title: {
            type: 'outside'
        },
        thumbs: {
            width: 50,
            height: 50
        }
    }
}); 
```

那么您可以对*图像*和*内联*内容使用相同的脚本，因此图像的链接：

```
<a class="fancybox-thumb" rel="fancybox-thumb" href="http://farm9.staticflickr.com/8486/8225588056_d229e8fe57_b.jpg" title="Porth Nanven (MarcElliott)"><img alt="" src="http://farm9.staticflickr.com/8338/8224516167_bc7a5f6699_m.jpg" /></a> 
```

和*内联*内容的链接：

```
<a class="fancybox-thumb" data-fancybox-type="inline" href="#inline">Inline</a> 
```

请注意，我们添加了`data-fancybox-type="inline"`属性来定义`type`此特定项目的内容。

您的*内联*html 结构可以保持不变：

```
<div id="inline" style="display:none;width:500px;">
    <p>
       <a id="add_paragraph" title="Add" class="button button-blue" href="javascript:;">Add new paragraph</a>
&nbsp; <a href="javascript:$.fancybox.close();">Close</a>
    </p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
</div> 
```

见**[JSFIDDLE](http://jsfiddle.net/DQXrQ/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:41:38.740

我有这个工作;）

这就是我所做的，

HTML：

```
<a class="fancybox-link">Inline</a>    

    <div style="display: none">
        <div id="inlineContent" style="width:1000px;">
            <h2>Lorem ipsum dolor sit amet</h2>

            <p>
                <a id="add_paragraph" title="Add" class="button button-blue" href="javascript:;">Add new paragraph</a>
                &nbsp;
                <a href="javascript:$.fancybox.close();">Close</a>
            </p>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
            </p>
        </div>
    </div> 
```

Javascript：

```
 $("a.fancybox-link").click(function (e) {
            $.fancybox({
                content: $('#inlineContent').html(),
                type: 'inline'             
            });
            return false;
        }); 
```

再见

# c# - 如何在 C# 中使用接口或抽象类？

> ID：15503994
> 
> 赞同：-2
> 
> 时间：2013-03-19T15:43:23.340
> 
> 标签：c#

我已获得第 3 方 DLL。

我首先尝试像这样启动对象：

```
TestClass MyClass = new TestClass(); 
```

但是 Visual Studio 告诉我使用界面。

我以前从未这样做过，也不知道从哪里开始。

错误：

> 类型“MyClass.blabla”没有定义构造函数 无法嵌入互操作类型“MyClass.Subclass”。请改用适用的接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:47:57.733

这很可能是因为您使用的是 COM 类。如果是这种情况，您很可能会想写：

```
ITest myTest = new TestClass(); 
```

COM 包装器经常`ITest`通过名为`TestClass`. 但是，在使用 COM 时，您（按设计）通常只针对接口 ( `ITest`) 编写代码，并且不想直接针对实现编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:45:48.380

这完全取决于如何`TestClass`声明。如果 TestClass 是`abstract`您不能直接创建它的实例，而是必须`Derived`从 TestClass 的类之一创建实例。

```
TestClass test = new TestClassDerived(); 
```

在哪里

```
class TestClassDerived : TestClass
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:46:11.080

它可能会为您提供某种初始化方法或作为构造函数传递。您不能以您尝试的方式实例化抽象类或接口（即调用构造函数）

# database - 从 64 位 Windows 7 连接到 32 位 Oracle 数据库

> ID：15503995
> 
> 赞同：2
> 
> 时间：2013-03-19T15:43:23.513
> 
> 标签：database, windows, oracle, client

如果这个问题已经被回答（根据我的研究它没有），请原谅我。

我的问题是，如果我正在运行 Windows 7 64 位专业版并尝试连接到我的一台本地服务器上的 32 位 Oracle 10g 数据库，

*   a) 我应该使用 32 位还是 64 位版本的 Oracle 客户端连接它？
*   b) 安装客户端后是否应该有任何额外的配置步骤来建立与数据库的连接？

当 Windows XP 32 位成为标准时，我仍然有一个预配置的 TNSNAMES.ORA 文件。

谢谢大家的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:53:27.500

您说 Oracle 服务器在您网络上的计算机上的 32 位计算机上运行。在这种情况下，应该没有太大问题。

在尝试连接之前，请确保以下内容：

1.  Oracle 服务器上的侦听器已启动并正在运行。
2.  Oracle 服务器没有隐藏在防火墙后面。Oracle 的端口号通常为 1521。连接前请确认。
3.  您已在计算机上安装了 Oracle SQL Developer 或 Toad 或类似的数据库客户端。确保它已正确安装并且已启动并正在运行。

当您拥有所有这些方便时，您可以在 SQL Developer 或 Toad 中创建一个新连接，并填写以下详细信息：

1.  用户名/架构名称
2.  密码
3.  服务名称/SID
4.  Oracle 服务器的 IP 地址
5.  端口号，通常为 1521。

# c - 如何获取存储在数组中的字符串长度（C）

> ID：15503996
> 
> 赞同：2
> 
> 时间：2013-03-19T15:43:27.600
> 
> 标签：c

1.  我将如何获得以下字符串的长度以及数组大小？

    > 字符 str [] = {};
    > 
    > > ```
    > >  str[0] = "He";
    > >     str[1] = "llo";
    > >     str[2] =  " Wor";
    > >     str[3] ="ld"; 
    > > ```

2.  以及如何将它们存储在多维数组中？所以这个数组看起来像这样：

    > char strstr [str 的大小][str 的字符串长度];

`strstr[][]`数组维度应该是1.number
of array-elements of **str**和
2.number of all chars in **str**。在 的情况下 `strstr[3][1]`，这将是“ **d** ”。**如果不首先初始化str** -array，这
可能吗？

 **[编辑] 我明白了，第二维`strstr`没有意义。它应该是每个元素的长度，而不是 [/edit]`*str`中的完整字符数`*str`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:50:03.273

这可能会做你想要的，但它并不完全符合你的要求。

```
#include <stdio.h>

char *strs[] = {
    "foo",
    "bar",
    "bazy"
};

int main() {
    printf("%d - %s\n", strlen(strs[0]), strs[0]);
    printf("%d - %s\n", strlen(strs[1]), strs[1]);
    printf("%d - %s\n", strlen(strs[2]), strs[2]);
    return 0;
} 
```

[输出](http://codepad.org/sRDGUzUx)：

```
3 - foo
3 - bar
4 - bazy 
```

请注意，您只有几种存储数组的可能性。您可以执行此解决方案所做的事情（创建一个指向数组的指针数组），在一个大数组中创建一个“压缩”数组列表，或者创建一个过大的二维数组。

* * *

“压缩”数组将采用以下格式：

```
char strs[] = "foo\0bar\0bazy"; // array is {f,o,o,\0,b,a,r,\0,b,a,z,y,\0} 
```

这种格式的问题是访问第一个元素之后的任何内容都有些棘手，并且通常涉及在数组中进行线性搜索。（或保留一个单独的地址表......就像第一个解决方案一样）

* * *

二维数组要求您指定所有大小，如下所示：

```
char strs[3][5] = {
   "foo",
   "baz",
   "baxy"
};

int main() {
    printf("%d - %s\n", strlen(strs[0]), strs[0]);
    printf("%d - %s\n", strlen(strs[1]), strs[1]);
    printf("%d - %s\n", strlen(strs[2]), strs[2]);
    return 0;
} 
```

这可能在内存中是这样排列的：

```
{f,o,o,\0,*,b,a,z,\0,*,b,a,x,y,\0} (the *'s could be anything, most dependent on your compiler) 
```

由于编译器知道每个字符串恰好占用 5 个字节，因此它可以轻松计算出后面元素的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:59:12.643

在 C 中声明数组时，必须声明其大小，除非同时提供初始化值。这是因为数组在内存中是按顺序排列的，因此计算机需要知道要留出多少空间。

此外，`char str [] = {....}`将声明一个*字符*数组，而不是*字符串*数组。字符串是一个字符数组，因此`str`只是一个字符串。

要创建一个字符串数组，您需要执行以下操作：

```
char strs[num_of_strings][max_length_of_strings+1];
strcpy(strs[0],"string1");
strcpy(strs[1],"string2");
... 
```

[在这个问题](https://stackoverflow.com/questions/1088622/how-do-i-create-an-array-of-strings-in-c)上对其他选项进行了更深入的讨论。

如果您指定`max_length_of_strings`但随后从无法保证短于 的源字符串中复制，则要`max_length_of_strings`使用`strncpy`而不是`strcpy`. 在这种情况下，您还希望确保生成的字符串以空结尾，您可以通过循环来完成

```
strs[i][max_length_of_strings] = '\0'; 
```

要获取以 null 结尾的字符串的长度，请使用函数`strlen`.

至于你问题的第二部分，上面应该清楚地说明如何创建一个更高维的数组。我会提供更多细节，但我不确定您希望这个数组做什么。当您说“str 中所有字符的数量”时，您是指存储在`strs`数组中的字符串的最大长度吗？

如果是这样，您无需担心。像我上面解释的那样对数组进行编程`strs`已经为您提供了这个功能：由于字符串只是`char`'s 的数组，因此您可以像索引 's 一样索引字符串`char`。

如果上述任何内容不清楚，请告诉我，我会尽力解释得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:53:35.780

如果你想要一个实际的数组，像这样：

```
 char str[4][5];  // holds up to 4 characters in each
    strcpy(str[0], "He");
    strcpy(str[1], "llo");
    strcpy(str[2], " Wor");
    strcpy(str[3], "ld"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:47:50.540

要在 C 中获取字符串的长度，您将使用`strlen`并传递字符串。

```
int len = strlen(array[0]); 
```**

# c# - 是否可以从在线来源获得 Windows Phone 7.x 应用程序更新变量？

> ID：15503999
> 
> 赞同：0
> 
> 时间：2013-03-19T15:43:30.903
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我正在开发一个货币转换器程序，我试图让该程序从在线资源更新所有转换率，以便货币转换始终是最新的。这可以做到吗，任何人都可以给我一个更好的方式来表达我想要做什么的想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:46:53.943

您应该将数据存储在独立存储或 SQL CE 数据库中的文件中。然后您可以定期或在应用程序启动时检查是否有新版本的数据在线，然后更新内部数据。

要检查在线是否有新数据，您需要重用现有服务或提供自己的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:57:37.800

对于您的 Wp7 应用程序，您需要新的**转换率**数据。由于设备可能并不总是连接到 Internet，因此您将以其中一种方式存储数据。一些可以是：

*   将数据存储在“文本文件”或隔离存储中 的**Xml中**
*   使用数据库来存储您的数据，例如内置**SQL CE**或其他**SQLite**或**Sterling**

要带来新数据（即案例中的转换率），您需要通过 Http 连接到 Web 服务以获取数据。该服务可能是您**自己托管**的或**第三方**。