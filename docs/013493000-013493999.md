# StackOverflow 问答 13493000-13493999

# ios - OpenGL ES 编程指南粒子示例

> ID：13493000
> 
> 赞同：0
> 
> 时间：2012-11-21T12:13:49.177
> 
> 标签：ios, opengl-es, ios6

我正在尝试使 OpenGL ES 编程指南中给出的粒子系统示例在 iOS 6 中编译，但我似乎无法使其工作。供参考的是本书的网站：

[http://www.opengles-book.com/](http://www.opengles-book.com/)

该代码可以从谷歌代码下载，请参阅以下说明：

[http://code.google.com/p/opengles-book-sa​​mples/wiki/Instructions](http://code.google.com/p/opengles-book-samples/wiki/Instructions)

代码在第 13 章。

有没有人遇到过这个并且能够让它在 iOS 6 中工作？我做了一些修改，但仍然没有快乐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:01:07.707

按着这些次序：

1.  打开位于“/opengles-book-sa​​mples/iPhone/Common/”中的“Common.xcodeproj”
2.  选择为设备或模拟器构建并构建。
3.  构建成功后关闭 Common.xcodeproj。
4.  打开 Finder 并从菜单 Go>Go to Folder... 键入不带引号的“~/Library/Developer/Xcode/DerivedData/”并在文件夹中找到名为“Common-bkoronpjvpvwbxgdgxbwiukcqwaz”的文件夹，转到：/Build/Products/ 和将“libCommon.a”复制到 ParticleSystem 项目。
5.  构建&运行粒子示例。
6.  而已。:)

祝你好运。

# ios - iOS 表格消失

> ID：13493002
> 
> 赞同：0
> 
> 时间：2012-11-21T12:13:55.247
> 
> 标签：ios, xcode, tableview, searchbar

我有`View Controller`一个`tableView`里面有不同的数据。当我在搜索栏中搜索表中的数据时，它会删除其他数据并只显示我正在寻找的数据。当我点击它推送到下一个视图的数据。一切看起来都很好，但是当我回到视图时，tableview 会消失！在同一个应用程序中有趣的事情是我有其他类似的视图和类似的代码，但在那里没关系。有谁知道它有什么问题？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:27:28.260

在 `didSelectRowAtIndexPath`我添加`[mySearchBar resignFirstResponder];`的这是我的搜索栏的文本字段中，现在可以了，谢谢大家的回答

# database - 如何使用TADOConnection在delphi xe2中与oracle建立数据库连接？

> ID：13493003
> 
> 赞同：1
> 
> 时间：2012-11-21T12:13:56.187
> 
> 标签：database, delphi, delphi-xe2

我正在尝试使用该`TADOConnection`组件与 Oracle 建立数据库连接。我`ADOConnection1`在表格中添加了一个。然后我将`Provider`属性设置为“SQLOLEDB”。考虑数据库的用户名和密码分别为 111 和 222。

现在，`OnShow`在表单的事件中，我正在尝试建立数据库连接。

我编写了一个由事件处理程序`MakeConnection`调用的函数：`OnShow`

```
function Tabc.MakeConnection : boolean;
var 
  ConnString : string;
begin
  result := false;
  try
    ADOConnection1 := TADOConnection.Create(nil);
    ADOConnection1.ConnectionString := ConnString;
    ADOConnection1.LoginPrompt := false;
    ADOConnection1.Open;
    result := true;
  except
    on E : Exception do
    begin
      exit;
    end;
  end;
end; 
```

`ConnString`我的问题是，变量的格式应该是什么？我应该使用“SQLOLEDB”作为提供者还是其他什么？

**更新：**

之前我创建了一个到 Microsoft SQL Server 的连接，其连接字符串格式为：

```
Provider=SQLNCLI10.1;Password=222;Persist Security Info=False;User ID= 111;Initial Catalog= abcde;Data Source= datasource\SQLEXPRESS;Initial File Name="";Server SPN="" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:21:52.903

***1\. Oracle 数据库提供者：***

要连接到 Oracle 数据库，您至少需要在当前情况下使用不同的连接提供程序。Microsoft 有自己的[`Microsoft OLE DB Provider for Oracle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675851%28v=vs.85%29.aspx)，但它已被弃用，正如参考文献中所述，您应该避免使用它（链接到我添加的 Oracle 的 OLE DB 提供程序）：

> **适用于 Oracle 的 Microsoft OLE DB 提供程序**
> 
> 此功能将在 Windows 的未来版本中删除。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。而是使用[**Oracle 的 OLE DB 提供程序**](http://www.oracle.com/technetwork/database/windows/index-089115.html)。

然后，您可以在连接字符串中使用 OLE DB 的 Oracle 提供程序[`this way`](http://www.connectionstrings.com/oracle#oracle-provider-for-ole-db-oraoledb)：

```
Provider=OraOLEDB.Oracle 
```

***2、Oracle数据库连接字符串属性：***

对于您关于 Oracle 数据库特定连接字符串属性的下一个问题，您能做的最好的事情就是遵循[`the reference`](http://docs.oracle.com/html/E10927_01/featConnecting.htm#i1006259).

# html - 使用 JQuery UI 的网站示例

> ID：13493007
> 
> 赞同：2
> 
> 时间：2012-11-21T12:14:03.430
> 
> 标签：html, jquery-ui, web

正如问题的标题所述，是否有任何广泛使用 JQuery UI 的网站示例？

这将包括小部件或 CSS 框架。

（Google 不会轻易给出答案，因为很难过滤掉那些只使用 JQuery 的网站。）

**编辑**

一些答案建议使用[“使用 JQuery UI 的站点”](http://docs.jquery.com/Sites_Using_jQuery_UI)页面，但这已经过时了，现在似乎已被完全删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:21:00.293

当然，关于这个主题的第一个网站是[http://jqueryui.com/demos/](http://jqueryui.com/demos/)（没有比这更好的示例、代码和文档了）

您也可以尝试访问[http://themeforest.net/category/site-templates/admin-templates](http://themeforest.net/category/site-templates/admin-templates)（他们有很多使用 jquery 和 jquery-ui 创建的主题，您可以免费查看所有演示）

[http://docs.jquery.com/Sites_Using_jQuery_UI](http://docs.jquery.com/Sites_Using_jQuery_UI)可能会给你更多的答案，但我不知道最近是如何更新的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:09:06.397

你可以试试这个链接：[http ://www.republicof3.com/50-amazing-examples-of-jquery-based-websites/](http://www.republicof3.com/50-amazing-examples-of-jquery-based-websites/)

这些站点使用 jQuery，不确定是否所有站点都使用 jQuery UI。

它由 Labib Jaffar 于 2012 年 4 月 10 日发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:18:31.127

看看这个-> [http://docs.jquery.com/Sites_Using_jQuery_UI](http://docs.jquery.com/Sites_Using_jQuery_UI)

在这里，您可以找到 jquery ui 页面列表！这是谷歌搜索中的**第二个链接！**

# ios - 填充 TableView 单元格查询

> ID：13493008
> 
> 赞同：0
> 
> 时间：2012-11-21T12:14:06.447
> 
> 标签：ios, uitextfield, toolbar

我已经创建了一种主从方法的表视图控制器，当我单击主视图时，详细视图将在屏幕底部出现一个文本字段，该文本字段包含在工具栏上的视图中。

我的问题是当我单击文本字段时键盘弹出时如何自动调整工具栏的位置，目前当我在文本字段上输入时，键盘会覆盖我的文本字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:28:38.013

如果您想避免键盘覆盖您的文本字段，请检查此问题和答案

[iPhone 键盘覆盖 UITextField](https://stackoverflow.com/questions/1247113/iphone-keyboard-covers-text-field)

如果您有多个文本字段，请考虑使用滚动视图并在键盘出现时向上移动。

# android - getQuantityString 返回值为 0 的错误字符串

> ID：13493011
> 
> 赞同：10
> 
> 时间：2012-11-21T12:14:18.173
> 
> 标签：android, android-resources

在一个 android 应用程序中，我有以下字符串资源：

```
<plurals name="test">
   <item quantity="zero">"I have 0 item"</item>
   <item quantity="one">"I have 1 item"</item>
   <item quantity="other">"I have several items"</item>
</plurals> 
```

以及以下代码行：

```
String text = getResources().getQuantityString(R.plurals.test, 0) 
```

我希望返回

> 我有 0 件商品

但它实际上返回

> 我有 1 件商品

为什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T10:42:39.727

数量字符串在一些平台和手机上被破坏，因为[问题跟踪器](http://code.google.com/p/android/issues/detail?id=8287)和这个讨论[“应该使用复数和数量字符串”](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/xz5JDBJvAVA)指出。这取决于您无法控制的许多因素（即电话本地化）。

[一种解决方案是采用像这样](http://code.google.com/p/android-i18n-plurals/)的外部库，它模仿相同的功能。

另一种解决方案在 android 中的复数文档中有说明。避免使用它并使用“数量中性”的公式，如“书籍：1”

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-21T12:22:41.197

像这样更改代码

```
String text = getResources().getQuantityString(R.plurals.test, 0,0); 
```

# android - android中的xml验证

> ID：13493019
> 
> 赞同：1
> 
> 时间：2012-11-21T12:14:46.707
> 
> 标签：android, xml, validation

我正在尝试针对 android 中给定的 xsd 文件进行 xml 验证，每次我包含以下行时，应用程序都会意外停止：

SchemaFactory 工厂 = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);

这是相关的代码片段：

```
 SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI); 

   File schemaLocation = new File("/sdcard/sep.xsd");
   Schema schema = factory.newSchema(schemaLocation);

   Validator validator = schema.newValidator();

   Source source = new StreamSource("/sdcard/gtp.xml");

    try {          
        validator.validate(source);
    }
    catch (SAXException ex) {
    Toast toast = Toast.makeText(this, "invalid", Toast.LENGTH_SHORT);
    toast.show();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T11:31:53.623

这是解决方案：

```
File xmlData;
File xmlSchema;
xmlData = new File( xmlDataName );
xmlData = new File( xmlSchemaName );
SchemaFactory schemafactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
Source schemaFile = new StreamSource( xmlSchema );
Source xmlSource = new StreamSource( xmlData );
Schema schema = schemafactory.newSchema( schemaFile );
Validator validator = schema.newValidator();
validator.validate( xmlSource ); 
```

但是您需要将 XML 验证库添加到您的项目中。

例如：[https](https://code.google.com/p/xerces-for-android/) ://code.google.com/p/xerces-for-android/ 。

# javafx-2 - 如何更改标签字体的大小以获取最大大小

> ID：13493020
> 
> 赞同：6
> 
> 时间：2012-11-21T12:14:49.910
> 
> 标签：javafx-2

我有`Label`一个`Scene`。我需要始终为其中的文本获取最大的字体大小，以便文本始终采用标签可用大小的最大大小。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T12:49:50.117

```
final double MAX_FONT_SIZE = 30.0; // define max font size you need
label.setFont(new Font(MAX_FONT_SIZE)); // set to Label 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:31:08.993

我不确定我们是否有办法根据容器的大小设置字体大小。但是您可以垂直或水平缩放文本以适应容器边界。看看以下...

[缩放文本框而不截断其中的文本](https://stackoverflow.com/questions/13192557/scaling-a-textbox-without-truncating-text-within-it/13300657#13300657)

# c# - 用于提取标点符号/字符的正则表达式

> ID：13493022
> 
> 赞同：0
> 
> 时间：2012-11-21T12:15:00.153
> 
> 标签：c#, regex

大家好，我需要一个只提取标点符号/字符的正则表达式。

到目前为止我有这个：

```
[._^%$#!~@,-]+ 
```

但如果至少有 1 个标点符号并且仍然允许任何其他字符（数字或字母），则此方法有效

我只需要允许标点符号/字符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:19:25.010

Try this:

```
^[\p{S}\p{P}]+$ 
```

`\p{S}` matches any symbol character, and `\p{P}` matches any punctuation.

Note that your pattern will not match all the symbols and punctuations not present in the list.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T12:19:48.230

Try anchoring the regex to the start and the end of the string (unless you're using Multiline matching) - i.e. `^` at the beginning and `$` at the end:

`^[._^%$#!~@,-]+$`

Note - this does not endorse your actual pattern (I can't say whether this is matching all the 'special characters' you're talking about, but it will make it so that the entire string must be all 'special'.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:29:06.033

[^a-zA-Z0-9]* 你可以试试这样的。不应该接受那些字符，cba 在你输入的一个字符旁边写下所有字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T14:20:53.160

```
\W 
```

匹配任何不是单词字符的字符（字母数字和下划线）。

# ruby-on-rails - ajax 渲染模板与部分堆栈级别错误

> ID：13493024
> 
> 赞同：1
> 
> 时间：2012-11-21T12:15:10.953
> 
> 标签：ruby-on-rails

离开 Rails 大约一年了，并试图通过尝试原型来记住所有内容。我继承了脚手架模板以提供一个显示视图，该视图允许向下钻取到相关的 has_many 模型。有一些深度嵌套的模型，但我从不深入 1 层并使用显示视图向下钻取。

```
fieldset
    show fields from models
    actions on model
related action menubar (links to load related records with js)
fieldset
    related index view 
```

默认情况下，主要相关模型索引视图呈现为来自显示视图的模板，通常来自相关模型的 index.html.erb。使用路由，大部分相关的索引视图也可以呈现在自己的页面上。我使用这个方案做了大约 8 个模型，但我尝试的最后一个模型在`ActionView::Template::Error (stack level too deep):`尝试加载 .js 模板数百次并且从未加载 .js 文件中调用的模板时出错。

```
Started GET "/events/2/participants" for 127.0.0.1 at 2012-11-21 05:39:56 -0600
Processing by EventsController#participants as JS
  Parameters: {"id"=>"2"}
  Event Load (0.1ms)  SELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1  [["id", "2"]]
  Rendered events/participants.js.erb (0.2ms)
  Rendered events/participants.js.erb (1.9ms)
  ...  
  Rendered events/participants.js.erb (486.2ms)
  Rendered events/participants.js.erb (487.6ms)
Completed 500 Internal Server Error in 496ms

ActionView::Template::Error (stack level too deep):
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:23 
```

一个有效的控制器动作和 .js 行：

```
def stages
  @commitment = Commitment.find(params[:id])
  @stages = @commitment.stages.page(params[:page]).per(10)
  respond_to do |format|
    format.js 
    format.html {render :template => "stages/index"}
  end
end

<stages.js.erb>
$("#related").html("<%= escape_javascript(render(:template => 'stages/index'))%>"); 
```

请注意 .js 文件从阶段视图呈现模板。

给我带来问题的控制器的相同内容：

```
def participants
  @event = Event.find(params[:id])
  @participants = @event.participants
  respond_to do |format|
    format.js 
    format.html {render :template => "events/participants"}
  end
end

<participants.js.erb>
$("#related").html("<%= escape_javascript(render(:template => 'events/participants'))%>"); 
```

唯一的区别是索引位于事件视图中（没有参与者视图/控制器）。默认模板将在没有 format.html 上的渲染散列的情况下加载，但保持一致。

在摸索了几个小时试图找到任何其他差异之后。我制作了participants.html.erb 并将.js 行更改为

$("#related").html("<%= escape_javascript(render(:partial => 'events/participants'))%>");

这有效，没有错误，js 和 html 都有效（participants.html.erb 呈现部分）！

既然我让它工作了，我想除了为什么模板与部分的不同行为之外我没有其他问题？或者，我还有什么需要学习的吗？

史蒂夫

# ruby-on-rails-3 - rails, slim 和 form_tag 不允许在页面上超过一个

> ID：13493026
> 
> 赞同：1
> 
> 时间：2012-11-21T12:15:17.163
> 
> 标签：ruby-on-rails-3, slim-lang

我正在为我的 rails 应用程序使用超薄模板。但奇怪的事情正在发生。在我的应用程序模板中，我有一个像这样的表格：

```
= form_tag search_path, class:'navbar-search pull-left', remote: true
= text_field_tag :term, nil, class: 'search-query span2', placeholder: 'Search' 
```

这在我的页面上呈现得很好，并且搜索表单工作正常。但是，在我的部分注册中，我有：

```
= form_tag '/auth/identity/callback'
        - if @identity && @identity.errors.any?
        div.error
            h2 =pluralize(@identity.errors.count, 'error')
            |prohibited this account from being saved:
            ul
                - @identity.errors.full_messages.each do |msg|
                    li =msg
    h1
        i.iconbig-lock
        | Sign In
    div.login-fields
        p Sign In using your email:
        div.field
            = label_tag :auth_key, 'Email'
            = text_field_tag :auth_key, nil, class: 'input login username-field', placeholder: 'Email'
        div.field
            = label_tag :password, 'Password'
            = password_field_tag :password, nil, class:'login password-field', placeholder: 'password'
        div.login-actions
            = submit_tag 'Login', class: 'btn-signin btn btn-primary'
        div.login-social.marg10-btm
            p Sign in using social network:
            a.btn
                = image_tag 'twitter-18.png'
                |  Signin with twitter
            a.btn href="/auth/facebook"
                = image_tag 'facebook-18.png'
                |  Signin with Facebook 
```

表单标签不会呈现，但所有子元素文本字段（包括“authenticity_token”）都可以正常呈现。

我玩了一下，发现页面只允许 1 个 form_tag。在第一个之后创建的永远不会渲染。我在谷歌上找了一段时间，不知道为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:55:02.667

来自[leogalmeida @ github](https://github.com/leogalmeida/slim-rails/issues/23)

> 尝试在两个表单标签的末尾添加“do”：

```
= form_tag search_path, class:'navbar-search pull-left', remote: true do

= form_tag '/auth/identity/callback' do 
```

# android - 当我从 Google Play 市场取消发布应用程序时会发生什么？

> ID：13493027
> 
> 赞同：49
> 
> 时间：2012-11-21T12:15:17.390
> 
> 标签：android, google-play, publish

当我取消发布应用程序时，会发生什么？

我有一个依赖第三方数据的应用程序，现在停止工作。经过快速审查后，我意识到，该更新将花费我几周的时间。为了避免差评（我今天开始收到），我想暂时取消发布我的应用程序，例如 3-4 周，然后重新发布它。我不想更改包名称或其他任何内容，只需取消发布并在几周后重新发布它，所以我会保留我的评论和评级。

1) 当我取消发布应用时，用户可以通过市场搜索找到我的应用吗？

2) 当我取消发布应用时，用户可以通过点击您的开发者资料找到我的应用吗？

3) 当我取消发布应用程序时，我可以稍后发布具有相同包名的相同应用程序并保留我的旧评分和评论吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-21T12:17:37.217

如果应用程序未发布，则将无法下载，不会出现在店内搜索结果中，并且根本无法从商店安装。即使有应用程序的直接 URL，也无法从 Google Play 接收到详细信息。但是，取消发布不会影响现有安装（因此应用程序不会从任何已经安装它的设备中自动删除）。如果现有用户使用旧版本，他们仍然可以更新。

无论如何，您不能拥有另一个具有相同包名的应用程序。

**编辑**

请注意，您**取消发布**（这意味着只是名称所说的，仅此而已）而不仅仅是 APK - 您隐藏了所有相关内容（Google Play 中的应用程序页面等）。对于最终用户来说，看起来该应用程序已经消失了。对您而言 - 它仍在您的控制台中，您可以编辑描述、图像、查看评论、统计信息或更新 APK 等，但除非您再次发布它，否则没有人会看到这些更改。

# iphone - 边界检测纸张opencv

> ID：13493035
> 
> 赞同：1
> 
> 时间：2012-11-21T12:15:39.683
> 
> 标签：iphone, objective-c, ios, opencv

我是openCV的新手，我已经检测到纸张的边缘，但是在边缘上画线后我的结果图像变得模糊，我如何在纸张的边缘上画线，这样我的图像质量不受影响。

我错过了什么..

我的代码如下。

非常感谢。

![在此处输入图像描述](../Images/6e58f3bb0b2a3e271eaf506e7d86f608.png)

```
-(void)forOpenCV
{
   if( imageView.image != nil )
   {

      cv::Mat greyMat=[self cvMatFromUIImage:imageView.image];
      vector<vector<cv::Point> > squares;

      cv::Mat img= [self debugSquares: squares: greyMat ];

      imageView.image =[self UIImageFromCVMat: img];

   }

}

- (cv::Mat) debugSquares: (std::vector<std::vector<cv::Point> >) squares : (cv::Mat &)image
{
NSLog(@"%lu",squares.size());

// blur will enhance edge detection

Mat blurred(image);
medianBlur(image, blurred, 9);

Mat gray0(image.size(), CV_8U), gray;
vector<vector<cv::Point> > contours;

// find squares in every color plane of the image
for (int c = 0; c < 3; c++)
{
    int ch[] = {c, 0};
    mixChannels(&image, 1, &gray0, 1, ch, 1);

    // try several threshold levels
    const int threshold_level = 2;
    for (int l = 0; l < threshold_level; l++)
    {
        // Use Canny instead of zero threshold level!
        // Canny helps to catch squares with gradient shading
        if (l == 0)
        {
            Canny(gray0, gray, 10, 20, 3); //

            // Dilate helps to remove potential holes between edge segments
            dilate(gray, gray, Mat(), cv::Point(-1,-1));
        }
        else
        {
            gray = gray0 >= (l+1) * 255 / threshold_level;
        }

        // Find contours and store them in a list
        findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

        // Test contours
        vector<cv::Point> approx;
        for (size_t i = 0; i < contours.size(); i++)
        {
            // approximate contour with accuracy proportional
            // to the contour perimeter
            approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);

            // Note: absolute value of an area is used because
            // area may be positive or negative - in accordance with the
            // contour orientation
            if (approx.size() == 4 &&
                fabs(contourArea(Mat(approx))) > 1000 &&
                isContourConvex(Mat(approx)))
            {
                double maxCosine = 0;

                for (int j = 2; j < 5; j++)
                {
                    double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                    maxCosine = MAX(maxCosine, cosine);
                }

                if (maxCosine < 0.3)
                    squares.push_back(approx);
            }
        }
    }
}

NSLog(@"%lu",squares.size());

for( size_t i = 0; i < squares.size(); i++ )
{

    cv:: Rect rectangle = boundingRect(Mat(squares[i]));
    if(i==squares.size()-1)////Detecting Rectangle here
    {
        const cv::Point* p = &squares[i][0];

        int n = (int)squares[i].size();

         NSLog(@"%d",n);

        line(image, cv::Point(507,418), cv::Point(507+1776,418+1372), Scalar(255,0,0),2,8);

        polylines(image, &p, &n, 1, true, Scalar(255,255,0), 5, CV_AA);

        fx1=rectangle.x;
        fy1=rectangle.y;
        fx2=rectangle.x+rectangle.width;
        fy2=rectangle.y+rectangle.height;

        line(image, cv::Point(fx1,fy1), cv::Point(fx2,fy2), Scalar(0,0,255),2,8);

    }

}

return image;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:07:52.233

代替

```
Mat blurred(image); 
```

你需要做

```
Mat blurred = image.clone(); 
```

因为第一行并没有复制图像，而是创建了第二个指向相同数据的指针。当您模糊图像时，您也在更改原始图像。相反，您需要做的是创建实际数据的真实副本并对该副本进行操作。

[OpenCV 参考](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html)说明：

> 通过使用复制构造函数或赋值运算符，右侧可以是矩阵或表达式，见下文。再次，如介绍中所述，矩阵分配是 O(1) 操作，因为它只复制标题并增加引用计数器。
> 
> Mat::clone() 方法可用于在需要时获取矩阵的完整（又名深度）副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:08:03.070

第一个问题很**容易通过**对原始图像的副本进行整个处理来解决。这样，在获得正方形的所有点后，您可以**在原始图像上绘制线条，**并且不会模糊。

第二个问题是裁剪，可以通过在原始图像中定义一个 ROI（感兴趣区域）然后将其复制到新的 Mat 来解决。[我已经在这个答案](https://stackoverflow.com/a/10317919/176769)中证明了这一点：

```
// Setup a Region Of Interest
cv::Rect roi;
roi.x = 50
roi.y = 10
roi.width = 400;
roi.height = 450;

// Crop the original image to the area defined by ROI
cv::Mat crop = original_image(roi);

cv::imwrite("cropped.png", crop); 
```

# ruby - 如何从 Yardoc 输出中删除继承信息（和其他部分）

> ID：13493038
> 
> 赞同：0
> 
> 时间：2012-11-21T12:15:50.560
> 
> 标签：ruby, templates, template-engine, yard

我想生成一些公开可用的文档，因此我希望删除 Yard 默认生成的输出的某些方面。我已经设法删除了源代码及其链接，但我也想删除：

*   类名。
*   继承信息。
*   “定义于”信息。
*   如果可能的话，“班级名单”| “方法列表” | “文件列表”菜单。

我通过添加删除了源：

```
def init
  super
  sections.first.delete(:source)
end 
```

到路径 .yard_templates/no_source/default/method_details/setup.rb 并在生成时引用它。（感谢[这个答案](https://stackoverflow.com/a/10345917/335847)）

尽管维护人员尝试使用[有关模板的文档](https://github.com/lsegal/yard/wiki/Templates)很有帮助，但我只是不知道如何做到这一点。

我尝试查看输出并向后工作，并通过检查`sections`上面的代码，但我不知道如何确定 HTML 输出中的哪个部分由代码中的什么表示？

任何帮助或见解将不胜感激。

* * *

编辑：我找到了如何删除继承信息：

```
# place in .yard_templates/no_source/default/module/setup.rb
def init
  super
  sections.delete(:box_info)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T02:33:47.193

删除“类列表” | “方法列表” | “文件列表”菜单：

将以下代码放入 .yard_templates/whatever-you've-call-this-dir/default/layout/html/setup.rb

```
def menu_lists
  []
end 
```

* * *

删除继承信息：

将以下代码放入 .yard_templates/whatever-you've-call-this-dir/default/module/setup.rb

```
def init
  super
  sections.delete(:box_info)
end 
```

* * *

要删除其他信息，请从 Yardoc gem 中获取 templates/default/layout/html/headers.erb 的副本，然后将其放在 .yard_templates/whatever-you've-call-this-dir/default/layout/ html/headers.erb 并编辑您需要的内容。

# c# - 为什么 integer.equals(string) 在两者都包含相同的值时给出 false，但不抛出类型不匹配异常？

> ID：13493047
> 
> 赞同：1
> 
> 时间：2012-11-21T12:16:27.007
> 
> 标签：c#, .net, equals, equality

我有代码，我将字符串作为输入，并将其与整数进行比较。

我看到整数变量也有一个`Equals`接受字符串参数的函数。

我直接使用它认为它会进行类型转换。

它没有给出任何编译时间或运行时错误，但它总是给出错误的结果。

例如，

```
int sessionId = 1;

string requestId="1"

return sessionId.Equals(requestId); 
```

`sessionId.Equals(requestId)`总是给出错误的。

为什么会出现这种行为？如果有原因，他们为什么允许它无错误地运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:20:20.413

Integers and strings are always different, and thus `"1".Equals(1)` returns false.

It compiles because `object.Equals(object other)` takes an `object` as the right side, and thus accepts any type.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T12:22:37.003

发生这种情况的原因是字符串“0”与0不同，所以它返回false。为什么支持这种行为？因为 Equals 方法允许您将对象作为参数传递，而字符串在对象中，所以“允许”您这样做。正如您所发现的，在这种情况下它不是很有用。

要解决您的问题，要么获取整数的字符串表示形式，要么将字符串解析为整数，然后进行比较。

例如尝试

```
 return (sessionId.ToString() == requestId); 
```

或者

```
 return (sessionId == int.Parse(requestId)); 
```

如果您选择后者，您可能需要考虑 Parse 是否会失败以及如何处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:29:27.273

是的，Equals 采用右侧的任何类型，因为它需要一个对象。但在函数内部，它需要与左侧相同的类型。恕我直言，没有必要为类型不匹配抛出异常，因为人们只想知道两种类型的相等性。

反编译的 int 等式：

```
public override bool Equals(object obj)
{
    return obj is int && this == (int)obj;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T18:37:42.890

如果有人给你看汽车和香蕉，问他们是不是同一个东西，你会因为汽车是交通工具而香蕉是水果而大发脾气，还是会简单地说“不，它们不是一样”？

在许多语言中，尝试比较整数和字符串会产生编译器错误，因为编译器知道整数和字符串不可能是同一事物，因此任何尝试比较它们的代码几乎肯定是错误的。另一方面，当您说 时`sessionId.Equals(requestId)`，编译器知道您要求将`requestId`其传递`Int32`给`Equals`. 由于该覆盖可以接受对任何类型的堆对象的引用，因此传递字符串“1”没有问题。反过来，该方法知道它被赋予了`Int32`与值为 1 的 an 不同的东西。它不知道调用代码不可能提供任何与 an 匹配的东西`Int32`; 它所知道的只是特定的值不一样，并且由于值不一样，它完全愉快地返回`false`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-17T10:33:48.333

我们不应该使用 String.Compare 进行字符串比较而忘记 Equals 吗？

我确实有同样的问题，我相信函数 Equals 应该抛出异常。就我而言，我一直在将字符串与布尔值进行比较。

现在的讨论走错路了。这是我的观点：如果属于两个不同类的对象之间的比较总是返回 false，那么它们首先不需要进行比较。

如果需要有一个绕过类型检查的函数，那么应该有一个。但是，将函数 Equals 定位为字符串比较的推荐方法，同时引入不必要的错误（可能永远存在于您的程序中）的可能性是一种不负责任的做法。此外，函数调用 String.Equals(string1, string2, StringComparison. xxx) 也接受非字符串参数是非常具有误导性的。因此不仅是 string1.Equals(string2)。

如果这是设计使然，那么这是一个糟糕的设计。

# java - java.lang.RuntimeException: Parcelable 遇到写入可序列化对象的 IOException (name = com.jaapp.treeview.InMemoryTreeStateManager)

> ID：13493052
> 
> 赞同：4
> 
> 时间：2012-11-21T12:16:41.500
> 
> 标签：java, android

当我开始一项活动时，我的应用程序中发生了异常，并且这种类型的错误显示在 logcat 中，所以请您帮助我。我放在那里的这三门课你能指导我吗？此代码当时使用错误锥 context.startActivity(new Intent(context, AnswerActivity.class)); 当时这条线的使用发生了错误

```
threadid=1: thread exiting with uncaught exception (group=0x2aacc8a0)
        FATAL EXCEPTION: main
        java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = com.jaapp.treeview.InMemoryTreeStateManager)
        at android.os.Parcel.writeSerializable(Parcel.java:1160)
        at android.os.Parcel.writeValue(Parcel.java:1114)
        at android.os.Parcel.writeMapInternal(Parcel.java:479)
        at android.os.Bundle.writeToParcel(Bundle.java:1552)
        at android.os.Parcel.writeBundle(Parcel.java:493)
        at android.app.ActivityManagerProxy.activityPaused(ActivityManagerNative.java:1574)
        at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3334)
        at android.app.ActivityThread.access$2500(ActivityThread.java:132)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2078)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:4669)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:521)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: java.io.NotSerializableException: com.jaapp.dto.QuestionsDto
        at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1547)
        at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1859)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1701)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1665)
        at java.util.HashMap.writeObject(HashMap.java:1025)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:521)
        at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1229)
        at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1587)
        at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1859)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1701)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1665)
        at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1153)
        at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:420)
        at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1251)
        at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1587)
        at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1859)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1665)
        at android.os.Parcel.writeSerializable(Parcel.java:1155) 
```

代码：

```
 class SimpleStandardAdapter extends AbstractTreeViewAdapter<QuestionsDto> {
        public String[] Colorname = { "#FFFF00", "#ACCC00", "#FF5D00" };
        Context context;

        WebView descriptionView;

        public SimpleStandardAdapter(final QuestionsActivity treeViewListDemo,
                final Set<String> selected,
                final TreeStateManager<QuestionsDto> treeStateManager,
                final int numberOfLevels) {
            super(treeViewListDemo, treeStateManager, numberOfLevels);
            context = treeViewListDemo;

        }

        private String getDescription(final QuestionsDto id) {
            final Integer[] hierarchy = getManager().getHierarchyDescription(id);
            Log.i("log_tag", "" + id.getQid());
            return id.getQquestion();
            // return "Node " + id + Arrays.asList(hierarchy);
        }

        @Override
        public View getNewChildView(final TreeNodeInfo<QuestionsDto> treeNodeInfo) {
            final LinearLayout viewLayout = (LinearLayout) getActivity()
                    .getLayoutInflater().inflate(R.layout.demo_list_item, null);
            return updateView(viewLayout, treeNodeInfo);
        }

        @Override
        public LinearLayout updateView(final View view,
                final TreeNodeInfo<QuestionsDto> treeNodeInfo) {
            Log.v("log_tag", "get item id:" + treeNodeInfo.getId());
            final LinearLayout viewLayout = (LinearLayout) view;
            /*
             * descriptionView = (WebView) viewLayout
             * .findViewById(R.id.demo_list_item_description);
             */

            final TextView descriptionView = (TextView) viewLayout
                    .findViewById(R.id.demo_list_item_description);

            descriptionView.setText(
                    Html.fromHtml(getDescription(treeNodeInfo.getId())),
                    TextView.BufferType.SPANNABLE);
            /*
             * descriptionView.loadData(getDescription(treeNodeInfo.getId()),
             * "text/html", "utf-8");
             */

            /*
             * Spanned marked_up = Html.fromHtml(myString);
             * textview.setText(marked_up.toString(),BufferType.SPANNABLE);
             */

            view.setBackgroundColor(Color.parseColor("#FFFF00"));
            descriptionView.setBackgroundColor(Color.parseColor("#00000000"));

            // levelView.setText(Integer.toString(treeNodeInfo.getLevel()));
            /*
             * final CheckBox box = (CheckBox) viewLayout
             * .findViewById(R.id.demo_list_checkbox);
             */
            // box.setTag(treeNodeInfo.getId());
            /*
             * if (treeNodeInfo.isWithChildren()) { box.setVisibility(View.GONE); }
             * else { box.setVisibility(View.VISIBLE);
             * box.setChecked(selected.contains(treeNodeInfo.getId())); }
             * box.setOnCheckedChangeListener(onCheckedChange);
             */

            /*
             * descriptionView.seton(new OnClickListener() {
             * 
             * @Override public void onClick(View v) { // TODO Auto-generated method
             * stub Log.i("log_tag", "Click" + treeNodeInfo.getId()); } });
             */
            return viewLayout;
        }

        @Override
        public void handleItemClick(final View view, final Object id) {

            final QuestionsDto longId = (QuestionsDto) id;
            final TreeNodeInfo<QuestionsDto> info = getManager()
                    .getNodeInfo(longId);

            if (info.isWithChildren()) {
                super.handleItemClick(view, id);
                Log.i("log_tag", "Click" + info.getId());

            } else {
                final ViewGroup vg = (ViewGroup) view;
                /*
                 * final CheckBox cb = (CheckBox) vg
                 * .findViewById(R.id.demo_list_checkbox); cb.performClick();
                 */

            }
            Log.i("log_tag", "Click Event Call ID::::: " + info.getId().getQid());
            Jaappdb.getanswer(info.getId().getQid());

            /*
             * Intent intent = new Intent(context, AnswerActivity.class);
             * intent.putExtra("key_QuestionId", info.getId().getQid());
             * context.startActivity(intent);
             */
            context.startActivity(new Intent(context, AnswerActivity.class));

        }

        @Override
        public long getItemId(final int position) {
            return position;
        }

    }
     ====================================================

    package com.example.treelistviewdemo.treeview;
    /**
     * In-memory manager of tree state.
     * 
     * @param <T>
     *            type of identifier
     */
    public class InMemoryTreeStateManager<T> implements TreeStateManager<T> {
        private static final String TAG = InMemoryTreeStateManager.class
                .getSimpleName();
        private static final long serialVersionUID = 1L;
        private final Map<T, InMemoryTreeNode<T>> allNodes = new HashMap<T, InMemoryTreeNode<T>>();
        private final InMemoryTreeNode<T> topSentinel = new InMemoryTreeNode<T>(
                null, null, -1, true);
        private transient List<T> visibleListCache = null; // lasy initialised
        private transient List<T> unmodifiableVisibleList = null;
        private boolean visibleByDefault = true;
        private final transient Set<DataSetObserver> observers = new HashSet<DataSetObserver>();

        private synchronized void internalDataSetChanged() {
            visibleListCache = null;
            unmodifiableVisibleList = null;
            for (final DataSetObserver observer : observers) {
                observer.onChanged();
            }
        }

        /**
         * If true new nodes are visible by default.
         * 
         * @param visibleByDefault
         *            if true, then newly added nodes are expanded by default
         */
        public void setVisibleByDefault(final boolean visibleByDefault) {
            this.visibleByDefault = visibleByDefault;
        }

        private InMemoryTreeNode<T> getNodeFromTreeOrThrow(final T id) {
            if (id == null) {
                throw new NodeNotInTreeException("(null)");
            }
            final InMemoryTreeNode<T> node = allNodes.get(id);
            if (node == null) {
                throw new NodeNotInTreeException(id.toString());
            }
            return node;
        }

        private InMemoryTreeNode<T> getNodeFromTreeOrThrowAllowRoot(final T id) {
            if (id == null) {
                return topSentinel;
            }
            return getNodeFromTreeOrThrow(id);
        }

        private void expectNodeNotInTreeYet(final T id) {
            final InMemoryTreeNode<T> node = allNodes.get(id);
            if (node != null) {
                throw new NodeAlreadyInTreeException(id.toString(), node.toString());
            }
        }

        @Override
        public synchronized TreeNodeInfo<T> getNodeInfo(final T id) {
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrow(id);
            final List<InMemoryTreeNode<T>> children = node.getChildren();
            boolean expanded = false;
            if (!children.isEmpty() && children.get(0).isVisible()) {
                expanded = true;
            }
            return new TreeNodeInfo<T>(id, node.getLevel(), !children.isEmpty(),
                    node.isVisible(), expanded);
        }

        @Override
        public synchronized List<T> getChildren(final T id) {
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrowAllowRoot(id);
            return node.getChildIdList();
        }

        @Override
        public synchronized T getParent(final T id) {
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrowAllowRoot(id);
            return node.getParent();
        }

        private boolean getChildrenVisibility(final InMemoryTreeNode<T> node) {
            boolean visibility;
            final List<InMemoryTreeNode<T>> children = node.getChildren();
            if (children.isEmpty()) {
                visibility = visibleByDefault;
            } else {
                visibility = children.get(0).isVisible();
            }
            return visibility;
        }

        @Override
        public synchronized void addBeforeChild(final T parent, final T newChild,
                final T beforeChild) {
            expectNodeNotInTreeYet(newChild);
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrowAllowRoot(parent);
            final boolean visibility = getChildrenVisibility(node);
            // top nodes are always expanded.
            if (beforeChild == null) {
                final InMemoryTreeNode<T> added = node.add(0, newChild, visibility);
                allNodes.put(newChild, added);
            } else {
                final int index = node.indexOf(beforeChild);
                final InMemoryTreeNode<T> added = node.add(index == -1 ? 0 : index,
                        newChild, visibility);
                allNodes.put(newChild, added);
            }
            if (visibility) {
                internalDataSetChanged();
            }
        }

        @Override
        public synchronized void addAfterChild(final T parent, final T newChild,
                final T afterChild) {
            expectNodeNotInTreeYet(newChild);
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrowAllowRoot(parent);
            final boolean visibility = getChildrenVisibility(node);
            if (afterChild == null) {
                final InMemoryTreeNode<T> added = node.add(
                        node.getChildrenListSize(), newChild, visibility);
                allNodes.put(newChild, added);
            } else {
                final int index = node.indexOf(afterChild);
                final InMemoryTreeNode<T> added = node.add(
                        index == -1 ? node.getChildrenListSize() : index + 1, newChild,
                        visibility);
                allNodes.put(newChild, added);
            }
            if (visibility) {
                internalDataSetChanged();
            }
        }

        @Override
        public synchronized void removeNodeRecursively(final T id) {
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrowAllowRoot(id);
            final boolean visibleNodeChanged = removeNodeRecursively(node);
            final T parent = node.getParent();
            final InMemoryTreeNode<T> parentNode = getNodeFromTreeOrThrowAllowRoot(parent);
            parentNode.removeChild(id);
            if (visibleNodeChanged) {
                internalDataSetChanged();
            }
        }

        private boolean removeNodeRecursively(final InMemoryTreeNode<T> node) {
            boolean visibleNodeChanged = false;
            for (final InMemoryTreeNode<T> child : node.getChildren()) {
                if (removeNodeRecursively(child)) {
                    visibleNodeChanged = true;
                }
            }
            node.clearChildren();
            if (node.getId() != null) {
                allNodes.remove(node.getId());
                if (node.isVisible()) {
                    visibleNodeChanged = true;
                }
            }
            return visibleNodeChanged;
        }

        private void setChildrenVisibility(final InMemoryTreeNode<T> node,
                final boolean visible, final boolean recursive) {
            for (final InMemoryTreeNode<T> child : node.getChildren()) {
                child.setVisible(visible);
                if (recursive) {
                    setChildrenVisibility(child, visible, true);
                }
            }
        }

        @Override
        public synchronized void expandDirectChildren(final T id) {
            Log.d(TAG, "Expanding direct children of " + id);
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrowAllowRoot(id);
            setChildrenVisibility(node, true, false);
            internalDataSetChanged();
        }

        @Override
        public synchronized void expandEverythingBelow(final T id) {
            Log.d(TAG, "Expanding all children below " + id);
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrowAllowRoot(id);
            setChildrenVisibility(node, true, true);
            internalDataSetChanged();
        }

        @Override
        public synchronized void collapseChildren(final T id) {
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrowAllowRoot(id);
            if (node == topSentinel) {
                for (final InMemoryTreeNode<T> n : topSentinel.getChildren()) {
                    setChildrenVisibility(n, false, true);
                }
            } else {
                setChildrenVisibility(node, false, true);
            }
            internalDataSetChanged();
        }

        @Override
        public synchronized T getNextSibling(final T id) {
            final T parent = getParent(id);
            final InMemoryTreeNode<T> parentNode = getNodeFromTreeOrThrowAllowRoot(parent);
            boolean returnNext = false;
            for (final InMemoryTreeNode<T> child : parentNode.getChildren()) {
                if (returnNext) {
                    return child.getId();
                }
                if (child.getId().equals(id)) {
                    returnNext = true;
                }
            }
            return null;
        }

        @Override
        public synchronized T getPreviousSibling(final T id) {
            final T parent = getParent(id);
            final InMemoryTreeNode<T> parentNode = getNodeFromTreeOrThrowAllowRoot(parent);
            final T previousSibling = null;
            for (final InMemoryTreeNode<T> child : parentNode.getChildren()) {
                if (child.getId().equals(id)) {
                    return previousSibling;
                }
            }
            return null;
        }

        @Override
        public synchronized boolean isInTree(final T id) {
            return allNodes.containsKey(id);
        }

        @Override
        public synchronized int getVisibleCount() {
            return getVisibleList().size();
        }

        @Override
        public synchronized List<T> getVisibleList() {
            T currentId = null;
            if (visibleListCache == null) {
                visibleListCache = new ArrayList<T>(allNodes.size());
                do {
                    currentId = getNextVisible(currentId);
                    if (currentId == null) {
                        break;
                    } else {
                        visibleListCache.add(currentId);
                    }
                } while (true);
            }
            if (unmodifiableVisibleList == null) {
                unmodifiableVisibleList = Collections
                        .unmodifiableList(visibleListCache);
            }
            return unmodifiableVisibleList;
        }

        public synchronized T getNextVisible(final T id) {
            final InMemoryTreeNode<T> node = getNodeFromTreeOrThrowAllowRoot(id);
            if (!node.isVisible()) {
                return null;
            }
            final List<InMemoryTreeNode<T>> children = node.getChildren();
            if (!children.isEmpty()) {
                final InMemoryTreeNode<T> firstChild = children.get(0);
                if (firstChild.isVisible()) {
                    return firstChild.getId();
                }
            }
            final T sibl = getNextSibling(id);
            if (sibl != null) {
                return sibl;
            }
            T parent = node.getParent();
            do {
                if (parent == null) {
                    return null;
                }
                final T parentSibling = getNextSibling(parent);
                if (parentSibling != null) {
                    return parentSibling;
                }
                parent = getNodeFromTreeOrThrow(parent).getParent();
            } while (true);
        }

        @Override
        public synchronized void registerDataSetObserver(
                final DataSetObserver observer) {
            observers.add(observer);
        }

        @Override
        public synchronized void unregisterDataSetObserver(
                final DataSetObserver observer) {
            observers.remove(observer);
        }

        @Override
        public int getLevel(final T id) {
            return getNodeFromTreeOrThrow(id).getLevel();
        }

        @Override
        public Integer[] getHierarchyDescription(final T id) {
            final int level = getLevel(id);
            final Integer[] hierarchy = new Integer[level + 1];
            int currentLevel = level;
            T currentId = id;
            T parent = getParent(currentId);
            while (currentLevel >= 0) {
                hierarchy[currentLevel--] = getChildren(parent).indexOf(currentId);
                currentId = parent;
                parent = getParent(parent);
            }
            return hierarchy;
        }

        private void appendToSb(final StringBuilder sb, final T id) {
            if (id != null) {
                final TreeNodeInfo<T> node = getNodeInfo(id);
                final int indent = node.getLevel() * 4;
                final char[] indentString = new char[indent];
                Arrays.fill(indentString, ' ');
                sb.append(indentString);
                sb.append(node.toString());
                sb.append(Arrays.asList(getHierarchyDescription(id)).toString());
                sb.append("\n");
            }
            final List<T> children = getChildren(id);
            for (final T child : children) {
                appendToSb(sb, child);
            }
        }

        @Override
        public synchronized String toString() {
            final StringBuilder sb = new StringBuilder();
            appendToSb(sb, null);
            return sb.toString();
        }

        @Override
        public synchronized void clear() {
            allNodes.clear();
            topSentinel.clearChildren();
            internalDataSetChanged();
        }

        @Override
        public void refresh() {
            internalDataSetChanged();
        }

    }

    ======================================================================================================
    package com.example.treelistviewdemo.treeview;
    import java.io.Serializable;
    import java.util.List;
    import android.database.DataSetObserver;
    /**
     * Manages information about state of the tree. It only keeps information about
     * tree elements, not the elements themselves.
     * 
     * @param <T>
     *            type of the identifier for nodes in the tree
     */
    public interface TreeStateManager<T> extends Serializable {

        /**
         * Returns array of integers showing the location of the node in hierarchy.
         * It corresponds to heading numbering. {0,0,0} in 3 level node is the first
         * node {0,0,1} is second leaf (assuming that there are two leaves in first
         * subnode of the first node).
         * 
         * @param id
         *            id of the node
         * @return textual description of the hierarchy in tree for the node.
         */
        Integer[] getHierarchyDescription(T id);

        /**
         * Returns level of the node.
         * 
         * @param id
         *            id of the node
         * @return level in the tree
         */
        int getLevel(T id);

        /**
         * Returns information about the node.
         * 
         * @param id
         *            node id
         * @return node info
         */
        TreeNodeInfo<T> getNodeInfo(T id);

        /**
         * Returns children of the node.
         * 
         * @param id
         *            id of the node or null if asking for top nodes
         * @return children of the node
         */
        List<T> getChildren(T id);

        /**
         * Returns parent of the node.
         * 
         * @param id
         *            id of the node
         * @return parent id or null if no parent
         */
        T getParent(T id);

        /**
         * Adds the node before child or at the beginning.
         * 
         * @param parent
         *            id of the parent node. If null - adds at the top level
         * @param newChild
         *            new child to add if null - adds at the beginning.
         * @param beforeChild
         *            child before which to add the new child
         */
        void addBeforeChild(T parent, T newChild, T beforeChild);

        /**
         * Adds the node after child or at the end.
         * 
         * @param parent
         *            id of the parent node. If null - adds at the top level.
         * @param newChild
         *            new child to add. If null - adds at the end.
         * @param afterChild
         *            child after which to add the new child
         */
        void addAfterChild(T parent, T newChild, T afterChild);

        /**
         * Removes the node and all children from the tree.
         * 
         * @param id
         *            id of the node to remove or null if all nodes are to be
         *            removed.
         */
        void removeNodeRecursively(T id);

        /**
         * Expands all children of the node.
         * 
         * @param id
         *            node which children should be expanded. cannot be null (top
         *            nodes are always expanded!).
         */
        void expandDirectChildren(T id);

        /**
         * Expands everything below the node specified. Might be null - then expands
         * all.
         * 
         * @param id
         *            node which children should be expanded or null if all nodes
         *            are to be expanded.
         */
        void expandEverythingBelow(T id);

        /**
         * Collapse children.
         * 
         * @param id
         *            id collapses everything below node specified. If null,
         *            collapses everything but top-level nodes.
         */
        void collapseChildren(T id);

        /**
         * Returns next sibling of the node (or null if no further sibling).
         * 
         * @param id
         *            node id
         * @return the sibling (or null if no next)
         */
        T getNextSibling(T id);

        /**
         * Returns previous sibling of the node (or null if no previous sibling).
         * 
         * @param id
         *            node id
         * @return the sibling (or null if no previous)
         */
        T getPreviousSibling(T id);

        /**
         * Checks if given node is already in tree.
         * 
         * @param id
         *            id of the node
         * @return true if node is already in tree.
         */
        boolean isInTree(T id);

        /**
         * Count visible elements.
         * 
         * @return number of currently visible elements.
         */
        int getVisibleCount();

        /**
         * Returns visible node list.
         * 
         * @return return the list of all visible nodes in the right sequence
         */
        List<T> getVisibleList();

        /**
         * Registers observers with the manager.
         * 
         * @param observer
         *            observer
         */
        void registerDataSetObserver(final DataSetObserver observer);

        /**
         * Unregisters observers with the manager.
         * 
         * @param observer
         *            observer
         */
        void unregisterDataSetObserver(final DataSetObserver observer);

        /**
         * Cleans tree stored in manager. After this operation the tree is empty.
         * 
         */
        void clear();

        /**
         * Refreshes views connected to the manager.
         */
        void refresh();
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-21T12:25:08.480

你的问题的根本原因是

`Caused by: java.io.NotSerializableException: com.jaapp.dto.QuestionsDto`

这清楚地表明您的类不可序列化。确保你的类实现了 Serializable 标记接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-20T04:47:59.403

解决了我的问题

```
MainActv extends AppCompatActivity implements Serializable, Parcelable{

....
//

    @Override
    public int describeContents() {return 0;}

    @Override
    public void writeToParcel(Parcel dest, int flags) {}

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T12:22:56.003

错误是编写类的可序列化对象，请确保：

1.  类 QuestionsDto 已经实现了 Serializable 接口。
2.  而且，您已经定义了写入和读取对象的方法。

请通过[链接](https://stackoverflow.com/questions/10094457/android-intent-putextrastring-serializable)查看应如何定义可打包或可序列化的类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-09T06:50:46.193

简单地说，所有子类和内部子类都必须像这样实现 Serializable。

```
public class ActivationResponse implements Serializable, Parcelable {} 
```

# .net - 如何安全地将 VS 项目的框架从 2.0 更新到 4.0？

> ID：13493054
> 
> 赞同：1
> 
> 时间：2012-11-21T12:16:50.483
> 
> 标签：.net, visual-studio-2008, .net-4.0, visual-studio-2012, .net-2.0

我们在 2.0 .NET 框架中有大约 5 个大项目。我们正在使用VS 2008。我们决定将我们的框架更改为4.0并升级到VS 2012。在这种情况下可能会出现什么问题？我们应该遵循哪些方式或步骤？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:21:33.010

唯一可以建议的是：测试它。实际升级应该非常简单。您可能会收到一些警告或错误，其中类型或方法已被标记`[Obsolete]`，在这种情况下，它通常会建议您查看替换的类型/方法，但是也可能存在影响*某些*（少数）代码的实现更改. 例如，有时错误修复可能会导致您以前工作的代码......*无法*正常工作（如果您无意或故意使用无法保证的行为）。

这里没有魔杖；你只需要测试它，但它不应该**太**痛苦，特别是如果你有一个测试套件。

另外：如果你还是要升级，为什么不升级到 4.5 *？*

# jquery - 在h2标签jquery中添加一个span标签

> ID：13493057
> 
> 赞同：2
> 
> 时间：2012-11-21T12:17:18.730
> 
> 标签：jquery

我需要在每个 h2 标签内添加一个 span 标签

我的问题是我在这样的 h2 标签内有一个锚标签

```
<h2><a href=#">something</a></h2> 
```

我试过这段代码

```
$('h2').wrappInner('<span />'); 
```

它在锚标记之前包装跨度标记，例如

```
<h2><span><a href="#">something</a></span></h2> 
```

我想要的是这个：

```
<h2><span></span><a href="#">something</a></h2> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:19:58.533

使用[`prepend()`](http://api.jquery.com/prepend/)方法：

```
$('h2').prepend('<span />'); 
```

[现场测试用例](http://jsfiddle.net/k7vPM/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:20:01.547

做这个：

```
$('h2').prepend('<span />'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T12:20:09.260

试试这个：

```
$('h2').prepend('<span />'); 
```

# shell - 在文本文件中将单词剪切为换行符的脚本或命令

> ID：13493060
> 
> 赞同：1
> 
> 时间：2012-11-21T12:17:23.883
> 
> 标签：shell, unix

假设我有一个包含以下内容的文本文件 (text1.txt)：

```
TAG 97
//S211130000059564  SE0000273294
//SE0000112724
MDGF 348 
```

对于以 // 开头的行，如果有第二个单词，我想在下一行打印那个单词，所以上面的文件 text1.txt 将变为：

```
TAG 97
//S211130000059564  
SE0000273294
//SE0000112724
MDGF 348 
```

任何人都可以帮我解决这个问题，请..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:25:31.470

[尝试使用perl](/questions/tagged/perl "显示标记为“perl”的问题")执行此操作：

```
perl -pe 's@^(//\S+)\s+(\S+)@$1\n$2@' file.txt 
```

或使用 GNU [sed](/questions/tagged/sed "显示标记为“sed”的问题")：

```
sed -r 's@^(//\S+)\s+(\S+)@\1\n\2@' file.txt 
```

（感谢[史蒂夫](https://stackoverflow.com/users/751863/steve)）

**输出**

```
TAG 97
//S211130000059564
SE0000273294
//SE0000112724
MDGF 348 
```

**简短的解释**

*   `perl`我在&中都使用了替换机制`sed`，它们都做同样的事情
*   我`@`用作分隔符（任意选择，选择您想要的任何字符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:25:31.693

这是一种使用方法`awk`：

```
awk '/^\/\// && NF == 2 { print $1 ORS $2; next }1' file 
```

结果：

```
TAG 97
//S211130000059564  
SE0000273294
//SE0000112724
MDGF 348 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:37:36.503

```
awk '{if($0~/\/\// && $2)print $1"\n"$2; else print}' your_file 
```

测试如下：

```
> cat temp
TAG 97
//S211130000059564  SE0000273294
//SE0000112724
MDGF 348
> awk '{if($0~/\/\// && $2)print $1"\n"$2; else print}' temp
TAG 97
//S211130000059564
SE0000273294
//SE0000112724
MDGF 348
> 
```

# string - 从 Erlang 中的大字符串中提取子字符串

> ID：13493061
> 
> 赞同：4
> 
> 时间：2012-11-21T12:17:24.350
> 
> 标签：string, erlang

我需要在字符串中搜索一个子字符串，如果它在字符串中，则返回它。在 Erlang 中最好的方法是什么？请注意，我不知道子字符串出现在较大字符串中的位置，因此我需要进行搜索。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T12:23:42.953

您可以使用正则表达式：

```
> re:run("foobarbaz", "bar", [{capture, first, list}]).
{match,["bar"]} 
```

有关更多信息，请参阅[re:run/3 的文档](http://www.erlang.org/doc/man/re.html#run-3)。特别是，您可能会发现不同的`capture`选项适合您的需要。

或者，如果您不需要正则表达式的所有功能，[string:str/2](http://www.erlang.org/doc/man/string.html#str-2)可能就足够了：

```
> string:str(" Hello Hello World World ", "Hello World").
8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T07:14:20.007

这个小功能可能会对您有所帮助。如果可以在大字符串中找到小字符串，则返回 true，否则返回 false。

```
string_contains(Big, Small)->
    string:str(Big, Small) > 0. 
```

# java - 指向定向边界框内的点？

> ID：13493070
> 
> 赞同：0
> 
> 时间：2012-11-21T12:17:45.983
> 
> 标签：java, algorithm, math, geometry

我有一个基于 SAT 的 OBB2D 课程。

这是我在 OBB 方法中的观点：

```
public boolean pointInside(float x, float y)
{
    float newy = (float) (Math.sin(angle) * (y - center.y) + Math.cos(angle) *
            (x - center.x));
    float newx = (float) (Math.cos(angle) * (x - center.x) - Math.sin(angle) * 
            (y - center.y));
    return (newy > center.y - (getHeight() / 2)) && 
            (newy < center.y + (getHeight() / 2)) 
            && (newx > center.x - (getWidth() / 2)) && 
            (newx < center.x + (getWidth() / 2));
}

public boolean pointInside(Vector2D v)
{
    return pointInside(v.x,v.y);
} 
```

这是课程的其余部分；相关部分：

```
public class OBB2D
{
   private Vector2D projVec = new Vector2D();
   private static Vector2D projAVec = new Vector2D();
   private static Vector2D projBVec = new Vector2D();
   private static Vector2D tempNormal = new Vector2D();
   private Vector2D deltaVec = new Vector2D();
   private ArrayList<Vector2D> collisionPoints = new ArrayList<Vector2D>();

// Corners of the box, where 0 is the lower left.
   private  Vector2D corner[] = new Vector2D[4];

   private Vector2D center = new Vector2D();
   private Vector2D extents = new Vector2D();

   private RectF boundingRect = new RectF();
   private float angle;

    //Two edges of the box extended away from corner[0]. 
   private  Vector2D axis[] = new Vector2D[2];

   private double origin[] = new double[2];

   public OBB2D(float centerx, float centery, float w, float h, float angle)
    {
       for(int i = 0; i < corner.length; ++i)
       {
           corner[i] = new Vector2D();
       }
       for(int i = 0; i < axis.length; ++i)
       {
           axis[i] = new Vector2D();
       }
       set(centerx,centery,w,h,angle);
    }

   public OBB2D(float left, float top, float width, float height)
  {
       for(int i = 0; i < corner.length; ++i)
       {
           corner[i] = new Vector2D();
       }
       for(int i = 0; i < axis.length; ++i)
       {
           axis[i] = new Vector2D();
       }
       set(left + (width / 2), top + (height / 2),width,height,0.0f);
   }

   public void set(float centerx,float centery,float w, float h,float angle)
   {
       float vxx = (float)Math.cos(angle);
       float vxy = (float)Math.sin(angle);
       float vyx = (float)-Math.sin(angle);
       float vyy = (float)Math.cos(angle);

           vxx *= w / 2;
           vxy *= (w / 2);
           vyx *= (h / 2);
           vyy *= (h / 2);

           corner[0].x = centerx - vxx - vyx;
           corner[0].y = centery - vxy - vyy;
           corner[1].x = centerx + vxx - vyx;
           corner[1].y = centery + vxy - vyy;
           corner[2].x = centerx + vxx + vyx;
           corner[2].y = centery + vxy + vyy;
           corner[3].x = centerx - vxx + vyx;
           corner[3].y = centery - vxy + vyy;

           this.center.x = centerx;
           this.center.y = centery;
           this.angle = angle;
           computeAxes();
           extents.x = w / 2;
           extents.y = h / 2;

           computeBoundingRect();
   }

   //Updates the axes after the corners move.  Assumes the
   //corners actually form a rectangle.
   private void computeAxes()
   {
       axis[0].x = corner[1].x - corner[0].x;
       axis[0].y = corner[1].y - corner[0].y;
       axis[1].x = corner[3].x - corner[0].x;
       axis[1].y = corner[3].y - corner[0].y;

       // Make the length of each axis 1/edge length so we know any
       // dot product must be less than 1 to fall within the edge.

       for (int a = 0; a < axis.length; ++a) 
       {
        float l = axis[a].length();
        float ll = l * l;
        axis[a].x = axis[a].x / ll;
        axis[a].y = axis[a].y / ll;
           origin[a] = corner[0].dot(axis[a]);
       }
   }

   public void computeBoundingRect()
   {
       boundingRect.left = JMath.min(JMath.min(corner[0].x, corner[3].x), JMath.min(corner[1].x, corner[2].x));
       boundingRect.top = JMath.min(JMath.min(corner[0].y, corner[1].y),JMath.min(corner[2].y, corner[3].y));
       boundingRect.right = JMath.max(JMath.max(corner[1].x, corner[2].x), JMath.max(corner[0].x, corner[3].x));
       boundingRect.bottom = JMath.max(JMath.max(corner[2].y, corner[3].y),JMath.max(corner[0].y, corner[1].y)); 
   }

   public void set(RectF rect)
   {
       set(rect.centerX(),rect.centerY(),rect.width(),rect.height(),0.0f);
   }

    // Returns true if other overlaps one dimension of this.
    private boolean overlaps1Way(OBB2D other)
    {
        for (int a = 0; a < axis.length; ++a) {

            double t = other.corner[0].dot(axis[a]);

            // Find the extent of box 2 on axis a
            double tMin = t;
            double tMax = t;

            for (int c = 1; c < corner.length; ++c) {
                t = other.corner[c].dot(axis[a]);

                if (t < tMin) {
                    tMin = t;
                } else if (t > tMax) {
                    tMax = t;
                }
            }

            // We have to subtract off the origin

            // See if [tMin, tMax] intersects [0, 1]
            if ((tMin > 1 + origin[a]) || (tMax < origin[a])) {
                // There was no intersection along this dimension;
                // the boxes cannot possibly overlap.
                return false;
            }
        }

        // There was no dimension along which there is no intersection.
        // Therefore the boxes overlap.
        return true;
    }

    public void moveTo(float centerx, float centery) 
    {
        float cx,cy;

        cx = center.x;
        cy = center.y;

        deltaVec.x = centerx - cx;
        deltaVec.y  = centery - cy;

        for (int c = 0; c < 4; ++c)
        {
            corner[c].x += deltaVec.x;
            corner[c].y += deltaVec.y;
        }

        boundingRect.left += deltaVec.x;
        boundingRect.top += deltaVec.y;
        boundingRect.right += deltaVec.x;
        boundingRect.bottom += deltaVec.y;

        this.center.x = centerx;
        this.center.y = centery;
        computeAxes();
    }

    // Returns true if the intersection of the boxes is non-empty.
    public boolean overlaps(OBB2D other)
    {
        if(right() < other.left())
        {
            return false;
        }

        if(bottom() < other.top())
        {
            return false;
        }

        if(left() > other.right())
        {
            return false;
        }

        if(top() > other.bottom())
        {
            return false;
        }

        if(other.getAngle() == 0.0f && getAngle() == 0.0f)
        {
            return true;
        }

        return overlaps1Way(other) && other.overlaps1Way(this);
    }

    public Vector2D getCenter()
    {
        return center;
    }

    public float getWidth()
    {
        return extents.x * 2;
    }

    public float getHeight() 
    {
        return extents.y * 2;
    }

    public void setAngle(float angle)
    {
        set(center.x,center.y,getWidth(),getHeight(),angle);
    }

    public float getAngle()
    {
        return angle;
    }

    public void setSize(float w,float h)
    {
        set(center.x,center.y,w,h,angle);
    }

    public float left()
    {
        return boundingRect.left;
    }

    public float right()
    {
        return boundingRect.right;
    }

    public float bottom()
    {
        return boundingRect.bottom;
    }

    public float top()
    {
        return boundingRect.top;
    }

    public RectF getBoundingRect()
    {
        return boundingRect;
    }

    public boolean overlaps(float left, float top, float right, float bottom)
    {
        if(right() < left)
        {
            return false;
        }

        if(bottom() < top)
        {
            return false;
        }

        if(left() > right)
        {
            return false;
        }

        if(top() > bottom)
        {
            return false;
        }

        return true;
    }

    public static float distance(float ax, float ay,float bx, float by)
    {
      if (ax < bx)
        return bx - ay;
      else
        return ax - by;
    }

    public Vector2D project(float ax, float ay)
    {
        projVec.x = Float.MAX_VALUE;
        projVec.y = Float.MIN_VALUE;

      for (int i = 0; i < corner.length; ++i)
      {
        float dot = Vector2D.dot(corner[i].x,corner[i].y,ax,ay);

        projVec.x = JMath.min(dot, projVec.x);
        projVec.y = JMath.max(dot, projVec.y);
      }

      return projVec;
    }

    public Vector2D getCorner(int c)
    {
        return corner[c];
    }

    public int getNumCorners()
    {
        return corner.length;
    }

    public boolean pointInside(float x, float y)
    {
        float newy = (float) (Math.sin(angle) * (y - center.y) + Math.cos(angle) *
                (x - center.x));
        float newx = (float) (Math.cos(angle) * (x - center.x) - Math.sin(angle) * 
                (y - center.y));
        return (newy > center.y - (getHeight() / 2)) && 
                (newy < center.y + (getHeight() / 2)) 
                && (newx > center.x - (getWidth() / 2)) && 
                (newx < center.x + (getWidth() / 2));
    }

    public boolean pointInside(Vector2D v)
    {
        return pointInside(v.x,v.y);
    }

    public ArrayList<Vector2D> getCollsionPoints(OBB2D b)
    {

        collisionPoints.clear();
        for(int i = 0; i < corner.length; ++i)
        {
            if(b.pointInside(corner[i]))
            {
                collisionPoints.add(corner[i]);
            }
        }

        for(int i = 0; i < b.corner.length; ++i)
        {
            if(pointInside(b.corner[i]))
            {
                collisionPoints.add(b.corner[i]);
            }
        }
        return collisionPoints;
    }
}; 
```

有什么问题？当我得到 2 个我知道正在穿透的 OBB 的碰撞点时，它不返回任何分数。

谢谢

我也试过：

```
public boolean pointInside(float x, float y)
{
    float xx = (x - center.x);
    float yy =  (y - center.y);
    float newx = (float) (xx * Math.cos(angle) - yy * Math.sin(angle));
    float newy = (float) (xx * Math.sin(angle) + yy * Math.cos(angle));
    return (newy > center.y - (getHeight() / 2)) && 
            (newy < center.y + (getHeight() / 2)) 
            && (newx > center.x - (getWidth() / 2)) && 
            (newx < center.x + (getWidth() / 2));
} 
```

没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:08:20.687

我没有读过你所有的课，但我假设`angle`你需要顺时针旋转矩形以使其轴对齐的角度。

我相信两者`sin(angle) * (y-center.y)`和`cos(angle) * (x-center.x)`都等于您的中心点和您正在测试的点之间的距离。所以`newy`总是等于该距离的两倍，并且`newx`总是等于 0。

这就是我更喜欢围绕另一个点旋转一个点的方式：获取两点之间的角度和距离，然后将旋转应用于角度，然后根据角度和距离计算新位置。在伪代码中：

```
//takes a point and rotates it `theta` angles 
//counterclockwise around the given center point
function rotateAboutPoint(x,y, centerX, centerY, theta){
    radius = sqrt((centerX-x)**2 + (centerY-y)**2)  //`**` is the exponentiation operator
    currentAngle = atan2(y-centerY, x-centerX)      //prefer `atan2` over ordinary `atan` if you can get it
    newAngle = currentAngle + theta
    newX = centerX + radius*cos(newAngle)
    newY = centerY + radius*sin(newAngle)
    return (newX, newY)
}

function pointInside(x,y){
    //point must be rotated clockwise, so we provide a negative angle
    newX, newY = rotateAboutPoint(x,y,center.x, center.y, -angle) 
    return (
        newY  > center.y - (getHeight() / 2) &&
        newY  < center.y + (getHeight() / 2) &&
        newX  > center.x - (getHeight() / 2) &&
        newX  < center.x + (getHeight() / 2) &&
    )
} 
```

# git - 管理相关的正在进行的 git 功能分支/分支集

> ID：13493071
> 
> 赞同：7
> 
> 时间：2012-11-21T12:17:47.573
> 
> 标签：git, workflow, feature-branch

最近，我似乎有这样的重复场景，即正在开发多个功能分支，其中一个功能分支（`feature-b`在下图中）取决于对另一个未完成功能（在 中开发`feature-a`）的支持：

```
---o---o--o                    master
       |
       +---o---o---o           feature-a
                   |
                   +----o---o  feature-b 
```

每当我修改`feature-a`（包括交互式变基以修复功能中的错误）时，我需要变基`feature-b`到`feature-a`. 这些是本地分支，所以我可以随意修改它们。

我经常遇到以下情况：

```
 master                                         testing
---o---o--o-------------------------------------------o---o
       |              feature-a                      .   .
       +---o---o---o                                .   .
                   |           feature-b           .   .
                   +----o---o .....................   .
                   |           feature-c             .
                   +----o---o ....................... 
```

其中测试分支是正在开发的所有（相关）特征的组合，通过合并其上的所有相关特征分支产生（在图片`master`中`feature-b`，，`feature-c`- 和暗示`feature-a`）。

目前，特别是如果有更复杂的功能分支关系，我`gitk`不断地打开可视化的分支关系，并维护 shell 脚本来自动做这个变基，但是这种方法看起来很脆弱，而且很麻烦。我想知道的：

1.  有没有一种方法可以描述甚至*自动检测分支关系*，然后用一个命令*尝试重新执行所描述的关系*（在上面的简单示例中，通过变`feature-a`基或向头部添加新提交进行更改后，自动执行`feature-b`变基的新负责人`feature-a`）。
2.  *用于将一组分支重新定位*到其他提交的GUI 工具（如果冲突会阻止操作，只需给出错误就可以了）？
3.  管理这个分支混乱的其他想法？所涉及的意外复杂性会花费太多时间并消耗太多脑力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T03:57:42.317

> 我不喜欢把坏东西推给别人看，我喜欢让最终的历史看起来干净。

这是一个坏习惯。您应该为“建议的更新”保留 a`master`和 a 。`pu`将您的提交推送到，`pu`然后根据需要重新设置。时机成熟时，您可以从中挑选甚至合并到.`pu``master``pu``pu``master`

这就是[**git repo**](https://github.com/git/git/branches)本身的处理方式。避免掉入无尽分支的“兔子洞”。

[**有关的**](http://github.com/dchelimsky/rspec/wiki/Topic-Branches)

# hibernate - JPA/Hibernate sql语句与另一个集合中的集合，可能吗？

> ID：13493083
> 
> 赞同：-1
> 
> 时间：2012-11-21T12:18:19.820
> 
> 标签：hibernate

我该如何编写这个 jpa/hibernate sql 语句（如果可能的话）

我有 2 个实体

```
@Entity
public class Employees    
  @OneToMany(cascade=CascadeType.ALL)
  private List<Benefits> benefits; 
```

========================================

```
@Entity    
public class Benefits
  private String department 
```

我需要检索您的福利列表中包含在某些部门列表中的员工列表。

我写了以下 JPA/Hibernate sql 语句，

```
from Employees e where e.benefits exists ( from Benefits b where b.department in (?1) )", someListOfDepartments ) 
```

但它会引发异常。可以做这样的查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:39:19.610

总部：

```
from Employees e INNER JOIN e.benefits b where b.department in (:depts) 
```

标准：

```
session.createCriteria(Employees.class);
    criteria3.createAlias("benefits", "b",
            CriteriaSpecification.INNER_JOIN)
            .setFetchMode("b", FetchMode.JOIN)
    .add(Restrictions.in("b.department", depts)); 
```

# javascript - jquery deferred - 在第一次拒绝时调用“总是”

> ID：13493084
> 
> 赞同：10
> 
> 时间：2012-11-21T12:18:27.057
> 
> 标签：javascript, jquery, jquery-deferred

我`$.when`用来链接一些 Deferred 对象，如果其中一个失败，该`always`方法将在失败后直接调用，即使我仍然有一些 deferrer 处于“挂起”状态。

```
var promises = [], defs = [];

for(var i=0 ; i < 10 ; i++){
    defs.push($.Deferred());
    promises.push(defs[i].promise());
}

var res = $.when.apply($, promises);

res.fail(function(){console.log('failed')});
res.done(function(){console.log('done')});
res.always(function(){console.log('always')});
res.then(function(){console.log('then, done')},      
         function(){console.log('then, failed')});        

var j = 0;                      
var t = setInterval(function(){
    if(j < 10){
        if(j < 5) {
            console.log('resolve');
            defs[j++].resolve();    
        }
        else {
            console.log('reject');
            defs[j++].reject();
        }
    }
    else {
        clearInterval(t);        
    }
}, 200); 
```

检查[这个 jsfiddle](http://jsfiddle.net/cSy2K/1/)。

也许这是正常的行为。但是，在这种情况下，即使其中一些失败了，我怎么能抓住我的链条末端呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T12:41:16.453

这是设计使然：该方法将在所有 Deferred 解析后立即解析其主 Deferred，或者在**其中一个**Deferred 被拒绝时拒绝主 Deferred。[...] 请注意，此时某些延期可能仍未**解决**。

[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

您可以保存对所有延迟的引用并单独跟踪它们。

像这样的东西：

```
var whenAll = function() {
   var dfd = $.Deferred(),
       len = arguments.length,
       counter = 0,
       state = "resolved",
       resolveOrReject = function() {
           if(this.state() === "rejected"){
               state = "rejected";
           }
           counter++;

           if(counter === len) {
               dfd[state === "rejected"? "reject": "resolve"]();   
           }

       };

    $.each(arguments, function(idx, item) {
        item.always(resolveOrReject); 
    });

   return dfd.promise();    
}; 
```

[http://jsfiddle.net/cSy2K/2/](http://jsfiddle.net/cSy2K/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T14:12:15.557

是的，这是正常行为。如果一个失败了，那么依赖所有的东西也会失败。另请参阅[jQuery 文档](http://api.jquery.com/jQuery.when/)。

因此，您要么必须手动跟踪它们，要么只将已解决的 Promises 输入`when`：

```
promises.push( defs[i].promise().then(function(x) {
      return {result:x,resolved:true};
  }, function(x) {
      return (new $.Deferred).resolve({result:x,resolved:false});
  })
); 
```

这样，您`res`将仅`done`在处理所有承诺时调用回调，它将获得一个指示它们状态和结果的对象数组。

# c - Bitfields and Unions in C giving problems

> ID：13493095
> 
> 赞同：3
> 
> 时间：2012-11-21T12:18:58.303
> 
> 标签：c, struct, unions, bit-fields

I am implementing a radio standard and have hit a problem with unions in structure and memory size. In the below example I need this structure to located in a single byte of memory (as per the radio standard) but its currently giving me a size of 2 bytes. After much digging I understand that its because the Union's "size" is byte rather than 3 bits...but havent worked out a way around this. I have looked at:

*   [Bitfields in C with struct containing union of structs](https://stackoverflow.com/questions/5055142/bitfields-in-c-with-struct-containing-union-of-structs?rq=1); and
*   [Will this bitfield work the way I expect?](https://stackoverflow.com/questions/7755322/will-this-bitfield-work-the-way-i-expect?rq=1)

But neither seem to give me a solution.

Any ideas?

Thanks!

```
#ifdef WIN32
#pragma pack(push)
#pragma pack(1)
#endif

typedef struct three_bit_struct
{
    unsigned char bit_a : 1;
    unsigned char bit_b : 1;
    unsigned char bit_c : 1;
}three_bit_struct_T;

typedef union
{
    three_bit_struct_T three_bit_struct;
    unsigned char another_three_bits : 3;
}weird_union_T;

typedef struct
{
    weird_union_T problem_union; 
    unsigned char another_bit : 1;
    unsigned char reserved : 4;
}my_structure_T;

int _tmain(int argc, _TCHAR* argv[])
{
     int size;

     size = sizeof(my_structure_T);

     return 0;
}

#ifdef WIN32
#pragma pack(pop)
#endif 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:22:54.567

问题是 的大小`three_bit_struct_T`将被四舍五入到最接近的字节^*而不管它在其位域中仅包含三位这一事实。一个结构根本不能有一个字节的一部分的大小。因此，当您使用 中的额外字段对其进行扩充时`my_structure_T`，大小不可避免地会溢出到第二个字节中。

要将所有这些东西塞进一个字节中，您必须将所有位域成员放在外部，`my_structure_T`而不是将它们作为内部结构/联合。

我认为你能做的最好的事情就是将整个事情作为一个工会。

```
typedef struct
{
    unsigned char bit_a : 1;
    unsigned char bit_b : 1;
    unsigned char bit_c : 1;
    unsigned char another_bit : 1;
    unsigned char reserved : 4;
} three_bit_struct_T;

typedef struct
{
    unsigned char another_three_bits : 3;
    unsigned char another_bit : 1;
    unsigned char reserved : 4;
} another_three_bit_struct_T;

typedef union
{
    three_bit_struct_T three_bit_struct;
    another_three_bit_struct_T another_three_bit_struct;
} my_union_T; 
```

[(*) 或单词，取决于对齐/包装设置。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:48:38.930

两个好建议：永远不要将 struct/union 用于数据协议，并且永远不要在任何情况下[使用位域。](https://stackoverflow.com/questions/6043483/why-bit-endianness-is-an-issue-in-bitfields/6044223#6044223)

实现这一点的最佳方法是通过位掩码和按位运算符。

```
#define BYTE_BIT7 0x80u

uint8_t byte;

byte |= BYTE_BIT_7;  // set bit to 1
byte &= ~BYTE_BIT_7; // set bit to 0

if(byte & BYTE_BIT_7) // check bit value 
```

此代码可移植到世界上的每个 C 编译器，也可移植到 C++。

# iphone - 我的代码在比较 Objective C 中的指针时有什么问题？

> ID：13493097
> 
> 赞同：0
> 
> 时间：2012-11-21T12:19:10.737
> 
> 标签：iphone, objective-c

我有

```
static __weak ExplorerController *_rootExplorer = nil; 
```

和

```
_rootExplorer = self;            
NSAssert(_rootExplorer == self, @"????"); 
```

哪个有效。

在 dealloc 中，我尝试这样做

```
bool b = _rootExplorer == self; 
```

这是错误的，但调试器清楚地表明两个对象是相同的并且具有相同的物理地址。

当我做

```
long n = (long) (_rootExplorer);
long n2 = (long) (self); 
```

我得到一个非常大的数字`n2`和零`n`。但`_rootExplorer`不是`nil`。但是，如果我在其他函数中做同样的事情，那不是`dealloc`，`n`并且`n2`是相同的。

我的代码有什么问题？我试图保持对堆栈中导航控制器之一的弱引用，并且在展开期间，我需要释放资源，但只允许引用的控制器这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:25:17.507

Apple 的[ARC 文档](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)说：*“当对象没有强引用时，弱引用设置为 nil。”* 因此，我认为您的代码没有任何问题（...除了在某种意义上，它的位置在 ARC 完成工作之后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:56:12.920

大概您打算向 _rootExplorer 发送消息，告诉它进行清理？如果是这样，只需向它发送消息 - 如果它真的为零，您的消息将被忽略而不会造成任何伤害。

如果它真的为零，那么您可能在某个地方遇到了一个错误，导致它在 dealloc 之前以这种方式设置 - 也许它指向的对象正在被释放？

切线地，您可能无法信任调试器来获取正确的值，尤其是在您使用 lldb 时。这方面存在已知的错误。也可能存在竞争 - 也许您的 _rootExplorer 与您自己的对象在同一时间被释放，并且在调试器中停止只是碰巧改变了似乎发生的顺序？

# dynamics-crm - 如何使用 SSIS 将 GUID 值从一个 DB 加载到另一个 DB

> ID：13493098
> 
> 赞同：0
> 
> 时间：2012-11-21T12:19:17.583
> 
> 标签：dynamics-crm, etl, ssis

我有两个 CRM 的 MS CRM 2011（带有 SQL Server 2008 的本地）和 MS CRM 2011（在云中）。

我想使用 SSIS 2008 将数据从本地迁移到在线，我是否安装了第三方组件，如“CRM 源组件”和“CRM 目标组件”。在这里，当我尝试将所有属性从源映射到目标时，除了自动生成的字段（GUID）或 CRM 中的查找字段（如 Accountid、ParentCustomerid、territoryid（它们是与其他实体的关系字段（FK））等，数据正在移动完全其他包正在失败。

在这里，我如何将这些缺失的属性值加载到 CRM 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:33:09.040

可能是您违反了参照完整性约束。在执行包之前尝试删除（临时）目标表上的所有约束。

# javascript - Save image from Stage with offset KineticJS HTML5

> ID：13493099
> 
> 赞同：1
> 
> 时间：2012-11-21T12:19:20.900
> 
> 标签：javascript, html, canvas, kineticjs, stage

I want to save part of a KineticJS stage. This code is working perfect:

```
stage.toDataURL({
        width: 350,
        height: 350,
        mimeType: "image/jpeg",
        callback: function(dataUrl) {
          /*
           * here you can do anything you like with the data url.
           * In this tutorial we'll just open the url with the browser
           * so that you can see the result as an image
           */
          window.open(dataUrl);
        }
      });
    }, false); 
```

But what i want is to add an offset to that, so image would start and coordinates (75,75) of the stage area. Any idea?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:53:13.537

好吧，由于没有crop() 方法，因此您必须恢复为双向移动舞台75 上的所有对象，幸运的是，这并不是很困难。

就像是：

```
 var layersList = stage.getChildren();
 for (var layerNum in layersList){   //loop through all layers
     var childList = layerList.getChildren();  //get all children of the layer
     for(var childNum in childList){
          childList[childNum].move(-75,-75);
     }
 }
 stage.draw();
 stage.toDataURL({.....}); 
```

您可以通过使用相同的代码并执行 .move(75,75); 来撤消此操作。将每个项目放回原来的位置

或者，如果您想通过函数定义偏移量，只需执行以下操作：

```
 function moveStage(offsetX, offsetY){
    var layersList = stage.getChildren();
    for (var layerNum in layersList){   //loop through all layers
        var childList = layerList.getChildren();  //get all children of the layer
        for(var childNum in childList){
             childList[childNum].move(-offsetX,-offsetY);
        }
    }

 stage.draw();
 stage.toDataURL({.....});
 } 
```

# java - Having multiple time-out periods for different pages in Wicket?

> ID：13493100
> 
> 赞同：0
> 
> 时间：2012-11-21T12:19:22.547
> 
> 标签：java, properties, web, timeout, wicket

I'm using Wicket 1.5 and I'm wanting to have a different time out period set for different pages.

Say on the "My Profile" screen, I would want the timeout period to be longer than the timeout period for the "change password" screen. At the moment the timeout property is set in the server properties and is the same for every page.

Could I set the property somewhere else, just for the change password screen or other selected screens? If I could do this, how would I go about doing it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:56:03.330

据我所知，这是不可能的，因为会话超时由 servlet 容器处理。您可以在 web.xml 中指定它。

您可以通过存储页面呈现的时间并将其与表单提交的时间进行比较来伪造它。

# c# - 取消“获取最新版本”在 TFS 中有效吗？

> ID：13493103
> 
> 赞同：2
> 
> 时间：2012-11-21T12:19:33.840
> 
> 标签：c#, .net, visual-studio, tfs

我选择从 TFS 连接的解决方案中获取最新版本，然后按下取消，此操作是否具有事务性，我的意思是取消获取最新版本命令会取消整个操作或获取一些代码并取消剩余文件？

我的机器：

TFS 2010

VS 2010 SP1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:43:59.150

**TL;DR：**是的，您的工作文件夹中的某些文件位于请求的变更集中，而某些文件位于其先前的变更集中，这是可能的。您可能希望获取特定的先前版本，以便“回滚”到该版本。

要查看发生了什么，我们可以将其分解为执行 get 时正在执行的实际步骤：

首先，客户端要求服务器获取特定版本。服务器将计算需要传输哪些文件才能将您从当前的变更集带到您请求的变更集。它将这些作为一系列“获取操作”返回给客户端。

此时，客户端应该生成多个线程来为 get 操作提供服务。这些线程中的大多数将是下载数据并将其放置在磁盘上的线程。将有一个额外的线程专门用于向服务器发送“本地版本更新”。

下载线程将 get 操作从服务器返回的列表中取出，并将其下载到磁盘到一个临时位置。下载完成后，他们会将其移动到其永久位置，并通知发送本地版本更新的线程该文件已完全下载。

本地版本更新线程将批处理来自下载程序线程的本地版本更新，直到达到某个固定数量，因为本地版本更新消息非常小并且一次发送一个会导致不必要的网络开销。一旦本地版本更新线程积累了足够的更新，它们就会被发送到服务器。这是服务器知道客户端具有他们请求的文件版本的点。

下载线程将继续为 get 操作提供服务，直到没有更多要处理的内容，并且本地版本更新线程将继续，直到所有下载线程完成下载并且所有本地版本更新都已发送到服务器。一旦这些发生，get 就完成了。

如果客户端支持取消，其逻辑应该如下：如果用户请求取消（例如，通过在基于 UI 的客户端中按下“取消”按钮），则应通知所有下载工作线程取消。如果他们正在下载文件，他们应该立即停止（只是丢弃他们正在读取的 HTTP 响应。）但是，一旦他们将文件从临时位置移动到永久位置，他们必须通知本地版本在他们退出之前更新线程。本地版本更新线程必须等待所有下载线程完成，然后在退出之前刷新所有未完成的本地版本更新。

因此，如果您在获取过程中取消，您可能在磁盘上有一些您尝试下载的文件，但客户端和服务器应该对每个文件的版本具有一致的视图。

如果您要杀死客户端，使其无法完全停止工作线程（例如，通过简单地关闭计算机电源），那么您可能会进入项目已提交到磁盘的状态但客户端尚未将本地版本更新刷新到服务器。在这种情况下，您可能在磁盘上有一个版本，而服务器认为您有不同的版本。万一发生这种情况，您需要在获取此文件时使用“强制”选项来协调此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:04:42.947

它不是事务性的。有些文件可能已经下载。在这种情况下，您应该在取消请求后获得特定版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T14:04:38.917

根据我的经验，按“取消”会在磁盘上的版本与 TFS 认为磁盘上的版本之间产生差异。因此，如果您再次尝试更新，则不会下载任何内容，因为服务器认为您已经拥有最新版本。

# xpages - XPages XSP.partialRefreshGet 对视图容器控件的奇怪效果

> ID：13493107
> 
> 赞同：2
> 
> 时间：2012-11-21T12:19:53.863
> 
> 标签：xpages

我的主题是 OneUI2 ...

在我的 XPage 上，我有一个 VDS（查看数据源），当单击链接时，关联的文档会加载到下面的 DDS 中。我有一个设置了“无更新”的保存按钮，按钮事件处理程序在 DDS 上进行部分刷新，而 onComplete 它在 VDS 中进行部分刷新。一切都很好，但是视图发生了一些事情。

View Source 显示 TABLE 标签内的视图，在 VDS 上的 partialRefreshGet 之后，table 标签在第一个 TABLE 标签内重复，所以现在我在另一个 TABLE 标签内有一个 TABLE 标签（我在这里忽略了 TR 和 TR 标签）每次保存 VDS 后依此类推。

如果我更改按钮以对我的 VDS 进行部分刷新，并更改事件处理程序以对 DDS 进行部分刷新，它就可以工作！但是任何对 VDS 进行部分刷新的 CSJS 都会出错。

为什么会发生这种情况，我该如何阻止这种情况？有没有人在 VDS 上完成了 partialRefreshGet 并让它在每次保存后不添加表标签的情况下工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T07:32:18.493

您可以尝试继续使用 CSJS 执行部分刷新的 2 件事：

*   确保 XSP.partialRefreshGet 的语法正确。如果您不执行缩进部分刷新，**请注意****{}**的第二个参数。

句法：

```
 XSP.partialRefreshGet(yourId, {}); 
```

*   尝试 XSP.partialRefreshPost 作为可能的替代方案。我有时不得不在 2 之间跳转以获得我正在寻找的结果。

    ```
    XSP.partialRefreshPost(yourId, {}); 
    ```

# asp.net - How to get the dropdownlistselectedid in asp.net

> ID：13493108
> 
> 赞同：0
> 
> 时间：2012-11-21T12:19:54.167
> 
> 标签：asp.net

```
var countries = context.MasterCountries.ToList();
ddlcountry.DataSource = countries;
ddlcountry.DataTextField = "Description";
ddlcountry.DataValueField = "Id";
ddlcountry.DataBind();

<asp:DropDownList runat="server" ID="ddlcountry" CssClass="textbox textbox-reg" />

int countryid = ddlcountry.SelectedIndex; 
```

I am trying to get the id of the company but it's not working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:23:50.333

试试看：

```
int countryid = int.Parse(ddlcountry.SelectedValue); 
```

# javascript - 如何使用 Javascript 在 JSON 中获取变量值

> ID：13493110
> 
> 赞同：0
> 
> 时间：2012-11-21T12:20:00.423
> 
> 标签：javascript, json

我已将 .xml 代码转换为 .json

对于 xml，我使用的是这样的：

```
var stage = xml.getElementsByTagName("stage" + game.current_stage)[0]; 
```

你怎么能在json中做到这一点？我想要这样的东西：

```
var stage = json."stage"+ game.current_stage; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:23:57.130

如果我理解这个问题：

```
var stage = json["stage"+ game.current_stage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:24:35.813

```
var stage = json["stage" + game.current_stage]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:31:54.277

你想用 Javascript 还是什么来阅读？

然后下面的代码会有所帮助。请尝试一下

```
var stage = JSON.parse(json)["stage"+ game.current_stage]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:37:54.123

您仍然可以对 JSON 使用零索引，正确的语法是：

```
var stage = json["stage" + game.current_stage][0]; 
```

# internet-explorer - enable vbscript in internet explorer 9

> ID：13493111
> 
> 赞同：1
> 
> 时间：2012-11-21T12:20:01.280
> 
> 标签：internet-explorer, internet-explorer-8, internet-explorer-9

In a website vbscript is not opening in the higher version of browsers. Actually the website is containing the scripting in VB script. when the website is being opened in Internet Explorer 9 then it is not supporting the scripting and giving the following error

```
javascript:void(0) 
```

but the files are opening in internet explorer 8\. so can you suggest how to enable the scripting in browser.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:40:12.410

那不是错误。IE 9 仍然支持 VBScript。

# asp.net-mvc - Moq Automapper service in testmethod returns null while mapping

> ID：13493112
> 
> 赞同：3
> 
> 时间：2012-11-21T12:20:01.000
> 
> 标签：asp.net-mvc, unit-testing, moq, automapper

I'm building a website in MVC 4 & using Automapper to map from domain objects to Viewmodel objects. I have injected Automapper as stated here [http://rical.blogspot.in/2012/06/mocking-automapper-in-unit-testing.html](http://rical.blogspot.in/2012/06/mocking-automapper-in-unit-testing.html)

and it's working fine inside action methods while debugging, but during unit testing the action method when I inject automapper service I find that service.map is returning null. But while debugging the mapping is fine. I'm not being able to find the reason, trying for over 4 hrs. I have a domain class called Interview & its corrosponding viewmodel as InterviewModel. I have initialized mapping as CreateMap(); in automapper profile config, that has been called from global startup method. Below is the controller & action...

```
public class NewsAndViewsController : Controller
{
    private IInterviewRepository repository;
    private IMappingService mappingService;

    public NewsAndViewsController(IInterviewRepository productRepository, IMappingService autoMapperMappingService)
    {
        repository = productRepository;
        mappingService = autoMapperMappingService;
    }

    [HttpPost, ValidateAntiForgeryToken]
    [UserId]
    public ActionResult Edit(InterviewModel interView, string userId)
    {
        if (ModelState.IsValid)
        {
            var interView1 = mappingService.Map<InterviewModel, Interview>(interView);
            **// THE ABOVE LINE RETURNING NULL WHILE RUNNING THE BELOW TEST, BUT NOT DURING DEBUGGING**
            repository.SaveInterview(interView1);
            TempData["message"] = string.Format("{0} has been saved", interView.Interviewee);
            return RedirectToAction("Create");
        }
        return View(interView);
    }
}

[TestMethod]
public void AddInterview()
{
    // Arrange
    var interviewRepository = new Mock<IInterviewRepository>();
    var mappingService = new Mock<IMappingService>();
    var im = new InterviewModel { Interviewee="sanjay", Interviewer="sanjay", Content="abc" };
    mappingService.Setup(m => m.Map<Interview, InterviewModel>(It.IsAny<Interview>())).Returns(im);
    var controller = new NewsAndViewsController(interviewRepository.Object, mappingService.Object);

    // Act
    var result = controller.Edit(im, "2") as ViewResult;

    // Assert - check the method result type
    Assert.IsNotInstanceOfType(result, typeof(ViewResult));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:20:48.300

在您的测试中，您的 Interview 和 InterviewModel 类在 mappingService.Setup() 调用中交叉（顺便说一句，我认为您可以使用更好的命名约定，或者不使用 var，以保持对象清晰 - “ im"、"interview" 和 "interview1" 不容易理解哪个是模型，哪个是视图对象）。

尝试这个：

```
[TestMethod]
public void AddInterview()
{
    // Arrange
    var interviewRepository = new Mock<IInterviewRepository>();
    var mappingService = new Mock<IMappingService>();
    var interview = new Interview();
    var im = new InterviewModel { Interviewee="sanjay", Interviewer="sanjay", Content="abc" };
    mappingService.Setup(m => m.Map<InterviewModel, Interview>(im).Returns(interview);
    var controller = new NewsAndViewsController(interviewRepository.Object, mappingService.Object);

    // Act
    var result = controller.Edit(im, "2") as ViewResult;

    // Assert - check the method result type
    Assert.IsNotInstanceOfType(result, typeof(ViewResult));
} 
```

# sed - How to extract data from one to another string and save to the output

> ID：13493114
> 
> 赞同：1
> 
> 时间：2012-11-21T12:20:04.417
> 
> 标签：sed, awk, grep, tr

Want to get specific hour to another and save output. First hour is my start point for example:

```
Nov 20 13:42:52 host sendmail[14819]: qAKCgpxF014819: Milter: read returned -1: Connection reset by mail.yahoo.com 
```

And my finish point is:

```
Nov 20 16:22:23 host sendmail[16326]: qAKCgpxF016326: Milter: read returned -1: Connection reset by mail.yahoo.com 
```

I need to save all data from my start point to my finish point into file only.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:17:55.620

如果记录按时间排序，您可以

```
sed -n '/^Nov 20 13:42:52/,/^Nov 20 16:22:23/p' input.log > output.log 
```

请注意，如果结束时间的记录更多，则只会打印第一个。您可以通过以下方式改进它

```
sed -n '/start/,/end/{p;d};/end/p' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:42:15.887

这对你有用吗？（没有测试）

```
awk -F' |:'  'BEGIN{m="Nov";d=20;sh=13;eh=16}$1==m && $2==d && $3>=sh && $3<=eh' file 
```

# iphone - RestKit loadObjects

> ID：13493117
> 
> 赞同：0
> 
> 时间：2012-11-21T12:20:19.877
> 
> 标签：iphone, objective-c, cocoa, restkit

iam using restKit, to send and receive data from server... iam getting back

```
{
    "request":"globalUpdate",
    "updateRevision":2,
    "updatedObjects":{
        "users":[
            {
                id:"someid1",
                name:"somename"
            },
            {
                id:"someid2",
                name:"somename2",
            }
        ]
    }
} 
```

**i want to use**

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:nil usingBlock:^(RKObjectLoader * loader){)]; 
```

**to load only objects inside `updatedObjects` into CoreData and `request`, `updateRevision` into NSDictionary**

so in

```
loader.onDidLoadObjects = ^(NSArray *objects) {    

} 
```

the first object is the Dictionary and the later one are CoreData

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:57:24.230

好吧，这取决于您选择哪个对象用于核心数据以及哪个对象用于您自己的目的。RKObjectLoader 还提供了 onDidLoadResponse 块，它引用了您可以自己使用的响应。

```
[myobjectManager loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader) {
        loader.mappingProvider = [RKObjectMappingProvider mappingProviderUsingBlock:^(RKObjectMappingProvider *provider) {
            [provider setObjectMapping:[MyClass mapping] forKeyPath:@"updatedObjects"];
            loader.onDidLoadObjects = ^(NSArray *objects){

            };
            loader.onDidLoadResponse = ^(RKResponse *response){
               // NSData * data  = [response data];
                id object = [response parsedBody:nil];
               // now parse the data yourself which will give you
               // the entire json in NSData for and parse it,
               // extract the component you need
            };
            loader.onDidFailWithError = ^(NSError *error){

            };
        }];
    }]; 
```

# iphone - UIView 阴影不显示

> ID：13493121
> 
> 赞同：1
> 
> 时间：2012-11-21T12:20:25.603
> 
> 标签：iphone, objective-c, ios, ios6

我不确定我是否遗漏了什么，但应该是一项简单的任务却不想工作。`UIView`我正在尝试在 in 中添加阴影`iOS 6`。我正在使用故事板和自动布局。我正在`UIView`用白色背景绘制故事板场景。然后将其链接到`IBOutlet`.

在我的 .h 文件中，我声明了`IBOutlet`and 属性

```
#import <UIKit/UIKit.h>

@interface LoginViewController : UIViewController {

    IBOutlet UIView *_loginPanel;

}

@property (nonatomic, retain) IBOutlet UIView *_loginPanel;

@end 
```

在我的.mi`import QuartzCore`

```
#import <QuartzCore/QuartzCore.h> 
```

`Synthesize`财产

```
@synthesize _loginPanel; 
```

并在我的`ViewDidLoad`方法中执行以下操作

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBezierPath *path = [UIBezierPath bezierPathWithRect:_loginPanel.bounds];

    _loginPanel.layer.masksToBounds = NO;
    _loginPanel.layer.shadowColor = [UIColor blackColor].CGColor;
    _loginPanel.layer.shadowOpacity = 0.7f;
    _loginPanel.layer.shadowOffset = CGSizeMake(-5.0f, -5.0f);
    _loginPanel.layer.shadowRadius = 8.0f;
    _loginPanel.layer.shadowPath = path.CGPath;
    _loginPanel.layer.shouldRasterize = YES;
} 
```

但我没有得到阴影，只是`UIView`我在故事板中定义的白色。

任何帮助将不胜感激。

谢谢，

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:43:48.680

也许你可以改变这一行：

```
UIBezierPath *path = [UIBezierPath bezierPathWithRect:_loginPanel.bounds]; 
```

和 ：

```
CGPathRef path = [UIBezierPath bezierPathWithRect:_loginPanel.bounds].CGPath; 
```

并且当然删除 shadowPath 行中的“.CGPath”。

也许你可以尝试在 viewDidAppear 方法中做这个，看看是不是调整大小的问题。

# r - 外连接data.table R

> ID：13493124
> 
> 赞同：16
> 
> 时间：2012-11-21T12:20:34.277
> 
> 标签：r, data.table

只是想知道是否有一种有效的方法可以对数据表进行外部连接，例如

```
a <- data.table(a=c(1,2,3),b=c(3,4,5))
b <- data.table(a=c(1,2),k=c(1,2))
merge(a,b,by="a",all.x=T) 
```

这工作正常，但它不如内部连接与更大的数据高效，因为以下运行非常快，但上面真的很慢。

```
setkey(a,a)
setkey(b,a)
a[b,] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T13:28:04.987

`b[a,]`是您正在寻找的“外部连接”。

看看`?merge.data.table`更多细节。

# wordpress - 使用 wordpress 与用户共享文件

> ID：13493125
> 
> 赞同：0
> 
> 时间：2012-11-21T12:20:35.900
> 
> 标签：wordpress, file, share

我是 wordpress 的新手，我需要创建一个 wordpress，允许管理员与用户共享信息和文件（word、excel、pdf、图像等）。每个用户都有一个密码，文件只在用户和管理员之间共享（用户之间不共享）。

也许这可以通过针对每个用户的帖子或页面来实现。用户必须登录才能访问页面/帖子，并且应该能够添加内容和文件。这样，文件和信息将仅在该用户和管理员之间共享。

这是正确的方法还是有更好的方法？

谢谢贡萨洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:01:28.040

[WordPress 下载管理器](http://wordpress.org/extend/plugins/download-manager/)可帮助您以更有效的方式管理、跟踪和控制您的下载。您可以设置访问级别，您可以通过复制和粘贴嵌入代码在帖子的任何位置添加/嵌入可下载文件。

欲了解更多信息： http: [//www.wpbeginner.com/plugins/how-manage-track-control-file-downloads-wordpress/](http://www.wpbeginner.com/plugins/how-manage-track-control-file-downloads-wordpress/)

# sql - I want generate XML file in a hierarchical form

> ID：13493127
> 
> 赞同：3
> 
> 时间：2012-11-21T12:20:40.283
> 
> 标签：sql, sql-server, stored-procedures, hierarchy, for-xml-path

I have a table like this (Actually it contains more 6000 records)

```
IdIndustry   |   IndustryCode  |   IndustryName  |  ParentId
---------------------------------
1    |  IND    |   Industry  |   NULL
2    |  PHARM  |   Pharmacy  |   1
3    |  FIN    |   Finance   |   NULL
4    |  CFIN   |   Corporate |   3
5    |  CMRKT  |   Capital M |   4 
```

DDL:

```
CREATE TABLE [dbo].[tblIndustryCodes](
    [IdIndustry] [int] IDENTITY(1,1) NOT NULL,
    [IndustryCode] [nvarchar](5) NULL,
    [IndustryName] [nvarchar](50) NULL,
    [ParentId] [int] NULL,
CONSTRAINT [PK_tblIndustryCodes] PRIMARY KEY CLUSTERED ([IdIndustry] ASC) 
```

Inserts:

```
INSERT INTO [tblIndustryCodes]
          ([IndustryCode]
          ,[IndustryName]
          ,[ParentId])
     VALUES
          ('IND','Industry',NULL),
          ('PHARM','Pharmacy',1),
          ('FIN','Finance',NULL),
          ('CFIN','Corporate Finance',3),
          ('CMRKT','Capital Markets',4) 
```

And i want to generate a XML file like this(Simplified tree like structure)

```
<IND>
      <PHARM>
      </PHARM>
</IND>
<FIN>
      <CFIN>
            <CMRKT>
            </CMRKT>
      </CFIN>
<FIN> 
```

~~I don't want to use recursion as it would downgrade the performance dramatically as this table has more than 60000 records in table.~~

I would be glad if i get the output in same format, since i will be using this output XML to send a request.

~~And more importantly it will be dynamic in nature.~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:12:59.133

尝试这个过程不太确定它的效率，因为我正在创建一个临时表来获得结果

```
create procedure get_path as begin
  DECLARE @cnt INT
  DECLARE @n INT
  DECLARE @tmpTable TABLE(id int, 
                indCode varchar(50), 
                indName varchar(100),
                parentId int,
                path varchar(500))

  insert @tmpTable 
          select [IdIndustry], [IndustryCode], [IndustryName], [ParentId],
          null from tbl

  select @cnt = count(*)  from @tmpTable where parentId is null
  update a set a.path = CONCAT(b.indName,'/',a.indName) from @tmpTable a, @tmpTable b where b.parentid is null and a.parentid = b.id
  select @n = count(*)  from @tmpTable where path is null
  while (@cnt < @n) begin
    update a set a.path = concat(b.path, '/', b.indName, '/', a.indName) from @tmpTable a, @tmpTable b where b.path is not null and a.parentid = b.id
    select @n = count(*) from @tmpTable where path is null
  end
  update @tmpTable set path = indName where parentid is null 
  select * from @tmpTable order by path
end
go 
```

**查询 1**：

```
exec get_path 
```

**结果**：

```
| ID | INDCODE |   INDNAME | PARENTID |                                  PATH |
-------------------------------------------------------------------------------
|  3 |     FIN |   Finance |   (null) |                               Finance |
|  4 |    CFIN | Corporate |        3 |                     Finance/Corporate |
|  5 |   CMRKT | Capital M |        4 | Finance/Corporate/Corporate/Capital M |
|  1 |     IND |  Industry |   (null) |                              Industry |
|  2 |   PHARM |  Pharmacy |        1 |                     Industry/Pharmacy | 
```

希望这可以帮助.....

## **[SQL 小提琴](http://sqlfiddle.com/#!6/30cb6/1)**

# c# - AJAX 期间未处理的异常

> ID：13493135
> 
> 赞同：0
> 
> 时间：2012-11-21T12:21:16.193
> 
> 标签：c#, asp.net, elmah

我正在尝试为 AJAX 期间发生的未处理异常实现某种处理程序，但由于我是新手，我似乎无法掌握它。我在测试设置中所经历的是，发生异常时没有任何内容返回给客户端。此外，ELMAH 没有处理这些异常。

所以这个问题有两个部分：

1.  如何让服务器发回一些有意义的东西，比如错误代码和消息，以便通知客户端。
2.  如何让 ELMAH 记录 AJAX 回调期间发生的异常？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:24:02.410

你能不能围绕你的服务器端代码做一个尝试/捕捉，然后传递一些有意义的东西，以便客户端可以输出有用的错误消息？

我不确定为什么 ELMAH 没有记录你未捕获的异常，如果它发生在服务器端。您确定它会捕获其他错误吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:24:51.270

```
$.ajax({
    type: "post", url: "/SomeController/SomeAction",
    success: function (data, text) {
        //...
    },
    error: function (request, status, error) {
        alert(request.responseText);
    }
}); 
```

或通用处理程序

```
$(function() {
    $.ajaxSetup({
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }
    });
}); 
```

# sql - 基于日期的 SQL Case 语句

> ID：13493136
> 
> 赞同：4
> 
> 时间：2012-11-21T12:21:19.967
> 
> 标签：sql, sql-server-2008, tsql, sql-update, case

我需要创建一个包含 CASE 语句的查询，该语句基本上说

```
CASE if getdate() > datedue by 31 days
    then status = 'Blocked
END 
```

有谁知道如何检查今天的日期是否大于 25/10/2012 的 31 天？

编辑

```
Select co.OrderID, cu.FName + '  ' + cu.SName as 'Name', 
cu.Address1 + ', ' + cu.Address2 + ', ' + cu.Address3 as 'Dispatch Address', 
cu.PostCode, 
ma.MaterialName as 'Item',
mi.Price as 'Item Price',
co.DateOrdered as 'Order Date',
pm.DueDate,
pm.Overdue,

HERE I NEED TO WRITE A CASE STATEMENT TO INSERT INTO A LOCKEDACCOUNT TABLE
so for example CASE WHEN DATEDIFF(dd, GETDATE(), pm.DueDate) >= 31 THEN INSERT INTO LOCKEDACCOUNT (id, status, datelocked, customerid) VALUES (.....)
END

from Customers cu 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:23:06.313

像这样：

```
SELECT 
  CASE 
    WHEN DATEDIFF(dd, GETDATE(), @duedate) >= 1 THEN 'blocked' 
    ELSE 'Not' 
  END AS Status; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/6426)

**请注意：**如果您没有指定`ELSE`子句，则默认为`NULL`.

**更新：**您可以使用如下表达式插入表中`CASE`：

```
INSERT INTO Statuses VALUES
(CASE 
   WHEN DATEDIFF(dd, GETDATE(), CAST('20121025' AS DATE)) >= 31 THEN 'Blocked' 
   ELSE 'Not' 
 END); 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/fc7ac/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:45:04.837

```
select CASE 
   WHEN DATEDIFF(dd,@duedate,getdate()) >= 31 then 'Blocked' else 'NO' end 
```

# ios - ios Twitter API JSON解析

> ID：13493137
> 
> 赞同：3
> 
> 时间：2012-11-21T12:21:21.667
> 
> 标签：ios, json, twitter

我正在尝试解析 Twitter API 接收到的 JSON 字符串以获取用户时间线。我正在使用 Jastor 将 JSON 响应转换为目标 c 对象。一切正常，直到我尝试解析**实体**对象

```
entities = {
        hashtags =();
        media = (
                 {
                "display_url" = "pic.twitter.com/...";
                "expanded_url" = "http://...";
                id = ...;
                "id_str" = ...;
                indices =(
                    5,
                    25
                );
                "media_url" = "http://...";
                "media_url_https" = "https://...";
                sizes ={
                    large ={
                        h = 765;
                        resize = fit;
                        w = 1024;
                    };
                    medium ={
                        h = 448;
                        resize = fit;
                        w = 600;
                    };
                    small ={
                        h = 254;
                        resize = fit;
                        w = 340;
                    };
                    thumb ={
                        h = 150;
                        resize = crop;
                        w = 150;
                    };
                };
                type = photo;
                url = "http://...";
            }
        );
        urls =();
        "user_mentions" = ();
    }; 
```

即使 JSON 不是标准的，Jastor 似乎也解析了所有内容，但由于“（”“）”的存在，这个块。你知道如何让 Jastor 也解析这个块吗？还是我必须改变图书馆？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T13:12:45.257

您的问题输出令人好奇的是它不是 JSON 格式的字符串。它看起来像`NSDictionary`和`NSArray`对象的嵌套组合，这在将 JSON 字符串转换为 Objective-C 对象时很常见。当您使用`NSLog`这种对象时，大括号表示`NSDictionary`对象，括号表示`NSArray`对象。

因此，看起来您正在显示一个典型的、成功解析的 JSON 对象。您可以按如下方式对其进行解密，假设上述输出是通过执行`NSLog`一些`NSDictionary`调用生成的，例如`jsonObject`：

```
NSDictionary *entity  = [jsonObject objectForKey:@"entities"];
NSArray *media        = [entity objectForKey:@"media"];
NSDictionary *media0  = [media objectAtIndex:0];
NSString *display_url = [media0 objectForKey:@"display_url"];
NSArray *sizes        = [media0 objectForKey:@"sizes"];
NSDictionary *size0   = [sizes objectAtIndex:0]; 
```

或者，如果使用现代 Objective C，只需：

```
NSDictionary *entity  = jsonObject[@"entities"];
NSArray *media        = entity[@"media"];
NSDictionary *media0  = media[0];
NSString *display_url = media0[@"display_url"];
NSArray *sizes        = media0[@"sizes"];
NSDictionary *size0   = sizes[0]; 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:43:50.583

为什么不使用 iOS 5.0 NSJSONSerialization 中的新功能，它将 JSON 数据转换为 NSArray 或 NSDictionary 等 Objective C 标准。

```
NSString *stringURL = [NSString stringWithFormat:@"%@?%@", kTwitterApi, kParams];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:stringURL]];
request.HTTPMethod = @"GET";

[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

    if (error) {
        NSLog(@"Error%@", error.localizedDescription);
    }else {
        NSError *err;
        NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:&err];

        NSLog(@"%@", json);
    }

}]; 
```

# linux - Linux 页面缓存状态

> ID：13493142
> 
> 赞同：1
> 
> 时间：2012-11-21T12:21:25.310
> 
> 标签：linux, memory, memory-management, linux-kernel, page-caching

通过使用Linux 内核源代码树中的[页面类型](https://github.com/torvalds/linux/blob/master/tools/vm/page-types.c)工具，我可以在我的操作系统中列出页面缓存状态。如：

> 参考，最新，lru，mappedtodisk
> 
> 引用的，最新的，lru，活动的，私有的

在[源代码](https://github.com/torvalds/linux/blob/master/tools/vm/page-types.c)中有完整的列表：

```
[KPF_LOCKED]    = "L:locked",
[KPF_ERROR]     = "E:error",
[KPF_REFERENCED]= "R:referenced",
[KPF_UPTODATE]  = "U:uptodate",
[KPF_DIRTY]     = "D:dirty",
[KPF_LRU]       = "l:lru",
[KPF_ACTIVE]    = "A:active",
[KPF_SLAB]      = "S:slab",
[KPF_WRITEBACK] = "W:writeback",
[KPF_RECLAIM]   = "I:reclaim",
[KPF_BUDDY]     = "B:buddy",
....... 
```

但我找不到任何关于它们的含义、内核如何使用它们等的信息。我怎样才能找到有关页面缓存类型的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:06:39.003

尝试（在内核 src 树中）

文档[/vm/pagemap.txt](https://github.com/torvalds/linux/blob/master/Documentation/vm/pagemap.txt)

-对页面标志有一些解释..

# tsql - 如果不存在数据，则返回数据 - 用数据填充空值

> ID：13493143
> 
> 赞同：1
> 
> 时间：2012-11-21T12:21:26.163
> 
> 标签：tsql, null, common-table-expression

我创建了一个查询，我希望结果如下所示：

```
Reporting Date    Fund    AssetClass    %
31/10/2012        1       Equity        10
31/10/2012        1       Bond          40
31/10/2012        1       Cash          40
31/10/2012        1       Balanced      10
31/10/2012        1       Other         0 
```

我在上面遇到的问题是 % 为 0 并且显然没有显示，因为没有数据。但是我希望它显示出来。

所以我认为最好的解决方案是创建一个包含所有资产类的临时表，然后从我的工作表中将其右外连接，这样它就可以填充没有数据的行。代码如下：

```
SELECT 
    ReportingDate
,   PortfolioID
,   AC.AssetClass
,   ROW_NUMBER() OVER (PARTITION BY PortfolioID ORDER BY SUM(Percentage) DESC) AS [Rank]
,   CAST(SUM(Percentage) AS DECIMAL(22,1))  AS [Weight]

FROM @Worktable as WT

RIGHT OUTER JOIN @AssetClass AS AC
    ON WT.AssetClass = AC.AssetClass

GROUP BY WT.ReportingDate, WT.PortfolioID, AC.AssetClass

ORDER BY [Weight] DESC 
```

我的问题是，当它返回时，它看起来像这样：

```
Reporting Date    Fund    AssetClass    %
31/10/2012        1       Equity        10
31/10/2012        1       Bond          40
31/10/2012        1       Cash          40
31/10/2012        1       Balanced      10
NULL              NULL    Other         NULL 
```

我如何用这个脚本中的数据填充 NULL？是否有可能有另一种更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:53:06.140

```
SELECT 
    CASE WHEN Reporting IS NULL THEN MAX(Reporting) OVER (PARTITION BY (SELECT 1)) ELSE Reporting END AS Reporting
,   CASE WHEN Fund IS NULL THEN MAX(Fund) OVER (PARTITION BY (SELECT 1)) ELSE Fund END AS Fund
,   PortfolioID
,   AC.AssetClass
,   ROW_NUMBER() OVER (PARTITION BY PortfolioID ORDER BY SUM(Percentage) DESC) AS [Rank]
,   CAST(SUM(ISNULL(Percentage, 0)) AS DECIMAL(22,1))  AS [Weight]
FROM @Worktable as WT
RIGHT OUTER JOIN @AssetClass AS AC
    ON WT.AssetClass = AC.AssetClass
GROUP BY WT.ReportingDate, WT.PortfolioID, AC.AssetClass
ORDER BY [Weight] DESC 
```

# c# - 在 C# 应用程序中调用 opencv c++ 代码

> ID：13493149
> 
> 赞同：6
> 
> 时间：2012-11-21T12:21:45.090
> 
> 标签：c#, c++, opencv

我开发了一个使用 OpenCV 的 c++ 程序。现在我想用 C# 开发一个基于 Windows 窗体的应用程序。由于 C# 只能处理托管代码，因此几乎不可能直接在 C# 应用程序上运行 OpenCV。我已经搜索了使用 OpenCV 创建 C# 应用程序的不同方法，其中一种是 EmguCV，而我更感兴趣的另一种方法是在 C# 应用程序中导入 c++ .dll 文件并以这种方式调用非托管函数。

我首先在 C++ 中创建简单的函数，然后通过导入 dll 在我的 C# 应用程序中`cout`使用`cin`。当我尝试在我的 c++ 应用程序中包含 OpenCV 头文件并且当我编译时出现此错误时，问题就出现了

> 错误 LNK1104：无法打开文件 'tbb_debug.lib'

以前有人这样做过，但我不知道他是如何在 [以 cv::Mat 格式在图片框中显示网络摄像头提要中的C++ 与 C# 接口的](https://stackoverflow.com/questions/12616529/displaying-webcam-feed-in-cvmat-format-in-a-picturebox)

问题是我有一个函数，它接受一个 cv::Mat 变量并对其执行一些图像处理并返回处理后的矩阵。我想在我的 C# 应用程序中使用用 C++ 编写的函数。但问题是当我在 C++ 中包含 OpenCV 库时，我无法创建 dll。

> 所以请不要建议我为 OpenCV 使用 EmguCV 或任何其他 .NET 包装器。

我正在为我的项目使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:33:12.077

我会明确导出将入口点包装在 C++ 标头中的方法，然后使用 P/Invoke 来引用它们：

```
extern "C" __declspec(dllexport) BOOL DoSomething(); 
```

然后在 C# 中使用它们：

```
[DllImport("MyOpenCVWrapper.dll")]
private static extern bool DoSomething(); 
```

我不会尝试引用 OpenCV 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:12:40.553

尽管它可能不是您想要的，但我使用 C++/CLI 完成了该任务，并通过程序集公开了它。这很简单，而且效果很好。 [博客文章在这里](http://www.atalasoft.com/cs/blogs/stevehawley/archive/2009/03/24/face-detection-with-dotimage-and-opencv.aspx)。

# android - 如何在 android Fragment 中设置自定义 ListView？

> ID：13493150
> 
> 赞同：6
> 
> 时间：2012-11-21T12:21:45.507
> 
> 标签：android, android-fragments, android-arrayadapter

我一直在为android平板电脑做申请。在此，我需要显示两个 ListView。一种用于简单列表视图，一种用于自定义列表视图。一旦我单击简单的列表视图行，则必须在另一个自定义列表视图中显示详细信息。为此，我采取了在单个屏幕中显示两个列表视图的片段。对于自定义 ListView，我采用了自定义适配器来绑定自定义数据。但是当我点击简单的列表视图行时，应用程序显示没有响应错误。我的代码会是这样的。因为我的片段包含这样的代码

```
public class listDetails extends Fragment{

private int nAndroids;

public static ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
ListDetailsAdapter adapter;

static final String KEY_Title = "title";//"item";

public listDetails() {

}

  /**
    * Constructor for being created explicitly
    */
   public listDetails(int nAndroids) {
        this.nAndroids = nAndroids;
    }

   /**
     * If we are being created with saved state, restore our state
     */
    @Override
    public void onCreate(Bundle saved) {
        super.onCreate(saved);
        if (null != saved) {
            nAndroids = saved.getInt("nAndroids");
        }
    }

    /**
     * Save the number of Androids to be displayed
     */
    @Override
    public void onSaveInstanceState(Bundle toSave) {
        toSave.putInt("nAndroids", nAndroids);
    }

    /**
     * Make a grid and fill it with n Androids
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle saved) {
        int n;
        Context c = getActivity().getApplicationContext();

        LinearLayout l = new LinearLayout(c);

        String listitems[]=new String[nAndroids];

        HashMap<String, String> map = new HashMap<String, String>();
        map.put(KEY_Title, "Question1");

        map = new HashMap<String, String>();
        map.put(KEY_Title, "Question2");

        map = new HashMap<String, String>();
        map.put(KEY_Title, "Question3");

        map = new HashMap<String, String>();
        map.put(KEY_Title, "Question4");
        menuItems.add(map);

        for (n = 0; n < nAndroids; n++) 
        {

            listitems[n] = "one"+n;
             ListView list = new ListView(c);

             adapter = new ListDetailsAdapter(this, menuItems);
             list.setAdapter(adapter);

        }
        return l;
    } 
```

}

我的自定义适配器代码是这样的

```
public class ListDetailsAdapter extends BaseAdapter{

///private listDetails listactivity;
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;

public ListDetailsAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

public int getCount() {
    // TODO Auto-generated method stub
    return data.size();
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
     View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.customlist, null);

            TextView title = (TextView)vi.findViewById(R.id.txtTitle);
            Button btnone = (Button)vi.findViewById(R.id.btnfirst);
            Button btntwo = (Button)vi.findViewById(R.id.btnsecond);
            Button btnthree = (Button)vi.findViewById(R.id.btnthird);
            Button btnfour = (Button)vi.findViewById(R.id.btnfourth);
            Button btnfive = (Button)vi.findViewById(R.id.btnfifth);

            btnone.setOnClickListener(oneclick);
            btntwo.setOnClickListener(twoclick);
            btnthree.setOnClickListener(thrirdclick); 
            HashMap<String, String> mymap = new HashMap<String, String>();
            mymap = data.get(position);
            title.setText(mymap.get(listDetails.KEY_Title));

    return vi;
}

private View.OnClickListener oneclick = new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Log.e("button clicked", "button one clicked");
    }
}; 
```

}

请指导我上面的代码出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:44:29.700

我被用来在单个屏幕上显示两个列表视图的片段。可能这就是问题所在。一个列表视图的一个片段并在一个活动中显示两个片段。我认为这要好得多。因为我不认为该片段支持加载多布局（列表视图）

# jquery - 如何将术语 slug 作为参数传递给 ajax 函数

> ID：13493151
> 
> 赞同：0
> 
> 时间：2012-11-21T12:21:49.517
> 
> 标签：jquery, parameter-passing, href

这是脚本的原始代码

```
var $mainCat=$('#main_cat').val(); 
```

我用这个代替了它

```
 var $mainCat=$('#<how to pass the slug here>').val();

 echo '<ul>';
  foreach ($termchildren as $child) {
  $term = get_term_by( 'id', $child, $taxonomyName );
  echo '<li><a href="#" id=' .$term->slug. '>' . $term->name . ' </a></li>';
?>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" ></script>
<script type="text/javascript">
$(function()
{
  $('a#<?php echo $term->slug; ?>').click(function()
  {
    $('#pop-up1').show();
    $('#pop-up').show();
    <?php echo $term->slug; ?>
        var $mainCat=$('#<how to pass the slug here>').val(); 
```

现在我需要传递“a href”值，即。term->slug 到变量 $mainCat。我该怎么做，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:25:23.490

看来您想在单击事件回调函数中执行此操作，只需使用以下命令：

```
var $mainCat=$(this).val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:25:50.430

```
var idCat = "<?php echo $term->slug; ?>"
var $mainCat = $('#' + idCat).val(); 
```

# javascript - 在 BlackBerry 中单击按钮时获取 Web 响应

> ID：13493152
> 
> 赞同：1
> 
> 时间：2012-11-21T12:21:51.183
> 
> 标签：javascript, blackberry, browserfield

我已经在 BB 中加载了一个网页，如下所示

```
//RegBrowserFieldConfig extends BrowserFieldConfig
RegBrowserFieldConfig regBrowserFieldConfig = new RegBrowserFieldConfig();

//RegBrowserFieldListener extends BrowserFieldListener
RegBrowserFieldListener regBrowserFieldListener = new RegBrowserFieldListener();

BrowserField registrationBrowserField = new BrowserField(regBrowserFieldConfig);
registrationBrowserField.addListener(regBrowserFieldListener);
add(registrationBrowserField);

registrationBrowserField.requestContent("http://myurl.com/"); 
```

该网页加载正常。该网页中有一个***提交***`onsubmit`按钮，它调用HTML 中的表单元素。那就是调用一个 JavaScript 函数。在该函数中，还有一些其他 URL 将根据要求触发。

我需要的是获得这些 URL 调用的响应。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:56:13.660

我试过这个方法。。

```
BrowserFieldListener list = new BrowserFieldListener() {

        public void documentLoaded(BrowserField browserField,
                Document document) throws Exception {               
            String url = document.getBaseURI(); //u can get the current url here... u can use ur logic to get the url after clicking the submit button  

                Serverconnection(url);//from this methode u can get the response
        }
    };

    browserField.addListener(list); 
```

服务器连接..

```
public String Serverconnection(String url) {

    String line = "";

    // if (DeviceInfo.isSimulator()) {
    // url = url + ";deviceSide=true";
    // } else {
    // url = url + ";deviceSide=true";
    // }
    url = url + getConnectionString();
    try {
        HttpConnection s = (HttpConnection) Connector.open(url);
        s.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded");
        s.setRequestProperty(
                "Accept",
                "text/html,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5");
        s.setRequestProperty(HttpProtocolConstants.HEADER_ACCEPT_CHARSET,
                "UTF-8");
        s.setRequestMethod(HttpConnection.GET);
        InputStream input = s.openInputStream();
        byte[] data = new byte[10240];
        int len = 0;
        StringBuffer raw = new StringBuffer();

        while (-1 != (len = input.read(data))) {
            raw.append(new String(data, 0, len));
        }

        line = raw.toString();

        input.close();
        s.close();
    } catch (Exception e) {
        System.out.println("response--- excep" + line + e.getMessage());
    }
    return line;

} 
```

编辑..

```
private static String getConnectionString() {
    String connectionString = "";
    if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {
        connectionString = "?;interface=wifi";
    }

    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {
        connectionString = "?;&deviceside=false";
    } else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {
        String carrierUid = getCarrierBIBSUid();
        if (carrierUid == null) {
            connectionString = "?;deviceside=true";
        } else {
            connectionString = "?;deviceside=false?;connectionUID="
                    + carrierUid + "?;ConnectionType=mds-public";
        }
    } else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {
    }
    return connectionString;
}

private static String getCarrierBIBSUid() {
    ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;

    for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
        if (records[currentRecord].getCid().toLowerCase().equals("ippp")) {
            if (records[currentRecord].getName().toLowerCase()
                    .indexOf("bibs") >= 0) {
                return records[currentRecord].getUid();
            }
        }
    }

    return null;
} 
```

# ruby - 带有计数的 mongoDB geoNear 命令

> ID：13493157
> 
> 赞同：1
> 
> 时间：2012-11-21T12:22:20.403
> 
> 标签：ruby, ruby-on-rails-3, mongodb, mongoid, geospatial

我正在使用带有 mongoid 的 geoNear commang 来检索按距离排序的文档集合。我需要集合中每个文档的距离，这就是我不得不求助于 geoNear 命令的原因。给定以下命令：

```
category_ids = ["list", "of", "ids"]
cmd = Hash.new
cmd[:geoNear] = :poi
cmd[:near] = [params[:location][:x], params[:location][:y]]
cmd[:query] = {
  "$or" => [
    {primary_category_id: {"$in" => category_ids}},
    {category_ids: {"$in" => category_ids}}
  ]
}
cmd[:spherical] = true
cmd[:num] = num
res = Poi.collection.database.command cmd 
```

我的问题是我需要集合中的结果总数。当然，我可以只运行另一个查询，只计算满足命令查询部分的项目数，但是这将非常低效并且也不是很可扩展，因为我在命令中所做的每一个更改都必须反映在计数中询问。仅仅添加一个 maxDistance 会让我陷入一大堆麻烦。

另一种选择是手动查找并计算距离，但我想再次避免这种情况。

所以我的问题是有一种巧妙的方法可以获取命令返回的文档数量（减去`num`），而无需运行单独的查询或手动计算距离并使用 find。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-13T05:45:35.263

在 geoNear 使用 facet 后，您可以使用 facet 来投影文档，而在其他情况下，您可以使用 group by _id null 并使用 group 中的计数来计算文档总数。

# javascript - 在js中模拟shuffle

> ID：13493159
> 
> 赞同：0
> 
> 时间：2012-11-21T12:22:29.473
> 
> 标签：javascript

全部，

我有三张可以由用户洗牌的牌，悬停时，目标牌弹出到顶部，顶部的最后一张牌应该位于第二个位置。虽然使用下面的代码，我可以在一个方向（从左到右）产生这种效果，但我正在努力想出逻辑和代码来让效果在两个方向上都起作用，而不必在 js 中编写多个场景（这不会听起来像非常好的逻辑）。

希望[demo](http://jsbin.com/oqocoy/3/edit)能做出更好的解释。

代码：

```
$(".cBBTemplates").on (
{
    hover: function (e)
    {
        var aBBTemplates = document.getElementsByClassName ("cBBTemplates");
        var i = 2;
        while (i < aBBTemplates.length && i >= 0)
        {
            var eCurVar = aBBTemplates[i];
            if (eCurVar === e.target)
            {
                eCurVar.style.zIndex = 3;
            }   else if (eCurVar.style.zIndex === 3)    {
                console.log (eCurVar);
                eCurVar.style.zIndex = 3-1;
            }   else
            {
                eCurVar.style.zIndex = i;
            }
            i--;
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:38:10.380

试试这个：

```
$(function(){
    var current = 2;
   $(".cBBTemplates").on (
{
    hover: function ()
    {
      var target = this,
      newCurrent, templates = $(".cBBTemplates");

      templates.each(
        function(idx){
           if(this === target){
             newCurrent = idx;
           }
       });

  if(newCurrent === current){return;}

      templates.each(function(index){
          var zIndex = 0;
        if(this === target) {
          zIndex = 2;
        }
        else if (index == current) {
          zIndex = 1; 
        }

        $(this).css('zIndex', zIndex);

      });

      current = newCurrent;
    }
}); 
```

});

# css - CSS：浮动和定位

> ID：13493176
> 
> 赞同：0
> 
> 时间：2012-11-21T12:23:03.487
> 
> 标签：css, css-float, positioning

我再次陷入了CSS定位。我想创建一个页面，在中间显示一个，周围有 10 个。当然，它在每个分辨率上看起来都应该相同（不包括手机）。

但是当我改变屏幕尺寸时，该网站不断改变它的外观。

*   HTML

    ```
    <div class="wrapper" id="wrapper">

        <div class="element" id="element-1">Lorem1</div>
        <div class="element" id="element-2">Ipsum2</div>
        <div class="element" id="element-3">Lorem3</div>
        <div class="element" id="element-4">Ipsum4</div>

        <div class="element" id="element-5">Lorem5</div>
        <span class="break"></span>

        <div class="background" id="background"><span>Neologizmo</span></div>

        <div class="element" id="element-8">Ipsum8</div>

        <div class="element" id="element-9">Lorem9</div>
        <span class="break"></span>
        <div class="element" id="element-10">M10</div>
        <div class="element" id="element-11">M11</div>
        <div class="element" id="element-12">12</div>

    </div> 
    ```

*   CSS

[http://nopaste.info/f6d200c414.html](http://nopaste.info/f6d200c414.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:38:06.993

这是如何运作的？你说你不希望布局随着屏幕大小的变化而改变，所以我让它使用固定宽度并放在包装器内，这样就不会发生。

[演示](http://jsfiddle.net/9Pv5E/)

```
#wrapper {
    width: 450px;
    height: auto;
    padding: 10px;
}

div {
    width: 100px;
    height: 100px;
    border: 1px solid #000;
    float: left;
    margin: 5px;
}

#background {
    width: 212px;
    padding: 0;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:37:34.987

Oups，已经接受了答案：$

无论如何，因为我正在研究它，所以这是一个通用的解决方案。这个想法是你总是`numberOfsquares/2 -1`在顶部和底部有正方形，并且总是在左边有一个正方形，在右边有一个正方形。

这是一个小提琴：http: [//jsfiddle.net/PyU87/](http://jsfiddle.net/PyU87/)

它将根据取决于浏览器大小的包装器大小显示。所以这也适用于智能手机。

# node.js - MongoDB查询结果中的自定义字段

> ID：13493179
> 
> 赞同：0
> 
> 时间：2012-11-21T12:23:19.997
> 
> 标签：node.js, mongodb, mongoose

在习惯了 SQL 之后，我遇到了 mongoDB 的这个问题。首先，我使用的是猫鼬。

现在，问题。我有一个名为`User`.

```
var UserSchema = new Schema ({
    id : ObjectId,
    name : {type : String, trim : true, required : true},
    email: {type:String, trim:true, required: true, index: { unique: true }},
    password: {type:String, required: true, set: passwordToMD5},
    age: {type:Number, min: 18, required: true, default: 18},
    gender: {type: Number, default:0, required: true},

    height: {type: Number, default:180, min: 140, max: 220},
    _eye_color: {type: ObjectId, default: null},
    location: {
            lon: {type: Number, default: 0},
            lat: {type: Number, default: 0}
    },
    status: {type:Number, required: true, default:0}
    },{
        toObject: { virtuals: true },
        toJSON: { virtuals: true },
        collection:"user"}); 
```

现在我需要从这个集合中选择所有用户并按特殊属性（比如“排名”）对它们进行排序。这个排名是根据他们与某个点的距离、年龄与给定年龄的比较等，用一定的逻辑计算出来的……

所以现在我想知道如何选择这个等级然后在排序中使用它？我曾尝试使用 virtuals，它们可以方便地计算附加信息，但不幸的是，无法`find()`按虚拟字段对结果进行排序。当然我可以在虚拟中计算这个排名，然后选择所有记录，然后在回调中做一些javascript。但在这种情况下，当我选择所有用户然后排序然后限制时，javascript 部分可能需要太长时间......我正在考虑使用**mapreduce**，但我不确定它会做我想要的。如果我的任务可以在**mongoDB/mongoose**中完成，有人可以给我一个提示吗？

**编辑 1**

我也尝试过使用聚合框架，起初它似乎是具有该`$project`能力的最佳解决方案。但是后来，当我需要进行排名计算时，我发现聚合不支持很多数学函数，如`sin`,`cos`和`sqrt`。而且在投影中也不可能使用预定义的常用 javascript 函数。我的意思是，该函数被调用，但我无法将当前记录字段传递给它。

```
{$project: {
  distance_from_user: mUtils.getDistance(point, this.location)
} 
```

在函数内部，第二个属性是“未定义的”。

所以我想用聚合框架来做我的排名计算是不可能的。

**编辑 2** 好的，我知道每个人都告诉我不要使用 mapreduce，因为它不适合实时查询，但由于我不能使用聚合，我想我会尝试 mapreduce。所以假设我有这张地图减少。

```
function map() {
            emit(1, // Or put a GROUP BY key here
                {name: this.name, // the field you want stats for
                    age: this.age,
                    lat: this.location.lat,
                    lon: this.location.lon,
                    distance:0,
                    rank:0

                });
        }

        function reduce(key, values) {

            return val;
        }

        function finalize(key, value){

            return value;
        }

        var command = {'mapreduce': "user", 'map': map.toString(), 'reduce': reduce.toString(), query:{$and: [{gender: user_params.gender}, {_id: {$ne: current_user_id}}]}, 'out': {inline:1}};

        mongoose.connection.db.executeDbCommand(command, function(error, result){
            if(error) {
                log(error);
                return;
            }
            log(result);
            return;
        }); 
```

我应该在 reduce（或者可能更改 map）中写什么来计算每个用户的排名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:49:14.037

唯一真正的解决方案是计算每个文档的排名并将其存储在文档中。由于只要文档中的值保持不变，该值就会保持不变，您可以在更新影响它的字段时简单地计算该值。

Map/reduce 当然不是一个好的解决方案，任何其他类型的聚合也不是。如果您使用 MongoDB，则预先计算您的排名并将其与文档一起存储是唯一可以扩展的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:12:54.763

您知道这样的事情需要的计算量 - 如果您每次用户登录时都这样做，那么当很多人会在更短的时间内登录时，您会遇到有趣的负载峰值 - 以及您的页面（界面）将受到资源的严重限制（这不好）。
我会向您推荐一些不同的东西 - 保持每个登录用户的排名并定期更新它们：保持“短会话”和“长会话”（长会话 - 您在网络浏览器中使用的会话和短 - “在线，当前使用该站点”）并定期为“短期活跃”用户生成排名，而很少为长时间会话中的登录用户生成排名。每五分钟一次。
在这种情况下，您可以使用 mapredurce - 您的 map 函数应该只发出计算给定用户排名所需的数据（如年龄、纬度、经度，无论您需要什么）和测试用户的结果（排名）（发出它是空的）。对于 reduce 功能，您需要查看使用 mapreduce 进行排序（这在很大程度上取决于您创建排名的方式） - 您还需要计算其他用户的排名（或某种子值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T14:29:51.800

[它看起来像是MongoDB + Hadoop](http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start)的一个很好的用例。

本[演示文稿](http://www.slideshare.net/spf13/mongodb-and-hadoop)展示了这种组合的一些可能性。

# php - 如何获取字符串的一部分？

> ID：13493180
> 
> 赞同：0
> 
> 时间：2012-11-21T12:23:21.250
> 
> 标签：php

我有一个字符串：

```
$s = '<div data-x="0" data-y="0">Some text asdasdas</div>
<div data-x="0" data-y="-1000">Some text...</div>
<div data-x="0" data-y="-2000">Some text foobar</div>
<div data-x="500" data-y="-3000">Some t..</div>'; 
```

字符串可以不同。Divs 可以包括类等。

如何从每个 Div 的**data-x**和**data-y中获取价值？**像：

```
$x1 = 0; $y1 = 0;
$x2 = 0; $y2 = -1000;
$x3 = 0; $y3 = -2000;
$x4 = 500; $y4 = -4000; 
```

我想将字符串分解成一个数组，但是我不知道该怎么做..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:27:06.920

此功能可能有用：

`int strpos ( string $haystack , string $needle )`
*在 haystack 字符串中查找第一次出现 needle 的数字位置。*

然后，您可以使用[str_split()](http://www.php.net/manual/en/function.str-split.php)将字符串转换为数组，然后从指定位置获取所需的值。

您可以使用 while 循环来获取从返回的位置`"`到下一次开始之间的所有值。`"``strpos()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:35:59.533

为此使用适当的 HTML 解析器：

```
$dom = new DOMDocument;
$dom->loadHTML( $s );
$xpath = new DOMXPath( $dom );
// xpath query: find all div nodes having a data-x and data-y attribute
$nodes = $xpath->query( '//div[@data-x and @data-y]' );
$result = array();
foreach( $nodes as $node )
{
    $result[] = array(
        'x' => (int) $node->getAttribute( 'data-x' ),
        'y' => (int) $node->getAttribute( 'data-y' ),
    );
} 
```

如果你真的想要`$x<n>`和`$y<n>`样式变量（其中`<n>`代表一个数字）作为结果（而不是结果数组），那么你可以用类似的`foreach`东西替换循环：

```
for( $n = 1; $n <= $nodes->length; $n++ )
{
    ${'x' . $n} = (int) $node->getAttribute( 'data-x' );
    ${'y' . $n} = (int) $node->getAttribute( 'data-y' );
} 
```

不过，我仍然建议将它们收集在一个数组中；使之后的处理更容易。

# android - 无法显示在图库视图中选择的图像

> ID：13493181
> 
> 赞同：0
> 
> 时间：2012-11-21T12:23:23.833
> 
> 标签：android, view, gallery

我在显示画廊视图中选择的图像预览时遇到问题。我有一个来自 sd 卡的图像库，单击图像时，其预览应显示在库视图下方（不是通过意图进行的单独活动）。我可以显示带有图像的画廊，但单击图像时没有任何反应。

公共类 NewActivity 扩展 Activity {

```
GalleryBaseAdapter myGalleryBaseAdapter;
Gallery myPhotoGallery;
int[] mFiles = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);      

    myPhotoGallery = (Gallery)findViewById(R.id.photogallery);

    myGalleryBaseAdapter = new GalleryBaseAdapter(this);

    String ExternalStorageDirectoryPath = Environment.getExternalStorageDirectory().getAbsolutePath();

    String path = ExternalStorageDirectoryPath;
    String  files;
    File  folder = new File (path);
    final File[] listOfFiles = folder.listFiles(); 

    for (int i = 0; i < listOfFiles.length; i++) 
    {       
         if (listOfFiles[i].isFile()) 
         {
             files = listOfFiles[i].getName();
             System .out.println(files);
         }
    }

    for (File file : listOfFiles) {
        myGalleryBaseAdapter.add(file.getPath());
    }        

    myPhotoGallery.setAdapter(myGalleryBaseAdapter);       

    myPhotoGallery.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView parent, View v, int position, long id) {

            mFiles = new int[listOfFiles.length];       

            ImageView imageview = (ImageView)findViewById(R.id.imageView1);     
            Bitmap bitmapImage = BitmapFactory.decodeFile("/sdcard/" + mFiles[position]);
            imageview.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageview.setImageBitmap(bitmapImage); 

        }                   
    });
}

public class GalleryBaseAdapter extends BaseAdapter {

    ArrayList<String> GalleryFileList;
    Context context;

    GalleryBaseAdapter(Context cont){
        context = cont;
        GalleryFileList = new ArrayList<String>();    
    }

    @Override
    public int getCount() {
        return GalleryFileList.size();
    }

    @Override
    public Object getItem(int position) {
        return GalleryFileList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Bitmap bm = BitmapFactory.decodeFile(GalleryFileList.get(position));

        LinearLayout layout = new LinearLayout(context);
        layout.setLayoutParams(new Gallery.LayoutParams(150, 150));
        layout.setGravity(Gravity.CENTER);

        ImageView imageView = new ImageView(context);
        imageView.setLayoutParams(new Gallery.LayoutParams(200, 200));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setImageBitmap(bm);

        layout.addView(imageView);
        return layout;
    }

    public void add(String newitem){
        GalleryFileList.add(newitem);
    }

} 
```

}

谁能告诉我我的代码中的错误是什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:09:35.427

等等，但是.... onItemClick 中的 mFiles 变量是一个 int 空数组！？！您正在尝试解码一个路径，该路径是“/sdcard”和 mFiles'row 之间的连接，但是......您在哪里填充该数组？我认为您必须指定文件路径，例如“listOfFiles[position].getPath()”

# html - 嵌入式网络服务器 HTML5 移动应用程序方法

> ID：13493183
> 
> 赞同：2
> 
> 时间：2012-11-21T12:23:25.070
> 
> 标签：html, web-applications, embedded, websocket, json-rpc

我计划实现以下项目，如果有人能验证我的方法，我将不胜感激！

我想在智能手机（跨平台）和运行网络服务器的嵌入式微控制器之间建立完全双向的无线实时通信。

网络服务器应实时提供所连接硬件的数据，例如温度。智能手机应该在屏幕上呈现这些，您应该能够使用智能手机配置硬件，例如 LED 颜色，并将配置保存到嵌入式网络服务器。

我的第一个猜测是使用 HTML5 websockets，但它们并非在所有平台上都可用，所以我受到了使用 JSON-RPC 的 XBMC 的启发。

想象一下带有蓝牙的汽车立体声系统连接到带有网络服务器和 wifi 加密狗的 µC。

我的计划是在网络服务器上实现一个 webapp，它可以满足上述目的。但棘手的部分是让用户建立与立体声系统的蓝牙连接，因为我查找了类似的问题，这些问题说您无法使用 HTML5 在智能手机上访问蓝牙之类的东西。

长话短说，这是当前的想法：硬件 -> µC -> 网络服务器 -> HTML5 Webapp-> WIFI -> 通过 JSON RCP 的智能手机通信。

如果有人可以就所述想法和计划实施发表声明，我将非常感激，因为我以前从未这样做过！

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-28T19:45:57.960

我们在 muzzley 开发了一个框架来简化这个过程。我们为您的浏览器应用程序提供了一种与智能手机通信的方式。在智能手机的一侧，您有已经完成的小部件（游戏板、绘图板、开关、滑动、其他），或者您可以构建自己的基于 html 的小部件。

（免责声明：我为这个项目工作）

大部分工作已经为您想做的事情完成了 :)

在这里快速开始：

*   [http://www.muzzley.com/documentation/quick-start.html](http://www.muzzley.com/documentation/quick-start.html)

您可以从 github 中提取几个示例：

*   [https://github.com/muzzley/muzzley-demos/](https://github.com/muzzley/muzzley-demos/)

浏览器库：

*   [http://www.muzzley.com/documentation/libraries/javascript.html](http://www.muzzley.com/documentation/libraries/javascript.html)

我希望它有所帮助。

最好的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:28:23.543

我认为你的第一直觉可能是对的。你看过[socket.io](http://socket.io/)的[node](http://node.org)吗？它本质上是一个 shiv，它确保您可以在几乎任何设备和浏览器组合中使用 websocket 功能（请参阅[此处](http://socket.io/#browser-support)支持的传输机制和浏览器列表）。

它应该允许您完全避免使用蓝牙。

# javascript - 如何从 Raphael 对象中删除空的 HREF 属性？

> ID：13493185
> 
> 赞同：0
> 
> 时间：2012-11-21T12:23:25.563
> 
> 标签：javascript, jquery, raphael

我想取消设置（删除）文本对象的 href 属性。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:34:35.723

尝试

```
var paper = Raphael( 0, 0, 100, 100 );
var rect = paper.rect( 0, 0, 100, 100 );

// just set it to nothing
rect.attr({ href: "" }); 
```

# php - 加两次得到总微秒

> ID：13493186
> 
> 赞同：0
> 
> 时间：2012-11-21T12:23:27.640
> 
> 标签：php

我想添加两个日期并想要总微秒。请告诉我另一种方法如何添加它。我正在添加时间戳并显示总数。请给我一些建议。我不知道，我在谷歌上找到但没有得到任何东西。我需要微秒。

```
<?php
$st="2012-11-05 01:23:03";
$et="2012-11-07 05:23:04";

$totalMicroscond= $st+$et;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:25:16.120

```
$total = strtotime($st) + strtotime($et); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:42:21.213

我看不出添加这两个日期的合乎逻辑的原因，所以我假设您想要计算日期之间的差异。

```
<?php
$st="2012-11-05 01:23:03";
$et="2012-11-07 05:23:04";

$totalMicroscond= (strtotime($et)- strtotime($st))*1000;
echo $totalMicroscond;

?> 
```

# php - php/jquery：发布表单数据

> ID：13493189
> 
> 赞同：0
> 
> 时间：2012-11-21T12:23:29.713
> 
> 标签：php, jquery, forms, formatting

我编写了一个网格小部件来编辑数据库中的数据，我正在寻找一种更方便的方式将数据发送到我的保存脚本。

该表单包含文本框和以下数据库结构：

```
recordID field         value      field           value
----------------------------------------------------------
1        first_name    andy        last_name      smith
2        first_name    tom         last_name      jones
3        first_name    john        last_name      connor 
```

目前我正在将recordID添加到字段名，以这种方式发送我：

```
first_name/1=andy&last_name/1=smith&first_name/2=tom..... 
```

问题是在服务器脚本上，我需要解析记录 ID 以正确保存。有没有更方便的方法可以用它的recordID包装每条记录？

```
such as: record1 = firstname:andy, last_name:smith | record2 = ... ? 
```

我正在通过 jQuery 构建帖子字符串。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:04:08.057

尝试这样命名您的字段：

```
records[1][first_name]=andy&records[1][last_name]=smith&records[2][first_name]=tom..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:46:27.040

将您的数据形成一个数组（本例中为 arrayOfData），然后您可以使用 jQuery ajax 调用将其作为字符串发送到 php（本例中为 phppage.php）。像下面这样的东西会起作用。要使用此功能，您需要从[此处](http://www.json.org/js.html)获取JSON.js。`stringify`

```
$.post("phppage.php",{
    fieldName:JSON.stringify(arrayOfData)
},function(return){
   //whatever
}); 
```

这将需要在 php 中解析

```
$incArray = json_decode(fieldName, true); 
```

只是一个例子，并不是所有的工作都在这里为你完成。

# php - 在php中通过xml获取图片url

> ID：13493194
> 
> 赞同：0
> 
> 时间：2012-11-21T12:23:45.500
> 
> 标签：php, xml, simplexml

**php代码：**

```
 <?php 

        $url = 'https://www.rudolphs-christmasshop.com.au/api/v2/products/'; 
        $username ='xyz'; $password ='ca25fe6947564b9479sdfsaffsaffasfasfsaffdasfe5866b4'; 
        $ch = curl_init(); 
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
        curl_setopt($ch, CURLOPT_URL, $url); 
        curl_setopt($ch, CURLOPT_USERPWD,$username . ':' . $password); 
        $result = curl_exec($ch); curl_close($ch); 
        $xml = simplexml_load_string($result); 

    ?> 
```

输出

```
SimpleXMLElement Object ( 
    [product] => Array ( 
        [0] => SimpleXMLElement Object ( 
            [id] => 29 
            [name] => SimpleXMLElement Object ( ) 
            [type] => physical 
            [sku] => 22254 
            [description] => SimpleXMLElement Object ( ) 
            [search_keywords] => SimpleXMLElement Object ( ) 
            [availability_description] => SimpleXMLElement Object ( ) 
            [price] => 22.9500 
            [inventory_warning_level] => 5 
            [warranty] => SimpleXMLElement Object ( ) 
            [weight] => 0.2500 
            [width] => 13.0000 
            [height] => 11.0000 
            [depth] => 8.0000 
            [view_count] => 125 
            [page_title] => Aussie Koala and Baby Christmas Ornament - Australiana 
            [meta_keywords] => koala bear decoration, koala christmas ornament, australian decorations, aussie christmas, christmas decoration 
            [meta_description] => SimpleXMLElement Object ( ) 
            [layout_file] => product.html 
            [is_price_hidden] => false 
            [price_hidden_label] => SimpleXMLElement Object ( ) 
            [categories] => SimpleXMLElement Object ( 
                [value] => 30
            ) 
            [downloads] => SimpleXMLElement Object ( 
                [link] => /products/29/downloads ) 
                [images] => SimpleXMLElement Object ( 
                    [link] => /products/29/images 
                )
            )
        )
    )
) 
```

如何获取图像 url 并在浏览器上显示图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:32:27.323

[可能是错的，但如果我看这里](http://www.php.net/manual/en/simplexml.examples-basic.php)，我想是这样的

`echo $xml->product[0]->downloads->images->link;`

但是，如果您向我们展示您的 XML，我们将更有能力为您提供帮助。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:33:53.160

我不能在这里测试它。但是您可以通过以下方式访问树：

如果您有更多产品：

```
<?php
foreach($xml->product as $pout ) {
    echo $pout->downloads->images->link;
}
?> 
```

如果您只想要一种产品，如下所示：

```
$xml->product[0]->downloads->images->link; 
```

# jquery - Jquery 验证器 - 仅验证父元素可见的元素

> ID：13493195
> 
> 赞同：1
> 
> 时间：2012-11-21T12:23:46.363
> 
> 标签：jquery, validation, parent, hidden

我正在使用 jquery 验证来进行必填字段验证。

```
$("#myform").validate(); 
```

如何从验证中忽略隐藏父母的所需元素？

例如。

```
 <div id="general" style="display: none;">
    <input type="text" class="required" minlength="4"  name="project_name" id="project_name" tabindex="1" maxlength="255" value="project_name" />
    <input type="text" class="required" minlength="4"  name="project_managers" id="project_managers" tabindex="2" maxlength="255" value="project_managers" />
</div>
<div id="folders">
    <input type="text" class="required" minlength="4"  name="folder_name" id="project_name" tabindex="3" maxlength="255" value="project_name" />
    <input type="text" class="required" minlength="4"  name="folder_managers" id="project_managers" tabindex="4" maxlength="255" value="project_managers" />
</div> 
```

在这种情况下，我想从验证中忽略隐藏 div - "general" 中的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:37:18.737

```
$("#myform").validate({
    ignore: ":hidden",
    rules: { ... }
}); 
```

但从 1.9.0 版本开始，这是默认设置，不必声明。
请参阅[http://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)（选择“选项”并向下滚动到“忽略”）

# android - 我们如何在 Image View 上叠加布局

> ID：13493196
> 
> 赞同：0
> 
> 时间：2012-11-21T12:23:47.043
> 
> 标签：android, android-imageview

我们如何根据图像的 x 和 y 坐标在 ImageView 中的图像上覆盖带有 TextViews 和 Buttons 的布局

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:28:04.353

始终是 android 和布局的好资源：http: [//www.learn-android.com/2010/01/05/android-layout-tutorial/](http://www.learn-android.com/2010/01/05/android-layout-tutorial/)。相应的`layout_x`和`layout_y`也可以以编程方式设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:28:14.927

使用 FrameLayout 作为主容器，并使用边距将所有元素放入其中：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/image" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="30dp"
        android:layout_marginTop="60dp"
        android:text="A text" 
        />

</FrameLayout> 
```

# entity-framework - OnModelCreating - 强制新创建

> ID：13493199
> 
> 赞同：7
> 
> 时间：2012-11-21T12:23:54.733
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

在某些情况下，在应用程序运行期间，我需要打开身份插入：

```
modelBuilder.Entity<Activity>().Property(p => p.Id).HasDatabaseGeneratedOption(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.None); 
```

但是，由于 OnModelCreating 只执行一次，那么最好的方法是什么？是否可以重新创建模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:56:09.557

OnModelCreating 总是只会被调用一次。如果您需要重新创建模型，则必须手动创建`DbModelBuilder`.

```
var builder = new DbModelBuilder(DbModelBuilderVersion.Latest);
// setup whole model
DbModel model = builder.Build(connection);
DbCompiledModel compiledModel = model.Compile();
// cache compiledModel for future usage - compilation is very expensive

var context = new DbContext(compiledModel); 
```

你应该尽量避免这种情况。身份插入不适用于 EF，因此您很可能必须直接使用 SQL 插入数据，而无需更改映射。

# jquery-ui - 在 Jquery UI 1.9 选项卡中替换 'url' 方法

> ID：13493201
> 
> 赞同：5
> 
> 时间：2012-11-21T12:23:56.410
> 
> 标签：jquery-ui, jquery, jquery-ui-tabs

我正在开发一个 Web 应用程序，并且使用 JQuery UI 选项卡取得了很大进展，特别是动态更新绑定到每个选项卡的 ajax 请求的目标 url 的“url”方法。我在这里创建了一个简化的示例：

2 个选项卡（功能 1 和功能 2）中的每一个都根据传递给测试的参数显示一些测试的结果。测试始终保持不变，但我通过操作绑定到选项卡的 url 来更改函数中使用的变量。更新在延迟加载选项卡上调用的 url 的 'url' 方法允许我这样做，但它现在已被弃用，并且不会很快得到支持。因此，我一直在寻找一种使用 JQuery UI 1.9 中的“beforeLoad”事件来执行此操作的方法。

建议是可以操纵 ui.ajaxSettings 来设置数据参数，但存在一个错误（[http://bugs.jqueryui.com/ticket/8673](http://bugs.jqueryui.com/ticket/8673)），看来这不会得到修复。建议的解决方法是改为操作 ui.ajaxSettings.url。

我的工作示例如下，但我不确定这是否是实现我所追求的最干净/最合适的方法，任何建议都将受到欢迎。我很难找到如何做到这一点的例子，所以希望它能帮助处于类似情况的其他人。

```
<title> Jquery Tabs AJAX Test</title>

<script type="text/javascript" src="js/jquery-1.8.2.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.9.1.custom.js"></script>
<link rel="stylesheet" type="text/css" href="css/smoothness/jquery-ui-1.9.1.custom.css">

</head>
<body >

<script type=text/javascript>
    $(document).ready(function() {

        $( '#tabs' ).tabs({  }); 

         $('button.set_variable').click(function() { 
             var variable = $(this).val(); 
             $( '#tabs' ).tabs({ 
                 beforeLoad: function( event, ui ) { 
                     ui.ajaxSettings.url += "&variable=" + variable ; 
                     } 
                 }); 
             var selected_tab = $('#tabs').tabs('option', 'selected'); 
             $( '#tabs' ).tabs("load", selected_tab); 
          }); 
     })
</script>

    <button class="set_variable" value="1">Variable = 1</button> 
    <button class="set_variable" value="2">Variable = 2</button> 
    <button class="set_variable" value="3">Variable = 3</button> 

    <div id="tabs" > 
    <ul> 
         <li><a href="ajax.php?func=ajax-func1">Function 1 </a></li> 
         <li><a href="ajax.php?func=ajax-func2">Function 2 </a></li> 
    </ul> 
    </div> 
</body></html> 
```

注意这里的 ajax.php 文件只是回显了传递给它的内容。

```
<?php
    extract($_GET);
    var_dump($_GET);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:08:04.977

你也可以这样做：

```
var variable = '';
$( '#tabs' ).tabs({  beforeLoad: function( event, ui ) { 
    if(variable != '')
         ui.ajaxSettings.url += "&variable=" + variable ; 
}}); 

$('button.set_variable').click(function() { 
     variable = $(this).val(); 
}); 
```

[http://jsfiddle.net/DNWzY/1/](http://jsfiddle.net/DNWzY/1/)

# leiningen - 将最新版本的谷歌闭包与 clojurescript 一起使用？

> ID：13493204
> 
> 赞同：4
> 
> 时间：2012-11-21T12:24:08.933
> 
> 标签：leiningen, google-closure, clojurescript

我如何让 clojurescript 和 lein-cljsbuild 使用最新版本的 google 闭包而不是去年的版本？我想使用 websockets 抽象层等新功能。

我尝试制作一个最新副本的 jar 并使用 lein-localrepo 安装它，但它似乎没有任何影响。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T10:04:17.437

您可以使用不同版本的 Google Closure 编译器，只需在 project.clj 中从 Clojurescript 中排除它的依赖项并添加另一个版本。[这是lein cljs-build 附带的示例项目](https://github.com/emezeske/lein-cljsbuild/blob/0.3.4/example-projects/simple/project.clj)的替代版本，它使用最新版本的 Clojurscript 和 Google Closure 编译器。

```
(defproject cljsbuild-example-simple "0.3.4"
  :description "A simple example of how to use lein-cljsbuild"
  :source-paths ["src-clj"]
  :dependencies [[org.clojure/clojure "1.5.1"]
                 [com.google.javascript/closure-compiler "v20131014"]
                 [org.clojure/clojurescript "0.0-1934"
                  :exclusions [org.apache.ant/ant
                               com.google.javascript/closure-compiler]]
                 [compojure "1.0.4"]
                 [hiccup "1.0.0"]]
  :plugins [[lein-cljsbuild "0.3.4"]
            [lein-ring "0.7.0"]]
  :cljsbuild {
    :builds [{:source-paths ["src-cljs"]
              :compiler {:output-to "resources/public/js/main.js"
                         :optimizations :whitespace
                         :pretty-print true}}]}
  :ring {:handler example.routes/app}) 
```

这导致了这个依赖树：

```
 [clojure-complete "0.2.3" :exclusions [[org.clojure/clojure]]]
 [com.google.javascript/closure-compiler "v20131014"]
   [args4j "2.0.16"]
   [com.google.code.findbugs/jsr305 "1.3.9"]
   [com.google.guava/guava "15.0"]
   [com.google.protobuf/protobuf-java "2.4.1"]
   [org.json/json "20090211"]
 [compojure "1.0.4"]
   [clout "1.0.1"]
   [org.clojure/core.incubator "0.1.0"]
   [org.clojure/tools.macro "0.1.0"]
   [ring/ring-core "1.1.0"]
     [clj-time "0.3.7"]
       [joda-time "2.0"]
     [commons-codec "1.6"]
     [commons-fileupload "1.2.1"]
     [commons-io "2.1"]
     [javax.servlet/servlet-api "2.5"]
 [hiccup "1.0.0"]
 [org.clojure/clojure "1.5.1"]
 [org.clojure/clojurescript "0.0-1934" :exclusions [[org.apache.ant/ant] [com.google.javascript/closure-compiler]]]
   [org.clojure/data.json "0.2.3"]
   [org.clojure/google-closure-library "0.0-20130212-95c19e7f0f5f"]
     [org.clojure/google-closure-library-third-party "0.0-20130212-95c19e7f0f5f"]
   [org.clojure/tools.reader "0.7.9"]
   [org.mozilla/rhino "1.7R4"]
 [org.clojure/tools.nrepl "0.2.3" :exclusions [[org.clojure/clojure]]] 
```

然后编译它：

```
$ lein cljsbuild once
Compiling ClojureScript.
Compiling "resources/public/js/main.js" from ["src-cljs"]...
Successfully compiled "resources/public/js/main.js" in 9.181874 seconds. 
```

希望这可以帮助！

# bash - 比较不同文件中的值并保留不匹配的行

> ID：13493209
> 
> 赞同：0
> 
> 时间：2012-11-21T12:24:21.367
> 
> 标签：bash

我有两个包含 SQL 数据的文件，我希望删除第二个文件中具有匹配课程代码和学号的数据。这些文件看起来像这样：

文件 1：

```
INSERT INTO RegisteredCourses (course,student) VALUES ('BKE974','3941021693');
INSERT INTO RegisteredCourses (course,student) VALUES ('BKE974','5044463260');
INSERT INTO RegisteredCourses (course,student) VALUES ('BKE974','5923001715');
INSERT INTO RegisteredCourses (course,student) VALUES ('DQY359','7539643746');
INSERT INTO RegisteredCourses (course,student) VALUES ('DQY359','9604636424');
INSERT INTO RegisteredCourses (course,student) VALUES ('DQY359','9649249670'); 
```

文件 2：

```
INSERT INTO Queue (course,student,registrationDate) VALUES ('BKE974','3941021693','1354811709');
INSERT INTO Queue (course,student,registrationDate) VALUES ('BKE974','5044463260','1378352712');
INSERT INTO Queue (course,student,registrationDate) VALUES ('BKE974','3421728825','1368144500');
INSERT INTO Queue (course,student,registrationDate) VALUES ('DQY359','7421758823','1375874278');
INSERT INTO Queue (course,student,registrationDate) VALUES ('DQY359','9604636424','1374587707');
INSERT INTO Queue (course,student,registrationDate) VALUES ('DQY359','9649249670','1370542279'); 
```

我已经对文件进行了操作，以便课程和学生字段在文件的前两行和最后两行中匹配。在第一行中，您可以看到它们具有相同的课程 (BKE974) 和学生 (3941021693) 值。如果这些值不匹配，我想将整行从 File2 打印到新文件。

我一直在尝试使用一些 bash 脚本来解决这个问题，并且我希望有一个 bash 解决方案，因为我正在尝试了解更多关于 bash 的信息。我尝试使用 grep、awk 和 cut 来尝试解决这个问题，但我对 bash 的了解非常缺乏：P

编辑：所以我希望最终得到的结果应该是将这两行打印到一个新文件中：

```
 INSERT INTO Queue (course,student,registrationDate) VALUES ('BKE974','3421728825','1368144500');
 INSERT INTO Queue (course,student,registrationDate) VALUES ('DQY359','7421758823','1375874278'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:12:58.013

这是一种使用方法`GNU awk`：

```
awk -F "[()]" 'FNR==NR { a[$(NF-1)]++; next } !(gensub(/(.*),.*/,"\\1","g",$(NF-1)) in a)' File1 File2 
```

结果：

```
INSERT INTO Queue (course,student,registrationDate) VALUES ('BKE974','3421728825','1368144500');
INSERT INTO Queue (course,student,registrationDate) VALUES ('DQY359','7421758823','1375874278'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:50:03.907

尝试这个

```
#!/bin/bash
    while read line
    do
            x=`echo "$line" | sed -n "s/.*VALUES (//p" | sed -n "s/);//p"`;
            sed -i   '/'$x'/d' file2.txt
    done<file1.txt 
```

# ruby-on-rails - 嵌套资源和视图

> ID：13493216
> 
> 赞同：0
> 
> 时间：2012-11-21T12:24:37.863
> 
> 标签：ruby-on-rails

我正在编写一个实用程序发票应用程序，并且客户有很多读数。读数属于客户。

在我的 routes.rb

```
resources :customers do 
    resources :readings
end 
```

我希望在特定客户的视图中创建新的阅读，因此在我的客户控制器中

```
def show
    @customer = Customer.find(params[:id])
    @reading = Reading.new(:customer => @customer)
    respond_to do |format|
      format.html
    end
end 
```

然后在我的客户的显示视图中，我添加了添加新客户阅读的表单，如下所示

```
<%= simple_form_for @customer,@reading do |f| %>
   <%= f.input :customer, :value => @reading.customer.name %>
   <%= f.input :date_of_reading, :as => :date %>
<% end %> 
```

但是，在访问 localhost:3000/customers/1 时，我在为添加读数而添加的代码段中获得了 Customers#show 错误中的 no-method。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:35:18.053

问题是表单需要一个数组，但您传递的是两个单独的对象。改变：

```
<%= simple_form_for @customer, @reading do |f| %> 
```

到：

```
<%= simple_form_for [@customer, @reading] do |f| %> 
```

# java - 计算java中多个文件/文档中的词频

> ID：13493218
> 
> 赞同：3
> 
> 时间：2012-11-21T12:24:41.183
> 
> 标签：java, words, word-frequency

我想在java中计算多个文件/文档的词频。

例如

```
a1 = {aaa,aaa,aaa,bbb}
a2 = {aaa, aaa, hhh}
a3 = {aaa, hhh, bbb, bbb} 
```

所以，我想计算每个文件的词频：

```
for a1 file {aaa = 3, bbb = 1}
for a2 file {aaa = 2, hhh = 1}
for a3 file {aaa = 1, hhh = 1, bbb =2} 
```

我有一种方法可以读取单词`file`，然后将其存储`<wordname, worcount>`在`LinkedHashMap`. 尽管如此，它会计算所有文件的特定单词的频率，但我想分别计算每个文件的单词频率。

有没有人有任何解决方案？

* * *

然后，我写了这个：

```
Set mapset = fileToWordCount.keySet();           

for(Object filenameFromMap: mapset){
      System.out.println("FILENAME::"+filenameFromMap);
} 
```

但是，它不打印任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:27:39.133

您可以创建另一个`Map`将文件名映射到`LinkedHashMap`带有字数的文件。所以你会有这样的事情：

```
Map<String, LinkedHashMap<String, Integer>> fileToWordCount = new HashMap<String, LinkedHashMap<String, Integer>(); 
```

然后，对于每个文件，您将像往常一样构建您的词频，并以这种方式将值添加到上面的地图中：

```
fileToWordCount.put(file.getPath(), wordCountMap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-29T18:10:57.650

导入 java.io。*; 导入 java.util。*;

```
public class file1{
 public static void main(String[] args) throws Exception{
HashMap<String,Integer> words_fre = new HashMap<String,Integer>();
HashSet<String> words = new HashSet<String>();
try{  

       File folder = new File("</file path>");
       File[] listOfFiles = folder.listFiles();

       BufferedReader bufferedReader=null;
       FileInputStream inputfilename=null;
       BufferedWriter out= new BufferedWriter(new OutputStreamWriter(new FileOutputStream("outfilename.txt",false), "UTF-8"));

        for(File file : listOfFiles){           
           inputfilename= new FileInputStream(file); 
           /*System.out.println(file); */    
           bufferedReader= new BufferedReader(new InputStreamReader(inputfilename, "UTF-8"));

             String s;
             while((s = bufferedReader.readLine()) != null){
               /*System.out.println(line);*/
                  s = s.replaceAll("\\<.*?>"," ");
                    if(s.contains("॥") || s.contains(":")|| s.contains("।")|| 
                     s.contains(",")|| s.contains("!")|| s.contains("?")){
                         s=s.replace("॥"," ");
                         s=s.replace(":"," ");
                         s=s.replace("।"," ");
                         s=s.replace(","," ");
                         s=s.replace("!"," ");
                         s=s.replace("?"," ");
                       }                                                   
                  StringTokenizer st = new StringTokenizer(s," ");
                  while (st.hasMoreTokens()) {         
                  /*out.write(st.nextToken()+"\n");*/
                  String str=(st.nextToken()).toString();
                  words.add(str);
                }
                for(String str : words){
                  if(words_fre.containsKey(str)){  
                           int a = words_fre.get(str);  
                           words_fre.put(str,a+1);             
                  }else{  
                      words_fre.put(str,1);/*uwords++;//unique words count */  
                  }                      
                }
                words.clear(); 

                  /*out.write("\n");
                  out.close();*/

             }             
             Object[] key =   words_fre.keySet().toArray();   
                  Arrays.sort(key);  
                  for (int i = 0; i < key.length; i++) {  
                    //System.out.println(key[i]+"= "+words_fre.get(key[i]));
                 out.write(key[i]+" : "+words_fre.get(key[i]) +"\n");
               }

         }

            out.close();
            bufferedReader.close();

      }catch(FileNotFoundException ex){
         System.out.println("Error in reading line");
        }catch(IOException ex){
            /*System.out.println("Error in reading line"+fileReader );*/
            ex.printStackTrace();
           } 
```

} }

# encryption - AES 密码加密

> ID：13493220
> 
> 赞同：1
> 
> 时间：2012-11-21T12:24:46.453
> 
> 标签：encryption

谁能解释这个字符串是如何被加密的？

```
 AES256:29://(Hex://5B18C3AD8CFR4D38) 
```

在我的生活中，我从未见过这样的加密。可以用PHP复制吗？（如果我能得到可能使用过的盐等）。

这是为了将数据从一个网站迁移到另一个网站 - 目前这些数据存储在 MSSQL DB 中，但如果 PHP 可以处理加密，将在 MySQL 中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:35:12.937

它似乎是 256 位散列的一部分，周围有一些元数据。我不熟悉用于加密的 php 库，但知道您可以使用 php 创建 256 位 sha，并且应该有一个 toHex() 方法。

要检查密码，请使用 sha256 加密用户条目，并根据存储的值检查其十六进制值。您是否检查过它是否是 sha 的前 1/4？也许他们只是因为缺乏安全性而被截断？

如果我猜的话，29 可能是用户 ID，但也可能是盐之类的。

# jquery - Jquery总是从包含在div中的图像列表中获取第一张图像的价值

> ID：13493223
> 
> 赞同：0
> 
> 时间：2012-11-21T12:25:01.257
> 
> 标签：jquery

我需要`src`从包含在其中的图像列表中获取图像值`div`并将该值传递给文本框。

我已经研究过这个例子，但它总是得到第一张图像的值，而不管你点击哪个图像。

[http://jsfiddle.net/FMW22/](http://jsfiddle.net/FMW22/)

我如何修改脚本以使其始终获取`src`单击到该文本框的图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:26:39.740

这是因为您的选择器已打开`#imgListContainer`，并使用 选择图像`$(this).find("img")`。

您需要将选择器更改为`#imgListContainer img`，并将您的`img`声明更改为`$(this)`。

* * *

将您的代码更改为：

```
$(document).on("click", "#imgListContainer img", function(){
    var img = $(this), // select images inside .container
        len = img.length; // check if they exist
    if( len > 0 ){
        // images found, get id
        var attrID = img.attr("src"); // get id of first image
       // alert(attrID);
        $("#Text1").val(attrID);
    } else {
        // images not found
    }
});​ 
```

演示：http: [//jsfiddle.net/FMW22/1/](http://jsfiddle.net/FMW22/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:26:58.677

```
$(document).on("click", "img", function(){
    $("#Text1").val($(this).attr("src"));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:27:07.530

让它更简单：

```
$("#imgListContainer").on("click", "img", function() {
    $("#Text1").val(this.src);
});​ 
```

**演示：http:** [//jsfiddle.net/FMW22/2/](http://jsfiddle.net/FMW22/2/)

# iphone - 如何将加载在 UIWebView 上的 Web 内容滚动到特定的分区/内容起点？

> ID：13493228
> 
> 赞同：3
> 
> 时间：2012-11-21T12:25:14.633
> 
> 标签：iphone, iphone-standalone-web-app

我是 iPhone 应用程序开发的新手。

我正在开发一个应用程序，我需要将加载在 UIWebView 上的网页滚动到具有某些 Id 的某个 div。因为我通过将网页内容转换为字符串来加载静态网页。字符串包含一些出现在 HTML 页面上的锚标记。因此单击锚标记 webView 应自动滚动到包含与锚标记标题相同标题的特定 div。

我在用`stringByEvaluatingJavaScriptFromString.`

我已经使用了很多网络上可用的 javascript 以及堆栈溢出，但在我的情况下没有一个是可行的。

我的问题有什么解决办法吗。

# android - Android NDK 引用 JNI 中的外部库

> ID：13493232
> 
> 赞同：1
> 
> 时间：2012-11-21T12:25:18.267
> 
> 标签：android, c++, curl, android-ndk, java-native-interface

我已经在我的应用程序的**JNI**文件夹中编写了 C++ 文件。我正在使用带有**NDK**和**Cygwin 1.7的****Windows**系统。我想参考 Cygwin 中可用的 CURL 库。在 Android 中创建 JNI 应用程序时，我们如何引用外部 .h(libraries/header) 文件？我创建了一个组合的 Android 和 C++ 项目。但我指的是 CURL 头文件。当我构建项目时，我遇到了**致命错误： curl/curl.h：没有这样的文件或目录**问题。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:35:48.677

请使用本[教程](http://psrdotcom.blogspot.fr/2011/12/android-ndk-jni-windows-xp7-with-3264.html)是不错的。

将项目转换为 C/C++ 原生项目后不要忘记更改此设置。

构建命令的构建器设置

```
bash C:\tools\android-ndk-r8b-windows\android-ndk-r8b\ndk-build 
```

这是我的 NDK 路径，您可以根据您的 NDK 路径更改此路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:30:04.577

当你得到那个 libcurl.a 文件时，不要忘记复制 curl 的 headers 文件夹（从 Cygwin 进入你的**usr/include/curl**）并将这个文件夹添加到你项目中的 JNI 中，所以它在编译时知道头文件.

这意味着还要在您的**Android.mk**中引用：

对于 libcurl 库

```
LOCAL_SRC_FILES := libcurl.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/curl 
```

和你的 C++ 文件

```
LOCAL_C_INCLUDES := $(LOCAL_PATH)/include/curl
LOCAL_WHOLE_STATIC_LIBRARIES := libcurl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:37:45.277

将以下内容添加到您的`Android.mk`:

```
LOCAL_CFLAGS += -I$/PATH/TO/YOUR/curl.h
LOCAL_LDLIBS += -L$/PATH/TO/YOUR/libcurl.a.for.android -lcurl 
```

您在 cygwin 中安装的`libcurl.a`不能用于 android，您需要一个针对 android 的版本。如果没有，请自行构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:48:17.383

按着这些次序：

从 Android 项目转换为 C/C++ 项目：右键单击您的项目名称，转到“Android 工具”并单击“添加本机支持”

添加外部 .h 文件的路径：右键单击项目名称，转到“属性”，在“C/C++ 常规”下，转到“路径和符号”，在“包含”选项卡下，添加您的 .h 文件所在的文件夹。 h 文件是。如果要求，请记住添加到所有语言和配置。

此外，由于您在 Windows 中，我认为您需要将 Build 命令（位于项目属性的“C/C++ Build”部分）更改为“bash C:\Development\android-ndk-r8\ndk-构建.cmd"******

# javascript - 使用 jQuery 或 javascript 从字符串中删除特殊字符（和号）

> ID：13493238
> 
> 赞同：3
> 
> 时间：2012-11-21T12:25:34.780
> 
> 标签：javascript, jquery, html, css

我正在尝试实现“应该”相当简单的事情，但我在网上找不到任何可以帮助我的东西。

我有一些 CSS 类名在输出时带有 & 符号（它取决于我正在使用的系统并且是不可避免的）。我想使用一点 jQuery 来简单地删除 & 符号，所以一个字符串看起来像：

类="中东和东"

将会

类="中东"

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:39:01.943

尽可能更换它们；

```
$('[class*=\\&]').each(function()  {
    $(this)[0].className = $(this)[0].className.replace(/&/g,"");      
})
​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T12:30:07.370

尝试：

```
var class="Middle&East"
class.replace('&', ''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:32:56.997

`&`如果您使用的是 jquery，您将不得不转义

尝试

`$(".Middle\\&East").removeClass("Middle&East").addClass("MiddleEast");`

[演示](http://jsfiddle.net/jwkVD/)

`&`从类名中删除的一般解决方案

```
$(function(){
    $('[class*="&"]').each(function(){
        var $this = $(this),cname = $this.attr('class').replace(/&/g,'');
        $this.attr('class',cname)

    })

}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:27:42.000

也许伴随着一些东西

```
$(".Middle&East").removeClass("Middle&East").addClass("MiddleEast"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T12:30:48.700

这个似乎对我有用：

```
$(function() {
    $('[class="Middle&East"]').toggleClass('Middle&East MiddleEast');
}); 
```

这是一个 jsfiddle：http: [//jsfiddle.net/U3r7G/](http://jsfiddle.net/U3r7G/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T12:30:56.457

```
var className = $(element).attr('class');
var modifiedClass = className.replace('&', '');
$(element).attr('class', modifiedClass); 
```

# sql - Oracle - SQL - 计算多个字段

> ID：13493240
> 
> 赞同：0
> 
> 时间：2012-11-21T12:25:38.340
> 
> 标签：sql, oracle, oracle10g

使用 Oracle 10G

例如，我有一个包含三个字段的表，我想要一个查询来选择它们不为空的每一列的计数。字段名称

```
----------------------------------
| strTest1 | strTest2 | strTest3 |
---------------------------------- 
```

我知道如何分别计算每个人的数量：

```
select count(*) from tablename where strTest1 is not null 
```

但我想知道是否可以在一个查询中针对所有 3 个字段执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:27:57.860

听起来你想要：

```
SELECT COUNT(STRTEST1), COUNT(STRTEST2), COUNT(STRTEST3) FROM YOUR_TABLE 
```

# c# - 在 C# WinForms 中将数据从数据库插入和检索到 TreeView 控件

> ID：13493242
> 
> 赞同：-1
> 
> 时间：2012-11-21T12:25:46.407
> 
> 标签：c#, winforms, treeview

我正在处理一个项目，其中我有一个名称在树视图控件中用层次结构表示的任务。

这意味着我必须能够将父节点和子节点添加到树视图，并且当我单击`Save`按钮时，所有节点都应该存储在数据库中。

我的典型任务是，如果我检索数据，则应检索所有父节点和子节点并将其添加到树视图控件中，因为我只插入了层次结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:34:44.167

通过以下链接，它可能会让您开始提出真正的问题。

[http://msmvps.com/blogs/deborahk/archive/2009/11/09/populating-a-treeview-control-from-a-list.aspx](http://msmvps.com/blogs/deborahk/archive/2009/11/09/populating-a-treeview-control-from-a-list.aspx)

[http://www.codeguru.com/csharp/csharp/net30/article.php/c15887/Updating-a-Database-from-WinForms-Controls-Old-School.htm](http://www.codeguru.com/csharp/csharp/net30/article.php/c15887/Updating-a-Database-from-WinForms-Controls-Old-School.htm)

# python - 模型继承效果不佳

> ID：13493243
> 
> 赞同：1
> 
> 时间：2012-11-21T12:25:47.800
> 
> 标签：python, django, json, model

我希望 2 个模型按以下方式工作：从 Link 类继承的 Content 类。听起来很简单。这是我的模型（相关部分）：

```
class Link(models.Model):
     name               = models.CharField(max_length=50)
     slug               = models.SlugField(unique = True)
     level              = models.IntegerField(default='1')
     vectorImage        = models.TextField(blank = True, null=True)
     parent             = models.TextField(default='index')
     def __unicode__(self):
        return self.name
class Content(Link):
     context            = models.TextField() 
```

问题是当我创建一个新内容时，它会分别创建一个链接和一个内容。因此，如果我使用 JSON 传输它：

Links.objects.all... 和 Content.objects.all，在创建 1 个 Content 后：

```
 [{
        "pk": 1,
        "model": "grid.link",
        "fields": {
            "vectorImage": "",
            "level": 1,
            "name": "logo",
            "parent": "index",
            "slug": "logo"
        }
    }
],
[
    {
        "pk": 1,
        "model": "grid.contexthtml",
        "fields": {
            "context": "html codez"
        }
    }
] 
```

那不是我想要的。我希望它发送完整的内容（如上，但带有组合字段）。我该如何解决？一世

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:30:59.263

使用[抽象基类](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)。这对你有用吗？

```
class BaseLink(models.Model):
     name               = models.CharField(max_length=50)
     slug               = models.SlugField(unique = True)
     level              = models.IntegerField(default='1')
     vectorImage        = models.TextField(blank = True, null=True)
     parent             = models.TextField(default='index')

     def __unicode__(self):
        return self.name

     class Meta:
         abstract = True

class Link(BaseLink):
    pass

class Content(BaseLink):
     context            = models.TextField() 
```

# javascript - 使用 Javascript 和 JQuery 获取控件的类型

> ID：13493251
> 
> 赞同：7
> 
> 时间：2012-11-21T12:26:13.270
> 
> 标签：javascript, jquery, controls

我正在尝试使用 JQuery 来获取控件类型，以下是我正在使用的代码。

```
$('#selCity').attr('type') 
```

其中 selCity 是 select 类型。当我尝试上面的代码时，它返回未定义，但是当我使用带有 Javascript 的替代代码时，它返回正确的类型。

请查看这个小提琴以清楚地理解它：http: [//jsfiddle.net/Ye8e9/](http://jsfiddle.net/Ye8e9/)

有人可以建议我如何使用 JQuery 正确实现这一目标吗？这是 JQuery 的问题还是我犯了一个错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T12:36:47.677

采用

```
$('#selCity').prop('type') 
```

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。此外，.attr() 不应用于普通对象、数组、窗口或文档。要检索和更改 DOM 属性，请使用 .prop() 方法。

[参考](https://stackoverflow.com/questions/8010664/jquery-1-7-this-attrtype-for-select-gives-undefined-instaed-of-select-on)

[演示](http://jsfiddle.net/Ye8e9/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T12:29:03.303

如果你的意思是标签的类型，使用这个

```
 $("#selCity").get(0).tagName 
```

[**在此处查看您的演示**](http://jsfiddle.net/Ye8e9/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:30:11.887

使用 nodeName 获取“标签类型”。'.type' 指的是 select 没有的属性 'type'。

```
document.getElementById('selCity').nodeName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:48:00.860

你得到未定义，因为选择中没有类型属性。

试试这个

```
$('#selCity')[0].tagName; 
```

# android - 在运行时以透明颜色显示图像

> ID：13493252
> 
> 赞同：1
> 
> 时间：2012-11-21T12:26:14.220
> 
> 标签：android, image, transparency

我尝试在具有特定透明颜色的 android-canvas 中显示 jpg。它适用于 png，我也知道如何使用 java 将 jpg 转换为 png，所以最后我在文件系统上有一个新的 png 文件。

现在我的问题：有没有办法从文件系统中读取 jpg 文件，在运行时设置透明颜色（转换为 png）并在运行时显示图像？

附加评论：我尝试在我的自定义视图中使用 ondraw 方法和 drawbitmap 执行此操作。我不能使用图像视图。:-(

问候安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:29:49.783

不要使图像透明，而是使视图透明。

```
ImageView myImage = (ImageView) findViewById(R.id.img);
myImage.setAlpha(value); 
```

值介于 0 和 255 之间。数字越小，图像视图越透明。

# python - 在 GUI Python 中将文件路径作为命令提供给按钮

> ID：13493254
> 
> 赞同：-2
> 
> 时间：2012-11-21T12:26:15.513
> 
> 标签：python, tkinter

嗨，我需要使用 GUI 打开一个 python 脚本。是否可以将文件路径作为按钮的命令提供？我尝试使用下面的代码，但它显示没有这样的文件或目录。请帮忙谢谢

```
import xlwt
from Tkinter import *            
from tkFileDialog   
import askopenfilename      

def callback():
    filename = ('C:\python\abc.py')
    execfile(filename)

abc= Button(text='abc', command=callback)
abc.pack()
mainloop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:05:07.757

假设目录`c:\python`和文件`abc`存在，您还可以尝试使用原始字符串：

```
filename = (r'C:\python\abc') 
```

旁白：如果我看到那个路径，我会假设`python\abc`它是一个路径并且文件丢失了（部分原因`abc`是没有扩展名）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:29:00.807

反斜杠是转义字符，因此您应该对其进行转义以使其表示“反斜杠字符”而不是“反斜杠转义字符”。尝试`filename`像这样分配：

```
filename = ('C:\\python\\abc') 
```

# string - 使用批处理将每两个字符分配给字母表中的一个字母

> ID：13493256
> 
> 赞同：1
> 
> 时间：2012-11-21T12:26:22.337
> 
> 标签：string, batch-file, split

我有一个由 52 个字符组成的随机生成的数字，并且想将每两个字符分配给字母表中的一个字母

例如生成的数字是：

```
8418883335015492815087755766083114261445499300375638 
```

我希望将前两个`84`分配给一个名为 的变量`VAR_A`，然后`18`是 to`VAR_B`等等。

我怎样才能最好地做到这一点？

编辑：：：

```
set MY_ALPHABET=1234567890

set MY_A=%MY_ALPHABET:~-2%

SET MY_ALPHABET_B = (%MY_ALPHABET% - %MY_A%)

echo %MY_ALPHABET_B% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:31:21.063

可能有更好的方法，但它有效

```
@echo off
setlocal enabledelayedexpansion
set start=0
set step=2
set end=52
set nvar=1
set number=8418883335015492815087755766083114261445499300375638
:LOOP
if %start%==%end% (
echo done
pause >nul
) else (
set var%nvar%=!number:~%start%,%step%!
echo !var%nvar%!
set /a start+=2
set /a nvar+=1
goto :LOOP
)
pause >nul 
```

完成后，您将有 26 个变量命名`var1`为`var26`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:57:46.780

这似乎是一个愚蠢的练习，但这里有

```
@echo off
setlocal enableDelayedExpansion
set  "chars=A B C D E F G H I J K L M N O P Q R S T U V W X Y Z"
set "string=8418883335015492815087755766083114261445499300375638"

::Assign variables
for /l %%N in (0 2 50) do set "var_!chars:~%%N,1!=!string:~%%N,2!"

::Show results
set var 
```

结果：

```
var_A=84
var_B=18
var_C=88
var_D=33
var_E=35
var_F=01
var_G=54
var_H=92
var_I=81
var_J=50
var_K=87
var_L=75
var_M=57
var_N=66
var_O=08
var_P=31
var_Q=14
var_R=26
var_S=14
var_T=45
var_U=49
var_V=93
var_W=00
var_X=37
var_Y=56
var_Z=38 
```

# java - 使用纬度-经度返回用户位置可用的最近地点？

> ID：13493259
> 
> 赞同：2
> 
> 时间：2012-11-21T12:26:34.343
> 
> 标签：java, mysql, location, latitude-longitude

我想在 Java 或 MySQL 中实现**用户算法可用的最近位置。**

我在**MySQL数据库中有****Stations**表，其中**包含 Latitude 和 Longitude**大约 100K 的 Stations 记录。如果用户将他的纬度和经度指定为 x 和 y，那么我想返回从**用户位置**可用的**最近车站。**

 ********所以请向我推荐Java 或 MySQL**中可用的任何算法。

我尝试使用以下查询，但性能似乎**较慢**-

```
SELECT *,3956*2*ASIN(SQRT(POWER(SIN((user_lat-abs(st.station_lat))*pi()/180/2 ), 2) + COS(user_lat*pi()/180)*COS(abs(st.station_lat) *pi()/180)*POWER(SIN((user_lon-
st.station_lon)*pi()/180/2 ),2))) AS distance FROM Stations st HAVING distance < 10 ORDER BY distance; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:56:06.437

我在以下 PHP PDO 查询中使用[Haversine 公式。](http://en.wikipedia.org/wiki/Haversine_formula)它从包含 2.7K 记录的表中提取数据，并在不到 1 秒的时间内通过地理编码将它们显示在[MAP上。如果在数据库范围之外（巴黎 25 英里）搜索，则默认为干净。](http://daviestrachan.co.uk/maps/stationmap8a.php)

如果需要公里而不是英里，请在公式中使用 6357。

```
$stmt = $dbh->prepare("SELECT  name, lat, lng, ( 3959 * acos( cos( radians(?) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(?) ) + sin( radians(?) ) * sin( radians( lat ) ) ) ) AS distance FROM gbstn HAVING distance < ? ORDER BY distance LIMIT 0 , 20");
    // Assign parameters
    $stmt->bindParam(1,$center_lat);
    $stmt->bindParam(2,$center_lng);
    $stmt->bindParam(3,$center_lat);
    $stmt->bindParam(4,$radius); 
```******

# asp.net-mvc-3 - 页面错误：传入字典的模型项的类型为“System.Data.Entity.DynamicProxies”

> ID：13493260
> 
> 赞同：0
> 
> 时间：2012-11-21T12:26:37.187
> 
> 标签：asp.net-mvc-3, entity-framework, c#-4.0

我在详细信息视图页面上收到此错误：

```
The model item passed into the dictionary is of type 'System.Data.Entity.DynamicProxies.cpd_certificates_65AF30842281867E2F4F6A1026590271109C12A85C8175394F14EF6DE429CBC7', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[cpd.Models.cpd_certificates]'. 
```

**这是我的控制器：**

```
 public class Default8Controller : Controller
{
    //
    // GET: /Default8/
    private cpdDbContext db = new cpdDbContext();

    public ActionResult Index()
    {

        return View(db.CPD.ToList());
    }

    //
    // GET: /Default8/Details/5

    public ActionResult Details(int id)
    {

        cpd_certificates cpd_ = db.Cert.Find(id);

        return View(cpd_);
    } 
```

**以下是我的详细信息视图：**

```
@model IEnumerable<cpd.Models.cpd_certificates>

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>
 <table>
        <tr>
            <th>
                certificateNo
        </th>
        <th>
            Mark
        </th>
          <th></th>
    </tr>
       @foreach (var item in Model) {
            <tr>
        <td>
            @Html.DisplayFor(modelItem => item.CertificateNo)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Mark)
        </td>

    </tr>
}

</table> 
```

下面是 cpd_certificates 模型：

```
public class cpd_certificates
{

        [Key]
        public int CertificateNo { get; set; }
        public int QuizNo { get; set; }

        public DateTime? DateReceived { get; set; }
        public DateTime? DatePaid { get; set; }
        public string Mark { get; set; }
        public int? AccreditationNo { get; set; }

        public int? ID { get; set; }
        public virtual cpd_recipients Recipients { get; set; }

} 
```

我有两个模型，我可以在我的索引上查看列表。我打算当我单击详细信息链接时，它会将我带到另一个模型/表格中获得的证书和考试的详细信息。因此，简而言之，两个模型在 CPD 上具有 PK ID，在 Cert 上具有 FK ID。索引页面只显示个人信息，这个页面很好。单击详细信息时，它会显示其他模型/表格数据，即该人的许多证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:37:08.293

您应该将模型作为 IEnumerable 条目列表传递到视图中，而不是将其作为单个条目传递。在您的控制器中，您希望显示一个条目的详细信息，但在视图中，希望显示所有条目的详细信息。首先您应该决定要显示的内容。要显示一个条目的详细信息，请使用：

控制器：

```
public ActionResult Details(int id)
{
    cpd_certificates cpd_ = db.Cert.Find(id);
    return View(cpd_);
} 
```

看法：

```
@model cpd.Models.cpd_certificates  
@{
ViewBag.Title = "Details";}

<h2>Details</h2>
 <table>
    <tr>
        <th>
            certificateNo
        </th>
        <th>
            Mark
        </th>
        <th></th>
    </tr>
    <tr>
        <td>
            @Html.DisplayFor(model => model.CertificateNo)
        </td>
        <td>
            @Html.DisplayFor(model => model.Mark)
        </td>

    </tr>
}

</table> 
```

当您想列出所有条目时，请使用以下命令：

控制器：

```
public ActionResult List()
{
    cpd_certificates cpd_ = db.Cert.ToList();
    return View(cpd_);
} 
```

看法：

```
@model IEnumerable<cpd.Models.cpd_certificates>

@{
    ViewBag.Title = "List";
}

<h2>List</h2>
 <table>
        <tr>
            <th>
                certificateNo
        </th>
        <th>
            Mark
        </th>
          <th></th>
    </tr>
       @foreach (var item in Model) {
        <tr>
        <td>
            @Html.DisplayFor(modelItem => item.CertificateNo)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Mark)
        </td>

    </tr>
}

</table> 
```

# javascript - 根据参数类型扩展函数参数

> ID：13493263
> 
> 赞同：4
> 
> 时间：2012-11-21T12:26:45.173
> 
> 标签：javascript, jquery, parameters, parameter-passing, sinemacula

## 解释

我有一个传递参数的函数`options`。此参数可以是***对象***、***数组***或***字符串***。根据参数是什么，将确定要做什么。

* * *

**更新：我忘了提到，`options`必须始终以相同结构的对象结束（换句话说，它必须始终设置默认值）。**

**我只想定义一次默认值，所以像你们中的一些人建议的那样使用过程 if 语句不是我的首选解决方案，但如果有必要我会使用它。**

**我不想这样做（如果可能的话）：**

```
function foo(options){
    switch(typeof options){
        case 'string':
            // do something etc
        break;  
        // etc
    }
} 
```

## 例子

如果参数是一个对象，则扩展它以设置默认值，如下所示：

```
function foo(options){
    // Extend the options to apply default values
    var options = $.extend({
        bar: 'none',
        baz: []
    },options);         
} 
```

如果参数是字符串，则将 设置`options.bar`为等于字符串并扩展默认值（类似这样）：

```
function foo(options){
    // Set the bar property to equal the supplied string
    var options = {
        bar: options    
    };
    // Extend the options to apply default values
    options = $.extend({
        baz: []
    },options);         
} 
```

如果参数是数组，则将 设置`options.baz`为等于数组，并扩展默认值（类似这样）：

```
function foo(options){
    // Set the baz property to equal the supplied array
    var options = {
        baz: options    
    };
    // Extend the options to apply default values
    options = $.extend({
        bar: 'none'
    },options);         
} 
```

## 问题

如此有效，我希望能够以任何格式提供参数，并且该函数将从`options`提供的内容构建相同的对象。如果没有提供这些值，那么它们将使用它们的默认值。

抱歉，这太不清楚了，很难解释。

## 附加示例

我（jQuery）可以演示的另一种潜在方法是查看[animate() 之](http://api.jquery.com/animate/)类的函数。请注意，您可以提供：

```
.animate( properties [, duration] [, easing] [, complete] ) 
```

或者

```
.animate( properties, options ) 
```

这个额外的例子并不完全是我希望实现的，但它是正确的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:30:47.127

您可以使用各种 jQuery 辅助函数来确定 的类型`options`：

```
$.isPlainObject(options)
$.isArray(options) 
```

和

```
typeof options === "string" 
```

例如

```
function foo(par) {

    // default values
    var options = {
        bar: 'none',
        baz: []
    };

    if ($.isPlainObject(par)) {
        $.extend(options, par);
    } else if ($.isArray(par)) {
        options.baz = par;
    } else if (typeof options === "string") {
        options.bar = par;
    }

    ...
 } 
```

如果您打算更改任何这些值，请使用`.slice()`数组副本和深复制选项，`$.extend()`以便更改不会影响提供的对象。

**更新的答案**

对于这种特殊情况，答案是：

```
function foo(parameter){
    var options = {
        package:    'none', // Do not load any packages by default
        packageURL: false, // Do not retrieve the package details from a URL by default
        libraries:  [] // Do not load any libraries by default
    };
    // Determine the type of parameter supplied and 
    // build the options accordingly
    if($.isArray(parameter)){
        // Set libraries option
        parameter = {
            libraries: parameter    
        };
    }else if(typeof parameter === "string"){
        // Set package option
        parameter = {
            package: parameter  
        };
    }
    // Extend the parameter object to include the default values
    $.extend(options, parameter);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:33:48.383

您可以使用`typeof`来确定所提供参数的类型。
( `typeof "abc" == "string"; typeof {a:1,b:2} == "object"`)

使用它来确定要执行的代码段（Switch/case 或 if/else）

# mysql - 如何使用 wpdb select 语句 Wordpress 从 wp_postmeta 表中的多行中进行选择

> ID：13493264
> 
> 赞同：0
> 
> 时间：2012-11-21T12:26:47.290
> 
> 标签：mysql, wordpress

我有一个这样的选择语句：

```
 $results = $wpdb->get_results( "SELECT $wpdb->postmeta.meta_value 
   FROM $wpdb->postmeta    
   WHERE 1=1 AND $wpdb->postmeta.meta_key = 'geo_short_address'" ); 
```

但我现在正在尝试过滤此语句以仅包含那些在名为“_Company”的元键字段中也有条目或不为空的“geo_short_address”

它们具有相同的帖子 ID，例如：

```
 post_id        meta_key           meta_value
       53     geo_short_address      Nottingham
       53        _Company            Ledgemonkey 
```

所以我只想在 meta_key`_Company`存在于`post_id`

数据库中还有其他条目没有 meta_key`_Company`它们是我要排除的条目...？

我尝试了各种方法，但似乎无法获得组合..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:11:13.817

要重申您的问题，您需要根据多个条件过滤 postmeta 表。你需要做这样的事情（编辑包括 meta_key 标准）。

```
SELECT whatever
  FROM $wpdb->postmeta.meta_value
 WHERE 1=1
   AND $wpdb->postmeta.post_id IN (
             SELECT distinct $wpdb->postmeta.post_id
               FROM $wpdb->postmeta
              WHERE $wpdb->postmeta.post_value = 'Ledgemonkey'
                AND $wpdb->postmeta.meta_key = '_Company'
             )
   AND $wpdb->postmeta.meta_key = 'geo_short_address' 
```

如果你有数万个 postmeta 行，这可能有点像性能毛球，但它会起作用。

`implode()`顺便说一句，您可以通过明智地使用该函数来摆脱那个丑陋但无关紧要的 1=1 。

# mvvm-light - 仅安装 MVVM Light 库时出错 (PCL)

> ID：13493265
> 
> 赞同：0
> 
> 时间：2012-11-21T12:26:53.340
> 
> 标签：mvvm-light

我创建一个新的 PCL 项目，选择 Store app + Phone 8 + .Net 4.5 然后，从包管理器控制台，我做：

```
Install-Package Portable.MvvmLightLibs -Pre 
```

但它没有安装，我得到一个错误。我做错了什么？

谢谢

错误信息是：

安装包：无法安装包“Portable.MvvmLightLibs 4.1.24-beta3”。您正在尝试将此包安装到以“.NETPortable,Version=v4.5,Profile=Profile78”为目标的项目中，但该包不包含与该框架兼容的任何程序集引用。有关详细信息，请联系包作者。在 line:1 char:1 + Install-Package Portable.MvvmLightLibs -Pre + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~ + CategoryInfo : NotSpecified: (:) [Install-Package], InvalidOperationException + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T21:07:28.027

我遇到了同样的问题，但升级 NuGet（目前是 2.2）似乎已经成功了。

# php - 按原样存储和检索 ñ Ñ 字符

> ID：13493270
> 
> 赞同：1
> 
> 时间：2012-11-21T12:27:07.420
> 
> 标签：php, postgresql

有没有办法可以在我的 postgres 数据库中存储 ñ 或 Ñ 字符，数据库是 SQL_ASCII ...

我所做的是插入“ñ”并在数据库中保存为“Ã±”，输出仍然是“ñ”，这很好。但我想要的是按原样在数据库中插入“ñ”。

我的问题是某些应用程序输出“Ã±”，例如 ateila 或 Crystal 报告。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:32:37.480

将其转换为 UTF-8 并试一试，它应该可以工作。检查此[问题](https://stackoverflow.com/questions/8806631/how-to-convert-a-db-in-postgresql-to-utf8)以获取更多信息：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T23:27:05.340

`SQL_ASCII`通常是一个坏主意。考虑将您的数据库转换为 UTF-8。这很难做到，因为您的数据库将充满编码错误的数据，但它会为您节省很多痛苦。

`SQL_ASCII`数据库可以很好地存储非 ASCII 字符。您的应用程序只需要都期望相同的编码，并始终始终如一地转换为该编码/从该编码转换。`client_encoding`被忽略。在您的应用程序中，您必须始终确保将从外部来源获得的文本转换为该编码，并将数据库中的数据转换为外部接收者期望的编码。最主要的`SQL_ASCII`是数据库不会检查以确保您做对了。它不会为您转换，也不会验证数据是否匹配`client_encoding`。没有元数据可以告诉客户您正在使用什么编码。

更改为`UTF-8`。

# javascript - 更改 Google 地图位置时遇到问题

> ID：13493271
> 
> 赞同：3
> 
> 时间：2012-11-21T12:27:09.817
> 
> 标签：javascript, html, google-maps

当我尝试更改位置时，我遇到了一个小问题。我已连接到地图

```
var mapOptions = {
   zoom: 7,
   center: new google.maps.LatLng(48.379433, 31.165579999999977),
   mapTypeControl: false,
   mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); 
```

现在我需要更改地图上的位置

```
<select onChange="changeCity()" id="city"><option value="50.4501, 30.523400000000038">Київ</option><option value="49.839683, 24.029717000000005">Львів</option></select> 
```

为此，我正在使用：

```
function changeCity() {
   var city = document.getElementById('city').value;
   var city_1 = new google.maps.LatLng(city);
   map.setCenter(city_1);
} 
```

但什么也没发生（我看到灰色区域）。请帮忙...！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:29:18.263

问题是

```
somefunction("xx.xxxxxxx, xx.xxxxxxx"); 
```

不等于

```
somefunction(xx.xxxxxxx, xx.xxxxxxx); 
```

标签中的值`option`被指定为**单个*字符串***实例，例如`"50.4501, 30.523400000000038"`Kiev。注意双引号。

构造**函数**`new LatLng()`需要**两个*数值***。因此，您必须将值字符串解析为单独的纬度和经度值并将它们传递给`new LatLng()`构造函数：

```
function changeCity() {

    var cityString = document.getElementById('city').value;
    //value string is split into two parts by the ',' character
    var arrayOfValues = cityString.split(','); 
    //parse latitude string part to a floating point value (first part)
    var lat = parseFloat(arrayOfValues[0]);
    //parse longitude string part to a floating point value (second part)
    var lon = parseFloat(arrayOfValues[1]);
    //create new LatLng instance with correct values
    var city_1 = new google.maps.LatLng(lat, lon);
    map.setCenter(city_1);
} 
```

参考：

*   [谷歌地图 API 文档：LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T10:26:53.743

我可以确认，如果每个数字都作为字符串传递（因此 DOM 提取的字符串需要 parseFloat），则会出现“图像损坏或截断”错误。

# python - Python CLI 程序单元测试

> ID：13493288
> 
> 赞同：31
> 
> 时间：2012-11-21T12:28:02.930
> 
> 标签：python, unit-testing, testing, command-line-interface

我正在做一个python Command-Line-Interface程序，做测试时觉得很无聊，例如，这里是程序的帮助信息：

```
usage: pyconv [-h] [-f ENCODING] [-t ENCODING] [-o file_path] file_path

Convert text file from one encoding to another.

positional arguments:
  file_path

optional arguments:
  -h, --help            show this help message and exit
  -f ENCODING, --from ENCODING
                        Encoding of source file
  -t ENCODING, --to ENCODING
                        Encoding you want
  -o file_path, --output file_path
                        Output file path 
```

当我对程序进行更改并想要测试某些内容时，我必须打开一个终端，输入命令（带有选项和参数），输入 enter，然后查看运行时是否出现任何错误。如果真的发生错误，我必须回到编辑器并从头到尾检查代码，猜测错误位置，进行小改动，写`print`行，返回终端，再次运行命令......

递归。

所以我的问题是，使用 CLI 程序进行测试的最佳方法是什么，它可以像使用普通 python 脚本进行单元测试一样简单吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T19:08:35.530

我认为在整个程序级别上进行功能测试是非常好的。每次测试仍然可以测试一个方面/选项。通过这种方式，您可以确定程序作为一个整体确实有效。编写单元测试通常意味着您可以更快地执行测试，并且失败通常更容易解释/理解。但是单元测试通常更依赖于程序结构，当您在内部进行更改时需要更多的重构工作。

无论如何，使用[py.test](http://pytest.org)，这是一个测试 pyconv 的 latin1 到 utf8 转换的小例子::

```
# content of test_pyconv.py

import pytest

# we reuse a bit of pytest's own testing machinery, this should eventually come
# from a separatedly installable pytest-cli plugin. 
pytest_plugins = ["pytester"]

@pytest.fixture
def run(testdir):
    def do_run(*args):
        args = ["pyconv"] + list(args)
        return testdir._run(*args)
    return do_run

def test_pyconv_latin1_to_utf8(tmpdir, run):
    input = tmpdir.join("example.txt")
    content = unicode("\xc3\xa4\xc3\xb6", "latin1")
    with input.open("wb") as f:
        f.write(content.encode("latin1"))
    output = tmpdir.join("example.txt.utf8")
    result = run("-flatin1", "-tutf8", input, "-o", output)
    assert result.ret == 0
    with output.open("rb") as f:
        newcontent = f.read()
    assert content.encode("utf8") == newcontent 
```

安装 pytest（“pip install pytest”）后，您可以像这样运行它：

```
$ py.test test_pyconv.py
=========================== test session starts ============================
platform linux2 -- Python 2.7.3 -- pytest-2.4.5dev1
collected 1 items

test_pyconv.py .

========================= 1 passed in 0.40 seconds ========================= 
```

该示例通过利用 pytest 的夹具机制重用 pytest 自己测试的一些内部机制，请参阅[http://pytest.org/latest/fixture.html](http://pytest.org/latest/fixture.html)。如果您暂时忘记了细节，您可以从提供“run”和“tmpdir”来帮助您准备和运行测试的事实开始工作。如果你想玩，你可以尝试插入一个失败的断言语句或简单地“断言0”，然后查看回溯或发出“py.test --pdb”进入python提示符。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-10-28T16:17:45.580

**从功能测试**的用户界面开始，逐步**进行单元测试**。感觉很困难，尤其是当您使用控制应用程序入口点的[argparse](https://docs.python.org/3/library/argparse.html)模块或[click包时。](https://click.palletsprojects.com/)

[cli-test-helpers](https://pypi.org/project/cli-test-helpers/) Python 包包含示例和帮助函数（上下文管理器），用于为 CLI 编写测试的整体方法。这是一个简单的想法，并且与 TDD 完美配合：

1.  从功能测试开始（以确保您的用户界面定义）和
2.  进行单元测试（以确保您的实施合同）

## 功能测试

*注意：我假设您开发的代码与`setup.py`文件一起部署或作为模块 ( `-m`) 运行。*

*   是否安装了入口点脚本？（测试 setup.py 中的配置）
*   这个包可以作为 Python 模块运行吗？（即无需安装）
*   命令 XYZ 可用吗？等等。在这里涵盖您的整个 CLI 使用情况！

这些测试很简单：它们运行您将在终端中输入的 shell 命令，例如

```
def test_entrypoint():
    exit_status = os.system('foobar --help')
    assert exit_status == 0 
```

请注意使用非破坏性操作（例如`--help`or `--version`）的技巧，因为我们无法使用这种方法模拟任何内容。

## 走向单元测试

*要测试应用程序中*的单个方面，您需要模仿命令行参数和环境变量等内容。您还需要捕获脚本的退出，以避免测试因`SystemExit`异常而失败。

`ArgvContext`模拟命令行参数的示例：

```
@patch('foobar.command.baz')
def test_cli_command(mock_command):
    """Is the correct code called when invoked via the CLI?"""
    with ArgvContext('foobar', 'baz'), pytest.raises(SystemExit):
        foobar.cli.main()

    assert mock_command.called 
```

请注意，我们模拟了我们希望 CLI 框架（`click`在此示例中）调用的函数，并且我们捕获`SystemExit`了框架自然引发的函数。上下文管理器由[cli-test-helpers](https://pypi.org/project/cli-test-helpers/)和[pytest 提供](https://pypi.org/project/pytest/)。

## 单元测试

其余的一切照旧。通过上述两种策略，我们克服了 CLI 框架可能夺走我们的控制权。剩下的就是通常的单元测试。希望是 TDD 风格。

**披露：**我是`cli-test-helpers`Python 包的作者。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-21T12:59:51.030

> 所以我的问题是，使用 CLI 程序进行测试的最佳方法是什么，它可以像使用普通 python 脚本进行单元测试一样简单吗？

唯一的区别是，当您将 Python 模块作为脚本运行时，其`__name__`属性设置为`'__main__'`. 所以一般来说，如果你打算从命令行运行你的脚本，它应该有以下形式：

```
import sys

# function and class definitions, etc.
# ...
def foo(arg):
    pass

def main():
    """Entry point to the script"""

    # Do parsing of command line arguments and other stuff here. And then
    # make calls to whatever functions and classes that are defined in your
    # module. For example:
    foo(sys.argv[1])

if __name__ == '__main__':
    main() 
```

现在没有区别，您将如何使用它：作为脚本或作为模块。因此，在您的单元测试代码中，您可以只导入`foo`函数、调用它并做出您想要的任何断言。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-16T17:52:34.267

也许太少太晚了，但你总是可以使用

```
import os.system
result =  os.system(<'Insert your command with options here'>
assert(0 == result) 
```

这样，您可以像从命令行一样运行程序，并评估退出代码。

（学习pytest后更新）你也可以使用capsys。（来自运行 pytest --fixtures）

`sys.stdout`capsys 启用对和的写入的文本捕获`sys.stderr`。

```
The captured output is made available via ``capsys.readouterr()`` method
calls, which return a ``(out, err)`` namedtuple.
``out`` and ``err`` will be ``text`` objects. 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-23T14:21:11.173

[pytest-console-scripts](https://github.com/kvas-it/pytest-console-scripts)是一个 Pytest 插件，用于测试`console_scripts`通过`setup.py`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-21T12:33:47.707

简短的回答是肯定的，你可以使用单元测试，而且应该。如果您的代码结构良好，那么分别测试每个组件应该很容易，并且如果您需要，可以随时模拟`sys.argv`以使用不同的参数来模拟运行它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-01-28T04:08:06.157

对于 Python 3.5+，您可以使用更简单的**[subprocess.run](https://docs.python.org/3/library/subprocess.html#subprocess.run)**从测试中调用 CLI 命令。

使用[pytest](https://github.com/pytest-dev/pytest)：

```
import subprocess

def test_command__works_properly():
    try:
        result = subprocess.run(['command', '--argument', 'value'], check=True, capture_output=True, text=True)
    except subprocess.CalledProcessError as error:
        print(error.stdout)
        print(error.stderr)
        raise error 
```

如果需要，可以通过`result.stdout`、`result.stderr`和访问输出。`result.returncode`

如果发生错误，该`check`参数会引发异常。`capture_output`注意和参数需要 Python 3.7+ `text`，这简化了捕获和读取 stdout/stderr。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-21T12:33:18.150

这不是专门针对 Python 的，但我测试命令行脚本的方法是使用各种预先确定的输入和选项运行它们，并将正确的输出存储在文件中。然后，为了在我进行更改时对其进行测试，我只需运行新脚本并将输出通过管道传输到`diff correct_output -`. 如果文件相同，则不输出任何内容。如果它们不同，它会告诉你在哪里。这仅在您使用 Linux 或 OS X 时才有效；在 Windows 上，您必须获得 MSYS。

例子：

`python mycliprogram --someoption "some input" | diff correct_output -`

为了使它更容易，您可以将所有这些测试运行添加到您的“make test”Makefile 目标中，我假设您已经拥有它。;)

如果您同时运行其中的许多，则可以通过添加失败标记使每个结束的位置更加明显：

`python mycliprogram --someoption "some input" | diff correct_output - || tput setaf 1 && echo "FAILED"`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-11-21T13:18:47.373

您可以使用标准单元测试模块：

```
# python -m unittest <test module> 
```

或使用[鼻子](https://nose.readthedocs.org/en/latest/)作为测试框架。只需在单独的目录中编写经典的 unittest 文件并运行：

```
# nosetests <test modules directory> 
```

编写单元测试很容易。只需按照[在线手册进行单元测试](http://docs.python.org/2/library/unittest.html)

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-11-21T14:39:44.213

我不会将程序作为一个整体进行测试，这不是一个好的测试策略，并且可能实际上无法捕捉到错误的实际位置。CLI 接口只是 API 的前端。您通过单元测试测试 API，然后当您对特定部分进行更改时，您有一个测试用例来执行该更改。

因此，重构您的应用程序，以便您测试 API 而不是应用程序本身。但是，您可以进行实际运行完整应用程序并检查输出是否正确的功能测试。

简而言之，是的，测试代码与测试任何其他代码是一样的，但是您必须测试各个部分而不是它们的整体组合，以确保您的更改不会破坏一切。

# heroku - 无法将 Heroku 应用程序连接到 Amazon RDS

> ID：13493296
> 
> 赞同：0
> 
> 时间：2012-11-21T12:28:24.043
> 
> 标签：heroku, amazon-rds

我已经在 Heroku 上部署了一个应用程序，我正在尝试连接一个 Amazon RDS 插件。我已经创建了一个 Amazon RDS 实例并在那里上传了我的 Mysql 数据库。然后我按照 heroku 文档中描述的有关如何连接到 Amazon RDS 的所有步骤，包括授权过程。

[https://devcenter.heroku.com//articles/amazon_rds](https://devcenter.heroku.com//articles/amazon_rds)

我还在 Amazon RDS 插件上设置了数据库 URL。我可以从 mysql 管理工具连接到我的亚马逊实例（因此凭据和主机地址是正确的）

当我运行我的应用程序时，出现以下异常：

```
org.postgresql.util.PSQLException: Connection refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
    org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:138)
    org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:66)
    org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:125)
    org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:30)
    org.postgresql.jdbc3g.AbstractJdbc3gConnection.<init>(AbstractJdbc3gConnection.java:22)
    org.postgresql.jdbc4.AbstractJdbc4Connection.<init>(AbstractJdbc4Connection.java:32)
    org.postgresql.jdbc4.Jdbc4Connection.<init>(Jdbc4Connection.java:24)
    org.postgresql.Driver.makeConnection(Driver.java:393)
    org.postgresql.Driver.connect(Driver.java:267)
    org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
    org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
    org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)
    org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)
    org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)
    org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:71)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
    org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:60)
    org.springframework.orm.jpa.DefaultJpaDialect.beginTransaction(DefaultJpaDialect.java:70)
    org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:59)
    org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:377)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy19.listPeople(Unknown Source)
    com.example.controller.PersonController.listPeople(PersonController.java:27)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:616)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

java.net.ConnectException: Connection timed out
    java.net.PlainSocketImpl.socketConnect(Native Method)
    java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
    java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
    java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
    java.net.Socket.connect(Socket.java:546)
    java.net.Socket.connect(Socket.java:495)
    java.net.Socket.<init>(Socket.java:392)
    java.net.Socket.<init>(Socket.java:206)
    org.postgresql.core.PGStream.<init>(PGStream.java:62)
    org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:76)
    org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:66)
    org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:125)
    org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:30)
    org.postgresql.jdbc3g.AbstractJdbc3gConnection.<init>(AbstractJdbc3gConnection.java:22)
    org.postgresql.jdbc4.AbstractJdbc4Connection.<init>(AbstractJdbc4Connection.java:32)
    org.postgresql.jdbc4.Jdbc4Connection.<init>(Jdbc4Connection.java:24)
    org.postgresql.Driver.makeConnection(Driver.java:393)
    org.postgresql.Driver.connect(Driver.java:267)
    org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
    org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
    org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)
    org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)
    org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)
    org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:71)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
    org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:60)
    org.springframework.orm.jpa.DefaultJpaDialect.beginTransaction(DefaultJpaDialect.java:70)
    org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:59)
    org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:377)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy19.listPeople(Unknown Source)
    com.example.controller.PersonController.listPeople(PersonController.java:27)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:616)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
        org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
        org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
        org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
        org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
        org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

有人知道为什么会这样吗？我已经仔细检查了凭据和主机地址是否正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:33:26.057

好吧，我终于弄清楚出了什么问题。我最初在爱尔兰创建了一个 Amazon RDS 实例（因为我居住在欧洲）。但是 Heroku 无法连接到爱尔兰实例（因为它们显然位于美国并且他们在美国使用 EC 实例）。所以我在美国东部（弗吉尼亚北部）创建了另一个实例并工作了！！！我不确定它是否也适用于美国西部（俄勒冈州，北加利福尼亚州）的其他亚马逊网站。

# fluent-nhibernate - Nhibernate QueryOver WithSubquery

> ID：13493297
> 
> 赞同：1
> 
> 时间：2012-11-21T12:28:27.323
> 
> 标签：fluent-nhibernate, nested, queryover

我有一个独立的查询，它投射 2 个字段：

```
var detached = session.QueryOver.Of<ClassA>().
       select
       (
         Projections1.....X
         Projections2.....Y
       )

var result = session.QueryOver<ClassB>()
       .WithSubquery
       .WhereProperty(p => p.X)
       .In(detached)
       .List(); 
```

我想做的是：

```
select * from tableA a
       where (a.x, a.y) in (select x, y from tableB b) 
```

我想要的是在嵌套部分有两个字段，但是我如何在 WhereProperty 中添加两个字段？

# wpf - 如何在 WPF 弹出窗口上显示 WPF 模式窗口？

> ID：13493303
> 
> 赞同：2
> 
> 时间：2012-11-21T12:28:44.040
> 
> 标签：wpf, popup, modal-dialog

我有一个 WPF 应用程序，我让我的屏幕变暗并向用户显示一个弹出窗口，让他填写一些数据。

该弹出窗口中托管的控件之一可能会引发一个模式窗口，要求用户确认一些验证结果，当该模式出现时它不会显示，因为弹出窗口在 UI 中具有优先权。

有没有办法强制模式显示在弹出窗口上？

# firefox - CSS3 脉冲圈 Firefox 问题

> ID：13493305
> 
> 赞同：2
> 
> 时间：2012-11-21T12:28:49.980
> 
> 标签：firefox, css

我有一个 CSS3 脉冲圈（动画比例为 1.1）。我已经应用了一个微小的 roation 来修复跳跃的 Firefox 动画问题。

```
animation: button_pulse 2s infinite ease-out;

transform: scale(1.1) rotate(0.1deg); 
```

然而，在 Firefox 上，右侧仍然存在一个小问题，我只能将其描述为白唇。关于如何让整个圈子保持平稳的任何想法。

它在 Chrome 中看起来很棒。

[http://jsfiddle.net/alexcroox/9JpHT/](http://jsfiddle.net/alexcroox/9JpHT/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:35:45.093

我使用内阴影去除了白唇，该区域在 FF 中看起来仍然有点方，但比以前好。

```
box-shadow: inset 0 0 0 rgba(0, 0, 0, 0.1); 
```

# ios - Can't open sqlite database with phonegap but it works fine on objectiveC

> ID：13493306
> 
> 赞同：1
> 
> 时间：2012-11-21T12:28:51.313
> 
> 标签：ios, database, cordova

I have a SQLITE database on my iOS project, which I can access from my native IOS code. I can access it and read data from it.

You can see the way i'm doing it and my project structure in the following pic: ![enter image description here](../Images/e53736d346836270e42c9a7faac89e1a.png)

And i try to do the same using Phonegap:

```
 var db;
   var shortName = 'myTestDb.db';
   var version = '1.0';
   var displayName = 'myTestDb';
   var maxSize = 65535;

   // list the values in the database to the screen using jquery to
   //update the #lbUsers element
   function ListDBValues() {

       if (!window.openDatabase) {
           alert('Databases are not supported in this browser.');
           return;
       }
       $('#myDbElements').html('');

       db.transaction(function(transaction) {
           transaction.executeSql("SELECT FIRST_NAME FROM dbo_RE_USER;", [],
           function(transaction, result) {
               console.log("result");                                 
               if (result != null && result.rows != null) {
                   console.log("result is not null");
                   for (var i = 0; i < result.rows.length; i++) {
                       var row = result.rows.item(i);
                       //console.log(row);
                      debugObject(row);

                    $('#myDbElements').append('<br>' + row["FIRST_NAME"]);// + " " + row.LAST_NAME );
                   }
               }
            PrecApp.I_SCROLL.refresh();   
           },errorHandler);

       },errorHandler,nullHandler);        
       return;
   }

   function debugObject(obj) {
    console.log("ROW:");        
    for (n in obj)
//            alert(n + ":" + obj[n]);
        console.log(n + ":" + obj[n]);
   } 
```

But it can't find my dbo_re_users table. Why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:08:22.947

The database opened in JavaScript is an entirely different database - it has the same name, but is not in the app bundle, which is read only.

If you need to access a specific database file, you will need to use a plugin.

# visual-studio-2010 - 使用 MSBuild 进行配置文件引导优化

> ID：13493307
> 
> 赞同：3
> 
> 时间：2012-11-21T12:28:52.123
> 
> 标签：visual-studio-2010, msbuild-4.0

如何在不向项目添加新构建配置的情况下使用 PGI/PGO 在 MSBuild（仅限命令行）中构建解决方案？我尝试添加命令行参数 /property:WholeProgramOptimization=PGInstrument 看起来不错，它会创建 PGD 文件，但在我运行应用程序后不会创建 PGC。显然我在 MSBuild 命令行中遗漏了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-28T09:39:19.893

我花了两天时间在这个问题上摸索，终于找到了解决方法：

**首先，您需要构建程序的检测版本：**

```
msbuild.exe
    /t:Rebuild "Letter:\path\YourProject.vcxproj"
    /p:Configuration=Release
    /p:Platform=x64
    /p:WholeProgramOptimization=PGInstrument 
```

请注意，在我的机器上，可以在此处找到 MSBuild `C:\Program Files (x86)\MSBuild\12.0\Bin\msbuild.exe`：. 参数的顺序非常重要。如果您的项目放在 /p 选项之后，它可能会覆盖它们。

应该已经在您的输出目录中创建了一个 pgd 文件。稍后您将需要它的路径。

**然后你需要检测程序：**

```
Letter:\path\OutPutDir\YourProject.exe 
```

在这一步中，显然您需要添加参数来为您的程序提供所需的数据。如果您的程序抱怨无法访问 pgort120.dll，您可以在脚本中添加如下一行：`set PATH=%PATH%;C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\amd64`

**最后，您可以构建程序的优化版本：**

```
msbuild.exe
    /t:LibLinkOnly "Letter:\path\YourProject.vcxproj"
    /p:Configuration=Release
    /p:Platform=x64
    /p:WholeProgramOptimization=PGOptimize
    /p:LinkTimeCodeGeneration=PGOptimization
    /p:ProfileGuidedDatabase="Letter:\path\OutPutDir\YourProject.pgd" 
```

这里需要用到第一步的pgd文件的地址。请注意，目标是 LibLinkOnly，因为不需要重新编译所有内容。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-07T17:41:14.050

基于 Arnaud 的回答，如果没有它，我永远不会想到这一点，还有其他有用的设置。在我的解决方案中，我只想使用 PGO 构建 20 多个项目中的一个，这需要额外的标志来防止构建所有引用的项目：

```
/p:BuildProjectReferences=false 
```

使用它来停止 Rebuild 目标正在构建的目标项目所引用的项目。您需要将其添加到 /t:Rebuild 命令以及从 VS 16.8.0 开始的 /t:LibLinkOnly 命令。

在 VS2019 中，您会发现 pgort140.dll 埋在：Microsoft Visual Studio\2019\Professional\VC\Tools\MSVC\14.21.27702\bin\HostxNN\xNN 文件夹中，其中 xNN 是 x86 或 x64 视情况而定。

在解决方案的情况下，您可能有一个取决于解决方案设置的 $(OutDir) 输出位置，但是当您构建一个单独的项目时最终会出现在错误的位置，因此您可能都需要告诉项目输出所在的文件：

```
/p:OutDir="path to output" 
```

就我而言，解决方案文件包含许多项目，并且我需要使用 PGO 运行一个，我最终得到了一个批处理文件（见下文）。在这种情况下，在顶层我有一个解决方案文件 MyApp.sln，其中包含子文件夹中的许多子项目。我想要的一个叫做 subproj ，它位于 subprob 文件夹中，该文件夹中有一个名为 subproj.vcxproj 的项目文件。每个子项目生成一个 DLL，并且 subproj 对其他子项目存在依赖关系。批处理文件的要点如下：

```
REM Get the folder we are running out of, assumed to hold the solution file
SET parent=%~dp0

REM Set PLATFORM=x64, TOOLS=HOSTx64\x64 for 64-bits
SET PLATFORM=Win32
SET TOOLS=Hostx86\x86

ECHO Build %PLATFORM% Release of MyApp with PGO of the subprog project
REM Expanding Program Files (x86) causes problems so use PROGRA~2
SET VSPATH=C:\PROGRA~2\Microsoft Visual Studio\2019\Professional
REM Value for VS 16.?.? = \14.21.27702
REM Value for VS 16.3.2 = \14.22.27905\bin
REM Value for VS 16.3.3 = \14.23.28105\bin
REM Value for VS 16.4.0 = \14.24.28314\bin
REM Value for VS 16.5.0 = \14.25.28610
REM Value for VS 16.6.0 = \14.26.28801
REM Value for VS 16.7.0 = \14.27.29110
REM Value for VS 16.8.0 = \14.28.29333
SET VSTOOLS=%VSPATH%\VC\Tools\MSVC\14.21.278.29333\bin
if not exist "%VSTOOLS%" (
ECHO %VSTOOLS% Was not found. This is probably due to a new release. Please
ECHO find the new location and correct this batch file:
ECHO %parent%%me%.bat
exit /b 1
)

REM Set tools path (needed to locate the pgoNnn.dll used for PGO)
set PATH=%PATH%;%VSTOOLS%\%TOOLS%

REM MSB is the path to the MSBuild.exe command
SET MSB="%VSPATH%\MSBuild\Current\Bin\MSBuild.exe"

REM OPT is the common options shared by everything
REM /v: n=normal, m=minimal, q=quiet
SET OPT=/v:m /p:Configuration=Release /p:Platform=%PLATFORM%

REM Set where our output must go. VS likes it to end with \ for $(OutDir)
SET OUTDIR=%parent%%PLATFORM%\Release\

REM It is easier to build everything and rebuild subproj that build all the
REM sub-projects separately.
echo Build the entire solution in the Release build for the desired platform.
%MSB% MyApp.sln %OPT%

echo Now instrument the subproj
%MSB% /t:Rebuild "subproj\subproj.vcxproj" %OPT% /p:OutDir=%OUTDIR% /p:WholeProgramOptimization=PGInstrument /p:BuildProjectReferences=false

echo Run MyApp to exercise the subproj DLL as needed to generate the PGO database
%parent%%PLATFORM%\Release\MyApp.exe arguments as required...

echo Now build PGO optimized version of subproj
%MSB% /t:LibLinkOnly "subproj\subproj.vcxproj" %OPT% /p:WholeProgramOptimization=PGOptimize /p:LinkTimeCodeGeneration=PGOptimization /p:OutDir=%OUTDIR% /p:ProfileGuidedDatabase="%OUTDIR%compiler.pgd"  /p:BuildProjectReferences=false 
```

# java - 如何在 eclipse 中映射一个键来运行项目运行配置？

> ID：13493308
> 
> 赞同：2
> 
> 时间：2012-11-21T12:28:56.510
> 
> 标签：java, eclipse, scala, run-configuration

我用新的运行配置创建了一个新的 eclipse 项目。此配置在运行配置的下拉菜单中可见，并且上面有一个 1。如何分配一个密钥来运行这个配置？

我遇到的问题是，我使用 eclipse 编写 scala，并且热键“Run as Scala”只有在我的编辑器打开了主类 (WTF) 的文件时才有效。在所有其他文件上，我收到错误消息“编辑器不包含主要类型”，没有任何进一步的信息。所以我创建了一个运行配置，我在其中指定了 Main 文件，但现在我不知道如何在不触摸鼠标的情况下启动此配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:22:11.130

效果最好 Alt+R 然后 T 然后 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:25:08.073

运行某些东西的热键是 Ctrl-F11。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-30T14:28:22.757

请参阅[在 Eclipse IDE 中选择运行配置的快捷方式，](https://stackoverflow.com/questions/28926894/shortcut-for-selecting-run-configuration-in-eclipse-ide)它说使用 ALT+R、N，然后键入一个名称，它会为我显示运行配置。

**最佳选择：**

*   通过 Window > Preferences, General > Keys 分配（绑定）快捷方式

*   选择的命令是**“运行...”**

（我添加了这个答案，因为对我来说接受的答案显示运行菜单，然后 T 代表终止，与运行配置无关）

# android - 如何从android应用程序解析jsp文件

> ID：13493312
> 
> 赞同：0
> 
> 时间：2012-11-21T12:29:04.237
> 
> 标签：android, parsing, jsp, html-parsing

> **可能重复：**
> [Android 中的 HTML 解析](https://stackoverflow.com/questions/4831513/html-parsing-in-android)

我是编程新手，希望有人能教我！我想开发一个可以从我大学的服务器上查看时间表的 Android 应用程序。

这是服务器端： [http ://webapps.apiit.edu.my/schedule/intakeview_intake.jsp?Intake1=UC1F1205IT&Submit=Submit&Week=](http://webapps.apiit.edu.my/schedule/intakeview_intake.jsp?Intake1=UC1F1205IT&Submit=Submit&Week=)

UC1F1205IT是我的录取码，不同的录取码会有不同的时间表。

现在我应该如何解析返回文件？我怎样才能将不同的信息放到不同的块中？谢谢教导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:49:09.427

这是一个类似的问题 [Android HTML Parser Example](https://stackoverflow.com/questions/5867746/android-html-parser-example)。 [什么是适合 Android 的 html 解析器？](https://stackoverflow.com/questions/2167611/whats-a-suitable-html-parser-for-android)

你可以使用像 jsoup 这样的 java html 解析器。[http://jsoup.org/](http://jsoup.org/)

# heroku - 是否可以以编程方式将工作分配给 Rails 中的 Heroku 工作人员？

> ID：13493317
> 
> 赞同：2
> 
> 时间：2012-11-21T12:29:18.497
> 
> 标签：heroku, variable-assignment, manual, worker

我知道我们可以在 heroku 工作进程中手动运行 rake 任务。但是，如果我有 3 个工人并且我想以编程方式在这些工人之间分配任务怎么办。

# android - 将视图从一个 GroPoint 移动到另一个

> ID：13493318
> 
> 赞同：0
> 
> 时间：2012-11-21T12:29:17.630
> 
> 标签：android, animation, view, android-mapview

我的 MapView 包含由 addView() 和 LayoutParams 添加的子视图：

```
new MapView.LayoutParams(MapView.LayoutParams.WRAP_CONTENT, MapView.LayoutParams.WRAP_CONTENT, geoPoint, 0, 0, MapView.LayoutParams.BOTTOM | MapView.LayoutParams.LEFT) 
```

我可以从屏幕上获得我的观点：

```
Point p1 = mapView.getProjection().toPixels(geoPoint, null); 
```

当 geoPoint 更改时，我删除 mapView 的所有子项，然后使用新的 LayoutParams（基于新的 geoPoint）添加我的视图并在屏幕上获取新点：

```
Point p2 = mapView.getProjection().toPixels(newGeoPoint, null); 
```

现在我需要将视图从 p1 转换为 p2，我尝试：

```
Animation animation = new TranslateAnimation(
                Animation.ABSOLUTE, p1.x, 
                Animation.ABSOLUTE, p2.x, 
                Animation.ABSOLUTE, p1.y, 
                Animation.ABSOLUTE, p2.y);
animation.setDuration(1500);
myView.startAnimation(animation); 
```

动画播放但从错误的点到错误的点。

如何制作从 p1 到 p2 的正确翻译动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:36:26.217

尝试这个：

```
Animation animation = new TranslateAnimation(0, p1.x - p2.x, 0, p1.y - p2.y);
animation.setDuration(1500);
myView.startAnimation(animation); 
```

最后不要忘记设置你的点的新位置，否则动画完成后它会回到原来的位置。

# c# - 石英消费时如何将连接字符串传递给类库

> ID：13493324
> 
> 赞同：0
> 
> 时间：2012-11-21T12:29:47.257
> 
> 标签：c#, connection-string

我编写了一个石英服务，它被部署为 Windows 服务。该服务使用一个类库，该类库从文件系统中读取一些文件并转储到数据库中。当我从控制台应用程序测试这个类库时，它工作正常。但是当它开始被石英消耗时，我收到错误，因为它无法找到数据库连接的连接字符串。我应该如何将连接字符串传递给我的类库。我将它保存在它的 app.config 中。但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:44:54.040

在某一时刻，应用程序域只能使用*一个*配置文件中的设置，所有其他的都被忽略。

当您运行控制台应用程序时，您的 app.config 是域中唯一的配置文件，并且被使用。但是，当您开始使用 Quartz 时，该库提供了自己的配置文件，而您自己的 app.config 将被忽略。

解决方案是将连接字符串放在 Quartz 配置文件中。

# .net - IIS 7.5 中托管的站点预编译问题

> ID：13493326
> 
> 赞同：2
> 
> 时间：2012-11-21T12:29:52.587
> 
> 标签：.net, compilation, iis-7.5

我正在尝试预编译托管在 IIS 7.5 中的 .NET 站点。该站点是在 .net 中构建的，并且还指包含文件。对于包含文件，我们创建了单独的 .inc 文件，这些文件被称为 from.cs 文件。现在，当我们尝试通过 aspnet_compiler 编译站点时，我们收到以下错误消息。有什么帮助吗？

错误 ASPRUNTIME：`Failed to map the path '/Includes/usercontext.inc'.`

```
[InvalidOperationException]: Failed to map the path '/Includes/usercontext.inc'.
   at System.Web.Hosting.HostingEnvironment.MapPathActual(VirtualPath virtualPath, Boolean permitNull)
   at System.Web.Hosting.HostingEnvironment.MapPathInternal(VirtualPath virtualPath)
   at System.Web.Hosting.MapPathBasedVirtualFile.EnsureFileInfoObtained()
   at System.Web.Hosting.MapPathBasedVirtualFile.Open()
   at System.Web.Hosting.VirtualPathProvider.OpenFile(String virtualPath)
   at System.Web.UI.DependencyParser.ParseFile(String physicalPath, VirtualPath virtualPath)
   at System.Web.UI.DependencyParser.ProcessServerInclude(Match match)
   at System.Web.UI.DependencyParser.ParseString(String text)
   at System.Web.UI.DependencyParser.ParseFile(String physicalPath, VirtualPath virtualPath)
   at System.Web.UI.DependencyParser.GetVirtualPathDependencies()
   at System.Web.Compilation.TemplateControlBuildProvider.GetBuildResultVirtualPathDependencies()
   at System.Web.Compilation.WebDirectoryBatchCompiler.GetBuildResultDependencies()
   at System.Web.Compilation.WebDirectoryBatchCompiler.Process()
   at System.Web.Compilation.BuildManager.BatchCompileWebDirectoryInternal(VirtualDirectory vdir, Boolean ignoreErrors)
   at System.Web.Compilation.BuildManager.BatchCompileWebDirectory(VirtualDirectory vdir, VirtualPath virtualDir, Boolean ignoreErrors)
   at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
   at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
   at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
   at System.Web.Compilation.BuildManager.PrecompileAppInternal(VirtualPath startingVirtualDir)
   at System.Web.Compilation.BuildManager.PrecompileApp(VirtualPath startingVirtualDir)
   at System.Web.Compilation.BuildManager.PrecompileApp(ClientBuildManagerCallback callback)
   at System.Web.Compilation.BuildManagerHost.PrecompileApp(ClientBuildManagerCallback callback)
   at System.Web.Compilation.BuildManagerHost.PrecompileApp(ClientBuildManagerCallback callback)
   at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback, Boolean forceCleanBuild)
   at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback)
   at System.Web.Compilation.Precompiler.Main(String[] args) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:22:13.180

早些时候我试图用

```
aspnet_compiler.exe -v<virtual path> -p<physical path> -errorstack >><filename> 
```

但是当我使用以下命令对其进行更改时，这个问题得到了解决。但我不知道背后的原因是什么。

```
aspnet_compiler.exe -m <metabase path> -errorstack >><filename> 
```

# vba - 如何将visio外部数据导出到excel

> ID：13493327
> 
> 赞同：0
> 
> 时间：2012-11-21T12:29:53.213
> 
> 标签：vba, excel, export, visio

我有一个旧的 VISIO 文件，上面有外部数据。数据的源文件不再存在。我试图将数据从 visio 复制并粘贴到 excel 中，但没有成功。

然后我尝试通过VBA访问数据，但我不明白我得到的结果：（行数是正确的，但数据有时好有时不好）

```
Sub test()
    Dim i, j As Integer
    Dim r As Variant
    Dim a() As Variant
    Dim rowSTR As String
    Dim vsoDataRecordset As Visio.DataRecordset
    For i = 1 To Visio.ActiveDocument.DataRecordsets.Count
        rowSTR = ""
        a = Visio.ActiveDocument.DataRecordsets(i).GetRowData(1)
        For j = 0 To UBound(a) - 1
            rowSTR = rowSTR & vbTab & a(j)
        Next j
        Debug.Print i & ")" & rowSTR
    Next i
End Sub 
```

您知道如何将这些数据从 visio 获取到 excel 吗？

谢谢阿萨夫

更新：添加了源代码和输出：我重新检查并不知道数据来自哪里...... ![在此处输入图像描述](../Images/a0fb85e66dce94271e0c20302586e032.png)

![在此处输入图像描述](../Images/04ef4d4b136d68140f701a6c23550b2b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-11T13:04:32.557

这篇文章很旧，但我遇到了同样的问题并有解决方案。在您发布的代码中，您引用每个`DataRecordSet`并抓取第一行，而不是找到正确的代码并抓取所有行。

我们还必须避免使用`i`从 0 计数到`ExternalData.Count`; 行 ID 可以跳过数字，因此您必须使用正确的真实 ID `DataRecordset`。

以下代码并不完全漂亮，但它可以工作。请注意，`linked`布尔值并不是数据集的真正一部分；但是，它相当于外部数据窗口中的“链”图标。

这是为 Visio 2013 编写的，但我相信它也适用于其他版本。`%`运行后，您可以使用分隔符将文件导入 Excel 。

```
 Sub WriteDataSourceToFile()

    ' REQUIRES: Microsoft Scripting Runtime (C:\Windows\SysWOW64\scrrun.dll)

    ' Below we'll intentionally cause array length errors to test each Row
    On Error Resume Next

    ' Use this to put the drawing name in the first column of each row
    Dim DrawingLabel As String
    DrawingLabel = "DRAWING_NAME_HERE"

    ' Used for getting the External Data from a specific window
    Dim PagObj As Visio.Page
    Dim vsoDataRecordset As Visio.DataRecordset

    ' Used for grabbing all shapes with a link to the current Row
    Dim shapeIDs() As Long
    Dim testLong As Long

    ' Currently only using the above as a test (linked or not linked)
    Dim linked As Boolean

    ' Stores all Row IDs from the DataRecordset and loops through each
    Dim dataRowIDs() As Long
    Dim dataRowID As Variant

    ' Stores the actual Row information and appends to rowSTR for the delimited line
    Dim rowData() As Variant
    Dim rowDataInt As Integer
    Dim rowSTR As String

    ' Used for text file output
    Dim fso As FileSystemObject
    Set fso = New FileSystemObject

    ' Create a TextStream and point it at a unique filename (based on the active document)
    Dim stream As TextStream
    Set stream = fso.CreateTextFile("C:\Users\Public\Documents\GEN_" & ActiveDocument.Name & ".txt", True)

    ' Look through each window and find External Data (matches 2044)
    For Each win In Visio.ActiveWindow.Windows
        If win.ID = 2044 Then
            Set vsoDataRecordset = win.SelectedDataRecordset
            Exit For
        End If
    Next win

    ' Get each Row ID from the DataRecordSet
    dataRowIDs = vsoDataRecordset.GetDataRowIDs("")

    ' Use each Row ID as a reference
    For Each dataRowID In dataRowIDs
        linked = False

        ' Look through all pages and attempt to get Shape IDs linked to the active Row
        For Each PagObj In ActiveDocument.Pages
            PagObj.GetShapesLinkedToDataRow vsoDataRecordset.ID, dataRowID, shapeIDs

            ' Attempting to reference a 0-length array will throw an error here
            testLong = UBound(shapeIDs)
            If Err.Number Then
                Err.Clear
            Else
                ' If it didn't throw an error referencing the array, there's at least one linked shape
                linked = True
                Exit For
            End If
        Next PagObj

        ' Build the output
        rowSTR = linked

        ' Get the array of Row Data
        rowData = vsoDataRecordset.GetRowData(dataRowID)

        ' Go through each column and append the value to the output string
        For rowDataInt = 0 To UBound(rowData)
            ' Using % as a delimeter to prevent text with commas causing a separated column
            rowSTR = rowSTR & "%" & rowData(rowDataInt)
        Next rowDataInt

        'Output the string to the file, putting the label at the beggining of the row
        stream.WriteLine DrawingLabel & "%" & rowSTR
    Next dataRowID

    stream.Close
End Sub 
```

# asp.net - 当我尝试执行此 sql 查询时，此代码给了我一个异常“对象引用未设置为对象的实例”

> ID：13493328
> 
> 赞同：0
> 
> 时间：2012-11-21T12:29:57.980
> 
> 标签：asp.net, sql

我动态创建我需要的控件这
是代码 

```
public void cmdButton1_OnClick(object sender, EventArgs e)
{

        Label myLabel = new Label();
        myLabel.ID = "lblNameL" + i.ToString();
        myLabel.Text = "Трите имена на латиница ";
        TextBox myTextBox1 = new TextBox();
        myTextBox1.ID = "txtNameL" + i.ToString();
        Page.FindControl("form1").Controls.Add(myLabel);
        Page.FindControl("form1").Controls.Add(myTextBox1);

        Label mylabel2 = new Label();
        mylabel2.ID = "lblNameK" + i.ToString();
        mylabel2.Text = "Трите имена на кирилица";
        TextBox myTextBox2 = new TextBox();
        myTextBox2.ID = "txtNameK" + i.ToString();
        Page.FindControl("form1").Controls.Add(mylabel2);
        Page.FindControl("form1").Controls.Add(myTextBox2);
} 
```

在这里我尝试执行 sql 查询，以便我可以将写入文本框的内容`txbNameK`插入到表`Tourist`中，异常在行中`cmd.Parameters.add`

```
public void cmdInsert_OnClick(object sender, EventArgs e)
{

        TextBox tx888 = (TextBox)FindControl("txtNameK" + i.ToString());
        TextBox tx99 = (TextBox)FindControl("txtNameL" + i.ToString());

        string insertSQL = "INSERT INTO Tourist ( Name_kir, Name_lat) VALUES (@Name_kir, @Name_lat, )";

        string connectionString = "Data Source = localhost\\SQLExpress;Initial Catalog=Pubs;Integrated Security=SSPI";
        SqlConnection con = new SqlConnection(connectionString);
        SqlCommand cmd = new SqlCommand(insertSQL, con);
        cmd.Parameters.AddWithValue("@Name_kir",tx888);
        cmd.Parameters.AddWithValue("@Name_lat", tx99);

        int added = 0;
        try
        {
            con.Open();
            added = cmd.ExecuteNonQuery();
            lblResult.Text = added.ToString() + "records added";

        }
        catch (Exception ex)
        {
            lblResult.Text = ex.Message;
        }
        finally
        {
            con.Close();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:15:11.670

两件事情：

```
文本框 tx888 = (TextBox)FindControl("txtNameK" + i.ToString());
文本框 tx99 = (TextBox)FindControl("txtNameL" + i.ToString());
如果（tx888 == 空）
    返回;
如果（tx99 == 空）
    返回;

```

上面将检查您的 texbox 是否为 null 另一件事是：

```
cmd.Parameters.AddWithValue("@Name_kir",tx888.Text);
cmd.Parameters.AddWithValue("@Name_lat", tx99.Text);

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:23:22.187

Object reference exception always occurs whenever null object is trying to access any value. eg..

Code below will work fine.

```
Exception ex = new Exception()
Textbox1.Text = ex.Message; 
```

Code below will throw an exception

```
Exception ex= null;    //one and the same thing

Textbox1.Text = ex.Message;     //Object reference not set....exception will be raised since ex is null 
```

This is what is happening in your code. Try to place a breakpoint and debug it. For best practice always check for an object for null as suggested by Prashant.

# python - 加载文件，将其发布到文本框

> ID：13493333
> 
> 赞同：0
> 
> 时间：2012-11-21T12:30:12.650
> 
> 标签：python, user-interface, wxpython

我遇到了一个问题，我在 wxpython 中有这个 GUI，我想在其中加载一个文件，然后我想在 textCtrl 中查看已经放在面板上的文本文件名称这是我的代码

```
def __init__(self, parent):
    wx.Frame.__init__(self, parent, wx.NewId(), "Load PDB",size=(240,200))
    panel=wx.Panel(self)
    pdb = wx.Button(panel, label="Browse...", pos=(170,10), size=(53,25))
    self.Bind(wx.EVT_BUTTON,self.getPdb,pdb)
    wx.StaticText(panel,-1,"Load PDB", (5,15))
    hey=wx.TextCtrl(panel,-1,"",pos=(60,10), size=(100,25))

def getPdb(self,event):
      dlg = wx.FileDialog(self, "Choose a file", os.getcwd(), "", "*.*", wx.OPEN)
      if dlg.ShowModal() == wx.ID_OK:
               path = dlg.GetPath()
               mypath=os.path.basename(path)
      dlg.Destroy() 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:18:53.650

正如其中一条评论所提到的，您必须在**init**函数中指定一个名称作为实例变量，因此它可以在其他范围内使用。所以先这样做：

```
self.hey=wx.TextCtrl(panel,-1,"",pos=(60,10), size=(100,25)) 
```

现在我们可以在您的第二种方法 getPdb 中使用 self.hey：

```
def getPdb(self,event):
    dlg = wx.FileDialog(self, "Choose a file", os.getcwd(), "", "*.*", wx.OPEN)
    mypath = ''
    if dlg.ShowModal() == wx.ID_OK:
        path = dlg.GetPath()
        mypath=os.path.basename(path)
    dlg.Destroy()

    if mypath:
        self.hey.Clear()
        self.hey.AppendText(mypath)
    return 
```

由于您的 textctrl 的高度，我假设您想先清除其中的内容。如果这不是您想要的，则删除 self.hey.Clear() 行，将您想要的任何分隔符 (:, ;, \n) 添加到 mypath，然后附加它。

# spring - 指定自定义身份验证提供程序

> ID：13493334
> 
> 赞同：0
> 
> 时间：2012-11-21T12:30:24.007
> 
> 标签：spring, spring-security

我正在使用 spring security 进行用户身份验证。

我创建了一个自定义身份验证提供程序和 UserDetails 接口的实现。

以下是 application-context.xml

```
<beans:bean id="authenticationProvider" class="com.utils.UserAuthenticationProvider" >
</beans:bean>

<beans:bean id="passwordEncoder" class="com.utils.PasswordUtil"/>
<beans:bean id="saltSource" class="org.springframework.security.authentication.dao.ReflectionSaltSource">
    <beans:property name="userPropertyToUse" value="lastChangeDate" />
</beans:bean>

<authentication-manager alias="authenticationManager" >
    <authentication-provider user-service-ref="userDetailsService" >
        <password-encoder ref="passwordEncoder">
             <salt-source ref="saltSource" />
        </password-encoder>
    </authentication-provider>
</authentication-manager>
<beans:bean id="userDetailsService" class="com.service.impl.UserDetailsServiceImpl" /> 
```

我无法将我的自定义身份验证提供程序链接到身份验证管理器标记。

我尝试使用“custom-authenitication-provider”标签，但似乎这个标签在 Spring 3 以后不存在。

请帮忙。让我知道是否需要任何进一步的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:43:14.227

您可以通过以下方式尝试。

```
<bean id="authenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter"
        p:authenticationManager-ref="customAuthenticationManager"
        p:authenticationFailureHandler-ref="customAuthenticationFailureHandler"
        p:authenticationSuccessHandler-ref="customAuthenticationSuccessHandler" 
                p:sessionAuthenticationStrategy-ref="sas"/>

    <bean id="customAuthenticationManager" class="com.xxx.yyy.zzz.security.filters.CustomAuthenticationFilter">
        <constructor-arg type="org.hibernate.SessionFactory" ref="sessionFactory"/>
    </bean> 
```

**- 编辑 -**

如果您只想使用自定义身份验证提供程序，您可以通过以下方式指定它。

```
<security:authentication-manager>
        <security:authentication-provider ref="authenticationProvider">
        </security:authentication-provider>
    </security:authentication-manager> 
```

希望这对您有所帮助。干杯。

# php - php mcrypt：为什么要在字符串输入上添加空格？

> ID：13493335
> 
> 赞同：0
> 
> 时间：2012-11-21T12:30:26.800
> 
> 标签：php, spaces, mcrypt

几个网站上有一个 mcrypt 片段：

[https://stackoverflow.com/a/11538728/408872](https://stackoverflow.com/a/11538728/408872)

[http://www.binrand.com/post/3810303-mcrypt-md5-how-to-create-an-online-encryption-decryption-web-page.html](http://www.binrand.com/post/3810303-mcrypt-md5-how-to-create-an-online-encryption-decryption-web-page.html)

[http://www.techbees.org/best-way-to-use-php-to-encrypt-and-decrypt/](http://www.techbees.org/best-way-to-use-php-to-encrypt-and-decrypt/)

```
$key = 'password to (en/de)crypt';
$string = ' string to be encrypted '; // note the spaces

$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $string, MCRYPT_MODE_CBC, md5(md5($key))));
$decrypted = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($key), base64_decode($encrypted), MCRYPT_MODE_CBC, md5(md5($key))), "\0");

echo 'Encrypted:' . "\n";
var_dump($encrypted);

echo "\n";

echo 'Decrypted:' . "\n";
var_dump($decrypted); // spaces are preserved 
```

任何人都知道为什么在 $string 上引入了额外的空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:37:04.117

您提供的所有资源都使用几乎完全相同的代码。我只能假设他们从彼此那里窃取了代码。所以这不是几个站点这样做，很可能是一个站点，而其他不真正了解发生了什么的人只是继承了这个。

在加密之前没有**充分的**理由在字符串中添加额外的空格，它不会以任何方式增强密码学的强度，也不会使其“更好”。

我的猜测是，在这些示例中，已经完成了类似的功能`trim`不会影响加密流的**内容。**（我个人不明白为什么需要证明这一点——这对我来说似乎完全合乎逻辑）

如果您正在接受 base64 编码的加密数据（可能来自表单提交），您很可能会修剪提交的数据以删除用户留在其中的任何谷壳，我怀疑某处有人担心修剪加密数据会破坏原始明文。

**编辑：**

请注意，如果此字符串不是 base64 编码的，则完全有可能损坏密文。由于密文将以二进制形式表示，因此它的末尾可能会有空白字符，这些字符可能会被修剪掉，从而导致损坏。

**编辑2：**

`md5(key)`对于密钥，`md5(md5(key))`对于初始化向量都是非常***糟糕***的实现方式。

首先，AES 256 应该有一个 256 位的密钥。如果要使用密码，请使用`hash('sha256', $passphrase, true)`. final`true`使它以二进制而不是十六进制编码的形式返回结果，这很重要，因此您实际上可以在密钥中获得尽可能多的熵。

其次，初始化向量永远*不应该被重复使用*。`md5(md5(key))`对于相同的键，将始终产生相同的值。如果攻击者设法获得多个密文，这会大大削弱您的加密。

# drupal - 在drupal 7中下载普通文件？

> ID：13493338
> 
> 赞同：0
> 
> 时间：2012-11-21T12:30:42.753
> 
> 标签：drupal, drupal-7, drupal-files

我想通过'a href'标签获取我在页面中添加的简单文件的下载计数。

文件为pdf文件。

我已经尝试过下载计数模块。但没有结果。

文件由模板之一中的 href 标记添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:49:50.730

1.  创建一个数据库表来存储数据（您可能只需要 2 列`fid`）`download_count`。

2.  确保您的文件保存为`private files`.

3.  创建一个自定义模块并实现[hook_file_download](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_file_download/7) ()，在这个钩子实现中编写代码来添加/更新文件下载计数。

# python - Matplotlib 更新滑块小部件范围

> ID：13493340
> 
> 赞同：5
> 
> 时间：2012-11-21T12:30:45.317
> 
> 标签：python, widget, matplotlib, slider

我正在尝试编写一小段代码，使用 matplotlib 以交互方式删除图像系列中的选定切片。我创建了一个“删除”按钮，它存储了在选择“更新”按钮时要删除的许多索引。但是，我目前无法重置滑块小部件的范围，即从 valmax 中删除已删除切片的数量。这个问题的pythonic解决方案是什么？

这是我的代码：

```
import dicom
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.widgets import Slider, Button

frame = 0
#store indices of slices to be deleted
delete_list = []

def main():

    data = np.random.rand(16,256,256)
    nframes = data.shape[0]

    raw_dicom_stack = []
    for x in range (nframes):
        raw_dicom_stack.append(data[x,:,:])

    #yframe = 0

    # Visualize it
    viewer = VolumeViewer(raw_dicom_stack, nframes)
    viewer.show()

class VolumeViewer(object):
    def __init__(self, raw_dicom_stack, nframes):

        global delete_list

        self.raw_dicom_stack = raw_dicom_stack
        self.nframes = nframes
        self.delete_list = delete_list

        # Setup the axes.
        self.fig, self.ax = plt.subplots()
        self.slider_ax = self.fig.add_axes([0.2, 0.03, 0.65, 0.03])
        self.delete_ax = self.fig.add_axes([0.85,0.84,0.1,0.04])
        self.update_ax = self.fig.add_axes([0.85,0.78,0.1,0.04])
        self.register_ax = self.fig.add_axes([0.85,0.72,0.1,0.04])
        self.add_ax = self.fig.add_axes([0.85,0.66,0.1,0.04])

        # Make the slider
        self.slider = Slider(self.slider_ax, 'Frame', 1, self.nframes, 
                            valinit=1, valfmt='%1d/{}'.format(self.nframes))
        self.slider.on_changed(self.update)

        #Make the buttons
        self.del_button = Button(self.delete_ax, 'Delete')
        self.del_button.on_clicked(self.delete)

        self.upd_button = Button(self.update_ax, 'Update')
        self.upd_button.on_clicked(self.img_update)

        self.reg_button = Button(self.register_ax, 'Register')

        self.add_button = Button(self.add_ax, "Add")

        # Plot the first slice of the image
        self.im = self.ax.imshow(np.array(raw_dicom_stack[0]))

    def update(self, value):
        global frame
        frame = int(np.round(value - 1))

        # Update the image data
        dat = np.array(self.raw_dicom_stack[frame])
        self.im.set_data(dat)

        # Reset the image scaling bounds (this may not be necessary for you)
        self.im.set_clim([dat.min(), dat.max()])

        # Redraw the plot
        self.fig.canvas.draw()

    def delete(self,event):
        global frame
        global delete_list

        delete_list.append(frame)
        print 'Frame %s has been added to list of slices to be deleted' %str(frame+1)
        print 'Please click update to delete these slices and show updated image series \n'

        #Remove duplicates from delete list

    def img_update(self,event):
        #function deletes image stacks and updates viewer
        global delete_list

        #Remove duplicates from list and sort into numerical order
        delete_list = list(set(delete_list))
        delete_list.sort()

        #Make sure delete_list is not empty
        if not delete_list:
            print "Delete list is empty, no slices to delete"
        #Loop through delete list in reverse numerical order and remove slices from series
        else:
            for i in reversed(delete_list):
                self.raw_dicom_stack.pop(i)
                print 'Slice %i removed from dicom series \n' %(i+1)

        #Can now remove contents from delete_list
        del delete_list[:]
        #Update slider range
        self.nframes =  len(self.raw_dicom_stack)

    def show(self):
        plt.show()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-11-28T17:37:22.697

为了更新滑块范围，您可以直接设置它的最小值和最大值，

```
slider.valmin = 3
slider.valmax = 7 
```

为了反映滑块轴的这种变化，您需要设置轴的限制，

```
slider.ax.set_xlim(slider.valmin,slider.valmax) 
```

一个完整的示例，输入任何数字会将`valmin`滑块的值更改为该值。

```
import matplotlib.pyplot as plt
import matplotlib.widgets

fig, (ax,sliderax) = plt.subplots(nrows=2,gridspec_kw=dict(height_ratios=[1,.05]))

ax.plot(range(11))
ax.set_xlim(5,None)
ax.set_title("Type number to set minimum slider value")
def update_range(val):
    ax.set_xlim(val,None)

def update_slider(evt):
    print(evt.key)
    try:
        val = int(evt.key)
        slider.valmin = val
        slider.ax.set_xlim(slider.valmin,None)
        if val > slider.val:
            slider.val=val
            update_range(val)
        fig.canvas.draw_idle()
    except:
        pass

slider=matplotlib.widgets.Slider(sliderax,"xlim",0,10,5)
slider.on_changed(update_range)

fig.canvas.mpl_connect('key_press_event', update_slider)

plt.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T14:53:17.527

看起来滑块没有更新范围（[api](http://matplotlib.org/api/widgets_api.html#matplotlib.widgets.Slider)）的方法。我建议将滑块的范围设置为 [0,1] 并做

```
frame = int(self.nframes * value) 
```

在一些相关的注释中，我会将`frame` ~~实例变量设为~~数据属性而不是全局变量（[教程](http://docs.python.org/2/tutorial/classes.html#instance-objects)）。

# android - 如何仅将应用程序日志写入android中的外部文件

> ID：13493344
> 
> 赞同：4
> 
> 时间：2012-11-21T12:30:49.187
> 
> 标签：android

我正在尝试将我的应用程序日志写入外部文件。我的日志就像 Log.e("Offset",""+mOffset); 我正在使用以下代码：

```
public String writeLogToFile()
{
    try 
        {
            Process process = Runtime.getRuntime().exec("logcat -d");
            BufferedReader bufferedReader = new BufferedReader( new InputStreamReader(process.getInputStream()));
            StringBuilder log=new StringBuilder();
            String line;
            while ((line = bufferedReader.readLine()) != null) 
                {
                    log.append(line);
                }
            bufferedReader.close();
            return log.toString();
        } 
    catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }
} 
```

它还打印系统级别的所有日志。是的，我放了 -d 所以它正在打印，但是如果我放 -e 或 -i 它不会写入文件。我只想写`Log.e("Offset",""+mOffset)`. 我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:51:32.483

这是读取当前应用程序日志的方法。为了过滤日志，我获取进程 ID (pid) 并将其与 logcat 输出的每一行进行比较。

在 logcat 的参数中，我指定读取最后 200 行并随时间显示日志。

```
public String writeLogToFile() {
    StringBuilder logs = new StringBuilder();
    int pid = android.os.Process.myPid();
    String pidPattern = String.format("%d):", pid);
    try {
        Process process = new ProcessBuilder()
                .command("logcat", "-t", "200", "-v", "time")
                .redirectErrorStream(true)
                .start();

        InputStream in = null;

        try {
            in = process.getInputStream();

            BufferedReader reader = new BufferedReader(new InputStreamReader(in));

            String line;
            while ((line = reader.readLine()) != null) {
                if (line.contains(pidPattern)) {
                    logs.append(line).append("\n");
                }
            }
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    Log.e(TAG, "Cannot close input stream", e);
                }
            }
        }
    } catch (IOException e) {
        Log.e(TAG, "Cannot read logs", e);
    }

    return log.toString();
} 
```

# java - 在 Hibernate 中是否可以进行排他性析取？

> ID：13493345
> 
> 赞同：1
> 
> 时间：2012-11-21T12:30:51.160
> 
> 标签：java, hibernate, criteria, restrictions

我想从数据库中获取一些行，并且我希望 Hibernate`OR`在第一部分返回一些数据时停止检查条件的第二部分。这类似于排他性析取。我的代码如下：

```
Calendar c = Calendar.getInstance();
    long now = c.getTimeInMillis();

Restrictions.or(
    Restrictions.and(
        Restrictions.lt("start", now),
        Restrictions.gt("end", now)),
    Restrictions.and(
        Restrictions.gt("start", now),
        Restrictions.lt("end", now))) 
```

它返回满足条件的第一部分及其第二部分的行。我怎样才能实现这样的目标？

# java - Jacoco Mvn 插件未通过所有单元测试

> ID：13493351
> 
> 赞同：1
> 
> 时间：2012-11-21T12:31:15.963
> 
> 标签：java, maven, jacoco

我在这里感到困惑，我正在运行 maven 3、java 1.6 并配置了一个 maven 项目，一切正常，包括所有单元测试。现在我来添加 Jacoco 插件，这样配置

```
 <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <version>0.5.5.201112152213</version>
            <configuration>
                <destfile>${basedir}/target/coverage-reports/jacoco-unit.exec</destfile>
                <datafile>${basedir}/target/coverage-reports/jacoco-unit.exec</datafile>
            </configuration>
            <executions>
                <execution>
                    <id>jacoco-initialize</id>
                    <goals>
                        <goal>prepare-agent</goal>
                    </goals>
                </execution>
                <execution>
                    <id>jacoco-site</id>
                    <phase>package</phase>
                    <goals>
                        <goal>report</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

现在，当我尝试运行 mvn clean package 时，没有一个单元测试通过并且根本没有覆盖率报告。

谁能指出我哪里出错了？

提前致谢

# visual-studio - 有没有办法在 Visual Studio 2012 中使用 Visual Studio 2010 风格的 Pending Changes / Team Explorer？

> ID：13493352
> 
> 赞同：21
> 
> 时间：2012-11-21T12:31:32.460
> 
> 标签：visual-studio, visual-studio-2012, tfs

VS 2012 中的 Team Explorer / Pending Changes 太可怕了。

有没有办法恢复 VS 2010 Pending Changes 窗口？

即使是一个好的独立 TFS 客户端也可以。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T08:55:14.220

创建一个新的外部工具（工具 -> 外部工具）

**命令：** C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\tf.exe

**参数：**签到

**初始目录：** $(SolutionDir)

**使用未勾选的输出窗口**（如果打开，对话框似乎不会弹出）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-29T13:10:23.147

有一个名为 TeamPilgrim 的免费 3rd 方插件，它模仿 Visual Studio 2010 中旧的待定更改窗口。

![在此处输入图像描述](../Images/e34bc16c06d5c0a349d424de7a6a4c26.png)

它显然仍在开发中，但在微软（希望）解决 UserVoice 请求之前是一个合理的解决方案。

在此处下载和更多详细信息：

[http://visualstudiogallery.msdn.microsoft.com/79e9baa7-ea8b-4335-86ba-ae929bf67222](http://visualstudiogallery.msdn.microsoft.com/79e9baa7-ea8b-4335-86ba-ae929bf67222)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T19:22:49.850

Visual Studio 2012 解决方案资源管理器上有一个“待定更改”过滤器。虽然我宁愿有一个单独的窗口，但这比添加一个单独的命令要好得多。

[http://blogs.msdn.com/b/visualstudioalm/archive/2012/08/14/showing-files-with-pending-changes-or-files-that-are-open-in-visual-studio-2012-解决方案资源管理器.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/08/14/showing-files-with-pending-changes-or-files-that-are-open-in-visual-studio-2012-solution-explorer.aspx)

# c++ - 这个 constexpr 整数不是空指针常量吗？

> ID：13493353
> 
> 赞同：8
> 
> 时间：2012-11-21T12:31:32.687
> 
> 标签：c++, c++11, constexpr

考虑以下 C++11 程序及其在 GCC 4.7.2 中的结果：

```
int main()
{
   constexpr int i = 0;
   int* p = i;
}

// g++ -g -ggdb -Wall -Wextra -pedantic -std=c++11 t.cpp
// t.cpp: In function 'int main()':
// t.cpp:4:13: error: invalid conversion from 'int' to 'int*' [-fpermissive]
// t.cpp:4:9: warning: unused variable 'p' [-Wunused-variable] 
```

根据标准：

> `[C++11: 4.10/1]:`*空指针常量*是整数类型的整数常量表达式 (5.19) prvalue，其计算结果为零 [.. ]

5.19 是一团糟，我未能完全解析它，但我们难道不希望`i`满足这个标准并充当*空指针常量*，因此不需要显式转换`int*`为 的初始化`p`？

如果我`s/constexpr/const/`使用`-ansi`而不是编译，则编译成功`-std=c++11`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T12:33:57.737

> `[C++11: 5.19/3]:`*文字常量表达式*是文字类型的纯右值核心常量表达式，但不是指针类型。*整型常量表达式*是整型或无范围枚举类型的字面常量表达式。[..]

和：

> `[C++11: 3.9/10]:` **一个类型是*文字类型*，如果它是**：
> 
> *   **标量类型**；或者
> *   引用类型；或者
> *   具有以下所有属性的类类型（第 9 条）：[..]
> *   文字类型的数组。

在这一点上，我找不到该代码不合规的原因，所以我怀疑是 GCC 错误。

但是，考虑到您在 4.10 中引用的段落被提议更改（[活动问题 #903](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#903)），这可能是一个故意的错误，因此这实际上是不合规的代码。

* * *

> 如果我`s/constexpr/const/`使用`-ansi`而不是编译，则编译成功`-std=c++11`。

*整数常量表达式*的定义在 C++03 中明确允许这种情况：

> `[C++03: 5.19/1]:`[..]*整数常量表达式*只能涉及文字（2.13）、枚举器、**常量变量**或整数或枚举类型的静态数据成员，它们初始化为常量表达式（8.5）、整数或枚举类型的非类型模板参数，以及`sizeof`表达式。[..]

# .net - 如何使用 .NETs 新的 HttpClient 类访问 shopify api

> ID：13493360
> 
> 赞同：1
> 
> 时间：2012-11-21T12:31:56.470
> 
> 标签：.net, httpclient, shopify

我试图这样称呼shopify：

```
HttpClient.GetAsync(https://---apikey---:---password---@---shop---.myshopify.com/admin/orders.xml) 
```

但我不断收到未经授权的 401 结果。当我在 chrome 中测试 uri 时它工作正常，所以我认为 HttpClient 不知何故无法处理 shopify 需要的 url 中嵌入的身份验证数据。

anyboy 机构是否知道如何使用新的 .NEt 4.5 HttpClient 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:44:11.433

您可以尝试创建一个 HttpClientHandler 实例并创建一个 Credentials 实例并在您的 HttpClient 中使用它，如下所示；

```
 var clientHandler = new HttpClientHandler
                                    {
                                        Credentials = new NetworkCredential("Username", "Password"),
                                        PreAuthenticate = true
                                    };

            var httpClient = new HttpClient(clientHandler);

            var responseMessage = httpClient.GetAsync("http://url").Result; 
```

在这种情况下，您不需要在 URI 中传递用户名@密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T23:14:02.653

克里斯的回答是绝对的。

如果您还对使用 .NET 使用 Shopify API 的更巧妙方式感到好奇，请查看 Shopify 的官方 .NET 适配器：[https ://github.com/cmcdonaldca/shopify.net](https://github.com/cmcdonaldca/shopify.net)

# php - 简单的 Web 抓取 PHP Xpath DOM

> ID：13493362
> 
> 赞同：2
> 
> 时间：2012-11-21T12:32:10.207
> 
> 标签：php, dom, xpath, web-scraping

我正在尝试学习网络抓取并使用此示例从页面获取链接。有没有更好的方法来做到这一点，或者例如获得 h1 的最简单方法是什么？

```
$html = file_get_contents('page.html');

//parse the html into a DOMDocument
$dom = new DOMDocument();
@$dom->loadHTML($html);

//grab all the links on the page
$xpath = new DOMXPath($dom);
$hrefs = $xpath->evaluate("/html/body//a");

for ($i = 0; $i < $hrefs->length; $i++) {
    $href = $hrefs->item($i);
    $url = $href->getAttribute('href');
    echo "<br />Link: $url";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:18:43.267

无需在您的 expath 前加上`/html/body`，`//a`应该可以正常工作。

另外，我会使用[foreach](http://php.net/manual/en/control-structures.foreach.php)而不是 for 循环，但这主要是一种风格选择。

# android - AES 加密问题

> ID：13493364
> 
> 赞同：2
> 
> 时间：2012-11-21T12:32:13.253
> 
> 标签：android

我正在为 Android 和 Blackberry 编写加密代码，使用“AES/CBC/PKCS5”，如下所示。安卓：

```
 byte[] encoded = {(byte) 0xA9, (byte) 0x9B, (byte) 0xC8, (byte) 0x32, (byte) 0x56, (byte) 0x35, (byte) 0xE3, (byte) 0x03,
                (byte) 0xA9, (byte) 0x9B, (byte) 0xC8, (byte) 0x32, (byte) 0x56, (byte) 0x35, (byte) 0xE3, (byte) 0x03};
        SecretKeySpec secretKeySpec = new SecretKeySpec(encoded, "AES");

        Cipher c = Cipher.getInstance("AES/CBC/PKCS5Padding");//AES/CBC/PKCS5Padding
        System.out.println("swapnil:"+c.getAlgorithm()+" BlockSize:"+c.getBlockSize());
            c.init(Cipher.ENCRYPT_MODE, secretKeySpec);
            byte[] input = "Hello".getBytes();
            byte[] output = c.doFinal(input);
            System.out.println("Swapnil: " + new String(output)); 
```

黑莓：

```
 byte[] key1 = {(byte) 0xA9, (byte) 0x9B, (byte) 0xC8, (byte) 0x32, (byte) 0x56, (byte) 0x35, (byte) 0xE3, (byte) 0x03,
            (byte) 0xA9, (byte) 0x9B, (byte) 0xC8, (byte) 0x32, (byte) 0x56, (byte) 0x35, (byte) 0xE3, (byte) 0x03};
    ByteArrayOutputStream baos = new ByteArrayOutputStream(); 

    try {
        InitializationVector iv = new InitializationVector(IV_BYTE);
        //SymmetricKey key = new SymmetricKeyFactory("AES_256", key1, 0, key1.length);
        AESKey aesKey = new AESKey(key1);
        EncryptorOutputStream os = EncryptorFactory.getEncryptorOutputStream(aesKey, baos, "AES/CBC/PKCS5", iv);///
        System.out.println("Swapnil"+os.getAlgorithm());
        os.write("Hello".getBytes());
        os.close();
        byte[] encryptedData = baos.toByteArray();
        String string = new String(encryptedData);
        LabelField lblField = new LabelField(string);
        add(lblField);

    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (CryptoTokenException e) {
        e.printStackTrace();
    } catch (CryptoUnsupportedOperationException e) {
        e.printStackTrace();
    } catch (CryptoException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

我的问题出在Android中，当我运行代码时，即使拥有相同的密钥，每次运行代码时它都会生成不同的加密数据。在黑莓中，每当我运行代码时，它都会生成相同的加密数据。我认为Android应该做同样的事情，但不知何故它不起作用。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:59:57.900

我正在 Android 中开发 AES 加密，它对我来说工作正常。

```
public class AESEncrtptor {
    String strKey = "1234567890123456";
    byte[] byteKey;
    byte[] byteVector = new byte[] { 59, 12, (byte) 129, 77, 39, 119, 82, 6,
            23, 1, 55, 24, 12, (byte) 154, (byte) 224, 14 };

    public AESEncrtptor() {
        try {
            byteKey = strKey.getBytes("UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }
    }

    public enum EnumCipherMode {
        CBC, ECB
    }

    public String Encrypt(String strdata, EnumCipherMode CipherMode) {
        try {
            String strAlgorithm = "AES/CBC/PKCS7Padding";
            switch (CipherMode) {
            case CBC:
                strAlgorithm = "AES/CBC/PKCS7Padding";
                break;
            case ECB:
                strAlgorithm = "AES/ECB/PKCS7Padding";
                break;
            }
            Cipher c = Cipher.getInstance(strAlgorithm);
            SecretKeySpec keySpec = new SecretKeySpec(byteKey, strAlgorithm);
            switch (CipherMode) {
            case CBC:
                c.init(Cipher.ENCRYPT_MODE, keySpec, new IvParameterSpec(
                        byteVector));
                break;
            case ECB:
                c.init(Cipher.ENCRYPT_MODE, keySpec);
                break;
            }
            byte[] data = strdata.getBytes();

            byte[] encrypted = c.doFinal(data);
            return Base64.encodeToString(encrypted, Base64.DEFAULT);
        } catch (Exception e) {
            return "";
        }
    }

    public String Decrypt(String strdata, EnumCipherMode CipherMode) {
        try {
            String strAlgorithm = "AES/CBC/PKCS7Padding";
            switch (CipherMode) {
            case CBC:
                strAlgorithm = "AES/CBC/PKCS7Padding";
                break;
            case ECB:
                strAlgorithm = "AES/ECB/PKCS7Padding";
                break;
            }
            Cipher d_c = Cipher.getInstance(strAlgorithm);
            SecretKeySpec d_keySpec = new SecretKeySpec(byteKey, strAlgorithm);
            switch (CipherMode) {
            case CBC:
                d_c.init(Cipher.DECRYPT_MODE, d_keySpec, new IvParameterSpec(
                        byteVector));
                break;
            case ECB:
                d_c.init(Cipher.DECRYPT_MODE, d_keySpec);
                break;
            }

            byte[] decrypted = d_c.doFinal(Base64.decode(strdata,
                    Base64.DEFAULT));
            String decryptedStr = "";
            for (int i = 0; i < decrypted.length; i++)
                decryptedStr += (char) decrypted[i];
            return decryptedStr;
        } catch (Exception e) {
            return "";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:54:24.580

实际上我并没有在 doFinal() 之前调用 cipher.processBytes()。所以我想加密长度为 20 字节的数据，它过去只返回 16 字节作为加密数据。

这是最终代码：

```
private byte[] cipherData(PaddedBufferedBlockCipher cipher, byte[] data) throws Exception {
        int minSize = cipher.getOutputSize(data.length);
        byte[] outBuf = new byte[minSize];
        int length1 = cipher.processBytes(data, 0, data.length, outBuf, 0);
        int length2 = cipher.doFinal(outBuf, length1);
        int actualLength = length1 + length2;
        byte[] result = new byte[actualLength];
        System.arraycopy(outBuf, 0, result, 0, result.length);
        return result;
    } 
```

# javascript - 如何仅从 IFRAME 中的页面显示容器？

> ID：13493369
> 
> 赞同：1
> 
> 时间：2012-11-21T12:32:34.097
> 
> 标签：javascript, html, css, iframe

让我们举个例子：

假设我有一个包含大量 DIV 的网页。现在我想将一个 DIV 及其子 DIV 渲染到 IFrame 中。

如果您渲染下面的代码，您将看到它包含一个黑色框，页面为红色。我需要的是得到那个黑盒子，如果它显示在 iframe 中。使用下面的代码，我能够完成 80% 的这些要求。唯一的问题是，在渲染 IFrame 时，会显示网页的背景颜色。所以看起来 IFrame 给出了一个左边距间隙，然后用红色背景颜色填充它。我不确定该怎么做。

这是代码：

```
 <html>
     <head>
        <link rel="stylesheet" type="text/css" href="/psy/render.css" />
        <script type="text/javascript" src="http://www.domain.com/psy/given.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="http://www.domain.com/psy/redaf.js"></script>
        <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js?ver=1.3.2'></script>

     /*
        This one makes the javascript functionality work when in iframe and supposedly 
        was also suppose to render this page correctly.  I got it from here:  
        http://css-tricks.com/snippets/jquery/fit-iframe-to-content/
    */

    <script type='text/javascript'>
        $(function(){
            var iFrames = $('iframe');

            function iResize() {
            for (var i = 0, j = iFrames.length; i < j; i++) {
                iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';}
            }

            if ($.browser.safari || $.browser.opera) {

               iFrames.load(function(){
                   setTimeout(iResize, 0);
               });

               for (var i = 0, j = iFrames.length; i < j; i++) {
                    var iSource = iFrames[i].src;
                    iFrames[i].src = '';
                    iFrames[i].src = iSource;
               }

            } else {
               iFrames.load(function() {
                   this.style.height = this.contentWindow.document.body.offsetHeight + 
                   'px';
               });
            }
        });

       </script>

       <title>Demo</title>
        <meta charset="utf-8" />
</head>
<body onload="countdown(year,month,day,hour,minute)">
   <div id="entire">
        <div id="text1">Text Sample 1</div>
       <div id="text2">Text Sample 2</div>
       <div id="countdown_script"></div>
  </div>
  <div class="other_stuff">
    <p class="titler">Title</p>
    <p>text block.</p>
  </div> 
```

CSS：

```
 body {
 background-color: #990000;
 }

 #text1 {
 color: #FFFFFF;
 font-family: 'Helvetica Neue',Helvetica,Arial;
 font-size: 20px;
 margin-left: 20px;
 margin-top: 30px;
 padding-top: 40px;

 }
 .sampler {
 color: #FFFFFF;
 font-family: 'Helvetica Neue',Helvetica,Arial;
 margin-left: 450px;
 margin-top: 130px;
 text-shadow: 2px 2px 2px #000000;
 width: 500px;
 }
 p.titler {
 color: #ffffff;
 font-size: 30px;
 margin-bottom: -10px;
 }
 ul {
 list-style-type: none;
 }
 span {
 color: #FFFFFF;
 margin-left: 10px;
 }
 a {
 text-decoration: none;
 }
 #entire {
 background-color: #000000;
 height: 350px;
 margin-left: auto;
 margin-right: auto;
 width: 200px;
 -moz-box-shadow: 0 2px 15px #990000;
 -webkit-box-shadow: 0 2px 15px #990000;
 }
 #text2 {
 color: #FFFFFF;
 font-family: 'Helvetica Neue',Helvetica,Arial;
 font-size: 20px;
 letter-spacing: 5px;
 margin-left: 20px;
 margin-top: 15px;
 }
 .other_stuff {
 color: #FFFFFF;
 font-family: 'Helvetica Neue',Helvetica,Arial;
 margin-left: 450px;
 margin-top: 130px;
 width: 500px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:19:53.173

**试试这个**

```
 window.frames['yourIframe'].document.body.innerHTML = document.getElementById("yourContainerDiv").innerHTML; 
```

# ms-access - 优化宏

> ID：13493373
> 
> 赞同：0
> 
> 时间：2012-11-21T12:32:52.130
> 
> 标签：ms-access, macros, formula, ms-access-2010

我正在尝试构建一个宏，当单击按钮时将打开一个表单，但只显示符合特定条件的记录。

目前我有

`[tblItem]![Status]=[Assigned]`

应该只显示`tblItem`值为 的`Status`记录`Assigned`，当前单击按钮时会出现一个弹出框，标题为`"Assigned"`，我可以输入一个值，然后只显示具有该值的记录。但我希望在没有弹出窗口的情况下发生这种情况。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:52:01.887

解决了，很容易使这个问题变得荒谬。

`[tblItem]![Status]="Assigned"`

是我需要的。

# php - 如何使用 php 脚本将视频和图像上传到我的服务器

> ID：13493386
> 
> 赞同：0
> 
> 时间：2012-11-21T12:33:43.003
> 
> 标签：php, asp-classic

我希望我的客户端能够将图像从后端上传到服务器。请帮帮我。而且我也需要一个 php 脚本来上传视频。谢谢，这是我的代码，但它不起作用

```
<?php

// Configuration - Your Options
  $allowed_filetypes = array(

'.doc',

'.docx',

'.xls',

'.csv',

);  

  # array('.jpg','.gif','.bmp','.doc'); 

  // These will be the types of file that will pass the validation.
  $max_filesize = 1048567; // Maximum filesize in BYTES (currently 0.5MB).
  $upload_path = './files/'; // The place the files will be uploaded to (currently a 'files' directory).

 $filename = $_FILES['userfile']['name']; // Get the name of the file (including file extension).
 $ext = substr($filename, strpos($filename,'.'), strlen($filename)-1); // Get the extension from the filename.

 // Check if the filetype is allowed, if not DIE and inform the user.
 if(!in_array($ext,$allowed_filetypes))
  die('The file you attempted to upload is not allowed.');

 // Now check the filesize, if it is too large then DIE and inform the user.
 if(filesize($_FILES['userfile']['tmp_name']) > $max_filesize)
  die('The file you attempted to upload is too large.');

 // Check if we can upload to the specified path, if not DIE and inform the user.
 if(!is_writable($upload_path))
  die('You cannot upload to the specified directory.');

// change the name of the file  
$docid = substr(md5(uniqid()),30);

 // Upload the file to your specified path.
 if(move_uploaded_file($_FILES['userfile']['tmp_name'],$upload_path . $docid.$ext))
     echo 'Your file upload was successful, Thank you'; // It worked.
  else
     echo 'There was an error during the file upload.  Please try again.'; // It failed :(.

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:38:42.257

您必须增加在 php.ini 文件中上传视频的时间限制

```
max_execution_time = 3000 // 3000 or your requirements 
```

并在数组列表中添加允许的类型

```
 $allowed_filetypes =
  array('.doc','.docx','.xls','.csv','.flv'); 
```

# sql-server - 复制是否可以在任何地方连续查询？

> ID：13493388
> 
> 赞同：1
> 
> 时间：2012-11-21T12:33:46.573
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, database-replication, merge-replication

我可以在 SQL Server 数据库服务器上的数据库中的`distribution`某处找到复制是否是连续的？`msdb`（2005 年和 2008 年）

背景：我正在制作一个复制监控系统，当复制在 X 时间内没有成功合并时，它会发出警报（通过电子邮件）。为此，我定期查询`distribution`数据库`MSreplication_monitordata`和`MSmerge_sessions`表。为了测试复制是否超过了警报时间，我对每个条目执行以下操作，`MSreplication_monitordata`以查看上次成功复制的时间：

```
select top 1 end_time
from MSmerge_sessions
where runstatus=2 and agent_id=@AgentId
order by end_time desc 
```

runstatus=2 过滤器仅用于“完成”状态（[请参阅文档](http://msdn.microsoft.com/en-us/library/ms173753%28v=sql.105%29.aspx)）

问题是连续复制只有一个`MSmerge_sessions`条目不断更新其 end_time，但其状态也为 3，这意味着“正在进行”。我不能只测试那个，因为这会返回非连续复制会话，这些会话可能在完成之前失败。

我尝试查看该`MSmerge_sessions.current_phase_id`列是否有用，但它没有记录，我无法推断它的含义。我也尝试过`msdb`数据库，因为这是保存复制作业记录的地方（在`sysjobs`表中）。该`sysjobschedules`表看起来很有希望，其中一些`next_run_date`和`next_run_time`字段为 0，但我不知道如何将其链接到`sysjobs`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:22:38.350

好吧，所以这没有我希望的那么漂亮，但它是：

```
select 
    agent.*,
    case when exists(
        select *
        from msdb.dbo.sysjobsteps step
        where agent.job_id=step.job_id
        and step.step_id=2
        and step.command like '%-Continuous%')
        then 1
        else 0
    end as Continuous
from distribution.dbo.MSmerge_agents agent 
```

[从这个脚本](https://support.pelco.com/action.php?kt_path_info=ktcore.actions.document.view&fDocumentId=25837)推导出来，我通过绝望的互联网搜索找到了它。这假定字符串匹配不区分大小写。

如果有人有更好/更整洁/更漂亮的解决方案，我仍然会将答案奖励给他们。

# database - 通过插入/删除/更新在表（t1）中插入/更新/删除行发生在表2中

> ID：13493397
> 
> 赞同：0
> 
> 时间：2012-11-21T12:34:01.940
> 
> 标签：database, oracle10g

我的要求如下。

我在 oracle 数据库中有表（T1）和表（T2）。

当我在表 T2 中自动插入/删除/更新时，表 t1 中应该有相同的操作。

如果我在表 T2 中插入行，则应在 T1 中插入同一行。

删除和更新操作相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:39:35.523

您应该使用触发器。在您的情况下，将有两个触发器，每个触发器一个。

# c# - 等待 service.InvokeMethod 完成 - WMI、C#

> ID：13493398
> 
> 赞同：0
> 
> 时间：2012-11-21T12:34:15.043
> 
> 标签：c#, wmi

我正在使用 WMI 停止远程机器上的服务：

```
 protected override void Execute()
    {
        ConnectionOptions connectoptions = new ConnectionOptions();
        connectoptions.Username = RemoteMachineUsername;
        connectoptions.Password = RemoteMachinePassword;

        ManagementScope scope = new ManagementScope(@"\\" + RemoteMachineName + @"\root\cimv2");
        scope.Options = connectoptions;
        SelectQuery query = new SelectQuery("select * from Win32_Service where name = '" + ServiceName + "'");
        using (ManagementObjectSearcher searcher = new
                    ManagementObjectSearcher(scope, query))
        {
            ManagementObjectCollection collection = searcher.Get();

                foreach (ManagementObject service in collection)
                {
                    if (service.GetPropertyValue("State").ToString().ToLower().Equals("running"))
                    {
                        //Stop the service
                        service.InvokeMethod("StopService", null);//HOW TO WAIT FOR THIS TO FINISH?
                    }
                }
        }
    } 
```

现在，此方法在服务停止之前很久就完成了。我的问题是，我怎样才能等待服务停止，我怎么知道它是否成功。换句话说，我想以同步的方式做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:42:10.163

[ManagementObject.InvokeMethod 方法](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.MANAGEMENT.MANAGEMENTOBJECT.INVOKEMETHOD%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV2.0%22%29;k%28DevLang-CSHARP%29&rd=true)不同步执行，它是异步的。

您可以解析[进程 id](http://msdn.microsoft.com/en-us/library/ms257364%28v=vs.80%29.aspx)的输出参数：

```
//Execute the method
ManagementBaseObject outParams = 
processClass.InvokeMethod("Create", inParams, null);

//Display results
//Note: The return code of the method is provided
// in the "returnValue" property of the outParams object
Console.WriteLine("Creation of calculator " +
    "process returned: " + outParams["returnValue"]);
Console.WriteLine("Process ID: " + outParams["processId"]); 
```

然后通过某种形式的轮询等待该过程完成。但是请注意，如果您的过程没有完成并退出，您可能会等待一段时间。可能有更好的解决方案 - 我目前也在研究这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:53:53.990

[StopService](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393673%28v=vs.85%29.aspx)返回一个`uint`状态代码，您可以将`InvokeMethod`所有结果转换为 an`uint`并检查其返回值。

调用已经应该是同步的，但如果服务没有立即响应停止请求，它可能会超时。如果是这种情况，您可以随时循环检查服务`State`属性。

# mysql - SQL中的以下错误是什么意思？

> ID：13493399
> 
> 赞同：-5
> 
> 时间：2012-11-21T12:34:15.293
> 
> 标签：mysql, sql, database

> **可能重复：**
> [MySQL 中的多列外键？](https://stackoverflow.com/questions/953035/multiple-column-foreign-key-in-mysql)

在数据库中编写查询时，我不断收到此错误：

> 外键“FK__Asses__a_Type__4DB4832C”的引用列列表中的列数与被引用表“Course_Assesments”中主键的列数不匹配

这是我写的代码：

```
CREATE DATABASE GUC_WEBSITE

CREATE TABLE Members(email VARCHAR(30), f_Name VARCHAR(10), l_Name VARCHAR(10), 
    address VARCHAR(50), phone_1 INTEGER, phone_2 INTEGER, password VARCHAR(20),
    PRIMARY KEY (email), UNIQUE (phone_1, phone_2))

CREATE TABLE Students(email VARCHAR(30), major VARCHAR(20), age INTEGER, student_ID VARCHAR(7) NOT NULL,
    PRIMARY KEY (email), UNIQUE (student_ID),
    FOREIGN KEY (email) REFERENCES Members)

CREATE TABLE Graduates(email VARCHAR(30), dgree_1 VARCHAR(10), degree_2 VARCHAR(10), degree_3 VARCHAR(10),
    PRIMARY KEY (email), FOREIGN KEY (email) REFERENCES Members)

CREATE TABLE Undergraduates(email VARCHAR(30), gpa REAL NOT NULL, academic_year VARCHAR(6) NOT NULL,
    PRIMARY KEY (email), FOREIGN KEY (email) REFERENCES Members)

CREATE TABLE Staffs(email VARCHAR(30), department VARCHAR(10), staff_ID VARCHAR(7) NOT NULL, job_title VARCHAR(40),
    PRIMARY KEY (email), UNIQUE (staff_ID), FOREIGN KEY (email) REFERENCES Members, UNIQUE (staff_ID))

CREATE TABLE Academic_Staffs(email VARCHAR(30), salary INTEGER,
    PRIMARY KEY (email), FOREIGN KEY (email) REFERENCES Members)

CREATE TABLE Deans(email VARCHAR(30), faculty VARCHAR(40) NOT NULL,
    PRIMARY KEY (email), FOREIGN KEY (email) REFERENCES Members)

CREATE TABLE Lecturers(email VARCHAR(30), course_Taught VARCHAR(30),
    PRIMARY KEY (email), FOREIGN KEY (email) REFERENCES Members)

CREATE TABLE Courses(course_ID VARCHAR(10), outcome VARCHAR(100), objective VARCHAR(100), content VARCHAR(100), course_name VARCHAR(25),
    coordinator VARCHAR(20), semester INTEGER, is_Core BIT, course_Language VARCHAR(10), is_Obligatory BIT, resources VARCHAR(50), lecturer_Email VARCHAR(30),
    PRIMARY KEY (course_ID), UNIQUE (course_Name, objective), FOREIGN KEY (lecturer_Email) REFERENCES Lecturers)

CREATE TABLE Admins(email VARCHAR(30), admin_ID VARCHAR(7), is_Admin BIT, 
    PRIMARY KEY (email), FOREIGN KEY (email) REFERENCES Members, UNIQUE (admin_ID))

CREATE TABLE Faculties(email VARCHAR(30), fac_Name VARCHAR(40), field VARCHAR (20), f_Description VARCHAR(80), major_1 VARCHAR(10),
    major_2 VARCHAR(10), degree_1 VARCHAR(15), degree_2 VARCHAR(15), degree_3 VARCHAR(15)
    PRIMARY KEY (email, fac_Name), UNIQUE (f_Description), FOREIGN KEY (email) REFERENCES Members)

CREATE TABLE Guest_Questions(guest_ID VARCHAR(10), date_Of_Quest DATE, question_asked VARCHAR(50), number_Of_Questions INTEGER,
    PRIMARY KEY (guest_ID))

CREATE TABLE Course_Assesments(a_Type VARCHAR(15), a_Weight REAL, course_ID VARCHAR(7), student_Email VARCHAR(30),
    lecturer_Email VARCHAR(30),
    PRIMARY KEY (a_Type, student_Email, lecturer_Email), FOREIGN KEY (student_Email) REFERENCES Students,
    FOREIGN KEY (lecturer_Email) REFERENCES Lecturers)

CREATE TABLE Questionaires(q_ID VARCHAR(5), admin_Email VARCHAR(30), student_Email VARCHAR(30),
    PRIMARY KEY (q_ID),  FOREIGN KEY (admin_Email) REFERENCES Admins, FOREIGN KEY (student_Email) REFERENCES Students)

CREATE TABLE Course_Surveys(course_ID VARCHAR(10), iD VARCHAR(5), student_Email VARCHAR(30),
    PRIMARY KEY (course_ID), FOREIGN KEY (course_ID) REFERENCES Courses,
    FOREIGN KEY (iD) REFERENCES Questionaires,
    FOREIGN KEY (student_Email) REFERENCES Students)

CREATE TABLE Graduation_Survey(iD VARCHAR(5), student_Email VARCHAR(30), 
    PRIMARY KEY (iD), FOREIGN KEY (iD) REFERENCES Questionaires, FOREIGN KEY (student_Email) REFERENCES Students)

CREATE TABLE Satisfactory_Surveys(iD VARCHAR(5), student_Email VARCHAR(30), 
    PRIMARY KEY (iD), FOREIGN KEY (iD) REFERENCES Questionaires, FOREIGN KEY (student_Email) REFERENCES Students)

CREATE TABLE Registers(student_Email VARCHAR(30), course_ID VARCHAR(10), is_approved BIT,
    PRIMARY KEY (student_Email, course_ID), FOREIGN KEY (student_Email) REFERENCES Students, 
    FOREIGN KEY (course_ID) REFERENCES Courses)

CREATE TABLE Asses(a_Type VARCHAR(15), student_Email VARCHAR(30), course_ID VARCHAR(10),
    PRIMARY KEY (a_Type, student_Email, course_ID), 
    FOREIGN KEY (a_Type) REFERENCES Course_Assesments,
    FOREIGN KEY (student_Email) REFERENCES Students,
    FOREIGN KEY (course_ID) REFERENCES Courses)

CREATE TABLE CheckResults(email VARCHAR(30), iD VARCHAR(5), course_ID VARCHAR(10),
    PRIMARY KEY (email, iD, course_ID), 
    FOREIGN KEY (email) REFERENCES Lecturers,
    FOREIGN KEY (iD) REFERENCES Course_Surveys,
    FOREIGN KEY (course_ID) REFERENCES Course_Surveys) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:40:35.710

您的问题来自这两个表：

```
CREATE TABLE Course_Assesments
(       a_Type          VARCHAR(15), 
        a_Weight        REAL, 
        course_ID       VARCHAR(7), 
        student_Email   VARCHAR(30),
        lecturer_Email  VARCHAR(30),
    PRIMARY KEY (a_Type, student_Email, lecturer_Email), 
    FOREIGN KEY (student_Email) REFERENCES Students,
    FOREIGN KEY (lecturer_Email) REFERENCES Lecturers
)

CREATE TABLE Asses
(       a_Type          VARCHAR(15), 
        student_Email   VARCHAR(30), 
        course_ID       VARCHAR(10),
    PRIMARY KEY (a_Type, student_Email, course_ID), 
    FOREIGN KEY (a_Type) REFERENCES Course_Assesments,
    FOREIGN KEY (student_Email) REFERENCES Students,
    FOREIGN KEY (course_ID) REFERENCES Courses
) 
```

您告诉数据库`Asses.a_Type`等于主键，`Course_Assesments`但是主键`course_assesments`由 3 列（a_Type、student_Email、讲师_Email）组成，因为一列不能等于 3 列中的元组，您会收到错误。

如果你真的想`Asses`引用`Course_Assesments`你需要一个这样的表：

```
CREATE TABLE Asses
(       a_Type          VARCHAR(15), 
        student_Email   VARCHAR(30),
        lecturer_Email  VARCHAR(30),
        course_ID       VARCHAR(10),
    PRIMARY KEY (a_Type, student_Email, course_ID), 
    FOREIGN KEY (a_Type, Student_Email, lecturer_Email) REFERENCES Course_Assesments (a_Type, Student_Email, lecturer_Email),
    FOREIGN KEY (student_Email) REFERENCES Students,
    FOREIGN KEY (course_ID) REFERENCES Courses
) 
```

最后，与您的问题无关，您在整个过程中都拼错了 Assessment，这没有任何区别，但是对于使用数据库的其他人来说，当他们收到错误消息时会非常沮丧，例如`Invalid Object Name Course_Assessment`因为他们直观地拼写了 Assessment（我曾经处理过一个在列名中出现大约一半的情况下拼写为 Received as Recieved 的数据库，它几乎每天都让我感到困惑）

# jquery - Jquery 选择器给出“意外的字符串”错误

> ID：13493401
> 
> 赞同：1
> 
> 时间：2012-11-21T12:34:19.110
> 
> 标签：jquery, html

我正在尝试在表单中选择一个表格。这是我的html：

```
<div id="switcher-panel">
  <form accept-charset="UTF-8" action="user/1/advancement" method="post">
    <table class="table table-hover">
      <thead>...<thead>
      <tbody>...</tbody>
    </table>
  </form>
</div> 
```

我可以使用 轻松选择 div“切换器面板” `$('#switcher-panel')`，但是当我尝试通过表单深入查看表格时，`$('#switcher-panel' 'form')`我收到`Unexpected String`类型为 的错误`unexpected_token_string`。我以为我对 Jquery 有相当不错的掌握，但我在这里迷路了。有没有办法通过表格或选择我缺少的表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:34:49.160

用这个：

```
$("#switcher-panel form") 
```

或这个：

```
$("#switcher-panel").find("form"); 
```

否则，它是无效的 JavaScript 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:35:30.283

尝试

```
$('#switcher-panel').find('form') 
```

您正在尝试的不是合法的选择器。这将找到`form`作为`div`.

您也可以尝试`$('#switcher-panel form')`或`$('#switcher-panel').children('form')`几乎相同的东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:35:38.620

您无需再次`form`输入单曲`quotes`。

**[现场演示](http://jsfiddle.net/uPX99/1/)**

改变

```
$('#switcher-panel' 'form') 
```

到

```
$('#switcher-panel form') 
```

# ios - 根据第一个组件选择在 UIPickerView 第二个组件中显示数据

> ID：13493402
> 
> 赞同：3
> 
> 时间：2012-11-21T12:34:21.520
> 
> 标签：ios, uipickerview

我正在使用带有两个组件的选择器。我想如果我根据所选组件在第一个组件中选择一行，它会显示相应数据的值。

![在此处输入图像描述](../Images/eded7ffa0415b28b5845da2f184912f1.png)

正如皮克所展示的，当英格兰被选中时，英格兰有相应的俱乐部。我想为其他国家做同样的事情。但我没有得到遵循哪种方法。

这是我的代码：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView 
{

    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component 
{

    if(component ==0)
    {
        return [Nations count];
    }

    else{
        if(country_flag==0)
        {
        return [England count];
        }
        else if (country_flag==1)
        {
            return [Espana count];
        }
        else if (country_flag==2)
        {
            return [Netherlands count];
        }
        else if (country_flag==3)
        {
            return [Germany count];
        }
        else if (country_flag==4)
        {
            return [Italy count];
        }
    }

    return 0;
}
- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    if(component ==0)
    {
        return [Nations objectAtIndex:row];
    }

    else{
        if(country_flag==0)
        {
            return [England objectAtIndex:row];
        }
        else if (country_flag==1)
        {
            return [Espana objectAtIndex:row];
        }
        else if (country_flag==2)
        {
            return [Netherlands objectAtIndex:row];
        }
        else if (country_flag==3)
        {
            return [Germany objectAtIndex:row];
        }
        else if (country_flag==4)
        {
            return [Italy objectAtIndex:row];
        }
    }

    return 0;

}
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{

    label.text=[Nations objectAtIndex:row];

    str = [[NSString alloc]init];

    if (country_flag==0) {
        str=@"England";
        label_1.text=[NSString stringWithFormat:@"%@",str];
        NSLog(@"%@",label_1);
        str=@"";
        country_flag =1;
        [picker reloadAllComponents];
    }
    else if (country_flag==1)
    {
        str=@"Espana";
        label_1.text=[NSString stringWithFormat:@"%@",str];
        NSLog(@"%@",label_1);
        str=@"";
        country_flag =2;
        [picker reloadAllComponents];
    }
    else if (country_flag==2)
    {
        str=@"Netherlands";
        label_1.text=[NSString stringWithFormat:@"%@",str];
        NSLog(@"%@",label_1);
        str=@"";
        country_flag =3;
        [picker reloadAllComponents];
    }
    else if (country_flag==3)
    {
        str=@"Germany";
        label_1.text=[NSString stringWithFormat:@"%@",str];
        NSLog(@"%@",label_1);
        str=@"";
        country_flag =4;
        [picker reloadAllComponents];
    }
    else if (country_flag==4)
    {
        str=@"Germany";
        label_1.text=[NSString stringWithFormat:@"%@",str];
        NSLog(@"%@",label_1);
        str=@"";
      //  country_flag =4;
        [picker reloadAllComponents];
    }

} 
```

**编辑：**

这是数据

```
Nations = [[NSMutableArray alloc]initWithObjects:@"England",@"Espana",@"Germany",@"Netherlands",@"Germany",@"Italy", nil];

    England=[[NSMutableArray alloc]initWithObjects:@"Arsenal",@"Chelsea",@"Manchester City",@"Manchester United",@"Liverpool",@"Tottenham",@"Fulham City",@"Stoke City",@"Sunderland",@"NewCastle United",@"Blackburn Rovers",@"Southampton",@"Wolvers",@"Aston Villa", nil];

    Espana = [[NSMutableArray alloc]initWithObjects:@"Barcelona",@"Real Madrid",@"Valencia",@"Athletico Madrid",@"Athletico Balbao",@"Getafe CF",@"Sevilla CF", nil];

    Netherlands = [[NSMutableArray alloc]initWithObjects:@"Celtics",@"Ajax",@"Amesterdam", nil];

    Germany = [[NSMutableArray alloc]initWithObjects:@"Bayern Munich",@"Bermen",@"Fiorentina",@"Pampas",@"Nord", nil];

    Italy = [[NSMutableArray alloc]initWithObjects:@"AC Milan",@"Inter Milan",@"Juventus", nil]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T14:19:37.890

您的代码..稍作修改..

选择行

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    if (component == 0) {
        club=[[NSString alloc] initWithFormat:@"%@" , [Nations objectAtIndex:row]];
        [pickerView reloadComponent:1];
          } 
```

}

之后...

```
- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {

    if(component ==0)
    {
        return [Nations count];
    }
    else {
        if ([club isEqualToString:@"Espana"]) {
            return [Espana count];
        }
        if ([club isEqualToString:@"Germany"]) {
            return [Germany count];
        }
        // if...
       else  {
            return [England count];
        }
    }

    return 0;
} 
```

和

```
- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    if(component ==0)
    {
        return [Nations objectAtIndex:row];
    }
    else {
        if ([club isEqualToString:@"Espana"]) {
            return [Espana objectAtIndex:row];
        }
        if ([club isEqualToString:@"Germany"]) {
            return [Germany objectAtIndex:row];
        }
        //if....
      else  {
            return [England objectAtIndex:row];

        }
    }

    return 0;
    } 
```

**UPD**

在 h 文件中我有

```
@interface ViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate> {

    IBOutlet UIPickerView *pickerView;
    NSMutableArray *arrayColors;
    NSMutableArray *Nations;
    NSMutableArray *England;
    NSMutableArray *Espana;
    NSMutableArray *Germany;
    NSString *club;
} 
```

之后..您必须将 de pickerView 连接到您的 ViewController （数据源和委托） ![在此处输入图像描述](../Images/543e0211ce179ba52c553c691bc596ec.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:10:15.253

看看这个，我想它可以帮助你

1.  首先确保您已将您的选择器与 IBOutlet 连接起来。

2.  如果您遇到问题，您仍然可以使用

`[thePickerView reloadComponent:(NSInteger)component];`

代替

```
[picker reloadComponent:(NSInteger)component]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:37:24.743

通常你会这样做。您创建一个包含所有国家/地区数据的 plist 文件，结果类似于

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>England</key>
    <array>
        <string>Chelsea</string>
        <string>Arsenal</string>
    </array>
    <key>Spain</key>
    <array>
        <string>Barca</string>
        <string>Real</string>
    </array>
 </dict>
</plist> 
```

假设在属性或某处定义了以下内容

```
NSDictionary *countryClubs;
NSArray *countries;
NSArray *clubs; 
```

然后你做这样的事情

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSBundle *bundle = [NSBundle mainBundle];
    NSURL *plistFile = [bundle URLForResource:@"myPListFile" withExtension:@"plist"];
    NSDictionary *dictionary = [NSDictionary dictionaryWithContentsOfURL:plistFile];
    self.countryClubs = dictionary;

    NSString *selectedCountry = [self.countries objectAtIndex:0];
    NSArray *array = [countryClubs objectForKey:selectedCountry];
    self.clubs = array;
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    if (component == 0)
        return [self.countries count];
    return [self.clubs count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row
        forComponent:(NSInteger)component {
    if (component == 0)
        return [self.countries objectAtIndex:row];
    return [self.clubs objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
       inComponent:(NSInteger)component {
       if (component == 0) {
         NSString *selectedCountry = [self.countries objectAtIndex:row];
         NSArray *array = [countryClubs objectForKey:selectedCountry];
         self.clubs = array;
         [picker selectRow:0 inComponent:1 animated:YES];
         [picker reloadComponent:1];
    }
} 
```

这应该可以帮助你。我希望没有太多的拼写错误，但您至少应该了解总体思路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T13:45:14.240

我认为问题出在你的`didSelectRow`方法上。`country_flag`在允许选择一个新国家之前，您检查已经选择了哪个国家（在 中）。我认为没有任何理由这样做。

允许选择任何国家。然后`country_flag`根据选择的行进行设置。

做就是了`country_flag = row+1;`

然后，如果这很重要，您可以让您的`if`声明来设置您的标签。

# c# - 抽象工厂和 Unity 依赖注入

> ID：13493411
> 
> 赞同：0
> 
> 时间：2012-11-21T12:34:50.753
> 
> 标签：c#, entity-framework, dependency-injection, unity-container, enterprise-library

我非常不确定我应该如何处理这个问题，因为我是 Unity Container 的新手。

这是我拥有的一家工厂：

```
 class DataCopierFactory : IDataCopierFactory
{
    private readonly IUnityContainer _container;
    //not mad on binding the factory to the container, but feck it
    public DataCopierFactory(IUnityContainer container)
    {
    _container = container;

    }

    //return a data copier that will transfer data from any DB to any other DB
    public IDataCopier createDataCopier(int i)
    {
        switch(i)
        {
            case 1:
                return new ScheduleDataCopier(new LTEEFContext());  //somehow resolve the LTEEFContext..
            //case 2:
            //    
            default:
                throw new InvalidOperationException("Parameter -t=" + i + " does not exist");

        }
    }
} 
```

当我调用 createDataCopier 方法并传入一些枚举时，我想使用 Unity 容器来解析各种类型的 IDataCopier 的数据库对象上下文。

我该怎么做呢？

我应该在调用工厂的课程中这样做吗？或注入 unitycontainer 并在此时解析不同的 DB 对象上下文。

IDatacopier 的每个实现都有一个 IDBContext 作为构造函数，我想基本上注入它，但允许我为 Datacopier 的不同实现更改上下文。

希望这是有道理的...... :) 提前感谢尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:23:27.200

找到了答案..这是我的错:)

当我不应该有时，我试图将 objectContext 作为依赖项注入。我不认为工厂应该有你的 IOC 容器的实例。

我也使用存储库模式，每个 DataCopier impl 都不应该需要 ObjContext 的实例，因为它们都有各自需要的存储库的实例。

这可能不是最好的做事方式，因为我将 repo 耦合到 datacopier 类，但我认为它可以，因为 repo 和对象上下文之间已经存在抽象（我使用 Unity 将 objectcontext 作为依赖项注入到所有回购的）

欢迎任何建议..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T19:09:36.230

我建议为您的 IDataCopier 进行多个 Unity 注册（对于每个实现）。您可以通过使用 IDataCopier[] 的构造函数参数将它们全部注入您的工厂。 *注意：使用 Unity 时，您**必须**在多重注册时为每个注册命名。*

然后，您需要一种方法来选择您想要的。我建议向您的 IDataCopier 接口添加一个 get 属性，该属性可以是您的 int 或字符串标记。然后，您的 createDataCopier(int) 可以查询您从 Unity 获得的 IDataCopier[] 以获取具有 get 属性 == int i 的元素。这是“策略模式”，比静态 switch 语句更灵活。将 IDataCopier[] 存储到字典字段中将是一种方便选择的便捷方式，但简单的 LINQ 语句也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T18:33:48.770

很高兴看到 OP 自己解决了这个问题。如果人们仍然感兴趣，我们有一个关于如何解决此类问题的广泛示例：[https ://dannyvanderkraan.wordpress.com/2015/06/29/real-world-example-of-dependency-injection-based-on-运行时值/](https://dannyvanderkraan.wordpress.com/2015/06/29/real-world-example-of-dependency-injection-based-on-run-time-values/)

# encryption - 签名生成的输入和输出长度相等

> ID：13493412
> 
> 赞同：2
> 
> 时间：2012-11-21T12:34:57.400
> 
> 标签：encryption, signing

我想对长度为*300 位*的文本生成数字签名，在获得的签名中添加一些新文本，然后对生成的文本进行签名。

我使用了 Bouncy Castle 函数并意识到在 RSA 签名方案中，密钥的大小必须大于输入长度。获得的输出长度等于密钥大小，并且通过添加新文本，密钥大小必须更大。但是，我想使用**一个密钥**进行签名。例如，我第一次开始使用 512 位密钥，但对于第二次签名，我必须使用 1024 位密钥，而我有一个用于签名的密钥。

我该怎么做？有可能（用Java或任何语言）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:06:16.180

如果你坚持只用key，那么你**一次**`512-bit`可以签名的最大数据长度就达到了`53 bytes=424 bits`，所以你必须拆分数据，单独签名。 例如- 假设您在进行第二次签名之前的数据长度是，然后将其分成两组- 并且。然后分别对这两个签名并连接结果。 **编辑** 还有另一种方法可以做到这一点，只使用**1 个键**- **`500 bits``424 bits``66 bits`** 

 *******   密钥大小为`2048 bits`. 您可以签署最长为`245 bytes=1960bits`.
*   在第一次签名操作和添加附加信息之后，即在 Sign(data)+info 之后，对结果执行 **SHA-512**摘要。这会将结果压缩为**64 个字节。**
*   然后再次使用相同的密钥对其进行签名。

    简而言之 -`Sign(SHA-1(Sign(data)+info))`

    注意：您可以使用密钥长度进行上述签名`1024-bit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:04:44.980

你为什么不编写一个简单的算法来创建另一个（为你的虚拟标志），只需将标志加密成一些代码，然后同时使用它们。

它将为您解决两个目的。

*   你会有两个不同的签名
*   您将能够使用您拥有的唯一密钥

希望对你有帮助 ：）******

# wpf - wpf 触发 Datagrid RowCount

> ID：13493413
> 
> 赞同：2
> 
> 时间：2012-11-21T12:35:00.743
> 
> 标签：wpf, datagrid, rowcount

我有一个定义了一些列的 DataGrid。这些行绑定到一个 ObservableCollection。网格旁边是一个按钮，该按钮是否可见，具体取决于行数。当有 2 行（或更多）行时，它应该是可见的。这个想法是使用 DataGrid.Rows.Count 或 DataGrid.Items.Count。

编译器不知道属性“DataGrid.Rows”或“DataGrid.Items”。你知道另一种方法吗？我喜欢只在 Xaml 中使用它，而不是为此使用转换器。（我知道可以通过计算 itemcollection 的转换器来实现）有更聪明的方法吗？

```
<Grid>

<DataGrid Name="dg1">
    <DataGrid.Columns> 
         ...
    </DataGrid.Columns>
</DataGrid>
<Button Name="btn1" Visibility="Visibility">
</Button>
<Grid.Triggers>
    <Trigger SourceName="dg1" Property="DataGrid.Items.Count" Value="0">
        <Setter TargetName="btn1" Property="Visibility" Value="Hidden"></Setter>
    </Trigger>
    <Trigger SourceName="dg1" Property="DataGrid.Items.Count" Value="1">
        <Setter TargetName="btn1" Property="Visibility" Value="Hidden"></Setter>
    </Trigger>
</Grid.Triggers> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:55:10.143

您可以通过在要显示/隐藏的按钮上设置 DataTrigger 并绑定到`Items.Count`DataGrid 上的属性来做到这一点。

每当集合中的项目数达到 0 或 1 时，按钮就会被隐藏，当超过 1 时，它会再次显示。

**XAML：**

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <DataGrid Name="dg1" ItemsSource="{Binding MyFooCollection}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Id}" />
                <DataGridTextColumn Binding="{Binding Name}" />
            </DataGrid.Columns>
        </DataGrid>
        <StackPanel>
            <Button Content="Add row" Click="btnAdd" />
            <Button Content="Remove row" Click="btnRemove" />
            <Button Content="Will be shown/hidden">
                <Button.Style>
                    <Style TargetType="Button">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Items.Count, ElementName=dg1}" Value="0">
                                <Setter Property="Visibility" Value="Hidden" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Items.Count, ElementName=dg1}" Value="1">
                                <Setter Property="Visibility" Value="Hidden" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </StackPanel>
</Window> 
```

**代码隐藏：**

```
public partial class MainWindow : Window
{
    public ObservableCollection<Foo> MyFooCollection { get; set; }

    public MainWindow()
    {
        InitializeComponent();

        this.MyFooCollection = new ObservableCollection<Foo> 
        { 
            new Foo(1, "Bar1"), new Foo(2, "Bar2"), new Foo(3, "Bar3"), 
            new Foo(4, "Bar4"), new Foo(5, "Bar5"), new Foo(6, "Bar6") 
        };

        this.DataContext = this;
    }

    private void btnAdd(object sender, RoutedEventArgs e)
    {
        MyFooCollection.Add(new Foo(11, "Test1"));
    }

    private void btnRemove(object sender, RoutedEventArgs e)
    {
        if (MyFooCollection.Any())
            MyFooCollection.RemoveAt(0);
    }

    public class Foo
    {
        public int Id { get; set; }
        public string Name { get; set; }

        public Foo(int id, string name)
        {
            Id = id;
            Name = name;
        }
    }
} 
```

# hibernate - Hibernate Envers 不适用于 hibernate-spring-maven 项目

> ID：13493414
> 
> 赞同：1
> 
> 时间：2012-11-21T12:35:07.103
> 
> 标签：hibernate, hibernate-envers

我正在尝试使用 Envers 审核更新/插入到我的表中。

我正在使用 Hibernate 4.1.8.Final 和 spring 3.0.2.RELEASE 并且对于 envers 我的 pom.xml 看起来像这样。

```
<dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-envers</artifactId>
        <version>4.1.8.Final</version>
    </dependency 
```

我已经配置了我的 spring-servlet.xml

```
`<property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>
                 <prop key="hibernate.hbm2ddl.auto">update</prop>
                  <!-- <prop key="hbm2ddl.auto">create</prop> -->
                <prop key="hibernate.ejb.event.post-insert">org.hibernate.ejb.event.EJB3PostInsertEventListener,org.hibernate.envers.event.AuditEventListener </prop>
                <prop key="hibernate.ejb.event.post-update" >org.hibernate.ejb.event.EJB3PostUpdateEventListener,org.hibernate.envers.event.AuditEventListener </prop>
                <prop key="hibernate.ejb.event.post-delete">org.hibernate.ejb.event.EJB3PostDeleteEventListener,org.hibernate.envers.event.AuditEventListener </prop>

            </props>

        </property> 
```

`and my hibernat-cfg.xml look like this`

```
 <property name="org.hibernate.envers.auditTableSuffix">_AUD</property>
 <property name="org.hibernate.envers.revisionFieldName">ID_REVISION_INFO</property>
 <property name="org.hibernate.envers.revisionTypeFieldName">REVISION_TYPE</property>

 <mapping class="com.example.contact.form.Contact" />` 
```

在我的 dto 中，我使用 @audited 注释来使用 envers，没有例外，正常的插入和更新都可以。我google了很多次，尝试了很多可能的解决方案，仍然无法正常工作。任何人都可以帮助我摆脱困境吗？

# c# - 扫描程序集以查找实现特定接口的类并将它们添加到容器中

> ID：13493416
> 
> 赞同：1
> 
> 时间：2012-11-21T12:35:11.727
> 
> 标签：c#, interface, containers

我错过了一些东西，但不确定它是什么。我想实现这个方法，所以它扫描包含所提供类型的程序集并将它们添加到容器中。

问题是：如何将查询返回的类型添加到扫描仪集合中？

```
public TorrentScannerContainer AddFromAssemblyOf<T>()
        {
            TorrentScannerContainer current;

            lock (TorrentScannerContainer._padlock)
            {
                var assignableType = typeof(ITorrentScanner);

                var scanners = AppDomain.CurrentDomain.GetAssemblies().ToList()
                    .SelectMany(x => x.GetTypes())
                    .Where(t => assignableType.IsAssignableFrom(t) && t.IsClass).ToList();

                foreach (Type type in scanners)
                {
                    var scanner = type as ITorrentScanner;
                    TorrentScannerContainer.Current.Scanners.Add(scanner);
                }

                current = TorrentScannerContainer.Current;
            }

            return current;
        } 
```

TorrentScannerContainer.Current.Scannners 是 ITorrentScanner 的集合：

```
internal List<ITorrentScanner> Scanners { get; private set; } 
```

我希望有人可以帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:44:50.030

好吧，问题是您尝试在 ITorrentScanner 的集合中添加类型。您应该在扫描仪中有一个类型列表，或者创建一个 type 的实例：

```
foreach (Type type in scanners)
{
    var scanner = Activator.CreateInstance(type) as ITorrentScanner;
    if(scanner != null)
         TorrentScannerContainer.Current.Scanners.Add(scanner);
} 
```

当然，这意味着您的类型有一个默认构造函数。如果不是这种情况，那么我不知道如何实例化它们......但你当然知道

# php - 具有许多路径的 PSR-0 SplClassLoader

> ID：13493422
> 
> 赞同：0
> 
> 时间：2012-11-21T12:35:22.820
> 
> 标签：php, namespaces, autoload, spl-autoload-register, psr-0

几个小时后，调试和修改无法弄清楚这是否可能，请赐教。

我的服务器上的许多站点都使用我的框架。我正在尝试实现[SplClassLoader](https://gist.github.com/221634)，但几乎没有成功。加载程序工作*（进行一些修改）*，直到我需要添加另一个路径*（当调度完成时）*。

看起来加载器只能在框架放置在应用程序所在的同一目录下时才能运行，但不能相反。

是否可以将此加载程序与

*   适当的命名空间支持
*   很少或没有黑客攻击

当图书馆是集中的并且许多应用程序将使用它时？

我的设置：

```
/lib
  /Framework
    /Controller
      Front.php
/site1
  /App
    /App1
    /App2
      /Controllers
/site2 
```

`site1/public/index.php`启动执行调度的前端控制器，然后启动实际控制器。

我的（可能是错误的）命名空间设置：

`Framework`using namespace中的每个类`Framework`。这很好，直到我想启动一个从框架扩展类的控制器。这就是事情出错的地方。提到的 SplClassLoader 不能处理这样的路径。我从错误日志中看到的是主要问题`lib`不是`site1`我不能接受的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:10:32.403

**编辑：**

好的，您没有提到您正在使用 PEAR 命名/命名空间。在这种情况下，它的工作方式会有所不同。

首先，您需要调整框架的类命名。那些需要一个`Framework`段，所以：

`Controller_Front`

应该

`Framework_Controller_Front`

这为您提供了控制器的唯一 ns。

然后使用加载器，您将注册一个前缀，例如：

`$loader->registerPrefix('Framework', 'absolute/path/to/lib');`

从来没有使用过带有 PEAR 命名的 ClassLoader，我不确定您是否需要`_`在前缀上留下尾随，但您应该能够通过反复试验来解决这个问题。此外，我不确定您是否会将路径指向“absolute/path/to/lib”或“absolute/path/to/lib/Framework”——再次反复试验应该指出这一点:-)

* * *

好的，不确定你哪里出错了，但让我们这样做。

让我们创建一个`/lib`名为`autoload.php`内容的文件：

```
// require/use statements for the Symfony ClassLoader Component

$loader = new UniversalClassLoader();
$loader->registerNamespaces(array(
    'Framework' => __DIR__                    
));

$loader->register();

return $loader; 
```

至此，类加载器就设置好了。然后在每个站点的 index.php （或任何你用来做你的引导程序的东西：

```
// configure the path to the framework from SITE/public and require the autoload.php
$frameworkDir = realpath(__DIR__ . '/../../lib');
$siteDir = realpath(__DIR__ . '/../'); // whatever gives us site1

$loader = require_once($frameworkDir . '/autoload.php');

// now lets start mapping our application specific namespaces
$loader->registerNamespace('App1', $siteDir . '/App/App1');
$loader->registerNamespace('App2', $siteDir . '/App/App2');

// then the rest of your bootstrapping and FC initialization 
```

* * *

你可能想试试[Symfony Components ClassLoader——](http://symfony.com/doc/2.0/components/class_loader.html)这就是我通常使用的。只要您使用绝对路径注册您的命名空间，这并不重要。

```
$loader = new UniversalClassLoader();
$loader->registerNamespaces(array(
    'Framework' => __DIR__ . '/lib',
    'AppOne'    => $somevarHoldingTheABSPrefixToTheAppOneCode . '/lib',
    'AppTwo'    => $somevarHoldingTheABSPrefixToTheAppTwoCode . '/lib',
    'AppTwo\\SomeVendor' => $somevarHoldingTheABSPrefixToTheAppTwoCode . '/vendor/somevendor/lib'                    
));

$loader->register(); 
```

# php - 正则表达式：匹配可以或不在文本开头或结尾的字符串

> ID：13493423
> 
> 赞同：3
> 
> 时间：2012-11-21T12:35:28.600
> 
> 标签：php, regex

我正在尝试找到具有三种可能形式的字符串：

```
ab10
ab 10
ab-10 
```

到目前为止，我已经设法创建了这个正则表达式，

```
/\s+[a-zA-Z]{2}[-|\s.]?\d{2,3}\s+/ 
```

适用于如下文本：

```
start foo ab 10 end foo. 
```

当搜索到的字符串位于文本的开头或结尾时，就会出现问题，例如：

```
ab 10 end foo. 
```

在这种情况下，开头没有空格。所以我需要匹配字符串是否在文本的开头（或结尾），但我不知道该怎么做

有人可以给我一点帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:39:45.143

这应该可以解决您的问题：

```
/\b[a-zA-Z]{2}[-|\s.]?\d{2,3}\b/ 
```

`\b`表示单词边界，它断言一侧（在当前位置之前或之后）是非单词字符，另一侧是单词字符（由 定义的单词字符`\w`）。

请注意，如果您有一个类似的字符串`#ab10.`，那么`ab10`仍然会匹配。但是`_ab10`会给出不匹配，因为`_`是一个单词字符。

如果您想断言要搜索的字符串之前和之后的字符必须是空白字符（由 定义`\s`），或者行的开始/结束。我使用后视和前瞻零宽度断言。

```
/(?<=^|\s)[a-zA-Z]{2}[-|\s.]?\d{2,3}(?=\s|$)/ 
```

`#ab10.`上面的正则表达式在or中找不到任何匹配项`ab10.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:39:19.660

我想你想要[单词边界](http://www.regular-expressions.info/wordboundaries.html) `\b`

```
/\b[a-zA-Z]{2}[-|\s.]?\d{2,3}\b/ 
```

[在 Regexr 上](http://regexr.com?32sp8)查看

现在匹配了，当前面没有单词字符并且后面没有单词字符时。

单词字符是预定义字符类的成员，`\w`它们是字母、数字和下划线。

# jquery-selectors - jQuery 正在为在动态内容之前生成的内容触发多个事件

> ID：13493426
> 
> 赞同：0
> 
> 时间：2012-11-21T12:35:43.677
> 
> 标签：jquery-selectors, jquery

我已经构建了一个基于动态目的的表单字段中继器，但是在 jQuery 单击事件功能上遇到了一些困难。

你可以在这里观看我的[代码](http://leading-people.com/resources/form/)- [http://leading-people.com/resources/form/](http://leading-people.com/resources/form/)

**单击时，我只想在其自己的父td**中克隆输入字段一次。在这种情况下，仅适用于已经显示的输入字段，然后为动态创建的字段分配**点击事件的功能**。

> 问题是，当我创建一次动态字段时，它会完美地创建一个克隆，动态生成的输入字段也会发生同样的情况，但是当我按下**旧输入字段（在初始阶段已经产生）**时，它会克隆多次。

尝试了许多与此问题类似的其他方法，但无法通过它。我在 SO 上发现的类似问题，但这些对我一点帮助都没有。

*   [在动态元素上触发 jquery](https://stackoverflow.com/questions/8402639/triggering-jquery-on-dynamic-elements)
*   [防止多次触发jQuery中的单击事件](https://stackoverflow.com/questions/1012447/prevent-click-event-in-jquery-triggering-multiple-times)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:33:38.717

干得好：

```
$(document).ready(function(){    
    $("table").on("click","input",function(){
        var dd = new Date(),
            ddClass= dd.getDate()+"-"+dd.getSeconds();

        $(this).clone().attr("class",ddClass).appendTo($(this).parent());
    });        
});​ 
```

Jsfiddle在这里：http: [//jsfiddle.net/CLyRc/4](http://jsfiddle.net/CLyRc/4)

在这段代码中，我们使用该表来侦听内部输入字段上的任何点击事件，然后简单地克隆该点击输入并将其附加到父级（在本例中为`<td>`标记）。

在您的代码中，您似乎在向所有输入字段重复添加事件侦听器，而在我的示例中，我们使用事件委托在任何输入字段上仅侦听一次事件，无论是否动态添加。

# esb - BPEL-ESB 链接因 WSDL 中的新操作而中断？

> ID：13493428
> 
> 赞同：4
> 
> 时间：2012-11-21T12:35:44.177
> 
> 标签：esb, bpel, osb, soa-suite

这个问题不好问。所以我会尽力问清楚。我们已经有一个企业 SOA 套件 10G 系统正在运行。一个小过程，我就这样解释。

Consumer->ESB->BPEL->ESB->Provider Webservice

消费者调用我们的一个 ESB 流程，该流程又将请求转发给 BPEL，BPEL 再次调用另一个 ESB。这个最终的 ESB 调用由我们的提供者提供的外部 WebService。

现在让它更清楚。

Consumer C1--WSDLExt1-->ESB1-->WSDLInt1-->BPEL--WSDLInt1-->ESB2--WSDLExt2-->Provider Webservice

*   为了解释这一点，Consumer 是 C1，而我们的第一个 ESB 是 ESB1。它们之间使用的 WSDL 是 WSDLExt1。
*   ESB1，在转换之后将请求转发给 BPEL。然后 BPEL 将请求转发到 ESB2。由于 ESB2 和 BPEL 使用相同的 WSDLInt1，因此 BPEL 中没有转换
*   然后 ESB2 转换请求并将其发送到 Provider Webservice。ESB2 和Provider Webservice 之间使用的WSDL 是WSDLExt2。

现在问题来了。现在由于一个奇怪的新需求，我们必须在 WSDLExt2 中添加一个新操作。注意：只有一个新的操作。但转折来了。1.假设，对于一个新的操作，我定义了新的消息。2\. 或者我继续使用 WSDL 中已经存在的（定义的）消息来进行这个新操作。

在每种情况下，我都需要修改 WSDLint1 并反过来修改 BPEL 吗？

总之，我的问题是，增加一个新的操作，会对之前调用它的流程有影响吗？这会导致任何故障吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:45:16.857

ESB 的作用/优势之一是保护例如 BPEL 免受此类更改的影响。ESB在这里充当**代理，在 ESB 内部调用 BPEL 时发生的****消息路由/中介**对 BPEL 不可见。

因此，`WSDLExt2`只要您不触及`WSDLInt1`定义（及其数据类型等），更改就不会影响 BPEL。

如果您不打算通过 BPEL 使用这个新操作，那么您不需要修改 BPEL 或`WSDLInt1`.

由 ESB 代理的中的一个操作`WSDLInt1`也将调用 的情况`WSDLExt2`，这都可以在 ESB 级别内部处理，并且可以透明地完成，这样 BPEL 就不会注意到任何变化。在 ESB 术语中，这可以称为**翻译和转换/协议转换/服务编排**。

# sharepoint - 可以更改在工作流程中发送邮件的电子邮件吗？

> ID：13493429
> 
> 赞同：0
> 
> 时间：2012-11-21T12:35:47.553
> 
> 标签：sharepoint, sharepoint-2010

在 Sharepoint 2010 中，当电子邮件作为操作发送时，它来自`System`帐户。我可以更改它并使其成为`myemail@gmail.com`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:17:34.747

不适用于 SharePoint Designer 的 OTB 发送电子邮件操作。我使用 Virto 的 SharePoint 工作流活动工具包来解决 SharePoint 设计器的这个问题。它有一个发送邮件操作，允许您指定发件人。

# java - 具有相同自定义模型的两个 JXTable - 如何使单元格在一个表中可编辑但在第二个表中不可编辑？

> ID：13493431
> 
> 赞同：2
> 
> 时间：2012-11-21T12:35:56.897
> 
> 标签：java, swing, swingx, tablemodel, jxtable

我有一个自定义表模型，我想在一个 JXTable 中编辑其数据，但在第二个 JXTable 中只查看。这可以在没有两个独立模型的情况下完成吗？是否有某种方法可以覆盖仅查看表的 model.isCellEditable？

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;
import javax.swing.*;
import javax.swing.table.AbstractTableModel;
import org.jdesktop.swingx.JXTable;
import org.jdesktop.swingx.decorator.ColorHighlighter;
import org.jdesktop.swingx.decorator.ComponentAdapter;
import org.jdesktop.swingx.decorator.HighlightPredicate;

public class SSCCE extends JPanel {

  private JSplitPane splitPane;
  private JXTable viewTable, editTable;

  private class CustomModel extends AbstractTableModel {

    public static final int SPORT_COL = 0;
    public static final int EQUIPMENT_COL = 1;
    private final String[] COLUMN_NAMES = {
      "Sport",
      "Equipment"
    };
    private Map<String, String> sports;
    private List<String> set;

    public CustomModel() {
      sports = new TreeMap<String, String>();
      sports.put("Rugby", "Headguard");
      sports.put("Hurling", "Sliotar");
      sports.put("Tennis", "Racket");
      set = new ArrayList<String>(sports.keySet());
    }

    public int getRowCount() {
      return sports.size();
    }

    public int getColumnCount() {
      return COLUMN_NAMES.length;
    }

    @Override
    public String getColumnName(int columnIndex) {
      return COLUMN_NAMES[columnIndex];
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
      String sport = set.get(rowIndex);
      switch (columnIndex) {
        case SPORT_COL:
          return sport;
        case EQUIPMENT_COL:
          return sports.get(sport);
      }
      return null;
    }

    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
      if (columnIndex == EQUIPMENT_COL) {
        if (aValue != null) {
          String sport = (String) getValueAt(rowIndex, SPORT_COL);
          String equip = (String) aValue;
          sports.put(sport, equip);
          fireTableDataChanged();
        }
      }
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
      return columnIndex == EQUIPMENT_COL;
    }
  }
  private CustomModel model;

  public SSCCE() {
    super();

    model = new CustomModel();
    viewTable = new JXTable(model);
    editTable = new JXTable(model);
    editTable.addHighlighter(new ColorHighlighter(new HighlightPredicate() {
      @Override
      public boolean isHighlighted(Component renderer, ComponentAdapter adapter) {
        return adapter.isEditable();
      }
    }, Color.GREEN.brighter(), Color.BLACK));

    JPanel panelLeft = new JPanel(new BorderLayout(0, 10));
    panelLeft.add(new JLabel("Editable"), BorderLayout.NORTH);
    panelLeft.add(new JScrollPane(editTable));
    JPanel panelRight = new JPanel(new BorderLayout(0, 10));
    panelRight.add(new JLabel("How to make non-editable?"), BorderLayout.NORTH);
    panelRight.add(new JScrollPane(viewTable));

    splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, panelLeft, panelRight);
    add(splitPane);
  }

  public static void main(String args[]) {
    JFrame frame = new JFrame("One Model | Two Views");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(new SSCCE(), BorderLayout.CENTER);
    frame.setSize(360, 240);
    frame.setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:17:03.240

SwingX 支持在视图层上配置可编辑性。无需触摸您的模型，保持它可适当编辑：

```
viewTable = new JXTable(model);
viewTable.setEditable(false);
editTable = new JXTable(model); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:50:53.920

创建一个`WrapperTableModel`将所有调用委托给内部`TableModel`但返回 false 的`isCellEditable().`

将第一个可编辑模型设置为 table1 和 table2 中的包装模型（保持对第一个的引用）。

# c# - 废话参数异常调用方法

> ID：13493434
> 
> 赞同：1
> 
> 时间：2012-11-21T12:36:02.373
> 
> 标签：c#, visual-studio-2010, exception, 64-bit, autocad

我收到一个 ArgumentException “对象类型无法转换为目标类型”，但这对我来说没有多大意义。![您可以在此图像中看到异常](../Images/8b48dbc2b8a395e62f319c1a6d1124e9.png)

我正在调用的方法具有以下签名：

```
public void Scan(IProgressStatus monitor, string registryPath, string startupDir, string addinsDir, string databaseDir, string scanFolder, string[] filesToIgnore) 
```

我试图通过`monitor`而不是，`remMonitor`但仍然抛出异常。所有参数都有值，除了`scanFolder`null （但传递 string.Empty 仍然抛出异常）并且`filesToIgnore`是一个零长度数组。

我无法弄清楚为什么抛出异常。

不知道它是否有帮助，但该过程是 64 位的。如果我从 32 位进程调用相同的方法，则不会引发异常并且运行良好。

**[编辑]**如果我通过 null 而不是 remMonitor 它进入方法。

**[EDIT2]**更深入地调试我发现了一些奇怪的东西。我试图对参数进行拆箱：

```
rsd.Scan((object)remMonitor, registry.RegistryPath, registry.StartupDirectory, registry.DefaultAddinsFolder, registry.AddinCachePath, scanFolder, filesToIgnore); 
```

和

```
public void Scan(object monitor, string registryPath, string startupDir, string addinsDir, string databaseDir, string scanFolder, string[] filesToIgnore)
{
    monitor = (IProgressStatus)monitor; 
```

结果是：

```
?(IProgressStatus)monitor
Cannot cast 'monitor' (which has an actual type of 'System.Runtime.Remoting.Proxies.__TransparentProxy') to 'Mono.Addins.IProgressStatus' 
```

看起来那个监视器实际上有一个不兼容的类型，现在的问题是为什么？

**[EDIT3]**好的，我已经理解这是一个 DllHell 加载上下文问题，我已经打开了 Visual Studio 中的所有异常，它说 Mono.Addins 是在 LoadFrom 上下文中加载的。但是，如果我编写指令`Assembly.Load("Mono.Addins");`，则会引发相同的警告（从 LoadFrom 上下文加载）。一些提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:03:54.267

在 Google Group 中找到了这个，它在相同的方法上提到了相同的异常：

[https://groups.google.com/forum/#!msg/mono-addins/f4SzNPtcRIg/ma9EPezGdagJ](https://groups.google.com/forum/#!msg/mono-addins/f4SzNPtcRIg/ma9EPEzGdagJ)

> 在 SetupDomain.cs:Scan() 中有一行内容为： rsd.Scan (remMonitor, registryPath, startupDir, scanFolder, filesToIgnore);
> 
> 如果我进入这个方法，我不会被带到 Scan() 方法，而是返回 null 的 RemoteProgressStatus:InitializeLifetimeService()。从该方法返回后，将抛出异常。
> 
> 这是一个已知问题，也许可以解决？谢谢！
> 
> System.ArgumentException 发生 Message="无法将对象类型转换为目标类型。" Source="Mono.Addins" StackTrace：在 Mono.Addins.Database.RemoteSetupDomain.Scan(IProgressStatus monitor, String registryPath, String startupDir, String scanFolder, String[] filesToIgnore) 在 Mono.Addins.Database.SetupDomain.Scan(IProgressStatus monitor ，字符串 registryPath，字符串 startupDir，字符串 scanFolder，字符串 [] filesToIgnore) 在 C:\Users\Kiel\Projects\Mono.Addins\Mono.Addins\Mono.Addins.Database\SetupDomain.cs:line 43
> InnerException:
> 
> 解决方案：
> 
> 我移动了 AddinManager.Initialize(); 和 AddinManager.Registry.Update(null); 到标记为 [ClassInitialize] 的方法，而不是尝试在构造函数中执行此操作，事情再次变得愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:12:45.987

最后我设法解决了我的问题：

正如 EDIT3 中所写，这是一个加载上下文问题，[这篇博客](http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57143.aspx)很好地解释了每种方法的加载行为。

根据[这个提示](http://msdn.microsoft.com/en-us/library/ms172214.aspx)，我使用以下方法手动加载程序集：

```
 System.Reflection.AssemblyName an = new System.Reflection.AssemblyName();
        an.Name = "Mono.Addins";
        an.Version = new System.Version(1, 0, 0);
        System.Reflection.Assembly.Load(an); 
```

然后我将正确的程序集`Mono.Addins.dll`放在`AutoCAD.exe`路径中（这是`ApplicationBase`我的应用程序）。最初我认为`ApplicationBase`调用程序集的路径相同，但不是，仅供参考，以发现我使用过的应用程序基本路径`System.AppDomain.CurrentDomain.BaseDirectory;`

# javascript - 微风js的EntityManager是如何工作的？

> ID：13493435
> 
> 赞同：4
> 
> 时间：2012-11-21T12:36:09.403
> 
> 标签：javascript, breeze

我已经阅读了微风.js 的文档（顺便说一句，很棒的文档），但我对 EntityManager 有疑问。

假设我有以下工厂方法：

```
 var createManager = function () {
        return new breeze.EntityManager({
            serviceName: serviceName,
            metadataStore: store
        });
    }; 
```

然后我定义了 Entitymanager 的两个实例：

```
em1 = createManager();
em2 = createManager(); 
```

如果来电

```
em1.saveChanges(); 
```

是否`em2`也保存更改？

是否共享相同的缓存`em1`？`em2`

如果没有，我是否必须制作一个 Singleton EntityManager？在我的项目中，我在很多地方访问 EntityManager，在它们之间交换实体，所以我不确定要遵循的最佳（或正确）架构是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T13:20:48.730

我相信实体管理器在客户端充当自己的数据上下文。当您创建 em1 和 em2 时，您正在创建 2 个不同的管理器，因此它们彼此独立保存。如果您想在多个地方引用同一个实体管理器（这是它的优点之一），您可以使用 javascript 模块模式来引用您创建的实例。

我首选的技术是创建一个名为 datacontext 的模块。它拥有实体管理器和我想要的任何其他自定义功能。所有其他模块都引用此数据上下文并仅向其询问数据。数据上下文隐藏了其余模块的微风。它不是唯一的方法，但我喜欢它，因为它遵循良好的分离模式。

希望这可以帮助。

# objective-c - 在 unix (MAC OS X) 上阻止某些 URL？

> ID：13493436
> 
> 赞同：0
> 
> 时间：2012-11-21T12:36:16.990
> 
> 标签：objective-c, macos

从技术上讲，是否可以通过与浏览器程序分开来阻止某些网站在 Mac OS 上被访问？Windows中的主机文件类型？我需要做一个项目，我想这样做。我想如果我制作某种代理并将我的浏览器设置为它可以完成，但是还有更多用户友好的方式吗？就像编辑某些文件以将某些 URL 重定向到 127.0.0.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:20:36.180

该`hosts`文件也存在于 Mac 上，可用于以与其他系统相同的方式阻止对某些 URL 的访问。你可以在`/etc/hosts`.

# jquery - 特定 DIV 的 ID（如果单击）

> ID：13493439
> 
> 赞同：0
> 
> 时间：2012-11-21T12:36:28.527
> 
> 标签：jquery

我有一个包含多个 DIV 的页面，每个 DIV 都包含一个下拉列表（DDL）。我想取回我更改 DDL 值的指定 DIV 的 ID。

```
function ChangeValueInDropDownList(ddl) {
    var id = $(".divClass").attr("id");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:38:57.717

如果您的 select onchange 事件处理程序`ChangeValueInDropDownList`就像

```
$('select').on('change', ChangeValueInDropDownList); 
```

你应该试试这个

```
function ChangeValueInDropDownList(e) {
    var id = $(this).closest(".divClass").attr("id");
} 
```

或者如果您`ChangeValueInDropDownList`在选择处理程序的一侧调用，例如

```
$('select').on('change', function(){
     var ddl = $(this);
     ChangeValueInDropDownList(ddl);
}); 
```

那么它应该喜欢

```
function ChangeValueInDropDownList(ddl) {
    var id = ddl.closest(".divClass").attr("id");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:39:58.190

```
function ChangeValueInDropDownList(ddl) {
    var id = $(ddl).closest(".divClass").prop("id");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:38:10.443

你说“每个 DIV 包含一个下拉列表”。那么 DIV 是下拉列表的直接父级吗？如果是，那么试试这个

```
var id = $(this).parent().attr('id'); 
```

# ios - uisearchBar 黑色风格像 appstore

> ID：13493440
> 
> 赞同：1
> 
> 时间：2012-11-21T12:36:30.000
> 
> 标签：ios, customization, uisearchbar

我想要这样[http://savepic.ru/3302429.png](http://savepic.ru/3302429.png)

但我得到 - [http://savepic.ru/3296285.png](http://savepic.ru/3296285.png)

您如何查看所有输入文本 - 我可以修复它的黑色 -

```
for (UIView * v in _searchBar.subviews) {
        if ([v isKindOfClass:NSClassFromString(@"UITextField")]) {
            UITextField * t = (UITextField *)v;
            t.textColor = [UIColor whiteColor];
        }
    } 
```

和文本是白色的但搜索图标和图标 - “x”仍然是黑色的（

有人知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:15:40.280

试试下面的代码。

```
UITextField *searchField = [searchbar valueForKey:@"_searchField"];
searchField.textColor = [UIColor whiteColor]; 
```

或者

```
for(UIView *sub View in searchBar.subviews){
            if([subView isKindOfClass:UITextField.class]){
                [(UITextField*)subView setTextColor:[UIColor whiteColor]];
            }
        } 
```

希望它对你有用。

# php - 选择表并从另一个表中获取一些数据（如果存在）

> ID：13493441
> 
> 赞同：0
> 
> 时间：2012-11-21T12:36:32.310
> 
> 标签：php, mysql, zend-framework, doctrine

任何人都可以告诉我是否可以在 Doctrine 中实现以下场景（通常在 mysql 中）？

场景：我有表 cms_pages 字段如下：

> *   ID
> *   cms_languages_id
> *   姓名
> *   内容
> *   别名

还有另一个名为 cms_pages_translations 的表，其字段如下：

> *   ID
> *   cms_pages_id（外键）
> *   cms_languages_id
> *   姓名
> *   内容
> *   别名

现在，让我们说，

```
 $language_id = 2; 
```

我正在查询 cms_pages 并看到 cms_pages.cms_languages_id 不等于 $language_id...（所以我的页面内容不是我正在寻找的语言）。但没关系。我们有一个名为 cms_pages_translations 的表，其中应该存在翻译。所以我想在同一个查询中从 cms_pages_translations 中获取匹配值（名称、内容、别名），如果有记录的话

```
cms_languages_id == $language_id. 
```

我希望很清楚我想要实现的目标:)

因此查询输出数据将包含：

> *   id（来自 cms_pages）
> *   名称（来自 cms_pages_translations ）
> *   内容（来自 cms_pages_translations ）
> *   别名（来自 cms_pages_translations ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:09:54.523

您可以尝试`IFNULL`构建，例如：

```
SELECT IFNULL(
    (SELECT content FROM cms_pages WHERE cms_languages_id=3 AND id=1), 
    (SELECT content FROM cms_pages_translations WHERE cms_languages_id=3 AND id=1)
  ) 
```

唯一的一点是，IFNULL 一次只能重新运行一列。因此您可以单独查询每个列。

或者你试试`JOIN`这样的：

```
SELECT *
FROM cms_pages_translations t 
JOIN cms_pages p ON p.id=t.cms_pages_id
WHERE t.id=1 AND (t.cms_languages_id=1 OR p.cms_languages_id=1) 
```

如果它们存在，它将返回两个表的所有字段。假设“名称”、“别名”和“内容”的数据将只出现在一个 pageID 的两个表之一中，这将执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:56:19.960

如果 cms_pages_id 是 cms_pages.id 的外键，那么为什么不直接在 cms_pages_translations 中查询，因为所有翻译都应该出现在这个表中。我认为你应该有 $page_id 来获得任何特定的页面翻译。

您可以使用以下查询

```
SELECT id, NAME, content, alias FROM cms_pages WHERE id=1 AND cms_languages_id = 2
UNION
SELECT cms_pages_id, NAME, content, alias FROM cms_pages_translations WHERE cms_pages_id=1 AND cms_languages_id = 2 AND 0 = (SELECT COUNT(id) FROM cms_pages WHERE id=1 AND cms_languages_id = 2); 
```

但这再次为每个案例扫描 cms_pages_translations。对您来说最好的事情是触发 2 个有条件的查询（如评论中所述）并在 cms_pages_translations (cms_pages_id, cms_languages_id) 上创建索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:30:25.440

您可以尝试使用[MySQL Case](http://dev.mysql.com/doc/refman/5.0/en/case.html)。我记得它不能直接在 Zend 中使用，所以我将它与`Zend_Db_Expr`.

```
public function getPageTranslated($page_id, $language_id) {
    $name = new Zend_Db_Expr("
        CASE 
            WHEN p.language_id = $language_id THEN p.name
            ELSE pt.name
        END
    ");

    $content = new Zend_Db_Expr("
        CASE 
            WHEN p.language_id = $language_id THEN p.content
            ELSE pt.content
        END
    ");

    $alias = new Zend_Db_Expr("
        CASE 
            WHEN p.language_id = $language_id THEN p.alias
            ELSE pt.alias
        END
    ");

    $select = $this->select()
            ->from(array('p' => 'cms_pages'), array('id' => 'p.id', 'name' => $name, 'content' => $content, 'alias' => $alias))
            ->where('p.id = ?', $page_id)
            ->joinLeft(array('pt' => 'cms_pages_translations'), 'p.id = pt.cms_pages_id', array('pt.name', 'pt.content', 'pt.alias'))
            ->where('pt.language_id = ?', $language_id)
            ->limit(1)
            ->setIntegrityCheck(false);

    $result = $this->fetchAll($select);

    return $result? $result->toArray(): false;
} 
```

# android - 从 http 响应 (InputStream) 打开 PDF

> ID：13493449
> 
> 赞同：2
> 
> 时间：2012-11-21T12:37:09.327
> 
> 标签：android

我不确定我的问题是否正确。我有点卡在这里。我收到来自服务器的响应，它返回 InputStream - 它基本上是一个 pdf 文件

我是否必须将流写入文件，并将其临时存储在设备上，还是可以以某种方式直接打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:08:25.317

我在 SD 上存储了一个临时文件，然后用 PDF 查看器打开，如果有安装的话。

# python - 将列添加到文本文件

> ID：13493450
> 
> 赞同：3
> 
> 时间：2012-11-21T12:37:10.993
> 
> 标签：python, numpy

我有一个只有一列的数据文件。我想在左侧添加 2 列，在右侧添加 2 列。

我认为一个简单的方法是使用 numpy 数组，这是我尝试过的：

```
z = np.loadtxt('data_file.dat')

new = np.zeros((z.shape[0],5))

for i in range(z.shape[0]):
    new[i,0] = 'w040_0731.QR'
    new[i,1] = 1666.000
    new[i,2] = z[i]
    new[i,3] = 0.10000
    new[i,4] = 7

z.close() 
```

但它没有用 - 我认为是因为 numpy 数组并非设计为混合数字和字符串？我收到错误消息：

```
could not convert string to float: w040_0731.QR 
```

有人可以建议在我拥有的文本文件的左侧添加 2 列和在右侧添加 2 列的最有效方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:48:26.810

这应该这样做，假设您的列是空格分隔的，但它不使用`numpy`：

```
with open('data_file.dat') as in_file, open('output', 'w') as out_file:
    for line in in_file:
         data = float(line.strip())
         print >> outfile "'w040_0731.QR'", '1666.000', data, '0.10000', '7' 
```

# asp.net - 谷歌分析问题

> ID：13493454
> 
> 赞同：0
> 
> 时间：2012-11-21T12:37:22.027
> 
> 标签：asp.net, google-analytics

我们的网站没有扩展网址。例如，这里的“somepage.aspx”是我们的页面之一……所以如果在地址栏中输入某种类型并点击“somepage”，则请求转到“somepage.aspx”。我们为我们的网站启用了 GA 跟踪。在谷歌分析中，我们得到这个页面的不同计数，即使页面在两种情况下都是相同的。我只想跟踪一页下的计数。
现在我得到跟踪结果如下

页面名称 || 数数

某页.aspx || 5

某页 || 10

但我想要这样的结果页面名称|| 计数 Somepage.aspx || 15

请帮帮我...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:21:51.703

您需要在 .aspx 上执行 301 重定向，以将其重定向到更少的扩展名或实现规范 url 的链接，如[通过后面的代码将 CANONICAL 标记添加到我的页面以进行 SEO？](https://stackoverflow.com/questions/1398821/adding-the-canonical-tag-to-my-page-for-seo-through-code-behind)

# android - 片段的单独搜索视图

> ID：13493457
> 
> 赞同：7
> 
> 时间：2012-11-21T12:37:29.013
> 
> 标签：android, fragment, searchview

我有一个简单的活动，它拥有一个标签栏来切换两个片段。这两个片段都是一个 listFragment 并实现了一个 searchview 以使在 listfragment 中进行搜索成为可能。搜索视图始终显示在选项卡栏上方的操作栏中。

我遇到的问题是，一旦我切换选项卡（转到其他片段），搜索视图的输入就不会重置。因此，第二个片段从 searchview 读取输入并相应地过滤 listfragment，它实际上读取了我在片段 1 中输入的输入。

我想要的是搜索视图成为两个片段的单独搜索视图。有没有办法做到这一点？

这是我的代码：

**活动**

```
public class ActivityMainApp extends Activity implements ActionBar.TabListener {

private FragmentManager fragmentManager = getFragmentManager();

@Override
public void onCreate(Bundle icicle) {

    super.onCreate(icicle);
setContentView(R.layout.mainapp);

    ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Add tabs
    ActionBar.Tab relatieTab = actionBar.newTab().setText("Relaties");
    ActionBar.Tab takenTab = actionBar.newTab().setText("Taken");
    //ActionBar.Tab urenTab = actionBar.newTab().setText("Uren");

    // Listeners 
    relatieTab.setTabListener(this);
    takenTab.setTabListener(this);

    // Tabs toevoegen aan actionbar
actionBar.addTab(relatieTab);
actionBar.addTab(takenTab);

    // Create fragmentmanager to switch fragments
    FragmentTransaction fragmentTransaction = this.fragmentManager.beginTransaction();
    Fragment fragment = fragmentManager.findFragmentById(R.id.fragment_content);

    if(fragment == null){
        FragmentTransaction ft = fragmentManager.beginTransaction();
        ft.add(R.id.fragment_content, new FragRelaties());
    }

}

public void onTabSelected(Tab tab, FragmentTransaction ft) {

    FragmentTransaction fragmentTransaction = this.fragmentManager.beginTransaction();

    if(tab.getText().equals("Taken")){
        FragTaken fragment = new FragTaken();
        fragmentTransaction.replace(R.id.fragment_content, fragment);
        fragmentTransaction.commit();
    }

    if(tab.getText().equals("Relaties")){
        FragRelaties fragment = new FragRelaties();
        fragmentTransaction.replace(R.id.fragment_content, fragment);
        fragmentTransaction.commit();
    }

}

public void onTabUnselected(Tab tab, FragmentTransaction ft) {

}

public void onTabReselected(Tab tab, FragmentTransaction ft) {

}

} 
```

**片段一**

```
public class FragRelaties extends ListFragment implements SearchView.OnQueryTextListener {

private LayoutInflater inflater;
private ModelRelatie modelRelatie;
private AdapterRelatie relatieAdapter;
public ArrayList<Relatie> relaties;

public View onCreateView(final LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        this.inflater = inflater;

        Activity activity = getActivity();
        final Context context = activity.getApplicationContext();

        setHasOptionsMenu(true);

        new AsyncTask<Void, Void, ArrayList<Relatie>>(){

            protected ArrayList<Relatie> doInBackground(Void... params) {

                // Get all my contacts
                modelRelatie = ModelRelatie.instantiate(context);
                ArrayList<Relatie> relaties = modelRelatie.getRelaties();

                return relaties;

            }
            protected void onPostExecute(ArrayList<Relatie> relaties) {

                // Initial input of objects in the list
                relatieAdapter = new AdapterRelatie(inflater.getContext(), R.layout.relatieslijstitem, relaties);
                setListAdapter(relatieAdapter);

            }

        }.execute();

        View view = inflater.inflate(R.layout.relaties, container, false);

        return view;

}

@Override
public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {

inflater.inflate(R.menu.relatie_menu, menu);

            // Get the searchview
    MenuItem zoekveld = menu.findItem(R.id.zoekveld_fragrelatie);
    SearchView zoekview = (SearchView) zoekveld.getActionView();

    // Execute this when searching
    zoekview.setOnQueryTextListener(this);

    super.onCreateOptionsMenu(menu, inflater);

}

public void onListItemClick(ListView l, View v, int position, long id) {
   // Things that happen when i click on an item in the list
}

public boolean onQueryTextSubmit(String query) {
    return true;
}

public boolean onQueryTextChange(String zoekterm) {

    Activity activity = getActivity();
    Context context = activity.getApplicationContext();

    // We start searching for the name entered
    ModelRelatie modelRelatie = ModelRelatie.instantiate(context);
    ArrayList<Relatie> relaties = modelRelatie.zoekRelatie(zoekterm);

    // The returned objects are placed in the list
    this.relatieAdapter = new AdapterRelatie(inflater.getContext(), R.layout.relatieslijstitem, relaties);
    setListAdapter(relatieAdapter);

    return true;

} 
```

**片段二**

```
public class FragTaken extends ListFragment implements SearchView.OnQueryTextListener {

private LayoutInflater inflater;
private AdapterTaak adapterTaak;
private ModelTaken modelTaken;

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        this.inflater = inflater;

        Activity activity = getActivity();
        final Context context = activity.getApplicationContext();

        setHasOptionsMenu(true);

        this.modelTaken = ModelTaken.instantiate(context);
        ArrayList<Taak> taken = modelTaken.getTaken();

        // Initial input for the list
        adapterTaak = new AdapterTaak(inflater.getContext(), R.layout.takenlijstitem, taken);
        setListAdapter(adapterTaak);

        View view = inflater.inflate(R.layout.taken, container, false);
        return view;

}

@Override
public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {

inflater.inflate(R.menu.taken_menu, menu);

    // get the searview
    MenuItem zoekveld = menu.findItem(R.id.zoekveld_fragtaken);
    SearchView zoekview = (SearchView) zoekveld.getActionView();

    // Execute this when searching
    zoekview.setOnQueryTextListener(this);

    super.onCreateOptionsMenu(menu, inflater);

}

public boolean onQueryTextSubmit(String query) {
    return true;
}

public boolean onQueryTextChange(String zoekterm) {

    Activity activity = getActivity();
    Context context = activity.getApplicationContext();

    // Search the task by the inputed value
    ModelTaken modelTaken = ModelTaken.instantiate(context);
    ArrayList<Taak> taken = modelTaken.zoekTaak(zoekterm);

    // Return the found items to the list
    this.adapterTaak = new AdapterTaak(inflater.getContext(), R.layout.takenlijstitem, taken);
    setListAdapter(adapterTaak);

    return true;

}

} 
```

除了搜索部分外，这两个片段几乎相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T07:00:17.960

已经有一段时间了，但如果有人发现同样的问题，这就是我设法做到这一点的方法。

只需在每个片段中实现**onPrepareOptionsMenu()**并在其中调用 **onQueryTextChange("");** 传递 "" 作为查询字符串。

# diagram - Dia中的垂直文本

> ID：13493464
> 
> 赞同：9
> 
> 时间：2012-11-21T12:37:47.237
> 
> 标签：diagram, dia

如何在 Dia 中创建带有文本（垂直位置）的垂直箭头？创建一个没有文本的箭头显然很简单，但我不知道如何使文本垂直。

或者，如果您可以为图表推荐替代 Linux 软件，那么我也将不胜感激。我最终需要生成一个 eps 输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-25T15:00:29.943

有一个 YouTube 视频解释了 Dia 中的文本旋转：

[http://www.youtube.com/watch?v=E_MkltZxFHs](http://www.youtube.com/watch?v=E_MkltZxFHs)

# ios - iOS 上的对讲机

> ID：13493466
> 
> 赞同：1
> 
> 时间：2012-11-21T12:37:55.787
> 
> 标签：ios, networking, bluetooth, wifi, gamekit

我想为 ios 创建一个对讲机应用程序，我需要帮助才能开始。我需要使用哪个框架在没有 LAN 的情况下通过蓝牙/WiFi 实现 p2p 连接。

据我了解，Bonjour 不是解决方案，因为 iPhone/iPad 无法创建 Wifi 网络，对吗？

GameKit 框架呢？或者也许是任何其他有助于将两个设备连接在一起的框架。

在应用商店里我找到了 Voxer Walkie-Talkie 应用，有人知道他们使用的是哪个框架吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T13:16:12.537

根据这个 SO 问题[，蓝牙的范围是什么 蓝牙](https://stackoverflow.com/questions/658899/what-is-the-range-of-bluetooth-and-is-it-strictly-11)对于对讲机/对讲机应用程序来说不是一个好的选择，因为您必须在对方的听力范围内才能使其工作。因此，您将被 wifi 和/或电话公司作为一种有用的传输机制所困。

在查看[Voxer 网站](https://support.voxer.com/home)后，您似乎必须注册一个帐户，并邀请人们加入您那里才能进行对话。所以它几乎不是p2p。它是用户 <-> 服务器 <-> 用户

您应该阅读 Apple 的 GameKit 文档：[为您的游戏添加实时匹配的清单](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Matchmaking/Matchmaking.html#//apple_ref/doc/uid/TP40008304-CH9-SW16) 他们讨论了支持哪些网络拓扑以及如何执行诸如向游戏添加语音聊天之类的操作——这正是您想要做的事情，除了没有游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:08:58.173

GameKit 是创建点对点蓝牙连接的正确解决方案。但是蓝牙并不是为远距离传输大量数据而设计的！

要大致了解如何使用 GameKit 创建蓝牙连接，请查看[mobile.tutsplus.com 上的 BluetoothTextMessenger 教程](http://mobile.tutsplus.com/tutorials/iphone/bluetooth-connectivity-with-gamekit/)。

# screen-scraping - 从谷歌图表中提取数据

> ID：13493468
> 
> 赞同：0
> 
> 时间：2012-11-21T12:38:04.607
> 
> 标签：screen-scraping, web-crawler, google-visualization

我正在寻找一种从 Google 透明度报告中显示的图表中提取数据的方法。 [http://www.google.com/transparencyreport/traffic/](http://www.google.com/transparencyreport/traffic/)

该图表以 Flash 形式显示，并按国家和产品显示流量。

是否有可能以编程方式获取显示的数据？

# php - Laravel 中的动态选择列表，带有表单基本包

> ID：13493472
> 
> 赞同：4
> 
> 时间：2012-11-21T12:38:12.970
> 
> 标签：php, laravel

大家好，我已经搜索了一段时间，但在他们的文档中找不到。有谁知道如何使用 form-b​​ase 插件在 laravel 中构建动态选择列表？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T12:47:05.107

```
public function user_options()
{
    return array('' => 'Choose a User') + User::lists('id', 'name');
}

{{ Form::select('user_id', UserWhateverForm::user_options(), UserWhateverForm::old('user_id')) }} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T12:51:41.950

```
echo Form::select('size', array('L' => 'Large', 'S' => 'Small'), 'S'); 
```

在数组中，您可以动态指定选项/值。最后一个选项是默认值。

请参阅[文档](http://laravel.com/docs/views/forms#drop-down-lists)。

# java - 无法在水晶报表 xi java 中将报表导出到 excel

> ID：13493473
> 
> 赞同：1
> 
> 时间：2012-11-21T12:38:15.123
> 
> 标签：java, swing, export-to-excel, crystal-reports-xi

> 如何在UI 类`export to excel`的导出按钮上添加选项？`reportviewebean`

我只有选项`crystal report (rpt)`, `pdf`, `microsoft word`-editable 和`rtf`.

我需要它来将我的报告导出到 Excel。

# android - 设计类似android主屏幕的布局

> ID：13493474
> 
> 赞同：0
> 
> 时间：2012-11-21T12:38:16.203
> 
> 标签：android, android-layout

我需要设计一个看起来像本文所附的 android 主屏幕的布局。

![布局类似于 android 主屏幕](../Images/b543b323676e1bb5b94b8cacf3b3e20c.png)

尝试但无法获得上述布局的任何示例，尝试使用带有权重的线性布局编写，但在我在 Froyo 上设计的一个屏幕中无法获得这么多的 ImageButton 或按钮，并且屏幕应该是可滚动的。

任何示例都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:42:42.047

您可以使用网格布局来实现这种类型的布局。[这](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)是如何在网格布局中设置图像的示例

# forms - 提交表单前多于一组选择

> ID：13493475
> 
> 赞同：0
> 
> 时间：2012-11-21T12:38:24.247
> 
> 标签：forms, asp-classic

我的任务是在旧的 ASP 中创建一个电子邮件表单，用户可以预订一个活动。有没有一种方法，如果他们想预订多个活动，比如三个活动，他们可以选择三个不同的选择，而不必重新提交表格三次，并且只提交一次

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:50:49.880

我不确定我是否完全理解这个问题，你能不能只使用带有“复选框”类型的多个表单输入？

# python - UnicodeEncodeError：“ascii”编解码器无法编码字符

> ID：13493477
> 
> 赞同：11
> 
> 时间：2012-11-21T12:38:33.117
> 
> 标签：python, unicode, elementtree

我有一个带有 url 响应的 dict。喜欢：

```
>>> d
{
0: {'data': u'<p>found "\u62c9\u67cf \u591a\u516c \u56ed"</p>'}
1: {'data': u'<p>some other data</p>'}
...
} 
```

在此数据值上使用`xml.etree.ElementTree`函数时 ( `d[0]['data']`) 我得到了最著名的错误消息：

`UnicodeEncodeError: 'ascii' codec can't encode characters...`

我应该如何处理这个 Unicode 字符串以使其适合 ElementTree 解析器？

PS。请不要向我发送带有 Unicode 和 Python 解释的链接。不幸的是，我已经阅读了所有内容，并且无法像其他人一样使用它。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-21T12:46:52.620

您必须手动将其编码为 UTF-8：

```
ElementTree.fromstring(d[0]['data'].encode('utf-8')) 
```

因为 API 仅将编码字节作为输入。UTF-8 是此类数据的良好默认值。

它将能够从那里再次解码为 un​​icode：

```
>>> from xml.etree import ElementTree
>>> p = ElementTree.fromstring(u'<p>found "\u62c9\u67cf \u591a\u516c \u56ed"</p>'.encode('utf8'))
>>> p.text
u'found "\u62c9\u67cf \u591a\u516c \u56ed"'
>>> print p.text
found "拉柏 多公 园" 
```

# iphone - 如果应用程序从通行证开始，则会收到通知

> ID：13493478
> 
> 赞同：4
> 
> 时间：2012-11-21T12:38:33.403
> 
> 标签：iphone, ios, passbook

有可能从 pass inside 启动相应的应用程序`passbook`。

是否可以收到通知？也许在`application:didFinishLaunchingWithOptions:`，`launchOptions`包括通行证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T17:28:21.967

您可以设置`appLaunchURL`传递给关联应用程序的 通行证`application:didFinishLaunchingWithOptions:`以及`application:handleOpenURL:`从通行证启动应用程序的时间（请参阅[存折包格式参考 - 关联的应用程序密钥](https://developer.apple.com/library/ios/documentation/UserExperience/Reference/PassKit_Bundle/Chapters/TopLevel.html#//apple_ref/doc/uid/TP40012026-CH2-SW7)）

此外，从 iOS 7.0 开始，您可以将额外信息放入 pass`userInfo`中，相关应用程序可以通过`PKPass`'s访问这些信息`localizedValueForFieldKey:`（请参阅[Passbook Programming Library - Reading a Pass](https://developer.apple.com/library/ios/documentation/userexperience/conceptual/PassKit_PG/Chapters/Apps.html#//apple_ref/doc/uid/TP40012195-CH6-SW72)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T18:25:34.597

There is no information about retrieving data that indicates the app was launched from PassBook. In fact it seems that there is no data sent to the app about passbook. Passbook passes launch apps with corresponding App-Id`s. What you can do is check that if there is the pass you are looking for is in the library. You can read from the documentation here :[PassBook Documentation](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Apps.html#//apple_ref/doc/uid/TP40012195-CH6-SW70) But keep in mind that Passbook Development Guidelines state that your passbook pass needs to be independent of an app.

# ios - 在 iOS 通讯录中使用未声明的标识符“kABNicknameProperty” - 为什么？

> ID：13493481
> 
> 赞同：0
> 
> 时间：2012-11-21T12:38:45.550
> 
> 标签：ios, ios5, compiler-errors, addressbook, abaddressbook

我正在尝试**在 iOS (5.0+) 上获取地址簿条目的姓名和出生日期，并且我通过**[文档](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/BasicObjects.html#//apple_ref/doc/uid/TP40007744-CH3-SW6)和[这篇文章](http://iphonedevsdk.com/forum/iphone-sdk-development/44747-iphone-address-book-get-person-by-name.html)找到了这样做的方法。但是**我总是得到标题中提到的所有“kAB ...”常量的错误，**尽管我确定我在我的项目中链接了两个库 AddressBook 和 AddressBookUI。

有谁知道我做错了什么？

这是我的代码：

```
#import <AddressBook/AddressBook.h>
#import <AddressBookUI/AddressBookUI.h> 
```

// 一些其他代码...

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    NSString *name;

    if ((NSString *)ABRecordCopyValue(person, kABNicknameProperty) != nil) {
        name = (NSString *)ABRecordCopyValue(person, kABNicknameProperty);
    } else if ((NSString *)ABRecordCopyValue(person, kABFirstNameProperty) != nil) {
        name = (NSString *)ABRecordCopyValue(person, kABFirstNameProperty);
    } else if ((NSString *)ABRecordCopyValue(person, kABLastNameProperty) != nil) {
        name = (NSString *)ABRecordCopyValue(person, kABLastNameProperty);
    }

    int birthYear;
    if ((NSDate *)ABRecordCopyValue(person, kABBirthdayProperty) != nil) {
        NSDate *birthDate = (NSDate *)ABRecordCopyValue(person, kABBirthdayProperty) != nil;
        NSCalendar *cal = [[NSCalendar alloc] init];
        NSDateComponents *components = [cal components:0 fromDate:birthDate];
        birthYear = [components year];
    }

    // do something with name and birth year
    [self dismissModalViewControllerAnimated:YES];

    return NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:34:53.627

看起来您使用的常量似乎是 Mac OS X 特有的。其版本的 iOS 文档`ABRecordCopyValue`导致常量名称，例如`kABPersonNicknameProperty`.

# php - 比较 PHP 中的 unix 时间戳

> ID：13493482
> 
> 赞同：3
> 
> 时间：2012-11-21T12:38:45.870
> 
> 标签：php, html, mysql

在 PHP 中，我有：

```
$diff = abs(strtotime(date('m/d/Y h:i:s')) - strtotime($latest));
$years = floor($diff / (365*60*60*24));
$months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
echo floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24)); 
```

如何以秒为单位获得差异？我尝试了以下方法：

```
$diff = abs(strtotime(date('m/d/Y h:i:s')) - strtotime($latest)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:42:39.313

改用`DateTime`它会让你的代码更干净。

```
$latest = new DateTime($latest);
$now = new DateTime();

$diff = $latest->diff($now);
echo $diff->format('%y years %m months %d days'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:45:40.523

时间戳是从 1970 年 1 月 1 日开始的几秒钟。所以它很简单：

```
<?php
    $now = time();
    $latest = "21-11-2012 14:44";
    $latest = strtotime($latest);
    $diff = ($now - $latest);
    //$diff = Number of seconds difference between now and 21-11-2012 14:44
?> 
```

另请查看[DateTime](http://www.php.net/manual/en/class.datetime.php)类，它在处理日期时具有更多功能。

# yahoo - 用于货币兑换的雅虎金融 API

> ID：13493490
> 
> 赞同：2
> 
> 时间：2012-11-21T12:39:33.823
> 
> 标签：yahoo, currency, yql, yahoo-finance

我正在尝试在 Android 中创建一个简单的应用程序。该应用程序会将我可以从 Yahoo 查询的所有实时货币作为输入，我使用 YQL（Yahoo 查询语言）来获取这些。

当我使用（从 YQL 控制台）时：

```
select * from yahoo.finance.xchange where pair in ("USDINR") 
```

我得到 USD-INR 汇率，当我使用查询时：

```
select * from yahoo.finance.xchange where pair="USDINR, EURUSD,CADUSD,GBPUSD" 
```

我正在兑换美元、印度卢比、欧元、加元和英镑。

如何使用 Select 语句获取所有货币（总共 160 种），而不用硬编码 YQL 中的货币代码？或者有没有其他方法可以从雅虎获得所有货币？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T13:31:23.857

您不能，在每一层都需要值对。针对表的 YQL 请求调用服务

[http://download.finance.yahoo.com/d/quotes.csv?s=](http://download.finance.yahoo.com/d/quotes.csv?s=) ....

这反过来又要求查询是具体的

[https://github.com/yql/yql-tables/blob/master/yahoo/finance/yahoo.finance.xchange.xml](https://github.com/yql/yql-tables/blob/master/yahoo/finance/yahoo.finance.xchange.xml)

# android - 安装错误：INSTALL_FAILED_INVALID_INSTALL_LOCATION

> ID：13493494
> 
> 赞同：4
> 
> 时间：2012-11-21T12:39:49.167
> 
> 标签：android

[在后台安装 APK](http://paulononaka.wordpress.com/2011/07/02/how-to-install-a-application-in-background-on-android/#comment-90)

[Git Hub：源代码](https://github.com/paulononaka/Android-InstallInBackgroundSample)

`google-certificate.keystore`存在于证书文件夹中[参见上面的 git 链接]

第 1 步：我在模拟器中运行代码，它工作正常 [但我需要将该`google-certificate.keystore`位置放在自定义调试密钥库中 [它存在于 Eclipse -> Windows -> Preference -> Android -> bulit]

第2步：如果我没有把它给出的位置`java.lang.reflect.InvocationTargetException`

如果我连接开发人员电缆并将其运行到 Android 设备

如果我按照步骤 1 它 `Installation error: INSTALL_FAILED_INVALID_INSTALL_LOCATION`在控制台窗口中给出

如果我按照第 2 步操作，它会安装在设备中，但会给出相同的异常

编辑：

[签名的 APK 指南](http://paulononaka.wordpress.com/2011/10/19/apk-with-system-privileges/)

这是创建为 apk 文件的步骤，但我不应该在哪里输入该命令

编辑：添加 Manifest.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.yal"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INSTALL_PACKAGES"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".InstallInBackgroundSample"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:58:00.437

博客人自己在评论中发布了这个：

> Hi guys, I found the problem and unfortunately my news is not good. I discovered that this technique only works for me because I use the security certificate of the simulator (the same certificate used by my device in my case). I researched and saw that there are two ways to use the API hidden: - Put your application pre-installed into a system folder on the ROM - Compile your application using the manufacturer’s security certificate So this will just be useful for you if you will make an application to a specific device and you have the certificate of it, just like me. I apologize for not notifying it before, but I did not know that. I’ll update my post and I’ll warn about it at first. Thank you for the feedback.

What you want is not possible anymore without the phone manufacturers certificate or a rooted device.

# io - KVM 中的 I/O 拦截

> ID：13493496
> 
> 赞同：1
> 
> 时间：2012-11-21T12:40:05.303
> 
> 标签：io, kvm

我正在对 KVM（基于内核的虚拟机）上的磁盘 I/O 进行拦截。目的是获取虚拟机正在读/写的块号，并中断这个操作（如果这个块用户不想读/写）。

直接写入磁盘的操作可能会中断，但是通过vim修改，我们还是可以看到，但是重启虚拟机后，修改会被取消（也就是说重启VM后，修改不会受到影响，也许是调用缓冲 IO？）。

有谁知道如何解决这个问题？我特别尝试了 EXT2 文件系统，是否有适用于所有 EXT 文件系统的通用解决方案？

谢谢！

# c# - WP7 - InputPrompt “元素已经是另一个元素的子元素。”

> ID：13493503
> 
> 赞同：1
> 
> 时间：2012-11-21T12:40:41.840
> 
> 标签：c#, windows-phone-7, xaml, messagebox

我有这样的代码：

```
private InputPrompt input = new InputPrompt();

        public MainPage()
        {
            InitializeComponent();
            Loaded += MainPage_Loaded;
            input.Completed += Input_Completed;
            input.Title = "Počet strků do konce";
            input.Message = "Zadejte počet strků do kterých chcete hrát";
            input.InputScope = new InputScope { Names = { new InputScopeName() { NameValue = InputScopeNameValue.Number } } };

            PhoneApplicationService.Current.ApplicationIdleDetectionMode = IdleDetectionMode.Disabled;
        }

        void Input_Completed(object sender, PopUpEventArgs<string, PopUpResult> e)
        {
            var input = (InputPrompt)sender;
            appSettings.TextBoxSettingEndPoints = Convert.ToInt16(input.Value);
            pocitadlo = new Counter(appSettings.TextBoxSettingEndPoints);
            LayoutRoot.DataContext = pocitadlo;
        }

        void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            if (showPopup)
            {
                ShowPopUp();
            }
        }

        private void ShowPopUp()
        {
            input.Value = appSettings.TextBoxSettingEndPoints.ToString();
            input.Show();
            showPopup = false;
        }
         private void MenuItemNewGame_Click_1(object sender, EventArgs e)
        {
            endOfGame = false;
            pocitadlo.CurrentPoints = 0;
            pocitadlo.AllPoints = 0;
            ShowPopUp();
        } 
```

有人可以帮助我为什么会出现错误：“元素已经是另一个元素的子元素。” 当我点击 menuItem NewGame （最后一个事件）时？

# entity-framework - 未运行 SetInitializer 但 EF 仍在尝试 CreateDatabase

> ID：13493506
> 
> 赞同：4
> 
> 时间：2012-11-21T12:40:50.433
> 
> 标签：entity-framework, asp.net-mvc-4

使用 EF5.0 运行 MVC4 项目

在开发我的模型时，EF 会在每次模型更改时创建一个新数据库并使用样本数据进行播种。模型设计现已完成，数据库中填充了实时数据，因此我评论了负责创建数据库的行：

```
//System.Data.Entity.Database.SetInitializer(new SampleData()); 
```

但是在尝试编译时，我遇到了：

> 无法创建 xx，因为它已经存在。更改文件路径或文件名，然后重试该操作。创建数据库失败。无法创建列出的某些文件名。检查相关错误。

我什至从项目中排除了带有 Seed 方法的文件，因此无法调用“DropCreateDatabaseIfModelChanges” - 据说。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:10:08.140

您可以禁用默认初始化程序

```
System.Data.Entity.Database.SetInitializer<MyContextName>(null); 
```

还有一种web.config方式：http: [//msdn.microsoft.com/en-US/data/jj556606](http://msdn.microsoft.com/en-US/data/jj556606)

# android - LOG4CXX 到 Android 日志

> ID：13493516
> 
> 赞同：2
> 
> 时间：2012-11-21T12:41:42.907
> 
> 标签：android, logging, android-ndk, log4cxx

如何轻松替换 Android 日志的 log4cxx？

我试图重新定义为：

```
#define LOG4CXX_INFO(logger, message) __android_log_print(ANDROID_LOG_INFO, LOG_TAG, message) 
```

但是显示编译错误：

```
xxxxx.cpp:122:13: error: no match for 'operator<<' in '"Could not open file " << fileName' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:20:57.147

最好写一个自定义的[Appender](http://wiki.apache.org/logging-log4cxx/Appender)包装 __android_log_print。

请参阅[Log4cxx 自定义附加程序](https://stackoverflow.com/questions/874661/log4cxx-custom-appender)。

# android - sencha touch Uncaught TypeError: Cannot read property 'isReady' of undefined sencha-touch-all.js:21

> ID：13493517
> 
> 赞同：3
> 
> 时间：2012-11-21T12:41:47.373
> 
> 标签：android, sencha-touch, touch, sencha-touch-2

我正在尝试在我的设备或 Android 模拟器上运行我的应用程序，但我收到以下错误消息：

```
Uncaught TypeError: Cannot read property 'isReady' of undefined sencha-touch-all.js:21 
```

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>Sencha Touch Demo 2</title>
    <link rel="stylesheet" type="text/css" href="./touch2/resources/css-debug/sencha-touch.css">
    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="./touch2/sencha-touch-all.js"></script>
    <script type="text/javascript" src="myapp.js"></script>
</head>
</html> 
```

**myapp.js**

```
Ext.require([ 'Ext.MessageBox' ]);
Ext.require([ 'Ext.Label' ]);
Ext.Loader.setConfig({
enabled: true
});

Ext.application({

                name: 'touch-demo',

                controllers: [
                    'Main'
                ],

                models: [

                    'contato'

                ],

                stores: [

                    'contatos',

                    'remotecontatos'

                ],

                views: [

                    'contatoslist',

                    'ContatosForm',

                    'remoteListContato'
                ],

            viewport: {
                layout: {
                    type: 'card',
                    animation: {
                    type: 'slide',
                    duration: 1000
                        }
                    }
            },

            launch: function(){

            }
}); 
```

我能做些什么？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:23:46.037

您是否考虑过使用 sencha 打包的应用程序运行该应用程序？

我首先在浏览器上进行所有测试，然后构建一个打包版本。

（命令行上的'Sencha app build package'）

这两种方法的主要区别在于您不是使用 Ext.Loader 动态加载资源。据我了解，没有移动环境可以使用加载器，所以如果你想静态引用 index.html 中的每个应用程序文件，它也应该可以工作。我可能错了，但那句话有一些道理。

加上更好的一切，让您的生产应用程序全部缩小并很好地打包。

希望这可以帮助。

# eclipse - Eclipse 插件开发问题

> ID：13493518
> 
> 赞同：2
> 
> 时间：2012-11-21T12:41:49.990
> 
> 标签：eclipse, plugins, eclipse-plugin

我正在编写一个 Eclipse 插件并且项目环境配置正确（我相信）。

我能够在没有任何编译时错误的情况下编译解决方案。以下是在调试解决方案时抛出异常的代码片段。我确信所有必需的插件和外部 jar 都已正确配置。

我已经尝试了用户在互联网上建议的几乎所有方法，但没有任何效果。（我什至也根据他们的建议更改了代码）。

因此，请您让我知道我低于错误的原因并建议替代方法。

```
public static IProject getCurrentSelectedProject() {
        try {
            IWorkspace workspace = ResourcesPlugin.getWorkspace();
            IProject[] projects = workspace.getRoot().getProjects();
            for (int i = 0; i < projects.length; i++) {
                IProject project = projects[i];
                if ((project.isOpen())) {
                    return project;
                }
            }
        } catch (Throwable ex) {
            ex.printStackTrace();
        }
        return null;

    } 
```

以下是我收到的错误

```
java.lang.NoClassDefFoundError: org/eclipse/core/resources/ResourcesPlugin
    at com.prithvi.editor.actions.UploadAction.getCurrentSelectedProject(UploadAction.java:81)
    at com.prithvi.editor.actions.UploadAction.run(UploadAction.java:39)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginAction.java:229)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.ClassNotFoundException: org.eclipse.core.resources.ResourcesPlugin
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 33 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-15T13:28:52.380

-> 打开 Plugin.xml -> 依赖项选项卡 -> 点击添加 ->`org.eclipse.core.resources`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T05:51:17.097

当您启动应用程序时，您必须在启动配置中指定应加载哪些插件（连同您自己的插件），或者如果您有产品配置，则仅启动该产品配置中包含的插件和功能。

通常这工作得很好，因为 Eclipse 可以识别不同插件之间的依赖关系，因此会自动添加所有必要的插件。但是， org.eclipse.core.resources 是少数例外之一，您必须在这 3 个位置之一手动添加它：

*   启动配置
*   或产品配置
*   或在您的插件的依赖项中（这是首选）

# eclipse - EAR-Project 放置属性的位置-EJB-Project 使用 Glassfish3.1.2 和 Java EE6 使用的文件

> ID：13493522
> 
> 赞同：2
> 
> 时间：2012-11-21T12:42:05.970
> 
> 标签：eclipse, classloader, java-ee-6, ear

我的 EAR 项目中的 .properties 文件有问题。我已经在 svf 以及其他板上检查了有关此问题的一些主题。

我在我的 EJB 项目中使用 Util 的属性文件，但我无法访问它们。参考 jboss-forum 中的帖子，我已经尝试将它们放在 EAR-Project 和 EarContent/lib/classes/ 中的 META-INF 下。遗憾的是它没有用。我仍然收到此错误：

> 严重：java.util.MissingResourceException：找不到基本名称凭据的包，在 java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1499) 在 java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1322) 的语言环境 en_US在 java.util.ResourceBundle.getBundle(ResourceBundle.java:724) 在 com.lumen.Utils.PropsUtil.loadProperties(PropsUtil.java:50)

我尝试通过以下方式访问道具文件：第 50 行： `ResourceBundle rb = ResourceBundle.getBundle("credentials");`

我的项目结构如下所示：

**耳朵**

->耳朵内容

-->库

---> 一些externallibs.jar

--->类

---->*.properties

->元信息

-->*.properties

-->应用程序.xml

**EJB**

->源

-->package.package.Util <-- 这里我需要加载属性

Web <-- 这里我根本不需要属性

->源

->网页内容

添加信息：我使用 eclipse 进行开发，到目前为止，项目的其余部分运行良好。

希望你能帮我 ：）

格力兹祖色

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T21:18:10.903

`classes`EAR 结构中不允许使用文件夹。

因此，首先您应该将资源打包到一个 jar 文件中，该文件可以是已经存在的，也可以是 lib 文件夹中的专用文件。

如果您使用简单的类加载器层次结构，则会出现另一个问题：

```
ResourceBundle.getBundle(String) 
```

在存在多个类加载器的情况下调用类加载器相关方法的正确方法是指定当前*上下文*类加载器，如下所示：

```
ResourceBundle.getBundle("bundlename",Locale.getDefault(),Thread.currentThread.().getContextClassLoader()) 
```

# android - android蓝牙接收来自配对设备的连续传入数据

> ID：13493525
> 
> 赞同：2
> 
> 时间：2012-11-21T12:42:21.597
> 
> 标签：android

我已经使用下面的代码来检测活动的蓝牙设备并创建它们的列表。准备好活动蓝牙设备列表后，我们可以从列表中选择一个设备并向该设备发送连接请求。一旦请求的设备接受连接请求，我需要从配对设备获取连续的传入数据信号。

```
protected void connect(BluetoothDevice device) {
        try {
            Log.d(TAG,"connect bluetooth");
            // Create a Socket connection: need the server's UUID number of
            // registered
            Method m = device.getClass().getMethod("createRfcommSocket",
                    new Class[] { int.class });
            socket = (BluetoothSocket) m.invoke(device, 1);
            socket.connect();
            Log.d(TAG, ">>Client connectted");
            inputStream = socket.getInputStream();
            socket.getOutputStream();
            int read = -1;
            final byte[] bytes = new byte[2048];
            while (true) {
                synchronized (obj1) {
                    read = inputStream.read(bytes);
                    Log.d(TAG, "read:" + read);
                    if (read > 0) {
                        final int count = read;
                        String str = SamplesUtils.byteToHex(bytes, count);
                        //                      Log.d(TAG, "test1:" + str);
                        String hex = hexString.toString();
                        if (hex == "") {
                            hexString.append("<--");
                        } else {
                            if (hex.lastIndexOf("<--") < hex.lastIndexOf("-->")) {
                                hexString.append("\n<--");
                            }
                        }
                        hexString.append(str);
                        hex = hexString.toString();
                        //                      Log.d(TAG, "test2:" + hex);
                        if (hex.length() > maxlength) {
                            try {
                                hex = hex.substring(hex.length() - maxlength,
                                        hex.length());
                                hex = hex.substring(hex.indexOf(" "));
                                hex = "<--" + hex;
                                hexString = new StringBuffer();
                                hexString.append(hex);
                            } catch (Exception e) {
                                e.printStackTrace();
                                Log.e(TAG, "e", e);
                            }
                        }
                        _handler.post(new Runnable() {
                            public void run() {
                            }
                        });
                    }
                }
            }

        } catch (Exception e) {
            Log.e(TAG, ">>", e);
            Toast.makeText(getBaseContext(),
                    getResources().getString(R.string.ioexception),
                    Toast.LENGTH_SHORT).show();
            return;
        } finally {
            if (socket != null) {
                try {
                    Log.d(TAG, ">>Client Socket Close");
                    socket.close();
                    socket = null;
                    // this.finish();
                    return;
                } catch (IOException e) {
                    Log.e(TAG, ">>", e);
                }
            }
        }
    } 
```

我需要检测连续传入的数据信号。是否可以做到。

# iphone - iPhone 应用程序 - 仅使用 Storyboard 支持纵向方向

> ID：13493526
> 
> 赞同：3
> 
> 时间：2012-11-21T12:42:25.453
> 
> 标签：iphone, rotation, storyboard, orientation, portrait

iPhone 新手，难以让 iPhone 应用程序*仅*支持纵向。

我正在使用情节提要并针对 iOS5+。

我在这里看过很好，其他人的建议对我没有用。

我试过实施

```
 -(BOOL)shouldAutorotateToInterfaceOrientation:UIInterfaceOrientation)interfaceOrientation       
 {
      return NO;
 } 
```

在视图控制器上，并将我的 info.plist 更改为

```
<key>UISupportedInterfaceOrientations</key>
<array>
<string>UIInterfaceOrientationPortrait</string>
</array> 
```

但没有快乐。在情节提要中，我还在属性编辑器中选择了肖像。

还有什么想法吗？

非常感谢，乔丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:17:41.167

您是否尝试过使用在 xCode4 上选择目标时出现的方向按钮？

![在此处输入图像描述](../Images/91a32315965cc91ab800cc6488a8cf89.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:52:48.853

您可以将以下选项用于相同的方法。无需更改 plist 文件。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return ((interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown));
} 
```

在这里，我将**UIInterfaceOrientationPortrait**和**UIInterfaceOrientationPortraitUpsideDown**与 or 条件一起使用，使用它我允许应用程序仅在纵向模式下旋转。

如果您希望您的应用程序可以在所有视图侧旋转，则在上述方法中**返回 YES 。****返回 NO**表示您希望视图无论如何都不要旋转。

# mysql - where 子句难题：在哪里“喜欢”一件事而不是“喜欢另一件事”失败了？

> ID：13493529
> 
> 赞同：0
> 
> 时间：2012-11-21T12:42:33.403
> 
> 标签：mysql, substring, where-clause

嗨，我有一个表结构：

```
mysql>DESC file;
file_id        
fullpathname 
```

有记录

```
file_id | fullpathname                                         
--------+------------------------------------------------------
      6 | /var/tmp/4x4 and 6x4/test/test3.txt
      7 | /var/tmp/4x4 and 6x4/test/somefile
      8 | /var/tmp/4x4 and 6x4/test          
      9 | /var/tmp/4x4 and 6x4/6x4_1.JPG     
     10 | /var/tmp/4x4 and 6x4/6x4_2.JPG     
     11 | /var/tmp/4x4 and 6x4/4x4_2.jpg     
     12 | /var/tmp/4x4 and 6x4/4x4_1.jpg     
     13 | /var/tmp/dir/4x4 and 6x4 
```

并且查询需要几乎是我下面的内容（但它不起作用）

```
SELECT * FROM file
WHERE fullpathname LIKE '/var/tmp/4x4 and 6x4%'
AND fullpathname NOT LIKE '/var/tmp/4x4 and 6x4/%/' 
```

但它不需要返回 file_id 6 和 7 它只需要选择一个节点深的“路径”。这是一个奇怪的，但情况就是这样

它应该返回的是

```
file_id | fullpathname                                         
--------+------------------------------------------------------
      8 | /var/tmp/4x4 and 6x4/test          
      9 | /var/tmp/4x4 and 6x4/6x4_1.JPG     
     10 | /var/tmp/4x4 and 6x4/6x4_2.JPG     
     11 | /var/tmp/4x4 and 6x4/4x4_2.jpg     
     12 | /var/tmp/4x4 and 6x4/4x4_1.jpg     
     13 | /var/tmp/dir/4x4 and 6x4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:45:49.327

试试这个：

```
SELECT * FROM file
WHERE fullpathname LIKE '/var/tmp/4x4 and 6x4%'
AND fullpathname NOT LIKE '/var/tmp/4x4 and 6x4/%/%' 
```

# iphone - UITableView 像 Xcode 中的 gridview 吗？

> ID：13493533
> 
> 赞同：2
> 
> 时间：2012-11-21T12:42:45.900
> 
> 标签：iphone, xcode, uitableview

我正在实现 UITableView 的概念，就像 gridView 一样。我在 UITableView 中加载 NSMutableArrays 数据。我在 tableViewCell 的 UIButtons 中加载数组项，当按下按钮时，应该执行一些操作..即每行 4 个按钮和行数取决于数组项的数量。我可以部分完成。我可以单击按钮，只要数组中有 8 个或少于 8 个项，按钮的下一步操作就会进行。但是当有更多项时然后我可以查看添加的按钮，但我无法单击按钮（即 -(IBAction)buttonPressed:(id)sender{ ）没有响应..无法理解我哪里出错了..？

```
sections=[[NSMutableArray alloc] init];
        for(int s=0;s<1;s++)
        {
            NSMutableArray *section=[[NSMutableArray alloc] init];
            for(int i=0;i<[arr1 count];i++)
            {
                Item *item=[[Item alloc] init];
                NSString *eventName=[[arr1 objectAtIndex:i]objectForKey:@"Time"];

                item.Time=eventName;
                [section addObject:item];

            }
            [sections addObject:section];

        }
        tableView=[[UITableView alloc]initWithFrame:CGRectMake(0,430,320,200) style:UITableViewStylePlain];
        tableView.delegate = self;
        tableView.dataSource = self;
        [self.view addSubview:tableView];   
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSMutableArray *sectionItems=[sections objectAtIndex:indexPath.section];
    int numRows=[sectionItems count]/[arr1 count];
    return numRows * 80.0;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *hlCellID=@"hlCellID";

    UITableViewCell* hlcell=[tableView dequeueReusableCellWithIdentifier:hlCellID];

    if(hlcell == nil)
    {
        hlcell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:hlCellID]autorelease];

        hlcell.accessoryType = UITableViewCellAccessoryNone;
        hlcell.selectionStyle = UITableViewCellSelectionStyleNone;    
    }
    int section=indexPath.section;
    NSMutableArray *sectionItems=[sections objectAtIndex:section];
    int n=[sectionItems count];
    int i=0,i1=0;
    while(i<n)
    {
        int yy= 4+i1*34;
        int j=0;
        for(j=0;j<4;j++)
        {
            if(i>=n)break;
           Item *item=[sectionItems objectAtIndex:i];
            CGRect rect=CGRectMake(0+70*j,yy,79,40);
            UIButton *button=[[UIButton alloc] initWithFrame:rect];
            [button setFrame:rect];
            [button setContentMode:UIViewContentModeLeft];
            button.titleLabel.font = [UIFont systemFontOfSize:14];
            NSString *settitle=[NSString stringWithFormat:@"%@",item.Time];
            [button setTitle:settitle forState:UIControlStateNormal];
            NSString *tagValue=[NSString stringWithFormat:@"%d%d",indexPath.section+1,i];
            button.tag=[tagValue intValue];
            [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
            [button setShowsTouchWhenHighlighted:YES];     
            [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
           [hlcell.contentView addSubview:button];
            [button release];
            i++;

        }
        i1=i1+1;
    }
    return hlcell;

}

-(IBAction)buttonPressed:(id)sender
{

    int tagID=[sender tag];
    int divnum=0;
    if(tagID<100)
        divnum=10;
    else
        divnum=100;
    int section=[sender tag]/divnum;
    section-=1;
    int itemId=[sender tag]%divnum;

    NSMutableArray *sectionItems=[sections objectAtIndex:section];
    Item *item=[sectionItems objectAtIndex:itemId];

}
 In Item class I have NSString *Time; 
```

我的数组是这样的：

```
(
        {
        Time = "9:00 am";
    },
        {
        Time = "9:15 am";
    },
        {
        Time = "9:30 am";
    },
        {
        Time = "9:45 am";
    },
        {
        TimeStart = "10:00 am";
    },
        {
        Time = "10:15 am";
    },
......24 objects in the array 
```

![如何让所有按钮都被点击并响应 -(IBAction)][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:04:21.040

你可以试试[这个](http://riaiphone.blogspot.in/2012/02/multiple-columns-in-uitableview.html)和[这个](http://sugartin.info/2011/09/02/custom-table-view-which-contains-more-then-one-images/)

另一个 git 示例： [示例](https://github.com/tanin47/UIGridView) 希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:10:16.637

您可以创建 UILabel 并将它们添加到您的 tableview 并使用您的创造力以使其看起来像网格视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:44:36.363

如果您的目标是 iOS 6，那么总会有 UICollectionView。[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html%20Docs)和[教程](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:28:34.800

嗨，希望你得到你的答案，如果没有，那么请使用以下代码：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        int numRows=0;

        NSMutableArray *sectionItems = [sections objectAtIndex:indexPath.section];
        if ([sectionItems count]<5)
        {
              numRows = [sectionItems count]/1;
            numRows =numRows *152;

            NSLog(@"result less then 6 or zero");
        }
        else
        {
         numRows = [sectionItems count]/6;
            numRows =numRows *152.0;
        }
        //return numRows * 152.0;    //145
        return numRows;
    } 
```

问题是当我们计算按钮的高度时。numRows = [sectionItems 计数]/1; 因此，根据您的需要管理这条线......

希望这对你有用...

# android - 如何在 Android 中正确使用外键，使用 SQLite 和 OrmLite

> ID：13493535
> 
> 赞同：5
> 
> 时间：2012-11-21T12:42:52.440
> 
> 标签：android, sqlite, ormlite

首先，我用这两个表创建了数据库：地址和电话。

我已经使用 Ormlite 在 android 中实现了外键，以便建立从 Adresse 到 Telephones 的连接 1。

电话的代码：

```
@DatabaseTable(tableName = "TELEPHONES")
public class Telephone {
    public static final String TABLE_NAME = "TELEPHONES";
    public static final String ID_ADRESSE = "ID_ADRESSE";

    @DatabaseField(generatedId = true)
    private Integer _id;

    @DatabaseField(canBeNull = false, foreign = true,columnName = ID_ADRESSE)
    private Adresse adresse; 
        .
        .
        .
        .
    public Adresse getAdresse() {
        return adresse;
    }

    public void setAdresse(Adresse adresse) {
        this.adresse = adresse;
    }  
} 
```

地址的代码：

```
@DatabaseTable(tableName = "ADRESSE")
public class Adresse {

    public static final String TABLE_NAME = "ADRESSE";
    public static final String ID = "_id";

    @DatabaseField(generatedId = true)
    private Integer _id;

    @ForeignCollectionField(eager = false)
    private ForeignCollection<Telephone> telephones;
} 
```

我还读到 SQLite 数据库实现了外键，但是每次打开数据库时都必须启用它们才能修改它。所以我添加了这段代码：

```
.
.
.
    public void openDataBase() {
        // Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);
        if (!myDataBase.isReadOnly()) {
            myDataBase.execSQL("PRAGMA foreign_keys=ON;");
        } else {
            System.out.println("database is open as read only");
        }
    }
.
.
. 
```

问题是，通常如果我想删除一个有一个或多个电话的地址，外键约束不应该让我这样做，但什么也没有发生。没有错误，没有警告，什么都没有。当我在数据库中查看我是否删除了地址时，我看到地址已被删除，而电话仍然存在，id_adresse 链接到我已删除的那个。

我已经用 Firefox 的 SQLite Manager 打开了数据库，当我尝试做同样的事情时，出现一个错误，告诉我，由于外键无法做到这一点......

差点忘了：

Sqlite 中 Telephone 表的代码：

```
CREATE TABLE "TELEPHONES" 
("_id" INTEGER PRIMARY KEY  NOT NULL,"ID_ADRESSE" INTEGER REFERENCES ADRESSE(_id)) 
```

所以我的最后一个问题是：

我做错了什么，因为在Android中我可以删除地址？

我想要的是正确实现外键，如果不先删除与地址相关的电话，就无法删除地址。

更新：我试过这样做：

```
public void openDataBase() {
    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);
    if (!myDataBase.isReadOnly()) {
        myDataBase.execSQL("PRAGMA foreign_keys=ON");
        myDataBase.execSQL("DELETE FROM ADRESSE WHERE _id=8");
    } 
} 
```

它确实删除了地址以及相关的电话。

那么为什么使用 ormlite 命令：

```
 DeleteBuilder<Adresse, Integer> db = daoAdresse.deleteBuilder();
db.where().eq(Adresse.ID, 8);
daoAdresse.delete(db.prepare()); 
```

交易里面没有工作？

更新 2：

```
@Override
    public void onOpen(SQLiteDatabase myDatabase){
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);
        if (!myDataBase.isReadOnly()) {
            myDataBase.execSQL("PRAGMA foreign_keys=ON");
            System.out.println("open database with pragma on from onOpen");
        } else {
            System.out.println("database is open as read only from onOpen");
        }

    } 
```

我这样做了，我收到消息说使用了这种方法，而不是另一种方法，但只是删除了我的地址，没有电话。所以我真的不知道。一定是某个地方出了问题，我认为它与DeleteBuilder有关......

仍在搜索中..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:52:30.327

据我所知，支持外键限制，但您必须明确设置它。[这个答案](https://stackoverflow.com/a/3266882/710990)可能会对你有所帮助。请注意，如评论中所述，它仅适用于 Android 2.2 及更高版本。

### 更新

您尚未定义更新/删除操作。在`Telephone`中，将列定义更新为以下内容：

```
@DatabaseField(canBeNull = false, foreign = true, columnDefinition = "integer references ADRESSE(_id) on delete cascade")
private Adresse adresse; 
```

并重新创建您的数据库。注意“on delete cascade”；当 ADRESSE 中的一行被删除时，TELEPHONES 中的所有相关条目都应该被删除。

# c++ - glDrawElements 仅使用 GL_PATCHES 导致访问冲突

> ID：13493536
> 
> 赞同：2
> 
> 时间：2012-11-21T12:42:59.673
> 
> 标签：c++, opengl

我最近一直在玩 glsl 着色器，刚刚开始使用花哨的新镶嵌阶段。它工作了一段时间，然后突然之间，砰，它失败了。每当我使用原始参数等运行它时，它就会中断， `glDrawElements(GL_PATCHES, numIndicies, GL_UNSIGNED_INT, 0)`并在 0x00000054 处出现访问冲突。

我梳理了我的代码，从我所见，一切都检查出来了。但事情是这样的，当我更改`GL_PATCHES`为时`GL_TRIANGLES`，它可以完美运行。当然在禁用曲面细分控制和评估着色器之后。我也尝试过`glDrawArrays`，但仍然失败，`GL_PATCHES`所以我相当有信心它与此有关。

目前我在几何着色器中使用了基本的镶嵌，但这很快就会变老。

我正在运行带有 ATI Mobility Radeon HD 5650 的 Windows 7 x64，据我所知，最新的驱动程序是什么。如果有帮助，它说异常发生在 atioglxx.dll 中的某处。这是一些代码。

```
GLuint CreateIcosahedron(vec3, unsigned int&);

void DrawScene(){
    static unsigned int numindices = 0;
    static GLuint vao = CreateIcosahedron(vec3(0,0,0), vec3(1,2,1), numindices);

    glBindVertexArray(vao);
    glDrawElements(GL_PATCHES, numindices, GL_UNSIGNED_INT, 0);
    glBindVertexArray(0);
}

GLuint CreateIcosahedron(vec3 center, unsigned int& numindices){
    GLuint vaoID;
    GLuint vboID;
    GLuint iboID;

    const int indices[] = {
            // indices omitted for your viewing pleasure
    };
    const vec3 vertices[] = {
            // vertices omitted for your viewing pleasure
    };

    const GLuint uPosition = 0;
    numindices = sizeof(indices)/sizeof(indices[0]);

    glGenVertexArrays(1, &vaoID);
    glBindVertexArray(vaoID);

    glGenBuffers(1, &vboID);
    glBindBuffer(GL_ARRAY_BUFFER, vboID);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

    glVertexAttribPointer(uPosition, 3, GL_FLOAT, GL_FALSE, 0, 0);
    glEnableVertexAttribArray(uPosition);

    glGenBuffers(1, &iboID);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, iboID);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);

    return vaoID;
} 
```

我究竟做错了什么？：C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:41:26.953

当 VAO 设置不正确时，我已经看到 glDrawElements 这样做了。您的初始化代码看起来是正确的，但问题可能是您没有在函数末尾取消绑定您的 VAO。这意味着对 glBindBuffer 等的任何后续调用都可以更改 VAO 状态。尝试在 CreateIcosahedron() 结束时取消绑定 VAO，看看是否有帮助。

[编辑] 如果您的代码看起来与上面发布的完全一样，那么这可能无济于事。似乎您没有取消绑定 VAO，但无论如何在函数返回后立即绑定它。为了帮助您缩小问题范围，您应该知道 glDrawElements 的行为会根据调用时是否绑定元素数组缓冲区而改变。如果存在数组绑定，则最后一个参数被解释为元素数组的字节偏移量。否则它会被解释为一个指针，我认为这就是你的情况。

# assembly - 如何比较两个数字

> ID：13493537
> 
> 赞同：2
> 
> 时间：2012-11-21T12:43:06.520
> 
> 标签：assembly, marie

我在比较 MARIE（机器模拟器环境）中的两个数字时遇到了麻烦，由于某种原因，我似乎无法理解它。

我需要做的就是代码；允许用户输入 2 个数字然后比较它们，如果两个数字相同则输出 1，如果它们不同则输出 0。

到目前为止，我已经获得了最低限度的帮助，因此我们非常感谢所有帮助！

我试过这个：

```
INPUT 
STORE X 
INPUT 
STORE Y 
HALT 
X, DEC 010 
Y, DEC 011 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-16T15:41:52.537

有一个变量来存储输入。然后从中减去下一个输入。如果结果为零，则跳过打印 0。否则打印 1，然后跳转到程序末尾

```
 Input
    Store Num

    Input
    Subt Num
    Skipcond 400 
    Jump Equal  /If zero the numbers are equal

    Load One
    Output
    Jump End

Equal, Load Zero
    Output
End, Halt

/ declarations
Num, Dec 0
Zero, Dec 0
One, Dec 1 
```

# jquery - jQuery UI：Droppable - 使用模式 Tolerance“触摸”时，悬停类突出显示两个块

> ID：13493541
> 
> 赞同：1
> 
> 时间：2012-11-21T12:43:13.893
> 
> 标签：jquery, jquery-ui, droppable

我有一个问题，我尝试使用 Hover 类突出显示可放置区域，容差模式为“TOUCH”，它突出显示两个可放置区域..（如下面的屏幕截图）

![在此处输入图像描述](../Images/c598a4b4f9fb1fdc4e9bc8f54348559e.png) ![在此处输入图像描述](../Images/0962b999387819a3a6b57d6fef2b73fa.png)

如何解决这个.. [这是我的小提琴](http://www.jsfiddle.net/MHe75)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:42:14.407

在澄清你的问题之后，我仍然认为你必须删除`draggable`.

```
#draggable {
  width: 90px;
  height: 90px;
  padding: 0.5em;
  float: left;
  margin: 10px 10px 10px 0; /* remove this line */
} 
```

似乎`draggable`包括 , 在内的元素`margin`比`droppable`元素大，因此`dropped`状态已设置，尽管元素似乎还没有触及鞋面`droppable`。

![突出显示的边距和填充](../Images/e5694596ec0077568a43b4619dc1488d.png)

**请检查[更新的样本](http://jsfiddle.net/MHe75/1/)。**

# c++ - 如何在wstring中添加换行符？

> ID：13493542
> 
> 赞同：1
> 
> 时间：2012-11-21T12:43:15.500
> 
> 标签：c++, win32gui, wstring

```
wstring msg = L"NAME: " + hero.name + L"\n";
msg = msg + L"ATK: " + inttowstring(hero.ATK) + L"\n"; 
```

此带有字符串变量的代码将添加换行符，但不会添加 wstring。如果你问我为什么我使用 wstring 以便我可以将其转换为 LCPWSTR 放入此处，它会设置一个带有 txt 的文本框窗口

```
windowmsg(1,msg.c_str()); 
```

encoding 是 unicode 字符集

我也试过 \n\r 和 \r

我刚刚发现问题出在我的窗户上。它没有被指定为多行窗口。\r\n 有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:47:41.163

您可以改用`wstringstream`它来形成您的字符串，它支持 endl

```
wstringstream msg;
msg << L"NAME: " << hero.name << endl << L"ATK: " << inttowstring(hero.ATK) << endl; 
```

你的字符串然后在`msg.str()`

# maven - java.lang.ClassFormatError：类文件 javax/ejb/TimerConfig 中非本机或抽象方法中的缺失代码属性

> ID：13493543
> 
> 赞同：1
> 
> 时间：2012-11-21T12:43:20.193
> 
> 标签：maven, junit4, ejb-3.1

我有一个 EJB 类，它使用 EJB 的 TimerService 和 TimerConfig 创建一个计时器。

当我运行 junit 来测试类时，会看到以下错误：

java.lang.ClassFormatError：类文件 javax/ejb/TimerConfig 中非本机或抽象方法中的缺失代码属性

我正在为 ejb 使用以下 maven 依赖项：

```
<dependency>
   <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <scope>provided</scope>
</dependency>
<dependency>
   <groupId>org.glassfish</groupId>
   <artifactId>javax.ejb</artifactId>
   <version>3.1.1</version>
   <scope>test</scope>
</dependency> 
```

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:44:35.373

来自 javax:javaee-api 依赖项的类中的方法是空壳——它们没有真正的实现。这些类仅用于编译，而不用于运行时。

为了执行，需要真正的实现。因为无论如何都要使用 GlassFish，所以使用以下依赖项是合适的解决方案：

```
<dependency>
    <groupId>org.glassfish.extras</groupId>
    <artifactId>glassfish-embedded-all</artifactId>
    <version>3.1.1</version>
    <scope>test</scope>
</dependency> 
```

# sql - 如何计算varchar中指定char的出现次数

> ID：13493544
> 
> 赞同：2
> 
> 时间：2012-11-21T12:43:28.447
> 
> 标签：sql, oracle

这在（Oracle）SQL 中可能吗？

我有一个 varchar，例如“这是 varchar”，我想计算“i”的数量（它是 2）......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:50:11.230

尝试使用`REGEXP_COUNT`如下功能：

```
select  REGEXP_COUNT( 'This is varchar', 'i' ) from dual 
```

[在这里](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions145.htm)您可以找到有关 REGEXP_COUNT 的更多信息。

**[SQL 小提琴演示](http://sqlfiddle.com/#!4/10bb5/9/0)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T12:47:48.943

您可以删除所有`i`s 并检查长度差异。

```
select length('This is varchar')
       - NVL(length(replace('This is varchar', 'i')) , 0)
from dual; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:47:20.807

试试这个：

```
LENGTH(varcharString) - LENGTH(REPLACE(varcharString, 'i', '')) 
```

# android - Android 关闭系统对话框

> ID：13493545
> 
> 赞同：1
> 
> 时间：2012-11-21T12:43:40.377
> 
> 标签：android, dialog

我在围绕 SDK 示例中的 Android 蓝牙聊天示例时遇到问题。每当我连接到设备并建立连接时，ConnectedThread 正在执行，一切都很顺利，系统对话框弹出，要求我在 PIN 中打勾以进行配对。但是，当我单击该部分对话框上的取消按钮时，我想对此做出反应。由于我依赖并且也想依赖非自定义对话框，我真的想知道如何在该特定对话框上获取关闭事件。

问候，西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-25T07:23:31.043

只需在您希望对话框关闭的代码中添加这一行。

```
Intent intent = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
sendBroadcast(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:51:26.413

您可以通过编程方式进行配对以避免这种情况。您可以参考[Link1](https://stackoverflow.com/questions/7337032/how-can-i-avoid-or-dismiss-androids-bluetooth-pairing-notification-when-i-am-do)和[Link2](https://stackoverflow.com/questions/6483758/android-programmatically-bluetooth-pairing)

# c++ - Culling obstructed points in a point cloud

> ID：13493547
> 
> 赞同：5
> 
> 时间：2012-11-21T12:43:45.370
> 
> 标签：c++, opengl, 3d, point-clouds

I have a 3d point cloud image (see below).

And I would like to cull all the points which are theoretically behind other points (e.g points around the back of the person will not be visible since it's obstructed by the points around the chest and abdomen).

How do I go and solve this problem ?

All I need are just points which are not obstructed from frontal view, so that I can use it to for other purposes.

*Edit: It's not really for viewing purposes. I am trying to isolate only the unobstructed vertices to calculate surface normal later on in order to extract depth image features.*

![enter image description here](../Images/09cad30d2f01e6d1c0de0561c6632cae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:57:56.947

You can't obscure something with a point - it has no dimensions.

*If* you have a mesh (i.e. you know which points "connect" to which) you can hide things that are obscured behind that mesh.

If you don't, the easiest trick I know of to achieve something like your requirement is to use z-related fading - just make points at the rear fainter.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:54:52.280

How about rendering polygonal mesh with texture of points? Another way is rendering polygonal mesh to z-buffer(you need only depth) and using it to discard(far points will fail z-test) points that are behind mesh.

# eclipse - 无法在 Eclipse 4 上安装 Aptana

> ID：13493554
> 
> 赞同：2
> 
> 时间：2012-11-21T12:43:58.720
> 
> 标签：eclipse, aptana

在 Eclipse 4.3 上安装 Aptana 插件时出现问题，在安装过程中出现 System Base 错误：

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Aptana Studio 3 Plugin 3.2.2.201208200959-7C7C37EAEI9YFMKNDc1bIClwcOi- (com.aptana.feature.studio.feature.group 3.2.2.201208200959-7C7C37EAEI9YFMKNDc1bIClwcOi-)
  Software currently installed: Eclipse SDK 4.3.0.I20121031-2000 (org.eclipse.sdk.ide 4.3.0.I20121031-2000)
  Only one of the following can be installed at once: 
    Help System Base 3.6.2.v201202080800 (org.eclipse.help.base 3.6.2.v201202080800)
    Help System Base 4.0.0.v201208101300 (org.eclipse.help.base 4.0.0.v201208101300)
    Help System Base 4.0.0.v201210312000 (org.eclipse.help.base 4.0.0.v201210312000)
    Help System Base 4.0.0.v201209201300 (org.eclipse.help.base 4.0.0.v201209201300)
  Cannot satisfy dependency:
    From: Aptana Documentation 3.0.0.1331667762 (com.aptana.documentation 3.0.0.1331667762)
    To: bundle org.eclipse.help.base [3.2.0,4.0.0)
  Cannot satisfy dependency:
    From: Aptana Studio 3 Core 3.2.2.1345235597-BO7Q8OBea8yJfxywU1DC44EXt-3C (com.aptana.feature.feature.group 3.2.2.1345235597-BO7Q8OBea8yJfxywU1DC44EXt-3C)
    To: com.aptana.documentation [3.0.0.1331667762]
  Cannot satisfy dependency:
    From: Aptana Studio 3 Plugin 3.2.2.201208200959-7C7C37EAEI9YFMKNDc1bIClwcOi- (com.aptana.feature.studio.feature.group 3.2.2.201208200959-7C7C37EAEI9YFMKNDc1bIClwcOi-)
    To: com.aptana.feature.feature.group [3.2.2.1345235597-BO7Q8OBea8yJfxywU1DC44EXt-3C]
  Cannot satisfy dependency:
    From: Eclipse Help System 2.0.0.v20120727-171144-8T7WFLIFK_Qj4LnjFXTwRVDHN (org.eclipse.help.feature.group 2.0.0.v20120727-171144-8T7WFLIFK_Qj4LnjFXTwRVDHN)
    To: org.eclipse.help.base [4.0.0.v201210312000]
  Cannot satisfy dependency:
    From: Eclipse Project SDK 4.3.0.v20120906-193403-7V7p-DQ12z-i0bQMG5kbcW605KLL_o-QUPwPOfmX_vkMz (org.eclipse.sdk.feature.group 4.3.0.v20120906-193403-7V7p-DQ12z-i0bQMG5kbcW605KLL_o-QUPwPOfmX_vkMz)
    To: org.eclipse.help.feature.group [2.0.0.v20120727-171144-8T7WFLIFK_Qj4LnjFXTwRVDHN]
  Cannot satisfy dependency:
    From: Eclipse SDK 4.3.0.I20121031-2000 (org.eclipse.sdk.ide 4.3.0.I20121031-2000)
    To: org.eclipse.sdk.feature.group [4.3.0.v20120906-193403-7V7p-DQ12z-i0bQMG5kbcW605KLL_o-QUPwPOfmX_vkMz] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:58:18.853

我已经从 Eclipse（目前的最新版本）站点下载了**Eclipse Classic 4.2.1 32bit的新版本，并且运行良好。****所以我认为4.3**存在版本问题，并且 Aptana 源（依赖项）未设置为**Eclipse 4.3**。

**编辑：**使用最新的 Java 7 版本。

# jquery - 使用 JQuery 监控 HTML Div 的动态变化

> ID：13493555
> 
> 赞同：4
> 
> 时间：2012-11-21T12:44:01.643
> 
> 标签：jquery, html, css, dom

我有一个基于浏览器的聊天应用程序，其中为每个聊天创建单独的 div。
整个聊天由外部模块管理，我无权访问他们的代码。

请注意，任何地方都没有 id，只有为聊天窗口动态创建的 div 的 css 类名。

每当一个新的聊天对话开始时，就会在父 div（css 类：'tabcontent'）下为该聊天创建一个新的 div（使用 css 类：chat_incoming）。

使用 jQuery，我如何监视父级（使用 css 类：tabcontent）div 是否有任何更改，例如添加新子级（使用 css 类：chat_incoming）？

我在这里没有可用于监视 div 的单击事件，也没有在聊天信使窗口加载后立即加载 div。用户登录后可能会随时发起​​聊天，在此之前父 div 不会为聊天创建子 div。

我自己做了一些功课，但没有成功。

使用 jQuery，我有点明白我可能必须使用“.on”才能监控已经可用/动态创建的 div 的事件，但我没有点击事件来与 JQuery .on() 一起使用。

我的下一个猜测是使用

```
$('tabcontent').bind('DOMNodeInserted DOMNodeRemoved', function(event) {alert('hi')}); 
```

但由于某种原因，这似乎也不起作用？[（在这里](http://jsfiddle.net/WTJq6/43/)看小提琴）

任何指导表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:51:58.330

您的 jQuery 正在寻找`tabcontent`，而不是`.tabcontent`. 就像在一个名为 的标签中一样`tabcontent`，而不是在一个名为的类中`tabcontent`

改变它，它应该开始工作（希望，如果脚本中的其他一切都很好）

```
$('.tabcontent').bind('DOMNodeInserted DOMNodeRemoved', function(event) {alert('hi')}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:53:25.803

你可以试试这个。。

```
$(".tabcontent").bind("DOMSubtreeModified", function() {
    alert("tree changed");
}); 
```

希望这可以帮助

# endeca - 无法打开acquire_lock

> ID：13493556
> 
> 赞同：1
> 
> 时间：2012-11-21T12:44:03.323
> 
> 标签：endeca

在 endeca 中，我只是尝试在 Linux 终端中使用以下命令加载模板

```
emgr_update --host localhost:172.20.187.149 --action set_templates --prefix MyApp --dir /home/Admin/endeca/apps/MyApp/config/cartridge_templates -app_name MyApp 
```

出现错误： `could not open acquire_lock.status`
我在运行 http 工具服务和工作台服务时尝试过，并停止了这两个服务。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:26:13.443

我刚刚遇到了同样的问题，这是主机名称中的拼写错误，修复后解决了这个错误。

对于您上面的 emgr_update 命令，我不禁注意到 --host 参数的格式不正确。你有 --host localhost:172.20.187.149，它的格式应该是 <host>:<port>。所以我认为您的意思是 localhost:8006 或 172.20.187.149:8006 （其中 8006 是 Workbench 配置为侦听的端口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:19:18.097

设置或获取模板时必须运行 PlatformService 和 ToolsAndFramework（以前的 Workbench）。-app_name 也应该是 --app_name （不确定这是否是一个错字）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:51:19.237

检查您的应用程序上的标志。如果更新或基线不正确地退出，锁定标志可能仍然存在。

```
eaccmd list-flags --app MyApp 
```

这应该列出任何可能阻止您更新的标志。根据该命令的输出，您可以使用此命令删除任何标志：

```
eaccmd remove-flag --app MyApp --flag <flagNameGoesHere> 
```

# java - java中记录器的替代方案

> ID：13493557
> 
> 赞同：1
> 
> 时间：2012-11-21T12:44:07.690
> 
> 标签：java, logging

我在我的模块中使用记录器。但是有了新的要求，我必须从代​​码中删除记录器并使用 DBA 在单个查询中记录所有错误。

为此，我计划使用 VO 类来获取异常详细信息。但经理不接受这种逻辑。

您能否建议我如何将所有错误存储在 dba 中。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:10:57.217

Apache Common 的 Logging 和 Log4J 已经被提及，但是如果你打算沿着这条路线走，你也应该知道 logback 的[DBAppender](http://logback.qos.ch/manual/appenders.html#DBAppender)。如果这不能完全涵盖您的用例，您仍然可以随时编写自己的用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:47:52.080

如果您使用的是 Apache Common Logging 和 Log4J，您可以简单地添加一个数据库附加程序并完成它：

[http://code.google.com/p/log4j-databaseappender/](http://code.google.com/p/log4j-databaseappender/)

日志是面向方面编程的“Hello world”。我还建议将您的日志记录在一个方面。这样就很容易改变，无论你被迫做什么。

# pdf - GhostScript/PostScript/PDF - 从 PS 文件中剪切一个矩形，将其旋转 45 度，然后粘贴到另一个文件中 - 如何？

> ID：13493559
> 
> 赞同：1
> 
> 时间：2012-11-21T12:44:10.610
> 
> 标签：pdf, ghostscript, postscript

我需要自动化以下过程：

1.  在 PostScript 输入文件中剪切页面的一部分（例如：input.ps，剪切从 10,10 到 150, 200 的所有内容）。

2.  将该部分插入一个新的 PostScript 文件，旋转 n 度（例如，旋转 40 度，放置在 100,100 附近）。

有没有办法使用 PostScript 命令或 GhostScript 的任何特殊功能来做到这一点？

将文件转换为 PDF 并修改 PDF 也是一种选择。

**编辑1：**

由于我在测试基于 PS 的解决方案时发现的问题，我更喜欢使用 PDF。

到目前为止的答案解决了“剪切”PDF的问题。但是，我仍然需要将结果旋转 n 度，其中 n 不是 90 的倍数。

**任何提示或方向将不胜感激。
谢谢！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:10:19.260

从 PostScript 的角度考虑问题。为了获得“剪切”的效果，您需要应用剪切路径。你想要一个矩形，这很容易：

```
clipleft clipbottom moveto
0 clipheight rlineto
clipwidth 0 rlineto
0 clipheight neg rlineto
closepath clip 
```

如果您在所需页面的开始之前注入此代码，它应该剪辑到该矩形。

要获得旋转的效果，您可以应用变换矩阵或使用旋转命令：

```
degrees rotate 
```

这将影响之后的所有操作。现在，更有可能的是，你会想要做这样的事情：

```
degrees rotate
placementx placementy translate
0 0 moveto
0 clipheight rlineto
clipwidth 0 rlineto
0 clipheight neg rlineto
closepath clip 
```

这将旋转轴，将原点平移到您想要的位置，绘制剪辑矩形并剪辑到它。之后的任何绘图都将受到先前转换的影响——除非呈现页面的代码调用 PostScript 运算符 initgraphics（或任何其他重置页面属性的运算符），那么除了重新定义 initgraphics 之外，您无能为力真的不应该这样做（并且在许多系统上可能被禁止这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T23:17:31.350

我的专长在于 PDF 而不是 PostScript，但 PDF 肯定是可能的。逻辑步骤将总结为：

1) 打开第一个 PDF 并更改此文件的修剪框，以便只有您想要的部分仍然可见。

2) 打开第二个 PDF 文件并将第一个 PDF 合成到所需位置。

在 PDF 中执行此操作使其更安全，因为 PDF 比 PostScript 更安全（不可能在其中一个文件中出现一些巧妙的 PostScript 代码使您的算法失效）。

你如何做到这一点在很大程度上取决于你正在从事的项目中的约束条件。当然有商业工具可以做这样的事情。我猜想也有可以提供帮助的开源/免费工具，甚至可能是 GhostScript 本身或 pdflib 之类的东西。

# asp.net - 如何从 sp 返回查询？

> ID：13493561
> 
> 赞同：0
> 
> 时间：2012-11-21T12:44:18.083
> 
> 标签：asp.net, sql, stored-procedures

我遇到了一种情况，我必须从 sp 返回一个查询并将其分配给 session。这个示例查询。原来的一个很大，在许多表上有内部连接。表名是动态的。sp 中有 2 个查询。一个应该执行和其他可以发送到 C# 页面。如何在 C# 中访问该查询。我不想要它的结果。只是查询。我在这里只显示了一个我想返回的查询。

例子 ：

```
create Procedure Sample
(
@id int
)
as
begin
declare @pid varchar(10)
declare @query varchar(500)

set @pid = cast(@id as varchar(10))

set @query ='select * from Table1 where id = '+@pid+'' 
--Execute sp_executesql @query
--print @query
select @query
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:50:37.313

设置 @Query 后使用 SELECT。这将返回到 c 锐利页面。确保不要使用`ExecuteNonQuery()`方法

```
SET @query ='select * from Table1 where id = '+@pid+'' 
SELECT @query AS myQuery 
```

例如，升c

```
DataSet ds;
YourDataAdapter.Fill(ds);
string query = ds.Tables[0].Rows[0]["myQuery"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:21:57.107

首先，您需要向您的存储过程添加一个 OUTPUT 参数，如下所示：

```
 @ID int , 
    @SQLQuery varchar OUTPUT 
```

稍后在存储过程代码中，您可以将其值设置为：

```
 SET @SQLQuery = 'select * from users' 
```

然后在您的 C# 中添加此类代码以从存储过程中获取此 OUTPUT 参数的值：

```
 System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand("Sample", cn);
        cmd.CommandType = CommandType.StoredProcedure;
        System.Data.SqlClient.SqlParameter parm = new System.Data.SqlClient.SqlParameter("@ID", SqlDbType.Int);
        parm.Value = 1;
        parm.Direction = ParameterDirection.Input;
        cmd.Parameters.Add(parm);
        System.Data.SqlClient.SqlParameter parm2 = new System.Data.SqlClient.SqlParameter("@SQLQuery", SqlDbType.VarChar);
        parm2.Size = 50;
        parm2.Direction = ParameterDirection.Output; // This is important!
        cmd.Parameters.Add(parm2);
        cn.Open();
        cmd.ExecuteNonQuery();
        cn.Close();

        // Print the output value
        Console.WriteLine(cmd.Parameters["@SQLQuery"].Value);
        Console.ReadLine(); 
```

我希望这能回答你的问题。如果是，则将其标记为“已回答”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:15:31.390

通过使用 ExecuteScalar 你可以得到这个

```
SqlConnection con = new SqlConnection("Your Connection String");
con.Open();
SqlCommand com = new SqlCommand("Sample", con);
com.CommandType = System.Data.CommandType.StoredProcedure;
object query = com.ExecuteScalar();
con.Close(); 
```

# playframework - 玩！- Java - 未检测到额外的类和包

> ID：13493562
> 
> 赞同：0
> 
> 时间：2012-11-21T12:44:19.063
> 
> 标签：playframework, playframework-2.0

我使用玩 2.04 Java。我创建了一个名为**util**的附加包和一个名为**Node.java**的类，如下所示：-

![项目树](../Images/ede3d95f1b0b4f6ca7a86ace4ba4f05b.png)

我在 views.html.* 包中有一个名为**test.scala.html**的视图，它以**Node**作为参数，如下所示：-

```
@(rootNode: Node[Category]

@rootNode 
```

呈现视图时出现错误：-

![查看错误](../Images/c72e0cb96407c832c1cc47ad506a8265.png)

[play 2.0 应用程序的剖析](http://www.playframework.org/documentation/2.0.4/Anatomy)表明添加额外的包和类不是问题。

我缺少游戏配置中的某些内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:50:15.020

只有类`controllers`和`models`包会自动导入到视图中，因此，您需要使用类的完整限定名，即，`util.Node`而不是`Node`：

```
@(rootNode: util.Node[Category]

@rootNode 
```

# php - PHP 表单在 Internet Explorer 中不起作用

> ID：13493565
> 
> 赞同：1
> 
> 时间：2012-11-21T12:44:33.287
> 
> 标签：php, html, internet-explorer, contact

我创建了这个联系表单，它在 Firefox 和 chrome 中完美运行，但在 Internet Explorer 中，它不允许您输入文本（单击表单字段没有任何作用）提交按钮有效但只发送空白消息，因为无法输入文本。此外，当您按下提交时，它会尝试在 Firefox 页面中打开 mail.php，我只是在我的电脑上进行本地测试，这可能是问题吗？

PHP是这样的：

```
<?php
    $name = $_POST['name'];
    $email = $_POST['email'];
    $phone = $_POST['phone'];
    $message = $_POST['message'];
    $formcontent="This message has been generated from the Contact page \n Name: $name \n Phone: $phone \n Email: $email \n Message: $message";
    $recipient = "myemail@myemail.co.uk";
    $subject = "Enquiry From contact page";
    $mailheader = "From: $email \r\n";
    mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
    header('Location: ../contact2.html');
?> 
```

HTML是：

```
<form id="form1" action="PHP/mail.php" method="post">
    <label>Name <span class="small">Add your name</span></label> 
    <input type="text" name="name"><br>
    <label>Email <span class="small">Enter a Valid Email</span></label> 
    <input type="text" name="email"><br>
    <label>Phone <span class="small">Add a Phone Number</span></label> 
    <input type="text" name="phone"><br>

    <br>
    <br>

    <label>Message <span class="small">Type Your Message</span></label> 
    <textarea name="message" rows="6" cols="25">
    </textarea><br>
    <button type="submit" value="Send" style="margin-top:15px;">Submit</button>
    <div class="spacer"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:51:29.980

您应该关闭标签，如下所示：

```
<input type="text" name="email" /> 
```

您的换行标签也是如此：

```
<br /> 
```

任何不需要中间内容的标签都应该像这样关闭。图像标签是另一个例子。

```
<img src="myimg.png" /> 
```

另外，我会使用一个按钮，因为我认为它使代码看起来更干净：

```
<input type="submit" value="Send" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:53:33.867

纯粹基于您拥有的表单，我能够在 Chrome、FireFox 和 IE8 中的表单中输入文本。

将您的 html 表单代码放在一个独立的文件 HTML 文件中，并在 IE 中测试，看看您是否得到相同的行为。

测试 HTML 文件会将问题缩小到仅检查浏览器是否删除了其他变量，例如 PHP 服务器或 javascript。

-*如果您遇到同样的问题：*这是独立于该 PC 的 IE 问题。

-*如果您没有遇到同样的问题：*可能是您的 php 配置或 javascript 有问题。

```
 <form id="form1" action="PHP/mail.php" method="post">
                <label>Name <span class="small">Add your name</span></label> <input type="text" name="name" /><br />
                <label>Email <span class="small">Enter a Valid Email</span></label> <input type="text" name="email" /><br />
                <label>Phone <span class="small">Add a Phone Number</span></label> <input type="text" name="phone" /><br />
                <br>
                <br>
                <label>Message <span class="small">Type Your Message</span></label> 
                <textarea name="message" rows="6" cols="25">
                </textarea><br>
                <button type="submit" value="Send" style="margin-top:15px;">Submit</button>
                <div class="spacer"></div>
            </form> 
```

# ios - 将保管箱添加到我的 ios 应用程序

> ID：13493566
> 
> 赞同：-1
> 
> 时间：2012-11-21T12:44:36.397
> 
> 标签：ios

我正在向我的 iOS 应用程序添加 Dropbox 支持。使用官方 Dropbox API 和 [此处](https://www.dropbox.com/developers/start/authentication#ios)的教程。而且，一旦通过身份验证，如何将我的 Dropbox 中存在的文件保存到用户的 Dropbox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:51:23.927

好吧，如果我做对了，那么有两种可能的解决方案。

**选项 1** （最简单且有保证的工作）
最简单的解决方案是为您要从 drobox 下载的文件创建一个共享链接。
然后在应用程序中发送请求并使用链接下载文件。
之后，使用保管箱教程中的方法将文件上传到用户的保管箱。

**选项 2** （更快，更好）
使用 copy_ref 在两个帐户之间复制对文件的引用，而不是下载和重新上传。查看 Dropbox API 中的此条目 - [https://www.dropbox.com/developers/reference/api#copy_ref](https://www.dropbox.com/developers/reference/api#copy_ref)

# ant - 从文件中搜索令牌并在另一个蚂蚁中替换

> ID：13493567
> 
> 赞同：0
> 
> 时间：2012-11-21T12:44:37.017
> 
> 标签：ant

我有一个令牌文件“xpressionProperty.txt”，它的键值对如下。

```
MQ_QUEUE_MANAGER=QM_XPN
MQ_HOSTNAME=10.12.49.17
MQ_PORT=5551
MQ_CHANNEL=CHNL.XPN
MQ_USERID=mqm
MQ_PASSWORD=abc
INPUT_QUEUE1=PREPROCESSOR.QP1
INPUT_QUEUE2=PREPROCESSOR.QP2
ERROR_QUEUE=ERROR.QP1 
```

我的属性文件是“ Queue.properties ”，它具有以下值。

```
MQ_QUEUE_MANAGER=${MQ_QUEUE_MANAGER}
MQ_HOSTNAME=${MQ_HOSTNAME}
MQ_PORT=${MQ_PORT}
MQ_CHANNEL=${MQ_PORT}
MQ_USERID=${MQ_USERID}
MQ_PASSWORD=${MQ_PASSWORD}
INPUT_QUEUE1=${INPUT_QUEUE1}
INPUT_QUEUE2=${INPUT_QUEUE2}
ERROR_QUEUE=${ERROR_QUEUE} 
```

当我运行 ant 命令 Queue.properties 文件应该使用 xpressionProperty.txt 文件中的实际值进行更新。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:07:58.663

看看[过滤器集和过滤器](http://ant.apache.org/manual/Types/filterset.html)。

将您的`Queue.properties`文件复制到其他地方，如下所示：

```
<copy file=${queue.properties.file}
   todir="${target.dir}">
   <filterset begintoken="${"
       endtoken="}"
       filterfile="${xpression.property.file}"/>
</copy> 
```

这会将 Queue.properties 中的参数替换为“xpressionProperty.txt”中的值。

顺便说一句，我会在你的文件中替换`${foo}`语法。然后您不必指定and参数。另外，这就是人们期望看到的替代价值。`@foo@``Queue.properties``begintoken``endtoken`

**警告：请勿将其作为就地更换**。有一个`<replace>`任务与此非常相似，但会`Queue.properties`直接修改。这意味着您的`Queue.properties`文件将丢失其替换值，如果有人提交更改，当您需要再次执行此操作时，您将丢失它们。

# javascript - 上周在 javascript 中获取

> ID：13493569
> 
> 赞同：2
> 
> 时间：2012-11-21T12:44:40.983
> 
> 标签：javascript

我在脚本中使用以下内容：

```
var startDate = new Date("10/12/2012");
var endDate = new Date("10/18/2012"); 
```

我希望使用 startDate 作为上周一和 endDate 作为上周日动态创建这些日期。我尝试了以下方法：

```
var curr = new Date; // get current date
var first = curr.getDate() - curr.getDay(); // First day is the day of the month - the day of the week
var last = first + 6; // last day is the first day + 6
var startDate = new Date(curr.setDate(first)).format("m/dd/yyyy");
var endDate = new Date(curr.setDate(last)).format("m/dd/yyyy"); 
```

但由于某种原因，这不起作用 - startDate 或 endDate 变量没有输出任何内容。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:52:20.827

Javascript 日期时间对象没有格式方法。您需要使用库或自己生成字符串：

```
var curr = new Date; // get current date
var first = curr.getDate() - curr.getDay(); // First day is the day of the month - the day of the week
var last = first + 6; // last day is the first day + 6
var startDate = new Date(curr.setDate(first));
startDate = "" + (startDate.getMonth() + 1) + "/" + startDate.getDate() + "/" + startDate.getFullYear();
var endDate = new Date(curr.setDate(last));
endDate = "" + (endDate.getMonth() + 1) + "/" + endDate.getDate() + "/" + endDate.getFullYear(); 
```

这是一个小提琴[http://jsfiddle.net/DPQeB/2/](http://jsfiddle.net/DPQeB/2/)及其输出

> 2012年 11 月 18 日
> 2012 年 11 月 24日

一个允许您格式化日期的库是[jQuery UI](http://docs.jquery.com/UI/Datepicker/formatDate)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:14:43.893

使用[**date.js**](http://www.datejs.com/)获取上周日

```
Date.today().moveToDayOfWeek(0, -1); // -1 indicates to go back 
```

最好使用库来操作日期。它会让你的生活轻松很多。

话虽如此，理解 JavaScript 中的日期有一个长期的目标。它将帮助您进行调试等工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T11:05:46.963

如果从周日开始：

```
var today = new Date();
var sundayOfWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate() - today.getDay()-8);
var mondayOfWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate() - today.getDay()+1);

console.log( mondayOfWeek );
console.log( sundayOfWeek ); 
```

# .htaccess - 301 将主页重定向到处理“www / no www”和“/index.html”的新域

> ID：13493571
> 
> 赞同：0
> 
> 时间：2012-11-21T12:44:51.337
> 
> 标签：.htaccess, http-status-code-301

正在移动网站的 url，因此我们设置了从每个页面到新网站上的等效页面的 301 重定向。我们为此使用的语法是：

```
redirect 301 /about-us.html http://newiste.co.uk/about-us.html 
```

我无法解决的是如何将旧主页 - [http://oldsite.co.uk](http://oldsite.co.uk)发送到[http://newsite.co.uk](http://newsite.co.uk) - 因为主页位于 domain.co.uk 没有 /index .html 也有与 www 类似的问题。与非 www。

像这样在旧域上配置我的 .htaccess 文件是正确的方法吗？

```
<Files ~ "^\.(htaccess|htpasswd)$">
deny from all
</Files>
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.oldsite\.co\.uk)(:80)? [NC]
RewriteRule ^(.*) http://oldsite.co.uk/$1 [R=301,L]
order deny,allow

redirect 301 / http://newsite.co.uk
redirect 301 /about-us.html http://newsite.co.uk/about-us.html
redirect 301 /contact-us.html http://newsite.co.uk/contact-us.html
redirect 301 /bespoke-furniture.html http://newsite.co.uk/bespoke-furniture.html
redirect 301 /how-we-work.html http://newsite.co.uk/discovery.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:58:58.447

要重定向根文档，您可以使用以下重写规则：

```
RewriteRule ^/?$ http://newsite.co.uk/ [R=301,L] 
```

还对您的评论：

```
RewriteCond %{HTTP_HOST} ^(www\.oldsite\.co\.uk)(:80)? [NC] 
```

端口号绝不是 HTTP_HOST 变量的一部分，最有效的是尽可能避免使用正则表达式：

```
RewriteCond %{HTTP_HOST} =www.oldsite.co.uk [NC] 
```

您的代码`redirect 301 / http://newsite.co.uk`将重定向所有内容，而不仅仅是根`/`

# python - 在python中将字典的值更改为字典的键

> ID：13493572
> 
> 赞同：0
> 
> 时间：2012-11-21T12:44:52.823
> 
> 标签：python, dictionary, key, key-value

我想创建一个“真正的”词典：一个荷兰语到英语词典，包含以下单词：def reversTranslation(dictionary)：

```
>>> dictionary= {'tension': ['spanning'], 'voltage': ['spanning', 'voltage']}
>>> dictionary= reverseTranslation(dictionary)
>>> dictionary
{'spanning': ['tension', 'voltage'], 'voltage': ['voltage']} 
```

正如您在荷兰语中看到的那样，“spanning”在英语中有两种不同的含义。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:05:29.297

干得好：

```
def reverseTranslation(d):
    return dict((v1,[k for k,v in d.iteritems() if v1 in v])
                for v1 in set(sum(d.values(),[]))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:07:18.193

如果您要问如何获得该结果，最易读的方法是：

```
from collections import defaultdict

def reverse_dictionary(dictionary):
    result = defaultdict(list)
    for key, meanings in dictionary.iteritems():  #or just .items()
        for meaning in meanings:
            result[meaning].append(key)
    return result 
```

或者您可以先对这些值求和，然后在字典上进行迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T16:10:53.890

```
d= {'tension': ['spanning'], 'voltage': ['spanning', 'voltage'],'extra':['voltage']}
val = set(reduce(list.__add__,d.values()))

dict={}
for x in val:
    tmp={x:[]}
    for k,v in d.items():
        if x in v:
           tmp[x].append(k)
    dict.update(tmp)

print dict 
```

注意：集合仅适用于 python 2.4 及更高版本

# python - 如何使用beautifulsoup4选择除某个html元素之外的所有内容？

> ID：13493579
> 
> 赞同：2
> 
> 时间：2012-11-21T12:45:19.807
> 
> 标签：python, html-parsing, beautifulsoup

例子：

```
import bs4

html = '''
<div class="short-description std ">
<em>Android Apps Security</em> provides guiding principles for how to 
best design and develop Android apps with security in mind. The book explores 
techniques that developers can use to build additional layers of security into 
their apps beyond the security controls provided by Android itself.             
<p class="scroll-down">∨ <a href="#main-desc" onclick="Effect.ScrollTo(
'main-desc', { duration:'0.2'}); return false;">Full Description</a> ∨&lt;/p></div>
'''
soup = bs4.BeautifulSoup(html) 
```

我如何从中获得以下（一个美丽的汤对象）`soup`？

```
<div class="short-description std ">
<em>Android Apps Security</em> provides guiding principles for how to 
best design and develop Android apps with security in mind. The book explores 
techniques that developers can use to build additional layers of security into 
their apps beyond the security controls provided by Android itself.             
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:50:42.843

只需搜索它：

```
soup.find('p', class_='scroll-down') 
```

我使用该类来限制查找，但由于这里没有其他`p`元素有点多余。

相反，如果您需要删除标记，请使用上述方法首先找到它，然后调用[`.extract()`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#extract)它以将其从文档中删除：

```
>>> soup.find('p', class_='scroll-down').extract()
<p class="scroll-down"> <a href="#main-desc" onclick="Effect.ScrollTo(
'main-desc', { duration:'0.2'}); return false;">Full Description</a> </p>
>>> print soup

<div class="short-description std ">
<em>Android Apps Security</em> provides guiding principles for how to 
best design and develop Android apps with security in mind. The book explores 
techniques that developers can use to build additional layers of security into 
their apps beyond the security controls provided by Android itself.             
</div> 
```

两件事：从`.extract()`方法中返回删除的标签，您可以将其保存以备后用。该标签已从文档中完全删除，如果您仍然需要它在文档中，则必须稍后手动重新添加它。

或者，您可以使用该[`.decompose()`方法](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#decompose)从文档中完全删除标签，而不返回引用。然后标签就永远消失了。

# macos - Git 忽略模板中的 core.filemode 设置

> ID：13493580
> 
> 赞同：2
> 
> 时间：2012-11-21T12:45:22.447
> 
> 标签：macos, git, git-config

我一直对 git 行为有一个奇怪的问题。似乎它忽略`core.filemode`了我的模板中的设置，我想设置为`false`.

我的系统：

*   操作系统 X 10.8
*   Git 1.7.10.2（苹果 Git-33）

两者，我的`~/.gitconfig`和`/usr/share/git-core/templates/config`里面都有这个：

```
[core]
    filemode = false 
```

然而，每次我这样做`git init`或`git clone`设置更改并设置为`true`in `.git/config`。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:19:14.020

如[**文档**](http://kernel.org/pub/software/scm/git/docs/git-config.html)所述，`git clone`探测文件系统以查看它是否支持权限并`core.filemode`相应地设置*每个存储库*。

我处理这个问题的方法是将它添加到`~/.bash_profile`

```
[ -d .git ] && git config core.filemode false 
```

[**资源**](http://github.com/svnpenn/dotfiles/blob/master/.extra)

# forms - 1 个电子邮件地址 2 个主题和 2 个 magento 表格

> ID：13493581
> 
> 赞同：1
> 
> 时间：2012-11-21T12:45:31.787
> 
> 标签：forms, magento, contacts

我有一个为 CONTACT US 表格和 CUSTOM 表格（如保修表格）设置的电子邮件地址，它是从 [Magento 上的 CONTACT US 表格 Multiple Contact Forms](https://stackoverflow.com/questions/5327037/multiple-contact-forms-on-magento)创建的。

我想将此电子邮件与变体主题分开（当从联系我们发送电子邮件时，表单主题应该是联系，当从自定义/保修表单发送电子邮件时，电子邮件的主题应该是保修）

什么是最好的解决方案？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T08:41:23.557

要在联系我们 Magento 中向多个收件人发送电子邮件，您可以通过这种方式进行托盘发送。

第一步，你可以在 app/code/core/Mage/Contacts/Controllers/IndexController.php 找到这一行

```
$mailTemplate = Mage::getModel('core/email_template');
            /* @var $mailTemplate Mage_Core_Model_Email_Template */
            $mailTemplate->setDesignConfig(array('area' => 'frontend'))
                ->setReplyTo($post['email'])
                ->sendTransactional(
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_TEMPLATE),
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_SENDER),
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_RECIPIENT),
                    null,
                    array('data' => $postObject)
                ); 
```

并修改为：

```
 $recipients = Mage::getStoreConfig(self::XML_PATH_EMAIL_RECIPIENT);
                if ($recipients)
                {
                        $recipients = explode(";",$recipients);
                        if(count($recipients))
                        {
            foreach($recipients as $recipient) {

            $mailTemplate = Mage::getModel('core/email_template');
            /* @var $mailTemplate Mage_Core_Model_Email_Template */
            $mailTemplate->setDesignConfig(array('area' => 'frontend'))
                ->setReplyTo($post['email'])
                ->sendTransactional(
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_TEMPLATE),
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_SENDER),
                    $recipient,
                    null,
                    array('data' => $postObject)
                );

                if (!$mailTemplate->getSentSuccess()) {
                throw new Exception();
                }
         }
     }
} 
```

并且不要忘记在 app/code/core/Mage/Contacts/etc/system.xml 上评论验证 javascript

找到这一行：

```
<recipient_email translate="label">
    <label>Send Emails To</label>
    <frontend_type>text</frontend_type>
<!--<validate>validate-email</validate>-->
    <sort_order>10</sort_order>
    <show_in_default>1</show_in_default>
    <show_in_website>1</show_in_website>
    <show_in_store>1</show_in_store>
</recipient_email> 
```

对此行发表评论`<validate>validate-email</validate>`

此代码适用于 magento 1.7.0.2 中的我。我希望这对您的问题有所帮助.. :D

不要忘记保存和清除缓存..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:06:50.177

您可以做的是添加一个包含电子邮件主题的隐藏表单字段。

然后转到 admin -> Transaction Email 并将模板主题更改为

> {{var data.formsubject}}

为每个表单添加一个隐藏字段

```
<input type="hidden" name="formsubject" value="Subject Here" /> 
```

阅读更多@[自定义交易电子邮件](http://www.magentocommerce.com/knowledge-base/entry/customizing-transactional-emails)

# asp.net - HtmlGenericControl("br") 渲染两次

> ID：13493586
> 
> 赞同：7
> 
> 时间：2012-11-21T12:45:42.973
> 
> 标签：asp.net, vb.net, htmlgenericcontrol

我正在从后面的代码向给定的网页添加一些内容。当我想在一些文本之后添加中断时，我尝试这样做：

```
pDoc.Controls.Add(New Label With {.Text = "whatever"})
pDoc.Controls.Add(New HtmlGenericControl("br")) 
```

，其中 pDoc 是`Panel`我在其中添加内容的位置。但是它`br`在最终的 HTML 中添加了两个标签。

我以这种方式避免了这种行为：

```
pDoc.Controls.Add(New Label With {.Text = "whatever" & "<br />"}) 
```

无论如何，我很好奇，我想知道为什么

```
pDoc.Controls.Add(New HtmlGenericControl("br")) 
```

正在这样做。我也觉得我的方法不太花哨。

问候，

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-04T07:59:21.317

其实你可以使用；

```
pDoc.Controls.Add(new LiteralControl("<br/>")); 
```

虽然`new HtmlGenericControl("br")`添加了两个`<br>`，但这只会将`<br/>`标签添加到您的 HTML 中，因此您只有 1 个空格行。在这张图片中，我使用该代码块添加了这些中断。

![在此处输入图像描述](../Images/b57150ca5074a4069633fc7a21de0208.png)

这里也有类似的问题：[服务器控制行为奇怪](https://stackoverflow.com/q/7526985/1847645)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T13:21:35.897

经过一些测试后，看起来原因是`HtmlGenericControl`不支持*自关闭*。在服务器端，`HtmlGenericControl("br")`被视为：

```
<br runat="server"></br> 
```

HTML中没有`</br>`标签，因此浏览器显示为有两个`<br />`标签。解决这个问题的好方法是`HtmlGenericSelfCloseControl`像这样创建（对不起 C# 代码，但在 VB.NET 中重写它应该没有问题）：

```
public class HtmlGenericSelfCloseControl : HtmlGenericControl
{
    public HtmlGenericSelfCloseControl()
        : base()
    {
    }

    public HtmlGenericSelfCloseControl(string tag)
        : base(tag)
    {
    }

    protected override void Render(HtmlTextWriter writer)
    {
        writer.Write(HtmlTextWriter.TagLeftChar + this.TagName);
        Attributes.Render(writer);
        writer.Write(HtmlTextWriter.SelfClosingTagEnd);
    }

    public override ControlCollection Controls
    {
        get { throw new Exception("Self closing tag can't have child controls"); }
    }

    public override string InnerHtml
    {
        get { return String.Empty; }
        set { throw new Exception("Self closing tag can't have inner content"); }
    }

    public override string InnerText
    {
        get { return String.Empty; }
        set { throw new Exception("Self closing tag can't have inner text"); }
    }
} 
```

并改用它：

```
pDoc.Controls.Add(New Label With {.Text = "whatever"})
pDoc.Controls.Add(New HtmlGenericSelfCloseControl("br")) 
```

作为一种更简单的替代方法（如果您参考了`Page`），您可以尝试使用`Page.ParseControl`：

```
pDoc.Controls.Add(New Label With {.Text = "whatever"})
pDoc.Controls.Add(Page.ParseControl("br")) 
```

# android - 将字节数组转换为位图 Android

> ID：13493588
> 
> 赞同：2
> 
> 时间：2012-11-21T12:45:48.483
> 
> 标签：android, bytearray, inputstream, image, bitmapfactory

我将 Android BluetoothChat 示例项目更改为通过蓝牙传输文件。我成功传输了文本文件并将它们打印在 ListActivity 上。我想对图像做同样的事情，但无法使其工作。有一个 Handler 对象，它将 InputStream 接收到的字节数组发送到 UserInterface。在那里我需要将此字节数组转换为图像。我尝试了以下但不起作用：

```
 @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MESSAGE_STATE_CHANGE:
            if(D) Log.i(TAG, "MESSAGE_STATE_CHANGE: " + msg.arg1);
            switch (msg.arg1) {
        case MESSAGE_READ:
            byte[] readBuf = (byte[]) msg.obj;
            // construct a string from the valid bytes in the buffer
            myImg.setImageBitmap(BitmapFactory.decodeByteArray(readBuf, 0, readBuf.length));
            //the following lines would actually display the text of the file in the ListActivity
            //String readMessage = new String(readBuf, 0, msg.arg1);
            //mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
            break;
        }
    }
}; 
```

向 UI 发送消息的处理程序代码如下所示：

```
mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1,buffer).sendToTarget(); 
```

**回答** 我阅读了许多其他帖子，并找到了其他成功使其工作的人。他用了一个小技巧救了我。我不会在这里给出答案，因为在问题页面[通过蓝牙将图像从 android 发送到 PC中以更好的方式进行了解释](https://stackoverflow.com/questions/12797372/sending-image-from-android-to-pc-via-bluetooth)

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:40:06.220

尝试使用`BitmapFactory.decodeByteArray(byte[] data, int offset, int length)`方法从字节数组中获取位图。

# facebook - 代表用户在用户的时间线上发布

> ID：13493589
> 
> 赞同：2
> 
> 时间：2012-11-21T12:45:48.890
> 
> 标签：facebook, api, facebook-graph-api

我在 Facebook 上创建了 APP。

现在我正在尝试使用 Graph API 在用户的时间轴上发表评论，但我无法理解我需要做什么。

我已经授权了应用程序（我授权了这个权限：**'user_status,publish_stream,user_photos,email'**）。

如果我查看我的个人资料 -> 隐私，我可以看到 APP 可以：

```
This app can: Post on your behalf
This app may post on your behalf, including status updates, photos and more.

Last data access:   
Basic InformationToday
See details · Learn more
Posts on your behalf:   
Who can see posts this app makes for you on your Facebook timeline? 
Public
Notifications:  
When to notify you? 
The app sends you a notification 
```

所以这部分似乎没问题。

在我的应用程序中，我执行以下操作以尝试在我的时间线上发布一些东西（我需要在离线时发布它）。

1) 获取：**https ://graph.facebook.com/oauth/access_token?client_id= *APPID* &client_secret=*APP_SECRET*&grant_type=client_credentials**

回复：

```
access_token = 422828347771671|UdQELQIf0N7krF4JUo7VwtPLTkk 
```

2) 获取：**https: //graph.facebook.com/search?q= *myemail* &type=user**

回复：

```
_"error":_{
______"message":_"A_user_access_token_is_required_to_request_this_resource_",
______"type":_"OAuthException",
______"code":_102
___} 
```

但是阅读文档（https://developers.facebook.com/docs/reference/api/#searching）似乎这个请求不需要任何类型的访问令牌。

我也尝试添加访问令牌，但结果仍然相同。

3）我知道我的facebookid，所以我尝试直接使用它：

发布：**https ://graph.facebook.com/100001139132403/feed**

争论：

access_token=422828347771671|UdQELQIf0N7krF4JUo7VwtPLTkk,

消息=你好

回复：

```
 "error": {
      "message": "(#200) This API call requires a valid app_id.",
      "type": "OAuthException",
      "code": 200
   }
} 
```

所以我尝试添加**client_id=APPID**和**app_id=APPID**，我尝试将一个、另一个以及两个参数都设置为 GET 或 POST 但没有任何改变。

我检查了 APPId 广告，它是正确的。

有人知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:10:58.310

您不能通过查询 URL 来简单地生成用户 access_token。您所做的事情提供了 App 访问令牌，正如错误所说，您正在尝试做一些需要用户 access_token 的事情。

**参考并实施：[https ://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)**

并将该 access_token 用于其余进程。

# amazon-ec2 - 将 aws ec2 数据备份到完全独立的 aws 帐户

> ID：13493592
> 
> 赞同：2
> 
> 时间：2012-11-21T12:45:50.640
> 
> 标签：amazon-ec2, amazon-web-services

我想将我的 AWS 快照备份到一个完全独立的 AWS 账户以提高安全性（如果我的 AWS 凭证被获取，有人可以删除我所有的快照和卷）。但我对如何做到这一点有点困惑。

似乎没有办法在 S3 中存储卷或快照，以便其他用户可以访问 s3 中的数据并将其存储在单独的 AWS 账户中。

有人对如何实现这一点有任何建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:10:40.790

1.  从您的秘密（备份）账户创建一个 IAM 用户和一个 S3 存储桶。
2.  向新创建的存储桶添加[IAM 策略](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingIAMPolicies.html)，允许您新创建的 IAM 用户放置对象，但拒绝他删除它们。
3.  使用 IAM 用户账户将您的备份上传到 S3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T16:56:12.283

您可以通过添加此权限与其他账户共享任何 EBS 快照。共享快照后，其他帐户可以将该快照复制到其帐户或使用该快照创建卷。

# servicestack - 如何在 servicestack 中按类型覆盖 XML 序列化格式

> ID：13493594
> 
> 赞同：2
> 
> 时间：2012-11-21T12:46:04.303
> 
> 标签：servicestack

我有一个需要自定义 XML 序列化和反序列化的类型，我想将其用作 requestDto 上的属性

对于 JSON，我可以使用 JsConfig.SerializeFn，XML 是否有类似的钩子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:23:51.437

ServiceStack 在底层使用 .NET 的 XML DataContract 序列化程序。除了底层 .NET 的框架实现所提供的功能之外，它是不可定制的。

为了支持自定义请求，您可以覆盖默认请求处理。ServiceStack 的**[序列化和反序列化 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Serialization-deserialization)**显示了自定义请求处理的不同方法：

### 注册自定义请求 DTO 活页夹

```
base.RequestBinders.Add(typeof(MyRequest), httpReq => ... requestDto); 
```

### 跳过自动反序列化并直接从 Request InputStream 中读取

告诉 ServiceStack 跳过反序列化并通过让您的 DTO 自己实现`IRequiresRequestStream`和反序列化请求（在您的服务中）来处理它：

```
//Request DTO
public class Hello : IRequiresRequestStream
{
    /// <summary>
    /// The raw Http Request Input Stream
    /// </summary>
    Stream RequestStream { get; set; }
} 
```

### 覆盖默认的 XML Content-Type 格式

如果您希望使用不同的 XML 序列化器，您可以通过[注册您自己的自定义媒体类型来覆盖 ServiceStack 中的默认内容类型](http://northwind.servicestack.net/vcard-format.htm)，例如：

```
string contentType = "application/xml";
var serialize = (IRequest request, object response, Stream stream) => ...;
var deserialize = (Type type, Stream stream) => ...;

//In AppHost.Configure method pass two delegates for serialization and deserialization
this.ContentTypes.Register(contentType, serialize, deserialize); 
```

# javascript - Facebook登录按钮事件在IE9中第一次没有触发

> ID：13493595
> 
> 赞同：0
> 
> 时间：2012-11-21T12:46:10.370
> 
> 标签：javascript, jquery, facebook-graph-api, facebook-login

我有一个页面，我在其中添加了一个自定义的 facebook 登录按钮，并在该单击事件中调用 FB.Login()。

它在除 IE9 和 IE8 之外的所有浏览器中都能正常工作，问题是当我第一次打开我的网站并单击登录按钮时没有弹出窗口出现。一旦我刷新我的页面并单击按钮，就会出现弹出窗口。

下面是我的代码：

```
<script type="text/javascript">
window.fbAsyncInit = function() {
      FB.init({
  appId: 'APPID',
        status     : true, 
        cookie     : true,
        xfbml      : true,
        oauth      : true
      });
  $("#fb").click(function () {

           FB.login(function(response) {//calling facebook login 

          }, {scope: 'user_photos,email,user_birthday,user_likes,user_activities,read_stream,user_religion_politics,user_relationships,user_education_history,user_work_history,user_hometown,user_location'});
  });

};
     (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {
       //alert("k");
       return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document));

</script>
 <input type="button" class="fb" id="fb" /> 
```

我不知道我是否正确，但我认为最初没有创建 facebook 对象，这就是登录窗口没有出现的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:55:58.263

您已将`click`事件添加到`#fb`Facebook 的输入中`AsyncInit`。您无法确定这将在输入加载后运行。

换句话说，你不能保证执行的顺序，你构造代码的方式，因为`click`事件是在回调中添加的，并且*可能*在 DOM（和`input`元素）完全加载之前调用该回调。

尝试在代码按钮之后添加事件。或者，研究[.ready() 方法](http://api.jquery.com/ready/)，以延迟 javascript 代码的某些部分执行，直到 DOM 完全加载。

# c# - Internet Explorer 扩展

> ID：13493596
> 
> 赞同：1
> 
> 时间：2012-11-21T12:46:13.480
> 
> 标签：c#, internet-explorer, windows-8

我从这个来源创建了一个 IE 扩展： [如何开始开发 Internet Explorer 扩展？](https://stackoverflow.com/questions/5643819/developing-internet-explorer-extensions) 而且效果很好。但我想改变

```
int IOleCommandTarget.Exec(IntPtr pguidCmdGroup, uint nCmdID, uint nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut)
    {
        var form = new HighlighterOptionsForm();
        form.InputText = TextToHighlight;
        if (form.ShowDialog() != DialogResult.Cancel)
        {
            TextToHighlight = form.InputText;
            SaveOptions();
        }
        return 0;
    } 
```

对此：

```
int IOleCommandTarget.Exec(IntPtr pguidCmdGroup, uint nCmdID, uint nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut)
    {
        HTMLDocument document = (HTMLDocument)browser.Document;

        IHTMLElement head = (IHTMLElement)((IHTMLElementCollection)
                               document.all.tags("head")).item(null, 0);
        IHTMLScriptElement scriptObject =
          (IHTMLScriptElement)document.createElement("script");
        scriptObject.type = @"text/javascript";
        var text = @"alert('hello') ";
        scriptObject.text = "(function(){" + text + "})()";
        ((HTMLHeadElement)head).appendChild((IHTMLDOMNode)scriptObject);
        return 0;
    } 
```

但是当我构建它时，然后单击按钮。我没有给我一个警报信息。我只想注入一个脚本。任何想法或技巧......解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:13:17.760

它不起作用，因为添加到文档的脚本标签不会自动评估。

您必须手动评估脚本，如下所示：

```
var document = browser.Document as IHTMLDocument2;
var window = document.parentWindow;
window.execScript(@"(function(){ alert('hello') })()"); 
```

此外，您根本不需要添加脚本标签......只需使用`window.execScript`.

# iphone - 如何使用 UIColor 类设置全局变量

> ID：13493598
> 
> 赞同：4
> 
> 时间：2012-11-21T12:46:25.413
> 
> 标签：iphone, global-variables, uicolor, uibackgroundcolor

我正在开发 iPhone 应用程序。在这个应用程序中，我有 4 个不同的视图。在所有视图中，我都设置了背景颜色。见下面代码

```
self.view.backgroundColor = [UIColor colorWithRed:(238.0f/255.0f) green:(251.0f/255.0f) blue:(255.0f/255.0f) alpha:0.8f]; 
```

我正在测试各种颜色的背景颜色。当我必须更改任何颜色时，我需要在所有视图控制器中进行更改。而不是我可以为此创建全局变量吗？我不知道如何在全局变量中设置 UIColor。请给我一些想法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T12:54:35.533

非常简单。
在 AppDelegate.h 中：

```
#define kGlobalColor [UIColor colorWithRed:(238.0f/255.0f) green:(251.0f/255.0f) blue:(255.0f/255.0f) alpha:0.8f] 
```

在视图控制器中：

```
#import "AppDelegate.h"

self.view.backgroundColor = kGlobalColor; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:56:03.020

创建`constant.h`文件`NSObject`并全局定义此颜色

**#define globalColor [UIColor colorWithRed:(238.0f/255.0f) green:(251.0f/255.0f) blue:(255.0f/255.0f) alpha:0.8f];**

当你想使用它时，只需导入常量文件，其他明智的 2 选项如下。

**第二种选择**

在`AppDelegate.h`文件中只是属性合成 UIColor 的一个变量，如下所示..

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>{
   ///your Data
   UIColor *globalColor;
}

@property (nonatomic,retain)  UIColor *globalColor; 
```

并在 .m 文件中合成，如下所示..

```
@syntesize globalColor; 
```

并且在`didFinishLaunchingWithOptions`方法中只是将颜色分配给这个变量..

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
         globalColor = [UIColor colorWithRed:(238.0f/255.0f) green:(251.0f/255.0f) blue:(255.0f/255.0f) alpha:0.8f];

} 
```

当你想使用这种颜色时，像这样使用..

```
 AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
   self.view.backgroundColor = appDelegate.globalColor; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:56:26.340

比使用全局变量更好的是扩展`UIColor`. 使用构造函数创建一个类别，提供您的颜色：

UIColor+mycolor.h：

```
@interface UIColor (mycolor)
+ (UIColor*) myColor;
@end 
```

UIColor+mycolor.m:

```
+ (UIColor*) systemBlue
{
return [UIColorcolorWithRed:(238.0f/255.0f) green:(251.0f/255.0f) blue:(255.0f/255.0f) alpha:0.8f];
 } 
```

# java - 与 Open Office 的连接问题 (com.sun.star.lang.DisposedException)

> ID：13493600
> 
> 赞同：1
> 
> 时间：2012-11-21T12:46:42.757
> 
> 标签：java, exception, openoffice.org, uno

我正在开发一个连接到 Open Office writer 应用程序的工具。编写器在与我的 java 工具不同的进程中运行。对于两个组件之间的通信，我使用 UNO Api。我经常收到一条错误消息，指出程序的 Open Office 部分崩溃。发生这种情况时，可以在日志中找到这样的堆栈跟踪：

```
com.sun.star.lang.DisposedException: java_remote_bridge com.sun.star.lib.uno.bridges.java_remote.java_remote_bridge@8ebb23 is disposed
at com.sun.star.lib.uno.bridges.java_remote.java_remote_bridge.checkDisposed(java_remote_bridge.java:715)
at com.sun.star.lib.uno.bridges.java_remote.java_remote_bridge.sendRequest(java_remote_bridge.java:634)
at com.sun.star.lib.uno.bridges.java_remote.ProxyFactory$Handler.request(ProxyFactory.java:154)
at com.sun.star.lib.uno.bridges.java_remote.ProxyFactory$Handler.invoke(ProxyFactory.java:136)
at $Proxy69.getCurrentController(Unknown Source) 
```

有谁知道，我怎么能找出这座桥为什么被处置？我很感激任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:26:29.777

我在回溯一个项目时遇到了类似的问题。无法确定这座桥被拆除的原因，除了一个特定的实例。当另一个 OOo Writer 实例在桥打开时打开和关闭时，它也会关闭桥。但问题绝对不限于这个单一的实例。

我最终使用了 OOoBean，它简化了连接的打开、关闭和保持打开。OOoBean 自 2006 年以来一直没有更新：[OOoBeans 死了吗？- 我的选择是什么？](https://stackoverflow.com/questions/4387622/ooobeans-dead-what-are-my-alternatives). 同一篇文章提到了一个新库 (NOA)，它可以完成与 OOoBean 类似的任务：[http](http://www.usegroup.de/software/noa/index.php/Main_Page) ://www.usegroup.de/software/noa/index.php/Main_Page 。

# php - PHP + MySQL - 随机列出 MySQL 表中的所有数据

> ID：13493601
> 
> 赞同：0
> 
> 时间：2012-11-21T12:46:46.843
> 
> 标签：php, mysql, list, random

我在 MySql 中有一个名为 clients 的表。我想在 php 网页中随机列出该表中的所有数据。每当用户访问php网页时，是否可以随机数据？

谢谢 :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:48:26.733

你可以这样做：

```
SELECT * FROM mytable ORDER BY RAND(); 
```

[这在此处](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)的示例中有所提及。*如[文档](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)中所述，`rand()`不会生成完美的随机数/序列（但它可能足以在网站上实际使用）。*

您还可以使用`limit`仅选择 N（例如 5）条记录：

```
SELECT * FROM mytable ORDER BY RAND() LIMIT 5; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:48:39.287

在您的查询中添加一个`ORDER BY RAND()`子句。

但是有一个警告，这种排序不会很有效......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:48:56.477

```
SELECT * FROM clients
ORDER BY RAND() 
```

# html - 具有相同高度、表格或 div 的两列布局？

> ID：13493605
> 
> 赞同：1
> 
> 时间：2012-11-21T12:47:19.837
> 
> 标签：html, css, html-table

我需要一个包含两列的布局，其中每一列都扩展到较高列的高度。

使用表我会简单地做：

```
<table class="parent">
    <tr>
        <td class="columnLeft">Column 1</td>
        <td class="columnRight">Column 2</td>
    </tr>
</table> 
```

第 1 列和第 2 列将保持相同的可变高度。

使用 div 有一些解决方案（涉及使用溢出：隐藏等）需要许多技巧才能跨浏览器正常工作。

（这里的jsfiddle：http: [//jsfiddle.net/rJjJa/1/](http://jsfiddle.net/rJjJa/1/)）

在这种情况下，我会简单地使用表格，而不需要额外的 CSS hacks 工作（或大量额外的标记）。你觉得桌子适合这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T16:09:15.640

如果你想让`div`s 表现得像一张桌子，你可以使用`display: table-cell;`for each `div`。它们的行为应该像`td`; 两者应该是相同的高度。这应该适用于所有现代浏览器和 ie8 及更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:50:37.843

### 标签`<table>`对于布局来说已经过时了！不要使用它。

相反，有许多跨浏览器 CSS 兼容 2 列布局，没有使用任何 hack。其中之一是[Equal height columns](http://matthewjamestaylor.com/blog/equal-height-columns-2-column.htm)。

### 等高列

> 不管每列有多少内容，背景颜色都会一直延伸到最高列的高度。

### 一篇文章，在这里详细解释：[使用跨浏览器 CSS 的等高列](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)。

# mysql - 在数据表中添加数据值

> ID：13493608
> 
> 赞同：0
> 
> 时间：2012-11-21T12:47:27.107
> 
> 标签：mysql, vb.net, datatable

嘿伙计们，你如何在不同的字段上但在同一个表上添加两个值

例如：

```
tblbooks

Quantity
Borrowed 
```

每次用户向借阅者发行一本书时，其数量减 1，借阅量加 1....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:49:31.923

```
INSERT INTO tablename(field1,field2)
VALUES(v1,v2) 
```

在你的情况下，我猜你需要更新。

```
Update yourtable
SET Quantity =Quantity-1,
    Borrowed=Borrowed+1
Where userid=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:41:52.720

我通常这样做的方式是使用 LinQ 选择我想要更新的行，然后只更新值。

例如：

```
 With (From rw In tblBooks Select rw Where rw.Item("MyCondition").ToString = "Condition").First
        .Item("Quantity") = .Item("Quantity") - 1
        .Item("Borrowed") = .Item("Borrowed") + 1
    End With 
```

...我没有测试这段代码，它没有考虑转换，错误检查等，但我希望它传达了这个想法......

# unit-testing - 如何在保存 Associates Cakephp 时测试 Add

> ID：13493610
> 
> 赞同：1
> 
> 时间：2012-11-21T12:47:38.357
> 
> 标签：unit-testing, cakephp, testing, save, cakephp-2.0

如何测试这样的方法：

```
public function add() {
if (!empty($this->request->data)) {
        $this->Contest->create();

        if ($this->Contest->saveAll($this->request->data)) {

            $contestStage['name'] = 'First - ' . $this->request->data['Contest']['name'];
            $contestStage['contest_id'] = $this->Contest->id;

            if ($this->Contest->ContestStage->save($contestStage)) {
                $this->setMessage(__ADD_OK, 'Konkurs');
                $this->redirect(array(
                    'action' => 'view',
                    $this->Contest->id
                ));
            } else {
                $this->setMessage(__ADD_ERROR, 'Konkurs');
            }
        } else {
            $this->setMessage(__ADD_ERROR, 'Konkurs');
        }
    }
} 
```

我的测试方法：

```
public function testAdd() {
        $this->generateWithAuth(self::ADMIN); // genereting controller here
        $url = $this->getUrl('add');
        $options2 = array(
            'method' => 'post',
            'data' => array(
                'Contest' => array(
                    'id' => 3,
                    'owner_id' => 1,
                    'name' => 'Testing',
                    'created' => '2012-11-16 12:02:33.946',
                ),
            ),
            );
        $this->testAction($url, $options2); 
        $this->assertArrayHasKey('Location', $this->headers, 'No redirection');
        $this->assertEquals($this->Contest->hasAny(array('Contest.name' => 'Testing')), true);    
        $messages = Set::extract('{flash}.message', CakeSession::read('Message'));
    } 
```

我收到的是

```
PDOEXCEPTION
SQLSTATE[23505]: Unique violation: 7 BŁĄD: double key value violates a constraint 
```

     唯一性“contest_stages_pkey”详细信息：密钥（id）=（1）已经存在。

因为这是真的，我有一个 id=1 的比赛阶段，为什么它不使用下一个；<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:33:34.243

Cakephp 没有记录如何很好地进行测试，这有点奇怪。

问题是您插入了两次竞赛 ID。您应该确保您使用的数据库具有测试前缀（或任何您喜欢的前缀）并清除测试表。

作为替代方案，您可以使用固定装置。数据会产生更好的测试用例，因为它会为您预先填充数据，以便您随时了解数据库中的内容。仍然确保使用前缀，我犯了一次不这样做的错误，每次都炸毁我的整个数据库

祝你好运

# delphi - 如何修复不兼容的类型

> ID：13493613
> 
> 赞同：1
> 
> 时间：2012-11-21T12:47:42.910
> 
> 标签：delphi, delphi-2010

Mason Wheeler 写了一个非常好的程序来比较字符串列表，但是我不明白如何编写回调程序 TStringCompareProc。有人可以帮我编译吗？

```
 type
     TStringCompareProc = procedure(const value: string; const data: TObject) of object;
     procedure StringListCompare(List1, List2: TStringList; matchProc: TStringEqualProc;
                                  list1Proc, list2Proc: TStringCompareProc; presorted: boolean = false);

    Usage:

    procedure TForm1.MatchProc(const value: string; const data: TObject);
    // match is found between the two lists
    begin
    //
    end;

    procedure TForm1.List1Proc(const value: string; const data: TObject);
    // when the first list contains a string not in the second list
    begin
    //
    end;

    procedure TForm1.List2Proc(const value: string; const data: TObject);
    // when the second list contains a string not in the first list
    begin
    //
    end;

    procedure TForm1.Compare1Click(Sender: TObject);
    var
    MatchProc: TStringEqualProc;
    List1Proc: TStringCompareProc;
    List2Proc: TStringCompareProc;
    iValue: string;
    iData: ^PString;
    begin
    iFinalStringList := StringListCompare(iNewFilesStringList, iExistingFilesStringList,
              nil, nil, List1Proc(iValue, @iData), List2Proc(iValue, @iData), False); <- [DCC Error] Unit1.pas(1336): E2010 Incompatible types: 'TStringCompareProc' and 'procedure, untyped pointer or untyped parameter'
    end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:53:04.803

你应该只写`List1Proc`和`List2Proc`作为 的参数`StringListCompare`。也就是说，写

```
iFinalStringList := StringListCompare(iNewFilesStringList,
  iExistingFilesStringList, nil, nil, List1Proc, List2Proc, False); 
```

代替

```
iFinalStringList := StringListCompare(iNewFilesStringList,
  iExistingFilesStringList, nil, nil, List1Proc(iValue, @iData),
  List2Proc(iValue, @iData), False); 
```

# c# - 静态类中的 Thread.Sleep()

> ID：13493616
> 
> 赞同：1
> 
> 时间：2012-11-21T12:47:49.413
> 
> 标签：c#, .net, multithreading, static

我正在研究一个包含很多项目的解决方案。我有一个托管我的实用程序方法的项目。所有其他项目都使用此项目方法。

我想知道是否可以同时从多个项目调用静态方法？

另外，在我的一种方法中，我有一个可选参数来执行`Thread.Sleep()`如果一个项目调用此方法并同时使用睡眠和另一个没有睡眠会发生什么？

我真的被这个结构弄糊涂了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:50:42.763

> 我想知道是否可以同时从多个项目调用静态方法？

好吧，这取决于方法的作用。*您*需要负责确保可以同时从多个线程调用它。（调用者是否在同一个项目中几乎总是完全不相关的。）

只要您不以危险的方式修改任何共享状态 - 例如添加到 a`List<T>`而没有任何同步 - 您应该没问题。这一切都取决于你在做什么。

每个调用在具有单独的参数集和局部变量方面都是独立的。现在，如果其中一些参数引用其他线程可见的对象，那是另一回事......但我们无法从你的问题中看出这一点。

请注意，`Thread.Sleep`此处的使用几乎无关紧要。诚然，如果您有一些同步（例如 via `lock`），那么拥有锁的线程然后休眠将是非常不愉快的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:50:43.543

正如函数所说，**线程**休眠，当前调用线程将在调用期间休眠。如果你有多个线程调用这个函数，它们都会休眠。如果您的所有项目都从同一个线程运行，它们将永远不会同时调用此函数，并且会串行休眠。

# jakarta-ee - 如何为指定位置中存在的特定文件编写 Junit 测试？

> ID：13493619
> 
> 赞同：-3
> 
> 时间：2012-11-21T12:47:56.347
> 
> 标签：jakarta-ee, spring-mvc, primefaces, junit4

通过使用*junit*测试用例如何检查特定文件是否存在于指定位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:49:48.913

您可以创建一个检查以下内容的测试：

> 新文件（文件路径）.exists（）

如果它的错误只是抛出一个异常

你应该看看 [File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html) Class

# android - 我如何在android中从onItemClick调用到onListItemClick方法

> ID：13493622
> 
> 赞同：0
> 
> 时间：2012-11-21T12:48:02.647
> 
> 标签：android, listview

我有一个按钮和一个列表视图。我根据单击列表在一个列表视图中设置三个适配器，但是当我按下返回按钮时，它只会单击一次。

代码在这里：

```
public class GamesFragment extends ListFragment{

    Context context;

    Dialog dialog;
    Game_Adapter gameadapter; 
    Game_Channels_Sections_Adapter  GameChannelsSections;   
    Game_Sections_Details_Adapter  GameSectionsDetails;

    ListView listView1;
    JSONArray dataJsonObject;
    Button back,back2;
    TextView title;
    Button add;
      int i=0;
      int y=0;
      int z=0;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view=inflater.inflate(R.layout.game_list, container,false);
        listView1=(ListView)view.findViewById(android.R.id.list);
        back=(Button) view.findViewById(R.id.button_back);

        GamesFragmentData dataobserver=new GamesFragmentData();
        add=(Button) view.findViewById(R.id.button_add);
        title=(TextView) view.findViewById(R.id.textview_caption);
        title.setText("Games");

        add.setVisibility(View.INVISIBLE);
        ServerManager.getInstance().addObserver(dataobserver);

        ServerManager.getInstance().readLoopForGameData(AppConstances.Games_Channels);
        if(gameadapter==null)
            gameadapter=new Game_Adapter(getActivity(), new JSONArray());
        listView1.setAdapter(gameadapter);

        Log.e("","In ongameadapter---->");
        return view;
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {

        System.out.println("In onListItemClick---->");

        Log.e("","In onListItemClick---->");
        ServerManager.getInstance().readLoopForGame_Channels_Sections_Data(AppConstances.Games_Channels_Sections);

        GameChannelsSections=new Game_Channels_Sections_Adapter(getActivity(),new JSONArray());

        listView1.setAdapter(GameChannelsSections);

        back.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Log.e("","In onListItemClick1---->");
                listView1.setAdapter(gameadapter);

            }
        });

        listView1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View view, int position,
                    long id) {

                ServerManager.getInstance().readLoopForGame_Channels_Sections_Details_Data(AppConstances.Games_Sections_Details);

            GameSectionsDetails=new Game_Sections_Details_Adapter(getActivity(),new JSONArray());
                listView1.setAdapter(GameSectionsDetails);
            }
                Log.e("","In onItemClick---->");
                back.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        Log.e("","In onItemClick1---->");
                        listView1.setAdapter(GameChannelsSections); 

                    }
                });

            }
        });

        super.onListItemClick(l, v, position, id);   
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {

        super.onActivityCreated(savedInstanceState);

    } 
```

代码有两个方法：
onListItemClick onItemClick

当我单击列表视图控件时，它会从*onListItemClick*变为*onItemClick* ，因为我在 onclick 上的单个列表视图中设置了三个适配器。
但是当我点击后退按钮时，我需要收回。我不能回去。

比如说，如果我按下适配器 1，我设置了适配器 2，如果我按下适配器 2，我设置了适配器 3。

现在，我在适配器 3。点击后退按钮，我从 3 返回到 2，但我不能从 2 到 1。

简而言之，我怎样才能将控制权从 onItemClick 返回到 onListItemClick 以便可以重复点击流程？

# javascript - getElementById 在某些浏览器中是可选的吗？

> ID：13493624
> 
> 赞同：9
> 
> 时间：2012-11-21T12:48:24.250
> 
> 标签：javascript, html

通过 window.someThing 访问元素时，“someThing”应该是 html 元素的名称。但是我现在看到的是，我可以通过 id 以相同的方式访问元素，而无需 document.getElementById。这是什么时候改变的？看起来它适用于 Chrome、IE、Firefox 13，但不适用于 Firefox 12。

例如：

```
<div id="MyDiv">Content</div>

<script>
    MyDiv.innerHTML = "New Content";
</script> 
```

为什么上面的例子有效？为什么我不必这样做：

```
var MyDiv = document.getElementById('MyDiv'); 
```

它是新事物，还是一直都有可能而我只是不知道？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:51:14.697

~~http://www.quirksmode.org/dom/w3c_core.html#gettingelements
自 IE 5.5 以来（大部分）已实现~~

我真的找不到任何关于使用 ID 作为变量名的信息。我建议坚持使用`getElementById("MyDiv").doSomething`而不是`MyDiv.doSomething`, 以提高兼容性。特别是当您编写较大的脚本时，您可能会将变量名称与页面中使用的 id 混淆。`getElementById`确保您“获得” DOM 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:55:20.523

这不是 JavaScript 中的标准行为。像使用 一样添加变量时`var MyDiv`，该变量被添加到`window`对象中，以便可以直接访问它，就像它是一个属性一样，但从未添加 DOM 元素。我个人不知道新行为的原因，但我的猜测是它只是语言引擎能力的扩展。如果您真的想知道行为应该是什么，您可以随时阅读标准： http: [//www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

**编辑：**另外，请注意用于获取元素的方法`document.getElementById()`来自文档对象模型。您所指的方法是将 id 放入 window 对象中，该对象可以通过 id 创建冲突。标准定义的方法是`document`从`window`. 以这种方式使用`window`对象类似于使用全局变量（这是一个不好的做法：[http](http://www.javascripttoolbox.com/bestpractices/#namespace) ://www.javascripttoolbox.com/bestpractices/#namespace ）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:59:06.450

**躲开它！**

这似乎是一个了不起的功能，但我建议不要使用它，因为如果您的 div 的 id 与某些全局 JS 变量的 id 相同，则会发生冲突，并且还会弄乱您包含的其他一些第三方 JS 文件中的内容.

***但是您始终拥有 jQuery 选择器，并且不要忘记现代浏览器中的新 querySelector 功能 :)***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T13:05:57.133

您可以在这里找到答案：[我可以使用 ID 作为变量名吗？](https://stackoverflow.com/questions/6852883/can-i-use-an-id-as-a-variable-name)

简而言之，避免它。

它起作用的原因是浏览器实际上创建了一个变量`window.document.myDiv`

# django - 夹层文件浏览器部署

> ID：13493629
> 
> 赞同：1
> 
> 时间：2012-11-21T12:48:41.613
> 
> 标签：django, deployment, file-browser, mezzanine

我已经安装了夹层，并尝试使用管理界面将一些图片上传到媒体库。我在开发服务器（本地主机）上没有任何问题，但在部署服务器上我得到以下信息：

```
NetworkError: 500 INTERNAL SERVER ERROR - http://mydomain/asset_proxy/?u=http://mydomain/static/filebrowser/uploadify/uploadify.swf 
```

我试图在互联网上找到解决方案，但没有任何成功。与此问题相关的所有主题都是模棱两可的，根本没有帮助我。

当服务器尝试加载 Flash 对象 (uploadify.swf) 时，似乎可能存在安全问题，但我并没有真正理解。

我很高兴了解问题出在哪里以及如何解决它。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-18T17:24:03.007

如果将来有人遇到这个问题，看起来网络服务器不会自动有权写入夹层项目中的媒体目录。

您可以简单地执行以下操作：

`chmod -R 777 /YOUR_PROJECT/static/media`

那应该可以解决您的问题。

# php - 如何在 Magento 小部件配置中允许多个产品选择？

> ID：13493630
> 
> 赞同：22
> 
> 时间：2012-11-21T12:48:46.480
> 
> 标签：php, magento-1.6, magento

我正在尝试实现嵌入式小部件。管理员将能够配置此小部件并将其嵌入所见即所得编辑器中。许多配置选项中的两个是应显示在前端的产品列表和类别列表。

我想允许使用“ **adminhtml/catalog_product_widget_chooser** ”和“ **adminhtml/catalog_category_widget_chooser** ”进行此选择。我尝试使用网络上提供的稀疏文档来实现这些小部件，但我设法完成的只是选择一种产品或选择一个类别的实现。我需要多选行为。

据我所见，当前实现不允许进行多选。我检查了类和 grid.phtml 模板的代码，它接缝写得很糟糕，并且超出当前的使用意图不可扩展。例如，这是您假设为小部件参数初始化帮助程序块以允许多选的方式：

```
<helper_block>
    <type>adminhtml/catalog_product_widget_chooser</type>
        <data>
            <button translate="open">
                <open>Select Products...</open>
            </button>
            <use_massaction>1</use_massaction>
        </data>
</helper_block> 
```

但是产品选择器是硬编码的，无需使用这部分代码进行大规模操作：

```
public function prepareElementHtml(Varien_Data_Form_Element_Abstract $element)
{
    $uniqId = Mage::helper('core')->uniqHash($element->getId());
    $sourceUrl = $this->getUrl('*/catalog_product_widget/chooser', array(
        'uniq_id' => $uniqId,
        'use_massaction' => false,
    ));
    ... 
```

并且应该有某种按钮来确认多项选择的 grid.phtml 模板只是显示“搜索”和“重置过滤器”按钮。并且没有处理添加另一个按钮。例如这里是负责打印按钮 html 的默认代码：

```
public function getMainButtonsHtml()
{
    $html = '';
    if($this->getFilterVisibility()){
        $html.= $this->getResetFilterButtonHtml();
        $html.= $this->getSearchButtonHtml();
    }
    return $html;
} 
```

默认情况下只打印这两个按钮。

所以我基于上面提到的两个实现开始了我自己的实现，它变得越来越难看，最终可能会变成一团无法维护的复制面。而且我的工作原则是，如果事情开始变得丑陋，那么我做错了什么。

那么有没有一种直接的方法可以通过使用网格小部件在小部件配置屏幕上实现多产品和多类别选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-10T17:32:53.343

我找到了一种使用基于`adminhtml/system_config_source_category`. 我删除了根级过滤器并为子类别添加了缩进。

小部件.xml：

```
<widgets>
    <my_widget type="mymodule/block" translate="name" module="mymodule">
        <name>Widget with Multiselect Categories</name>
        <parameters>
            <category_ids translate="label description">
                <visible>1</visible>
                <required>1</required>
                <label>Categories</label>
                <type>multiselect</type>
                <source_model>mymodule/system_config_source_category</source_model>
            </category_ids>
        </parameters>
    </my_widget>
</widgets> 
```

源模型：

```
class Mynamespace_Mymodule_Model_System_Config_Source_Category
{
    public function toOptionArray()
    {
        $collection = Mage::getResourceModel('catalog/category_collection');

        $collection->addAttributeToSelect('name')
            ->addFieldToFilter('path', array('neq' => '1'))
            ->load();

        $options = array();

        foreach ($collection as $category) {
            $depth = count(explode('/', $category->getPath())) - 2;
            $indent = str_repeat('-', max($depth * 2, 0));
            $options[] = array(
               'label' => $indent . $category->getName(),
               'value' => $category->getId()
            );
        }

        return $options;
    }
} 
```

结果：

![多选小部件参数](../Images/8888517745f2af93ad0581ee696bcdd6.png)

资料来源： http: [//www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-magento-widget-part-2](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-magento-widget-part-2)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-12T11:49:18.200

我已经添加了这个问题的答案。 [实现多个产品选择器小部件 Magento](https://stackoverflow.com/questions/34389150/implement-multiple-product-chooser-widget-magento)

我检查了[https://github.com/dio5/magento-multiproducts-widget](https://github.com/dio5/magento-multiproducts-widget)下的模块。

使用 FORK 选项而不是下载 ZIP。

它有效并为我们提供了准确的结果，即 WIDGET 中的多个产品选择。如果有任何错误，请告诉我。

让我知道这是否适合你。

谢谢！

[编辑我之前的评论，根据代码的要求直接在这里]

> /命名空间/模块名/etc/widget.xml

```
<widgets>
  <catalog_product_multiproducts type="namespace_modulename/widget_catalog_product_multiproducts" translate="name description" module="namespace_modulename">
    <name>Catalog Multiple Products Widget</name>
    <description>Select multiple products for display</description>
    <parameters>
        <title translate="label">
            <visible>1</visible>
            <label>Title</label>
            <type>text</type>
        </title>
        <products_count translate="label">
            <visible>1</visible>
            <required>1</required>
            <label>No of Products</label>
            <type>text</type>
        </products_count>
        <ids translate="label">
            <visible>1</visible>
            <required>1</required>
            <label>Products</label>
            <type>label</type>
            <helper_block>
                <type>namespace_modulename/adminhtml_catalog_product_widget_multiproducts_chooser</type>
                <data>
                    <button translate="open">
                        <open>Select Products...</open>
                    </button>
                </data>
            </helper_block>
            <sort_order>10</sort_order>
        </ids>
        <template translate="label description">
            <required>1</required>
            <visible>1</visible>
            <label>Product Carousel Template</label>
            <type>text</type>
            <value>catalog/product/widget/products_carousel.phtml</value>
            <values>
                <default translate="label">                                                       <value>catalog/product/widget/products_carousel.phtml</value>
                    <label>New Products Grid Template</label>
                </default>
                <list translate="label">
                    <value>catalog/product/widget/new/content/new_list.phtml</value>
                    <label>New Products List Template</label>
                </list>
            </values>
            <description>Template path cannot be changed/updated</description>
        </template>       
    </parameters>
  </catalog_product_multiproducts>
</widgets> 
```

> /NameSpace/ModuleName/Block/Adminhtml/Catalog/Product/MultiProducts/Chooser.php

此函数将调用 DOCHOOSE() 函数，该函数将帮助“选择”选中/选定的产品。

```
/**
 * prepare layout for products grid
 * 
 * @return type Mage_Adminhtml_Block_Catalog_Product_Widget_Chooser
 */
 protected function _prepareLayout()
 {
    $this->setChild('choose_button', $this->getLayout()->createBlock('adminhtml/widget_button')
                    ->setData(array(
                        'label' => Mage::helper('adminhtml')->__('Choose Selected Products'),
                        'onclick' => $this->getJsObjectName() . '.doChoose()'
                    ))
    );
    return parent::_prepareLayout();
} 
```

需要使用以下函数来准备产品元素的 HTML，格式为 {1}{2}

```
/**
 * Prepare chooser element HTML
 *
 * @param Varien_Data_Form_Element_Abstract $element Form Element
 * @return Varien_Data_Form_Element_Abstract
 */
public function prepareElementHtml(Varien_Data_Form_Element_Abstract $element)
{
    $uniqueId = Mage::helper('core')->uniqHash($element->getId());

    $sourceUrl = $this->getUrl('*/multiproducts/chooser', array(
        'uniq_id' => $uniqueId,
        'use_massaction' => true,
    ));

    $chooser = $this->getLayout()->createBlock('widget/adminhtml_widget_chooser')
            ->setElement($element)
            ->setTranslationHelper($this->getTranslationHelper())
            ->setConfig($this->getConfig())
            ->setFieldsetId($this->getFieldsetId())
            ->setSourceUrl($sourceUrl)
            ->setUniqId($uniqueId);

    if ($element->getValue())
    {
        $label = "";
        $ids = explode('}{', $element->getValue());
        $cleanIds = array();
        foreach ($ids as $id)
        {
            $id = str_replace('{', '', $id);
            $id = str_replace('}', '', $id);
            $cleanIds[] = $id;
        }

        $products = $this->_getProductsByIDs($cleanIds);

        if ($products)
        {
            $label .= '<ul>';
            foreach ($products as $product)
            {
                $label .= '<li>' . $product->getName() . '</li>';
            }
            $label .= '</ul>';
            $chooser->setLabel($label);
        }
    }

    $element->setData('after_element_html', $chooser->toHtml());

    return $element;
} 
```

选中/未选中复选框的 JS

```
/**
 * Checkbox Check JS Callback
 *
 * @return string
 */
public function getCheckboxCheckCallback()
{
    if ($this->getUseMassaction())
    {
        return "function (grid, element) {
            $(grid.containerId).fire('product:changed', {element: element});                 
        }";
    }
} 
```

用于单击/选中/选中的行/产品的 JS

```
/**
 * Grid Row JS Callback
 *
 * @return string
 */
public function getRowClickCallback()
{
    if (!$this->getUseMassaction())
    {
        $chooserJsObject = $this->getId();
        return '
            function (grid, event) {
                var trElement = Event.findElement(event, "tr");
                var productId = trElement.down("td").innerHTML;
                var productName = trElement.down("td").next().next().innerHTML;
                var optionLabel = productName;
                var optionValue = "product/" + productId.replace(/^\s+|\s+$/g,"");
                if (grid.categoryId) {
                    optionValue += "/" + grid.categoryId;
                }
                if (grid.categoryName) {
                    optionLabel = grid.categoryName + " / " + optionLabel;
                }
                ' . $chooserJsObject . '.setElementValue(optionValue);
                ' . $chooserJsObject . '.setElementLabel(optionLabel);
                ' . $chooserJsObject . '.close();
            }
        ';
    }
} 
```

JS 代码，如果用户有兴趣从特定类别中选择产品。

```
/**
 * Category Tree node onClick listener js function
 *
 * @return string
 */
public function getCategoryClickListenerJs()
{
    $js = '
        function (node, e) {
            {jsObject}.addVarToUrl("category_id", node.attributes.id);
            {jsObject}.reload({jsObject}.url);
            {jsObject}.categoryId = node.attributes.id != "none" ? node.attributes.id : false;
            {jsObject}.categoryName = node.attributes.id != "none" ? node.text : false;
        }
    ';

    $js = str_replace('{jsObject}', $this->getJsObjectName(), $js);

    return $js;
} 
```

用于准备带有产品 ID 的 POST 元素的附加 JS。

```
/**
 * return additional JS for controls
 * 
 * @return JS
 */
public function getAdditionalJavascript()
{
    $chooserJsObject = $this->getId();

    $js = '    
        {jsObject}.initChecked = function() {
            $$("#' . $chooserJsObject . '_table tbody input:checkbox").each(function(element, i) {
                var values = ' . $chooserJsObject . '.getElementValue();
                var capture = values.replace("{"+element.value+"}", "match");                    
                var searchValue = "match";

                if(capture.search(searchValue) != -1)
                {
                    element.checked = true;
                }
            });
        }

        {jsObject}.initChecked();

        var values = ' . $chooserJsObject . '.getElementValue();

        $("' . $chooserJsObject . '").insert({bottom: "<div class=\"filter\"><input type=\"hidden\" value=\"+values+\" name=\"selected_products\" /></div>"});

        $$("#' . $chooserJsObject . '_table tbody input:checkbox").invoke("observe", "change", function(event) {
            var element = Event.element(event);
            var label = element.up("td").next().next().next().innerHTML;
            label = label.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
            if(element.checked)
            {
                {jsObject}.addValue(element.value);
                {jsObject}.addLabel(label);
            } else {
                {jsObject}.removeValue(element.value);
                {jsObject}.removeLabel(label);
            }
        });

        {jsObject}.removeValue = function(value) {
            var currentValue =  ' . $chooserJsObject . '.getElementValue();
            currentValue =  currentValue.replace("{"+value+"}", "");
            ' . $chooserJsObject . '.setElementValue(currentValue);
        }

        {jsObject}.addValue = function(value) {
            var currentValue = ' . $chooserJsObject . '.getElementValue();
            currentValue = currentValue.replace("{"+value+"}", "");
            currentValue = currentValue + "{"+value+"}";
            ' . $chooserJsObject . '.setElementValue(currentValue);
        }

        {jsObject}.removeLabel = function(label) {
            var currentLabel =  ' . $chooserJsObject . '.getElementLabelText();
            currentLabel = currentLabel.replace("<li>"+label+"</li>", "");
            ' . $chooserJsObject . '.setElementLabel(currentLabel);         
        }

        {jsObject}.addLabel = function(label) {
            var currentLabel = ' . $chooserJsObject . '.getElementLabelText();
            if(currentLabel.search("ul") != -1)
            {
                currentLabel = currentLabel.replace("</ul>", "");
                currentLabel = currentLabel.replace("<li>"+label+"</li>", "");
            } else {
                currentLabel = "<ul>";
            }    
            currentLabel = currentLabel +"<li>"+label+"</li></ul>";
            ' . $chooserJsObject . '.setElementLabel(currentLabel);
        }

        {jsObject}.doChoose = function(node,e) {
            ' . $chooserJsObject . '.close();
        }
    ';

    $js = str_replace('{jsObject}', $this->getJsObjectName(), $js);

    return $js;
} 
```

以上是主要功能，可帮助您在弹出窗口中从 GRID 中选择多个产品。

可以在此处检查代码的更多内容：[https ://github.com/dio5/magento-multiproducts-widget](https://github.com/dio5/magento-multiproducts-widget)

脚步：

> 1.  在管理面板中导航到 CMS 页面
> 2.  在所见即所得编辑器中单击“插入小部件”
> 3.  选择小部件类型 - 目录多个产品小部件
> 4.  输入标题、产品数量
> 5.  选择一个模板（可以根据需要添加任意数量的模板作为选项）
> 6.  点击“选择产品”按钮
> 7.  从 GRID 中选择产品
> 8.  点击“选择所选产品”按钮

希望这对某人有帮助！

快乐的编码...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T06:00:06.770

看起来您不是第一个为此开发自己的实现的人。

[David Manners](https://github.com/dmanners)似乎用他的[Manners_Widgets](https://github.com/dmanners/Manners_Widgets)解决了同样的问题。

> Manners_Widgets 扩展的特点：
> 
> *   **产品和类别的多项选择**

我没有与大卫联系过，也没有使用过这个解决方案，所以不能评论这个代码的质量（或完整性）......但如果你还没有看到这个解决方案，它可能会为你节省一些时间（或者在最坏的情况下，给你一个联系点，以便在这个问题上进行合作）。

希望这对你有帮助，祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T18:10:10.830

这是一个快速修复：不要使用产品小部件选择器，而是使用允许逗号分隔 SKU 的文本字段。

然后在您的代码中分解 sku 并按 sku 获取产品。将其返回到您的模板。容易得多:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-15T13:40:40.783

尝试[https://github.com/dio5/magento-multiproducts-widget](https://github.com/dio5/magento-multiproducts-widget)。

它似乎非常有用。

# alloy - Barber Paradox 为什么这个模型不一致？

> ID：13493632
> 
> 赞同：3
> 
> 时间：2012-11-21T12:48:55.403
> 
> 标签：alloy

我想知道为什么这个模型不一致？我们可以在 shaves 中有以下元组。

`shaves = {(man,man)} sig Man {shaves: set Man} one sig Barber extends Man {}`

```
fact {
   Barber.shaves = (m:Man |m not in m.shaves}
} 
```

Barber.shaves 将产生 0 个元组。在这种情况下，事实应该是有效的。那么为什么允许告诉我我的模型不一致？

非常感谢对此的一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:11:57.137

好的，这是解决方案。这个想法很简单，我认为作者真的应该在他们的书中解释这一点。

混淆的症结在于事实陈述。

Barber.shaves = {m:Man | m 不在 m.shaves}

基本上，上述声明的意思是，Barber.shaves 中的任何元组都不能自己刮胡子。例如 = Barber.shaves = {(m)}，则**(m, m)**绝不能出现在剃须关系集中。此外，m:Man 表示每个不刮胡子的人也应该在 Barber.shaves 中。

当我们来到 Barber 实例时，问题就出现了。如果 barber 不在 Barber.shaves 中，则违反 m : Man。如果 barber 包含在内，则它违反 m not in m.shaves 因为 shaves 将包含 {(barber, barber)}

我希望这可以消除像我这样的合金初学者的困惑。

因此，鉴于我问题中的当前模型，合金无法创建满足这一事实的实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T15:34:32.667

有一个仅使用英语的简单解释。

上面的合金事实表明，理发师（只有一个理发师，因为`one sig Barber`）剃须的一组男士与所有不刮胡子的男士完全相等。起初，这种说法是有道理的，因为每个人要么自己刮胡子，要么被理发师刮胡子。

诀窍问题是“谁给理发师刮胡子”。如果理发师不给自己刮胡子，那么这个事实就会迫使理发师必须给理发师刮胡子，这与理发师不给自己刮胡子的假设相矛盾。如果理发师自己刮胡子，那么理发师一定不能给理发师刮胡子，这又是一个悖论，所以找不到例子。

# javascript - 使用 blur.js (blurjs.js) 对远程托管的图像进行模糊处理

> ID：13493636
> 
> 赞同：2
> 
> 时间：2012-11-21T12:48:59.400
> 
> 标签：javascript, jquery, css, image, blur

是否可以使用[http://www.blurjs.com](http://www.blurjs.com)模糊远程图像？

我将我们的图像托管在远程 CDN 上，我们想使用 blurjs 来模糊图像以获得背景效果。当我们尝试直接对远程图像使用 blur js 时，javascript 无法读取文件并抛出无法读取图像数据错误。

我目前这样做的方式是在php中重新生成图像，然后使用blurjs，但它非常慢并且消耗大量资源。

我们也使用过滤器尝试了 css 解决方案，但是当我们这样做时浏览器运行速度太慢。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:13:35.150

您的问题是，不允许从与托管页面的域不同的域加载的图像在画布中进行像素访问。您需要的是在您的服务器上运行的代理脚本，它允许您的 javascript 通过您的服务器从其他域加载图像。当然，缺点是所有流量也将通过您的服务器运行，并且检索图像的时间会增加（因为图像必须首先加载到您的服务器然后再加载到客户端），不幸的是没有办法解决这个问题.

好消息是，这是 Flash 开发人员在多年前就已经面临的问题，因此已经解决了很多次：

例如一个 php 脚本：[http ://www.abdulqabiz.com/blog/archives/2007/05/31/php-proxy-script-for-cross-domain-requests/](http://www.abdulqabiz.com/blog/archives/2007/05/31/php-proxy-script-for-cross-domain-requests/)

这是 Node.js [http://codelikebozo.com/creating-an-image-proxy-server-in-nodejs中更新的实现](http://codelikebozo.com/creating-an-image-proxy-server-in-nodejs)

# android - android 将图片保存到内存的问题

> ID：13493637
> 
> 赞同：1
> 
> 时间：2012-11-21T12:49:01.920
> 
> 标签：android, camera, storage, internal

我正在为学校编写一个应用程序，其中最大的部分之一就是拍照。我得出的结论是，如果我可以将它们保存在内部存储中，那将是完美的，这样它们就会在卸载过程中被自动删除。

我遇到了几个代码示例，证明我没有简单的方法来做到这一点（我意识到将图像保存在外部存储器上也是小菜一碟）。但是，我设法找到了这个问题：[Trouble writing internal memory android](https://stackoverflow.com/questions/5252193/trouble-writing-internal-memory-android)并想出了类似的东西。经过一段时间的测试，我遇到了“无法恢复活动”异常，但幸运的是我找到了一个调整：[android 中来自相机意图问题的图像](https://stackoverflow.com/questions/10825810/image-from-camera-intent-issue-in-android)

现在我的代码如下所示：

```
private void dispatchTakePictureIntent(int actionCode) {
    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), FITPAL_TEMP_PICTURE_NAME);
    Uri outputFileUri = Uri.fromFile(file);

    takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
    startActivityForResult(takePictureIntent, actionCode);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case ACTION_TAKE_PHOTO_B: {
        if (resultCode == RESULT_OK) {
            File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), FITPAL_TEMP_PICTURE_NAME);
            Bitmap picture = BitmapFactory.decodeFile(file.getAbsolutePath());

            if (picture == null) {
                showShortToast(R.string.problem_with_taking_a_picture);
                return;
            }

            File dir = getDir(Environment.DIRECTORY_PICTURES, Context.MODE_PRIVATE);
            File internalFile = null;

            internalFile = new File(dir, generateUniqueFilename());
            internalFile.setReadable(true);
            internalFile.setWritable(true);
            internalFile.setExecutable(true);
            try {
                internalFile.createNewFile();

                FileOutputStream fos = new FileOutputStream(internalFile);
                BufferedOutputStream bos = new BufferedOutputStream(fos);

                picture.compress(Bitmap.CompressFormat.JPEG, JPEG_FILE_QUALITY, bos);

                bos.flush();
                bos.close();

                String filePath = internalFile.getAbsolutePath();
                pictureFilePaths.add(filePath);
                addPictureThumbnail(filePath);

                Log.d("mounted?", "" + Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED));
                Log.d("delete test 23123123", "" + file.getAbsolutePath() + " " + file.delete());
            } catch (Exception e) {
                Log.e("eks", e.getMessage());
                showShortToast(R.string.problem_with_taking_a_picture);
            }
        }
        else if (resultCode == RESULT_CANCELED) {
            showShortToast(R.string.taking_picture_has_been_cancelled);
        }
        break;
    }
    default:
        break;
    }
} 
```

基本上我要做的是将图片写入外部存储并将其移动到内部存储。它适用于 80% 的情况，但不是 100%，因为它有时只是“重置”活动 - 新的空布局显示出来，就好像它刚刚创建一样。我不知道发生了什么。我意识到在这种情况下 onSaveInstanceState 和 onRestoreInstanceState 都会触发，我不知道为什么（一路上没有抛出异常）。

调用所有代码的活动正在扩展 FragmentActivity。我已经阅读了一些错误可能会导致旧版本的 Android 支持包中出现这种情况，但我刚刚将其更新到版本 13，问题仍然存在。

另一件事是保存在外部存储上的文件不会删除 - file.delete() 总是返回**false**。是我没有sdcard的问题吗？（我的意思是我的手机中有一个插槽，但我只有 16GB 的内部存储空间）。该文件被保存到 /mnt/sdcard/Pictures/ 文件夹，就好像它以某种方式被模拟一样。

提前提出问题：我同时设置了**android.permission.READ_EXTERNAL_STORAGE**和**android.permission.WRITE_EXTERNAL_STORAGE**权限：

我尝试用 getCacheDir ， getExternalCacheDir 替换Environment.getExternalStoragePublicDirectory **，**但**它们****都**没有工作。

 ******我正在使用 Android 4.0.4（库存）在我的三星 Galaxy SII 上测试所有这些东西******

# c - 为什么释放分配的数据后内存使用量没有减少？

> ID：13493639
> 
> 赞同：1
> 
> 时间：2012-11-21T12:49:12.707
> 
> 标签：c, memory, free

我创建了一个包含 1,000,000 个项目的链表，占用了 16M 内存。然后我删除并释放了其中的一半。我以为内存使用量会减少，但事实并非如此。

那是为什么？

我正在通过 Mac OS X 10.8.2 上的活动监视器检查内存使用情况。

如果你想检查我的代码，[这里是](https://gist.github.com/4124702).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:53:57.500

一般来说，`free`不会将内存释放回操作系统。它仍然分配给进程，因此操作系统将其报告为已分配。从您的程序的 POV 来看，它可以满足您所做的新分配。

请注意，由于您释放了所有其他节点，因此几乎可以肯定您的内存现在非常碎片化。这个空闲内存是小块，它们之间有分配的内存，所以只能用于满足小分配。如果您进行更大的分配，该进程将转到操作系统以获得更多内存。

由于该进程一次从操作系统获取一页内存，因此即使它想要它*也无法*将这些碎片化的内存释放回操作系统。您正在使用每个页面的一部分。

# android - 阻止 Eclipse 构建 .xml 文件

> ID：13493640
> 
> 赞同：2
> 
> 时间：2012-11-21T12:49:13.173
> 
> 标签：android, eclipse, eclipse-plugin, build-process, adt

我最近全新安装了我的 (archlinux) 系统。出于这个原因，我安装了最新的 Eclipse（JUNO 4.2.1，我很遗憾）以及最新的 ADT 插件（SDK rev 21）。

现在我正在观察一个我以前遇到过但后来被修复的错误：当我在 Java Perspective 中，编辑一个 xml 文件并单击绿色的“播放”按钮以在我的手机 Eclipse 上推送新代码开始构建那个特定的 XML 文件，而不是构建这个 xml 文件所属的项目。我得到一个无法打开的“XMLfilename.xml.out”文件。如果我想构建项目，我必须删除“XMLFilename.xml.out”文件，切换到一个 java 文件并重新单击该文件播放”按钮以使其正常工作。

这可以被认为是我这边的错误或一些错误配置吗？如果是Bug，谁来负责？Eclipse JUNO、ADT 还是其他编？有能力解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:53:44.513

当您在 eclipse 中安装一些 xml-plugins 时会发生这种情况。xml 插件不需要开发 android 应用程序，因为 ADT 带有自己的一组工具来处理 xml 文件（即布局编辑器等）。如果其他项目不需要这些 xml 插件，则可以删除它们。Eclipse 将 xml 文件识别为您的 android 项目的一部分并直接启动 android 项目（而不是检查 xml 文件的 xml-parser）。

**删除 xml.out 文件，然后关闭您的 xml 文件，或者只是切换到 java 文件**，然后运行您要**运行的项目配置。**

或者

试试这样做（这是更好的选择，对我有用）-

**Windows > 首选项 > 启动 > 启动操作 > 选择始终启动以前启动的应用程序**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:16:08.267

我在 Androids 问题列表中发现了这个[问题。](http://code.google.com/p/android/issues/detail?id=3767)我认为最好的选择是设置

Window->Preferences->Run/Debug->LaunchConfiguration->CHECK '过滤检查的启动配置'->CHECK 'XSL'

这样我就不必卸载那个 XML 插件，同时能够在我的工作空间内构建另一个项目而无需明确选择它。不幸的是，这在我的机器上不起作用，而其他人报告它工作。所以我不得不删除 $ECLIPSE_HOME/plugins/org.eclipse.wst.xsl.* 中的所有文件（实际上我只是将文件移动到备份目录中）。重新启动 Eclipse 后，它不再尝试再次运行 XML 文件。

# iphone - 核心数据迁移：未调用 NSEntityMigrationPolicy 中的方法。

> ID：13493643
> 
> 赞同：7
> 
> 时间：2012-11-21T12:49:21.500
> 
> 标签：iphone, objective-c, ios, ios6, core-data-migration

我有两个模型版本 - 12 和 13。然后我创建了一个带有源 12 和目标 13 的 xcmapingmodel-File。

我将 NSEntityMigrationPolicy 子类化，并将我的类添加到 mappingmodel-File 到所需的实体。

```
@interface EndDateMigrationPolicy : NSEntityMigrationPolicy 
```

![在此处输入图像描述](../Images/599f8c2ed505a05f97bdcfacc4b2b0e3.png)

在我的设备上安装旧版本 (11) 后，我使用模型版本 13 安装当前状态 - 应用程序运行，但未调用我的迁移方法。我错过了什么吗？

编辑：使用这些选项是否正确？

```
 NSDictionary *options = @{NSMigratePersistentStoresAutomaticallyOption: @YES,
                         NSInferMappingModelAutomaticallyOption: @YES}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:51:14.473

我将尽我所能回答您，我已经经历了很多次核心数据迁移，所以我知道它是多么痛苦。对于一个人来说，您不能希望您的迁移必须使用这些选项，因为您尝试做的实际上不是轻量级迁移，但您却告诉它进行轻量级迁移。

基本上假设您出于某种原因需要在 2 个版本之间进行非轻量级迁移，在您的情况下为 11 和 12。您需要做的是：

1->12 轻量级 12->13 自定义迁移 13->（未来版本）轻量级迁移

可能有更好的解决方案，但我还没有找到。

这是一些可以帮助您的代码（最难的部分，我不记得所有内容），在此代码之前，我将数据库复制到备份中，因此基本上备份数据库是您的旧数据库，而存储是您的新数据库（这是空的）

```
NSString *path = [[NSBundle mainBundle] pathForResource:<YOUR MODEL NAME> ofType:@"cdm"];

NSURL *backUpURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"<YOUR MODEL NAME>MigrationBackUp.sqlite"]; //or whatever you want to call your backup
NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"<YOUR MODEL NAME>.sqlite"];
NSError *err2 = nil;
NSDictionary *sourceMetadata2 =
[NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType
                                                           URL:backUpURL
                                                         error:&err2];
NSManagedObjectModel *sourceModel2 = [NSManagedObjectModel mergedModelFromBundles:[NSArray arrayWithObject:[NSBundle mainBundle]]

                                                                 forStoreMetadata:sourceMetadata2];
NSManagedObjectModel *destinationModel2 = [self managedObjectModelForVersion:@"1.4"]; //Yeah your gonna have to get your mapping model , I'll give you this code too later
NSString *oldModel = [[sourceModel2 versionIdentifiers] anyObject];
NSLog(@"Source Model : %@",oldModel);
NSMappingModel *mappingModel = [[NSMappingModel alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path]];

if (mappingModel != nil) {
    for (NSString * identifier in [mappingModel entityMappings]) {
        NSLog(@"Mapping > %@",identifier);
    }
} 
```

然后只需使用您的来源和目的地制作一个迁移器。

这也是后面比较难的部分：

```
 BOOL success = [migrator migrateStoreFromURL:backUpURL
                                        type:NSSQLiteStoreType
                                     options:nil
                            withMappingModel:mappingModel
                            toDestinationURL:storeURL
                             destinationType:NSSQLiteStoreType
                          destinationOptions:nil
                                       error:&err2]; 
```

最后但并非最不重要的（我之前说过我会给你）：

```
- (NSManagedObjectModel *)managedObjectModelForVersion:(NSString*)version {

NSString *modelPath = [[NSBundle mainBundle] pathForResource:@"Model" ofType:@"momd"];
if (BETWEEN_INEX(version, @"1.0", @"1.4")) {
    modelPath = [modelPath stringByAppendingPathComponent:@"Model"];
    modelPath = [modelPath stringByAppendingPathExtension:@"mom"];
} else if (BETWEEN_INEX(version, @"1.4", @"1.5")) {
    modelPath = [modelPath stringByAppendingPathComponent:@"Model 2"];
    modelPath = [modelPath stringByAppendingPathExtension:@"mom"];
} else if (BETWEEN_INEX(version, @"1.5", @"1.6")) {
    modelPath = [modelPath stringByAppendingPathComponent:@"Model 3"];
    modelPath = [modelPath stringByAppendingPathExtension:@"mom"];
} else if (BETWEEN_INEX(version, @"1.6", @"1.7")) {
    modelPath = [modelPath stringByAppendingPathComponent:@"Model 4"];
    modelPath = [modelPath stringByAppendingPathExtension:@"mom"];
}
NSURL *modelURL = [NSURL fileURLWithPath:modelPath];
NSManagedObjectModel * oldManagedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
NSSet *vIdentifiers = [oldManagedObjectModel versionIdentifiers];
for (NSString * identifier in vIdentifiers) {
    NSLog(@"Old Model : %@",identifier);
}
return [oldManagedObjectModel autorelease]; 
```

}

我知道这些只是代码片段，但我真的希望它可以帮助您解决问题，如果您需要其他任何内容，请询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:58:52.793

您的 NSEntityMigrationPolicy 没有被调用，因为您将 NSInferMappingModelAutomaticallyOption 设置为 @(YES) - 它应该是 @(NO)

# ssl - JMeter SSL 管理器不起作用

> ID：13493647
> 
> 赞同：0
> 
> 时间：2012-11-21T12:49:35.803
> 
> 标签：ssl, jmeter, jsse

我试图在 JMeter 中使用客户端 ssl 证书在网站上进行身份验证。问题是当我尝试在 SSL 管理器中导入它时，我没有收到任何关于密码的消息，任何东西。在配置中我写过：

```
user.classpath=/home/m/Downloads/jre-1.7.0_09/usr/java/jre1.7.0_09/lib/
ssl.provider=com.sun.net.ssl.internal.ssl.Provider 
```

我已经添加了`user.classpath`，因为 jsse.jar 站在那里，但我认为它没有必要。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:48:06.660

要测试客户端证书，请使用以下命令：

*   [密钥库配置](http://jmeter.apache.org/usermanual/component_reference.html#Keystore_Configuration)

步骤是：

1.  使用 Java keytool 实用程序或通过 PKI 创建证书
2.  如果由 PKI 创建，请将您的密钥转换为 JKS 可接受的格式，从而将您的密钥导入 Java Key Store
3.  然后通过 2 个 JVM 属性引用密钥库文件： -Djavax.net.ssl.keyStore=path_to_keystore -Djavax.net.ssl.keyStorePassword=password_of_keystore
4.  您对 HTTP 请求使用 HTTPClient 3.1 或 4 实现

要使 JMeter 使用多个证书，您需要确保：

```
https.use.cached.ssl.context=false 
```

在 jmeter.properties 或 user.properties 中设置

# html - 如何从没有字段的 GET 表单中删除尾随问号？

> ID：13493652
> 
> 赞同：22
> 
> 时间：2012-11-21T12:49:48.150
> 
> 标签：html, forms, get

例子：

```
<form>
    <input type='submit'>
</form> 
```

提交结果时：

```
http://example.com/? 
```

如何制作：

```
http://example.com/ 
```

?

[这是一个非常简单的问题示例，实际表单有很多字段，但有时会禁用一些字段。当所有都被禁用时，尾随 ? 出现]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-25T14:26:04.460

在我的情况下，我使用的是***window.location***，不确定它是不是最好的选择，但它是我唯一可以让它工作的：

```
$('#myform').submit(function()
{
    ... if all parameters are empty

    window.location = this.action;
    return false;
}); 
```

我真正的用途是将 GET 参数转换为真正的 url 路径，所以这里是完整的代码：

```
$('#myform').submit(function()
{
    var form = $(this),
        paths = [];

    // get paths
    form.find('select').each(function()
    {
        var self = $(this),
            value = self.val();

        if (value)
            paths[paths.length] = value;

        // always disable to prevent edge cases
        self.prop('disabled', true);
    });     

    if (paths.length)
        this.action += paths.join('/')+'/';

    window.location = this.action;
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:00:40.910

如果不使用 Javascript，我不确定是否存在。缓解该问题的一种方法可能是创建一个隐藏的输入，该输入仅包含一些您可以在另一侧忽略的垃圾值，如下所示：

```
<input type="hidden" name="foo" value="bar" /> 
```

这样你永远不会有一个空的 GET 请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-09T05:15:39.220

这是一个旧帖子，但是嘿.. 来吧

如果您使用的是 PHP 之类的东西，您可以将表单提交到“代理”页面，该页面将标题重定向到特定位置 + 查询。

例如：

HTML：

```
<form action="proxy.php" method="get"> 
   <input type="text" name="txtquery" />
   <input type="button" id="btnSubmit" />
</form> 
```

PHP (代理.php)

```
<?php

   if(isset($_GET['txtquery']))
      $query = $_GET['txtquery'];

       header("Location /yourpage/{$query}");

?> 
```

我假设这是你想要做的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-12T12:09:30.827

我知道这是一个非常古老的问题，但我今天遇到了同样的问题。我会从不同的角度来处理这个问题，我的想法是，在这个时代，您可能应该在表单中使用 POST 而不是 GET，因为在查询字符串中传递值对于安全性和 GDPR 来说并不是很好。我们已经解决了很多问题，其中各种跟踪脚本一直在获取查询字符串（参数中包含 PII），破坏了它们拥有的任何服务条款。

通过发布，您将始终获得“干净的 url”，并且您无需对表单提交脚本进行任何修改。但是，如果期望 GET，您可能需要更改接收表单输入的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T21:52:44.940

我正在寻找类似的答案。我最终做的是创建一个按钮，单击时重定向到某个页面。

例子：

```
<button type="button" value="Play as guest!" title="Play as guest!" onclick="location.href='/play'">Play as guest!</button> 
```

这不是您问题的“答案”，但可能是一个很好的解决方法。我希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-28T16:27:58.423

另一种选择是在提交之前使用 javascript 检查 FormData。

```
var myNeatForm = document.getElementById("id_of_form");
var formData = new FormData(myNeatForm); // Very nice browser support: https://developer.mozilla.org/en-US/docs/Web/API/FormData
console.log(Array.from(formData.entries())); // Should show you an array of the data the form would be submitting.

// Put the following inside an event listener for your form's submit button.
if (Array.from(formData.entries()).length > 0) {
    dealTypesForm.submit(); // We've got parameters - submit them!
} else {
    window.location = myNeatForm.action; // No parameters here - just go to the page normally.
} 
```

# python - Google 用户 API 返回电子邮件地址，而不是用户刚刚用于登录的电子邮件地址

> ID：13493656
> 
> 赞同：1
> 
> 时间：2012-11-21T12:49:54.930
> 
> 标签：python, google-app-engine

只是想知道在任何情况下，Google 用户 API 会返回一个电子邮件地址，而不是用户刚刚用于登录的电子邮件地址。

我正在调试一个继承的 Google App Engine 网站并将其隔离为：

```
self.google_user = users.get_current_user()
email = self.google_user.email() 
```

此代码不会返回用户刚刚用于通过 Google 登录的电子邮件地址。它返回一个不同的电子邮件地址..在这种情况下是一个 Gmail 地址。

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:54:06.073

电子邮件地址可能会发生变化，可能出于某种原因它会返回其原始地址。

您可能希望使用永远不会更改的唯一 ID：

> 您可能想要存储用户 ID（可能还有最后一次看到的邮件地址以通过邮件与用户通信）。用户ID稳定；您可以在键名或字符串属性中使用它。
> 
> 您可能不想存储 UserProperty。在数据存储中，该值等于电子邮件地址加上用户的唯一 ID。如果用户更改了他们的电子邮件地址，并且您将他们存储的旧用户与新用户进行比较，他们将不匹配。
> 
> db 和 NDB 库都具有 UserProperty 属性类型，以便应用程序可以存储用户值。但是，由于这些值在用户更改电子邮件地址时变得无效，因此大多数应用程序都无法很好地使用此功能。

[用户对象](https://developers.google.com/appengine/docs/python/users/userobjects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T09:19:37.797

答案如下 - Google 用户 API 仅返回 Google 帐户的 PRIMARY 电子邮件地址。因此，用户可以通过与其辅助电子邮件地址关联的 Google 帐户登录我们的应用程序，但我们只会从 API 获取主电子邮件地址。因此，我们似乎得到了一个与用户刚刚用于登录的电子邮件地址不同的电子邮件地址。

实际上，我们得到了他们刚刚使用辅助电子邮件地址登录的 Google 帐户的主要地址（心不在焉）。

# javascript - 动态创建具有动态内容的 div

> ID：13493660
> 
> 赞同：0
> 
> 时间：2012-11-21T12:49:58.307
> 
> 标签：javascript, jquery

我想用唯一的 id 动态创建 div .. 基于 id 我们需要从数据库中获取值 .. 但是这里可以获取 id 但 divTag.innerHTML= 没有获取 id 来执行我的 sql 查询请帮助我感谢 advce

```
.dynamicDiv {
width:200px;
height:100px;
border:solid 1px #c0c0c0;
background-color:#e1e1e1;
font-size:11px;
font-family:verdana;
color:#000;
padding:5px;
}

.dynamicDiv{ float:left;}

</style>

<script type="text/javascript" language="javascript">
function createDiv($id)
{

        var id =$id;
        var divTag = document.createElement("div");
        var id =$id;
        divTag.id = "div1";
        divTag.setAttribute("align","center");
        divTag.style.margin = "100px auto";
        divTag.className ="dynamicDiv";
        divTag.innerHTML = "<?php $sql =mysql_query("SELECT * FROM TABLE WHERE ID='$id'");
        $res = mysql_fetch_array($sql);
        print_r($res);  
        ?>";
        document.body.appendChild(divTag);
        }

</script>
</head>
<body style="float:left;">
<div  style="float:left;">
     <b>Click this button to create div element dynamically</b>
    <input id="btn1" type="button" value=
"create div" onClick="createDiv('<?php echo rand(); ?>');" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:52:53.930

您不能通过向服务器发送调用来从服务器带来数据，您可以使用[**jquery ajax**](http://api.jquery.com/jQuery.ajax/)来带来数据并传递 id 来过滤数据。

# android - Android TabActivity 如何仅在 TabChange 上启动 Intent

> ID：13493668
> 
> 赞同：0
> 
> 时间：2012-11-21T12:50:21.550
> 
> 标签：android, android-intent, tabactivity, tabview

我的代码有问题：

我想用 Google AppEngine 制作一个高分列表，它可以工作。Google AppEngine 返回一个经过解析并填充到布局中的字符串。活动 HighscoreListe 连接到 AppEngine 并将获取此字符串。

我在下面写的 Highscore 布局的问题是，这个活动（HighscoreListe）在我启动 TabLayout 时启动了多次。所以我得到了一个 StringIndexOutOfBoundsException。

当我更改为 Tab 2 时，我想启动 Intent2，当我更改为 Tab3 时，我想启动 Intent3。这样当我点击这个难度时，只会在第 2 或第 3 难度中加载高分。

```
public class HighscoreTabLayout extends TabActivity{

@Override
   public void onCreate(Bundle savedInstanceState) {

       super.onCreate(savedInstanceState);

       TabHost tabHost = getTabHost();

       System.out.println(MenuMainActivity.getDifficulties());
       int diffCount = -1;
       System.out.println(diffCount);

       TabSpec tabSpec1 = tabHost.newTabSpec(MenuMainActivity.getDifficulties()[++diffCount].getName());
       // setting Title and Icon for the Tab
       tabSpec1.setIndicator(MenuMainActivity.getDifficulties()[diffCount].getName());//, getResources().getDrawable(R.drawable.icon_photos_tab));
       Intent intent1 = new Intent(this, HighscoreListe.class);
       intent1.putExtra("name", MenuMainActivity.getDifficulties()[diffCount].getName());
       tabSpec1.setContent(intent1);
       System.out.println(diffCount);

       TabSpec tabSpec2 = tabHost.newTabSpec(MenuMainActivity.getDifficulties()[++diffCount].getName());
       tabSpec2.setIndicator(MenuMainActivity.getDifficulties()[diffCount].getName());//, getResources().getDrawable(R.drawable.icon_songs_tab));
       Intent intent2 = new Intent(this, HighscoreListe.class);
       intent2.putExtra("name", MenuMainActivity.getDifficulties()[diffCount].getName());
       tabSpec2.setContent(intent2);
       System.out.println(diffCount);

       TabSpec tabSpec3 = tabHost.newTabSpec(MenuMainActivity.getDifficulties()[++diffCount].getName());
       tabSpec3.setIndicator(MenuMainActivity.getDifficulties()[diffCount].getName());//, getResources().getDrawable(R.drawable.icon_videos_tab));
       Intent intent3 = new Intent(this, HighscoreListe.class);
       intent3.putExtra("name", MenuMainActivity.getDifficulties()[diffCount].getName());
       tabSpec3.setContent(intent3);
       System.out.println(diffCount);

       TabSpec tabSpec4 = tabHost.newTabSpec(MenuMainActivity.getDifficulties()[++diffCount].getName());
       tabSpec4.setIndicator(MenuMainActivity.getDifficulties()[diffCount].getName());//, getResources().getDrawable(R.drawable.icon_videos_tab));
       Intent intent4 = new Intent(this, HighscoreListe.class);
       intent4.putExtra("name", MenuMainActivity.getDifficulties()[diffCount].getName());
       tabSpec4.setContent(intent4);
       System.out.println(diffCount);

       // Adding all TabSpec to TabHost
       tabHost.addTab(tabSpec1);
       tabHost.addTab(tabSpec2);
       tabHost.addTab(tabSpec3);
       tabHost.addTab(tabSpec4);

       tabHost.setCurrentTab(1);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:59:10.913

如果我明白你的意思，你应该在 tabhost 上设置 tab chage listner：

` mTab​​Host.setOnTabChangedListener(new OnTabChangeListener() {

```
 @Override
        public void onTabChanged(String tabId) {
            // TODO Auto-generated method stub

        }
    })` 
```

# java - 使用多个持久性单元动态处理 EntityManager

> ID：13493669
> 
> 赞同：4
> 
> 时间：2012-11-21T12:50:26.567
> 
> 标签：java, jpa, entitymanager

我有一个包含多个模式的数据库，所以我有一个包含多个模式的 persistence.xml 文件`<persistence-unit />`（名为 01、02、...）。

**有问题的：** 我想创建一些用户标准的 EntityManager 动态函数。

我已经测试了2个案例。

*第一种情况：*基本上，我测试了这段代码（在无状态 EJB 中）：

```
String criteria = "01";     
EntityManagerFactory emf = Persistence.createEntityManagerFactory(criteria);
EntityManager em = emf.createEntityManager();

Joueur joueur = new Joueur(); // Joueur is an Entity
joueur.setPseudo("olivier");

em.persist(joueur); 
```

但我收到异常：

> 原因：异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException 内部异常: org.postgresql.util.PSQLException: ERREUR: la transaction est annulée, les commandes sont ignorées jusqu'à la fin du bloc de la transaction

我认为（在一些 Stackoverflow 帖子的帮助下），我的 EntityManager 没有“链接”到我的事务上下文，因为它不是由容器注入的。

*第二种情况：*因此，我使用了注射：

```
@PersistenceContext(unitName="00")
private EntityManager em00;

@PersistenceContext(unitName="01")
private EntityManager em01; 
```

我的函数中的代码：

```
String criteria = "01";
EntityManager em = getEm(criteria);
... 
```

和 getEm() 方法：

```
private EntityManager getEm(String criteria){

    if (criteria == "00")
        return em00;
    else if (criteria == "01")
        return em01;

    return null;
} 
```

没问题，它可以工作，但我必须注入尽可能多的 EntityManagers，我有持久性单元。

*   如果我有 50 个模式，成本会是多少……？
*   有没有办法真正动态地管理实体管理器？（仅限 1 个实体管理器）
*   如果我必须为每个模式创建 1 个 EntityManager，即使我不使用它，我该如何改进我的代码以尽可能少地消耗资源？

感谢您的建议和反馈

**编辑 ：**

我的配置文件：

持久性.xml：

```
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="00" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/sim/00</jta-data-source>
        <mapping-file>orm_00_beta.xml</mapping-file>
        <class>com.sim.entities.Joueur</class>      
        <properties>
            <property name="eclipselink.ddl-generation" value="create-tables" />
        </properties>       
    </persistence-unit>

    <persistence-unit name="01" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/sim/01</jta-data-source>
        <mapping-file>orm_01_beta2.xml</mapping-file>
        <class>com.sim.entities.Joueur</class>
        <properties>
            <property name="eclipselink.ddl-generation" value="create-tables" />
        </properties>
    </persistence-unit>

</persistence> 
```

orm_00_beta.xml ：

```
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
version="2.0">

<persistence-unit-metadata>
    <persistence-unit-defaults>        
        <schema>beta</schema>
    </persistence-unit-defaults>
</persistence-unit-metadata> 
```

orm_01_beta2.xml ：

```
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
version="2.0">

<persistence-unit-metadata>
    <persistence-unit-defaults>        
        <schema>beta2</schema>
    </persistence-unit-defaults>
</persistence-unit-metadata> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:43:09.887

在使用应用程序管理的持久性单元时，您需要将“eclipselink.target-server”设置为您正在使用的应用程序服务器（有些服务器会自动设置它，然后使用容器管理的持久性单元）。然后 EntityManager 将与创建时处于活动状态的 JTA 事务绑定。如果您在 JTA 事务开始之前创建 EntityManager，那么您可以使用 joinTransaction()。

如果您仍有问题，请包括您正在使用的服务器以及完整的异常堆栈跟踪。

如果您有很多模式，您可以考虑使用 EclipseLink 多租户支持，它允许每个租户拥有自己的模式。

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_multitenant.htm#BABEGBIJ](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_multitenant.htm#BABEGBIJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:42:08.870

通常你没有 50 个模式。我不会担心注入的成本，因为通常 EJB 容器有一个已经打开的连接池，可以随时注入。所以开销真的很小。

AFAIK，JPA 不允许动态实体管理器。

如果您关心资源，我建议您避免使用 EclipseLink（我对 EclipseLink + EJB 的体验非常糟糕）

为了稍微优化一下，我会在这里尝试使用工厂模式。创建一个将为您提供 EntityManagers 的 Bean。您将使用以下方法进行一次注入，而不是注入多个 PersistenceContext：

```
EntityManager getEntityManager(String schemaId) {...} 
```

另一种选择是将所有注入移至 AbstractBean。所有其他 bean 都继承自 AbstractBean。

# android - ListView getChildAt(i) 给出 null

> ID：13493670
> 
> 赞同：0
> 
> 时间：2012-11-21T12:50:26.807
> 
> 标签：android, listview

我有一个带有自定义布局的列表视图。ListView 项目来自一个单独的 xml 文档。列表视图正确呈现，现在我想访问该列表视图中的文本视图和编辑视图，并且我想动态更改它的值。我尝试使用`list.getChildAt(i)`它，但它给了我一个空视图。那么如何访问文本视图？

```
ListView list=(ListView)findViewById(R.id.list); 
adapter=new LazyAdapter(this,5,R.layout.layout_id); 
list.setAdapter(adapter); 
for (int j = 0; j < list.getCount(); j++) { 
    View v = list.getChildAt(j);
    EditText text = (EditText) v.findViewById(R.id.textview1);
    text.setText("Hello");
} 
```

* * *

好的，我尝试了很多，发现 list.getChildAt(i) 给了我 onClickListener() 的价值。我想在 onCreate() 方法中的列表呈现后获取该值。那么我怎样才能立即获得列表渲染的列表值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:55:24.197

正如您所说您使用了自定义布局，您是否编写了自己的适配器？如果是这样，您必须正确地覆盖`getChildAt`- 方法。因此，您必须自己管理模型。

# sql - 避免在 SQL 中两次创建相同的查询

> ID：13493684
> 
> 赞同：0
> 
> 时间：2012-11-21T12:51:03.273
> 
> 标签：sql, sql-server

我有一个非常简单且不言自明的 SQL 语句：

```
ALTER PROCEDURE [dbo].[sp_getAllDebatesForAlias](@SubjectAlias nchar(30))
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    SELECT *
    FROM tblDebates
    WHERE (SubjectID1 in (SELECT SubjectID FROM tblSubjectAlias WHERE SubjectAlias = @SubjectAlias)) 
        OR (SubjectID2 in (SELECT SubjectID FROM tblSubjectAlias WHERE SubjectAlias = @SubjectAlias)) ;
END 
```

我确信有一种方法可以使该语句更有效，至少可以摆脱在该`in`部分中多次创建同一个表，即

```
SELECT SubjectID FROM tblSubjectAlias WHERE SubjectAlias = @SubjectAlias 
```

部分。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:53:33.703

```
SELECT d.*
FROM tblDebates d
inner join tblSubjectAlias s on s.SubjectID in (d.SubjectID1, d.SubjectID2)
where s.SubjectAlias = @SubjectAlias 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:00:12.963

尝试：

```
select d.* from tblDebates d
where exists
(select 1
 from tblSubjectAlias s
 where s.SubjectID in (d.SubjectID1, d.SubjectID2) and
       s.SubjectAlias = @SubjectAlias) 
```

# json - 从 JSON 文件中检索数组

> ID：13493697
> 
> 赞同：3
> 
> 时间：2012-11-21T12:51:30.463
> 
> 标签：json, jackson

我在 JSON 文件中有一个数组，看起来像这样

```
{ "fields": [
        {
            "name": "order_id",
            "type": "INTEGER",
            "position": 0
        },
        {
            "name": "district_id",
            "type": "INTEGER",
            "position": 1
        }]
} 
```

我正在使用树模型检索数组“字段”的内容，我的代码看起来像这样..

```
public static void main(String[] args) throws JsonParseException, IOException {
File jsonFile = new File("metadata.json");
String theJsonString = jsonFile.toString();
String name = null;
String type =null;
int position = 0;
ObjectMapper mapper = new ObjectMapper(); // can reuse, share globally
JsonNode rootNode = mapper.readTree(theJsonString);
JsonNode fields = rootNode.get("fields");
    if (fields != null) {

    for (int i = 0; i < fields.size(); i ++) {
        if(fields.has("name"))
            name = fields.get("name").getTextValue();
        if(fields.has("type"))
             type = fields.get("type").getTextValue();
        if(fields.has("position"))  
             position = fields.get("position").getIntValue();

        System.out.println(name);
    }
    }
  } 
```

我在运行时收到以下错误::

```
Exception in thread "main" org.codehaus.jackson.JsonParseException: Unexpected character ('/' (code 47)): maybe a (non-standard) comment? (not recognized as one since Feature 'ALLOW_COMMENTS' not enabled for parser)
 at [Source: java.io.StringReader@3eed2cab; line: 1, column: 2]
    at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1432)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:385)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportUnexpectedChar(JsonParserMinimalBase.java:306)
    at org.codehaus.jackson.impl.ReaderBasedParser._skipComment(ReaderBasedParser.java:1498)
    at org.codehaus.jackson.impl.ReaderBasedParser._skipWSOrEnd(ReaderBasedParser.java:1474)
    at org.codehaus.jackson.impl.ReaderBasedParser.nextToken(ReaderBasedParser.java:362)
    at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2761)
    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2709)
    at org.codehaus.jackson.map.ObjectMapper.readTree(ObjectMapper.java:1533)
    at metadata.JSONParser.main(JSONParser.java:32) 
```

我刚刚开始使用 JSON，因此无法找到解决方案。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:07:37.390

如果你想要文件的内容，`metadata.json`那么调用`toString`文件不会给你。相反，它会给你一个包含文件名路径的字符串。

`FileInputStream`而是从类似的创建一个`File`：

```
FileInputStream fis = new FileInputStream(jsonFile); 
```

您可以将它与`mapper`

```
JsonNode rootNode = mapper.readTree(fis); 
```

您可能还想`fields.get(i)`在遍历数组时调用以访问数组中`JsonNode`包含的每个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T09:15:10.823

我有同样的问题，我最终通过这段代码解决了这个问题以获取 JsonParser 对象。

```
FileInputStream fis = new FileInputStream(path);
JsonParser jp = new JsonFactory().createParser(fis); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-17T21:29:51.863

几天前我遇到了同样的问题。**我的 JSON**有以下语法：

```
{ "boxes": [
  {
    "name": "redBox.png",
    "version": 15
  },
  {
    "name": "blueBox.png",
    "version": 9
  }
]
} 
```

我必须创建返回带有盒子版本的**POJO 类的方法。**我的解决方案如下：

```
private static List<DataVersion> receiveDataVersions() throws IOException
    {
        String path = System.getProperty( "user.dir" ) + File.separator +
                        "versions.json";
        List<DataVersion> versions = new ArrayList<>();
        JsonNode folder = null;
        try( InputStream stream = new FileInputStream( path ) )
        {
            folder = new ObjectMapper().readTree( stream );
        }
        JsonNode boxes = folder.get( "inst" );
        boxes.forEach( version -> versions.add( new DataVersion(
                        version.get( "name" ).getTextValue(),
                        version.get( "version" ).getIntValue() ) ) );
        return versions;
    } 
```

POJO如下：

```
public class DataVersion
{
    private String name;
    private int version;

    public DataVersion() {
    }

    public DataVersion(String name, int version) {
        this.name = name;
        this.version = version;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getVersion() {
        return version;
    }

    public void setVersion(int version){
        this.version=version;
    }

    @Override
    public String toString()
    {
        return "DataVersion [" + "name='" + name + '\'' + ", version=" +
                        version + ']';
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T14:48:03.510

在你的代码中试试这个

```
jsonFactory.enable(JsonParser.Feature.ALLOW_COMMENTS); 
```

# ios - iOS：拉伸视图的大小

> ID：13493698
> 
> 赞同：1
> 
> 时间：2012-11-21T12:51:31.903
> 
> 标签：ios, layout, view, storyboard, stretch

如果视图被拉伸（例如，您只在 iPhone 5 上拉伸视图，因为您有更多空间），self.view.size.width 返回在故事板中定义的尺寸，而不是 iPhone 5 设备中的尺寸。

是什么原因以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:10:14.023

会不会是你要求的尺寸要早？我在 viewDidLoad 中也有同样的经历，但在 viewWillAppear 和之后，虽然宽度会正确返回，但一切都已经正确布局。

# ruby-on-rails - 实现自引用关联时，在用户中获取 NoMethodError #show undefined method `name' for nil:NilClass

> ID：13493700
> 
> 赞同：0
> 
> 时间：2012-11-21T12:51:43.370
> 
> 标签：ruby-on-rails, devise

我已经关注了 RyanB 的 railcast 163 on self-referential association to the letter，但我不断收到以下错误：

```
 NoMethodError in Users#show

    Showing /Users/markwalker/welcomepie/app/views/shared/_suggested_connections.html.erb where line #6 raised:

    undefined method `name' for nil:NilClass
    Extracted source (around line #6):

    3:          <ul>
    4:        <% for friendship in @user.friendships %>
    5:        <li>
    6:          <%= h friendship.friend.name %>
    7:          (<%= link_to "remove", friendship, :method => :delete %>)
    8:        </li>
    9:        <% end %> 
```

这是我的观点（它是在用户/显示页面中呈现的部分）：

```
<div class="span5">
    <div class="MemberDisplay">
        <ul>
      <% for friendship in @user.friendships %>
      <li>
        <%= h friendship.friend.name %>
        (<%= link_to "remove", friendship, :method => :delete %>)
      </li>
      <% end %> 
    </ul>
    </div>
</div> 
```

我的友谊模型：

```
class Friendship < ActiveRecord::Base
  belongs_to :user
  belongs_to :friend, :class_name => 'User'
  attr_accessible :friend_id, :user_id

end 
```

我的友谊控制器：

```
 class FriendshipsController < ApplicationController
  def create
    @friendship = current_user.friendships.build(:friend_id => params[:friend_id])
    if @friendship.save
      flash[:notice] = "Added friend."
      redirect_to root_url
    else
      flash[:error] = "Unable to add friend."
      redirect_to root_url
    end
  end

  def destroy
    @friendship = current_user.friendships.find(params[:id])
    @friendship.destroy
    flash[:notice] = "Removed friendship."
    redirect_to current_user
  end
end 
```

我的用户模型：

```
class User < ActiveRecord::Base

has_many :friendships
has_many :friends, :through => :friendships

rolify
# Include default devise modules. Others available are:
# :token_authenticatable, :confirmable,
# :lockable, :timeoutable and :omniauthable
devise :database_authenticatable, :registerable,
       :recoverable, :rememberable, :trackable, :validatable

# Setup accessible (or protected) attributes for your model
attr_accessible :role_ids, :as => :admin
attr_accessible :name, :email, :password, :password_confirmation, :remember_me
attr_accessible :occupation_list, :gender_list, :moving_from_list, :moving_to_list, :family_type_list, :age_bracket_list, :interest_list, :about_me, :username, :avatar
has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" }
acts_as_taggable
acts_as_taggable_on :occupation, :gender, :moving_from, :moving_to, :family_type, :age_bracket, :interests
scope :by_join_date, order("created_at DESC") 
```

私人的

```
def self.tag_tokens(query)
  tags = User.categories.where("name like ?", "%#{query}%")
  if tags.empty?
    [{id: "#{query}", name: "#{query}"}]
  else
    tags
  end
 end

end 
```

我的用户控制器：

```
class UsersController < ApplicationController
before_filter :authenticate_user!

def index

  authorize! :index, @user, :message => 'Not authorized as an administrator.'
  @users = User.all

end

def show
  @user = User.find(params[:id])
end

def new
  @user = User.new
end

def create
  @user = User.new(params[:user])
  if @user.save
    sign_in @user
    redirect_to users_path, :notice => "Welcome to WelcomePie!"
  else
    redirect_to new_users_path, :alert => "Please try signing up again"
  end
end

def edit
end 

def update
  authorize! :update, @user, :message => 'Not authorized as an administrator.'
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user], :as => :admin)
    redirect_to user, :notice => "User updated."
  else
    redirect_to user, :alert => "Unable to update user."
  end
end

def destroy
  authorize! :destroy, @user, :message => 'Not authorized as an administrator.'
  user = User.find(params[:id])
  unless user == current_user
    user.destroy
    redirect_to users_path, :notice => "User deleted."
  else
    redirect_to users_path, :notice => "Can't delete yourself."
  end
end

def find_tags
  @tags = Video.tag_tokens(params[:q])
  respond_to do |format|
    format.html
    format.json { render json: @tags }
  end
end 
```

结尾

还有我的路线：

```
 Welcomepie::Application.routes.draw do

  resources :friendships

  authenticated :user do
    root :to => 'home#index'
  end
  root :to => "home#index"
  devise_for :users, :controllers => { :registrations => :registrations }
  resources :users
end 
```

有没有人知道为什么它不能识别friendship.friend.name？我认为这与设计有关，但我无法解决。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:54:33.197

您应该在 Friendship 模型中设置 :foreign_key

```
class Friendship < ActiveRecord::Base
  belongs_to :user, :foreign_key => :user_id
  belongs_to :friend, :class_name => 'User', :foreign_key => :friend_id
  attr_accessible :friend_id, :user_id
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:49:15.313

问题实际上是在索引视图中，即使错误发生在显示视图中。

问题是当我添加一个朋友时，他们的 ID 没有被设置，它被设置为零。这可能与教程是较旧的 Rails 语法有关。无论如何，为了让我工作，我需要向用户添加 .id 以正确设置 ID，如下所示：

```
<% if user_signed_in? %>
        <h3>Welcome back <%= current_user.name %>!</h3>
        <% else %>
        <h3>Please sign up <%= link_to 'here', new_user_registration_path %></h3>
        <% end %> 
            <% @users.each do |user| %>
                <p>User: <%=link_to user.name, @user %>
                <%= link_to "Add as friend", friendships_path(:friend_id => user.id), :method => :post %> </p>
            <% end %> 
```

# iphone - 如何在 UITextView 内输入时调整其大小？

> ID：13493702
> 
> 赞同：14
> 
> 时间：2012-11-21T12:51:54.383
> 
> 标签：iphone, ios, uitextview, cgrect

我正在创建一个评论部分，就像 Facebook 用于其 iOS 应用程序中的消息部分的评论部分一样。我想要`UITextView`调整高度的大小，以便我输入的文本适合它，而不是你必须滚动才能看到溢出的文本。有什么想法我可以如何去做吗？我已经研究过可能使用`CGRect`分配给文本视图的大小和高度的，然后匹配内容大小：

```
CGRect textFrame = textView.frame;
textFrame.size.height = textView.contentSize.height;
textView.frame = textFrame; 
```

我假设我需要某种函数来检测文本何时到达边界`UITextView`然后调整视图的高度？有没有人为同样的概念而苦苦挣扎？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-21T13:00:48.007

您可以在此委托方法中调整框架，不要忘记将 textView 的委托设置为 self。

```
-(BOOL)textView:(UITextView *)_textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
      [self adjustFrames];  
      return YES;
}

-(void) adjustFrames
{
   CGRect textFrame = textView.frame;
   textFrame.size.height = textView.contentSize.height;
   textView.frame = textFrame;
} 
```

此解决方案适用于 iOS6 及之前的版本...对于 iOS7，请参阅此

[StackOverflow 答案](https://stackoverflow.com/questions/18368567/uitableviewcell-with-uitextview-height-in-ios-7/18818036#18818036)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-06T09:26:34.600

这是我的解决方案，使用**自动布局**和`textView.contentSize.height`. 在 iOS8 Xcode6.3 beta4 上测试。

最后有一个问题`setContentOffset`。当行数发生变化时，我将其放置以避免“错误的 contentOffset”伪影。它在最后一行下方添加了一个额外的不需要的空白区域，除非您在更改约束后立即将其重新设置，否则它看起来不太好。我花了几个小时才弄清楚这一点！

```
// set this up somewhere
let minTextViewHeight: CGFloat = 32
let maxTextViewHeight: CGFloat = 64

func textViewDidChange(textView: UITextView) {

    var height = ceil(textView.contentSize.height) // ceil to avoid decimal

    if (height < minTextViewHeight + 5) { // min cap, + 5 to avoid tiny height difference at min height
        height = minTextViewHeight
    }
    if (height > maxTextViewHeight) { // max cap
        height = maxTextViewHeight
    }

    if height != textViewHeight.constant { // set when height changed
        textViewHeight.constant = height // change the value of NSLayoutConstraint
        textView.setContentOffset(CGPointZero, animated: false) // scroll to top to avoid "wrong contentOffset" artefact when line count changes
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-01T13:02:09.007

在包含 UITextView 的 TableViewController 上，更新来自放入单元格的 tableViewDataSource 的数据，然后简单地调用它：

```
tableView.beginUpdates()
tableView.endUpdates() 
```

与 tableView.reloadData() 不同，这不会调用 resignFirstResponder

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-09-13T07:39:28.607

首先为您的 TextView 设置最小高度约束：

```
textView.heightAnchor.constraint(greaterThanOrEqualTo: view.heightAnchor, multiplier: 0.20) 
```

（确保您设置了 greaterThanOrEqualTo 约束，以便如果内在内容高度大于此高度，则采用内在内容高度）

或简单常数

```
textView.heightAnchor.constraint(greaterThanOrEqualToConstant: someConstant) 
```

配置 textView 时，将 isScrollEnabled 设置为 false

```
textView.isScrollEnabled = false 
```

现在，当您在 textView 上键入时，其固有的内容大小高度会增加，并且会自动将视图推到其下方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-27T07:55:37.237

`contentsize`在 ios 7 中不起作用。试试这个：

```
CGFloat textViewContentHeight = textView.contentSize.height;

 textViewContentHeight = ceilf([textView sizeThatFits:textView.frame.size].height + 9); 
```

# sql - 禁用特定应用程序和 Windows 用户的 SQL 登录

> ID：13493703
> 
> 赞同：0
> 
> 时间：2012-11-21T12:51:56.117
> 
> 标签：sql, sql-server, sql-server-2008, security

我有一个 SQL Server 2008 安装作为应用程序的后端运行。

我想阻止某个终端用户从 SSMS 以 SA 身份访问数据库，但允许他们在以 SA 身份登录时通过应用程序进行更改。我没有在 SQL 中使用不同用户的选项，因为应用程序在`user = 'SA'`.

我想做类似的事情：

```
CREATE TRIGGER LOGONREJECT
ON ALL SERVER
FOR LOGON
AS
BEGIN
    IF (inserted.User = 'sa'
    AND inserted.ApplicationName LIKE 'SQL Server Management Studio%'
    AND inserted.WorkStationName = 'TerminalServerName')
        ROLLBACK
END 
```

有没有办法做到这一点，最好是通过安全设置，但如果不是通过类似于上述的触发器？

# bash - 如何检查字符串是否以bash中的方括号开头

> ID：13493705
> 
> 赞同：2
> 
> 时间：2012-11-21T12:51:58.410
> 
> 标签：bash

我需要检查我的 ini 文件并检查该行是否以括号开头，以确定新配置是否已启动。有没有办法在bash中检查这个？我试过

```
line="[test]"

if [[ "$line" =~ [.* ]]; then
    echo "Got it!"
else
    echo "Nothing found"
fi 
```

但这对我不起作用。我认为括号需要以某种方式转义，但我找不到任何关于如何转义的信息。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:53:43.990

为此，您应该反斜杠特殊字符`[`，因此：

```
line='[test]'

if [[ $line =~ ^\[ ]]; then
    echo "Got it!"
else
    echo "Nothing found"
fi 
```

**解释**

*   `[`是打开[REGEX](http://en.wikipedia.org/wiki/Regular_expression)类的起始字符，例如`[0-9]`
*   到处都需要引号，但在`bash` `[[ ]]`测试中不需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:29:26.943

为此使用正则表达式太糟糕了！请改用`bash`glob：

```
if [[ $line = [* ]]; then
    echo 'Got it!'
else
    echo "Nothing found"
fi 
```

希望这有助于`bash`更有效地使用。

# .net - RegExp 只允许不包含一组前缀的字符串

> ID：13493711
> 
> 赞同：0
> 
> 时间：2012-11-21T12:52:23.877
> 
> 标签：.net, regex, string, validation

我找不到任何类似的问题，所以就这样吧。

我需要一个可以验证电话号码的正则表达式。因此，首先只允许使用数字、破折号和“+”。

困难的部分是只允许以以下集合中的任何字符串开头的表达式：

```
50  
51  
53  
57  
60  
66  
69  
72  
73  
78  
79  
88 
```

不应允许任何其他没有这些前缀的数字。

我将非常感谢任何提示！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:55:07.147

前缀部分非常简单。`^`是一个锚点，代表字符串的开始。然后只需附加您想要的模式（我相信您希望允许加号作为第一个字符）：

```
^\+?(?:50|51|53|57|60|66|69|72|73|78|79|88)[\d-]+$ 
```

请注意，它与电话号码`$`相对应，`^`并确保您的字符串在电话号码后不包含非数字非破折号字符。

当然，最后的模式可以做得更具体，以禁止连续的破折号等。

另请注意，`\d`在 .NET 中匹配任何 Unicode 数字字符。如果这不是您想要的，请使用`[0-9-]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:54:45.597

您需要对此进行调整，但这是一个开始：

```
^(50|51|53|57|60|66|69|72|73|78|79|88)\d+$
                                       ^
                                       |
                                       -----This part probably needs 
                                            more constraints, depending on 
                                            your format 
```

# objective-c - 处理隐藏的 Objective C 错误

> ID：13493715
> 
> 赞同：3
> 
> 时间：2012-11-21T12:52:30.547
> 
> 标签：objective-c, objective-c-runtime

我遇到了以下错误。即使我尝试在另一台具有相同 Xcode 4.2 final 版本的机器上使用我的代码，此错误仍然存​​在。任何人都可以帮忙吗？

控制台输出

```
error while killing target (killing anyway): warning: error on line 2184 of "/SourceCache/gdb/gdb-1708/src/gdb/macosx/macosx-nat-inferior.c" in
function "void macosx_kill_inferior_safe()": 
(os/kern) failure (0x5x) quit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:11:49.307

调试器正在崩溃。崩溃的调试器是一个痛苦的世界。

看起来你正在使用 gdb。尝试移动到 lldb 看看是否可以解决它。

如果没有，请尝试对您的派生数据目录进行核对，因为可能是您有一个损坏的符号导致调试器崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:39:32.260

我不知道错误是什么，但是在谷歌上搜索该文件会产生[macosx-nat-i​​nferior.c ，](http://opensource.apple.com/source/gdb/gdb-967/src/gdb/macosx/macosx-nat-inferior.c)它将自己描述为 GDB 的一部分。因此，假设它与您的计算机上的文件相同，那么深入研究它可能有助于解决您的问题。但是，该消息出现在我找到的文件的第 1981 行 .. 所以我怀疑它与您计算机上的消息相同。但是 GDB 的问题听起来很奇怪。

# .htaccess - 如何在 wordpress 上使用 htaccess 重定向默认永久链接？

> ID：13493716
> 
> 赞同：1
> 
> 时间：2012-11-21T12:52:36.787
> 
> 标签：.htaccess, redirect

如何使用永久链接将默认永久链接重定向到新域`/%postname%/`我`.htaccess?`已经尝试了所有使用**Redirect**和**RedirectMatch**的情况，但没有成功。

```
Redirect 301 /?p=123 http://newdomain.com/new-post

Redirect 301 http://olddomain.com/?p=123 http://newdomain.com/new-post

RedirectMatch 301 /?p=123 http://newdomain.com/new-post

RedirectMatch 301 http://olddomain.com/?p=123 http://newdomain.com/new-post 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:22:20.703

尝试

`RewriteRule ^(.*)$ http://newsite.com/$1 [R=301,L]`

# .net - 获取英语异常消息而不是本地语言

> ID：13493717
> 
> 赞同：11
> 
> 时间：2012-11-21T12:52:37.050
> 
> 标签：.net, localization, windows-runtime, locale

在德语系统上使用 Visual Studio 2012 RC 的 Windows 8 上，我将所有异常都本地化为德语，这实际上意味着我无法在谷歌上搜索任何对他们有用的东西。为了解决这个问题，我已经使用以下方法将我的 IDE 更改为英语：

```
Tools --> Options --> Internetional Settings --> Language --> English 
```

尽管如此，我在本地化的德语中得到了例外。我尝试使用以下代码更改代码中的 ThreadUI 文化：

```
Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-us"); 
```

可悲的是，在 WinRT 中，线程命名空间在 WinRT 中消失了。因此我尝试了：

```
System.Globalization.CultureInfo.DefaultThreadCurrentUICulture = new CultureInfo("en-us"); 
```

我仍然收到德国异常消息。有谁知道如何获取异常消息的非本地化版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:26:59.533

您的另一个选择是检索并显示该[`Exception.HResult`](http://msdn.microsoft.com/en-us/library/windows/apps/system.exception.hresult.aspx)值，可以对其进行搜索并将其转换为有用的英文错误消息。

另一种可能性，如果这些异常有 Win32 代码，尽管是 hack：

```
[DllImport("kernel32.dll",
           EntryPoint = "FormatMessageW",
           SetLastError = true,
           CharSet = CharSet.Auto)]
private static extern int FormatMessage(
    int dwFlags,
    IntPtr lpSource,
    int dwMessageId,
    int dwLanguageId,
    StringBuilder lpBuffer,
    int nSize,
    IntPtr[] Arguments);

// used like:
var builder = new StringBuilder(2048);
var res = FormatMessage(
    0x1000|0x0200/*System Message, Ignore Inserts*/,
    IntPtr.Zero,
    exception.HResult,
    new CultureInfo("en-US").LCID,
    builder,
    builder.Capacity,
    null);
 Console.WriteLine("{0}", builder.ToString());
 // throw new StackOverflowException()
 // "Recursion too deep; the stack overflowed." 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-11-21T13:46:28.940

异常通过设计具有本地化消息，这是所需的行为。您应该更改本地计算机设置。

# android - ListView 只有一项

> ID：13493718
> 
> 赞同：1
> 
> 时间：2012-11-21T12:52:37.457
> 
> 标签：android, listview

我有一个 ListView 只显示一项而不是两项。那是我的主要活动：

```
public class MainActivity extends Activity {
ImageView Add;
ImageView Shadow;
ProgressBar PB;

ListView listView;
String[] valuesUp = { "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
        "Sed non justo eros. Praesent a nisl dui" };
String[] valuesDown = { "Quisque ut ante eu arcu sagittis porta eu a dolor...",
        "In orci augue facilisis eget fermentum consequat ac..." };
int[] imgValues = {R.drawable.mobileapp_16, R.drawable.mobileapp_19};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayAdapter<String> adapter = new MyAdapter(this, valuesUp, valuesDown, imgValues);
    listView = (ListView) findViewById(R.id.listView1);
    listView.setAdapter(adapter);
} 
```

那就是我的适配器：

```
public class MyAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] valuesUp;
private final String[] valuesDown;
private final int[] ImageValue;
private TextView textViewUp;
private TextView textViewDown;
private ImageView image;

public MyAdapter(Context context, String[] valuesUP, String[] valuesDown, int[] imageValue) {
    super(context, R.layout.rowlayout, valuesUP);
    this.context = context;
    this.valuesUp = valuesUP;
    this.valuesDown = valuesDown;
    this.ImageValue = imageValue;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView;

    rowView = inflater.inflate(R.layout.rowlayout, parent, false);
    textViewUp = (TextView) rowView.findViewById(R.id.row_text_view_up);
    textViewDown = (TextView) rowView.findViewById(R.id.row_text_view_down);
    image = (ImageView) rowView.findViewById(R.id.image);
    textViewUp.setText(valuesUp[position]);
    textViewDown.setText(valuesDown[position]);
    image.setImageDrawable(context.getResources().getDrawable(ImageValue[position]));

    return rowView;
}} 
```

当我调试时，我看到 getView 被调用了很多次（大约 12 次）并且“位置”始终为 0。为什么会这样？谢谢！

我现在发现了我的问题！有点奇怪。列表的高度表现得很奇怪。当我在做“wrap_content 或 match_parent”时，它给了我一个项目，但是当我放置 400dp 时它可以。为什么会这样？！那是我的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/progress"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/topbar_bg" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/topbar_leftcircle" />

<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/imageView2"
    android:src="@drawable/topbar_logo" />

<ImageView
    android:id="@+id/imageView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="5dp"
    android:scaleType="fitStart"
    android:src="@drawable/topbar_menu" />

<ImageView
    android:id="@+id/imageView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_alignParentTop="true"
    android:layout_marginRight="5dp"
    android:layout_toLeftOf="@+id/imageView4"
    android:src="@drawable/topbar_key" />

<ScrollView
    android:id="@+id/scrollView2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/imageView1"
    android:layout_centerHorizontal="true" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/imageView1"
            android:layout_centerHorizontal="true"
            android:background="#00000000"
            android:src="@drawable/mobileapp_14" />

        <ImageView
            android:id="@+id/imageView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imageButton1"
            android:layout_centerHorizontal="true"
            android:scaleType="fitXY"
            android:src="@drawable/transparent_bg" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@+id/imageView6"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="10dp"
            android:maxLines="2"
            android:text="Sed at vestibulum elit. Nunc quam erat, gravida ac consequat"
            android:textColor="@color/RedText"
            android:textSize="15dp" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imageButton1"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/textView1"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:maxLines="2"
            android:text="Nullam sed erat erat, ut faucibus nunc. Etiam et mi di ante lacinia suscipit. Mauris gravida turpis eget lectus ullam..."
            android:textColor="@color/WhiteText"
            android:textSize="12dp" />

        <ImageView
            android:id="@+id/imageView7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/imageButton1"
            android:layout_centerHorizontal="true"
            android:background="#00000000"
            android:scaleType="centerCrop"
            android:src="@drawable/mobileapp_15" />

        <ListView
            android:id="@+id/listView1"
            android:layout_width="match_parent"
            android:layout_height="600dp"
            android:layout_below="@id/imageView7" >

        </ListView>

    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:39:48.750

我发现你的问题。

您的问题出在 XML 中。

从 xml 中删除**ScrollView 。**问题会解决的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T13:22:46.180

@roiberg 您的代码在我的模拟器中运行良好。检查您的 XML 代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T13:13:56.120

您不应该将 listView 的高度保持为 wrap_content ，因为这非常昂贵。将其设为 fill_parent/match_parent 并尝试一下。

给出 wrap_content 会让系统做很多运算来计算 listView 的高度。这将对位置 0 处的项目进行多次调用。

您不应该在滚动视图中提供 ListView。这永远行不通！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T14:26:58.780

我找到了解决方法。我将第一张图片放在一个独立的布局中，并将此布局设置为列表中的第一个单元格。所以，现在我将图像和列表本身作为一个大的可滚动列表。如果有人看到这有什么大问题，我想听听。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T12:59:13.760

像这样改变你的活动

公共类 MainActivity 扩展 Activity { ImageView 添加；ImageView 阴影；进度条 PB；

```
ListView listView;
String[] valuesUp = { "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
"Sed non justo eros. Praesent a nisl dui" };
String[] valuesDown = { "Quisque ut ante eu arcu sagittis porta eu a dolor...",
"In orci augue facilisis eget fermentum consequat ac..." };
int[] imgValues = {R.drawable.mobileapp_16, R.drawable.mobileapp_19};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    listView = (ListView) findViewById(R.id.listView1);
    listView.setAdapter(new MyAdapter(this,valuesUp,valuesDown,imgValues));
} 
```

像这样更改适配器

```
public class MyAdapter extends BaseAdapter {
private final Context context;
private final String[] valuesUp;
private final String[] valuesDown;
private final int[] ImageValue;
private TextView textViewUp;
private TextView textViewDown;
private ImageView image;

public MyAdapter(Context context, String[] valuesUP, String[] valuesDown, int[] imageValue) {
    super(context, R.layout.rowlayout, valuesUP);
    this.context = context;
    this.valuesUp = valuesUP;
    this.valuesDown = valuesDown;
    this.ImageValue = imageValue;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView;

    rowView = inflater.inflate(R.layout.rowlayout, parent, false);
    textViewUp = (TextView) rowView.findViewById(R.id.row_text_view_up);
    textViewDown = (TextView) rowView.findViewById(R.id.row_text_view_down);
    image = (ImageView) rowView.findViewById(R.id.image);
    textViewUp.setText(valuesUp[position]);
    textViewDown.setText(valuesDown[position]);
    image.setImageDrawable(context.getResources().getDrawable(ImageValue[position]));

    return rowView;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return valuesUp.length;
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return valuesUp[arg0];
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-29T20:49:11.783

就我而言，问题是因为我使用的是**NestedScrollView**所以解决方案是将 **android:fillViewport="true"**添加到我的 NestedScrollView

这是我的代码：

```
 <android.support.v4.widget.NestedScrollView
        android:id="@+id/content_frame"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">
    </android.support.v4.widget.NestedScrollView> 
```

# php - 检查 store_id Magento

> ID：13493722
> 
> 赞同：2
> 
> 时间：2012-11-21T12:52:54.407
> 
> 标签：php, magento

我想检查哪个商店 id 当前处于活动状态并显示某些东西是商店 id 例如 1

我现在的代码是这样的：

```
<?php if (Mage::getModel('core/store')->load($storeId) == 9): ?>
//code here
<?php endif; ?> 
```

但它总是返回 if 代码，无论商店 id 是什么。我认为问题出在“==”检查中。有人能告诉我正确的语法是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:58:09.303

获取当前商店信息使用

```
 Mage::app()->getStore()->getStoreId(); 
```

这将解释更多

[如何在 Magento 中获取商店信息？](https://stackoverflow.com/questions/2713042/how-to-get-store-information-in-magento)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:59:18.790

```
<?php if (Mage::app()->getStore()->getStoreId() == 9): ?> 
```

在你的情况下

# c++ - 构建 Arduino 库

> ID：13493723
> 
> 赞同：0
> 
> 时间：2012-11-21T12:52:54.767
> 
> 标签：c++, shared-libraries, arduino

我尝试为 Arduino 构建一个库（file.cpp + file.h），但出现此错误：

> 在示例_MPL3115A2.ino:2 中包含的文件中：/Applications/Arduino.app/Contents/Resources/Java/libraries/MPL3115A2/MPL3115A2.h:8: 错误：ISO C++ 禁止声明没有类型EXAMPLE_MPL3115A2.ino 的“getPressure”：在函数 'void loop()' 中：EXAMPLE_MPL3115A2:18：错误：在 '.' 之前预期的 unqualified-id 令牌

你能解释一下错误在哪里吗？（我不太懂C++）

这是我的**MPL3115A2.h**

```
#ifndef MPL3115A2_h
#define MPL3115A2_h

#include "Arduino.h"

class MPL3115A2{
public:
  getPressure();
private:
  int m_i2c_address;
  byte _p_msb, _p_csb, _plsb;
  byte _tempp, _tempa, _tempt, _decimalPress, _decimalAlt, _decimalTemp;
  unsigned long _ptot;
};

#endif 
```

我的**MPL3115A2.cpp**

```
#include "Arduino.h"
#include "MPL3115A2.h"
#include "I2C.h"

MPL3115A2::MPL3115A2()
{
        m_i2c_address = 0x60;
        p_msb = _p_msb;
    p_csb = _p_csb;
    p_lsb = _p_lsb;
        tempp = _tempp;
    tempa = _tempa;
    tempt = _tempt;
    decimalPress = _decimalPress;
    decimalAlt = _decimalAlt;
    decimalTemp = _decimalTemp;
        ptot = _ptot;
}

float MPL3115A2::getPressure()
{
  I2c.write(m_i2c_address,0x26,0x00);
  I2c.write(m_i2c_address,0x26,0x01); 
  delay(100);
  I2c.read(m_i2c_address,0x1,3);
  I2c.end();
  while(I2c.available()){
  p_msb=I2c.receive(); 
  p_csb=I2c.receive(); 
  p_lsb=I2c.receive();}
    ptot=p_msb;
  ptot=(ptot<<8)+p_csb;
  ptot=(ptot<<2)+(p_lsb>>6);
  tempp=(p_lsb<<2);
  if(tempp==192){
    decimalPress=75;
  }else if(tempp==128){
    decimalPress=25;
  }else if(tempp==64){
    decimalPress=5;
  }else{tempp=0;}
  Serial.print(ptot);
  Serial.print(".");
  Serial.println(decimalPress);
}

#endif 
```

和我的**example.pde**

```
#include <Arduino.h>
#include <MPL3115A2.h>
#include <I2C.h>

void setup(){
  Serial.begin(9600);
  I2c.begin();
}
//LOOP
void loop(){
  Serial.print("Pressure is: ");
  MPL3115A2.getPressure(); //Expressed in Pa
  Serial.print("Altimetry is: ");
  //MPL3115A2.getAltimetry(); //Expressed in m
  Serial.print("Temperature is: ");
 // MPL3115A2.getTemperature();  //Expressed in C
  delay(2000);
} 
```

对不起，很长的帖子！感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:06:01.913

`getPressure()`没有返回类型！根据您发布的 cpp，您的头文件应**声明**该方法，`float getPressure();`以便将您的头文件更改为：

```
#ifndef MPL3115A2_h
#define MPL3115A2_h

#include "Arduino.h"

class MPL3115A2{
public:
  float getPressure(); // <- only change here
private:
  int m_i2c_address;
  byte _p_msb, _p_csb, _plsb;
  byte _tempp, _tempa, _tempt, _decimalPress, _decimalAlt, _decimalTemp;
  unsigned long _ptot;
};

#endif 
```

对应的**定义**是

```
float MPL3115A2::getPressure()
{
  // your processing code...
} 
```

另外，请记住，您应该查看您的`constructor`，因为它没有在您的标题中**声明。**另外，做类似的事情

```
p_msb = _p_msb;
p_csb = _p_csb;
p_lsb = _p_lsb;
tempp = _tempp;
tempa = _tempa;
tempt = _tempt;
decimalPress = _decimalPress;
decimalAlt = _decimalAlt;
decimalTemp = _decimalTemp;
ptot = _ptot; 
```

真的很奇怪。左边的变量是什么？您正在使用未初始化的成员（右侧的成员，以 开头`_`）初始化它们。你应该考虑给这些成员一个初始值（比如`0`？）

将您的构造函数更改为：

```
MPL3115A2::MPL3115A2()
{
    _p_msb = 0;
    _p_csb = 0;
    _p_lsb = 0;
    _tempp = 0;
    _tempa = 0;
    _tempt = 0;
    _decimalPress = 0;
    _decimalAlt = 0;
    _decimalTemp = 0;
    _ptot = 0;
} 
```

确保您的成员变量使用“已知”值进行初始化。

此外，这些值中的大多数似乎是临时的（您可能在调用之外不需要它们`getPressure()`。在这种情况下，考虑将所有这些字节移动到函数的范围而不是传感器类中，以避免使用不必要的内存 - 没有在 Arduinos 上可用的东西太多了。

您还需要添加类`MPL3115A2();`的`public`一部分`MPL3115A2`，这是因为您在 CPP 文件中为此构造函数定义了一个主体，因此您需要声明它以使其成为对象的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:05:32.597

我认为该`getPressure()`方法应该在`float`您实现时使用返回类型声明`MPL3115A2.cpp`，因此`'h`文件应该具有：

```
...
class MPL3115A2 {
    public:
        float getPressure();
        // (and remember the constructor)
    private:    
        ...
} 
```

另外，您是否知道该方法实际上没有`return`任何作用？如果是这样，您可以将其设为 a`void getPressure()`并相应地更改类定义。

**补充**：对于未来的读者，错误消息中提供了答案，尽管隐藏在神秘的东西中：“ *...ISO C++ 禁止**声明****没有类型**的 'getPressure' ...* ”

希望有帮助。

# c# - 使用 LINQ to SQL 时如何简化复杂的条件子句

> ID：13493730
> 
> 赞同：1
> 
> 时间：2012-11-21T12:53:18.593
> 
> 标签：c#, linq, linq-to-sql, refactoring

具有大量 AND/OR 组件的复杂语句难以阅读并且容易出错 - 在普通的 IF 语句中，我可能会使用方法调用来简化 is 语句 - 例如：

```
 if (((user == myUser || user == yourUser) && user != Admin)
            && Something > SomethingElse
            && (thresholdDate > item.itemDate || (item.itemDate == null && item.itemType == itemIsDated))
            )
        {
            DoStuff();
        } 
```

我可以重构用户和日期部分以使事情更容易阅读：

```
 if (
            UserValid(user)
            && Something > SomethingElse
            && DateIsValid(thresholdDate, item)
           )
        {
            DoStuff();
        } 
```

我可以在 LINQ 查询中做什么来简化嵌套的 IF？

例如，如果我有以下内容：

```
 var someResults = DataManager.Things
                                        .Where(item => (item.UserName == currentUser.UserName
                                                        || item.ParentUsername == currentUser.UserName)
                                                       && (item.ItemType == (int) ItemType.MyType
                                                           || item.ItemType == (int) ItemType.YourType)
                                                       && item.Result == null
                                                       && (
                                                              (item.Status == null
                                                               && (item.ItemDate < thresholdDate
                                                                   || item.ItemType == (int) ItemType.YourType)
                                                              )
                                                              ||
                                                              (item.Status != null &&
                                                               item.Status != "Rejected")
                                                          )
            ) 
```

** 不是实际代码 - 只是一个简化和通用的示例。

我希望能够将部分逻辑提取到方法中 - 或者以其他方式分离出 AND / OR 混乱，以便清楚发生了什么。

我尝试向“项目”添加一个方法来执行某些逻辑一种 IsValidType(typeOptions) 方法 - 这编译得很好，但 LINQ 抱怨它在运行时无法识别该方法。

我可以在项目上使用一个属性 - 但是我不能传递任何上下文信息（这使得它的使用受到限制）

你如何使这种查询可读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:07:10.987

正如 Tim 在评论中提到的，您可以在大多数 LINQ-to-something 实现中使用方法。结果将如下所示：

```
.Where(item => CheckUserName(item)
    && CheckItemType(item)
    && CheckItemResult(item)
    && CheckItemStatus(item)); 
```

对于 LINQ to SQL、LINQ to Entities 或其他远程执行的实现，您至少可以利用查询优化并将所有内容重写`&&`为单独的`Where`调用，因为它们是等效的：

```
.Where(item => item.UserName == currentUser.UserName
    || item.ParentUsername == currentUser.UserName)
.Where(item => item.ItemType == (int) ItemType.MyType
    || item.ItemType == (int) ItemType.YourType)
.Where(item => item.Result == null)
.Where(item => (item.Status == null
    && (item.ItemDate < thresholdDate
        || item.ItemType == (int) ItemType.YourType))
    || (item.Status != null
        && item.Status != "Rejected")); 
```

生成的查询会将 where 子句连接到一个枚举器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:17:59.787

我假设您不能直接在代码中执行此操作。当然，如果你有很多类似的条件，你可以动态地为它们生成表达式。但是你可以用一个大的 Where 条件做很少的事情而不影响性能 =(.

如果您认为它更合适，您可以将您的单个大条件拆分为几个随后的 Where() 调用。转换为 SQL 时的 LINQ 树会合并条件并生成单选。DBMS 还可以优化生成的 SQL 以获得最大效率。因此，在某些情况下，您可以故意编写未优化的查询以获得更好的可读性并依赖自动优化。尽管要小心并检查您的特定条件是否真的如您所愿地合并和优化。

如果您可以将此代码移动到 SQL 存储过程，则可以配置 LINQ to SQL 以在需要时调用此过程。这将简化调用代码，但将复杂性转移到 SQL。我想您甚至可以将一些条件提取到 SQL 函数中，并在 Where 子句中使用它们来调用它们。虽然老实说我从未使用过它 - 只是阅读了可能性。有关更多详细信息和示例，请查看本文：[http ://weblogs.asp.net/zeeshanhirani/archive/2008/05/21/table-valued-functions-in-linq-to-sql.aspx](http://weblogs.asp.net/zeeshanhirani/archive/2008/05/21/table-valued-functions-in-linq-to-sql.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T14:18:32.853

三个非常不同的选择：

*   使用[锐器](http://www.jetbrains.com/resharper/)。它包含许多代码检查和重构，以减少 if 语句或指出冗余谓词。
*   在 linq-to-sql 中，您可以跳过对`null`. 那是因为表达式被翻译成 SQL 并且在 SQL 中没有空引用异常。`where a.Name == "x"`当`false`没有`a`. _ 在 linq-to-objects 中，这将引发空引用异常。
*   对于经常进行的比较，*您*可以考虑将[计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)添加到数据库表中。就像一个`IsRejected`评估的列`Status = 'Rejected'`。在 linq 中，这将减少到`where !item.IsRejected`.

# jquery - 处理在 jquery ui 选项卡中以编程方式添加的 div

> ID：13493742
> 
> 赞同：3
> 
> 时间：2012-11-21T12:54:03.727
> 
> 标签：jquery, jquery-ui-tabs

我在使用 jquery ui 选项卡处理动态添加的 div 时遇到问题。我的目标是只有一个 div 元素，其中根据用户选择的选项卡填充该元素的内容。现在我知道在处理选项卡时，这个库需要能够使用列表中的 href 指向的 id 访问 div。因此，要添加 div，我使用了 select 方法，如下所示：

```
$("#tabs").tabs({
    select: function (event, ui) {
        var choice = ui.tab.href;
        choice = choice.split("/");
        showContent(choice[choice.length - 1]); //choice -> geting a href value of selected   tab (for example: #tab-1)  
    }
}); 
```

在 showContent(choice) 中是这样的：

```
function showContent(choice) {
    div_id = choice.replace("#", "");
    //set content div like
    $("#content").html("<div id='" + div_id + "'>" + some_content + "</div>");
} 
```

在此之后，我在名为 content 的 div 中获得了正确的内容（里面的 div 的 id 也很好 -> 在我的示例 DOM 中包含）：

```
<div id="content"><div id="tab-1">content</div></div> 
```

但似乎 javascript 代码看不到新创建的 div，并且选项卡无法使用错误：“jQuery UI 选项卡：不匹配的片段标识符”。

我怎样才能让 javascript 看到这个新的 div 元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-23T12:43:42.863

我想你忘了添加这个：

```
<li><a href="#tabs-1"> Tab 1</a></li> 
```

刷新标签容器后

```
$( ".#tabs" ).tabs( "refresh" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:58:46.790

我认为您正在寻找的是 JQuery-UI 选项卡的[AJAX 实现](http://jqueryui.com/tabs/#ajax)。

这使您可以不在要存储内容的页面上存储所有选项卡内容。

*来自 JQueryUI 站点的示例：*
**JavaScript：**

```
$( "#tabs" ).tabs({
    beforeLoad: function( event, ui ) {
        ui.jqXHR.error(function() {
            ui.panel.html(
                "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                "If this wouldn't be a demo." );
        });
    }
}); 
```

**HTML：**

```
 <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Preloaded</a></li>
            <li><a href="ajax/content1.html">Tab 1</a></li>
            <li><a href="ajax/content2.html">Tab 2</a></li>
            <li><a href="ajax/content3-slow.php">Tab 3 (slow)</a></li>
            <li><a href="ajax/content4-broken.php">Tab 4 (broken)</a></li>
        </ul>
        <div id="tabs-1">
            <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
        </div>
    </div> 
```

# c# - 存在键时返回字典元素的值

> ID：13493744
> 
> 赞同：0
> 
> 时间：2012-11-21T12:54:09.130
> 
> 标签：c#, c#-4.0

如何返回值

```
dictionary <string, int > 
```

第一次找到密钥时的元素？？？。

我正在尝试以下代码，但我确定我做错了什么。因为返回值需要很长时间。

```
 private int GetIndex(string term)
    {
        int index = 0;
        foreach (var entry in dic)
        {

            var word = entry.Key;
            var wordFreq = entry.Value;

            if (word == term)

                index = wordFreq;

        }
        return index;
    } 
```

请问可以帮忙吗？？多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:55:29.843

直接请求就好了：

```
return dic[term] 
```

这应该够了吧！

但是如果你想在它不存在的时候返回 0，就这样：

```
int i;
if (dic.TryGetValue(term), out i)
    return i;
else
    return 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:57:03.627

字典不打算以线性方式使用，也不会通过数字索引到它们。每个键都是一个唯一的哈希值，计算时会给出要返回的内部位置。是的，可以像您一样枚举字典，但这不是字典的用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:59:11.117

[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)已经为此定义了一些东西。如果您希望它在找不到键的情况下引发异常，请使用[indexer 属性](http://msdn.microsoft.com/en-us/library/9tee9ht2.aspx)，例如`dic[term]`. 如果您不希望它抛出，而是`bool`说是否找到它，请使用[`TryGetValue`方法](http://msdn.microsoft.com/en-us/library/bb347013.aspx)，例如

```
int result;
if (dic.TryGetValue(term, out result))
    // do something 
```

# php - 隔离存在于 URI php 末尾的数字

> ID：13493745
> 
> 赞同：1
> 
> 时间：2012-11-21T12:54:17.297
> 
> 标签：php, regex

我有以下 URI：

```
 /belt/belts/fk/product/40P35871 
```

我想检索最后一个 / 之后的最后一个内容。在这种情况下是 40P35871。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:57:09.187

怎么样[`explode`](http://uk1.php.net/manual/en/function.explode.php)？

```
$elements = explode('/', $input);
$productId = end($elements); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T12:57:28.553

**这是一个完全不同的解决方案。** （也是最简单的！）

使用**[`basename`](http://php.net/manual/en/function.basename.php)**

```
$var = "/belt/belts/fk/product/40P35871";
echo basename($var); 
```

**输出：**

```
40P35871 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-21T12:56:32.740

对于这样简单的事情，您不需要正则表达式。考虑[在此处](http://php.net/manual/en/function.strrchr.php)`strrchr`使用, 文档

```
$lastcontent = substr(strrchr($uri, "/"), 1); 
```

考虑到 $uri 是路径的这种特殊情况，最好的答案是 Chtulhu 提供的那个。

`basename`将返回路径的最后一部分，文档[here](http://ca3.php.net/basename)

```
$lastcontent = basename($uri); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-21T13:00:34.443

像这样

```
$str = '/belt/belts/fk/product/40P35871';
$arr = explode('/', $str);
$var = array_pop($arr);
var_dump($var); 
```

或者

```
$var = substr($str, strrpos($str,'/') + 1); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-21T12:59:55.787

**试试这个**

```
$result = preg_replace('%(/(?:[^/]+?/)+)([^/]+)\b%', '$2', $subject); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T12:56:40.570

用这个：

```
echo preg_replace('/[a-z0-9]$/i', '$1', $url); 
```

这会给你最后的位置

注意：但仅在此 url 上，查询字符串使其无用，使用需要首先解析 url 以使其正常工作

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-21T12:57:26.887

不要使用正则表达式。在这种情况下，您可以充当以下角色

```
myUrl = $_SERVER[REQUEST_URL];
$number = substr(strrpos(myUri,'/')+1); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-21T12:58:00.660

### 你不需要`regex`。

找到最后的内容并使用`substr()`：

```
$lastcontent = substr(strrchr($uri, "/"), 1); 
```

# .net - 带有纹理的 CUDA 中的 GPU 性能

> ID：13493749
> 
> 赞同：3
> 
> 时间：2012-11-21T12:54:49.247
> 
> 标签：.net, cuda

我有一个关于 NVIDIA GPU 性能的问题。我有一个实现，我在两个数组之间进行插值。使用倾斜到线性内存的纹理比使用 CUDA-Arrays 更快。目前我只在一个 GPU 上尝试过。每个 GPU 上都是这种情况还是会有差异？我在笔记本电脑中使用 GPU。桌面 GPU 速度快得多吗？因为目前我只获得了 2-3 的加速。

我可能看起来像一个愚蠢的问题，但我会感谢在许多 GPU 上使用纹理的人的回答。我很奇怪使用 CUDA-Arrays（应该有一些缓存优化......）会更慢。

我正在开发 NVIDIA Quadro 2000m，并将其与 I7-2860QM @ 2,50GHZ（实现）进行比较。这是一场公平的比赛吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:59:45.697

具有计算能力 2.0 或更高缓存全局内存以及纹理的 GPU，因此纹理在 CC 1.x 时代的主要优势已不复存在。

恰恰相反，关于纹理的一点点提到的事实是，由于需要在硬连线布局的寄存器中存储多个参数和返回值，它们会增加寄存器压力。此外，全局内存的缓存大于纹理内存的缓存。所以通过纹理读取内存会比直接访问全局内存慢也就不足为奇了。

这一特性对于移动或桌面 GPU 应该是相同的，尽管高端桌面 GPU 的速度可能比移动设备快 2 到 5 倍。

# excel - 删除重复的excel列

> ID：13493753
> 
> 赞同：0
> 
> 时间：2012-11-21T12:55:00.347
> 
> 标签：excel, duplicates

我想删除、删除 Excel 列中的重复项。我知道如何删除重复的行，但不知道是否有任何方法可以处理列？

我的 Excel 表：

```
Name AA BB CC DD AA CC   
ID   11 22 33 44 11 33

Name AA BB CC DD  
ID   11 22 33 44 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:06:34.670

我的评论有点错误，因为即使仅限于工作表功能也可以解决这个问题。

但是，这是 using 的快速和肮脏版本`transpose`：

```
Public Sub demo()
  On Error Resume Next
  Application.ScreenUpdating = False
  With Range(Cells(1, 1), Cells(1000, 1000))
   .Cells = WorksheetFunction.Transpose(.Cells)
   .Cells.RemoveDuplicates Columns:=Array(1), Header:=xlYes
   .Cells = WorksheetFunction.Transpose(.Cells)
  End With
  Application.ScreenUpdating = True
End Sub 
```

您应该尝试一下，尽管这更多是针对较小数据集的解决方案。这需要一段时间，但它确实有效。

# sharepoint - 是否可以通过 VBA 检查共享点站点上是否存在文件？

> ID：13493756
> 
> 赞同：9
> 
> 时间：2012-11-21T12:55:05.143
> 
> 标签：sharepoint, vba, excel, hyperlink

我正在尝试编写一个 Excel (2010) 宏，该宏在某些时候必须确认公司共享点网站上某个文件 (doc/pdf) 的存在。该文件可通过 Internet Explorer 访问（所有权限均授予用户）。我有该文件的直接链接。我不需要打开它，只需检查它是否在那里。

如果这是一个本地文件，我会使用 Dir() 检查文件是否存在。但是，这不适用于 URI。

我尝试了一种基于 GET via objHttp 的方法，但我收到的唯一响应是一个网页，指出“我无权查看此页面”[在标签中]。

这是否可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T21:50:34.170

试一试：

```
Function checkFile(URLStr As String) As Boolean
    Dim oHttpRequest As Object
    Set oHttpRequest = New MSXML2.XMLHTTP60
    With oHttpRequest
        .Open "GET", URLStr, False, [Username], [Password]
        .setRequestHeader "Cache-Control", "no-cache"
        .setRequestHeader "Pragma", "no-cache"
        .setRequestHeader "If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT"
        .send
    End With
    If oHttpRequest.Status = 200 Then
        checkFile = True
    Else
        checkFile = False
    End If
End Function 
```

`URLStr`应该类似于“http://sharepoint/site/user.xlsx”。在该行中输入您的用户名/密码`.Open`以将它们传递给站点，这应该适用于任何 URI（例如，我正在针对 .xlsx 文件对其进行测试）。我应该指出，在我的内部 SharePoint 网站上，我不需要传递 UN/PW 即可运行此函数，因此如果您最终遇到这种情况，只需从`.Open`调用中删除这些参数。此外，所有标题内容可能都不是必需的，但我的请求中总是有它们，所以我把它们留在了里面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T13:02:39.230

我不知道这对你有帮助吗？但我正在和你分享我的想法。您可以为此使用 http 网络请求。如下例所示：

```
public void CheckWebFileExist()

{

try

{

    WebClient client = new WebClient();

    client.Credentials = CredentialCache.DefaultCredentials;

    // Create a request for the URL.         

    WebRequest request = WebRequest.Create("myAddress");

    // If required by the server, set the credentials.

    request.Credentials = CredentialCache.DefaultCredentials;

    // Get the response.

    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    //check response status

    if (string.Compare(response.StatusDescription, "OK", true) == 0)

    {

        //URL exists so that means file exists

    }

    else

    {

        //URL does not exist so that means file does not exist

    }      
}
catch (Exception error)

{

    //error catching

}
} 
```

让我知道这是否对您有帮助？

# php - 在 opencart 或任何 php 中突出显示当前页面链接

> ID：13493760
> 
> 赞同：0
> 
> 时间：2012-11-21T12:55:12.863
> 
> 标签：php, html, css, opencart

我只是在学习开放式购物车，但我认为任何具有良好 php 知识的人都可以回答这个问题。

我只是试图仅在该页面上突出显示链接，但它似乎不起作用

```
<?php $tickets = 'index.php?route=product/category&path=600'; ?>
<ul>
    <li><a href="http://www.limerickfc.ie">Limerick FC</a></li>
    <li><a href="<?php echo $tickets; ?>" <?php
if (strpos($_SERVER['PHP_SELF'], $tickets )) echo "class=\"current\" ";
?>  > Tickets     </a></li>
    <li><a href="<?php echo $home; ?>" class="current">Shop</a></li>
</ul> 
```

我知道这个变量`$tickets`很好，因为链接指向它应该去的地方，我知道这个类`current`很好，因为它适用于第三个`li`商店。

我使用`strpos`正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:35:26.833

我认为你应该使用`basename($_SERVER['REQUEST_URI']);`.

```
<a href="<?php echo $tickets; ?>" <?php echo (basename($_SERVER['REQUEST_URI']) == $tickets) ? '"class=\"current\"' : ""; ?>>Tickets</a> 
```

如果`basename($_SERVER['REQUEST_URI'])`在变量中声明会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:07:28.997

`strpos()`如果字符串在 char 0 处匹配，则返回 false - 上面就是这样。

使用相同的比较`===`以获得真实的结果。

作为说明，我`substr_count()`过去曾在类似的情况下使用过，而无需进行相同的比较！

# c# - 使用 iTextSharp 在 C# 应用程序中加载现有的 pdf

> ID：13493761
> 
> 赞同：-1
> 
> 时间：2012-11-21T12:55:14.253
> 
> 标签：c#, visual-studio-2010, c#-4.0, itextsharp

我需要知道如何加载现有的 .pdf ；假设我在本地机器上有一个 .pdf 我将它添加到我创建项目的位置我需要在我的 c# 应用程序中加载这个 .pdf 然后我需要添加一些更改。

我创建了一个空的 c# 项目添加了一个程序集信息在引用中我添加了以下内容

```
iTextSharp
Microsoft.CSharp
System
System.Data
System.Data.DataSetExtension
System.XML
System.XML.Ling 
```

还有一个作为 PdfClass.cs 的类

```
using System;
using System.IO;
using iTextSharp.text;
using iTextSharp.text.pdf;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace contextcopypdf
{
     public class PdfClass
        {
            //function that loads an exisitng pdf
            public void LoadPdf()
            {
               string inputPdf = "sign.pdf";
               string outputPdf = "sign1.pdf";
               Pdfreader = new PdfReader(inputPDF);

            }
        }
 } 
```

IDE 是 VS 2010 终极版

基本上在这个pdf上我有数字签名字段。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:03:40.153

我看到您的要求是对 PDF 进行数字签名。请阅读我关于数字签名的书，以确保您正确执行此操作：http: [//itextpdf.com/book/digitalsignatures/](http://itextpdf.com/book/digitalsignatures/)

书中的示例是用 Java 编写的，但我们已经将大部分示例移植到了 C# 中。你可以在这里找到这些例子：http: [//sourceforge.net/p/itextsharp/code/](http://sourceforge.net/p/itextsharp/code/)

浏览教程/签名。确保创建 CMS 或 CAdES 签名。较旧的口味将很快被弃用（或已在 PAdES 中被禁止）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:59:53.703

您已经有加载 pdf 的代码，如果需要，请相应地更改路径。

```
 var path = @"c:\Templates\Invoice.pdf";

        var pdfReader = new PdfReader(path); 
```

# java - xwd/java.awt.Robot 捕获黑色窗口（除了 unity2d shell 之外的所有内容都是黑色的）

> ID：13493765
> 
> 赞同：1
> 
> 时间：2012-11-21T12:55:27.863
> 
> 标签：java, screenshot, openjdk, ubuntu-unity

今天，我遇到了一个奇怪的问题：`java.awt.Robot`捕获黑色区域，而不是图像内容。我正在使用 Ubuntu 12.04 和 OpenJDK6/7。

`java.awt.Robot`在 Unix 上由 支持`sun.awt.X11.XRobotPeer`，它遵循[相应的 OpenJDK 源](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/07c1c59df4ef/src/solaris/native/sun/awt/awt_Robot.c)，使用类似于`xwd`utililty 使用的图像抓取功能（第 92-162 行）。

所以，我运行了以下命令：

```
xwd -root -out test.screen.root.xwd 
```

然后用 gimp 打开这个文件。这是我得到的：

![在此处输入图像描述](../Images/1c6b0f6590cdcf3dc0c13d3dad791ca5.png)

然后我尝试了：

```
xwd -root | xwdtopnm | pnmtopng > Screenshot.root.png 
```

我得到以下结果：控制台输出：

```
xwdtopnm: writing PPM file
libpng warning: Invalid sBIT depth specified 
```

和图像本身： ![在此处输入图像描述](../Images/dcba4cdc09e1a09b5061952d69483108.png)

什么会导致这种情况？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:58:48.417

似乎解决此问题的唯一方法是使用您自己的屏幕截图本机实现。

这是来自统一开发人员的启动板问题的详细描述：[启动板对话](https://bugs.launchpad.net/unity-2d/+bug/1081674)。

问题在于 unity-2d 绘制自身的方式和 XShaping 的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-12T16:39:32.763

我有同样的错误信息。显然，它与`xwdtopnm`不能很好地处理屏幕的颜色深度有关 - 导致生成的 png 文件损坏。

另一种解决方案是使用包中的`import`命令`imagemagick`来截取屏幕截图。

所以你可以替换：

```
xwd -root | xwdtopnm | pnmtopng > Screenshot.root.png 
```

和：

```
import -window root Screenshot.root.png 
```

* * *

注意：如果未安装，您可以`imagemagick`使用以下命令进入 Ubuntu：

```
sudo apt install imagemagick 
```

# ios - 如何使用文本输入填充 tableview 控制器

> ID：13493766
> 
> 赞同：0
> 
> 时间：2012-11-21T12:55:26.877
> 
> 标签：ios, arrays, controller, nsmutablearray, tableview

我创建了一个带有 a 的表视图控制器`UITextField`。如何填充来自`UITextField`. 我尝试了以下但似乎数组为空或被清空

```
- (IBAction)endingInput:(id)sender{
    [sender resignFirstResponder];

    //send the message to the table cell
    NSMutableArray *history = [[NSMutableArray alloc] init];
    [history addObject:[NSString stringWithFormat:@"%@",self.chatMessageField.text]];
    [self.chatHistory addObject:history];
    [myTableView reloadData];

    //push the message to server
    [self initiateMessageSending:self.chatMessageField.text];

    chatMessageField.text = @"";
    [history release];
} 
```

关于我的`cellForRowAtIndex`方法；

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...
if(cell == nil){
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

if(tableView == self.myTableView){
    cell.textLabel.text = [chatHistory objectAtIndex:indexPath.row];
}
return cell; 
```

我已经设置了一个断点，但它没有通过那里。我怀疑我的数组是空的。

同样，调用该`reloadData`方法的最佳位置在哪里？

另外，`chatHistory`是私人成员，有没有办法像初始化它一样`[[self.chatHistory alloc] init];`？

我知道这是一个常见的问题，但我一直在讨价还价。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:05:53.930

如果你不初始化`chatHistory`它甚至不存在......没关系是空的！（我不清楚这里的“私人会员”是什么意思。）

如果您记录 的值`chatHistory`，您将确定它是 nil 还是空。

我看到的另一个问题是您尝试`chatHistory`使用其他 ( `history`) 数组加载，然后将其内容用作字符串。您应该决定它是数组数组还是字符串数组，然后保持一致。

（`[[self.chatHistory alloc] init];`也不是创建新对象的有效语法。请查看[Objective-C 语言参考](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/ObjectAllocation/ObjectAllocation.html)以了解正确的方法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:03:07.307

我想你忘了分配和初始化你的`chatHistory`

```
- (void)viewDidLoad
{
    self.chatHistory = [[NSMutableArray alloc] init];
} 
```

# windows-8 - 如何从 WinJS.UI.Pages.render 传回值

> ID：13493768
> 
> 赞同：0
> 
> 时间：2012-11-21T12:55:31.180
> 
> 标签：windows-8, winjs

我正在使用 WinJS.UI.Pages.render 调用将片段加载到页面中。我[读到](http://msdn.microsoft.com/en-us/library/windows/apps/hh770590.aspx)页面的就绪方法可以返回一个在页面就绪时完成的承诺。我认为这个承诺是 WinJS.UI.Pages.render 方法将返回的内容，但事实并非如此。我认为这将是一个很好的机制，可以将值从片段异步传递回调用者。

是否可以从 WinJS.UI.Pages.render 承诺完成处理程序访问准备好的承诺？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:49:28.447

查看实现中的代码，*看起来*这实际上可能是WinJS 中的一个*错误*。该`WinJS.UI.Pages.render`方法**确实**返回了一个承诺，但它是在`processed`完成之后的一个，并且导致*控制实例*作为完成的承诺值返回。

您最好的选择是作为 Page 类的成员做出额外的承诺。然后当你得到 时`render`，从那个承诺中剥离，而不是从`render`承诺本身。

使用在构造函数或类似的构造函数中创建的承诺很重要，因为返回的承诺将在您的页面类上调用`render`时完成——**在**您返回之前，因此在完成后立即访问该值，您的方法还*没有*被调用。`processed`**`ready``render``ready`**

# php - 带有渲染部分的未定义变量形式

> ID：13493772
> 
> 赞同：0
> 
> 时间：2012-11-21T12:55:55.577
> 
> 标签：php, symfony1

我正在使用 symfony 1，问题是当我使用 RenderPartial 函数将小部件放入弹出窗口时，出现以下错误：

> 注意：未定义变量：第 49 行 ...templates/template.php 中的表单
> 致命​​错误：第 49 行 .../templates/template.php 中的非对象调用成员函数 open()

这是我在 class.php 中的函数：

```
public function executeProduct(sfWebRequest $request)
{
  $this->renderPartial('integrate/Product');
  $form = new ProductForm();

  if ($request->isMethod('post') && $request->hasParameter($form->getName()))
  {
    $form->bindRequest($request); 
    if ($form->isValid())
    {
      $form->save();
      return $this->redirectBack();
    }
    $this->forms['product'] = $form;
  }
  else 
  {
    foreach ($form->getGlobalErrors() as $nom=>$error)
    {
      echo $nom.':'.$error;
    }
  }
} 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:32:47.453

渲染部分时，您必须手动提供变量。尝试

```
$this->renderPartial('integrate/Product', array('form' => $form)); 
```

并在动作结束时移动呼叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:20:28.390

不，不幸的是这种方法是错误的，我必须把`if ($request->isMethod('post'))`

我修改了我的模板：

```
<form action="<?php echo url_for('integrate/Product') ?>" method="POST">            
<ul>
<ul> <li> <?php echo $form['name']->label()?> </li>
<?php echo $form['name']->field()?>

 </ul> 
```

中的所有块：

```
if ($request->isMethod('post') && $request->hasParameter($form->getName())) 
```

如果我删除它，它可以工作，但我必须把它，所以在这个改变之后；我有这个错误：

注意：未定义变量：第 49 行 ...templates/template.php 中的表单 致命​​错误：第 49 行 .../templates/template.php 中的非对象调用成员函数 label()

# c# - 背景音频在 Windows 8 商店/地铁应用程序中不起作用

> ID：13493779
> 
> 赞同：0
> 
> 时间：2012-11-21T12:56:10.977
> 
> 标签：c#, windows-8, winrt-xaml

我尝试通过 XAML 中的 mediaElement 设置背景音频

```
<MediaElement x:Name="MyAudio" Source="Assets/Sound.mp3" AudioCategory="BackgroundCapableMedia" AutoPlay="False" /> 
```

并以编程方式

```
async void setUpAudio()
{
    var package = Windows.ApplicationModel.Package.Current;
    var installedLocation = package.InstalledLocation;
    var storageFile = await installedLocation.GetFileAsync("Assets\\Sound.mp3");
    if (storageFile != null)
    {
        var stream = await storageFile.OpenAsync(Windows.Storage.FileAccessMode.Read);
        _soundEffect = new MediaElement();
        _soundEffect.AudioCategory = AudioCategory.BackgroundCapableMedia;
        _soundEffect.AutoPlay = false;
        _soundEffect.SetSource(stream, storageFile.ContentType);
    }
}

// and later...
_soundEffect.Play(); 
```

但两者都不适合我。一旦我最小化应用程序，音乐就会消失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:33:04.913

[阿克顿用](https://stackoverflow.com/users/1634846/akton)[这个出色的答案回答](https://stackoverflow.com/questions/11341772/how-to-play-background-music-online-in-windows-8)了类似的问题

最初并不容易找到，因为它没有在标题中使用“音频”，而且我没有播放音乐。这是一个出色而全面的答案，我喜欢在 StackExchange 上看到类似的答案。它还提到了其他类似问题的答案未能指出的一些事情。简单来说

*   *即使没有按钮*，您也需要处理**MediaControl**事件`PlayPressed`、、和。编辑：这些事件是 Windows 8 应用程序认证所必需的，请确保它们确实有效。`PausePressed``PlayPausedTogglePressed``StopPressed`
**   将音频添加到应用程序清单中的支持后台任务列表中 [有关详细信息，请参阅 aktons 答案]*

 *然而，在实施这个解决方案时，我确实遇到了我只能假设是一个错误。我在 UserControl 中构建了一个厨房计时器。它在倒计时时播放可选的滴答声，然后在经过时发出嗡嗡声。但是，如果在设置定时器之前关闭滴答声，则*不会播放*蜂鸣声。似乎 Windows 8 应用程序需要在最小化之前播放声音*才能*使背景音频正常工作。为了解决这个问题，我创建了一个持续时间为 1 秒的无声音频文件。无论滴答声是打开还是关闭，此文件都会播放。这是一个奇怪的黑客，我希望我能找到一个更好的解决方案，但现在我能想到的只是它。*

# php - PHP 为提醒电子邮件转换时区

> ID：13493780
> 
> 赞同：1
> 
> 时间：2012-11-21T12:56:11.600
> 
> 标签：php, email, date, time

背景：我有一个允许用户创建待办事项的系统。目前，cron 作业每 12 小时触发一次，并发送我们的提醒电子邮件。问题？不是每个用户都在同一个时区，所以我的早上 7 点可以是他们的凌晨 1 点。

目标：允许用户选择自己的时区。此外，允许用户选择自己喜欢的时间，以 15 分钟为增量（选择小时和 00、15、30 或 45）。

我所拥有的：我在我的网络应用程序上设置了一个变量来匹配电子邮件服务器的时区（-0600）。我允许用户提交他们自己的时区和两个首选的电子邮件时间。我正在编写一个脚本来检查当前时间是否与用户的首选发送时间匹配，并查看用户的时区是否与系统的时区匹配。

背景，第二部分：当用户提交他们的时区时，此时他们选择了他们喜欢的两个时间（所有这三个信息都被放入数据库中他们自己的单元格）。

我陷入困境的地方：我认为最好的选择是在用户提交时将首选时间（$etime1 和 $etime2）转换为系统的时区（$systz），因此它作为系统的时区存储在数据库中。这样，计算是在用户提交他们的偏好时完成的（不是经常），而不是每次运行 cron 作业时（经常 - 每 15 分钟）。用户的时区位于变量 $uzertz 下。

所以：用户提交数据，这就是我所拥有的”

```
if ($usertz == $systz) {
*submit the $etime1 and $etime2 data as-is*}
else { *run some sort of script to convert $etime1 and $etime2 to the -0600
(system's timezone) equivalent, after which is should be submitted to the db in it's
converted version* } 
```

我了解 PHP 提供了将时间从一个时区转换为另一个时区的方法，但我一直很难理解这些脚本是如何工作的，特别是因为我发现的那些是查看系统时间，而不是用户提交的时间。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:02:37.183

在服务器中，您应该始终使用 GMT。这是获得一致时间测量的唯一方法，例如在夏令时。顺便说一句，要将时间转换为其他时区，您可以使用[DateTime](http://www.php.net/manual/en/datetime.settimezone.php)

```
<?php
$date = new DateTime($etime1, new DateTimeZone($usertz));
echo $date->format('Y-m-d H:i:sP') . "\n";

$date->setTimezone(new DateTimeZone($systz));
echo $date->format('Y-m-d H:i:sP') . "\n";
?> 
```

[您可以使用函数DateTimeZone::listIdentifiers()](http://www.php.net/manual/en/datetimezone.listidentifiers.php)找到所有可用时区的列表。

例子：

```
<?php
  // Server date/time
  $etime1 = '2012-11-22 08:00:00'; 
  // Server timeZone
  $date = new DateTime($etime1, new DateTimeZone('Asia/Jerusalem'));

  // Converted date/time
  $date->setTimezone(new DateTimeZone('America/Chicago')); 
  echo $date->format('Y-m-d H:i:sP') . "\n"; 
?> 
```

输出是：

```
2012-11-22 00:00:00-06:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:04:15.273

您可以使用[`DateTime`](http://php.net/manual/en/datetime.settimezone.php)PHP 5 中提供的对象。

这允许您在创建 DateTime 时提供一个[`DateTimeZone`](http://php.net/manual/en/class.datetimezone.php)对象。

```
$date = new DateTime('2000-01-01', new DateTimeZone('Pacific/Nauru')); 
```

您还可以动态更改时区。

```
$date->setTimezone(new DateTimeZone('Pacific/Chatham')); 
```

# asp.net-mvc - 获取应用程序名称

> ID：13493786
> 
> 赞同：0
> 
> 时间：2012-11-21T12:56:37.027
> 
> 标签：asp.net-mvc, asp.net-mvc-4, application-name

找不到获取我的 ApplicationName 的方法。找到了一个静态方法来获取和设置应​​用程序名称，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:48:47.373

找到了一种非常简单的方法来检索我的应用程序名称：

```
SqlMembershipProvider msmp = new SqlMembershipProvider();
string appName = msmp.ApplicationName.ToString(); 
```

;O)

# java - 在 Maven 中使用 ivy java 项目？

> ID：13493787
> 
> 赞同：0
> 
> 时间：2012-11-21T12:56:36.927
> 
> 标签：java, maven, ivy

我有一个大型 Maven 项目，其中包含许多基于 Maven 的子项目。

我开始使用 Red5，red5 创建了一个基于 ivy 的项目。我需要将该项目添加到依赖项中。

列出项目主目录的文件：

```
build.properties  build.xml  ivy.xml  ivysettings.xml  lib  readme.txt  src  www 
```

如何将此项目添加为 Maven 项目依赖项之一？

在 Maven 3.0.4 中使用 Java

谢谢！克菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:50:06.973

Interesting... A `lib` directory in an Ivy project.

You can modify the build.xml to create one more target that calls the [`<ivy:makepom/>`](http://ant.apache.org/ivy/history/latest-milestone/use/makepom.html) target. Just make sure that [`<ivy:resolve>`](http://ant.apache.org/ivy/history/latest-milestone/use/resolve.html) is called first. This will create a small piece of the `pom.xml` file you need.

As for the rest. What's that technical term? Oh yeah, you're screwed.

The problem is that Ant and Maven have two completely different build philosophies. In Ant, you write a `build.xml` script that describes what you want to build and how you want to build it. In Maven, you *describe* your project via a `pom.xml` file, and Maven does all the build processing for you.

This isn't an issue of whether or not Whether Ant or Maven is the force of all that's good in the world and the other is only for luzers Apple Fanboys. This is a case of manually converting a pre-existing project into Maven.

You'll have to go through your `build.xml` and figure out everything it is doing. Then, you need to convert this over to a Maven `pom.xml` file. There's no way to automate this. Even worse, Red5 isn't setup like a Maven project, so you'll either have to move all the files around, or go into archaic `pom.xml` configuration hell trying to override how Maven assumes the build is suppose to take place. This can take days, even weeks to get right. And, in the end, you end up with a project you don't control that if you want to update will have to be done all over again from scratch.

Trust me, I did this before for another job where the System Architect decided that Maven was better than Ant, and all of our projects must be converted from Ant to Maven. And, who got stuck with this task? Not the developers who were too busy with other tasks, but I the Configuration Manager.

And, in the end, you will have a project you don't control that if you want to update will have to be done all over again from scratch.

* * *

There is an alternative: Ignore it.

Does it really matter if Red5 is an Ivy project? What do you need from this Red5 project anyway? Do you need that `red5.jar` or the distribution that gets built.

If you need the distribution, let it remain as an Ivy project. Simply set the `ivysettings.xml` to point to your Maven repository and let it know that it's in Maven 2 format. Ivy will have no problems getting stuff out of that. So what if it's Ivy?

If you just need that `red5.jar` file in your other Maven project, you can simply use the `<ivy:makepom/>` task to generate a `pom.xml` file for you. Then use `mvn deploy:deploy-file` to deploy that jar into your Maven repository:

```
 $ mvn deploy:deploy-file -Dfile=red5.jar \
     -DpomFile=pom.xml \
     -DrepositoryId=$repoId \
     -Durl=$url 
```

Now, your `red5.jar` is in your Maven repository as a fully transitive downloading jar. If you really, really want to get fancy, you can embed the generated pom.xml file into the jar itself, so it is *self referential* just like Maven jars are. That will take about 30 minutes of hacking the current build.xml file. (Or, if your jar doesn't have to have the pom.xml embedded in it, a separate Ant file that just builds the `pom.xml` you need, and maybe even deploys it into your Maven repository for you. That way, if the project gets updated, you don't have to worry about the `build.xml` file being updated.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:08:45.377

我认为您不会在不创建 JAR 的情况下侥幸逃脱。Maven 的整个依赖理念是围绕存储库中的 JAR 文件构建的——当一个 maven 项目依赖于另一个项目时，它的工作方式是依赖项目构建其 JAR 并将其放入本地存储库，然后主项目从那里依赖它。

也就是说，您可以使用Maven Ant Tasks`<ivy:makepom>`和[Maven Ant Tasks](http://maven.apache.org/ant-tasks/index.html)的组合相当轻松地自动执行此操作。这个想法是让 Ivy 项目构建它的 JAR 并将其作为每个构建的一部分推送到本地 Maven 存储库，因此它可以立即供 maven 项目依赖。

```
<jar destfile="project.jar">
   <fileset dir="classes" />
</jar>

<ivy:makepom ivyfile="ivy.xml" pomfile="project.pom" conf="default,runtime">
   <mapping conf="default" scope="compile"/>
   <mapping conf="runtime" scope="runtime"/>
</ivy:makepom>

<artifact:pom id="project.pom" file="project.pom" />
<artifact:install file="project.jar" pomRefId="project.pom" /> 
```

确保您的 Ivy 项目的版本号`-SNAPSHOT`以`ivy.xml`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:33:17.507

我自己没有使用过它，但我知道 Ivy 有一个[任务可以将 ivy 文件转换为 maven pom。](http://ant.apache.org/ivy/history/latest-milestone/use/makepom.html) 我将探索一个选项，让我的 CI 环境运行该任务以在成功构建后生成一个 pom，然后让我的 maven 项目查看 CI 的 jar 和 pom 的最新工件。您也可以跳过 CI 环境，并让 maven 从本地文件系统解析工件。

# actionscript-3 - 在 Chrome/浏览器控制台上跟踪

> ID：13493790
> 
> 赞同：14
> 
> 时间：2012-11-21T12:56:51.730
> 
> 标签：actionscript-3, apache-flex, flex3

有谁知道如何使用 Flex3 在 google chrome 控制台中跟踪消息。例如在日志部分。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-21T13:01:22.417

```
import flash.external.ExternalInterface;

ExternalInterface.call("console.log", "YourString"); 
```

[请参阅此处](http://livedocs.adobe.com/flex/3/html/help.html?content=19_External_Interface_04.html)了解更多信息。

# php - 防止 jQuery UI 自动完成显示类似的结果

> ID：13493794
> 
> 赞同：0
> 
> 时间：2012-11-21T12:56:59.527
> 
> 标签：php, jquery, mysql, user-interface

我正在使用 jQuery UI 自动完成来显示我的数据库上可用的结果。我的网站用于房地产列表，我在搜索表单上名为“城市”的字段下使用它，因此如果我在同一城市下列出 500 处房产，我的字段将显示该城市的名称 500 次。

有没有办法阻止它，所以相同的结果只能显示一次？

这是我的 PHP 文件：

```
<?php
$mysqli = new mysqli('localhost', 'aliicomb_joombd', 'xxxxxxxx', 'aliicomb_joombd');
$text = $mysqli->real_escape_string($_GET['term']);

$query = "SELECT field_63 FROM jbd_joomd_type15 WHERE field_63 LIKE '%$text%' ORDER BY field_63 ASC";
$result = $mysqli->query($query);
$json = '[';
$first = true;
while($row = $result->fetch_assoc())
{
    if (!$first) { $json .=  ','; } else { $first = false; }
    $json .= '{"value":"'.$row['field_63'].'"}';
}
$json .= ']';
echo $json;
?> 
```

还有我的 Javascript：

```
<script type="text/javascript">
$(document).ready(function()
{
    $('#field_63').autocomplete(
    {
        source: "city.php",
        minLength: 3
    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:03:44.750

您可以在查询中使用 DISTINCT 关键字从数据库中获取不同的值：

```
$query = "SELECT DISTINCT field_63 FROM jbd_joomd_type15 WHERE field_63 LIKE '%$text%' ORDER BY field_63 ASC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:02:17.700

正如 Ivan Hušnjak 建议的那样，您可以尝试

```
$query = "SELECT DISTINCT field_63 FROM jbd_joomd_type15 WHERE field_63 LIKE '%$text%' ORDER BY field_63 ASC"; 
```

或者

```
$query = "SELECT TOP 1 field_63 FROM jbd_joomd_type15 WHERE field_63 LIKE '%$text%' ORDER BY field_63 ASC"; 
```

从数据库只返回 1 个结果

请注意，如果有多行 field_63 类似于 $text，则 DISTINCT 仍然可以返回多个结果

# jquery - 使用json-time显示一些东西

> ID：13493799
> 
> 赞同：1
> 
> 时间：2012-11-21T12:57:28.303
> 
> 标签：jquery, jsonp

有人问我是否可以使用（系统）时钟来显示特殊的东西？我正在使用[http://json-time.appspot.com/time.json](http://json-time.appspot.com/time.json)

例如：当时钟在星期一和星期四之间时，显示“message1”。在星期五和星期日之间显示“message2”。

我所拥有的是：

```
<script type="text/javascript">
$(document).ready(function(){
  var timezone = "Europe/Berlin";
  $.getJSON("http://json-time.appspot.com/time.json?tz="+timezone+"&callback=?",
    function(data){
      if (data.datetime < ??) { // what do I have to do here?
        alert ("It's monday-thursday in "+timezone);
      } else {
        alert ("It's friday-sunday in "+timezone);
      }
    })
});
  </script> 
```

我和“？？”有什么关系？? 欢迎任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:07:37.090

我假设你想要这样的东西：

```
var timezone = "Europe/Berlin";
$.getJSON("http://json-time.appspot.com/time.json?tz=" + timezone + "&callback=?", function(data) {
    var day = new Date(data.datetime).getDay();
    if (day > 0 && day < 4) {   // days start with 0 (Sunday)
        alert("It's monday-thursday in " + timezone);
    } else {
        alert("It's friday-sunday in " + timezone);
    }
});​ 
```

**演示：http:** [//jsfiddle.net/sXbUv/](http://jsfiddle.net/sXbUv/)

# image - 我需要一个以 div 为中心的垂直 img，如何？

> ID：13493800
> 
> 赞同：0
> 
> 时间：2012-11-21T12:57:31.643
> 
> 标签：image, html, vertical-alignment

供参考：检查：http: [//jsfiddle.net/blackvibes/mVYwd/](http://jsfiddle.net/blackvibes/mVYwd/)

我正在为移动设备创建一个网站（很确定这不是最好的方法......但无论如何）我一直使用百分比，因为它在任何移动（纵向）屏幕上的大小都应该相对相等。

我尝试了很多事情，例如：

```
#header img {
vertical-align:middle;
padding-top: auto;
padding-bottom: auto;
margin-top: auto;
margin-bottom: auto; 
```

}

但我仍然无法让它工作。

唯一会出现在该 div 中的是显示学校徽标的单个图像。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:02:36.140

从 img 标签中删除`width`and`height`

```
#header{text-align:center;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:06:06.673

使用您的图像作为您的`#header`id 的背景：

```
#header img {
    background:url(your_image.jpg) center center no-repeat;
} 
```

# c++ - 从 QMap 中调用成员函数

> ID：13493801
> 
> 赞同：2
> 
> 时间：2012-11-21T12:57:39.303
> 
> 标签：c++, qt, qmap

我有一个 TypeData 类，想将该类型的对象存储在 QMap 中，然后我想从映射中获取特定对象并调用该对象的成员函数。但是当我尝试这样做时，我收到以下错误消息：

```
error C2662: 'TypeData::write': cannot convert 'this' pointer from 'const TypeData' to 'TypeData &' 
```

以下是相关的代码片段：

```
QMap<QString, TypeData> typeDataList;

typeDataList.insert(currentID, temp);

typeDataList.value(currentID).write(); 
```

谁能告诉我在这里做错了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:53:49.387

QMap::value 返回 a `const T`，即映射中元素的*副本和**不可修改*的副本。您的 write() 方法可能不是 const，因此不允许在 const T 上调用 write()。如果 value 返回 just `T`，它会起作用，但是 write() 对临时对象所做的任何更改都会立即丢失。（因为副本随即被销毁）。

因此，如果它不修改 TypeData，您可以将 write() 设为 const。如果可能的话，这是更可取的。

或者，您可以这样做：

```
typeDataList[currentID].write() // modifies the object in the map but also will insert a TypeData() if there is no entry for key currentID yet. 
```

或者，如果没有找到更详细但不插入新元素：

```
QMap<QString,TypeData>::Iterator it = typeDataList.find(currentID);
if ( it != typeDataList.constEnd() ) {
    it->write();
} else {
    // no typedata found for currentID
} 
```

# sql - SQL 从一个或另一个表中选择

> ID：13493814
> 
> 赞同：5
> 
> 时间：2012-11-21T12:58:18.770
> 
> 标签：sql, select, db2

假设我有一个包含很多记录（> 100'000）的表 A 和一个包含与 A 相同的列和大约相同的数据量的表 B。一个聪明的选择语句是否有可能获得表 A 的所有记录*或*表 B 的所有记录？

由于性能，我对我目前使用的方法不太满意：

```
select
     column1
    ,column2
    ,column3
from (
    select 'A' as tablename, a.* from table_a a
    union
    select 'B' as tablename, b.* from table_b b
) x
where 
    x.tablename = 'A' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:44:48.987

顺便说一句，您的方法似乎是标准 SQL 中的唯一方法。

`UNION`通过将 更改为 ，您将大大提高性能`UNION ALL`。在返回任何数据之前，`UNION`必须从两个表中读取数据，然后消除重复项。

`UNION ALL`不会消除重复项。它的性能有多好取决于数据库引擎，也可能取决于转动参数。

其实还有另一种可能。我不知道它的效果如何，但你可以试试：

```
select *
from ((select const.tableName, a.*
       from A cross join
            (select 'A' as tableName where x.TableName = 'A')
      ) union all
      (select const.tableName, b.*
       from B cross join
            (select 'B' as tableName where x.TableName = 'B')
      )
     ) t 
```

没有承诺。但这个想法是交叉连接到一个有 1 行或 0 行的表。这在 MySQL 中不起作用，因为它不允许`WHERE`没有`FROM`. 在其他数据库中，您可能需要一个表名，例如`dual`. 当子查询不包含记录时，这使查询引擎有机会完全优化表的读取。当然，仅仅因为你给 SQL 引擎优化的机会并不意味着它会。

此外，“*”是一个坏主意，尤其是在工会中。但我把它留在了，因为这不是问题的重点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T13:49:58.433

您可以尝试下一个解决方案，它仅从表 tmp1 ('A' = 'A') 中选择

```
select
  *
from
  tmp1
where
  'A' = 'A'

union all

select
  *
from
  tmp2
where
  'B' = 'A' 
```

SQL Fiddle 演示[在这里](http://sqlfiddle.com/#!3/d1051/17/0) 检查执行计划

![计划](../Images/44f8bbb0eff7c4e627d8ee7fb638438e.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T02:20:23.073

*执行此操作并*保持性能的正确方法需要对您的物理表设计进行一些修改。

如果您可以向每个包含指示符列的表添加一列并在该列上添加检查约束，则可以在查询中实现“分区”消除。

DDL：

```
create table table_a (
   c1 ...
  ,c2 ...
  ,c3 ...
  ,table_ind char(1) not null generated always as 'A'
  ,constraint ck_table_ind check (table_ind = 'A')
);

create table table_b (
   c1 ...
  ,c2 ...
  ,c3 ...
  ,table_ind char(1) not null generated always as 'B'
  ,constraint ck_table_ind check (table_ind = 'B')
);

create view v1 as (
    select * from table_a 
    union all 
    select * from table_b
); 
```

如果您执行查询`select c1,c2,c3 from v1 where table_ind = 'A'`，DB2 优化器将使用检查约束来识别没有任何行`table_b`可以匹配`table_ind = 'A'`谓词，因此它将完全从访问计划中删除该表。

在 DB2 for Linux/UNIX/Windows 支持 Range Partitioning 之前，已经使用（并且在某些情况下仍然如此）。您可以在 2002 年由一些 IBM DB2 开发人员撰写的这篇[研究论文 [PDF]](http://www.ibm.com/developerworks/data/library/techarticle/0202zuzarte/0202zuzarte.pdf)中阅读有关此技术的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T13:42:29.930

如果没有更多的上下文，很难准确地说出你想要什么，但也许这样的事情可以奏效？

```
DECLARE @TableName nvarchar(15);
DECLARE @Query nvarchar(50);

SELECT @TableName = YourField
FROM YourTable
WHERE ...

SET @Query = 'SELECT * FROM ' + @TableName

EXEC @Query 
```

语法可能会有所不同，具体取决于您使用的 RDBMS，更具体地说，您正在尝试完成什么，但可能是朝着正确方向的推动。

# c# - TimeZoneInfo - 每个用户还是系统范围？

> ID：13493817
> 
> 赞同：1
> 
> 时间：2012-11-21T12:58:28.693
> 
> 标签：c#, .net, timezone

我想弄清楚`System.TimeZoneInfo`是本地用户还是系统范围的设置？作为我登录的用户，我一直在修改我的本地时区，但是作为记录时区的系统在后台运行的服务似乎不断地记录旧时区。如果 TimeZoneInfo 是每个用户的，那么有没有办法可以查找所有用户的时区列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:08:54.897

我想你真的在谈论[`TimeZoneInfo.Local`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.local.aspx)? 我相信这是一个系统范围的设置*，但*它是基于每个进程缓存的。您可以调用[`TimeZoneInfo.ClearCachedData()`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.clearcacheddata.aspx)强制刷新 - 尽管显然您必须知道这样做:) 如果您正在运行需要进行更改的后台任务，您总是可以每 5 分钟调用一次...我认为这不会对性能造成巨大影响，如果您可以忍受它长达 5 分钟的陈旧状态。

（我觉得很奇怪，更改系统时区似乎不需要特权访问 - 至少在 Windows 7 中 - 但是嘿......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:08:44.277

TimeZone 是系统范围的，它不是用户范围的设置。但是您的问题是 .NET 缓存当前时区以重置缓存： `System.Globalization.CultureInfo.CurrentCulture.ClearCachedData();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T13:09:18.050

时区是系统设置。(HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation)。

# jquery - 在 jQuery 中访问会话

> ID：13493819
> 
> 赞同：1
> 
> 时间：2012-11-21T12:58:35.963
> 
> 标签：jquery, session

我可以在 jQuery 中设置会话变量吗？

我需要在 jQuery 的会话中存储一些数据，并且我还想通过 jQuery 检索这些数据。

有没有类似的

```
$.getSession.set("var","value"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:03:39.807

会话可在服务器端访问。但是，如果您愿意，您可以通过编写一个函数来访问您的会话，例如调用您的服务器的 ajax 请求并获取您想要的任何内容。

**编辑：**

我将使用 ASP.NET MVC 框架向您展示这一点，因为我非常喜欢它。对于其他框架的想法是相同的 - 只需向服务器询问会话。

因此，让它在服务器端如下所示 - 编写了简单的控制器和 2 个基本操作：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {            
        // store sample data
        Session["user"] = new { name = "Anton Chigurh", age = 42 };
        return View();
    }

    public JsonResult GetSessionValue(string key)
    {
        return Json(Session[key]);
    }        
} 
```

首先，您必须将某些内容存储到会话中，例如通过调用`Index`操作。接下来，调用`GetSessionValue`操作以检索先前存储的值。除非您禁用了应用程序的会话或浏览器中的 cookie，否则您应该获得正确的值。

如何获得价值？只需发送ajax请求：

1.  您可以编写将执行同步请求的 javascript 函数 - 实际上可以将您的浏览器冻结一段时间（取决于您用于某些计算的服务器时间消耗、网络基础设施条件等）：

    ```
    function getSessionValue(key) {
        var result;
        $.ajax({
            url: "/Home/GetSessionValue",
            type: 'POST',
            dataType: 'json',
            data: JSON.stringify({ key: key }),
            contentType: 'application/json; charset=utf-8',
            async: false
        }).done(function (data) {
            result = data;
        });
        return result;
    }

    // invoke
    var user = getSessionValue("user");
    console.log(user.name + ": " + user.age); 
    ```

2.  或异步版本，完成后调用回调：

    ```
    function getSessionValue(key, callback) {    
        $.ajax({
            url: "/Home/GetSessionValue",
            type: 'POST',
            dataType: 'json',
            data: JSON.stringify({ key: key }),
            contentType: 'application/json; charset=utf-8',        
        }).done(function (data) {
            callback(data);
        });
    }

    // invoke 
    getSessionValue("user", function(x) {
        console.log(x.name + ": " + x.age);
    }); 
    ```

顺便说一句：我使用了 json 序列化，因为这是我在将对象传入和传出服务器时更喜欢的方法。其他事情 - jQuery`done`事件只会在成功时触发。如果服务器端出现一些错误（例如：未捕获的异常），请求返回 http 500 并且不调用事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:02:49.757

如果您正在考虑使用 jQuery 处理客户端会话，则需要一个插件。

我能想到的一个是[jQuery Session Plugin](https://github.com/AlexChittock/JQuery-Session-Plugin)。

# c - 在c中组合多个整数

> ID：13493820
> 
> 赞同：0
> 
> 时间：2012-11-21T12:58:36.960
> 
> 标签：c

我有三个整数。外汇： `2012` `11` `21`

我想将它们转换为单个 int`20121121`

这可以做到吗？我已经尝试过`atoi()`没有结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T13:01:58.463

好吧，要直接回答您提出的问题，您可以这样做：

```
int combined = year*10000 + month*100 + day; 
```

但是您的方法很可能不是解决实际问题的最佳方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T13:10:06.983

如果您的问题是比较日期，则无需打包成单个 int 即可实现。

```
struct Date
{
  int day;
  int month;
  int year;
};

int Compare(const struct Date* d1, const struct Date* d2)
{
  if (d1->year < d2->year) return -1;
  if (d1->year > d2->year) return 1;

  if (d1->month < d2->month) return -1;
  if (d1->month > d2->month) return 1;

  if (d1->day < d2->day) return -1;
  if (d1->day > d2->day) return 1;

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T13:02:17.707

一种简单的方法是使用字符串格式来执行此操作。

```
#include <stdio.h>
#include <stdlib.h>

snprintf(buffer, sizeof buffer, "%04d%02d%02d", year, month, day);
int result = atoi(buffer); 
```

它效率不高，但可能很健壮。

# delphi - 在delphi画布上模拟高光笔

> ID：13493822
> 
> 赞同：5
> 
> 时间：2012-11-21T12:58:43.043
> 
> 标签：delphi, gdi

我有一个制作数字白板的项目。我已经用普通笔完成了，我必须模拟高光笔的工作。

```
if drawingNow then
  Image1.Canvas.LineTo(x, y); 
```

delphi中没有透明度设置。我`AlphaBlend`在 GDI [http://msdn.microsoft.com/en-us/library/dd183351.aspx中找到了函数](http://msdn.microsoft.com/en-us/library/dd183351.aspx)

但我不知道如何使用它来模拟高光笔。那么，如何利用这个功能来模拟高光笔呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T13:16:02.830

就像是

```
Canvas.Pen.Color := clYellow;
Canvas.Pen.Width := 12;
Canvas.Pen.Mode := pmMask;
Canvas.LineTo(sth, sth); 
```

也许？

![截屏](../Images/ad0cfea20416cbc8f81d568bf3ade85d.png)

自己试试：

```
procedure TForm4.FormPaint(Sender: TObject);
const
  S = 'Jag heter Andreas Rejbrand och bor ' 
    + 'i Katrineholm, 119 kilometer från Stockholm. Jag studerar för närvarande på '
    +'masterprogrammet i fysik (med lika mycket matematik) ' 
    + 'vid Linköpings universitet, där jag också arbetar som lärare i matematik vid '
    +'Matematiska institutionen (MAI). Bland mina största intressen återfinnes också '
    +'just matematiken och fysiken. Matematiken är '
    +'kanske människans viktigaste vetenskap, ty alla andra vetenskaper använder den. '
    +'I själva verket använder man matematik varje '
    +'gång man drar en slutsats. Mer abstrakt matematik än vad man finner i '
    +'vardagslivet har också möjliggjort all vår tekniska (och kulturella!) '
    +'utveckling. Naturvetenskapen, å sin sida, med fysiken i '
    +'spetsen, erbjuder en unik förståelse av hela universums natur - allt från '
    +'universums födelse, struktur och moderna innehåll i form av bl.'
    +'a. stjärnor, planeter och asteroider, ända ner till utvecklingen och funktionen '
    +'hos jordens alla organismer - från de allra första mikroorganismerna till '
    +'den mer komplexa '
    +'människokroppen. Naturvetenskapen ger, förutom förståelsens intellektuella '
    +'stimulans i sig, vardagsapplikationer till både nytta och nöje likväl som en '
    +'korrekt bild av hur allt i naturen förhåller sig, '
    +'vilket kan ge rationaliserade värderingar i samhället.';
var
  R: TRect;
  St: string;
begin
  St := S;
  R := ClientRect;
  Canvas.TextRect(R, St, [tfWordBreak]);
  Canvas.Pen.Color := clYellow;
  Canvas.Pen.Width := 12;
  Canvas.Pen.Mode := pmMask;
  Canvas.MoveTo(0, 20);
  Canvas.LineTo(ClientWidth - 8, 20);
end; 
```

# c# - RX 和异常处理

> ID：13493825
> 
> 赞同：10
> 
> 时间：2012-11-21T12:58:48.677
> 
> 标签：c#, .net, system.reactive

我正在将响应式扩展用于一种进程中的消息总线。实现非常简单。

注册看起来像

```
public IDisposable Register<T>(Action<T> action) where T : IMessage
{
   return this.subject
        .OfType<T>()
        .Subscribe(action);
} 
```

并简单地发送：

```
private void SendMessage(IMessage message)
    {
        this.subject.OnNext(message);
    } 
```

但是我现在对 RX 的异常行为有一些麻烦。在注册/订阅的操作中引发异常 - Observable“流”已损坏，将不再订阅。由于此消息总线用于应用程序的两个部分进行通信，因此我需要确保即使抛出意外异常也不会破坏这样的流。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T14:45:53.487

如果您需要确保流永远不会被异常中断，那么您需要为异常提供另一个通道。

这种行为并非完全出乎意料。从[`IObserver<T>`接口](http://msdn.microsoft.com/en-us/library/dd783449.aspx)的文档：

> OnError 方法，通常由提供程序调用以指示数据不可用、不可访问或损坏，或者提供程序遇到了其他错误情况。

鉴于此，如果流不可用、损坏等，您肯定希望流“出现故障”（这类似于 WCF 中出现故障的通道）；状态是不确定的，所以你不能依赖来自[`IObservable<T>`](http://msdn.microsoft.com/en-us/library/dd990377.aspx)实现的任何其他东西；那么为什么要期望会有更多的观察呢？

也就是说，您有一些选择：

**吞下异常**

您必须将`action`传递给`Register`函数的委托包装起来，如下所示：

```
public IDisposable Register<T>(Action<T> action) where T : IMessage
{
   return this.subject
        .OfType<T>()
        .Subscribe(t => {
            // Execute action
            try { action(t); }
            catch { }
         });
} 
```

当然，这可能是不可取的，因为您可能会丢弃影响程序的异常（或者，您可能*确切地*知道这里发生了什么，并想跳过它们），但它可以用于构建下一个解决方案。

**提供抛出异常时要采取的操作**

使用上述作为基础，您可以要求在[`Action<T, Exception>`](http://msdn.microsoft.com/en-us/library/bb549311.aspx)抛出异常时调用哪个。

```
public IDisposable Register<T>(Action<T> action, 
    Action<T, Exception> errorHandler) where T : IMessage
{
   return this.subject
        .OfType<T>()
        .Subscribe(t => {
            // Execute action
            try { action(t); }
            catch (Exception e) { errorHandler(t, e); }
         });
} 
```

现在，当从 抛出异常时`action`，它将被传递给您的异常处理程序，而不会中断流。

上面的内容很容易被重载以提供将吞没异常的行为（这同样可能会或可能不会满足您的目的）：

```
public IDisposable Register<T>(Action<T> action) where T : IMessage
{
    // Call the overload, don't do anything on
    // exception.
    return Register(action, (t, e) => { });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T20:58:54.603

基本上，您可以在 Subscribe 方法上提供 OnError 委托。我最近在我的博客上写了一个考虑这个问题的小教程（异常处理）：http: [//blog.andrei.rinea.ro/2013/06/01/bing-it-on-reactive-扩展故事代码和幻灯片/](http://blog.andrei.rinea.ro/2013/06/01/bing-it-on-reactive-extensions-story-code-and-slides/)

看看 OnError 方法。基本上你需要重新订阅，因为 Rx 框架是在发生错误时序列被破坏的前提下构建的。

# php - Drupal 7 中的相关下拉问题

> ID：13493827
> 
> 赞同：0
> 
> 时间：2012-11-21T12:59:02.623
> 
> 标签：php, drupal, drupal-7, drupal-fields

我在表单中使用了两个选择框：一个用于国家，一个用于州。我希望根据国家/地区框的选择显示状态框。

我还有两个数据库表：国家和州。country 的表结构是 { Country Code and Country Name }，states 表结构是 { Country Code and State Name }。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:42:46.787

看看[Hierarchical Select](http://drupal.org/project/hierarchical_select)模块。

[演示和展示](http://wimleers.com/demo/hierarchical-select)

# reporting-services - 手动下载报告并放入 ReportViewer 时共享数据集出错

> ID：13493828
> 
> 赞同：0
> 
> 时间：2012-11-21T12:59:04.603
> 
> 标签：reporting-services, dataset, sql-server-2008-r2, ssrs-2008-r2

我有一个引用服务器上共享数据集的服务器报告。如果我将 a 添加`ReportViewer`到页面并设置报表服务器 URL 和报表路径属性，它工作正常。

因为我需要查看报告的xml并进行一些预处理，所以我：-

1.  使用手动下载报告：`ReportingService2010.GetItemDefinition(path)`。然后我将其转换为`XDocument`.

2.  做我的预处理 - 这与数据集没有任何关系。

3.  使用以下命令将 xml 定义加载到报表查看器中：

    ```
    XDocument processedDocument;

    using (var sr = new StringReader(processedDocument.ToString()))  
    {  
         viewer.ServerReport.LoadReportDefinition(sr);  
    } 
    ```

当我尝试查看报告时，我在服务器错误日志中看到此错误：

> *Microsoft.ReportingServices.Diagnostics.Utilities.InternalCatalogException：
> 共享数据集定义流不存在。*

为了找到错误的症结所在，我完全删除了第 2 步，这样我所做的就是下载报告，转换为 xml，然后将 xml 加载到`ReportViewer`.

当数据集嵌入到报告中时，我没有遇到这个问题。

有什么想法吗？

**预计到达时间：**

如果我下载报告，转换为 XDocument，转换回 byte[] 然后使用 ReportingService2010.SetItemDefinition() 将报告保存在服务器上，它在 ReportViewer 中显示良好（指定路径时）。

这意味着问题不在 xml<->byte[] 转换中。当 ReportViewer 使用路径下载报告时，它必须对引用的共享数据集执行某些我没有执行的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:33:42.940

我有一个解决方法。

共享数据集的相对路径似乎有问题。我想我也会在服务器上引用共享图像时遇到同样的问题。

这是我打算做的：

*   下载报告。
*   进行预处理。
*   使用 ReportingServices2010.CreateCatalogueItem 将新报告保存回服务器~~在完全相同的位置~~，但使用临时名称。
*   使用 reportViewer.ServerReport.ReportPath 来引用新的临时报告。

**预计到达时间：**

实际上，因为 DataSet 路径引用总是从根开始，我认为您不必将报告存储在完全相同的位置。您可以创建一个 /Temp 文件夹，您可以轻松地定期清理该文件夹。

# objective-c - 分组 TableView 最后一个单元格边框

> ID：13493836
> 
> 赞同：0
> 
> 时间：2012-11-21T12:59:21.373
> 
> 标签：objective-c, ios, xcode

我无法摆脱最后一个单元格阴影/边框。看看图片，你就会明白我在说什么

![在此处输入图像描述](../Images/11b6c68aac3f61c274160e414e8a8103.png)

有谁知道如何摆脱它？我对单元格和表格视图有清晰的背景，但下面的边框仍然出现。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:06:04.730

这应该删除每个部分的白色底部边框`UITableView`：

```
[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleSingleLine]; 
```

# asp.net-mvc-4 - ASP.NET MVC 4 中的多个 HttpRoute

> ID：13493837
> 
> 赞同：0
> 
> 时间：2012-11-21T12:59:21.687
> 
> 标签：asp.net-mvc-4, routes, asp.net-web-api

我正在尝试在 Web API 中创建一个 RouteConfig，它允许以下模式：

**图案：**

```
/api/{controller}
/api/{controller}/{id} (int, optional)

/api/{controller}/{action}
/api/{controller}/{action}/{id} (int, optional) 
```

**用例：**

```
/api/profile/ (get all profiles)
/api/profile/13 (get profile number 13)

/api/profile/sendemail/ (send email to all profiles)
/api/profile/sendmail/13 (send email to profile number 13) 
```

**我正在尝试的是以下内容：**

```
routes.MapHttpRoute(
    name: "ControllerAndID",
    routeTemplate: "api/{controller}/{id}",
    defaults: null,
    constraints: new { id = @"^\d+$" } // Dekkar heiltölur eingöngu í id parameter
);

routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { action = "Get", id = RouteParameter.Optional }
); 
```

**我得到的错误是：**

> 找到与请求匹配的多个操作：\r\nMinarSidur.Models.DataTransfer.UserProfileDTO sendmail(System.String) on type MinarSidur.Controllers.ProfileController\r\nMinarSidur.Models.DataTransfer.UserProfileDTO sendpaycheck(System.String) on type MinarSidur.Controllers.ProfileController

你能帮我完成这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:34:42.223

您的异常实际上是在抱怨它们是`Profile`控制器上这两种方法之间的冲突：

*   发送工资支票（字符串）
*   发送邮件（字符串）

不是 Get 和 Get(?); 虽然这也是一个问题。

确实，在执行 RPC 操作以进行更改或触发操作时，您应该使用 POST 动词。通过这样做，您上面提到的路由问题应该得到解决。

**更新**

您是否考虑过以资源为中心的方法来解决您的问题？在所有情况下，资源都是“配置文件”，并且它似乎具有唯一的 id x。它似乎还有另外两个可能的唯一 ID 的电子邮件和 ssn？

如果这些是您可以接受的 URL

```
http://localhost/api/profile
http://localhost/api/profile/x
http://localhost/api/profile/?email=myemail@x.com
http://localhost/api/profile/?ssn=x 
```

你可以使用：

```
public class ProfileController : ApiController
{
    public string Get(int id)
    {
        return string.Format("http://localhost/api/profile/{0}", id);
    }

    public string Get([FromUri] string email = null, [FromUri] int? ssn = null)
    {
        if (!string.IsNullOrEmpty(email))
        {
            return string.Format("http://localhost/api/profile/?email={0}", email);
        }

        if (ssn.HasValue)
        {
            return string.Format("http://localhost/api/profile/?ssn={0}", ssn.Value);
        }

        return "http://localhost/api/profile";
    }
} 
```

仅使用标准 webapi 路由：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional } 
```

**但**

如果您确实想继续使用 /email 和 /ssn，您可能会遇到电子邮件问题......特别是“。” 在电子邮件地址中，这可能会混淆路由引擎...要使其正常工作，您必须在尾部加上斜杠，即`http://localhost/api/profile/email/me@me.com/`我认为您会发现`http://localhost/api/profile/email/me@me.com`不会工作。

这支持：

```
http://localhost/api/profile
http://localhost/api/profile/x
http://localhost/api/profile/email/myemail@x.com/
http://localhost/api/profile/ssn/x 
```

我会尝试这个并使用（注意。使用名称**rpcId**来区分路由）：

```
public class ProfileController : ApiController
{
    public string Get(int id)
    {
        return string.Format("http://localhost/api/profile/{0}", id);
    }

    public string Get()
    {
        return "http://localhost/api/profile";
    }

    [HttpGet]
    public string Ssn(int rpcId)
    {
        return string.Format("http://localhost/api/profile/ssn/{0}", rpcId);

    }

    [HttpGet]
    public string Email(string rpcId)
    {
        return string.Format("http://localhost/api/profile/email/{0}", rpcId);

    }
} 
```

我的路由将是：

```
 config.Routes.MapHttpRoute(
         name: "ProfileRestApi",
         routeTemplate: "api/profile/{id}",
         defaults: new { id = RouteParameter.Optional, Controller = "Profile" }
         );

        config.Routes.MapHttpRoute(
            name: "PrfileRpcApi",
            routeTemplate: "api/profile/{action}/{rpcId}",
            defaults: new { Controller = "Profile" }
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:43:05.643

规则重叠。路由中Id的验证会不会是很大的损失？您仍然可以在 Get 操作中将 Id 参数作为 int 参数。如果是这种情况，我认为您可以完全**删除 ControllerAndID**并使用与您的所有用例匹配的第二个。

# android - 在android中将日期选择器格式转换为数字

> ID：13493840
> 
> 赞同：0
> 
> 时间：2012-11-21T12:59:39.197
> 
> 标签：android, datepicker

我正在为我的应用程序使用日期选择器小部件。我的应用程序有两个输入值，格式分别为 01/01/2012 和 05/09/2012。

日期选择器小部件采用这种格式 dd-mm-yyyy**例如：- 01-jan-1990**

但我需要将上述格式转换为 01/01/1990。

这该怎么做？

请提出建议！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:08:03.563

就像是

```
DatePicker dp; 
... 
String result = dp.getDayOfMonth()+"/"+dp.getMonth()+"/"+dp.getYear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:49:27.713

请参阅[DatePicker](http://www.mkyong.com/android/android-date-picker-example/)的此示例。在那..有一种方法`onDateSet`是你得到3个整数..

只是连接它们`String dt = day+"/"+month+"/"+year`

# r - 从 mer 对象中提取观察的数量和随机效应的模式

> ID：13493841
> 
> 赞同：4
> 
> 时间：2012-11-21T12:59:45.913
> 
> 标签：r, random-effects, lmer

我有一个`mer`用调用 to 创建的对象`lmer()`。

我可以得到随机效应，`ranef()`但我也想为每个随机效应获得相应数量的观察 - 有没有简单的方法可以做到这一点？

**附加信息：**

我可能没有在上面说得很清楚。例如，如果我有一个简单的 2 级模型，其中患者聚集在医院内并随机截取医院，我想提取每家医院的随机效应以及每家医院`ranef()` *内*的患者数量。目前，我使用

```
ranef(fullmodel)[[1]] 
```

这给了我类似的东西：

```
 (Intercept)
ADE -0.108195883
BEJ -0.005761677
CIS  0.124129426
CMH  0.270879048
CSI  0.285344837
CUL  0.189308979 
```

我想得到类似的东西：

```
 (Intercept)  n
ADE -0.108195883  77
BEJ -0.005761677  171
CIS  0.124129426  201
CMH  0.270879048  39
CSI  0.285344837  171
CUL  0.189308979  131 
```

为此，我一直在使用

```
fullmodel <- glmer(.....+(1|hospital), data=dt1)

freqs <- as.data.frame(table(dt1$hospital))
freqs <- freqs[foo$Freq>0,] 
```

然后`cbind`将结果从`ranef(fullmodel)[[1]]`

然而，这似乎不复杂且容易出错。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T13:04:57.830

`ranef`返回对应于分组因子的矩阵列表，其中每个矩阵中的行对应于随机效应的观察值（因子水平），列对应于随机效应变量（截距、斜率等）。因此，获得观察次数的最简单方法是

```
sapply(ranef(model),nrow) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T13:10:03.177

此命令返回随机效应以及随机因子水平的频率：

```
lapply(names(ranef(model)),
       function(x) cbind(ranef(model)[[x]], table(model.frame(model)[[x]]))) 
```

# c# - 如何在 C# 中获取 Web 服务自己的端点？

> ID：13493847
> 
> 赞同：3
> 
> 时间：2012-11-21T12:59:54.977
> 
> 标签：c#, web-services, url, endpoint

我有一个 C# 网络服务，例如：

```
namespace MyProject
{
  #region "Frontend"

  [WebService(Name="MyWebservice")]
  [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
  [System.ComponentModel.ToolboxItem(false)]
  public class MyWsClass : System.Web.Services.WebService
  {
     private static readonly IRegisterer reg = new SelfRegisterInDatabase();

     private MyWsClass() 
     {
       // tell who I am to a database
       MyWsClass.reg.SelfRegister();
     }

     // A service I expose to the users
     [WebMethod]
     public object MyMethod(object in)
     {
       // do some work
       return new Object();
     }
  }

  #endregion

  #region "Backend"

  public interface IRegisterer
  {
    public void SelfRegister();
  }

  // Herein lies my question:
  public class SelfRegisterInDatabase : IRegisterer
  {
    private static volatile bool IsRegistered = false;

    public void SelfRegister()
    {
      if(!IsRegistered)
      {
        // Expecting something like: "http://THEHOST:THEPORT/MyWebservice.aspx?WSDL"
        // In principle, the variable part is "THEHOST:THEPORT".
        string EndpointUrl = 
"HOW_DO_I_GET_WEBSERVICE_ENDPOINT_URL_HERE???"
        ;

        // 1) open a Database connection;
        // 2) insert new entry for this EndpointUrl string if doesn't exist;
        // 3) and close DB connection
        SelfRegisterInDatabase.IsRegistered = true;
      }
      return;
    }
  }
  #endregion
} 
```

我想知道如何动态读取 web 服务自己的端点，以便我可以让它在数据库中注册（例如，SQL Server——实际的`INSERT`ing 不是我在这里询问的内容）。我应该使用哪种方法/配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:13:44.153

试试这个来获取整个端点字符串：

```
WebOperationContext.Current.IncomingRequest.UriTemplateMatch.RequestUri.OriginalString 
```

你需要

```
using System.ServiceModel.Web; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T14:25:15.607

如果您想要调用的完整端点地址（例如：[http://your_webservice/your_resource/id/123](http://your_webservice/your_resource/id/123)）：

```
string OriginalEndpoint = HttpContext.Current.Request.Url.OriginalString; 
```

如果您不想要资源部分（例如：[http://your_webservice](http://your_webservice)），您可以用空字符串替换路径的本地部分：

```
string ServiceEndpoint = HttpContext.Current.Request.Url.OriginalString.Replace(HttpContext.Current.Request.Url.LocalPath, ""); 
```

你一定是`using System.Web.HttpContext`

# c# - C# 字体图形：如何在 C# 中计算正确的基线位置以正确渲染 Java 中的 y 坐标

> ID：13493849
> 
> 赞同：3
> 
> 时间：2012-11-21T12:59:59.330
> 
> 标签：c#, java, graphics, fonts, baseline

我从 Java 后端获取文本的 x 和 y 坐标。现在我想在 C# (Graphics.DrawString) 中绘制该字体，就像 Java 那样。为此，我必须计算基线。我有一个代码使它适合某些字体，但不能正确呈现其他字体。

```
SizeF size = graphics.MeasureString(str, font);                                  
int descent = font.FontFamily.GetCellDescent(font.Style);
float factor = font.Size / font.FontFamily.GetEmHeight(font.Style);
float leadingCalc =  (ascent * factor + descent * factor) - emHeight * factor;
graphics.DrawString(str + "", font, brush, x, y - font.Height + descent * factor + leadingCalc); 
```

问题是，是否有人知道计算基线更精确或更好的方法？

# jquery - 使用 jquery 在跨度上单击

> ID：13493850
> 
> 赞同：3
> 
> 时间：2012-11-21T13:00:00.887
> 
> 标签：jquery

我有以下 HTML：

```
<a title="Prev" data-event="click" data-handler="prev" class="ui-datepicker-prev ui-corner-all">
       <span class="ui-icon ui-icon-circle-triangle-w">Prev</span>
   </a> 
```

一旦使用 jquery 单击跨度，我需要更改“上一个”。

这是我的代码：

```
$(".ui-icon.ui-icon-circle-triangle-w").click(function(){ 
    $(".ui-icon.ui-icon-circle-triangle-w").html('«');         
}); 
```

但它不起作用，为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T13:03:58.510

也许您的代码执行得太早了。当你的代码被执行时，你的 html 元素就不存在了。所以`$(".ui-icon.ui-icon-circle-triangle-w")`只是空的。

你可以使用这个：

```
$("body").on('click', ".ui-icon.ui-icon-circle-triangle-w", function(){ 
    $(this).html('«');         
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T13:35:17.393

给你`<span>`上课：

```
<a title="Prev" data-event="click" data-handler="prev" class="ui-datepicker-prev ui-corner-all">
       <span class="prevSpan ui-icon ui-icon-circle-triangle-w">Prev</span></a> 
```

然后通过 jQuery 使用它：

```
$(".prevSpan").text("«"); 
```

您需要单击事件的事件处理程序，`.on()`
最后使用代码：

```
$(document).ready(function(){
  $('.prevSpan').on('click',function(){
    $(".prevSpan").text("«");
  });
}); 
```

.on() 事件处理程序的文档[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-19T21:49:06.330

```
$(".ui-icon .ui-icon-circle-triangle-w").click(function(){ 
    $(this).html('«');         
}); 
```

# perl - 如何将数组值与不同目录中的不同文件进行比较？

> ID：13493854
> 
> 赞同：0
> 
> 时间：2012-11-21T13:00:13.093
> 
> 标签：perl

```
#!/usr/bin/perl
use strict;
use warnings;
use warnings;
use 5.010;

my @names = ("RD", "HD", "MP");
my $flag = 0;
my $filename = 'Sample.txt';

if (open(my $fh, '<', $filename))
{
    while (my $row = <$fh>) 
    {
        foreach my $i (0 .. $#names) 
        {
            if( scalar $row =~ / \G (.*?) ($names[$i]) /xg )
            {
                $flag=1;
            }
        }

    }

    if( $flag ==1)
    {
       say $filename;
    }

    $flag=0;
} 
```

在这里，我从一个文件中读取内容并与数组值进行比较，如果文件内容与数组值匹配，我只显示文件。以同样的方式，我如何从不同的目录访问不同的文件并将数组值与相同的值进行比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:26:32.847

**问：**如何访问不同的文件？
**答：**通过指定不同的文件名。

* * *

顺便说一句：如果您在 Perl 中使用标志进行循环控制，那么您做错了。您可以指定这是循环的`last`迭代（在 C: *break*中），或者您要开始`next`迭代。您可以标记循环，以便您可以一次跳出尽可能多的循环：

```
#!/usr/bin/perl
use 5.010; use warnings;

my @names = qw(RD HD MP);

# unpack command line arguments
my ($filename) = @ARGV;

open my $fh, "<", $filename or die "Oh noes, $filename is bad: $!";

LINE:
while (my $line = <$fh>) {
    NAME:
    foreach my $name (@names) {
        if ($line =~ /\Q$name\E/) { # \QUOT\E the $name to escape everything
            say "$filename contains $name";
            last LINE;
        }
    }
} 
```

其他亮点：

*   按预期使用`foreach`循环，并且
*   删除（在这种情况下）毫无意义的`\G`断言

`perl script.pl Sample.txt`然后，您可以以或或其他方式执行脚本`perl script.pl ../another.dir/foo.bar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:07:03.953

您可以在 Perl 5.10 中使用 ~~ 运算符。不要忘记切掉尾随的空格。

```
#!/usr/bin/perl

use 5.010;
use strict;
use warnings;

my @names = ('RD', 'HD', 'MP');

my $other_dir = '/tmp';
my $filename  = 'Sample.txt';

if ( open( my $fh, '<', "$other_dir/$filename" ) ) {

    ROW:
    while ( my $row = <$fh> ) {

        chomp $row; # remove trailing \n

        if ( $row ~~ @names ) {

            say $filename;
            last ROW;
        }
    }
}

close $fh; 
```

# gdb - 为什么在远程管道模式下使用 OpenOCD 时 GDB 会挂起？

> ID：13493855
> 
> 赞同：0
> 
> 时间：2012-11-21T13:00:15.133
> 
> 标签：gdb, openocd

我正在使用 GDB 和 OpenOCD 在 Windows 上的 STM32F4DISCOVERY 板上调试一个简单的程序。这在单独启动 OpenOCD 并使用 TCP/IP 连接到它时工作正常，如下所示：

```
target remote localhost:3333 
```

完成后，我可以正常关闭 GDB `quit`。但是，我想在“远程管道”模式下使用 GDB，而不是需要手动启动和停止 OpenOCD。这对我来说似乎是一个有点理想的配置。但是，当我这样做时，我无法退出 GDB，因为当我尝试退出时它会挂起。

OpenOCD 日志文件显示 GDB 连接已断开：

```
Info : dropped 'gdb' connection 
```

但是 GDB 永远不会退出：

```
(gdb) quit
A debugging session is active.

        Inferior 1 [Remote target] will be detached.

Quit anyway? (y or n) y
Detaching from program: yagarto_sample.elf, Remote target
Ending remote debugging. 
```

该`disconnect`命令同样挂起，永远不会返回。甚至 Ctrl-C 也不会唤醒 GDB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:04:57.740

事实证明，OpenOCD 中存在与 GDB 所做更改相关的错误。[这里](https://forum.sparkfun.com/viewtopic.php?f=18&t=34112)有一点细节，并且已经提交了一个[补丁，并且提供了一个解决方法：](http://openocd.zylin.com/#/c/993/)

将此添加到您的 cfg：

```
$_TARGETNAME configure -event gdb-detach { shutdown } 
```

我测试了这个解决方法，它确实有效，但最后，管道模式在 Windows 上太慢了，我选择使用 TCP，尽管它不太方便。

# mysql - ASP 中来自 MYSQL 的希伯来语编码提供？

> ID：13493866
> 
> 赞同：1
> 
> 时间：2012-11-21T13:01:33.847
> 
> 标签：mysql, asp-classic, odbc

我已经为使用经典 ASP 和 MySQL 数据库作为后端的客户端构建了一个站点。在测试服务器上一切正常，但是当我将站点转移到实时服务器时，从数据库中提取的所有希伯来语数据都是乱码......

数据库设置为 UTF-8。我已经用 phpmyadmin 检查了数据库内容，希伯来语是可读的。

看起来问题出在 ODBC 驱动程序上。在我的服务器上，我正在使用 ODBC 5.1，而在实时服务器上，他们仍在使用 3.51... 显然，希伯来语是这个 odbc 驱动程序的问题，但托管公司拒绝更新，即使它是以色列托管公司... .

我的数据库连接字符串如下所示：

> “DRIVER={MySQL ODBC 3.51 驱动程序}；SERVER=localhost；DATABASE=100298270_dbname；UID=用户名；PASSWORD=pass；OPTION=0；charset=utf8；”

所以，经过几个小时的阅读，我找到了以下解决方案，但都没有帮助：

1.  在其他查询之前在数据库上运行此查询：

    > 设置名称 utf8"

2.  运行所有这些查询：

    调用 SqlQuery("SET character_set_client=utf8") 调用 SqlQuery("SET character_set_connection=utf8") 调用 SqlQuery("SET character_set_database=utf8") 调用 SqlQuery("SET character_set_results=utf8") 调用 SqlQuery("SET character_set_server=utf8")调用 SqlQuery("SET NAMES utf8")

但是当我运行它们时似乎没有任何改变'我试图实现这个解决方案[MySQL ODBC 3.51 驱动程序 UTF-8 编码](https://stackoverflow.com/questions/1000636/mysql-odbc-3-51-driver-utf-8-encoding)，但由于我只能访问 PLESK 控制面板进行托管，我只能创建一个默认的 DSN 连接。

我与托管公司的技术支持人员进行了交谈，他们说其他 ASP 站点工作正常（即使 3.5 ODBC 驱动程序不支持 unicode 是一个已知问题），所以我必须自己找到解决方案......我被告知使用“无 DSN 连接...

有人对我有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:32:48.123

您还必须更改 CodePage，因为默认情况下 ASP 将使用 ANSI 代码页。

[http://msdn.microsoft.com/en-us/library/ms524628(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524628(v=vs.90).aspx)

您还需要确保您的字符集设置为 UTF-8

```
Response.Codepage = 65001  'Forces ASP to use UTF-8 for string encoding
Response.Charset = "UTF-8" 'Sets charset variable of content type response header
Response.LCID = 1037 'Hebrew Locale ID 
```

您可能还需要添加 HTML 元标记以强制浏览器使用 UTF-8。

```
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" /> 
```

还可以尝试将其附加到每个查询的开头：

```
SET NAMES HEBREW 
```

# android - 如何在视图中设置背景？

> ID：13493867
> 
> 赞同：1
> 
> 时间：2012-11-21T13:01:34.007
> 
> 标签：android, android-relativelayout

我无法在 RelativeLayout 的左侧获得绿线。如果我使用Linearlayout，就可以了。有谁能够帮助我？

```
<RelativeLayout
                android:id="@+id/layout1"
                android:onClick="onLayoutClick"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:clickable="true">

                <View
                    android:id="@+id/colorline"
                    android:layout_width="5dp"
                    android:layout_height="match_parent"
                    android:layout_alignParentLeft="true"
                    android:background="@color/green" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="25dp"
                    android:text="@string/string1"
                    android:textColor="@color/white"
                    android:textSize="50dp"
                    android:textStyle="italic"
                    android:layout_toRightOf="@id/colorline"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:04:31.937

由于某种原因，您不能直接对视图执行此操作。而是用 ImageView 替换它，它应该可以正常工作。

取而代之的是，

```
 <View
                android:id="@+id/colorline"
                android:layout_width="5dp"
                android:layout_height="match_parent"
                android:layout_alignParentLeft="true"
                android:background="@color/green" /> 
```

添加这个，

```
 <ImageView
                android:id="@+id/colorline"
                android:layout_width="5dp"
                android:layout_height="match_parent"
                android:layout_alignParentLeft="true"
                android:background="@color/green" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:04:54.160

使用以下几行。

```
 <View
                    android:id="@+id/colorline"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_alignParentLeft="true"
                      android:background="@color/green" /> 
```

希望这会帮助你 。...

在 strings.xml 中使用以下行

```
 <color name="white">#FFFFFF</color>
 <color name="yellow">#FFFF00</color>
 <color name="fuchsia">#FF00FF</color>
 <color name="red">#FF0000</color>
 <color name="silver">#C0C0C0</color>
 <color name="gray">#808080</color>
 <color name="olive">#808000</color>
 <color name="purple">#800080</color>
 <color name="maroon">#800000</color>
 <color name="aqua">#00FFFF</color>
 <color name="lime">#00FF00</color>
 <color name="teal">#008080</color>
 <color name="green">#008000</color>
 <color name="blue">#0000FF</color> 
```

你会得到颜色... #000080 #000000

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:13:55.800

在 RelativeLayout 中添加 xmlns:android="http://schemas.android.com/apk/res/android"

# ms-access - 从访问到 MSSQL 的 SSIS 数据流

> ID：13493869
> 
> 赞同：0
> 
> 时间：2012-11-21T13:01:47.237
> 
> 标签：ms-access, ssis

我有一个简单的 DataFlow，其中包含两个对象，源是 mdb 文件，目标是 MSSQL 数据库。

这个想法是将数据从一个迁移到另一个。

问题是数据是从 Access 查询中提取的，一列有大约 1000 个字符，在 SSIS 的高级属性中，外部列的默认长度为 255，所以当我执行任务时它会尝试截断它。不能在截断时禁用抛出错误，并且无法修改外部列的长度，它会抛出有关元数据的错误。

首先，任何人都可以解释为什么？

其次，我需要一个解决方案，而且我需要它快，因为它有点让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:12:36.647

会出现这种问题，因为 ssis 任务通过检查前 100(afaik) 行来“猜测”列的长度。因此，如果从 1 到 100 的所有行的长度为 10，并且第 101 行的长度为 11，则任务将失败，因为长度被“猜测”为 10。

修改会引发错误，因为您已`validateExternalMetadata`设置为`true`. 要解决此问题，请转到`advanced options`您的导入任务（访问）并将值设置为`false`. 这意味着，该任务将接受您输入的修改值而不检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:30:17.157

您是否尝试使用**SSIS 导入和导出向导**从 BI 开发环境中导入数据？这是 MsAccess 最简单的方法，因为这不仅可以导入数据，还可以保存包。如果您在导入过程中遇到错误（使用向导），请将其发布，因为这有助于进一步调查。另外，正如@stb 建议的那样，尝试让第一条记录超过 1000 个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:00:50.577

Access 支持与 MSSQL 中的视图等效的查询。列大小不是通过查看几个结果来定义的，而是通过列数据类型的默认列长度来定义的。

我创建了另一个具有所需数据类型的表，并且在将数据流放入包中之前​​创建了 2 个 sql 脚本：一个用于删除表中的所有数据，一个用于对表执行查询，将其视为临时表。

然后针对这个伪临时表执行实际的数据流。

这解决了我的问题。

# ruby - Rhomobile 和服务器无法加载 Nokogiri

> ID：13493873
> 
> 赞同：1
> 
> 时间：2012-11-21T13:02:05.523
> 
> 标签：ruby, rhomobile, rhodes

我正在使用 RhoMobile 做一个小项目，我在 Windows 7 上使用 RhoStudio。我的 build.yml 有：

```
extensions:
  - json
  - nokogiri 
```

在我的控制器中，我有：

```
require 'nokogiri' 
```

我收到此错误“服务器错误，错误：没有要加载的文件--nokogiri”，知道吗？

* * *

我在本地主机工作。我已经安装了 Nokogiri Gems，我可以运行这个脚本，例如：

```
require 'nokogiri'

html_doc = Nokogiri::HTML("<html><body><h1>HELLO WORLD!</h1></body></html>")

html_doc.css('h1') 
```

当我想使用 Rhomobile 和 Nokogiri 时出现问题，我需要在 Rhomobile 中解析 HTML，但我不能使用 Rhoconnect。我正在尝试一些 Gems：Hpricot、libxml-ruby、Scrapi、Nokogiri。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:31:45.267

您的服务器没有安装 Nokogiri gem，或者您的 Ruby 路径不是您认为的那样，并且脚本在不同的 Ruby 实例下执行。

# wpf - 根据WPF中的文本框文本过滤列表框

> ID：13493874
> 
> 赞同：1
> 
> 时间：2012-11-21T13:02:14.253
> 
> 标签：wpf, vb.net, linq, filtering

我想知道我是否可以得到一些帮助。

我正在使用包含 2 个表（dbo.Project 和 dbo.Materials）和 collectionview 的数据集将数据显示到列表框中。
我需要通过使用两个文本框按项目中使用的材料过滤数据集，并将项目名称返回到列表框中。到目前为止，我已经将它加载到了它的加载位置，并且我的列表框正确地填充了项目列表，但是文本框没有过滤。

任何有关如何修复它的建议将不胜感激。

我到目前为止的代码是：

```
Imports System.Windows.Data
Imports System.Windows

Public Class SearchMe
    Private mds As New MaterialsDataSet
    Private pta As New MaterialsDataSetTableAdapters.ProjectTableAdapter
    Private mta As New MaterialsDataSetTableAdapters.MaterialsTableAdapter
    Private tam As New MaterialsDataSetTableAdapters.TableAdapterManager
    Private view As CollectionView

    Private Sub SearchMe_Loaded(sender As Object, e As System.Windows.RoutedEventArgs) Handles Me.Loaded
        Me.tam.ProjectTableAdapter = pta
        Me.tam.MaterialsTableAdapter = mta

        Me.pta.Fill(Me.mds.Project)
        Me.mta.Fill(Me.mds.Materials)

        Me.DataContext = Me.mds.Project
        Me.view = CollectionViewSource.GetDefaultView(Me.mds.Project)
    End Sub

    Private Sub btnSearch_Click(sender As Object, e As System.Windows.RoutedEventArgs) Handles btnSearch.Click
        If Material2.Text.Length > 0 Then
            Dim query = From p In mds.Project
                        Join m In mds.Materials On p.ProjectID Equals m.ProjectID
                        Where m.Material = Me.Material2.Text.ToString
                        Select p
        Else
            Dim query = From p In mds.Project
                        Join m In mds.Materials On p.ProjectID Equals m.ProjectID
                        Where m.Material = Me.Material1.Text
                        Select p.ProjectName

            Me.DataContext = query
        End If
    End Sub

    Private Sub btnReset_Click(sender As Object, e As System.Windows.RoutedEventArgs) Handles btnReset.Click
        Me.DataContext = Nothing
    End Sub

    Private Sub Material1_TextChanged(sender As Object, e As System.Windows.Controls.TextChangedEventArgs) Handles Material1.TextChanged

    End Sub

    Private Sub Material2_TextChanged(sender As Object, e As System.Windows.Controls.TextChangedEventArgs) Handles Material2.TextChanged

    End Sub
End Class 
```

和 XAML：

```
<Window x:Class="SearchMe"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="SearchMe" Height="500" Width="750" WindowStartupLocation="CenterScreen" ShowInTaskbar="False" ShowActivated="False" ResizeMode="NoResize">
<Grid>
    <ListBox HorizontalAlignment="Right" Margin="0,45,46,60" Name="MyLists" Width="346" BorderThickness="3" BorderBrush="#FF860909"
             IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding}"   
             DisplayMemberPath="ProjectName"/>
    <Button Content="Search" Height="23" HorizontalAlignment="Left" Margin="403,417,0,0" Name="btnSearch" VerticalAlignment="Top" Width="75" />
    <Button Content="Reset" Height="23" HorizontalAlignment="Left" Margin="556,417,0,0" Name="btnReset" VerticalAlignment="Top" Width="75" />
    <TextBox Height="30" HorizontalAlignment="Left" Margin="29,87,0,0" Name="Material1" VerticalAlignment="Top" Width="269" />
    <TextBox Height="30" HorizontalAlignment="Left" Margin="29,192,0,0" Name="Material2" VerticalAlignment="Top" Width="269" />
</Grid> 
```

任何和所有输入表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:24:22.920

这里可能有很多潜在的问题，我没有时间详细浏览你的代码。但是您可以尝试在单击事件中替换 DataContext 后在“Me.view”上调用 Refresh 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:23:52.887

好的，这对我有用...在 btn_Search Click 事件下：

```
Dim query = From p In mds.Project
                Join m In mds.Materials On p.ProjectID Equals m.ProjectID
                Where m.Materia.ToLower().Contain(m.Material1.Text())
                Select new with {.ProjectName = p.ProjectName} 
```

希望这可以帮助任何人。

# symfony1 - 如何在 symfony 1.4 中创建分组表单字段

> ID：13493884
> 
> 赞同：0
> 
> 时间：2012-11-21T13:02:45.497
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我想对表单字段进行分组，例如字段集或简单地由 div 包围。我的表格需要如下所示

```
<form>
<div class="step-1">
    Field 1
    Field 2
</div>
<div class="step-2">
    Field 3
    Field 4
</div>
</form> 
```

图形示例：

![](../Images/25883da9396be9ccd543524ee15c26d9.png)

编辑：添加表单类以供参考！

```
class ProfileForm extends BaseProfileForm
{
  public function configure()
  {
    ..... // other widget configuration
    $this->embedForm('media', new MediaForm());
  }
} 
```

我怎样才能以 symfony 的形式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:58:44.433

例如：

在行动：

```
$this->form = new MyCoolForm() 
```

在模板中：

```
<form name="form name" id="MyCoolForm" action="<?php echo url_for('action_url') ?>" method="post" <?php $form->isMultipart() and print 'enctype="multipart/form-data" ' ?>>

 <?php echo $form['name']->render() ?>
 <?php echo $form['name']->renderError(); ?>

 <fieldset>
  <legend>Ppassword:</legend>
 <?php echo $form['password']->render() ?>
 <?php echo $form['password']->renderError(); ?>

 <?php echo $form['password_again']->render() ?>
 <?php echo $form['password_again']->renderError(); ?>
<fieldset>

 <?php echo $form->renderHiddenFields(); ?>
</form> 
```

ETC...

# jsf - 将操作方法 名称和参数作为参数传递给 facelets 组件

> ID：13493887
> 
> 赞同：1
> 
> 时间：2012-11-21T13:02:55.117
> 
> 标签：jsf, facelets, composite-component

我知道将方法名称作为参数名称传递应该以这种方式完成：

```
itemBean="#{bean}"
itemAction="someMethod" 
```

在组件中：

```
action="#{itemBean[itemAction]}" 
```

而且我也知道如果方法名称不是变量，我可以传递参数，例如显示方法，例如：

```
parameter = "Hello World" 
```

在组件中：

```
action="#{itembean.display( parameter )}" 
```

但我不能同时做这两个

我认为表达式`action="#{itemBean[method](parameter)}"`会完成这项工作，但它给出了 parsig 错误。

有任何想法吗？

# sql - 排序有序组

> ID：13493888
> 
> 赞同：1
> 
> 时间：2012-11-21T13:02:56.407
> 
> 标签：sql, sql-server, group-by

我有一个类似于以下的表结构：

```
ID  |DateUploaded|FamilyCode|
1   |01/01/2010  |FC0001    |
2   |01/01/2011  |FC0001    |
3   |01/01/2012  |FC0001    |
4   |01/08/2012  |FC0002    |
5   |01/01/2012  |FC0002    |
6   |01/08/2012  |FC0002    |
7   |01/01/2012  |FC0002    |
8   |01/08/2012  |FC0003    |
9   |01/07/2012  |FC0003    | 
```

我有一个选择，它具有以下 ORDER BY：

```
 ORDER BY FamilyCode, DateUploaded desc 
```

这会对结果进行排序，以便将它们有效地分组到族中，并且族的元素按 DateReceived 排序。然而，现在需要的是按顺序显示的家庭，因此最近 DateReceived 的家庭排在最前面。

有谁知道我怎么能做到这一点？

感谢任何建议在其中添加 desc 的人，我实际上已经得到了这个，但这不是我想要的。

在上表中，我希望所有结果返回为：

```
ID  |DateUploaded|FamilyCode|
4   |01/08/2012  |FC0002    |
6   |01/07/2012  |FC0002    |
5   |01/01/2012  |FC0002    |
7   |01/01/2012  |FC0002    |
8   |01/08/2012  |FC0003    |
9   |01/07/2012  |FC0003    |
3   |01/01/2012  |FC0001    |
2   |01/01/2011  |FC0001    | 
1   |01/01/2010  |FC0001    | 
```

因此，结果被分组到族中，最新上传日期的族在顶部，组内的结果按日期排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:40:09.903

根据最近的日期，我怀疑您希望所有家庭聚在一起。为此，您需要添加为每个家庭上传的最大日期。这是一种方法：

```
select FamilyCode, DateUploaded, . . .
from (select t.*,
             max(DateUploaded) over (parition by FamilyCode) as maxDateUploaded
      from t
     ) t
order by maxDateUploaded, FamilyCode 
```

请注意，order by 仍然包括 FamilyCode。这很重要，因为多个家庭可能共享相同的最大日期，而您仍然希望将这些家庭组合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:05:45.060

```
ORDER BY FamilyCode, DateUploaded DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:06:05.020

按 desc 使用顺序

```
order by dateuploaded desc,familycode 
```

# android - android自定义imageview，右边有textview

> ID：13493892
> 
> 赞同：0
> 
> 时间：2012-11-21T13:03:23.317
> 
> 标签：android, components, imageview, android-edittext

我目前正在编写自定义 ImageView。我实际上把这个 imageview 变成了一个多状态按钮。

就我而言，该按钮具有三种状态，回答是，回答否和未回答。我绝对不想使用单选组/按钮。

我有 imageview 的基本设置。它具有 onclick 功能，可以根据状态正确更改图像。现在它只是一个带叉号的复选框、一个空复选框和一个带勾号的复选框。

我想要的是，当状态发生变化（单击图像）时，我想要文本，它应该始终存在，并且永远不会位于图像视图的顶部。也改变它的价值。我希望能够调用类似于 customCompInstance.getText(); 的方法 customCompInstance.getText();

我的想法是，自定义 imageview 类应该有一个 TextView 成员，但我不知道如何将它放在左侧，与 imageview 水平对齐。

在 xml 中仅使用两个不同的元素不是一种选择。

添加一个textview并将其放置在imageview的右侧是正确的解决方案，如果没有，你有什么建议，如果是，请给我一些关于如何实际实现这一点的提示。

我的课程的简化版本：

```
public class AnswerImageView extends ImageView {
    private AnswerState mSelectionState;

    /**
     * @param context
     */
    public AnswerImageView(Context context)
    {
        super(context);
        // TODO Auto-generated constructor stub
        setImageResource(R.drawable.answer_none);
        setTag(R.drawable.answer_none);
        mSelectionState = AnswerState.ANSWER_NONE;
    }

    /**
     * @param context
     * @param attrs
     */
    public AnswerImageView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        // TODO Auto-generated constructor stub
        setImageResource(R.drawable.answer_none);
        setTag(R.drawable.answer_none);
        mSelectionState = AnswerState.ANSWER_NONE;
    }

    /**
     * @param context
     * @param attrs
     * @param defStyle
     */
    public AnswerImageView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
        setImageResource(R.drawable.answer_none);
        setTag(R.drawable.answer_none);
        mSelectionState = AnswerState.ANSWER_NONE;
    }

    public AnswerState getSelectionState() {
        return mSelectionState;
    }

    public void setSelectionState(AnswerState selectionState) {
        this.mSelectionState = selectionState;
    }
} 
```

我有一种对点击做出反应的方法，一切正常。***我纯粹是想在这个组件中添加一个文本视图。本质上将两个组件合二为一。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:27:26.433

`TextView`您应该从而不是扩展`ImageView`并查看方法`TextView.setCompoundDrawableXXX`。[这](https://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawables%28android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable%29)是文档的链接。

# c# - 使用 C# 在 Unity3d 中停止线程

> ID：13493893
> 
> 赞同：0
> 
> 时间：2012-11-21T13:03:26.353
> 
> 标签：c#, iphone, ios, xcode, unity3d

我正在 Unity 3d 中做一个应用程序并与 iPhone 集成，我正在统一做一些图像识别任务，当用户点击共享按钮时，它会加载 iPhone 本机任务，如加载 actionsheet 和 uialertview。当我展示一些模型视图控制器然后我的应用程序在 iphone 中崩溃时，我正在主线程上执行此操作。我不知道我在哪里做错了，但我想如果我会停止一些统一的线程可能会有所帮助，或者如果你们有任何建议，请帮助我。这对我来说会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:28:20.083

停止 Unity 线程听起来不是一个好主意。在我看来，本机代码的集成方式有问题。也许这个问题和里面的链接可以指导你完成这个任务：

[Unity3D 与 UIView 的集成](https://stackoverflow.com/questions/8336250/unity3d-integration-with-uiview)

# c# - 防止窗口跨越多个监视器

> ID：13493900
> 
> 赞同：2
> 
> 时间：2012-11-21T13:03:52.753
> 
> 标签：c#, wpf, visual-studio-2010, .net-4.0

有没有什么简单的方法可以防止 WPF 窗口在双显示器设置中跨越多个显示器？“简单”是指不编写测量显示器大小并为窗口分配宽度的代码隐藏。

如果窗口仅使用当前监视器上可用的部分（其中“当前”表示具有当前焦点窗口的监视器），我会更喜欢。如果用户调整窗口大小以使其覆盖两个监视器是可以的，但是在窗口打开时它应该停留在单个监视器上。

这是一个例子：

MainWindow.xaml：

```
<Window x:Class="MultiMonitorTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Open Window" 
                Height="70" 
                HorizontalAlignment="Left" 
                Margin="165,147,0,0" 
                Name="button1" 
                VerticalAlignment="Top" 
                Width="179" 
                Click="button1_Click" />
    </Grid>
</Window> 
```

MainWINdow.xaml.cs：

```
using System.Windows;

namespace MultiMonitorTest
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            Window2 win = new Window2();
            win.ShowDialog();
        }
    }
} 
```

Window2.xaml：

```
<Window x:Class="MultiMonitorTest.Window2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window2" 
        SizeToContent="WidthAndHeight">
    <Grid>
        <TextBox x:Name="txt" 
                 Margin="10" 
                 Background="LightPink" 
                 AcceptsTab="True" 
                 AcceptsReturn="True" 
                 TextWrapping="Wrap"/>
    </Grid>
</Window> 
```

Window2.xaml.cs：

```
using System.Windows;

namespace MultiMonitorTest
{
    public partial class Window2 : Window
    {
        public Window2()
        {
            InitializeComponent();

            txt.Text = new string('x', 1000);
        }
    }
} 
```

单击“打开窗口”按钮时，新窗口将在两个监视器上打开。如果 Window2 完全停留在当前监视器中，我会更喜欢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:53:17.040

好吧，您可以在第二个窗口上使用与父窗口相同的宽度、高度（可能还有位置）。如果没有额外的代码，我认为你不能真正强制窗口跨越两个显示器。但是，您可以使用有限的代码从一个而不是两个启动它。

```
WindowStartupLocation = System.Windows.WindowStartupLocation.CenterScreen; // in your Window Xaml

//and combine with

Rectangle workingArea = System.Windows.Forms.Screen.PrimaryScreen.WorkingArea; // Reference System.Windows.Forms and set left, top, width and height accordingly. 
```

我认为这是您可以做的最好的事情，而无需编写“大量”代码（这会将其置于主屏幕的工作区域）。如果你真的想限制你的窗口跨越多个显示器当然是可能的，但需要一些工作。一个好的起点是[WindowInteropHelper](http://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.aspx)类。

# jquery - 滑动/切换 css

> ID：13493904
> 
> 赞同：0
> 
> 时间：2012-11-21T13:04:03.207
> 
> 标签：jquery, css, animation, toggle

有没有办法从左到右滑入和滑出一个div。用户必须点击“clickthis”才能切换。

示例CSS：

```
.container{width:100px; position:absolute; left:-70px;}
.container .open{left:0px;}
.button{display:block; top:0px; right:0px; width:20px; height:20px;position:relative; 
```

示例 HTML：

```
<div class="container" id="slide1">
    <div class="button" id="clickthis"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:09:31.093

您可以使用`show()`和`hide()`滑入和滑出您的元素

例如：

```
$("<your-element>").show("slide", { direction: "left" }, 100); 
```

和

```
$("<your-element>").hide("slide", { direction: "left" }, 100); 
```

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/q/3103366/1370034)。

您可以查看[本教程](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)以学习在不同方向上滑动元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:10:13.017

你可以使用它（但你需要 jQuery）：

```
$('#clickthis').click(function() {
    $('#slide1').toggleClass('open');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:13:16.603

是的，但是如果你点击“clickthis”，当div“slide1”关闭时它也会隐藏，对吧？

好吧，如果我理解你的问题，从右向左滑动并关闭 div 你应该实现这样的代码：

```
$(document).ready(function() {
  $('#clickthis').click(function() {
    $('#slide1').animate({width: 'toggle'});
  });
}); 
```

无论如何，对于不同的幻灯片效果有一个很棒的教程：http: [//www.learningjquery.com/2009/02/slide-elements-in-different-directions](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T13:25:27.603

您可以使用 jQuery 切换功能滑入滑出：-

```
$( ".button" ).click(function() {
    $( "div" ).toggle( "slide", { direction: "left" }, "slow" );
}); 
```

例如请参考：- [Jquery Slide in/Slide out](http://jsfiddle.net/jigneshparmar/BzfnZ/)

# extjs - 使用extjs在表单中多次显示文本字段

> ID：13493906
> 
> 赞同：1
> 
> 时间：2012-11-21T13:04:07.653
> 
> 标签：extjs, extjs4, extjs4.1, extjs4.2

我有一个要求，我必须在表单中多次显示来自模型的特定值。但是当我尝试它时，表单只会加载第一个被映射的引用而不是其他引用。

型号代码

```
 Ext.define('USOC',{
            extend: 'Ext.data.Model',
            fields: [
                {name: 'USOCCode', mapping: 'Detail > USOCCode'},
                'USOCCode',
                'TariffReference',
                'Telephone',
                'EffectiveDate', 
```

表格代码

```
items: [{
                                                        columnWidth: 0.4,
                                                        margin: '3 0 0 10',
                                                        xtype: 'container',
                                                        layout:'anchor',
                                                        height: 280,
                                                        defaults: {
                                                            labelWidth: 150
                                                        },
                                                        defaultType: 'textfield',
                                                        items: [{
                                                        xtype: 'container',
                                                        layout: 'hbox'
                                                        },
                                                        {
                                                            xtype: 'fieldset',
                                                            title: 'Recurring Charge Footnote Key',
                                                            columnWidth:1.5,
                                                            layout: 'column',
                                                            defaultType: 'textfield',
                                                            width:1285,
                                                            //height:200,
                                                            defaults: {
                                                            labelWidth: 120,
                                                            margin: '3 0 0 40',
                                                            fieldStyle:"border:none 0px black",
                                                            readOnly: true
                                                            },
                                                            items: [{
                                                                fieldLabel: 'Universal Service Ordering Code',
                                                                name: 'USOCCode',
                                                                    width: 350,
                                                                    labelWidth: 180
                                                            },{
                                                                fieldLabel: 'Footnote Key',
                                                                name: 'FootnoteKey',
                                                                    width: 250
                                                            },{
                                                                fieldLabel: 'Description',
                                                                name: 'Description1',
                                                                    width: 500
                                                            }]
                                                        },
                                                        {
                                                            xtype: 'fieldset',
                                                            title: 'Non - Recurring Charge Footnote Key',
                                                            columnWidth:1.5,
                                                            layout: 'column',
                                                            defaultType: 'textfield',
                                                            width:1285,
                                                            //height:200,
                                                            defaults: {
                                                            labelWidth: 120,
                                                            margin: '3 0 0 40',
                                                            fieldStyle:"border:none 0px black",
                                                            readOnly: true
                                                            },
                                                            items: [{
                                                                fieldLabel: 'Universal Service Ordering Code',
                                                                name: 'USOCCode',
                                                                    width: 350,
                                                                    labelWidth: 180
                                                            },{
                                                                fieldLabel: 'Footnote Key',
                                                                name: 'FootnoteKey1',
                                                                    width: 250
                                                            },{
                                                                fieldLabel: 'Description',
                                                                name: 'Description2',
                                                                    width: 500
                                                            }] 
```

在上面的代码中，我试图为 fieldSet 'Recurring Charge Footnote Key' 和 'Non - Recurring Charge Footnote Key' 显示 USOCCode。但是该值仅显示在第一个引用中，而不是第二个引用中。我在 API 上读到该名称必须是唯一的，但如果我必须显示两次，是否有相同的解决方法？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:12:45.213

好吧，我想您将需要一个自定义字段来委托设置，例如

```
Ext.define('Ext.ux.form.field.Delegate',{
    extend: 'Ext.form.field.Hidden',
    alias: 'widget.delegatefield'

    width: 0,
    height: 0,
    setValue: function(val) {
        va me = this;
        me.setBoundFields(val);
        me.callParent();
    }
}); 
```

它有一个回调方法作为参数，在设置字段时调用。下面我已将其集成到您的代码中

```
items: [
    {
        columnWidth: 0.4,
        margin: '3 0 0 10',
        xtype: 'container',
        layout:'anchor',
        height: 280,
        defaults: {
            labelWidth: 150
        },
        defaultType: 'textfield',
        items: [
            {
                xtype: 'container',
                layout: 'hbox'
            },
            {
                xtype: 'delegatefield',
                name: 'USOCCode',
                setBoundFields: function(val) {
                    var fields = Ext.ComponentQuery.query('[ident=USOCCode]'),
                        len = fields.length,
                        i = 0;
                    for(;i<len;i++) {
                        fields.setValue(val);
                    }
                }
            },
            {
                xtype: 'fieldset',
                title: 'Recurring Charge Footnote Key',
                columnWidth:1.5,
                layout: 'column',
                defaultType: 'textfield',
                width:1285,
                //height:200,
                defaults: {
                labelWidth: 120,
                margin: '3 0 0 40',
                fieldStyle:"border:none 0px black",
                readOnly: true
                },
                items: [
                    {
                        fieldLabel: 'Universal Service Ordering Code',
                        ident: 'USOCCode',
                        width: 350,
                        labelWidth: 180
                    },
                    {
                        fieldLabel: 'Footnote Key',
                        name: 'FootnoteKey',
                        width: 250
                    },
                    {
                        fieldLabel: 'Description',
                        name: 'Description1',
                        width: 500
                    }
                ]
            },
            {
                xtype: 'fieldset',
                title: 'Non - Recurring Charge Footnote Key',
                columnWidth:1.5,
                layout: 'column',
                defaultType: 'textfield',
                width:1285,
                //height:200,
                defaults: {
                    labelWidth: 120,
                    margin: '3 0 0 40',
                    fieldStyle:"border:none 0px black",
                    readOnly: true
                },
                items: [
                    {
                        fieldLabel: 'Universal Service Ordering Code',
                        ident: 'USOCCode',
                        width: 350,
                        labelWidth: 180
                    },{
                        fieldLabel: 'Footnote Key',
                        name: 'FootnoteKey1',
                        width: 250
                    },{
                        fieldLabel: 'Description',
                        name: 'Description2',
                        width: 500
                    }
                ]
            }
        ]
    } 
```

# database - RoR：“rake db:seed”需要两个小时

> ID：13493910
> 
> 赞同：2
> 
> 时间：2012-11-21T13:04:17.200
> 
> 标签：database, ruby-on-rails-3.2, rails-postgresql

我有个问题。命令 'rake db:seed' 需要两个小时，因为 myfriends.txt 有超过 3 个 Miliionen 条目：

```
File.open("lib/friends_name/myfriends.txt", "r").each_line do |row|
    row = row.encode('utf-8', 'iso-8859-1').split(',')
    Friend.create(name: row[0], first_name: row[1], age: row[2], sex: row[3], address: row[4])
end 
```

有更快的解决方案吗？我正在使用postgresql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:17:56.403

使用 PostgreSQL 的 COPY 函数。这在我写它的时候有效，但是我已经有一段时间没有使用它了......

[在不同服务器上使用 Rails 的 postgresql COPY 命令问题](https://stackoverflow.com/questions/6779925/problems-with-postgresql-copy-command-with-rails-on-different-server/6780870#6780870)

重新粘贴代码：

```
conn = ActiveRecord::Base.connection_pool.checkout
raw  = conn.raw_connection
raw.exec("COPY tablename (col1, col2, col3) FROM STDIN")
# open up your CSV file looping through line by line and getting the line into a format suitable for pg's COPY...
rc.put_copy_data line
# once all done...
rc.put_copy_end
while res = rc.get_result do; end # very important to do this after a copy
ActiveRecord::Base.connection_pool.checkin(conn) 
```

# facebook - Facebook 喜欢 wordpress 内容作为 CMS 中的 iFrame

> ID：13493913
> 
> 赞同：1
> 
> 时间：2012-11-21T13:04:20.573
> 
> 标签：facebook, iframe, share, facebook-like

我在一个机构的 CMS 中有一个 wordpress 博客！我无法改变这一点。wordpress-blog 在 CMS 中实现为 iFrame。我尝试了一些用于社交媒体的 wordpress 插件，包括 Facebook 的点赞。但不幸的是，facebook 没有找到博文的内容！有时它会获取博客文章的内容和图片，有时它只是获取 CMS 的图片，有时它只是发布链接。特别是如果我想通过在 facebook 上“发布”wordpress 的博客文章来手动分享它。

有没有可能让 facebook 手动知道相关内容在哪里（可能是通过 div-id 或其他什么？）

# java - 我可以在Java中将对象字段标记为唯一吗

> ID：13493914
> 
> 赞同：1
> 
> 时间：2012-11-21T13:04:28.013
> 
> 标签：java, unique

在主题中，我可以在 Java 中将对象字段标记为唯一吗？我想在课堂上拥有唯一的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:08:07.893

您可以使用静态变量创建唯一 ID，该变量在每次创建对象时递增并分配给您的 ID 变量：

```
private static int globalID = 0;
private int ID;
public obj()
{
   globalID++;
   this.ID = globalID;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:05:35.403

不，那是不可能的。您必须在 Controller 类中管理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:24:04.290

当您不关心唯一字段的内容时，除了它们必须是唯一的，您可以使用 nukebauer 的解决方案。

但是，当您想要手动设置该值并在该值已被该类的另一个实例使用时引发异常时，您可以在静态集中跟踪分配的值：

```
class MyObject {
    private Integer id;
    private static Set<Integer> assignedIds = new HashSet<Integer>();

    public void setId(int id) throws NotUniqueException {
         if (!this.id.equals(id) {
             if (assignedIds.contains(id) {
                 throw new NotUniqueException();
             }
             assignedIds.add(id);
             this.id = id;
         }
    }
} 
```

**顺便说一句：**请注意，这两个选项都不是线程安全的！这意味着当两个线程同时创建一个实例/设置一个 ID 时，它们可能仍然获得相同的 ID。当您想在多线程环境中使用它时，您应该将代码包装在一个同步块中，该块在静态变量上同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T13:30:09.997

您的问题有点含糊，但我将根据有限的信息尝试回答。

> 我想在课堂上拥有唯一的 id。

如果您希望通过众所周知的框架（例如 Hibernate）为持久化类指定唯一 ID，您可以通过[HBM 映射](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp-mapping)或[@Id 注释](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-identifier)来实现。

如果您希望确保特定 Class 的实例是唯一的（从运行时的角度来看），那么您应该覆盖 .equals 方法并根据您用作“唯一 id”的字段在 .equals 中进行比较类”。如果您想要某种特定字段是您的“唯一 ID”的开发时间指示器，您总是可以创建自定义注释。

这是来自不同 StackOverflow 帖子的 excellet 答案，关于[如何使用 Apache Commons Lang library 覆盖 .equals 和 .hashCode](https://stackoverflow.com/a/27609/463196)。您可以使用它，只需修改 .equals 覆盖以比较您用作“唯一 ID”的任何字段。

# c++ - CRC编码程序编译错误

> ID：13493917
> 
> 赞同：1
> 
> 时间：2012-11-21T13:04:40.307
> 
> 标签：c++

我为执行 CRC 编码的程序编写了以下代码。我以我们在课堂上学习的 C 程序为模型。它给出了一些我无法纠正的编译错误。我在代码之后提到了它们。

```
I wrote the following code for a program that performs CRC encoding. I modeled it on a C program that we were taught in class. It gives some compilation errors that I can't correct. I have mentioned them after the code.

1 #include<iostream>
2 #include<string.h>
3
4 using namespace std;
5
6 class crc
7 {
8   char message[128],polynomial[18],checksum[256];
9   public:
10  void xor()
11  {
12      for(int i=1;i<strlen(polynomial);i++)
13          checksum[i]=((checksum[i]==polynomial[i])?'0':'1');
14  }
15  crc()    //constructor
16  {
17      cout<<"Enter the message:"<<endl;
18      cin>>message;
19      cout<<"Enter the polynomial";
20      cin>polynomial;
21  }
22  void compute()
23  {
24      int e,i;
25      for(e=0;e<strlen(polynomial);e++)
26      checksum[e]=message[e];
27      do
28      {
29          if(checksum[0]=='0')
30          xor();
31          for(i=0;i<(strlen(polynomial)-1);i++)
32              checksum[i]=checksum[i+1];
33          checksum[i]=message[e++];
34      }while(e<=strlen(message)+strlen(checksum)-1);
35  }
36  void gen_proc() //general processing
37  {
38      int mesg_len=strlen(message);
39      for(int i=mesg_len;i<mesg_len+strlen(polynomial)-1;i++)
40          message[i]='0';
41      message[i]='\0'; //necessary?
42      cout<<"After appending zeroes message is:"<<message;
43      compute();
44      cout<<"Checksum is:"<<checksum;
45      for(int i=mesg_len;i<mesg_len+strlen(polynomial);i++)
46      message[i]=checksum[i-mesg_len];
47      cout<<"Final codeword is:"<<message;
48  }
49 };
50 int main()
51 {
52  crc c1;
53  c1.gen_proc();
54  return 0;
55 } 
```

编译错误是：

```
crc.cpp:10: error: expected unqualified-id before ‘^’ token
crc.cpp: In member function ‘void crc::compute()’:
crc.cpp:30: error: expected primary-expression before ‘^’ token
crc.cpp:30: error: expected primary-expression before ‘)’ token
crc.cpp: In member function ‘void crc::gen_proc()’:
crc.cpp:41: warning: name lookup of ‘i’ changed for ISO ‘for’ scoping
crc.cpp:39: warning:   using obsolete binding at ‘i’ 
```

我一直在网上检查这些错误，我唯一看到的是由不正确的数组处理引起的错误。我已经仔细检查了我的代码，但我似乎没有执行任何不正确的数组访问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T13:06:29.863

`xor`是 C++ 中的保留关键字。您应该将该函数重命名为其他名称。

编译器实际上并不是“看到”一个标识符，而是一个关键字。如果在您的代码片段中，您将替换`xor`为`^`明显的语法错误变得清晰。

# git - 在 TortoiseGit 日志消息对话框中隐藏 git 注释

> ID：13493921
> 
> 赞同：1
> 
> 时间：2012-11-21T13:04:50.610
> 
> 标签：git, tortoisegit, gerrit, refspec

我正在与 Gerrit 和 TortoiseGit 一起工作。当我显示日志时，它显示了许多带有注释的提交

```
Update notes for submitted changes 
```

它们与我的工作提交无关。看起来它们来自参考文献“**注释/评论**”。我该如何隐藏它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-21T05:41:17.140

右键单击链接（见下图），然后单击`All basic refs`上下文菜单中的项目。 [![在此处输入图像描述](../Images/46c71811abaaad620ee03158cbce6629.png)](https://i.stack.imgur.com/qRaSP.png)

然后，注释参考不再显示：

[![在此处输入图像描述](../Images/d0c34a6652ef7b4a81051c43498426bb.png)](https://i.stack.imgur.com/onMFY.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:45:13.623

这是笔记的参考。在那里很正常。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-22T10:37:34.517

我无法真正删除它们，但这对我有帮助：

我删除了文件

```
.git\refs\notes\review 
```

# javascript - 防止图像拖动选择

> ID：13493928
> 
> 赞同：3
> 
> 时间：2012-11-21T13:05:15.077
> 
> 标签：javascript, image, select, drag

我在整个互联网上都看过，但没有发现任何有用的东西。

我希望我的图片不被选中，例如带有背景图片 ( `<div style = "background-image : 'moo.png';"> </div>`)的 div

我不能使用背景图像，因为我需要一个图像映射来实现功能。

我的代码如下所示：

的CSS，

```
.filmmakers #map {

-moz-user-select : -moz-none;
-khtml-user-select : none;
-webkit-user-select : none;
-ms-user-select : none;
-o-user-select : none;
user-select : none;

}

.filmmakers #map::selection {

   color : rgba(0, 0, 0, 0);

} 
```

html,

```
<img id = "map" src = "WorldMap.png" alt = "Map" unselectable = "on" style = "left : 0px; top : 0px;" /> 
```

javascript,

```
var map = document.getElementById('map');

makeUnselectable(map);

function makeUnselectable(node) {

if (node.nodeType == 1) {

   node.setAttribute("unselectable", "on");

}

   var child = node.firstChild;

while (child) {

   makeUnselectable(child);
   child = child.nextSibling;

}

} 
```

如您所见，我仍然得到拖动图标，它与地图的功能相混淆：

[https://dl.dropbox.com/u/107533178/CampusRoyal/Filmmakers.html](https://dl.dropbox.com/u/107533178/CampusRoyal/Filmmakers.html)

请帮助并感谢您花时间阅读我的帖子，非常感谢您的关注。

干杯!

米索斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T13:13:35.510

你需要：

```
window.ondragstart = function() { return false; } 
```

如果你使用 jQuery

```
$("img").mousedown(function(){
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T13:25:12.587

在这里回答：[https ://stackoverflow.com/a/11135622/1722914](https://stackoverflow.com/a/11135622/1722914)

用户这个 css ：

```
-moz-user-select: none;
-webkit-user-select: none;
user-select: none; 
```

# objective-c - CGImage转灰度

> ID：13493932
> 
> 赞同：0
> 
> 时间：2012-11-21T13:05:35.667
> 
> 标签：objective-c, macos, core-graphics

有没有比转换`CGImage`为灰度更简单、更短的方法

1.  把它变成`CIImage`
2.  申请`CIFilter`
3.  转向`NSBitmapImageRep`然后回到`CGImage`？

# git - blackberry10 c++ .gitignore？

> ID：13493946
> 
> 赞同：4
> 
> 时间：2012-11-21T13:06:13.827
> 
> 标签：git, gitignore, blackberry-10

我有一个使用 C/C++ Native SDK 进行 BB10 开发的 git repo。你有关于 .gitignore 文件的建议，或者像在[https://github.com/github/gitignore](https://github.com/github/gitignore)上找到的模板吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T06:14:34.823

这是我`.gitignore`目前的文件（SDK 10.1）。请记住，随着功能不断添加/更改，此文件可能会相应更改。

```
arm/
x86
.settings/
*~
config.pri
.device
assets/.assets.index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:31:09.680

并不是说我付出了很多努力，而是我一直在使用：

```
*.o
*.a
*.bar
.preview*
.moc
.obj
<projectname>
arm/Makefile
arm/Makefile.Debug
arm/Makefile.Release
x86/Makefile
x86/Makefile.Debug
x86/Makefile.Release 
```

项目名称在哪里。IDE 会使用您在 repo 中不需要的名称创建一个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-16T10:28:32.253

这是我用于单个 bb10 项目的 gitignore（不适用于工作区）

```
# Compiled Object files
*.slo
*.lo
*.o

# Compiled Dynamic libraries
*.so

# Compiled Static libraries
*.lai
*.la
*.a

/.settings/
/.device
/config.pri
/arm/
/x86/
assets/.preview*
assets/.assets.index 
```

# jquery - 如何使用 each() 选择第一个收音机？

> ID：13493949
> 
> 赞同：1
> 
> 时间：2012-11-21T13:06:14.790
> 
> 标签：jquery, jquery-ui, jquery-plugins

选择第一个单选按钮`Jquery.each`

是否有任何选项可以从每个 div 中选择第一个收音机

```
<div>
<table class="sortable accountTable float_left">
      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group1" checked='checked' /></td>
        <td>Organisation structure 1</td>
      </tr>
      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group2" /></td>
        <td>Organisation structure 2</td>
      </tr>

      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group3" /></td>

        <td>Organisation structure 3</td>
      </tr>
      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group4" /></td>
        <td>Organisation structure 4</td>
      </tr>
</table>
 </div>
<div>
<table class="sortable accountTable float_left">
      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group1" checked='checked' /></td>
        <td>Organisation structure 1</td>
      </tr>
      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group2" /></td>
        <td>Organisation structure 2</td>
      </tr>

      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group3" /></td>

        <td>Organisation structure 3</td>
      </tr>
      <tr>
        <td class="textlmiddle"><input name="acc_number2" type="radio" value="" rel=
        ".structure_group4" /></td>
        <td>Organisation structure 4</td>
      </tr>
</table>
 </div>
<div>
<table class="sortable accountTable float_left">
      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group1" checked='checked' /></td>
        <td>Organisation structure 1</td>
      </tr>
      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group2" /></td>
        <td>Organisation structure 2</td>
      </tr>

      <tr>
        <td class="textlmiddle"><input type="radio" value="" rel=
        ".structure_group3" /></td>

        <td>Organisation structure 3</td>
      </tr>
      <tr>
        <td class="textlmiddle"><input name="acc_number2" type="radio" value="" rel=
        ".structure_group4" /></td>
        <td>Organisation structure 4</td>
      </tr>
</table>
 </div> 
```

​这里是[演示](http://jsfiddle.net/ytU3b/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T13:08:51.573

我相信这会奏效：

```
$('body > div').each(function() {
    $('input[type="radio"]', this).first().prop('checked', true);
}); 
```

# java - 有没有人尝试通过 JNI 将 protobuf 对象从 C++ 返回到 Java？

> ID：13493953
> 
> 赞同：2
> 
> 时间：2012-11-21T13:06:35.043
> 
> 标签：java, c++, java-native-interface, protocol-buffers

我有一个 Java 代码，它通过 JNI 调用本机 C++ 代码。今天，由 C++ 代码生成的结果以 XML 字符串的形式返回。

我想用 Protocol Buffers 对象替换它。

现在，在生成 PB 对象后，我有两个选择：

*   将其序列化为字符串并返回
*   尝试并返回对象本身。

有没有人尝试过第二种选择？它会起作用吗？它有什么潜在的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:56:50.387

*您的问题对“协议缓冲区对象*”的含义有些不清楚。我假设您的意思是消息对象，由*.proto*文件生成`protoc`。那我敢说不行。虽然 PB*序列化形式*确实是跨平台和跨语言的，但*实现*不是。由于 JNI 提供了大量的 C 函数，您可以在 C(++) 中调用 Java 对象的方法，但没有反向接口可以从 Java 中执行相同的操作（在 C++ 对象上）。

但无论如何，PB 对象只不过是一个检测结构。该检测仅对 PB 序列化有用。如果你不使用序列化，PB 对你来说根本没用。如果您的 XML 至少具有某种稳定的结构（PB 无论如何都不会适应未知的结构），您为什么不将它反映在普通的 Java 对象中，通过 JNI 在 C++ 端传递它并在那里填充，使用提到的所有 JNI 函数?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-17T06:12:09.657

是的，必须序列化一个对象`SerializeToArray(..)`并将字节作为字节数组或缓冲区传递。看看它是如何工作[的](https://github.com/4ntoine/JniBenchmarking/blob/0447e8d26dec0d9293cad3abbec1b9d2842e9e52/engine/src/main/cpp/libengine.cpp#L152)。

# java - 如何添加正则表达式以匹配字母数字字符和一些特殊字符

> ID：13493954
> 
> 赞同：0
> 
> 时间：2012-11-21T13:06:46.587
> 
> 标签：java, regex

我有带有特殊字符的单词，例如

```
Ex: ABC12-xy
    ABCD
    ABC12_12
    12-AB_xy 
```

我尝试了以下但不工作

```
'(-\\w+)'   ,   '[-A-Za-z_0-9]' 
```

但不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:11:46.407

试试这个正则表达式

```
[\w-]+ 
```

与以下所有匹配

```
ABC12-xy
ABCD
ABC12_12
12-AB_xy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:11:46.250

用于`[\w-]+`匹配整个字符串。您可以使用`^`and`$`来指定行的开始和结束。例如`^[\w-]+$`，仅当该行包含所有单词或`-`字符时才匹配整行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T13:19:18.557

```
String regex = "[A-Za-z0-9_\\-]+";
System.out.println(java.util.regex.Pattern.matches(regex, "ABC12-xy"));
System.out.println(java.util.regex.Pattern.matches(regex, "ABCD"));
System.out.println(java.util.regex.Pattern.matches(regex, "ABC12_12"));
System.out.println(java.util.regex.Pattern.matches(regex, "12-AB_xy")); 
```

# bash - 通过 SSH 远程传递命令的 Bash 脚本

> ID：13493956
> 
> 赞同：1
> 
> 时间：2012-11-21T13:06:54.093
> 
> 标签：bash, ssh, grep, find, io-redirection

我刚开始使用 bash 并且正在尝试编写一个脚本来基于以下内容远程搜索服务器中的特定文件：（a）设备名称和（b）字符串。我的目标是为指定的设备获取包含“字符串”的所有输出。当我尝试下面的脚本时，它只是挂起。但是，当我直接在服务器上运行命令时（“grep -i“router1”/var/log/router.log | grep -i“UPDOWN”），它可以工作。有什么想法吗？有什么想法吗？

```
#!/bin/bash
#
read -p "Enter username: " user
read -p "Enter device name: " dev
read -p "Enter string: " str
while read /home/user1/syslogs
do 
 ssh "$user"@server1234 'grep -i "$dev" /var/log/"$syslogs" 2> /dev/null | grep -i "$str"'
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:38:59.080

您似乎误用了该`read`命令。您没有指定要从中读取的文件作为参数；`read`总是从标准输入读取。不清楚你想对从文件中读取的值做什么，但你想要这样的东西：

```
read -p "Enter username: " user
read -p "Enter device name: " dev
read -p "Enter string: " str

while read fileName; do
    # Also: I'm borrowing sputnick's solution to the nested quote problem.
    ssh $user@server1234 <<EOF
        grep -i "$dev" /var/log/$fileName 2>/dev/null | grep -i "$str"
EOF
done < /home/user1/syslogs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T16:37:14.103

该消息`Pseudo-terminal will not be allocated because stdin is not a terminal`是由于`stdin`远程主机的 shell 正在从此处的文档重定向，并且没有指定远程主机执行的命令，即远程主机首先假设需要分配一个伪-terminal 由于缺少命令而用于交互式登录会话（请参阅`ssh`手册页的概要：） ，但随后意识到其外壳不是终端，因为它是从此处的文档重定向的。结果是远程主机拒绝分配一个伪终端。`ssh ... [user@]hostname [**command**]``stdin`

在给定情况下的解决方案是只指定一个 shell 作为远程主机执行此处文档中给出的命令的命令。

作为将 shell 指定为命令的替代方法，可以预先告知远程主机不需要使用`-T`开关分配伪终端。

`-t`另一方面，仅当指定的命令需要远程主机上的交互式登录 shell 会话（例如`top`或`vim`）时，才需要该开关。

```
- ssh $user@server1234 <<EOF ...
+ ssh $user@server1234 /bin/sh <<EOF ...
+ ssh -T $user@server1234 <<EOF ... 
```

# java - 在 Eclipse 中显示来自 Ant 脚本的 JUnit 测试结果——有可能吗？

> ID：13493959
> 
> 赞同：0
> 
> 时间：2012-11-21T13:07:13.007
> 
> 标签：java, eclipse, ant, junit

在我尝试通过 Ant 实现 JUnit 测试套件时，我偶然发现了这样一个问题：当从 Eclipse 运行时，是否可以让套件结果显示在典型的 Eclipse JUnit 窗口中。

可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:02:17.593

您可以在 XML 结果文件上使用 Right-Click -> Open With -> JUnit View 来实现此目的。

# c# - 从 EF 中的字符串获取表

> ID：13493960
> 
> 赞同：0
> 
> 时间：2012-11-21T13:07:14.100
> 
> 标签：c#, .net, entity-framework, ado.net

我正在尝试从实体框架上下文中获取一个表（实体），而我所拥有的只是一个字符串参数输入到我的服务中。

在 ADO.NET 中，我会执行以下操作：

var tableName = "tablePrefix" + inputString;

如何在 EF 中解决这个问题？

任何帮助都感激不尽 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:42:44.173

要在不预先知道类型的情况下动态获取 Dbset，您可以使用 DbContext 上的 Set 方法。所以你可以做到。

```
var type = Type.GetType("MyType");
var set = myContext.Set(type); 
```

一旦你有了集合，你就可以通过主键等查询来查找实体。

正如基里尔所说，你为什么要这样做？

干杯克里斯

# java - 如何使 Windows 文件关联与非 ASCII 文件名一起使用？

> ID：13493965
> 
> 赞同：2
> 
> 时间：2012-11-21T13:07:29.890
> 
> 标签：java, windows, unicode, batch-file, file-association

我需要为某个文件类型注册文件关联——事实上，我只需要启动一个带有某些参数和该文件名称的某个 Java 程序。

我得到了以下几点：

```
// in fff-assoc.cmd file:
assoc .fff=SomeFile
ftype SomeFile=java -jar some.jar <arguments1> "%%1" <arguments2> 
```

它适用于 ASCII 文件名。但是当我尝试双击名称中包含非 ASCII 符号的文件时，传递的参数看起来像“????” （每个字符的 int 值 = 63）。

我该如何解决这些关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:29:27.453

如果 bobince 说的是准确的，并且您不能可靠地将数据直接传递给 java，则另一种解决方案是用另一种语言（例如 C、C++ 或 C#）编写一个小的“shim”程序。

这个想法是程序将输入获取为 UNICODE，对其进行编码，以便仅使用 ASCII 字符（例如，通过使用 base64，或者甚至像将每个字符编码为其数字等价物一样简单），然后将命令行参数组装为使用 CreateProcess 使用并启动 java 本身。

您的 Java 代码可以“撤消”编码，重构 UNICODE 名称并继续使用它。这是一种迂回的方式，需要为您的软件添加一个额外的组件，但它应该可以解决上面详述的限制，如果这确实是一个实际限制的话。

*更新*：这是 shim 程序的基本代码。它将输入编码为整数序列，用冒号分隔。它在错误检查方面没有多大作用，您可能希望稍微改进它，但它至少应该让您开始并朝着正确的方向前进。

您应该获取 Visual Studio Express（如果您还没有 Visual Studio）并创建一个新的 Visual C++ 项目，选择“Win32”并选择“Win32 项目”。选择“Win32 应用程序”。创建项目后，将显示的 .cpp 文件中的所有内容替换为以下代码：

```
#include "stdafx.h"
#include <string>

int APIENTRY _tWinMain(HINSTANCE, HINSTANCE, LPTSTR lpCmdLine, int)
{
    std::string filename;

    while((lpCmdLine != NULL) && (*lpCmdLine != 0))
    {
        if(filename.length() != 0)
            filename.append(":");

        char buf[32];

        sprintf(buf, "%u", (unsigned int)(*lpCmdLine++));

        filename.append(buf);   
    }

    if(filename.length() == 0)
        return 0;

    PROCESS_INFORMATION pi;
    memset(&pi, 0, sizeof(PROCESS_INFORMATION));

    STARTUPINFOA si;
    memset(&si, 0, sizeof(STARTUPINFOA));
    si.cb = sizeof(STARTUPINFOA);

    char *buf = new char[filename.length() + 256]; // ensure that 256 is enough for your extra arguments!

    sprintf(buf, "java.exe -jar some.jar <arguments1> \"%s\" <arguments2>", filename.c_str());

    // CHECKME: You hard-coded the path for java.exe here. While that may work on your system
    // is it guaranteed that it will work on every system?

    if(CreateProcessA("C:\\Program Files\\Java\\jre7\\bin\\java.exe", buf, NULL, NULL, TRUE, 0, NULL, NULL, &si, &pi))
    {
        CloseHandle(pi.hThread);
        CloseHandle(pi.hProcess);
    }

    delete[] buf;

    return 0;
} 
```

您应该能够相当容易地弄清楚如何编译等细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:31:57.777

> 我只需要使用某些参数和该文件的名称启动某个 Java 程序。

不幸的是，由于 Java 用于接收参数输入（以及其他内容）的标准 C 库的 MS 实现，这种“公正”实际上是不可能的。除非您绕过标准 Java 或 C 接口直接使用本机 Win32 API，

有关背景，请参阅[此问题](https://stackoverflow.com/questions/7660651/passing-command-line-unicode-argument-to-java-code)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T09:57:26.090

从命令行调用 java 时，可以指定参数的编码（将用于在 中创建字符串`args[]`）：

```
java -jar -Dsun.jnu.encoding=cp1252 yourFileName 
```

使用非 ASCII 字符时，指定的字符集会影响`args[0]`. 不确定这是否适用于文件关联。

注意：我不确定该参数还有什么其他用途 -[这篇文章](https://stackoverflow.com/questions/1066845/what-exactly-is-sun-jnu-encoding)似乎没有说。

# resharper - Resharper 实时模板 - inn & ifn

> ID：13493977
> 
> 赞同：1
> 
> 时间：2012-11-21T13:08:07.000
> 
> 标签：resharper

我在 ReSharper 中是否有与 intelij 的“ifn”和“inn”实时模板类似的东西？
（“if not null”和“if null”模板）
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:19:34.720

ReSharper 没有内置这些​​，但您可以轻松地自己编写它们。只需转到*ReSharper > Templates Explorer... > Surround Templates*并添加一个新模板，如下所示：

```
if ($SELECTION$ == null)
{
    throw new ArgumentNullException("$SELECTION$");
} 
```

然后你可以选择一些东西并点击`Ctrl`+ `E`，`U`用你的模板包围选择：

![用选择器环绕](../Images/321c172a2d6d446c99f089ded4b31424.png)

就我而言，我将它添加到带有字母*F的**快速列表*中。

 *如果您希望能够键入`ifn`并按下`Tab`，则需要添加一个*实时模板*。这可以在*Template Explorer*中的*Live Templates*下完成，但内容必须不同：

```
if ($ARGUMENT$ == null)
{
    throw new ArgumentNullException("$ARGUMENT$");
} 
```

或者可能：

```
if ($ARGUMENT$ == null)
{
    $END$
} 
```

然后你可以写`ifn`（如果那是你指定的快捷方式）然后按`Tab`*

# javascript - 如何从jquery ajax成功内部调用父母方法

> ID：13493982
> 
> 赞同：0
> 
> 时间：2012-11-21T13:08:12.950
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [jquery 从父级引用这个](https://stackoverflow.com/questions/13474468/jquery-reference-this-from-parent)

这是我在此的头一篇博文。问题 - 如何从 ajax-success 调用警报？

```
var page = {

    alerts: function (json) {

        if (json == 'us') { alert("blablabla") } else {
            alert(json.login);
        }
    },

    ajax: function (obj) {

        $.ajax({
            type: 'post',
            url: './scripts/serv.php',
            dataType: 'json',
            data: { object: $.base64.encode(JSON.stringify(obj)) },

            success: function (json) {

// how to call from here alerts(json)?? this.alerts(json) - doesn't
// work only page.alerts(json) but i think its wrong way.

            },
            error: function (json) {
                alert('ajax failed');
            }
        })
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T13:12:02.013

您应该在 AJAX 请求之前存储对此的引用，因为`success`是从不同的范围调用的。

例子：

```
var page = {
    alerts: function(json){
        if (json=='us'){ alert("blablabla")} else{
        alert(json.login); }
    },
    ajax: function(obj){
        var me = this;

        $.ajax({
            type:'post',
            url:'./scripts/serv.php',
            dataType:'json',
            data:{object:$.base64.encode(JSON.stringify(obj))}, 

            success: function(json){
                // how to call from here alerts(json)?? this.alerts(json) - doesn't work only page.alerts(json) but i think its wrong way.
                me.alerts(json);
            },
            error: function(json){
                alert('ajax failed');
            }
        }); 
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:13:57.820

```
 var page={
alerts: function(json){

    if (json=='us'){ alert("blablabla")} else{
    alert(json.login); }
},

ajax: function(obj){
     var that = this;    <!-- PARENT OBJECT REFERENCE -->
            $.ajax({
                    type:'post',
                    url:'./scripts/serv.php',
                    dataType:'json',
                    data:{object:$.base64.encode(JSON.stringify(obj))}, 
        success: function(json){
          that.alerts(json)   <!-- USE THAT -->
        },
        error: function(json){
            alert('ajax failed');
        }
}) 

} } 
```

# android - 自定义视图样式

> ID：13493983
> 
> 赞同：0
> 
> 时间：2012-11-21T13:08:16.343
> 
> 标签：android, android-layout, android-view, android-custom-view

我对自定义视图的样式有问题。我想在不同的布局中使用不同的样式。但是我的样式没有应用。

**自定义视图布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"     
        <ImageView 
                   android:id="@+id/img"                       
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"/>

        <TextView 
                  android:id="@+id/txt"     
                  android:layout_width="wrap_content"
              android:layout_height="wrap_content"       
              android:layout_gravity="bottom|center_horizontal"               
</merge> 
```

**另一种布局中的定义：**

```
<com.buka.customviews.Bukaview
         android:id="@+id/bukaId"
         android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             style="@style/BukaStyle1"> 
```

**样式.xml**

```
<style name="BukaStyle1">
        <item name="android:textSize">10sp</item>
</style>

<style name="BukaStyle2">
        <item name="android:textSize">20sp</item>
</style> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:34:47.387

您应该创建一个自定义属性：
`<attr name="BukaStyleTextSize" format="dimensions" />`

然后在`TextView`自定义视图布局的标签中，放入：
`android:textSize="?attr:BukaStyleTextSize"`

最后，在您的样式中`styles.xml`放入：
`<item name="BukaStyleTextSize>10sp</item>`

# css - HTML div 与下面的 div 重叠内容。HTML CSS 初学者

> ID：13493989
> 
> 赞同：0
> 
> 时间：2012-11-21T13:08:31.187
> 
> 标签：css, html

我是 HTML 和 CSS 编码的新手。我正在尝试用 HTML 和 CSS 编写 Web 布局。由于我是 HTML 和 CSS 的新手，因此代码结构并不直观和整洁。

我附上了显示问题的屏幕截图。所有内部 div 都与 main_container div 相关，因此内部 div 有一个 top 属性，例如 top:100px; 等等

问题是，每当我在顶部 div 中插入更多内容时，内容就会与下面 div 中的内容重叠。任何人都可以改进代码结构，使其更加灵活，并在将内容插入顶部 div 时重新定位 div 的下方。

这是包含 html、css 和 img 文件的[ZIP](http://dl.dropbox.com/u/27899629/new-layout.zip)文件。

[截图链接](http://dl.dropbox.com/u/27899629/overlapping%20content.png)

我希望我能清楚地解释我的问题。

谢谢和问候，dkjain。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:25:34.957

使用 CSS 清除您的 DIV：

```
.clear{clear:both} 
```

对于 HTML：

```
<div class="clear">&nbsp;</div> 
```

在重叠的 DIV 之间使用它。

# asp.net - Windows Server 上未注册的 SOAP Client 3.0

> ID：13493995
> 
> 赞同：0
> 
> 时间：2012-11-21T13:08:54.993
> 
> 标签：asp.net, vb.net, soap, soap-client

我使用 VS 2010 和 VB.NET 开发了一个 Web 应用程序（网站）。我能够从 VS 成功运行该应用程序。但是当我在我的托管服务器上发布并上传它时，会出现此错误消息。

```
Retrieving the COM class factory for component with CLSID {7F017F97-9257-11D5-87EA-00B0D0BE6479} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
```

我已经下载了 SOAP 工具包 3.0 并将其导入到我的应用程序参考中。这是我的代码：

```
Imports MSSOAPLib30

Dim objSoapClient As New SoapClient30             '=== Create an instance of SoapClient

            '=== Set Client Properties
            objSoapClient.ClientProperty("ServerHTTPRequest") = True

            '=== Retrieve KWMP web services WSDL
            Call objSoapClient.mssoapinit("https://example.com/ReferencePayment?WSDL", "ReferencePayment")
            '=== Set connection property to be over SSL
            objSoapClient.ConnectorProperty("UseSSL") = False

            '=== Now consume the web sevices according to KWMP Specification
            Dim output As String = objSoapClient.verifyTransaction(RCode, "00105952-129251") 
```

**--更新** -- 除了上面的方法，我正在考虑使用 POST web 方法来消费 SOAP XML。这是 WCF 测试客户端生成的 xml 请求：

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none" />
   </s:Header>
   <s:Body s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
     <q1:verifyTransaction xmlns:q1="urn:Foo">
  <String_1 xsi:type="xsd:string">12345678901234567890</String_1>
  <String_2 xsi:type="xsd:string">00109902-129251</String_2>
</q1:verifyTransaction>
</s:Body>
</s:Envelope> 
```

我有方法使用返回内部服务器错误 500 的 SOAP XML !!!!! 你认为哪一部分是错的？！

```
 Public Function ServiceCall(RefCode As String) As String
    Dim resultXml As String
    Dim wbrqst As WebRequest = WebRequest.Create("https://modern.enbank.net/ref-payment/ws/ReferencePayment?WSDL")
    Dim httpreq As HttpWebRequest = DirectCast(wbrqst, HttpWebRequest)
    httpreq.Method = "POST"
    httpreq.ContentType = "Content-Type: text/xml; charset=utf-8"
    httpreq.Headers.Add("SOAPAction", "https://modern.enbank.net/ref-payment/ws/ReferencePayment")
    'httpreq.Headers.Add("<Action s:" + "ReferencePayment>")
    httpreq.ProtocolVersion = HttpVersion.Version11
    httpreq.Credentials = CredentialCache.DefaultCredentials
    Dim requestStream As Stream = httpreq.GetRequestStream()
    Dim streamWriter As New StreamWriter(requestStream, Encoding.ASCII)
    Dim sb As New StringBuilder()
    sb.Append("<s:Envelope xmlns:s='http://schemas.xmlsoap.org/soap/envelope/'>")
    sb.Append("<s:Body s:encodingStyle='http://schemas.xmlsoap.org/soap/encoding/' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>")
    sb.Append("<q1:verifyTransaction xmlns:q1='urn:Foo'>")
    sb.Append("xml:xsd='http://www.w3.org/2001/XMLSchema'")
    sb.Append("<verifyTransaction xmlns='urn:Foo'")
    sb.Append("<String_1 xsi:type='xsd:string'>12345678901234567890</String_1>")
    sb.Append("<String_2 xsi:type='xsd:String'>00109902-129251</String_2>")
    sb.Append("</q1:verifyTransaction> </s:Body></s:Envelope>")
    streamWriter.Write(sb.ToString())
    streamWriter.Close()
    Dim wr As HttpWebResponse = DirectCast(httpreq.GetResponse(), HttpWebResponse)
    Dim srd As New StreamReader(wr.GetResponseStream())
    resultXml = srd.ReadToEnd()
    Return resultXml

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:17:55.253

该工具似乎有问题，您可能想要使用 WCFTest Client，它应该与您的肥皂消息一起使用，这可以从 VS2010 文件夹中找到

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\WcfTestClient.exe

只需添加您要打开的服务，它就会为您即时创建客户端代理。

更新：

您可能希望使用添加 Web 引用并创建一个 Web 服务项目作为 VS 项目的一部分。

希望这可以帮助。

干杯

# python - 将 Ruby 移植到 Python

> ID：13493996
> 
> 赞同：2
> 
> 时间：2012-11-21T13:08:56.067
> 
> 标签：python, ruby, porting

我正在将一块 Ruby 移植到 Python。我已经移植了除以下代码之外的大部分代码。我真的不知道它做了什么。

变量 rest 将是一个代表电话号码的字符串。它只是真正的

```
country_handler = splitter_mapping[i][presumed_cc] 
```

我觉得很困惑。我意识到我可能可以在 python 中使用 kwargs，但我不太确定。

有任何想法吗？

```
module Phony

  class CountryCodes

    attr_reader :splitter_mapping

    def split_cc rest
      presumed_cc = ''
      1.upto(3) do |i|
        presumed_cc << rest.slice!(0..0)
        country_handler = splitter_mapping[i][presumed_cc]
        return [country_handler, presumed_cc, rest] if country_handler
      end
      # This line is never reached as CCs are in prefix code.
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:56:33.403

好吧，从代码和 Frederick Cheung 的评论来看，我认为翻译应该是这样的：

```
def slit_cc(rest):
    for i in range(1, 4): # country_code size
        presumed_cc = rest[0:i]
        country_handler = splitter_mapping[i].get(presumed_cc):
        if country_handler:
            return [country_handler, presumed_cc, rest]

    return None # shouldn't happen 
```

`splitter_mapping`似乎是一本字典。第一级键是 country_code 大小（字符串长度），第二级键是国家代码。这些值似乎是一个国家的电话拨号前缀。

# sql - 如何编写基于排名的选择查询？

> ID：13493998
> 
> 赞同：0
> 
> 时间：2012-11-21T13:09:00.327
> 
> 标签：sql

我有一张桌子

表格1

```
id   city    projects       Rank
----------------------------------
1    che        p2           2
2    bang       p1           1
3    che        p4           1
4    bang       p3           2
5    bang       p5           3
6    gur        p6           1
7    gur        p7           2 
```

根据排名我想选择我想要的城市和项目

```
 bang       p1            1
    che        p4           1
    gur        p6           1
    che        p2           2
    bang       p3           2
    gur        p7           2
    bang       p5           3 
```

select * from table1 where Rank = ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:11:38.730

```
select city,project,rank from table1 order by rank,project,city 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:12:37.480

尝试这个

```
 select city, projects, Rank from table order by Rank 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T13:13:05.480

在查询中使用`ORDER BY`子句。

```
SELECT city, projects, rank FROM table1 
order by rank 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T13:15:06.270

这里的很多答案都很好。

然而，在 SQL 中对语言结构使用 UPPERCASE 是常见的做法：

```
SELECT city,project,rank FROM table1 ORDER BY rank,project; 
```

:-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T13:11:45.500

我希望这能帮到您：

```
select city, projects, Rank from table1 
order by Rank, city, projects 
```

您还可以在`order by`子句中使用位置：

```
select city, projects, Rank from table1 
order by 3,1,2 
```

`0`底部的解决方案：

```
 select city, projects, Rank from table1 
    order by
    case 
     when Rank>0 then 1
     else 2
    end,
    Rank, city, projects 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T13:10:13.070

尝试这个...

```
select city,projects,rank from table1 group by rank order by rank,city,projects; 
```